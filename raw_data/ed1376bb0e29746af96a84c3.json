{
    "url": "http://localhost:9999/mynewsdesk/mnd-froala/js/mnd-froala.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Cross-site scripting (DOM-based)",
    "issueType": 2097936,
    "severity": "High",
    "confidence": "Firm",
    "issueBackground": "DOM-based cross-site scripting vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the HTML document in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause JavaScript code supplied by the attacker to execute within the user's browser in the context of that user's session with the application.<br><br>The attacker-supplied code can perform a wide variety of actions, such as stealing the victim's session token or login credentials, performing arbitrary actions on the victim's behalf, and logging their keystrokes.<br><br>Users can be induced to visit the attacker's crafted URL in various ways, similar to the usual attack delivery vectors for reflected cross-site scripting vulnerabilities. ",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based cross-site scripting vulnerabilities is not to dynamically write data into the HTML document that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing script code into the document. In many cases, the relevant data can be validated on a whitelist basis, to allow only content that is known to be safe. In other cases, it will be necessary to sanitize or encode the data. This can be a complex task, and depending on the context that the data is to be inserted may need to involve a combination of JavaScript escaping, HTML encoding, and URL encoding, in the appropriate sequence.",
    "issueDetail": "The application may be vulnerable to DOM-based cross-site scripting. Data is read from <b>window.location.href</b> and written to <b>the 'prepend()' function of JQuery</b> via the following statement:<ul><li>c.prepend('&lt;input type=\"hidden\" name=\"XHR_CORS_TRARGETORIGIN\" value=\"'+window.location.href+'\" /&gt;');</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/mynewsdesk/mnd-froala/js/mnd-froala.js",
                "path": "/mynewsdesk/mnd-froala/js/mnd-froala.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9teW5ld3NkZXNrL21uZC1mcm9hbGEvanMvbW5kLWZyb2FsYS5qcyBIVFRQLzEuMQ0KSG9zdDogbG9jYWxob3N0Ojk5OTkNCg0K",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTUxNzMxDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBGcmksIDA3IE5vdiAyMDE0IDE2OjE0OjQyIEdNVA0KTGFzdC1Nb2RpZmllZDogRnJpLCAwNyBOb3YgMjAxNCAxNjoxNDo0MiBHTVQNCg0KLyohCiAqIGZyb2FsYV9lZGl0b3IgdjEuMi4yIChodHRwOi8vZWRpdG9yLmZyb2FsYS5jb20pCiAqIENvcHlyaWdodCAyMDE0LTIwMTQgRnJvYWxhCiAqLwppZigidW5kZWZpbmVkIj09dHlwZW9mIGpRdWVyeSl0aHJvdyBuZXcgRXJyb3IoIkZyb2FsYSByZXF1aXJlcyBqUXVlcnkiKTshZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWZ1bmN0aW9uKGMsZCl7dGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGIuREVGQVVMVFMsYShjKS5kYXRhKCksIm9iamVjdCI9PXR5cGVvZiBkJiZkKSx0aGlzLmJyb3dzZXI9Yi5icm93c2VyKCksdGhpcy5kaXNhYmxlZExpc3Q9W10sdGhpcy5faWQ9KytiLmNvdW50LHRoaXMuX2V2ZW50cz17fSx0aGlzLmJsdXJyZWQ9ITAsdGhpcy4kd2luZG93PWEod2luZG93KSx0aGlzLiRkb2N1bWVudD1hKGRvY3VtZW50KSx0aGlzLiRvcmlnaW5hbF9lbGVtZW50PWEoYyksdGhpcy5pbml0KGMpLGEoYykub24oImVkaXRhYmxlLmZvY3VzIixhLnByb3h5KGZ1bmN0aW9uKCl7Zm9yKHZhciBiPTE7Yjw9YS5FZGl0YWJsZS5jb3VudDtiKyspYiE9dGhpcy5faWQmJmEod2luZG93KS50cmlnZ2VyKCJibHVyLiIrYil9LHRoaXMpKX07Yi5pbml0aWFsaXplcnM9W10sYi5jb3VudD0wLGIuVkFMSURfTk9ERVM9WyJQIiwiUFJFIiwiQkxPQ0tRVU9URSIsIkgxIiwiSDIiLCJIMyIsIkg0IiwiSDUiLCJINiIsIkRJViIsIkxJIiwiVEQiLCJUSCJdLGIuTEFOR1M9W10sYi5ERUZBVUxUUz17YWxsb3dlZEF0dHJzOlsiYWNjZXB0IiwiYWNjZXB0LWNoYXJzZXQiLCJhY2Nlc3NrZXkiLCJhY3Rpb24iLCJhbGlnbiIsImFsdCIsImFzeW5jIiwiYXV0b2NvbXBsZXRlIiwiYXV0b2ZvY3VzIiwiYXV0b3BsYXkiLCJhdXRvc2F2ZSIsImJhY2tncm91bmQiLCJiZ2NvbG9yIiwiYm9yZGVyIiwiY2hhcnNldCIsImNlbGxwYWRkaW5nIiwiY2VsbHNwYWNpbmciLCJjaGVja2VkIiwiY2l0ZSIsImNsYXNzIiwiY29sb3IiLCJjb2xzIiwiY29sc3BhbiIsImNvbnRlbnRlZGl0YWJsZSIsImNvbnRleHRtZW51IiwiY29udHJvbHMiLCJjb29yZHMiLCJkYXRhIiwiZGF0YS0uKiIsImRhdGV0aW1lIiwiZGVmYXVsdCIsImRlZmVyIiwiZGlyIiwiZGlybmFtZSIsImRpc2FibGVkIiwiZG93bmxvYWQiLCJkcmFnZ2FibGUiLCJkcm9wem9uZSIsImVuY3R5cGUiLCJmb3IiLCJmb3JtIiwiZm9ybWFjdGlvbiIsImhlYWRlcnMiLCJoZWlnaHQiLCJoaWRkZW4iLCJoaWdoIiwiaHJlZiIsImhyZWZsYW5nIiwiaWNvbiIsImlkIiwiaXNtYXAiLCJpdGVtcHJvcCIsImtleXR5cGUiLCJraW5kIiwibGFiZWwiLCJsYW5nIiwibGFuZ3VhZ2UiLCJsaXN0IiwibG9vcCIsImxvdyIsIm1heCIsIm1heGxlbmd0aCIsIm1lZGlhIiwibWV0aG9kIiwibWluIiwibXVsdGlwbGUiLCJuYW1lIiwibm92YWxpZGF0ZSIsIm9wZW4iLCJvcHRpbXVtIiwicGF0dGVybiIsInBpbmciLCJwbGFjZWhvbGRlciIsInBvc3RlciIsInByZWxvYWQiLCJwdWJkYXRlIiwicmFkaW9ncm91cCIsInJlYWRvbmx5IiwicmVsIiwicmVxdWlyZWQiLCJyZXZlcnNlZCIsInJvd3MiLCJyb3dzcGFuIiwic2FuZGJveCIsInNjb3BlIiwic2NvcGVkIiwic2VhbWxlc3MiLCJzZWxlY3RlZCIsInNoYXBlIiwic2l6ZSIsInNpemVzIiwic3BhbiIsInNyYyIsInNyY2RvYyIsInNyY2xhbmciLCJzcmNzZXQiLCJzdGFydCIsInN0ZXAiLCJzdW1tYXJ5Iiwic3BlbGxjaGVjayIsInN0eWxlIiwidGFiaW5kZXgiLCJ0YXJnZXQiLCJ0aXRsZSIsInR5cGUiLCJ0cmFuc2xhdGUiLCJ1c2VtYXAiLCJ2YWx1ZSIsInZhbGlnbiIsIndpZHRoIiwid3JhcCJdLGFsbG93ZWRUYWdzOlsiIS0tIiwiYSIsImFiYnIiLCJhZGRyZXNzIiwiYXJlYSIsImFydGljbGUiLCJhc2lkZSIsImF1ZGlvIiwiYiIsImJhc2UiLCJiZGkiLCJiZG8iLCJibG9ja3F1b3RlIiwiYnIiLCJidXR0b24iLCJjYW52YXMiLCJjYXB0aW9uIiwiY2l0ZSIsImNvZGUiLCJjb2wiLCJjb2xncm91cCIsImRhdGFsaXN0IiwiZGQiLCJkZWwiLCJkZXRhaWxzIiwiZGZuIiwiZGlhbG9nIiwiZGl2IiwiZGwiLCJkdCIsImVtIiwiZW1iZWQiLCJmaWVsZHNldCIsImZpZ2NhcHRpb24iLCJmaWd1cmUiLCJmb290ZXIiLCJmb3JtIiwiaDEiLCJoMiIsImgzIiwiaDQiLCJoNSIsImg2IiwiaGVhZGVyIiwiaGdyb3VwIiwiaHIiLCJpIiwiaWZyYW1lIiwiaW1nIiwiaW5wdXQiLCJpbnMiLCJrYmQiLCJrZXlnZW4iLCJsYWJlbCIsImxlZ2VuZCIsImxpIiwibGluayIsIm1haW4iLCJtYXAiLCJtYXJrIiwibWVudSIsIm1lbnVpdGVtIiwibWV0ZXIiLCJuYXYiLCJub3NjcmlwdCIsIm9iamVjdCIsIm9sIiwib3B0Z3JvdXAiLCJvcHRpb24iLCJvdXRwdXQiLCJwIiwicGFyYW0iLCJwcmUiLCJwcm9ncmVzcyIsInF1ZXVlIiwicnAiLCJydCIsInJ1YnkiLCJzIiwic2FtcCIsInNjcmlwdCIsInNlY3Rpb24iLCJzZWxlY3QiLCJzbWFsbCIsInNvdXJjZSIsInNwYW4iLCJzdHJvbmciLCJzdHlsZSIsInN1YiIsInN1bW1hcnkiLCJzdXAiLCJ0YWJsZSIsInRib2R5IiwidGQiLCJ0ZXh0YXJlYSIsInRmb290IiwidGgiLCJ0aGVhZCIsInRpbWUiLCJ0aXRsZSIsInRyIiwidHJhY2siLCJ1IiwidWwiLCJ2YXIiLCJ2aWRlbyIsIndiciJdLGFsd2F5c0JsYW5rOiExLGFsd2F5c1Zpc2libGU6ITEsYXV0b3NhdmU6ITEsYXV0b3NhdmVJbnRlcnZhbDoxZTQsYmVhdXRpZnlDb2RlOiEwLGJsb2NrVGFnczpbIm4iLCJibG9ja3F1b3RlIiwicHJlIiwiaDEiLCJoMiIsImgzIiwiaDQiLCJoNSIsImg2Il0sYnV0dG9uczpbImJvbGQiLCJpdGFsaWMiLCJ1bmRlcmxpbmUiLCJzdHJpa2VUaHJvdWdoIiwiZm9udFNpemUiLCJmb250RmFtaWx5IiwiY29sb3IiLCJzZXAiLCJmb3JtYXRCbG9jayIsImJsb2NrU3R5bGUiLCJhbGlnbiIsImluc2VydE9yZGVyZWRMaXN0IiwiaW5zZXJ0VW5vcmRlcmVkTGlzdCIsIm91dGRlbnQiLCJpbmRlbnQiLCJzZXAiLCJjcmVhdGVMaW5rIiwiaW5zZXJ0SW1hZ2UiLCJpbnNlcnRWaWRlbyIsImluc2VydEhvcml6b250YWxSdWxlIiwidW5kbyIsInJlZG8iLCJodG1sIl0sY3Jvc3NEb21haW46ITAsY29udmVydE1haWxBZGRyZXNzZXM6ITAsY3VzdG9tQnV0dG9uczp7fSxjdXN0b21Ecm9wZG93bnM6e30sY3VzdG9tVGV4dDohMSxkZWZhdWx0SW1hZ2VXaWR0aDozMDAsZGlyZWN0aW9uOiJsdHIiLGRpc2FibGVSaWdodENsaWNrOiExLGVkaXRJblBvcHVwOiExLGVkaXRvckNsYXNzOiIiLGZvcm1hdFRhZ3M6WyJwIiwicHJlIiwiYmxvY2txdW90ZSIsImgxIiwiaDIiLCJoMyIsImg0IiwiaDUiLCJoNiIsImRpdiIsInVsIiwib2wiLCJsaSIsInRhYmxlIiwidGJvZHkiLCJ0aGVhZCIsInRmb290IiwidHIiLCJ0aCIsInRkIl0saGVhZGVyczp7fSxoZWlnaHQ6ImF1dG8iLGljb25zOnt9LGlubGluZU1vZGU6ITAsaW5pdE9uQ2xpY2s6ITEsbGFuZ3VhZ2U6ImVuX3VzIixsaW5rTGlzdDpbXSxsaW5rVGV4dDohMSxsaW5rQ2xhc3Nlczp7fSxtYXhIZWlnaHQ6ImF1dG8iLG1pbkhlaWdodDoiYXV0byIsbm9Gb2xsb3c6ITAscGFyYWdyYXBoeTohMCxwbGFjZWhvbGRlcjoiVHlwZSBzb21ldGhpbmciLHBsYWluUGFzdGU6ITEscHJlbG9hZGVyU3JjOiIiLHNhdmVVUkw6bnVsbCxzYXZlUGFyYW1zOnt9LHNhdmVSZXF1ZXN0VHlwZToiUE9TVCIsc2ltcGxlQW1wZXJzYW5kOiExLHNob3J0Y3V0czohMCxzaG9ydGN1dHNBdmFpbGFibGU6WyJzaG93IiwiYm9sZCIsIml0YWxpYyIsInVuZGVybGluZSIsImNyZWF0ZUxpbmsiLCJpbnNlcnRJbWFnZSIsInNlbGVjdEFsbCIsImluZGVudCIsIm91dGRlbnQiLCJodG1sIiwiZm9ybWF0QmxvY2sgbiIsImZvcm1hdEJsb2NrIGgxIiwiZm9ybWF0QmxvY2sgaDIiLCJmb3JtYXRCbG9jayBoMyIsImZvcm1hdEJsb2NrIGg0IiwiZm9ybWF0QmxvY2sgaDUiLCJmb3JtYXRCbG9jayBoNiIsImZvcm1hdEJsb2NrIGJsb2NrcXVvdGUiLCJmb3JtYXRCbG9jayBwcmUiLCJzdHJpa2VUaHJvdWdoIl0sc3BlbGxjaGVjazohMSx0aGVtZTpudWxsLHRvb2xiYXJGaXhlZDohMCx0cmFja1Njcm9sbDohMSx1bmxpbmtCdXR0b246ITAsdGFiU3BhY2VzOiEwLHR5cGluZ1RpbWVyOjE1MCxwYXN0ZWRJbWFnZXNVcGxvYWRSZXF1ZXN0VHlwZToiUE9TVCIscGFzdGVkSW1hZ2VzVXBsb2FkVVJMOm51bGwsd2lkdGg6ImF1dG8iLHdpdGhDcmVkZW50aWFsczohMSx6SW5kZXg6MWUzfSxiLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5zeW5jKCksdGhpcy5hZGRGclRhZygpLHRoaXMuaGlkZSgpLHRoaXMuaXNIVE1MJiZ0aGlzLmh0bWwoKSx0aGlzLmZvY3VzKCksdGhpcy5jbGVhclNlbGVjdGlvbigpLHRoaXMuJGVsZW1lbnQuYmx1cigpLHRoaXMuJGJ0dG5fd3JhcHBlciYmdGhpcy4kYnR0bl93cmFwcGVyLmh0bWwoIiIpLnJlbW92ZURhdGEoKS5yZW1vdmUoKSx0aGlzLiRlZGl0b3ImJnRoaXMuJGVkaXRvci5odG1sKCIiKS5yZW1vdmVEYXRhKCkucmVtb3ZlKCksdGhpcy5yYWlzZUV2ZW50KCJkZXN0cm95IiksdGhpcy4kcG9wdXBfZWRpdG9yJiZ0aGlzLiRwb3B1cF9lZGl0b3IuaHRtbCgiIikucmVtb3ZlRGF0YSgpLnJlbW92ZSgpLGNsZWFyVGltZW91dCh0aGlzLmFqYXhJbnRlcnZhbCksY2xlYXJUaW1lb3V0KHRoaXMudHlwaW5nVGltZXIpLHRoaXMuJGVsZW1lbnQub2ZmKCJtb3VzZWRvd24gbW91c2V1cCBjbGljayBrZXlkb3duIGtleXVwIGN1dCBmb2N1cyBrZXlwcmVzcyB0b3VjaHN0YXJ0IHRvdWNoZW5kIHRvdWNoIGRyb3AiKSx0aGlzLiRlbGVtZW50Lm9mZigibW91c2Vkb3duIG1vdXNldXAgY2xpY2sga2V5ZG93biBrZXl1cCBjdXQgZm9jdXMga2V5cHJlc3MgdG91Y2hzdGFydCB0b3VjaGVuZCB0b3VjaCBkcm9wIiwiKioiKSxhKHdpbmRvdykub2ZmKCJtb3VzZXVwLiIrdGhpcy5faWQpLGEod2luZG93KS5vZmYoImtleWRvd24uIit0aGlzLl9pZCksYSh3aW5kb3cpLm9mZigia2V5dXAuIit0aGlzLl9pZCksYSh3aW5kb3cpLm9mZigiYmx1ci4iK3RoaXMuX2lkKSxhKHdpbmRvdykub2ZmKCJoaWRlLiIrdGhpcy5faWQpLGEod2luZG93KS5vZmYoInNjcm9sbC4iK3RoaXMuX2lkKSxhKHdpbmRvdykub2ZmKCJvcmllbnRhdGlvbmNoYW5nZS4iK3RoaXMuX2lkKSxhKGRvY3VtZW50KS5vZmYoInNlbGVjdGlvbmNoYW5nZS4iK3RoaXMuX2lkKSx2b2lkIDAhPT10aGlzLiR1cGxvYWRfZnJhbWUmJnRoaXMuJHVwbG9hZF9mcmFtZS5yZW1vdmUoKSx0aGlzLiR0ZXh0YXJlYSYmKHRoaXMuJGJveC5yZW1vdmUoKSx0aGlzLiR0ZXh0YXJlYS5yZW1vdmVEYXRhKCJmYS5lZGl0YWJsZSIpLHRoaXMuJHRleHRhcmVhLnNob3coKSk7Zm9yKHZhciBiIGluIHRoaXMuX2V2ZW50cylkZWxldGUgdGhpcy5fZXZlbnRzW2JdO3RoaXMuaXNMaW5rP3RoaXMuJGVsZW1lbnQucmVtb3ZlRGF0YSgiZmEuZWRpdGFibGUiKToodGhpcy4kZWxlbWVudC5yZXBsYWNlV2l0aCh0aGlzLmdldEhUTUwoKSksdGhpcy4kYm94JiYhdGhpcy5lZGl0YWJsZURpc2FibGVkJiYodGhpcy4kYm94LnJlbW92ZUNsYXNzKCJmcm9hbGEtYm94IiksdGhpcy4kYm94LmZpbmQoIi5odG1sLXN3aXRjaCIpLnJlbW92ZSgpLHRoaXMuJGJveC5yZW1vdmVEYXRhKCJmYS5lZGl0YWJsZSIpLGNsZWFyVGltZW91dCh0aGlzLnR5cGluZ1RpbWVyKSkpfSxiLnByb3RvdHlwZS50cmlnZ2VyRXZlbnQ9ZnVuY3Rpb24oYixjLGQsZSl7dm9pZCAwPT09ZCYmKGQ9ITApLGQ9PT0hMSYmKGU9ITEpLHZvaWQgMD09PWUmJihlPSExKTt2YXIgZj0hMCxnPWIrIkNhbGxiYWNrIjtyZXR1cm4gdGhpcy5vcHRpb25zW2ddJiZhLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zW2ddKSYmKGY9Yz90aGlzLm9wdGlvbnNbZ10uYXBwbHkodGhpcyxjKTp0aGlzLm9wdGlvbnNbZ10uY2FsbCh0aGlzKSksY3x8KGM9W10pLGY9dGhpcy4kb3JpZ2luYWxfZWxlbWVudC50cmlnZ2VySGFuZGxlcigiZWRpdGFibGUuIitiLGEubWVyZ2UoW3RoaXNdLGMpKSxkPT09ITAmJih0aGlzLnN5bmMoKSx0aGlzLmlzUmVzaXppbmcoKXx8dGhpcy5lZGl0YWJsZURpc2FibGVkfHx0aGlzLmltYWdlTW9kZXx8IWV8fHRoaXMuY2xlYW5pZnkoKSksdm9pZCAwPT09Zj8hMDpmfSxiLnByb3RvdHlwZS5zeW5jQ2xlYW5IVE1MPWZ1bmN0aW9uKGEsYil7dmFyIGM7aWYoYilmb3IoYz1hLnJlcGxhY2UoLzxzcGFuKCg/IWNsYXNzXHMqPVxzKlsiJ10/Zi1tYXJrZXJbIiddPylbXj5dKSo/PjxcL3NwYW4+L2dpLCIiKTthIT1jOylhPWMsYz1hLnJlcGxhY2UoLzxzcGFuKCg/IWNsYXNzXHMqPVxzKlsiJ10/Zi1tYXJrZXJbIiddPylbXj5dKSo/PjxcL3NwYW4+L2dpLCIiKTtlbHNlIGZvcihjPWEucmVwbGFjZSgvPHNwYW5bXj5dKj8+PFwvc3Bhbj4vZywiIik7YSE9YzspYT1jLGM9YS5yZXBsYWNlKC88c3BhbltePl0qPz48XC9zcGFuPi9nLCIiKTtyZXR1cm4gYX0sYi5wcm90b3R5cGUuc3luY0NsZWFuPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9InNwYW46ZW1wdHkiO2MmJihkPSJzcGFuOmVtcHR5Om5vdCguZi1tYXJrZXIpIik7Zm9yKHZhciBlPSExLGY9ZnVuY3Rpb24oYixjKXswPT09Yy5hdHRyaWJ1dGVzLmxlbmd0aCYmKGEoYykucmVtb3ZlKCksZT0hMSl9LGc9Yi5maW5kKGQpO2cubGVuZ3RoJiZlPT09ITE7KWU9ITAsZy5lYWNoKGYpLGc9Yi5maW5kKGQpfSxiLnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNIVE1MKXt0aGlzLnJhaXNlRXZlbnQoInN5bmMiKSx0aGlzLmRpc2FibGVJbWFnZVJlc2l6ZSgpLHRoaXMuaXNMaW5rfHx0aGlzLmlzSW1hZ2V8fHRoaXMuJGVsZW1lbnQudHJpZ2dlcigicGxhY2Vob2xkZXJDaGVjayIpO3ZhciBhPXRoaXMuZ2V0SFRNTCgpO3RoaXMuaXNIVE1MfHwodGhpcy50cmFja0hUTUwhPT1hJiZudWxsIT10aGlzLnRyYWNrSFRNTD8odGhpcy50cmlnZ2VyRXZlbnQoImNvbnRlbnRDaGFuZ2VkIixbXSwhMSwhMSksdGhpcy5yZWZyZXNoSW1hZ2VMaXN0KCksdGhpcy5yZWZyZXNoQnV0dG9ucygpLHRoaXMudHJhY2tIVE1MPWEpOm51bGw9PXRoaXMudHJhY2tIVE1MJiYodGhpcy50cmFja0hUTUw9YSkpLHRoaXMuJHRleHRhcmVhJiZ0aGlzLiR0ZXh0YXJlYS52YWwoYSl9fSxiLnByb3RvdHlwZS5lbXB0eUVsZW1lbnQ9ZnVuY3Rpb24oYil7aWYoIklNRyI9PWIudGFnTmFtZXx8YShiKS5maW5kKCJpbWciKS5sZW5ndGg+MClyZXR1cm4hMTtpZihhKGIpLmZpbmQoImlucHV0LCBpZnJhbWUiKS5sZW5ndGg+MClyZXR1cm4hMTtmb3IodmFyIGM9YShiKS50ZXh0KCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKCJcbiIhPT1jW2RdJiYiXHIiIT09Y1tkXSYmIgkiIT09Y1tkXSlyZXR1cm4hMTtyZXR1cm4hMH0sYi5wcm90b3R5cGUuY29udGludWVJbml0PWZ1bmN0aW9uKCl7dGhpcy5icm93c2VyRml4ZXMoKSx0aGlzLmVkaXRhYmxlRGlzYWJsZWR8fCh0aGlzLmluaXRVbmRvUmVkbygpLHRoaXMuZW5hYmxlVHlwaW5nKCksdGhpcy5pbml0U2hvcnRjdXRzKCkpLHRoaXMuaW5pdFRhYnMoKSx0aGlzLmluaXRFZGl0b3IoKSx0aGlzLmlzTGlua3x8dGhpcy5pbml0RHJhZygpO2Zvcih2YXIgYj0wO2I8YS5FZGl0YWJsZS5pbml0aWFsaXplcnMubGVuZ3RoO2IrKylhLkVkaXRhYmxlLmluaXRpYWxpemVyc1tiXS5jYWxsKHRoaXMpO3RoaXMuaW5pdE9wdGlvbnMoKSx0aGlzLmluaXRFZGl0b3JTZWxlY3Rpb24oKSx0aGlzLmVkaXRhYmxlRGlzYWJsZWR8fCh0aGlzLnNldFBsYWNlaG9sZGVyKCksdGhpcy5zZXRQbGFjZWhvbGRlckV2ZW50cygpKSx0aGlzLmluaXRBamF4U2F2ZXIoKSx0aGlzLnNldExhbmd1YWdlKCksdGhpcy5zZXRDdXN0b21UZXh0KCksdGhpcy5lZGl0YWJsZURpc2FibGVkfHx0aGlzLnJlZ2lzdGVyUGFzdGUoKSx0aGlzLmluaXRpYWxpemVkPSEwLHRoaXMudHJpZ2dlckV2ZW50KCJpbml0aWFsaXplZCIsW10sITEsITEpfSxiLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGIpe3RoaXMuaW5pdEVsZW1lbnQoYiksdGhpcy5pbml0RWxlbWVudFN0eWxlKCksdGhpcy5vcHRpb25zLmluaXRPbkNsaWNrPyh0aGlzLmVkaXRhYmxlRGlzYWJsZWR8fHRoaXMuJGVsZW1lbnQuYXR0cigiY29udGVudGVkaXRhYmxlIiwhMCksdGhpcy4kZWxlbWVudC5iaW5kKCJtb3VzZWRvd24iLGEucHJveHkoZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLiRlbGVtZW50LnVuYmluZCgibW91c2Vkb3duIiksdGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5jb250aW51ZUluaXQoKSx0aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSx0aGlzLiRlbGVtZW50LmZvY3VzKCksdGhpcy5oaWRlT3RoZXJFZGl0b3JzKCl9LHRoaXMpKSk6dGhpcy5jb250aW51ZUluaXQoKX0sYi5wcm90b3R5cGUubW9iaWxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaU9TKCl8fHRoaXMuYW5kcm9pZCgpfHx0aGlzLmJsYWNrYmVycnkoKX0sYi5wcm90b3R5cGUuaU9TPWZ1bmN0aW9uKCl7cmV0dXJuLyhpUGFkfGlQaG9uZXxpUG9kKS9nLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9LGIucHJvdG90eXBlLmlQYWQ9ZnVuY3Rpb24oKXtyZXR1cm4vKGlQYWQpL2cudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX0sYi5wcm90b3R5cGUuaVBob25lPWZ1bmN0aW9uKCl7cmV0dXJuLyhpUGhvbmUpL2cudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX0sYi5wcm90b3R5cGUuaVBvZD1mdW5jdGlvbigpe3JldHVybi8oaVBvZCkvZy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfSxiLnByb3RvdHlwZS5hbmRyb2lkPWZ1bmN0aW9uKCl7cmV0dXJuLyhBbmRyb2lkKS9nLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9LGIucHJvdG90eXBlLmJsYWNrYmVycnk9ZnVuY3Rpb24oKXtyZXR1cm4vKEJsYWNrYmVycnkpL2cudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX0sYi5wcm90b3R5cGUuaW5pdE9uVGV4dGFyZWE9ZnVuY3Rpb24oYil7dGhpcy4kdGV4dGFyZWE9YShiKSx2b2lkIDAhPT10aGlzLiR0ZXh0YXJlYS5hdHRyKCJwbGFjZWhvbGRlciIpJiYiVHlwZSBzb21ldGhpbmciPT10aGlzLm9wdGlvbnMucGxhY2Vob2xkZXImJih0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXI9dGhpcy4kdGV4dGFyZWEuYXR0cigicGxhY2Vob2xkZXIiKSksdGhpcy4kZWxlbWVudD1hKCI8ZGl2PiIpLmh0bWwodGhpcy4kdGV4dGFyZWEudmFsKCkpLHRoaXMuJHRleHRhcmVhLmJlZm9yZSh0aGlzLiRlbGVtZW50KS5oaWRlKCksdGhpcy4kdGV4dGFyZWEucGFyZW50cygiZm9ybSIpLmJpbmQoInN1Ym1pdCIsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuaXNIVE1MP3RoaXMuaHRtbCgpOnRoaXMuc3luYygpfSx0aGlzKSl9LGIucHJvdG90eXBlLmluaXRPbkxpbms9ZnVuY3Rpb24oYil7dGhpcy5pc0xpbms9ITAsdGhpcy5zZWxlY3Rpb25EaXNhYmxlZD0hMCx0aGlzLmVkaXRhYmxlRGlzYWJsZWQ9ITAsdGhpcy5vcHRpb25zLmJ1dHRvbnM9W10sdGhpcy4kZWxlbWVudD1hKGIpLHRoaXMub3B0aW9ucy5wYXJhZ3JhcGh5PSExLHRoaXMuJGJveD10aGlzLiRlbGVtZW50fSxiLnByb3RvdHlwZS5pbml0T25JbWFnZT1mdW5jdGlvbihiKXt2YXIgYz1hKGIpLmNzcygiZmxvYXQiKTsiQSI9PWEoYikucGFyZW50KCkuZ2V0KDApLnRhZ05hbWUmJihiPWEoYikucGFyZW50KCkpLHRoaXMuaXNJbWFnZT0hMCx0aGlzLmVkaXRhYmxlRGlzYWJsZWQ9ITAsdGhpcy5pbWFnZUxpc3Q9W10sdGhpcy5vcHRpb25zLmJ1dHRvbnM9W10sdGhpcy5vcHRpb25zLnBhcmFncmFwaHk9ITEsdGhpcy5vcHRpb25zLmltYWdlTWFyZ2luPSJhdXRvIixhKGIpLndyYXAoIjxkaXY+IiksdGhpcy4kZWxlbWVudD1hKGIpLnBhcmVudCgpLHRoaXMuJGVsZW1lbnQuY3NzKCJkaXNwbGF5IiwiaW5saW5lLWJsb2NrIiksdGhpcy4kZWxlbWVudC5jc3MoIm1heC13aWR0aCIsIjEwMCUiKSx0aGlzLiRlbGVtZW50LmNzcygibWFyZ2luLWxlZnQiLCJhdXRvIiksdGhpcy4kZWxlbWVudC5jc3MoIm1hcmdpbi1yaWdodCIsImF1dG8iKSx0aGlzLiRlbGVtZW50LmNzcygiZmxvYXQiLGMpLHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoImYtaW1hZ2UiKSx0aGlzLiRib3g9YShiKX0sYi5wcm90b3R5cGUuaW5pdEZvclBvcHVwPWZ1bmN0aW9uKGIpe3RoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLiRib3g9dGhpcy4kZWxlbWVudCx0aGlzLmVkaXRhYmxlRGlzYWJsZWQ9ITAsdGhpcy5vcHRpb25zLmJ1dHRvbnM9W10sdGhpcy4kZWxlbWVudC5vbigiY2xpY2siLGEucHJveHkoZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpfSx0aGlzKSl9LGIucHJvdG90eXBlLmluaXRPbkRlZmF1bHQ9ZnVuY3Rpb24oYil7IkRJViIhPWIudGFnTmFtZSYmdGhpcy5vcHRpb25zLmJ1dHRvbnMuaW5kZXhPZigiZm9ybWF0QmxvY2siKT49MCYmdGhpcy5kaXNhYmxlZExpc3QucHVzaCgiZm9ybWF0QmxvY2siKSx0aGlzLiRlbGVtZW50PWEoYil9LGIucHJvdG90eXBlLmluaXRFbGVtZW50PWZ1bmN0aW9uKGIpeyJURVhUQVJFQSI9PWIudGFnTmFtZT90aGlzLmluaXRPblRleHRhcmVhKGIpOiJBIj09Yi50YWdOYW1lP3RoaXMuaW5pdE9uTGluayhiKToiSU1HIj09Yi50YWdOYW1lP3RoaXMuaW5pdE9uSW1hZ2UoYik6dGhpcy5vcHRpb25zLmVkaXRJblBvcHVwP3RoaXMuaW5pdEZvclBvcHVwKGIpOnRoaXMuaW5pdE9uRGVmYXVsdChiKSx0aGlzLmVkaXRhYmxlRGlzYWJsZWR8fCh0aGlzLiRib3g9dGhpcy4kZWxlbWVudCx0aGlzLiRlbGVtZW50PWEoIjxkaXY+IiksdGhpcy5zZXRIVE1MKHRoaXMuJGJveC5odG1sKCksITEpLHRoaXMuJGJveC5odG1sKHRoaXMuJGVsZW1lbnQpLmFkZENsYXNzKCJmcm9hbGEtYm94IiksdGhpcy4kZWxlbWVudC5vbigia2V5dXAiLGEucHJveHkoZnVuY3Rpb24oYSl7dmFyIGI9YS53aGljaDsxMz09YiYmdGhpcy53ZWJraXRQYXJhZ3JhcGh5KCl9LHRoaXMpKSksdGhpcy4kZWxlbWVudC5vbigiZHJvcCIsYS5wcm94eShmdW5jdGlvbigpe3NldFRpbWVvdXQoYS5wcm94eShmdW5jdGlvbigpe2EoImh0bWwiKS5jbGljaygpLHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLXdyYXAiKS5lYWNoKGZ1bmN0aW9uKGIsYyl7MD09PWEoYykuZmluZCgiaW1nIikubGVuZ3RoJiZhKGMpLnJlbW92ZSgpfSksdGhpcy4kZWxlbWVudC5maW5kKCJwOmVtcHR5IikucmVtb3ZlKCl9LHRoaXMpLDEpfSx0aGlzKSksdGhpcy5zeW5jKCl9LGIucHJvdG90eXBlLndlYmtpdFBhcmFncmFwaHk9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LmZpbmQoIioiKS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYixjKXtpZih0aGlzLmVtcHR5RWxlbWVudChjKSYmIkRJViI9PT1jLnRhZ05hbWUmJnRoaXMub3B0aW9ucy5wYXJhZ3JhcGh5PT09ITApe3ZhciBkPWEoIjxwPjxici8+PC9wPiIpO2EoYykucmVwbGFjZVdpdGgoZCksdGhpcy5zZXRTZWxlY3Rpb24oZC5nZXQoMCkpfX0sdGhpcykpfSxiLnByb3RvdHlwZS50cmltPWZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcoYSkucmVwbGFjZSgvXlxzK3xccyskL2csIiIpfSxiLnByb3RvdHlwZS51bndyYXBUZXh0PWZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLnBhcmFncmFwaHl8fHRoaXMuJGVsZW1lbnQuZmluZCgiZGl2IikuZWFjaChmdW5jdGlvbihiLGMpe3ZvaWQgMD09PWEoYykuYXR0cigic3R5bGUiKSYmYShjKS5yZXBsYWNlV2l0aChhKGMpLmh0bWwoKSsiPGJyLz4iKX0pfSxiLnByb3RvdHlwZS53cmFwVGV4dEluRWxlbWVudD1mdW5jdGlvbihiLGMpe3ZvaWQgMD09PWMmJihjPSExKTt2YXIgZD1bXSxlPVsiU1BBTiIsIkEiLCJCIiwiSSIsIkVNIiwiVSIsIlMiLCJTVFJPTkciLCJTVFJJS0UiLCJGT05UIiwiSU1HIiwiU1VCIiwiU1VQIl0sZj10aGlzO3RoaXMubm9fdmVyaWZ5PSEwO3ZhciBnPWZ1bmN0aW9uKCl7aWYoMD09PWQubGVuZ3RoKXJldHVybiExO3ZhciBiO2I9YShmLm9wdGlvbnMucGFyYWdyYXBoeT09PSEwPyI8cD4iOiI8ZGl2PiIpO3ZhciBjPWEoZFswXSk7aWYoMT09ZC5sZW5ndGgmJiJmLW1hcmtlciI9PWMuYXR0cigiY2xhc3MiKSlyZXR1cm4gdm9pZChkPVtdKTtmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGc9YShkW2VdKTtiLmFwcGVuZChnLmNsb25lKCkpLGU9PWQubGVuZ3RoLTE/Zy5yZXBsYWNlV2l0aChiKTpnLnJlbW92ZSgpfWQ9W119LGg9ITEsaT0hMTtiLmNvbnRlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKTtpZihiLmhhc0NsYXNzKCJmLW1hcmtlciIpfHxiLmZpbmQoIi5mLW1hcmtlciIpLmxlbmd0aCl7dmFyIGo9YjtiLmZpbmQoIi5mLW1hcmtlciIpLmxlbmd0aCYmKGo9YShiLmZpbmQoIi5mLW1hcmtlciIpWzBdKSksInRydWUiPT09ai5hdHRyKCJkYXRhLXR5cGUiKT8oaD0hMCxpPSExKTppPSEwfXRoaXMubm9kZVR5cGU9PU5vZGUuVEVYVF9OT0RFJiZiLnRleHQoKS50cmltKCkubGVuZ3RoPjB8fGUuaW5kZXhPZih0aGlzLnRhZ05hbWUpPj0wP2QucHVzaCh0aGlzKTp0aGlzLm5vZGVUeXBlPT1Ob2RlLlRFWFRfTk9ERSYmMD09PWIudGV4dCgpLnRyaW0oKS5sZW5ndGgmJmYub3B0aW9ucy5iZWF1dGlmeUNvZGU/Yi5yZW1vdmUoKTooaHx8Yz8oZygpLCJCUiI9PT10aGlzLnRhZ05hbWUmJmIucmVtb3ZlKCkpOmQ9W10saSYmKGg9ITEpKX0pLChofHxjKSYmZygpLGIuZmluZCgiPiBwIikuZWFjaChmdW5jdGlvbihiLGMpezA9PT1hKGMpLnRleHQoKS50cmltKCkubGVuZ3RoJiYwPT09YShjKS5maW5kKCJpbWciKS5sZW5ndGgmJjA9PT1hKGMpLmZpbmQoImJyIikubGVuZ3RoJiZhKGMpLmFwcGVuZCgiPGJyLz4iKX0pLGIuZmluZCgiZGl2OmVtcHR5IikucmVtb3ZlKCksYi5pcygiOmVtcHR5IikmJmIuYXBwZW5kKGYub3B0aW9ucy5wYXJhZ3JhcGh5PT09ITA/IjxwPjxici8+PC9wPiI6Ijxici8+IiksdGhpcy5ub192ZXJpZnk9ITF9LGIucHJvdG90eXBlLndyYXBUZXh0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzSW1hZ2V8fHRoaXMuaXNMaW5rPyExOih0aGlzLndlYmtpdFBhcmFncmFwaHkoKSx2b2lkIHRoaXMud3JhcFRleHRJbkVsZW1lbnQodGhpcy4kZWxlbWVudCxhKSl9LGIucHJvdG90eXBlLnNldEhUTUw9ZnVuY3Rpb24oYixjKXt0aGlzLm5vX3ZlcmlmeT0hMCx2b2lkIDA9PT1jJiYoYz0hMCksYj10aGlzLmNsZWFuKGIsITAsITEpLGI9Yi5yZXBsYWNlKC8+XHMrPC9nLCI+PCIpLHRoaXMuJGVsZW1lbnQuaHRtbChiKSx0aGlzLiRlbGVtZW50LmZpbmQoInByZSIpLmVhY2goZnVuY3Rpb24oYixjKXt2YXIgZD1hKGMpLGU9YShjKS5odG1sKCk7ZS5pbmRleE9mKCJcbiIpPj0wJiZkLmh0bWwoZS5yZXBsYWNlKC9cbi9nLCI8YnI+IikpfSksdGhpcy5pbWFnZUxpc3Q9W10sdGhpcy5yZWZyZXNoSW1hZ2VMaXN0KCksdGhpcy5vcHRpb25zLnBhcmFncmFwaHkmJnRoaXMud3JhcFRleHQoITApLGM9PT0hMCYmKHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMuc3luYygpKSx0aGlzLiRlbGVtZW50LmZpbmQoInNwYW4iKS5hdHRyKCJkYXRhLWZyLXZlcmlmaWVkIiwhMCksdGhpcy5ub192ZXJpZnk9ITF9LGIucHJvdG90eXBlLmJyZWFrSFRNTD1mdW5jdGlvbihiKXtpZih0aGlzLnJlbW92ZU1hcmtlcnMoKSx0aGlzLmluc2VydEhUTUwoIjxicmVhaz48L2JyZWFrPiIpLHRoaXMuJGVsZW1lbnQuZmluZCgiYnJlYWsiKS5yZW1vdmUoKSx0aGlzLmNoZWNrUGxhY2Vob2xkZXIoKSx0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJmLXBsYWNlaG9sZGVyIikpcmV0dXJuIHRoaXMuJGVsZW1lbnQuaHRtbChiKSwhMDt2YXIgYz10aGlzLmdldFNlbGVjdGlvbkVsZW1lbnRzKClbMF07aWYoYz09dGhpcy4kZWxlbWVudC5nZXQoMCkpcmV0dXJuIHRoaXMuaW5zZXJ0SFRNTChiKSwhMDtpZih0aGlzLmVtcHR5RWxlbWVudChhKGMpKSlyZXR1cm4gYShjKS5yZXBsYWNlV2l0aChiKSwhMDt0aGlzLmluc2VydEhUTUwoIjxicmVhaz48L2JyZWFrPiIpO2Zvcih2YXIgZCxlLGY9YSgiPGRpdj48L2Rpdj4iKS5hcHBlbmQoYShjKS5jbG9uZSgpKS5odG1sKCksZz1bXSxoPXt9LGk9W10saj0wLGs9MDtrPGYubGVuZ3RoO2srKylpZihlPWYuY2hhckF0KGspLCI8Ij09ZSl7dmFyIGw9Zi5pbmRleE9mKCI+IixrKzEpO2lmKC0xIT09bCl7ZD1mLnN1YnN0cmluZyhrLGwrMSk7dmFyIG09dGhpcy50YWdOYW1lKGQpO2lmKGs9bCwiYnJlYWsiPT1tKXtpZighdGhpcy5pc0Nsb3NpbmdUYWcoZCkpe2Zvcih2YXIgbj1nLmxlbmd0aC0xO24+PTA7bi0tKXt2YXIgbz10aGlzLnRhZ05hbWUoZ1tuXSk7aS5wdXNoKCI8LyIrbysiPiIpfWkucHVzaChiKTtmb3IodmFyIHA9MDtwPGcubGVuZ3RoO3ArKylpLnB1c2goZ1twXSk7aS5wdXNoKCc8c3BhbiBjbGFzcz0iZi1tYXJrZXIiIGRhdGEtdHlwZT0iZmFsc2UiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj48c3BhbiBjbGFzcz0iZi1tYXJrZXIiIGRhdGEtdHlwZT0idHJ1ZSIgZGF0YS1pZD0iMCIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPicpfX1lbHNlIGlmKGkucHVzaChkKSwhdGhpcy5pc1NlbGZDbG9zaW5nVGFnKGQpKWlmKHRoaXMuaXNDbG9zaW5nVGFnKGQpKXt2YXIgcT1oW21dLnBvcCgpO2cuc3BsaWNlKHEsMSl9ZWxzZSBnLnB1c2goZCksdm9pZCAwPT09aFttXSYmKGhbbV09W10pLGhbbV0ucHVzaChnLmxlbmd0aC0xKX19ZWxzZSBqKyssaS5wdXNoKGUpO2EoYykucmVwbGFjZVdpdGgoaS5qb2luKCIiKSksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCl9LGIucHJvdG90eXBlLmJlZm9yZVBhc3RlPWZ1bmN0aW9uKCl7dGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5jbGlwYm9hcmRIVE1MPW51bGwsdGhpcy5zY3JvbGxQb3NpdGlvbj1hKHdpbmRvdykuc2Nyb2xsVG9wKCksdGhpcy4kcGFzdGVEaXY9YSgnPGRpdiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgbGVmdDogLTk5OTlweDsgaGVpZ2h0OiAxMDAlOyB3aWR0aDogMDsgei1pbmRleDogOTk5OTk7Ij48L2Rpdj4nKS5hcHBlbmRUbygiYm9keSIpLHRoaXMuJHBhc3RlRGl2LmZvY3VzKCksd2luZG93LnNldFRpbWVvdXQoYS5wcm94eSh0aGlzLnByb2Nlc3NQYXN0ZSx0aGlzKSwxKX0sYi5wcm90b3R5cGUucHJvY2Vzc1Bhc3RlPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5jbGlwYm9hcmRIVE1MO251bGw9PT10aGlzLmNsaXBib2FyZEhUTUwmJihiPXRoaXMuJHBhc3RlRGl2Lmh0bWwoKSx0aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSxhKHdpbmRvdykuc2Nyb2xsVG9wKHRoaXMuc2Nyb2xsUG9zaXRpb24pKTt2YXIgYyxkPXRoaXMudHJpZ2dlckV2ZW50KCJvblBhc3RlIixbYl0sITEpO2lmKCJzdHJpbmciPT10eXBlb2YgZCYmKGI9ZCksYj1iLnJlcGxhY2UoLzxpbWcgL2dpLCc8aW1nIGRhdGEtZnItaW1hZ2UtcGFzdGVkPSJ0cnVlIiAnKSxiLm1hdGNoKC8oY2xhc3M9XCI/TXNvfHN0eWxlPVwiW15cIl0qXGJtc29cLXx3OldvcmREb2N1bWVudCkvZ2kpP2M9dGhpcy53b3JkQ2xlYW4oYik6KGM9dGhpcy5jbGVhbihiLCExLCEwKSxjPXRoaXMucmVtb3ZlRW1wdHlUYWdzKGMpKSx0aGlzLm9wdGlvbnMucGxhaW5QYXN0ZSYmKGM9dGhpcy5wbGFpblBhc3RlQ2xlYW4oYykpLCIiIT09Yyl7Zm9yKHZhciBlPSExLGY9YSgiPGRpdj4iKS5hcHBlbmQoYykuZmluZCgiKiIpLGc9MDtnPGYubGVuZ3RoO2crKylpZihhLkVkaXRhYmxlLlZBTElEX05PREVTLmluZGV4T2YoZltnXS50YWdOYW1lKT49MCl7dGhpcy5icmVha0hUTUwoYyksZT0hMDticmVha31lfHx0aGlzLmluc2VydEhUTUwoYyksdGhpcy4kZWxlbWVudC5maW5kKCJsaSIpLmVhY2goYS5wcm94eShmdW5jdGlvbihiLGMpe3RoaXMud3JhcFRleHRJbkVsZW1lbnQoYShjKSwhMCl9LHRoaXMpKSx0aGlzLm9wdGlvbnMucGFyYWdyYXBoeSYmdGhpcy53cmFwVGV4dCghMCksdGhpcy5jbGVhbnVwTGlzdHMoKX10aGlzLmFmdGVyUGFzdGUoKX0sYi5wcm90b3R5cGUuYWZ0ZXJQYXN0ZT1mdW5jdGlvbigpe3RoaXMuZm9jdXMoKSx0aGlzLnVwbG9hZFBhc3RlZEltYWdlcygpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcigicGxhY2Vob2xkZXJDaGVjayIpLHRoaXMucGFzdGluZz0hMSx0aGlzLnRyaWdnZXJFdmVudCgiYWZ0ZXJQYXN0ZSIsW10sITAsITApfSxiLnByb3RvdHlwZS5yZWdpc3RlclBhc3RlPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5nZXQoMCkub25wYXN0ZT1hLnByb3h5KGZ1bmN0aW9uKGIpe2lmKCF0aGlzLmlzSFRNTCl7aWYoIXRoaXMudHJpZ2dlckV2ZW50KCJiZWZvcmVQYXN0ZSIsW10sITEpKXJldHVybiExO2lmKHRoaXMuY2xpcGJvYXJkUGFzdGUoYikpcmV0dXJuITE7dGhpcy5jbGlwYm9hcmRIVE1MPSIiLHRoaXMucGFzdGluZz0hMCx0aGlzLnNjcm9sbFBvc2l0aW9uPWEod2luZG93KS5zY3JvbGxUb3AoKTt2YXIgYz0hMTtpZihiJiZiLmNsaXBib2FyZERhdGEmJmIuY2xpcGJvYXJkRGF0YS5nZXREYXRhKXt2YXIgZD0iIixlPWIuY2xpcGJvYXJkRGF0YS50eXBlcztpZihhLkVkaXRhYmxlLmlzQXJyYXkoZSkpZm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspZCs9ZVtmXSsiOyI7ZWxzZSBkPWU7aWYoL3RleHRcL2h0bWwvLnRlc3QoZCk/dGhpcy5jbGlwYm9hcmRIVE1MPWIuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCJ0ZXh0L2h0bWwiKTovdGV4dFwvcnRmLy50ZXN0KGQpJiZ0aGlzLmJyb3dzZXIuc2FmYXJpP3RoaXMuY2xpcGJvYXJkSFRNTD1iLmNsaXBib2FyZERhdGEuZ2V0RGF0YSgidGV4dC9ydGYiKTovdGV4dFwvcGxhaW4vLnRlc3QoZCkmJih0aGlzLmNsaXBib2FyZEhUTUw9Yi5jbGlwYm9hcmREYXRhLmdldERhdGEoInRleHQvcGxhaW4iKS5yZXBsYWNlKC9cbi9nLCI8YnIvPiIpKSwiIiE9PXRoaXMuY2xpcGJvYXJkSFRNTD9jPSEwOnRoaXMuY2xpcGJvYXJkSFRNTD1udWxsLGMpcmV0dXJuIHRoaXMucHJvY2Vzc1Bhc3RlKCksYi5wcmV2ZW50RGVmYXVsdCYmKGIuc3RvcFByb3BhZ2F0aW9uKCksYi5wcmV2ZW50RGVmYXVsdCgpKSwhMX10aGlzLmJlZm9yZVBhc3RlKCl9fSx0aGlzKX0sYi5wcm90b3R5cGUuY2xpcGJvYXJkUGFzdGU9ZnVuY3Rpb24oYil7aWYoYiYmYi5jbGlwYm9hcmREYXRhJiZiLmNsaXBib2FyZERhdGEuaXRlbXMpe3ZhciBjPWIuY2xpcGJvYXJkRGF0YS5pdGVtc1swXS5nZXRBc0ZpbGUoKTtpZihjKXt2YXIgZD1uZXcgRmlsZVJlYWRlcjtyZXR1cm4gZC5vbmxvYWQ9YS5wcm94eShmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldC5yZXN1bHQ7dGhpcy5pbnNlcnRIVE1MKCc8aW1nIGRhdGEtZnItaW1hZ2UtcGFzdGVkPSJ0cnVlIiBzcmM9IicrYisnIiAvPicpLHRoaXMuYWZ0ZXJQYXN0ZSgpfSx0aGlzKSxkLnJlYWRBc0RhdGFVUkwoYyksITB9fXJldHVybiExfSxiLnByb3RvdHlwZS51cGxvYWRQYXN0ZWRJbWFnZXM9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LmZpbmQoImltZ1tkYXRhLWZyLWltYWdlLXBhc3RlZF0iKS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYixjKXt0aGlzLm9wdGlvbnMucGFzdGVJbWFnZT8oMD09PWMuc3JjLmluZGV4T2YoImRhdGE6Iik/dGhpcy5vcHRpb25zLnBhc3RlZEltYWdlc1VwbG9hZFVSTCYmKHNldFRpbWVvdXQoYS5wcm94eShmdW5jdGlvbigpe3RoaXMuc2hvd0ltYWdlTG9hZGVyKCksdGhpcy4kcHJvZ3Jlc3NfYmFyLmZpbmQoInNwYW4iKS5jc3MoIndpZHRoIiwiMTAwJSIpLnRleHQoIlBsZWFzZSB3YWl0ISIpLHRoaXMuc2hvd0J5Q29vcmRpbmF0ZXMoYShjKS5vZmZzZXQoKS5sZWZ0K2EoYykud2lkdGgoKS8yLGEoYykub2Zmc2V0KCkudG9wK2EoYykuaGVpZ2h0KCkrMTApLHRoaXMuaXNEaXNhYmxlZD0hMH0sdGhpcyksMTApLGEuYWpheCh7dHlwZTp0aGlzLm9wdGlvbnMucGFzdGVkSW1hZ2VzVXBsb2FkUmVxdWVzdFR5cGUsdXJsOnRoaXMub3B0aW9ucy5wYXN0ZWRJbWFnZXNVcGxvYWRVUkwsZGF0YTp7aW1hZ2U6ZGVjb2RlVVJJQ29tcG9uZW50KGMuc3JjKX0sY3Jvc3NEb21haW46dGhpcy5vcHRpb25zLmNyb3NzRG9tYWluLHhockZpZWxkczp7d2l0aENyZWRlbnRpYWxzOnRoaXMub3B0aW9ucy53aXRoQ3JlZGVudGlhbHN9LGhlYWRlcnM6dGhpcy5vcHRpb25zLmhlYWRlcnMsZGF0YVR5cGU6Impzb24ifSkuZG9uZShhLnByb3h5KGZ1bmN0aW9uKGIpe3RyeXtpZihiLmxpbmspe3ZhciBkPW5ldyBJbWFnZTtkLm9uZXJyb3I9YS5wcm94eShmdW5jdGlvbigpe3RoaXMudGhyb3dJbWFnZUVycm9yKDEpfSx0aGlzKSxkLm9ubG9hZD1hLnByb3h5KGZ1bmN0aW9uKCl7Yy5zcmM9Yi5saW5rLHRoaXMuaGlkZUltYWdlTG9hZGVyKCksdGhpcy5oaWRlKCksdGhpcy5lbmFibGUoKSx0aGlzLnRyaWdnZXJFdmVudCgiYWZ0ZXJVcGxvYWRQYXN0ZWRJbWFnZSIsW2EoYyldKX0sdGhpcyksZC5zcmM9Yi5saW5rfWVsc2UgYi5lcnJvcj90aGlzLnRocm93SW1hZ2VFcnJvcldpdGhNZXNzYWdlKGIuZXJyb3IpOnRoaXMudGhyb3dJbWFnZUVycm9yKDIpfWNhdGNoKGUpe3RoaXMudGhyb3dJbWFnZUVycm9yKDQpfX0sdGhpcykpLmZhaWwoYS5wcm94eShmdW5jdGlvbigpe3RoaXMudGhyb3dJbWFnZUVycm9yKDMpfSx0aGlzKSkpOjAhPT1jLnNyYy5pbmRleE9mKCJodHRwIikmJmEoYykucmVtb3ZlKCksYShjKS5yZW1vdmVBdHRyKCJkYXRhLWZyLWltYWdlLXBhc3RlZCIpKTphKGMpLnJlbW92ZSgpfSx0aGlzKSl9LGIucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLmlzRGlzYWJsZWQ9ITAsdGhpcy4kZWxlbWVudC5ibHVyKCl9LGIucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbigpe3RoaXMuaXNEaXNhYmxlZD0hMX0sYi5wcm90b3R5cGUud29yZENsZWFuPWZ1bmN0aW9uKGEpe2E9YS5yZXBsYWNlKC88cCguKj8pY2xhc3M9Ij8nP01zb0xpc3RQYXJhZ3JhcGgiPyc/KFtcc1xTXSo/KT4oW1xzXFNdKj8pPFwvcD4vZ2ksIjx1bD48bGk+PHA+JDM8L3A+PC9saT48L3VsPiIpLGE9YS5yZXBsYWNlKC88cCguKj8pY2xhc3M9Ij8nP01zb0xpc3RQYXJhZ3JhcGhDeFNwRmlyc3QiPyc/KFtcc1xTXSo/KT4oW1xzXFNdKj8pPFwvcD4vZ2ksIjx1bD48bGk+PHA+JDM8L3A+PC9saT4iKSxhPWEucmVwbGFjZSgvPHAoLio/KWNsYXNzPSI/Jz9Nc29MaXN0UGFyYWdyYXBoQ3hTcE1pZGRsZSI/Jz8oW1xzXFNdKj8pPihbXHNcU10qPyk8XC9wPi9naSwiPGxpPjxwPiQzPC9wPjwvbGk+IiksYT1hLnJlcGxhY2UoLzxwKC4qPyljbGFzcz0iPyc/TXNvTGlzdFBhcmFncmFwaEN4U3BMYXN0Ij8nPyhbXHNcU10qPyk+KFtcc1xTXSo/KTxcL3A+L2dpLCI8bGk+PHA+JDM8L3A+PC9saT48L3VsPiIpLGE9YS5yZXBsYWNlKC88c3BhbihbXjxdKj8pc3R5bGU9Ij8nP21zby1saXN0Oklnbm9yZSI/Jz8oW1xzXFNdKj8pPihbXHNcU10qPyk8c3Bhbi9naSwiPHNwYW4+PHNwYW4iKSxhPWEucmVwbGFjZSgvPCEtLVxbaWYgXCFzdXBwb3J0TGlzdHNcXS0tPihbXHNcU10qPyk8IS0tXFtlbmRpZlxdLS0+L2dpLCIiKSxhPWEucmVwbGFjZSgvKFxufFxyfCBjbGFzcz0oIik/TXNvW2EtekEtWl0rKCIpPykvZ2ksIiAiKSxhPWEucmVwbGFjZSgvPCEtLVtcc1xTXSo/LS0+L2dpLCIiKSxhPWEucmVwbGFjZSgvPChcLykqKG1ldGF8bGlua3xzcGFufFxcP3htbDp8c3QxOnxvOnxmb250KSguKj8pPi9naSwiIik7Zm9yKHZhciBiPVsic3R5bGUiLCJzY3JpcHQiLCJhcHBsZXQiLCJlbWJlZCIsIm5vZnJhbWVzIiwibm9zY3JpcHQiXSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPW5ldyBSZWdFeHAoIjwiK2JbY10rIi4qPyIrYltjXSsiKC4qPyk+IiwiZ2kiKTthPWEucmVwbGFjZShkLCIiKX1hPWEucmVwbGFjZSgvKFtcd1wtXSopPSgiW148PiJdKiJ8J1tePD4nXSonfFx3KykvZ2ksIiIpLGE9YS5yZXBsYWNlKC8mbmJzcDsvZ2ksIiIpO3ZhciBlO2RvIGU9YSxhPWEucmVwbGFjZSgvPFteXC8+XVtePl0qPjxcL1tePl0rPi9naSwiIik7d2hpbGUoYSE9ZSk7cmV0dXJuIGE9dGhpcy5jbGVhbihhKX0sYi5wcm90b3R5cGUudGFicz1mdW5jdGlvbihhKXtmb3IodmFyIGI9IiIsYz0wO2E+YztjKyspYis9IiAgIjtyZXR1cm4gYn0sYi5wcm90b3R5cGUuY2xlYW5UYWdzPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9ITEpO3ZhciBjLGQsZSxmLGc9dGhpcy5vcHRpb25zLmZvcm1hdFRhZ3MsaD1bXSxpPVtdLGo9ITE7Zm9yKGQ9MDtkPGEubGVuZ3RoO2QrKylpZihjPWEuY2hhckF0KGQpLCI8Ij09Yyl7dmFyIGs9YS5pbmRleE9mKCI+IixkKzEpO2lmKC0xIT09ayl7dmFyIGw9YS5zdWJzdHJpbmcoZCxrKzEpLG09dGhpcy50YWdOYW1lKGwpLG49dGhpcy5pc0Nsb3NpbmdUYWcobCk7aWYoInByZSI9PT1tJiYoaj1uPyExOiEwKSx0aGlzLmlzU2VsZkNsb3NpbmdUYWcobCkpaS5wdXNoKCJiciI9PT1tJiZqPyJcbiI6bCk7ZWxzZSBpZihuKWZvcihlPSExLGY9ITA7ZT09PSExJiZ2b2lkIDAhPT1mOylmPWgucG9wKCksdm9pZCAwIT09ZiYmZi50YWdfbmFtZSE9PW0/aS5zcGxpY2UoZi5pLDEpOihlPSEwLHZvaWQgMCE9PWYmJmkucHVzaChsKSk7ZWxzZSBpLnB1c2gobCksaC5wdXNoKHt0YWdfbmFtZTptLGk6aS5sZW5ndGgtMX0pO2Q9a319ZWxzZSJcbiI9PT1jJiZ0aGlzLm9wdGlvbnMuYmVhdXRpZnlDb2RlP2ImJmomJmkucHVzaCgiPGJyLz4iKToiCSIhPT1jJiZpLnB1c2goYyk7Zm9yKDtoLmxlbmd0aD4wOylmPWgucG9wKCksaS5zcGxpY2UoZi5pLDEpO3ZhciBvPSJcbiI7dGhpcy5vcHRpb25zLmJlYXV0aWZ5Q29kZXx8KG89IiIpLGE9IiIsaD0wO3ZhciBwPSEwO2ZvcihkPTA7ZDxpLmxlbmd0aDtkKyspMT09aVtkXS5sZW5ndGg/cCYmIiAiPT09aVtkXXx8KGErPWlbZF0scD0hMSk6Zy5pbmRleE9mKHRoaXMudGFnTmFtZShpW2RdKS50b0xvd2VyQ2FzZSgpKTwwP2ErPWlbZF06dGhpcy5pc1NlbGZDbG9zaW5nVGFnKGlbZF0pP2ErPWlbZF06dGhpcy5pc0Nsb3NpbmdUYWcoaVtkXSk/KGgtPTEsMD09PWgmJihwPSEwKSxhLmxlbmd0aD4wJiZhW2EubGVuZ3RoLTFdPT1vJiYoYSs9dGhpcy50YWJzKGgpKSxhKz1pW2RdK28pOihhKz1vK3RoaXMudGFicyhoKStpW2RdLGgrPTEpO3JldHVybiBhWzBdPT1vJiYoYT1hLnN1YnN0cmluZygxLGEubGVuZ3RoKSksYVthLmxlbmd0aC0xXT09byYmKGE9YS5zdWJzdHJpbmcoMCxhLmxlbmd0aC0xKSksYX0sYi5wcm90b3R5cGUuY2xlYW51cExpc3RzPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5maW5kKCJ1bCwgb2wiKS5lYWNoKGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YShjKTtpZihkLmZpbmQoIi5jbG9zZS11bCwgLm9wZW4tdWwsIC5jbG9zZS1vbCwgLm9wZW4tb2wsIC5vcGVuLWxpLCAuY2xvc2UtbGkiKS5sZW5ndGg+MCl7dmFyIGU9IjwiK2MudGFnTmFtZS50b0xvd2VyQ2FzZSgpKyI+IitkLmh0bWwoKSsiPC8iK2MudGFnTmFtZS50b0xvd2VyQ2FzZSgpKyI+IjtlPWUucmVwbGFjZShuZXcgUmVnRXhwKCc8c3BhbiBjbGFzcz0iY2xvc2UtdWwiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCJnIiksIjwvdWw+IiksZT1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnPHNwYW4gY2xhc3M9Im9wZW4tdWwiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCJnIiksIjx1bD4iKSxlPWUucmVwbGFjZShuZXcgUmVnRXhwKCc8c3BhbiBjbGFzcz0iY2xvc2Utb2wiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCJnIiksIjwvb2w+IiksZT1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnPHNwYW4gY2xhc3M9Im9wZW4tb2wiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCJnIiksIjxvbD4iKSxlPWUucmVwbGFjZShuZXcgUmVnRXhwKCc8c3BhbiBjbGFzcz0iY2xvc2UtbGkiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCJnIiksIjwvbGk+IiksZT1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnPHNwYW4gY2xhc3M9Im9wZW4tbGkiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCJnIiksIjxsaT4iKSxkLnJlcGxhY2VXaXRoKGUpfX0pO2Zvcih2YXIgYj10aGlzLiRlbGVtZW50LmZpbmQoIm9sICsgb2wsIHVsICsgdWwiKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWEoYltjXSk7ZC5wcmV2KCkuYXBwZW5kKGQuaHRtbCgpKSxkLnJlbW92ZSgpfXRoaXMuJGVsZW1lbnQuZmluZCgibGkgPiB0ZCIpLnJlbW92ZSgpLHRoaXMuJGVsZW1lbnQuZmluZCgibGk6ZW1wdHkiKS5yZW1vdmUoKSx0aGlzLiRlbGVtZW50LmZpbmQoImxpIHRkOmVtcHR5IikuYXBwZW5kKCI8L2JyPiIpLHRoaXMuJGVsZW1lbnQuZmluZCgidWwsIG9sIikuZWFjaChmdW5jdGlvbihiLGMpe3ZhciBkPWEoYyk7MD09PWQuZmluZChhLkVkaXRhYmxlLlZBTElEX05PREVTLmpvaW4oIiwiKSkubGVuZ3RoJiZkLnJlbW92ZSgpfSksdGhpcy4kZWxlbWVudC5maW5kKCJsaSA+IHRkIikucmVtb3ZlKCksdGhpcy4kZWxlbWVudC5maW5kKCJsaTplbXB0eSIpLnJlbW92ZSgpLHRoaXMuJGVsZW1lbnQuZmluZCgibGkgdGQ6ZW1wdHkiKS5hcHBlbmQoIjwvYnI+Iil9LGIucHJvdG90eXBlLmNsZWFuPWZ1bmN0aW9uKGIsYyxkLGUsZil7Znx8KGY9YS5tZXJnZShbXSx0aGlzLm9wdGlvbnMuYWxsb3dlZEF0dHJzKSksZXx8KGU9YS5tZXJnZShbXSx0aGlzLm9wdGlvbnMuYWxsb3dlZFRhZ3MpKSxjfHwoZi5pbmRleE9mKCJpZCIpPi0xJiZmLnNwbGljZShmLmluZGV4T2YoImlkIiksMSksZi5pbmRleE9mKCJjbGFzcyIpPi0xJiZmLnNwbGljZShmLmluZGV4T2YoImNsYXNzIiksMSkpLGI9Yi5yZXBsYWNlKC88c2NyaXB0XGJbXjxdKig/Oig/ITxcL3NjcmlwdD4pPFtePF0qKSo8XC9zY3JpcHQ+L2dpLCIiKTt2YXIgZz1uZXcgUmVnRXhwKCI8XFwvPygoPyEoPzoiK2Uuam9pbigifCIpKyIpKVxcdyspW14+XSo/PiIsImdpIik7Yj1iLnJlcGxhY2UoZywiIik7dmFyIGg9bmV3IFJlZ0V4cCgiKCAoPyEoPzoiK2Yuam9pbigifCIpKyIpKVthLXpBLVowLTktX10rKT0oKD86Lig/IVxccysoPzpcXFMrKT18Wz5dfChcXC8+KSkpKy4pIiwiZ2kiKTtiPWIucmVwbGFjZShoLCIiKTt2YXIgaT1uZXcgUmVnRXhwKCc8KFtePl0qKShzcmN8aHJlZik9KFwnW15cJ10qXCd8IiJbXiIiXSoiInxbXlxccz5dKykoW14+XSopPicsImdpIik7aWYoYj1iLnJlcGxhY2UoaSxhLnByb3h5KGZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIjwiK2IrYysnPSInK3RoaXMuc2FuaXRpemVVUkwoZC5yZXBsYWNlKC9eWyInXSguKilbIiddXC8/JC9naSwiJDEiKSkrJyInK2UrIj4ifSx0aGlzKSksZCl7dmFyIGo9bmV3IFJlZ0V4cCgic3R5bGU9KFwiW2EtekEtWjAtOTo7XFwuXFxzXFwoXFwpXFwtXFwsIVxcLyclXSpcInwnW2EtekEtWjAtOTo7XFwuXFxzXFwoXFwpXFwtXFwsIVxcL1wiJV0qJykiLCJnaSIpO2I9Yi5yZXBsYWNlKGosIiIpfXJldHVybiBiPXRoaXMuY2xlYW5UYWdzKGIsITApfSxiLnByb3RvdHlwZS5wbGFpblBhc3RlQ2xlYW49ZnVuY3Rpb24oYil7dmFyIGM9YSgiPGRpdj4iKS5odG1sKGIpO2MuZmluZCgiaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcHJlLCBibG9ja3F1b3RlIikuZWFjaChmdW5jdGlvbihiLGMpe2EoYykucmVwbGFjZVdpdGgoIjxwPiIrYShjKS5odG1sKCkrIjwvcD4iKX0pO2Zvcih2YXIgZD1mdW5jdGlvbihiLGMpe2EoYykucmVwbGFjZVdpdGgoYShjKS5odG1sKCkpfTtjLmZpbmQoInN0cm9uZywgZW0sIHN0cmlrZSwgYiwgdSwgaSwgc3VwLCBzdWIsIHNwYW4sIGEiKS5sZW5ndGg7KWMuZmluZCgic3Ryb25nLCBlbSwgc3RyaWtlLCBiLCB1LCBpLCBzdXAsIHN1Yiwgc3BhbiwgYSIpLmVhY2goZCk7cmV0dXJuIGMuaHRtbCgpfSxiLnByb3RvdHlwZS5yZW1vdmVFbXB0eVRhZ3M9ZnVuY3Rpb24oYil7Zm9yKHZhciBjLGQ9YSgiPGRpdj4iKS5odG1sKGIpLGU9ZC5maW5kKCIqOmVtcHR5Om5vdChiciwgaW1nKSIpO2UubGVuZ3RoOyl7Zm9yKGM9MDtjPGUubGVuZ3RoO2MrKylhKGVbY10pLnJlbW92ZSgpO2U9ZC5maW5kKCIqOmVtcHR5Om5vdChiciwgaW1nKSIpfWZvcih2YXIgZj1kLmZpbmQoImRpdiIpO2YubGVuZ3RoOyl7Zm9yKGM9MDtjPGYubGVuZ3RoO2MrKyl7dmFyIGc9YShmW2NdKSxoPWcuaHRtbCgpLnJlcGxhY2UoL1x1MDAwOS9naSwiIikudHJpbSgpO2cucmVwbGFjZVdpdGgoaCl9Zj1kLmZpbmQoImRpdiIpfXJldHVybiBkLmh0bWwoKX0sYi5wcm90b3R5cGUuaW5pdEVsZW1lbnRTdHlsZT1mdW5jdGlvbigpe3RoaXMuZWRpdGFibGVEaXNhYmxlZHx8dGhpcy4kZWxlbWVudC5hdHRyKCJjb250ZW50ZWRpdGFibGUiLCEwKTt2YXIgYT0iZnJvYWxhLWVsZW1lbnQgIit0aGlzLm9wdGlvbnMuZWRpdG9yQ2xhc3M7dGhpcy5icm93c2VyLm1zaWUmJmIuZ2V0SUV2ZXJzaW9uKCk8OSYmKGErPSIgaWU4IiksdGhpcy4kZWxlbWVudC5jc3MoIm91dGxpbmUiLDApLHRoaXMuYnJvd3Nlci5tc2llfHwoYSs9IiBub3QtbXNpZSIpLHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoYSl9LGIucHJvdG90eXBlLmluaXRVbmRvUmVkbz1mdW5jdGlvbigpe3RoaXMudW5kb1N0YWNrPVtdLHRoaXMudW5kb0luZGV4PTAsdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLmRpc2FibGVCcm93c2VyVW5kbygpfSxiLnByb3RvdHlwZS5lbmFibGVUeXBpbmc9ZnVuY3Rpb24oKXt0aGlzLnR5cGluZ1RpbWVyPW51bGwsdGhpcy4kZWxlbWVudC5vbigia2V5ZG93biBjdXQiLGEucHJveHkoZnVuY3Rpb24oYil7cmV0dXJuImtleWRvd24iIT09Yi50eXBlfHx0aGlzLnRyaWdnZXJFdmVudCgia2V5ZG93biIsW2Iud2hpY2gsKGIuY3RybEtleXx8Yi5tZXRhS2V5KSYmIWIuYWx0S2V5XSwhMSk/KGNsZWFyVGltZW91dCh0aGlzLnR5cGluZ1RpbWVyKSx0aGlzLmFqYXhTYXZlPSExLHRoaXMub2xkSFRNTD10aGlzLmdldEhUTUwoKSx2b2lkKHRoaXMudHlwaW5nVGltZXI9c2V0VGltZW91dChhLnByb3h5KGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRIVE1MKCk7dGhpcy5pbWV8fGEucmVwbGFjZSgvW1x1MzA0MS1cdTMwOTZdfFtcdTMwQTAtXHUzMEZGXXxbXHU0RTAwLVx1OUZGRl0vZ2ksIiIpPT10aGlzLm9sZEhUTUwucmVwbGFjZSgvW1x1MzA0MS1cdTMwOTZdfFtcdTMwQTAtXHUzMEZGXXxbXHU0RTAwLVx1OUZGRl0vZ2ksIiIpfHwodGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLnN5bmMoKSl9LHRoaXMpLE1hdGgubWF4KHRoaXMub3B0aW9ucy50eXBpbmdUaW1lciwxNTApKSkpOiExfSx0aGlzKSl9LGIucHJvdG90eXBlLnJlbW92ZU1hcmtlcnNCeVJlZ2V4PWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoLzxzcGFuW14+XSo/IGNsYXNzXHMqPVxzKlsiJ10/Zi1tYXJrZXJbIiddP1tePl0rPihbXFNcc11bXlwvXSkqPFwvc3Bhbj4vZ2ksIiIpfSxiLnByb3RvdHlwZS5nZXRJbWFnZUhUTUw9ZnVuY3Rpb24oKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoe3NyYzp0aGlzLiRlbGVtZW50LmZpbmQoImltZyIpLmF0dHIoInNyYyIpLHN0eWxlOnRoaXMuJGVsZW1lbnQuZmluZCgiaW1nIikuYXR0cigic3R5bGUiKSxhbHQ6dGhpcy4kZWxlbWVudC5maW5kKCJpbWciKS5hdHRyKCJhbHQiKSx3aWR0aDp0aGlzLiRlbGVtZW50LmZpbmQoImltZyIpLmF0dHIoIndpZHRoIiksbGluazp0aGlzLiRlbGVtZW50LmZpbmQoImEiKS5hdHRyKCJocmVmIiksbGlua190aXRsZTp0aGlzLiRlbGVtZW50LmZpbmQoImEiKS5hdHRyKCJ0aXRsZSIpLGxpbmtfdGFyZ2V0OnRoaXMuJGVsZW1lbnQuZmluZCgiYSIpLmF0dHIoInRhcmdldCIpfSl9LGIucHJvdG90eXBlLmdldExpbmtIVE1MPWZ1bmN0aW9uKCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHtib2R5OnRoaXMuJGVsZW1lbnQuaHRtbCgpLGhyZWY6dGhpcy4kZWxlbWVudC5hdHRyKCJocmVmIiksdGl0bGU6dGhpcy4kZWxlbWVudC5hdHRyKCJ0aXRsZSIpLHBvcG91dDp0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJwb3BvdXQiKSxub2ZvbGxvdzoibm9mb2xsb3ciPT10aGlzLiRlbGVtZW50LmF0dHIoInJlZiIpLGJsYW5rOiJfYmxhbmsiPT10aGlzLiRlbGVtZW50LmF0dHIoInRhcmdldCIpLGxlZnQ6dGhpcy4kZWxlbWVudC5wYXJlbnRzKCIubmF2YmFyLWxlZnQiKS5sZW5ndGg+MCwiY2xhc3MiOnRoaXMuJGVsZW1lbnQuYXR0cigiY2xhc3MiKS5yZXBsYWNlKC9mcm9hbGEtZWxlbWVudC8sIiIpLnJlcGxhY2UoL25vdC1tc2llLywiIikucmVwbGFjZSgvICsoPz0gKS9nLCIiKS5zcGxpdCgiICIpLnNvcnQoKS5qb2luKCIgIil9KX0sYi5wcm90b3R5cGUuYWRkRnJUYWc9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LmZpbmQoInAsIGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYsIHByZSwgYmxvY2txdW90ZSwgdGFibGUsIHVsLCBvbCwgaW1nIikuYWRkQ2xhc3MoImZyLXRhZyIpfSxiLnByb3RvdHlwZS5nZXRIVE1MPWZ1bmN0aW9uKGIsYyl7aWYodm9pZCAwPT09YyYmKGM9ITEpLHZvaWQgMD09PWImJihiPSExKSx0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJmLXBsYWNlaG9sZGVyIikpcmV0dXJuIiI7aWYodGhpcy5pc0hUTUwpcmV0dXJuIHRoaXMuJGh0bWxfYXJlYS52YWwoKTtpZih0aGlzLmlzSW1hZ2UpcmV0dXJuIHRoaXMuZ2V0SW1hZ2VIVE1MKCk7aWYodGhpcy5pc0xpbmspcmV0dXJuIHRoaXMuZ2V0TGlua0hUTUwoKTt0aGlzLiRlbGVtZW50LmZpbmQoImEiKS5kYXRhKCJmci1saW5rIiwhMCksYyYmdGhpcy5hZGRGclRhZygpLHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLWVkaXRvciA+IGltZyIpLmVhY2goYS5wcm94eShmdW5jdGlvbihiLGMpe3RoaXMuYWRkSW1hZ2VDbGFzcyhhKGMpLHRoaXMuZ2V0SW1hZ2VDbGFzcyhhKGMpLnBhcmVudCgpLmF0dHIoImNsYXNzIikpKX0sdGhpcykpLHRoaXMuJGVsZW1lbnQuZmluZCgicHJlIikuZWFjaChhLnByb3h5KGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YShjKSxlPWQuaHRtbCgpLGY9ZS5yZXBsYWNlKC9cJm5ic3A7L2dpLCIgIik7ZSE9ZiYmKHRoaXMuc2F2ZVNlbGVjdGlvbkJ5TWFya2VycygpLGQuaHRtbChmKSx0aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSl9LHRoaXMpKTt2YXIgZD10aGlzLiRlbGVtZW50Lmh0bWwoKTtyZXR1cm4gdGhpcy4kZWxlbWVudC5maW5kKCIuZi1pbWctZWRpdG9yID4gaW1nIikucmVtb3ZlQ2xhc3MoImZyLWZpbiBmci1maWwgZnItZmlyIiksdGhpcy4kZWxlbWVudC5maW5kKCJwLCBoMSwgaDIsIGgzLCBoNCwgaDUsIGg2LCBwcmUsIGJsb2NrcXVvdGUsIHRhYmxlLCB1bCwgb2wsIGltZyIpLnJlbW92ZUNsYXNzKCJmci10YWciKSxkPXRoaXMuc3luY0NsZWFuSFRNTChkLGIpLGQ9ZC5yZXBsYWNlKC88YVtePl0qPz48XC9hPi9nLCIiKSxifHwoZD10aGlzLnJlbW92ZU1hcmtlcnNCeVJlZ2V4KGQpKSxkPWQucmVwbGFjZSgvPHNwYW5bXj5dKj8gY2xhc3Nccyo9XHMqWyInXT9mLWltZy1oYW5kbGVbXj5dKz48XC9zcGFuPi9naSwiIiksZD1kLnJlcGxhY2UoL14oW1xTXHNdKik8c3BhbltePl0qPyBjbGFzc1xzKj1ccypbIiddP2YtaW1nLWVkaXRvcltePl0rPihbXFNcc10qKTxcL3NwYW4+KFtcU1xzXSopJC9naSwiJDEkMiQzIiksZD1kLnJlcGxhY2UoL14oW1xTXHNdKik8c3BhbltePl0qPyBjbGFzc1xzKj1ccypbIiddP2YtaW1nLXdyYXBbXj5dKz4oW1xTXHNdKik8XC9zcGFuPihbXFNcc10qKSQvZ2ksIiQxJDIkMyIpLGQ9ZC5yZXBsYWNlKC9cJmFtcDsvZ2ksIiYiKSx0aGlzLm9wdGlvbnMuc2ltcGxlQW1wZXJzYW5kJiYoZD1kLnJlcGxhY2UoL1wmYW1wOy9naSwiJiIpKSxkPWQucmVwbGFjZSgvIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiL2dpLCIiKSx0aGlzLm9wdGlvbnMuYmVhdXRpZnlDb2RlJiYoZD1kLnJlcGxhY2UoL1xuL2dpLCIiKSksZD1kLnJlcGxhY2UoL1x1MjAwQi9naSwiIil9LGIucHJvdG90eXBlLmdldFRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWxlbWVudC50ZXh0KCl9LGIucHJvdG90eXBlLmluaXRBamF4U2F2ZXI9ZnVuY3Rpb24oKXt0aGlzLmFqYXhIVE1MPXRoaXMuZ2V0SFRNTCgpLHRoaXMuYWpheFNhdmU9ITAsdGhpcy5hamF4SW50ZXJ2YWw9c2V0SW50ZXJ2YWwoYS5wcm94eShmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0SFRNTCgpO3RoaXMuYWpheEhUTUwhPWEmJnRoaXMuYWpheFNhdmUmJih0aGlzLm9wdGlvbnMuYXV0b3NhdmUmJnRoaXMuc2F2ZSgpLHRoaXMuYWpheEhUTUw9YSksdGhpcy5hamF4U2F2ZT0hMH0sdGhpcyksTWF0aC5tYXgodGhpcy5vcHRpb25zLmF1dG9zYXZlSW50ZXJ2YWwsMTAwKSl9LGIucHJvdG90eXBlLmRpc2FibGVCcm93c2VyVW5kbz1mdW5jdGlvbigpe2EoImJvZHkiKS5rZXlkb3duKGZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2gsYz0oYS5jdHJsS2V5fHxhLm1ldGFLZXkpJiYhYS5hbHRLZXk7aWYoIXRoaXMuaXNIVE1MJiZjKXtpZig3NT09YilyZXR1cm4gYS5wcmV2ZW50RGVmYXVsdCgpLCExO2lmKDkwPT1iJiZhLnNoaWZ0S2V5KXJldHVybiBhLnByZXZlbnREZWZhdWx0KCksITE7aWYoOTA9PWIpcmV0dXJuIGEucHJldmVudERlZmF1bHQoKSwhMX19KX0sYi5wcm90b3R5cGUuc2F2ZVVuZG9TdGVwPWZ1bmN0aW9uKCl7Zm9yKDt0aGlzLnVuZG9TdGFjay5sZW5ndGg+dGhpcy51bmRvSW5kZXg7KXRoaXMudW5kb1N0YWNrLnBvcCgpO3ZhciBhPXRoaXMuZ2V0SFRNTCghMCk7cmV0dXJuIHRoaXMudW5kb1N0YWNrW3RoaXMudW5kb0luZGV4LTFdJiZ0aGlzLnJlbW92ZU1hcmtlcnNCeVJlZ2V4KHRoaXMudW5kb1N0YWNrW3RoaXMudW5kb0luZGV4LTFdKT09YT8hMToodGhpcy5zZWxlY3Rpb25JbkVkaXRvcigpJiZ0aGlzLiRlbGVtZW50LmlzKCI6Zm9jdXMiKSYmdGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy51bmRvU3RhY2sucHVzaCh0aGlzLmdldEhUTUwoITApKSx0aGlzLnVuZG9JbmRleCsrLHRoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKSYmdGhpcy4kZWxlbWVudC5pcygiOmZvY3VzIikmJnRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycyghMSksdGhpcy5yZWZyZXNoVW5kbygpLHZvaWQgdGhpcy5yZWZyZXNoUmVkbygpKX0sYi5wcm90b3R5cGUuc2hvcnRjdXRFbmFibGVkPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9wdGlvbnMuc2hvcnRjdXRzQXZhaWxhYmxlLmluZGV4T2YoYSk+PTB9LGIucHJvdG90eXBlLnNob3J0Y3V0c19tYXA9ezcwOiJzaG93Iiw2NjoiYm9sZCIsNzM6Iml0YWxpYyIsODU6InVuZGVybGluZSIsNzU6ImNyZWF0ZUxpbmsiLDgwOiJpbnNlcnRJbWFnZSIsNjU6InNlbGVjdEFsbCIsMjIxOiJpbmRlbnQiLDIxOToib3V0ZGVudCIsNzI6Imh0bWwiLDQ4OiJmb3JtYXRCbG9jayBuIiw0OToiZm9ybWF0QmxvY2sgaDEiLDUwOiJmb3JtYXRCbG9jayBoMiIsNTE6ImZvcm1hdEJsb2NrIGgzIiw1MjoiZm9ybWF0QmxvY2sgaDQiLDUzOiJmb3JtYXRCbG9jayBoNSIsNTQ6ImZvcm1hdEJsb2NrIGg2IiwyMjI6ImZvcm1hdEJsb2NrIGJsb2NrcXVvdGUiLDIyMDoiZm9ybWF0QmxvY2sgcHJlIiw4Mzoic3RyaWtlVGhyb3VnaCJ9LGIucHJvdG90eXBlLmluaXRTaG9ydGN1dHM9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuc2hvcnRjdXRzJiZ0aGlzLiRlbGVtZW50Lm9uKCJrZXlkb3duIixhLnByb3h5KGZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2gsYz0oYS5jdHJsS2V5fHxhLm1ldGFLZXkpJiYhYS5hbHRLZXk7aWYoIXRoaXMuaXNIVE1MJiZjKXtpZih0aGlzLnNob3J0Y3V0c19tYXBbYl0mJnRoaXMuc2hvcnRjdXRFbmFibGVkKHRoaXMuc2hvcnRjdXRzX21hcFtiXSkpcmV0dXJuIHRoaXMuZXhlY0RlZmF1bHRTaG9ydGN1dC5hcHBseSh0aGlzLHRoaXMuc2hvcnRjdXRzX21hcFtiXS5zcGxpdCgiICIpKTtpZig5MD09YiYmYS5zaGlmdEtleSlyZXR1cm4gYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5yZWRvKCksITE7aWYoOTA9PWIpcmV0dXJuIGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpLHRoaXMudW5kbygpLCExfX0sdGhpcykpfSxiLnByb3RvdHlwZS5pbml0VGFicz1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQub24oImtleWRvd24iLGEucHJveHkoZnVuY3Rpb24oYSl7dmFyIGI9YS53aGljaDtpZig5IT1ifHxhLnNoaWZ0S2V5KTk9PWImJmEuc2hpZnRLZXkmJih0aGlzLnJhaXNlRXZlbnQoInNoaWZ0K3RhYiIpP3RoaXMub3B0aW9ucy50YWJTcGFjZXM/YS5wcmV2ZW50RGVmYXVsdCgpOnRoaXMuYmx1cigpOmEucHJldmVudERlZmF1bHQoKSk7ZWxzZSBpZih0aGlzLnJhaXNlRXZlbnQoInRhYiIpKWlmKHRoaXMub3B0aW9ucy50YWJTcGFjZXMpe2EucHJldmVudERlZmF1bHQoKTt2YXIgYz0iJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IixkPXRoaXMuZ2V0U2VsZWN0aW9uRWxlbWVudHMoKVswXTsiUFJFIj09PWQudGFnTmFtZSYmKGM9IiAgICAiKSx0aGlzLmluc2VydEhUTUwoYywhMSl9ZWxzZSB0aGlzLmJsdXIoKTtlbHNlIGEucHJldmVudERlZmF1bHQoKX0sdGhpcykpfSxiLnByb3RvdHlwZS50ZXh0RW1wdHk9ZnVuY3Rpb24oYil7dmFyIGM9YShiKS50ZXh0KCkucmVwbGFjZSgvKFxyXG58XG58XHJ8XHQpL2dtLCIiKTtyZXR1cm4oIiI9PT1jfHxiPT09dGhpcy4kZWxlbWVudC5nZXQoMCkpJiYwPT09YShiKS5maW5kKCJiciIpLmxlbmd0aH0sYi5wcm90b3R5cGUuaW5FZGl0b3I9ZnVuY3Rpb24oYSl7Zm9yKDthJiYiQk9EWSIhPT1hLnRhZ05hbWU7KXtpZihhPT09dGhpcy4kZWxlbWVudC5nZXQoMCkpcmV0dXJuITA7YT1hLnBhcmVudE5vZGV9cmV0dXJuITF9LGIucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKGMpe2lmKHZvaWQgMD09PWMmJihjPSEwKSwiIiE9PXRoaXMudGV4dCgpJiYhdGhpcy4kZWxlbWVudC5pcygiOmZvY3VzIikpcmV0dXJuIHZvaWQodGhpcy5icm93c2VyLm1zaWV8fHRoaXMuJGVsZW1lbnQuZm9jdXMoKSk7aWYoIXRoaXMuaXNIVE1MKXshY3x8dGhpcy5wYXN0aW5nfHx0aGlzLmJyb3dzZXIubXNpZXx8dGhpcy4kZWxlbWVudC5mb2N1cygpLHRoaXMucGFzdGluZyYmIXRoaXMuJGVsZW1lbnQuaXMoIjpmb2N1cyIpJiZ0aGlzLiRlbGVtZW50LmZvY3VzKCk7dmFyIGQ9dGhpcy5nZXRSYW5nZSgpO2lmKCIiPT09dGhpcy50ZXh0KCkmJmQmJigwPT09ZC5zdGFydE9mZnNldHx8ZC5zdGFydENvbnRhaW5lcj09PXRoaXMuJGVsZW1lbnQuZ2V0KDApfHwhdGhpcy5pbkVkaXRvcihkLnN0YXJ0Q29udGFpbmVyKSkpe3ZhciBlLGYsZz10aGlzLmdldFNlbGVjdGlvbkVsZW1lbnRzKCk7aWYoYS5tZXJnZShbIklNRyIsIkJSIl0sYS5FZGl0YWJsZS5WQUxJRF9OT0RFUykuaW5kZXhPZih0aGlzLmdldFNlbGVjdGlvbkVsZW1lbnQoKS50YWdOYW1lKTwwKXJldHVybiExO2lmKGcubGVuZ3RoPj0xJiZnWzBdIT09dGhpcy4kZWxlbWVudC5nZXQoMCkpZm9yKGU9MDtlPGcubGVuZ3RoO2UrKylpZihmPWdbZV0sIXRoaXMudGV4dEVtcHR5KGYpfHx0aGlzLmJyb3dzZXIubXNpZSlyZXR1cm4gdm9pZCB0aGlzLnNldFNlbGVjdGlvbihmKTtpZihkLnN0YXJ0Q29udGFpbmVyPT09dGhpcy4kZWxlbWVudC5nZXQoMCkmJmQuc3RhcnRPZmZzZXQ+MCYmIXRoaXMub3B0aW9ucy5wYXJhZ3JhcGh5KXJldHVybiB2b2lkIHRoaXMuc2V0U2VsZWN0aW9uKHRoaXMuJGVsZW1lbnQuZ2V0KDApLGQuc3RhcnRPZmZzZXQpO2ZvcihnPXRoaXMuJGVsZW1lbnQuZmluZChiLlZBTElEX05PREVTLmpvaW4oIiwiKSksZT0wO2U8Zy5sZW5ndGg7ZSsrKWlmKGY9Z1tlXSwhdGhpcy50ZXh0RW1wdHkoZikmJjA9PT1hKGYpLmZpbmQoYS5FZGl0YWJsZS5WQUxJRF9OT0RFUy5qb2luKCIsIikpLmxlbmd0aClyZXR1cm4gdm9pZCB0aGlzLnNldFNlbGVjdGlvbihmKTt0aGlzLnNldFNlbGVjdGlvbih0aGlzLiRlbGVtZW50LmdldCgwKSl9fX0sYi5wcm90b3R5cGUuaW5zZXJ0SFRNTD1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPSEwKSwhdGhpcy5pc0hUTUwmJmImJnRoaXMuZm9jdXMoKTt2YXIgYyxkO2lmKHRoaXMubm9fdmVyaWZ5PSEwLHdpbmRvdy5nZXRTZWxlY3Rpb24pe2lmKGM9d2luZG93LmdldFNlbGVjdGlvbigpLGMuZ2V0UmFuZ2VBdCYmYy5yYW5nZUNvdW50KXtkPWMuZ2V0UmFuZ2VBdCgwKSxkLmRlbGV0ZUNvbnRlbnRzKCk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZS5pbm5lckhUTUw9YTtmb3IodmFyIGYsZyxoPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtmPWUuZmlyc3RDaGlsZDspZz1oLmFwcGVuZENoaWxkKGYpO2QuaW5zZXJ0Tm9kZShoKSxnJiYoZD1kLmNsb25lUmFuZ2UoKSxkLmNvbGxhcHNlKCExKSxjLnJlbW92ZUFsbFJhbmdlcygpLGMuYWRkUmFuZ2UoZCkpfX1lbHNlIGlmKChjPWRvY3VtZW50LnNlbGVjdGlvbikmJiJDb250cm9sIiE9Yy50eXBlKXt2YXIgaT1jLmNyZWF0ZVJhbmdlKCk7aS5jb2xsYXBzZSghMCksYy5jcmVhdGVSYW5nZSgpLnBhc3RlSFRNTChhKSxzZWxlY3RQYXN0ZWRDb250ZW50JiYoZD1jLmNyZWF0ZVJhbmdlKCksZC5zZXRFbmRQb2ludCgiU3RhcnRUb1N0YXJ0IixpKSxkLnNlbGVjdCgpKQp9dGhpcy5ub192ZXJpZnk9ITF9LGIucHJvdG90eXBlLmV4ZWNEZWZhdWx0U2hvcnRjdXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pc0VuYWJsZWQoYSk/KHRoaXMuZXhlYyhhLGIpLCExKTohMH0sYi5wcm90b3R5cGUuaW5pdEVkaXRvcj1mdW5jdGlvbigpe3ZhciBjPSJmcm9hbGEtZWRpdG9yIjt0aGlzLmlzVG91Y2goKSYmKGMrPSIgdG91Y2giKSx0aGlzLmJyb3dzZXIubXNpZSYmYi5nZXRJRXZlcnNpb24oKTw5JiYoYys9IiBpZTgiKSx0aGlzLiRlZGl0b3I9YSgnPGRpdiBjbGFzcz0iJytjKyciIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+JyksYSgiYm9keSIpLmFwcGVuZCh0aGlzLiRlZGl0b3IpLHRoaXMub3B0aW9ucy5pbmxpbmVNb2RlP3RoaXMuaW5pdElubGluZUVkaXRvcigpOnRoaXMuaW5pdEJhc2ljRWRpdG9yKCl9LGIucHJvdG90eXBlLnRvb2xiYXJUb3A9ZnVuY3Rpb24oKXthKHdpbmRvdykub24oInNjcm9sbCByZXNpemUiLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMudG9vbGJhckZpeGVkfHx0aGlzLm9wdGlvbnMuaW5saW5lTW9kZXx8KGEod2luZG93KS5zY3JvbGxUb3AoKT50aGlzLiRib3gub2Zmc2V0KCkudG9wJiZhKHdpbmRvdykuc2Nyb2xsVG9wKCk8dGhpcy4kYm94Lm9mZnNldCgpLnRvcCt0aGlzLiRib3guaGVpZ2h0KCk/KHRoaXMuJGVkaXRvci5hZGRDbGFzcygiZi1zY3JvbGwiKSx0aGlzLiRib3guY3NzKCJwYWRkaW5nLXRvcCIsdGhpcy4kZWRpdG9yLmhlaWdodCgpKSx0aGlzLiRlZGl0b3IuY3NzKCJ0b3AiLGEod2luZG93KS5zY3JvbGxUb3AoKS10aGlzLiRib3gub2Zmc2V0KCkudG9wKSk6YSh3aW5kb3cpLnNjcm9sbFRvcCgpPHRoaXMuJGJveC5vZmZzZXQoKS50b3AmJih0aGlzLiRlZGl0b3IucmVtb3ZlQ2xhc3MoImYtc2Nyb2xsIiksdGhpcy4kYm94LmNzcygicGFkZGluZy10b3AiLCIiKSx0aGlzLiRlZGl0b3IuY3NzKCJ0b3AiLCIiKSkpfSx0aGlzKSl9LGIucHJvdG90eXBlLmluaXRCYXNpY0VkaXRvcj1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoImYtYmFzaWMiKSx0aGlzLiRwb3B1cF9lZGl0b3I9dGhpcy4kZWRpdG9yLmNsb25lKCksdGhpcy4kcG9wdXBfZWRpdG9yLmFwcGVuZFRvKGEoImJvZHkiKSkuYWRkQ2xhc3MoImYtaW5saW5lIiksdGhpcy4kZWRpdG9yLmFkZENsYXNzKCJmLWJhc2ljIikuc2hvdygpLHRoaXMuJGVkaXRvci5pbnNlcnRCZWZvcmUodGhpcy4kZWxlbWVudCksdGhpcy50b29sYmFyVG9wKCl9LGIucHJvdG90eXBlLmluaXRJbmxpbmVFZGl0b3I9ZnVuY3Rpb24oKXt0aGlzLiRlZGl0b3IuYWRkQ2xhc3MoImYtaW5saW5lIiksdGhpcy4kcG9wdXBfZWRpdG9yPXRoaXMuJGVkaXRvcn0sYi5wcm90b3R5cGUuaW5pdERyYWc9ZnVuY3Rpb24oKXt0aGlzLmRyYWdfc3VwcG9ydD17ZmlsZXJlYWRlcjoidW5kZWZpbmVkIiE9dHlwZW9mIEZpbGVSZWFkZXIsZm9ybWRhdGE6ISF3aW5kb3cuRm9ybURhdGEscHJvZ3Jlc3M6InVwbG9hZCJpbiBuZXcgWE1MSHR0cFJlcXVlc3R9fSxiLnByb3RvdHlwZS5pbml0T3B0aW9ucz1mdW5jdGlvbigpe3RoaXMuc2V0RGltZW5zaW9ucygpLHRoaXMuc2V0U3BlbGxjaGVjaygpLHRoaXMuc2V0SW1hZ2VVcGxvYWRVUkwoKSx0aGlzLnNldEJ1dHRvbnMoKSx0aGlzLnNldERpcmVjdGlvbigpLHRoaXMuc2V0VGV4dE5lYXJJbWFnZSgpLHRoaXMuc2V0WkluZGV4KCksdGhpcy5zZXRUaGVtZSgpLHRoaXMub3B0aW9ucy5lZGl0SW5Qb3B1cCYmdGhpcy5idWlsZEVkaXRQb3B1cCgpfSxiLnByb3RvdHlwZS5pc1RvdWNoPWZ1bmN0aW9uKCl7cmV0dXJuIFdZU0lXWUdNb2Rlcm5penIudG91Y2gmJnZvaWQgMCE9PXdpbmRvdy5Ub3VjaH0sYi5wcm90b3R5cGUuaW5pdEVkaXRvclNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQub24oImtleXVwIixhLnByb3h5KGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRyaWdnZXJFdmVudCgia2V5dXAiLFthXSwhMSl9LHRoaXMpKSx0aGlzLiRlbGVtZW50Lm9uKCJmb2N1cyIsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuYmx1cnJlZCYmKHRoaXMuYmx1cnJlZD0hMSx0aGlzLnBhc3Rpbmd8fCIiIT09dGhpcy50ZXh0KCl8fHRoaXMuZm9jdXMoITEpLHRoaXMudHJpZ2dlckV2ZW50KCJmb2N1cyIsW10sITEpKX0sdGhpcykpLHRoaXMuJGVsZW1lbnQub24oIm1vdXNlZG93biB0b3VjaHN0YXJ0IixhLnByb3h5KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMTp2b2lkKHRoaXMuaXNSZXNpemluZygpfHwodGhpcy5jbG9zZUltYWdlTW9kZSgpLHRoaXMuaGlkZSgpKSl9LHRoaXMpKSx0aGlzLm9wdGlvbnMuZGlzYWJsZVJpZ2h0Q2xpY2smJnRoaXMuJGVsZW1lbnQuY29udGV4dG1lbnUoYS5wcm94eShmdW5jdGlvbihhKXtyZXR1cm4gYS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMub3B0aW9ucy5pbmxpbmVNb2RlJiZ0aGlzLiRlbGVtZW50LmZvY3VzKCksITF9LHRoaXMpKSx0aGlzLiRlbGVtZW50Lm9uKCJtb3VzZXVwIHRvdWNoZW5kIixhLnByb3h5KGZ1bmN0aW9uKGIpe2lmKHRoaXMuaXNEaXNhYmxlZClyZXR1cm4hMTtpZighdGhpcy5pc1Jlc2l6aW5nKCkpe3ZhciBjPXRoaXMudGV4dCgpO2Iuc3RvcFByb3BhZ2F0aW9uKCksISgiIiE9PWN8fHRoaXMub3B0aW9ucy5hbHdheXNWaXNpYmxlfHx0aGlzLm9wdGlvbnMuZWRpdEluUG9wdXB8fCgzPT1iLndoaWNofHwyPT1iLmJ1dHRvbikmJnRoaXMub3B0aW9ucy5pbmxpbmVNb2RlJiYhdGhpcy5pc0ltYWdlJiZ0aGlzLm9wdGlvbnMuZGlzYWJsZVJpZ2h0Q2xpY2spfHx0aGlzLmxpbmt8fHRoaXMuaW1hZ2VNb2RlP3RoaXMub3B0aW9ucy5pbmxpbmVNb2RlfHx0aGlzLnJlZnJlc2hCdXR0b25zKCk6c2V0VGltZW91dChhLnByb3h5KGZ1bmN0aW9uKCl7Yz10aGlzLnRleHQoKSwhKCIiIT09Y3x8dGhpcy5vcHRpb25zLmFsd2F5c1Zpc2libGV8fHRoaXMub3B0aW9ucy5lZGl0SW5Qb3B1cHx8KDM9PWIud2hpY2h8fDI9PWIuYnV0dG9uKSYmdGhpcy5vcHRpb25zLmlubGluZU1vZGUmJiF0aGlzLmlzSW1hZ2UmJnRoaXMub3B0aW9ucy5kaXNhYmxlUmlnaHRDbGljayl8fHRoaXMubGlua3x8dGhpcy5pbWFnZU1vZGV8fCh0aGlzLnNob3coYiksdGhpcy5vcHRpb25zLmVkaXRJblBvcHVwJiZ0aGlzLnNob3dFZGl0UG9wdXAoKSl9LHRoaXMpLDIwKSx0aGlzLmltYWdlTW9kZT0hMX19LHRoaXMpKSx0aGlzLiRlZGl0b3Iub24oIm1vdXNldXAiLGEucHJveHkoZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMTp2b2lkKHRoaXMuaXNSZXNpemluZygpfHwoYS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLm9wdGlvbnMuaW5saW5lTW9kZT09PSExJiZ0aGlzLmhpZGUoKSkpfSx0aGlzKSksdGhpcy4kZWRpdG9yLm9uKCJtb3VzZWRvd24iLCIuZnItZHJvcGRvd24tbWVudSIsYS5wcm94eShmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pc0Rpc2FibGVkPyExOihhLnN0b3BQcm9wYWdhdGlvbigpLHZvaWQodGhpcy5ub0hpZGU9ITApKX0sdGhpcykpLHRoaXMuJHBvcHVwX2VkaXRvci5vbigibW91c2Vkb3duIiwiLmZyLWRyb3Bkb3duLW1lbnUiLGEucHJveHkoZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMTooYS5zdG9wUHJvcGFnYXRpb24oKSx2b2lkKHRoaXMubm9IaWRlPSEwKSl9LHRoaXMpKSx0aGlzLiRwb3B1cF9lZGl0b3Iub24oIm1vdXNldXAiLGEucHJveHkoZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMTp2b2lkKHRoaXMuaXNSZXNpemluZygpfHxhLnN0b3BQcm9wYWdhdGlvbigpKX0sdGhpcykpLHRoaXMuJGVkaXRfcG9wdXBfd3JhcHBlciYmdGhpcy4kZWRpdF9wb3B1cF93cmFwcGVyLm9uKCJtb3VzZXVwIixhLnByb3h5KGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzRGlzYWJsZWQ/ITE6dm9pZCh0aGlzLmlzUmVzaXppbmcoKXx8YS5zdG9wUHJvcGFnYXRpb24oKSl9LHRoaXMpKSx0aGlzLnNldERvY3VtZW50U2VsZWN0aW9uQ2hhbmdlRXZlbnQoKSx0aGlzLnNldFdpbmRvd01vdXNlVXBFdmVudCgpLHRoaXMuc2V0V2luZG93S2V5RG93bkV2ZW50KCksdGhpcy5zZXRXaW5kb3dLZXlVcEV2ZW50KCksdGhpcy5zZXRXaW5kb3dPcmllbnRhdGlvbkNoYW5nZUV2ZW50KCksdGhpcy5zZXRXaW5kb3dIaWRlRXZlbnQoKSx0aGlzLnNldFdpbmRvd0JsdXJFdmVudCgpLHRoaXMub3B0aW9ucy50cmFja1Njcm9sbCYmdGhpcy5zZXRXaW5kb3dTY3JvbGxFdmVudCgpfSxiLnByb3RvdHlwZS5ibHVyPWZ1bmN0aW9uKGIpe3RoaXMuYmx1cnJlZHx8dGhpcy5wYXN0aW5nfHwodGhpcy5zZWxlY3Rpb25EaXNhYmxlZD0hMCx0aGlzLnRyaWdnZXJFdmVudCgiYmx1ciIsW10pLGImJjA9PT1hKCIqOmZvY3VzIikubGVuZ3RoJiZ0aGlzLmNsZWFyU2VsZWN0aW9uKCksdGhpcy5zZWxlY3Rpb25EaXNhYmxlZD0hMSx0aGlzLmJsdXJyZWQ9ITApfSxiLnByb3RvdHlwZS5zZXRXaW5kb3dCbHVyRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLiR3aW5kb3cub24oImJsdXIuIit0aGlzLl9pZCxhLnByb3h5KGZ1bmN0aW9uKGEsYil7dGhpcy5ibHVyKGIpfSx0aGlzKSl9LGIucHJvdG90eXBlLnNldFdpbmRvd0hpZGVFdmVudD1mdW5jdGlvbigpe3RoaXMuJHdpbmRvdy5vbigiaGlkZS4iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXppbmcoKXx8dGhpcy5oaWRlKCExKX0sdGhpcykpfSxiLnByb3RvdHlwZS5zZXRXaW5kb3dPcmllbnRhdGlvbkNoYW5nZUV2ZW50PWZ1bmN0aW9uKCl7dGhpcy4kd2luZG93Lm9uKCJvcmllbnRhdGlvbmNoYW5nZS4iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmhpZGUoKX0sdGhpcyksMTApfSx0aGlzKSl9LGIucHJvdG90eXBlLnNldERvY3VtZW50U2VsZWN0aW9uQ2hhbmdlRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLiRkb2N1bWVudC5vbigic2VsZWN0aW9uY2hhbmdlLiIrdGhpcy5faWQsYS5wcm94eShmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5pc0Rpc2FibGVkPyExOnZvaWQodGhpcy5pc1Jlc2l6aW5nKCl8fHRoaXMuaXNTY3JvbGxpbmd8fChjbGVhclRpbWVvdXQodGhpcy5zZWxlY3Rpb25DaGFuZ2VkVGltZW91dCksdGhpcy5zZWxlY3Rpb25DaGFuZ2VkVGltZW91dD1zZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuaW5saW5lTW9kZSYmdGhpcy5zZWxlY3Rpb25JbkVkaXRvcigpJiZ0aGlzLmxpbmshPT0hMCYmdGhpcy5pc1RvdWNoKCkpe3ZhciBhPXRoaXMudGV4dCgpOyIiIT09YT8odGhpcy5pUGhvbmUoKXx8dGhpcy5pUG9kKCk/dGhpcy5vcHRpb25zLmFsd2F5c1Zpc2libGV8fHRoaXMuaGlkZSgpOnRoaXMuc2hvdyhudWxsKSxiLnN0b3BQcm9wYWdhdGlvbigpKTp0aGlzLm9wdGlvbnMuYWx3YXlzVmlzaWJsZXx8KHRoaXMuaGlkZSgpLHRoaXMuY2xvc2VJbWFnZU1vZGUoKSx0aGlzLmltYWdlTW9kZT0hMSl9fSx0aGlzKSw3NSkpKX0sdGhpcykpfSxiLnByb3RvdHlwZS5zZXRXaW5kb3dNb3VzZVVwRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLiR3aW5kb3cub24oIm1vdXNldXAuIit0aGlzLl9pZCxhLnByb3h5KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMToodGhpcy5pc1Jlc2l6aW5nKCl8fHRoaXMuaXNTY3JvbGxpbmd8fCh0aGlzLiRidHRuX3dyYXBwZXIuZmluZCgiYnV0dG9uW2RhdGEtY21kXSIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKSx0aGlzLnNlbGVjdGlvbkluRWRpdG9yKCkmJiIiIT09dGhpcy50ZXh0KCkmJiF0aGlzLmlzVG91Y2goKT90aGlzLnNob3cobnVsbCk6dGhpcy4kcG9wdXBfZWRpdG9yLmlzKCI6dmlzaWJsZSIpJiYodGhpcy5oaWRlKCksdGhpcy5jbG9zZUltYWdlTW9kZSgpLHRoaXMuaW1hZ2VNb2RlPSExKSx0aGlzLmJsdXIoITApKSx2b2lkIGEoIltkYXRhLWRvd25dIikucmVtb3ZlQXR0cigiZGF0YS1kb3duIikpfSx0aGlzKSl9LGIucHJvdG90eXBlLnNldFdpbmRvd0tleURvd25FdmVudD1mdW5jdGlvbigpe3RoaXMuJHdpbmRvdy5vbigia2V5ZG93bi4iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oYil7dmFyIGM9Yi53aGljaDtpZih0aGlzLmltYWdlTW9kZSl7aWYoMTM9PWMpcmV0dXJuIHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLWVkaXRvciIpLnBhcmVudHMoIi5mLWltZy13cmFwIikuYmVmb3JlKCI8YnIvPiIpLHRoaXMuc3luYygpLHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLWVkaXRvciBpbWciKS5jbGljaygpLCExO2lmKDQ2PT1jfHw4PT1jKXJldHVybiBiLnN0b3BQcm9wYWdhdGlvbigpLGIucHJldmVudERlZmF1bHQoKSxzZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUltYWdlKHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLWVkaXRvciIpKX0sdGhpcyksMCksITF9ZWxzZSBpZih0aGlzLnNlbGVjdGlvbkluRWRpdG9yKCkpe2lmKHRoaXMuaXNEaXNhYmxlZClyZXR1cm4hMDt2YXIgZD0oYi5jdHJsS2V5fHxiLm1ldGFLZXkpJiYhYi5hbHRLZXk7IWQmJnRoaXMuJHBvcHVwX2VkaXRvci5pcygiOnZpc2libGUiKSYmKDI3PT1jfHx0aGlzLiRidHRuX3dyYXBwZXIuaXMoIjp2aXNpYmxlIikmJnRoaXMub3B0aW9ucy5pbmxpbmVNb2RlKSYmKHRoaXMuaGlkZSgpLHRoaXMuY2xvc2VJbWFnZU1vZGUoKSl9fSx0aGlzKSl9LGIucHJvdG90eXBlLnNldFdpbmRvd0tleVVwRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLiR3aW5kb3cub24oImtleXVwLiIrdGhpcy5faWQsYS5wcm94eShmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRGlzYWJsZWQ/ITE6dm9pZCh0aGlzLnNlbGVjdGlvbkluRWRpdG9yKCkmJiIiIT09dGhpcy50ZXh0KCkmJiF0aGlzLiRwb3B1cF9lZGl0b3IuaXMoIjp2aXNpYmxlIikmJnRoaXMucmVwb3NpdGlvbkVkaXRvcigpKX0sdGhpcykpfSxiLnByb3RvdHlwZS5zZXRXaW5kb3dTY3JvbGxFdmVudD1mdW5jdGlvbigpe3RoaXMuJHdpbmRvdy5vbigic2Nyb2xsLiIrdGhpcy5faWQsYS5wcm94eShmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRGlzYWJsZWQ/ITE6KGNsZWFyVGltZW91dCh0aGlzLnNjcm9sbFRpbWVyKSx0aGlzLmlzU2Nyb2xsaW5nPSEwLHZvaWQodGhpcy5zY3JvbGxUaW1lcj1zZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmlzU2Nyb2xsaW5nPSExfSx0aGlzKSwyNTAwKSkpfSx0aGlzKSl9LGIucHJvdG90eXBlLnNldFRleHROZWFySW1hZ2U9ZnVuY3Rpb24oYSl7dm9pZCAwIT09YSYmKHRoaXMub3B0aW9ucy50ZXh0TmVhckltYWdlPWEpLHRoaXMub3B0aW9ucy50ZXh0TmVhckltYWdlPT09ITA/dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiZi10bmkiKTp0aGlzLiRlbGVtZW50LmFkZENsYXNzKCJmLXRuaSIpfSxiLnByb3RvdHlwZS5zZXRQbGFjZWhvbGRlcj1mdW5jdGlvbihhKXthJiYodGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyPWEpLHRoaXMuJHRleHRhcmVhJiZ0aGlzLiR0ZXh0YXJlYS5hdHRyKCJwbGFjZWhvbGRlciIsdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyKSx0aGlzLiRlbGVtZW50LmF0dHIoImRhdGEtcGxhY2Vob2xkZXIiLHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcil9LGIucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50LnRleHQoKS5yZXBsYWNlKC8oXHJcbnxcbnxccnxcdHxcdTAwMjApL2dtLCIiKTtyZXR1cm4iIj09PWEmJjA9PT10aGlzLiRlbGVtZW50LmZpbmQoImltZywgdGFibGUsIGlmcmFtZSwgaW5wdXQiKS5sZW5ndGgmJjA9PT10aGlzLiRlbGVtZW50LmZpbmQoInAgPiBiciwgZGl2ID4gYnIiKS5sZW5ndGgmJjA9PT10aGlzLiRlbGVtZW50LmZpbmQoImxpLCBoMSwgaDIsIGgzLCBoNCwgaDUsIGg2LCBibG9ja3F1b3RlLCBwcmUiKS5sZW5ndGh9LGIucHJvdG90eXBlLmNoZWNrUGxhY2Vob2xkZXI9ZnVuY3Rpb24oKXtpZih0aGlzLmlzRGlzYWJsZWQpcmV0dXJuITE7aWYodGhpcy5wYXN0aW5nKXJldHVybiExO2lmKHRoaXMuYnJvd3Nlci5tc2llfHx0aGlzLiRlbGVtZW50LmZpbmQoYS5FZGl0YWJsZS5WQUxJRF9OT0RFUy5qb2luKCI6ZW1wdHksICIpKS5yZW1vdmUoKSwhdGhpcy5pc0hUTUwpaWYodGhpcy5pc0VtcHR5KCkmJiF0aGlzLmZha2VFbXB0eSgpKXt2YXIgYyxkPXRoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKXx8dGhpcy4kZWxlbWVudC5pcygiOmZvY3VzIik7dGhpcy5vcHRpb25zLnBhcmFncmFwaHk/KGM9YSgiPHA+PGJyLz48L3A+IiksdGhpcy4kZWxlbWVudC5odG1sKGMpLGQmJnRoaXMuc2V0U2VsZWN0aW9uKGMuZ2V0KDApKSx0aGlzLiRlbGVtZW50LmFkZENsYXNzKCJmLXBsYWNlaG9sZGVyIikpOigwPT09dGhpcy4kZWxlbWVudC5maW5kKCJiciIpLmxlbmd0aCYmdGhpcy4kZWxlbWVudC5hcHBlbmQoIjxici8+IiksdGhpcy4kZWxlbWVudC5hZGRDbGFzcygiZi1wbGFjZWhvbGRlciIpKX1lbHNlIXRoaXMuJGVsZW1lbnQuZmluZCgicCIpLmxlbmd0aCYmdGhpcy5vcHRpb25zLnBhcmFncmFwaHk/KHRoaXMud3JhcFRleHQoITApLHRoaXMuJGVsZW1lbnQuZmluZCgicCIpLmxlbmd0aCYmIiI9PT10aGlzLnRleHQoKT90aGlzLnNldFNlbGVjdGlvbih0aGlzLiRlbGVtZW50LmZpbmQoInAiKVswXSx0aGlzLiRlbGVtZW50LmZpbmQoInAiKS50ZXh0KCkubGVuZ3RoLG51bGwsdGhpcy4kZWxlbWVudC5maW5kKCJwIikudGV4dCgpLmxlbmd0aCk6dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiZi1wbGFjZWhvbGRlciIpKTp0aGlzLmZha2VFbXB0eSgpPT09ITF8fHRoaXMuJGVsZW1lbnQuZmluZChiLlZBTElEX05PREVTLmpvaW4oIiwiKSkubGVuZ3RoPjE/dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiZi1wbGFjZWhvbGRlciIpOnRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoImYtcGxhY2Vob2xkZXIiKTtyZXR1cm4hMH0sYi5wcm90b3R5cGUuZmFrZUVtcHR5PWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPXRoaXMuJGVsZW1lbnQpO3ZhciBiPWEudGV4dCgpLnJlcGxhY2UoLyhcclxufFxufFxyfFx0KS9nbSwiIik7cmV0dXJuIiI9PT1iJiYxPT1hLmZpbmQoInAsIGRpdiIpLmxlbmd0aCYmMT09YS5maW5kKCJwID4gYnIsIGRpdiA+IGJyIikubGVuZ3RoJiYwPT09YS5maW5kKCJpbWcsIHRhYmxlLCBpZnJhbWUsIGlucHV0IikubGVuZ3RofSxiLnByb3RvdHlwZS5zZXRQbGFjZWhvbGRlckV2ZW50cz1mdW5jdGlvbigpe3RoaXMuYnJvd3Nlci5tc2llJiZiLmdldElFdmVyc2lvbigpPDl8fCh0aGlzLiRlbGVtZW50Lm9uKCJmb2N1cyIsYS5wcm94eShmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRGlzYWJsZWQ/ITE6dm9pZCgiIiE9PXRoaXMuJGVsZW1lbnQudGV4dCgpfHx0aGlzLnBhc3Rpbmd8fHRoaXMuZm9jdXMoITEpKX0sdGhpcykpLHRoaXMuJGVsZW1lbnQub24oImtleXVwIGtleWRvd24gZm9jdXMgcGxhY2Vob2xkZXJDaGVjayIsYS5wcm94eShmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrUGxhY2Vob2xkZXIoKX0sdGhpcykpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcigicGxhY2Vob2xkZXJDaGVjayIpKX0sYi5wcm90b3R5cGUuc2V0RGltZW5zaW9ucz1mdW5jdGlvbihhLGIsYyxkKXthJiYodGhpcy5vcHRpb25zLmhlaWdodD1hKSxiJiYodGhpcy5vcHRpb25zLndpZHRoPWIpLGMmJih0aGlzLm9wdGlvbnMubWluSGVpZ2h0PWMpLGQmJih0aGlzLm9wdGlvbnMubWF4SGVpZ2h0PWQpLCJhdXRvIiE9dGhpcy5vcHRpb25zLmhlaWdodCYmdGhpcy4kZWxlbWVudC5jc3MoImhlaWdodCIsdGhpcy5vcHRpb25zLmhlaWdodCksImF1dG8iIT10aGlzLm9wdGlvbnMubWluSGVpZ2h0JiZ0aGlzLiRlbGVtZW50LmNzcygibWluSGVpZ2h0Iix0aGlzLm9wdGlvbnMubWluSGVpZ2h0KSwiYXV0byIhPXRoaXMub3B0aW9ucy5tYXhIZWlnaHQmJnRoaXMuJGVsZW1lbnQuY3NzKCJtYXhIZWlnaHQiLHRoaXMub3B0aW9ucy5tYXhIZWlnaHQpLCJhdXRvIiE9dGhpcy5vcHRpb25zLndpZHRoJiZ0aGlzLiRib3guY3NzKCJ3aWR0aCIsdGhpcy5vcHRpb25zLndpZHRoKX0sYi5wcm90b3R5cGUuc2V0RGlyZWN0aW9uPWZ1bmN0aW9uKGEpe2EmJih0aGlzLm9wdGlvbnMuZGlyZWN0aW9uPWEpLCJsdHIiIT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uJiYicnRsIiE9dGhpcy5vcHRpb25zLmRpcmVjdGlvbiYmKHRoaXMub3B0aW9ucy5kaXJlY3Rpb249Imx0ciIpLCJydGwiPT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uPyh0aGlzLiRlbGVtZW50LmFkZENsYXNzKCJmLXJ0bCIpLHRoaXMuJGVkaXRvci5hZGRDbGFzcygiZi1ydGwiKSx0aGlzLiRwb3B1cF9lZGl0b3IuYWRkQ2xhc3MoImYtcnRsIiksdGhpcy4kaW1hZ2VfbW9kYWwmJnRoaXMuJGltYWdlX21vZGFsLmFkZENsYXNzKCJmLXJ0bCIpKToodGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiZi1ydGwiKSx0aGlzLiRlZGl0b3IucmVtb3ZlQ2xhc3MoImYtcnRsIiksdGhpcy4kcG9wdXBfZWRpdG9yLnJlbW92ZUNsYXNzKCJmLXJ0bCIpLHRoaXMuJGltYWdlX21vZGFsJiZ0aGlzLiRpbWFnZV9tb2RhbC5yZW1vdmVDbGFzcygiZi1ydGwiKSl9LGIucHJvdG90eXBlLnNldFpJbmRleD1mdW5jdGlvbihhKXthJiYodGhpcy5vcHRpb25zLnpJbmRleD1hKSx0aGlzLiRlZGl0b3IuY3NzKCJ6LWluZGV4Iix0aGlzLm9wdGlvbnMuekluZGV4KSx0aGlzLiRwb3B1cF9lZGl0b3IuY3NzKCJ6LWluZGV4Iix0aGlzLm9wdGlvbnMuekluZGV4KzEpLHRoaXMuJG92ZXJsYXkmJnRoaXMuJG92ZXJsYXkuY3NzKCJ6LWluZGV4Iix0aGlzLm9wdGlvbnMuekluZGV4KzIpLHRoaXMuJGltYWdlX21vZGFsJiZ0aGlzLiRpbWFnZV9tb2RhbC5jc3MoInotaW5kZXgiLHRoaXMub3B0aW9ucy56SW5kZXgrMyl9LGIucHJvdG90eXBlLnNldFRoZW1lPWZ1bmN0aW9uKGEpe2EmJih0aGlzLm9wdGlvbnMudGhlbWU9YSksbnVsbCE9dGhpcy5vcHRpb25zLnRoZW1lJiYodGhpcy4kZWRpdG9yLmFkZENsYXNzKHRoaXMub3B0aW9ucy50aGVtZSsiLXRoZW1lIiksdGhpcy4kcG9wdXBfZWRpdG9yLmFkZENsYXNzKHRoaXMub3B0aW9ucy50aGVtZSsiLXRoZW1lIiksdGhpcy4kYm94JiZ0aGlzLiRib3guYWRkQ2xhc3ModGhpcy5vcHRpb25zLnRoZW1lKyItdGhlbWUiKSx0aGlzLiRpbWFnZV9tb2RhbCYmdGhpcy4kaW1hZ2VfbW9kYWwuYWRkQ2xhc3ModGhpcy5vcHRpb25zLnRoZW1lKyItdGhlbWUiKSl9LGIucHJvdG90eXBlLnNldFNwZWxsY2hlY2s9ZnVuY3Rpb24oYSl7dm9pZCAwIT09YSYmKHRoaXMub3B0aW9ucy5zcGVsbGNoZWNrPWEpLHRoaXMuJGVsZW1lbnQuYXR0cigic3BlbGxjaGVjayIsdGhpcy5vcHRpb25zLnNwZWxsY2hlY2spfSxiLnByb3RvdHlwZS5jdXN0b21pemVUZXh0PWZ1bmN0aW9uKGIpe2lmKGIpe3ZhciBjPXRoaXMuJGVkaXRvci5maW5kKCJbdGl0bGVdIikuYWRkKHRoaXMuJHBvcHVwX2VkaXRvci5maW5kKCJbdGl0bGVdIikpO3RoaXMuJGltYWdlX21vZGFsJiYoYz1jLmFkZCh0aGlzLiRpbWFnZV9tb2RhbC5maW5kKCJbdGl0bGVdIikpKSxjLmVhY2goYS5wcm94eShmdW5jdGlvbihjLGQpe2Zvcih2YXIgZSBpbiBiKWEoZCkuYXR0cigidGl0bGUiKS50b0xvd2VyQ2FzZSgpPT1lLnRvTG93ZXJDYXNlKCkmJmEoZCkuYXR0cigidGl0bGUiLGJbZV0pfSx0aGlzKSksYz10aGlzLiRlZGl0b3IuZmluZCgnW2RhdGEtdGV4dD0idHJ1ZSJdJykuYWRkKHRoaXMuJHBvcHVwX2VkaXRvci5maW5kKCdbZGF0YS10ZXh0PSJ0cnVlIl0nKSksdGhpcy4kaW1hZ2VfbW9kYWwmJihjPWMuYWRkKHRoaXMuJGltYWdlX21vZGFsLmZpbmQoJ1tkYXRhLXRleHQ9InRydWUiXScpKSksYy5lYWNoKGEucHJveHkoZnVuY3Rpb24oYyxkKXtmb3IodmFyIGUgaW4gYilhKGQpLnRleHQoKS50b0xvd2VyQ2FzZSgpPT1lLnRvTG93ZXJDYXNlKCkmJmEoZCkudGV4dChiW2VdKX0sdGhpcykpfX0sYi5wcm90b3R5cGUuc2V0TGFuZ3VhZ2U9ZnVuY3Rpb24oYil7dm9pZCAwIT09YiYmKHRoaXMub3B0aW9ucy5sYW5ndWFnZT1iKSxhLkVkaXRhYmxlLkxBTkdTW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0mJih0aGlzLmN1c3RvbWl6ZVRleHQoYS5FZGl0YWJsZS5MQU5HU1t0aGlzLm9wdGlvbnMubGFuZ3VhZ2VdLnRyYW5zbGF0aW9uKSxhLkVkaXRhYmxlLkxBTkdTW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0uZGlyZWN0aW9uJiZ0aGlzLnNldERpcmVjdGlvbihhLkVkaXRhYmxlLkxBTkdTW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0uZGlyZWN0aW9uKSxhLkVkaXRhYmxlLkxBTkdTW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0udHJhbnNsYXRpb25bdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyXSYmdGhpcy5zZXRQbGFjZWhvbGRlcihhLkVkaXRhYmxlLkxBTkdTW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0udHJhbnNsYXRpb25bdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyXSkpfSxiLnByb3RvdHlwZS5zZXRDdXN0b21UZXh0PWZ1bmN0aW9uKGEpe2EmJih0aGlzLm9wdGlvbnMuY3VzdG9tVGV4dD1hKSx0aGlzLm9wdGlvbnMuY3VzdG9tVGV4dCYmdGhpcy5jdXN0b21pemVUZXh0KHRoaXMub3B0aW9ucy5jdXN0b21UZXh0KX0sYi5wcm90b3R5cGUuZXhlY0hUTUw9ZnVuY3Rpb24oKXt0aGlzLmh0bWwoKX0sYi5wcm90b3R5cGUuaW5pdEhUTUxBcmVhPWZ1bmN0aW9uKCl7dGhpcy4kaHRtbF9hcmVhPWEoJzx0ZXh0YXJlYSB3cmFwPSJoYXJkIj4nKS5rZXlkb3duKGZ1bmN0aW9uKGIpe3ZhciBjPWIua2V5Q29kZXx8Yi53aGljaDtpZig5PT1jKXtiLnByZXZlbnREZWZhdWx0KCk7dmFyIGQ9YSh0aGlzKS5nZXQoMCkuc2VsZWN0aW9uU3RhcnQsZT1hKHRoaXMpLmdldCgwKS5zZWxlY3Rpb25FbmQ7YSh0aGlzKS52YWwoYSh0aGlzKS52YWwoKS5zdWJzdHJpbmcoMCxkKSsiCSIrYSh0aGlzKS52YWwoKS5zdWJzdHJpbmcoZSkpLGEodGhpcykuZ2V0KDApLnNlbGVjdGlvblN0YXJ0PWEodGhpcykuZ2V0KDApLnNlbGVjdGlvbkVuZD1kKzF9fSkuZm9jdXMoYS5wcm94eShmdW5jdGlvbigpe3RoaXMuYmx1cnJlZCYmKHRoaXMuYmx1cnJlZD0hMSx0aGlzLnRyaWdnZXJFdmVudCgiZm9jdXMiLFtdLCExKSl9LHRoaXMpKS5tb3VzZXVwKGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmJsdXJyZWQmJih0aGlzLmJsdXJyZWQ9ITEsdGhpcy50cmlnZ2VyRXZlbnQoImZvY3VzIixbXSwhMSkpfSx0aGlzKSl9LGIucHJvdG90eXBlLmNvbW1hbmRfZGlzcGF0Y2hlcj17YWxpZ246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5idWlsZERyb3Bkb3duQWxpZ24oYSksYz10aGlzLmJ1aWxkRHJvcGRvd25CdXR0b24oYSxiKTtyZXR1cm4gY30sZm9ybWF0QmxvY2s6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5idWlsZERyb3Bkb3duRm9ybWF0QmxvY2soYSksYz10aGlzLmJ1aWxkRHJvcGRvd25CdXR0b24oYSxiKTtyZXR1cm4gY30saHRtbDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLmJ1aWxkRGVmYXVsdEJ1dHRvbihiKTtyZXR1cm4gdGhpcy5vcHRpb25zLmlubGluZU1vZGUmJnRoaXMuJGJveC5hcHBlbmQoYShjKS5jbG9uZSghMCkuYWRkQ2xhc3MoImh0bWwtc3dpdGNoIikuYXR0cigidGl0bGUiLCJIaWRlIEhUTUwiKS5jbGljayhhLnByb3h5KHRoaXMuZXhlY0hUTUwsdGhpcykpKSx0aGlzLmluaXRIVE1MQXJlYSgpLGN9fSxiLnByb3RvdHlwZS5zZXRCdXR0b25zPWZ1bmN0aW9uKGEpe2EmJih0aGlzLm9wdGlvbnMuYnV0dG9ucz1hKSx0aGlzLiRlZGl0b3IuYXBwZW5kKCc8ZGl2IGNsYXNzPSJidHRuLXdyYXBwZXIiIGlkPSJidHRuLXdyYXBwZXItJyt0aGlzLl9pZCsnIj4nKSx0aGlzLiRidHRuX3dyYXBwZXI9dGhpcy4kZWRpdG9yLmZpbmQoIiNidHRuLXdyYXBwZXItIit0aGlzLl9pZCksdGhpcy5pc1RvdWNoKCkmJnRoaXMuJGJ0dG5fd3JhcHBlci5hZGRDbGFzcygidG91Y2giKTtmb3IodmFyIGMsZCxlPSIiLGY9MDtmPHRoaXMub3B0aW9ucy5idXR0b25zLmxlbmd0aDtmKyspe3ZhciBnPXRoaXMub3B0aW9ucy5idXR0b25zW2ZdO2lmKCJzZXAiIT1nKXt2YXIgaD1iLmNvbW1hbmRzW2ddO2lmKHZvaWQgMCE9PWgpe2guY21kPWc7dmFyIGk9dGhpcy5jb21tYW5kX2Rpc3BhdGNoZXJbaC5jbWRdO2k/ZSs9aS5hcHBseSh0aGlzLFtoXSk6aC5zZWVkPyhjPXRoaXMuYnVpbGREZWZhdWx0RHJvcGRvd24oaCksZD10aGlzLmJ1aWxkRHJvcGRvd25CdXR0b24oaCxjKSxlKz1kKTooZD10aGlzLmJ1aWxkRGVmYXVsdEJ1dHRvbihoKSxlKz1kLHRoaXMuYmluZFJlZnJlc2hMaXN0ZW5lcihoKSl9ZWxzZXtpZihoPXRoaXMub3B0aW9ucy5jdXN0b21CdXR0b25zW2ddLHZvaWQgMD09PWgpe2lmKGg9dGhpcy5vcHRpb25zLmN1c3RvbURyb3Bkb3duc1tnXSx2b2lkIDA9PT1oKWNvbnRpbnVlO2Q9dGhpcy5idWlsZEN1c3RvbURyb3Bkb3duKGgsZyksZSs9ZCx0aGlzLmJpbmRSZWZyZXNoTGlzdGVuZXIoaCk7Y29udGludWV9ZD10aGlzLmJ1aWxkQ3VzdG9tQnV0dG9uKGgsZyksZSs9ZCx0aGlzLmJpbmRSZWZyZXNoTGlzdGVuZXIoaCl9fWVsc2UgZSs9dGhpcy5vcHRpb25zLmlubGluZU1vZGU/JzxkaXYgY2xhc3M9ImYtY2xlYXIiPjwvZGl2Pjxoci8+JzonPHNwYW4gY2xhc3M9ImYtc2VwIj48L3NwYW4+J310aGlzLiRidHRuX3dyYXBwZXIuaHRtbChlKSx0aGlzLiRidHRuX3dyYXBwZXIuZmluZCgnYnV0dG9uW2RhdGEtY21kPSJ1bmRvIl0sIGJ1dHRvbltkYXRhLWNtZD0icmVkbyJdJykucHJvcCgiZGlzYWJsZWQiLCEwKSx0aGlzLmJpbmRCdXR0b25FdmVudHMoKX0sYi5wcm90b3R5cGUuYmluZFJlZnJlc2hMaXN0ZW5lcj1mdW5jdGlvbihiKXtiLnJlZnJlc2gmJnRoaXMuYWRkTGlzdGVuZXIoInJlZnJlc2giLGEucHJveHkoZnVuY3Rpb24oKXtiLnJlZnJlc2guYXBwbHkodGhpcyxbYi5jbWRdKX0sdGhpcykpfSxiLnByb3RvdHlwZS5idWlsZERlZmF1bHRCdXR0b249ZnVuY3Rpb24oYSl7dmFyIGI9JzxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iZnItYnR0biIgdGl0bGU9IicrYS50aXRsZSsnIiBkYXRhLWNtZD0iJythLmNtZCsnIj4nO3JldHVybiBiKz12b2lkIDA9PT10aGlzLm9wdGlvbnMuaWNvbnNbYS5jbWRdP3RoaXMuYWRkQnV0dG9uSWNvbihhKTp0aGlzLnByZXBhcmVJY29uKHRoaXMub3B0aW9ucy5pY29uc1thLmNtZF0sYS50aXRsZSksYis9IjwvYnV0dG9uPiJ9LGIucHJvdG90eXBlLnByZXBhcmVJY29uPWZ1bmN0aW9uKGEsYil7c3dpdGNoKGEudHlwZSl7Y2FzZSJmb250IjpyZXR1cm4gdGhpcy5hZGRCdXR0b25JY29uKHtpY29uOmEudmFsdWV9KTtjYXNlImltZyI6cmV0dXJuIHRoaXMuYWRkQnV0dG9uSWNvbih7aWNvbl9pbWc6YS52YWx1ZSx0aXRsZTpifSk7Y2FzZSJ0eHQiOnJldHVybiB0aGlzLmFkZEJ1dHRvbkljb24oe2ljb25fdHh0OmEudmFsdWV9KX19LGIucHJvdG90eXBlLmFkZEJ1dHRvbkljb249ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaWNvbj8nPGkgY2xhc3M9IicrYS5pY29uKyciPjwvaT4nOmEuaWNvbl9hbHQ/JzxpIGNsYXNzPSJmb3ItdGV4dCI+JythLmljb25fYWx0KyI8L2k+IjphLmljb25faW1nPyc8aW1nIHNyYz0iJythLmljb25faW1nKyciIGFsdD0iJythLnRpdGxlKyciLz4nOmEuaWNvbl90eHQ/IjxpPiIrYS5pY29uX3R4dCsiPC9pPiI6YS50aXRsZX0sYi5wcm90b3R5cGUuYnVpbGRDdXN0b21CdXR0b249ZnVuY3Rpb24oYixjKXt2YXIgZD0nPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJmci1idHRuIiBkYXRhLW5hbWU9IicrYysnIiB0aXRsZT0iJytiLnRpdGxlKyciPicrdGhpcy5wcmVwYXJlSWNvbihiLmljb24sYi50aXRsZSkrIjwvYnV0dG9uPiI7cmV0dXJuIHRoaXMuJGJ0dG5fd3JhcHBlci5vbigiY2xpY2sgdG91Y2hlbmQiLCdidXR0b25bZGF0YS1uYW1lPSInK2MrJyJdJyxhLnByb3h5KGZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCksYS5wcmV2ZW50RGVmYXVsdCgpLGIuY2FsbGJhY2suYXBwbHkodGhpcyl9LHRoaXMpKSxkfSxiLnByb3RvdHlwZS5jYWxsRHJvcGRvd249ZnVuY3Rpb24oYixjKXt0aGlzLiRidHRuX3dyYXBwZXIub24oImNsaWNrIHRvdWNoIiwnW2RhdGEtbmFtZT0iJytiKyciXScsYS5wcm94eShmdW5jdGlvbigpe2MuYXBwbHkodGhpcyl9LHRoaXMpKX0sYi5wcm90b3R5cGUuYnVpbGRDdXN0b21Ecm9wZG93bj1mdW5jdGlvbihhLGIpe3ZhciBjPSc8ZGl2IGNsYXNzPSJmci1idHRuIGZyLWRyb3Bkb3duIj4nO2MrPSc8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImZyLXRyaWdnZXIiIHRpdGxlPSInK2EudGl0bGUrJyIgZGF0YS1uYW1lPSInK2IrJyI+Jyt0aGlzLnByZXBhcmVJY29uKGEuaWNvbixhLnRpdGxlKSsiPC9idXR0b24+IixjKz0nPHVsIGNsYXNzPSJmci1kcm9wZG93bi1tZW51Ij4nO3ZhciBkPTA7Zm9yKHZhciBlIGluIGEub3B0aW9ucyl7dmFyIGY9JzxsaSBkYXRhLW5hbWU9IicrYitkKyciPjxhIGhyZWY9IiMiPicrZSsiPC9hPjwvbGk+Ijt0aGlzLmNhbGxEcm9wZG93bihiK2QsYS5vcHRpb25zW2VdKSxjKz1mLGQrK31yZXR1cm4gYys9IjwvdWw+PC9kaXY+In0sYi5wcm90b3R5cGUuYnVpbGREcm9wZG93bkJ1dHRvbj1mdW5jdGlvbihhLGIsYyl7Yz1jfHwiIjt2YXIgZD0nPGRpdiBjbGFzcz0iZnItYnR0biBmci1kcm9wZG93biAnK2MrJyI+JyxlPSc8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgZGF0YS1uYW1lPSInK2EuY21kKyciIGNsYXNzPSJmci10cmlnZ2VyIiB0aXRsZT0iJythLnRpdGxlKyciPicrdGhpcy5hZGRCdXR0b25JY29uKGEpKyI8L2J1dHRvbj4iO3JldHVybiBkKz1lLGQrPWIsZCs9IjwvZGl2PiJ9LGIucHJvdG90eXBlLmJ1aWxkRHJvcGRvd25BbGlnbj1mdW5jdGlvbihhKXt0aGlzLmJpbmRSZWZyZXNoTGlzdGVuZXIoYSk7Zm9yKHZhciBiPSc8dWwgY2xhc3M9ImZyLWRyb3Bkb3duLW1lbnUgZi1hbGlnbiI+JyxjPTA7YzxhLnNlZWQubGVuZ3RoO2MrKyl7dmFyIGQ9YS5zZWVkW2NdO2IrPSc8bGkgZGF0YS1jbWQ9ImFsaWduIiBkYXRhLXZhbD0iJytkLmNtZCsnIiB0aXRsZT0iJytkLnRpdGxlKyciPjxhIGhyZWY9IiMiPjxpIGNsYXNzPSInK2QuaWNvbisnIj48L2k+PC9hPjwvbGk+J31yZXR1cm4gYis9IjwvdWw+In0sYi5wcm90b3R5cGUuYnVpbGREcm9wZG93bkZvcm1hdEJsb2NrPWZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0nPHVsIGNsYXNzPSJmci1kcm9wZG93bi1tZW51Ij4nLGQ9MDtkPGIuc2VlZC5sZW5ndGg7ZCsrKXt2YXIgZT1iLnNlZWRbZF07aWYoLTEhPWEuaW5BcnJheShlLnZhbHVlLHRoaXMub3B0aW9ucy5ibG9ja1RhZ3MpKXt2YXIgZj0nPGxpIGRhdGEtY21kPSInK2IuY21kKyciIGRhdGEtdmFsPSInK2UudmFsdWUrJyI+JztmKz0nPGEgaHJlZj0iIyIgZGF0YS10ZXh0PSJ0cnVlIiBjbGFzcz0iZm9ybWF0LScrZS52YWx1ZSsnIiB0aXRsZT0iJytlLnRpdGxlKyciPicrZS50aXRsZSsiPC9hPjwvbGk+IixjKz1mfX1yZXR1cm4gYys9IjwvdWw+In0sYi5wcm90b3R5cGUuYnVpbGREZWZhdWx0RHJvcGRvd249ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSc8dWwgY2xhc3M9ImZyLWRyb3Bkb3duLW1lbnUiPicsYz0wO2M8YS5zZWVkLmxlbmd0aDtjKyspe3ZhciBkPWEuc2VlZFtjXSxlPSc8bGkgZGF0YS1jbWQ9IicrKGQuY21kfHxhLmNtZCkrJyIgZGF0YS12YWw9IicrZC52YWx1ZSsnIiBkYXRhLXBhcmFtPSInKyhkLnBhcmFtfHxhLnBhcmFtKSsnIj4nO2UrPSc8YSBocmVmPSIjIiBkYXRhLXRleHQ9InRydWUiIGNsYXNzPSInK2QudmFsdWUrJyIgdGl0bGU9IicrZC50aXRsZSsnIj4nK2QudGl0bGUrIjwvYT48L2xpPiIsYis9ZX1yZXR1cm4gYis9IjwvdWw+In0sYi5wcm90b3R5cGUuY3JlYXRlRWRpdFBvcHVwSFRNTD1mdW5jdGlvbigpe3ZhciBhPSc8ZGl2IGNsYXNzPSJmcm9hbGEtcG9wdXAgZnJvYWxhLXRleHQtcG9wdXAiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4nO3JldHVybiBhKz0nPGg0PjxzcGFuIGRhdGEtdGV4dD0idHJ1ZSI+RWRpdCB0ZXh0PC9zcGFuPjxpIHRpdGxlPSJDYW5jZWwiIGNsYXNzPSJmYSBmYS10aW1lcyIgaWQ9ImYtdGV4dC1jbG9zZS0nK3RoaXMuX2lkKyciPjwvaT48L2g0PjwvaDQ+JyxhKz0nPGRpdiBjbGFzcz0iZi1wb3B1cC1saW5lIj48aW5wdXQgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9Imh0dHA6Ly93d3cuZXhhbXBsZS5jb20iIGNsYXNzPSJmLWx1IiBpZD0iZi10aS0nK3RoaXMuX2lkKyciPicsYSs9JzxidXR0b24gZGF0YS10ZXh0PSJ0cnVlIiB0eXBlPSJidXR0b24iIGNsYXNzPSJmLW9rIiBpZD0iZi1lZGl0LXBvcHVwLW9rLScrdGhpcy5faWQrJyI+T0s8L2J1dHRvbj4nLGErPSI8L2Rpdj4iLGErPSI8L2Rpdj4ifSxiLnByb3RvdHlwZS5idWlsZEVkaXRQb3B1cD1mdW5jdGlvbigpe3RoaXMuJGVkaXRfcG9wdXBfd3JhcHBlcj1hKHRoaXMuY3JlYXRlRWRpdFBvcHVwSFRNTCgpKSx0aGlzLiRwb3B1cF9lZGl0b3IuYXBwZW5kKHRoaXMuJGVkaXRfcG9wdXBfd3JhcHBlciksdGhpcy4kZWRpdF9wb3B1cF93cmFwcGVyLmZpbmQoIiNmLXRpLSIrdGhpcy5faWQpLm9uKCJtb3VzZXVwIGtleWRvd24iLGZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCl9KSx0aGlzLmFkZExpc3RlbmVyKCJoaWRlUG9wdXBzIixhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy4kZWRpdF9wb3B1cF93cmFwcGVyLmhpZGUoKX0sdGhpcykpLHRoaXMuJGVkaXRfcG9wdXBfd3JhcHBlci5vbigiY2xpY2siLCIjZi1lZGl0LXBvcHVwLW9rLSIrdGhpcy5faWQsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQudGV4dCh0aGlzLiRlZGl0X3BvcHVwX3dyYXBwZXIuZmluZCgiI2YtdGktIit0aGlzLl9pZCkudmFsKCkpLHRoaXMuc3luYygpLHRoaXMuaGlkZSgpfSx0aGlzKSksdGhpcy4kZWRpdF9wb3B1cF93cmFwcGVyLm9uKCJjbGljayIsImkjZi10ZXh0LWNsb3NlLSIrdGhpcy5faWQsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuaGlkZSgpfSx0aGlzKSl9LGIucHJvdG90eXBlLmNyZWF0ZUNPUlNSZXF1ZXN0PWZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IFhNTEh0dHBSZXF1ZXN0O2lmKCJ3aXRoQ3JlZGVudGlhbHMiaW4gYyl7Yy5vcGVuKGEsYiwhMCksdGhpcy5vcHRpb25zLndpdGhDcmVkZW50aWFscyYmKGMud2l0aENyZWRlbnRpYWxzPSEwKTtmb3IodmFyIGQgaW4gdGhpcy5vcHRpb25zLmhlYWRlcnMpYy5zZXRSZXF1ZXN0SGVhZGVyKGQsdGhpcy5vcHRpb25zLmhlYWRlcnNbZF0pfWVsc2UidW5kZWZpbmVkIiE9dHlwZW9mIFhEb21haW5SZXF1ZXN0PyhjPW5ldyBYRG9tYWluUmVxdWVzdCxjLm9wZW4oYSxiKSk6Yz1udWxsO3JldHVybiBjfSxiLnByb3RvdHlwZS5pc0VuYWJsZWQ9ZnVuY3Rpb24oYil7cmV0dXJuIGEuaW5BcnJheShiLHRoaXMub3B0aW9ucy5idXR0b25zKT49MH0sYi5wcm90b3R5cGUuYmluZEJ1dHRvbkV2ZW50cz1mdW5jdGlvbigpe3RoaXMuaXNUb3VjaCgpPyh0aGlzLm1vdXNlZG93bj0idG91Y2hzdGFydCIsdGhpcy5tb3VzZXVwPSJ0b3VjaGVuZCIsdGhpcy5tb3ZlPSJ0b3VjaG1vdmUiKToodGhpcy5tb3VzZWRvd249ImNsaWNrIG1vdXNlZG93biIsdGhpcy5tb3VzZXVwPSJtb3VzZXVwIix0aGlzLm1vdmU9IiIpLHRoaXMuYmluZERyb3Bkb3duRXZlbnRzKCksdGhpcy5iaW5kQ29tbWFuZEV2ZW50cygpfSxiLnByb3RvdHlwZS5iaW5kRHJvcGRvd25FdmVudHM9ZnVuY3Rpb24oKXt2YXIgYz10aGlzO3RoaXMuJGJ0dG5fd3JhcHBlci5vbih0aGlzLm1vdXNlZG93biwiLmZyLWRyb3Bkb3duIC5mci10cmlnZ2VyOm5vdChbZGlzYWJsZWRdKSIsZnVuY3Rpb24oYil7Yi5wcmV2ZW50RGVmYXVsdCgpLGEodGhpcykuYXR0cigiZGF0YS1kb3duIiwhMCl9KSx0aGlzLiRidHRuX3dyYXBwZXIub24odGhpcy5tb3VzZXVwLCIuZnItZHJvcGRvd24gLmZyLXRyaWdnZXI6bm90KFtkaXNhYmxlZF0pIixmdW5jdGlvbihkKXtpZihjLmlzRGlzYWJsZWQpcmV0dXJuITE7aWYoZC5zdG9wUHJvcGFnYXRpb24oKSxkLnByZXZlbnREZWZhdWx0KCksIWEodGhpcykuYXR0cigiZGF0YS1kb3duIikpcmV0dXJuIGEoIltkYXRhLWRvd25dIikucmVtb3ZlQXR0cigiZGF0YS1kb3duIiksITE7YSgiW2RhdGEtZG93bl0iKS5yZW1vdmVBdHRyKCJkYXRhLWRvd24iKSwidG91Y2hlbmQiPT09ZC50eXBlJiZjLmFuZHJvaWQoKSYmKGMuc2F2ZVNlbGVjdGlvbkJ5TWFya2VycygpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKX0sMTApKSxjLm9wdGlvbnMuaW5saW5lTW9kZT09PSExJiZjLmhpZGUoKSxhKHRoaXMpLnRvZ2dsZUNsYXNzKCJhY3RpdmUiKS50cmlnZ2VyKCJibHVyIiksYy5jbG9zZUltYWdlTW9kZSgpLGMuaW1hZ2VNb2RlPSExO3ZhciBlLGY9YSh0aGlzKS5hdHRyKCJkYXRhLW5hbWUiKTtiLmNvbW1hbmRzW2ZdP2U9Yi5jb21tYW5kc1tmXS5yZWZyZXNoT25TaG93OmMub3B0aW9ucy5jdXN0b21Ecm9wZG93bnNbZl0mJihlPWMub3B0aW9ucy5jdXN0b21Ecm9wZG93bnNbZl0ucmVmcmVzaE9uU2hvdyksZSYmZS5jYWxsKGMpLGMuJGJ0dG5fd3JhcHBlci5maW5kKCIuZnItZHJvcGRvd24iKS5ub3QoYSh0aGlzKS5wYXJlbnQoKSkuZmluZCgiLmZyLXRyaWdnZXIiKS5yZW1vdmVDbGFzcygiYWN0aXZlIil9KSxhKHdpbmRvdykub24oIm1vdXNldXAgc2VsZWN0aW9uY2hhbmdlIixhLnByb3h5KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMTp2b2lkIHRoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCIuZnItZHJvcGRvd24gLmZyLXRyaWdnZXIiKS5yZW1vdmVDbGFzcygiYWN0aXZlIil9LHRoaXMpKSx0aGlzLiRlbGVtZW50Lm9uKCJtb3VzZXVwIiwiaW1nLCBhIixhLnByb3h5KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMTp2b2lkIHRoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCIuZnItZHJvcGRvd24gLmZyLXRyaWdnZXIiKS5yZW1vdmVDbGFzcygiYWN0aXZlIil9LHRoaXMpKSx0aGlzLiRidHRuX3dyYXBwZXIub24oImNsaWNrIiwibGlbZGF0YS1jbWRdID4gYSIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpfSl9LGIucHJvdG90eXBlLmJpbmRDb21tYW5kRXZlbnRzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpczt0aGlzLiRidHRuX3dyYXBwZXIub24odGhpcy5tb3VzZWRvd24sImJ1dHRvbltkYXRhLWNtZF0sIGxpW2RhdGEtY21kXSwgc3BhbltkYXRhLWNtZF0sIGFbZGF0YS1jbWRdIixmdW5jdGlvbihjKXtyZXR1cm4ibW91c2Vkb3duIj09PWMudHlwZSYmMSE9PWMud2hpY2g/ITA6KCJMSSI9PT10aGlzLnRhZ05hbWUmJiJ0b3VjaHN0YXJ0Ij09PWMudHlwZSYmYi5hbmRyb2lkKCl8fGIuaU9TKCl8fGMucHJldmVudERlZmF1bHQoKSx2b2lkIGEodGhpcykuYXR0cigiZGF0YS1kb3duIiwhMCkpfSksdGhpcy4kYnR0bl93cmFwcGVyLm9uKHRoaXMubW91c2V1cCsiICIrdGhpcy5tb3ZlLCJidXR0b25bZGF0YS1jbWRdLCBsaVtkYXRhLWNtZF0sIHNwYW5bZGF0YS1jbWRdLCBhW2RhdGEtY21kXSIsYS5wcm94eShmdW5jdGlvbihjKXtpZihiLmlzRGlzYWJsZWQpcmV0dXJuITE7aWYoIm1vdXNldXAiPT09Yy50eXBlJiYxIT09Yy53aGljaClyZXR1cm4hMDt2YXIgZD1jLmN1cnJlbnRUYXJnZXQ7aWYoInRvdWNobW92ZSIhPWMudHlwZSl7aWYoYy5zdG9wUHJvcGFnYXRpb24oKSxjLnByZXZlbnREZWZhdWx0KCksIWEoZCkuYXR0cigiZGF0YS1kb3duIikpcmV0dXJuIGEoIltkYXRhLWRvd25dIikucmVtb3ZlQXR0cigiZGF0YS1kb3duIiksITE7aWYoYSgiW2RhdGEtZG93bl0iKS5yZW1vdmVBdHRyKCJkYXRhLWRvd24iKSxhKGQpLmRhdGEoImRyYWdnaW5nIikpcmV0dXJuIGEoZCkucmVtb3ZlRGF0YSgiZHJhZ2dpbmciKSwhMTt2YXIgZT1hKGQpLmRhdGEoImNtZCIpLGY9YShkKS5kYXRhKCJ2YWwiKSxnPWEoZCkuZGF0YSgicGFyYW0iKTtyZXR1cm4idG91Y2hlbmQiPT1jLnR5cGUmJmIuYW5kcm9pZCgpJiYodGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCkpLGIuZXhlYyhlLGYsZyksYi4kYnR0bl93cmFwcGVyLmZpbmQoIi5mci1kcm9wZG93biAuZnItdHJpZ2dlciIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKSwhMX1hKGQpLmRhdGEoImRyYWdnaW5nIiwhMCl9LHRoaXMpKX0sYi5wcm90b3R5cGUudW5kbz1mdW5jdGlvbigpe2lmKHRoaXMubm9fdmVyaWZ5PSEwLHRoaXMudW5kb0luZGV4PjEpe2NsZWFyVGltZW91dCh0aGlzLnR5cGluZ1RpbWVyKTt2YXIgYT10aGlzLmdldEhUTUwoKSxiPXRoaXMudW5kb1N0YWNrWy0tdGhpcy51bmRvSW5kZXgtMV07dGhpcy4kZWxlbWVudC5odG1sKGIpLHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMudHJpZ2dlckV2ZW50KCJ1bmRvIixbdGhpcy5nZXRIVE1MKCksYV0pLCIiIT09dGhpcy50ZXh0KCk/dGhpcy5yZXBvc2l0aW9uRWRpdG9yKCk6dGhpcy5oaWRlKCksdGhpcy4kZWxlbWVudC50cmlnZ2VyKCJwbGFjZWhvbGRlckNoZWNrIiksdGhpcy5mb2N1cygpLHRoaXMucmVmcmVzaEJ1dHRvbnMoKX10aGlzLm5vX3ZlcmlmeT0hMX0sYi5wcm90b3R5cGUucmVkbz1mdW5jdGlvbigpe2lmKHRoaXMubm9fdmVyaWZ5PSEwLHRoaXMudW5kb0luZGV4PHRoaXMudW5kb1N0YWNrLmxlbmd0aCl7Y2xlYXJUaW1lb3V0KHRoaXMudHlwaW5nVGltZXIpO3ZhciBhPXRoaXMuZ2V0SFRNTCgpLGI9dGhpcy51bmRvU3RhY2tbdGhpcy51bmRvSW5kZXgrK107dGhpcy4kZWxlbWVudC5odG1sKGIpLHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMudHJpZ2dlckV2ZW50KCJyZWRvIixbdGhpcy5nZXRIVE1MKCksYV0pLCIiIT09dGhpcy50ZXh0KCk/dGhpcy5yZXBvc2l0aW9uRWRpdG9yKCk6dGhpcy5oaWRlKCksdGhpcy4kZWxlbWVudC50cmlnZ2VyKCJwbGFjZWhvbGRlckNoZWNrIiksdGhpcy5mb2N1cygpLHRoaXMucmVmcmVzaEJ1dHRvbnMoKX10aGlzLm5vX3ZlcmlmeT0hMX0sYi5wcm90b3R5cGUuc2F2ZT1mdW5jdGlvbigpe2lmKCF0aGlzLnRyaWdnZXJFdmVudCgiYmVmb3JlU2F2ZSIsW10sITEpKXJldHVybiExO2lmKHRoaXMub3B0aW9ucy5zYXZlVVJMKXt2YXIgYj17fTtmb3IodmFyIGMgaW4gdGhpcy5vcHRpb25zLnNhdmVQYXJhbXMpe3ZhciBkPXRoaXMub3B0aW9ucy5zYXZlUGFyYW1zW2NdO2JbY109ImZ1bmN0aW9uIj09dHlwZW9mIGQ/ZC5jYWxsKHRoaXMpOmR9YS5hamF4KHt0eXBlOnRoaXMub3B0aW9ucy5zYXZlUmVxdWVzdFR5cGUsdXJsOnRoaXMub3B0aW9ucy5zYXZlVVJMLGRhdGE6YS5leHRlbmQoe2JvZHk6dGhpcy5nZXRIVE1MKCl9LHRoaXMub3B0aW9ucy5zYXZlUGFyYW1zKSxjcm9zc0RvbWFpbjp0aGlzLm9wdGlvbnMuY3Jvc3NEb21haW4seGhyRmllbGRzOnt3aXRoQ3JlZGVudGlhbHM6dGhpcy5vcHRpb25zLndpdGhDcmVkZW50aWFsc30saGVhZGVyczp0aGlzLm9wdGlvbnMuaGVhZGVyc30pLmRvbmUoYS5wcm94eShmdW5jdGlvbihhKXt0aGlzLnRyaWdnZXJFdmVudCgiYWZ0ZXJTYXZlIixbYV0pfSx0aGlzKSkuZmFpbChhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyRXZlbnQoInNhdmVFcnJvciIsWyJTYXZlIHJlcXVlc3QgZmFpbGVkIG9uIHRoZSBzZXJ2ZXIuIl0pfSx0aGlzKSl9ZWxzZSB0aGlzLnRyaWdnZXJFdmVudCgic2F2ZUVycm9yIixbIk1pc3Npbmcgc2F2ZSBVUkwuIl0pfSxiLnByb3RvdHlwZS5zYW5pdGl6ZVVSTD1mdW5jdGlvbihhKXtpZigvXmh0dHBzPzpcL1wvLy50ZXN0KGEpKXthPVN0cmluZyhhKS5yZXBsYWNlKC8mL2csIiZhbXA7IikucmVwbGFjZSgvPC9nLCImbHQ7IikucmVwbGFjZSgvPi9nLCImZ3Q7IikucmVwbGFjZSgvIi9nLCImcXVvdDsiKTt2YXIgYj0vXCg/KD86KGh0dHB8aHR0cHN8ZnRwKTpcL1wvKT8oPzooKD86W15cV1xzXXxcLnwtfFs6XXsxfSkrKUB7MX0pPygoPzp3d3cuKT8oPzpbXlxXXHNdfFwufC0pK1tcLl1bXlxXXHNdezIsNH18bG9jYWxob3N0fFxkezEsM31cLlxkezEsM31cLlxkezEsM31cLlxkezEsM30pKD86OihcZCopKT8oW1wvXT9bXlxzXD9dKltcL117MX0pKig/OlwvPyhbXlxzXG5cP1xbXF1ce1x9XCNdKig/Oig/PVwuKSl7MX18W15cc1xuXD9cW1xdXHtcfVwuXCNdKik/KFtcLl17MX1bXlxzXD9cI10qKT8pPyg/Olw/ezF9KFteXHNcblwjXFtcXV0qKSk/KFtcI11bXlxzXG5dKik/XCk/L2dpO2lmKCFiLnRlc3QoYSkpcmV0dXJuIiJ9ZWxzZSBhPWVuY29kZVVSSUNvbXBvbmVudChhKS5yZXBsYWNlKC8lMjMvZywiIyIpLnJlcGxhY2UoLyUyRi9nLCIvIikucmVwbGFjZSgvJTI1L2csIiUiKS5yZXBsYWNlKC9tYWlsdG8lM0EvZywibWFpbHRvOiIpLnJlcGxhY2UoL2RhdGElM0EvZywiZGF0YToiKS5yZXBsYWNlKC93ZWJraXQtZmFrZS11cmwlM0EvZywid2Via2l0LWZha2UtdXJsOiIpLnJlcGxhY2UoLyUzRi9nLCI/IikucmVwbGFjZSgvJTNEL2csIj0iKS5yZXBsYWNlKC8lMjYvZywiJiIpLnJlcGxhY2UoLyUyQy9nLCIsIikucmVwbGFjZSgvJTNCL2csIjsiKS5yZXBsYWNlKC8lMkIvZywiKyIpLnJlcGxhY2UoLyU0MC9nLCJAIik7cmV0dXJuIGF9LGIucHJvdG90eXBlLm9wdGlvbj1mdW5jdGlvbihiLGMpe2lmKHZvaWQgMD09PWIpcmV0dXJuIHRoaXMub3B0aW9ucztpZihiIGluc3RhbmNlb2YgT2JqZWN0KXRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMsYiksdGhpcy5pbml0T3B0aW9ucygpLHRoaXMuc2V0Q3VzdG9tVGV4dCgpLHRoaXMuc2V0TGFuZ3VhZ2UoKTtlbHNle2lmKHZvaWQgMD09PWMpcmV0dXJuIHRoaXMub3B0aW9uc1tiXTtzd2l0Y2godGhpcy5vcHRpb25zW2JdPWMsYil7Y2FzZSJkaXJlY3Rpb24iOnRoaXMuc2V0RGlyZWN0aW9uKCk7YnJlYWs7Y2FzZSJoZWlnaHQiOmNhc2Uid2lkdGgiOmNhc2UibWluSGVpZ2h0IjpjYXNlIm1heEhlaWdodCI6dGhpcy5zZXREaW1lbnNpb25zKCk7YnJlYWs7Y2FzZSJzcGVsbGNoZWNrIjp0aGlzLnNldFNwZWxsY2hlY2soKTticmVhaztjYXNlInBsYWNlaG9sZGVyIjp0aGlzLnNldFBsYWNlaG9sZGVyKCk7YnJlYWs7Y2FzZSJjdXN0b21UZXh0Ijp0aGlzLnNldEN1c3RvbVRleHQoKTticmVhaztjYXNlImxhbmd1YWdlIjp0aGlzLnNldExhbmd1YWdlKCk7YnJlYWs7Y2FzZSJ0ZXh0TmVhckltYWdlIjp0aGlzLnNldFRleHROZWFySW1hZ2UoKTticmVhaztjYXNlInpJbmRleCI6dGhpcy5zZXRaSW5kZXgoKTticmVhaztjYXNlInRoZW1lIjp0aGlzLnNldFRoZW1lKCl9fX07dmFyIGM9YS5mbi5lZGl0YWJsZTthLmZuLmVkaXRhYmxlPWZ1bmN0aW9uKGMpe2Zvcih2YXIgZD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKylkLnB1c2goYXJndW1lbnRzW2VdKTtpZigic3RyaW5nIj09dHlwZW9mIGMpe3ZhciBmPVtdO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpLGU9Yi5kYXRhKCJmYS5lZGl0YWJsZSIpO2lmKCFlW2NdKXJldHVybiBhLmVycm9yKCJNZXRob2QgIitjKyIgZG9lcyBub3QgZXhpc3QgaW4gRnJvYWxhIEVkaXRvci4iKTt2YXIgZz1lW2NdLmFwcGx5KGUsZC5zbGljZSgxKSk7dm9pZCAwPT09Zz9mLnB1c2godGhpcyk6MD09PWYubGVuZ3RoJiZmLnB1c2goZyl9KSwxPT1mLmxlbmd0aD9mWzBdOmZ9cmV0dXJuIm9iamVjdCIhPXR5cGVvZiBjJiZjP3ZvaWQgMDp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD10aGlzLGU9YShkKSxmPWUuZGF0YSgiZmEuZWRpdGFibGUiKTtmfHxlLmRhdGEoImZhLmVkaXRhYmxlIixmPW5ldyBiKGQsYykpfSl9LGEuZm4uZWRpdGFibGUuQ29uc3RydWN0b3I9YixhLkVkaXRhYmxlPWIsYS5mbi5lZGl0YWJsZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uZWRpdGFibGU9Yyx0aGlzfX0od2luZG93LmpRdWVyeSksZnVuY3Rpb24oYSl7YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaEJ1dHRvbnM9ZnVuY3Rpb24oYil7aWYoISh0aGlzLnNlbGVjdGlvbkluRWRpdG9yKCkmJiF0aGlzLmlzSFRNTHx8dGhpcy5icm93c2VyLm1zaWUmJmEuRWRpdGFibGUuZ2V0SUV2ZXJzaW9uKCk8OXx8YikpcmV0dXJuITE7dGhpcy4kZWRpdG9yLmZpbmQoImJ1dHRvbltkYXRhLWNtZF0iKS5yZW1vdmVDbGFzcygiYWN0aXZlIik7Zm9yKHZhciBjPTA7Yzx0aGlzLm9wdGlvbnMuYnV0dG9ucy5sZW5ndGg7YysrKXt2YXIgZD10aGlzLm9wdGlvbnMuYnV0dG9uc1tjXTt2b2lkIDAhPT1hLkVkaXRhYmxlLmNvbW1hbmRzW2RdJiYodm9pZCAwIT09YS5FZGl0YWJsZS5jb21tYW5kc1tkXS5kaXNhYmxlZD90aGlzLiRlZGl0b3IuZmluZCgnW2RhdGEtbmFtZT0iJytkKyciXSBidXR0b24nKS5wcm9wKCJkaXNhYmxlZCIsITApOnRoaXMuJGVkaXRvci5maW5kKCdbZGF0YS1uYW1lPSInK2QrJyJdIGJ1dHRvbicpLnJlbW92ZUF0dHIoImRpc2FibGVkIikpfXRoaXMucmFpc2VFdmVudCgicmVmcmVzaCIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoRm9ybWF0QmxvY2tzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpWzBdLGI9YS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7dGhpcy5vcHRpb25zLnBhcmFncmFwaHkmJiJwIj09PWImJihiPSJuIiksdGhpcy4kZWRpdG9yLmZpbmQoJy5mci1idHRuID4gYnV0dG9uW2RhdGEtbmFtZT0iZm9ybWF0QmxvY2siXSArIHVsIGxpJykucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpLHRoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCcuZnItYnR0biA+IGJ1dHRvbltkYXRhLW5hbWU9ImZvcm1hdEJsb2NrIl0gKyB1bCBsaVtkYXRhLXZhbD0iJytiKyciXScpLmFkZENsYXNzKCJhY3RpdmUiKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaFVuZG89ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW5hYmxlZCgidW5kbyIpKXtpZih2b2lkIDA9PT10aGlzLiRlZGl0b3IpcmV0dXJuO3RoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCdbZGF0YS1jbWQ9InVuZG8iXScpLnJlbW92ZUF0dHIoImRpc2FibGVkIiksKDA9PT10aGlzLnVuZG9TdGFjay5sZW5ndGh8fHRoaXMudW5kb0luZGV4PD0xfHx0aGlzLmlzSFRNTCkmJnRoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCdbZGF0YS1jbWQ9InVuZG8iXScpLnByb3AoImRpc2FibGVkIiwhMCl9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoUmVkbz1mdW5jdGlvbigpe2lmKHRoaXMuaXNFbmFibGVkKCJyZWRvIikpe2lmKHZvaWQgMD09PXRoaXMuJGVkaXRvcilyZXR1cm47dGhpcy4kYnR0bl93cmFwcGVyLmZpbmQoJ1tkYXRhLWNtZD0icmVkbyJdJykucmVtb3ZlQXR0cigiZGlzYWJsZWQiKSwodGhpcy51bmRvSW5kZXg9PXRoaXMudW5kb1N0YWNrLmxlbmd0aHx8dGhpcy5pc0hUTUwpJiZ0aGlzLiRidHRuX3dyYXBwZXIuZmluZCgnW2RhdGEtY21kPSJyZWRvIl0nKS5wcm9wKCJkaXNhYmxlZCIsITApfX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaERlZmF1bHQ9ZnVuY3Rpb24oYSl7dHJ5e2RvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKGEpPT09ITAmJnRoaXMuJGVkaXRvci5maW5kKCdbZGF0YS1jbWQ9IicrYSsnIl0nKS5hZGRDbGFzcygiYWN0aXZlIil9Y2F0Y2goYil7fX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaEFsaWduPWZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzLmdldFNlbGVjdGlvbkVsZW1lbnRzKClbMF0pO3RoaXMuJGVkaXRvci5maW5kKCcuZnItZHJvcGRvd24gPiBidXR0b25bZGF0YS1uYW1lPSJhbGlnbiJdICsgdWwgbGknKS5yZW1vdmVDbGFzcygiYWN0aXZlIik7dmFyIGM9Imp1c3RpZnlDZW50ZXIiLGQ9Yi5jc3MoInRleHQtYWxpZ24iKTsibGVmdCI9PWQ/Yz0ianVzdGlmeUxlZnQiOiJyaWdodCI9PWQ/Yz0ianVzdGlmeVJpZ2h0IjoianVzdGlmeSI9PWQmJihjPSJqdXN0aWZ5RnVsbCIpLHRoaXMuJGVkaXRvci5maW5kKCcuZnItZHJvcGRvd24gPiBidXR0b25bZGF0YS1uYW1lPSJhbGlnbiJdLmZyLXRyaWdnZXIgaScpLmF0dHIoImNsYXNzIiwiZmEgZmEtYWxpZ24tIitkKSx0aGlzLiRlZGl0b3IuZmluZCgnLmZyLWRyb3Bkb3duID4gYnV0dG9uW2RhdGEtbmFtZT0iYWxpZ24iXSArIHVsIGxpW2RhdGEtY21kPSInK2MrJyJdJykuYWRkQ2xhc3MoImFjdGl2ZSIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoSFRNTD1mdW5jdGlvbigpe3RoaXMuaXNBY3RpdmUoImh0bWwiKT90aGlzLiRlZGl0b3IuZmluZCgnW2RhdGEtY21kPSJodG1sIl0nKS5hZGRDbGFzcygiYWN0aXZlIik6dGhpcy4kZWRpdG9yLmZpbmQoJ1tkYXRhLWNtZD0iaHRtbCJdJykucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthLkVkaXRhYmxlLmNvbW1hbmRzPXtib2xkOnt0aXRsZToiQm9sZCIsaWNvbjoiZmEgZmEtYm9sZCIsc2hvcnRjdXQ6IihDdHJsICsgQikiLHJlZnJlc2g6YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaERlZmF1bHQsdW5kbzohMCxjYWxsYmFja1dpdGhvdXRTZWxlY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5fc3RhcnRJbkRlZmF1bHQoYSl9fSxpdGFsaWM6e3RpdGxlOiJJdGFsaWMiLGljb246ImZhIGZhLWl0YWxpYyIsc2hvcnRjdXQ6IihDdHJsICsgSSkiLHJlZnJlc2g6YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaERlZmF1bHQsdW5kbzohMCxjYWxsYmFja1dpdGhvdXRTZWxlY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5fc3RhcnRJbkRlZmF1bHQoYSl9fSx1bmRlcmxpbmU6e2NtZDoidW5kZXJsaW5lIix0aXRsZToiVW5kZXJsaW5lIixpY29uOiJmYSBmYS11bmRlcmxpbmUiLHNob3J0Y3V0OiIoQ3RybCArIFUpIixyZWZyZXNoOmEuRWRpdGFibGUucHJvdG90eXBlLnJlZnJlc2hEZWZhdWx0LHVuZG86ITAsY2FsbGJhY2tXaXRob3V0U2VsZWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuX3N0YXJ0SW5EZWZhdWx0KGEpfX0sc3RyaWtlVGhyb3VnaDp7dGl0bGU6IlN0cmlrZXRocm91Z2giLGljb246ImZhIGZhLXN0cmlrZXRocm91Z2giLHJlZnJlc2g6YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaERlZmF1bHQsdW5kbzohMCxjYWxsYmFja1dpdGhvdXRTZWxlY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5fc3RhcnRJbkRlZmF1bHQoYSl9fSxzdWJzY3JpcHQ6e3RpdGxlOiJTdWJzY3JpcHQiLGljb246ImZhIGZhLXN1YnNjcmlwdCIscmVmcmVzaDphLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoRGVmYXVsdCx1bmRvOiEwLGNhbGxiYWNrV2l0aG91dFNlbGVjdGlvbjpmdW5jdGlvbihhKXt0aGlzLl9zdGFydEluRGVmYXVsdChhKX19LHN1cGVyc2NyaXB0Ont0aXRsZToiU3VwZXJzY3JpcHQiLGljb246ImZhIGZhLXN1cGVyc2NyaXB0IixyZWZyZXNoOmEuRWRpdGFibGUucHJvdG90eXBlLnJlZnJlc2hEZWZhdWx0LHVuZG86ITAsY2FsbGJhY2tXaXRob3V0U2VsZWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuX3N0YXJ0SW5EZWZhdWx0KGEpfX0sZm9ybWF0QmxvY2s6e3RpdGxlOiJGb3JtYXQgQmxvY2siLGljb246ImZhIGZhLXBhcmFncmFwaCIscmVmcmVzaE9uU2hvdzphLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoRm9ybWF0QmxvY2tzLHNlZWQ6W3t2YWx1ZToibiIsdGl0bGU6Ik5vcm1hbCJ9LHt2YWx1ZToicCIsdGl0bGU6IlBhcmFncmFwaCJ9LHt2YWx1ZToicHJlIix0aXRsZToiQ29kZSJ9LHt2YWx1ZToiYmxvY2txdW90ZSIsdGl0bGU6IlF1b3RlIn0se3ZhbHVlOiJoMSIsdGl0bGU6IkhlYWRpbmcgMSJ9LHt2YWx1ZToiaDIiLHRpdGxlOiJIZWFkaW5nIDIifSx7dmFsdWU6ImgzIix0aXRsZToiSGVhZGluZyAzIn0se3ZhbHVlOiJoNCIsdGl0bGU6IkhlYWRpbmcgNCJ9LHt2YWx1ZToiaDUiLHRpdGxlOiJIZWFkaW5nIDUifSx7dmFsdWU6Img2Iix0aXRsZToiSGVhZGluZyA2In1dLGNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7dGhpcy5mb3JtYXRCbG9jayhiKX0sdW5kbzohMH0sYWxpZ246e3RpdGxlOiJBbGlnbm1lbnQiLGljb246ImZhIGZhLWFsaWduLWNlbnRlciIscmVmcmVzaDphLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoQWxpZ24scmVmcmVzaE9uU2hvdzphLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoQWxpZ24sc2VlZDpbe2NtZDoianVzdGlmeUxlZnQiLHRpdGxlOiJBbGlnbiBMZWZ0IixpY29uOiJmYSBmYS1hbGlnbi1sZWZ0In0se2NtZDoianVzdGlmeUNlbnRlciIsdGl0bGU6IkFsaWduIENlbnRlciIsaWNvbjoiZmEgZmEtYWxpZ24tY2VudGVyIn0se2NtZDoianVzdGlmeVJpZ2h0Iix0aXRsZToiQWxpZ24gUmlnaHQiLGljb246ImZhIGZhLWFsaWduLXJpZ2h0In0se2NtZDoianVzdGlmeUZ1bGwiLHRpdGxlOiJKdXN0aWZ5IixpY29uOiJmYSBmYS1hbGlnbi1qdXN0aWZ5In1dLGNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7dGhpcy5hbGlnbihiKX0sdW5kbzohMH0sb3V0ZGVudDp7dGl0bGU6IkluZGVudCBMZXNzIixpY29uOiJmYSBmYS1kZWRlbnQiLGFjdGl2ZWxlc3M6ITAsc2hvcnRjdXQ6IihDdHJsICsgPCkiLGNhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5vdXRkZW50KCEwKX0sdW5kbzohMH0saW5kZW50Ont0aXRsZToiSW5kZW50IE1vcmUiLGljb246ImZhIGZhLWluZGVudCIsYWN0aXZlbGVzczohMCxzaG9ydGN1dDoiKEN0cmwgKyA+KSIsY2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmluZGVudCgpfSx1bmRvOiEwfSxzZWxlY3RBbGw6e3RpdGxlOiJTZWxlY3QgQWxsIixpY29uOiJmYSBmYS1maWxlLXRleHQiLHNob3J0Y3V0OiIoQ3RybCArIEEpIixjYWxsYmFjazpmdW5jdGlvbihhLGIpe3RoaXMuJGVsZW1lbnQuZm9jdXMoKSx0aGlzLmV4ZWNEZWZhdWx0KGEsYil9LHVuZG86ITF9LGNyZWF0ZUxpbms6e3RpdGxlOiJJbnNlcnQgTGluayIsaWNvbjoiZmEgZmEtbGluayIsc2hvcnRjdXQ6IihDdHJsICsgSykiLGNhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5pbnNlcnRMaW5rKCl9LHVuZG86ITF9LGluc2VydEltYWdlOnt0aXRsZToiSW5zZXJ0IEltYWdlIixpY29uOiJmYSBmYS1waWN0dXJlLW8iLGFjdGl2ZWxlc3M6ITAsc2hvcnRjdXQ6IihDdHJsICsgUCkiLGNhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5pbnNlcnRJbWFnZSgpfSx1bmRvOiExfSx1bmRvOnt0aXRsZToiVW5kbyIsaWNvbjoiZmEgZmEtdW5kbyIsYWN0aXZlbGVzczohMCxzaG9ydGN1dDoiKEN0cmwrWikiLHJlZnJlc2g6YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaFVuZG8sY2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnVuZG8oKX0sdW5kbzohMX0scmVkbzp7dGl0bGU6IlJlZG8iLGljb246ImZhIGZhLXJlcGVhdCIsYWN0aXZlbGVzczohMCxzaG9ydGN1dDoiKFNoaWZ0K0N0cmwrWikiLHJlZnJlc2g6YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaFJlZG8sY2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnJlZG8oKX0sdW5kbzohMX0saHRtbDp7dGl0bGU6IlNob3cgSFRNTCIsaWNvbjoiZmEgZmEtY29kZSIscmVmcmVzaDphLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoSFRNTCxjYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuaHRtbCgpfSx1bmRvOiExfSxzYXZlOnt0aXRsZToiU2F2ZSIsaWNvbjoiZmEgZmEtZmxvcHB5LW8iLGNhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5zYXZlKCl9LHVuZG86ITF9LGluc2VydEhvcml6b250YWxSdWxlOnt0aXRsZToiSW5zZXJ0IEhvcml6b250YWwgTGluZSIsaWNvbjoiZmEgZmEtbWludXMiLGNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7dGhpcy5leGVjRGVmYXVsdChhLGIpLHRoaXMuaGlkZSgpfSx1bmRvOiEwfX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZXhlYz1mdW5jdGlvbihiLGMsZCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKXx8dGhpcy5mb2N1cygpLHRoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKSYmIiI9PT10aGlzLnRleHQoKSYmYS5FZGl0YWJsZS5jb21tYW5kc1tiXS5jYWxsYmFja1dpdGhvdXRTZWxlY3Rpb24/KGEuRWRpdGFibGUuY29tbWFuZHNbYl0uY2FsbGJhY2tXaXRob3V0U2VsZWN0aW9uLmFwcGx5KHRoaXMsW2IsYyxkXSksITEpOihhLkVkaXRhYmxlLmNvbW1hbmRzW2JdLmNhbGxiYWNrP2EuRWRpdGFibGUuY29tbWFuZHNbYl0uY2FsbGJhY2suYXBwbHkodGhpcyxbYixjLGRdKTp0aGlzLmV4ZWNEZWZhdWx0KGIsYyksdm9pZChhLkVkaXRhYmxlLmNvbW1hbmRzW2JdLnVuZG8mJnRoaXMuc2F2ZVVuZG9TdGVwKCkpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaHRtbD1mdW5jdGlvbigpe3ZhciBhO3RoaXMuaXNIVE1MPyh0aGlzLmlzSFRNTD0hMSxhPXRoaXMuJGh0bWxfYXJlYS52YWwoKSxhPXRoaXMuY2xlYW4oYSwhMCwhMSksdGhpcy4kYm94LnJlbW92ZUNsYXNzKCJmLWh0bWwiKSx0aGlzLiRodG1sX2FyZWEuYmx1cigpLHRoaXMubm9fdmVyaWZ5PSEwLHRoaXMuJGVsZW1lbnQuaHRtbChhKSx0aGlzLmNsZWFuaWZ5KCExKSx0aGlzLm5vX3ZlcmlmeT0hMSx0aGlzLiRlbGVtZW50LmF0dHIoImNvbnRlbnRlZGl0YWJsZSIsITApLHRoaXMuJGVkaXRvci5maW5kKCcuZnItYnR0bjpub3QoW2RhdGEtY21kPSJodG1sIl0pLCAuZnItdHJpZ2dlcicpLnJlbW92ZUF0dHIoImRpc2FibGVkIiksdGhpcy4kZWRpdG9yLmZpbmQoJy5mci1idHRuW2RhdGEtY21kPSJodG1sIl0nKS5yZW1vdmVDbGFzcygiYWN0aXZlIiksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLm9wdGlvbnMucGFyYWdyYXBoeSYmdGhpcy53cmFwVGV4dCgpLHRoaXMuJGVsZW1lbnQuYmx1cigpLHRoaXMuZm9jdXMoKSx0aGlzLnJlZnJlc2hCdXR0b25zKCksdGhpcy50cmlnZ2VyRXZlbnQoImh0bWxIaWRlIixbYV0sITAsITApKToodGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiZi1wbGFjZWhvbGRlciIpLHRoaXMuY2xlYW5pZnkoITEpLGE9dGhpcy5vcHRpb25zLmlubGluZU1vZGU/IlxuXG4iK3RoaXMuY2xlYW5UYWdzKHRoaXMuZ2V0SFRNTCghMSwhMSkpOnRoaXMuY2xlYW5UYWdzKHRoaXMuZ2V0SFRNTCghMSwhMSkpLGE9YS5yZXBsYWNlKC9cJmFtcDsvZywiJiIpLHRoaXMuJGh0bWxfYXJlYS52YWwoYSkudHJpZ2dlcigicmVzaXplIiksdGhpcy4kaHRtbF9hcmVhLmNzcygiaGVpZ2h0Iix0aGlzLiRlbGVtZW50LmhlaWdodCgpLTEpLHRoaXMuJGVsZW1lbnQuaHRtbCgiIikuYXBwZW5kKHRoaXMuJGh0bWxfYXJlYSkucmVtb3ZlQXR0cigiY29udGVudGVkaXRhYmxlIiksdGhpcy4kYm94LmFkZENsYXNzKCJmLWh0bWwiKSx0aGlzLiRlZGl0b3IuZmluZCgnYnV0dG9uLmZyLWJ0dG46bm90KFtkYXRhLWNtZD0iaHRtbCJdKSwgYnV0dG9uLmZyLXRyaWdnZXInKS5hdHRyKCJkaXNhYmxlZCIsITApLHRoaXMuJGVkaXRvci5maW5kKCcuZnItYnR0bltkYXRhLWNtZD0iaHRtbCJdJykuYWRkQ2xhc3MoImFjdGl2ZSIpLHRoaXMuaGlkZSgpLHRoaXMuaW1hZ2VNb2RlPSExLHRoaXMuaXNIVE1MPSEwLHRoaXMuJGVsZW1lbnQuYmx1cigpLHRoaXMuJGVsZW1lbnQucmVtb3ZlQXR0cigiY29udGVudGVkaXRhYmxlIiksdGhpcy50cmlnZ2VyRXZlbnQoImh0bWxTaG93IixbYV0sITAsITEpKQp9LGEuRWRpdGFibGUucHJvdG90eXBlLmZvcm1hdEJsb2NrPWZ1bmN0aW9uKGIsYyxkKXtpZih0aGlzLmRpc2FibGVkTGlzdC5pbmRleE9mKCJmb3JtYXRCbG9jayIpPj0wKXJldHVybiExO2lmKHRoaXMuYnJvd3Nlci5tc2llJiZhLkVkaXRhYmxlLmdldElFdmVyc2lvbigpPDkpcmV0dXJuIGRvY3VtZW50LmV4ZWNDb21tYW5kKCJmb3JtYXRCbG9jayIsITEsIjwiK2IrIj4iKSwhMTt0aGlzLnNhdmVTZWxlY3Rpb25CeU1hcmtlcnMoKSx0aGlzLndyYXBUZXh0KCksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCk7dmFyIGU9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpO2VbMF09PXRoaXMuJGVsZW1lbnQuZ2V0KDApJiYoZT10aGlzLiRlbGVtZW50LmZpbmQoIj4gIithLkVkaXRhYmxlLlZBTElEX05PREVTLmpvaW4oIiwgPiIpKSksdGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCk7Zm9yKHZhciBmLGc9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0JiZbIkxJIiwiVEQiLCJUSCJdLmluZGV4T2YoYS5nZXQoMCkudGFnTmFtZSk+PTA/ITA6ITF9LGg9MDtoPGUubGVuZ3RoO2grKyl7dmFyIGk9YShlW2hdKTtpZighdGhpcy5mYWtlRW1wdHkoaSkpaWYoZj0ibiI9PWI/dGhpcy5vcHRpb25zLnBhcmFncmFwaHk/YSgiPHA+IikuaHRtbChpLmh0bWwoKSk6aS5odG1sKCkrIjxici8+IjphKCI8IitiKyI+IikuaHRtbChpLmh0bWwoKSksaS5nZXQoMCk9PXRoaXMuJGVsZW1lbnQuZ2V0KDApfHxnKGYpKWkuaHRtbChmKTtlbHNle3ZhciBqPWkucHJvcCgiYXR0cmlidXRlcyIpO2lmKGYuYXR0cilmb3IodmFyIGs9MDtrPGoubGVuZ3RoO2srKykiY2xhc3MiIT09altrXS5uYW1lJiZmLmF0dHIoaltrXS5uYW1lLGpba10udmFsdWUpO3ZhciBsO3RoaXMub3B0aW9ucy5ibG9ja1N0eWxlcyYmdGhpcy5vcHRpb25zLmJsb2NrU3R5bGVzW2JdLHZvaWQgMD09PWwmJihsPXRoaXMub3B0aW9ucy5kZWZhdWx0QmxvY2tTdHlsZSk7dHJ5e2lmKGkuaGFzQ2xhc3MoYykmJmkuZ2V0KDApLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09PWIpZi5hZGRDbGFzcyhpLmF0dHIoImNsYXNzIikpLnJlbW92ZUNsYXNzKGMpO2Vsc2V7aWYodm9pZCAwPT09aS5hdHRyKCJjbGFzcyIpfHx2b2lkIDA9PT1sfHwhdGhpcy5vcHRpb25zLmJsb2NrU3R5bGVzVG9nZ2xlJiYidG9nZ2xlIiE9ZClmLmFkZENsYXNzKGkuYXR0cigiY2xhc3MiKSk7ZWxzZSBmb3IodmFyIG09aS5hdHRyKCJjbGFzcyIpLnNwbGl0KCIgIiksbj0wO248bS5sZW5ndGg7bisrKXt2YXIgbz1tW25dO3ZvaWQgMD09PWxbb10mJnZvaWQgMD09PWQ/Zi5hZGRDbGFzcyhvKTp2b2lkIDAhPT1sW29dJiYidG9nZ2xlIj09PWQmJmYuYWRkQ2xhc3MobyksaS5nZXQoMCkudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT09YiYmdm9pZCAwIT09bFtvXSYmZi5hZGRDbGFzcyhvKX0iKiIhPWMmJmYuYWRkQ2xhc3MoYyl9fWNhdGNoKHApe31nKGkpP2kuaHRtbChmKTppLnJlcGxhY2VXaXRoKGYpfX10aGlzLnVud3JhcFRleHQoKSx0aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSx0aGlzLnRyaWdnZXJFdmVudCgiZm9ybWF0QmxvY2siKSx0aGlzLnJlcG9zaXRpb25FZGl0b3IoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuYWxpZ249ZnVuY3Rpb24oYil7aWYodGhpcy5icm93c2VyLm1zaWUmJmEuRWRpdGFibGUuZ2V0SUV2ZXJzaW9uKCk8OSlyZXR1cm4gZG9jdW1lbnQuZXhlY0NvbW1hbmQoYiwhMSwhMSksITE7dGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCk7dmFyIGM9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpOyJqdXN0aWZ5TGVmdCI9PWI/Yj0ibGVmdCI6Imp1c3RpZnlSaWdodCI9PWI/Yj0icmlnaHQiOiJqdXN0aWZ5Q2VudGVyIj09Yj9iPSJjZW50ZXIiOiJqdXN0aWZ5RnVsbCI9PWImJihiPSJqdXN0aWZ5Iik7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspYShjW2RdKS5jc3MoInRleHQtYWxpZ24iLGIpO3RoaXMucmVwb3NpdGlvbkVkaXRvcigpLHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMudHJpZ2dlckV2ZW50KCJhbGlnbiIsW2JdKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5kZW50PWZ1bmN0aW9uKGIpe2lmKHRoaXMuYnJvd3Nlci5tc2llJiZhLkVkaXRhYmxlLmdldElFdmVyc2lvbigpPDkpcmV0dXJuIGI/ZG9jdW1lbnQuZXhlY0NvbW1hbmQoIm91dGRlbnQiLCExLCExKTpkb2N1bWVudC5leGVjQ29tbWFuZCgiaW5kZW50IiwhMSwhMSksITE7dmFyIGM9MjA7YiYmKGM9LTIwKSx0aGlzLnNhdmVTZWxlY3Rpb25CeU1hcmtlcnMoKSx0aGlzLndyYXBUZXh0KCksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCk7dmFyIGQ9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpO3RoaXMuc2F2ZVNlbGVjdGlvbkJ5TWFya2VycygpO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1hKGRbZV0pO2lmKGYucGFyZW50c1VudGlsKHRoaXMuJGVsZW1lbnQsImxpIikubGVuZ3RoPjAmJihmPWYuY2xvc2VzdCgibGkiKSksIkxJIj09PWYuZ2V0KDApLnRhZ05hbWUmJmEuaXNGdW5jdGlvbih0aGlzLmluZGVudExpKSliP3RoaXMub3V0ZGVudExpKGYpOnRoaXMuaW5kZW50TGkoZik7ZWxzZSBpZihmLmdldCgwKSE9dGhpcy4kZWxlbWVudC5nZXQoMCkpe3ZhciBnPXBhcnNlSW50KGYuY3NzKCJtYXJnaW4tbGVmdCIpLnJlcGxhY2UoL3B4LywiIiksMTApLGg9TWF0aC5tYXgoMCxnK2MpO2YuY3NzKCJtYXJnaW5MZWZ0IixoKX1lbHNle3ZhciBpPWEoIjxkaXY+IikuaHRtbChmLmh0bWwoKSk7Zi5odG1sKGkpLGkuY3NzKCJtYXJnaW5MZWZ0IixNYXRoLm1heCgwLGMpKX19dGhpcy51bndyYXBUZXh0KCksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5yZXBvc2l0aW9uRWRpdG9yKCksYnx8dGhpcy50cmlnZ2VyRXZlbnQoImluZGVudCIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5vdXRkZW50PWZ1bmN0aW9uKCl7dGhpcy5pbmRlbnQoITApLHRoaXMudHJpZ2dlckV2ZW50KCJvdXRkZW50Iil9LGEuRWRpdGFibGUucHJvdG90eXBlLmV4ZWNEZWZhdWx0PWZ1bmN0aW9uKGEsYil7ZG9jdW1lbnQuZXhlY0NvbW1hbmQoYSwhMSxiKSx0aGlzLnRyaWdnZXJFdmVudChhLFtdLCEwLCEwKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuX3N0YXJ0SW5EZWZhdWx0PWZ1bmN0aW9uKGEpe3RoaXMuZm9jdXMoKSxkb2N1bWVudC5leGVjQ29tbWFuZChhLCExLCEwKSx0aGlzLnJlZnJlc2hCdXR0b25zKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLl9zdGFydEluRm9udEV4ZWM9ZnVuY3Rpb24oYixjLGQpe3RoaXMuZm9jdXMoKTt0cnl7dmFyIGU9dGhpcy5nZXRSYW5nZSgpLGY9ZS5jbG9uZVJhbmdlKCk7Zi5jb2xsYXBzZSghMSk7dmFyIGc9YSgnPHNwYW4gZGF0YS1pbnNlcnRlZD0idHJ1ZSIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSIgc3R5bGU9IicrYisiOiAiK2QrJzsiPiYjODIwMzs8L3NwYW4+Jyxkb2N1bWVudCk7Zi5pbnNlcnROb2RlKGdbMF0pLGc9dGhpcy4kZWxlbWVudC5maW5kKCJbZGF0YS1pbnNlcnRlZF0iKSxnLnJlbW92ZUF0dHIoImRhdGEtaW5zZXJ0ZWQiKSx0aGlzLnNldFNlbGVjdGlvbihnLmdldCgwKSwxKX1jYXRjaChoKXt9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yZW1vdmVGb3JtYXQ9ZnVuY3Rpb24oKXtkb2N1bWVudC5leGVjQ29tbWFuZCgicmVtb3ZlRm9ybWF0IiwhMSwhMSksZG9jdW1lbnQuZXhlY0NvbW1hbmQoInVubGluayIsITEsITEpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pbmxpbmVTdHlsZT1mdW5jdGlvbihiLGMsZCl7aWYodGhpcy5icm93c2VyLndlYmtpdCYmImZvbnQtc2l6ZSIhPWIpe3ZhciBlPWZ1bmN0aW9uKGEpe3JldHVybiBhLmF0dHIoInN0eWxlIikuaW5kZXhPZigiZm9udC1zaXplIik+PTB9O3RoaXMuJGVsZW1lbnQuZmluZCgic3BhbiIpLmVhY2goZnVuY3Rpb24oYixjKXt2YXIgZD1hKGMpO2QuYXR0cigic3R5bGUiKSYmZShkKSYmKGQuZGF0YSgiZm9udC1zaXplIixkLmNzcygiZm9udC1zaXplIikpLGQuY3NzKCJmb250LXNpemUiLCIiKSl9KX1kb2N1bWVudC5leGVjQ29tbWFuZCgiZm9udFNpemUiLCExLDQpLHRoaXMuc2F2ZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMuYnJvd3Nlci53ZWJraXQmJiJmb250LXNpemUiIT1iJiZ0aGlzLiRlbGVtZW50LmZpbmQoInNwYW4iKS5lYWNoKGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YShjKTtkLmRhdGEoImZvbnQtc2l6ZSIpJiYoZC5jc3MoImZvbnQtc2l6ZSIsZC5kYXRhKCJmb250LXNpemUiKSksZC5yZW1vdmVEYXRhKCJmb250LXNpemUiKSl9KTt2YXIgZj1mdW5jdGlvbihjLGUpe3ZhciBmPWEoZSk7Zi5jc3MoYikhPWQmJmYuY3NzKGIsIiIpLCIiPT09Zi5hdHRyKCJzdHlsZSIpJiZmLnJlcGxhY2VXaXRoKGYuaHRtbCgpKX07dGhpcy4kZWxlbWVudC5maW5kKCJmb250IikuZWFjaChmdW5jdGlvbihjLGUpe3ZhciBnPWEoJzxzcGFuIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiIHN0eWxlPSInK2IrIjogIitkKyc7Ij4nK2EoZSkuaHRtbCgpKyI8L3NwYW4+Iik7YShlKS5yZXBsYWNlV2l0aChnKSxnLmZpbmQoInNwYW4iKS5lYWNoKGYpfSksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5yZXBvc2l0aW9uRWRpdG9yKCksdGhpcy50cmlnZ2VyRXZlbnQoYyxbZF0sITAsITApfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthLkVkaXRhYmxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuX2V2ZW50cyxkPWNbYV09Y1thXXx8W107ZC5wdXNoKGIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yYWlzZUV2ZW50PWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9W10pO3ZhciBjPSEwLGQ9dGhpcy5fZXZlbnRzW2FdO2lmKGQpZm9yKHZhciBlPTAsZj1kLmxlbmd0aDtmPmU7ZSsrKXt2YXIgZz1kW2VdLmFwcGx5KHRoaXMsYik7dm9pZCAwIT09ZyYmKGM9Zyl9cmV0dXJuIHZvaWQgMD09PWMmJihjPSEwKSxjfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthLkVkaXRhYmxlLnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKCl7dmFyIGE9IiI7cmV0dXJuIHdpbmRvdy5nZXRTZWxlY3Rpb24/YT13aW5kb3cuZ2V0U2VsZWN0aW9uKCk6ZG9jdW1lbnQuZ2V0U2VsZWN0aW9uP2E9ZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk6ZG9jdW1lbnQuc2VsZWN0aW9uJiYoYT1kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKS50ZXh0KSxhLnRvU3RyaW5nKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLnNlbGVjdGlvbkluRWRpdG9yPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRTZWxlY3Rpb25QYXJlbnQoKSxjPSExO3JldHVybiBiPT10aGlzLiRlbGVtZW50LmdldCgwKSYmKGM9ITApLGM9PT0hMSYmYShiKS5wYXJlbnRzKCkuZWFjaChhLnByb3h5KGZ1bmN0aW9uKGEsYil7Yj09dGhpcy4kZWxlbWVudC5nZXQoMCkmJihjPSEwKX0sdGhpcykpLGN9LGEuRWRpdGFibGUucHJvdG90eXBlLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3ZhciBhPSIiO3JldHVybiBhPXdpbmRvdy5nZXRTZWxlY3Rpb24/d2luZG93LmdldFNlbGVjdGlvbigpOmRvY3VtZW50LmdldFNlbGVjdGlvbj9kb2N1bWVudC5nZXRTZWxlY3Rpb24oKTpkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZ2V0UmFuZ2U9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFJhbmdlcygpO3JldHVybiBhLmxlbmd0aD4wP2FbMF06bnVsbH0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZ2V0UmFuZ2VzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRTZWxlY3Rpb24oKTtpZihhLmdldFJhbmdlQXQmJmEucmFuZ2VDb3VudCl7Zm9yKHZhciBiPVtdLGM9MDtjPGEucmFuZ2VDb3VudDtjKyspYi5wdXNoKGEuZ2V0UmFuZ2VBdChjKSk7cmV0dXJuIGJ9cmV0dXJuIGRvY3VtZW50LmNyZWF0ZVJhbmdlP1tkb2N1bWVudC5jcmVhdGVSYW5nZSgpXTpbXX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFNlbGVjdGlvbigpO3RyeXthLnJlbW92ZUFsbFJhbmdlcz9hLnJlbW92ZUFsbFJhbmdlcygpOmEuZW1wdHk/YS5lbXB0eSgpOmEuY2xlYXImJmEuY2xlYXIoKX1jYXRjaChiKXt9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5nZXRTZWxlY3Rpb25FbGVtZW50PWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRTZWxlY3Rpb24oKTtpZihiLnJhbmdlQ291bnQpe3ZhciBjPXRoaXMuZ2V0UmFuZ2UoKSxkPWMuc3RhcnRDb250YWluZXI7MSE9ZC5ub2RlVHlwZSYmKGQ9ZC5wYXJlbnROb2RlKTt2YXIgZT0hMTtkLmNoaWxkcmVuLmxlbmd0aD4wJiZkLmNoaWxkcmVuW2Muc3RhcnRPZmZzZXRdJiZhKGQuY2hpbGRyZW5bYy5zdGFydE9mZnNldF0pLnRleHQoKT09PXRoaXMudGV4dCgpJiYoZD1kLmNoaWxkcmVuW2Muc3RhcnRPZmZzZXRdLGU9ITApLCFlJiZkLmNoaWxkcmVuLmxlbmd0aD4wJiZhKGQuY2hpbGRyZW5bMF0pLnRleHQoKT09PXRoaXMudGV4dCgpJiZbIkJSIiwiSU1HIl0uaW5kZXhPZihkLmNoaWxkcmVuWzBdLnRhZ05hbWUpPDAmJihkPWQuY2hpbGRyZW5bMF0pO2Zvcih2YXIgZj1kO2YmJiJCT0RZIiE9Zi50YWdOYW1lOyl7aWYoZj09dGhpcy4kZWxlbWVudC5nZXQoMCkpcmV0dXJuIGQ7Zj1hKGYpLnBhcmVudCgpWzBdfX1yZXR1cm4gdGhpcy4kZWxlbWVudC5nZXQoMCl9LGEuRWRpdGFibGUucHJvdG90eXBlLmdldFNlbGVjdGlvblBhcmVudD1mdW5jdGlvbigpe3ZhciBiLGM9bnVsbDtyZXR1cm4gd2luZG93LmdldFNlbGVjdGlvbj8oYj13aW5kb3cuZ2V0U2VsZWN0aW9uKCksYi5yYW5nZUNvdW50JiYoYz1iLmdldFJhbmdlQXQoMCkuY29tbW9uQW5jZXN0b3JDb250YWluZXIsMSE9Yy5ub2RlVHlwZSYmKGM9Yy5wYXJlbnROb2RlKSkpOihiPWRvY3VtZW50LnNlbGVjdGlvbikmJiJDb250cm9sIiE9Yi50eXBlJiYoYz1iLmNyZWF0ZVJhbmdlKCkucGFyZW50RWxlbWVudCgpKSxudWxsIT1jJiYoYS5pbkFycmF5KHRoaXMuJGVsZW1lbnQuZ2V0KDApLGEoYykucGFyZW50cygpKT49MHx8Yz09dGhpcy4kZWxlbWVudC5nZXQoMCkpP2M6bnVsbH0sYS5FZGl0YWJsZS5wcm90b3R5cGUubm9kZUluUmFuZ2U9ZnVuY3Rpb24oYSxiKXt2YXIgYztpZihhLmludGVyc2VjdHNOb2RlKXJldHVybiBhLmludGVyc2VjdHNOb2RlKGIpO2M9Yi5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7dHJ5e2Muc2VsZWN0Tm9kZShiKX1jYXRjaChkKXtjLnNlbGVjdE5vZGVDb250ZW50cyhiKX1yZXR1cm4tMT09YS5jb21wYXJlQm91bmRhcnlQb2ludHMoUmFuZ2UuRU5EX1RPX1NUQVJULGMpJiYxPT1hLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhSYW5nZS5TVEFSVF9UT19FTkQsYyl9LGEuRWRpdGFibGUucHJvdG90eXBlLmdldEVsZW1lbnRGcm9tTm9kZT1mdW5jdGlvbihiKXtmb3IoMSE9Yi5ub2RlVHlwZSYmKGI9Yi5wYXJlbnROb2RlKTtudWxsIT09YiYmYS5FZGl0YWJsZS5WQUxJRF9OT0RFUy5pbmRleE9mKGIudGFnTmFtZSk8MDspYj1iLnBhcmVudE5vZGU7cmV0dXJuIG51bGwhPWImJiJMSSI9PWIudGFnTmFtZSYmYShiKS5maW5kKGEuRWRpdGFibGUuVkFMSURfTk9ERVMuam9pbigpKS5sZW5ndGg+MD9udWxsOmEubWFrZUFycmF5KGEoYikucGFyZW50cygpKS5pbmRleE9mKHRoaXMuJGVsZW1lbnQuZ2V0KDApKT49MD9iOm51bGx9LGEuRWRpdGFibGUucHJvdG90eXBlLm5leHROb2RlPWZ1bmN0aW9uKGEsYil7aWYoYS5oYXNDaGlsZE5vZGVzKCkpcmV0dXJuIGEuZmlyc3RDaGlsZDtmb3IoO2EmJiFhLm5leHRTaWJsaW5nJiZhIT1iOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYSYmYSE9Yj9hLm5leHRTaWJsaW5nOm51bGx9LGEuRWRpdGFibGUucHJvdG90eXBlLmdldFJhbmdlU2VsZWN0ZWROb2Rlcz1mdW5jdGlvbihhKXt2YXIgYj1bXSxjPWEuc3RhcnRDb250YWluZXIsZD1hLmVuZENvbnRhaW5lcjtpZihjPT1kJiYiVFIiIT1jLnRhZ05hbWUpe2lmKGMuaGFzQ2hpbGROb2RlcygpJiYwIT09Yy5jaGlsZHJlbi5sZW5ndGgpe2Zvcih2YXIgZT1jLmNoaWxkcmVuLGY9YS5zdGFydE9mZnNldDtmPGEuZW5kT2Zmc2V0O2YrKyllW2ZdJiZiLnB1c2goZVtmXSk7cmV0dXJuIDA9PT1iLmxlbmd0aCYmYi5wdXNoKGMpLGJ9cmV0dXJuW2NdfWlmKGM9PWQmJiJUUiI9PWMudGFnTmFtZSl7dmFyIGc9Yy5jaGlsZE5vZGVzLGg9YS5zdGFydE9mZnNldDtpZihnLmxlbmd0aD5oJiZoPj0wKXt2YXIgaT1nW2hdO2lmKCJURCI9PWkudGFnTmFtZXx8IlRIIj09aS50YWdOYW1lKXJldHVybltpXX19Zm9yKDtjJiZjIT1kOyliLnB1c2goYz10aGlzLm5leHROb2RlKGMsZCkpO2ZvcihjPWEuc3RhcnRDb250YWluZXI7YyYmYyE9YS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjspYi51bnNoaWZ0KGMpLGM9Yy5wYXJlbnROb2RlO3JldHVybiBifSxhLkVkaXRhYmxlLnByb3RvdHlwZS5nZXRTZWxlY3RlZE5vZGVzPWZ1bmN0aW9uKCl7aWYod2luZG93LmdldFNlbGVjdGlvbil7dmFyIGI9d2luZG93LmdldFNlbGVjdGlvbigpO2lmKCFiLmlzQ29sbGFwc2VkKXtmb3IodmFyIGM9dGhpcy5nZXRSYW5nZXMoKSxkPVtdLGU9MDtlPGMubGVuZ3RoO2UrKylkPWEubWVyZ2UoZCx0aGlzLmdldFJhbmdlU2VsZWN0ZWROb2RlcyhjW2VdKSk7cmV0dXJuIGR9aWYodGhpcy5zZWxlY3Rpb25JbkVkaXRvcigpKXt2YXIgZj1iLmdldFJhbmdlQXQoMCkuc3RhcnRDb250YWluZXI7cmV0dXJuIDM9PWYubm9kZVR5cGU/W2YucGFyZW50Tm9kZV06W2ZdfX1yZXR1cm5bXX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uRWxlbWVudHM9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldFNlbGVjdGVkTm9kZXMoKSxjPVtdO3JldHVybiBhLmVhY2goYixhLnByb3h5KGZ1bmN0aW9uKGEsYil7aWYobnVsbCE9PWIpe3ZhciBkPXRoaXMuZ2V0RWxlbWVudEZyb21Ob2RlKGIpO2MuaW5kZXhPZihkKTwwJiZkIT10aGlzLiRlbGVtZW50LmdldCgwKSYmbnVsbCE9PWQmJmMucHVzaChkKX19LHRoaXMpKSwwPT09Yy5sZW5ndGgmJmMucHVzaCh0aGlzLiRlbGVtZW50LmdldCgwKSksY30sYS5FZGl0YWJsZS5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uTGluaz1mdW5jdGlvbigpe3ZhciBiPXRoaXMuZ2V0U2VsZWN0aW9uTGlua3MoKTtyZXR1cm4gYi5sZW5ndGg+MD9hKGJbMF0pLmF0dHIoImhyZWYiKTpudWxsfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5zYXZlU2VsZWN0aW9uPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc2VsZWN0aW9uRGlzYWJsZWQpe3RoaXMuc2F2ZWRSYW5nZXM9W107Zm9yKHZhciBhPXRoaXMuZ2V0UmFuZ2VzKCksYj0wO2I8YS5sZW5ndGg7YisrKXRoaXMuc2F2ZWRSYW5nZXMucHVzaChhW2JdLmNsb25lUmFuZ2UoKSl9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yZXN0b3JlU2VsZWN0aW9uPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc2VsZWN0aW9uRGlzYWJsZWQpe3ZhciBhLGIsYz10aGlzLmdldFNlbGVjdGlvbigpO2lmKHRoaXMuc2F2ZWRSYW5nZXMmJnRoaXMuc2F2ZWRSYW5nZXMubGVuZ3RoKWZvcihjLnJlbW92ZUFsbFJhbmdlcygpLGE9MCxiPXRoaXMuc2F2ZWRSYW5nZXMubGVuZ3RoO2I+YTthKz0xKWMuYWRkUmFuZ2UodGhpcy5zYXZlZFJhbmdlc1thXSl9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pbnNlcnRNYXJrZXJzQXRQb2ludD1mdW5jdGlvbihhKXt2YXIgYj1hLmNsaWVudFgsYz1hLmNsaWVudFk7dGhpcy5yZW1vdmVNYXJrZXJzKCk7dmFyIGQsZT1udWxsO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQuY2FyZXRQb3NpdGlvbkZyb21Qb2ludD8oZD1kb2N1bWVudC5jYXJldFBvc2l0aW9uRnJvbVBvaW50KGIsYyksZT1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLGUuc2V0U3RhcnQoZC5vZmZzZXROb2RlLGQub2Zmc2V0KSxlLnNldEVuZChkLm9mZnNldE5vZGUsZC5vZmZzZXQpKToidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50LmNhcmV0UmFuZ2VGcm9tUG9pbnQmJihkPWRvY3VtZW50LmNhcmV0UmFuZ2VGcm9tUG9pbnQoYixjKSxlPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCksZS5zZXRTdGFydChkLnN0YXJ0Q29udGFpbmVyLGQuc3RhcnRPZmZzZXQpLGUuc2V0RW5kKGQuc3RhcnRDb250YWluZXIsZC5zdGFydE9mZnNldCkpLG51bGwhPT1lJiYidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdy5nZXRTZWxlY3Rpb24pe3ZhciBmPXdpbmRvdy5nZXRTZWxlY3Rpb24oKTtmLnJlbW92ZUFsbFJhbmdlcygpLGYuYWRkUmFuZ2UoZSl9ZWxzZSBpZigidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKXRyeXtlPWRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCksZS5tb3ZlVG9Qb2ludChiLGMpO3ZhciBnPWUuZHVwbGljYXRlKCk7Zy5tb3ZlVG9Qb2ludChiLGMpLGUuc2V0RW5kUG9pbnQoIkVuZFRvRW5kIixnKSxlLnNlbGVjdCgpfWNhdGNoKGgpe310aGlzLnBsYWNlTWFya2VyKGUsITAsMCksdGhpcy5wbGFjZU1hcmtlcihlLCExLDApfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc2VsZWN0aW9uRGlzYWJsZWQpe3RoaXMuZm9jdXMoKTt2YXIgYT10aGlzLmdldFJhbmdlcygpO3RoaXMucmVtb3ZlTWFya2VycygpO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXRoaXMucGxhY2VNYXJrZXIoYVtiXSwhMCxiKSx0aGlzLnBsYWNlTWFya2VyKGFbYl0sITEsYil9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5oYXNTZWxlY3Rpb25CeU1hcmtlcnM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50LmZpbmQoJy5mLW1hcmtlcltkYXRhLXR5cGU9InRydWUiXScpO3JldHVybiBhLmxlbmd0aD4wPyEwOiExfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzPWZ1bmN0aW9uKGIpe2lmKHZvaWQgMD09PWImJihiPSEwKSwhdGhpcy5zZWxlY3Rpb25EaXNhYmxlZCl7dmFyIGM9dGhpcy4kZWxlbWVudC5maW5kKCcuZi1tYXJrZXJbZGF0YS10eXBlPSJ0cnVlIl0nKTtpZigwPT09Yy5sZW5ndGgpcmV0dXJuITE7dGhpcy4kZWxlbWVudC5pcygiOmZvY3VzIil8fHRoaXMuYnJvd3Nlci5tc2llfHx0aGlzLiRlbGVtZW50LmZvY3VzKCk7dmFyIGQ9dGhpcy5nZXRTZWxlY3Rpb24oKTshYiYmMT09PWMubGVuZ3RoJiYxPT09ZC5yYW5nZUNvdW50JiZ0aGlzLmdldFJhbmdlKCkuY29sbGFwc2VkJiZhKGNbMF0pLmF0dHIoImRhdGEtY29sbGFwc2VkIil8fCh0aGlzLmNsZWFyU2VsZWN0aW9uKCksYj0hMCk7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmLGc9YShjW2VdKS5kYXRhKCJpZCIpLGg9Y1tlXSxpPXRoaXMuJGVsZW1lbnQuZmluZCgnLmYtbWFya2VyW2RhdGEtdHlwZT0iZmFsc2UiXVtkYXRhLWlkPSInK2crJyJdJyk7aWYoZj1iP2RvY3VtZW50LmNyZWF0ZVJhbmdlKCk6dGhpcy5nZXRSYW5nZSgpLGkubGVuZ3RoPjApe2k9aVswXTt0cnl7Zi5zZXRTdGFydEJlZm9yZShoKSxmLnNldEVuZEJlZm9yZShpKX1jYXRjaChqKXt9fWImJmQuYWRkUmFuZ2UoZil9dGhpcy5yZW1vdmVNYXJrZXJzKCl9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5zZXRTZWxlY3Rpb249ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5nZXRTZWxlY3Rpb24oKTtpZihlKXt0aGlzLmNsZWFyU2VsZWN0aW9uKCk7dHJ5e2N8fChjPWEpLHZvaWQgMD09PWImJihiPTApLHZvaWQgMD09PWQmJihkPWIpO3ZhciBmPXRoaXMuZ2V0UmFuZ2UoKTtmLnNldFN0YXJ0KGEsYiksZi5zZXRFbmQoYyxkKSxlLmFkZFJhbmdlKGYpfWNhdGNoKGcpe319fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5idWlsZE1hcmtlcj1mdW5jdGlvbihiLGMsZCl7cmV0dXJuIHZvaWQgMD09PWQmJihkPSIiKSxhKCc8c3BhbiBjbGFzcz0iZi1tYXJrZXIiJytkKycgc3R5bGU9ImRpc3BsYXk6bm9uZTsgbGluZS1oZWlnaHQ6IDA7IiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIiBkYXRhLWlkPSInK2MrJyIgZGF0YS10eXBlPSInK2IrJyI+Jyxkb2N1bWVudClbMF19LGEuRWRpdGFibGUucHJvdG90eXBlLnBsYWNlTWFya2VyPWZ1bmN0aW9uKGEsYixjKXt0cnl7dmFyIGQ9YS5jbG9uZVJhbmdlKCk7ZC5jb2xsYXBzZShiKTt2YXIgZT0iIjthLmNvbGxhcHNlZCYmKGU9JyBkYXRhLWNvbGxhcHNlZD0idHJ1ZSInKSxkLmluc2VydE5vZGUodGhpcy5idWlsZE1hcmtlcihiLGMsZSkpfWNhdGNoKGYpe31yZXR1cm4gbnVsbH0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVtb3ZlTWFya2Vycz1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQuZmluZCgiLmYtbWFya2VyIikucmVtb3ZlKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLmdldFNlbGVjdGlvblRleHRJbmZvPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZD0hMSxlPSExO2lmKHdpbmRvdy5nZXRTZWxlY3Rpb24pe3ZhciBmPXdpbmRvdy5nZXRTZWxlY3Rpb24oKTtmLnJhbmdlQ291bnQmJihiPWYuZ2V0UmFuZ2VBdCgwKSxjPWIuY2xvbmVSYW5nZSgpLGMuc2VsZWN0Tm9kZUNvbnRlbnRzKGEpLGMuc2V0RW5kKGIuc3RhcnRDb250YWluZXIsYi5zdGFydE9mZnNldCksZD0iIj09PWMudG9TdHJpbmcoKSxjLnNlbGVjdE5vZGVDb250ZW50cyhhKSxjLnNldFN0YXJ0KGIuZW5kQ29udGFpbmVyLGIuZW5kT2Zmc2V0KSxlPSIiPT09Yy50b1N0cmluZygpKX1lbHNlIGRvY3VtZW50LnNlbGVjdGlvbiYmIkNvbnRyb2wiIT1kb2N1bWVudC5zZWxlY3Rpb24udHlwZSYmKGI9ZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCksYz1iLmR1cGxpY2F0ZSgpLGMubW92ZVRvRWxlbWVudFRleHQoYSksYy5zZXRFbmRQb2ludCgiRW5kVG9TdGFydCIsYiksZD0iIj09PWMudGV4dCxjLm1vdmVUb0VsZW1lbnRUZXh0KGEpLGMuc2V0RW5kUG9pbnQoIlN0YXJ0VG9FbmQiLGIpLGU9IiI9PT1jLnRleHQpO3JldHVybnthdFN0YXJ0OmQsYXRFbmQ6ZX19LGEuRWRpdGFibGUucHJvdG90eXBlLmVuZHNXaXRoPWZ1bmN0aW9uKGEsYil7cmV0dXJuLTEhPT1hLmluZGV4T2YoYixhLmxlbmd0aC1iLmxlbmd0aCl9fShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EuRWRpdGFibGUuaGV4VG9SR0I9ZnVuY3Rpb24oYSl7dmFyIGI9L14jPyhbYS1mXGRdKShbYS1mXGRdKShbYS1mXGRdKSQvaTthPWEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBiK2IrYytjK2QrZH0pO3ZhciBjPS9eIz8oW2EtZlxkXXsyfSkoW2EtZlxkXXsyfSkoW2EtZlxkXXsyfSkkL2kuZXhlYyhhKTtyZXR1cm4gYz97cjpwYXJzZUludChjWzFdLDE2KSxnOnBhcnNlSW50KGNbMl0sMTYpLGI6cGFyc2VJbnQoY1szXSwxNil9Om51bGx9LGEuRWRpdGFibGUuaGV4VG9SR0JTdHJpbmc9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5oZXhUb1JHQihhKTtyZXR1cm4gYj8icmdiKCIrYi5yKyIsICIrYi5nKyIsICIrYi5iKyIpIjoiIn0sYS5FZGl0YWJsZS5SR0JUb0hleD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybigiMCIrcGFyc2VJbnQoYSwxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMil9dHJ5e3JldHVybiBhJiYidHJhbnNwYXJlbnQiIT09YT8vXiNbMC05QS1GXXs2fSQvaS50ZXN0KGEpP2E6KGE9YS5tYXRjaCgvXnJnYlwoKFxkKyksXHMqKFxkKyksXHMqKFxkKylcKSQvKSwoIiMiK2IoYVsxXSkrYihhWzJdKStiKGFbM10pKS50b1VwcGVyQ2FzZSgpKToiIn1jYXRjaChjKXtyZXR1cm4gbnVsbH19LGEuRWRpdGFibGUuZ2V0SUV2ZXJzaW9uPWZ1bmN0aW9uKCl7dmFyIGEsYixjPS0xO3JldHVybiJNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXIiPT1uYXZpZ2F0b3IuYXBwTmFtZT8oYT1uYXZpZ2F0b3IudXNlckFnZW50LGI9bmV3IFJlZ0V4cCgiTVNJRSAoWzAtOV17MSx9W1xcLjAtOV17MCx9KSIpLG51bGwhPT1iLmV4ZWMoYSkmJihjPXBhcnNlRmxvYXQoUmVnRXhwLiQxKSkpOiJOZXRzY2FwZSI9PW5hdmlnYXRvci5hcHBOYW1lJiYoYT1uYXZpZ2F0b3IudXNlckFnZW50LGI9bmV3IFJlZ0V4cCgiVHJpZGVudC8uKnJ2OihbMC05XXsxLH1bXFwuMC05XXswLH0pIiksbnVsbCE9PWIuZXhlYyhhKSYmKGM9cGFyc2VGbG9hdChSZWdFeHAuJDEpKSksY30sYS5FZGl0YWJsZS5icm93c2VyPWZ1bmN0aW9uKCl7dmFyIGE9e307aWYodGhpcy5nZXRJRXZlcnNpb24oKT4wKWEubXNpZT0hMDtlbHNle3ZhciBiPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxjPS8oY2hyb21lKVsgXC9dKFtcdy5dKykvLmV4ZWMoYil8fC8od2Via2l0KVsgXC9dKFtcdy5dKykvLmV4ZWMoYil8fC8ob3BlcmEpKD86Lip2ZXJzaW9ufClbIFwvXShbXHcuXSspLy5leGVjKGIpfHwvKG1zaWUpIChbXHcuXSspLy5leGVjKGIpfHxiLmluZGV4T2YoImNvbXBhdGlibGUiKTwwJiYvKG1vemlsbGEpKD86Lio/IHJ2OihbXHcuXSspfCkvLmV4ZWMoYil8fFtdLGQ9e2Jyb3dzZXI6Y1sxXXx8IiIsdmVyc2lvbjpjWzJdfHwiMCJ9O2NbMV0mJihhW2QuYnJvd3Nlcl09ITApLHBhcnNlSW50KGQudmVyc2lvbiwxMCk8OSYmYS5tc2llJiYoYS5vbGRNc2llPSEwKSxhLmNocm9tZT9hLndlYmtpdD0hMDphLndlYmtpdCYmKGEuc2FmYXJpPSEwKX1yZXR1cm4gYX0sYS5FZGl0YWJsZS5pc0FycmF5PWZ1bmN0aW9uKGEpe3JldHVybiBhJiYhYS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgibGVuZ3RoIikmJiJvYmplY3QiPT10eXBlb2YgYSYmIm51bWJlciI9PXR5cGVvZiBhLmxlbmd0aH0sYS5FZGl0YWJsZS51bmlxPWZ1bmN0aW9uKGIpe3JldHVybiBhLmdyZXAoYixmdW5jdGlvbihjLGQpe3JldHVybiBkPT1hLmluQXJyYXkoYyxiKX0pfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthLkVkaXRhYmxlLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKGIpe2lmKHZvaWQgMCE9PWIpe2lmKHRoaXMub3B0aW9ucy5pbmxpbmVNb2RlfHx0aGlzLm9wdGlvbnMuZWRpdEluUG9wdXApaWYobnVsbCE9PWImJiJ0b3VjaGVuZCIhPT1iLnR5cGUpe3ZhciBjPWIucGFnZVgsZD1iLnBhZ2VZO2M8dGhpcy4kZWxlbWVudC5vZmZzZXQoKS5sZWZ0JiYoYz10aGlzLiRlbGVtZW50Lm9mZnNldCgpLmxlZnQpLGM+dGhpcy4kZWxlbWVudC5vZmZzZXQoKS5sZWZ0K3RoaXMuJGVsZW1lbnQud2lkdGgoKSYmKGM9dGhpcy4kZWxlbWVudC5vZmZzZXQoKS5sZWZ0K3RoaXMuJGVsZW1lbnQud2lkdGgoKSksZDx0aGlzLiRlbGVtZW50Lm9mZnNldC50b3AmJihkPXRoaXMuJGVsZW1lbnQub2Zmc2V0KCkudG9wKSxkPnRoaXMuJGVsZW1lbnQub2Zmc2V0KCkudG9wK3RoaXMuJGVsZW1lbnQuaGVpZ2h0KCkmJihkPXRoaXMuJGVsZW1lbnQub2Zmc2V0KCkudG9wK3RoaXMuJGVsZW1lbnQuaGVpZ2h0KCkpLDIwPmMmJihjPTIwKSwwPmQmJihkPTApLHRoaXMuc2hvd0J5Q29vcmRpbmF0ZXMoYyxkKSxhKCIuZnJvYWxhLWVkaXRvcjpub3QoLmYtYmFzaWMpIikuaGlkZSgpLHRoaXMuJGVkaXRvci5zaG93KCksMCE9PXRoaXMub3B0aW9ucy5idXR0b25zLmxlbmd0aHx8dGhpcy5vcHRpb25zLmVkaXRJblBvcHVwfHx0aGlzLiRlZGl0b3IuaGlkZSgpfWVsc2UgYSgiLmZyb2FsYS1lZGl0b3I6bm90KC5mLWJhc2ljKSIpLmhpZGUoKSx0aGlzLiRlZGl0b3Iuc2hvdygpLHRoaXMucmVwb3NpdGlvbkVkaXRvcigpO3RoaXMuaGlkZVBvcHVwcygpLHRoaXMub3B0aW9ucy5lZGl0SW5Qb3B1cHx8dGhpcy5zaG93RWRpdFBvcHVwV3JhcHBlcigpLHRoaXMuJGJ0dG5fd3JhcHBlci5zaG93KCksdGhpcy5yZWZyZXNoQnV0dG9ucygpLHRoaXMuaW1hZ2VNb2RlPSExfX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaGlkZURyb3Bkb3ducz1mdW5jdGlvbigpe3RoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCIuZnItZHJvcGRvd24gLmZyLXRyaWdnZXIiKS5yZW1vdmVDbGFzcygiYWN0aXZlIiksdGhpcy4kYnR0bl93cmFwcGVyLmZpbmQoIi5mci1kcm9wZG93biAuZnItdHJpZ2dlciIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluaXRpYWxpemVkPyh2b2lkIDA9PT1hJiYoYT0hMCksYT90aGlzLmhpZGVPdGhlckVkaXRvcnMoKToodGhpcy5jbG9zZUltYWdlTW9kZSgpLHRoaXMuaW1hZ2VNb2RlPSExKSx0aGlzLiRwb3B1cF9lZGl0b3IuaGlkZSgpLHRoaXMuaGlkZVBvcHVwcyghMSksdGhpcy5oaWRlRHJvcGRvd25zKCksdm9pZCh0aGlzLmxpbms9ITEpKTohMX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaGlkZU90aGVyRWRpdG9ycz1mdW5jdGlvbigpe2Zvcih2YXIgYj0xO2I8PWEuRWRpdGFibGUuY291bnQ7YisrKWIhPXRoaXMuX2lkJiZhKHdpbmRvdykudHJpZ2dlcigiaGlkZS4iK2IpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5oaWRlQnR0bldyYXBwZXI9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuaW5saW5lTW9kZSYmdGhpcy4kYnR0bl93cmFwcGVyLmhpZGUoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc2hvd0J0dG5XcmFwcGVyPWZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmlubGluZU1vZGUmJnRoaXMuJGJ0dG5fd3JhcHBlci5zaG93KCl9LGEuRWRpdGFibGUucHJvdG90eXBlLnNob3dFZGl0UG9wdXBXcmFwcGVyPWZ1bmN0aW9uKCl7dGhpcy4kZWRpdF9wb3B1cF93cmFwcGVyJiYodGhpcy4kZWRpdF9wb3B1cF93cmFwcGVyLnNob3coKSxzZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLiRlZGl0X3BvcHVwX3dyYXBwZXIuZmluZCgiaW5wdXQiKS52YWwodGhpcy4kZWxlbWVudC50ZXh0KCkpLmZvY3VzKCkuc2VsZWN0KCl9LHRoaXMpLDEpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaGlkZVBvcHVwcz1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT0hMCksYSYmdGhpcy5oaWRlQnR0bldyYXBwZXIoKSx0aGlzLnJhaXNlRXZlbnQoImhpZGVQb3B1cHMiKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc2hvd0VkaXRQb3B1cD1mdW5jdGlvbigpe3RoaXMuc2hvd0VkaXRQb3B1cFdyYXBwZXIoKX19KGpRdWVyeSksZnVuY3Rpb24oYSl7YS5FZGl0YWJsZS5wcm90b3R5cGUuZ2V0Qm91bmRpbmdSZWN0PWZ1bmN0aW9uKCl7dmFyIGI7aWYodGhpcy5pc0xpbmspe2I9e307dmFyIGM9dGhpcy4kZWxlbWVudDtiLmxlZnQ9Yy5vZmZzZXQoKS5sZWZ0LWEod2luZG93KS5zY3JvbGxMZWZ0KCksYi50b3A9Yy5vZmZzZXQoKS50b3AtYSh3aW5kb3cpLnNjcm9sbFRvcCgpLGIud2lkdGg9Yy5vdXRlcldpZHRoKCksYi5oZWlnaHQ9cGFyc2VJbnQoYy5jc3MoInBhZGRpbmctdG9wIikucmVwbGFjZSgicHgiLCIiKSwxMCkrYy5oZWlnaHQoKSxiLnJpZ2h0PTEsYi5ib3R0b209MSxiLm9rPSEwfWVsc2UgaWYodGhpcy5nZXRSYW5nZSgpLmNvbGxhcHNlZCl7dmFyIGQ9YSh0aGlzLmdldFNlbGVjdGlvbkVsZW1lbnQoKSk7dGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCk7dmFyIGU9dGhpcy4kZWxlbWVudC5maW5kKCIuZi1tYXJrZXI6Zmlyc3QiKTtlLmNzcygiZGlzcGxheSIsImlubGluZSIpO3ZhciBmPWUub2Zmc2V0KCk7ZS5jc3MoImRpc3BsYXkiLCJub25lIiksYj17fSxiLmxlZnQ9Zi5sZWZ0LWEod2luZG93KS5zY3JvbGxMZWZ0KCksYi53aWR0aD0wLGIuaGVpZ2h0PShwYXJzZUludChkLmNzcygibGluZS1oZWlnaHQiKS5yZXBsYWNlKCJweCIsIiIpLDEwKXx8MTApLTEwLWEod2luZG93KS5zY3JvbGxUb3AoKSxiLnRvcD1mLnRvcCxiLnJpZ2h0PTEsYi5ib3R0b209MSxiLm9rPSEwLHRoaXMucmVtb3ZlTWFya2VycygpfWVsc2UgYj10aGlzLmdldFJhbmdlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIGJ9LGEuRWRpdGFibGUucHJvdG90eXBlLnJlcG9zaXRpb25FZGl0b3I9ZnVuY3Rpb24oYil7dmFyIGMsZCxlO2lmKHRoaXMub3B0aW9ucy5pbmxpbmVNb2RlfHxiKXtpZihjPXRoaXMuZ2V0Qm91bmRpbmdSZWN0KCksdGhpcy5zaG93QnR0bldyYXBwZXIoKSxjLm9rfHxjLmxlZnQ+PTAmJmMudG9wPj0wJiZjLnJpZ2h0PjAmJmMuYm90dG9tPjApZD1jLmxlZnQrYy53aWR0aC8yLGU9Yy50b3ArYy5oZWlnaHQsZCs9YSh3aW5kb3cpLnNjcm9sbExlZnQoKSxlKz1hKHdpbmRvdykuc2Nyb2xsVG9wKCksdGhpcy5zaG93QnlDb29yZGluYXRlcyhkLGUpO2Vsc2UgaWYodGhpcy5vcHRpb25zLmFsd2F5c1Zpc2libGUpdGhpcy5oaWRlKCk7ZWxzZXt2YXIgZj10aGlzLiRlbGVtZW50Lm9mZnNldCgpO3RoaXMuc2hvd0J5Q29vcmRpbmF0ZXMoZi5sZWZ0LGYudG9wKzEwKX0wPT09dGhpcy5vcHRpb25zLmJ1dHRvbnMubGVuZ3RoJiZ0aGlzLmhpZGUoKX19LGEuRWRpdGFibGUucHJvdG90eXBlLnNob3dCeUNvb3JkaW5hdGVzPWZ1bmN0aW9uKGIsYyl7Yi09MjAsYys9MTU7dmFyIGQ9TWF0aC5tYXgodGhpcy4kcG9wdXBfZWRpdG9yLndpZHRoKCksMjUwKTtiK2Q+PWEod2luZG93KS53aWR0aCgpLTUwJiZiKzQwLWQ+MD8odGhpcy4kcG9wdXBfZWRpdG9yLmFkZENsYXNzKCJyaWdodC1zaWRlIiksYj1hKHdpbmRvdykud2lkdGgoKS0oYis0MCksdGhpcy4kcG9wdXBfZWRpdG9yLmNzcygidG9wIixjKSx0aGlzLiRwb3B1cF9lZGl0b3IuY3NzKCJyaWdodCIsYiksdGhpcy4kcG9wdXBfZWRpdG9yLmNzcygibGVmdCIsImF1dG8iKSk6YitkPGEod2luZG93KS53aWR0aCgpLTUwPyh0aGlzLiRwb3B1cF9lZGl0b3IucmVtb3ZlQ2xhc3MoInJpZ2h0LXNpZGUiKSx0aGlzLiRwb3B1cF9lZGl0b3IuY3NzKCJ0b3AiLGMpLHRoaXMuJHBvcHVwX2VkaXRvci5jc3MoImxlZnQiLGIpLHRoaXMuJHBvcHVwX2VkaXRvci5jc3MoInJpZ2h0IiwiYXV0byIpKToodGhpcy4kcG9wdXBfZWRpdG9yLnJlbW92ZUNsYXNzKCJyaWdodC1zaWRlIiksdGhpcy4kcG9wdXBfZWRpdG9yLmNzcygidG9wIixjKSx0aGlzLiRwb3B1cF9lZGl0b3IuY3NzKCJsZWZ0IixNYXRoLm1heChhKHdpbmRvdykud2lkdGgoKS1kLDEwKS8yKSx0aGlzLiRwb3B1cF9lZGl0b3IuY3NzKCJyaWdodCIsImF1dG8iKSksdGhpcy4kcG9wdXBfZWRpdG9yLnNob3coKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucG9zaXRpb25Qb3B1cD1mdW5jdGlvbihiKXtpZihhKHRoaXMuJGVkaXRvci5maW5kKCdidXR0b24uZnItYnR0bltkYXRhLWNtZD0iJytiKyciXScpKS5sZW5ndGgpe3ZhciBjPXRoaXMuJGVkaXRvci5maW5kKCdidXR0b24uZnItYnR0bltkYXRhLWNtZD0iJytiKyciXScpLGQ9Yy53aWR0aCgpLGU9Yy5oZWlnaHQoKS0xNSxmPWMub2Zmc2V0KCkubGVmdCtkLzIsZz1jLm9mZnNldCgpLnRvcCtlO3RoaXMuc2hvd0J5Q29vcmRpbmF0ZXMoZixnKX19fShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EuRWRpdGFibGUuaW1hZ2VfY29tbWFuZHM9e2Zsb2F0SW1hZ2VMZWZ0Ont0aXRsZToiRmxvYXQgTGVmdCIsaWNvbjp7dHlwZToiZm9udCIsdmFsdWU6ImZhIGZhLWFsaWduLWxlZnQifX0sZmxvYXRJbWFnZU5vbmU6e3RpdGxlOiJGbG9hdCBOb25lIixpY29uOnt0eXBlOiJmb250Iix2YWx1ZToiZmEgZmEtYWxpZ24tanVzdGlmeSJ9fSxmbG9hdEltYWdlUmlnaHQ6e3RpdGxlOiJGbG9hdCBSaWdodCIsaWNvbjp7dHlwZToiZm9udCIsdmFsdWU6ImZhIGZhLWFsaWduLXJpZ2h0In19LGxpbmtJbWFnZTp7dGl0bGU6Ikluc2VydCBMaW5rIixpY29uOnt0eXBlOiJmb250Iix2YWx1ZToiZmEgZmEtbGluayJ9fSxyZXBsYWNlSW1hZ2U6e3RpdGxlOiJSZXBsYWNlIEltYWdlIixpY29uOnt0eXBlOiJmb250Iix2YWx1ZToiZmEgZmEtZXhjaGFuZ2UifX0scmVtb3ZlSW1hZ2U6e3RpdGxlOiJSZW1vdmUgSW1hZ2UiLGljb246e3R5cGU6ImZvbnQiLHZhbHVlOiJmYSBmYS10cmFzaC1vIn19fSxhLkVkaXRhYmxlLkRFRkFVTFRTPWEuZXh0ZW5kKGEuRWRpdGFibGUuREVGQVVMVFMse2FsbG93ZWRJbWFnZVR5cGVzOlsianBlZyIsImpwZyIsInBuZyIsImdpZiJdLGltYWdlQnV0dG9uczpbImZsb2F0SW1hZ2VMZWZ0IiwiZmxvYXRJbWFnZU5vbmUiLCJmbG9hdEltYWdlUmlnaHQiLCJsaW5rSW1hZ2UiLCJyZXBsYWNlSW1hZ2UiLCJyZW1vdmVJbWFnZSJdLGltYWdlRGVsZXRlVVJMOm51bGwsaW1hZ2VEZWxldGVQYXJhbXM6e30saW1hZ2VNb3ZlOiEwLGltYWdlUmVzaXplOiEwLGltYWdlTGluazohMCxpbWFnZVRpdGxlOiEwLGltYWdlVXBsb2FkOiEwLGltYWdlVXBsb2FkUGFyYW1zOnt9LGltYWdlVXBsb2FkUGFyYW06ImZpbGUiLGltYWdlVXBsb2FkVG9TMzohMSxpbWFnZVVwbG9hZFVSTDoiaHR0cDovL2kuZnJvYWxhLmNvbS91cGxvYWQiLG1heEltYWdlU2l6ZToxMDQ4NTc2MCxwYXN0ZUltYWdlOiEwLHRleHROZWFySW1hZ2U6ITB9KSxhLkVkaXRhYmxlLnByb3RvdHlwZS5oaWRlSW1hZ2VFZGl0b3JQb3B1cD1mdW5jdGlvbigpe3RoaXMuJGltYWdlX2VkaXRvciYmdGhpcy4kaW1hZ2VfZWRpdG9yLmhpZGUoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc2hvd0ltYWdlRWRpdG9yUG9wdXA9ZnVuY3Rpb24oKXt0aGlzLiRpbWFnZV9lZGl0b3ImJnRoaXMuJGltYWdlX2VkaXRvci5zaG93KCksdGhpcy5vcHRpb25zLmltYWdlTW92ZXx8dGhpcy4kZWxlbWVudC5hdHRyKCJjb250ZW50ZWRpdGFibGUiLCExKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc2hvd0ltYWdlV3JhcHBlcj1mdW5jdGlvbigpe3RoaXMuJGltYWdlX3dyYXBwZXImJnRoaXMuJGltYWdlX3dyYXBwZXIuc2hvdygpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5oaWRlSW1hZ2VXcmFwcGVyPWZ1bmN0aW9uKGEpe3RoaXMuJGltYWdlX3dyYXBwZXImJih0aGlzLiRlbGVtZW50LmF0dHIoImRhdGEtcmVzaXplIil8fGF8fCh0aGlzLmNsb3NlSW1hZ2VNb2RlKCksdGhpcy5pbWFnZU1vZGU9ITEpLHRoaXMuJGltYWdlX3dyYXBwZXIuaGlkZSgpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc2hvd0luc2VydEltYWdlPWZ1bmN0aW9uKCl7dGhpcy5oaWRlUG9wdXBzKCksdGhpcy5zaG93SW1hZ2VXcmFwcGVyKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLnNob3dJbWFnZUVkaXRvcj1mdW5jdGlvbigpe3RoaXMuaGlkZVBvcHVwcygpLHRoaXMuc2hvd0ltYWdlRWRpdG9yUG9wdXAoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5zZXJ0SW1hZ2VIVE1MPWZ1bmN0aW9uKCl7dmFyIGI9JzxkaXYgY2xhc3M9ImZyb2FsYS1wb3B1cCBmcm9hbGEtaW1hZ2UtcG9wdXAiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+PGg0PjxzcGFuIGRhdGEtdGV4dD0idHJ1ZSI+SW5zZXJ0IGltYWdlPC9zcGFuPjxzcGFuIGRhdGEtdGV4dD0idHJ1ZSI+VXBsb2FkaW5nIGltYWdlPC9zcGFuPjxpIHRpdGxlPSJDYW5jZWwiIGNsYXNzPSJmYSBmYS10aW1lcyIgaWQ9ImYtaW1hZ2UtY2xvc2UtJyt0aGlzLl9pZCsnIj48L2k+PC9oND4nO3JldHVybiBiKz0nPGRpdiBpZD0iZi1pbWFnZS1saXN0LScrdGhpcy5faWQrJyI+Jyx0aGlzLm9wdGlvbnMuaW1hZ2VVcGxvYWQmJihiKz0nPGRpdiBjbGFzcz0iZi1wb3B1cC1saW5lIGRyb3AtdXBsb2FkIj4nLGIrPSc8ZGl2IGNsYXNzPSJmLXVwbG9hZCIgaWQ9ImYtdXBsb2FkLWRpdi0nK3RoaXMuX2lkKyciPjxzdHJvbmcgZGF0YS10ZXh0PSJ0cnVlIj5Ecm9wIEltYWdlPC9zdHJvbmc+PGJyPig8c3BhbiBkYXRhLXRleHQ9InRydWUiPm9yIGNsaWNrPC9zcGFuPik8Zm9ybSB0YXJnZXQ9ImZyYW1lLScrdGhpcy5faWQrJyIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSIgZW5jb2Rpbmc9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0iJyt0aGlzLm9wdGlvbnMuaW1hZ2VVcGxvYWRVUkwrJyIgbWV0aG9kPSJwb3N0IiBpZD0iZi11cGxvYWQtZm9ybS0nK3RoaXMuX2lkKyciPjxpbnB1dCBpZD0iZi1maWxlLXVwbG9hZC0nK3RoaXMuX2lkKyciIHR5cGU9ImZpbGUiIG5hbWU9IicrdGhpcy5vcHRpb25zLmltYWdlVXBsb2FkUGFyYW0rJyIgYWNjZXB0PSJpbWFnZS8qIj48L2Zvcm0+PC9kaXY+Jyx0aGlzLmJyb3dzZXIubXNpZSYmYS5FZGl0YWJsZS5nZXRJRXZlcnNpb24oKTw9OSYmKGIrPSc8aWZyYW1lIGlkPSJmcmFtZS0nK3RoaXMuX2lkKyciIG5hbWU9ImZyYW1lLScrdGhpcy5faWQrJyIgc3JjPSJqYXZhc2NyaXB0OmZhbHNlOyIgc3R5bGU9IndpZHRoOjA7IGhlaWdodDowOyBib3JkZXI6MHB4IHNvbGlkICNGRkY7IHBvc2l0aW9uOiBmaXhlZDsgei1pbmRleDogLTE7Ij48L2lmcmFtZT4nKSxiKz0iPC9kaXY+IiksdGhpcy5vcHRpb25zLmltYWdlTGluayYmKGIrPSc8ZGl2IGNsYXNzPSJmLXBvcHVwLWxpbmUiPjxsYWJlbD48c3BhbiBkYXRhLXRleHQ9InRydWUiPkVudGVyIFVSTDwvc3Bhbj46IDwvbGFiZWw+PGlucHV0IGlkPSJmLWltYWdlLXVybC0nK3RoaXMuX2lkKyciIHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJodHRwOi8vZXhhbXBsZS5jb20iPjxidXR0b24gY2xhc3M9ImYtYnJvd3NlIiBpZD0iZi1icm93c2VyLScrdGhpcy5faWQrJyI+PGkgY2xhc3M9ImZhIGZhLXNlYXJjaCI+PC9pPjwvYnV0dG9uPjxidXR0b24gZGF0YS10ZXh0PSJ0cnVlIiBjbGFzcz0iZi1vayIgaWQ9ImYtaW1hZ2Utb2stJyt0aGlzLl9pZCsnIj5PSzwvYnV0dG9uPjwvZGl2PicpLGIrPSI8L2Rpdj4iLGIrPSc8cCBjbGFzcz0iZi1wcm9ncmVzcyIgaWQ9ImYtcHJvZ3Jlc3MtJyt0aGlzLl9pZCsnIj48c3Bhbj48L3NwYW4+PC9wPicsYis9IjwvZGl2PiJ9LGEuRWRpdGFibGUucHJvdG90eXBlLmlGcmFtZUxvYWQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRpbWFnZV93cmFwcGVyLmZpbmQoImlmcmFtZSNmcmFtZS0iK3RoaXMuX2lkKTtpZighYS5hdHRyKCJkYXRhLWxvYWRlZCIpKXJldHVybiBhLmF0dHIoImRhdGEtbG9hZGVkIiwhMCksITE7dHJ5e3ZhciBiPXRoaXMuJGltYWdlX3dyYXBwZXIuZmluZCgiI2YtdXBsb2FkLWZvcm0tIit0aGlzLl9pZCk7aWYodGhpcy5vcHRpb25zLmltYWdlVXBsb2FkVG9TMyl7dmFyIGM9Yi5hdHRyKCJhY3Rpb24iKSxkPWIuZmluZCgnaW5wdXRbbmFtZT0ia2V5Il0nKS52YWwoKSxlPWMrZDt0aGlzLndyaXRlSW1hZ2UoZSksdGhpcy5vcHRpb25zLmltYWdlVXBsb2FkVG9TMy5jYWxsYmFjayYmdGhpcy5vcHRpb25zLmltYWdlVXBsb2FkVG9TMy5jYWxsYmFjay5jYWxsKHRoaXMsZSxkKX1lbHNle3ZhciBmPWEuY29udGVudHMoKS50ZXh0KCk7dGhpcy5wYXJzZUltYWdlUmVzcG9uc2UoZil9fWNhdGNoKGcpe3RoaXMudGhyb3dJbWFnZUVycm9yKDcpfX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5pdEltYWdlPWZ1bmN0aW9uKCl7dGhpcy5idWlsZEluc2VydEltYWdlKCksKCF0aGlzLmlzTGlua3x8dGhpcy5pc0ltYWdlKSYmKHRoaXMuaW5pdEltYWdlRXZlbnRzKCksdGhpcy5pbml0SW1hZ2VQb3B1cCgpKSx0aGlzLmFkZExpc3RlbmVyKCJkZXN0cm95Iix0aGlzLmRlc3Ryb3lJbWFnZSl9LGEuRWRpdGFibGUuaW5pdGlhbGl6ZXJzLnB1c2goYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5pdEltYWdlKSxhLkVkaXRhYmxlLnByb3RvdHlwZS5kZXN0cm95SW1hZ2U9ZnVuY3Rpb24oKXt0aGlzLiRpbWFnZV9lZGl0b3IuaHRtbCgiIikucmVtb3ZlRGF0YSgpLnJlbW92ZSgpLHRoaXMuJGltYWdlX3dyYXBwZXIuaHRtbCgiIikucmVtb3ZlRGF0YSgpLnJlbW92ZSgpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5idWlsZEluc2VydEltYWdlPWZ1bmN0aW9uKCl7dGhpcy4kaW1hZ2Vfd3JhcHBlcj1hKHRoaXMuaW5zZXJ0SW1hZ2VIVE1MKCkpLHRoaXMuJHBvcHVwX2VkaXRvci5hcHBlbmQodGhpcy4kaW1hZ2Vfd3JhcHBlcik7dmFyIGI9dGhpcztpZih0aGlzLiRpbWFnZV93cmFwcGVyLm9uKCJtb3VzZXVwIHRvdWNoZW5kIixhLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuaXNSZXNpemluZygpfHxhLnN0b3BQcm9wYWdhdGlvbigpfSx0aGlzKSksdGhpcy5hZGRMaXN0ZW5lcigiaGlkZVBvcHVwcyIsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuaGlkZUltYWdlV3JhcHBlcighMCl9KSx0aGlzKSx0aGlzLiRwcm9ncmVzc19iYXI9dGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCJwI2YtcHJvZ3Jlc3MtIit0aGlzLl9pZCksdGhpcy5vcHRpb25zLmltYWdlVXBsb2FkKXtpZih0aGlzLmJyb3dzZXIubXNpZSYmYS5FZGl0YWJsZS5nZXRJRXZlcnNpb24oKTw9OSl7dmFyIGM9dGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCJpZnJhbWUiKS5nZXQoMCk7Yy5hdHRhY2hFdmVudD9jLmF0dGFjaEV2ZW50KCJvbmxvYWQiLGZ1bmN0aW9uKCl7Yi5pRnJhbWVMb2FkKCl9KTpjLm9ubG9hZD1mdW5jdGlvbigpe2IuaUZyYW1lTG9hZCgpfX10aGlzLiRpbWFnZV93cmFwcGVyLm9uKCJjaGFuZ2UiLCdpbnB1dFt0eXBlPSJmaWxlIl0nLGZ1bmN0aW9uKCl7aWYodm9pZCAwIT09dGhpcy5maWxlcyliLnVwbG9hZEltYWdlKHRoaXMuZmlsZXMpO2Vsc2V7dmFyIGM9YSh0aGlzKS5wYXJlbnRzKCJmb3JtIik7Yy5maW5kKCdpbnB1dFt0eXBlPSJoaWRkZW4iXScpLnJlbW92ZSgpO3ZhciBkO2ZvcihkIGluIGIub3B0aW9ucy5pbWFnZVVwbG9hZFBhcmFtcyljLnByZXBlbmQoJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9IicrZCsnIiB2YWx1ZT0iJytiLm9wdGlvbnMuaW1hZ2VVcGxvYWRQYXJhbXNbZF0rJyIgLz4nKTtpZihiLm9wdGlvbnMuaW1hZ2VVcGxvYWRUb1MzIT09ITEpe2ZvcihkIGluIGIub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzMucGFyYW1zKWMucHJlcGVuZCgnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iJytkKyciIHZhbHVlPSInK2Iub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzMucGFyYW1zW2RdKyciIC8+Jyk7Yy5wcmVwZW5kKCc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJzdWNjZXNzX2FjdGlvbl9zdGF0dXMiIHZhbHVlPSIyMDEiIC8+JyksYy5wcmVwZW5kKCc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJYLVJlcXVlc3RlZC1XaXRoIiB2YWx1ZT0ieGhyIiAvPicpLGMucHJlcGVuZCgnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iQ29udGVudC1UeXBlIiB2YWx1ZT0iIiAvPicpLGMucHJlcGVuZCgnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ia2V5IiB2YWx1ZT0iJytiLm9wdGlvbnMuaW1hZ2VVcGxvYWRUb1MzLmtleVN0YXJ0KyhuZXcgRGF0ZSkuZ2V0VGltZSgpKyItIithKHRoaXMpLnZhbCgpLm1hdGNoKC9bXlwvXFxdKyQvKSsnIiAvPicpfWVsc2UgYy5wcmVwZW5kKCc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJYSFJfQ09SU19UUkFSR0VUT1JJR0lOIiB2YWx1ZT0iJyt3aW5kb3cubG9jYXRpb24uaHJlZisnIiAvPicpO2Iuc2hvd0luc2VydEltYWdlKCksYi5zaG93SW1hZ2VMb2FkZXIoITApLGIuZGlzYWJsZSgpLGMuc3VibWl0KCl9YSh0aGlzKS52YWwoIiIpfSl9dGhpcy5idWlsZERyYWdVcGxvYWQoKSx0aGlzLiRpbWFnZV93cmFwcGVyLm9uKCJtb3VzZXVwIGtleWRvd24iLCIjZi1pbWFnZS11cmwtIit0aGlzLl9pZCxhLnByb3h5KGZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2g7YiYmMjc9PT1ifHxhLnN0b3BQcm9wYWdhdGlvbigpfSx0aGlzKSksdGhpcy4kaW1hZ2Vfd3JhcHBlci5vbigiY2xpY2siLCIjZi1pbWFnZS1vay0iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLndyaXRlSW1hZ2UodGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCIjZi1pbWFnZS11cmwtIit0aGlzLl9pZCkudmFsKCksITApfSx0aGlzKSksdGhpcy4kaW1hZ2Vfd3JhcHBlci5vbigiY2xpY2siLCIjZi1pbWFnZS1jbG9zZS0iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Rpc2FibGVkPyExOih0aGlzLiRidHRuX3dyYXBwZXIuc2hvdygpLHRoaXMuaGlkZUltYWdlV3JhcHBlcighMCksdGhpcy5vcHRpb25zLmlubGluZU1vZGUmJjA9PT10aGlzLm9wdGlvbnMuYnV0dG9ucy5sZW5ndGgmJih0aGlzLmltYWdlTW9kZT90aGlzLnNob3dJbWFnZUVkaXRvcigpOnRoaXMuaGlkZSgpKSx0aGlzLmltYWdlTW9kZXx8dGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCksdm9pZCh0aGlzLm9wdGlvbnMuaW5saW5lTW9kZXx8dGhpcy5pbWFnZU1vZGU/dGhpcy5pbWFnZU1vZGUmJnRoaXMuc2hvd0ltYWdlRWRpdG9yKCk6dGhpcy5oaWRlKCkpKX0sdGhpcykpLHRoaXMuJGltYWdlX3dyYXBwZXIub24oImNsaWNrIixmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfSksdGhpcy4kaW1hZ2Vfd3JhcHBlci5vbigiY2xpY2siLCIqIixmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfSl9LGEuRWRpdGFibGUucHJvdG90eXBlLmRlbGV0ZUltYWdlPWZ1bmN0aW9uKGIpe2lmKHRoaXMub3B0aW9ucy5pbWFnZURlbGV0ZVVSTCl7dmFyIGM9dGhpcy5vcHRpb25zLmltYWdlRGVsZXRlUGFyYW1zO2MuaW5mbz1iLmRhdGEoImluZm8iKSxjLnNyYz1iLmF0dHIoInNyYyIpLGEuYWpheCh7dHlwZToiUE9TVCIsdXJsOnRoaXMub3B0aW9ucy5pbWFnZURlbGV0ZVVSTCxkYXRhOmMsY3Jvc3NEb21haW46dGhpcy5vcHRpb25zLmNyb3NzRG9tYWluLHhockZpZWxkczp7d2l0aENyZWRlbnRpYWxzOnRoaXMub3B0aW9ucy53aXRoQ3JlZGVudGlhbHN9LGhlYWRlcnM6dGhpcy5vcHRpb25zLmhlYWRlcnN9KS5kb25lKGEucHJveHkoZnVuY3Rpb24oYSl7Yi5wYXJlbnQoKS5wYXJlbnQoKS5oYXNDbGFzcygiZi1pbWFnZS1saXN0Iik/Yi5wYXJlbnQoKS5yZW1vdmUoKTpiLnBhcmVudCgpLnJlbW92ZUNsYXNzKCJmLWltZy1kZWxldGluZyIpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZURlbGV0ZVN1Y2Nlc3MiLFthXSwhMSl9LHRoaXMpKS5mYWlsKGEucHJveHkoZnVuY3Rpb24oKXtiLnBhcmVudCgpLnJlbW92ZUNsYXNzKCJmLWltZy1kZWxldGluZyIpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZURlbGV0ZUVycm9yIixbIkVycm9yIGR1cmluZyBpbWFnZSBkZWxldGUuIl0sITEpfSx0aGlzKSl9ZWxzZSBiLnBhcmVudCgpLnJlbW92ZUNsYXNzKCJmLWltZy1kZWxldGluZyIpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZURlbGV0ZUVycm9yIixbIk1pc3NpbmcgaW1hZ2VEZWxldGVVUkwgb3B0aW9uLiJdLCExKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW1hZ2VIYW5kbGU9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9YSgnPHNwYW4gZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+JykuYWRkQ2xhc3MoImYtaW1nLWhhbmRsZSIpLm9uKHttb3Zlc3RhcnQ6ZnVuY3Rpb24oYyl7Yi5oaWRlKCksYi4kZWxlbWVudC5hZGRDbGFzcygiZi1ub24tc2VsZWN0YWJsZSIpLmF0dHIoImNvbnRlbnRlZGl0YWJsZSIsITEpLGIuJGVsZW1lbnQuYXR0cigiZGF0YS1yZXNpemUiLCEwKSxhKHRoaXMpLmF0dHIoImRhdGEtc3RhcnQteCIsYy5zdGFydFgpLGEodGhpcykuYXR0cigiZGF0YS1zdGFydC15IixjLnN0YXJ0WSl9LG1vdmU6ZnVuY3Rpb24oYyl7dmFyIGQ9YSh0aGlzKSxlPWMucGFnZVgtcGFyc2VJbnQoZC5hdHRyKCJkYXRhLXN0YXJ0LXgiKSwxMCk7ZC5hdHRyKCJkYXRhLXN0YXJ0LXgiLGMucGFnZVgpLGQuYXR0cigiZGF0YS1zdGFydC15IixjLnBhZ2VZKTt2YXIgZj1kLnByZXZBbGwoImltZyIpLGc9Zi53aWR0aCgpO2QuaGFzQ2xhc3MoImYtaC1uZSIpfHxkLmhhc0NsYXNzKCJmLWgtc2UiKT9mLmF0dHIoIndpZHRoIixnK2UpOmYuYXR0cigid2lkdGgiLGctZSksYi50cmlnZ2VyRXZlbnQoImltYWdlUmVzaXplIixbXSwhMSl9LG1vdmVlbmQ6ZnVuY3Rpb24oKXthKHRoaXMpLnJlbW92ZUF0dHIoImRhdGEtc3RhcnQteCIpLGEodGhpcykucmVtb3ZlQXR0cigiZGF0YS1zdGFydC15IiksYi4kZWxlbWVudC5yZW1vdmVDbGFzcygiZi1ub24tc2VsZWN0YWJsZSIpLGIuaXNJbWFnZXx8Yi4kZWxlbWVudC5hdHRyKCJjb250ZW50ZWRpdGFibGUiLCEwKSxiLnRyaWdnZXJFdmVudCgiaW1hZ2VSZXNpemVFbmQiKSxiLnNhdmVVbmRvU3RlcCgpLGEodGhpcykudHJpZ2dlcigibW91c2V1cCIpfSx0b3VjaGVuZDpmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlcigibW92ZWVuZCIpfX0pO3JldHVybiBjfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5kaXNhYmxlSW1hZ2VSZXNpemU9ZnVuY3Rpb24oKXtpZih0aGlzLmJyb3dzZXIubW96aWxsYSl0cnl7ZG9jdW1lbnQuZXhlY0NvbW1hbmQoImVuYWJsZU9iamVjdFJlc2l6aW5nIiwhMSwhMSksZG9jdW1lbnQuZXhlY0NvbW1hbmQoImVuYWJsZUlubGluZVRhYmxlRWRpdGluZyIsITEsITEpfWNhdGNoKGEpe319LGEuRWRpdGFibGUucHJvdG90eXBlLmlzUmVzaXppbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWxlbWVudC5hdHRyKCJkYXRhLXJlc2l6ZSIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5nZXRJbWFnZUNsYXNzPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3BsaXQoIiAiKTtyZXR1cm4gYi5pbmRleE9mKCJmci1maXIiKT49MD8iZnItZmlyIjpiLmluZGV4T2YoImZyLWZpbCIpPj0wPyJmci1maWwiOiJmci1maW4ifSxhLkVkaXRhYmxlLnByb3RvdHlwZS5hZGRJbWFnZUNsYXNzPWZ1bmN0aW9uKGEsYil7YS5yZW1vdmVDbGFzcygiZnItZmluIGZyLWZpciBmci1maWwiKS5hZGRDbGFzcyhiKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5pdEltYWdlRXZlbnRzPWZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlSW1hZ2VSZXNpemUoKTt2YXIgYj10aGlzO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXImJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImRyb3AiLGEucHJveHkoZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXtiLmNsb3NlSW1hZ2VNb2RlKCksYi5pbWFnZU1vZGU9ITEsYi5oaWRlKCksdGhpcy5zeW5jKCksdGhpcy5jbGVhclNlbGVjdGlvbigpfSx0aGlzKSwxMCl9LHRoaXMpKSx0aGlzLiRlbGVtZW50Lm9uKCJtb3VzZWRvd24iLCdpbWc6bm90KFtjb250ZW50ZWRpdGFibGU9ImZhbHNlIl0pJyxmdW5jdGlvbihjKXtyZXR1cm4gYi5pc0Rpc2FibGVkPyExOnZvaWQoYi5pc1Jlc2l6aW5nKCl8fChjLnN0b3BQcm9wYWdhdGlvbigpLGIuJGVsZW1lbnQuYXR0cigiY29udGVudGVkaXRhYmxlIiwhMSksYSh0aGlzKS5hZGRDbGFzcygiZnItaW1hZ2UtbW92ZSIpKSl9KSx0aGlzLiRlbGVtZW50Lm9uKCJtb3VzZXVwIiwnaW1nOm5vdChbY29udGVudGVkaXRhYmxlPSJmYWxzZSJdKScsZnVuY3Rpb24oKXtyZXR1cm4gYi5pc0Rpc2FibGVkPyExOnZvaWQoYi5pc1Jlc2l6aW5nKCl8fChiLm9wdGlvbnMuaW1hZ2VNb3ZlfHxiLmlzSW1hZ2V8fGIuaXNIVE1MfHxiLiRlbGVtZW50LmF0dHIoImNvbnRlbnRlZGl0YWJsZSIsITApLGEodGhpcykucmVtb3ZlQ2xhc3MoImZyLWltYWdlLW1vdmUiKSkpfSksdGhpcy4kZWxlbWVudC5vbigiY2xpY2sgdG91Y2hlbmQiLCdpbWc6bm90KFtjb250ZW50ZWRpdGFibGU9ImZhbHNlIl0pJyxmdW5jdGlvbihjKXtpZihiLmlzRGlzYWJsZWQpcmV0dXJuITE7aWYoIWIuaXNSZXNpemluZygpKXtjLnByZXZlbnREZWZhdWx0KCksYy5zdG9wUHJvcGFnYXRpb24oKSxiLmNsb3NlSW1hZ2VNb2RlKCksYi4kZWxlbWVudC5ibHVyKCksYi4kaW1hZ2VfZWRpdG9yLmZpbmQoImJ1dHRvbiIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKTt2YXIgZD1hKHRoaXMpLmNzcygiZmxvYXQiKTtpZihhKHRoaXMpLmhhc0NsYXNzKCJmci1maWwiKT9kPSJsZWZ0IjphKHRoaXMpLmhhc0NsYXNzKCJmci1maXIiKSYmKGQ9InJpZ2h0IiksYi4kaW1hZ2VfZWRpdG9yLmZpbmQoJ2J1dHRvbltkYXRhLWNtZD0iZmxvYXRJbWFnZScrZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStkLnNsaWNlKDEpKyciXScpLmFkZENsYXNzKCJhY3RpdmUiKSxiLiRpbWFnZV9lZGl0b3IuZmluZCgnLmYtaW1hZ2UtYWx0IGlucHV0W3R5cGU9InRleHQiXScpLnZhbChhKHRoaXMpLmF0dHIoImFsdCIpfHxhKHRoaXMpLmF0dHIoInRpdGxlIikpLGIuc2hvd0ltYWdlRWRpdG9yKCksIWEodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoImYtaW1nLWVkaXRvciIpfHwiU1BBTiIhPWEodGhpcykucGFyZW50KCkuZ2V0KDApLnRhZ05hbWUpe3ZhciBlPWIuZ2V0SW1hZ2VDbGFzcyhhKHRoaXMpLmF0dHIoImNsYXNzIikpO2EodGhpcykud3JhcCgnPHNwYW4gZGF0YS1mci12ZXJpZmllZD0idHJ1ZSIgY2xhc3M9ImYtaW1nLWVkaXRvciAnK2UrJyI+PC9zcGFuPicpLDAhPT1hKHRoaXMpLnBhcmVudHMoIi5mLWltZy13cmFwIikubGVuZ3RofHxiLmlzSW1hZ2U/Yi5hZGRJbWFnZUNsYXNzKGEodGhpcykucGFyZW50cygiLmYtaW1nLXdyYXAiKSxlKTphKHRoaXMpLnBhcmVudHMoImEiKS5sZW5ndGg+MD9hKHRoaXMpLnBhcmVudHMoImE6Zmlyc3QiKS53cmFwKCc8c3BhbiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIiBjbGFzcz0iZi1pbWctd3JhcCAnK2UrJyI+PC9zcGFuPicpOmEodGhpcykucGFyZW50KCkud3JhcCgnPHNwYW4gZGF0YS1mci12ZXJpZmllZD0idHJ1ZSIgY2xhc3M9ImYtaW1nLXdyYXAgJytlKyciPjwvc3Bhbj4nKX12YXIgZj1iLmltYWdlSGFuZGxlKCk7YSh0aGlzKS5wYXJlbnQoKS5maW5kKCIuZi1pbWctaGFuZGxlIikucmVtb3ZlKCksYi5vcHRpb25zLmltYWdlUmVzaXplJiYoYSh0aGlzKS5wYXJlbnQoKS5hcHBlbmQoZi5jbG9uZSghMCkuYWRkQ2xhc3MoImYtaC1uZSIpKSxhKHRoaXMpLnBhcmVudCgpLmFwcGVuZChmLmNsb25lKCEwKS5hZGRDbGFzcygiZi1oLXNlIikpLGEodGhpcykucGFyZW50KCkuYXBwZW5kKGYuY2xvbmUoITApLmFkZENsYXNzKCJmLWgtc3ciKSksYSh0aGlzKS5wYXJlbnQoKS5hcHBlbmQoZi5jbG9uZSghMCkuYWRkQ2xhc3MoImYtaC1udyIpKSksYi5zaG93QnlDb29yZGluYXRlcyhhKHRoaXMpLm9mZnNldCgpLmxlZnQrYSh0aGlzKS53aWR0aCgpLzIsYSh0aGlzKS5vZmZzZXQoKS50b3ArYSh0aGlzKS5oZWlnaHQoKSksYi5pbWFnZU1vZGU9ITAsYi4kYnR0bl93cmFwcGVyLmZpbmQoIi5mci1idHRuIikucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpLGIuY2xlYXJTZWxlY3Rpb24oKX19KSx0aGlzLiRlbGVtZW50Lm9uKCJtb3VzZWRvd24gdG91Y2hzdGFydCIsIi5mLWltZy1oYW5kbGUiLGEucHJveHkoZnVuY3Rpb24oKXtyZXR1cm4gYi5pc0Rpc2FibGVkPyExOnZvaWQgdGhpcy4kZWxlbWVudC5hdHRyKCJkYXRhLXJlc2l6ZSIsITApfSx0aGlzKSksdGhpcy4kZWxlbWVudC5vbigibW91c2V1cCIsIi5mLWltZy1oYW5kbGUiLGEucHJveHkoZnVuY3Rpb24oYyl7aWYoYi5pc0Rpc2FibGVkKXJldHVybiExO3ZhciBkPWEoYy50YXJnZXQpLnByZXZBbGwoImltZyIpO3NldFRpbWVvdXQoYS5wcm94eShmdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQucmVtb3ZlQXR0cigiZGF0YS1yZXNpemUiKSxkLmNsaWNrKCl9LHRoaXMpLDApfSx0aGlzKSl9LGEuRWRpdGFibGUucHJvdG90eXBlLmluaXRJbWFnZVBvcHVwPWZ1bmN0aW9uKCl7dGhpcy4kaW1hZ2VfZWRpdG9yPWEoJzxkaXYgY2xhc3M9ImZyb2FsYS1wb3B1cCBmcm9hbGEtaW1hZ2UtZWRpdG9yLXBvcHVwIiBzdHlsZT0iZGlzcGxheTogbm9uZSI+Jyk7Zm9yKHZhciBiPWEoJzxkaXYgY2xhc3M9ImYtcG9wdXAtbGluZSBmLXBvcHVwLXRvb2xiYXIiPicpLmFwcGVuZFRvKHRoaXMuJGltYWdlX2VkaXRvciksYz0wO2M8dGhpcy5vcHRpb25zLmltYWdlQnV0dG9ucy5sZW5ndGg7YysrKXt2YXIgZD10aGlzLm9wdGlvbnMuaW1hZ2VCdXR0b25zW2NdO2lmKHZvaWQgMCE9PWEuRWRpdGFibGUuaW1hZ2VfY29tbWFuZHNbZF0pe3ZhciBlPWEuRWRpdGFibGUuaW1hZ2VfY29tbWFuZHNbZF0sZj0nPGJ1dHRvbiBjbGFzcz0iZnItYnR0biIgZGF0YS1jbWQ9IicrZCsnIiB0aXRsZT0iJytlLnRpdGxlKyciPic7Zis9dm9pZCAwIT09dGhpcy5vcHRpb25zLmljb25zW2RdP3RoaXMucHJlcGFyZUljb24odGhpcy5vcHRpb25zLmljb25zW2RdLGUudGl0bGUpOnRoaXMucHJlcGFyZUljb24oZS5pY29uLGUudGl0bGUpLGYrPSI8L2J1dHRvbj4iLGIuYXBwZW5kKGYpfX10aGlzLmFkZExpc3RlbmVyKCJoaWRlUG9wdXBzIix0aGlzLmhpZGVJbWFnZUVkaXRvclBvcHVwKSx0aGlzLm9wdGlvbnMuaW1hZ2VUaXRsZSYmYSgnPGRpdiBjbGFzcz0iZi1wb3B1cC1saW5lIGYtaW1hZ2UtYWx0Ij4nKS5hcHBlbmQoJzxsYWJlbD48c3BhbiBkYXRhLXRleHQ9InRydWUiPlRpdGxlPC9zcGFuPjogPC9sYWJlbD4nKS5hcHBlbmQoYSgnPGlucHV0IHR5cGU9InRleHQiPicpLm9uKCJtb3VzZXVwIGtleWRvd24iLGZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2g7YiYmMjc9PT1ifHxhLnN0b3BQcm9wYWdhdGlvbigpfSkpLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz0iZi1vayIgZGF0YS10ZXh0PSJ0cnVlIiBkYXRhLWNtZD0ic2V0SW1hZ2VBbHQiIHRpdGxlPSJPSyI+T0s8L2J1dHRvbj4nKS5hcHBlbmRUbyh0aGlzLiRpbWFnZV9lZGl0b3IpO3ZhciBnPXRoaXM7dGhpcy4kaW1hZ2VfZWRpdG9yLmZpbmQoImJ1dHRvbiIpLmNsaWNrKGZ1bmN0aW9uKGIpe2Iuc3RvcFByb3BhZ2F0aW9uKCksZ1thKHRoaXMpLmF0dHIoImRhdGEtY21kIildKGcuJGVsZW1lbnQuZmluZCgic3Bhbi5mLWltZy1lZGl0b3IiKSkKfSksdGhpcy4kcG9wdXBfZWRpdG9yLmFwcGVuZCh0aGlzLiRpbWFnZV9lZGl0b3IpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5mbG9hdEltYWdlTGVmdD1mdW5jdGlvbihhKXt0aGlzLmFkZEltYWdlQ2xhc3MoYSwiZnItZmlsIiksdGhpcy5pc0ltYWdlJiZ0aGlzLiRlbGVtZW50LmNzcygiZmxvYXQiLCJsZWZ0IiksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLnRyaWdnZXJFdmVudCgiaW1hZ2VGbG9hdGVkTGVmdCIpLGEuZmluZCgiaW1nIikuY2xpY2soKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZmxvYXRJbWFnZU5vbmU9ZnVuY3Rpb24oYSl7dGhpcy5hZGRJbWFnZUNsYXNzKGEsImZyLWZpbiIpLHRoaXMuaXNJbWFnZXx8KGEucGFyZW50KCkuZ2V0KDApPT10aGlzLiRlbGVtZW50LmdldCgwKT9hLndyYXAoJzxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsiPjwvZGl2PicpOmEucGFyZW50cygiLmYtaW1nLXdyYXA6Zmlyc3QiKS5jc3MoInRleHQtYWxpZ24iLCJjZW50ZXIiKSksdGhpcy5pc0ltYWdlJiZ0aGlzLiRlbGVtZW50LmNzcygiZmxvYXQiLCJub25lIiksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLnRyaWdnZXJFdmVudCgiaW1hZ2VGbG9hdGVkTm9uZSIpLGEuZmluZCgiaW1nIikuY2xpY2soKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZmxvYXRJbWFnZVJpZ2h0PWZ1bmN0aW9uKGEpe3RoaXMuYWRkSW1hZ2VDbGFzcyhhLCJmci1maXIiKSx0aGlzLmlzSW1hZ2UmJnRoaXMuJGVsZW1lbnQuY3NzKCJmbG9hdCIsInJpZ2h0IiksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLnRyaWdnZXJFdmVudCgiaW1hZ2VGbG9hdGVkUmlnaHQiKSxhLmZpbmQoImltZyIpLmNsaWNrKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLmxpbmtJbWFnZT1mdW5jdGlvbihhKXt0aGlzLnNob3dJbnNlcnRMaW5rKCksdGhpcy5pbWFnZU1vZGU9ITAsIkEiPT1hLnBhcmVudCgpLmdldCgwKS50YWdOYW1lPyh0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgnaW5wdXRbdHlwZT0idGV4dCJdJykudmFsKGEucGFyZW50KCkuYXR0cigiaHJlZiIpKSx0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgiLmYtZXh0ZXJuYWwtbGluayIpLmF0dHIoImhyZWYiLGEucGFyZW50KCkuYXR0cigiaHJlZiIpKSwiX2JsYW5rIj09YS5wYXJlbnQoKS5hdHRyKCJ0YXJnZXQiKT90aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgnaW5wdXRbdHlwZT0iY2hlY2tib3giXScpLnByb3AoImNoZWNrZWQiLCEwKTp0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgnaW5wdXRbdHlwZT0iY2hlY2tib3giXScpLnByb3AoImNoZWNrZWQiLCExKSx0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgiYS5mLWV4dGVybmFsLWxpbmssIGJ1dHRvbi5mLXVubGluayIpLnNob3coKSk6KHRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0nKS52YWwoImh0dHA6Ly8iKSx0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgiLmYtZXh0ZXJuYWwtbGluayIpLmF0dHIoImhyZWYiLCIjIiksdGhpcy4kbGlua193cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9ImNoZWNrYm94Il0nKS5wcm9wKCJjaGVja2VkIix0aGlzLm9wdGlvbnMuYWx3YXlzQmxhbmspLHRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCJhLmYtZXh0ZXJuYWwtbGluaywgYnV0dG9uLmYtdW5saW5rIikuaGlkZSgpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVwbGFjZUltYWdlPWZ1bmN0aW9uKGEpe3RoaXMuc2hvd0luc2VydEltYWdlKCksdGhpcy5pbWFnZU1vZGU9ITAsdGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0nKS52YWwoYS5maW5kKCJpbWciKS5hdHRyKCJzcmMiKSk7dmFyIGI9YS5maW5kKCJpbWciKTt0aGlzLnNob3dCeUNvb3JkaW5hdGVzKGIub2Zmc2V0KCkubGVmdCtiLndpZHRoKCkvMixiLm9mZnNldCgpLnRvcCtiLmhlaWdodCgpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVtb3ZlSW1hZ2U9ZnVuY3Rpb24oYil7dmFyIGM9Yi5maW5kKCJpbWciKS5nZXQoMCksZD0iQXJlIHlvdSBzdXJlPyBJbWFnZSB3aWxsIGJlIGRlbGV0ZWQuIjtpZihhLkVkaXRhYmxlLkxBTkdTW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0mJihkPWEuRWRpdGFibGUuTEFOR1NbdGhpcy5vcHRpb25zLmxhbmd1YWdlXS50cmFuc2xhdGlvbltkXSksY29uZmlybShkKSl7aWYodGhpcy50cmlnZ2VyRXZlbnQoImJlZm9yZVJlbW92ZUltYWdlIixbYShjKV0sITEpKXt2YXIgZT1iLnBhcmVudHMoYS5FZGl0YWJsZS5WQUxJRF9OT0RFUy5qb2luKCIsIikpO2IucGFyZW50cygiLmYtaW1nLXdyYXAiKS5sZW5ndGg/Yi5wYXJlbnRzKCIuZi1pbWctd3JhcCIpLnJlbW92ZSgpOmIucmVtb3ZlKCksdGhpcy5yZWZyZXNoSW1hZ2VMaXN0KCEwKSx0aGlzLmhpZGUoKSxlLmxlbmd0aCYmZVswXSE9dGhpcy4kZWxlbWVudC5nZXQoMCkmJiIiPT09YShlWzBdKS50ZXh0KCkmJmEoZVswXSkucmVtb3ZlKCksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLndyYXBUZXh0KCksdGhpcy50cmlnZ2VyRXZlbnQoImFmdGVyUmVtb3ZlSW1hZ2UiLFthKGMpXSksdGhpcy5mb2N1cygpLHRoaXMuaW1hZ2VNb2RlPSExfX1lbHNlIGIuZmluZCgiaW1nIikuY2xpY2soKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc2V0SW1hZ2VBbHQ9ZnVuY3Rpb24oYSl7YS5maW5kKCJpbWciKS5hdHRyKCJhbHQiLHRoaXMuJGltYWdlX2VkaXRvci5maW5kKCcuZi1pbWFnZS1hbHQgaW5wdXRbdHlwZT0idGV4dCJdJykudmFsKCkpLGEuZmluZCgiaW1nIikuYXR0cigidGl0bGUiLHRoaXMuJGltYWdlX2VkaXRvci5maW5kKCcuZi1pbWFnZS1hbHQgaW5wdXRbdHlwZT0idGV4dCJdJykudmFsKCkpLHRoaXMuc2F2ZVVuZG9TdGVwKCksdGhpcy5oaWRlKCksdGhpcy5jbG9zZUltYWdlTW9kZSgpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZUFsdFNldCIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5idWlsZERyYWdVcGxvYWQ9ZnVuY3Rpb24oKXt2YXIgYj10aGlzO2IuJGltYWdlX3dyYXBwZXIub24oImRyYWdvdmVyIiwiI2YtdXBsb2FkLWRpdi0iK3RoaXMuX2lkLGZ1bmN0aW9uKCl7cmV0dXJuIGEodGhpcykuYWRkQ2xhc3MoImYtaG92ZXIiKSwhMX0pLGIuJGltYWdlX3dyYXBwZXIub24oImRyYWdlbmQiLCIjZi11cGxvYWQtZGl2LSIrdGhpcy5faWQsZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzKS5yZW1vdmVDbGFzcygiZi1ob3ZlciIpLCExfSksYi4kaW1hZ2Vfd3JhcHBlci5vbigiZHJvcCIsIiNmLXVwbG9hZC1kaXYtIit0aGlzLl9pZCxmdW5jdGlvbihjKXtyZXR1cm4gYy5wcmV2ZW50RGVmYXVsdCgpLGMuc3RvcFByb3BhZ2F0aW9uKCksYi5vcHRpb25zLmltYWdlVXBsb2FkPyhhKHRoaXMpLnJlbW92ZUNsYXNzKCJmLWhvdmVyIiksdm9pZCBiLnVwbG9hZEltYWdlKGMub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZmlsZXMpKTohMX0pLGIuJGVsZW1lbnQub24oImRyYWdvdmVyIGRyYWdlbnRlciBkcmFnZW5kIixmdW5jdGlvbigpe3JldHVybiExfSksYi4kZWxlbWVudC5vbigiZHJvcCIsZnVuY3Rpb24oYyl7aWYoYi5jbG9zZUltYWdlTW9kZSgpLGIuaGlkZSgpLGIuaW1hZ2VNb2RlPSExLCFiLm9wdGlvbnMuaW1hZ2VVcGxvYWR8fDAhPT1iLiRlbGVtZW50LmZpbmQoIi5mci1pbWFnZS1tb3ZlIikubGVuZ3RoKXtpZihiLiRlbGVtZW50LmZpbmQoIi5mci1pbWFnZS1tb3ZlIikubGVuZ3RoPjAmJmIub3B0aW9ucy5pbWFnZU1vdmUpe2IuaW5zZXJ0TWFya2Vyc0F0UG9pbnQoYy5vcmlnaW5hbEV2ZW50KSxiLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKTt2YXIgZD1hKCI8ZGl2PiIpLmFwcGVuZChiLiRlbGVtZW50LmZpbmQoIi5mci1pbWFnZS1tb3ZlIikuY2xvbmUoKS5yZW1vdmVDbGFzcygiZnItaW1hZ2UtbW92ZSIpLmFkZENsYXNzKCJmci1pbWFnZS1kcm9wcGVkIikpLmh0bWwoKTtiLmluc2VydEhUTUwoZCksYi4kZWxlbWVudC5maW5kKCIuZnItaW1hZ2UtbW92ZSIpLnJlbW92ZSgpLGIuY2xlYXJTZWxlY3Rpb24oKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi4kZWxlbWVudC5maW5kKCIuZnItaW1hZ2UtZHJvcHBlZCIpLnJlbW92ZUNsYXNzKCJmci1pbWFnZS1kcm9wcGVkIikuY2xpY2soKX0sMCksYi5zYXZlVW5kb1N0ZXAoKSxiLnN5bmMoKX1lbHNlIGIuJGVsZW1lbnQuZmluZCgiLmZyLWltYWdlLW1vdmUiKS5yZW1vdmVDbGFzcygiZnItaW1hZ2UtbW92ZSIpO3JldHVybiBjLnByZXZlbnREZWZhdWx0KCksYy5zdG9wUHJvcGFnYXRpb24oKSwhMX1pZihjLm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyJiZjLm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzJiZjLm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzLmxlbmd0aCl7aWYoYi5pc0Rpc2FibGVkKXJldHVybiExO2IuaW5zZXJ0TWFya2Vyc0F0UG9pbnQoYy5vcmlnaW5hbEV2ZW50KSxiLnNob3dCeUNvb3JkaW5hdGVzKGMub3JpZ2luYWxFdmVudC5wYWdlWCxjLm9yaWdpbmFsRXZlbnQucGFnZVkpLGIudXBsb2FkSW1hZ2UoYy5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcyksYy5wcmV2ZW50RGVmYXVsdCgpLGMuc3RvcFByb3BhZ2F0aW9uKCl9fSl9LGEuRWRpdGFibGUucHJvdG90eXBlLnNob3dJbWFnZUxvYWRlcj1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT0hMSksYT90aGlzLiRwcm9ncmVzc19iYXIuZmluZCgic3BhbiIpLmNzcygid2lkdGgiLCIxMDAlIikudGV4dCgiUGxlYXNlIHdhaXQhIik6dGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCJoNCIpLmFkZENsYXNzKCJ1cGxvYWRpbmciKSx0aGlzLiRpbWFnZV93cmFwcGVyLmZpbmQoIiNmLWltYWdlLWxpc3QtIit0aGlzLl9pZCkuaGlkZSgpLHRoaXMuJHByb2dyZXNzX2Jhci5zaG93KCksdGhpcy5zaG93SW5zZXJ0SW1hZ2UoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaGlkZUltYWdlTG9hZGVyPWZ1bmN0aW9uKCl7dGhpcy4kcHJvZ3Jlc3NfYmFyLmhpZGUoKSx0aGlzLiRwcm9ncmVzc19iYXIuZmluZCgic3BhbiIpLmNzcygid2lkdGgiLCIwJSIpLnRleHQoIiIpLHRoaXMuJGltYWdlX3dyYXBwZXIuZmluZCgiI2YtaW1hZ2UtbGlzdC0iK3RoaXMuX2lkKS5zaG93KCksdGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCJoNCIpLnJlbW92ZUNsYXNzKCJ1cGxvYWRpbmciKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUud3JpdGVJbWFnZT1mdW5jdGlvbihiLGMpe2lmKGMmJihiPXRoaXMuc2FuaXRpemVVUkwoYiksIiI9PT1iKSlyZXR1cm4hMTt2YXIgZD1uZXcgSW1hZ2U7ZC5vbmVycm9yPWEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmhpZGVJbWFnZUxvYWRlcigpLHRoaXMudGhyb3dJbWFnZUVycm9yKDEpfSx0aGlzKSxkLm9ubG9hZD10aGlzLmltYWdlTW9kZT9hLnByb3h5KGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudC5maW5kKCIuZi1pbWctZWRpdG9yID4gaW1nIik7YS5hdHRyKCJzcmMiLGIpLHRoaXMuaGlkZSgpLHRoaXMuaGlkZUltYWdlTG9hZGVyKCksdGhpcy4kaW1hZ2VfZWRpdG9yLnNob3coKSx0aGlzLnNhdmVVbmRvU3RlcCgpLHRoaXMuZW5hYmxlKCksdGhpcy50cmlnZ2VyRXZlbnQoImltYWdlUmVwbGFjZWQiLFthXSksc2V0VGltZW91dChmdW5jdGlvbigpe2EudHJpZ2dlcigiY2xpY2siKX0sMCl9LHRoaXMpOmEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmluc2VydExvYWRlZEltYWdlKGIpfSx0aGlzKSx0aGlzLnNob3dJbWFnZUxvYWRlcighMCksZC5zcmM9Yn0sYS5FZGl0YWJsZS5wcm90b3R5cGUucHJvY2Vzc0luc2VydEltYWdlPWZ1bmN0aW9uKGIsYyl7dm9pZCAwPT09YyYmKGM9ITApLHRoaXMuZW5hYmxlKCksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5mb2N1cygpO3ZhciBkPSc8aW1nIGNsYXNzPSJmci1maW4iIGRhdGEtZnItaW1hZ2UtcHJldmlldz0iJytjKyciIGFsdD0iSW1hZ2UgdGl0bGUiIHNyYz0iJytiKyciIHdpZHRoPSInK3RoaXMub3B0aW9ucy5kZWZhdWx0SW1hZ2VXaWR0aCsnIj4nLGU9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpWzBdLGY9dGhpcy5nZXRSYW5nZSgpLGc9IXRoaXMuYnJvd3Nlci5tc2llJiZhLkVkaXRhYmxlLmdldElFdmVyc2lvbigpPjg/YShmLnN0YXJ0Q29udGFpbmVyKTpudWxsO2cmJmcuaGFzQ2xhc3MoImYtaW1nLXdyYXAiKT8oMT09PWYuc3RhcnRPZmZzZXQ/KGcuYWZ0ZXIoJzxwPjxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJ0cnVlIiBkYXRhLWlkPSIwIj48L3NwYW4+PGJyLz48c3BhbiBjbGFzcz0iZi1tYXJrZXIiIGRhdGEtdHlwZT0iZmFsc2UiIGRhdGEtaWQ9IjAiPjwvc3Bhbj48L3A+JyksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5nZXRTZWxlY3Rpb24oKS5jb2xsYXBzZVRvU3RhcnQoKSk6MD09PWYuc3RhcnRPZmZzZXQmJihnLmJlZm9yZSgnPHA+PHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLXR5cGU9InRydWUiIGRhdGEtaWQ9IjAiPjwvc3Bhbj48YnIvPjxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJmYWxzZSIgZGF0YS1pZD0iMCI+PC9zcGFuPjwvcD4nKSx0aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSx0aGlzLmdldFNlbGVjdGlvbigpLmNvbGxhcHNlVG9TdGFydCgpKSx0aGlzLmluc2VydEhUTUwoZCkpOnRoaXMuZ2V0U2VsZWN0aW9uVGV4dEluZm8oZSkuYXRTdGFydCYmZSE9dGhpcy4kZWxlbWVudC5nZXQoMCkmJiJURCIhPWUudGFnTmFtZSYmIlRIIiE9ZS50YWdOYW1lJiYiTEkiIT1lLnRhZ05hbWU/YShlKS5iZWZvcmUoIjxwPiIrZCsiPC9wPiIpOnRoaXMuaW5zZXJ0SFRNTChkKSx0aGlzLmRpc2FibGUoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5zZXJ0TG9hZGVkSW1hZ2U9ZnVuY3Rpb24oYSl7dGhpcy50cmlnZ2VyRXZlbnQoImltYWdlTG9hZGVkIixbYV0sITEpLHRoaXMucHJvY2Vzc0luc2VydEltYWdlKGEsITEpLHRoaXMuYnJvd3Nlci5tc2llJiZ0aGlzLiRlbGVtZW50LmZpbmQoImltZyIpLmVhY2goZnVuY3Rpb24oYSxiKXtiLm9uY29udHJvbHNlbGVjdD1mdW5jdGlvbigpe3JldHVybiExfX0pLHRoaXMuZW5hYmxlKCksdGhpcy5oaWRlKCksdGhpcy5oaWRlSW1hZ2VMb2FkZXIoKSx0aGlzLnNhdmVVbmRvU3RlcCgpLHRoaXMuZm9jdXMoKSx0aGlzLndyYXBUZXh0KCksdGhpcy50cmlnZ2VyRXZlbnQoImltYWdlSW5zZXJ0ZWQiLFthXSl9LGEuRWRpdGFibGUucHJvdG90eXBlLnRocm93SW1hZ2VFcnJvcldpdGhNZXNzYWdlPWZ1bmN0aW9uKGEpe3RoaXMuZW5hYmxlKCksdGhpcy4kZWxlbWVudC5maW5kKCJpbWdbZGF0YS1mci1pbWFnZS1wcmV2aWV3XSIpLnJlbW92ZSgpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZUVycm9yIixbe21lc3NhZ2U6YSxjb2RlOjB9XSwhMSksdGhpcy5oaWRlSW1hZ2VMb2FkZXIoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUudGhyb3dJbWFnZUVycm9yPWZ1bmN0aW9uKGEpe3RoaXMuZW5hYmxlKCksdGhpcy4kZWxlbWVudC5maW5kKCJpbWdbZGF0YS1mci1pbWFnZS1wcmV2aWV3XSIpLnJlbW92ZSgpO3ZhciBiPSJVbmtub3duIGltYWdlIHVwbG9hZCBlcnJvci4iOzE9PWE/Yj0iQmFkIGxpbmsuIjoyPT1hP2I9Ik5vIGxpbmsgaW4gdXBsb2FkIHJlc3BvbnNlLiI6Mz09YT9iPSJFcnJvciBkdXJpbmcgZmlsZSB1cGxvYWQuIjo0PT1hP2I9IlBhcnNpbmcgcmVzcG9uc2UgZmFpbGVkLiI6NT09YT9iPSJJbWFnZSB0b28gbGFyZ2UuIjo2PT1hP2I9IkludmFsaWQgaW1hZ2UgdHlwZS4iOjc9PWEmJihiPSJJbWFnZSBjYW4gYmUgdXBsb2FkZWQgb25seSB0byBzYW1lIGRvbWFpbiBpbiBJRSA4IGFuZCBJRSA5LiIpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZUVycm9yIixbe2NvZGU6YSxtZXNzYWdlOmJ9XSwhMSksdGhpcy5oaWRlSW1hZ2VMb2FkZXIoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUudXBsb2FkSW1hZ2U9ZnVuY3Rpb24oYil7aWYoIXRoaXMudHJpZ2dlckV2ZW50KCJiZWZvcmVJbWFnZVVwbG9hZCIsW2JdLCExKSlyZXR1cm4hMTtpZih2b2lkIDAhPT1iJiZiLmxlbmd0aD4wKXt2YXIgYztpZih0aGlzLmRyYWdfc3VwcG9ydC5mb3JtZGF0YSYmKGM9dGhpcy5kcmFnX3N1cHBvcnQuZm9ybWRhdGE/bmV3IEZvcm1EYXRhOm51bGwpLGMpe3ZhciBkO2ZvcihkIGluIHRoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFBhcmFtcyljLmFwcGVuZChkLHRoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFBhcmFtc1tkXSk7aWYodGhpcy5vcHRpb25zLmltYWdlVXBsb2FkVG9TMyE9PSExKXtmb3IoZCBpbiB0aGlzLm9wdGlvbnMuaW1hZ2VVcGxvYWRUb1MzLnBhcmFtcyljLmFwcGVuZChkLHRoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzMucGFyYW1zW2RdKTtjLmFwcGVuZCgic3VjY2Vzc19hY3Rpb25fc3RhdHVzIiwiMjAxIiksYy5hcHBlbmQoIlgtUmVxdWVzdGVkLVdpdGgiLCJ4aHIiKSxjLmFwcGVuZCgiQ29udGVudC1UeXBlIixiWzBdLnR5cGUpLGMuYXBwZW5kKCJrZXkiLHRoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzMua2V5U3RhcnQrKG5ldyBEYXRlKS5nZXRUaW1lKCkrIi0iK2JbMF0ubmFtZSl9aWYoYy5hcHBlbmQodGhpcy5vcHRpb25zLmltYWdlVXBsb2FkUGFyYW0sYlswXSksYlswXS5zaXplPnRoaXMub3B0aW9ucy5tYXhJbWFnZVNpemUpcmV0dXJuIHRoaXMudGhyb3dJbWFnZUVycm9yKDUpLCExO2lmKHRoaXMub3B0aW9ucy5hbGxvd2VkSW1hZ2VUeXBlcy5pbmRleE9mKGJbMF0udHlwZS5yZXBsYWNlKC9pbWFnZVwvL2csIiIpKTwwKXJldHVybiB0aGlzLnRocm93SW1hZ2VFcnJvcig2KSwhMX1pZihjKXt2YXIgZTt0aGlzLm9wdGlvbnMuY3Jvc3NEb21haW4/ZT10aGlzLmNyZWF0ZUNPUlNSZXF1ZXN0KCJQT1NUIix0aGlzLm9wdGlvbnMuaW1hZ2VVcGxvYWRVUkwpOihlPW5ldyBYTUxIdHRwUmVxdWVzdCxlLm9wZW4oIlBPU1QiLHRoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFVSTCkpLGUub25sb2FkPWEucHJveHkoZnVuY3Rpb24oKXt0aGlzLiRwcm9ncmVzc19iYXIuZmluZCgic3BhbiIpLmNzcygid2lkdGgiLCIxMDAlIikudGV4dCgiUGxlYXNlIHdhaXQhIik7dHJ5e3RoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzM/MjAxPT1lLnN0YXR1cz90aGlzLnBhcnNlSW1hZ2VSZXNwb25zZVhNTChlLnJlc3BvbnNlWE1MKTp0aGlzLnRocm93SW1hZ2VFcnJvcigzKTplLnN0YXR1cz49MjAwJiZlLnN0YXR1czwzMDA/dGhpcy5wYXJzZUltYWdlUmVzcG9uc2UoZS5yZXNwb25zZVRleHQpOnRoaXMudGhyb3dJbWFnZUVycm9yKDMpfWNhdGNoKGEpe3RoaXMudGhyb3dJbWFnZUVycm9yKDQpfX0sdGhpcyksZS5vbmVycm9yPWEucHJveHkoZnVuY3Rpb24oKXt0aGlzLnRocm93SW1hZ2VFcnJvcigzKX0sdGhpcyksZS51cGxvYWQub25wcm9ncmVzcz1hLnByb3h5KGZ1bmN0aW9uKGEpe2lmKGEubGVuZ3RoQ29tcHV0YWJsZSl7dmFyIGI9YS5sb2FkZWQvYS50b3RhbCoxMDB8MDt0aGlzLiRwcm9ncmVzc19iYXIuZmluZCgic3BhbiIpLmNzcygid2lkdGgiLGIrIiUiKX19LHRoaXMpLHRoaXMuZGlzYWJsZSgpLGUuc2VuZChjKSx0aGlzLnNob3dJbWFnZUxvYWRlcigpfX19LGEuRWRpdGFibGUucHJvdG90eXBlLnBhcnNlSW1hZ2VSZXNwb25zZT1mdW5jdGlvbihiKXt0cnl7dmFyIGM9YS5wYXJzZUpTT04oYik7Yy5saW5rP3RoaXMud3JpdGVJbWFnZShjLmxpbmspOmMuZXJyb3I/dGhpcy50aHJvd0ltYWdlRXJyb3JXaXRoTWVzc2FnZShjLmVycm9yKTp0aGlzLnRocm93SW1hZ2VFcnJvcigyKX1jYXRjaChkKXt0aGlzLnRocm93SW1hZ2VFcnJvcig0KX19LGEuRWRpdGFibGUucHJvdG90eXBlLnBhcnNlSW1hZ2VSZXNwb25zZVhNTD1mdW5jdGlvbihiKXt0cnl7dmFyIGM9YShiKS5maW5kKCJMb2NhdGlvbiIpLnRleHQoKSxkPWEoYikuZmluZCgiS2V5IikudGV4dCgpO3RoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzMuY2FsbGJhY2suY2FsbCh0aGlzLGMsZCksYz90aGlzLndyaXRlSW1hZ2UoYyk6dGhpcy50aHJvd0ltYWdlRXJyb3IoMil9Y2F0Y2goZSl7dGhpcy50aHJvd0ltYWdlRXJyb3IoNCl9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5zZXRJbWFnZVVwbG9hZFVSTD1mdW5jdGlvbihhKXthJiYodGhpcy5vcHRpb25zLmltYWdlVXBsb2FkVVJMPWEpLHRoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzMmJih0aGlzLm9wdGlvbnMuaW1hZ2VVcGxvYWRVUkw9Imh0dHBzOi8vIit0aGlzLm9wdGlvbnMuaW1hZ2VVcGxvYWRUb1MzLmJ1Y2tldCsiLiIrdGhpcy5vcHRpb25zLmltYWdlVXBsb2FkVG9TMy5yZWdpb24rIi5hbWF6b25hd3MuY29tLyIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5jbG9zZUltYWdlTW9kZT1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQuZmluZCgic3Bhbi5mLWltZy1lZGl0b3IgPiBpbWciKS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYixjKXt0aGlzLmFkZEltYWdlQ2xhc3MoYShjKSx0aGlzLmdldEltYWdlQ2xhc3MoYShjKS5wYXJlbnQoKS5hdHRyKCJjbGFzcyIpKSksYShjKS5wYXJlbnRzKCIuZi1pbWctd3JhcCIpLmxlbmd0aD4wPyJBIj09YShjKS5wYXJlbnQoKS5wYXJlbnQoKS5nZXQoMCkudGFnTmFtZT9hKGMpLnNpYmxpbmdzKCJzcGFuLmYtaW1nLWhhbmRsZSIpLnJlbW92ZSgpLmVuZCgpLnVud3JhcCgpLnBhcmVudCgpLnVud3JhcCgpOmEoYykuc2libGluZ3MoInNwYW4uZi1pbWctaGFuZGxlIikucmVtb3ZlKCkuZW5kKCkudW53cmFwKCkudW53cmFwKCk6YShjKS5zaWJsaW5ncygic3Bhbi5mLWltZy1oYW5kbGUiKS5yZW1vdmUoKS5lbmQoKS51bndyYXAoKX0sdGhpcykpLHRoaXMuJGVsZW1lbnQuZmluZCgic3Bhbi5mLWltZy1lZGl0b3IiKS5sZW5ndGgmJih0aGlzLiRlbGVtZW50LmZpbmQoInNwYW4uZi1pbWctZWRpdG9yIikucmVtb3ZlKCksdGhpcy4kZWxlbWVudC5wYXJlbnRzKCJzcGFuLmYtaW1nLWVkaXRvciIpLnJlbW92ZSgpKSx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJmLW5vbi1zZWxlY3RhYmxlIiksdGhpcy5lZGl0YWJsZURpc2FibGVkfHx0aGlzLmlzSFRNTHx8dGhpcy4kZWxlbWVudC5hdHRyKCJjb250ZW50ZWRpdGFibGUiLCEwKSx0aGlzLiRpbWFnZV9lZGl0b3ImJnRoaXMuJGltYWdlX2VkaXRvci5oaWRlKCksdGhpcy4kbGlua193cmFwcGVyJiZ0aGlzLm9wdGlvbnMubGlua1RleHQmJnRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0uZi1sdCcpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCJmci1oaWRkZW4iKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaEltYWdlTGlzdD1mdW5jdGlvbihiKXtpZighdGhpcy5pc0xpbmsmJiF0aGlzLm9wdGlvbnMuZWRpdEluUG9wdXApe3ZhciBjPVtdLGQ9W10sZT10aGlzO2lmKHRoaXMuJGVsZW1lbnQuZmluZCgiaW1nIikuZWFjaChmdW5jdGlvbihiLGYpe3ZhciBnPWEoZik7aWYoYy5wdXNoKGcuYXR0cigic3JjIikpLGQucHVzaChnKSwwPT09Zy5wYXJlbnRzKCIuZi1pbWctZWRpdG9yIikubGVuZ3RoJiYhZy5oYXNDbGFzcygiZnItZmlsIikmJiFnLmhhc0NsYXNzKCJmci1maXIiKSYmIWcuaGFzQ2xhc3MoImZyLWZpbiIpKXt2YXIgaDsicmlnaHQiPT1nLmNzcygiZmxvYXQiKT8oaD1nLnBhcmVudCgpLGguaGFzQ2xhc3MoImYtaW1nLWVkaXRvciIpP2guYWRkQ2xhc3MoImZyLWZpciIpOmcuYWRkQ2xhc3MoImZyLWZpciIpKToibGVmdCI9PWcuY3NzKCJmbG9hdCIpPyhoPWcucGFyZW50KCksaC5oYXNDbGFzcygiZi1pbWctZWRpdG9yIik/aC5hZGRDbGFzcygiZnItZmlsIik6Zy5hZGRDbGFzcygiZnItZmlsIikpOihoPWcucGFyZW50KCksaC5oYXNDbGFzcygiZi1pbWctZWRpdG9yIik/aC5hZGRDbGFzcygiZnItZmluIik6Zy5hZGRDbGFzcygiZnItZmluIikpfWUub3B0aW9ucy50ZXh0TmVhckltYWdlP2cucmVtb3ZlQ2xhc3MoImZyLXRuaSIpOmcuYWRkQ2xhc3MoImZyLXRuaSIpLGcuY3NzKCJtYXJnaW4iLCIiKSxnLmNzcygiZmxvYXQiLCIiKX0pLHZvaWQgMD09PWIpZm9yKHZhciBmPTA7Zjx0aGlzLmltYWdlTGlzdC5sZW5ndGg7ZisrKWMuaW5kZXhPZih0aGlzLmltYWdlTGlzdFtmXS5hdHRyKCJzcmMiKSk8MCYmdGhpcy50cmlnZ2VyRXZlbnQoImFmdGVyUmVtb3ZlSW1hZ2UiLFt0aGlzLmltYWdlTGlzdFtmXV0sITEpO3RoaXMuaW1hZ2VMaXN0PWR9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pbnNlcnRJbWFnZT1mdW5jdGlvbigpe3RoaXMuY2xvc2VJbWFnZU1vZGUoKSx0aGlzLmltYWdlTW9kZT0hMSx0aGlzLnNob3dJbnNlcnRJbWFnZSgpLHRoaXMuc2F2ZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMub3B0aW9ucy5pbmxpbmVNb2RlfHx0aGlzLnBvc2l0aW9uUG9wdXAoImluc2VydEltYWdlIiksdGhpcy5pbWFnZU1vZGU9ITEsdGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0nKS52YWwoIiIpfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthLkVkaXRhYmxlLnByb3RvdHlwZS5zaG93TGlua1dyYXBwZXI9ZnVuY3Rpb24oKXt0aGlzLiRsaW5rX3dyYXBwZXImJih0aGlzLiRsaW5rX3dyYXBwZXIuc2hvdygpLHRoaXMuJGxpbmtfd3JhcHBlci50cmlnZ2VyKCJoaWRlTGlua0xpc3QiKSx0aGlzLiRsaW5rX3dyYXBwZXIudHJpZ2dlcigiaGlkZUxpbmtDbGFzc0xpc3QiKSx0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgiaW5wdXQuZi1sdSIpLnJlbW92ZUNsYXNzKCJmci1lcnJvciIpLHRoaXMuaW1hZ2VNb2RlfHwhdGhpcy5vcHRpb25zLmxpbmtUZXh0P3RoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0uZi1sdCcpLnBhcmVudCgpLmFkZENsYXNzKCJmci1oaWRkZW4iKTp0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgnaW5wdXRbdHlwZT0idGV4dCJdLmYtbHQnKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygiZnItaGlkZGVuIiksdGhpcy5pbWFnZU1vZGUmJnRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0uZi1sdScpLnJlbW92ZUF0dHIoImRpc2FibGVkIiksc2V0VGltZW91dChhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy4kbGlua193cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9InRleHQiXS5mLWx1JykuZm9jdXMoKS5zZWxlY3QoKX0sdGhpcyksMCksdGhpcy5saW5rPSEwKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaGlkZUxpbmtXcmFwcGVyPWZ1bmN0aW9uKCl7dGhpcy4kbGlua193cmFwcGVyJiZ0aGlzLiRsaW5rX3dyYXBwZXIuaGlkZSgpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5zaG93SW5zZXJ0TGluaz1mdW5jdGlvbigpe3RoaXMuaGlkZVBvcHVwcygpLHRoaXMuc2hvd0xpbmtXcmFwcGVyKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLmluaXRMaW5rRXZlbnRzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPWZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCksYS5wcmV2ZW50RGVmYXVsdCgpfSxkPWZ1bmN0aW9uKGMpe2lmKGMuc3RvcFByb3BhZ2F0aW9uKCksYy5wcmV2ZW50RGVmYXVsdCgpLGIuaXNEaXNhYmxlZClyZXR1cm4hMTtpZigiIiE9PWIudGV4dCgpKXJldHVybiBiLmhpZGUoKSwhMTtiLmxpbms9ITAsYi5jbGVhclNlbGVjdGlvbigpLGIucmVtb3ZlTWFya2VycygpLGIuc2VsZWN0aW9uRGlzYWJsZWR8fChhKHRoaXMpLmJlZm9yZSgnPHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLXR5cGU9InRydWUiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSxhKHRoaXMpLmFmdGVyKCc8c3BhbiBjbGFzcz0iZi1tYXJrZXIiIGRhdGEtdHlwZT0iZmFsc2UiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSksYi5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCksYi5leGVjKCJjcmVhdGVMaW5rIik7dmFyIGQ9YSh0aGlzKS5hdHRyKCJocmVmIil8fCIiO2IuJGxpbmtfd3JhcHBlci5maW5kKCJpbnB1dC5mLWx0IikudmFsKGEodGhpcykudGV4dCgpKSxiLmlzTGluaz8oIiMiPT1kJiYoZD0iIiksYi4kbGlua193cmFwcGVyLmZpbmQoImlucHV0I2YtbHUtIitiLl9pZCkudmFsKGQucmVwbGFjZSgvXCZhbXA7L2csIiYiKSksYi4kbGlua193cmFwcGVyLmZpbmQoIi5mLWV4dGVybmFsLWxpbmsiKS5hdHRyKCJocmVmIixkfHwiIyIpKTooYi4kbGlua193cmFwcGVyLmZpbmQoImlucHV0LmYtbHUiKS52YWwoZC5yZXBsYWNlKC9cJmFtcDsvZywiJiIpKSxiLiRsaW5rX3dyYXBwZXIuZmluZCgiLmYtZXh0ZXJuYWwtbGluayIpLmF0dHIoImhyZWYiLGQpKSxiLiRsaW5rX3dyYXBwZXIuZmluZCgnaW5wdXRbdHlwZT0iY2hlY2tib3giXScpLnByb3AoImNoZWNrZWQiLCJfYmxhbmsiPT1hKHRoaXMpLmF0dHIoInRhcmdldCIpKSxiLiRsaW5rX3dyYXBwZXIuZmluZCgibGkuZi1jaG9vc2UtbGluay1jbGFzcyIpLmVhY2goYS5wcm94eShmdW5jdGlvbihiLGMpe2EodGhpcykuaGFzQ2xhc3MoYShjKS5kYXRhKCJjbGFzcyIpKSYmYShjKS5jbGljaygpfSx0aGlzKSksYi5zaG93QnlDb29yZGluYXRlcyhhKHRoaXMpLm9mZnNldCgpLmxlZnQrYSh0aGlzKS5vdXRlcldpZHRoKCkvMixhKHRoaXMpLm9mZnNldCgpLnRvcCsocGFyc2VJbnQoYSh0aGlzKS5jc3MoInBhZGRpbmctdG9wIiksMTApfHwwKSthKHRoaXMpLmhlaWdodCgpKSxiLiRsaW5rX3dyYXBwZXIuZmluZCgiaW5wdXQuZi1sdSIpLmZvY3VzKCksYi5zaG93SW5zZXJ0TGluaygpLGEodGhpcykuaGFzQ2xhc3MoImZyLWZpbGUiKT9iLiRsaW5rX3dyYXBwZXIuZmluZCgiaW5wdXQuZi1sdSIpLmF0dHIoImRpc2FibGVkIiwiZGlzYWJsZWQiKTpiLiRsaW5rX3dyYXBwZXIuZmluZCgiaW5wdXQuZi1sdSIpLnJlbW92ZUF0dHIoImRpc2FibGVkIiksYi5jbG9zZUltYWdlTW9kZSgpfTt0aGlzLiRlbGVtZW50Lm9uKCJtb3VzZWRvd24iLCJhIixhLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuaXNSZXNpemluZygpfHxhLnN0b3BQcm9wYWdhdGlvbigpfSx0aGlzKSksdGhpcy5pc0xpbms/dGhpcy5pT1MoKT8odGhpcy4kZWxlbWVudC5vbigiY2xpY2siLGMpLHRoaXMuJGVsZW1lbnQub24oInRvdWNoZW5kIixkKSk6dGhpcy4kZWxlbWVudC5vbigiY2xpY2siLGQpOnRoaXMuaU9TKCk/KHRoaXMuJGVsZW1lbnQub24oImNsaWNrIiwnYTpub3QoW2NvbnRlbnRlZGl0YWJsZT0iZmFsc2UiXSknLGMpLHRoaXMuJGVsZW1lbnQub24oInRvdWNoZW5kIiwnYTpub3QoW2NvbnRlbnRlZGl0YWJsZT0iZmFsc2UiXSknLGQpLHRoaXMuJGVsZW1lbnQub24oImNsaWNrIiwnYVtjb250ZW50ZWRpdGFibGU9ImZhbHNlIl0nLGMpLHRoaXMuJGVsZW1lbnQub24oInRvdWNoZW5kIiwnYVtjb250ZW50ZWRpdGFibGU9ImZhbHNlIl0nLGMpKToodGhpcy4kZWxlbWVudC5vbigiY2xpY2siLCdhOm5vdChbY29udGVudGVkaXRhYmxlPSJmYWxzZSJdKScsZCksdGhpcy4kZWxlbWVudC5vbigiY2xpY2siLCdhW2NvbnRlbnRlZGl0YWJsZT0iZmFsc2UiXScsYykpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5kZXN0cm95TGluaz1mdW5jdGlvbigpe3RoaXMuJGxpbmtfd3JhcHBlci5odG1sKCIiKS5yZW1vdmVEYXRhKCkucmVtb3ZlKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLmluaXRMaW5rPWZ1bmN0aW9uKCl7dGhpcy5idWlsZENyZWF0ZUxpbmsoKSx0aGlzLmluaXRMaW5rRXZlbnRzKCksdGhpcy5hZGRMaXN0ZW5lcigiZGVzdHJveSIsdGhpcy5kZXN0cm95TGluayl9LGEuRWRpdGFibGUuaW5pdGlhbGl6ZXJzLnB1c2goYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5pdExpbmspLGEuRWRpdGFibGUucHJvdG90eXBlLnJlbW92ZUxpbms9ZnVuY3Rpb24oKXt0aGlzLmltYWdlTW9kZT8oIkEiPT10aGlzLiRlbGVtZW50LmZpbmQoIi5mLWltZy1lZGl0b3IiKS5wYXJlbnQoKS5nZXQoMCkudGFnTmFtZSYmYSh0aGlzLiRlbGVtZW50LmZpbmQoIi5mLWltZy1lZGl0b3IiKS5nZXQoMCkpLnVud3JhcCgpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZUxpbmtSZW1vdmVkIiksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLnNob3dJbWFnZUVkaXRvcigpLHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLWVkaXRvciIpLmZpbmQoImltZyIpLmNsaWNrKCksdGhpcy5saW5rPSExKToodGhpcy5yZXN0b3JlU2VsZWN0aW9uKCksZG9jdW1lbnQuZXhlY0NvbW1hbmQoInVubGluayIsITEsbnVsbCksdGhpcy5pc0xpbmt8fHRoaXMuJGVsZW1lbnQuZmluZCgiYTplbXB0eSIpLnJlbW92ZSgpLHRoaXMudHJpZ2dlckV2ZW50KCJsaW5rUmVtb3ZlZCIpLHRoaXMuc2F2ZVVuZG9TdGVwKCksdGhpcy5oaWRlTGlua1dyYXBwZXIoKSx0aGlzLiRidHRuX3dyYXBwZXIuc2hvdygpLCghdGhpcy5vcHRpb25zLmlubGluZU1vZGV8fHRoaXMuaXNMaW5rKSYmdGhpcy5oaWRlKCksdGhpcy5saW5rPSExKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUud3JpdGVMaW5rPWZ1bmN0aW9uKGIsYyxkLGUsZil7dmFyIGc7dGhpcy5vcHRpb25zLm5vRm9sbG93JiYoZj0hMCksdGhpcy5vcHRpb25zLmFsd2F5c0JsYW5rJiYoZT0hMCk7dmFyIGg9IiIsaT0iIjtmPT09ITAmJi9eaHR0cHM/OlwvXC8vLnRlc3QoYikmJihoPSdyZWw9Im5vZm9sbG93IicpLGU9PT0hMCYmKGk9J3RhcmdldD0iX2JsYW5rIicpO3ZhciBqPWI7aWYoYj10aGlzLnNhbml0aXplVVJMKGIpLHRoaXMub3B0aW9ucy5jb252ZXJ0TWFpbEFkZHJlc3Nlcyl7dmFyIGs9L1thLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT8vaTtrLnRlc3QoYikmJjAhPT1iLmluZGV4T2YoIm1haWx0bzoiKSYmKGI9Im1haWx0bzoiK2IpfWlmKCIiPT09YilyZXR1cm4gdGhpcy4kbGlua193cmFwcGVyLmZpbmQoImlucHV0LmYtbHUiKS5hZGRDbGFzcygiZnItZXJyb3IiKS5mb2N1cygpLHRoaXMudHJpZ2dlckV2ZW50KCJiYWRMaW5rIixbal0sITEpLCExO2lmKHRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCJpbnB1dC5mLWx1IikucmVtb3ZlQ2xhc3MoImZyLWVycm9yIiksdGhpcy5pbWFnZU1vZGUpe2lmKCJBIiE9dGhpcy4kZWxlbWVudC5maW5kKCIuZi1pbWctZWRpdG9yIikucGFyZW50KCkuZ2V0KDApLnRhZ05hbWUpdGhpcy4kZWxlbWVudC5maW5kKCIuZi1pbWctZWRpdG9yIikud3JhcCgnPGEgZGF0YS1mci1saW5rPSJ0cnVlIiBocmVmPSInK2IrJyIgJytpKyIgIitoKyI+PC9hPiIpO2Vsc2V7dmFyIGw9dGhpcy4kZWxlbWVudC5maW5kKCIuZi1pbWctZWRpdG9yIikucGFyZW50KCk7ZT09PSEwP2wuYXR0cigidGFyZ2V0IiwiX2JsYW5rIik6bC5yZW1vdmVBdHRyKCJ0YXJnZXQiKSxmPT09ITA/bC5hdHRyKCJyZWwiLCJub2ZvbGxvdyIpOmwucmVtb3ZlQXR0cigicmVsIiksbC5yZW1vdmVDbGFzcyhPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMubGlua0NsYXNzZXMpLmpvaW4oIiAiKSksbC5hdHRyKCJocmVmIixiKS5hZGRDbGFzcyhkKX10aGlzLnRyaWdnZXJFdmVudCgiaW1hZ2VMaW5rSW5zZXJ0ZWQiLFtiXSksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLnNob3dJbWFnZUVkaXRvcigpLHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLWVkaXRvciIpLmZpbmQoImltZyIpLmNsaWNrKCksdGhpcy5saW5rPSExfWVsc2V7dmFyIG09bnVsbDt0aGlzLmlzTGluaz8iIj09PWMmJihjPXRoaXMuJGVsZW1lbnQudGV4dCgpKToodGhpcy5yZXN0b3JlU2VsZWN0aW9uKCksZz10aGlzLmdldFNlbGVjdGlvbkxpbmtzKCksZy5sZW5ndGg+MCYmKG09Z1swXS5hdHRyaWJ1dGVzLGlzX2ZpbGU9YShnWzBdKS5oYXNDbGFzcygiZnItZmlsZSIpKSx0aGlzLnNhdmVTZWxlY3Rpb25CeU1hcmtlcnMoKSxkb2N1bWVudC5leGVjQ29tbWFuZCgidW5saW5rIiwhMSxiKSx0aGlzLiRlbGVtZW50LmZpbmQoJ3NwYW5bZGF0YS1mci1saW5rPSJ0cnVlIl0nKS5lYWNoKGZ1bmN0aW9uKGIsYyl7YShjKS5yZXBsYWNlV2l0aChhKGMpLmh0bWwoKSl9KSx0aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSksdGhpcy5pc0xpbms/KHRoaXMuJGVsZW1lbnQudGV4dChjKSxnPVt0aGlzLiRlbGVtZW50LmF0dHIoImhyZWYiLGIpLmdldCgwKV0pOih0aGlzLnJlbW92ZU1hcmtlcnMoKSwodGhpcy5vcHRpb25zLmxpbmtUZXh0fHwiIj09PXRoaXMudGV4dCgpKSYmKHRoaXMuaW5zZXJ0SFRNTCgnPHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIiBkYXRhLWlkPSIwIiBkYXRhLXR5cGU9InRydWUiPjwvc3Bhbj4nKyhjfHxiKSsnPHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIiBkYXRhLWlkPSIwIiBkYXRhLXR5cGU9ImZhbHNlIj48L3NwYW4+JyksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCkpLGRvY3VtZW50LmV4ZWNDb21tYW5kKCJjcmVhdGVMaW5rIiwhMSxiKSxnPXRoaXMuZ2V0U2VsZWN0aW9uTGlua3MoKSk7Zm9yKHZhciBuPTA7bjxnLmxlbmd0aDtuKyspe2lmKG0pZm9yKHZhciBvPTA7bzxtLmxlbmd0aDtvKyspImhyZWYiIT1tW29dLm5vZGVOYW1lJiZhKGdbbl0pLmF0dHIobVtvXS5ub2RlTmFtZSxtW29dLnZhbHVlKTtlPT09ITA/YShnW25dKS5hdHRyKCJ0YXJnZXQiLCJfYmxhbmsiKTphKGdbbl0pLnJlbW92ZUF0dHIoInRhcmdldCIpLGY9PT0hMCYmL15odHRwcz86XC9cLy8udGVzdChiKT9hKGdbbl0pLmF0dHIoInJlbCIsIm5vZm9sbG93Iik6YShnW25dKS5yZW1vdmVBdHRyKCJyZWwiKSxhKGdbbl0pLmRhdGEoImZyLWxpbmsiLCEwKSxhKGdbbl0pLnJlbW92ZUNsYXNzKE9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy5saW5rQ2xhc3Nlcykuam9pbigiICIpKSxhKGdbbl0pLmFkZENsYXNzKGQpfXRoaXMuJGVsZW1lbnQuZmluZCgiYTplbXB0eSIpLnJlbW92ZSgpLHRoaXMudHJpZ2dlckV2ZW50KCJsaW5rSW5zZXJ0ZWQiLFtiXSksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLmhpZGVMaW5rV3JhcHBlcigpLHRoaXMuJGJ0dG5fd3JhcHBlci5zaG93KCksKCF0aGlzLm9wdGlvbnMuaW5saW5lTW9kZXx8dGhpcy5pc0xpbmspJiZ0aGlzLmhpZGUoKSx0aGlzLmxpbms9ITF9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5jcmVhdGVMaW5rSFRNTD1mdW5jdGlvbigpe3ZhciBhPSc8ZGl2IGNsYXNzPSJmcm9hbGEtcG9wdXAgZnJvYWxhLWxpbmstcG9wdXAiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+JzthKz0nPGg0PjxzcGFuIGRhdGEtdGV4dD0idHJ1ZSI+SW5zZXJ0IGxpbms8L3NwYW4+PGEgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJPcGVuIExpbmsiIGNsYXNzPSJmLWV4dGVybmFsLWxpbmsiIGhyZWY9IiMiPjxpIGNsYXNzPSJmYSBmYS1leHRlcm5hbC1saW5rIj48L2k+PC9hPjxpIHRpdGxlPSJDYW5jZWwiIGNsYXNzPSJmYSBmYS10aW1lcyIgaWQ9ImYtbGluay1jbG9zZS0nK3RoaXMuX2lkKyciPjwvaT48L2g0PicsYSs9JzxkaXYgY2xhc3M9ImYtcG9wdXAtbGluZSBmci1oaWRkZW4iPjxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iVGV4dCIgY2xhc3M9ImYtbHQiIGlkPSJmLWx0LScrdGhpcy5faWQrJyI+PC9kaXY+Jzt2YXIgYj0iIjtpZih0aGlzLm9wdGlvbnMubGlua0xpc3QubGVuZ3RoJiYoYj0iZi1iaSIpLGErPSc8ZGl2IGNsYXNzPSJmLXBvcHVwLWxpbmUiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iaHR0cDovL3d3dy5leGFtcGxlLmNvbSIgY2xhc3M9ImYtbHUgJytiKyciIGlkPSJmLWx1LScrdGhpcy5faWQrJyIvPicsdGhpcy5vcHRpb25zLmxpbmtMaXN0Lmxlbmd0aCl7YSs9JzxidXR0b24gY2xhc3M9ImYtYnJvd3NlLWxpbmtzIiBpZD0iZi1icm93c2UtbGlua3MtJyt0aGlzLl9pZCsnIj48aSBjbGFzcz0iZmEgZmEtY2hldnJvbi1kb3duIj48L2k+PC9idXR0b24+JyxhKz0nPHVsIGlkPSJmLWxpbmstbGlzdC0nK3RoaXMuX2lkKyciPic7Zm9yKHZhciBjPTA7Yzx0aGlzLm9wdGlvbnMubGlua0xpc3QubGVuZ3RoO2MrKyl7dmFyIGQ9dGhpcy5vcHRpb25zLmxpbmtMaXN0W2NdO2ErPSc8bGkgY2xhc3M9ImYtY2hvb3NlLWxpbmsiIGRhdGEtbm9mb2xsb3c9IicrZC5ub2ZvbGxvdysnIiBkYXRhLWJsYW5rPSInK2QuYmxhbmsrJyIgZGF0YS1ib2R5PSInK2QuYm9keSsnIiBkYXRhLXRpdGxlPSInK2QudGl0bGUrJyIgZGF0YS1ocmVmPSInK2QuaHJlZisnIj4nK2QuYm9keSsiPC9saT4ifWErPSI8L3VsPiJ9aWYoYSs9IjwvZGl2PiIsT2JqZWN0LmtleXModGhpcy5vcHRpb25zLmxpbmtDbGFzc2VzKS5sZW5ndGgpe2ErPSc8ZGl2IGNsYXNzPSJmLXBvcHVwLWxpbmUiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iQ2hvb3NlIGxpbmsgdHlwZSIgY2xhc3M9ImYtbHUgZi1iaSIgaWQ9ImYtbHVjLScrdGhpcy5faWQrJyIgZGlzYWJsZWQ9ImRpc2FibGVkIi8+JyxhKz0nPGJ1dHRvbiBjbGFzcz0iZi1icm93c2UtbGlua3MiIGlkPSJmLWxpbmtzLWNsYXNzLScrdGhpcy5faWQrJyI+PGkgY2xhc3M9ImZhIGZhLWNoZXZyb24tZG93biI+PC9pPjwvYnV0dG9uPicsYSs9Jzx1bCBpZD0iZi1saW5rLWNsYXNzLWxpc3QtJyt0aGlzLl9pZCsnIj4nO2Zvcih2YXIgZSBpbiB0aGlzLm9wdGlvbnMubGlua0NsYXNzZXMpe3ZhciBmPXRoaXMub3B0aW9ucy5saW5rQ2xhc3Nlc1tlXTthKz0nPGxpIGNsYXNzPSJmLWNob29zZS1saW5rLWNsYXNzIiBkYXRhLWNsYXNzPSInK2UrJyI+JytmKyI8L2xpPiJ9YSs9IjwvdWw+IixhKz0iPC9kaXY+In1yZXR1cm4gYSs9JzxkaXYgY2xhc3M9ImYtcG9wdXAtbGluZSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZi1jaGVja2JveC0nK3RoaXMuX2lkKyciPiA8bGFiZWwgZGF0YS10ZXh0PSJ0cnVlIiBmb3I9ImYtY2hlY2tib3gtJyt0aGlzLl9pZCsnIj5PcGVuIGluIG5ldyB0YWI8L2xhYmVsPjxidXR0b24gZGF0YS10ZXh0PSJ0cnVlIiB0eXBlPSJidXR0b24iIGNsYXNzPSJmLW9rIiBpZD0iZi1vay0nK3RoaXMuX2lkKyciPk9LPC9idXR0b24+Jyx0aGlzLm9wdGlvbnMudW5saW5rQnV0dG9uJiYoYSs9JzxidXR0b24gdHlwZT0iYnV0dG9uIiBkYXRhLXRleHQ9InRydWUiIGNsYXNzPSJmLW9rIGYtdW5saW5rIiBpZD0iZi11bmxpbmstJyt0aGlzLl9pZCsnIj5VTkxJTks8L2J1dHRvbj4nKSxhKz0iPC9kaXY+PC9kaXY+In0sYS5FZGl0YWJsZS5wcm90b3R5cGUuYnVpbGRDcmVhdGVMaW5rPWZ1bmN0aW9uKCl7dGhpcy4kbGlua193cmFwcGVyPWEodGhpcy5jcmVhdGVMaW5rSFRNTCgpKSx0aGlzLiRwb3B1cF9lZGl0b3IuYXBwZW5kKHRoaXMuJGxpbmtfd3JhcHBlcik7dmFyIGI9dGhpczt0aGlzLmFkZExpc3RlbmVyKCJoaWRlUG9wdXBzIix0aGlzLmhpZGVMaW5rV3JhcHBlciksdGhpcy4kbGlua193cmFwcGVyLm9uKCJtb3VzZXVwIixhLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuaXNSZXNpemluZygpfHwoYS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLiRsaW5rX3dyYXBwZXIudHJpZ2dlcigiaGlkZUxpbmtMaXN0IikpfSx0aGlzKSksdGhpcy5vcHRpb25zLmxpbmtUZXh0JiZ0aGlzLiRsaW5rX3dyYXBwZXIub24oIm1vdXNldXAga2V5ZG93biIsImlucHV0I2YtbHQtIit0aGlzLl9pZCxhLnByb3h5KGZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2g7YiYmMjc9PT1ifHxhLnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuJGxpbmtfd3JhcHBlci50cmlnZ2VyKCJoaWRlTGlua0xpc3QiKSx0aGlzLiRsaW5rX3dyYXBwZXIudHJpZ2dlcigiaGlkZUxpbmtDbGFzc0xpc3QiKX0sdGhpcykpLHRoaXMuJGxpbmtfd3JhcHBlci5vbigibW91c2V1cCBrZXlkb3duIiwiaW5wdXQjZi1sdS0iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oYSl7dmFyIGI9YS53aGljaDtiJiYyNz09PWJ8fGEuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy4kbGlua193cmFwcGVyLnRyaWdnZXIoImhpZGVMaW5rTGlzdCIpLHRoaXMuJGxpbmtfd3JhcHBlci50cmlnZ2VyKCJoaWRlTGlua0NsYXNzTGlzdCIpfSx0aGlzKSksdGhpcy4kbGlua193cmFwcGVyLm9uKCJjbGljayBrZXlkb3duIiwiaW5wdXQjZi1jaGVja2JveC0iK3RoaXMuX2lkLGZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2g7YiYmMjc9PT1ifHxhLnN0b3BQcm9wYWdhdGlvbigpfSksdGhpcy4kbGlua193cmFwcGVyLm9uKCJ0b3VjaGVuZCIsImJ1dHRvbiNmLW9rLSIrdGhpcy5faWQsZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24oKX0pLm9uKCJjbGljayIsImJ1dHRvbiNmLW9rLSIrdGhpcy5faWQsYS5wcm94eShmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy4kbGlua193cmFwcGVyLmZpbmQoImlucHV0I2YtbHQtIit0aGlzLl9pZCksYz10aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgiaW5wdXQjZi1sdS0iK3RoaXMuX2lkKSxkPXRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCJpbnB1dCNmLWx1Yy0iK3RoaXMuX2lkKSxlPXRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCJpbnB1dCNmLWNoZWNrYm94LSIrdGhpcy5faWQpO2E9Yj9iLnZhbCgpOiIiO3ZhciBmPWMudmFsKCk7dGhpcy5pc0xpbmsmJiIiPT09ZiYmKGY9IiMiKTt2YXIgZz0iIjtkJiYoZz1kLmRhdGEoImNsYXNzIikpLHRoaXMud3JpdGVMaW5rKGYsYSxnLGUucHJvcCgiY2hlY2tlZCIpKX0sdGhpcykpLHRoaXMuJGxpbmtfd3JhcHBlci5vbigiY2xpY2sgdG91Y2giLCJidXR0b24jZi11bmxpbmstIit0aGlzLl9pZCxhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5saW5rPSEwLHRoaXMucmVtb3ZlTGluaygpfSx0aGlzKSksdGhpcy5vcHRpb25zLmxpbmtMaXN0Lmxlbmd0aCYmKHRoaXMuJGxpbmtfd3JhcHBlci5vbigiY2xpY2sgdG91Y2giLCJsaS5mLWNob29zZS1saW5rIixmdW5jdGlvbigpe3ZhciBjPWIuJGxpbmtfd3JhcHBlci5maW5kKCJidXR0b24jZi1icm93c2UtbGlua3MtIitiLl9pZCksZD1iLiRsaW5rX3dyYXBwZXIuZmluZCgiaW5wdXQjZi1sdC0iK2IuX2lkKSxlPWIuJGxpbmtfd3JhcHBlci5maW5kKCJpbnB1dCNmLWx1LSIrYi5faWQpLGY9Yi4kbGlua193cmFwcGVyLmZpbmQoImlucHV0I2YtY2hlY2tib3gtIitiLl9pZCk7ZCYmZC52YWwoYSh0aGlzKS5kYXRhKCJib2R5IikpLGUudmFsKGEodGhpcykuZGF0YSgiaHJlZiIpKSxmLnByb3AoImNoZWNrZWQiLGEodGhpcykuZGF0YSgiYmxhbmsiKSksYy5jbGljaygpfSkub24oIm1vdXNldXAiLCJsaS5mLWNob29zZS1saW5rIixmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfSksdGhpcy4kbGlua193cmFwcGVyLm9uKCJjbGljayIsImJ1dHRvbiNmLWJyb3dzZS1saW5rcy0iK3RoaXMuX2lkLGZ1bmN0aW9uKGMpe2Muc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGQ9Yi4kbGlua193cmFwcGVyLmZpbmQoInVsI2YtbGluay1saXN0LSIrYi5faWQpO2IuJGxpbmtfd3JhcHBlci50cmlnZ2VyKCJoaWRlTGlua0NsYXNzTGlzdCIpLGEodGhpcykuZmluZCgiaSIpLnRvZ2dsZUNsYXNzKCJmYS1jaGV2cm9uLWRvd24iKSxhKHRoaXMpLmZpbmQoImkiKS50b2dnbGVDbGFzcygiZmEtY2hldnJvbi11cCIpLGQudG9nZ2xlKCl9KS5vbigibW91c2V1cCIsImJ1dHRvbiNmLWJyb3dzZS1saW5rcy0iK3RoaXMuX2lkLGZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCl9KSx0aGlzLiRsaW5rX3dyYXBwZXIuYmluZCgiaGlkZUxpbmtMaXN0IixmdW5jdGlvbigpe3ZhciBhPWIuJGxpbmtfd3JhcHBlci5maW5kKCJ1bCNmLWxpbmstbGlzdC0iK2IuX2lkKSxjPWIuJGxpbmtfd3JhcHBlci5maW5kKCJidXR0b24jZi1icm93c2UtbGlua3MtIitiLl9pZCk7YSYmYS5pcygiOnZpc2libGUiKSYmYy5jbGljaygpfSkpLE9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy5saW5rQ2xhc3NlcykubGVuZ3RoJiYodGhpcy4kbGlua193cmFwcGVyLm9uKCJtb3VzZXVwIGtleWRvd24iLCJpbnB1dCNmLWx1Yy0iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oYSl7dmFyIGI9YS53aGljaDtiJiYyNz09PWJ8fGEuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy4kbGlua193cmFwcGVyLnRyaWdnZXIoImhpZGVMaW5rTGlzdCIpLHRoaXMuJGxpbmtfd3JhcHBlci50cmlnZ2VyKCJoaWRlTGlua0NsYXNzTGlzdCIpfSx0aGlzKSksdGhpcy4kbGlua193cmFwcGVyLm9uKCJjbGljayB0b3VjaCIsImxpLmYtY2hvb3NlLWxpbmstY2xhc3MiLGZ1bmN0aW9uKCl7dmFyIGM9Yi4kbGlua193cmFwcGVyLmZpbmQoImlucHV0I2YtbHVjLSIrYi5faWQpO2MudmFsKGEodGhpcykudGV4dCgpKSxjLmRhdGEoImNsYXNzIixhKHRoaXMpLmRhdGEoImNsYXNzIikpLGIuJGxpbmtfd3JhcHBlci50cmlnZ2VyKCJoaWRlTGlua0NsYXNzTGlzdCIpfSkub24oIm1vdXNldXAiLCJsaS5mLWNob29zZS1saW5rLWNsYXNzIixmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfSksdGhpcy4kbGlua193cmFwcGVyLm9uKCJjbGljayIsImJ1dHRvbiNmLWxpbmtzLWNsYXNzLSIrdGhpcy5faWQsZnVuY3Rpb24oYyl7Yy5zdG9wUHJvcGFnYXRpb24oKSxiLiRsaW5rX3dyYXBwZXIudHJpZ2dlcigiaGlkZUxpbmtMaXN0Iik7dmFyIGQ9Yi4kbGlua193cmFwcGVyLmZpbmQoInVsI2YtbGluay1jbGFzcy1saXN0LSIrYi5faWQpO2EodGhpcykuZmluZCgiaSIpLnRvZ2dsZUNsYXNzKCJmYS1jaGV2cm9uLWRvd24iKSxhKHRoaXMpLmZpbmQoImkiKS50b2dnbGVDbGFzcygiZmEtY2hldnJvbi11cCIpLGQudG9nZ2xlKCl9KS5vbigibW91c2V1cCIsImJ1dHRvbiNmLWxpbmtzLWNsYXNzLSIrdGhpcy5faWQsZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24oKX0pLHRoaXMuJGxpbmtfd3JhcHBlci5iaW5kKCJoaWRlTGlua0NsYXNzTGlzdCIsZnVuY3Rpb24oKXt2YXIgYT1iLiRsaW5rX3dyYXBwZXIuZmluZCgidWwjZi1saW5rLWNsYXNzLWxpc3QtIitiLl9pZCksYz1iLiRsaW5rX3dyYXBwZXIuZmluZCgiYnV0dG9uI2YtbGlua3MtY2xhc3MtIitiLl9pZCk7YSYmYS5pcygiOnZpc2libGUiKSYmYy5jbGljaygpfSkpLHRoaXMuJGxpbmtfd3JhcHBlci5vbigiY2xpY2siLCJpI2YtbGluay1jbG9zZS0iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLiRidHRuX3dyYXBwZXIuc2hvdygpLHRoaXMuaGlkZUxpbmtXcmFwcGVyKCksKCF0aGlzLm9wdGlvbnMuaW5saW5lTW9kZSYmIXRoaXMuaW1hZ2VNb2RlfHx0aGlzLmlzTGlua3x8MD09PXRoaXMub3B0aW9ucy5idXR0b25zLmxlbmd0aCkmJnRoaXMuaGlkZSgpLHRoaXMuaW1hZ2VNb2RlP3RoaXMuc2hvd0ltYWdlRWRpdG9yKCk6dGhpcy5yZXN0b3JlU2VsZWN0aW9uKCl9LHRoaXMpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uTGlua3M9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlPVtdO2lmKHdpbmRvdy5nZXRTZWxlY3Rpb24pe3ZhciBmPXdpbmRvdy5nZXRTZWxlY3Rpb24oKTtpZihmLmdldFJhbmdlQXQmJmYucmFuZ2VDb3VudCl7ZD1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO2Zvcih2YXIgZz0wO2c8Zi5yYW5nZUNvdW50OysrZylpZihhPWYuZ2V0UmFuZ2VBdChnKSxiPWEuY29tbW9uQW5jZXN0b3JDb250YWluZXIsYiYmMSE9Yi5ub2RlVHlwZSYmKGI9Yi5wYXJlbnROb2RlKSxiJiYiYSI9PWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSllLnB1c2goYik7ZWxzZXtjPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKTtmb3IodmFyIGg9MDtoPGMubGVuZ3RoOysraClkLnNlbGVjdE5vZGVDb250ZW50cyhjW2hdKSxkLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLkVORF9UT19TVEFSVCxhKTwxJiZkLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLlNUQVJUX1RPX0VORCxhKT4tMSYmZS5wdXNoKGNbaF0pfX19ZWxzZSBpZihkb2N1bWVudC5zZWxlY3Rpb24mJiJDb250cm9sIiE9ZG9jdW1lbnQuc2VsZWN0aW9uLnR5cGUpaWYoYT1kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKSxiPWEucGFyZW50RWxlbWVudCgpLCJhIj09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKWUucHVzaChiKTtlbHNle2M9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpLGQ9ZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtmb3IodmFyIGk9MDtpPGMubGVuZ3RoOysraSlkLm1vdmVUb0VsZW1lbnRUZXh0KGNbaV0pLGQuY29tcGFyZUVuZFBvaW50cygiU3RhcnRUb0VuZCIsYSk+LTEmJmQuY29tcGFyZUVuZFBvaW50cygiRW5kVG9TdGFydCIsYSk8MSYmZS5wdXNoKGNbaV0pfXJldHVybiBlfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pbnNlcnRMaW5rPWZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmlubGluZU1vZGV8fCh0aGlzLmNsb3NlSW1hZ2VNb2RlKCksdGhpcy5pbWFnZU1vZGU9ITEsdGhpcy5wb3NpdGlvblBvcHVwKCJjcmVhdGVMaW5rIikpLHRoaXMuc2hvd0luc2VydExpbmsoKSx0aGlzLnNhdmVTZWxlY3Rpb24oKTt2YXIgYj10aGlzLmdldFNlbGVjdGlvbkxpbmsoKXx8IiIsYz10aGlzLmdldFNlbGVjdGlvbkxpbmtzKCk7Yy5sZW5ndGg+MD8odGhpcy4kbGlua193cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9ImNoZWNrYm94Il0nKS5wcm9wKCJjaGVja2VkIiwiX2JsYW5rIj09YShjWzBdKS5hdHRyKCJ0YXJnZXQiKSksdGhpcy4kbGlua193cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9InRleHQiXS5mLWx0JykudmFsKGEoY1swXSkudGV4dCgpfHwiIiksYShjWzBdKS5oYXNDbGFzcygiZnItZmlsZSIpP3RoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0uZi1sdScpLmF0dHIoImRpc2FibGVkIiwiZGlzYWJsZWQiKTp0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgnaW5wdXRbdHlwZT0idGV4dCJdLmYtbHUnKS5yZW1vdmVBdHRyKCJkaXNhYmxlZCIpLHRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCJhLmYtZXh0ZXJuYWwtbGluaywgYnV0dG9uLmYtdW5saW5rIikuc2hvdygpKToodGhpcy4kbGlua193cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9ImNoZWNrYm94Il0nKS5wcm9wKCJjaGVja2VkIix0aGlzLm9wdGlvbnMuYWx3YXlzQmxhbmspLHRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0uZi1sdCcpLnZhbCh0aGlzLnRleHQoKSksdGhpcy4kbGlua193cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9InRleHQiXS5mLWx1JykucmVtb3ZlQXR0cigiZGlzYWJsZWQiKSx0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgiYS5mLWV4dGVybmFsLWxpbmssIGJ1dHRvbi5mLXVubGluayIpLmhpZGUoKSksdGhpcy4kbGlua193cmFwcGVyLmZpbmQoIi5mLWV4dGVybmFsLWxpbmsiKS5hdHRyKCJocmVmIixifHwiIyIpLHRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0uZi1sdScpLnZhbChiLnJlcGxhY2UoL1wmYW1wOy9nLCImIil8fCJodHRwOi8vIil9fShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EuRWRpdGFibGUucHJvdG90eXBlLmJyb3dzZXJGaXhlcz1mdW5jdGlvbigpe3RoaXMucHJlQmxvY2txdW90ZUVudGVyKCksdGhpcy5kb21JbnNlcnQoKSx0aGlzLmZpeElNRSgpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5wcmVCbG9ja3F1b3RlRW50ZXI9ZnVuY3Rpb24oKXt0aGlzLmlzSW1hZ2V8fHRoaXMuaXNMaW5rfHx0aGlzLm9wdGlvbnMuZWRpdEluUG9wdXB8fHRoaXMuJGVsZW1lbnQub24oImtleWRvd24iLGEucHJveHkoZnVuY3Rpb24oYil7dmFyIGM9Yi53aGljaCxkPVsiUFJFIiwiQkxPQ0tRVU9URSJdLGU9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpWzBdO2lmKDEzPT1jJiYiIj09PXRoaXMudGV4dCgpJiZkLmluZGV4T2YoZS50YWdOYW1lKT49MCYmMD09PWEoZSkucGFyZW50cygidWwsIG9sIikubGVuZ3RoKWlmKHRoaXMuZ2V0U2VsZWN0aW9uVGV4dEluZm8oZSkuYXRFbmQmJiFiLnNoaWZ0S2V5KXtiLnByZXZlbnREZWZhdWx0KCk7dmFyIGY9YSgiPHA+PGJyPjwvcD4iKTthKGUpLmFmdGVyKGYpLHRoaXMuc2V0U2VsZWN0aW9uKGYuZ2V0KDApKX1lbHNlKHRoaXMuYnJvd3Nlci53ZWJraXR8fHRoaXMuYnJvd3Nlci5tc2llKSYmKGIucHJldmVudERlZmF1bHQoKSx0aGlzLmluc2VydEhUTUwodGhpcy5lbmRzV2l0aChhKGUpLmh0bWwoKSwiPGJyPiIpfHwhdGhpcy5nZXRTZWxlY3Rpb25UZXh0SW5mbyhlKS5hdEVuZD8iPGJyPiI6Ijxicj48YnI+IikpfSx0aGlzKSl9LGEuRWRpdGFibGUucHJvdG90eXBlLmRvbUluc2VydD1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQub24oIkRPTU5vZGVJbnNlcnRlZCIsYS5wcm94eShmdW5jdGlvbihiKXsiU1BBTiIhPWIudGFyZ2V0LnRhZ05hbWV8fGEoYi50YXJnZXQpLmF0dHIoImRhdGEtZnItdmVyaWZpZWQiKXx8dGhpcy5ub192ZXJpZnl8fChhKGIudGFyZ2V0KS5iZWZvcmUoYShiLnRhcmdldCkuY29udGVudHMoKSksYShiLnRhcmdldCkucmVtb3ZlKCkpfSx0aGlzKSl9LGEuRWRpdGFibGUucHJvdG90eXBlLmZpeElNRT1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQuZ2V0KDApLm1zR2V0SW5wdXRDb250ZXh0JiYodGhpcy4kZWxlbWVudC5nZXQoMCkubXNHZXRJbnB1dENvbnRleHQoKS5hZGRFdmVudExpc3RlbmVyKCJNU0NhbmRpZGF0ZVdpbmRvd1Nob3ciLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmltZT0hMH0sdGhpcykpLHRoaXMuJGVsZW1lbnQuZ2V0KDApLm1zR2V0SW5wdXRDb250ZXh0KCkuYWRkRXZlbnRMaXN0ZW5lcigiTVNDYW5kaWRhdGVXaW5kb3dIaWRlIixhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5pbWU9ITEsdGhpcy4kZWxlbWVudC50cmlnZ2VyKCJrZXlkb3duIiksdGhpcy5vbGRIVE1MPSIifSx0aGlzKSkpfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXsiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbImpxdWVyeSJdLGEpOmEoalF1ZXJ5KX0oZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2Z1bmN0aW9uIGIoKXtkPyhjKCksTShiKSxlPSEwLGQ9ITEpOmU9ITF9dmFyIGM9YSxkPSExLGU9ITE7dGhpcy5raWNrPWZ1bmN0aW9uKCl7ZD0hMCxlfHxiKCl9LHRoaXMuZW5kPWZ1bmN0aW9uKGEpe3ZhciBiPWM7YSYmKGU/KGM9ZD9mdW5jdGlvbigpe2IoKSxhKCl9OmEsZD0hMCk6YSgpKX19ZnVuY3Rpb24gZCgpe3JldHVybiEwfWZ1bmN0aW9uIGUoKXtyZXR1cm4hMX1mdW5jdGlvbiBmKGEpe2EucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiBnKGEpe05bYS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpXXx8YS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIGgoYSl7cmV0dXJuIDE9PT1hLndoaWNoJiYhYS5jdHJsS2V5JiYhYS5hbHRLZXl9ZnVuY3Rpb24gaShhLGIpe3ZhciBjLGQ7aWYoYS5pZGVudGlmaWVkVG91Y2gpcmV0dXJuIGEuaWRlbnRpZmllZFRvdWNoKGIpO2ZvcihjPS0xLGQ9YS5sZW5ndGg7KytjPGQ7KWlmKGFbY10uaWRlbnRpZmllcj09PWIpcmV0dXJuIGFbY119ZnVuY3Rpb24gaihhLGIpe3ZhciBjPWkoYS5jaGFuZ2VkVG91Y2hlcyxiLmlkZW50aWZpZXIpO2lmKGMmJihjLnBhZ2VYIT09Yi5wYWdlWHx8Yy5wYWdlWSE9PWIucGFnZVkpKXJldHVybiBjfWZ1bmN0aW9uIGsoYSl7dmFyIGI7aChhKSYmKGI9e3RhcmdldDphLnRhcmdldCxzdGFydFg6YS5wYWdlWCxzdGFydFk6YS5wYWdlWSx0aW1lU3RhbXA6YS50aW1lU3RhbXB9LEooZG9jdW1lbnQsTy5tb3ZlLGwsYiksSihkb2N1bWVudCxPLmNhbmNlbCxtLGIpKX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEuZGF0YTtzKGEsYixhLG4pfWZ1bmN0aW9uIG0oKXtuKCl9ZnVuY3Rpb24gbigpe0soZG9jdW1lbnQsTy5tb3ZlLGwpLEsoZG9jdW1lbnQsTy5jYW5jZWwsbSl9ZnVuY3Rpb24gbyhhKXt2YXIgYixjO05bYS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpXXx8KGI9YS5jaGFuZ2VkVG91Y2hlc1swXSxjPXt0YXJnZXQ6Yi50YXJnZXQsc3RhcnRYOmIucGFnZVgsc3RhcnRZOmIucGFnZVksdGltZVN0YW1wOmEudGltZVN0YW1wLGlkZW50aWZpZXI6Yi5pZGVudGlmaWVyfSxKKGRvY3VtZW50LFAubW92ZSsiLiIrYi5pZGVudGlmaWVyLHAsYyksSihkb2N1bWVudCxQLmNhbmNlbCsiLiIrYi5pZGVudGlmaWVyLHEsYykpfWZ1bmN0aW9uIHAoYSl7dmFyIGI9YS5kYXRhLGM9aihhLGIpO2MmJnMoYSxiLGMscil9ZnVuY3Rpb24gcShhKXt2YXIgYj1hLmRhdGEsYz1pKGEuY2hhbmdlZFRvdWNoZXMsYi5pZGVudGlmaWVyKTtjJiZyKGIuaWRlbnRpZmllcil9ZnVuY3Rpb24gcihhKXtLKGRvY3VtZW50LCIuIithLHApLEsoZG9jdW1lbnQsIi4iK2EscSl9ZnVuY3Rpb24gcyhhLGIsYyxkKXt2YXIgZT1jLnBhZ2VYLWIuc3RhcnRYLGY9Yy5wYWdlWS1iLnN0YXJ0WTtJKkk+ZSplK2YqZnx8dihhLGIsYyxlLGYsZCl9ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9oYW5kbGVkPWQsITF9ZnVuY3Rpb24gdShhKXt0cnl7YS5faGFuZGxlZCgpfWNhdGNoKGIpe3JldHVybiExfX1mdW5jdGlvbiB2KGEsYixjLGQsZSxmKXt7dmFyIGcsaDtiLnRhcmdldH1nPWEudGFyZ2V0VG91Y2hlcyxoPWEudGltZVN0YW1wLWIudGltZVN0YW1wLGIudHlwZT0ibW92ZXN0YXJ0IixiLmRpc3RYPWQsYi5kaXN0WT1lLGIuZGVsdGFYPWQsYi5kZWx0YVk9ZSxiLnBhZ2VYPWMucGFnZVgsYi5wYWdlWT1jLnBhZ2VZLGIudmVsb2NpdHlYPWQvaCxiLnZlbG9jaXR5WT1lL2gsYi50YXJnZXRUb3VjaGVzPWcsYi5maW5nZXI9Zz9nLmxlbmd0aDoxLGIuX2hhbmRsZWQ9dCxiLl9wcmV2ZW50VG91Y2htb3ZlRGVmYXVsdD1mdW5jdGlvbigpe2EucHJldmVudERlZmF1bHQoKX0sTChiLnRhcmdldCxiKSxmKGIuaWRlbnRpZmllcil9ZnVuY3Rpb24gdyhhKXt2YXIgYj1hLmRhdGEudGltZXI7YS5kYXRhLnRvdWNoPWEsYS5kYXRhLnRpbWVTdGFtcD1hLnRpbWVTdGFtcCxiLmtpY2soKX1mdW5jdGlvbiB4KGEpe3ZhciBiPWEuZGF0YS5ldmVudCxjPWEuZGF0YS50aW1lcjt5KCksRChiLGMsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SyhiLnRhcmdldCwiY2xpY2siLGUpfSwwKX0pfWZ1bmN0aW9uIHkoKXtLKGRvY3VtZW50LE8ubW92ZSx3KSxLKGRvY3VtZW50LE8uZW5kLHgpfWZ1bmN0aW9uIHooYSl7dmFyIGI9YS5kYXRhLmV2ZW50LGM9YS5kYXRhLnRpbWVyLGQ9aihhLGIpO2QmJihhLnByZXZlbnREZWZhdWx0KCksYi50YXJnZXRUb3VjaGVzPWEudGFyZ2V0VG91Y2hlcyxhLmRhdGEudG91Y2g9ZCxhLmRhdGEudGltZVN0YW1wPWEudGltZVN0YW1wLGMua2ljaygpKX1mdW5jdGlvbiBBKGEpe3ZhciBiPWEuZGF0YS5ldmVudCxjPWEuZGF0YS50aW1lcixkPWkoYS5jaGFuZ2VkVG91Y2hlcyxiLmlkZW50aWZpZXIpO2QmJihCKGIpLEQoYixjKSl9ZnVuY3Rpb24gQihhKXtLKGRvY3VtZW50LCIuIithLmlkZW50aWZpZXIseiksSyhkb2N1bWVudCwiLiIrYS5pZGVudGlmaWVyLEEpfWZ1bmN0aW9uIEMoYSxiLGMpe3ZhciBkPWMtYS50aW1lU3RhbXA7YS50eXBlPSJtb3ZlIixhLmRpc3RYPWIucGFnZVgtYS5zdGFydFgsYS5kaXN0WT1iLnBhZ2VZLWEuc3RhcnRZLGEuZGVsdGFYPWIucGFnZVgtYS5wYWdlWCxhLmRlbHRhWT1iLnBhZ2VZLWEucGFnZVksYS52ZWxvY2l0eVg9LjMqYS52ZWxvY2l0eVgrLjcqYS5kZWx0YVgvZCxhLnZlbG9jaXR5WT0uMyphLnZlbG9jaXR5WSsuNyphLmRlbHRhWS9kLGEucGFnZVg9Yi5wYWdlWCxhLnBhZ2VZPWIucGFnZVl9ZnVuY3Rpb24gRChhLGIsYyl7Yi5lbmQoZnVuY3Rpb24oKXtyZXR1cm4gYS50eXBlPSJtb3ZlZW5kIixMKGEudGFyZ2V0LGEpLGMmJmMoKX0pfWZ1bmN0aW9uIEUoKXtyZXR1cm4gSih0aGlzLCJtb3Zlc3RhcnQubW92ZSIsdSksITB9ZnVuY3Rpb24gRigpe3JldHVybiBLKHRoaXMsImRyYWdzdGFydCBkcmFnIixmKSxLKHRoaXMsIm1vdXNlZG93biB0b3VjaHN0YXJ0IixnKSxLKHRoaXMsIm1vdmVzdGFydCIsdSksITB9ZnVuY3Rpb24gRyhhKXsibW92ZSIhPT1hLm5hbWVzcGFjZSYmIm1vdmVlbmQiIT09YS5uYW1lc3BhY2UmJihKKHRoaXMsImRyYWdzdGFydC4iK2EuZ3VpZCsiIGRyYWcuIithLmd1aWQsZixiLGEuc2VsZWN0b3IpLEoodGhpcywibW91c2Vkb3duLiIrYS5ndWlkLGcsYixhLnNlbGVjdG9yKSl9ZnVuY3Rpb24gSChhKXsibW92ZSIhPT1hLm5hbWVzcGFjZSYmIm1vdmVlbmQiIT09YS5uYW1lc3BhY2UmJihLKHRoaXMsImRyYWdzdGFydC4iK2EuZ3VpZCsiIGRyYWcuIithLmd1aWQpLEsodGhpcywibW91c2Vkb3duLiIrYS5ndWlkKSl9dmFyIEk9NixKPWEuZXZlbnQuYWRkLEs9YS5ldmVudC5yZW1vdmUsTD1mdW5jdGlvbihiLGMsZCl7YS5ldmVudC50cmlnZ2VyKGMsZCxiKX0sTT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXthKCkKfSwyNSl9fSgpLE49e3RleHRhcmVhOiEwLGlucHV0OiEwLHNlbGVjdDohMCxidXR0b246ITB9LE89e21vdmU6Im1vdXNlbW92ZSIsY2FuY2VsOiJtb3VzZXVwIGRyYWdzdGFydCIsZW5kOiJtb3VzZXVwIn0sUD17bW92ZToidG91Y2htb3ZlIixjYW5jZWw6InRvdWNoZW5kIixlbmQ6InRvdWNoZW5kIn07YS5ldmVudC5zcGVjaWFsLm1vdmVzdGFydD17c2V0dXA6RSx0ZWFyZG93bjpGLGFkZDpHLHJlbW92ZTpILF9kZWZhdWx0OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoKXtDKGYsZy50b3VjaCxnLnRpbWVTdGFtcCksTChhLnRhcmdldCxmKX12YXIgZixnO2EuX2hhbmRsZWQoKSYmKGY9e3RhcmdldDphLnRhcmdldCxzdGFydFg6YS5zdGFydFgsc3RhcnRZOmEuc3RhcnRZLHBhZ2VYOmEucGFnZVgscGFnZVk6YS5wYWdlWSxkaXN0WDphLmRpc3RYLGRpc3RZOmEuZGlzdFksZGVsdGFYOmEuZGVsdGFYLGRlbHRhWTphLmRlbHRhWSx2ZWxvY2l0eVg6YS52ZWxvY2l0eVgsdmVsb2NpdHlZOmEudmVsb2NpdHlZLHRpbWVTdGFtcDphLnRpbWVTdGFtcCxpZGVudGlmaWVyOmEuaWRlbnRpZmllcix0YXJnZXRUb3VjaGVzOmEudGFyZ2V0VG91Y2hlcyxmaW5nZXI6YS5maW5nZXJ9LGc9e2V2ZW50OmYsdGltZXI6bmV3IGMoZCksdG91Y2g6Yix0aW1lU3RhbXA6Yn0sYS5pZGVudGlmaWVyPT09Yj8oSihhLnRhcmdldCwiY2xpY2siLGUpLEooZG9jdW1lbnQsTy5tb3ZlLHcsZyksSihkb2N1bWVudCxPLmVuZCx4LGcpKTooYS5fcHJldmVudFRvdWNobW92ZURlZmF1bHQoKSxKKGRvY3VtZW50LFAubW92ZSsiLiIrYS5pZGVudGlmaWVyLHosZyksSihkb2N1bWVudCxQLmVuZCsiLiIrYS5pZGVudGlmaWVyLEEsZykpKX19LGEuZXZlbnQuc3BlY2lhbC5tb3ZlPXtzZXR1cDpmdW5jdGlvbigpe0oodGhpcywibW92ZXN0YXJ0Lm1vdmUiLGEubm9vcCl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7Syh0aGlzLCJtb3Zlc3RhcnQubW92ZSIsYS5ub29wKX19LGEuZXZlbnQuc3BlY2lhbC5tb3ZlZW5kPXtzZXR1cDpmdW5jdGlvbigpe0oodGhpcywibW92ZXN0YXJ0Lm1vdmVlbmQiLGEubm9vcCl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7Syh0aGlzLCJtb3Zlc3RhcnQubW92ZWVuZCIsYS5ub29wKX19LEooZG9jdW1lbnQsIm1vdXNlZG93bi5tb3ZlIixrKSxKKGRvY3VtZW50LCJ0b3VjaHN0YXJ0Lm1vdmUiLG8pLCJmdW5jdGlvbiI9PXR5cGVvZiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiYmIWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bImNoYW5nZWRUb3VjaGVzIiwidGFyZ2V0VG91Y2hlcyJdLGM9Yi5sZW5ndGg7Yy0tOyktMT09PWEuZXZlbnQucHJvcHMuaW5kZXhPZihiW2NdKSYmYS5ldmVudC5wcm9wcy5wdXNoKGJbY10pfShhKX0pLHdpbmRvdy5XWVNJV1lHTW9kZXJuaXpyPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe24uY3NzVGV4dD1hfWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gdHlwZW9mIGE9PT1ifXZhciBmLGcsaCxpPSIyLjcuMSIsaj17fSxrPWIuZG9jdW1lbnRFbGVtZW50LGw9Im1vZGVybml6ciIsbT1iLmNyZWF0ZUVsZW1lbnQobCksbj1tLnN0eWxlLG89KHt9LnRvU3RyaW5nLCIgLXdlYmtpdC0gLW1vei0gLW8tIC1tcy0gIi5zcGxpdCgiICIpKSxwPXt9LHE9W10scj1xLnNsaWNlLHM9ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGYsZyxoLGksaj1iLmNyZWF0ZUVsZW1lbnQoImRpdiIpLG09Yi5ib2R5LG49bXx8Yi5jcmVhdGVFbGVtZW50KCJib2R5Iik7aWYocGFyc2VJbnQoZCwxMCkpZm9yKDtkLS07KWg9Yi5jcmVhdGVFbGVtZW50KCJkaXYiKSxoLmlkPWU/ZVtkXTpsKyhkKzEpLGouYXBwZW5kQ2hpbGQoaCk7cmV0dXJuIGY9WyImIzE3MzsiLCc8c3R5bGUgaWQ9InMnLGwsJyI+JyxhLCI8L3N0eWxlPiJdLmpvaW4oIiIpLGouaWQ9bCwobT9qOm4pLmlubmVySFRNTCs9ZixuLmFwcGVuZENoaWxkKGopLG18fChuLnN0eWxlLmJhY2tncm91bmQ9IiIsbi5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIixpPWsuc3R5bGUub3ZlcmZsb3csay5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIixrLmFwcGVuZENoaWxkKG4pKSxnPWMoaixhKSxtP2oucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChqKToobi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pLGsuc3R5bGUub3ZlcmZsb3c9aSksISFnfSx0PWZ1bmN0aW9uKGIpe3ZhciBjPWEubWF0Y2hNZWRpYXx8YS5tc01hdGNoTWVkaWE7aWYoYylyZXR1cm4gYyhiKS5tYXRjaGVzO3ZhciBkO3JldHVybiBzKCJAbWVkaWEgIitiKyIgeyAjIitsKyIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IH0gfSIsZnVuY3Rpb24oYil7ZD0iYWJzb2x1dGUiPT0oYS5nZXRDb21wdXRlZFN0eWxlP2dldENvbXB1dGVkU3R5bGUoYixudWxsKTpiLmN1cnJlbnRTdHlsZSkucG9zaXRpb259KSxkfSx1PXt9Lmhhc093blByb3BlcnR5O2g9ZSh1LCJ1bmRlZmluZWQiKXx8ZSh1LmNhbGwsInVuZGVmaW5lZCIpP2Z1bmN0aW9uKGEsYil7cmV0dXJuIGIgaW4gYSYmZShhLmNvbnN0cnVjdG9yLnByb3RvdHlwZVtiXSwidW5kZWZpbmVkIil9OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHUuY2FsbChhLGIpfSxGdW5jdGlvbi5wcm90b3R5cGUuYmluZHx8KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGIpdGhyb3cgbmV3IFR5cGVFcnJvcjt2YXIgYz1yLmNhbGwoYXJndW1lbnRzLDEpLGQ9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgZCl7dmFyIGU9ZnVuY3Rpb24oKXt9O2UucHJvdG90eXBlPWIucHJvdG90eXBlO3ZhciBmPW5ldyBlLGc9Yi5hcHBseShmLGMuY29uY2F0KHIuY2FsbChhcmd1bWVudHMpKSk7cmV0dXJuIE9iamVjdChnKT09PWc/ZzpmfXJldHVybiBiLmFwcGx5KGEsYy5jb25jYXQoci5jYWxsKGFyZ3VtZW50cykpKX07cmV0dXJuIGR9KSxwLnRvdWNoPWZ1bmN0aW9uKCl7dmFyIGM7cmV0dXJuIm9udG91Y2hzdGFydCJpbiBhfHxhLkRvY3VtZW50VG91Y2gmJmIgaW5zdGFuY2VvZiBEb2N1bWVudFRvdWNoP2M9ITA6cyhbIkBtZWRpYSAoIixvLmpvaW4oInRvdWNoLWVuYWJsZWQpLCgiKSxsLCIpIiwieyNtb2Rlcm5penJ7dG9wOjlweDtwb3NpdGlvbjphYnNvbHV0ZX19Il0uam9pbigiIiksZnVuY3Rpb24oYSl7Yz05PT09YS5vZmZzZXRUb3B9KSxjfTtmb3IodmFyIHYgaW4gcCloKHAsdikmJihnPXYudG9Mb3dlckNhc2UoKSxqW2ddPXBbdl0oKSxxLnB1c2goKGpbZ10/IiI6Im5vLSIpK2cpKTtyZXR1cm4gai5hZGRUZXN0PWZ1bmN0aW9uKGEsYil7aWYoIm9iamVjdCI9PXR5cGVvZiBhKWZvcih2YXIgZCBpbiBhKWgoYSxkKSYmai5hZGRUZXN0KGQsYVtkXSk7ZWxzZXtpZihhPWEudG9Mb3dlckNhc2UoKSxqW2FdIT09YylyZXR1cm4gajtiPSJmdW5jdGlvbiI9PXR5cGVvZiBiP2IoKTpiLCJ1bmRlZmluZWQiIT10eXBlb2YgZW5hYmxlQ2xhc3NlcyYmZW5hYmxlQ2xhc3NlcyYmKGsuY2xhc3NOYW1lKz0iICIrKGI/IiI6Im5vLSIpK2EpLGpbYV09Yn1yZXR1cm4gan0sZCgiIiksbT1mPW51bGwsai5fdmVyc2lvbj1pLGouX3ByZWZpeGVzPW8sai5tcT10LGoudGVzdFN0eWxlcz1zLGp9KHRoaXMsdGhpcy5kb2N1bWVudCksIWZ1bmN0aW9uKGEpe2EuRWRpdGFibGUuVEFHX09SREVSPVsidGFibGUiLCJ0aGVhZCIsInRib2R5IiwidGZvb3QiLCJ0ciIsInRoIiwidGQiLCJ1bCIsIm9sIiwibGkiLCJoMSIsImgyIiwiaDMiLCJoNCIsImg1IiwiaDYiLCJwcmUiLCJibG9ja3F1b3RlIiwicCIsImRpdiIsImEiLCJzdHJvbmciLCJlbSIsInN0cmlrZSIsInUiLCJzcGFuIiwiaWZyYW1lIiwib2JqZWN0IiwicGFyYW0iLCJ2aWRlbyIsInNvdXJjZSJdLGEuRWRpdGFibGUuU0VQQVJBVEU9WyJ0aCIsInRkIiwibGkiLCJoMSIsImgyIiwiaDMiLCJoNCIsImg1IiwiaDYiLCJwcmUiLCJibG9ja3F1b3RlIiwicCIsImRpdiJdLGEuRWRpdGFibGUuRU5EX0FUX1NBTUVfSU5ERVg9WyJ0YWJsZSIsInRoZWFkIiwidGJvZHkiLCJ0Zm9vdCIsInRyIiwidGgiLCJ0ZCIsImEiLCJzcGFuIiwiaWZyYW1lIiwiZGl2Iiwib2JqZWN0IiwicGFyYW0iXSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pc0Nsb3NpbmdUYWc9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bnVsbCE9PWEubWF0Y2goL148XC8oW2EtekEtWjAtOV0rKShbXjxdKykqPiQvZ2kpOiExfSxhLkVkaXRhYmxlLnByb3RvdHlwZS50YWdOYW1lPWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL148XC8/KFthLXpBLVowLTktIV0rKShbXjxdKykqPiQvZ2ksIiQxIikudG9Mb3dlckNhc2UoKX0sYS5FZGl0YWJsZS5TRUxGX0NMT1NJTkdfVEFHUz1bImJyIiwiYnV0dG9uIiwiaW5wdXQiLCJpbWciLCJociIsInBhcmFtIiwiIS0tIiwic291cmNlIl0sYS5FZGl0YWJsZS5TRUxGX0NMT1NJTkdfQUZURVI9WyJzb3VyY2UiXSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pc1NlbGZDbG9zaW5nVGFnPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMudGFnTmFtZShiKTtyZXR1cm4gYS5FZGl0YWJsZS5TRUxGX0NMT1NJTkdfVEFHUy5pbmRleE9mKGMpPj0wfSxhLkVkaXRhYmxlLnByb3RvdHlwZS50YWdLZXk9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSsoYS5hdHRyc3x8W10pLnNvcnQoKS5qb2luKCJ8Iil9LGEuRWRpdGFibGUucHJvdG90eXBlLmV4dGVuZGVkS2V5PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRhZ0tleShhKStKU09OLnN0cmluZ2lmeShhLnN0eWxlKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUubWVyZ2VTdHlsZT1mdW5jdGlvbihiLGMpe2Zvcih2YXIgZD17fSxlPWEuRWRpdGFibGUudW5pcShhLm1lcmdlKE9iamVjdC5rZXlzKGIuc3R5bGUpLE9iamVjdC5rZXlzKGMuc3R5bGUpKSksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1lW2ZdO2RbZ109bnVsbCE9Yy5zdHlsZVtnXT9jLnN0eWxlW2ddOmIuc3R5bGVbZ119cmV0dXJuIGR9LGEuRWRpdGFibGUucHJvdG90eXBlLm1hcERPTT1mdW5jdGlvbihiLGMpe3ZvaWQgMD09PWMmJihjPSEwKTt2YXIgZCxlLGYsZyxoPTAsaT0wLGo9W10saz0iIixsPVtdLG09e30sbj17fTtjJiYoYj1iLnJlcGxhY2UoL1x1MjAwQi9naSwiIikpO2Zvcih2YXIgbz0wO288Yi5sZW5ndGg7bysrKWlmKGQ9Yi5jaGFyQXQobyksIjwiPT1kKXt2YXIgcD1iLmluZGV4T2YoIj4iLG8rMSk7aWYoLTEhPT1wKXtpZihpKyssZT1iLnN1YnN0cmluZyhvLHArMSksZz10aGlzLnRhZ05hbWUoZSksImIiPT1nJiYoZz0ic3Ryb25nIiksImkiPT1nJiYoZz0iZW0iKSx0aGlzLmlzU2VsZkNsb3NpbmdUYWcoZSkpe25baF18fChuW2hdPVtdKSxuW2hdLnB1c2goe2k6aSxjb250ZW50OmUsdGFnX25hbWU6Z30pLG89cDtjb250aW51ZX12YXIgcT10aGlzLmlzQ2xvc2luZ1RhZyhlKSxyPW51bGwscz1lLnJlcGxhY2UoL148W1xTXHNdKiBzdHlsZT0oIlteIl0rInwnW14nXSsnKVtcU1xzXSo+JC9naSwiJDEiKSx0PXt9O2lmKHMhPWUmJihzPXMuc3Vic3RyaW5nKDEscy5sZW5ndGgtMSksbWF0Y2hlcz1zLm1hdGNoKC8oW146XSopOihbXjo7XSo7fCQpL2dpKSkpZm9yKHZhciB1PTA7dTxtYXRjaGVzLmxlbmd0aDt1Kyspe3ZhciB2PW1hdGNoZXNbdV0uc3BsaXQoIjoiKSx3PXYuc2xpY2UoMSkuam9pbigiOiIpLnRyaW0oKTsiOyI9PXdbdy5sZW5ndGgtMV0mJih3PXcuc3Vic3RyKDAsdy5sZW5ndGgtMSkpLHRbdlswXS50cmltKCldPXd9aWYocj1lLm1hdGNoKC8oW1x3XC1dKik9KCJbXjw+Il0qInwnW148PiddKid8XHcrKS9naSkpZm9yKHZhciB4PTA7eDxyLmxlbmd0aDt4KyspMD09PXJbeF0uaW5kZXhPZigic3R5bGU9IikmJnIuc3BsaWNlKHgsMSk7aWYocSl7dmFyIHk9bVtnXS5wb3AoKTtoPT1qW3ldLnN0YXJ0JiZhLkVkaXRhYmxlLkVORF9BVF9TQU1FX0lOREVYLmluZGV4T2YoZyk+PTAmJihuW2hdfHwobltoXT1bXSksbltoXS5wdXNoKHtpOmpbeV0uaSxjb250ZW50OmpbeV0ub3JpZ2luYWx9KSxuW2hdLnB1c2goe2k6aSxjb250ZW50OmV9KSl9ZWxzZSBhLkVkaXRhYmxlLlNFUEFSQVRFLmluZGV4T2YoZyk+PTAmJihyP3IucHVzaCgnZGF0YS1mci1pZHg9IicrbysnIicpOnI9WydkYXRhLWZyLWlkeD0iJytvKyciJ10pLGoucHVzaCh7dHlwZTpnLGF0dHJzOnIsc3R5bGU6dCxzdGFydDpoLGk6aSxvcmlnaW5hbDplfSksbVtnXXx8KG1bZ109W10pLG1bZ10ucHVzaChqLmxlbmd0aC0xKTtvPXB9fWVsc2V7ays9ZCxsW2hdPXt9O2ZvcihnIGluIG0pe2Y9bVtnXTtmb3IodmFyIHo9MDt6PGYubGVuZ3RoO3orKyl7ZT1qW2Zbel1dO3ZhciBBPXRoaXMudGFnS2V5KGUpO2xbaF1bQV0/bFtoXVtBXS5zdHlsZT10aGlzLm1lcmdlU3R5bGUobFtoXVtBXSxlKTpsW2hdW0FdPWEuZXh0ZW5kKHt9LGUpfX1oKyt9dmFyIEI9W107Zm9yKG89MDtvPGwubGVuZ3RoO28rKyl7QltvXT17fTtmb3IodmFyIEMgaW4gbFtvXSlCW29dW3RoaXMuZXh0ZW5kZWRLZXkobFtvXVtDXSldPWxbb11bQ119cmV0dXJue3RleHQ6ayxmb3JtYXQ6QixzaW1wbGVfdGFnczpufX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZnJvYWxhRE9NPWZ1bmN0aW9uKGIpe2Zvcih2YXIgYyxkPVtdLGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO2ZvcihjIGluIGUpZ1tjXXx8KGVbY10uZW5kPWYsZC5wdXNoKGEuZXh0ZW5kKHt9LGVbY10pKSxkZWxldGUgZVtjXSk7Zm9yKHZhciBoIGluIGcpZVtoXXx8KGdbaF0uc3RhcnQ9ZixlW2hdPWdbaF0pfWZvcihjIGluIGUpZVtjXS5lbmQ9Yi5sZW5ndGgsZC5wdXNoKGVbY10pO3JldHVybiBkfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5zb3J0Tm9kZXM9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5FZGl0YWJsZS5UQUdfT1JERVIuaW5kZXhPZihiLnR5cGUpLWEuRWRpdGFibGUuVEFHX09SREVSLmluZGV4T2YoYy50eXBlKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc29ydFNpbXBsZVRhZ3M9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5pLWIuaX0sYS5FZGl0YWJsZS5wcm90b3R5cGUub3BlblRhZz1mdW5jdGlvbihhKXt2YXIgYj0iPCIrYS50eXBlO2lmKGEuYXR0cnMpe2EuYXR0cnMuc29ydCgpO2Zvcih2YXIgYz0wO2M8YS5hdHRycy5sZW5ndGg7YysrKWIrPSIgIithLmF0dHJzW2NdfXZhciBkPSIiO2Zvcih2YXIgZSBpbiBhLnN0eWxlKW51bGwhPWEuc3R5bGVbZV0mJihkKz1lLnJlcGxhY2UoIl8iLCItIikrIjogIithLnN0eWxlW2VdKyI7ICIpO3JldHVybiIiIT09ZCYmKGIrPScgc3R5bGU9IicrZC50cmltKCkrJyInKSxiKz0iPiJ9LGEuRWRpdGFibGUucHJvdG90eXBlLmNsZWFuT3V0cHV0PWZ1bmN0aW9uKGIsYyl7dmFyIGQsZSxmLGcsaD10aGlzLm1hcERPTShiLGMpLGk9dGhpcy5mcm9hbGFET00oaC5mb3JtYXQpLGo9aC5zaW1wbGVfdGFncyxrPWgudGV4dCxsPXt9O2ZvcihlPTA7ZTxpLmxlbmd0aDtlKyspZD1pW2VdLGxbZC5zdGFydF18fChsW2Quc3RhcnRdPVtdKSxsW2Quc3RhcnRdLnB1c2goZCk7dmFyIG09e307Zm9yKGI9IiIsZT0wO2U8PWsubGVuZ3RoO2UrKyl7dmFyIG49W10sbz0iIjtpZihqW2VdKWZvcihqW2VdPWpbZV0uc29ydCh0aGlzLnNvcnRTaW1wbGVUYWdzKSxnPTA7ZzxqW2VdLmxlbmd0aDtnKyspYS5FZGl0YWJsZS5TRUxGX0NMT1NJTkdfQUZURVIuaW5kZXhPZihqW2VdW2ddLnRhZ19uYW1lKT49MD9vKz1qW2VdW2ddLmNvbnRlbnQ6Yis9altlXVtnXS5jb250ZW50O2lmKG1bZV0pe2Zvcih2YXIgcCBpbiBtKWlmKHA+ZSlmb3IoZj0wO2Y8bVtwXS5sZW5ndGg7ZisrKXt2YXIgcT1tW3BdW2ZdO3Euc3RhcnQ+PW1bZV1bbVtlXS5sZW5ndGgtMV0uc3RhcnQmJmEuRWRpdGFibGUuVEFHX09SREVSLmluZGV4T2YocS50eXBlKT5hLkVkaXRhYmxlLlRBR19PUkRFUi5pbmRleE9mKG1bZV1bbVtlXS5sZW5ndGgtMV0udHlwZSkmJmEuRWRpdGFibGUuU0VQQVJBVEUuaW5kZXhPZihxLnR5cGUpPDAmJihiKz0iPC8iK3EudHlwZSsiPiIsbi5wdXNoKHEpLG1bcF0uc3BsaWNlKGYsMSkpfWZvcihmPTA7ZjxtW2VdLmxlbmd0aDtmKyspYis9IjwvIittW2VdW2ZdLnR5cGUrIj4ifWZvcihsW2VdfHwobFtlXT1bXSk7bi5sZW5ndGg+MDspe3ZhciByPW4ucG9wKCk7ci5zdGFydD1lLGxbZV0ucHVzaChyKX1pZihsW2VdKWZvcihsW2VdPWxbZV0uc29ydCh0aGlzLnNvcnROb2RlcyksZj0wO2Y8bFtlXS5sZW5ndGg7ZisrKWQ9bFtlXVtmXSxtW2QuZW5kXXx8KG1bZC5lbmRdPVtdKSxtW2QuZW5kXS5wdXNoKGQpLGIrPXRoaXMub3BlblRhZyhkKTtiKz1vLGUhPWsubGVuZ3RoJiYoYis9a1tlXSl9cmV0dXJuIGJ9LGEuRWRpdGFibGUucHJvdG90eXBlLmNsZWFuaWZ5PWZ1bmN0aW9uKGIsYyl7dmFyIGQsZT0icCwgaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgZGl2LCB0ZCwgdGgsIHByZSwgbGksIGJsb2NrcXVvdGUiO2lmKHRoaXMuaXNIVE1MKXJldHVybiExO3ZvaWQgMD09PWImJihiPSEwKSx0aGlzLm5vX3ZlcmlmeT0hMCx0aGlzLnNhdmVTZWxlY3Rpb25CeU1hcmtlcnMoKSxkPWI/dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpOnRoaXMuJGVsZW1lbnQuZmluZChlKTt2YXIgZixnO2lmKGRbMF0hPXRoaXMuJGVsZW1lbnQuZ2V0KDApKWZvcih2YXIgaD0wO2g8ZC5sZW5ndGg7aCsrKXt2YXIgaT1hKGRbaF0pO2Y9aS5odG1sKCksZz10aGlzLmNsZWFuT3V0cHV0KGYsYyksZyE9PWYmJmkuaHRtbChnKX1lbHNlIDA9PT10aGlzLiRlbGVtZW50LmZpbmQoZSkubGVuZ3RoJiYoZj10aGlzLiRlbGVtZW50Lmh0bWwoKSxnPXRoaXMuY2xlYW5PdXRwdXQoZixjKSxnIT09ZiYmdGhpcy4kZWxlbWVudC5odG1sKGcpKTt0aGlzLiRlbGVtZW50LmZpbmQoIltkYXRhLWZyLWlkeF0iKS5yZW1vdmVBdHRyKCJkYXRhLWZyLWlkeCIpLHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMuZm9jdXMoKSx0aGlzLiRlbGVtZW50LmZpbmQoInNwYW4iKS5hdHRyKCJkYXRhLWZyLXZlcmlmaWVkIiwhMCksdGhpcy5ub192ZXJpZnk9ITF9fShqUXVlcnkpOwovKiEKICogZnJvYWxhX2VkaXRvciB2MS4yLjIgKGh0dHA6Ly9lZGl0b3IuZnJvYWxhLmNvbSkKICogQ29weXJpZ2h0IDIwMTQtMjAxNCBGcm9hbGEKICovCiFmdW5jdGlvbihhKXthLkVkaXRhYmxlLmNvbW1hbmRzPWEuZXh0ZW5kKGEuRWRpdGFibGUuY29tbWFuZHMse2luc2VydE9yZGVyZWRMaXN0Ont0aXRsZToiTnVtYmVyZWQgTGlzdCIsaWNvbjoiZmEgZmEtbGlzdC1vbCIscmVmcmVzaDphLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoRGVmYXVsdCxjYWxsYmFjazpmdW5jdGlvbihhKXt0aGlzLmZvcm1hdExpc3QoYSl9LHVuZG86ITB9LGluc2VydFVub3JkZXJlZExpc3Q6e3RpdGxlOiJCdWxsZXRlZCBMaXN0IixpY29uOiJmYSBmYS1saXN0LXVsIixyZWZyZXNoOmEuRWRpdGFibGUucHJvdG90eXBlLnJlZnJlc2hEZWZhdWx0LGNhbGxiYWNrOmZ1bmN0aW9uKGEpe3RoaXMuZm9ybWF0TGlzdChhKX0sdW5kbzohMH19KSxhLkVkaXRhYmxlLnByb3RvdHlwZS5wcm9jZXNzQmFja3NwYWNlPWZ1bmN0aW9uKGIpe3ZhciBjPWIucHJldigpO2lmKGMubGVuZ3RoKXtmb3IodGhpcy5yZW1vdmVNYXJrZXJzKCksKCJVTCI9PWMuZ2V0KDApLnRhZ05hbWV8fCJPTCI9PWMuZ2V0KDApLnRhZ05hbWUpJiYoYz1jLmZpbmQoImxpOmxhc3QiKSk7Yy5maW5kKCI+IHVsLCA+IG9sIikubGVuZ3RoOyljPWMuZmluZCgiPiB1bCBsaTpsYXN0LCA+IG9sIGxpOmxhc3QiKTt2YXIgZD1jLmZpbmQoIj4gcCwgPiBoMSwgPiBoMywgPiBoNCwgPiBoNSwgPiBoNiwgPiBkaXYsID4gcHJlLCA+IGJsb2NrcXVvdGUiKTswPT09Yy50ZXh0KCkubGVuZ3RoJiYwPT09Yy5maW5kKCJpbWcsIHRhYmxlLCBpbnB1dCwgaWZyYW1lLCB2aWRlbyIpLmxlbmd0aD9jLnJlbW92ZSgpOih0aGlzLmtlZXBfZW50ZXI9ITAsYi5maW5kKCI+IHAsID4gaDEsID4gaDMsID4gaDQsID4gaDUsID4gaDYsID4gZGl2LCA+IHByZSwgPiBibG9ja3F1b3RlIikuZWFjaChmdW5jdGlvbihiLGMpe2EoYykucmVwbGFjZVdpdGgoYShjKS5odG1sKCkpfSksdGhpcy5rZWVwX2VudGVyPSExLGQubGVuZ3RoPyhhKGRbZC5sZW5ndGgtMV0pLmFwcGVuZCgnPHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLXR5cGU9ImZhbHNlIiBkYXRhLWlkPSIwIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+PHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLXR5cGU9InRydWUiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSxhKGRbZC5sZW5ndGgtMV0pLmFwcGVuZChiLmh0bWwoKSkpOihjLmFwcGVuZCgnPHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLXR5cGU9ImZhbHNlIiBkYXRhLWlkPSIwIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+PHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLXR5cGU9InRydWUiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSxjLmFwcGVuZChiLmh0bWwoKSkpLGIucmVtb3ZlKCksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCkpfWVsc2UgdGhpcy5mb3JtYXRMaXN0KGIucGFyZW50cygidWwiKS5sZW5ndGg/Imluc2VydFVub3JkZXJlZExpc3QiOiJpbnNlcnRPcmRlcmVkTGlzdCIpO3RoaXMuJGVsZW1lbnQuZmluZCgiYnJlYWtsaSIpLnJlbW92ZSgpLHRoaXMuc3luYygpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5saUJhY2tzcGFjZT1mdW5jdGlvbigpe3ZhciBiLGM9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50KCksZD1hKGMpLnBhcmVudHMoInRhYmxlLCBsaSIpO2lmKGQubGVuZ3RoPjAmJiJUQUJMRSI9PT1kWzBdLnRhZ05hbWUpcmV0dXJuITA7aWYoYj0iTEkiPT1jLnRhZ05hbWU/YShjKTphKGMpLnBhcmVudHMoImxpOmZpcnN0IiksdGhpcy5yZW1vdmVNYXJrZXJzKCksdGhpcy5pbnNlcnRIVE1MKCI8YnJlYWtsaT48L2JyZWFrbGk+IiksYi5maW5kKCJicmVha2xpIikucHJldigpLmxlbmd0aCYmIlRBQkxFIj09PWIuZmluZCgiYnJlYWtsaSIpLnByZXYoKS5nZXQoMCkudGFnTmFtZSYmYi5maW5kKCJicmVha2xpIikubmV4dCgpLmxlbmd0aCYmIkJSIj09PWIuZmluZCgiYnJlYWtsaSIpLm5leHQoKS5nZXQoMCkudGFnTmFtZSlyZXR1cm4gdGhpcy5zZXRTZWxlY3Rpb24oYi5maW5kKCJicmVha2xpIikucHJldigpLmZpbmQoInRkOmZpcnN0IikuZ2V0KDApKSxiLmZpbmQoImJyZWFrbGkiKS5uZXh0KCkucmVtb3ZlKCksdGhpcy4kZWxlbWVudC5maW5kKCJicmVha2xpIikucmVtb3ZlKCksITE7Zm9yKHZhciBlLGY9Yi5odG1sKCksZz1bXSxoPTA7aDxmLmxlbmd0aDtoKyspe2lmKGNocj1mLmNoYXJBdChoKSwiPCIhPWNocilyZXR1cm4gdGhpcy4kZWxlbWVudC5maW5kKCJicmVha2xpIikucmVtb3ZlKCksITA7dmFyIGk9Zi5pbmRleE9mKCI+IixoKzEpO2lmKC0xIT09aSl7ZT1mLnN1YnN0cmluZyhoLGkrMSk7dmFyIGo9dGhpcy50YWdOYW1lKGUpO2lmKGg9aSwiYnJlYWtsaSI9PWope2lmKCF0aGlzLmlzQ2xvc2luZ1RhZyhlKSYmIXRoaXMuaXNDbG9zaW5nVGFnKGdbZy5sZW5ndGgtMV0pKXJldHVybiB0aGlzLnByb2Nlc3NCYWNrc3BhY2UoYiksITF9ZWxzZSBnLnB1c2goZSl9fXJldHVybiB0aGlzLiRlbGVtZW50LmZpbmQoImJyZWFrbGkiKS5yZW1vdmUoKSwhMH0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZW1wdHlMaUVudGVyPWZ1bmN0aW9uKGIpe3RoaXMucmVtb3ZlTWFya2VycygpO3ZhciBjPSJvbCI7Yi5wYXJlbnRzKCJ1bDpmaXJzdCIpLmxlbmd0aD4wJiYoYz0idWwiKTt2YXIgZD1hKGIucGFyZW50cygidWwsIG9sIilbMF0pO2IucmVwbGFjZVdpdGgoZC5wYXJlbnRzKCJ1bCwgb2wiKS5sZW5ndGg+MD8nPHNwYW4gaWQ9ImNsb3NlLScrYysnIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+PGxpPjxwPjxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJmYWxzZSIgZGF0YS1pZD0iMCIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPjxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJ0cnVlIiBkYXRhLWlkPSIwIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+PGJyLz48L3A+PC9saT48c3BhbiBpZD0ib3Blbi0nK2MrJyIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPic6JzxzcGFuIGlkPSJjbG9zZS0nK2MrJyIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPjxwPjxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJmYWxzZSIgZGF0YS1pZD0iMCIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPjxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJ0cnVlIiBkYXRhLWlkPSIwIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+PGJyLz48L3A+PHNwYW4gaWQ9Im9wZW4tJytjKyciIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSxodG1sPWQuaHRtbCgpLGh0bWw9aHRtbC5yZXBsYWNlKCc8c3BhbiBpZD0iY2xvc2UtdWwiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCI8L3VsPiIpLGh0bWw9aHRtbC5yZXBsYWNlKCc8c3BhbiBpZD0iY2xvc2Utb2wiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCI8L29sPiIpLGh0bWw9aHRtbC5yZXBsYWNlKCc8c3BhbiBpZD0ib3Blbi11bCIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPicsIjx1bD4iKSxodG1sPWh0bWwucmVwbGFjZSgnPHNwYW4gaWQ9Im9wZW4tb2wiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCI8b2w+IiksZC5yZXBsYWNlV2l0aCgiPCIrYysiPiIraHRtbCsiPC8iK2MrIj4iKSx0aGlzLmNsZWFudXBMaXN0cygpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS50ZXh0TGlFbnRlcj1mdW5jdGlvbihiKXt0aGlzLnJlbW92ZU1hcmtlcnMoKSx0aGlzLmluc2VydEhUTUwoIjxicmVha2xpPjwvYnJlYWtsaT4iLCExKTtmb3IodmFyIGMsZD1iLmh0bWwoKSxlPVtdLGY9e30sZz1bXSxoPTAsaT0wO2k8ZC5sZW5ndGg7aSsrKWlmKGNocj1kLmNoYXJBdChpKSwiPCI9PWNocil7dmFyIGo9ZC5pbmRleE9mKCI+IixpKzEpO2lmKC0xIT09ail7Yz1kLnN1YnN0cmluZyhpLGorMSk7dmFyIGs9dGhpcy50YWdOYW1lKGMpO2lmKGk9aiwiYnJlYWtsaSI9PWspe2lmKCF0aGlzLmlzQ2xvc2luZ1RhZyhjKSl7Zm9yKHZhciBsPWUubGVuZ3RoLTE7bD49MDtsLS0pe3ZhciBtPXRoaXMudGFnTmFtZShlW2xdKTtnLnB1c2goIjwvIittKyI+Iil9Zy5wdXNoKCI8L2xpPiIpLGcucHVzaCgiPGxpPiIpO2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWcucHVzaChlW25dKTtnLnB1c2goJzxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJmYWxzZSIgZGF0YS1jb2xsYXBzZWQ9InRydWUiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj48c3BhbiBjbGFzcz0iZi1tYXJrZXIiIGRhdGEtdHlwZT0idHJ1ZSIgZGF0YS1jb2xsYXBzZWQ9InRydWUiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKX19ZWxzZSBpZihnLnB1c2goYyksIXRoaXMuaXNTZWxmQ2xvc2luZ1RhZyhjKSlpZih0aGlzLmlzQ2xvc2luZ1RhZyhjKSl7dmFyIG89ZltrXS5wb3AoKTtlLnNwbGljZShvLDEpfWVsc2UgZS5wdXNoKGMpLHZvaWQgMD09PWZba10mJihmW2tdPVtdKSxmW2tdLnB1c2goZS5sZW5ndGgtMSl9fWVsc2UgaCsrLGcucHVzaChjaHIpO3ZhciBwPWEoYi5wYXJlbnRzKCJ1bCwgb2wiKVswXSk7Yi5yZXBsYWNlV2l0aCgiPGxpPiIrZy5qb2luKCIiKSsiPC9saT4iKSxwLmZpbmQoInA6ZW1wdHkgKyB0YWJsZSIpLnByZXYoKS5yZW1vdmUoKSxwLmZpbmQoInAgKyB0YWJsZSIpLmVhY2goZnVuY3Rpb24oYixjKXt2YXIgZD1hKGMpO2QucHJldigpLmFwcGVuZChkLmNsb25lKCkpLGQucmVtb3ZlKCl9KSxwLmZpbmQoInRhYmxlICsgcCIpLmVhY2goZnVuY3Rpb24oYixjKXt2YXIgZD1hKGMpO2QuYXBwZW5kKGQucHJldigpLmNsb25lKCkpLGQucHJldigpLnJlbW92ZSgpfSkscC5maW5kKGEuRWRpdGFibGUuVkFMSURfTk9ERVMuam9pbigiLCIpKS5lYWNoKGZ1bmN0aW9uKGIsYyl7IkxJIiE9Yy50YWdOYW1lJiYwPT09YShjKS5maW5kKCJiciIpLmxlbmd0aCYmIiI9PT1hKGMpLnRleHQoKS50cmltKCkmJmEoYykuYXBwZW5kKCI8YnIvPiIpfSkscC5maW5kKCJsaSIpLmVhY2goYS5wcm94eShmdW5jdGlvbihiLGMpe3RoaXMud3JhcFRleHRJbkVsZW1lbnQoYShjKSl9LHRoaXMpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUubGlFbnRlcj1mdW5jdGlvbigpe3ZhciBiLGM9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50KCksZD1hKGMpLnBhcmVudHMoInRhYmxlLCBsaSIpO3JldHVybiBkLmxlbmd0aD4wJiYiVEFCTEUiPT1kWzBdLnRhZ05hbWU/ITA6KGI9IkxJIj09Yy50YWdOYW1lP2EoYyk6YShjKS5wYXJlbnRzKCJsaTpmaXJzdCIpLDA9PT1iLnRleHQoKS5sZW5ndGgmJjA9PT1iLmZpbmQoImltZywgdGFibGUsIGlmcmFtZSwgaW5wdXQsIG9iamVjdCIpLmxlbmd0aD90aGlzLmVtcHR5TGlFbnRlcihiKTp0aGlzLnRleHRMaUVudGVyKGIpLHRoaXMuJGVsZW1lbnQuZmluZCgiYnJlYWtsaSIpLnJlbW92ZSgpLHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMuc3luYygpLCExKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUubGlzdFRhYj1mdW5jdGlvbigpe3ZhciBiPWEodGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50KCkpO3JldHVybiBiLnBhcmVudHMoInVsLCBvbCIpLmxlbmd0aD4wPyh0aGlzLmluZGVudCgpLCExKTp2b2lkIDB9LGEuRWRpdGFibGUucHJvdG90eXBlLmxpc3RTaGlmdFRhYj1mdW5jdGlvbigpe3ZhciBiPWEodGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50KCkpO3JldHVybiBiLnBhcmVudHMoInVsLCBvbCIpLmxlbmd0aD4wPyh0aGlzLm91dGRlbnQoKSwhMSk6dm9pZCAwfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pbml0TGlzdD1mdW5jdGlvbigpe3RoaXMuYWRkTGlzdGVuZXIoInRhYiIsdGhpcy5saXN0VGFiKSx0aGlzLmFkZExpc3RlbmVyKCJzaGlmdCt0YWIiLHRoaXMubGlzdFNoaWZ0VGFiKSx0aGlzLmRvbUluc2VydExpc3QoKSx0aGlzLmlzSW1hZ2V8fHRoaXMuaXNMaW5rfHx0aGlzLm9wdGlvbnMuZWRpdEluUG9wdXB8fHRoaXMuJGVsZW1lbnQub24oImtleWRvd24iLGEucHJveHkoZnVuY3Rpb24oYil7dmFyIGM9Yi53aGljaCxkPXRoaXMuZ2V0U2VsZWN0aW9uRWxlbWVudCgpO2lmKCJMSSI9PWQudGFnTmFtZXx8YShkKS5wYXJlbnRzKCJsaSIpLmxlbmd0aD4wKXtpZigxMz09YyYmIWIuc2hpZnRLZXkpcmV0dXJuIHRoaXMubGlFbnRlcigpO2lmKDg9PWMpcmV0dXJuIHRoaXMubGlCYWNrc3BhY2UoKX19LHRoaXMpKX0sYS5FZGl0YWJsZS5pbml0aWFsaXplcnMucHVzaChhLkVkaXRhYmxlLnByb3RvdHlwZS5pbml0TGlzdCksYS5FZGl0YWJsZS5wcm90b3R5cGUuZm9ybWF0TGlzdD1mdW5jdGlvbihiKXtpZih0aGlzLmJyb3dzZXIubXNpZSYmYS5FZGl0YWJsZS5nZXRJRXZlcnNpb24oKTw5KXJldHVybiBkb2N1bWVudC5leGVjQ29tbWFuZChiLCExLCExKSwhMTt2YXIgYyxkLGU9ITEsZj0hMCxnPSExLGg9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpLGk9YShoWzBdKS5wYXJlbnRzKCJ1bCwgb2wiKTtpZihpLmxlbmd0aCYmKCJVTCI9PT1pWzBdLnRhZ05hbWU/Imluc2VydFVub3JkZXJlZExpc3QiIT1iJiYoZT0hMCk6Imluc2VydE9yZGVyZWRMaXN0IiE9YiYmKGU9ITApKSx0aGlzLnNhdmVTZWxlY3Rpb25CeU1hcmtlcnMoKSxlKXtjPSJvbCIsImluc2VydFVub3JkZXJlZExpc3QiPT09YiYmKGM9InVsIik7dmFyIGo9YShpWzBdKTtqLnJlcGxhY2VXaXRoKCI8IitjKyI+IitqLmh0bWwoKSsiPC8iK2MrIj4iKX1lbHNle2Zvcih2YXIgaz0wO2s8aC5sZW5ndGg7aysrKWlmKGQ9YShoW2tdKSwoIlREIj09ZC5nZXQoMCkudGFnTmFtZXx8IlRIIj09ZC5nZXQoMCkudGFnTmFtZSkmJnRoaXMud3JhcFRleHRJbkVsZW1lbnQoZCksZC5wYXJlbnRzKCJsaSIpLmxlbmd0aD4wfHwiTEkiPT1kLmdldCgwKS50YWdOYW1lKXt2YXIgbDtsPSJMSSI9PWQuZ2V0KDApLnRhZ05hbWU/ZDphKGQucGFyZW50cygibGkiKVswXSk7dmFyIG09ZC5wYXJlbnRzKCJ1bCwgb2wiKTttLmxlbmd0aD4wJiYoYz1tWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxsLmJlZm9yZSgnPHNwYW4gY2xhc3M9ImNsb3NlLScrYysnIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+JyksbC5hZnRlcignPHNwYW4gY2xhc3M9Im9wZW4tJytjKyciIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSksKDA9PT1hKG1bMF0pLnBhcmVudHMoIm9sLCB1bCIpLmxlbmd0aHx8ZSkmJmwucmVwbGFjZVdpdGgoMD09PWwuZmluZChhLkVkaXRhYmxlLlZBTElEX05PREVTLmpvaW4oIiwiKSkubGVuZ3RoP2wuaHRtbCgpKyI8YnI+IjpsLmh0bWwoKSksZz0hMH1lbHNlIGY9ITE7ZyYmdGhpcy5jbGVhbnVwTGlzdHMoKSwoZj09PSExfHxlPT09ITApJiYodGhpcy53cmFwVGV4dCgpLHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLGg9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpLHRoaXMuc2F2ZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMuZWxlbWVudHNUb0xpc3QoaCxiKSx0aGlzLnVud3JhcFRleHQoKSx0aGlzLmNsZWFudXBMaXN0cygpKX10aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSx0aGlzLnJlcG9zaXRpb25FZGl0b3IoKSxiPSJpbnNlcnRVbm9yZGVyZWRMaXN0Ij09Yj8idW5vcmRlcmVkTGlzdEluc2VydGVkIjoib3JkZXJlZExpc3RJbnNlcnRlZCIsdGhpcy50cmlnZ2VyRXZlbnQoYil9LGEuRWRpdGFibGUucHJvdG90eXBlLmVsZW1lbnRzVG9MaXN0PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YSgiPG9sPiIpOyJpbnNlcnRVbm9yZGVyZWRMaXN0Ij09YyYmKGQ9YSgiPHVsPiIpKSxiWzBdPT10aGlzLiRlbGVtZW50LmdldCgwKSYmKGI9dGhpcy4kZWxlbWVudC5maW5kKCI+ICIrYS5FZGl0YWJsZS5WQUxJRF9OT0RFUy5qb2luKCIsID4iKSkpO2Zvcih2YXIgZT0wO2U8Yi5sZW5ndGg7ZSsrKSRlbGVtZW50PWEoYltlXSksJGVsZW1lbnQuZ2V0KDApIT10aGlzLiRlbGVtZW50LmdldCgwKSYmKCJURCI9PT0kZWxlbWVudC5nZXQoMCkudGFnTmFtZXx8IlRIIj09PSRlbGVtZW50LmdldCgwKS50YWdOYW1lPyh0aGlzLndyYXBUZXh0SW5FbGVtZW50KCRlbGVtZW50KSx0aGlzLmVsZW1lbnRzVG9MaXN0KCRlbGVtZW50LmZpbmQoIj4gIithLkVkaXRhYmxlLlZBTElEX05PREVTLmpvaW4oIiwgPiIpKSxjKSk6KGQuYXBwZW5kKGEoIjxsaT4iKS5odG1sKCRlbGVtZW50LmNsb25lKCkpKSxkLmZpbmQoImxpIikubGVuZ3RoPjE/JGVsZW1lbnQucmVtb3ZlKCk6JGVsZW1lbnQucmVwbGFjZVdpdGgoZCkpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5kZW50TGk9ZnVuY3Rpb24oYil7dmFyIGM9Yi5wYXJlbnRzKCJ1bCwgb2wiKSxkPWMuZ2V0KDApLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtiLmZpbmQoIj4gdWwsID4gb2wiKS5sZW5ndGg+MCYmYi5wcmV2KCJsaSIpLmxlbmd0aD4wPyh0aGlzLndyYXBUZXh0SW5FbGVtZW50KGIpLGIuZmluZCgiPiAiK2EuRWRpdGFibGUuVkFMSURfTk9ERVMuam9pbigiICwgPiAiKSkuZWFjaChmdW5jdGlvbihiLGMpe2EoYykud3JhcCgiPCIrZCsiPjwvIitkKyI+Iikud3JhcCgiPGxpPjwvbGk+Iil9KSxiLnByZXYoImxpIikuYXBwZW5kKGIuZmluZCgiPiB1bCwgPiBvbCIpKSxiLnJlbW92ZSgpLHRoaXMuY2xlYW51cExpc3RzKCkpOjA9PT1iLmZpbmQoIj4gdWwsID4gb2wiKS5sZW5ndGgmJmIucHJldigibGkiKS5sZW5ndGg+MCYmKGIucHJldigpLmFwcGVuZChhKCI8IitkKyI+IikuYXBwZW5kKGIuY2xvbmUoKSkpLGIucmVtb3ZlKCksYShjLmZpbmQoImxpIikuZ2V0KCkucmV2ZXJzZSgpKS5lYWNoKGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YShjKTtkLmZpbmQoIiA+IHVsLCA+IG9sIikubGVuZ3RoPjAmJmQucHJldigpJiZkLnByZXYoKS5maW5kKCIgPiB1bCwgPiBvbCIpLmxlbmd0aD4wJiYoZC5wcmV2KCkuYXBwZW5kKGQuaHRtbCgpKSxkLnJlbW92ZSgpKX0pLHRoaXMuY2xlYW51cExpc3RzKCkpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5vdXRkZW50TGk9ZnVuY3Rpb24oYil7dmFyIGM9YShiLnBhcmVudHMoInVsLCBvbCIpWzBdKSxkPWMucGFyZW50cygidWwsIG9sIiksZT1jLmdldCgwKS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7MD09PWIucHJldigibGkiKS5sZW5ndGgmJmIucGFyZW50cygibGkiKS5sZW5ndGg+MD8oYi5iZWZvcmUoJzxzcGFuIGNsYXNzPSJjbG9zZS0nK2UrJyIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPicpLGIuYmVmb3JlKCc8c3BhbiBjbGFzcz0iY2xvc2UtbGkiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSxiLmJlZm9yZSgnPHNwYW4gY2xhc3M9Im9wZW4tbGkiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSxiLmFmdGVyKCc8c3BhbiBjbGFzcz0ib3Blbi0nK2UrJyIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPicpLGIucmVwbGFjZVdpdGgoYi5odG1sKCkpKTooYi5iZWZvcmUoJzxzcGFuIGNsYXNzPSJjbG9zZS0nK2UrJyIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPicpLGIuYWZ0ZXIoJzxzcGFuIGNsYXNzPSJvcGVuLScrZSsnIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+JyksYi5wYXJlbnRzKCJsaSIpLmxlbmd0aD4wJiYoYi5iZWZvcmUoJzxzcGFuIGNsYXNzPSJjbG9zZS1saSIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPicpLGIuYWZ0ZXIoJzxzcGFuIGNsYXNzPSJvcGVuLWxpIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+JykpKSxkLmxlbmd0aHx8Yi5yZXBsYWNlV2l0aChiLmh0bWwoKSksdGhpcy5jbGVhbnVwTGlzdHMoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZG9tSW5zZXJ0TGlzdD1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQub24oIkRPTU5vZGVJbnNlcnRlZCIsYS5wcm94eShmdW5jdGlvbihiKXsiQlIiIT09Yi50YXJnZXQudGFnTmFtZXx8IkxJIiE9PWEoYi50YXJnZXQpLnBhcmVudCgpLmdldCgwKS50YWdOYW1lfHx0aGlzLmtlZXBfZW50ZXJ8fGEoYi50YXJnZXQpLnJlbW92ZSgpfSx0aGlzKSl9fShqUXVlcnkpOwovKiEKICogZnJvYWxhX2VkaXRvciB2MS4yLjIgKGh0dHA6Ly9lZGl0b3IuZnJvYWxhLmNvbSkKICogQ29weXJpZ2h0IDIwMTQtMjAxNCBGcm9hbGEKICovCiFmdW5jdGlvbihhKXthLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoQmxvY2tTdHlsZXM9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldFNlbGVjdGlvbkVsZW1lbnRzKClbMF0sYz1iLnRhZ05hbWUudG9Mb3dlckNhc2UoKTt0aGlzLiRidHRuX3dyYXBwZXIuZmluZCgiLmZyLWJsb2NrLXN0eWxlIikuZW1wdHkoKTt2YXIgZD10aGlzLm9wdGlvbnMuYmxvY2tTdHlsZXNbY107aWYodm9pZCAwPT09ZCYmKGQ9dGhpcy5vcHRpb25zLmRlZmF1bHRCbG9ja1N0eWxlKSx2b2lkIDAhPT1kKXt0aGlzLiRidHRuX3dyYXBwZXIuZmluZCgnLmZyLWRyb3Bkb3duID4gYnV0dG9uW2RhdGEtbmFtZT0iYmxvY2tTdHlsZSJdLmZyLXRyaWdnZXInKS5yZW1vdmVBdHRyKCJkaXNhYmxlZCIpO2Zvcih2YXIgZSBpbiBkKXt2YXIgZj1kW2VdLGc9IiI7YShiKS5oYXNDbGFzcyhlKSYmKGc9JyBjbGFzcz0iYWN0aXZlIicpLHRoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCIuZnItYmxvY2stc3R5bGUiKS5hcHBlbmQoYSgiPGxpIitnKyI+IikuYXBwZW5kKGEoJzxhIGhyZWY9IiMiIGRhdGEtdGV4dD0idHJ1ZSI+JykudGV4dChmKS5hZGRDbGFzcyhlKSkuYXR0cigiZGF0YS1jbWQiLCJibG9ja1N0eWxlIikuYXR0cigiZGF0YS12YWwiLGUpKX19fSxhLkVkaXRhYmxlLmNvbW1hbmRzPWEuZXh0ZW5kKGEuRWRpdGFibGUuY29tbWFuZHMse2Jsb2NrU3R5bGU6e3RpdGxlOiJCbG9jayBTdHlsZSIsaWNvbjoiZmEgZmEtbWFnaWMiLHJlZnJlc2hPblNob3c6YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaEJsb2NrU3R5bGVzLGNhbGxiYWNrOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmJsb2NrU3R5bGUoYixjKX0sdW5kbzohMH19KSxhLkVkaXRhYmxlLkRFRkFVTFRTPWEuZXh0ZW5kKGEuRWRpdGFibGUuREVGQVVMVFMse2RlZmF1bHRCbG9ja1N0eWxlOnsiZi1pdGFsaWMiOiJJdGFsaWMiLCJmLXR5cGV3cml0ZXIiOiJUeXBld3JpdGVyIiwiZi1zcGFjZWQiOiJTcGFjZWQiLCJmLXVwcGVyY2FzZSI6IlVwcGVyY2FzZSJ9LGJsb2NrU3R5bGVzVG9nZ2xlOiEwLGJsb2NrU3R5bGVzOnt9fSksYS5FZGl0YWJsZS5wcm90b3R5cGUuY29tbWFuZF9kaXNwYXRjaGVyPWEuZXh0ZW5kKGEuRWRpdGFibGUucHJvdG90eXBlLmNvbW1hbmRfZGlzcGF0Y2hlcix7YmxvY2tTdHlsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmJ1aWxkRHJvcGRvd25CbG9ja1N0eWxlKGEpLGM9dGhpcy5idWlsZERyb3Bkb3duQnV0dG9uKGEsYik7cmV0dXJuIGN9fSksYS5FZGl0YWJsZS5wcm90b3R5cGUuYnVpbGREcm9wZG93bkJsb2NrU3R5bGU9ZnVuY3Rpb24oKXt2YXIgYT0nPHVsIGNsYXNzPSJmci1kcm9wZG93bi1tZW51IGZyLWJsb2NrLXN0eWxlIj4nO3JldHVybiBhKz0iPC91bD4ifSxhLkVkaXRhYmxlLnByb3RvdHlwZS5ibG9ja1N0eWxlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpWzBdLGQ9Yy50YWdOYW1lLnRvTG93ZXJDYXNlKCk7dGhpcy5mb3JtYXRCbG9jayhkLGEsYil9fShqUXVlcnkpOwojIERlc2NyaXB0aW9uOgojIFBsdWdpbiBmb3IgRnJvYWxhIHRvIGFkZCB0b2dnbGVhYmxlIGJsb2NrIGJ1dHRvbnMgdG8gdGhlIG1lbnUuCiMKIyBVc2FnZToKIyBJbml0aWFsaXplIEZyb2FsYSB3aXRoIHRoZSB0b2dnbGVCbG9jayBidXR0b24gYW5kIHNwZWNpZnkgeW91cgojIGJ1dHRvbnMgdmlhIHRoZSB0b2dnbGVCbG9ja0J1dHRvbnMgb3B0aW9uLgojCiMgJCgiZWxlbWVudCIpLmVkaXRhYmxlCiMgIGJ1dHRvbnM6IFsidG9nZ2xlQmxvY2siXSwKIyAgdG9nZ2xlQmxvY2tCdXR0b25zOiBbCiMgICAgeyB0YWc6ICJoMSIsIHRpdGxlOiAiSGVhZGluZyAxIiB9CiMgICAgeyB0YWc6ICJoMiIsIHRpdGxlOiAiSGVhZGluZyAyIiB9CiMgIF0KCigoJCkgLT4KICAkLkVkaXRhYmxlLmNvbW1hbmRzID0gJC5leHRlbmQgJC5FZGl0YWJsZS5jb21tYW5kcywKICAgIHRvZ2dsZUJsb2NrOgogICAgICByZWZyZXNoOiAtPgogICAgICAgIGN1cnJlbnRCbG9ja1RhZyA9IEBnZXRTZWxlY3Rpb25FbGVtZW50cygpWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKQoKICAgICAgICBmb3IgYmxvY2sgaW4gQG9wdGlvbnMudG9nZ2xlQmxvY2tCdXR0b25zCiAgICAgICAgICAkKCIuZnJvYWxhLWVkaXRvciAuZnItYnR0bltkYXRhLW5hbWU9I3tibG9jay50YWd9XSIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKQogICAgICAgICAgaWYgY3VycmVudEJsb2NrVGFnID09IGJsb2NrLnRhZwogICAgICAgICAgICAkKCIuZnJvYWxhLWVkaXRvciAuZnItYnR0bltkYXRhLW5hbWU9I3tibG9jay50YWd9XSIpLmFkZENsYXNzKCJhY3RpdmUiKQoKICAkLkVkaXRhYmxlLnByb3RvdHlwZS5jb21tYW5kX2Rpc3BhdGNoZXIgPSAkLmV4dGVuZCAkLkVkaXRhYmxlLnByb3RvdHlwZS5jb21tYW5kX2Rpc3BhdGNoZXIsCiAgICB0b2dnbGVCbG9jazogKGNvbW1hbmQpIC0+CiAgICAgIGJ1dHRvbnMgPSAiIgoKICAgICAgZm9yIGJsb2NrIGluIEBvcHRpb25zLnRvZ2dsZUJsb2NrQnV0dG9ucwogICAgICAgICMgZnJlZXplIGJsb2NrIHZhcmlhYmxlIGluIGNsb3N1cmUgZm9yIGEgd29ya2luZyBjYWxsYmFjayBodHRwOi8vZ29vLmdsL1oxbmRlNQogICAgICAgICgoYmxvY2spIC0+CiAgICAgICAgICBidXR0b24gPSBAYnVpbGRDdXN0b21CdXR0b24oCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0aXRsZTogYmxvY2sudGl0bGUsCiAgICAgICAgICAgICAgaWNvbjogeyB0eXBlOiAidHh0IiwgdmFsdWU6IGJsb2NrLnRhZy50b1VwcGVyQ2FzZSgpIH0KICAgICAgICAgICAgICBjYWxsYmFjazogLT4KICAgICAgICAgICAgICAgIGlmIEBnZXRTZWxlY3Rpb25FbGVtZW50cygpWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PSBibG9jay50YWcKICAgICAgICAgICAgICAgICAgQGZvcm1hdEJsb2NrKCJwIikKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgQGZvcm1hdEJsb2NrKGJsb2NrLnRhZykKICAgICAgICAgICAgfSwgYmxvY2sudGFnCiAgICAgICAgICApCiAgICAgICAgICBidXR0b25zICs9IGJ1dHRvbgogICAgICAgICkuYXBwbHkoQCwgW2Jsb2NrXSkKCiAgICAgICMgbWFrZSBzdXJlIHRoZSByZWZyZXNoIGhvb2sgaXMgcnVuIGZvciB1cGRhdGluZyBtZW51IGFjdGl2ZSBzdGF0ZQogICAgICBAYmluZFJlZnJlc2hMaXN0ZW5lcihjb21tYW5kKQoKICAgICAgYnV0dG9ucwopKGpRdWVyeSkK",
                "body": "LyohCiAqIGZyb2FsYV9lZGl0b3IgdjEuMi4yIChodHRwOi8vZWRpdG9yLmZyb2FsYS5jb20pCiAqIENvcHlyaWdodCAyMDE0LTIwMTQgRnJvYWxhCiAqLwppZigidW5kZWZpbmVkIj09dHlwZW9mIGpRdWVyeSl0aHJvdyBuZXcgRXJyb3IoIkZyb2FsYSByZXF1aXJlcyBqUXVlcnkiKTshZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWZ1bmN0aW9uKGMsZCl7dGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGIuREVGQVVMVFMsYShjKS5kYXRhKCksIm9iamVjdCI9PXR5cGVvZiBkJiZkKSx0aGlzLmJyb3dzZXI9Yi5icm93c2VyKCksdGhpcy5kaXNhYmxlZExpc3Q9W10sdGhpcy5faWQ9KytiLmNvdW50LHRoaXMuX2V2ZW50cz17fSx0aGlzLmJsdXJyZWQ9ITAsdGhpcy4kd2luZG93PWEod2luZG93KSx0aGlzLiRkb2N1bWVudD1hKGRvY3VtZW50KSx0aGlzLiRvcmlnaW5hbF9lbGVtZW50PWEoYyksdGhpcy5pbml0KGMpLGEoYykub24oImVkaXRhYmxlLmZvY3VzIixhLnByb3h5KGZ1bmN0aW9uKCl7Zm9yKHZhciBiPTE7Yjw9YS5FZGl0YWJsZS5jb3VudDtiKyspYiE9dGhpcy5faWQmJmEod2luZG93KS50cmlnZ2VyKCJibHVyLiIrYil9LHRoaXMpKX07Yi5pbml0aWFsaXplcnM9W10sYi5jb3VudD0wLGIuVkFMSURfTk9ERVM9WyJQIiwiUFJFIiwiQkxPQ0tRVU9URSIsIkgxIiwiSDIiLCJIMyIsIkg0IiwiSDUiLCJINiIsIkRJViIsIkxJIiwiVEQiLCJUSCJdLGIuTEFOR1M9W10sYi5ERUZBVUxUUz17YWxsb3dlZEF0dHJzOlsiYWNjZXB0IiwiYWNjZXB0LWNoYXJzZXQiLCJhY2Nlc3NrZXkiLCJhY3Rpb24iLCJhbGlnbiIsImFsdCIsImFzeW5jIiwiYXV0b2NvbXBsZXRlIiwiYXV0b2ZvY3VzIiwiYXV0b3BsYXkiLCJhdXRvc2F2ZSIsImJhY2tncm91bmQiLCJiZ2NvbG9yIiwiYm9yZGVyIiwiY2hhcnNldCIsImNlbGxwYWRkaW5nIiwiY2VsbHNwYWNpbmciLCJjaGVja2VkIiwiY2l0ZSIsImNsYXNzIiwiY29sb3IiLCJjb2xzIiwiY29sc3BhbiIsImNvbnRlbnRlZGl0YWJsZSIsImNvbnRleHRtZW51IiwiY29udHJvbHMiLCJjb29yZHMiLCJkYXRhIiwiZGF0YS0uKiIsImRhdGV0aW1lIiwiZGVmYXVsdCIsImRlZmVyIiwiZGlyIiwiZGlybmFtZSIsImRpc2FibGVkIiwiZG93bmxvYWQiLCJkcmFnZ2FibGUiLCJkcm9wem9uZSIsImVuY3R5cGUiLCJmb3IiLCJmb3JtIiwiZm9ybWFjdGlvbiIsImhlYWRlcnMiLCJoZWlnaHQiLCJoaWRkZW4iLCJoaWdoIiwiaHJlZiIsImhyZWZsYW5nIiwiaWNvbiIsImlkIiwiaXNtYXAiLCJpdGVtcHJvcCIsImtleXR5cGUiLCJraW5kIiwibGFiZWwiLCJsYW5nIiwibGFuZ3VhZ2UiLCJsaXN0IiwibG9vcCIsImxvdyIsIm1heCIsIm1heGxlbmd0aCIsIm1lZGlhIiwibWV0aG9kIiwibWluIiwibXVsdGlwbGUiLCJuYW1lIiwibm92YWxpZGF0ZSIsIm9wZW4iLCJvcHRpbXVtIiwicGF0dGVybiIsInBpbmciLCJwbGFjZWhvbGRlciIsInBvc3RlciIsInByZWxvYWQiLCJwdWJkYXRlIiwicmFkaW9ncm91cCIsInJlYWRvbmx5IiwicmVsIiwicmVxdWlyZWQiLCJyZXZlcnNlZCIsInJvd3MiLCJyb3dzcGFuIiwic2FuZGJveCIsInNjb3BlIiwic2NvcGVkIiwic2VhbWxlc3MiLCJzZWxlY3RlZCIsInNoYXBlIiwic2l6ZSIsInNpemVzIiwic3BhbiIsInNyYyIsInNyY2RvYyIsInNyY2xhbmciLCJzcmNzZXQiLCJzdGFydCIsInN0ZXAiLCJzdW1tYXJ5Iiwic3BlbGxjaGVjayIsInN0eWxlIiwidGFiaW5kZXgiLCJ0YXJnZXQiLCJ0aXRsZSIsInR5cGUiLCJ0cmFuc2xhdGUiLCJ1c2VtYXAiLCJ2YWx1ZSIsInZhbGlnbiIsIndpZHRoIiwid3JhcCJdLGFsbG93ZWRUYWdzOlsiIS0tIiwiYSIsImFiYnIiLCJhZGRyZXNzIiwiYXJlYSIsImFydGljbGUiLCJhc2lkZSIsImF1ZGlvIiwiYiIsImJhc2UiLCJiZGkiLCJiZG8iLCJibG9ja3F1b3RlIiwiYnIiLCJidXR0b24iLCJjYW52YXMiLCJjYXB0aW9uIiwiY2l0ZSIsImNvZGUiLCJjb2wiLCJjb2xncm91cCIsImRhdGFsaXN0IiwiZGQiLCJkZWwiLCJkZXRhaWxzIiwiZGZuIiwiZGlhbG9nIiwiZGl2IiwiZGwiLCJkdCIsImVtIiwiZW1iZWQiLCJmaWVsZHNldCIsImZpZ2NhcHRpb24iLCJmaWd1cmUiLCJmb290ZXIiLCJmb3JtIiwiaDEiLCJoMiIsImgzIiwiaDQiLCJoNSIsImg2IiwiaGVhZGVyIiwiaGdyb3VwIiwiaHIiLCJpIiwiaWZyYW1lIiwiaW1nIiwiaW5wdXQiLCJpbnMiLCJrYmQiLCJrZXlnZW4iLCJsYWJlbCIsImxlZ2VuZCIsImxpIiwibGluayIsIm1haW4iLCJtYXAiLCJtYXJrIiwibWVudSIsIm1lbnVpdGVtIiwibWV0ZXIiLCJuYXYiLCJub3NjcmlwdCIsIm9iamVjdCIsIm9sIiwib3B0Z3JvdXAiLCJvcHRpb24iLCJvdXRwdXQiLCJwIiwicGFyYW0iLCJwcmUiLCJwcm9ncmVzcyIsInF1ZXVlIiwicnAiLCJydCIsInJ1YnkiLCJzIiwic2FtcCIsInNjcmlwdCIsInNlY3Rpb24iLCJzZWxlY3QiLCJzbWFsbCIsInNvdXJjZSIsInNwYW4iLCJzdHJvbmciLCJzdHlsZSIsInN1YiIsInN1bW1hcnkiLCJzdXAiLCJ0YWJsZSIsInRib2R5IiwidGQiLCJ0ZXh0YXJlYSIsInRmb290IiwidGgiLCJ0aGVhZCIsInRpbWUiLCJ0aXRsZSIsInRyIiwidHJhY2siLCJ1IiwidWwiLCJ2YXIiLCJ2aWRlbyIsIndiciJdLGFsd2F5c0JsYW5rOiExLGFsd2F5c1Zpc2libGU6ITEsYXV0b3NhdmU6ITEsYXV0b3NhdmVJbnRlcnZhbDoxZTQsYmVhdXRpZnlDb2RlOiEwLGJsb2NrVGFnczpbIm4iLCJibG9ja3F1b3RlIiwicHJlIiwiaDEiLCJoMiIsImgzIiwiaDQiLCJoNSIsImg2Il0sYnV0dG9uczpbImJvbGQiLCJpdGFsaWMiLCJ1bmRlcmxpbmUiLCJzdHJpa2VUaHJvdWdoIiwiZm9udFNpemUiLCJmb250RmFtaWx5IiwiY29sb3IiLCJzZXAiLCJmb3JtYXRCbG9jayIsImJsb2NrU3R5bGUiLCJhbGlnbiIsImluc2VydE9yZGVyZWRMaXN0IiwiaW5zZXJ0VW5vcmRlcmVkTGlzdCIsIm91dGRlbnQiLCJpbmRlbnQiLCJzZXAiLCJjcmVhdGVMaW5rIiwiaW5zZXJ0SW1hZ2UiLCJpbnNlcnRWaWRlbyIsImluc2VydEhvcml6b250YWxSdWxlIiwidW5kbyIsInJlZG8iLCJodG1sIl0sY3Jvc3NEb21haW46ITAsY29udmVydE1haWxBZGRyZXNzZXM6ITAsY3VzdG9tQnV0dG9uczp7fSxjdXN0b21Ecm9wZG93bnM6e30sY3VzdG9tVGV4dDohMSxkZWZhdWx0SW1hZ2VXaWR0aDozMDAsZGlyZWN0aW9uOiJsdHIiLGRpc2FibGVSaWdodENsaWNrOiExLGVkaXRJblBvcHVwOiExLGVkaXRvckNsYXNzOiIiLGZvcm1hdFRhZ3M6WyJwIiwicHJlIiwiYmxvY2txdW90ZSIsImgxIiwiaDIiLCJoMyIsImg0IiwiaDUiLCJoNiIsImRpdiIsInVsIiwib2wiLCJsaSIsInRhYmxlIiwidGJvZHkiLCJ0aGVhZCIsInRmb290IiwidHIiLCJ0aCIsInRkIl0saGVhZGVyczp7fSxoZWlnaHQ6ImF1dG8iLGljb25zOnt9LGlubGluZU1vZGU6ITAsaW5pdE9uQ2xpY2s6ITEsbGFuZ3VhZ2U6ImVuX3VzIixsaW5rTGlzdDpbXSxsaW5rVGV4dDohMSxsaW5rQ2xhc3Nlczp7fSxtYXhIZWlnaHQ6ImF1dG8iLG1pbkhlaWdodDoiYXV0byIsbm9Gb2xsb3c6ITAscGFyYWdyYXBoeTohMCxwbGFjZWhvbGRlcjoiVHlwZSBzb21ldGhpbmciLHBsYWluUGFzdGU6ITEscHJlbG9hZGVyU3JjOiIiLHNhdmVVUkw6bnVsbCxzYXZlUGFyYW1zOnt9LHNhdmVSZXF1ZXN0VHlwZToiUE9TVCIsc2ltcGxlQW1wZXJzYW5kOiExLHNob3J0Y3V0czohMCxzaG9ydGN1dHNBdmFpbGFibGU6WyJzaG93IiwiYm9sZCIsIml0YWxpYyIsInVuZGVybGluZSIsImNyZWF0ZUxpbmsiLCJpbnNlcnRJbWFnZSIsInNlbGVjdEFsbCIsImluZGVudCIsIm91dGRlbnQiLCJodG1sIiwiZm9ybWF0QmxvY2sgbiIsImZvcm1hdEJsb2NrIGgxIiwiZm9ybWF0QmxvY2sgaDIiLCJmb3JtYXRCbG9jayBoMyIsImZvcm1hdEJsb2NrIGg0IiwiZm9ybWF0QmxvY2sgaDUiLCJmb3JtYXRCbG9jayBoNiIsImZvcm1hdEJsb2NrIGJsb2NrcXVvdGUiLCJmb3JtYXRCbG9jayBwcmUiLCJzdHJpa2VUaHJvdWdoIl0sc3BlbGxjaGVjazohMSx0aGVtZTpudWxsLHRvb2xiYXJGaXhlZDohMCx0cmFja1Njcm9sbDohMSx1bmxpbmtCdXR0b246ITAsdGFiU3BhY2VzOiEwLHR5cGluZ1RpbWVyOjE1MCxwYXN0ZWRJbWFnZXNVcGxvYWRSZXF1ZXN0VHlwZToiUE9TVCIscGFzdGVkSW1hZ2VzVXBsb2FkVVJMOm51bGwsd2lkdGg6ImF1dG8iLHdpdGhDcmVkZW50aWFsczohMSx6SW5kZXg6MWUzfSxiLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5zeW5jKCksdGhpcy5hZGRGclRhZygpLHRoaXMuaGlkZSgpLHRoaXMuaXNIVE1MJiZ0aGlzLmh0bWwoKSx0aGlzLmZvY3VzKCksdGhpcy5jbGVhclNlbGVjdGlvbigpLHRoaXMuJGVsZW1lbnQuYmx1cigpLHRoaXMuJGJ0dG5fd3JhcHBlciYmdGhpcy4kYnR0bl93cmFwcGVyLmh0bWwoIiIpLnJlbW92ZURhdGEoKS5yZW1vdmUoKSx0aGlzLiRlZGl0b3ImJnRoaXMuJGVkaXRvci5odG1sKCIiKS5yZW1vdmVEYXRhKCkucmVtb3ZlKCksdGhpcy5yYWlzZUV2ZW50KCJkZXN0cm95IiksdGhpcy4kcG9wdXBfZWRpdG9yJiZ0aGlzLiRwb3B1cF9lZGl0b3IuaHRtbCgiIikucmVtb3ZlRGF0YSgpLnJlbW92ZSgpLGNsZWFyVGltZW91dCh0aGlzLmFqYXhJbnRlcnZhbCksY2xlYXJUaW1lb3V0KHRoaXMudHlwaW5nVGltZXIpLHRoaXMuJGVsZW1lbnQub2ZmKCJtb3VzZWRvd24gbW91c2V1cCBjbGljayBrZXlkb3duIGtleXVwIGN1dCBmb2N1cyBrZXlwcmVzcyB0b3VjaHN0YXJ0IHRvdWNoZW5kIHRvdWNoIGRyb3AiKSx0aGlzLiRlbGVtZW50Lm9mZigibW91c2Vkb3duIG1vdXNldXAgY2xpY2sga2V5ZG93biBrZXl1cCBjdXQgZm9jdXMga2V5cHJlc3MgdG91Y2hzdGFydCB0b3VjaGVuZCB0b3VjaCBkcm9wIiwiKioiKSxhKHdpbmRvdykub2ZmKCJtb3VzZXVwLiIrdGhpcy5faWQpLGEod2luZG93KS5vZmYoImtleWRvd24uIit0aGlzLl9pZCksYSh3aW5kb3cpLm9mZigia2V5dXAuIit0aGlzLl9pZCksYSh3aW5kb3cpLm9mZigiYmx1ci4iK3RoaXMuX2lkKSxhKHdpbmRvdykub2ZmKCJoaWRlLiIrdGhpcy5faWQpLGEod2luZG93KS5vZmYoInNjcm9sbC4iK3RoaXMuX2lkKSxhKHdpbmRvdykub2ZmKCJvcmllbnRhdGlvbmNoYW5nZS4iK3RoaXMuX2lkKSxhKGRvY3VtZW50KS5vZmYoInNlbGVjdGlvbmNoYW5nZS4iK3RoaXMuX2lkKSx2b2lkIDAhPT10aGlzLiR1cGxvYWRfZnJhbWUmJnRoaXMuJHVwbG9hZF9mcmFtZS5yZW1vdmUoKSx0aGlzLiR0ZXh0YXJlYSYmKHRoaXMuJGJveC5yZW1vdmUoKSx0aGlzLiR0ZXh0YXJlYS5yZW1vdmVEYXRhKCJmYS5lZGl0YWJsZSIpLHRoaXMuJHRleHRhcmVhLnNob3coKSk7Zm9yKHZhciBiIGluIHRoaXMuX2V2ZW50cylkZWxldGUgdGhpcy5fZXZlbnRzW2JdO3RoaXMuaXNMaW5rP3RoaXMuJGVsZW1lbnQucmVtb3ZlRGF0YSgiZmEuZWRpdGFibGUiKToodGhpcy4kZWxlbWVudC5yZXBsYWNlV2l0aCh0aGlzLmdldEhUTUwoKSksdGhpcy4kYm94JiYhdGhpcy5lZGl0YWJsZURpc2FibGVkJiYodGhpcy4kYm94LnJlbW92ZUNsYXNzKCJmcm9hbGEtYm94IiksdGhpcy4kYm94LmZpbmQoIi5odG1sLXN3aXRjaCIpLnJlbW92ZSgpLHRoaXMuJGJveC5yZW1vdmVEYXRhKCJmYS5lZGl0YWJsZSIpLGNsZWFyVGltZW91dCh0aGlzLnR5cGluZ1RpbWVyKSkpfSxiLnByb3RvdHlwZS50cmlnZ2VyRXZlbnQ9ZnVuY3Rpb24oYixjLGQsZSl7dm9pZCAwPT09ZCYmKGQ9ITApLGQ9PT0hMSYmKGU9ITEpLHZvaWQgMD09PWUmJihlPSExKTt2YXIgZj0hMCxnPWIrIkNhbGxiYWNrIjtyZXR1cm4gdGhpcy5vcHRpb25zW2ddJiZhLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zW2ddKSYmKGY9Yz90aGlzLm9wdGlvbnNbZ10uYXBwbHkodGhpcyxjKTp0aGlzLm9wdGlvbnNbZ10uY2FsbCh0aGlzKSksY3x8KGM9W10pLGY9dGhpcy4kb3JpZ2luYWxfZWxlbWVudC50cmlnZ2VySGFuZGxlcigiZWRpdGFibGUuIitiLGEubWVyZ2UoW3RoaXNdLGMpKSxkPT09ITAmJih0aGlzLnN5bmMoKSx0aGlzLmlzUmVzaXppbmcoKXx8dGhpcy5lZGl0YWJsZURpc2FibGVkfHx0aGlzLmltYWdlTW9kZXx8IWV8fHRoaXMuY2xlYW5pZnkoKSksdm9pZCAwPT09Zj8hMDpmfSxiLnByb3RvdHlwZS5zeW5jQ2xlYW5IVE1MPWZ1bmN0aW9uKGEsYil7dmFyIGM7aWYoYilmb3IoYz1hLnJlcGxhY2UoLzxzcGFuKCg/IWNsYXNzXHMqPVxzKlsiJ10/Zi1tYXJrZXJbIiddPylbXj5dKSo/PjxcL3NwYW4+L2dpLCIiKTthIT1jOylhPWMsYz1hLnJlcGxhY2UoLzxzcGFuKCg/IWNsYXNzXHMqPVxzKlsiJ10/Zi1tYXJrZXJbIiddPylbXj5dKSo/PjxcL3NwYW4+L2dpLCIiKTtlbHNlIGZvcihjPWEucmVwbGFjZSgvPHNwYW5bXj5dKj8+PFwvc3Bhbj4vZywiIik7YSE9YzspYT1jLGM9YS5yZXBsYWNlKC88c3BhbltePl0qPz48XC9zcGFuPi9nLCIiKTtyZXR1cm4gYX0sYi5wcm90b3R5cGUuc3luY0NsZWFuPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9InNwYW46ZW1wdHkiO2MmJihkPSJzcGFuOmVtcHR5Om5vdCguZi1tYXJrZXIpIik7Zm9yKHZhciBlPSExLGY9ZnVuY3Rpb24oYixjKXswPT09Yy5hdHRyaWJ1dGVzLmxlbmd0aCYmKGEoYykucmVtb3ZlKCksZT0hMSl9LGc9Yi5maW5kKGQpO2cubGVuZ3RoJiZlPT09ITE7KWU9ITAsZy5lYWNoKGYpLGc9Yi5maW5kKGQpfSxiLnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNIVE1MKXt0aGlzLnJhaXNlRXZlbnQoInN5bmMiKSx0aGlzLmRpc2FibGVJbWFnZVJlc2l6ZSgpLHRoaXMuaXNMaW5rfHx0aGlzLmlzSW1hZ2V8fHRoaXMuJGVsZW1lbnQudHJpZ2dlcigicGxhY2Vob2xkZXJDaGVjayIpO3ZhciBhPXRoaXMuZ2V0SFRNTCgpO3RoaXMuaXNIVE1MfHwodGhpcy50cmFja0hUTUwhPT1hJiZudWxsIT10aGlzLnRyYWNrSFRNTD8odGhpcy50cmlnZ2VyRXZlbnQoImNvbnRlbnRDaGFuZ2VkIixbXSwhMSwhMSksdGhpcy5yZWZyZXNoSW1hZ2VMaXN0KCksdGhpcy5yZWZyZXNoQnV0dG9ucygpLHRoaXMudHJhY2tIVE1MPWEpOm51bGw9PXRoaXMudHJhY2tIVE1MJiYodGhpcy50cmFja0hUTUw9YSkpLHRoaXMuJHRleHRhcmVhJiZ0aGlzLiR0ZXh0YXJlYS52YWwoYSl9fSxiLnByb3RvdHlwZS5lbXB0eUVsZW1lbnQ9ZnVuY3Rpb24oYil7aWYoIklNRyI9PWIudGFnTmFtZXx8YShiKS5maW5kKCJpbWciKS5sZW5ndGg+MClyZXR1cm4hMTtpZihhKGIpLmZpbmQoImlucHV0LCBpZnJhbWUiKS5sZW5ndGg+MClyZXR1cm4hMTtmb3IodmFyIGM9YShiKS50ZXh0KCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKCJcbiIhPT1jW2RdJiYiXHIiIT09Y1tkXSYmIgkiIT09Y1tkXSlyZXR1cm4hMTtyZXR1cm4hMH0sYi5wcm90b3R5cGUuY29udGludWVJbml0PWZ1bmN0aW9uKCl7dGhpcy5icm93c2VyRml4ZXMoKSx0aGlzLmVkaXRhYmxlRGlzYWJsZWR8fCh0aGlzLmluaXRVbmRvUmVkbygpLHRoaXMuZW5hYmxlVHlwaW5nKCksdGhpcy5pbml0U2hvcnRjdXRzKCkpLHRoaXMuaW5pdFRhYnMoKSx0aGlzLmluaXRFZGl0b3IoKSx0aGlzLmlzTGlua3x8dGhpcy5pbml0RHJhZygpO2Zvcih2YXIgYj0wO2I8YS5FZGl0YWJsZS5pbml0aWFsaXplcnMubGVuZ3RoO2IrKylhLkVkaXRhYmxlLmluaXRpYWxpemVyc1tiXS5jYWxsKHRoaXMpO3RoaXMuaW5pdE9wdGlvbnMoKSx0aGlzLmluaXRFZGl0b3JTZWxlY3Rpb24oKSx0aGlzLmVkaXRhYmxlRGlzYWJsZWR8fCh0aGlzLnNldFBsYWNlaG9sZGVyKCksdGhpcy5zZXRQbGFjZWhvbGRlckV2ZW50cygpKSx0aGlzLmluaXRBamF4U2F2ZXIoKSx0aGlzLnNldExhbmd1YWdlKCksdGhpcy5zZXRDdXN0b21UZXh0KCksdGhpcy5lZGl0YWJsZURpc2FibGVkfHx0aGlzLnJlZ2lzdGVyUGFzdGUoKSx0aGlzLmluaXRpYWxpemVkPSEwLHRoaXMudHJpZ2dlckV2ZW50KCJpbml0aWFsaXplZCIsW10sITEsITEpfSxiLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGIpe3RoaXMuaW5pdEVsZW1lbnQoYiksdGhpcy5pbml0RWxlbWVudFN0eWxlKCksdGhpcy5vcHRpb25zLmluaXRPbkNsaWNrPyh0aGlzLmVkaXRhYmxlRGlzYWJsZWR8fHRoaXMuJGVsZW1lbnQuYXR0cigiY29udGVudGVkaXRhYmxlIiwhMCksdGhpcy4kZWxlbWVudC5iaW5kKCJtb3VzZWRvd24iLGEucHJveHkoZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLiRlbGVtZW50LnVuYmluZCgibW91c2Vkb3duIiksdGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5jb250aW51ZUluaXQoKSx0aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSx0aGlzLiRlbGVtZW50LmZvY3VzKCksdGhpcy5oaWRlT3RoZXJFZGl0b3JzKCl9LHRoaXMpKSk6dGhpcy5jb250aW51ZUluaXQoKX0sYi5wcm90b3R5cGUubW9iaWxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaU9TKCl8fHRoaXMuYW5kcm9pZCgpfHx0aGlzLmJsYWNrYmVycnkoKX0sYi5wcm90b3R5cGUuaU9TPWZ1bmN0aW9uKCl7cmV0dXJuLyhpUGFkfGlQaG9uZXxpUG9kKS9nLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9LGIucHJvdG90eXBlLmlQYWQ9ZnVuY3Rpb24oKXtyZXR1cm4vKGlQYWQpL2cudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX0sYi5wcm90b3R5cGUuaVBob25lPWZ1bmN0aW9uKCl7cmV0dXJuLyhpUGhvbmUpL2cudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX0sYi5wcm90b3R5cGUuaVBvZD1mdW5jdGlvbigpe3JldHVybi8oaVBvZCkvZy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfSxiLnByb3RvdHlwZS5hbmRyb2lkPWZ1bmN0aW9uKCl7cmV0dXJuLyhBbmRyb2lkKS9nLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9LGIucHJvdG90eXBlLmJsYWNrYmVycnk9ZnVuY3Rpb24oKXtyZXR1cm4vKEJsYWNrYmVycnkpL2cudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX0sYi5wcm90b3R5cGUuaW5pdE9uVGV4dGFyZWE9ZnVuY3Rpb24oYil7dGhpcy4kdGV4dGFyZWE9YShiKSx2b2lkIDAhPT10aGlzLiR0ZXh0YXJlYS5hdHRyKCJwbGFjZWhvbGRlciIpJiYiVHlwZSBzb21ldGhpbmciPT10aGlzLm9wdGlvbnMucGxhY2Vob2xkZXImJih0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXI9dGhpcy4kdGV4dGFyZWEuYXR0cigicGxhY2Vob2xkZXIiKSksdGhpcy4kZWxlbWVudD1hKCI8ZGl2PiIpLmh0bWwodGhpcy4kdGV4dGFyZWEudmFsKCkpLHRoaXMuJHRleHRhcmVhLmJlZm9yZSh0aGlzLiRlbGVtZW50KS5oaWRlKCksdGhpcy4kdGV4dGFyZWEucGFyZW50cygiZm9ybSIpLmJpbmQoInN1Ym1pdCIsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuaXNIVE1MP3RoaXMuaHRtbCgpOnRoaXMuc3luYygpfSx0aGlzKSl9LGIucHJvdG90eXBlLmluaXRPbkxpbms9ZnVuY3Rpb24oYil7dGhpcy5pc0xpbms9ITAsdGhpcy5zZWxlY3Rpb25EaXNhYmxlZD0hMCx0aGlzLmVkaXRhYmxlRGlzYWJsZWQ9ITAsdGhpcy5vcHRpb25zLmJ1dHRvbnM9W10sdGhpcy4kZWxlbWVudD1hKGIpLHRoaXMub3B0aW9ucy5wYXJhZ3JhcGh5PSExLHRoaXMuJGJveD10aGlzLiRlbGVtZW50fSxiLnByb3RvdHlwZS5pbml0T25JbWFnZT1mdW5jdGlvbihiKXt2YXIgYz1hKGIpLmNzcygiZmxvYXQiKTsiQSI9PWEoYikucGFyZW50KCkuZ2V0KDApLnRhZ05hbWUmJihiPWEoYikucGFyZW50KCkpLHRoaXMuaXNJbWFnZT0hMCx0aGlzLmVkaXRhYmxlRGlzYWJsZWQ9ITAsdGhpcy5pbWFnZUxpc3Q9W10sdGhpcy5vcHRpb25zLmJ1dHRvbnM9W10sdGhpcy5vcHRpb25zLnBhcmFncmFwaHk9ITEsdGhpcy5vcHRpb25zLmltYWdlTWFyZ2luPSJhdXRvIixhKGIpLndyYXAoIjxkaXY+IiksdGhpcy4kZWxlbWVudD1hKGIpLnBhcmVudCgpLHRoaXMuJGVsZW1lbnQuY3NzKCJkaXNwbGF5IiwiaW5saW5lLWJsb2NrIiksdGhpcy4kZWxlbWVudC5jc3MoIm1heC13aWR0aCIsIjEwMCUiKSx0aGlzLiRlbGVtZW50LmNzcygibWFyZ2luLWxlZnQiLCJhdXRvIiksdGhpcy4kZWxlbWVudC5jc3MoIm1hcmdpbi1yaWdodCIsImF1dG8iKSx0aGlzLiRlbGVtZW50LmNzcygiZmxvYXQiLGMpLHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoImYtaW1hZ2UiKSx0aGlzLiRib3g9YShiKX0sYi5wcm90b3R5cGUuaW5pdEZvclBvcHVwPWZ1bmN0aW9uKGIpe3RoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLiRib3g9dGhpcy4kZWxlbWVudCx0aGlzLmVkaXRhYmxlRGlzYWJsZWQ9ITAsdGhpcy5vcHRpb25zLmJ1dHRvbnM9W10sdGhpcy4kZWxlbWVudC5vbigiY2xpY2siLGEucHJveHkoZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpfSx0aGlzKSl9LGIucHJvdG90eXBlLmluaXRPbkRlZmF1bHQ9ZnVuY3Rpb24oYil7IkRJViIhPWIudGFnTmFtZSYmdGhpcy5vcHRpb25zLmJ1dHRvbnMuaW5kZXhPZigiZm9ybWF0QmxvY2siKT49MCYmdGhpcy5kaXNhYmxlZExpc3QucHVzaCgiZm9ybWF0QmxvY2siKSx0aGlzLiRlbGVtZW50PWEoYil9LGIucHJvdG90eXBlLmluaXRFbGVtZW50PWZ1bmN0aW9uKGIpeyJURVhUQVJFQSI9PWIudGFnTmFtZT90aGlzLmluaXRPblRleHRhcmVhKGIpOiJBIj09Yi50YWdOYW1lP3RoaXMuaW5pdE9uTGluayhiKToiSU1HIj09Yi50YWdOYW1lP3RoaXMuaW5pdE9uSW1hZ2UoYik6dGhpcy5vcHRpb25zLmVkaXRJblBvcHVwP3RoaXMuaW5pdEZvclBvcHVwKGIpOnRoaXMuaW5pdE9uRGVmYXVsdChiKSx0aGlzLmVkaXRhYmxlRGlzYWJsZWR8fCh0aGlzLiRib3g9dGhpcy4kZWxlbWVudCx0aGlzLiRlbGVtZW50PWEoIjxkaXY+IiksdGhpcy5zZXRIVE1MKHRoaXMuJGJveC5odG1sKCksITEpLHRoaXMuJGJveC5odG1sKHRoaXMuJGVsZW1lbnQpLmFkZENsYXNzKCJmcm9hbGEtYm94IiksdGhpcy4kZWxlbWVudC5vbigia2V5dXAiLGEucHJveHkoZnVuY3Rpb24oYSl7dmFyIGI9YS53aGljaDsxMz09YiYmdGhpcy53ZWJraXRQYXJhZ3JhcGh5KCl9LHRoaXMpKSksdGhpcy4kZWxlbWVudC5vbigiZHJvcCIsYS5wcm94eShmdW5jdGlvbigpe3NldFRpbWVvdXQoYS5wcm94eShmdW5jdGlvbigpe2EoImh0bWwiKS5jbGljaygpLHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLXdyYXAiKS5lYWNoKGZ1bmN0aW9uKGIsYyl7MD09PWEoYykuZmluZCgiaW1nIikubGVuZ3RoJiZhKGMpLnJlbW92ZSgpfSksdGhpcy4kZWxlbWVudC5maW5kKCJwOmVtcHR5IikucmVtb3ZlKCl9LHRoaXMpLDEpfSx0aGlzKSksdGhpcy5zeW5jKCl9LGIucHJvdG90eXBlLndlYmtpdFBhcmFncmFwaHk9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LmZpbmQoIioiKS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYixjKXtpZih0aGlzLmVtcHR5RWxlbWVudChjKSYmIkRJViI9PT1jLnRhZ05hbWUmJnRoaXMub3B0aW9ucy5wYXJhZ3JhcGh5PT09ITApe3ZhciBkPWEoIjxwPjxici8+PC9wPiIpO2EoYykucmVwbGFjZVdpdGgoZCksdGhpcy5zZXRTZWxlY3Rpb24oZC5nZXQoMCkpfX0sdGhpcykpfSxiLnByb3RvdHlwZS50cmltPWZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcoYSkucmVwbGFjZSgvXlxzK3xccyskL2csIiIpfSxiLnByb3RvdHlwZS51bndyYXBUZXh0PWZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLnBhcmFncmFwaHl8fHRoaXMuJGVsZW1lbnQuZmluZCgiZGl2IikuZWFjaChmdW5jdGlvbihiLGMpe3ZvaWQgMD09PWEoYykuYXR0cigic3R5bGUiKSYmYShjKS5yZXBsYWNlV2l0aChhKGMpLmh0bWwoKSsiPGJyLz4iKX0pfSxiLnByb3RvdHlwZS53cmFwVGV4dEluRWxlbWVudD1mdW5jdGlvbihiLGMpe3ZvaWQgMD09PWMmJihjPSExKTt2YXIgZD1bXSxlPVsiU1BBTiIsIkEiLCJCIiwiSSIsIkVNIiwiVSIsIlMiLCJTVFJPTkciLCJTVFJJS0UiLCJGT05UIiwiSU1HIiwiU1VCIiwiU1VQIl0sZj10aGlzO3RoaXMubm9fdmVyaWZ5PSEwO3ZhciBnPWZ1bmN0aW9uKCl7aWYoMD09PWQubGVuZ3RoKXJldHVybiExO3ZhciBiO2I9YShmLm9wdGlvbnMucGFyYWdyYXBoeT09PSEwPyI8cD4iOiI8ZGl2PiIpO3ZhciBjPWEoZFswXSk7aWYoMT09ZC5sZW5ndGgmJiJmLW1hcmtlciI9PWMuYXR0cigiY2xhc3MiKSlyZXR1cm4gdm9pZChkPVtdKTtmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGc9YShkW2VdKTtiLmFwcGVuZChnLmNsb25lKCkpLGU9PWQubGVuZ3RoLTE/Zy5yZXBsYWNlV2l0aChiKTpnLnJlbW92ZSgpfWQ9W119LGg9ITEsaT0hMTtiLmNvbnRlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKTtpZihiLmhhc0NsYXNzKCJmLW1hcmtlciIpfHxiLmZpbmQoIi5mLW1hcmtlciIpLmxlbmd0aCl7dmFyIGo9YjtiLmZpbmQoIi5mLW1hcmtlciIpLmxlbmd0aCYmKGo9YShiLmZpbmQoIi5mLW1hcmtlciIpWzBdKSksInRydWUiPT09ai5hdHRyKCJkYXRhLXR5cGUiKT8oaD0hMCxpPSExKTppPSEwfXRoaXMubm9kZVR5cGU9PU5vZGUuVEVYVF9OT0RFJiZiLnRleHQoKS50cmltKCkubGVuZ3RoPjB8fGUuaW5kZXhPZih0aGlzLnRhZ05hbWUpPj0wP2QucHVzaCh0aGlzKTp0aGlzLm5vZGVUeXBlPT1Ob2RlLlRFWFRfTk9ERSYmMD09PWIudGV4dCgpLnRyaW0oKS5sZW5ndGgmJmYub3B0aW9ucy5iZWF1dGlmeUNvZGU/Yi5yZW1vdmUoKTooaHx8Yz8oZygpLCJCUiI9PT10aGlzLnRhZ05hbWUmJmIucmVtb3ZlKCkpOmQ9W10saSYmKGg9ITEpKX0pLChofHxjKSYmZygpLGIuZmluZCgiPiBwIikuZWFjaChmdW5jdGlvbihiLGMpezA9PT1hKGMpLnRleHQoKS50cmltKCkubGVuZ3RoJiYwPT09YShjKS5maW5kKCJpbWciKS5sZW5ndGgmJjA9PT1hKGMpLmZpbmQoImJyIikubGVuZ3RoJiZhKGMpLmFwcGVuZCgiPGJyLz4iKX0pLGIuZmluZCgiZGl2OmVtcHR5IikucmVtb3ZlKCksYi5pcygiOmVtcHR5IikmJmIuYXBwZW5kKGYub3B0aW9ucy5wYXJhZ3JhcGh5PT09ITA/IjxwPjxici8+PC9wPiI6Ijxici8+IiksdGhpcy5ub192ZXJpZnk9ITF9LGIucHJvdG90eXBlLndyYXBUZXh0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzSW1hZ2V8fHRoaXMuaXNMaW5rPyExOih0aGlzLndlYmtpdFBhcmFncmFwaHkoKSx2b2lkIHRoaXMud3JhcFRleHRJbkVsZW1lbnQodGhpcy4kZWxlbWVudCxhKSl9LGIucHJvdG90eXBlLnNldEhUTUw9ZnVuY3Rpb24oYixjKXt0aGlzLm5vX3ZlcmlmeT0hMCx2b2lkIDA9PT1jJiYoYz0hMCksYj10aGlzLmNsZWFuKGIsITAsITEpLGI9Yi5yZXBsYWNlKC8+XHMrPC9nLCI+PCIpLHRoaXMuJGVsZW1lbnQuaHRtbChiKSx0aGlzLiRlbGVtZW50LmZpbmQoInByZSIpLmVhY2goZnVuY3Rpb24oYixjKXt2YXIgZD1hKGMpLGU9YShjKS5odG1sKCk7ZS5pbmRleE9mKCJcbiIpPj0wJiZkLmh0bWwoZS5yZXBsYWNlKC9cbi9nLCI8YnI+IikpfSksdGhpcy5pbWFnZUxpc3Q9W10sdGhpcy5yZWZyZXNoSW1hZ2VMaXN0KCksdGhpcy5vcHRpb25zLnBhcmFncmFwaHkmJnRoaXMud3JhcFRleHQoITApLGM9PT0hMCYmKHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMuc3luYygpKSx0aGlzLiRlbGVtZW50LmZpbmQoInNwYW4iKS5hdHRyKCJkYXRhLWZyLXZlcmlmaWVkIiwhMCksdGhpcy5ub192ZXJpZnk9ITF9LGIucHJvdG90eXBlLmJyZWFrSFRNTD1mdW5jdGlvbihiKXtpZih0aGlzLnJlbW92ZU1hcmtlcnMoKSx0aGlzLmluc2VydEhUTUwoIjxicmVhaz48L2JyZWFrPiIpLHRoaXMuJGVsZW1lbnQuZmluZCgiYnJlYWsiKS5yZW1vdmUoKSx0aGlzLmNoZWNrUGxhY2Vob2xkZXIoKSx0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJmLXBsYWNlaG9sZGVyIikpcmV0dXJuIHRoaXMuJGVsZW1lbnQuaHRtbChiKSwhMDt2YXIgYz10aGlzLmdldFNlbGVjdGlvbkVsZW1lbnRzKClbMF07aWYoYz09dGhpcy4kZWxlbWVudC5nZXQoMCkpcmV0dXJuIHRoaXMuaW5zZXJ0SFRNTChiKSwhMDtpZih0aGlzLmVtcHR5RWxlbWVudChhKGMpKSlyZXR1cm4gYShjKS5yZXBsYWNlV2l0aChiKSwhMDt0aGlzLmluc2VydEhUTUwoIjxicmVhaz48L2JyZWFrPiIpO2Zvcih2YXIgZCxlLGY9YSgiPGRpdj48L2Rpdj4iKS5hcHBlbmQoYShjKS5jbG9uZSgpKS5odG1sKCksZz1bXSxoPXt9LGk9W10saj0wLGs9MDtrPGYubGVuZ3RoO2srKylpZihlPWYuY2hhckF0KGspLCI8Ij09ZSl7dmFyIGw9Zi5pbmRleE9mKCI+IixrKzEpO2lmKC0xIT09bCl7ZD1mLnN1YnN0cmluZyhrLGwrMSk7dmFyIG09dGhpcy50YWdOYW1lKGQpO2lmKGs9bCwiYnJlYWsiPT1tKXtpZighdGhpcy5pc0Nsb3NpbmdUYWcoZCkpe2Zvcih2YXIgbj1nLmxlbmd0aC0xO24+PTA7bi0tKXt2YXIgbz10aGlzLnRhZ05hbWUoZ1tuXSk7aS5wdXNoKCI8LyIrbysiPiIpfWkucHVzaChiKTtmb3IodmFyIHA9MDtwPGcubGVuZ3RoO3ArKylpLnB1c2goZ1twXSk7aS5wdXNoKCc8c3BhbiBjbGFzcz0iZi1tYXJrZXIiIGRhdGEtdHlwZT0iZmFsc2UiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj48c3BhbiBjbGFzcz0iZi1tYXJrZXIiIGRhdGEtdHlwZT0idHJ1ZSIgZGF0YS1pZD0iMCIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPicpfX1lbHNlIGlmKGkucHVzaChkKSwhdGhpcy5pc1NlbGZDbG9zaW5nVGFnKGQpKWlmKHRoaXMuaXNDbG9zaW5nVGFnKGQpKXt2YXIgcT1oW21dLnBvcCgpO2cuc3BsaWNlKHEsMSl9ZWxzZSBnLnB1c2goZCksdm9pZCAwPT09aFttXSYmKGhbbV09W10pLGhbbV0ucHVzaChnLmxlbmd0aC0xKX19ZWxzZSBqKyssaS5wdXNoKGUpO2EoYykucmVwbGFjZVdpdGgoaS5qb2luKCIiKSksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCl9LGIucHJvdG90eXBlLmJlZm9yZVBhc3RlPWZ1bmN0aW9uKCl7dGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5jbGlwYm9hcmRIVE1MPW51bGwsdGhpcy5zY3JvbGxQb3NpdGlvbj1hKHdpbmRvdykuc2Nyb2xsVG9wKCksdGhpcy4kcGFzdGVEaXY9YSgnPGRpdiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgbGVmdDogLTk5OTlweDsgaGVpZ2h0OiAxMDAlOyB3aWR0aDogMDsgei1pbmRleDogOTk5OTk7Ij48L2Rpdj4nKS5hcHBlbmRUbygiYm9keSIpLHRoaXMuJHBhc3RlRGl2LmZvY3VzKCksd2luZG93LnNldFRpbWVvdXQoYS5wcm94eSh0aGlzLnByb2Nlc3NQYXN0ZSx0aGlzKSwxKX0sYi5wcm90b3R5cGUucHJvY2Vzc1Bhc3RlPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5jbGlwYm9hcmRIVE1MO251bGw9PT10aGlzLmNsaXBib2FyZEhUTUwmJihiPXRoaXMuJHBhc3RlRGl2Lmh0bWwoKSx0aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSxhKHdpbmRvdykuc2Nyb2xsVG9wKHRoaXMuc2Nyb2xsUG9zaXRpb24pKTt2YXIgYyxkPXRoaXMudHJpZ2dlckV2ZW50KCJvblBhc3RlIixbYl0sITEpO2lmKCJzdHJpbmciPT10eXBlb2YgZCYmKGI9ZCksYj1iLnJlcGxhY2UoLzxpbWcgL2dpLCc8aW1nIGRhdGEtZnItaW1hZ2UtcGFzdGVkPSJ0cnVlIiAnKSxiLm1hdGNoKC8oY2xhc3M9XCI/TXNvfHN0eWxlPVwiW15cIl0qXGJtc29cLXx3OldvcmREb2N1bWVudCkvZ2kpP2M9dGhpcy53b3JkQ2xlYW4oYik6KGM9dGhpcy5jbGVhbihiLCExLCEwKSxjPXRoaXMucmVtb3ZlRW1wdHlUYWdzKGMpKSx0aGlzLm9wdGlvbnMucGxhaW5QYXN0ZSYmKGM9dGhpcy5wbGFpblBhc3RlQ2xlYW4oYykpLCIiIT09Yyl7Zm9yKHZhciBlPSExLGY9YSgiPGRpdj4iKS5hcHBlbmQoYykuZmluZCgiKiIpLGc9MDtnPGYubGVuZ3RoO2crKylpZihhLkVkaXRhYmxlLlZBTElEX05PREVTLmluZGV4T2YoZltnXS50YWdOYW1lKT49MCl7dGhpcy5icmVha0hUTUwoYyksZT0hMDticmVha31lfHx0aGlzLmluc2VydEhUTUwoYyksdGhpcy4kZWxlbWVudC5maW5kKCJsaSIpLmVhY2goYS5wcm94eShmdW5jdGlvbihiLGMpe3RoaXMud3JhcFRleHRJbkVsZW1lbnQoYShjKSwhMCl9LHRoaXMpKSx0aGlzLm9wdGlvbnMucGFyYWdyYXBoeSYmdGhpcy53cmFwVGV4dCghMCksdGhpcy5jbGVhbnVwTGlzdHMoKX10aGlzLmFmdGVyUGFzdGUoKX0sYi5wcm90b3R5cGUuYWZ0ZXJQYXN0ZT1mdW5jdGlvbigpe3RoaXMuZm9jdXMoKSx0aGlzLnVwbG9hZFBhc3RlZEltYWdlcygpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcigicGxhY2Vob2xkZXJDaGVjayIpLHRoaXMucGFzdGluZz0hMSx0aGlzLnRyaWdnZXJFdmVudCgiYWZ0ZXJQYXN0ZSIsW10sITAsITApfSxiLnByb3RvdHlwZS5yZWdpc3RlclBhc3RlPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5nZXQoMCkub25wYXN0ZT1hLnByb3h5KGZ1bmN0aW9uKGIpe2lmKCF0aGlzLmlzSFRNTCl7aWYoIXRoaXMudHJpZ2dlckV2ZW50KCJiZWZvcmVQYXN0ZSIsW10sITEpKXJldHVybiExO2lmKHRoaXMuY2xpcGJvYXJkUGFzdGUoYikpcmV0dXJuITE7dGhpcy5jbGlwYm9hcmRIVE1MPSIiLHRoaXMucGFzdGluZz0hMCx0aGlzLnNjcm9sbFBvc2l0aW9uPWEod2luZG93KS5zY3JvbGxUb3AoKTt2YXIgYz0hMTtpZihiJiZiLmNsaXBib2FyZERhdGEmJmIuY2xpcGJvYXJkRGF0YS5nZXREYXRhKXt2YXIgZD0iIixlPWIuY2xpcGJvYXJkRGF0YS50eXBlcztpZihhLkVkaXRhYmxlLmlzQXJyYXkoZSkpZm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspZCs9ZVtmXSsiOyI7ZWxzZSBkPWU7aWYoL3RleHRcL2h0bWwvLnRlc3QoZCk/dGhpcy5jbGlwYm9hcmRIVE1MPWIuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCJ0ZXh0L2h0bWwiKTovdGV4dFwvcnRmLy50ZXN0KGQpJiZ0aGlzLmJyb3dzZXIuc2FmYXJpP3RoaXMuY2xpcGJvYXJkSFRNTD1iLmNsaXBib2FyZERhdGEuZ2V0RGF0YSgidGV4dC9ydGYiKTovdGV4dFwvcGxhaW4vLnRlc3QoZCkmJih0aGlzLmNsaXBib2FyZEhUTUw9Yi5jbGlwYm9hcmREYXRhLmdldERhdGEoInRleHQvcGxhaW4iKS5yZXBsYWNlKC9cbi9nLCI8YnIvPiIpKSwiIiE9PXRoaXMuY2xpcGJvYXJkSFRNTD9jPSEwOnRoaXMuY2xpcGJvYXJkSFRNTD1udWxsLGMpcmV0dXJuIHRoaXMucHJvY2Vzc1Bhc3RlKCksYi5wcmV2ZW50RGVmYXVsdCYmKGIuc3RvcFByb3BhZ2F0aW9uKCksYi5wcmV2ZW50RGVmYXVsdCgpKSwhMX10aGlzLmJlZm9yZVBhc3RlKCl9fSx0aGlzKX0sYi5wcm90b3R5cGUuY2xpcGJvYXJkUGFzdGU9ZnVuY3Rpb24oYil7aWYoYiYmYi5jbGlwYm9hcmREYXRhJiZiLmNsaXBib2FyZERhdGEuaXRlbXMpe3ZhciBjPWIuY2xpcGJvYXJkRGF0YS5pdGVtc1swXS5nZXRBc0ZpbGUoKTtpZihjKXt2YXIgZD1uZXcgRmlsZVJlYWRlcjtyZXR1cm4gZC5vbmxvYWQ9YS5wcm94eShmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldC5yZXN1bHQ7dGhpcy5pbnNlcnRIVE1MKCc8aW1nIGRhdGEtZnItaW1hZ2UtcGFzdGVkPSJ0cnVlIiBzcmM9IicrYisnIiAvPicpLHRoaXMuYWZ0ZXJQYXN0ZSgpfSx0aGlzKSxkLnJlYWRBc0RhdGFVUkwoYyksITB9fXJldHVybiExfSxiLnByb3RvdHlwZS51cGxvYWRQYXN0ZWRJbWFnZXM9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LmZpbmQoImltZ1tkYXRhLWZyLWltYWdlLXBhc3RlZF0iKS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYixjKXt0aGlzLm9wdGlvbnMucGFzdGVJbWFnZT8oMD09PWMuc3JjLmluZGV4T2YoImRhdGE6Iik/dGhpcy5vcHRpb25zLnBhc3RlZEltYWdlc1VwbG9hZFVSTCYmKHNldFRpbWVvdXQoYS5wcm94eShmdW5jdGlvbigpe3RoaXMuc2hvd0ltYWdlTG9hZGVyKCksdGhpcy4kcHJvZ3Jlc3NfYmFyLmZpbmQoInNwYW4iKS5jc3MoIndpZHRoIiwiMTAwJSIpLnRleHQoIlBsZWFzZSB3YWl0ISIpLHRoaXMuc2hvd0J5Q29vcmRpbmF0ZXMoYShjKS5vZmZzZXQoKS5sZWZ0K2EoYykud2lkdGgoKS8yLGEoYykub2Zmc2V0KCkudG9wK2EoYykuaGVpZ2h0KCkrMTApLHRoaXMuaXNEaXNhYmxlZD0hMH0sdGhpcyksMTApLGEuYWpheCh7dHlwZTp0aGlzLm9wdGlvbnMucGFzdGVkSW1hZ2VzVXBsb2FkUmVxdWVzdFR5cGUsdXJsOnRoaXMub3B0aW9ucy5wYXN0ZWRJbWFnZXNVcGxvYWRVUkwsZGF0YTp7aW1hZ2U6ZGVjb2RlVVJJQ29tcG9uZW50KGMuc3JjKX0sY3Jvc3NEb21haW46dGhpcy5vcHRpb25zLmNyb3NzRG9tYWluLHhockZpZWxkczp7d2l0aENyZWRlbnRpYWxzOnRoaXMub3B0aW9ucy53aXRoQ3JlZGVudGlhbHN9LGhlYWRlcnM6dGhpcy5vcHRpb25zLmhlYWRlcnMsZGF0YVR5cGU6Impzb24ifSkuZG9uZShhLnByb3h5KGZ1bmN0aW9uKGIpe3RyeXtpZihiLmxpbmspe3ZhciBkPW5ldyBJbWFnZTtkLm9uZXJyb3I9YS5wcm94eShmdW5jdGlvbigpe3RoaXMudGhyb3dJbWFnZUVycm9yKDEpfSx0aGlzKSxkLm9ubG9hZD1hLnByb3h5KGZ1bmN0aW9uKCl7Yy5zcmM9Yi5saW5rLHRoaXMuaGlkZUltYWdlTG9hZGVyKCksdGhpcy5oaWRlKCksdGhpcy5lbmFibGUoKSx0aGlzLnRyaWdnZXJFdmVudCgiYWZ0ZXJVcGxvYWRQYXN0ZWRJbWFnZSIsW2EoYyldKX0sdGhpcyksZC5zcmM9Yi5saW5rfWVsc2UgYi5lcnJvcj90aGlzLnRocm93SW1hZ2VFcnJvcldpdGhNZXNzYWdlKGIuZXJyb3IpOnRoaXMudGhyb3dJbWFnZUVycm9yKDIpfWNhdGNoKGUpe3RoaXMudGhyb3dJbWFnZUVycm9yKDQpfX0sdGhpcykpLmZhaWwoYS5wcm94eShmdW5jdGlvbigpe3RoaXMudGhyb3dJbWFnZUVycm9yKDMpfSx0aGlzKSkpOjAhPT1jLnNyYy5pbmRleE9mKCJodHRwIikmJmEoYykucmVtb3ZlKCksYShjKS5yZW1vdmVBdHRyKCJkYXRhLWZyLWltYWdlLXBhc3RlZCIpKTphKGMpLnJlbW92ZSgpfSx0aGlzKSl9LGIucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLmlzRGlzYWJsZWQ9ITAsdGhpcy4kZWxlbWVudC5ibHVyKCl9LGIucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbigpe3RoaXMuaXNEaXNhYmxlZD0hMX0sYi5wcm90b3R5cGUud29yZENsZWFuPWZ1bmN0aW9uKGEpe2E9YS5yZXBsYWNlKC88cCguKj8pY2xhc3M9Ij8nP01zb0xpc3RQYXJhZ3JhcGgiPyc/KFtcc1xTXSo/KT4oW1xzXFNdKj8pPFwvcD4vZ2ksIjx1bD48bGk+PHA+JDM8L3A+PC9saT48L3VsPiIpLGE9YS5yZXBsYWNlKC88cCguKj8pY2xhc3M9Ij8nP01zb0xpc3RQYXJhZ3JhcGhDeFNwRmlyc3QiPyc/KFtcc1xTXSo/KT4oW1xzXFNdKj8pPFwvcD4vZ2ksIjx1bD48bGk+PHA+JDM8L3A+PC9saT4iKSxhPWEucmVwbGFjZSgvPHAoLio/KWNsYXNzPSI/Jz9Nc29MaXN0UGFyYWdyYXBoQ3hTcE1pZGRsZSI/Jz8oW1xzXFNdKj8pPihbXHNcU10qPyk8XC9wPi9naSwiPGxpPjxwPiQzPC9wPjwvbGk+IiksYT1hLnJlcGxhY2UoLzxwKC4qPyljbGFzcz0iPyc/TXNvTGlzdFBhcmFncmFwaEN4U3BMYXN0Ij8nPyhbXHNcU10qPyk+KFtcc1xTXSo/KTxcL3A+L2dpLCI8bGk+PHA+JDM8L3A+PC9saT48L3VsPiIpLGE9YS5yZXBsYWNlKC88c3BhbihbXjxdKj8pc3R5bGU9Ij8nP21zby1saXN0Oklnbm9yZSI/Jz8oW1xzXFNdKj8pPihbXHNcU10qPyk8c3Bhbi9naSwiPHNwYW4+PHNwYW4iKSxhPWEucmVwbGFjZSgvPCEtLVxbaWYgXCFzdXBwb3J0TGlzdHNcXS0tPihbXHNcU10qPyk8IS0tXFtlbmRpZlxdLS0+L2dpLCIiKSxhPWEucmVwbGFjZSgvKFxufFxyfCBjbGFzcz0oIik/TXNvW2EtekEtWl0rKCIpPykvZ2ksIiAiKSxhPWEucmVwbGFjZSgvPCEtLVtcc1xTXSo/LS0+L2dpLCIiKSxhPWEucmVwbGFjZSgvPChcLykqKG1ldGF8bGlua3xzcGFufFxcP3htbDp8c3QxOnxvOnxmb250KSguKj8pPi9naSwiIik7Zm9yKHZhciBiPVsic3R5bGUiLCJzY3JpcHQiLCJhcHBsZXQiLCJlbWJlZCIsIm5vZnJhbWVzIiwibm9zY3JpcHQiXSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPW5ldyBSZWdFeHAoIjwiK2JbY10rIi4qPyIrYltjXSsiKC4qPyk+IiwiZ2kiKTthPWEucmVwbGFjZShkLCIiKX1hPWEucmVwbGFjZSgvKFtcd1wtXSopPSgiW148PiJdKiJ8J1tePD4nXSonfFx3KykvZ2ksIiIpLGE9YS5yZXBsYWNlKC8mbmJzcDsvZ2ksIiIpO3ZhciBlO2RvIGU9YSxhPWEucmVwbGFjZSgvPFteXC8+XVtePl0qPjxcL1tePl0rPi9naSwiIik7d2hpbGUoYSE9ZSk7cmV0dXJuIGE9dGhpcy5jbGVhbihhKX0sYi5wcm90b3R5cGUudGFicz1mdW5jdGlvbihhKXtmb3IodmFyIGI9IiIsYz0wO2E+YztjKyspYis9IiAgIjtyZXR1cm4gYn0sYi5wcm90b3R5cGUuY2xlYW5UYWdzPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9ITEpO3ZhciBjLGQsZSxmLGc9dGhpcy5vcHRpb25zLmZvcm1hdFRhZ3MsaD1bXSxpPVtdLGo9ITE7Zm9yKGQ9MDtkPGEubGVuZ3RoO2QrKylpZihjPWEuY2hhckF0KGQpLCI8Ij09Yyl7dmFyIGs9YS5pbmRleE9mKCI+IixkKzEpO2lmKC0xIT09ayl7dmFyIGw9YS5zdWJzdHJpbmcoZCxrKzEpLG09dGhpcy50YWdOYW1lKGwpLG49dGhpcy5pc0Nsb3NpbmdUYWcobCk7aWYoInByZSI9PT1tJiYoaj1uPyExOiEwKSx0aGlzLmlzU2VsZkNsb3NpbmdUYWcobCkpaS5wdXNoKCJiciI9PT1tJiZqPyJcbiI6bCk7ZWxzZSBpZihuKWZvcihlPSExLGY9ITA7ZT09PSExJiZ2b2lkIDAhPT1mOylmPWgucG9wKCksdm9pZCAwIT09ZiYmZi50YWdfbmFtZSE9PW0/aS5zcGxpY2UoZi5pLDEpOihlPSEwLHZvaWQgMCE9PWYmJmkucHVzaChsKSk7ZWxzZSBpLnB1c2gobCksaC5wdXNoKHt0YWdfbmFtZTptLGk6aS5sZW5ndGgtMX0pO2Q9a319ZWxzZSJcbiI9PT1jJiZ0aGlzLm9wdGlvbnMuYmVhdXRpZnlDb2RlP2ImJmomJmkucHVzaCgiPGJyLz4iKToiCSIhPT1jJiZpLnB1c2goYyk7Zm9yKDtoLmxlbmd0aD4wOylmPWgucG9wKCksaS5zcGxpY2UoZi5pLDEpO3ZhciBvPSJcbiI7dGhpcy5vcHRpb25zLmJlYXV0aWZ5Q29kZXx8KG89IiIpLGE9IiIsaD0wO3ZhciBwPSEwO2ZvcihkPTA7ZDxpLmxlbmd0aDtkKyspMT09aVtkXS5sZW5ndGg/cCYmIiAiPT09aVtkXXx8KGErPWlbZF0scD0hMSk6Zy5pbmRleE9mKHRoaXMudGFnTmFtZShpW2RdKS50b0xvd2VyQ2FzZSgpKTwwP2ErPWlbZF06dGhpcy5pc1NlbGZDbG9zaW5nVGFnKGlbZF0pP2ErPWlbZF06dGhpcy5pc0Nsb3NpbmdUYWcoaVtkXSk/KGgtPTEsMD09PWgmJihwPSEwKSxhLmxlbmd0aD4wJiZhW2EubGVuZ3RoLTFdPT1vJiYoYSs9dGhpcy50YWJzKGgpKSxhKz1pW2RdK28pOihhKz1vK3RoaXMudGFicyhoKStpW2RdLGgrPTEpO3JldHVybiBhWzBdPT1vJiYoYT1hLnN1YnN0cmluZygxLGEubGVuZ3RoKSksYVthLmxlbmd0aC0xXT09byYmKGE9YS5zdWJzdHJpbmcoMCxhLmxlbmd0aC0xKSksYX0sYi5wcm90b3R5cGUuY2xlYW51cExpc3RzPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5maW5kKCJ1bCwgb2wiKS5lYWNoKGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YShjKTtpZihkLmZpbmQoIi5jbG9zZS11bCwgLm9wZW4tdWwsIC5jbG9zZS1vbCwgLm9wZW4tb2wsIC5vcGVuLWxpLCAuY2xvc2UtbGkiKS5sZW5ndGg+MCl7dmFyIGU9IjwiK2MudGFnTmFtZS50b0xvd2VyQ2FzZSgpKyI+IitkLmh0bWwoKSsiPC8iK2MudGFnTmFtZS50b0xvd2VyQ2FzZSgpKyI+IjtlPWUucmVwbGFjZShuZXcgUmVnRXhwKCc8c3BhbiBjbGFzcz0iY2xvc2UtdWwiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCJnIiksIjwvdWw+IiksZT1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnPHNwYW4gY2xhc3M9Im9wZW4tdWwiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCJnIiksIjx1bD4iKSxlPWUucmVwbGFjZShuZXcgUmVnRXhwKCc8c3BhbiBjbGFzcz0iY2xvc2Utb2wiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCJnIiksIjwvb2w+IiksZT1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnPHNwYW4gY2xhc3M9Im9wZW4tb2wiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCJnIiksIjxvbD4iKSxlPWUucmVwbGFjZShuZXcgUmVnRXhwKCc8c3BhbiBjbGFzcz0iY2xvc2UtbGkiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCJnIiksIjwvbGk+IiksZT1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnPHNwYW4gY2xhc3M9Im9wZW4tbGkiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCJnIiksIjxsaT4iKSxkLnJlcGxhY2VXaXRoKGUpfX0pO2Zvcih2YXIgYj10aGlzLiRlbGVtZW50LmZpbmQoIm9sICsgb2wsIHVsICsgdWwiKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWEoYltjXSk7ZC5wcmV2KCkuYXBwZW5kKGQuaHRtbCgpKSxkLnJlbW92ZSgpfXRoaXMuJGVsZW1lbnQuZmluZCgibGkgPiB0ZCIpLnJlbW92ZSgpLHRoaXMuJGVsZW1lbnQuZmluZCgibGk6ZW1wdHkiKS5yZW1vdmUoKSx0aGlzLiRlbGVtZW50LmZpbmQoImxpIHRkOmVtcHR5IikuYXBwZW5kKCI8L2JyPiIpLHRoaXMuJGVsZW1lbnQuZmluZCgidWwsIG9sIikuZWFjaChmdW5jdGlvbihiLGMpe3ZhciBkPWEoYyk7MD09PWQuZmluZChhLkVkaXRhYmxlLlZBTElEX05PREVTLmpvaW4oIiwiKSkubGVuZ3RoJiZkLnJlbW92ZSgpfSksdGhpcy4kZWxlbWVudC5maW5kKCJsaSA+IHRkIikucmVtb3ZlKCksdGhpcy4kZWxlbWVudC5maW5kKCJsaTplbXB0eSIpLnJlbW92ZSgpLHRoaXMuJGVsZW1lbnQuZmluZCgibGkgdGQ6ZW1wdHkiKS5hcHBlbmQoIjwvYnI+Iil9LGIucHJvdG90eXBlLmNsZWFuPWZ1bmN0aW9uKGIsYyxkLGUsZil7Znx8KGY9YS5tZXJnZShbXSx0aGlzLm9wdGlvbnMuYWxsb3dlZEF0dHJzKSksZXx8KGU9YS5tZXJnZShbXSx0aGlzLm9wdGlvbnMuYWxsb3dlZFRhZ3MpKSxjfHwoZi5pbmRleE9mKCJpZCIpPi0xJiZmLnNwbGljZShmLmluZGV4T2YoImlkIiksMSksZi5pbmRleE9mKCJjbGFzcyIpPi0xJiZmLnNwbGljZShmLmluZGV4T2YoImNsYXNzIiksMSkpLGI9Yi5yZXBsYWNlKC88c2NyaXB0XGJbXjxdKig/Oig/ITxcL3NjcmlwdD4pPFtePF0qKSo8XC9zY3JpcHQ+L2dpLCIiKTt2YXIgZz1uZXcgUmVnRXhwKCI8XFwvPygoPyEoPzoiK2Uuam9pbigifCIpKyIpKVxcdyspW14+XSo/PiIsImdpIik7Yj1iLnJlcGxhY2UoZywiIik7dmFyIGg9bmV3IFJlZ0V4cCgiKCAoPyEoPzoiK2Yuam9pbigifCIpKyIpKVthLXpBLVowLTktX10rKT0oKD86Lig/IVxccysoPzpcXFMrKT18Wz5dfChcXC8+KSkpKy4pIiwiZ2kiKTtiPWIucmVwbGFjZShoLCIiKTt2YXIgaT1uZXcgUmVnRXhwKCc8KFtePl0qKShzcmN8aHJlZik9KFwnW15cJ10qXCd8IiJbXiIiXSoiInxbXlxccz5dKykoW14+XSopPicsImdpIik7aWYoYj1iLnJlcGxhY2UoaSxhLnByb3h5KGZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIjwiK2IrYysnPSInK3RoaXMuc2FuaXRpemVVUkwoZC5yZXBsYWNlKC9eWyInXSguKilbIiddXC8/JC9naSwiJDEiKSkrJyInK2UrIj4ifSx0aGlzKSksZCl7dmFyIGo9bmV3IFJlZ0V4cCgic3R5bGU9KFwiW2EtekEtWjAtOTo7XFwuXFxzXFwoXFwpXFwtXFwsIVxcLyclXSpcInwnW2EtekEtWjAtOTo7XFwuXFxzXFwoXFwpXFwtXFwsIVxcL1wiJV0qJykiLCJnaSIpO2I9Yi5yZXBsYWNlKGosIiIpfXJldHVybiBiPXRoaXMuY2xlYW5UYWdzKGIsITApfSxiLnByb3RvdHlwZS5wbGFpblBhc3RlQ2xlYW49ZnVuY3Rpb24oYil7dmFyIGM9YSgiPGRpdj4iKS5odG1sKGIpO2MuZmluZCgiaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcHJlLCBibG9ja3F1b3RlIikuZWFjaChmdW5jdGlvbihiLGMpe2EoYykucmVwbGFjZVdpdGgoIjxwPiIrYShjKS5odG1sKCkrIjwvcD4iKX0pO2Zvcih2YXIgZD1mdW5jdGlvbihiLGMpe2EoYykucmVwbGFjZVdpdGgoYShjKS5odG1sKCkpfTtjLmZpbmQoInN0cm9uZywgZW0sIHN0cmlrZSwgYiwgdSwgaSwgc3VwLCBzdWIsIHNwYW4sIGEiKS5sZW5ndGg7KWMuZmluZCgic3Ryb25nLCBlbSwgc3RyaWtlLCBiLCB1LCBpLCBzdXAsIHN1Yiwgc3BhbiwgYSIpLmVhY2goZCk7cmV0dXJuIGMuaHRtbCgpfSxiLnByb3RvdHlwZS5yZW1vdmVFbXB0eVRhZ3M9ZnVuY3Rpb24oYil7Zm9yKHZhciBjLGQ9YSgiPGRpdj4iKS5odG1sKGIpLGU9ZC5maW5kKCIqOmVtcHR5Om5vdChiciwgaW1nKSIpO2UubGVuZ3RoOyl7Zm9yKGM9MDtjPGUubGVuZ3RoO2MrKylhKGVbY10pLnJlbW92ZSgpO2U9ZC5maW5kKCIqOmVtcHR5Om5vdChiciwgaW1nKSIpfWZvcih2YXIgZj1kLmZpbmQoImRpdiIpO2YubGVuZ3RoOyl7Zm9yKGM9MDtjPGYubGVuZ3RoO2MrKyl7dmFyIGc9YShmW2NdKSxoPWcuaHRtbCgpLnJlcGxhY2UoL1x1MDAwOS9naSwiIikudHJpbSgpO2cucmVwbGFjZVdpdGgoaCl9Zj1kLmZpbmQoImRpdiIpfXJldHVybiBkLmh0bWwoKX0sYi5wcm90b3R5cGUuaW5pdEVsZW1lbnRTdHlsZT1mdW5jdGlvbigpe3RoaXMuZWRpdGFibGVEaXNhYmxlZHx8dGhpcy4kZWxlbWVudC5hdHRyKCJjb250ZW50ZWRpdGFibGUiLCEwKTt2YXIgYT0iZnJvYWxhLWVsZW1lbnQgIit0aGlzLm9wdGlvbnMuZWRpdG9yQ2xhc3M7dGhpcy5icm93c2VyLm1zaWUmJmIuZ2V0SUV2ZXJzaW9uKCk8OSYmKGErPSIgaWU4IiksdGhpcy4kZWxlbWVudC5jc3MoIm91dGxpbmUiLDApLHRoaXMuYnJvd3Nlci5tc2llfHwoYSs9IiBub3QtbXNpZSIpLHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoYSl9LGIucHJvdG90eXBlLmluaXRVbmRvUmVkbz1mdW5jdGlvbigpe3RoaXMudW5kb1N0YWNrPVtdLHRoaXMudW5kb0luZGV4PTAsdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLmRpc2FibGVCcm93c2VyVW5kbygpfSxiLnByb3RvdHlwZS5lbmFibGVUeXBpbmc9ZnVuY3Rpb24oKXt0aGlzLnR5cGluZ1RpbWVyPW51bGwsdGhpcy4kZWxlbWVudC5vbigia2V5ZG93biBjdXQiLGEucHJveHkoZnVuY3Rpb24oYil7cmV0dXJuImtleWRvd24iIT09Yi50eXBlfHx0aGlzLnRyaWdnZXJFdmVudCgia2V5ZG93biIsW2Iud2hpY2gsKGIuY3RybEtleXx8Yi5tZXRhS2V5KSYmIWIuYWx0S2V5XSwhMSk/KGNsZWFyVGltZW91dCh0aGlzLnR5cGluZ1RpbWVyKSx0aGlzLmFqYXhTYXZlPSExLHRoaXMub2xkSFRNTD10aGlzLmdldEhUTUwoKSx2b2lkKHRoaXMudHlwaW5nVGltZXI9c2V0VGltZW91dChhLnByb3h5KGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRIVE1MKCk7dGhpcy5pbWV8fGEucmVwbGFjZSgvW1x1MzA0MS1cdTMwOTZdfFtcdTMwQTAtXHUzMEZGXXxbXHU0RTAwLVx1OUZGRl0vZ2ksIiIpPT10aGlzLm9sZEhUTUwucmVwbGFjZSgvW1x1MzA0MS1cdTMwOTZdfFtcdTMwQTAtXHUzMEZGXXxbXHU0RTAwLVx1OUZGRl0vZ2ksIiIpfHwodGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLnN5bmMoKSl9LHRoaXMpLE1hdGgubWF4KHRoaXMub3B0aW9ucy50eXBpbmdUaW1lciwxNTApKSkpOiExfSx0aGlzKSl9LGIucHJvdG90eXBlLnJlbW92ZU1hcmtlcnNCeVJlZ2V4PWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoLzxzcGFuW14+XSo/IGNsYXNzXHMqPVxzKlsiJ10/Zi1tYXJrZXJbIiddP1tePl0rPihbXFNcc11bXlwvXSkqPFwvc3Bhbj4vZ2ksIiIpfSxiLnByb3RvdHlwZS5nZXRJbWFnZUhUTUw9ZnVuY3Rpb24oKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoe3NyYzp0aGlzLiRlbGVtZW50LmZpbmQoImltZyIpLmF0dHIoInNyYyIpLHN0eWxlOnRoaXMuJGVsZW1lbnQuZmluZCgiaW1nIikuYXR0cigic3R5bGUiKSxhbHQ6dGhpcy4kZWxlbWVudC5maW5kKCJpbWciKS5hdHRyKCJhbHQiKSx3aWR0aDp0aGlzLiRlbGVtZW50LmZpbmQoImltZyIpLmF0dHIoIndpZHRoIiksbGluazp0aGlzLiRlbGVtZW50LmZpbmQoImEiKS5hdHRyKCJocmVmIiksbGlua190aXRsZTp0aGlzLiRlbGVtZW50LmZpbmQoImEiKS5hdHRyKCJ0aXRsZSIpLGxpbmtfdGFyZ2V0OnRoaXMuJGVsZW1lbnQuZmluZCgiYSIpLmF0dHIoInRhcmdldCIpfSl9LGIucHJvdG90eXBlLmdldExpbmtIVE1MPWZ1bmN0aW9uKCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHtib2R5OnRoaXMuJGVsZW1lbnQuaHRtbCgpLGhyZWY6dGhpcy4kZWxlbWVudC5hdHRyKCJocmVmIiksdGl0bGU6dGhpcy4kZWxlbWVudC5hdHRyKCJ0aXRsZSIpLHBvcG91dDp0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJwb3BvdXQiKSxub2ZvbGxvdzoibm9mb2xsb3ciPT10aGlzLiRlbGVtZW50LmF0dHIoInJlZiIpLGJsYW5rOiJfYmxhbmsiPT10aGlzLiRlbGVtZW50LmF0dHIoInRhcmdldCIpLGxlZnQ6dGhpcy4kZWxlbWVudC5wYXJlbnRzKCIubmF2YmFyLWxlZnQiKS5sZW5ndGg+MCwiY2xhc3MiOnRoaXMuJGVsZW1lbnQuYXR0cigiY2xhc3MiKS5yZXBsYWNlKC9mcm9hbGEtZWxlbWVudC8sIiIpLnJlcGxhY2UoL25vdC1tc2llLywiIikucmVwbGFjZSgvICsoPz0gKS9nLCIiKS5zcGxpdCgiICIpLnNvcnQoKS5qb2luKCIgIil9KX0sYi5wcm90b3R5cGUuYWRkRnJUYWc9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LmZpbmQoInAsIGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYsIHByZSwgYmxvY2txdW90ZSwgdGFibGUsIHVsLCBvbCwgaW1nIikuYWRkQ2xhc3MoImZyLXRhZyIpfSxiLnByb3RvdHlwZS5nZXRIVE1MPWZ1bmN0aW9uKGIsYyl7aWYodm9pZCAwPT09YyYmKGM9ITEpLHZvaWQgMD09PWImJihiPSExKSx0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCJmLXBsYWNlaG9sZGVyIikpcmV0dXJuIiI7aWYodGhpcy5pc0hUTUwpcmV0dXJuIHRoaXMuJGh0bWxfYXJlYS52YWwoKTtpZih0aGlzLmlzSW1hZ2UpcmV0dXJuIHRoaXMuZ2V0SW1hZ2VIVE1MKCk7aWYodGhpcy5pc0xpbmspcmV0dXJuIHRoaXMuZ2V0TGlua0hUTUwoKTt0aGlzLiRlbGVtZW50LmZpbmQoImEiKS5kYXRhKCJmci1saW5rIiwhMCksYyYmdGhpcy5hZGRGclRhZygpLHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLWVkaXRvciA+IGltZyIpLmVhY2goYS5wcm94eShmdW5jdGlvbihiLGMpe3RoaXMuYWRkSW1hZ2VDbGFzcyhhKGMpLHRoaXMuZ2V0SW1hZ2VDbGFzcyhhKGMpLnBhcmVudCgpLmF0dHIoImNsYXNzIikpKX0sdGhpcykpLHRoaXMuJGVsZW1lbnQuZmluZCgicHJlIikuZWFjaChhLnByb3h5KGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YShjKSxlPWQuaHRtbCgpLGY9ZS5yZXBsYWNlKC9cJm5ic3A7L2dpLCIgIik7ZSE9ZiYmKHRoaXMuc2F2ZVNlbGVjdGlvbkJ5TWFya2VycygpLGQuaHRtbChmKSx0aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSl9LHRoaXMpKTt2YXIgZD10aGlzLiRlbGVtZW50Lmh0bWwoKTtyZXR1cm4gdGhpcy4kZWxlbWVudC5maW5kKCIuZi1pbWctZWRpdG9yID4gaW1nIikucmVtb3ZlQ2xhc3MoImZyLWZpbiBmci1maWwgZnItZmlyIiksdGhpcy4kZWxlbWVudC5maW5kKCJwLCBoMSwgaDIsIGgzLCBoNCwgaDUsIGg2LCBwcmUsIGJsb2NrcXVvdGUsIHRhYmxlLCB1bCwgb2wsIGltZyIpLnJlbW92ZUNsYXNzKCJmci10YWciKSxkPXRoaXMuc3luY0NsZWFuSFRNTChkLGIpLGQ9ZC5yZXBsYWNlKC88YVtePl0qPz48XC9hPi9nLCIiKSxifHwoZD10aGlzLnJlbW92ZU1hcmtlcnNCeVJlZ2V4KGQpKSxkPWQucmVwbGFjZSgvPHNwYW5bXj5dKj8gY2xhc3Nccyo9XHMqWyInXT9mLWltZy1oYW5kbGVbXj5dKz48XC9zcGFuPi9naSwiIiksZD1kLnJlcGxhY2UoL14oW1xTXHNdKik8c3BhbltePl0qPyBjbGFzc1xzKj1ccypbIiddP2YtaW1nLWVkaXRvcltePl0rPihbXFNcc10qKTxcL3NwYW4+KFtcU1xzXSopJC9naSwiJDEkMiQzIiksZD1kLnJlcGxhY2UoL14oW1xTXHNdKik8c3BhbltePl0qPyBjbGFzc1xzKj1ccypbIiddP2YtaW1nLXdyYXBbXj5dKz4oW1xTXHNdKik8XC9zcGFuPihbXFNcc10qKSQvZ2ksIiQxJDIkMyIpLGQ9ZC5yZXBsYWNlKC9cJmFtcDsvZ2ksIiYiKSx0aGlzLm9wdGlvbnMuc2ltcGxlQW1wZXJzYW5kJiYoZD1kLnJlcGxhY2UoL1wmYW1wOy9naSwiJiIpKSxkPWQucmVwbGFjZSgvIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiL2dpLCIiKSx0aGlzLm9wdGlvbnMuYmVhdXRpZnlDb2RlJiYoZD1kLnJlcGxhY2UoL1xuL2dpLCIiKSksZD1kLnJlcGxhY2UoL1x1MjAwQi9naSwiIil9LGIucHJvdG90eXBlLmdldFRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWxlbWVudC50ZXh0KCl9LGIucHJvdG90eXBlLmluaXRBamF4U2F2ZXI9ZnVuY3Rpb24oKXt0aGlzLmFqYXhIVE1MPXRoaXMuZ2V0SFRNTCgpLHRoaXMuYWpheFNhdmU9ITAsdGhpcy5hamF4SW50ZXJ2YWw9c2V0SW50ZXJ2YWwoYS5wcm94eShmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0SFRNTCgpO3RoaXMuYWpheEhUTUwhPWEmJnRoaXMuYWpheFNhdmUmJih0aGlzLm9wdGlvbnMuYXV0b3NhdmUmJnRoaXMuc2F2ZSgpLHRoaXMuYWpheEhUTUw9YSksdGhpcy5hamF4U2F2ZT0hMH0sdGhpcyksTWF0aC5tYXgodGhpcy5vcHRpb25zLmF1dG9zYXZlSW50ZXJ2YWwsMTAwKSl9LGIucHJvdG90eXBlLmRpc2FibGVCcm93c2VyVW5kbz1mdW5jdGlvbigpe2EoImJvZHkiKS5rZXlkb3duKGZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2gsYz0oYS5jdHJsS2V5fHxhLm1ldGFLZXkpJiYhYS5hbHRLZXk7aWYoIXRoaXMuaXNIVE1MJiZjKXtpZig3NT09YilyZXR1cm4gYS5wcmV2ZW50RGVmYXVsdCgpLCExO2lmKDkwPT1iJiZhLnNoaWZ0S2V5KXJldHVybiBhLnByZXZlbnREZWZhdWx0KCksITE7aWYoOTA9PWIpcmV0dXJuIGEucHJldmVudERlZmF1bHQoKSwhMX19KX0sYi5wcm90b3R5cGUuc2F2ZVVuZG9TdGVwPWZ1bmN0aW9uKCl7Zm9yKDt0aGlzLnVuZG9TdGFjay5sZW5ndGg+dGhpcy51bmRvSW5kZXg7KXRoaXMudW5kb1N0YWNrLnBvcCgpO3ZhciBhPXRoaXMuZ2V0SFRNTCghMCk7cmV0dXJuIHRoaXMudW5kb1N0YWNrW3RoaXMudW5kb0luZGV4LTFdJiZ0aGlzLnJlbW92ZU1hcmtlcnNCeVJlZ2V4KHRoaXMudW5kb1N0YWNrW3RoaXMudW5kb0luZGV4LTFdKT09YT8hMToodGhpcy5zZWxlY3Rpb25JbkVkaXRvcigpJiZ0aGlzLiRlbGVtZW50LmlzKCI6Zm9jdXMiKSYmdGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy51bmRvU3RhY2sucHVzaCh0aGlzLmdldEhUTUwoITApKSx0aGlzLnVuZG9JbmRleCsrLHRoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKSYmdGhpcy4kZWxlbWVudC5pcygiOmZvY3VzIikmJnRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycyghMSksdGhpcy5yZWZyZXNoVW5kbygpLHZvaWQgdGhpcy5yZWZyZXNoUmVkbygpKX0sYi5wcm90b3R5cGUuc2hvcnRjdXRFbmFibGVkPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9wdGlvbnMuc2hvcnRjdXRzQXZhaWxhYmxlLmluZGV4T2YoYSk+PTB9LGIucHJvdG90eXBlLnNob3J0Y3V0c19tYXA9ezcwOiJzaG93Iiw2NjoiYm9sZCIsNzM6Iml0YWxpYyIsODU6InVuZGVybGluZSIsNzU6ImNyZWF0ZUxpbmsiLDgwOiJpbnNlcnRJbWFnZSIsNjU6InNlbGVjdEFsbCIsMjIxOiJpbmRlbnQiLDIxOToib3V0ZGVudCIsNzI6Imh0bWwiLDQ4OiJmb3JtYXRCbG9jayBuIiw0OToiZm9ybWF0QmxvY2sgaDEiLDUwOiJmb3JtYXRCbG9jayBoMiIsNTE6ImZvcm1hdEJsb2NrIGgzIiw1MjoiZm9ybWF0QmxvY2sgaDQiLDUzOiJmb3JtYXRCbG9jayBoNSIsNTQ6ImZvcm1hdEJsb2NrIGg2IiwyMjI6ImZvcm1hdEJsb2NrIGJsb2NrcXVvdGUiLDIyMDoiZm9ybWF0QmxvY2sgcHJlIiw4Mzoic3RyaWtlVGhyb3VnaCJ9LGIucHJvdG90eXBlLmluaXRTaG9ydGN1dHM9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuc2hvcnRjdXRzJiZ0aGlzLiRlbGVtZW50Lm9uKCJrZXlkb3duIixhLnByb3h5KGZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2gsYz0oYS5jdHJsS2V5fHxhLm1ldGFLZXkpJiYhYS5hbHRLZXk7aWYoIXRoaXMuaXNIVE1MJiZjKXtpZih0aGlzLnNob3J0Y3V0c19tYXBbYl0mJnRoaXMuc2hvcnRjdXRFbmFibGVkKHRoaXMuc2hvcnRjdXRzX21hcFtiXSkpcmV0dXJuIHRoaXMuZXhlY0RlZmF1bHRTaG9ydGN1dC5hcHBseSh0aGlzLHRoaXMuc2hvcnRjdXRzX21hcFtiXS5zcGxpdCgiICIpKTtpZig5MD09YiYmYS5zaGlmdEtleSlyZXR1cm4gYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5yZWRvKCksITE7aWYoOTA9PWIpcmV0dXJuIGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpLHRoaXMudW5kbygpLCExfX0sdGhpcykpfSxiLnByb3RvdHlwZS5pbml0VGFicz1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQub24oImtleWRvd24iLGEucHJveHkoZnVuY3Rpb24oYSl7dmFyIGI9YS53aGljaDtpZig5IT1ifHxhLnNoaWZ0S2V5KTk9PWImJmEuc2hpZnRLZXkmJih0aGlzLnJhaXNlRXZlbnQoInNoaWZ0K3RhYiIpP3RoaXMub3B0aW9ucy50YWJTcGFjZXM/YS5wcmV2ZW50RGVmYXVsdCgpOnRoaXMuYmx1cigpOmEucHJldmVudERlZmF1bHQoKSk7ZWxzZSBpZih0aGlzLnJhaXNlRXZlbnQoInRhYiIpKWlmKHRoaXMub3B0aW9ucy50YWJTcGFjZXMpe2EucHJldmVudERlZmF1bHQoKTt2YXIgYz0iJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IixkPXRoaXMuZ2V0U2VsZWN0aW9uRWxlbWVudHMoKVswXTsiUFJFIj09PWQudGFnTmFtZSYmKGM9IiAgICAiKSx0aGlzLmluc2VydEhUTUwoYywhMSl9ZWxzZSB0aGlzLmJsdXIoKTtlbHNlIGEucHJldmVudERlZmF1bHQoKX0sdGhpcykpfSxiLnByb3RvdHlwZS50ZXh0RW1wdHk9ZnVuY3Rpb24oYil7dmFyIGM9YShiKS50ZXh0KCkucmVwbGFjZSgvKFxyXG58XG58XHJ8XHQpL2dtLCIiKTtyZXR1cm4oIiI9PT1jfHxiPT09dGhpcy4kZWxlbWVudC5nZXQoMCkpJiYwPT09YShiKS5maW5kKCJiciIpLmxlbmd0aH0sYi5wcm90b3R5cGUuaW5FZGl0b3I9ZnVuY3Rpb24oYSl7Zm9yKDthJiYiQk9EWSIhPT1hLnRhZ05hbWU7KXtpZihhPT09dGhpcy4kZWxlbWVudC5nZXQoMCkpcmV0dXJuITA7YT1hLnBhcmVudE5vZGV9cmV0dXJuITF9LGIucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKGMpe2lmKHZvaWQgMD09PWMmJihjPSEwKSwiIiE9PXRoaXMudGV4dCgpJiYhdGhpcy4kZWxlbWVudC5pcygiOmZvY3VzIikpcmV0dXJuIHZvaWQodGhpcy5icm93c2VyLm1zaWV8fHRoaXMuJGVsZW1lbnQuZm9jdXMoKSk7aWYoIXRoaXMuaXNIVE1MKXshY3x8dGhpcy5wYXN0aW5nfHx0aGlzLmJyb3dzZXIubXNpZXx8dGhpcy4kZWxlbWVudC5mb2N1cygpLHRoaXMucGFzdGluZyYmIXRoaXMuJGVsZW1lbnQuaXMoIjpmb2N1cyIpJiZ0aGlzLiRlbGVtZW50LmZvY3VzKCk7dmFyIGQ9dGhpcy5nZXRSYW5nZSgpO2lmKCIiPT09dGhpcy50ZXh0KCkmJmQmJigwPT09ZC5zdGFydE9mZnNldHx8ZC5zdGFydENvbnRhaW5lcj09PXRoaXMuJGVsZW1lbnQuZ2V0KDApfHwhdGhpcy5pbkVkaXRvcihkLnN0YXJ0Q29udGFpbmVyKSkpe3ZhciBlLGYsZz10aGlzLmdldFNlbGVjdGlvbkVsZW1lbnRzKCk7aWYoYS5tZXJnZShbIklNRyIsIkJSIl0sYS5FZGl0YWJsZS5WQUxJRF9OT0RFUykuaW5kZXhPZih0aGlzLmdldFNlbGVjdGlvbkVsZW1lbnQoKS50YWdOYW1lKTwwKXJldHVybiExO2lmKGcubGVuZ3RoPj0xJiZnWzBdIT09dGhpcy4kZWxlbWVudC5nZXQoMCkpZm9yKGU9MDtlPGcubGVuZ3RoO2UrKylpZihmPWdbZV0sIXRoaXMudGV4dEVtcHR5KGYpfHx0aGlzLmJyb3dzZXIubXNpZSlyZXR1cm4gdm9pZCB0aGlzLnNldFNlbGVjdGlvbihmKTtpZihkLnN0YXJ0Q29udGFpbmVyPT09dGhpcy4kZWxlbWVudC5nZXQoMCkmJmQuc3RhcnRPZmZzZXQ+MCYmIXRoaXMub3B0aW9ucy5wYXJhZ3JhcGh5KXJldHVybiB2b2lkIHRoaXMuc2V0U2VsZWN0aW9uKHRoaXMuJGVsZW1lbnQuZ2V0KDApLGQuc3RhcnRPZmZzZXQpO2ZvcihnPXRoaXMuJGVsZW1lbnQuZmluZChiLlZBTElEX05PREVTLmpvaW4oIiwiKSksZT0wO2U8Zy5sZW5ndGg7ZSsrKWlmKGY9Z1tlXSwhdGhpcy50ZXh0RW1wdHkoZikmJjA9PT1hKGYpLmZpbmQoYS5FZGl0YWJsZS5WQUxJRF9OT0RFUy5qb2luKCIsIikpLmxlbmd0aClyZXR1cm4gdm9pZCB0aGlzLnNldFNlbGVjdGlvbihmKTt0aGlzLnNldFNlbGVjdGlvbih0aGlzLiRlbGVtZW50LmdldCgwKSl9fX0sYi5wcm90b3R5cGUuaW5zZXJ0SFRNTD1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPSEwKSwhdGhpcy5pc0hUTUwmJmImJnRoaXMuZm9jdXMoKTt2YXIgYyxkO2lmKHRoaXMubm9fdmVyaWZ5PSEwLHdpbmRvdy5nZXRTZWxlY3Rpb24pe2lmKGM9d2luZG93LmdldFNlbGVjdGlvbigpLGMuZ2V0UmFuZ2VBdCYmYy5yYW5nZUNvdW50KXtkPWMuZ2V0UmFuZ2VBdCgwKSxkLmRlbGV0ZUNvbnRlbnRzKCk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZS5pbm5lckhUTUw9YTtmb3IodmFyIGYsZyxoPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtmPWUuZmlyc3RDaGlsZDspZz1oLmFwcGVuZENoaWxkKGYpO2QuaW5zZXJ0Tm9kZShoKSxnJiYoZD1kLmNsb25lUmFuZ2UoKSxkLmNvbGxhcHNlKCExKSxjLnJlbW92ZUFsbFJhbmdlcygpLGMuYWRkUmFuZ2UoZCkpfX1lbHNlIGlmKChjPWRvY3VtZW50LnNlbGVjdGlvbikmJiJDb250cm9sIiE9Yy50eXBlKXt2YXIgaT1jLmNyZWF0ZVJhbmdlKCk7aS5jb2xsYXBzZSghMCksYy5jcmVhdGVSYW5nZSgpLnBhc3RlSFRNTChhKSxzZWxlY3RQYXN0ZWRDb250ZW50JiYoZD1jLmNyZWF0ZVJhbmdlKCksZC5zZXRFbmRQb2ludCgiU3RhcnRUb1N0YXJ0IixpKSxkLnNlbGVjdCgpKQp9dGhpcy5ub192ZXJpZnk9ITF9LGIucHJvdG90eXBlLmV4ZWNEZWZhdWx0U2hvcnRjdXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pc0VuYWJsZWQoYSk/KHRoaXMuZXhlYyhhLGIpLCExKTohMH0sYi5wcm90b3R5cGUuaW5pdEVkaXRvcj1mdW5jdGlvbigpe3ZhciBjPSJmcm9hbGEtZWRpdG9yIjt0aGlzLmlzVG91Y2goKSYmKGMrPSIgdG91Y2giKSx0aGlzLmJyb3dzZXIubXNpZSYmYi5nZXRJRXZlcnNpb24oKTw5JiYoYys9IiBpZTgiKSx0aGlzLiRlZGl0b3I9YSgnPGRpdiBjbGFzcz0iJytjKyciIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+JyksYSgiYm9keSIpLmFwcGVuZCh0aGlzLiRlZGl0b3IpLHRoaXMub3B0aW9ucy5pbmxpbmVNb2RlP3RoaXMuaW5pdElubGluZUVkaXRvcigpOnRoaXMuaW5pdEJhc2ljRWRpdG9yKCl9LGIucHJvdG90eXBlLnRvb2xiYXJUb3A9ZnVuY3Rpb24oKXthKHdpbmRvdykub24oInNjcm9sbCByZXNpemUiLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMudG9vbGJhckZpeGVkfHx0aGlzLm9wdGlvbnMuaW5saW5lTW9kZXx8KGEod2luZG93KS5zY3JvbGxUb3AoKT50aGlzLiRib3gub2Zmc2V0KCkudG9wJiZhKHdpbmRvdykuc2Nyb2xsVG9wKCk8dGhpcy4kYm94Lm9mZnNldCgpLnRvcCt0aGlzLiRib3guaGVpZ2h0KCk/KHRoaXMuJGVkaXRvci5hZGRDbGFzcygiZi1zY3JvbGwiKSx0aGlzLiRib3guY3NzKCJwYWRkaW5nLXRvcCIsdGhpcy4kZWRpdG9yLmhlaWdodCgpKSx0aGlzLiRlZGl0b3IuY3NzKCJ0b3AiLGEod2luZG93KS5zY3JvbGxUb3AoKS10aGlzLiRib3gub2Zmc2V0KCkudG9wKSk6YSh3aW5kb3cpLnNjcm9sbFRvcCgpPHRoaXMuJGJveC5vZmZzZXQoKS50b3AmJih0aGlzLiRlZGl0b3IucmVtb3ZlQ2xhc3MoImYtc2Nyb2xsIiksdGhpcy4kYm94LmNzcygicGFkZGluZy10b3AiLCIiKSx0aGlzLiRlZGl0b3IuY3NzKCJ0b3AiLCIiKSkpfSx0aGlzKSl9LGIucHJvdG90eXBlLmluaXRCYXNpY0VkaXRvcj1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoImYtYmFzaWMiKSx0aGlzLiRwb3B1cF9lZGl0b3I9dGhpcy4kZWRpdG9yLmNsb25lKCksdGhpcy4kcG9wdXBfZWRpdG9yLmFwcGVuZFRvKGEoImJvZHkiKSkuYWRkQ2xhc3MoImYtaW5saW5lIiksdGhpcy4kZWRpdG9yLmFkZENsYXNzKCJmLWJhc2ljIikuc2hvdygpLHRoaXMuJGVkaXRvci5pbnNlcnRCZWZvcmUodGhpcy4kZWxlbWVudCksdGhpcy50b29sYmFyVG9wKCl9LGIucHJvdG90eXBlLmluaXRJbmxpbmVFZGl0b3I9ZnVuY3Rpb24oKXt0aGlzLiRlZGl0b3IuYWRkQ2xhc3MoImYtaW5saW5lIiksdGhpcy4kcG9wdXBfZWRpdG9yPXRoaXMuJGVkaXRvcn0sYi5wcm90b3R5cGUuaW5pdERyYWc9ZnVuY3Rpb24oKXt0aGlzLmRyYWdfc3VwcG9ydD17ZmlsZXJlYWRlcjoidW5kZWZpbmVkIiE9dHlwZW9mIEZpbGVSZWFkZXIsZm9ybWRhdGE6ISF3aW5kb3cuRm9ybURhdGEscHJvZ3Jlc3M6InVwbG9hZCJpbiBuZXcgWE1MSHR0cFJlcXVlc3R9fSxiLnByb3RvdHlwZS5pbml0T3B0aW9ucz1mdW5jdGlvbigpe3RoaXMuc2V0RGltZW5zaW9ucygpLHRoaXMuc2V0U3BlbGxjaGVjaygpLHRoaXMuc2V0SW1hZ2VVcGxvYWRVUkwoKSx0aGlzLnNldEJ1dHRvbnMoKSx0aGlzLnNldERpcmVjdGlvbigpLHRoaXMuc2V0VGV4dE5lYXJJbWFnZSgpLHRoaXMuc2V0WkluZGV4KCksdGhpcy5zZXRUaGVtZSgpLHRoaXMub3B0aW9ucy5lZGl0SW5Qb3B1cCYmdGhpcy5idWlsZEVkaXRQb3B1cCgpfSxiLnByb3RvdHlwZS5pc1RvdWNoPWZ1bmN0aW9uKCl7cmV0dXJuIFdZU0lXWUdNb2Rlcm5penIudG91Y2gmJnZvaWQgMCE9PXdpbmRvdy5Ub3VjaH0sYi5wcm90b3R5cGUuaW5pdEVkaXRvclNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQub24oImtleXVwIixhLnByb3h5KGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRyaWdnZXJFdmVudCgia2V5dXAiLFthXSwhMSl9LHRoaXMpKSx0aGlzLiRlbGVtZW50Lm9uKCJmb2N1cyIsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuYmx1cnJlZCYmKHRoaXMuYmx1cnJlZD0hMSx0aGlzLnBhc3Rpbmd8fCIiIT09dGhpcy50ZXh0KCl8fHRoaXMuZm9jdXMoITEpLHRoaXMudHJpZ2dlckV2ZW50KCJmb2N1cyIsW10sITEpKX0sdGhpcykpLHRoaXMuJGVsZW1lbnQub24oIm1vdXNlZG93biB0b3VjaHN0YXJ0IixhLnByb3h5KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMTp2b2lkKHRoaXMuaXNSZXNpemluZygpfHwodGhpcy5jbG9zZUltYWdlTW9kZSgpLHRoaXMuaGlkZSgpKSl9LHRoaXMpKSx0aGlzLm9wdGlvbnMuZGlzYWJsZVJpZ2h0Q2xpY2smJnRoaXMuJGVsZW1lbnQuY29udGV4dG1lbnUoYS5wcm94eShmdW5jdGlvbihhKXtyZXR1cm4gYS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMub3B0aW9ucy5pbmxpbmVNb2RlJiZ0aGlzLiRlbGVtZW50LmZvY3VzKCksITF9LHRoaXMpKSx0aGlzLiRlbGVtZW50Lm9uKCJtb3VzZXVwIHRvdWNoZW5kIixhLnByb3h5KGZ1bmN0aW9uKGIpe2lmKHRoaXMuaXNEaXNhYmxlZClyZXR1cm4hMTtpZighdGhpcy5pc1Jlc2l6aW5nKCkpe3ZhciBjPXRoaXMudGV4dCgpO2Iuc3RvcFByb3BhZ2F0aW9uKCksISgiIiE9PWN8fHRoaXMub3B0aW9ucy5hbHdheXNWaXNpYmxlfHx0aGlzLm9wdGlvbnMuZWRpdEluUG9wdXB8fCgzPT1iLndoaWNofHwyPT1iLmJ1dHRvbikmJnRoaXMub3B0aW9ucy5pbmxpbmVNb2RlJiYhdGhpcy5pc0ltYWdlJiZ0aGlzLm9wdGlvbnMuZGlzYWJsZVJpZ2h0Q2xpY2spfHx0aGlzLmxpbmt8fHRoaXMuaW1hZ2VNb2RlP3RoaXMub3B0aW9ucy5pbmxpbmVNb2RlfHx0aGlzLnJlZnJlc2hCdXR0b25zKCk6c2V0VGltZW91dChhLnByb3h5KGZ1bmN0aW9uKCl7Yz10aGlzLnRleHQoKSwhKCIiIT09Y3x8dGhpcy5vcHRpb25zLmFsd2F5c1Zpc2libGV8fHRoaXMub3B0aW9ucy5lZGl0SW5Qb3B1cHx8KDM9PWIud2hpY2h8fDI9PWIuYnV0dG9uKSYmdGhpcy5vcHRpb25zLmlubGluZU1vZGUmJiF0aGlzLmlzSW1hZ2UmJnRoaXMub3B0aW9ucy5kaXNhYmxlUmlnaHRDbGljayl8fHRoaXMubGlua3x8dGhpcy5pbWFnZU1vZGV8fCh0aGlzLnNob3coYiksdGhpcy5vcHRpb25zLmVkaXRJblBvcHVwJiZ0aGlzLnNob3dFZGl0UG9wdXAoKSl9LHRoaXMpLDIwKSx0aGlzLmltYWdlTW9kZT0hMX19LHRoaXMpKSx0aGlzLiRlZGl0b3Iub24oIm1vdXNldXAiLGEucHJveHkoZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMTp2b2lkKHRoaXMuaXNSZXNpemluZygpfHwoYS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLm9wdGlvbnMuaW5saW5lTW9kZT09PSExJiZ0aGlzLmhpZGUoKSkpfSx0aGlzKSksdGhpcy4kZWRpdG9yLm9uKCJtb3VzZWRvd24iLCIuZnItZHJvcGRvd24tbWVudSIsYS5wcm94eShmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pc0Rpc2FibGVkPyExOihhLnN0b3BQcm9wYWdhdGlvbigpLHZvaWQodGhpcy5ub0hpZGU9ITApKX0sdGhpcykpLHRoaXMuJHBvcHVwX2VkaXRvci5vbigibW91c2Vkb3duIiwiLmZyLWRyb3Bkb3duLW1lbnUiLGEucHJveHkoZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMTooYS5zdG9wUHJvcGFnYXRpb24oKSx2b2lkKHRoaXMubm9IaWRlPSEwKSl9LHRoaXMpKSx0aGlzLiRwb3B1cF9lZGl0b3Iub24oIm1vdXNldXAiLGEucHJveHkoZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMTp2b2lkKHRoaXMuaXNSZXNpemluZygpfHxhLnN0b3BQcm9wYWdhdGlvbigpKX0sdGhpcykpLHRoaXMuJGVkaXRfcG9wdXBfd3JhcHBlciYmdGhpcy4kZWRpdF9wb3B1cF93cmFwcGVyLm9uKCJtb3VzZXVwIixhLnByb3h5KGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzRGlzYWJsZWQ/ITE6dm9pZCh0aGlzLmlzUmVzaXppbmcoKXx8YS5zdG9wUHJvcGFnYXRpb24oKSl9LHRoaXMpKSx0aGlzLnNldERvY3VtZW50U2VsZWN0aW9uQ2hhbmdlRXZlbnQoKSx0aGlzLnNldFdpbmRvd01vdXNlVXBFdmVudCgpLHRoaXMuc2V0V2luZG93S2V5RG93bkV2ZW50KCksdGhpcy5zZXRXaW5kb3dLZXlVcEV2ZW50KCksdGhpcy5zZXRXaW5kb3dPcmllbnRhdGlvbkNoYW5nZUV2ZW50KCksdGhpcy5zZXRXaW5kb3dIaWRlRXZlbnQoKSx0aGlzLnNldFdpbmRvd0JsdXJFdmVudCgpLHRoaXMub3B0aW9ucy50cmFja1Njcm9sbCYmdGhpcy5zZXRXaW5kb3dTY3JvbGxFdmVudCgpfSxiLnByb3RvdHlwZS5ibHVyPWZ1bmN0aW9uKGIpe3RoaXMuYmx1cnJlZHx8dGhpcy5wYXN0aW5nfHwodGhpcy5zZWxlY3Rpb25EaXNhYmxlZD0hMCx0aGlzLnRyaWdnZXJFdmVudCgiYmx1ciIsW10pLGImJjA9PT1hKCIqOmZvY3VzIikubGVuZ3RoJiZ0aGlzLmNsZWFyU2VsZWN0aW9uKCksdGhpcy5zZWxlY3Rpb25EaXNhYmxlZD0hMSx0aGlzLmJsdXJyZWQ9ITApfSxiLnByb3RvdHlwZS5zZXRXaW5kb3dCbHVyRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLiR3aW5kb3cub24oImJsdXIuIit0aGlzLl9pZCxhLnByb3h5KGZ1bmN0aW9uKGEsYil7dGhpcy5ibHVyKGIpfSx0aGlzKSl9LGIucHJvdG90eXBlLnNldFdpbmRvd0hpZGVFdmVudD1mdW5jdGlvbigpe3RoaXMuJHdpbmRvdy5vbigiaGlkZS4iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXppbmcoKXx8dGhpcy5oaWRlKCExKX0sdGhpcykpfSxiLnByb3RvdHlwZS5zZXRXaW5kb3dPcmllbnRhdGlvbkNoYW5nZUV2ZW50PWZ1bmN0aW9uKCl7dGhpcy4kd2luZG93Lm9uKCJvcmllbnRhdGlvbmNoYW5nZS4iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmhpZGUoKX0sdGhpcyksMTApfSx0aGlzKSl9LGIucHJvdG90eXBlLnNldERvY3VtZW50U2VsZWN0aW9uQ2hhbmdlRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLiRkb2N1bWVudC5vbigic2VsZWN0aW9uY2hhbmdlLiIrdGhpcy5faWQsYS5wcm94eShmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5pc0Rpc2FibGVkPyExOnZvaWQodGhpcy5pc1Jlc2l6aW5nKCl8fHRoaXMuaXNTY3JvbGxpbmd8fChjbGVhclRpbWVvdXQodGhpcy5zZWxlY3Rpb25DaGFuZ2VkVGltZW91dCksdGhpcy5zZWxlY3Rpb25DaGFuZ2VkVGltZW91dD1zZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuaW5saW5lTW9kZSYmdGhpcy5zZWxlY3Rpb25JbkVkaXRvcigpJiZ0aGlzLmxpbmshPT0hMCYmdGhpcy5pc1RvdWNoKCkpe3ZhciBhPXRoaXMudGV4dCgpOyIiIT09YT8odGhpcy5pUGhvbmUoKXx8dGhpcy5pUG9kKCk/dGhpcy5vcHRpb25zLmFsd2F5c1Zpc2libGV8fHRoaXMuaGlkZSgpOnRoaXMuc2hvdyhudWxsKSxiLnN0b3BQcm9wYWdhdGlvbigpKTp0aGlzLm9wdGlvbnMuYWx3YXlzVmlzaWJsZXx8KHRoaXMuaGlkZSgpLHRoaXMuY2xvc2VJbWFnZU1vZGUoKSx0aGlzLmltYWdlTW9kZT0hMSl9fSx0aGlzKSw3NSkpKX0sdGhpcykpfSxiLnByb3RvdHlwZS5zZXRXaW5kb3dNb3VzZVVwRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLiR3aW5kb3cub24oIm1vdXNldXAuIit0aGlzLl9pZCxhLnByb3h5KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMToodGhpcy5pc1Jlc2l6aW5nKCl8fHRoaXMuaXNTY3JvbGxpbmd8fCh0aGlzLiRidHRuX3dyYXBwZXIuZmluZCgiYnV0dG9uW2RhdGEtY21kXSIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKSx0aGlzLnNlbGVjdGlvbkluRWRpdG9yKCkmJiIiIT09dGhpcy50ZXh0KCkmJiF0aGlzLmlzVG91Y2goKT90aGlzLnNob3cobnVsbCk6dGhpcy4kcG9wdXBfZWRpdG9yLmlzKCI6dmlzaWJsZSIpJiYodGhpcy5oaWRlKCksdGhpcy5jbG9zZUltYWdlTW9kZSgpLHRoaXMuaW1hZ2VNb2RlPSExKSx0aGlzLmJsdXIoITApKSx2b2lkIGEoIltkYXRhLWRvd25dIikucmVtb3ZlQXR0cigiZGF0YS1kb3duIikpfSx0aGlzKSl9LGIucHJvdG90eXBlLnNldFdpbmRvd0tleURvd25FdmVudD1mdW5jdGlvbigpe3RoaXMuJHdpbmRvdy5vbigia2V5ZG93bi4iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oYil7dmFyIGM9Yi53aGljaDtpZih0aGlzLmltYWdlTW9kZSl7aWYoMTM9PWMpcmV0dXJuIHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLWVkaXRvciIpLnBhcmVudHMoIi5mLWltZy13cmFwIikuYmVmb3JlKCI8YnIvPiIpLHRoaXMuc3luYygpLHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLWVkaXRvciBpbWciKS5jbGljaygpLCExO2lmKDQ2PT1jfHw4PT1jKXJldHVybiBiLnN0b3BQcm9wYWdhdGlvbigpLGIucHJldmVudERlZmF1bHQoKSxzZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUltYWdlKHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLWVkaXRvciIpKX0sdGhpcyksMCksITF9ZWxzZSBpZih0aGlzLnNlbGVjdGlvbkluRWRpdG9yKCkpe2lmKHRoaXMuaXNEaXNhYmxlZClyZXR1cm4hMDt2YXIgZD0oYi5jdHJsS2V5fHxiLm1ldGFLZXkpJiYhYi5hbHRLZXk7IWQmJnRoaXMuJHBvcHVwX2VkaXRvci5pcygiOnZpc2libGUiKSYmKDI3PT1jfHx0aGlzLiRidHRuX3dyYXBwZXIuaXMoIjp2aXNpYmxlIikmJnRoaXMub3B0aW9ucy5pbmxpbmVNb2RlKSYmKHRoaXMuaGlkZSgpLHRoaXMuY2xvc2VJbWFnZU1vZGUoKSl9fSx0aGlzKSl9LGIucHJvdG90eXBlLnNldFdpbmRvd0tleVVwRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLiR3aW5kb3cub24oImtleXVwLiIrdGhpcy5faWQsYS5wcm94eShmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRGlzYWJsZWQ/ITE6dm9pZCh0aGlzLnNlbGVjdGlvbkluRWRpdG9yKCkmJiIiIT09dGhpcy50ZXh0KCkmJiF0aGlzLiRwb3B1cF9lZGl0b3IuaXMoIjp2aXNpYmxlIikmJnRoaXMucmVwb3NpdGlvbkVkaXRvcigpKX0sdGhpcykpfSxiLnByb3RvdHlwZS5zZXRXaW5kb3dTY3JvbGxFdmVudD1mdW5jdGlvbigpe3RoaXMuJHdpbmRvdy5vbigic2Nyb2xsLiIrdGhpcy5faWQsYS5wcm94eShmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRGlzYWJsZWQ/ITE6KGNsZWFyVGltZW91dCh0aGlzLnNjcm9sbFRpbWVyKSx0aGlzLmlzU2Nyb2xsaW5nPSEwLHZvaWQodGhpcy5zY3JvbGxUaW1lcj1zZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmlzU2Nyb2xsaW5nPSExfSx0aGlzKSwyNTAwKSkpfSx0aGlzKSl9LGIucHJvdG90eXBlLnNldFRleHROZWFySW1hZ2U9ZnVuY3Rpb24oYSl7dm9pZCAwIT09YSYmKHRoaXMub3B0aW9ucy50ZXh0TmVhckltYWdlPWEpLHRoaXMub3B0aW9ucy50ZXh0TmVhckltYWdlPT09ITA/dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiZi10bmkiKTp0aGlzLiRlbGVtZW50LmFkZENsYXNzKCJmLXRuaSIpfSxiLnByb3RvdHlwZS5zZXRQbGFjZWhvbGRlcj1mdW5jdGlvbihhKXthJiYodGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyPWEpLHRoaXMuJHRleHRhcmVhJiZ0aGlzLiR0ZXh0YXJlYS5hdHRyKCJwbGFjZWhvbGRlciIsdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyKSx0aGlzLiRlbGVtZW50LmF0dHIoImRhdGEtcGxhY2Vob2xkZXIiLHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcil9LGIucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50LnRleHQoKS5yZXBsYWNlKC8oXHJcbnxcbnxccnxcdHxcdTAwMjApL2dtLCIiKTtyZXR1cm4iIj09PWEmJjA9PT10aGlzLiRlbGVtZW50LmZpbmQoImltZywgdGFibGUsIGlmcmFtZSwgaW5wdXQiKS5sZW5ndGgmJjA9PT10aGlzLiRlbGVtZW50LmZpbmQoInAgPiBiciwgZGl2ID4gYnIiKS5sZW5ndGgmJjA9PT10aGlzLiRlbGVtZW50LmZpbmQoImxpLCBoMSwgaDIsIGgzLCBoNCwgaDUsIGg2LCBibG9ja3F1b3RlLCBwcmUiKS5sZW5ndGh9LGIucHJvdG90eXBlLmNoZWNrUGxhY2Vob2xkZXI9ZnVuY3Rpb24oKXtpZih0aGlzLmlzRGlzYWJsZWQpcmV0dXJuITE7aWYodGhpcy5wYXN0aW5nKXJldHVybiExO2lmKHRoaXMuYnJvd3Nlci5tc2llfHx0aGlzLiRlbGVtZW50LmZpbmQoYS5FZGl0YWJsZS5WQUxJRF9OT0RFUy5qb2luKCI6ZW1wdHksICIpKS5yZW1vdmUoKSwhdGhpcy5pc0hUTUwpaWYodGhpcy5pc0VtcHR5KCkmJiF0aGlzLmZha2VFbXB0eSgpKXt2YXIgYyxkPXRoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKXx8dGhpcy4kZWxlbWVudC5pcygiOmZvY3VzIik7dGhpcy5vcHRpb25zLnBhcmFncmFwaHk/KGM9YSgiPHA+PGJyLz48L3A+IiksdGhpcy4kZWxlbWVudC5odG1sKGMpLGQmJnRoaXMuc2V0U2VsZWN0aW9uKGMuZ2V0KDApKSx0aGlzLiRlbGVtZW50LmFkZENsYXNzKCJmLXBsYWNlaG9sZGVyIikpOigwPT09dGhpcy4kZWxlbWVudC5maW5kKCJiciIpLmxlbmd0aCYmdGhpcy4kZWxlbWVudC5hcHBlbmQoIjxici8+IiksdGhpcy4kZWxlbWVudC5hZGRDbGFzcygiZi1wbGFjZWhvbGRlciIpKX1lbHNlIXRoaXMuJGVsZW1lbnQuZmluZCgicCIpLmxlbmd0aCYmdGhpcy5vcHRpb25zLnBhcmFncmFwaHk/KHRoaXMud3JhcFRleHQoITApLHRoaXMuJGVsZW1lbnQuZmluZCgicCIpLmxlbmd0aCYmIiI9PT10aGlzLnRleHQoKT90aGlzLnNldFNlbGVjdGlvbih0aGlzLiRlbGVtZW50LmZpbmQoInAiKVswXSx0aGlzLiRlbGVtZW50LmZpbmQoInAiKS50ZXh0KCkubGVuZ3RoLG51bGwsdGhpcy4kZWxlbWVudC5maW5kKCJwIikudGV4dCgpLmxlbmd0aCk6dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiZi1wbGFjZWhvbGRlciIpKTp0aGlzLmZha2VFbXB0eSgpPT09ITF8fHRoaXMuJGVsZW1lbnQuZmluZChiLlZBTElEX05PREVTLmpvaW4oIiwiKSkubGVuZ3RoPjE/dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiZi1wbGFjZWhvbGRlciIpOnRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoImYtcGxhY2Vob2xkZXIiKTtyZXR1cm4hMH0sYi5wcm90b3R5cGUuZmFrZUVtcHR5PWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPXRoaXMuJGVsZW1lbnQpO3ZhciBiPWEudGV4dCgpLnJlcGxhY2UoLyhcclxufFxufFxyfFx0KS9nbSwiIik7cmV0dXJuIiI9PT1iJiYxPT1hLmZpbmQoInAsIGRpdiIpLmxlbmd0aCYmMT09YS5maW5kKCJwID4gYnIsIGRpdiA+IGJyIikubGVuZ3RoJiYwPT09YS5maW5kKCJpbWcsIHRhYmxlLCBpZnJhbWUsIGlucHV0IikubGVuZ3RofSxiLnByb3RvdHlwZS5zZXRQbGFjZWhvbGRlckV2ZW50cz1mdW5jdGlvbigpe3RoaXMuYnJvd3Nlci5tc2llJiZiLmdldElFdmVyc2lvbigpPDl8fCh0aGlzLiRlbGVtZW50Lm9uKCJmb2N1cyIsYS5wcm94eShmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRGlzYWJsZWQ/ITE6dm9pZCgiIiE9PXRoaXMuJGVsZW1lbnQudGV4dCgpfHx0aGlzLnBhc3Rpbmd8fHRoaXMuZm9jdXMoITEpKX0sdGhpcykpLHRoaXMuJGVsZW1lbnQub24oImtleXVwIGtleWRvd24gZm9jdXMgcGxhY2Vob2xkZXJDaGVjayIsYS5wcm94eShmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrUGxhY2Vob2xkZXIoKX0sdGhpcykpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcigicGxhY2Vob2xkZXJDaGVjayIpKX0sYi5wcm90b3R5cGUuc2V0RGltZW5zaW9ucz1mdW5jdGlvbihhLGIsYyxkKXthJiYodGhpcy5vcHRpb25zLmhlaWdodD1hKSxiJiYodGhpcy5vcHRpb25zLndpZHRoPWIpLGMmJih0aGlzLm9wdGlvbnMubWluSGVpZ2h0PWMpLGQmJih0aGlzLm9wdGlvbnMubWF4SGVpZ2h0PWQpLCJhdXRvIiE9dGhpcy5vcHRpb25zLmhlaWdodCYmdGhpcy4kZWxlbWVudC5jc3MoImhlaWdodCIsdGhpcy5vcHRpb25zLmhlaWdodCksImF1dG8iIT10aGlzLm9wdGlvbnMubWluSGVpZ2h0JiZ0aGlzLiRlbGVtZW50LmNzcygibWluSGVpZ2h0Iix0aGlzLm9wdGlvbnMubWluSGVpZ2h0KSwiYXV0byIhPXRoaXMub3B0aW9ucy5tYXhIZWlnaHQmJnRoaXMuJGVsZW1lbnQuY3NzKCJtYXhIZWlnaHQiLHRoaXMub3B0aW9ucy5tYXhIZWlnaHQpLCJhdXRvIiE9dGhpcy5vcHRpb25zLndpZHRoJiZ0aGlzLiRib3guY3NzKCJ3aWR0aCIsdGhpcy5vcHRpb25zLndpZHRoKX0sYi5wcm90b3R5cGUuc2V0RGlyZWN0aW9uPWZ1bmN0aW9uKGEpe2EmJih0aGlzLm9wdGlvbnMuZGlyZWN0aW9uPWEpLCJsdHIiIT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uJiYicnRsIiE9dGhpcy5vcHRpb25zLmRpcmVjdGlvbiYmKHRoaXMub3B0aW9ucy5kaXJlY3Rpb249Imx0ciIpLCJydGwiPT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uPyh0aGlzLiRlbGVtZW50LmFkZENsYXNzKCJmLXJ0bCIpLHRoaXMuJGVkaXRvci5hZGRDbGFzcygiZi1ydGwiKSx0aGlzLiRwb3B1cF9lZGl0b3IuYWRkQ2xhc3MoImYtcnRsIiksdGhpcy4kaW1hZ2VfbW9kYWwmJnRoaXMuJGltYWdlX21vZGFsLmFkZENsYXNzKCJmLXJ0bCIpKToodGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiZi1ydGwiKSx0aGlzLiRlZGl0b3IucmVtb3ZlQ2xhc3MoImYtcnRsIiksdGhpcy4kcG9wdXBfZWRpdG9yLnJlbW92ZUNsYXNzKCJmLXJ0bCIpLHRoaXMuJGltYWdlX21vZGFsJiZ0aGlzLiRpbWFnZV9tb2RhbC5yZW1vdmVDbGFzcygiZi1ydGwiKSl9LGIucHJvdG90eXBlLnNldFpJbmRleD1mdW5jdGlvbihhKXthJiYodGhpcy5vcHRpb25zLnpJbmRleD1hKSx0aGlzLiRlZGl0b3IuY3NzKCJ6LWluZGV4Iix0aGlzLm9wdGlvbnMuekluZGV4KSx0aGlzLiRwb3B1cF9lZGl0b3IuY3NzKCJ6LWluZGV4Iix0aGlzLm9wdGlvbnMuekluZGV4KzEpLHRoaXMuJG92ZXJsYXkmJnRoaXMuJG92ZXJsYXkuY3NzKCJ6LWluZGV4Iix0aGlzLm9wdGlvbnMuekluZGV4KzIpLHRoaXMuJGltYWdlX21vZGFsJiZ0aGlzLiRpbWFnZV9tb2RhbC5jc3MoInotaW5kZXgiLHRoaXMub3B0aW9ucy56SW5kZXgrMyl9LGIucHJvdG90eXBlLnNldFRoZW1lPWZ1bmN0aW9uKGEpe2EmJih0aGlzLm9wdGlvbnMudGhlbWU9YSksbnVsbCE9dGhpcy5vcHRpb25zLnRoZW1lJiYodGhpcy4kZWRpdG9yLmFkZENsYXNzKHRoaXMub3B0aW9ucy50aGVtZSsiLXRoZW1lIiksdGhpcy4kcG9wdXBfZWRpdG9yLmFkZENsYXNzKHRoaXMub3B0aW9ucy50aGVtZSsiLXRoZW1lIiksdGhpcy4kYm94JiZ0aGlzLiRib3guYWRkQ2xhc3ModGhpcy5vcHRpb25zLnRoZW1lKyItdGhlbWUiKSx0aGlzLiRpbWFnZV9tb2RhbCYmdGhpcy4kaW1hZ2VfbW9kYWwuYWRkQ2xhc3ModGhpcy5vcHRpb25zLnRoZW1lKyItdGhlbWUiKSl9LGIucHJvdG90eXBlLnNldFNwZWxsY2hlY2s9ZnVuY3Rpb24oYSl7dm9pZCAwIT09YSYmKHRoaXMub3B0aW9ucy5zcGVsbGNoZWNrPWEpLHRoaXMuJGVsZW1lbnQuYXR0cigic3BlbGxjaGVjayIsdGhpcy5vcHRpb25zLnNwZWxsY2hlY2spfSxiLnByb3RvdHlwZS5jdXN0b21pemVUZXh0PWZ1bmN0aW9uKGIpe2lmKGIpe3ZhciBjPXRoaXMuJGVkaXRvci5maW5kKCJbdGl0bGVdIikuYWRkKHRoaXMuJHBvcHVwX2VkaXRvci5maW5kKCJbdGl0bGVdIikpO3RoaXMuJGltYWdlX21vZGFsJiYoYz1jLmFkZCh0aGlzLiRpbWFnZV9tb2RhbC5maW5kKCJbdGl0bGVdIikpKSxjLmVhY2goYS5wcm94eShmdW5jdGlvbihjLGQpe2Zvcih2YXIgZSBpbiBiKWEoZCkuYXR0cigidGl0bGUiKS50b0xvd2VyQ2FzZSgpPT1lLnRvTG93ZXJDYXNlKCkmJmEoZCkuYXR0cigidGl0bGUiLGJbZV0pfSx0aGlzKSksYz10aGlzLiRlZGl0b3IuZmluZCgnW2RhdGEtdGV4dD0idHJ1ZSJdJykuYWRkKHRoaXMuJHBvcHVwX2VkaXRvci5maW5kKCdbZGF0YS10ZXh0PSJ0cnVlIl0nKSksdGhpcy4kaW1hZ2VfbW9kYWwmJihjPWMuYWRkKHRoaXMuJGltYWdlX21vZGFsLmZpbmQoJ1tkYXRhLXRleHQ9InRydWUiXScpKSksYy5lYWNoKGEucHJveHkoZnVuY3Rpb24oYyxkKXtmb3IodmFyIGUgaW4gYilhKGQpLnRleHQoKS50b0xvd2VyQ2FzZSgpPT1lLnRvTG93ZXJDYXNlKCkmJmEoZCkudGV4dChiW2VdKX0sdGhpcykpfX0sYi5wcm90b3R5cGUuc2V0TGFuZ3VhZ2U9ZnVuY3Rpb24oYil7dm9pZCAwIT09YiYmKHRoaXMub3B0aW9ucy5sYW5ndWFnZT1iKSxhLkVkaXRhYmxlLkxBTkdTW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0mJih0aGlzLmN1c3RvbWl6ZVRleHQoYS5FZGl0YWJsZS5MQU5HU1t0aGlzLm9wdGlvbnMubGFuZ3VhZ2VdLnRyYW5zbGF0aW9uKSxhLkVkaXRhYmxlLkxBTkdTW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0uZGlyZWN0aW9uJiZ0aGlzLnNldERpcmVjdGlvbihhLkVkaXRhYmxlLkxBTkdTW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0uZGlyZWN0aW9uKSxhLkVkaXRhYmxlLkxBTkdTW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0udHJhbnNsYXRpb25bdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyXSYmdGhpcy5zZXRQbGFjZWhvbGRlcihhLkVkaXRhYmxlLkxBTkdTW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0udHJhbnNsYXRpb25bdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyXSkpfSxiLnByb3RvdHlwZS5zZXRDdXN0b21UZXh0PWZ1bmN0aW9uKGEpe2EmJih0aGlzLm9wdGlvbnMuY3VzdG9tVGV4dD1hKSx0aGlzLm9wdGlvbnMuY3VzdG9tVGV4dCYmdGhpcy5jdXN0b21pemVUZXh0KHRoaXMub3B0aW9ucy5jdXN0b21UZXh0KX0sYi5wcm90b3R5cGUuZXhlY0hUTUw9ZnVuY3Rpb24oKXt0aGlzLmh0bWwoKX0sYi5wcm90b3R5cGUuaW5pdEhUTUxBcmVhPWZ1bmN0aW9uKCl7dGhpcy4kaHRtbF9hcmVhPWEoJzx0ZXh0YXJlYSB3cmFwPSJoYXJkIj4nKS5rZXlkb3duKGZ1bmN0aW9uKGIpe3ZhciBjPWIua2V5Q29kZXx8Yi53aGljaDtpZig5PT1jKXtiLnByZXZlbnREZWZhdWx0KCk7dmFyIGQ9YSh0aGlzKS5nZXQoMCkuc2VsZWN0aW9uU3RhcnQsZT1hKHRoaXMpLmdldCgwKS5zZWxlY3Rpb25FbmQ7YSh0aGlzKS52YWwoYSh0aGlzKS52YWwoKS5zdWJzdHJpbmcoMCxkKSsiCSIrYSh0aGlzKS52YWwoKS5zdWJzdHJpbmcoZSkpLGEodGhpcykuZ2V0KDApLnNlbGVjdGlvblN0YXJ0PWEodGhpcykuZ2V0KDApLnNlbGVjdGlvbkVuZD1kKzF9fSkuZm9jdXMoYS5wcm94eShmdW5jdGlvbigpe3RoaXMuYmx1cnJlZCYmKHRoaXMuYmx1cnJlZD0hMSx0aGlzLnRyaWdnZXJFdmVudCgiZm9jdXMiLFtdLCExKSl9LHRoaXMpKS5tb3VzZXVwKGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmJsdXJyZWQmJih0aGlzLmJsdXJyZWQ9ITEsdGhpcy50cmlnZ2VyRXZlbnQoImZvY3VzIixbXSwhMSkpfSx0aGlzKSl9LGIucHJvdG90eXBlLmNvbW1hbmRfZGlzcGF0Y2hlcj17YWxpZ246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5idWlsZERyb3Bkb3duQWxpZ24oYSksYz10aGlzLmJ1aWxkRHJvcGRvd25CdXR0b24oYSxiKTtyZXR1cm4gY30sZm9ybWF0QmxvY2s6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5idWlsZERyb3Bkb3duRm9ybWF0QmxvY2soYSksYz10aGlzLmJ1aWxkRHJvcGRvd25CdXR0b24oYSxiKTtyZXR1cm4gY30saHRtbDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLmJ1aWxkRGVmYXVsdEJ1dHRvbihiKTtyZXR1cm4gdGhpcy5vcHRpb25zLmlubGluZU1vZGUmJnRoaXMuJGJveC5hcHBlbmQoYShjKS5jbG9uZSghMCkuYWRkQ2xhc3MoImh0bWwtc3dpdGNoIikuYXR0cigidGl0bGUiLCJIaWRlIEhUTUwiKS5jbGljayhhLnByb3h5KHRoaXMuZXhlY0hUTUwsdGhpcykpKSx0aGlzLmluaXRIVE1MQXJlYSgpLGN9fSxiLnByb3RvdHlwZS5zZXRCdXR0b25zPWZ1bmN0aW9uKGEpe2EmJih0aGlzLm9wdGlvbnMuYnV0dG9ucz1hKSx0aGlzLiRlZGl0b3IuYXBwZW5kKCc8ZGl2IGNsYXNzPSJidHRuLXdyYXBwZXIiIGlkPSJidHRuLXdyYXBwZXItJyt0aGlzLl9pZCsnIj4nKSx0aGlzLiRidHRuX3dyYXBwZXI9dGhpcy4kZWRpdG9yLmZpbmQoIiNidHRuLXdyYXBwZXItIit0aGlzLl9pZCksdGhpcy5pc1RvdWNoKCkmJnRoaXMuJGJ0dG5fd3JhcHBlci5hZGRDbGFzcygidG91Y2giKTtmb3IodmFyIGMsZCxlPSIiLGY9MDtmPHRoaXMub3B0aW9ucy5idXR0b25zLmxlbmd0aDtmKyspe3ZhciBnPXRoaXMub3B0aW9ucy5idXR0b25zW2ZdO2lmKCJzZXAiIT1nKXt2YXIgaD1iLmNvbW1hbmRzW2ddO2lmKHZvaWQgMCE9PWgpe2guY21kPWc7dmFyIGk9dGhpcy5jb21tYW5kX2Rpc3BhdGNoZXJbaC5jbWRdO2k/ZSs9aS5hcHBseSh0aGlzLFtoXSk6aC5zZWVkPyhjPXRoaXMuYnVpbGREZWZhdWx0RHJvcGRvd24oaCksZD10aGlzLmJ1aWxkRHJvcGRvd25CdXR0b24oaCxjKSxlKz1kKTooZD10aGlzLmJ1aWxkRGVmYXVsdEJ1dHRvbihoKSxlKz1kLHRoaXMuYmluZFJlZnJlc2hMaXN0ZW5lcihoKSl9ZWxzZXtpZihoPXRoaXMub3B0aW9ucy5jdXN0b21CdXR0b25zW2ddLHZvaWQgMD09PWgpe2lmKGg9dGhpcy5vcHRpb25zLmN1c3RvbURyb3Bkb3duc1tnXSx2b2lkIDA9PT1oKWNvbnRpbnVlO2Q9dGhpcy5idWlsZEN1c3RvbURyb3Bkb3duKGgsZyksZSs9ZCx0aGlzLmJpbmRSZWZyZXNoTGlzdGVuZXIoaCk7Y29udGludWV9ZD10aGlzLmJ1aWxkQ3VzdG9tQnV0dG9uKGgsZyksZSs9ZCx0aGlzLmJpbmRSZWZyZXNoTGlzdGVuZXIoaCl9fWVsc2UgZSs9dGhpcy5vcHRpb25zLmlubGluZU1vZGU/JzxkaXYgY2xhc3M9ImYtY2xlYXIiPjwvZGl2Pjxoci8+JzonPHNwYW4gY2xhc3M9ImYtc2VwIj48L3NwYW4+J310aGlzLiRidHRuX3dyYXBwZXIuaHRtbChlKSx0aGlzLiRidHRuX3dyYXBwZXIuZmluZCgnYnV0dG9uW2RhdGEtY21kPSJ1bmRvIl0sIGJ1dHRvbltkYXRhLWNtZD0icmVkbyJdJykucHJvcCgiZGlzYWJsZWQiLCEwKSx0aGlzLmJpbmRCdXR0b25FdmVudHMoKX0sYi5wcm90b3R5cGUuYmluZFJlZnJlc2hMaXN0ZW5lcj1mdW5jdGlvbihiKXtiLnJlZnJlc2gmJnRoaXMuYWRkTGlzdGVuZXIoInJlZnJlc2giLGEucHJveHkoZnVuY3Rpb24oKXtiLnJlZnJlc2guYXBwbHkodGhpcyxbYi5jbWRdKX0sdGhpcykpfSxiLnByb3RvdHlwZS5idWlsZERlZmF1bHRCdXR0b249ZnVuY3Rpb24oYSl7dmFyIGI9JzxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iZnItYnR0biIgdGl0bGU9IicrYS50aXRsZSsnIiBkYXRhLWNtZD0iJythLmNtZCsnIj4nO3JldHVybiBiKz12b2lkIDA9PT10aGlzLm9wdGlvbnMuaWNvbnNbYS5jbWRdP3RoaXMuYWRkQnV0dG9uSWNvbihhKTp0aGlzLnByZXBhcmVJY29uKHRoaXMub3B0aW9ucy5pY29uc1thLmNtZF0sYS50aXRsZSksYis9IjwvYnV0dG9uPiJ9LGIucHJvdG90eXBlLnByZXBhcmVJY29uPWZ1bmN0aW9uKGEsYil7c3dpdGNoKGEudHlwZSl7Y2FzZSJmb250IjpyZXR1cm4gdGhpcy5hZGRCdXR0b25JY29uKHtpY29uOmEudmFsdWV9KTtjYXNlImltZyI6cmV0dXJuIHRoaXMuYWRkQnV0dG9uSWNvbih7aWNvbl9pbWc6YS52YWx1ZSx0aXRsZTpifSk7Y2FzZSJ0eHQiOnJldHVybiB0aGlzLmFkZEJ1dHRvbkljb24oe2ljb25fdHh0OmEudmFsdWV9KX19LGIucHJvdG90eXBlLmFkZEJ1dHRvbkljb249ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaWNvbj8nPGkgY2xhc3M9IicrYS5pY29uKyciPjwvaT4nOmEuaWNvbl9hbHQ/JzxpIGNsYXNzPSJmb3ItdGV4dCI+JythLmljb25fYWx0KyI8L2k+IjphLmljb25faW1nPyc8aW1nIHNyYz0iJythLmljb25faW1nKyciIGFsdD0iJythLnRpdGxlKyciLz4nOmEuaWNvbl90eHQ/IjxpPiIrYS5pY29uX3R4dCsiPC9pPiI6YS50aXRsZX0sYi5wcm90b3R5cGUuYnVpbGRDdXN0b21CdXR0b249ZnVuY3Rpb24oYixjKXt2YXIgZD0nPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJmci1idHRuIiBkYXRhLW5hbWU9IicrYysnIiB0aXRsZT0iJytiLnRpdGxlKyciPicrdGhpcy5wcmVwYXJlSWNvbihiLmljb24sYi50aXRsZSkrIjwvYnV0dG9uPiI7cmV0dXJuIHRoaXMuJGJ0dG5fd3JhcHBlci5vbigiY2xpY2sgdG91Y2hlbmQiLCdidXR0b25bZGF0YS1uYW1lPSInK2MrJyJdJyxhLnByb3h5KGZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCksYS5wcmV2ZW50RGVmYXVsdCgpLGIuY2FsbGJhY2suYXBwbHkodGhpcyl9LHRoaXMpKSxkfSxiLnByb3RvdHlwZS5jYWxsRHJvcGRvd249ZnVuY3Rpb24oYixjKXt0aGlzLiRidHRuX3dyYXBwZXIub24oImNsaWNrIHRvdWNoIiwnW2RhdGEtbmFtZT0iJytiKyciXScsYS5wcm94eShmdW5jdGlvbigpe2MuYXBwbHkodGhpcyl9LHRoaXMpKX0sYi5wcm90b3R5cGUuYnVpbGRDdXN0b21Ecm9wZG93bj1mdW5jdGlvbihhLGIpe3ZhciBjPSc8ZGl2IGNsYXNzPSJmci1idHRuIGZyLWRyb3Bkb3duIj4nO2MrPSc8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImZyLXRyaWdnZXIiIHRpdGxlPSInK2EudGl0bGUrJyIgZGF0YS1uYW1lPSInK2IrJyI+Jyt0aGlzLnByZXBhcmVJY29uKGEuaWNvbixhLnRpdGxlKSsiPC9idXR0b24+IixjKz0nPHVsIGNsYXNzPSJmci1kcm9wZG93bi1tZW51Ij4nO3ZhciBkPTA7Zm9yKHZhciBlIGluIGEub3B0aW9ucyl7dmFyIGY9JzxsaSBkYXRhLW5hbWU9IicrYitkKyciPjxhIGhyZWY9IiMiPicrZSsiPC9hPjwvbGk+Ijt0aGlzLmNhbGxEcm9wZG93bihiK2QsYS5vcHRpb25zW2VdKSxjKz1mLGQrK31yZXR1cm4gYys9IjwvdWw+PC9kaXY+In0sYi5wcm90b3R5cGUuYnVpbGREcm9wZG93bkJ1dHRvbj1mdW5jdGlvbihhLGIsYyl7Yz1jfHwiIjt2YXIgZD0nPGRpdiBjbGFzcz0iZnItYnR0biBmci1kcm9wZG93biAnK2MrJyI+JyxlPSc8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgZGF0YS1uYW1lPSInK2EuY21kKyciIGNsYXNzPSJmci10cmlnZ2VyIiB0aXRsZT0iJythLnRpdGxlKyciPicrdGhpcy5hZGRCdXR0b25JY29uKGEpKyI8L2J1dHRvbj4iO3JldHVybiBkKz1lLGQrPWIsZCs9IjwvZGl2PiJ9LGIucHJvdG90eXBlLmJ1aWxkRHJvcGRvd25BbGlnbj1mdW5jdGlvbihhKXt0aGlzLmJpbmRSZWZyZXNoTGlzdGVuZXIoYSk7Zm9yKHZhciBiPSc8dWwgY2xhc3M9ImZyLWRyb3Bkb3duLW1lbnUgZi1hbGlnbiI+JyxjPTA7YzxhLnNlZWQubGVuZ3RoO2MrKyl7dmFyIGQ9YS5zZWVkW2NdO2IrPSc8bGkgZGF0YS1jbWQ9ImFsaWduIiBkYXRhLXZhbD0iJytkLmNtZCsnIiB0aXRsZT0iJytkLnRpdGxlKyciPjxhIGhyZWY9IiMiPjxpIGNsYXNzPSInK2QuaWNvbisnIj48L2k+PC9hPjwvbGk+J31yZXR1cm4gYis9IjwvdWw+In0sYi5wcm90b3R5cGUuYnVpbGREcm9wZG93bkZvcm1hdEJsb2NrPWZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0nPHVsIGNsYXNzPSJmci1kcm9wZG93bi1tZW51Ij4nLGQ9MDtkPGIuc2VlZC5sZW5ndGg7ZCsrKXt2YXIgZT1iLnNlZWRbZF07aWYoLTEhPWEuaW5BcnJheShlLnZhbHVlLHRoaXMub3B0aW9ucy5ibG9ja1RhZ3MpKXt2YXIgZj0nPGxpIGRhdGEtY21kPSInK2IuY21kKyciIGRhdGEtdmFsPSInK2UudmFsdWUrJyI+JztmKz0nPGEgaHJlZj0iIyIgZGF0YS10ZXh0PSJ0cnVlIiBjbGFzcz0iZm9ybWF0LScrZS52YWx1ZSsnIiB0aXRsZT0iJytlLnRpdGxlKyciPicrZS50aXRsZSsiPC9hPjwvbGk+IixjKz1mfX1yZXR1cm4gYys9IjwvdWw+In0sYi5wcm90b3R5cGUuYnVpbGREZWZhdWx0RHJvcGRvd249ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSc8dWwgY2xhc3M9ImZyLWRyb3Bkb3duLW1lbnUiPicsYz0wO2M8YS5zZWVkLmxlbmd0aDtjKyspe3ZhciBkPWEuc2VlZFtjXSxlPSc8bGkgZGF0YS1jbWQ9IicrKGQuY21kfHxhLmNtZCkrJyIgZGF0YS12YWw9IicrZC52YWx1ZSsnIiBkYXRhLXBhcmFtPSInKyhkLnBhcmFtfHxhLnBhcmFtKSsnIj4nO2UrPSc8YSBocmVmPSIjIiBkYXRhLXRleHQ9InRydWUiIGNsYXNzPSInK2QudmFsdWUrJyIgdGl0bGU9IicrZC50aXRsZSsnIj4nK2QudGl0bGUrIjwvYT48L2xpPiIsYis9ZX1yZXR1cm4gYis9IjwvdWw+In0sYi5wcm90b3R5cGUuY3JlYXRlRWRpdFBvcHVwSFRNTD1mdW5jdGlvbigpe3ZhciBhPSc8ZGl2IGNsYXNzPSJmcm9hbGEtcG9wdXAgZnJvYWxhLXRleHQtcG9wdXAiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4nO3JldHVybiBhKz0nPGg0PjxzcGFuIGRhdGEtdGV4dD0idHJ1ZSI+RWRpdCB0ZXh0PC9zcGFuPjxpIHRpdGxlPSJDYW5jZWwiIGNsYXNzPSJmYSBmYS10aW1lcyIgaWQ9ImYtdGV4dC1jbG9zZS0nK3RoaXMuX2lkKyciPjwvaT48L2g0PjwvaDQ+JyxhKz0nPGRpdiBjbGFzcz0iZi1wb3B1cC1saW5lIj48aW5wdXQgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9Imh0dHA6Ly93d3cuZXhhbXBsZS5jb20iIGNsYXNzPSJmLWx1IiBpZD0iZi10aS0nK3RoaXMuX2lkKyciPicsYSs9JzxidXR0b24gZGF0YS10ZXh0PSJ0cnVlIiB0eXBlPSJidXR0b24iIGNsYXNzPSJmLW9rIiBpZD0iZi1lZGl0LXBvcHVwLW9rLScrdGhpcy5faWQrJyI+T0s8L2J1dHRvbj4nLGErPSI8L2Rpdj4iLGErPSI8L2Rpdj4ifSxiLnByb3RvdHlwZS5idWlsZEVkaXRQb3B1cD1mdW5jdGlvbigpe3RoaXMuJGVkaXRfcG9wdXBfd3JhcHBlcj1hKHRoaXMuY3JlYXRlRWRpdFBvcHVwSFRNTCgpKSx0aGlzLiRwb3B1cF9lZGl0b3IuYXBwZW5kKHRoaXMuJGVkaXRfcG9wdXBfd3JhcHBlciksdGhpcy4kZWRpdF9wb3B1cF93cmFwcGVyLmZpbmQoIiNmLXRpLSIrdGhpcy5faWQpLm9uKCJtb3VzZXVwIGtleWRvd24iLGZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCl9KSx0aGlzLmFkZExpc3RlbmVyKCJoaWRlUG9wdXBzIixhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy4kZWRpdF9wb3B1cF93cmFwcGVyLmhpZGUoKX0sdGhpcykpLHRoaXMuJGVkaXRfcG9wdXBfd3JhcHBlci5vbigiY2xpY2siLCIjZi1lZGl0LXBvcHVwLW9rLSIrdGhpcy5faWQsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQudGV4dCh0aGlzLiRlZGl0X3BvcHVwX3dyYXBwZXIuZmluZCgiI2YtdGktIit0aGlzLl9pZCkudmFsKCkpLHRoaXMuc3luYygpLHRoaXMuaGlkZSgpfSx0aGlzKSksdGhpcy4kZWRpdF9wb3B1cF93cmFwcGVyLm9uKCJjbGljayIsImkjZi10ZXh0LWNsb3NlLSIrdGhpcy5faWQsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuaGlkZSgpfSx0aGlzKSl9LGIucHJvdG90eXBlLmNyZWF0ZUNPUlNSZXF1ZXN0PWZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IFhNTEh0dHBSZXF1ZXN0O2lmKCJ3aXRoQ3JlZGVudGlhbHMiaW4gYyl7Yy5vcGVuKGEsYiwhMCksdGhpcy5vcHRpb25zLndpdGhDcmVkZW50aWFscyYmKGMud2l0aENyZWRlbnRpYWxzPSEwKTtmb3IodmFyIGQgaW4gdGhpcy5vcHRpb25zLmhlYWRlcnMpYy5zZXRSZXF1ZXN0SGVhZGVyKGQsdGhpcy5vcHRpb25zLmhlYWRlcnNbZF0pfWVsc2UidW5kZWZpbmVkIiE9dHlwZW9mIFhEb21haW5SZXF1ZXN0PyhjPW5ldyBYRG9tYWluUmVxdWVzdCxjLm9wZW4oYSxiKSk6Yz1udWxsO3JldHVybiBjfSxiLnByb3RvdHlwZS5pc0VuYWJsZWQ9ZnVuY3Rpb24oYil7cmV0dXJuIGEuaW5BcnJheShiLHRoaXMub3B0aW9ucy5idXR0b25zKT49MH0sYi5wcm90b3R5cGUuYmluZEJ1dHRvbkV2ZW50cz1mdW5jdGlvbigpe3RoaXMuaXNUb3VjaCgpPyh0aGlzLm1vdXNlZG93bj0idG91Y2hzdGFydCIsdGhpcy5tb3VzZXVwPSJ0b3VjaGVuZCIsdGhpcy5tb3ZlPSJ0b3VjaG1vdmUiKToodGhpcy5tb3VzZWRvd249ImNsaWNrIG1vdXNlZG93biIsdGhpcy5tb3VzZXVwPSJtb3VzZXVwIix0aGlzLm1vdmU9IiIpLHRoaXMuYmluZERyb3Bkb3duRXZlbnRzKCksdGhpcy5iaW5kQ29tbWFuZEV2ZW50cygpfSxiLnByb3RvdHlwZS5iaW5kRHJvcGRvd25FdmVudHM9ZnVuY3Rpb24oKXt2YXIgYz10aGlzO3RoaXMuJGJ0dG5fd3JhcHBlci5vbih0aGlzLm1vdXNlZG93biwiLmZyLWRyb3Bkb3duIC5mci10cmlnZ2VyOm5vdChbZGlzYWJsZWRdKSIsZnVuY3Rpb24oYil7Yi5wcmV2ZW50RGVmYXVsdCgpLGEodGhpcykuYXR0cigiZGF0YS1kb3duIiwhMCl9KSx0aGlzLiRidHRuX3dyYXBwZXIub24odGhpcy5tb3VzZXVwLCIuZnItZHJvcGRvd24gLmZyLXRyaWdnZXI6bm90KFtkaXNhYmxlZF0pIixmdW5jdGlvbihkKXtpZihjLmlzRGlzYWJsZWQpcmV0dXJuITE7aWYoZC5zdG9wUHJvcGFnYXRpb24oKSxkLnByZXZlbnREZWZhdWx0KCksIWEodGhpcykuYXR0cigiZGF0YS1kb3duIikpcmV0dXJuIGEoIltkYXRhLWRvd25dIikucmVtb3ZlQXR0cigiZGF0YS1kb3duIiksITE7YSgiW2RhdGEtZG93bl0iKS5yZW1vdmVBdHRyKCJkYXRhLWRvd24iKSwidG91Y2hlbmQiPT09ZC50eXBlJiZjLmFuZHJvaWQoKSYmKGMuc2F2ZVNlbGVjdGlvbkJ5TWFya2VycygpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKX0sMTApKSxjLm9wdGlvbnMuaW5saW5lTW9kZT09PSExJiZjLmhpZGUoKSxhKHRoaXMpLnRvZ2dsZUNsYXNzKCJhY3RpdmUiKS50cmlnZ2VyKCJibHVyIiksYy5jbG9zZUltYWdlTW9kZSgpLGMuaW1hZ2VNb2RlPSExO3ZhciBlLGY9YSh0aGlzKS5hdHRyKCJkYXRhLW5hbWUiKTtiLmNvbW1hbmRzW2ZdP2U9Yi5jb21tYW5kc1tmXS5yZWZyZXNoT25TaG93OmMub3B0aW9ucy5jdXN0b21Ecm9wZG93bnNbZl0mJihlPWMub3B0aW9ucy5jdXN0b21Ecm9wZG93bnNbZl0ucmVmcmVzaE9uU2hvdyksZSYmZS5jYWxsKGMpLGMuJGJ0dG5fd3JhcHBlci5maW5kKCIuZnItZHJvcGRvd24iKS5ub3QoYSh0aGlzKS5wYXJlbnQoKSkuZmluZCgiLmZyLXRyaWdnZXIiKS5yZW1vdmVDbGFzcygiYWN0aXZlIil9KSxhKHdpbmRvdykub24oIm1vdXNldXAgc2VsZWN0aW9uY2hhbmdlIixhLnByb3h5KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMTp2b2lkIHRoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCIuZnItZHJvcGRvd24gLmZyLXRyaWdnZXIiKS5yZW1vdmVDbGFzcygiYWN0aXZlIil9LHRoaXMpKSx0aGlzLiRlbGVtZW50Lm9uKCJtb3VzZXVwIiwiaW1nLCBhIixhLnByb3h5KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNEaXNhYmxlZD8hMTp2b2lkIHRoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCIuZnItZHJvcGRvd24gLmZyLXRyaWdnZXIiKS5yZW1vdmVDbGFzcygiYWN0aXZlIil9LHRoaXMpKSx0aGlzLiRidHRuX3dyYXBwZXIub24oImNsaWNrIiwibGlbZGF0YS1jbWRdID4gYSIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpfSl9LGIucHJvdG90eXBlLmJpbmRDb21tYW5kRXZlbnRzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpczt0aGlzLiRidHRuX3dyYXBwZXIub24odGhpcy5tb3VzZWRvd24sImJ1dHRvbltkYXRhLWNtZF0sIGxpW2RhdGEtY21kXSwgc3BhbltkYXRhLWNtZF0sIGFbZGF0YS1jbWRdIixmdW5jdGlvbihjKXtyZXR1cm4ibW91c2Vkb3duIj09PWMudHlwZSYmMSE9PWMud2hpY2g/ITA6KCJMSSI9PT10aGlzLnRhZ05hbWUmJiJ0b3VjaHN0YXJ0Ij09PWMudHlwZSYmYi5hbmRyb2lkKCl8fGIuaU9TKCl8fGMucHJldmVudERlZmF1bHQoKSx2b2lkIGEodGhpcykuYXR0cigiZGF0YS1kb3duIiwhMCkpfSksdGhpcy4kYnR0bl93cmFwcGVyLm9uKHRoaXMubW91c2V1cCsiICIrdGhpcy5tb3ZlLCJidXR0b25bZGF0YS1jbWRdLCBsaVtkYXRhLWNtZF0sIHNwYW5bZGF0YS1jbWRdLCBhW2RhdGEtY21kXSIsYS5wcm94eShmdW5jdGlvbihjKXtpZihiLmlzRGlzYWJsZWQpcmV0dXJuITE7aWYoIm1vdXNldXAiPT09Yy50eXBlJiYxIT09Yy53aGljaClyZXR1cm4hMDt2YXIgZD1jLmN1cnJlbnRUYXJnZXQ7aWYoInRvdWNobW92ZSIhPWMudHlwZSl7aWYoYy5zdG9wUHJvcGFnYXRpb24oKSxjLnByZXZlbnREZWZhdWx0KCksIWEoZCkuYXR0cigiZGF0YS1kb3duIikpcmV0dXJuIGEoIltkYXRhLWRvd25dIikucmVtb3ZlQXR0cigiZGF0YS1kb3duIiksITE7aWYoYSgiW2RhdGEtZG93bl0iKS5yZW1vdmVBdHRyKCJkYXRhLWRvd24iKSxhKGQpLmRhdGEoImRyYWdnaW5nIikpcmV0dXJuIGEoZCkucmVtb3ZlRGF0YSgiZHJhZ2dpbmciKSwhMTt2YXIgZT1hKGQpLmRhdGEoImNtZCIpLGY9YShkKS5kYXRhKCJ2YWwiKSxnPWEoZCkuZGF0YSgicGFyYW0iKTtyZXR1cm4idG91Y2hlbmQiPT1jLnR5cGUmJmIuYW5kcm9pZCgpJiYodGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCkpLGIuZXhlYyhlLGYsZyksYi4kYnR0bl93cmFwcGVyLmZpbmQoIi5mci1kcm9wZG93biAuZnItdHJpZ2dlciIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKSwhMX1hKGQpLmRhdGEoImRyYWdnaW5nIiwhMCl9LHRoaXMpKX0sYi5wcm90b3R5cGUudW5kbz1mdW5jdGlvbigpe2lmKHRoaXMubm9fdmVyaWZ5PSEwLHRoaXMudW5kb0luZGV4PjEpe2NsZWFyVGltZW91dCh0aGlzLnR5cGluZ1RpbWVyKTt2YXIgYT10aGlzLmdldEhUTUwoKSxiPXRoaXMudW5kb1N0YWNrWy0tdGhpcy51bmRvSW5kZXgtMV07dGhpcy4kZWxlbWVudC5odG1sKGIpLHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMudHJpZ2dlckV2ZW50KCJ1bmRvIixbdGhpcy5nZXRIVE1MKCksYV0pLCIiIT09dGhpcy50ZXh0KCk/dGhpcy5yZXBvc2l0aW9uRWRpdG9yKCk6dGhpcy5oaWRlKCksdGhpcy4kZWxlbWVudC50cmlnZ2VyKCJwbGFjZWhvbGRlckNoZWNrIiksdGhpcy5mb2N1cygpLHRoaXMucmVmcmVzaEJ1dHRvbnMoKX10aGlzLm5vX3ZlcmlmeT0hMX0sYi5wcm90b3R5cGUucmVkbz1mdW5jdGlvbigpe2lmKHRoaXMubm9fdmVyaWZ5PSEwLHRoaXMudW5kb0luZGV4PHRoaXMudW5kb1N0YWNrLmxlbmd0aCl7Y2xlYXJUaW1lb3V0KHRoaXMudHlwaW5nVGltZXIpO3ZhciBhPXRoaXMuZ2V0SFRNTCgpLGI9dGhpcy51bmRvU3RhY2tbdGhpcy51bmRvSW5kZXgrK107dGhpcy4kZWxlbWVudC5odG1sKGIpLHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMudHJpZ2dlckV2ZW50KCJyZWRvIixbdGhpcy5nZXRIVE1MKCksYV0pLCIiIT09dGhpcy50ZXh0KCk/dGhpcy5yZXBvc2l0aW9uRWRpdG9yKCk6dGhpcy5oaWRlKCksdGhpcy4kZWxlbWVudC50cmlnZ2VyKCJwbGFjZWhvbGRlckNoZWNrIiksdGhpcy5mb2N1cygpLHRoaXMucmVmcmVzaEJ1dHRvbnMoKX10aGlzLm5vX3ZlcmlmeT0hMX0sYi5wcm90b3R5cGUuc2F2ZT1mdW5jdGlvbigpe2lmKCF0aGlzLnRyaWdnZXJFdmVudCgiYmVmb3JlU2F2ZSIsW10sITEpKXJldHVybiExO2lmKHRoaXMub3B0aW9ucy5zYXZlVVJMKXt2YXIgYj17fTtmb3IodmFyIGMgaW4gdGhpcy5vcHRpb25zLnNhdmVQYXJhbXMpe3ZhciBkPXRoaXMub3B0aW9ucy5zYXZlUGFyYW1zW2NdO2JbY109ImZ1bmN0aW9uIj09dHlwZW9mIGQ/ZC5jYWxsKHRoaXMpOmR9YS5hamF4KHt0eXBlOnRoaXMub3B0aW9ucy5zYXZlUmVxdWVzdFR5cGUsdXJsOnRoaXMub3B0aW9ucy5zYXZlVVJMLGRhdGE6YS5leHRlbmQoe2JvZHk6dGhpcy5nZXRIVE1MKCl9LHRoaXMub3B0aW9ucy5zYXZlUGFyYW1zKSxjcm9zc0RvbWFpbjp0aGlzLm9wdGlvbnMuY3Jvc3NEb21haW4seGhyRmllbGRzOnt3aXRoQ3JlZGVudGlhbHM6dGhpcy5vcHRpb25zLndpdGhDcmVkZW50aWFsc30saGVhZGVyczp0aGlzLm9wdGlvbnMuaGVhZGVyc30pLmRvbmUoYS5wcm94eShmdW5jdGlvbihhKXt0aGlzLnRyaWdnZXJFdmVudCgiYWZ0ZXJTYXZlIixbYV0pfSx0aGlzKSkuZmFpbChhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyRXZlbnQoInNhdmVFcnJvciIsWyJTYXZlIHJlcXVlc3QgZmFpbGVkIG9uIHRoZSBzZXJ2ZXIuIl0pfSx0aGlzKSl9ZWxzZSB0aGlzLnRyaWdnZXJFdmVudCgic2F2ZUVycm9yIixbIk1pc3Npbmcgc2F2ZSBVUkwuIl0pfSxiLnByb3RvdHlwZS5zYW5pdGl6ZVVSTD1mdW5jdGlvbihhKXtpZigvXmh0dHBzPzpcL1wvLy50ZXN0KGEpKXthPVN0cmluZyhhKS5yZXBsYWNlKC8mL2csIiZhbXA7IikucmVwbGFjZSgvPC9nLCImbHQ7IikucmVwbGFjZSgvPi9nLCImZ3Q7IikucmVwbGFjZSgvIi9nLCImcXVvdDsiKTt2YXIgYj0vXCg/KD86KGh0dHB8aHR0cHN8ZnRwKTpcL1wvKT8oPzooKD86W15cV1xzXXxcLnwtfFs6XXsxfSkrKUB7MX0pPygoPzp3d3cuKT8oPzpbXlxXXHNdfFwufC0pK1tcLl1bXlxXXHNdezIsNH18bG9jYWxob3N0fFxkezEsM31cLlxkezEsM31cLlxkezEsM31cLlxkezEsM30pKD86OihcZCopKT8oW1wvXT9bXlxzXD9dKltcL117MX0pKig/OlwvPyhbXlxzXG5cP1xbXF1ce1x9XCNdKig/Oig/PVwuKSl7MX18W15cc1xuXD9cW1xdXHtcfVwuXCNdKik/KFtcLl17MX1bXlxzXD9cI10qKT8pPyg/Olw/ezF9KFteXHNcblwjXFtcXV0qKSk/KFtcI11bXlxzXG5dKik/XCk/L2dpO2lmKCFiLnRlc3QoYSkpcmV0dXJuIiJ9ZWxzZSBhPWVuY29kZVVSSUNvbXBvbmVudChhKS5yZXBsYWNlKC8lMjMvZywiIyIpLnJlcGxhY2UoLyUyRi9nLCIvIikucmVwbGFjZSgvJTI1L2csIiUiKS5yZXBsYWNlKC9tYWlsdG8lM0EvZywibWFpbHRvOiIpLnJlcGxhY2UoL2RhdGElM0EvZywiZGF0YToiKS5yZXBsYWNlKC93ZWJraXQtZmFrZS11cmwlM0EvZywid2Via2l0LWZha2UtdXJsOiIpLnJlcGxhY2UoLyUzRi9nLCI/IikucmVwbGFjZSgvJTNEL2csIj0iKS5yZXBsYWNlKC8lMjYvZywiJiIpLnJlcGxhY2UoLyUyQy9nLCIsIikucmVwbGFjZSgvJTNCL2csIjsiKS5yZXBsYWNlKC8lMkIvZywiKyIpLnJlcGxhY2UoLyU0MC9nLCJAIik7cmV0dXJuIGF9LGIucHJvdG90eXBlLm9wdGlvbj1mdW5jdGlvbihiLGMpe2lmKHZvaWQgMD09PWIpcmV0dXJuIHRoaXMub3B0aW9ucztpZihiIGluc3RhbmNlb2YgT2JqZWN0KXRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMsYiksdGhpcy5pbml0T3B0aW9ucygpLHRoaXMuc2V0Q3VzdG9tVGV4dCgpLHRoaXMuc2V0TGFuZ3VhZ2UoKTtlbHNle2lmKHZvaWQgMD09PWMpcmV0dXJuIHRoaXMub3B0aW9uc1tiXTtzd2l0Y2godGhpcy5vcHRpb25zW2JdPWMsYil7Y2FzZSJkaXJlY3Rpb24iOnRoaXMuc2V0RGlyZWN0aW9uKCk7YnJlYWs7Y2FzZSJoZWlnaHQiOmNhc2Uid2lkdGgiOmNhc2UibWluSGVpZ2h0IjpjYXNlIm1heEhlaWdodCI6dGhpcy5zZXREaW1lbnNpb25zKCk7YnJlYWs7Y2FzZSJzcGVsbGNoZWNrIjp0aGlzLnNldFNwZWxsY2hlY2soKTticmVhaztjYXNlInBsYWNlaG9sZGVyIjp0aGlzLnNldFBsYWNlaG9sZGVyKCk7YnJlYWs7Y2FzZSJjdXN0b21UZXh0Ijp0aGlzLnNldEN1c3RvbVRleHQoKTticmVhaztjYXNlImxhbmd1YWdlIjp0aGlzLnNldExhbmd1YWdlKCk7YnJlYWs7Y2FzZSJ0ZXh0TmVhckltYWdlIjp0aGlzLnNldFRleHROZWFySW1hZ2UoKTticmVhaztjYXNlInpJbmRleCI6dGhpcy5zZXRaSW5kZXgoKTticmVhaztjYXNlInRoZW1lIjp0aGlzLnNldFRoZW1lKCl9fX07dmFyIGM9YS5mbi5lZGl0YWJsZTthLmZuLmVkaXRhYmxlPWZ1bmN0aW9uKGMpe2Zvcih2YXIgZD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKylkLnB1c2goYXJndW1lbnRzW2VdKTtpZigic3RyaW5nIj09dHlwZW9mIGMpe3ZhciBmPVtdO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpLGU9Yi5kYXRhKCJmYS5lZGl0YWJsZSIpO2lmKCFlW2NdKXJldHVybiBhLmVycm9yKCJNZXRob2QgIitjKyIgZG9lcyBub3QgZXhpc3QgaW4gRnJvYWxhIEVkaXRvci4iKTt2YXIgZz1lW2NdLmFwcGx5KGUsZC5zbGljZSgxKSk7dm9pZCAwPT09Zz9mLnB1c2godGhpcyk6MD09PWYubGVuZ3RoJiZmLnB1c2goZyl9KSwxPT1mLmxlbmd0aD9mWzBdOmZ9cmV0dXJuIm9iamVjdCIhPXR5cGVvZiBjJiZjP3ZvaWQgMDp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD10aGlzLGU9YShkKSxmPWUuZGF0YSgiZmEuZWRpdGFibGUiKTtmfHxlLmRhdGEoImZhLmVkaXRhYmxlIixmPW5ldyBiKGQsYykpfSl9LGEuZm4uZWRpdGFibGUuQ29uc3RydWN0b3I9YixhLkVkaXRhYmxlPWIsYS5mbi5lZGl0YWJsZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uZWRpdGFibGU9Yyx0aGlzfX0od2luZG93LmpRdWVyeSksZnVuY3Rpb24oYSl7YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaEJ1dHRvbnM9ZnVuY3Rpb24oYil7aWYoISh0aGlzLnNlbGVjdGlvbkluRWRpdG9yKCkmJiF0aGlzLmlzSFRNTHx8dGhpcy5icm93c2VyLm1zaWUmJmEuRWRpdGFibGUuZ2V0SUV2ZXJzaW9uKCk8OXx8YikpcmV0dXJuITE7dGhpcy4kZWRpdG9yLmZpbmQoImJ1dHRvbltkYXRhLWNtZF0iKS5yZW1vdmVDbGFzcygiYWN0aXZlIik7Zm9yKHZhciBjPTA7Yzx0aGlzLm9wdGlvbnMuYnV0dG9ucy5sZW5ndGg7YysrKXt2YXIgZD10aGlzLm9wdGlvbnMuYnV0dG9uc1tjXTt2b2lkIDAhPT1hLkVkaXRhYmxlLmNvbW1hbmRzW2RdJiYodm9pZCAwIT09YS5FZGl0YWJsZS5jb21tYW5kc1tkXS5kaXNhYmxlZD90aGlzLiRlZGl0b3IuZmluZCgnW2RhdGEtbmFtZT0iJytkKyciXSBidXR0b24nKS5wcm9wKCJkaXNhYmxlZCIsITApOnRoaXMuJGVkaXRvci5maW5kKCdbZGF0YS1uYW1lPSInK2QrJyJdIGJ1dHRvbicpLnJlbW92ZUF0dHIoImRpc2FibGVkIikpfXRoaXMucmFpc2VFdmVudCgicmVmcmVzaCIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoRm9ybWF0QmxvY2tzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpWzBdLGI9YS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7dGhpcy5vcHRpb25zLnBhcmFncmFwaHkmJiJwIj09PWImJihiPSJuIiksdGhpcy4kZWRpdG9yLmZpbmQoJy5mci1idHRuID4gYnV0dG9uW2RhdGEtbmFtZT0iZm9ybWF0QmxvY2siXSArIHVsIGxpJykucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpLHRoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCcuZnItYnR0biA+IGJ1dHRvbltkYXRhLW5hbWU9ImZvcm1hdEJsb2NrIl0gKyB1bCBsaVtkYXRhLXZhbD0iJytiKyciXScpLmFkZENsYXNzKCJhY3RpdmUiKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaFVuZG89ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW5hYmxlZCgidW5kbyIpKXtpZih2b2lkIDA9PT10aGlzLiRlZGl0b3IpcmV0dXJuO3RoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCdbZGF0YS1jbWQ9InVuZG8iXScpLnJlbW92ZUF0dHIoImRpc2FibGVkIiksKDA9PT10aGlzLnVuZG9TdGFjay5sZW5ndGh8fHRoaXMudW5kb0luZGV4PD0xfHx0aGlzLmlzSFRNTCkmJnRoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCdbZGF0YS1jbWQ9InVuZG8iXScpLnByb3AoImRpc2FibGVkIiwhMCl9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoUmVkbz1mdW5jdGlvbigpe2lmKHRoaXMuaXNFbmFibGVkKCJyZWRvIikpe2lmKHZvaWQgMD09PXRoaXMuJGVkaXRvcilyZXR1cm47dGhpcy4kYnR0bl93cmFwcGVyLmZpbmQoJ1tkYXRhLWNtZD0icmVkbyJdJykucmVtb3ZlQXR0cigiZGlzYWJsZWQiKSwodGhpcy51bmRvSW5kZXg9PXRoaXMudW5kb1N0YWNrLmxlbmd0aHx8dGhpcy5pc0hUTUwpJiZ0aGlzLiRidHRuX3dyYXBwZXIuZmluZCgnW2RhdGEtY21kPSJyZWRvIl0nKS5wcm9wKCJkaXNhYmxlZCIsITApfX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaERlZmF1bHQ9ZnVuY3Rpb24oYSl7dHJ5e2RvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKGEpPT09ITAmJnRoaXMuJGVkaXRvci5maW5kKCdbZGF0YS1jbWQ9IicrYSsnIl0nKS5hZGRDbGFzcygiYWN0aXZlIil9Y2F0Y2goYil7fX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaEFsaWduPWZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzLmdldFNlbGVjdGlvbkVsZW1lbnRzKClbMF0pO3RoaXMuJGVkaXRvci5maW5kKCcuZnItZHJvcGRvd24gPiBidXR0b25bZGF0YS1uYW1lPSJhbGlnbiJdICsgdWwgbGknKS5yZW1vdmVDbGFzcygiYWN0aXZlIik7dmFyIGM9Imp1c3RpZnlDZW50ZXIiLGQ9Yi5jc3MoInRleHQtYWxpZ24iKTsibGVmdCI9PWQ/Yz0ianVzdGlmeUxlZnQiOiJyaWdodCI9PWQ/Yz0ianVzdGlmeVJpZ2h0IjoianVzdGlmeSI9PWQmJihjPSJqdXN0aWZ5RnVsbCIpLHRoaXMuJGVkaXRvci5maW5kKCcuZnItZHJvcGRvd24gPiBidXR0b25bZGF0YS1uYW1lPSJhbGlnbiJdLmZyLXRyaWdnZXIgaScpLmF0dHIoImNsYXNzIiwiZmEgZmEtYWxpZ24tIitkKSx0aGlzLiRlZGl0b3IuZmluZCgnLmZyLWRyb3Bkb3duID4gYnV0dG9uW2RhdGEtbmFtZT0iYWxpZ24iXSArIHVsIGxpW2RhdGEtY21kPSInK2MrJyJdJykuYWRkQ2xhc3MoImFjdGl2ZSIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoSFRNTD1mdW5jdGlvbigpe3RoaXMuaXNBY3RpdmUoImh0bWwiKT90aGlzLiRlZGl0b3IuZmluZCgnW2RhdGEtY21kPSJodG1sIl0nKS5hZGRDbGFzcygiYWN0aXZlIik6dGhpcy4kZWRpdG9yLmZpbmQoJ1tkYXRhLWNtZD0iaHRtbCJdJykucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthLkVkaXRhYmxlLmNvbW1hbmRzPXtib2xkOnt0aXRsZToiQm9sZCIsaWNvbjoiZmEgZmEtYm9sZCIsc2hvcnRjdXQ6IihDdHJsICsgQikiLHJlZnJlc2g6YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaERlZmF1bHQsdW5kbzohMCxjYWxsYmFja1dpdGhvdXRTZWxlY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5fc3RhcnRJbkRlZmF1bHQoYSl9fSxpdGFsaWM6e3RpdGxlOiJJdGFsaWMiLGljb246ImZhIGZhLWl0YWxpYyIsc2hvcnRjdXQ6IihDdHJsICsgSSkiLHJlZnJlc2g6YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaERlZmF1bHQsdW5kbzohMCxjYWxsYmFja1dpdGhvdXRTZWxlY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5fc3RhcnRJbkRlZmF1bHQoYSl9fSx1bmRlcmxpbmU6e2NtZDoidW5kZXJsaW5lIix0aXRsZToiVW5kZXJsaW5lIixpY29uOiJmYSBmYS11bmRlcmxpbmUiLHNob3J0Y3V0OiIoQ3RybCArIFUpIixyZWZyZXNoOmEuRWRpdGFibGUucHJvdG90eXBlLnJlZnJlc2hEZWZhdWx0LHVuZG86ITAsY2FsbGJhY2tXaXRob3V0U2VsZWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuX3N0YXJ0SW5EZWZhdWx0KGEpfX0sc3RyaWtlVGhyb3VnaDp7dGl0bGU6IlN0cmlrZXRocm91Z2giLGljb246ImZhIGZhLXN0cmlrZXRocm91Z2giLHJlZnJlc2g6YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaERlZmF1bHQsdW5kbzohMCxjYWxsYmFja1dpdGhvdXRTZWxlY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5fc3RhcnRJbkRlZmF1bHQoYSl9fSxzdWJzY3JpcHQ6e3RpdGxlOiJTdWJzY3JpcHQiLGljb246ImZhIGZhLXN1YnNjcmlwdCIscmVmcmVzaDphLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoRGVmYXVsdCx1bmRvOiEwLGNhbGxiYWNrV2l0aG91dFNlbGVjdGlvbjpmdW5jdGlvbihhKXt0aGlzLl9zdGFydEluRGVmYXVsdChhKX19LHN1cGVyc2NyaXB0Ont0aXRsZToiU3VwZXJzY3JpcHQiLGljb246ImZhIGZhLXN1cGVyc2NyaXB0IixyZWZyZXNoOmEuRWRpdGFibGUucHJvdG90eXBlLnJlZnJlc2hEZWZhdWx0LHVuZG86ITAsY2FsbGJhY2tXaXRob3V0U2VsZWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuX3N0YXJ0SW5EZWZhdWx0KGEpfX0sZm9ybWF0QmxvY2s6e3RpdGxlOiJGb3JtYXQgQmxvY2siLGljb246ImZhIGZhLXBhcmFncmFwaCIscmVmcmVzaE9uU2hvdzphLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoRm9ybWF0QmxvY2tzLHNlZWQ6W3t2YWx1ZToibiIsdGl0bGU6Ik5vcm1hbCJ9LHt2YWx1ZToicCIsdGl0bGU6IlBhcmFncmFwaCJ9LHt2YWx1ZToicHJlIix0aXRsZToiQ29kZSJ9LHt2YWx1ZToiYmxvY2txdW90ZSIsdGl0bGU6IlF1b3RlIn0se3ZhbHVlOiJoMSIsdGl0bGU6IkhlYWRpbmcgMSJ9LHt2YWx1ZToiaDIiLHRpdGxlOiJIZWFkaW5nIDIifSx7dmFsdWU6ImgzIix0aXRsZToiSGVhZGluZyAzIn0se3ZhbHVlOiJoNCIsdGl0bGU6IkhlYWRpbmcgNCJ9LHt2YWx1ZToiaDUiLHRpdGxlOiJIZWFkaW5nIDUifSx7dmFsdWU6Img2Iix0aXRsZToiSGVhZGluZyA2In1dLGNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7dGhpcy5mb3JtYXRCbG9jayhiKX0sdW5kbzohMH0sYWxpZ246e3RpdGxlOiJBbGlnbm1lbnQiLGljb246ImZhIGZhLWFsaWduLWNlbnRlciIscmVmcmVzaDphLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoQWxpZ24scmVmcmVzaE9uU2hvdzphLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoQWxpZ24sc2VlZDpbe2NtZDoianVzdGlmeUxlZnQiLHRpdGxlOiJBbGlnbiBMZWZ0IixpY29uOiJmYSBmYS1hbGlnbi1sZWZ0In0se2NtZDoianVzdGlmeUNlbnRlciIsdGl0bGU6IkFsaWduIENlbnRlciIsaWNvbjoiZmEgZmEtYWxpZ24tY2VudGVyIn0se2NtZDoianVzdGlmeVJpZ2h0Iix0aXRsZToiQWxpZ24gUmlnaHQiLGljb246ImZhIGZhLWFsaWduLXJpZ2h0In0se2NtZDoianVzdGlmeUZ1bGwiLHRpdGxlOiJKdXN0aWZ5IixpY29uOiJmYSBmYS1hbGlnbi1qdXN0aWZ5In1dLGNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7dGhpcy5hbGlnbihiKX0sdW5kbzohMH0sb3V0ZGVudDp7dGl0bGU6IkluZGVudCBMZXNzIixpY29uOiJmYSBmYS1kZWRlbnQiLGFjdGl2ZWxlc3M6ITAsc2hvcnRjdXQ6IihDdHJsICsgPCkiLGNhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5vdXRkZW50KCEwKX0sdW5kbzohMH0saW5kZW50Ont0aXRsZToiSW5kZW50IE1vcmUiLGljb246ImZhIGZhLWluZGVudCIsYWN0aXZlbGVzczohMCxzaG9ydGN1dDoiKEN0cmwgKyA+KSIsY2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmluZGVudCgpfSx1bmRvOiEwfSxzZWxlY3RBbGw6e3RpdGxlOiJTZWxlY3QgQWxsIixpY29uOiJmYSBmYS1maWxlLXRleHQiLHNob3J0Y3V0OiIoQ3RybCArIEEpIixjYWxsYmFjazpmdW5jdGlvbihhLGIpe3RoaXMuJGVsZW1lbnQuZm9jdXMoKSx0aGlzLmV4ZWNEZWZhdWx0KGEsYil9LHVuZG86ITF9LGNyZWF0ZUxpbms6e3RpdGxlOiJJbnNlcnQgTGluayIsaWNvbjoiZmEgZmEtbGluayIsc2hvcnRjdXQ6IihDdHJsICsgSykiLGNhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5pbnNlcnRMaW5rKCl9LHVuZG86ITF9LGluc2VydEltYWdlOnt0aXRsZToiSW5zZXJ0IEltYWdlIixpY29uOiJmYSBmYS1waWN0dXJlLW8iLGFjdGl2ZWxlc3M6ITAsc2hvcnRjdXQ6IihDdHJsICsgUCkiLGNhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5pbnNlcnRJbWFnZSgpfSx1bmRvOiExfSx1bmRvOnt0aXRsZToiVW5kbyIsaWNvbjoiZmEgZmEtdW5kbyIsYWN0aXZlbGVzczohMCxzaG9ydGN1dDoiKEN0cmwrWikiLHJlZnJlc2g6YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaFVuZG8sY2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnVuZG8oKX0sdW5kbzohMX0scmVkbzp7dGl0bGU6IlJlZG8iLGljb246ImZhIGZhLXJlcGVhdCIsYWN0aXZlbGVzczohMCxzaG9ydGN1dDoiKFNoaWZ0K0N0cmwrWikiLHJlZnJlc2g6YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaFJlZG8sY2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnJlZG8oKX0sdW5kbzohMX0saHRtbDp7dGl0bGU6IlNob3cgSFRNTCIsaWNvbjoiZmEgZmEtY29kZSIscmVmcmVzaDphLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoSFRNTCxjYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuaHRtbCgpfSx1bmRvOiExfSxzYXZlOnt0aXRsZToiU2F2ZSIsaWNvbjoiZmEgZmEtZmxvcHB5LW8iLGNhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5zYXZlKCl9LHVuZG86ITF9LGluc2VydEhvcml6b250YWxSdWxlOnt0aXRsZToiSW5zZXJ0IEhvcml6b250YWwgTGluZSIsaWNvbjoiZmEgZmEtbWludXMiLGNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7dGhpcy5leGVjRGVmYXVsdChhLGIpLHRoaXMuaGlkZSgpfSx1bmRvOiEwfX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZXhlYz1mdW5jdGlvbihiLGMsZCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKXx8dGhpcy5mb2N1cygpLHRoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKSYmIiI9PT10aGlzLnRleHQoKSYmYS5FZGl0YWJsZS5jb21tYW5kc1tiXS5jYWxsYmFja1dpdGhvdXRTZWxlY3Rpb24/KGEuRWRpdGFibGUuY29tbWFuZHNbYl0uY2FsbGJhY2tXaXRob3V0U2VsZWN0aW9uLmFwcGx5KHRoaXMsW2IsYyxkXSksITEpOihhLkVkaXRhYmxlLmNvbW1hbmRzW2JdLmNhbGxiYWNrP2EuRWRpdGFibGUuY29tbWFuZHNbYl0uY2FsbGJhY2suYXBwbHkodGhpcyxbYixjLGRdKTp0aGlzLmV4ZWNEZWZhdWx0KGIsYyksdm9pZChhLkVkaXRhYmxlLmNvbW1hbmRzW2JdLnVuZG8mJnRoaXMuc2F2ZVVuZG9TdGVwKCkpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaHRtbD1mdW5jdGlvbigpe3ZhciBhO3RoaXMuaXNIVE1MPyh0aGlzLmlzSFRNTD0hMSxhPXRoaXMuJGh0bWxfYXJlYS52YWwoKSxhPXRoaXMuY2xlYW4oYSwhMCwhMSksdGhpcy4kYm94LnJlbW92ZUNsYXNzKCJmLWh0bWwiKSx0aGlzLiRodG1sX2FyZWEuYmx1cigpLHRoaXMubm9fdmVyaWZ5PSEwLHRoaXMuJGVsZW1lbnQuaHRtbChhKSx0aGlzLmNsZWFuaWZ5KCExKSx0aGlzLm5vX3ZlcmlmeT0hMSx0aGlzLiRlbGVtZW50LmF0dHIoImNvbnRlbnRlZGl0YWJsZSIsITApLHRoaXMuJGVkaXRvci5maW5kKCcuZnItYnR0bjpub3QoW2RhdGEtY21kPSJodG1sIl0pLCAuZnItdHJpZ2dlcicpLnJlbW92ZUF0dHIoImRpc2FibGVkIiksdGhpcy4kZWRpdG9yLmZpbmQoJy5mci1idHRuW2RhdGEtY21kPSJodG1sIl0nKS5yZW1vdmVDbGFzcygiYWN0aXZlIiksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLm9wdGlvbnMucGFyYWdyYXBoeSYmdGhpcy53cmFwVGV4dCgpLHRoaXMuJGVsZW1lbnQuYmx1cigpLHRoaXMuZm9jdXMoKSx0aGlzLnJlZnJlc2hCdXR0b25zKCksdGhpcy50cmlnZ2VyRXZlbnQoImh0bWxIaWRlIixbYV0sITAsITApKToodGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygiZi1wbGFjZWhvbGRlciIpLHRoaXMuY2xlYW5pZnkoITEpLGE9dGhpcy5vcHRpb25zLmlubGluZU1vZGU/IlxuXG4iK3RoaXMuY2xlYW5UYWdzKHRoaXMuZ2V0SFRNTCghMSwhMSkpOnRoaXMuY2xlYW5UYWdzKHRoaXMuZ2V0SFRNTCghMSwhMSkpLGE9YS5yZXBsYWNlKC9cJmFtcDsvZywiJiIpLHRoaXMuJGh0bWxfYXJlYS52YWwoYSkudHJpZ2dlcigicmVzaXplIiksdGhpcy4kaHRtbF9hcmVhLmNzcygiaGVpZ2h0Iix0aGlzLiRlbGVtZW50LmhlaWdodCgpLTEpLHRoaXMuJGVsZW1lbnQuaHRtbCgiIikuYXBwZW5kKHRoaXMuJGh0bWxfYXJlYSkucmVtb3ZlQXR0cigiY29udGVudGVkaXRhYmxlIiksdGhpcy4kYm94LmFkZENsYXNzKCJmLWh0bWwiKSx0aGlzLiRlZGl0b3IuZmluZCgnYnV0dG9uLmZyLWJ0dG46bm90KFtkYXRhLWNtZD0iaHRtbCJdKSwgYnV0dG9uLmZyLXRyaWdnZXInKS5hdHRyKCJkaXNhYmxlZCIsITApLHRoaXMuJGVkaXRvci5maW5kKCcuZnItYnR0bltkYXRhLWNtZD0iaHRtbCJdJykuYWRkQ2xhc3MoImFjdGl2ZSIpLHRoaXMuaGlkZSgpLHRoaXMuaW1hZ2VNb2RlPSExLHRoaXMuaXNIVE1MPSEwLHRoaXMuJGVsZW1lbnQuYmx1cigpLHRoaXMuJGVsZW1lbnQucmVtb3ZlQXR0cigiY29udGVudGVkaXRhYmxlIiksdGhpcy50cmlnZ2VyRXZlbnQoImh0bWxTaG93IixbYV0sITAsITEpKQp9LGEuRWRpdGFibGUucHJvdG90eXBlLmZvcm1hdEJsb2NrPWZ1bmN0aW9uKGIsYyxkKXtpZih0aGlzLmRpc2FibGVkTGlzdC5pbmRleE9mKCJmb3JtYXRCbG9jayIpPj0wKXJldHVybiExO2lmKHRoaXMuYnJvd3Nlci5tc2llJiZhLkVkaXRhYmxlLmdldElFdmVyc2lvbigpPDkpcmV0dXJuIGRvY3VtZW50LmV4ZWNDb21tYW5kKCJmb3JtYXRCbG9jayIsITEsIjwiK2IrIj4iKSwhMTt0aGlzLnNhdmVTZWxlY3Rpb25CeU1hcmtlcnMoKSx0aGlzLndyYXBUZXh0KCksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCk7dmFyIGU9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpO2VbMF09PXRoaXMuJGVsZW1lbnQuZ2V0KDApJiYoZT10aGlzLiRlbGVtZW50LmZpbmQoIj4gIithLkVkaXRhYmxlLlZBTElEX05PREVTLmpvaW4oIiwgPiIpKSksdGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCk7Zm9yKHZhciBmLGc9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0JiZbIkxJIiwiVEQiLCJUSCJdLmluZGV4T2YoYS5nZXQoMCkudGFnTmFtZSk+PTA/ITA6ITF9LGg9MDtoPGUubGVuZ3RoO2grKyl7dmFyIGk9YShlW2hdKTtpZighdGhpcy5mYWtlRW1wdHkoaSkpaWYoZj0ibiI9PWI/dGhpcy5vcHRpb25zLnBhcmFncmFwaHk/YSgiPHA+IikuaHRtbChpLmh0bWwoKSk6aS5odG1sKCkrIjxici8+IjphKCI8IitiKyI+IikuaHRtbChpLmh0bWwoKSksaS5nZXQoMCk9PXRoaXMuJGVsZW1lbnQuZ2V0KDApfHxnKGYpKWkuaHRtbChmKTtlbHNle3ZhciBqPWkucHJvcCgiYXR0cmlidXRlcyIpO2lmKGYuYXR0cilmb3IodmFyIGs9MDtrPGoubGVuZ3RoO2srKykiY2xhc3MiIT09altrXS5uYW1lJiZmLmF0dHIoaltrXS5uYW1lLGpba10udmFsdWUpO3ZhciBsO3RoaXMub3B0aW9ucy5ibG9ja1N0eWxlcyYmdGhpcy5vcHRpb25zLmJsb2NrU3R5bGVzW2JdLHZvaWQgMD09PWwmJihsPXRoaXMub3B0aW9ucy5kZWZhdWx0QmxvY2tTdHlsZSk7dHJ5e2lmKGkuaGFzQ2xhc3MoYykmJmkuZ2V0KDApLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09PWIpZi5hZGRDbGFzcyhpLmF0dHIoImNsYXNzIikpLnJlbW92ZUNsYXNzKGMpO2Vsc2V7aWYodm9pZCAwPT09aS5hdHRyKCJjbGFzcyIpfHx2b2lkIDA9PT1sfHwhdGhpcy5vcHRpb25zLmJsb2NrU3R5bGVzVG9nZ2xlJiYidG9nZ2xlIiE9ZClmLmFkZENsYXNzKGkuYXR0cigiY2xhc3MiKSk7ZWxzZSBmb3IodmFyIG09aS5hdHRyKCJjbGFzcyIpLnNwbGl0KCIgIiksbj0wO248bS5sZW5ndGg7bisrKXt2YXIgbz1tW25dO3ZvaWQgMD09PWxbb10mJnZvaWQgMD09PWQ/Zi5hZGRDbGFzcyhvKTp2b2lkIDAhPT1sW29dJiYidG9nZ2xlIj09PWQmJmYuYWRkQ2xhc3MobyksaS5nZXQoMCkudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT09YiYmdm9pZCAwIT09bFtvXSYmZi5hZGRDbGFzcyhvKX0iKiIhPWMmJmYuYWRkQ2xhc3MoYyl9fWNhdGNoKHApe31nKGkpP2kuaHRtbChmKTppLnJlcGxhY2VXaXRoKGYpfX10aGlzLnVud3JhcFRleHQoKSx0aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSx0aGlzLnRyaWdnZXJFdmVudCgiZm9ybWF0QmxvY2siKSx0aGlzLnJlcG9zaXRpb25FZGl0b3IoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuYWxpZ249ZnVuY3Rpb24oYil7aWYodGhpcy5icm93c2VyLm1zaWUmJmEuRWRpdGFibGUuZ2V0SUV2ZXJzaW9uKCk8OSlyZXR1cm4gZG9jdW1lbnQuZXhlY0NvbW1hbmQoYiwhMSwhMSksITE7dGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCk7dmFyIGM9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpOyJqdXN0aWZ5TGVmdCI9PWI/Yj0ibGVmdCI6Imp1c3RpZnlSaWdodCI9PWI/Yj0icmlnaHQiOiJqdXN0aWZ5Q2VudGVyIj09Yj9iPSJjZW50ZXIiOiJqdXN0aWZ5RnVsbCI9PWImJihiPSJqdXN0aWZ5Iik7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspYShjW2RdKS5jc3MoInRleHQtYWxpZ24iLGIpO3RoaXMucmVwb3NpdGlvbkVkaXRvcigpLHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMudHJpZ2dlckV2ZW50KCJhbGlnbiIsW2JdKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5kZW50PWZ1bmN0aW9uKGIpe2lmKHRoaXMuYnJvd3Nlci5tc2llJiZhLkVkaXRhYmxlLmdldElFdmVyc2lvbigpPDkpcmV0dXJuIGI/ZG9jdW1lbnQuZXhlY0NvbW1hbmQoIm91dGRlbnQiLCExLCExKTpkb2N1bWVudC5leGVjQ29tbWFuZCgiaW5kZW50IiwhMSwhMSksITE7dmFyIGM9MjA7YiYmKGM9LTIwKSx0aGlzLnNhdmVTZWxlY3Rpb25CeU1hcmtlcnMoKSx0aGlzLndyYXBUZXh0KCksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCk7dmFyIGQ9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpO3RoaXMuc2F2ZVNlbGVjdGlvbkJ5TWFya2VycygpO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1hKGRbZV0pO2lmKGYucGFyZW50c1VudGlsKHRoaXMuJGVsZW1lbnQsImxpIikubGVuZ3RoPjAmJihmPWYuY2xvc2VzdCgibGkiKSksIkxJIj09PWYuZ2V0KDApLnRhZ05hbWUmJmEuaXNGdW5jdGlvbih0aGlzLmluZGVudExpKSliP3RoaXMub3V0ZGVudExpKGYpOnRoaXMuaW5kZW50TGkoZik7ZWxzZSBpZihmLmdldCgwKSE9dGhpcy4kZWxlbWVudC5nZXQoMCkpe3ZhciBnPXBhcnNlSW50KGYuY3NzKCJtYXJnaW4tbGVmdCIpLnJlcGxhY2UoL3B4LywiIiksMTApLGg9TWF0aC5tYXgoMCxnK2MpO2YuY3NzKCJtYXJnaW5MZWZ0IixoKX1lbHNle3ZhciBpPWEoIjxkaXY+IikuaHRtbChmLmh0bWwoKSk7Zi5odG1sKGkpLGkuY3NzKCJtYXJnaW5MZWZ0IixNYXRoLm1heCgwLGMpKX19dGhpcy51bndyYXBUZXh0KCksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5yZXBvc2l0aW9uRWRpdG9yKCksYnx8dGhpcy50cmlnZ2VyRXZlbnQoImluZGVudCIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5vdXRkZW50PWZ1bmN0aW9uKCl7dGhpcy5pbmRlbnQoITApLHRoaXMudHJpZ2dlckV2ZW50KCJvdXRkZW50Iil9LGEuRWRpdGFibGUucHJvdG90eXBlLmV4ZWNEZWZhdWx0PWZ1bmN0aW9uKGEsYil7ZG9jdW1lbnQuZXhlY0NvbW1hbmQoYSwhMSxiKSx0aGlzLnRyaWdnZXJFdmVudChhLFtdLCEwLCEwKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuX3N0YXJ0SW5EZWZhdWx0PWZ1bmN0aW9uKGEpe3RoaXMuZm9jdXMoKSxkb2N1bWVudC5leGVjQ29tbWFuZChhLCExLCEwKSx0aGlzLnJlZnJlc2hCdXR0b25zKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLl9zdGFydEluRm9udEV4ZWM9ZnVuY3Rpb24oYixjLGQpe3RoaXMuZm9jdXMoKTt0cnl7dmFyIGU9dGhpcy5nZXRSYW5nZSgpLGY9ZS5jbG9uZVJhbmdlKCk7Zi5jb2xsYXBzZSghMSk7dmFyIGc9YSgnPHNwYW4gZGF0YS1pbnNlcnRlZD0idHJ1ZSIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSIgc3R5bGU9IicrYisiOiAiK2QrJzsiPiYjODIwMzs8L3NwYW4+Jyxkb2N1bWVudCk7Zi5pbnNlcnROb2RlKGdbMF0pLGc9dGhpcy4kZWxlbWVudC5maW5kKCJbZGF0YS1pbnNlcnRlZF0iKSxnLnJlbW92ZUF0dHIoImRhdGEtaW5zZXJ0ZWQiKSx0aGlzLnNldFNlbGVjdGlvbihnLmdldCgwKSwxKX1jYXRjaChoKXt9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yZW1vdmVGb3JtYXQ9ZnVuY3Rpb24oKXtkb2N1bWVudC5leGVjQ29tbWFuZCgicmVtb3ZlRm9ybWF0IiwhMSwhMSksZG9jdW1lbnQuZXhlY0NvbW1hbmQoInVubGluayIsITEsITEpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pbmxpbmVTdHlsZT1mdW5jdGlvbihiLGMsZCl7aWYodGhpcy5icm93c2VyLndlYmtpdCYmImZvbnQtc2l6ZSIhPWIpe3ZhciBlPWZ1bmN0aW9uKGEpe3JldHVybiBhLmF0dHIoInN0eWxlIikuaW5kZXhPZigiZm9udC1zaXplIik+PTB9O3RoaXMuJGVsZW1lbnQuZmluZCgic3BhbiIpLmVhY2goZnVuY3Rpb24oYixjKXt2YXIgZD1hKGMpO2QuYXR0cigic3R5bGUiKSYmZShkKSYmKGQuZGF0YSgiZm9udC1zaXplIixkLmNzcygiZm9udC1zaXplIikpLGQuY3NzKCJmb250LXNpemUiLCIiKSl9KX1kb2N1bWVudC5leGVjQ29tbWFuZCgiZm9udFNpemUiLCExLDQpLHRoaXMuc2F2ZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMuYnJvd3Nlci53ZWJraXQmJiJmb250LXNpemUiIT1iJiZ0aGlzLiRlbGVtZW50LmZpbmQoInNwYW4iKS5lYWNoKGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YShjKTtkLmRhdGEoImZvbnQtc2l6ZSIpJiYoZC5jc3MoImZvbnQtc2l6ZSIsZC5kYXRhKCJmb250LXNpemUiKSksZC5yZW1vdmVEYXRhKCJmb250LXNpemUiKSl9KTt2YXIgZj1mdW5jdGlvbihjLGUpe3ZhciBmPWEoZSk7Zi5jc3MoYikhPWQmJmYuY3NzKGIsIiIpLCIiPT09Zi5hdHRyKCJzdHlsZSIpJiZmLnJlcGxhY2VXaXRoKGYuaHRtbCgpKX07dGhpcy4kZWxlbWVudC5maW5kKCJmb250IikuZWFjaChmdW5jdGlvbihjLGUpe3ZhciBnPWEoJzxzcGFuIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiIHN0eWxlPSInK2IrIjogIitkKyc7Ij4nK2EoZSkuaHRtbCgpKyI8L3NwYW4+Iik7YShlKS5yZXBsYWNlV2l0aChnKSxnLmZpbmQoInNwYW4iKS5lYWNoKGYpfSksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5yZXBvc2l0aW9uRWRpdG9yKCksdGhpcy50cmlnZ2VyRXZlbnQoYyxbZF0sITAsITApfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthLkVkaXRhYmxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuX2V2ZW50cyxkPWNbYV09Y1thXXx8W107ZC5wdXNoKGIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yYWlzZUV2ZW50PWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9W10pO3ZhciBjPSEwLGQ9dGhpcy5fZXZlbnRzW2FdO2lmKGQpZm9yKHZhciBlPTAsZj1kLmxlbmd0aDtmPmU7ZSsrKXt2YXIgZz1kW2VdLmFwcGx5KHRoaXMsYik7dm9pZCAwIT09ZyYmKGM9Zyl9cmV0dXJuIHZvaWQgMD09PWMmJihjPSEwKSxjfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthLkVkaXRhYmxlLnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKCl7dmFyIGE9IiI7cmV0dXJuIHdpbmRvdy5nZXRTZWxlY3Rpb24/YT13aW5kb3cuZ2V0U2VsZWN0aW9uKCk6ZG9jdW1lbnQuZ2V0U2VsZWN0aW9uP2E9ZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk6ZG9jdW1lbnQuc2VsZWN0aW9uJiYoYT1kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKS50ZXh0KSxhLnRvU3RyaW5nKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLnNlbGVjdGlvbkluRWRpdG9yPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRTZWxlY3Rpb25QYXJlbnQoKSxjPSExO3JldHVybiBiPT10aGlzLiRlbGVtZW50LmdldCgwKSYmKGM9ITApLGM9PT0hMSYmYShiKS5wYXJlbnRzKCkuZWFjaChhLnByb3h5KGZ1bmN0aW9uKGEsYil7Yj09dGhpcy4kZWxlbWVudC5nZXQoMCkmJihjPSEwKX0sdGhpcykpLGN9LGEuRWRpdGFibGUucHJvdG90eXBlLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3ZhciBhPSIiO3JldHVybiBhPXdpbmRvdy5nZXRTZWxlY3Rpb24/d2luZG93LmdldFNlbGVjdGlvbigpOmRvY3VtZW50LmdldFNlbGVjdGlvbj9kb2N1bWVudC5nZXRTZWxlY3Rpb24oKTpkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZ2V0UmFuZ2U9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFJhbmdlcygpO3JldHVybiBhLmxlbmd0aD4wP2FbMF06bnVsbH0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZ2V0UmFuZ2VzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRTZWxlY3Rpb24oKTtpZihhLmdldFJhbmdlQXQmJmEucmFuZ2VDb3VudCl7Zm9yKHZhciBiPVtdLGM9MDtjPGEucmFuZ2VDb3VudDtjKyspYi5wdXNoKGEuZ2V0UmFuZ2VBdChjKSk7cmV0dXJuIGJ9cmV0dXJuIGRvY3VtZW50LmNyZWF0ZVJhbmdlP1tkb2N1bWVudC5jcmVhdGVSYW5nZSgpXTpbXX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFNlbGVjdGlvbigpO3RyeXthLnJlbW92ZUFsbFJhbmdlcz9hLnJlbW92ZUFsbFJhbmdlcygpOmEuZW1wdHk/YS5lbXB0eSgpOmEuY2xlYXImJmEuY2xlYXIoKX1jYXRjaChiKXt9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5nZXRTZWxlY3Rpb25FbGVtZW50PWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRTZWxlY3Rpb24oKTtpZihiLnJhbmdlQ291bnQpe3ZhciBjPXRoaXMuZ2V0UmFuZ2UoKSxkPWMuc3RhcnRDb250YWluZXI7MSE9ZC5ub2RlVHlwZSYmKGQ9ZC5wYXJlbnROb2RlKTt2YXIgZT0hMTtkLmNoaWxkcmVuLmxlbmd0aD4wJiZkLmNoaWxkcmVuW2Muc3RhcnRPZmZzZXRdJiZhKGQuY2hpbGRyZW5bYy5zdGFydE9mZnNldF0pLnRleHQoKT09PXRoaXMudGV4dCgpJiYoZD1kLmNoaWxkcmVuW2Muc3RhcnRPZmZzZXRdLGU9ITApLCFlJiZkLmNoaWxkcmVuLmxlbmd0aD4wJiZhKGQuY2hpbGRyZW5bMF0pLnRleHQoKT09PXRoaXMudGV4dCgpJiZbIkJSIiwiSU1HIl0uaW5kZXhPZihkLmNoaWxkcmVuWzBdLnRhZ05hbWUpPDAmJihkPWQuY2hpbGRyZW5bMF0pO2Zvcih2YXIgZj1kO2YmJiJCT0RZIiE9Zi50YWdOYW1lOyl7aWYoZj09dGhpcy4kZWxlbWVudC5nZXQoMCkpcmV0dXJuIGQ7Zj1hKGYpLnBhcmVudCgpWzBdfX1yZXR1cm4gdGhpcy4kZWxlbWVudC5nZXQoMCl9LGEuRWRpdGFibGUucHJvdG90eXBlLmdldFNlbGVjdGlvblBhcmVudD1mdW5jdGlvbigpe3ZhciBiLGM9bnVsbDtyZXR1cm4gd2luZG93LmdldFNlbGVjdGlvbj8oYj13aW5kb3cuZ2V0U2VsZWN0aW9uKCksYi5yYW5nZUNvdW50JiYoYz1iLmdldFJhbmdlQXQoMCkuY29tbW9uQW5jZXN0b3JDb250YWluZXIsMSE9Yy5ub2RlVHlwZSYmKGM9Yy5wYXJlbnROb2RlKSkpOihiPWRvY3VtZW50LnNlbGVjdGlvbikmJiJDb250cm9sIiE9Yi50eXBlJiYoYz1iLmNyZWF0ZVJhbmdlKCkucGFyZW50RWxlbWVudCgpKSxudWxsIT1jJiYoYS5pbkFycmF5KHRoaXMuJGVsZW1lbnQuZ2V0KDApLGEoYykucGFyZW50cygpKT49MHx8Yz09dGhpcy4kZWxlbWVudC5nZXQoMCkpP2M6bnVsbH0sYS5FZGl0YWJsZS5wcm90b3R5cGUubm9kZUluUmFuZ2U9ZnVuY3Rpb24oYSxiKXt2YXIgYztpZihhLmludGVyc2VjdHNOb2RlKXJldHVybiBhLmludGVyc2VjdHNOb2RlKGIpO2M9Yi5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7dHJ5e2Muc2VsZWN0Tm9kZShiKX1jYXRjaChkKXtjLnNlbGVjdE5vZGVDb250ZW50cyhiKX1yZXR1cm4tMT09YS5jb21wYXJlQm91bmRhcnlQb2ludHMoUmFuZ2UuRU5EX1RPX1NUQVJULGMpJiYxPT1hLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhSYW5nZS5TVEFSVF9UT19FTkQsYyl9LGEuRWRpdGFibGUucHJvdG90eXBlLmdldEVsZW1lbnRGcm9tTm9kZT1mdW5jdGlvbihiKXtmb3IoMSE9Yi5ub2RlVHlwZSYmKGI9Yi5wYXJlbnROb2RlKTtudWxsIT09YiYmYS5FZGl0YWJsZS5WQUxJRF9OT0RFUy5pbmRleE9mKGIudGFnTmFtZSk8MDspYj1iLnBhcmVudE5vZGU7cmV0dXJuIG51bGwhPWImJiJMSSI9PWIudGFnTmFtZSYmYShiKS5maW5kKGEuRWRpdGFibGUuVkFMSURfTk9ERVMuam9pbigpKS5sZW5ndGg+MD9udWxsOmEubWFrZUFycmF5KGEoYikucGFyZW50cygpKS5pbmRleE9mKHRoaXMuJGVsZW1lbnQuZ2V0KDApKT49MD9iOm51bGx9LGEuRWRpdGFibGUucHJvdG90eXBlLm5leHROb2RlPWZ1bmN0aW9uKGEsYil7aWYoYS5oYXNDaGlsZE5vZGVzKCkpcmV0dXJuIGEuZmlyc3RDaGlsZDtmb3IoO2EmJiFhLm5leHRTaWJsaW5nJiZhIT1iOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYSYmYSE9Yj9hLm5leHRTaWJsaW5nOm51bGx9LGEuRWRpdGFibGUucHJvdG90eXBlLmdldFJhbmdlU2VsZWN0ZWROb2Rlcz1mdW5jdGlvbihhKXt2YXIgYj1bXSxjPWEuc3RhcnRDb250YWluZXIsZD1hLmVuZENvbnRhaW5lcjtpZihjPT1kJiYiVFIiIT1jLnRhZ05hbWUpe2lmKGMuaGFzQ2hpbGROb2RlcygpJiYwIT09Yy5jaGlsZHJlbi5sZW5ndGgpe2Zvcih2YXIgZT1jLmNoaWxkcmVuLGY9YS5zdGFydE9mZnNldDtmPGEuZW5kT2Zmc2V0O2YrKyllW2ZdJiZiLnB1c2goZVtmXSk7cmV0dXJuIDA9PT1iLmxlbmd0aCYmYi5wdXNoKGMpLGJ9cmV0dXJuW2NdfWlmKGM9PWQmJiJUUiI9PWMudGFnTmFtZSl7dmFyIGc9Yy5jaGlsZE5vZGVzLGg9YS5zdGFydE9mZnNldDtpZihnLmxlbmd0aD5oJiZoPj0wKXt2YXIgaT1nW2hdO2lmKCJURCI9PWkudGFnTmFtZXx8IlRIIj09aS50YWdOYW1lKXJldHVybltpXX19Zm9yKDtjJiZjIT1kOyliLnB1c2goYz10aGlzLm5leHROb2RlKGMsZCkpO2ZvcihjPWEuc3RhcnRDb250YWluZXI7YyYmYyE9YS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjspYi51bnNoaWZ0KGMpLGM9Yy5wYXJlbnROb2RlO3JldHVybiBifSxhLkVkaXRhYmxlLnByb3RvdHlwZS5nZXRTZWxlY3RlZE5vZGVzPWZ1bmN0aW9uKCl7aWYod2luZG93LmdldFNlbGVjdGlvbil7dmFyIGI9d2luZG93LmdldFNlbGVjdGlvbigpO2lmKCFiLmlzQ29sbGFwc2VkKXtmb3IodmFyIGM9dGhpcy5nZXRSYW5nZXMoKSxkPVtdLGU9MDtlPGMubGVuZ3RoO2UrKylkPWEubWVyZ2UoZCx0aGlzLmdldFJhbmdlU2VsZWN0ZWROb2RlcyhjW2VdKSk7cmV0dXJuIGR9aWYodGhpcy5zZWxlY3Rpb25JbkVkaXRvcigpKXt2YXIgZj1iLmdldFJhbmdlQXQoMCkuc3RhcnRDb250YWluZXI7cmV0dXJuIDM9PWYubm9kZVR5cGU/W2YucGFyZW50Tm9kZV06W2ZdfX1yZXR1cm5bXX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uRWxlbWVudHM9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldFNlbGVjdGVkTm9kZXMoKSxjPVtdO3JldHVybiBhLmVhY2goYixhLnByb3h5KGZ1bmN0aW9uKGEsYil7aWYobnVsbCE9PWIpe3ZhciBkPXRoaXMuZ2V0RWxlbWVudEZyb21Ob2RlKGIpO2MuaW5kZXhPZihkKTwwJiZkIT10aGlzLiRlbGVtZW50LmdldCgwKSYmbnVsbCE9PWQmJmMucHVzaChkKX19LHRoaXMpKSwwPT09Yy5sZW5ndGgmJmMucHVzaCh0aGlzLiRlbGVtZW50LmdldCgwKSksY30sYS5FZGl0YWJsZS5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uTGluaz1mdW5jdGlvbigpe3ZhciBiPXRoaXMuZ2V0U2VsZWN0aW9uTGlua3MoKTtyZXR1cm4gYi5sZW5ndGg+MD9hKGJbMF0pLmF0dHIoImhyZWYiKTpudWxsfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5zYXZlU2VsZWN0aW9uPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc2VsZWN0aW9uRGlzYWJsZWQpe3RoaXMuc2F2ZWRSYW5nZXM9W107Zm9yKHZhciBhPXRoaXMuZ2V0UmFuZ2VzKCksYj0wO2I8YS5sZW5ndGg7YisrKXRoaXMuc2F2ZWRSYW5nZXMucHVzaChhW2JdLmNsb25lUmFuZ2UoKSl9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yZXN0b3JlU2VsZWN0aW9uPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc2VsZWN0aW9uRGlzYWJsZWQpe3ZhciBhLGIsYz10aGlzLmdldFNlbGVjdGlvbigpO2lmKHRoaXMuc2F2ZWRSYW5nZXMmJnRoaXMuc2F2ZWRSYW5nZXMubGVuZ3RoKWZvcihjLnJlbW92ZUFsbFJhbmdlcygpLGE9MCxiPXRoaXMuc2F2ZWRSYW5nZXMubGVuZ3RoO2I+YTthKz0xKWMuYWRkUmFuZ2UodGhpcy5zYXZlZFJhbmdlc1thXSl9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pbnNlcnRNYXJrZXJzQXRQb2ludD1mdW5jdGlvbihhKXt2YXIgYj1hLmNsaWVudFgsYz1hLmNsaWVudFk7dGhpcy5yZW1vdmVNYXJrZXJzKCk7dmFyIGQsZT1udWxsO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQuY2FyZXRQb3NpdGlvbkZyb21Qb2ludD8oZD1kb2N1bWVudC5jYXJldFBvc2l0aW9uRnJvbVBvaW50KGIsYyksZT1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLGUuc2V0U3RhcnQoZC5vZmZzZXROb2RlLGQub2Zmc2V0KSxlLnNldEVuZChkLm9mZnNldE5vZGUsZC5vZmZzZXQpKToidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50LmNhcmV0UmFuZ2VGcm9tUG9pbnQmJihkPWRvY3VtZW50LmNhcmV0UmFuZ2VGcm9tUG9pbnQoYixjKSxlPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCksZS5zZXRTdGFydChkLnN0YXJ0Q29udGFpbmVyLGQuc3RhcnRPZmZzZXQpLGUuc2V0RW5kKGQuc3RhcnRDb250YWluZXIsZC5zdGFydE9mZnNldCkpLG51bGwhPT1lJiYidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdy5nZXRTZWxlY3Rpb24pe3ZhciBmPXdpbmRvdy5nZXRTZWxlY3Rpb24oKTtmLnJlbW92ZUFsbFJhbmdlcygpLGYuYWRkUmFuZ2UoZSl9ZWxzZSBpZigidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKXRyeXtlPWRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCksZS5tb3ZlVG9Qb2ludChiLGMpO3ZhciBnPWUuZHVwbGljYXRlKCk7Zy5tb3ZlVG9Qb2ludChiLGMpLGUuc2V0RW5kUG9pbnQoIkVuZFRvRW5kIixnKSxlLnNlbGVjdCgpfWNhdGNoKGgpe310aGlzLnBsYWNlTWFya2VyKGUsITAsMCksdGhpcy5wbGFjZU1hcmtlcihlLCExLDApfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc2VsZWN0aW9uRGlzYWJsZWQpe3RoaXMuZm9jdXMoKTt2YXIgYT10aGlzLmdldFJhbmdlcygpO3RoaXMucmVtb3ZlTWFya2VycygpO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXRoaXMucGxhY2VNYXJrZXIoYVtiXSwhMCxiKSx0aGlzLnBsYWNlTWFya2VyKGFbYl0sITEsYil9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5oYXNTZWxlY3Rpb25CeU1hcmtlcnM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50LmZpbmQoJy5mLW1hcmtlcltkYXRhLXR5cGU9InRydWUiXScpO3JldHVybiBhLmxlbmd0aD4wPyEwOiExfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzPWZ1bmN0aW9uKGIpe2lmKHZvaWQgMD09PWImJihiPSEwKSwhdGhpcy5zZWxlY3Rpb25EaXNhYmxlZCl7dmFyIGM9dGhpcy4kZWxlbWVudC5maW5kKCcuZi1tYXJrZXJbZGF0YS10eXBlPSJ0cnVlIl0nKTtpZigwPT09Yy5sZW5ndGgpcmV0dXJuITE7dGhpcy4kZWxlbWVudC5pcygiOmZvY3VzIil8fHRoaXMuYnJvd3Nlci5tc2llfHx0aGlzLiRlbGVtZW50LmZvY3VzKCk7dmFyIGQ9dGhpcy5nZXRTZWxlY3Rpb24oKTshYiYmMT09PWMubGVuZ3RoJiYxPT09ZC5yYW5nZUNvdW50JiZ0aGlzLmdldFJhbmdlKCkuY29sbGFwc2VkJiZhKGNbMF0pLmF0dHIoImRhdGEtY29sbGFwc2VkIil8fCh0aGlzLmNsZWFyU2VsZWN0aW9uKCksYj0hMCk7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmLGc9YShjW2VdKS5kYXRhKCJpZCIpLGg9Y1tlXSxpPXRoaXMuJGVsZW1lbnQuZmluZCgnLmYtbWFya2VyW2RhdGEtdHlwZT0iZmFsc2UiXVtkYXRhLWlkPSInK2crJyJdJyk7aWYoZj1iP2RvY3VtZW50LmNyZWF0ZVJhbmdlKCk6dGhpcy5nZXRSYW5nZSgpLGkubGVuZ3RoPjApe2k9aVswXTt0cnl7Zi5zZXRTdGFydEJlZm9yZShoKSxmLnNldEVuZEJlZm9yZShpKX1jYXRjaChqKXt9fWImJmQuYWRkUmFuZ2UoZil9dGhpcy5yZW1vdmVNYXJrZXJzKCl9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5zZXRTZWxlY3Rpb249ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5nZXRTZWxlY3Rpb24oKTtpZihlKXt0aGlzLmNsZWFyU2VsZWN0aW9uKCk7dHJ5e2N8fChjPWEpLHZvaWQgMD09PWImJihiPTApLHZvaWQgMD09PWQmJihkPWIpO3ZhciBmPXRoaXMuZ2V0UmFuZ2UoKTtmLnNldFN0YXJ0KGEsYiksZi5zZXRFbmQoYyxkKSxlLmFkZFJhbmdlKGYpfWNhdGNoKGcpe319fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5idWlsZE1hcmtlcj1mdW5jdGlvbihiLGMsZCl7cmV0dXJuIHZvaWQgMD09PWQmJihkPSIiKSxhKCc8c3BhbiBjbGFzcz0iZi1tYXJrZXIiJytkKycgc3R5bGU9ImRpc3BsYXk6bm9uZTsgbGluZS1oZWlnaHQ6IDA7IiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIiBkYXRhLWlkPSInK2MrJyIgZGF0YS10eXBlPSInK2IrJyI+Jyxkb2N1bWVudClbMF19LGEuRWRpdGFibGUucHJvdG90eXBlLnBsYWNlTWFya2VyPWZ1bmN0aW9uKGEsYixjKXt0cnl7dmFyIGQ9YS5jbG9uZVJhbmdlKCk7ZC5jb2xsYXBzZShiKTt2YXIgZT0iIjthLmNvbGxhcHNlZCYmKGU9JyBkYXRhLWNvbGxhcHNlZD0idHJ1ZSInKSxkLmluc2VydE5vZGUodGhpcy5idWlsZE1hcmtlcihiLGMsZSkpfWNhdGNoKGYpe31yZXR1cm4gbnVsbH0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVtb3ZlTWFya2Vycz1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQuZmluZCgiLmYtbWFya2VyIikucmVtb3ZlKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLmdldFNlbGVjdGlvblRleHRJbmZvPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZD0hMSxlPSExO2lmKHdpbmRvdy5nZXRTZWxlY3Rpb24pe3ZhciBmPXdpbmRvdy5nZXRTZWxlY3Rpb24oKTtmLnJhbmdlQ291bnQmJihiPWYuZ2V0UmFuZ2VBdCgwKSxjPWIuY2xvbmVSYW5nZSgpLGMuc2VsZWN0Tm9kZUNvbnRlbnRzKGEpLGMuc2V0RW5kKGIuc3RhcnRDb250YWluZXIsYi5zdGFydE9mZnNldCksZD0iIj09PWMudG9TdHJpbmcoKSxjLnNlbGVjdE5vZGVDb250ZW50cyhhKSxjLnNldFN0YXJ0KGIuZW5kQ29udGFpbmVyLGIuZW5kT2Zmc2V0KSxlPSIiPT09Yy50b1N0cmluZygpKX1lbHNlIGRvY3VtZW50LnNlbGVjdGlvbiYmIkNvbnRyb2wiIT1kb2N1bWVudC5zZWxlY3Rpb24udHlwZSYmKGI9ZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCksYz1iLmR1cGxpY2F0ZSgpLGMubW92ZVRvRWxlbWVudFRleHQoYSksYy5zZXRFbmRQb2ludCgiRW5kVG9TdGFydCIsYiksZD0iIj09PWMudGV4dCxjLm1vdmVUb0VsZW1lbnRUZXh0KGEpLGMuc2V0RW5kUG9pbnQoIlN0YXJ0VG9FbmQiLGIpLGU9IiI9PT1jLnRleHQpO3JldHVybnthdFN0YXJ0OmQsYXRFbmQ6ZX19LGEuRWRpdGFibGUucHJvdG90eXBlLmVuZHNXaXRoPWZ1bmN0aW9uKGEsYil7cmV0dXJuLTEhPT1hLmluZGV4T2YoYixhLmxlbmd0aC1iLmxlbmd0aCl9fShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EuRWRpdGFibGUuaGV4VG9SR0I9ZnVuY3Rpb24oYSl7dmFyIGI9L14jPyhbYS1mXGRdKShbYS1mXGRdKShbYS1mXGRdKSQvaTthPWEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBiK2IrYytjK2QrZH0pO3ZhciBjPS9eIz8oW2EtZlxkXXsyfSkoW2EtZlxkXXsyfSkoW2EtZlxkXXsyfSkkL2kuZXhlYyhhKTtyZXR1cm4gYz97cjpwYXJzZUludChjWzFdLDE2KSxnOnBhcnNlSW50KGNbMl0sMTYpLGI6cGFyc2VJbnQoY1szXSwxNil9Om51bGx9LGEuRWRpdGFibGUuaGV4VG9SR0JTdHJpbmc9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5oZXhUb1JHQihhKTtyZXR1cm4gYj8icmdiKCIrYi5yKyIsICIrYi5nKyIsICIrYi5iKyIpIjoiIn0sYS5FZGl0YWJsZS5SR0JUb0hleD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybigiMCIrcGFyc2VJbnQoYSwxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMil9dHJ5e3JldHVybiBhJiYidHJhbnNwYXJlbnQiIT09YT8vXiNbMC05QS1GXXs2fSQvaS50ZXN0KGEpP2E6KGE9YS5tYXRjaCgvXnJnYlwoKFxkKyksXHMqKFxkKyksXHMqKFxkKylcKSQvKSwoIiMiK2IoYVsxXSkrYihhWzJdKStiKGFbM10pKS50b1VwcGVyQ2FzZSgpKToiIn1jYXRjaChjKXtyZXR1cm4gbnVsbH19LGEuRWRpdGFibGUuZ2V0SUV2ZXJzaW9uPWZ1bmN0aW9uKCl7dmFyIGEsYixjPS0xO3JldHVybiJNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXIiPT1uYXZpZ2F0b3IuYXBwTmFtZT8oYT1uYXZpZ2F0b3IudXNlckFnZW50LGI9bmV3IFJlZ0V4cCgiTVNJRSAoWzAtOV17MSx9W1xcLjAtOV17MCx9KSIpLG51bGwhPT1iLmV4ZWMoYSkmJihjPXBhcnNlRmxvYXQoUmVnRXhwLiQxKSkpOiJOZXRzY2FwZSI9PW5hdmlnYXRvci5hcHBOYW1lJiYoYT1uYXZpZ2F0b3IudXNlckFnZW50LGI9bmV3IFJlZ0V4cCgiVHJpZGVudC8uKnJ2OihbMC05XXsxLH1bXFwuMC05XXswLH0pIiksbnVsbCE9PWIuZXhlYyhhKSYmKGM9cGFyc2VGbG9hdChSZWdFeHAuJDEpKSksY30sYS5FZGl0YWJsZS5icm93c2VyPWZ1bmN0aW9uKCl7dmFyIGE9e307aWYodGhpcy5nZXRJRXZlcnNpb24oKT4wKWEubXNpZT0hMDtlbHNle3ZhciBiPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxjPS8oY2hyb21lKVsgXC9dKFtcdy5dKykvLmV4ZWMoYil8fC8od2Via2l0KVsgXC9dKFtcdy5dKykvLmV4ZWMoYil8fC8ob3BlcmEpKD86Lip2ZXJzaW9ufClbIFwvXShbXHcuXSspLy5leGVjKGIpfHwvKG1zaWUpIChbXHcuXSspLy5leGVjKGIpfHxiLmluZGV4T2YoImNvbXBhdGlibGUiKTwwJiYvKG1vemlsbGEpKD86Lio/IHJ2OihbXHcuXSspfCkvLmV4ZWMoYil8fFtdLGQ9e2Jyb3dzZXI6Y1sxXXx8IiIsdmVyc2lvbjpjWzJdfHwiMCJ9O2NbMV0mJihhW2QuYnJvd3Nlcl09ITApLHBhcnNlSW50KGQudmVyc2lvbiwxMCk8OSYmYS5tc2llJiYoYS5vbGRNc2llPSEwKSxhLmNocm9tZT9hLndlYmtpdD0hMDphLndlYmtpdCYmKGEuc2FmYXJpPSEwKX1yZXR1cm4gYX0sYS5FZGl0YWJsZS5pc0FycmF5PWZ1bmN0aW9uKGEpe3JldHVybiBhJiYhYS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgibGVuZ3RoIikmJiJvYmplY3QiPT10eXBlb2YgYSYmIm51bWJlciI9PXR5cGVvZiBhLmxlbmd0aH0sYS5FZGl0YWJsZS51bmlxPWZ1bmN0aW9uKGIpe3JldHVybiBhLmdyZXAoYixmdW5jdGlvbihjLGQpe3JldHVybiBkPT1hLmluQXJyYXkoYyxiKX0pfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthLkVkaXRhYmxlLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKGIpe2lmKHZvaWQgMCE9PWIpe2lmKHRoaXMub3B0aW9ucy5pbmxpbmVNb2RlfHx0aGlzLm9wdGlvbnMuZWRpdEluUG9wdXApaWYobnVsbCE9PWImJiJ0b3VjaGVuZCIhPT1iLnR5cGUpe3ZhciBjPWIucGFnZVgsZD1iLnBhZ2VZO2M8dGhpcy4kZWxlbWVudC5vZmZzZXQoKS5sZWZ0JiYoYz10aGlzLiRlbGVtZW50Lm9mZnNldCgpLmxlZnQpLGM+dGhpcy4kZWxlbWVudC5vZmZzZXQoKS5sZWZ0K3RoaXMuJGVsZW1lbnQud2lkdGgoKSYmKGM9dGhpcy4kZWxlbWVudC5vZmZzZXQoKS5sZWZ0K3RoaXMuJGVsZW1lbnQud2lkdGgoKSksZDx0aGlzLiRlbGVtZW50Lm9mZnNldC50b3AmJihkPXRoaXMuJGVsZW1lbnQub2Zmc2V0KCkudG9wKSxkPnRoaXMuJGVsZW1lbnQub2Zmc2V0KCkudG9wK3RoaXMuJGVsZW1lbnQuaGVpZ2h0KCkmJihkPXRoaXMuJGVsZW1lbnQub2Zmc2V0KCkudG9wK3RoaXMuJGVsZW1lbnQuaGVpZ2h0KCkpLDIwPmMmJihjPTIwKSwwPmQmJihkPTApLHRoaXMuc2hvd0J5Q29vcmRpbmF0ZXMoYyxkKSxhKCIuZnJvYWxhLWVkaXRvcjpub3QoLmYtYmFzaWMpIikuaGlkZSgpLHRoaXMuJGVkaXRvci5zaG93KCksMCE9PXRoaXMub3B0aW9ucy5idXR0b25zLmxlbmd0aHx8dGhpcy5vcHRpb25zLmVkaXRJblBvcHVwfHx0aGlzLiRlZGl0b3IuaGlkZSgpfWVsc2UgYSgiLmZyb2FsYS1lZGl0b3I6bm90KC5mLWJhc2ljKSIpLmhpZGUoKSx0aGlzLiRlZGl0b3Iuc2hvdygpLHRoaXMucmVwb3NpdGlvbkVkaXRvcigpO3RoaXMuaGlkZVBvcHVwcygpLHRoaXMub3B0aW9ucy5lZGl0SW5Qb3B1cHx8dGhpcy5zaG93RWRpdFBvcHVwV3JhcHBlcigpLHRoaXMuJGJ0dG5fd3JhcHBlci5zaG93KCksdGhpcy5yZWZyZXNoQnV0dG9ucygpLHRoaXMuaW1hZ2VNb2RlPSExfX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaGlkZURyb3Bkb3ducz1mdW5jdGlvbigpe3RoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCIuZnItZHJvcGRvd24gLmZyLXRyaWdnZXIiKS5yZW1vdmVDbGFzcygiYWN0aXZlIiksdGhpcy4kYnR0bl93cmFwcGVyLmZpbmQoIi5mci1kcm9wZG93biAuZnItdHJpZ2dlciIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluaXRpYWxpemVkPyh2b2lkIDA9PT1hJiYoYT0hMCksYT90aGlzLmhpZGVPdGhlckVkaXRvcnMoKToodGhpcy5jbG9zZUltYWdlTW9kZSgpLHRoaXMuaW1hZ2VNb2RlPSExKSx0aGlzLiRwb3B1cF9lZGl0b3IuaGlkZSgpLHRoaXMuaGlkZVBvcHVwcyghMSksdGhpcy5oaWRlRHJvcGRvd25zKCksdm9pZCh0aGlzLmxpbms9ITEpKTohMX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaGlkZU90aGVyRWRpdG9ycz1mdW5jdGlvbigpe2Zvcih2YXIgYj0xO2I8PWEuRWRpdGFibGUuY291bnQ7YisrKWIhPXRoaXMuX2lkJiZhKHdpbmRvdykudHJpZ2dlcigiaGlkZS4iK2IpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5oaWRlQnR0bldyYXBwZXI9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuaW5saW5lTW9kZSYmdGhpcy4kYnR0bl93cmFwcGVyLmhpZGUoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc2hvd0J0dG5XcmFwcGVyPWZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmlubGluZU1vZGUmJnRoaXMuJGJ0dG5fd3JhcHBlci5zaG93KCl9LGEuRWRpdGFibGUucHJvdG90eXBlLnNob3dFZGl0UG9wdXBXcmFwcGVyPWZ1bmN0aW9uKCl7dGhpcy4kZWRpdF9wb3B1cF93cmFwcGVyJiYodGhpcy4kZWRpdF9wb3B1cF93cmFwcGVyLnNob3coKSxzZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLiRlZGl0X3BvcHVwX3dyYXBwZXIuZmluZCgiaW5wdXQiKS52YWwodGhpcy4kZWxlbWVudC50ZXh0KCkpLmZvY3VzKCkuc2VsZWN0KCl9LHRoaXMpLDEpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaGlkZVBvcHVwcz1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT0hMCksYSYmdGhpcy5oaWRlQnR0bldyYXBwZXIoKSx0aGlzLnJhaXNlRXZlbnQoImhpZGVQb3B1cHMiKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc2hvd0VkaXRQb3B1cD1mdW5jdGlvbigpe3RoaXMuc2hvd0VkaXRQb3B1cFdyYXBwZXIoKX19KGpRdWVyeSksZnVuY3Rpb24oYSl7YS5FZGl0YWJsZS5wcm90b3R5cGUuZ2V0Qm91bmRpbmdSZWN0PWZ1bmN0aW9uKCl7dmFyIGI7aWYodGhpcy5pc0xpbmspe2I9e307dmFyIGM9dGhpcy4kZWxlbWVudDtiLmxlZnQ9Yy5vZmZzZXQoKS5sZWZ0LWEod2luZG93KS5zY3JvbGxMZWZ0KCksYi50b3A9Yy5vZmZzZXQoKS50b3AtYSh3aW5kb3cpLnNjcm9sbFRvcCgpLGIud2lkdGg9Yy5vdXRlcldpZHRoKCksYi5oZWlnaHQ9cGFyc2VJbnQoYy5jc3MoInBhZGRpbmctdG9wIikucmVwbGFjZSgicHgiLCIiKSwxMCkrYy5oZWlnaHQoKSxiLnJpZ2h0PTEsYi5ib3R0b209MSxiLm9rPSEwfWVsc2UgaWYodGhpcy5nZXRSYW5nZSgpLmNvbGxhcHNlZCl7dmFyIGQ9YSh0aGlzLmdldFNlbGVjdGlvbkVsZW1lbnQoKSk7dGhpcy5zYXZlU2VsZWN0aW9uQnlNYXJrZXJzKCk7dmFyIGU9dGhpcy4kZWxlbWVudC5maW5kKCIuZi1tYXJrZXI6Zmlyc3QiKTtlLmNzcygiZGlzcGxheSIsImlubGluZSIpO3ZhciBmPWUub2Zmc2V0KCk7ZS5jc3MoImRpc3BsYXkiLCJub25lIiksYj17fSxiLmxlZnQ9Zi5sZWZ0LWEod2luZG93KS5zY3JvbGxMZWZ0KCksYi53aWR0aD0wLGIuaGVpZ2h0PShwYXJzZUludChkLmNzcygibGluZS1oZWlnaHQiKS5yZXBsYWNlKCJweCIsIiIpLDEwKXx8MTApLTEwLWEod2luZG93KS5zY3JvbGxUb3AoKSxiLnRvcD1mLnRvcCxiLnJpZ2h0PTEsYi5ib3R0b209MSxiLm9rPSEwLHRoaXMucmVtb3ZlTWFya2VycygpfWVsc2UgYj10aGlzLmdldFJhbmdlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIGJ9LGEuRWRpdGFibGUucHJvdG90eXBlLnJlcG9zaXRpb25FZGl0b3I9ZnVuY3Rpb24oYil7dmFyIGMsZCxlO2lmKHRoaXMub3B0aW9ucy5pbmxpbmVNb2RlfHxiKXtpZihjPXRoaXMuZ2V0Qm91bmRpbmdSZWN0KCksdGhpcy5zaG93QnR0bldyYXBwZXIoKSxjLm9rfHxjLmxlZnQ+PTAmJmMudG9wPj0wJiZjLnJpZ2h0PjAmJmMuYm90dG9tPjApZD1jLmxlZnQrYy53aWR0aC8yLGU9Yy50b3ArYy5oZWlnaHQsZCs9YSh3aW5kb3cpLnNjcm9sbExlZnQoKSxlKz1hKHdpbmRvdykuc2Nyb2xsVG9wKCksdGhpcy5zaG93QnlDb29yZGluYXRlcyhkLGUpO2Vsc2UgaWYodGhpcy5vcHRpb25zLmFsd2F5c1Zpc2libGUpdGhpcy5oaWRlKCk7ZWxzZXt2YXIgZj10aGlzLiRlbGVtZW50Lm9mZnNldCgpO3RoaXMuc2hvd0J5Q29vcmRpbmF0ZXMoZi5sZWZ0LGYudG9wKzEwKX0wPT09dGhpcy5vcHRpb25zLmJ1dHRvbnMubGVuZ3RoJiZ0aGlzLmhpZGUoKX19LGEuRWRpdGFibGUucHJvdG90eXBlLnNob3dCeUNvb3JkaW5hdGVzPWZ1bmN0aW9uKGIsYyl7Yi09MjAsYys9MTU7dmFyIGQ9TWF0aC5tYXgodGhpcy4kcG9wdXBfZWRpdG9yLndpZHRoKCksMjUwKTtiK2Q+PWEod2luZG93KS53aWR0aCgpLTUwJiZiKzQwLWQ+MD8odGhpcy4kcG9wdXBfZWRpdG9yLmFkZENsYXNzKCJyaWdodC1zaWRlIiksYj1hKHdpbmRvdykud2lkdGgoKS0oYis0MCksdGhpcy4kcG9wdXBfZWRpdG9yLmNzcygidG9wIixjKSx0aGlzLiRwb3B1cF9lZGl0b3IuY3NzKCJyaWdodCIsYiksdGhpcy4kcG9wdXBfZWRpdG9yLmNzcygibGVmdCIsImF1dG8iKSk6YitkPGEod2luZG93KS53aWR0aCgpLTUwPyh0aGlzLiRwb3B1cF9lZGl0b3IucmVtb3ZlQ2xhc3MoInJpZ2h0LXNpZGUiKSx0aGlzLiRwb3B1cF9lZGl0b3IuY3NzKCJ0b3AiLGMpLHRoaXMuJHBvcHVwX2VkaXRvci5jc3MoImxlZnQiLGIpLHRoaXMuJHBvcHVwX2VkaXRvci5jc3MoInJpZ2h0IiwiYXV0byIpKToodGhpcy4kcG9wdXBfZWRpdG9yLnJlbW92ZUNsYXNzKCJyaWdodC1zaWRlIiksdGhpcy4kcG9wdXBfZWRpdG9yLmNzcygidG9wIixjKSx0aGlzLiRwb3B1cF9lZGl0b3IuY3NzKCJsZWZ0IixNYXRoLm1heChhKHdpbmRvdykud2lkdGgoKS1kLDEwKS8yKSx0aGlzLiRwb3B1cF9lZGl0b3IuY3NzKCJyaWdodCIsImF1dG8iKSksdGhpcy4kcG9wdXBfZWRpdG9yLnNob3coKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucG9zaXRpb25Qb3B1cD1mdW5jdGlvbihiKXtpZihhKHRoaXMuJGVkaXRvci5maW5kKCdidXR0b24uZnItYnR0bltkYXRhLWNtZD0iJytiKyciXScpKS5sZW5ndGgpe3ZhciBjPXRoaXMuJGVkaXRvci5maW5kKCdidXR0b24uZnItYnR0bltkYXRhLWNtZD0iJytiKyciXScpLGQ9Yy53aWR0aCgpLGU9Yy5oZWlnaHQoKS0xNSxmPWMub2Zmc2V0KCkubGVmdCtkLzIsZz1jLm9mZnNldCgpLnRvcCtlO3RoaXMuc2hvd0J5Q29vcmRpbmF0ZXMoZixnKX19fShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EuRWRpdGFibGUuaW1hZ2VfY29tbWFuZHM9e2Zsb2F0SW1hZ2VMZWZ0Ont0aXRsZToiRmxvYXQgTGVmdCIsaWNvbjp7dHlwZToiZm9udCIsdmFsdWU6ImZhIGZhLWFsaWduLWxlZnQifX0sZmxvYXRJbWFnZU5vbmU6e3RpdGxlOiJGbG9hdCBOb25lIixpY29uOnt0eXBlOiJmb250Iix2YWx1ZToiZmEgZmEtYWxpZ24tanVzdGlmeSJ9fSxmbG9hdEltYWdlUmlnaHQ6e3RpdGxlOiJGbG9hdCBSaWdodCIsaWNvbjp7dHlwZToiZm9udCIsdmFsdWU6ImZhIGZhLWFsaWduLXJpZ2h0In19LGxpbmtJbWFnZTp7dGl0bGU6Ikluc2VydCBMaW5rIixpY29uOnt0eXBlOiJmb250Iix2YWx1ZToiZmEgZmEtbGluayJ9fSxyZXBsYWNlSW1hZ2U6e3RpdGxlOiJSZXBsYWNlIEltYWdlIixpY29uOnt0eXBlOiJmb250Iix2YWx1ZToiZmEgZmEtZXhjaGFuZ2UifX0scmVtb3ZlSW1hZ2U6e3RpdGxlOiJSZW1vdmUgSW1hZ2UiLGljb246e3R5cGU6ImZvbnQiLHZhbHVlOiJmYSBmYS10cmFzaC1vIn19fSxhLkVkaXRhYmxlLkRFRkFVTFRTPWEuZXh0ZW5kKGEuRWRpdGFibGUuREVGQVVMVFMse2FsbG93ZWRJbWFnZVR5cGVzOlsianBlZyIsImpwZyIsInBuZyIsImdpZiJdLGltYWdlQnV0dG9uczpbImZsb2F0SW1hZ2VMZWZ0IiwiZmxvYXRJbWFnZU5vbmUiLCJmbG9hdEltYWdlUmlnaHQiLCJsaW5rSW1hZ2UiLCJyZXBsYWNlSW1hZ2UiLCJyZW1vdmVJbWFnZSJdLGltYWdlRGVsZXRlVVJMOm51bGwsaW1hZ2VEZWxldGVQYXJhbXM6e30saW1hZ2VNb3ZlOiEwLGltYWdlUmVzaXplOiEwLGltYWdlTGluazohMCxpbWFnZVRpdGxlOiEwLGltYWdlVXBsb2FkOiEwLGltYWdlVXBsb2FkUGFyYW1zOnt9LGltYWdlVXBsb2FkUGFyYW06ImZpbGUiLGltYWdlVXBsb2FkVG9TMzohMSxpbWFnZVVwbG9hZFVSTDoiaHR0cDovL2kuZnJvYWxhLmNvbS91cGxvYWQiLG1heEltYWdlU2l6ZToxMDQ4NTc2MCxwYXN0ZUltYWdlOiEwLHRleHROZWFySW1hZ2U6ITB9KSxhLkVkaXRhYmxlLnByb3RvdHlwZS5oaWRlSW1hZ2VFZGl0b3JQb3B1cD1mdW5jdGlvbigpe3RoaXMuJGltYWdlX2VkaXRvciYmdGhpcy4kaW1hZ2VfZWRpdG9yLmhpZGUoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc2hvd0ltYWdlRWRpdG9yUG9wdXA9ZnVuY3Rpb24oKXt0aGlzLiRpbWFnZV9lZGl0b3ImJnRoaXMuJGltYWdlX2VkaXRvci5zaG93KCksdGhpcy5vcHRpb25zLmltYWdlTW92ZXx8dGhpcy4kZWxlbWVudC5hdHRyKCJjb250ZW50ZWRpdGFibGUiLCExKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc2hvd0ltYWdlV3JhcHBlcj1mdW5jdGlvbigpe3RoaXMuJGltYWdlX3dyYXBwZXImJnRoaXMuJGltYWdlX3dyYXBwZXIuc2hvdygpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5oaWRlSW1hZ2VXcmFwcGVyPWZ1bmN0aW9uKGEpe3RoaXMuJGltYWdlX3dyYXBwZXImJih0aGlzLiRlbGVtZW50LmF0dHIoImRhdGEtcmVzaXplIil8fGF8fCh0aGlzLmNsb3NlSW1hZ2VNb2RlKCksdGhpcy5pbWFnZU1vZGU9ITEpLHRoaXMuJGltYWdlX3dyYXBwZXIuaGlkZSgpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc2hvd0luc2VydEltYWdlPWZ1bmN0aW9uKCl7dGhpcy5oaWRlUG9wdXBzKCksdGhpcy5zaG93SW1hZ2VXcmFwcGVyKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLnNob3dJbWFnZUVkaXRvcj1mdW5jdGlvbigpe3RoaXMuaGlkZVBvcHVwcygpLHRoaXMuc2hvd0ltYWdlRWRpdG9yUG9wdXAoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5zZXJ0SW1hZ2VIVE1MPWZ1bmN0aW9uKCl7dmFyIGI9JzxkaXYgY2xhc3M9ImZyb2FsYS1wb3B1cCBmcm9hbGEtaW1hZ2UtcG9wdXAiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+PGg0PjxzcGFuIGRhdGEtdGV4dD0idHJ1ZSI+SW5zZXJ0IGltYWdlPC9zcGFuPjxzcGFuIGRhdGEtdGV4dD0idHJ1ZSI+VXBsb2FkaW5nIGltYWdlPC9zcGFuPjxpIHRpdGxlPSJDYW5jZWwiIGNsYXNzPSJmYSBmYS10aW1lcyIgaWQ9ImYtaW1hZ2UtY2xvc2UtJyt0aGlzLl9pZCsnIj48L2k+PC9oND4nO3JldHVybiBiKz0nPGRpdiBpZD0iZi1pbWFnZS1saXN0LScrdGhpcy5faWQrJyI+Jyx0aGlzLm9wdGlvbnMuaW1hZ2VVcGxvYWQmJihiKz0nPGRpdiBjbGFzcz0iZi1wb3B1cC1saW5lIGRyb3AtdXBsb2FkIj4nLGIrPSc8ZGl2IGNsYXNzPSJmLXVwbG9hZCIgaWQ9ImYtdXBsb2FkLWRpdi0nK3RoaXMuX2lkKyciPjxzdHJvbmcgZGF0YS10ZXh0PSJ0cnVlIj5Ecm9wIEltYWdlPC9zdHJvbmc+PGJyPig8c3BhbiBkYXRhLXRleHQ9InRydWUiPm9yIGNsaWNrPC9zcGFuPik8Zm9ybSB0YXJnZXQ9ImZyYW1lLScrdGhpcy5faWQrJyIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSIgZW5jb2Rpbmc9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0iJyt0aGlzLm9wdGlvbnMuaW1hZ2VVcGxvYWRVUkwrJyIgbWV0aG9kPSJwb3N0IiBpZD0iZi11cGxvYWQtZm9ybS0nK3RoaXMuX2lkKyciPjxpbnB1dCBpZD0iZi1maWxlLXVwbG9hZC0nK3RoaXMuX2lkKyciIHR5cGU9ImZpbGUiIG5hbWU9IicrdGhpcy5vcHRpb25zLmltYWdlVXBsb2FkUGFyYW0rJyIgYWNjZXB0PSJpbWFnZS8qIj48L2Zvcm0+PC9kaXY+Jyx0aGlzLmJyb3dzZXIubXNpZSYmYS5FZGl0YWJsZS5nZXRJRXZlcnNpb24oKTw9OSYmKGIrPSc8aWZyYW1lIGlkPSJmcmFtZS0nK3RoaXMuX2lkKyciIG5hbWU9ImZyYW1lLScrdGhpcy5faWQrJyIgc3JjPSJqYXZhc2NyaXB0OmZhbHNlOyIgc3R5bGU9IndpZHRoOjA7IGhlaWdodDowOyBib3JkZXI6MHB4IHNvbGlkICNGRkY7IHBvc2l0aW9uOiBmaXhlZDsgei1pbmRleDogLTE7Ij48L2lmcmFtZT4nKSxiKz0iPC9kaXY+IiksdGhpcy5vcHRpb25zLmltYWdlTGluayYmKGIrPSc8ZGl2IGNsYXNzPSJmLXBvcHVwLWxpbmUiPjxsYWJlbD48c3BhbiBkYXRhLXRleHQ9InRydWUiPkVudGVyIFVSTDwvc3Bhbj46IDwvbGFiZWw+PGlucHV0IGlkPSJmLWltYWdlLXVybC0nK3RoaXMuX2lkKyciIHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJodHRwOi8vZXhhbXBsZS5jb20iPjxidXR0b24gY2xhc3M9ImYtYnJvd3NlIiBpZD0iZi1icm93c2VyLScrdGhpcy5faWQrJyI+PGkgY2xhc3M9ImZhIGZhLXNlYXJjaCI+PC9pPjwvYnV0dG9uPjxidXR0b24gZGF0YS10ZXh0PSJ0cnVlIiBjbGFzcz0iZi1vayIgaWQ9ImYtaW1hZ2Utb2stJyt0aGlzLl9pZCsnIj5PSzwvYnV0dG9uPjwvZGl2PicpLGIrPSI8L2Rpdj4iLGIrPSc8cCBjbGFzcz0iZi1wcm9ncmVzcyIgaWQ9ImYtcHJvZ3Jlc3MtJyt0aGlzLl9pZCsnIj48c3Bhbj48L3NwYW4+PC9wPicsYis9IjwvZGl2PiJ9LGEuRWRpdGFibGUucHJvdG90eXBlLmlGcmFtZUxvYWQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRpbWFnZV93cmFwcGVyLmZpbmQoImlmcmFtZSNmcmFtZS0iK3RoaXMuX2lkKTtpZighYS5hdHRyKCJkYXRhLWxvYWRlZCIpKXJldHVybiBhLmF0dHIoImRhdGEtbG9hZGVkIiwhMCksITE7dHJ5e3ZhciBiPXRoaXMuJGltYWdlX3dyYXBwZXIuZmluZCgiI2YtdXBsb2FkLWZvcm0tIit0aGlzLl9pZCk7aWYodGhpcy5vcHRpb25zLmltYWdlVXBsb2FkVG9TMyl7dmFyIGM9Yi5hdHRyKCJhY3Rpb24iKSxkPWIuZmluZCgnaW5wdXRbbmFtZT0ia2V5Il0nKS52YWwoKSxlPWMrZDt0aGlzLndyaXRlSW1hZ2UoZSksdGhpcy5vcHRpb25zLmltYWdlVXBsb2FkVG9TMy5jYWxsYmFjayYmdGhpcy5vcHRpb25zLmltYWdlVXBsb2FkVG9TMy5jYWxsYmFjay5jYWxsKHRoaXMsZSxkKX1lbHNle3ZhciBmPWEuY29udGVudHMoKS50ZXh0KCk7dGhpcy5wYXJzZUltYWdlUmVzcG9uc2UoZil9fWNhdGNoKGcpe3RoaXMudGhyb3dJbWFnZUVycm9yKDcpfX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5pdEltYWdlPWZ1bmN0aW9uKCl7dGhpcy5idWlsZEluc2VydEltYWdlKCksKCF0aGlzLmlzTGlua3x8dGhpcy5pc0ltYWdlKSYmKHRoaXMuaW5pdEltYWdlRXZlbnRzKCksdGhpcy5pbml0SW1hZ2VQb3B1cCgpKSx0aGlzLmFkZExpc3RlbmVyKCJkZXN0cm95Iix0aGlzLmRlc3Ryb3lJbWFnZSl9LGEuRWRpdGFibGUuaW5pdGlhbGl6ZXJzLnB1c2goYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5pdEltYWdlKSxhLkVkaXRhYmxlLnByb3RvdHlwZS5kZXN0cm95SW1hZ2U9ZnVuY3Rpb24oKXt0aGlzLiRpbWFnZV9lZGl0b3IuaHRtbCgiIikucmVtb3ZlRGF0YSgpLnJlbW92ZSgpLHRoaXMuJGltYWdlX3dyYXBwZXIuaHRtbCgiIikucmVtb3ZlRGF0YSgpLnJlbW92ZSgpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5idWlsZEluc2VydEltYWdlPWZ1bmN0aW9uKCl7dGhpcy4kaW1hZ2Vfd3JhcHBlcj1hKHRoaXMuaW5zZXJ0SW1hZ2VIVE1MKCkpLHRoaXMuJHBvcHVwX2VkaXRvci5hcHBlbmQodGhpcy4kaW1hZ2Vfd3JhcHBlcik7dmFyIGI9dGhpcztpZih0aGlzLiRpbWFnZV93cmFwcGVyLm9uKCJtb3VzZXVwIHRvdWNoZW5kIixhLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuaXNSZXNpemluZygpfHxhLnN0b3BQcm9wYWdhdGlvbigpfSx0aGlzKSksdGhpcy5hZGRMaXN0ZW5lcigiaGlkZVBvcHVwcyIsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuaGlkZUltYWdlV3JhcHBlcighMCl9KSx0aGlzKSx0aGlzLiRwcm9ncmVzc19iYXI9dGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCJwI2YtcHJvZ3Jlc3MtIit0aGlzLl9pZCksdGhpcy5vcHRpb25zLmltYWdlVXBsb2FkKXtpZih0aGlzLmJyb3dzZXIubXNpZSYmYS5FZGl0YWJsZS5nZXRJRXZlcnNpb24oKTw9OSl7dmFyIGM9dGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCJpZnJhbWUiKS5nZXQoMCk7Yy5hdHRhY2hFdmVudD9jLmF0dGFjaEV2ZW50KCJvbmxvYWQiLGZ1bmN0aW9uKCl7Yi5pRnJhbWVMb2FkKCl9KTpjLm9ubG9hZD1mdW5jdGlvbigpe2IuaUZyYW1lTG9hZCgpfX10aGlzLiRpbWFnZV93cmFwcGVyLm9uKCJjaGFuZ2UiLCdpbnB1dFt0eXBlPSJmaWxlIl0nLGZ1bmN0aW9uKCl7aWYodm9pZCAwIT09dGhpcy5maWxlcyliLnVwbG9hZEltYWdlKHRoaXMuZmlsZXMpO2Vsc2V7dmFyIGM9YSh0aGlzKS5wYXJlbnRzKCJmb3JtIik7Yy5maW5kKCdpbnB1dFt0eXBlPSJoaWRkZW4iXScpLnJlbW92ZSgpO3ZhciBkO2ZvcihkIGluIGIub3B0aW9ucy5pbWFnZVVwbG9hZFBhcmFtcyljLnByZXBlbmQoJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9IicrZCsnIiB2YWx1ZT0iJytiLm9wdGlvbnMuaW1hZ2VVcGxvYWRQYXJhbXNbZF0rJyIgLz4nKTtpZihiLm9wdGlvbnMuaW1hZ2VVcGxvYWRUb1MzIT09ITEpe2ZvcihkIGluIGIub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzMucGFyYW1zKWMucHJlcGVuZCgnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iJytkKyciIHZhbHVlPSInK2Iub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzMucGFyYW1zW2RdKyciIC8+Jyk7Yy5wcmVwZW5kKCc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJzdWNjZXNzX2FjdGlvbl9zdGF0dXMiIHZhbHVlPSIyMDEiIC8+JyksYy5wcmVwZW5kKCc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJYLVJlcXVlc3RlZC1XaXRoIiB2YWx1ZT0ieGhyIiAvPicpLGMucHJlcGVuZCgnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iQ29udGVudC1UeXBlIiB2YWx1ZT0iIiAvPicpLGMucHJlcGVuZCgnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ia2V5IiB2YWx1ZT0iJytiLm9wdGlvbnMuaW1hZ2VVcGxvYWRUb1MzLmtleVN0YXJ0KyhuZXcgRGF0ZSkuZ2V0VGltZSgpKyItIithKHRoaXMpLnZhbCgpLm1hdGNoKC9bXlwvXFxdKyQvKSsnIiAvPicpfWVsc2UgYy5wcmVwZW5kKCc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJYSFJfQ09SU19UUkFSR0VUT1JJR0lOIiB2YWx1ZT0iJyt3aW5kb3cubG9jYXRpb24uaHJlZisnIiAvPicpO2Iuc2hvd0luc2VydEltYWdlKCksYi5zaG93SW1hZ2VMb2FkZXIoITApLGIuZGlzYWJsZSgpLGMuc3VibWl0KCl9YSh0aGlzKS52YWwoIiIpfSl9dGhpcy5idWlsZERyYWdVcGxvYWQoKSx0aGlzLiRpbWFnZV93cmFwcGVyLm9uKCJtb3VzZXVwIGtleWRvd24iLCIjZi1pbWFnZS11cmwtIit0aGlzLl9pZCxhLnByb3h5KGZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2g7YiYmMjc9PT1ifHxhLnN0b3BQcm9wYWdhdGlvbigpfSx0aGlzKSksdGhpcy4kaW1hZ2Vfd3JhcHBlci5vbigiY2xpY2siLCIjZi1pbWFnZS1vay0iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLndyaXRlSW1hZ2UodGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCIjZi1pbWFnZS11cmwtIit0aGlzLl9pZCkudmFsKCksITApfSx0aGlzKSksdGhpcy4kaW1hZ2Vfd3JhcHBlci5vbigiY2xpY2siLCIjZi1pbWFnZS1jbG9zZS0iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Rpc2FibGVkPyExOih0aGlzLiRidHRuX3dyYXBwZXIuc2hvdygpLHRoaXMuaGlkZUltYWdlV3JhcHBlcighMCksdGhpcy5vcHRpb25zLmlubGluZU1vZGUmJjA9PT10aGlzLm9wdGlvbnMuYnV0dG9ucy5sZW5ndGgmJih0aGlzLmltYWdlTW9kZT90aGlzLnNob3dJbWFnZUVkaXRvcigpOnRoaXMuaGlkZSgpKSx0aGlzLmltYWdlTW9kZXx8dGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCksdm9pZCh0aGlzLm9wdGlvbnMuaW5saW5lTW9kZXx8dGhpcy5pbWFnZU1vZGU/dGhpcy5pbWFnZU1vZGUmJnRoaXMuc2hvd0ltYWdlRWRpdG9yKCk6dGhpcy5oaWRlKCkpKX0sdGhpcykpLHRoaXMuJGltYWdlX3dyYXBwZXIub24oImNsaWNrIixmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfSksdGhpcy4kaW1hZ2Vfd3JhcHBlci5vbigiY2xpY2siLCIqIixmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfSl9LGEuRWRpdGFibGUucHJvdG90eXBlLmRlbGV0ZUltYWdlPWZ1bmN0aW9uKGIpe2lmKHRoaXMub3B0aW9ucy5pbWFnZURlbGV0ZVVSTCl7dmFyIGM9dGhpcy5vcHRpb25zLmltYWdlRGVsZXRlUGFyYW1zO2MuaW5mbz1iLmRhdGEoImluZm8iKSxjLnNyYz1iLmF0dHIoInNyYyIpLGEuYWpheCh7dHlwZToiUE9TVCIsdXJsOnRoaXMub3B0aW9ucy5pbWFnZURlbGV0ZVVSTCxkYXRhOmMsY3Jvc3NEb21haW46dGhpcy5vcHRpb25zLmNyb3NzRG9tYWluLHhockZpZWxkczp7d2l0aENyZWRlbnRpYWxzOnRoaXMub3B0aW9ucy53aXRoQ3JlZGVudGlhbHN9LGhlYWRlcnM6dGhpcy5vcHRpb25zLmhlYWRlcnN9KS5kb25lKGEucHJveHkoZnVuY3Rpb24oYSl7Yi5wYXJlbnQoKS5wYXJlbnQoKS5oYXNDbGFzcygiZi1pbWFnZS1saXN0Iik/Yi5wYXJlbnQoKS5yZW1vdmUoKTpiLnBhcmVudCgpLnJlbW92ZUNsYXNzKCJmLWltZy1kZWxldGluZyIpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZURlbGV0ZVN1Y2Nlc3MiLFthXSwhMSl9LHRoaXMpKS5mYWlsKGEucHJveHkoZnVuY3Rpb24oKXtiLnBhcmVudCgpLnJlbW92ZUNsYXNzKCJmLWltZy1kZWxldGluZyIpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZURlbGV0ZUVycm9yIixbIkVycm9yIGR1cmluZyBpbWFnZSBkZWxldGUuIl0sITEpfSx0aGlzKSl9ZWxzZSBiLnBhcmVudCgpLnJlbW92ZUNsYXNzKCJmLWltZy1kZWxldGluZyIpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZURlbGV0ZUVycm9yIixbIk1pc3NpbmcgaW1hZ2VEZWxldGVVUkwgb3B0aW9uLiJdLCExKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW1hZ2VIYW5kbGU9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9YSgnPHNwYW4gZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+JykuYWRkQ2xhc3MoImYtaW1nLWhhbmRsZSIpLm9uKHttb3Zlc3RhcnQ6ZnVuY3Rpb24oYyl7Yi5oaWRlKCksYi4kZWxlbWVudC5hZGRDbGFzcygiZi1ub24tc2VsZWN0YWJsZSIpLmF0dHIoImNvbnRlbnRlZGl0YWJsZSIsITEpLGIuJGVsZW1lbnQuYXR0cigiZGF0YS1yZXNpemUiLCEwKSxhKHRoaXMpLmF0dHIoImRhdGEtc3RhcnQteCIsYy5zdGFydFgpLGEodGhpcykuYXR0cigiZGF0YS1zdGFydC15IixjLnN0YXJ0WSl9LG1vdmU6ZnVuY3Rpb24oYyl7dmFyIGQ9YSh0aGlzKSxlPWMucGFnZVgtcGFyc2VJbnQoZC5hdHRyKCJkYXRhLXN0YXJ0LXgiKSwxMCk7ZC5hdHRyKCJkYXRhLXN0YXJ0LXgiLGMucGFnZVgpLGQuYXR0cigiZGF0YS1zdGFydC15IixjLnBhZ2VZKTt2YXIgZj1kLnByZXZBbGwoImltZyIpLGc9Zi53aWR0aCgpO2QuaGFzQ2xhc3MoImYtaC1uZSIpfHxkLmhhc0NsYXNzKCJmLWgtc2UiKT9mLmF0dHIoIndpZHRoIixnK2UpOmYuYXR0cigid2lkdGgiLGctZSksYi50cmlnZ2VyRXZlbnQoImltYWdlUmVzaXplIixbXSwhMSl9LG1vdmVlbmQ6ZnVuY3Rpb24oKXthKHRoaXMpLnJlbW92ZUF0dHIoImRhdGEtc3RhcnQteCIpLGEodGhpcykucmVtb3ZlQXR0cigiZGF0YS1zdGFydC15IiksYi4kZWxlbWVudC5yZW1vdmVDbGFzcygiZi1ub24tc2VsZWN0YWJsZSIpLGIuaXNJbWFnZXx8Yi4kZWxlbWVudC5hdHRyKCJjb250ZW50ZWRpdGFibGUiLCEwKSxiLnRyaWdnZXJFdmVudCgiaW1hZ2VSZXNpemVFbmQiKSxiLnNhdmVVbmRvU3RlcCgpLGEodGhpcykudHJpZ2dlcigibW91c2V1cCIpfSx0b3VjaGVuZDpmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlcigibW92ZWVuZCIpfX0pO3JldHVybiBjfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5kaXNhYmxlSW1hZ2VSZXNpemU9ZnVuY3Rpb24oKXtpZih0aGlzLmJyb3dzZXIubW96aWxsYSl0cnl7ZG9jdW1lbnQuZXhlY0NvbW1hbmQoImVuYWJsZU9iamVjdFJlc2l6aW5nIiwhMSwhMSksZG9jdW1lbnQuZXhlY0NvbW1hbmQoImVuYWJsZUlubGluZVRhYmxlRWRpdGluZyIsITEsITEpfWNhdGNoKGEpe319LGEuRWRpdGFibGUucHJvdG90eXBlLmlzUmVzaXppbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWxlbWVudC5hdHRyKCJkYXRhLXJlc2l6ZSIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5nZXRJbWFnZUNsYXNzPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3BsaXQoIiAiKTtyZXR1cm4gYi5pbmRleE9mKCJmci1maXIiKT49MD8iZnItZmlyIjpiLmluZGV4T2YoImZyLWZpbCIpPj0wPyJmci1maWwiOiJmci1maW4ifSxhLkVkaXRhYmxlLnByb3RvdHlwZS5hZGRJbWFnZUNsYXNzPWZ1bmN0aW9uKGEsYil7YS5yZW1vdmVDbGFzcygiZnItZmluIGZyLWZpciBmci1maWwiKS5hZGRDbGFzcyhiKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5pdEltYWdlRXZlbnRzPWZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlSW1hZ2VSZXNpemUoKTt2YXIgYj10aGlzO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXImJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImRyb3AiLGEucHJveHkoZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXtiLmNsb3NlSW1hZ2VNb2RlKCksYi5pbWFnZU1vZGU9ITEsYi5oaWRlKCksdGhpcy5zeW5jKCksdGhpcy5jbGVhclNlbGVjdGlvbigpfSx0aGlzKSwxMCl9LHRoaXMpKSx0aGlzLiRlbGVtZW50Lm9uKCJtb3VzZWRvd24iLCdpbWc6bm90KFtjb250ZW50ZWRpdGFibGU9ImZhbHNlIl0pJyxmdW5jdGlvbihjKXtyZXR1cm4gYi5pc0Rpc2FibGVkPyExOnZvaWQoYi5pc1Jlc2l6aW5nKCl8fChjLnN0b3BQcm9wYWdhdGlvbigpLGIuJGVsZW1lbnQuYXR0cigiY29udGVudGVkaXRhYmxlIiwhMSksYSh0aGlzKS5hZGRDbGFzcygiZnItaW1hZ2UtbW92ZSIpKSl9KSx0aGlzLiRlbGVtZW50Lm9uKCJtb3VzZXVwIiwnaW1nOm5vdChbY29udGVudGVkaXRhYmxlPSJmYWxzZSJdKScsZnVuY3Rpb24oKXtyZXR1cm4gYi5pc0Rpc2FibGVkPyExOnZvaWQoYi5pc1Jlc2l6aW5nKCl8fChiLm9wdGlvbnMuaW1hZ2VNb3ZlfHxiLmlzSW1hZ2V8fGIuaXNIVE1MfHxiLiRlbGVtZW50LmF0dHIoImNvbnRlbnRlZGl0YWJsZSIsITApLGEodGhpcykucmVtb3ZlQ2xhc3MoImZyLWltYWdlLW1vdmUiKSkpfSksdGhpcy4kZWxlbWVudC5vbigiY2xpY2sgdG91Y2hlbmQiLCdpbWc6bm90KFtjb250ZW50ZWRpdGFibGU9ImZhbHNlIl0pJyxmdW5jdGlvbihjKXtpZihiLmlzRGlzYWJsZWQpcmV0dXJuITE7aWYoIWIuaXNSZXNpemluZygpKXtjLnByZXZlbnREZWZhdWx0KCksYy5zdG9wUHJvcGFnYXRpb24oKSxiLmNsb3NlSW1hZ2VNb2RlKCksYi4kZWxlbWVudC5ibHVyKCksYi4kaW1hZ2VfZWRpdG9yLmZpbmQoImJ1dHRvbiIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKTt2YXIgZD1hKHRoaXMpLmNzcygiZmxvYXQiKTtpZihhKHRoaXMpLmhhc0NsYXNzKCJmci1maWwiKT9kPSJsZWZ0IjphKHRoaXMpLmhhc0NsYXNzKCJmci1maXIiKSYmKGQ9InJpZ2h0IiksYi4kaW1hZ2VfZWRpdG9yLmZpbmQoJ2J1dHRvbltkYXRhLWNtZD0iZmxvYXRJbWFnZScrZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStkLnNsaWNlKDEpKyciXScpLmFkZENsYXNzKCJhY3RpdmUiKSxiLiRpbWFnZV9lZGl0b3IuZmluZCgnLmYtaW1hZ2UtYWx0IGlucHV0W3R5cGU9InRleHQiXScpLnZhbChhKHRoaXMpLmF0dHIoImFsdCIpfHxhKHRoaXMpLmF0dHIoInRpdGxlIikpLGIuc2hvd0ltYWdlRWRpdG9yKCksIWEodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoImYtaW1nLWVkaXRvciIpfHwiU1BBTiIhPWEodGhpcykucGFyZW50KCkuZ2V0KDApLnRhZ05hbWUpe3ZhciBlPWIuZ2V0SW1hZ2VDbGFzcyhhKHRoaXMpLmF0dHIoImNsYXNzIikpO2EodGhpcykud3JhcCgnPHNwYW4gZGF0YS1mci12ZXJpZmllZD0idHJ1ZSIgY2xhc3M9ImYtaW1nLWVkaXRvciAnK2UrJyI+PC9zcGFuPicpLDAhPT1hKHRoaXMpLnBhcmVudHMoIi5mLWltZy13cmFwIikubGVuZ3RofHxiLmlzSW1hZ2U/Yi5hZGRJbWFnZUNsYXNzKGEodGhpcykucGFyZW50cygiLmYtaW1nLXdyYXAiKSxlKTphKHRoaXMpLnBhcmVudHMoImEiKS5sZW5ndGg+MD9hKHRoaXMpLnBhcmVudHMoImE6Zmlyc3QiKS53cmFwKCc8c3BhbiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIiBjbGFzcz0iZi1pbWctd3JhcCAnK2UrJyI+PC9zcGFuPicpOmEodGhpcykucGFyZW50KCkud3JhcCgnPHNwYW4gZGF0YS1mci12ZXJpZmllZD0idHJ1ZSIgY2xhc3M9ImYtaW1nLXdyYXAgJytlKyciPjwvc3Bhbj4nKX12YXIgZj1iLmltYWdlSGFuZGxlKCk7YSh0aGlzKS5wYXJlbnQoKS5maW5kKCIuZi1pbWctaGFuZGxlIikucmVtb3ZlKCksYi5vcHRpb25zLmltYWdlUmVzaXplJiYoYSh0aGlzKS5wYXJlbnQoKS5hcHBlbmQoZi5jbG9uZSghMCkuYWRkQ2xhc3MoImYtaC1uZSIpKSxhKHRoaXMpLnBhcmVudCgpLmFwcGVuZChmLmNsb25lKCEwKS5hZGRDbGFzcygiZi1oLXNlIikpLGEodGhpcykucGFyZW50KCkuYXBwZW5kKGYuY2xvbmUoITApLmFkZENsYXNzKCJmLWgtc3ciKSksYSh0aGlzKS5wYXJlbnQoKS5hcHBlbmQoZi5jbG9uZSghMCkuYWRkQ2xhc3MoImYtaC1udyIpKSksYi5zaG93QnlDb29yZGluYXRlcyhhKHRoaXMpLm9mZnNldCgpLmxlZnQrYSh0aGlzKS53aWR0aCgpLzIsYSh0aGlzKS5vZmZzZXQoKS50b3ArYSh0aGlzKS5oZWlnaHQoKSksYi5pbWFnZU1vZGU9ITAsYi4kYnR0bl93cmFwcGVyLmZpbmQoIi5mci1idHRuIikucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpLGIuY2xlYXJTZWxlY3Rpb24oKX19KSx0aGlzLiRlbGVtZW50Lm9uKCJtb3VzZWRvd24gdG91Y2hzdGFydCIsIi5mLWltZy1oYW5kbGUiLGEucHJveHkoZnVuY3Rpb24oKXtyZXR1cm4gYi5pc0Rpc2FibGVkPyExOnZvaWQgdGhpcy4kZWxlbWVudC5hdHRyKCJkYXRhLXJlc2l6ZSIsITApfSx0aGlzKSksdGhpcy4kZWxlbWVudC5vbigibW91c2V1cCIsIi5mLWltZy1oYW5kbGUiLGEucHJveHkoZnVuY3Rpb24oYyl7aWYoYi5pc0Rpc2FibGVkKXJldHVybiExO3ZhciBkPWEoYy50YXJnZXQpLnByZXZBbGwoImltZyIpO3NldFRpbWVvdXQoYS5wcm94eShmdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQucmVtb3ZlQXR0cigiZGF0YS1yZXNpemUiKSxkLmNsaWNrKCl9LHRoaXMpLDApfSx0aGlzKSl9LGEuRWRpdGFibGUucHJvdG90eXBlLmluaXRJbWFnZVBvcHVwPWZ1bmN0aW9uKCl7dGhpcy4kaW1hZ2VfZWRpdG9yPWEoJzxkaXYgY2xhc3M9ImZyb2FsYS1wb3B1cCBmcm9hbGEtaW1hZ2UtZWRpdG9yLXBvcHVwIiBzdHlsZT0iZGlzcGxheTogbm9uZSI+Jyk7Zm9yKHZhciBiPWEoJzxkaXYgY2xhc3M9ImYtcG9wdXAtbGluZSBmLXBvcHVwLXRvb2xiYXIiPicpLmFwcGVuZFRvKHRoaXMuJGltYWdlX2VkaXRvciksYz0wO2M8dGhpcy5vcHRpb25zLmltYWdlQnV0dG9ucy5sZW5ndGg7YysrKXt2YXIgZD10aGlzLm9wdGlvbnMuaW1hZ2VCdXR0b25zW2NdO2lmKHZvaWQgMCE9PWEuRWRpdGFibGUuaW1hZ2VfY29tbWFuZHNbZF0pe3ZhciBlPWEuRWRpdGFibGUuaW1hZ2VfY29tbWFuZHNbZF0sZj0nPGJ1dHRvbiBjbGFzcz0iZnItYnR0biIgZGF0YS1jbWQ9IicrZCsnIiB0aXRsZT0iJytlLnRpdGxlKyciPic7Zis9dm9pZCAwIT09dGhpcy5vcHRpb25zLmljb25zW2RdP3RoaXMucHJlcGFyZUljb24odGhpcy5vcHRpb25zLmljb25zW2RdLGUudGl0bGUpOnRoaXMucHJlcGFyZUljb24oZS5pY29uLGUudGl0bGUpLGYrPSI8L2J1dHRvbj4iLGIuYXBwZW5kKGYpfX10aGlzLmFkZExpc3RlbmVyKCJoaWRlUG9wdXBzIix0aGlzLmhpZGVJbWFnZUVkaXRvclBvcHVwKSx0aGlzLm9wdGlvbnMuaW1hZ2VUaXRsZSYmYSgnPGRpdiBjbGFzcz0iZi1wb3B1cC1saW5lIGYtaW1hZ2UtYWx0Ij4nKS5hcHBlbmQoJzxsYWJlbD48c3BhbiBkYXRhLXRleHQ9InRydWUiPlRpdGxlPC9zcGFuPjogPC9sYWJlbD4nKS5hcHBlbmQoYSgnPGlucHV0IHR5cGU9InRleHQiPicpLm9uKCJtb3VzZXVwIGtleWRvd24iLGZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2g7YiYmMjc9PT1ifHxhLnN0b3BQcm9wYWdhdGlvbigpfSkpLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz0iZi1vayIgZGF0YS10ZXh0PSJ0cnVlIiBkYXRhLWNtZD0ic2V0SW1hZ2VBbHQiIHRpdGxlPSJPSyI+T0s8L2J1dHRvbj4nKS5hcHBlbmRUbyh0aGlzLiRpbWFnZV9lZGl0b3IpO3ZhciBnPXRoaXM7dGhpcy4kaW1hZ2VfZWRpdG9yLmZpbmQoImJ1dHRvbiIpLmNsaWNrKGZ1bmN0aW9uKGIpe2Iuc3RvcFByb3BhZ2F0aW9uKCksZ1thKHRoaXMpLmF0dHIoImRhdGEtY21kIildKGcuJGVsZW1lbnQuZmluZCgic3Bhbi5mLWltZy1lZGl0b3IiKSkKfSksdGhpcy4kcG9wdXBfZWRpdG9yLmFwcGVuZCh0aGlzLiRpbWFnZV9lZGl0b3IpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5mbG9hdEltYWdlTGVmdD1mdW5jdGlvbihhKXt0aGlzLmFkZEltYWdlQ2xhc3MoYSwiZnItZmlsIiksdGhpcy5pc0ltYWdlJiZ0aGlzLiRlbGVtZW50LmNzcygiZmxvYXQiLCJsZWZ0IiksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLnRyaWdnZXJFdmVudCgiaW1hZ2VGbG9hdGVkTGVmdCIpLGEuZmluZCgiaW1nIikuY2xpY2soKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZmxvYXRJbWFnZU5vbmU9ZnVuY3Rpb24oYSl7dGhpcy5hZGRJbWFnZUNsYXNzKGEsImZyLWZpbiIpLHRoaXMuaXNJbWFnZXx8KGEucGFyZW50KCkuZ2V0KDApPT10aGlzLiRlbGVtZW50LmdldCgwKT9hLndyYXAoJzxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsiPjwvZGl2PicpOmEucGFyZW50cygiLmYtaW1nLXdyYXA6Zmlyc3QiKS5jc3MoInRleHQtYWxpZ24iLCJjZW50ZXIiKSksdGhpcy5pc0ltYWdlJiZ0aGlzLiRlbGVtZW50LmNzcygiZmxvYXQiLCJub25lIiksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLnRyaWdnZXJFdmVudCgiaW1hZ2VGbG9hdGVkTm9uZSIpLGEuZmluZCgiaW1nIikuY2xpY2soKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZmxvYXRJbWFnZVJpZ2h0PWZ1bmN0aW9uKGEpe3RoaXMuYWRkSW1hZ2VDbGFzcyhhLCJmci1maXIiKSx0aGlzLmlzSW1hZ2UmJnRoaXMuJGVsZW1lbnQuY3NzKCJmbG9hdCIsInJpZ2h0IiksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLnRyaWdnZXJFdmVudCgiaW1hZ2VGbG9hdGVkUmlnaHQiKSxhLmZpbmQoImltZyIpLmNsaWNrKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLmxpbmtJbWFnZT1mdW5jdGlvbihhKXt0aGlzLnNob3dJbnNlcnRMaW5rKCksdGhpcy5pbWFnZU1vZGU9ITAsIkEiPT1hLnBhcmVudCgpLmdldCgwKS50YWdOYW1lPyh0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgnaW5wdXRbdHlwZT0idGV4dCJdJykudmFsKGEucGFyZW50KCkuYXR0cigiaHJlZiIpKSx0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgiLmYtZXh0ZXJuYWwtbGluayIpLmF0dHIoImhyZWYiLGEucGFyZW50KCkuYXR0cigiaHJlZiIpKSwiX2JsYW5rIj09YS5wYXJlbnQoKS5hdHRyKCJ0YXJnZXQiKT90aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgnaW5wdXRbdHlwZT0iY2hlY2tib3giXScpLnByb3AoImNoZWNrZWQiLCEwKTp0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgnaW5wdXRbdHlwZT0iY2hlY2tib3giXScpLnByb3AoImNoZWNrZWQiLCExKSx0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgiYS5mLWV4dGVybmFsLWxpbmssIGJ1dHRvbi5mLXVubGluayIpLnNob3coKSk6KHRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0nKS52YWwoImh0dHA6Ly8iKSx0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgiLmYtZXh0ZXJuYWwtbGluayIpLmF0dHIoImhyZWYiLCIjIiksdGhpcy4kbGlua193cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9ImNoZWNrYm94Il0nKS5wcm9wKCJjaGVja2VkIix0aGlzLm9wdGlvbnMuYWx3YXlzQmxhbmspLHRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCJhLmYtZXh0ZXJuYWwtbGluaywgYnV0dG9uLmYtdW5saW5rIikuaGlkZSgpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVwbGFjZUltYWdlPWZ1bmN0aW9uKGEpe3RoaXMuc2hvd0luc2VydEltYWdlKCksdGhpcy5pbWFnZU1vZGU9ITAsdGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0nKS52YWwoYS5maW5kKCJpbWciKS5hdHRyKCJzcmMiKSk7dmFyIGI9YS5maW5kKCJpbWciKTt0aGlzLnNob3dCeUNvb3JkaW5hdGVzKGIub2Zmc2V0KCkubGVmdCtiLndpZHRoKCkvMixiLm9mZnNldCgpLnRvcCtiLmhlaWdodCgpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVtb3ZlSW1hZ2U9ZnVuY3Rpb24oYil7dmFyIGM9Yi5maW5kKCJpbWciKS5nZXQoMCksZD0iQXJlIHlvdSBzdXJlPyBJbWFnZSB3aWxsIGJlIGRlbGV0ZWQuIjtpZihhLkVkaXRhYmxlLkxBTkdTW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0mJihkPWEuRWRpdGFibGUuTEFOR1NbdGhpcy5vcHRpb25zLmxhbmd1YWdlXS50cmFuc2xhdGlvbltkXSksY29uZmlybShkKSl7aWYodGhpcy50cmlnZ2VyRXZlbnQoImJlZm9yZVJlbW92ZUltYWdlIixbYShjKV0sITEpKXt2YXIgZT1iLnBhcmVudHMoYS5FZGl0YWJsZS5WQUxJRF9OT0RFUy5qb2luKCIsIikpO2IucGFyZW50cygiLmYtaW1nLXdyYXAiKS5sZW5ndGg/Yi5wYXJlbnRzKCIuZi1pbWctd3JhcCIpLnJlbW92ZSgpOmIucmVtb3ZlKCksdGhpcy5yZWZyZXNoSW1hZ2VMaXN0KCEwKSx0aGlzLmhpZGUoKSxlLmxlbmd0aCYmZVswXSE9dGhpcy4kZWxlbWVudC5nZXQoMCkmJiIiPT09YShlWzBdKS50ZXh0KCkmJmEoZVswXSkucmVtb3ZlKCksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLndyYXBUZXh0KCksdGhpcy50cmlnZ2VyRXZlbnQoImFmdGVyUmVtb3ZlSW1hZ2UiLFthKGMpXSksdGhpcy5mb2N1cygpLHRoaXMuaW1hZ2VNb2RlPSExfX1lbHNlIGIuZmluZCgiaW1nIikuY2xpY2soKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc2V0SW1hZ2VBbHQ9ZnVuY3Rpb24oYSl7YS5maW5kKCJpbWciKS5hdHRyKCJhbHQiLHRoaXMuJGltYWdlX2VkaXRvci5maW5kKCcuZi1pbWFnZS1hbHQgaW5wdXRbdHlwZT0idGV4dCJdJykudmFsKCkpLGEuZmluZCgiaW1nIikuYXR0cigidGl0bGUiLHRoaXMuJGltYWdlX2VkaXRvci5maW5kKCcuZi1pbWFnZS1hbHQgaW5wdXRbdHlwZT0idGV4dCJdJykudmFsKCkpLHRoaXMuc2F2ZVVuZG9TdGVwKCksdGhpcy5oaWRlKCksdGhpcy5jbG9zZUltYWdlTW9kZSgpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZUFsdFNldCIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5idWlsZERyYWdVcGxvYWQ9ZnVuY3Rpb24oKXt2YXIgYj10aGlzO2IuJGltYWdlX3dyYXBwZXIub24oImRyYWdvdmVyIiwiI2YtdXBsb2FkLWRpdi0iK3RoaXMuX2lkLGZ1bmN0aW9uKCl7cmV0dXJuIGEodGhpcykuYWRkQ2xhc3MoImYtaG92ZXIiKSwhMX0pLGIuJGltYWdlX3dyYXBwZXIub24oImRyYWdlbmQiLCIjZi11cGxvYWQtZGl2LSIrdGhpcy5faWQsZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzKS5yZW1vdmVDbGFzcygiZi1ob3ZlciIpLCExfSksYi4kaW1hZ2Vfd3JhcHBlci5vbigiZHJvcCIsIiNmLXVwbG9hZC1kaXYtIit0aGlzLl9pZCxmdW5jdGlvbihjKXtyZXR1cm4gYy5wcmV2ZW50RGVmYXVsdCgpLGMuc3RvcFByb3BhZ2F0aW9uKCksYi5vcHRpb25zLmltYWdlVXBsb2FkPyhhKHRoaXMpLnJlbW92ZUNsYXNzKCJmLWhvdmVyIiksdm9pZCBiLnVwbG9hZEltYWdlKGMub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZmlsZXMpKTohMX0pLGIuJGVsZW1lbnQub24oImRyYWdvdmVyIGRyYWdlbnRlciBkcmFnZW5kIixmdW5jdGlvbigpe3JldHVybiExfSksYi4kZWxlbWVudC5vbigiZHJvcCIsZnVuY3Rpb24oYyl7aWYoYi5jbG9zZUltYWdlTW9kZSgpLGIuaGlkZSgpLGIuaW1hZ2VNb2RlPSExLCFiLm9wdGlvbnMuaW1hZ2VVcGxvYWR8fDAhPT1iLiRlbGVtZW50LmZpbmQoIi5mci1pbWFnZS1tb3ZlIikubGVuZ3RoKXtpZihiLiRlbGVtZW50LmZpbmQoIi5mci1pbWFnZS1tb3ZlIikubGVuZ3RoPjAmJmIub3B0aW9ucy5pbWFnZU1vdmUpe2IuaW5zZXJ0TWFya2Vyc0F0UG9pbnQoYy5vcmlnaW5hbEV2ZW50KSxiLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKTt2YXIgZD1hKCI8ZGl2PiIpLmFwcGVuZChiLiRlbGVtZW50LmZpbmQoIi5mci1pbWFnZS1tb3ZlIikuY2xvbmUoKS5yZW1vdmVDbGFzcygiZnItaW1hZ2UtbW92ZSIpLmFkZENsYXNzKCJmci1pbWFnZS1kcm9wcGVkIikpLmh0bWwoKTtiLmluc2VydEhUTUwoZCksYi4kZWxlbWVudC5maW5kKCIuZnItaW1hZ2UtbW92ZSIpLnJlbW92ZSgpLGIuY2xlYXJTZWxlY3Rpb24oKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi4kZWxlbWVudC5maW5kKCIuZnItaW1hZ2UtZHJvcHBlZCIpLnJlbW92ZUNsYXNzKCJmci1pbWFnZS1kcm9wcGVkIikuY2xpY2soKX0sMCksYi5zYXZlVW5kb1N0ZXAoKSxiLnN5bmMoKX1lbHNlIGIuJGVsZW1lbnQuZmluZCgiLmZyLWltYWdlLW1vdmUiKS5yZW1vdmVDbGFzcygiZnItaW1hZ2UtbW92ZSIpO3JldHVybiBjLnByZXZlbnREZWZhdWx0KCksYy5zdG9wUHJvcGFnYXRpb24oKSwhMX1pZihjLm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyJiZjLm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzJiZjLm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzLmxlbmd0aCl7aWYoYi5pc0Rpc2FibGVkKXJldHVybiExO2IuaW5zZXJ0TWFya2Vyc0F0UG9pbnQoYy5vcmlnaW5hbEV2ZW50KSxiLnNob3dCeUNvb3JkaW5hdGVzKGMub3JpZ2luYWxFdmVudC5wYWdlWCxjLm9yaWdpbmFsRXZlbnQucGFnZVkpLGIudXBsb2FkSW1hZ2UoYy5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcyksYy5wcmV2ZW50RGVmYXVsdCgpLGMuc3RvcFByb3BhZ2F0aW9uKCl9fSl9LGEuRWRpdGFibGUucHJvdG90eXBlLnNob3dJbWFnZUxvYWRlcj1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT0hMSksYT90aGlzLiRwcm9ncmVzc19iYXIuZmluZCgic3BhbiIpLmNzcygid2lkdGgiLCIxMDAlIikudGV4dCgiUGxlYXNlIHdhaXQhIik6dGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCJoNCIpLmFkZENsYXNzKCJ1cGxvYWRpbmciKSx0aGlzLiRpbWFnZV93cmFwcGVyLmZpbmQoIiNmLWltYWdlLWxpc3QtIit0aGlzLl9pZCkuaGlkZSgpLHRoaXMuJHByb2dyZXNzX2Jhci5zaG93KCksdGhpcy5zaG93SW5zZXJ0SW1hZ2UoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaGlkZUltYWdlTG9hZGVyPWZ1bmN0aW9uKCl7dGhpcy4kcHJvZ3Jlc3NfYmFyLmhpZGUoKSx0aGlzLiRwcm9ncmVzc19iYXIuZmluZCgic3BhbiIpLmNzcygid2lkdGgiLCIwJSIpLnRleHQoIiIpLHRoaXMuJGltYWdlX3dyYXBwZXIuZmluZCgiI2YtaW1hZ2UtbGlzdC0iK3RoaXMuX2lkKS5zaG93KCksdGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCJoNCIpLnJlbW92ZUNsYXNzKCJ1cGxvYWRpbmciKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUud3JpdGVJbWFnZT1mdW5jdGlvbihiLGMpe2lmKGMmJihiPXRoaXMuc2FuaXRpemVVUkwoYiksIiI9PT1iKSlyZXR1cm4hMTt2YXIgZD1uZXcgSW1hZ2U7ZC5vbmVycm9yPWEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmhpZGVJbWFnZUxvYWRlcigpLHRoaXMudGhyb3dJbWFnZUVycm9yKDEpfSx0aGlzKSxkLm9ubG9hZD10aGlzLmltYWdlTW9kZT9hLnByb3h5KGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudC5maW5kKCIuZi1pbWctZWRpdG9yID4gaW1nIik7YS5hdHRyKCJzcmMiLGIpLHRoaXMuaGlkZSgpLHRoaXMuaGlkZUltYWdlTG9hZGVyKCksdGhpcy4kaW1hZ2VfZWRpdG9yLnNob3coKSx0aGlzLnNhdmVVbmRvU3RlcCgpLHRoaXMuZW5hYmxlKCksdGhpcy50cmlnZ2VyRXZlbnQoImltYWdlUmVwbGFjZWQiLFthXSksc2V0VGltZW91dChmdW5jdGlvbigpe2EudHJpZ2dlcigiY2xpY2siKX0sMCl9LHRoaXMpOmEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmluc2VydExvYWRlZEltYWdlKGIpfSx0aGlzKSx0aGlzLnNob3dJbWFnZUxvYWRlcighMCksZC5zcmM9Yn0sYS5FZGl0YWJsZS5wcm90b3R5cGUucHJvY2Vzc0luc2VydEltYWdlPWZ1bmN0aW9uKGIsYyl7dm9pZCAwPT09YyYmKGM9ITApLHRoaXMuZW5hYmxlKCksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5mb2N1cygpO3ZhciBkPSc8aW1nIGNsYXNzPSJmci1maW4iIGRhdGEtZnItaW1hZ2UtcHJldmlldz0iJytjKyciIGFsdD0iSW1hZ2UgdGl0bGUiIHNyYz0iJytiKyciIHdpZHRoPSInK3RoaXMub3B0aW9ucy5kZWZhdWx0SW1hZ2VXaWR0aCsnIj4nLGU9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpWzBdLGY9dGhpcy5nZXRSYW5nZSgpLGc9IXRoaXMuYnJvd3Nlci5tc2llJiZhLkVkaXRhYmxlLmdldElFdmVyc2lvbigpPjg/YShmLnN0YXJ0Q29udGFpbmVyKTpudWxsO2cmJmcuaGFzQ2xhc3MoImYtaW1nLXdyYXAiKT8oMT09PWYuc3RhcnRPZmZzZXQ/KGcuYWZ0ZXIoJzxwPjxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJ0cnVlIiBkYXRhLWlkPSIwIj48L3NwYW4+PGJyLz48c3BhbiBjbGFzcz0iZi1tYXJrZXIiIGRhdGEtdHlwZT0iZmFsc2UiIGRhdGEtaWQ9IjAiPjwvc3Bhbj48L3A+JyksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCksdGhpcy5nZXRTZWxlY3Rpb24oKS5jb2xsYXBzZVRvU3RhcnQoKSk6MD09PWYuc3RhcnRPZmZzZXQmJihnLmJlZm9yZSgnPHA+PHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLXR5cGU9InRydWUiIGRhdGEtaWQ9IjAiPjwvc3Bhbj48YnIvPjxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJmYWxzZSIgZGF0YS1pZD0iMCI+PC9zcGFuPjwvcD4nKSx0aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSx0aGlzLmdldFNlbGVjdGlvbigpLmNvbGxhcHNlVG9TdGFydCgpKSx0aGlzLmluc2VydEhUTUwoZCkpOnRoaXMuZ2V0U2VsZWN0aW9uVGV4dEluZm8oZSkuYXRTdGFydCYmZSE9dGhpcy4kZWxlbWVudC5nZXQoMCkmJiJURCIhPWUudGFnTmFtZSYmIlRIIiE9ZS50YWdOYW1lJiYiTEkiIT1lLnRhZ05hbWU/YShlKS5iZWZvcmUoIjxwPiIrZCsiPC9wPiIpOnRoaXMuaW5zZXJ0SFRNTChkKSx0aGlzLmRpc2FibGUoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5zZXJ0TG9hZGVkSW1hZ2U9ZnVuY3Rpb24oYSl7dGhpcy50cmlnZ2VyRXZlbnQoImltYWdlTG9hZGVkIixbYV0sITEpLHRoaXMucHJvY2Vzc0luc2VydEltYWdlKGEsITEpLHRoaXMuYnJvd3Nlci5tc2llJiZ0aGlzLiRlbGVtZW50LmZpbmQoImltZyIpLmVhY2goZnVuY3Rpb24oYSxiKXtiLm9uY29udHJvbHNlbGVjdD1mdW5jdGlvbigpe3JldHVybiExfX0pLHRoaXMuZW5hYmxlKCksdGhpcy5oaWRlKCksdGhpcy5oaWRlSW1hZ2VMb2FkZXIoKSx0aGlzLnNhdmVVbmRvU3RlcCgpLHRoaXMuZm9jdXMoKSx0aGlzLndyYXBUZXh0KCksdGhpcy50cmlnZ2VyRXZlbnQoImltYWdlSW5zZXJ0ZWQiLFthXSl9LGEuRWRpdGFibGUucHJvdG90eXBlLnRocm93SW1hZ2VFcnJvcldpdGhNZXNzYWdlPWZ1bmN0aW9uKGEpe3RoaXMuZW5hYmxlKCksdGhpcy4kZWxlbWVudC5maW5kKCJpbWdbZGF0YS1mci1pbWFnZS1wcmV2aWV3XSIpLnJlbW92ZSgpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZUVycm9yIixbe21lc3NhZ2U6YSxjb2RlOjB9XSwhMSksdGhpcy5oaWRlSW1hZ2VMb2FkZXIoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUudGhyb3dJbWFnZUVycm9yPWZ1bmN0aW9uKGEpe3RoaXMuZW5hYmxlKCksdGhpcy4kZWxlbWVudC5maW5kKCJpbWdbZGF0YS1mci1pbWFnZS1wcmV2aWV3XSIpLnJlbW92ZSgpO3ZhciBiPSJVbmtub3duIGltYWdlIHVwbG9hZCBlcnJvci4iOzE9PWE/Yj0iQmFkIGxpbmsuIjoyPT1hP2I9Ik5vIGxpbmsgaW4gdXBsb2FkIHJlc3BvbnNlLiI6Mz09YT9iPSJFcnJvciBkdXJpbmcgZmlsZSB1cGxvYWQuIjo0PT1hP2I9IlBhcnNpbmcgcmVzcG9uc2UgZmFpbGVkLiI6NT09YT9iPSJJbWFnZSB0b28gbGFyZ2UuIjo2PT1hP2I9IkludmFsaWQgaW1hZ2UgdHlwZS4iOjc9PWEmJihiPSJJbWFnZSBjYW4gYmUgdXBsb2FkZWQgb25seSB0byBzYW1lIGRvbWFpbiBpbiBJRSA4IGFuZCBJRSA5LiIpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZUVycm9yIixbe2NvZGU6YSxtZXNzYWdlOmJ9XSwhMSksdGhpcy5oaWRlSW1hZ2VMb2FkZXIoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUudXBsb2FkSW1hZ2U9ZnVuY3Rpb24oYil7aWYoIXRoaXMudHJpZ2dlckV2ZW50KCJiZWZvcmVJbWFnZVVwbG9hZCIsW2JdLCExKSlyZXR1cm4hMTtpZih2b2lkIDAhPT1iJiZiLmxlbmd0aD4wKXt2YXIgYztpZih0aGlzLmRyYWdfc3VwcG9ydC5mb3JtZGF0YSYmKGM9dGhpcy5kcmFnX3N1cHBvcnQuZm9ybWRhdGE/bmV3IEZvcm1EYXRhOm51bGwpLGMpe3ZhciBkO2ZvcihkIGluIHRoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFBhcmFtcyljLmFwcGVuZChkLHRoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFBhcmFtc1tkXSk7aWYodGhpcy5vcHRpb25zLmltYWdlVXBsb2FkVG9TMyE9PSExKXtmb3IoZCBpbiB0aGlzLm9wdGlvbnMuaW1hZ2VVcGxvYWRUb1MzLnBhcmFtcyljLmFwcGVuZChkLHRoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzMucGFyYW1zW2RdKTtjLmFwcGVuZCgic3VjY2Vzc19hY3Rpb25fc3RhdHVzIiwiMjAxIiksYy5hcHBlbmQoIlgtUmVxdWVzdGVkLVdpdGgiLCJ4aHIiKSxjLmFwcGVuZCgiQ29udGVudC1UeXBlIixiWzBdLnR5cGUpLGMuYXBwZW5kKCJrZXkiLHRoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzMua2V5U3RhcnQrKG5ldyBEYXRlKS5nZXRUaW1lKCkrIi0iK2JbMF0ubmFtZSl9aWYoYy5hcHBlbmQodGhpcy5vcHRpb25zLmltYWdlVXBsb2FkUGFyYW0sYlswXSksYlswXS5zaXplPnRoaXMub3B0aW9ucy5tYXhJbWFnZVNpemUpcmV0dXJuIHRoaXMudGhyb3dJbWFnZUVycm9yKDUpLCExO2lmKHRoaXMub3B0aW9ucy5hbGxvd2VkSW1hZ2VUeXBlcy5pbmRleE9mKGJbMF0udHlwZS5yZXBsYWNlKC9pbWFnZVwvL2csIiIpKTwwKXJldHVybiB0aGlzLnRocm93SW1hZ2VFcnJvcig2KSwhMX1pZihjKXt2YXIgZTt0aGlzLm9wdGlvbnMuY3Jvc3NEb21haW4/ZT10aGlzLmNyZWF0ZUNPUlNSZXF1ZXN0KCJQT1NUIix0aGlzLm9wdGlvbnMuaW1hZ2VVcGxvYWRVUkwpOihlPW5ldyBYTUxIdHRwUmVxdWVzdCxlLm9wZW4oIlBPU1QiLHRoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFVSTCkpLGUub25sb2FkPWEucHJveHkoZnVuY3Rpb24oKXt0aGlzLiRwcm9ncmVzc19iYXIuZmluZCgic3BhbiIpLmNzcygid2lkdGgiLCIxMDAlIikudGV4dCgiUGxlYXNlIHdhaXQhIik7dHJ5e3RoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzM/MjAxPT1lLnN0YXR1cz90aGlzLnBhcnNlSW1hZ2VSZXNwb25zZVhNTChlLnJlc3BvbnNlWE1MKTp0aGlzLnRocm93SW1hZ2VFcnJvcigzKTplLnN0YXR1cz49MjAwJiZlLnN0YXR1czwzMDA/dGhpcy5wYXJzZUltYWdlUmVzcG9uc2UoZS5yZXNwb25zZVRleHQpOnRoaXMudGhyb3dJbWFnZUVycm9yKDMpfWNhdGNoKGEpe3RoaXMudGhyb3dJbWFnZUVycm9yKDQpfX0sdGhpcyksZS5vbmVycm9yPWEucHJveHkoZnVuY3Rpb24oKXt0aGlzLnRocm93SW1hZ2VFcnJvcigzKX0sdGhpcyksZS51cGxvYWQub25wcm9ncmVzcz1hLnByb3h5KGZ1bmN0aW9uKGEpe2lmKGEubGVuZ3RoQ29tcHV0YWJsZSl7dmFyIGI9YS5sb2FkZWQvYS50b3RhbCoxMDB8MDt0aGlzLiRwcm9ncmVzc19iYXIuZmluZCgic3BhbiIpLmNzcygid2lkdGgiLGIrIiUiKX19LHRoaXMpLHRoaXMuZGlzYWJsZSgpLGUuc2VuZChjKSx0aGlzLnNob3dJbWFnZUxvYWRlcigpfX19LGEuRWRpdGFibGUucHJvdG90eXBlLnBhcnNlSW1hZ2VSZXNwb25zZT1mdW5jdGlvbihiKXt0cnl7dmFyIGM9YS5wYXJzZUpTT04oYik7Yy5saW5rP3RoaXMud3JpdGVJbWFnZShjLmxpbmspOmMuZXJyb3I/dGhpcy50aHJvd0ltYWdlRXJyb3JXaXRoTWVzc2FnZShjLmVycm9yKTp0aGlzLnRocm93SW1hZ2VFcnJvcigyKX1jYXRjaChkKXt0aGlzLnRocm93SW1hZ2VFcnJvcig0KX19LGEuRWRpdGFibGUucHJvdG90eXBlLnBhcnNlSW1hZ2VSZXNwb25zZVhNTD1mdW5jdGlvbihiKXt0cnl7dmFyIGM9YShiKS5maW5kKCJMb2NhdGlvbiIpLnRleHQoKSxkPWEoYikuZmluZCgiS2V5IikudGV4dCgpO3RoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzMuY2FsbGJhY2suY2FsbCh0aGlzLGMsZCksYz90aGlzLndyaXRlSW1hZ2UoYyk6dGhpcy50aHJvd0ltYWdlRXJyb3IoMil9Y2F0Y2goZSl7dGhpcy50aHJvd0ltYWdlRXJyb3IoNCl9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5zZXRJbWFnZVVwbG9hZFVSTD1mdW5jdGlvbihhKXthJiYodGhpcy5vcHRpb25zLmltYWdlVXBsb2FkVVJMPWEpLHRoaXMub3B0aW9ucy5pbWFnZVVwbG9hZFRvUzMmJih0aGlzLm9wdGlvbnMuaW1hZ2VVcGxvYWRVUkw9Imh0dHBzOi8vIit0aGlzLm9wdGlvbnMuaW1hZ2VVcGxvYWRUb1MzLmJ1Y2tldCsiLiIrdGhpcy5vcHRpb25zLmltYWdlVXBsb2FkVG9TMy5yZWdpb24rIi5hbWF6b25hd3MuY29tLyIpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5jbG9zZUltYWdlTW9kZT1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQuZmluZCgic3Bhbi5mLWltZy1lZGl0b3IgPiBpbWciKS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYixjKXt0aGlzLmFkZEltYWdlQ2xhc3MoYShjKSx0aGlzLmdldEltYWdlQ2xhc3MoYShjKS5wYXJlbnQoKS5hdHRyKCJjbGFzcyIpKSksYShjKS5wYXJlbnRzKCIuZi1pbWctd3JhcCIpLmxlbmd0aD4wPyJBIj09YShjKS5wYXJlbnQoKS5wYXJlbnQoKS5nZXQoMCkudGFnTmFtZT9hKGMpLnNpYmxpbmdzKCJzcGFuLmYtaW1nLWhhbmRsZSIpLnJlbW92ZSgpLmVuZCgpLnVud3JhcCgpLnBhcmVudCgpLnVud3JhcCgpOmEoYykuc2libGluZ3MoInNwYW4uZi1pbWctaGFuZGxlIikucmVtb3ZlKCkuZW5kKCkudW53cmFwKCkudW53cmFwKCk6YShjKS5zaWJsaW5ncygic3Bhbi5mLWltZy1oYW5kbGUiKS5yZW1vdmUoKS5lbmQoKS51bndyYXAoKX0sdGhpcykpLHRoaXMuJGVsZW1lbnQuZmluZCgic3Bhbi5mLWltZy1lZGl0b3IiKS5sZW5ndGgmJih0aGlzLiRlbGVtZW50LmZpbmQoInNwYW4uZi1pbWctZWRpdG9yIikucmVtb3ZlKCksdGhpcy4kZWxlbWVudC5wYXJlbnRzKCJzcGFuLmYtaW1nLWVkaXRvciIpLnJlbW92ZSgpKSx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJmLW5vbi1zZWxlY3RhYmxlIiksdGhpcy5lZGl0YWJsZURpc2FibGVkfHx0aGlzLmlzSFRNTHx8dGhpcy4kZWxlbWVudC5hdHRyKCJjb250ZW50ZWRpdGFibGUiLCEwKSx0aGlzLiRpbWFnZV9lZGl0b3ImJnRoaXMuJGltYWdlX2VkaXRvci5oaWRlKCksdGhpcy4kbGlua193cmFwcGVyJiZ0aGlzLm9wdGlvbnMubGlua1RleHQmJnRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0uZi1sdCcpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCJmci1oaWRkZW4iKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaEltYWdlTGlzdD1mdW5jdGlvbihiKXtpZighdGhpcy5pc0xpbmsmJiF0aGlzLm9wdGlvbnMuZWRpdEluUG9wdXApe3ZhciBjPVtdLGQ9W10sZT10aGlzO2lmKHRoaXMuJGVsZW1lbnQuZmluZCgiaW1nIikuZWFjaChmdW5jdGlvbihiLGYpe3ZhciBnPWEoZik7aWYoYy5wdXNoKGcuYXR0cigic3JjIikpLGQucHVzaChnKSwwPT09Zy5wYXJlbnRzKCIuZi1pbWctZWRpdG9yIikubGVuZ3RoJiYhZy5oYXNDbGFzcygiZnItZmlsIikmJiFnLmhhc0NsYXNzKCJmci1maXIiKSYmIWcuaGFzQ2xhc3MoImZyLWZpbiIpKXt2YXIgaDsicmlnaHQiPT1nLmNzcygiZmxvYXQiKT8oaD1nLnBhcmVudCgpLGguaGFzQ2xhc3MoImYtaW1nLWVkaXRvciIpP2guYWRkQ2xhc3MoImZyLWZpciIpOmcuYWRkQ2xhc3MoImZyLWZpciIpKToibGVmdCI9PWcuY3NzKCJmbG9hdCIpPyhoPWcucGFyZW50KCksaC5oYXNDbGFzcygiZi1pbWctZWRpdG9yIik/aC5hZGRDbGFzcygiZnItZmlsIik6Zy5hZGRDbGFzcygiZnItZmlsIikpOihoPWcucGFyZW50KCksaC5oYXNDbGFzcygiZi1pbWctZWRpdG9yIik/aC5hZGRDbGFzcygiZnItZmluIik6Zy5hZGRDbGFzcygiZnItZmluIikpfWUub3B0aW9ucy50ZXh0TmVhckltYWdlP2cucmVtb3ZlQ2xhc3MoImZyLXRuaSIpOmcuYWRkQ2xhc3MoImZyLXRuaSIpLGcuY3NzKCJtYXJnaW4iLCIiKSxnLmNzcygiZmxvYXQiLCIiKX0pLHZvaWQgMD09PWIpZm9yKHZhciBmPTA7Zjx0aGlzLmltYWdlTGlzdC5sZW5ndGg7ZisrKWMuaW5kZXhPZih0aGlzLmltYWdlTGlzdFtmXS5hdHRyKCJzcmMiKSk8MCYmdGhpcy50cmlnZ2VyRXZlbnQoImFmdGVyUmVtb3ZlSW1hZ2UiLFt0aGlzLmltYWdlTGlzdFtmXV0sITEpO3RoaXMuaW1hZ2VMaXN0PWR9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pbnNlcnRJbWFnZT1mdW5jdGlvbigpe3RoaXMuY2xvc2VJbWFnZU1vZGUoKSx0aGlzLmltYWdlTW9kZT0hMSx0aGlzLnNob3dJbnNlcnRJbWFnZSgpLHRoaXMuc2F2ZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMub3B0aW9ucy5pbmxpbmVNb2RlfHx0aGlzLnBvc2l0aW9uUG9wdXAoImluc2VydEltYWdlIiksdGhpcy5pbWFnZU1vZGU9ITEsdGhpcy4kaW1hZ2Vfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0nKS52YWwoIiIpfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthLkVkaXRhYmxlLnByb3RvdHlwZS5zaG93TGlua1dyYXBwZXI9ZnVuY3Rpb24oKXt0aGlzLiRsaW5rX3dyYXBwZXImJih0aGlzLiRsaW5rX3dyYXBwZXIuc2hvdygpLHRoaXMuJGxpbmtfd3JhcHBlci50cmlnZ2VyKCJoaWRlTGlua0xpc3QiKSx0aGlzLiRsaW5rX3dyYXBwZXIudHJpZ2dlcigiaGlkZUxpbmtDbGFzc0xpc3QiKSx0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgiaW5wdXQuZi1sdSIpLnJlbW92ZUNsYXNzKCJmci1lcnJvciIpLHRoaXMuaW1hZ2VNb2RlfHwhdGhpcy5vcHRpb25zLmxpbmtUZXh0P3RoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0uZi1sdCcpLnBhcmVudCgpLmFkZENsYXNzKCJmci1oaWRkZW4iKTp0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgnaW5wdXRbdHlwZT0idGV4dCJdLmYtbHQnKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygiZnItaGlkZGVuIiksdGhpcy5pbWFnZU1vZGUmJnRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0uZi1sdScpLnJlbW92ZUF0dHIoImRpc2FibGVkIiksc2V0VGltZW91dChhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy4kbGlua193cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9InRleHQiXS5mLWx1JykuZm9jdXMoKS5zZWxlY3QoKX0sdGhpcyksMCksdGhpcy5saW5rPSEwKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaGlkZUxpbmtXcmFwcGVyPWZ1bmN0aW9uKCl7dGhpcy4kbGlua193cmFwcGVyJiZ0aGlzLiRsaW5rX3dyYXBwZXIuaGlkZSgpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5zaG93SW5zZXJ0TGluaz1mdW5jdGlvbigpe3RoaXMuaGlkZVBvcHVwcygpLHRoaXMuc2hvd0xpbmtXcmFwcGVyKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLmluaXRMaW5rRXZlbnRzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPWZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCksYS5wcmV2ZW50RGVmYXVsdCgpfSxkPWZ1bmN0aW9uKGMpe2lmKGMuc3RvcFByb3BhZ2F0aW9uKCksYy5wcmV2ZW50RGVmYXVsdCgpLGIuaXNEaXNhYmxlZClyZXR1cm4hMTtpZigiIiE9PWIudGV4dCgpKXJldHVybiBiLmhpZGUoKSwhMTtiLmxpbms9ITAsYi5jbGVhclNlbGVjdGlvbigpLGIucmVtb3ZlTWFya2VycygpLGIuc2VsZWN0aW9uRGlzYWJsZWR8fChhKHRoaXMpLmJlZm9yZSgnPHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLXR5cGU9InRydWUiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSxhKHRoaXMpLmFmdGVyKCc8c3BhbiBjbGFzcz0iZi1tYXJrZXIiIGRhdGEtdHlwZT0iZmFsc2UiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSksYi5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCksYi5leGVjKCJjcmVhdGVMaW5rIik7dmFyIGQ9YSh0aGlzKS5hdHRyKCJocmVmIil8fCIiO2IuJGxpbmtfd3JhcHBlci5maW5kKCJpbnB1dC5mLWx0IikudmFsKGEodGhpcykudGV4dCgpKSxiLmlzTGluaz8oIiMiPT1kJiYoZD0iIiksYi4kbGlua193cmFwcGVyLmZpbmQoImlucHV0I2YtbHUtIitiLl9pZCkudmFsKGQucmVwbGFjZSgvXCZhbXA7L2csIiYiKSksYi4kbGlua193cmFwcGVyLmZpbmQoIi5mLWV4dGVybmFsLWxpbmsiKS5hdHRyKCJocmVmIixkfHwiIyIpKTooYi4kbGlua193cmFwcGVyLmZpbmQoImlucHV0LmYtbHUiKS52YWwoZC5yZXBsYWNlKC9cJmFtcDsvZywiJiIpKSxiLiRsaW5rX3dyYXBwZXIuZmluZCgiLmYtZXh0ZXJuYWwtbGluayIpLmF0dHIoImhyZWYiLGQpKSxiLiRsaW5rX3dyYXBwZXIuZmluZCgnaW5wdXRbdHlwZT0iY2hlY2tib3giXScpLnByb3AoImNoZWNrZWQiLCJfYmxhbmsiPT1hKHRoaXMpLmF0dHIoInRhcmdldCIpKSxiLiRsaW5rX3dyYXBwZXIuZmluZCgibGkuZi1jaG9vc2UtbGluay1jbGFzcyIpLmVhY2goYS5wcm94eShmdW5jdGlvbihiLGMpe2EodGhpcykuaGFzQ2xhc3MoYShjKS5kYXRhKCJjbGFzcyIpKSYmYShjKS5jbGljaygpfSx0aGlzKSksYi5zaG93QnlDb29yZGluYXRlcyhhKHRoaXMpLm9mZnNldCgpLmxlZnQrYSh0aGlzKS5vdXRlcldpZHRoKCkvMixhKHRoaXMpLm9mZnNldCgpLnRvcCsocGFyc2VJbnQoYSh0aGlzKS5jc3MoInBhZGRpbmctdG9wIiksMTApfHwwKSthKHRoaXMpLmhlaWdodCgpKSxiLiRsaW5rX3dyYXBwZXIuZmluZCgiaW5wdXQuZi1sdSIpLmZvY3VzKCksYi5zaG93SW5zZXJ0TGluaygpLGEodGhpcykuaGFzQ2xhc3MoImZyLWZpbGUiKT9iLiRsaW5rX3dyYXBwZXIuZmluZCgiaW5wdXQuZi1sdSIpLmF0dHIoImRpc2FibGVkIiwiZGlzYWJsZWQiKTpiLiRsaW5rX3dyYXBwZXIuZmluZCgiaW5wdXQuZi1sdSIpLnJlbW92ZUF0dHIoImRpc2FibGVkIiksYi5jbG9zZUltYWdlTW9kZSgpfTt0aGlzLiRlbGVtZW50Lm9uKCJtb3VzZWRvd24iLCJhIixhLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuaXNSZXNpemluZygpfHxhLnN0b3BQcm9wYWdhdGlvbigpfSx0aGlzKSksdGhpcy5pc0xpbms/dGhpcy5pT1MoKT8odGhpcy4kZWxlbWVudC5vbigiY2xpY2siLGMpLHRoaXMuJGVsZW1lbnQub24oInRvdWNoZW5kIixkKSk6dGhpcy4kZWxlbWVudC5vbigiY2xpY2siLGQpOnRoaXMuaU9TKCk/KHRoaXMuJGVsZW1lbnQub24oImNsaWNrIiwnYTpub3QoW2NvbnRlbnRlZGl0YWJsZT0iZmFsc2UiXSknLGMpLHRoaXMuJGVsZW1lbnQub24oInRvdWNoZW5kIiwnYTpub3QoW2NvbnRlbnRlZGl0YWJsZT0iZmFsc2UiXSknLGQpLHRoaXMuJGVsZW1lbnQub24oImNsaWNrIiwnYVtjb250ZW50ZWRpdGFibGU9ImZhbHNlIl0nLGMpLHRoaXMuJGVsZW1lbnQub24oInRvdWNoZW5kIiwnYVtjb250ZW50ZWRpdGFibGU9ImZhbHNlIl0nLGMpKToodGhpcy4kZWxlbWVudC5vbigiY2xpY2siLCdhOm5vdChbY29udGVudGVkaXRhYmxlPSJmYWxzZSJdKScsZCksdGhpcy4kZWxlbWVudC5vbigiY2xpY2siLCdhW2NvbnRlbnRlZGl0YWJsZT0iZmFsc2UiXScsYykpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5kZXN0cm95TGluaz1mdW5jdGlvbigpe3RoaXMuJGxpbmtfd3JhcHBlci5odG1sKCIiKS5yZW1vdmVEYXRhKCkucmVtb3ZlKCl9LGEuRWRpdGFibGUucHJvdG90eXBlLmluaXRMaW5rPWZ1bmN0aW9uKCl7dGhpcy5idWlsZENyZWF0ZUxpbmsoKSx0aGlzLmluaXRMaW5rRXZlbnRzKCksdGhpcy5hZGRMaXN0ZW5lcigiZGVzdHJveSIsdGhpcy5kZXN0cm95TGluayl9LGEuRWRpdGFibGUuaW5pdGlhbGl6ZXJzLnB1c2goYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5pdExpbmspLGEuRWRpdGFibGUucHJvdG90eXBlLnJlbW92ZUxpbms9ZnVuY3Rpb24oKXt0aGlzLmltYWdlTW9kZT8oIkEiPT10aGlzLiRlbGVtZW50LmZpbmQoIi5mLWltZy1lZGl0b3IiKS5wYXJlbnQoKS5nZXQoMCkudGFnTmFtZSYmYSh0aGlzLiRlbGVtZW50LmZpbmQoIi5mLWltZy1lZGl0b3IiKS5nZXQoMCkpLnVud3JhcCgpLHRoaXMudHJpZ2dlckV2ZW50KCJpbWFnZUxpbmtSZW1vdmVkIiksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLnNob3dJbWFnZUVkaXRvcigpLHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLWVkaXRvciIpLmZpbmQoImltZyIpLmNsaWNrKCksdGhpcy5saW5rPSExKToodGhpcy5yZXN0b3JlU2VsZWN0aW9uKCksZG9jdW1lbnQuZXhlY0NvbW1hbmQoInVubGluayIsITEsbnVsbCksdGhpcy5pc0xpbmt8fHRoaXMuJGVsZW1lbnQuZmluZCgiYTplbXB0eSIpLnJlbW92ZSgpLHRoaXMudHJpZ2dlckV2ZW50KCJsaW5rUmVtb3ZlZCIpLHRoaXMuc2F2ZVVuZG9TdGVwKCksdGhpcy5oaWRlTGlua1dyYXBwZXIoKSx0aGlzLiRidHRuX3dyYXBwZXIuc2hvdygpLCghdGhpcy5vcHRpb25zLmlubGluZU1vZGV8fHRoaXMuaXNMaW5rKSYmdGhpcy5oaWRlKCksdGhpcy5saW5rPSExKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUud3JpdGVMaW5rPWZ1bmN0aW9uKGIsYyxkLGUsZil7dmFyIGc7dGhpcy5vcHRpb25zLm5vRm9sbG93JiYoZj0hMCksdGhpcy5vcHRpb25zLmFsd2F5c0JsYW5rJiYoZT0hMCk7dmFyIGg9IiIsaT0iIjtmPT09ITAmJi9eaHR0cHM/OlwvXC8vLnRlc3QoYikmJihoPSdyZWw9Im5vZm9sbG93IicpLGU9PT0hMCYmKGk9J3RhcmdldD0iX2JsYW5rIicpO3ZhciBqPWI7aWYoYj10aGlzLnNhbml0aXplVVJMKGIpLHRoaXMub3B0aW9ucy5jb252ZXJ0TWFpbEFkZHJlc3Nlcyl7dmFyIGs9L1thLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT8vaTtrLnRlc3QoYikmJjAhPT1iLmluZGV4T2YoIm1haWx0bzoiKSYmKGI9Im1haWx0bzoiK2IpfWlmKCIiPT09YilyZXR1cm4gdGhpcy4kbGlua193cmFwcGVyLmZpbmQoImlucHV0LmYtbHUiKS5hZGRDbGFzcygiZnItZXJyb3IiKS5mb2N1cygpLHRoaXMudHJpZ2dlckV2ZW50KCJiYWRMaW5rIixbal0sITEpLCExO2lmKHRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCJpbnB1dC5mLWx1IikucmVtb3ZlQ2xhc3MoImZyLWVycm9yIiksdGhpcy5pbWFnZU1vZGUpe2lmKCJBIiE9dGhpcy4kZWxlbWVudC5maW5kKCIuZi1pbWctZWRpdG9yIikucGFyZW50KCkuZ2V0KDApLnRhZ05hbWUpdGhpcy4kZWxlbWVudC5maW5kKCIuZi1pbWctZWRpdG9yIikud3JhcCgnPGEgZGF0YS1mci1saW5rPSJ0cnVlIiBocmVmPSInK2IrJyIgJytpKyIgIitoKyI+PC9hPiIpO2Vsc2V7dmFyIGw9dGhpcy4kZWxlbWVudC5maW5kKCIuZi1pbWctZWRpdG9yIikucGFyZW50KCk7ZT09PSEwP2wuYXR0cigidGFyZ2V0IiwiX2JsYW5rIik6bC5yZW1vdmVBdHRyKCJ0YXJnZXQiKSxmPT09ITA/bC5hdHRyKCJyZWwiLCJub2ZvbGxvdyIpOmwucmVtb3ZlQXR0cigicmVsIiksbC5yZW1vdmVDbGFzcyhPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMubGlua0NsYXNzZXMpLmpvaW4oIiAiKSksbC5hdHRyKCJocmVmIixiKS5hZGRDbGFzcyhkKX10aGlzLnRyaWdnZXJFdmVudCgiaW1hZ2VMaW5rSW5zZXJ0ZWQiLFtiXSksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLnNob3dJbWFnZUVkaXRvcigpLHRoaXMuJGVsZW1lbnQuZmluZCgiLmYtaW1nLWVkaXRvciIpLmZpbmQoImltZyIpLmNsaWNrKCksdGhpcy5saW5rPSExfWVsc2V7dmFyIG09bnVsbDt0aGlzLmlzTGluaz8iIj09PWMmJihjPXRoaXMuJGVsZW1lbnQudGV4dCgpKToodGhpcy5yZXN0b3JlU2VsZWN0aW9uKCksZz10aGlzLmdldFNlbGVjdGlvbkxpbmtzKCksZy5sZW5ndGg+MCYmKG09Z1swXS5hdHRyaWJ1dGVzLGlzX2ZpbGU9YShnWzBdKS5oYXNDbGFzcygiZnItZmlsZSIpKSx0aGlzLnNhdmVTZWxlY3Rpb25CeU1hcmtlcnMoKSxkb2N1bWVudC5leGVjQ29tbWFuZCgidW5saW5rIiwhMSxiKSx0aGlzLiRlbGVtZW50LmZpbmQoJ3NwYW5bZGF0YS1mci1saW5rPSJ0cnVlIl0nKS5lYWNoKGZ1bmN0aW9uKGIsYyl7YShjKS5yZXBsYWNlV2l0aChhKGMpLmh0bWwoKSl9KSx0aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSksdGhpcy5pc0xpbms/KHRoaXMuJGVsZW1lbnQudGV4dChjKSxnPVt0aGlzLiRlbGVtZW50LmF0dHIoImhyZWYiLGIpLmdldCgwKV0pOih0aGlzLnJlbW92ZU1hcmtlcnMoKSwodGhpcy5vcHRpb25zLmxpbmtUZXh0fHwiIj09PXRoaXMudGV4dCgpKSYmKHRoaXMuaW5zZXJ0SFRNTCgnPHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIiBkYXRhLWlkPSIwIiBkYXRhLXR5cGU9InRydWUiPjwvc3Bhbj4nKyhjfHxiKSsnPHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIiBkYXRhLWlkPSIwIiBkYXRhLXR5cGU9ImZhbHNlIj48L3NwYW4+JyksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCkpLGRvY3VtZW50LmV4ZWNDb21tYW5kKCJjcmVhdGVMaW5rIiwhMSxiKSxnPXRoaXMuZ2V0U2VsZWN0aW9uTGlua3MoKSk7Zm9yKHZhciBuPTA7bjxnLmxlbmd0aDtuKyspe2lmKG0pZm9yKHZhciBvPTA7bzxtLmxlbmd0aDtvKyspImhyZWYiIT1tW29dLm5vZGVOYW1lJiZhKGdbbl0pLmF0dHIobVtvXS5ub2RlTmFtZSxtW29dLnZhbHVlKTtlPT09ITA/YShnW25dKS5hdHRyKCJ0YXJnZXQiLCJfYmxhbmsiKTphKGdbbl0pLnJlbW92ZUF0dHIoInRhcmdldCIpLGY9PT0hMCYmL15odHRwcz86XC9cLy8udGVzdChiKT9hKGdbbl0pLmF0dHIoInJlbCIsIm5vZm9sbG93Iik6YShnW25dKS5yZW1vdmVBdHRyKCJyZWwiKSxhKGdbbl0pLmRhdGEoImZyLWxpbmsiLCEwKSxhKGdbbl0pLnJlbW92ZUNsYXNzKE9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy5saW5rQ2xhc3Nlcykuam9pbigiICIpKSxhKGdbbl0pLmFkZENsYXNzKGQpfXRoaXMuJGVsZW1lbnQuZmluZCgiYTplbXB0eSIpLnJlbW92ZSgpLHRoaXMudHJpZ2dlckV2ZW50KCJsaW5rSW5zZXJ0ZWQiLFtiXSksdGhpcy5zYXZlVW5kb1N0ZXAoKSx0aGlzLmhpZGVMaW5rV3JhcHBlcigpLHRoaXMuJGJ0dG5fd3JhcHBlci5zaG93KCksKCF0aGlzLm9wdGlvbnMuaW5saW5lTW9kZXx8dGhpcy5pc0xpbmspJiZ0aGlzLmhpZGUoKSx0aGlzLmxpbms9ITF9fSxhLkVkaXRhYmxlLnByb3RvdHlwZS5jcmVhdGVMaW5rSFRNTD1mdW5jdGlvbigpe3ZhciBhPSc8ZGl2IGNsYXNzPSJmcm9hbGEtcG9wdXAgZnJvYWxhLWxpbmstcG9wdXAiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+JzthKz0nPGg0PjxzcGFuIGRhdGEtdGV4dD0idHJ1ZSI+SW5zZXJ0IGxpbms8L3NwYW4+PGEgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJPcGVuIExpbmsiIGNsYXNzPSJmLWV4dGVybmFsLWxpbmsiIGhyZWY9IiMiPjxpIGNsYXNzPSJmYSBmYS1leHRlcm5hbC1saW5rIj48L2k+PC9hPjxpIHRpdGxlPSJDYW5jZWwiIGNsYXNzPSJmYSBmYS10aW1lcyIgaWQ9ImYtbGluay1jbG9zZS0nK3RoaXMuX2lkKyciPjwvaT48L2g0PicsYSs9JzxkaXYgY2xhc3M9ImYtcG9wdXAtbGluZSBmci1oaWRkZW4iPjxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iVGV4dCIgY2xhc3M9ImYtbHQiIGlkPSJmLWx0LScrdGhpcy5faWQrJyI+PC9kaXY+Jzt2YXIgYj0iIjtpZih0aGlzLm9wdGlvbnMubGlua0xpc3QubGVuZ3RoJiYoYj0iZi1iaSIpLGErPSc8ZGl2IGNsYXNzPSJmLXBvcHVwLWxpbmUiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iaHR0cDovL3d3dy5leGFtcGxlLmNvbSIgY2xhc3M9ImYtbHUgJytiKyciIGlkPSJmLWx1LScrdGhpcy5faWQrJyIvPicsdGhpcy5vcHRpb25zLmxpbmtMaXN0Lmxlbmd0aCl7YSs9JzxidXR0b24gY2xhc3M9ImYtYnJvd3NlLWxpbmtzIiBpZD0iZi1icm93c2UtbGlua3MtJyt0aGlzLl9pZCsnIj48aSBjbGFzcz0iZmEgZmEtY2hldnJvbi1kb3duIj48L2k+PC9idXR0b24+JyxhKz0nPHVsIGlkPSJmLWxpbmstbGlzdC0nK3RoaXMuX2lkKyciPic7Zm9yKHZhciBjPTA7Yzx0aGlzLm9wdGlvbnMubGlua0xpc3QubGVuZ3RoO2MrKyl7dmFyIGQ9dGhpcy5vcHRpb25zLmxpbmtMaXN0W2NdO2ErPSc8bGkgY2xhc3M9ImYtY2hvb3NlLWxpbmsiIGRhdGEtbm9mb2xsb3c9IicrZC5ub2ZvbGxvdysnIiBkYXRhLWJsYW5rPSInK2QuYmxhbmsrJyIgZGF0YS1ib2R5PSInK2QuYm9keSsnIiBkYXRhLXRpdGxlPSInK2QudGl0bGUrJyIgZGF0YS1ocmVmPSInK2QuaHJlZisnIj4nK2QuYm9keSsiPC9saT4ifWErPSI8L3VsPiJ9aWYoYSs9IjwvZGl2PiIsT2JqZWN0LmtleXModGhpcy5vcHRpb25zLmxpbmtDbGFzc2VzKS5sZW5ndGgpe2ErPSc8ZGl2IGNsYXNzPSJmLXBvcHVwLWxpbmUiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iQ2hvb3NlIGxpbmsgdHlwZSIgY2xhc3M9ImYtbHUgZi1iaSIgaWQ9ImYtbHVjLScrdGhpcy5faWQrJyIgZGlzYWJsZWQ9ImRpc2FibGVkIi8+JyxhKz0nPGJ1dHRvbiBjbGFzcz0iZi1icm93c2UtbGlua3MiIGlkPSJmLWxpbmtzLWNsYXNzLScrdGhpcy5faWQrJyI+PGkgY2xhc3M9ImZhIGZhLWNoZXZyb24tZG93biI+PC9pPjwvYnV0dG9uPicsYSs9Jzx1bCBpZD0iZi1saW5rLWNsYXNzLWxpc3QtJyt0aGlzLl9pZCsnIj4nO2Zvcih2YXIgZSBpbiB0aGlzLm9wdGlvbnMubGlua0NsYXNzZXMpe3ZhciBmPXRoaXMub3B0aW9ucy5saW5rQ2xhc3Nlc1tlXTthKz0nPGxpIGNsYXNzPSJmLWNob29zZS1saW5rLWNsYXNzIiBkYXRhLWNsYXNzPSInK2UrJyI+JytmKyI8L2xpPiJ9YSs9IjwvdWw+IixhKz0iPC9kaXY+In1yZXR1cm4gYSs9JzxkaXYgY2xhc3M9ImYtcG9wdXAtbGluZSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZi1jaGVja2JveC0nK3RoaXMuX2lkKyciPiA8bGFiZWwgZGF0YS10ZXh0PSJ0cnVlIiBmb3I9ImYtY2hlY2tib3gtJyt0aGlzLl9pZCsnIj5PcGVuIGluIG5ldyB0YWI8L2xhYmVsPjxidXR0b24gZGF0YS10ZXh0PSJ0cnVlIiB0eXBlPSJidXR0b24iIGNsYXNzPSJmLW9rIiBpZD0iZi1vay0nK3RoaXMuX2lkKyciPk9LPC9idXR0b24+Jyx0aGlzLm9wdGlvbnMudW5saW5rQnV0dG9uJiYoYSs9JzxidXR0b24gdHlwZT0iYnV0dG9uIiBkYXRhLXRleHQ9InRydWUiIGNsYXNzPSJmLW9rIGYtdW5saW5rIiBpZD0iZi11bmxpbmstJyt0aGlzLl9pZCsnIj5VTkxJTks8L2J1dHRvbj4nKSxhKz0iPC9kaXY+PC9kaXY+In0sYS5FZGl0YWJsZS5wcm90b3R5cGUuYnVpbGRDcmVhdGVMaW5rPWZ1bmN0aW9uKCl7dGhpcy4kbGlua193cmFwcGVyPWEodGhpcy5jcmVhdGVMaW5rSFRNTCgpKSx0aGlzLiRwb3B1cF9lZGl0b3IuYXBwZW5kKHRoaXMuJGxpbmtfd3JhcHBlcik7dmFyIGI9dGhpczt0aGlzLmFkZExpc3RlbmVyKCJoaWRlUG9wdXBzIix0aGlzLmhpZGVMaW5rV3JhcHBlciksdGhpcy4kbGlua193cmFwcGVyLm9uKCJtb3VzZXVwIixhLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuaXNSZXNpemluZygpfHwoYS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLiRsaW5rX3dyYXBwZXIudHJpZ2dlcigiaGlkZUxpbmtMaXN0IikpfSx0aGlzKSksdGhpcy5vcHRpb25zLmxpbmtUZXh0JiZ0aGlzLiRsaW5rX3dyYXBwZXIub24oIm1vdXNldXAga2V5ZG93biIsImlucHV0I2YtbHQtIit0aGlzLl9pZCxhLnByb3h5KGZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2g7YiYmMjc9PT1ifHxhLnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuJGxpbmtfd3JhcHBlci50cmlnZ2VyKCJoaWRlTGlua0xpc3QiKSx0aGlzLiRsaW5rX3dyYXBwZXIudHJpZ2dlcigiaGlkZUxpbmtDbGFzc0xpc3QiKX0sdGhpcykpLHRoaXMuJGxpbmtfd3JhcHBlci5vbigibW91c2V1cCBrZXlkb3duIiwiaW5wdXQjZi1sdS0iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oYSl7dmFyIGI9YS53aGljaDtiJiYyNz09PWJ8fGEuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy4kbGlua193cmFwcGVyLnRyaWdnZXIoImhpZGVMaW5rTGlzdCIpLHRoaXMuJGxpbmtfd3JhcHBlci50cmlnZ2VyKCJoaWRlTGlua0NsYXNzTGlzdCIpfSx0aGlzKSksdGhpcy4kbGlua193cmFwcGVyLm9uKCJjbGljayBrZXlkb3duIiwiaW5wdXQjZi1jaGVja2JveC0iK3RoaXMuX2lkLGZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2g7YiYmMjc9PT1ifHxhLnN0b3BQcm9wYWdhdGlvbigpfSksdGhpcy4kbGlua193cmFwcGVyLm9uKCJ0b3VjaGVuZCIsImJ1dHRvbiNmLW9rLSIrdGhpcy5faWQsZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24oKX0pLm9uKCJjbGljayIsImJ1dHRvbiNmLW9rLSIrdGhpcy5faWQsYS5wcm94eShmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy4kbGlua193cmFwcGVyLmZpbmQoImlucHV0I2YtbHQtIit0aGlzLl9pZCksYz10aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgiaW5wdXQjZi1sdS0iK3RoaXMuX2lkKSxkPXRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCJpbnB1dCNmLWx1Yy0iK3RoaXMuX2lkKSxlPXRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCJpbnB1dCNmLWNoZWNrYm94LSIrdGhpcy5faWQpO2E9Yj9iLnZhbCgpOiIiO3ZhciBmPWMudmFsKCk7dGhpcy5pc0xpbmsmJiIiPT09ZiYmKGY9IiMiKTt2YXIgZz0iIjtkJiYoZz1kLmRhdGEoImNsYXNzIikpLHRoaXMud3JpdGVMaW5rKGYsYSxnLGUucHJvcCgiY2hlY2tlZCIpKX0sdGhpcykpLHRoaXMuJGxpbmtfd3JhcHBlci5vbigiY2xpY2sgdG91Y2giLCJidXR0b24jZi11bmxpbmstIit0aGlzLl9pZCxhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5saW5rPSEwLHRoaXMucmVtb3ZlTGluaygpfSx0aGlzKSksdGhpcy5vcHRpb25zLmxpbmtMaXN0Lmxlbmd0aCYmKHRoaXMuJGxpbmtfd3JhcHBlci5vbigiY2xpY2sgdG91Y2giLCJsaS5mLWNob29zZS1saW5rIixmdW5jdGlvbigpe3ZhciBjPWIuJGxpbmtfd3JhcHBlci5maW5kKCJidXR0b24jZi1icm93c2UtbGlua3MtIitiLl9pZCksZD1iLiRsaW5rX3dyYXBwZXIuZmluZCgiaW5wdXQjZi1sdC0iK2IuX2lkKSxlPWIuJGxpbmtfd3JhcHBlci5maW5kKCJpbnB1dCNmLWx1LSIrYi5faWQpLGY9Yi4kbGlua193cmFwcGVyLmZpbmQoImlucHV0I2YtY2hlY2tib3gtIitiLl9pZCk7ZCYmZC52YWwoYSh0aGlzKS5kYXRhKCJib2R5IikpLGUudmFsKGEodGhpcykuZGF0YSgiaHJlZiIpKSxmLnByb3AoImNoZWNrZWQiLGEodGhpcykuZGF0YSgiYmxhbmsiKSksYy5jbGljaygpfSkub24oIm1vdXNldXAiLCJsaS5mLWNob29zZS1saW5rIixmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfSksdGhpcy4kbGlua193cmFwcGVyLm9uKCJjbGljayIsImJ1dHRvbiNmLWJyb3dzZS1saW5rcy0iK3RoaXMuX2lkLGZ1bmN0aW9uKGMpe2Muc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGQ9Yi4kbGlua193cmFwcGVyLmZpbmQoInVsI2YtbGluay1saXN0LSIrYi5faWQpO2IuJGxpbmtfd3JhcHBlci50cmlnZ2VyKCJoaWRlTGlua0NsYXNzTGlzdCIpLGEodGhpcykuZmluZCgiaSIpLnRvZ2dsZUNsYXNzKCJmYS1jaGV2cm9uLWRvd24iKSxhKHRoaXMpLmZpbmQoImkiKS50b2dnbGVDbGFzcygiZmEtY2hldnJvbi11cCIpLGQudG9nZ2xlKCl9KS5vbigibW91c2V1cCIsImJ1dHRvbiNmLWJyb3dzZS1saW5rcy0iK3RoaXMuX2lkLGZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCl9KSx0aGlzLiRsaW5rX3dyYXBwZXIuYmluZCgiaGlkZUxpbmtMaXN0IixmdW5jdGlvbigpe3ZhciBhPWIuJGxpbmtfd3JhcHBlci5maW5kKCJ1bCNmLWxpbmstbGlzdC0iK2IuX2lkKSxjPWIuJGxpbmtfd3JhcHBlci5maW5kKCJidXR0b24jZi1icm93c2UtbGlua3MtIitiLl9pZCk7YSYmYS5pcygiOnZpc2libGUiKSYmYy5jbGljaygpfSkpLE9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy5saW5rQ2xhc3NlcykubGVuZ3RoJiYodGhpcy4kbGlua193cmFwcGVyLm9uKCJtb3VzZXVwIGtleWRvd24iLCJpbnB1dCNmLWx1Yy0iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oYSl7dmFyIGI9YS53aGljaDtiJiYyNz09PWJ8fGEuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy4kbGlua193cmFwcGVyLnRyaWdnZXIoImhpZGVMaW5rTGlzdCIpLHRoaXMuJGxpbmtfd3JhcHBlci50cmlnZ2VyKCJoaWRlTGlua0NsYXNzTGlzdCIpfSx0aGlzKSksdGhpcy4kbGlua193cmFwcGVyLm9uKCJjbGljayB0b3VjaCIsImxpLmYtY2hvb3NlLWxpbmstY2xhc3MiLGZ1bmN0aW9uKCl7dmFyIGM9Yi4kbGlua193cmFwcGVyLmZpbmQoImlucHV0I2YtbHVjLSIrYi5faWQpO2MudmFsKGEodGhpcykudGV4dCgpKSxjLmRhdGEoImNsYXNzIixhKHRoaXMpLmRhdGEoImNsYXNzIikpLGIuJGxpbmtfd3JhcHBlci50cmlnZ2VyKCJoaWRlTGlua0NsYXNzTGlzdCIpfSkub24oIm1vdXNldXAiLCJsaS5mLWNob29zZS1saW5rLWNsYXNzIixmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfSksdGhpcy4kbGlua193cmFwcGVyLm9uKCJjbGljayIsImJ1dHRvbiNmLWxpbmtzLWNsYXNzLSIrdGhpcy5faWQsZnVuY3Rpb24oYyl7Yy5zdG9wUHJvcGFnYXRpb24oKSxiLiRsaW5rX3dyYXBwZXIudHJpZ2dlcigiaGlkZUxpbmtMaXN0Iik7dmFyIGQ9Yi4kbGlua193cmFwcGVyLmZpbmQoInVsI2YtbGluay1jbGFzcy1saXN0LSIrYi5faWQpO2EodGhpcykuZmluZCgiaSIpLnRvZ2dsZUNsYXNzKCJmYS1jaGV2cm9uLWRvd24iKSxhKHRoaXMpLmZpbmQoImkiKS50b2dnbGVDbGFzcygiZmEtY2hldnJvbi11cCIpLGQudG9nZ2xlKCl9KS5vbigibW91c2V1cCIsImJ1dHRvbiNmLWxpbmtzLWNsYXNzLSIrdGhpcy5faWQsZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24oKX0pLHRoaXMuJGxpbmtfd3JhcHBlci5iaW5kKCJoaWRlTGlua0NsYXNzTGlzdCIsZnVuY3Rpb24oKXt2YXIgYT1iLiRsaW5rX3dyYXBwZXIuZmluZCgidWwjZi1saW5rLWNsYXNzLWxpc3QtIitiLl9pZCksYz1iLiRsaW5rX3dyYXBwZXIuZmluZCgiYnV0dG9uI2YtbGlua3MtY2xhc3MtIitiLl9pZCk7YSYmYS5pcygiOnZpc2libGUiKSYmYy5jbGljaygpfSkpLHRoaXMuJGxpbmtfd3JhcHBlci5vbigiY2xpY2siLCJpI2YtbGluay1jbG9zZS0iK3RoaXMuX2lkLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLiRidHRuX3dyYXBwZXIuc2hvdygpLHRoaXMuaGlkZUxpbmtXcmFwcGVyKCksKCF0aGlzLm9wdGlvbnMuaW5saW5lTW9kZSYmIXRoaXMuaW1hZ2VNb2RlfHx0aGlzLmlzTGlua3x8MD09PXRoaXMub3B0aW9ucy5idXR0b25zLmxlbmd0aCkmJnRoaXMuaGlkZSgpLHRoaXMuaW1hZ2VNb2RlP3RoaXMuc2hvd0ltYWdlRWRpdG9yKCk6dGhpcy5yZXN0b3JlU2VsZWN0aW9uKCl9LHRoaXMpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uTGlua3M9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlPVtdO2lmKHdpbmRvdy5nZXRTZWxlY3Rpb24pe3ZhciBmPXdpbmRvdy5nZXRTZWxlY3Rpb24oKTtpZihmLmdldFJhbmdlQXQmJmYucmFuZ2VDb3VudCl7ZD1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO2Zvcih2YXIgZz0wO2c8Zi5yYW5nZUNvdW50OysrZylpZihhPWYuZ2V0UmFuZ2VBdChnKSxiPWEuY29tbW9uQW5jZXN0b3JDb250YWluZXIsYiYmMSE9Yi5ub2RlVHlwZSYmKGI9Yi5wYXJlbnROb2RlKSxiJiYiYSI9PWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSllLnB1c2goYik7ZWxzZXtjPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKTtmb3IodmFyIGg9MDtoPGMubGVuZ3RoOysraClkLnNlbGVjdE5vZGVDb250ZW50cyhjW2hdKSxkLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLkVORF9UT19TVEFSVCxhKTwxJiZkLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLlNUQVJUX1RPX0VORCxhKT4tMSYmZS5wdXNoKGNbaF0pfX19ZWxzZSBpZihkb2N1bWVudC5zZWxlY3Rpb24mJiJDb250cm9sIiE9ZG9jdW1lbnQuc2VsZWN0aW9uLnR5cGUpaWYoYT1kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKSxiPWEucGFyZW50RWxlbWVudCgpLCJhIj09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKWUucHVzaChiKTtlbHNle2M9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpLGQ9ZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtmb3IodmFyIGk9MDtpPGMubGVuZ3RoOysraSlkLm1vdmVUb0VsZW1lbnRUZXh0KGNbaV0pLGQuY29tcGFyZUVuZFBvaW50cygiU3RhcnRUb0VuZCIsYSk+LTEmJmQuY29tcGFyZUVuZFBvaW50cygiRW5kVG9TdGFydCIsYSk8MSYmZS5wdXNoKGNbaV0pfXJldHVybiBlfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pbnNlcnRMaW5rPWZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmlubGluZU1vZGV8fCh0aGlzLmNsb3NlSW1hZ2VNb2RlKCksdGhpcy5pbWFnZU1vZGU9ITEsdGhpcy5wb3NpdGlvblBvcHVwKCJjcmVhdGVMaW5rIikpLHRoaXMuc2hvd0luc2VydExpbmsoKSx0aGlzLnNhdmVTZWxlY3Rpb24oKTt2YXIgYj10aGlzLmdldFNlbGVjdGlvbkxpbmsoKXx8IiIsYz10aGlzLmdldFNlbGVjdGlvbkxpbmtzKCk7Yy5sZW5ndGg+MD8odGhpcy4kbGlua193cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9ImNoZWNrYm94Il0nKS5wcm9wKCJjaGVja2VkIiwiX2JsYW5rIj09YShjWzBdKS5hdHRyKCJ0YXJnZXQiKSksdGhpcy4kbGlua193cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9InRleHQiXS5mLWx0JykudmFsKGEoY1swXSkudGV4dCgpfHwiIiksYShjWzBdKS5oYXNDbGFzcygiZnItZmlsZSIpP3RoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0uZi1sdScpLmF0dHIoImRpc2FibGVkIiwiZGlzYWJsZWQiKTp0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgnaW5wdXRbdHlwZT0idGV4dCJdLmYtbHUnKS5yZW1vdmVBdHRyKCJkaXNhYmxlZCIpLHRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCJhLmYtZXh0ZXJuYWwtbGluaywgYnV0dG9uLmYtdW5saW5rIikuc2hvdygpKToodGhpcy4kbGlua193cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9ImNoZWNrYm94Il0nKS5wcm9wKCJjaGVja2VkIix0aGlzLm9wdGlvbnMuYWx3YXlzQmxhbmspLHRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0uZi1sdCcpLnZhbCh0aGlzLnRleHQoKSksdGhpcy4kbGlua193cmFwcGVyLmZpbmQoJ2lucHV0W3R5cGU9InRleHQiXS5mLWx1JykucmVtb3ZlQXR0cigiZGlzYWJsZWQiKSx0aGlzLiRsaW5rX3dyYXBwZXIuZmluZCgiYS5mLWV4dGVybmFsLWxpbmssIGJ1dHRvbi5mLXVubGluayIpLmhpZGUoKSksdGhpcy4kbGlua193cmFwcGVyLmZpbmQoIi5mLWV4dGVybmFsLWxpbmsiKS5hdHRyKCJocmVmIixifHwiIyIpLHRoaXMuJGxpbmtfd3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPSJ0ZXh0Il0uZi1sdScpLnZhbChiLnJlcGxhY2UoL1wmYW1wOy9nLCImIil8fCJodHRwOi8vIil9fShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EuRWRpdGFibGUucHJvdG90eXBlLmJyb3dzZXJGaXhlcz1mdW5jdGlvbigpe3RoaXMucHJlQmxvY2txdW90ZUVudGVyKCksdGhpcy5kb21JbnNlcnQoKSx0aGlzLmZpeElNRSgpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5wcmVCbG9ja3F1b3RlRW50ZXI9ZnVuY3Rpb24oKXt0aGlzLmlzSW1hZ2V8fHRoaXMuaXNMaW5rfHx0aGlzLm9wdGlvbnMuZWRpdEluUG9wdXB8fHRoaXMuJGVsZW1lbnQub24oImtleWRvd24iLGEucHJveHkoZnVuY3Rpb24oYil7dmFyIGM9Yi53aGljaCxkPVsiUFJFIiwiQkxPQ0tRVU9URSJdLGU9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpWzBdO2lmKDEzPT1jJiYiIj09PXRoaXMudGV4dCgpJiZkLmluZGV4T2YoZS50YWdOYW1lKT49MCYmMD09PWEoZSkucGFyZW50cygidWwsIG9sIikubGVuZ3RoKWlmKHRoaXMuZ2V0U2VsZWN0aW9uVGV4dEluZm8oZSkuYXRFbmQmJiFiLnNoaWZ0S2V5KXtiLnByZXZlbnREZWZhdWx0KCk7dmFyIGY9YSgiPHA+PGJyPjwvcD4iKTthKGUpLmFmdGVyKGYpLHRoaXMuc2V0U2VsZWN0aW9uKGYuZ2V0KDApKX1lbHNlKHRoaXMuYnJvd3Nlci53ZWJraXR8fHRoaXMuYnJvd3Nlci5tc2llKSYmKGIucHJldmVudERlZmF1bHQoKSx0aGlzLmluc2VydEhUTUwodGhpcy5lbmRzV2l0aChhKGUpLmh0bWwoKSwiPGJyPiIpfHwhdGhpcy5nZXRTZWxlY3Rpb25UZXh0SW5mbyhlKS5hdEVuZD8iPGJyPiI6Ijxicj48YnI+IikpfSx0aGlzKSl9LGEuRWRpdGFibGUucHJvdG90eXBlLmRvbUluc2VydD1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQub24oIkRPTU5vZGVJbnNlcnRlZCIsYS5wcm94eShmdW5jdGlvbihiKXsiU1BBTiIhPWIudGFyZ2V0LnRhZ05hbWV8fGEoYi50YXJnZXQpLmF0dHIoImRhdGEtZnItdmVyaWZpZWQiKXx8dGhpcy5ub192ZXJpZnl8fChhKGIudGFyZ2V0KS5iZWZvcmUoYShiLnRhcmdldCkuY29udGVudHMoKSksYShiLnRhcmdldCkucmVtb3ZlKCkpfSx0aGlzKSl9LGEuRWRpdGFibGUucHJvdG90eXBlLmZpeElNRT1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQuZ2V0KDApLm1zR2V0SW5wdXRDb250ZXh0JiYodGhpcy4kZWxlbWVudC5nZXQoMCkubXNHZXRJbnB1dENvbnRleHQoKS5hZGRFdmVudExpc3RlbmVyKCJNU0NhbmRpZGF0ZVdpbmRvd1Nob3ciLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmltZT0hMH0sdGhpcykpLHRoaXMuJGVsZW1lbnQuZ2V0KDApLm1zR2V0SW5wdXRDb250ZXh0KCkuYWRkRXZlbnRMaXN0ZW5lcigiTVNDYW5kaWRhdGVXaW5kb3dIaWRlIixhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5pbWU9ITEsdGhpcy4kZWxlbWVudC50cmlnZ2VyKCJrZXlkb3duIiksdGhpcy5vbGRIVE1MPSIifSx0aGlzKSkpfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXsiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbImpxdWVyeSJdLGEpOmEoalF1ZXJ5KX0oZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2Z1bmN0aW9uIGIoKXtkPyhjKCksTShiKSxlPSEwLGQ9ITEpOmU9ITF9dmFyIGM9YSxkPSExLGU9ITE7dGhpcy5raWNrPWZ1bmN0aW9uKCl7ZD0hMCxlfHxiKCl9LHRoaXMuZW5kPWZ1bmN0aW9uKGEpe3ZhciBiPWM7YSYmKGU/KGM9ZD9mdW5jdGlvbigpe2IoKSxhKCl9OmEsZD0hMCk6YSgpKX19ZnVuY3Rpb24gZCgpe3JldHVybiEwfWZ1bmN0aW9uIGUoKXtyZXR1cm4hMX1mdW5jdGlvbiBmKGEpe2EucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiBnKGEpe05bYS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpXXx8YS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIGgoYSl7cmV0dXJuIDE9PT1hLndoaWNoJiYhYS5jdHJsS2V5JiYhYS5hbHRLZXl9ZnVuY3Rpb24gaShhLGIpe3ZhciBjLGQ7aWYoYS5pZGVudGlmaWVkVG91Y2gpcmV0dXJuIGEuaWRlbnRpZmllZFRvdWNoKGIpO2ZvcihjPS0xLGQ9YS5sZW5ndGg7KytjPGQ7KWlmKGFbY10uaWRlbnRpZmllcj09PWIpcmV0dXJuIGFbY119ZnVuY3Rpb24gaihhLGIpe3ZhciBjPWkoYS5jaGFuZ2VkVG91Y2hlcyxiLmlkZW50aWZpZXIpO2lmKGMmJihjLnBhZ2VYIT09Yi5wYWdlWHx8Yy5wYWdlWSE9PWIucGFnZVkpKXJldHVybiBjfWZ1bmN0aW9uIGsoYSl7dmFyIGI7aChhKSYmKGI9e3RhcmdldDphLnRhcmdldCxzdGFydFg6YS5wYWdlWCxzdGFydFk6YS5wYWdlWSx0aW1lU3RhbXA6YS50aW1lU3RhbXB9LEooZG9jdW1lbnQsTy5tb3ZlLGwsYiksSihkb2N1bWVudCxPLmNhbmNlbCxtLGIpKX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEuZGF0YTtzKGEsYixhLG4pfWZ1bmN0aW9uIG0oKXtuKCl9ZnVuY3Rpb24gbigpe0soZG9jdW1lbnQsTy5tb3ZlLGwpLEsoZG9jdW1lbnQsTy5jYW5jZWwsbSl9ZnVuY3Rpb24gbyhhKXt2YXIgYixjO05bYS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpXXx8KGI9YS5jaGFuZ2VkVG91Y2hlc1swXSxjPXt0YXJnZXQ6Yi50YXJnZXQsc3RhcnRYOmIucGFnZVgsc3RhcnRZOmIucGFnZVksdGltZVN0YW1wOmEudGltZVN0YW1wLGlkZW50aWZpZXI6Yi5pZGVudGlmaWVyfSxKKGRvY3VtZW50LFAubW92ZSsiLiIrYi5pZGVudGlmaWVyLHAsYyksSihkb2N1bWVudCxQLmNhbmNlbCsiLiIrYi5pZGVudGlmaWVyLHEsYykpfWZ1bmN0aW9uIHAoYSl7dmFyIGI9YS5kYXRhLGM9aihhLGIpO2MmJnMoYSxiLGMscil9ZnVuY3Rpb24gcShhKXt2YXIgYj1hLmRhdGEsYz1pKGEuY2hhbmdlZFRvdWNoZXMsYi5pZGVudGlmaWVyKTtjJiZyKGIuaWRlbnRpZmllcil9ZnVuY3Rpb24gcihhKXtLKGRvY3VtZW50LCIuIithLHApLEsoZG9jdW1lbnQsIi4iK2EscSl9ZnVuY3Rpb24gcyhhLGIsYyxkKXt2YXIgZT1jLnBhZ2VYLWIuc3RhcnRYLGY9Yy5wYWdlWS1iLnN0YXJ0WTtJKkk+ZSplK2YqZnx8dihhLGIsYyxlLGYsZCl9ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzLl9oYW5kbGVkPWQsITF9ZnVuY3Rpb24gdShhKXt0cnl7YS5faGFuZGxlZCgpfWNhdGNoKGIpe3JldHVybiExfX1mdW5jdGlvbiB2KGEsYixjLGQsZSxmKXt7dmFyIGcsaDtiLnRhcmdldH1nPWEudGFyZ2V0VG91Y2hlcyxoPWEudGltZVN0YW1wLWIudGltZVN0YW1wLGIudHlwZT0ibW92ZXN0YXJ0IixiLmRpc3RYPWQsYi5kaXN0WT1lLGIuZGVsdGFYPWQsYi5kZWx0YVk9ZSxiLnBhZ2VYPWMucGFnZVgsYi5wYWdlWT1jLnBhZ2VZLGIudmVsb2NpdHlYPWQvaCxiLnZlbG9jaXR5WT1lL2gsYi50YXJnZXRUb3VjaGVzPWcsYi5maW5nZXI9Zz9nLmxlbmd0aDoxLGIuX2hhbmRsZWQ9dCxiLl9wcmV2ZW50VG91Y2htb3ZlRGVmYXVsdD1mdW5jdGlvbigpe2EucHJldmVudERlZmF1bHQoKX0sTChiLnRhcmdldCxiKSxmKGIuaWRlbnRpZmllcil9ZnVuY3Rpb24gdyhhKXt2YXIgYj1hLmRhdGEudGltZXI7YS5kYXRhLnRvdWNoPWEsYS5kYXRhLnRpbWVTdGFtcD1hLnRpbWVTdGFtcCxiLmtpY2soKX1mdW5jdGlvbiB4KGEpe3ZhciBiPWEuZGF0YS5ldmVudCxjPWEuZGF0YS50aW1lcjt5KCksRChiLGMsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SyhiLnRhcmdldCwiY2xpY2siLGUpfSwwKX0pfWZ1bmN0aW9uIHkoKXtLKGRvY3VtZW50LE8ubW92ZSx3KSxLKGRvY3VtZW50LE8uZW5kLHgpfWZ1bmN0aW9uIHooYSl7dmFyIGI9YS5kYXRhLmV2ZW50LGM9YS5kYXRhLnRpbWVyLGQ9aihhLGIpO2QmJihhLnByZXZlbnREZWZhdWx0KCksYi50YXJnZXRUb3VjaGVzPWEudGFyZ2V0VG91Y2hlcyxhLmRhdGEudG91Y2g9ZCxhLmRhdGEudGltZVN0YW1wPWEudGltZVN0YW1wLGMua2ljaygpKX1mdW5jdGlvbiBBKGEpe3ZhciBiPWEuZGF0YS5ldmVudCxjPWEuZGF0YS50aW1lcixkPWkoYS5jaGFuZ2VkVG91Y2hlcyxiLmlkZW50aWZpZXIpO2QmJihCKGIpLEQoYixjKSl9ZnVuY3Rpb24gQihhKXtLKGRvY3VtZW50LCIuIithLmlkZW50aWZpZXIseiksSyhkb2N1bWVudCwiLiIrYS5pZGVudGlmaWVyLEEpfWZ1bmN0aW9uIEMoYSxiLGMpe3ZhciBkPWMtYS50aW1lU3RhbXA7YS50eXBlPSJtb3ZlIixhLmRpc3RYPWIucGFnZVgtYS5zdGFydFgsYS5kaXN0WT1iLnBhZ2VZLWEuc3RhcnRZLGEuZGVsdGFYPWIucGFnZVgtYS5wYWdlWCxhLmRlbHRhWT1iLnBhZ2VZLWEucGFnZVksYS52ZWxvY2l0eVg9LjMqYS52ZWxvY2l0eVgrLjcqYS5kZWx0YVgvZCxhLnZlbG9jaXR5WT0uMyphLnZlbG9jaXR5WSsuNyphLmRlbHRhWS9kLGEucGFnZVg9Yi5wYWdlWCxhLnBhZ2VZPWIucGFnZVl9ZnVuY3Rpb24gRChhLGIsYyl7Yi5lbmQoZnVuY3Rpb24oKXtyZXR1cm4gYS50eXBlPSJtb3ZlZW5kIixMKGEudGFyZ2V0LGEpLGMmJmMoKX0pfWZ1bmN0aW9uIEUoKXtyZXR1cm4gSih0aGlzLCJtb3Zlc3RhcnQubW92ZSIsdSksITB9ZnVuY3Rpb24gRigpe3JldHVybiBLKHRoaXMsImRyYWdzdGFydCBkcmFnIixmKSxLKHRoaXMsIm1vdXNlZG93biB0b3VjaHN0YXJ0IixnKSxLKHRoaXMsIm1vdmVzdGFydCIsdSksITB9ZnVuY3Rpb24gRyhhKXsibW92ZSIhPT1hLm5hbWVzcGFjZSYmIm1vdmVlbmQiIT09YS5uYW1lc3BhY2UmJihKKHRoaXMsImRyYWdzdGFydC4iK2EuZ3VpZCsiIGRyYWcuIithLmd1aWQsZixiLGEuc2VsZWN0b3IpLEoodGhpcywibW91c2Vkb3duLiIrYS5ndWlkLGcsYixhLnNlbGVjdG9yKSl9ZnVuY3Rpb24gSChhKXsibW92ZSIhPT1hLm5hbWVzcGFjZSYmIm1vdmVlbmQiIT09YS5uYW1lc3BhY2UmJihLKHRoaXMsImRyYWdzdGFydC4iK2EuZ3VpZCsiIGRyYWcuIithLmd1aWQpLEsodGhpcywibW91c2Vkb3duLiIrYS5ndWlkKSl9dmFyIEk9NixKPWEuZXZlbnQuYWRkLEs9YS5ldmVudC5yZW1vdmUsTD1mdW5jdGlvbihiLGMsZCl7YS5ldmVudC50cmlnZ2VyKGMsZCxiKX0sTT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXthKCkKfSwyNSl9fSgpLE49e3RleHRhcmVhOiEwLGlucHV0OiEwLHNlbGVjdDohMCxidXR0b246ITB9LE89e21vdmU6Im1vdXNlbW92ZSIsY2FuY2VsOiJtb3VzZXVwIGRyYWdzdGFydCIsZW5kOiJtb3VzZXVwIn0sUD17bW92ZToidG91Y2htb3ZlIixjYW5jZWw6InRvdWNoZW5kIixlbmQ6InRvdWNoZW5kIn07YS5ldmVudC5zcGVjaWFsLm1vdmVzdGFydD17c2V0dXA6RSx0ZWFyZG93bjpGLGFkZDpHLHJlbW92ZTpILF9kZWZhdWx0OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoKXtDKGYsZy50b3VjaCxnLnRpbWVTdGFtcCksTChhLnRhcmdldCxmKX12YXIgZixnO2EuX2hhbmRsZWQoKSYmKGY9e3RhcmdldDphLnRhcmdldCxzdGFydFg6YS5zdGFydFgsc3RhcnRZOmEuc3RhcnRZLHBhZ2VYOmEucGFnZVgscGFnZVk6YS5wYWdlWSxkaXN0WDphLmRpc3RYLGRpc3RZOmEuZGlzdFksZGVsdGFYOmEuZGVsdGFYLGRlbHRhWTphLmRlbHRhWSx2ZWxvY2l0eVg6YS52ZWxvY2l0eVgsdmVsb2NpdHlZOmEudmVsb2NpdHlZLHRpbWVTdGFtcDphLnRpbWVTdGFtcCxpZGVudGlmaWVyOmEuaWRlbnRpZmllcix0YXJnZXRUb3VjaGVzOmEudGFyZ2V0VG91Y2hlcyxmaW5nZXI6YS5maW5nZXJ9LGc9e2V2ZW50OmYsdGltZXI6bmV3IGMoZCksdG91Y2g6Yix0aW1lU3RhbXA6Yn0sYS5pZGVudGlmaWVyPT09Yj8oSihhLnRhcmdldCwiY2xpY2siLGUpLEooZG9jdW1lbnQsTy5tb3ZlLHcsZyksSihkb2N1bWVudCxPLmVuZCx4LGcpKTooYS5fcHJldmVudFRvdWNobW92ZURlZmF1bHQoKSxKKGRvY3VtZW50LFAubW92ZSsiLiIrYS5pZGVudGlmaWVyLHosZyksSihkb2N1bWVudCxQLmVuZCsiLiIrYS5pZGVudGlmaWVyLEEsZykpKX19LGEuZXZlbnQuc3BlY2lhbC5tb3ZlPXtzZXR1cDpmdW5jdGlvbigpe0oodGhpcywibW92ZXN0YXJ0Lm1vdmUiLGEubm9vcCl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7Syh0aGlzLCJtb3Zlc3RhcnQubW92ZSIsYS5ub29wKX19LGEuZXZlbnQuc3BlY2lhbC5tb3ZlZW5kPXtzZXR1cDpmdW5jdGlvbigpe0oodGhpcywibW92ZXN0YXJ0Lm1vdmVlbmQiLGEubm9vcCl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7Syh0aGlzLCJtb3Zlc3RhcnQubW92ZWVuZCIsYS5ub29wKX19LEooZG9jdW1lbnQsIm1vdXNlZG93bi5tb3ZlIixrKSxKKGRvY3VtZW50LCJ0b3VjaHN0YXJ0Lm1vdmUiLG8pLCJmdW5jdGlvbiI9PXR5cGVvZiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiYmIWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bImNoYW5nZWRUb3VjaGVzIiwidGFyZ2V0VG91Y2hlcyJdLGM9Yi5sZW5ndGg7Yy0tOyktMT09PWEuZXZlbnQucHJvcHMuaW5kZXhPZihiW2NdKSYmYS5ldmVudC5wcm9wcy5wdXNoKGJbY10pfShhKX0pLHdpbmRvdy5XWVNJV1lHTW9kZXJuaXpyPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe24uY3NzVGV4dD1hfWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gdHlwZW9mIGE9PT1ifXZhciBmLGcsaCxpPSIyLjcuMSIsaj17fSxrPWIuZG9jdW1lbnRFbGVtZW50LGw9Im1vZGVybml6ciIsbT1iLmNyZWF0ZUVsZW1lbnQobCksbj1tLnN0eWxlLG89KHt9LnRvU3RyaW5nLCIgLXdlYmtpdC0gLW1vei0gLW8tIC1tcy0gIi5zcGxpdCgiICIpKSxwPXt9LHE9W10scj1xLnNsaWNlLHM9ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGYsZyxoLGksaj1iLmNyZWF0ZUVsZW1lbnQoImRpdiIpLG09Yi5ib2R5LG49bXx8Yi5jcmVhdGVFbGVtZW50KCJib2R5Iik7aWYocGFyc2VJbnQoZCwxMCkpZm9yKDtkLS07KWg9Yi5jcmVhdGVFbGVtZW50KCJkaXYiKSxoLmlkPWU/ZVtkXTpsKyhkKzEpLGouYXBwZW5kQ2hpbGQoaCk7cmV0dXJuIGY9WyImIzE3MzsiLCc8c3R5bGUgaWQ9InMnLGwsJyI+JyxhLCI8L3N0eWxlPiJdLmpvaW4oIiIpLGouaWQ9bCwobT9qOm4pLmlubmVySFRNTCs9ZixuLmFwcGVuZENoaWxkKGopLG18fChuLnN0eWxlLmJhY2tncm91bmQ9IiIsbi5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIixpPWsuc3R5bGUub3ZlcmZsb3csay5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIixrLmFwcGVuZENoaWxkKG4pKSxnPWMoaixhKSxtP2oucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChqKToobi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pLGsuc3R5bGUub3ZlcmZsb3c9aSksISFnfSx0PWZ1bmN0aW9uKGIpe3ZhciBjPWEubWF0Y2hNZWRpYXx8YS5tc01hdGNoTWVkaWE7aWYoYylyZXR1cm4gYyhiKS5tYXRjaGVzO3ZhciBkO3JldHVybiBzKCJAbWVkaWEgIitiKyIgeyAjIitsKyIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IH0gfSIsZnVuY3Rpb24oYil7ZD0iYWJzb2x1dGUiPT0oYS5nZXRDb21wdXRlZFN0eWxlP2dldENvbXB1dGVkU3R5bGUoYixudWxsKTpiLmN1cnJlbnRTdHlsZSkucG9zaXRpb259KSxkfSx1PXt9Lmhhc093blByb3BlcnR5O2g9ZSh1LCJ1bmRlZmluZWQiKXx8ZSh1LmNhbGwsInVuZGVmaW5lZCIpP2Z1bmN0aW9uKGEsYil7cmV0dXJuIGIgaW4gYSYmZShhLmNvbnN0cnVjdG9yLnByb3RvdHlwZVtiXSwidW5kZWZpbmVkIil9OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHUuY2FsbChhLGIpfSxGdW5jdGlvbi5wcm90b3R5cGUuYmluZHx8KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGIpdGhyb3cgbmV3IFR5cGVFcnJvcjt2YXIgYz1yLmNhbGwoYXJndW1lbnRzLDEpLGQ9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgZCl7dmFyIGU9ZnVuY3Rpb24oKXt9O2UucHJvdG90eXBlPWIucHJvdG90eXBlO3ZhciBmPW5ldyBlLGc9Yi5hcHBseShmLGMuY29uY2F0KHIuY2FsbChhcmd1bWVudHMpKSk7cmV0dXJuIE9iamVjdChnKT09PWc/ZzpmfXJldHVybiBiLmFwcGx5KGEsYy5jb25jYXQoci5jYWxsKGFyZ3VtZW50cykpKX07cmV0dXJuIGR9KSxwLnRvdWNoPWZ1bmN0aW9uKCl7dmFyIGM7cmV0dXJuIm9udG91Y2hzdGFydCJpbiBhfHxhLkRvY3VtZW50VG91Y2gmJmIgaW5zdGFuY2VvZiBEb2N1bWVudFRvdWNoP2M9ITA6cyhbIkBtZWRpYSAoIixvLmpvaW4oInRvdWNoLWVuYWJsZWQpLCgiKSxsLCIpIiwieyNtb2Rlcm5penJ7dG9wOjlweDtwb3NpdGlvbjphYnNvbHV0ZX19Il0uam9pbigiIiksZnVuY3Rpb24oYSl7Yz05PT09YS5vZmZzZXRUb3B9KSxjfTtmb3IodmFyIHYgaW4gcCloKHAsdikmJihnPXYudG9Mb3dlckNhc2UoKSxqW2ddPXBbdl0oKSxxLnB1c2goKGpbZ10/IiI6Im5vLSIpK2cpKTtyZXR1cm4gai5hZGRUZXN0PWZ1bmN0aW9uKGEsYil7aWYoIm9iamVjdCI9PXR5cGVvZiBhKWZvcih2YXIgZCBpbiBhKWgoYSxkKSYmai5hZGRUZXN0KGQsYVtkXSk7ZWxzZXtpZihhPWEudG9Mb3dlckNhc2UoKSxqW2FdIT09YylyZXR1cm4gajtiPSJmdW5jdGlvbiI9PXR5cGVvZiBiP2IoKTpiLCJ1bmRlZmluZWQiIT10eXBlb2YgZW5hYmxlQ2xhc3NlcyYmZW5hYmxlQ2xhc3NlcyYmKGsuY2xhc3NOYW1lKz0iICIrKGI/IiI6Im5vLSIpK2EpLGpbYV09Yn1yZXR1cm4gan0sZCgiIiksbT1mPW51bGwsai5fdmVyc2lvbj1pLGouX3ByZWZpeGVzPW8sai5tcT10LGoudGVzdFN0eWxlcz1zLGp9KHRoaXMsdGhpcy5kb2N1bWVudCksIWZ1bmN0aW9uKGEpe2EuRWRpdGFibGUuVEFHX09SREVSPVsidGFibGUiLCJ0aGVhZCIsInRib2R5IiwidGZvb3QiLCJ0ciIsInRoIiwidGQiLCJ1bCIsIm9sIiwibGkiLCJoMSIsImgyIiwiaDMiLCJoNCIsImg1IiwiaDYiLCJwcmUiLCJibG9ja3F1b3RlIiwicCIsImRpdiIsImEiLCJzdHJvbmciLCJlbSIsInN0cmlrZSIsInUiLCJzcGFuIiwiaWZyYW1lIiwib2JqZWN0IiwicGFyYW0iLCJ2aWRlbyIsInNvdXJjZSJdLGEuRWRpdGFibGUuU0VQQVJBVEU9WyJ0aCIsInRkIiwibGkiLCJoMSIsImgyIiwiaDMiLCJoNCIsImg1IiwiaDYiLCJwcmUiLCJibG9ja3F1b3RlIiwicCIsImRpdiJdLGEuRWRpdGFibGUuRU5EX0FUX1NBTUVfSU5ERVg9WyJ0YWJsZSIsInRoZWFkIiwidGJvZHkiLCJ0Zm9vdCIsInRyIiwidGgiLCJ0ZCIsImEiLCJzcGFuIiwiaWZyYW1lIiwiZGl2Iiwib2JqZWN0IiwicGFyYW0iXSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pc0Nsb3NpbmdUYWc9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bnVsbCE9PWEubWF0Y2goL148XC8oW2EtekEtWjAtOV0rKShbXjxdKykqPiQvZ2kpOiExfSxhLkVkaXRhYmxlLnByb3RvdHlwZS50YWdOYW1lPWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL148XC8/KFthLXpBLVowLTktIV0rKShbXjxdKykqPiQvZ2ksIiQxIikudG9Mb3dlckNhc2UoKX0sYS5FZGl0YWJsZS5TRUxGX0NMT1NJTkdfVEFHUz1bImJyIiwiYnV0dG9uIiwiaW5wdXQiLCJpbWciLCJociIsInBhcmFtIiwiIS0tIiwic291cmNlIl0sYS5FZGl0YWJsZS5TRUxGX0NMT1NJTkdfQUZURVI9WyJzb3VyY2UiXSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pc1NlbGZDbG9zaW5nVGFnPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMudGFnTmFtZShiKTtyZXR1cm4gYS5FZGl0YWJsZS5TRUxGX0NMT1NJTkdfVEFHUy5pbmRleE9mKGMpPj0wfSxhLkVkaXRhYmxlLnByb3RvdHlwZS50YWdLZXk9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSsoYS5hdHRyc3x8W10pLnNvcnQoKS5qb2luKCJ8Iil9LGEuRWRpdGFibGUucHJvdG90eXBlLmV4dGVuZGVkS2V5PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRhZ0tleShhKStKU09OLnN0cmluZ2lmeShhLnN0eWxlKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUubWVyZ2VTdHlsZT1mdW5jdGlvbihiLGMpe2Zvcih2YXIgZD17fSxlPWEuRWRpdGFibGUudW5pcShhLm1lcmdlKE9iamVjdC5rZXlzKGIuc3R5bGUpLE9iamVjdC5rZXlzKGMuc3R5bGUpKSksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1lW2ZdO2RbZ109bnVsbCE9Yy5zdHlsZVtnXT9jLnN0eWxlW2ddOmIuc3R5bGVbZ119cmV0dXJuIGR9LGEuRWRpdGFibGUucHJvdG90eXBlLm1hcERPTT1mdW5jdGlvbihiLGMpe3ZvaWQgMD09PWMmJihjPSEwKTt2YXIgZCxlLGYsZyxoPTAsaT0wLGo9W10saz0iIixsPVtdLG09e30sbj17fTtjJiYoYj1iLnJlcGxhY2UoL1x1MjAwQi9naSwiIikpO2Zvcih2YXIgbz0wO288Yi5sZW5ndGg7bysrKWlmKGQ9Yi5jaGFyQXQobyksIjwiPT1kKXt2YXIgcD1iLmluZGV4T2YoIj4iLG8rMSk7aWYoLTEhPT1wKXtpZihpKyssZT1iLnN1YnN0cmluZyhvLHArMSksZz10aGlzLnRhZ05hbWUoZSksImIiPT1nJiYoZz0ic3Ryb25nIiksImkiPT1nJiYoZz0iZW0iKSx0aGlzLmlzU2VsZkNsb3NpbmdUYWcoZSkpe25baF18fChuW2hdPVtdKSxuW2hdLnB1c2goe2k6aSxjb250ZW50OmUsdGFnX25hbWU6Z30pLG89cDtjb250aW51ZX12YXIgcT10aGlzLmlzQ2xvc2luZ1RhZyhlKSxyPW51bGwscz1lLnJlcGxhY2UoL148W1xTXHNdKiBzdHlsZT0oIlteIl0rInwnW14nXSsnKVtcU1xzXSo+JC9naSwiJDEiKSx0PXt9O2lmKHMhPWUmJihzPXMuc3Vic3RyaW5nKDEscy5sZW5ndGgtMSksbWF0Y2hlcz1zLm1hdGNoKC8oW146XSopOihbXjo7XSo7fCQpL2dpKSkpZm9yKHZhciB1PTA7dTxtYXRjaGVzLmxlbmd0aDt1Kyspe3ZhciB2PW1hdGNoZXNbdV0uc3BsaXQoIjoiKSx3PXYuc2xpY2UoMSkuam9pbigiOiIpLnRyaW0oKTsiOyI9PXdbdy5sZW5ndGgtMV0mJih3PXcuc3Vic3RyKDAsdy5sZW5ndGgtMSkpLHRbdlswXS50cmltKCldPXd9aWYocj1lLm1hdGNoKC8oW1x3XC1dKik9KCJbXjw+Il0qInwnW148PiddKid8XHcrKS9naSkpZm9yKHZhciB4PTA7eDxyLmxlbmd0aDt4KyspMD09PXJbeF0uaW5kZXhPZigic3R5bGU9IikmJnIuc3BsaWNlKHgsMSk7aWYocSl7dmFyIHk9bVtnXS5wb3AoKTtoPT1qW3ldLnN0YXJ0JiZhLkVkaXRhYmxlLkVORF9BVF9TQU1FX0lOREVYLmluZGV4T2YoZyk+PTAmJihuW2hdfHwobltoXT1bXSksbltoXS5wdXNoKHtpOmpbeV0uaSxjb250ZW50OmpbeV0ub3JpZ2luYWx9KSxuW2hdLnB1c2goe2k6aSxjb250ZW50OmV9KSl9ZWxzZSBhLkVkaXRhYmxlLlNFUEFSQVRFLmluZGV4T2YoZyk+PTAmJihyP3IucHVzaCgnZGF0YS1mci1pZHg9IicrbysnIicpOnI9WydkYXRhLWZyLWlkeD0iJytvKyciJ10pLGoucHVzaCh7dHlwZTpnLGF0dHJzOnIsc3R5bGU6dCxzdGFydDpoLGk6aSxvcmlnaW5hbDplfSksbVtnXXx8KG1bZ109W10pLG1bZ10ucHVzaChqLmxlbmd0aC0xKTtvPXB9fWVsc2V7ays9ZCxsW2hdPXt9O2ZvcihnIGluIG0pe2Y9bVtnXTtmb3IodmFyIHo9MDt6PGYubGVuZ3RoO3orKyl7ZT1qW2Zbel1dO3ZhciBBPXRoaXMudGFnS2V5KGUpO2xbaF1bQV0/bFtoXVtBXS5zdHlsZT10aGlzLm1lcmdlU3R5bGUobFtoXVtBXSxlKTpsW2hdW0FdPWEuZXh0ZW5kKHt9LGUpfX1oKyt9dmFyIEI9W107Zm9yKG89MDtvPGwubGVuZ3RoO28rKyl7QltvXT17fTtmb3IodmFyIEMgaW4gbFtvXSlCW29dW3RoaXMuZXh0ZW5kZWRLZXkobFtvXVtDXSldPWxbb11bQ119cmV0dXJue3RleHQ6ayxmb3JtYXQ6QixzaW1wbGVfdGFnczpufX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZnJvYWxhRE9NPWZ1bmN0aW9uKGIpe2Zvcih2YXIgYyxkPVtdLGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO2ZvcihjIGluIGUpZ1tjXXx8KGVbY10uZW5kPWYsZC5wdXNoKGEuZXh0ZW5kKHt9LGVbY10pKSxkZWxldGUgZVtjXSk7Zm9yKHZhciBoIGluIGcpZVtoXXx8KGdbaF0uc3RhcnQ9ZixlW2hdPWdbaF0pfWZvcihjIGluIGUpZVtjXS5lbmQ9Yi5sZW5ndGgsZC5wdXNoKGVbY10pO3JldHVybiBkfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5zb3J0Tm9kZXM9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5FZGl0YWJsZS5UQUdfT1JERVIuaW5kZXhPZihiLnR5cGUpLWEuRWRpdGFibGUuVEFHX09SREVSLmluZGV4T2YoYy50eXBlKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuc29ydFNpbXBsZVRhZ3M9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5pLWIuaX0sYS5FZGl0YWJsZS5wcm90b3R5cGUub3BlblRhZz1mdW5jdGlvbihhKXt2YXIgYj0iPCIrYS50eXBlO2lmKGEuYXR0cnMpe2EuYXR0cnMuc29ydCgpO2Zvcih2YXIgYz0wO2M8YS5hdHRycy5sZW5ndGg7YysrKWIrPSIgIithLmF0dHJzW2NdfXZhciBkPSIiO2Zvcih2YXIgZSBpbiBhLnN0eWxlKW51bGwhPWEuc3R5bGVbZV0mJihkKz1lLnJlcGxhY2UoIl8iLCItIikrIjogIithLnN0eWxlW2VdKyI7ICIpO3JldHVybiIiIT09ZCYmKGIrPScgc3R5bGU9IicrZC50cmltKCkrJyInKSxiKz0iPiJ9LGEuRWRpdGFibGUucHJvdG90eXBlLmNsZWFuT3V0cHV0PWZ1bmN0aW9uKGIsYyl7dmFyIGQsZSxmLGcsaD10aGlzLm1hcERPTShiLGMpLGk9dGhpcy5mcm9hbGFET00oaC5mb3JtYXQpLGo9aC5zaW1wbGVfdGFncyxrPWgudGV4dCxsPXt9O2ZvcihlPTA7ZTxpLmxlbmd0aDtlKyspZD1pW2VdLGxbZC5zdGFydF18fChsW2Quc3RhcnRdPVtdKSxsW2Quc3RhcnRdLnB1c2goZCk7dmFyIG09e307Zm9yKGI9IiIsZT0wO2U8PWsubGVuZ3RoO2UrKyl7dmFyIG49W10sbz0iIjtpZihqW2VdKWZvcihqW2VdPWpbZV0uc29ydCh0aGlzLnNvcnRTaW1wbGVUYWdzKSxnPTA7ZzxqW2VdLmxlbmd0aDtnKyspYS5FZGl0YWJsZS5TRUxGX0NMT1NJTkdfQUZURVIuaW5kZXhPZihqW2VdW2ddLnRhZ19uYW1lKT49MD9vKz1qW2VdW2ddLmNvbnRlbnQ6Yis9altlXVtnXS5jb250ZW50O2lmKG1bZV0pe2Zvcih2YXIgcCBpbiBtKWlmKHA+ZSlmb3IoZj0wO2Y8bVtwXS5sZW5ndGg7ZisrKXt2YXIgcT1tW3BdW2ZdO3Euc3RhcnQ+PW1bZV1bbVtlXS5sZW5ndGgtMV0uc3RhcnQmJmEuRWRpdGFibGUuVEFHX09SREVSLmluZGV4T2YocS50eXBlKT5hLkVkaXRhYmxlLlRBR19PUkRFUi5pbmRleE9mKG1bZV1bbVtlXS5sZW5ndGgtMV0udHlwZSkmJmEuRWRpdGFibGUuU0VQQVJBVEUuaW5kZXhPZihxLnR5cGUpPDAmJihiKz0iPC8iK3EudHlwZSsiPiIsbi5wdXNoKHEpLG1bcF0uc3BsaWNlKGYsMSkpfWZvcihmPTA7ZjxtW2VdLmxlbmd0aDtmKyspYis9IjwvIittW2VdW2ZdLnR5cGUrIj4ifWZvcihsW2VdfHwobFtlXT1bXSk7bi5sZW5ndGg+MDspe3ZhciByPW4ucG9wKCk7ci5zdGFydD1lLGxbZV0ucHVzaChyKX1pZihsW2VdKWZvcihsW2VdPWxbZV0uc29ydCh0aGlzLnNvcnROb2RlcyksZj0wO2Y8bFtlXS5sZW5ndGg7ZisrKWQ9bFtlXVtmXSxtW2QuZW5kXXx8KG1bZC5lbmRdPVtdKSxtW2QuZW5kXS5wdXNoKGQpLGIrPXRoaXMub3BlblRhZyhkKTtiKz1vLGUhPWsubGVuZ3RoJiYoYis9a1tlXSl9cmV0dXJuIGJ9LGEuRWRpdGFibGUucHJvdG90eXBlLmNsZWFuaWZ5PWZ1bmN0aW9uKGIsYyl7dmFyIGQsZT0icCwgaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgZGl2LCB0ZCwgdGgsIHByZSwgbGksIGJsb2NrcXVvdGUiO2lmKHRoaXMuaXNIVE1MKXJldHVybiExO3ZvaWQgMD09PWImJihiPSEwKSx0aGlzLm5vX3ZlcmlmeT0hMCx0aGlzLnNhdmVTZWxlY3Rpb25CeU1hcmtlcnMoKSxkPWI/dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpOnRoaXMuJGVsZW1lbnQuZmluZChlKTt2YXIgZixnO2lmKGRbMF0hPXRoaXMuJGVsZW1lbnQuZ2V0KDApKWZvcih2YXIgaD0wO2g8ZC5sZW5ndGg7aCsrKXt2YXIgaT1hKGRbaF0pO2Y9aS5odG1sKCksZz10aGlzLmNsZWFuT3V0cHV0KGYsYyksZyE9PWYmJmkuaHRtbChnKX1lbHNlIDA9PT10aGlzLiRlbGVtZW50LmZpbmQoZSkubGVuZ3RoJiYoZj10aGlzLiRlbGVtZW50Lmh0bWwoKSxnPXRoaXMuY2xlYW5PdXRwdXQoZixjKSxnIT09ZiYmdGhpcy4kZWxlbWVudC5odG1sKGcpKTt0aGlzLiRlbGVtZW50LmZpbmQoIltkYXRhLWZyLWlkeF0iKS5yZW1vdmVBdHRyKCJkYXRhLWZyLWlkeCIpLHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMuZm9jdXMoKSx0aGlzLiRlbGVtZW50LmZpbmQoInNwYW4iKS5hdHRyKCJkYXRhLWZyLXZlcmlmaWVkIiwhMCksdGhpcy5ub192ZXJpZnk9ITF9fShqUXVlcnkpOwovKiEKICogZnJvYWxhX2VkaXRvciB2MS4yLjIgKGh0dHA6Ly9lZGl0b3IuZnJvYWxhLmNvbSkKICogQ29weXJpZ2h0IDIwMTQtMjAxNCBGcm9hbGEKICovCiFmdW5jdGlvbihhKXthLkVkaXRhYmxlLmNvbW1hbmRzPWEuZXh0ZW5kKGEuRWRpdGFibGUuY29tbWFuZHMse2luc2VydE9yZGVyZWRMaXN0Ont0aXRsZToiTnVtYmVyZWQgTGlzdCIsaWNvbjoiZmEgZmEtbGlzdC1vbCIscmVmcmVzaDphLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoRGVmYXVsdCxjYWxsYmFjazpmdW5jdGlvbihhKXt0aGlzLmZvcm1hdExpc3QoYSl9LHVuZG86ITB9LGluc2VydFVub3JkZXJlZExpc3Q6e3RpdGxlOiJCdWxsZXRlZCBMaXN0IixpY29uOiJmYSBmYS1saXN0LXVsIixyZWZyZXNoOmEuRWRpdGFibGUucHJvdG90eXBlLnJlZnJlc2hEZWZhdWx0LGNhbGxiYWNrOmZ1bmN0aW9uKGEpe3RoaXMuZm9ybWF0TGlzdChhKX0sdW5kbzohMH19KSxhLkVkaXRhYmxlLnByb3RvdHlwZS5wcm9jZXNzQmFja3NwYWNlPWZ1bmN0aW9uKGIpe3ZhciBjPWIucHJldigpO2lmKGMubGVuZ3RoKXtmb3IodGhpcy5yZW1vdmVNYXJrZXJzKCksKCJVTCI9PWMuZ2V0KDApLnRhZ05hbWV8fCJPTCI9PWMuZ2V0KDApLnRhZ05hbWUpJiYoYz1jLmZpbmQoImxpOmxhc3QiKSk7Yy5maW5kKCI+IHVsLCA+IG9sIikubGVuZ3RoOyljPWMuZmluZCgiPiB1bCBsaTpsYXN0LCA+IG9sIGxpOmxhc3QiKTt2YXIgZD1jLmZpbmQoIj4gcCwgPiBoMSwgPiBoMywgPiBoNCwgPiBoNSwgPiBoNiwgPiBkaXYsID4gcHJlLCA+IGJsb2NrcXVvdGUiKTswPT09Yy50ZXh0KCkubGVuZ3RoJiYwPT09Yy5maW5kKCJpbWcsIHRhYmxlLCBpbnB1dCwgaWZyYW1lLCB2aWRlbyIpLmxlbmd0aD9jLnJlbW92ZSgpOih0aGlzLmtlZXBfZW50ZXI9ITAsYi5maW5kKCI+IHAsID4gaDEsID4gaDMsID4gaDQsID4gaDUsID4gaDYsID4gZGl2LCA+IHByZSwgPiBibG9ja3F1b3RlIikuZWFjaChmdW5jdGlvbihiLGMpe2EoYykucmVwbGFjZVdpdGgoYShjKS5odG1sKCkpfSksdGhpcy5rZWVwX2VudGVyPSExLGQubGVuZ3RoPyhhKGRbZC5sZW5ndGgtMV0pLmFwcGVuZCgnPHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLXR5cGU9ImZhbHNlIiBkYXRhLWlkPSIwIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+PHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLXR5cGU9InRydWUiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSxhKGRbZC5sZW5ndGgtMV0pLmFwcGVuZChiLmh0bWwoKSkpOihjLmFwcGVuZCgnPHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLXR5cGU9ImZhbHNlIiBkYXRhLWlkPSIwIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+PHNwYW4gY2xhc3M9ImYtbWFya2VyIiBkYXRhLXR5cGU9InRydWUiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSxjLmFwcGVuZChiLmh0bWwoKSkpLGIucmVtb3ZlKCksdGhpcy5yZXN0b3JlU2VsZWN0aW9uQnlNYXJrZXJzKCkpfWVsc2UgdGhpcy5mb3JtYXRMaXN0KGIucGFyZW50cygidWwiKS5sZW5ndGg/Imluc2VydFVub3JkZXJlZExpc3QiOiJpbnNlcnRPcmRlcmVkTGlzdCIpO3RoaXMuJGVsZW1lbnQuZmluZCgiYnJlYWtsaSIpLnJlbW92ZSgpLHRoaXMuc3luYygpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5saUJhY2tzcGFjZT1mdW5jdGlvbigpe3ZhciBiLGM9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50KCksZD1hKGMpLnBhcmVudHMoInRhYmxlLCBsaSIpO2lmKGQubGVuZ3RoPjAmJiJUQUJMRSI9PT1kWzBdLnRhZ05hbWUpcmV0dXJuITA7aWYoYj0iTEkiPT1jLnRhZ05hbWU/YShjKTphKGMpLnBhcmVudHMoImxpOmZpcnN0IiksdGhpcy5yZW1vdmVNYXJrZXJzKCksdGhpcy5pbnNlcnRIVE1MKCI8YnJlYWtsaT48L2JyZWFrbGk+IiksYi5maW5kKCJicmVha2xpIikucHJldigpLmxlbmd0aCYmIlRBQkxFIj09PWIuZmluZCgiYnJlYWtsaSIpLnByZXYoKS5nZXQoMCkudGFnTmFtZSYmYi5maW5kKCJicmVha2xpIikubmV4dCgpLmxlbmd0aCYmIkJSIj09PWIuZmluZCgiYnJlYWtsaSIpLm5leHQoKS5nZXQoMCkudGFnTmFtZSlyZXR1cm4gdGhpcy5zZXRTZWxlY3Rpb24oYi5maW5kKCJicmVha2xpIikucHJldigpLmZpbmQoInRkOmZpcnN0IikuZ2V0KDApKSxiLmZpbmQoImJyZWFrbGkiKS5uZXh0KCkucmVtb3ZlKCksdGhpcy4kZWxlbWVudC5maW5kKCJicmVha2xpIikucmVtb3ZlKCksITE7Zm9yKHZhciBlLGY9Yi5odG1sKCksZz1bXSxoPTA7aDxmLmxlbmd0aDtoKyspe2lmKGNocj1mLmNoYXJBdChoKSwiPCIhPWNocilyZXR1cm4gdGhpcy4kZWxlbWVudC5maW5kKCJicmVha2xpIikucmVtb3ZlKCksITA7dmFyIGk9Zi5pbmRleE9mKCI+IixoKzEpO2lmKC0xIT09aSl7ZT1mLnN1YnN0cmluZyhoLGkrMSk7dmFyIGo9dGhpcy50YWdOYW1lKGUpO2lmKGg9aSwiYnJlYWtsaSI9PWope2lmKCF0aGlzLmlzQ2xvc2luZ1RhZyhlKSYmIXRoaXMuaXNDbG9zaW5nVGFnKGdbZy5sZW5ndGgtMV0pKXJldHVybiB0aGlzLnByb2Nlc3NCYWNrc3BhY2UoYiksITF9ZWxzZSBnLnB1c2goZSl9fXJldHVybiB0aGlzLiRlbGVtZW50LmZpbmQoImJyZWFrbGkiKS5yZW1vdmUoKSwhMH0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZW1wdHlMaUVudGVyPWZ1bmN0aW9uKGIpe3RoaXMucmVtb3ZlTWFya2VycygpO3ZhciBjPSJvbCI7Yi5wYXJlbnRzKCJ1bDpmaXJzdCIpLmxlbmd0aD4wJiYoYz0idWwiKTt2YXIgZD1hKGIucGFyZW50cygidWwsIG9sIilbMF0pO2IucmVwbGFjZVdpdGgoZC5wYXJlbnRzKCJ1bCwgb2wiKS5sZW5ndGg+MD8nPHNwYW4gaWQ9ImNsb3NlLScrYysnIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+PGxpPjxwPjxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJmYWxzZSIgZGF0YS1pZD0iMCIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPjxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJ0cnVlIiBkYXRhLWlkPSIwIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+PGJyLz48L3A+PC9saT48c3BhbiBpZD0ib3Blbi0nK2MrJyIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPic6JzxzcGFuIGlkPSJjbG9zZS0nK2MrJyIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPjxwPjxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJmYWxzZSIgZGF0YS1pZD0iMCIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPjxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJ0cnVlIiBkYXRhLWlkPSIwIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+PGJyLz48L3A+PHNwYW4gaWQ9Im9wZW4tJytjKyciIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSxodG1sPWQuaHRtbCgpLGh0bWw9aHRtbC5yZXBsYWNlKCc8c3BhbiBpZD0iY2xvc2UtdWwiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCI8L3VsPiIpLGh0bWw9aHRtbC5yZXBsYWNlKCc8c3BhbiBpZD0iY2xvc2Utb2wiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCI8L29sPiIpLGh0bWw9aHRtbC5yZXBsYWNlKCc8c3BhbiBpZD0ib3Blbi11bCIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPicsIjx1bD4iKSxodG1sPWh0bWwucmVwbGFjZSgnPHNwYW4gaWQ9Im9wZW4tb2wiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nLCI8b2w+IiksZC5yZXBsYWNlV2l0aCgiPCIrYysiPiIraHRtbCsiPC8iK2MrIj4iKSx0aGlzLmNsZWFudXBMaXN0cygpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS50ZXh0TGlFbnRlcj1mdW5jdGlvbihiKXt0aGlzLnJlbW92ZU1hcmtlcnMoKSx0aGlzLmluc2VydEhUTUwoIjxicmVha2xpPjwvYnJlYWtsaT4iLCExKTtmb3IodmFyIGMsZD1iLmh0bWwoKSxlPVtdLGY9e30sZz1bXSxoPTAsaT0wO2k8ZC5sZW5ndGg7aSsrKWlmKGNocj1kLmNoYXJBdChpKSwiPCI9PWNocil7dmFyIGo9ZC5pbmRleE9mKCI+IixpKzEpO2lmKC0xIT09ail7Yz1kLnN1YnN0cmluZyhpLGorMSk7dmFyIGs9dGhpcy50YWdOYW1lKGMpO2lmKGk9aiwiYnJlYWtsaSI9PWspe2lmKCF0aGlzLmlzQ2xvc2luZ1RhZyhjKSl7Zm9yKHZhciBsPWUubGVuZ3RoLTE7bD49MDtsLS0pe3ZhciBtPXRoaXMudGFnTmFtZShlW2xdKTtnLnB1c2goIjwvIittKyI+Iil9Zy5wdXNoKCI8L2xpPiIpLGcucHVzaCgiPGxpPiIpO2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWcucHVzaChlW25dKTtnLnB1c2goJzxzcGFuIGNsYXNzPSJmLW1hcmtlciIgZGF0YS10eXBlPSJmYWxzZSIgZGF0YS1jb2xsYXBzZWQ9InRydWUiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj48c3BhbiBjbGFzcz0iZi1tYXJrZXIiIGRhdGEtdHlwZT0idHJ1ZSIgZGF0YS1jb2xsYXBzZWQ9InRydWUiIGRhdGEtaWQ9IjAiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKX19ZWxzZSBpZihnLnB1c2goYyksIXRoaXMuaXNTZWxmQ2xvc2luZ1RhZyhjKSlpZih0aGlzLmlzQ2xvc2luZ1RhZyhjKSl7dmFyIG89ZltrXS5wb3AoKTtlLnNwbGljZShvLDEpfWVsc2UgZS5wdXNoKGMpLHZvaWQgMD09PWZba10mJihmW2tdPVtdKSxmW2tdLnB1c2goZS5sZW5ndGgtMSl9fWVsc2UgaCsrLGcucHVzaChjaHIpO3ZhciBwPWEoYi5wYXJlbnRzKCJ1bCwgb2wiKVswXSk7Yi5yZXBsYWNlV2l0aCgiPGxpPiIrZy5qb2luKCIiKSsiPC9saT4iKSxwLmZpbmQoInA6ZW1wdHkgKyB0YWJsZSIpLnByZXYoKS5yZW1vdmUoKSxwLmZpbmQoInAgKyB0YWJsZSIpLmVhY2goZnVuY3Rpb24oYixjKXt2YXIgZD1hKGMpO2QucHJldigpLmFwcGVuZChkLmNsb25lKCkpLGQucmVtb3ZlKCl9KSxwLmZpbmQoInRhYmxlICsgcCIpLmVhY2goZnVuY3Rpb24oYixjKXt2YXIgZD1hKGMpO2QuYXBwZW5kKGQucHJldigpLmNsb25lKCkpLGQucHJldigpLnJlbW92ZSgpfSkscC5maW5kKGEuRWRpdGFibGUuVkFMSURfTk9ERVMuam9pbigiLCIpKS5lYWNoKGZ1bmN0aW9uKGIsYyl7IkxJIiE9Yy50YWdOYW1lJiYwPT09YShjKS5maW5kKCJiciIpLmxlbmd0aCYmIiI9PT1hKGMpLnRleHQoKS50cmltKCkmJmEoYykuYXBwZW5kKCI8YnIvPiIpfSkscC5maW5kKCJsaSIpLmVhY2goYS5wcm94eShmdW5jdGlvbihiLGMpe3RoaXMud3JhcFRleHRJbkVsZW1lbnQoYShjKSl9LHRoaXMpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUubGlFbnRlcj1mdW5jdGlvbigpe3ZhciBiLGM9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50KCksZD1hKGMpLnBhcmVudHMoInRhYmxlLCBsaSIpO3JldHVybiBkLmxlbmd0aD4wJiYiVEFCTEUiPT1kWzBdLnRhZ05hbWU/ITA6KGI9IkxJIj09Yy50YWdOYW1lP2EoYyk6YShjKS5wYXJlbnRzKCJsaTpmaXJzdCIpLDA9PT1iLnRleHQoKS5sZW5ndGgmJjA9PT1iLmZpbmQoImltZywgdGFibGUsIGlmcmFtZSwgaW5wdXQsIG9iamVjdCIpLmxlbmd0aD90aGlzLmVtcHR5TGlFbnRlcihiKTp0aGlzLnRleHRMaUVudGVyKGIpLHRoaXMuJGVsZW1lbnQuZmluZCgiYnJlYWtsaSIpLnJlbW92ZSgpLHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMuc3luYygpLCExKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUubGlzdFRhYj1mdW5jdGlvbigpe3ZhciBiPWEodGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50KCkpO3JldHVybiBiLnBhcmVudHMoInVsLCBvbCIpLmxlbmd0aD4wPyh0aGlzLmluZGVudCgpLCExKTp2b2lkIDB9LGEuRWRpdGFibGUucHJvdG90eXBlLmxpc3RTaGlmdFRhYj1mdW5jdGlvbigpe3ZhciBiPWEodGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50KCkpO3JldHVybiBiLnBhcmVudHMoInVsLCBvbCIpLmxlbmd0aD4wPyh0aGlzLm91dGRlbnQoKSwhMSk6dm9pZCAwfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5pbml0TGlzdD1mdW5jdGlvbigpe3RoaXMuYWRkTGlzdGVuZXIoInRhYiIsdGhpcy5saXN0VGFiKSx0aGlzLmFkZExpc3RlbmVyKCJzaGlmdCt0YWIiLHRoaXMubGlzdFNoaWZ0VGFiKSx0aGlzLmRvbUluc2VydExpc3QoKSx0aGlzLmlzSW1hZ2V8fHRoaXMuaXNMaW5rfHx0aGlzLm9wdGlvbnMuZWRpdEluUG9wdXB8fHRoaXMuJGVsZW1lbnQub24oImtleWRvd24iLGEucHJveHkoZnVuY3Rpb24oYil7dmFyIGM9Yi53aGljaCxkPXRoaXMuZ2V0U2VsZWN0aW9uRWxlbWVudCgpO2lmKCJMSSI9PWQudGFnTmFtZXx8YShkKS5wYXJlbnRzKCJsaSIpLmxlbmd0aD4wKXtpZigxMz09YyYmIWIuc2hpZnRLZXkpcmV0dXJuIHRoaXMubGlFbnRlcigpO2lmKDg9PWMpcmV0dXJuIHRoaXMubGlCYWNrc3BhY2UoKX19LHRoaXMpKX0sYS5FZGl0YWJsZS5pbml0aWFsaXplcnMucHVzaChhLkVkaXRhYmxlLnByb3RvdHlwZS5pbml0TGlzdCksYS5FZGl0YWJsZS5wcm90b3R5cGUuZm9ybWF0TGlzdD1mdW5jdGlvbihiKXtpZih0aGlzLmJyb3dzZXIubXNpZSYmYS5FZGl0YWJsZS5nZXRJRXZlcnNpb24oKTw5KXJldHVybiBkb2N1bWVudC5leGVjQ29tbWFuZChiLCExLCExKSwhMTt2YXIgYyxkLGU9ITEsZj0hMCxnPSExLGg9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpLGk9YShoWzBdKS5wYXJlbnRzKCJ1bCwgb2wiKTtpZihpLmxlbmd0aCYmKCJVTCI9PT1pWzBdLnRhZ05hbWU/Imluc2VydFVub3JkZXJlZExpc3QiIT1iJiYoZT0hMCk6Imluc2VydE9yZGVyZWRMaXN0IiE9YiYmKGU9ITApKSx0aGlzLnNhdmVTZWxlY3Rpb25CeU1hcmtlcnMoKSxlKXtjPSJvbCIsImluc2VydFVub3JkZXJlZExpc3QiPT09YiYmKGM9InVsIik7dmFyIGo9YShpWzBdKTtqLnJlcGxhY2VXaXRoKCI8IitjKyI+IitqLmh0bWwoKSsiPC8iK2MrIj4iKX1lbHNle2Zvcih2YXIgaz0wO2s8aC5sZW5ndGg7aysrKWlmKGQ9YShoW2tdKSwoIlREIj09ZC5nZXQoMCkudGFnTmFtZXx8IlRIIj09ZC5nZXQoMCkudGFnTmFtZSkmJnRoaXMud3JhcFRleHRJbkVsZW1lbnQoZCksZC5wYXJlbnRzKCJsaSIpLmxlbmd0aD4wfHwiTEkiPT1kLmdldCgwKS50YWdOYW1lKXt2YXIgbDtsPSJMSSI9PWQuZ2V0KDApLnRhZ05hbWU/ZDphKGQucGFyZW50cygibGkiKVswXSk7dmFyIG09ZC5wYXJlbnRzKCJ1bCwgb2wiKTttLmxlbmd0aD4wJiYoYz1tWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxsLmJlZm9yZSgnPHNwYW4gY2xhc3M9ImNsb3NlLScrYysnIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+JyksbC5hZnRlcignPHNwYW4gY2xhc3M9Im9wZW4tJytjKyciIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSksKDA9PT1hKG1bMF0pLnBhcmVudHMoIm9sLCB1bCIpLmxlbmd0aHx8ZSkmJmwucmVwbGFjZVdpdGgoMD09PWwuZmluZChhLkVkaXRhYmxlLlZBTElEX05PREVTLmpvaW4oIiwiKSkubGVuZ3RoP2wuaHRtbCgpKyI8YnI+IjpsLmh0bWwoKSksZz0hMH1lbHNlIGY9ITE7ZyYmdGhpcy5jbGVhbnVwTGlzdHMoKSwoZj09PSExfHxlPT09ITApJiYodGhpcy53cmFwVGV4dCgpLHRoaXMucmVzdG9yZVNlbGVjdGlvbkJ5TWFya2VycygpLGg9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpLHRoaXMuc2F2ZVNlbGVjdGlvbkJ5TWFya2VycygpLHRoaXMuZWxlbWVudHNUb0xpc3QoaCxiKSx0aGlzLnVud3JhcFRleHQoKSx0aGlzLmNsZWFudXBMaXN0cygpKX10aGlzLnJlc3RvcmVTZWxlY3Rpb25CeU1hcmtlcnMoKSx0aGlzLnJlcG9zaXRpb25FZGl0b3IoKSxiPSJpbnNlcnRVbm9yZGVyZWRMaXN0Ij09Yj8idW5vcmRlcmVkTGlzdEluc2VydGVkIjoib3JkZXJlZExpc3RJbnNlcnRlZCIsdGhpcy50cmlnZ2VyRXZlbnQoYil9LGEuRWRpdGFibGUucHJvdG90eXBlLmVsZW1lbnRzVG9MaXN0PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YSgiPG9sPiIpOyJpbnNlcnRVbm9yZGVyZWRMaXN0Ij09YyYmKGQ9YSgiPHVsPiIpKSxiWzBdPT10aGlzLiRlbGVtZW50LmdldCgwKSYmKGI9dGhpcy4kZWxlbWVudC5maW5kKCI+ICIrYS5FZGl0YWJsZS5WQUxJRF9OT0RFUy5qb2luKCIsID4iKSkpO2Zvcih2YXIgZT0wO2U8Yi5sZW5ndGg7ZSsrKSRlbGVtZW50PWEoYltlXSksJGVsZW1lbnQuZ2V0KDApIT10aGlzLiRlbGVtZW50LmdldCgwKSYmKCJURCI9PT0kZWxlbWVudC5nZXQoMCkudGFnTmFtZXx8IlRIIj09PSRlbGVtZW50LmdldCgwKS50YWdOYW1lPyh0aGlzLndyYXBUZXh0SW5FbGVtZW50KCRlbGVtZW50KSx0aGlzLmVsZW1lbnRzVG9MaXN0KCRlbGVtZW50LmZpbmQoIj4gIithLkVkaXRhYmxlLlZBTElEX05PREVTLmpvaW4oIiwgPiIpKSxjKSk6KGQuYXBwZW5kKGEoIjxsaT4iKS5odG1sKCRlbGVtZW50LmNsb25lKCkpKSxkLmZpbmQoImxpIikubGVuZ3RoPjE/JGVsZW1lbnQucmVtb3ZlKCk6JGVsZW1lbnQucmVwbGFjZVdpdGgoZCkpKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuaW5kZW50TGk9ZnVuY3Rpb24oYil7dmFyIGM9Yi5wYXJlbnRzKCJ1bCwgb2wiKSxkPWMuZ2V0KDApLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtiLmZpbmQoIj4gdWwsID4gb2wiKS5sZW5ndGg+MCYmYi5wcmV2KCJsaSIpLmxlbmd0aD4wPyh0aGlzLndyYXBUZXh0SW5FbGVtZW50KGIpLGIuZmluZCgiPiAiK2EuRWRpdGFibGUuVkFMSURfTk9ERVMuam9pbigiICwgPiAiKSkuZWFjaChmdW5jdGlvbihiLGMpe2EoYykud3JhcCgiPCIrZCsiPjwvIitkKyI+Iikud3JhcCgiPGxpPjwvbGk+Iil9KSxiLnByZXYoImxpIikuYXBwZW5kKGIuZmluZCgiPiB1bCwgPiBvbCIpKSxiLnJlbW92ZSgpLHRoaXMuY2xlYW51cExpc3RzKCkpOjA9PT1iLmZpbmQoIj4gdWwsID4gb2wiKS5sZW5ndGgmJmIucHJldigibGkiKS5sZW5ndGg+MCYmKGIucHJldigpLmFwcGVuZChhKCI8IitkKyI+IikuYXBwZW5kKGIuY2xvbmUoKSkpLGIucmVtb3ZlKCksYShjLmZpbmQoImxpIikuZ2V0KCkucmV2ZXJzZSgpKS5lYWNoKGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YShjKTtkLmZpbmQoIiA+IHVsLCA+IG9sIikubGVuZ3RoPjAmJmQucHJldigpJiZkLnByZXYoKS5maW5kKCIgPiB1bCwgPiBvbCIpLmxlbmd0aD4wJiYoZC5wcmV2KCkuYXBwZW5kKGQuaHRtbCgpKSxkLnJlbW92ZSgpKX0pLHRoaXMuY2xlYW51cExpc3RzKCkpfSxhLkVkaXRhYmxlLnByb3RvdHlwZS5vdXRkZW50TGk9ZnVuY3Rpb24oYil7dmFyIGM9YShiLnBhcmVudHMoInVsLCBvbCIpWzBdKSxkPWMucGFyZW50cygidWwsIG9sIiksZT1jLmdldCgwKS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7MD09PWIucHJldigibGkiKS5sZW5ndGgmJmIucGFyZW50cygibGkiKS5sZW5ndGg+MD8oYi5iZWZvcmUoJzxzcGFuIGNsYXNzPSJjbG9zZS0nK2UrJyIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPicpLGIuYmVmb3JlKCc8c3BhbiBjbGFzcz0iY2xvc2UtbGkiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSxiLmJlZm9yZSgnPHNwYW4gY2xhc3M9Im9wZW4tbGkiIGRhdGEtZnItdmVyaWZpZWQ9InRydWUiPjwvc3Bhbj4nKSxiLmFmdGVyKCc8c3BhbiBjbGFzcz0ib3Blbi0nK2UrJyIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPicpLGIucmVwbGFjZVdpdGgoYi5odG1sKCkpKTooYi5iZWZvcmUoJzxzcGFuIGNsYXNzPSJjbG9zZS0nK2UrJyIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPicpLGIuYWZ0ZXIoJzxzcGFuIGNsYXNzPSJvcGVuLScrZSsnIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+JyksYi5wYXJlbnRzKCJsaSIpLmxlbmd0aD4wJiYoYi5iZWZvcmUoJzxzcGFuIGNsYXNzPSJjbG9zZS1saSIgZGF0YS1mci12ZXJpZmllZD0idHJ1ZSI+PC9zcGFuPicpLGIuYWZ0ZXIoJzxzcGFuIGNsYXNzPSJvcGVuLWxpIiBkYXRhLWZyLXZlcmlmaWVkPSJ0cnVlIj48L3NwYW4+JykpKSxkLmxlbmd0aHx8Yi5yZXBsYWNlV2l0aChiLmh0bWwoKSksdGhpcy5jbGVhbnVwTGlzdHMoKX0sYS5FZGl0YWJsZS5wcm90b3R5cGUuZG9tSW5zZXJ0TGlzdD1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQub24oIkRPTU5vZGVJbnNlcnRlZCIsYS5wcm94eShmdW5jdGlvbihiKXsiQlIiIT09Yi50YXJnZXQudGFnTmFtZXx8IkxJIiE9PWEoYi50YXJnZXQpLnBhcmVudCgpLmdldCgwKS50YWdOYW1lfHx0aGlzLmtlZXBfZW50ZXJ8fGEoYi50YXJnZXQpLnJlbW92ZSgpfSx0aGlzKSl9fShqUXVlcnkpOwovKiEKICogZnJvYWxhX2VkaXRvciB2MS4yLjIgKGh0dHA6Ly9lZGl0b3IuZnJvYWxhLmNvbSkKICogQ29weXJpZ2h0IDIwMTQtMjAxNCBGcm9hbGEKICovCiFmdW5jdGlvbihhKXthLkVkaXRhYmxlLnByb3RvdHlwZS5yZWZyZXNoQmxvY2tTdHlsZXM9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldFNlbGVjdGlvbkVsZW1lbnRzKClbMF0sYz1iLnRhZ05hbWUudG9Mb3dlckNhc2UoKTt0aGlzLiRidHRuX3dyYXBwZXIuZmluZCgiLmZyLWJsb2NrLXN0eWxlIikuZW1wdHkoKTt2YXIgZD10aGlzLm9wdGlvbnMuYmxvY2tTdHlsZXNbY107aWYodm9pZCAwPT09ZCYmKGQ9dGhpcy5vcHRpb25zLmRlZmF1bHRCbG9ja1N0eWxlKSx2b2lkIDAhPT1kKXt0aGlzLiRidHRuX3dyYXBwZXIuZmluZCgnLmZyLWRyb3Bkb3duID4gYnV0dG9uW2RhdGEtbmFtZT0iYmxvY2tTdHlsZSJdLmZyLXRyaWdnZXInKS5yZW1vdmVBdHRyKCJkaXNhYmxlZCIpO2Zvcih2YXIgZSBpbiBkKXt2YXIgZj1kW2VdLGc9IiI7YShiKS5oYXNDbGFzcyhlKSYmKGc9JyBjbGFzcz0iYWN0aXZlIicpLHRoaXMuJGJ0dG5fd3JhcHBlci5maW5kKCIuZnItYmxvY2stc3R5bGUiKS5hcHBlbmQoYSgiPGxpIitnKyI+IikuYXBwZW5kKGEoJzxhIGhyZWY9IiMiIGRhdGEtdGV4dD0idHJ1ZSI+JykudGV4dChmKS5hZGRDbGFzcyhlKSkuYXR0cigiZGF0YS1jbWQiLCJibG9ja1N0eWxlIikuYXR0cigiZGF0YS12YWwiLGUpKX19fSxhLkVkaXRhYmxlLmNvbW1hbmRzPWEuZXh0ZW5kKGEuRWRpdGFibGUuY29tbWFuZHMse2Jsb2NrU3R5bGU6e3RpdGxlOiJCbG9jayBTdHlsZSIsaWNvbjoiZmEgZmEtbWFnaWMiLHJlZnJlc2hPblNob3c6YS5FZGl0YWJsZS5wcm90b3R5cGUucmVmcmVzaEJsb2NrU3R5bGVzLGNhbGxiYWNrOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmJsb2NrU3R5bGUoYixjKX0sdW5kbzohMH19KSxhLkVkaXRhYmxlLkRFRkFVTFRTPWEuZXh0ZW5kKGEuRWRpdGFibGUuREVGQVVMVFMse2RlZmF1bHRCbG9ja1N0eWxlOnsiZi1pdGFsaWMiOiJJdGFsaWMiLCJmLXR5cGV3cml0ZXIiOiJUeXBld3JpdGVyIiwiZi1zcGFjZWQiOiJTcGFjZWQiLCJmLXVwcGVyY2FzZSI6IlVwcGVyY2FzZSJ9LGJsb2NrU3R5bGVzVG9nZ2xlOiEwLGJsb2NrU3R5bGVzOnt9fSksYS5FZGl0YWJsZS5wcm90b3R5cGUuY29tbWFuZF9kaXNwYXRjaGVyPWEuZXh0ZW5kKGEuRWRpdGFibGUucHJvdG90eXBlLmNvbW1hbmRfZGlzcGF0Y2hlcix7YmxvY2tTdHlsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmJ1aWxkRHJvcGRvd25CbG9ja1N0eWxlKGEpLGM9dGhpcy5idWlsZERyb3Bkb3duQnV0dG9uKGEsYik7cmV0dXJuIGN9fSksYS5FZGl0YWJsZS5wcm90b3R5cGUuYnVpbGREcm9wZG93bkJsb2NrU3R5bGU9ZnVuY3Rpb24oKXt2YXIgYT0nPHVsIGNsYXNzPSJmci1kcm9wZG93bi1tZW51IGZyLWJsb2NrLXN0eWxlIj4nO3JldHVybiBhKz0iPC91bD4ifSxhLkVkaXRhYmxlLnByb3RvdHlwZS5ibG9ja1N0eWxlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRTZWxlY3Rpb25FbGVtZW50cygpWzBdLGQ9Yy50YWdOYW1lLnRvTG93ZXJDYXNlKCk7dGhpcy5mb3JtYXRCbG9jayhkLGEsYil9fShqUXVlcnkpOwojIERlc2NyaXB0aW9uOgojIFBsdWdpbiBmb3IgRnJvYWxhIHRvIGFkZCB0b2dnbGVhYmxlIGJsb2NrIGJ1dHRvbnMgdG8gdGhlIG1lbnUuCiMKIyBVc2FnZToKIyBJbml0aWFsaXplIEZyb2FsYSB3aXRoIHRoZSB0b2dnbGVCbG9jayBidXR0b24gYW5kIHNwZWNpZnkgeW91cgojIGJ1dHRvbnMgdmlhIHRoZSB0b2dnbGVCbG9ja0J1dHRvbnMgb3B0aW9uLgojCiMgJCgiZWxlbWVudCIpLmVkaXRhYmxlCiMgIGJ1dHRvbnM6IFsidG9nZ2xlQmxvY2siXSwKIyAgdG9nZ2xlQmxvY2tCdXR0b25zOiBbCiMgICAgeyB0YWc6ICJoMSIsIHRpdGxlOiAiSGVhZGluZyAxIiB9CiMgICAgeyB0YWc6ICJoMiIsIHRpdGxlOiAiSGVhZGluZyAyIiB9CiMgIF0KCigoJCkgLT4KICAkLkVkaXRhYmxlLmNvbW1hbmRzID0gJC5leHRlbmQgJC5FZGl0YWJsZS5jb21tYW5kcywKICAgIHRvZ2dsZUJsb2NrOgogICAgICByZWZyZXNoOiAtPgogICAgICAgIGN1cnJlbnRCbG9ja1RhZyA9IEBnZXRTZWxlY3Rpb25FbGVtZW50cygpWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKQoKICAgICAgICBmb3IgYmxvY2sgaW4gQG9wdGlvbnMudG9nZ2xlQmxvY2tCdXR0b25zCiAgICAgICAgICAkKCIuZnJvYWxhLWVkaXRvciAuZnItYnR0bltkYXRhLW5hbWU9I3tibG9jay50YWd9XSIpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKQogICAgICAgICAgaWYgY3VycmVudEJsb2NrVGFnID09IGJsb2NrLnRhZwogICAgICAgICAgICAkKCIuZnJvYWxhLWVkaXRvciAuZnItYnR0bltkYXRhLW5hbWU9I3tibG9jay50YWd9XSIpLmFkZENsYXNzKCJhY3RpdmUiKQoKICAkLkVkaXRhYmxlLnByb3RvdHlwZS5jb21tYW5kX2Rpc3BhdGNoZXIgPSAkLmV4dGVuZCAkLkVkaXRhYmxlLnByb3RvdHlwZS5jb21tYW5kX2Rpc3BhdGNoZXIsCiAgICB0b2dnbGVCbG9jazogKGNvbW1hbmQpIC0+CiAgICAgIGJ1dHRvbnMgPSAiIgoKICAgICAgZm9yIGJsb2NrIGluIEBvcHRpb25zLnRvZ2dsZUJsb2NrQnV0dG9ucwogICAgICAgICMgZnJlZXplIGJsb2NrIHZhcmlhYmxlIGluIGNsb3N1cmUgZm9yIGEgd29ya2luZyBjYWxsYmFjayBodHRwOi8vZ29vLmdsL1oxbmRlNQogICAgICAgICgoYmxvY2spIC0+CiAgICAgICAgICBidXR0b24gPSBAYnVpbGRDdXN0b21CdXR0b24oCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0aXRsZTogYmxvY2sudGl0bGUsCiAgICAgICAgICAgICAgaWNvbjogeyB0eXBlOiAidHh0IiwgdmFsdWU6IGJsb2NrLnRhZy50b1VwcGVyQ2FzZSgpIH0KICAgICAgICAgICAgICBjYWxsYmFjazogLT4KICAgICAgICAgICAgICAgIGlmIEBnZXRTZWxlY3Rpb25FbGVtZW50cygpWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PSBibG9jay50YWcKICAgICAgICAgICAgICAgICAgQGZvcm1hdEJsb2NrKCJwIikKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgQGZvcm1hdEJsb2NrKGJsb2NrLnRhZykKICAgICAgICAgICAgfSwgYmxvY2sudGFnCiAgICAgICAgICApCiAgICAgICAgICBidXR0b25zICs9IGJ1dHRvbgogICAgICAgICkuYXBwbHkoQCwgW2Jsb2NrXSkKCiAgICAgICMgbWFrZSBzdXJlIHRoZSByZWZyZXNoIGhvb2sgaXMgcnVuIGZvciB1cGRhdGluZyBtZW51IGFjdGl2ZSBzdGF0ZQogICAgICBAYmluZFJlZnJlc2hMaXN0ZW5lcihjb21tYW5kKQoKICAgICAgYnV0dG9ucwopKGpRdWVyeSkK",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 16:14:42 GMT",
                    "Content-Length": "151731",
                    "Date": "Fri, 07 Nov 2014 16:14:42 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}