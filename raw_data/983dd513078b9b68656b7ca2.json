{
    "url": "http://localhost:9999/monavari-lebrecht/openui5-sources/resources/sap-ui-core-all.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Open redirection (DOM-based)",
    "issueType": 5243152,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based open redirection vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the target of a redirection in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause a redirection to an arbitrary external domain. This behavior can be leveraged to facilitate phishing attacks against users of the application. The ability to use an authentic application URL, targeting the correct domain with a valid SSL certificate (if SSL is used) lends credibility to the phishing attack because many users, even if they verify these features, will not notice the subsequent redirection to a different domain.<br><br><b>Note:</b> If an attacker is able to control the start of the string that is passed to the redirection API, then it may be possible to escalate this vulnerability into a JavaScript injection attack, by using a URL with the javascript: pseudo-protocol to execute arbitrary script code when the URL is processed by the browser.",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based open redirection vulnerabilities is not to dynamically set redirection targets using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a redirection target. In general, this is best achieved by using a whitelist of URLs that are permitted redirection targets, and strictly validating the target against this list before performing the redirection.",
    "issueDetail": "The application may be vulnerable to DOM-based open redirection. Data is read from <b>location.href</b> and written to <b>location.href</b> via the following statement:<ul><li>location.href=location.href.replace(/#.*/,'')+o</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/monavari-lebrecht/openui5-sources/resources/sap-ui-core-all.js",
                "path": "/monavari-lebrecht/openui5-sources/resources/sap-ui-core-all.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9tb25hdmFyaS1sZWJyZWNodC9vcGVudWk1LXNvdXJjZXMvcmVzb3VyY2VzL3NhcC11aS1jb3JlLWFsbC5qcyBIVFRQLzEuMQ0KSG9zdDogbG9jYWxob3N0Ojk5OTkNCg0K",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTA2NDAxOQ0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KRGF0ZTogRnJpLCAwNyBOb3YgMjAxNCAyMToyNzozNSBHTVQNCkxhc3QtTW9kaWZpZWQ6IEZyaSwgMDcgTm92IDIwMTQgMjE6Mjc6MjEgR01UDQoNCndpbmRvd1sic2FwLXVpLW9wdGltaXplZCJdID0gdHJ1ZTsKdHJ5IHsKLyohCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KaWYod2luZG93LmpRdWVyeSYmd2luZG93LmpRdWVyeS5zYXAmJndpbmRvdy5qUXVlcnkuc2FwLmRlY2xhcmUpe3dpbmRvdy5qUXVlcnkuc2FwLmRlY2xhcmUoInNhcC51aS5EZXZpY2UiLGZhbHNlKX1pZih0eXBlb2Ygd2luZG93LnNhcCE9PSJvYmplY3QiJiZ0eXBlb2Ygd2luZG93LnNhcCE9PSJmdW5jdGlvbiIpe3dpbmRvdy5zYXA9e319aWYodHlwZW9mIHdpbmRvdy5zYXAudWkhPT0ib2JqZWN0Iil7d2luZG93LnNhcC51aT17fX0oZnVuY3Rpb24oKXtpZih0eXBlb2Ygd2luZG93LnNhcC51aS5EZXZpY2U9PT0ib2JqZWN0Inx8dHlwZW9mIHdpbmRvdy5zYXAudWkuRGV2aWNlPT09ImZ1bmN0aW9uIil7dmFyIGM9IjEuMjIuMTAiO3dpbmRvdy5zYXAudWkuRGV2aWNlLl9jaGVja0FQSVZlcnNpb24oYyk7cmV0dXJufXZhciBkPXt9O2Z1bmN0aW9uIHAoaSx3KXtyZXR1cm4oIjAwMCIrU3RyaW5nKGkpKS5zbGljZSgtdyl9dmFyIEY9MCxFPTEsVz0yLEk9MyxEPTQsVD01O3ZhciBnPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0Q29tcG9uZW50PSdERVZJQ0UnO3RoaXMuc1dpbmRvd05hbWU9KHdpbmRvdy50b3A9PXdpbmRvdyk/IiI6IlsiK3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpLnNsaWNlKC0xKVswXSsiXSAiO3RoaXMubG9nPWZ1bmN0aW9uKGkscyxhKXthPWF8fHRoaXMuZGVmYXVsdENvbXBvbmVudHx8Jyc7dmFyIGI9bmV3IERhdGUoKSxlPXt0aW1lOnAoYi5nZXRIb3VycygpLDIpKyI6IitwKGIuZ2V0TWludXRlcygpLDIpKyI6IitwKGIuZ2V0U2Vjb25kcygpLDIpLGRhdGU6cChiLmdldEZ1bGxZZWFyKCksNCkrIi0iK3AoYi5nZXRNb250aCgpKzEsMikrIi0iK3AoYi5nZXREYXRlKCksMiksdGltZXN0YW1wOmIuZ2V0VGltZSgpLGxldmVsOmksbWVzc2FnZTpzfHwiIixjb21wb25lbnQ6YXx8IiJ9O2lmKHdpbmRvdy5jb25zb2xlKXt2YXIgZj1lLmRhdGUrIiAiK2UudGltZSsiICIrdGhpcy5zV2luZG93TmFtZStlLm1lc3NhZ2UrIiAtICIrZS5jb21wb25lbnQ7c3dpdGNoKGkpe2Nhc2UgRjpjYXNlIEU6Y29uc29sZS5lcnJvcihmKTticmVhaztjYXNlIFc6Y29uc29sZS53YXJuKGYpO2JyZWFrO2Nhc2UgSTpjb25zb2xlLmluZm8/Y29uc29sZS5pbmZvKGYpOmNvbnNvbGUubG9nKGYpO2JyZWFrO2Nhc2UgRDpjb25zb2xlLmRlYnVnP2NvbnNvbGUuZGVidWcoZik6Y29uc29sZS5sb2coZik7YnJlYWs7Y2FzZSBUOmNvbnNvbGUudHJhY2U/Y29uc29sZS50cmFjZShmKTpjb25zb2xlLmxvZyhmKTticmVha319cmV0dXJuIGV9fTt2YXIgbD1uZXcgZygpO2wubG9nKEksIkRldmljZSBBUEkgbG9nZ2luZyBpbml0aWFsaXplZCIpO2QuX2NoZWNrQVBJVmVyc2lvbj1mdW5jdGlvbihzKXt2YXIgdj0iMS4yMi4xMCI7aWYodiE9cyl7bC5sb2coVywiRGV2aWNlIEFQSSB2ZXJzaW9uIGRpZmZlcnM6ICIrdisiIDwtPiAiK3MpfX07dmFyIGg9e307ZnVuY3Rpb24gaihlLGYsYSl7aWYoIWhbZV0pe2hbZV09W119aFtlXS5wdXNoKHtvTGlzdGVuZXI6YSxmRnVuY3Rpb246Zn0pfTtmdW5jdGlvbiBrKGUsZixhKXt2YXIgYj1oW2VdO2lmKCFiKXtyZXR1cm4gdGhpc31mb3IodmFyIGk9MCxxPWIubGVuZ3RoO2k8cTtpKyspe2lmKGJbaV0uZkZ1bmN0aW9uPT09ZiYmYltpXS5vTGlzdGVuZXI9PT1hKXtiLnNwbGljZShpLDEpO2JyZWFrfX1pZihiLmxlbmd0aD09MCl7ZGVsZXRlIGhbZV19fTtmdW5jdGlvbiBuKGUsYSl7dmFyIGI9aFtlXSxmO2lmKGIpe2I9Yi5zbGljZSgpO2Zvcih2YXIgaT0wLHE9Yi5sZW5ndGg7aTxxO2krKyl7Zj1iW2ldO2YuZkZ1bmN0aW9uLmNhbGwoZi5vTGlzdGVuZXJ8fHdpbmRvdyxhKX19fTt2YXIgTz17IldJTkRPV1MiOiJ3aW4iLCJNQUNJTlRPU0giOiJtYWMiLCJMSU5VWCI6ImxpbnV4IiwiSU9TIjoiaU9TIiwiQU5EUk9JRCI6IkFuZHJvaWQiLCJCTEFDS0JFUlJZIjoiYmIiLCJXSU5ET1dTX1BIT05FIjoid2lucGhvbmUifTtmdW5jdGlvbiBvKGEpe2Z1bmN0aW9uIGIoKXt2YXIgcz1uYXZpZ2F0b3IucGxhdGZvcm07aWYocy5pbmRleE9mKCJXaW4iKSE9LTEpe3ZhciB0PS93aW5kb3dzIE5UIDYuKFxkKS9pO3ZhciBmPWEubWF0Y2godCk7dmFyIHY9IiI7aWYoZil7aWYoZlsxXT09MSl7dj0iNyJ9ZWxzZSBpZihmWzFdPjEpe3Y9IjgifX1yZXR1cm57Im5hbWUiOk8uV0lORE9XUywidmVyc2lvblN0ciI6dn19ZWxzZSBpZihzLmluZGV4T2YoIk1hYyIpIT0tMSl7cmV0dXJueyJuYW1lIjpPLk1BQ0lOVE9TSCwidmVyc2lvblN0ciI6IiJ9fWVsc2UgaWYocy5pbmRleE9mKCJMaW51eCIpIT0tMSl7cmV0dXJueyJuYW1lIjpPLkxJTlVYLCJ2ZXJzaW9uU3RyIjoiIn19bC5sb2coSSwiT1MgZGV0ZWN0aW9uIHJldHVybmVkIG5vIHJlc3VsdCIpO3JldHVybiBudWxsfWE9YXx8bmF2aWdhdG9yLnVzZXJBZ2VudDt2YXIgZT0vXCgoW2EtekEtWiBdKyk7XHMoPzpbVV0/WztdPykoW1xEXSspKCg/OltcZC5fXSopKSg/Oi4qW1wpXVteXGRdKikoW1xkLl0qKVxzLzt2YXIgZj1hLm1hdGNoKGUpO2lmKGYpe3ZhciBpPS9pUGhvbmV8aVBhZHxpUG9kLzt2YXIgcT0vUGxheUJvb2t8QmxhY2tCZXJyeS87aWYoZlswXS5tYXRjaChpKSl7ZlszXT1mWzNdLnJlcGxhY2UoL18vZywiLiIpO3JldHVybih7Im5hbWUiOk8uSU9TLCJ2ZXJzaW9uU3RyIjpmWzNdfSl9ZWxzZSBpZihmWzJdLm1hdGNoKC9BbmRyb2lkLykpe2ZbMl09ZlsyXS5yZXBsYWNlKC9ccy9nLCIiKTtyZXR1cm4oeyJuYW1lIjpPLkFORFJPSUQsInZlcnNpb25TdHIiOmZbM119KX1lbHNlIGlmKGZbMF0ubWF0Y2gocSkpe3JldHVybih7Im5hbWUiOk8uQkxBQ0tCRVJSWSwidmVyc2lvblN0ciI6Zls0XX0pfWVsc2V7cmV0dXJuIGIoKX19ZWxzZSBpZihhLmluZGV4T2YoIihCQjEwOyIpPjApe2U9L1xzVmVyc2lvblwvKFtcZC5dKylccy87Zj1hLm1hdGNoKGUpO2lmKGYpe3JldHVybnsibmFtZSI6Ty5CTEFDS0JFUlJZLCJ2ZXJzaW9uU3RyIjpmWzFdfX1lbHNle3JldHVybnsibmFtZSI6Ty5CTEFDS0JFUlJZLCJ2ZXJzaW9uU3RyIjonMTAnfX19ZWxzZXtlPS9XaW5kb3dzIFBob25lICg/Ok9TICk/KFtcZC5dKikvO2Y9YS5tYXRjaChlKTtpZihmKXtyZXR1cm4oeyJuYW1lIjpPLldJTkRPV1NfUEhPTkUsInZlcnNpb25TdHIiOmZbMV19KX1lbHNle3JldHVybiBiKCl9fX07ZnVuY3Rpb24gcigpe2Qub3M9bygpfHx7fTtkLm9zLk9TPU87ZC5vcy52ZXJzaW9uPWQub3MudmVyc2lvblN0cj9wYXJzZUZsb2F0KGQub3MudmVyc2lvblN0cik6LTE7aWYoZC5vcy5uYW1lKXtmb3IodmFyIGIgaW4gTyl7aWYoT1tiXT09PWQub3MubmFtZSl7ZC5vc1tiLnRvTG93ZXJDYXNlKCldPXRydWV9fX19cigpO3ZhciBCPXsiSU5URVJORVRfRVhQTE9SRVIiOiJpZSIsIkZJUkVGT1giOiJmZiIsIkNIUk9NRSI6ImNyIiwiU0FGQVJJIjoic2YiLCJBTkRST0lEIjoiYW4ifTt2YXIgdT1uYXZpZ2F0b3IudXNlckFnZW50OwovKiEKCSAqIFRha2VuIGZyb20galF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2MS43LjEKCSAqIGh0dHA6Ly9qcXVlcnkuY29tLwoJICoKCSAqIENvcHlyaWdodCAyMDExLCBKb2huIFJlc2lnCgkgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4KCSAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKCSAqCgkgKiBJbmNsdWRlcyBTaXp6bGUuanMKCSAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vCgkgKiBDb3B5cmlnaHQgMjAxMSwgVGhlIERvam8gRm91bmRhdGlvbgoJICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCwgQlNELCBhbmQgR1BMIExpY2Vuc2VzLgoJICoKCSAqIERhdGU6IE1vbiBOb3YgMjEgMjE6MTE6MDMgMjAxMSAtMDUwMAoJICovCmZ1bmN0aW9uIHkoYSl7dmFyIGI9KGF8fHUpLnRvTG93ZXJDYXNlKCk7dmFyIGU9Lyh3ZWJraXQpWyBcL10oW1x3Ll0rKS87dmFyIGY9LyhvcGVyYSkoPzouKnZlcnNpb24pP1sgXC9dKFtcdy5dKykvO3ZhciBpPS8obXNpZSkgKFtcdy5dKykvO3ZhciBxPS8odHJpZGVudClcL1tcdy5dKzsuKnJ2OihbXHcuXSspLzt2YXIgcz0vKG1vemlsbGEpKD86Lio/IHJ2OihbXHcuXSspKT8vO3ZhciBWPWUuZXhlYyhiKXx8Zi5leGVjKGIpfHxpLmV4ZWMoYil8fHEuZXhlYyhiKXx8Yi5pbmRleE9mKCJjb21wYXRpYmxlIik8MCYmcy5leGVjKGIpfHxbXTt2YXIgdD17YnJvd3NlcjpWWzFdfHwiIix2ZXJzaW9uOlZbMl18fCIwIn07dFt0LmJyb3dzZXJdPXRydWU7cmV0dXJuIHR9O2Z1bmN0aW9uIHooYSl7dmFyIGI9eShhKTt2YXIgZT1hfHx1O2lmKGIubW96aWxsYSl7aWYoZS5tYXRjaCgvRmlyZWZveFwvKFxkK1wuXGQrKS8pKXt2YXIgdj1wYXJzZUZsb2F0KFJlZ0V4cC4kMSk7cmV0dXJue25hbWU6Qi5GSVJFRk9YLHZlcnNpb25TdHI6IiIrdix2ZXJzaW9uOnYsbW96aWxsYTp0cnVlLG1vYmlsZTpmYWxzZX19ZWxzZXtyZXR1cm57bW9iaWxlOmkudGVzdChlKSxtb3ppbGxhOnRydWV9fX1lbHNlIGlmKGIud2Via2l0KXt2YXIgZj1lLnRvTG93ZXJDYXNlKCkubWF0Y2goL3dlYmtpdFtcL10oW1xkLl0rKS8pO2lmKGYpe3ZhciB3PWZbMV19dmFyIGk9L01vYmlsZS87aWYoZS5tYXRjaCgvQ2hyb21lXC8oXGQrXC5cZCspLlxkKy8pKXt2YXIgdj1wYXJzZUZsb2F0KFJlZ0V4cC4kMSk7cmV0dXJue25hbWU6Qi5DSFJPTUUsdmVyc2lvblN0cjoiIit2LHZlcnNpb246dixtb2JpbGU6aS50ZXN0KGUpLHdlYmtpdDp0cnVlLHdlYmtpdFZlcnNpb246d319ZWxzZSBpZihlLm1hdGNoKC9BbmRyb2lkIC4rIFZlcnNpb25cLyhcZCtcLlxkKykvKSl7dmFyIHY9cGFyc2VGbG9hdChSZWdFeHAuJDEpO3JldHVybntuYW1lOkIuQU5EUk9JRCx2ZXJzaW9uU3RyOiIiK3YsdmVyc2lvbjp2LG1vYmlsZTppLnRlc3QoZSksd2Via2l0OnRydWUsd2Via2l0VmVyc2lvbjp3fX1lbHNle3ZhciBxPS9WZXJzaW9uXC8oXGQrXC5cZCspLipTYWZhcmkvO2lmKHEudGVzdChlKSl7dmFyIHY9cGFyc2VGbG9hdChxLmV4ZWMoZSlbMV0pO3JldHVybntuYW1lOkIuU0FGQVJJLHZlcnNpb25TdHI6IiIrdix2ZXJzaW9uOnYsbW9iaWxlOmkudGVzdChlKSx3ZWJraXQ6dHJ1ZX19ZWxzZXtyZXR1cm57bW9iaWxlOmkudGVzdChlKSx3ZWJraXQ6dHJ1ZSx3ZWJraXRWZXJzaW9uOnd9fX19ZWxzZSBpZihiLm1zaWV8fGIudHJpZGVudCl7dmFyIHY7aWYoZG9jdW1lbnQuZG9jdW1lbnRNb2RlJiYhYSl7aWYoZG9jdW1lbnQuZG9jdW1lbnRNb2RlPT09Nyl7dj04LjB9ZWxzZXt2PXBhcnNlRmxvYXQoZG9jdW1lbnQuZG9jdW1lbnRNb2RlKX19ZWxzZXt2PXBhcnNlRmxvYXQoYi52ZXJzaW9uKX1yZXR1cm57bmFtZTpCLklOVEVSTkVUX0VYUExPUkVSLHZlcnNpb25TdHI6IiIrdix2ZXJzaW9uOnYsbXNpZTp0cnVlLG1vYmlsZTpmYWxzZX19cmV0dXJue25hbWU6IiIsdmVyc2lvblN0cjoiIix2ZXJzaW9uOi0xLG1vYmlsZTpmYWxzZX19O2QuX3Rlc3RVc2VyQWdlbnQ9ejtmdW5jdGlvbiBBKCl7ZC5icm93c2VyPXooKTtkLmJyb3dzZXIuQlJPV1NFUj1CO2lmKGQuYnJvd3Nlci5uYW1lKXtmb3IodmFyIGIgaW4gQil7aWYoQltiXT09PWQuYnJvd3Nlci5uYW1lKXtkLmJyb3dzZXJbYi50b0xvd2VyQ2FzZSgpXT10cnVlfX19fUEoKTtkLnN1cHBvcnQ9e307ZC5zdXBwb3J0LnRvdWNoPSEhKCgnb250b3VjaHN0YXJ0J2luIHdpbmRvdyl8fHdpbmRvdy5Eb2N1bWVudFRvdWNoJiZkb2N1bWVudCBpbnN0YW5jZW9mIHdpbmRvdy5Eb2N1bWVudFRvdWNoKTtkLnN1cHBvcnQubWF0Y2htZWRpYT0hIXdpbmRvdy5tYXRjaE1lZGlhO3ZhciBtPWQuc3VwcG9ydC5tYXRjaG1lZGlhP3dpbmRvdy5tYXRjaE1lZGlhKCJzY3JlZW4gYW5kIChtYXgtd2lkdGg6MHB4KSIpOm51bGw7ZC5zdXBwb3J0Lm1hdGNobWVkaWFsaXN0ZW5lcj0hIShtJiZtLmFkZExpc3RlbmVyKTtpZihkLmJyb3dzZXIuc2FmYXJpJiZkLmJyb3dzZXIudmVyc2lvbjw2KXtkLnN1cHBvcnQubWF0Y2htZWRpYWxpc3RlbmVyPWZhbHNlfWQuc3VwcG9ydC5vcmllbnRhdGlvbj0hISgib3JpZW50YXRpb24iaW4gd2luZG93JiYib25vcmllbnRhdGlvbmNoYW5nZSJpbiB3aW5kb3cpO2Quc3VwcG9ydC5yZXRpbmE9KHdpbmRvdy5yZXRpbmF8fHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvPj0yKTtkLnN1cHBvcnQud2Vic29ja2V0PSgnV2ViU29ja2V0J2luIHdpbmRvdyk7ZC5zdXBwb3J0LmlucHV0PXt9O2Quc3VwcG9ydC5pbnB1dC5wbGFjZWhvbGRlcj0oJ3BsYWNlaG9sZGVyJ2luIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0IikpO2QubWVkaWE9e307dmFyIFI9eyJTQVBfM1NURVBTIjoiM1N0ZXAiLCJTQVBfNFNURVBTIjoiNFN0ZXAiLCJTQVBfNlNURVBTIjoiNlN0ZXAiLCJTQVBfU1RBTkRBUkQiOiJTdGQifTtkLm1lZGlhLlJBTkdFU0VUUz1SO2QubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHM9e307ZC5tZWRpYS5fcHJlZGVmaW5lZFJhbmdlU2V0c1tSLlNBUF8zU1RFUFNdPXtwb2ludHM6WzUyMCw5NjBdLHVuaXQ6InB4IixuYW1lOlIuU0FQXzNTVEVQUyxuYW1lczpbIlMiLCJNIiwiTCJdfTtkLm1lZGlhLl9wcmVkZWZpbmVkUmFuZ2VTZXRzW1IuU0FQXzRTVEVQU109e3BvaW50czpbNTIwLDc2MCw5NjBdLHVuaXQ6InB4IixuYW1lOlIuU0FQXzRTVEVQUyxuYW1lczpbIlMiLCJNIiwiTCIsIlhMIl19O2QubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHNbUi5TQVBfNlNURVBTXT17cG9pbnRzOlsyNDEsNDAwLDU0MSw3NjgsOTYwXSx1bml0OiJweCIsbmFtZTpSLlNBUF82U1RFUFMsbmFtZXM6WyJYUyIsIlMiLCJNIiwiTCIsIlhMIiwiWFhMIl19O2QubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHNbUi5TQVBfU1RBTkRBUkRdPXtwb2ludHM6WzYwMCwxMDI0XSx1bml0OiJweCIsbmFtZTpSLlNBUF9TVEFOREFSRCxuYW1lczpbIlBob25lIiwiVGFibGV0IiwiRGVza3RvcCJdfTt2YXIgXz1SLlNBUF9TVEFOREFSRDt2YXIgQz1kLnN1cHBvcnQubWF0Y2htZWRpYWxpc3RlbmVyPzA6MTAwO3ZhciBHPXt9O3ZhciBIPW51bGw7ZnVuY3Rpb24gSihmLHQsYSl7YT1hfHwicHgiO3ZhciBxPSJzY3JlZW4iO2lmKGY+MCl7cT1xKyIgYW5kIChtaW4td2lkdGg6IitmK2ErIikifWlmKHQ+MCl7cT1xKyIgYW5kIChtYXgtd2lkdGg6Iit0K2ErIikifXJldHVybiBxfTtmdW5jdGlvbiBLKGEpe2lmKCFkLnN1cHBvcnQubWF0Y2htZWRpYWxpc3RlbmVyJiZIPT1RKClbMF0pe3JldHVybn1pZihHW2FdLnRpbWVyKXtjbGVhclRpbWVvdXQoR1thXS50aW1lcik7R1thXS50aW1lcj1udWxsfUdbYV0udGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBiPU0oYSxmYWxzZSk7aWYoYil7bigibWVkaWFfIithLGIpfX0sQyl9O2Z1bmN0aW9uIEwocyxpKXt2YXIgcT1HW3NdLnF1ZXJpZXNbaV07dmFyIGE9e2Zyb206cS5mcm9tLHVuaXQ6R1tzXS51bml0fTtpZihxLnRvPj0wKXthLnRvPXEudG99aWYoR1tzXS5uYW1lcyl7YS5uYW1lPUdbc10ubmFtZXNbaV19cmV0dXJuIGF9O2Z1bmN0aW9uIE0oYSxiKXtpZihHW2FdKXt2YXIgZT1HW2FdLnF1ZXJpZXM7dmFyIGY9bnVsbDtmb3IodmFyIGk9MCxzPWUubGVuZ3RoO2k8cztpKyspe3ZhciBxPWVbaV07aWYoKHEhPUdbYV0uY3VycmVudHF1ZXJ5fHxiKSYmZC5tZWRpYS5tYXRjaGVzKHEuZnJvbSxxLnRvLEdbYV0udW5pdCkpe2lmKCFiKXtHW2FdLmN1cnJlbnRxdWVyeT1xfWlmKCFHW2FdLm5vQ2xhc3NlcyYmR1thXS5uYW1lcyYmIWIpe04oYSxHW2FdLm5hbWVzW2ldKX1mPUwoYSxpKX19cmV0dXJuIGZ9bC5sb2coVywiTm8gcXVlcnlzZXQgd2l0aCBuYW1lICIrYSsiIGZvdW5kIiwnREVWSUNFLk1FRElBJyk7cmV0dXJuIG51bGx9O2Z1bmN0aW9uIE4ocyxhLGIpe3ZhciBlPSJzYXBVaU1lZGlhLSIrcysiLSI7UChlK2EsYixlKX07ZnVuY3Rpb24gUChzLGIsYSl7dmFyIGU9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2lmKGUuY2xhc3NOYW1lLmxlbmd0aD09MCl7aWYoIWIpe2UuY2xhc3NOYW1lPXN9fWVsc2V7dmFyIGY9ZS5jbGFzc05hbWUuc3BsaXQoIiAiKTt2YXIgcT0iIjtmb3IodmFyIGk9MDtpPGYubGVuZ3RoO2krKyl7aWYoKGEmJmZbaV0uaW5kZXhPZihhKSE9MCl8fCghYSYmZltpXSE9cykpe3E9cStmW2ldKyIgIn19aWYoIWIpe3E9cStzfWUuY2xhc3NOYW1lPXF9fTtmdW5jdGlvbiBRKCl7cmV0dXJuW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XX07ZnVuY3Rpb24gUyh2LGEpe2lmKGE9PT0iZW0ifHxhPT09InJlbSIpe3ZhciBzPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlfHxmdW5jdGlvbihlKXtyZXR1cm4gZS5jdXJyZW50U3R5bGV9O3ZhciB4PXMoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5mb250U2l6ZTt2YXIgZj0oeCYmeC5pbmRleE9mKCJweCIpPj0wKT9wYXJzZUZsb2F0KHgsMTApOjE2O3JldHVybiB2KmZ9cmV0dXJuIHZ9O2Z1bmN0aW9uIFUoZix0LGUpe2Y9UyhmLGUpO3Q9Uyh0LGUpO3ZhciB3PVEoKVswXTt2YXIgYT1mPDB8fGY8PXc7dmFyIGI9dDwwfHx3PD10O3JldHVybiBhJiZifTtmdW5jdGlvbiBWKGYsdCxhKXt2YXIgcT1KKGYsdCxhKTt2YXIgbT13aW5kb3cubWF0Y2hNZWRpYShxKTtyZXR1cm4gbSYmbS5tYXRjaGVzfTtkLm1lZGlhLm1hdGNoZXM9ZC5zdXBwb3J0Lm1hdGNobWVkaWE/VjpVO2QubWVkaWEuYXR0YWNoSGFuZGxlcj1mdW5jdGlvbihmLGEscyl7dmFyIGI9c3x8XztqKCJtZWRpYV8iK2IsZixhKX07ZC5tZWRpYS5kZXRhY2hIYW5kbGVyPWZ1bmN0aW9uKGYsYSxzKXt2YXIgYj1zfHxfO2soIm1lZGlhXyIrYixmLGEpfTtkLm1lZGlhLmluaXRSYW5nZVNldD1mdW5jdGlvbihzLGEsYixlLGYpe3ZhciB0O2lmKCFzKXt0PWQubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHNbX119ZWxzZSBpZihzJiZkLm1lZGlhLl9wcmVkZWZpbmVkUmFuZ2VTZXRzW3NdKXt0PWQubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHNbc119ZWxzZXt0PXtuYW1lOnMsdW5pdDooYnx8InB4IikudG9Mb3dlckNhc2UoKSxwb2ludHM6YXx8W10sbmFtZXM6ZSxub0NsYXNzZXM6ISFmfX1pZihkLm1lZGlhLmhhc1JhbmdlU2V0KHQubmFtZSkpe3JldHVybjtsLmxvZyhJLCJSYW5nZSBzZXQgIit0Lm5hbWUrIiBoYXNlIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZCIsJ0RFVklDRS5NRURJQScpfXM9dC5uYW1lO3QucXVlcmllcz1bXTt0LnRpbWVyPW51bGw7dC5jdXJyZW50cXVlcnk9bnVsbDt0Lmxpc3RlbmVyPWZ1bmN0aW9uKCl7cmV0dXJuIEsocyl9O3ZhciB2LHcseDt2YXIgeDE9dC5wb2ludHM7Zm9yKHZhciBpPTAseTE9eDEubGVuZ3RoO2k8PXkxO2krKyl7dj0oaT09MCk/MDp4MVtpLTFdO3c9KGk9PXgxLmxlbmd0aCk/LTE6eDFbaV07eD1KKHYsdyx0LnVuaXQpO3QucXVlcmllcy5wdXNoKHtxdWVyeTp4LGZyb206dix0bzp3fSl9O2lmKHQubmFtZXMmJnQubmFtZXMubGVuZ3RoIT10LnF1ZXJpZXMubGVuZ3RoKXt0Lm5hbWVzPW51bGx9R1t0Lm5hbWVdPXQ7aWYoZC5zdXBwb3J0Lm1hdGNobWVkaWFsaXN0ZW5lcil7dmFyIHoxPXQucXVlcmllcztmb3IodmFyIGk9MDtpPHoxLmxlbmd0aDtpKyspe3ZhciBxPXoxW2ldO3EubWVkaWE9d2luZG93Lm1hdGNoTWVkaWEocS5xdWVyeSk7cS5tZWRpYS5hZGRMaXN0ZW5lcih0Lmxpc3RlbmVyKX19ZWxzZXtpZih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsdC5saXN0ZW5lcixmYWxzZSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9yaWVudGF0aW9uY2hhbmdlIix0Lmxpc3RlbmVyLGZhbHNlKX1lbHNle3dpbmRvdy5hdHRhY2hFdmVudCgib25yZXNpemUiLHQubGlzdGVuZXIpfX10Lmxpc3RlbmVyKCl9O2QubWVkaWEuZ2V0Q3VycmVudFJhbmdlPWZ1bmN0aW9uKHMpe2lmKCFkLm1lZGlhLmhhc1JhbmdlU2V0KHMpKXtyZXR1cm4gbnVsbH1yZXR1cm4gTShzLHRydWUpfTtkLm1lZGlhLmhhc1JhbmdlU2V0PWZ1bmN0aW9uKHMpe3JldHVybiBzJiYhIUdbc119O2QubWVkaWEucmVtb3ZlUmFuZ2VTZXQ9ZnVuY3Rpb24ocyl7aWYoIWQubWVkaWEuaGFzUmFuZ2VTZXQocykpe2wubG9nKEksIlJhbmdlU2V0ICIrcysiIG5vdCBmb3VuZCwgdGh1cyBjb3VsZCBub3QgYmUgcmVtb3ZlZC4iLCdERVZJQ0UuTUVESUEnKTtyZXR1cm59Zm9yKHZhciB4IGluIFIpe2lmKHM9PT1SW3hdKXtsLmxvZyhXLCJDYW5ub3QgcmVtb3ZlIGRlZmF1bHQgcmFuZ2VzZXQgLSBubyBhY3Rpb24gdGFrZW4uIiwnREVWSUNFLk1FRElBJyk7cmV0dXJufX12YXIgYT1HW3NdO2lmKGQuc3VwcG9ydC5tYXRjaG1lZGlhbGlzdGVuZXIpe3ZhciBxPWEucXVlcmllcztmb3IodmFyIGk9MDtpPHEubGVuZ3RoO2krKyl7cVtpXS5tZWRpYS5yZW1vdmVMaXN0ZW5lcihhLmxpc3RlbmVyKX19ZWxzZXtpZih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcil7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsYS5saXN0ZW5lcixmYWxzZSk7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm9yaWVudGF0aW9uY2hhbmdlIixhLmxpc3RlbmVyLGZhbHNlKX1lbHNle3dpbmRvdy5kZXRhY2hFdmVudCgib25yZXNpemUiLGEubGlzdGVuZXIpfX1OKHMsIiIsdHJ1ZSk7ZGVsZXRlIGhbIm1lZGlhXyIrc107ZGVsZXRlIEdbc119O3ZhciBYPXsiVEFCTEVUIjoidGFibGV0IiwiUEhPTkUiOiJwaG9uZSIsIkRFU0tUT1AiOiJkZXNrdG9wIiwiQ09NQkkiOiJjb21iaSJ9O3ZhciBZPWQub3Mud2luZG93cyYmZC5vcy52ZXJzaW9uPT09ODt2YXIgWj1kLm9zLndpbmRvd3MmJmQub3MudmVyc2lvbj09PTc7ZC5zeXN0ZW09e307ZnVuY3Rpb24gJChhKXt2YXIgdD1hMSgpO3ZhciBzPXt9O3MudGFibGV0PSgoZC5zdXBwb3J0LnRvdWNoJiYhWil8fCEhYSkmJnQ7cy5waG9uZT0oKGQuc3VwcG9ydC50b3VjaCYmIVopfHwhIWEpJiYhdDtzLmRlc2t0b3A9KCFzLnRhYmxldCYmIXMucGhvbmUpfHxZfHxaO3MuY29tYmk9KHMuZGVza3RvcCYmcy50YWJsZXQpO3MuU1lTVEVNVFlQRT1YO2Zvcih2YXIgYiBpbiBYKXtQKCJzYXAtIitYW2JdLCFzW1hbYl1dKX1yZXR1cm4gc307ZnVuY3Rpb24gYTEoKXt2YXIgYT0oLyg/PWFuZHJvaWQpKD89Liptb2JpbGUpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSk7dmFyIGI9ZC5vcy5hbmRyb2lkJiYoZC5vcy52ZXJzaW9uPj00LjQpJiYvVmVyc2lvblwvXGQuXGQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7aWYoZC5vcy5uYW1lPT09ZC5vcy5PUy5JT1Mpe3JldHVybi9pcGFkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX1lbHNle2lmKGQuc3VwcG9ydC50b3VjaCl7dmFyIGU9d2luZG93LmRldmljZVBpeGVsUmF0aW8/d2luZG93LmRldmljZVBpeGVsUmF0aW86MTtpZighYiYmKGQub3MubmFtZT09PWQub3MuT1MuQU5EUk9JRCkmJmQuYnJvd3Nlci53ZWJraXQmJihkLmJyb3dzZXIud2Via2l0VmVyc2lvbj41MzcuMTApKXtlPTF9dmFyIHQ9KE1hdGgubWluKHdpbmRvdy5zY3JlZW4ud2lkdGgvZSx3aW5kb3cuc2NyZWVuLmhlaWdodC9lKT49NjAwKTtpZih0MSgpJiYod2luZG93LnNjcmVlbi5oZWlnaHQ9PT01NTJ8fHdpbmRvdy5zY3JlZW4uaGVpZ2h0PT09NTUzKSYmKC9OZXh1cyA3L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkpe3Q9dHJ1ZX1yZXR1cm4gdH1lbHNle3ZhciBmPShkLm9zLm5hbWU9PT1kLm9zLk9TLkFORFJPSUQpJiYhYTtyZXR1cm4gZn19fTtmdW5jdGlvbiBiMShhKXtkLnN5c3RlbT0kKGEpO2lmKGQuc3lzdGVtLnRhYmxldHx8ZC5zeXN0ZW0ucGhvbmUpe2QuYnJvd3Nlci5tb2JpbGU9dHJ1ZX19YjEoKTtkLm9yaWVudGF0aW9uPXt9O2QucmVzaXplPXt9O2Qub3JpZW50YXRpb24uYXR0YWNoSGFuZGxlcj1mdW5jdGlvbihmLGEpe2ooIm9yaWVudGF0aW9uIixmLGEpfTtkLnJlc2l6ZS5hdHRhY2hIYW5kbGVyPWZ1bmN0aW9uKGYsYSl7aigicmVzaXplIixmLGEpfTtkLm9yaWVudGF0aW9uLmRldGFjaEhhbmRsZXI9ZnVuY3Rpb24oZixhKXtrKCJvcmllbnRhdGlvbiIsZixhKX07ZC5yZXNpemUuZGV0YWNoSGFuZGxlcj1mdW5jdGlvbihmLGEpe2soInJlc2l6ZSIsZixhKX07ZnVuY3Rpb24gYzEoaSl7aS5sYW5kc2NhcGU9dDEodHJ1ZSk7aS5wb3J0cmFpdD0haS5sYW5kc2NhcGV9O2Z1bmN0aW9uIGQxKCl7YzEoZC5vcmllbnRhdGlvbik7bigib3JpZW50YXRpb24iLHtsYW5kc2NhcGU6ZC5vcmllbnRhdGlvbi5sYW5kc2NhcGV9KX07ZnVuY3Rpb24gZTEoKXtmMShkLnJlc2l6ZSk7bigicmVzaXplIix7aGVpZ2h0OmQucmVzaXplLmhlaWdodCx3aWR0aDpkLnJlc2l6ZS53aWR0aH0pfTtmdW5jdGlvbiBmMShpKXtpLndpZHRoPVEoKVswXTtpLmhlaWdodD1RKClbMV19O2Z1bmN0aW9uIGcxKCl7dmFyIHc9ZC5vcmllbnRhdGlvbi5sYW5kc2NhcGU7dmFyIGk9dDEoKTtpZih3IT1pKXtkMSgpfWlmKCFsMSl7bDE9d2luZG93LnNldFRpbWVvdXQoaDEsMTUwKX19O2Z1bmN0aW9uIGgxKCl7ZTEoKTtsMT1udWxsfTt2YXIgaTE9ZmFsc2U7dmFyIGoxPWZhbHNlO3ZhciBrMTt2YXIgbDE7dmFyIG0xO3ZhciBuMT1RKClbMV07dmFyIG8xPVEoKVswXTt2YXIgcDE9ZmFsc2U7dmFyIHExO3ZhciByMT0vSU5QVVR8VEVYVEFSRUF8U0VMRUNULzt2YXIgczE9ZC5vcy5pb3MmJmQuYnJvd3Nlci5uYW1lPT09InNmIiYmKChkLnN5c3RlbS5waG9uZSYmZC5vcy52ZXJzaW9uPj03JiZkLm9zLnZlcnNpb248Ny4xKXx8KGQuc3lzdGVtLnRhYmxldCYmZC5vcy52ZXJzaW9uPj03KSk7ZnVuY3Rpb24gdDEoZil7aWYoZC5zdXBwb3J0LnRvdWNoJiZkLnN1cHBvcnQub3JpZW50YXRpb24pe2lmKHAxJiZmKXtyZXR1cm4hZC5vcmllbnRhdGlvbi5sYW5kc2NhcGV9aWYocDEpe3JldHVybiBkLm9yaWVudGF0aW9uLmxhbmRzY2FwZX19ZWxzZXtpZihkLnN1cHBvcnQubWF0Y2htZWRpYSYmZC5zdXBwb3J0Lm9yaWVudGF0aW9uKXtyZXR1cm4hIXdpbmRvdy5tYXRjaE1lZGlhKCIob3JpZW50YXRpb246IGxhbmRzY2FwZSkiKS5tYXRjaGVzfX12YXIgcz1RKCk7cmV0dXJuIHNbMF0+c1sxXX07ZnVuY3Rpb24gdTEoZSl7aWYoZS50eXBlPT0icmVzaXplIil7aWYoczEmJnIxLnRlc3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50YWdOYW1lKSYmIWkxKXtyZXR1cm59dmFyIHc9USgpWzFdO3ZhciBpPVEoKVswXTt2YXIgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTtpZih3PT09bjEmJmk9PT1vMSl7cmV0dXJufWoxPXRydWU7aWYoKG4xIT13KSYmKG8xPT1pKSl7aWYoIXExfHwodC1xMT4zMDApKXtwMT0odzxuMSl9ZTEoKX1lbHNle28xPWl9cTE9dDtuMT13O2lmKG0xKXt3aW5kb3cuY2xlYXJUaW1lb3V0KG0xKTttMT1udWxsfW0xPXdpbmRvdy5zZXRUaW1lb3V0KHcxLDEyMDApfWVsc2UgaWYoZS50eXBlPT0ib3JpZW50YXRpb25jaGFuZ2UiKXtpMT10cnVlfWlmKGsxKXtjbGVhclRpbWVvdXQoazEpO2sxPW51bGx9azE9d2luZG93LnNldFRpbWVvdXQodjEsNTApfTtmdW5jdGlvbiB2MSgpe2lmKGkxJiZqMSl7ZDEoKTtlMSgpO2kxPWZhbHNlO2oxPWZhbHNlO2lmKG0xKXt3aW5kb3cuY2xlYXJUaW1lb3V0KG0xKTttMT1udWxsfX1rMT1udWxsfTtmdW5jdGlvbiB3MSgpe2kxPWZhbHNlO2oxPWZhbHNlO20xPW51bGx9O2QuX3VwZGF0ZT1mdW5jdGlvbihhKXt1PW5hdmlnYXRvci51c2VyQWdlbnQ7bC5sb2coVywiRGV2aWNlIEFQSSB2YWx1ZXMgbWFuaXB1bGF0ZWQ6IE5PVCBQUk9EVUNUSVZFIEZFQVRVUkUhISEgVGhpcyBzaG91bGQgYmUgb25seSB1c2VkIGZvciB0ZXN0IHB1cnBvc2VzLiBPbmx5IHVzZSBpZiB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuIik7QSgpO3IoKTtiMShhKX07ZjEoZC5yZXNpemUpO2MxKGQub3JpZW50YXRpb24pO3dpbmRvdy5zYXAudWkuRGV2aWNlPWQ7aWYoZC5zdXBwb3J0LnRvdWNoJiZkLnN1cHBvcnQub3JpZW50YXRpb24pe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLHUxLGZhbHNlKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigib3JpZW50YXRpb25jaGFuZ2UiLHUxLGZhbHNlKX1lbHNle2lmKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIixnMSxmYWxzZSl9ZWxzZXt3aW5kb3cuYXR0YWNoRXZlbnQoIm9ucmVzaXplIixnMSl9fWQubWVkaWEuaW5pdFJhbmdlU2V0KCk7aWYoc2FwLnVpLmRlZmluZSl7c2FwLnVpLmRlZmluZSgic2FwL3VpL0RldmljZSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gZH0pfX0oKSk7Ci8qIQogKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzCiAqIFNlY29uZCBMZXZlbCBEb21haW4gKFNMRCkgU3VwcG9ydAogKgogKiBWZXJzaW9uOiAxLjExLjIKICoKICogQXV0aG9yOiBSb2RuZXkgUmVobQogKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmNvbS9VUkkuanMvCiAqCiAqIExpY2Vuc2VkIHVuZGVyCiAqICAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZQogKiAgIEdQTCB2MyBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvR1BMLTMuMAogKgogKi8KKGZ1bmN0aW9uKHIsZil7aWYodHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0Jyl7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQpe2RlZmluZShmKX1lbHNle3IuU2Vjb25kTGV2ZWxEb21haW5zPWYocil9fSh0aGlzLGZ1bmN0aW9uKHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgXz1yJiZyLlNlY29uZExldmVsRG9tYWluczt2YXIgaD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciBTPXtsaXN0OnsiYWMiOiJjb218Z292fG1pbHxuZXR8b3JnIiwiYWUiOiJhY3xjb3xnb3Z8bWlsfG5hbWV8bmV0fG9yZ3xwcm98c2NoIiwiYWYiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwiYWwiOiJjb218ZWR1fGdvdnxtaWx8bmV0fG9yZyIsImFvIjoiY298ZWR8Z3Z8aXR8b2d8cGIiLCJhciI6ImNvbXxlZHV8Z29ifGdvdnxpbnR8bWlsfG5ldHxvcmd8dHVyIiwiYXQiOiJhY3xjb3xndnxvciIsImF1IjoiYXNufGNvbXxjc2lyb3xlZHV8Z292fGlkfG5ldHxvcmciLCJiYSI6ImNvfGNvbXxlZHV8Z292fG1pbHxuZXR8b3JnfHJzfHVuYml8dW5tb3x1bnNhfHVudHp8dW56ZSIsImJiIjoiYml6fGNvfGNvbXxlZHV8Z292fGluZm98bmV0fG9yZ3xzdG9yZXx0diIsImJoIjoiYml6fGNjfGNvbXxlZHV8Z292fGluZm98bmV0fG9yZyIsImJuIjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsImJvIjoiY29tfGVkdXxnb2J8Z292fGludHxtaWx8bmV0fG9yZ3x0diIsImJyIjoiYWRtfGFkdnxhZ3J8YW18YXJxfGFydHxhdG98YnxiaW98YmxvZ3xibWR8Y2ltfGNuZ3xjbnR8Y29tfGNvb3B8ZWNufGVkdXxlbmd8ZXNwfGV0Y3xldGl8ZmFyfGZsb2d8Zm18Zm5kfGZvdHxmc3R8ZzEyfGdnZnxnb3Z8aW1ifGluZHxpbmZ8am9yfGp1c3xsZWx8bWF0fG1lZHxtaWx8bXVzfG5ldHxub218bm90fG50cnxvZG98b3JnfHBwZ3xwcm98cHNjfHBzaXxxc2x8cmVjfHNsZ3xzcnZ8dG1wfHRyZHx0dXJ8dHZ8dmV0fHZsb2d8d2lraXx6bGciLCJicyI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJieiI6ImR1fGV0fG9tfG92fHJnIiwiY2EiOiJhYnxiY3xtYnxuYnxuZnxubHxuc3xudHxudXxvbnxwZXxxY3xza3x5ayIsImNrIjoiYml6fGNvfGVkdXxnZW58Z292fGluZm98bmV0fG9yZyIsImNuIjoiYWN8YWh8Ymp8Y29tfGNxfGVkdXxmanxnZHxnb3Z8Z3N8Z3h8Z3p8aGF8aGJ8aGV8aGl8aGx8aG58amx8anN8anh8bG58bWlsfG5ldHxubXxueHxvcmd8cWh8c2N8c2R8c2h8c258c3h8dGp8dHd8eGp8eHp8eW58emoiLCJjbyI6ImNvbXxlZHV8Z292fG1pbHxuZXR8bm9tfG9yZyIsImNyIjoiYWN8Y3xjb3xlZHxmaXxnb3xvcnxzYSIsImN5IjoiYWN8Yml6fGNvbXxla2xvZ2VzfGdvdnxsdGR8bmFtZXxuZXR8b3JnfHBhcmxpYW1lbnR8cHJlc3N8cHJvfHRtIiwiZG8iOiJhcnR8Y29tfGVkdXxnb2J8Z292fG1pbHxuZXR8b3JnfHNsZHx3ZWIiLCJkeiI6ImFydHxhc3NvfGNvbXxlZHV8Z292fG5ldHxvcmd8cG9sIiwiZWMiOiJjb218ZWR1fGZpbnxnb3Z8aW5mb3xtZWR8bWlsfG5ldHxvcmd8cHJvIiwiZWciOiJjb218ZWR1fGV1bnxnb3Z8bWlsfG5hbWV8bmV0fG9yZ3xzY2kiLCJlciI6ImNvbXxlZHV8Z292fGluZHxtaWx8bmV0fG9yZ3xyb2NoZXN0fHciLCJlcyI6ImNvbXxlZHV8Z29ifG5vbXxvcmciLCJldCI6ImJpenxjb218ZWR1fGdvdnxpbmZvfG5hbWV8bmV0fG9yZyIsImZqIjoiYWN8Yml6fGNvbXxpbmZvfG1pbHxuYW1lfG5ldHxvcmd8cHJvIiwiZmsiOiJhY3xjb3xnb3Z8bmV0fG5vbXxvcmciLCJmciI6ImFzc298Y29tfGZ8Z291dnxub218cHJkfHByZXNzZXx0bSIsImdnIjoiY298bmV0fG9yZyIsImdoIjoiY29tfGVkdXxnb3Z8bWlsfG9yZyIsImduIjoiYWN8Y29tfGdvdnxuZXR8b3JnIiwiZ3IiOiJjb218ZWR1fGdvdnxtaWx8bmV0fG9yZyIsImd0IjoiY29tfGVkdXxnb2J8aW5kfG1pbHxuZXR8b3JnIiwiZ3UiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwiaGsiOiJjb218ZWR1fGdvdnxpZHZ8bmV0fG9yZyIsImlkIjoiYWN8Y298Z298bWlsfG5ldHxvcnxzY2h8d2ViIiwiaWwiOiJhY3xjb3xnb3Z8aWRmfGsxMnxtdW5pfG5ldHxvcmciLCJpbiI6ImFjfGNvfGVkdXxlcm5ldHxmaXJtfGdlbnxnb3Z8aXxpbmR8bWlsfG5ldHxuaWN8b3JnfHJlcyIsImlxIjoiY29tfGVkdXxnb3Z8aXxtaWx8bmV0fG9yZyIsImlyIjoiYWN8Y298ZG5zc2VjfGdvdnxpfGlkfG5ldHxvcmd8c2NoIiwiaXQiOiJlZHV8Z292IiwiamUiOiJjb3xuZXR8b3JnIiwiam8iOiJjb218ZWR1fGdvdnxtaWx8bmFtZXxuZXR8b3JnfHNjaCIsImpwIjoiYWN8YWR8Y298ZWR8Z298Z3J8bGd8bmV8b3IiLCJrZSI6ImFjfGNvfGdvfGluZm98bWV8bW9iaXxuZXxvcnxzYyIsImtoIjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxvcmd8cGVyIiwia2kiOiJiaXp8Y29tfGRlfGVkdXxnb3Z8aW5mb3xtb2J8bmV0fG9yZ3x0ZWwiLCJrbSI6ImFzc298Y29tfGNvb3B8ZWR1fGdvdXZ8a3xtZWRlY2lufG1pbHxub218bm90YWlyZXN8cGhhcm1hY2llbnN8cHJlc3NlfHRtfHZldGVyaW5haXJlIiwia24iOiJlZHV8Z292fG5ldHxvcmciLCJrciI6ImFjfGJ1c2FufGNodW5nYnVrfGNodW5nbmFtfGNvfGRhZWd1fGRhZWplb258ZXN8Z2FuZ3dvbnxnb3xnd2FuZ2p1fGd5ZW9uZ2J1a3xneWVvbmdnaXxneWVvbmduYW18aHN8aW5jaGVvbnxqZWp1fGplb25idWt8amVvbm5hbXxrfGtnfG1pbHxtc3xuZXxvcnxwZXxyZXxzY3xzZW91bHx1bHNhbiIsImt3IjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsImt5IjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsImt6IjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxvcmciLCJsYiI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJsayI6ImFzc258Y29tfGVkdXxnb3Z8Z3JwfGhvdGVsfGludHxsdGR8bmV0fG5nb3xvcmd8c2NofHNvY3x3ZWIiLCJsciI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJsdiI6ImFzbnxjb218Y29uZnxlZHV8Z292fGlkfG1pbHxuZXR8b3JnIiwibHkiOiJjb218ZWR1fGdvdnxpZHxtZWR8bmV0fG9yZ3xwbGN8c2NoIiwibWEiOiJhY3xjb3xnb3Z8bXxuZXR8b3JnfHByZXNzIiwibWMiOiJhc3NvfHRtIiwibWUiOiJhY3xjb3xlZHV8Z292fGl0c3xuZXR8b3JnfHByaXYiLCJtZyI6ImNvbXxlZHV8Z292fG1pbHxub218b3JnfHByZHx0bSIsIm1rIjoiY29tfGVkdXxnb3Z8aW5mfG5hbWV8bmV0fG9yZ3xwcm8iLCJtbCI6ImNvbXxlZHV8Z292fG5ldHxvcmd8cHJlc3NlIiwibW4iOiJlZHV8Z292fG9yZyIsIm1vIjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsIm10IjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsIm12IjoiYWVyb3xiaXp8Y29tfGNvb3B8ZWR1fGdvdnxpbmZvfGludHxtaWx8bXVzZXVtfG5hbWV8bmV0fG9yZ3xwcm8iLCJtdyI6ImFjfGNvfGNvbXxjb29wfGVkdXxnb3Z8aW50fG11c2V1bXxuZXR8b3JnIiwibXgiOiJjb218ZWR1fGdvYnxuZXR8b3JnIiwibXkiOiJjb218ZWR1fGdvdnxtaWx8bmFtZXxuZXR8b3JnfHNjaCIsIm5mIjoiYXJ0c3xjb218ZmlybXxpbmZvfG5ldHxvdGhlcnxwZXJ8cmVjfHN0b3JlfHdlYiIsIm5nIjoiYml6fGNvbXxlZHV8Z292fG1pbHxtb2JpfG5hbWV8bmV0fG9yZ3xzY2giLCJuaSI6ImFjfGNvfGNvbXxlZHV8Z29ifG1pbHxuZXR8bm9tfG9yZyIsIm5wIjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxvcmciLCJuciI6ImJpenxjb218ZWR1fGdvdnxpbmZvfG5ldHxvcmciLCJvbSI6ImFjfGJpenxjb3xjb218ZWR1fGdvdnxtZWR8bWlsfG11c2V1bXxuZXR8b3JnfHByb3xzY2giLCJwZSI6ImNvbXxlZHV8Z29ifG1pbHxuZXR8bm9tfG9yZ3xzbGQiLCJwaCI6ImNvbXxlZHV8Z292fGl8bWlsfG5ldHxuZ298b3JnIiwicGsiOiJiaXp8Y29tfGVkdXxmYW18Z29ifGdva3xnb258Z29wfGdvc3xnb3Z8bmV0fG9yZ3x3ZWIiLCJwbCI6ImFydHxiaWFseXN0b2t8Yml6fGNvbXxlZHV8Z2RhfGdkYW5za3xnb3J6b3d8Z292fGluZm98a2F0b3dpY2V8a3Jha293fGxvZHp8bHVibGlufG1pbHxuZXR8bmdvfG9sc3p0eW58b3JnfHBvem5hbnxwd3J8cmFkb218c2x1cHNrfHN6Y3plY2lufHRvcnVufHdhcnN6YXdhfHdhd3x3cm9jfHdyb2NsYXd8emdvcmEiLCJwciI6ImFjfGJpenxjb218ZWR1fGVzdHxnb3Z8aW5mb3xpc2xhfG5hbWV8bmV0fG9yZ3xwcm98cHJvZiIsInBzIjoiY29tfGVkdXxnb3Z8bmV0fG9yZ3xwbG98c2VjIiwicHciOiJiZWxhdXxjb3xlZHxnb3xuZXxvciIsInJvIjoiYXJ0c3xjb218ZmlybXxpbmZvfG5vbXxudHxvcmd8cmVjfHN0b3JlfHRtfHd3dyIsInJzIjoiYWN8Y298ZWR1fGdvdnxpbnxvcmciLCJzYiI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJzYyI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJzaCI6ImNvfGNvbXxlZHV8Z292fG5ldHxub218b3JnIiwic2wiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwic3QiOiJjb3xjb218Y29uc3VsYWRvfGVkdXxlbWJhaXhhZGF8Z292fG1pbHxuZXR8b3JnfHByaW5jaXBlfHNhb3RvbWV8c3RvcmUiLCJzdiI6ImNvbXxlZHV8Z29ifG9yZ3xyZWQiLCJzeiI6ImFjfGNvfG9yZyIsInRyIjoiYXZ8YmJzfGJlbHxiaXp8Y29tfGRyfGVkdXxnZW58Z292fGluZm98azEyfG5hbWV8bmV0fG9yZ3xwb2x8dGVsfHRza3x0dnx3ZWIiLCJ0dCI6ImFlcm98Yml6fGNhdHxjb3xjb218Y29vcHxlZHV8Z292fGluZm98aW50fGpvYnN8bWlsfG1vYml8bXVzZXVtfG5hbWV8bmV0fG9yZ3xwcm98dGVsfHRyYXZlbCIsInR3IjoiY2x1Ynxjb218ZWJpenxlZHV8Z2FtZXxnb3Z8aWR2fG1pbHxuZXR8b3JnIiwibXUiOiJhY3xjb3xjb218Z292fG5ldHxvcnxvcmciLCJteiI6ImFjfGNvfGVkdXxnb3Z8b3JnIiwibmEiOiJjb3xjb20iLCJueiI6ImFjfGNvfGNyaXxnZWVrfGdlbnxnb3Z0fGhlYWx0aHxpd2l8bWFvcml8bWlsfG5ldHxvcmd8cGFybGlhbWVudHxzY2hvb2wiLCJwYSI6ImFib3xhY3xjb218ZWR1fGdvYnxpbmd8bWVkfG5ldHxub218b3JnfHNsZCIsInB0IjoiY29tfGVkdXxnb3Z8aW50fG5ldHxub21lfG9yZ3xwdWJsIiwicHkiOiJjb218ZWR1fGdvdnxtaWx8bmV0fG9yZyIsInFhIjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxvcmciLCJyZSI6ImFzc298Y29tfG5vbSIsInJ1IjoiYWN8YWR5Z2V5YXxhbHRhaXxhbXVyfGFya2hhbmdlbHNrfGFzdHJha2hhbnxiYXNoa2lyaWF8YmVsZ29yb2R8YmlyfGJyeWFuc2t8YnVyeWF0aWF8Y2JnfGNoZWx8Y2hlbHlhYmluc2t8Y2hpdGF8Y2h1a290a2F8Y2h1dmFzaGlhfGNvbXxkYWdlc3RhbnxlLWJ1cmd8ZWR1fGdvdnxncm96bnl8aW50fGlya3V0c2t8aXZhbm92b3xpemhldnNrfGphcnxqb3Noa2FyLW9sYXxrYWxteWtpYXxrYWx1Z2F8a2FtY2hhdGthfGthcmVsaWF8a2F6YW58a2NocnxrZW1lcm92b3xraGFiYXJvdnNrfGtoYWthc3NpYXxraHZ8a2lyb3Z8a29lbmlnfGtvbWl8a29zdHJvbWF8a3Jhbm95YXJza3xrdWJhbnxrdXJnYW58a3Vyc2t8bGlwZXRza3xtYWdhZGFufG1hcml8bWFyaS1lbHxtYXJpbmV8bWlsfG1vcmRvdmlhfG1vc3JlZ3xtc2t8bXVybWFuc2t8bmFsY2hpa3xuZXR8bm5vdnxub3Z8bm92b3NpYmlyc2t8bnNrfG9tc2t8b3JlbmJ1cmd8b3JnfG9yeW9sfHBlbnphfHBlcm18cHB8cHNrb3Z8cHR6fHJuZHxyeWF6YW58c2FraGFsaW58c2FtYXJhfHNhcmF0b3Z8c2ltYmlyc2t8c21vbGVuc2t8c3BifHN0YXZyb3BvbHxzdHZ8c3VyZ3V0fHRhbWJvdnx0YXRhcnN0YW58dG9tfHRvbXNrfHRzYXJpdHN5bnx0c2t8dHVsYXx0dXZhfHR2ZXJ8dHl1bWVufHVkbXx1ZG11cnRpYXx1bGFuLXVkZXx2bGFkaWthdmthenx2bGFkaW1pcnx2bGFkaXZvc3Rva3x2b2xnb2dyYWR8dm9sb2dkYXx2b3JvbmV6aHx2cm58dnlhdGthfHlha3V0aWF8eWFtYWx8eWVrYXRlcmluYnVyZ3x5dXpobm8tc2FraGFsaW5zayIsInJ3IjoiYWN8Y298Y29tfGVkdXxnb3V2fGdvdnxpbnR8bWlsfG5ldCIsInNhIjoiY29tfGVkdXxnb3Z8bWVkfG5ldHxvcmd8cHVifHNjaCIsInNkIjoiY29tfGVkdXxnb3Z8aW5mb3xtZWR8bmV0fG9yZ3x0diIsInNlIjoiYXxhY3xifGJkfGN8ZHxlfGZ8Z3xofGl8a3xsfG18bnxvfG9yZ3xwfHBhcnRpfHBwfHByZXNzfHJ8c3x0fHRtfHV8d3x4fHl8eiIsInNnIjoiY29tfGVkdXxnb3Z8aWRufG5ldHxvcmd8cGVyIiwic24iOiJhcnR8Y29tfGVkdXxnb3V2fG9yZ3xwZXJzb3x1bml2Iiwic3kiOiJjb218ZWR1fGdvdnxtaWx8bmV0fG5ld3N8b3JnIiwidGgiOiJhY3xjb3xnb3xpbnxtaXxuZXR8b3IiLCJ0aiI6ImFjfGJpenxjb3xjb218ZWR1fGdvfGdvdnxpbmZvfGludHxtaWx8bmFtZXxuZXR8bmljfG9yZ3x0ZXN0fHdlYiIsInRuIjoiYWdyaW5ldHxjb218ZGVmZW5zZXxlZHVuZXR8ZW5zfGZpbnxnb3Z8aW5kfGluZm98aW50bHxtaW5jb218bmF0fG5ldHxvcmd8cGVyc298cm5ydHxybnN8cm51fHRvdXJpc20iLCJ0eiI6ImFjfGNvfGdvfG5lfG9yIiwidWEiOiJiaXp8Y2hlcmthc3N5fGNoZXJuaWdvdnxjaGVybm92dHN5fGNrfGNufGNvfGNvbXxjcmltZWF8Y3Z8ZG58ZG5lcHJvcGV0cm92c2t8ZG9uZXRza3xkcHxlZHV8Z292fGlmfGlufGl2YW5vLWZyYW5raXZza3xraHxraGFya292fGtoZXJzb258a2htZWxuaXRza2l5fGtpZXZ8a2lyb3ZvZ3JhZHxrbXxrcnxrc3xrdnxsZ3xsdWdhbnNrfGx1dHNrfGx2aXZ8bWV8bWt8bmV0fG5pa29sYWV2fG9kfG9kZXNzYXxvcmd8cGx8cG9sdGF2YXxwcHxyb3Zub3xydnxzZWJhc3RvcG9sfHN1bXl8dGV8dGVybm9waWx8dXpoZ29yb2R8dmlubmljYXx2bnx6YXBvcml6aHpoZXx6aGl0b21pcnx6cHx6dCIsInVnIjoiYWN8Y298Z298bmV8b3J8b3JnfHNjIiwidWsiOiJhY3xibHxicml0aXNoLWxpYnJhcnl8Y298Y3ltfGdvdnxnb3Z0fGljbmV0fGpldHxsZWF8bHRkfG1lfG1pbHxtb2R8bmF0aW9uYWwtbGlicmFyeS1zY290bGFuZHxuZWx8bmV0fG5oc3xuaWN8bmxzfG9yZ3xvcmdufHBhcmxpYW1lbnR8cGxjfHBvbGljZXxzY2h8c2NvdHxzb2MiLCJ1cyI6ImRuaXxmZWR8aXNhfGtpZHN8bnNuIiwidXkiOiJjb218ZWR1fGd1YnxtaWx8bmV0fG9yZyIsInZlIjoiY298Y29tfGVkdXxnb2J8aW5mb3xtaWx8bmV0fG9yZ3x3ZWIiLCJ2aSI6ImNvfGNvbXxrMTJ8bmV0fG9yZyIsInZuIjoiYWN8Yml6fGNvbXxlZHV8Z292fGhlYWx0aHxpbmZvfGludHxuYW1lfG5ldHxvcmd8cHJvIiwieWUiOiJjb3xjb218Z292fGx0ZHxtZXxuZXR8b3JnfHBsYyIsInl1IjoiYWN8Y298ZWR1fGdvdnxvcmciLCJ6YSI6ImFjfGFncmljfGFsdHxib3Vyc2V8Y2l0eXxjb3xjeWJlcm5ldHxkYnxlZHV8Z292fGdyb25kYXJ8aWFjY2Vzc3xpbXR8aW5jYXxsYW5kZXNpZ258bGF3fG1pbHxuZXR8bmdvfG5pc3xub218b2xpdmV0dGl8b3JnfHBpeHxzY2hvb2x8dG18d2ViIiwiem0iOiJhY3xjb3xjb218ZWR1fGdvdnxuZXR8b3JnfHNjaCJ9LGhhc19leHByZXNzaW9uOm51bGwsaXNfZXhwcmVzc2lvbjpudWxsLGhhczpmdW5jdGlvbihkKXtyZXR1cm4hIWQubWF0Y2goUy5oYXNfZXhwcmVzc2lvbil9LGlzOmZ1bmN0aW9uKGQpe3JldHVybiEhZC5tYXRjaChTLmlzX2V4cHJlc3Npb24pfSxnZXQ6ZnVuY3Rpb24oZCl7dmFyIHQ9ZC5tYXRjaChTLmhhc19leHByZXNzaW9uKTtyZXR1cm4gdCYmdFsxXXx8bnVsbH0sbm9Db25mbGljdDpmdW5jdGlvbigpe2lmKHIuU2Vjb25kTGV2ZWxEb21haW5zPT09dGhpcyl7ci5TZWNvbmRMZXZlbERvbWFpbnM9X31yZXR1cm4gdGhpc30saW5pdDpmdW5jdGlvbigpe3ZhciB0PScnO2Zvcih2YXIgYSBpbiBTLmxpc3Qpe2lmKCFoLmNhbGwoUy5saXN0LGEpKXtjb250aW51ZX12YXIgZT0nKCcrUy5saXN0W2FdKycpXC4nK2E7dCs9J3woJytlKycpJ31TLmhhc19leHByZXNzaW9uPW5ldyBSZWdFeHAoJ1xcLignK3Quc3Vic3RyKDEpKycpJCcsJ2knKTtTLmlzX2V4cHJlc3Npb249bmV3IFJlZ0V4cCgnXignK3Quc3Vic3RyKDEpKycpJCcsJ2knKX19O1MuaW5pdCgpO3JldHVybiBTfSkpOwovKiEKICogVVJJLmpzIC0gTXV0YXRpbmcgVVJMcwogKgogKiBWZXJzaW9uOiAxLjExLjIKICoKICogQXV0aG9yOiBSb2RuZXkgUmVobQogKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmNvbS9VUkkuanMvCiAqCiAqIExpY2Vuc2VkIHVuZGVyCiAqICAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZQogKiAgIEdQTCB2MyBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvR1BMLTMuMAogKgogKi8KKGZ1bmN0aW9uKHIsZil7aWYodHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0Jyl7bW9kdWxlLmV4cG9ydHM9ZihyZXF1aXJlKCcuL3B1bnljb2RlJykscmVxdWlyZSgnLi9JUHY2JykscmVxdWlyZSgnLi9TZWNvbmRMZXZlbERvbWFpbnMnKSl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZCl7ci5VUkk9ZihyLnB1bnljb2RlLHIuSVB2NixyLlNlY29uZExldmVsRG9tYWlucyxyKTtkZWZpbmUoW10sZnVuY3Rpb24oKXtyZXR1cm4gci5VUkl9KX1lbHNle3IuVVJJPWYoci5wdW55Y29kZSxyLklQdjYsci5TZWNvbmRMZXZlbERvbWFpbnMscil9fSh0aGlzLGZ1bmN0aW9uKGEsSSxTLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgXz1yJiZyLlVSSTtmdW5jdGlvbiBVKGMsZCl7aWYoISh0aGlzIGluc3RhbmNlb2YgVSkpe3JldHVybiBuZXcgVShjLGQpfWlmKGM9PT11bmRlZmluZWQpe2lmKHR5cGVvZiBsb2NhdGlvbiE9PSd1bmRlZmluZWQnKXtjPWxvY2F0aW9uLmhyZWYrIiJ9ZWxzZXtjPSIifX10aGlzLmhyZWYoYyk7aWYoZCE9PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuYWJzb2x1dGVUbyhkKX1yZXR1cm4gdGhpc307dmFyIHA9VS5wcm90b3R5cGU7dmFyIGg9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiBiKHMpe3JldHVybiBzLnJlcGxhY2UoLyhbLiorP149IToke30oKXxbXF1cL1xcXSkvZywnXFwkMScpfWZ1bmN0aW9uIGcodil7aWYodj09PXVuZGVmaW5lZCl7cmV0dXJuJ1VuZGVmaW5lZCd9cmV0dXJuIFN0cmluZyhPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodikpLnNsaWNlKDgsLTEpfWZ1bmN0aW9uIGYoYyl7cmV0dXJuIGcoYyk9PT0iQXJyYXkifWZ1bmN0aW9uIGooZCx2KXt2YXIgbD17fTt2YXIgaSxjO2lmKGYodikpe2ZvcihpPTAsYz12Lmxlbmd0aDtpPGM7aSsrKXtsW3ZbaV1dPXRydWV9fWVsc2V7bFt2XT10cnVlfWZvcihpPTAsYz1kLmxlbmd0aDtpPGM7aSsrKXtpZihsW2RbaV1dIT09dW5kZWZpbmVkKXtkLnNwbGljZShpLDEpO2MtLTtpLS19fXJldHVybiBkfWZ1bmN0aW9uIGsobCx2KXt2YXIgaSxjO2lmKGYodikpe2ZvcihpPTAsYz12Lmxlbmd0aDtpPGM7aSsrKXtpZighayhsLHZbaV0pKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfXZhciBkPWcodik7Zm9yKGk9MCxjPWwubGVuZ3RoO2k8YztpKyspe2lmKGQ9PT0nUmVnRXhwJyl7aWYodHlwZW9mIGxbaV09PT0nc3RyaW5nJyYmbFtpXS5tYXRjaCh2KSl7cmV0dXJuIHRydWV9fWVsc2UgaWYobFtpXT09PXYpe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gbShjLHQpe2lmKCFmKGMpfHwhZih0KSl7cmV0dXJuIGZhbHNlfWlmKGMubGVuZ3RoIT09dC5sZW5ndGgpe3JldHVybiBmYWxzZX1jLnNvcnQoKTt0LnNvcnQoKTtmb3IodmFyIGk9MCxsPWMubGVuZ3RoO2k8bDtpKyspe2lmKGNbaV0hPT10W2ldKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfVUuX3BhcnRzPWZ1bmN0aW9uKCl7cmV0dXJue3Byb3RvY29sOm51bGwsdXNlcm5hbWU6bnVsbCxwYXNzd29yZDpudWxsLGhvc3RuYW1lOm51bGwsdXJuOm51bGwscG9ydDpudWxsLHBhdGg6bnVsbCxxdWVyeTpudWxsLGZyYWdtZW50Om51bGwsZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzOlUuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLGVzY2FwZVF1ZXJ5U3BhY2U6VS5lc2NhcGVRdWVyeVNwYWNlfX07VS5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnM9ZmFsc2U7VS5lc2NhcGVRdWVyeVNwYWNlPXRydWU7VS5wcm90b2NvbF9leHByZXNzaW9uPS9eW2Etel1bYS16MC05LSstXSokL2k7VS5pZG5fZXhwcmVzc2lvbj0vW15hLXowLTlcLi1dL2k7VS5wdW55Y29kZV9leHByZXNzaW9uPS8oeG4tLSkvaTtVLmlwNF9leHByZXNzaW9uPS9eXGR7MSwzfVwuXGR7MSwzfVwuXGR7MSwzfVwuXGR7MSwzfSQvO1UuaXA2X2V4cHJlc3Npb249L15ccyooKChbMC05QS1GYS1mXXsxLDR9Oil7N30oWzAtOUEtRmEtZl17MSw0fXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7Nn0oOlswLTlBLUZhLWZdezEsNH18KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs1fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDJ9KXw6KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs0fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDN9KXwoKDpbMC05QS1GYS1mXXsxLDR9KT86KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7M30oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw0fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCwyfTooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXsyfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDV9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDN9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezF9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNn0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsNH06KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pKXw6KSl8KDooKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw3fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw1fTooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKSkoJS4rKT9ccyokLztVLmZpbmRfdXJpX2V4cHJlc3Npb249L1xiKCg/OlthLXpdW1x3LV0rOig/OlwvezEsM318W2EtejAtOSVdKXx3d3dcZHswLDN9Wy5dfFthLXowLTkuXC1dK1suXVthLXpdezIsNH1cLykoPzpbXlxzKCk8Pl0rfFwoKFteXHMoKTw+XSt8KFwoW15ccygpPD5dK1wpKSkqXCkpKyg/OlwoKFteXHMoKTw+XSt8KFwoW15ccygpPD5dK1wpKSkqXCl8W15cc2AhKClcW1xde307OiciLiw8Pj/Cq8K74oCc4oCd4oCY4oCZXSkpL2lnO1UuZGVmYXVsdFBvcnRzPXtodHRwOiI4MCIsaHR0cHM6IjQ0MyIsZnRwOiIyMSIsZ29waGVyOiI3MCIsd3M6IjgwIix3c3M6IjQ0MyJ9O1UuaW52YWxpZF9ob3N0bmFtZV9jaGFyYWN0ZXJzPS9bXmEtekEtWjAtOVwuLV0vO1UuZG9tQXR0cmlidXRlcz17J2EnOidocmVmJywnYmxvY2txdW90ZSc6J2NpdGUnLCdsaW5rJzonaHJlZicsJ2Jhc2UnOidocmVmJywnc2NyaXB0Jzonc3JjJywnZm9ybSc6J2FjdGlvbicsJ2ltZyc6J3NyYycsJ2FyZWEnOidocmVmJywnaWZyYW1lJzonc3JjJywnZW1iZWQnOidzcmMnLCdzb3VyY2UnOidzcmMnLCd0cmFjayc6J3NyYycsJ2lucHV0Jzonc3JjJ307VS5nZXREb21BdHRyaWJ1dGU9ZnVuY3Rpb24oYyl7aWYoIWN8fCFjLm5vZGVOYW1lKXtyZXR1cm4gdW5kZWZpbmVkfXZhciBkPWMubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZihkPT09J2lucHV0JyYmYy50eXBlIT09J2ltYWdlJyl7cmV0dXJuIHVuZGVmaW5lZH1yZXR1cm4gVS5kb21BdHRyaWJ1dGVzW2RdfTtmdW5jdGlvbiBuKHYpe3JldHVybiBlc2NhcGUodil9ZnVuY3Rpb24gbyhzKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHMpLnJlcGxhY2UoL1shJygpKl0vZyxuKS5yZXBsYWNlKC9cKi9nLCIlMkEiKX1VLmVuY29kZT1vO1UuZGVjb2RlPWRlY29kZVVSSUNvbXBvbmVudDtVLmlzbzg4NTk9ZnVuY3Rpb24oKXtVLmVuY29kZT1lc2NhcGU7VS5kZWNvZGU9dW5lc2NhcGV9O1UudW5pY29kZT1mdW5jdGlvbigpe1UuZW5jb2RlPW87VS5kZWNvZGU9ZGVjb2RlVVJJQ29tcG9uZW50fTtVLmNoYXJhY3RlcnM9e3BhdGhuYW1lOntlbmNvZGU6e2V4cHJlc3Npb246LyUoMjR8MjZ8MkJ8MkN8M0J8M0R8M0F8NDApL2lnLG1hcDp7IiUyNCI6IiQiLCIlMjYiOiImIiwiJTJCIjoiKyIsIiUyQyI6IiwiLCIlM0IiOiI7IiwiJTNEIjoiPSIsIiUzQSI6IjoiLCIlNDAiOiJAIn19LGRlY29kZTp7ZXhwcmVzc2lvbjovW1wvXD8jXS9nLG1hcDp7Ii8iOiIlMkYiLCI/IjoiJTNGIiwiIyI6IiUyMyJ9fX0scmVzZXJ2ZWQ6e2VuY29kZTp7ZXhwcmVzc2lvbjovJSgyMXwyM3wyNHwyNnwyN3wyOHwyOXwyQXwyQnwyQ3wyRnwzQXwzQnwzRHwzRnw0MHw1Qnw1RCkvaWcsbWFwOnsiJTNBIjoiOiIsIiUyRiI6Ii8iLCIlM0YiOiI/IiwiJTIzIjoiIyIsIiU1QiI6IlsiLCIlNUQiOiJdIiwiJTQwIjoiQCIsIiUyMSI6IiEiLCIlMjQiOiIkIiwiJTI2IjoiJiIsIiUyNyI6IiciLCIlMjgiOiIoIiwiJTI5IjoiKSIsIiUyQSI6IioiLCIlMkIiOiIrIiwiJTJDIjoiLCIsIiUzQiI6IjsiLCIlM0QiOiI9In19fX07VS5lbmNvZGVRdWVyeT1mdW5jdGlvbihzLGUpe3ZhciBjPVUuZW5jb2RlKHMrIiIpO3JldHVybiBlP2MucmVwbGFjZSgvJTIwL2csJysnKTpjfTtVLmRlY29kZVF1ZXJ5PWZ1bmN0aW9uKHMsYyl7cys9IiI7dHJ5e3JldHVybiBVLmRlY29kZShjP3MucmVwbGFjZSgvXCsvZywnJTIwJyk6cyl9Y2F0Y2goZSl7cmV0dXJuIHN9fTtVLnJlY29kZVBhdGg9ZnVuY3Rpb24ocyl7dmFyIGM9KHMrIiIpLnNwbGl0KCcvJyk7Zm9yKHZhciBpPTAsbD1jLmxlbmd0aDtpPGw7aSsrKXtjW2ldPVUuZW5jb2RlUGF0aFNlZ21lbnQoVS5kZWNvZGUoY1tpXSkpfXJldHVybiBjLmpvaW4oJy8nKX07VS5kZWNvZGVQYXRoPWZ1bmN0aW9uKHMpe3ZhciBjPShzKyIiKS5zcGxpdCgnLycpO2Zvcih2YXIgaT0wLGw9Yy5sZW5ndGg7aTxsO2krKyl7Y1tpXT1VLmRlY29kZVBhdGhTZWdtZW50KGNbaV0pfXJldHVybiBjLmpvaW4oJy8nKX07dmFyIHU9eydlbmNvZGUnOidlbmNvZGUnLCdkZWNvZGUnOidkZWNvZGUnfTt2YXIgdzt2YXIgeT1mdW5jdGlvbihkLHcpe3JldHVybiBmdW5jdGlvbihzKXtyZXR1cm4gVVt3XShzKyIiKS5yZXBsYWNlKFUuY2hhcmFjdGVyc1tkXVt3XS5leHByZXNzaW9uLGZ1bmN0aW9uKGMpe3JldHVybiBVLmNoYXJhY3RlcnNbZF1bd10ubWFwW2NdfSl9fTtmb3IodyBpbiB1KXtVW3crIlBhdGhTZWdtZW50Il09eSgicGF0aG5hbWUiLHVbd10pfVUuZW5jb2RlUmVzZXJ2ZWQ9eSgicmVzZXJ2ZWQiLCJlbmNvZGUiKTtVLnBhcnNlPWZ1bmN0aW9uKHMsYyl7dmFyIGQ7aWYoIWMpe2M9e319ZD1zLmluZGV4T2YoJyMnKTtpZihkPi0xKXtjLmZyYWdtZW50PXMuc3Vic3RyaW5nKGQrMSl8fG51bGw7cz1zLnN1YnN0cmluZygwLGQpfWQ9cy5pbmRleE9mKCc/Jyk7aWYoZD4tMSl7Yy5xdWVyeT1zLnN1YnN0cmluZyhkKzEpfHxudWxsO3M9cy5zdWJzdHJpbmcoMCxkKX1pZihzLnN1YnN0cmluZygwLDIpPT09Jy8vJyl7Yy5wcm90b2NvbD1udWxsO3M9cy5zdWJzdHJpbmcoMik7cz1VLnBhcnNlQXV0aG9yaXR5KHMsYyl9ZWxzZXtkPXMuaW5kZXhPZignOicpO2lmKGQ+LTEpe2MucHJvdG9jb2w9cy5zdWJzdHJpbmcoMCxkKXx8bnVsbDtpZihjLnByb3RvY29sJiYhYy5wcm90b2NvbC5tYXRjaChVLnByb3RvY29sX2V4cHJlc3Npb24pKXtjLnByb3RvY29sPXVuZGVmaW5lZH1lbHNlIGlmKGMucHJvdG9jb2w9PT0nZmlsZScpe3M9cy5zdWJzdHJpbmcoZCszKX1lbHNlIGlmKHMuc3Vic3RyaW5nKGQrMSxkKzMpPT09Jy8vJyl7cz1zLnN1YnN0cmluZyhkKzMpO3M9VS5wYXJzZUF1dGhvcml0eShzLGMpfWVsc2V7cz1zLnN1YnN0cmluZyhkKzEpO2MudXJuPXRydWV9fX1jLnBhdGg9cztyZXR1cm4gY307VS5wYXJzZUhvc3Q9ZnVuY3Rpb24ocyxjKXt2YXIgZD1zLmluZGV4T2YoJy8nKTt2YXIgZTt2YXIgdDtpZihkPT09LTEpe2Q9cy5sZW5ndGh9aWYocy5jaGFyQXQoMCk9PT0iWyIpe2U9cy5pbmRleE9mKCddJyk7Yy5ob3N0bmFtZT1zLnN1YnN0cmluZygxLGUpfHxudWxsO2MucG9ydD1zLnN1YnN0cmluZyhlKzIsZCl8fG51bGx9ZWxzZSBpZihzLmluZGV4T2YoJzonKSE9PXMubGFzdEluZGV4T2YoJzonKSl7Yy5ob3N0bmFtZT1zLnN1YnN0cmluZygwLGQpfHxudWxsO2MucG9ydD1udWxsfWVsc2V7dD1zLnN1YnN0cmluZygwLGQpLnNwbGl0KCc6Jyk7Yy5ob3N0bmFtZT10WzBdfHxudWxsO2MucG9ydD10WzFdfHxudWxsfWlmKGMuaG9zdG5hbWUmJnMuc3Vic3RyaW5nKGQpLmNoYXJBdCgwKSE9PScvJyl7ZCsrO3M9Ii8iK3N9cmV0dXJuIHMuc3Vic3RyaW5nKGQpfHwnLyd9O1UucGFyc2VBdXRob3JpdHk9ZnVuY3Rpb24ocyxjKXtzPVUucGFyc2VVc2VyaW5mbyhzLGMpO3JldHVybiBVLnBhcnNlSG9zdChzLGMpfTtVLnBhcnNlVXNlcmluZm89ZnVuY3Rpb24ocyxjKXt2YXIgZD1zLmluZGV4T2YoJy8nKTt2YXIgZT1kPi0xP3MubGFzdEluZGV4T2YoJ0AnLGQpOnMuaW5kZXhPZignQCcpO3ZhciB0O2lmKGU+LTEmJihkPT09LTF8fGU8ZCkpe3Q9cy5zdWJzdHJpbmcoMCxlKS5zcGxpdCgnOicpO2MudXNlcm5hbWU9dFswXT9VLmRlY29kZSh0WzBdKTpudWxsO3Quc2hpZnQoKTtjLnBhc3N3b3JkPXRbMF0/VS5kZWNvZGUodC5qb2luKCc6JykpOm51bGw7cz1zLnN1YnN0cmluZyhlKzEpfWVsc2V7Yy51c2VybmFtZT1udWxsO2MucGFzc3dvcmQ9bnVsbH1yZXR1cm4gc307VS5wYXJzZVF1ZXJ5PWZ1bmN0aW9uKHMsZSl7aWYoIXMpe3JldHVybnt9fXM9cy5yZXBsYWNlKC8mKy9nLCcmJykucmVwbGFjZSgvXlw/KiYqfCYrJC9nLCcnKTtpZighcyl7cmV0dXJue319dmFyIGM9e307dmFyIGQ9cy5zcGxpdCgnJicpO3ZhciBsPWQubGVuZ3RoO3ZhciB2LHQseDtmb3IodmFyIGk9MDtpPGw7aSsrKXt2PWRbaV0uc3BsaXQoJz0nKTt0PVUuZGVjb2RlUXVlcnkodi5zaGlmdCgpLGUpO3g9di5sZW5ndGg/VS5kZWNvZGVRdWVyeSh2LmpvaW4oJz0nKSxlKTpudWxsO2lmKGNbdF0pe2lmKHR5cGVvZiBjW3RdPT09InN0cmluZyIpe2NbdF09W2NbdF1dfWNbdF0ucHVzaCh4KX1lbHNle2NbdF09eH19cmV0dXJuIGN9O1UuYnVpbGQ9ZnVuY3Rpb24oYyl7dmFyIHQ9IiI7aWYoYy5wcm90b2NvbCl7dCs9Yy5wcm90b2NvbCsiOiJ9aWYoIWMudXJuJiYodHx8Yy5ob3N0bmFtZSkpe3QrPScvLyd9dCs9KFUuYnVpbGRBdXRob3JpdHkoYyl8fCcnKTtpZih0eXBlb2YgYy5wYXRoPT09InN0cmluZyIpe2lmKGMucGF0aC5jaGFyQXQoMCkhPT0nLycmJnR5cGVvZiBjLmhvc3RuYW1lPT09InN0cmluZyIpe3QrPScvJ310Kz1jLnBhdGh9aWYodHlwZW9mIGMucXVlcnk9PT0ic3RyaW5nIiYmYy5xdWVyeSl7dCs9Jz8nK2MucXVlcnl9aWYodHlwZW9mIGMuZnJhZ21lbnQ9PT0ic3RyaW5nIiYmYy5mcmFnbWVudCl7dCs9JyMnK2MuZnJhZ21lbnR9cmV0dXJuIHR9O1UuYnVpbGRIb3N0PWZ1bmN0aW9uKGMpe3ZhciB0PSIiO2lmKCFjLmhvc3RuYW1lKXtyZXR1cm4iIn1lbHNlIGlmKFUuaXA2X2V4cHJlc3Npb24udGVzdChjLmhvc3RuYW1lKSl7aWYoYy5wb3J0KXt0Kz0iWyIrYy5ob3N0bmFtZSsiXToiK2MucG9ydH1lbHNle3QrPWMuaG9zdG5hbWV9fWVsc2V7dCs9Yy5ob3N0bmFtZTtpZihjLnBvcnQpe3QrPSc6JytjLnBvcnR9fXJldHVybiB0fTtVLmJ1aWxkQXV0aG9yaXR5PWZ1bmN0aW9uKGMpe3JldHVybiBVLmJ1aWxkVXNlcmluZm8oYykrVS5idWlsZEhvc3QoYyl9O1UuYnVpbGRVc2VyaW5mbz1mdW5jdGlvbihjKXt2YXIgdD0iIjtpZihjLnVzZXJuYW1lKXt0Kz1VLmVuY29kZShjLnVzZXJuYW1lKTtpZihjLnBhc3N3b3JkKXt0Kz0nOicrVS5lbmNvZGUoYy5wYXNzd29yZCl9dCs9IkAifXJldHVybiB0fTtVLmJ1aWxkUXVlcnk9ZnVuY3Rpb24oZCxjLGUpe3ZhciB0PSIiO3ZhciBsLHMsaSx2O2ZvcihzIGluIGQpe2lmKGguY2FsbChkLHMpJiZzKXtpZihmKGRbc10pKXtsPXt9O2ZvcihpPTAsdj1kW3NdLmxlbmd0aDtpPHY7aSsrKXtpZihkW3NdW2ldIT09dW5kZWZpbmVkJiZsW2Rbc11baV0rIiJdPT09dW5kZWZpbmVkKXt0Kz0iJiIrVS5idWlsZFF1ZXJ5UGFyYW1ldGVyKHMsZFtzXVtpXSxlKTtpZihjIT09dHJ1ZSl7bFtkW3NdW2ldKyIiXT10cnVlfX19fWVsc2UgaWYoZFtzXSE9PXVuZGVmaW5lZCl7dCs9JyYnK1UuYnVpbGRRdWVyeVBhcmFtZXRlcihzLGRbc10sZSl9fX1yZXR1cm4gdC5zdWJzdHJpbmcoMSl9O1UuYnVpbGRRdWVyeVBhcmFtZXRlcj1mdW5jdGlvbihjLHYsZSl7cmV0dXJuIFUuZW5jb2RlUXVlcnkoYyxlKSsodiE9PW51bGw/Ij0iK1UuZW5jb2RlUXVlcnkodixlKToiIil9O1UuYWRkUXVlcnk9ZnVuY3Rpb24oZCxjLHYpe2lmKHR5cGVvZiBjPT09Im9iamVjdCIpe2Zvcih2YXIgZSBpbiBjKXtpZihoLmNhbGwoYyxlKSl7VS5hZGRRdWVyeShkLGUsY1tlXSl9fX1lbHNlIGlmKHR5cGVvZiBjPT09InN0cmluZyIpe2lmKGRbY109PT11bmRlZmluZWQpe2RbY109djtyZXR1cm59ZWxzZSBpZih0eXBlb2YgZFtjXT09PSJzdHJpbmciKXtkW2NdPVtkW2NdXX1pZighZih2KSl7dj1bdl19ZFtjXT1kW2NdLmNvbmNhdCh2KX1lbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoIlVSSS5hZGRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyIil9fTtVLnJlbW92ZVF1ZXJ5PWZ1bmN0aW9uKGQsYyx2KXt2YXIgaSxsLGU7aWYoZihjKSl7Zm9yKGk9MCxsPWMubGVuZ3RoO2k8bDtpKyspe2RbY1tpXV09dW5kZWZpbmVkfX1lbHNlIGlmKHR5cGVvZiBjPT09Im9iamVjdCIpe2ZvcihlIGluIGMpe2lmKGguY2FsbChjLGUpKXtVLnJlbW92ZVF1ZXJ5KGQsZSxjW2VdKX19fWVsc2UgaWYodHlwZW9mIGM9PT0ic3RyaW5nIil7aWYodiE9PXVuZGVmaW5lZCl7aWYoZFtjXT09PXYpe2RbY109dW5kZWZpbmVkfWVsc2UgaWYoZihkW2NdKSl7ZFtjXT1qKGRbY10sdil9fWVsc2V7ZFtjXT11bmRlZmluZWR9fWVsc2V7dGhyb3cgbmV3IFR5cGVFcnJvcigiVVJJLmFkZFF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZyBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyIil9fTtVLmhhc1F1ZXJ5PWZ1bmN0aW9uKGQsYyx2LGUpe2lmKHR5cGVvZiBjPT09Im9iamVjdCIpe2Zvcih2YXIgaSBpbiBjKXtpZihoLmNhbGwoYyxpKSl7aWYoIVUuaGFzUXVlcnkoZCxpLGNbaV0pKXtyZXR1cm4gZmFsc2V9fX1yZXR1cm4gdHJ1ZX1lbHNlIGlmKHR5cGVvZiBjIT09InN0cmluZyIpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlVSSS5oYXNRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyIil9c3dpdGNoKGcodikpe2Nhc2UnVW5kZWZpbmVkJzpyZXR1cm4gYyBpbiBkO2Nhc2UnQm9vbGVhbic6dmFyIGw9Qm9vbGVhbihmKGRbY10pP2RbY10ubGVuZ3RoOmRbY10pO3JldHVybiB2PT09bDtjYXNlJ0Z1bmN0aW9uJzpyZXR1cm4hIXYoZFtjXSxjLGQpO2Nhc2UnQXJyYXknOmlmKCFmKGRbY10pKXtyZXR1cm4gZmFsc2V9dmFyIHM9ZT9rOm07cmV0dXJuIHMoZFtjXSx2KTtjYXNlJ1JlZ0V4cCc6aWYoIWYoZFtjXSkpe3JldHVybiBCb29sZWFuKGRbY10mJmRbY10ubWF0Y2godikpfWlmKCFlKXtyZXR1cm4gZmFsc2V9cmV0dXJuIGsoZFtjXSx2KTtjYXNlJ051bWJlcic6dj1TdHJpbmcodik7Y2FzZSdTdHJpbmcnOmlmKCFmKGRbY10pKXtyZXR1cm4gZFtjXT09PXZ9aWYoIWUpe3JldHVybiBmYWxzZX1yZXR1cm4gayhkW2NdLHYpO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcigiVVJJLmhhc1F1ZXJ5KCkgYWNjZXB0cyB1bmRlZmluZWQsIGJvb2xlYW4sIHN0cmluZywgbnVtYmVyLCBSZWdFeHAsIEZ1bmN0aW9uIGFzIHRoZSB2YWx1ZSBwYXJhbWV0ZXIiKX19O1UuY29tbW9uUGF0aD1mdW5jdGlvbihjLHQpe3ZhciBsPU1hdGgubWluKGMubGVuZ3RoLHQubGVuZ3RoKTt2YXIgZDtmb3IoZD0wO2Q8bDtkKyspe2lmKGMuY2hhckF0KGQpIT09dC5jaGFyQXQoZCkpe2QtLTticmVha319aWYoZDwxKXtyZXR1cm4gYy5jaGFyQXQoMCk9PT10LmNoYXJBdCgwKSYmYy5jaGFyQXQoMCk9PT0nLyc/Jy8nOicnfWlmKGMuY2hhckF0KGQpIT09Jy8nfHx0LmNoYXJBdChkKSE9PScvJyl7ZD1jLnN1YnN0cmluZygwLGQpLmxhc3RJbmRleE9mKCcvJyl9cmV0dXJuIGMuc3Vic3RyaW5nKDAsZCsxKX07VS53aXRoaW5TdHJpbmc9ZnVuY3Rpb24ocyxjKXtyZXR1cm4gcy5yZXBsYWNlKFUuZmluZF91cmlfZXhwcmVzc2lvbixjKX07VS5lbnN1cmVWYWxpZEhvc3RuYW1lPWZ1bmN0aW9uKHYpe2lmKHYubWF0Y2goVS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnMpKXtpZighYSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSG9zdG5hbWUgJyIrdisiJyBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXSBhbmQgUHVueWNvZGUuanMgaXMgbm90IGF2YWlsYWJsZSIpfWlmKGEudG9BU0NJSSh2KS5tYXRjaChVLmludmFsaWRfaG9zdG5hbWVfY2hhcmFjdGVycykpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkhvc3RuYW1lICciK3YrIicgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0iKX19fTtVLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYyl7aWYoYyl7dmFyIGQ9e1VSSTp0aGlzLm5vQ29uZmxpY3QoKX07aWYoVVJJVGVtcGxhdGUmJnR5cGVvZiBVUklUZW1wbGF0ZS5ub0NvbmZsaWN0PT0iZnVuY3Rpb24iKXtkLlVSSVRlbXBsYXRlPVVSSVRlbXBsYXRlLm5vQ29uZmxpY3QoKX1pZihJJiZ0eXBlb2YgSS5ub0NvbmZsaWN0PT0iZnVuY3Rpb24iKXtkLklQdjY9SS5ub0NvbmZsaWN0KCl9aWYoU2Vjb25kTGV2ZWxEb21haW5zJiZ0eXBlb2YgU2Vjb25kTGV2ZWxEb21haW5zLm5vQ29uZmxpY3Q9PSJmdW5jdGlvbiIpe2QuU2Vjb25kTGV2ZWxEb21haW5zPVNlY29uZExldmVsRG9tYWlucy5ub0NvbmZsaWN0KCl9cmV0dXJuIGR9ZWxzZSBpZihyLlVSST09PXRoaXMpe3IuVVJJPV99cmV0dXJuIHRoaXN9O3AuYnVpbGQ9ZnVuY3Rpb24oZCl7aWYoZD09PXRydWUpe3RoaXMuX2RlZmVycmVkX2J1aWxkPXRydWV9ZWxzZSBpZihkPT09dW5kZWZpbmVkfHx0aGlzLl9kZWZlcnJlZF9idWlsZCl7dGhpcy5fc3RyaW5nPVUuYnVpbGQodGhpcy5fcGFydHMpO3RoaXMuX2RlZmVycmVkX2J1aWxkPWZhbHNlfXJldHVybiB0aGlzfTtwLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBVKHRoaXMpfTtwLnZhbHVlT2Y9cC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1aWxkKGZhbHNlKS5fc3RyaW5nfTt1PXtwcm90b2NvbDoncHJvdG9jb2wnLHVzZXJuYW1lOid1c2VybmFtZScscGFzc3dvcmQ6J3Bhc3N3b3JkJyxob3N0bmFtZTonaG9zdG5hbWUnLHBvcnQ6J3BvcnQnfTt5PWZ1bmN0aW9uKHcpe3JldHVybiBmdW5jdGlvbih2LGMpe2lmKHY9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLl9wYXJ0c1t3XXx8IiJ9ZWxzZXt0aGlzLl9wYXJ0c1t3XT12fHxudWxsO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX19O2Zvcih3IGluIHUpe3Bbd109eSh1W3ddKX11PXtxdWVyeTonPycsZnJhZ21lbnQ6JyMnfTt5PWZ1bmN0aW9uKHcsYyl7cmV0dXJuIGZ1bmN0aW9uKHYsZCl7aWYodj09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuX3BhcnRzW3ddfHwiIn1lbHNle2lmKHYhPT1udWxsKXt2PXYrIiI7aWYodi5jaGFyQXQoMCk9PT1jKXt2PXYuc3Vic3RyaW5nKDEpfX10aGlzLl9wYXJ0c1t3XT12O3RoaXMuYnVpbGQoIWQpO3JldHVybiB0aGlzfX19O2Zvcih3IGluIHUpe3Bbd109eSh3LHVbd10pfXU9e3NlYXJjaDpbJz8nLCdxdWVyeSddLGhhc2g6WycjJywnZnJhZ21lbnQnXX07eT1mdW5jdGlvbih3LGMpe3JldHVybiBmdW5jdGlvbih2LGQpe3ZhciB0PXRoaXNbd10odixkKTtyZXR1cm4gdHlwZW9mIHQ9PT0ic3RyaW5nIiYmdC5sZW5ndGg/KGMrdCk6dH19O2Zvcih3IGluIHUpe3Bbd109eSh1W3ddWzFdLHVbd11bMF0pfXAucGF0aG5hbWU9ZnVuY3Rpb24odixjKXtpZih2PT09dW5kZWZpbmVkfHx2PT09dHJ1ZSl7dmFyIGQ9dGhpcy5fcGFydHMucGF0aHx8KHRoaXMuX3BhcnRzLmhvc3RuYW1lPycvJzonJyk7cmV0dXJuIHY/VS5kZWNvZGVQYXRoKGQpOmR9ZWxzZXt0aGlzLl9wYXJ0cy5wYXRoPXY/VS5yZWNvZGVQYXRoKHYpOiIvIjt0aGlzLmJ1aWxkKCFjKTtyZXR1cm4gdGhpc319O3AucGF0aD1wLnBhdGhuYW1lO3AuaHJlZj1mdW5jdGlvbihjLGQpe3ZhciBlO2lmKGM9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLnRvU3RyaW5nKCl9dGhpcy5fc3RyaW5nPSIiO3RoaXMuX3BhcnRzPVUuX3BhcnRzKCk7dmFyIF89YyBpbnN0YW5jZW9mIFU7dmFyIGk9dHlwZW9mIGM9PT0ib2JqZWN0IiYmKGMuaG9zdG5hbWV8fGMucGF0aHx8Yy5wYXRobmFtZSk7aWYoYy5ub2RlTmFtZSl7dmFyIGw9VS5nZXREb21BdHRyaWJ1dGUoYyk7Yz1jW2xdfHwiIjtpPWZhbHNlfWlmKCFfJiZpJiZjLnBhdGhuYW1lIT09dW5kZWZpbmVkKXtjPWMudG9TdHJpbmcoKX1pZih0eXBlb2YgYz09PSJzdHJpbmciKXt0aGlzLl9wYXJ0cz1VLnBhcnNlKGMsdGhpcy5fcGFydHMpfWVsc2UgaWYoX3x8aSl7dmFyIHM9Xz9jLl9wYXJ0czpjO2ZvcihlIGluIHMpe2lmKGguY2FsbCh0aGlzLl9wYXJ0cyxlKSl7dGhpcy5fcGFydHNbZV09c1tlXX19fWVsc2V7dGhyb3cgbmV3IFR5cGVFcnJvcigiaW52YWxpZCBpbnB1dCIpfXRoaXMuYnVpbGQoIWQpO3JldHVybiB0aGlzfTtwLmlzPWZ1bmN0aW9uKGMpe3ZhciBpPWZhbHNlO3ZhciBkPWZhbHNlO3ZhciBlPWZhbHNlO3ZhciBsPWZhbHNlO3ZhciBzPWZhbHNlO3ZhciB0PWZhbHNlO3ZhciBhPWZhbHNlO3ZhciB2PSF0aGlzLl9wYXJ0cy51cm47aWYodGhpcy5fcGFydHMuaG9zdG5hbWUpe3Y9ZmFsc2U7ZD1VLmlwNF9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpO2U9VS5pcDZfZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTtpPWR8fGU7bD0haTtzPWwmJlMmJlMuaGFzKHRoaXMuX3BhcnRzLmhvc3RuYW1lKTt0PWwmJlUuaWRuX2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7YT1sJiZVLnB1bnljb2RlX2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSl9c3dpdGNoKGMudG9Mb3dlckNhc2UoKSl7Y2FzZSdyZWxhdGl2ZSc6cmV0dXJuIHY7Y2FzZSdhYnNvbHV0ZSc6cmV0dXJuIXY7Y2FzZSdkb21haW4nOmNhc2UnbmFtZSc6cmV0dXJuIGw7Y2FzZSdzbGQnOnJldHVybiBzO2Nhc2UnaXAnOnJldHVybiBpO2Nhc2UnaXA0JzpjYXNlJ2lwdjQnOmNhc2UnaW5ldDQnOnJldHVybiBkO2Nhc2UnaXA2JzpjYXNlJ2lwdjYnOmNhc2UnaW5ldDYnOnJldHVybiBlO2Nhc2UnaWRuJzpyZXR1cm4gdDtjYXNlJ3VybCc6cmV0dXJuIXRoaXMuX3BhcnRzLnVybjtjYXNlJ3Vybic6cmV0dXJuISF0aGlzLl9wYXJ0cy51cm47Y2FzZSdwdW55Y29kZSc6cmV0dXJuIGF9cmV0dXJuIG51bGx9O3ZhciB6PXAucHJvdG9jb2w7dmFyIEE9cC5wb3J0O3ZhciBCPXAuaG9zdG5hbWU7cC5wcm90b2NvbD1mdW5jdGlvbih2LGMpe2lmKHYhPT11bmRlZmluZWQpe2lmKHYpe3Y9di5yZXBsYWNlKC86KFwvXC8pPyQvLCcnKTtpZih2Lm1hdGNoKC9bXmEtekEtejAtOVwuKy1dLykpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlByb3RvY29sICciK3YrIicgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuKy1dIil9fX1yZXR1cm4gei5jYWxsKHRoaXMsdixjKX07cC5zY2hlbWU9cC5wcm90b2NvbDtwLnBvcnQ9ZnVuY3Rpb24odixjKXtpZih0aGlzLl9wYXJ0cy51cm4pe3JldHVybiB2PT09dW5kZWZpbmVkPycnOnRoaXN9aWYodiE9PXVuZGVmaW5lZCl7aWYodj09PTApe3Y9bnVsbH1pZih2KXt2Kz0iIjtpZih2LmNoYXJBdCgwKT09PSI6Iil7dj12LnN1YnN0cmluZygxKX1pZih2Lm1hdGNoKC9bXjAtOV0vKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiUG9ydCAnIit2KyInIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbMC05XSIpfX19cmV0dXJuIEEuY2FsbCh0aGlzLHYsYyl9O3AuaG9zdG5hbWU9ZnVuY3Rpb24odixjKXtpZih0aGlzLl9wYXJ0cy51cm4pe3JldHVybiB2PT09dW5kZWZpbmVkPycnOnRoaXN9aWYodiE9PXVuZGVmaW5lZCl7dmFyIHg9e307VS5wYXJzZUhvc3Qodix4KTt2PXguaG9zdG5hbWV9cmV0dXJuIEIuY2FsbCh0aGlzLHYsYyl9O3AuaG9zdD1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWU/VS5idWlsZEhvc3QodGhpcy5fcGFydHMpOiIifWVsc2V7VS5wYXJzZUhvc3Qodix0aGlzLl9wYXJ0cyk7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fTtwLmF1dGhvcml0eT1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWU/VS5idWlsZEF1dGhvcml0eSh0aGlzLl9wYXJ0cyk6IiJ9ZWxzZXtVLnBhcnNlQXV0aG9yaXR5KHYsdGhpcy5fcGFydHMpO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC51c2VyaW5mbz1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2PT09dW5kZWZpbmVkKXtpZighdGhpcy5fcGFydHMudXNlcm5hbWUpe3JldHVybiIifXZhciB0PVUuYnVpbGRVc2VyaW5mbyh0aGlzLl9wYXJ0cyk7cmV0dXJuIHQuc3Vic3RyaW5nKDAsdC5sZW5ndGgtMSl9ZWxzZXtpZih2W3YubGVuZ3RoLTFdIT09J0AnKXt2Kz0nQCd9VS5wYXJzZVVzZXJpbmZvKHYsdGhpcy5fcGFydHMpO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC5yZXNvdXJjZT1mdW5jdGlvbih2LGMpe3ZhciBkO2lmKHY9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLnBhdGgoKSt0aGlzLnNlYXJjaCgpK3RoaXMuaGFzaCgpfWQ9VS5wYXJzZSh2KTt0aGlzLl9wYXJ0cy5wYXRoPWQucGF0aDt0aGlzLl9wYXJ0cy5xdWVyeT1kLnF1ZXJ5O3RoaXMuX3BhcnRzLmZyYWdtZW50PWQuZnJhZ21lbnQ7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9O3Auc3ViZG9tYWluPWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHY9PT11bmRlZmluZWQpe2lmKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZXx8dGhpcy5pcygnSVAnKSl7cmV0dXJuIiJ9dmFyIGQ9dGhpcy5fcGFydHMuaG9zdG5hbWUubGVuZ3RoLXRoaXMuZG9tYWluKCkubGVuZ3RoLTE7cmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZygwLGQpfHwiIn1lbHNle3ZhciBlPXRoaXMuX3BhcnRzLmhvc3RuYW1lLmxlbmd0aC10aGlzLmRvbWFpbigpLmxlbmd0aDt2YXIgcz10aGlzLl9wYXJ0cy5ob3N0bmFtZS5zdWJzdHJpbmcoMCxlKTt2YXIgaT1uZXcgUmVnRXhwKCdeJytiKHMpKTtpZih2JiZ2LmNoYXJBdCh2Lmxlbmd0aC0xKSE9PScuJyl7dis9Ii4ifWlmKHYpe1UuZW5zdXJlVmFsaWRIb3N0bmFtZSh2KX10aGlzLl9wYXJ0cy5ob3N0bmFtZT10aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKGksdik7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fTtwLmRvbWFpbj1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih0eXBlb2Ygdj09PSdib29sZWFuJyl7Yz12O3Y9dW5kZWZpbmVkfWlmKHY9PT11bmRlZmluZWQpe2lmKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZXx8dGhpcy5pcygnSVAnKSl7cmV0dXJuIiJ9dmFyIHQ9dGhpcy5fcGFydHMuaG9zdG5hbWUubWF0Y2goL1wuL2cpO2lmKHQmJnQubGVuZ3RoPDIpe3JldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZX12YXIgZT10aGlzLl9wYXJ0cy5ob3N0bmFtZS5sZW5ndGgtdGhpcy50bGQoYykubGVuZ3RoLTE7ZT10aGlzLl9wYXJ0cy5ob3N0bmFtZS5sYXN0SW5kZXhPZignLicsZS0xKSsxO3JldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5zdWJzdHJpbmcoZSl8fCIifWVsc2V7aWYoIXYpe3Rocm93IG5ldyBUeXBlRXJyb3IoImNhbm5vdCBzZXQgZG9tYWluIGVtcHR5Iil9VS5lbnN1cmVWYWxpZEhvc3RuYW1lKHYpO2lmKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZXx8dGhpcy5pcygnSVAnKSl7dGhpcy5fcGFydHMuaG9zdG5hbWU9dn1lbHNle3ZhciBkPW5ldyBSZWdFeHAoYih0aGlzLmRvbWFpbigpKSsiJCIpO3RoaXMuX3BhcnRzLmhvc3RuYW1lPXRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UoZCx2KX10aGlzLmJ1aWxkKCFjKTtyZXR1cm4gdGhpc319O3AudGxkPWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHR5cGVvZiB2PT09J2Jvb2xlYW4nKXtjPXY7dj11bmRlZmluZWR9aWYodj09PXVuZGVmaW5lZCl7aWYoIXRoaXMuX3BhcnRzLmhvc3RuYW1lfHx0aGlzLmlzKCdJUCcpKXtyZXR1cm4iIn12YXIgZD10aGlzLl9wYXJ0cy5ob3N0bmFtZS5sYXN0SW5kZXhPZignLicpO3ZhciB0PXRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZyhkKzEpO2lmKGMhPT10cnVlJiZTJiZTLmxpc3RbdC50b0xvd2VyQ2FzZSgpXSl7cmV0dXJuIFMuZ2V0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKXx8dH1yZXR1cm4gdH1lbHNle3ZhciBlO2lmKCF2KXt0aHJvdyBuZXcgVHlwZUVycm9yKCJjYW5ub3Qgc2V0IFRMRCBlbXB0eSIpfWVsc2UgaWYodi5tYXRjaCgvW15hLXpBLVowLTktXS8pKXtpZihTJiZTLmlzKHYpKXtlPW5ldyBSZWdFeHAoYih0aGlzLnRsZCgpKSsiJCIpO3RoaXMuX3BhcnRzLmhvc3RuYW1lPXRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UoZSx2KX1lbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoIlRMRCAnIit2KyInIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05XSIpfX1lbHNlIGlmKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZXx8dGhpcy5pcygnSVAnKSl7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJjYW5ub3Qgc2V0IFRMRCBvbiBub24tZG9tYWluIGhvc3QiKX1lbHNle2U9bmV3IFJlZ0V4cChiKHRoaXMudGxkKCkpKyIkIik7dGhpcy5fcGFydHMuaG9zdG5hbWU9dGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShlLHYpfXRoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC5kaXJlY3Rvcnk9ZnVuY3Rpb24odixjKXtpZih0aGlzLl9wYXJ0cy51cm4pe3JldHVybiB2PT09dW5kZWZpbmVkPycnOnRoaXN9aWYodj09PXVuZGVmaW5lZHx8dj09PXRydWUpe2lmKCF0aGlzLl9wYXJ0cy5wYXRoJiYhdGhpcy5fcGFydHMuaG9zdG5hbWUpe3JldHVybicnfWlmKHRoaXMuX3BhcnRzLnBhdGg9PT0nLycpe3JldHVybicvJ312YXIgZD10aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aC10aGlzLmZpbGVuYW1lKCkubGVuZ3RoLTE7dmFyIGk9dGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcoMCxkKXx8KHRoaXMuX3BhcnRzLmhvc3RuYW1lPyIvIjoiIik7cmV0dXJuIHY/VS5kZWNvZGVQYXRoKGkpOml9ZWxzZXt2YXIgZT10aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aC10aGlzLmZpbGVuYW1lKCkubGVuZ3RoO3ZhciBsPXRoaXMuX3BhcnRzLnBhdGguc3Vic3RyaW5nKDAsZSk7dmFyIHM9bmV3IFJlZ0V4cCgnXicrYihsKSk7aWYoIXRoaXMuaXMoJ3JlbGF0aXZlJykpe2lmKCF2KXt2PScvJ31pZih2LmNoYXJBdCgwKSE9PScvJyl7dj0iLyIrdn19aWYodiYmdi5jaGFyQXQodi5sZW5ndGgtMSkhPT0nLycpe3YrPScvJ312PVUucmVjb2RlUGF0aCh2KTt0aGlzLl9wYXJ0cy5wYXRoPXRoaXMuX3BhcnRzLnBhdGgucmVwbGFjZShzLHYpO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC5maWxlbmFtZT1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2PT09dW5kZWZpbmVkfHx2PT09dHJ1ZSl7aWYoIXRoaXMuX3BhcnRzLnBhdGh8fHRoaXMuX3BhcnRzLnBhdGg9PT0nLycpe3JldHVybiIifXZhciBkPXRoaXMuX3BhcnRzLnBhdGgubGFzdEluZGV4T2YoJy8nKTt2YXIgZT10aGlzLl9wYXJ0cy5wYXRoLnN1YnN0cmluZyhkKzEpO3JldHVybiB2P1UuZGVjb2RlUGF0aFNlZ21lbnQoZSk6ZX1lbHNle3ZhciBpPWZhbHNlO2lmKHYuY2hhckF0KDApPT09Jy8nKXt2PXYuc3Vic3RyaW5nKDEpfWlmKHYubWF0Y2goL1wuP1wvLykpe2k9dHJ1ZX12YXIgbD1uZXcgUmVnRXhwKGIodGhpcy5maWxlbmFtZSgpKSsiJCIpO3Y9VS5yZWNvZGVQYXRoKHYpO3RoaXMuX3BhcnRzLnBhdGg9dGhpcy5fcGFydHMucGF0aC5yZXBsYWNlKGwsdik7aWYoaSl7dGhpcy5ub3JtYWxpemVQYXRoKGMpfWVsc2V7dGhpcy5idWlsZCghYyl9cmV0dXJuIHRoaXN9fTtwLnN1ZmZpeD1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2PT09dW5kZWZpbmVkfHx2PT09dHJ1ZSl7aWYoIXRoaXMuX3BhcnRzLnBhdGh8fHRoaXMuX3BhcnRzLnBhdGg9PT0nLycpe3JldHVybiIifXZhciBkPXRoaXMuZmlsZW5hbWUoKTt2YXIgZT1kLmxhc3RJbmRleE9mKCcuJyk7dmFyIHMsaTtpZihlPT09LTEpe3JldHVybiIifXM9ZC5zdWJzdHJpbmcoZSsxKTtpPSgvXlthLXowLTklXSskL2kpLnRlc3Qocyk/czoiIjtyZXR1cm4gdj9VLmRlY29kZVBhdGhTZWdtZW50KGkpOml9ZWxzZXtpZih2LmNoYXJBdCgwKT09PScuJyl7dj12LnN1YnN0cmluZygxKX12YXIgbD10aGlzLnN1ZmZpeCgpO3ZhciB0O2lmKCFsKXtpZighdil7cmV0dXJuIHRoaXN9dGhpcy5fcGFydHMucGF0aCs9Jy4nK1UucmVjb2RlUGF0aCh2KX1lbHNlIGlmKCF2KXt0PW5ldyBSZWdFeHAoYigiLiIrbCkrIiQiKX1lbHNle3Q9bmV3IFJlZ0V4cChiKGwpKyIkIil9aWYodCl7dj1VLnJlY29kZVBhdGgodik7dGhpcy5fcGFydHMucGF0aD10aGlzLl9wYXJ0cy5wYXRoLnJlcGxhY2UodCx2KX10aGlzLmJ1aWxkKCFjKTtyZXR1cm4gdGhpc319O3Auc2VnbWVudD1mdW5jdGlvbihzLHYsYyl7dmFyIGQ9dGhpcy5fcGFydHMudXJuPyc6JzonLyc7dmFyIGU9dGhpcy5wYXRoKCk7dmFyIHQ9ZS5zdWJzdHJpbmcoMCwxKT09PScvJzt2YXIgeD1lLnNwbGl0KGQpO2lmKHMhPT11bmRlZmluZWQmJnR5cGVvZiBzIT09J251bWJlcicpe2M9djt2PXM7cz11bmRlZmluZWR9aWYocyE9PXVuZGVmaW5lZCYmdHlwZW9mIHMhPT0nbnVtYmVyJyl7dGhyb3cgbmV3IEVycm9yKCJCYWQgc2VnbWVudCAnIitzKyInLCBtdXN0IGJlIDAtYmFzZWQgaW50ZWdlciIpfWlmKHQpe3guc2hpZnQoKX1pZihzPDApe3M9TWF0aC5tYXgoeC5sZW5ndGgrcywwKX1pZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gcz09PXVuZGVmaW5lZD94Onhbc119ZWxzZSBpZihzPT09bnVsbHx8eFtzXT09PXVuZGVmaW5lZCl7aWYoZih2KSl7eD1bXTtmb3IodmFyIGk9MCxsPXYubGVuZ3RoO2k8bDtpKyspe2lmKCF2W2ldLmxlbmd0aCYmKCF4Lmxlbmd0aHx8IXhbeC5sZW5ndGgtMV0ubGVuZ3RoKSl7Y29udGludWV9aWYoeC5sZW5ndGgmJiF4W3gubGVuZ3RoLTFdLmxlbmd0aCl7eC5wb3AoKX14LnB1c2godltpXSl9fWVsc2UgaWYodnx8KHR5cGVvZiB2PT09InN0cmluZyIpKXtpZih4W3gubGVuZ3RoLTFdPT09IiIpe3hbeC5sZW5ndGgtMV09dn1lbHNle3gucHVzaCh2KX19fWVsc2V7aWYodnx8KHR5cGVvZiB2PT09InN0cmluZyImJnYubGVuZ3RoKSl7eFtzXT12fWVsc2V7eC5zcGxpY2UocywxKX19aWYodCl7eC51bnNoaWZ0KCIiKX1yZXR1cm4gdGhpcy5wYXRoKHguam9pbihkKSxjKX07cC5zZWdtZW50Q29kZWQ9ZnVuY3Rpb24ocyx2LGMpe3ZhciBkLGksbDtpZih0eXBlb2YgcyE9PSdudW1iZXInKXtjPXY7dj1zO3M9dW5kZWZpbmVkfWlmKHY9PT11bmRlZmluZWQpe2Q9dGhpcy5zZWdtZW50KHMsdixjKTtpZighZihkKSl7ZD1kIT09dW5kZWZpbmVkP1UuZGVjb2RlKGQpOnVuZGVmaW5lZH1lbHNle2ZvcihpPTAsbD1kLmxlbmd0aDtpPGw7aSsrKXtkW2ldPVUuZGVjb2RlKGRbaV0pfX1yZXR1cm4gZH1pZighZih2KSl7dj10eXBlb2Ygdj09PSdzdHJpbmcnP1UuZW5jb2RlKHYpOnZ9ZWxzZXtmb3IoaT0wLGw9di5sZW5ndGg7aTxsO2krKyl7dltpXT1VLmRlY29kZSh2W2ldKX19cmV0dXJuIHRoaXMuc2VnbWVudChzLHYsYyl9O3ZhciBxPXAucXVlcnk7cC5xdWVyeT1mdW5jdGlvbih2LGMpe2lmKHY9PT10cnVlKXtyZXR1cm4gVS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpfWVsc2UgaWYodHlwZW9mIHY9PT0iZnVuY3Rpb24iKXt2YXIgZD1VLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7dmFyIGU9di5jYWxsKHRoaXMsZCk7dGhpcy5fcGFydHMucXVlcnk9VS5idWlsZFF1ZXJ5KGV8fGQsdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfWVsc2UgaWYodiE9PXVuZGVmaW5lZCYmdHlwZW9mIHYhPT0ic3RyaW5nIil7dGhpcy5fcGFydHMucXVlcnk9VS5idWlsZFF1ZXJ5KHYsdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfWVsc2V7cmV0dXJuIHEuY2FsbCh0aGlzLHYsYyl9fTtwLnNldFF1ZXJ5PWZ1bmN0aW9uKGMsdixkKXt2YXIgZT1VLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7aWYodHlwZW9mIGM9PT0ib2JqZWN0Iil7Zm9yKHZhciBpIGluIGMpe2lmKGguY2FsbChjLGkpKXtlW2ldPWNbaV19fX1lbHNlIGlmKHR5cGVvZiBjPT09InN0cmluZyIpe2VbY109diE9PXVuZGVmaW5lZD92Om51bGx9ZWxzZXt0aHJvdyBuZXcgVHlwZUVycm9yKCJVUkkuYWRkUXVlcnkoKSBhY2NlcHRzIGFuIG9iamVjdCwgc3RyaW5nIGFzIHRoZSBuYW1lIHBhcmFtZXRlciIpfXRoaXMuX3BhcnRzLnF1ZXJ5PVUuYnVpbGRRdWVyeShlLHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtpZih0eXBlb2YgYyE9PSJzdHJpbmciKXtkPXZ9dGhpcy5idWlsZCghZCk7cmV0dXJuIHRoaXN9O3AuYWRkUXVlcnk9ZnVuY3Rpb24oYyx2LGQpe3ZhciBlPVUucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtVLmFkZFF1ZXJ5KGUsYyx2PT09dW5kZWZpbmVkP251bGw6dik7dGhpcy5fcGFydHMucXVlcnk9VS5idWlsZFF1ZXJ5KGUsdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO2lmKHR5cGVvZiBjIT09InN0cmluZyIpe2Q9dn10aGlzLmJ1aWxkKCFkKTtyZXR1cm4gdGhpc307cC5yZW1vdmVRdWVyeT1mdW5jdGlvbihjLHYsZCl7dmFyIGU9VS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1UucmVtb3ZlUXVlcnkoZSxjLHYpO3RoaXMuX3BhcnRzLnF1ZXJ5PVUuYnVpbGRRdWVyeShlLHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtpZih0eXBlb2YgYyE9PSJzdHJpbmciKXtkPXZ9dGhpcy5idWlsZCghZCk7cmV0dXJuIHRoaXN9O3AuaGFzUXVlcnk9ZnVuY3Rpb24oYyx2LGQpe3ZhciBlPVUucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtyZXR1cm4gVS5oYXNRdWVyeShlLGMsdixkKX07cC5zZXRTZWFyY2g9cC5zZXRRdWVyeTtwLmFkZFNlYXJjaD1wLmFkZFF1ZXJ5O3AucmVtb3ZlU2VhcmNoPXAucmVtb3ZlUXVlcnk7cC5oYXNTZWFyY2g9cC5oYXNRdWVyeTtwLm5vcm1hbGl6ZT1mdW5jdGlvbigpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHRoaXMubm9ybWFsaXplUHJvdG9jb2woZmFsc2UpLm5vcm1hbGl6ZVF1ZXJ5KGZhbHNlKS5ub3JtYWxpemVGcmFnbWVudChmYWxzZSkuYnVpbGQoKX1yZXR1cm4gdGhpcy5ub3JtYWxpemVQcm90b2NvbChmYWxzZSkubm9ybWFsaXplSG9zdG5hbWUoZmFsc2UpLm5vcm1hbGl6ZVBvcnQoZmFsc2UpLm5vcm1hbGl6ZVBhdGgoZmFsc2UpLm5vcm1hbGl6ZVF1ZXJ5KGZhbHNlKS5ub3JtYWxpemVGcmFnbWVudChmYWxzZSkuYnVpbGQoKX07cC5ub3JtYWxpemVQcm90b2NvbD1mdW5jdGlvbihjKXtpZih0eXBlb2YgdGhpcy5fcGFydHMucHJvdG9jb2w9PT0ic3RyaW5nIil7dGhpcy5fcGFydHMucHJvdG9jb2w9dGhpcy5fcGFydHMucHJvdG9jb2wudG9Mb3dlckNhc2UoKTt0aGlzLmJ1aWxkKCFjKX1yZXR1cm4gdGhpc307cC5ub3JtYWxpemVIb3N0bmFtZT1mdW5jdGlvbihjKXtpZih0aGlzLl9wYXJ0cy5ob3N0bmFtZSl7aWYodGhpcy5pcygnSUROJykmJmEpe3RoaXMuX3BhcnRzLmhvc3RuYW1lPWEudG9BU0NJSSh0aGlzLl9wYXJ0cy5ob3N0bmFtZSl9ZWxzZSBpZih0aGlzLmlzKCdJUHY2JykmJkkpe3RoaXMuX3BhcnRzLmhvc3RuYW1lPUkuYmVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSl9dGhpcy5fcGFydHMuaG9zdG5hbWU9dGhpcy5fcGFydHMuaG9zdG5hbWUudG9Mb3dlckNhc2UoKTt0aGlzLmJ1aWxkKCFjKX1yZXR1cm4gdGhpc307cC5ub3JtYWxpemVQb3J0PWZ1bmN0aW9uKGMpe2lmKHR5cGVvZiB0aGlzLl9wYXJ0cy5wcm90b2NvbD09PSJzdHJpbmciJiZ0aGlzLl9wYXJ0cy5wb3J0PT09VS5kZWZhdWx0UG9ydHNbdGhpcy5fcGFydHMucHJvdG9jb2xdKXt0aGlzLl9wYXJ0cy5wb3J0PW51bGw7dGhpcy5idWlsZCghYyl9cmV0dXJuIHRoaXN9O3Aubm9ybWFsaXplUGF0aD1mdW5jdGlvbihjKXtpZih0aGlzLl9wYXJ0cy51cm4pe3JldHVybiB0aGlzfWlmKCF0aGlzLl9wYXJ0cy5wYXRofHx0aGlzLl9wYXJ0cy5wYXRoPT09Jy8nKXtyZXR1cm4gdGhpc312YXIgZDt2YXIgZT10aGlzLl9wYXJ0cy5wYXRoO3ZhciBpLGw7aWYoZS5jaGFyQXQoMCkhPT0nLycpe2Q9dHJ1ZTtlPScvJytlfWU9ZS5yZXBsYWNlKC8oXC8oXC5cLykrKXwoXC9cLiQpL2csJy8nKS5yZXBsYWNlKC9cL3syLH0vZywnLycpO3doaWxlKHRydWUpe2k9ZS5pbmRleE9mKCcvLi4vJyk7aWYoaT09PS0xKXticmVha31lbHNlIGlmKGk9PT0wKXtlPWUuc3Vic3RyaW5nKDMpO2JyZWFrfWw9ZS5zdWJzdHJpbmcoMCxpKS5sYXN0SW5kZXhPZignLycpO2lmKGw9PT0tMSl7bD1pfWU9ZS5zdWJzdHJpbmcoMCxsKStlLnN1YnN0cmluZyhpKzMpfWlmKGQmJnRoaXMuaXMoJ3JlbGF0aXZlJykpe2U9ZS5zdWJzdHJpbmcoMSl9ZT1VLnJlY29kZVBhdGgoZSk7dGhpcy5fcGFydHMucGF0aD1lO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfTtwLm5vcm1hbGl6ZVBhdGhuYW1lPXAubm9ybWFsaXplUGF0aDtwLm5vcm1hbGl6ZVF1ZXJ5PWZ1bmN0aW9uKGMpe2lmKHR5cGVvZiB0aGlzLl9wYXJ0cy5xdWVyeT09PSJzdHJpbmciKXtpZighdGhpcy5fcGFydHMucXVlcnkubGVuZ3RoKXt0aGlzLl9wYXJ0cy5xdWVyeT1udWxsfWVsc2V7dGhpcy5xdWVyeShVLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSkpfXRoaXMuYnVpbGQoIWMpfXJldHVybiB0aGlzfTtwLm5vcm1hbGl6ZUZyYWdtZW50PWZ1bmN0aW9uKGMpe2lmKCF0aGlzLl9wYXJ0cy5mcmFnbWVudCl7dGhpcy5fcGFydHMuZnJhZ21lbnQ9bnVsbDt0aGlzLmJ1aWxkKCFjKX1yZXR1cm4gdGhpc307cC5ub3JtYWxpemVTZWFyY2g9cC5ub3JtYWxpemVRdWVyeTtwLm5vcm1hbGl6ZUhhc2g9cC5ub3JtYWxpemVGcmFnbWVudDtwLmlzbzg4NTk9ZnVuY3Rpb24oKXt2YXIgZT1VLmVuY29kZTt2YXIgZD1VLmRlY29kZTtVLmVuY29kZT1lc2NhcGU7VS5kZWNvZGU9ZGVjb2RlVVJJQ29tcG9uZW50O3RoaXMubm9ybWFsaXplKCk7VS5lbmNvZGU9ZTtVLmRlY29kZT1kO3JldHVybiB0aGlzfTtwLnVuaWNvZGU9ZnVuY3Rpb24oKXt2YXIgZT1VLmVuY29kZTt2YXIgZD1VLmRlY29kZTtVLmVuY29kZT1vO1UuZGVjb2RlPXVuZXNjYXBlO3RoaXMubm9ybWFsaXplKCk7VS5lbmNvZGU9ZTtVLmRlY29kZT1kO3JldHVybiB0aGlzfTtwLnJlYWRhYmxlPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5jbG9uZSgpO2MudXNlcm5hbWUoIiIpLnBhc3N3b3JkKCIiKS5ub3JtYWxpemUoKTt2YXIgdD0nJztpZihjLl9wYXJ0cy5wcm90b2NvbCl7dCs9Yy5fcGFydHMucHJvdG9jb2wrJzovLyd9aWYoYy5fcGFydHMuaG9zdG5hbWUpe2lmKGMuaXMoJ3B1bnljb2RlJykmJmEpe3QrPWEudG9Vbmljb2RlKGMuX3BhcnRzLmhvc3RuYW1lKTtpZihjLl9wYXJ0cy5wb3J0KXt0Kz0iOiIrYy5fcGFydHMucG9ydH19ZWxzZXt0Kz1jLmhvc3QoKX19aWYoYy5fcGFydHMuaG9zdG5hbWUmJmMuX3BhcnRzLnBhdGgmJmMuX3BhcnRzLnBhdGguY2hhckF0KDApIT09Jy8nKXt0Kz0nLyd9dCs9Yy5wYXRoKHRydWUpO2lmKGMuX3BhcnRzLnF1ZXJ5KXt2YXIgcT0nJztmb3IodmFyIGk9MCxkPWMuX3BhcnRzLnF1ZXJ5LnNwbGl0KCcmJyksbD1kLmxlbmd0aDtpPGw7aSsrKXt2YXIgZT0oZFtpXXx8IiIpLnNwbGl0KCc9Jyk7cSs9JyYnK1UuZGVjb2RlUXVlcnkoZVswXSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKS5yZXBsYWNlKC8mL2csJyUyNicpO2lmKGVbMV0hPT11bmRlZmluZWQpe3ErPSI9IitVLmRlY29kZVF1ZXJ5KGVbMV0sdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSkucmVwbGFjZSgvJi9nLCclMjYnKX19dCs9Jz8nK3Euc3Vic3RyaW5nKDEpfXQrPVUuZGVjb2RlUXVlcnkoYy5oYXNoKCksdHJ1ZSk7cmV0dXJuIHR9O3AuYWJzb2x1dGVUbz1mdW5jdGlvbihjKXt2YXIgZD10aGlzLmNsb25lKCk7dmFyIGU9Wydwcm90b2NvbCcsJ3VzZXJuYW1lJywncGFzc3dvcmQnLCdob3N0bmFtZScsJ3BvcnQnXTt2YXIgbCxpLHA7aWYodGhpcy5fcGFydHMudXJuKXt0aHJvdyBuZXcgRXJyb3IoJ1VSTnMgZG8gbm90IGhhdmUgYW55IGdlbmVyYWxseSBkZWZpbmVkIGhpZXJhcmNoaWNhbCBjb21wb25lbnRzJyl9aWYoIShjIGluc3RhbmNlb2YgVSkpe2M9bmV3IFUoYyl9aWYoIWQuX3BhcnRzLnByb3RvY29sKXtkLl9wYXJ0cy5wcm90b2NvbD1jLl9wYXJ0cy5wcm90b2NvbH1pZih0aGlzLl9wYXJ0cy5ob3N0bmFtZSl7cmV0dXJuIGR9Zm9yKGk9MDtwPWVbaV07aSsrKXtkLl9wYXJ0c1twXT1jLl9wYXJ0c1twXX1lPVsncXVlcnknLCdwYXRoJ107Zm9yKGk9MDtwPWVbaV07aSsrKXtpZighZC5fcGFydHNbcF0mJmMuX3BhcnRzW3BdKXtkLl9wYXJ0c1twXT1jLl9wYXJ0c1twXX19aWYoZC5wYXRoKCkuY2hhckF0KDApIT09Jy8nKXtsPWMuZGlyZWN0b3J5KCk7ZC5fcGFydHMucGF0aD0obD8obCsnLycpOicnKStkLl9wYXJ0cy5wYXRoO2Qubm9ybWFsaXplUGF0aCgpfWQuYnVpbGQoKTtyZXR1cm4gZH07cC5yZWxhdGl2ZVRvPWZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuY2xvbmUoKS5ub3JtYWxpemUoKTt2YXIgZSxpLGwscyx0O2lmKGQuX3BhcnRzLnVybil7dGhyb3cgbmV3IEVycm9yKCdVUk5zIGRvIG5vdCBoYXZlIGFueSBnZW5lcmFsbHkgZGVmaW5lZCBoaWVyYXJjaGljYWwgY29tcG9uZW50cycpfWM9bmV3IFUoYykubm9ybWFsaXplKCk7ZT1kLl9wYXJ0cztpPWMuX3BhcnRzO3M9ZC5wYXRoKCk7dD1jLnBhdGgoKTtpZihzLmNoYXJBdCgwKSE9PScvJyl7dGhyb3cgbmV3IEVycm9yKCdVUkkgaXMgYWxyZWFkeSByZWxhdGl2ZScpfWlmKHQuY2hhckF0KDApIT09Jy8nKXt0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjYWxjdWxhdGUgYSBVUkkgcmVsYXRpdmUgdG8gYW5vdGhlciByZWxhdGl2ZSBVUkknKX1pZihlLnByb3RvY29sPT09aS5wcm90b2NvbCl7ZS5wcm90b2NvbD1udWxsfWlmKGUudXNlcm5hbWUhPT1pLnVzZXJuYW1lfHxlLnBhc3N3b3JkIT09aS5wYXNzd29yZCl7cmV0dXJuIGQuYnVpbGQoKX1pZihlLnByb3RvY29sIT09bnVsbHx8ZS51c2VybmFtZSE9PW51bGx8fGUucGFzc3dvcmQhPT1udWxsKXtyZXR1cm4gZC5idWlsZCgpfWlmKGUuaG9zdG5hbWU9PT1pLmhvc3RuYW1lJiZlLnBvcnQ9PT1pLnBvcnQpe2UuaG9zdG5hbWU9bnVsbDtlLnBvcnQ9bnVsbH1lbHNle3JldHVybiBkLmJ1aWxkKCl9aWYocz09PXQpe2UucGF0aD0nJztyZXR1cm4gZC5idWlsZCgpfWw9VS5jb21tb25QYXRoKGQucGF0aCgpLGMucGF0aCgpKTtpZighbCl7cmV0dXJuIGQuYnVpbGQoKX12YXIgdj1pLnBhdGguc3Vic3RyaW5nKGwubGVuZ3RoKS5yZXBsYWNlKC9bXlwvXSokLywnJykucmVwbGFjZSgvLio/XC8vZywnLi4vJyk7ZS5wYXRoPXYrZS5wYXRoLnN1YnN0cmluZyhsLmxlbmd0aCk7cmV0dXJuIGQuYnVpbGQoKX07cC5lcXVhbHM9ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5jbG9uZSgpO3ZhciB0PW5ldyBVKGMpO3ZhciBlPXt9O3ZhciBpPXt9O3ZhciBsPXt9O3ZhciBzLHYseDtkLm5vcm1hbGl6ZSgpO3Qubm9ybWFsaXplKCk7aWYoZC50b1N0cmluZygpPT09dC50b1N0cmluZygpKXtyZXR1cm4gdHJ1ZX1zPWQucXVlcnkoKTt2PXQucXVlcnkoKTtkLnF1ZXJ5KCIiKTt0LnF1ZXJ5KCIiKTtpZihkLnRvU3RyaW5nKCkhPT10LnRvU3RyaW5nKCkpe3JldHVybiBmYWxzZX1pZihzLmxlbmd0aCE9PXYubGVuZ3RoKXtyZXR1cm4gZmFsc2V9ZT1VLnBhcnNlUXVlcnkocyx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtpPVUucGFyc2VRdWVyeSh2LHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO2Zvcih4IGluIGUpe2lmKGguY2FsbChlLHgpKXtpZighZihlW3hdKSl7aWYoZVt4XSE9PWlbeF0pe3JldHVybiBmYWxzZX19ZWxzZSBpZighbShlW3hdLGlbeF0pKXtyZXR1cm4gZmFsc2V9bFt4XT10cnVlfX1mb3IoeCBpbiBpKXtpZihoLmNhbGwoaSx4KSl7aWYoIWxbeF0pe3JldHVybiBmYWxzZX19fXJldHVybiB0cnVlfTtwLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycz1mdW5jdGlvbih2KXt0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnM9ISF2O3JldHVybiB0aGlzfTtwLmVzY2FwZVF1ZXJ5U3BhY2U9ZnVuY3Rpb24odil7dGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZT0hIXY7cmV0dXJuIHRoaXN9O3JldHVybiBVfSkpOwovKiEKICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2MS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnkuY29tLwogKgogKiBJbmNsdWRlcyBTaXp6bGUuanMKICogaHR0cDovL3NpenpsZWpzLmNvbS8KICoKICogQ29weXJpZ2h0IDIwMDUsIDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBEYXRlOiAyMDE0LTA1LTAxVDE3OjQyWgogKi8KKGZ1bmN0aW9uKGcsZil7aWYodHlwZW9mIG1vZHVsZT09PSJvYmplY3QiJiZ0eXBlb2YgbW9kdWxlLmV4cG9ydHM9PT0ib2JqZWN0Iil7bW9kdWxlLmV4cG9ydHM9Zy5kb2N1bWVudD9mKGcsdHJ1ZSk6ZnVuY3Rpb24odyl7aWYoIXcuZG9jdW1lbnQpe3Rocm93IG5ldyBFcnJvcigialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIpfXJldHVybiBmKHcpfX1lbHNle2YoZyl9fSh0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93OnRoaXMsZnVuY3Rpb24odyxjKXt2YXIgZD1bXTt2YXIgZj1kLnNsaWNlO3ZhciBnPWQuY29uY2F0O3ZhciBoPWQucHVzaDt2YXIgaz1kLmluZGV4T2Y7dmFyIG89e307dmFyIHE9by50b1N0cmluZzt2YXIgdT1vLmhhc093blByb3BlcnR5O3ZhciB4PXt9O3ZhciB5PSIxLjExLjEiLFE9ZnVuY3Rpb24ocyxhKXtyZXR1cm4gbmV3IFEuZm4uaW5pdChzLGEpfSx6PS9eW1xzXHVGRUZGXHhBMF0rfFtcc1x1RkVGRlx4QTBdKyQvZyxBPS9eLW1zLS8sQj0vLShbXGRhLXpdKS9naSxDPWZ1bmN0aW9uKGEsbCl7cmV0dXJuIGwudG9VcHBlckNhc2UoKX07US5mbj1RLnByb3RvdHlwZT17anF1ZXJ5OnksY29uc3RydWN0b3I6USxzZWxlY3RvcjoiIixsZW5ndGg6MCx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIGYuY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKG4pe3JldHVybiBuIT1udWxsPyhuPDA/dGhpc1tuK3RoaXMubGVuZ3RoXTp0aGlzW25dKTpmLmNhbGwodGhpcyl9LHB1c2hTdGFjazpmdW5jdGlvbihhKXt2YXIgcj1RLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxhKTtyLnByZXZPYmplY3Q9dGhpcztyLmNvbnRleHQ9dGhpcy5jb250ZXh0O3JldHVybiByfSxlYWNoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFEuZWFjaCh0aGlzLGEsYil9LG1hcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUS5tYXAodGhpcyxmdW5jdGlvbihiLGkpe3JldHVybiBhLmNhbGwoYixpLGIpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhmLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGkpe3ZhciBsPXRoaXMubGVuZ3RoLGo9K2krKGk8MD9sOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhqPj0wJiZqPGw/W3RoaXNbal1dOltdKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpoLHNvcnQ6ZC5zb3J0LHNwbGljZTpkLnNwbGljZX07US5leHRlbmQ9US5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgcyxhLGIsbixqLGwsdD1hcmd1bWVudHNbMF18fHt9LGk9MSxtPWFyZ3VtZW50cy5sZW5ndGgscD1mYWxzZTtpZih0eXBlb2YgdD09PSJib29sZWFuIil7cD10O3Q9YXJndW1lbnRzW2ldfHx7fTtpKyt9aWYodHlwZW9mIHQhPT0ib2JqZWN0IiYmIVEuaXNGdW5jdGlvbih0KSl7dD17fX1pZihpPT09bSl7dD10aGlzO2ktLX1mb3IoO2k8bTtpKyspe2lmKChqPWFyZ3VtZW50c1tpXSkhPW51bGwpe2ZvcihuIGluIGope3M9dFtuXTtiPWpbbl07aWYodD09PWIpe2NvbnRpbnVlfWlmKHAmJmImJihRLmlzUGxhaW5PYmplY3QoYil8fChhPVEuaXNBcnJheShiKSkpKXtpZihhKXthPWZhbHNlO2w9cyYmUS5pc0FycmF5KHMpP3M6W119ZWxzZXtsPXMmJlEuaXNQbGFpbk9iamVjdChzKT9zOnt9fXRbbl09US5leHRlbmQocCxsLGIpfWVsc2UgaWYoYiE9PXVuZGVmaW5lZCl7dFtuXT1ifX19fXJldHVybiB0fTtRLmV4dGVuZCh7ZXhwYW5kbzoialF1ZXJ5IisoeStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCIiKSxpc1JlYWR5OnRydWUsZXJyb3I6ZnVuY3Rpb24obSl7dGhyb3cgbmV3IEVycm9yKG0pfSxub29wOmZ1bmN0aW9uKCl7fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBRLnR5cGUoYSk9PT0iZnVuY3Rpb24ifSxpc0FycmF5OkFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGEpe3JldHVybiBRLnR5cGUoYSk9PT0iYXJyYXkifSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gYSE9bnVsbCYmYT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4hUS5pc0FycmF5KGEpJiZhLXBhcnNlRmxvYXQoYSk+PTB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIG47Zm9yKG4gaW4gYSl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiO2lmKCFhfHxRLnR5cGUoYSkhPT0ib2JqZWN0Inx8YS5ub2RlVHlwZXx8US5pc1dpbmRvdyhhKSl7cmV0dXJuIGZhbHNlfXRyeXtpZihhLmNvbnN0cnVjdG9yJiYhdS5jYWxsKGEsImNvbnN0cnVjdG9yIikmJiF1LmNhbGwoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsImlzUHJvdG90eXBlT2YiKSl7cmV0dXJuIGZhbHNlfX1jYXRjaChlKXtyZXR1cm4gZmFsc2V9aWYoeC5vd25MYXN0KXtmb3IoYiBpbiBhKXtyZXR1cm4gdS5jYWxsKGEsYil9fWZvcihiIGluIGEpe31yZXR1cm4gYj09PXVuZGVmaW5lZHx8dS5jYWxsKGEsYil9LHR5cGU6ZnVuY3Rpb24oYSl7aWYoYT09bnVsbCl7cmV0dXJuIGErIiJ9cmV0dXJuIHR5cGVvZiBhPT09Im9iamVjdCJ8fHR5cGVvZiBhPT09ImZ1bmN0aW9uIj9vW3EuY2FsbChhKV18fCJvYmplY3QiOnR5cGVvZiBhfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGEpe2lmKGEmJlEudHJpbShhKSl7KHcuZXhlY1NjcmlwdHx8ZnVuY3Rpb24oYSl7d1siZXZhbCJdLmNhbGwodyxhKX0pKGEpfX0sY2FtZWxDYXNlOmZ1bmN0aW9uKHMpe3JldHVybiBzLnJlcGxhY2UoQSwibXMtIikucmVwbGFjZShCLEMpfSxub2RlTmFtZTpmdW5jdGlvbihhLG4pe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1uLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiLGope3ZhciB2LGk9MCxsPWEubGVuZ3RoLG09RChhKTtpZihqKXtpZihtKXtmb3IoO2k8bDtpKyspe3Y9Yi5hcHBseShhW2ldLGopO2lmKHY9PT1mYWxzZSl7YnJlYWt9fX1lbHNle2ZvcihpIGluIGEpe3Y9Yi5hcHBseShhW2ldLGopO2lmKHY9PT1mYWxzZSl7YnJlYWt9fX19ZWxzZXtpZihtKXtmb3IoO2k8bDtpKyspe3Y9Yi5jYWxsKGFbaV0saSxhW2ldKTtpZih2PT09ZmFsc2Upe2JyZWFrfX19ZWxzZXtmb3IoaSBpbiBhKXt2PWIuY2FsbChhW2ldLGksYVtpXSk7aWYodj09PWZhbHNlKXticmVha319fX1yZXR1cm4gYX0sdHJpbTpmdW5jdGlvbih0KXtyZXR1cm4gdD09bnVsbD8iIjoodCsiIikucmVwbGFjZSh6LCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEscil7dmFyIGI9cnx8W107aWYoYSE9bnVsbCl7aWYoRChPYmplY3QoYSkpKXtRLm1lcmdlKGIsdHlwZW9mIGE9PT0ic3RyaW5nIj9bYV06YSl9ZWxzZXtoLmNhbGwoYixhKX19cmV0dXJuIGJ9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGkpe3ZhciBsO2lmKGIpe2lmKGspe3JldHVybiBrLmNhbGwoYixhLGkpfWw9Yi5sZW5ndGg7aT1pP2k8MD9NYXRoLm1heCgwLGwraSk6aTowO2Zvcig7aTxsO2krKyl7aWYoaSBpbiBiJiZiW2ldPT09YSl7cmV0dXJuIGl9fX1yZXR1cm4tMX0sbWVyZ2U6ZnVuY3Rpb24oYSxzKXt2YXIgbD0rcy5sZW5ndGgsaj0wLGk9YS5sZW5ndGg7d2hpbGUoajxsKXthW2krK109c1tqKytdfWlmKGwhPT1sKXt3aGlsZShzW2pdIT09dW5kZWZpbmVkKXthW2krK109c1tqKytdfX1hLmxlbmd0aD1pO3JldHVybiBhfSxncmVwOmZ1bmN0aW9uKGEsYixqKXt2YXIgbCxtPVtdLGk9MCxuPWEubGVuZ3RoLHA9IWo7Zm9yKDtpPG47aSsrKXtsPSFiKGFbaV0saSk7aWYobCE9PXApe20ucHVzaChhW2ldKX19cmV0dXJuIG19LG1hcDpmdW5jdGlvbihhLGIsail7dmFyIHYsaT0wLGw9YS5sZW5ndGgsbT1EKGEpLHI9W107aWYobSl7Zm9yKDtpPGw7aSsrKXt2PWIoYVtpXSxpLGopO2lmKHYhPW51bGwpe3IucHVzaCh2KX19fWVsc2V7Zm9yKGkgaW4gYSl7dj1iKGFbaV0saSxqKTtpZih2IT1udWxsKXtyLnB1c2godil9fX1yZXR1cm4gZy5hcHBseShbXSxyKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGEsYil7dmFyIGoscCx0O2lmKHR5cGVvZiBiPT09InN0cmluZyIpe3Q9YVtiXTtiPWE7YT10fWlmKCFRLmlzRnVuY3Rpb24oYSkpe3JldHVybiB1bmRlZmluZWR9aj1mLmNhbGwoYXJndW1lbnRzLDIpO3A9ZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShifHx0aGlzLGouY29uY2F0KGYuY2FsbChhcmd1bWVudHMpKSl9O3AuZ3VpZD1hLmd1aWQ9YS5ndWlkfHxRLmd1aWQrKztyZXR1cm4gcH0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuKyhuZXcgRGF0ZSgpKX0sc3VwcG9ydDp4fSk7US5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGksbil7b1siW29iamVjdCAiK24rIl0iXT1uLnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiBEKGEpe3ZhciBsPWEubGVuZ3RoLHQ9US50eXBlKGEpO2lmKHQ9PT0iZnVuY3Rpb24ifHxRLmlzV2luZG93KGEpKXtyZXR1cm4gZmFsc2V9aWYoYS5ub2RlVHlwZT09PTEmJmwpe3JldHVybiB0cnVlfXJldHVybiB0PT09ImFycmF5Inx8bD09PTB8fHR5cGVvZiBsPT09Im51bWJlciImJmw+MCYmKGwtMSlpbiBhfXZhciBTPQovKiEKICogU2l6emxlIENTUyBTZWxlY3RvciBFbmdpbmUgdjEuMTAuMTkKICogaHR0cDovL3NpenpsZWpzLmNvbS8KICoKICogQ29weXJpZ2h0IDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBEYXRlOiAyMDE0LTA0LTE4CiAqLwooZnVuY3Rpb24odyl7dmFyIGkseCxsLG4scCx0LHIscyx2LHIzLHMzLHQzLEosbzMsdTMsdjMsdzMseDMseTMsejM9InNpenpsZSIrLShuZXcgRGF0ZSgpKSxBMz13LmRvY3VtZW50LEIzPTAsQzM9MCxEMz1jNCgpLEUzPWM0KCksRjM9YzQoKSxHMz1mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXtzMz10cnVlfXJldHVybiAwfSxYPXR5cGVvZiB1bmRlZmluZWQsSDM9MTw8MzEsdT0oe30pLmhhc093blByb3BlcnR5LEkzPVtdLEozPUkzLnBvcCxLMz1JMy5wdXNoLGg9STMucHVzaCxmPUkzLnNsaWNlLGs9STMuaW5kZXhPZnx8ZnVuY3Rpb24oYSl7dmFyIGk9MCxiPXRoaXMubGVuZ3RoO2Zvcig7aTxiO2krKyl7aWYodGhpc1tpXT09PWEpe3JldHVybiBpfX1yZXR1cm4tMX0sTDM9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixNMz0iW1xceDIwXFx0XFxyXFxuXFxmXSIsTjM9Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIixPMz1OMy5yZXBsYWNlKCJ3IiwidyMiKSxQMz0iXFxbIitNMysiKigiK04zKyIpKD86IitNMysiKihbKl4kfCF+XT89KSIrTTMrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitPMysiKSl8KSIrTTMrIipcXF0iLFEzPSI6KCIrTjMrIikoPzpcXCgoIisiKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwiKyIoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK1AzKyIpKil8IisiLioiKyIpXFwpfCkiLHo9bmV3IFJlZ0V4cCgiXiIrTTMrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrTTMrIiskIiwiZyIpLFIzPW5ldyBSZWdFeHAoIl4iK00zKyIqLCIrTTMrIioiKSxTMz1uZXcgUmVnRXhwKCJeIitNMysiKihbPit+XXwiK00zKyIpIitNMysiKiIpLFQzPW5ldyBSZWdFeHAoIj0iK00zKyIqKFteXFxdJ1wiXSo/KSIrTTMrIipcXF0iLCJnIiksVTM9bmV3IFJlZ0V4cChRMyksVjM9bmV3IFJlZ0V4cCgiXiIrTzMrIiQiKSxXMz17IklEIjpuZXcgUmVnRXhwKCJeIygiK04zKyIpIiksIkNMQVNTIjpuZXcgUmVnRXhwKCJeXFwuKCIrTjMrIikiKSwiVEFHIjpuZXcgUmVnRXhwKCJeKCIrTjMucmVwbGFjZSgidyIsIncqIikrIikiKSwiQVRUUiI6bmV3IFJlZ0V4cCgiXiIrUDMpLCJQU0VVRE8iOm5ldyBSZWdFeHAoIl4iK1EzKSwiQ0hJTEQiOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTTMrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK00zKyIqKD86KFsrLV18KSIrTTMrIiooXFxkKyl8KSkiK00zKyIqXFwpfCkiLCJpIiksImJvb2wiOm5ldyBSZWdFeHAoIl4oPzoiK0wzKyIpJCIsImkiKSwibmVlZHNDb250ZXh0IjpuZXcgUmVnRXhwKCJeIitNMysiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIitNMysiKigoPzotXFxkKT9cXGQqKSIrTTMrIipcXCl8KSg/PVteLV18JCkiLCJpIil9LFgzPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWTM9L15oXGQkL2ksWjM9L15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLEs9L14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLywkMz0vWyt+XS8sXzM9Lyd8XFwvZyxhND1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK00zKyI/fCgiK00zKyIpfC4pIiwiaWciKSxiND1mdW5jdGlvbihfLGEsYil7dmFyIGo9IjB4IithLTB4MTAwMDA7cmV0dXJuIGohPT1qfHxiP2E6ajwwP1N0cmluZy5mcm9tQ2hhckNvZGUoaisweDEwMDAwKTpTdHJpbmcuZnJvbUNoYXJDb2RlKGo+PjEwfDB4RDgwMCxqJjB4M0ZGfDB4REMwMCl9O3RyeXtoLmFwcGx5KChJMz1mLmNhbGwoQTMuY2hpbGROb2RlcykpLEEzLmNoaWxkTm9kZXMpO0kzW0EzLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlKXtoPXthcHBseTpJMy5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtLMy5hcHBseShhLGYuY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGo9YS5sZW5ndGgsaT0wO3doaWxlKChhW2orK109YltpKytdKSl7fWEubGVuZ3RoPWotMX19fWZ1bmN0aW9uIFMoYSxiLGosXyl7dmFyIHU0LHY0LG0sdzQsaSx4NCx5NCx6NCxBNCxCNDtpZigoYj9iLm93bmVyRG9jdW1lbnR8fGI6QTMpIT09Sil7dDMoYil9Yj1ifHxKO2o9anx8W107aWYoIWF8fHR5cGVvZiBhIT09InN0cmluZyIpe3JldHVybiBqfWlmKCh3ND1iLm5vZGVUeXBlKSE9PTEmJnc0IT09OSl7cmV0dXJuW119aWYodTMmJiFfKXtpZigodTQ9Sy5leGVjKGEpKSl7aWYoKG09dTRbMV0pKXtpZih3ND09PTkpe3Y0PWIuZ2V0RWxlbWVudEJ5SWQobSk7aWYodjQmJnY0LnBhcmVudE5vZGUpe2lmKHY0LmlkPT09bSl7ai5wdXNoKHY0KTtyZXR1cm4gan19ZWxzZXtyZXR1cm4gan19ZWxzZXtpZihiLm93bmVyRG9jdW1lbnQmJih2ND1iLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobSkpJiZ5MyhiLHY0KSYmdjQuaWQ9PT1tKXtqLnB1c2godjQpO3JldHVybiBqfX19ZWxzZSBpZih1NFsyXSl7aC5hcHBseShqLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpO3JldHVybiBqfWVsc2UgaWYoKG09dTRbM10pJiZ4LmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSl7aC5hcHBseShqLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShtKSk7cmV0dXJuIGp9fWlmKHgucXNhJiYoIXYzfHwhdjMudGVzdChhKSkpe3o0PXk0PXozO0E0PWI7QjQ9dzQ9PT05JiZhO2lmKHc0PT09MSYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09Im9iamVjdCIpe3g0PXQoYSk7aWYoKHk0PWIuZ2V0QXR0cmlidXRlKCJpZCIpKSl7ejQ9eTQucmVwbGFjZShfMywiXFwkJiIpfWVsc2V7Yi5zZXRBdHRyaWJ1dGUoImlkIix6NCl9ejQ9IltpZD0nIit6NCsiJ10gIjtpPXg0Lmxlbmd0aDt3aGlsZShpLS0pe3g0W2ldPXo0K200KHg0W2ldKX1BND0kMy50ZXN0KGEpJiZrNChiLnBhcmVudE5vZGUpfHxiO0I0PXg0LmpvaW4oIiwiKX1pZihCNCl7dHJ5e2guYXBwbHkoaixBNC5xdWVyeVNlbGVjdG9yQWxsKEI0KSk7cmV0dXJuIGp9Y2F0Y2goQzQpe31maW5hbGx5e2lmKCF5NCl7Yi5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX19fXJldHVybiBzKGEucmVwbGFjZSh6LCIkMSIpLGIsaixfKX1mdW5jdGlvbiBjNCgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoaixtKXtpZihhLnB1c2goaisiICIpPmwuY2FjaGVMZW5ndGgpe2RlbGV0ZSBiW2Euc2hpZnQoKV19cmV0dXJuKGJbaisiICJdPW0pfXJldHVybiBifWZ1bmN0aW9uIGQ0KGEpe2FbejNdPXRydWU7cmV0dXJuIGF9ZnVuY3Rpb24gZTQoYSl7dmFyIGI9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGUpe3JldHVybiBmYWxzZX1maW5hbGx5e2lmKGIucGFyZW50Tm9kZSl7Yi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpfWI9bnVsbH19ZnVuY3Rpb24gZjQoYSxiKXt2YXIgSTM9YS5zcGxpdCgifCIpLGk9YS5sZW5ndGg7d2hpbGUoaS0tKXtsLmF0dHJIYW5kbGVbSTNbaV1dPWJ9fWZ1bmN0aW9uIGc0KGEsYil7dmFyIGo9YiYmYSxtPWomJmEubm9kZVR5cGU9PT0xJiZiLm5vZGVUeXBlPT09MSYmKH5iLnNvdXJjZUluZGV4fHxIMyktKH5hLnNvdXJjZUluZGV4fHxIMyk7aWYobSl7cmV0dXJuIG19aWYoail7d2hpbGUoKGo9ai5uZXh0U2libGluZykpe2lmKGo9PT1iKXtyZXR1cm4tMX19fXJldHVybiBhPzE6LTF9ZnVuY3Rpb24gaDQoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBqPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gaj09PSJpbnB1dCImJmIudHlwZT09PWF9fWZ1bmN0aW9uIGk0KGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgaj1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKGo9PT0iaW5wdXQifHxqPT09ImJ1dHRvbiIpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBqNChhKXtyZXR1cm4gZDQoZnVuY3Rpb24oYil7Yj0rYjtyZXR1cm4gZDQoZnVuY3Rpb24obSx4Myl7dmFyIGosXz1hKFtdLG0ubGVuZ3RoLGIpLGk9Xy5sZW5ndGg7d2hpbGUoaS0tKXtpZihtWyhqPV9baV0pXSl7bVtqXT0hKHgzW2pdPW1bal0pfX19KX0pfWZ1bmN0aW9uIGs0KGEpe3JldHVybiBhJiZ0eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PVgmJmF9eD1TLnN1cHBvcnQ9e307cD1TLmlzWE1MPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJihhLm93bmVyRG9jdW1lbnR8fGEpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gYj9iLm5vZGVOYW1lIT09IkhUTUwiOmZhbHNlfTt0Mz1TLnNldERvY3VtZW50PWZ1bmN0aW9uKGope3ZhciBfLHU0PWo/ai5vd25lckRvY3VtZW50fHxqOkEzLHY0PXU0LmRlZmF1bHRWaWV3O2lmKHU0PT09Snx8dTQubm9kZVR5cGUhPT05fHwhdTQuZG9jdW1lbnRFbGVtZW50KXtyZXR1cm4gSn1KPXU0O28zPXU0LmRvY3VtZW50RWxlbWVudDt1Mz0hcCh1NCk7aWYodjQmJnY0IT09djQudG9wKXtpZih2NC5hZGRFdmVudExpc3RlbmVyKXt2NC5hZGRFdmVudExpc3RlbmVyKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7dDMoKX0sZmFsc2UpfWVsc2UgaWYodjQuYXR0YWNoRXZlbnQpe3Y0LmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsZnVuY3Rpb24oKXt0MygpfSl9fXguYXR0cmlidXRlcz1lNChmdW5jdGlvbihhKXthLmNsYXNzTmFtZT0iaSI7cmV0dXJuIWEuZ2V0QXR0cmlidXRlKCJjbGFzc05hbWUiKX0pO3guZ2V0RWxlbWVudHNCeVRhZ05hbWU9ZTQoZnVuY3Rpb24oYSl7YS5hcHBlbmRDaGlsZCh1NC5jcmVhdGVDb21tZW50KCIiKSk7cmV0dXJuIWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGh9KTt4LmdldEVsZW1lbnRzQnlDbGFzc05hbWU9WjMudGVzdCh1NC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSYmZTQoZnVuY3Rpb24oYSl7YS5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J2EnPjwvZGl2PjxkaXYgY2xhc3M9J2EgaSc+PC9kaXY+IjthLmZpcnN0Q2hpbGQuY2xhc3NOYW1lPSJpIjtyZXR1cm4gYS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpIikubGVuZ3RoPT09Mn0pO3guZ2V0QnlJZD1lNChmdW5jdGlvbihhKXtvMy5hcHBlbmRDaGlsZChhKS5pZD16MztyZXR1cm4hdTQuZ2V0RWxlbWVudHNCeU5hbWV8fCF1NC5nZXRFbGVtZW50c0J5TmFtZSh6MykubGVuZ3RofSk7aWYoeC5nZXRCeUlkKXtsLmZpbmRbIklEIl09ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYi5nZXRFbGVtZW50QnlJZCE9PVgmJnUzKXt2YXIgbT1iLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBtJiZtLnBhcmVudE5vZGU/W21dOltdfX07bC5maWx0ZXJbIklEIl09ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGE0LGI0KTtyZXR1cm4gZnVuY3Rpb24obSl7cmV0dXJuIG0uZ2V0QXR0cmlidXRlKCJpZCIpPT09Yn19fWVsc2V7ZGVsZXRlIGwuZmluZFsiSUQiXTtsLmZpbHRlclsiSUQiXT1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYTQsYjQpO3JldHVybiBmdW5jdGlvbihtKXt2YXIgaj10eXBlb2YgbS5nZXRBdHRyaWJ1dGVOb2RlIT09WCYmbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBqJiZqLnZhbHVlPT09Yn19fWwuZmluZFsiVEFHIl09eC5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09WCl7cmV0dXJuIGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSl9fTpmdW5jdGlvbihhLGIpe3ZhciBtLHc0PVtdLGk9MCx4ND1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKGE9PT0iKiIpe3doaWxlKChtPXg0W2krK10pKXtpZihtLm5vZGVUeXBlPT09MSl7dzQucHVzaChtKX19cmV0dXJuIHc0fXJldHVybiB4NH07bC5maW5kWyJDTEFTUyJdPXguZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lIT09WCYmdTMpe3JldHVybiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSl9fTt3Mz1bXTt2Mz1bXTtpZigoeC5xc2E9WjMudGVzdCh1NC5xdWVyeVNlbGVjdG9yQWxsKSkpe2U0KGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPSI8c2VsZWN0IG1zYWxsb3djbGlwPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IjtpZihhLnF1ZXJ5U2VsZWN0b3JBbGwoIlttc2FsbG93Y2xpcF49JyddIikubGVuZ3RoKXt2My5wdXNoKCJbKl4kXT0iK00zKyIqKD86Jyd8XCJcIikiKX1pZighYS5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RoKXt2My5wdXNoKCJcXFsiK00zKyIqKD86dmFsdWV8IitMMysiKSIpfWlmKCFhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RoKXt2My5wdXNoKCI6Y2hlY2tlZCIpfX0pO2U0KGZ1bmN0aW9uKGEpe3ZhciBiPXU0LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJoaWRkZW4iKTthLmFwcGVuZENoaWxkKGIpLnNldEF0dHJpYnV0ZSgibmFtZSIsIkQiKTtpZihhLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoKXt2My5wdXNoKCJuYW1lIitNMysiKlsqXiR8IX5dPz0iKX1pZighYS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCl7djMucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKX1hLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKTt2My5wdXNoKCIsLio6Iil9KX1pZigoeC5tYXRjaGVzU2VsZWN0b3I9WjMudGVzdCgoeDM9bzMubWF0Y2hlc3x8bzMud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxvMy5tb3pNYXRjaGVzU2VsZWN0b3J8fG8zLm9NYXRjaGVzU2VsZWN0b3J8fG8zLm1zTWF0Y2hlc1NlbGVjdG9yKSkpKXtlNChmdW5jdGlvbihhKXt4LmRpc2Nvbm5lY3RlZE1hdGNoPXgzLmNhbGwoYSwiZGl2Iik7eDMuY2FsbChhLCJbcyE9JyddOngiKTt3My5wdXNoKCIhPSIsUTMpfSl9djM9djMubGVuZ3RoJiZuZXcgUmVnRXhwKHYzLmpvaW4oInwiKSk7dzM9dzMubGVuZ3RoJiZuZXcgUmVnRXhwKHczLmpvaW4oInwiKSk7Xz1aMy50ZXN0KG8zLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKTt5Mz1ffHxaMy50ZXN0KG8zLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBtPWEubm9kZVR5cGU9PT05P2EuZG9jdW1lbnRFbGVtZW50OmEsdzQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09dzR8fCEhKHc0JiZ3NC5ub2RlVHlwZT09PTEmJihtLmNvbnRhaW5zP20uY29udGFpbnModzQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24odzQpJjE2KSl9OmZ1bmN0aW9uKGEsYil7aWYoYil7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSl7aWYoYj09PWEpe3JldHVybiB0cnVlfX19cmV0dXJuIGZhbHNlfTtHMz1fP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpe3MzPXRydWU7cmV0dXJuIDB9dmFyIG09IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247aWYobSl7cmV0dXJuIG19bT0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MTtpZihtJjF8fCgheC5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1tKSl7aWYoYT09PXU0fHxhLm93bmVyRG9jdW1lbnQ9PT1BMyYmeTMoQTMsYSkpe3JldHVybi0xfWlmKGI9PT11NHx8Yi5vd25lckRvY3VtZW50PT09QTMmJnkzKEEzLGIpKXtyZXR1cm4gMX1yZXR1cm4gcjM/KGsuY2FsbChyMyxhKS1rLmNhbGwocjMsYikpOjB9cmV0dXJuIG0mND8tMToxfTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXtzMz10cnVlO3JldHVybiAwfXZhciBtLGk9MCx3ND1hLnBhcmVudE5vZGUseDQ9Yi5wYXJlbnROb2RlLGFwPVthXSxicD1bYl07aWYoIXc0fHwheDQpe3JldHVybiBhPT09dTQ/LTE6Yj09PXU0PzE6dzQ/LTE6eDQ/MTpyMz8oay5jYWxsKHIzLGEpLWsuY2FsbChyMyxiKSk6MH1lbHNlIGlmKHc0PT09eDQpe3JldHVybiBnNChhLGIpfW09YTt3aGlsZSgobT1tLnBhcmVudE5vZGUpKXthcC51bnNoaWZ0KG0pfW09Yjt3aGlsZSgobT1tLnBhcmVudE5vZGUpKXticC51bnNoaWZ0KG0pfXdoaWxlKGFwW2ldPT09YnBbaV0pe2krK31yZXR1cm4gaT9nNChhcFtpXSxicFtpXSk6YXBbaV09PT1BMz8tMTpicFtpXT09PUEzPzE6MH07cmV0dXJuIHU0fTtTLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyhhLG51bGwsbnVsbCxiKX07Uy5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PUope3QzKGEpfWI9Yi5yZXBsYWNlKFQzLCI9JyQxJ10iKTtpZih4Lm1hdGNoZXNTZWxlY3RvciYmdTMmJighdzN8fCF3My50ZXN0KGIpKSYmKCF2M3x8IXYzLnRlc3QoYikpKXt0cnl7dmFyIGo9eDMuY2FsbChhLGIpO2lmKGp8fHguZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJmEuZG9jdW1lbnQubm9kZVR5cGUhPT0xMSl7cmV0dXJuIGp9fWNhdGNoKGUpe319cmV0dXJuIFMoYixKLG51bGwsW2FdKS5sZW5ndGg+MH07Uy5jb250YWlucz1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09Sil7dDMoYSl9cmV0dXJuIHkzKGEsYil9O1MuYXR0cj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09Sil7dDMoYSl9dmFyIGo9bC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sbT1qJiZ1LmNhbGwobC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/aihhLGIsIXUzKTp1bmRlZmluZWQ7cmV0dXJuIG0hPT11bmRlZmluZWQ/bTp4LmF0dHJpYnV0ZXN8fCF1Mz9hLmdldEF0dHJpYnV0ZShiKToobT1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZtLnNwZWNpZmllZD9tLnZhbHVlOm51bGx9O1MuZXJyb3I9ZnVuY3Rpb24obSl7dGhyb3cgbmV3IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK20pfTtTLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsbT1bXSxqPTAsaT0wO3MzPSF4LmRldGVjdER1cGxpY2F0ZXM7cjM9IXguc29ydFN0YWJsZSYmYS5zbGljZSgwKTthLnNvcnQoRzMpO2lmKHMzKXt3aGlsZSgoYj1hW2krK10pKXtpZihiPT09YVtpXSl7aj1tLnB1c2goaSl9fXdoaWxlKGotLSl7YS5zcGxpY2UobVtqXSwxKX19cjM9bnVsbDtyZXR1cm4gYX07bj1TLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsaj0iIixpPTAsbT1hLm5vZGVUeXBlO2lmKCFtKXt3aGlsZSgoYj1hW2krK10pKXtqKz1uKGIpfX1lbHNlIGlmKG09PT0xfHxtPT09OXx8bT09PTExKXtpZih0eXBlb2YgYS50ZXh0Q29udGVudD09PSJzdHJpbmciKXtyZXR1cm4gYS50ZXh0Q29udGVudH1lbHNle2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyl7ais9bihhKX19fWVsc2UgaWYobT09PTN8fG09PT00KXtyZXR1cm4gYS5ub2RlVmFsdWV9cmV0dXJuIGp9O2w9Uy5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpkNCxtYXRjaDpXMyxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDp0cnVlfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OnRydWV9LCJ+Ijp7ZGlyOiJwcmV2aW91c1NpYmxpbmcifX0scHJlRmlsdGVyOnsiQVRUUiI6ZnVuY3Rpb24obSl7bVsxXT1tWzFdLnJlcGxhY2UoYTQsYjQpO21bM109KG1bM118fG1bNF18fG1bNV18fCIiKS5yZXBsYWNlKGE0LGI0KTtpZihtWzJdPT09In49Iil7bVszXT0iICIrbVszXSsiICJ9cmV0dXJuIG0uc2xpY2UoMCw0KX0sIkNISUxEIjpmdW5jdGlvbihtKXttWzFdPW1bMV0udG9Mb3dlckNhc2UoKTtpZihtWzFdLnNsaWNlKDAsMyk9PT0ibnRoIil7aWYoIW1bM10pe1MuZXJyb3IobVswXSl9bVs0XT0rKG1bNF0/bVs1XSsobVs2XXx8MSk6MioobVszXT09PSJldmVuInx8bVszXT09PSJvZGQiKSk7bVs1XT0rKChtWzddK21bOF0pfHxtWzNdPT09Im9kZCIpfWVsc2UgaWYobVszXSl7Uy5lcnJvcihtWzBdKX1yZXR1cm4gbX0sIlBTRVVETyI6ZnVuY3Rpb24obSl7dmFyIGEsYj0hbVs2XSYmbVsyXTtpZihXM1siQ0hJTEQiXS50ZXN0KG1bMF0pKXtyZXR1cm4gbnVsbH1pZihtWzNdKXttWzJdPW1bNF18fG1bNV18fCIifWVsc2UgaWYoYiYmVTMudGVzdChiKSYmKGE9dChiLHRydWUpKSYmKGE9Yi5pbmRleE9mKCIpIixiLmxlbmd0aC1hKS1iLmxlbmd0aCkpe21bMF09bVswXS5zbGljZSgwLGEpO21bMl09Yi5zbGljZSgwLGEpfXJldHVybiBtLnNsaWNlKDAsMyl9fSxmaWx0ZXI6eyJUQUciOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShhNCxiNCkudG9Mb3dlckNhc2UoKTtyZXR1cm4gYT09PSIqIj9mdW5jdGlvbigpe3JldHVybiB0cnVlfTpmdW5jdGlvbihqKXtyZXR1cm4gai5ub2RlTmFtZSYmai5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LCJDTEFTUyI6ZnVuY3Rpb24oYSl7dmFyIGI9RDNbYSsiICJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKCIoXnwiK00zKyIpIithKyIoIitNMysifCQpIikpJiZEMyhhLGZ1bmN0aW9uKGope3JldHVybiBiLnRlc3QodHlwZW9mIGouY2xhc3NOYW1lPT09InN0cmluZyImJmouY2xhc3NOYW1lfHx0eXBlb2Ygai5nZXRBdHRyaWJ1dGUhPT1YJiZqLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LCJBVFRSIjpmdW5jdGlvbihhLGIsail7cmV0dXJuIGZ1bmN0aW9uKG0pe3ZhciBfPVMuYXR0cihtLGEpO2lmKF89PW51bGwpe3JldHVybiBiPT09IiE9In1pZighYil7cmV0dXJuIHRydWV9Xys9IiI7cmV0dXJuIGI9PT0iPSI/Xz09PWo6Yj09PSIhPSI/XyE9PWo6Yj09PSJePSI/aiYmXy5pbmRleE9mKGopPT09MDpiPT09Iio9Ij9qJiZfLmluZGV4T2Yoaik+LTE6Yj09PSIkPSI/aiYmXy5zbGljZSgtai5sZW5ndGgpPT09ajpiPT09In49Ij8oIiAiK18rIiAiKS5pbmRleE9mKGopPi0xOmI9PT0ifD0iP189PT1qfHxfLnNsaWNlKDAsai5sZW5ndGgrMSk9PT1qKyItIjpmYWxzZX19LCJDSElMRCI6ZnVuY3Rpb24oYSxiLGosbSxfKXt2YXIgdTQ9YS5zbGljZSgwLDMpIT09Im50aCIsdjQ9YS5zbGljZSgtNCkhPT0ibGFzdCIsdzQ9Yj09PSJvZi10eXBlIjtyZXR1cm4gbT09PTEmJl89PT0wP2Z1bmN0aW9uKHg0KXtyZXR1cm4hIXg0LnBhcmVudE5vZGV9OmZ1bmN0aW9uKHg0LHk0LHo0KXt2YXIgQTQsQjQsQzQsRDQsRTQsRjQsRzQ9dTQhPT12ND8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLEg0PXg0LnBhcmVudE5vZGUsSTQ9dzQmJng0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksSjQ9IXo0JiYhdzQ7aWYoSDQpe2lmKHU0KXt3aGlsZShHNCl7QzQ9eDQ7d2hpbGUoKEM0PUM0W0c0XSkpe2lmKHc0P0M0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1JNDpDNC5ub2RlVHlwZT09PTEpe3JldHVybiBmYWxzZX19RjQ9RzQ9YT09PSJvbmx5IiYmIUY0JiYibmV4dFNpYmxpbmcifXJldHVybiB0cnVlfUY0PVt2ND9INC5maXJzdENoaWxkOkg0Lmxhc3RDaGlsZF07aWYodjQmJko0KXtCND1INFt6M118fChINFt6M109e30pO0E0PUI0W2FdfHxbXTtFND1BNFswXT09PUIzJiZBNFsxXTtEND1BNFswXT09PUIzJiZBNFsyXTtDND1FNCYmSDQuY2hpbGROb2Rlc1tFNF07d2hpbGUoKEM0PSsrRTQmJkM0JiZDNFtHNF18fChEND1FND0wKXx8RjQucG9wKCkpKXtpZihDNC5ub2RlVHlwZT09PTEmJisrRDQmJkM0PT09eDQpe0I0W2FdPVtCMyxFNCxENF07YnJlYWt9fX1lbHNlIGlmKEo0JiYoQTQ9KHg0W3ozXXx8KHg0W3ozXT17fSkpW2FdKSYmQTRbMF09PT1CMyl7RDQ9QTRbMV19ZWxzZXt3aGlsZSgoQzQ9KytFNCYmQzQmJkM0W0c0XXx8KEQ0PUU0PTApfHxGNC5wb3AoKSkpe2lmKCh3ND9DNC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09STQ6QzQubm9kZVR5cGU9PT0xKSYmKytENCl7aWYoSjQpeyhDNFt6M118fChDNFt6M109e30pKVthXT1bQjMsRDRdfWlmKEM0PT09eDQpe2JyZWFrfX19fUQ0LT1fO3JldHVybiBEND09PW18fChENCVtPT09MCYmRDQvbT49MCl9fX0sIlBTRVVETyI6ZnVuY3Rpb24oYSxiKXt2YXIgaixtPWwucHNldWRvc1thXXx8bC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fFMuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIithKTtpZihtW3ozXSl7cmV0dXJuIG0oYil9aWYobS5sZW5ndGg+MSl7aj1bYSxhLCIiLGJdO3JldHVybiBsLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoYS50b0xvd2VyQ2FzZSgpKT9kNChmdW5jdGlvbihfLHgzKXt2YXIgdTQsdjQ9bShfLGIpLGk9djQubGVuZ3RoO3doaWxlKGktLSl7dTQ9ay5jYWxsKF8sdjRbaV0pO19bdTRdPSEoeDNbdTRdPXY0W2ldKX19KTpmdW5jdGlvbihfKXtyZXR1cm4gbShfLDAsail9fXJldHVybiBtfX0scHNldWRvczp7Im5vdCI6ZDQoZnVuY3Rpb24oYSl7dmFyIGI9W10saj1bXSxtPXIoYS5yZXBsYWNlKHosIiQxIikpO3JldHVybiBtW3ozXT9kNChmdW5jdGlvbihfLHgzLHU0LHY0KXt2YXIgdzQseDQ9bShfLG51bGwsdjQsW10pLGk9Xy5sZW5ndGg7d2hpbGUoaS0tKXtpZigodzQ9eDRbaV0pKXtfW2ldPSEoeDNbaV09dzQpfX19KTpmdW5jdGlvbihfLHU0LHY0KXtiWzBdPV87bShiLG51bGwsdjQsaik7cmV0dXJuIWoucG9wKCl9fSksImhhcyI6ZDQoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBTKGEsYikubGVuZ3RoPjB9fSksImNvbnRhaW5zIjpkNChmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxuKGIpKS5pbmRleE9mKGEpPi0xfX0pLCJsYW5nIjpkNChmdW5jdGlvbihhKXtpZighVjMudGVzdChhfHwiIikpe1MuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrYSl9YT1hLnJlcGxhY2UoYTQsYjQpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBqO2Rve2lmKChqPXUzP2IubGFuZzpiLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8Yi5nZXRBdHRyaWJ1dGUoImxhbmciKSkpe2o9ai50b0xvd2VyQ2FzZSgpO3JldHVybiBqPT09YXx8ai5pbmRleE9mKGErIi0iKT09PTB9fXdoaWxlKChiPWIucGFyZW50Tm9kZSkmJmIubm9kZVR5cGU9PT0xKTtyZXR1cm4gZmFsc2V9fSksInRhcmdldCI6ZnVuY3Rpb24oYSl7dmFyIGI9dy5sb2NhdGlvbiYmdy5sb2NhdGlvbi5oYXNoO3JldHVybiBiJiZiLnNsaWNlKDEpPT09YS5pZH0sInJvb3QiOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bzN9LCJmb2N1cyI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1KLmFjdGl2ZUVsZW1lbnQmJighSi5oYXNGb2N1c3x8Si5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sImVuYWJsZWQiOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ZmFsc2V9LCJkaXNhYmxlZCI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT10cnVlfSwiY2hlY2tlZCI6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihiPT09ImlucHV0IiYmISFhLmNoZWNrZWQpfHwoYj09PSJvcHRpb24iJiYhIWEuc2VsZWN0ZWQpfSwic2VsZWN0ZWQiOmZ1bmN0aW9uKGEpe2lmKGEucGFyZW50Tm9kZSl7YS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXh9cmV0dXJuIGEuc2VsZWN0ZWQ9PT10cnVlfSwiZW1wdHkiOmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyl7aWYoYS5ub2RlVHlwZTw2KXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfSwicGFyZW50IjpmdW5jdGlvbihhKXtyZXR1cm4hbC5wc2V1ZG9zWyJlbXB0eSJdKGEpfSwiaGVhZGVyIjpmdW5jdGlvbihhKXtyZXR1cm4gWTMudGVzdChhLm5vZGVOYW1lKX0sImlucHV0IjpmdW5jdGlvbihhKXtyZXR1cm4gWDMudGVzdChhLm5vZGVOYW1lKX0sImJ1dHRvbiI6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiBiPT09ImlucHV0IiYmYS50eXBlPT09ImJ1dHRvbiJ8fGI9PT0iYnV0dG9uIn0sInRleHQiOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0iaW5wdXQiJiZhLnR5cGU9PT0idGV4dCImJigoYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKT09bnVsbHx8Yi50b0xvd2VyQ2FzZSgpPT09InRleHQiKX0sImZpcnN0IjpqNChmdW5jdGlvbigpe3JldHVyblswXX0pLCJsYXN0IjpqNChmdW5jdGlvbihtLGEpe3JldHVyblthLTFdfSksImVxIjpqNChmdW5jdGlvbihtLGEsYil7cmV0dXJuW2I8MD9iK2E6Yl19KSwiZXZlbiI6ajQoZnVuY3Rpb24obSxhKXt2YXIgaT0wO2Zvcig7aTxhO2krPTIpe20ucHVzaChpKX1yZXR1cm4gbX0pLCJvZGQiOmo0KGZ1bmN0aW9uKG0sYSl7dmFyIGk9MTtmb3IoO2k8YTtpKz0yKXttLnB1c2goaSl9cmV0dXJuIG19KSwibHQiOmo0KGZ1bmN0aW9uKG0sYSxiKXt2YXIgaT1iPDA/YithOmI7Zm9yKDstLWk+PTA7KXttLnB1c2goaSl9cmV0dXJuIG19KSwiZ3QiOmo0KGZ1bmN0aW9uKG0sYSxiKXt2YXIgaT1iPDA/YithOmI7Zm9yKDsrK2k8YTspe20ucHVzaChpKX1yZXR1cm4gbX0pfX07bC5wc2V1ZG9zWyJudGgiXT1sLnBzZXVkb3NbImVxIl07Zm9yKGkgaW57cmFkaW86dHJ1ZSxjaGVja2JveDp0cnVlLGZpbGU6dHJ1ZSxwYXNzd29yZDp0cnVlLGltYWdlOnRydWV9KXtsLnBzZXVkb3NbaV09aDQoaSl9Zm9yKGkgaW57c3VibWl0OnRydWUscmVzZXQ6dHJ1ZX0pe2wucHNldWRvc1tpXT1pNChpKX1mdW5jdGlvbiBsNCgpe31sNC5wcm90b3R5cGU9bC5maWx0ZXJzPWwucHNldWRvcztsLnNldEZpbHRlcnM9bmV3IGw0KCk7dD1TLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIG0saixfLHU0LHY0LHc0LHg0LHk0PUUzW2ErIiAiXTtpZih5NCl7cmV0dXJuIGI/MDp5NC5zbGljZSgwKX12ND1hO3c0PVtdO3g0PWwucHJlRmlsdGVyO3doaWxlKHY0KXtpZighbXx8KGo9UjMuZXhlYyh2NCkpKXtpZihqKXt2ND12NC5zbGljZShqWzBdLmxlbmd0aCl8fHY0fXc0LnB1c2goKF89W10pKX1tPWZhbHNlO2lmKChqPVMzLmV4ZWModjQpKSl7bT1qLnNoaWZ0KCk7Xy5wdXNoKHt2YWx1ZTptLHR5cGU6alswXS5yZXBsYWNlKHosIiAiKX0pO3Y0PXY0LnNsaWNlKG0ubGVuZ3RoKX1mb3IodTQgaW4gbC5maWx0ZXIpe2lmKChqPVczW3U0XS5leGVjKHY0KSkmJigheDRbdTRdfHwoaj14NFt1NF0oaikpKSl7bT1qLnNoaWZ0KCk7Xy5wdXNoKHt2YWx1ZTptLHR5cGU6dTQsbWF0Y2hlczpqfSk7djQ9djQuc2xpY2UobS5sZW5ndGgpfX1pZighbSl7YnJlYWt9fXJldHVybiBiP3Y0Lmxlbmd0aDp2ND9TLmVycm9yKGEpOkUzKGEsdzQpLnNsaWNlKDApfTtmdW5jdGlvbiBtNChhKXt2YXIgaT0wLGI9YS5sZW5ndGgsaj0iIjtmb3IoO2k8YjtpKyspe2orPWFbaV0udmFsdWV9cmV0dXJuIGp9ZnVuY3Rpb24gbjQobSxhLGIpe3ZhciBqPWEuZGlyLF89YiYmaj09PSJwYXJlbnROb2RlIix1ND1DMysrO3JldHVybiBhLmZpcnN0P2Z1bmN0aW9uKHY0LHc0LHg0KXt3aGlsZSgodjQ9djRbal0pKXtpZih2NC5ub2RlVHlwZT09PTF8fF8pe3JldHVybiBtKHY0LHc0LHg0KX19fTpmdW5jdGlvbih2NCx3NCx4NCl7dmFyIHk0LHo0LEE0PVtCMyx1NF07aWYoeDQpe3doaWxlKCh2ND12NFtqXSkpe2lmKHY0Lm5vZGVUeXBlPT09MXx8Xyl7aWYobSh2NCx3NCx4NCkpe3JldHVybiB0cnVlfX19fWVsc2V7d2hpbGUoKHY0PXY0W2pdKSl7aWYodjQubm9kZVR5cGU9PT0xfHxfKXt6ND12NFt6M118fCh2NFt6M109e30pO2lmKCh5ND16NFtqXSkmJnk0WzBdPT09QjMmJnk0WzFdPT09dTQpe3JldHVybihBNFsyXT15NFsyXSl9ZWxzZXt6NFtqXT1BNDtpZigoQTRbMl09bSh2NCx3NCx4NCkpKXtyZXR1cm4gdHJ1ZX19fX19fX1mdW5jdGlvbiBvNChtKXtyZXR1cm4gbS5sZW5ndGg+MT9mdW5jdGlvbihhLGIsail7dmFyIGk9bS5sZW5ndGg7d2hpbGUoaS0tKXtpZighbVtpXShhLGIsaikpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9Om1bMF19ZnVuY3Rpb24gcDQoYSxiLGope3ZhciBpPTAsbT1iLmxlbmd0aDtmb3IoO2k8bTtpKyspe1MoYSxiW2ldLGopfXJldHVybiBqfWZ1bmN0aW9uIHE0KGEsbSxiLGosXyl7dmFyIHU0LHY0PVtdLGk9MCx3ND1hLmxlbmd0aCx4ND1tIT1udWxsO2Zvcig7aTx3NDtpKyspe2lmKCh1ND1hW2ldKSl7aWYoIWJ8fGIodTQsaixfKSl7djQucHVzaCh1NCk7aWYoeDQpe20ucHVzaChpKX19fX1yZXR1cm4gdjR9ZnVuY3Rpb24gcjQoYSxiLG0saixfLHU0KXtpZihqJiYhalt6M10pe2o9cjQoail9aWYoXyYmIV9bejNdKXtfPXI0KF8sdTQpfXJldHVybiBkNChmdW5jdGlvbih2NCx3NCx4NCx5NCl7dmFyIHo0LGksQTQsQjQ9W10sQzQ9W10sRDQ9dzQubGVuZ3RoLEU0PXY0fHxwNChifHwiKiIseDQubm9kZVR5cGU/W3g0XTp4NCxbXSksRjQ9YSYmKHY0fHwhYik/cTQoRTQsQjQsYSx4NCx5NCk6RTQsRzQ9bT9ffHwodjQ/YTpENHx8aik/W106dzQ6RjQ7aWYobSl7bShGNCxHNCx4NCx5NCl9aWYoail7ejQ9cTQoRzQsQzQpO2ooejQsW10seDQseTQpO2k9ejQubGVuZ3RoO3doaWxlKGktLSl7aWYoKEE0PXo0W2ldKSl7RzRbQzRbaV1dPSEoRjRbQzRbaV1dPUE0KX19fWlmKHY0KXtpZihffHxhKXtpZihfKXt6ND1bXTtpPUc0Lmxlbmd0aDt3aGlsZShpLS0pe2lmKChBND1HNFtpXSkpe3o0LnB1c2goKEY0W2ldPUE0KSl9fV8obnVsbCwoRzQ9W10pLHo0LHk0KX1pPUc0Lmxlbmd0aDt3aGlsZShpLS0pe2lmKChBND1HNFtpXSkmJih6ND1fP2suY2FsbCh2NCxBNCk6QjRbaV0pPi0xKXt2NFt6NF09ISh3NFt6NF09QTQpfX19fWVsc2V7RzQ9cTQoRzQ9PT13ND9HNC5zcGxpY2UoRDQsRzQubGVuZ3RoKTpHNCk7aWYoXyl7XyhudWxsLHc0LEc0LHk0KX1lbHNle2guYXBwbHkodzQsRzQpfX19KX1mdW5jdGlvbiBzNChhKXt2YXIgYixtLGosXz1hLmxlbmd0aCx1ND1sLnJlbGF0aXZlW2FbMF0udHlwZV0sdjQ9dTR8fGwucmVsYXRpdmVbIiAiXSxpPXU0PzE6MCx3ND1uNChmdW5jdGlvbih6NCl7cmV0dXJuIHo0PT09Yn0sdjQsdHJ1ZSkseDQ9bjQoZnVuY3Rpb24oejQpe3JldHVybiBrLmNhbGwoYix6NCk+LTF9LHY0LHRydWUpLHk0PVtmdW5jdGlvbih6NCxBNCxCNCl7cmV0dXJuKCF1NCYmKEI0fHxBNCE9PXYpKXx8KChiPUE0KS5ub2RlVHlwZT93NCh6NCxBNCxCNCk6eDQoejQsQTQsQjQpKX1dO2Zvcig7aTxfO2krKyl7aWYoKG09bC5yZWxhdGl2ZVthW2ldLnR5cGVdKSl7eTQ9W240KG80KHk0KSxtKV19ZWxzZXttPWwuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpO2lmKG1bejNdKXtqPSsraTtmb3IoO2o8XztqKyspe2lmKGwucmVsYXRpdmVbYVtqXS50eXBlXSl7YnJlYWt9fXJldHVybiByNChpPjEmJm80KHk0KSxpPjEmJm00KGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6YVtpLTJdLnR5cGU9PT0iICI/IioiOiIifSkpLnJlcGxhY2UoeiwiJDEiKSxtLGk8aiYmczQoYS5zbGljZShpLGopKSxqPF8mJnM0KChhPWEuc2xpY2UoaikpKSxqPF8mJm00KGEpKX15NC5wdXNoKG0pfX1yZXR1cm4gbzQoeTQpfWZ1bmN0aW9uIHQ0KGEsYil7dmFyIG09Yi5sZW5ndGg+MCxfPWEubGVuZ3RoPjAsdTQ9ZnVuY3Rpb24odjQsdzQseDQseTQsejQpe3ZhciBBNCxqLEI0LEM0PTAsaT0iMCIsRDQ9djQmJltdLEU0PVtdLEY0PXYsRzQ9djR8fF8mJmwuZmluZFsiVEFHIl0oIioiLHo0KSxIND0oQjMrPUY0PT1udWxsPzE6TWF0aC5yYW5kb20oKXx8MC4xKSxJND1HNC5sZW5ndGg7aWYoejQpe3Y9dzQhPT1KJiZ3NH1mb3IoO2khPT1JNCYmKEE0PUc0W2ldKSE9bnVsbDtpKyspe2lmKF8mJkE0KXtqPTA7d2hpbGUoKEI0PWFbaisrXSkpe2lmKEI0KEE0LHc0LHg0KSl7eTQucHVzaChBNCk7YnJlYWt9fWlmKHo0KXtCMz1INH19aWYobSl7aWYoKEE0PSFCNCYmQTQpKXtDNC0tfWlmKHY0KXtENC5wdXNoKEE0KX19fUM0Kz1pO2lmKG0mJmkhPT1DNCl7aj0wO3doaWxlKChCND1iW2orK10pKXtCNChENCxFNCx3NCx4NCl9aWYodjQpe2lmKEM0PjApe3doaWxlKGktLSl7aWYoIShENFtpXXx8RTRbaV0pKXtFNFtpXT1KMy5jYWxsKHk0KX19fUU0PXE0KEU0KX1oLmFwcGx5KHk0LEU0KTtpZih6NCYmIXY0JiZFNC5sZW5ndGg+MCYmKEM0K2IubGVuZ3RoKT4xKXtTLnVuaXF1ZVNvcnQoeTQpfX1pZih6NCl7QjM9SDQ7dj1GNH1yZXR1cm4gRDR9O3JldHVybiBtP2Q0KHU0KTp1NH1yPVMuY29tcGlsZT1mdW5jdGlvbihhLG0pe3ZhciBpLGI9W10saj1bXSxfPUYzW2ErIiAiXTtpZighXyl7aWYoIW0pe209dChhKX1pPW0ubGVuZ3RoO3doaWxlKGktLSl7Xz1zNChtW2ldKTtpZihfW3ozXSl7Yi5wdXNoKF8pfWVsc2V7ai5wdXNoKF8pfX1fPUYzKGEsdDQoaixiKSk7Xy5zZWxlY3Rvcj1hfXJldHVybiBffTtzPVMuc2VsZWN0PWZ1bmN0aW9uKGEsYixqLG0pe3ZhciBpLF8sdTQsdjQsdzQseDQ9dHlwZW9mIGE9PT0iZnVuY3Rpb24iJiZhLHk0PSFtJiZ0KChhPXg0LnNlbGVjdG9yfHxhKSk7aj1qfHxbXTtpZih5NC5sZW5ndGg9PT0xKXtfPXk0WzBdPXk0WzBdLnNsaWNlKDApO2lmKF8ubGVuZ3RoPjImJih1ND1fWzBdKS50eXBlPT09IklEIiYmeC5nZXRCeUlkJiZiLm5vZGVUeXBlPT09OSYmdTMmJmwucmVsYXRpdmVbX1sxXS50eXBlXSl7Yj0obC5maW5kWyJJRCJdKHU0Lm1hdGNoZXNbMF0ucmVwbGFjZShhNCxiNCksYil8fFtdKVswXTtpZighYil7cmV0dXJuIGp9ZWxzZSBpZih4NCl7Yj1iLnBhcmVudE5vZGV9YT1hLnNsaWNlKF8uc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWk9VzNbIm5lZWRzQ29udGV4dCJdLnRlc3QoYSk/MDpfLmxlbmd0aDt3aGlsZShpLS0pe3U0PV9baV07aWYobC5yZWxhdGl2ZVsodjQ9dTQudHlwZSldKXticmVha31pZigodzQ9bC5maW5kW3Y0XSkpe2lmKChtPXc0KHU0Lm1hdGNoZXNbMF0ucmVwbGFjZShhNCxiNCksJDMudGVzdChfWzBdLnR5cGUpJiZrNChiLnBhcmVudE5vZGUpfHxiKSkpe18uc3BsaWNlKGksMSk7YT1tLmxlbmd0aCYmbTQoXyk7aWYoIWEpe2guYXBwbHkoaixtKTtyZXR1cm4gan1icmVha319fX0oeDR8fHIoYSx5NCkpKG0sYiwhdTMsaiwkMy50ZXN0KGEpJiZrNChiLnBhcmVudE5vZGUpfHxiKTtyZXR1cm4gan07eC5zb3J0U3RhYmxlPXozLnNwbGl0KCIiKS5zb3J0KEczKS5qb2luKCIiKT09PXozO3guZGV0ZWN0RHVwbGljYXRlcz0hIXMzO3QzKCk7eC5zb3J0RGV0YWNoZWQ9ZTQoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oSi5jcmVhdGVFbGVtZW50KCJkaXYiKSkmMX0pO2lmKCFlNChmdW5jdGlvbihhKXthLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiI7cmV0dXJuIGEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKT09PSIjIn0pKXtmNCgidHlwZXxocmVmfGhlaWdodHx3aWR0aCIsZnVuY3Rpb24oYSxiLHApe2lmKCFwKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoYixiLnRvTG93ZXJDYXNlKCk9PT0idHlwZSI/MToyKX19KX1pZigheC5hdHRyaWJ1dGVzfHwhZTQoZnVuY3Rpb24oYSl7YS5pbm5lckhUTUw9IjxpbnB1dC8+IjthLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIiIpO3JldHVybiBhLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPT09IiJ9KSl7ZjQoInZhbHVlIixmdW5jdGlvbihhLGIscCl7aWYoIXAmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJpbnB1dCIpe3JldHVybiBhLmRlZmF1bHRWYWx1ZX19KX1pZighZTQoZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpPT1udWxsfSkpe2Y0KEwzLGZ1bmN0aW9uKGEsYixwKXt2YXIgajtpZighcCl7cmV0dXJuIGFbYl09PT10cnVlP2IudG9Mb3dlckNhc2UoKTooaj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZqLnNwZWNpZmllZD9qLnZhbHVlOm51bGx9fSl9cmV0dXJuIFN9KSh3KTtRLmZpbmQ9UztRLmV4cHI9Uy5zZWxlY3RvcnM7US5leHByWyI6Il09US5leHByLnBzZXVkb3M7US51bmlxdWU9Uy51bmlxdWVTb3J0O1EudGV4dD1TLmdldFRleHQ7US5pc1hNTERvYz1TLmlzWE1MO1EuY29udGFpbnM9Uy5jb250YWluczt2YXIgRT1RLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O3ZhciBGPSgvXjwoXHcrKVxzKlwvPz4oPzo8XC9cMT58KSQvKTt2YXIgRz0vXi5bXjojXFtcLixdKiQvO2Z1bmN0aW9uIEgoYSxiLG4pe2lmKFEuaXNGdW5jdGlvbihiKSl7cmV0dXJuIFEuZ3JlcChhLGZ1bmN0aW9uKGosaSl7cmV0dXJuISFiLmNhbGwoaixpLGopIT09bn0pfWlmKGIubm9kZVR5cGUpe3JldHVybiBRLmdyZXAoYSxmdW5jdGlvbihqKXtyZXR1cm4oaj09PWIpIT09bn0pfWlmKHR5cGVvZiBiPT09InN0cmluZyIpe2lmKEcudGVzdChiKSl7cmV0dXJuIFEuZmlsdGVyKGIsYSxuKX1iPVEuZmlsdGVyKGIsYSl9cmV0dXJuIFEuZ3JlcChhLGZ1bmN0aW9uKGope3JldHVybihRLmluQXJyYXkoaixiKT49MCkhPT1ufSl9US5maWx0ZXI9ZnVuY3Rpb24oYSxiLG4pe3ZhciBqPWJbMF07aWYobil7YT0iOm5vdCgiK2ErIikifXJldHVybiBiLmxlbmd0aD09PTEmJmoubm9kZVR5cGU9PT0xP1EuZmluZC5tYXRjaGVzU2VsZWN0b3IoaixhKT9bal06W106US5maW5kLm1hdGNoZXMoYSxRLmdyZXAoYixmdW5jdGlvbihqKXtyZXR1cm4gai5ub2RlVHlwZT09PTF9KSl9O1EuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKHMpe3ZhciBpLHI9W10sYT10aGlzLGw9YS5sZW5ndGg7aWYodHlwZW9mIHMhPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKFEocykuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGk9MDtpPGw7aSsrKXtpZihRLmNvbnRhaW5zKGFbaV0sdGhpcykpe3JldHVybiB0cnVlfX19KSl9Zm9yKGk9MDtpPGw7aSsrKXtRLmZpbmQocyxhW2ldLHIpfXI9dGhpcy5wdXNoU3RhY2sobD4xP1EudW5pcXVlKHIpOnIpO3Iuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yKyIgIitzOnM7cmV0dXJuIHJ9LGZpbHRlcjpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soSCh0aGlzLHN8fFtdLGZhbHNlKSl9LG5vdDpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soSCh0aGlzLHN8fFtdLHRydWUpKX0saXM6ZnVuY3Rpb24ocyl7cmV0dXJuISFIKHRoaXMsdHlwZW9mIHM9PT0ic3RyaW5nIiYmRS50ZXN0KHMpP1Eocyk6c3x8W10sZmFsc2UpLmxlbmd0aH19KTt2YXIgSSxKPXcuZG9jdW1lbnQsSz0vXig/OlxzKig8W1x3XFddKz4pW14+XSp8IyhbXHctXSopKSQvLEw9US5mbi5pbml0PWZ1bmN0aW9uKHMsYSl7dmFyIG0sYjtpZighcyl7cmV0dXJuIHRoaXN9aWYodHlwZW9mIHM9PT0ic3RyaW5nIil7aWYocy5jaGFyQXQoMCk9PT0iPCImJnMuY2hhckF0KHMubGVuZ3RoLTEpPT09Ij4iJiZzLmxlbmd0aD49Myl7bT1bbnVsbCxzLG51bGxdfWVsc2V7bT1LLmV4ZWMocyl9aWYobSYmKG1bMV18fCFhKSl7aWYobVsxXSl7YT1hIGluc3RhbmNlb2YgUT9hWzBdOmE7US5tZXJnZSh0aGlzLFEucGFyc2VIVE1MKG1bMV0sYSYmYS5ub2RlVHlwZT9hLm93bmVyRG9jdW1lbnR8fGE6Six0cnVlKSk7aWYoRi50ZXN0KG1bMV0pJiZRLmlzUGxhaW5PYmplY3QoYSkpe2ZvcihtIGluIGEpe2lmKFEuaXNGdW5jdGlvbih0aGlzW21dKSl7dGhpc1ttXShhW21dKX1lbHNle3RoaXMuYXR0cihtLGFbbV0pfX19cmV0dXJuIHRoaXN9ZWxzZXtiPUouZ2V0RWxlbWVudEJ5SWQobVsyXSk7aWYoYiYmYi5wYXJlbnROb2RlKXtpZihiLmlkIT09bVsyXSl7cmV0dXJuIEkuZmluZChzKX10aGlzLmxlbmd0aD0xO3RoaXNbMF09Yn10aGlzLmNvbnRleHQ9Sjt0aGlzLnNlbGVjdG9yPXM7cmV0dXJuIHRoaXN9fWVsc2UgaWYoIWF8fGEuanF1ZXJ5KXtyZXR1cm4oYXx8SSkuZmluZChzKX1lbHNle3JldHVybiB0aGlzLmNvbnN0cnVjdG9yKGEpLmZpbmQocyl9fWVsc2UgaWYocy5ub2RlVHlwZSl7dGhpcy5jb250ZXh0PXRoaXNbMF09czt0aGlzLmxlbmd0aD0xO3JldHVybiB0aGlzfWVsc2UgaWYoUS5pc0Z1bmN0aW9uKHMpKXtyZXR1cm4gdHlwZW9mIEkucmVhZHkhPT0idW5kZWZpbmVkIj9JLnJlYWR5KHMpOnMoUSl9aWYocy5zZWxlY3RvciE9PXVuZGVmaW5lZCl7dGhpcy5zZWxlY3Rvcj1zLnNlbGVjdG9yO3RoaXMuY29udGV4dD1zLmNvbnRleHR9cmV0dXJuIFEubWFrZUFycmF5KHMsdGhpcyl9O0wucHJvdG90eXBlPVEuZm47ST1RKEopO3ZhciBNPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLE49e2NoaWxkcmVuOnRydWUsY29udGVudHM6dHJ1ZSxuZXh0OnRydWUscHJldjp0cnVlfTtRLmV4dGVuZCh7ZGlyOmZ1bmN0aW9uKGEsYixqKXt2YXIgbT1bXSxsPWFbYl07d2hpbGUobCYmbC5ub2RlVHlwZSE9PTkmJihqPT09dW5kZWZpbmVkfHxsLm5vZGVUeXBlIT09MXx8IVEobCkuaXMoaikpKXtpZihsLm5vZGVUeXBlPT09MSl7bS5wdXNoKGwpfWw9bFtiXX1yZXR1cm4gbX0sc2libGluZzpmdW5jdGlvbihuLGEpe3ZhciByPVtdO2Zvcig7bjtuPW4ubmV4dFNpYmxpbmcpe2lmKG4ubm9kZVR5cGU9PT0xJiZuIT09YSl7ci5wdXNoKG4pfX1yZXR1cm4gcn19KTtRLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKHQpe3ZhciBpLGE9USh0LHRoaXMpLGw9YS5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGk9MDtpPGw7aSsrKXtpZihRLmNvbnRhaW5zKHRoaXMsYVtpXSkpe3JldHVybiB0cnVlfX19KX0sY2xvc2VzdDpmdW5jdGlvbihzLGEpe3ZhciBiLGk9MCxsPXRoaXMubGVuZ3RoLG09W10scD1FLnRlc3Qocyl8fHR5cGVvZiBzIT09InN0cmluZyI/UShzLGF8fHRoaXMuY29udGV4dCk6MDtmb3IoO2k8bDtpKyspe2ZvcihiPXRoaXNbaV07YiYmYiE9PWE7Yj1iLnBhcmVudE5vZGUpe2lmKGIubm9kZVR5cGU8MTEmJihwP3AuaW5kZXgoYik+LTE6Yi5ub2RlVHlwZT09PTEmJlEuZmluZC5tYXRjaGVzU2VsZWN0b3IoYixzKSkpe20ucHVzaChiKTticmVha319fXJldHVybiB0aGlzLnB1c2hTdGFjayhtLmxlbmd0aD4xP1EudW5pcXVlKG0pOm0pfSxpbmRleDpmdW5jdGlvbihhKXtpZighYSl7cmV0dXJuKHRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZSk/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9aWYodHlwZW9mIGE9PT0ic3RyaW5nIil7cmV0dXJuIFEuaW5BcnJheSh0aGlzWzBdLFEoYSkpfXJldHVybiBRLmluQXJyYXkoYS5qcXVlcnk/YVswXTphLHRoaXMpfSxhZGQ6ZnVuY3Rpb24ocyxhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUS51bmlxdWUoUS5tZXJnZSh0aGlzLmdldCgpLFEocyxhKSkpKX0sYWRkQmFjazpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5hZGQocz09bnVsbD90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihzKSl9fSk7ZnVuY3Rpb24gTyhhLGIpe2Rve2E9YVtiXX13aGlsZShhJiZhLm5vZGVUeXBlIT09MSk7cmV0dXJuIGF9US5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIHA9YS5wYXJlbnROb2RlO3JldHVybiBwJiZwLm5vZGVUeXBlIT09MTE/cDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBRLmRpcihhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGksYil7cmV0dXJuIFEuZGlyKGEsInBhcmVudE5vZGUiLGIpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBPKGEsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIE8oYSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIFEuZGlyKGEsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIFEuZGlyKGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxpLGIpe3JldHVybiBRLmRpcihhLCJuZXh0U2libGluZyIsYil9LHByZXZVbnRpbDpmdW5jdGlvbihhLGksYil7cmV0dXJuIFEuZGlyKGEsInByZXZpb3VzU2libGluZyIsYil9LHNpYmxpbmdzOmZ1bmN0aW9uKGEpe3JldHVybiBRLnNpYmxpbmcoKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiBRLnNpYmxpbmcoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIFEubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDpRLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihuLGEpe1EuZm5bbl09ZnVuY3Rpb24oYixzKXt2YXIgcj1RLm1hcCh0aGlzLGEsYik7aWYobi5zbGljZSgtNSkhPT0iVW50aWwiKXtzPWJ9aWYocyYmdHlwZW9mIHM9PT0ic3RyaW5nIil7cj1RLmZpbHRlcihzLHIpfWlmKHRoaXMubGVuZ3RoPjEpe2lmKCFOW25dKXtyPVEudW5pcXVlKHIpfWlmKE0udGVzdChuKSl7cj1yLnJldmVyc2UoKX19cmV0dXJuIHRoaXMucHVzaFN0YWNrKHIpfX0pO3ZhciBQPSgvXFMrL2cpO3ZhciBSPXt9O2Z1bmN0aW9uIFQoYSl7dmFyIGI9UlthXT17fTtRLmVhY2goYS5tYXRjaChQKXx8W10sZnVuY3Rpb24oXyxqKXtiW2pdPXRydWV9KTtyZXR1cm4gYn1RLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPXR5cGVvZiBhPT09InN0cmluZyI/KFJbYV18fFQoYSkpOlEuZXh0ZW5kKHt9LGEpO3ZhciBiLG0saixsLG4scCxyPVtdLHM9IWEub25jZSYmW10sdD1mdW5jdGlvbihfKXttPWEubWVtb3J5JiZfO2o9dHJ1ZTtuPXB8fDA7cD0wO2w9ci5sZW5ndGg7Yj10cnVlO2Zvcig7ciYmbjxsO24rKyl7aWYocltuXS5hcHBseShfWzBdLF9bMV0pPT09ZmFsc2UmJmEuc3RvcE9uRmFsc2Upe209ZmFsc2U7YnJlYWt9fWI9ZmFsc2U7aWYocil7aWYocyl7aWYocy5sZW5ndGgpe3Qocy5zaGlmdCgpKX19ZWxzZSBpZihtKXtyPVtdfWVsc2V7di5kaXNhYmxlKCl9fX0sdj17YWRkOmZ1bmN0aW9uKCl7aWYocil7dmFyIHIzPXIubGVuZ3RoOyhmdW5jdGlvbiBhZGQoczMpe1EuZWFjaChzMyxmdW5jdGlvbihfLHQzKXt2YXIgdTM9US50eXBlKHQzKTtpZih1Mz09PSJmdW5jdGlvbiIpe2lmKCFhLnVuaXF1ZXx8IXYuaGFzKHQzKSl7ci5wdXNoKHQzKX19ZWxzZSBpZih0MyYmdDMubGVuZ3RoJiZ1MyE9PSJzdHJpbmciKXthZGQodDMpfX0pfSkoYXJndW1lbnRzKTtpZihiKXtsPXIubGVuZ3RofWVsc2UgaWYobSl7cD1yMzt0KG0pfX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7aWYocil7US5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihfLHIzKXt2YXIgczM7d2hpbGUoKHMzPVEuaW5BcnJheShyMyxyLHMzKSk+LTEpe3Iuc3BsaWNlKHMzLDEpO2lmKGIpe2lmKHMzPD1sKXtsLS19aWYoczM8PW4pe24tLX19fX0pfXJldHVybiB0aGlzfSxoYXM6ZnVuY3Rpb24oXyl7cmV0dXJuIF8/US5pbkFycmF5KF8scik+LTE6ISEociYmci5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3I9W107bD0wO3JldHVybiB0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cj1zPW09dW5kZWZpbmVkO3JldHVybiB0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFyfSxsb2NrOmZ1bmN0aW9uKCl7cz11bmRlZmluZWQ7aWYoIW0pe3YuZGlzYWJsZSgpfXJldHVybiB0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hc30sZmlyZVdpdGg6ZnVuY3Rpb24oXyxyMyl7aWYociYmKCFqfHxzKSl7cjM9cjN8fFtdO3IzPVtfLHIzLnNsaWNlP3IzLnNsaWNlKCk6cjNdO2lmKGIpe3MucHVzaChyMyl9ZWxzZXt0KHIzKX19cmV0dXJuIHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXt2LmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWp9fTtyZXR1cm4gdn07US5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGEpe3ZhciB0PVtbInJlc29sdmUiLCJkb25lIixRLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVzb2x2ZWQiXSxbInJlamVjdCIsImZhaWwiLFEuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZWplY3RlZCJdLFsibm90aWZ5IiwicHJvZ3Jlc3MiLFEuQ2FsbGJhY2tzKCJtZW1vcnkiKV1dLHM9InBlbmRpbmciLHA9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHN9LGFsd2F5czpmdW5jdGlvbigpe2IuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKTtyZXR1cm4gdGhpc30sdGhlbjpmdW5jdGlvbigpe3ZhciBqPWFyZ3VtZW50cztyZXR1cm4gUS5EZWZlcnJlZChmdW5jdGlvbihuKXtRLmVhY2godCxmdW5jdGlvbihpLGwpe3ZhciBtPVEuaXNGdW5jdGlvbihqW2ldKSYmaltpXTtiW2xbMV1dKGZ1bmN0aW9uKCl7dmFyIHI9bSYmbS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYociYmUS5pc0Z1bmN0aW9uKHIucHJvbWlzZSkpe3IucHJvbWlzZSgpLmRvbmUobi5yZXNvbHZlKS5mYWlsKG4ucmVqZWN0KS5wcm9ncmVzcyhuLm5vdGlmeSl9ZWxzZXtuW2xbMF0rIldpdGgiXSh0aGlzPT09cD9uLnByb21pc2UoKTp0aGlzLG0/W3JdOmFyZ3VtZW50cyl9fSl9KTtqPW51bGx9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oail7cmV0dXJuIGohPW51bGw/US5leHRlbmQoaixwKTpwfX0sYj17fTtwLnBpcGU9cC50aGVuO1EuZWFjaCh0LGZ1bmN0aW9uKGksail7dmFyIGw9alsyXSxtPWpbM107cFtqWzFdXT1sLmFkZDtpZihtKXtsLmFkZChmdW5jdGlvbigpe3M9bX0sdFtpXjFdWzJdLmRpc2FibGUsdFsyXVsyXS5sb2NrKX1iW2pbMF1dPWZ1bmN0aW9uKCl7YltqWzBdKyJXaXRoIl0odGhpcz09PWI/cDp0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9O2JbalswXSsiV2l0aCJdPWwuZmlyZVdpdGh9KTtwLnByb21pc2UoYik7aWYoYSl7YS5jYWxsKGIsYil9cmV0dXJuIGJ9LHdoZW46ZnVuY3Rpb24ocyl7dmFyIGk9MCxyPWYuY2FsbChhcmd1bWVudHMpLGw9ci5sZW5ndGgsYT1sIT09MXx8KHMmJlEuaXNGdW5jdGlvbihzLnByb21pc2UpKT9sOjAsYj1hPT09MT9zOlEuRGVmZXJyZWQoKSxqPWZ1bmN0aW9uKGksdCx2KXtyZXR1cm4gZnVuY3Rpb24oXyl7dFtpXT10aGlzO3ZbaV09YXJndW1lbnRzLmxlbmd0aD4xP2YuY2FsbChhcmd1bWVudHMpOl87aWYodj09PXApe2Iubm90aWZ5V2l0aCh0LHYpfWVsc2UgaWYoISgtLWEpKXtiLnJlc29sdmVXaXRoKHQsdil9fX0scCxtLG47aWYobD4xKXtwPW5ldyBBcnJheShsKTttPW5ldyBBcnJheShsKTtuPW5ldyBBcnJheShsKTtmb3IoO2k8bDtpKyspe2lmKHJbaV0mJlEuaXNGdW5jdGlvbihyW2ldLnByb21pc2UpKXtyW2ldLnByb21pc2UoKS5kb25lKGooaSxuLHIpKS5mYWlsKGIucmVqZWN0KS5wcm9ncmVzcyhqKGksbSxwKSl9ZWxzZXstLWF9fX1pZighYSl7Yi5yZXNvbHZlV2l0aChuLHIpfXJldHVybiBiLnByb21pc2UoKX19KTt2YXIgVTtRLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe1EucmVhZHkucHJvbWlzZSgpLmRvbmUoYSk7cmV0dXJuIHRoaXN9O1EuZXh0ZW5kKHtpc1JlYWR5OmZhbHNlLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXtpZihhKXtRLnJlYWR5V2FpdCsrfWVsc2V7US5yZWFkeSh0cnVlKX19LHJlYWR5OmZ1bmN0aW9uKGEpe2lmKGE9PT10cnVlPy0tUS5yZWFkeVdhaXQ6US5pc1JlYWR5KXtyZXR1cm59aWYoIUouYm9keSl7cmV0dXJuIHNldFRpbWVvdXQoUS5yZWFkeSl9US5pc1JlYWR5PXRydWU7aWYoYSE9PXRydWUmJi0tUS5yZWFkeVdhaXQ+MCl7cmV0dXJufVUucmVzb2x2ZVdpdGgoSixbUV0pO2lmKFEuZm4udHJpZ2dlckhhbmRsZXIpe1EoSikudHJpZ2dlckhhbmRsZXIoInJlYWR5Iik7UShKKS5vZmYoInJlYWR5Iil9fX0pO2Z1bmN0aW9uIFYoKXtpZihKLmFkZEV2ZW50TGlzdGVuZXIpe0oucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsVyxmYWxzZSk7dy5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixXLGZhbHNlKX1lbHNle0ouZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsVyk7dy5kZXRhY2hFdmVudCgib25sb2FkIixXKX19ZnVuY3Rpb24gVygpe2lmKEouYWRkRXZlbnRMaXN0ZW5lcnx8ZXZlbnQudHlwZT09PSJsb2FkInx8Si5yZWFkeVN0YXRlPT09ImNvbXBsZXRlIil7VigpO1EucmVhZHkoKX19US5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKGEpe2lmKCFVKXtVPVEuRGVmZXJyZWQoKTtpZihKLnJlYWR5U3RhdGU9PT0iY29tcGxldGUiKXtzZXRUaW1lb3V0KFEucmVhZHkpfWVsc2UgaWYoSi5hZGRFdmVudExpc3RlbmVyKXtKLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFcsZmFsc2UpO3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsVyxmYWxzZSl9ZWxzZXtKLmF0dGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLFcpO3cuYXR0YWNoRXZlbnQoIm9ubG9hZCIsVyk7dmFyIHQ9ZmFsc2U7dHJ5e3Q9dy5mcmFtZUVsZW1lbnQ9PW51bGwmJkouZG9jdW1lbnRFbGVtZW50fWNhdGNoKGUpe31pZih0JiZ0LmRvU2Nyb2xsKXsoZnVuY3Rpb24gZG9TY3JvbGxDaGVjaygpe2lmKCFRLmlzUmVhZHkpe3RyeXt0LmRvU2Nyb2xsKCJsZWZ0Iil9Y2F0Y2goZSl7cmV0dXJuIHNldFRpbWVvdXQoZG9TY3JvbGxDaGVjayw1MCl9VigpO1EucmVhZHkoKX19KSgpfX19cmV0dXJuIFUucHJvbWlzZShhKX07dmFyIFg9dHlwZW9mIHVuZGVmaW5lZDt2YXIgaTtmb3IoaSBpbiBRKHgpKXticmVha314Lm93bkxhc3Q9aSE9PSIwIjt4LmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9ZmFsc2U7UShmdW5jdGlvbigpe3ZhciB2LGEsYixqO2I9Si5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO2lmKCFifHwhYi5zdHlsZSl7cmV0dXJufWE9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTtqPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7ai5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCI7Yi5hcHBlbmRDaGlsZChqKS5hcHBlbmRDaGlsZChhKTtpZih0eXBlb2YgYS5zdHlsZS56b29tIT09WCl7YS5zdHlsZS5jc3NUZXh0PSJkaXNwbGF5OmlubGluZTttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjFweDt3aWR0aDoxcHg7em9vbToxIjt4LmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9dj1hLm9mZnNldFdpZHRoPT09MztpZih2KXtiLnN0eWxlLnpvb209MX19Yi5yZW1vdmVDaGlsZChqKX0pOyhmdW5jdGlvbigpe3ZhciBhPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoeC5kZWxldGVFeHBhbmRvPT1udWxsKXt4LmRlbGV0ZUV4cGFuZG89dHJ1ZTt0cnl7ZGVsZXRlIGEudGVzdH1jYXRjaChlKXt4LmRlbGV0ZUV4cGFuZG89ZmFsc2V9fWE9bnVsbH0pKCk7US5hY2NlcHREYXRhPWZ1bmN0aW9uKGEpe3ZhciBuPVEubm9EYXRhWyhhLm5vZGVOYW1lKyIgIikudG9Mb3dlckNhc2UoKV0sYj0rYS5ub2RlVHlwZXx8MTtyZXR1cm4gYiE9PTEmJmIhPT05P2ZhbHNlOiFufHxuIT09dHJ1ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKT09PW59O3ZhciBZPS9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sWj0vKFtBLVpdKS9nO2Z1bmN0aW9uICQoYSxiLGope2lmKGo9PT11bmRlZmluZWQmJmEubm9kZVR5cGU9PT0xKXt2YXIgbj0iZGF0YS0iK2IucmVwbGFjZShaLCItJDEiKS50b0xvd2VyQ2FzZSgpO2o9YS5nZXRBdHRyaWJ1dGUobik7aWYodHlwZW9mIGo9PT0ic3RyaW5nIil7dHJ5e2o9aj09PSJ0cnVlIj90cnVlOmo9PT0iZmFsc2UiP2ZhbHNlOmo9PT0ibnVsbCI/bnVsbDoraisiIj09PWo/K2o6WS50ZXN0KGopP1EucGFyc2VKU09OKGopOmp9Y2F0Y2goZSl7fVEuZGF0YShhLGIsail9ZWxzZXtqPXVuZGVmaW5lZH19cmV0dXJuIGp9ZnVuY3Rpb24gYTEoYSl7dmFyIG47Zm9yKG4gaW4gYSl7aWYobj09PSJkYXRhIiYmUS5pc0VtcHR5T2JqZWN0KGFbbl0pKXtjb250aW51ZX1pZihuIT09InRvSlNPTiIpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9ZnVuY3Rpb24gYjEoYSxuLGIscCl7aWYoIVEuYWNjZXB0RGF0YShhKSl7cmV0dXJufXZhciByLHQsaj1RLmV4cGFuZG8sbD1hLm5vZGVUeXBlLG09bD9RLmNhY2hlOmEscz1sP2Fbal06YVtqXSYmajtpZigoIXN8fCFtW3NdfHwoIXAmJiFtW3NdLmRhdGEpKSYmYj09PXVuZGVmaW5lZCYmdHlwZW9mIG49PT0ic3RyaW5nIil7cmV0dXJufWlmKCFzKXtpZihsKXtzPWFbal09ZC5wb3AoKXx8US5ndWlkKyt9ZWxzZXtzPWp9fWlmKCFtW3NdKXttW3NdPWw/e306e3RvSlNPTjpRLm5vb3B9fWlmKHR5cGVvZiBuPT09Im9iamVjdCJ8fHR5cGVvZiBuPT09ImZ1bmN0aW9uIil7aWYocCl7bVtzXT1RLmV4dGVuZChtW3NdLG4pfWVsc2V7bVtzXS5kYXRhPVEuZXh0ZW5kKG1bc10uZGF0YSxuKX19dD1tW3NdO2lmKCFwKXtpZighdC5kYXRhKXt0LmRhdGE9e319dD10LmRhdGF9aWYoYiE9PXVuZGVmaW5lZCl7dFtRLmNhbWVsQ2FzZShuKV09Yn1pZih0eXBlb2Ygbj09PSJzdHJpbmciKXtyPXRbbl07aWYocj09bnVsbCl7cj10W1EuY2FtZWxDYXNlKG4pXX19ZWxzZXtyPXR9cmV0dXJuIHJ9ZnVuY3Rpb24gYzEoYSxuLHApe2lmKCFRLmFjY2VwdERhdGEoYSkpe3JldHVybn12YXIgdCxpLGI9YS5ub2RlVHlwZSxqPWI/US5jYWNoZTphLGw9Yj9hW1EuZXhwYW5kb106US5leHBhbmRvO2lmKCFqW2xdKXtyZXR1cm59aWYobil7dD1wP2pbbF06altsXS5kYXRhO2lmKHQpe2lmKCFRLmlzQXJyYXkobikpe2lmKG4gaW4gdCl7bj1bbl19ZWxzZXtuPVEuY2FtZWxDYXNlKG4pO2lmKG4gaW4gdCl7bj1bbl19ZWxzZXtuPW4uc3BsaXQoIiAiKX19fWVsc2V7bj1uLmNvbmNhdChRLm1hcChuLFEuY2FtZWxDYXNlKSl9aT1uLmxlbmd0aDt3aGlsZShpLS0pe2RlbGV0ZSB0W25baV1dfWlmKHA/IWExKHQpOiFRLmlzRW1wdHlPYmplY3QodCkpe3JldHVybn19fWlmKCFwKXtkZWxldGUgaltsXS5kYXRhO2lmKCFhMShqW2xdKSl7cmV0dXJufX1pZihiKXtRLmNsZWFuRGF0YShbYV0sdHJ1ZSl9ZWxzZSBpZih4LmRlbGV0ZUV4cGFuZG98fGohPWoud2luZG93KXtkZWxldGUgaltsXX1lbHNle2pbbF09bnVsbH19US5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7ImFwcGxldCAiOnRydWUsImVtYmVkICI6dHJ1ZSwib2JqZWN0ICI6ImNsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMCJ9LGhhc0RhdGE6ZnVuY3Rpb24oYSl7YT1hLm5vZGVUeXBlP1EuY2FjaGVbYVtRLmV4cGFuZG9dXTphW1EuZXhwYW5kb107cmV0dXJuISFhJiYhYTEoYSl9LGRhdGE6ZnVuY3Rpb24oYSxuLGIpe3JldHVybiBiMShhLG4sYil9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSxuKXtyZXR1cm4gYzEoYSxuKX0sX2RhdGE6ZnVuY3Rpb24oYSxuLGIpe3JldHVybiBiMShhLG4sYix0cnVlKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxuKXtyZXR1cm4gYzEoYSxuLHRydWUpfX0pO1EuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsdil7dmFyIGksbixiLGo9dGhpc1swXSxsPWomJmouYXR0cmlidXRlcztpZihhPT09dW5kZWZpbmVkKXtpZih0aGlzLmxlbmd0aCl7Yj1RLmRhdGEoaik7aWYoai5ub2RlVHlwZT09PTEmJiFRLl9kYXRhKGosInBhcnNlZEF0dHJzIikpe2k9bC5sZW5ndGg7d2hpbGUoaS0tKXtpZihsW2ldKXtuPWxbaV0ubmFtZTtpZihuLmluZGV4T2YoImRhdGEtIik9PT0wKXtuPVEuY2FtZWxDYXNlKG4uc2xpY2UoNSkpOyQoaixuLGJbbl0pfX19US5fZGF0YShqLCJwYXJzZWRBdHRycyIsdHJ1ZSl9fXJldHVybiBifWlmKHR5cGVvZiBhPT09Im9iamVjdCIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtRLmRhdGEodGhpcyxhKX0pfXJldHVybiBhcmd1bWVudHMubGVuZ3RoPjE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5kYXRhKHRoaXMsYSx2KX0pOmo/JChqLGEsUS5kYXRhKGosYSkpOnVuZGVmaW5lZH0scmVtb3ZlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5yZW1vdmVEYXRhKHRoaXMsYSl9KX19KTtRLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSx0LGIpe3ZhciBqO2lmKGEpe3Q9KHR8fCJmeCIpKyJxdWV1ZSI7aj1RLl9kYXRhKGEsdCk7aWYoYil7aWYoIWp8fFEuaXNBcnJheShiKSl7aj1RLl9kYXRhKGEsdCxRLm1ha2VBcnJheShiKSl9ZWxzZXtqLnB1c2goYil9fXJldHVybiBqfHxbXX19LGRlcXVldWU6ZnVuY3Rpb24oYSx0KXt0PXR8fCJmeCI7dmFyIGI9US5xdWV1ZShhLHQpLHM9Yi5sZW5ndGgsaj1iLnNoaWZ0KCksbD1RLl9xdWV1ZUhvb2tzKGEsdCksbj1mdW5jdGlvbigpe1EuZGVxdWV1ZShhLHQpfTtpZihqPT09ImlucHJvZ3Jlc3MiKXtqPWIuc2hpZnQoKTtzLS19aWYoail7aWYodD09PSJmeCIpe2IudW5zaGlmdCgiaW5wcm9ncmVzcyIpfWRlbGV0ZSBsLnN0b3A7ai5jYWxsKGEsbixsKX1pZighcyYmbCl7bC5lbXB0eS5maXJlKCl9fSxfcXVldWVIb29rczpmdW5jdGlvbihhLHQpe3ZhciBiPXQrInF1ZXVlSG9va3MiO3JldHVybiBRLl9kYXRhKGEsYil8fFEuX2RhdGEoYSxiLHtlbXB0eTpRLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKS5hZGQoZnVuY3Rpb24oKXtRLl9yZW1vdmVEYXRhKGEsdCsicXVldWUiKTtRLl9yZW1vdmVEYXRhKGEsYil9KX0pfX0pO1EuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbih0LGEpe3ZhciBzPTI7aWYodHlwZW9mIHQhPT0ic3RyaW5nIil7YT10O3Q9ImZ4IjtzLS19aWYoYXJndW1lbnRzLmxlbmd0aDxzKXtyZXR1cm4gUS5xdWV1ZSh0aGlzWzBdLHQpfXJldHVybiBhPT09dW5kZWZpbmVkP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9US5xdWV1ZSh0aGlzLHQsYSk7US5fcXVldWVIb29rcyh0aGlzLHQpO2lmKHQ9PT0iZngiJiZiWzBdIT09ImlucHJvZ3Jlc3MiKXtRLmRlcXVldWUodGhpcyx0KX19KX0sZGVxdWV1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5kZXF1ZXVlKHRoaXMsdCl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5xdWV1ZSh0fHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbih0LGEpe3ZhciBiLGo9MSxsPVEuRGVmZXJyZWQoKSxtPXRoaXMsaT10aGlzLmxlbmd0aCxyPWZ1bmN0aW9uKCl7aWYoISgtLWopKXtsLnJlc29sdmVXaXRoKG0sW21dKX19O2lmKHR5cGVvZiB0IT09InN0cmluZyIpe2E9dDt0PXVuZGVmaW5lZH10PXR8fCJmeCI7d2hpbGUoaS0tKXtiPVEuX2RhdGEobVtpXSx0KyJxdWV1ZUhvb2tzIik7aWYoYiYmYi5lbXB0eSl7aisrO2IuZW1wdHkuYWRkKHIpfX1yKCk7cmV0dXJuIGwucHJvbWlzZShhKX19KTt2YXIgZDE9KC9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8pLnNvdXJjZTt2YXIgZTE9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXTt2YXIgZjE9ZnVuY3Rpb24oYSxiKXthPWJ8fGE7cmV0dXJuIFEuY3NzKGEsImRpc3BsYXkiKT09PSJub25lInx8IVEuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfTt2YXIgZzE9US5hY2Nlc3M9ZnVuY3Rpb24oYSxiLGosdixsLG0scil7dmFyIGk9MCxuPWEubGVuZ3RoLHA9aj09bnVsbDtpZihRLnR5cGUoaik9PT0ib2JqZWN0Iil7bD10cnVlO2ZvcihpIGluIGope1EuYWNjZXNzKGEsYixpLGpbaV0sdHJ1ZSxtLHIpfX1lbHNlIGlmKHYhPT11bmRlZmluZWQpe2w9dHJ1ZTtpZighUS5pc0Z1bmN0aW9uKHYpKXtyPXRydWV9aWYocCl7aWYocil7Yi5jYWxsKGEsdik7Yj1udWxsfWVsc2V7cD1iO2I9ZnVuY3Rpb24ocyxqLHYpe3JldHVybiBwLmNhbGwoUShzKSx2KX19fWlmKGIpe2Zvcig7aTxuO2krKyl7YihhW2ldLGoscj92OnYuY2FsbChhW2ldLGksYihhW2ldLGopKSl9fX1yZXR1cm4gbD9hOnA/Yi5jYWxsKGEpOm4/YihhWzBdLGopOm19O3ZhciBoMT0oL14oPzpjaGVja2JveHxyYWRpbykkL2kpOyhmdW5jdGlvbigpe3ZhciBhPUouY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiPUouY3JlYXRlRWxlbWVudCgiZGl2Iiksaj1KLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtiLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+Ijt4LmxlYWRpbmdXaGl0ZXNwYWNlPWIuZmlyc3RDaGlsZC5ub2RlVHlwZT09PTM7eC50Ym9keT0hYi5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGg7eC5odG1sU2VyaWFsaXplPSEhYi5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aDt4Lmh0bWw1Q2xvbmU9Si5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUodHJ1ZSkub3V0ZXJIVE1MIT09Ijw6bmF2PjwvOm5hdj4iO2EudHlwZT0iY2hlY2tib3giO2EuY2hlY2tlZD10cnVlO2ouYXBwZW5kQ2hpbGQoYSk7eC5hcHBlbmRDaGVja2VkPWEuY2hlY2tlZDtiLmlubmVySFRNTD0iPHRleHRhcmVhPng8L3RleHRhcmVhPiI7eC5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKHRydWUpLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7ai5hcHBlbmRDaGlsZChiKTtiLmlubmVySFRNTD0iPGlucHV0IHR5cGU9J3JhZGlvJyBjaGVja2VkPSdjaGVja2VkJyBuYW1lPSd0Jy8+Ijt4LmNoZWNrQ2xvbmU9Yi5jbG9uZU5vZGUodHJ1ZSkuY2xvbmVOb2RlKHRydWUpLmxhc3RDaGlsZC5jaGVja2VkO3gubm9DbG9uZUV2ZW50PXRydWU7aWYoYi5hdHRhY2hFdmVudCl7Yi5hdHRhY2hFdmVudCgib25jbGljayIsZnVuY3Rpb24oKXt4Lm5vQ2xvbmVFdmVudD1mYWxzZX0pO2IuY2xvbmVOb2RlKHRydWUpLmNsaWNrKCl9aWYoeC5kZWxldGVFeHBhbmRvPT1udWxsKXt4LmRlbGV0ZUV4cGFuZG89dHJ1ZTt0cnl7ZGVsZXRlIGIudGVzdH1jYXRjaChlKXt4LmRlbGV0ZUV4cGFuZG89ZmFsc2V9fX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGksYSxiPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKGkgaW57c3VibWl0OnRydWUsY2hhbmdlOnRydWUsZm9jdXNpbjp0cnVlfSl7YT0ib24iK2k7aWYoISh4W2krIkJ1YmJsZXMiXT1hIGluIHcpKXtiLnNldEF0dHJpYnV0ZShhLCJ0Iik7eFtpKyJCdWJibGVzIl09Yi5hdHRyaWJ1dGVzW2FdLmV4cGFuZG89PT1mYWxzZX19Yj1udWxsfSkoKTt2YXIgaTE9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLGoxPS9ea2V5LyxrMT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnUpfGNsaWNrLyxsMT0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sbTE9L14oW14uXSopKD86XC4oLispfCkkLztmdW5jdGlvbiBuMSgpe3JldHVybiB0cnVlfWZ1bmN0aW9uIG8xKCl7cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIHAxKCl7dHJ5e3JldHVybiBKLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goYSl7fX1RLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixqLGwscyl7dmFyIG0sbix0LHAscix2LF8scjMsczMsdDMsdTMsdjM9US5fZGF0YShhKTtpZighdjMpe3JldHVybn1pZihqLmhhbmRsZXIpe3A9ajtqPXAuaGFuZGxlcjtzPXAuc2VsZWN0b3J9aWYoIWouZ3VpZCl7ai5ndWlkPVEuZ3VpZCsrfWlmKCEobj12My5ldmVudHMpKXtuPXYzLmV2ZW50cz17fX1pZighKHY9djMuaGFuZGxlKSl7dj12My5oYW5kbGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBRIT09WCYmKCFlfHxRLmV2ZW50LnRyaWdnZXJlZCE9PWUudHlwZSk/US5ldmVudC5kaXNwYXRjaC5hcHBseSh2LmVsZW0sYXJndW1lbnRzKTp1bmRlZmluZWR9O3YuZWxlbT1hfWI9KGJ8fCIiKS5tYXRjaChQKXx8WyIiXTt0PWIubGVuZ3RoO3doaWxlKHQtLSl7bT1tMS5leGVjKGJbdF0pfHxbXTtzMz11Mz1tWzFdO3QzPShtWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCk7aWYoIXMzKXtjb250aW51ZX1yPVEuZXZlbnQuc3BlY2lhbFtzM118fHt9O3MzPShzP3IuZGVsZWdhdGVUeXBlOnIuYmluZFR5cGUpfHxzMztyPVEuZXZlbnQuc3BlY2lhbFtzM118fHt9O189US5leHRlbmQoe3R5cGU6czMsb3JpZ1R5cGU6dTMsZGF0YTpsLGhhbmRsZXI6aixndWlkOmouZ3VpZCxzZWxlY3RvcjpzLG5lZWRzQ29udGV4dDpzJiZRLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QocyksbmFtZXNwYWNlOnQzLmpvaW4oIi4iKX0scCk7aWYoIShyMz1uW3MzXSkpe3IzPW5bczNdPVtdO3IzLmRlbGVnYXRlQ291bnQ9MDtpZighci5zZXR1cHx8ci5zZXR1cC5jYWxsKGEsbCx0Myx2KT09PWZhbHNlKXtpZihhLmFkZEV2ZW50TGlzdGVuZXIpe2EuYWRkRXZlbnRMaXN0ZW5lcihzMyx2LGZhbHNlKX1lbHNlIGlmKGEuYXR0YWNoRXZlbnQpe2EuYXR0YWNoRXZlbnQoIm9uIitzMyx2KX19fWlmKHIuYWRkKXtyLmFkZC5jYWxsKGEsXyk7aWYoIV8uaGFuZGxlci5ndWlkKXtfLmhhbmRsZXIuZ3VpZD1qLmd1aWR9fWlmKHMpe3IzLnNwbGljZShyMy5kZWxlZ2F0ZUNvdW50KyssMCxfKX1lbHNle3IzLnB1c2goXyl9US5ldmVudC5nbG9iYWxbczNdPXRydWV9YT1udWxsfSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGwscyxtKXt2YXIgaixuLHAscix0LHYsXyxyMyxzMyx0Myx1Myx2Mz1RLmhhc0RhdGEoYSkmJlEuX2RhdGEoYSk7aWYoIXYzfHwhKHY9djMuZXZlbnRzKSl7cmV0dXJufWI9KGJ8fCIiKS5tYXRjaChQKXx8WyIiXTt0PWIubGVuZ3RoO3doaWxlKHQtLSl7cD1tMS5leGVjKGJbdF0pfHxbXTtzMz11Mz1wWzFdO3QzPShwWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCk7aWYoIXMzKXtmb3IoczMgaW4gdil7US5ldmVudC5yZW1vdmUoYSxzMytiW3RdLGwscyx0cnVlKX1jb250aW51ZX1fPVEuZXZlbnQuc3BlY2lhbFtzM118fHt9O3MzPShzP18uZGVsZWdhdGVUeXBlOl8uYmluZFR5cGUpfHxzMztyMz12W3MzXXx8W107cD1wWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIit0My5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTtyPWo9cjMubGVuZ3RoO3doaWxlKGotLSl7bj1yM1tqXTtpZigobXx8dTM9PT1uLm9yaWdUeXBlKSYmKCFsfHxsLmd1aWQ9PT1uLmd1aWQpJiYoIXB8fHAudGVzdChuLm5hbWVzcGFjZSkpJiYoIXN8fHM9PT1uLnNlbGVjdG9yfHxzPT09IioqIiYmbi5zZWxlY3Rvcikpe3IzLnNwbGljZShqLDEpO2lmKG4uc2VsZWN0b3Ipe3IzLmRlbGVnYXRlQ291bnQtLX1pZihfLnJlbW92ZSl7Xy5yZW1vdmUuY2FsbChhLG4pfX19aWYociYmIXIzLmxlbmd0aCl7aWYoIV8udGVhcmRvd258fF8udGVhcmRvd24uY2FsbChhLHQzLHYzLmhhbmRsZSk9PT1mYWxzZSl7US5yZW1vdmVFdmVudChhLHMzLHYzLmhhbmRsZSl9ZGVsZXRlIHZbczNdfX1pZihRLmlzRW1wdHlPYmplY3Qodikpe2RlbGV0ZSB2My5oYW5kbGU7US5fcmVtb3ZlRGF0YShhLCJldmVudHMiKX19LHRyaWdnZXI6ZnVuY3Rpb24oYSxiLGosbCl7dmFyIG0sbixwLHIscyx0LGksdj1banx8Sl0sXz11LmNhbGwoYSwidHlwZSIpP2EudHlwZTphLHIzPXUuY2FsbChhLCJuYW1lc3BhY2UiKT9hLm5hbWVzcGFjZS5zcGxpdCgiLiIpOltdO3A9dD1qPWp8fEo7aWYoai5ub2RlVHlwZT09PTN8fGoubm9kZVR5cGU9PT04KXtyZXR1cm59aWYobDEudGVzdChfK1EuZXZlbnQudHJpZ2dlcmVkKSl7cmV0dXJufWlmKF8uaW5kZXhPZigiLiIpPj0wKXtyMz1fLnNwbGl0KCIuIik7Xz1yMy5zaGlmdCgpO3IzLnNvcnQoKX1uPV8uaW5kZXhPZigiOiIpPDAmJiJvbiIrXzthPWFbUS5leHBhbmRvXT9hOm5ldyBRLkV2ZW50KF8sdHlwZW9mIGE9PT0ib2JqZWN0IiYmYSk7YS5pc1RyaWdnZXI9bD8yOjM7YS5uYW1lc3BhY2U9cjMuam9pbigiLiIpO2EubmFtZXNwYWNlX3JlPWEubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3IzLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGw7YS5yZXN1bHQ9dW5kZWZpbmVkO2lmKCFhLnRhcmdldCl7YS50YXJnZXQ9an1iPWI9PW51bGw/W2FdOlEubWFrZUFycmF5KGIsW2FdKTtzPVEuZXZlbnQuc3BlY2lhbFtfXXx8e307aWYoIWwmJnMudHJpZ2dlciYmcy50cmlnZ2VyLmFwcGx5KGosYik9PT1mYWxzZSl7cmV0dXJufWlmKCFsJiYhcy5ub0J1YmJsZSYmIVEuaXNXaW5kb3coaikpe3I9cy5kZWxlZ2F0ZVR5cGV8fF87aWYoIWwxLnRlc3QocitfKSl7cD1wLnBhcmVudE5vZGV9Zm9yKDtwO3A9cC5wYXJlbnROb2RlKXt2LnB1c2gocCk7dD1wfWlmKHQ9PT0oai5vd25lckRvY3VtZW50fHxKKSl7di5wdXNoKHQuZGVmYXVsdFZpZXd8fHQucGFyZW50V2luZG93fHx3KX19aT0wO3doaWxlKChwPXZbaSsrXSkmJiFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2EudHlwZT1pPjE/cjpzLmJpbmRUeXBlfHxfO209KFEuX2RhdGEocCwiZXZlbnRzIil8fHt9KVthLnR5cGVdJiZRLl9kYXRhKHAsImhhbmRsZSIpO2lmKG0pe20uYXBwbHkocCxiKX1tPW4mJnBbbl07aWYobSYmbS5hcHBseSYmUS5hY2NlcHREYXRhKHApKXthLnJlc3VsdD1tLmFwcGx5KHAsYik7aWYoYS5yZXN1bHQ9PT1mYWxzZSl7YS5wcmV2ZW50RGVmYXVsdCgpfX19YS50eXBlPV87aWYoIWwmJiFhLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtpZigoIXMuX2RlZmF1bHR8fHMuX2RlZmF1bHQuYXBwbHkodi5wb3AoKSxiKT09PWZhbHNlKSYmUS5hY2NlcHREYXRhKGopKXtpZihuJiZqW19dJiYhUS5pc1dpbmRvdyhqKSl7dD1qW25dO2lmKHQpe2pbbl09bnVsbH1RLmV2ZW50LnRyaWdnZXJlZD1fO3RyeXtqW19dKCl9Y2F0Y2goZSl7fVEuZXZlbnQudHJpZ2dlcmVkPXVuZGVmaW5lZDtpZih0KXtqW25dPXR9fX19cmV0dXJuIGEucmVzdWx0fSxkaXNwYXRjaDpmdW5jdGlvbihhKXthPVEuZXZlbnQuZml4KGEpO3ZhciBpLHIsYixtLGosbD1bXSxuPWYuY2FsbChhcmd1bWVudHMpLHA9KFEuX2RhdGEodGhpcywiZXZlbnRzIil8fHt9KVthLnR5cGVdfHxbXSxzPVEuZXZlbnQuc3BlY2lhbFthLnR5cGVdfHx7fTtuWzBdPWE7YS5kZWxlZ2F0ZVRhcmdldD10aGlzO2lmKHMucHJlRGlzcGF0Y2gmJnMucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGEpPT09ZmFsc2Upe3JldHVybn1sPVEuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGEscCk7aT0wO3doaWxlKChtPWxbaSsrXSkmJiFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2EuY3VycmVudFRhcmdldD1tLmVsZW07aj0wO3doaWxlKChiPW0uaGFuZGxlcnNbaisrXSkmJiFhLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpe2lmKCFhLm5hbWVzcGFjZV9yZXx8YS5uYW1lc3BhY2VfcmUudGVzdChiLm5hbWVzcGFjZSkpe2EuaGFuZGxlT2JqPWI7YS5kYXRhPWIuZGF0YTtyPSgoUS5ldmVudC5zcGVjaWFsW2Iub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxiLmhhbmRsZXIpLmFwcGx5KG0uZWxlbSxuKTtpZihyIT09dW5kZWZpbmVkKXtpZigoYS5yZXN1bHQ9cik9PT1mYWxzZSl7YS5wcmV2ZW50RGVmYXVsdCgpO2Euc3RvcFByb3BhZ2F0aW9uKCl9fX19fWlmKHMucG9zdERpc3BhdGNoKXtzLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSl9cmV0dXJuIGEucmVzdWx0fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBzLGosbSxpLGw9W10sbj1iLmRlbGVnYXRlQ291bnQscD1hLnRhcmdldDtpZihuJiZwLm5vZGVUeXBlJiYoIWEuYnV0dG9ufHxhLnR5cGUhPT0iY2xpY2siKSl7Zm9yKDtwIT10aGlzO3A9cC5wYXJlbnROb2RlfHx0aGlzKXtpZihwLm5vZGVUeXBlPT09MSYmKHAuZGlzYWJsZWQhPT10cnVlfHxhLnR5cGUhPT0iY2xpY2siKSl7bT1bXTtmb3IoaT0wO2k8bjtpKyspe2o9YltpXTtzPWouc2VsZWN0b3IrIiAiO2lmKG1bc109PT11bmRlZmluZWQpe21bc109ai5uZWVkc0NvbnRleHQ/UShzLHRoaXMpLmluZGV4KHApPj0wOlEuZmluZChzLHRoaXMsbnVsbCxbcF0pLmxlbmd0aH1pZihtW3NdKXttLnB1c2goail9fWlmKG0ubGVuZ3RoKXtsLnB1c2goe2VsZW06cCxoYW5kbGVyczptfSl9fX19aWYobjxiLmxlbmd0aCl7bC5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShuKX0pfXJldHVybiBsfSxmaXg6ZnVuY3Rpb24oYSl7aWYoYVtRLmV4cGFuZG9dKXtyZXR1cm4gYX12YXIgaSxwLGIsdD1hLnR5cGUsaj1hLGw9dGhpcy5maXhIb29rc1t0XTtpZighbCl7dGhpcy5maXhIb29rc1t0XT1sPWsxLnRlc3QodCk/dGhpcy5tb3VzZUhvb2tzOmoxLnRlc3QodCk/dGhpcy5rZXlIb29rczp7fX1iPWwucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQobC5wcm9wcyk6dGhpcy5wcm9wczthPW5ldyBRLkV2ZW50KGopO2k9Yi5sZW5ndGg7d2hpbGUoaS0tKXtwPWJbaV07YVtwXT1qW3BdfWlmKCFhLnRhcmdldCl7YS50YXJnZXQ9ai5zcmNFbGVtZW50fHxKfWlmKGEudGFyZ2V0Lm5vZGVUeXBlPT09Myl7YS50YXJnZXQ9YS50YXJnZXQucGFyZW50Tm9kZX1hLm1ldGFLZXk9ISFhLm1ldGFLZXk7cmV0dXJuIGwuZmlsdGVyP2wuZmlsdGVyKGEsaik6YX0scHJvcHM6ImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaCIuc3BsaXQoIiAiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6ImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGUiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7aWYoYS53aGljaD09bnVsbCl7YS53aGljaD1iLmNoYXJDb2RlIT1udWxsP2IuY2hhckNvZGU6Yi5rZXlDb2RlfXJldHVybiBhfX0sbW91c2VIb29rczp7cHJvcHM6ImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBmcm9tRWxlbWVudCBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgaixsLG0sbj1iLmJ1dHRvbixwPWIuZnJvbUVsZW1lbnQ7aWYoYS5wYWdlWD09bnVsbCYmYi5jbGllbnRYIT1udWxsKXtsPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fEo7bT1sLmRvY3VtZW50RWxlbWVudDtqPWwuYm9keTthLnBhZ2VYPWIuY2xpZW50WCsobSYmbS5zY3JvbGxMZWZ0fHxqJiZqLnNjcm9sbExlZnR8fDApLShtJiZtLmNsaWVudExlZnR8fGomJmouY2xpZW50TGVmdHx8MCk7YS5wYWdlWT1iLmNsaWVudFkrKG0mJm0uc2Nyb2xsVG9wfHxqJiZqLnNjcm9sbFRvcHx8MCktKG0mJm0uY2xpZW50VG9wfHxqJiZqLmNsaWVudFRvcHx8MCl9aWYoIWEucmVsYXRlZFRhcmdldCYmcCl7YS5yZWxhdGVkVGFyZ2V0PXA9PT1hLnRhcmdldD9iLnRvRWxlbWVudDpwfWlmKCFhLndoaWNoJiZuIT09dW5kZWZpbmVkKXthLndoaWNoPShuJjE/MToobiYyPzM6KG4mND8yOjApKSl9cmV0dXJuIGF9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTp0cnVlfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXMhPT1wMSgpJiZ0aGlzLmZvY3VzKXt0cnl7dGhpcy5mb2N1cygpO3JldHVybiBmYWxzZX1jYXRjaChlKXt9fX0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXM9PT1wMSgpJiZ0aGlzLmJsdXIpe3RoaXMuYmx1cigpO3JldHVybiBmYWxzZX19LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKFEubm9kZU5hbWUodGhpcywiaW5wdXQiKSYmdGhpcy50eXBlPT09ImNoZWNrYm94IiYmdGhpcy5jbGljayl7dGhpcy5jbGljaygpO3JldHVybiBmYWxzZX19LF9kZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiBRLm5vZGVOYW1lKGEudGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihhKXtpZihhLnJlc3VsdCE9PXVuZGVmaW5lZCYmYS5vcmlnaW5hbEV2ZW50KXthLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHR9fX19LHNpbXVsYXRlOmZ1bmN0aW9uKHQsYSxiLGope3ZhciBlPVEuZXh0ZW5kKG5ldyBRLkV2ZW50KCksYix7dHlwZTp0LGlzU2ltdWxhdGVkOnRydWUsb3JpZ2luYWxFdmVudDp7fX0pO2lmKGope1EuZXZlbnQudHJpZ2dlcihlLG51bGwsYSl9ZWxzZXtRLmV2ZW50LmRpc3BhdGNoLmNhbGwoYSxlKX1pZihlLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtiLnByZXZlbnREZWZhdWx0KCl9fX07US5yZW1vdmVFdmVudD1KLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSx0LGIpe2lmKGEucmVtb3ZlRXZlbnRMaXN0ZW5lcil7YS5yZW1vdmVFdmVudExpc3RlbmVyKHQsYixmYWxzZSl9fTpmdW5jdGlvbihhLHQsYil7dmFyIG49Im9uIit0O2lmKGEuZGV0YWNoRXZlbnQpe2lmKHR5cGVvZiBhW25dPT09WCl7YVtuXT1udWxsfWEuZGV0YWNoRXZlbnQobixiKX19O1EuRXZlbnQ9ZnVuY3Rpb24ocyxwKXtpZighKHRoaXMgaW5zdGFuY2VvZiBRLkV2ZW50KSl7cmV0dXJuIG5ldyBRLkV2ZW50KHMscCl9aWYocyYmcy50eXBlKXt0aGlzLm9yaWdpbmFsRXZlbnQ9czt0aGlzLnR5cGU9cy50eXBlO3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPXMuZGVmYXVsdFByZXZlbnRlZHx8cy5kZWZhdWx0UHJldmVudGVkPT09dW5kZWZpbmVkJiZzLnJldHVyblZhbHVlPT09ZmFsc2U/bjE6bzF9ZWxzZXt0aGlzLnR5cGU9c31pZihwKXtRLmV4dGVuZCh0aGlzLHApfXRoaXMudGltZVN0YW1wPXMmJnMudGltZVN0YW1wfHxRLm5vdygpO3RoaXNbUS5leHBhbmRvXT10cnVlfTtRLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOm8xLGlzUHJvcGFnYXRpb25TdG9wcGVkOm8xLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOm8xLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPW4xO2lmKCFlKXtyZXR1cm59aWYoZS5wcmV2ZW50RGVmYXVsdCl7ZS5wcmV2ZW50RGVmYXVsdCgpfWVsc2V7ZS5yZXR1cm5WYWx1ZT1mYWxzZX19LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPW4xO2lmKCFlKXtyZXR1cm59aWYoZS5zdG9wUHJvcGFnYXRpb24pe2Uuc3RvcFByb3BhZ2F0aW9uKCl9ZS5jYW5jZWxCdWJibGU9dHJ1ZX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9bjE7aWYoZSYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24pe2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9dGhpcy5zdG9wUHJvcGFnYXRpb24oKX19O1EuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtRLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGope3ZhciByLHQ9dGhpcyxsPWoucmVsYXRlZFRhcmdldCxtPWouaGFuZGxlT2JqO2lmKCFsfHwobCE9PXQmJiFRLmNvbnRhaW5zKHQsbCkpKXtqLnR5cGU9bS5vcmlnVHlwZTtyPW0uaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ai50eXBlPWJ9cmV0dXJuIHJ9fX0pO2lmKCF4LnN1Ym1pdEJ1YmJsZXMpe1EuZXZlbnQuc3BlY2lhbC5zdWJtaXQ9e3NldHVwOmZ1bmN0aW9uKCl7aWYoUS5ub2RlTmFtZSh0aGlzLCJmb3JtIikpe3JldHVybiBmYWxzZX1RLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGUpe3ZhciBhPWUudGFyZ2V0LGI9US5ub2RlTmFtZShhLCJpbnB1dCIpfHxRLm5vZGVOYW1lKGEsImJ1dHRvbiIpP2EuZm9ybTp1bmRlZmluZWQ7aWYoYiYmIVEuX2RhdGEoYiwic3VibWl0QnViYmxlcyIpKXtRLmV2ZW50LmFkZChiLCJzdWJtaXQuX3N1Ym1pdCIsZnVuY3Rpb24oail7ai5fc3VibWl0X2J1YmJsZT10cnVlfSk7US5fZGF0YShiLCJzdWJtaXRCdWJibGVzIix0cnVlKX19KX0scG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe2lmKGEuX3N1Ym1pdF9idWJibGUpe2RlbGV0ZSBhLl9zdWJtaXRfYnViYmxlO2lmKHRoaXMucGFyZW50Tm9kZSYmIWEuaXNUcmlnZ2VyKXtRLmV2ZW50LnNpbXVsYXRlKCJzdWJtaXQiLHRoaXMucGFyZW50Tm9kZSxhLHRydWUpfX19LHRlYXJkb3duOmZ1bmN0aW9uKCl7aWYoUS5ub2RlTmFtZSh0aGlzLCJmb3JtIikpe3JldHVybiBmYWxzZX1RLmV2ZW50LnJlbW92ZSh0aGlzLCIuX3N1Ym1pdCIpfX19aWYoIXguY2hhbmdlQnViYmxlcyl7US5ldmVudC5zcGVjaWFsLmNoYW5nZT17c2V0dXA6ZnVuY3Rpb24oKXtpZihpMS50ZXN0KHRoaXMubm9kZU5hbWUpKXtpZih0aGlzLnR5cGU9PT0iY2hlY2tib3gifHx0aGlzLnR5cGU9PT0icmFkaW8iKXtRLmV2ZW50LmFkZCh0aGlzLCJwcm9wZXJ0eWNoYW5nZS5fY2hhbmdlIixmdW5jdGlvbihhKXtpZihhLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lPT09ImNoZWNrZWQiKXt0aGlzLl9qdXN0X2NoYW5nZWQ9dHJ1ZX19KTtRLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fY2hhbmdlIixmdW5jdGlvbihhKXtpZih0aGlzLl9qdXN0X2NoYW5nZWQmJiFhLmlzVHJpZ2dlcil7dGhpcy5fanVzdF9jaGFuZ2VkPWZhbHNlfVEuZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcyxhLHRydWUpfSl9cmV0dXJuIGZhbHNlfVEuZXZlbnQuYWRkKHRoaXMsImJlZm9yZWFjdGl2YXRlLl9jaGFuZ2UiLGZ1bmN0aW9uKGUpe3ZhciBhPWUudGFyZ2V0O2lmKGkxLnRlc3QoYS5ub2RlTmFtZSkmJiFRLl9kYXRhKGEsImNoYW5nZUJ1YmJsZXMiKSl7US5ldmVudC5hZGQoYSwiY2hhbmdlLl9jaGFuZ2UiLGZ1bmN0aW9uKGIpe2lmKHRoaXMucGFyZW50Tm9kZSYmIWIuaXNTaW11bGF0ZWQmJiFiLmlzVHJpZ2dlcil7US5ldmVudC5zaW11bGF0ZSgiY2hhbmdlIix0aGlzLnBhcmVudE5vZGUsYix0cnVlKX19KTtRLl9kYXRhKGEsImNoYW5nZUJ1YmJsZXMiLHRydWUpfX0pfSxoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7aWYodGhpcyE9PWJ8fGEuaXNTaW11bGF0ZWR8fGEuaXNUcmlnZ2VyfHwoYi50eXBlIT09InJhZGlvIiYmYi50eXBlIT09ImNoZWNrYm94Iikpe3JldHVybiBhLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LHRlYXJkb3duOmZ1bmN0aW9uKCl7US5ldmVudC5yZW1vdmUodGhpcywiLl9jaGFuZ2UiKTtyZXR1cm4haTEudGVzdCh0aGlzLm5vZGVOYW1lKX19fWlmKCF4LmZvY3VzaW5CdWJibGVzKXtRLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGo9ZnVuY3Rpb24obCl7US5ldmVudC5zaW11bGF0ZShiLGwudGFyZ2V0LFEuZXZlbnQuZml4KGwpLHRydWUpfTtRLmV2ZW50LnNwZWNpYWxbYl09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLG09US5fZGF0YShsLGIpO2lmKCFtKXtsLmFkZEV2ZW50TGlzdGVuZXIoYSxqLHRydWUpfVEuX2RhdGEobCxiLChtfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgbD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsbT1RLl9kYXRhKGwsYiktMTtpZighbSl7bC5yZW1vdmVFdmVudExpc3RlbmVyKGEsaix0cnVlKTtRLl9yZW1vdmVEYXRhKGwsYil9ZWxzZXtRLl9kYXRhKGwsYixtKX19fX0pfVEuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbih0LHMsYSxiLGope3ZhciBsLG07aWYodHlwZW9mIHQ9PT0ib2JqZWN0Iil7aWYodHlwZW9mIHMhPT0ic3RyaW5nIil7YT1hfHxzO3M9dW5kZWZpbmVkfWZvcihsIGluIHQpe3RoaXMub24obCxzLGEsdFtsXSxqKX1yZXR1cm4gdGhpc31pZihhPT1udWxsJiZiPT1udWxsKXtiPXM7YT1zPXVuZGVmaW5lZH1lbHNlIGlmKGI9PW51bGwpe2lmKHR5cGVvZiBzPT09InN0cmluZyIpe2I9YTthPXVuZGVmaW5lZH1lbHNle2I9YTthPXM7cz11bmRlZmluZWR9fWlmKGI9PT1mYWxzZSl7Yj1vMX1lbHNlIGlmKCFiKXtyZXR1cm4gdGhpc31pZihqPT09MSl7bT1iO2I9ZnVuY3Rpb24obil7USgpLm9mZihuKTtyZXR1cm4gbS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2IuZ3VpZD1tLmd1aWR8fChtLmd1aWQ9US5ndWlkKyspfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtRLmV2ZW50LmFkZCh0aGlzLHQsYixhLHMpfSl9LG9uZTpmdW5jdGlvbih0LHMsYSxiKXtyZXR1cm4gdGhpcy5vbih0LHMsYSxiLDEpfSxvZmY6ZnVuY3Rpb24odCxzLGEpe3ZhciBiLGo7aWYodCYmdC5wcmV2ZW50RGVmYXVsdCYmdC5oYW5kbGVPYmope2I9dC5oYW5kbGVPYmo7USh0LmRlbGVnYXRlVGFyZ2V0KS5vZmYoYi5uYW1lc3BhY2U/Yi5vcmlnVHlwZSsiLiIrYi5uYW1lc3BhY2U6Yi5vcmlnVHlwZSxiLnNlbGVjdG9yLGIuaGFuZGxlcik7cmV0dXJuIHRoaXN9aWYodHlwZW9mIHQ9PT0ib2JqZWN0Iil7Zm9yKGogaW4gdCl7dGhpcy5vZmYoaixzLHRbal0pfXJldHVybiB0aGlzfWlmKHM9PT1mYWxzZXx8dHlwZW9mIHM9PT0iZnVuY3Rpb24iKXthPXM7cz11bmRlZmluZWR9aWYoYT09PWZhbHNlKXthPW8xfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtRLmV2ZW50LnJlbW92ZSh0aGlzLHQsYSxzKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKHQsYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1EuZXZlbnQudHJpZ2dlcih0LGEsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24odCxhKXt2YXIgYj10aGlzWzBdO2lmKGIpe3JldHVybiBRLmV2ZW50LnRyaWdnZXIodCxhLGIsdHJ1ZSl9fX0pO2Z1bmN0aW9uIHExKEope3ZhciBsPXIxLnNwbGl0KCJ8Iikscz1KLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihzLmNyZWF0ZUVsZW1lbnQpe3doaWxlKGwubGVuZ3RoKXtzLmNyZWF0ZUVsZW1lbnQobC5wb3AoKSl9fXJldHVybiBzfXZhciByMT0iYWJicnxhcnRpY2xlfGFzaWRlfGF1ZGlvfGJkaXxjYW52YXN8ZGF0YXxkYXRhbGlzdHxkZXRhaWxzfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnwiKyJoZWFkZXJ8aGdyb3VwfG1hcmt8bWV0ZXJ8bmF2fG91dHB1dHxwcm9ncmVzc3xzZWN0aW9ufHN1bW1hcnl8dGltZXx2aWRlbyIsczE9LyBqUXVlcnlcZCs9Iig/Om51bGx8XGQrKSIvZyx0MT1uZXcgUmVnRXhwKCI8KD86IityMSsiKVtcXHMvPl0iLCJpIiksdTE9L15ccysvLHYxPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzpdKylbXj5dKilcLz4vZ2ksdzE9LzwoW1x3Ol0rKS8seDE9Lzx0Ym9keS9pLHkxPS88fCYjP1x3KzsvLHoxPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksQTE9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksQjE9L14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLEMxPS9edHJ1ZVwvKC4qKS8sRDE9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLEUxPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSxsZWdlbmQ6WzEsIjxmaWVsZHNldD4iLCI8L2ZpZWxkc2V0PiJdLGFyZWE6WzEsIjxtYXA+IiwiPC9tYXA+Il0scGFyYW06WzEsIjxvYmplY3Q+IiwiPC9vYmplY3Q+Il0sdGhlYWQ6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRkOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXSxfZGVmYXVsdDp4Lmh0bWxTZXJpYWxpemU/WzAsIiIsIiJdOlsxLCJYPGRpdj4iLCI8L2Rpdj4iXX0sRjE9cTEoSiksRzE9RjEuYXBwZW5kQ2hpbGQoSi5jcmVhdGVFbGVtZW50KCJkaXYiKSk7RTEub3B0Z3JvdXA9RTEub3B0aW9uO0UxLnRib2R5PUUxLnRmb290PUUxLmNvbGdyb3VwPUUxLmNhcHRpb249RTEudGhlYWQ7RTEudGg9RTEudGQ7ZnVuY3Rpb24gSDEoYSx0KXt2YXIgYixqLGk9MCxsPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09WD9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKHR8fCIqIik6dHlwZW9mIGEucXVlcnlTZWxlY3RvckFsbCE9PVg/YS5xdWVyeVNlbGVjdG9yQWxsKHR8fCIqIik6dW5kZWZpbmVkO2lmKCFsKXtmb3IobD1bXSxiPWEuY2hpbGROb2Rlc3x8YTsoaj1iW2ldKSE9bnVsbDtpKyspe2lmKCF0fHxRLm5vZGVOYW1lKGosdCkpe2wucHVzaChqKX1lbHNle1EubWVyZ2UobCxIMShqLHQpKX19fXJldHVybiB0PT09dW5kZWZpbmVkfHx0JiZRLm5vZGVOYW1lKGEsdCk/US5tZXJnZShbYV0sbCk6bH1mdW5jdGlvbiBJMShhKXtpZihoMS50ZXN0KGEudHlwZSkpe2EuZGVmYXVsdENoZWNrZWQ9YS5jaGVja2VkfX1mdW5jdGlvbiBKMShhLGIpe3JldHVybiBRLm5vZGVOYW1lKGEsInRhYmxlIikmJlEubm9kZU5hbWUoYi5ub2RlVHlwZSE9PTExP2I6Yi5maXJzdENoaWxkLCJ0ciIpP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IilbMF18fGEuYXBwZW5kQ2hpbGQoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRib2R5IikpOmF9ZnVuY3Rpb24gSzEoYSl7YS50eXBlPShRLmZpbmQuYXR0cihhLCJ0eXBlIikhPT1udWxsKSsiLyIrYS50eXBlO3JldHVybiBhfWZ1bmN0aW9uIEwxKGEpe3ZhciBtPUMxLmV4ZWMoYS50eXBlKTtpZihtKXthLnR5cGU9bVsxXX1lbHNle2EucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIil9cmV0dXJuIGF9ZnVuY3Rpb24gTTEoYSxyKXt2YXIgYixpPTA7Zm9yKDsoYj1hW2ldKSE9bnVsbDtpKyspe1EuX2RhdGEoYiwiZ2xvYmFsRXZhbCIsIXJ8fFEuX2RhdGEocltpXSwiZ2xvYmFsRXZhbCIpKX19ZnVuY3Rpb24gTjEocyxhKXtpZihhLm5vZGVUeXBlIT09MXx8IVEuaGFzRGF0YShzKSl7cmV0dXJufXZhciB0LGksbCxiPVEuX2RhdGEocyksaj1RLl9kYXRhKGEsYiksbT1iLmV2ZW50cztpZihtKXtkZWxldGUgai5oYW5kbGU7ai5ldmVudHM9e307Zm9yKHQgaW4gbSl7Zm9yKGk9MCxsPW1bdF0ubGVuZ3RoO2k8bDtpKyspe1EuZXZlbnQuYWRkKGEsdCxtW3RdW2ldKX19fWlmKGouZGF0YSl7ai5kYXRhPVEuZXh0ZW5kKHt9LGouZGF0YSl9fWZ1bmN0aW9uIE8xKHMsYSl7dmFyIG4sZSxiO2lmKGEubm9kZVR5cGUhPT0xKXtyZXR1cm59bj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoIXgubm9DbG9uZUV2ZW50JiZhW1EuZXhwYW5kb10pe2I9US5fZGF0YShhKTtmb3IoZSBpbiBiLmV2ZW50cyl7US5yZW1vdmVFdmVudChhLGUsYi5oYW5kbGUpfWEucmVtb3ZlQXR0cmlidXRlKFEuZXhwYW5kbyl9aWYobj09PSJzY3JpcHQiJiZhLnRleHQhPT1zLnRleHQpe0sxKGEpLnRleHQ9cy50ZXh0O0wxKGEpfWVsc2UgaWYobj09PSJvYmplY3QiKXtpZihhLnBhcmVudE5vZGUpe2Eub3V0ZXJIVE1MPXMub3V0ZXJIVE1MfWlmKHguaHRtbDVDbG9uZSYmKHMuaW5uZXJIVE1MJiYhUS50cmltKGEuaW5uZXJIVE1MKSkpe2EuaW5uZXJIVE1MPXMuaW5uZXJIVE1MfX1lbHNlIGlmKG49PT0iaW5wdXQiJiZoMS50ZXN0KHMudHlwZSkpe2EuZGVmYXVsdENoZWNrZWQ9YS5jaGVja2VkPXMuY2hlY2tlZDtpZihhLnZhbHVlIT09cy52YWx1ZSl7YS52YWx1ZT1zLnZhbHVlfX1lbHNlIGlmKG49PT0ib3B0aW9uIil7YS5kZWZhdWx0U2VsZWN0ZWQ9YS5zZWxlY3RlZD1zLmRlZmF1bHRTZWxlY3RlZH1lbHNlIGlmKG49PT0iaW5wdXQifHxuPT09InRleHRhcmVhIil7YS5kZWZhdWx0VmFsdWU9cy5kZWZhdWx0VmFsdWV9fVEuZXh0ZW5kKHtjbG9uZTpmdW5jdGlvbihhLGIsail7dmFyIGwsbixtLGkscyxwPVEuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKHguaHRtbDVDbG9uZXx8US5pc1hNTERvYyhhKXx8IXQxLnRlc3QoIjwiK2Eubm9kZU5hbWUrIj4iKSl7bT1hLmNsb25lTm9kZSh0cnVlKX1lbHNle0cxLmlubmVySFRNTD1hLm91dGVySFRNTDtHMS5yZW1vdmVDaGlsZChtPUcxLmZpcnN0Q2hpbGQpfWlmKCgheC5ub0Nsb25lRXZlbnR8fCF4Lm5vQ2xvbmVDaGVja2VkKSYmKGEubm9kZVR5cGU9PT0xfHxhLm5vZGVUeXBlPT09MTEpJiYhUS5pc1hNTERvYyhhKSl7bD1IMShtKTtzPUgxKGEpO2ZvcihpPTA7KG49c1tpXSkhPW51bGw7KytpKXtpZihsW2ldKXtPMShuLGxbaV0pfX19aWYoYil7aWYoail7cz1zfHxIMShhKTtsPWx8fEgxKG0pO2ZvcihpPTA7KG49c1tpXSkhPW51bGw7aSsrKXtOMShuLGxbaV0pfX1lbHNle04xKGEsbSl9fWw9SDEobSwic2NyaXB0Iik7aWYobC5sZW5ndGg+MCl7TTEobCwhcCYmSDEoYSwic2NyaXB0IikpfWw9cz1uPW51bGw7cmV0dXJuIG19LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oYSxiLHMsbSl7dmFyIGosbixwLHQscix2LF8sbD1hLmxlbmd0aCxyMz1xMShiKSxzMz1bXSxpPTA7Zm9yKDtpPGw7aSsrKXtuPWFbaV07aWYobnx8bj09PTApe2lmKFEudHlwZShuKT09PSJvYmplY3QiKXtRLm1lcmdlKHMzLG4ubm9kZVR5cGU/W25dOm4pfWVsc2UgaWYoIXkxLnRlc3Qobikpe3MzLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShuKSl9ZWxzZXt0PXR8fHIzLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiZGl2IikpO3I9KHcxLmV4ZWMobil8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCk7Xz1FMVtyXXx8RTEuX2RlZmF1bHQ7dC5pbm5lckhUTUw9X1sxXStuLnJlcGxhY2UodjEsIjwkMT48LyQyPiIpK19bMl07aj1fWzBdO3doaWxlKGotLSl7dD10Lmxhc3RDaGlsZH1pZigheC5sZWFkaW5nV2hpdGVzcGFjZSYmdTEudGVzdChuKSl7czMucHVzaChiLmNyZWF0ZVRleHROb2RlKHUxLmV4ZWMobilbMF0pKX1pZigheC50Ym9keSl7bj1yPT09InRhYmxlIiYmIXgxLnRlc3Qobik/dC5maXJzdENoaWxkOl9bMV09PT0iPHRhYmxlPiImJiF4MS50ZXN0KG4pP3Q6MDtqPW4mJm4uY2hpbGROb2Rlcy5sZW5ndGg7d2hpbGUoai0tKXtpZihRLm5vZGVOYW1lKCh2PW4uY2hpbGROb2Rlc1tqXSksInRib2R5IikmJiF2LmNoaWxkTm9kZXMubGVuZ3RoKXtuLnJlbW92ZUNoaWxkKHYpfX19US5tZXJnZShzMyx0LmNoaWxkTm9kZXMpO3QudGV4dENvbnRlbnQ9IiI7d2hpbGUodC5maXJzdENoaWxkKXt0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCl9dD1yMy5sYXN0Q2hpbGR9fX1pZih0KXtyMy5yZW1vdmVDaGlsZCh0KX1pZigheC5hcHBlbmRDaGVja2VkKXtRLmdyZXAoSDEoczMsImlucHV0IiksSTEpfWk9MDt3aGlsZSgobj1zM1tpKytdKSl7aWYobSYmUS5pbkFycmF5KG4sbSkhPT0tMSl7Y29udGludWV9cD1RLmNvbnRhaW5zKG4ub3duZXJEb2N1bWVudCxuKTt0PUgxKHIzLmFwcGVuZENoaWxkKG4pLCJzY3JpcHQiKTtpZihwKXtNMSh0KX1pZihzKXtqPTA7d2hpbGUoKG49dFtqKytdKSl7aWYoQjEudGVzdChuLnR5cGV8fCIiKSl7cy5wdXNoKG4pfX19fXQ9bnVsbDtyZXR1cm4gcjN9LGNsZWFuRGF0YTpmdW5jdGlvbihhLGIpe3ZhciBqLHQsbCxtLGk9MCxuPVEuZXhwYW5kbyxwPVEuY2FjaGUscj14LmRlbGV0ZUV4cGFuZG8scz1RLmV2ZW50LnNwZWNpYWw7Zm9yKDsoaj1hW2ldKSE9bnVsbDtpKyspe2lmKGJ8fFEuYWNjZXB0RGF0YShqKSl7bD1qW25dO209bCYmcFtsXTtpZihtKXtpZihtLmV2ZW50cyl7Zm9yKHQgaW4gbS5ldmVudHMpe2lmKHNbdF0pe1EuZXZlbnQucmVtb3ZlKGosdCl9ZWxzZXtRLnJlbW92ZUV2ZW50KGosdCxtLmhhbmRsZSl9fX1pZihwW2xdKXtkZWxldGUgcFtsXTtpZihyKXtkZWxldGUgaltuXX1lbHNlIGlmKHR5cGVvZiBqLnJlbW92ZUF0dHJpYnV0ZSE9PVgpe2oucmVtb3ZlQXR0cmlidXRlKG4pfWVsc2V7altuXT1udWxsfWQucHVzaChsKX19fX19fSk7US5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24odil7cmV0dXJuIGcxKHRoaXMsZnVuY3Rpb24odil7cmV0dXJuIHY9PT11bmRlZmluZWQ/US50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5hcHBlbmQoKHRoaXNbMF0mJnRoaXNbMF0ub3duZXJEb2N1bWVudHx8SikuY3JlYXRlVGV4dE5vZGUodikpfSxudWxsLHYsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZih0aGlzLm5vZGVUeXBlPT09MXx8dGhpcy5ub2RlVHlwZT09PTExfHx0aGlzLm5vZGVUeXBlPT09OSl7dmFyIHQ9SjEodGhpcyxhKTt0LmFwcGVuZENoaWxkKGEpfX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTF8fHRoaXMubm9kZVR5cGU9PT05KXt2YXIgdD1KMSh0aGlzLGEpO3QuaW5zZXJ0QmVmb3JlKGEsdC5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKHRoaXMucGFyZW50Tm9kZSl7dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMpfX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZih0aGlzLnBhcmVudE5vZGUpe3RoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX19KX0scmVtb3ZlOmZ1bmN0aW9uKHMsYSl7dmFyIGIsaj1zP1EuZmlsdGVyKHMsdGhpcyk6dGhpcyxpPTA7Zm9yKDsoYj1qW2ldKSE9bnVsbDtpKyspe2lmKCFhJiZiLm5vZGVUeXBlPT09MSl7US5jbGVhbkRhdGEoSDEoYikpfWlmKGIucGFyZW50Tm9kZSl7aWYoYSYmUS5jb250YWlucyhiLm93bmVyRG9jdW1lbnQsYikpe00xKEgxKGIsInNjcmlwdCIpKX1iLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYil9fXJldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe3ZhciBhLGk9MDtmb3IoOyhhPXRoaXNbaV0pIT1udWxsO2krKyl7aWYoYS5ub2RlVHlwZT09PTEpe1EuY2xlYW5EYXRhKEgxKGEsZmFsc2UpKX13aGlsZShhLmZpcnN0Q2hpbGQpe2EucmVtb3ZlQ2hpbGQoYS5maXJzdENoaWxkKX1pZihhLm9wdGlvbnMmJlEubm9kZU5hbWUoYSwic2VsZWN0Iikpe2Eub3B0aW9ucy5sZW5ndGg9MH19cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7YT1hPT1udWxsP2ZhbHNlOmE7Yj1iPT1udWxsP2E6YjtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gUS5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbih2KXtyZXR1cm4gZzEodGhpcyxmdW5jdGlvbih2KXt2YXIgYT10aGlzWzBdfHx7fSxpPTAsbD10aGlzLmxlbmd0aDtpZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gYS5ub2RlVHlwZT09PTE/YS5pbm5lckhUTUwucmVwbGFjZShzMSwiIik6dW5kZWZpbmVkfWlmKHR5cGVvZiB2PT09InN0cmluZyImJiF6MS50ZXN0KHYpJiYoeC5odG1sU2VyaWFsaXplfHwhdDEudGVzdCh2KSkmJih4LmxlYWRpbmdXaGl0ZXNwYWNlfHwhdTEudGVzdCh2KSkmJiFFMVsodzEuZXhlYyh2KXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe3Y9di5yZXBsYWNlKHYxLCI8JDE+PC8kMj4iKTt0cnl7Zm9yKDtpPGw7aSsrKXthPXRoaXNbaV18fHt9O2lmKGEubm9kZVR5cGU9PT0xKXtRLmNsZWFuRGF0YShIMShhLGZhbHNlKSk7YS5pbm5lckhUTUw9dn19YT0wfWNhdGNoKGUpe319aWYoYSl7dGhpcy5lbXB0eSgpLmFwcGVuZCh2KX19LG51bGwsdixhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF07dGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYil7YT10aGlzLnBhcmVudE5vZGU7US5jbGVhbkRhdGEoSDEodGhpcykpO2lmKGEpe2EucmVwbGFjZUNoaWxkKGIsdGhpcyl9fSk7cmV0dXJuIGEmJihhLmxlbmd0aHx8YS5ub2RlVHlwZSk/dGhpczp0aGlzLnJlbW92ZSgpfSxkZXRhY2g6ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMucmVtb3ZlKHMsdHJ1ZSl9LGRvbU1hbmlwOmZ1bmN0aW9uKGEsYil7YT1nLmFwcGx5KFtdLGEpO3ZhciBqLG4sbSxzLHAscixpPTAsbD10aGlzLmxlbmd0aCx0PXRoaXMsdj1sLTEsXz1hWzBdLHIzPVEuaXNGdW5jdGlvbihfKTtpZihyM3x8KGw+MSYmdHlwZW9mIF89PT0ic3RyaW5nIiYmIXguY2hlY2tDbG9uZSYmQTEudGVzdChfKSkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oczMpe3ZhciB0Mz10LmVxKHMzKTtpZihyMyl7YVswXT1fLmNhbGwodGhpcyxzMyx0My5odG1sKCkpfXQzLmRvbU1hbmlwKGEsYil9KX1pZihsKXtyPVEuYnVpbGRGcmFnbWVudChhLHRoaXNbMF0ub3duZXJEb2N1bWVudCxmYWxzZSx0aGlzKTtqPXIuZmlyc3RDaGlsZDtpZihyLmNoaWxkTm9kZXMubGVuZ3RoPT09MSl7cj1qfWlmKGope3M9US5tYXAoSDEociwic2NyaXB0IiksSzEpO209cy5sZW5ndGg7Zm9yKDtpPGw7aSsrKXtuPXI7aWYoaSE9PXYpe249US5jbG9uZShuLHRydWUsdHJ1ZSk7aWYobSl7US5tZXJnZShzLEgxKG4sInNjcmlwdCIpKX19Yi5jYWxsKHRoaXNbaV0sbixpKX1pZihtKXtwPXNbcy5sZW5ndGgtMV0ub3duZXJEb2N1bWVudDtRLm1hcChzLEwxKTtmb3IoaT0wO2k8bTtpKyspe249c1tpXTtpZihCMS50ZXN0KG4udHlwZXx8IiIpJiYhUS5fZGF0YShuLCJnbG9iYWxFdmFsIikmJlEuY29udGFpbnMocCxuKSl7aWYobi5zcmMpe2lmKFEuX2V2YWxVcmwpe1EuX2V2YWxVcmwobi5zcmMpfX1lbHNle1EuZ2xvYmFsRXZhbCgobi50ZXh0fHxuLnRleHRDb250ZW50fHxuLmlubmVySFRNTHx8IiIpLnJlcGxhY2UoRDEsIiIpKX19fX1yPWo9bnVsbH19cmV0dXJuIHRoaXN9fSk7US5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24obixhKXtRLmZuW25dPWZ1bmN0aW9uKHMpe3ZhciBiLGk9MCxyPVtdLGo9UShzKSxsPWoubGVuZ3RoLTE7Zm9yKDtpPD1sO2krKyl7Yj1pPT09bD90aGlzOnRoaXMuY2xvbmUodHJ1ZSk7UShqW2ldKVthXShiKTtoLmFwcGx5KHIsYi5nZXQoKSl9cmV0dXJuIHRoaXMucHVzaFN0YWNrKHIpfX0pO3ZhciBQMSxRMT17fTtmdW5jdGlvbiBSMShuLGEpe3ZhciBzLGI9UShhLmNyZWF0ZUVsZW1lbnQobikpLmFwcGVuZFRvKGEuYm9keSksaj13LmdldERlZmF1bHRDb21wdXRlZFN0eWxlJiYocz13LmdldERlZmF1bHRDb21wdXRlZFN0eWxlKGJbMF0pKT9zLmRpc3BsYXk6US5jc3MoYlswXSwiZGlzcGxheSIpO2IuZGV0YWNoKCk7cmV0dXJuIGp9ZnVuY3Rpb24gUzEobil7dmFyIGE9SixiPVExW25dO2lmKCFiKXtiPVIxKG4sYSk7aWYoYj09PSJub25lInx8IWIpe1AxPShQMXx8USgiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIpKS5hcHBlbmRUbyhhLmRvY3VtZW50RWxlbWVudCk7YT0oUDFbMF0uY29udGVudFdpbmRvd3x8UDFbMF0uY29udGVudERvY3VtZW50KS5kb2N1bWVudDthLndyaXRlKCk7YS5jbG9zZSgpO2I9UjEobixhKTtQMS5kZXRhY2goKX1RMVtuXT1ifXJldHVybiBifShmdW5jdGlvbigpe3ZhciBzO3guc2hyaW5rV3JhcEJsb2Nrcz1mdW5jdGlvbigpe2lmKHMhPW51bGwpe3JldHVybiBzfXM9ZmFsc2U7dmFyIGEsYixqO2I9Si5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO2lmKCFifHwhYi5zdHlsZSl7cmV0dXJufWE9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTtqPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7ai5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCI7Yi5hcHBlbmRDaGlsZChqKS5hcHBlbmRDaGlsZChhKTtpZih0eXBlb2YgYS5zdHlsZS56b29tIT09WCl7YS5zdHlsZS5jc3NUZXh0PSItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94OyIrImJveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDsiKyJwYWRkaW5nOjFweDt3aWR0aDoxcHg7em9vbToxIjthLmFwcGVuZENoaWxkKEouY3JlYXRlRWxlbWVudCgiZGl2IikpLnN0eWxlLndpZHRoPSI1cHgiO3M9YS5vZmZzZXRXaWR0aCE9PTN9Yi5yZW1vdmVDaGlsZChqKTtyZXR1cm4gc319KSgpO3ZhciBUMT0oL15tYXJnaW4vKTt2YXIgVTE9bmV3IFJlZ0V4cCgiXigiK2QxKyIpKD8hcHgpW2EteiVdKyQiLCJpIik7dmFyIFYxLFcxLFgxPS9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkLztpZih3LmdldENvbXB1dGVkU3R5bGUpe1YxPWZ1bmN0aW9uKGEpe3JldHVybiBhLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpfTtXMT1mdW5jdGlvbihhLG4sYil7dmFyIGosbSxsLHIscz1hLnN0eWxlO2I9Ynx8VjEoYSk7cj1iP2IuZ2V0UHJvcGVydHlWYWx1ZShuKXx8YltuXTp1bmRlZmluZWQ7aWYoYil7aWYocj09PSIiJiYhUS5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSkpe3I9US5zdHlsZShhLG4pfWlmKFUxLnRlc3QocikmJlQxLnRlc3Qobikpe2o9cy53aWR0aDttPXMubWluV2lkdGg7bD1zLm1heFdpZHRoO3MubWluV2lkdGg9cy5tYXhXaWR0aD1zLndpZHRoPXI7cj1iLndpZHRoO3Mud2lkdGg9ajtzLm1pbldpZHRoPW07cy5tYXhXaWR0aD1sfX1yZXR1cm4gcj09PXVuZGVmaW5lZD9yOnIrIiJ9fWVsc2UgaWYoSi5kb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlKXtWMT1mdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9O1cxPWZ1bmN0aW9uKGEsbixiKXt2YXIgbCxyLGosbSxzPWEuc3R5bGU7Yj1ifHxWMShhKTttPWI/YltuXTp1bmRlZmluZWQ7aWYobT09bnVsbCYmcyYmc1tuXSl7bT1zW25dfWlmKFUxLnRlc3QobSkmJiFYMS50ZXN0KG4pKXtsPXMubGVmdDtyPWEucnVudGltZVN0eWxlO2o9ciYmci5sZWZ0O2lmKGope3IubGVmdD1hLmN1cnJlbnRTdHlsZS5sZWZ0fXMubGVmdD1uPT09ImZvbnRTaXplIj8iMWVtIjptO209cy5waXhlbExlZnQrInB4IjtzLmxlZnQ9bDtpZihqKXtyLmxlZnQ9an19cmV0dXJuIG09PT11bmRlZmluZWQ/bTptKyIifHwiYXV0byJ9fWZ1bmN0aW9uIFkxKGEsYil7cmV0dXJue2dldDpmdW5jdGlvbigpe3ZhciBqPWEoKTtpZihqPT1udWxsKXtyZXR1cm59aWYoail7ZGVsZXRlIHRoaXMuZ2V0O3JldHVybn1yZXR1cm4odGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19KGZ1bmN0aW9uKCl7dmFyIGIscyxhLHAsaixyLGw7Yj1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2IuaW5uZXJIVE1MPSIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iO2E9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpWzBdO3M9YSYmYS5zdHlsZTtpZighcyl7cmV0dXJufXMuY3NzVGV4dD0iZmxvYXQ6bGVmdDtvcGFjaXR5Oi41Ijt4Lm9wYWNpdHk9cy5vcGFjaXR5PT09IjAuNSI7eC5jc3NGbG9hdD0hIXMuY3NzRmxvYXQ7Yi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giO2IuY2xvbmVOb2RlKHRydWUpLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiO3guY2xlYXJDbG9uZVN0eWxlPWIuc3R5bGUuYmFja2dyb3VuZENsaXA9PT0iY29udGVudC1ib3giO3guYm94U2l6aW5nPXMuYm94U2l6aW5nPT09IiJ8fHMuTW96Qm94U2l6aW5nPT09IiJ8fHMuV2Via2l0Qm94U2l6aW5nPT09IiI7US5leHRlbmQoeCx7cmVsaWFibGVIaWRkZW5PZmZzZXRzOmZ1bmN0aW9uKCl7aWYocj09bnVsbCl7bSgpfXJldHVybiByfSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe2lmKGo9PW51bGwpe20oKX1yZXR1cm4gan0scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe2lmKHA9PW51bGwpe20oKX1yZXR1cm4gcH0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe2lmKGw9PW51bGwpe20oKX1yZXR1cm4gbH19KTtmdW5jdGlvbiBtKCl7dmFyIGIsbix0LHY7bj1KLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF07aWYoIW58fCFuLnN0eWxlKXtyZXR1cm59Yj1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Q9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTt0LnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4IjtuLmFwcGVuZENoaWxkKHQpLmFwcGVuZENoaWxkKGIpO2Iuc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7IisiYm94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luLXRvcDoxJTt0b3A6MSU7IisiYm9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGUiO3A9aj1mYWxzZTtsPXRydWU7aWYody5nZXRDb21wdXRlZFN0eWxlKXtwPSh3LmdldENvbXB1dGVkU3R5bGUoYixudWxsKXx8e30pLnRvcCE9PSIxJSI7aj0ody5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCl8fHt3aWR0aDoiNHB4In0pLndpZHRoPT09IjRweCI7dj1iLmFwcGVuZENoaWxkKEouY3JlYXRlRWxlbWVudCgiZGl2IikpO3Yuc3R5bGUuY3NzVGV4dD1iLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7IisiYm94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCI7di5zdHlsZS5tYXJnaW5SaWdodD12LnN0eWxlLndpZHRoPSIwIjtiLnN0eWxlLndpZHRoPSIxcHgiO2w9IXBhcnNlRmxvYXQoKHcuZ2V0Q29tcHV0ZWRTdHlsZSh2LG51bGwpfHx7fSkubWFyZ2luUmlnaHQpfWIuaW5uZXJIVE1MPSI8dGFibGU+PHRyPjx0ZD48L3RkPjx0ZD50PC90ZD48L3RyPjwvdGFibGU+Ijt2PWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRkIik7dlswXS5zdHlsZS5jc3NUZXh0PSJtYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjA7ZGlzcGxheTpub25lIjtyPXZbMF0ub2Zmc2V0SGVpZ2h0PT09MDtpZihyKXt2WzBdLnN0eWxlLmRpc3BsYXk9IiI7dlsxXS5zdHlsZS5kaXNwbGF5PSJub25lIjtyPXZbMF0ub2Zmc2V0SGVpZ2h0PT09MH1uLnJlbW92ZUNoaWxkKHQpfX0pKCk7US5zd2FwPWZ1bmN0aW9uKGEsYixqLGwpe3ZhciByLG4sbT17fTtmb3IobiBpbiBiKXttW25dPWEuc3R5bGVbbl07YS5zdHlsZVtuXT1iW25dfXI9ai5hcHBseShhLGx8fFtdKTtmb3IobiBpbiBiKXthLnN0eWxlW25dPW1bbl19cmV0dXJuIHJ9O3ZhciBaMT0vYWxwaGFcKFteKV0qXCkvaSwkMT0vb3BhY2l0eVxzKj1ccyooW14pXSopLyxfMT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sYTI9bmV3IFJlZ0V4cCgiXigiK2QxKyIpKC4qKSQiLCJpIiksYjI9bmV3IFJlZ0V4cCgiXihbKy1dKT0oIitkMSsiKSIsImkiKSxjMj17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sZDI9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LGUyPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl07ZnVuY3Rpb24gZjIocyxuKXtpZihuIGluIHMpe3JldHVybiBufXZhciBhPW4uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrbi5zbGljZSgxKSxiPW4saT1lMi5sZW5ndGg7d2hpbGUoaS0tKXtuPWUyW2ldK2E7aWYobiBpbiBzKXtyZXR1cm4gbn19cmV0dXJuIGJ9ZnVuY3Rpb24gZzIoYSxzKXt2YXIgYixqLGwsdj1bXSxtPTAsbj1hLmxlbmd0aDtmb3IoO208bjttKyspe2o9YVttXTtpZighai5zdHlsZSl7Y29udGludWV9dlttXT1RLl9kYXRhKGosIm9sZGRpc3BsYXkiKTtiPWouc3R5bGUuZGlzcGxheTtpZihzKXtpZighdlttXSYmYj09PSJub25lIil7ai5zdHlsZS5kaXNwbGF5PSIifWlmKGouc3R5bGUuZGlzcGxheT09PSIiJiZmMShqKSl7dlttXT1RLl9kYXRhKGosIm9sZGRpc3BsYXkiLFMxKGoubm9kZU5hbWUpKX19ZWxzZXtsPWYxKGopO2lmKGImJmIhPT0ibm9uZSJ8fCFsKXtRLl9kYXRhKGosIm9sZGRpc3BsYXkiLGw/YjpRLmNzcyhqLCJkaXNwbGF5IikpfX19Zm9yKG09MDttPG47bSsrKXtqPWFbbV07aWYoIWouc3R5bGUpe2NvbnRpbnVlfWlmKCFzfHxqLnN0eWxlLmRpc3BsYXk9PT0ibm9uZSJ8fGouc3R5bGUuZGlzcGxheT09PSIiKXtqLnN0eWxlLmRpc3BsYXk9cz92W21dfHwiIjoibm9uZSJ9fXJldHVybiBhfWZ1bmN0aW9uIGgyKGEsdixzKXt2YXIgbT1hMi5leGVjKHYpO3JldHVybiBtP01hdGgubWF4KDAsbVsxXS0oc3x8MCkpKyhtWzJdfHwicHgiKTp2fWZ1bmN0aW9uIGkyKGEsbixiLGoscyl7dmFyIGk9Yj09PShqPyJib3JkZXIiOiJjb250ZW50Iik/NDpuPT09IndpZHRoIj8xOjAsdj0wO2Zvcig7aTw0O2krPTIpe2lmKGI9PT0ibWFyZ2luIil7dis9US5jc3MoYSxiK2UxW2ldLHRydWUscyl9aWYoail7aWYoYj09PSJjb250ZW50Iil7di09US5jc3MoYSwicGFkZGluZyIrZTFbaV0sdHJ1ZSxzKX1pZihiIT09Im1hcmdpbiIpe3YtPVEuY3NzKGEsImJvcmRlciIrZTFbaV0rIldpZHRoIix0cnVlLHMpfX1lbHNle3YrPVEuY3NzKGEsInBhZGRpbmciK2UxW2ldLHRydWUscyk7aWYoYiE9PSJwYWRkaW5nIil7dis9US5jc3MoYSwiYm9yZGVyIitlMVtpXSsiV2lkdGgiLHRydWUscyl9fX1yZXR1cm4gdn1mdW5jdGlvbiBqMihhLG4sYil7dmFyIHY9dHJ1ZSxqPW49PT0id2lkdGgiP2Eub2Zmc2V0V2lkdGg6YS5vZmZzZXRIZWlnaHQscz1WMShhKSxsPXguYm94U2l6aW5nJiZRLmNzcyhhLCJib3hTaXppbmciLGZhbHNlLHMpPT09ImJvcmRlci1ib3giO2lmKGo8PTB8fGo9PW51bGwpe2o9VzEoYSxuLHMpO2lmKGo8MHx8aj09bnVsbCl7aj1hLnN0eWxlW25dfWlmKFUxLnRlc3Qoaikpe3JldHVybiBqfXY9bCYmKHguYm94U2l6aW5nUmVsaWFibGUoKXx8aj09PWEuc3R5bGVbbl0pO2o9cGFyc2VGbG9hdChqKXx8MH1yZXR1cm4oaitpMihhLG4sYnx8KGw/ImJvcmRlciI6ImNvbnRlbnQiKSx2LHMpKSsicHgifVEuZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIHI9VzEoYSwib3BhY2l0eSIpO3JldHVybiByPT09IiI/IjEiOnJ9fX19LGNzc051bWJlcjp7ImNvbHVtbkNvdW50Ijp0cnVlLCJmaWxsT3BhY2l0eSI6dHJ1ZSwiZmxleEdyb3ciOnRydWUsImZsZXhTaHJpbmsiOnRydWUsImZvbnRXZWlnaHQiOnRydWUsImxpbmVIZWlnaHQiOnRydWUsIm9wYWNpdHkiOnRydWUsIm9yZGVyIjp0cnVlLCJvcnBoYW5zIjp0cnVlLCJ3aWRvd3MiOnRydWUsInpJbmRleCI6dHJ1ZSwiem9vbSI6dHJ1ZX0sY3NzUHJvcHM6eyJmbG9hdCI6eC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxuLHYsYil7aWYoIWF8fGEubm9kZVR5cGU9PT0zfHxhLm5vZGVUeXBlPT09OHx8IWEuc3R5bGUpe3JldHVybn12YXIgcix0LGosbD1RLmNhbWVsQ2FzZShuKSxzPWEuc3R5bGU7bj1RLmNzc1Byb3BzW2xdfHwoUS5jc3NQcm9wc1tsXT1mMihzLGwpKTtqPVEuY3NzSG9va3Nbbl18fFEuY3NzSG9va3NbbF07aWYodiE9PXVuZGVmaW5lZCl7dD10eXBlb2YgdjtpZih0PT09InN0cmluZyImJihyPWIyLmV4ZWModikpKXt2PShyWzFdKzEpKnJbMl0rcGFyc2VGbG9hdChRLmNzcyhhLG4pKTt0PSJudW1iZXIifWlmKHY9PW51bGx8fHYhPT12KXtyZXR1cm59aWYodD09PSJudW1iZXIiJiYhUS5jc3NOdW1iZXJbbF0pe3YrPSJweCJ9aWYoIXguY2xlYXJDbG9uZVN0eWxlJiZ2PT09IiImJm4uaW5kZXhPZigiYmFja2dyb3VuZCIpPT09MCl7c1tuXT0iaW5oZXJpdCJ9aWYoIWp8fCEoInNldCJpbiBqKXx8KHY9ai5zZXQoYSx2LGIpKSE9PXVuZGVmaW5lZCl7dHJ5e3Nbbl09dn1jYXRjaChlKXt9fX1lbHNle2lmKGomJiJnZXQiaW4gaiYmKHI9ai5nZXQoYSxmYWxzZSxiKSkhPT11bmRlZmluZWQpe3JldHVybiByfXJldHVybiBzW25dfX0sY3NzOmZ1bmN0aW9uKGEsbixiLHMpe3ZhciBqLHYsbCxtPVEuY2FtZWxDYXNlKG4pO249US5jc3NQcm9wc1ttXXx8KFEuY3NzUHJvcHNbbV09ZjIoYS5zdHlsZSxtKSk7bD1RLmNzc0hvb2tzW25dfHxRLmNzc0hvb2tzW21dO2lmKGwmJiJnZXQiaW4gbCl7dj1sLmdldChhLHRydWUsYil9aWYodj09PXVuZGVmaW5lZCl7dj1XMShhLG4scyl9aWYodj09PSJub3JtYWwiJiZuIGluIGQyKXt2PWQyW25dfWlmKGI9PT0iInx8Yil7aj1wYXJzZUZsb2F0KHYpO3JldHVybiBiPT09dHJ1ZXx8US5pc051bWVyaWMoaik/anx8MDp2fXJldHVybiB2fX0pO1EuZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oaSxuKXtRLmNzc0hvb2tzW25dPXtnZXQ6ZnVuY3Rpb24oYSxiLGope2lmKGIpe3JldHVybiBfMS50ZXN0KFEuY3NzKGEsImRpc3BsYXkiKSkmJmEub2Zmc2V0V2lkdGg9PT0wP1Euc3dhcChhLGMyLGZ1bmN0aW9uKCl7cmV0dXJuIGoyKGEsbixqKX0pOmoyKGEsbixqKX19LHNldDpmdW5jdGlvbihhLHYsYil7dmFyIHM9YiYmVjEoYSk7cmV0dXJuIGgyKGEsdixiP2kyKGEsbixiLHguYm94U2l6aW5nJiZRLmNzcyhhLCJib3hTaXppbmciLGZhbHNlLHMpPT09ImJvcmRlci1ib3giLHMpOjApfX19KTtpZigheC5vcGFjaXR5KXtRLmNzc0hvb2tzLm9wYWNpdHk9e2dldDpmdW5jdGlvbihhLGIpe3JldHVybiAkMS50ZXN0KChiJiZhLmN1cnJlbnRTdHlsZT9hLmN1cnJlbnRTdHlsZS5maWx0ZXI6YS5zdHlsZS5maWx0ZXIpfHwiIik/KDAuMDEqcGFyc2VGbG9hdChSZWdFeHAuJDEpKSsiIjpiPyIxIjoiIn0sc2V0OmZ1bmN0aW9uKGEsdil7dmFyIHM9YS5zdHlsZSxiPWEuY3VycmVudFN0eWxlLGo9US5pc051bWVyaWModik/ImFscGhhKG9wYWNpdHk9Iit2KjEwMCsiKSI6IiIsbD1iJiZiLmZpbHRlcnx8cy5maWx0ZXJ8fCIiO3Muem9vbT0xO2lmKCh2Pj0xfHx2PT09IiIpJiZRLnRyaW0obC5yZXBsYWNlKFoxLCIiKSk9PT0iIiYmcy5yZW1vdmVBdHRyaWJ1dGUpe3MucmVtb3ZlQXR0cmlidXRlKCJmaWx0ZXIiKTtpZih2PT09IiJ8fGImJiFiLmZpbHRlcil7cmV0dXJufX1zLmZpbHRlcj1aMS50ZXN0KGwpP2wucmVwbGFjZShaMSxqKTpsKyIgIitqfX19US5jc3NIb29rcy5tYXJnaW5SaWdodD1ZMSh4LnJlbGlhYmxlTWFyZ2luUmlnaHQsZnVuY3Rpb24oYSxiKXtpZihiKXtyZXR1cm4gUS5zd2FwKGEseyJkaXNwbGF5IjoiaW5saW5lLWJsb2NrIn0sVzEsW2EsIm1hcmdpblJpZ2h0Il0pfX0pO1EuZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKHAscyl7US5jc3NIb29rc1twK3NdPXtleHBhbmQ6ZnVuY3Rpb24odil7dmFyIGk9MCxhPXt9LGI9dHlwZW9mIHY9PT0ic3RyaW5nIj92LnNwbGl0KCIgIik6W3ZdO2Zvcig7aTw0O2krKyl7YVtwK2UxW2ldK3NdPWJbaV18fGJbaS0yXXx8YlswXX1yZXR1cm4gYX19O2lmKCFUMS50ZXN0KHApKXtRLmNzc0hvb2tzW3Arc10uc2V0PWgyfX0pO1EuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24obix2KXtyZXR1cm4gZzEodGhpcyxmdW5jdGlvbihhLG4sdil7dmFyIHMsbCxtPXt9LGk9MDtpZihRLmlzQXJyYXkobikpe3M9VjEoYSk7bD1uLmxlbmd0aDtmb3IoO2k8bDtpKyspe21bbltpXV09US5jc3MoYSxuW2ldLGZhbHNlLHMpfXJldHVybiBtfXJldHVybiB2IT09dW5kZWZpbmVkP1Euc3R5bGUoYSxuLHYpOlEuY3NzKGEsbil9LG4sdixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIGcyKHRoaXMsdHJ1ZSl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gZzIodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihzKXtpZih0eXBlb2Ygcz09PSJib29sZWFuIil7cmV0dXJuIHM/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGYxKHRoaXMpKXtRKHRoaXMpLnNob3coKX1lbHNle1EodGhpcykuaGlkZSgpfX0pfX0pO2Z1bmN0aW9uIGsyKGEsYixwLGosbCl7cmV0dXJuIG5ldyBrMi5wcm90b3R5cGUuaW5pdChhLGIscCxqLGwpfVEuVHdlZW49azI7azIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjprMixpbml0OmZ1bmN0aW9uKGEsYixwLGosbCxtKXt0aGlzLmVsZW09YTt0aGlzLnByb3A9cDt0aGlzLmVhc2luZz1sfHwic3dpbmciO3RoaXMub3B0aW9ucz1iO3RoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKTt0aGlzLmVuZD1qO3RoaXMudW5pdD1tfHwoUS5jc3NOdW1iZXJbcF0/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPWsyLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTprMi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24ocCl7dmFyIGEsYj1rMi5wcm9wSG9va3NbdGhpcy5wcm9wXTtpZih0aGlzLm9wdGlvbnMuZHVyYXRpb24pe3RoaXMucG9zPWE9US5lYXNpbmdbdGhpcy5lYXNpbmddKHAsdGhpcy5vcHRpb25zLmR1cmF0aW9uKnAsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbil9ZWxzZXt0aGlzLnBvcz1hPXB9dGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmErdGhpcy5zdGFydDtpZih0aGlzLm9wdGlvbnMuc3RlcCl7dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyl9aWYoYiYmYi5zZXQpe2Iuc2V0KHRoaXMpfWVsc2V7azIucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKX1yZXR1cm4gdGhpc319O2syLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1rMi5wcm90b3R5cGU7azIucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKHQpe3ZhciByO2lmKHQuZWxlbVt0LnByb3BdIT1udWxsJiYoIXQuZWxlbS5zdHlsZXx8dC5lbGVtLnN0eWxlW3QucHJvcF09PW51bGwpKXtyZXR1cm4gdC5lbGVtW3QucHJvcF19cj1RLmNzcyh0LmVsZW0sdC5wcm9wLCIiKTtyZXR1cm4hcnx8cj09PSJhdXRvIj8wOnJ9LHNldDpmdW5jdGlvbih0KXtpZihRLmZ4LnN0ZXBbdC5wcm9wXSl7US5meC5zdGVwW3QucHJvcF0odCl9ZWxzZSBpZih0LmVsZW0uc3R5bGUmJih0LmVsZW0uc3R5bGVbUS5jc3NQcm9wc1t0LnByb3BdXSE9bnVsbHx8US5jc3NIb29rc1t0LnByb3BdKSl7US5zdHlsZSh0LmVsZW0sdC5wcm9wLHQubm93K3QudW5pdCl9ZWxzZXt0LmVsZW1bdC5wcm9wXT10Lm5vd319fX07azIucHJvcEhvb2tzLnNjcm9sbFRvcD1rMi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKHQpe2lmKHQuZWxlbS5ub2RlVHlwZSYmdC5lbGVtLnBhcmVudE5vZGUpe3QuZWxlbVt0LnByb3BdPXQubm93fX19O1EuZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24ocCl7cmV0dXJuIHB9LHN3aW5nOmZ1bmN0aW9uKHApe3JldHVybiAwLjUtTWF0aC5jb3MocCpNYXRoLlBJKS8yfX07US5meD1rMi5wcm90b3R5cGUuaW5pdDtRLmZ4LnN0ZXA9e307dmFyIGwyLG0yLG4yPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxvMj1uZXcgUmVnRXhwKCJeKD86KFsrLV0pPXwpKCIrZDErIikoW2EteiVdKikkIiwiaSIpLHAyPS9xdWV1ZUhvb2tzJC8scTI9W3YyXSxyMj17IioiOltmdW5jdGlvbihwLHYpe3ZhciB0PXRoaXMuY3JlYXRlVHdlZW4ocCx2KSxhPXQuY3VyKCksYj1vMi5leGVjKHYpLGo9YiYmYlszXXx8KFEuY3NzTnVtYmVyW3BdPyIiOiJweCIpLHM9KFEuY3NzTnVtYmVyW3BdfHxqIT09InB4IiYmK2EpJiZvMi5leGVjKFEuY3NzKHQuZWxlbSxwKSksbD0xLG09MjA7aWYocyYmc1szXSE9PWope2o9anx8c1szXTtiPWJ8fFtdO3M9K2F8fDE7ZG97bD1sfHwiLjUiO3M9cy9sO1Euc3R5bGUodC5lbGVtLHAscytqKX13aGlsZShsIT09KGw9dC5jdXIoKS9hKSYmbCE9PTEmJi0tbSl9aWYoYil7cz10LnN0YXJ0PStzfHwrYXx8MDt0LnVuaXQ9ajt0LmVuZD1iWzFdP3MrKGJbMV0rMSkqYlsyXTorYlsyXX1yZXR1cm4gdH1dfTtmdW5jdGlvbiBzMigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtsMj11bmRlZmluZWR9KTtyZXR1cm4obDI9US5ub3coKSl9ZnVuY3Rpb24gdDIodCxhKXt2YXIgYixqPXtoZWlnaHQ6dH0saT0wO2E9YT8xOjA7Zm9yKDtpPDQ7aSs9Mi1hKXtiPWUxW2ldO2pbIm1hcmdpbiIrYl09alsicGFkZGluZyIrYl09dH1pZihhKXtqLm9wYWNpdHk9ai53aWR0aD10fXJldHVybiBqfWZ1bmN0aW9uIHUyKHYscCxhKXt2YXIgdCxiPShyMltwXXx8W10pLmNvbmNhdChyMlsiKiJdKSxqPTAsbD1iLmxlbmd0aDtmb3IoO2o8bDtqKyspe2lmKCh0PWJbal0uY2FsbChhLHAsdikpKXtyZXR1cm4gdH19fWZ1bmN0aW9uIHYyKGEscCxiKXt2YXIgaix2LHQsbCxtLG4scixzLF89dGhpcyxyMz17fSxzMz1hLnN0eWxlLHQzPWEubm9kZVR5cGUmJmYxKGEpLHUzPVEuX2RhdGEoYSwiZnhzaG93Iik7aWYoIWIucXVldWUpe209US5fcXVldWVIb29rcyhhLCJmeCIpO2lmKG0udW5xdWV1ZWQ9PW51bGwpe20udW5xdWV1ZWQ9MDtuPW0uZW1wdHkuZmlyZTttLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtpZighbS51bnF1ZXVlZCl7bigpfX19bS51bnF1ZXVlZCsrO18uYWx3YXlzKGZ1bmN0aW9uKCl7Xy5hbHdheXMoZnVuY3Rpb24oKXttLnVucXVldWVkLS07aWYoIVEucXVldWUoYSwiZngiKS5sZW5ndGgpe20uZW1wdHkuZmlyZSgpfX0pfSl9aWYoYS5ub2RlVHlwZT09PTEmJigiaGVpZ2h0ImluIHB8fCJ3aWR0aCJpbiBwKSl7Yi5vdmVyZmxvdz1bczMub3ZlcmZsb3csczMub3ZlcmZsb3dYLHMzLm92ZXJmbG93WV07cj1RLmNzcyhhLCJkaXNwbGF5Iik7cz1yPT09Im5vbmUiP1EuX2RhdGEoYSwib2xkZGlzcGxheSIpfHxTMShhLm5vZGVOYW1lKTpyO2lmKHM9PT0iaW5saW5lIiYmUS5jc3MoYSwiZmxvYXQiKT09PSJub25lIil7aWYoIXguaW5saW5lQmxvY2tOZWVkc0xheW91dHx8UzEoYS5ub2RlTmFtZSk9PT0iaW5saW5lIil7czMuZGlzcGxheT0iaW5saW5lLWJsb2NrIn1lbHNle3MzLnpvb209MX19fWlmKGIub3ZlcmZsb3cpe3MzLm92ZXJmbG93PSJoaWRkZW4iO2lmKCF4LnNocmlua1dyYXBCbG9ja3MoKSl7Xy5hbHdheXMoZnVuY3Rpb24oKXtzMy5vdmVyZmxvdz1iLm92ZXJmbG93WzBdO3MzLm92ZXJmbG93WD1iLm92ZXJmbG93WzFdO3MzLm92ZXJmbG93WT1iLm92ZXJmbG93WzJdfSl9fWZvcihqIGluIHApe3Y9cFtqXTtpZihuMi5leGVjKHYpKXtkZWxldGUgcFtqXTt0PXR8fHY9PT0idG9nZ2xlIjtpZih2PT09KHQzPyJoaWRlIjoic2hvdyIpKXtpZih2PT09InNob3ciJiZ1MyYmdTNbal0hPT11bmRlZmluZWQpe3QzPXRydWV9ZWxzZXtjb250aW51ZX19cjNbal09dTMmJnUzW2pdfHxRLnN0eWxlKGEsail9ZWxzZXtyPXVuZGVmaW5lZH19aWYoIVEuaXNFbXB0eU9iamVjdChyMykpe2lmKHUzKXtpZigiaGlkZGVuImluIHUzKXt0Mz11My5oaWRkZW59fWVsc2V7dTM9US5fZGF0YShhLCJmeHNob3ciLHt9KX1pZih0KXt1My5oaWRkZW49IXQzfWlmKHQzKXtRKGEpLnNob3coKX1lbHNle18uZG9uZShmdW5jdGlvbigpe1EoYSkuaGlkZSgpfSl9Xy5kb25lKGZ1bmN0aW9uKCl7dmFyIGo7US5fcmVtb3ZlRGF0YShhLCJmeHNob3ciKTtmb3IoaiBpbiByMyl7US5zdHlsZShhLGoscjNbal0pfX0pO2ZvcihqIGluIHIzKXtsPXUyKHQzP3UzW2pdOjAsaixfKTtpZighKGogaW4gdTMpKXt1M1tqXT1sLnN0YXJ0O2lmKHQzKXtsLmVuZD1sLnN0YXJ0O2wuc3RhcnQ9aj09PSJ3aWR0aCJ8fGo9PT0iaGVpZ2h0Ij8xOjB9fX19ZWxzZSBpZigocj09PSJub25lIj9TMShhLm5vZGVOYW1lKTpyKT09PSJpbmxpbmUiKXtzMy5kaXNwbGF5PXJ9fWZ1bmN0aW9uIHcyKHAscyl7dmFyIGEsbixiLHYsajtmb3IoYSBpbiBwKXtuPVEuY2FtZWxDYXNlKGEpO2I9c1tuXTt2PXBbYV07aWYoUS5pc0FycmF5KHYpKXtiPXZbMV07dj1wW2FdPXZbMF19aWYoYSE9PW4pe3Bbbl09djtkZWxldGUgcFthXX1qPVEuY3NzSG9va3Nbbl07aWYoaiYmImV4cGFuZCJpbiBqKXt2PWouZXhwYW5kKHYpO2RlbGV0ZSBwW25dO2ZvcihhIGluIHYpe2lmKCEoYSBpbiBwKSl7cFthXT12W2FdO3NbYV09Yn19fWVsc2V7c1tuXT1ifX19ZnVuY3Rpb24geDIoYSxwLGIpe3ZhciByLHMsaj0wLGw9cTIubGVuZ3RoLG09US5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB0LmVsZW19KSx0PWZ1bmN0aW9uKCl7aWYocyl7cmV0dXJuIGZhbHNlfXZhciBfPWwyfHxzMigpLHIzPU1hdGgubWF4KDAsbi5zdGFydFRpbWUrbi5kdXJhdGlvbi1fKSxzMz1yMy9uLmR1cmF0aW9ufHwwLHQzPTEtczMsaj0wLGw9bi50d2VlbnMubGVuZ3RoO2Zvcig7ajxsO2orKyl7bi50d2VlbnNbal0ucnVuKHQzKX1tLm5vdGlmeVdpdGgoYSxbbix0MyxyM10pO2lmKHQzPDEmJmwpe3JldHVybiByM31lbHNle20ucmVzb2x2ZVdpdGgoYSxbbl0pO3JldHVybiBmYWxzZX19LG49bS5wcm9taXNlKHtlbGVtOmEscHJvcHM6US5leHRlbmQoe30scCksb3B0czpRLmV4dGVuZCh0cnVlLHtzcGVjaWFsRWFzaW5nOnt9fSxiKSxvcmlnaW5hbFByb3BlcnRpZXM6cCxvcmlnaW5hbE9wdGlvbnM6YixzdGFydFRpbWU6bDJ8fHMyKCksZHVyYXRpb246Yi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oXyxyMyl7dmFyIHMzPVEuVHdlZW4oYSxuLm9wdHMsXyxyMyxuLm9wdHMuc3BlY2lhbEVhc2luZ1tfXXx8bi5vcHRzLmVhc2luZyk7bi50d2VlbnMucHVzaChzMyk7cmV0dXJuIHMzfSxzdG9wOmZ1bmN0aW9uKF8pe3ZhciBqPTAsbD1fP24udHdlZW5zLmxlbmd0aDowO2lmKHMpe3JldHVybiB0aGlzfXM9dHJ1ZTtmb3IoO2o8bDtqKyspe24udHdlZW5zW2pdLnJ1bigxKX1pZihfKXttLnJlc29sdmVXaXRoKGEsW24sX10pfWVsc2V7bS5yZWplY3RXaXRoKGEsW24sX10pfXJldHVybiB0aGlzfX0pLHY9bi5wcm9wczt3Mih2LG4ub3B0cy5zcGVjaWFsRWFzaW5nKTtmb3IoO2o8bDtqKyspe3I9cTJbal0uY2FsbChuLGEsdixuLm9wdHMpO2lmKHIpe3JldHVybiByfX1RLm1hcCh2LHUyLG4pO2lmKFEuaXNGdW5jdGlvbihuLm9wdHMuc3RhcnQpKXtuLm9wdHMuc3RhcnQuY2FsbChhLG4pfVEuZngudGltZXIoUS5leHRlbmQodCx7ZWxlbTphLGFuaW06bixxdWV1ZTpuLm9wdHMucXVldWV9KSk7cmV0dXJuIG4ucHJvZ3Jlc3Mobi5vcHRzLnByb2dyZXNzKS5kb25lKG4ub3B0cy5kb25lLG4ub3B0cy5jb21wbGV0ZSkuZmFpbChuLm9wdHMuZmFpbCkuYWx3YXlzKG4ub3B0cy5hbHdheXMpfVEuQW5pbWF0aW9uPVEuZXh0ZW5kKHgyLHt0d2VlbmVyOmZ1bmN0aW9uKHAsYSl7aWYoUS5pc0Z1bmN0aW9uKHApKXthPXA7cD1bIioiXX1lbHNle3A9cC5zcGxpdCgiICIpfXZhciBiLGo9MCxsPXAubGVuZ3RoO2Zvcig7ajxsO2orKyl7Yj1wW2pdO3IyW2JdPXIyW2JdfHxbXTtyMltiXS51bnNoaWZ0KGEpfX0scHJlZmlsdGVyOmZ1bmN0aW9uKGEscCl7aWYocCl7cTIudW5zaGlmdChhKX1lbHNle3EyLnB1c2goYSl9fX0pO1Euc3BlZWQ9ZnVuY3Rpb24ocyxhLGIpe3ZhciBqPXMmJnR5cGVvZiBzPT09Im9iamVjdCI/US5leHRlbmQoe30scyk6e2NvbXBsZXRlOmJ8fCFiJiZhfHxRLmlzRnVuY3Rpb24ocykmJnMsZHVyYXRpb246cyxlYXNpbmc6YiYmYXx8YSYmIVEuaXNGdW5jdGlvbihhKSYmYX07ai5kdXJhdGlvbj1RLmZ4Lm9mZj8wOnR5cGVvZiBqLmR1cmF0aW9uPT09Im51bWJlciI/ai5kdXJhdGlvbjpqLmR1cmF0aW9uIGluIFEuZnguc3BlZWRzP1EuZnguc3BlZWRzW2ouZHVyYXRpb25dOlEuZnguc3BlZWRzLl9kZWZhdWx0O2lmKGoucXVldWU9PW51bGx8fGoucXVldWU9PT10cnVlKXtqLnF1ZXVlPSJmeCJ9ai5vbGQ9ai5jb21wbGV0ZTtqLmNvbXBsZXRlPWZ1bmN0aW9uKCl7aWYoUS5pc0Z1bmN0aW9uKGoub2xkKSl7ai5vbGQuY2FsbCh0aGlzKX1pZihqLnF1ZXVlKXtRLmRlcXVldWUodGhpcyxqLnF1ZXVlKX19O3JldHVybiBqfTtRLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKHMsdCxhLGIpe3JldHVybiB0aGlzLmZpbHRlcihmMSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0fSxzLGEsYil9LGFuaW1hdGU6ZnVuY3Rpb24ocCxzLGEsYil7dmFyIGo9US5pc0VtcHR5T2JqZWN0KHApLGw9US5zcGVlZChzLGEsYiksbT1mdW5jdGlvbigpe3ZhciBuPXgyKHRoaXMsUS5leHRlbmQoe30scCksbCk7aWYoanx8US5fZGF0YSh0aGlzLCJmaW5pc2giKSl7bi5zdG9wKHRydWUpfX07bS5maW5pc2g9bTtyZXR1cm4ganx8bC5xdWV1ZT09PWZhbHNlP3RoaXMuZWFjaChtKTp0aGlzLnF1ZXVlKGwucXVldWUsbSl9LHN0b3A6ZnVuY3Rpb24odCxhLGIpe3ZhciBzPWZ1bmN0aW9uKGope3ZhciBsPWouc3RvcDtkZWxldGUgai5zdG9wO2woYil9O2lmKHR5cGVvZiB0IT09InN0cmluZyIpe2I9YTthPXQ7dD11bmRlZmluZWR9aWYoYSYmdCE9PWZhbHNlKXt0aGlzLnF1ZXVlKHR8fCJmeCIsW10pfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaj10cnVlLGw9dCE9bnVsbCYmdCsicXVldWVIb29rcyIsbT1RLnRpbWVycyxuPVEuX2RhdGEodGhpcyk7aWYobCl7aWYobltsXSYmbltsXS5zdG9wKXtzKG5bbF0pfX1lbHNle2ZvcihsIGluIG4pe2lmKG5bbF0mJm5bbF0uc3RvcCYmcDIudGVzdChsKSl7cyhuW2xdKX19fWZvcihsPW0ubGVuZ3RoO2wtLTspe2lmKG1bbF0uZWxlbT09PXRoaXMmJih0PT1udWxsfHxtW2xdLnF1ZXVlPT09dCkpe21bbF0uYW5pbS5zdG9wKGIpO2o9ZmFsc2U7bS5zcGxpY2UobCwxKX19aWYoanx8IWIpe1EuZGVxdWV1ZSh0aGlzLHQpfX0pfSxmaW5pc2g6ZnVuY3Rpb24odCl7aWYodCE9PWZhbHNlKXt0PXR8fCJmeCJ9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBhLGI9US5fZGF0YSh0aGlzKSxqPWJbdCsicXVldWUiXSxsPWJbdCsicXVldWVIb29rcyJdLG09US50aW1lcnMsbj1qP2oubGVuZ3RoOjA7Yi5maW5pc2g9dHJ1ZTtRLnF1ZXVlKHRoaXMsdCxbXSk7aWYobCYmbC5zdG9wKXtsLnN0b3AuY2FsbCh0aGlzLHRydWUpfWZvcihhPW0ubGVuZ3RoO2EtLTspe2lmKG1bYV0uZWxlbT09PXRoaXMmJm1bYV0ucXVldWU9PT10KXttW2FdLmFuaW0uc3RvcCh0cnVlKTttLnNwbGljZShhLDEpfX1mb3IoYT0wO2E8bjthKyspe2lmKGpbYV0mJmpbYV0uZmluaXNoKXtqW2FdLmZpbmlzaC5jYWxsKHRoaXMpfX1kZWxldGUgYi5maW5pc2h9KX19KTtRLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGksbil7dmFyIGE9US5mbltuXTtRLmZuW25dPWZ1bmN0aW9uKHMsYixqKXtyZXR1cm4gcz09bnVsbHx8dHlwZW9mIHM9PT0iYm9vbGVhbiI/YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKHQyKG4sdHJ1ZSkscyxiLGopfX0pO1EuZWFjaCh7c2xpZGVEb3duOnQyKCJzaG93Iiksc2xpZGVVcDp0MigiaGlkZSIpLHNsaWRlVG9nZ2xlOnQyKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKG4scCl7US5mbltuXT1mdW5jdGlvbihzLGEsYil7cmV0dXJuIHRoaXMuYW5pbWF0ZShwLHMsYSxiKX19KTtRLnRpbWVycz1bXTtRLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgdCxhPVEudGltZXJzLGk9MDtsMj1RLm5vdygpO2Zvcig7aTxhLmxlbmd0aDtpKyspe3Q9YVtpXTtpZighdCgpJiZhW2ldPT09dCl7YS5zcGxpY2UoaS0tLDEpfX1pZighYS5sZW5ndGgpe1EuZnguc3RvcCgpfWwyPXVuZGVmaW5lZH07US5meC50aW1lcj1mdW5jdGlvbih0KXtRLnRpbWVycy5wdXNoKHQpO2lmKHQoKSl7US5meC5zdGFydCgpfWVsc2V7US50aW1lcnMucG9wKCl9fTtRLmZ4LmludGVydmFsPTEzO1EuZnguc3RhcnQ9ZnVuY3Rpb24oKXtpZighbTIpe20yPXNldEludGVydmFsKFEuZngudGljayxRLmZ4LmludGVydmFsKX19O1EuZnguc3RvcD1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwobTIpO20yPW51bGx9O1EuZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9O1EuZm4uZGVsYXk9ZnVuY3Rpb24odCxhKXt0PVEuZng/US5meC5zcGVlZHNbdF18fHQ6dDthPWF8fCJmeCI7cmV0dXJuIHRoaXMucXVldWUoYSxmdW5jdGlvbihuLGIpe3ZhciBqPXNldFRpbWVvdXQobix0KTtiLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoail9fSl9OyhmdW5jdGlvbigpe3ZhciBiLGoscyxhLGw7aj1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2ouc2V0QXR0cmlidXRlKCJjbGFzc05hbWUiLCJ0Iik7ai5pbm5lckhUTUw9IiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPiI7YT1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIilbMF07cz1KLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpO2w9cy5hcHBlbmRDaGlsZChKLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtiPWouZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF07YS5zdHlsZS5jc3NUZXh0PSJ0b3A6MXB4Ijt4LmdldFNldEF0dHJpYnV0ZT1qLmNsYXNzTmFtZSE9PSJ0Ijt4LnN0eWxlPS90b3AvLnRlc3QoYS5nZXRBdHRyaWJ1dGUoInN0eWxlIikpO3guaHJlZk5vcm1hbGl6ZWQ9YS5nZXRBdHRyaWJ1dGUoImhyZWYiKT09PSIvYSI7eC5jaGVja09uPSEhYi52YWx1ZTt4Lm9wdFNlbGVjdGVkPWwuc2VsZWN0ZWQ7eC5lbmN0eXBlPSEhSi5jcmVhdGVFbGVtZW50KCJmb3JtIikuZW5jdHlwZTtzLmRpc2FibGVkPXRydWU7eC5vcHREaXNhYmxlZD0hbC5kaXNhYmxlZDtiPUouY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKTt4LmlucHV0PWIuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPT09IiI7Yi52YWx1ZT0idCI7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpO3gucmFkaW9WYWx1ZT1iLnZhbHVlPT09InQifSkoKTt2YXIgeTI9L1xyL2c7US5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbih2KXt2YXIgYSxyLGIsaj10aGlzWzBdO2lmKCFhcmd1bWVudHMubGVuZ3RoKXtpZihqKXthPVEudmFsSG9va3Nbai50eXBlXXx8US52YWxIb29rc1tqLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO2lmKGEmJiJnZXQiaW4gYSYmKHI9YS5nZXQoaiwidmFsdWUiKSkhPT11bmRlZmluZWQpe3JldHVybiByfXI9ai52YWx1ZTtyZXR1cm4gdHlwZW9mIHI9PT0ic3RyaW5nIj9yLnJlcGxhY2UoeTIsIiIpOnI9PW51bGw/IiI6cn1yZXR1cm59Yj1RLmlzRnVuY3Rpb24odik7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXt2YXIgbDtpZih0aGlzLm5vZGVUeXBlIT09MSl7cmV0dXJufWlmKGIpe2w9di5jYWxsKHRoaXMsaSxRKHRoaXMpLnZhbCgpKX1lbHNle2w9dn1pZihsPT1udWxsKXtsPSIifWVsc2UgaWYodHlwZW9mIGw9PT0ibnVtYmVyIil7bCs9IiJ9ZWxzZSBpZihRLmlzQXJyYXkobCkpe2w9US5tYXAobCxmdW5jdGlvbih2KXtyZXR1cm4gdj09bnVsbD8iIjp2KyIifSl9YT1RLnZhbEhvb2tzW3RoaXMudHlwZV18fFEudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTtpZighYXx8ISgic2V0ImluIGEpfHxhLnNldCh0aGlzLGwsInZhbHVlIik9PT11bmRlZmluZWQpe3RoaXMudmFsdWU9bH19KX19KTtRLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciB2PVEuZmluZC5hdHRyKGEsInZhbHVlIik7cmV0dXJuIHYhPW51bGw/djpRLnRyaW0oUS50ZXh0KGEpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciB2LGIsaj1hLm9wdGlvbnMsbD1hLnNlbGVjdGVkSW5kZXgsbT1hLnR5cGU9PT0ic2VsZWN0LW9uZSJ8fGw8MCxuPW0/bnVsbDpbXSxwPW0/bCsxOmoubGVuZ3RoLGk9bDwwP3A6bT9sOjA7Zm9yKDtpPHA7aSsrKXtiPWpbaV07aWYoKGIuc2VsZWN0ZWR8fGk9PT1sKSYmKHgub3B0RGlzYWJsZWQ/IWIuZGlzYWJsZWQ6Yi5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIik9PT1udWxsKSYmKCFiLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFRLm5vZGVOYW1lKGIucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe3Y9UShiKS52YWwoKTtpZihtKXtyZXR1cm4gdn1uLnB1c2godil9fXJldHVybiBufSxzZXQ6ZnVuY3Rpb24oYSx2KXt2YXIgYixqLGw9YS5vcHRpb25zLG09US5tYWtlQXJyYXkodiksaT1sLmxlbmd0aDt3aGlsZShpLS0pe2o9bFtpXTtpZihRLmluQXJyYXkoUS52YWxIb29rcy5vcHRpb24uZ2V0KGopLG0pPj0wKXt0cnl7ai5zZWxlY3RlZD1iPXRydWV9Y2F0Y2goXyl7ai5zY3JvbGxIZWlnaHR9fWVsc2V7ai5zZWxlY3RlZD1mYWxzZX19aWYoIWIpe2Euc2VsZWN0ZWRJbmRleD0tMX1yZXR1cm4gbH19fX0pO1EuZWFjaChbInJhZGlvIiwiY2hlY2tib3giXSxmdW5jdGlvbigpe1EudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihhLHYpe2lmKFEuaXNBcnJheSh2KSl7cmV0dXJuKGEuY2hlY2tlZD1RLmluQXJyYXkoUShhKS52YWwoKSx2KT49MCl9fX07aWYoIXguY2hlY2tPbil7US52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPT09bnVsbD8ib24iOmEudmFsdWV9fX0pO3ZhciB6MixBMixCMj1RLmV4cHIuYXR0ckhhbmRsZSxDMj0vXig/OmNoZWNrZWR8c2VsZWN0ZWQpJC9pLEQyPXguZ2V0U2V0QXR0cmlidXRlLEUyPXguaW5wdXQ7US5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24obix2KXtyZXR1cm4gZzEodGhpcyxRLmF0dHIsbix2LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1EucmVtb3ZlQXR0cih0aGlzLG4pfSl9fSk7US5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxuLHYpe3ZhciBiLHIsaj1hLm5vZGVUeXBlO2lmKCFhfHxqPT09M3x8aj09PTh8fGo9PT0yKXtyZXR1cm59aWYodHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09WCl7cmV0dXJuIFEucHJvcChhLG4sdil9aWYoaiE9PTF8fCFRLmlzWE1MRG9jKGEpKXtuPW4udG9Mb3dlckNhc2UoKTtiPVEuYXR0ckhvb2tzW25dfHwoUS5leHByLm1hdGNoLmJvb2wudGVzdChuKT9BMjp6Mil9aWYodiE9PXVuZGVmaW5lZCl7aWYodj09PW51bGwpe1EucmVtb3ZlQXR0cihhLG4pfWVsc2UgaWYoYiYmInNldCJpbiBiJiYocj1iLnNldChhLHYsbikpIT09dW5kZWZpbmVkKXtyZXR1cm4gcn1lbHNle2Euc2V0QXR0cmlidXRlKG4sdisiIik7cmV0dXJuIHZ9fWVsc2UgaWYoYiYmImdldCJpbiBiJiYocj1iLmdldChhLG4pKSE9PW51bGwpe3JldHVybiByfWVsc2V7cj1RLmZpbmQuYXR0cihhLG4pO3JldHVybiByPT1udWxsP3VuZGVmaW5lZDpyfX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhLHYpe3ZhciBuLHAsaT0wLGI9diYmdi5tYXRjaChQKTtpZihiJiZhLm5vZGVUeXBlPT09MSl7d2hpbGUoKG49YltpKytdKSl7cD1RLnByb3BGaXhbbl18fG47aWYoUS5leHByLm1hdGNoLmJvb2wudGVzdChuKSl7aWYoRTImJkQyfHwhQzIudGVzdChuKSl7YVtwXT1mYWxzZX1lbHNle2FbUS5jYW1lbENhc2UoImRlZmF1bHQtIituKV09YVtwXT1mYWxzZX19ZWxzZXtRLmF0dHIoYSxuLCIiKX1hLnJlbW92ZUF0dHJpYnV0ZShEMj9uOnApfX19LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsdil7aWYoIXgucmFkaW9WYWx1ZSYmdj09PSJyYWRpbyImJlEubm9kZU5hbWUoYSwiaW5wdXQiKSl7dmFyIGI9YS52YWx1ZTthLnNldEF0dHJpYnV0ZSgidHlwZSIsdik7aWYoYil7YS52YWx1ZT1ifXJldHVybiB2fX19fX0pO0EyPXtzZXQ6ZnVuY3Rpb24oYSx2LG4pe2lmKHY9PT1mYWxzZSl7US5yZW1vdmVBdHRyKGEsbil9ZWxzZSBpZihFMiYmRDJ8fCFDMi50ZXN0KG4pKXthLnNldEF0dHJpYnV0ZSghRDImJlEucHJvcEZpeFtuXXx8bixuKX1lbHNle2FbUS5jYW1lbENhc2UoImRlZmF1bHQtIituKV09YVtuXT10cnVlfXJldHVybiBufX07US5lYWNoKFEuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGksbil7dmFyIGE9QjJbbl18fFEuZmluZC5hdHRyO0IyW25dPUUyJiZEMnx8IUMyLnRlc3Qobik/ZnVuY3Rpb24oYixuLGope3ZhciByLGw7aWYoIWope2w9QjJbbl07QjJbbl09cjtyPWEoYixuLGopIT1udWxsP24udG9Mb3dlckNhc2UoKTpudWxsO0IyW25dPWx9cmV0dXJuIHJ9OmZ1bmN0aW9uKGIsbixqKXtpZighail7cmV0dXJuIGJbUS5jYW1lbENhc2UoImRlZmF1bHQtIituKV0/bi50b0xvd2VyQ2FzZSgpOm51bGx9fX0pO2lmKCFFMnx8IUQyKXtRLmF0dHJIb29rcy52YWx1ZT17c2V0OmZ1bmN0aW9uKGEsdixuKXtpZihRLm5vZGVOYW1lKGEsImlucHV0Iikpe2EuZGVmYXVsdFZhbHVlPXZ9ZWxzZXtyZXR1cm4gejImJnoyLnNldChhLHYsbil9fX19aWYoIUQyKXt6Mj17c2V0OmZ1bmN0aW9uKGEsdixuKXt2YXIgcj1hLmdldEF0dHJpYnV0ZU5vZGUobik7aWYoIXIpe2Euc2V0QXR0cmlidXRlTm9kZSgocj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKG4pKSl9ci52YWx1ZT12Kz0iIjtpZihuPT09InZhbHVlInx8dj09PWEuZ2V0QXR0cmlidXRlKG4pKXtyZXR1cm4gdn19fTtCMi5pZD1CMi5uYW1lPUIyLmNvb3Jkcz1mdW5jdGlvbihhLG4sYil7dmFyIHI7aWYoIWIpe3JldHVybihyPWEuZ2V0QXR0cmlidXRlTm9kZShuKSkmJnIudmFsdWUhPT0iIj9yLnZhbHVlOm51bGx9fTtRLnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGEsbil7dmFyIHI9YS5nZXRBdHRyaWJ1dGVOb2RlKG4pO2lmKHImJnIuc3BlY2lmaWVkKXtyZXR1cm4gci52YWx1ZX19LHNldDp6Mi5zZXR9O1EuYXR0ckhvb2tzLmNvbnRlbnRlZGl0YWJsZT17c2V0OmZ1bmN0aW9uKGEsdixuKXt6Mi5zZXQoYSx2PT09IiI/ZmFsc2U6dixuKX19O1EuZWFjaChbIndpZHRoIiwiaGVpZ2h0Il0sZnVuY3Rpb24oaSxuKXtRLmF0dHJIb29rc1tuXT17c2V0OmZ1bmN0aW9uKGEsdil7aWYodj09PSIiKXthLnNldEF0dHJpYnV0ZShuLCJhdXRvIik7cmV0dXJuIHZ9fX19KX1pZigheC5zdHlsZSl7US5hdHRySG9va3Muc3R5bGU9e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fHx1bmRlZmluZWR9LHNldDpmdW5jdGlvbihhLHYpe3JldHVybihhLnN0eWxlLmNzc1RleHQ9disiIil9fX12YXIgRjI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksRzI9L14oPzphfGFyZWEpJC9pO1EuZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKG4sdil7cmV0dXJuIGcxKHRoaXMsUS5wcm9wLG4sdixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKG4pe249US5wcm9wRml4W25dfHxuO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0cnl7dGhpc1tuXT11bmRlZmluZWQ7ZGVsZXRlIHRoaXNbbl19Y2F0Y2goZSl7fX0pfX0pO1EuZXh0ZW5kKHtwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn0scHJvcDpmdW5jdGlvbihhLG4sdil7dmFyIHIsYixqLGw9YS5ub2RlVHlwZTtpZighYXx8bD09PTN8fGw9PT04fHxsPT09Mil7cmV0dXJufWo9bCE9PTF8fCFRLmlzWE1MRG9jKGEpO2lmKGope249US5wcm9wRml4W25dfHxuO2I9US5wcm9wSG9va3Nbbl19aWYodiE9PXVuZGVmaW5lZCl7cmV0dXJuIGImJiJzZXQiaW4gYiYmKHI9Yi5zZXQoYSx2LG4pKSE9PXVuZGVmaW5lZD9yOihhW25dPXYpfWVsc2V7cmV0dXJuIGImJiJnZXQiaW4gYiYmKHI9Yi5nZXQoYSxuKSkhPT1udWxsP3I6YVtuXX19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXt2YXIgdD1RLmZpbmQuYXR0cihhLCJ0YWJpbmRleCIpO3JldHVybiB0P3BhcnNlSW50KHQsMTApOkYyLnRlc3QoYS5ub2RlTmFtZSl8fEcyLnRlc3QoYS5ub2RlTmFtZSkmJmEuaHJlZj8wOi0xfX19fSk7aWYoIXguaHJlZk5vcm1hbGl6ZWQpe1EuZWFjaChbImhyZWYiLCJzcmMiXSxmdW5jdGlvbihpLG4pe1EucHJvcEhvb2tzW25dPXtnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKG4sNCl9fX0pfWlmKCF4Lm9wdFNlbGVjdGVkKXtRLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBwPWEucGFyZW50Tm9kZTtpZihwKXtwLnNlbGVjdGVkSW5kZXg7aWYocC5wYXJlbnROb2RlKXtwLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleH19cmV0dXJuIG51bGx9fX1RLmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe1EucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KTtpZigheC5lbmN0eXBlKXtRLnByb3BGaXguZW5jdHlwZT0iZW5jb2RpbmcifXZhciBIMj0vW1x0XHJcblxmXS9nO1EuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbih2KXt2YXIgYSxiLGwsbSxqLG4saT0wLHA9dGhpcy5sZW5ndGgscj10eXBlb2Ygdj09PSJzdHJpbmciJiZ2O2lmKFEuaXNGdW5jdGlvbih2KSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihqKXtRKHRoaXMpLmFkZENsYXNzKHYuY2FsbCh0aGlzLGosdGhpcy5jbGFzc05hbWUpKX0pfWlmKHIpe2E9KHZ8fCIiKS5tYXRjaChQKXx8W107Zm9yKDtpPHA7aSsrKXtiPXRoaXNbaV07bD1iLm5vZGVUeXBlPT09MSYmKGIuY2xhc3NOYW1lPygiICIrYi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKEgyLCIgIik6IiAiKTtpZihsKXtqPTA7d2hpbGUoKG09YVtqKytdKSl7aWYobC5pbmRleE9mKCIgIittKyIgIik8MCl7bCs9bSsiICJ9fW49US50cmltKGwpO2lmKGIuY2xhc3NOYW1lIT09bil7Yi5jbGFzc05hbWU9bn19fX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24odil7dmFyIGEsYixsLG0saixuLGk9MCxwPXRoaXMubGVuZ3RoLHI9YXJndW1lbnRzLmxlbmd0aD09PTB8fHR5cGVvZiB2PT09InN0cmluZyImJnY7aWYoUS5pc0Z1bmN0aW9uKHYpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope1EodGhpcykucmVtb3ZlQ2xhc3Modi5jYWxsKHRoaXMsaix0aGlzLmNsYXNzTmFtZSkpfSl9aWYocil7YT0odnx8IiIpLm1hdGNoKFApfHxbXTtmb3IoO2k8cDtpKyspe2I9dGhpc1tpXTtsPWIubm9kZVR5cGU9PT0xJiYoYi5jbGFzc05hbWU/KCIgIitiLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoSDIsIiAiKToiIik7aWYobCl7aj0wO3doaWxlKChtPWFbaisrXSkpe3doaWxlKGwuaW5kZXhPZigiICIrbSsiICIpPj0wKXtsPWwucmVwbGFjZSgiICIrbSsiICIsIiAiKX19bj12P1EudHJpbShsKToiIjtpZihiLmNsYXNzTmFtZSE9PW4pe2IuY2xhc3NOYW1lPW59fX19cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKHYscyl7dmFyIHQ9dHlwZW9mIHY7aWYodHlwZW9mIHM9PT0iYm9vbGVhbiImJnQ9PT0ic3RyaW5nIil7cmV0dXJuIHM/dGhpcy5hZGRDbGFzcyh2KTp0aGlzLnJlbW92ZUNsYXNzKHYpfWlmKFEuaXNGdW5jdGlvbih2KSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXtRKHRoaXMpLnRvZ2dsZUNsYXNzKHYuY2FsbCh0aGlzLGksdGhpcy5jbGFzc05hbWUscykscyl9KX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYodD09PSJzdHJpbmciKXt2YXIgYSxpPTAsYj1RKHRoaXMpLGo9di5tYXRjaChQKXx8W107d2hpbGUoKGE9altpKytdKSl7aWYoYi5oYXNDbGFzcyhhKSl7Yi5yZW1vdmVDbGFzcyhhKX1lbHNle2IuYWRkQ2xhc3MoYSl9fX1lbHNlIGlmKHQ9PT1YfHx0PT09ImJvb2xlYW4iKXtpZih0aGlzLmNsYXNzTmFtZSl7US5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSl9dGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fHY9PT1mYWxzZT8iIjpRLl9kYXRhKHRoaXMsIl9fY2xhc3NOYW1lX18iKXx8IiJ9fSl9LGhhc0NsYXNzOmZ1bmN0aW9uKHMpe3ZhciBhPSIgIitzKyIgIixpPTAsbD10aGlzLmxlbmd0aDtmb3IoO2k8bDtpKyspe2lmKHRoaXNbaV0ubm9kZVR5cGU9PT0xJiYoIiAiK3RoaXNbaV0uY2xhc3NOYW1lKyIgIikucmVwbGFjZShIMiwiICIpLmluZGV4T2YoYSk+PTApe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9fSk7US5lYWNoKCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgIisibW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgIisiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIpLnNwbGl0KCIgIiksZnVuY3Rpb24oaSxuKXtRLmZuW25dPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKG4sbnVsbCxhLGIpOnRoaXMudHJpZ2dlcihuKX19KTtRLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9LGJpbmQ6ZnVuY3Rpb24odCxhLGIpe3JldHVybiB0aGlzLm9uKHQsbnVsbCxhLGIpfSx1bmJpbmQ6ZnVuY3Rpb24odCxhKXtyZXR1cm4gdGhpcy5vZmYodCxudWxsLGEpfSxkZWxlZ2F0ZTpmdW5jdGlvbihzLHQsYSxiKXtyZXR1cm4gdGhpcy5vbih0LHMsYSxiKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihzLHQsYSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg9PT0xP3RoaXMub2ZmKHMsIioqIik6dGhpcy5vZmYodCxzfHwiKioiLGEpfX0pO3ZhciBJMj1RLm5vdygpO3ZhciBKMj0oL1w/Lyk7dmFyIEsyPS8oLCl8KFxbfHspfCh9fF0pfCIoPzpbXiJcXFxyXG5dfFxcWyJcXFwvYmZucnRdfFxcdVtcZGEtZkEtRl17NH0pKiJccyo6P3x0cnVlfGZhbHNlfG51bGx8LT8oPyEwXGQpXGQrKD86XC5cZCt8KSg/OltlRV1bKy1dP1xkK3wpL2c7US5wYXJzZUpTT049ZnVuY3Rpb24oYSl7aWYody5KU09OJiZ3LkpTT04ucGFyc2Upe3JldHVybiB3LkpTT04ucGFyc2UoYSsiIil9dmFyIHIsYj1udWxsLHM9US50cmltKGErIiIpO3JldHVybiBzJiYhUS50cmltKHMucmVwbGFjZShLMixmdW5jdGlvbih0LGosbCxtKXtpZihyJiZqKXtiPTB9aWYoYj09PTApe3JldHVybiB0fXI9bHx8ajtiKz0hbS0hbDtyZXR1cm4iIn0pKT8oRnVuY3Rpb24oInJldHVybiAiK3MpKSgpOlEuZXJyb3IoIkludmFsaWQgSlNPTjogIithKX07US5wYXJzZVhNTD1mdW5jdGlvbihhKXt2YXIgYix0O2lmKCFhfHx0eXBlb2YgYSE9PSJzdHJpbmciKXtyZXR1cm4gbnVsbH10cnl7aWYody5ET01QYXJzZXIpe3Q9bmV3IERPTVBhcnNlcigpO2I9dC5wYXJzZUZyb21TdHJpbmcoYSwidGV4dC94bWwiKX1lbHNle2I9bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKTtiLmFzeW5jPSJmYWxzZSI7Yi5sb2FkWE1MKGEpfX1jYXRjaChlKXtiPXVuZGVmaW5lZH1pZighYnx8IWIuZG9jdW1lbnRFbGVtZW50fHxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aCl7US5lcnJvcigiSW52YWxpZCBYTUw6ICIrYSl9cmV0dXJuIGJ9O3ZhciBMMixNMixOMj0vIy4qJC8sTzI9LyhbPyZdKV89W14mXSovLFAyPS9eKC4qPyk6WyBcdF0qKFteXHJcbl0qKVxyPyQvbWcsUTI9L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sUjI9L14oPzpHRVR8SEVBRCkkLyxTMj0vXlwvXC8vLFQyPS9eKFtcdy4rLV0rOikoPzpcL1wvKD86W15cLz8jXSpAfCkoW15cLz8jOl0qKSg/OjooXGQrKXwpfCkvLFUyPXt9LFYyPXt9LFcyPSIqLyIuY29uY2F0KCIqIik7dHJ5e00yPWxvY2F0aW9uLmhyZWZ9Y2F0Y2goZSl7TTI9Si5jcmVhdGVFbGVtZW50KCJhIik7TTIuaHJlZj0iIjtNMj1NMi5ocmVmfUwyPVQyLmV4ZWMoTTIudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIFgyKHMpe3JldHVybiBmdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBhIT09InN0cmluZyIpe2I9YTthPSIqIn12YXIgaixpPTAsbD1hLnRvTG93ZXJDYXNlKCkubWF0Y2goUCl8fFtdO2lmKFEuaXNGdW5jdGlvbihiKSl7d2hpbGUoKGo9bFtpKytdKSl7aWYoai5jaGFyQXQoMCk9PT0iKyIpe2o9ai5zbGljZSgxKXx8IioiOyhzW2pdPXNbal18fFtdKS51bnNoaWZ0KGIpfWVsc2V7KHNbal09c1tqXXx8W10pLnB1c2goYil9fX19fWZ1bmN0aW9uIFkyKHMsYSxiLGope3ZhciBsPXt9LG09KHM9PT1WMik7ZnVuY3Rpb24gbihwKXt2YXIgcjtsW3BdPXRydWU7US5lYWNoKHNbcF18fFtdLGZ1bmN0aW9uKF8sdCl7dmFyIHY9dChhLGIsaik7aWYodHlwZW9mIHY9PT0ic3RyaW5nIiYmIW0mJiFsW3ZdKXthLmRhdGFUeXBlcy51bnNoaWZ0KHYpO24odik7cmV0dXJuIGZhbHNlfWVsc2UgaWYobSl7cmV0dXJuIShyPXYpfX0pO3JldHVybiByfXJldHVybiBuKGEuZGF0YVR5cGVzWzBdKXx8IWxbIioiXSYmbigiKiIpfWZ1bmN0aW9uIFoyKHQscyl7dmFyIGEsYixqPVEuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoYiBpbiBzKXtpZihzW2JdIT09dW5kZWZpbmVkKXsoaltiXT90OihhfHwoYT17fSkpKVtiXT1zW2JdfX1pZihhKXtRLmV4dGVuZCh0cnVlLHQsYSl9cmV0dXJuIHR9ZnVuY3Rpb24gJDIocyxqLHIpe3ZhciBhLGIsbCx0LG09cy5jb250ZW50cyxuPXMuZGF0YVR5cGVzO3doaWxlKG5bMF09PT0iKiIpe24uc2hpZnQoKTtpZihiPT09dW5kZWZpbmVkKXtiPXMubWltZVR5cGV8fGouZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpfX1pZihiKXtmb3IodCBpbiBtKXtpZihtW3RdJiZtW3RdLnRlc3QoYikpe24udW5zaGlmdCh0KTticmVha319fWlmKG5bMF1pbiByKXtsPW5bMF19ZWxzZXtmb3IodCBpbiByKXtpZighblswXXx8cy5jb252ZXJ0ZXJzW3QrIiAiK25bMF1dKXtsPXQ7YnJlYWt9aWYoIWEpe2E9dH19bD1sfHxhfWlmKGwpe2lmKGwhPT1uWzBdKXtuLnVuc2hpZnQobCl9cmV0dXJuIHJbbF19fWZ1bmN0aW9uIF8yKHMscixqLGEpe3ZhciBiLGwsbSx0LHAsbj17fSx2PXMuZGF0YVR5cGVzLnNsaWNlKCk7aWYodlsxXSl7Zm9yKG0gaW4gcy5jb252ZXJ0ZXJzKXtuW20udG9Mb3dlckNhc2UoKV09cy5jb252ZXJ0ZXJzW21dfX1sPXYuc2hpZnQoKTt3aGlsZShsKXtpZihzLnJlc3BvbnNlRmllbGRzW2xdKXtqW3MucmVzcG9uc2VGaWVsZHNbbF1dPXJ9aWYoIXAmJmEmJnMuZGF0YUZpbHRlcil7cj1zLmRhdGFGaWx0ZXIocixzLmRhdGFUeXBlKX1wPWw7bD12LnNoaWZ0KCk7aWYobCl7aWYobD09PSIqIil7bD1wfWVsc2UgaWYocCE9PSIqIiYmcCE9PWwpe209bltwKyIgIitsXXx8blsiKiAiK2xdO2lmKCFtKXtmb3IoYiBpbiBuKXt0PWIuc3BsaXQoIiAiKTtpZih0WzFdPT09bCl7bT1uW3ArIiAiK3RbMF1dfHxuWyIqICIrdFswXV07aWYobSl7aWYobT09PXRydWUpe209bltiXX1lbHNlIGlmKG5bYl0hPT10cnVlKXtsPXRbMF07di51bnNoaWZ0KHRbMV0pfWJyZWFrfX19fWlmKG0hPT10cnVlKXtpZihtJiZzWyJ0aHJvd3MiXSl7cj1tKHIpfWVsc2V7dHJ5e3I9bShyKX1jYXRjaChlKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjptP2U6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3ArIiB0byAiK2x9fX19fX19cmV0dXJue3N0YXRlOiJzdWNjZXNzIixkYXRhOnJ9fVEuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpNMix0eXBlOiJHRVQiLGlzTG9jYWw6UTIudGVzdChMMlsxXSksZ2xvYmFsOnRydWUscHJvY2Vzc0RhdGE6dHJ1ZSxhc3luYzp0cnVlLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpXMix0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOnRydWUsInRleHQganNvbiI6US5wYXJzZUpTT04sInRleHQgeG1sIjpRLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOnRydWUsY29udGV4dDp0cnVlfX0sYWpheFNldHVwOmZ1bmN0aW9uKHQscyl7cmV0dXJuIHM/WjIoWjIodCxRLmFqYXhTZXR0aW5ncykscyk6WjIoUS5hamF4U2V0dGluZ3MsdCl9LGFqYXhQcmVmaWx0ZXI6WDIoVTIpLGFqYXhUcmFuc3BvcnQ6WDIoVjIpLGFqYXg6ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYT09PSJvYmplY3QiKXtiPWE7YT11bmRlZmluZWR9Yj1ifHx7fTt2YXIgcCxpLGoscix0LGwsbSxuLHM9US5hamF4U2V0dXAoe30sYiksdj1zLmNvbnRleHR8fHMsXz1zLmNvbnRleHQmJih2Lm5vZGVUeXBlfHx2LmpxdWVyeSk/USh2KTpRLmV2ZW50LHIzPVEuRGVmZXJyZWQoKSxzMz1RLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSx0Mz1zLnN0YXR1c0NvZGV8fHt9LHUzPXt9LHYzPXt9LHczPTAseDM9ImNhbmNlbGVkIix5Mz17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKEEzKXt2YXIgQjM7aWYodzM9PT0yKXtpZighbil7bj17fTt3aGlsZSgoQjM9UDIuZXhlYyhyKSkpe25bQjNbMV0udG9Mb3dlckNhc2UoKV09QjNbMl19fUIzPW5bQTMudG9Mb3dlckNhc2UoKV19cmV0dXJuIEIzPT1udWxsP251bGw6QjN9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiB3Mz09PTI/cjpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKEEzLEIzKXt2YXIgQzM9QTMudG9Mb3dlckNhc2UoKTtpZighdzMpe0EzPXYzW0MzXT12M1tDM118fEEzO3UzW0EzXT1CM31yZXR1cm4gdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihBMyl7aWYoIXczKXtzLm1pbWVUeXBlPUEzfXJldHVybiB0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKEEzKXt2YXIgQjM7aWYoQTMpe2lmKHczPDIpe2ZvcihCMyBpbiBBMyl7dDNbQjNdPVt0M1tCM10sQTNbQjNdXX19ZWxzZXt5My5hbHdheXMoQTNbeTMuc3RhdHVzXSl9fXJldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihBMyl7dmFyIEIzPUEzfHx4MztpZihtKXttLmFib3J0KEIzKX16MygwLEIzKTtyZXR1cm4gdGhpc319O3IzLnByb21pc2UoeTMpLmNvbXBsZXRlPXMzLmFkZDt5My5zdWNjZXNzPXkzLmRvbmU7eTMuZXJyb3I9eTMuZmFpbDtzLnVybD0oKGF8fHMudXJsfHxNMikrIiIpLnJlcGxhY2UoTjIsIiIpLnJlcGxhY2UoUzIsTDJbMV0rIi8vIik7cy50eXBlPWIubWV0aG9kfHxiLnR5cGV8fHMubWV0aG9kfHxzLnR5cGU7cy5kYXRhVHlwZXM9US50cmltKHMuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChQKXx8WyIiXTtpZihzLmNyb3NzRG9tYWluPT1udWxsKXtwPVQyLmV4ZWMocy51cmwudG9Mb3dlckNhc2UoKSk7cy5jcm9zc0RvbWFpbj0hIShwJiYocFsxXSE9PUwyWzFdfHxwWzJdIT09TDJbMl18fChwWzNdfHwocFsxXT09PSJodHRwOiI/IjgwIjoiNDQzIikpIT09KEwyWzNdfHwoTDJbMV09PT0iaHR0cDoiPyI4MCI6IjQ0MyIpKSkpfWlmKHMuZGF0YSYmcy5wcm9jZXNzRGF0YSYmdHlwZW9mIHMuZGF0YSE9PSJzdHJpbmciKXtzLmRhdGE9US5wYXJhbShzLmRhdGEscy50cmFkaXRpb25hbCl9WTIoVTIscyxiLHkzKTtpZih3Mz09PTIpe3JldHVybiB5M31sPXMuZ2xvYmFsO2lmKGwmJlEuYWN0aXZlKys9PT0wKXtRLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpfXMudHlwZT1zLnR5cGUudG9VcHBlckNhc2UoKTtzLmhhc0NvbnRlbnQ9IVIyLnRlc3Qocy50eXBlKTtqPXMudXJsO2lmKCFzLmhhc0NvbnRlbnQpe2lmKHMuZGF0YSl7aj0ocy51cmwrPShKMi50ZXN0KGopPyImIjoiPyIpK3MuZGF0YSk7ZGVsZXRlIHMuZGF0YX1pZihzLmNhY2hlPT09ZmFsc2Upe3MudXJsPU8yLnRlc3Qoaik/ai5yZXBsYWNlKE8yLCIkMV89IitJMisrKTpqKyhKMi50ZXN0KGopPyImIjoiPyIpKyJfPSIrSTIrK319aWYocy5pZk1vZGlmaWVkKXtpZihRLmxhc3RNb2RpZmllZFtqXSl7eTMuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLFEubGFzdE1vZGlmaWVkW2pdKX1pZihRLmV0YWdbal0pe3kzLnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLFEuZXRhZ1tqXSl9fWlmKHMuZGF0YSYmcy5oYXNDb250ZW50JiZzLmNvbnRlbnRUeXBlIT09ZmFsc2V8fGIuY29udGVudFR5cGUpe3kzLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIscy5jb250ZW50VHlwZSl9eTMuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixzLmRhdGFUeXBlc1swXSYmcy5hY2NlcHRzW3MuZGF0YVR5cGVzWzBdXT9zLmFjY2VwdHNbcy5kYXRhVHlwZXNbMF1dKyhzLmRhdGFUeXBlc1swXSE9PSIqIj8iLCAiK1cyKyI7IHE9MC4wMSI6IiIpOnMuYWNjZXB0c1siKiJdKTtmb3IoaSBpbiBzLmhlYWRlcnMpe3kzLnNldFJlcXVlc3RIZWFkZXIoaSxzLmhlYWRlcnNbaV0pfWlmKHMuYmVmb3JlU2VuZCYmKHMuYmVmb3JlU2VuZC5jYWxsKHYseTMscyk9PT1mYWxzZXx8dzM9PT0yKSl7cmV0dXJuIHkzLmFib3J0KCl9eDM9ImFib3J0Ijtmb3IoaSBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl7eTNbaV0oc1tpXSl9bT1ZMihWMixzLGIseTMpO2lmKCFtKXt6MygtMSwiTm8gVHJhbnNwb3J0Iil9ZWxzZXt5My5yZWFkeVN0YXRlPTE7aWYobCl7Xy50cmlnZ2VyKCJhamF4U2VuZCIsW3kzLHNdKX1pZihzLmFzeW5jJiZzLnRpbWVvdXQ+MCl7dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eTMuYWJvcnQoInRpbWVvdXQiKX0scy50aW1lb3V0KX10cnl7dzM9MTttLnNlbmQodTMsejMpfWNhdGNoKGUpe2lmKHczPDIpe3ozKC0xLGUpfWVsc2V7dGhyb3cgZX19fWZ1bmN0aW9uIHozKEEzLEIzLEMzLEQzKXt2YXIgRTMsRjMsRzMsSDMsSTMsSjM9QjM7aWYodzM9PT0yKXtyZXR1cm59dzM9MjtpZih0KXtjbGVhclRpbWVvdXQodCl9bT11bmRlZmluZWQ7cj1EM3x8IiI7eTMucmVhZHlTdGF0ZT1BMz4wPzQ6MDtFMz1BMz49MjAwJiZBMzwzMDB8fEEzPT09MzA0O2lmKEMzKXtIMz0kMihzLHkzLEMzKX1IMz1fMihzLEgzLHkzLEUzKTtpZihFMyl7aWYocy5pZk1vZGlmaWVkKXtJMz15My5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpO2lmKEkzKXtRLmxhc3RNb2RpZmllZFtqXT1JM31JMz15My5nZXRSZXNwb25zZUhlYWRlcigiZXRhZyIpO2lmKEkzKXtRLmV0YWdbal09STN9fWlmKEEzPT09MjA0fHxzLnR5cGU9PT0iSEVBRCIpe0ozPSJub2NvbnRlbnQifWVsc2UgaWYoQTM9PT0zMDQpe0ozPSJub3Rtb2RpZmllZCJ9ZWxzZXtKMz1IMy5zdGF0ZTtGMz1IMy5kYXRhO0czPUgzLmVycm9yO0UzPSFHM319ZWxzZXtHMz1KMztpZihBM3x8IUozKXtKMz0iZXJyb3IiO2lmKEEzPDApe0EzPTB9fX15My5zdGF0dXM9QTM7eTMuc3RhdHVzVGV4dD0oQjN8fEozKSsiIjtpZihFMyl7cjMucmVzb2x2ZVdpdGgodixbRjMsSjMseTNdKX1lbHNle3IzLnJlamVjdFdpdGgodixbeTMsSjMsRzNdKX15My5zdGF0dXNDb2RlKHQzKTt0Mz11bmRlZmluZWQ7aWYobCl7Xy50cmlnZ2VyKEUzPyJhamF4U3VjY2VzcyI6ImFqYXhFcnJvciIsW3kzLHMsRTM/RjM6RzNdKX1zMy5maXJlV2l0aCh2LFt5MyxKM10pO2lmKGwpe18udHJpZ2dlcigiYWpheENvbXBsZXRlIixbeTMsc10pO2lmKCEoLS1RLmFjdGl2ZSkpe1EuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKX19fXJldHVybiB5M30sZ2V0SlNPTjpmdW5jdGlvbihhLGIsail7cmV0dXJuIFEuZ2V0KGEsYixqLCJqc29uIil9LGdldFNjcmlwdDpmdW5jdGlvbihhLGIpe3JldHVybiBRLmdldChhLHVuZGVmaW5lZCxiLCJzY3JpcHQiKX19KTtRLmVhY2goWyJnZXQiLCJwb3N0Il0sZnVuY3Rpb24oaSxtKXtRW21dPWZ1bmN0aW9uKGEsYixqLHQpe2lmKFEuaXNGdW5jdGlvbihiKSl7dD10fHxqO2o9YjtiPXVuZGVmaW5lZH1yZXR1cm4gUS5hamF4KHt1cmw6YSx0eXBlOm0sZGF0YVR5cGU6dCxkYXRhOmIsc3VjY2VzczpqfSl9fSk7US5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oaSx0KXtRLmZuW3RdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKHQsYSl9fSk7US5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gUS5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGFzeW5jOmZhbHNlLGdsb2JhbDpmYWxzZSwidGhyb3dzIjp0cnVlfSl9O1EuZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe2lmKFEuaXNGdW5jdGlvbihhKSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXtRKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsaSkpfSl9aWYodGhpc1swXSl7dmFyIGI9UShhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUodHJ1ZSk7aWYodGhpc1swXS5wYXJlbnROb2RlKXtiLmluc2VydEJlZm9yZSh0aGlzWzBdKX1iLm1hcChmdW5jdGlvbigpe3ZhciBqPXRoaXM7d2hpbGUoai5maXJzdENoaWxkJiZqLmZpcnN0Q2hpbGQubm9kZVR5cGU9PT0xKXtqPWouZmlyc3RDaGlsZH1yZXR1cm4gan0pLmFwcGVuZCh0aGlzKX1yZXR1cm4gdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe2lmKFEuaXNGdW5jdGlvbihhKSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXtRKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxpKSl9KX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHM9USh0aGlzKSxiPXMuY29udGVudHMoKTtpZihiLmxlbmd0aCl7Yi53cmFwQWxsKGEpfWVsc2V7cy5hcHBlbmQoYSl9fSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9US5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7USh0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsaSk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe2lmKCFRLm5vZGVOYW1lKHRoaXMsImJvZHkiKSl7USh0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfX0pLmVuZCgpfX0pO1EuZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihhKXtyZXR1cm4gYS5vZmZzZXRXaWR0aDw9MCYmYS5vZmZzZXRIZWlnaHQ8PTB8fCgheC5yZWxpYWJsZUhpZGRlbk9mZnNldHMoKSYmKChhLnN0eWxlJiZhLnN0eWxlLmRpc3BsYXkpfHxRLmNzcyhhLCJkaXNwbGF5IikpPT09Im5vbmUiKX07US5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hUS5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgYTM9LyUyMC9nLGIzPS9cW1xdJC8sYzM9L1xyP1xuL2csZDM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLGUzPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBmMyhwLGEsdCxiKXt2YXIgbjtpZihRLmlzQXJyYXkoYSkpe1EuZWFjaChhLGZ1bmN0aW9uKGksdil7aWYodHx8YjMudGVzdChwKSl7YihwLHYpfWVsc2V7ZjMocCsiWyIrKHR5cGVvZiB2PT09Im9iamVjdCI/aToiIikrIl0iLHYsdCxiKX19KX1lbHNlIGlmKCF0JiZRLnR5cGUoYSk9PT0ib2JqZWN0Iil7Zm9yKG4gaW4gYSl7ZjMocCsiWyIrbisiXSIsYVtuXSx0LGIpfX1lbHNle2IocCxhKX19US5wYXJhbT1mdW5jdGlvbihhLHQpe3ZhciBwLHM9W10sYj1mdW5jdGlvbihqLHYpe3Y9US5pc0Z1bmN0aW9uKHYpP3YoKToodj09bnVsbD8iIjp2KTtzW3MubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoaikrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh2KX07aWYodD09PXVuZGVmaW5lZCl7dD1RLmFqYXhTZXR0aW5ncyYmUS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWx9aWYoUS5pc0FycmF5KGEpfHwoYS5qcXVlcnkmJiFRLmlzUGxhaW5PYmplY3QoYSkpKXtRLmVhY2goYSxmdW5jdGlvbigpe2IodGhpcy5uYW1lLHRoaXMudmFsdWUpfSl9ZWxzZXtmb3IocCBpbiBhKXtmMyhwLGFbcF0sdCxiKX19cmV0dXJuIHMuam9pbigiJiIpLnJlcGxhY2UoYTMsIisiKX07US5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBRLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9US5wcm9wKHRoaXMsImVsZW1lbnRzIik7cmV0dXJuIGE/US5tYWtlQXJyYXkoYSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciB0PXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhUSh0aGlzKS5pcygiOmRpc2FibGVkIikmJmUzLnRlc3QodGhpcy5ub2RlTmFtZSkmJiFkMy50ZXN0KHQpJiYodGhpcy5jaGVja2VkfHwhaDEudGVzdCh0KSl9KS5tYXAoZnVuY3Rpb24oaSxhKXt2YXIgdj1RKHRoaXMpLnZhbCgpO3JldHVybiB2PT1udWxsP251bGw6US5pc0FycmF5KHYpP1EubWFwKHYsZnVuY3Rpb24odil7cmV0dXJue25hbWU6YS5uYW1lLHZhbHVlOnYucmVwbGFjZShjMywiXHJcbiIpfX0pOntuYW1lOmEubmFtZSx2YWx1ZTp2LnJlcGxhY2UoYzMsIlxyXG4iKX19KS5nZXQoKX19KTtRLmFqYXhTZXR0aW5ncy54aHI9dy5BY3RpdmVYT2JqZWN0IT09dW5kZWZpbmVkP2Z1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNMb2NhbCYmL14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pLnRlc3QodGhpcy50eXBlKSYmajMoKXx8azMoKX06ajM7dmFyIGczPTAsaDM9e30saTM9US5hamF4U2V0dGluZ3MueGhyKCk7aWYody5BY3RpdmVYT2JqZWN0KXtRKHcpLm9uKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGgzKXtoM1thXSh1bmRlZmluZWQsdHJ1ZSl9fSl9eC5jb3JzPSEhaTMmJigid2l0aENyZWRlbnRpYWxzImluIGkzKTtpMz14LmFqYXg9ISFpMztpZihpMyl7US5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGEpe2lmKCFhLmNyb3NzRG9tYWlufHx4LmNvcnMpe3ZhciBiO3JldHVybntzZW5kOmZ1bmN0aW9uKGosbCl7dmFyIGksbT1hLnhocigpLG49KytnMzttLm9wZW4oYS50eXBlLGEudXJsLGEuYXN5bmMsYS51c2VybmFtZSxhLnBhc3N3b3JkKTtpZihhLnhockZpZWxkcyl7Zm9yKGkgaW4gYS54aHJGaWVsZHMpe21baV09YS54aHJGaWVsZHNbaV19fWlmKGEubWltZVR5cGUmJm0ub3ZlcnJpZGVNaW1lVHlwZSl7bS5vdmVycmlkZU1pbWVUeXBlKGEubWltZVR5cGUpfWlmKCFhLmNyb3NzRG9tYWluJiYhalsiWC1SZXF1ZXN0ZWQtV2l0aCJdKXtqWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0In1mb3IoaSBpbiBqKXtpZihqW2ldIT09dW5kZWZpbmVkKXttLnNldFJlcXVlc3RIZWFkZXIoaSxqW2ldKyIiKX19bS5zZW5kKChhLmhhc0NvbnRlbnQmJmEuZGF0YSl8fG51bGwpO2I9ZnVuY3Rpb24oXyxwKXt2YXIgcyxyLHQ7aWYoYiYmKHB8fG0ucmVhZHlTdGF0ZT09PTQpKXtkZWxldGUgaDNbbl07Yj11bmRlZmluZWQ7bS5vbnJlYWR5c3RhdGVjaGFuZ2U9US5ub29wO2lmKHApe2lmKG0ucmVhZHlTdGF0ZSE9PTQpe20uYWJvcnQoKX19ZWxzZXt0PXt9O3M9bS5zdGF0dXM7aWYodHlwZW9mIG0ucmVzcG9uc2VUZXh0PT09InN0cmluZyIpe3QudGV4dD1tLnJlc3BvbnNlVGV4dH10cnl7cj1tLnN0YXR1c1RleHR9Y2F0Y2goZSl7cj0iIn1pZighcyYmYS5pc0xvY2FsJiYhYS5jcm9zc0RvbWFpbil7cz10LnRleHQ/MjAwOjQwNH1lbHNlIGlmKHM9PT0xMjIzKXtzPTIwNH19fWlmKHQpe2wocyxyLHQsbS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSl9fTtpZighYS5hc3luYyl7YigpfWVsc2UgaWYobS5yZWFkeVN0YXRlPT09NCl7c2V0VGltZW91dChiKX1lbHNle20ub25yZWFkeXN0YXRlY2hhbmdlPWgzW25dPWJ9fSxhYm9ydDpmdW5jdGlvbigpe2lmKGIpe2IodW5kZWZpbmVkLHRydWUpfX19fX0pfWZ1bmN0aW9uIGozKCl7dHJ5e3JldHVybiBuZXcgdy5YTUxIdHRwUmVxdWVzdCgpfWNhdGNoKGUpe319ZnVuY3Rpb24gazMoKXt0cnl7cmV0dXJuIG5ldyB3LkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIil9Y2F0Y2goZSl7fX1RLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKHQpe1EuZ2xvYmFsRXZhbCh0KTtyZXR1cm4gdH19fSk7US5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKHMpe2lmKHMuY2FjaGU9PT11bmRlZmluZWQpe3MuY2FjaGU9ZmFsc2V9aWYocy5jcm9zc0RvbWFpbil7cy50eXBlPSJHRVQiO3MuZ2xvYmFsPWZhbHNlfX0pO1EuYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihzKXtpZihzLmNyb3NzRG9tYWluKXt2YXIgYSxiPUouaGVhZHx8USgiaGVhZCIpWzBdfHxKLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihfLGope2E9Si5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTthLmFzeW5jPXRydWU7aWYocy5zY3JpcHRDaGFyc2V0KXthLmNoYXJzZXQ9cy5zY3JpcHRDaGFyc2V0fWEuc3JjPXMudXJsO2Eub25sb2FkPWEub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKF8sbCl7aWYobHx8IWEucmVhZHlTdGF0ZXx8L2xvYWRlZHxjb21wbGV0ZS8udGVzdChhLnJlYWR5U3RhdGUpKXthLm9ubG9hZD1hLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO2lmKGEucGFyZW50Tm9kZSl7YS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfWE9bnVsbDtpZighbCl7aigyMDAsInN1Y2Nlc3MiKX19fTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9LGFib3J0OmZ1bmN0aW9uKCl7aWYoYSl7YS5vbmxvYWQodW5kZWZpbmVkLHRydWUpfX19fX0pO3ZhciBsMz1bXSxtMz0vKD0pXD8oPz0mfCQpfFw/XD8vO1EuYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYT1sMy5wb3AoKXx8KFEuZXhwYW5kbysiXyIrKEkyKyspKTt0aGlzW2FdPXRydWU7cmV0dXJuIGF9fSk7US5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlvbihzLGEsail7dmFyIGIsbCxyLG09cy5qc29ucCE9PWZhbHNlJiYobTMudGVzdChzLnVybCk/InVybCI6dHlwZW9mIHMuZGF0YT09PSJzdHJpbmciJiYhKHMuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmbTMudGVzdChzLmRhdGEpJiYiZGF0YSIpO2lmKG18fHMuZGF0YVR5cGVzWzBdPT09Impzb25wIil7Yj1zLmpzb25wQ2FsbGJhY2s9US5pc0Z1bmN0aW9uKHMuanNvbnBDYWxsYmFjayk/cy5qc29ucENhbGxiYWNrKCk6cy5qc29ucENhbGxiYWNrO2lmKG0pe3NbbV09c1ttXS5yZXBsYWNlKG0zLCIkMSIrYil9ZWxzZSBpZihzLmpzb25wIT09ZmFsc2Upe3MudXJsKz0oSjIudGVzdChzLnVybCk/IiYiOiI/Iikrcy5qc29ucCsiPSIrYn1zLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtpZighcil7US5lcnJvcihiKyIgd2FzIG5vdCBjYWxsZWQiKX1yZXR1cm4gclswXX07cy5kYXRhVHlwZXNbMF09Impzb24iO2w9d1tiXTt3W2JdPWZ1bmN0aW9uKCl7cj1hcmd1bWVudHN9O2ouYWx3YXlzKGZ1bmN0aW9uKCl7d1tiXT1sO2lmKHNbYl0pe3MuanNvbnBDYWxsYmFjaz1hLmpzb25wQ2FsbGJhY2s7bDMucHVzaChiKX1pZihyJiZRLmlzRnVuY3Rpb24obCkpe2woclswXSl9cj1sPXVuZGVmaW5lZH0pO3JldHVybiJzY3JpcHQifX0pO1EucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixqKXtpZighYXx8dHlwZW9mIGEhPT0ic3RyaW5nIil7cmV0dXJuIG51bGx9aWYodHlwZW9mIGI9PT0iYm9vbGVhbiIpe2o9YjtiPWZhbHNlfWI9Ynx8Sjt2YXIgcD1GLmV4ZWMoYSkscz0haiYmW107aWYocCl7cmV0dXJuW2IuY3JlYXRlRWxlbWVudChwWzFdKV19cD1RLmJ1aWxkRnJhZ21lbnQoW2FdLGIscyk7aWYocyYmcy5sZW5ndGgpe1EocykucmVtb3ZlKCl9cmV0dXJuIFEubWVyZ2UoW10scC5jaGlsZE5vZGVzKX07dmFyIG4zPVEuZm4ubG9hZDtRLmZuLmxvYWQ9ZnVuY3Rpb24oYSxwLGIpe2lmKHR5cGVvZiBhIT09InN0cmluZyImJm4zKXtyZXR1cm4gbjMuYXBwbHkodGhpcyxhcmd1bWVudHMpfXZhciBzLHIsdCxqPXRoaXMsbD1hLmluZGV4T2YoIiAiKTtpZihsPj0wKXtzPVEudHJpbShhLnNsaWNlKGwsYS5sZW5ndGgpKTthPWEuc2xpY2UoMCxsKX1pZihRLmlzRnVuY3Rpb24ocCkpe2I9cDtwPXVuZGVmaW5lZH1lbHNlIGlmKHAmJnR5cGVvZiBwPT09Im9iamVjdCIpe3Q9IlBPU1QifWlmKGoubGVuZ3RoPjApe1EuYWpheCh7dXJsOmEsdHlwZTp0LGRhdGFUeXBlOiJodG1sIixkYXRhOnB9KS5kb25lKGZ1bmN0aW9uKG0pe3I9YXJndW1lbnRzO2ouaHRtbChzP1EoIjxkaXY+IikuYXBwZW5kKFEucGFyc2VIVE1MKG0pKS5maW5kKHMpOm0pfSkuY29tcGxldGUoYiYmZnVuY3Rpb24obSxuKXtqLmVhY2goYixyfHxbbS5yZXNwb25zZVRleHQsbixtXSl9KX1yZXR1cm4gdGhpc307US5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIFEuZ3JlcChRLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07dmFyIG8zPXcuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2Z1bmN0aW9uIHAzKGEpe3JldHVybiBRLmlzV2luZG93KGEpP2E6YS5ub2RlVHlwZT09PTk/YS5kZWZhdWx0Vmlld3x8YS5wYXJlbnRXaW5kb3c6ZmFsc2V9US5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsaSl7dmFyIGosbCxtLG4scCxyLHMsdD1RLmNzcyhhLCJwb3NpdGlvbiIpLHY9UShhKSxfPXt9O2lmKHQ9PT0ic3RhdGljIil7YS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUifXA9di5vZmZzZXQoKTttPVEuY3NzKGEsInRvcCIpO3I9US5jc3MoYSwibGVmdCIpO3M9KHQ9PT0iYWJzb2x1dGUifHx0PT09ImZpeGVkIikmJlEuaW5BcnJheSgiYXV0byIsW20scl0pPi0xO2lmKHMpe2o9di5wb3NpdGlvbigpO249ai50b3A7bD1qLmxlZnR9ZWxzZXtuPXBhcnNlRmxvYXQobSl8fDA7bD1wYXJzZUZsb2F0KHIpfHwwfWlmKFEuaXNGdW5jdGlvbihiKSl7Yj1iLmNhbGwoYSxpLHApfWlmKGIudG9wIT1udWxsKXtfLnRvcD0oYi50b3AtcC50b3ApK259aWYoYi5sZWZ0IT1udWxsKXtfLmxlZnQ9KGIubGVmdC1wLmxlZnQpK2x9aWYoInVzaW5nImluIGIpe2IudXNpbmcuY2FsbChhLF8pfWVsc2V7di5jc3MoXyl9fX07US5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gYT09PXVuZGVmaW5lZD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihpKXtRLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGkpfSl9dmFyIG8zLGIsaj17dG9wOjAsbGVmdDowfSxsPXRoaXNbMF0sbT1sJiZsLm93bmVyRG9jdW1lbnQ7aWYoIW0pe3JldHVybn1vMz1tLmRvY3VtZW50RWxlbWVudDtpZighUS5jb250YWlucyhvMyxsKSl7cmV0dXJuIGp9aWYodHlwZW9mIGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09WCl7aj1sLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWI9cDMobSk7cmV0dXJue3RvcDpqLnRvcCsoYi5wYWdlWU9mZnNldHx8bzMuc2Nyb2xsVG9wKS0obzMuY2xpZW50VG9wfHwwKSxsZWZ0OmoubGVmdCsoYi5wYWdlWE9mZnNldHx8bzMuc2Nyb2xsTGVmdCktKG8zLmNsaWVudExlZnR8fDApfX0scG9zaXRpb246ZnVuY3Rpb24oKXtpZighdGhpc1swXSl7cmV0dXJufXZhciBhLGIscD17dG9wOjAsbGVmdDowfSxqPXRoaXNbMF07aWYoUS5jc3MoaiwicG9zaXRpb24iKT09PSJmaXhlZCIpe2I9ai5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1lbHNle2E9dGhpcy5vZmZzZXRQYXJlbnQoKTtiPXRoaXMub2Zmc2V0KCk7aWYoIVEubm9kZU5hbWUoYVswXSwiaHRtbCIpKXtwPWEub2Zmc2V0KCl9cC50b3ArPVEuY3NzKGFbMF0sImJvcmRlclRvcFdpZHRoIix0cnVlKTtwLmxlZnQrPVEuY3NzKGFbMF0sImJvcmRlckxlZnRXaWR0aCIsdHJ1ZSl9cmV0dXJue3RvcDpiLnRvcC1wLnRvcC1RLmNzcyhqLCJtYXJnaW5Ub3AiLHRydWUpLGxlZnQ6Yi5sZWZ0LXAubGVmdC1RLmNzcyhqLCJtYXJnaW5MZWZ0Iix0cnVlKX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxvMzt3aGlsZShhJiYoIVEubm9kZU5hbWUoYSwiaHRtbCIpJiZRLmNzcyhhLCJwb3NpdGlvbiIpPT09InN0YXRpYyIpKXthPWEub2Zmc2V0UGFyZW50fXJldHVybiBhfHxvM30pfX0pO1EuZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihtLHApe3ZhciB0PS9ZLy50ZXN0KHApO1EuZm5bbV09ZnVuY3Rpb24odil7cmV0dXJuIGcxKHRoaXMsZnVuY3Rpb24oYSxtLHYpe3ZhciBiPXAzKGEpO2lmKHY9PT11bmRlZmluZWQpe3JldHVybiBiPyhwIGluIGIpP2JbcF06Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbbV06YVttXX1pZihiKXtiLnNjcm9sbFRvKCF0P3Y6UShiKS5zY3JvbGxMZWZ0KCksdD92OlEoYikuc2Nyb2xsVG9wKCkpfWVsc2V7YVttXT12fX0sbSx2LGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSk7US5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGkscCl7US5jc3NIb29rc1twXT1ZMSh4LnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxiKXtpZihiKXtiPVcxKGEscCk7cmV0dXJuIFUxLnRlc3QoYik/UShhKS5wb3NpdGlvbigpW3BdKyJweCI6Yn19KX0pO1EuZWFjaCh7SGVpZ2h0OiJoZWlnaHQiLFdpZHRoOiJ3aWR0aCJ9LGZ1bmN0aW9uKG4sdCl7US5lYWNoKHtwYWRkaW5nOiJpbm5lciIrbixjb250ZW50OnQsIiI6Im91dGVyIitufSxmdW5jdGlvbihhLGIpe1EuZm5bYl09ZnVuY3Rpb24obSx2KXt2YXIgaj1hcmd1bWVudHMubGVuZ3RoJiYoYXx8dHlwZW9mIG0hPT0iYm9vbGVhbiIpLGw9YXx8KG09PT10cnVlfHx2PT09dHJ1ZT8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIGcxKHRoaXMsZnVuY3Rpb24ocCx0LHYpe3ZhciByO2lmKFEuaXNXaW5kb3cocCkpe3JldHVybiBwLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IituXX1pZihwLm5vZGVUeXBlPT09OSl7cj1wLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gTWF0aC5tYXgocC5ib2R5WyJzY3JvbGwiK25dLHJbInNjcm9sbCIrbl0scC5ib2R5WyJvZmZzZXQiK25dLHJbIm9mZnNldCIrbl0sclsiY2xpZW50IituXSl9cmV0dXJuIHY9PT11bmRlZmluZWQ/US5jc3MocCx0LGwpOlEuc3R5bGUocCx0LHYsbCl9LHQsaj9tOnVuZGVmaW5lZCxqLG51bGwpfX0pfSk7US5mbi5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofTtRLmZuLmFuZFNlbGY9US5mbi5hZGRCYWNrO2lmKHR5cGVvZiBkZWZpbmU9PT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kKXtkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gUX0pfXZhciBxMz13LmpRdWVyeSxfJD13LiQ7US5ub0NvbmZsaWN0PWZ1bmN0aW9uKGEpe2lmKHcuJD09PVEpe3cuJD1fJH1pZihhJiZ3LmpRdWVyeT09PVEpe3cualF1ZXJ5PXEzfXJldHVybiBRfTtpZih0eXBlb2YgYz09PVgpe3cualF1ZXJ5PXcuJD1RfXJldHVybiBRfSkpOwovKiEKICogalF1ZXJ5IFVJIENvcmUgMS4xMC40CiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY2F0ZWdvcnkvdWktY29yZS8KICovCihmdW5jdGlvbigkLHUpe3ZhciBiPTAscj0vXnVpLWlkLVxkKyQvOyQudWk9JC51aXx8e307JC5leHRlbmQoJC51aSx7dmVyc2lvbjoiMS4xMC40IixrZXlDb2RlOntCQUNLU1BBQ0U6OCxDT01NQToxODgsREVMRVRFOjQ2LERPV046NDAsRU5EOjM1LEVOVEVSOjEzLEVTQ0FQRToyNyxIT01FOjM2LExFRlQ6MzcsTlVNUEFEX0FERDoxMDcsTlVNUEFEX0RFQ0lNQUw6MTEwLE5VTVBBRF9ESVZJREU6MTExLE5VTVBBRF9FTlRFUjoxMDgsTlVNUEFEX01VTFRJUExZOjEwNixOVU1QQURfU1VCVFJBQ1Q6MTA5LFBBR0VfRE9XTjozNCxQQUdFX1VQOjMzLFBFUklPRDoxOTAsUklHSFQ6MzksU1BBQ0U6MzIsVEFCOjksVVA6Mzh9fSk7JC5mbi5leHRlbmQoe2ZvY3VzOihmdW5jdGlvbihvKXtyZXR1cm4gZnVuY3Rpb24oZCxhKXtyZXR1cm4gdHlwZW9mIGQ9PT0ibnVtYmVyIj90aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXskKGUpLmZvY3VzKCk7aWYoYSl7YS5jYWxsKGUpfX0sZCl9KTpvLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSgkLmZuLmZvY3VzKSxzY3JvbGxQYXJlbnQ6ZnVuY3Rpb24oKXt2YXIgcztpZigoJC51aS5pZSYmKC8oc3RhdGljfHJlbGF0aXZlKS8pLnRlc3QodGhpcy5jc3MoInBvc2l0aW9uIikpKXx8KC9hYnNvbHV0ZS8pLnRlc3QodGhpcy5jc3MoInBvc2l0aW9uIikpKXtzPXRoaXMucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybigvKHJlbGF0aXZlfGFic29sdXRlfGZpeGVkKS8pLnRlc3QoJC5jc3ModGhpcywicG9zaXRpb24iKSkmJigvKGF1dG98c2Nyb2xsKS8pLnRlc3QoJC5jc3ModGhpcywib3ZlcmZsb3ciKSskLmNzcyh0aGlzLCJvdmVyZmxvdy15IikrJC5jc3ModGhpcywib3ZlcmZsb3cteCIpKX0pLmVxKDApfWVsc2V7cz10aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4oLyhhdXRvfHNjcm9sbCkvKS50ZXN0KCQuY3NzKHRoaXMsIm92ZXJmbG93IikrJC5jc3ModGhpcywib3ZlcmZsb3cteSIpKyQuY3NzKHRoaXMsIm92ZXJmbG93LXgiKSl9KS5lcSgwKX1yZXR1cm4oL2ZpeGVkLykudGVzdCh0aGlzLmNzcygicG9zaXRpb24iKSl8fCFzLmxlbmd0aD8kKGRvY3VtZW50KTpzfSx6SW5kZXg6ZnVuY3Rpb24oeil7aWYoeiE9PXUpe3JldHVybiB0aGlzLmNzcygiekluZGV4Iix6KX1pZih0aGlzLmxlbmd0aCl7dmFyIGU9JCh0aGlzWzBdKSxwLGE7d2hpbGUoZS5sZW5ndGgmJmVbMF0hPT1kb2N1bWVudCl7cD1lLmNzcygicG9zaXRpb24iKTtpZihwPT09ImFic29sdXRlInx8cD09PSJyZWxhdGl2ZSJ8fHA9PT0iZml4ZWQiKXthPXBhcnNlSW50KGUuY3NzKCJ6SW5kZXgiKSwxMCk7aWYoIWlzTmFOKGEpJiZhIT09MCl7cmV0dXJuIGF9fWU9ZS5wYXJlbnQoKX19cmV0dXJuIDB9LHVuaXF1ZUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKCF0aGlzLmlkKXt0aGlzLmlkPSJ1aS1pZC0iKygrK2IpfX0pfSxyZW1vdmVVbmlxdWVJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZihyLnRlc3QodGhpcy5pZCkpeyQodGhpcykucmVtb3ZlQXR0cigiaWQiKX19KX19KTtmdW5jdGlvbiBmKGUsaSl7dmFyIG0sYSxjLG49ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKCJhcmVhIj09PW4pe209ZS5wYXJlbnROb2RlO2E9bS5uYW1lO2lmKCFlLmhyZWZ8fCFhfHxtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0ibWFwIil7cmV0dXJuIGZhbHNlfWM9JCgiaW1nW3VzZW1hcD0jIithKyJdIilbMF07cmV0dXJuISFjJiZ2KGMpfXJldHVybigvaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QvLnRlc3Qobik/IWUuZGlzYWJsZWQ6ImEiPT09bj9lLmhyZWZ8fGk6aSkmJnYoZSl9ZnVuY3Rpb24gdihlKXtyZXR1cm4gJC5leHByLmZpbHRlcnMudmlzaWJsZShlKSYmISQoZSkucGFyZW50cygpLmFkZEJhY2soKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gJC5jc3ModGhpcywidmlzaWJpbGl0eSIpPT09ImhpZGRlbiJ9KS5sZW5ndGh9JC5leHRlbmQoJC5leHByWyI6Il0se2RhdGE6JC5leHByLmNyZWF0ZVBzZXVkbz8kLmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKGQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4hISQuZGF0YShlLGQpfX0pOmZ1bmN0aW9uKGUsaSxtKXtyZXR1cm4hISQuZGF0YShlLG1bM10pfSxmb2N1c2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGYoZSwhaXNOYU4oJC5hdHRyKGUsInRhYmluZGV4IikpKX0sdGFiYmFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9JC5hdHRyKGUsInRhYmluZGV4IiksaT1pc05hTih0KTtyZXR1cm4oaXx8dD49MCkmJmYoZSwhaSl9fSk7aWYoISQoIjxhPiIpLm91dGVyV2lkdGgoMSkuanF1ZXJ5KXskLmVhY2goWyJXaWR0aCIsIkhlaWdodCJdLGZ1bmN0aW9uKGksbil7dmFyIHM9bj09PSJXaWR0aCI/WyJMZWZ0IiwiUmlnaHQiXTpbIlRvcCIsIkJvdHRvbSJdLHQ9bi50b0xvd2VyQ2FzZSgpLG89e2lubmVyV2lkdGg6JC5mbi5pbm5lcldpZHRoLGlubmVySGVpZ2h0OiQuZm4uaW5uZXJIZWlnaHQsb3V0ZXJXaWR0aDokLmZuLm91dGVyV2lkdGgsb3V0ZXJIZWlnaHQ6JC5mbi5vdXRlckhlaWdodH07ZnVuY3Rpb24gYShlLGMsZCxtKXskLmVhY2gocyxmdW5jdGlvbigpe2MtPXBhcnNlRmxvYXQoJC5jc3MoZSwicGFkZGluZyIrdGhpcykpfHwwO2lmKGQpe2MtPXBhcnNlRmxvYXQoJC5jc3MoZSwiYm9yZGVyIit0aGlzKyJXaWR0aCIpKXx8MH1pZihtKXtjLT1wYXJzZUZsb2F0KCQuY3NzKGUsIm1hcmdpbiIrdGhpcykpfHwwfX0pO3JldHVybiBjfSQuZm5bImlubmVyIituXT1mdW5jdGlvbihjKXtpZihjPT09dSl7cmV0dXJuIG9bImlubmVyIituXS5jYWxsKHRoaXMpfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXskKHRoaXMpLmNzcyh0LGEodGhpcyxjKSsicHgiKX0pfTskLmZuWyJvdXRlciIrbl09ZnVuY3Rpb24oYyxtKXtpZih0eXBlb2YgYyE9PSJudW1iZXIiKXtyZXR1cm4gb1sib3V0ZXIiK25dLmNhbGwodGhpcyxjKX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7JCh0aGlzKS5jc3ModCxhKHRoaXMsYyx0cnVlLG0pKyJweCIpfSl9fSl9aWYoISQuZm4uYWRkQmFjayl7JC5mbi5hZGRCYWNrPWZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLmFkZChzPT1udWxsP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKHMpKX19aWYoJCgiPGE+IikuZGF0YSgiYS1iIiwiYSIpLnJlbW92ZURhdGEoImEtYiIpLmRhdGEoImEtYiIpKXskLmZuLnJlbW92ZURhdGE9KGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihrKXtpZihhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gYS5jYWxsKHRoaXMsJC5jYW1lbENhc2UoaykpfWVsc2V7cmV0dXJuIGEuY2FsbCh0aGlzKX19fSkoJC5mbi5yZW1vdmVEYXRhKX0kLnVpLmllPSEhL21zaWUgW1x3Ll0rLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7JC5zdXBwb3J0LnNlbGVjdHN0YXJ0PSJvbnNlbGVjdHN0YXJ0ImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOyQuZm4uZXh0ZW5kKHtkaXNhYmxlU2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmluZCgoJC5zdXBwb3J0LnNlbGVjdHN0YXJ0PyJzZWxlY3RzdGFydCI6Im1vdXNlZG93biIpKyIudWktZGlzYWJsZVNlbGVjdGlvbiIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSl9LGVuYWJsZVNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuYmluZCgiLnVpLWRpc2FibGVTZWxlY3Rpb24iKX19KTskLmV4dGVuZCgkLnVpLHtwbHVnaW46e2FkZDpmdW5jdGlvbihtLG8scyl7dmFyIGkscD0kLnVpW21dLnByb3RvdHlwZTtmb3IoaSBpbiBzKXtwLnBsdWdpbnNbaV09cC5wbHVnaW5zW2ldfHxbXTtwLnBsdWdpbnNbaV0ucHVzaChbbyxzW2ldXSl9fSxjYWxsOmZ1bmN0aW9uKGEsbixjKXt2YXIgaSxzPWEucGx1Z2luc1tuXTtpZighc3x8IWEuZWxlbWVudFswXS5wYXJlbnROb2RlfHxhLmVsZW1lbnRbMF0ucGFyZW50Tm9kZS5ub2RlVHlwZT09PTExKXtyZXR1cm59Zm9yKGk9MDtpPHMubGVuZ3RoO2krKyl7aWYoYS5vcHRpb25zW3NbaV1bMF1dKXtzW2ldWzFdLmFwcGx5KGEuZWxlbWVudCxjKX19fX0saGFzU2Nyb2xsOmZ1bmN0aW9uKGUsYSl7aWYoJChlKS5jc3MoIm92ZXJmbG93Iik9PT0iaGlkZGVuIil7cmV0dXJuIGZhbHNlfXZhciBzPShhJiZhPT09ImxlZnQiKT8ic2Nyb2xsTGVmdCI6InNjcm9sbFRvcCIsaD1mYWxzZTtpZihlW3NdPjApe3JldHVybiB0cnVlfWVbc109MTtoPShlW3NdPjApO2Vbc109MDtyZXR1cm4gaH19KX0pKGpRdWVyeSk7Ci8qIQogKiBqUXVlcnkgVUkgRGF0ZXBpY2tlciAxLjEwLjQKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9kYXRlcGlja2VyLwogKgogKiBEZXBlbmRzOgogKglqcXVlcnkudWkuY29yZS5qcwogKi8KKGZ1bmN0aW9uKCQsdSl7JC5leHRlbmQoJC51aSx7ZGF0ZXBpY2tlcjp7dmVyc2lvbjoiMS4xMC40In19KTt2YXIgUD0iZGF0ZXBpY2tlciIsYztmdW5jdGlvbiBEKCl7dGhpcy5fY3VySW5zdD1udWxsO3RoaXMuX2tleUV2ZW50PWZhbHNlO3RoaXMuX2Rpc2FibGVkSW5wdXRzPVtdO3RoaXMuX2RhdGVwaWNrZXJTaG93aW5nPWZhbHNlO3RoaXMuX2luRGlhbG9nPWZhbHNlO3RoaXMuX21haW5EaXZJZD0idWktZGF0ZXBpY2tlci1kaXYiO3RoaXMuX2lubGluZUNsYXNzPSJ1aS1kYXRlcGlja2VyLWlubGluZSI7dGhpcy5fYXBwZW5kQ2xhc3M9InVpLWRhdGVwaWNrZXItYXBwZW5kIjt0aGlzLl90cmlnZ2VyQ2xhc3M9InVpLWRhdGVwaWNrZXItdHJpZ2dlciI7dGhpcy5fZGlhbG9nQ2xhc3M9InVpLWRhdGVwaWNrZXItZGlhbG9nIjt0aGlzLl9kaXNhYmxlQ2xhc3M9InVpLWRhdGVwaWNrZXItZGlzYWJsZWQiO3RoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzPSJ1aS1kYXRlcGlja2VyLXVuc2VsZWN0YWJsZSI7dGhpcy5fY3VycmVudENsYXNzPSJ1aS1kYXRlcGlja2VyLWN1cnJlbnQtZGF5Ijt0aGlzLl9kYXlPdmVyQ2xhc3M9InVpLWRhdGVwaWNrZXItZGF5cy1jZWxsLW92ZXIiO3RoaXMucmVnaW9uYWw9W107dGhpcy5yZWdpb25hbFsiIl09e2Nsb3NlVGV4dDoiRG9uZSIscHJldlRleHQ6IlByZXYiLG5leHRUZXh0OiJOZXh0IixjdXJyZW50VGV4dDoiVG9kYXkiLG1vbnRoTmFtZXM6WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciJdLG1vbnRoTmFtZXNTaG9ydDpbIkphbiIsIkZlYiIsIk1hciIsIkFwciIsIk1heSIsIkp1biIsIkp1bCIsIkF1ZyIsIlNlcCIsIk9jdCIsIk5vdiIsIkRlYyJdLGRheU5hbWVzOlsiU3VuZGF5IiwiTW9uZGF5IiwiVHVlc2RheSIsIldlZG5lc2RheSIsIlRodXJzZGF5IiwiRnJpZGF5IiwiU2F0dXJkYXkiXSxkYXlOYW1lc1Nob3J0OlsiU3VuIiwiTW9uIiwiVHVlIiwiV2VkIiwiVGh1IiwiRnJpIiwiU2F0Il0sZGF5TmFtZXNNaW46WyJTdSIsIk1vIiwiVHUiLCJXZSIsIlRoIiwiRnIiLCJTYSJdLHdlZWtIZWFkZXI6IldrIixkYXRlRm9ybWF0OiJtbS9kZC95eSIsZmlyc3REYXk6MCxpc1JUTDpmYWxzZSxzaG93TW9udGhBZnRlclllYXI6ZmFsc2UseWVhclN1ZmZpeDoiIn07dGhpcy5fZGVmYXVsdHM9e3Nob3dPbjoiZm9jdXMiLHNob3dBbmltOiJmYWRlSW4iLHNob3dPcHRpb25zOnt9LGRlZmF1bHREYXRlOm51bGwsYXBwZW5kVGV4dDoiIixidXR0b25UZXh0OiIuLi4iLGJ1dHRvbkltYWdlOiIiLGJ1dHRvbkltYWdlT25seTpmYWxzZSxoaWRlSWZOb1ByZXZOZXh0OmZhbHNlLG5hdmlnYXRpb25Bc0RhdGVGb3JtYXQ6ZmFsc2UsZ290b0N1cnJlbnQ6ZmFsc2UsY2hhbmdlTW9udGg6ZmFsc2UsY2hhbmdlWWVhcjpmYWxzZSx5ZWFyUmFuZ2U6ImMtMTA6YysxMCIsc2hvd090aGVyTW9udGhzOmZhbHNlLHNlbGVjdE90aGVyTW9udGhzOmZhbHNlLHNob3dXZWVrOmZhbHNlLGNhbGN1bGF0ZVdlZWs6dGhpcy5pc284NjAxV2VlayxzaG9ydFllYXJDdXRvZmY6IisxMCIsbWluRGF0ZTpudWxsLG1heERhdGU6bnVsbCxkdXJhdGlvbjoiZmFzdCIsYmVmb3JlU2hvd0RheTpudWxsLGJlZm9yZVNob3c6bnVsbCxvblNlbGVjdDpudWxsLG9uQ2hhbmdlTW9udGhZZWFyOm51bGwsb25DbG9zZTpudWxsLG51bWJlck9mTW9udGhzOjEsc2hvd0N1cnJlbnRBdFBvczowLHN0ZXBNb250aHM6MSxzdGVwQmlnTW9udGhzOjEyLGFsdEZpZWxkOiIiLGFsdEZvcm1hdDoiIixjb25zdHJhaW5JbnB1dDp0cnVlLHNob3dCdXR0b25QYW5lbDpmYWxzZSxhdXRvU2l6ZTpmYWxzZSxkaXNhYmxlZDpmYWxzZX07JC5leHRlbmQodGhpcy5fZGVmYXVsdHMsdGhpcy5yZWdpb25hbFsiIl0pO3RoaXMuZHBEaXY9ZCgkKCI8ZGl2IGlkPSciK3RoaXMuX21haW5EaXZJZCsiJyBjbGFzcz0ndWktZGF0ZXBpY2tlciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IHVpLWNvcm5lci1hbGwnPjwvZGl2PiIpKX0kLmV4dGVuZChELnByb3RvdHlwZSx7bWFya2VyQ2xhc3NOYW1lOiJoYXNEYXRlcGlja2VyIixtYXhSb3dzOjQsX3dpZGdldERhdGVwaWNrZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kcERpdn0sc2V0RGVmYXVsdHM6ZnVuY3Rpb24ocyl7Zih0aGlzLl9kZWZhdWx0cyxzfHx7fSk7cmV0dXJuIHRoaXN9LF9hdHRhY2hEYXRlcGlja2VyOmZ1bmN0aW9uKHQscyl7dmFyIG4saSxhO249dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2k9KG49PT0iZGl2Inx8bj09PSJzcGFuIik7aWYoIXQuaWQpe3RoaXMudXVpZCs9MTt0LmlkPSJkcCIrdGhpcy51dWlkfWE9dGhpcy5fbmV3SW5zdCgkKHQpLGkpO2Euc2V0dGluZ3M9JC5leHRlbmQoe30sc3x8e30pO2lmKG49PT0iaW5wdXQiKXt0aGlzLl9jb25uZWN0RGF0ZXBpY2tlcih0LGEpfWVsc2UgaWYoaSl7dGhpcy5faW5saW5lRGF0ZXBpY2tlcih0LGEpfX0sX25ld0luc3Q6ZnVuY3Rpb24odCxpKXt2YXIgYT10WzBdLmlkLnJlcGxhY2UoLyhbXkEtWmEtejAtOV9cLV0pL2csIlxcXFwkMSIpO3JldHVybntpZDphLGlucHV0OnQsc2VsZWN0ZWREYXk6MCxzZWxlY3RlZE1vbnRoOjAsc2VsZWN0ZWRZZWFyOjAsZHJhd01vbnRoOjAsZHJhd1llYXI6MCxpbmxpbmU6aSxkcERpdjooIWk/dGhpcy5kcERpdjpkKCQoIjxkaXYgY2xhc3M9JyIrdGhpcy5faW5saW5lQ2xhc3MrIiB1aS1kYXRlcGlja2VyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXggdWktY29ybmVyLWFsbCc+PC9kaXY+IikpKX19LF9jb25uZWN0RGF0ZXBpY2tlcjpmdW5jdGlvbih0LGkpe3ZhciBhPSQodCk7aS5hcHBlbmQ9JChbXSk7aS50cmlnZ2VyPSQoW10pO2lmKGEuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm59dGhpcy5fYXR0YWNobWVudHMoYSxpKTthLmFkZENsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5rZXlkb3duKHRoaXMuX2RvS2V5RG93bikua2V5cHJlc3ModGhpcy5fZG9LZXlQcmVzcykua2V5dXAodGhpcy5fZG9LZXlVcCk7dGhpcy5fYXV0b1NpemUoaSk7JC5kYXRhKHQsUCxpKTtpZihpLnNldHRpbmdzLmRpc2FibGVkKXt0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlcih0KX19LF9hdHRhY2htZW50czpmdW5jdGlvbihpLGEpe3ZhciBzLGIsZSxnPXRoaXMuX2dldChhLCJhcHBlbmRUZXh0IiksaD10aGlzLl9nZXQoYSwiaXNSVEwiKTtpZihhLmFwcGVuZCl7YS5hcHBlbmQucmVtb3ZlKCl9aWYoZyl7YS5hcHBlbmQ9JCgiPHNwYW4gY2xhc3M9JyIrdGhpcy5fYXBwZW5kQ2xhc3MrIic+IitnKyI8L3NwYW4+Iik7aVtoPyJiZWZvcmUiOiJhZnRlciJdKGEuYXBwZW5kKX1pLnVuYmluZCgiZm9jdXMiLHRoaXMuX3Nob3dEYXRlcGlja2VyKTtpZihhLnRyaWdnZXIpe2EudHJpZ2dlci5yZW1vdmUoKX1zPXRoaXMuX2dldChhLCJzaG93T24iKTtpZihzPT09ImZvY3VzInx8cz09PSJib3RoIil7aS5mb2N1cyh0aGlzLl9zaG93RGF0ZXBpY2tlcil9aWYocz09PSJidXR0b24ifHxzPT09ImJvdGgiKXtiPXRoaXMuX2dldChhLCJidXR0b25UZXh0Iik7ZT10aGlzLl9nZXQoYSwiYnV0dG9uSW1hZ2UiKTthLnRyaWdnZXI9JCh0aGlzLl9nZXQoYSwiYnV0dG9uSW1hZ2VPbmx5Iik/JCgiPGltZy8+IikuYWRkQ2xhc3ModGhpcy5fdHJpZ2dlckNsYXNzKS5hdHRyKHtzcmM6ZSxhbHQ6Yix0aXRsZTpifSk6JCgiPGJ1dHRvbiB0eXBlPSdidXR0b24nPjwvYnV0dG9uPiIpLmFkZENsYXNzKHRoaXMuX3RyaWdnZXJDbGFzcykuaHRtbCghZT9iOiQoIjxpbWcvPiIpLmF0dHIoe3NyYzplLGFsdDpiLHRpdGxlOmJ9KSkpO2lbaD8iYmVmb3JlIjoiYWZ0ZXIiXShhLnRyaWdnZXIpO2EudHJpZ2dlci5jbGljayhmdW5jdGlvbigpe2lmKCQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJiQuZGF0ZXBpY2tlci5fbGFzdElucHV0PT09aVswXSl7JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpfWVsc2UgaWYoJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmJC5kYXRlcGlja2VyLl9sYXN0SW5wdXQhPT1pWzBdKXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7JC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcihpWzBdKX1lbHNleyQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIoaVswXSl9cmV0dXJuIGZhbHNlfSl9fSxfYXV0b1NpemU6ZnVuY3Rpb24oYSl7aWYodGhpcy5fZ2V0KGEsImF1dG9TaXplIikmJiFhLmlubGluZSl7dmFyIGIsbSxlLGksZz1uZXcgRGF0ZSgyMDA5LDEyLTEsMjApLGg9dGhpcy5fZ2V0KGEsImRhdGVGb3JtYXQiKTtpZihoLm1hdGNoKC9bRE1dLykpe2I9ZnVuY3Rpb24obil7bT0wO2U9MDtmb3IoaT0wO2k8bi5sZW5ndGg7aSsrKXtpZihuW2ldLmxlbmd0aD5tKXttPW5baV0ubGVuZ3RoO2U9aX19cmV0dXJuIGV9O2cuc2V0TW9udGgoYih0aGlzLl9nZXQoYSwoaC5tYXRjaCgvTU0vKT8ibW9udGhOYW1lcyI6Im1vbnRoTmFtZXNTaG9ydCIpKSkpO2cuc2V0RGF0ZShiKHRoaXMuX2dldChhLChoLm1hdGNoKC9ERC8pPyJkYXlOYW1lcyI6ImRheU5hbWVzU2hvcnQiKSkpKzIwLWcuZ2V0RGF5KCkpfWEuaW5wdXQuYXR0cigic2l6ZSIsdGhpcy5fZm9ybWF0RGF0ZShhLGcpLmxlbmd0aCl9fSxfaW5saW5lRGF0ZXBpY2tlcjpmdW5jdGlvbih0LGkpe3ZhciBhPSQodCk7aWYoYS5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3JldHVybn1hLmFkZENsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5hcHBlbmQoaS5kcERpdik7JC5kYXRhKHQsUCxpKTt0aGlzLl9zZXREYXRlKGksdGhpcy5fZ2V0RGVmYXVsdERhdGUoaSksdHJ1ZSk7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpKTt0aGlzLl91cGRhdGVBbHRlcm5hdGUoaSk7aWYoaS5zZXR0aW5ncy5kaXNhYmxlZCl7dGhpcy5fZGlzYWJsZURhdGVwaWNrZXIodCl9aS5kcERpdi5jc3MoImRpc3BsYXkiLCJibG9jayIpfSxfZGlhbG9nRGF0ZXBpY2tlcjpmdW5jdGlvbihpLGEsbyxzLHApe3ZhciBiLGUsZyxoLGosaz10aGlzLl9kaWFsb2dJbnN0O2lmKCFrKXt0aGlzLnV1aWQrPTE7Yj0iZHAiK3RoaXMudXVpZDt0aGlzLl9kaWFsb2dJbnB1dD0kKCI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9JyIrYisiJyBzdHlsZT0ncG9zaXRpb246IGFic29sdXRlOyB0b3A6IC0xMDBweDsgd2lkdGg6IDBweDsnLz4iKTt0aGlzLl9kaWFsb2dJbnB1dC5rZXlkb3duKHRoaXMuX2RvS2V5RG93bik7JCgiYm9keSIpLmFwcGVuZCh0aGlzLl9kaWFsb2dJbnB1dCk7az10aGlzLl9kaWFsb2dJbnN0PXRoaXMuX25ld0luc3QodGhpcy5fZGlhbG9nSW5wdXQsZmFsc2UpO2suc2V0dGluZ3M9e307JC5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLFAsayl9ZihrLnNldHRpbmdzLHN8fHt9KTthPShhJiZhLmNvbnN0cnVjdG9yPT09RGF0ZT90aGlzLl9mb3JtYXREYXRlKGssYSk6YSk7dGhpcy5fZGlhbG9nSW5wdXQudmFsKGEpO3RoaXMuX3Bvcz0ocD8ocC5sZW5ndGg/cDpbcC5wYWdlWCxwLnBhZ2VZXSk6bnVsbCk7aWYoIXRoaXMuX3Bvcyl7ZT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7Zz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O2g9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDtqPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO3RoaXMuX3Bvcz1bKGUvMiktMTAwK2gsKGcvMiktMTUwK2pdfXRoaXMuX2RpYWxvZ0lucHV0LmNzcygibGVmdCIsKHRoaXMuX3Bvc1swXSsyMCkrInB4IikuY3NzKCJ0b3AiLHRoaXMuX3Bvc1sxXSsicHgiKTtrLnNldHRpbmdzLm9uU2VsZWN0PW87dGhpcy5faW5EaWFsb2c9dHJ1ZTt0aGlzLmRwRGl2LmFkZENsYXNzKHRoaXMuX2RpYWxvZ0NsYXNzKTt0aGlzLl9zaG93RGF0ZXBpY2tlcih0aGlzLl9kaWFsb2dJbnB1dFswXSk7aWYoJC5ibG9ja1VJKXskLmJsb2NrVUkodGhpcy5kcERpdil9JC5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLFAsayk7cmV0dXJuIHRoaXN9LF9kZXN0cm95RGF0ZXBpY2tlcjpmdW5jdGlvbih0KXt2YXIgbixhPSQodCksaT0kLmRhdGEodCxQKTtpZighYS5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3JldHVybn1uPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTskLnJlbW92ZURhdGEodCxQKTtpZihuPT09ImlucHV0Iil7aS5hcHBlbmQucmVtb3ZlKCk7aS50cmlnZ2VyLnJlbW92ZSgpO2EucmVtb3ZlQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLnVuYmluZCgiZm9jdXMiLHRoaXMuX3Nob3dEYXRlcGlja2VyKS51bmJpbmQoImtleWRvd24iLHRoaXMuX2RvS2V5RG93bikudW5iaW5kKCJrZXlwcmVzcyIsdGhpcy5fZG9LZXlQcmVzcykudW5iaW5kKCJrZXl1cCIsdGhpcy5fZG9LZXlVcCl9ZWxzZSBpZihuPT09ImRpdiJ8fG49PT0ic3BhbiIpe2EucmVtb3ZlQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmVtcHR5KCl9fSxfZW5hYmxlRGF0ZXBpY2tlcjpmdW5jdGlvbih0KXt2YXIgbixpLGE9JCh0KSxiPSQuZGF0YSh0LFApO2lmKCFhLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cmV0dXJufW49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKG49PT0iaW5wdXQiKXt0LmRpc2FibGVkPWZhbHNlO2IudHJpZ2dlci5maWx0ZXIoImJ1dHRvbiIpLmVhY2goZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPWZhbHNlfSkuZW5kKCkuZmlsdGVyKCJpbWciKS5jc3Moe29wYWNpdHk6IjEuMCIsY3Vyc29yOiIifSl9ZWxzZSBpZihuPT09ImRpdiJ8fG49PT0ic3BhbiIpe2k9YS5jaGlsZHJlbigiLiIrdGhpcy5faW5saW5lQ2xhc3MpO2kuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygidWktc3RhdGUtZGlzYWJsZWQiKTtpLmZpbmQoInNlbGVjdC51aS1kYXRlcGlja2VyLW1vbnRoLCBzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyIikucHJvcCgiZGlzYWJsZWQiLGZhbHNlKX10aGlzLl9kaXNhYmxlZElucHV0cz0kLm1hcCh0aGlzLl9kaXNhYmxlZElucHV0cyxmdW5jdGlvbih2KXtyZXR1cm4odj09PXQ/bnVsbDp2KX0pfSxfZGlzYWJsZURhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dmFyIG4saSxhPSQodCksYj0kLmRhdGEodCxQKTtpZighYS5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3JldHVybn1uPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZihuPT09ImlucHV0Iil7dC5kaXNhYmxlZD10cnVlO2IudHJpZ2dlci5maWx0ZXIoImJ1dHRvbiIpLmVhY2goZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPXRydWV9KS5lbmQoKS5maWx0ZXIoImltZyIpLmNzcyh7b3BhY2l0eToiMC41IixjdXJzb3I6ImRlZmF1bHQifSl9ZWxzZSBpZihuPT09ImRpdiJ8fG49PT0ic3BhbiIpe2k9YS5jaGlsZHJlbigiLiIrdGhpcy5faW5saW5lQ2xhc3MpO2kuY2hpbGRyZW4oKS5hZGRDbGFzcygidWktc3RhdGUtZGlzYWJsZWQiKTtpLmZpbmQoInNlbGVjdC51aS1kYXRlcGlja2VyLW1vbnRoLCBzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyIikucHJvcCgiZGlzYWJsZWQiLHRydWUpfXRoaXMuX2Rpc2FibGVkSW5wdXRzPSQubWFwKHRoaXMuX2Rpc2FibGVkSW5wdXRzLGZ1bmN0aW9uKHYpe3JldHVybih2PT09dD9udWxsOnYpfSk7dGhpcy5fZGlzYWJsZWRJbnB1dHNbdGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoXT10fSxfaXNEaXNhYmxlZERhdGVwaWNrZXI6ZnVuY3Rpb24odCl7aWYoIXQpe3JldHVybiBmYWxzZX1mb3IodmFyIGk9MDtpPHRoaXMuX2Rpc2FibGVkSW5wdXRzLmxlbmd0aDtpKyspe2lmKHRoaXMuX2Rpc2FibGVkSW5wdXRzW2ldPT09dCl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX0sX2dldEluc3Q6ZnVuY3Rpb24odCl7dHJ5e3JldHVybiAkLmRhdGEodCxQKX1jYXRjaChlKXt0aHJvdyJNaXNzaW5nIGluc3RhbmNlIGRhdGEgZm9yIHRoaXMgZGF0ZXBpY2tlciJ9fSxfb3B0aW9uRGF0ZXBpY2tlcjpmdW5jdGlvbih0LG4sdil7dmFyIHMsYSxtLGIsaT10aGlzLl9nZXRJbnN0KHQpO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0yJiZ0eXBlb2Ygbj09PSJzdHJpbmciKXtyZXR1cm4obj09PSJkZWZhdWx0cyI/JC5leHRlbmQoe30sJC5kYXRlcGlja2VyLl9kZWZhdWx0cyk6KGk/KG49PT0iYWxsIj8kLmV4dGVuZCh7fSxpLnNldHRpbmdzKTp0aGlzLl9nZXQoaSxuKSk6bnVsbCkpfXM9bnx8e307aWYodHlwZW9mIG49PT0ic3RyaW5nIil7cz17fTtzW25dPXZ9aWYoaSl7aWYodGhpcy5fY3VySW5zdD09PWkpe3RoaXMuX2hpZGVEYXRlcGlja2VyKCl9YT10aGlzLl9nZXREYXRlRGF0ZXBpY2tlcih0LHRydWUpO209dGhpcy5fZ2V0TWluTWF4RGF0ZShpLCJtaW4iKTtiPXRoaXMuX2dldE1pbk1heERhdGUoaSwibWF4Iik7ZihpLnNldHRpbmdzLHMpO2lmKG0hPT1udWxsJiZzLmRhdGVGb3JtYXQhPT11JiZzLm1pbkRhdGU9PT11KXtpLnNldHRpbmdzLm1pbkRhdGU9dGhpcy5fZm9ybWF0RGF0ZShpLG0pfWlmKGIhPT1udWxsJiZzLmRhdGVGb3JtYXQhPT11JiZzLm1heERhdGU9PT11KXtpLnNldHRpbmdzLm1heERhdGU9dGhpcy5fZm9ybWF0RGF0ZShpLGIpfWlmKCJkaXNhYmxlZCJpbiBzKXtpZihzLmRpc2FibGVkKXt0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlcih0KX1lbHNle3RoaXMuX2VuYWJsZURhdGVwaWNrZXIodCl9fXRoaXMuX2F0dGFjaG1lbnRzKCQodCksaSk7dGhpcy5fYXV0b1NpemUoaSk7dGhpcy5fc2V0RGF0ZShpLGEpO3RoaXMuX3VwZGF0ZUFsdGVybmF0ZShpKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGkpfX0sX2NoYW5nZURhdGVwaWNrZXI6ZnVuY3Rpb24odCxuLHYpe3RoaXMuX29wdGlvbkRhdGVwaWNrZXIodCxuLHYpfSxfcmVmcmVzaERhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fZ2V0SW5zdCh0KTtpZihpKXt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGkpfX0sX3NldERhdGVEYXRlcGlja2VyOmZ1bmN0aW9uKHQsYSl7dmFyIGk9dGhpcy5fZ2V0SW5zdCh0KTtpZihpKXt0aGlzLl9zZXREYXRlKGksYSk7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpKTt0aGlzLl91cGRhdGVBbHRlcm5hdGUoaSl9fSxfZ2V0RGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLl9nZXRJbnN0KHQpO2lmKGkmJiFpLmlubGluZSl7dGhpcy5fc2V0RGF0ZUZyb21GaWVsZChpLG4pfXJldHVybihpP3RoaXMuX2dldERhdGUoaSk6bnVsbCl9LF9kb0tleURvd246ZnVuY3Rpb24oZSl7dmFyIG8sYSxzLGk9JC5kYXRlcGlja2VyLl9nZXRJbnN0KGUudGFyZ2V0KSxoPXRydWUsYj1pLmRwRGl2LmlzKCIudWktZGF0ZXBpY2tlci1ydGwiKTtpLl9rZXlFdmVudD10cnVlO2lmKCQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcpe3N3aXRjaChlLmtleUNvZGUpe2Nhc2UgOTokLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7aD1mYWxzZTticmVhaztjYXNlIDEzOnM9JCgidGQuIiskLmRhdGVwaWNrZXIuX2RheU92ZXJDbGFzcysiOm5vdCguIiskLmRhdGVwaWNrZXIuX2N1cnJlbnRDbGFzcysiKSIsaS5kcERpdik7aWYoc1swXSl7JC5kYXRlcGlja2VyLl9zZWxlY3REYXkoZS50YXJnZXQsaS5zZWxlY3RlZE1vbnRoLGkuc2VsZWN0ZWRZZWFyLHNbMF0pfW89JC5kYXRlcGlja2VyLl9nZXQoaSwib25TZWxlY3QiKTtpZihvKXthPSQuZGF0ZXBpY2tlci5fZm9ybWF0RGF0ZShpKTtvLmFwcGx5KChpLmlucHV0P2kuaW5wdXRbMF06bnVsbCksW2EsaV0pfWVsc2V7JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpfXJldHVybiBmYWxzZTtjYXNlIDI3OiQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTticmVhaztjYXNlIDMzOiQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwoZS5jdHJsS2V5Py0kLmRhdGVwaWNrZXIuX2dldChpLCJzdGVwQmlnTW9udGhzIik6LSQuZGF0ZXBpY2tlci5fZ2V0KGksInN0ZXBNb250aHMiKSksIk0iKTticmVhaztjYXNlIDM0OiQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwoZS5jdHJsS2V5PyskLmRhdGVwaWNrZXIuX2dldChpLCJzdGVwQmlnTW9udGhzIik6KyQuZGF0ZXBpY2tlci5fZ2V0KGksInN0ZXBNb250aHMiKSksIk0iKTticmVhaztjYXNlIDM1OmlmKGUuY3RybEtleXx8ZS5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2NsZWFyRGF0ZShlLnRhcmdldCl9aD1lLmN0cmxLZXl8fGUubWV0YUtleTticmVhaztjYXNlIDM2OmlmKGUuY3RybEtleXx8ZS5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2dvdG9Ub2RheShlLnRhcmdldCl9aD1lLmN0cmxLZXl8fGUubWV0YUtleTticmVhaztjYXNlIDM3OmlmKGUuY3RybEtleXx8ZS5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQsKGI/KzE6LTEpLCJEIil9aD1lLmN0cmxLZXl8fGUubWV0YUtleTtpZihlLm9yaWdpbmFsRXZlbnQuYWx0S2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQsKGUuY3RybEtleT8tJC5kYXRlcGlja2VyLl9nZXQoaSwic3RlcEJpZ01vbnRocyIpOi0kLmRhdGVwaWNrZXIuX2dldChpLCJzdGVwTW9udGhzIikpLCJNIil9YnJlYWs7Y2FzZSAzODppZihlLmN0cmxLZXl8fGUubWV0YUtleSl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LC03LCJEIil9aD1lLmN0cmxLZXl8fGUubWV0YUtleTticmVhaztjYXNlIDM5OmlmKGUuY3RybEtleXx8ZS5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQsKGI/LTE6KzEpLCJEIil9aD1lLmN0cmxLZXl8fGUubWV0YUtleTtpZihlLm9yaWdpbmFsRXZlbnQuYWx0S2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQsKGUuY3RybEtleT8rJC5kYXRlcGlja2VyLl9nZXQoaSwic3RlcEJpZ01vbnRocyIpOiskLmRhdGVwaWNrZXIuX2dldChpLCJzdGVwTW9udGhzIikpLCJNIil9YnJlYWs7Y2FzZSA0MDppZihlLmN0cmxLZXl8fGUubWV0YUtleSl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LCs3LCJEIil9aD1lLmN0cmxLZXl8fGUubWV0YUtleTticmVhaztkZWZhdWx0Omg9ZmFsc2V9fWVsc2UgaWYoZS5rZXlDb2RlPT09MzYmJmUuY3RybEtleSl7JC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcih0aGlzKX1lbHNle2g9ZmFsc2V9aWYoaCl7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9fSxfZG9LZXlQcmVzczpmdW5jdGlvbihlKXt2YXIgYSxiLGk9JC5kYXRlcGlja2VyLl9nZXRJbnN0KGUudGFyZ2V0KTtpZigkLmRhdGVwaWNrZXIuX2dldChpLCJjb25zdHJhaW5JbnB1dCIpKXthPSQuZGF0ZXBpY2tlci5fcG9zc2libGVDaGFycygkLmRhdGVwaWNrZXIuX2dldChpLCJkYXRlRm9ybWF0IikpO2I9U3RyaW5nLmZyb21DaGFyQ29kZShlLmNoYXJDb2RlPT1udWxsP2Uua2V5Q29kZTplLmNoYXJDb2RlKTtyZXR1cm4gZS5jdHJsS2V5fHxlLm1ldGFLZXl8fChiPCIgInx8IWF8fGEuaW5kZXhPZihiKT4tMSl9fSxfZG9LZXlVcDpmdW5jdGlvbihlKXt2YXIgYSxpPSQuZGF0ZXBpY2tlci5fZ2V0SW5zdChlLnRhcmdldCk7aWYoaS5pbnB1dC52YWwoKSE9PWkubGFzdFZhbCl7dHJ5e2E9JC5kYXRlcGlja2VyLnBhcnNlRGF0ZSgkLmRhdGVwaWNrZXIuX2dldChpLCJkYXRlRm9ybWF0IiksKGkuaW5wdXQ/aS5pbnB1dC52YWwoKTpudWxsKSwkLmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyhpKSk7aWYoYSl7JC5kYXRlcGlja2VyLl9zZXREYXRlRnJvbUZpZWxkKGkpOyQuZGF0ZXBpY2tlci5fdXBkYXRlQWx0ZXJuYXRlKGkpOyQuZGF0ZXBpY2tlci5fdXBkYXRlRGF0ZXBpY2tlcihpKX19Y2F0Y2goYil7fX1yZXR1cm4gdHJ1ZX0sX3Nob3dEYXRlcGlja2VyOmZ1bmN0aW9uKGkpe2k9aS50YXJnZXR8fGk7aWYoaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09ImlucHV0Iil7aT0kKCJpbnB1dCIsaS5wYXJlbnROb2RlKVswXX1pZigkLmRhdGVwaWNrZXIuX2lzRGlzYWJsZWREYXRlcGlja2VyKGkpfHwkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dD09PWkpe3JldHVybn12YXIgYSxiLGUsZyxvLHMsaDthPSQuZGF0ZXBpY2tlci5fZ2V0SW5zdChpKTtpZigkLmRhdGVwaWNrZXIuX2N1ckluc3QmJiQuZGF0ZXBpY2tlci5fY3VySW5zdCE9PWEpeyQuZGF0ZXBpY2tlci5fY3VySW5zdC5kcERpdi5zdG9wKHRydWUsdHJ1ZSk7aWYoYSYmJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyl7JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigkLmRhdGVwaWNrZXIuX2N1ckluc3QuaW5wdXRbMF0pfX1iPSQuZGF0ZXBpY2tlci5fZ2V0KGEsImJlZm9yZVNob3ciKTtlPWI/Yi5hcHBseShpLFtpLGFdKTp7fTtpZihlPT09ZmFsc2Upe3JldHVybn1mKGEuc2V0dGluZ3MsZSk7YS5sYXN0VmFsPW51bGw7JC5kYXRlcGlja2VyLl9sYXN0SW5wdXQ9aTskLmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQoYSk7aWYoJC5kYXRlcGlja2VyLl9pbkRpYWxvZyl7aS52YWx1ZT0iIn1pZighJC5kYXRlcGlja2VyLl9wb3MpeyQuZGF0ZXBpY2tlci5fcG9zPSQuZGF0ZXBpY2tlci5fZmluZFBvcyhpKTskLmRhdGVwaWNrZXIuX3Bvc1sxXSs9aS5vZmZzZXRIZWlnaHR9Zz1mYWxzZTskKGkpLnBhcmVudHMoKS5lYWNoKGZ1bmN0aW9uKCl7Z3w9JCh0aGlzKS5jc3MoInBvc2l0aW9uIik9PT0iZml4ZWQiO3JldHVybiFnfSk7bz17bGVmdDokLmRhdGVwaWNrZXIuX3Bvc1swXSx0b3A6JC5kYXRlcGlja2VyLl9wb3NbMV19OyQuZGF0ZXBpY2tlci5fcG9zPW51bGw7YS5kcERpdi5lbXB0eSgpO2EuZHBEaXYuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLGRpc3BsYXk6ImJsb2NrIix0b3A6Ii0xMDAwcHgifSk7JC5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGEpO289JC5kYXRlcGlja2VyLl9jaGVja09mZnNldChhLG8sZyk7YS5kcERpdi5jc3Moe3Bvc2l0aW9uOigkLmRhdGVwaWNrZXIuX2luRGlhbG9nJiYkLmJsb2NrVUk/InN0YXRpYyI6KGc/ImZpeGVkIjoiYWJzb2x1dGUiKSksZGlzcGxheToibm9uZSIsbGVmdDpvLmxlZnQrInB4Iix0b3A6by50b3ArInB4In0pO2lmKCFhLmlubGluZSl7cz0kLmRhdGVwaWNrZXIuX2dldChhLCJzaG93QW5pbSIpO2g9JC5kYXRlcGlja2VyLl9nZXQoYSwiZHVyYXRpb24iKTthLmRwRGl2LnpJbmRleCgkKGkpLnpJbmRleCgpKzEpOyQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmc9dHJ1ZTtpZigkLmVmZmVjdHMmJiQuZWZmZWN0cy5lZmZlY3Rbc10pe2EuZHBEaXYuc2hvdyhzLCQuZGF0ZXBpY2tlci5fZ2V0KGEsInNob3dPcHRpb25zIiksaCl9ZWxzZXthLmRwRGl2W3N8fCJzaG93Il0ocz9oOm51bGwpfWlmKCQuZGF0ZXBpY2tlci5fc2hvdWxkRm9jdXNJbnB1dChhKSl7YS5pbnB1dC5mb2N1cygpfSQuZGF0ZXBpY2tlci5fY3VySW5zdD1hfX0sX3VwZGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24oaSl7dGhpcy5tYXhSb3dzPTQ7Yz1pO2kuZHBEaXYuZW1wdHkoKS5hcHBlbmQodGhpcy5fZ2VuZXJhdGVIVE1MKGkpKTt0aGlzLl9hdHRhY2hIYW5kbGVycyhpKTtpLmRwRGl2LmZpbmQoIi4iK3RoaXMuX2RheU92ZXJDbGFzcysiIGEiKS5tb3VzZW92ZXIoKTt2YXIgbyxuPXRoaXMuX2dldE51bWJlck9mTW9udGhzKGkpLGE9blsxXSx3PTE3O2kuZHBEaXYucmVtb3ZlQ2xhc3MoInVpLWRhdGVwaWNrZXItbXVsdGktMiB1aS1kYXRlcGlja2VyLW11bHRpLTMgdWktZGF0ZXBpY2tlci1tdWx0aS00Iikud2lkdGgoIiIpO2lmKGE+MSl7aS5kcERpdi5hZGRDbGFzcygidWktZGF0ZXBpY2tlci1tdWx0aS0iK2EpLmNzcygid2lkdGgiLCh3KmEpKyJlbSIpfWkuZHBEaXZbKG5bMF0hPT0xfHxuWzFdIT09MT8iYWRkIjoicmVtb3ZlIikrIkNsYXNzIl0oInVpLWRhdGVwaWNrZXItbXVsdGkiKTtpLmRwRGl2Wyh0aGlzLl9nZXQoaSwiaXNSVEwiKT8iYWRkIjoicmVtb3ZlIikrIkNsYXNzIl0oInVpLWRhdGVwaWNrZXItcnRsIik7aWYoaT09PSQuZGF0ZXBpY2tlci5fY3VySW5zdCYmJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmJC5kYXRlcGlja2VyLl9zaG91bGRGb2N1c0lucHV0KGkpKXtpLmlucHV0LmZvY3VzKCl9aWYoaS55ZWFyc2h0bWwpe289aS55ZWFyc2h0bWw7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKG89PT1pLnllYXJzaHRtbCYmaS55ZWFyc2h0bWwpe2kuZHBEaXYuZmluZCgic2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhcjpmaXJzdCIpLnJlcGxhY2VXaXRoKGkueWVhcnNodG1sKX1vPWkueWVhcnNodG1sPW51bGx9LDApfX0sX3Nob3VsZEZvY3VzSW5wdXQ6ZnVuY3Rpb24oaSl7cmV0dXJuIGkuaW5wdXQmJmkuaW5wdXQuaXMoIjp2aXNpYmxlIikmJiFpLmlucHV0LmlzKCI6ZGlzYWJsZWQiKSYmIWkuaW5wdXQuaXMoIjpmb2N1cyIpfSxfY2hlY2tPZmZzZXQ6ZnVuY3Rpb24oaSxvLGEpe3ZhciBiPWkuZHBEaXYub3V0ZXJXaWR0aCgpLGU9aS5kcERpdi5vdXRlckhlaWdodCgpLGc9aS5pbnB1dD9pLmlucHV0Lm91dGVyV2lkdGgoKTowLGg9aS5pbnB1dD9pLmlucHV0Lm91dGVySGVpZ2h0KCk6MCx2PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCsoYT8wOiQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSksaj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KyhhPzA6JChkb2N1bWVudCkuc2Nyb2xsVG9wKCkpO28ubGVmdC09KHRoaXMuX2dldChpLCJpc1JUTCIpPyhiLWcpOjApO28ubGVmdC09KGEmJm8ubGVmdD09PWkuaW5wdXQub2Zmc2V0KCkubGVmdCk/JChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpOjA7by50b3AtPShhJiZvLnRvcD09PShpLmlucHV0Lm9mZnNldCgpLnRvcCtoKSk/JChkb2N1bWVudCkuc2Nyb2xsVG9wKCk6MDtvLmxlZnQtPU1hdGgubWluKG8ubGVmdCwoby5sZWZ0K2I+diYmdj5iKT9NYXRoLmFicyhvLmxlZnQrYi12KTowKTtvLnRvcC09TWF0aC5taW4oby50b3AsKG8udG9wK2U+aiYmaj5lKT9NYXRoLmFicyhlK2gpOjApO3JldHVybiBvfSxfZmluZFBvczpmdW5jdGlvbihvKXt2YXIgcCxpPXRoaXMuX2dldEluc3QobyksYT10aGlzLl9nZXQoaSwiaXNSVEwiKTt3aGlsZShvJiYoby50eXBlPT09ImhpZGRlbiJ8fG8ubm9kZVR5cGUhPT0xfHwkLmV4cHIuZmlsdGVycy5oaWRkZW4obykpKXtvPW9bYT8icHJldmlvdXNTaWJsaW5nIjoibmV4dFNpYmxpbmciXX1wPSQobykub2Zmc2V0KCk7cmV0dXJuW3AubGVmdCxwLnRvcF19LF9oaWRlRGF0ZXBpY2tlcjpmdW5jdGlvbihpKXt2YXIgcyxhLHAsbyxiPXRoaXMuX2N1ckluc3Q7aWYoIWJ8fChpJiZiIT09JC5kYXRhKGksUCkpKXtyZXR1cm59aWYodGhpcy5fZGF0ZXBpY2tlclNob3dpbmcpe3M9dGhpcy5fZ2V0KGIsInNob3dBbmltIik7YT10aGlzLl9nZXQoYiwiZHVyYXRpb24iKTtwPWZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl90aWR5RGlhbG9nKGIpfTtpZigkLmVmZmVjdHMmJigkLmVmZmVjdHMuZWZmZWN0W3NdfHwkLmVmZmVjdHNbc10pKXtiLmRwRGl2LmhpZGUocywkLmRhdGVwaWNrZXIuX2dldChiLCJzaG93T3B0aW9ucyIpLGEscCl9ZWxzZXtiLmRwRGl2WyhzPT09InNsaWRlRG93biI/InNsaWRlVXAiOihzPT09ImZhZGVJbiI/ImZhZGVPdXQiOiJoaWRlIikpXSgocz9hOm51bGwpLHApfWlmKCFzKXtwKCl9dGhpcy5fZGF0ZXBpY2tlclNob3dpbmc9ZmFsc2U7bz10aGlzLl9nZXQoYiwib25DbG9zZSIpO2lmKG8pe28uYXBwbHkoKGIuaW5wdXQ/Yi5pbnB1dFswXTpudWxsKSxbKGIuaW5wdXQ/Yi5pbnB1dC52YWwoKToiIiksYl0pfXRoaXMuX2xhc3RJbnB1dD1udWxsO2lmKHRoaXMuX2luRGlhbG9nKXt0aGlzLl9kaWFsb2dJbnB1dC5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsbGVmdDoiMCIsdG9wOiItMTAwcHgifSk7aWYoJC5ibG9ja1VJKXskLnVuYmxvY2tVSSgpOyQoImJvZHkiKS5hcHBlbmQodGhpcy5kcERpdil9fXRoaXMuX2luRGlhbG9nPWZhbHNlfX0sX3RpZHlEaWFsb2c6ZnVuY3Rpb24oaSl7aS5kcERpdi5yZW1vdmVDbGFzcyh0aGlzLl9kaWFsb2dDbGFzcykudW5iaW5kKCIudWktZGF0ZXBpY2tlci1jYWxlbmRhciIpfSxfY2hlY2tFeHRlcm5hbENsaWNrOmZ1bmN0aW9uKGUpe2lmKCEkLmRhdGVwaWNrZXIuX2N1ckluc3Qpe3JldHVybn12YXIgYT0kKGUudGFyZ2V0KSxpPSQuZGF0ZXBpY2tlci5fZ2V0SW5zdChhWzBdKTtpZigoKGFbMF0uaWQhPT0kLmRhdGVwaWNrZXIuX21haW5EaXZJZCYmYS5wYXJlbnRzKCIjIiskLmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoPT09MCYmIWEuaGFzQ2xhc3MoJC5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSkmJiFhLmNsb3Nlc3QoIi4iKyQuZGF0ZXBpY2tlci5fdHJpZ2dlckNsYXNzKS5sZW5ndGgmJiQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJiEoJC5kYXRlcGlja2VyLl9pbkRpYWxvZyYmJC5ibG9ja1VJKSkpfHwoYS5oYXNDbGFzcygkLmRhdGVwaWNrZXIubWFya2VyQ2xhc3NOYW1lKSYmJC5kYXRlcGlja2VyLl9jdXJJbnN0IT09aSkpeyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKX19LF9hZGp1c3REYXRlOmZ1bmN0aW9uKGksbyxwKXt2YXIgdD0kKGkpLGE9dGhpcy5fZ2V0SW5zdCh0WzBdKTtpZih0aGlzLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcih0WzBdKSl7cmV0dXJufXRoaXMuX2FkanVzdEluc3REYXRlKGEsbysocD09PSJNIj90aGlzLl9nZXQoYSwic2hvd0N1cnJlbnRBdFBvcyIpOjApLHApO3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoYSl9LF9nb3RvVG9kYXk6ZnVuY3Rpb24oaSl7dmFyIGEsdD0kKGkpLGI9dGhpcy5fZ2V0SW5zdCh0WzBdKTtpZih0aGlzLl9nZXQoYiwiZ290b0N1cnJlbnQiKSYmYi5jdXJyZW50RGF5KXtiLnNlbGVjdGVkRGF5PWIuY3VycmVudERheTtiLmRyYXdNb250aD1iLnNlbGVjdGVkTW9udGg9Yi5jdXJyZW50TW9udGg7Yi5kcmF3WWVhcj1iLnNlbGVjdGVkWWVhcj1iLmN1cnJlbnRZZWFyfWVsc2V7YT1uZXcgRGF0ZSgpO2Iuc2VsZWN0ZWREYXk9YS5nZXREYXRlKCk7Yi5kcmF3TW9udGg9Yi5zZWxlY3RlZE1vbnRoPWEuZ2V0TW9udGgoKTtiLmRyYXdZZWFyPWIuc2VsZWN0ZWRZZWFyPWEuZ2V0RnVsbFllYXIoKX10aGlzLl9ub3RpZnlDaGFuZ2UoYik7dGhpcy5fYWRqdXN0RGF0ZSh0KX0sX3NlbGVjdE1vbnRoWWVhcjpmdW5jdGlvbihpLHMscCl7dmFyIHQ9JChpKSxhPXRoaXMuX2dldEluc3QodFswXSk7YVsic2VsZWN0ZWQiKyhwPT09Ik0iPyJNb250aCI6IlllYXIiKV09YVsiZHJhdyIrKHA9PT0iTSI/Ik1vbnRoIjoiWWVhciIpXT1wYXJzZUludChzLm9wdGlvbnNbcy5zZWxlY3RlZEluZGV4XS52YWx1ZSwxMCk7dGhpcy5fbm90aWZ5Q2hhbmdlKGEpO3RoaXMuX2FkanVzdERhdGUodCl9LF9zZWxlY3REYXk6ZnVuY3Rpb24oaSxtLHksdCl7dmFyIGEsYj0kKGkpO2lmKCQodCkuaGFzQ2xhc3ModGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MpfHx0aGlzLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihiWzBdKSl7cmV0dXJufWE9dGhpcy5fZ2V0SW5zdChiWzBdKTthLnNlbGVjdGVkRGF5PWEuY3VycmVudERheT0kKCJhIix0KS5odG1sKCk7YS5zZWxlY3RlZE1vbnRoPWEuY3VycmVudE1vbnRoPW07YS5zZWxlY3RlZFllYXI9YS5jdXJyZW50WWVhcj15O3RoaXMuX3NlbGVjdERhdGUoaSx0aGlzLl9mb3JtYXREYXRlKGEsYS5jdXJyZW50RGF5LGEuY3VycmVudE1vbnRoLGEuY3VycmVudFllYXIpKX0sX2NsZWFyRGF0ZTpmdW5jdGlvbihpKXt2YXIgdD0kKGkpO3RoaXMuX3NlbGVjdERhdGUodCwiIil9LF9zZWxlY3REYXRlOmZ1bmN0aW9uKGksYSl7dmFyIG8sdD0kKGkpLGI9dGhpcy5fZ2V0SW5zdCh0WzBdKTthPShhIT1udWxsP2E6dGhpcy5fZm9ybWF0RGF0ZShiKSk7aWYoYi5pbnB1dCl7Yi5pbnB1dC52YWwoYSl9dGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGIpO289dGhpcy5fZ2V0KGIsIm9uU2VsZWN0Iik7aWYobyl7by5hcHBseSgoYi5pbnB1dD9iLmlucHV0WzBdOm51bGwpLFthLGJdKX1lbHNlIGlmKGIuaW5wdXQpe2IuaW5wdXQudHJpZ2dlcigiY2hhbmdlIil9aWYoYi5pbmxpbmUpe3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoYil9ZWxzZXt0aGlzLl9oaWRlRGF0ZXBpY2tlcigpO3RoaXMuX2xhc3RJbnB1dD1iLmlucHV0WzBdO2lmKHR5cGVvZihiLmlucHV0WzBdKSE9PSJvYmplY3QiKXtiLmlucHV0LmZvY3VzKCl9dGhpcy5fbGFzdElucHV0PW51bGx9fSxfdXBkYXRlQWx0ZXJuYXRlOmZ1bmN0aW9uKGkpe3ZhciBhLGIsZSxnPXRoaXMuX2dldChpLCJhbHRGaWVsZCIpO2lmKGcpe2E9dGhpcy5fZ2V0KGksImFsdEZvcm1hdCIpfHx0aGlzLl9nZXQoaSwiZGF0ZUZvcm1hdCIpO2I9dGhpcy5fZ2V0RGF0ZShpKTtlPXRoaXMuZm9ybWF0RGF0ZShhLGIsdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGkpKTskKGcpLmVhY2goZnVuY3Rpb24oKXskKHRoaXMpLnZhbChlKX0pfX0sbm9XZWVrZW5kczpmdW5jdGlvbihhKXt2YXIgYj1hLmdldERheSgpO3JldHVyblsoYj4wJiZiPDYpLCIiXX0saXNvODYwMVdlZWs6ZnVuY3Rpb24oYSl7dmFyIHQsYj1uZXcgRGF0ZShhLmdldFRpbWUoKSk7Yi5zZXREYXRlKGIuZ2V0RGF0ZSgpKzQtKGIuZ2V0RGF5KCl8fDcpKTt0PWIuZ2V0VGltZSgpO2Iuc2V0TW9udGgoMCk7Yi5zZXREYXRlKDEpO3JldHVybiBNYXRoLmZsb29yKE1hdGgucm91bmQoKHQtYikvODY0MDAwMDApLzcpKzF9LHBhcnNlRGF0ZTpmdW5jdGlvbihlLGcscyl7aWYoZT09bnVsbHx8Zz09bnVsbCl7dGhyb3ciSW52YWxpZCBhcmd1bWVudHMifWc9KHR5cGVvZiBnPT09Im9iamVjdCI/Zy50b1N0cmluZygpOmcrIiIpO2lmKGc9PT0iIil7cmV0dXJuIG51bGx9dmFyIEYsaCxqLFY9MCxsPShzP3Muc2hvcnRZZWFyQ3V0b2ZmOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5zaG9ydFllYXJDdXRvZmYsbT0odHlwZW9mIGwhPT0ic3RyaW5nIj9sOm5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSUxMDArcGFyc2VJbnQobCwxMCkpLG49KHM/cy5kYXlOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LG89KHM/cy5kYXlOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXMscD0ocz9zLm1vbnRoTmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LHE9KHM/cy5tb250aE5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLHk9LTEscj0tMSx0PS0xLHc9LTEseD1mYWxzZSx6LEE9ZnVuY3Rpb24oYSl7dmFyIGI9KEYrMTxlLmxlbmd0aCYmZS5jaGFyQXQoRisxKT09PWEpO2lmKGIpe0YrK31yZXR1cm4gYn0sQj1mdW5jdGlvbihhKXt2YXIgaT1BKGEpLGI9KGE9PT0iQCI/MTQ6KGE9PT0iISI/MjA6KGE9PT0ieSImJmk/NDooYT09PSJvIj8zOjIpKSkpLGs9bmV3IFJlZ0V4cCgiXlxcZHsxLCIrYisifSIpLHY9Zy5zdWJzdHJpbmcoVikubWF0Y2goayk7aWYoIXYpe3Rocm93Ik1pc3NpbmcgbnVtYmVyIGF0IHBvc2l0aW9uICIrVn1WKz12WzBdLmxlbmd0aDtyZXR1cm4gcGFyc2VJbnQodlswXSwxMCl9LEM9ZnVuY3Rpb24oRyxILEkpe3ZhciBKPS0xLEs9JC5tYXAoQShHKT9JOkgsZnVuY3Rpb24odixrKXtyZXR1cm5bW2ssdl1dfSkuc29ydChmdW5jdGlvbihhLGIpe3JldHVybi0oYVsxXS5sZW5ndGgtYlsxXS5sZW5ndGgpfSk7JC5lYWNoKEssZnVuY3Rpb24oaSxhKXt2YXIgYj1hWzFdO2lmKGcuc3Vic3RyKFYsYi5sZW5ndGgpLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCkpe0o9YVswXTtWKz1iLmxlbmd0aDtyZXR1cm4gZmFsc2V9fSk7aWYoSiE9PS0xKXtyZXR1cm4gSisxfWVsc2V7dGhyb3ciVW5rbm93biBuYW1lIGF0IHBvc2l0aW9uICIrVn19LEU9ZnVuY3Rpb24oKXtpZihnLmNoYXJBdChWKSE9PWUuY2hhckF0KEYpKXt0aHJvdyJVbmV4cGVjdGVkIGxpdGVyYWwgYXQgcG9zaXRpb24gIitWfVYrK307Zm9yKEY9MDtGPGUubGVuZ3RoO0YrKyl7aWYoeCl7aWYoZS5jaGFyQXQoRik9PT0iJyImJiFBKCInIikpe3g9ZmFsc2V9ZWxzZXtFKCl9fWVsc2V7c3dpdGNoKGUuY2hhckF0KEYpKXtjYXNlImQiOnQ9QigiZCIpO2JyZWFrO2Nhc2UiRCI6QygiRCIsbixvKTticmVhaztjYXNlIm8iOnc9QigibyIpO2JyZWFrO2Nhc2UibSI6cj1CKCJtIik7YnJlYWs7Y2FzZSJNIjpyPUMoIk0iLHAscSk7YnJlYWs7Y2FzZSJ5Ijp5PUIoInkiKTticmVhaztjYXNlIkAiOno9bmV3IERhdGUoQigiQCIpKTt5PXouZ2V0RnVsbFllYXIoKTtyPXouZ2V0TW9udGgoKSsxO3Q9ei5nZXREYXRlKCk7YnJlYWs7Y2FzZSIhIjp6PW5ldyBEYXRlKChCKCIhIiktdGhpcy5fdGlja3NUbzE5NzApLzEwMDAwKTt5PXouZ2V0RnVsbFllYXIoKTtyPXouZ2V0TW9udGgoKSsxO3Q9ei5nZXREYXRlKCk7YnJlYWs7Y2FzZSInIjppZihBKCInIikpe0UoKX1lbHNle3g9dHJ1ZX1icmVhaztkZWZhdWx0OkUoKX19fWlmKFY8Zy5sZW5ndGgpe2o9Zy5zdWJzdHIoVik7aWYoIS9eXHMrLy50ZXN0KGopKXt0aHJvdyJFeHRyYS91bnBhcnNlZCBjaGFyYWN0ZXJzIGZvdW5kIGluIGRhdGU6ICIran19aWYoeT09PS0xKXt5PW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX1lbHNlIGlmKHk8MTAwKXt5Kz1uZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCktbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpJTEwMCsoeTw9bT8wOi0xMDApfWlmKHc+LTEpe3I9MTt0PXc7ZG97aD10aGlzLl9nZXREYXlzSW5Nb250aCh5LHItMSk7aWYodDw9aCl7YnJlYWt9cisrO3QtPWh9d2hpbGUodHJ1ZSl9ej10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh5LHItMSx0KSk7aWYoei5nZXRGdWxsWWVhcigpIT09eXx8ei5nZXRNb250aCgpKzEhPT1yfHx6LmdldERhdGUoKSE9PXQpe3Rocm93IkludmFsaWQgZGF0ZSJ9cmV0dXJuIHp9LEFUT006Inl5LW1tLWRkIixDT09LSUU6IkQsIGRkIE0geXkiLElTT184NjAxOiJ5eS1tbS1kZCIsUkZDXzgyMjoiRCwgZCBNIHkiLFJGQ184NTA6IkRELCBkZC1NLXkiLFJGQ18xMDM2OiJELCBkIE0geSIsUkZDXzExMjM6IkQsIGQgTSB5eSIsUkZDXzI4MjI6IkQsIGQgTSB5eSIsUlNTOiJELCBkIE0geSIsVElDS1M6IiEiLFRJTUVTVEFNUDoiQCIsVzNDOiJ5eS1tbS1kZCIsX3RpY2tzVG8xOTcwOigoKDE5NzAtMSkqMzY1K01hdGguZmxvb3IoMTk3MC80KS1NYXRoLmZsb29yKDE5NzAvMTAwKStNYXRoLmZsb29yKDE5NzAvNDAwKSkqMjQqNjAqNjAqMTAwMDAwMDApLGZvcm1hdERhdGU6ZnVuY3Rpb24oYSxiLHMpe2lmKCFiKXtyZXR1cm4iIn12YXIgRixlPShzP3MuZGF5TmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXNTaG9ydCxnPShzP3MuZGF5TmFtZXM6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzLG09KHM/cy5tb250aE5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydCxoPShzP3MubW9udGhOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lcyxsPWZ1bmN0aW9uKG4pe3ZhciBwPShGKzE8YS5sZW5ndGgmJmEuY2hhckF0KEYrMSk9PT1uKTtpZihwKXtGKyt9cmV0dXJuIHB9LGk9ZnVuY3Rpb24obix2LHApe3ZhciBxPSIiK3Y7aWYobChuKSl7d2hpbGUocS5sZW5ndGg8cCl7cT0iMCIrcX19cmV0dXJuIHF9LGo9ZnVuY3Rpb24obix2LHAscSl7cmV0dXJuKGwobik/cVt2XTpwW3ZdKX0sbz0iIixrPWZhbHNlO2lmKGIpe2ZvcihGPTA7RjxhLmxlbmd0aDtGKyspe2lmKGspe2lmKGEuY2hhckF0KEYpPT09IiciJiYhbCgiJyIpKXtrPWZhbHNlfWVsc2V7bys9YS5jaGFyQXQoRil9fWVsc2V7c3dpdGNoKGEuY2hhckF0KEYpKXtjYXNlImQiOm8rPWkoImQiLGIuZ2V0RGF0ZSgpLDIpO2JyZWFrO2Nhc2UiRCI6bys9aigiRCIsYi5nZXREYXkoKSxlLGcpO2JyZWFrO2Nhc2UibyI6bys9aSgibyIsTWF0aC5yb3VuZCgobmV3IERhdGUoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSxiLmdldERhdGUoKSkuZ2V0VGltZSgpLW5ldyBEYXRlKGIuZ2V0RnVsbFllYXIoKSwwLDApLmdldFRpbWUoKSkvODY0MDAwMDApLDMpO2JyZWFrO2Nhc2UibSI6bys9aSgibSIsYi5nZXRNb250aCgpKzEsMik7YnJlYWs7Y2FzZSJNIjpvKz1qKCJNIixiLmdldE1vbnRoKCksbSxoKTticmVhaztjYXNlInkiOm8rPShsKCJ5Iik/Yi5nZXRGdWxsWWVhcigpOihiLmdldFllYXIoKSUxMDA8MTA/IjAiOiIiKStiLmdldFllYXIoKSUxMDApO2JyZWFrO2Nhc2UiQCI6bys9Yi5nZXRUaW1lKCk7YnJlYWs7Y2FzZSIhIjpvKz1iLmdldFRpbWUoKSoxMDAwMCt0aGlzLl90aWNrc1RvMTk3MDticmVhaztjYXNlIiciOmlmKGwoIiciKSl7bys9IicifWVsc2V7az10cnVlfWJyZWFrO2RlZmF1bHQ6bys9YS5jaGFyQXQoRil9fX19cmV0dXJuIG99LF9wb3NzaWJsZUNoYXJzOmZ1bmN0aW9uKGEpe3ZhciBGLGI9IiIsbD1mYWxzZSxlPWZ1bmN0aW9uKG0pe3ZhciBnPShGKzE8YS5sZW5ndGgmJmEuY2hhckF0KEYrMSk9PT1tKTtpZihnKXtGKyt9cmV0dXJuIGd9O2ZvcihGPTA7RjxhLmxlbmd0aDtGKyspe2lmKGwpe2lmKGEuY2hhckF0KEYpPT09IiciJiYhZSgiJyIpKXtsPWZhbHNlfWVsc2V7Yis9YS5jaGFyQXQoRil9fWVsc2V7c3dpdGNoKGEuY2hhckF0KEYpKXtjYXNlImQiOmNhc2UibSI6Y2FzZSJ5IjpjYXNlIkAiOmIrPSIwMTIzNDU2Nzg5IjticmVhaztjYXNlIkQiOmNhc2UiTSI6cmV0dXJuIG51bGw7Y2FzZSInIjppZihlKCInIikpe2IrPSInIn1lbHNle2w9dHJ1ZX1icmVhaztkZWZhdWx0OmIrPWEuY2hhckF0KEYpfX19cmV0dXJuIGJ9LF9nZXQ6ZnVuY3Rpb24oaSxuKXtyZXR1cm4gaS5zZXR0aW5nc1tuXSE9PXU/aS5zZXR0aW5nc1tuXTp0aGlzLl9kZWZhdWx0c1tuXX0sX3NldERhdGVGcm9tRmllbGQ6ZnVuY3Rpb24oaSxuKXtpZihpLmlucHV0LnZhbCgpPT09aS5sYXN0VmFsKXtyZXR1cm59dmFyIGE9dGhpcy5fZ2V0KGksImRhdGVGb3JtYXQiKSxiPWkubGFzdFZhbD1pLmlucHV0P2kuaW5wdXQudmFsKCk6bnVsbCxlPXRoaXMuX2dldERlZmF1bHREYXRlKGkpLGc9ZSxzPXRoaXMuX2dldEZvcm1hdENvbmZpZyhpKTt0cnl7Zz10aGlzLnBhcnNlRGF0ZShhLGIscyl8fGV9Y2F0Y2goaCl7Yj0obj8iIjpiKX1pLnNlbGVjdGVkRGF5PWcuZ2V0RGF0ZSgpO2kuZHJhd01vbnRoPWkuc2VsZWN0ZWRNb250aD1nLmdldE1vbnRoKCk7aS5kcmF3WWVhcj1pLnNlbGVjdGVkWWVhcj1nLmdldEZ1bGxZZWFyKCk7aS5jdXJyZW50RGF5PShiP2cuZ2V0RGF0ZSgpOjApO2kuY3VycmVudE1vbnRoPShiP2cuZ2V0TW9udGgoKTowKTtpLmN1cnJlbnRZZWFyPShiP2cuZ2V0RnVsbFllYXIoKTowKTt0aGlzLl9hZGp1c3RJbnN0RGF0ZShpKX0sX2dldERlZmF1bHREYXRlOmZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLl9yZXN0cmljdE1pbk1heChpLHRoaXMuX2RldGVybWluZURhdGUoaSx0aGlzLl9nZXQoaSwiZGVmYXVsdERhdGUiKSxuZXcgRGF0ZSgpKSl9LF9kZXRlcm1pbmVEYXRlOmZ1bmN0aW9uKGksYSxiKXt2YXIgbz1mdW5jdGlvbihlKXt2YXIgYT1uZXcgRGF0ZSgpO2Euc2V0RGF0ZShhLmdldERhdGUoKStlKTtyZXR1cm4gYX0sZz1mdW5jdGlvbihoKXt0cnl7cmV0dXJuICQuZGF0ZXBpY2tlci5wYXJzZURhdGUoJC5kYXRlcGlja2VyLl9nZXQoaSwiZGF0ZUZvcm1hdCIpLGgsJC5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcoaSkpfWNhdGNoKGUpe312YXIgYT0oaC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eYy8pPyQuZGF0ZXBpY2tlci5fZ2V0RGF0ZShpKTpudWxsKXx8bmV3IERhdGUoKSx5PWEuZ2V0RnVsbFllYXIoKSxtPWEuZ2V0TW9udGgoKSxqPWEuZ2V0RGF0ZSgpLHA9LyhbK1wtXT9bMC05XSspXHMqKGR8RHx3fFd8bXxNfHl8WSk/L2csaz1wLmV4ZWMoaCk7d2hpbGUoayl7c3dpdGNoKGtbMl18fCJkIil7Y2FzZSJkIjpjYXNlIkQiOmorPXBhcnNlSW50KGtbMV0sMTApO2JyZWFrO2Nhc2UidyI6Y2FzZSJXIjpqKz1wYXJzZUludChrWzFdLDEwKSo3O2JyZWFrO2Nhc2UibSI6Y2FzZSJNIjptKz1wYXJzZUludChrWzFdLDEwKTtqPU1hdGgubWluKGosJC5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aCh5LG0pKTticmVhaztjYXNlInkiOmNhc2UiWSI6eSs9cGFyc2VJbnQoa1sxXSwxMCk7aj1NYXRoLm1pbihqLCQuZGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgoeSxtKSk7YnJlYWt9az1wLmV4ZWMoaCl9cmV0dXJuIG5ldyBEYXRlKHksbSxqKX0sbj0oYT09bnVsbHx8YT09PSIiP2I6KHR5cGVvZiBhPT09InN0cmluZyI/ZyhhKToodHlwZW9mIGE9PT0ibnVtYmVyIj8oaXNOYU4oYSk/YjpvKGEpKTpuZXcgRGF0ZShhLmdldFRpbWUoKSkpKSk7bj0obiYmbi50b1N0cmluZygpPT09IkludmFsaWQgRGF0ZSI/YjpuKTtpZihuKXtuLnNldEhvdXJzKDApO24uc2V0TWludXRlcygwKTtuLnNldFNlY29uZHMoMCk7bi5zZXRNaWxsaXNlY29uZHMoMCl9cmV0dXJuIHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG4pfSxfZGF5bGlnaHRTYXZpbmdBZGp1c3Q6ZnVuY3Rpb24oYSl7aWYoIWEpe3JldHVybiBudWxsfWEuc2V0SG91cnMoYS5nZXRIb3VycygpPjEyP2EuZ2V0SG91cnMoKSsyOjApO3JldHVybiBhfSxfc2V0RGF0ZTpmdW5jdGlvbihpLGEsbil7dmFyIGI9IWEsbz1pLnNlbGVjdGVkTW9udGgsZT1pLnNlbGVjdGVkWWVhcixnPXRoaXMuX3Jlc3RyaWN0TWluTWF4KGksdGhpcy5fZGV0ZXJtaW5lRGF0ZShpLGEsbmV3IERhdGUoKSkpO2kuc2VsZWN0ZWREYXk9aS5jdXJyZW50RGF5PWcuZ2V0RGF0ZSgpO2kuZHJhd01vbnRoPWkuc2VsZWN0ZWRNb250aD1pLmN1cnJlbnRNb250aD1nLmdldE1vbnRoKCk7aS5kcmF3WWVhcj1pLnNlbGVjdGVkWWVhcj1pLmN1cnJlbnRZZWFyPWcuZ2V0RnVsbFllYXIoKTtpZigobyE9PWkuc2VsZWN0ZWRNb250aHx8ZSE9PWkuc2VsZWN0ZWRZZWFyKSYmIW4pe3RoaXMuX25vdGlmeUNoYW5nZShpKX10aGlzLl9hZGp1c3RJbnN0RGF0ZShpKTtpZihpLmlucHV0KXtpLmlucHV0LnZhbChiPyIiOnRoaXMuX2Zvcm1hdERhdGUoaSkpfX0sX2dldERhdGU6ZnVuY3Rpb24oaSl7dmFyIHM9KCFpLmN1cnJlbnRZZWFyfHwoaS5pbnB1dCYmaS5pbnB1dC52YWwoKT09PSIiKT9udWxsOnRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGkuY3VycmVudFllYXIsaS5jdXJyZW50TW9udGgsaS5jdXJyZW50RGF5KSkpO3JldHVybiBzfSxfYXR0YWNoSGFuZGxlcnM6ZnVuY3Rpb24oaSl7dmFyIHM9dGhpcy5fZ2V0KGksInN0ZXBNb250aHMiKSxhPSIjIitpLmlkLnJlcGxhY2UoL1xcXFwvZywiXFwiKTtpLmRwRGl2LmZpbmQoIltkYXRhLWhhbmRsZXJdIikubWFwKGZ1bmN0aW9uKCl7dmFyIGg9e3ByZXY6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoYSwtcywiTSIpfSxuZXh0OmZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGEsK3MsIk0iKX0saGlkZTpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKX0sdG9kYXk6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX2dvdG9Ub2RheShhKX0sc2VsZWN0RGF5OmZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl9zZWxlY3REYXkoYSwrdGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEtbW9udGgiKSwrdGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEteWVhciIpLHRoaXMpO3JldHVybiBmYWxzZX0sc2VsZWN0TW9udGg6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX3NlbGVjdE1vbnRoWWVhcihhLHRoaXMsIk0iKTtyZXR1cm4gZmFsc2V9LHNlbGVjdFllYXI6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX3NlbGVjdE1vbnRoWWVhcihhLHRoaXMsIlkiKTtyZXR1cm4gZmFsc2V9fTskKHRoaXMpLmJpbmQodGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEtZXZlbnQiKSxoW3RoaXMuZ2V0QXR0cmlidXRlKCJkYXRhLWhhbmRsZXIiKV0pfSl9LF9nZW5lcmF0ZUhUTUw6ZnVuY3Rpb24oaSl7dmFyIG0scCxhLG4sYixlLGcsaCxqLGsscyxsLG8scSxyLHQsdix3LHgseSx6LEEsQixDLEUsRixHLEgsSSxKLEssTCxNLE4sUixPLFEsUyxULFU9bmV3IERhdGUoKSxWPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKFUuZ2V0RnVsbFllYXIoKSxVLmdldE1vbnRoKCksVS5nZXREYXRlKCkpKSxXPXRoaXMuX2dldChpLCJpc1JUTCIpLFg9dGhpcy5fZ2V0KGksInNob3dCdXR0b25QYW5lbCIpLFk9dGhpcy5fZ2V0KGksImhpZGVJZk5vUHJldk5leHQiKSxaPXRoaXMuX2dldChpLCJuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0IiksXz10aGlzLl9nZXROdW1iZXJPZk1vbnRocyhpKSxhMT10aGlzLl9nZXQoaSwic2hvd0N1cnJlbnRBdFBvcyIpLGIxPXRoaXMuX2dldChpLCJzdGVwTW9udGhzIiksYzE9KF9bMF0hPT0xfHxfWzFdIT09MSksZDE9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoKCFpLmN1cnJlbnREYXk/bmV3IERhdGUoOTk5OSw5LDkpOm5ldyBEYXRlKGkuY3VycmVudFllYXIsaS5jdXJyZW50TW9udGgsaS5jdXJyZW50RGF5KSkpLGUxPXRoaXMuX2dldE1pbk1heERhdGUoaSwibWluIiksZjE9dGhpcy5fZ2V0TWluTWF4RGF0ZShpLCJtYXgiKSxnMT1pLmRyYXdNb250aC1hMSxoMT1pLmRyYXdZZWFyO2lmKGcxPDApe2cxKz0xMjtoMS0tfWlmKGYxKXttPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGYxLmdldEZ1bGxZZWFyKCksZjEuZ2V0TW9udGgoKS0oX1swXSpfWzFdKSsxLGYxLmdldERhdGUoKSkpO209KGUxJiZtPGUxP2UxOm0pO3doaWxlKHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGgxLGcxLDEpKT5tKXtnMS0tO2lmKGcxPDApe2cxPTExO2gxLS19fX1pLmRyYXdNb250aD1nMTtpLmRyYXdZZWFyPWgxO3A9dGhpcy5fZ2V0KGksInByZXZUZXh0Iik7cD0oIVo/cDp0aGlzLmZvcm1hdERhdGUocCx0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShoMSxnMS1iMSwxKSksdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGkpKSk7YT0odGhpcy5fY2FuQWRqdXN0TW9udGgoaSwtMSxoMSxnMSk/IjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLXByZXYgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSdwcmV2JyBkYXRhLWV2ZW50PSdjbGljayciKyIgdGl0bGU9JyIrcCsiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0iKyhXPyJlIjoidyIpKyInPiIrcCsiPC9zcGFuPjwvYT4iOihZPyIiOiI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQnIHRpdGxlPSciK3ArIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIisoVz8iZSI6InciKSsiJz4iK3ArIjwvc3Bhbj48L2E+IikpO249dGhpcy5fZ2V0KGksIm5leHRUZXh0Iik7bj0oIVo/bjp0aGlzLmZvcm1hdERhdGUobix0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShoMSxnMStiMSwxKSksdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGkpKSk7Yj0odGhpcy5fY2FuQWRqdXN0TW9udGgoaSwrMSxoMSxnMSk/IjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLW5leHQgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSduZXh0JyBkYXRhLWV2ZW50PSdjbGljayciKyIgdGl0bGU9JyIrbisiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0iKyhXPyJ3IjoiZSIpKyInPiIrbisiPC9zcGFuPjwvYT4iOihZPyIiOiI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1uZXh0IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQnIHRpdGxlPSciK24rIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIisoVz8idyI6ImUiKSsiJz4iK24rIjwvc3Bhbj48L2E+IikpO2U9dGhpcy5fZ2V0KGksImN1cnJlbnRUZXh0Iik7Zz0odGhpcy5fZ2V0KGksImdvdG9DdXJyZW50IikmJmkuY3VycmVudERheT9kMTpWKTtlPSghWj9lOnRoaXMuZm9ybWF0RGF0ZShlLGcsdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGkpKSk7aD0oIWkuaW5saW5lPyI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J3VpLWRhdGVwaWNrZXItY2xvc2UgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1wcmltYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0naGlkZScgZGF0YS1ldmVudD0nY2xpY2snPiIrdGhpcy5fZ2V0KGksImNsb3NlVGV4dCIpKyI8L2J1dHRvbj4iOiIiKTtqPShYKT8iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1idXR0b25wYW5lIHVpLXdpZGdldC1jb250ZW50Jz4iKyhXP2g6IiIpKyh0aGlzLl9pc0luUmFuZ2UoaSxnKT8iPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSd1aS1kYXRlcGlja2VyLWN1cnJlbnQgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1zZWNvbmRhcnkgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSd0b2RheScgZGF0YS1ldmVudD0nY2xpY2snIisiPiIrZSsiPC9idXR0b24+IjoiIikrKFc/IiI6aCkrIjwvZGl2PiI6IiI7az1wYXJzZUludCh0aGlzLl9nZXQoaSwiZmlyc3REYXkiKSwxMCk7az0oaXNOYU4oayk/MDprKTtzPXRoaXMuX2dldChpLCJzaG93V2VlayIpO2w9dGhpcy5fZ2V0KGksImRheU5hbWVzIik7bz10aGlzLl9nZXQoaSwiZGF5TmFtZXNNaW4iKTtxPXRoaXMuX2dldChpLCJtb250aE5hbWVzIik7cj10aGlzLl9nZXQoaSwibW9udGhOYW1lc1Nob3J0Iik7dD10aGlzLl9nZXQoaSwiYmVmb3JlU2hvd0RheSIpO3Y9dGhpcy5fZ2V0KGksInNob3dPdGhlck1vbnRocyIpO3c9dGhpcy5fZ2V0KGksInNlbGVjdE90aGVyTW9udGhzIik7eD10aGlzLl9nZXREZWZhdWx0RGF0ZShpKTt5PSIiO3o7Zm9yKEE9MDtBPF9bMF07QSsrKXtCPSIiO3RoaXMubWF4Um93cz00O2ZvcihDPTA7QzxfWzFdO0MrKyl7RT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShoMSxnMSxpLnNlbGVjdGVkRGF5KSk7Rj0iIHVpLWNvcm5lci1hbGwiO0c9IiI7aWYoYzEpe0crPSI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLWdyb3VwIjtpZihfWzFdPjEpe3N3aXRjaChDKXtjYXNlIDA6Rys9IiB1aS1kYXRlcGlja2VyLWdyb3VwLWZpcnN0IjtGPSIgdWktY29ybmVyLSIrKFc/InJpZ2h0IjoibGVmdCIpO2JyZWFrO2Nhc2UgX1sxXS0xOkcrPSIgdWktZGF0ZXBpY2tlci1ncm91cC1sYXN0IjtGPSIgdWktY29ybmVyLSIrKFc/ImxlZnQiOiJyaWdodCIpO2JyZWFrO2RlZmF1bHQ6Rys9IiB1aS1kYXRlcGlja2VyLWdyb3VwLW1pZGRsZSI7Rj0iIjticmVha319Rys9Iic+In1HKz0iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1oZWFkZXIgdWktd2lkZ2V0LWhlYWRlciB1aS1oZWxwZXItY2xlYXJmaXgiK0YrIic+IisoL2FsbHxsZWZ0Ly50ZXN0KEYpJiZBPT09MD8oVz9iOmEpOiIiKSsoL2FsbHxyaWdodC8udGVzdChGKSYmQT09PTA/KFc/YTpiKToiIikrdGhpcy5fZ2VuZXJhdGVNb250aFllYXJIZWFkZXIoaSxnMSxoMSxlMSxmMSxBPjB8fEM+MCxxLHIpKyI8L2Rpdj48dGFibGUgY2xhc3M9J3VpLWRhdGVwaWNrZXItY2FsZW5kYXInPjx0aGVhZD4iKyI8dHI+IjtIPShzPyI8dGggY2xhc3M9J3VpLWRhdGVwaWNrZXItd2Vlay1jb2wnPiIrdGhpcy5fZ2V0KGksIndlZWtIZWFkZXIiKSsiPC90aD4iOiIiKTtmb3Ioej0wO3o8Nzt6Kyspe0k9KHorayklNztIKz0iPHRoIisoKHorays2KSU3Pj01PyIgY2xhc3M9J3VpLWRhdGVwaWNrZXItd2Vlay1lbmQnIjoiIikrIj4iKyI8c3BhbiB0aXRsZT0nIitsW0ldKyInPiIrb1tJXSsiPC9zcGFuPjwvdGg+In1HKz1IKyI8L3RyPjwvdGhlYWQ+PHRib2R5PiI7Sj10aGlzLl9nZXREYXlzSW5Nb250aChoMSxnMSk7aWYoaDE9PT1pLnNlbGVjdGVkWWVhciYmZzE9PT1pLnNlbGVjdGVkTW9udGgpe2kuc2VsZWN0ZWREYXk9TWF0aC5taW4oaS5zZWxlY3RlZERheSxKKX1LPSh0aGlzLl9nZXRGaXJzdERheU9mTW9udGgoaDEsZzEpLWsrNyklNztMPU1hdGguY2VpbCgoSytKKS83KTtNPShjMT90aGlzLm1heFJvd3M+TD90aGlzLm1heFJvd3M6TDpMKTt0aGlzLm1heFJvd3M9TTtOPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGgxLGcxLDEtSykpO2ZvcihSPTA7UjxNO1IrKyl7Rys9Ijx0cj4iO089KCFzPyIiOiI8dGQgY2xhc3M9J3VpLWRhdGVwaWNrZXItd2Vlay1jb2wnPiIrdGhpcy5fZ2V0KGksImNhbGN1bGF0ZVdlZWsiKShOKSsiPC90ZD4iKTtmb3Ioej0wO3o8Nzt6Kyspe1E9KHQ/dC5hcHBseSgoaS5pbnB1dD9pLmlucHV0WzBdOm51bGwpLFtOXSk6W3RydWUsIiJdKTtTPShOLmdldE1vbnRoKCkhPT1nMSk7VD0oUyYmIXcpfHwhUVswXXx8KGUxJiZOPGUxKXx8KGYxJiZOPmYxKTtPKz0iPHRkIGNsYXNzPSciKygoeitrKzYpJTc+PTU/IiB1aS1kYXRlcGlja2VyLXdlZWstZW5kIjoiIikrKFM/IiB1aS1kYXRlcGlja2VyLW90aGVyLW1vbnRoIjoiIikrKChOLmdldFRpbWUoKT09PUUuZ2V0VGltZSgpJiZnMT09PWkuc2VsZWN0ZWRNb250aCYmaS5fa2V5RXZlbnQpfHwoeC5nZXRUaW1lKCk9PT1OLmdldFRpbWUoKSYmeC5nZXRUaW1lKCk9PT1FLmdldFRpbWUoKSk/IiAiK3RoaXMuX2RheU92ZXJDbGFzczoiIikrKFQ/IiAiK3RoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzKyIgdWktc3RhdGUtZGlzYWJsZWQiOiIiKSsoUyYmIXY/IiI6IiAiK1FbMV0rKE4uZ2V0VGltZSgpPT09ZDEuZ2V0VGltZSgpPyIgIit0aGlzLl9jdXJyZW50Q2xhc3M6IiIpKyhOLmdldFRpbWUoKT09PVYuZ2V0VGltZSgpPyIgdWktZGF0ZXBpY2tlci10b2RheSI6IiIpKSsiJyIrKCghU3x8dikmJlFbMl0/IiB0aXRsZT0nIitRWzJdLnJlcGxhY2UoLycvZywiJiMzOTsiKSsiJyI6IiIpKyhUPyIiOiIgZGF0YS1oYW5kbGVyPSdzZWxlY3REYXknIGRhdGEtZXZlbnQ9J2NsaWNrJyBkYXRhLW1vbnRoPSciK04uZ2V0TW9udGgoKSsiJyBkYXRhLXllYXI9JyIrTi5nZXRGdWxsWWVhcigpKyInIikrIj4iKyhTJiYhdj8iJiN4YTA7IjooVD8iPHNwYW4gY2xhc3M9J3VpLXN0YXRlLWRlZmF1bHQnPiIrTi5nZXREYXRlKCkrIjwvc3Bhbj4iOiI8YSBjbGFzcz0ndWktc3RhdGUtZGVmYXVsdCIrKE4uZ2V0VGltZSgpPT09Vi5nZXRUaW1lKCk/IiB1aS1zdGF0ZS1oaWdobGlnaHQiOiIiKSsoTi5nZXRUaW1lKCk9PT1kMS5nZXRUaW1lKCk/IiB1aS1zdGF0ZS1hY3RpdmUiOiIiKSsoUz8iIHVpLXByaW9yaXR5LXNlY29uZGFyeSI6IiIpKyInIGhyZWY9JyMnPiIrTi5nZXREYXRlKCkrIjwvYT4iKSkrIjwvdGQ+IjtOLnNldERhdGUoTi5nZXREYXRlKCkrMSk7Tj10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChOKX1HKz1PKyI8L3RyPiJ9ZzErKztpZihnMT4xMSl7ZzE9MDtoMSsrfUcrPSI8L3Rib2R5PjwvdGFibGU+IisoYzE/IjwvZGl2PiIrKChfWzBdPjAmJkM9PT1fWzFdLTEpPyI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLXJvdy1icmVhayc+PC9kaXY+IjoiIik6IiIpO0IrPUd9eSs9Qn15Kz1qO2kuX2tleUV2ZW50PWZhbHNlO3JldHVybiB5fSxfZ2VuZXJhdGVNb250aFllYXJIZWFkZXI6ZnVuY3Rpb24oaSxhLGIsbSxlLHMsZyxoKXt2YXIgaixrLGwseSx0LG4sbyxwLHE9dGhpcy5fZ2V0KGksImNoYW5nZU1vbnRoIikscj10aGlzLl9nZXQoaSwiY2hhbmdlWWVhciIpLHY9dGhpcy5fZ2V0KGksInNob3dNb250aEFmdGVyWWVhciIpLHc9IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItdGl0bGUnPiIseD0iIjtpZihzfHwhcSl7eCs9IjxzcGFuIGNsYXNzPSd1aS1kYXRlcGlja2VyLW1vbnRoJz4iK2dbYV0rIjwvc3Bhbj4ifWVsc2V7aj0obSYmbS5nZXRGdWxsWWVhcigpPT09Yik7az0oZSYmZS5nZXRGdWxsWWVhcigpPT09Yik7eCs9IjxzZWxlY3QgY2xhc3M9J3VpLWRhdGVwaWNrZXItbW9udGgnIGRhdGEtaGFuZGxlcj0nc2VsZWN0TW9udGgnIGRhdGEtZXZlbnQ9J2NoYW5nZSc+Ijtmb3IobD0wO2w8MTI7bCsrKXtpZigoIWp8fGw+PW0uZ2V0TW9udGgoKSkmJigha3x8bDw9ZS5nZXRNb250aCgpKSl7eCs9IjxvcHRpb24gdmFsdWU9JyIrbCsiJyIrKGw9PT1hPyIgc2VsZWN0ZWQ9J3NlbGVjdGVkJyI6IiIpKyI+IitoW2xdKyI8L29wdGlvbj4ifX14Kz0iPC9zZWxlY3Q+In1pZighdil7dys9eCsoc3x8IShxJiZyKT8iJiN4YTA7IjoiIil9aWYoIWkueWVhcnNodG1sKXtpLnllYXJzaHRtbD0iIjtpZihzfHwhcil7dys9IjxzcGFuIGNsYXNzPSd1aS1kYXRlcGlja2VyLXllYXInPiIrYisiPC9zcGFuPiJ9ZWxzZXt5PXRoaXMuX2dldChpLCJ5ZWFyUmFuZ2UiKS5zcGxpdCgiOiIpO3Q9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO249ZnVuY3Rpb24oeil7dmFyIG89KHoubWF0Y2goL2NbK1wtXS4qLyk/YitwYXJzZUludCh6LnN1YnN0cmluZygxKSwxMCk6KHoubWF0Y2goL1srXC1dLiovKT90K3BhcnNlSW50KHosMTApOnBhcnNlSW50KHosMTApKSk7cmV0dXJuKGlzTmFOKG8pP3Q6byl9O289bih5WzBdKTtwPU1hdGgubWF4KG8sbih5WzFdfHwiIikpO289KG0/TWF0aC5tYXgobyxtLmdldEZ1bGxZZWFyKCkpOm8pO3A9KGU/TWF0aC5taW4ocCxlLmdldEZ1bGxZZWFyKCkpOnApO2kueWVhcnNodG1sKz0iPHNlbGVjdCBjbGFzcz0ndWktZGF0ZXBpY2tlci15ZWFyJyBkYXRhLWhhbmRsZXI9J3NlbGVjdFllYXInIGRhdGEtZXZlbnQ9J2NoYW5nZSc+Ijtmb3IoO288PXA7bysrKXtpLnllYXJzaHRtbCs9IjxvcHRpb24gdmFsdWU9JyIrbysiJyIrKG89PT1iPyIgc2VsZWN0ZWQ9J3NlbGVjdGVkJyI6IiIpKyI+IitvKyI8L29wdGlvbj4ifWkueWVhcnNodG1sKz0iPC9zZWxlY3Q+Ijt3Kz1pLnllYXJzaHRtbDtpLnllYXJzaHRtbD1udWxsfX13Kz10aGlzLl9nZXQoaSwieWVhclN1ZmZpeCIpO2lmKHYpe3crPShzfHwhKHEmJnIpPyImI3hhMDsiOiIiKSt4fXcrPSI8L2Rpdj4iO3JldHVybiB3fSxfYWRqdXN0SW5zdERhdGU6ZnVuY3Rpb24oaSxvLHApe3ZhciB5PWkuZHJhd1llYXIrKHA9PT0iWSI/bzowKSxtPWkuZHJhd01vbnRoKyhwPT09Ik0iP286MCksYT1NYXRoLm1pbihpLnNlbGVjdGVkRGF5LHRoaXMuX2dldERheXNJbk1vbnRoKHksbSkpKyhwPT09IkQiP286MCksYj10aGlzLl9yZXN0cmljdE1pbk1heChpLHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHksbSxhKSkpO2kuc2VsZWN0ZWREYXk9Yi5nZXREYXRlKCk7aS5kcmF3TW9udGg9aS5zZWxlY3RlZE1vbnRoPWIuZ2V0TW9udGgoKTtpLmRyYXdZZWFyPWkuc2VsZWN0ZWRZZWFyPWIuZ2V0RnVsbFllYXIoKTtpZihwPT09Ik0ifHxwPT09IlkiKXt0aGlzLl9ub3RpZnlDaGFuZ2UoaSl9fSxfcmVzdHJpY3RNaW5NYXg6ZnVuY3Rpb24oaSxhKXt2YXIgbT10aGlzLl9nZXRNaW5NYXhEYXRlKGksIm1pbiIpLGI9dGhpcy5fZ2V0TWluTWF4RGF0ZShpLCJtYXgiKSxuPShtJiZhPG0/bTphKTtyZXR1cm4oYiYmbj5iP2I6bil9LF9ub3RpZnlDaGFuZ2U6ZnVuY3Rpb24oaSl7dmFyIG89dGhpcy5fZ2V0KGksIm9uQ2hhbmdlTW9udGhZZWFyIik7aWYobyl7by5hcHBseSgoaS5pbnB1dD9pLmlucHV0WzBdOm51bGwpLFtpLnNlbGVjdGVkWWVhcixpLnNlbGVjdGVkTW9udGgrMSxpXSl9fSxfZ2V0TnVtYmVyT2ZNb250aHM6ZnVuY3Rpb24oaSl7dmFyIG49dGhpcy5fZ2V0KGksIm51bWJlck9mTW9udGhzIik7cmV0dXJuKG49PW51bGw/WzEsMV06KHR5cGVvZiBuPT09Im51bWJlciI/WzEsbl06bikpfSxfZ2V0TWluTWF4RGF0ZTpmdW5jdGlvbihpLG0pe3JldHVybiB0aGlzLl9kZXRlcm1pbmVEYXRlKGksdGhpcy5fZ2V0KGksbSsiRGF0ZSIpLG51bGwpfSxfZ2V0RGF5c0luTW9udGg6ZnVuY3Rpb24oeSxtKXtyZXR1cm4gMzItdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoeSxtLDMyKSkuZ2V0RGF0ZSgpfSxfZ2V0Rmlyc3REYXlPZk1vbnRoOmZ1bmN0aW9uKHksbSl7cmV0dXJuIG5ldyBEYXRlKHksbSwxKS5nZXREYXkoKX0sX2NhbkFkanVzdE1vbnRoOmZ1bmN0aW9uKGksbyxhLGIpe3ZhciBuPXRoaXMuX2dldE51bWJlck9mTW9udGhzKGkpLGU9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoYSxiKyhvPDA/bzpuWzBdKm5bMV0pLDEpKTtpZihvPDApe2Uuc2V0RGF0ZSh0aGlzLl9nZXREYXlzSW5Nb250aChlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpKSl9cmV0dXJuIHRoaXMuX2lzSW5SYW5nZShpLGUpfSxfaXNJblJhbmdlOmZ1bmN0aW9uKGksYSl7dmFyIHksYixtPXRoaXMuX2dldE1pbk1heERhdGUoaSwibWluIiksZT10aGlzLl9nZXRNaW5NYXhEYXRlKGksIm1heCIpLGc9bnVsbCxoPW51bGwsaj10aGlzLl9nZXQoaSwieWVhclJhbmdlIik7aWYoail7eT1qLnNwbGl0KCI6Iik7Yj1uZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7Zz1wYXJzZUludCh5WzBdLDEwKTtoPXBhcnNlSW50KHlbMV0sMTApO2lmKHlbMF0ubWF0Y2goL1srXC1dLiovKSl7Zys9Yn1pZih5WzFdLm1hdGNoKC9bK1wtXS4qLykpe2grPWJ9fXJldHVybigoIW18fGEuZ2V0VGltZSgpPj1tLmdldFRpbWUoKSkmJighZXx8YS5nZXRUaW1lKCk8PWUuZ2V0VGltZSgpKSYmKCFnfHxhLmdldEZ1bGxZZWFyKCk+PWcpJiYoIWh8fGEuZ2V0RnVsbFllYXIoKTw9aCkpfSxfZ2V0Rm9ybWF0Q29uZmlnOmZ1bmN0aW9uKGkpe3ZhciBzPXRoaXMuX2dldChpLCJzaG9ydFllYXJDdXRvZmYiKTtzPSh0eXBlb2YgcyE9PSJzdHJpbmciP3M6bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpJTEwMCtwYXJzZUludChzLDEwKSk7cmV0dXJue3Nob3J0WWVhckN1dG9mZjpzLGRheU5hbWVzU2hvcnQ6dGhpcy5fZ2V0KGksImRheU5hbWVzU2hvcnQiKSxkYXlOYW1lczp0aGlzLl9nZXQoaSwiZGF5TmFtZXMiKSxtb250aE5hbWVzU2hvcnQ6dGhpcy5fZ2V0KGksIm1vbnRoTmFtZXNTaG9ydCIpLG1vbnRoTmFtZXM6dGhpcy5fZ2V0KGksIm1vbnRoTmFtZXMiKX19LF9mb3JtYXREYXRlOmZ1bmN0aW9uKGksYSxtLHkpe2lmKCFhKXtpLmN1cnJlbnREYXk9aS5zZWxlY3RlZERheTtpLmN1cnJlbnRNb250aD1pLnNlbGVjdGVkTW9udGg7aS5jdXJyZW50WWVhcj1pLnNlbGVjdGVkWWVhcn12YXIgYj0oYT8odHlwZW9mIGE9PT0ib2JqZWN0Ij9hOnRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHksbSxhKSkpOnRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGkuY3VycmVudFllYXIsaS5jdXJyZW50TW9udGgsaS5jdXJyZW50RGF5KSkpO3JldHVybiB0aGlzLmZvcm1hdERhdGUodGhpcy5fZ2V0KGksImRhdGVGb3JtYXQiKSxiLHRoaXMuX2dldEZvcm1hdENvbmZpZyhpKSl9fSk7ZnVuY3Rpb24gZChhKXt2YXIgcz0iYnV0dG9uLCAudWktZGF0ZXBpY2tlci1wcmV2LCAudWktZGF0ZXBpY2tlci1uZXh0LCAudWktZGF0ZXBpY2tlci1jYWxlbmRhciB0ZCBhIjtyZXR1cm4gYS5kZWxlZ2F0ZShzLCJtb3VzZW91dCIsZnVuY3Rpb24oKXskKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpO2lmKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItcHJldiIpIT09LTEpeyQodGhpcykucmVtb3ZlQ2xhc3MoInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlciIpfWlmKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItbmV4dCIpIT09LTEpeyQodGhpcykucmVtb3ZlQ2xhc3MoInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlciIpfX0pLmRlbGVnYXRlKHMsIm1vdXNlb3ZlciIsZnVuY3Rpb24oKXtpZighJC5kYXRlcGlja2VyLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihjLmlubGluZT9hLnBhcmVudCgpWzBdOmMuaW5wdXRbMF0pKXskKHRoaXMpLnBhcmVudHMoIi51aS1kYXRlcGlja2VyLWNhbGVuZGFyIikuZmluZCgiYSIpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpOyQodGhpcykuYWRkQ2xhc3MoInVpLXN0YXRlLWhvdmVyIik7aWYodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1wcmV2IikhPT0tMSl7JCh0aGlzKS5hZGRDbGFzcygidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyIil9aWYodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1uZXh0IikhPT0tMSl7JCh0aGlzKS5hZGRDbGFzcygidWktZGF0ZXBpY2tlci1uZXh0LWhvdmVyIil9fX0pfWZ1bmN0aW9uIGYodCxwKXskLmV4dGVuZCh0LHApO2Zvcih2YXIgbiBpbiBwKXtpZihwW25dPT1udWxsKXt0W25dPXBbbl19fXJldHVybiB0fSQuZm4uZGF0ZXBpY2tlcj1mdW5jdGlvbihvKXtpZighdGhpcy5sZW5ndGgpe3JldHVybiB0aGlzfWlmKCEkLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQpeyQoZG9jdW1lbnQpLm1vdXNlZG93bigkLmRhdGVwaWNrZXIuX2NoZWNrRXh0ZXJuYWxDbGljayk7JC5kYXRlcGlja2VyLmluaXRpYWxpemVkPXRydWV9aWYoJCgiIyIrJC5kYXRlcGlja2VyLl9tYWluRGl2SWQpLmxlbmd0aD09PTApeyQoImJvZHkiKS5hcHBlbmQoJC5kYXRlcGlja2VyLmRwRGl2KX12YXIgYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7aWYodHlwZW9mIG89PT0ic3RyaW5nIiYmKG89PT0iaXNEaXNhYmxlZCJ8fG89PT0iZ2V0RGF0ZSJ8fG89PT0id2lkZ2V0Iikpe3JldHVybiAkLmRhdGVwaWNrZXJbIl8iK28rIkRhdGVwaWNrZXIiXS5hcHBseSgkLmRhdGVwaWNrZXIsW3RoaXNbMF1dLmNvbmNhdChhKSl9aWYobz09PSJvcHRpb24iJiZhcmd1bWVudHMubGVuZ3RoPT09MiYmdHlwZW9mIGFyZ3VtZW50c1sxXT09PSJzdHJpbmciKXtyZXR1cm4gJC5kYXRlcGlja2VyWyJfIitvKyJEYXRlcGlja2VyIl0uYXBwbHkoJC5kYXRlcGlja2VyLFt0aGlzWzBdXS5jb25jYXQoYSkpfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0eXBlb2Ygbz09PSJzdHJpbmciPyQuZGF0ZXBpY2tlclsiXyIrbysiRGF0ZXBpY2tlciJdLmFwcGx5KCQuZGF0ZXBpY2tlcixbdGhpc10uY29uY2F0KGEpKTokLmRhdGVwaWNrZXIuX2F0dGFjaERhdGVwaWNrZXIodGhpcyxvKX0pfTskLmRhdGVwaWNrZXI9bmV3IEQoKTskLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQ9ZmFsc2U7JC5kYXRlcGlja2VyLnV1aWQ9bmV3IERhdGUoKS5nZXRUaW1lKCk7JC5kYXRlcGlja2VyLnZlcnNpb249IjEuMTAuNCJ9KShqUXVlcnkpOwovKiEKICogalF1ZXJ5IFVJIFBvc2l0aW9uIDEuMTAuNAogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3Bvc2l0aW9uLwogKi8KKGZ1bmN0aW9uKCQsdSl7JC51aT0kLnVpfHx7fTt2YXIgYyxtPU1hdGgubWF4LGE9TWF0aC5hYnMscj1NYXRoLnJvdW5kLGI9L2xlZnR8Y2VudGVyfHJpZ2h0LyxkPS90b3B8Y2VudGVyfGJvdHRvbS8sZT0vW1wrXC1dXGQrKFwuW1xkXSspPyU/LyxmPS9eXHcrLyxnPS8lJC8sXz0kLmZuLnBvc2l0aW9uO2Z1bmN0aW9uIGgobyx3LGkpe3JldHVybltwYXJzZUZsb2F0KG9bMF0pKihnLnRlc3Qob1swXSk/dy8xMDA6MSkscGFyc2VGbG9hdChvWzFdKSooZy50ZXN0KG9bMV0pP2kvMTAwOjEpXX1mdW5jdGlvbiBwKGksayl7cmV0dXJuIHBhcnNlSW50KCQuY3NzKGksayksMTApfHwwfWZ1bmN0aW9uIGooaSl7dmFyIGs9aVswXTtpZihrLm5vZGVUeXBlPT09OSl7cmV0dXJue3dpZHRoOmkud2lkdGgoKSxoZWlnaHQ6aS5oZWlnaHQoKSxvZmZzZXQ6e3RvcDowLGxlZnQ6MH19fWlmKCQuaXNXaW5kb3coaykpe3JldHVybnt3aWR0aDppLndpZHRoKCksaGVpZ2h0OmkuaGVpZ2h0KCksb2Zmc2V0Ont0b3A6aS5zY3JvbGxUb3AoKSxsZWZ0Omkuc2Nyb2xsTGVmdCgpfX19aWYoay5wcmV2ZW50RGVmYXVsdCl7cmV0dXJue3dpZHRoOjAsaGVpZ2h0OjAsb2Zmc2V0Ont0b3A6ay5wYWdlWSxsZWZ0OmsucGFnZVh9fX1yZXR1cm57d2lkdGg6aS5vdXRlcldpZHRoKCksaGVpZ2h0Omkub3V0ZXJIZWlnaHQoKSxvZmZzZXQ6aS5vZmZzZXQoKX19JC5wb3NpdGlvbj17c2Nyb2xsYmFyV2lkdGg6ZnVuY3Rpb24oKXtpZihjIT09dSl7cmV0dXJuIGN9dmFyIHcsaSxrPSQoIjxkaXYgc3R5bGU9J2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NTBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzpoaWRkZW47Jz48ZGl2IHN0eWxlPSdoZWlnaHQ6MTAwcHg7d2lkdGg6YXV0bzsnPjwvZGl2PjwvZGl2PiIpLGw9ay5jaGlsZHJlbigpWzBdOyQoImJvZHkiKS5hcHBlbmQoayk7dz1sLm9mZnNldFdpZHRoO2suY3NzKCJvdmVyZmxvdyIsInNjcm9sbCIpO2k9bC5vZmZzZXRXaWR0aDtpZih3PT09aSl7aT1rWzBdLmNsaWVudFdpZHRofWsucmVtb3ZlKCk7cmV0dXJuKGM9dy1pKX0sZ2V0U2Nyb2xsSW5mbzpmdW5jdGlvbih3KXt2YXIgbz13LmlzV2luZG93fHx3LmlzRG9jdW1lbnQ/IiI6dy5lbGVtZW50LmNzcygib3ZlcmZsb3cteCIpLGk9dy5pc1dpbmRvd3x8dy5pc0RvY3VtZW50PyIiOncuZWxlbWVudC5jc3MoIm92ZXJmbG93LXkiKSxrPW89PT0ic2Nyb2xsInx8KG89PT0iYXV0byImJncud2lkdGg8dy5lbGVtZW50WzBdLnNjcm9sbFdpZHRoKSxsPWk9PT0ic2Nyb2xsInx8KGk9PT0iYXV0byImJncuaGVpZ2h0PHcuZWxlbWVudFswXS5zY3JvbGxIZWlnaHQpO3JldHVybnt3aWR0aDpsPyQucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKTowLGhlaWdodDprPyQucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKTowfX0sZ2V0V2l0aGluSW5mbzpmdW5jdGlvbihpKXt2YXIgdz0kKGl8fHdpbmRvdyksaz0kLmlzV2luZG93KHdbMF0pLGw9ISF3WzBdJiZ3WzBdLm5vZGVUeXBlPT09OTtyZXR1cm57ZWxlbWVudDp3LGlzV2luZG93OmssaXNEb2N1bWVudDpsLG9mZnNldDp3Lm9mZnNldCgpfHx7bGVmdDowLHRvcDowfSxzY3JvbGxMZWZ0Oncuc2Nyb2xsTGVmdCgpLHNjcm9sbFRvcDp3LnNjcm9sbFRvcCgpLHdpZHRoOms/dy53aWR0aCgpOncub3V0ZXJXaWR0aCgpLGhlaWdodDprP3cuaGVpZ2h0KCk6dy5vdXRlckhlaWdodCgpfX19OyQuZm4ucG9zaXRpb249ZnVuY3Rpb24obyl7aWYoIW98fCFvLm9mKXtyZXR1cm4gXy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9bz0kLmV4dGVuZCh7fSxvKTt2YXIgayx0LGwsbixxLHMsdj0kKG8ub2YpLHc9JC5wb3NpdGlvbi5nZXRXaXRoaW5JbmZvKG8ud2l0aGluKSx4PSQucG9zaXRpb24uZ2V0U2Nyb2xsSW5mbyh3KSx5PShvLmNvbGxpc2lvbnx8ImZsaXAiKS5zcGxpdCgiICIpLHo9e307cz1qKHYpO2lmKHZbMF0ucHJldmVudERlZmF1bHQpe28uYXQ9ImxlZnQgdG9wIn10PXMud2lkdGg7bD1zLmhlaWdodDtuPXMub2Zmc2V0O3E9JC5leHRlbmQoe30sbik7JC5lYWNoKFsibXkiLCJhdCJdLGZ1bmN0aW9uKCl7dmFyIGk9KG9bdGhpc118fCIiKS5zcGxpdCgiICIpLEEsQjtpZihpLmxlbmd0aD09PTEpe2k9Yi50ZXN0KGlbMF0pP2kuY29uY2F0KFsiY2VudGVyIl0pOmQudGVzdChpWzBdKT9bImNlbnRlciJdLmNvbmNhdChpKTpbImNlbnRlciIsImNlbnRlciJdfWlbMF09Yi50ZXN0KGlbMF0pP2lbMF06ImNlbnRlciI7aVsxXT1kLnRlc3QoaVsxXSk/aVsxXToiY2VudGVyIjtBPWUuZXhlYyhpWzBdKTtCPWUuZXhlYyhpWzFdKTt6W3RoaXNdPVtBP0FbMF06MCxCP0JbMF06MF07b1t0aGlzXT1bZi5leGVjKGlbMF0pWzBdLGYuZXhlYyhpWzFdKVswXV19KTtpZih5Lmxlbmd0aD09PTEpe3lbMV09eVswXX1pZihvLmF0WzBdPT09InJpZ2h0Iil7cS5sZWZ0Kz10fWVsc2UgaWYoby5hdFswXT09PSJjZW50ZXIiKXtxLmxlZnQrPXQvMn1pZihvLmF0WzFdPT09ImJvdHRvbSIpe3EudG9wKz1sfWVsc2UgaWYoby5hdFsxXT09PSJjZW50ZXIiKXtxLnRvcCs9bC8yfWs9aCh6LmF0LHQsbCk7cS5sZWZ0Kz1rWzBdO3EudG9wKz1rWzFdO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgQSxCLEM9JCh0aGlzKSxEPUMub3V0ZXJXaWR0aCgpLEU9Qy5vdXRlckhlaWdodCgpLEY9cCh0aGlzLCJtYXJnaW5MZWZ0IiksRz1wKHRoaXMsIm1hcmdpblRvcCIpLEg9RCtGK3AodGhpcywibWFyZ2luUmlnaHQiKSt4LndpZHRoLEk9RStHK3AodGhpcywibWFyZ2luQm90dG9tIikreC5oZWlnaHQsSj0kLmV4dGVuZCh7fSxxKSxLPWgoei5teSxDLm91dGVyV2lkdGgoKSxDLm91dGVySGVpZ2h0KCkpO2lmKG8ubXlbMF09PT0icmlnaHQiKXtKLmxlZnQtPUR9ZWxzZSBpZihvLm15WzBdPT09ImNlbnRlciIpe0oubGVmdC09RC8yfWlmKG8ubXlbMV09PT0iYm90dG9tIil7Si50b3AtPUV9ZWxzZSBpZihvLm15WzFdPT09ImNlbnRlciIpe0oudG9wLT1FLzJ9Si5sZWZ0Kz1LWzBdO0oudG9wKz1LWzFdO2lmKCEkLnN1cHBvcnQub2Zmc2V0RnJhY3Rpb25zKXtKLmxlZnQ9cihKLmxlZnQpO0oudG9wPXIoSi50b3ApfUE9e21hcmdpbkxlZnQ6RixtYXJnaW5Ub3A6R307JC5lYWNoKFsibGVmdCIsInRvcCJdLGZ1bmN0aW9uKGksTCl7aWYoJC51aS5wb3NpdGlvblt5W2ldXSl7JC51aS5wb3NpdGlvblt5W2ldXVtMXShKLHt0YXJnZXRXaWR0aDp0LHRhcmdldEhlaWdodDpsLGVsZW1XaWR0aDpELGVsZW1IZWlnaHQ6RSxjb2xsaXNpb25Qb3NpdGlvbjpBLGNvbGxpc2lvbldpZHRoOkgsY29sbGlzaW9uSGVpZ2h0Okksb2Zmc2V0OltrWzBdK0tbMF0sa1sxXStLWzFdXSxteTpvLm15LGF0Om8uYXQsd2l0aGluOncsZWxlbTpDfSl9fSk7aWYoby51c2luZyl7Qj1mdW5jdGlvbihpKXt2YXIgTD1uLmxlZnQtSi5sZWZ0LE09TCt0LUQsTj1uLnRvcC1KLnRvcCxPPU4rbC1FLFA9e3RhcmdldDp7ZWxlbWVudDp2LGxlZnQ6bi5sZWZ0LHRvcDpuLnRvcCx3aWR0aDp0LGhlaWdodDpsfSxlbGVtZW50OntlbGVtZW50OkMsbGVmdDpKLmxlZnQsdG9wOkoudG9wLHdpZHRoOkQsaGVpZ2h0OkV9LGhvcml6b250YWw6TTwwPyJsZWZ0IjpMPjA/InJpZ2h0IjoiY2VudGVyIix2ZXJ0aWNhbDpPPDA/InRvcCI6Tj4wPyJib3R0b20iOiJtaWRkbGUifTtpZih0PEQmJmEoTCtNKTx0KXtQLmhvcml6b250YWw9ImNlbnRlciJ9aWYobDxFJiZhKE4rTyk8bCl7UC52ZXJ0aWNhbD0ibWlkZGxlIn1pZihtKGEoTCksYShNKSk+bShhKE4pLGEoTykpKXtQLmltcG9ydGFudD0iaG9yaXpvbnRhbCJ9ZWxzZXtQLmltcG9ydGFudD0idmVydGljYWwifW8udXNpbmcuY2FsbCh0aGlzLGksUCl9fUMub2Zmc2V0KCQuZXh0ZW5kKEose3VzaW5nOkJ9KSl9KX07JC51aS5wb3NpdGlvbj17Zml0OntsZWZ0OmZ1bmN0aW9uKGksayl7dmFyIHc9ay53aXRoaW4sbD13LmlzV2luZG93P3cuc2Nyb2xsTGVmdDp3Lm9mZnNldC5sZWZ0LG89dy53aWR0aCxuPWkubGVmdC1rLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQscT1sLW4scz1uK2suY29sbGlzaW9uV2lkdGgtby1sLHQ7aWYoay5jb2xsaXNpb25XaWR0aD5vKXtpZihxPjAmJnM8PTApe3Q9aS5sZWZ0K3Eray5jb2xsaXNpb25XaWR0aC1vLWw7aS5sZWZ0Kz1xLXR9ZWxzZSBpZihzPjAmJnE8PTApe2kubGVmdD1sfWVsc2V7aWYocT5zKXtpLmxlZnQ9bCtvLWsuY29sbGlzaW9uV2lkdGh9ZWxzZXtpLmxlZnQ9bH19fWVsc2UgaWYocT4wKXtpLmxlZnQrPXF9ZWxzZSBpZihzPjApe2kubGVmdC09c31lbHNle2kubGVmdD1tKGkubGVmdC1uLGkubGVmdCl9fSx0b3A6ZnVuY3Rpb24oaSxrKXt2YXIgdz1rLndpdGhpbixsPXcuaXNXaW5kb3c/dy5zY3JvbGxUb3A6dy5vZmZzZXQudG9wLG89ay53aXRoaW4uaGVpZ2h0LG49aS50b3Atay5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AscT1sLW4scz1uK2suY29sbGlzaW9uSGVpZ2h0LW8tbCx0O2lmKGsuY29sbGlzaW9uSGVpZ2h0Pm8pe2lmKHE+MCYmczw9MCl7dD1pLnRvcCtxK2suY29sbGlzaW9uSGVpZ2h0LW8tbDtpLnRvcCs9cS10fWVsc2UgaWYocz4wJiZxPD0wKXtpLnRvcD1sfWVsc2V7aWYocT5zKXtpLnRvcD1sK28tay5jb2xsaXNpb25IZWlnaHR9ZWxzZXtpLnRvcD1sfX19ZWxzZSBpZihxPjApe2kudG9wKz1xfWVsc2UgaWYocz4wKXtpLnRvcC09c31lbHNle2kudG9wPW0oaS50b3AtbixpLnRvcCl9fX0sZmxpcDp7bGVmdDpmdW5jdGlvbihpLGspe3ZhciB3PWsud2l0aGluLGw9dy5vZmZzZXQubGVmdCt3LnNjcm9sbExlZnQsbz13LndpZHRoLG49dy5pc1dpbmRvdz93LnNjcm9sbExlZnQ6dy5vZmZzZXQubGVmdCxxPWkubGVmdC1rLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQscz1xLW4sdD1xK2suY29sbGlzaW9uV2lkdGgtby1uLHY9ay5teVswXT09PSJsZWZ0Ij8tay5lbGVtV2lkdGg6ay5teVswXT09PSJyaWdodCI/ay5lbGVtV2lkdGg6MCx4PWsuYXRbMF09PT0ibGVmdCI/ay50YXJnZXRXaWR0aDprLmF0WzBdPT09InJpZ2h0Ij8tay50YXJnZXRXaWR0aDowLHk9LTIqay5vZmZzZXRbMF0seixBO2lmKHM8MCl7ej1pLmxlZnQrdit4K3kray5jb2xsaXNpb25XaWR0aC1vLWw7aWYoejwwfHx6PGEocykpe2kubGVmdCs9dit4K3l9fWVsc2UgaWYodD4wKXtBPWkubGVmdC1rLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQrdit4K3ktbjtpZihBPjB8fGEoQSk8dCl7aS5sZWZ0Kz12K3greX19fSx0b3A6ZnVuY3Rpb24oaSxrKXt2YXIgdz1rLndpdGhpbixsPXcub2Zmc2V0LnRvcCt3LnNjcm9sbFRvcCxvPXcuaGVpZ2h0LG49dy5pc1dpbmRvdz93LnNjcm9sbFRvcDp3Lm9mZnNldC50b3AscT1pLnRvcC1rLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCxzPXEtbix0PXEray5jb2xsaXNpb25IZWlnaHQtby1uLHY9ay5teVsxXT09PSJ0b3AiLHg9dj8tay5lbGVtSGVpZ2h0OmsubXlbMV09PT0iYm90dG9tIj9rLmVsZW1IZWlnaHQ6MCx5PWsuYXRbMV09PT0idG9wIj9rLnRhcmdldEhlaWdodDprLmF0WzFdPT09ImJvdHRvbSI/LWsudGFyZ2V0SGVpZ2h0OjAsej0tMiprLm9mZnNldFsxXSxBLEI7aWYoczwwKXtCPWkudG9wK3greSt6K2suY29sbGlzaW9uSGVpZ2h0LW8tbDtpZigoaS50b3AreCt5K3opPnMmJihCPDB8fEI8YShzKSkpe2kudG9wKz14K3kren19ZWxzZSBpZih0PjApe0E9aS50b3Atay5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AreCt5K3otbjtpZigoaS50b3AreCt5K3opPnQmJihBPjB8fGEoQSk8dCkpe2kudG9wKz14K3kren19fX0sZmxpcGZpdDp7bGVmdDpmdW5jdGlvbigpeyQudWkucG9zaXRpb24uZmxpcC5sZWZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTskLnVpLnBvc2l0aW9uLmZpdC5sZWZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdG9wOmZ1bmN0aW9uKCl7JC51aS5wb3NpdGlvbi5mbGlwLnRvcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7JC51aS5wb3NpdGlvbi5maXQudG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fTsoZnVuY3Rpb24oKXt2YXIgdCxrLGwsbyxpLG49ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSxxPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuPyJkaXYiOiJib2R5Iik7bD17dmlzaWJpbGl0eToiaGlkZGVuIix3aWR0aDowLGhlaWdodDowLGJvcmRlcjowLG1hcmdpbjowLGJhY2tncm91bmQ6Im5vbmUifTtpZihuKXskLmV4dGVuZChsLHtwb3NpdGlvbjoiYWJzb2x1dGUiLGxlZnQ6Ii0xMDAwcHgiLHRvcDoiLTEwMDBweCJ9KX1mb3IoaSBpbiBsKXt0LnN0eWxlW2ldPWxbaV19dC5hcHBlbmRDaGlsZChxKTtrPW58fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtrLmluc2VydEJlZm9yZSh0LGsuZmlyc3RDaGlsZCk7cS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwLjc0MzIyMjJweDsiO289JChxKS5vZmZzZXQoKS5sZWZ0OyQuc3VwcG9ydC5vZmZzZXRGcmFjdGlvbnM9bz4xMCYmbzwxMTt0LmlubmVySFRNTD0iIjtrLnJlbW92ZUNoaWxkKHQpfSkoKX0oalF1ZXJ5KSk7Ci8qIQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCihmdW5jdGlvbigpe2lmKCF3aW5kb3cualF1ZXJ5KXt0aHJvdyBuZXcgRXJyb3IoIlNBUFVJNSByZXF1aXJlcyBqUXVlcnkgYXMgYSBwcmVyZXF1aXNpdGUgKD49IHZlcnNpb24gMS43KSIpfWlmKGpRdWVyeS5zYXApe3JldHVybn12YXIgXz13aW5kb3c7dmFyIGE9W107ZnVuY3Rpb24gYihsLG0pe2EucHVzaCh7bGV2ZWw6bCxtZXNzYWdlOm19KX12YXIgYz11bmRlZmluZWQ7dmFyIHI9L15bMC05XSsoPzpcLihbMC05XSspKD86XC4oWzAtOV0rKSk/KT8oLiopJC87ZnVuY3Rpb24gVihNLGksbCxzKXtpZihNIGluc3RhbmNlb2YgVil7cmV0dXJuIE19aWYoISh0aGlzIGluc3RhbmNlb2YgVikpe3JldHVybiBuZXcgVihNLGksbCxzKX12YXIgbT0odHlwZW9mIE09PT0ic3RyaW5nIj9yLmV4ZWMoTSk6KGpRdWVyeS5pc0FycmF5KE0pP006YXJndW1lbnRzKSl8fFtdO2Z1bmN0aW9uIG4odil7dj1wYXJzZUludCh2LDEwKTtyZXR1cm4gaXNOYU4odik/MDp2fU09bihtWzBdKTtpPW4obVsxXSk7bD1uKG1bMl0pO3M9U3RyaW5nKG1bM118fCIiKTt0aGlzLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIE0rIi4iK2krIi4iK2wrc307dGhpcy5nZXRNYWpvcj1mdW5jdGlvbigpe3JldHVybiBNfTt0aGlzLmdldE1pbm9yPWZ1bmN0aW9uKCl7cmV0dXJuIGl9O3RoaXMuZ2V0UGF0Y2g9ZnVuY3Rpb24oKXtyZXR1cm4gbH07dGhpcy5nZXRTdWZmaXg9ZnVuY3Rpb24oKXtyZXR1cm4gc307dGhpcy5jb21wYXJlVG89ZnVuY3Rpb24oKXt2YXIgbz1WLmFwcGx5KHdpbmRvdyxhcmd1bWVudHMpO3JldHVybiBNLW8uZ2V0TWFqb3IoKXx8aS1vLmdldE1pbm9yKCl8fGwtby5nZXRQYXRjaCgpfHwoKHM8by5nZXRTdWZmaXgoKSk/LTE6KHM9PT1vLmdldFN1ZmZpeCgpKT8wOjEpfX1WLnByb3RvdHlwZS5pblJhbmdlPWZ1bmN0aW9uKG0sTSl7cmV0dXJuIHRoaXMuY29tcGFyZVRvKG0pPj0wJiZ0aGlzLmNvbXBhcmVUbyhNKTwwfTt2YXIgaj1WKGpRdWVyeS5mbi5qcXVlcnkpO2lmKCFqLmluUmFuZ2UoIjEuNy4wIiwiMi4wLjAiKSl7YigiZXJyb3IiLCJTQVBVSTUgcmVxdWlyZXMgYSBqUXVlcnkgdmVyc2lvbiBvZiAxLjcgb3IgaGlnaGVyLCBidXQgbG93ZXIgdGhhbiAyLjA7IGN1cnJlbnQgdmVyc2lvbiBpcyAiK2pRdWVyeS5mbi5qcXVlcnkpfWlmKCFqUXVlcnkuYnJvd3Nlcil7alF1ZXJ5LmJyb3dzZXI9KGZ1bmN0aW9uKHUpe3ZhciBpPS8od2Via2l0KVsgXC9dKFtcdy5dKykvLGw9LyhvcGVyYSkoPzouKnZlcnNpb24pP1sgXC9dKFtcdy5dKykvLG09Lyhtc2llKSAoW1x3Ll0rKS8sbj0vKG1vemlsbGEpKD86Lio/IHJ2OihbXHcuXSspKT8vLHU9dS50b0xvd2VyQ2FzZSgpLG89aS5leGVjKHUpfHxsLmV4ZWModSl8fG0uZXhlYyh1KXx8dS5pbmRleE9mKCJjb21wYXRpYmxlIik8MCYmbi5leGVjKHUpfHxbXSxxPXt9O2lmKG9bMV0pe3Fbb1sxXV09dHJ1ZTtxLnZlcnNpb249b1syXXx8IjAiO2lmKHEud2Via2l0KXtxLnNhZmFyaT10cnVlfX1yZXR1cm4gcX0od2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpKX1pZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7alF1ZXJ5LnN1cHBvcnQuY29ycz10cnVlfXZhciBkPShmdW5jdGlvbigpe3ZhciB0LHUsUixpPS9eKC4qXC8pP2Rvd25sb2FkXC9jb25maWd1cmF0b3JbXC9cP10vLGw9L14oLipcLyk/KHNhcC11aS0oY29yZXxjdXN0b218Ym9vdHxtZXJnZWQpKC0uKik/KVwuanMoWz8jXXwkKS8sbj0vXiguKlwvKT9yZXNvdXJjZXNcLy87alF1ZXJ5KCJzY3JpcHRbc3JjXSIpLmVhY2goZnVuY3Rpb24oKXt2YXIgcz10aGlzLmdldEF0dHJpYnV0ZSgic3JjIiksbTtpZihtPXMubWF0Y2goaSkpe3Q9dGhpczt1PXM7Uj0obVsxXXx8IiIpKyJyZXNvdXJjZXMvIjtyZXR1cm4gZmFsc2V9ZWxzZSBpZihtPXMubWF0Y2gobCkpe3Q9dGhpczt1PXM7Uj1tWzFdfHwiIjtyZXR1cm4gZmFsc2V9ZWxzZSBpZih0aGlzLmlkPT0nc2FwLXVpLWJvb3RzdHJhcCcmJihtPXMubWF0Y2gobikpKXt0PXRoaXM7dT1zO1I9bVswXTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJue3RhZzp0LHVybDp1LHJlc291cmNlUm9vdDpSfX0pKCk7KGZ1bmN0aW9uKCl7aWYoL3NhcC1ib290c3RyYXAtZGVidWc9KHRydWV8eHxYKS8udGVzdChsb2NhdGlvbi5zZWFyY2gpKXt3aW5kb3dbInNhcC11aS1iUmVzdGFydCJdPWZhbHNlO3dpbmRvd1sic2FwLXVpLXNSZXN0YXJ0VXJsIl09Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9zYXB1aTUvcmVzb3VyY2VzL3NhcC11aS1jb3JlLmpzIjt2YXIgbD1mdW5jdGlvbigpe3ZhciBzPWQudGFnLG09IjxzY3JpcHQgc3JjPVwiIit3aW5kb3dbInNhcC11aS1zUmVzdGFydFVybCJdKyJcIiI7alF1ZXJ5LmVhY2gocy5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGksQSl7aWYoQS5ub2RlTmFtZS5pbmRleE9mKCJkYXRhLXNhcC11aS0iKT09MCl7bSs9IiAiK0Eubm9kZU5hbWUrIj1cIiIrQS5ub2RlVmFsdWUrIlwiIn19KTttKz0iPjwvc2NyaXB0PiI7cy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHMpO2pRdWVyeSgiI3NhcC11aS1ib290c3RyYXAtY2FjaGVidXN0ZWQiKS5yZW1vdmUoKTt3aW5kb3dbInNhcC11aS1jb25maWciXSYmd2luZG93WyJzYXAtdWktY29uZmlnIl0ucmVzb3VyY2VSb290cyYmKHdpbmRvd1sic2FwLXVpLWNvbmZpZyJdLnJlc291cmNlUm9vdHNbIiJdPXVuZGVmaW5lZCk7ZG9jdW1lbnQud3JpdGUobSk7dmFyIFI9bmV3IEVycm9yKCJBYm9ydGluZyBVSTUgYm9vdHN0cmFwIGFuZCByZXN0YXJ0aW5nIGZyb206ICIrd2luZG93WyJzYXAtdWktc1Jlc3RhcnRVcmwiXSk7Ui5uYW1lPSJSZXN0YXJ0IjtkZWxldGUgd2luZG93WyJzYXAtdWktYlJlc3RhcnQiXTtkZWxldGUgd2luZG93WyJzYXAtdWktc1Jlc3RhcnRVcmwiXTt0aHJvdyBSfTtkZWJ1Z2dlcjtpZih3aW5kb3dbInNhcC11aS1iUmVzdGFydCJdKXtsKCl9fX0pKCk7KGZ1bmN0aW9uKCl7dmFyIEQ9L3NhcC11aS1kZWJ1Zz0odHJ1ZXx4fFgpLy50ZXN0KGxvY2F0aW9uLnNlYXJjaCksaT13aW5kb3dbInNhcC11aS1vcHRpbWl6ZWQiXTt0cnl7RD1EfHwod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzYXAtdWktZGVidWciKT09IlgiKX1jYXRjaChlKXt9d2luZG93WyJzYXAtdWktZGVidWciXT1EO2lmKC8tZGJnXC5qcyhbPyNdfCQpLy50ZXN0KGQudXJsKSl7d2luZG93WyJzYXAtdWktbG9hZGRiZyJdPXRydWU7d2luZG93WyJzYXAtdWktZGVidWciXT10cnVlfWlmKGkmJkQpe3ZhciBzPWQudXJsLnJlcGxhY2UoL1wvKD86c2FwLXVpLWNhY2hlYnVzdGVyXC8pPyhbXlwvXSspXC5qcy8sIi8kMS1kYmcuanMiKTt3aW5kb3dbInNhcC11aS1vcHRpbWl6ZWQiXT1mYWxzZTt3aW5kb3dbInNhcC11aS1sb2FkZGJnIl09dHJ1ZTtkb2N1bWVudC53cml0ZSgiPHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCIgc3JjPVwiIitzKyJcIj48L3NjcmlwdD4iKTt2YXIgUj1uZXcgRXJyb3IoIkFib3J0aW5nIFVJNSBib290c3RyYXAgYW5kIHJlc3RhcnRpbmcgZnJvbTogIitzKTtSLm5hbWU9IlJlc3RhcnQiO3Rocm93IFJ9fSkoKTt2YXIgQz1fWyJzYXAtdWktY29uZmlnIl09KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihvKXtqUXVlcnkuZWFjaChvLGZ1bmN0aW9uKGksdil7dmFyIG09aS50b0xvd2VyQ2FzZSgpO2lmKCFvLmhhc093blByb3BlcnR5KG0pKXtvW21dPXY7ZGVsZXRlIG9baV19fSk7cmV0dXJuIG99dmFyIHM9ZC50YWcsbD1fWyJzYXAtdWktY29uZmlnIl0scT0ic2FwLXVpLWNvbmZpZy5qc29uIjtpZih0eXBlb2YgbD09PSJzdHJpbmciKXtiKCJ3YXJuaW5nIiwiTG9hZGluZyBleHRlcm5hbCBib290c3RyYXAgY29uZmlndXJhdGlvbiBmcm9tIFwiIitsKyJcIi4gVGhpcyBpcyBhIGRlc2lnbiB0aW1lIGZlYXR1cmUgYW5kIG5vdCBmb3IgcHJvZHVjdGl2ZSB1c2FnZSEiKTtpZihsIT09cSl7Yigid2FybmluZyIsIlRoZSBleHRlcm5hbCBib290c3RyYXAgY29uZmlndXJhdGlvbiBmaWxlIHNob3VsZCBiZSBuYW1lZCBcIiIrcSsiXCIhIil9alF1ZXJ5LmFqYXgoe3VybDpsLGRhdGFUeXBlOidqc29uJyxhc3luYzpmYWxzZSxzdWNjZXNzOmZ1bmN0aW9uKEQsVCxpKXtsPUR9LGVycm9yOmZ1bmN0aW9uKGksVCxvKXtiKCJlcnJvciIsIkxvYWRpbmcgZXh0ZXJuYWxpemVkIGJvb3RzdHJhcCBjb25maWd1cmF0aW9uIGZyb20gXCIiK2wrIlwiIGZhaWxlZCEgUmVhc29uOiAiK28rIiEiKTtsPXVuZGVmaW5lZH19KX1sPW4obHx8e30pO2wucmVzb3VyY2Vyb290cz1sLnJlc291cmNlcm9vdHN8fHt9O2wudGhlbWVyb290cz1sLnRoZW1lcm9vdHN8fHt9O2wucmVzb3VyY2Vyb290c1snJ109bC5yZXNvdXJjZXJvb3RzWycnXXx8ZC5yZXNvdXJjZVJvb3Q7bFsneHgtbG9hZGFsbG1vZGUnXT0vKF58XC8pKHNhcC0/dWk1fFteXC9dKy1hbGwpLmpzKFs/I118JCkvLnRlc3QoZC51cmwpO2lmKHMpe3ZhciB0PXMuZ2V0QXR0cmlidXRlKCJkYXRhLXNhcC11aS1jb25maWciKTtpZih0KXt0cnl7alF1ZXJ5LmV4dGVuZChsLG4oKG5ldyBGdW5jdGlvbigicmV0dXJuIHsiK3QrIn07IikpKCkpKX1jYXRjaChlKXtiKCJlcnJvciIsImZhaWxlZCB0byBwYXJzZSBkYXRhLXNhcC11aS1jb25maWcgYXR0cmlidXRlOiAiKyhlLm1lc3NhZ2V8fGUpKX19alF1ZXJ5LmVhY2gocy5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGksbyl7dmFyIG09by5uYW1lLm1hdGNoKC9eZGF0YS1zYXAtdWktKC4qKSQvKTtpZihtKXttPW1bMV0udG9Mb3dlckNhc2UoKTtpZihtPT09J3Jlc291cmNlcm9vdHMnKXtqUXVlcnkuZXh0ZW5kKGxbbV0salF1ZXJ5LnBhcnNlSlNPTihvLnZhbHVlKSl9ZWxzZSBpZihtPT09J3RoZW1lLXJvb3RzJyl7alF1ZXJ5LmV4dGVuZChsLnRoZW1lcm9vdHMsalF1ZXJ5LnBhcnNlSlNPTihvLnZhbHVlKSl9ZWxzZSBpZihtIT09J2NvbmZpZycpe2xbbV09by52YWx1ZX19fSl9cmV0dXJuIGx9KCkpO2lmKEMubm9jb25mbGljdD09PXRydWV8fEMubm9jb25mbGljdD09PSJ0cnVlInx8Qy5ub2NvbmZsaWN0PT09IngiKXtqUXVlcnkubm9Db25mbGljdCgpfWpRdWVyeS5zYXA9e307alF1ZXJ5LnNhcC5WZXJzaW9uPVY7alF1ZXJ5LnNhcC5kZWJ1Zz1mdW5jdGlvbihpKXtpZighd2luZG93LmxvY2FsU3RvcmFnZSl7cmV0dXJuIG51bGx9ZnVuY3Rpb24gbCh1KXthbGVydCgiVXNhZ2Ugb2YgZGVidWcgc291cmNlcyBpcyAiKyh1PyJvbiI6Im9mZiIpKyIgbm93LlxuRm9yIHRoZSBjaGFuZ2UgdG8gdGFrZSBlZmZlY3QsIHlvdSBuZWVkIHRvIHJlbG9hZCB0aGUgcGFnZS4iKX07aWYoaT09PXRydWUpe3dpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgic2FwLXVpLWRlYnVnIiwiWCIpO2wodHJ1ZSl9ZWxzZSBpZihpPT09ZmFsc2Upe3dpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgic2FwLXVpLWRlYnVnIik7bChmYWxzZSl9cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2FwLXVpLWRlYnVnIik9PSJYIn07alF1ZXJ5LnNhcC5zdGF0aXN0aWNzPWZ1bmN0aW9uKGkpe2lmKCF3aW5kb3cubG9jYWxTdG9yYWdlKXtyZXR1cm4gbnVsbH1mdW5jdGlvbiBsKHUpe2FsZXJ0KCJVc2FnZSBvZiBHYXRld2F5IHN0YXRpc3RpY3MgIisodT8ib24iOiJvZmYiKSsiIG5vdy5cbkZvciB0aGUgY2hhbmdlIHRvIHRha2UgZWZmZWN0LCB5b3UgbmVlZCB0byByZWxvYWQgdGhlIHBhZ2UuIil9O2lmKGk9PT10cnVlKXt3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oInNhcC11aS1zdGF0aXN0aWNzIiwiWCIpO2wodHJ1ZSl9ZWxzZSBpZihpPT09ZmFsc2Upe3dpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgic2FwLXVpLXN0YXRpc3RpY3MiKTtsKGZhbHNlKX1yZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzYXAtdWktc3RhdGlzdGljcyIpPT0iWCJ9OyhmdW5jdGlvbigpe3ZhciBGPTAsbD0xLFc9MixJPTMsRD00LFQ9NSxzPSh3aW5kb3cudG9wPT13aW5kb3cpPyIiOiJbIit3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKS5zbGljZSgtMSlbMF0rIl0gIixMPVtdLE09eycnOmx9LG89bnVsbDtmdW5jdGlvbiBuKGksdyl7cmV0dXJuKCIwMDAiK1N0cmluZyhpKSkuc2xpY2UoLXcpfWZ1bmN0aW9uIHEoaSl7cmV0dXJuKCFpfHxpc05hTihNW2ldKSk/TVsnJ106TVtpXX1mdW5jdGlvbiB0KCl7aWYoIW8pe289e2xpc3RlbmVyczpbXSxvbkxvZ0VudHJ5OmZ1bmN0aW9uKG0pe2Zvcih2YXIgaT0wO2k8by5saXN0ZW5lcnMubGVuZ3RoO2krKyl7aWYoby5saXN0ZW5lcnNbaV0ub25Mb2dFbnRyeSl7by5saXN0ZW5lcnNbaV0ub25Mb2dFbnRyeShtKX19fSxhdHRhY2g6ZnVuY3Rpb24oaSxtKXtpZihtKXtvLmxpc3RlbmVycy5wdXNoKG0pO2lmKG0ub25BdHRhY2hUb0xvZyl7bS5vbkF0dGFjaFRvTG9nKGkpfX19LGRldGFjaDpmdW5jdGlvbihtLHYpe2Zvcih2YXIgaT0wO2k8by5saXN0ZW5lcnMubGVuZ3RoO2krKyl7aWYoby5saXN0ZW5lcnNbaV09PT12KXtpZih2Lm9uRGV0YWNoRnJvbUxvZyl7di5vbkRldGFjaEZyb21Mb2cobSl9by5saXN0ZW5lcnMuc3BsaWNlKGksMSk7cmV0dXJufX19fX1yZXR1cm4gb31mdW5jdGlvbiB1KGksbSx2LHcpe2lmKGk8PXEodykpe3ZhciBOPW5ldyBEYXRlKCkseT17dGltZTpuKE4uZ2V0SG91cnMoKSwyKSsiOiIrbihOLmdldE1pbnV0ZXMoKSwyKSsiOiIrbihOLmdldFNlY29uZHMoKSwyKSxkYXRlOm4oTi5nZXRGdWxsWWVhcigpLDQpKyItIituKE4uZ2V0TW9udGgoKSsxLDIpKyItIituKE4uZ2V0RGF0ZSgpLDIpLHRpbWVzdGFtcDpOLmdldFRpbWUoKSxsZXZlbDppLG1lc3NhZ2U6U3RyaW5nKG18fCIiKSxkZXRhaWxzOlN0cmluZyh2fHwiIiksY29tcG9uZW50OlN0cmluZyh3fHwiIil9O0wucHVzaCh5KTtpZihvKXtvLm9uTG9nRW50cnkoeSl9aWYod2luZG93LmNvbnNvbGUpe3ZhciB6PXkuZGF0ZSsiICIreS50aW1lKyIgIitzK3kubWVzc2FnZSsiIC0gIit5LmRldGFpbHMrIiAiK3kuY29tcG9uZW50O3N3aXRjaChpKXtjYXNlIEY6Y2FzZSBsOmNvbnNvbGUuZXJyb3Ioeik7YnJlYWs7Y2FzZSBXOmNvbnNvbGUud2Fybih6KTticmVhaztjYXNlIEk6Y29uc29sZS5pbmZvP2NvbnNvbGUuaW5mbyh6KTpjb25zb2xlLmxvZyh6KTticmVhaztjYXNlIEQ6Y29uc29sZS5kZWJ1Zz9jb25zb2xlLmRlYnVnKHopOmNvbnNvbGUubG9nKHopO2JyZWFrO2Nhc2UgVDpjb25zb2xlLnRyYWNlP2NvbnNvbGUudHJhY2Uoeik6Y29uc29sZS5sb2coeik7YnJlYWt9fXJldHVybiB5fX1mdW5jdGlvbiB4KGkpe3RoaXMuZmF0YWw9ZnVuY3Rpb24obSx2LHcpe3UoRixtLHYsd3x8aSk7cmV0dXJuIHRoaXN9O3RoaXMuZXJyb3I9ZnVuY3Rpb24gZXJyb3IobSx2LHcpe3UobCxtLHYsd3x8aSk7cmV0dXJuIHRoaXN9O3RoaXMud2FybmluZz1mdW5jdGlvbiB3YXJuaW5nKG0sdix3KXt1KFcsbSx2LHd8fGkpO3JldHVybiB0aGlzfTt0aGlzLmluZm89ZnVuY3Rpb24gaW5mbyhtLHYsdyl7dShJLG0sdix3fHxpKTtyZXR1cm4gdGhpc307dGhpcy5kZWJ1Zz1mdW5jdGlvbiBkZWJ1ZyhtLHYsdyl7dShELG0sdix3fHxpKTtyZXR1cm4gdGhpc307dGhpcy50cmFjZT1mdW5jdGlvbiB0cmFjZShtLHYsdyl7dShULG0sdix3fHxpKTtyZXR1cm4gdGhpc307dGhpcy5zZXRMZXZlbD1mdW5jdGlvbiBzZXRMZXZlbChtLHcpe3c9d3x8aXx8Jyc7TVt3XT1tO3ZhciBCPVtdO2pRdWVyeS5lYWNoKGpRdWVyeS5zYXAubG9nLkxvZ0xldmVsLGZ1bmN0aW9uKHksdil7Qlt2XT15fSk7dShJLCJDaGFuZ2luZyBsb2cgbGV2ZWwgIisodz8iZm9yICciK3crIicgIjoiIikrInRvICIrQlttXSwiIiwialF1ZXJ5LnNhcC5sb2ciKTtyZXR1cm4gdGhpc307dGhpcy5nZXRMZXZlbD1mdW5jdGlvbiBnZXRMZXZlbChtKXtyZXR1cm4gcShtfHxpKX07dGhpcy5pc0xvZ2dhYmxlPWZ1bmN0aW9uKG0sdil7cmV0dXJuKG09PW51bGw/RDptKTw9cSh2fHxpKX19alF1ZXJ5LnNhcC5sb2c9alF1ZXJ5LmV4dGVuZChuZXcgeCgpLHtMZXZlbDp7Tk9ORTpGLTEsRkFUQUw6RixFUlJPUjpsLFdBUk5JTkc6VyxJTkZPOkksREVCVUc6RCxUUkFDRTpULEFMTDooVCsxKX0sZ2V0TG9nZ2VyOmZ1bmN0aW9uKGksbSl7aWYoIWlzTmFOKG0pJiZNW2ldPT1udWxsKXtNW2ldPW19cmV0dXJuIG5ldyB4KGkpfSxnZXRMb2dFbnRyaWVzOmZ1bmN0aW9uKCl7cmV0dXJuIEwuc2xpY2UoKX0sYWRkTG9nTGlzdGVuZXI6ZnVuY3Rpb24obyl7dCgpLmF0dGFjaCh0aGlzLG8pO3JldHVybiB0aGlzfSxyZW1vdmVMb2dMaXN0ZW5lcjpmdW5jdGlvbihvKXt0KCkuZGV0YWNoKHRoaXMsbyk7cmV0dXJuIHRoaXN9fSk7alF1ZXJ5LnNhcC5sb2cuTG9nTGV2ZWw9alF1ZXJ5LnNhcC5sb2cuTGV2ZWw7alF1ZXJ5LnNhcC5sb2cuZ2V0TG9nPWpRdWVyeS5zYXAubG9nLmdldExvZ0VudHJpZXM7alF1ZXJ5LnNhcC5hc3NlcnQ9ZnVuY3Rpb24oUixtKXtpZighUil7aWYod2luZG93LmNvbnNvbGUmJmNvbnNvbGUuYXNzZXJ0KXtjb25zb2xlLmFzc2VydChSLHMrbSl9ZWxzZXtqUXVlcnkuc2FwLmxvZy5kZWJ1ZygiW0Fzc2VydGlvbnNdICIrbSl9fX07Qy5sb2dsZXZlbD0oZnVuY3Rpb24oKXt2YXIgbT0vKD86XD98JilzYXAtdWktbG9nKD86THwtbClldmVsPShbXiZdKikvLmV4ZWMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7cmV0dXJuIG0mJm1bMV19KCkpfHxDLmxvZ2xldmVsO2lmKEMubG9nbGV2ZWwpe2pRdWVyeS5zYXAubG9nLnNldExldmVsKGpRdWVyeS5zYXAubG9nLkxldmVsW0MubG9nbGV2ZWwudG9VcHBlckNhc2UoKV18fHBhcnNlSW50KEMubG9nbGV2ZWwsMTApKX1qUXVlcnkuc2FwLmxvZy5pbmZvKCJTQVAgTG9nZ2VyIHN0YXJ0ZWQuIik7alF1ZXJ5LmVhY2goYSxmdW5jdGlvbihpLGUpe2pRdWVyeS5zYXAubG9nW2UubGV2ZWxdKGUubWVzc2FnZSl9KTthPW51bGx9KCkpO2pRdWVyeS5zYXAuZmFjdG9yeT1mdW5jdGlvbiBmYWN0b3J5KG8pe2Z1bmN0aW9uIEYoKXt9Ri5wcm90b3R5cGU9bztyZXR1cm4gRn07alF1ZXJ5LnNhcC5uZXdPYmplY3Q9ZnVuY3Rpb24gbmV3T2JqZWN0KG8pe3JldHVybiBuZXcoalF1ZXJ5LnNhcC5mYWN0b3J5KG8pKSgpfTtqUXVlcnkuc2FwLmdldHRlcj1mdW5jdGlvbiBnZXR0ZXIodil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHZ9fTtqUXVlcnkuc2FwLmdldE9iamVjdD1mdW5jdGlvbiBnZXRPYmplY3QobixOLG8pe3ZhciBPPW98fF8sbT0obnx8IiIpLnNwbGl0KCIuIiksbD1tLmxlbmd0aCxxPWlzTmFOKE4pPzA6bC1OLGk7Zm9yKGk9MDtPJiZpPGw7aSsrKXtpZighT1ttW2ldXSYmaTxxKXtPW21baV1dPXt9fU89T1ttW2ldXX1yZXR1cm4gT307alF1ZXJ5LnNhcC5zZXRPYmplY3Q9ZnVuY3Rpb24obix2LG8pe3ZhciBPPW98fF8sTj0obnx8IiIpLnNwbGl0KCIuIiksbD1OLmxlbmd0aCxpO2lmKGw+MCl7Zm9yKGk9MDtPJiZpPGwtMTtpKyspe2lmKCFPW05baV1dKXtPW05baV1dPXt9fU89T1tOW2ldXX1PW05bbC0xXV09dn19O2Z1bmN0aW9uIFMobixpLHQpe3ZhciBUPVtdLG89MCxGPTAsczt0aGlzLnN0YXJ0VGFzaz1mdW5jdGlvbihtKXt2YXIgST1ULmxlbmd0aDtUW0ldPXtuYW1lOm0sZmluaXNoZWQ6ZmFsc2V9O28rKztyZXR1cm4gSX07dGhpcy5maW5pc2hUYXNrPWZ1bmN0aW9uKEksbSl7aWYoIVRbSV18fFRbSV0uZmluaXNoZWQpe3Rocm93IG5ldyBFcnJvcigidHJ5aW5nIHRvIGZpbmlzaCBub24gZXhpc3Rpbmcgb3IgYWxyZWFkeSBmaW5pc2hlZCB0YXNrIil9VFtJXS5maW5pc2hlZD10cnVlO28tLTtpZihtPT09ZmFsc2Upe0YrK31pZihvPT09MCl7alF1ZXJ5LnNhcC5sb2cuaW5mbygiU3luYyBwb2ludCAnIituKyInIGZpbmlzaGVkICh0YXNrczoiK1QubGVuZ3RoKyIsIG9wZW46IitvKyIsIGZhaWx1cmVzOiIrRisiKSIpO2lmKHMpe2NsZWFyVGltZW91dChzKTtzPW51bGx9O2woKX19O2Z1bmN0aW9uIGwoKXtpJiZpKG8sRik7aT1udWxsfWlmKCFpc05hTih0KSl7cz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7alF1ZXJ5LnNhcC5sb2cuaW5mbygiU3luYyBwb2ludCAnIituKyInIHRpbWVkIG91dCAodGFza3M6IitULmxlbmd0aCsiLCBvcGVuOiIrbysiLCBmYWlsdXJlczoiK0YrIikiKTtsKCl9LHQpfTtqUXVlcnkuc2FwLmxvZy5pbmZvKCJTeW5jIHBvaW50ICciK24rIicgY3JlYXRlZCIrKHQ/Iih0aW1lb3V0IGFmdGVyICIrdCsiIG1zKSI6IiIpKX1qUXVlcnkuc2FwLnN5bmNQb2ludD1mdW5jdGlvbihuLGksdCl7cmV0dXJuIG5ldyBTKG4saSx0KX07dmFyIGc9KGZ1bmN0aW9uKCl7dmFyIG89alF1ZXJ5LnNhcC5sb2cuZ2V0TG9nZ2VyKCJzYXAudWkuTW9kdWxlU3lzdGVtIiwoL3NhcC11aS14eC1kZWJ1ZyhNfC1tKW9kdWxlKEx8LWwpb2FkaW5nPSh0cnVlfHh8WCkvLnRlc3QobG9jYXRpb24uc2VhcmNoKXx8Q1sieHgtZGVidWdNb2R1bGVMb2FkaW5nIl0pP2pRdWVyeS5zYXAubG9nLkxldmVsLkRFQlVHOmpRdWVyeS5zYXAubG9nLkxldmVsLklORk8pLHU9eycnOidyZXNvdXJjZXMvJ30sST0wLHE9LTEsTD0xLHQ9Mix2PTMsUj00LEY9NSxNPXsic2FwL3VpL3RoaXJkcGFydHkvVVJJLmpzIjp7c3RhdGU6Uix1cmw6Yyxjb250ZW50OlVSSX0sInNhcC91aS9EZXZpY2UuanMiOntzdGF0ZTpSLHVybDpjLGNvbnRlbnQ6c2FwLnVpLkRldmljZX0sImpxdWVyeS5zYXAuZ2xvYmFsLmpzIjp7c3RhdGU6Uix1cmw6Yyxjb250ZW50OmpRdWVyeX19LHc9e30sQT17J3NhcC91aS90aGlyZHBhcnR5L2Nyb3Nzcm9hZHMuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2RhdGFqcy5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvaGFzaGVyLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9JUHY2LmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9qcXVlcnkvanF1ZXJ5LTEuMTEuMS5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvanF1ZXJ5L2pxdWVyeS0xLjEwLjIuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2pxdWVyeS9qcXVlcnktMS4xMC4xLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9qcXVlcnkvanF1ZXJ5LjEuNy4xLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9qcXVlcnkvanF1ZXJ5LjEuOC4xLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9qcXVlcnktbW9iaWxlLWN1c3RvbS5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvbGVzcy5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvcHVueWNvZGUuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L3JlcXVpcmUuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L1NlY29uZExldmVsRG9tYWlucy5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvc2lnbmFscy5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvVVJJLmpzJzp0cnVlfSx4PVtdLHk9IiIsej01MTIqMTAyNCxEPWRvY3VtZW50LmxvY2F0aW9uLmhyZWYucmVwbGFjZSgvXD8uKnwjLiovZywiIiksQj0iZnJhZ21lbnQiLEc9InZpZXciLEs9e2pzOltHLEIsImNvbnRyb2xsZXIiXSx4bWw6W0csQl0sanNvbjpbRyxCXSxodG1sOltHLEJdfSxIPW5ldyBSZWdFeHAoIihcXC4oPzoiK0suanMuam9pbigifCIpKyIpKT9cXC5qcyQiKSxKLE47KGZ1bmN0aW9uKCl7dmFyIHM9IiIsaT0iIjtqUXVlcnkuZWFjaChLLGZ1bmN0aW9uKGwsbSl7cz0ocz9zKyJ8IjoiIikrbDtpPShpP2krInwiOiIiKSsiKD86KD86IittLmpvaW4oIlxcLnwiKSsiXFwuKT8iK2wrIikifSk7cz0iXFwuKCIrcysiKSQiO2k9IlxcLig/OiIraSsifFteLi9dKykkIjtvLmRlYnVnKCJjb25zdHJ1Y3RlZCByZWdleHAgZm9yIGZpbGUgdHlwZXMgOiIrcyk7by5kZWJ1ZygiY29uc3RydWN0ZWQgcmVnZXhwIGZvciBmaWxlIHN1Yi10eXBlcyA6IitpKTtKPW5ldyBSZWdFeHAocyk7Tj1uZXcgUmVnRXhwKGkpfSgpKTtmdW5jdGlvbiBPKHMpe2lmKC9ec2FwXC51aVwudGhpcmRwYXJ0eVwuanF1ZXJ5XC5qcXVlcnktLy50ZXN0KHMpKXtyZXR1cm4ic2FwL3VpL3RoaXJkcGFydHkvanF1ZXJ5L2pxdWVyeS0iK3Muc2xpY2UoInNhcC51aS50aGlyZHBhcnR5LmpxdWVyeS5qcXVlcnktIi5sZW5ndGgpfWVsc2UgaWYoL15qcXVlcnlcLnNhcFwuLy50ZXN0KHMpKXtyZXR1cm4gc31yZXR1cm4gcy5yZXBsYWNlKC9cLi9nLCIvIil9ZnVuY3Rpb24gUShzKXt2YXIgaTtpZighL1wuanMkLy50ZXN0KHMpKXtyZXR1cm59cz1zLnNsaWNlKDAsLTMpO2lmKC9ec2FwXC91aVwvdGhpcmRwYXJ0eVwvanF1ZXJ5XC9qcXVlcnktLy50ZXN0KHMpKXtyZXR1cm4ic2FwLnVpLnRoaXJkcGFydHkuanF1ZXJ5LmpxdWVyeS0iK3Muc2xpY2UoInNhcC91aS90aGlyZHBhcnR5L2pxdWVyeS9qcXVlcnktIi5sZW5ndGgpfWVsc2UgaWYoL15qcXVlcnlcLnNhcFwuLy50ZXN0KHMpKXtyZXR1cm4gc31yZXR1cm4gcy5yZXBsYWNlKC9cLy9nLCIuIil9ZnVuY3Rpb24gVChzLGkpe3ZhciAkPXMuc3BsaXQoL1wvLyksbCxhMSxiMSxtO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xJiYkLmxlbmd0aD4wKXttPU4uZXhlYygkWyQubGVuZ3RoLTFdKTtpZihtKXtpPW1bMF07JFskLmxlbmd0aC0xXT0kWyQubGVuZ3RoLTFdLnNsaWNlKDAsbS5pbmRleCl9ZWxzZXtpPSIifX1mb3IobD0kLmxlbmd0aDtsPj0wO2wtLSl7YTE9JC5zbGljZSgwLGwpLmpvaW4oJy8nKTtpZih1W2ExXSl7YjE9dVthMV07aWYobDwkLmxlbmd0aCl7YjErPSQuc2xpY2UobCkuam9pbignLycpfWlmKGIxLnNsaWNlKC0xKT09PScvJyl7YjE9YjEuc2xpY2UoMCwtMSl9cmV0dXJuIGIxKyhpfHwnJyl9fX1mdW5jdGlvbiBVKHMpe3ZhciBsPS0xLGksbSwkO2Zvcih2YXIgbSBpbiB1KXskPXVbbV07JD0kKygkLnNsaWNlKC0xKSE9PScvJz8iLyI6IiIpO2lmKHUuaGFzT3duUHJvcGVydHkobSkmJm0ubGVuZ3RoPmwmJihzPT09JHx8cy5pbmRleE9mKCQpPT09MCkpe2w9bS5sZW5ndGg7aT1tKyhtPyIvIjoiIikrcy5zbGljZSgkLmxlbmd0aCl9fXJldHVybiBsPDA/dW5kZWZpbmVkOml9ZnVuY3Rpb24gVyhtKXt2YXIgaTtpPU1bbV18fChNW21dPXtzdGF0ZTpJfSk7aWYoaS5zdGF0ZT5JKXtyZXR1cm4gaX1pZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1Zyh5KyJkZWNsYXJlIG1vZHVsZSAnIittKyInIil9aS5zdGF0ZT1SO2lmKHgubGVuZ3RoPT09MCl7eC5wdXNoKG0pO2kudXJsPWkudXJsfHxjfXJldHVybiBpfWZ1bmN0aW9uIFgocyl7dmFyIG09SC5leGVjKHMpLGwsJCxhMSxiMSxpO2lmKCFtKXtvLmVycm9yKCJjYW4gb25seSByZXF1aXJlIEphdmFzY3JpcHQgbW9kdWxlLCBub3QgIitzKTthMS5zdGF0ZT1GO3JldHVybn1sPXMuc2xpY2UoMCxtLmluZGV4KTskPW1bMF07YTE9TVtzXXx8KE1bc109e3N0YXRlOkl9KTtpZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1Zyh5KyJyZXF1aXJlICciK3MrIicgb2YgdHlwZSAnIiskKyInIil9aWYoYTEuc3RhdGUhPT1JKXtpZihhMS5zdGF0ZT09PXEpe2ExLnN0YXRlPXQ7aWYoQVtzXSYmdHlwZW9mIHdpbmRvdy5kZWZpbmU9PT0iZnVuY3Rpb24iJiZ3aW5kb3cuZGVmaW5lLmFtZCl7dmFyIGMxPXdpbmRvdy5kZWZpbmUuYW1kO3RyeXtkZWxldGUgd2luZG93LmRlZmluZS5hbWQ7WShzKX1maW5hbGx5e3dpbmRvdy5kZWZpbmUuYW1kPWMxfX1lbHNle1kocyl9fWlmKGExLnN0YXRlPT09Uil7aWYoby5pc0xvZ2dhYmxlKCkpe28uZGVidWcoeSsibW9kdWxlICciK3MrIicgaGFzIGFscmVhZHkgYmVlbiBsb2FkZWQgKHNraXBwZWQpLiIpfXJldHVybiB0aGlzfWVsc2UgaWYoYTEuc3RhdGU9PT1GKXt0aHJvdyBuZXcgRXJyb3IoImZvdW5kIGluIG5lZ2F0aXZlIGNhY2hlOiAnIitzKyInIGZyb20gIithMS51cmwrIjogIithMS5lcnJvcil9ZWxzZXtyZXR1cm4gdGhpc319YTEuc3RhdGU9TDtiMT13aW5kb3dbInNhcC11aS1sb2FkZGJnIl0/WyItZGJnIiwiIl06WyIiXTtmb3IoaT0wO2k8YjEubGVuZ3RoJiZhMS5zdGF0ZSE9PXQ7aSsrKXthMS51cmw9VChsLGIxW2ldKyQpO2lmKG8uaXNMb2dnYWJsZSgpKXtvLmRlYnVnKHkrImxvYWRpbmcgIisoYjFbaV0/YjFbaV0rIiB2ZXJzaW9uIG9mICI6IiIpKyInIitzKyInIGZyb20gJyIrYTEudXJsKyInIil9alF1ZXJ5LmFqYXgoe3VybDphMS51cmwsZGF0YVR5cGU6J3RleHQnLGFzeW5jOmZhbHNlLHN1Y2Nlc3M6ZnVuY3Rpb24oZDEsZTEsZjEpe2ExLnN0YXRlPXQ7YTEuZGF0YT1kMX0sZXJyb3I6ZnVuY3Rpb24oZDEsZTEsZjEpe2ExLnN0YXRlPUY7YTEuZXJyb3I9ZDE/ZDEuc3RhdHVzKyIgLSAiK2QxLnN0YXR1c1RleHQ6ZTF9fSl9aWYoYTEuc3RhdGU9PT10KXtpZihBW3NdJiZ0eXBlb2Ygd2luZG93LmRlZmluZT09PSJmdW5jdGlvbiImJndpbmRvdy5kZWZpbmUuYW1kKXt2YXIgYzE9d2luZG93LmRlZmluZS5hbWQ7dHJ5e2RlbGV0ZSB3aW5kb3cuZGVmaW5lLmFtZDtZKHMpfWZpbmFsbHl7d2luZG93LmRlZmluZS5hbWQ9YzF9fWVsc2V7WShzKX19aWYoYTEuc3RhdGUhPT1SKXt0aHJvdyBuZXcgRXJyb3IoImZhaWxlZCB0byBsb2FkICciK3MrIicgZnJvbSAiK2ExLnVybCsiOiAiK2ExLmVycm9yKX19ZnVuY3Rpb24gWShtKXt2YXIgaT1NW21dLHMsbDtpZihpJiZpLnN0YXRlPT09dCYmdHlwZW9mIGkuZGF0YSE9PSJ1bmRlZmluZWQiKXt0cnl7aWYoby5pc0xvZ2dhYmxlKCkpe28uZGVidWcoeSsiZXhlY3V0aW5nICciK20rIiciKTtzPXk7eT15KyI6ICJ9aS5zdGF0ZT12O3gucHVzaChtKTtpZih0eXBlb2YgaS5kYXRhPT09ImZ1bmN0aW9uIil7aS5kYXRhLmFwcGx5KHdpbmRvdyl9ZWxzZXtsPWkuZGF0YTtpZihsJiYhbC5tYXRjaCgvXC9cL1sjQF0gc291cmNlKE1hcHBpbmcpP1VSTD0uKiQvKSl7bCs9IlxuLy8jIHNvdXJjZVVSTD0iK1VSSShpLnVybCkuYWJzb2x1dGVUbyhEKX1pZihfLmV4ZWNTY3JpcHQmJighaS5kYXRhfHxpLmRhdGEubGVuZ3RoPHopKXt0cnl7aS5kYXRhJiZfLmV4ZWNTY3JpcHQobCl9Y2F0Y2goZSl7eC5wb3AoKTtqUXVlcnkuc2FwLmdsb2JhbEV2YWwoaS5kYXRhKTt0aHJvdyBlfX1lbHNle18uZXZhbChsKX19eC5wb3AoKTtpLnN0YXRlPVI7aS5kYXRhPXVuZGVmaW5lZDtpLmNvbnRlbnQ9aS5jb250ZW50fHxqUXVlcnkuc2FwLmdldE9iamVjdChRKG0pKTtpZihvLmlzTG9nZ2FibGUoKSl7eT1zO28uZGVidWcoeSsiZmluaXNoZWQgZXhlY3V0aW5nICciK20rIiciKX19Y2F0Y2goJCl7aS5zdGF0ZT1GO2kuZXJyb3I9KCgkLnRvU3RyaW5nJiYkLnRvU3RyaW5nKCkpfHwkLm1lc3NhZ2UpKygkLmxpbmU/IihsaW5lICIrJC5saW5lKyIpIjoiIik7aS5kYXRhPXVuZGVmaW5lZDtpZih3aW5kb3dbInNhcC11aS1kZWJ1ZyJdJiYoL3NhcC11aS14eC1zaG93KEx8LWwpb2FkKEV8LWUpcnJvcnM9KHRydWV8eHxYKS8udGVzdChsb2NhdGlvbi5zZWFyY2gpfHxDWyJ4eC1zaG93bG9hZGVycm9ycyJdKSl7by5lcnJvcigiZXJyb3Igd2hpbGUgZXZhbHVhdGluZyAiK20rIiwgZW1iZWRkaW5nIGFnYWluIHZpYSBzY3JpcHQgdGFnIHRvIGVuZm9yY2UgYSBzdGFjayB0cmFjZSAoc2VlIGJlbG93KSIpO2pRdWVyeS5zYXAuaW5jbHVkZVNjcmlwdChpLnVybCk7cmV0dXJufX19fWZ1bmN0aW9uIFoobCxzKXt2YXIgJD1bXSxpLGExLGIxLG07Zm9yKGk9MDtpPGwubGVuZ3RoO2krKyl7YTE9bFtpXTtvLmRlYnVnKHkrInJlcXVpcmUgJyIrYTErIiciKTtYKGExKyIuanMiKTskW2ldPU1bYTErIi5qcyJdLmNvbnRlbnR8fGpRdWVyeS5zYXAuZ2V0T2JqZWN0KFEoYTErIi5qcyIpKTtvLmRlYnVnKHkrInJlcXVpcmUgJyIrYTErIic6IGRvbmUuIil9cy5hcHBseSh0aGlzLCQpfWpRdWVyeS5zYXAuZ2V0TW9kdWxlUGF0aD1mdW5jdGlvbihtLHMpe3JldHVybiBUKE8obSkscyl9O2pRdWVyeS5zYXAuZ2V0UmVzb3VyY2VQYXRoPVQ7alF1ZXJ5LnNhcC5yZWdpc3Rlck1vZHVsZVBhdGg9ZnVuY3Rpb24gcmVnaXN0ZXJNb2R1bGVQYXRoKG0scyl7bT1tLnJlcGxhY2UoL1wuL2csIi8iKTtzPXN8fCcuJztqUXVlcnkuc2FwLnJlZ2lzdGVyUmVzb3VyY2VQYXRoKG0scyl9O2pRdWVyeS5zYXAucmVnaXN0ZXJSZXNvdXJjZVBhdGg9ZnVuY3Rpb24ocyxpKXtzPVN0cmluZyhzfHwiIik7aWYoaT09bnVsbCl7ZGVsZXRlIHVbc119ZWxzZXtpPVN0cmluZyhpKTtpZihpLnNsaWNlKC0xKSE9Jy8nKXtpKz0nLyd9dVtzXT1pfW8uaW5mbygicmVnaXN0ZXJSZXNvdXJjZVBhdGggKCciK3MrIicsICciK2krIicpIil9O2pRdWVyeS5zYXAuaXNEZWNsYXJlZD1mdW5jdGlvbiBpc0RlY2xhcmVkKG0saSl7bT1PKG0pKyIuanMiO3JldHVybiBNW21dJiYoaXx8TVttXS5zdGF0ZSE9PXEpfTtqUXVlcnkuc2FwLmdldEFsbERlY2xhcmVkTW9kdWxlcz1mdW5jdGlvbigpe3ZhciBtPVtdO2pRdWVyeS5lYWNoKE0sZnVuY3Rpb24ocyxpKXtpZihpJiZpLnN0YXRlIT09cSl7dmFyIGw9UShzKTtpZihsKXttLnB1c2gobCl9fX0pO3JldHVybiBtfTtpZihDLnJlc291cmNlcm9vdHMpe2pRdWVyeS5lYWNoKEMucmVzb3VyY2Vyb290cyxqUXVlcnkuc2FwLnJlZ2lzdGVyTW9kdWxlUGF0aCl9by5pbmZvKCJVUkwgcHJlZml4ZXMgc2V0IHRvOiIpO2Zvcih2YXIgbiBpbiB1KXtvLmluZm8oIiAgIisobj8iJyIrbisiJyI6IihkZWZhdWx0KSIpKyIgOiAiK3Vbbl0pfWpRdWVyeS5zYXAuZGVjbGFyZT1mdW5jdGlvbihtLGkpe3ZhciBzPW07aWYodHlwZW9mKG0pPT09Im9iamVjdCIpe3M9bS5tb2ROYW1lO209TyhtLm1vZE5hbWUpKyhtLnR5cGU/Ii4iK20udHlwZToiIikrIi5qcyJ9ZWxzZXttPU8obSkrIi5qcyJ9VyhtKTtpZihpIT09ZmFsc2Upe2pRdWVyeS5zYXAuZ2V0T2JqZWN0KHMsMSl9cmV0dXJuIHRoaXN9O2pRdWVyeS5zYXAucmVxdWlyZT1mdW5jdGlvbihtLGwpe2lmKGpRdWVyeS5pc0FycmF5KG0pJiZ0eXBlb2YgbD09PSJmdW5jdGlvbiIpe1oobSxsKX1lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg+MSl7Zm9yKHZhciBpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7alF1ZXJ5LnNhcC5yZXF1aXJlKGFyZ3VtZW50c1tpXSl9cmV0dXJuIHRoaXN9aWYodHlwZW9mKG0pPT09Im9iamVjdCIpe209TyhtLm1vZE5hbWUpKyhtLnR5cGU/Ii4iK20udHlwZToiIikrIi5qcyJ9ZWxzZXttPU8obSkrIi5qcyJ9WChtKTtyZXR1cm4gdGhpc307alF1ZXJ5LnNhcC5fcmVxdWlyZVBhdGg9ZnVuY3Rpb24obSl7WChtKyIuanMiKX07d2luZG93LnNhcD13aW5kb3cuc2FwfHx7fTtzYXAudWk9c2FwLnVpfHx7fTtzYXAudWkuZGVmaW5lPWZ1bmN0aW9uKHMsbCxtLCQpe3ZhciBhMT1bXSxiMSxjMSxpO2lmKHR5cGVvZiBzPT09InN0cmluZyIpe2IxPXMrIi5qcyJ9ZWxzZXskPW07bT1sO2w9cztiMT14W3gubGVuZ3RoLTFdfXM9UShiMSk7aWYoIWpRdWVyeS5pc0FycmF5KGwpKXskPW07bT1sO2w9W119ZWxzZXt2YXIgZDE9YjEuc2xpY2UoMCwxK2IxLmxhc3RJbmRleE9mKCcvJykpO2ZvcihpPTA7aTxsLmxlbmd0aDtpKyspe2lmKC9eXC5cLy8udGVzdChsW2ldKSl7bFtpXT1kMStsW2ldLnNsaWNlKDIpfX19aWYoby5pc0xvZ2dhYmxlKCkpe28uZGVidWcoImRlZmluZSgiK2IxKyIsICIrIlsnIitsLmpvaW4oIicsJyIpKyInXSIrIikiKX12YXIgZTE9VyhiMSk7WihsLGZ1bmN0aW9uKCl7aWYoby5pc0xvZ2dhYmxlKCkpe28uZGVidWcoImRlZmluZSgiK2IxKyIpOiBjYWxsaW5nIGZhY3RvcnkgIit0eXBlb2YgbSl9aWYoJCl7alF1ZXJ5LnNhcC5nZXRPYmplY3QocywxKX1pZih0eXBlb2YgbT09PSJmdW5jdGlvbiIpe2UxLmNvbnRlbnQ9bS5hcHBseSh3aW5kb3csYXJndW1lbnRzKX1lbHNle2UxLmNvbnRlbnQ9bX1pZigkKXtpZihlMS5jb250ZW50PT1udWxsKXtvLmVycm9yKCJtb2R1bGUgJyIrYjErIicgcmV0dXJuZWQgbm8gY29udGVudCwgYnV0IHNob3VsZCBiZSBleHBvcnRlZCIpfWVsc2V7aWYoby5pc0xvZ2dhYmxlKCkpe28uZGVidWcoImV4cG9ydGluZyBjb250ZW50IG9mICciK2IxKyInOiBhcyBnbG9iYWwgb2JqZWN0Iil9alF1ZXJ5LnNhcC5zZXRPYmplY3QocyxlMS5jb250ZW50KX19fSl9O2pRdWVyeS5zYXAucHJlbG9hZE1vZHVsZXM9ZnVuY3Rpb24ocyxpLGwpe3ZhciBtLCQ7aWYod1tzXSlyZXR1cm47d1tzXT10cnVlO209alF1ZXJ5LnNhcC5nZXRNb2R1bGVQYXRoKHMsIi5qc29uIik7by5kZWJ1ZygicHJlbG9hZCBmaWxlICIrcyk7JD1sJiZsLnN0YXJ0VGFzaygibG9hZCAiK3MpO2pRdWVyeS5hamF4KHtkYXRhVHlwZToianNvbiIsYXN5bmM6aSx1cmw6bSxzdWNjZXNzOmZ1bmN0aW9uKGExKXtpZihhMSl7YTEudXJsPW19alF1ZXJ5LnNhcC5yZWdpc3RlclByZWxvYWRlZE1vZHVsZXMoYTEsaSxsKTtsJiZsLmZpbmlzaFRhc2soJCl9LGVycm9yOmZ1bmN0aW9uKGExLGIxLGMxKXtvLmVycm9yKCJmYWlsZWQgdG8gcHJlbG9hZCAnIitzKyInOiAiKyhjMXx8YjEpKTtsJiZsLmZpbmlzaFRhc2soJCxmYWxzZSl9fSl9O2pRdWVyeS5zYXAucmVnaXN0ZXJQcmVsb2FkZWRNb2R1bGVzPWZ1bmN0aW9uKGksbCxzKXt2YXIgbT1WKGkudmVyc2lvbnx8IjEuMCIpLmNvbXBhcmVUbygiMi4wIik8MDtpZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1Zyh5KyJhZGRpbmcgcHJlbG9hZGVkIG1vZHVsZXMgZnJvbSAnIitpLnVybCsiJyIpfWlmKGkubmFtZSl7d1tpLm5hbWVdPXRydWV9alF1ZXJ5LmVhY2goaS5tb2R1bGVzLGZ1bmN0aW9uKCQsYTEpeyQ9bT9PKCQpKyIuanMiOiQ7aWYoIU1bJF0pe01bJF09e3N0YXRlOnEsdXJsOmkudXJsKyIvIiskLGRhdGE6YTEsZ3JvdXA6aS5uYW1lfX1pZigkLm1hdGNoKC9cL2xpYnJhcnlcLmpzJC8pKXt3W1EoJCkrIi1wcmVsb2FkIl09dHJ1ZX19KTtpZihpLmRlcGVuZGVuY2llcyl7alF1ZXJ5LmVhY2goaS5kZXBlbmRlbmNpZXMsZnVuY3Rpb24oJCxhMSl7alF1ZXJ5LnNhcC5wcmVsb2FkTW9kdWxlcyhhMSxsLHMpfSl9fTtqUXVlcnkuc2FwLnVubG9hZFJlc291cmNlcz1mdW5jdGlvbihzLGwsbSwkKXt2YXIgYTE9W107aWYobD09bnVsbCl7bD10cnVlfWlmKGwpe2pRdWVyeS5lYWNoKE0sZnVuY3Rpb24oaSxiMSl7aWYoYjEmJmIxLmdyb3VwPT09cyl7YTEucHVzaChpKX19KTtkZWxldGUgd1tzXX1lbHNle2lmKE1bc10pe2ExLnB1c2gocyl9fWpRdWVyeS5lYWNoKGExLGZ1bmN0aW9uKGksYjEpe3ZhciBjMT1NW2IxXTtpZihjMSYmJCYmYjEubWF0Y2goL1wuanMkLykpe2pRdWVyeS5zYXAuc2V0T2JqZWN0KFEoYjEpLHVuZGVmaW5lZCl9aWYoYzEmJihtfHxjMS5zdGF0ZT09PXEpKXtkZWxldGUgTVtiMV19fSl9O2pRdWVyeS5zYXAuZ2V0UmVzb3VyY2VOYW1lPWZ1bmN0aW9uKG0scyl7cmV0dXJuIE8obSkrKHN8fCIuanMiKX07alF1ZXJ5LnNhcC5sb2FkUmVzb3VyY2U9ZnVuY3Rpb24ocyxtKXt2YXIgaSxsLCQsYTEsYjE7aWYodHlwZW9mIHM9PT0ic3RyaW5nIil7bT1tfHx7fX1lbHNle209c3x8e307cz1tLm5hbWU7aWYoIXMmJm0udXJsKXtzPVUobS51cmwpfX1tPWpRdWVyeS5leHRlbmQoe2ZhaWxPbkVycm9yOnRydWV9LG0pO2k9bS5kYXRhVHlwZTtpZihpPT1udWxsJiZzKXtpPShpPUouZXhlYyhzKSkmJmlbMV19bD1zJiZNW3NdJiZNW3NdLmRhdGE7aWYobCE9bnVsbCl7JD1qUXVlcnkuYWpheFNldHRpbmdzLmNvbnZlcnRlcnNbInRleHQgIitpXTtpZih0eXBlb2YgJD09PSJmdW5jdGlvbiIpe2w9JChsKX19ZWxzZXtqUXVlcnkuYWpheCh7dXJsOmExPW0udXJsfHxUKHMpLGFzeW5jOmZhbHNlLGRhdGFUeXBlOmksaGVhZGVyczptLmhlYWRlcnMsc3VjY2VzczpmdW5jdGlvbihjMSxkMSxlMSl7bD1jMX0sZXJyb3I6ZnVuY3Rpb24oYzEsZDEsZTEpe2w9bnVsbDtiMT1uZXcgRXJyb3IoInJlc291cmNlICIrcysiIGNvdWxkIG5vdCBiZSBsb2FkZWQgZnJvbSAiK2ExKyIuIENoZWNrIGZvciAnZmlsZSBub3QgZm91bmQnIG9yIHBhcnNlIGVycm9ycy4iKTtiMS5zdGF0dXM9ZDE7YjEuZXJyb3I9ZTE7YjEuc3RhdHVzQ29kZT1jMS5zdGF0dXN9fSl9aWYobD09bnVsbCYmbS5mYWlsT25FcnJvcil7dGhyb3cgYjF8fG5ldyBFcnJvcigibm8gZGF0YSByZXR1cm5lZCBmb3IgIitzKX1yZXR1cm4gbH07cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJue21vZHVsZXM6TSxwcmVmaXhlczp1fX19KCkpO2Z1bmN0aW9uIGYobyl7dmFyIGk9d2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF07aWYoaSl7aS5hcHBlbmRDaGlsZChvKX19alF1ZXJ5LnNhcC5pbmNsdWRlU2NyaXB0PWZ1bmN0aW9uIGluY2x1ZGVTY3JpcHQodSxpLGwsbSl7dmFyIHM9d2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO3Muc3JjPXU7cy50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO2lmKGkpe3MuaWQ9aX1pZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248OSl7aWYobCl7cy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZihzLnJlYWR5U3RhdGU9PT0ibG9hZGVkInx8cy5yZWFkeVN0YXRlPT09ImNvbXBsZXRlIil7bCgpO3Mub25yZWFkeXN0YXRlY2hhbmdlPW51bGx9fX19ZWxzZXtpZihsKXtqUXVlcnkocykubG9hZChsKX1pZihtKXtqUXVlcnkocykuZXJyb3IobSl9fXZhciBvO2lmKChpJiYobz1qUXVlcnkuc2FwLmRvbUJ5SWQoaSkpJiZvLnRhZ05hbWU9PT0iU0NSSVBUIikpe2pRdWVyeShvKS5yZW1vdmUoKX1mKHMpfTtqUXVlcnkuc2FwLmluY2x1ZGVTdHlsZVNoZWV0PWZ1bmN0aW9uIGluY2x1ZGVTdHlsZVNoZWV0KHUsSSxsLG0pe3ZhciBuPWZ1bmN0aW9uKHUsSSxsLG0pe3ZhciBMPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKTtMLnR5cGU9InRleHQvY3NzIjtMLnJlbD0ic3R5bGVzaGVldCI7TC5ocmVmPXU7aWYoSSl7TC5pZD1JfWpRdWVyeShMKS5sb2FkKGZ1bmN0aW9uKCl7alF1ZXJ5KEwpLmF0dHIoInNhcC11aS1yZWFkeSIsInRydWUiKTtpZihsKXtsKCl9fSk7alF1ZXJ5KEwpLmVycm9yKGZ1bmN0aW9uKCl7alF1ZXJ5KEwpLmF0dHIoInNhcC11aS1yZWFkeSIsImZhbHNlIik7aWYobSl7bSgpfX0pO3JldHVybiBMfTt2YXIgbz1mdW5jdGlvbih1LEksbCxtKXtpZihzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJnNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPD05JiZkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGg+PTI5KXt2YXIgcz1VUkkucGFyc2UoZG9jdW1lbnQuVVJMKS5wYXRoO2pRdWVyeS5zYXAubG9nLndhcm5pbmcoIlN0bHllU2hlZXQgIitJKyIgbm90IGFkZGVkIGFzIExJTksgYmVjYXVzZSBvZiBJRSBsaW1pdHMiLHUsImpRdWVyeS5zYXAuaW5jbHVkZVN0eWxlU2hlZXQiKTtpZighdGhpcy5fb0lFU3R5bGVTaGVldCl7dGhpcy5fb0lFU3R5bGVTaGVldD1kb2N1bWVudC5jcmVhdGVTdHlsZVNoZWV0KCk7dGhpcy5fb0lFU3R5bGVTaGVldC5hZGRJbXBvcnQoVVJJKHUpLmFic29sdXRlVG8ocykpfWVsc2V7dmFyIEE9ZmFsc2U7Zm9yKHZhciBpPTA7aTx0aGlzLl9vSUVTdHlsZVNoZWV0LmltcG9ydHMubGVuZ3RoO2krKyl7dmFyIHE9dGhpcy5fb0lFU3R5bGVTaGVldC5pbXBvcnRzW2ldO2lmKHEuaW1wb3J0cy5sZW5ndGg8MzApe3EuYWRkSW1wb3J0KFVSSSh1KS5hYnNvbHV0ZVRvKHMpKTtBPXRydWU7YnJlYWt9fWlmKCFBKXt0aGlzLl9vSUVTdHlsZVNoZWV0LmFkZEltcG9ydChVUkkodSkuYWJzb2x1dGVUbyhzKSl9fX1lbHNle2Yobih1LEksbCxtKSl9fTt2YXIgTyxSO2lmKChJJiYoTz1qUXVlcnkuc2FwLmRvbUJ5SWQoSSkpJiYoUj1PLnRhZ05hbWU9PT0iTElOSyImJk8ucmVsPT09InN0eWxlc2hlZXQiKSl8fHdpbmRvdy5kb2N1bWVudC5ib2R5KXtpZihSKXtpZihPLmdldEF0dHJpYnV0ZSgiaHJlZiIpIT09dXx8bHx8bSl7alF1ZXJ5KE8pLnJlcGxhY2VXaXRoKG4odSxJLGwsbSkpfX1lbHNle28odSxJLGwsbSl9fWVsc2V7byh1LEksbCxtKX19O2lmKCEoQy5wcm9kdWN0aXZlPT09dHJ1ZXx8Qy5wcm9kdWN0aXZlPT09InRydWUifHxDLnByb2R1Y3RpdmU9PT0ieCIpKXtqUXVlcnkoZnVuY3Rpb24oKXtqUXVlcnkoZG9jdW1lbnQuYm9keSkua2V5ZG93bihmdW5jdGlvbihlKXtpZihlLmtleUNvZGU9PTgwJiZlLnNoaWZ0S2V5JiZlLmFsdEtleSYmZS5jdHJsS2V5KXt0cnl7alF1ZXJ5LnNhcC5yZXF1aXJlKCJzYXAudWkuZGVidWcuVGVjaG5pY2FsSW5mbyIpfWNhdGNoKGUpe3JldHVybn1zYXAudWkuZGVidWcuVGVjaG5pY2FsSW5mby5vcGVuKGZ1bmN0aW9uKCl7dmFyIGk9ZygpO3JldHVybnttb2R1bGVzOmkubW9kdWxlcyxwcmVmaXhlczppLnVybFByZWZpeGVzLGNvbmZpZzpDfX0pfX0pfSk7alF1ZXJ5KGZ1bmN0aW9uKCl7alF1ZXJ5KGRvY3VtZW50LmJvZHkpLmtleWRvd24oZnVuY3Rpb24oZSl7aWYoZS5rZXlDb2RlPT04MyYmZS5zaGlmdEtleSYmZS5hbHRLZXkmJmUuY3RybEtleSl7dHJ5e2pRdWVyeS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuc3VwcG9ydC5TdXBwb3J0Iik7dmFyIHM9c2FwLnVpLmNvcmUuc3VwcG9ydC5TdXBwb3J0LmdldFN0dWIoKTtpZihzLmdldFR5cGUoKSE9c2FwLnVpLmNvcmUuc3VwcG9ydC5TdXBwb3J0LlN0dWJUeXBlLkFQUExJQ0FUSU9OKXtyZXR1cm59cy5vcGVuU3VwcG9ydFRvb2woKX1jYXRjaChlKXt9fX0pfSl9aWYoL3NhcC11aS14eC1lMmUtdHJhY2U9KHRydWV8eHxYKS8udGVzdChsb2NhdGlvbi5zZWFyY2gpKXtqUXVlcnkuc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLnN1cHBvcnQudHJhY2UuRTJlVHJhY2VMaWIiKyIiKX1pZighalF1ZXJ5LnN1cHBvcnQpe2pRdWVyeS5zdXBwb3J0PXt9fWpRdWVyeS5leHRlbmQoalF1ZXJ5LnN1cHBvcnQse3RvdWNoOiJvbnRvdWNoZW5kImluIGRvY3VtZW50fSk7dmFyIHA9WyJXZWJraXQiLCJtcyIsIk1veiJdO3ZhciBoPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTt2YXIgaz1mdW5jdGlvbihsLG0pe2lmKGpRdWVyeS5zdXBwb3J0W2xdPT09dW5kZWZpbmVkKXtpZihoW21dIT09dW5kZWZpbmVkKXtqUXVlcnkuc3VwcG9ydFtsXT10cnVlO2lmKG09PT0iYm94RmxleCJ8fG09PT0iZmxleE9yZGVyInx8bT09PSJmbGV4R3JvdyIpe2lmKCFzYXAudWkuRGV2aWNlLmJyb3dzZXIuY2hyb21lfHxzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbj4yOCl7alF1ZXJ5LnN1cHBvcnQuZmxleEJveFByZWZpeGVkPWZhbHNlfX1yZXR1cm59ZWxzZXttPW0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrbS5zbGljZSgxKTtmb3IodmFyIGkgaW4gcCl7aWYoaFtwW2ldK21dIT09dW5kZWZpbmVkKXtqUXVlcnkuc3VwcG9ydFtsXT10cnVlO3JldHVybn19fWpRdWVyeS5zdXBwb3J0W2xdPWZhbHNlfX07aygiY3NzVHJhbnNmb3JtcyIsInRyYW5zZm9ybSIpO2soImNzc1RyYW5zZm9ybXMzZCIsInBlcnNwZWN0aXZlIik7aygiY3NzVHJhbnNpdGlvbnMiLCJ0cmFuc2l0aW9uIik7aygiY3NzQW5pbWF0aW9ucyIsImFuaW1hdGlvbk5hbWUiKTtpZihqUXVlcnkuc3VwcG9ydC5jc3NHcmFkaWVudHM9PT11bmRlZmluZWQpe3ZhciBFPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLGg9RS5zdHlsZTt0cnl7aC5iYWNrZ3JvdW5kSW1hZ2U9ImxpbmVhci1ncmFkaWVudChsZWZ0IHRvcCwgcmVkLCB3aGl0ZSkiO2guYmFja2dyb3VuZEltYWdlPSItbW96LWxpbmVhci1ncmFkaWVudChsZWZ0IHRvcCwgcmVkLCB3aGl0ZSkiO2guYmFja2dyb3VuZEltYWdlPSItd2Via2l0LWxpbmVhci1ncmFkaWVudChsZWZ0IHRvcCwgcmVkLCB3aGl0ZSkiO2guYmFja2dyb3VuZEltYWdlPSItbXMtbGluZWFyLWdyYWRpZW50KGxlZnQgdG9wLCByZWQsIHdoaXRlKSI7aC5iYWNrZ3JvdW5kSW1hZ2U9Ii13ZWJraXQtZ3JhZGllbnQobGluZWFyLCBsZWZ0IHRvcCwgcmlnaHQgYm90dG9tLCBmcm9tKHJlZCksIHRvKHdoaXRlKSkifWNhdGNoKGUpe31qUXVlcnkuc3VwcG9ydC5jc3NHcmFkaWVudHM9KGguYmFja2dyb3VuZEltYWdlJiZoLmJhY2tncm91bmRJbWFnZS5pbmRleE9mKCJncmFkaWVudCIpPi0xKTtFPW51bGx9alF1ZXJ5LnN1cHBvcnQuZmxleEJveFByZWZpeGVkPXRydWU7aygiZmxleEJveExheW91dCIsImJveEZsZXgiKTtpZihoLm1zRmxleE9yZGVyIT09dW5kZWZpbmVkKXtqUXVlcnkuc3VwcG9ydC5pZTEwRmxleEJveExheW91dD10cnVlfWsoIm5ld0ZsZXhCb3hMYXlvdXQiLCJmbGV4R3JvdyIpO2lmKGpRdWVyeS5zdXBwb3J0LmZsZXhCb3hMYXlvdXR8fGpRdWVyeS5zdXBwb3J0Lm5ld0ZsZXhCb3hMYXlvdXR8fGpRdWVyeS5zdXBwb3J0LmllMTBGbGV4Qm94TGF5b3V0KXtqUXVlcnkuc3VwcG9ydC5oYXNGbGV4Qm94U3VwcG9ydD10cnVlfWVsc2V7alF1ZXJ5LnN1cHBvcnQuaGFzRmxleEJveFN1cHBvcnQ9ZmFsc2V9aWYoIWpRdWVyeS5zdXBwb3J0Lm9wYWNpdHkpeyhmdW5jdGlvbigpe3ZhciBvPWpRdWVyeS5jc3NIb29rcy5vcGFjaXR5LnNldDtqUXVlcnkuY3NzSG9va3Mub3BhY2l0eS5zZXQ9ZnVuY3Rpb24oaSx2KXtvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZighalF1ZXJ5LnRyaW0oaS5zdHlsZS5maWx0ZXIpKXtpLnN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgiZmlsdGVyIil9fX0oKSl9ZnVuY3Rpb24gUCgpe2Z1bmN0aW9uIE0oSSxzLGwsbSl7dGhpcy5pZD1JO3RoaXMuaW5mbz1zO3RoaXMuc3RhcnQ9bDt0aGlzLmVuZD1tO3RoaXMucGF1c2U9MDt0aGlzLnJlc3VtZT0wO3RoaXMuZHVyYXRpb249MDt0aGlzLnRpbWU9MH12YXIgQT1mYWxzZTt2YXIgaT1qUXVlcnkuYWpheDt0aGlzLmdldEFjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBBfTt0aGlzLnNldEFjdGl2ZT1mdW5jdGlvbihvKXtpZihBPT1vKXtyZXR1cm4gQX1BPW87aWYoQSl7alF1ZXJ5LmFqYXg9ZnVuY3Rpb24odSxsKXtqUXVlcnkuc2FwLm1lYXN1cmUuc3RhcnQodS51cmwsIlJlcXVlc3QgZm9yICIrdS51cmwpO2kuYXBwbHkodGhpcyxhcmd1bWVudHMpO2pRdWVyeS5zYXAubWVhc3VyZS5lbmQodS51cmwpfX1lbHNlIGlmKGkpe2pRdWVyeS5hamF4PWl9cmV0dXJuIEF9O3RoaXMuc2V0QWN0aXZlKC9zYXAtdWktbWVhc3VyZT0odHJ1ZXx4fFgpLy50ZXN0KGxvY2F0aW9uLnNlYXJjaCkpO3RoaXMubU1lYXN1cmVtZW50cz17fTt0aGlzLnN0YXJ0PWZ1bmN0aW9uKEkscyl7aWYoIUEpe3JldHVybn12YXIgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTt2YXIgbT1uZXcgTShJLHMsdCwwKTtpZihtKXt0aGlzLm1NZWFzdXJlbWVudHNbSV09bTtyZXR1cm4oe2lkOm0uaWQsaW5mbzptLmluZm8sc3RhcnQ6bS5zdGFydH0pfWVsc2V7cmV0dXJuIGZhbHNlfX07dGhpcy5wYXVzZT1mdW5jdGlvbihJKXtpZighQSl7cmV0dXJufXZhciB0PW5ldyBEYXRlKCkuZ2V0VGltZSgpO3ZhciBtPXRoaXMubU1lYXN1cmVtZW50c1tJXTtpZihtJiZtLmVuZD4wKXtyZXR1cm4gZmFsc2V9aWYobSYmbS5wYXVzZT09MCl7bS5wYXVzZT10O2lmKG0ucGF1c2U+PW0ucmVzdW1lJiZtLnJlc3VtZT4wKXttLmR1cmF0aW9uPW0uZHVyYXRpb24rbS5wYXVzZS1tLnJlc3VtZTttLnJlc3VtZT0wfWVsc2UgaWYobS5wYXVzZT49bS5zdGFydCl7bS5kdXJhdGlvbj1tLnBhdXNlLW0uc3RhcnR9fWlmKG0pe3JldHVybih7aWQ6bS5pZCxpbmZvOm0uaW5mbyxzdGFydDptLnN0YXJ0LHBhdXNlOm0ucGF1c2V9KX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMucmVzdW1lPWZ1bmN0aW9uKEkpe2lmKCFBKXtyZXR1cm59dmFyIHQ9bmV3IERhdGUoKS5nZXRUaW1lKCk7dmFyIG09dGhpcy5tTWVhc3VyZW1lbnRzW0ldO2lmKG0mJm0ucGF1c2U+MCl7bS5wYXVzZT0wO20ucmVzdW1lPXR9aWYobSl7cmV0dXJuKHtpZDptLmlkLGluZm86bS5pbmZvLHN0YXJ0Om0uc3RhcnQscmVzdW1lOm0ucmVzdW1lfSl9ZWxzZXtyZXR1cm4gZmFsc2V9fTt0aGlzLmVuZD1mdW5jdGlvbihJKXtpZighQSl7cmV0dXJufXZhciB0PW5ldyBEYXRlKCkuZ2V0VGltZSgpO3ZhciBtPXRoaXMubU1lYXN1cmVtZW50c1tJXTtpZihtJiYhbS5lbmQpe20uZW5kPXQ7aWYobS5lbmQ+PW0ucmVzdW1lJiZtLnJlc3VtZT4wKXttLmR1cmF0aW9uPW0uZHVyYXRpb24rbS5lbmQtbS5yZXN1bWU7bS5yZXN1bWU9MH1lbHNlIGlmKG0ucGF1c2U+MCl7bS5wYXVzZT0wfWVsc2UgaWYobS5lbmQ+PW0uc3RhcnQpe20uZHVyYXRpb249bS5lbmQtbS5zdGFydH1pZihtLmVuZD49bS5zdGFydCl7bS50aW1lPW0uZW5kLW0uc3RhcnR9fWlmKG0pe3JldHVybih7aWQ6bS5pZCxpbmZvOm0uaW5mbyxzdGFydDptLnN0YXJ0LGVuZDptLmVuZCx0aW1lOm0udGltZSxkdXJhdGlvbjptLmR1cmF0aW9ufSl9ZWxzZXtyZXR1cm4gZmFsc2V9fTt0aGlzLmdldE1lYXN1cmVtZW50PWZ1bmN0aW9uKEkpe2lmKCFBKXtyZXR1cm59dmFyIG09dGhpcy5tTWVhc3VyZW1lbnRzW0ldO2lmKG0pe3JldHVybih7aWQ6bS5pZCxpbmZvOm0uaW5mbyxzdGFydDptLnN0YXJ0LGVuZDptLmVuZCx0aW1lOm0udGltZSxkdXJhdGlvbjptLmR1cmF0aW9ufSl9ZWxzZXtyZXR1cm4gZmFsc2V9fTt0aGlzLmNsZWFyPWZ1bmN0aW9uKCl7aWYoIUEpe3JldHVybn10aGlzLm1NZWFzdXJlbWVudHM9e307cmV0dXJufTt0aGlzLnJlbW92ZT1mdW5jdGlvbihJKXtpZighQSl7cmV0dXJufWRlbGV0ZSB0aGlzLm1NZWFzdXJlbWVudHNbSV07cmV0dXJufTt0aGlzLmdldEFsbE1lYXN1cmVtZW50cz1mdW5jdGlvbigpe2lmKCFBKXtyZXR1cm59dmFyIG09bmV3IEFycmF5KCk7alF1ZXJ5LmVhY2godGhpcy5tTWVhc3VyZW1lbnRzLGZ1bmN0aW9uKEksbyl7bS5wdXNoKHtpZDpvLmlkLGluZm86by5pbmZvLHN0YXJ0Om8uc3RhcnQsZW5kOm8uZW5kLGR1cmF0aW9uOm8uZHVyYXRpb24sdGltZTpvLnRpbWV9KX0pO3JldHVybiBtfTt0aGlzLmFkZD1mdW5jdGlvbihJLHMsbCxtLHQsRCl7aWYoIUEpe3JldHVybn12YXIgbz1uZXcgTShJLHMsbCxtKTtvLnRpbWU9dDtvLmR1cmF0aW9uPUQ7aWYobyl7dGhpcy5tTWVhc3VyZW1lbnRzW0ldPW87cmV0dXJuKHtpZDpvLmlkLGluZm86by5pbmZvLHN0YXJ0Om8uc3RhcnQsZW5kOm8uZW5kLHRpbWU6by50aW1lLGR1cmF0aW9uOm8uZHVyYXRpb259KX1lbHNle3JldHVybiBmYWxzZX19fWpRdWVyeS5zYXAubWVhc3VyZT1uZXcgUCgpfSgpKTsKalF1ZXJ5LnNhcC5nbG9iYWxFdmFsPWZ1bmN0aW9uKCl7ZXZhbChhcmd1bWVudHNbMF0pfTsKLyoKKiBqUXVlcnkgTW9iaWxlIHYxLjMuMQoqIGh0dHA6Ly9qcXVlcnltb2JpbGUuY29tCioKKiBDb3B5cmlnaHQgMjAxMCwgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgoqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKKgoqLwoKKGZ1bmN0aW9uKHIsZCxmKXtpZih0eXBlb2YgZGVmaW5lPT09ImZ1bmN0aW9uIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKFsianF1ZXJ5Il0sZnVuY3Rpb24oJCl7ZigkLHIsZCk7cmV0dXJuICQubW9iaWxlfSl9ZWxzZXtmKHIualF1ZXJ5LHIsZCl9fSh0aGlzLGRvY3VtZW50LGZ1bmN0aW9uKFEsZCxmLHUpewovLyBBYm91dDogTGljZW5zZQovLyBDb3B5cmlnaHQgKGMpIDIwMTAgIkNvd2JveSIgQmVuIEFsbWFuLAovLyBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy4KLy8gaHR0cDovL2JlbmFsbWFuLmNvbS9hYm91dC9saWNlbnNlLwooZnVuY3Rpb24oJCxkLHUpe3ZhciBzPSdoYXNoY2hhbmdlJyxhPWYsYixjPSQuZXZlbnQuc3BlY2lhbCxnPWEuZG9jdW1lbnRNb2RlLGg9J29uJytzIGluIGQmJihnPT09dXx8Zz43KTtmdW5jdGlvbiBpKGUpe2U9ZXx8bG9jYXRpb24uaHJlZjtyZXR1cm4nIycrZS5yZXBsYWNlKC9eW14jXSojPyguKikkLywnJDEnKX07JC5mbltzXT1mdW5jdGlvbihlKXtyZXR1cm4gZT90aGlzLmJpbmQocyxlKTp0aGlzLnRyaWdnZXIocyl9OyQuZm5bc10uZGVsYXk9NTA7Y1tzXT0kLmV4dGVuZChjW3NdLHtzZXR1cDpmdW5jdGlvbigpe2lmKGgpe3JldHVybiBmYWxzZX0kKGIuc3RhcnQpfSx0ZWFyZG93bjpmdW5jdGlvbigpe2lmKGgpe3JldHVybiBmYWxzZX0kKGIuc3RvcCl9fSk7Yj0oZnVuY3Rpb24oKXt2YXIgaj17fSx0LGw9aSgpLGs9ZnVuY3Rpb24odil7cmV0dXJuIHZ9LG09ayxuPWs7ai5zdGFydD1mdW5jdGlvbigpe3R8fHAoKX07ai5zdG9wPWZ1bmN0aW9uKCl7dCYmY2xlYXJUaW1lb3V0KHQpO3Q9dX07ZnVuY3Rpb24gcCgpe3ZhciBlPWkoKSxvPW4obCk7aWYoZSE9PWwpe20obD1lLG8pOyQoZCkudHJpZ2dlcihzKX1lbHNlIGlmKG8hPT1sKXtsb2NhdGlvbi5ocmVmPWxvY2F0aW9uLmhyZWYucmVwbGFjZSgvIy4qLywnJykrb310PXNldFRpbWVvdXQocCwkLmZuW3NdLmRlbGF5KX07ZC5hdHRhY2hFdmVudCYmIWQuYWRkRXZlbnRMaXN0ZW5lciYmIWgmJihmdW5jdGlvbigpe3ZhciBvLHE7ai5zdGFydD1mdW5jdGlvbigpe2lmKCFvKXtxPSQuZm5bc10uc3JjO3E9cSYmcStpKCk7bz0kKCc8aWZyYW1lIHRhYmluZGV4PSItMSIgdGl0bGU9ImVtcHR5Ii8+JykuaGlkZSgpLm9uZSgnbG9hZCcsZnVuY3Rpb24oKXtxfHxtKGkoKSk7cCgpfSkuYXR0cignc3JjJyxxfHwnamF2YXNjcmlwdDowJykuaW5zZXJ0QWZ0ZXIoJ2JvZHknKVswXS5jb250ZW50V2luZG93O2Eub25wcm9wZXJ0eWNoYW5nZT1mdW5jdGlvbigpe3RyeXtpZihldmVudC5wcm9wZXJ0eU5hbWU9PT0ndGl0bGUnKXtvLmRvY3VtZW50LnRpdGxlPWEudGl0bGV9fWNhdGNoKGUpe319fX07ai5zdG9wPWs7bj1mdW5jdGlvbigpe3JldHVybiBpKG8ubG9jYXRpb24uaHJlZil9O209ZnVuY3Rpb24oZSxyKXt2YXIgdj1vLmRvY3VtZW50LHc9JC5mbltzXS5kb21haW47aWYoZSE9PXIpe3YudGl0bGU9YS50aXRsZTt2Lm9wZW4oKTt3JiZ2LndyaXRlKCc8c2NyaXB0PmRvY3VtZW50LmRvbWFpbj0iJyt3KyciPC9zY3JpcHQ+Jyk7di5jbG9zZSgpO28ubG9jYXRpb24uaGFzaD1lfX19KSgpO3JldHVybiBqfSkoKX0pKFEsdGhpcyk7KGZ1bmN0aW9uKCQpeyQubW9iaWxlPXt9O1EubW9iaWxlLm9yaWVudGF0aW9uQ2hhbmdlRW5hYmxlZD10cnVlfShRKSk7KGZ1bmN0aW9uKCQsZCx1KXt2YXIgbj17fTskLm1vYmlsZT0kLmV4dGVuZCgkLm1vYmlsZSx7dmVyc2lvbjoiMS4zLjEiLG5zOiIiLHN1YlBhZ2VVcmxLZXk6InVpLXBhZ2UiLGFjdGl2ZVBhZ2VDbGFzczoidWktcGFnZS1hY3RpdmUiLGFjdGl2ZUJ0bkNsYXNzOiJ1aS1idG4tYWN0aXZlIixmb2N1c0NsYXNzOiJ1aS1mb2N1cyIsYWpheEVuYWJsZWQ6dHJ1ZSxoYXNoTGlzdGVuaW5nRW5hYmxlZDp0cnVlLGxpbmtCaW5kaW5nRW5hYmxlZDp0cnVlLGRlZmF1bHRQYWdlVHJhbnNpdGlvbjoiZmFkZSIsbWF4VHJhbnNpdGlvbldpZHRoOmZhbHNlLG1pblNjcm9sbEJhY2s6MjUwLHRvdWNoT3ZlcmZsb3dFbmFibGVkOmZhbHNlLGRlZmF1bHREaWFsb2dUcmFuc2l0aW9uOiJwb3AiLHBhZ2VMb2FkRXJyb3JNZXNzYWdlOiJFcnJvciBMb2FkaW5nIFBhZ2UiLHBhZ2VMb2FkRXJyb3JNZXNzYWdlVGhlbWU6ImUiLHBob25lZ2FwTmF2aWdhdGlvbkVuYWJsZWQ6ZmFsc2UsYXV0b0luaXRpYWxpemVQYWdlOnRydWUscHVzaFN0YXRlRW5hYmxlZDp0cnVlLGlnbm9yZUNvbnRlbnRFbmFibGVkOmZhbHNlLG9yaWVudGF0aW9uQ2hhbmdlRW5hYmxlZDp0cnVlLGJ1dHRvbk1hcmt1cDp7aG92ZXJEZWxheToyMDB9LHdpbmRvdzokKGQpLGRvY3VtZW50OiQoZiksa2V5Q29kZTp7QUxUOjE4LEJBQ0tTUEFDRTo4LENBUFNfTE9DSzoyMCxDT01NQToxODgsQ09NTUFORDo5MSxDT01NQU5EX0xFRlQ6OTEsQ09NTUFORF9SSUdIVDo5MyxDT05UUk9MOjE3LERFTEVURTo0NixET1dOOjQwLEVORDozNSxFTlRFUjoxMyxFU0NBUEU6MjcsSE9NRTozNixJTlNFUlQ6NDUsTEVGVDozNyxNRU5VOjkzLE5VTVBBRF9BREQ6MTA3LE5VTVBBRF9ERUNJTUFMOjExMCxOVU1QQURfRElWSURFOjExMSxOVU1QQURfRU5URVI6MTA4LE5VTVBBRF9NVUxUSVBMWToxMDYsTlVNUEFEX1NVQlRSQUNUOjEwOSxQQUdFX0RPV046MzQsUEFHRV9VUDozMyxQRVJJT0Q6MTkwLFJJR0hUOjM5LFNISUZUOjE2LFNQQUNFOjMyLFRBQjo5LFVQOjM4LFdJTkRPV1M6OTF9LGJlaGF2aW9yczp7fSxzaWxlbnRTY3JvbGw6ZnVuY3Rpb24oeSl7aWYoJC50eXBlKHkpIT09Im51bWJlciIpe3k9JC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGx9JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQ9ZmFsc2U7c2V0VGltZW91dChmdW5jdGlvbigpe2Quc2Nyb2xsVG8oMCx5KTskLm1vYmlsZS5kb2N1bWVudC50cmlnZ2VyKCJzaWxlbnRzY3JvbGwiLHt4OjAseTp5fSl9LDIwKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQ9dHJ1ZX0sMTUwKX0sbnNOb3JtYWxpemVEaWN0Om4sbnNOb3JtYWxpemU6ZnVuY3Rpb24ocCl7aWYoIXApe3JldHVybn1yZXR1cm4gbltwXXx8KG5bcF09JC5jYW1lbENhc2UoJC5tb2JpbGUubnMrcCkpfSxnZXRJbmhlcml0ZWRUaGVtZTpmdW5jdGlvbihhLGIpe3ZhciBlPWFbMF0sbD0iIixyPS91aS0oYmFyfGJvZHl8b3ZlcmxheSktKFthLXpdKVxiLyxjLG07d2hpbGUoZSl7Yz1lLmNsYXNzTmFtZXx8IiI7aWYoYyYmKG09ci5leGVjKGMpKSYmKGw9bVsyXSkpe2JyZWFrfWU9ZS5wYXJlbnROb2RlfXJldHVybiBsfHxifHwiYSJ9LGNsb3Nlc3RQYWdlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYS5jbG9zZXN0KCc6anFtRGF0YShyb2xlPSJwYWdlIiksIDpqcW1EYXRhKHJvbGU9ImRpYWxvZyIpJykuZGF0YSgibW9iaWxlLXBhZ2UiKX0sZW5oYW5jZWFibGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaGF2ZVBhcmVudHMoYSwiZW5oYW5jZSIpfSxoaWphY2thYmxlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmhhdmVQYXJlbnRzKGEsImFqYXgiKX0saGF2ZVBhcmVudHM6ZnVuY3Rpb24oYSxiKXtpZighJC5tb2JpbGUuaWdub3JlQ29udGVudEVuYWJsZWQpe3JldHVybiBhfXZhciBnPWEubGVuZ3RoLGg9JCgpLGUsayxsO2Zvcih2YXIgaT0wO2k8ZztpKyspe2s9YS5lcShpKTtsPWZhbHNlO2U9YVtpXTt3aGlsZShlKXt2YXIgYz1lLmdldEF0dHJpYnV0ZT9lLmdldEF0dHJpYnV0ZSgiZGF0YS0iKyQubW9iaWxlLm5zK2IpOiIiO2lmKGM9PT0iZmFsc2UiKXtsPXRydWU7YnJlYWt9ZT1lLnBhcmVudE5vZGV9aWYoIWwpe2g9aC5hZGQoayl9fXJldHVybiBofSxnZXRTY3JlZW5IZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZC5pbm5lckhlaWdodHx8JC5tb2JpbGUud2luZG93LmhlaWdodCgpfX0sJC5tb2JpbGUpOyQuZm4uanFtRGF0YT1mdW5jdGlvbihwLHYpe3ZhciByO2lmKHR5cGVvZiBwIT09InVuZGVmaW5lZCIpe2lmKHApe3A9JC5tb2JpbGUubnNOb3JtYWxpemUocCl9aWYoYXJndW1lbnRzLmxlbmd0aDwyfHx2PT09dSl7cj10aGlzLmRhdGEocCl9ZWxzZXtyPXRoaXMuZGF0YShwLHYpfX1yZXR1cm4gcn07JC5qcW1EYXRhPWZ1bmN0aW9uKGUscCx2KXt2YXIgcjtpZih0eXBlb2YgcCE9PSJ1bmRlZmluZWQiKXtyPSQuZGF0YShlLHA/JC5tb2JpbGUubnNOb3JtYWxpemUocCk6cCx2KX1yZXR1cm4gcn07JC5mbi5qcW1SZW1vdmVEYXRhPWZ1bmN0aW9uKHApe3JldHVybiB0aGlzLnJlbW92ZURhdGEoJC5tb2JpbGUubnNOb3JtYWxpemUocCkpfTskLmpxbVJlbW92ZURhdGE9ZnVuY3Rpb24oZSxwKXtyZXR1cm4gJC5yZW1vdmVEYXRhKGUsJC5tb2JpbGUubnNOb3JtYWxpemUocCkpfTskLmZuLnJlbW92ZVdpdGhEZXBlbmRlbnRzPWZ1bmN0aW9uKCl7JC5yZW1vdmVXaXRoRGVwZW5kZW50cyh0aGlzKX07JC5yZW1vdmVXaXRoRGVwZW5kZW50cz1mdW5jdGlvbihlKXt2YXIgYT0kKGUpOyhhLmpxbURhdGEoJ2RlcGVuZGVudHMnKXx8JCgpKS5yZW1vdmUoKTthLnJlbW92ZSgpfTskLmZuLmFkZERlcGVuZGVudHM9ZnVuY3Rpb24oYSl7JC5hZGREZXBlbmRlbnRzKCQodGhpcyksYSl9OyQuYWRkRGVwZW5kZW50cz1mdW5jdGlvbihlLGEpe3ZhciBiPSQoZSkuanFtRGF0YSgnZGVwZW5kZW50cycpfHwkKCk7JChlKS5qcW1EYXRhKCdkZXBlbmRlbnRzJywkLm1lcmdlKGIsYSkpfTskLmZuLmdldEVuY29kZWRUZXh0PWZ1bmN0aW9uKCl7cmV0dXJuICQoIjxkaXYvPiIpLnRleHQoJCh0aGlzKS50ZXh0KCkpLmh0bWwoKX07JC5mbi5qcW1FbmhhbmNlYWJsZT1mdW5jdGlvbigpe3JldHVybiAkLm1vYmlsZS5lbmhhbmNlYWJsZSh0aGlzKX07JC5mbi5qcW1IaWphY2thYmxlPWZ1bmN0aW9uKCl7cmV0dXJuICQubW9iaWxlLmhpamFja2FibGUodGhpcyl9O3ZhciBvPSQuZmluZCxqPS86anFtRGF0YVwoKFteKV0qKVwpL2c7JC5maW5kPWZ1bmN0aW9uKHMsYyxyLGUpe3M9cy5yZXBsYWNlKGosIltkYXRhLSIrKCQubW9iaWxlLm5zfHwiIikrIiQxXSIpO3JldHVybiBvLmNhbGwodGhpcyxzLGMscixlKX07JC5leHRlbmQoJC5maW5kLG8pOyQuZmluZC5tYXRjaGVzPWZ1bmN0aW9uKGUscyl7cmV0dXJuICQuZmluZChlLG51bGwsbnVsbCxzKX07JC5maW5kLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGUpe3JldHVybiAkLmZpbmQoZSxudWxsLG51bGwsW2FdKS5sZW5ndGg+MH19KShRLHRoaXMpOyhmdW5jdGlvbigkLHUpewovKiEgbWF0Y2hNZWRpYSgpIHBvbHlmaWxsIC0gVGVzdCBhIENTUyBtZWRpYSB0eXBlL3F1ZXJ5IGluIEpTLiBBdXRob3JzICYgY29weXJpZ2h0IChjKSAyMDEyOiBTY290dCBKZWhsLCBQYXVsIElyaXNoLCBOaWNob2xhcyBaYWthcy4gRHVhbCBNSVQvQlNEIGxpY2Vuc2UgKi8KZC5tYXRjaE1lZGlhPWQubWF0Y2hNZWRpYXx8KGZ1bmN0aW9uKGEsdSl7dmFyIGIsYz1hLmRvY3VtZW50RWxlbWVudCxyPWMuZmlyc3RFbGVtZW50Q2hpbGR8fGMuZmlyc3RDaGlsZCxlPWEuY3JlYXRlRWxlbWVudCgiYm9keSIpLGc9YS5jcmVhdGVFbGVtZW50KCJkaXYiKTtnLmlkPSJtcS10ZXN0LTEiO2cuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7dG9wOi0xMDBlbSI7ZS5zdHlsZS5iYWNrZ3JvdW5kPSJub25lIjtlLmFwcGVuZENoaWxkKGcpO3JldHVybiBmdW5jdGlvbihxKXtnLmlubmVySFRNTD0iJnNoeTs8c3R5bGUgbWVkaWE9XCIiK3ErIlwiPiAjbXEtdGVzdC0xIHsgd2lkdGg6IDQycHg7IH08L3N0eWxlPiI7Yy5pbnNlcnRCZWZvcmUoZSxyKTtiPWcub2Zmc2V0V2lkdGg9PT00MjtjLnJlbW92ZUNoaWxkKGUpO3JldHVybnttYXRjaGVzOmIsbWVkaWE6cX19fShmKSk7JC5tb2JpbGUubWVkaWE9ZnVuY3Rpb24ocSl7cmV0dXJuIGQubWF0Y2hNZWRpYShxKS5tYXRjaGVzfX0pKFEpOyhmdW5jdGlvbigkLHUpe3ZhciBzPXt0b3VjaDoib250b3VjaGVuZCJpbiBmfTskLm1vYmlsZS5zdXBwb3J0PSQubW9iaWxlLnN1cHBvcnR8fHt9OyQuZXh0ZW5kKCQuc3VwcG9ydCxzKTskLmV4dGVuZCgkLm1vYmlsZS5zdXBwb3J0LHMpfShRKSk7KGZ1bmN0aW9uKCQsdSl7JC5leHRlbmQoJC5zdXBwb3J0LHtvcmllbnRhdGlvbjoib3JpZW50YXRpb24iaW4gZCYmIm9ub3JpZW50YXRpb25jaGFuZ2UiaW4gZH0pfShRKSk7KGZ1bmN0aW9uKCQsdSl7ZnVuY3Rpb24gcChhKXt2YXIgaT1hLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Euc3Vic3RyKDEpLHQ9KGErIiAiK2Uuam9pbihpKyIgIikraSkuc3BsaXQoIiAiKTtmb3IodmFyIHYgaW4gdCl7aWYoY1t0W3ZdXSE9PXUpe3JldHVybiB0cnVlfX19dmFyIGI9JCgiPGJvZHk+IikucHJlcGVuZFRvKCJodG1sIiksYz1iWzBdLnN0eWxlLGU9WyJXZWJraXQiLCJNb3oiLCJPIl0sZz0icGFsbUdldFJlc291cmNlImluIGQsbz1kLm9wZXJhLGg9ZC5vcGVyYW1pbmkmJih7fSkudG9TdHJpbmcuY2FsbChkLm9wZXJhbWluaSk9PT0iW29iamVjdCBPcGVyYU1pbmldIixqPWQuYmxhY2tiZXJyeSYmIXAoIi13ZWJraXQtdHJhbnNmb3JtIik7ZnVuY3Rpb24gayhhLHYsdCl7dmFyIHc9Zi5jcmVhdGVFbGVtZW50KCdkaXYnKSx4PWZ1bmN0aW9uKEMpe3JldHVybiBDLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK0Muc3Vic3RyKDEpfSx5PWZ1bmN0aW9uKEMpe2lmKEM9PT0iIil7cmV0dXJuIiJ9ZWxzZXtyZXR1cm4iLSIrQy5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKStDLnN1YnN0cigxKSsiLSJ9fSx6PWZ1bmN0aW9uKEMpe3ZhciBEPXkoQykrYSsiOiAiK3YrIjsiLEU9eChDKSxGPUUrKEU9PT0iIj9hOngoYSkpO3cuc2V0QXR0cmlidXRlKCJzdHlsZSIsRCk7aWYoISF3LnN0eWxlW0ZdKXtCPXRydWV9fSxBPXQ/dDplLEI7Zm9yKHZhciBpPTA7aTxBLmxlbmd0aDtpKyspe3ooQVtpXSl9cmV0dXJuISFCfWZ1bmN0aW9uIGwoKXt2YXIgYT0idHJhbnNmb3JtLTNkIixpPSQubW9iaWxlLm1lZGlhKCIoLSIrZS5qb2luKCItIithKyIpLCgtIikrIi0iK2ErIiksKCIrYSsiKSIpO2lmKGkpe3JldHVybiEhaX12YXIgdj1mLmNyZWF0ZUVsZW1lbnQoImRpdiIpLHc9eydNb3pUcmFuc2Zvcm0nOictbW96LXRyYW5zZm9ybScsJ3RyYW5zZm9ybSc6J3RyYW5zZm9ybSd9O2IuYXBwZW5kKHYpO2Zvcih2YXIgdCBpbiB3KXtpZih2LnN0eWxlW3RdIT09dSl7di5zdHlsZVt0XT0ndHJhbnNsYXRlM2QoIDEwMHB4LCAxcHgsIDFweCApJztpPWQuZ2V0Q29tcHV0ZWRTdHlsZSh2KS5nZXRQcm9wZXJ0eVZhbHVlKHdbdF0pfX1yZXR1cm4oISFpJiZpIT09Im5vbmUiKX1mdW5jdGlvbiBtKCl7dmFyIGE9bG9jYXRpb24ucHJvdG9jb2wrIi8vIitsb2NhdGlvbi5ob3N0K2xvY2F0aW9uLnBhdGhuYW1lKyJ1aS1kaXIvIixpPSQoImhlYWQgYmFzZSIpLHQ9bnVsbCx2PSIiLHcseDtpZighaS5sZW5ndGgpe2k9dD0kKCI8YmFzZT4iLHsiaHJlZiI6YX0pLmFwcGVuZFRvKCJoZWFkIil9ZWxzZXt2PWkuYXR0cigiaHJlZiIpfXc9JCgiPGEgaHJlZj0ndGVzdHVybCcgLz4iKS5wcmVwZW5kVG8oYik7eD13WzBdLmhyZWY7aVswXS5ocmVmPXZ8fGxvY2F0aW9uLnBhdGhuYW1lO2lmKHQpe3QucmVtb3ZlKCl9cmV0dXJuIHguaW5kZXhPZihhKT09PTB9ZnVuY3Rpb24gbigpe3ZhciBhPWYuY3JlYXRlRWxlbWVudCgneCcpLGk9Zi5kb2N1bWVudEVsZW1lbnQsdD1kLmdldENvbXB1dGVkU3R5bGUsdjtpZighKCdwb2ludGVyRXZlbnRzJ2luIGEuc3R5bGUpKXtyZXR1cm4gZmFsc2V9YS5zdHlsZS5wb2ludGVyRXZlbnRzPSdhdXRvJzthLnN0eWxlLnBvaW50ZXJFdmVudHM9J3gnO2kuYXBwZW5kQ2hpbGQoYSk7dj10JiZ0KGEsJycpLnBvaW50ZXJFdmVudHM9PT0nYXV0byc7aS5yZW1vdmVDaGlsZChhKTtyZXR1cm4hIXZ9ZnVuY3Rpb24gcSgpe3ZhciBhPWYuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIHR5cGVvZiBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9PSJ1bmRlZmluZWQifSQuZXh0ZW5kKCQubW9iaWxlLHticm93c2VyOnt9fSk7JC5tb2JpbGUuYnJvd3Nlci5vbGRJRT0oZnVuY3Rpb24oKXt2YXIgdj0zLGk9Zi5jcmVhdGVFbGVtZW50KCJkaXYiKSxhPWkuYWxsfHxbXTtkb3tpLmlubmVySFRNTD0iPCEtLVtpZiBndCBJRSAiKygrK3YpKyJdPjxicj48IVtlbmRpZl0tLT4ifXdoaWxlKGFbMF0pO3JldHVybiB2PjQ/djohdn0pKCk7ZnVuY3Rpb24gcigpe3ZhciB3PWQsYT1uYXZpZ2F0b3IudXNlckFnZW50LGk9bmF2aWdhdG9yLnBsYXRmb3JtLHQ9YS5tYXRjaCgvQXBwbGVXZWJLaXRcLyhbMC05XSspLyksdj0hIXQmJnRbMV0seD1hLm1hdGNoKC9GZW5uZWNcLyhbMC05XSspLykseT0hIXgmJnhbMV0sej1hLm1hdGNoKC9PcGVyYSBNb2JpXC8oWzAtOV0rKS8pLEE9ISF6JiZ6WzFdO2lmKCgoaS5pbmRleE9mKCJpUGhvbmUiKT4tMXx8aS5pbmRleE9mKCJpUGFkIik+LTF8fGkuaW5kZXhPZigiaVBvZCIpPi0xKSYmdiYmdjw1MzQpfHwody5vcGVyYW1pbmkmJih7fSkudG9TdHJpbmcuY2FsbCh3Lm9wZXJhbWluaSk9PT0iW29iamVjdCBPcGVyYU1pbmldIil8fCh6JiZBPDc0NTgpfHwoYS5pbmRleE9mKCJBbmRyb2lkIik+LTEmJnYmJnY8NTMzKXx8KHkmJnk8Nil8fCgicGFsbUdldFJlc291cmNlImluIGQmJnYmJnY8NTM0KXx8KGEuaW5kZXhPZigiTWVlR28iKT4tMSYmYS5pbmRleE9mKCJOb2tpYUJyb3dzZXIvOC41LjAiKT4tMSkpe3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0kLmV4dGVuZCgkLnN1cHBvcnQse2Nzc1RyYW5zaXRpb25zOiJXZWJLaXRUcmFuc2l0aW9uRXZlbnQiaW4gZHx8aygndHJhbnNpdGlvbicsJ2hlaWdodCAxMDBtcyBsaW5lYXInLFsiV2Via2l0IiwiTW96IiwiIl0pJiYhJC5tb2JpbGUuYnJvd3Nlci5vbGRJRSYmIW8scHVzaFN0YXRlOiJwdXNoU3RhdGUiaW4gaGlzdG9yeSYmInJlcGxhY2VTdGF0ZSJpbiBoaXN0b3J5JiYhKGQubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94Iik+PTAmJmQudG9wIT09ZCkmJihkLm5hdmlnYXRvci51c2VyQWdlbnQuc2VhcmNoKC9DcmlPUy8pPT09LTEpLG1lZGlhcXVlcnk6JC5tb2JpbGUubWVkaWEoIm9ubHkgYWxsIiksY3NzUHNldWRvRWxlbWVudDohIXAoImNvbnRlbnQiKSx0b3VjaE92ZXJmbG93OiEhcCgib3ZlcmZsb3dTY3JvbGxpbmciKSxjc3NUcmFuc2Zvcm0zZDpsKCksYm94U2hhZG93OiEhcCgiYm94U2hhZG93IikmJiFqLGZpeGVkUG9zaXRpb246cigpLHNjcm9sbFRvcDooInBhZ2VYT2Zmc2V0ImluIGR8fCJzY3JvbGxUb3AiaW4gZi5kb2N1bWVudEVsZW1lbnR8fCJzY3JvbGxUb3AiaW4gYlswXSkmJiFnJiYhaCxkeW5hbWljQmFzZVRhZzptKCksY3NzUG9pbnRlckV2ZW50czpuKCksYm91bmRpbmdSZWN0OnEoKX0pO2IucmVtb3ZlKCk7dmFyIHM9KGZ1bmN0aW9uKCl7dmFyIGE9ZC5uYXZpZ2F0b3IudXNlckFnZW50O3JldHVybiBhLmluZGV4T2YoIk5va2lhIik+LTEmJihhLmluZGV4T2YoIlN5bWJpYW4vMyIpPi0xfHxhLmluZGV4T2YoIlNlcmllczYwLzUiKT4tMSkmJmEuaW5kZXhPZigiQXBwbGVXZWJLaXQiKT4tMSYmYS5tYXRjaCgvKEJyb3dzZXJOR3xOb2tpYUJyb3dzZXIpXC83XC5bMC0zXS8pfSkoKTskLm1vYmlsZS5ncmFkZUE9ZnVuY3Rpb24oKXtyZXR1cm4oJC5zdXBwb3J0Lm1lZGlhcXVlcnl8fCQubW9iaWxlLmJyb3dzZXIub2xkSUUmJiQubW9iaWxlLmJyb3dzZXIub2xkSUU+PTcpJiYoJC5zdXBwb3J0LmJvdW5kaW5nUmVjdHx8JC5mbi5qcXVlcnkubWF0Y2goLzFcLlswLTcrXVwuWzAtOStdPy8pIT09bnVsbCl9OyQubW9iaWxlLmFqYXhCbGFja2xpc3Q9ZC5ibGFja2JlcnJ5JiYhZC5XZWJLaXRQb2ludHx8aHx8cztpZihzKXskKGZ1bmN0aW9uKCl7JCgiaGVhZCBsaW5rW3JlbD0nc3R5bGVzaGVldCddIikuYXR0cigicmVsIiwiYWx0ZXJuYXRlIHN0eWxlc2hlZXQiKS5hdHRyKCJyZWwiLCJzdHlsZXNoZWV0Iil9KX1pZighJC5zdXBwb3J0LmJveFNoYWRvdyl7JCgiaHRtbCIpLmFkZENsYXNzKCJ1aS1tb2JpbGUtbm9zdXBwb3J0LWJveHNoYWRvdyIpfX0pKFEpOyhmdW5jdGlvbigkLHUpe3ZhciBhPSQubW9iaWxlLndpbmRvdyxzLGg7JC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlPXM9e2JvdW5kOmZhbHNlLHB1c2hTdGF0ZUVuYWJsZWQ6dHJ1ZSxvcmlnaW5hbEV2ZW50TmFtZTp1LGlzUHVzaFN0YXRlRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiAkLnN1cHBvcnQucHVzaFN0YXRlJiYkLm1vYmlsZS5wdXNoU3RhdGVFbmFibGVkPT09dHJ1ZSYmdGhpcy5pc0hhc2hDaGFuZ2VFbmFibGVkKCl9LGlzSGFzaENoYW5nZUVuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQ9PT10cnVlfSxwb3BzdGF0ZTpmdW5jdGlvbihlKXt2YXIgbj1uZXcgJC5FdmVudCgibmF2aWdhdGUiKSxiPW5ldyAkLkV2ZW50KCJiZWZvcmVuYXZpZ2F0ZSIpLGM9ZS5vcmlnaW5hbEV2ZW50LnN0YXRlfHx7fSxnPWxvY2F0aW9uLmhyZWY7YS50cmlnZ2VyKGIpO2lmKGIuaXNEZWZhdWx0UHJldmVudGVkKCkpe3JldHVybn1pZihlLmhpc3RvcnlTdGF0ZSl7JC5leHRlbmQoYyxlLmhpc3RvcnlTdGF0ZSl9bi5vcmlnaW5hbEV2ZW50PWU7c2V0VGltZW91dChmdW5jdGlvbigpe2EudHJpZ2dlcihuLHtzdGF0ZTpjfSl9LDApfSxoYXNoY2hhbmdlOmZ1bmN0aW9uKGUsYil7dmFyIG49bmV3ICQuRXZlbnQoIm5hdmlnYXRlIiksYz1uZXcgJC5FdmVudCgiYmVmb3JlbmF2aWdhdGUiKTthLnRyaWdnZXIoYyk7aWYoYy5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7cmV0dXJufW4ub3JpZ2luYWxFdmVudD1lO2EudHJpZ2dlcihuLHtzdGF0ZTplLmhhc2hjaGFuZ2VTdGF0ZXx8e319KX0sc2V0dXA6ZnVuY3Rpb24oYixuKXtpZihzLmJvdW5kKXtyZXR1cm59cy5ib3VuZD10cnVlO2lmKHMuaXNQdXNoU3RhdGVFbmFibGVkKCkpe3Mub3JpZ2luYWxFdmVudE5hbWU9InBvcHN0YXRlIjthLmJpbmQoInBvcHN0YXRlLm5hdmlnYXRlIixzLnBvcHN0YXRlKX1lbHNlIGlmKHMuaXNIYXNoQ2hhbmdlRW5hYmxlZCgpKXtzLm9yaWdpbmFsRXZlbnROYW1lPSJoYXNoY2hhbmdlIjthLmJpbmQoImhhc2hjaGFuZ2UubmF2aWdhdGUiLHMuaGFzaGNoYW5nZSl9fX19KShRKTsoZnVuY3Rpb24oJCl7JC5ldmVudC5zcGVjaWFsLnRocm90dGxlZHJlc2l6ZT17c2V0dXA6ZnVuY3Rpb24oKXskKHRoaXMpLmJpbmQoInJlc2l6ZSIsaCl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7JCh0aGlzKS51bmJpbmQoInJlc2l6ZSIsaCl9fTt2YXIgdD0yNTAsaD1mdW5jdGlvbigpe2M9KG5ldyBEYXRlKCkpLmdldFRpbWUoKTtiPWMtbDtpZihiPj10KXtsPWM7JCh0aGlzKS50cmlnZ2VyKCJ0aHJvdHRsZWRyZXNpemUiKX1lbHNle2lmKGEpe2NsZWFyVGltZW91dChhKX1hPXNldFRpbWVvdXQoaCx0LWIpfX0sbD0wLGEsYyxifSkoUSk7KGZ1bmN0aW9uKCQsZCl7dmFyIHc9JChkKSxlPSJvcmllbnRhdGlvbmNoYW5nZSIscyxnLGwsaSxhLHA9eyIwIjp0cnVlLCIxODAiOnRydWV9O2lmKCQuc3VwcG9ydC5vcmllbnRhdGlvbil7dmFyIGI9ZC5pbm5lcldpZHRofHx3LndpZHRoKCksYz1kLmlubmVySGVpZ2h0fHx3LmhlaWdodCgpLGg9NTA7aT1iPmMmJihiLWMpPmg7YT1wW2Qub3JpZW50YXRpb25dO2lmKChpJiZhKXx8KCFpJiYhYSkpe3A9eyItOTAiOnRydWUsIjkwIjp0cnVlfX19JC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlPSQuZXh0ZW5kKHt9LCQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZSx7c2V0dXA6ZnVuY3Rpb24oKXtpZigkLnN1cHBvcnQub3JpZW50YXRpb24mJiEkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2UuZGlzYWJsZWQpe3JldHVybiBmYWxzZX1sPWcoKTt3LmJpbmQoInRocm90dGxlZHJlc2l6ZSIsail9LHRlYXJkb3duOmZ1bmN0aW9uKCl7aWYoJC5zdXBwb3J0Lm9yaWVudGF0aW9uJiYhJC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLmRpc2FibGVkKXtyZXR1cm4gZmFsc2V9dy51bmJpbmQoInRocm90dGxlZHJlc2l6ZSIsail9LGFkZDpmdW5jdGlvbihrKXt2YXIgbz1rLmhhbmRsZXI7ay5oYW5kbGVyPWZ1bmN0aW9uKG0pe20ub3JpZW50YXRpb249ZygpO3JldHVybiBvLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSk7ZnVuY3Rpb24gaigpe3ZhciBvPWcoKTtpZihvIT09bCl7bD1vO3cudHJpZ2dlcihlKX19JC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLm9yaWVudGF0aW9uPWc9ZnVuY3Rpb24oKXt2YXIgaz10cnVlLG09Zi5kb2N1bWVudEVsZW1lbnQ7aWYoJC5zdXBwb3J0Lm9yaWVudGF0aW9uKXtrPXBbZC5vcmllbnRhdGlvbl19ZWxzZXtrPW0mJm0uY2xpZW50V2lkdGgvbS5jbGllbnRIZWlnaHQ8MS4xfXJldHVybiBrPyJwb3J0cmFpdCI6ImxhbmRzY2FwZSJ9OyQuZm5bZV09ZnVuY3Rpb24oayl7cmV0dXJuIGs/dGhpcy5iaW5kKGUsayk6dGhpcy50cmlnZ2VyKGUpfTtpZigkLmF0dHJGbil7JC5hdHRyRm5bZV09dHJ1ZX19KFEsdGhpcykpOyhmdW5jdGlvbigkLGQsZix1KXt2YXIgYT0idmlydHVhbE1vdXNlQmluZGluZ3MiLGM9InZpcnR1YWxUb3VjaElEIix2PSJ2bW91c2VvdmVyIHZtb3VzZWRvd24gdm1vdXNlbW92ZSB2bW91c2V1cCB2Y2xpY2sgdm1vdXNlb3V0IHZtb3VzZWNhbmNlbCIuc3BsaXQoIiAiKSxnPSJjbGllbnRYIGNsaWVudFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIi5zcGxpdCgiICIpLG09JC5ldmVudC5tb3VzZUhvb2tzPyQuZXZlbnQubW91c2VIb29rcy5wcm9wczpbXSxoPSQuZXZlbnQucHJvcHMuY29uY2F0KG0pLGw9e30scj0wLHM9MCxuPTAscD1mYWxzZSxxPVtdLHc9ZmFsc2Usej1mYWxzZSxBPSJhZGRFdmVudExpc3RlbmVyImluIGYsQj0kKGYpLEM9MSxEPTAsRTskLnZtb3VzZT17bW92ZURpc3RhbmNlVGhyZXNob2xkOjEwLGNsaWNrRGlzdGFuY2VUaHJlc2hvbGQ6MTAscmVzZXRUaW1lckR1cmF0aW9uOjE1MDB9O2Z1bmN0aW9uIEYoZSl7d2hpbGUoZSYmdHlwZW9mIGUub3JpZ2luYWxFdmVudCE9PSJ1bmRlZmluZWQiKXtlPWUub3JpZ2luYWxFdmVudH1yZXR1cm4gZX1mdW5jdGlvbiBHKGUsYil7dmFyIHQ9ZS50eXBlLG8sayx4LHksXyxhMSxpLGosYjE7ZT0kLkV2ZW50KGUpO2UudHlwZT1iO289ZS5vcmlnaW5hbEV2ZW50O2s9JC5ldmVudC5wcm9wcztpZih0LnNlYXJjaCgvXihtb3VzZXxjbGljaykvKT4tMSl7az1ofWlmKG8pe2ZvcihpPWsubGVuZ3RoLHk7aTspe3k9a1stLWldO2VbeV09b1t5XX19aWYodC5zZWFyY2goL21vdXNlKGRvd258dXApfGNsaWNrLyk+LTEmJiFlLndoaWNoKXtlLndoaWNoPTF9aWYodC5zZWFyY2goL150b3VjaC8pIT09LTEpe3g9RihvKTt0PXgudG91Y2hlcztfPXguY2hhbmdlZFRvdWNoZXM7YTE9KHQmJnQubGVuZ3RoKT90WzBdOigoXyYmXy5sZW5ndGgpP19bMF06dSk7aWYoYTEpe2ZvcihqPTAsYjE9Zy5sZW5ndGg7ajxiMTtqKyspe3k9Z1tqXTtlW3ldPWExW3ldfX19cmV0dXJuIGV9ZnVuY3Rpb24gSChlKXt2YXIgaj17fSxiLGs7d2hpbGUoZSl7Yj0kLmRhdGEoZSxhKTtmb3IoayBpbiBiKXtpZihiW2tdKXtqW2tdPWouaGFzVmlydHVhbEJpbmRpbmc9dHJ1ZX19ZT1lLnBhcmVudE5vZGV9cmV0dXJuIGp9ZnVuY3Rpb24gSShlLGope3ZhciBiO3doaWxlKGUpe2I9JC5kYXRhKGUsYSk7aWYoYiYmKCFqfHxiW2pdKSl7cmV0dXJuIGV9ZT1lLnBhcmVudE5vZGV9cmV0dXJuIG51bGx9ZnVuY3Rpb24gSigpe3o9ZmFsc2V9ZnVuY3Rpb24gSygpe3o9dHJ1ZX1mdW5jdGlvbiBMKCl7RD0wO3EubGVuZ3RoPTA7dz1mYWxzZTtLKCl9ZnVuY3Rpb24gTSgpe0ooKX1mdW5jdGlvbiBOKCl7TygpO3I9c2V0VGltZW91dChmdW5jdGlvbigpe3I9MDtMKCl9LCQudm1vdXNlLnJlc2V0VGltZXJEdXJhdGlvbil9ZnVuY3Rpb24gTygpe2lmKHIpe2NsZWFyVGltZW91dChyKTtyPTB9fWZ1bmN0aW9uIFAoZSxiLGope3ZhciBrO2lmKChqJiZqW2VdKXx8KCFqJiZJKGIudGFyZ2V0LGUpKSl7az1HKGIsZSk7JChiLnRhcmdldCkudHJpZ2dlcihrKX1yZXR1cm4ga31mdW5jdGlvbiBSKGUpe3ZhciB0PSQuZGF0YShlLnRhcmdldCxjKTtpZighdyYmKCFEfHxEIT09dCkpe3ZhciBiPVAoInYiK2UudHlwZSxlKTtpZihiKXtpZihiLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtlLnByZXZlbnREZWZhdWx0KCl9aWYoYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtlLnN0b3BQcm9wYWdhdGlvbigpfWlmKGIuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSl7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX19fX1mdW5jdGlvbiBTKGUpe3ZhciBiPUYoZSkudG91Y2hlcyxqLGs7aWYoYiYmYi5sZW5ndGg9PT0xKXtqPWUudGFyZ2V0O2s9SChqKTtpZihrLmhhc1ZpcnR1YWxCaW5kaW5nKXtEPUMrKzskLmRhdGEoaixjLEQpO08oKTtNKCk7cD1mYWxzZTt2YXIgdD1GKGUpLnRvdWNoZXNbMF07cz10LnBhZ2VYO249dC5wYWdlWTtQKCJ2bW91c2VvdmVyIixlLGspO1AoInZtb3VzZWRvd24iLGUsayl9fX1mdW5jdGlvbiBUKGUpe2lmKHope3JldHVybn1pZighcCl7UCgidm1vdXNlY2FuY2VsIixlLEgoZS50YXJnZXQpKX1wPXRydWU7TigpfWZ1bmN0aW9uIFUoZSl7aWYoeil7cmV0dXJufXZhciB0PUYoZSkudG91Y2hlc1swXSxiPXAsaj0kLnZtb3VzZS5tb3ZlRGlzdGFuY2VUaHJlc2hvbGQsaz1IKGUudGFyZ2V0KTtwPXB8fChNYXRoLmFicyh0LnBhZ2VYLXMpPmp8fE1hdGguYWJzKHQucGFnZVktbik+aik7aWYocCYmIWIpe1AoInZtb3VzZWNhbmNlbCIsZSxrKX1QKCJ2bW91c2Vtb3ZlIixlLGspO04oKX1mdW5jdGlvbiBWKGUpe2lmKHope3JldHVybn1LKCk7dmFyIGI9SChlLnRhcmdldCksdDtQKCJ2bW91c2V1cCIsZSxiKTtpZighcCl7dmFyIGo9UCgidmNsaWNrIixlLGIpO2lmKGomJiQuc3VwcG9ydC50b3VjaCl7dD1GKGUpLmNoYW5nZWRUb3VjaGVzWzBdO3EucHVzaCh7dG91Y2hJRDpELHg6dC5jbGllbnRYLHk6dC5jbGllbnRZLHRhcmdldDplLnRhcmdldH0pO3c9dHJ1ZX19UCgidm1vdXNlb3V0IixlLGIpO3A9ZmFsc2U7TigpfWZ1bmN0aW9uIFcoZSl7dmFyIGI9JC5kYXRhKGUsYSksaztpZihiKXtmb3IoayBpbiBiKXtpZihiW2tdKXtyZXR1cm4gdHJ1ZX19fXJldHVybiBmYWxzZX1mdW5jdGlvbiBYKCl7fWZ1bmN0aW9uIFkoZSl7dmFyIGI9ZS5zdWJzdHIoMSk7cmV0dXJue3NldHVwOmZ1bmN0aW9uKGosayl7aWYoIVcodGhpcykpeyQuZGF0YSh0aGlzLGEse30pfXZhciBvPSQuZGF0YSh0aGlzLGEpO29bZV09dHJ1ZTtsW2VdPShsW2VdfHwwKSsxO2lmKGxbZV09PT0xKXtCLmJpbmQoYixSKX0kKHRoaXMpLmJpbmQoYixYKTtpZihBKXtsWyJ0b3VjaHN0YXJ0Il09KGxbInRvdWNoc3RhcnQiXXx8MCkrMTtpZihsWyJ0b3VjaHN0YXJ0Il09PT0xKXtCLmJpbmQoInRvdWNoc3RhcnQiLFMpLmJpbmQoInRvdWNoZW5kIixWKS5iaW5kKCJ0b3VjaG1vdmUiLFUpfX19LHRlYXJkb3duOmZ1bmN0aW9uKGosayl7LS1sW2VdO2lmKCFsW2VdKXtCLnVuYmluZChiLFIpfWlmKEEpey0tbFsidG91Y2hzdGFydCJdO2lmKCFsWyJ0b3VjaHN0YXJ0Il0pe0IudW5iaW5kKCJ0b3VjaHN0YXJ0IixTKS51bmJpbmQoInRvdWNobW92ZSIsVSkudW5iaW5kKCJ0b3VjaGVuZCIsVikudW5iaW5kKCJzY3JvbGwiLFQpfX12YXIgbz0kKHRoaXMpLHQ9JC5kYXRhKHRoaXMsYSk7aWYodCl7dFtlXT1mYWxzZX1vLnVuYmluZChiLFgpO2lmKCFXKHRoaXMpKXtvLnJlbW92ZURhdGEoYSl9fX19Zm9yKHZhciBpPTA7aTx2Lmxlbmd0aDtpKyspeyQuZXZlbnQuc3BlY2lhbFt2W2ldXT1ZKHZbaV0pfWlmKEEpe2Z1bmN0aW9uIFooZSl7dmFyIGI9cS5sZW5ndGgsdD1lLnRhcmdldCx4LHksaixpLG8saztpZihiKXt4PWUuY2xpZW50WDt5PWUuY2xpZW50WTtFPSQudm1vdXNlLmNsaWNrRGlzdGFuY2VUaHJlc2hvbGQ7aj10O3doaWxlKGope2ZvcihpPTA7aTxiO2krKyl7bz1xW2ldO2s9MDtpZigoaj09PXQmJk1hdGguYWJzKG8ueC14KTxFJiZNYXRoLmFicyhvLnkteSk8RSl8fCQuZGF0YShqLGMpPT09by50b3VjaElEKXtpZighZS5pc1N5bnRoZXRpYyl7ZS5fc2FwdWlfZGVsYXllZE1vdXNlRXZlbnQ9dHJ1ZX1pZih0PT09by50YXJnZXQpe3JldHVybn1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKTtyZXR1cm59fWo9ai5wYXJlbnROb2RlfX19O2YuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIixaLHRydWUpO2YuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsWix0cnVlKTtmLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixaLHRydWUpfX0pKFEsZCxmKTsoZnVuY3Rpb24oJCxkLHUpe3ZhciBhPSQoZik7JC5lYWNoKCgidG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgIisidGFwIHRhcGhvbGQgIisic3dpcGUgc3dpcGVsZWZ0IHN3aXBlcmlnaHQgIisic2Nyb2xsc3RhcnQgc2Nyb2xsc3RvcCIpLnNwbGl0KCIgIiksZnVuY3Rpb24oaSxuKXskLmZuW25dPWZ1bmN0aW9uKGgpe3JldHVybiBoP3RoaXMuYmluZChuLGgpOnRoaXMudHJpZ2dlcihuKX07aWYoJC5hdHRyRm4peyQuYXR0ckZuW25dPXRydWV9fSk7dmFyIHM9JC5tb2JpbGUuc3VwcG9ydC50b3VjaCxiPSJ0b3VjaG1vdmUgc2Nyb2xsIix0PXM/InRvdWNoc3RhcnQiOiJtb3VzZWRvd24iLGM9cz8idG91Y2hlbmQgdG91Y2hjYW5jZWwiOiJtb3VzZXVwIixlPXM/InRvdWNobW92ZSI6Im1vdXNlbW92ZSI7ZnVuY3Rpb24gZyhvLGgsaSl7dmFyIGo9aS50eXBlO2kudHlwZT1oOyQuZXZlbnQuZGlzcGF0Y2guY2FsbChvLGkpO2kudHlwZT1qfSQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydD17ZW5hYmxlZDp0cnVlLHNldHVwOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxpPSQoaCksaixrO2Z1bmN0aW9uIGwobSxuKXtqPW47ZyhoLGo/InNjcm9sbHN0YXJ0Ijoic2Nyb2xsc3RvcCIsbSl9aS5iaW5kKGIsZnVuY3Rpb24obSl7aWYoISQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkKXtyZXR1cm59aWYoIWope2wobSx0cnVlKX1jbGVhclRpbWVvdXQoayk7az1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bChtLGZhbHNlKX0sNTApfSl9fTskLmV2ZW50LnNwZWNpYWwudGFwPXt0YXBob2xkVGhyZXNob2xkOjc1MCxzZXR1cDpmdW5jdGlvbigpe3ZhciBoPXRoaXMsaT0kKGgpO2kuYmluZCgidm1vdXNlZG93biIsZnVuY3Rpb24oail7aWYoai53aGljaCYmai53aGljaCE9PTEpe3JldHVybiBmYWxzZX12YXIgbz1qLnRhcmdldCxrPWoub3JpZ2luYWxFdmVudCxsO2Z1bmN0aW9uIG0oKXtjbGVhclRpbWVvdXQobCl9ZnVuY3Rpb24gbigpe20oKTtpLnVuYmluZCgidmNsaWNrIixwKS51bmJpbmQoInZtb3VzZXVwIixtKTthLnVuYmluZCgidm1vdXNlY2FuY2VsIixuKX1mdW5jdGlvbiBwKGope24oKTtpZihvPT09ai50YXJnZXQpe2coaCwidGFwIixqKX19aS5iaW5kKCJ2bW91c2V1cCIsbSkuYmluZCgidmNsaWNrIixwKTthLmJpbmQoInZtb3VzZWNhbmNlbCIsbik7bD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZyhoLCJ0YXBob2xkIiwkLkV2ZW50KCJ0YXBob2xkIix7dGFyZ2V0Om99KSl9LCQuZXZlbnQuc3BlY2lhbC50YXAudGFwaG9sZFRocmVzaG9sZCl9KX19OyQuZXZlbnQuc3BlY2lhbC5zd2lwZT17c2Nyb2xsU3VwcmVzc2lvblRocmVzaG9sZDozMCxkdXJhdGlvblRocmVzaG9sZDoxMDAwLGhvcml6b250YWxEaXN0YW5jZVRocmVzaG9sZDozMCx2ZXJ0aWNhbERpc3RhbmNlVGhyZXNob2xkOjc1LHN0YXJ0OmZ1bmN0aW9uKGgpe3ZhciBpPWgub3JpZ2luYWxFdmVudC50b3VjaGVzP2gub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdOmg7cmV0dXJue3RpbWU6KG5ldyBEYXRlKCkpLmdldFRpbWUoKSxjb29yZHM6W2kucGFnZVgsaS5wYWdlWV0sb3JpZ2luOiQoaC50YXJnZXQpfX0sc3RvcDpmdW5jdGlvbihoKXt2YXIgaT1oLm9yaWdpbmFsRXZlbnQudG91Y2hlcz9oLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXTpoO3JldHVybnt0aW1lOihuZXcgRGF0ZSgpKS5nZXRUaW1lKCksY29vcmRzOltpLnBhZ2VYLGkucGFnZVldfX0saGFuZGxlU3dpcGU6ZnVuY3Rpb24oaCxpKXtpZihpLnRpbWUtaC50aW1lPCQuZXZlbnQuc3BlY2lhbC5zd2lwZS5kdXJhdGlvblRocmVzaG9sZCYmTWF0aC5hYnMoaC5jb29yZHNbMF0taS5jb29yZHNbMF0pPiQuZXZlbnQuc3BlY2lhbC5zd2lwZS5ob3Jpem9udGFsRGlzdGFuY2VUaHJlc2hvbGQmJk1hdGguYWJzKGguY29vcmRzWzFdLWkuY29vcmRzWzFdKTwkLmV2ZW50LnNwZWNpYWwuc3dpcGUudmVydGljYWxEaXN0YW5jZVRocmVzaG9sZCl7aC5vcmlnaW4udHJpZ2dlcigic3dpcGUiKS50cmlnZ2VyKGguY29vcmRzWzBdPmkuY29vcmRzWzBdPyJzd2lwZWxlZnQiOiJzd2lwZXJpZ2h0Iil9fSxzZXR1cDpmdW5jdGlvbigpe3ZhciBoPXRoaXMsaT0kKGgpO2kuYmluZCh0LGZ1bmN0aW9uKGope2lmKGouaXNNYXJrZWQoInN3aXBlc3RhcnRIYW5kbGVkIikpe3JldHVybn1qLnNldE1hcmtlZCgic3dpcGVzdGFydEhhbmRsZWQiKTt2YXIgaz0kLmV2ZW50LnNwZWNpYWwuc3dpcGUuc3RhcnQoaiksbDtmdW5jdGlvbiBtKGope2lmKCFrKXtyZXR1cm59bD0kLmV2ZW50LnNwZWNpYWwuc3dpcGUuc3RvcChqKTtpZighc2FwLnVpLkRldmljZS5zeXN0ZW0uZGVza3RvcHx8c2FwLnVpLkRldmljZS5icm93c2VyLm5hbWUhPT0iY3IiKXtpZihNYXRoLmFicyhrLmNvb3Jkc1swXS1sLmNvb3Jkc1swXSk+JC5ldmVudC5zcGVjaWFsLnN3aXBlLnNjcm9sbFN1cHJlc3Npb25UaHJlc2hvbGQpe2oucHJldmVudERlZmF1bHQoKX19fWZ1bmN0aW9uIG4oail7aS51bmJpbmQoZSxtKS51bmJpbmQoYyxuKTtpZihrJiZsKXskLmV2ZW50LnNwZWNpYWwuc3dpcGUuaGFuZGxlU3dpcGUoayxsKX1rPWw9dX1pLmJpbmQoZSxtKS5iaW5kKGMsbil9KX19OyQuZWFjaCh7c2Nyb2xsc3RvcDoic2Nyb2xsc3RhcnQiLHRhcGhvbGQ6InRhcCIsc3dpcGVsZWZ0OiJzd2lwZSIsc3dpcGVyaWdodDoic3dpcGUifSxmdW5jdGlvbihoLGkpeyQuZXZlbnQuc3BlY2lhbFtoXT17c2V0dXA6ZnVuY3Rpb24oKXskKHRoaXMpLmJpbmQoaSwkLm5vb3ApfX19KX0pKFEsdGhpcyl9KSk7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAtdWktY29yZS1hbGwnKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5EZXZpY2UnKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS50aGlyZHBhcnR5LlNlY29uZExldmVsRG9tYWlucycpO2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLnRoaXJkcGFydHkuVVJJJyk7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnkuanF1ZXJ5LTEuMTEuMScpO2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLnRoaXJkcGFydHkuanF1ZXJ5dWkuanF1ZXJ5LXVpLWNvcmUnKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS50aGlyZHBhcnR5LmpxdWVyeXVpLmpxdWVyeS11aS1kYXRlcGlja2VyJyk7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnl1aS5qcXVlcnktdWktcG9zaXRpb24nKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuZ2xvYmFsJyk7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnktbW9iaWxlLWN1c3RvbScpO2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAua2V5Y29kZXMnKSl7Ci8qIQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5rZXljb2RlcycpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAua2V5Y29kZXMiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7cS5zYXAuS2V5Q29kZXM9e0JBQ0tTUEFDRTo4LFRBQjo5LEVOVEVSOjEzLFNISUZUOjE2LENPTlRST0w6MTcsQUxUOjE4LEJSRUFLOjE5LENBUFNfTE9DSzoyMCxFU0NBUEU6MjcsU1BBQ0U6MzIsUEFHRV9VUDozMyxQQUdFX0RPV046MzQsRU5EOjM1LEhPTUU6MzYsQVJST1dfTEVGVDozNyxBUlJPV19VUDozOCxBUlJPV19SSUdIVDozOSxBUlJPV19ET1dOOjQwLFBSSU5UOjQ0LElOU0VSVDo0NSxERUxFVEU6NDYsRElHSVRfMDo0OCxESUdJVF8xOjQ5LERJR0lUXzI6NTAsRElHSVRfMzo1MSxESUdJVF80OjUyLERJR0lUXzU6NTMsRElHSVRfNjo1NCxESUdJVF83OjU1LERJR0lUXzg6NTYsRElHSVRfOTo1NyxBOjY1LEI6NjYsQzo2NyxEOjY4LEU6NjksRjo3MCxHOjcxLEg6NzIsSTo3MyxKOjc0LEs6NzUsTDo3NixNOjc3LE46NzgsTzo3OSxQOjgwLFE6ODEsUjo4MixTOjgzLFQ6ODQsVTo4NSxWOjg2LFc6ODcsWDo4OCxZOjg5LFo6OTAsV0lORE9XUzo5MSxDT05URVhUX01FTlU6OTMsVFVSTl9PRkY6OTQsU0xFRVA6OTUsTlVNUEFEXzA6OTYsTlVNUEFEXzE6OTcsTlVNUEFEXzI6OTgsTlVNUEFEXzM6OTksTlVNUEFEXzQ6MTAwLE5VTVBBRF81OjEwMSxOVU1QQURfNjoxMDIsTlVNUEFEXzc6MTAzLE5VTVBBRF84OjEwNCxOVU1QQURfOToxMDUsTlVNUEFEX0FTVEVSSVNLOjEwNixOVU1QQURfUExVUzoxMDcsTlVNUEFEX01JTlVTOjEwOSxOVU1QQURfQ09NTUE6MTEwLE5VTVBBRF9TTEFTSDoxMTEsRjE6MTEyLEYyOjExMyxGMzoxMTQsRjQ6MTE1LEY1OjExNixGNjoxMTcsRjc6MTE4LEY4OjExOSxGOToxMjAsRjEwOjEyMSxGMTE6MTIyLEYxMjoxMjMsTlVNX0xPQ0s6MTQ0LFNDUk9MTF9MT0NLOjE0NSxPUEVOX0JSQUNLRVQ6MTg2LFBMVVM6MTg3LENPTU1BOjE4OCxTTEFTSDoxODksRE9UOjE5MCxQSVBFOjE5MSxTRU1JQ09MT046MTkyLE1JTlVTOjIxOSxHUkVBVF9BQ0NFTlQ6MjIwLEVRVUFMUzoyMjEsU0lOR0xFX1FVT1RFOjIyMixCQUNLU0xBU0g6MjI2fTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLmxvZ2dlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoImpxdWVyeS5zYXAubG9nZ2VyIixmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuc2NyaXB0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5zY3JpcHQnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLnNjcmlwdCIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgST0wO3Euc2FwLnVpZD1mdW5jdGlvbiB1aWQoKXtyZXR1cm4iaWQtIituZXcgRGF0ZSgpLnZhbHVlT2YoKSsiLSIrSSsrfTtxLnNhcC5kZWxheWVkQ2FsbD1mdW5jdGlvbiBkZWxheWVkQ2FsbChkLG8sbSxwKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe2lmKHEudHlwZShtKT09InN0cmluZyIpe209b1ttXX1tLmFwcGx5KG8scHx8W10pfSxkKX07cS5zYXAuY2xlYXJEZWxheWVkQ2FsbD1mdW5jdGlvbiBjbGVhckRlbGF5ZWRDYWxsKGQpe2NsZWFyVGltZW91dChkKTtyZXR1cm4gdGhpc307cS5zYXAuaW50ZXJ2YWxDYWxsPWZ1bmN0aW9uIGludGVydmFsQ2FsbChpLG8sbSxwKXtyZXR1cm4gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtpZihxLnR5cGUobSk9PSJzdHJpbmciKXttPW9bbV19bS5hcHBseShvLHB8fFtdKX0saSl9O3Euc2FwLmNsZWFySW50ZXJ2YWxDYWxsPWZ1bmN0aW9uIGNsZWFySW50ZXJ2YWxDYWxsKGkpe2NsZWFySW50ZXJ2YWwoaSk7cmV0dXJuIHRoaXN9O3ZhciBVPWZ1bmN0aW9uKHUpe3RoaXMubVBhcmFtcz17fTt2YXIgUT11fHx3aW5kb3cubG9jYXRpb24uaHJlZjtpZihRLmluZGV4T2YoJyMnKT49MCl7UT1RLnNsaWNlKDAsUS5pbmRleE9mKCcjJykpfWlmKFEuaW5kZXhPZigiPyIpPj0wKXtRPVEuc2xpY2UoUS5pbmRleE9mKCI/IikrMSk7dmFyIHA9US5zcGxpdCgiJiIpLFA9e30sYSxuLHY7Zm9yKHZhciBpPTA7aTxwLmxlbmd0aDtpKyspe2E9cFtpXS5zcGxpdCgiPSIpO249ZGVjb2RlVVJJQ29tcG9uZW50KGFbMF0pO3Y9YS5sZW5ndGg+MT9kZWNvZGVVUklDb21wb25lbnQoYVsxXS5yZXBsYWNlKC9cKy9nLCcgJykpOiIiO2lmKG4pe2lmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoUCxuKSl7UFtuXT1bXX1QW25dLnB1c2godil9fXRoaXMubVBhcmFtcz1QfX07VS5wcm90b3R5cGU9e307VS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKG4sYSl7dmFyIHY9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMubVBhcmFtcyxuKT90aGlzLm1QYXJhbXNbbl06W107cmV0dXJuIGE9PT10cnVlP3Y6KHZbMF18fG51bGwpfTtxLnNhcC5nZXRVcmlQYXJhbWV0ZXJzPWZ1bmN0aW9uIGdldFVyaVBhcmFtZXRlcnModSl7cmV0dXJuIG5ldyBVKHUpfTtxLnNhcC51bmlxdWU9ZnVuY3Rpb24oYSl7dmFyIGw9YS5sZW5ndGg7aWYobD4xKXthLnNvcnQoKTtmb3IodmFyIGk9MSxqPTA7aTxsO2krKyl7aWYoYVtpXSE9PWFbal0pe2FbKytqXT1hW2ldfX1pZigrK2o8bCl7YS5zcGxpY2UoaixsLWopfX1yZXR1cm4gYX07cS5zYXAuZXF1YWw9ZnVuY3Rpb24oYSxiLG0sYyxkKXtpZih0eXBlb2YgbT09ImJvb2xlYW4iKXtjPW07bT11bmRlZmluZWR9aWYoIWQpZD0wO2lmKCFtKW09MTA7aWYoZD5tKXJldHVybiBmYWxzZTtpZihhPT09YilyZXR1cm4gdHJ1ZTtpZihxLmlzQXJyYXkoYSkmJnEuaXNBcnJheShiKSl7aWYoIWMpe2lmKGEubGVuZ3RoIT1iLmxlbmd0aCl7cmV0dXJuIGZhbHNlfX1lbHNle2lmKGEubGVuZ3RoPmIubGVuZ3RoKXtyZXR1cm4gZmFsc2V9fWZvcih2YXIgaT0wO2k8YS5sZW5ndGg7aSsrKXtpZighcS5zYXAuZXF1YWwoYVtpXSxiW2ldLG0sYyxkKzEpKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfWlmKHR5cGVvZiBhPT0ib2JqZWN0IiYmdHlwZW9mIGI9PSJvYmplY3QiKXtpZighYXx8IWIpe3JldHVybiBmYWxzZX1pZihhLmNvbnN0cnVjdG9yIT1iLmNvbnN0cnVjdG9yKXtyZXR1cm4gZmFsc2V9aWYoYS5ub2RlTmFtZSYmYi5ub2RlTmFtZSYmYS5uYW1lc3BhY2VVUkkmJmIubmFtZXNwYWNlVVJJKXtyZXR1cm4gcS5zYXAuaXNFcXVhbE5vZGUoYSxiKX1pZihhIGluc3RhbmNlb2YgRGF0ZSl7cmV0dXJuIGEudmFsdWVPZigpPT1iLnZhbHVlT2YoKX1mb3IodmFyIGkgaW4gYSl7aWYoIXEuc2FwLmVxdWFsKGFbaV0sYltpXSxtLGMsZCsxKSl7cmV0dXJuIGZhbHNlfX1pZighYyl7Zm9yKHZhciBpIGluIGIpe2lmKGFbaV09PT11bmRlZmluZWQpe3JldHVybiBmYWxzZX19fXJldHVybiB0cnVlfXJldHVybiBmYWxzZX07cS5zYXAuZWFjaD1mdW5jdGlvbihvLGMpe3ZhciBhPXEuaXNBcnJheShvKSxsLGk7aWYoYSl7Zm9yKGk9MCxsPW8ubGVuZ3RoO2k8bDtpKyspe2lmKGMuY2FsbChvW2ldLGksb1tpXSk9PT1mYWxzZSl7YnJlYWt9fX1lbHNle2ZvcihpIGluIG8pe2lmKGMuY2FsbChvW2ldLGksb1tpXSk9PT1mYWxzZSl7YnJlYWt9fX1yZXR1cm4gb307cS5zYXAuZm9ySW49e3RvU3RyaW5nOm51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCJ0b1N0cmluZyIpP2Z1bmN0aW9uKG8sYyl7Zm9yKHZhciBuIGluIG8pe2lmKGMobixvW25dKT09PWZhbHNlKXtyZXR1cm59fX06KGZ1bmN0aW9uKCl7dmFyIEQ9WyJ0b1N0cmluZyIsInZhbHVlT2YiLCJ0b0xvY2FsZVN0cmluZyIsImhhc093blByb3BlcnR5IiwiaXNQcm90b3R5cGVPZiIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiY29uc3RydWN0b3IiXSxhPUQubGVuZ3RoLG89T2JqZWN0LnByb3RvdHlwZSxoPW8uaGFzT3duUHJvcGVydHk7cmV0dXJuIGZ1bmN0aW9uKE8sYyl7dmFyIG4saTtmb3IobiBpbiBPKXtpZihjKG4sT1tuXSk9PT1mYWxzZSl7cmV0dXJufX1mb3IodmFyIGk9MDtpPGE7aSsrKXtuPURbaV07aWYoaC5jYWxsKE8sbil8fE9bbl0hPT1vW25dKXtpZihjKG4sT1tuXSk9PT1mYWxzZSl7cmV0dXJufX19fX0oKSk7cS5zYXAuYXJyYXlEaWZmPWZ1bmN0aW9uKG8sbixjKXtjPWN8fGZ1bmN0aW9uKHYsVil7cmV0dXJuIHEuc2FwLmVxdWFsKHYsVil9O3ZhciBPPVtdO3ZhciBOPVtdO3ZhciBtPVtdO2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXt2YXIgYT1uW2ldO3ZhciBmPTA7dmFyIHQ7Zm9yKHZhciBqPTA7ajxvLmxlbmd0aDtqKyspe2lmKGMob1tqXSxhKSl7ZisrO3Q9ajtpZihmPjEpe2JyZWFrfX19aWYoZj09MSl7dmFyIE09e29sZEluZGV4OnQsbmV3SW5kZXg6aX07aWYobVt0XSl7ZGVsZXRlIE9bdF07ZGVsZXRlIE5bbVt0XS5uZXdJbmRleF19ZWxzZXtOW2ldPXtkYXRhOm5baV0scm93OnR9O09bdF09e2RhdGE6b1t0XSxyb3c6aX07bVt0XT1NfX19Zm9yKHZhciBpPTA7aTxuLmxlbmd0aC0xO2krKyl7aWYoTltpXSYmIU5baSsxXSYmTltpXS5yb3crMTxvLmxlbmd0aCYmIU9bTltpXS5yb3crMV0mJmMob1tOW2ldLnJvdysxXSxuW2krMV0pKXtOW2krMV09e2RhdGE6bltpKzFdLHJvdzpOW2ldLnJvdysxfTtPW05baV0ucm93KzFdPXtkYXRhOk9bTltpXS5yb3crMV0scm93OmkrMX19fWZvcih2YXIgaT1uLmxlbmd0aC0xO2k+MDtpLS0pe2lmKE5baV0mJiFOW2ktMV0mJk5baV0ucm93PjAmJiFPW05baV0ucm93LTFdJiZjKG9bTltpXS5yb3ctMV0sbltpLTFdKSl7TltpLTFdPXtkYXRhOm5baS0xXSxyb3c6TltpXS5yb3ctMX07T1tOW2ldLnJvdy0xXT17ZGF0YTpPW05baV0ucm93LTFdLHJvdzppLTF9fX12YXIgZD1bXTtpZihuLmxlbmd0aD09MCl7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe2QucHVzaCh7aW5kZXg6MCx0eXBlOidkZWxldGUnfSl9fWVsc2V7dmFyIGI9MDtpZighT1swXSl7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aCYmIU9baV07aSsrKXtkLnB1c2goe2luZGV4OjAsdHlwZTonZGVsZXRlJ30pO2I9aSsxfX1mb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl7aWYoIU5baV18fE5baV0ucm93PmIpe2QucHVzaCh7aW5kZXg6aSx0eXBlOidpbnNlcnQnfSl9ZWxzZXtiPU5baV0ucm93KzE7Zm9yKHZhciBqPU5baV0ucm93KzE7ajxvLmxlbmd0aCYmKCFPW2pdfHxPW2pdLnJvdzxpKTtqKyspe2QucHVzaCh7aW5kZXg6aSsxLHR5cGU6J2RlbGV0ZSd9KTtiPWorMX19fX1yZXR1cm4gZH07cS5zYXAucGFyc2VKUz0oZnVuY3Rpb24oKXt2YXIgYSxiLGU9eyciJzonIicsJ1wnJzonXCcnLCdcXCc6J1xcJywnLyc6Jy8nLGI6J1xiJyxmOidcZicsbjonXG4nLHI6J1xyJyx0OidcdCd9LHQsZD1mdW5jdGlvbihtKXt0aHJvd3tuYW1lOidTeW50YXhFcnJvcicsbWVzc2FnZTptLGF0OmEsdGV4dDp0fX0sbj1mdW5jdGlvbihjKXtpZihjJiZjIT09Yil7ZCgiRXhwZWN0ZWQgJyIrYysiJyBpbnN0ZWFkIG9mICciK2IrIiciKX1iPXQuY2hhckF0KGEpO2ErPTE7cmV0dXJuIGJ9LGY9ZnVuY3Rpb24oKXt2YXIgZixzPScnO2lmKGI9PT0nLScpe3M9Jy0nO24oJy0nKX13aGlsZShiPj0nMCcmJmI8PSc5Jyl7cys9YjtuKCl9aWYoYj09PScuJyl7cys9Jy4nO3doaWxlKG4oKSYmYj49JzAnJiZiPD0nOScpe3MrPWJ9fWlmKGI9PT0nZSd8fGI9PT0nRScpe3MrPWI7bigpO2lmKGI9PT0nLSd8fGI9PT0nKycpe3MrPWI7bigpfXdoaWxlKGI+PScwJyYmYjw9JzknKXtzKz1iO24oKX19Zj0rcztpZighaXNGaW5pdGUoZikpe2QoIkJhZCBudW1iZXIiKX1lbHNle3JldHVybiBmfX0scz1mdW5jdGlvbigpe3ZhciBjLGkscz0nJyxrLHU7aWYoYj09PSciJ3x8Yj09PSdcJycpe2s9Yjt3aGlsZShuKCkpe2lmKGI9PT1rKXtuKCk7cmV0dXJuIHN9aWYoYj09PSdcXCcpe24oKTtpZihiPT09J3UnKXt1PTA7Zm9yKGk9MDtpPDQ7aSs9MSl7Yz1wYXJzZUludChuKCksMTYpO2lmKCFpc0Zpbml0ZShjKSl7YnJlYWt9dT11KjE2K2N9cys9U3RyaW5nLmZyb21DaGFyQ29kZSh1KX1lbHNlIGlmKHR5cGVvZiBlW2JdPT09J3N0cmluZycpe3MrPWVbYl19ZWxzZXticmVha319ZWxzZXtzKz1ifX19ZCgiQmFkIHN0cmluZyIpfSxnPWZ1bmN0aW9uKCl7dmFyIGc9JycsYyxpPWZ1bmN0aW9uKGIpe3JldHVybiBiPT09Il8ifHwoYj49IjAiJiZiPD0iOSIpfHwoYj49ImEiJiZiPD0ieiIpfHwoYj49IkEiJiZiPD0iWiIpfTtpZihpKGIpKXtnKz1ifWVsc2V7ZCgiQmFkIG5hbWUiKX13aGlsZShuKCkpe2lmKGI9PT0nICcpe24oKTtyZXR1cm4gZ31pZihiPT09JzonKXtyZXR1cm4gZ31pZihpKGIpKXtnKz1ifWVsc2V7ZCgiQmFkIG5hbWUiKX19ZCgiQmFkIG5hbWUiKX0sdz1mdW5jdGlvbigpe3doaWxlKGImJmI8PScgJyl7bigpfX0saD1mdW5jdGlvbigpe3N3aXRjaChiKXtjYXNlJ3QnOm4oJ3QnKTtuKCdyJyk7bigndScpO24oJ2UnKTtyZXR1cm4gdHJ1ZTtjYXNlJ2YnOm4oJ2YnKTtuKCdhJyk7bignbCcpO24oJ3MnKTtuKCdlJyk7cmV0dXJuIGZhbHNlO2Nhc2Unbic6bignbicpO24oJ3UnKTtuKCdsJyk7bignbCcpO3JldHVybiBudWxsfWQoIlVuZXhwZWN0ZWQgJyIrYisiJyIpfSx2LGo9ZnVuY3Rpb24oKXt2YXIgaj1bXTtpZihiPT09J1snKXtuKCdbJyk7dygpO2lmKGI9PT0nXScpe24oJ10nKTtyZXR1cm4gan13aGlsZShiKXtqLnB1c2godigpKTt3KCk7aWYoYj09PSddJyl7bignXScpO3JldHVybiBqfW4oJywnKTt3KCl9fWQoIkJhZCBhcnJheSIpfSxvPWZ1bmN0aW9uKCl7dmFyIGssbz17fTtpZihiPT09J3snKXtuKCd7Jyk7dygpO2lmKGI9PT0nfScpe24oJ30nKTtyZXR1cm4gb313aGlsZShiKXtpZihiPj0iMCImJmI8PSI5Iil7az1mKCl9ZWxzZSBpZihiPT09JyInfHxiPT09J1wnJyl7az1zKCl9ZWxzZXtrPWcoKX13KCk7bignOicpO2lmKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8saykpe2QoJ0R1cGxpY2F0ZSBrZXkgIicraysnIicpfW9ba109digpO3coKTtpZihiPT09J30nKXtuKCd9Jyk7cmV0dXJuIG99bignLCcpO3coKX19ZCgiQmFkIG9iamVjdCIpfTt2PWZ1bmN0aW9uKCl7dygpO3N3aXRjaChiKXtjYXNlJ3snOnJldHVybiBvKCk7Y2FzZSdbJzpyZXR1cm4gaigpO2Nhc2UnIic6Y2FzZSdcJyc6cmV0dXJuIHMoKTtjYXNlJy0nOnJldHVybiBmKCk7ZGVmYXVsdDpyZXR1cm4gYj49JzAnJiZiPD0nOSc/ZigpOmgoKX19O3JldHVybiBmdW5jdGlvbihjLGkpe3ZhciByO3Q9YzthPWl8fDA7Yj0nICc7cj12KCk7aWYoaXNOYU4oaSkpe3coKTtpZihiKXtkKCJTeW50YXggZXJyb3IiKX1yZXR1cm4gcn1lbHNle3JldHVybntyZXN1bHQ6cixhdDphLTF9fX19KCkpO3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuc2pheCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuc2pheCcpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuc2pheCIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjtxLnNhcC5zamF4U2V0dGluZ3M9e2NvbXBsZXhSZXN1bHQ6dHJ1ZSxmYWxsYmFjazp1bmRlZmluZWR9O3Euc2FwLnNqYXg9ZnVuY3Rpb24gc2pheChvKXt2YXIgcz1xLmV4dGVuZCh0cnVlLHt9LHEuc2FwLnNqYXhTZXR0aW5ncyxvLHthc3luYzpmYWxzZSxzdWNjZXNzOmZ1bmN0aW9uKGQsdCx4KXtyPXtzdWNjZXNzOnRydWUsZGF0YTpkLHN0YXR1czp0LHN0YXR1c0NvZGU6eCYmeC5zdGF0dXN9fSxlcnJvcjpmdW5jdGlvbih4LHQsZSl7cj17c3VjY2VzczpmYWxzZSxkYXRhOnVuZGVmaW5lZCxzdGF0dXM6dCxlcnJvcjplLHN0YXR1c0NvZGU6eC5zdGF0dXN9fX0pO3ZhciByPXVuZGVmaW5lZDtxLmFqYXgocyk7aWYoIXMuY29tcGxleFJlc3VsdCl7cmV0dXJuIHIuc3VjY2Vzcz9yLmRhdGE6cy5mYWxsYmFja31yZXR1cm4gcn07cS5zYXAuc3luY0hlYWQ9ZnVuY3Rpb24odSl7cmV0dXJuIHEuc2FwLnNqYXgoe3R5cGU6J0hFQUQnLHVybDp1fSkuc3VjY2Vzc307cS5zYXAuc3luY0dldD1mdW5jdGlvbiBzeW5jR2V0KHUsZCxEKXtyZXR1cm4gcS5zYXAuc2pheCh7dXJsOnUsZGF0YTpkLHR5cGU6J0dFVCcsZGF0YVR5cGU6RHx8J3RleHQnfSl9O3Euc2FwLnN5bmNQb3N0PWZ1bmN0aW9uIHN5bmNQb3N0KHUsZCxEKXtyZXR1cm4gcS5zYXAuc2pheCh7dXJsOnUsZGF0YTpkLHR5cGU6J1BPU1QnLGRhdGFUeXBlOkR8fCd0ZXh0J30pfTtxLnNhcC5zeW5jR2V0VGV4dD1mdW5jdGlvbiBzeW5jR2V0VGV4dCh1LGQsZil7cmV0dXJuIHEuc2FwLnNqYXgoe3VybDp1LGRhdGE6ZCx0eXBlOidHRVQnLGRhdGFUeXBlOid0ZXh0JyxmYWxsYmFjazpmLGNvbXBsZXhSZXN1bHQ6KGFyZ3VtZW50cy5sZW5ndGg8Myl9KX07cS5zYXAuc3luY0dldEpTT049ZnVuY3Rpb24gc3luY0dldEpTT04odSxkLGYpe3JldHVybiBxLnNhcC5zamF4KHt1cmw6dSxkYXRhOmR8fG51bGwsdHlwZTonR0VUJyxkYXRhVHlwZTonanNvbicsZmFsbGJhY2s6Zixjb21wbGV4UmVzdWx0Oihhcmd1bWVudHMubGVuZ3RoPDMpfSl9O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuc3RvcmFnZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuc3RvcmFnZScpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuc3RvcmFnZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgcz0hISh3aW5kb3cuSlNPTiYmSlNPTi5wYXJzZSYmSlNPTi5zdHJpbmdpZnkpO3ZhciBTPSJzdGF0ZS5rZXlfIjt2YXIgZj1mdW5jdGlvbihhLGIpe3ZhciB0PSJ1bmtub3duIjt2YXIgUD1ifHxTO1ArPSItIjt2YXIgbztpZighb3x8dHlwZW9mKGEpPT09InN0cmluZyIpe3Q9YXx8InNlc3Npb24iO3RyeXtvPXdpbmRvd1t0KyJTdG9yYWdlIl19Y2F0Y2goZSl7bz1udWxsfX1lbHNlIGlmKHR5cGVvZihhKT09PU9iamVjdCl7dD1hLmdldFR5cGU/YS5nZXRUeXBlKCk6InVua25vd24iO289YX12YXIgYz0hIW87dGhpcy5wdXQ9ZnVuY3Rpb24oaSxkKXtpZihjJiZpKXt0cnl7by5zZXRJdGVtKFAraSxzP0pTT04uc3RyaW5naWZ5KGQpOmQpO3JldHVybiB0cnVlfWNhdGNoKGUpe3JldHVybiBmYWxzZX19ZWxzZXtyZXR1cm4gZmFsc2V9fTt0aGlzLmdldD1mdW5jdGlvbihpKXtpZihjJiZpKXt0cnl7dmFyIEk9by5nZXRJdGVtKFAraSk7cmV0dXJuIHM/SlNPTi5wYXJzZShJKTpJfWNhdGNoKGUpe3JldHVybiBudWxsfX1lbHNle3JldHVybiBudWxsfX07dGhpcy5yZW1vdmU9ZnVuY3Rpb24oaSl7aWYoYyYmaSl7dHJ5e28ucmVtb3ZlSXRlbShQK2kpO3JldHVybiB0cnVlfWNhdGNoKGUpe3JldHVybiBmYWxzZX19ZWxzZXtyZXR1cm4gZmFsc2V9fTt0aGlzLnJlbW92ZUFsbD1mdW5jdGlvbihJKXtpZihjJiZvLmxlbmd0aCYmdHlwZW9mKG8ua2V5KT09PSJmdW5jdGlvbiIpe3RyeXt2YXIgbD1vLmxlbmd0aDt2YXIgaz1bXTt2YXIgZCxpO3ZhciBwPVArKEl8fCIiKTtmb3IoaT0wO2k8bDtpKyspe2Q9by5rZXkoaSk7aWYoZCYmZC5pbmRleE9mKHApPT0wKXtrLnB1c2goZCl9fWZvcihpPTA7aTxrLmxlbmd0aDtpKyspe28ucmVtb3ZlSXRlbShrW2ldKX1yZXR1cm4gdHJ1ZX1jYXRjaChlKXtyZXR1cm4gZmFsc2V9fWVsc2V7cmV0dXJuIGZhbHNlfX07dGhpcy5jbGVhcj1mdW5jdGlvbigpe2lmKGMpe3RyeXtvLmNsZWFyKCk7cmV0dXJuIHRydWV9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMuZ2V0VHlwZT1mdW5jdGlvbigpe3JldHVybiB0fX07dmFyIG09e307cS5zYXAuc3RvcmFnZT1mdW5jdGlvbihvLGkpe2lmKCFvKXtvPXEuc2FwLnN0b3JhZ2UuVHlwZS5zZXNzaW9ufWlmKHR5cGVvZihvKT09PSJzdHJpbmciJiZxLnNhcC5zdG9yYWdlLlR5cGVbb10pe3ZhciBrPW87aWYoaSYmaSE9Uyl7az1vKyJfIitpfXJldHVybiBtW2tdfHwobVtrXT1uZXcgZihvLGkpKX1yZXR1cm4gbmV3IGYobyxpKX07cS5zYXAuc3RvcmFnZS5UeXBlPXtsb2NhbDoibG9jYWwiLHNlc3Npb246InNlc3Npb24iLGdsb2JhbDoiZ2xvYmFsIn07Zi5hcHBseShxLnNhcC5zdG9yYWdlKTttW3Euc2FwLnN0b3JhZ2UuVHlwZS5zZXNzaW9uXT1xLnNhcC5zdG9yYWdlO3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuc3RyaW5ncycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuc3RyaW5ncycpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuc3RyaW5ncyIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjtxLnNhcC5lbmRzV2l0aD1mdW5jdGlvbiBlbmRzV2l0aChzLGUpe2lmKHR5cGVvZihlKSE9InN0cmluZyJ8fGU9PSIiKXtyZXR1cm4gZmFsc2V9dmFyIHA9cy5sYXN0SW5kZXhPZihlKTtyZXR1cm4gcD49MCYmcD09cy5sZW5ndGgtZS5sZW5ndGh9O3Euc2FwLmVuZHNXaXRoSWdub3JlQ2FzZT1mdW5jdGlvbiBlbmRzV2l0aElnbm9yZUNhc2UocyxlKXtpZih0eXBlb2YoZSkhPSJzdHJpbmcifHxlPT0iIil7cmV0dXJuIGZhbHNlfXM9cy50b1VwcGVyQ2FzZSgpO2U9ZS50b1VwcGVyQ2FzZSgpO3JldHVybiBxLnNhcC5lbmRzV2l0aChzLGUpfTtxLnNhcC5zdGFydHNXaXRoPWZ1bmN0aW9uIHN0YXJ0c1dpdGgocyxTKXtpZih0eXBlb2YoUykhPSJzdHJpbmcifHxTPT0iIil7cmV0dXJuIGZhbHNlfWlmKHM9PVMpe3JldHVybiB0cnVlfXJldHVybiBzLmluZGV4T2YoUyk9PTB9O3Euc2FwLnN0YXJ0c1dpdGhJZ25vcmVDYXNlPWZ1bmN0aW9uIHN0YXJ0c1dpdGhJZ25vcmVDYXNlKHMsUyl7aWYodHlwZW9mKFMpIT0ic3RyaW5nInx8Uz09IiIpe3JldHVybiBmYWxzZX1zPXMudG9VcHBlckNhc2UoKTtTPVMudG9VcHBlckNhc2UoKTtyZXR1cm4gcS5zYXAuc3RhcnRzV2l0aChzLFMpfTtxLnNhcC5jaGFyVG9VcHBlckNhc2U9ZnVuY3Rpb24gY2hhclRvVXBwZXJDYXNlKHMscCl7aWYoIXMpe3JldHVybiBzfWlmKCFwfHxpc05hTihwKXx8cDw9MHx8cD49cy5sZW5ndGgpe3A9MH12YXIgQz1zLmNoYXJBdChwKS50b1VwcGVyQ2FzZSgpO2lmKHA+MCl7cmV0dXJuIHMuc3Vic3RyaW5nKDAscCkrQytzLnN1YnN0cmluZyhwKzEpfXJldHVybiBDK3Muc3Vic3RyaW5nKHArMSl9O3Euc2FwLnBhZExlZnQ9ZnVuY3Rpb24gcGFkTGVmdChzLHAsbCl7aWYoIXMpe3M9IiJ9d2hpbGUocy5sZW5ndGg8bCl7cz1wK3N9cmV0dXJuIHN9O3Euc2FwLnBhZFJpZ2h0PWZ1bmN0aW9uIHBhZFJpZ2h0KHMscCxsKXtpZighcyl7cz0iIn13aGlsZShzLmxlbmd0aDxsKXtzPXMrcH1yZXR1cm4gc307dmFyIHI9Ly0oLikvaWc7cS5zYXAuY2FtZWxDYXNlPWZ1bmN0aW9uIGNhbWVsQ2FzZShzKXtyZXR1cm4gcy5yZXBsYWNlKHIsZnVuY3Rpb24obSxDKXtyZXR1cm4gQy50b1VwcGVyQ2FzZSgpfSl9O3ZhciBhPS8oW0EtWl0pL2c7cS5zYXAuaHlwaGVuPWZ1bmN0aW9uIGh5cGhlbihzKXtyZXR1cm4gcy5yZXBsYWNlKGEsZnVuY3Rpb24obSxDKXtyZXR1cm4iLSIrQy50b0xvd2VyQ2FzZSgpfSl9O3ZhciBiPS9bLVtcXXt9KCkqKz8uLFxcXiR8I1xzXS9nO3Euc2FwLmVzY2FwZVJlZ0V4cD1mdW5jdGlvbiBlc2NhcGVSZWdFeHAocyl7cmV0dXJuIHMucmVwbGFjZShiLCJcXCQmIil9O3Euc2FwLmZvcm1hdE1lc3NhZ2U9ZnVuY3Rpb24gZm9ybWF0TWVzc2FnZShwLHYpe2lmKGFyZ3VtZW50cy5sZW5ndGg+Mnx8KHYhPW51bGwmJiFxLmlzQXJyYXkodikpKXt2PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKX12PXZ8fFtdO3JldHVybiBwLnJlcGxhY2UoYyxmdW5jdGlvbigkLGQsZSxmLG8pe2lmKGQpe3JldHVybiInIn1lbHNlIGlmKGUpe3JldHVybiBlLnJlcGxhY2UoLycnL2csIiciKX1lbHNlIGlmKGYpe3JldHVybiBTdHJpbmcodltwYXJzZUludChmLDEwKV0pfXRocm93IG5ldyBFcnJvcigiZm9ybWF0TWVzc2FnZTogcGF0dGVybiBzeW50YXggZXJyb3IgYXQgcG9zLiAiK28pfSl9O3ZhciBjPS8oJycpfCcoW14nXSsoPzonJ1teJ10qKSopKD86J3wkKXxceyhbMC05XSsoPzpccyosW157fV0qKT8pXH18W3t9XS9nO3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAueG1sJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC54bWwnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLnhtbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9EZXZpY2UnXSxmdW5jdGlvbihxLEQpeyJ1c2Ugc3RyaWN0IjtxLnNhcC5wYXJzZVhNTD1mdW5jdGlvbiBwYXJzZVhNTCh4KXt2YXIgWDtpZih3aW5kb3cuRE9NUGFyc2VyKXt2YXIgcD1uZXcgRE9NUGFyc2VyKCk7dHJ5e1g9cC5wYXJzZUZyb21TdHJpbmcoeCwidGV4dC94bWwiKX1jYXRjaChlKXt2YXIgUD1xLnNhcC5nZXRQYXJzZUVycm9yKFgpO1g9e307UC5yZWFzb249ZS5tZXNzYWdlO1gucGFyc2VFcnJvcj1QO3JldHVybiBYfX1lbHNle1g9bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKTtYLmFzeW5jPWZhbHNlO1gubG9hZFhNTCh4KX12YXIgUD1xLnNhcC5nZXRQYXJzZUVycm9yKFgpO2lmKFApe2lmKCFYLnBhcnNlRXJyb3Ipe1gucGFyc2VFcnJvcj1QfX1yZXR1cm4gWH07cS5zYXAuc2VyaWFsaXplWE1MPWZ1bmN0aW9uIHNlcmlhbGl6ZVhNTCh4KXt2YXIgWD0iIjtpZih3aW5kb3cuQWN0aXZlWE9iamVjdCl7WD14LnhtbDtpZihYKXtyZXR1cm4gWH19aWYod2luZG93LlhNTFNlcmlhbGl6ZXIpe3ZhciBzPW5ldyBYTUxTZXJpYWxpemVyKCk7WD1zLnNlcmlhbGl6ZVRvU3RyaW5nKHgpfXJldHVybiBYfTtxLnNhcC5pc0VxdWFsTm9kZT1mdW5jdGlvbihuLE4pe2lmKG49PT1OKXJldHVybiB0cnVlO2lmKCFufHwhTilyZXR1cm4gZmFsc2U7aWYobi5pc0VxdWFsTm9kZSl7cmV0dXJuIG4uaXNFcXVhbE5vZGUoTil9aWYobi5ub2RlVHlwZSE9Ti5ub2RlVHlwZSlyZXR1cm4gZmFsc2U7aWYobi5ub2RlVmFsdWUhPU4ubm9kZVZhbHVlKXJldHVybiBmYWxzZTtpZihuLmJhc2VOYW1lIT1OLmJhc2VOYW1lKXJldHVybiBmYWxzZTtpZihuLm5vZGVOYW1lIT1OLm5vZGVOYW1lKXJldHVybiBmYWxzZTtpZihuLm5hbWVTcGFjZVVSSSE9Ti5uYW1lU3BhY2VVUkkpcmV0dXJuIGZhbHNlO2lmKG4ucHJlZml4IT1OLnByZWZpeClyZXR1cm4gZmFsc2U7aWYobi5ub2RlVHlwZSE9MSlyZXR1cm4gdHJ1ZTtpZihuLmF0dHJpYnV0ZXMubGVuZ3RoIT1OLmF0dHJpYnV0ZXMubGVuZ3RoKXJldHVybiBmYWxzZTtmb3IodmFyIGk9MDtpPG4uYXR0cmlidXRlcy5sZW5ndGg7aSsrKXtpZighcS5zYXAuaXNFcXVhbE5vZGUobi5hdHRyaWJ1dGVzW2ldLE4uYXR0cmlidXRlc1tpXSkpe3JldHVybiBmYWxzZX19aWYobi5jaGlsZE5vZGVzLmxlbmd0aCE9Ti5jaGlsZE5vZGVzLmxlbmd0aClyZXR1cm4gZmFsc2U7Zm9yKHZhciBpPTA7aTxuLmNoaWxkTm9kZXMubGVuZ3RoO2krKyl7aWYoIXEuc2FwLmlzRXF1YWxOb2RlKG4uY2hpbGROb2Rlc1tpXSxOLmNoaWxkTm9kZXNbaV0pKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfTtxLnNhcC5nZXRQYXJzZUVycm9yPWZ1bmN0aW9uIGdldFBhcnNlRXJyb3IoZCl7dmFyIHA9e2Vycm9yQ29kZTotMSx1cmw6IiIscmVhc29uOiJ1bmtub3duIGVycm9yIixzcmNUZXh0OiIiLGxpbmU6LTEsbGluZXBvczotMSxmaWxlcG9zOi0xfTtpZighIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmZCYmZC5wYXJzZUVycm9yJiZkLnBhcnNlRXJyb3IuZXJyb3JDb2RlIT0wKXtyZXR1cm4gZC5wYXJzZUVycm9yfWlmKCEhRC5icm93c2VyLmZpcmVmb3gmJmQmJmQuZG9jdW1lbnRFbGVtZW50JiZkLmRvY3VtZW50RWxlbWVudC50YWdOYW1lPT0icGFyc2VyZXJyb3IiKXt2YXIgZT1kLmRvY3VtZW50RWxlbWVudC5maXJzdENoaWxkLm5vZGVWYWx1ZSxyPS9YTUwgUGFyc2luZyBFcnJvcjogKC4qKVxuTG9jYXRpb246ICguKilcbkxpbmUgTnVtYmVyIChcZCspLCBDb2x1bW4gKFxkKyk6KC4qKS87aWYoci50ZXN0KGUpKXtwLnJlYXNvbj1SZWdFeHAuJDE7cC51cmw9UmVnRXhwLiQyO3AubGluZT1wYXJzZUludChSZWdFeHAuJDMsMTApO3AubGluZXBvcz1wYXJzZUludChSZWdFeHAuJDQsMTApO3Auc3JjVGV4dD1SZWdFeHAuJDV9cmV0dXJuIHB9aWYoISFELmJyb3dzZXIud2Via2l0JiZkJiZkLmRvY3VtZW50RWxlbWVudCYmZC5kb2N1bWVudEVsZW1lbnQudGFnTmFtZT09Imh0bWwiJiZkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aD4wKXt2YXIgZT1xLnNhcC5zZXJpYWxpemVYTUwoZCkscj0vZXJyb3Igb24gbGluZSAoXGQrKSBhdCBjb2x1bW4gKFxkKyk6IChbXjxdKikvO2lmKHIudGVzdChlKSl7cC5yZWFzb249UmVnRXhwLiQzO3AudXJsPSIiO3AubGluZT1wYXJzZUludChSZWdFeHAuJDEsMTApO3AubGluZXBvcz1wYXJzZUludChSZWdFeHAuJDIsMTApO3Auc3JjVGV4dD0iIn1yZXR1cm4gcH1pZighZHx8IWQuZG9jdW1lbnRFbGVtZW50KXtyZXR1cm4gcH1yZXR1cm57ZXJyb3JDb2RlOjB9fTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5CaW5kaW5nUGFyc2VyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuQmluZGluZ1BhcnNlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL0JpbmRpbmdQYXJzZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj0vXlx7XHMqW2EtekEtWl9dW2EtekEtWjAtOV9dKlxzKjovO3ZhciBhPS8oXFxbXFxce1x9XSl8KFx7KS9nO3ZhciBiPS8oW1xcXHtcfV0pL2c7ZnVuY3Rpb24gYyhmKXt2YXIgRj1mdW5jdGlvbih2KXt2YXIgUj1bXSxsPWYubGVuZ3RoLGk7Zm9yKGk9MDtpPGw7aSsrKXtpZih0eXBlb2YgZltpXT09PSJudW1iZXIiKXtSLnB1c2goYXJndW1lbnRzW2ZbaV1dKX1lbHNle1IucHVzaChmW2ldKX19cmV0dXJuIFIuam9pbignJyl9O0YudGV4dEZyYWdtZW50cz1mO3JldHVybiBGfWZ1bmN0aW9uIGQocCl7dmFyIFA9cC5pbmRleE9mKCI+Iiksbz17cGF0aDpwfTtpZihQPjApe28ubW9kZWw9cC5zbGljZSgwLFApO28ucGF0aD1wLnNsaWNlKFArMSl9cmV0dXJuIG99dmFyIEI9e307Qi5fa2VlcEJpbmRpbmdTdHJpbmdzPWZhbHNlO0Iuc2ltcGxlUGFyc2VyPWZ1bmN0aW9uKHMsQyl7aWYocS5zYXAuc3RhcnRzV2l0aChzLCJ7IikmJnEuc2FwLmVuZHNXaXRoKHMsIn0iKSl7cmV0dXJuIGQocy5zbGljZSgxLC0xKSl9fTtCLnNpbXBsZVBhcnNlci5lc2NhcGU9ZnVuY3Rpb24odil7cmV0dXJuIHZ9O0IuY29tcGxleFBhcnNlcj1mdW5jdGlvbihzLEMsdSl7dmFyIGU9cS5zYXAucGFyc2VKUyxmPXtwYXJ0czpbXX0sRj1bXSxVLFAscD0wLG0sZztmdW5jdGlvbiBoKG8sayl7aWYodHlwZW9mIG9ba109PT0ic3RyaW5nIil7dmFyIG49b1trXTtpZihxLnNhcC5zdGFydHNXaXRoKG9ba10sIi4iKSl7b1trXT1xLnByb3h5KHEuc2FwLmdldE9iamVjdChvW2tdLnNsaWNlKDEpLHVuZGVmaW5lZCxDKSxDKX1lbHNle29ba109cS5zYXAuZ2V0T2JqZWN0KG9ba10pfWlmKHR5cGVvZihvW2tdKSE9PSJmdW5jdGlvbiIpe3Euc2FwLmxvZy5lcnJvcihrKyIgZnVuY3Rpb24gIituKyIgbm90IGZvdW5kISIpfX19ZnVuY3Rpb24gaShvLGspe3ZhciBsO2lmKHR5cGVvZiBvW2tdPT09InN0cmluZyIpe2lmKHEuc2FwLnN0YXJ0c1dpdGgob1trXSwiLiIpKXtsPXEuc2FwLmdldE9iamVjdChvW2tdLnNsaWNlKDEpLHVuZGVmaW5lZCxDKX1lbHNle2w9cS5zYXAuZ2V0T2JqZWN0KG9ba10pfWlmKHR5cGVvZiBsPT09ImZ1bmN0aW9uIil7b1trXT1uZXcgbChvLmZvcm1hdE9wdGlvbnMsby5jb25zdHJhaW50cyl9ZWxzZXtvW2tdPWx9ZGVsZXRlIG8uZm9ybWF0T3B0aW9ucztkZWxldGUgby5jb25zdHJhaW50c319ZnVuY3Rpb24gaihvLGssbCl7dmFyIG47aWYoISh0eXBlb2Ygb1trXT09PSJvYmplY3QifHxxLmlzQXJyYXkob1trXSkpKXtyZXR1cm59aWYocS5pc0FycmF5KG9ba10pKXtxLmVhY2gob1trXSxmdW5jdGlvbihJLE8pe2oob1trXSxJLGspfSl9ZWxzZXtpZihrPT09ImZpbHRlcnMifHxsPT09ImZpbHRlcnMiKXtuPXEuc2FwLmdldE9iamVjdCgic2FwLnVpLm1vZGVsLkZpbHRlciIpfWVsc2UgaWYoaz09PSJzb3J0ZXIifHxsPT09InNvcnRlciIpe249cS5zYXAuZ2V0T2JqZWN0KCJzYXAudWkubW9kZWwuU29ydGVyIik7aChvW2tdLCJncm91cCIpfWlmKG4pe29ba109bmV3IG4ob1trXSl9fX13aGlsZShtPWEuZXhlYyhzKSl7aWYocDxtLmluZGV4KXtGLnB1c2gocy5zbGljZShwLG0uaW5kZXgpKX1pZihtWzFdKXtGLnB1c2gobVsxXS5zbGljZSgxKSk7VT10cnVlfWVsc2V7aWYoci50ZXN0KHMuc2xpY2UobS5pbmRleCkpKXtQPWUocyxtLmluZGV4KTtpKFAucmVzdWx0LCd0eXBlJyk7aihQLnJlc3VsdCwnZmlsdGVycycpO2ooUC5yZXN1bHQsJ3NvcnRlcicpO2goUC5yZXN1bHQsJ2Zvcm1hdHRlcicpO2goUC5yZXN1bHQsJ2ZhY3RvcnknKTtGLnB1c2goZi5wYXJ0cy5sZW5ndGgpO2YucGFydHMucHVzaChQLnJlc3VsdCk7YS5sYXN0SW5kZXg9UC5hdH1lbHNle2c9cy5pbmRleE9mKCd9JyxtLmluZGV4KTtpZihnPG0uaW5kZXgpe3Rocm93IG5ldyBTeW50YXhFcnJvcigibm8gY2xvc2luZyBicmFjZXMgZm91bmQgaW4gJyIrcysiJyBhZnRlciBwb3M6IittLmluZGV4KX1GLnB1c2goZi5wYXJ0cy5sZW5ndGgpO2YucGFydHMucHVzaChkKHMuc2xpY2UobS5pbmRleCsxLGcpKSk7YS5sYXN0SW5kZXg9ZysxfX1wPWEubGFzdEluZGV4fWlmKHA8cy5sZW5ndGgpe0YucHVzaChzLnNsaWNlKHApKX1pZihmLnBhcnRzLmxlbmd0aD4wKXtpZihGLmxlbmd0aD09PTEpe2Y9Zi5wYXJ0c1swXX1lbHNle2YuZm9ybWF0dGVyPWMoRil9aWYoQi5fa2VlcEJpbmRpbmdTdHJpbmdzKXtmLmJpbmRpbmdTdHJpbmc9c31yZXR1cm4gZn1lbHNlIGlmKHUmJlUpe3JldHVybiBGLmpvaW4oJycpfX07Qi5jb21wbGV4UGFyc2VyLmVzY2FwZT1mdW5jdGlvbih2KXtyZXR1cm4gdi5yZXBsYWNlKGIsIlxcJDEiKX07cmV0dXJuIEJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5EYXRhVHlwZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLkRhdGFUeXBlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvRGF0YVR5cGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEQ9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoKX07RC5wcm90b3R5cGUuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiB1bmRlZmluZWR9O0QucHJvdG90eXBlLmdldEJhc2VUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH07RC5wcm90b3R5cGUuZ2V0Q29tcG9uZW50VHlwZT1mdW5jdGlvbigpe3JldHVybiB1bmRlZmluZWR9O0QucHJvdG90eXBlLmdldERlZmF1bHRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB1bmRlZmluZWR9O0QucHJvdG90eXBlLmlzQXJyYXlUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH07RC5wcm90b3R5cGUucGFyc2VWYWx1ZT1mdW5jdGlvbih2KXt2YXIgdD10aGlzLmdldE5hbWUoKTtpZih0PT0ic3RyaW5nIil7cmV0dXJuIHZ9ZWxzZSBpZih0PT0iYm9vbGVhbiIpe3JldHVybiB2PT0idHJ1ZSJ9ZWxzZSBpZih0PT0iaW50Iil7cmV0dXJuIHBhcnNlSW50KHYsMTApfWVsc2UgaWYodD09ImZsb2F0Iil7cmV0dXJuIHBhcnNlRmxvYXQodil9ZWxzZSBpZih0PT0ib2JqZWN0Iil7cmV0dXJuIHY/cS5wYXJzZUpTT04odik6bnVsbH1lbHNle3JldHVybiB2fX07RC5wcm90b3R5cGUuaXNWYWxpZD11bmRlZmluZWQ7RC5wcm90b3R5cGUuc2V0Tm9ybWFsaXplcj1mdW5jdGlvbihuKXt0aGlzLl9mbk5vcm1hbGl6ZXI9bn07RC5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKHYpe2lmKHR5cGVvZiB0aGlzLl9mbk5vcm1hbGl6ZXI9PT0iZnVuY3Rpb24iKXtyZXR1cm4gdGhpcy5fZm5Ob3JtYWxpemVyKHYpfWVsc2V7cmV0dXJuIHZ9fTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBjKG4scyxiKXtzPXN8fHt9O2I9Ynx8RC5wcm90b3R5cGU7dmFyIHQ9cS5zYXAubmV3T2JqZWN0KGIpO3QuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiBufTtpZihzLmhhc093blByb3BlcnR5KCJkZWZhdWx0VmFsdWUiKSl7dmFyIGQ9cy5kZWZhdWx0VmFsdWU7dC5nZXREZWZhdWx0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gZH19aWYocy5oYXNPd25Qcm9wZXJ0eSgiaXNWYWxpZCIpKXt2YXIgaT1zLmlzVmFsaWQ7dC5pc1ZhbGlkPWIuaXNWYWxpZD9mdW5jdGlvbih2KXtpZighYi5pc1ZhbGlkKHYpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIGkodil9Oml9O3QuaXNBcnJheVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9O3JldHVybiB0fWZ1bmN0aW9uIGEoYil7dmFyIHQ9cS5zYXAubmV3T2JqZWN0KEQucHJvdG90eXBlKTt0LmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gYi5nZXROYW1lKCkrIltdIn07dC5nZXRDb21wb25lbnRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIGJ9O3QuaXNWYWxpZD1mdW5jdGlvbih2KXtpZih2PT09bnVsbCl7cmV0dXJuIHRydWV9aWYocS5pc0FycmF5KHYpKXtmb3IodmFyIGk9MDtpPHYubGVuZ3RoO2krKyl7aWYoIWIuaXNWYWxpZCh2W2ldKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9O3QucGFyc2VWYWx1ZT1mdW5jdGlvbih2KXt2YXIgVj12LnNwbGl0KCIsIik7Zm9yKHZhciBpPTA7aTxWLmxlbmd0aDtpKyspe1ZbaV09Yi5wYXJzZVZhbHVlKFZbaV0pfXJldHVybiBWfTt0LmlzQXJyYXlUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHRydWV9O3JldHVybiB0fXZhciBQPXsiYW55IjpjKCJhbnkiLHtkZWZhdWx0VmFsdWU6bnVsbCxpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybiB0cnVlfX0pLCJib29sZWFuIjpjKCJib29sZWFuIix7ZGVmYXVsdFZhbHVlOmZhbHNlLGlzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuIHR5cGVvZiB2PT09ImJvb2xlYW4ifX0pLCJpbnQiOmMoImludCIse2RlZmF1bHRWYWx1ZTowLGlzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuIHR5cGVvZiB2PT09Im51bWJlciImJk1hdGguZmxvb3Iodik9PXZ9fSksImZsb2F0IjpjKCJmbG9hdCIse2RlZmF1bHRWYWx1ZTowLjAsaXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4gdHlwZW9mIHY9PT0ibnVtYmVyIn19KSwic3RyaW5nIjpjKCJzdHJpbmciLHtkZWZhdWx0VmFsdWU6IiIsaXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4gdHlwZW9mIHY9PT0ic3RyaW5nInx8diBpbnN0YW5jZW9mIFN0cmluZ319KSwib2JqZWN0IjpjKCJvYmplY3QiLHtkZWZhdWx0VmFsdWU6bnVsbCxpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybiB0eXBlb2Ygdj09PSJvYmplY3QifHx0eXBlb2Ygdj09PSJmdW5jdGlvbiJ9fSl9O0QuZ2V0VHlwZT1mdW5jdGlvbih0KXtpZih0LmluZGV4T2YoIltdIik+MCl7dmFyIEM9dC5zdWJzdHIoMCx0Lmxlbmd0aC0yKSxvPXRoaXMuZ2V0VHlwZShDKTtyZXR1cm4gbyYmYShvKX1lbHNle3JldHVybiBQW3RdfHxxLnNhcC5nZXRPYmplY3QodCl9fTtELmNyZWF0ZVR5cGU9Yzt2YXIgST17fTtELnJlZ2lzdGVySW50ZXJmYWNlVHlwZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspe3Euc2FwLnNldE9iamVjdCh0W2ldLElbdFtpXV09bmV3IFN0cmluZyh0W2ldKSl9fTtELmlzSW50ZXJmYWNlVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gSS5oYXNPd25Qcm9wZXJ0eSh0KSYmcS5zYXAuZ2V0T2JqZWN0KHQpPT09SVt0XX19KCkpO3JldHVybiBEfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuRXhjZXB0aW9uJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuRXhjZXB0aW9uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvRXhjZXB0aW9uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBFPWZ1bmN0aW9uKG0pe3RoaXMubmFtZT0iRXhjZXB0aW9uIjt0aGlzLm1lc3NhZ2U9bX07cmV0dXJuIEV9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5JbnRlcmZhY2UnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5JbnRlcmZhY2UnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9JbnRlcmZhY2UiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEk9ZnVuY3Rpb24obyxtKXtpZighbyl7cmV0dXJuIG99ZnVuY3Rpb24gYyhvLE0pe3JldHVybiBmdW5jdGlvbigpe3ZhciB0PW9bTV0uYXBwbHkobyxhcmd1bWVudHMpO3JldHVybih0IGluc3RhbmNlb2Ygc2FwLnVpLmJhc2UuT2JqZWN0KT90LmdldEludGVyZmFjZSgpOnR9fWlmKCFtKXtyZXR1cm57fX12YXIgTTtmb3IodmFyIGk9MCxhPW0ubGVuZ3RoO2k8YTtpKyspe009bVtpXTt0aGlzW01dPWMobyxNKX19O3JldHVybiBJfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuTWV0YWRhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5NZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL01ldGFkYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnanF1ZXJ5LnNhcC5zY3JpcHQnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIE09ZnVuY3Rpb24oYyxDKXtpZighQ3x8dHlwZW9mIEMubWV0YWRhdGEhPT0ib2JqZWN0Iil7Qz17bWV0YWRhdGE6Q3x8e30sY29uc3RydWN0b3I6cS5zYXAuZ2V0T2JqZWN0KGMpfTtDLm1ldGFkYXRhLl9fdmVyc2lvbj0xLjB9Qy5tZXRhZGF0YS5fX3ZlcnNpb249Qy5tZXRhZGF0YS5fX3ZlcnNpb258fDIuMDtpZih0eXBlb2YgQy5jb25zdHJ1Y3RvciE9PSJmdW5jdGlvbiIpe3Rocm93IEVycm9yKCJjb25zdHJ1Y3RvciBmb3IgY2xhc3MgIitjKyIgbXVzdCBoYXZlIGJlZW4gZGVjbGFyZWQgYmVmb3JlIGNyZWF0aW5nIG1ldGFkYXRhIGZvciBpdCIpfXRoaXMuX3NDbGFzc05hbWU9Yzt0aGlzLl9vQ2xhc3M9Qy5jb25zdHJ1Y3Rvcjt0aGlzLmV4dGVuZChDKX07TS5wcm90b3R5cGUuZXh0ZW5kPWZ1bmN0aW9uKGMpe3RoaXMuYXBwbHlTZXR0aW5ncyhjKTt0aGlzLmFmdGVyQXBwbHlTZXR0aW5ncygpfTtNLnByb3RvdHlwZS5hcHBseVNldHRpbmdzPWZ1bmN0aW9uKGMpe3ZhciB0PXRoaXMscz1jLm1ldGFkYXRhLHAsbjtpZihzLmJhc2VUeXBlKXt2YXIgUD1xLnNhcC5nZXRPYmplY3Qocy5iYXNlVHlwZSk7aWYodHlwZW9mIFAhPT0iZnVuY3Rpb24iKXtxLnNhcC5sb2cuZmF0YWwoImJhc2UgY2xhc3MgJyIrcy5iYXNlVHlwZSsiJyBkb2VzIG5vdCBleGlzdCIpfWlmKFAuZ2V0TWV0YWRhdGEpe3RoaXMuX29QYXJlbnQ9UC5nZXRNZXRhZGF0YSgpO31lbHNle3RoaXMuX29QYXJlbnQ9bmV3IE0ocy5iYXNlVHlwZSx7fSl9fWVsc2V7dGhpcy5fb1BhcmVudD11bmRlZmluZWR9dGhpcy5fYkFic3RyYWN0PSEhc1siYWJzdHJhY3QiXTt0aGlzLl9iRmluYWw9ISFzWyJmaW5hbCJdO3RoaXMuX3NTdGVyZW90eXBlPXMuc3RlcmVvdHlwZXx8KHRoaXMuX29QYXJlbnQ/dGhpcy5fb1BhcmVudC5fc1N0ZXJlb3R5cGU6Im9iamVjdCIpO3RoaXMuX2FJbnRlcmZhY2VzPXEuc2FwLnVuaXF1ZShzLmludGVyZmFjZXN8fFtdKTt0aGlzLl9hUHVibGljTWV0aG9kcz1xLnNhcC51bmlxdWUocy5wdWJsaWNNZXRob2RzfHxbXSk7cD10aGlzLl9vQ2xhc3MucHJvdG90eXBlO3Euc2FwLmZvckluKGMsZnVuY3Rpb24obix2KXtpZihuIT09Im1ldGFkYXRhIiYmbiE9PSJjb25zdHJ1Y3RvciIpe3Bbbl09djtpZighbi5tYXRjaCgvXl98Xm9ufF5pbml0JHxeZXhpdCQvKSl7dC5fYVB1YmxpY01ldGhvZHMucHVzaChuKX19fSl9O00ucHJvdG90eXBlLmFmdGVyQXBwbHlTZXR0aW5ncz1mdW5jdGlvbigpe2lmKHRoaXMuX29QYXJlbnQpe3RoaXMuX2FBbGxQdWJsaWNNZXRob2RzPXEuc2FwLnVuaXF1ZSh0aGlzLl9vUGFyZW50Ll9hQWxsUHVibGljTWV0aG9kcy5jb25jYXQodGhpcy5fYVB1YmxpY01ldGhvZHMpKX1lbHNle3RoaXMuX2FBbGxQdWJsaWNNZXRob2RzPXRoaXMuX2FQdWJsaWNNZXRob2RzfX07TS5wcm90b3R5cGUuZ2V0U3RlcmVvdHlwZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zU3RlcmVvdHlwZX07TS5wcm90b3R5cGUuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zQ2xhc3NOYW1lfTtNLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vQ2xhc3N9O00ucHJvdG90eXBlLmdldFBhcmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUGFyZW50fTtNLnByb3RvdHlwZS5nZXRQdWJsaWNNZXRob2RzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FQdWJsaWNNZXRob2RzfTtNLnByb3RvdHlwZS5nZXRBbGxQdWJsaWNNZXRob2RzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FBbGxQdWJsaWNNZXRob2RzfTtNLnByb3RvdHlwZS5nZXRJbnRlcmZhY2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FJbnRlcmZhY2VzfTtNLnByb3RvdHlwZS5pc0luc3RhbmNlT2Y9ZnVuY3Rpb24oSSl7aWYodGhpcy5fb1BhcmVudCl7aWYodGhpcy5fb1BhcmVudC5pc0luc3RhbmNlT2YoSSkpe3JldHVybiB0cnVlfX07dmFyIGE9dGhpcy5fYUludGVyZmFjZXM7Zm9yKHZhciBpPTAsbD1hLmxlbmd0aDtpPGw7aSsrKXtpZihhW2ldPT09SSl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX07TS5wcm90b3R5cGUuaXNBYnN0cmFjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iQWJzdHJhY3R9O00ucHJvdG90eXBlLmlzRmluYWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYkZpbmFsfTtNLnByb3RvdHlwZS5hZGRQdWJsaWNNZXRob2RzPWZ1bmN0aW9uKG0pe3ZhciBuPShtIGluc3RhbmNlb2YgQXJyYXkpP206YXJndW1lbnRzO2Z1bmN0aW9uIHUoYSx2KXtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhLHYpO3Euc2FwLnVuaXF1ZShhKX11KHRoaXMuX2FQdWJsaWNNZXRob2RzLG4pO3UodGhpcy5fYUFsbFB1YmxpY01ldGhvZHMsbil9O00uY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oYixjLEMsRil7aWYodHlwZW9mIGI9PT0ic3RyaW5nIil7Rj1DO0M9YztjPWI7Yj1udWxsfUY9Rnx8TTtpZih0eXBlb2YgRi5wcmVwcm9jZXNzQ2xhc3NJbmZvPT09ImZ1bmN0aW9uIil7Qz1GLnByZXByb2Nlc3NDbGFzc0luZm8oQyl9Qz1DfHx7fTtDLm1ldGFkYXRhPUMubWV0YWRhdGF8fHt9O2lmKCFDLmhhc093blByb3BlcnR5KCdjb25zdHJ1Y3RvcicpKXtDLmNvbnN0cnVjdG9yPXVuZGVmaW5lZH12YXIgZj1DLmNvbnN0cnVjdG9yO2lmKGIpe2lmKCFmKXtpZihDLm1ldGFkYXRhLmRlcHJlY2F0ZWQpe2Y9ZnVuY3Rpb24oKXtxLnNhcC5sb2cud2FybmluZygiVXNhZ2Ugb2YgZGVwcmVjYXRlZCBjbGFzczogIitjKTtiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZWxzZXtmPWZ1bmN0aW9uKCl7Yi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX1mLnByb3RvdHlwZT1xLnNhcC5uZXdPYmplY3QoYi5wcm90b3R5cGUpO2YucHJvdG90eXBlLmNvbnN0cnVjdG9yPWY7Qy5tZXRhZGF0YS5iYXNlVHlwZT1iLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpfWVsc2V7Zj1mfHxmdW5jdGlvbigpe307ZGVsZXRlIEMubWV0YWRhdGEuYmFzZVR5cGV9Qy5jb25zdHJ1Y3Rvcj1mO3Euc2FwLnNldE9iamVjdChjLGYpO3ZhciBtPW5ldyBGKGMsQyk7Zi5nZXRNZXRhZGF0YT1mLnByb3RvdHlwZS5nZXRNZXRhZGF0YT1xLnNhcC5nZXR0ZXIobSk7aWYoIWYuZ2V0TWV0YWRhdGEoKS5pc0ZpbmFsKCkpe2YuZXh0ZW5kPWZ1bmN0aW9uKHMsUyxhKXtyZXR1cm4gTS5jcmVhdGVDbGFzcyhmLHMsUyxhfHxGKX19cmV0dXJuIGZ9O3JldHVybiBNfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuT2JqZWN0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuT2JqZWN0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvT2JqZWN0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9JbnRlcmZhY2UnLCcuL01ldGFkYXRhJ10sZnVuY3Rpb24ocSxJLE0peyJ1c2Ugc3RyaWN0Ijt2YXIgQj1NLmNyZWF0ZUNsYXNzKCJzYXAudWkuYmFzZS5PYmplY3QiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe2lmKCEodGhpcyBpbnN0YW5jZW9mIEIpKXt0aHJvdyBFcnJvcigiQ2Fubm90IGluc3RhbnRpYXRlIG9iamVjdDogXCJuZXdcIiBpcyBtaXNzaW5nISIpfX19KTtCLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7fTtCLnByb3RvdHlwZS5nZXRJbnRlcmZhY2U9ZnVuY3Rpb24oKXt2YXIgaT1uZXcgSSh0aGlzLHRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQdWJsaWNNZXRob2RzKCkpO3RoaXMuZ2V0SW50ZXJmYWNlPXEuc2FwLmdldHRlcihpKTtyZXR1cm4gaX07Qi5kZWZpbmVDbGFzcz1mdW5jdGlvbihjLHMsRil7dmFyIG09bmV3KEZ8fE0pKGMscyk7dmFyIEM9bS5nZXRDbGFzcygpO0MuZ2V0TWV0YWRhdGE9Qy5wcm90b3R5cGUuZ2V0TWV0YWRhdGE9cS5zYXAuZ2V0dGVyKG0pO2lmKCFtLmlzRmluYWwoKSl7Qy5leHRlbmQ9ZnVuY3Rpb24oUyxvLGYpe3JldHVybiBNLmNyZWF0ZUNsYXNzKEMsUyxvLGZ8fEYpfX1xLnNhcC5sb2cuZGVidWcoImRlZmluZWQgY2xhc3MgJyIrYysiJyIrKG0uZ2V0UGFyZW50KCk/IiBhcyBzdWJjbGFzcyBvZiAiK20uZ2V0UGFyZW50KCkuZ2V0TmFtZSgpOiIiKSk7cmV0dXJuIG19O3JldHVybiBCfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuT2JqZWN0UG9vbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLk9iamVjdFBvb2wnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9PYmplY3RQb29sIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9PYmplY3QnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgTz1CLmV4dGVuZCgic2FwLnVpLmJhc2UuT2JqZWN0UG9vbCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG8pe0IuYXBwbHkodGhpcyk7dGhpcy5vT2JqZWN0Q2xhc3M9bzt0aGlzLmFGcmVlT2JqZWN0cz1bXX19KTtPLnByb3RvdHlwZS5ib3Jyb3dPYmplY3Q9ZnVuY3Rpb24oKXt2YXIgbz10aGlzLmFGcmVlT2JqZWN0cy5sZW5ndGg9PTA/bmV3IHRoaXMub09iamVjdENsYXNzKCk6dGhpcy5hRnJlZU9iamVjdHMucG9wKCk7by5pbml0LmFwcGx5KG8sYXJndW1lbnRzKTtyZXR1cm4gb307Ty5wcm90b3R5cGUucmV0dXJuT2JqZWN0PWZ1bmN0aW9uKG8pe28ucmVzZXQoKTt0aGlzLmFGcmVlT2JqZWN0cy5wdXNoKG8pfTtyZXR1cm4gT30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lclJlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyUmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Db21wb25lbnRDb250YWluZXJSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz17fTtDLnJlbmRlcj1mdW5jdGlvbihyLGMpe3ZhciBSPXI7dmFyIGI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIG89Yy5nZXRDb21wb25lbnRJbnN0YW5jZSgpO3ZhciB3PWMuZ2V0V2lkdGgoKTt2YXIgaD1jLmdldEhlaWdodCgpO1Iud3JpdGUoIjxkaXYiKTtSLndyaXRlQ29udHJvbERhdGEoYyk7aWYodyl7Ui5hZGRTdHlsZSgid2lkdGgiLHcpfWlmKGgpe1IuYWRkU3R5bGUoImhlaWdodCIsaCl9Ui53cml0ZVN0eWxlcygpO1IuYWRkQ2xhc3MoInNhcFVpQ29tcG9uZW50Q29udGFpbmVyIik7Ui53cml0ZUNsYXNzZXMoKTtSLndyaXRlKCI+Iik7Ui53cml0ZSgiPGRpdiBpZD1cIiIrYy5nZXRJZCgpKyItdWlhcmVhXCIiKTtpZih3JiZ3IT09ImF1dG8iKXtSLmFkZFN0eWxlKCJ3aWR0aCIsIjEwMCUiKX1pZihoJiZoIT09ImF1dG8iKXtSLmFkZFN0eWxlKCJoZWlnaHQiLCIxMDAlIil9Ui53cml0ZVN0eWxlcygpO1Iud3JpdGUoIj4iKTtpZihvKXtvLnJlbmRlcihSKX1SLndyaXRlKCI8L2Rpdj48L2Rpdj4iKX07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5EZWNsYXJhdGl2ZVN1cHBvcnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5EZWNsYXJhdGl2ZVN1cHBvcnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9EZWNsYXJhdGl2ZVN1cHBvcnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEQ9e307RC5hdHRyaWJ1dGVzPXsiZGF0YS1zYXAtdWktdHlwZSI6dHJ1ZSwiZGF0YS1zYXAtdWktYWdncmVnYXRpb24iOnRydWUsImRhdGEtc2FwLXVpLWRlZmF1bHQtYWdncmVnYXRpb24iOnRydWUsImRhdGEtc2FwLXVpLWJpbmRpbmciOmZ1bmN0aW9uKHYscyl7dmFyIGI9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5iaW5kaW5nUGFyc2VyKHYpO3Mub2JqZWN0QmluZGluZ3M9cy5vYmplY3RCaW5kaW5nc3x8e307cy5vYmplY3RCaW5kaW5nc1tiLm1vZGVsfHx1bmRlZmluZWRdPWJ9LCJkYXRhLXRvb2x0aXAiOmZ1bmN0aW9uKHYscyl7c1sidG9vbHRpcCJdPXZ9LCJ0b29sdGlwIjpmdW5jdGlvbih2LHMsYyl7c1sidG9vbHRpcCJdPXY7cS5zYXAubG9nLndhcm5pbmcoJ1tEZXByZWNhdGVkXSBDb250cm9sICInK3MuaWQrJyI6IFRoZSBhdHRyaWJ1dGUgInRvb2x0aXAiIGlzIG5vdCBwcmVmaXhlZCB3aXRoICJkYXRhLSoiLiBGdXR1cmUgdmVyc2lvbiBvZiBkZWNsYXJhdGl2ZSBzdXBwb3J0IHdpbGwgb25seSBzdXBwcG9ydCBhdHRyaWJ1dGVzIHdpdGggImRhdGEtKiIgcHJlZml4LicpfSwiY2xhc3MiOnRydWUsInN0eWxlIjp0cnVlLCJpZCI6dHJ1ZX07RC5jb21waWxlPWZ1bmN0aW9uKGUsdixpKXt2YXIgcz10aGlzO3EoZSkuZmluZCgiW2RhdGEtc2FwLXVpLXR5cGVdIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHEodGhpcykucGFyZW50cygiW2RhdGEtc2FwLXVpLXR5cGVdIikubGVuZ3RoPT09MH0pLmVhY2goZnVuY3Rpb24oKXtzLl9jb21waWxlKHRoaXMsdixpKX0pfTtELl9jb21waWxlPWZ1bmN0aW9uKGUsdixpKXt2YXIgJD1xKGUpO3ZhciB0PSQuYXR0cigiZGF0YS1zYXAtdWktdHlwZSIpO3ZhciBjPVtdO3ZhciBJPXQ9PT0ic2FwLnVpLmNvcmUuVUlBcmVhIjtpZihJKXt2YXIgcz10aGlzOyQuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIEM9cy5fY3JlYXRlQ29udHJvbCh0aGlzLHYpO2lmKEMpe2MucHVzaChDKX19KX1lbHNle3ZhciBDPXRoaXMuX2NyZWF0ZUNvbnRyb2woZSx2KTtpZihDKXtjLnB1c2goQyl9fSQuZW1wdHkoKTt2YXIgYT1bXTtxLmVhY2goZS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGIsQSl7dmFyIG49QS5uYW1lO2lmKCFJfHxJJiYvXmRhdGEtL2cudGVzdChuLnRvTG93ZXJDYXNlKCkpKXthLnB1c2gobil9fSk7aWYoYS5sZW5ndGg+MCl7JC5yZW1vdmVBdHRyKGEuam9pbigiICIpKX1xLmVhY2goYyxmdW5jdGlvbihrLEMpe2lmKEMgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Db250cm9sKXtpZih2JiYhaSl7di5hZGRDb250ZW50KEMpfWVsc2V7Qy5wbGFjZUF0KGUpO2lmKHYpe3YuY29ubmVjdENvbnRyb2woQyl9fX19KX07RC5fY3JlYXRlQ29udHJvbD1mdW5jdGlvbihlLHYpe3ZhciAkPXEoZSk7dmFyIGM9bnVsbDt2YXIgdD0kLmF0dHIoImRhdGEtc2FwLXVpLXR5cGUiKTtpZih0KXtxLnNhcC5yZXF1aXJlKHQpO3ZhciBDPXEuc2FwLmdldE9iamVjdCh0KTt2YXIgcz17fTt2YXIgaT1zLmlkPXRoaXMuX2dldElkKCQsdik7dGhpcy5fYWRkU2V0dGluZ3NGb3JBdHRyaWJ1dGVzKHMsQyxlLHYpO3RoaXMuX2FkZFNldHRpbmdzRm9yQWdncmVnYXRpb25zKHMsQyxlLHYpO3ZhciBjO2lmKHNhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKEMucHJvdG90eXBlKSYmdHlwZW9mIEMuX3NUeXBlPT09InN0cmluZyIpe2M9c2FwLnVpLnZpZXcocyx1bmRlZmluZWQsQy5fc1R5cGUpfWVsc2V7Yz1uZXcgQyhzKX1pZihlLmNsYXNzTmFtZSl7Yy5hZGRTdHlsZUNsYXNzKGUuY2xhc3NOYW1lKX0kLnJlbW92ZUF0dHIoImRhdGEtc2FwLXVpLXR5cGUiKX1lbHNle2M9dGhpcy5fY3JlYXRlSHRtbENvbnRyb2woZSx2KX1yZXR1cm4gY307RC5fY3JlYXRlSHRtbENvbnRyb2w9ZnVuY3Rpb24oZSx2KXt2YXIgaD1uZXcgc2FwLnVpLmNvcmUuSFRNTCgpO2guc2V0RE9NQ29udGVudChlKTt0aGlzLmNvbXBpbGUoZSx2LHRydWUpO3JldHVybiBofTtELl9hZGRTZXR0aW5nc0ZvckF0dHJpYnV0ZXM9ZnVuY3Rpb24ocyxjLGUsdil7dmFyIGE9dGhpczt2YXIgUz1ELmF0dHJpYnV0ZXM7dmFyIGI9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5iaW5kaW5nUGFyc2VyO3ZhciBDPVtdO3ZhciByPS9eZGF0YS1jdXN0b20tZGF0YTooLispL2k7cS5lYWNoKGUuYXR0cmlidXRlcyxmdW5jdGlvbihpLEEpe3ZhciBuPUEubmFtZTt2YXIgVj1BLnZhbHVlO2lmKCFyLnRlc3Qobikpe2lmKHR5cGVvZiBTW25dPT09InVuZGVmaW5lZCIpe249YS5jb252ZXJ0QXR0cmlidXRlVG9TZXR0aW5nTmFtZShuLHMuaWQpO3ZhciBwPWEuX2dldFByb3BlcnR5KGMsbik7aWYocCl7dmFyIEI9YihWLHYmJnYuZ2V0Q29udHJvbGxlcigpLHRydWUpO2lmKEImJnR5cGVvZiBCPT09Im9iamVjdCIpe3Nbbl09Qn1lbHNle3Nbbl09YS5jb252ZXJ0VmFsdWVUb1R5cGUoYS5nZXRQcm9wZXJ0eURhdGFUeXBlKHApLEJ8fFYpfX1lbHNlIGlmKGEuX2dldEFzc29jaWF0aW9uKGMsbikpe3ZhciBvPWEuX2dldEFzc29jaWF0aW9uKGMsbik7aWYoby5tdWx0aXBsZSl7Vj1WLnJlcGxhY2UoL1xzKixccyp8XHMrL2csIiwiKTt2YXIgST1WLnNwbGl0KCIsIik7cS5lYWNoKEksZnVuY3Rpb24oaSxnKXtJW2ldPXY/di5jcmVhdGVJZChnKTpnfSk7c1tuXT1JfWVsc2V7c1tuXT12P3YuY3JlYXRlSWQoVik6Vn19ZWxzZSBpZihhLl9nZXRBZ2dyZWdhdGlvbihjLG4pKXt2YXIgZD1hLl9nZXRBZ2dyZWdhdGlvbihjLG4pO2lmKGQubXVsdGlwbGUpe3ZhciBCPWIoVix2JiZ2LmdldENvbnRyb2xsZXIoKSk7aWYoQil7c1tuXT1CfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJBZ2dyZWdhdGlvbiAiK24rIiB3aXRoIGNhcmRpbmFsaXR5IDAuLm4gb25seSBhbGxvd3MgYmluZGluZyBwYXRocyBhcyBhdHRyaWJ1dGUgdmFsdWUiKX19ZWxzZSBpZihkLmFsdFR5cGVzKXt2YXIgQj1iKFYsdiYmdi5nZXRDb250cm9sbGVyKCksdHJ1ZSk7aWYoQiYmdHlwZW9mIEI9PT0ib2JqZWN0Iil7c1tuXT1CfWVsc2V7c1tuXT1hLmNvbnZlcnRWYWx1ZVRvVHlwZShkLmFsdFR5cGVzWzBdLEJ8fFYpfX1lbHNle3Rocm93IG5ldyBFcnJvcigiQWdncmVnYXRpb24gIituKyIgbm90IHN1cHBvcnRlZCIpfX1lbHNlIGlmKGEuX2dldEV2ZW50KGMsbikpe3ZhciBoPXEuc2FwLmdldE9iamVjdChWKTtpZih2JiZ0eXBlb2YgaD09PSJ1bmRlZmluZWQiKXt2YXIgZj0odi5fb0NvbnRhaW5pbmdWaWV3fHx2KS5nZXRDb250cm9sbGVyKCk7aD1mW1ZdO2lmKHR5cGVvZiBoPT09ImZ1bmN0aW9uIil7aD1xLnByb3h5KGgsZik7aC5fc2FwdWlfaGFuZGxlck5hbWU9Vn19aWYodHlwZW9mIGg9PT0iZnVuY3Rpb24iKXtzW25dPWh9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoJ0NvbnRyb2wgIicrcy5pZCsnIjogVGhlIGZ1bmN0aW9uICInK1YrJyIgZm9yIHRoZSBldmVudCAiJytuKyciIGlzIG5vdCBkZWZpbmVkJyl9fX1lbHNlIGlmKHR5cGVvZiBTW25dPT09ImZ1bmN0aW9uIil7U1tuXShWLHMsYyl9fWVsc2V7bj1xLnNhcC5jYW1lbENhc2Uoci5leGVjKG4pWzFdKTt2YXIgQj1iKFYsdiYmdi5nZXRDb250cm9sbGVyKCkpO0MucHVzaChuZXcgc2FwLnVpLmNvcmUuQ3VzdG9tRGF0YSh7a2V5Om4sdmFsdWU6Qnx8Vn0pKX19KTtpZihDLmxlbmd0aD4wKXtzLmN1c3RvbURhdGE9Q31yZXR1cm4gc307RC5fYWRkU2V0dGluZ3NGb3JBZ2dyZWdhdGlvbnM9ZnVuY3Rpb24ocyxjLGUsdil7dmFyICQ9cShlKTt2YXIgZD10aGlzLl9nZXREZWZhdWx0QWdncmVnYXRpb24oYyxlKTt2YXIgYT10aGlzO3ZhciBBPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxBZ2dyZWdhdGlvbnMoKTskLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe3ZhciBiPXEodGhpcyk7dmFyIGY9Yi5hdHRyKCJkYXRhLXNhcC11aS1hZ2dyZWdhdGlvbiIpO3ZhciB0PWIuYXR0cigiZGF0YS1zYXAtdWktdHlwZSIpO3ZhciB1PWZhbHNlO2lmKCFmKXt1PXRydWU7Zj1kfWlmKGYmJkFbZl0pe3ZhciBtPUFbZl0ubXVsdGlwbGU7dmFyIGc9ZnVuY3Rpb24oQyl7dmFyIG89YS5fY3JlYXRlQ29udHJvbChDLHYpO2lmKG8pe2lmKG0pe2lmKCFzW2ZdKXtzW2ZdPVtdfWlmKHR5cGVvZiBzW2ZdLnBhdGg9PT0ic3RyaW5nIil7c1tmXS50ZW1wbGF0ZT1vfWVsc2V7c1tmXS5wdXNoKG8pfX1lbHNle3NbZl09b319fTtpZih1fHwodCYmIXUpKXtnKHRoaXMpfWVsc2V7Yi5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKXtnKHRoaXMpfSl9fWIucmVtb3ZlQXR0cigiZGF0YS1zYXAtdWktYWdncmVnYXRpb24iKTtiLnJlbW92ZUF0dHIoImRhdGEtc2FwLXVpLXR5cGUiKX0pO3JldHVybiBzfTtELl9nZXRJZD1mdW5jdGlvbihlLHYpe3ZhciAkPXEoZSk7dmFyIGk9JC5hdHRyKCJpZCIpO2lmKGkpe2lmKHYpe2k9di5jcmVhdGVJZChpKTskLmF0dHIoImRhdGEtc2FwLXVpLWlkIixpKX0kLmF0dHIoImlkIiwiIil9cmV0dXJuIGl9O0QuX2dldFByb3BlcnR5PWZ1bmN0aW9uKGMsbil7cmV0dXJuIGMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQcm9wZXJ0aWVzKClbbl19O0QuY29udmVydFZhbHVlVG9UeXBlPWZ1bmN0aW9uKHQsdil7aWYodCBpbnN0YW5jZW9mIHNhcC51aS5iYXNlLkRhdGFUeXBlKXt2PXQucGFyc2VWYWx1ZSh2KX1yZXR1cm4gdHlwZW9mIHY9PT0ic3RyaW5nIj9zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXIuZXNjYXBlKHYpOnZ9O0QuZ2V0UHJvcGVydHlEYXRhVHlwZT1mdW5jdGlvbihwKXt2YXIgdD1zYXAudWkuYmFzZS5EYXRhVHlwZS5nZXRUeXBlKHAudHlwZSk7aWYoIXQpe3Rocm93IG5ldyBFcnJvcigiUHJvcGVydHkgIitwLm5hbWUrIiBoYXMgbm8ga25vd24gdHlwZSIpfXJldHVybiB0fTtELmNvbnZlcnRBdHRyaWJ1dGVUb1NldHRpbmdOYW1lPWZ1bmN0aW9uKGEsaSxkKXtpZihhLmluZGV4T2YoImRhdGEtIik9PT0wKXthPWEuc3Vic3RyKDUpfWVsc2UgaWYoZCl7cS5zYXAubG9nLndhcm5pbmcoJ1tEZXByZWNhdGVkXSBDb250cm9sICInK2krJyI6IFRoZSBhdHRyaWJ1dGUgIicrYSsnIiBpcyBub3QgcHJlZml4ZWQgd2l0aCAiZGF0YS0qIi4gRnV0dXJlIHZlcnNpb24gb2YgZGVjbGFyYXRpdmUgc3VwcG9ydCB3aWxsIG9ubHkgc3VwcHBvcnQgYXR0cmlidXRlcyB3aXRoICJkYXRhLSoiIHByZWZpeC4nKX1lbHNle3Rocm93IG5ldyBFcnJvcignQ29udHJvbCAiJytpKyciOiBUaGUgYXR0cmlidXRlICInK2ErJyIgaXMgbm90IHByZWZpeGVkIHdpdGggImRhdGEtKiIuJyl9cmV0dXJuIHEuc2FwLmNhbWVsQ2FzZShhKX07RC5fZ2V0QXNzb2NpYXRpb249ZnVuY3Rpb24oYyxuKXtyZXR1cm4gYy5nZXRNZXRhZGF0YSgpLmdldEFsbEFzc29jaWF0aW9ucygpW25dfTtELl9nZXRBZ2dyZWdhdGlvbj1mdW5jdGlvbihjLG4pe3JldHVybiBjLmdldE1ldGFkYXRhKCkuZ2V0QWxsQWdncmVnYXRpb25zKClbbl19O0QuX2dldEV2ZW50PWZ1bmN0aW9uKGMsbil7cmV0dXJuIGMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxFdmVudHMoKVtuXX07RC5fZ2V0RGVmYXVsdEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsZSl7dmFyICQ9cShlKTt2YXIgZD0kLmF0dHIoImRhdGEtc2FwLXVpLWRlZmF1bHQtYWdncmVnYXRpb24iKXx8Yy5nZXRNZXRhZGF0YSgpLmdldERlZmF1bHRBZ2dyZWdhdGlvbk5hbWUoKTskLnJlbW92ZUF0dHIoImRhdGEtc2FwLXVpLWRlZmF1bHQtYWdncmVnYXRpb24iKTtyZXR1cm4gZH07cmV0dXJuIER9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5IVE1MUmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5IVE1MUmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9IVE1MUmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEg9e3JlbmRlcjpmdW5jdGlvbihyLGMpe3ZhciB1PWMuZ2V0VUlBcmVhKCk7ci53cml0ZSgiPGRpdiBpZD1cInNhcC11aS1kdW1teS0iK2MuZ2V0SWQoKSsiXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj4iKTtyLndyaXRlKCI8L2Rpdj4iKX19O3JldHVybiBIfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuSGlzdG9yeScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkhpc3RvcnknKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9IaXN0b3J5IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0J10sZnVuY3Rpb24ocSxCKXsidXNlIHN0cmljdCI7dmFyIEg9Qi5leHRlbmQoInNhcC51aS5jb3JlLkhpc3RvcnkiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe0IuYXBwbHkodGhpcyk7aWYoIXMpe3M9e319dmFyIGg9cy5wcmVmaXg/cy5wcmVmaXg6ZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWU7dGhpcy5faU1heEhpc3Rvcnk9cy5tYXg/cy5tYXg6MTAwO3RoaXMuX3NIaXN0b3J5SWQ9aCtpO3Euc2FwLnJlcXVpcmUoImpxdWVyeS5zYXAuc3RvcmFnZSIpO3RoaXMuX29TdG9yYWdlPXEuc2FwLnN0b3JhZ2UocS5zYXAuc3RvcmFnZS5UeXBlLmxvY2FsKTt0aGlzLl9mRmlsdGVyPXMuZmlsdGVyP3MuZmlsdGVyOmZ1bmN0aW9uKGEsdil7cmV0dXJuIGEmJighdnx8KHYmJnEuc2FwLnN0YXJ0c1dpdGhJZ25vcmVDYXNlKGEsdikpKX07dGhpcy5fZkNoZWNrSGlzdG9yeT1zLmNoZWNrSGlzdG9yeT9zLmNoZWNrSGlzdG9yeTpmdW5jdGlvbihhKXtyZXR1cm4gYX19LF9pbml0SGlzdG9yeTpmdW5jdGlvbigpe2lmKCF0aGlzLl9hSGlzdG9yeSl7dmFyIGg9dGhpcy5fb1N0b3JhZ2UuZ2V0KHRoaXMuX3NIaXN0b3J5SWQpO2lmKHR5cGVvZihoKT09PSJzdHJpbmciKXtoPWguc3BsaXQoIiwiKX1lbHNlIGlmKCFoKXtoPVtdfXRoaXMuX2FIaXN0b3J5PXRoaXMuX2ZDaGVja0hpc3RvcnkoaCl9cmV0dXJuIHRoaXMuX2FIaXN0b3J5fSxnZXQ6ZnVuY3Rpb24odil7dmFyIGg9dGhpcy5faW5pdEhpc3RvcnkoKTt2YXIgcj1bXTtmb3IodmFyIGk9MDtpPGgubGVuZ3RoO2krKyl7aWYodGhpcy5fZkZpbHRlcihoW2ldLHYpKXtyLnB1c2goaFtpXSl9fXJldHVybiByfSxyZW1vdmU6ZnVuY3Rpb24odil7dmFyIGg9dGhpcy5faW5pdEhpc3RvcnkoKTtmb3IodmFyIGk9MDtpPGgubGVuZ3RoO2krKyl7aWYoaFtpXT09dil7aC5zcGxpY2UoaSwxKTticmVha319fSxhZGQ6ZnVuY3Rpb24odil7dmFyIGg9dGhpcy5faW5pdEhpc3RvcnkoKTtmb3IodmFyIGk9MDtpPGgubGVuZ3RoO2krKyl7aWYoaFtpXT09PXYpe2guc3BsaWNlKGksMSk7YnJlYWt9fWgudW5zaGlmdCh2KTtpZihoLmxlbmd0aD50aGlzLl9pTWF4SGlzdG9yeSl7aC5zcGxpY2UodGhpcy5faU1heEhpc3RvcnkpfXRoaXMuX29TdG9yYWdlLnB1dCh0aGlzLl9zSGlzdG9yeUlkLGgpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuX29TdG9yYWdlLnJlbW92ZSh0aGlzLl9zSGlzdG9yeUlkKTt0aGlzLl9hSGlzdG9yeT1udWxsfX0pO3JldHVybiBIfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuSWNvblBvb2wnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5JY29uUG9vbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ljb25Qb29sIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL3RoaXJkcGFydHkvVVJJJ10sZnVuY3Rpb24ocSxVKXsidXNlIHN0cmljdCI7aWYoYil7cmV0dXJufXZhciBJPVsiYWNjaWRlbnRhbC1sZWF2ZSIsImFjY291bnQiLCJ3cmVuY2giLCJ3aW5kb3dzLWRvb3JzIiwid2FzaGluZy1tYWNoaW5lIiwidmlzaXRzIiwidmlkZW8iLCJ0cmF2ZWwtZXhwZW5zZSIsInRlbXBlcmF0dXJlIiwidGFzayIsInN5bmNocm9uaXplIiwic3VydmV5Iiwic2V0dGluZ3MiLCJzZWFyY2giLCJzYWxlcy1kb2N1bWVudCIsInJldGFpbC1zdG9yZSIsInJlZnJlc2giLCJwcm9kdWN0IiwicHJlc2VudCIsInBwdC1hdHRhY2htZW50IiwicG9vbCIsInBpZS1jaGFydCIsInBpY3R1cmUiLCJwaG90by12b2x0YWljIiwicGhvbmUiLCJwZW5kaW5nIiwicGRmLWF0dGFjaG1lbnQiLCJwYXN0Iiwib3V0Z29pbmctY2FsbCIsIm9wcG9ydHVuaXR5Iiwib3Bwb3J0dW5pdGllcyIsIm5vdGVzIiwibW9uZXktYmlsbHMiLCJtYXAiLCJsb2ciLCJsaW5lLWNoYXJ0cyIsImxpZ2h0YnVsYiIsImxlYWRzIiwibGVhZCIsImxhcHRvcCIsImtwaS1tYW5hZ2luZy1teS1hcmVhIiwia3BpLWNvcnBvcmF0ZS1wZXJmb3JtYW5jZSIsImluY29taW5nLWNhbGwiLCJpbmJveCIsImhvcml6b250YWwtYmFyLWNoYXJ0IiwiaGlzdG9yeSIsImhlYXRpbmctY29vbGluZyIsImdhbnR0LWJhcnMiLCJmdXR1cmUiLCJmcmlkZ2UiLCJmYWxsYmFjayIsImV4cGVuc2UtcmVwb3J0IiwiZXhjZWwtYXR0YWNobWVudCIsImVuZXJneS1zYXZpbmctbGlnaHRidWxiIiwiZW1wbG95ZWUiLCJlbWFpbCIsImVkaXQiLCJkdXBsaWNhdGUiLCJkb3dubG9hZCIsImRvYy1hdHRhY2htZW50IiwiZGlzaHdhc2hlciIsImRlbGV0ZSIsImRlY2xpbmUiLCJjb21wbGV0ZSIsImNvbXBldGl0b3IiLCJjb2xsZWN0aW9ucy1tYW5hZ2VtZW50IiwiY2hhbGtib2FyZCIsImNhcnQiLCJjYXJkIiwiY2FtZXJhIiwiY2FsZW5kYXIiLCJiZWdpbiIsImJhc2tldCIsImJhci1jaGFydCIsImF0dGFjaG1lbnQiLCJhcnJvdy10b3AiLCJhcnJvdy1yaWdodCIsImFycm93LWxlZnQiLCJhcnJvdy1ib3R0b20iLCJhcHByb3ZhbHMiLCJhcHBvaW50bWVudCIsImFscGhhYmV0aWNhbC1vcmRlciIsImFsb25nLXN0YWNrZWQtY2hhcnQiLCJhbGVydCIsImFkZHJlc3NlcyIsImFkZHJlc3MtYm9vayIsImFkZC1maWx0ZXIiLCJhZGQtZmF2b3JpdGUiLCJhZGQiLCJhY3Rpdml0aWVzIiwiYWN0aW9uIiwiYWNjZXB0IiwiaGludCIsImdyb3VwIiwiY2hlY2stYXZhaWxhYmlsaXR5Iiwid2VhdGhlci1wcm9vZmluZyIsInBheW1lbnQtYXBwcm92YWwiLCJiYXRjaC1wYXltZW50cyIsImJlZCIsImFyb2Jhc2UiLCJmYW1pbHktY2FyZSIsImZhdm9yaXRlIiwibmF2aWdhdGlvbi1yaWdodC1hcnJvdyIsIm5hdmlnYXRpb24tbGVmdC1hcnJvdyIsImUtY2FyZSIsImxlc3MiLCJsYXRlbmVzcyIsImxhYiIsImludGVybmV0LWJyb3dzZXIiLCJpbnN0YW5jZSIsImluc3BlY3Rpb24iLCJpbWFnZS12aWV3ZXIiLCJob21lIiwiZ3JpZCIsImdvYWxzZWVrIiwiZ2VuZXJhbC1sZWF2ZS1yZXF1ZXN0IiwiY3JlYXRlLWxlYXZlLXJlcXVlc3QiLCJmbGlnaHQiLCJmaWx0ZXIiLCJmYXZvcml0ZS1saXN0IiwiZmFjdG9yeSIsImVuZG9zY29weSIsImVtcGxveWVlLXBhbmUiLCJlbXBsb3llZS1hcHByb3ZhbHMiLCJlbWFpbC1yZWFkIiwiZWxlY3Ryb2NhcmRpb2dyYW0iLCJkb2N1bWVudHMiLCJkZWNpc2lvbiIsImRhdGFiYXNlIiwiY3VzdG9tZXItaGlzdG9yeSIsImN1c3RvbWVyIiwiY3JlZGl0LWNhcmQiLCJjcmVhdGUtZW50cnktdGltZSIsImNvbnRhY3RzIiwiY29tcGFyZSIsImNsaW5pY2FsLW9yZGVyIiwiY2hhaW4tbGluayIsInB1bGwtZG93biIsImNhcmdvLXRyYWluIiwiY2FyLXJlbnRhbCIsImJ1c2luZXNzLWNhcmQiLCJiYXItY29kZSIsImZvbGRlci1ibGFuayIsInBhc3Nlbmdlci10cmFpbiIsInF1ZXN0aW9uLW1hcmsiLCJ3b3JsZCIsImlwaG9uZSIsImlwYWQiLCJ3YXJuaW5nIiwic29ydCIsImNvdXJzZS1ib29rIiwiY291cnNlLXByb2dyYW0iLCJhZGQtY291cnNlYm9vayIsInByaW50Iiwic2F2ZSIsInBsYXkiLCJwYXVzZSIsInJlY29yZCIsInJlc3BvbnNlIiwicHVzaHBpbi1vbiIsInB1c2hwaW4tb2ZmIiwidW5mYXZvcml0ZSIsImxlYXJuaW5nLWFzc2lzdGFudCIsInRpbWVzaGVldCIsInRpbWUtZW50cnktcmVxdWVzdCIsImxpc3QiLCJhY3Rpb24tc2V0dGluZ3MiLCJzaGFyZSIsImZlZWQiLCJyb2xlIiwiZmxhZyIsInBvc3QiLCJpbnNwZWN0IiwiaW5zcGVjdC1kb3duIiwiYXBwb2ludG1lbnQtMiIsInRhcmdldC1ncm91cCIsIm1hcmtldGluZy1jYW1wYWlnbiIsIm5vdGlmaWNhdGlvbiIsImNvbW1lbnQiLCJzaGlwcGluZy1zdGF0dXMiLCJjb2xsYWJvcmF0ZSIsInNob3J0Y3V0IiwibGVhZC1vdXRkYXRlZCIsInRvb2xzLW9wcG9ydHVuaXR5IiwicGVybWlzc2lvbiIsInN1cHBsaWVyIiwidGFibGUtdmlldyIsInRhYmxlLWNoYXJ0Iiwic3dpdGNoLXZpZXdzIiwiZS1sZWFybmluZyIsIm1hbmFnZXIiLCJzd2l0Y2gtY2xhc3NlcyIsInNpbXBsZS1wYXltZW50Iiwic2lnbmF0dXJlIiwic2FsZXMtb3JkZXItaXRlbSIsInNhbGVzLW9yZGVyIiwicmVxdWVzdCIsInJlY2VpcHQiLCJwdXp6bGUiLCJwcm9jZXNzIiwicHJpdmF0ZSIsInBvcHVwLXdpbmRvdyIsInBlcnNvbi1wbGFjZWhvbGRlciIsInBlci1kaWVtIiwicGFwZXItcGxhbmUiLCJwYWlkLWxlYXZlIiwicGRmLXJlYWRlciIsIm92ZXJ2aWV3LWNoYXJ0Iiwib3ZlcmxheSIsIm9yZy1jaGFydCIsIm51bWJlci1zaWduIiwibm90aWZpY2F0aW9uLTIiLCJteS1zYWxlcy1vcmRlciIsIm1lYWwiLCJsb2FuIiwib3JkZXItc3RhdHVzIiwiY3VzdG9tZXItb3JkZXItZW50cnkiLCJwZXJmb3JtYW5jZSIsIm1lbnUiLCJlbXBsb3llZS1sb29rdXAiLCJlZHVjYXRpb24iLCJjdXN0b21lci1icmllZmluZyIsImN1c3RvbWVyLWFuZC1jb250YWN0cyIsIm15LXZpZXciLCJhY2NlbGVyYXRlZCIsInRvLWJlLXJldmlld2VkIiwid2FybmluZzIiLCJmZWVkZXItYXJyb3ciLCJxdWFsaXR5LWlzc3VlIiwid29ya2Zsb3ctdGFza3MiLCJjcmVhdGUiLCJob21lLXNoYXJlIiwiZ2xvYmUiLCJ0YWdzIiwid29yay1oaXN0b3J5IiwieC1yYXkiLCJ3b3VuZHMtZG9jIiwid2ViLWNhbSIsIndhaXZlciIsInZlcnRpY2FsLWJhci1jaGFydCIsInVwc3RhY2tlZC1jaGFydCIsInRyaXAtcmVwb3J0IiwibWljcm9waG9uZSIsInVucGFpZC1sZWF2ZSIsInRyZWUiLCJ0b2FzdGVyLXVwIiwidG9hc3Rlci10b3AiLCJ0b2FzdGVyLWRvd24iLCJ0aW1lLWFjY291bnQiLCJ0aGVhdGVyIiwidGF4aSIsInN1YndheS10cmFpbiIsInN0dWR5LWxlYXZlIiwic3RldGhvc2NvcGUiLCJzdGVwIiwic29ub2dyYXBoeSIsInNvY2NvciIsInBoeXNpY2FsLWFjdGl2aXR5IiwicGhhcm1hY3kiLCJvZmZpY2lhbC1zZXJ2aWNlIiwib2Zmc2l0ZS13b3JrIiwibnV0cml0aW9uLWFjdGl2aXR5IiwibmV3c3BhcGVyIiwibW9uaXRvci1wYXltZW50cyIsIm1hcC0yIiwibWFjaGluZSIsIm1yaS1zY2FuIiwiZW5kLXVzZXItZXhwZXJpZW5jZS1tb25pdG9yaW5nIiwidW53aXJlZCIsImN1c3RvbWVyLWZpbmFuY2lhbC1mYWN0LXNoZWV0IiwicmV0YWlsLXN0b3JlLW1hbmFnZXIiLCJOZXR3ZWF2ZXItYnVzaW5lc3MtY2xpZW50IiwiZWxlY3Ryb25pYy1tZWRpY2FsLXJlY29yZCIsImVhbS13b3JrLW9yZGVyIiwiY3VzdG9tZXItdmlldyIsImNybS1zZXJ2aWNlLW1hbmFnZXIiLCJjcm0tc2FsZXMiLCJ3aWRnZXRzIiwiY29tbWlzc2lvbi1jaGVjayIsImNvbGxlY3Rpb25zLWluc2lnaHQiLCJjbGluaWNhbC10YXN0LXRyYWNrZXIiLCJjaXRpemVuLWNvbm5lY3QiLCJjYXJ0LWFwcHJvdmFsIiwiY2FwaXRhbC1wcm9qZWN0cyIsImJvLXN0cmF0ZWd5LW1hbmFnZW1lbnQiLCJidXNpbmVzcy1vYmplY3RzLW1vYmlsZSIsImJ1c2luZXNzLW9iamVjdHMtZXhwbG9yZXIiLCJidXNpbmVzcy1vYmplY3RzLWV4cGVyaWVuY2UiLCJiYnlkLWRhc2hib2FyZCIsImJieWQtYWN0aXZlLXNhbGVzIiwiYnVzaW5lc3MtYnktZGVzaWduIiwiYnVzaW5lc3Mtb25lIiwic2FwLWJveCIsIm1hbmFnZXItaW5zaWdodCIsImFjY291bnRpbmctZG9jdW1lbnQtdmVyaWZpY2F0aW9uIiwiaHItYXBwcm92YWwiLCJpZGVhLXdhbGwiLCJDaGFydC1UcmVlLU1hcCIsImNhcnQtNSIsImNhcnQtNCIsIndhbGxldCIsInZlaGljbGUtcmVwYWlyIiwidXBsb2FkIiwidW5sb2NrZWQiLCJ1bWJyZWxsYSIsInRyYXZlbC1yZXF1ZXN0IiwidHJhdmVsLWV4cGVuc2UtcmVwb3J0IiwidHJhdmVsLWl0aW5lcmFyeSIsInRpbWUtb3ZlcnRpbWUiLCJ0aGluZy10eXBlIiwidGVjaG5pY2FsLW9iamVjdCIsInRhZyIsInN5cmluZ2UiLCJzeW50YXgiLCJzdWl0Y2FzZSIsInNpbXVsYXRlIiwic2hpZWxkIiwic2hhcmUtMiIsInNhbGVzLXF1b3RlIiwicmVwb3N0IiwicHJvdmlzaW9uIiwicHJvamVjdG9yIiwiYWRkLXByb2R1Y3QiLCJwaXBlbGluZS1hbmFseXNpcyIsImFkZC1waG90byIsInBhbGV0dGUiLCJudXJzZSIsInNhbGVzLW5vdGlmaWNhdGlvbiIsIm1pbGVhZ2UiLCJtZWV0aW5nLXJvb20iLCJtZWRpYS1mb3J3YXJkIiwibWVkaWEtcGxheSIsIm1lZGlhLXBhdXNlIiwibWVkaWEtcmV2ZXJzZSIsIm1lZGlhLXJld2luZCIsIm1lYXN1cmVtZW50LWRvY3VtZW50IiwibWVhc3VyaW5nLXBvaW50IiwibWVhc3VyZSIsIm1hcC0zIiwibG9ja2VkIiwibGV0dGVyIiwiam91cm5leS1hcnJpdmUiLCJqb3VybmV5LWNoYW5nZSIsImpvdXJuZXktZGVwYXJ0IiwiaXQtc3lzdGVtIiwiaXQtaW5zdGFuY2UiLCJpdC1ob3N0IiwiaXBob25lLTIiLCJpcGFkLTIiLCJpbnZlbnRvcnkiLCJpbnN1cmFuY2UtaG91c2UiLCJpbnN1cmFuY2UtbGlmZSIsImluc3VyYW5jZS1jYXIiLCJpbml0aWF0aXZlIiwiaW5jaWRlbnQiLCJncm91cC0yIiwiZ29hbCIsImZ1bmN0aW9uYWwtbG9jYXRpb24iLCJmdWxsLXNjcmVlbiIsImZvcm0iLCJmb2Itd2F0Y2giLCJibGFuay10YWciLCJmYW1pbHktcHJvdGVjdGlvbiIsImZvbGRlciIsImZheC1tYWNoaW5lIiwiZXhhbXBsZSIsImVyYXNlciIsImVtcGxveWVlLXJlamVjdGlvbnMiLCJkcm9wLWRvd24tbGlzdCIsImRyYXctcmVjdGFuZ2xlIiwiZG9jdW1lbnQiLCJkb2N0b3IiLCJkaXNjdXNzaW9uLTIiLCJkaXNjdXNzaW9uIiwiZGltZW5zaW9uIiwiY3VzdG9tZXItYW5kLXN1cHBsaWVyIiwiY3JvcCIsImFkZC1jb250YWN0IiwiY29tcGFyZS0yIiwiY29sb3ItZmlsbCIsImNvbGxpc2lvbiIsImN1cnJpY3VsdW0iLCJjaGFydC1heGlzIiwiZnVsbC1zdGFja2VkLWNoYXJ0IiwiZnVsbC1zdGFja2VkLWNvbHVtbi1jaGFydCIsInZlcnRpY2FsLWJhci1jaGFydC0yIiwiaG9yaXpvbnRhbC1iYXItY2hhcnQtMiIsImhvcml6b250YWwtc3RhY2tlZC1jaGFydCIsInZlcnRpY2FsLXN0YWNrZWQtY2hhcnQiLCJjaG9yb3BsZXRoLWNoYXJ0IiwiZ2VvZ3JhcGhpYy1idWJibGUtY2hhcnQiLCJtdWx0aXBsZS1yYWRhci1jaGFydCIsInJhZGFyLWNoYXJ0IiwiY3Jvc3NlZC1saW5lLWNoYXJ0IiwibXVsdGlwbGUtbGluZS1jaGFydCIsIm11bHRpcGxlLWJhci1jaGFydCIsImxpbmUtY2hhcnQiLCJsaW5lLWNoYXJ0LWR1YWwtYXhpcyIsImJ1YmJsZS1jaGFydCIsInNjYXR0ZXItY2hhcnQiLCJtdWx0aXBsZS1waWUtY2hhcnQiLCJjb2x1bW4tY2hhcnQtZHVhbC1heGlzIiwidGFnLWNsb3VkLWNoYXJ0IiwiYXJlYS1jaGFydCIsImNhdXNlIiwiY2FydC0zIiwiY2FydC0yIiwiYnVzLXB1YmxpYy10cmFuc3BvcnQiLCJidXJnbGFyeSIsImJ1aWxkaW5nIiwiYm9yZGVyIiwiYm9va21hcmsiLCJiYWRnZSIsImF0dGFjaG1lbnQtYXVkaW8iLCJhdHRhY2htZW50LXZpZGVvIiwiYXR0YWNobWVudC1odG1sIiwiYXR0YWNobWVudC1waG90byIsImF0dGFjaG1lbnQtZS1wdWIiLCJhdHRhY2htZW50LXppcC1maWxlIiwiYXR0YWNobWVudC10ZXh0LWZpbGUiLCJhZGQtZXF1aXBtZW50IiwiYWRkLWFjdGl2aXR5IiwiYWN0aXZpdHktaW5kaXZpZHVhbCIsImFjdGl2aXR5LTIiLCJhZGQtYWN0aXZpdHktMiIsImFjdGl2aXR5LWl0ZW1zIiwiYWN0aXZpdHktYXNzaWduZWQtdG8tZ29hbCIsInN0YXR1cy1jb21wbGV0ZWQiLCJzdGF0dXMtZXJyb3IiLCJzdGF0dXMtaW5hY3RpdmUiLCJzdGF0dXMtaW4tcHJvY2VzcyIsImJsYW5rLXRhZy0yIiwiY2FydC1mdWxsIiwibG9jYXRlLW1lIiwicGFnaW5nIiwiY29tcGFueS12aWV3IiwiZG9jdW1lbnQtdGV4dCIsImV4cGxvcmVyIiwicGVyc29ubmVsLXZpZXciLCJzb3J0aW5nLXJhbmtpbmciLCJkcmlsbC1kb3duIiwiZHJpbGwtdXAiLCJ2ZHMtZmlsZSIsInNhcC1sb2dvLXNoYXBlIiwiZm9sZGVyLWZ1bGwiLCJzeXN0ZW0tZXhpdCIsInN5c3RlbS1leGl0LTIiLCJjbG9zZS1jb21tYW5kLWZpZWxkIiwib3Blbi1jb21tYW5kLWZpZWxkIiwic3lzLWVudGVyLTIiLCJzeXMtZW50ZXIiLCJzeXMtaGVscC0yIiwic3lzLWhlbHAiLCJzeXMtYmFjayIsInN5cy1iYWNrLTIiLCJzeXMtY2FuY2VsIiwic3lzLWNhbmNlbC0yIiwib3Blbi1mb2xkZXIiLCJzeXMtZmluZC1uZXh0Iiwic3lzLWZpbmQiLCJzeXMtbW9uaXRvciIsInN5cy1wcmV2LXBhZ2UiLCJzeXMtZmlyc3QtcGFnZSIsInN5cy1uZXh0LXBhZ2UiLCJzeXMtbGFzdC1wYWdlIiwiZ2VuZXJhdGUtc2hvcnRjdXQiLCJjcmVhdGUtc2Vzc2lvbiIsImRpc3BsYXktbW9yZSIsImVudGVyLW1vcmUiLCJ6b29tLWluIiwiem9vbS1vdXQiLCJoZWFkZXIiLCJkZXRhaWwtdmlldyIsImNvbGxhcHNlIiwiZXhwYW5kIiwicG9zaXRpdmUiLCJuZWdhdGl2ZSIsImRpc3BsYXkiLCJtZW51MiIsInJlZG8iLCJ1bmRvIiwibmF2aWdhdGlvbi11cC1hcnJvdyIsIm5hdmlnYXRpb24tZG93bi1hcnJvdyIsImRvd24iLCJ1cCIsInNoZWxmIiwiYmFja2dyb3VuZCIsInJlc2l6ZSIsIm1vdmUiLCJzaG93IiwiaGlkZSIsIm5hdi1iYWNrIiwiZXJyb3IiLCJzbGltLWFycm93LXJpZ2h0Iiwic2xpbS1hcnJvdy1sZWZ0Iiwic2xpbS1hcnJvdy1kb3duIiwic2xpbS1hcnJvdy11cCIsImZvcndhcmQiLCJvdmVyZmxvdyIsInZhbHVlLWhlbHAiLCJtdWx0aS1zZWxlY3QiLCJleGl0LWZ1bGwtc2NyZWVuIiwic3lzLWFkZCIsInN5cy1taW51cyIsImRyb3Bkb3duIiwiZXhwYW5kLWdyb3VwIiwiY29sbGFwc2UtZ3JvdXAiLCJ2ZXJ0aWNhbC1ncmlwIiwiaG9yaXpvbnRhbC1ncmlwIiwic29ydC1kZXNjZW5kaW5nIiwic29ydC1hc2NlbmRpbmciXTt2YXIgYT1bImUwMDAiLCJlMDAxIiwiZTAwMiIsImUwMDMiLCJlMDA0IiwiZTAwNSIsImUwMDYiLCJlMDA3IiwiZTAwOCIsImUwMDkiLCJlMDBhIiwiZTAwYiIsImUwMGMiLCJlMDBkIiwiZTAwZSIsImUwMGYiLCJlMDEwIiwiZTAxMSIsImUwMTIiLCJlMDEzIiwiZTAxNCIsImUwMTUiLCJlMDE2IiwiZTAxNyIsImUwMTgiLCJlMDE5IiwiZTAxYSIsImUwMWIiLCJlMDFjIiwiZTAxZCIsImUwMWUiLCJlMDFmIiwiZTAyMCIsImUwMjEiLCJlMDIyIiwiZTAyMyIsImUwMjQiLCJlMDI1IiwiZTAyNiIsImUwMjciLCJlMDI4IiwiZTAyOSIsImUwMmEiLCJlMDJiIiwiZTAyYyIsImUwMmQiLCJlMDJlIiwiZTAyZiIsImUwMzAiLCJlMDMxIiwiZTAzMiIsImUwMzMiLCJlMDM0IiwiZTAzNSIsImUwMzYiLCJlMDM3IiwiZTAzOCIsImUwMzkiLCJlMDNhIiwiZTAzYiIsImUwM2MiLCJlMDNkIiwiZTAzZSIsImUwM2YiLCJlMDQwIiwiZTA0MSIsImUwNDIiLCJlMDQzIiwiZTA0NCIsImUwNDUiLCJlMDQ2IiwiZTA0NyIsImUwNDgiLCJlMDQ5IiwiZTA0YSIsImUwNGIiLCJlMDRjIiwiZTA0ZCIsImUwNGUiLCJlMDRmIiwiZTA1MCIsImUwNTEiLCJlMDUyIiwiZTA1MyIsImUwNTQiLCJlMDU1IiwiZTA1NiIsImUwNTciLCJlMDU4IiwiZTA1OSIsImUwNWEiLCJlMDViIiwiZTA1YyIsImUwNWQiLCJlMDVlIiwiZTA1ZiIsImUwNjAiLCJlMDYxIiwiZTA2MiIsImUwNjMiLCJlMDY0IiwiZTA2NSIsImUwNjYiLCJlMDY3IiwiZTA2OCIsImUwNjkiLCJlMDZhIiwiZTA2YiIsImUwNmMiLCJlMDZkIiwiZTA2ZSIsImUwNmYiLCJlMDcwIiwiZTA3MSIsImUwNzIiLCJlMDczIiwiZTA3NCIsImUwNzUiLCJlMDc2IiwiZTA3NyIsImUwNzgiLCJlMDc5IiwiZTA3YSIsImUwN2IiLCJlMDdjIiwiZTA3ZCIsImUwN2UiLCJlMDdmIiwiZTA4MCIsImUwODEiLCJlMDgyIiwiZTA4MyIsImUwODQiLCJlMDg1IiwiZTA4NiIsImUwODciLCJlMDg4IiwiZTA4OSIsImUwOGEiLCJlMDhiIiwiZTA4YyIsImUwOGQiLCJlMDhlIiwiZTA4ZiIsImUwOTAiLCJlMDkxIiwiZTA5MiIsImUwOTMiLCJlMDk0IiwiZTA5NSIsImUwOTYiLCJlMDk3IiwiZTA5OCIsImUwOTkiLCJlMDlhIiwiZTA5YiIsImUwOWMiLCJlMDlkIiwiZTA5ZSIsImUwOWYiLCJlMGEwIiwiZTBhMSIsImUwYTIiLCJlMGEzIiwiZTBhNCIsImUwYTUiLCJlMGE2IiwiZTBhNyIsImUwYTgiLCJlMGE5IiwiZTBhYSIsImUwYWIiLCJlMGFjIiwiZTBhZCIsImUwYWUiLCJlMGFmIiwiZTBiMCIsImUwYjEiLCJlMGIyIiwiZTBiMyIsImUwYjQiLCJlMGI1IiwiZTBiNiIsImUwYjciLCJlMGI4IiwiZTBiOSIsImUwYmEiLCJlMGJiIiwiZTBiYyIsImUwYmQiLCJlMGJlIiwiZTBiZiIsImUwYzAiLCJlMGMxIiwiZTBjMiIsImUwYzMiLCJlMGM0IiwiZTBjNSIsImUwYzYiLCJlMGM3IiwiZTBjOCIsImUwYzkiLCJlMGNhIiwiZTBjYiIsImUwY2MiLCJlMGNkIiwiZTBjZSIsImUwY2YiLCJlMGQwIiwiZTBkMSIsImUwZDIiLCJlMGQzIiwiZTBkNCIsImUwZDUiLCJlMGQ2IiwiZTBkNyIsImUwZDgiLCJlMGQ5IiwiZTBkYSIsImUwZGIiLCJlMGRjIiwiZTBkZCIsImUwZGUiLCJlMGRmIiwiZTBlMCIsImUwZTEiLCJlMGUyIiwiZTBlMyIsImUwZTQiLCJlMGU1IiwiZTBlNiIsImUwZTciLCJlMGU4IiwiZTBlOSIsImUwZWEiLCJlMGViIiwiZTBlYyIsImUwZWQiLCJlMGVlIiwiZTBlZiIsImUwZjAiLCJlMGYxIiwiZTBmMiIsImUwZjMiLCJlMGY0IiwiZTBmNSIsImUwZjYiLCJlMGY3IiwiZTBmOCIsImUwZjkiLCJlMGZhIiwiZTBmYiIsImUwZmMiLCJlMGZkIiwiZTBmZSIsImUwZmYiLCJlMTAwIiwiZTEwMSIsImUxMDIiLCJlMTAzIiwiZTEwNCIsImUxMDUiLCJlMTA2IiwiZTEwNyIsImUxMDgiLCJlMTA5IiwiZTEwYSIsImUxMGIiLCJlMTBjIiwiZTEwZCIsImUxMGUiLCJlMTBmIiwiZTExMCIsImUxMTEiLCJlMTEyIiwiZTExMyIsImUxMTQiLCJlMTE1IiwiZTExNiIsImUxMTciLCJlMTE4IiwiZTExOSIsImUxMWEiLCJlMTFiIiwiZTExYyIsImUxMWQiLCJlMTFlIiwiZTExZiIsImUxMjAiLCJlMTIxIiwiZTEyMiIsImUxMjMiLCJlMTI0IiwiZTEyNSIsImUxMjYiLCJlMTI3IiwiZTEyOCIsImUxMjkiLCJlMTJhIiwiZTEyYiIsImUxMmMiLCJlMTJkIiwiZTEyZSIsImUxMmYiLCJlMTMwIiwiZTEzMSIsImUxMzIiLCJlMTMzIiwiZTEzNCIsImUxMzUiLCJlMTM2IiwiZTEzNyIsImUxMzgiLCJlMTM5IiwiZTEzYSIsImUxM2IiLCJlMTNjIiwiZTEzZCIsImUxM2UiLCJlMTNmIiwiZTE0MCIsImUxNDEiLCJlMTQyIiwiZTE0MyIsImUxNDQiLCJlMTQ1IiwiZTE0NiIsImUxNDciLCJlMTQ4IiwiZTE0OSIsImUxNGEiLCJlMTRiIiwiZTE0YyIsImUxNGQiLCJlMTRlIiwiZTE0ZiIsImUxNTAiLCJlMTUxIiwiZTE1MiIsImUxNTMiLCJlMTU0IiwiZTE1NSIsImUxNTYiLCJlMTU3IiwiZTE1OCIsImUxNTkiLCJlMTVhIiwiZTE1YiIsImUxNWMiLCJlMTVkIiwiZTE1ZSIsImUxNWYiLCJlMTYwIiwiZTE2MSIsImUxNjIiLCJlMTYzIiwiZTE2NCIsImUxNjUiLCJlMTY2IiwiZTE2NyIsImUxNjgiLCJlMTY5IiwiZTE2YSIsImUxNmIiLCJlMTZjIiwiZTE2ZCIsImUxNmUiLCJlMTZmIiwiZTE3MCIsImUxNzEiLCJlMTcyIiwiZTE3MyIsImUxNzQiLCJlMTc1IiwiZTE3NiIsImUxNzciLCJlMTc4IiwiZTE3OSIsImUxN2EiLCJlMTdiIiwiZTE3YyIsImUxN2QiLCJlMTdlIiwiZTE3ZiIsImUxODAiLCJlMTgxIiwiZTE4MiIsImUxODMiLCJlMTg0IiwiZTE4NSIsImUxODYiLCJlMTg3IiwiZTE4OCIsImUxODkiLCJlMThhIiwiZTE4YiIsImUxOGMiLCJlMThkIiwiZTE4ZSIsImUxOGYiLCJlMTkwIiwiZTE5MSIsImUxOTIiLCJlMTkzIiwiZTE5NCIsImUxOTUiLCJlMTk2IiwiZTE5NyIsImUxOTgiLCJlMTk5IiwiZTE5YSIsImUxOWIiLCJlMTljIiwiZTE5ZCIsImUxOWUiLCJlMTlmIiwiZTFhMCIsImUxYTEiLCJlMWEyIiwiZTFhMyIsImUxYTQiLCJlMWE1IiwiZTFhNiIsImUxYTciLCJlMWE4IiwiZTFhOSIsImUxYWEiLCJlMWFiIiwiZTFhYyIsImUxYWQiLCJlMWFlIiwiZTFhZiIsImUxYjAiLCJlMWIxIiwiZTFiMiIsImUxYjMiLCJlMWI0IiwiZTFiNSIsImUxYjYiLCJlMWI3IiwiZTFiOCIsImUxYjkiLCJlMWJhIiwiZTFiYiIsImUxYmMiLCJlMWJkIiwiZTFiZSIsImUxYmYiLCJlMWMwIiwiZTFjMSIsImUxYzIiLCJlMWMzIiwiZTFjNCIsImUxYzUiLCJlMWM2IiwiZTFjNyIsImUxYzgiLCJlMWM5IiwiZTFjYSIsImUxY2IiLCJlMWNjIiwiZTFjZCIsImUxY2UiLCJlMWNmIiwiZTFkMCIsImUxZDEiLCJlMWQyIiwiZTFkMyIsImUxZDQiLCJlMWQ1IiwiZTFkNiIsImUxZDciLCJlMWQ4IiwiZTFkOSIsImUxZGEiLCJlMWRiIiwiZTFkYyIsImUxZGQiLCJlMWRlIiwiZTFkZiIsImUxZTAiLCJlMWUxIiwiZTFlMiIsImUxZTMiLCJlMWU0IiwiZTFlNSIsImUxZTYiLCJlMWU3IiwiZTFlOCIsImUxZTkiLCJlMWVhIiwiZTFlYiIsImUxZWMiLCJlMWVkIiwiZTFlZSIsImUxZWYiLCJlMWYwIiwiZTFmMSIsImUxZjIiLCJlMWYzIiwiZTFmNCIsImUxZjUiLCJlMWY2IiwiZTFmNyIsImUxZjgiLCJlMWY5IiwiZTIwMCIsImUxZmEiLCJlMWZiIiwiZTFmYyIsImUxZmQiXTt2YXIgbT17ImNoYWxrYm9hcmQiOnRydWUsImNhbGVuZGFyIjp0cnVlLCJhbHBoYWJldGljYWwtb3JkZXIiOnRydWUsImFkZHJlc3MtYm9vayI6dHJ1ZSwiaGludCI6dHJ1ZSwicGF5bWVudC1hcHByb3ZhbCI6dHJ1ZSwiYmF0Y2gtcGF5bWVudHMiOnRydWUsImFyb2Jhc2UiOnRydWUsInF1ZXN0aW9uLW1hcmsiOnRydWUsImxlYWQiOnRydWUsImxlYWQtb3V0ZGF0ZWQiOnRydWUsInNpbXBsZS1wYXltZW50Ijp0cnVlLCJzYWxlcy1vcmRlci1pdGVtIjp0cnVlLCJzYWxlcy1vcmRlciI6dHJ1ZSwicGVyLWRpZW0iOnRydWUsInBhaWQtbGVhdmUiOnRydWUsInBkZi1yZWFkZXIiOnRydWUsIm15LXNhbGVzLW9yZGVyIjp0cnVlLCJsb2FuIjp0cnVlLCJnbG9iZSI6dHJ1ZSwid2FpdmVyIjp0cnVlLCJ1bnBhaWQtbGVhdmUiOnRydWUsImN1c3RvbWVyLWZpbmFuY2lhbC1mYWN0LXNoZWV0Ijp0cnVlLCJjcm0tc2FsZXMiOnRydWUsImNvbW1pc3Npb24tY2hlY2siOnRydWUsImNvbGxlY3Rpb25zLWluc2lnaHQiOnRydWUsImNhcGl0YWwtcHJvamVjdHMiOnRydWUsImJ1c2luZXNzLW9uZSI6dHJ1ZSwidHJhdmVsLWV4cGVuc2UiOnRydWUsInRyYXZlbC1leHBlbnNlLXJlcG9ydCI6dHJ1ZSwidHJhdmVsLXJlcXVlc3QiOnRydWUsInRpbWUtb3ZlcnRpbWUiOnRydWUsInNhbGVzLXF1b3RlIjp0cnVlLCJzYWxlcy1ub3RpZmljYXRpb24iOnRydWUsImluY2lkZW50Ijp0cnVlLCJtb25leS1iaWxscyI6dHJ1ZSwic2FsZXMtZG9jdW1lbnQiOnRydWUsIm9wcG9ydHVuaXRpZXMiOnRydWUsImV4cGVuc2UtcmVwb3J0Ijp0cnVlLCJtb25pdG9yLXBheW1lbnRzIjp0cnVlLCJ3aWRnZXRzIjp0cnVlLCJzeXMtaGVscC0yIjp0cnVlLCJzeXMtaGVscCI6dHJ1ZSwiYWNjZXB0Ijp0cnVlLCJhY2NvdW50aW5nLWRvY3VtZW50LXZlcmlmaWNhdGlvbiI6dHJ1ZSwiYWN0aXZpdGllcyI6dHJ1ZSwiYWN0aXZpdHktMiI6dHJ1ZSwiYWRkLWFjdGl2aXR5Ijp0cnVlLCJhZGQtYWN0aXZpdHktMiI6dHJ1ZSwiYXBwcm92YWxzIjp0cnVlLCJiYnlkLWFjdGl2ZS1zYWxlcyI6dHJ1ZSwiYnVzaW5lc3MtYnktZGVzaWduIjp0cnVlLCJjYXJ0LWFwcHJvdmFsIjp0cnVlLCJjb21wbGV0ZSI6dHJ1ZSwiY3VzdG9tZXItb3JkZXItZW50cnkiOnRydWUsImVtcGxveWVlLWFwcHJvdmFscyI6dHJ1ZSwiaHItYXBwcm92YWwiOnRydWUsImtwaS1jb3Jwb3JhdGUtcGVyZm9ybWFuY2UiOnRydWUsImtwaS1tYW5hZ2luZy1teS1hcmVhIjp0cnVlLCJzdXJ2ZXkiOnRydWUsInN5cy1lbnRlciI6dHJ1ZSwic3lzLWVudGVyLTIiOnRydWUsInRhc2siOnRydWV9O3ZhciBzPSJTQVAtaWNvbnMiO3ZhciBwPSJzYXAtaWNvbiI7dmFyIHI9e307dmFyIGY9ZmFsc2U7dmFyIGI9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoKX07Yi5jcmVhdGVDb250cm9sQnlVUkk9ZnVuY3Rpb24oYyxkKXtpZih0eXBlb2YgYz09PSJzdHJpbmciKXtjPXtzcmM6Y319aWYoYyYmYy5zcmMpe3ZhciBTPWMuc3JjLEM9ZDtpZihiLmlzSWNvblVSSShTKSl7aWYoIXNhcC51aS5jb3JlLkljb24pe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLkljb24iKX1DPXNhcC51aS5jb3JlLkljb247aWYoYy50YXApe2MucHJlc3M9Yy50YXA7ZGVsZXRlIGMudGFwfX1pZih0eXBlb2YgQz09PSJmdW5jdGlvbiIpe3JldHVybiBuZXcgQyhjKX19fTtiLmFkZEljb249ZnVuY3Rpb24oaSxjLGQpe2lmKHR5cGVvZiBkPT09InN0cmluZyIpe2Q9e2ZvbnRGYW1pbHk6YXJndW1lbnRzWzJdLGNvbnRlbnQ6YXJndW1lbnRzWzNdLG92ZXJXcml0ZTohIWFyZ3VtZW50c1s0XSxzdXBwcmVzc01pcnJvcmluZzohIWFyZ3VtZW50c1s1XX19aWYoIXJbY10pe3JbY109e319dmFyIGU9cltjXSxnLG89ZVtpXSxoO2lmKG8mJihjPT09dW5kZWZpbmVkfHwhZC5vdmVyV3JpdGUpKXtxLnNhcC5sb2cud2FybmluZygiaWNvbiB3aXRoIHRoZSBzYW1lIGljb25OYW1lIGluIHRoZSBjb2xsZWN0aW9uIGFscmVhZHkgZXhpc3RzLCBzcGVjaWZ5IHRoZSBsYXN0IHBhcmFtZXRlciB0byB0cnVlIGluIG9yZGVyIHRvIG92ZXJ3cml0ZSIpO3JldHVybn1oPXtwcm90b2NvbDpwLGhvc3RuYW1lOmN8fGkscGF0aDpjP2k6dW5kZWZpbmVkfTtnPXtuYW1lOmksY29sbGVjdGlvbjpjLHVyaTp3aW5kb3cuVVJJLmJ1aWxkKGgpLGZvbnRGYW1pbHk6ZC5mb250RmFtaWx5LGNvbnRlbnQ6U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChkLmNvbnRlbnQsMTYpKSxzdXBwcmVzc01pcnJvcmluZzpkLnN1cHByZXNzTWlycm9yaW5nLHNraXBNaXJyb3Jpbmc6ZC5zdXBwcmVzc01pcnJvcmluZ307ZVtpXT1nO3JldHVybiBnfTtiLmdldEljb25VUkk9ZnVuY3Rpb24oaSxjKXt2YXIgZD1yW2NdO2lmKGQmJmRbaV0pe3JldHVybiBkW2ldLnVyaX19O2IuZ2V0SWNvbkluZm89ZnVuY3Rpb24oaSxjKXtiLmluc2VydEZvbnRGYWNlU3R5bGUoKTt2YXIgUD1pLGQ9YyxlLGc7aWYodGhpcy5pc0ljb25VUkkoaSkpe2U9d2luZG93LlVSSS5wYXJzZShpKTtpZihlLnBhdGgubGVuZ3RoPT09MSl7UD1lLmhvc3RuYW1lO2Q9dW5kZWZpbmVkfWVsc2V7ZD1lLmhvc3RuYW1lO1A9ZS5wYXRoLnN1YnN0cigxLGUucGF0aC5sZW5ndGgpfX1nPXJbZF07cmV0dXJuIGcmJmdbUF19O2IuaXNJY29uVVJJPWZ1bmN0aW9uKHUpe2lmKCF1KXtyZXR1cm4gZmFsc2V9dmFyIGM9d2luZG93LlVSSS5wYXJzZSh1KTtyZXR1cm4oYy5wcm90b2NvbD09PXApJiYhIWMuaG9zdG5hbWV9O2IuZ2V0SWNvbkNvbGxlY3Rpb25OYW1lcz1mdW5jdGlvbigpe3ZhciBuPVtdO3EubWFwKHIsZnVuY3Rpb24odixrKXtuLnB1c2goayl9KTtyZXR1cm4gbn07Yi5nZXRJY29uTmFtZXM9ZnVuY3Rpb24oYyl7dmFyIGQ9cltjXSxuPVtdO3EubWFwKGQsZnVuY3Rpb24odixrKXtuLnB1c2goayl9KTtyZXR1cm4gbn07Yi5pbnNlcnRGb250RmFjZVN0eWxlPWZ1bmN0aW9uKCl7aWYoZil7cmV0dXJufXZhciBGPXEuc2FwLmdldE1vZHVsZVBhdGgoInNhcC51aS5jb3JlIiwnLycpKyJ0aGVtZXMvYmFzZS9mb250cy8iLHcsYyxkLGk7aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJnNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPDEwJiZ3aW5kb3cuc2VsZiE9PXdpbmRvdy50b3Ape0Y9Yi5fY2FsY0Fic1BhdGgoRix3aW5kb3cubG9jYXRpb24uaHJlZil9ZD0iQGZvbnQtZmFjZSB7IisiZm9udC1mYW1pbHk6ICdTQVAtaWNvbnMnOyIrInNyYzogdXJsKCciK0YrIlNBUC1pY29ucy5lb3QnKTsiKyJzcmM6IHVybCgnIitGKyJTQVAtaWNvbnMuZW90PyNpZWZpeCcpIGZvcm1hdCgnZW1iZWRkZWQtb3BlbnR5cGUnKSwiKyJ1cmwoJyIrRisiU0FQLWljb25zLnR0ZicpIGZvcm1hdCgndHJ1ZXR5cGUnKTsiKyJmb250LXdlaWdodDogbm9ybWFsOyIrImZvbnQtc3R5bGU6IG5vcm1hbDsiKyJ9IjtxKCdoZWFkJykuYXBwZW5kKCc8c3R5bGUgdHlwZT0idGV4dC9jc3MiPicrZCsnPC9zdHlsZT4nKTtmPXRydWV9O2IuX2NhbGNBYnNQYXRoPWZ1bmN0aW9uKFIsQil7Qj1CJiZCLnJlcGxhY2UoL1w/Lip8Iy4qL2csIiIpO3ZhciB1PW5ldyB3aW5kb3cuVVJJKFIpLEE9dS5hYnNvbHV0ZVRvKEIpO3JldHVybiBBLmhyZWYoKX07Yi5faXNNaXJyb3JpbmdTa2lwcGVkPWZ1bmN0aW9uKGkpe3JldHVybiEhbVtpXX07cS5lYWNoKEksZnVuY3Rpb24oaSxuKXtiLmFkZEljb24obix1bmRlZmluZWQse2ZvbnRGYW1pbHk6cyxjb250ZW50OmFbaV0sc3VwcHJlc3NNaXJyb3Jpbmc6Yi5faXNNaXJyb3JpbmdTa2lwcGVkKG4pfSl9KTtyZXR1cm4gYn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkljb25SZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkljb25SZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ljb25SZW5kZXJlciIsWyJqcXVlcnkuc2FwLmdsb2JhbCJdLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgST17fTtJLnJlbmRlcj1mdW5jdGlvbihyLGMpe2lmKCFjLmdldFZpc2libGUoKSl7cmV0dXJufXZhciBpPXNhcC51aS5jb3JlLkljb25Qb29sLmdldEljb25JbmZvKGMuZ2V0U3JjKCkpLHc9Yy5nZXRXaWR0aCgpLGg9Yy5nZXRIZWlnaHQoKSxDPWMuZ2V0Q29sb3IoKSxiPWMuZ2V0QmFja2dyb3VuZENvbG9yKCkscz1jLmdldFNpemUoKSx0PWMuZ2V0VG9vbHRpcF9Bc1N0cmluZygpLFQ9KHNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248OSk7ci53cml0ZSgiPHNwYW4iKTtyLndyaXRlQ29udHJvbERhdGEoYyk7aWYoIWMuZ2V0RGVjb3JhdGl2ZSgpKXtyLndyaXRlQXR0cmlidXRlKCJ0YWJpbmRleCIsMCl9aWYodCl7ci53cml0ZUF0dHJpYnV0ZUVzY2FwZWQoInRpdGxlIix0KX1pZihpKXtpZighVCl7ci53cml0ZUF0dHJpYnV0ZSgiZGF0YS1zYXAtdWktaWNvbi1jb250ZW50IixpLmNvbnRlbnQpfXIuYWRkU3R5bGUoImZvbnQtZmFtaWx5IiwiJyIraS5mb250RmFtaWx5KyInIil9aWYodyl7ci5hZGRTdHlsZSgid2lkdGgiLHcpfWlmKGgpe3IuYWRkU3R5bGUoImhlaWdodCIsaCk7ci5hZGRTdHlsZSgibGluZS1oZWlnaHQiLGgpfWlmKEMpe3IuYWRkU3R5bGUoImNvbG9yIixDKX1pZihiKXtyLmFkZFN0eWxlKCJiYWNrZ3JvdW5kLWNvbG9yIixiKX1pZihzKXtyLmFkZFN0eWxlKCJmb250LXNpemUiLHMpfXIuYWRkQ2xhc3MoInNhcFVpSWNvbiIpO2lmKGkmJiFpLnN1cHByZXNzTWlycm9yaW5nKXtyLmFkZENsYXNzKCJzYXBVaUljb25NaXJyb3JJblJUTCIpfXIud3JpdGVDbGFzc2VzKCk7ci53cml0ZVN0eWxlcygpO3Iud3JpdGUoIj4iKTtpZihpJiZUKXtyLndyaXRlKGkuY29udGVudCl9ci53cml0ZSgiPC9zcGFuPiIpfTtyZXR1cm4gSX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvclJlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yUmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Mb2NhbEJ1c3lJbmRpY2F0b3JSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgTD17fTsoZnVuY3Rpb24oKXtMLnJlbmRlcj1mdW5jdGlvbihSLGMpe1Iud3JpdGUoIjxkaXYiKTtSLndyaXRlQ29udHJvbERhdGEoYyk7Ui5hZGRDbGFzcygic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3IiKTtSLndyaXRlQ2xhc3NlcygpO1Iud3JpdGUoIj4iKTtyKFIsYyk7Ui53cml0ZSgiPC9kaXY+Iil9O3ZhciByPWZ1bmN0aW9uKFIsYyl7dmFyIEk9Yy5nZXRJZCgpO3ZhciBzPUkrIi1hbmltYXRpb24iO3ZhciBiPVsiLWxlZnRCb3giLCItbWlkZGxlQm94IiwiLXJpZ2h0Qm94Il07Ui53cml0ZSgnPGRpdicpO1Iud3JpdGVBdHRyaWJ1dGUoJ2lkJyxzKTtSLmFkZENsYXNzKCJzYXBVaUxvY2FsQnVzeUluZGljYXRvckFuaW1hdGlvbiIpO1Iud3JpdGVDbGFzc2VzKCk7Ui53cml0ZSgiPiIpO2Zvcih2YXIgaT0wO2k8Yi5sZW5ndGg7aSsrKXtSLndyaXRlKCc8ZGl2Jyk7Ui5hZGRDbGFzcygic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JCb3giKTtSLndyaXRlQ2xhc3NlcygpO1Iud3JpdGVBdHRyaWJ1dGUoImlkIixJK2JbaV0pO1Iud3JpdGUoIj4iKTtSLndyaXRlKCI8L2Rpdj4iKX1SLndyaXRlKCI8L2Rpdj4iKX19KCkpO3JldHVybiBMfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuTG9jYWxlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTG9jYWxlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvTG9jYWxlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0J10sZnVuY3Rpb24ocSxCKXsidXNlIHN0cmljdCI7dmFyIGE9L14oKD86W0EtWl17MiwzfSg/Oi1bQS1aXXszfSl7MCwzfSl8W0EtWl17NH18W0EtWl17NSw4fSkoPzotKFtBLVpdezR9KSk/KD86LShbQS1aXXsyfXxbMC05XXszfSkpPygtWzAtOUEtWl17NSw4fXwoPzpbMC05XVswLTlBLVpdezN9KSkqKD86LShbMC05QS1XWVpdKD86LVswLTlBLVpdezIsOH0pKykpKig/Oi0oWCg/Oi1bMC05QS1aXXsxLDh9KSspKT8kL2k7dmFyIEw9Qi5leHRlbmQoInNhcC51aS5jb3JlLkxvY2FsZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGwpe0IuYXBwbHkodGhpcyk7dmFyIHI9YS5leGVjKGwucmVwbGFjZSgvXy9nLCItIikpO2lmKHI9PT1udWxsKXt0aHJvdyJUaGUgZ2l2ZW4gbGFuZ3VhZ2UgZG9lcyBub3QgYWRoZXJlIHRvIEJDUC00Ny4ifXRoaXMuc0xvY2FsZUlkPWw7dGhpcy5zTGFuZ3VhZ2U9clsxXXx8bnVsbDt0aGlzLnNTY3JpcHQ9clsyXXx8bnVsbDt0aGlzLnNSZWdpb249clszXXx8bnVsbDt0aGlzLnNWYXJpYW50PShyWzRdJiZyWzRdLnNsaWNlKDEpKXx8bnVsbDt0aGlzLnNFeHRlbnNpb249cls1XXx8bnVsbDt0aGlzLnNQcml2YXRlVXNlPXJbNl18fG51bGw7aWYodGhpcy5zTGFuZ3VhZ2Upe3RoaXMuc0xhbmd1YWdlPXRoaXMuc0xhbmd1YWdlLnRvTG93ZXJDYXNlKCl9aWYodGhpcy5zU2NyaXB0KXt0aGlzLnNTY3JpcHQ9dGhpcy5zU2NyaXB0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXlthLXpdLyxmdW5jdGlvbigkKXtyZXR1cm4gJC50b1VwcGVyQ2FzZSgpfSl9aWYodGhpcy5zUmVnaW9uKXt0aGlzLnNSZWdpb249dGhpcy5zUmVnaW9uLnRvVXBwZXJDYXNlKCl9fSxnZXRMYW5ndWFnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNMYW5ndWFnZX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1NjcmlwdH0sZ2V0UmVnaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1JlZ2lvbn0sZ2V0VmFyaWFudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNWYXJpYW50fSxnZXRWYXJpYW50U3VidGFnczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNWYXJpYW50P3RoaXMuc1ZhcmlhbnQuc3BsaXQoJy0nKTpbXX0sZ2V0RXh0ZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0V4dGVuc2lvbn0sZ2V0RXh0ZW5zaW9uU3VidGFnczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNFeHRlbnNpb24/dGhpcy5zRXh0ZW5zaW9uLnNsaWNlKDIpLnNwbGl0KCctJyk6W119LGdldFByaXZhdGVVc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zUHJpdmF0ZVVzZX0sZ2V0UHJpdmF0ZVVzZVN1YnRhZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zUHJpdmF0ZVVzZT90aGlzLnNQcml2YXRlVXNlLnNsaWNlKDIpLnNwbGl0KCctJyk6W119LGhhc1ByaXZhdGVVc2VTdWJ0YWc6ZnVuY3Rpb24ocyl7cmV0dXJuIHEuaW5BcnJheShzLHRoaXMuZ2V0UHJpdmF0ZVVzZVN1YnRhZ3MoKSk+PTB9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIHI9W3RoaXMuc0xhbmd1YWdlXTtpZih0aGlzLnNTY3JpcHQpe3IucHVzaCh0aGlzLnNTY3JpcHQpfWlmKHRoaXMuc1JlZ2lvbil7ci5wdXNoKHRoaXMuc1JlZ2lvbil9aWYodGhpcy5zVmFyaWFudCl7ci5wdXNoKHRoaXMuc1ZhcmlhbnQpfWlmKHRoaXMuc0V4dGVuc2lvbil7ci5wdXNoKHRoaXMuc0V4dGVuc2lvbil9aWYodGhpcy5zUHJpdmF0ZVVzZSl7ci5wdXNoKHRoaXMuc1ByaXZhdGVVc2UpfXJldHVybiByLmpvaW4oIi0iKX0sZ2V0U0FQTG9nb25MYW5ndWFnZTpmdW5jdGlvbigpe3ZhciBsPXRoaXMuc0xhbmd1YWdlfHwiIixtO2lmKGwuaW5kZXhPZigiLSIpPj0wKXtsPWwuc2xpY2UoMCxsLmluZGV4T2YoIi0iKSl9bD1NW2xdfHxsO2lmKGw9PT0iemgiKXtpZih0aGlzLnNTY3JpcHQ9PT0iSGFudCJ8fCghdGhpcy5zU2NyaXB0JiZ0aGlzLnNSZWdpb249PT0iVFciKSl7bD0iemYifX1pZih0aGlzLnNQcml2YXRlVXNlJiYobT0vLShzYXB0cmN8c2FwcHNkKSg/Oi18JCkvaS5leGVjKHRoaXMuc1ByaXZhdGVVc2UpKSl7bD0obVsxXS50b0xvd2VyQ2FzZSgpPT09InNhcHRyYyIpPyIxUSI6IjJRIn1yZXR1cm4gbC50b1VwcGVyQ2FzZSgpfX0pO3ZhciBNPXsiaXciOiJoZSIsImppIjoieWkiLCJpbiI6ImlkIiwic2giOiJzciJ9O3ZhciBBPSJhcixmYSxoZSIuc3BsaXQoIiwiKTtMLl9pbXBsaWVzUlRMPWZ1bmN0aW9uKGwpe3ZhciBvPW5ldyBMKGwpO2w9by5nZXRMYW5ndWFnZSgpfHwiIjtsPShsJiZNW2xdKXx8bDt2YXIgcj1vLmdldFJlZ2lvbigpfHwiIjtpZihyJiZxLmluQXJyYXkobCsiXyIrcixBKT49MCl7cmV0dXJuIHRydWV9cmV0dXJuIHEuaW5BcnJheShsLEEpPj0wfTtyZXR1cm4gTH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlJlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuUmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9SZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgUj17fTtSLmV4dGVuZD1mdW5jdGlvbihwKXt2YXIgYz17X3N1cGVyOnB9O2Zvcih2YXIgZiBpbiBwKXtpZih0eXBlb2YocFtmXSk9PSJmdW5jdGlvbiIpe2NbZl09KGZ1bmN0aW9uKCl7dmFyIG09Zix0PWM7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3N1cGVyW21dLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCkpfX1yZXR1cm4gY307Ui5nZXRUZXh0QWxpZ249ZnVuY3Rpb24odCxUKXt2YXIgcz0iIjt2YXIgYz1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKTtzd2l0Y2godCl7Y2FzZSBzYXAudWkuY29yZS5UZXh0QWxpZ24uRW5kOnN3aXRjaChUKXtjYXNlIkxUUiI6cz0icmlnaHQiO2JyZWFrO2Nhc2UiUlRMIjpzPSJsZWZ0IjticmVhaztkZWZhdWx0OmlmKGMuZ2V0UlRMKCkpe3M9ImxlZnQifWVsc2V7cz0icmlnaHQifWJyZWFrfWJyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuVGV4dEFsaWduLkJlZ2luOnN3aXRjaChUKXtjYXNlIkxUUiI6cz0ibGVmdCI7YnJlYWs7Y2FzZSJSVEwiOnM9InJpZ2h0IjticmVhaztkZWZhdWx0OmlmKGMuZ2V0UlRMKCkpe3M9InJpZ2h0In1lbHNle3M9ImxlZnQifWJyZWFrfWJyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuVGV4dEFsaWduLlJpZ2h0OmlmKGMuZ2V0UlRMKCkpe2lmKFQ9PSJMVFIiKXtzPSJyaWdodCJ9fWVsc2V7cz0icmlnaHQifWJyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuVGV4dEFsaWduLkNlbnRlcjpzPSJjZW50ZXIiO2JyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuVGV4dEFsaWduLkxlZnQ6aWYoYy5nZXRSVEwoKSl7cz0ibGVmdCJ9ZWxzZXtpZihUPT0iUlRMIil7cz0ibGVmdCJ9fWJyZWFrfXJldHVybiBzfTtyZXR1cm4gUn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlNjcm9sbEJhclJlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuU2Nyb2xsQmFyUmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9TY3JvbGxCYXJSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgUz17fTtTLnJlbmRlcj1mdW5jdGlvbihyLHMpe3ZhciBhPXI7dmFyIFI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7YS5hZGRDbGFzcygic2FwVWlTY3JvbGxCYXIiKTt2YXIgYjtpZihzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe2I9InNhcFVpU2Nyb2xsQmFyVG91Y2giO2EuYWRkQ2xhc3MoYil9dmFyIHY9cy5nZXRWZXJ0aWNhbCgpO3ZhciBjPXMuZ2V0U2l6ZSgpO3ZhciBDPXMuZ2V0Q29udGVudFNpemUoKTt2YXIgQj1xLnNhcC5zY3JvbGxiYXJTaXplKGIpO3ZhciB3PUIud2lkdGg7dmFyIGg9Qi5oZWlnaHQ7aWYodil7YS53cml0ZSgiPGRpdiIpO2Eud3JpdGVDb250cm9sRGF0YShzKTthLndyaXRlKCIgc3R5bGU9XCJvdmVyZmxvdzpoaWRkZW47d2lkdGg6Iit3KyJweCIpO2lmKGMpe2Eud3JpdGUoIjtoZWlnaHQ6IitjKX1hLndyaXRlKCJcIiIpO2Eud3JpdGVDbGFzc2VzKCk7YS53cml0ZSgiPiIpO2Eud3JpdGUoIjxkaXYgIik7YS53cml0ZUF0dHJpYnV0ZSgiaWQiLHMuZ2V0SWQoKSsiLXNiIik7YS53cml0ZSgiIHN0eWxlPVwid2lkdGg6Iit3KjIrInB4O2hlaWdodDoxMDAlO292ZXJmbG93LXk6c2Nyb2xsO292ZXJmbG93LXg6aGlkZGVuIik7aWYoUil7aWYoKCEoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveCYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb249PTMuNikpJiYoISEhc2FwLnVpLkRldmljZS5icm93c2VyLnNhZmFyaSkpe2Eud3JpdGUoIjttYXJnaW4tcmlnaHQ6LSIrdysicHgiKX19ZWxzZXthLndyaXRlKCI7bWFyZ2luLWxlZnQ6LSIrdysicHg7Iil9YS53cml0ZSgiXCI+Iik7YS53cml0ZSgiPGRpdiIpO2Eud3JpdGVBdHRyaWJ1dGUoImlkIixzLmdldElkKCkrIi1zYmNudCIpO2Eud3JpdGUoIiBzdHlsZT1cIndpZHRoOiIrdysicHgiKTtpZihDKXthLndyaXRlKCI7aGVpZ2h0OiIrQyl9YS53cml0ZSgiXCIiKTthLndyaXRlKCI+Iik7YS53cml0ZSgiPC9kaXY+Iik7YS53cml0ZSgiPC9kaXY+Iik7YS53cml0ZSgiPGRpdj4gPHNwYW4gaWQ9IitzLmdldElkKCkrIi1mZnNpemUiKyIgc3R5bGU9J3Bvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAtOTAwMHB4OyBsZWZ0OiAtOTAwMHB4OyB2aXNpYmlsaXR5OiBoaWRkZW47IGxpbmUtaGVpZ2h0OiBub3JtYWw7Jz4gRkYgU2l6ZTwvc3Bhbj48L2Rpdj4iKTthLndyaXRlKCI8L2Rpdj4iKX1lbHNle2Eud3JpdGUoIjxkaXYiKTthLndyaXRlQ29udHJvbERhdGEocyk7YS53cml0ZSgiIHN0eWxlPVwib3ZlcmZsb3c6aGlkZGVuO2hlaWdodDoiK2grInB4Iik7aWYoYyl7YS53cml0ZSgiO3dpZHRoOiIrYyl9YS53cml0ZSgiXCIiKTthLndyaXRlQ2xhc3NlcygpO2Eud3JpdGUoIj4iKTthLndyaXRlKCI8ZGl2ICIpO2Eud3JpdGVBdHRyaWJ1dGUoImlkIixzLmdldElkKCkrIi1zYiIpO2Eud3JpdGUoIiBzdHlsZT1cImhlaWdodDoiK2gqMisicHg7bWFyZ2luLXRvcDotIitoKyJweDtvdmVyZmxvdy14OnNjcm9sbDtvdmVyZmxvdy15OmhpZGRlblwiPiIpO2Eud3JpdGUoIjxkaXYiKTthLndyaXRlQXR0cmlidXRlKCJpZCIscy5nZXRJZCgpKyItc2JjbnQiKTthLndyaXRlKCIgc3R5bGU9XCJoZWlnaHQ6IitoKyJweCIpO2lmKEMpe2Eud3JpdGUoIjt3aWR0aDoiK0MpfWEud3JpdGUoIlwiIik7YS53cml0ZSgiPiIpO2Eud3JpdGUoIjwvZGl2PiIpO2Eud3JpdGUoIjwvZGl2PiIpO2Eud3JpdGUoIjwvZGl2PiIpfX07cmV0dXJuIFN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5UaGVtZUNoZWNrJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVGhlbWVDaGVjaycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1RoZW1lQ2hlY2siLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvRGV2aWNlJywnc2FwL3VpL2Jhc2UvT2JqZWN0JywnanF1ZXJ5LnNhcC5zY3JpcHQnXSxmdW5jdGlvbihxLEQsQil7InVzZSBzdHJpY3QiO3NhcC51aS5fbWF4VGhlbWVDaGVja0N5Y2xlcz0xMDA7dmFyIFQ9Qi5leHRlbmQoInNhcC51aS5jb3JlLlRoZW1lQ2hlY2siLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihDKXt0aGlzLl9vQ29yZT1DO3RoaXMuX2lDb3VudD0wO3RoaXMuX0NVU1RPTUNTU0NIRUNLPS9cLnNhcFVpVGhlbWVEZXNpZ25lckN1c3RvbUNzcy9pO3RoaXMuX0NVU1RPTUlEPSJzYXAtdWktY29yZS1jdXN0b21jc3MiO3RoaXMuX2N1c3RvbUNTU0FkZGVkPWZhbHNlO3RoaXMuX3RoZW1lQ2hlY2tlZEZvckN1c3RvbT1udWxsO3RoaXMuX21BZGRpdGlvbmFsTGliQ3NzPXt9fSxnZXRJbnRlcmZhY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZmlyZVRoZW1lQ2hhbmdlZEV2ZW50OmZ1bmN0aW9uKG8sZil7Yyh0aGlzKTt2YXIgdT1zYXAudWkuX21heFRoZW1lQ2hlY2tDeWNsZXM+MDtpZih1fHxmKXtkLmFwcGx5KHRoaXMsW3RydWVdKX1lbHNle1QudGhlbWVMb2FkZWQ9dHJ1ZX1pZighbyYmIXRoaXMuX3NUaGVtZUNoZWNrSWQpe3RoaXMuX29Db3JlLmZpcmVUaGVtZUNoYW5nZWQoe3RoZW1lOnRoaXMuX29Db3JlLmdldENvbmZpZ3VyYXRpb24oKS5nZXRUaGVtZSgpfSl9fX0pO1QudGhlbWVMb2FkZWQ9ZmFsc2U7VC5jaGVja1N0eWxlPWZ1bmN0aW9uKHMsbCl7aWYodHlwZW9mKHMpPT09InN0cmluZyIpe3M9cS5zYXAuZG9tQnlJZChzKX12YXIgUz1xKHMpO3RyeXt2YXIgcj0hc3x8ISEoKHMuc2hlZXQmJnMuc2hlZXQuY3NzUnVsZXMubGVuZ3RoPjApfHwhIShzLnN0eWxlU2hlZXQmJnMuc3R5bGVTaGVldC5jc3NUZXh0Lmxlbmd0aD4wKXx8ISEocy5pbm5lckhUTUwmJnMuaW5uZXJIVE1MLmxlbmd0aD4wKSk7dmFyIGY9Uy5hdHRyKCJzYXAtdWktcmVhZHkiKTtmPSEhKGY9PT0idHJ1ZSJ8fGY9PT0iZmFsc2UiKTtpZihsKXtxLnNhcC5sb2cuZGVidWcoIlRoZW1lQ2hlY2s6IENoZWNrIHN0eWxlcyAnIitTLmF0dHIoImlkIikrIic6ICIrcisiLyIrZisiLyIrISFzKX1yZXR1cm4gcnx8Zn1jYXRjaChlKXt9aWYobCl7cS5zYXAubG9nLmRlYnVnKCJUaGVtZUNoZWNrOiBFcnJvciBkdXJpbmcgY2hlY2sgc3R5bGVzICciK1MuYXR0cigiaWQiKSsiJzogZmFsc2UvZmFsc2UvIishIXMpfXJldHVybiBmYWxzZX07ZnVuY3Rpb24gYyh0KXtULnRoZW1lTG9hZGVkPWZhbHNlO2lmKHQuX3NUaGVtZUNoZWNrSWQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodC5fc1RoZW1lQ2hlY2tJZCk7dC5fc1RoZW1lQ2hlY2tJZD1udWxsO3QuX2lDb3VudD0wO3QuX21BZGRpdGlvbmFsTGliQ3NzPXt9fX1mdW5jdGlvbiBhKHQpe3ZhciBsPXQuX29Db3JlLmdldExvYWRlZExpYnJhcmllcygpO3ZhciBzPXQuX29Db3JlLmdldENvbmZpZ3VyYXRpb24oKS5nZXRUaGVtZSgpO3ZhciBwPXQuX29Db3JlLl9nZXRUaGVtZVBhdGgoInNhcC51aS5jb3JlIixzKSsiY3VzdG9tLmNzcyI7dmFyIHI9dHJ1ZTtpZighIXQuX2N1c3RvbUNTU0FkZGVkJiZ0Ll90aGVtZUNoZWNrZWRGb3JDdXN0b209PT1zKXtsW3QuX0NVU1RPTUlEXT17fX1mdW5jdGlvbiBlKGYpe3I9ciYmVC5jaGVja1N0eWxlKCJzYXAtdWktdGhlbWUtIitmLHRydWUpO2lmKCEhcil7aWYoRC5icm93c2VyLm1zaWUmJkQuYnJvd3Nlci52ZXJzaW9uPD05KXt2YXIgUz1xLnNhcC5kb21CeUlkKCJzYXAtdWktdGhlbWUtIitmKTt2YXIgUj1TJiZTLnNoZWV0JiZTLnNoZWV0LnJ1bGVzJiZTLnNoZWV0LnJ1bGVzLmxlbmd0aD9TLnNoZWV0LnJ1bGVzLmxlbmd0aDowO2lmKFI9PT00MDk1KXt2YXIgbj1wYXJzZUludChxKFMpLmF0dHIoInNhcC11aS1jc3MtY291bnQiKSwxMCk7aWYoaXNOYU4obikpe249MX1lbHNle24rPTF9dmFyIEE9ImllOV8iK247dmFyIGc9dGhpcy5uYW1lKyItIitBO3ZhciBMPSJzYXAtdWktdGhlbWUtIitnO2lmKCF0Ll9tQWRkaXRpb25hbExpYkNzc1tnXSYmIXEuc2FwLmRvbUJ5SWQoTCkpe3QuX21BZGRpdGlvbmFsTGliQ3NzW2ddPXtuYW1lOnRoaXMubmFtZX07dmFyIG87aWYoZiE9PXRoaXMubmFtZSl7bz1xLnNhcC5kb21CeUlkKCJzYXAtdWktdGhlbWUtIit0aGlzLm5hbWUpfWVsc2V7bz1TfXZhciBoPW5ldyBVUkkoby5nZXRBdHRyaWJ1dGUoImhyZWYiKSk7dmFyIGk9aC5zdWZmaXgoKTt2YXIgRj1oLmZpbGVuYW1lKCk7aWYoaS5sZW5ndGg+MCl7aT0iLiIraTtGPUYuc2xpY2UoMCwtaS5sZW5ndGgpfWguZmlsZW5hbWUoRisiXyIrQStpKTt2YXIgSD1oLnRvU3RyaW5nKCk7dmFyIGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpO2oudHlwZT0idGV4dC9jc3MiO2oucmVsPSJzdHlsZXNoZWV0IjtqLmhyZWY9SDtqLmlkPUw7cShqKS5hdHRyKCJzYXAtdWktY3NzLWNvdW50IixuKS5sb2FkKGZ1bmN0aW9uKCl7cShqKS5hdHRyKCJzYXAtdWktcmVhZHkiLCJ0cnVlIil9KS5lcnJvcihmdW5jdGlvbigpe3EoaikuYXR0cigic2FwLXVpLXJlYWR5IiwiZmFsc2UiKX0pO1MucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaixTLm5leHRTaWJsaW5nKX19fWlmKHQuX3RoZW1lQ2hlY2tlZEZvckN1c3RvbSE9cyl7aWYoYih0LGYpKXtxLnNhcC5pbmNsdWRlU3R5bGVTaGVldChwLHQuX0NVU1RPTUlEKTt0Ll9jdXN0b21DU1NBZGRlZD10cnVlO3Euc2FwLmxvZy53YXJuaW5nKCJUaGVtZUNoZWNrIGRlbGl2ZXJlZCBjdXN0b20gQ1NTIG5lZWRzIHRvIGJlIGxvYWRlZCwgVGhlbWUgbm90IHlldCBhcHBsaWVkIik7dC5fdGhlbWVDaGVja2VkRm9yQ3VzdG9tPXM7cj1mYWxzZTtyZXR1cm4gZmFsc2V9ZWxzZXt2YXIgaz1xKCJMSU5LW2lkPSciK3QuX0NVU1RPTUlEKyInXSIpO2lmKGsubGVuZ3RoPjApe2sucmVtb3ZlKCk7cS5zYXAubG9nLmRlYnVnKCJDdXN0b20gQ1NTIHJlbW92ZWQiKX10Ll9jdXN0b21DU1NBZGRlZD1mYWxzZX19fX1xLmVhY2gobCxlKTtxLmVhY2godC5fbUFkZGl0aW9uYWxMaWJDc3MsZSk7aWYoIXIpe3Euc2FwLmxvZy53YXJuaW5nKCJUaGVtZUNoZWNrOiBUaGVtZSBub3QgeWV0IGFwcGxpZWQuIil9ZWxzZXt0Ll90aGVtZUNoZWNrZWRGb3JDdXN0b209c31yZXR1cm4gcn1mdW5jdGlvbiBiKHQsbCl7dmFyIHI9bnVsbCxzPWZhbHNlLFI9QXJyYXkoKTtpZihxLnNhcC5kb21CeUlkKCJzYXAtdWktdGhlbWUtIitsKSl7dmFyIGU9cS5zYXAuZG9tQnlJZCgic2FwLXVpLXRoZW1lLSIrbCk7aWYoZS5zaGVldCl7Uj1lLnNoZWV0LmNzc1J1bGVzfWVsc2UgaWYoZS5zdHlsZVNoZWV0KXtSPWUuc3R5bGVTaGVldC5ydWxlc319aWYoUi5sZW5ndGg+MCl7cj1SWzBdLnNlbGVjdG9yVGV4dH1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJDdXN0b20gY2hlY2s6IEZhaWxlZCByZXRyaWV2aW5nIGEgQ1NTIHJ1bGUgZnJvbSBzdHlsZXNoZWV0ICIrbCk7cmV0dXJuIGZhbHNlfWlmKHQuX0NVU1RPTUNTU0NIRUNLLnRlc3Qocikpe3M9dHJ1ZX1yZXR1cm4gc31mdW5jdGlvbiBkKGYpe3RoaXMuX2lDb3VudCsrO3ZhciBlPXRoaXMuX2lDb3VudD5zYXAudWkuX21heFRoZW1lQ2hlY2tDeWNsZXM7aWYoIWEodGhpcykmJiFlKXt0aGlzLl9zVGhlbWVDaGVja0lkPXEuc2FwLmRlbGF5ZWRDYWxsKDIsdGhpcyxkKX1lbHNlIGlmKCFmKXtjKHRoaXMpO1QudGhlbWVMb2FkZWQ9dHJ1ZTt0aGlzLl9vQ29yZS5maXJlVGhlbWVDaGFuZ2VkKHt0aGVtZTp0aGlzLl9vQ29yZS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0VGhlbWUoKX0pO2lmKGUpe3Euc2FwLmxvZy53YXJuaW5nKCJUaGVtZUNoZWNrOiBtYXguIGNoZWNrIGN5Y2xlcyByZWFjaGVkLiIpfX1lbHNle1QudGhlbWVMb2FkZWQ9dHJ1ZX19cmV0dXJuIFR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5WYWx1ZVN0YXRlU3VwcG9ydCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlZhbHVlU3RhdGVTdXBwb3J0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVmFsdWVTdGF0ZVN1cHBvcnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIFY9e307dmFyIHQ9bnVsbDt2YXIgZT1mdW5jdGlvbigpe2lmKCF0KXt0PXt9O3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0TGlicmFyeVJlc291cmNlQnVuZGxlKCJzYXAudWkuY29yZSIpO3Rbc2FwLnVpLmNvcmUuVmFsdWVTdGF0ZS5FcnJvcl09ci5nZXRUZXh0KCJWQUxVRV9TVEFURV9FUlJPUiIpO3Rbc2FwLnVpLmNvcmUuVmFsdWVTdGF0ZS5XYXJuaW5nXT1yLmdldFRleHQoIlZBTFVFX1NUQVRFX1dBUk5JTkciKTt0W3NhcC51aS5jb3JlLlZhbHVlU3RhdGUuU3VjY2Vzc109ci5nZXRUZXh0KCJWQUxVRV9TVEFURV9TVUNDRVNTIil9fTtWLmVucmljaFRvb2x0aXA9ZnVuY3Rpb24oRSxUKXtpZighVCYmRS5nZXRUb29sdGlwKCkpe3JldHVybiB1bmRlZmluZWR9aWYoRS5nZXRWYWx1ZVN0YXRlKXt2YXIgcz1FLmdldFZhbHVlU3RhdGUoKTtpZihzJiYocyE9c2FwLnVpLmNvcmUuVmFsdWVTdGF0ZS5Ob25lKSl7ZSgpO3JldHVybihUP1QrIiAtICI6IiIpK3Rbc119fXJldHVybiBUfTtWLmdldEFkZGl0aW9uYWxUZXh0PWZ1bmN0aW9uKEUpe3ZhciByPW51bGw7aWYoRS5nZXRWYWx1ZVN0YXRlKXt2YXIgcz1FLmdldFZhbHVlU3RhdGUoKTtpZihzJiYocyE9c2FwLnVpLmNvcmUuVmFsdWVTdGF0ZS5Ob25lKSl7ZSgpO3I9dFtzXX19cmV0dXJuIHJ9O3JldHVybiBWfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuWE1MVGVtcGxhdGVQcm9jZXNzb3InKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5YTUxUZW1wbGF0ZVByb2Nlc3NvcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1hNTFRlbXBsYXRlUHJvY2Vzc29yIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHAodCx2LG4sYyl7dmFyIGI9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5iaW5kaW5nUGFyc2VyKHYsYyx0cnVlKTtpZihiJiZ0eXBlb2YgYj09PSJvYmplY3QiKXtyZXR1cm4gYn12YXIgVj12PWJ8fHY7dmFyIFQ9c2FwLnVpLmJhc2UuRGF0YVR5cGUuZ2V0VHlwZSh0KTtpZihUKXtpZihUIGluc3RhbmNlb2Ygc2FwLnVpLmJhc2UuRGF0YVR5cGUpe1Y9VC5wYXJzZVZhbHVlKHYpfX1lbHNle3Rocm93IG5ldyBFcnJvcigiUHJvcGVydHkgIituKyIgaGFzIHVua25vd24gdHlwZSAiK3QpfXJldHVybiB0eXBlb2YgVj09PSJzdHJpbmciP3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QuYmluZGluZ1BhcnNlci5lc2NhcGUoVik6Vn1mdW5jdGlvbiBsKHgpe3JldHVybiB4LmxvY2FsTmFtZXx8eC5iYXNlTmFtZXx8eC5ub2RlTmFtZX12YXIgWD17fTtYLmxvYWRUZW1wbGF0ZT1mdW5jdGlvbih0LGUpe3ZhciByPXEuc2FwLmdldFJlc291cmNlTmFtZSh0LCIuIisoZXx8InZpZXciKSsiLnhtbCIpO3JldHVybiBxLnNhcC5sb2FkUmVzb3VyY2UocikuZG9jdW1lbnRFbGVtZW50fTtYLnBhcnNlVmlld0F0dHJpYnV0ZXM9ZnVuY3Rpb24oeCx2LHMpe3ZhciBhPXYuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQcm9wZXJ0aWVzKCk7Zm9yKHZhciBpPTA7aTx4LmF0dHJpYnV0ZXMubGVuZ3RoO2krKyl7dmFyIGI9eC5hdHRyaWJ1dGVzW2ldO2lmKGIubmFtZT09PSdjb250cm9sbGVyTmFtZScpe3YuX2NvbnRyb2xsZXJOYW1lPWIudmFsdWV9ZWxzZSBpZihiLm5hbWU9PT0ncmVzb3VyY2VCdW5kbGVOYW1lJyl7di5fcmVzb3VyY2VCdW5kbGVOYW1lPWIudmFsdWV9ZWxzZSBpZihiLm5hbWU9PT0ncmVzb3VyY2VCdW5kbGVVcmwnKXt2Ll9yZXNvdXJjZUJ1bmRsZVVybD1iLnZhbHVlfWVsc2UgaWYoYi5uYW1lPT09J3Jlc291cmNlQnVuZGxlTG9jYWxlJyl7di5fcmVzb3VyY2VCdW5kbGVMb2NhbGU9Yi52YWx1ZX1lbHNlIGlmKGIubmFtZT09PSdyZXNvdXJjZUJ1bmRsZUFsaWFzJyl7di5fcmVzb3VyY2VCdW5kbGVBbGlhcz1iLnZhbHVlfWVsc2UgaWYoYi5uYW1lPT09J2NsYXNzJyl7di5hZGRTdHlsZUNsYXNzKGIudmFsdWUpfWVsc2UgaWYoIXNbYi5uYW1lXSYmYVtiLm5hbWVdKXtzW2IubmFtZV09cChhW2IubmFtZV0udHlwZSxiLnZhbHVlLGIubmFtZSx2Ll9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXIpfX19O1gucGFyc2VUZW1wbGF0ZT1mdW5jdGlvbih4LHYpe3ZhciByPVtdO3ZhciBjPXVuZGVmaW5lZDt2YXIgQz12LnNWaWV3TmFtZXx8di5fc0ZyYWdtZW50TmFtZTtpZighQyl7dmFyIHQ9djt2YXIgTD0wO3doaWxlKCsrTDwxMDAwJiZ0JiZ0IT09dC5fb0NvbnRhaW5pbmdWaWV3KXt0PXQuX29Db250YWluaW5nVmlld31DPXQuc1ZpZXdOYW1lfWlmKHYuaXNTdWJWaWV3KCkpe2EoeCx0cnVlKX1lbHNle2IoeCl9cmV0dXJuIHI7ZnVuY3Rpb24gYSh4LFIsSSl7aWYoeC5ub2RlVHlwZT09PTEpe3ZhciBzPWwoeCk7aWYoeC5uYW1lc3BhY2VVUkk9PT0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCJ8fHgubmFtZXNwYWNlVVJJPT09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIil7ci5wdXNoKCI8IitzKyIgIik7dmFyIGo7Zm9yKHZhciBpPTA7aTx4LmF0dHJpYnV0ZXMubGVuZ3RoO2krKyl7dmFyIGs9eC5hdHRyaWJ1dGVzW2ldO3ZhciBtPWsudmFsdWU7aWYoay5uYW1lPT09ImlkIil7bT12Ll9vQ29udGFpbmluZ1ZpZXcuY3JlYXRlSWQobSl9ci5wdXNoKGsubmFtZSsiPVwiIitxLnNhcC5lbmNvZGVIVE1MKG0pKyJcIiAiKX1pZihSPT09dHJ1ZSl7ci5wdXNoKCJkYXRhLXNhcC11aS1wcmVzZXJ2ZSIrIj1cIiIrdi5nZXRJZCgpKyJcIiAiKX1yLnB1c2goIj4iKTtiKHgpO3IucHVzaCgiPC8iK3MrIj4iKX1lbHNlIGlmKHM9PT0iRnJhZ21lbnREZWZpbml0aW9uIiYmeC5uYW1lc3BhY2VVUkk9PT0ic2FwLnVpLmNvcmUiKXtiKHgsZmFsc2UsdHJ1ZSl9ZWxzZXt2YXIgbj1lKHgpO2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXt2YXIgbz1uW2ldO2lmKHYuZ2V0TWV0YWRhdGEoKS5oYXNBZ2dyZWdhdGlvbigiY29udGVudCIpKXt2LmFkZEFnZ3JlZ2F0aW9uKCJjb250ZW50IixvKX1lbHNlIGlmKHYuZ2V0TWV0YWRhdGEoKS5oYXNBc3NvY2lhdGlvbigoImNvbnRlbnQiKSkpe3YuYWRkQXNzb2NpYXRpb24oImNvbnRlbnQiLG8pfXIucHVzaChvKX19fWVsc2UgaWYoeC5ub2RlVHlwZT09PTMmJiFJKXt2YXIgdT14LnRleHRDb250ZW50fHx4LnRleHQsdz1sKHgucGFyZW50Tm9kZSk7aWYodSl7aWYodyE9InN0eWxlIil7dT1xLnNhcC5lbmNvZGVIVE1MKHUpfXIucHVzaCh1KX19fWZ1bmN0aW9uIGIoeCxSLEkpe3ZhciBqPXguY2hpbGROb2Rlcztmb3IodmFyIGk9MDtpPGoubGVuZ3RoO2krKyl7YShqW2ldLFIsSSl9fWZ1bmN0aW9uIGYobixzKXt2YXIgaTt2YXIgbT1zYXAudWkuZ2V0Q29yZSgpLmdldExvYWRlZExpYnJhcmllcygpO3EuZWFjaChtLGZ1bmN0aW9uKGosayl7aWYobj09PWsubmFtZXNwYWNlfHxuPT09ay5uYW1lKXtpPWsubmFtZSsiLiIrKChrLnRhZ05hbWVzJiZrLnRhZ05hbWVzW3NdKXx8cyl9fSk7aT1pfHxuKyIuIitzO3Euc2FwLnJlcXVpcmUoaSk7dmFyIG89cS5zYXAuZ2V0T2JqZWN0KGkpO2lmKG8pe3JldHVybiBvfWVsc2V7cS5zYXAubG9nLmVycm9yKCJDYW4ndCBmaW5kIG9iamVjdCBjbGFzcyAnIitpKyInIGZvciBYTUwtdmlldyIsIiIsIlhNTFRlbXBsYXRlUHJvY2Vzc29yLmpzIil9fWZ1bmN0aW9uIGQobil7aWYobi5uYW1lc3BhY2VVUkk9PT0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCJ8fG4ubmFtZXNwYWNlVVJJPT09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIil7dmFyIGk9bi5hdHRyaWJ1dGVzWydpZCddP24uYXR0cmlidXRlc1snaWQnXS50ZXh0Q29udGVudHx8bi5hdHRyaWJ1dGVzWydpZCddLnRleHQ6bnVsbDtyZXR1cm5bbmV3IHNhcC51aS5jb3JlLm12Yy5YTUxWaWV3KHtpZDppP3YuX29Db250YWluaW5nVmlldy5jcmVhdGVJZChpKTp1bmRlZmluZWQseG1sTm9kZTpuLGNvbnRhaW5pbmdWaWV3OnYuX29Db250YWluaW5nVmlld30pXX1lbHNle3JldHVybiBlKG4pfX1mdW5jdGlvbiBlKG4pe2lmKGwobik9PT0iRXh0ZW5zaW9uUG9pbnQiJiZuLm5hbWVzcGFjZVVSST09PSJzYXAudWkuY29yZSIpe3JldHVybiBnKG4sdil9ZWxzZXtyZXR1cm4gaChuKX19ZnVuY3Rpb24gZyhuLHYpe3ZhciBSPXVuZGVmaW5lZDtpZihzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24pe3ZhciBqPXNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbi5nZXRWaWV3RXh0ZW5zaW9uKEMsbi5nZXRBdHRyaWJ1dGUoIm5hbWUiKSk7aWYoail7aWYoai5jbGFzc05hbWUpe3Euc2FwLnJlcXVpcmUoai5jbGFzc05hbWUpO3ZhciBvPXEuc2FwLmdldE9iamVjdChqLmNsYXNzTmFtZSk7cS5zYXAubG9nLmluZm8oIkN1c3RvbWl6aW5nOiBWaWV3IGV4dGVuc2lvbiBmb3VuZCBmb3IgZXh0ZW5zaW9uIHBvaW50ICciK24uZ2V0QXR0cmlidXRlKCJuYW1lIikrIicgaW4gVmlldyAnIitDKyInOiAiK2ouY2xhc3NOYW1lKyI6ICIrKGoudmlld05hbWV8fGouZnJhZ21lbnROYW1lKSk7aWYoai5jbGFzc05hbWU9PT0ic2FwLnVpLmNvcmUuRnJhZ21lbnQiKXt2YXIgRj1uZXcgbyh7dHlwZTpqLnR5cGUsZnJhZ21lbnROYW1lOmouZnJhZ21lbnROYW1lLGNvbnRhaW5pbmdWaWV3OnZ9KTtSPShxLmlzQXJyYXkoRik/RjpbRl0pfWVsc2UgaWYoai5jbGFzc05hbWU9PT0ic2FwLnVpLmNvcmUubXZjLlZpZXciKXt2YXIgdj1zYXAudWkudmlldyh7dHlwZTpqLnR5cGUsdmlld05hbWU6ai52aWV3TmFtZX0pO1I9W3ZdfWVsc2V7cS5zYXAubG9nLndhcm5pbmcoIkN1c3RvbWl6aW5nOiBVbmtub3duIGV4dGVuc2lvbiBjbGFzc05hbWUgY29uZmlndXJlZCAoYW5kIGlnbm9yZWQpIGluIENvbXBvbmVudC5qcyBmb3IgZXh0ZW5zaW9uIHBvaW50ICciK24uZ2V0QXR0cmlidXRlKCJuYW1lIikrIicgaW4gVmlldyAnIitDKyInOiAiK2ouY2xhc3NOYW1lKX19ZWxzZXtxLnNhcC5sb2cud2FybmluZygiQ3VzdG9taXppbmc6IG5vIGV4dGVuc2lvbiBjbGFzc05hbWUgY29uZmlndXJlZCBpbiBDb21wb25lbnQuanMgZm9yIGV4dGVuc2lvbiBwb2ludCAnIituLmdldEF0dHJpYnV0ZSgibmFtZSIpKyInIGluIFZpZXcgJyIrQysiJzogIitqLmNsYXNzTmFtZSl9fWVsc2V7fX1pZighUil7Uj1bXTt2YXIgaz1uLmNoaWxkTm9kZXM7Zm9yKHZhciBpPTA7aTxrLmxlbmd0aDtpKyspe3ZhciBtPWtbaV07aWYobS5ub2RlVHlwZT09PTEpe1I9cS5tZXJnZShSLGQobSkpfX19cmV0dXJuIFJ8fFtdfWZ1bmN0aW9uIGgobil7dmFyIGo9bi5uYW1lc3BhY2VVUkksbz1mKGosbChuKSkscz17fSxTPSIiLGs9W10sTztpZighbyl7cmV0dXJuW119dmFyIG09by5nZXRNZXRhZGF0YSgpO3ZhciBKPW0uZ2V0SlNPTktleXMoKTtmb3IodmFyIGk9MDtpPG4uYXR0cmlidXRlcy5sZW5ndGg7aSsrKXt2YXIgdT1uLmF0dHJpYnV0ZXNbaV07dmFyIE49dS5uYW1lO3ZhciBWPXUudmFsdWU7dmFyIEk9SltOXTtpZihOPT09ImlkIil7c1tOXT12Ll9vQ29udGFpbmluZ1ZpZXcuY3JlYXRlSWQoVik7Tz1WfWVsc2UgaWYoTj09PSJjbGFzcyIpe1MrPVZ9ZWxzZSBpZihOPT09InZpZXdOYW1lIil7c1tOXT1WfWVsc2UgaWYoTj09PSJmcmFnbWVudE5hbWUiKXtzW05dPVY7c1snY29udGFpbmluZ1ZpZXcnXT12Ll9vQ29udGFpbmluZ1ZpZXd9ZWxzZSBpZihOPT09ImJpbmRpbmciKXt2YXIgQj1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXIoVix2Ll9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXIpO3Mub2JqZWN0QmluZGluZ3M9cy5vYmplY3RCaW5kaW5nc3x8e307cy5vYmplY3RCaW5kaW5nc1tCLm1vZGVsfHx1bmRlZmluZWRdPUJ9ZWxzZSBpZihOLmluZGV4T2YoIjoiKT4tMSl7aWYodS5uYW1lc3BhY2VVUkk9PT0iaHR0cDovL3NjaGVtYXMuc2FwLmNvbS9zYXB1aTUvZXh0ZW5zaW9uL3NhcC51aS5jb3JlLkN1c3RvbURhdGEvMSIpe3ZhciB3PWwodSk7ay5wdXNoKG5ldyBzYXAudWkuY29yZS5DdXN0b21EYXRhKHtrZXk6dyx2YWx1ZTpwKCJhbnkiLFYsdyx2Ll9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXIpfSkpfWVsc2UgaWYoTi5pbmRleE9mKCJ4bWxuczoiKSE9PTApe3Euc2FwLmxvZy53YXJuaW5nKHYrIjogWE1MVmlldyBwYXJzZXIgZW5jb3VudGVyZWQgYW5kIGlnbm9yZWQgYXR0cmlidXRlICciK04rIicgKHZhbHVlOiAnIitWKyInKSB3aXRoIHVua25vd24gbmFtZXNwYWNlIil9fWVsc2UgaWYoSSYmSS5faUtpbmQ9PT0wKXtzW05dPXAoSS50eXBlLFYsTix2Ll9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXIpfWVsc2UgaWYoSSYmSS5faUtpbmQ9PT0xJiZJLmFsdFR5cGVzKXtzW05dPXAoSS5hbHRUeXBlc1swXSxWLE4sdi5fb0NvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyKX1lbHNlIGlmKEkmJkkuX2lLaW5kPT09Mil7dmFyIEI9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5iaW5kaW5nUGFyc2VyKFYsdi5fb0NvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyKTtpZihCKXtzW05dPUJ9ZWxzZXtxLnNhcC5sb2cuZXJyb3IodisiOiBhZ2dyZWdhdGlvbnMgd2l0aCBjYXJkaW5hbGl0eSAwLi5uIG9ubHkgYWxsb3cgYmluZGluZyBwYXRocyBhcyBhdHRyaWJ1dGUgdmFsdWUgKHdyb25nIHZhbHVlOiAiK04rIj0nIitWKyInKSIpfX1lbHNlIGlmKEkmJkkuX2lLaW5kPT09Myl7c1tOXT12LmNyZWF0ZUlkKFYpfWVsc2UgaWYoSSYmSS5faUtpbmQ9PT00KXtzW05dPXEubWFwKFYuc3BsaXQoL1tccyxdKy9nKSxmdW5jdGlvbihHKXtyZXR1cm4gRz92LmNyZWF0ZUlkKEcpOm51bGx9KX1lbHNlIGlmKEkmJkkuX2lLaW5kPT09NSl7dmFyIEU9di5fb0NvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyW1ZdO2lmKHR5cGVvZihFKSE9PSJmdW5jdGlvbiIpe3Euc2FwLmxvZy53YXJuaW5nKHYrIjogZXZlbnQgaGFuZGxlciBmdW5jdGlvbiBcIiIrVisiXCIgaXMgbm90IGEgZnVuY3Rpb24gb3IgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGNvbnRyb2xsZXIuIil9aWYoRSl7RVsiX3NhcHVpX2hhbmRsZXJOYW1lIl09VjtzW05dPVtFLHYuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcl19fWVsc2UgaWYoTiE9PSJ4bWxucyIpe3Euc2FwLmxvZy53YXJuaW5nKHYrIjogWE1MVGVtcGxhdGVQcm9jZXNzb3IgZW5jb3VudGVyZWQgYW5kIGlnbm9yZWQgdW5rbm93biBhdHRyaWJ1dGUgJyIrTisiJyAodmFsdWU6ICciK1YrIicpIil9fWlmKGsubGVuZ3RoPjApe3MuY3VzdG9tRGF0YT1rfWZ1bmN0aW9uIHkobixBLHope3ZhciBHLEg7Zm9yKEc9bi5maXJzdENoaWxkO0c7Rz1HLm5leHRTaWJsaW5nKXtpZihHLm5vZGVUeXBlPT09MSl7SD1HLm5hbWVzcGFjZVVSST09PWomJnomJnpbbChHKV07aWYoSCl7eShHLEgpfWVsc2UgaWYoQSl7dmFyIEs9ZChHKTtmb3IodmFyIGk9MDtpPEsubGVuZ3RoO2krKyl7dmFyIE09S1tpXTt2YXIgUD1BLl9zTmFtZTtpZihBLm11bHRpcGxlKXtpZighc1tQXSl7c1tQXT1bXX1pZih0eXBlb2Ygc1tQXS5wYXRoPT09InN0cmluZyIpe3NbUF0udGVtcGxhdGU9TX1lbHNle3NbUF0ucHVzaChNKX19ZWxzZXtzW1BdPU19fX1lbHNlIGlmKGwobikhPT0iRnJhZ21lbnREZWZpbml0aW9uInx8bi5uYW1lc3BhY2VVUkkhPT0ic2FwLnVpLmNvcmUiKXt0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBhZGQgZGlyZWN0IGNoaWxkIHdpdGhvdXQgZGVmYXVsdCBhZ2dyZWdhdGlvbiBkZWZpbmVkIGZvciBjb250cm9sICIrbS5nZXRFbGVtZW50TmFtZSgpKX19ZWxzZSBpZihHLm5vZGVUeXBlPT09Myl7aWYocS50cmltKEcudGV4dENvbnRlbnR8fEcudGV4dCkpe3Rocm93IG5ldyBFcnJvcigiQ2Fubm90IGFkZCB0ZXh0IG5vZGVzIGFzIGRpcmVjdCBjaGlsZCBvZiBhbiBhZ2dyZWdhdGlvbi4gRm9yIGFkZGluZyB0ZXh0IHRvIGFuIGFnZ3JlZ2F0aW9uLCBhIHN1cnJvdW5kaW5nIGh0bWwgdGFnIGlzIG5lZWRlZCIpfX19fXZhciBBPW0uZ2V0RGVmYXVsdEFnZ3JlZ2F0aW9uKCk7dmFyIHo9bS5nZXRBbGxBZ2dyZWdhdGlvbnMoKTt5KG4sQSx6KTtpZihzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24mJk8pe3ZhciBEPXNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbi5nZXRDdXN0b21Qcm9wZXJ0aWVzKEMsTyk7aWYoRCl7cz1xLmV4dGVuZChzLEQpfX12YXIgRjtpZihzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihvLnByb3RvdHlwZSkmJnR5cGVvZiBvLl9zVHlwZT09PSJzdHJpbmciKXtGPXNhcC51aS52aWV3KHMsdW5kZWZpbmVkLG8uX3NUeXBlKX1lbHNle0Y9bmV3IG8ocyl9aWYoUyYmRi5hZGRTdHlsZUNsYXNzKXtGLmFkZFN0eWxlQ2xhc3MoUyl9aWYoIUYpe0Y9W119ZWxzZSBpZighcS5pc0FycmF5KEYpKXtGPVtGXX1yZXR1cm4gRn19O3JldHVybiBYfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuZGVsZWdhdGUuU2Nyb2xsRW5hYmxlbWVudCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLmRlbGVnYXRlLlNjcm9sbEVuYWJsZW1lbnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9kZWxlZ2F0ZS9TY3JvbGxFbmFibGVtZW50IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0J10sZnVuY3Rpb24ocSxCKXsidXNlIHN0cmljdCI7dmFyICQ9cTt2YXIgUz1CLmV4dGVuZCgic2FwLnVpLmNvcmUuZGVsZWdhdGUuU2Nyb2xsRW5hYmxlbWVudCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGMscyxDKXtCLmFwcGx5KHRoaXMpO3RoaXMuX29Db250cm9sPWM7dGhpcy5fb0NvbnRyb2wuYWRkRGVsZWdhdGUodGhpcyk7dGhpcy5fc0NvbnRlbnRJZD1zO3RoaXMuX2JIb3Jpem9udGFsPSEhQy5ob3Jpem9udGFsO3RoaXMuX2JWZXJ0aWNhbD0hIUMudmVydGljYWw7dGhpcy5fc2Nyb2xsWD0wO3RoaXMuX3Njcm9sbFk9MDt0aGlzLl9zY3JvbGxlcj1udWxsO3RoaXMuX3Njcm9sbGJhckNsYXNzPUMuc2Nyb2xsYmFyQ2xhc3N8fGZhbHNlO3RoaXMuX2JvdW5jZT1DLmJvdW5jZTthKHRoaXMsQyk7aWYodGhpcy5faW5pdCl7dGhpcy5faW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxzZXRIb3Jpem9udGFsOmZ1bmN0aW9uKGgpe3RoaXMuX2JIb3Jpem9udGFsPSEhaDtpZih0aGlzLl9zY3JvbGxlcil7aWYodGhpcy5fenluZ2Epe3RoaXMuX3Njcm9sbGVyLm9wdGlvbnMuc2Nyb2xsaW5nWD10aGlzLl9iSG9yaXpvbnRhbH1lbHNle3RoaXMuX3Njcm9sbGVyLmhTY3JvbGw9dGhpcy5fc2Nyb2xsZXIuaFNjcm9sbGJhcj10aGlzLl9iSG9yaXpvbnRhbDt0aGlzLl9zY3JvbGxlci5fc2Nyb2xsYmFyKCdoJyl9fWVsc2UgaWYodGhpcy5fc2V0T3ZlcmZsb3cpe3RoaXMuX3NldE92ZXJmbG93KCl9fSxzZXRWZXJ0aWNhbDpmdW5jdGlvbih2KXt0aGlzLl9iVmVydGljYWw9ISF2O2lmKHRoaXMuX3Njcm9sbGVyKXtpZih0aGlzLl96eW5nYSl7dGhpcy5fc2Nyb2xsZXIub3B0aW9ucy5zY3JvbGxpbmdZPXRoaXMuX2JWZXJ0aWNhbH1lbHNle3RoaXMuX3Njcm9sbGVyLnZTY3JvbGw9dGhpcy5fc2Nyb2xsZXIudlNjcm9sbGJhcj10aGlzLl9iVmVydGljYWw7dGhpcy5fc2Nyb2xsZXIuX3Njcm9sbGJhcigndicpfX1lbHNlIGlmKHRoaXMuX3NldE92ZXJmbG93KXt0aGlzLl9zZXRPdmVyZmxvdygpfX0sZ2V0SG9yaXpvbnRhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iSG9yaXpvbnRhbH0sZ2V0VmVydGljYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYlZlcnRpY2FsfSxzZXRCb3VuY2U6ZnVuY3Rpb24oYil7dGhpcy5fYm91bmNlPSEhYn0sc2V0UHVsbERvd246ZnVuY3Rpb24oYyl7dGhpcy5fb1B1bGxEb3duPWM7cmV0dXJuIHRoaXN9LHNldEdyb3dpbmdMaXN0OmZ1bmN0aW9uKGcscyl7dGhpcy5fb0dyb3dpbmdMaXN0PWc7dGhpcy5fZm5TY3JvbGxMb2FkQ2FsbGJhY2s9cS5wcm94eShzLGcpO3JldHVybiB0aGlzfSxzZXRJY29uVGFiQmFyOmZ1bmN0aW9uKEkscyxmKXt0aGlzLl9vSWNvblRhYkJhcj1JO3RoaXMuX2ZuU2Nyb2xsRW5kQ2FsbGJhY2s9cS5wcm94eShzLEkpO3RoaXMuX2ZuU2Nyb2xsU3RhcnRDYWxsYmFjaz1xLnByb3h5KGYsSSk7cmV0dXJuIHRoaXN9LHNjcm9sbFRvOmZ1bmN0aW9uKHgseSx0KXt0aGlzLl9zY3JvbGxYPXg7dGhpcy5fc2Nyb2xsWT15O3RoaXMuX3Njcm9sbFRvKHgseSx0KTtyZXR1cm4gdGhpc30sZGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMuX2V4aXQpe3RoaXMuX2V4aXQoKX1pZih0aGlzLl9vQ29udHJvbCl7dGhpcy5fb0NvbnRyb2wucmVtb3ZlRGVsZWdhdGUodGhpcyk7dGhpcy5fb0NvbnRyb2w9dW5kZWZpbmVkfX0scmVmcmVzaDpmdW5jdGlvbigpe2lmKHRoaXMuX3JlZnJlc2gpe3RoaXMuX3JlZnJlc2goKX19fSk7dmFyIGk9e2dldFNjcm9sbFRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY3JvbGxZfSxnZXRTY3JvbGxMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbFh9LGdldE1heFNjcm9sbFRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY3JvbGxlcj8tdGhpcy5fc2Nyb2xsZXIubWF4U2Nyb2xsWTowfSxfc2Nyb2xsVG86ZnVuY3Rpb24oeCx5LHQpe3RoaXMuX3Njcm9sbGVyJiZ0aGlzLl9zY3JvbGxlci5zY3JvbGxUbygteCwteSx0LGZhbHNlKX0sX3JlZnJlc2g6ZnVuY3Rpb24oKXtpZih0aGlzLl9zY3JvbGxlciYmdGhpcy5fc1Njcm9sbGVySWQpe3ZhciBzPSQuc2FwLmRvbUJ5SWQodGhpcy5fc1Njcm9sbGVySWQpO2lmKHMmJihzLm9mZnNldEhlaWdodD4wKSl7dGhpcy5fYklnbm9yZVNjcm9sbEVuZD10cnVlO3RoaXMuX3Njcm9sbGVyLnJlZnJlc2goKTt0aGlzLl9iSWdub3JlU2Nyb2xsRW5kPWZhbHNlO2lmKC10aGlzLl9zY3JvbGxYIT10aGlzLl9zY3JvbGxlci54fHwtdGhpcy5fc2Nyb2xsWSE9dGhpcy5fc2Nyb2xsZXIueSl7dGhpcy5fc2Nyb2xsZXIuc2Nyb2xsVG8oLXRoaXMuX3Njcm9sbFgsLXRoaXMuX3Njcm9sbFksMCl9aWYodGhpcy5fc2Nyb2xsZXIud3JhcHBlciYmdGhpcy5fc2Nyb2xsZXIud3JhcHBlci5zY3JvbGxUb3Ape3RoaXMuX3Njcm9sbGVyLndyYXBwZXIuc2Nyb2xsVG9wPTB9fX19LF9jbGVhbnVwOmZ1bmN0aW9uKCl7dGhpcy5fdG9nZ2xlUmVzaXplTGlzdGVuZXJzKGZhbHNlKTtpZih0aGlzLl9zY3JvbGxlcil7dGhpcy5fc2Nyb2xsZXIuc3RvcCgpO3RoaXMuX3Njcm9sbFg9LXRoaXMuX3Njcm9sbGVyLng7dmFyIHM9JC5zYXAuZG9tQnlJZCh0aGlzLl9zU2Nyb2xsZXJJZCk7aWYocyYmKHMub2Zmc2V0SGVpZ2h0PjApKXt0aGlzLl9zY3JvbGxZPS10aGlzLl9zY3JvbGxlci55fXRoaXMuX3Njcm9sbGVyLmRlc3Ryb3koKTt0aGlzLl9zY3JvbGxlcj1udWxsfX0sX3RvZ2dsZVJlc2l6ZUxpc3RlbmVyczpmdW5jdGlvbih0KXtpZih0aGlzLl9zU2Nyb2xsZXJSZXNpemVMaXN0ZW5lcklkKXtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXIodGhpcy5fc1Njcm9sbGVyUmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fc1Njcm9sbGVyUmVzaXplTGlzdGVuZXJJZD1udWxsfWlmKHRoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZCl7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fc0NvbnRlbnRSZXNpemVMaXN0ZW5lcklkPW51bGx9aWYodCYmdGhpcy5fc0NvbnRlbnRJZCYmJC5zYXAuZG9tQnlJZCh0aGlzLl9zQ29udGVudElkKSl7dmFyIGI9JC5wcm94eSh0aGlzLl9yZWZyZXNoLHRoaXMpO3RoaXMuX3NTY3JvbGxlclJlc2l6ZUxpc3RlbmVySWQ9c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5yZWdpc3RlcigkLnNhcC5kb21CeUlkKHRoaXMuX3NTY3JvbGxlcklkKSxiKTt0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQ9c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5yZWdpc3RlcigkLnNhcC5kb21CeUlkKHRoaXMuX3NDb250ZW50SWQpLGIpfX0sb25CZWZvcmVSZW5kZXJpbmc6ZnVuY3Rpb24oKXt0aGlzLl9jbGVhbnVwKCl9LG9uZm9jdXNpbjpmdW5jdGlvbihlKXtpZihTLl9iU2Nyb2xsVG9JbnB1dCYmc2FwLnVpLkRldmljZS5vcy5hbmRyb2lkKXt2YXIgYj1lLnNyY0VsZW1lbnQ7dGhpcy5fc1RpbWVySWQmJnEuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fc1RpbWVySWQpO2lmKGImJmIubm9kZU5hbWUmJihiLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PT0iSU5QVVQifHxiLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PT0iVEVYVEFSRUEiKSl7dGhpcy5fc1RpbWVySWQ9cS5zYXAuZGVsYXllZENhbGwoNDAwLHRoaXMsZnVuY3Rpb24oKXt2YXIgbz10aGlzLl9zY3JvbGxlci5fb2Zmc2V0KGIpO28udG9wKz00ODt0aGlzLl9zY3JvbGxlci5zY3JvbGxUbyhvLmxlZnQsby50b3ApfSl9fX0sb25BZnRlclJlbmRlcmluZzpmdW5jdGlvbigpe3ZhciB0PXRoaXMsYj0odGhpcy5fYm91bmNlIT09dW5kZWZpbmVkKT90aGlzLl9ib3VuY2U6c2FwLnVpLkRldmljZS5vcy5pb3M7dmFyIGM9JC5zYXAuYnlJZCh0aGlzLl9zQ29udGVudElkKTt0aGlzLl9zU2Nyb2xsZXJJZD1jLnBhcmVudCgpLmF0dHIoImlkIik7dmFyIGQ9KCEhc2FwLnVpLkRldmljZS5vcy5hbmRyb2lkJiYhc2FwLnVpLkRldmljZS5icm93c2VyLmNocm9tZSYmKHNhcC51aS5EZXZpY2Uub3MudmVyc2lvbj09NHx8IXNhcC51aS5EZXZpY2Uub3MudmVyc2lvblN0ci5pbmRleE9mKCIyLjMuNCIpKSYmYy5maW5kKCJpbnB1dCx0ZXh0YXJlYSIpLmxlbmd0aCk7dGhpcy5faVRvcE9mZnNldD10aGlzLl9vUHVsbERvd24mJnRoaXMuX29QdWxsRG93bi5nZXREb21SZWYmJnRoaXMuX29QdWxsRG93bi5nZXREb21SZWYoKS5vZmZzZXRIZWlnaHR8fDA7dmFyIHg9dGhpcy5fc2Nyb2xsWHx8MCx5PXRoaXMuX3Njcm9sbFl8fDA7aWYoc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCkpe2MuYXR0cigiZGlyIiwicnRsIik7dmFyIHA9Yy5wYXJlbnQoKTtwLmF0dHIoImRpciIsImx0ciIpO2lmKCF0aGlzLl9iU2Nyb2xsUG9zSW5pdGlhbGl6ZWQpe3g9dGhpcy5fc2Nyb2xsWD1jLndpZHRoKCktcC53aWR0aCgpO3RoaXMuX2JTY3JvbGxQb3NJbml0aWFsaXplZD10cnVlfX10aGlzLl9zY3JvbGxlcj1uZXcgd2luZG93LmlTY3JvbGwodGhpcy5fc1Njcm9sbGVySWQse3VzZVRyYW5zaXRpb246dHJ1ZSx1c2VUcmFuc2Zvcm06IWQsaGlkZVNjcm9sbGJhcjp0cnVlLGZhZGVTY3JvbGxiYXI6dHJ1ZSxib3VuY2U6ISFiLG1vbWVudHVtOnRydWUsaGFuZGxlQ2xpY2s6ZmFsc2UsaFNjcm9sbDp0aGlzLl9iSG9yaXpvbnRhbCx2U2Nyb2xsOnRoaXMuX2JWZXJ0aWNhbCx4Oi14LHk6LXksdG9wT2Zmc2V0OnRoaXMuX2lUb3BPZmZzZXQsc2Nyb2xsYmFyQ2xhc3M6dGhpcy5fc2Nyb2xsYmFyQ2xhc3Msb25CZWZvcmVTY3JvbGxTdGFydDpmdW5jdGlvbihlKXtpZih0Ll9pc1Njcm9sbGluZyl7ZS5zdG9wUHJvcGFnYXRpb24oKTtlLnByZXZlbnREZWZhdWx0KCl9fSxvblNjcm9sbEVuZDpmdW5jdGlvbigpe2lmKCF0Ll9iSWdub3JlU2Nyb2xsRW5kJiZ0Ll9zY3JvbGxlcil7dC5fc2Nyb2xsWD0tdC5fc2Nyb2xsZXIueDt0Ll9zY3JvbGxZPS10Ll9zY3JvbGxlci55fWlmKHQuX29QdWxsRG93bil7dC5fb1B1bGxEb3duLmRvU2Nyb2xsRW5kKCl9aWYodC5fb0dyb3dpbmdMaXN0JiZ0Ll9mblNjcm9sbExvYWRDYWxsYmFjayl7dmFyIGU9TWF0aC5mbG9vcih0aGlzLndyYXBwZXJILzQpO3ZhciBJPS10aGlzLm1heFNjcm9sbFkrdGhpcy55PGU7aWYodGhpcy5kaXJZPjAmJkkpe3QuX2ZuU2Nyb2xsTG9hZENhbGxiYWNrKCl9fWlmKHQuX29JY29uVGFiQmFyJiZ0Ll9mblNjcm9sbEVuZENhbGxiYWNrKXt0Ll9mblNjcm9sbEVuZENhbGxiYWNrKCl9dC5faXNTY3JvbGxpbmc9ZmFsc2V9LG9uUmVmcmVzaDpmdW5jdGlvbigpe2lmKHQuX29QdWxsRG93bil7dC5fb1B1bGxEb3duLmRvUmVmcmVzaCgpfXQuX3RvZ2dsZVJlc2l6ZUxpc3RlbmVycyh0cnVlKX0sb25TY3JvbGxNb3ZlOmZ1bmN0aW9uKGUpe2lmKCF0Ll9pc1Njcm9sbGluZyl7dmFyIHI9LyhJTlBVVHxURVhUQVJFQSkvaSxBPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7aWYoci50ZXN0KEEudGFnTmFtZSkmJmUudGFyZ2V0IT09QSl7QS5ibHVyKCl9fXQuX2lzU2Nyb2xsaW5nPXRydWU7aWYodC5fb1B1bGxEb3duKXt0Ll9vUHVsbERvd24uZG9TY3JvbGxNb3ZlKCl9aWYodC5fb0ljb25UYWJCYXImJnQuX2ZuU2Nyb2xsU3RhcnRDYWxsYmFjayl7dC5fZm5TY3JvbGxTdGFydENhbGxiYWNrKCl9fX0pO2Zvcih2YXIgUD10aGlzLl9vQ29udHJvbDtQPVAub1BhcmVudDspe3ZhciBzPVAuZ2V0U2Nyb2xsRGVsZWdhdGU/UC5nZXRTY3JvbGxEZWxlZ2F0ZSgpOm51bGw7aWYocyYmKHMuZ2V0VmVydGljYWwoKSYmdGhpcy5nZXRWZXJ0aWNhbCgpfHxzLmdldEhvcml6b250YWwoKSYmdGhpcy5nZXRIb3Jpem9udGFsKCkpKXt0aGlzLl9zY3JvbGxlci5fc2FwdWlfaXNOZXN0ZWQ9dHJ1ZTticmVha319dGhpcy5fc2Nyb2xsZXIuX21vdmU9ZnVuY3Rpb24oZSl7aWYoZS5fc2FwdWlfaGFuZGxlZEJ5Q29udHJvbCYmIWUuX3NhcHVpX3Njcm9sbCl7cmV0dXJufWlmKHRoaXMuX3NhcHVpX2lzTmVzdGVkKXtlLl9zYXB1aV9oYW5kbGVkQnlDb250cm9sPSEodGhpcy5kaXJZPDAmJnRoaXMueT49MCkmJiEodGhpcy5kaXJZPjAmJnRoaXMueTw9dGhpcy5tYXhTY3JvbGxZKSYmISh0aGlzLmRpclg8MCYmdGhpcy54Pj0wKSYmISh0aGlzLmRpclg+MCYmdGhpcy54PD10aGlzLm1heFNjcm9sbFgpfXdpbmRvdy5pU2Nyb2xsLnByb3RvdHlwZS5fbW92ZS5jYWxsKHRoaXMsZSl9O3ZhciBvPWMucGFyZW50KClbMF07aWYobyYmKG8ub2Zmc2V0SGVpZ2h0PjApKXtpZih0aGlzLl9zY3JvbGxYIT0tdGhpcy5fc2Nyb2xsZXIueHx8dGhpcy5fc2Nyb2xsWSE9LXRoaXMuX3Njcm9sbGVyLnkpe3RoaXMuX3Njcm9sbGVyLnNjcm9sbFRvKC10aGlzLl9zY3JvbGxYLC10aGlzLl9zY3JvbGxZLDApfX10aGlzLl90b2dnbGVSZXNpemVMaXN0ZW5lcnModHJ1ZSl9LG9udG91Y2htb3ZlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuX3ByZXZlbnRUb3VjaE1vdmVEZWZhdWx0KXtlLnByZXZlbnREZWZhdWx0KCl9fX07dmFyIHo9e19yZWZyZXNoOmZ1bmN0aW9uKCl7aWYodGhpcy5fc2Nyb2xsZXImJnRoaXMuX3NDb250ZW50SWQmJiQuc2FwLmRvbUJ5SWQodGhpcy5fc0NvbnRlbnRJZCkpe3ZhciBjPSQuc2FwLmJ5SWQodGhpcy5fc0NvbnRlbnRJZCk7dmFyIEM9Yy5wYXJlbnQoKTt0aGlzLl9zY3JvbGxlci5zZXREaW1lbnNpb25zKEMud2lkdGgoKSxDLmhlaWdodCgpLGMud2lkdGgoKSxjLmhlaWdodCgpKX19LF9jbGVhbnVwOmZ1bmN0aW9uKCl7aWYodGhpcy5fc1Njcm9sbGVyUmVzaXplTGlzdGVuZXJJZCl7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3NTY3JvbGxlclJlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3NTY3JvbGxlclJlc2l6ZUxpc3RlbmVySWQ9bnVsbH1pZih0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZD1udWxsfWlmKHRoaXMuX3Njcm9sbGVyKXt2YXIgdj10aGlzLl9zY3JvbGxlci5nZXRWYWx1ZXMoKTt0aGlzLl9zY3JvbGxYPXYubGVmdDt0aGlzLl9zY3JvbGxZPXYudG9wfX0sX3Njcm9sbFRvOmZ1bmN0aW9uKHgseSx0KXtpZih0aGlzLl9zY3JvbGxlcil7aWYoIWlzTmFOKHQpKXt0aGlzLl9zY3JvbGxlci5vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uPXR9dGhpcy5fc2Nyb2xsZXIuc2Nyb2xsVG8oeCx5LCEhdCl9fSxvbkJlZm9yZVJlbmRlcmluZzpmdW5jdGlvbigpe3RoaXMuX2NsZWFudXAoKX0sb25BZnRlclJlbmRlcmluZzpmdW5jdGlvbigpe3RoaXMuX3JlZnJlc2goKTt0aGlzLl9zY3JvbGxlci5zY3JvbGxUbyh0aGlzLl9zY3JvbGxYLHRoaXMuX3Njcm9sbFksZmFsc2UpO3RoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZD1zYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLnJlZ2lzdGVyKCQuc2FwLmRvbUJ5SWQodGhpcy5fc0NvbnRlbnRJZCksJC5wcm94eShmdW5jdGlvbigpe2lmKCghdGhpcy5fc0NvbnRlbnRJZHx8ISQuc2FwLmRvbUJ5SWQodGhpcy5fc0NvbnRlbnRJZCkpJiZ0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZD1udWxsfWVsc2V7dGhpcy5fcmVmcmVzaCgpfX0sdGhpcykpfSxvbnRvdWNoc3RhcnQ6ZnVuY3Rpb24oZSl7aWYoZS50YXJnZXQudGFnTmFtZS5tYXRjaCgvaW5wdXR8dGV4dGFyZWF8c2VsZWN0L2kpKXtyZXR1cm59dGhpcy5fc2Nyb2xsZXIuZG9Ub3VjaFN0YXJ0KGUudG91Y2hlcyxlLnRpbWVTdGFtcCl9LG9udG91Y2hlbmQ6ZnVuY3Rpb24oZSl7dGhpcy5fc2Nyb2xsZXIuZG9Ub3VjaEVuZChlLnRpbWVTdGFtcCl9LG9udG91Y2htb3ZlOmZ1bmN0aW9uKGUpe3RoaXMuX3Njcm9sbGVyLmRvVG91Y2hNb3ZlKGUudG91Y2hlcyxlLnRpbWVTdGFtcCk7aWYodGhpcy5fcHJldmVudFRvdWNoTW92ZURlZmF1bHQpe2UucHJldmVudERlZmF1bHQoKX1lbHNle2Uuc3RvcFByb3BhZ2F0aW9uKCl9fX07dmFyIG49e2dldFNjcm9sbFRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY3JvbGxZfHwwfSxnZXRTY3JvbGxMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbFh8fDB9LGdldE1heFNjcm9sbFRvcDpmdW5jdGlvbigpe3JldHVybih0aGlzLl8kQ29udGFpbmVyJiZ0aGlzLl8kQ29udGFpbmVyLmxlbmd0aCk/dGhpcy5fJENvbnRhaW5lclswXS5zY3JvbGxIZWlnaHQtdGhpcy5fJENvbnRhaW5lci5oZWlnaHQoKTotMX0sX3NldE92ZXJmbG93OmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fJENvbnRhaW5lcjtpZighY3x8IWNbMF0pcmV0dXJuO2MuY3NzKCJ6LWluZGV4IiwiMCIpO2lmKHNhcC51aS5EZXZpY2Uub3MuaW9zKXtjLmNzcygib3ZlcmZsb3cteCIsdGhpcy5fYkhvcml6b250YWw/InNjcm9sbCI6ImhpZGRlbiIpLmNzcygib3ZlcmZsb3cteSIsdGhpcy5fYlZlcnRpY2FsPyJzY3JvbGwiOiJoaWRkZW4iKS5jc3MoIi13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nIiwidG91Y2giKX1lbHNle2MuY3NzKCJvdmVyZmxvdy14Iix0aGlzLl9iSG9yaXpvbnRhbCYmIXRoaXMuX2JEcmFnU2Nyb2xsPyJhdXRvIjoiaGlkZGVuIikuY3NzKCJvdmVyZmxvdy15Iix0aGlzLl9iVmVydGljYWwmJiF0aGlzLl9iRHJhZ1Njcm9sbD8iYXV0byI6ImhpZGRlbiIpfX0sX3JlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl8kQ29udGFpbmVyO2lmKCFjfHwhYy5oZWlnaHQoKSlyZXR1cm47dmFyIEM9JC5zYXAuYnlJZCh0aGlzLl9zQ29udGVudElkKTtpZih0aGlzLl9vUHVsbERvd24mJnRoaXMuX29QdWxsRG93bi5fYlRvdWNoTW9kZSl7dmFyIGQ9dGhpcy5fb1B1bGxEb3duLmdldERvbVJlZigpO2lmKGQpe2Quc3R5bGUubWFyZ2luVG9wPXRoaXMuX29QdWxsRG93bi5faVN0YXRlPT0yPyIiOiItIitkLm9mZnNldEhlaWdodCsicHgifX1pZihjLnNjcm9sbFRvcCgpIT10aGlzLl9zY3JvbGxZKXtjLnNjcm9sbFRvcCh0aGlzLl9zY3JvbGxZKX1pZighKHRoaXMuX29QdWxsRG93biYmdGhpcy5fb1B1bGxEb3duLl9iVG91Y2hNb2RlKSYmIXRoaXMuX2ZuU2Nyb2xsTG9hZENhbGxiYWNrJiYhISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXIpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9zUmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fc1Jlc2l6ZUxpc3RlbmVySWQ9bnVsbH19LF9vblNjcm9sbDpmdW5jdGlvbihlKXt2YXIgYz10aGlzLl8kQ29udGFpbmVyO2lmKHRoaXMuX29JT1NTY3JvbGwmJnRoaXMuX29JT1NTY3JvbGwuYk1vbWVudHVtKXt2YXIgeT1NYXRoLmFicyh0aGlzLl9zY3JvbGxZLWMuc2Nyb2xsVG9wKCkpO2lmKHk+MCYmeTwxMHx8ZS50aW1lU3RhbXAtdGhpcy5fb0lPU1Njcm9sbC5pVGltZVN0YW1wPjEyMCl7cS5zYXAubG9nLmRlYnVnKCJJT1MgTW9tZW50dW0gU2Nyb2xsaW5nIGlzIE9GRiIpO3RoaXMuX29JT1NTY3JvbGwuYk1vbWVudHVtPWZhbHNlfX10aGlzLl9zY3JvbGxYPWMuc2Nyb2xsTGVmdCgpO3RoaXMuX3Njcm9sbFk9Yy5zY3JvbGxUb3AoKTtpZih0aGlzLl9mblNjcm9sbExvYWRDYWxsYmFjayYmY1swXS5zY3JvbGxIZWlnaHQtYy5zY3JvbGxUb3AoKS1jLmhlaWdodCgpPDEwMCl7dGhpcy5fZm5TY3JvbGxMb2FkQ2FsbGJhY2soKX1pZih0aGlzLl9vSWNvblRhYkJhciYmdGhpcy5fZm5TY3JvbGxFbmRDYWxsYmFjayl7dGhpcy5fZm5TY3JvbGxFbmRDYWxsYmFjaygpfX0sX29uU3RhcnQ6ZnVuY3Rpb24oZSl7dmFyIGM9dGhpcy5fJENvbnRhaW5lclswXTtpZighYylyZXR1cm47dGhpcy5fYkFsbG93U2Nyb2xsPSFzYXAudWkuRGV2aWNlLm9zLmlvc3x8dGhpcy5fYlZlcnRpY2FsJiYoYy5zY3JvbGxIZWlnaHQ+Yy5jbGllbnRIZWlnaHQrMSk7aWYodGhpcy5fYkFsbG93U2Nyb2xsJiZzYXAudWkuRGV2aWNlLm9zLmlvcyl7aWYoYy5zY3JvbGxUb3A9PTApe2Muc2Nyb2xsVG9wPTF9dmFyIGQ9Yy5zY3JvbGxIZWlnaHQtYy5jbGllbnRIZWlnaHQ7aWYoYy5zY3JvbGxUb3A9PT1kKXtjLnNjcm9sbFRvcD1kLTF9fWlmKHRoaXMuX29JT1NTY3JvbGwmJnRoaXMuX29JT1NTY3JvbGwuYk1vbWVudHVtKXtxLnNhcC5sb2cuZGVidWcoIklPUyBNb21lbnR1bSBTY3JvbGxpbmc6IHByZXZlbnQgdGFwIGV2ZW50Iik7ZS5zdG9wUHJvcGFnYXRpb24oKTt0aGlzLl9vSU9TU2Nyb2xsLmJNb21lbnR1bT1mYWxzZX12YXIgcD1lLnRvdWNoZXM/ZS50b3VjaGVzWzBdOmU7dGhpcy5faVg9cC5wYWdlWDt0aGlzLl9pWT1wLnBhZ2VZO3RoaXMuX2JQdWxsRG93bj1mYWxzZTt0aGlzLl9pRGlyZWN0aW9uPSIifSxfb25Ub3VjaE1vdmU6ZnVuY3Rpb24oZSl7dmFyIGM9dGhpcy5fJENvbnRhaW5lclswXTt2YXIgcD1lLnRvdWNoZXNbMF07aWYodGhpcy5faURpcmVjdGlvbj09IiIpe3ZhciBkPXAucGFnZVgtdGhpcy5faVg7dmFyIGI9cC5wYWdlWS10aGlzLl9pWTtpZihkIT0wfHxiIT0wKXt0aGlzLl9pRGlyZWN0aW9uPU1hdGguYWJzKGIpPk1hdGguYWJzKGQpPyJ2IjoiaCJ9aWYodGhpcy5fb1B1bGxEb3duJiZ0aGlzLl9vUHVsbERvd24uX2JUb3VjaE1vZGUmJnRoaXMuX2lEaXJlY3Rpb249PSJ2IiYmYy5zY3JvbGxUb3A8PTEpe2lmKGI+TWF0aC5hYnMoZCkpe3RoaXMuX2JQdWxsRG93bj10cnVlfX19aWYodGhpcy5fYlB1bGxEb3duPT09dHJ1ZSl7dmFyIGY9dGhpcy5fb1B1bGxEb3duLmdldERvbVJlZigpO3ZhciB0PWUudG91Y2hlc1swXS5wYWdlWS10aGlzLl9pWS1mLm9mZnNldEhlaWdodDtpZih0PjIwKXQ9MjA7Zi5zdHlsZS5tYXJnaW5Ub3A9dCsicHgiO3RoaXMuX29QdWxsRG93bi5kb1B1bGwodCk7ZS5wcmV2ZW50RGVmYXVsdCgpfWlmKHRoaXMuX2JEcmFnU2Nyb2xsKXtpZih0aGlzLl9pRGlyZWN0aW9uPT0idiImJnRoaXMuX2JWZXJ0aWNhbHx8dGhpcy5faURpcmVjdGlvbj09ImgiJiZ0aGlzLl9iSG9yaXpvbnRhbCl7Yy5zY3JvbGxMZWZ0PWMuc2Nyb2xsTGVmdCt0aGlzLl9pWC1wLnBhZ2VYO2Muc2Nyb2xsVG9wPWMuc2Nyb2xsVG9wK3RoaXMuX2lZLXAucGFnZVk7dGhpcy5faVg9cC5wYWdlWDt0aGlzLl9pWT1wLnBhZ2VZO2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpfXJldHVybn1pZih0aGlzLl9vSU9TU2Nyb2xsJiZ0aGlzLl9iQWxsb3dTY3JvbGwmJnRoaXMuX2lEaXJlY3Rpb249PSJ2IiYmTWF0aC5hYnMoZS50b3VjaGVzWzBdLnBhZ2VZLXRoaXMuX2lZKT49MTApe3RoaXMuX29JT1NTY3JvbGwuYk1vbWVudHVtPXRydWU7dGhpcy5fb0lPU1Njcm9sbC5pVGltZVN0YW1wPWUudGltZVN0YW1wfWlmKHRoaXMuX2JBbGxvd1Njcm9sbHx8dGhpcy5fYkhvcml6b250YWwmJnRoaXMuX2lEaXJlY3Rpb249PSJoIil7ZS5zZXRNYXJrZWQoKTtpZih3aW5kb3cuaVNjcm9sbCl7ZS5zZXRNYXJrZWQoInNjcm9sbCIpfX19LF9vbkVuZDpmdW5jdGlvbihlKXtpZih0aGlzLl9vSU9TU2Nyb2xsJiZ0aGlzLl9vSU9TU2Nyb2xsLmJNb21lbnR1bSl7dGhpcy5fb0lPU1Njcm9sbC5pVGltZVN0YW1wPWUudGltZVN0YW1wfWlmKHRoaXMuX29QdWxsRG93biYmdGhpcy5fb1B1bGxEb3duLl9iVG91Y2hNb2RlKXt0aGlzLl9vUHVsbERvd24uZG9TY3JvbGxFbmQoKTt0aGlzLl9yZWZyZXNoKCl9aWYodGhpcy5fYkRyYWdTY3JvbGwmJnRoaXMuX2lEaXJlY3Rpb24pe2Uuc2V0TWFya2VkKCl9fSxfb25Nb3VzZURvd246ZnVuY3Rpb24oZSl7aWYoZS5idXR0b249PTApe3RoaXMuX2JTY3JvbGxpbmc9dHJ1ZTt0aGlzLl9vblN0YXJ0KGUpfX0sX29uTW91c2VNb3ZlOmZ1bmN0aW9uKEUpe2lmKHRoaXMuX2JTY3JvbGxpbmcpe3ZhciBlPUUub3JpZ2luYWxFdmVudDt2YXIgYj1lLmJ1dHRvbnN8fGUud2hpY2g7aWYoYj09MSl7dmFyIGM9dGhpcy5fJENvbnRhaW5lclswXTtjLnNjcm9sbExlZnQ9Yy5zY3JvbGxMZWZ0K3RoaXMuX2lYLUUucGFnZVg7Yy5zY3JvbGxUb3A9Yy5zY3JvbGxUb3ArdGhpcy5faVktRS5wYWdlWTt0aGlzLl9pWD1FLnBhZ2VYO3RoaXMuX2lZPUUucGFnZVl9fX0sX29uTW91c2VVcDpmdW5jdGlvbihlKXt0aGlzLl9iU2Nyb2xsaW5nPWZhbHNlO3RoaXMuX29uRW5kKCl9LG9uQmVmb3JlUmVuZGVyaW5nOmZ1bmN0aW9uKCl7aWYodGhpcy5fc1Jlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9zUmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fc1Jlc2l6ZUxpc3RlbmVySWQ9bnVsbH12YXIgYz10aGlzLl8kQ29udGFpbmVyO2lmKGMpe2lmKGMuaGVpZ2h0KCk+MCl7dGhpcy5fc2Nyb2xsWD1jLnNjcm9sbExlZnQoKTt0aGlzLl9zY3JvbGxZPWMuc2Nyb2xsVG9wKCl9Yy5vZmYoKX19LG9uQWZ0ZXJSZW5kZXJpbmc6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl8kQ29udGFpbmVyPSQuc2FwLmJ5SWQodGhpcy5fc0NvbnRlbnRJZCkucGFyZW50KCk7dmFyIF89cS5wcm94eSh0aGlzLl9yZWZyZXNoLHRoaXMpO3RoaXMuX3NldE92ZXJmbG93KCk7dGhpcy5fc2Nyb2xsVG8odGhpcy5fc2Nyb2xsWCx0aGlzLl9zY3JvbGxZKTt0aGlzLl9yZWZyZXNoKCk7aWYoIWMuaXMoIjp2aXNpYmxlIil8fCEhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyfHx0aGlzLl9vUHVsbERvd258fHRoaXMuX2ZuU2Nyb2xsTG9hZENhbGxiYWNrKXt0aGlzLl9zUmVzaXplTGlzdGVuZXJJZD1zYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLnJlZ2lzdGVyKGNbMF0sXyl9Yy5zY3JvbGwocS5wcm94eSh0aGlzLl9vblNjcm9sbCx0aGlzKSk7aWYoc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoKXtjLm9uKCJ0b3VjaGNhbmNlbCB0b3VjaGVuZCIscS5wcm94eSh0aGlzLl9vbkVuZCx0aGlzKSkub24oInRvdWNoc3RhcnQiLHEucHJveHkodGhpcy5fb25TdGFydCx0aGlzKSkub24oInRvdWNobW92ZSIscS5wcm94eSh0aGlzLl9vblRvdWNoTW92ZSx0aGlzKSl9ZWxzZSBpZih0aGlzLl9iRHJhZ1Njcm9sbCl7Yy5vbigibW91c2V1cCBtb3VzZWxlYXZlIixxLnByb3h5KHRoaXMuX29uTW91c2VVcCx0aGlzKSkubW91c2Vkb3duKHEucHJveHkodGhpcy5fb25Nb3VzZURvd24sdGhpcykpLm1vdXNlbW92ZShxLnByb3h5KHRoaXMuX29uTW91c2VNb3ZlLHRoaXMpKX19LF9yZWFkQWN0dWFsU2Nyb2xsUG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzLl8kQ29udGFpbmVyLndpZHRoKCk+MCl7dGhpcy5fc2Nyb2xsWD10aGlzLl8kQ29udGFpbmVyLnNjcm9sbExlZnQoKX1pZih0aGlzLl8kQ29udGFpbmVyLmhlaWdodCgpPjApe3RoaXMuX3Njcm9sbFk9dGhpcy5fJENvbnRhaW5lci5zY3JvbGxUb3AoKX19LF9zY3JvbGxUbzpmdW5jdGlvbih4LHksdCl7aWYodGhpcy5fJENvbnRhaW5lci5sZW5ndGg+MCl7aWYodD4wKXt0aGlzLl8kQ29udGFpbmVyLmFuaW1hdGUoe3Njcm9sbFRvcDp5LHNjcm9sbExlZnQ6eH0sdCxxLnByb3h5KHRoaXMuX3JlYWRBY3R1YWxTY3JvbGxQb3NpdGlvbix0aGlzKSl9ZWxzZXt0aGlzLl8kQ29udGFpbmVyLnNjcm9sbFRvcCh5KTt0aGlzLl8kQ29udGFpbmVyLnNjcm9sbExlZnQoeCk7dGhpcy5fcmVhZEFjdHVhbFNjcm9sbFBvc2l0aW9uKCl9fX19O2Z1bmN0aW9uIGEocyxjKXt2YXIgZDtpZighc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoJiYhJC5zYXAuc2ltdWxhdGVNb2JpbGVPbkRlc2t0b3AmJiFjLm5vblRvdWNoU2Nyb2xsaW5nKXtyZXR1cm59aWYoc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNofHwkLnNhcC5zaW11bGF0ZU1vYmlsZU9uRGVza3RvcCl7JC5zYXAucmVxdWlyZSgianF1ZXJ5LnNhcC5tb2JpbGUiKX1kPXtfaW5pdDpmdW5jdGlvbihDLGIsYyl7ZnVuY3Rpb24gZShmLGgsdil7dmFyIG89bmV3IHdpbmRvdy5TY3JvbGxlcihmdW5jdGlvbihqLHQsayl7dmFyIG09JC5zYXAuYnlJZChmKS5wYXJlbnQoKTttLnNjcm9sbExlZnQoaik7bS5zY3JvbGxUb3AodCl9LHtzY3JvbGxpbmdYOmgsc2Nyb2xsaW5nWTp2LGJvdW5jaW5nOmZhbHNlfSk7cmV0dXJuIG99ZnVuY3Rpb24gZygpe2lmKGMuenluZ2Epe3JldHVybiJ6In1pZihzYXAudWkuRGV2aWNlLm9zLmFuZHJvaWQmJnNhcC51aS5EZXZpY2Uub3MudmVyc2lvbjw0LjF8fHNhcC51aS5EZXZpY2Uub3MuYmxhY2tiZXJyeXx8c2FwLnVpLkRldmljZS5vcy5pb3MmJnNhcC51aS5EZXZpY2Uub3MudmVyc2lvbjw2KXtyZXR1cm4iaSJ9aWYoIXNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCYmJC5zYXAuc2ltdWxhdGVNb2JpbGVPbkRlc2t0b3Ape3JldHVybiJpIn1pZihjLmlzY3JvbGw9PSJmb3JjZSJ8fChzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gmJihjLmlzY3JvbGx8fHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldE5vTmF0aXZlU2Nyb2xsKCkpKSl7cmV0dXJuImkifXJldHVybiJuIn12YXIgbD1nKCk7dGhpcy5fcHJldmVudFRvdWNoTW92ZURlZmF1bHQ9ISFjLnByZXZlbnREZWZhdWx0O3RoaXMuX3Njcm9sbGVyPW51bGw7c3dpdGNoKGwpe2Nhc2UieiI6JC5zYXAucmVxdWlyZSgic2FwLnVpLnRoaXJkcGFydHkuenluZ2FzY3JvbGwiKTskLmV4dGVuZCh0aGlzLHopO3RoaXMuX3p5bmdhPXRydWU7dGhpcy5fc2Nyb2xsZXI9ZSh0aGlzLl9zQ29udGVudElkLHRoaXMuX2JIb3Jpem9udGFsLHRoaXMuX2JWZXJ0aWNhbCk7YnJlYWs7Y2FzZSJpIjokLnNhcC5yZXF1aXJlKCJzYXAudWkudGhpcmRwYXJ0eS5pc2Nyb2xsIik7JC5leHRlbmQodGhpcyxpKTt0aGlzLl9iSVNjcm9sbD10cnVlO2JyZWFrO2RlZmF1bHQ6aWYoJC5tb2JpbGUmJiQuZXZlbnQuc3BlY2lhbC5zd2lwZSYmJC5ldmVudC5zcGVjaWFsLnN3aXBlLnNjcm9sbFN1cHJlc3Npb25UaHJlc2hvbGQ8MTIwKXskLmV2ZW50LnNwZWNpYWwuc3dpcGUuc2Nyb2xsU3VwcmVzc2lvblRocmVzaG9sZD0xMjB9JC5leHRlbmQodGhpcyxuKTtpZihjLm5vblRvdWNoU2Nyb2xsaW5nPT09dHJ1ZSl7dGhpcy5fYkRyYWdTY3JvbGw9dHJ1ZX1pZihzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKSl7dGhpcy5fc2Nyb2xsWD05OTk5fWlmKHNhcC51aS5EZXZpY2Uub3MuaW9zKXt0aGlzLl9vSU9TU2Nyb2xsPXtpVGltZVN0YW1wOjAsYk1vbWVudHVtOmZhbHNlfX1icmVha319LF9leGl0OmZ1bmN0aW9uKCl7aWYodGhpcy5fY2xlYW51cCl7dGhpcy5fY2xlYW51cCgpfXRoaXMuX3Njcm9sbGVyPW51bGx9fTskLmV4dGVuZChzLGQpfXJldHVybiBTfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLlZpZXdSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5WaWV3UmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvVmlld1JlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBWPXt9O1YuYWRkRGlzcGxheUNsYXNzPWZ1bmN0aW9uKHIsYyl7aWYoYy5nZXREaXNwbGF5QmxvY2soKXx8KGMuZ2V0V2lkdGgoKT09PSIxMDAlIiYmYy5nZXRIZWlnaHQoKT09PSIxMDAlIikpe3IuYWRkQ2xhc3MoInNhcFVpVmlld0Rpc3BsYXlCbG9jayIpfX07cmV0dXJuIFZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuWE1MVmlld1JlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLlhNTFZpZXdSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9YTUxWaWV3UmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1ZpZXdSZW5kZXJlciddLGZ1bmN0aW9uKHEsVil7InVzZSBzdHJpY3QiO3ZhciBYPXt9O1gucmVuZGVyPWZ1bmN0aW9uKHIsYyl7dmFyICQ9Yy5fJG9sZENvbnRlbnQ9c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5maW5kUHJlc2VydmVkQ29udGVudChjLmdldElkKCkpO2lmKCQubGVuZ3RoPT09MCl7dmFyIHM9Yy5pc1N1YlZpZXcoKTtpZighcyl7ci53cml0ZSgiPGRpdiIpO3Iud3JpdGVDb250cm9sRGF0YShjKTtyLmFkZENsYXNzKCJzYXBVaVZpZXciKTtyLmFkZENsYXNzKCJzYXBVaVhNTFZpZXciKTtWLmFkZERpc3BsYXlDbGFzcyhyLGMpO3Iud3JpdGVBdHRyaWJ1dGUoImRhdGEtc2FwLXVpLXByZXNlcnZlIixjLmdldElkKCkpO2lmKGMuZ2V0V2lkdGgoKSl7ci5hZGRTdHlsZSgid2lkdGgiLGMuZ2V0V2lkdGgoKSl9aWYoYy5nZXRIZWlnaHQoKSl7ci5hZGRTdHlsZSgiaGVpZ2h0IixjLmdldEhlaWdodCgpKX1yLndyaXRlU3R5bGVzKCk7ci53cml0ZUNsYXNzZXMoKTtyLndyaXRlKCI+Iil9Zm9yKHZhciBpPTA7aTxjLl9hUGFyc2VkQ29udGVudC5sZW5ndGg7aSsrKXt2YXIgZj1jLl9hUGFyc2VkQ29udGVudFtpXTtpZihmJiZ0eXBlb2YoZik9PT0ic3RyaW5nIil7ci53cml0ZShmKX1lbHNle3IucmVuZGVyQ29udHJvbChmKTtpZighZi5iT3V0cHV0KXtyLndyaXRlKCc8ZGl2IGlkPSJzYXAtdWktZHVtbXktJytmLmdldElkKCkrJyIgY2xhc3M9InNhcFVpSGlkZGVuIi8+Jyl9fX1pZighcyl7ci53cml0ZSgiPC9kaXY+Iil9fWVsc2V7ci5yZW5kZXJDb250cm9sKGMub0FmdGVyUmVuZGVyaW5nTm90aWZpZXIpO3Iud3JpdGUoJzxkaXYgaWQ9InNhcC11aS1kdW1teS0nK2MuZ2V0SWQoKSsnIiBjbGFzcz0ic2FwVWlIaWRkZW4iPicpO2Zvcih2YXIgaT0wO2k8Yy5fYVBhcnNlZENvbnRlbnQubGVuZ3RoO2krKyl7dmFyIGY9Yy5fYVBhcnNlZENvbnRlbnRbaV07aWYodHlwZW9mKGYpIT09InN0cmluZyIpe3Euc2FwLmJ5SWQoZi5nZXRJZCgpLCQpLnJlcGxhY2VXaXRoKCc8ZGl2IGlkPSJzYXAtdWktZHVtbXktJytmLmdldElkKCkrJyIgY2xhc3M9InNhcFVpSGlkZGVuIi8+Jyk7ci5yZW5kZXJDb250cm9sKGYpfX1yLndyaXRlKCc8L2Rpdj4nKX19O3JldHVybiBYfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50UmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnRSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3RtcGwvRE9NRWxlbWVudFJlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBEPXt9O0QucmVuZGVyPWZ1bmN0aW9uKHIsZSl7ci53cml0ZSgiPCIpO3Iud3JpdGUoZS5nZXRUYWcoKSk7ci53cml0ZUNvbnRyb2xEYXRhKGUpO3EuZWFjaChlLmdldEF0dHJpYnV0ZXMoKSxmdW5jdGlvbihpLGEpe3ZhciBuPWEuZ2V0TmFtZSgpLnRvTG93ZXJDYXNlKCk7aWYobj09PSJjbGFzcyIpe3ZhciBjPWEuZ2V0VmFsdWUoKS5zcGxpdCgiICIpO3EuZWFjaChjLGZ1bmN0aW9uKGksQyl7dmFyIEM9Qy50cmltKCk7aWYoQyl7ci5hZGRDbGFzcyhDKX19KX1lbHNlIGlmKG49PT0ic3R5bGUiKXt2YXIgcz1hLmdldFZhbHVlKCkuc3BsaXQoIjsiKTtxLmVhY2gocyxmdW5jdGlvbihpLFMpe3ZhciBpPVMuaW5kZXhPZigiOiIpO2lmKGkhPS0xKXt2YXIgaz1TLnN1YnN0cmluZygwLGkpLnRyaW0oKTt2YXIgdj1TLnN1YnN0cmluZyhpKzEpLnRyaW0oKTtyLmFkZFN0eWxlKGssdil9fSl9ZWxzZXtyLndyaXRlQXR0cmlidXRlRXNjYXBlZChhLmdldE5hbWUoKSxhLmdldFZhbHVlKCkpfX0pO3Iud3JpdGVDbGFzc2VzKCk7ci53cml0ZVN0eWxlcygpO3ZhciBFPWUuZ2V0RWxlbWVudHMoKSxoPSEhZS5nZXRUZXh0KCl8fEUubGVuZ3RoPjA7aWYoIWgpe3Iud3JpdGUoIi8+Iil9ZWxzZXtyLndyaXRlKCI+Iik7aWYoZS5nZXRUZXh0KCkpe3Iud3JpdGVFc2NhcGVkKGUuZ2V0VGV4dCgpKX1xLmVhY2goRSxmdW5jdGlvbihpLGMpe3IucmVuZGVyQ29udHJvbChjKX0pO3Iud3JpdGUoIjwvIik7ci53cml0ZShlLmdldFRhZygpKTtyLndyaXRlKCI+Iil9fTtyZXR1cm4gRH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sUmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbFJlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdG1wbC9UZW1wbGF0ZUNvbnRyb2xSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgVD17fTtULnJlbmRlcj1mdW5jdGlvbihyLGMpe3ZhciBpPWMuaXNJbmxpbmUoKTtpZighaSl7ci53cml0ZSgiPGRpdiIpO3Iud3JpdGVDb250cm9sRGF0YShjKTtyLndyaXRlU3R5bGVzKCk7ci53cml0ZUNsYXNzZXMoKTtyLndyaXRlKCI+Iil9dmFyIFI9dGhpcy5yZW5kZXJUZW1wbGF0ZXx8Yy5nZXRUZW1wbGF0ZVJlbmRlcmVyKCk7aWYoUil7Ui5hcHBseSh0aGlzLGFyZ3VtZW50cyl9aWYoIWkpe3Iud3JpdGUoIjwvZGl2PiIpfX07cmV0dXJuIFR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLkZpbGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkZpbGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL0ZpbGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvRGV2aWNlJ10sZnVuY3Rpb24ocSxEKXsndXNlIHN0cmljdCc7dmFyIEY9e3NhdmU6ZnVuY3Rpb24oZCxmLHMsbSxjKXt2YXIgYT1mKycuJytzO2lmKGM9PT0ndXRmLTgnJiZzPT09J2Nzdicpe2Q9J1x1ZmVmZicrZH1pZih3aW5kb3cuQmxvYil7dmFyIHQ9J2RhdGE6JyttO2lmKGMpe3QrPSc7Y2hhcnNldD0nK2N9dmFyIGI9bmV3IHdpbmRvdy5CbG9iKFtkXSx7dHlwZTp0fSk7aWYod2luZG93Lm5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKXt3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IoYixhKX1lbHNle3ZhciB1PXdpbmRvdy5VUkx8fHdpbmRvdy53ZWJraXRVUkw7dmFyIEI9dS5jcmVhdGVPYmplY3RVUkwoYik7dmFyIGw9d2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtpZignZG93bmxvYWQnaW4gbCl7dmFyICQ9cShkb2N1bWVudC5ib2R5KTt2YXIgZT1xKGwpLmF0dHIoe2Rvd25sb2FkOmEsaHJlZjpCLHN0eWxlOidkaXNwbGF5Om5vbmUnfSk7JC5hcHBlbmQoZSk7ZS5nZXQoMCkuY2xpY2soKTtlLnJlbW92ZSgpfWVsc2V7d2luZG93Lm9wZW4odCsiO2Jhc2U2NCwiK3dpbmRvdy5idG9hKGQpKX19fWVsc2UgaWYoRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZELmJyb3dzZXIudmVyc2lvbjw9OSl7dmFyICQ9cShkb2N1bWVudC5ib2R5KTt2YXIgZz1xKCc8aWZyYW1lLz4nLHtzdHlsZTonZGlzcGxheTpub25lJ30pOyQuYXBwZW5kKGcpO3ZhciBvPWcuZ2V0KDApLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7by5vcGVuKG0sJ3JlcGxhY2UnKTtpZihjKXtvLmNoYXJzZXQ9Y31vLndyaXRlKGQpO28uY2xvc2UoKTt2YXIgVD1uZXcgRGF0ZSgpO3ZhciBTPW8uZXhlY0NvbW1hbmQoJ1NhdmVBcycsZmFsc2UsYSk7aWYoIVMmJm5ldyBEYXRlKCktVDwxMCl7by5leGVjQ29tbWFuZCgnU2F2ZUFzJyxmYWxzZSxhKycudHh0Jyl9Zy5yZW1vdmUoKX19fTtyZXR1cm4gRn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuTGlicmFyeUluZm8nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkxpYnJhcnlJbmZvJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9MaWJyYXJ5SW5mbyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL09iamVjdCcsJ2pxdWVyeS5zYXAuc2NyaXB0J10sZnVuY3Rpb24ocSxCKXsidXNlIHN0cmljdCI7dmFyIEw9Qi5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuTGlicmFyeUluZm8iLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0IuYXBwbHkodGhpcyk7dGhpcy5fb0xpYkluZm9zPXt9fSxkZXN0cm95OmZ1bmN0aW9uKCl7Qi5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5fb0xpYkluZm9zPXt9fSxnZXRJbnRlcmZhY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KTtMLnByb3RvdHlwZS5fbG9hZExpYnJhcnlNZXRhZGF0YT1mdW5jdGlvbihsLGMpe2w9bC5yZXBsYWNlKC9cLy9nLCIuIik7aWYodGhpcy5fb0xpYkluZm9zW2xdKXtxLnNhcC5kZWxheWVkQ2FsbCgwLHdpbmRvdyxjLFt0aGlzLl9vTGliSW5mb3NbbF1dKTtyZXR1cm59dmFyIHU9cS5zYXAuZ2V0TW9kdWxlUGF0aChsLCcvJyksdD10aGlzO3EuYWpheCh7dXJsOnUrIi5saWJyYXJ5IixkYXRhVHlwZToieG1sIixlcnJvcjpmdW5jdGlvbih4LHMsZSl7cS5zYXAubG9nLmVycm9yKCJmYWlsZWQgdG8gbG9hZCBsaWJyYXJ5IGRldGFpbHMgZnJvbSAnIit1KyIubGlicmFyeSc6ICIrcysiLCAiK2UpO3QuX29MaWJJbmZvc1tsXT17bmFtZTpsLGRhdGE6bnVsbCx1cmw6dX07Yyh0Ll9vTGliSW5mb3NbbF0pfSxzdWNjZXNzOmZ1bmN0aW9uKGQscyx4KXt0Ll9vTGliSW5mb3NbbF09e25hbWU6bCxkYXRhOmQsdXJsOnV9O2ModC5fb0xpYkluZm9zW2xdKX19KX07TC5wcm90b3R5cGUuX2dldExpYnJhcnlJbmZvPWZ1bmN0aW9uKGwsYyl7dGhpcy5fbG9hZExpYnJhcnlNZXRhZGF0YShsLGZ1bmN0aW9uKGQpe3ZhciByPXtsaWJzOltdLGxpYnJhcnk6ZC5uYW1lLGxpYnJhcnlVcmw6ZC51cmx9O2lmKGQuZGF0YSl7dmFyICQ9cShkLmRhdGEpO3IudmVuZG9yPSQuZmluZCgidmVuZG9yIikudGV4dCgpO3IuY29weXJpZ2h0PSQuZmluZCgiY29weXJpZ2h0IikudGV4dCgpO3IudmVyc2lvbj0kLmZpbmQoInZlcnNpb24iKS50ZXh0KCk7ci5kb2N1bWVudGF0aW9uPSQuZmluZCgiZG9jdW1lbnRhdGlvbiIpLnRleHQoKX1jKHIpfSl9O0wucHJvdG90eXBlLl9nZXRUaGlyZFBhcnR5SW5mbz1mdW5jdGlvbihsLGMpe3RoaXMuX2xvYWRMaWJyYXJ5TWV0YWRhdGEobCxmdW5jdGlvbihkKXt2YXIgcj17bGliczpbXSxsaWJyYXJ5OmQubmFtZSxsaWJyYXJ5VXJsOmQudXJsfTtpZihkLmRhdGEpe3ZhciAkPXEoZC5kYXRhKS5maW5kKCJhcHBEYXRhIikuZmluZCgidGhpcmRwYXJ0eSIpLmNoaWxkcmVuKCk7JC5lYWNoKGZ1bmN0aW9uKGksbyl7aWYoby5ub2RlTmFtZT09PSJsaWIiKXt2YXIgYT1xKG8pO3ZhciBiPWEuY2hpbGRyZW4oImxpY2Vuc2UiKTtyLmxpYnMucHVzaCh7ZGlzcGxheU5hbWU6YS5hdHRyKCJkaXNwbGF5TmFtZSIpLGhvbWVwYWdlOmEuYXR0cigiaG9tZXBhZ2UiKSxsaWNlbnNlOnt1cmw6Yi5hdHRyKCJ1cmwiKSx0eXBlOmIuYXR0cigidHlwZSIpLGZpbGU6ZC51cmwrYi5hdHRyKCJmaWxlIil9fSl9fSl9YyhyKX0pfTtMLnByb3RvdHlwZS5fZ2V0RG9jdUluZGV4PWZ1bmN0aW9uKGwsYyl7dGhpcy5fbG9hZExpYnJhcnlNZXRhZGF0YShsLGZ1bmN0aW9uKGQpe3ZhciBhPWQubmFtZSxiPWQudXJsLHI9eyJkb2N1Ijp7fSxsaWJyYXJ5OmEsbGlicmFyeVVybDpifTtpZighZC5kYXRhKXtjKHIpO3JldHVybn12YXIgRD1xKGQuZGF0YSkuZmluZCgiYXBwRGF0YSIpLmZpbmQoImRvY3VtZW50YXRpb24iKTt2YXIgdT1ELmF0dHIoImluZGV4VXJsIik7aWYoIXUpe2Mocik7cmV0dXJufWlmKEQuYXR0cigicmVzb2x2ZSIpPT0ibGliIil7dT1kLnVybCt1fXEuYWpheCh7dXJsOnUsZGF0YVR5cGU6Impzb24iLGVycm9yOmZ1bmN0aW9uKHgscyxlKXtxLnNhcC5sb2cuZXJyb3IoImZhaWxlZCB0byBsb2FkIGxpYnJhcnkgZG9jdSBmcm9tICciK3UrIic6ICIrcysiLCAiK2UpO2Mocil9LHN1Y2Nlc3M6ZnVuY3Rpb24oZCxzLHgpe2QubGlicmFyeT1hO2QubGlicmFyeVVybD1iO2MoZCl9fSl9KX07cmV0dXJuIEx9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS53cy5SZWFkeVN0YXRlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUud3MuUmVhZHlTdGF0ZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3dzL1JlYWR5U3RhdGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIFI9e0NPTk5FQ1RJTkc6MCxPUEVOOjEsQ0xPU0lORzoyLENMT1NFRDozfTtyZXR1cm4gUn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5CaW5kaW5nTW9kZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5CaW5kaW5nTW9kZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9CaW5kaW5nTW9kZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgQj17RGVmYXVsdDoiRGVmYXVsdCIsT25lVGltZToiT25lVGltZSIsT25lV2F5OiJPbmVXYXkiLFR3b1dheToiVHdvV2F5In07cmV0dXJuIEJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9DaGFuZ2VSZWFzb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEM9e1NvcnQ6InNvcnQiLEZpbHRlcjoiZmlsdGVyIixDaGFuZ2U6ImNoYW5nZSIsQ29udGV4dDoiY29udGV4dCIsUmVmcmVzaDoicmVmcmVzaCJ9O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0ZpbHRlck9wZXJhdG9yIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBGPXtFUToiRVEiLE5FOiJORSIsTFQ6IkxUIixMRToiTEUiLEdUOiJHVCIsR0U6IkdFIixCVDoiQlQiLENvbnRhaW5zOiJDb250YWlucyIsU3RhcnRzV2l0aDoiU3RhcnRzV2l0aCIsRW5kc1dpdGg6IkVuZHNXaXRoIn07cmV0dXJuIEZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuRmlsdGVyVHlwZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5GaWx0ZXJUeXBlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0ZpbHRlclR5cGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEY9e0FwcGxpY2F0aW9uOiJBcHBsaWNhdGlvbiIsQ29udHJvbDoiQ29udHJvbCJ9O3JldHVybiBGfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkZvcm1hdEV4Y2VwdGlvbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvRm9ybWF0RXhjZXB0aW9uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXhjZXB0aW9uJ10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIEY9ZnVuY3Rpb24obSl7dGhpcy5uYW1lPSJGb3JtYXRFeGNlcHRpb24iO3RoaXMubWVzc2FnZT1tfTtGLnByb3RvdHlwZT1xLnNhcC5uZXdPYmplY3QoRS5wcm90b3R5cGUpO3JldHVybiBGfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL1BhcnNlRXhjZXB0aW9uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXhjZXB0aW9uJ10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIFA9ZnVuY3Rpb24obSl7dGhpcy5uYW1lPSJQYXJzZUV4Y2VwdGlvbiI7dGhpcy5tZXNzYWdlPW19O1AucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChFLnByb3RvdHlwZSk7cmV0dXJuIFB9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuU29ydGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLlNvcnRlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9Tb3J0ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIFM9c2FwLnVpLmJhc2UuT2JqZWN0LmV4dGVuZCgic2FwLnVpLm1vZGVsLlNvcnRlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHAsZCxnKXtpZih0eXBlb2YgcD09PSJvYmplY3QiKXt2YXIgcz1wO3A9cy5wYXRoO2Q9cy5kZXNjZW5kaW5nO2c9cy5ncm91cH10aGlzLnNQYXRoPXA7dmFyIGk9dGhpcy5zUGF0aC5pbmRleE9mKCI+Iik7aWYoaT4wKXt0aGlzLnNQYXRoPXRoaXMuc1BhdGguc3Vic3RyKGkrMSl9dGhpcy5iRGVzY2VuZGluZz1kO3RoaXMudkdyb3VwPWc7aWYodHlwZW9mIGc9PSJib29sZWFuIiYmZyl7dGhpcy5mbkdyb3VwPWZ1bmN0aW9uKGMpe3JldHVybiBjLmdldFByb3BlcnR5KHRoaXMuc1BhdGgpfX1pZih0eXBlb2YgZz09ImZ1bmN0aW9uIil7dGhpcy5mbkdyb3VwPWd9fX0pO3JldHVybiBTfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLlR5cGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuVHlwZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9UeXBlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0J10sZnVuY3Rpb24ocSxCKXsidXNlIHN0cmljdCI7dmFyIFQ9Qi5leHRlbmQoInNhcC51aS5tb2RlbC5UeXBlIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtCLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJUeXBlIn0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiZ2V0TmFtZSJdfX0pO1QucHJvdG90eXBlLmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zTmFtZX07cmV0dXJuIFR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuVmFsaWRhdGVFeGNlcHRpb24nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuVmFsaWRhdGVFeGNlcHRpb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvVmFsaWRhdGVFeGNlcHRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FeGNlcHRpb24nXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgVj1mdW5jdGlvbihtLHYpe3RoaXMubmFtZT0iVmFsaWRhdGVFeGNlcHRpb24iO3RoaXMubWVzc2FnZT1tO3RoaXMudmlvbGF0ZWRDb25zdHJhaW50cz12fTtWLnByb3RvdHlwZT1xLnNhcC5uZXdPYmplY3QoRS5wcm90b3R5cGUpO3JldHVybiBWfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmFuYWx5dGljcy5vZGF0YTRhbmFseXRpY3MnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuYW5hbHl0aWNzLm9kYXRhNGFuYWx5dGljcycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9hbmFseXRpY3Mvb2RhdGE0YW5hbHl0aWNzIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBvPW98fHt9O28uY29uc3RhbnRzPXt9O28uY29uc3RhbnRzWyJTQVBfTkFNRVNQQUNFIl09Imh0dHA6Ly93d3cuc2FwLmNvbS9Qcm90b2NvbHMvU0FQRGF0YSI7by5jb25zdGFudHNbIlZFUlNJT04iXT0iMC43IjtvLmhlbHBlcj17dG9rZW5pemVOYW1ldG9MYWJlbFRleHQ6ZnVuY3Rpb24obil7dmFyIGw9IiI7bD1uLnJlcGxhY2UoL15QXyguKikvLCIkMSIpO2w9bC5yZXBsYWNlKC8oW15BLVowLTlfXSspKFtBLVowLTlfXSkvZywiJDEgJDIiKTtsPWwucmVwbGFjZSgvKFtBLVowLTlfXXsyLH0pKFtBLVowLTlfXSkoW15BLVowLTlfXSspL2csIiQxICQyJDMiKTtsPWwucmVwbGFjZSgvKC4qKSBfRSQvLCIkMSIpO2w9bC5yZXBsYWNlKC8oLiopIF8oLiopL2csIiQxICQyIik7cmV0dXJuIGx9fTtvLk1vZGVsPWZ1bmN0aW9uKG0scCl7dGhpcy5faW5pdChtLHApfTtvLk1vZGVsLlJlZmVyZW5jZUJ5VVJJPWZ1bmN0aW9uKHUpe3JldHVybntzU2VydmljZVVSSTp1fX07by5Nb2RlbC5SZWZlcmVuY2VCeU1vZGVsPWZ1bmN0aW9uKG0pe3JldHVybntvTW9kZWw6bX19O28uTW9kZWwuUmVmZXJlbmNlV2l0aFdvcmthcm91bmQ9ZnVuY3Rpb24obSx3KXtyZXR1cm57b01vZGVsUmVmZXJlbmNlOm0sYVdvcmthcm91bmRJRDp3fX07by5Nb2RlbC5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKG0scCl7aWYodHlwZW9mIHA9PSJzdHJpbmciKXt0aHJvdyJEZXByZWNhdGVkIHNlY29uZCBhcmd1bWVudDogQWRqdXN0IHlvdXIgaW52b2NhdGlvbiBieSBwYXNzaW5nIGFuIG9iamVjdCB3aXRoIGEgcHJvcGVydHkgc0Fubm90YXRpb25KU09ORG9jIGFzIGEgc2Vjb25kIGFyZ3VtZW50IGluc3RlYWQifXRoaXMuX21QYXJhbWV0ZXI9cDt0aGlzLl9vQWN0aXZhdGVkV29ya2Fyb3VuZHM9bmV3IE9iamVjdCgpO2lmKG0mJm0uYVdvcmthcm91bmRJRCl7Zm9yKHZhciBpPS0xLEk7ST1tLmFXb3JrYXJvdW5kSURbKytpXTspe3RoaXMuX29BY3RpdmF0ZWRXb3JrYXJvdW5kc1tJXT10cnVlfW09bS5vTW9kZWxSZWZlcmVuY2V9aWYoIW18fCghbS5zU2VydmljZVVSSSYmIW0ub01vZGVsKSl7dGhyb3ciVXNhZ2Ugd2l0aCBvTW9kZWxSZWZlcmVuY2UgYmVpbmcgYW4gaW5zdGFuY2Ugb2YgTW9kZWwuUmVmZXJlbmNlQnlVUkkgb3IgTW9kZWwuUmVmZXJlbmNlQnlNb2RlbCJ9aWYobS5vTW9kZWwpdGhpcy5fb01vZGVsPW0ub01vZGVsO2Vsc2UgdGhpcy5fb01vZGVsPW5ldyBzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNb2RlbChtLnNTZXJ2aWNlVVJJKTtpZih0aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkuZGF0YVNlcnZpY2VzPT11bmRlZmluZWQpe3Rocm93Ik1vZGVsIGNvdWxkIG5vdCBiZSBsb2FkZWQifWlmKHAmJnAuc0Fubm90YXRpb25KU09ORG9jKXRoaXMubWVyZ2VWMkFubm90YXRpb25zKHAuc0Fubm90YXRpb25KU09ORG9jKTt0aGlzLl9vUXVlcnlSZXN1bHRTZXQ9bmV3IE9iamVjdCgpO3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uU2V0PW5ldyBPYmplY3QoKTt0aGlzLl9vRW50aXR5VHlwZVNldD1uZXcgT2JqZWN0KCk7dGhpcy5fb0VudGl0eVNldFNldD1uZXcgT2JqZWN0KCk7dGhpcy5fb0VudGl0eVR5cGVOYW1lVG9FbnRpdHlTZXRNYXA9bmV3IE9iamVjdCgpO3ZhciBzPXRoaXMuX29Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKS5kYXRhU2VydmljZXMuc2NoZW1hWzBdO2Zvcih2YXIgaT0tMSxjO2M9cy5lbnRpdHlDb250YWluZXJbKytpXTspe2lmKGMuaXNEZWZhdWx0RW50aXR5Q29udGFpbmVyPT0idHJ1ZSIpe3RoaXMuX29EZWZhdWx0RW50aXR5Q29udGFpbmVyPWM7YnJlYWt9fXZhciBlPXMuZW50aXR5VHlwZTt2YXIgUT1bXSxQPVtdLHU9W107Zm9yKHZhciBpPS0xLHQ7dD1lWysraV07KXt2YXIgYj1mYWxzZTtpZih0LmV4dGVuc2lvbnMhPXVuZGVmaW5lZCl7Zm9yKHZhciBqPS0xLEU7RT10LmV4dGVuc2lvbnNbKytqXTspe2lmKEUubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFJiZFLm5hbWU9PSJzZW1hbnRpY3MiKXtiPXRydWU7c3dpdGNoKEUudmFsdWUpe2Nhc2UiYWdncmVnYXRlIjpRLnB1c2godCk7YnJlYWs7Y2FzZSJwYXJhbWV0ZXJzIjpQLnB1c2godCk7YnJlYWs7ZGVmYXVsdDp1LnB1c2godCl9fWlmKGIpY29udGludWV9aWYoIWIpdS5wdXNoKHQpfWVsc2UgdS5wdXNoKHQpfWZvcih2YXIgaT0tMSx0O3Q9dVsrK2ldOyl7dmFyIGE9bmV3IG8uRW50aXR5VHlwZSh0aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkscyx0KTt0aGlzLl9vRW50aXR5VHlwZVNldFthLmdldFFOYW1lKCldPWE7dmFyIGQ9dGhpcy5fZ2V0RW50aXR5U2V0c09mVHlwZShzLGEuZ2V0UU5hbWUoKSk7aWYoZC5sZW5ndGg9PTApdGhyb3ciSW52YWxpZCBjb25zdW1wdGlvbiBtb2RlbDogTm8gZW50aXR5IHNldCBmb3IgZW50aXR5IHR5cGUgIithLmdldFFOYW1lKCkrIiBmb3VuZCI7aWYoZC5sZW5ndGg+MSl0aHJvdyJVbnN1cHBvcnRlZCBjb25zdW1wdGlvbiBtb2RlbDogTW9yZSB0aGFuIG9uZSBlbnRpdHkgc2V0IGZvciBlbnRpdHkgdHlwZSAiK2EuZ2V0UU5hbWUoKSsiIGZvdW5kIjt2YXIgZj1uZXcgby5FbnRpdHlTZXQodGhpcy5fb01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpLHMsZFswXVswXSxkWzBdWzFdLGEpO3RoaXMuX29FbnRpdHlTZXRTZXRbZi5nZXRRTmFtZSgpXT1mO3RoaXMuX29FbnRpdHlUeXBlTmFtZVRvRW50aXR5U2V0TWFwW2EuZ2V0UU5hbWUoKV09Zn12YXIgZz17fTtmb3IodmFyIGk9LTEsdDt0PVBbKytpXTspe3ZhciBhPW5ldyBvLkVudGl0eVR5cGUodGhpcy5fb01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpLHMsdCk7dGhpcy5fb0VudGl0eVR5cGVTZXRbYS5nZXRRTmFtZSgpXT1hO3ZhciBkPXRoaXMuX2dldEVudGl0eVNldHNPZlR5cGUocyxhLmdldFFOYW1lKCkpO2lmKGQubGVuZ3RoPT0wKXRocm93IkludmFsaWQgY29uc3VtcHRpb24gbW9kZWw6IE5vIGVudGl0eSBzZXQgZm9yIHBhcmFtZXRlciBlbnRpdHkgdHlwZSAiK2EuZ2V0UU5hbWUoKSsiIGZvdW5kIjtpZihkLmxlbmd0aD4xKXRocm93IlVuc3VwcG9ydGVkIGNvbnN1bXB0aW9uIG1vZGVsOiBNb3JlIHRoYW4gb25lIGVudGl0eSBzZXQgZm9yIHBhcmFtZXRlciBlbnRpdHkgdHlwZSAiK2EuZ2V0UU5hbWUoKSsiIGZvdW5kIjt2YXIgZj1uZXcgby5FbnRpdHlTZXQodGhpcy5fb01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpLHMsZFswXVswXSxkWzBdWzFdLGEpO3RoaXMuX29FbnRpdHlTZXRTZXRbZi5nZXRRTmFtZSgpXT1mO3RoaXMuX29FbnRpdHlUeXBlTmFtZVRvRW50aXR5U2V0TWFwW2EuZ2V0UU5hbWUoKV09Zjt2YXIgaD1uZXcgby5QYXJhbWV0ZXJpemF0aW9uKGEsZik7dGhpcy5fb1BhcmFtZXRlcml6YXRpb25TZXRbaC5nZXROYW1lKCldPWg7Z1thLmdldFFOYW1lKCldPWg7dmFyIGs9YS5nZXRRTmFtZSgpO2lmKHMuYXNzb2NpYXRpb24hPXVuZGVmaW5lZCl7Zm9yKHZhciBqPS0xLEE7QT1zLmFzc29jaWF0aW9uWysral07KXtpZihBLnJlZmVyZW50aWFsQ29uc3RyYWludD09dW5kZWZpbmVkKWNvbnRpbnVlO3ZhciBsPW51bGw7aWYoQS5lbmRbMF0udHlwZT09ayYmQS5lbmRbMF0ubXVsdGlwbGljaXR5PT0iKiImJkEuZW5kWzFdLm11bHRpcGxpY2l0eT09IjEiKXtsPUEuZW5kWzFdLnR5cGV9ZWxzZSBpZihBLmVuZFsxXS50eXBlPT1rJiZBLmVuZFsxXS5tdWx0aXBsaWNpdHk9PSIqIiYmQS5lbmRbMF0ubXVsdGlwbGljaXR5PT0iMSIpe2w9QS5lbmRbMF0udHlwZX1pZighbCljb250aW51ZTtpZihBLnJlZmVyZW50aWFsQ29uc3RyYWludC5kZXBlbmRlbnQucHJvcGVydHlSZWYubGVuZ3RoIT0xKWNvbnRpbnVlO3ZhciBuPWguZmluZFBhcmFtZXRlckJ5TmFtZShBLnJlZmVyZW50aWFsQ29uc3RyYWludC5kZXBlbmRlbnQucHJvcGVydHlSZWZbMF0ubmFtZSk7aWYobj09bnVsbCljb250aW51ZTt2YXIgdj10aGlzLl9vRW50aXR5VHlwZVNldFtsXTt2YXIgVj10aGlzLl9vRW50aXR5VHlwZU5hbWVUb0VudGl0eVNldE1hcFtsXTtuLnNldFZhbHVlU2V0RW50aXR5KHYsVil9fX1mb3IodmFyIGk9LTEsdDt0PVFbKytpXTspe3ZhciBhPW5ldyBvLkVudGl0eVR5cGUodGhpcy5fb01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpLHMsdCk7dGhpcy5fb0VudGl0eVR5cGVTZXRbYS5nZXRRTmFtZSgpXT1hO3ZhciByPWEuZ2V0UU5hbWUoKTt2YXIgaD1udWxsO3ZhciB3PW51bGw7aWYocy5hc3NvY2lhdGlvbiE9dW5kZWZpbmVkKXtmb3IodmFyIGo9LTEsQTtBPXMuYXNzb2NpYXRpb25bKytqXTspe3ZhciB4PW51bGw7aWYoQS5lbmRbMF0udHlwZT09cil4PUEuZW5kWzFdLnR5cGU7ZWxzZSBpZihBLmVuZFsxXS50eXBlPT1yKXg9QS5lbmRbMF0udHlwZTtlbHNlIGNvbnRpbnVlO3ZhciBNPW51bGw7TT1nW3hdO2lmKE0hPW51bGwpaWYoaCE9bnVsbCl7dGhyb3ciTElNSVRBVElPTjogVW5hYmxlIHRvIGhhbmRsZSBtdWx0aXBsZSBwYXJhbWV0ZXIgZW50aXR5IHR5cGVzIG9mIHF1ZXJ5IGVudGl0eSAiK2EubmFtZX1lbHNle2g9TTt3PUF9fX12YXIgZD10aGlzLl9nZXRFbnRpdHlTZXRzT2ZUeXBlKHMsYS5nZXRRTmFtZSgpKTtpZihkLmxlbmd0aCE9MSl0aHJvdyJJbnZhbGlkIGNvbnN1bXB0aW9uIG1vZGVsOiBUaGVyZSBtdXN0IGJlIGV4YWN0bHkgb25lIGVudGl0eSBzZXQgZm9yIGFuIGVudGl0eSB0eXBlIGFubm90YXRlZCB3aXRoIGFnZ3JlZ2F0aW5nIHNlbWFudGljcyI7dmFyIGY9bmV3IG8uRW50aXR5U2V0KHRoaXMuX29Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSxzLGRbMF1bMF0sZFswXVsxXSxhKTt0aGlzLl9vRW50aXR5U2V0U2V0W2YuZ2V0UU5hbWUoKV09Zjt0aGlzLl9vRW50aXR5VHlwZU5hbWVUb0VudGl0eVNldE1hcFthLmdldFFOYW1lKCldPWY7dmFyIHk9bmV3IG8uUXVlcnlSZXN1bHQodGhpcyxhLGYsaCk7dGhpcy5fb1F1ZXJ5UmVzdWx0U2V0W3kuZ2V0TmFtZSgpXT15O2lmKGgpaC5zZXRUYXJnZXRRdWVyeVJlc3VsdCh5LHcpO2lmKHMuYXNzb2NpYXRpb24hPXVuZGVmaW5lZCl7Zm9yKHZhciBqPS0xLEE7QT1zLmFzc29jaWF0aW9uWysral07KXtpZihBLnJlZmVyZW50aWFsQ29uc3RyYWludD09dW5kZWZpbmVkKWNvbnRpbnVlO3ZhciBEPW51bGw7aWYoQS5lbmRbMF0udHlwZT09ciYmQS5lbmRbMF0ubXVsdGlwbGljaXR5PT0iKiImJkEuZW5kWzFdLm11bHRpcGxpY2l0eT09IjEiKXtEPUEuZW5kWzFdLnR5cGV9ZWxzZSBpZihBLmVuZFsxXS50eXBlPT1yJiZBLmVuZFsxXS5tdWx0aXBsaWNpdHk9PSIqIiYmQS5lbmRbMF0ubXVsdGlwbGljaXR5PT0iMSIpe0Q9QS5lbmRbMF0udHlwZX1pZighRCljb250aW51ZTtpZihBLnJlZmVyZW50aWFsQ29uc3RyYWludC5kZXBlbmRlbnQucHJvcGVydHlSZWYubGVuZ3RoIT0xKWNvbnRpbnVlO3ZhciB6PXkuZmluZERpbWVuc2lvbkJ5TmFtZShBLnJlZmVyZW50aWFsQ29uc3RyYWludC5kZXBlbmRlbnQucHJvcGVydHlSZWZbMF0ubmFtZSk7aWYoej09bnVsbCljb250aW51ZTt2YXIgQj10aGlzLl9vRW50aXR5VHlwZU5hbWVUb0VudGl0eVNldE1hcFtEXTt6LnNldE1lbWJlcnNFbnRpdHlTZXQoQil9fX19LG9VSTVPRGF0YU1vZGVsQW5ub3RhdGFibGVPYmplY3Q6e29iamVjdE5hbWU6InNjaGVtYSIsa2V5UHJvcE5hbWU6Im5hbWVzcGFjZSIsZXh0ZW5zaW9uczp0cnVlLGFTdWJPYmplY3Q6W3tvYmplY3ROYW1lOiJlbnRpdHlUeXBlIixrZXlQcm9wTmFtZToibmFtZSIsZXh0ZW5zaW9uczp0cnVlLGFTdWJPYmplY3Q6W3tvYmplY3ROYW1lOiJwcm9wZXJ0eSIsa2V5UHJvcE5hbWU6Im5hbWUiLGFTdWJPYmplY3Q6W10sZXh0ZW5zaW9uczp0cnVlfV19LHtvYmplY3ROYW1lOiJlbnRpdHlDb250YWluZXIiLGtleVByb3BOYW1lOiJuYW1lIixleHRlbnNpb25zOmZhbHNlLGFTdWJPYmplY3Q6W3tvYmplY3ROYW1lOiJlbnRpdHlTZXQiLGtleVByb3BOYW1lOiJuYW1lIixleHRlbnNpb25zOnRydWUsYVN1Yk9iamVjdDpbXX1dfV19LG1lcmdlVjJBbm5vdGF0aW9uczpmdW5jdGlvbihhKXt2YXIgQT1udWxsO3RyeXtBPUpTT04ucGFyc2UoYSl9Y2F0Y2goZSl7cmV0dXJufXZhciBtO3RyeXttPXRoaXMuX29Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKS5kYXRhU2VydmljZXN9Y2F0Y2goZSl7cmV0dXJufWZvcih2YXIgcCBpbiBBKXtpZighKHRoaXMub1VJNU9EYXRhTW9kZWxBbm5vdGF0YWJsZU9iamVjdC5vYmplY3ROYW1lPT1wKSljb250aW51ZTtpZighKEFbcF1pbnN0YW5jZW9mIEFycmF5KSl7Y29udGludWV9dGhpcy5tZXJnZVYyQW5ub3RhdGlvbkxldmVsKG1bdGhpcy5vVUk1T0RhdGFNb2RlbEFubm90YXRhYmxlT2JqZWN0Lm9iamVjdE5hbWVdLEFbdGhpcy5vVUk1T0RhdGFNb2RlbEFubm90YXRhYmxlT2JqZWN0Lm9iamVjdE5hbWVdLHRoaXMub1VJNU9EYXRhTW9kZWxBbm5vdGF0YWJsZU9iamVjdCk7YnJlYWt9cmV0dXJufSxtZXJnZVYyQW5ub3RhdGlvbkxldmVsOmZ1bmN0aW9uKE0sYSx1KXtmb3IodmFyIGk9LTEsQTtBPWFbKytpXTspe2Zvcih2YXIgaj0tMSxiO2I9TVsrK2pdOyl7aWYoIShBW3Uua2V5UHJvcE5hbWVdPT1iW3Uua2V5UHJvcE5hbWVdKSljb250aW51ZTtpZihBWyJleHRlbnNpb25zIl0hPXVuZGVmaW5lZCl7aWYoYlsiZXh0ZW5zaW9ucyJdPT11bmRlZmluZWQpYlsiZXh0ZW5zaW9ucyJdPW5ldyBBcnJheSgpO2Zvcih2YXIgbD0tMSxjO2M9QVsiZXh0ZW5zaW9ucyJdWysrbF07KXt2YXIgZj1mYWxzZTtmb3IodmFyIG09LTEsZDtkPWJbImV4dGVuc2lvbnMiXVsrK21dOyl7aWYoYy5uYW1lPT1kLm5hbWUmJmMubmFtZXNwYWNlPT1kLm5hbWVzcGFjZSl7ZC52YWx1ZT1jLnZhbHVlO2Y9dHJ1ZTticmVha319aWYoIWYpYlsiZXh0ZW5zaW9ucyJdLnB1c2goYyl9fWZvcih2YXIgaz0tMSxVO1U9dS5hU3ViT2JqZWN0Wysra107KXtmb3IodmFyIHAgaW4gQSl7aWYoIShVLm9iamVjdE5hbWU9PXApKWNvbnRpbnVlO2lmKCEoQVtVLm9iamVjdE5hbWVdaW5zdGFuY2VvZiBBcnJheSkpY29udGludWU7aWYoKGJbVS5vYmplY3ROYW1lXT09dW5kZWZpbmVkKXx8KCEoYltVLm9iamVjdE5hbWVdaW5zdGFuY2VvZiBBcnJheSkpKWNvbnRpbnVlO3RoaXMubWVyZ2VWMkFubm90YXRpb25MZXZlbChiW1Uub2JqZWN0TmFtZV0sQVtVLm9iamVjdE5hbWVdLFUpO2JyZWFrfX19fXJldHVybn0sZmluZFF1ZXJ5UmVzdWx0QnlOYW1lOmZ1bmN0aW9uKG4pe3ZhciBRPXRoaXMuX29RdWVyeVJlc3VsdFNldFtuXTtpZighUSYmdGhpcy5fb0RlZmF1bHRFbnRpdHlDb250YWluZXIpe3ZhciBzPXRoaXMuX29EZWZhdWx0RW50aXR5Q29udGFpbmVyLm5hbWUrIi4iK247UT10aGlzLl9vUXVlcnlSZXN1bHRTZXRbc119cmV0dXJuIFF9LGdldEFsbFF1ZXJ5UmVzdWx0TmFtZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9hUXVlcnlSZXN1bHROYW1lcylyZXR1cm4gdGhpcy5fYVF1ZXJ5UmVzdWx0TmFtZXM7dGhpcy5fYVF1ZXJ5UmVzdWx0TmFtZXM9bmV3IEFycmF5KDApO2Zvcih2YXIgbiBpbiB0aGlzLl9vUXVlcnlSZXN1bHRTZXQpdGhpcy5fYVF1ZXJ5UmVzdWx0TmFtZXMucHVzaCh0aGlzLl9vUXVlcnlSZXN1bHRTZXRbbl0uZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5fYVF1ZXJ5UmVzdWx0TmFtZXN9LGdldEFsbFF1ZXJ5UmVzdWx0czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUXVlcnlSZXN1bHRTZXR9LGdldE9EYXRhTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01vZGVsfSxfZ2V0RW50aXR5U2V0c09mVHlwZTpmdW5jdGlvbihzLFEpe3ZhciBlPVtdO2Zvcih2YXIgaT0tMSxFO0U9cy5lbnRpdHlDb250YWluZXJbKytpXTspe2Zvcih2YXIgaj0tMSxhO2E9RS5lbnRpdHlTZXRbKytqXTspe2lmKGEuZW50aXR5VHlwZT09USllLnB1c2goW0UsYV0pfX1yZXR1cm4gZX0sX21QYXJhbWV0ZXI6bnVsbCxfb01vZGVsOm51bGwsX29EZWZhdWx0RW50aXR5Q29udGFpbmVyOm51bGwsX2FRdWVyeVJlc3VsdE5hbWVzOm51bGwsX29RdWVyeVJlc3VsdFNldDpudWxsLF9vUGFyYW1ldGVyaXphdGlvblNldDpudWxsLF9vRW50aXR5VHlwZVNldDpudWxsLF9vRW50aXR5U2V0U2V0Om51bGwsX29FbnRpdHlUeXBlTmFtZVRvRW50aXR5U2V0TWFwOm51bGwsX29BY3RpdmF0ZWRXb3JrYXJvdW5kczpudWxsfTtvLlF1ZXJ5UmVzdWx0PWZ1bmN0aW9uKG0sZSxFLHApe3RoaXMuX2luaXQobSxlLEUscCl9O28uUXVlcnlSZXN1bHQucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihtLGUsRSxwLGEpe3RoaXMuX29Nb2RlbD1tO3RoaXMuX29FbnRpdHlUeXBlPWU7dGhpcy5fb0VudGl0eVNldD1FO3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uPXA7dGhpcy5fb0RpbWVuc2lvblNldD1uZXcgT2JqZWN0KCk7dGhpcy5fb01lYXN1cmVTZXQ9bmV3IE9iamVjdCgpO3ZhciBQPWUuZ2V0VHlwZURlc2NyaXB0aW9uKCkucHJvcGVydHk7dmFyIEE9e307Zm9yKHZhciBpPS0xLGI7Yj1QWysraV07KXtpZihiLmV4dGVuc2lvbnM9PXVuZGVmaW5lZCljb250aW51ZTtmb3IodmFyIGo9LTEsYztjPWIuZXh0ZW5zaW9uc1srK2pdOyl7aWYoIWMubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFKWNvbnRpbnVlO3N3aXRjaChjLm5hbWUpe2Nhc2UiYWdncmVnYXRpb24tcm9sZSI6c3dpdGNoKGMudmFsdWUpe2Nhc2UiZGltZW5zaW9uIjp2YXIgZD1uZXcgby5EaW1lbnNpb24odGhpcyxiKTt0aGlzLl9vRGltZW5zaW9uU2V0W2QuZ2V0TmFtZSgpXT1kO2JyZWFrO2Nhc2UibWVhc3VyZSI6dmFyIE09bmV3IG8uTWVhc3VyZSh0aGlzLGIpO3RoaXMuX29NZWFzdXJlU2V0W00uZ2V0TmFtZSgpXT1NO2JyZWFrO2Nhc2UidG90YWxlZC1wcm9wZXJ0aWVzLWxpc3QiOnRoaXMuX29Ub3RhbGVkUHJvcGVydHlMaXN0UHJvcGVydHk9YjticmVha31icmVhaztjYXNlImF0dHJpYnV0ZS1mb3IiOnZhciBEPW5ldyBvLkRpbWVuc2lvbkF0dHJpYnV0ZSh0aGlzLGIpO0FbRC5nZXRLZXlQcm9wZXJ0eSgpXT1EO2JyZWFrfX19Zm9yKHZhciBzIGluIEEpe3ZhciBEPUFbc107RC5nZXREaW1lbnNpb24oKS5hZGRBdHRyaWJ1dGUoRCl9aWYobS5fb0FjdGl2YXRlZFdvcmthcm91bmRzLklkZW50aWZ5VGV4dFByb3BlcnRpZXNCeU5hbWUpe3ZhciBmPW5ldyBBcnJheSgpO2Zvcih2YXIgZyBpbiB0aGlzLl9vRGltZW5zaW9uU2V0KXt2YXIgZD10aGlzLl9vRGltZW5zaW9uU2V0W2ddO2lmKCFkLmdldFRleHRQcm9wZXJ0eSgpKXt2YXIgdD1udWxsO3Q9ZS5maW5kUHJvcGVydHlCeU5hbWUoZysiTmFtZSIpO2lmKCF0KXQ9ZS5maW5kUHJvcGVydHlCeU5hbWUoZysiVGV4dCIpO2lmKCF0KXQ9ZS5maW5kUHJvcGVydHlCeU5hbWUoZysiRGVzYyIpO2lmKCF0KXQ9ZS5maW5kUHJvcGVydHlCeU5hbWUoZysiRGVzY3JpcHRpb24iKTtpZih0KXtkLnNldFRleHRQcm9wZXJ0eSh0KTtmLnB1c2godC5uYW1lKX19fWZvcih2YXIgaT0tMSxoO2g9ZlsrK2ldOyl7ZGVsZXRlIHRoaXMuX29EaW1lbnNpb25TZXRbaF19fX0sZ2V0TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEVudGl0eVNldCgpLmdldFFOYW1lKCl9LGdldFBhcmFtZXRlcml6YXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1BhcmFtZXRlcml6YXRpb259LGdldEFsbERpbWVuc2lvbk5hbWVzOmZ1bmN0aW9uKCl7aWYodGhpcy5fYURpbWVuc2lvbk5hbWVzKXJldHVybiB0aGlzLl9hRGltZW5zaW9uTmFtZXM7dGhpcy5fYURpbWVuc2lvbk5hbWVzPVtdO2Zvcih2YXIgbiBpbiB0aGlzLl9vRGltZW5zaW9uU2V0KXRoaXMuX2FEaW1lbnNpb25OYW1lcy5wdXNoKHRoaXMuX29EaW1lbnNpb25TZXRbbl0uZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5fYURpbWVuc2lvbk5hbWVzfSxnZXRBbGxEaW1lbnNpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29EaW1lbnNpb25TZXR9LGdldEFsbE1lYXN1cmVOYW1lczpmdW5jdGlvbigpe2lmKHRoaXMuX2FNZWFzdXJlTmFtZXMpcmV0dXJuIHRoaXMuX2FNZWFzdXJlTmFtZXM7dGhpcy5fYU1lYXN1cmVOYW1lcz1bXTtmb3IodmFyIG4gaW4gdGhpcy5fb01lYXN1cmVTZXQpdGhpcy5fYU1lYXN1cmVOYW1lcy5wdXNoKHRoaXMuX29NZWFzdXJlU2V0W25dLmdldE5hbWUoKSk7cmV0dXJuIHRoaXMuX2FNZWFzdXJlTmFtZXN9LGdldEFsbE1lYXN1cmVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29NZWFzdXJlU2V0fSxmaW5kRGltZW5zaW9uQnlOYW1lOmZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLl9vRGltZW5zaW9uU2V0W25dfSxmaW5kRGltZW5zaW9uQnlQcm9wZXJ0eU5hbWU6ZnVuY3Rpb24obil7aWYodGhpcy5fb0RpbWVuc2lvblNldFtuXSlyZXR1cm4gdGhpcy5fb0RpbWVuc2lvblNldFtuXTtmb3IodmFyIGQgaW4gdGhpcy5fb0RpbWVuc2lvblNldCl7dmFyIEQ9dGhpcy5fb0RpbWVuc2lvblNldFtkXTt2YXIgdD1ELmdldFRleHRQcm9wZXJ0eSgpO2lmKHQmJnQubmFtZT09bilyZXR1cm4gRDtpZihELmZpbmRBdHRyaWJ1dGVCeU5hbWUobikpcmV0dXJuIER9cmV0dXJuIG51bGx9LGdldFRvdGFsZWRQcm9wZXJ0aWVzTGlzdFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Ub3RhbGVkUHJvcGVydHlMaXN0UHJvcGVydHl9LGZpbmRNZWFzdXJlQnlOYW1lOmZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLl9vTWVhc3VyZVNldFtuXX0sZmluZE1lYXN1cmVCeVByb3BlcnR5TmFtZTpmdW5jdGlvbihuKXtpZih0aGlzLl9vTWVhc3VyZVNldFtuXSlyZXR1cm4gdGhpcy5fb01lYXN1cmVTZXRbbl07Zm9yKHZhciBtIGluIHRoaXMuX29NZWFzdXJlU2V0KXt2YXIgTT10aGlzLl9vTWVhc3VyZVNldFttXTt2YXIgZj1NLmdldEZvcm1hdHRlZFZhbHVlUHJvcGVydHkoKTtpZihmJiZmLm5hbWU9PW4pcmV0dXJuIE19cmV0dXJuIG51bGx9LGdldE1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Nb2RlbH0sZ2V0RW50aXR5VHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRW50aXR5VHlwZX0sZ2V0RW50aXR5U2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlTZXR9LF9vTW9kZWw6bnVsbCxfb0VudGl0eVR5cGU6bnVsbCxfb0VudGl0eVNldDpudWxsLF9vUGFyYW1ldGVyaXphdGlvbjpudWxsLF9hRGltZW5zaW9uTmFtZXM6bnVsbCxfb0RpbWVuc2lvblNldDpudWxsLF9hTWVhc3VyZU5hbWVzOm51bGwsX29NZWFzdXJlU2V0Om51bGwsX29Ub3RhbGVkUHJvcGVydHlMaXN0UHJvcGVydHk6bnVsbH07by5QYXJhbWV0ZXJpemF0aW9uPWZ1bmN0aW9uKGUsRSl7dGhpcy5faW5pdChlLEUpfTtvLlBhcmFtZXRlcml6YXRpb24ucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihlLEUpe3RoaXMuX29FbnRpdHlUeXBlPWU7dGhpcy5fb0VudGl0eVNldD1FO3RoaXMuX29QYXJhbWV0ZXJTZXQ9bmV3IE9iamVjdCgpO3ZhciBwPWUuZ2V0VHlwZURlc2NyaXB0aW9uKCkucHJvcGVydHk7Zm9yKHZhciBpPS0xLFA7UD1wWysraV07KXtpZihQLmV4dGVuc2lvbnM9PXVuZGVmaW5lZCljb250aW51ZTtmb3IodmFyIGo9LTEsYTthPVAuZXh0ZW5zaW9uc1srK2pdOyl7aWYoIWEubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFKWNvbnRpbnVlO3N3aXRjaChhLm5hbWUpe2Nhc2UicGFyYW1ldGVyIjp2YXIgYj1uZXcgby5QYXJhbWV0ZXIodGhpcyxQKTt0aGlzLl9vUGFyYW1ldGVyU2V0W2IuZ2V0TmFtZSgpXT1iO2JyZWFrfX19fSxzZXRUYXJnZXRRdWVyeVJlc3VsdDpmdW5jdGlvbihRLGEpe3RoaXMuX29RdWVyeVJlc3VsdD1RO3ZhciBzPXRoaXMuX29FbnRpdHlUeXBlLmdldFNjaGVtYSgpLm5hbWVzcGFjZSsiLiIrYS5uYW1lO3ZhciBuPXRoaXMuX29FbnRpdHlUeXBlLmdldFR5cGVEZXNjcmlwdGlvbigpLm5hdmlnYXRpb25Qcm9wZXJ0eTtpZighbil0aHJvdyJJbnZhbGlkIGNvbnN1bXB0aW9uIG1vZGVsOiBQYXJhbWV0ZXJzIGVudGl0eSB0eXBlIGxhY2tzIG5hdmlnYXRpb24gcHJvcGVydHkgZm9yIGFzc29jaWF0aW9uIHRvIHF1ZXJ5IHJlc3VsdCBlbnRpdHkgdHlwZSI7Zm9yKHZhciBpPS0xLE47Tj1uWysraV07KXtpZihOLnJlbGF0aW9uc2hpcD09cyl0aGlzLl9vTmF2UHJvcFRvUXVlcnlSZXN1bHQ9Ti5uYW1lfWlmKCF0aGlzLl9vTmF2UHJvcFRvUXVlcnlSZXN1bHQpdGhyb3ciSW52YWxpZCBjb25zdW1wdGlvbiBtb2RlbDogUGFyYW1ldGVycyBlbnRpdHkgdHlwZSBsYWNrcyBuYXZpZ2F0aW9uIHByb3BlcnR5IGZvciBhc3NvY2lhdGlvbiB0byBxdWVyeSByZXN1bHQgZW50aXR5IHR5cGUifSxnZXRUYXJnZXRRdWVyeVJlc3VsdDpmdW5jdGlvbigpe2lmKCF0aGlzLl9vUXVlcnlSZXN1bHQpdGhyb3ciTm8gdGFyZ2V0IHF1ZXJ5IHJlc3VsdCBzZXQiO3JldHVybiB0aGlzLl9vUXVlcnlSZXN1bHR9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRFbnRpdHlTZXQoKS5nZXRRTmFtZSgpfSxnZXRBbGxQYXJhbWV0ZXJOYW1lczpmdW5jdGlvbigpe2lmKHRoaXMuX2FQYXJhbWV0ZXJOYW1lcylyZXR1cm4gdGhpcy5fYVBhcmFtZXRlck5hbWVzO3RoaXMuX2FQYXJhbWV0ZXJOYW1lcz1bXTtmb3IodmFyIG4gaW4gdGhpcy5fb1BhcmFtZXRlclNldCl0aGlzLl9hUGFyYW1ldGVyTmFtZXMucHVzaCh0aGlzLl9vUGFyYW1ldGVyU2V0W25dLmdldE5hbWUoKSk7cmV0dXJuIHRoaXMuX2FQYXJhbWV0ZXJOYW1lc30sZ2V0QWxsUGFyYW1ldGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUGFyYW1ldGVyU2V0fSxmaW5kUGFyYW1ldGVyQnlOYW1lOmZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLl9vUGFyYW1ldGVyU2V0W25dfSxnZXROYXZpZ2F0aW9uUHJvcGVydHlUb1F1ZXJ5UmVzdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29OYXZQcm9wVG9RdWVyeVJlc3VsdH0sZ2V0RW50aXR5VHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRW50aXR5VHlwZX0sZ2V0RW50aXR5U2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlTZXR9LF9vRW50aXR5VHlwZTpudWxsLF9vRW50aXR5U2V0Om51bGwsX29RdWVyeVJlc3VsdDpudWxsLF9vTmF2UHJvcFRvUXVlcnlSZXN1bHQ6bnVsbCxfYVBhcmFtZXRlck5hbWVzOm51bGwsX29QYXJhbWV0ZXJTZXQ6bnVsbH07by5QYXJhbWV0ZXI9ZnVuY3Rpb24ocCxQKXt0aGlzLl9pbml0KHAsUCl9O28uUGFyYW1ldGVyLnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24ocCxQKXt0aGlzLl9vUGFyYW1ldGVyaXphdGlvbj1wO3RoaXMuX29Qcm9wZXJ0eT1QO3ZhciBlPXAuZ2V0RW50aXR5VHlwZSgpO2lmKFAuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXtmb3IodmFyIGk9LTEsRTtFPVAuZXh0ZW5zaW9uc1srK2ldOyl7aWYoIUUubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFKWNvbnRpbnVlO3N3aXRjaChFLm5hbWUpe2Nhc2UicGFyYW1ldGVyIjpzd2l0Y2goRS52YWx1ZSl7Y2FzZSJtYW5kYXRvcnkiOnRoaXMuX2JSZXF1aXJlZD10cnVlO2JyZWFrO2Nhc2Uib3B0aW9uYWwiOnRoaXMuX2JSZXF1aXJlZD1mYWxzZTticmVhaztkZWZhdWx0OnRocm93IkludmFsaWQgYW5ub3RhdGlvbiB2YWx1ZSBmb3IgcGFyYW1ldGVyIHByb3BlcnR5In1icmVhaztjYXNlImxhYmVsIjp0aGlzLl9zTGFiZWxUZXh0PUUudmFsdWU7YnJlYWs7Y2FzZSJ0ZXh0Ijp0aGlzLl9vVGV4dFByb3BlcnR5PWUuZmluZFByb3BlcnR5QnlOYW1lKEUudmFsdWUpO2JyZWFrO2Nhc2UidXBwZXItYm91bmRhcnkiOnRoaXMuX2JJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyPXRydWU7dGhpcy5fb1VwcGVySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlclByb3BlcnR5PWUuZmluZFByb3BlcnR5QnlOYW1lKEUudmFsdWUpO2JyZWFrO2Nhc2UibG93ZXItYm91bmRhcnkiOnRoaXMuX2JJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyPXRydWU7dGhpcy5fb0xvd2VySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlclByb3BlcnR5PWUuZmluZFByb3BlcnR5QnlOYW1lKEUudmFsdWUpO2JyZWFrfX19aWYoIXRoaXMuX3NMYWJlbFRleHQpdGhpcy5fc0xhYmVsVGV4dD0iIn0sc2V0VmFsdWVTZXRFbnRpdHk6ZnVuY3Rpb24oZSxFKXt0aGlzLl9vVmFsdWVTZXRFbnRpdHlUeXBlPWU7dGhpcy5fb1ZhbHVlU2V0RW50aXR5U2V0PUV9LGdldFRleHRQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vVGV4dFByb3BlcnR5fSxnZXRMYWJlbFRleHQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fc0xhYmVsVGV4dCYmdGhpcy5fb1BhcmFtZXRlcml6YXRpb24uX29RdWVyeVJlc3VsdC5fb01vZGVsLl9vQWN0aXZhdGVkV29ya2Fyb3VuZHMuQ3JlYXRlTGFiZWxzRnJvbVRlY2huaWNhbE5hbWVzKXRoaXMuX3NMYWJlbFRleHQ9by5oZWxwZXIudG9rZW5pemVOYW1ldG9MYWJlbFRleHQodGhpcy5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9zTGFiZWxUZXh0fSxpc09wdGlvbmFsOmZ1bmN0aW9uKCl7cmV0dXJuKCF0aGlzLl9iUmVxdWlyZWQpfSxpc0ludGVydmFsQm91bmRhcnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYkludGVydmFsQm91bmRhcnlQYXJhbWV0ZXJ9LGlzTG93ZXJJbnRlcnZhbEJvdW5kYXJ5OmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuX29VcHBlckludGVydmFsQm91bmRhcnlQYXJhbWV0ZXJQcm9wZXJ0eT90cnVlOmZhbHNlKX0sZ2V0UGVlckludGVydmFsQm91bmRhcnlQYXJhbWV0ZXI6ZnVuY3Rpb24oKXt2YXIgcD1udWxsO2lmKHRoaXMuX29Mb3dlckludGVydmFsQm91bmRhcnlQYXJhbWV0ZXJQcm9wZXJ0eSlwPXRoaXMuX29Mb3dlckludGVydmFsQm91bmRhcnlQYXJhbWV0ZXJQcm9wZXJ0eS5uYW1lO2Vsc2UgcD10aGlzLl9vVXBwZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyUHJvcGVydHkubmFtZTtpZighcCl0aHJvdyJQYXJhbWV0ZXIgaXMgbm90IGFuIGludGVydmFsIGJvdW5kYXJ5IjtyZXR1cm4gdGhpcy5fb1BhcmFtZXRlcml6YXRpb24uZmluZFBhcmFtZXRlckJ5TmFtZShwKX0saXNWYWx1ZVNldEF2YWlsYWJsZTpmdW5jdGlvbigpe3JldHVybih0aGlzLl9vVmFsdWVTZXRFbnRpdHlUeXBlP3RydWU6ZmFsc2UpfSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eS5uYW1lfSxnZXRQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUHJvcGVydHl9LGdldENvbnRhaW5pbmdQYXJhbWV0ZXJpemF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29QYXJhbWV0ZXJpemF0aW9ufSxnZXRVUklUb1ZhbHVlRW50aXR5U2V0OmZ1bmN0aW9uKHMpe3ZhciB1PW51bGw7dT0ocz9zOiIiKSsiLyIrdGhpcy5fb1ZhbHVlU2V0RW50aXR5U2V0LmdldFFOYW1lKCk7cmV0dXJuIHV9LF9vUGFyYW1ldGVyaXphdGlvbjpudWxsLF9vUHJvcGVydHk6bnVsbCxfc0xhYmVsVGV4dDpudWxsLF9vVGV4dFByb3BlcnR5Om51bGwsX2JSZXF1aXJlZDpmYWxzZSxfYkludGVydmFsQm91bmRhcnlQYXJhbWV0ZXI6ZmFsc2UsX29Mb3dlckludGVydmFsQm91bmRhcnlQYXJhbWV0ZXJQcm9wZXJ0eTpudWxsLF9vVXBwZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyUHJvcGVydHk6bnVsbCxfb1ZhbHVlU2V0RW50aXR5VHlwZTpudWxsLF9vVmFsdWVTZXRFbnRpdHlTZXQ6bnVsbH07by5EaW1lbnNpb249ZnVuY3Rpb24oUSxwKXt0aGlzLl9pbml0KFEscCl9O28uRGltZW5zaW9uLnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24oUSxwKXt0aGlzLl9vUXVlcnlSZXN1bHQ9UTt0aGlzLl9vUHJvcGVydHk9cDt0aGlzLl9vQXR0cmlidXRlU2V0PW5ldyBPYmplY3QoKX0sc2V0TWVtYmVyc0VudGl0eVNldDpmdW5jdGlvbihlKXt0aGlzLl9vTWVtYmVyc0VudGl0eVNldD1lfSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eS5uYW1lfSxnZXRLZXlQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUHJvcGVydHl9LGdldFRleHRQcm9wZXJ0eTpmdW5jdGlvbigpe2lmKCF0aGlzLl9vVGV4dFByb3BlcnR5KXRoaXMuX29UZXh0UHJvcGVydHk9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEVudGl0eVR5cGUoKS5nZXRUZXh0UHJvcGVydHlPZlByb3BlcnR5KHRoaXMuZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5fb1RleHRQcm9wZXJ0eX0sc2V0VGV4dFByb3BlcnR5OmZ1bmN0aW9uKHQpe3RoaXMuX29UZXh0UHJvcGVydHk9dH0sZ2V0TGFiZWxUZXh0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3NMYWJlbFRleHQpdGhpcy5fc0xhYmVsVGV4dD10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpLmdldExhYmVsT2ZQcm9wZXJ0eSh0aGlzLmdldE5hbWUoKSk7aWYoIXRoaXMuX3NMYWJlbFRleHQmJnRoaXMuX29RdWVyeVJlc3VsdC5fb01vZGVsLl9vQWN0aXZhdGVkV29ya2Fyb3VuZHMuQ3JlYXRlTGFiZWxzRnJvbVRlY2huaWNhbE5hbWVzKXRoaXMuX3NMYWJlbFRleHQ9by5oZWxwZXIudG9rZW5pemVOYW1ldG9MYWJlbFRleHQodGhpcy5nZXROYW1lKCkpO3JldHVybih0aGlzLl9zTGFiZWxUZXh0PT1udWxsPyIiOnRoaXMuX3NMYWJlbFRleHQpfSxnZXRTdXBlck9yZGluYXRlRGltZW5zaW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3NTdXBlck9yZGluYXRlRGltZW5zaW9uKXt2YXIgcz10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpLmdldFN1cGVyT3JkaW5hdGVQcm9wZXJ0eU9mUHJvcGVydHkodGhpcy5nZXROYW1lKCkpLm5hbWU7dGhpcy5fc1N1cGVyT3JkaW5hdGVEaW1lbnNpb249dGhpcy5fb1F1ZXJ5UmVzdWx0LmZpbmREaW1lbnNpb25CeU5hbWUocyl9cmV0dXJuIHRoaXMuX3NTdXBlck9yZGluYXRlRGltZW5zaW9ufSxnZXRIaWVyYXJjaHk6ZnVuY3Rpb24oKXtpZighdGhpcy5fb0hpZXJhcmNoeSl0aGlzLl9vSGllcmFyY2h5PXRoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0SGllcmFyY2h5KHRoaXMuX29Qcm9wZXJ0eS5uYW1lKTtyZXR1cm4gdGhpcy5fb0hpZXJhcmNoeX0sZ2V0QWxsQXR0cmlidXRlTmFtZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9hQXR0cmlidXRlTmFtZXMpcmV0dXJuIHRoaXMuX2FBdHRyaWJ1dGVOYW1lczt0aGlzLl9hQXR0cmlidXRlTmFtZXM9W107Zm9yKHZhciBuIGluIHRoaXMuX29BdHRyaWJ1dGVTZXQpdGhpcy5fYUF0dHJpYnV0ZU5hbWVzLnB1c2godGhpcy5fb0F0dHJpYnV0ZVNldFtuXS5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9hQXR0cmlidXRlTmFtZXN9LGdldEFsbEF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0F0dHJpYnV0ZVNldH0sZmluZEF0dHJpYnV0ZUJ5TmFtZTpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5fb0F0dHJpYnV0ZVNldFtuXX0sYWRkQXR0cmlidXRlOmZ1bmN0aW9uKGQpe3RoaXMuX29BdHRyaWJ1dGVTZXRbZC5nZXROYW1lKCldPWR9LGdldENvbnRhaW5pbmdRdWVyeVJlc3VsdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUXVlcnlSZXN1bHR9LGhhc01hc3RlckRhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01lbWJlcnNFbnRpdHlTZXQhPW51bGw/dHJ1ZTpmYWxzZX0sZ2V0TWFzdGVyRGF0YUVudGl0eVNldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTWVtYmVyc0VudGl0eVNldH0sX29RdWVyeVJlc3VsdDpudWxsLF9vUHJvcGVydHk6bnVsbCxfb1RleHRQcm9wZXJ0eTpudWxsLF9zTGFiZWxUZXh0Om51bGwsX3NTdXBlck9yZGluYXRlRGltZW5zaW9uOm51bGwsX2FBdHRyaWJ1dGVOYW1lczpudWxsLF9vQXR0cmlidXRlU2V0Om51bGwsX29NZW1iZXJzRW50aXR5U2V0Om51bGwsX29IaWVyYXJjaHk6bnVsbH07by5EaW1lbnNpb25BdHRyaWJ1dGU9ZnVuY3Rpb24oUSxwKXt0aGlzLl9pbml0KFEscCl9O28uRGltZW5zaW9uQXR0cmlidXRlLnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24oUSxwKXt0aGlzLl9vUXVlcnlSZXN1bHQ9UTt0aGlzLl9vUHJvcGVydHk9cDtpZihwLmV4dGVuc2lvbnMhPXVuZGVmaW5lZCl7Zm9yKHZhciBpPS0xLGU7ZT1wLmV4dGVuc2lvbnNbKytpXTspe2lmKCFlLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSljb250aW51ZTtzd2l0Y2goZS5uYW1lKXtjYXNlImF0dHJpYnV0ZS1mb3IiOnRoaXMuX3NEaW1lbnNpb25OYW1lPWUudmFsdWU7YnJlYWs7Y2FzZSJsYWJlbCI6dGhpcy5fc0xhYmVsVGV4dD1lLnZhbHVlO2JyZWFrO2Nhc2UidGV4dCI6dGhpcy5fb1RleHRQcm9wZXJ0eT1RLmdldEVudGl0eVR5cGUoKS5maW5kUHJvcGVydHlCeU5hbWUoZS52YWx1ZSk7YnJlYWt9fX19LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5Lm5hbWV9LGdldEtleVByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eX0sZ2V0VGV4dFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29UZXh0UHJvcGVydHl9LGdldExhYmVsVGV4dDpmdW5jdGlvbigpe2lmKCF0aGlzLl9zTGFiZWxUZXh0JiZ0aGlzLl9vUXVlcnlSZXN1bHQuX29Nb2RlbC5fb0FjdGl2YXRlZFdvcmthcm91bmRzLkNyZWF0ZUxhYmVsc0Zyb21UZWNobmljYWxOYW1lcyl0aGlzLl9zTGFiZWxUZXh0PW8uaGVscGVyLnRva2VuaXplTmFtZXRvTGFiZWxUZXh0KHRoaXMuZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5fc0xhYmVsVGV4dH0sZ2V0RGltZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29RdWVyeVJlc3VsdC5maW5kRGltZW5zaW9uQnlOYW1lKHRoaXMuX3NEaW1lbnNpb25OYW1lKX0sX29RdWVyeVJlc3VsdDpudWxsLF9vUHJvcGVydHk6bnVsbCxfb1RleHRQcm9wZXJ0eTpudWxsLF9zTGFiZWxUZXh0Om51bGwsX3NEaW1lbnNpb25OYW1lOm51bGx9O28uTWVhc3VyZT1mdW5jdGlvbihRLHApe3RoaXMuX2luaXQoUSxwKX07by5NZWFzdXJlLnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24oUSxwKXt0aGlzLl9vUXVlcnlSZXN1bHQ9UTt0aGlzLl9vUHJvcGVydHk9cDtpZihwLmV4dGVuc2lvbnMhPXVuZGVmaW5lZCl7Zm9yKHZhciBpPS0xLGU7ZT1wLmV4dGVuc2lvbnNbKytpXTspe2lmKCFlLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSljb250aW51ZTtzd2l0Y2goZS5uYW1lKXtjYXNlImxhYmVsIjp0aGlzLl9zTGFiZWxUZXh0PWUudmFsdWU7YnJlYWs7Y2FzZSJ0ZXh0Ijp0aGlzLl9vVGV4dFByb3BlcnR5PVEuZ2V0RW50aXR5VHlwZSgpLmZpbmRQcm9wZXJ0eUJ5TmFtZShlLnZhbHVlKTticmVhaztjYXNlInVuaXQiOnRoaXMuX29Vbml0UHJvcGVydHk9US5nZXRFbnRpdHlUeXBlKCkuZmluZFByb3BlcnR5QnlOYW1lKGUudmFsdWUpO2JyZWFrfX19aWYoIXRoaXMuX3NMYWJlbFRleHQpdGhpcy5fc0xhYmVsVGV4dD0iIn0sZ2V0TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUHJvcGVydHkubmFtZX0sZ2V0UmF3VmFsdWVQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUHJvcGVydHl9LGdldEZvcm1hdHRlZFZhbHVlUHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1RleHRQcm9wZXJ0eX0sZ2V0VW5pdFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Vbml0UHJvcGVydHl9LGdldExhYmVsVGV4dDpmdW5jdGlvbigpe2lmKCF0aGlzLl9zTGFiZWxUZXh0JiZ0aGlzLl9vUXVlcnlSZXN1bHQuX29Nb2RlbC5fb0FjdGl2YXRlZFdvcmthcm91bmRzLkNyZWF0ZUxhYmVsc0Zyb21UZWNobmljYWxOYW1lcyl0aGlzLl9zTGFiZWxUZXh0PW8uaGVscGVyLnRva2VuaXplTmFtZXRvTGFiZWxUZXh0KHRoaXMuZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5fc0xhYmVsVGV4dH0saXNVcGRhdGFibGU6ZnVuY3Rpb24oKXtpZih0aGlzLl9iSXNVcGRhdGFibGUhPW51bGwpcmV0dXJuIHRoaXMuX2JJc1VwZGF0YWJsZTt2YXIgdT10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0RW50aXR5U2V0KCkuZ2V0VXBkYXRhYmxlUHJvcGVydHlOYW1lU2V0KCk7cmV0dXJuKHVbdGhpcy5nZXROYW1lKCldIT11bmRlZmluZWQpfSxfb1F1ZXJ5UmVzdWx0Om51bGwsX29Qcm9wZXJ0eTpudWxsLF9vVGV4dFByb3BlcnR5Om51bGwsX3NMYWJlbFRleHQ6bnVsbCxfb1VuaXRQcm9wZXJ0eTpudWxsLF9iSXNVcGRhdGFibGU6bnVsbH07by5FbnRpdHlTZXQ9ZnVuY3Rpb24obSxzLGMsZSxFKXt0aGlzLl9pbml0KG0scyxjLGUsRSl9O28uRW50aXR5U2V0LnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24obSxzLGMsZSxFKXt0aGlzLl9vRW50aXR5VHlwZT1FO3RoaXMuX29FbnRpdHlTZXQ9ZTt0aGlzLl9vQ29udGFpbmVyPWM7dGhpcy5fb1NjaGVtYT1zO3RoaXMuX29Nb2RlbD1tO2lmKHMuZW50aXR5Q29udGFpbmVyLmxlbmd0aD4xKXRoaXMuX3NRTmFtZT1jLm5hbWUrIi4iK2UubmFtZTtlbHNlIHRoaXMuX3NRTmFtZT1lLm5hbWV9LGdldFFOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NRTmFtZX0sZ2V0U2V0RGVzY3JpcHRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0VudGl0eVNldH0sZ2V0RW50aXR5VHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRW50aXR5VHlwZX0sZ2V0U2NoZW1hOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29TY2hlbWF9LGdldE1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Nb2RlbH0sZ2V0VXBkYXRhYmxlUHJvcGVydHlOYW1lU2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fb1VwZGF0YWJsZVByb3BlcnR5TmFtZXMpcmV0dXJuIHRoaXMuX29VcGRhdGFibGVQcm9wZXJ0eU5hbWVzO3RoaXMuX29VcGRhdGFibGVQcm9wZXJ0eU5hbWVzPW5ldyBPYmplY3QoKTt2YXIgcz10cnVlO2lmKHRoaXMuX29FbnRpdHlTZXQuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXtmb3IodmFyIGo9LTEsZTtlPXRoaXMuX29FbnRpdHlTZXQuZXh0ZW5zaW9uc1srK2pdOyl7aWYoZS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UmJmUubmFtZT09InVwZGF0YWJsZSIpe2lmKGUudmFsdWU9PSJmYWxzZSIpe3M9ZmFsc2U7YnJlYWt9fX19aWYoIXMpe3JldHVybiB0aGlzLl9vVXBkYXRhYmxlUHJvcGVydHlOYW1lc312YXIgcD10aGlzLl9vRW50aXR5VHlwZS5nZXRUeXBlRGVzY3JpcHRpb24oKS5wcm9wZXJ0eTtmb3IodmFyIGk9LTEsUDtQPXBbKytpXTspe3ZhciBiPXRydWU7aWYoUC5leHRlbnNpb25zPT11bmRlZmluZWQpY29udGludWU7Zm9yKHZhciBqPS0xLGU7ZT1QLmV4dGVuc2lvbnNbKytqXTspe2lmKGUubmFtZXNwYWNlIT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFKWNvbnRpbnVlO2lmKGUubmFtZT09InVwZGF0YWJsZSIpe2lmKGUudmFsdWU9PSJmYWxzZSIpe2I9ZmFsc2U7YnJlYWt9fX1pZihiKXRoaXMuX29VcGRhdGFibGVQcm9wZXJ0eU5hbWVzW1AubmFtZV09dHJ1ZX1yZXR1cm4gdGhpcy5fb1VwZGF0YWJsZVByb3BlcnR5TmFtZXN9LF9vRW50aXR5VHlwZTpudWxsLF9vRW50aXR5U2V0Om51bGwsX29Db250YWluZXI6bnVsbCxfb1NjaGVtYTpudWxsLF9vTW9kZWw6bnVsbCxfc1FOYW1lOm51bGwsX29VcGRhdGFibGVQcm9wZXJ0eU5hbWVzOm51bGx9O28uRW50aXR5VHlwZT1mdW5jdGlvbihtLHMsZSl7dGhpcy5faW5pdChtLHMsZSl9O28uRW50aXR5VHlwZS5wcm9wZXJ0eUZpbHRlclJlc3RyaWN0aW9uPXtTSU5HTEVfVkFMVUU6InNpbmdsZS12YWx1ZSIsTVVMVElfVkFMVUU6Im11bHRpLXZhbHVlIixJTlRFUlZBTDoiaW50ZXJ2YWwifTtvLkVudGl0eVR5cGUucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihtLHMsZSl7dGhpcy5fb0VudGl0eVR5cGU9ZTt0aGlzLl9vU2NoZW1hPXM7dGhpcy5fb01vZGVsPW07dGhpcy5fYUtleVByb3BlcnRpZXM9W107dGhpcy5fb1Byb3BlcnR5U2V0PW5ldyBPYmplY3QoKTt0aGlzLl9hRmlsdGVyYWJsZVByb3BlcnR5TmFtZXM9W107dGhpcy5fYVNvcnRhYmxlUHJvcGVydHlOYW1lcz1bXTt0aGlzLl9hUmVxdWlyZWRGaWx0ZXJQcm9wZXJ0eU5hbWVzPVtdO3RoaXMuX29Qcm9wZXJ0eUZpbHRlclJlc3RyaWN0aW9uU2V0PW5ldyBPYmplY3QoKTt0aGlzLl9vUHJvcGVydHlIZWFkaW5nc1NldD17fTt0aGlzLl9vUHJvcGVydHlRdWlja0luZm9zU2V0PXt9O3RoaXMuX3NRTmFtZT1zLm5hbWVzcGFjZSsiLiIrZS5uYW1lO3ZhciByPXt9O3ZhciBSPW51bGw7Zm9yKHZhciBpPS0xLHA7cD1lLmtleS5wcm9wZXJ0eVJlZlsrK2ldOyl7dGhpcy5fYUtleVByb3BlcnRpZXMucHVzaChwLm5hbWUpfWZvcih2YXIgaT0tMSxQO1A9ZS5wcm9wZXJ0eVsrK2ldOyl7dGhpcy5fb1Byb3BlcnR5U2V0W1AubmFtZV09UDt0aGlzLl9hRmlsdGVyYWJsZVByb3BlcnR5TmFtZXMucHVzaChQLm5hbWUpO3RoaXMuX2FTb3J0YWJsZVByb3BlcnR5TmFtZXMucHVzaChQLm5hbWUpO2lmKFAuZXh0ZW5zaW9ucz09dW5kZWZpbmVkKWNvbnRpbnVlO2Zvcih2YXIgaj0tMSxFO0U9UC5leHRlbnNpb25zWysral07KXtpZighRS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7c3dpdGNoKEUubmFtZSl7Y2FzZSJmaWx0ZXJhYmxlIjppZihFLnZhbHVlPT0iZmFsc2UiKXRoaXMuX2FGaWx0ZXJhYmxlUHJvcGVydHlOYW1lcy5wb3AoUC5uYW1lKTticmVhaztjYXNlInNvcnRhYmxlIjppZihFLnZhbHVlPT0iZmFsc2UiKXRoaXMuX2FTb3J0YWJsZVByb3BlcnR5TmFtZXMucG9wKFAubmFtZSk7YnJlYWs7Y2FzZSJyZXF1aXJlZC1pbi1maWx0ZXIiOmlmKEUudmFsdWU9PSJ0cnVlIil0aGlzLl9hUmVxdWlyZWRGaWx0ZXJQcm9wZXJ0eU5hbWVzLnB1c2goUC5uYW1lKTticmVhaztjYXNlImZpbHRlci1yZXN0cmljdGlvbiI6aWYoRS52YWx1ZT09by5FbnRpdHlUeXBlLnByb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb24uU0lOR0xFX1ZBTFVFfHxFLnZhbHVlPT1vLkVudGl0eVR5cGUucHJvcGVydHlGaWx0ZXJSZXN0cmljdGlvbi5NVUxUSV9WQUxVRXx8RS52YWx1ZT09by5FbnRpdHlUeXBlLnByb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb24uSU5URVJWQUwpdGhpcy5fb1Byb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb25TZXRbUC5uYW1lXT1FLnZhbHVlO2JyZWFrO2Nhc2UiaGllcmFyY2h5LW5vZGUtZm9yIjppZighKFI9cltQLm5hbWVdKSlSPXJbUC5uYW1lXT1uZXcgT2JqZWN0KCk7Ui5kaW1lbnNpb25OYW1lPUUudmFsdWU7YnJlYWs7Y2FzZSJoaWVyYXJjaHktcGFyZW50LW5vZGUtZm9yIjpjYXNlImhpZXJhcmNoeS1wYXJlbnQtbm9kIjppZighKFI9cltFLnZhbHVlXSkpUj1yW0UudmFsdWVdPW5ldyBPYmplY3QoKTtSLnBhcmVudE5vZGVJRFByb3BlcnR5PVA7YnJlYWs7Y2FzZSJoaWVyYXJjaHktbGV2ZWwtZm9yIjppZighKFI9cltFLnZhbHVlXSkpUj1yW0UudmFsdWVdPW5ldyBPYmplY3QoKTtSLmxldmVsUHJvcGVydHk9UDticmVhaztjYXNlImhpZXJhcmNoeS1kcmlsbC1zdGF0ZS1mb3IiOmNhc2UiaGllcmFyY2h5LWRyaWxsLXN0YXQiOmlmKCEoUj1yW0UudmFsdWVdKSlSPXJbRS52YWx1ZV09bmV3IE9iamVjdCgpO1IuZHJpbGxTdGF0ZVByb3BlcnR5PVA7YnJlYWt9fX10aGlzLl9vUmVjdXJzaXZlSGllcmFyY2h5U2V0PW5ldyBPYmplY3QoKTtmb3IodmFyIGggaW4gcil7dmFyIEg9cltoXTt2YXIgYT10aGlzLl9vUHJvcGVydHlTZXRbaF07dmFyIGQ9dGhpcy5fb1Byb3BlcnR5U2V0W0guZGltZW5zaW9uTmFtZV07aWYoZD09bnVsbCl7ZD1hfXRoaXMuX29SZWN1cnNpdmVIaWVyYXJjaHlTZXRbZC5uYW1lXT1uZXcgby5SZWN1cnNpdmVIaWVyYXJjaHkoZSxhLEgucGFyZW50Tm9kZUlEUHJvcGVydHksSC5sZXZlbFByb3BlcnR5LGQpfX0sZ2V0UHJvcGVydGllczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUHJvcGVydHlTZXR9LGZpbmRQcm9wZXJ0eUJ5TmFtZTpmdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5U2V0W3BdfSxnZXRLZXlQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FLZXlQcm9wZXJ0aWVzfSxnZXRMYWJlbE9mUHJvcGVydHk6ZnVuY3Rpb24ocCl7dmFyIFA9dGhpcy5fb1Byb3BlcnR5U2V0W3BdO2lmKFA9PW51bGwpdGhyb3cibm8gc3VjaCBwcm9wZXJ0eSB3aXRoIG5hbWUgIitwO2lmKFAuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXtmb3IodmFyIGk9LTEsZTtlPVAuZXh0ZW5zaW9uc1srK2ldOyl7aWYoIWUubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFKWNvbnRpbnVlO2lmKGUubmFtZT09ImxhYmVsIilyZXR1cm4gZS52YWx1ZX19cmV0dXJuIG51bGx9LGdldEhlYWRpbmdPZlByb3BlcnR5OmZ1bmN0aW9uKHApe3ZhciBQPXRoaXMuX29Qcm9wZXJ0eVNldFtwXTtpZihQPT1udWxsKXRocm93Im5vIHN1Y2ggcHJvcGVydHkgd2l0aCBuYW1lICIrcDtpZihQLmV4dGVuc2lvbnMhPXVuZGVmaW5lZCl7dmFyIHM9bnVsbDtmb3IodmFyIGk9LTEsZTtlPVAuZXh0ZW5zaW9uc1srK2ldOyl7aWYoIWUubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFKWNvbnRpbnVlO2lmKGUubmFtZT09ImhlYWRpbmciKXJldHVybiBlLnZhbHVlO2lmKGUubmFtZT09ImxhYmVsIilzPWUudmFsdWV9fXJldHVybiBzfSxnZXRRdWlja0luZm9PZlByb3BlcnR5OmZ1bmN0aW9uKHApe3ZhciBQPXRoaXMuX29Qcm9wZXJ0eVNldFtwXTtpZihQPT1udWxsKXRocm93Im5vIHN1Y2ggcHJvcGVydHkgd2l0aCBuYW1lICIrcDtpZihQLmV4dGVuc2lvbnMhPXVuZGVmaW5lZCl7dmFyIHM9bnVsbDtmb3IodmFyIGk9LTEsZTtlPVAuZXh0ZW5zaW9uc1srK2ldOyl7aWYoIWUubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFKWNvbnRpbnVlO2lmKGUubmFtZT09InF1aWNraW5mbyIpcmV0dXJuIGUudmFsdWU7aWYoZS5uYW1lPT0ibGFiZWwiKXM9ZS52YWx1ZX19cmV0dXJuIHN9LGdldFRleHRQcm9wZXJ0eU9mUHJvcGVydHk6ZnVuY3Rpb24ocCl7dmFyIFA9dGhpcy5fb1Byb3BlcnR5U2V0W3BdO2lmKFA9PW51bGwpdGhyb3cibm8gc3VjaCBwcm9wZXJ0eSB3aXRoIG5hbWUgIitwO2lmKFAuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXtmb3IodmFyIGk9LTEsZTtlPVAuZXh0ZW5zaW9uc1srK2ldOyl7aWYoZS5uYW1lPT0idGV4dCIpcmV0dXJuIHRoaXMuZmluZFByb3BlcnR5QnlOYW1lKGUudmFsdWUpfX1yZXR1cm4gbnVsbH0sZ2V0U3VwZXJPcmRpbmF0ZVByb3BlcnR5T2ZQcm9wZXJ0eTpmdW5jdGlvbihwKXt2YXIgUD10aGlzLl9vUHJvcGVydHlTZXRbcF07aWYoUD09bnVsbCl0aHJvdyJubyBzdWNoIHByb3BlcnR5IHdpdGggbmFtZSAiK3A7aWYoUC5leHRlbnNpb25zIT11bmRlZmluZWQpe2Zvcih2YXIgaT0tMSxlO2U9UC5leHRlbnNpb25zWysraV07KXtpZihlLm5hbWU9PSJzdXBlci1vcmRpbmF0ZSIpcmV0dXJuIHRoaXMuZmluZFByb3BlcnR5QnlOYW1lKGUudmFsdWUpfX1yZXR1cm4gbnVsbH0sZ2V0RmlsdGVyYWJsZVByb3BlcnR5TmFtZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYUZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzfSxnZXRTb3J0YWJsZVByb3BlcnR5TmFtZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYVNvcnRhYmxlUHJvcGVydHlOYW1lc30sZ2V0UmVxdWlyZWRGaWx0ZXJQcm9wZXJ0eU5hbWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FSZXF1aXJlZEZpbHRlclByb3BlcnR5TmFtZXN9LGdldFByb3BlcnRpZXNXaXRoRmlsdGVyUmVzdHJpY3Rpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eUZpbHRlclJlc3RyaWN0aW9uU2V0fSxnZXRBbGxIaWVyYXJjaHlQcm9wZXJ0eU5hbWVzOmZ1bmN0aW9uKCl7aWYodGhpcy5fYUhpZXJhcmNoeVByb3BlcnR5TmFtZXMpcmV0dXJuIHRoaXMuX2FIaWVyYXJjaHlQcm9wZXJ0eU5hbWVzO3RoaXMuX2FIaWVyYXJjaHlQcm9wZXJ0eU5hbWVzPVtdO2Zvcih2YXIgbiBpbiB0aGlzLl9vUmVjdXJzaXZlSGllcmFyY2h5U2V0KXRoaXMuX2FIaWVyYXJjaHlQcm9wZXJ0eU5hbWVzLnB1c2godGhpcy5fb1JlY3Vyc2l2ZUhpZXJhcmNoeVNldFtuXS5nZXROb2RlVmFsdWVQcm9wZXJ0eSgpLm5hbWUpO3JldHVybiB0aGlzLl9hSGllcmFyY2h5UHJvcGVydHlOYW1lc30sZ2V0SGllcmFyY2h5OmZ1bmN0aW9uKG4pe2lmKHRoaXMuX29SZWN1cnNpdmVIaWVyYXJjaHlTZXRbbl09PXVuZGVmaW5lZClyZXR1cm4gbnVsbDtyZXR1cm4gdGhpcy5fb1JlY3Vyc2l2ZUhpZXJhcmNoeVNldFtuXX0sZ2V0UU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc1FOYW1lfSxnZXRUeXBlRGVzY3JpcHRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0VudGl0eVR5cGV9LGdldFNjaGVtYTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vU2NoZW1hfSxnZXRNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTW9kZWx9LF9vRW50aXR5VHlwZTpudWxsLF9vU2NoZW1hOm51bGwsX29Nb2RlbDpudWxsLF9zUU5hbWU6bnVsbCxfYUtleVByb3BlcnRpZXM6bnVsbCxfb1Byb3BlcnR5U2V0Om51bGwsX2FGaWx0ZXJhYmxlUHJvcGVydHlOYW1lczpudWxsLF9hUmVxdWlyZWRGaWx0ZXJQcm9wZXJ0eU5hbWVzOm51bGwsX29Qcm9wZXJ0eUZpbHRlclJlc3RyaWN0aW9uU2V0Om51bGwsX2FIaWVyYXJjaHlQcm9wZXJ0eU5hbWVzOm51bGwsX29SZWN1cnNpdmVIaWVyYXJjaHlTZXQ6bnVsbH07by5SZWN1cnNpdmVIaWVyYXJjaHk9ZnVuY3Rpb24oZSxuLHAsTixhKXt0aGlzLl9pbml0KGUsbixwLE4sYSl9O28uUmVjdXJzaXZlSGllcmFyY2h5LnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24oZSxuLHAsTixhKXt0aGlzLl9vRW50aXR5VHlwZT1lO3RoaXMuX29Ob2RlSURQcm9wZXJ0eT1uO3RoaXMuX29QYXJlbnROb2RlSURQcm9wZXJ0eT1wO3RoaXMuX29Ob2RlTGV2ZWxQcm9wZXJ0eT1OO3RoaXMuX29Ob2RlVmFsdWVQcm9wZXJ0eT1hfSxpc1JlY3Vyc2l2ZUhpZXJhcmNoeTpmdW5jdGlvbigpe3JldHVybiB0cnVlfSxpc0xldmVsZWRIaWVyYXJjaHk6ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9LGdldE5vZGVJRFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Ob2RlSURQcm9wZXJ0eX0sZ2V0UGFyZW50Tm9kZUlEUHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1BhcmVudE5vZGVJRFByb3BlcnR5fSxnZXROb2RlTGV2ZWxQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTm9kZUxldmVsUHJvcGVydHl9LGdldE5vZGVWYWx1ZVByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Ob2RlVmFsdWVQcm9wZXJ0eX0sX29Ob2RlSURQcm9wZXJ0eTpudWxsLF9vUGFyZW50Tm9kZUlEUHJvcGVydHk6bnVsbCxfb05vZGVMZXZlbFByb3BlcnR5Om51bGwsX29Ob2RlVmFsdWVQcm9wZXJ0eTpudWxsfTtvLkZpbHRlckV4cHJlc3Npb249ZnVuY3Rpb24obSxzLGUpe3RoaXMuX2luaXQobSxzLGUpfTtvLkZpbHRlckV4cHJlc3Npb24ucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihtLHMsZSl7dGhpcy5fb0VudGl0eVR5cGU9ZTt0aGlzLl9vU2NoZW1hPXM7dGhpcy5fb01vZGVsPW07dGhpcy5fYUNvbmRpdGlvblVJNUZpbHRlcj1uZXcgQXJyYXkoKTt0aGlzLl9hVUk1RmlsdGVyQXJyYXk9bmV3IEFycmF5KCl9LF9yZW5kZXJQcm9wZXJ0eUZpbHRlclZhbHVlOmZ1bmN0aW9uKGYscCl7cmV0dXJuIHEuc2FwLmVuY29kZVVSTCh0aGlzLl9vTW9kZWwuZ2V0T0RhdGFNb2RlbCgpLmZvcm1hdFZhbHVlKGYscCkpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuX2FDb25kaXRpb25VSTVGaWx0ZXI9bmV3IEFycmF5KCk7dGhpcy5fYVVJNUZpbHRlckFycmF5PW5ldyBBcnJheSgpfSxfYWRkQ29uZGl0aW9uOmZ1bmN0aW9uKHAsTyx2LFYpe2Zvcih2YXIgaT0tMSx1O3U9dGhpcy5fYUNvbmRpdGlvblVJNUZpbHRlclsrK2ldOyl7aWYodS5zUGF0aD09cCYmdS5zT3BlcmF0b3I9PU8mJnUub1ZhbHVlMT09diYmdS5vVmFsdWUyPT1WKXJldHVybn10aGlzLl9hQ29uZGl0aW9uVUk1RmlsdGVyLnB1c2gobmV3IHNhcC51aS5tb2RlbC5GaWx0ZXIocCxPLHYsVikpfSxfYWRkVUk1RmlsdGVyQXJyYXk6ZnVuY3Rpb24odSl7dGhpcy5fYVVJNUZpbHRlckFycmF5LnB1c2godSl9LGFkZENvbmRpdGlvbjpmdW5jdGlvbihwLE8sdixWKXt2YXIgUD10aGlzLl9vRW50aXR5VHlwZS5maW5kUHJvcGVydHlCeU5hbWUocCk7aWYoUD09bnVsbCl7dGhyb3ciQ2Fubm90IGFkZCBmaWx0ZXIgY29uZGl0aW9uIGZvciB1bmtub3duIHByb3BlcnR5IG5hbWUgIitwfXZhciBmPXRoaXMuX29FbnRpdHlUeXBlLmdldEZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzKCk7aWYoZi5pbmRleE9mKHApPT09LTEpe3Rocm93IkNhbm5vdCBhZGQgZmlsdGVyIGNvbmRpdGlvbiBmb3Igbm90IGZpbHRlcmFibGUgcHJvcGVydHkgbmFtZSAiK3B9dGhpcy5fYWRkQ29uZGl0aW9uKHAsTyx2LFYpO3JldHVybiB0aGlzfSxhZGRTZXRDb25kaXRpb246ZnVuY3Rpb24ocCx2KXt2YXIgUD10aGlzLl9vRW50aXR5VHlwZS5maW5kUHJvcGVydHlCeU5hbWUocCk7aWYoUD09bnVsbCl7dGhyb3ciQ2Fubm90IGFkZCBmaWx0ZXIgY29uZGl0aW9uIGZvciB1bmtub3duIHByb3BlcnR5IG5hbWUgIitwfXZhciBmPXRoaXMuX29FbnRpdHlUeXBlLmdldEZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzKCk7aWYoZi5pbmRleE9mKHApPT09LTEpe3Rocm93IkNhbm5vdCBhZGQgZmlsdGVyIGNvbmRpdGlvbiBmb3Igbm90IGZpbHRlcmFibGUgcHJvcGVydHkgbmFtZSAiK3B9Zm9yKHZhciBpPS0xLFY7Vj12WysraV07KXRoaXMuX2FkZENvbmRpdGlvbihwLHNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5FUSxWKTtyZXR1cm4gdGhpc30sYWRkVUk1RmlsdGVyQ29uZGl0aW9uczpmdW5jdGlvbih1KXtpZighQXJyYXkuaXNBcnJheSh1KSl0aHJvdyJBcmd1bWVudCBpcyBub3QgYW4gYXJyYXkiO2lmKHUubGVuZ3RoPT0wKXJldHVybiB0aGlzO3ZhciBoPWZhbHNlO2Zvcih2YXIgaT0wO2k8dS5sZW5ndGg7aSsrKXtpZih1W2ldLmFGaWx0ZXJzIT11bmRlZmluZWQpe2g9dHJ1ZTticmVha319aWYoaCl0aGlzLl9hZGRVSTVGaWx0ZXJBcnJheSh1KTtlbHNle2Zvcih2YXIgaT0wO2k8dS5sZW5ndGg7aSsrKXt0aGlzLmFkZENvbmRpdGlvbih1W2ldLnNQYXRoLHVbaV0uc09wZXJhdG9yLHVbaV0ub1ZhbHVlMSx1W2ldLm9WYWx1ZTIpfX1yZXR1cm4gdGhpc30sZ2V0RXhwcmVzc2lvbkFzVUk1RmlsdGVyQXJyYXk6ZnVuY3Rpb24oKXt2YXIgZj10aGlzLl9hQ29uZGl0aW9uVUk1RmlsdGVyLmNvbmNhdChbXSk7Zm9yKHZhciBpPS0xLEY7Rj10aGlzLl9hVUk1RmlsdGVyQXJyYXlbKytpXTspe2Zvcih2YXIgaj0tMSxhO2E9RlsrK2pdOyl7Zi5wdXNoKGEpfX1yZXR1cm4gZn0sZ2V0UHJvcGVydGllc1JlZmVyZW5jZWRCeVVJNUZpbHRlckFycmF5OmZ1bmN0aW9uKHUscil7Zm9yKHZhciBpPS0xLFU7VT11WysraV07KXtpZihVLmFGaWx0ZXJzIT11bmRlZmluZWQpdGhpcy5nZXRQcm9wZXJ0aWVzUmVmZXJlbmNlZEJ5VUk1RmlsdGVyQXJyYXkoVS5hRmlsdGVycyxyKTtlbHNle2lmKHJbVS5zUGF0aF09PXVuZGVmaW5lZClyW1Uuc1BhdGhdPVtdO3JbVS5zUGF0aF0ucHVzaChVKX19fSxnZXRSZWZlcmVuY2VkUHJvcGVydGllczpmdW5jdGlvbigpe3ZhciByPW5ldyBPYmplY3QoKTtmb3IodmFyIGk9LTEsdTt1PXRoaXMuX2FDb25kaXRpb25VSTVGaWx0ZXJbKytpXTspe2lmKHJbdS5zUGF0aF09PXVuZGVmaW5lZClyW3Uuc1BhdGhdPVtdO3JbdS5zUGF0aF0ucHVzaCh1KX1mb3IodmFyIGk9LTEsVTtVPXRoaXMuX2FVSTVGaWx0ZXJBcnJheVsrK2ldOyl7dGhpcy5nZXRQcm9wZXJ0aWVzUmVmZXJlbmNlZEJ5VUk1RmlsdGVyQXJyYXkoVSxyKX1yZXR1cm4gcn0scmVuZGVyVUk1RmlsdGVyOmZ1bmN0aW9uKHUpe3ZhciBwPXRoaXMuX29FbnRpdHlUeXBlLmZpbmRQcm9wZXJ0eUJ5TmFtZSh1LnNQYXRoKTtpZihwPT1udWxsKXt0aHJvdyJDYW5ub3QgYWRkIGZpbHRlciBjb25kaXRpb24gZm9yIHVua25vd24gcHJvcGVydHkgbmFtZSAiK3Uuc1BhdGh9dmFyIGY9bnVsbDtzd2l0Y2godS5zT3BlcmF0b3Ipe2Nhc2Ugc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkJUOmY9IigiK3Uuc1BhdGgrIiAiK3NhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5HRS50b0xvd2VyQ2FzZSgpKyIgIit0aGlzLl9yZW5kZXJQcm9wZXJ0eUZpbHRlclZhbHVlKHUub1ZhbHVlMSxwLnR5cGUpKyIgYW5kICIrdS5zUGF0aCsiICIrc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkxFLnRvTG93ZXJDYXNlKCkrIiAiK3RoaXMuX3JlbmRlclByb3BlcnR5RmlsdGVyVmFsdWUodS5vVmFsdWUyLHAudHlwZSkrIikiO2JyZWFrO2Nhc2Ugc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkNvbnRhaW5zOmY9InN1YnN0cmluZ29mKCIrdGhpcy5fcmVuZGVyUHJvcGVydHlGaWx0ZXJWYWx1ZSh1Lm9WYWx1ZTEsIkVkbS5TdHJpbmciKSsiLCIrdS5zUGF0aCsiKSI7YnJlYWs7Y2FzZSBzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuU3RhcnRzV2l0aDpjYXNlIHNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5FbmRzV2l0aDpmPXUuc09wZXJhdG9yLnRvTG93ZXJDYXNlKCkrIigiK3Uuc1BhdGgrIiwiK3RoaXMuX3JlbmRlclByb3BlcnR5RmlsdGVyVmFsdWUodS5vVmFsdWUxLCJFZG0uU3RyaW5nIikrIikiO2JyZWFrO2RlZmF1bHQ6Zj11LnNQYXRoKyIgIit1LnNPcGVyYXRvci50b0xvd2VyQ2FzZSgpKyIgIit0aGlzLl9yZW5kZXJQcm9wZXJ0eUZpbHRlclZhbHVlKHUub1ZhbHVlMSxwLnR5cGUpfXJldHVybiBmfSxyZW5kZXJVSTVNdWx0aUZpbHRlcjpmdW5jdGlvbih1KXt2YXIgVT1uZXcgQXJyYXkoKTt2YXIgTz0iIjt2YXIgbD11LmJBbmQ9PXRydWU/IiBhbmQgIjoiIG9yICI7Zm9yKHZhciBpPS0xLGE7YT11LmFGaWx0ZXJzWysraV07KXtpZihhLmFGaWx0ZXJzIT11bmRlZmluZWQpe1UucHVzaChhKTtjb250aW51ZX1PKz0oTz09IiI/IiI6bCkrIigiK3RoaXMucmVuZGVyVUk1RmlsdGVyKGEpKyIpIn1pZihVLmxlbmd0aD4wKXtmb3IodmFyIGk9LTEsbTttPVVbKytpXTspe08rPShPPT0iIj8iIjpsKSsiKCIrdGhpcy5yZW5kZXJVSTVNdWx0aUZpbHRlcihtKSsiKSJ9fXJldHVybiBPfSxyZW5kZXJVSTVGaWx0ZXJBcnJheTpmdW5jdGlvbih1KXtpZih1Lmxlbmd0aD09MClyZXR1cm4iIjt2YXIgTz0iIjt1LnNvcnQoZnVuY3Rpb24oYSxiKXtpZihhLnNQYXRoPT1iLnNQYXRoKXJldHVybiAwO2lmKGEuc1BhdGg+Yi5zUGF0aClyZXR1cm4gMTtlbHNlIHJldHVybi0xfSk7dmFyIHA9dVswXS5zUGF0aDt2YXIgcz0iIjt2YXIgbj1uZXcgQXJyYXkoKSxVPW5ldyBBcnJheSgpO2Zvcih2YXIgaT0tMSxjO2M9dVsrK2ldOyl7aWYoYy5hRmlsdGVycyE9dW5kZWZpbmVkKXtVLnB1c2goYyk7Y29udGludWV9aWYocCE9Yy5zUGF0aCl7aWYocyE9IiIpTys9KE89PSIiPyIiOiIgYW5kICIpKyIoIitzKyIpIjtzPSIiO2lmKG4ubGVuZ3RoPjApe2Zvcih2YXIgaj0tMSxOO049blsrK2pdOyl7cys9KHM9PSIiPyIiOiIgYW5kICIpK3RoaXMucmVuZGVyVUk1RmlsdGVyKE4pfU8rPShPPT0iIj8iIjoiIGFuZCAiKSsiKCIrcysiKSI7cz0iIn1wPWMuc1BhdGg7bj1uZXcgQXJyYXkoKX1pZihjLnNPcGVyYXRvcj09c2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLk5FKXtuLnB1c2goYyk7Y29udGludWV9cys9KHM9PSIiPyIiOiIgb3IgIikrdGhpcy5yZW5kZXJVSTVGaWx0ZXIoYyl9aWYocyE9IiIpTys9KE89PSIiPyIiOiIgYW5kICIpKyIoIitzKyIpIjtpZihuLmxlbmd0aD4wKXtzPSIiO2Zvcih2YXIgaj0tMSxOO049blsrK2pdOyl7cys9KHM9PSIiPyIiOiIgYW5kICIpK3RoaXMucmVuZGVyVUk1RmlsdGVyKE4pfU8rPShPPT0iIj8iIjoiIGFuZCAiKSsiKCIrcysiKSJ9aWYoVS5sZW5ndGg+MCl7Zm9yKHZhciBqPS0xLG07bT1VWysral07KXtPKz0oTz09IiI/IiI6IiBhbmQgIikrIigiK3RoaXMucmVuZGVyVUk1TXVsdGlGaWx0ZXIobSkrIikifX1yZXR1cm4gT30sZ2V0VVJJRmlsdGVyT3B0aW9uVmFsdWU6ZnVuY3Rpb24oKXt2YXIgTz10aGlzLnJlbmRlclVJNUZpbHRlckFycmF5KHRoaXMuX2FDb25kaXRpb25VSTVGaWx0ZXIpO2Zvcih2YXIgaT0tMSx1O3U9dGhpcy5fYVVJNUZpbHRlckFycmF5WysraV07KXtPKz0oTz09IiI/IiI6IiBhbmQgIikrIigiK3RoaXMucmVuZGVyVUk1RmlsdGVyQXJyYXkodSkrIikifXJldHVybiBPfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5fb0VudGl0eVR5cGUuZ2V0UmVxdWlyZWRGaWx0ZXJQcm9wZXJ0eU5hbWVzKCk7dmFyIHA9dGhpcy5nZXRSZWZlcmVuY2VkUHJvcGVydGllcygpO2Zvcih2YXIgaT0tMSxQO1A9clsrK2ldOyl7aWYocFtQXT09dW5kZWZpbmVkKXRocm93ImZpbHRlciBleHByZXNzaW9uIGRvZXMgbm90IGNvbnRhaW4gcmVxdWlyZWQgcHJvcGVydHkgIitQfXZhciBhPXRoaXMuX29FbnRpdHlUeXBlLmdldFByb3BlcnRpZXNXaXRoRmlsdGVyUmVzdHJpY3Rpb25zKCk7Zm9yKHZhciBQIGluIGEpe3ZhciBmPWFbUF07dmFyIGM9MDtpZihmPT1vLkVudGl0eVR5cGUucHJvcGVydHlGaWx0ZXJSZXN0cmljdGlvbi5TSU5HTEVfVkFMVUUpe2lmKHBbUF0hPXVuZGVmaW5lZCl7aWYocFtQXS5sZW5ndGg+MXx8cFtQXVswXS5zT3BlcmF0b3IhPXNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5FUSl0aHJvdyJmaWx0ZXIgZXhwcmVzc2lvbiBtYXkgdXNlICIrUCsiIG9ubHkgd2l0aCBhIHNpbmdsZSBFUSBjb25kaXRpb24ifX19cmV0dXJuIHRydWV9LGdldEVudGl0eVR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0VudGl0eVR5cGV9LGdldFNjaGVtYTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vU2NoZW1hfSxnZXRNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTW9kZWx9LF9vRW50aXR5VHlwZTpudWxsLF9vU2NoZW1hOm51bGwsX29Nb2RlbDpudWxsLF9hRmlsdGVyQ29uZGl0aW9uOm51bGx9O28uU29ydE9yZGVyPXtBc2NlbmRpbmc6ImFzYyIsRGVzY2VuZGluZzoiZGVzYyJ9O28uU29ydEV4cHJlc3Npb249ZnVuY3Rpb24obSxzLGUpe3RoaXMuX2luaXQobSxzLGUpfTtvLlNvcnRFeHByZXNzaW9uLnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24obSxzLGUpe3RoaXMuX29FbnRpdHlUeXBlPWU7dGhpcy5fb1NjaGVtYT1zO3RoaXMuX29Nb2RlbD1tO3RoaXMuX2FTb3J0Q29uZGl0aW9uPVtdfSxfY29udGFpbnNTb3J0ZXI6ZnVuY3Rpb24ocCl7dmFyIHI9bnVsbDtmb3IodmFyIGk9LTEsYztjPXRoaXMuX2FTb3J0Q29uZGl0aW9uWysraV07KXtpZihjLnByb3BlcnR5Lm5hbWU9PT1wKXtyPXtzb3J0ZXI6YyxpbmRleDppfTticmVha319cmV0dXJuIHJ9LF9yZW1vdmVGcm9tQXJyYXk6ZnVuY3Rpb24oYSxmLHQpe3ZhciByPWEuc2xpY2UoKHR8fGYpKzF8fGEubGVuZ3RoKTthLmxlbmd0aD1mPDA/YS5sZW5ndGgrZjpmO3JldHVybiBhLnB1c2guYXBwbHkoYSxyKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLl9hU29ydENvbmRpdGlvbj1bXX0sYWRkU29ydGVyOmZ1bmN0aW9uKHAscyl7dmFyIFA9dGhpcy5fb0VudGl0eVR5cGUuZmluZFByb3BlcnR5QnlOYW1lKHApO2lmKFA9PW51bGwpe3Rocm93IkNhbm5vdCBhZGQgc29ydCBjb25kaXRpb24gZm9yIHVua25vd24gcHJvcGVydHkgbmFtZSAiK3B9dmFyIGU9dGhpcy5fY29udGFpbnNTb3J0ZXIocCk7aWYoZSE9bnVsbCl7ZS5zb3J0ZXIub3JkZXI9cztyZXR1cm4gdGhpc312YXIgUz10aGlzLl9vRW50aXR5VHlwZS5nZXRTb3J0YWJsZVByb3BlcnR5TmFtZXMoKTtpZihTLmluZGV4T2YocCk9PT0tMSl7dGhyb3ciQ2Fubm90IGFkZCBzb3J0IGNvbmRpdGlvbiBmb3Igbm90IHNvcnRhYmxlIHByb3BlcnR5IG5hbWUgIitwfXRoaXMuX2FTb3J0Q29uZGl0aW9uLnB1c2goe3Byb3BlcnR5OlAsb3JkZXI6c30pO3JldHVybiB0aGlzfSxyZW1vdmVTb3J0ZXI6ZnVuY3Rpb24ocCl7aWYoIXApcmV0dXJuO3ZhciBzPXRoaXMuX2NvbnRhaW5zU29ydGVyKHApO2lmKHMpe3RoaXMuX3JlbW92ZUZyb21BcnJheSh0aGlzLl9hU29ydENvbmRpdGlvbixzLmluZGV4KX19LGdldEV4cHJlc3Npb25zQXNVSTVTb3J0ZXJBcnJheTpmdW5jdGlvbigpe3ZhciBzPVtdO2Zvcih2YXIgaT0tMSxjO2M9dGhpcy5fYVNvcnRDb25kaXRpb25bKytpXTspe3MucHVzaChuZXcgc2FwLnVpLm1vZGVsLlNvcnRlcihjLnByb3BlcnR5Lm5hbWUsYy5vcmRlcj09by5Tb3J0T3JkZXIuRGVzY2VuZGluZykpfXJldHVybiBzfSxnZXRFeHByZXNzaW9uQXNVSTVTb3J0ZXI6ZnVuY3Rpb24oKXt2YXIgcz10aGlzLmdldEV4cHJlc3Npb25zQXNVSTVTb3J0ZXJBcnJheSgpO2lmKHMubGVuZ3RoPT0wKXtyZXR1cm4gbnVsbH1lbHNle3JldHVybiBzWzBdfX0sZ2V0VVJJT3JkZXJCeU9wdGlvblZhbHVlOmZ1bmN0aW9uKHMpe2lmKHRoaXMuX2FTb3J0Q29uZGl0aW9uLmxlbmd0aD09MClyZXR1cm4iIjt2YXIgTz0iIjtmb3IodmFyIGk9LTEsYztjPXRoaXMuX2FTb3J0Q29uZGl0aW9uWysraV07KXtpZighc1tjLnByb3BlcnR5Lm5hbWVdKWNvbnRpbnVlO08rPShPPT0iIj8iIjoiLCIpK2MucHJvcGVydHkubmFtZSsiICIrYy5vcmRlcn1yZXR1cm4gT30sZ2V0RW50aXR5VHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRW50aXR5VHlwZX0sZ2V0U2NoZW1hOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29TY2hlbWF9LGdldE1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Nb2RlbH0sX29FbnRpdHlUeXBlOm51bGwsX29TY2hlbWE6bnVsbCxfb01vZGVsOm51bGwsX2FTb3J0Q29uZGl0aW9uOm51bGx9O28uUGFyYW1ldGVyaXphdGlvblJlcXVlc3Q9ZnVuY3Rpb24ocCl7dGhpcy5faW5pdChwKX07by5QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdC5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKHApe2lmKCFwKXRocm93Ik5vIHBhcmFtZXRlcml6YXRpb24gZ2l2ZW4iO3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uPXA7dGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudD1uZXcgQXJyYXkoKX0sX3JlbmRlclBhcmFtZXRlcktleVZhbHVlOmZ1bmN0aW9uKGsscCl7cmV0dXJuIHEuc2FwLmVuY29kZVVSTCh0aGlzLl9vTW9kZWwuZ2V0T0RhdGFNb2RlbCgpLmZvcm1hdFZhbHVlKGsscCkpfSxnZXRQYXJhbWV0ZXJpemF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29QYXJhbWV0ZXJpemF0aW9ufSxzZXRQYXJhbWV0ZXJWYWx1ZTpmdW5jdGlvbihwLHYsdCl7dmFyIFA9dGhpcy5fb1BhcmFtZXRlcml6YXRpb24uZmluZFBhcmFtZXRlckJ5TmFtZShwKTtpZighUCl0aHJvdyJJbnZhbGlkIHBhcmFtZXRlciBuYW1lICIrcDtpZih0IT1udWxsKXtpZighUC5pc0ludGVydmFsQm91bmRhcnkoKSl0aHJvdyJSYW5nZSB2YWx1ZSBjYW5ub3QgYmUgYXBwbGllZCB0byBwYXJhbWV0ZXIgIitwKyIgYWNjZXB0aW5nIG9ubHkgc2luZ2xlIHZhbHVlcyI7aWYoIVAuaXNMb3dlckludGVydmFsQm91bmRhcnkoKSl0aHJvdyJSYW5nZSB2YWx1ZSBnaXZlbiwgYnV0IHBhcmFtZXRlciAiK3ArIiBkb2VzIG5vdCBob2xkIHRoZSBsb3dlciBib3VuZGFyeSJ9aWYoIVAuaXNJbnRlcnZhbEJvdW5kYXJ5KCkpe2lmKHY9PW51bGwpZGVsZXRlIHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnRbcF07ZWxzZSB0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50W3BdPXZ9ZWxzZXtpZih2PT1udWxsJiZ0IT1udWxsKXRocm93IlBhcmFtZXRlciAiK3ArIjogQW4gdXBwZXIgYm91bmRhcnkgY2Fubm90IGJlIGdpdmVuIHdpdGhvdXQgdGhlIGxvd2VyIGJvdW5kYXJ5IjtpZih2PT1udWxsKXtkZWxldGUgdGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudFtwXTt0PW51bGx9ZWxzZSB0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50W3BdPXY7dmFyIHU9UC5nZXRQZWVySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlcigpO2lmKHQ9PW51bGwpdD12O2lmKHY9PW51bGwpZGVsZXRlIHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnRbdS5nZXROYW1lKCldO2Vsc2UgdGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudFt1LmdldE5hbWUoKV09dH1yZXR1cm59LGdldFVSSVRvUGFyYW1ldGVyaXphdGlvbkVudGl0eVNldDpmdW5jdGlvbihzKXtyZXR1cm4ocz9zOiIiKSsiLyIrdGhpcy5fb1BhcmFtZXRlcml6YXRpb24uZ2V0RW50aXR5U2V0KCkuZ2V0UU5hbWUoKX0sZ2V0VVJJVG9QYXJhbWV0ZXJpemF0aW9uRW50cnk6ZnVuY3Rpb24ocyl7dmFyIGQ9dGhpcy5fb1BhcmFtZXRlcml6YXRpb24uZ2V0QWxsUGFyYW1ldGVycygpO2Zvcih2YXIgRCBpbiBkKXtpZih0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50W0RdPT11bmRlZmluZWQpdGhyb3ciUGFyYW1ldGVyICIrRCsiIGhhcyBubyB2YWx1ZSBhc3NpZ25lZCJ9dmFyIGs9IiIsZj10cnVlO2Zvcih2YXIgcCBpbiB0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50KXtrKz0oZj8iIjoiLCIpK3ArIj0iK3RoaXMuX3JlbmRlclBhcmFtZXRlcktleVZhbHVlKHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnRbcF0sZFtwXS5nZXRQcm9wZXJ0eSgpLnR5cGUpO2Y9ZmFsc2V9cmV0dXJuKHM/czoiIikrIi8iK3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uLmdldEVudGl0eVNldCgpLmdldFFOYW1lKCkrIigiK2srIikifSxfb1BhcmFtZXRlcml6YXRpb246bnVsbCxfb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudDpudWxsfTtvLlF1ZXJ5UmVzdWx0UmVxdWVzdD1mdW5jdGlvbihRLHApe3RoaXMuX2luaXQoUSl9O28uUXVlcnlSZXN1bHRSZXF1ZXN0LnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24oUSxwKXt0aGlzLl9vUXVlcnlSZXN1bHQ9UTt0aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3Q9cDt0aGlzLl9vQWdncmVnYXRpb25MZXZlbD1uZXcgT2JqZWN0KCk7dGhpcy5fb01lYXN1cmVzPW5ldyBPYmplY3QoKTt0aGlzLl9iSW5jbHVkZUVudGl0eUtleT1mYWxzZTt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1udWxsO3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1udWxsO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXM9bnVsbH0sc2V0UGFyYW1ldGVyaXphdGlvblJlcXVlc3Q6ZnVuY3Rpb24ocCl7dGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0PXB9LHNldFJlc291cmNlUGF0aDpmdW5jdGlvbihyKXt0aGlzLl9zUmVzb3VyY2VQYXRoPXI7aWYodGhpcy5fc1Jlc291cmNlUGF0aC5pbmRleE9mKCIvIikhPTApdGhyb3ciTWlzc2luZyBsZWFkaW5nIC8gKHNsYXNoKSBmb3IgcmVzb3VyY2UgcGF0aCI7aWYodGhpcy5fb1F1ZXJ5UmVzdWx0LmdldFBhcmFtZXRlcml6YXRpb24oKSl7dmFyIGw9ci5sYXN0SW5kZXhPZigiLyIpO2lmKGw9PS0xKXRocm93Ik1pc3NpbmcgbmF2aWdhdGlvbiBmcm9tIHBhcmFtZXRlciBlbnRpdHkgc2V0IHRvIHF1ZXJ5IHJlc3VsdCBpbiByZXNvdXJjZSBwYXRoIjt2YXIgbj1yLnN1YnN0cmluZyhsKzEpO2lmKG4hPXRoaXMuX29RdWVyeVJlc3VsdC5nZXRQYXJhbWV0ZXJpemF0aW9uKCkuZ2V0TmF2aWdhdGlvblByb3BlcnR5VG9RdWVyeVJlc3VsdCgpKXRocm93IkludmFsaWQgbmF2aWdhdGlvbiBwcm9wZXJ0eSBmcm9tIHBhcmFtZXRlciBlbnRpdHkgc2V0IHRvIHF1ZXJ5IHJlc3VsdCBpbiByZXNvdXJjZSBwYXRoIn19LGdldFBhcmFtZXRlcml6YXRpb25SZXF1ZXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdH0sZ2V0UXVlcnlSZXN1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1F1ZXJ5UmVzdWx0fSxzZXRBZ2dyZWdhdGlvbkxldmVsOmZ1bmN0aW9uKGQpe3RoaXMuX29BZ2dyZWdhdGlvbkxldmVsPW5ldyBPYmplY3QoKTtpZighZCl7ZD10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0QWxsRGltZW5zaW9uTmFtZXMoKX10aGlzLmFkZFRvQWdncmVnYXRpb25MZXZlbChkKTt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW51bGx9LGFkZFRvQWdncmVnYXRpb25MZXZlbDpmdW5jdGlvbihkKXtpZighZClyZXR1cm47dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lcz1udWxsO2Zvcih2YXIgaT0tMSxEO0Q9ZFsrK2ldOyl7aWYoIXRoaXMuX29RdWVyeVJlc3VsdC5maW5kRGltZW5zaW9uQnlOYW1lKEQpKXRocm93IEQrIiBpcyBub3QgYSB2YWxpZCBkaW1lbnNpb24gbmFtZSI7dGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbRF09e2tleTp0cnVlLHRleHQ6ZmFsc2UsYXR0cmlidXRlczpudWxsfX19LHJlbW92ZUZyb21BZ2dyZWdhdGlvbkxldmVsOmZ1bmN0aW9uKGQpe2lmKCFkKXtyZXR1cm59dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lcz1udWxsO2Zvcih2YXIgaT0tMSxEO0Q9ZFsrK2ldOyl7aWYoIXRoaXMuX29RdWVyeVJlc3VsdC5maW5kRGltZW5zaW9uQnlOYW1lKEQpKXt0aHJvdyBEKyIgaXMgbm90IGEgdmFsaWQgZGltZW5zaW9uIG5hbWUifWlmKHRoaXMuX29BZ2dyZWdhdGlvbkxldmVsW0RdIT11bmRlZmluZWQpe2RlbGV0ZSB0aGlzLl9vQWdncmVnYXRpb25MZXZlbFtEXTt0aGlzLmdldFNvcnRFeHByZXNzaW9uKCkucmVtb3ZlU29ydGVyKEQpfX19LGdldEFnZ3JlZ2F0aW9uTGV2ZWw6ZnVuY3Rpb24oKXt2YXIgZD1uZXcgQXJyYXkoKTtmb3IodmFyIEQgaW4gdGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWwpe2QucHVzaChEKX1yZXR1cm4gZH0sZ2V0QWdncmVnYXRpb25MZXZlbERldGFpbHM6ZnVuY3Rpb24oZCl7aWYodGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbZF09PXVuZGVmaW5lZCl0aHJvdyJBZ2dyZWdhdGlvbiBsZXZlbCBkb2VzIG5vdCBpbmNsdWRlIGRpbWVuc2lvbiAiK2Q7cmV0dXJuIHRoaXMuX29BZ2dyZWdhdGlvbkxldmVsW2RdfSxzZXRNZWFzdXJlczpmdW5jdGlvbihtKXtpZighbSl7bT10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0QWxsTWVhc3VyZU5hbWVzKCl9dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lcz1udWxsO3RoaXMuX29NZWFzdXJlcz1uZXcgT2JqZWN0KCk7Zm9yKHZhciBpPS0xLE07TT1tWysraV07KXtpZighdGhpcy5fb1F1ZXJ5UmVzdWx0LmZpbmRNZWFzdXJlQnlOYW1lKE0pKXRocm93IE0rIiBpcyBub3QgYSB2YWxpZCBtZWFzdXJlIG5hbWUiO3RoaXMuX29NZWFzdXJlc1tNXT17dmFsdWU6dHJ1ZSx0ZXh0OmZhbHNlLHVuaXQ6ZmFsc2V9fX0sZ2V0TWVhc3VyZU5hbWVzOmZ1bmN0aW9uKCl7dmFyIG09bmV3IEFycmF5KCk7Zm9yKHZhciBNIGluIHRoaXMuX29NZWFzdXJlcyl7bS5wdXNoKE0pfXJldHVybiBtfSxpbmNsdWRlRGltZW5zaW9uS2V5VGV4dEF0dHJpYnV0ZXM6ZnVuY3Rpb24oZCxJLGIsYSl7dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lcz1udWxsO3ZhciBEPW5ldyBBcnJheSgpO2lmKGQpe2lmKHRoaXMuX29BZ2dyZWdhdGlvbkxldmVsW2RdPT11bmRlZmluZWQpdGhyb3cgZCsiIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgYWdncmVnYXRpb24gbGV2ZWwiO0QucHVzaChkKX1lbHNle2Zvcih2YXIgbiBpbiB0aGlzLl9vQWdncmVnYXRpb25MZXZlbCl7RC5wdXNoKG4pfWE9bnVsbH1mb3IodmFyIGk9LTEscztzPURbKytpXTspe2lmKEkhPW51bGwpdGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbc10ua2V5PUk7aWYoYiE9bnVsbCl0aGlzLl9vQWdncmVnYXRpb25MZXZlbFtzXS50ZXh0PWI7aWYoYSE9bnVsbCl0aGlzLl9vQWdncmVnYXRpb25MZXZlbFtzXS5hdHRyaWJ1dGVzPWF9fSxpbmNsdWRlTWVhc3VyZVJhd0Zvcm1hdHRlZFZhbHVlVW5pdDpmdW5jdGlvbihtLEksYixhKXt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW51bGw7dmFyIE09bmV3IEFycmF5KCk7aWYobSl7aWYodGhpcy5fb01lYXN1cmVzW21dPT11bmRlZmluZWQpdGhyb3cgbSsiIGlzIG5vdCBwYXJ0IG9mIHRoZSBxdWVyeSByZXN1bHQiO00ucHVzaChtKX1lbHNle2Zvcih2YXIgbiBpbiB0aGlzLl9vTWVhc3VyZXMpe00ucHVzaChuKX19Zm9yKHZhciBpPS0xLHM7cz1NWysraV07KXtpZihJIT1udWxsKXRoaXMuX29NZWFzdXJlc1tzXS52YWx1ZT1JO2lmKGIhPW51bGwpdGhpcy5fb01lYXN1cmVzW3NdLnRleHQ9YjtpZihhIT1udWxsKXRoaXMuX29NZWFzdXJlc1tzXS51bml0PWF9fSxnZXRGaWx0ZXJFeHByZXNzaW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fb0ZpbHRlckV4cHJlc3Npb249PW51bGwpe3ZhciBlPXRoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCk7dGhpcy5fb0ZpbHRlckV4cHJlc3Npb249bmV3IG8uRmlsdGVyRXhwcmVzc2lvbih0aGlzLl9vUXVlcnlSZXN1bHQuZ2V0TW9kZWwoKSxlLmdldFNjaGVtYSgpLGUpfXJldHVybiB0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbn0sc2V0RmlsdGVyRXhwcmVzc2lvbjpmdW5jdGlvbihmKXt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1mfSxnZXRTb3J0RXhwcmVzc2lvbjpmdW5jdGlvbigpe2lmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbj09bnVsbCl7dmFyIGU9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEVudGl0eVR5cGUoKTt0aGlzLl9vU29ydEV4cHJlc3Npb249bmV3IG8uU29ydEV4cHJlc3Npb24oZS5nZXRNb2RlbCgpLGUuZ2V0U2NoZW1hKCksZSl9cmV0dXJuIHRoaXMuX29Tb3J0RXhwcmVzc2lvbn0sc2V0U29ydEV4cHJlc3Npb246ZnVuY3Rpb24ocyl7dGhpcy5fb1NvcnRFeHByZXNzaW9uPXN9LHNldFJlcXVlc3RPcHRpb25zOmZ1bmN0aW9uKGksSSl7aWYoaSE9bnVsbCl0aGlzLl9iSW5jbHVkZUVudGl0eUtleT1pO2lmKEkhPW51bGwpdGhpcy5fYkluY2x1ZGVDb3VudD1JfSxzZXRSZXN1bHRQYWdlQm91bmRhcmllczpmdW5jdGlvbihzLGUpe2lmKHMhPW51bGwmJnR5cGVvZiBzIT09Im51bWJlciIpe3Rocm93IlN0YXJ0IHZhbHVlIG11c3QgYmUgbnVsbCBvciBudW1lcmljIn1pZihlIT09bnVsbCYmdHlwZW9mIGUhPT0ibnVtYmVyIil7dGhyb3ciRW5kIHZhbHVlIG11c3QgYmUgbnVsbCBvciBudW1lcmljIn1pZihzPT1udWxsKXM9MTtpZihzPDF8fHM+KGU9PW51bGw/czplKSl7dGhyb3ciSW52YWxpZCB2YWx1ZXMgZm9yIHJlcXVlc3RlZCBwYWdlIGJvdW5kYXJpZXMifXRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbj0ocz4xKT9zLTE6bnVsbDt0aGlzLl9pVG9wUmVxdWVzdE9wdGlvbj0oZSE9bnVsbCk/KGUtcysxKTpudWxsfSxnZXRSZXN1bHRQYWdlQm91bmRhcmllczpmdW5jdGlvbigpe3JldHVybntzdGFydDoodGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uPT1udWxsKT8xOnRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbixlbmQ6KHRoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uIT1udWxsKT8odGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uPT1udWxsKT8xOnRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbit0aGlzLl9pVG9wUmVxdWVzdE9wdGlvbjpudWxsfX0sZ2V0VVJJVG9RdWVyeVJlc3VsdEVudGl0eVNldDpmdW5jdGlvbihzKXt2YXIgdT1udWxsO2lmKHRoaXMuX3NSZXNvdXJjZVBhdGghPW51bGwpe3U9KHM/czoiIikrdGhpcy5fc1Jlc291cmNlUGF0aH1lbHNle2lmKHRoaXMuX29RdWVyeVJlc3VsdC5nZXRQYXJhbWV0ZXJpemF0aW9uKCkpe2lmKCF0aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3QpdGhyb3ciTWlzc2luZyBwYXJhbWV0ZXJpemF0aW9uIHJlcXVlc3QiO2Vsc2UgdT10aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3QuZ2V0VVJJVG9QYXJhbWV0ZXJpemF0aW9uRW50cnkocykrIi8iK3RoaXMuX29RdWVyeVJlc3VsdC5nZXRQYXJhbWV0ZXJpemF0aW9uKCkuZ2V0TmF2aWdhdGlvblByb3BlcnR5VG9RdWVyeVJlc3VsdCgpfWVsc2UgdT0ocz9zOiIiKSsiLyIrdGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEVudGl0eVNldCgpLmdldFFOYW1lKCl9cmV0dXJuIHV9LGdldFVSSVF1ZXJ5T3B0aW9uVmFsdWU6ZnVuY3Rpb24oUSl7dmFyIHM9bnVsbDtzd2l0Y2goUSl7Y2FzZSIkc2VsZWN0Ijp7dmFyIFM9IiI7dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lcz1uZXcgT2JqZWN0KCk7dmFyIGQ9bnVsbDtmb3IodmFyIEQgaW4gdGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWwpe3ZhciBhPXRoaXMuX29RdWVyeVJlc3VsdC5maW5kRGltZW5zaW9uQnlOYW1lKEQpO3ZhciBiPXRoaXMuX29BZ2dyZWdhdGlvbkxldmVsW0RdO2lmKGIua2V5PT10cnVlKXtkPWEuZ2V0S2V5UHJvcGVydHkoKS5uYW1lO2lmKHRoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbZF09PXVuZGVmaW5lZCl7Uys9KFM9PSIiPyIiOiIsIikrZDt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW2RdPXRydWV9fWlmKGIudGV4dD09dHJ1ZSYmYS5nZXRUZXh0UHJvcGVydHkoKSl7ZD1hLmdldFRleHRQcm9wZXJ0eSgpLm5hbWU7aWYodGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1tkXT09dW5kZWZpbmVkKXtTKz0oUz09IiI/IiI6IiwiKStkO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbZF09dHJ1ZX19aWYoYi5hdHRyaWJ1dGVzKXtmb3IodmFyIGk9LTEsQTtBPWIuYXR0cmlidXRlc1srK2ldOyl7ZD1hLmZpbmRBdHRyaWJ1dGVCeU5hbWUoQSkuZ2V0TmFtZSgpO2lmKHRoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbZF09PXVuZGVmaW5lZCl7Uys9KFM9PSIiPyIiOiIsIikrZDt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW2RdPXRydWV9fX19dmFyIG07Zm9yKHZhciBNIGluIHRoaXMuX29NZWFzdXJlcyl7dmFyIGM9dGhpcy5fb1F1ZXJ5UmVzdWx0LmZpbmRNZWFzdXJlQnlOYW1lKE0pO3ZhciBlPXRoaXMuX29NZWFzdXJlc1tNXTtpZihlLnZhbHVlPT10cnVlKXttPWMuZ2V0UmF3VmFsdWVQcm9wZXJ0eSgpLm5hbWU7aWYodGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1ttXT09dW5kZWZpbmVkKXtTKz0oUz09IiI/IiI6IiwiKSttO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbbV09dHJ1ZX19aWYoZS50ZXh0PT10cnVlJiZjLmdldEZvcm1hdHRlZFZhbHVlUHJvcGVydHkoKSl7bT1jLmdldEZvcm1hdHRlZFZhbHVlUHJvcGVydHkoKS5uYW1lO2lmKHRoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbbV09PXVuZGVmaW5lZCl7Uys9KFM9PSIiPyIiOiIsIikrbTt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW21dPXRydWV9fWlmKGUudW5pdD09dHJ1ZSYmYy5nZXRVbml0UHJvcGVydHkoKSl7bT1jLmdldFVuaXRQcm9wZXJ0eSgpLm5hbWU7aWYodGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1ttXT09dW5kZWZpbmVkKXtTKz0oUz09IiI/IiI6IiwiKSttO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbbV09dHJ1ZX19fWlmKHRoaXMuX2JJbmNsdWRlRW50aXR5S2V5KXt2YXIgaz10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpLmdldFR5cGVEZXNjcmlwdGlvbigpLmtleS5wcm9wZXJ0eVJlZjtmb3IodmFyIGk9LTEsSztLPWtbKytpXTspe1MrPShTPT0iIj8iIjoiLCIpK0submFtZX19cz0oUz9TOm51bGwpO2JyZWFrfWNhc2UiJGZpbHRlciI6e3ZhciBmPW51bGw7aWYodGhpcy5fb0ZpbHRlckV4cHJlc3Npb24pZj10aGlzLl9vRmlsdGVyRXhwcmVzc2lvbi5nZXRVUklGaWx0ZXJPcHRpb25WYWx1ZSgpO3M9KGY/ZjpudWxsKTticmVha31jYXNlIiRvcmRlcmJ5Ijp7dmFyIGc9bnVsbDtpZih0aGlzLl9vU29ydEV4cHJlc3Npb24pZz10aGlzLl9vU29ydEV4cHJlc3Npb24uZ2V0VVJJT3JkZXJCeU9wdGlvblZhbHVlKHRoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXMpO3M9KGc/ZzpudWxsKTticmVha31jYXNlIiR0b3AiOntpZih0aGlzLl9pVG9wUmVxdWVzdE9wdGlvbiE9PW51bGwpe3M9dGhpcy5faVRvcFJlcXVlc3RPcHRpb259YnJlYWt9Y2FzZSIkc2tpcCI6e3M9dGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uO2JyZWFrfWNhc2UiJGlubGluZWNvdW50Ijp7cz0odGhpcy5fYkluY2x1ZGVDb3VudD09dHJ1ZT8iYWxscGFnZXMiOm51bGwpO2JyZWFrfWRlZmF1bHQ6YnJlYWt9cmV0dXJuIHN9LGdldFVSSVRvUXVlcnlSZXN1bHRFbnRyaWVzOmZ1bmN0aW9uKHMscil7dmFyIHI9dGhpcy5nZXRVUklUb1F1ZXJ5UmVzdWx0RW50aXR5U2V0KHMpO3RoaXMuZ2V0RmlsdGVyRXhwcmVzc2lvbigpLmlzVmFsaWQoKTt2YXIgUz10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRzZWxlY3QiKTt2YXIgZj10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRmaWx0ZXIiKTt2YXIgYT10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRvcmRlcmJ5Iik7dmFyIHQ9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkdG9wIik7dmFyIGI9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkc2tpcCIpO3ZhciBpPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJGlubGluZWNvdW50Iik7dmFyIHU9cjt2YXIgUT1mYWxzZTtpZihTKXt1Kz0iPyRzZWxlY3Q9IitTO1E9dHJ1ZX1pZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbiYmZil7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZXt1Kz0iJiJ9dSs9IiRmaWx0ZXI9IitmfWlmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbiYmYSl7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZXt1Kz0iJiJ9dSs9IiRvcmRlcmJ5PSIrYX1pZih0aGlzLl9pVG9wUmVxdWVzdE9wdGlvbiYmdCl7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZXt1Kz0iJiJ9dSs9IiR0b3A9Iit0fWlmKHRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbiYmYil7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZXt1Kz0iJiJ9dSs9IiRza2lwPSIrYn1pZih0aGlzLl9iSW5jbHVkZUNvdW50JiZpKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJGlubGluZWNvdW50PSIraX1yZXR1cm4gdX0sX29RdWVyeVJlc3VsdDpudWxsLF9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3Q6bnVsbCxfc1Jlc291cmNlUGF0aDpudWxsLF9vQWdncmVnYXRpb25MZXZlbDpudWxsLF9vTWVhc3VyZXM6bnVsbCxfYkluY2x1ZGVFbnRpdHlLZXk6bnVsbCxfYkluY2x1ZGVDb3VudDpudWxsLF9vRmlsdGVyRXhwcmVzc2lvbjpudWxsLF9vU29ydEV4cHJlc3Npb246bnVsbCxfaVNraXBSZXF1ZXN0T3B0aW9uOjAsX2lUb3BSZXF1ZXN0T3B0aW9uOm51bGx9O28uUGFyYW1ldGVyVmFsdWVTZXRSZXF1ZXN0PWZ1bmN0aW9uKHApe3RoaXMuX2luaXQocCl9O28uUGFyYW1ldGVyVmFsdWVTZXRSZXF1ZXN0LnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24ocCl7dGhpcy5fb1BhcmFtZXRlcj1wO3RoaXMuX29WYWx1ZVNldFJlc3VsdD1uZXcgT2JqZWN0KCk7dGhpcy5fb0ZpbHRlckV4cHJlc3Npb249bnVsbDt0aGlzLl9vU29ydEV4cHJlc3Npb249bnVsbH0saW5jbHVkZVBhcmFtZXRlclRleHQ6ZnVuY3Rpb24oaSl7aWYoaSE9bnVsbCl0aGlzLl9vVmFsdWVTZXRSZXN1bHQudGV4dD1pfSxnZXRGaWx0ZXJFeHByZXNzaW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fb0ZpbHRlckV4cHJlc3Npb249PW51bGwpe3ZhciBlPXRoaXMuX29QYXJhbWV0ZXIuZ2V0Q29udGFpbmluZ1BhcmFtZXRlcml6YXRpb24oKS5nZXRFbnRpdHlUeXBlKCk7dmFyIG09dGhpcy5fb1BhcmFtZXRlci5nZXRDb250YWluaW5nUGFyYW1ldGVyaXphdGlvbigpLmdldFRhcmdldFF1ZXJ5UmVzdWx0KCkuZ2V0TW9kZWwoKTt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1uZXcgby5GaWx0ZXJFeHByZXNzaW9uKG0sZS5nZXRTY2hlbWEoKSxlKX1yZXR1cm4gdGhpcy5fb0ZpbHRlckV4cHJlc3Npb259LHNldEZpbHRlckV4cHJlc3Npb246ZnVuY3Rpb24oZil7dGhpcy5fb0ZpbHRlckV4cHJlc3Npb249Zn0sZ2V0U29ydEV4cHJlc3Npb246ZnVuY3Rpb24oKXtpZih0aGlzLl9vU29ydEV4cHJlc3Npb249PW51bGwpe3ZhciBlPXRoaXMuX29QYXJhbWV0ZXIuZ2V0Q29udGFpbmluZ1BhcmFtZXRlcml6YXRpb24oKS5nZXRFbnRpdHlUeXBlKCk7dGhpcy5fb1NvcnRFeHByZXNzaW9uPW5ldyBvLlNvcnRFeHByZXNzaW9uKGUuZ2V0TW9kZWwoKSxlLmdldFNjaGVtYSgpLGUpfXJldHVybiB0aGlzLl9vU29ydEV4cHJlc3Npb259LHNldFNvcnRFeHByZXNzaW9uOmZ1bmN0aW9uKHMpe3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1zfSxnZXRVUklRdWVyeU9wdGlvblZhbHVlOmZ1bmN0aW9uKFEpe3ZhciBzPW51bGw7c3dpdGNoKFEpe2Nhc2UiJHNlbGVjdCI6e3ZhciBTPSIiO1MrPShTPT0iIj8iIjoiLCIpK3RoaXMuX29QYXJhbWV0ZXIuZ2V0UHJvcGVydHkoKS5uYW1lO2lmKHRoaXMuX29WYWx1ZVNldFJlc3VsdC50ZXh0PT10cnVlJiZ0aGlzLl9vUGFyYW1ldGVyLmdldFRleHRQcm9wZXJ0eSgpKVMrPShTPT0iIj8iIjoiLCIpK3RoaXMuX29QYXJhbWV0ZXIuZ2V0VGV4dFByb3BlcnR5KCkubmFtZTtzPShTP1M6bnVsbCk7YnJlYWt9Y2FzZSIkZmlsdGVyIjp7dmFyIGY9bnVsbDtpZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbilmPXRoaXMuX29GaWx0ZXJFeHByZXNzaW9uLmdldFVSSUZpbHRlck9wdGlvblZhbHVlKCk7cz0oZj9mOm51bGwpO2JyZWFrfWNhc2UiJG9yZGVyYnkiOnt2YXIgYT1udWxsO2lmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbilhPXRoaXMuX29Tb3J0RXhwcmVzc2lvbi5nZXRVUklPcmRlckJ5T3B0aW9uVmFsdWUoKTtzPShhP2E6bnVsbCk7YnJlYWt9ZGVmYXVsdDpicmVha31yZXR1cm4gc30sZ2V0VVJJVG9QYXJhbWV0ZXJWYWx1ZVNldEVudHJpZXM6ZnVuY3Rpb24ocyl7dmFyIHI9bnVsbDtyPShzP3M6IiIpKyIvIit0aGlzLl9vUGFyYW1ldGVyLmdldENvbnRhaW5pbmdQYXJhbWV0ZXJpemF0aW9uKCkuZ2V0RW50aXR5U2V0KCkuZ2V0UU5hbWUoKTt0aGlzLmdldEZpbHRlckV4cHJlc3Npb24oKS5pc1ZhbGlkKCk7dmFyIFM9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkc2VsZWN0Iik7dmFyIGY9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkZmlsdGVyIik7dmFyIGE9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkb3JkZXJieSIpO3ZhciB1PXI7dmFyIFE9ZmFsc2U7aWYoUyl7dSs9Ij8kc2VsZWN0PSIrUztRPXRydWV9aWYodGhpcy5fb0ZpbHRlckV4cHJlc3Npb24mJmYpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2UgdSs9IiYiO3UrPSIkZmlsdGVyPSIrZn1pZih0aGlzLl9vU29ydEV4cHJlc3Npb24mJmEpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2UgdSs9IiYiO3UrPSIkb3JkZXJieT0iK2F9cmV0dXJuIHV9LF9vUGFyYW1ldGVyOm51bGwsX29GaWx0ZXJFeHByZXNzaW9uOm51bGwsX29Tb3J0RXhwcmVzc2lvbjpudWxsLF9vVmFsdWVTZXRSZXN1bHQ6bnVsbH07by5EaW1lbnNpb25NZW1iZXJTZXRSZXF1ZXN0PWZ1bmN0aW9uKGQscCx1KXt0aGlzLl9pbml0KGQscCx1KX07by5EaW1lbnNpb25NZW1iZXJTZXRSZXF1ZXN0LnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24oZCxwLHUpe3RoaXMuX29EaW1lbnNpb249ZDt0aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3Q9cDt0aGlzLl9iVXNlTWFzdGVyRGF0YT11O3RoaXMuX29WYWx1ZVNldFJlc3VsdD1uZXcgT2JqZWN0KCk7dGhpcy5fb0ZpbHRlckV4cHJlc3Npb249bnVsbDt0aGlzLl9vU29ydEV4cHJlc3Npb249bnVsbDtpZih0aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3QhPW51bGwmJnRoaXMuX2JVc2VNYXN0ZXJEYXRhPT10cnVlKXRocm93IkxJTUlUQVRJT046IHBhcmFtZXRlcml6ZWQgbWFzdGVyIGRhdGEgZW50aXR5IHNldHMgYXJlIG5vdCB5ZXQgaW1wbGVtZW50ZWQiO2lmKHRoaXMuX2JVc2VNYXN0ZXJEYXRhKXt0aGlzLl9vRW50aXR5U2V0PXRoaXMuX29EaW1lbnNpb24uZ2V0TWFzdGVyRGF0YUVudGl0eVNldCgpfWVsc2V7dGhpcy5fb0VudGl0eVNldD10aGlzLl9vRGltZW5zaW9uLmdldENvbnRhaW5pbmdRdWVyeVJlc3VsdCgpLmdldEVudGl0eVNldCgpO2lmKHRoaXMuX29EaW1lbnNpb24uZ2V0Q29udGFpbmluZ1F1ZXJ5UmVzdWx0KCkuZ2V0UGFyYW1ldGVyaXphdGlvbigpJiYhdGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0KXRocm93Ik1pc3NpbmcgcGFyYW1ldGVyaXphdGlvbiByZXF1ZXN0In19LHNldFBhcmFtZXRlcml6YXRpb25SZXF1ZXN0OmZ1bmN0aW9uKHApe3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdD1wfSxpbmNsdWRlRGltZW5zaW9uVGV4dEF0dHJpYnV0ZXM6ZnVuY3Rpb24oaSxJKXt0aGlzLl9vVmFsdWVTZXRSZXN1bHQudGV4dD17dGV4dDpmYWxzZSxhdHRyaWJ1dGVzOmZhbHNlfTtpZihpPT10cnVlKXRoaXMuX29WYWx1ZVNldFJlc3VsdC50ZXh0PXRydWU7aWYoST09dHJ1ZSl0aGlzLl9vVmFsdWVTZXRSZXN1bHQuYXR0cmlidXRlcz10cnVlfSxnZXRGaWx0ZXJFeHByZXNzaW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fb0ZpbHRlckV4cHJlc3Npb249PW51bGwpe3ZhciBlPXRoaXMuX29FbnRpdHlTZXQuZ2V0RW50aXR5VHlwZSgpO3ZhciBtPXRoaXMuX29EaW1lbnNpb24uZ2V0Q29udGFpbmluZ1F1ZXJ5UmVzdWx0KCkuZ2V0TW9kZWwoKTt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1uZXcgby5GaWx0ZXJFeHByZXNzaW9uKG0sZS5nZXRTY2hlbWEoKSxlKX1yZXR1cm4gdGhpcy5fb0ZpbHRlckV4cHJlc3Npb259LHNldEZpbHRlckV4cHJlc3Npb246ZnVuY3Rpb24oZil7dGhpcy5fb0ZpbHRlckV4cHJlc3Npb249Zn0sZ2V0U29ydEV4cHJlc3Npb246ZnVuY3Rpb24oKXtpZih0aGlzLl9vU29ydEV4cHJlc3Npb249PW51bGwpe3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1uZXcgby5Tb3J0RXhwcmVzc2lvbih0aGlzLl9vRW50aXR5VHlwZS5nZXRNb2RlbCgpLHRoaXMuX29FbnRpdHlUeXBlLmdldFNjaGVtYSgpLHRoaXMuX29FbnRpdHlUeXBlKX1yZXR1cm4gdGhpcy5fb1NvcnRFeHByZXNzaW9ufSxzZXRTb3J0RXhwcmVzc2lvbjpmdW5jdGlvbihzKXt0aGlzLl9vU29ydEV4cHJlc3Npb249c30sc2V0UmVxdWVzdE9wdGlvbnM6ZnVuY3Rpb24oaSl7aWYoaSE9bnVsbCl0aGlzLl9iSW5jbHVkZUNvdW50PWl9LHNldFJlc3VsdFBhZ2VCb3VuZGFyaWVzOmZ1bmN0aW9uKHMsZSl7aWYocyE9bnVsbCYmdHlwZW9mIHMhPT0ibnVtYmVyIil7dGhyb3ciU3RhcnQgdmFsdWUgbXVzdCBiZSBudWxsIG9yIG51bWVyaWMifWlmKGUhPT1udWxsJiZ0eXBlb2YgZSE9PSJudW1iZXIiKXt0aHJvdyJFbmQgdmFsdWUgbXVzdCBiZSBudWxsIG9yIG51bWVyaWMifWlmKHM9PW51bGwpcz0xO2lmKHM8MXx8cz4oZT09bnVsbD9zOmUpKXt0aHJvdyJJbnZhbGlkIHZhbHVlcyBmb3IgcmVxdWVzdGVkIHBhZ2UgYm91bmRhcmllcyJ9dGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uPShzPjEpP3MtMTpudWxsO3RoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uPShlIT1udWxsKT8oZS1zKzEpOm51bGx9LGdldFJlc3VsdFBhZ2VCb3VuZGFyaWVzOmZ1bmN0aW9uKCl7cmV0dXJue3N0YXJ0Oih0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb249PW51bGwpPzE6dGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uLGVuZDoodGhpcy5faVRvcFJlcXVlc3RPcHRpb24hPW51bGwpPyh0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb249PW51bGwpPzE6dGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uK3RoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uOm51bGx9fSxnZXRVUklRdWVyeU9wdGlvblZhbHVlOmZ1bmN0aW9uKFEpe3ZhciBzPW51bGw7c3dpdGNoKFEpe2Nhc2UiJHNlbGVjdCI6e3ZhciBTPSIiO3ZhciBlPXRoaXMuX29FbnRpdHlTZXQuZ2V0RW50aXR5VHlwZSgpO3ZhciBrPWUuZ2V0S2V5UHJvcGVydGllcygpO3ZhciBLPVtdO2lmKHRoaXMuX2JVc2VNYXN0ZXJEYXRhKXtmb3IodmFyIGk9LTEsYTthPWtbKytpXTspe1MrPShTPT0iIj8iIjoiLCIpK2E7dmFyIGI9ZS5nZXRUZXh0UHJvcGVydHlPZlByb3BlcnR5KGEpO2lmKGIpe2lmKHRoaXMuX29WYWx1ZVNldFJlc3VsdC50ZXh0PT10cnVlKVMrPSIsIitiLm5hbWU7Sy5wdXNoKGIubmFtZSl9fX1lbHNle1MrPShTPT0iIj8iIjoiLCIpK3RoaXMuX29EaW1lbnNpb24uZ2V0S2V5UHJvcGVydHkoKS5uYW1lO2lmKHRoaXMuX29WYWx1ZVNldFJlc3VsdC50ZXh0PT10cnVlJiZ0aGlzLl9vRGltZW5zaW9uLmdldFRleHRQcm9wZXJ0eSgpKVMrPShTPT0iIj8iIjoiLCIpK3RoaXMuX29EaW1lbnNpb24uZ2V0VGV4dFByb3BlcnR5KCkubmFtZX1pZih0aGlzLl9vVmFsdWVTZXRSZXN1bHQuYXR0cmlidXRlcyl7aWYodGhpcy5fYlVzZU1hc3RlckRhdGEpe3ZhciBBPWUuZ2V0UHJvcGVydGllcygpO2Zvcih2YXIgcCBpbiBBKXt2YXIgST1mYWxzZTtmb3IodmFyIGk9LTEsYTthPWtbKytpXTspe2lmKHA9PWEpe0k9dHJ1ZTticmVha319aWYoSSljb250aW51ZTtmb3IodmFyIGk9LTEsYztjPUtbKytpXTspe2lmKHA9PWMpe0k9dHJ1ZTticmVha319aWYoIUkpUys9IiwiK3B9fWVsc2V7dmFyIGQ9dGhpcy5fb0RpbWVuc2lvbi5nZXRBbGxBdHRyaWJ1dGVOYW1lcygpO2Zvcih2YXIgaT0tMSxmO2Y9ZFsrK2ldOyl7Uys9KFM9PSIiPyIiOiIsIikrdGhpcy5fb0RpbWVuc2lvbi5maW5kQXR0cmlidXRlQnlOYW1lKGYpLmdldE5hbWUoKX19fXM9KFM/UzpudWxsKTticmVha31jYXNlIiRmaWx0ZXIiOnt2YXIgRj1udWxsO2lmKHRoaXMuX29GaWx0ZXJFeHByZXNzaW9uKUY9dGhpcy5fb0ZpbHRlckV4cHJlc3Npb24uZ2V0VVJJRmlsdGVyT3B0aW9uVmFsdWUoKTtzPShGP0Y6bnVsbCk7YnJlYWt9Y2FzZSIkb3JkZXJieSI6e3ZhciBnPW51bGw7aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uKWc9dGhpcy5fb1NvcnRFeHByZXNzaW9uLmdldFVSSU9yZGVyQnlPcHRpb25WYWx1ZSgpO3M9KGc/ZzpudWxsKTticmVha31jYXNlIiR0b3AiOntpZih0aGlzLl9pVG9wUmVxdWVzdE9wdGlvbiE9PW51bGwpe3M9dGhpcy5faVRvcFJlcXVlc3RPcHRpb259YnJlYWt9Y2FzZSIkc2tpcCI6e3M9dGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uO2JyZWFrfWNhc2UiJGlubGluZWNvdW50Ijp7cz0odGhpcy5fYkluY2x1ZGVDb3VudD09dHJ1ZT8iYWxscGFnZXMiOm51bGwpO2JyZWFrfWRlZmF1bHQ6YnJlYWt9cmV0dXJuIHN9LGdldFVSSVRvRGltZW5zaW9uTWVtYmVyRW50aXR5U2V0OmZ1bmN0aW9uKHMpe3ZhciByPW51bGw7aWYoIXRoaXMuX2JVc2VNYXN0ZXJEYXRhJiZ0aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3Qpe3I9dGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0LmdldFVSSVRvUGFyYW1ldGVyaXphdGlvbkVudHJ5KHMpKyIvIit0aGlzLl9vRGltZW5zaW9uLmdldENvbnRhaW5pbmdRdWVyeVJlc3VsdCgpLmdldFBhcmFtZXRlcml6YXRpb24oKS5nZXROYXZpZ2F0aW9uUHJvcGVydHlUb1F1ZXJ5UmVzdWx0KCl9ZWxzZXtyPShzP3M6IiIpKyIvIit0aGlzLl9vRW50aXR5U2V0LmdldFFOYW1lKCl9cmV0dXJuIHJ9LGdldFVSSVRvRGltZW5zaW9uTWVtYmVyRW50cmllczpmdW5jdGlvbihzKXt2YXIgcj10aGlzLmdldFVSSVRvRGltZW5zaW9uTWVtYmVyRW50aXR5U2V0KHMpO3RoaXMuZ2V0RmlsdGVyRXhwcmVzc2lvbigpLmlzVmFsaWQoKTt2YXIgUz10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRzZWxlY3QiKTt2YXIgZj10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRmaWx0ZXIiKTt2YXIgYT10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRvcmRlcmJ5Iik7dmFyIHQ9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkdG9wIik7dmFyIGI9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkc2tpcCIpO3ZhciBpPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJGlubGluZWNvdW50Iik7dmFyIHU9cjt2YXIgUT1mYWxzZTtpZihTKXt1Kz0iPyRzZWxlY3Q9IitTO1E9dHJ1ZX1pZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbiYmZil7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZSB1Kz0iJiI7dSs9IiRmaWx0ZXI9IitmfWlmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbiYmYSl7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZSB1Kz0iJiI7dSs9IiRvcmRlcmJ5PSIrYX1pZih0aGlzLl9pVG9wUmVxdWVzdE9wdGlvbiYmdCl7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZXt1Kz0iJiJ9dSs9IiR0b3A9Iit0fWlmKHRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbiYmYil7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZXt1Kz0iJiJ9dSs9IiRza2lwPSIrYn1pZih0aGlzLl9iSW5jbHVkZUNvdW50JiZpKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJGlubGluZWNvdW50PSIraX1yZXR1cm4gdX0sX29EaW1lbnNpb246bnVsbCxfb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0Om51bGwsX29FbnRpdHlTZXQ6bnVsbCxfYlVzZU1hc3RlckRhdGE6ZmFsc2UsX29GaWx0ZXJFeHByZXNzaW9uOm51bGwsX29Tb3J0RXhwcmVzc2lvbjpudWxsLF9vVmFsdWVTZXRSZXN1bHQ6bnVsbCxfYkluY2x1ZGVDb3VudDpudWxsLF9pU2tpcFJlcXVlc3RPcHRpb246MCxfaVRvcFJlcXVlc3RPcHRpb246bnVsbH07cmV0dXJuIG99LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuQ291bnRNb2RlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLkNvdW50TW9kZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9Db3VudE1vZGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEM9e1JlcXVlc3Q6IlJlcXVlc3QiLElubGluZToiSW5saW5lIixCb3RoOiJCb3RoIixOb25lOiJOb25lIn07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkudGhpcmRwYXJ0eS5jYWphLWh0bWwtc2FuaXRpemVyJykpewovKiBDb3B5cmlnaHQgR29vZ2xlIEluYy4KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbmNlIFZlcnNpb24gMi4wCiAqIEF1dG9nZW5lcmF0ZWQgYXQgVHVlIE1heSAyMiAxMDoxODoyMSBQRFQgMjAxMgogKiBcQG92ZXJyaWRlcyB3aW5kb3cKICogXEBwcm92aWRlcyBjc3NTY2hlbWEsIENTU19QUk9QX0JJVF9RVUFOVElUWSwgQ1NTX1BST1BfQklUX0hBU0hfVkFMVUUsIENTU19QUk9QX0JJVF9ORUdBVElWRV9RVUFOVElUWSwgQ1NTX1BST1BfQklUX1FTVFJJTkdfQ09OVEVOVCwgQ1NTX1BST1BfQklUX1FTVFJJTkdfVVJMLCBDU1NfUFJPUF9CSVRfSElTVE9SWV9JTlNFTlNJVElWRSwgQ1NTX1BST1BfQklUX1pfSU5ERVgsIENTU19QUk9QX0JJVF9BTExPV0VEX0lOX0xJTksgKi8KdmFyIENTU19QUk9QX0JJVF9RVUFOVElUWT0xO3ZhciBDU1NfUFJPUF9CSVRfSEFTSF9WQUxVRT0yO3ZhciBDU1NfUFJPUF9CSVRfTkVHQVRJVkVfUVVBTlRJVFk9NDt2YXIgQ1NTX1BST1BfQklUX1FTVFJJTkdfQ09OVEVOVD04O3ZhciBDU1NfUFJPUF9CSVRfUVNUUklOR19VUkw9MTY7dmFyIENTU19QUk9QX0JJVF9ISVNUT1JZX0lOU0VOU0lUSVZFPTMyO3ZhciBDU1NfUFJPUF9CSVRfWl9JTkRFWD02NDt2YXIgQ1NTX1BST1BfQklUX0FMTE9XRURfSU5fTElOSz0xMjg7dmFyIGNzc1NjaGVtYT0oZnVuY3Rpb24oKXt2YXIgcz1bJ3JnYig/OlxcKFxccyooPzpcXGQrfDB8XFxkKyg/OlxcLlxcZCspPyUpXFxzKixcXHMqKD86XFxkK3wwfFxcZCsoPzpcXC5cXGQrKT8lKVxccyosXFxzKig/OlxcZCt8MHxcXGQrKD86XFwuXFxkKyk/JSl8YVxcKFxccyooPzpcXGQrfDB8XFxkKyg/OlxcLlxcZCspPyUpXFxzKixcXHMqKD86XFxkK3wwfFxcZCsoPzpcXC5cXGQrKT8lKVxccyosXFxzKig/OlxcZCt8MHxcXGQrKD86XFwuXFxkKyk/JSlcXHMqLFxccyooPzpcXGQrfDAoPzpcXC5cXGQrKT98XFwuXFxkK3wxKD86XFwuMCspP3wwfFxcZCsoPzpcXC5cXGQrKT8lKSkgKlxcKSddLGM9Wy9eICokL2ksUmVnRXhwKCdeICooPzpcXHMqJytzWzBdKyd8KD86XFxzKicrc1swXSsnKT8pKyAqJCcsJ2knKSxSZWdFeHAoJ14gKlxccyonK3NbMF0rJyAqJCcsJ2knKSxSZWdFeHAoJ14gKlxccyonK3NbMF0rJ1xccyonK3NbMF0rJyAqJCcsJ2knKV0sTD1bWydhbGljZWJsdWUnLCdhbnRpcXVld2hpdGUnLCdhcXVhJywnYXF1YW1hcmluZScsJ2F6dXJlJywnYmVpZ2UnLCdiaXNxdWUnLCdibGFjaycsJ2JsYW5jaGVkYWxtb25kJywnYmx1ZScsJ2JsdWV2aW9sZXQnLCdicm93bicsJ2J1cmx5d29vZCcsJ2NhZGV0Ymx1ZScsJ2NoYXJ0cmV1c2UnLCdjaG9jb2xhdGUnLCdjb3JhbCcsJ2Nvcm5mbG93ZXJibHVlJywnY29ybnNpbGsnLCdjcmltc29uJywnY3lhbicsJ2RhcmtibHVlJywnZGFya2N5YW4nLCdkYXJrZ29sZGVucm9kJywnZGFya2dyYXknLCdkYXJrZ3JlZW4nLCdkYXJra2hha2knLCdkYXJrbWFnZW50YScsJ2RhcmtvbGl2ZWdyZWVuJywnZGFya29yYW5nZScsJ2RhcmtvcmNoaWQnLCdkYXJrcmVkJywnZGFya3NhbG1vbicsJ2RhcmtzZWFncmVlbicsJ2RhcmtzbGF0ZWJsdWUnLCdkYXJrc2xhdGVncmF5JywnZGFya3R1cnF1b2lzZScsJ2Rhcmt2aW9sZXQnLCdkZWVwcGluaycsJ2RlZXBza3libHVlJywnZGltZ3JheScsJ2RvZGdlcmJsdWUnLCdmaXJlYnJpY2snLCdmbG9yYWx3aGl0ZScsJ2ZvcmVzdGdyZWVuJywnZnVjaHNpYScsJ2dhaW5zYm9ybycsJ2dob3N0d2hpdGUnLCdnb2xkJywnZ29sZGVucm9kJywnZ3JheScsJ2dyZWVuJywnZ3JlZW55ZWxsb3cnLCdob25leWRldycsJ2hvdHBpbmsnLCdpbmRpYW5yZWQnLCdpbmRpZ28nLCdpdm9yeScsJ2toYWtpJywnbGF2ZW5kZXInLCdsYXZlbmRlcmJsdXNoJywnbGF3bmdyZWVuJywnbGVtb25jaGlmZm9uJywnbGlnaHRibHVlJywnbGlnaHRjb3JhbCcsJ2xpZ2h0Y3lhbicsJ2xpZ2h0Z29sZGVucm9keWVsbG93JywnbGlnaHRncmVlbicsJ2xpZ2h0Z3JleScsJ2xpZ2h0cGluaycsJ2xpZ2h0c2FsbW9uJywnbGlnaHRzZWFncmVlbicsJ2xpZ2h0c2t5Ymx1ZScsJ2xpZ2h0c2xhdGVncmF5JywnbGlnaHRzdGVlbGJsdWUnLCdsaWdodHllbGxvdycsJ2xpbWUnLCdsaW1lZ3JlZW4nLCdsaW5lbicsJ21hZ2VudGEnLCdtYXJvb24nLCdtZWRpdW1hcXVhbWFyaW5lJywnbWVkaXVtYmx1ZScsJ21lZGl1bW9yY2hpZCcsJ21lZGl1bXB1cnBsZScsJ21lZGl1bXNlYWdyZWVuJywnbWVkaXVtc2xhdGVibHVlJywnbWVkaXVtc3ByaW5nZ3JlZW4nLCdtZWRpdW10dXJxdW9pc2UnLCdtZWRpdW12aW9sZXRyZWQnLCdtaWRuaWdodGJsdWUnLCdtaW50Y3JlYW0nLCdtaXN0eXJvc2UnLCdtb2NjYXNpbicsJ25hdmFqb3doaXRlJywnbmF2eScsJ29sZGxhY2UnLCdvbGl2ZScsJ29saXZlZHJhYicsJ29yYW5nZScsJ29yYW5nZXJlZCcsJ29yY2hpZCcsJ3BhbGVnb2xkZW5yb2QnLCdwYWxlZ3JlZW4nLCdwYWxldHVycXVvaXNlJywncGFsZXZpb2xldHJlZCcsJ3BhcGF5YXdoaXAnLCdwZWFjaHB1ZmYnLCdwZXJ1JywncGluaycsJ3BsdW0nLCdwb3dkZXJibHVlJywncHVycGxlJywncmVkJywncm9zeWJyb3duJywncm95YWxibHVlJywnc2FkZGxlYnJvd24nLCdzYWxtb24nLCdzYW5keWJyb3duJywnc2VhZ3JlZW4nLCdzZWFzaGVsbCcsJ3NpZW5uYScsJ3NpbHZlcicsJ3NreWJsdWUnLCdzbGF0ZWJsdWUnLCdzbGF0ZWdyYXknLCdzbm93Jywnc3ByaW5nZ3JlZW4nLCdzdGVlbGJsdWUnLCd0YW4nLCd0ZWFsJywndGhpc3RsZScsJ3RvbWF0bycsJ3R1cnF1b2lzZScsJ3Zpb2xldCcsJ3doZWF0Jywnd2hpdGUnLCd3aGl0ZXNtb2tlJywneWVsbG93JywneWVsbG93Z3JlZW4nXSxbJ2FsbC1zY3JvbGwnLCdjb2wtcmVzaXplJywnY3Jvc3NoYWlyJywnZGVmYXVsdCcsJ2UtcmVzaXplJywnaGFuZCcsJ2hlbHAnLCdtb3ZlJywnbi1yZXNpemUnLCduZS1yZXNpemUnLCduby1kcm9wJywnbm90LWFsbG93ZWQnLCdudy1yZXNpemUnLCdwb2ludGVyJywncHJvZ3Jlc3MnLCdyb3ctcmVzaXplJywncy1yZXNpemUnLCdzZS1yZXNpemUnLCdzdy1yZXNpemUnLCd0ZXh0JywndmVydGljYWwtdGV4dCcsJ3ctcmVzaXplJywnd2FpdCddLFsnLW1vei1pbmxpbmUtYm94JywnLW1vei1pbmxpbmUtc3RhY2snLCdibG9jaycsJ2lubGluZScsJ2lubGluZS1ibG9jaycsJ2lubGluZS10YWJsZScsJ2xpc3QtaXRlbScsJ3J1bi1pbicsJ3RhYmxlJywndGFibGUtY2FwdGlvbicsJ3RhYmxlLWNlbGwnLCd0YWJsZS1jb2x1bW4nLCd0YWJsZS1jb2x1bW4tZ3JvdXAnLCd0YWJsZS1mb290ZXItZ3JvdXAnLCd0YWJsZS1oZWFkZXItZ3JvdXAnLCd0YWJsZS1yb3cnLCd0YWJsZS1yb3ctZ3JvdXAnXSxbJ2FybWVuaWFuJywnY2lyY2xlJywnZGVjaW1hbCcsJ2RlY2ltYWwtbGVhZGluZy16ZXJvJywnZGlzYycsJ2dlb3JnaWFuJywnbG93ZXItYWxwaGEnLCdsb3dlci1ncmVlaycsJ2xvd2VyLWxhdGluJywnbG93ZXItcm9tYW4nLCdzcXVhcmUnLCd1cHBlci1hbHBoYScsJ3VwcGVyLWxhdGluJywndXBwZXItcm9tYW4nXSxbJzEwMCcsJzIwMCcsJzMwMCcsJzQwMCcsJzUwMCcsJzYwMCcsJzcwMCcsJzgwMCcsJzkwMCcsJ2JvbGQnLCdib2xkZXInLCdsaWdodGVyJ10sWydjb25kZW5zZWQnLCdleHBhbmRlZCcsJ2V4dHJhLWNvbmRlbnNlZCcsJ2V4dHJhLWV4cGFuZGVkJywnbmFycm93ZXInLCdzZW1pLWNvbmRlbnNlZCcsJ3NlbWktZXhwYW5kZWQnLCd1bHRyYS1jb25kZW5zZWQnLCd1bHRyYS1leHBhbmRlZCcsJ3dpZGVyJ10sWydiZWhpbmQnLCdjZW50ZXItbGVmdCcsJ2NlbnRlci1yaWdodCcsJ2Zhci1sZWZ0JywnZmFyLXJpZ2h0JywnbGVmdC1zaWRlJywnbGVmdHdhcmRzJywncmlnaHQtc2lkZScsJ3JpZ2h0d2FyZHMnXSxbJ2xhcmdlJywnbGFyZ2VyJywnc21hbGwnLCdzbWFsbGVyJywneC1sYXJnZScsJ3gtc21hbGwnLCd4eC1sYXJnZScsJ3h4LXNtYWxsJ10sWyctbW96LXByZS13cmFwJywnLW8tcHJlLXdyYXAnLCctcHJlLXdyYXAnLCdub3dyYXAnLCdwcmUnLCdwcmUtbGluZScsJ3ByZS13cmFwJ10sWydkYXNoZWQnLCdkb3R0ZWQnLCdkb3VibGUnLCdncm9vdmUnLCdvdXRzZXQnLCdyaWRnZScsJ3NvbGlkJ10sWydiYXNlbGluZScsJ21pZGRsZScsJ3N1YicsJ3N1cGVyJywndGV4dC1ib3R0b20nLCd0ZXh0LXRvcCddLFsnY2FwdGlvbicsJ2ljb24nLCdtZW51JywnbWVzc2FnZS1ib3gnLCdzbWFsbC1jYXB0aW9uJywnc3RhdHVzLWJhciddLFsnZmFzdCcsJ2Zhc3RlcicsJ3Nsb3cnLCdzbG93ZXInLCd4LWZhc3QnLCd4LXNsb3cnXSxbJ2Fib3ZlJywnYmVsb3cnLCdoaWdoZXInLCdsZXZlbCcsJ2xvd2VyJ10sWydib3JkZXItYm94JywnY29udGFpbicsJ2NvbnRlbnQtYm94JywnY292ZXInLCdwYWRkaW5nLWJveCddLFsnY3Vyc2l2ZScsJ2ZhbnRhc3knLCdtb25vc3BhY2UnLCdzYW5zLXNlcmlmJywnc2VyaWYnXSxbJ2xvdWQnLCdzaWxlbnQnLCdzb2Z0JywneC1sb3VkJywneC1zb2Z0J10sWyduby1yZXBlYXQnLCdyZXBlYXQteCcsJ3JlcGVhdC15Jywncm91bmQnLCdzcGFjZSddLFsnYmxpbmsnLCdsaW5lLXRocm91Z2gnLCdvdmVybGluZScsJ3VuZGVybGluZSddLFsnaGlnaCcsJ2xvdycsJ3gtaGlnaCcsJ3gtbG93J10sWydhYnNvbHV0ZScsJ3JlbGF0aXZlJywnc3RhdGljJ10sWydjYXBpdGFsaXplJywnbG93ZXJjYXNlJywndXBwZXJjYXNlJ10sWydjaGlsZCcsJ2ZlbWFsZScsJ21hbGUnXSxbJ2JpZGktb3ZlcnJpZGUnLCdlbWJlZCddLFsnYm90dG9tJywndG9wJ10sWydjbGlwJywnZWxsaXBzaXMnXSxbJ2NvbnRpbnVvdXMnLCdkaWdpdHMnXSxbJ2hpZGUnLCdzaG93J10sWydpbnNpZGUnLCdvdXRzaWRlJ10sWydpdGFsaWMnLCdvYmxpcXVlJ10sWydsZWZ0JywncmlnaHQnXSxbJ2x0cicsJ3J0bCddLFsnbm8tY29udGVudCcsJ25vLWRpc3BsYXknXSxbJ3N1cHByZXNzJywndW5yZXN0cmljdGVkJ10sWyd0aGljaycsJ3RoaW4nXSxbJywnXSxbJy8nXSxbJ2Fsd2F5cyddLFsnYXV0byddLFsnYXZvaWQnXSxbJ2JvdGgnXSxbJ2JyZWFrLXdvcmQnXSxbJ2NlbnRlciddLFsnY29kZSddLFsnY29sbGFwc2UnXSxbJ2ZpeGVkJ10sWydoaWRkZW4nXSxbJ2luaGVyaXQnXSxbJ2luc2V0J10sWydpbnZlcnQnXSxbJ2p1c3RpZnknXSxbJ2xvY2FsJ10sWydtZWRpdW0nXSxbJ21peCddLFsnbm9uZSddLFsnbm9ybWFsJ10sWydvbmNlJ10sWydyZXBlYXQnXSxbJ3Njcm9sbCddLFsnc2VwYXJhdGUnXSxbJ3NtYWxsLWNhcHMnXSxbJ3NwZWxsLW91dCddLFsndHJhbnNwYXJlbnQnXSxbJ3Zpc2libGUnXV07cmV0dXJueyctbW96LWJvcmRlci1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzZdXX0sJy1tb3otYm9yZGVyLXJhZGl1cy1ib3R0b21sZWZ0Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy1tb3otYm9yZGVyLXJhZGl1cy1ib3R0b21yaWdodCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctbW96LWJvcmRlci1yYWRpdXMtdG9wbGVmdCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctbW96LWJvcmRlci1yYWRpdXMtdG9wcmlnaHQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLW1vei1ib3gtc2hhZG93Jzp7J2Nzc0V4dHJhJzpjWzFdLCdjc3NBbHRlcm5hdGVzJzpbJ2JveFNoYWRvdyddLCdjc3NQcm9wQml0cyc6NywnY3NzTGl0R3JvdXAnOltMWzBdLExbMzVdLExbNDhdLExbNTRdXX0sJy1tb3otb3BhY2l0eSc6eydjc3NQcm9wQml0cyc6MSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCctbW96LW91dGxpbmUnOnsnY3NzRXh0cmEnOmNbM10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFs5XSxMWzM0XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzQ5XSxMWzUyXSxMWzU0XV19LCctbW96LW91dGxpbmUtY29sb3InOnsnY3NzRXh0cmEnOmNbMl0sJ2Nzc1Byb3BCaXRzJzoyLCdjc3NMaXRHcm91cCc6W0xbMF0sTFs0N10sTFs0OV1dfSwnLW1vei1vdXRsaW5lLXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbOV0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1NF1dfSwnLW1vei1vdXRsaW5lLXdpZHRoJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzRdLExbNDddLExbNTJdXX0sJy1vLXRleHQtb3ZlcmZsb3cnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFsyNV1dfSwnLXdlYmtpdC1ib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy13ZWJraXQtYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLXdlYmtpdC1ib3JkZXItcmFkaXVzJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM2XV19LCctd2Via2l0LWJvcmRlci1yYWRpdXMtYm90dG9tLWxlZnQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLXdlYmtpdC1ib3JkZXItcmFkaXVzLWJvdHRvbS1yaWdodCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJvcmRlci1yYWRpdXMtdG9wLWxlZnQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLXdlYmtpdC1ib3JkZXItcmFkaXVzLXRvcC1yaWdodCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJvcmRlci10b3AtbGVmdC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLXdlYmtpdC1ib3JkZXItdG9wLXJpZ2h0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJveC1zaGFkb3cnOnsnY3NzRXh0cmEnOmNbMV0sJ2Nzc0FsdGVybmF0ZXMnOlsnYm94U2hhZG93J10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFszNV0sTFs0OF0sTFs1NF1dfSwnYXppbXV0aCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzZdLExbMzBdLExbNDJdLExbNDddXX0sJ2JhY2tncm91bmQnOnsnY3NzRXh0cmEnOlJlZ0V4cCgnXiAqKD86XFxzKicrc1swXSsnKXswLDJ9ICokJywnaScpLCdjc3NQcm9wQml0cyc6MjMsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzE0XSxMWzE3XSxMWzI0XSxMWzMwXSxMWzM1XSxMWzM2XSxMWzM4XSxMWzQyXSxMWzQ1XSxMWzQ3XSxMWzUxXSxMWzU0XSxMWzU3XSxMWzU4XSxMWzYyXV19LCdiYWNrZ3JvdW5kLWF0dGFjaG1lbnQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzVdLExbNDVdLExbNTFdLExbNThdXX0sJ2JhY2tncm91bmQtY29sb3InOnsnY3NzRXh0cmEnOmNbMl0sJ2Nzc1Byb3BCaXRzJzoxMzAsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XSxMWzYyXV19LCdiYWNrZ3JvdW5kLWltYWdlJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFszNV0sTFs1NF1dfSwnYmFja2dyb3VuZC1wb3NpdGlvbic6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFsyNF0sTFszMF0sTFszNV0sTFs0Ml1dfSwnYmFja2dyb3VuZC1yZXBlYXQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMTddLExbMzVdLExbNTddXX0sJ2JvcmRlcic6eydjc3NFeHRyYSc6Y1szXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzldLExbMzRdLExbNDZdLExbNDddLExbNDhdLExbNTJdLExbNTRdLExbNjJdXX0sJ2JvcmRlci1ib3R0b20nOnsnY3NzRXh0cmEnOmNbM10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFs5XSxMWzM0XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzUyXSxMWzU0XSxMWzYyXV19LCdib3JkZXItYm90dG9tLWNvbG9yJzp7J2Nzc0V4dHJhJzpjWzJdLCdjc3NQcm9wQml0cyc6MiwnY3NzTGl0R3JvdXAnOltMWzBdLExbNDddLExbNjJdXX0sJ2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnYm9yZGVyLWJvdHRvbS1zdHlsZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzldLExbNDZdLExbNDddLExbNDhdLExbNTRdXX0sJ2JvcmRlci1ib3R0b20td2lkdGgnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNF0sTFs0N10sTFs1Ml1dfSwnYm9yZGVyLWNvbGxhcHNlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbNDRdLExbNDddLExbNTldXX0sJ2JvcmRlci1jb2xvcic6eydjc3NFeHRyYSc6UmVnRXhwKCdeICooPzpcXHMqJytzWzBdKycpezEsNH0gKiQnLCdpJyksJ2Nzc1Byb3BCaXRzJzoyLCdjc3NMaXRHcm91cCc6W0xbMF0sTFs0N10sTFs2Ml1dfSwnYm9yZGVyLWxlZnQnOnsnY3NzRXh0cmEnOmNbM10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFs5XSxMWzM0XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzUyXSxMWzU0XSxMWzYyXV19LCdib3JkZXItbGVmdC1jb2xvcic6eydjc3NFeHRyYSc6Y1syXSwnY3NzUHJvcEJpdHMnOjIsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XSxMWzYyXV19LCdib3JkZXItbGVmdC1zdHlsZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzldLExbNDZdLExbNDddLExbNDhdLExbNTRdXX0sJ2JvcmRlci1sZWZ0LXdpZHRoJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzRdLExbNDddLExbNTJdXX0sJ2JvcmRlci1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzZdXX0sJ2JvcmRlci1yaWdodCc6eydjc3NFeHRyYSc6Y1szXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzldLExbMzRdLExbNDZdLExbNDddLExbNDhdLExbNTJdLExbNTRdLExbNjJdXX0sJ2JvcmRlci1yaWdodC1jb2xvcic6eydjc3NFeHRyYSc6Y1syXSwnY3NzUHJvcEJpdHMnOjIsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XSxMWzYyXV19LCdib3JkZXItcmlnaHQtc3R5bGUnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs5XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzU0XV19LCdib3JkZXItcmlnaHQtd2lkdGgnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNF0sTFs0N10sTFs1Ml1dfSwnYm9yZGVyLXNwYWNpbmcnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ2JvcmRlci1zdHlsZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzldLExbNDZdLExbNDddLExbNDhdLExbNTRdXX0sJ2JvcmRlci10b3AnOnsnY3NzRXh0cmEnOmNbM10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFs5XSxMWzM0XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzUyXSxMWzU0XSxMWzYyXV19LCdib3JkZXItdG9wLWNvbG9yJzp7J2Nzc0V4dHJhJzpjWzJdLCdjc3NQcm9wQml0cyc6MiwnY3NzTGl0R3JvdXAnOltMWzBdLExbNDddLExbNjJdXX0sJ2JvcmRlci10b3AtbGVmdC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnYm9yZGVyLXRvcC1yaWdodC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnYm9yZGVyLXRvcC1zdHlsZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzldLExbNDZdLExbNDddLExbNDhdLExbNTRdXX0sJ2JvcmRlci10b3Atd2lkdGgnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNF0sTFs0N10sTFs1Ml1dfSwnYm9yZGVyLXdpZHRoJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzRdLExbNDddLExbNTJdXX0sJ2JvdHRvbSc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdib3gtc2hhZG93Jzp7J2Nzc0V4dHJhJzpjWzFdLCdjc3NQcm9wQml0cyc6NywnY3NzTGl0R3JvdXAnOltMWzBdLExbMzVdLExbNDhdLExbNTRdXX0sJ2NhcHRpb24tc2lkZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzI0XSxMWzQ3XV19LCdjbGVhcic6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzMwXSxMWzQwXSxMWzQ3XSxMWzU0XV19LCdjbGlwJzp7J2Nzc0V4dHJhJzovXiAqXHMqcmVjdFwoXHMqKD86MHxbK1wtXT9cZCsoPzpcLlxkKyk/KD86W2NlbV1tfGV4fGlufHBbY3R4XSl8YXV0bylccyosXHMqKD86MHxbK1wtXT9cZCsoPzpcLlxkKyk/KD86W2NlbV1tfGV4fGlufHBbY3R4XSl8YXV0bylccyosXHMqKD86MHxbK1wtXT9cZCsoPzpcLlxkKyk/KD86W2NlbV1tfGV4fGlufHBbY3R4XSl8YXV0bylccyosXHMqKD86MHxbK1wtXT9cZCsoPzpcLlxkKyk/KD86W2NlbV1tfGV4fGlufHBbY3R4XSl8YXV0bykgKlwpICokL2ksJ2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ2NvbG9yJzp7J2Nzc0V4dHJhJzpjWzJdLCdjc3NQcm9wQml0cyc6MTMwLCdjc3NMaXRHcm91cCc6W0xbMF0sTFs0N11dfSwnY29udGVudCc6eydjc3NQcm9wQml0cyc6MH0sJ2NvdW50ZXItaW5jcmVtZW50Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU0XV19LCdjb3VudGVyLXJlc2V0Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU0XV19LCdjdWUnOnsnY3NzUHJvcEJpdHMnOjE2LCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTRdXX0sJ2N1ZS1hZnRlcic6eydjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NF1dfSwnY3VlLWJlZm9yZSc6eydjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NF1dfSwnY3Vyc29yJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6MTQ0LCdjc3NMaXRHcm91cCc6W0xbMV0sTFszNV0sTFszOF0sTFs0N11dfSwnZGlyZWN0aW9uJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzFdLExbNDddXX0sJ2Rpc3BsYXknOnsnY3NzUHJvcEJpdHMnOjMyLCdjc3NMaXRHcm91cCc6W0xbMl0sTFs0N10sTFs1NF1dfSwnZWxldmF0aW9uJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMTNdLExbNDddXX0sJ2VtcHR5LWNlbGxzJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjddLExbNDddXX0sJ2ZpbHRlcic6eydjc3NFeHRyYSc6L14gKig/OlxzKmFscGhhXChccypvcGFjaXR5XHMqPVxzKig/OjB8XGQrKD86XC5cZCspPyV8WytcLV0/XGQrKD86XC5cZCspPykgKlwpKSsgKiQvaSwnY3NzUHJvcEJpdHMnOjMyfSwnZmxvYXQnOnsnY3NzQWx0ZXJuYXRlcyc6Wydjc3NGbG9hdCcsJ3N0eWxlRmxvYXQnXSwnY3NzUHJvcEJpdHMnOjMyLCdjc3NMaXRHcm91cCc6W0xbMzBdLExbNDddLExbNTRdXX0sJ2ZvbnQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo5LCdjc3NMaXRHcm91cCc6W0xbNF0sTFs3XSxMWzExXSxMWzE1XSxMWzI5XSxMWzM1XSxMWzM2XSxMWzQ3XSxMWzUyXSxMWzU1XSxMWzYwXV19LCdmb250LWZhbWlseSc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjgsJ2Nzc0xpdEdyb3VwJzpbTFsxNV0sTFszNV0sTFs0N11dfSwnZm9udC1zaXplJzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbN10sTFs0N10sTFs1Ml1dfSwnZm9udC1zdHJldGNoJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbNV0sTFs1NV1dfSwnZm9udC1zdHlsZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzI5XSxMWzQ3XSxMWzU1XV19LCdmb250LXZhcmlhbnQnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NV0sTFs2MF1dfSwnZm9udC13ZWlnaHQnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs0XSxMWzQ3XSxMWzU1XV19LCdoZWlnaHQnOnsnY3NzUHJvcEJpdHMnOjM3LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ2xlZnQnOnsnY3NzUHJvcEJpdHMnOjM3LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ2xldHRlci1zcGFjaW5nJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTVdXX0sJ2xpbmUtaGVpZ2h0Jzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTVdXX0sJ2xpc3Qtc3R5bGUnOnsnY3NzUHJvcEJpdHMnOjE2LCdjc3NMaXRHcm91cCc6W0xbM10sTFsyOF0sTFs0N10sTFs1NF1dfSwnbGlzdC1zdHlsZS1pbWFnZSc6eydjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NF1dfSwnbGlzdC1zdHlsZS1wb3NpdGlvbic6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzI4XSxMWzQ3XV19LCdsaXN0LXN0eWxlLXR5cGUnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszXSxMWzQ3XSxMWzU0XV19LCdtYXJnaW4nOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnbWFyZ2luLWJvdHRvbSc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdtYXJnaW4tbGVmdCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdtYXJnaW4tcmlnaHQnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnbWFyZ2luLXRvcCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdtYXgtaGVpZ2h0Jzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddLExbNTRdXX0sJ21heC13aWR0aCc6eydjc3NQcm9wQml0cyc6MSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XSxMWzU0XV19LCdtaW4taGVpZ2h0Jzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ21pbi13aWR0aCc6eydjc3NQcm9wQml0cyc6MSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdvcGFjaXR5Jzp7J2Nzc1Byb3BCaXRzJzozMywnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdvdXRsaW5lJzp7J2Nzc0V4dHJhJzpjWzNdLCdjc3NQcm9wQml0cyc6NywnY3NzTGl0R3JvdXAnOltMWzBdLExbOV0sTFszNF0sTFs0Nl0sTFs0N10sTFs0OF0sTFs0OV0sTFs1Ml0sTFs1NF1dfSwnb3V0bGluZS1jb2xvcic6eydjc3NFeHRyYSc6Y1syXSwnY3NzUHJvcEJpdHMnOjIsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XSxMWzQ5XV19LCdvdXRsaW5lLXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbOV0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1NF1dfSwnb3V0bGluZS13aWR0aCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM0XSxMWzQ3XSxMWzUyXV19LCdvdmVyZmxvdyc6eydjc3NQcm9wQml0cyc6MzIsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0Nl0sTFs0N10sTFs1OF0sTFs2M11dfSwnb3ZlcmZsb3cteCc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzMyXSxMWzM4XSxMWzQ2XSxMWzU4XSxMWzYzXV19LCdvdmVyZmxvdy15Jzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzJdLExbMzhdLExbNDZdLExbNThdLExbNjNdXX0sJ3BhZGRpbmcnOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGFkZGluZy1ib3R0b20nOnsnY3NzUHJvcEJpdHMnOjMzLCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ3BhZGRpbmctbGVmdCc6eydjc3NQcm9wQml0cyc6MzMsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGFkZGluZy1yaWdodCc6eydjc3NQcm9wQml0cyc6MzMsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGFkZGluZy10b3AnOnsnY3NzUHJvcEJpdHMnOjMzLCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ3BhZ2UtYnJlYWstYWZ0ZXInOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszMF0sTFszN10sTFszOF0sTFszOV0sTFs0N11dfSwncGFnZS1icmVhay1iZWZvcmUnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszMF0sTFszN10sTFszOF0sTFszOV0sTFs0N11dfSwncGFnZS1icmVhay1pbnNpZGUnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFszOV0sTFs0N11dfSwncGF1c2UnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGF1c2UtYWZ0ZXInOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGF1c2UtYmVmb3JlJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ3BpdGNoJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMTldLExbNDddLExbNTJdXX0sJ3BpdGNoLXJhbmdlJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ3BsYXktZHVyaW5nJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N10sTFs1M10sTFs1NF0sTFs1N11dfSwncG9zaXRpb24nOnsnY3NzUHJvcEJpdHMnOjMyLCdjc3NMaXRHcm91cCc6W0xbMjBdLExbNDddXX0sJ3F1b3Rlcyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NF1dfSwncmljaG5lc3MnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncmlnaHQnOnsnY3NzUHJvcEJpdHMnOjM3LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ3NwZWFrJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTRdLExbNTVdLExbNjFdXX0sJ3NwZWFrLWhlYWRlcic6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzM3XSxMWzQ3XSxMWzU2XV19LCdzcGVhay1udW1lcmFsJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjZdLExbNDddXX0sJ3NwZWFrLXB1bmN0dWF0aW9uJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbNDNdLExbNDddLExbNTRdXX0sJ3NwZWVjaC1yYXRlJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMTJdLExbNDddLExbNTJdXX0sJ3N0cmVzcyc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCd0YWJsZS1sYXlvdXQnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0NV0sTFs0N11dfSwndGV4dC1hbGlnbic6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzMwXSxMWzQyXSxMWzQ3XSxMWzUwXV19LCd0ZXh0LWRlY29yYXRpb24nOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFsxOF0sTFs0N10sTFs1NF1dfSwndGV4dC1pbmRlbnQnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwndGV4dC1vdmVyZmxvdyc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzI1XV19LCd0ZXh0LXNoYWRvdyc6eydjc3NFeHRyYSc6Y1sxXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzM1XSxMWzQ4XSxMWzU0XV19LCd0ZXh0LXRyYW5zZm9ybSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzIxXSxMWzQ3XSxMWzU0XV19LCd0ZXh0LXdyYXAnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszM10sTFs1NF0sTFs1NV1dfSwndG9wJzp7J2Nzc1Byb3BCaXRzJzozNywnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCd1bmljb2RlLWJpZGknOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFsyM10sTFs0N10sTFs1NV1dfSwndmVydGljYWwtYWxpZ24nOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFsxMF0sTFsyNF0sTFs0N11dfSwndmlzaWJpbGl0eSc6eydjc3NQcm9wQml0cyc6MzIsJ2Nzc0xpdEdyb3VwJzpbTFs0NF0sTFs0Nl0sTFs0N10sTFs2M11dfSwndm9pY2UtZmFtaWx5Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6OCwnY3NzTGl0R3JvdXAnOltMWzIyXSxMWzM1XSxMWzQ3XV19LCd2b2x1bWUnOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFsxNl0sTFs0N10sTFs1Ml1dfSwnd2hpdGUtc3BhY2UnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs4XSxMWzQ3XSxMWzU1XV19LCd3aWR0aCc6eydjc3NQcm9wQml0cyc6MzMsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnd29yZC1zcGFjaW5nJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTVdXX0sJ3dvcmQtd3JhcCc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzQxXSxMWzU1XV19LCd6LWluZGV4Jzp7J2Nzc1Byb3BCaXRzJzo2OSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCd6b29tJzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbNTVdXX19fSkoKTtpZih0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcpe3dpbmRvd1snY3NzU2NoZW1hJ109Y3NzU2NoZW1hfQovLyBDb3B5cmlnaHQgKEMpIDIwMTEgR29vZ2xlIEluYy4KLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7Ci8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0Ci8vICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCnZhciBsZXhDc3M7dmFyIGRlY29kZUNzczsoZnVuY3Rpb24oKXtmdW5jdGlvbiBkKHMpe3ZhciBpPXBhcnNlSW50KHMuc3Vic3RyaW5nKDEpLDE2KTtpZihpPjB4ZmZmZil7cmV0dXJuIGktPTB4MTAwMDAsU3RyaW5nLmZyb21DaGFyQ29kZSgweGQ4MDArKGk+PjEwKSwweGRjMDArKGkmMHgzRkYpKX1lbHNlIGlmKGk9PWkpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpfWVsc2UgaWYoc1sxXTwnICcpe3JldHVybicnfWVsc2V7cmV0dXJuIHNbMV19fWZ1bmN0aW9uIGUocyxpKXtyZXR1cm4nIicrcy5yZXBsYWNlKC9bXHUwMDAwLVx1MDAxZlxcXCI8Pl0vZyxpKSsnIid9ZnVuY3Rpb24gYShpKXtyZXR1cm4gY1tpXXx8KGNbaV09J1xcJytpLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKycgJyl9ZnVuY3Rpb24gYihpKXtyZXR1cm4gZltpXXx8KGZbaV09KGk8J1x4MTAnPyclMCc6JyUnKStpLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKX12YXIgYz17J1xcJzonXFxcXCd9O3ZhciBmPXsnXFwnOiclNWMnfTt2YXIgZz0nW1xcdFxcblxcZiBdJzt2YXIgVz1nKycqJzt2YXIgTj0nW1xcblxcZl0nO3ZhciBoPSdbXFx1ZDgwMC1cXHVkYmZmXVtcXHVkYzAwLVxcdWRmZmZdJzt2YXIgaz0nW1xcdTAwODAtXFx1ZDdmZlxcdWUwMDAtXFx1ZmZmZF18JytoO3ZhciBVPSdbMC05YS1mQS1GXXsxLDZ9JytnKyc/Jzt2YXIgbD0nXFxcXCcrVTt2YXIgRT0nKD86JytVKyd8W1xcdTAwMjAtXFx1MDA3ZVxcdTAwODAtXFx1ZDdmZlxcdWUwMDBcXHVmZmZkXXwnK2grJyknO3ZhciBtPSdcXFxcJytFO3ZhciBvPScoPzpbXFx0XFx4MjFcXHgyMy1cXHgyNlxceDI4LVxceDViXFx4NWQtXFx4N2VdfCcraysnfCcrbSsnKSc7dmFyIHA9J1teXCciXFxuXFxmXFxcXF18XFxcXFtcXHNcXFNdJzt2YXIgcT0nIig/OlwnfCcrcCsnKSoiJysnfFwnKD86XCJ8JytwKycpKlwnJzt2YXIgcj0nWy0rXT8oPzpbMC05XSsoPzpbLl1bMC05XSspP3xbLl1bMC05XSspJzt2YXIgdD0nKD86W2EtekEtWl9dfCcraysnfCcrbSsnKSc7dmFyIHU9Jyg/OlthLXpBLVowLTlfLV18JytrKyd8JyttKycpJzt2YXIgdj11KycrJzt2YXIgST0nLT8nK3QrdSsnKic7dmFyIEE9J0AnK0k7dmFyIEg9JyMnK3Y7dmFyIHc9cjt2YXIgeD0nKD86QD8tPycrdCsnfCMpJyt1KycqJzt2YXIgUD1yKyclJzt2YXIgRD1yK0k7dmFyIHk9cisnKD86JXwnK0krJyk/Jzt2YXIgej0ndXJsWyhdJytXKycoPzonK3ErJ3wnK28rJyopJytXKydbKV0nO3ZhciBCPSdVWytdWzAtOUEtRj9dezEsNn0oPzotWzAtOUEtRl17MSw2fSk/Jzt2YXIgQz0nPFwhLS0nO3ZhciBGPSctLT4nO3ZhciBTPWcrJysnO3ZhciBHPScvKD86WypdW14qXSpbKl0rKD86W14vXVteKl0qWypdKykqL3wvW15cXG5cXGZdKiknO3ZhciBKPScoPyF1cmxbKF0pJytJKydbKF0nO3ZhciBLPSd+PSc7dmFyIEw9J1t8XT0nO3ZhciBNPSdbXl09Jzt2YXIgTz0nWyRdPSc7dmFyIFE9J1sqXT0nO3ZhciBSPSdbfnxeJCpdPSc7dmFyIFQ9J1teIlwnXFxcXC9dfC8oPyFbLypdKSc7dmFyIFY9J1xcdUZFRkYnO3ZhciBYPW5ldyBSZWdFeHAoW1YsQix6LEoseCxxLHksQyxGLFMsRyxSLFRdLmpvaW4oInwiKSwnZ2knKTtkZWNvZGVDc3M9ZnVuY3Rpb24oaSl7cmV0dXJuIGkucmVwbGFjZShuZXcgUmVnRXhwKCdcXFxcKD86JytFKyd8JytOKycpJywnZycpLGQpfTtsZXhDc3M9ZnVuY3Rpb24ocyl7cz0nJytzO3ZhciBZPXMucmVwbGFjZSgvXHJcbj8vZywnXG4nKS5tYXRjaChYKXx8W107dmFyIGo9MDt2YXIgWj0nICc7Zm9yKHZhciBpPTAsbj1ZLmxlbmd0aDtpPG47KytpKXt2YXIgJD1kZWNvZGVDc3MoWVtpXSk7dmFyIF89JC5sZW5ndGg7dmFyIGNjPSQuY2hhckNvZGVBdCgwKTskPShjYz09JyInLmNoYXJDb2RlQXQoMCl8fGNjPT0nXCcnLmNoYXJDb2RlQXQoMCkpP2UoJC5zdWJzdHJpbmcoMSxfLTEpLGEpOihjYz09Jy8nLmNoYXJDb2RlQXQoMCkmJl8+MXx8JD09J1xcJ3x8JD09Rnx8JD09Q3x8JD09J1x1ZmVmZid8fGNjPD0nICcuY2hhckNvZGVBdCgwKSk/JyAnOi91cmxcKC9pLnRlc3QoJCk/J3VybCgnK2UoJC5yZXBsYWNlKG5ldyBSZWdFeHAoJ151cmxcXCgnK1crJ1siXCddP3xbIlwnXT8nK1crJ1xcKSQnLCdnaScpLCcnKSxiKSsnKSc6JDtpZihaIT0kfHwkIT0nICcpe1lbaisrXT1aPSR9fVkubGVuZ3RoPWo7cmV0dXJuIFl9fSkoKTtpZih0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcpe3dpbmRvd1snbGV4Q3NzJ109bGV4Q3NzO3dpbmRvd1snZGVjb2RlQ3NzJ109ZGVjb2RlQ3NzfQovLyBDb3B5cmlnaHQgKEMpIDIwMTEgR29vZ2xlIEluYy4KLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7Ci8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0Ci8vICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCnZhciBzYW5pdGl6ZUNzc1Byb3BlcnR5PShmdW5jdGlvbigpe3ZhciBOPSd1cmwoImFib3V0OmJsYW5rIiknO3ZhciBhPS9bXG5cZlxyXCJcJygpKjw+XS9nO3ZhciBiPXsnXG4nOiclMGEnLCdcZic6JyUwYycsJ1xyJzonJTBkJywnIic6JyUyMicsJ1wnJzonJTI3JywnKCc6JyUyOCcsJyknOiclMjknLCcqJzonJTJhJywnPCc6JyUzYycsJz4nOiclM2UnfTtmdW5jdGlvbiBjKHMpe2lmKCdzdHJpbmcnPT09dHlwZW9mIHMpe3JldHVybid1cmwoIicrcy5yZXBsYWNlKGEsZCkrJyIpJ31lbHNle3JldHVybiBOfX1mdW5jdGlvbiBkKGgpe3JldHVybiBiW2hdfXZhciBVPW5ldyBSZWdFeHAoJ14nKycoPzonKycoW146XC8/IyBdKyknKyc6KT8nKTt2YXIgQT0vXig/Omh0dHBzP3xtYWlsdG8pJC9pO2Z1bmN0aW9uIGUoaCxwLG4pe2lmKCFuKXtyZXR1cm4gbnVsbH12YXIgaT0oJycraCkubWF0Y2goVSk7aWYoaSYmKCFpWzFdfHxBLnRlc3QoaVsxXSkpKXtyZXR1cm4gbihoLHApfWVsc2V7cmV0dXJuIG51bGx9fWZ1bmN0aW9uIHUoaCl7dmFyIG09e307Zm9yKHZhciBpPWgubGVuZ3RoOy0taT49MDspe3ZhciBrPWhbaV07Zm9yKHZhciBqPWsubGVuZ3RoOy0taj49MDspe21ba1tqXV09Z319cmV0dXJuIG19ZnVuY3Rpb24gZih0LHMpe3ZhciBwPTEsaD1zKzEsbj10Lmxlbmd0aDt3aGlsZShoPG4mJnApe3ZhciBpPXRbaCsrXTtwKz0oaT09PScoJz8xOmk9PT0nKSc/LTE6MCl9cmV0dXJuIGh9dmFyIGc9e307cmV0dXJuIGZ1bmN0aW9uKHAsaCx0LG8pe3ZhciBqPWguY3NzUHJvcEJpdHM7dmFyIHE9aiYoQ1NTX1BST1BfQklUX1FTVFJJTkdfQ09OVEVOVHxDU1NfUFJPUF9CSVRfUVNUUklOR19VUkwpO3ZhciBsPU5hTjt2YXIgaT0wLGs9MDtmb3IoO2k8dC5sZW5ndGg7KytpKXt2YXIgbT10W2ldLnRvTG93ZXJDYXNlKCk7dmFyIG49bS5jaGFyQ29kZUF0KDApLHIscyx2LHcseDt2YXIgeSx6O209KChuPT09JyAnLmNoYXJDb2RlQXQoMCkpPycnOihuPT09JyInLmNoYXJDb2RlQXQoMCkpPygocT09PUNTU19QUk9QX0JJVF9RU1RSSU5HX1VSTCYmbyk/KGMoZShkZWNvZGVDc3ModFtpXS5zdWJzdHJpbmcoMSxtLmxlbmd0aC0xKSkscCxvKSkpOihxPT09Q1NTX1BST1BfQklUX1FTVFJJTkdfQ09OVEVOVCk/bTonJyk6KG49PT0nIycuY2hhckNvZGVBdCgwKSYmL14jKD86WzAtOWEtZl17M30pezEsMn0kLy50ZXN0KG0pKT8oaiZDU1NfUFJPUF9CSVRfSEFTSF9WQUxVRT9tOicnKTooJzAnLmNoYXJDb2RlQXQoMCk8PW4mJm48PSc5Jy5jaGFyQ29kZUF0KDApKT8oKGomQ1NTX1BST1BfQklUX1FVQU5USVRZKT8oKGomQ1NTX1BST1BfQklUX1pfSU5ERVgpPyhtLm1hdGNoKC9eXGR7MSw3fSQvKT9tOicnKTptKTonJyk6KHI9bS5jaGFyQ29kZUF0KDEpLHM9bS5jaGFyQ29kZUF0KDIpLHY9JzAnLmNoYXJDb2RlQXQoMCk8PXImJnI8PSc5Jy5jaGFyQ29kZUF0KDApLHc9JzAnLmNoYXJDb2RlQXQoMCk8PXMmJnM8PSc5Jy5jaGFyQ29kZUF0KDApLChuPT09JysnLmNoYXJDb2RlQXQoMCkmJih2fHwocj09PScuJy5jaGFyQ29kZUF0KDApJiZ3KSkpKT8oKGomQ1NTX1BST1BfQklUX1FVQU5USVRZKT8oKGomQ1NTX1BST1BfQklUX1pfSU5ERVgpPyhtLm1hdGNoKC9eXCtcZHsxLDd9JC8pP206JycpOigodj8nJzonMCcpK20uc3Vic3RyaW5nKDEpKSk6JycpOihuPT09Jy0nLmNoYXJDb2RlQXQoMCkmJih2fHwocj09PScuJy5jaGFyQ29kZUF0KDApJiZ3KSkpPygoaiZDU1NfUFJPUF9CSVRfTkVHQVRJVkVfUVVBTlRJVFkpPygoaiZDU1NfUFJPUF9CSVRfWl9JTkRFWCk/KG0ubWF0Y2goL15cLVxkezEsN30kLyk/bTonJyk6KCh2PyctJzonLTAnKSttLnN1YnN0cmluZygxKSkpOigoaiZDU1NfUFJPUF9CSVRfUVVBTlRJVFkpPycwJzonJykpOihuPT09Jy4nLmNoYXJDb2RlQXQoMCkmJnYpPygoaiZDU1NfUFJPUF9CSVRfUVVBTlRJVFkpPycwJyttOicnKTooJ3VybCgnPT09bS5zdWJzdHJpbmcoMCw0KSk/KChvJiYocSZDU1NfUFJPUF9CSVRfUVNUUklOR19VUkwpKT9jKGUodFtpXS5zdWJzdHJpbmcoNSxtLmxlbmd0aC0yKSxwLG8pKTonJyk6KChtLmNoYXJBdChtLmxlbmd0aC0xKT09PScoJykmJih4PWYodCxpKSx0LnNwbGljZShpLHgtaSxtPXQuc2xpY2UoaSx4KS5qb2luKCcgJykpKSx5PWguY3NzTGl0R3JvdXAsej0oeT8oaC5jc3NMaXRNYXB8fChoLmNzc0xpdE1hcD11KHkpKSk6ZyksKHpbbV09PT1nfHxoLmNzc0V4dHJhJiZoLmNzc0V4dHJhLnRlc3QobSkpKT9tOigvXlx3KyQvLnRlc3QobSkmJihxPT09Q1NTX1BST1BfQklUX1FTVFJJTkdfQ09OVEVOVCkpPyhsKzE9PT1rPyh0W2xdPXRbbF0uc3Vic3RyaW5nKDAsdFtsXS5sZW5ndGgtMSkrJyAnK20rJyInLG09JycpOihsPWssJyInK20rJyInKSk6JycpO2lmKG0pe3RbaysrXT1tfX1pZihrPT09MSYmdFswXT09PU4pe2s9MH10Lmxlbmd0aD1rfX0pKCk7ZnVuY3Rpb24gc2FuaXRpemVDc3NTZWxlY3RvcnMocyxhKXt2YXIgaD1bXTt2YXIgYj1bXTt2YXIgaz0wLGk7Zm9yKGk9MDtpPHMubGVuZ3RoOysraSl7aWYoIShzW2ldPT0nICcmJihzW2ktMV09PSc+J3x8c1tpKzFdPT0nPicpKSl7c1trKytdPXNbaV19fXMubGVuZ3RoPWs7dmFyIG49cy5sZW5ndGgsYz0wO2ZvcihpPTA7aTxuOysraSl7aWYoc1tpXT09JywnKXtwKGMsaSk7Yz1pKzF9fXAoYyxuKTtmdW5jdGlvbiBwKGMsZSl7dmFyIGQ9ZmFsc2U7aWYoc1tjXT09PScgJyl7KytjfWlmKGUtMSE9PWMmJnNbZV09PT0nICcpey0tZX12YXIgbz1bXTt2YXIgbD1jO3ZhciBmPScnO2Zvcih2YXIgaT1jO2k8ZTsrK2kpe3ZhciB0PXNbaV07dmFyIGc9KHQ9PT0nPicpO2lmKGd8fHQ9PT0nICcpe2Y9aihsLGksZmFsc2UpO2lmKCFmfHwoZyYmL15odG1sL2kudGVzdChmKSkpe3JldHVybn1sPWkrMTtvLnB1c2goZixnPycgPiAnOicgJyl9fWY9aihsLGUsdHJ1ZSk7aWYoIWYpe3JldHVybn1vLnB1c2goZik7ZnVuY3Rpb24gaihjLGUscSl7dmFyIHI9Yyx1PWU7dmFyIHYsdyx4LHQseTt2PScnO2lmKGM8ZSl7dD1zW2NdLnRvTG93ZXJDYXNlKCk7aWYodD09PScqJ3x8KHQ9PT0nYm9keScmJmMrMSE9PWUmJiFxKXx8KCdudW1iZXInPT09dHlwZW9mKHk9aHRtbDQuRUxFTUVOVFNbdF0pJiYhKHkmaHRtbDQuZWZsYWdzLlVOU0FGRSkpKXsrK2M7dj10fX13PScnO3doaWxlKGM8ZSl7dD1zW2NdO2lmKHQuY2hhckF0KDApPT09JyMnKXtpZigvXiNffF9fJHxbXiMwLTlBLVphLXo6X1wtXS8udGVzdCh0KSl7cmV0dXJuIG51bGx9dys9dCsnLScrYX1lbHNlIGlmKHQ9PT0nLicpe2lmKCsrYzxlJiYvXlswLTlBLVphLXo6X1wtXSskLy50ZXN0KHQ9c1tjXSkmJiEvXl98X18kLy50ZXN0KHQpKXt3Kz0nLicrdH1lbHNle3JldHVybiBudWxsfX1lbHNle2JyZWFrfSsrY314PScnO2lmKGM8ZSYmc1tjXT09PSc6Jyl7dD1zWysrY107aWYodD09PSd2aXNpdGVkJ3x8dD09PSdsaW5rJyl7aWYoIS9eW2EqXT8kLy50ZXN0KHYpKXtyZXR1cm4gbnVsbH1kPXRydWU7eD0nOicrdDt2PSdhJzsrK2N9fWlmKGM9PT1lKXtyZXR1cm4gdit3K3h9cmV0dXJuIG51bGx9dmFyIG09by5qb2luKCcnKTtpZigvXmJvZHlcYi8udGVzdChtKSl7bT0nLnZkb2MtYm9keV9fXy4nK2ErbS5zdWJzdHJpbmcoNCl9ZWxzZXttPScuJythKycgJyttfShkP2g6YikucHVzaChtKX1yZXR1cm5bYixoXX07dmFyIHNhbml0aXplU3R5bGVzaGVldD0oZnVuY3Rpb24oKXt2YXIgYT17fTt2YXIgYz17J2JyYWlsbGUnOmEsJ2VtYm9zc2VkJzphLCdoYW5kaGVsZCc6YSwncHJpbnQnOmEsJ3Byb2plY3Rpb24nOmEsJ3NjcmVlbic6YSwnc3BlZWNoJzphLCd0dHknOmEsJ3R2JzphfTtmdW5jdGlvbiBzKGIpe3ZhciBlPWZhbHNlO2Zvcih2YXIgaT0wLG49Yi5sZW5ndGg7aTxuLTE7KytpKXt2YXIgdD1iW2ldO2lmKCc6Jz09PWJbaSsxXSl7ZT0hKGNzc1NjaGVtYVt0XS5jc3NQcm9wQml0cyZDU1NfUFJPUF9CSVRfQUxMT1dFRF9JTl9MSU5LKX1pZihlKXtiW2ldPScnfWlmKCc7Jz09PXQpe2U9ZmFsc2V9fXJldHVybiBiLmpvaW4oJycpfXJldHVybiBmdW5jdGlvbihiLGQsbyl7dmFyIGU9dm9pZCAwO3ZhciBmPVtdO3ZhciBnPWZhbHNlO3BhcnNlQ3NzU3R5bGVzaGVldChiLHtzdGFydFN0eWxlc2hlZXQ6ZnVuY3Rpb24oKXtlPVtdfSxlbmRTdHlsZXNoZWV0OmZ1bmN0aW9uKCl7fSxzdGFydEF0cnVsZTpmdW5jdGlvbihpLGope2lmKGcpe2k9bnVsbH1lbHNlIGlmKGk9PT0nQG1lZGlhJyl7aj1qLmZpbHRlcihmdW5jdGlvbihtKXtyZXR1cm4gY1ttXT09YX0pO2lmKGoubGVuZ3RoKXtlLnB1c2goaSxqLmpvaW4oJywnKSwneycpfWVsc2V7aT1udWxsfX1lbHNle2lmKGk9PT0nQGltcG9ydCcpe2lmKHdpbmRvdy5jb25zb2xlKXt3aW5kb3cuY29uc29sZS5sb2coJ0BpbXBvcnQgJytqLmpvaW4oJyAnKSsnIGVsaWRlZCcpfX1pPW51bGx9Zz0haTtmLnB1c2goaSl9LGVuZEF0cnVsZTpmdW5jdGlvbigpe3ZhciBpPWYucG9wKCk7aWYoIWcpe2UucHVzaCgnOycpfWgoKX0sc3RhcnRCbG9jazpmdW5jdGlvbigpe2lmKCFnKXtlLnB1c2goJ3snKX19LGVuZEJsb2NrOmZ1bmN0aW9uKCl7aWYoIWcpe2UucHVzaCgnfScpO2c9dHJ1ZX19LHN0YXJ0UnVsZXNldDpmdW5jdGlvbihpKXt2YXIgaj12b2lkIDA7dmFyIHI9ZmFsc2U7aWYoIWcpe3ZhciBrPXNhbml0aXplQ3NzU2VsZWN0b3JzKGksZCk7dmFyIGw9a1swXTtqPWtbMV07aWYoIWwubGVuZ3RoJiYhai5sZW5ndGgpe2c9dHJ1ZX1lbHNle3ZhciBtPWwuam9pbignLCAnKTtpZighbSl7bT0naGVhZCA+IGh0bWwnO3I9dHJ1ZX1lLnB1c2gobSwneycpfX1mLnB1c2goZz9udWxsOntoaXN0b3J5U2Vuc2l0aXZlU2VsZWN0b3JzOmosZW5kT2ZTZWxlY3RvcnM6ZS5sZW5ndGgtMSxyZW1vdmVIaXN0b3J5SW5zZW5zaXRpdmVTZWxlY3RvcnM6cn0pfSxlbmRSdWxlc2V0OmZ1bmN0aW9uKCl7dmFyIHI9Zi5wb3AoKTt2YXIgcD1lLmxlbmd0aDtpZighZyl7ZS5wdXNoKCd9Jyk7aWYocil7dmFyIGk9ci5oaXN0b3J5U2Vuc2l0aXZlU2VsZWN0b3JzO2lmKGkubGVuZ3RoKXt2YXIgaj1lLnNsaWNlKHIuZW5kT2ZTZWxlY3RvcnMpO2UucHVzaChpLmpvaW4oJywgJykscyhqKSl9fX1pZihyJiZyLnJlbW92ZUhpc3RvcnlJbnNlbnNpdGl2ZVNlbGVjdG9ycyl7ZS5zcGxpY2Uoci5lbmRPZlNlbGVjdG9ycy0xLHArMSl9aCgpfSxkZWNsYXJhdGlvbjpmdW5jdGlvbihwLHYpe2lmKCFnKXt2YXIgaT1jc3NTY2hlbWFbcF07aWYoaSl7c2FuaXRpemVDc3NQcm9wZXJ0eShwLGksdixvKTtpZih2Lmxlbmd0aCl7ZS5wdXNoKHAsJzonLHYuam9pbignICcpLCc7Jyl9fX19fSk7ZnVuY3Rpb24gaCgpe2c9Zi5sZW5ndGghPT0wJiZmW2YubGVuZ3RoLTFdIT09bnVsbH1yZXR1cm4gZS5qb2luKCcnKX19KSgpO2lmKHR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJyl7d2luZG93WydzYW5pdGl6ZUNzc1Byb3BlcnR5J109c2FuaXRpemVDc3NQcm9wZXJ0eTt3aW5kb3dbJ3Nhbml0aXplQ3NzU2VsZWN0b3JzJ109c2FuaXRpemVDc3NTZWxlY3RvcnM7d2luZG93WydzYW5pdGl6ZVN0eWxlc2hlZXQnXT1zYW5pdGl6ZVN0eWxlc2hlZXR9Ci8vIENvcHlyaWdodCAoQykgMjAxMCBHb29nbGUgSW5jLgovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKLy8gICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAovLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KdmFyIHBhcnNlQ3NzU3R5bGVzaGVldDt2YXIgcGFyc2VDc3NEZWNsYXJhdGlvbnM7KGZ1bmN0aW9uKCl7cGFyc2VDc3NTdHlsZXNoZWV0PWZ1bmN0aW9uKGUsaCl7dmFyIHQ9bGV4Q3NzKGUpO2lmKGguc3RhcnRTdHlsZXNoZWV0KXtoLnN0YXJ0U3R5bGVzaGVldCgpfWZvcih2YXIgaT0wLG49dC5sZW5ndGg7aTxuOyl7aT10W2ldPT09JyAnP2krMTphKHQsaSxuLGgpfWlmKGguZW5kU3R5bGVzaGVldCl7aC5lbmRTdHlsZXNoZWV0KCl9fTtmdW5jdGlvbiBhKHQsaSxuLGgpe2lmKGk8bil7dmFyIGU9dFtpXTtpZihlLmNoYXJBdCgwKT09PSdAJyl7cmV0dXJuIGIodCxpLG4saCx0cnVlKX1lbHNle3JldHVybiByKHQsaSxuLGgpfX1lbHNle3JldHVybiBpfX1mdW5jdGlvbiBiKHQsaSxuLGgsail7dmFyIGs9aSsrO3doaWxlKGk8biYmdFtpXSE9PSd7JyYmdFtpXSE9PSc7Jyl7KytpfWlmKGk8biYmKGp8fHRbaV09PT0nOycpKXt2YXIgcz1rKzEsZT1pO2lmKHM8biYmdFtzXT09PScgJyl7KytzfWlmKGU+cyYmdFtlLTFdPT09JyAnKXstLWV9aWYoaC5zdGFydEF0cnVsZSl7aC5zdGFydEF0cnVsZSh0W2tdLnRvTG93ZXJDYXNlKCksdC5zbGljZShzLGUpKX1pPSh0W2ldPT09J3snKT9jKHQsaSxuLGgpOmkrMTtpZihoLmVuZEF0cnVsZSl7aC5lbmRBdHJ1bGUoKX19cmV0dXJuIGl9ZnVuY3Rpb24gYyh0LGksbixoKXsrK2k7aWYoaC5zdGFydEJsb2NrKXtoLnN0YXJ0QmxvY2soKX13aGlsZShpPG4pe3ZhciBlPXRbaV0uY2hhckF0KDApO2lmKGU9PSd9Jyl7KytpO2JyZWFrfWlmKGU9PT0nICd8fGU9PT0nOycpe2k9aSsxfWVsc2UgaWYoZT09PSdAJyl7aT1iKHQsaSxuLGgsZmFsc2UpfWVsc2UgaWYoZT09PSd7Jyl7aT1jKHQsaSxuLGgpfWVsc2V7aT1yKHQsaSxuLGgpfX1pZihoLmVuZEJsb2NrKXtoLmVuZEJsb2NrKCl9cmV0dXJuIGl9ZnVuY3Rpb24gcih0LGksbixoKXt2YXIgcz1pLGU9ZCh0LGksbix0cnVlKTtpZihlPDApe2U9fmU7cmV0dXJuIGk9PT1lP2UrMTplfWk9ZTtpZihlPnMmJnRbZS0xXT09PScgJyl7LS1lfXZhciBqPXRbaV07KytpO2lmKGohPT0neycpe3JldHVybiBpfWlmKGguc3RhcnRSdWxlc2V0KXtoLnN0YXJ0UnVsZXNldCh0LnNsaWNlKHMsZSkpfXdoaWxlKGk8bil7aj10W2ldO2lmKGo9PT0nfScpeysraTticmVha31pZihqPT09JyAnKXtpPWkrMX1lbHNle2k9Zyh0LGksbixoKX19aWYoaC5lbmRSdWxlc2V0KXtoLmVuZFJ1bGVzZXQoKX1yZXR1cm4gaTxuP2krMTppfWZ1bmN0aW9uIGQodCxpLG4sZSl7dmFyIHM9aTt2YXIgaDt2YXIgaj1bXSxrPS0xO2Zvcig7aTxuOysraSl7aD10W2ldLmNoYXJBdCgwKTtpZihoPT09J1snfHxoPT09JygnKXtqWysra109aH1lbHNlIGlmKChoPT09J10nJiZqW2tdPT09J1snKXx8KGg9PT0nKScmJmpba109PT0nKCcpKXstLWt9ZWxzZSBpZihoPT09J3snfHxoPT09J30nfHxoPT09JzsnfHxoPT09J0AnfHwoaD09PSc6JyYmIWUpKXticmVha319aWYoaz49MCl7aT1+KGkrMSl9cmV0dXJuIGl9dmFyIGY9L14tP1thLXpdL2k7ZnVuY3Rpb24gZyh0LGksbixoKXt2YXIgcD10W2krK107aWYoIWYudGVzdChwKSl7cmV0dXJuIGkrMX12YXIgaztpZihpPG4mJnRbaV09PT0nICcpeysraX1pZihpPT1ufHx0W2ldIT09JzonKXt3aGlsZShpPG4mJihrPXRbaV0pIT09JzsnJiZrIT09J30nKXsrK2l9cmV0dXJuIGl9KytpO2lmKGk8biYmdFtpXT09PScgJyl7KytpfXZhciBzPWksZT1kKHQsaSxuLGZhbHNlKTtpZihlPDApe2U9fmV9ZWxzZXt2YXIgdj1bXSxsPTA7Zm9yKHZhciBqPXM7ajxlOysrail7az10W2pdO2lmKGshPT0nICcpe3ZbbCsrXT1rfX1pZihlPG4pe2Rve2s9dFtlXTtpZihrPT09JzsnfHxrPT09J30nKXticmVha31sPTB9d2hpbGUoKytlPG4pO2lmKGs9PT0nOycpeysrZX19aWYobCYmaC5kZWNsYXJhdGlvbil7aC5kZWNsYXJhdGlvbihwLnRvTG93ZXJDYXNlKCksdil9fXJldHVybiBlfXBhcnNlQ3NzRGVjbGFyYXRpb25zPWZ1bmN0aW9uKGUsaCl7dmFyIHQ9bGV4Q3NzKGUpO2Zvcih2YXIgaT0wLG49dC5sZW5ndGg7aTxuOyl7aT10W2ldIT09JyAnP2codCxpLG4saCk6aSsxfX19KSgpO2lmKHR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJyl7d2luZG93WydwYXJzZUNzc1N0eWxlc2hlZXQnXT1wYXJzZUNzc1N0eWxlc2hlZXQ7d2luZG93WydwYXJzZUNzc0RlY2xhcmF0aW9ucyddPXBhcnNlQ3NzRGVjbGFyYXRpb25zfQovKiEKICogQGNvcHlyaWdodEAKICovCnZhciBodG1sND17fTtodG1sNC5hdHlwZT17Tk9ORTowLFVSSToxLFVSSV9GUkFHTUVOVDoxMSxTQ1JJUFQ6MixTVFlMRTozLElEOjQsSURSRUY6NSxJRFJFRlM6NixHTE9CQUxfTkFNRTo3LExPQ0FMX05BTUU6OCxDTEFTU0VTOjksRlJBTUVfVEFSR0VUOjEwfTtodG1sNC5BVFRSSUJTPXsnKjo6YWNjZXNza2V5JzowLCcqOjpjbGFzcyc6OSwnKjo6Y29udGVudGVkaXRhYmxlJzowLCcqOjpjb250ZXh0bWVudSc6MCwnKjo6ZGlyJzowLCcqOjpkcmFnZ2FibGUnOjAsJyo6OmRyb3B6b25lJzowLCcqOjpoaWRkZW4nOjAsJyo6OmlkJzo0LCcqOjpsYW5nJzowLCcqOjpvbmFib3J0JzoyLCcqOjpvbmJsdXInOjIsJyo6Om9uY2FucGxheSc6MiwnKjo6b25jYW5wbGF5dGhyb3VnaCc6MiwnKjo6b25jaGFuZ2UnOjIsJyo6Om9uY2xpY2snOjIsJyo6Om9uY29udGV4dG1lbnUnOjIsJyo6Om9uY3VlY2hhbmdlJzoyLCcqOjpvbmRibGNsaWNrJzoyLCcqOjpvbmRyYWcnOjIsJyo6Om9uZHJhZ2VuZCc6MiwnKjo6b25kcmFnZW50ZXInOjIsJyo6Om9uZHJhZ2xlYXZlJzoyLCcqOjpvbmRyYWdvdmVyJzoyLCcqOjpvbmRyYWdzdGFydCc6MiwnKjo6b25kcm9wJzoyLCcqOjpvbmR1cmF0aW9uY2hhbmdlJzoyLCcqOjpvbmVtcHRpZWQnOjIsJyo6Om9uZW5kZWQnOjIsJyo6Om9uZXJyb3InOjIsJyo6Om9uZm9jdXMnOjIsJyo6Om9uaW5wdXQnOjIsJyo6Om9uaW52YWxpZCc6MiwnKjo6b25rZXlkb3duJzoyLCcqOjpvbmtleXByZXNzJzoyLCcqOjpvbmtleXVwJzoyLCcqOjpvbmxvYWQnOjIsJyo6Om9ubG9hZGVkZGF0YSc6MiwnKjo6b25sb2FkZWRtZXRhZGF0YSc6MiwnKjo6b25sb2Fkc3RhcnQnOjIsJyo6Om9ubW91c2Vkb3duJzoyLCcqOjpvbm1vdXNlbW92ZSc6MiwnKjo6b25tb3VzZW91dCc6MiwnKjo6b25tb3VzZW92ZXInOjIsJyo6Om9ubW91c2V1cCc6MiwnKjo6b25tb3VzZXdoZWVsJzoyLCcqOjpvbnBhdXNlJzoyLCcqOjpvbnBsYXknOjIsJyo6Om9ucGxheWluZyc6MiwnKjo6b25wcm9ncmVzcyc6MiwnKjo6b25yYXRlY2hhbmdlJzoyLCcqOjpvbnJlYWR5c3RhdGVjaGFuZ2UnOjIsJyo6Om9ucmVzZXQnOjIsJyo6Om9uc2Nyb2xsJzoyLCcqOjpvbnNlZWtlZCc6MiwnKjo6b25zZWVraW5nJzoyLCcqOjpvbnNlbGVjdCc6MiwnKjo6b25zaG93JzoyLCcqOjpvbnN0YWxsZWQnOjIsJyo6Om9uc3VibWl0JzoyLCcqOjpvbnN1c3BlbmQnOjIsJyo6Om9udGltZXVwZGF0ZSc6MiwnKjo6b252b2x1bWVjaGFuZ2UnOjIsJyo6Om9ud2FpdGluZyc6MiwnKjo6c3BlbGxjaGVjayc6MCwnKjo6c3R5bGUnOjMsJyo6OnRhYmluZGV4JzowLCcqOjp0aXRsZSc6MCwnYTo6aHJlZic6MSwnYTo6aHJlZmxhbmcnOjAsJ2E6Om1lZGlhJzowLCdhOjpyZWwnOjAsJ2E6OnRhcmdldCc6MCwnYTo6dHlwZSc6MCwnYXJlYTo6YWx0JzowLCdhcmVhOjpjb29yZHMnOjAsJ2FyZWE6OmhyZWYnOjEsJ2FyZWE6OmhyZWZsYW5nJzowLCdhcmVhOjptZWRpYSc6MCwnYXJlYTo6cmVsJzowLCdhcmVhOjpzaGFwZSc6MCwnYXJlYTo6dGFyZ2V0JzoxMCwnYXJlYTo6dHlwZSc6MCwnYXVkaW86OmF1dG9wbGF5JzowLCdhdWRpbzo6Y29udHJvbHMnOjAsJ2F1ZGlvOjpsb29wJzowLCdhdWRpbzo6bWVkaWFncm91cCc6MCwnYXVkaW86OnByZWxvYWQnOjAsJ2F1ZGlvOjpzcmMnOjEsJ2Jhc2U6OmhyZWYnOjEsJ2Jhc2U6OnRhcmdldCc6MTAsJ2Jsb2NrcXVvdGU6OmNpdGUnOjEsJ2JvZHk6Om9uYWZ0ZXJwcmludCc6MiwnYm9keTo6b25iZWZvcmVwcmludCc6MiwnYm9keTo6b25iZWZvcmV1bmxvYWQnOjIsJ2JvZHk6Om9uYmx1cic6MiwnYm9keTo6b25lcnJvcic6MiwnYm9keTo6b25mb2N1cyc6MiwnYm9keTo6b25oYXNoY2hhbmdlJzoyLCdib2R5OjpvbmxvYWQnOjIsJ2JvZHk6Om9ubWVzc2FnZSc6MiwnYm9keTo6b25vZmZsaW5lJzoyLCdib2R5Ojpvbm9ubGluZSc6MiwnYm9keTo6b25wYWdlaGlkZSc6MiwnYm9keTo6b25wYWdlc2hvdyc6MiwnYm9keTo6b25wb3BzdGF0ZSc6MiwnYm9keTo6b25yZWRvJzoyLCdib2R5OjpvbnJlc2l6ZSc6MiwnYm9keTo6b25zY3JvbGwnOjIsJ2JvZHk6Om9uc3RvcmFnZSc6MiwnYm9keTo6b251bmRvJzoyLCdib2R5OjpvbnVubG9hZCc6MiwnYnV0dG9uOjphdXRvZm9jdXMnOjAsJ2J1dHRvbjo6ZGlzYWJsZWQnOjAsJ2J1dHRvbjo6Zm9ybSc6MCwnYnV0dG9uOjpmb3JtYWN0aW9uJzoxLCdidXR0b246OmZvcm1lbmN0eXBlJzowLCdidXR0b246OmZvcm1tZXRob2QnOjAsJ2J1dHRvbjo6Zm9ybW5vdmFsaWRhdGUnOjAsJ2J1dHRvbjo6Zm9ybXRhcmdldCc6MTAsJ2J1dHRvbjo6bmFtZSc6OCwnYnV0dG9uOjp0eXBlJzowLCdidXR0b246OnZhbHVlJzowLCdjYW52YXM6OmhlaWdodCc6MCwnY2FudmFzOjp3aWR0aCc6MCwnY29sOjpzcGFuJzowLCdjb2xncm91cDo6c3Bhbic6MCwnY29tbWFuZDo6Y2hlY2tlZCc6MCwnY29tbWFuZDo6ZGlzYWJsZWQnOjAsJ2NvbW1hbmQ6Omljb24nOjEsJ2NvbW1hbmQ6OmxhYmVsJzowLCdjb21tYW5kOjpyYWRpb2dyb3VwJzowLCdjb21tYW5kOjp0eXBlJzowLCdkZWw6OmNpdGUnOjEsJ2RlbDo6ZGF0ZXRpbWUnOjAsJ2RldGFpbHM6Om9wZW4nOjAsJ2VtYmVkOjpoZWlnaHQnOjAsJ2VtYmVkOjpzcmMnOjEsJ2VtYmVkOjp0eXBlJzowLCdlbWJlZDo6d2lkdGgnOjAsJ2ZpZWxkc2V0OjpkaXNhYmxlZCc6MCwnZmllbGRzZXQ6OmZvcm0nOjAsJ2ZpZWxkc2V0OjpuYW1lJzo4LCdmb3JtOjphY2NlcHQtY2hhcnNldCc6MCwnZm9ybTo6YWN0aW9uJzoxLCdmb3JtOjphdXRvY29tcGxldGUnOjAsJ2Zvcm06OmVuY3R5cGUnOjAsJ2Zvcm06Om1ldGhvZCc6MCwnZm9ybTo6bmFtZSc6NywnZm9ybTo6bm92YWxpZGF0ZSc6MCwnZm9ybTo6dGFyZ2V0JzoxMCwnaHRtbDo6IG1hbmlmZXN0JzoxLCdpZnJhbWU6OmhlaWdodCc6MCwnaWZyYW1lOjpuYW1lJzo3LCdpZnJhbWU6OnNhbmRib3gnOjAsJ2lmcmFtZTo6c2VhbWxlc3MnOjAsJ2lmcmFtZTo6c3JjJzoxLCdpZnJhbWU6OnNyY2RvYyc6MTAsJ2lmcmFtZTo6d2lkdGgnOjAsJ2ltZzo6YWx0JzowLCdpbWc6OmhlaWdodCc6MCwnaW1nOjppc21hcCc6MCwnaW1nOjpuYW1lJzo3LCdpbWc6OnNyYyc6MSwnaW1nOjp1c2VtYXAnOjExLCdpbWc6OndpZHRoJzowLCdpbnB1dDo6YWNjZXB0JzowLCdpbnB1dDo6YWx0JzowLCdpbnB1dDo6YXV0b2NvbXBsZXRlJzowLCdpbnB1dDo6YXV0b2ZvY3VzJzowLCdpbnB1dDo6Y2hlY2tlZCc6MCwnaW5wdXQ6OmRpcm5hbWUnOjAsJ2lucHV0OjpkaXNhYmxlZCc6MCwnaW5wdXQ6OmZvcm0nOjAsJ2lucHV0Ojpmb3JtYWN0aW9uJzoxLCdpbnB1dDo6Zm9ybWVuY3R5cGUnOjAsJ2lucHV0Ojpmb3JtbWV0aG9kJzowLCdpbnB1dDo6Zm9ybW5vdmFsaWRhdGUnOjAsJ2lucHV0Ojpmb3JtdGFyZ2V0JzoxMCwnaW5wdXQ6OmhlaWdodCc6MCwnaW5wdXQ6Omxpc3QnOjAsJ2lucHV0OjptYXgnOjAsJ2lucHV0OjptYXhsZW5ndGgnOjAsJ2lucHV0OjptaW4nOjAsJ2lucHV0OjptdWx0aXBsZSc6MCwnaW5wdXQ6Om5hbWUnOjgsJ2lucHV0OjpwYXR0ZXJuJzowLCdpbnB1dDo6cGxhY2Vob2xkZXInOjAsJ2lucHV0OjpyZWFkb25seSc6MCwnaW5wdXQ6OnJlcXVpcmVkJzowLCdpbnB1dDo6c3RlcCc6MCwnaW5wdXQ6OnNpemUnOjAsJ2lucHV0OjpzcmMnOjEsJ2lucHV0Ojp0eXBlJzowLCdpbnB1dDo6dmFsdWUnOjAsJ2lucHV0Ojp3aWR0aCc6MCwnaW5zOjpjaXRlJzoxLCdpbnM6OmRhdGV0aW1lJzowLCdrZXlnZW46OmF1dG9mb2N1cyc6MCwna2V5Z2VuOjpjaGFsbGVuZ2UnOjAsJ2tleWdlbjo6ZGlzYWJsZWQnOjAsJ2tleWdlbjo6Zm9ybSc6MCwna2V5Z2VuOjprZXl0eXBlJzowLCdrZXlnZW46Om5hbWUnOjgsJ2xhYmVsOjpmb3InOjUsJ2xhYmVsOjpmb3JtJzowLCdsaW5rOjpocmVmJzoxLCdsaW5rOjpocmVmbGFuZyc6MCwnbGluazo6bWVkaWEnOjAsJ2xpbms6OnJlbCc6MCwnbGluazo6c2l6ZXMnOjAsJ2xpbms6OnR5cGUnOjAsJ2xpOjp2YWx1ZSc6MCwnbWFwOjpuYW1lJzo3LCdtZW51OjpsYWJlbCc6MCwnbWVudTo6dHlwZSc6MCwnbWV0YTo6Y2hhcnNldCc6MCwnbWV0YTo6Y29udGVudCc6MCwnbWV0YTo6aHR0cC1lcXVpdic6MCwnbWV0YTo6bmFtZSc6NywnbWV0ZXI6OmZvcm0nOjAsJ21ldGVyOjpoaWdoJzowLCdtZXRlcjo6bG93JzowLCdtZXRlcjo6bWF4JzowLCdtZXRlcjo6bWluJzowLCdtZXRlcjo6b3B0aW11bSc6MCwnbWV0ZXI6OnZhbHVlJzowLCdvYmplY3Q6OmRhdGEnOjEsJ29iamVjdDo6Zm9ybSc6MCwnb2JqZWN0OjpoZWlnaHQnOjAsJ29iamVjdDo6bmFtZSc6OCwnb2JqZWN0Ojp0eXBlJzowLCdvYmplY3Q6OnVzZW1hcCc6MTEsJ29iamVjdDo6d2lkdGgnOjAsJ29sOjpyZXZlcnNlZCc6MCwnb2w6OnN0YXJ0JzowLCdvcHRncm91cDo6ZGlzYWJsZWQnOjAsJ29wdGdyb3VwOjpsYWJlbCc6MCwnb3B0aW9uOjpkaXNhYmxlZCc6MCwnb3B0aW9uOjpsYWJlbCc6MCwnb3B0aW9uOjpzZWxlY3RlZCc6MCwnb3B0aW9uOjp2YWx1ZSc6MCwnb3V0cHV0Ojpmb3InOjUsJ291dHB1dDo6Zm9ybSc6MCwnb3V0cHV0OjpuYW1lJzo4LCdwYXJhbTo6bmFtZSc6OCwncGFyYW06OnZhbHVlJzowLCdwcm9ncmVzczo6Zm9ybSc6MCwncHJvZ3Jlc3M6Om1heCc6MCwncHJvZ3Jlc3M6OnZhbHVlJzowLCdxOjpjaXRlJzoxLCdzY3JpcHQ6OmFzeW5jJzowLCdzY3JpcHQ6OmNoYXJzZXQnOjAsJ3NjcmlwdDo6ZGVmZXInOjAsJ3NjcmlwdDo6c3JjJzoxLCdzY3JpcHQ6OnR5cGUnOjAsJ3NlbGVjdDo6YXV0b2ZvY3VzJzowLCdzZWxlY3Q6OmRpc2FibGVkJzowLCdzZWxlY3Q6OmZvcm0nOjAsJ3NlbGVjdDo6bXVsdGlwbGUnOjAsJ3NlbGVjdDo6bmFtZSc6OCwnc2VsZWN0OjpyZXF1aXJlZCc6MCwnc2VsZWN0OjpzaXplJzowLCdzb3VyY2U6Om1lZGlhJzowLCdzb3VyY2U6OnNyYyc6MSwnc291cmNlOjp0eXBlJzowLCdzdHlsZTo6bWVkaWEnOjAsJ3N0eWxlOjpzY29wZWQnOjAsJ3N0eWxlOjp0eXBlJzowLCd0YWJsZTo6Ym9yZGVyJzowLCd0ZDo6Y29sc3Bhbic6MCwndGQ6OmhlYWRlcnMnOjYsJ3RkOjpyb3dzcGFuJzowLCd0ZXh0YXJlYTo6YXV0b2ZvY3VzJzowLCd0ZXh0YXJlYTo6Y29scyc6MCwndGV4dGFyZWE6OmRpc2FibGVkJzowLCd0ZXh0YXJlYTo6Zm9ybSc6MCwndGV4dGFyZWE6Om1heGxlbmd0aCc6MCwndGV4dGFyZWE6Om5hbWUnOjgsJ3RleHRhcmVhOjpwbGFjZWhvbGRlcic6MCwndGV4dGFyZWE6OnJlYWRvbmx5JzowLCd0ZXh0YXJlYTo6cmVxdWlyZWQnOjAsJ3RleHRhcmVhOjpyb3dzJzowLCd0ZXh0YXJlYTo6d3JhcCc6MCwndGg6OmNvbHNwYW4nOjAsJ3RoOjpoZWFkZXJzJzo2LCd0aDo6cm93c3Bhbic6MCwndGg6OnNjb3BlJzowLCd0aW1lOjpkYXRldGltZSc6MCwndGltZTo6cHViZGF0ZSc6MCwndHJhY2s6OmRlZmF1bHQnOjAsJ3RyYWNrOjpraW5kJzowLCd0cmFjazo6bGFiZWwnOjAsJ3RyYWNrOjpzcmMnOjEsJ3RyYWNrOjpzcmNsYW5nJzowLCd2aWRlbzo6YXV0b3BsYXknOjAsJ3ZpZGVvOjpjb250cm9scyc6MCwndmlkZW86OmhlaWdodCc6MCwndmlkZW86Omxvb3AnOjAsJ3ZpZGVvOjptZWRpYWdyb3VwJzowLCd2aWRlbzo6cG9zdGVyJzoxLCd2aWRlbzo6cHJlbG9hZCc6MCwndmlkZW86OnNyYyc6MSwndmlkZW86OndpZHRoJzowfTtodG1sNC5lZmxhZ3M9e09QVElPTkFMX0VORFRBRzoxLEVNUFRZOjIsQ0RBVEE6NCxSQ0RBVEE6OCxVTlNBRkU6MTYsRk9MREFCTEU6MzIsU0NSSVBUOjY0LFNUWUxFOjEyOH07aHRtbDQuRUxFTUVOVFM9eydhJzowLCdhYmJyJzowLCdhZGRyZXNzJzowLCdhcmVhJzoyLCdhcnRpY2xlJzowLCdhc2lkZSc6MCwnYXVkaW8nOjAsJ2InOjAsJ2Jhc2UnOjE4LCdiZGknOjAsJ2Jkbyc6MCwnYmxvY2txdW90ZSc6MCwnYm9keSc6NDksJ2JyJzoyLCdidXR0b24nOjAsJ2NhbnZhcyc6MCwnY2FwdGlvbic6MCwnY2l0ZSc6MCwnY29kZSc6MCwnY29sJzoyLCdjb2xncm91cCc6MSwnY29tbWFuZCc6MiwnZGF0YWxpc3QnOjAsJ2RkJzoxLCdkZWwnOjAsJ2RldGFpbHMnOjAsJ2Rmbic6MCwnZGl2JzowLCdkbCc6MCwnZHQnOjEsJ2VtJzowLCdlbWJlZCc6MTgsJ2ZpZWxkc2V0JzowLCdmaWdjYXB0aW9uJzowLCdmaWd1cmUnOjAsJ2Zvb3Rlcic6MCwnZm9ybSc6MCwnaDEnOjAsJ2gyJzowLCdoMyc6MCwnaDQnOjAsJ2g1JzowLCdoNic6MCwnaGVhZCc6NDksJ2hlYWRlcic6MCwnaGdyb3VwJzowLCdocic6MiwnaHRtbCc6NDksJ2knOjAsJ2lmcmFtZSc6NCwnaW1nJzoyLCdpbnB1dCc6MiwnaW5zJzowLCdrYmQnOjAsJ2tleWdlbic6MiwnbGFiZWwnOjAsJ2xlZ2VuZCc6MCwnbGknOjEsJ2xpbmsnOjE4LCdtYXAnOjAsJ21hcmsnOjAsJ21lbnUnOjAsJ21ldGEnOjE4LCdtZXRlcic6MCwnbmF2JzowLCdub3NjcmlwdCc6MjAsJ29iamVjdCc6MTYsJ29sJzowLCdvcHRncm91cCc6MSwnb3B0aW9uJzoxLCdvdXRwdXQnOjAsJ3AnOjEsJ3BhcmFtJzoxOCwncHJlJzowLCdwcm9ncmVzcyc6MCwncSc6MCwncnAnOjEsJ3J0JzoxLCdydWJ5JzowLCdzJzowLCdzYW1wJzowLCdzY3JpcHQnOjg0LCdzZWN0aW9uJzowLCdzZWxlY3QnOjAsJ3NtYWxsJzowLCdzb3VyY2UnOjIsJ3NwYW4nOjAsJ3N0cm9uZyc6MCwnc3R5bGUnOjE0OCwnc3ViJzowLCdzdW1tYXJ5JzowLCdzdXAnOjAsJ3RhYmxlJzowLCd0Ym9keSc6MSwndGQnOjEsJ3RleHRhcmVhJzo4LCd0Zm9vdCc6MSwndGgnOjEsJ3RoZWFkJzoxLCd0aW1lJzowLCd0aXRsZSc6MjQsJ3RyJzoxLCd0cmFjayc6MiwndSc6MCwndWwnOjAsJ3Zhcic6MCwndmlkZW8nOjAsJ3dicic6Mn07aHRtbDQudWVmZmVjdHM9e05PVF9MT0FERUQ6MCxTQU1FX0RPQ1VNRU5UOjEsTkVXX0RPQ1VNRU5UOjJ9O2h0bWw0LlVSSUVGRkVDVFM9eydhOjpocmVmJzoyLCdhcmVhOjpocmVmJzoyLCdhdWRpbzo6c3JjJzoxLCdiYXNlOjpocmVmJzoyLCdibG9ja3F1b3RlOjpjaXRlJzowLCdidXR0b246OmZvcm1hY3Rpb24nOjIsJ2NvbW1hbmQ6Omljb24nOjEsJ2RlbDo6Y2l0ZSc6MCwnZW1iZWQ6OnNyYyc6MSwnZm9ybTo6YWN0aW9uJzoyLCdodG1sOjogbWFuaWZlc3QnOjEsJ2lmcmFtZTo6c3JjJzoxLCdpbWc6OnNyYyc6MSwnaW5wdXQ6OmZvcm1hY3Rpb24nOjIsJ2lucHV0OjpzcmMnOjEsJ2luczo6Y2l0ZSc6MCwnbGluazo6aHJlZic6Miwnb2JqZWN0OjpkYXRhJzoxLCdxOjpjaXRlJzowLCdzY3JpcHQ6OnNyYyc6MSwnc291cmNlOjpzcmMnOjEsJ3RyYWNrOjpzcmMnOjEsJ3ZpZGVvOjpwb3N0ZXInOjEsJ3ZpZGVvOjpzcmMnOjF9O2h0bWw0Lmx0eXBlcz17VU5TQU5EQk9YRUQ6MixTQU5EQk9YRUQ6MSxEQVRBOjB9O2h0bWw0LkxPQURFUlRZUEVTPXsnYTo6aHJlZic6MiwnYXJlYTo6aHJlZic6MiwnYXVkaW86OnNyYyc6MSwnYmFzZTo6aHJlZic6MiwnYmxvY2txdW90ZTo6Y2l0ZSc6MiwnYnV0dG9uOjpmb3JtYWN0aW9uJzoyLCdjb21tYW5kOjppY29uJzoxLCdkZWw6OmNpdGUnOjIsJ2VtYmVkOjpzcmMnOjEsJ2Zvcm06OmFjdGlvbic6MiwnaHRtbDo6IG1hbmlmZXN0JzoxLCdpZnJhbWU6OnNyYyc6MSwnaW1nOjpzcmMnOjEsJ2lucHV0Ojpmb3JtYWN0aW9uJzoyLCdpbnB1dDo6c3JjJzoxLCdpbnM6OmNpdGUnOjIsJ2xpbms6OmhyZWYnOjIsJ29iamVjdDo6ZGF0YSc6MCwncTo6Y2l0ZSc6Miwnc2NyaXB0OjpzcmMnOjEsJ3NvdXJjZTo6c3JjJzoxLCd0cmFjazo6c3JjJzoxLCd2aWRlbzo6cG9zdGVyJzoxLCd2aWRlbzo6c3JjJzoxfTtpZih0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcpe3dpbmRvd1snaHRtbDQnXT1odG1sNH0KLy8gQ29weXJpZ2h0IChDKSAyMDA2IEdvb2dsZSBJbmMuCi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwovLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAovLyAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAovLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAovLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgp2YXIgaHRtbD0oZnVuY3Rpb24oYSl7dmFyIGIsYyxkO2lmKCd1bmRlZmluZWQnIT09dHlwZW9mIHdpbmRvdyl7Yj13aW5kb3dbJ3BhcnNlQ3NzRGVjbGFyYXRpb25zJ107Yz13aW5kb3dbJ3Nhbml0aXplQ3NzUHJvcGVydHknXTtkPXdpbmRvd1snY3NzU2NoZW1hJ119dmFyIGw7aWYoJ3NjcmlwdCc9PT0nU0NSSVBUJy50b0xvd2VyQ2FzZSgpKXtsPWZ1bmN0aW9uKHMpe3JldHVybiBzLnRvTG93ZXJDYXNlKCl9fWVsc2V7bD1mdW5jdGlvbihzKXtyZXR1cm4gcy5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGUpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGUuY2hhckNvZGVBdCgwKXwzMil9KX19dmFyIEU9eydsdCc6JzwnLCdndCc6Jz4nLCdhbXAnOicmJywnbmJzcCc6J1wyNDAnLCdxdW90JzonIicsJ2Fwb3MnOidcJyd9O3ZhciBmPS9eIyhcZCspJC87dmFyIGc9L14jeChbMC05QS1GYS1mXSspJC87ZnVuY3Rpb24gaihuKXtuPWwobik7aWYoRS5oYXNPd25Qcm9wZXJ0eShuKSl7cmV0dXJuIEVbbl19dmFyIG09bi5tYXRjaChmKTtpZihtKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChtWzFdLDEwKSl9ZWxzZSBpZighIShtPW4ubWF0Y2goZykpKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChtWzFdLDE2KSl9cmV0dXJuJyd9ZnVuY3Rpb24gayhfLG4pe3JldHVybiBqKG4pfXZhciBvPS9cMC9nO2Z1bmN0aW9uIHIocyl7cmV0dXJuIHMucmVwbGFjZShvLCcnKX12YXIgdD0vJigjXGQrfCN4WzAtOUEtRmEtZl0rfFx3Kyk7L2c7ZnVuY3Rpb24gdShzKXtyZXR1cm4gcy5yZXBsYWNlKHQsayl9dmFyIHc9LyYvZzt2YXIgeD0vJihbXmEteiNdfCMoPzpbXjAtOXhdfHgoPzpbXjAtOWEtZl18JCl8JCl8JCkvZ2k7dmFyIHk9L1s8XS9nO3ZhciB6PS8+L2c7dmFyIEE9L1wiL2c7ZnVuY3Rpb24gQihzKXtyZXR1cm4oJycrcykucmVwbGFjZSh3LCcmYW1wOycpLnJlcGxhY2UoeSwnJmx0OycpLnJlcGxhY2UoeiwnJmd0OycpLnJlcGxhY2UoQSwnJiMzNDsnKX1mdW5jdGlvbiBDKGUpe3JldHVybiBlLnJlcGxhY2UoeCwnJmFtcDskMScpLnJlcGxhY2UoeSwnJmx0OycpLnJlcGxhY2UoeiwnJmd0OycpfXZhciBEPW5ldyBSZWdFeHAoJ15cXHMqJysnKFthLXpdW2Etei1dKiknKycoPzonKygnXFxzKig9KVxccyonKycoJysoJyhcIilbXlwiXSooXCJ8JCknKyd8JysnKFwnKVteXCddKihcJ3wkKScrJ3wnKycoPz1bYS16XVthLXotXSpcXHMqPSknKyd8JysnW15cIlwnXFxzXSonKSsnKScpKycpPycsJ2knKTt2YXIgRj0vXigjWzAtOV0rfCN4WzAtOWEtZl0rfFx3Kyk7L2k7dmFyIEc9KCdhLGInLnNwbGl0KC8oLCkvKS5sZW5ndGg9PT0zKTt2YXIgSD1hLmVmbGFncy5DREFUQXxhLmVmbGFncy5SQ0RBVEE7ZnVuY3Rpb24gSShoKXtyZXR1cm4gZnVuY3Rpb24oZSxwKXtyZXR1cm4gSyhlLGgscCl9fXZhciBKPXt9O2Z1bmN0aW9uIEsoZSxpLG4pe3ZhciBoPWk7dmFyIG0scCxxO3ZhciBzPU4oZSk7dmFyIHY9e25vTW9yZUdUOmZhbHNlLG5vTW9yZUVuZENvbW1lbnRzOmZhbHNlfTtNKGkscywwLHYsbil9ZnVuY3Rpb24gTChoLHAsaSxzLGUpe3JldHVybiBmdW5jdGlvbigpe00oaCxwLGkscyxlKX19ZnVuY3Rpb24gTShoLGksbixzLHEpe3RyeXtpZihoLnN0YXJ0RG9jJiZuPT0wKXtoLnN0YXJ0RG9jKHEpfXZhciBtLHAsdjtmb3IodmFyIF89bixiMT1pLmxlbmd0aDtfPGIxOyl7dmFyIGMxPWlbXysrXTt2YXIgZDE9aVtfXTtzd2l0Y2goYzEpe2Nhc2UnJic6aWYoRi50ZXN0KGQxKSl7aWYoaC5wY2RhdGEpe2gucGNkYXRhKCcmJytkMSxxLEosTChoLGksXyxzLHEpKX1fKyt9ZWxzZXtpZihoLnBjZGF0YSl7aC5wY2RhdGEoIiZhbXA7IixxLEosTChoLGksXyxzLHEpKX19YnJlYWs7Y2FzZSc8XC8nOmlmKG09L14oXHcrKVteXCdcIl0qLy5leGVjKGQxKSl7aWYobVswXS5sZW5ndGg9PT1kMS5sZW5ndGgmJmlbXysxXT09PSc+Jyl7Xys9Mjt2PWwobVsxXSk7aWYoYS5FTEVNRU5UUy5oYXNPd25Qcm9wZXJ0eSh2KSl7aWYoaC5lbmRUYWcpe2guZW5kVGFnKHYscSxKLEwoaCxpLF8scyxxKSl9fX1lbHNle189TyhpLF8saCxxLEoscyl9fWVsc2V7aWYoaC5wY2RhdGEpe2gucGNkYXRhKCcmbHQ7LycscSxKLEwoaCxpLF8scyxxKSl9fWJyZWFrO2Nhc2UnPCc6aWYobT0vXihcdyspXHMqXC8/Ly5leGVjKGQxKSl7aWYobVswXS5sZW5ndGg9PT1kMS5sZW5ndGgmJmlbXysxXT09PSc+Jyl7Xys9Mjt2PWwobVsxXSk7aWYoYS5FTEVNRU5UUy5oYXNPd25Qcm9wZXJ0eSh2KSl7aWYoaC5zdGFydFRhZyl7aC5zdGFydFRhZyh2LFtdLHEsSixMKGgsaSxfLHMscSkpfXZhciBlMT1hLkVMRU1FTlRTW3ZdO2lmKGUxJkgpe3ZhciBmMT17bmFtZTp2LG5leHQ6XyxlZmxhZ3M6ZTF9O189UihpLGYxLGgscSxKLHMpfX19ZWxzZXtfPVAoaSxfLGgscSxKLHMpfX1lbHNle2lmKGgucGNkYXRhKXtoLnBjZGF0YSgnJmx0OycscSxKLEwoaCxpLF8scyxxKSl9fWJyZWFrO2Nhc2UnPFwhLS0nOmlmKCFzLm5vTW9yZUVuZENvbW1lbnRzKXtmb3IocD1fKzE7cDxiMTtwKyspe2lmKGlbcF09PT0nPicmJi8tLSQvLnRlc3QoaVtwLTFdKSl7YnJlYWt9fWlmKHA8YjEpe189cCsxfWVsc2V7cy5ub01vcmVFbmRDb21tZW50cz10cnVlfX1pZihzLm5vTW9yZUVuZENvbW1lbnRzKXtpZihoLnBjZGF0YSl7aC5wY2RhdGEoJyZsdDshLS0nLHEsSixMKGgsaSxfLHMscSkpfX1icmVhaztjYXNlJzxcISc6aWYoIS9eXHcvLnRlc3QoZDEpKXtpZihoLnBjZGF0YSl7aC5wY2RhdGEoJyZsdDshJyxxLEosTChoLGksXyxzLHEpKX19ZWxzZXtpZighcy5ub01vcmVHVCl7Zm9yKHA9XysxO3A8YjE7cCsrKXtpZihpW3BdPT09Jz4nKXticmVha319aWYocDxiMSl7Xz1wKzF9ZWxzZXtzLm5vTW9yZUdUPXRydWV9fWlmKHMubm9Nb3JlR1Qpe2lmKGgucGNkYXRhKXtoLnBjZGF0YSgnJmx0OyEnLHEsSixMKGgsaSxfLHMscSkpfX19YnJlYWs7Y2FzZSc8Pyc6aWYoIXMubm9Nb3JlR1Qpe2ZvcihwPV8rMTtwPGIxO3ArKyl7aWYoaVtwXT09PSc+Jyl7YnJlYWt9fWlmKHA8YjEpe189cCsxfWVsc2V7cy5ub01vcmVHVD10cnVlfX1pZihzLm5vTW9yZUdUKXtpZihoLnBjZGF0YSl7aC5wY2RhdGEoJyZsdDs/JyxxLEosTChoLGksXyxzLHEpKX19YnJlYWs7Y2FzZSc+JzppZihoLnBjZGF0YSl7aC5wY2RhdGEoIiZndDsiLHEsSixMKGgsaSxfLHMscSkpfWJyZWFrO2Nhc2UnJzpicmVhaztkZWZhdWx0OmlmKGgucGNkYXRhKXtoLnBjZGF0YShjMSxxLEosTChoLGksXyxzLHEpKX1icmVha319aWYoaC5lbmREb2Mpe2guZW5kRG9jKHEpfX1jYXRjaChlKXtpZihlIT09Sil7dGhyb3cgZX19fWZ1bmN0aW9uIE4ocyl7dmFyIGU9Lyg8XC98PFwhLS18PFshP118WyY8Pl0pL2c7cys9Jyc7aWYoRyl7cmV0dXJuIHMuc3BsaXQoZSl9ZWxzZXt2YXIgcD1bXTt2YXIgaD0wO3ZhciBtO3doaWxlKChtPWUuZXhlYyhzKSkhPT1udWxsKXtwLnB1c2gocy5zdWJzdHJpbmcoaCxtLmluZGV4KSk7cC5wdXNoKG1bMF0pO2g9bS5pbmRleCttWzBdLmxlbmd0aH1wLnB1c2gocy5zdWJzdHJpbmcoaCkpO3JldHVybiBwfX1mdW5jdGlvbiBPKHAsZSxoLGksSixzKXt2YXIgbT1TKHAsZSk7aWYoIW0pe3JldHVybiBwLmxlbmd0aH1pZihtLmVmbGFncyE9PXZvaWQgMCl7aWYoaC5lbmRUYWcpe2guZW5kVGFnKG0ubmFtZSxpLEosTChoLHAsZSxzLGkpKX19cmV0dXJuIG0ubmV4dH1mdW5jdGlvbiBQKHAsZSxoLGksSixzKXt2YXIgbT1TKHAsZSk7aWYoIW0pe3JldHVybiBwLmxlbmd0aH1pZihtLmVmbGFncyE9PXZvaWQgMCl7aWYoaC5zdGFydFRhZyl7aC5zdGFydFRhZyhtLm5hbWUsbS5hdHRycyxpLEosTChoLHAsbS5uZXh0LHMsaSkpfWlmKG0uZWZsYWdzJkgpe3JldHVybiBSKHAsbSxoLGksSixzKX19cmV0dXJuIG0ubmV4dH12YXIgUT17fTtmdW5jdGlvbiBSKGUsaSxoLG0sSixzKXt2YXIgbj1lLmxlbmd0aDtpZighUS5oYXNPd25Qcm9wZXJ0eShpLm5hbWUpKXtRW2kubmFtZV09bmV3IFJlZ0V4cCgnXicraS5uYW1lKycoPzpbXFxzXFwvXXwkKScsJ2knKX12YXIgcT1RW2kubmFtZV07dmFyIHY9aS5uZXh0O3ZhciBwPWkubmV4dCsxO2Zvcig7cDxuO3ArKyl7aWYoZVtwLTFdPT09JzxcLycmJnEudGVzdChlW3BdKSl7YnJlYWt9fWlmKHA8bil7cC09MX12YXIgXz1lLnNsaWNlKHYscCkuam9pbignJyk7aWYoaS5lZmxhZ3MmYS5lZmxhZ3MuQ0RBVEEpe2lmKGguY2RhdGEpe2guY2RhdGEoXyxtLEosTChoLGUscCxzLG0pKX19ZWxzZSBpZihpLmVmbGFncyZhLmVmbGFncy5SQ0RBVEEpe2lmKGgucmNkYXRhKXtoLnJjZGF0YShDKF8pLG0sSixMKGgsZSxwLHMsbSkpfX1lbHNle3Rocm93IG5ldyBFcnJvcignYnVnJyl9cmV0dXJuIHB9ZnVuY3Rpb24gUyhlLGgpe3ZhciBtPS9eKFx3KykvLmV4ZWMoZVtoXSk7dmFyIGk9e25hbWU6bChtWzFdKX07aWYoYS5FTEVNRU5UUy5oYXNPd25Qcm9wZXJ0eShpLm5hbWUpKXtpLmVmbGFncz1hLkVMRU1FTlRTW2kubmFtZV19ZWxzZXtpLmVmbGFncz12b2lkIDB9dmFyIG49ZVtoXS5zdWJzdHIobVswXS5sZW5ndGgpO3ZhciBwPWgrMTt2YXIgcT1lLmxlbmd0aDtmb3IoO3A8cTtwKyspe2lmKGVbcF09PT0nPicpe2JyZWFrfW4rPWVbcF19aWYocTw9cCl7cmV0dXJuIHZvaWQgMH12YXIgcz1bXTt3aGlsZShuIT09Jycpe209RC5leGVjKG4pO2lmKCFtKXtuPW4ucmVwbGFjZSgvXltcc1xTXVteYS16XHNdKi8sJycpfWVsc2UgaWYoKG1bNF0mJiFtWzVdKXx8KG1bNl0mJiFtWzddKSl7dmFyIHY9bVs0XXx8bVs2XTt2YXIgXz1mYWxzZTt2YXIgYjE9W24sZVtwKytdXTtmb3IoO3A8cTtwKyspe2lmKF8pe2lmKGVbcF09PT0nPicpe2JyZWFrfX1lbHNlIGlmKDA8PWVbcF0uaW5kZXhPZih2KSl7Xz10cnVlfWIxLnB1c2goZVtwXSl9aWYocTw9cCl7YnJlYWt9bj1iMS5qb2luKCcnKTtjb250aW51ZX1lbHNle3ZhciBjMT1sKG1bMV0pO3ZhciBkMT1tWzJdP1QobVszXSk6YzE7cy5wdXNoKGMxLGQxKTtuPW4uc3Vic3RyKG1bMF0ubGVuZ3RoKX19aS5hdHRycz1zO2kubmV4dD1wKzE7cmV0dXJuIGl9ZnVuY3Rpb24gVCh2KXt2YXIgcT12LmNoYXJDb2RlQXQoMCk7aWYocT09PTB4MjJ8fHE9PT0weDI3KXt2PXYuc3Vic3RyKDEsdi5sZW5ndGgtMil9cmV0dXJuIHUocih2KSl9ZnVuY3Rpb24gVShlKXt2YXIgczt2YXIgaDt2YXIgbT1mdW5jdGlvbihpLG4pe2lmKCFoKXtuLnB1c2goaSl9fTtyZXR1cm4gSSh7c3RhcnREb2M6ZnVuY3Rpb24oXyl7cz1bXTtoPWZhbHNlfSxzdGFydFRhZzpmdW5jdGlvbihwLHEsdil7aWYoaCl7cmV0dXJufWlmKCFhLkVMRU1FTlRTLmhhc093blByb3BlcnR5KHApKXtyZXR1cm59dmFyIF89YS5FTEVNRU5UU1twXTtpZihfJmEuZWZsYWdzLkZPTERBQkxFKXtyZXR1cm59cT1lKHAscSk7aWYoIXEpe2g9IShfJmEuZWZsYWdzLkVNUFRZKTtyZXR1cm59aWYoIShfJmEuZWZsYWdzLkVNUFRZKSl7cy5wdXNoKHApfXYucHVzaCgnPCcscCk7Zm9yKHZhciBpPTAsbj1xLmxlbmd0aDtpPG47aSs9Mil7dmFyIGIxPXFbaV0sYzE9cVtpKzFdO2lmKGMxIT09bnVsbCYmYzEhPT12b2lkIDApe3YucHVzaCgnICcsYjEsJz0iJyxCKGMxKSwnIicpfX12LnB1c2goJz4nKX0sZW5kVGFnOmZ1bmN0aW9uKG4scCl7aWYoaCl7aD1mYWxzZTtyZXR1cm59aWYoIWEuRUxFTUVOVFMuaGFzT3duUHJvcGVydHkobikpe3JldHVybn12YXIgcT1hLkVMRU1FTlRTW25dO2lmKCEocSYoYS5lZmxhZ3MuRU1QVFl8YS5lZmxhZ3MuRk9MREFCTEUpKSl7dmFyIHY7aWYocSZhLmVmbGFncy5PUFRJT05BTF9FTkRUQUcpe2Zvcih2PXMubGVuZ3RoOy0tdj49MDspe3ZhciBfPXNbdl07aWYoXz09PW4pe2JyZWFrfWlmKCEoYS5FTEVNRU5UU1tfXSZhLmVmbGFncy5PUFRJT05BTF9FTkRUQUcpKXtyZXR1cm59fX1lbHNle2Zvcih2PXMubGVuZ3RoOy0tdj49MDspe2lmKHNbdl09PT1uKXticmVha319fWlmKHY8MCl7cmV0dXJufWZvcih2YXIgaT1zLmxlbmd0aDstLWk+djspe3ZhciBfPXNbaV07aWYoIShhLkVMRU1FTlRTW19dJmEuZWZsYWdzLk9QVElPTkFMX0VORFRBRykpe3AucHVzaCgnPFwvJyxfLCc+Jyl9fXMubGVuZ3RoPXY7cC5wdXNoKCc8XC8nLG4sJz4nKX19LHBjZGF0YTptLHJjZGF0YTptLGNkYXRhOm0sZW5kRG9jOmZ1bmN0aW9uKGkpe2Zvcig7cy5sZW5ndGg7cy5sZW5ndGgtLSl7aS5wdXNoKCc8XC8nLHNbcy5sZW5ndGgtMV0sJz4nKX19fSl9dmFyIFY9bmV3IFJlZ0V4cCgnXicrJyg/OicrJyhbXjpcLz8jIF0rKScrJzopPycpO3ZhciBXPS9eKD86aHR0cHM/fG1haWx0bykkL2k7ZnVuY3Rpb24gWChlLG4pe2lmKCFuKXtyZXR1cm4gbnVsbH12YXIgcD0oJycrZSkubWF0Y2goVik7aWYocCYmKCFwWzFdfHxXLnRlc3QocFsxXSkpKXtyZXR1cm4gbihlKX1lbHNle3JldHVybiBudWxsfX1mdW5jdGlvbiBZKGUsaCxtLG4pe2Zvcih2YXIgaT0wO2k8aC5sZW5ndGg7aSs9Mil7dmFyIHA9aFtpXTt2YXIgdj1oW2krMV07dmFyIHE9bnVsbCxzO2lmKChzPWUrJzo6JytwLGEuQVRUUklCUy5oYXNPd25Qcm9wZXJ0eShzKSl8fChzPScqOjonK3AsYS5BVFRSSUJTLmhhc093blByb3BlcnR5KHMpKSl7cT1hLkFUVFJJQlNbc119aWYocSE9PW51bGwpe3N3aXRjaChxKXtjYXNlIGEuYXR5cGUuTk9ORTpicmVhaztjYXNlIGEuYXR5cGUuU0NSSVBUOnY9bnVsbDticmVhaztjYXNlIGEuYXR5cGUuU1RZTEU6aWYoJ3VuZGVmaW5lZCc9PT10eXBlb2YgYil7dj1udWxsO2JyZWFrfXZhciBfPVtdO2Iodix7ZGVjbGFyYXRpb246ZnVuY3Rpb24oYjEsYzEpe3ZhciBkMT1iMS50b0xvd2VyQ2FzZSgpO3ZhciBlMT1kW2QxXTtpZighZTEpe3JldHVybn1jKGQxLGUxLGMxLG0pO18ucHVzaChiMSsnOiAnK2MxLmpvaW4oJyAnKSl9fSk7dj1fLmxlbmd0aD4wP18uam9pbignIDsgJyk6bnVsbDticmVhaztjYXNlIGEuYXR5cGUuSUQ6Y2FzZSBhLmF0eXBlLklEUkVGOmNhc2UgYS5hdHlwZS5JRFJFRlM6Y2FzZSBhLmF0eXBlLkdMT0JBTF9OQU1FOmNhc2UgYS5hdHlwZS5MT0NBTF9OQU1FOmNhc2UgYS5hdHlwZS5DTEFTU0VTOnY9bj9uKHYpOnY7YnJlYWs7Y2FzZSBhLmF0eXBlLlVSSTp2PVgodixtKTticmVhaztjYXNlIGEuYXR5cGUuVVJJX0ZSQUdNRU5UOmlmKHYmJicjJz09PXYuY2hhckF0KDApKXt2PXYuc3Vic3RyaW5nKDEpO3Y9bj9uKHYpOnY7aWYodiE9PW51bGwmJnYhPT12b2lkIDApe3Y9JyMnK3Z9fWVsc2V7dj1udWxsfWJyZWFrO2RlZmF1bHQ6dj1udWxsO2JyZWFrfX1lbHNle3Y9bnVsbH1oW2krMV09dn1yZXR1cm4gaH1mdW5jdGlvbiBaKGUsaCl7cmV0dXJuIGZ1bmN0aW9uKGksbSl7aWYoIShhLkVMRU1FTlRTW2ldJmEuZWZsYWdzLlVOU0FGRSkpe3JldHVybiBZKGksbSxlLGgpfX19ZnVuY3Rpb24gJChpLGUpe3ZhciBoPVtdO1UoZSkoaSxoKTtyZXR1cm4gaC5qb2luKCcnKX1mdW5jdGlvbiBhMShpLGUsaCl7dmFyIG09WihlLGgpO3JldHVybiAkKGksbSl9cmV0dXJue2VzY2FwZUF0dHJpYjpCLG1ha2VIdG1sU2FuaXRpemVyOlUsbWFrZVNheFBhcnNlcjpJLG1ha2VUYWdQb2xpY3k6Wixub3JtYWxpemVSQ0RhdGE6QyxzYW5pdGl6ZTphMSxzYW5pdGl6ZUF0dHJpYnM6WSxzYW5pdGl6ZVdpdGhQb2xpY3k6JCx1bmVzY2FwZUVudGl0aWVzOnV9fSkoaHRtbDQpO3ZhciBodG1sX3Nhbml0aXplPWh0bWwuc2FuaXRpemU7aWYodHlwZW9mIHdpbmRvdyE9PSd1bmRlZmluZWQnKXt3aW5kb3dbJ2h0bWwnXT1odG1sO3dpbmRvd1snaHRtbF9zYW5pdGl6ZSddPWh0bWxfc2FuaXRpemV9alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkudGhpcmRwYXJ0eS5jYWphLWh0bWwtc2FuaXRpemVyJyl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuYWN0JykpewovKiEKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuYWN0Jyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5hY3QiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7aWYodHlwZW9mIHdpbmRvdy5qUXVlcnkuc2FwLmFjdD09PSJvYmplY3QifHx0eXBlb2Ygd2luZG93LmpRdWVyeS5zYXAuYWN0PT09ImZ1bmN0aW9uIil7cmV0dXJufXZhciBfPXt9LGE9dHJ1ZSxiPW51bGwsYz0xMDAwMCxkPSEhd2luZG93LmFkZEV2ZW50TGlzdGVuZXIsZT1bXSxmPVtdLGc9ZmFsc2UsaD1udWxsO2Z1bmN0aW9uIGooKXtiPW51bGw7aWYoZyl7aygpO3JldHVybn1hPWZhbHNlO2gub2JzZXJ2ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQse2NoaWxkTGlzdDp0cnVlLGF0dHJpYnV0ZXM6dHJ1ZSxzdWJ0cmVlOnRydWUsY2hhcmFjdGVyRGF0YTp0cnVlfSl9O2Z1bmN0aW9uIGsoKXtpZighYSl7YT10cnVlO2woZSk7aC5kaXNjb25uZWN0KCl9aWYoYil7Zz10cnVlfWVsc2V7Yj1zZXRUaW1lb3V0KGosYyk7Zz1mYWxzZX19O2Z1bmN0aW9uIGwoTCl7aWYoTC5sZW5ndGg9PTApe3JldHVybn12YXIgbT1MLnNsaWNlKCk7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBJO2Zvcih2YXIgaT0wLG49bS5sZW5ndGg7aTxuO2krKyl7ST1tW2ldO0kuZkZ1bmN0aW9uLmNhbGwoSS5vTGlzdGVuZXJ8fHdpbmRvdyl9fSwwKX07Xy5hdHRhY2hBY3RpdmF0ZT1mdW5jdGlvbihGLEwpe2UucHVzaCh7b0xpc3RlbmVyOkwsZkZ1bmN0aW9uOkZ9KX07Xy5kZXRhY2hBY3RpdmF0ZT1mdW5jdGlvbihGLEwpe2Zvcih2YXIgaT0wLG09ZS5sZW5ndGg7aTxtO2krKyl7aWYoZVtpXS5mRnVuY3Rpb249PT1GJiZlW2ldLm9MaXN0ZW5lcj09PUwpe2Uuc3BsaWNlKGksMSk7YnJlYWt9fX07Xy5pc0FjdGl2ZT0hZD9mdW5jdGlvbigpe3JldHVybiB0cnVlfTpmdW5jdGlvbigpe3JldHVybiBhfTtfLnJlZnJlc2g9IWQ/ZnVuY3Rpb24oKXt9Oms7aWYoZCl7dmFyIEU9WyJyZXNpemUiLCJvcmllbnRhdGlvbmNoYW5nZSIsIm1vdXNlbW92ZSIsIm1vdXNlZG93biIsIm1vdXNldXAiLCJ0b3VjaHN0YXJ0IiwidG91Y2htb3ZlIiwidG91Y2hlbmQiLCJ0b3VjaGNhbmNlbCIsInBhc3RlIiwiY3V0Iiwia2V5ZG93biIsImtleXVwIiwiRE9NTW91c2VTY3JvbGwiLCJtb3VzZXdoZWVsIl07Zm9yKHZhciBpPTA7aTxFLmxlbmd0aDtpKyspe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKEVbaV0sXy5yZWZyZXNoLHRydWUpfWlmKHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyKXtoPW5ldyB3aW5kb3cuTXV0YXRpb25PYnNlcnZlcihfLnJlZnJlc2gpfWVsc2UgaWYod2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIpe2g9bmV3IHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyKF8ucmVmcmVzaCl9ZWxzZXtoPXtvYnNlcnZlOmZ1bmN0aW9uKCl7ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTVN1YnRyZWVNb2RpZmllZCIsXy5yZWZyZXNoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJET01TdWJ0cmVlTW9kaWZpZWQiLF8ucmVmcmVzaCl9fX1rKCl9cS5zYXAuYWN0PV87cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5kb20nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLmRvbScpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuZG9tIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZSddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiO3ZhciBkPWZ1bmN0aW9uKEksdyl7aWYoIXcpe3c9d2luZG93fWlmKCFJfHxJPT0iIil7cmV0dXJuIG51bGx9dmFyIG89dy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChJKTtpZihvJiZvLmlkPT1JKXtyZXR1cm4gb312YXIgcj13LmRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKEkpO2Zvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKXtvPXJbaV07aWYobyYmby5pZD09SSl7cmV0dXJuIG99fXJldHVybiBudWxsfTtxLnNhcC5kb21CeUlkPSEhRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZELmJyb3dzZXIudmVyc2lvbjw4P2Q6ZnVuY3Rpb24gZG9tQnlJZChpLHcpe3JldHVybiBpPyh3fHx3aW5kb3cpLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGkpOm51bGx9O3Euc2FwLmJ5SWQ9ZnVuY3Rpb24gYnlJZChpLGMpe3ZhciBlPSIiO2lmKGkpe2U9IiMiK2kucmVwbGFjZSgvKDp8XC4pL2csJ1xcJDEnKX1yZXR1cm4gcShlLGMpfTtxLnNhcC5mb2N1cz1mdW5jdGlvbiBmb2N1cyhvKXtpZighbyl7cmV0dXJufXRyeXtvLmZvY3VzKCl9Y2F0Y2goZSl7dmFyIGk9KG8mJm8uaWQpPyIgKElEOiAnIitvLmlkKyInKSI6IiI7cS5zYXAubG9nLndhcm5pbmcoIkVycm9yIHdoZW4gdHJ5aW5nIHRvIGZvY3VzIGEgRE9NIGVsZW1lbnQiK2krIjogIitlLm1lc3NhZ2UpO3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX07cS5mbi5jdXJzb3JQb3M9ZnVuY3Rpb24gY3Vyc29yUG9zKHApe3ZhciBsPWFyZ3VtZW50cy5sZW5ndGgsdCxMLFQscztUPXRoaXMucHJvcCgidGFnTmFtZSIpO3M9dGhpcy5wcm9wKCJ0eXBlIik7aWYodGhpcy5sZW5ndGg9PT0xJiYoKFQ9PSJJTlBVVCImJihzPT0idGV4dCJ8fHM9PSJwYXNzd29yZCJ8fHM9PSJzZWFyY2giKSl8fFQ9PSJURVhUQVJFQSIpKXt2YXIgbz10aGlzLmdldCgwKTtpZihsPjApe2lmKHR5cGVvZihvLnNlbGVjdGlvblN0YXJ0KT09Im51bWJlciIpe28uZm9jdXMoKTtvLnNlbGVjdGlvblN0YXJ0PXA7by5zZWxlY3Rpb25FbmQ9cH1lbHNlIGlmKG8uY3JlYXRlVGV4dFJhbmdlKXt0PW8uY3JlYXRlVGV4dFJhbmdlKCk7dmFyIG09by52YWx1ZS5sZW5ndGg7aWYocDwwfHxwPm0pe3A9bX1pZih0KXt0LmNvbGxhcHNlKCk7dC5tb3ZlRW5kKCJjaGFyYWN0ZXIiLHApO3QubW92ZVN0YXJ0KCJjaGFyYWN0ZXIiLHApO3Quc2VsZWN0KCl9fXJldHVybiB0aGlzfWVsc2V7aWYodHlwZW9mKG8uc2VsZWN0aW9uU3RhcnQpPT0ibnVtYmVyIil7cmV0dXJuIG8uc2VsZWN0aW9uU3RhcnR9ZWxzZSBpZihvLmNyZWF0ZVRleHRSYW5nZSl7dD13aW5kb3cuZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7dmFyIGM9dC5kdXBsaWNhdGUoKTtpZihvLnRhZ05hbWU9PSJURVhUQVJFQSIpe2MubW92ZVRvRWxlbWVudFRleHQobyk7dmFyIEM9Yy5kdXBsaWNhdGUoKTtMPWMudGV4dC5sZW5ndGg7Qy5tb3ZlU3RhcnQoImNoYXJhY3RlciIsTCk7aWYoQy5pblJhbmdlKHQpKXtTPUx9ZWxzZXt2YXIgaT1MO3ZhciBTPTA7d2hpbGUoTD4xKXtpPU1hdGgucm91bmQoTC8yKTtTPVMraTtDPWMuZHVwbGljYXRlKCk7Qy5tb3ZlU3RhcnQoImNoYXJhY3RlciIsUyk7aWYoQy5pblJhbmdlKHQpKXtMPUwtaX1lbHNle1M9Uy1pO0w9aX19fXJldHVybiBTfWVsc2UgaWYoYy5wYXJlbnRFbGVtZW50KCk9PT1vKXtjLmNvbGxhcHNlKCk7dmFyIEw9by52YWx1ZS5sZW5ndGg7Yy5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsLUwpO3JldHVybiBjLnRleHQubGVuZ3RofX1yZXR1cm4tMX19ZWxzZXtyZXR1cm4gdGhpc319O3EuZm4uc2VsZWN0VGV4dD1mdW5jdGlvbiBzZWxlY3RUZXh0KHMsRSl7dmFyIG89dGhpcy5nZXQoMCk7aWYoIW8pe3JldHVybiB0aGlzfXRyeXtpZih0eXBlb2Yoby5zZWxlY3Rpb25TdGFydCk9PT0ibnVtYmVyIil7aWYoczwwKXtzPTB9aWYoRT5vLnZhbHVlLmxlbmd0aCl7RT1vLnZhbHVlLmxlbmd0aH1pZighRXx8cz5FKXtzPTA7RT0wfW8uc2VsZWN0aW9uU3RhcnQ9cztvLnNlbGVjdGlvbkVuZD1FfWVsc2UgaWYoby5jcmVhdGVUZXh0UmFuZ2Upe3ZhciB0PW8uY3JlYXRlVGV4dFJhbmdlKCk7dC5jb2xsYXBzZSgpO3QubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLHMpO3QubW92ZUVuZCgnY2hhcmFjdGVyJyxFLXMpO3Quc2VsZWN0KCl9fWNhdGNoKGUpe31yZXR1cm4gdGhpc307cS5mbi5vdXRlckhUTUw9ZnVuY3Rpb24gb3V0ZXJIVE1MKCl7dmFyIG89dGhpcy5nZXQoMCk7aWYobyYmby5vdXRlckhUTUwpe3JldHVybiBxLnRyaW0oby5vdXRlckhUTUwpfWVsc2V7dmFyIGE9dGhpc1swXT90aGlzWzBdLm93bmVyRG9jdW1lbnQ6ZG9jdW1lbnQ7dmFyIGI9YS5jcmVhdGVFbGVtZW50KCJkaXYiKTtiLmFwcGVuZENoaWxkKG8uY2xvbmVOb2RlKHRydWUpKTtyZXR1cm4gYi5pbm5lckhUTUx9fTtxLnNhcC5jb250YWluc09yRXF1YWxzPWZ1bmN0aW9uIGNvbnRhaW5zT3JFcXVhbHMobyxhKXtpZihhJiZvJiZhIT1kb2N1bWVudCYmYSE9d2luZG93KXtyZXR1cm4obz09PWEpfHxxLmNvbnRhaW5zKG8sYSl9cmV0dXJuIGZhbHNlfTtxLmZuLnJlY3Q9ZnVuY3Rpb24gcmVjdCgpe3ZhciBvPXRoaXMuZ2V0KDApO2lmKG8pe2lmKG8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KXt2YXIgYz1vLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3ZhciByPXt0b3A6Yy50b3AsbGVmdDpjLmxlZnQsd2lkdGg6Yy5yaWdodC1jLmxlZnQsaGVpZ2h0OmMuYm90dG9tLWMudG9wfTt2YXIgdz1xLnNhcC5vd25lcldpbmRvdyhvKTtyLmxlZnQrPXEodykuc2Nyb2xsTGVmdCgpO3IudG9wKz1xKHcpLnNjcm9sbFRvcCgpO3JldHVybiByfWVsc2V7cmV0dXJue3RvcDoxMCxsZWZ0OjEwLHdpZHRoOm8ub2Zmc2V0V2lkdGgsaGVpZ2h0Om8ub2Zmc2V0V2lkdGh9fX1yZXR1cm4gbnVsbH07cS5mbi5yZWN0Q29udGFpbnM9ZnVuY3Rpb24gcmVjdENvbnRhaW5zKHAsUCl7dmFyIHI9dGhpcy5yZWN0KCk7aWYocil7cmV0dXJuIHA+PXIubGVmdCYmcDw9ci5sZWZ0K3Iud2lkdGgmJlA+PXIudG9wJiZQPD1yLnRvcCtyLmhlaWdodH1yZXR1cm4gZmFsc2V9O3EuZm4uaGFzVGFiSW5kZXg9ZnVuY3Rpb24gaGFzVGFiSW5kZXgoKXt2YXIgdD10aGlzLnByb3AoInRhYkluZGV4Iik7aWYodGhpcy5hdHRyKCJkaXNhYmxlZCIpJiYhdGhpcy5hdHRyKCJ0YWJpbmRleCIpKXt0PS0xfXJldHVybiFpc05hTih0KSYmdD49MH07cS5mbi5maXJzdEZvY3VzYWJsZURvbVJlZj1mdW5jdGlvbiBmaXJzdEZvY3VzYWJsZURvbVJlZigpe3ZhciBjPXRoaXMuZ2V0KDApO3ZhciBhPWZ1bmN0aW9uKGkpe3JldHVybiBxKHRoaXMpLmNzcygidmlzaWJpbGl0eSIpPT0iaGlkZGVuIn07aWYoIWN8fHEoYykuaXMoJzpoaWRkZW4nKXx8cShjKS5maWx0ZXIoYSkubGVuZ3RoPT0xKXtyZXR1cm4gbnVsbH12YXIgQz1jLmZpcnN0Q2hpbGQsbz1udWxsO3doaWxlKEMpe2lmKEMubm9kZVR5cGU9PTEmJnEoQykuaXMoJzp2aXNpYmxlJykpe2lmKHEoQykuaGFzVGFiSW5kZXgoKSl7cmV0dXJuIEN9aWYoQy5jaGlsZE5vZGVzKXtvPXEoQykuZmlyc3RGb2N1c2FibGVEb21SZWYoKTtpZihvKXtyZXR1cm4gb319fUM9Qy5uZXh0U2libGluZ31yZXR1cm4gbnVsbH07cS5mbi5sYXN0Rm9jdXNhYmxlRG9tUmVmPWZ1bmN0aW9uIGxhc3RGb2N1c2FibGVEb21SZWYoKXt2YXIgYz10aGlzLmdldCgwKTt2YXIgYT1mdW5jdGlvbihpKXtyZXR1cm4gcSh0aGlzKS5jc3MoInZpc2liaWxpdHkiKT09ImhpZGRlbiJ9O2lmKCFjfHxxKGMpLmlzKCc6aGlkZGVuJyl8fHEoYykuZmlsdGVyKGEpLmxlbmd0aD09MSl7cmV0dXJuIG51bGx9dmFyIEM9Yy5sYXN0Q2hpbGQsbz1udWxsO3doaWxlKEMpe2lmKEMubm9kZVR5cGU9PTEmJnEoQykuaXMoJzp2aXNpYmxlJykpe2lmKEMuY2hpbGROb2Rlcyl7bz1xKEMpLmxhc3RGb2N1c2FibGVEb21SZWYoKTtpZihvKXtyZXR1cm4gb319aWYocShDKS5oYXNUYWJJbmRleCgpKXtyZXR1cm4gQ319Qz1DLnByZXZpb3VzU2libGluZ31yZXR1cm4gbnVsbH07cS5mbi5zY3JvbGxMZWZ0UlRMPWZ1bmN0aW9uIHNjcm9sbExlZnRSVEwocCl7dmFyIG89dGhpcy5nZXQoMCk7aWYobyl7aWYocD09PXVuZGVmaW5lZCl7aWYoISFELmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXIpe3JldHVybiBvLnNjcm9sbFdpZHRoLW8uc2Nyb2xsTGVmdC1vLmNsaWVudFdpZHRofWVsc2UgaWYoISFELmJyb3dzZXIud2Via2l0KXtyZXR1cm4gby5zY3JvbGxMZWZ0fWVsc2UgaWYoISFELmJyb3dzZXIuZmlyZWZveCl7cmV0dXJuIG8uc2Nyb2xsV2lkdGgrby5zY3JvbGxMZWZ0LW8uY2xpZW50V2lkdGh9ZWxzZXtyZXR1cm4gby5zY3JvbGxMZWZ0fX1lbHNle28uc2Nyb2xsTGVmdD1xLnNhcC5kZW5vcm1hbGl6ZVNjcm9sbExlZnRSVEwocCxvKTtyZXR1cm4gdGhpc319fTtxLmZuLnNjcm9sbFJpZ2h0UlRMPWZ1bmN0aW9uIHNjcm9sbFJpZ2h0UlRMKCl7dmFyIG89dGhpcy5nZXQoMCk7aWYobyl7aWYoISFELmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXIpe3JldHVybiBvLnNjcm9sbExlZnR9ZWxzZSBpZighIUQuYnJvd3Nlci53ZWJraXQpe3JldHVybiBvLnNjcm9sbFdpZHRoLW8uc2Nyb2xsTGVmdC1vLmNsaWVudFdpZHRofWVsc2UgaWYoISFELmJyb3dzZXIuZmlyZWZveCl7cmV0dXJuKC1vLnNjcm9sbExlZnQpfWVsc2V7cmV0dXJuIG8uc2Nyb2xsTGVmdH19fTtxLnNhcC5kZW5vcm1hbGl6ZVNjcm9sbExlZnRSVEw9ZnVuY3Rpb24obixvKXtpZihvKXtpZighIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7cmV0dXJuIG8uc2Nyb2xsV2lkdGgtby5jbGllbnRXaWR0aC1ufWVsc2UgaWYoISFELmJyb3dzZXIud2Via2l0KXtyZXR1cm4gbn1lbHNlIGlmKCEhRC5icm93c2VyLmZpcmVmb3gpe3JldHVybiBvLmNsaWVudFdpZHRoK24tby5zY3JvbGxXaWR0aH1lbHNle3JldHVybiBufX19OwovKiEKCSAqIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIGFyZSB0YWtlbiBmcm9tIGpRdWVyeSBVSSAxLjguMTcgYnV0IG1vZGlmaWVkCgkgKgoJICogQ29weXJpZ2h0IDIwMTEsIEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KQoJICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuCgkgKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCgkgKgoJICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSQoJICovCmZ1bmN0aW9uIHYoZSl7dmFyIG89cShlKS5vZmZzZXRQYXJlbnQoKTt2YXIgTz1mYWxzZTt2YXIgJD1xKGUpLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtpZih0aGlzPT09byl7Tz10cnVlfXJldHVybiBPfSk7cmV0dXJuIXEoZSkuYWRkKCQpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBxLmNzcyh0aGlzLCJ2aXNpYmlsaXR5Iik9PT0iaGlkZGVuInx8cS5leHByLmZpbHRlcnMuaGlkZGVuKHRoaXMpfSkubGVuZ3RofWZ1bmN0aW9uIGYoZSxpKXt2YXIgbj1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoImFyZWEiPT09bil7dmFyIG09ZS5wYXJlbnROb2RlLGE9bS5uYW1lLGI7aWYoIWUuaHJlZnx8IWF8fG0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJtYXAiKXtyZXR1cm4gZmFsc2V9Yj1xKCJpbWdbdXNlbWFwPSMiK2ErIl0iKVswXTtyZXR1cm4hIWImJnYoYil9cmV0dXJuKC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdC8udGVzdChuKT8hZS5kaXNhYmxlZDoiYSI9PW4/ZS5ocmVmfHxpOmkpJiZ2KGUpfWlmKCFxLmV4cHJbIjoiXS5mb2N1c2FibGUpewovKiEKCQkgKiBUaGUgZm9sbG93aW5nIGZ1bmN0aW9uIGlzIHRha2VuIGZyb20galF1ZXJ5IFVJIDEuOC4xNwoJCSAqCgkJICogQ29weXJpZ2h0IDIwMTEsIEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KQoJCSAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLgoJCSAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKCQkgKgoJCSAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkKCQkgKgoJCSAqIEJ1dCBzaW5jZSB2aXNpYmxlIGlzIG1vZGlmaWVkLCBmb2N1c2FibGUgaXMgZGlmZmVyZW50IHRvbyB0aGUgalF1ZXJ5IFVJIHZlcnNpb24gdG9vLgoJCSAqLwpxLmV4dGVuZChxLmV4cHJbIjoiXSx7Zm9jdXNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBmKGUsIWlzTmFOKHEuYXR0cihlLCJ0YWJpbmRleCIpKSl9fSl9aWYoIXEuZXhwclsiOiJdLnNhcFRhYmJhYmxlKXsKLyohCgkJICogVGhlIGZvbGxvd2luZyBmdW5jdGlvbiBpcyB0YWtlbiBmcm9tCgkJICogalF1ZXJ5IFVJIENvcmUgMS4xMC40CgkJICogaHR0cDovL2pxdWVyeXVpLmNvbQoJCSAqCgkJICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwoJCSAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KCQkgKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCgkJICoKCQkgKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9jYXRlZ29yeS91aS1jb3JlLwoJCSAqLwpxLmV4dGVuZChxLmV4cHJbIjoiXSx7c2FwVGFiYmFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9cS5hdHRyKGUsInRhYmluZGV4IiksaT1pc05hTih0KTtyZXR1cm4oaXx8dD49MCkmJmYoZSwhaSl9fSl9aWYoIXEuZXhwclsiOiJdLnNhcEZvY3VzYWJsZSl7cS5leHRlbmQocS5leHByWyI6Il0se3NhcEZvY3VzYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gZihlLCFpc05hTihxLmF0dHIoZSwidGFiaW5kZXgiKSkpfX0pfWlmKCFxLmZuLnpJbmRleCl7cS5mbi56SW5kZXg9ZnVuY3Rpb24oeil7aWYoeiE9PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuY3NzKCJ6SW5kZXgiLHopfWlmKHRoaXMubGVuZ3RoKXt2YXIgZT1xKHRoaXNbMF0pLHAsYTt3aGlsZShlLmxlbmd0aCYmZVswXSE9PWRvY3VtZW50KXtwPWUuY3NzKCJwb3NpdGlvbiIpO2lmKHA9PT0iYWJzb2x1dGUifHxwPT09InJlbGF0aXZlInx8cD09PSJmaXhlZCIpe2E9cGFyc2VJbnQoZS5jc3MoInpJbmRleCIpLDEwKTtpZighaXNOYU4oYSkmJmEhPT0wKXtyZXR1cm4gYX19ZT1lLnBhcmVudCgpfX1yZXR1cm4gMH19cS5mbi5wYXJlbnRCeUF0dHJpYnV0ZT1mdW5jdGlvbiBwYXJlbnRCeUF0dHJpYnV0ZShhLFYpe2lmKHRoaXMubGVuZ3RoPjApe2lmKFYpe3JldHVybiB0aGlzLmZpcnN0KCkucGFyZW50cygiWyIrYSsiPSciK1YrIiddIikuZ2V0KDApfWVsc2V7cmV0dXJuIHRoaXMuZmlyc3QoKS5wYXJlbnRzKCJbIithKyJdIikuZ2V0KDApfX19O3Euc2FwLm93bmVyV2luZG93PWZ1bmN0aW9uIG93bmVyV2luZG93KG8pe2lmKG8ub3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3cpe3JldHVybiBvLm93bmVyRG9jdW1lbnQucGFyZW50V2luZG93fXJldHVybiBvLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXd9O3ZhciBfPXt9O3Euc2FwLnNjcm9sbGJhclNpemU9ZnVuY3Rpb24oYyxGKXtpZih0eXBlb2YgYz09PSJib29sZWFuIil7Rj1jO2M9bnVsbH12YXIgaz1jfHwiI0RFRkFVTFQiO2lmKEYpe2lmKGMpe2RlbGV0ZSBfW2NdfWVsc2V7Xz17fX19aWYoX1trXSl7cmV0dXJuIF9ba119aWYoIWRvY3VtZW50LmJvZHkpe3JldHVybnt3aWR0aDowLGhlaWdodDowfX12YXIgYT1xKCI8RElWLz4iKS5jc3MoInZpc2liaWxpdHkiLCJoaWRkZW4iKS5jc3MoImhlaWdodCIsIjAiKS5jc3MoIndpZHRoIiwiMCIpLmNzcygib3ZlcmZsb3ciLCJoaWRkZW4iKTtpZihjKXthLmFkZENsYXNzKGMpfWEucHJlcGVuZFRvKGRvY3VtZW50LmJvZHkpO3ZhciAkPXEoIjxkaXYgc3R5bGU9XCJ2aXNpYmlsaXR5OnZpc2libGU7cG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0OjEwMHB4O3dpZHRoOjEwMHB4O292ZXJmbG93OnNjcm9sbDtvcGFjaXR5OjA7XCI+PC9kaXY+Iik7YS5hcHBlbmQoJCk7dmFyIG89JC5nZXQoMCk7dmFyIHc9by5vZmZzZXRXaWR0aC1vLnNjcm9sbFdpZHRoO3ZhciBoPW8ub2Zmc2V0SGVpZ2h0LW8uc2Nyb2xsSGVpZ2h0O2EucmVtb3ZlKCk7aWYodz09PTB8fGg9PT0wKXtyZXR1cm57d2lkdGg6dyxoZWlnaHQ6aH19X1trXT17d2lkdGg6dyxoZWlnaHQ6aH07cmV0dXJuIF9ba119O3Euc2FwLnN5bmNTdHlsZUNsYXNzPWZ1bmN0aW9uKHMsUyxhKXtpZighcylyZXR1cm4gYTtpZihTIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuQ29udHJvbCl7Uz1TLiQoKX1lbHNlIGlmKHR5cGVvZiBTPT09InN0cmluZyIpe1M9cS5zYXAuYnlJZChTKX1lbHNlIGlmKCEoUyBpbnN0YW5jZW9mIHEpKXtyZXR1cm4gYX12YXIgYz0hIVMuY2xvc2VzdCgiLiIrcykubGVuZ3RoO2lmKGEgaW5zdGFuY2VvZiBxKXthLnRvZ2dsZUNsYXNzKHMsYyl9ZWxzZSBpZihhIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuQ29udHJvbCl7YS50b2dnbGVTdHlsZUNsYXNzKHMsYyl9ZWxzZXt9cmV0dXJuIGF9O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuZW5jb2RlcicpKXsKLyohCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KalF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLmVuY29kZXInKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLmVuY29kZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaChpLGwpe3ZhciBnPWkudG9TdHJpbmcoMTYpO2lmKGwpe3doaWxlKGw+Zy5sZW5ndGgpe2c9IjAiK2d9fXJldHVybiBnfXZhciByPS9bXHgwMC1ceDJiXHgyZlx4M2EtXHg0MFx4NWItXHg1ZVx4NjBceDdiLVx4ZmZcdTIwMjhcdTIwMjldL2csYT0vW1x4MDAtXHgwOFx4MGJceDBjXHgwZS1ceDFmXHg3Zi1ceDlmXS8sSD17IjwiOiImbHQ7IiwiPiI6IiZndDsiLCImIjoiJmFtcDsiLCJcIiI6IiZxdW90OyJ9O3ZhciBmPWZ1bmN0aW9uKGcpe3ZhciBFPUhbZ107aWYoIUUpe2lmKGEudGVzdChnKSl7RT0iJiN4ZmZmZDsifWVsc2V7RT0iJiN4IitoKGcuY2hhckNvZGVBdCgwKSkrIjsifUhbZ109RX1yZXR1cm4gRX07cS5zYXAuZW5jb2RlSFRNTD1mdW5jdGlvbihTKXtyZXR1cm4gUy5yZXBsYWNlKHIsZil9O3Euc2FwLmVuY29kZVhNTD1mdW5jdGlvbihTKXtyZXR1cm4gUy5yZXBsYWNlKHIsZil9O3Euc2FwLmVzY2FwZUhUTUw9ZnVuY3Rpb24oUyl7cmV0dXJuIFMucmVwbGFjZShyLGYpfTt2YXIgYj0vW1x4MDAtXHgyYlx4MmRceDJmXHgzYS1ceDQwXHg1Yi1ceDVlXHg2MFx4N2ItXHhmZlx1MjAyOFx1MjAyOV0vZyxqPXt9O3ZhciBKPWZ1bmN0aW9uKGcpe3ZhciBFPWpbZ107aWYoIUUpe3ZhciBpPWcuY2hhckNvZGVBdCgwKTtpZihpPDI1Nil7RT0iXFx4IitoKGksMil9ZWxzZXtFPSJcXHUiK2goaSw0KX1qW2ddPUV9cmV0dXJuIEV9O3Euc2FwLmVuY29kZUpTPWZ1bmN0aW9uKFMpe3JldHVybiBTLnJlcGxhY2UoYixKKX07cS5zYXAuZXNjYXBlSlM9ZnVuY3Rpb24oUyl7cmV0dXJuIFMucmVwbGFjZShiLEopfTt2YXIgYz0vW1x4MDAtXHgyY1x4MmZceDNhLVx4NDBceDViLVx4NWVceDYwXHg3Yi1cdWZmZmZdL2csdT17fTt2YXIgVT1mdW5jdGlvbihnKXt2YXIgRT11W2ddO2lmKCFFKXt2YXIgaT1nLmNoYXJDb2RlQXQoMCk7aWYoaTwxMjgpe0U9IiUiK2goaSwyKX1lbHNlIGlmKGk8MjA0OCl7RT0iJSIraCgoaT4+Nil8MTkyLDIpKyIlIitoKChpJjYzKXwxMjgsMil9ZWxzZXtFPSIlIitoKChpPj4xMil8MjI0LDIpKyIlIitoKCgoaT4+NikmNjMpfDEyOCwyKSsiJSIraCgoaSY2Myl8MTI4LDIpfXVbZ109RX1yZXR1cm4gRX07cS5zYXAuZW5jb2RlVVJMPWZ1bmN0aW9uKFMpe3JldHVybiBTLnJlcGxhY2UoYyxVKX07cS5zYXAuZW5jb2RlVVJMUGFyYW1ldGVycz1mdW5jdGlvbihwKXtpZighcCl7cmV0dXJuIiJ9dmFyIGc9W107cS5lYWNoKHAsZnVuY3Rpb24obix2KXtpZihxLnR5cGUodik9PT0ic3RyaW5nIil7dj1xLnNhcC5lbmNvZGVVUkwodil9Zy5wdXNoKHEuc2FwLmVuY29kZVVSTChuKSsiPSIrdil9KTtyZXR1cm4gZy5qb2luKCImIil9O3ZhciBkPS9bXHgwMC1ceDJmXHgzYS1ceDQwXHg1Yi1ceDYwXHg3Yi1ceGZmXHUyMDI4XHUyMDI5XVswLTlBLUZhLWZdPy9nO3ZhciBDPWZ1bmN0aW9uKGcpe3ZhciBpPWcuY2hhckNvZGVBdCgwKTtpZihnLmxlbmd0aD09MSl7cmV0dXJuIlxcIitoKGkpfWVsc2V7cmV0dXJuIlxcIitoKGkpKyIgIitnLnN1YnN0cigxKX19O3Euc2FwLmVuY29kZUNTUz1mdW5jdGlvbihTKXtyZXR1cm4gUy5yZXBsYWNlKGQsQyl9O2Z1bmN0aW9uIFcocCxnLGksayl7aWYocCl7dGhpcy5wcm90b2NvbD1wLnRvVXBwZXJDYXNlKCl9aWYoZyl7dGhpcy5ob3N0PWcudG9VcHBlckNhc2UoKX10aGlzLnBvcnQ9aTt0aGlzLnBhdGg9a312YXIgdz1uZXcgQXJyYXkoKTtxLnNhcC5jbGVhclVybFdoaXRlbGlzdD1mdW5jdGlvbigpe3cuc3BsaWNlKDAsdy5sZW5ndGgpfTtxLnNhcC5hZGRVcmxXaGl0ZWxpc3Q9ZnVuY3Rpb24ocCxnLGksayl7dmFyIEU9bmV3IFcocCxnLGksayk7dmFyIEk9dy5sZW5ndGg7d1tJXT1FfTtxLnNhcC5yZW1vdmVVcmxXaGl0ZWxpc3Q9ZnVuY3Rpb24oaSl7dy5zcGxpY2UoaSwxKX07cS5zYXAuZ2V0VXJsV2hpdGVsaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHcuc2xpY2UoKX07cS5zYXAudmFsaWRhdGVVcmw9ZnVuY3Rpb24oZyl7dmFyIGs9Lyg/OihbXjpcLz8jXSspOik/KD86XC9cLyhbXlwvPyM6XSopKD86OihbMC05XSspKT8pPyhbXj8jXSopKD86XD8oW14jXSopKT8oPzojKC4qKSk/Ly5leGVjKGcpO2lmKCFrKXtyZXR1cm4ga312YXIgcD1rWzFdLGw9a1syXSxQPWtbM10sbT1rWzRdLFE9a1s1XSxuPWtbNl07dmFyIG89L1tceDAwLVx4MjRceDI2LVx4MjlceDJiXHgyY1x4MmZceDNhLVx4NDBceDViLVx4NWVceDYwXHg3Yi1ceDdkXHg3Zi1cdWZmZmZdLzt2YXIgdD0vW2EtejAtOSEjJCUmJyorXC89P15fYHt8fX4tXSsoPzpcLlthLXowLTkhIyQlJicqK1wvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/LztpZihwKXtwPXAudG9VcHBlckNhc2UoKTtpZih3Lmxlbmd0aDw9MCl7aWYoIS9eKGh0dHBzP3xmdHApL2kudGVzdChwKSl7cmV0dXJuIGZhbHNlfX19aWYobCl7bD1sLnRvVXBwZXJDYXNlKCl9aWYobSl7aWYocD09PSJNQUlMVE8iKXt2YXIgdj10LnRlc3QobSk7aWYoIXYpe3JldHVybiBmYWxzZX19ZWxzZXt2YXIgeD1tLnNwbGl0KCIvIik7Zm9yKHZhciBpPTA7aTx4Lmxlbmd0aDtpKyspe3ZhciB2PW8udGVzdCh4W2ldKTtpZih2KXtyZXR1cm4gZmFsc2V9fX19aWYoUSl7dmFyIHg9US5zcGxpdCgiJiIpO2Zvcih2YXIgaT0wO2k8eC5sZW5ndGg7aSsrKXt2YXIgeT14W2ldLnNlYXJjaCgiPSIpO2lmKHkhPS0xKXt2YXIgej14W2ldLnN1YnN0cmluZygwLHkpO3ZhciBBPXhbaV0uc3Vic3RyaW5nKHkrMSk7dmFyIEI9by50ZXN0KHopO3ZhciBEPW8udGVzdChBKTtpZihCfHxEKXtyZXR1cm4gZmFsc2V9fX19aWYobil7aWYoby50ZXN0KG4pKXtyZXR1cm4gZmFsc2V9fWlmKHcubGVuZ3RoPjApe3ZhciBGPWZhbHNlO2Zvcih2YXIgaT0wO2k8dy5sZW5ndGg7aSsrKXtpZighcHx8IXdbaV0ucHJvdG9jb2x8fHA9PXdbaV0ucHJvdG9jb2wpe3ZhciBPPWZhbHNlO2lmKGwmJndbaV0uaG9zdCYmL15cKi8udGVzdCh3W2ldLmhvc3QpKXt2YXIgRT13W2ldLmhvc3Quc2xpY2UoMSkucmVwbGFjZSgvWy1bXF17fSgpKis/LixcXF4kfCNcc10vZywiXFwkJiIpO3ZhciBHPVJlZ0V4cChFKyIkIik7aWYoRy50ZXN0KGwpKXtPPXRydWV9fWVsc2UgaWYoIWx8fCF3W2ldLmhvc3R8fGw9PXdbaV0uaG9zdCl7Tz10cnVlfWlmKE8pe2lmKCghbCYmIVApfHwhd1tpXS5wb3J0fHxQPT13W2ldLnBvcnQpe2lmKHdbaV0ucGF0aCYmL1wqJC8udGVzdCh3W2ldLnBhdGgpKXt2YXIgST13W2ldLnBhdGguc2xpY2UoMCwtMSkucmVwbGFjZSgvWy1bXF17fSgpKis/LixcXF4kfCNcc10vZywiXFwkJiIpO3ZhciBHPVJlZ0V4cCgiXiIrSSk7aWYoRy50ZXN0KG0pKXtGPXRydWV9fWVsc2UgaWYoIXdbaV0ucGF0aHx8bT09d1tpXS5wYXRoKXtGPXRydWV9fX19aWYoRil7YnJlYWt9fWlmKCFGKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfTtxLnNhcC5fc2FuaXRpemVIVE1MPWZ1bmN0aW9uKGcsbyl7cmV0dXJuIHMoZyxvfHx7dXJpUmV3cml0ZXI6ZnVuY3Rpb24oaSl7aWYocS5zYXAudmFsaWRhdGVVcmwoaSkpe3JldHVybiBpfX19KX07cS5zYXAuX3NldEhUTUxTYW5pdGl6ZXI9ZnVuY3Rpb24ocyl7cz1zfHxlfTtmdW5jdGlvbiBlKGcsbyl7aWYoIXdpbmRvdy5odG1sfHwhd2luZG93Lmh0bWwuc2FuaXRpemUpe3Euc2FwLnJlcXVpcmUoInNhcC51aS50aGlyZHBhcnR5LmNhamEtaHRtbC1zYW5pdGl6ZXIiKTt9dmFyIHQ9by50YWdQb2xpY3l8fHdpbmRvdy5odG1sLm1ha2VUYWdQb2xpY3koby51cmlSZXdyaXRlcixvLnRva2VuUG9saWN5KTtyZXR1cm4gd2luZG93Lmh0bWwuc2FuaXRpemVXaXRoUG9saWN5KGcsdCl9dmFyIHM9ZTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLmV2ZW50cycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuZXZlbnRzJyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5ldmVudHMiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdqcXVlcnkuc2FwLmtleWNvZGVzJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3Euc2FwLl90b3VjaFRvTW91c2VFdmVudD10cnVlO3ZhciBvLGEsYixjLGQsbSxJPWZhbHNlO2lmKHNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQmJi9Nb2JpbGUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJnNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCl7ST10cnVlO3ZhciBzPShmdW5jdGlvbigpe3ZhciBlPXdpbmRvdy5kb2N1bWVudCxIPWZhbHNlLHQ9bnVsbCxqPWZhbHNlLHIsdSxpPTA7bT1bIm1vdXNlZG93biIsIm1vdXNlb3ZlciIsIm1vdXNldXAiLCJtb3VzZW91dCIsImNsaWNrIl07dmFyIHY9ZnVuY3Rpb24oVCxFKXtpZighSCl7cmV0dXJufXZhciBNPUUudHlwZT09InRvdWNoZW5kIj9FLmNoYW5nZWRUb3VjaGVzWzBdOkUudG91Y2hlc1swXTt2YXIgeD1lLmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50Jyk7eC5pbml0TW91c2VFdmVudChULHRydWUsdHJ1ZSx3aW5kb3csRS5kZXRhaWwsTS5zY3JlZW5YLE0uc2NyZWVuWSxNLmNsaWVudFgsTS5jbGllbnRZLEUuY3RybEtleSxFLnNoaWZ0S2V5LEUuYWx0S2V5LEUubWV0YUtleSxFLmJ1dHRvbixFLnJlbGF0ZWRUYXJnZXQpO3guaXNTeW50aGV0aWM9dHJ1ZTt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3QuZGlzcGF0Y2hFdmVudCh4KX0sMCl9O3ZhciB3PWZ1bmN0aW9uKEUpe3JldHVybiBFLnRhcmdldC50YWdOYW1lLm1hdGNoKC9pbnB1dHx0ZXh0YXJlYXxzZWxlY3QvaSl9O2Q9ZnVuY3Rpb24oRSl7aWYoIUUuaXNTeW50aGV0aWMmJiF3KEUpKXtFLnN0b3BQcm9wYWdhdGlvbigpO0UucHJldmVudERlZmF1bHQoKX19O289ZnVuY3Rpb24oRSl7dmFyIFQ9RS50b3VjaGVzLHg7SD0oVC5sZW5ndGg9PTEmJiF3KEUpKTtqPWZhbHNlO2lmKEgpe3g9VFswXTt0PXgudGFyZ2V0O2lmKHQubm9kZVR5cGU9PT0zKXt0PXQucGFyZW50Tm9kZX1yPXguY2xpZW50WDt1PXguY2xpZW50WTt2KCJtb3VzZWRvd24iLEUpfX07YT1mdW5jdGlvbihFKXt2YXIgVDtpZihIKXtUPUUudG91Y2hlc1swXTtpZihNYXRoLmFicyhULmNsaWVudFgtcik+MTB8fE1hdGguYWJzKFQuY2xpZW50WS11KT4xMCl7aj10cnVlfWlmKGope3YoIm1vdXNlbW92ZSIsRSl9fX07Yj1mdW5jdGlvbihFKXt2KCJtb3VzZXVwIixFKTtpZighail7digiY2xpY2siLEUpfX07Yz1mdW5jdGlvbihFKXt2KCJtb3VzZXVwIixFKX07Zm9yKDtpPG0ubGVuZ3RoO2krKyl7ZS5hZGRFdmVudExpc3RlbmVyKG1baV0sZCx0cnVlKX1lLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLG8sdHJ1ZSk7ZS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLGEsdHJ1ZSk7ZS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsYix0cnVlKTtlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJyxjLHRydWUpfSgpKX1xLnNhcC5kaXNhYmxlVG91Y2hUb01vdXNlSGFuZGxpbmc9ZnVuY3Rpb24oKXt2YXIgaT0wO2lmKCFJKXtyZXR1cm59ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsbyx0cnVlKTtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLGEsdHJ1ZSk7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLGIsdHJ1ZSk7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLGMsdHJ1ZSk7Zm9yKDtpPG0ubGVuZ3RoO2krKyl7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihtW2ldLGQsdHJ1ZSl9fTtxLnNhcC5Db250cm9sRXZlbnRzPVsiY2xpY2siLCJkYmxjbGljayIsImNvbnRleHRtZW51IiwiZm9jdXNpbiIsImZvY3Vzb3V0Iiwia2V5ZG93biIsImtleXByZXNzIiwia2V5dXAiLCJtb3VzZWRvd24iLCJtb3VzZW91dCIsIm1vdXNlb3ZlciIsIm1vdXNldXAiLCJzZWxlY3QiLCJzZWxlY3RzdGFydCIsImRyYWdzdGFydCIsImRyYWdlbnRlciIsImRyYWdvdmVyIiwiZHJhZ2xlYXZlIiwiZHJhZ2VuZCIsImRyb3AiLCJwYXN0ZSIsImN1dCIsImlucHV0Il07aWYoc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoKXtxLnNhcC5Db250cm9sRXZlbnRzLnB1c2goInRvdWNoc3RhcnQiLCJ0b3VjaGVuZCIsInRvdWNobW92ZSIsInRvdWNoY2FuY2VsIil9cS5zYXAuUHNldWRvRXZlbnRzPXtzYXBkb3duOntzTmFtZToic2FwZG93biIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTiYmIWsoZSl9fSxzYXBkb3dubW9kaWZpZXJzOntzTmFtZToic2FwZG93bm1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTiYmayhlKX19LHNhcHNob3c6e3NOYW1lOiJzYXBzaG93IixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4oZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5GNCYmIWsoZSkpfHwoZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19ET1dOJiZoKGUsZmFsc2UsdHJ1ZSxmYWxzZSkpfX0sc2FwdXA6e3NOYW1lOiJzYXB1cCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVAmJiFrKGUpfX0sc2FwdXBtb2RpZmllcnM6e3NOYW1lOiJzYXB1cG1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVAmJmsoZSl9fSxzYXBoaWRlOntzTmFtZToic2FwaGlkZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVAmJmgoZSxmYWxzZSx0cnVlLGZhbHNlKX19LHNhcGxlZnQ6e3NOYW1lOiJzYXBsZWZ0IixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUJiYhayhlKX19LHNhcGxlZnRtb2RpZmllcnM6e3NOYW1lOiJzYXBsZWZ0bW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUJiZrKGUpfX0sc2FwcmlnaHQ6e3NOYW1lOiJzYXByaWdodCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQmJiFrKGUpfX0sc2FwcmlnaHRtb2RpZmllcnM6e3NOYW1lOiJzYXByaWdodG1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQmJmsoZSl9fSxzYXBob21lOntzTmFtZToic2FwaG9tZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuSE9NRSYmIWsoZSl9fSxzYXBob21lbW9kaWZpZXJzOntzTmFtZToic2FwaG9tZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuSE9NRSYmayhlKX19LHNhcHRvcDp7c05hbWU6InNhcHRvcCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuSE9NRSYmaChlLHRydWUsZmFsc2UsZmFsc2UpfX0sc2FwZW5kOntzTmFtZToic2FwZW5kIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5FTkQmJiFrKGUpfX0sc2FwZW5kbW9kaWZpZXJzOntzTmFtZToic2FwZW5kbW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5FTkQmJmsoZSl9fSxzYXBib3R0b206e3NOYW1lOiJzYXBib3R0b20iLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkVORCYmaChlLHRydWUsZmFsc2UsZmFsc2UpfX0sc2FwcGFnZXVwOntzTmFtZToic2FwcGFnZXVwIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5QQUdFX1VQJiYhayhlKX19LHNhcHBhZ2V1cG1vZGlmaWVyczp7c05hbWU6InNhcHBhZ2V1cG1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuUEFHRV9VUCYmayhlKX19LHNhcHBhZ2Vkb3duOntzTmFtZToic2FwcGFnZWRvd24iLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlBBR0VfRE9XTiYmIWsoZSl9fSxzYXBwYWdlZG93bm1vZGlmaWVyczp7c05hbWU6InNhcHBhZ2Vkb3dubW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5QQUdFX0RPV04mJmsoZSl9fSxzYXBzZWxlY3Q6e3NOYW1lOiJzYXBzZWxlY3QiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybihlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkVOVEVSfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlNQQUNFKSYmIWsoZSl9fSxzYXBzZWxlY3Rtb2RpZmllcnM6e3NOYW1lOiJzYXBzZWxlY3Rtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybihlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkVOVEVSfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlNQQUNFKSYmayhlKX19LHNhcHNwYWNlOntzTmFtZToic2Fwc3BhY2UiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlNQQUNFJiYhayhlKX19LHNhcHNwYWNlbW9kaWZpZXJzOntzTmFtZToic2Fwc3BhY2Vtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlNQQUNFJiZrKGUpfX0sc2FwZW50ZXI6e3NOYW1lOiJzYXBlbnRlciIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRU5URVImJiFrKGUpfX0sc2FwZW50ZXJtb2RpZmllcnM6e3NOYW1lOiJzYXBlbnRlcm1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRU5URVImJmsoZSl9fSxzYXBiYWNrc3BhY2U6e3NOYW1lOiJzYXBiYWNrc3BhY2UiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkJBQ0tTUEFDRSYmIWsoZSl9fSxzYXBiYWNrc3BhY2Vtb2RpZmllcnM6e3NOYW1lOiJzYXBiYWNrc3BhY2Vtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkJBQ0tTUEFDRSYmayhlKX19LHNhcGRlbGV0ZTp7c05hbWU6InNhcGRlbGV0ZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuREVMRVRFJiYhayhlKX19LHNhcGRlbGV0ZW1vZGlmaWVyczp7c05hbWU6InNhcGRlbGV0ZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuREVMRVRFJiZrKGUpfX0sc2FwZXhwYW5kOntzTmFtZToic2FwZXhwYW5kIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5OVU1QQURfUExVUyYmIWsoZSl9fSxzYXBleHBhbmRtb2RpZmllcnM6e3NOYW1lOiJzYXBleHBhbmRtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLk5VTVBBRF9QTFVTJiZrKGUpfX0sc2FwY29sbGFwc2U6e3NOYW1lOiJzYXBjb2xsYXBzZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuTlVNUEFEX01JTlVTJiYhayhlKX19LHNhcGNvbGxhcHNlbW9kaWZpZXJzOntzTmFtZToic2FwY29sbGFwc2Vtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLk5VTVBBRF9NSU5VUyYmayhlKX19LHNhcGNvbGxhcHNlYWxsOntzTmFtZToic2FwY29sbGFwc2VhbGwiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLk5VTVBBRF9BU1RFUklTSyYmIWsoZSl9fSxzYXBlc2NhcGU6e3NOYW1lOiJzYXBlc2NhcGUiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkVTQ0FQRSYmIWsoZSl9fSxzYXB0YWJuZXh0OntzTmFtZToic2FwdGFibmV4dCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuVEFCJiYhayhlKX19LHNhcHRhYnByZXZpb3VzOntzTmFtZToic2FwdGFicHJldmlvdXMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlRBQiYmaChlLGZhbHNlLGZhbHNlLHRydWUpfX0sc2Fwc2tpcGZvcndhcmQ6e3NOYW1lOiJzYXBza2lwZm9yd2FyZCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRjYmJiFrKGUpfX0sc2Fwc2tpcGJhY2s6e3NOYW1lOiJzYXBza2lwYmFjayIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRjYmJmgoZSxmYWxzZSxmYWxzZSx0cnVlKX19LHNhcGRlY3JlYXNlOntzTmFtZToic2FwZGVjcmVhc2UiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciBpPXI/cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQ6cS5zYXAuS2V5Q29kZXMuQVJST1dfTEVGVDtyZXR1cm4oZS5rZXlDb2RlPT1pfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0RPV04pJiYhayhlKX19LHNhcGRlY3JlYXNlbW9kaWZpZXJzOntzTmFtZToic2FwZGVjcmVhc2Vtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciBpPXI/cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQ6cS5zYXAuS2V5Q29kZXMuQVJST1dfTEVGVDtyZXR1cm4oZS5rZXlDb2RlPT1pfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0RPV04pJiZrKGUpfX0sc2FwaW5jcmVhc2U6e3NOYW1lOiJzYXBpbmNyZWFzZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIE49cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUOnEuc2FwLktleUNvZGVzLkFSUk9XX1JJR0hUO3JldHVybihlLmtleUNvZGU9PU58fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVApJiYhayhlKX19LHNhcGluY3JlYXNlbW9kaWZpZXJzOntzTmFtZToic2FwaW5jcmVhc2Vtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciBOPXI/cS5zYXAuS2V5Q29kZXMuQVJST1dfTEVGVDpxLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVDtyZXR1cm4oZS5rZXlDb2RlPT1OfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX1VQKSYmayhlKX19LHNhcHByZXZpb3VzOntzTmFtZToic2FwcHJldmlvdXMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciBpPXI/cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQ6cS5zYXAuS2V5Q29kZXMuQVJST1dfTEVGVDtyZXR1cm4oZS5rZXlDb2RlPT1pfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX1VQKSYmIWsoZSl9fSxzYXBwcmV2aW91c21vZGlmaWVyczp7c05hbWU6InNhcHByZXZpb3VzbW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXt2YXIgcj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTt2YXIgaT1yP3Euc2FwLktleUNvZGVzLkFSUk9XX1JJR0hUOnEuc2FwLktleUNvZGVzLkFSUk9XX0xFRlQ7cmV0dXJuKGUua2V5Q29kZT09aXx8ZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCkmJmsoZSl9fSxzYXBuZXh0OntzTmFtZToic2FwbmV4dCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIE49cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUOnEuc2FwLktleUNvZGVzLkFSUk9XX1JJR0hUO3JldHVybihlLmtleUNvZGU9PU58fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTikmJiFrKGUpfX0sc2FwbmV4dG1vZGlmaWVyczp7c05hbWU6InNhcG5leHRtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciBOPXI/cS5zYXAuS2V5Q29kZXMuQVJST1dfTEVGVDpxLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVDtyZXR1cm4oZS5rZXlDb2RlPT1OfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0RPV04pJiZrKGUpfX0sc2FwZGVsYXllZGRvdWJsZWNsaWNrOntzTmFtZToic2FwZGVsYXllZGRvdWJsZWNsaWNrIixhVHlwZXM6WyJjbGljayJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIGk9cShlLnRhcmdldCk7dmFyIGo9ZS50aW1lU3RhbXA7dmFyIHI9aS5kYXRhKCJzYXBkZWxheWVkZG91YmxlY2xpY2tfbGFzdENsaWNrVGltZXN0YW1wIik7dmFyIHQ9cnx8MDtpLmRhdGEoInNhcGRlbGF5ZWRkb3VibGVjbGlja19sYXN0Q2xpY2tUaW1lc3RhbXAiLGopO3ZhciB1PWotdDtyZXR1cm4odT49MzAwJiZ1PD0xMzAwKX19fTt2YXIgUD1bInNhcGRvd24iLCJzYXBkb3dubW9kaWZpZXJzIiwic2Fwc2hvdyIsInNhcHVwIiwic2FwdXBtb2RpZmllcnMiLCJzYXBoaWRlIiwic2FwbGVmdCIsInNhcGxlZnRtb2RpZmllcnMiLCJzYXByaWdodCIsInNhcHJpZ2h0bW9kaWZpZXJzIiwic2FwaG9tZSIsInNhcGhvbWVtb2RpZmllcnMiLCJzYXB0b3AiLCJzYXBlbmQiLCJzYXBlbmRtb2RpZmllcnMiLCJzYXBib3R0b20iLCJzYXBwYWdldXAiLCJzYXBwYWdldXBtb2RpZmllcnMiLCJzYXBwYWdlZG93biIsInNhcHBhZ2Vkb3dubW9kaWZpZXJzIiwic2Fwc2VsZWN0Iiwic2Fwc2VsZWN0bW9kaWZpZXJzIiwic2Fwc3BhY2UiLCJzYXBzcGFjZW1vZGlmaWVycyIsInNhcGVudGVyIiwic2FwZW50ZXJtb2RpZmllcnMiLCJzYXBleHBhbmQiLCJzYXBiYWNrc3BhY2UiLCJzYXBiYWNrc3BhY2Vtb2RpZmllcnMiLCJzYXBkZWxldGUiLCJzYXBkZWxldGVtb2RpZmllcnMiLCJzYXBleHBhbmRtb2RpZmllcnMiLCJzYXBjb2xsYXBzZSIsInNhcGNvbGxhcHNlbW9kaWZpZXJzIiwic2FwY29sbGFwc2VhbGwiLCJzYXBlc2NhcGUiLCJzYXB0YWJuZXh0Iiwic2FwdGFicHJldmlvdXMiLCJzYXBza2lwZm9yd2FyZCIsInNhcHNraXBiYWNrIiwic2FwcHJldmlvdXMiLCJzYXBwcmV2aW91c21vZGlmaWVycyIsInNhcG5leHQiLCJzYXBuZXh0bW9kaWZpZXJzIiwic2FwZGVjcmVhc2UiLCJzYXBkZWNyZWFzZW1vZGlmaWVycyIsInNhcGluY3JlYXNlIiwic2FwaW5jcmVhc2Vtb2RpZmllcnMiLCJzYXBkZWxheWVkZG91YmxlY2xpY2siXTsoZnVuY3Rpb24gaW5pdFRvdWNoRXZlbnRTdXBwb3J0KCl7cS5zYXAudG91Y2hFdmVudE1vZGU9IlNJTSI7dmFyIEE9W107dmFyIGU9W107aWYoc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoKXtxLnNhcC50b3VjaEV2ZW50TW9kZT0iT04iO3EuZXZlbnQucHJvcHMucHVzaCgidG91Y2hlcyIsInRhcmdldFRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIpfXZhciBqPWZ1bmN0aW9uKHgseSxIKXt2YXIgej0iX18iK3grIkhhbmRsZXIiO3ZhciBCPSJzYXAiK3g7QS5wdXNoKEIpO2UucHVzaCh7c05hbWU6eCxhVHlwZXM6W0JdLGZuQ2hlY2s6ZnVuY3Rpb24oRSl7cmV0dXJuIHRydWV9fSk7cS5ldmVudC5zcGVjaWFsW0JdPXthZGQ6ZnVuY3Rpb24oQyl7dmFyIEQ9dGhpcywkPXEodGhpcyksRT17ZG9tUmVmOkQsZXZlbnROYW1lOngsc2FwRXZlbnROYW1lOkIsZXZlbnRIYW5kbGU6Q307dmFyIEc9ZnVuY3Rpb24oSil7SChKLEUpfTtDLl9fc2FwU2ltdWxhdGVkRXZlbnRIYW5kbGVyPUc7Zm9yKHZhciBpPTA7aTx5Lmxlbmd0aDtpKyspeyQub24oeVtpXSxHKX19LHJlbW92ZTpmdW5jdGlvbihDKXt2YXIgJD1xKHRoaXMpO3ZhciBIPUMuX19zYXBTaW11bGF0ZWRFdmVudEhhbmRsZXI7JC5yZW1vdmVEYXRhKHorQy5ndWlkKTtmb3IodmFyIGk9MDtpPHkubGVuZ3RoO2krKyl7cS5ldmVudC5yZW1vdmUodGhpcyx5W2ldLEgpfX19fTt2YXIgTT1mdW5jdGlvbihFLEMpe3ZhciBEPXEoQy5kb21SZWYpO2lmKEUuaXNNYXJrZWQoImRlbGF5ZWRNb3VzZUV2ZW50Iikpe3JldHVybn1pZighKEUudHlwZSE9Im1vdXNlb3V0Inx8KEUudHlwZT09PSJtb3VzZW91dCImJnEuc2FwLmNoZWNrTW91c2VFbnRlck9yTGVhdmUoRSxDLmRvbVJlZikpKSl7dmFyIHg9dHJ1ZTt2YXIgeT1ELmRhdGEoIl9fdG91Y2hzdGFydF9jb250cm9sIik7aWYoeSl7dmFyIHo9cS5zYXAuZG9tQnlJZCh5KTtpZih6JiZxLnNhcC5jaGVja01vdXNlRW50ZXJPckxlYXZlKEUseikpe3g9ZmFsc2V9fWlmKHgpe3JldHVybn19dmFyIE49cS5ldmVudC5maXgoRS5vcmlnaW5hbEV2ZW50fHxFKTtOLnR5cGU9Qy5zYXBFdmVudE5hbWU7aWYoTi5pc01hcmtlZCgiZmlyc3RVSUFyZWEiKSl7Ti5zZXRNYXJrKCJoYW5kbGVkQnlVSUFyZWEiLGZhbHNlKX12YXIgQj1be2lkZW50aWZpZXI6MSxwYWdlWDpOLnBhZ2VYLHBhZ2VZOk4ucGFnZVksY2xpZW50WDpOLmNsaWVudFgsY2xpZW50WTpOLmNsaWVudFksc2NyZWVuWDpOLnNjcmVlblgsc2NyZWVuWTpOLnNjcmVlblksdGFyZ2V0Ok4udGFyZ2V0LHJhZGl1c1g6MSxyYWRpdXNZOjEscm90YXRpb25BbmdsZTowfV07c3dpdGNoKEMuZXZlbnROYW1lKXtjYXNlInRvdWNoc3RhcnQiOmNhc2UidG91Y2htb3ZlIjpOLnRvdWNoZXM9Ti5jaGFuZ2VkVG91Y2hlcz1OLnRhcmdldFRvdWNoZXM9QjticmVhaztjYXNlInRvdWNoZW5kIjpOLmNoYW5nZWRUb3VjaGVzPUI7Ti50b3VjaGVzPU4udGFyZ2V0VG91Y2hlcz1bXTticmVha31pZihDLmV2ZW50TmFtZT09PSJ0b3VjaHN0YXJ0Inx8RC5kYXRhKCJfX3RvdWNoX2luX3Byb2dyZXNzIikpe0QuZGF0YSgiX190b3VjaF9pbl9wcm9ncmVzcyIsIlgiKTt2YXIgRz1xLmZuLmNvbnRyb2w/cShFLnRhcmdldCkuY29udHJvbCgwKTpudWxsO2lmKEcpe0QuZGF0YSgiX190b3VjaHN0YXJ0X2NvbnRyb2wiLEcuZ2V0SWQoKSl9aWYoRS50eXBlPT09Im1vdXNlb3V0Iil7Ti5zZXRNYXJrZWQoImZyb21Nb3VzZW91dCIpfUMuZXZlbnRIYW5kbGUuaGFuZGxlci5jYWxsKEMuZG9tUmVmLE4pO2lmKEMuZXZlbnROYW1lPT09InRvdWNoZW5kIiYmIU4uaXNNYXJrZWQoImZyb21Nb3VzZW91dCIpKXtELnJlbW92ZURhdGEoIl9fdG91Y2hfaW5fcHJvZ3Jlc3MiKTtELnJlbW92ZURhdGEoIl9fdG91Y2hzdGFydF9jb250cm9sIil9fX07aigidG91Y2hzdGFydCIsWyJtb3VzZWRvd24iXSxNKTtqKCJ0b3VjaGVuZCIsWyJtb3VzZXVwIiwibW91c2VvdXQiXSxNKTtqKCJ0b3VjaG1vdmUiLFsibW91c2Vtb3ZlIl0sTSk7ZnVuY3Rpb24gcigpe3ZhciBDPXdpbmRvd1sic2FwLXVpLWNvbmZpZyJdfHx7fSxMPUMubGlic3x8IiI7ZnVuY3Rpb24geChLKXtyZXR1cm4gZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoLmluZGV4T2YoInNhcC11aS0iK0spPi0xfHwhIUNbSy50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNofHx4KCJ4eC10ZXN0LW1vYmlsZSIpfHx4KCJ4eC1mYWtlT1MiKXx8TC5tYXRjaCgvc2FwLm1cYi8pfWlmKHIoKSl7cS5zYXAucmVxdWlyZSgic2FwLnVpLnRoaXJkcGFydHkuanF1ZXJ5LW1vYmlsZS1jdXN0b20iKTtpZihzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe3ZhciBGPWZhbHNlLHQ9cS52bW91c2UubW92ZURpc3RhbmNlVGhyZXNob2xkLHUsdixPLHc7dmFyIFQ9ZnVuY3Rpb24oRSxDKXt2YXIgeD1FLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXSx5O2lmKEUudHlwZT09PSJ0b3VjaHN0YXJ0Iil7Rj1mYWxzZTt1PXgucGFnZVg7dj14LnBhZ2VZO089TWF0aC5yb3VuZCh4LnBhZ2VYLXEoRS50YXJnZXQpLm9mZnNldCgpLmxlZnQpO3c9TWF0aC5yb3VuZCh4LnBhZ2VZLXEoRS50YXJnZXQpLm9mZnNldCgpLnRvcCl9ZWxzZSBpZihFLnR5cGU9PT0idG91Y2htb3ZlIil7Rj1GfHwoTWF0aC5hYnMoeC5wYWdlWC11KT50fHxNYXRoLmFicyh4LnBhZ2VZLXYpPnQpfXZhciBOPXEuZXZlbnQuZml4KEUub3JpZ2luYWxFdmVudHx8RSk7Ti50eXBlPUMuc2FwRXZlbnROYW1lO2lmKE4uaXNNYXJrZWQoImZpcnN0VUlBcmVhIikpe04uc2V0TWFyaygiaGFuZGxlZEJ5VUlBcmVhIixmYWxzZSl9ZGVsZXRlIE4udG91Y2hlcztkZWxldGUgTi5jaGFuZ2VkVG91Y2hlcztkZWxldGUgTi50YXJnZXRUb3VjaGVzO3ZhciB6PShDLmV2ZW50TmFtZT09PSJtb3VzZXVwIj9FLmNoYW5nZWRUb3VjaGVzWzBdOkUudG91Y2hlc1swXSk7Ti5zY3JlZW5YPXouc2NyZWVuWDtOLnNjcmVlblk9ei5zY3JlZW5ZO04uY2xpZW50WD16LmNsaWVudFg7Ti5jbGllbnRZPXouY2xpZW50WTtOLmN0cmxLZXk9ei5jdHJsS2V5O04uYWx0S2V5PXouYWx0S2V5O04uc2hpZnRLZXk9ei5zaGlmdEtleTtOLmJ1dHRvbj0oc2FwLnVpLkRldmljZS5icm93c2VyLm1zaWUmJnNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPD04PzE6MCk7eT1OLmlzTWFya2VkKCJoYW5kbGVkQnlVSUFyZWEiKTtDLmV2ZW50SGFuZGxlLmhhbmRsZXIuY2FsbChDLmRvbVJlZixOKTtpZihFLnR5cGU9PT0idG91Y2hlbmQiJiYheSYmIUYpe04udHlwZT0iY2xpY2siO04uc2V0TWFyaygiaGFuZGxlZEJ5VUlBcmVhIixmYWxzZSk7Ti5vZmZzZXRYPU87Ti5vZmZzZXRZPXc7Qy5ldmVudEhhbmRsZS5oYW5kbGVyLmNhbGwoQy5kb21SZWYsTil9fTtxLnNhcC5kaXNhYmxlVG91Y2hUb01vdXNlSGFuZGxpbmcoKTtxLnNhcC5fdG91Y2hUb01vdXNlRXZlbnQ9ZmFsc2U7aigibW91c2Vkb3duIixbInRvdWNoc3RhcnQiXSxUKTtqKCJtb3VzZW1vdmUiLFsidG91Y2htb3ZlIl0sVCk7aigibW91c2V1cCIsWyJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIl0sVCl9QS5wdXNoKCJzd2lwZSIsInRhcCIsInN3aXBlbGVmdCIsInN3aXBlcmlnaHQiLCJzY3JvbGxzdGFydCIsInNjcm9sbHN0b3AiKTtlLnB1c2goe3NOYW1lOiJzd2lwZWJlZ2luIixhVHlwZXM6WyJzd2lwZWxlZnQiLCJzd2lwZXJpZ2h0Il0sZm5DaGVjazpmdW5jdGlvbihFKXt2YXIgUj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTtyZXR1cm4oUiYmRS50eXBlPT09InN3aXBlcmlnaHQiKXx8KCFSJiZFLnR5cGU9PT0ic3dpcGVsZWZ0Iil9fSk7ZS5wdXNoKHtzTmFtZToic3dpcGVlbmQiLGFUeXBlczpbInN3aXBlbGVmdCIsInN3aXBlcmlnaHQiXSxmbkNoZWNrOmZ1bmN0aW9uKEUpe3ZhciBSPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3JldHVybighUiYmRS50eXBlPT09InN3aXBlcmlnaHQiKXx8KFImJkUudHlwZT09PSJzd2lwZWxlZnQiKX19KX1pZihxLnNhcC5WZXJzaW9uKHEuZm4uanF1ZXJ5KS5jb21wYXJlVG8oIjEuOS4xIik8MCl7cS5zYXAuQ29udHJvbEV2ZW50cz1xLnNhcC5Db250cm9sRXZlbnRzLmNvbmNhdChBKX1lbHNle3Euc2FwLkNvbnRyb2xFdmVudHM9QS5jb25jYXQocS5zYXAuQ29udHJvbEV2ZW50cyl9Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe3Euc2FwLlBzZXVkb0V2ZW50c1tlW2ldLnNOYW1lXT1lW2ldO1AucHVzaChlW2ldLnNOYW1lKX19KCkpO2Z1bmN0aW9uIGYoKXt2YXIgZT1xLnNhcC5Qc2V1ZG9FdmVudHMscj1bXTtmb3IodmFyIE4gaW4gZSl7aWYoZVtOXS5hVHlwZXMpe2Zvcih2YXIgaj0wLGk9ZVtOXS5hVHlwZXMubGVuZ3RoO2o8aTtqKyspe3ZhciB0PWVbTl0uYVR5cGVzW2pdO2lmKHEuaW5BcnJheSh0LHIpPT0tMSl7ci5wdXNoKHQpfX19fXJldHVybiByfXZhciBnPWYoKTtmdW5jdGlvbiBoKGUsQyxBLGkpe3JldHVybiBlLnNoaWZ0S2V5PT1pJiZlLmFsdEtleT09QSYmbChlKT09Q31mdW5jdGlvbiBrKGUpe3JldHVybiBlLnNoaWZ0S2V5fHxlLmFsdEtleXx8bChlKX1mdW5jdGlvbiBsKGUpe3JldHVybiEhKGUubWV0YUtleXx8ZS5jdHJsS2V5KX1xLkV2ZW50LnByb3RvdHlwZS5nZXRQc2V1ZG9UeXBlcz1mdW5jdGlvbigpe3ZhciBlPVtdO2lmKHEuaW5BcnJheSh0aGlzLnR5cGUsZykhPS0xKXt2YXIgaj1QO3ZhciByPWoubGVuZ3RoO3ZhciB0PW51bGw7Zm9yKHZhciBpPTA7aTxyO2krKyl7dD1xLnNhcC5Qc2V1ZG9FdmVudHNbaltpXV07aWYodC5hVHlwZXMmJnEuaW5BcnJheSh0aGlzLnR5cGUsdC5hVHlwZXMpPi0xJiZ0LmZuQ2hlY2smJnQuZm5DaGVjayh0aGlzKSl7ZS5wdXNoKHQuc05hbWUpfX19dGhpcy5nZXRQc2V1ZG9UeXBlcz1mdW5jdGlvbigpe3JldHVybiBlLnNsaWNlKCl9O3JldHVybiBlLnNsaWNlKCl9O3EuRXZlbnQucHJvdG90eXBlLmlzUHNldWRvVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFBzZXVkb1R5cGVzKCk7aWYodCl7cmV0dXJuIHEuaW5BcnJheSh0LGUpPi0xfWVsc2V7cmV0dXJuIGUubGVuZ3RoPjB9fTt2YXIgXz1xLkV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdDtxLkV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe18uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDtpZighZSl7cmV0dXJufWlmKGUua2V5Q29kZSE9MCl7dHJ5e2lmKCFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveCl7ZS5rZXlDb2RlPTB9fWNhdGNoKGkpe319fTtxLnNhcC5iaW5kQW55RXZlbnQ9ZnVuY3Rpb24gYmluZEFueUV2ZW50KEMpe2lmKEMpe3EoZG9jdW1lbnQpLmJpbmQocS5zYXAuQ29udHJvbEV2ZW50cy5qb2luKCIgIiksQyl9fTtxLnNhcC51bmJpbmRBbnlFdmVudD1mdW5jdGlvbiB1bmJpbmRBbnlFdmVudChDKXtpZihDKXtxKGRvY3VtZW50KS51bmJpbmQocS5zYXAuQ29udHJvbEV2ZW50cy5qb2luKCIgIiksQyl9fTtxLnNhcC5jaGVja01vdXNlRW50ZXJPckxlYXZlPWZ1bmN0aW9uIGNoZWNrTW91c2VFbnRlck9yTGVhdmUoRSxEKXtpZihFLnR5cGUhPSJtb3VzZW92ZXIiJiZFLnR5cGUhPSJtb3VzZW91dCIpe3JldHVybiBmYWxzZX12YXIgaT1mYWxzZTt2YXIgaj1EO3ZhciByPUUucmVsYXRlZFRhcmdldDt0cnl7d2hpbGUociYmciE9PWope3I9ci5wYXJlbnROb2RlfWlmKHIhPT1qKXtpPXRydWV9fWNhdGNoKGUpe31yZXR1cm4gaX07cS5zYXAuaXNTcGVjaWFsS2V5PWZ1bmN0aW9uKGUpe3ZhciBLPXEuc2FwLktleUNvZGVzLGk9ZS53aGljaCxqPW4oZSl8fHAoZSl8fChpPj0zMyYmaTw9MzYpfHwoaT49NDQmJmk8PTQ2KXx8KGk+PTExMiYmaTw9MTIzKXx8KGk9PT1LLkJSRUFLKXx8KGk9PT1LLkJBQ0tTUEFDRSl8fChpPT09Sy5UQUIpfHwoaT09PUsuRU5URVIpfHwoaT09PUsuRVNDQVBFKXx8KGk9PT1LLlNDUk9MTF9MT0NLKTtzd2l0Y2goZS50eXBlKXtjYXNlImtleWRvd24iOmNhc2Uia2V5dXAiOnJldHVybiBqO2Nhc2Uia2V5cHJlc3MiOnJldHVybihpPT09MHx8aT09PUsuQkFDS1NQQUNFfHxpPT09Sy5FU0NBUEV8fGk9PT1LLkVOVEVSKXx8ZmFsc2U7ZGVmYXVsdDpyZXR1cm4gZmFsc2V9fTtmdW5jdGlvbiBuKGUpe3ZhciBLPXEuc2FwLktleUNvZGVzLGk9ZS53aGljaDtyZXR1cm4oaT09PUsuU0hJRlQpfHwoaT09PUsuQ09OVFJPTCl8fChpPT09Sy5BTFQpfHwoaT09PUsuQ0FQU19MT0NLKXx8KGk9PT1LLk5VTV9MT0NLKX1mdW5jdGlvbiBwKGUpe3ZhciBLPWUud2hpY2gsQT0oSz49MzcmJks8PTQwKTtzd2l0Y2goZS50eXBlKXtjYXNlImtleWRvd24iOmNhc2Uia2V5dXAiOnJldHVybiBBO2Nhc2Uia2V5cHJlc3MiOnJldHVybiBLPT09MDtkZWZhdWx0OnJldHVybiBmYWxzZX19cS5FdmVudC5wcm90b3R5cGUuZ2V0T2Zmc2V0WD1mdW5jdGlvbigpe2lmKHRoaXMudHlwZT09J2NsaWNrJyl7aWYodGhpcy5vZmZzZXRYKXtyZXR1cm4gdGhpcy5vZmZzZXRYfWlmKHRoaXMubGF5ZXJYKXtyZXR1cm4gdGhpcy5sYXllclh9aWYodGhpcy5vcmlnaW5hbEV2ZW50LmxheWVyWCl7cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudC5sYXllclh9fXJldHVybiAwfTtxLkV2ZW50LnByb3RvdHlwZS5nZXRPZmZzZXRZPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlPT0nY2xpY2snKXtpZih0aGlzLm9mZnNldFkpe3JldHVybiB0aGlzLm9mZnNldFl9aWYodGhpcy5sYXllclkpe3JldHVybiB0aGlzLmxheWVyWX1pZih0aGlzLm9yaWdpbmFsRXZlbnQubGF5ZXJZKXtyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50LmxheWVyWX19cmV0dXJuIDB9O3ZhciBTPXEuRXZlbnQucHJvdG90eXBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjtxLkV2ZW50LnByb3RvdHlwZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb249ZnVuY3Rpb24oZSl7Uy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoZSl7dGhpcy5fYklzU3RvcEhhbmRsZXJzPXRydWV9fTtxLkV2ZW50LnByb3RvdHlwZS5pc0ltbWVkaWF0ZUhhbmRsZXJQcm9wYWdhdGlvblN0b3BwZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX2JJc1N0b3BIYW5kbGVyc307cS5FdmVudC5wcm90b3R5cGUuc2V0TWFyaz1mdW5jdGlvbihLLHYpe0s9S3x8ImhhbmRsZWRCeUNvbnRyb2wiO3Y9YXJndW1lbnRzLmxlbmd0aDwyP3RydWU6djsodGhpcy5vcmlnaW5hbEV2ZW50fHx0aGlzKVsiX3NhcHVpXyIrS109dn07cS5FdmVudC5wcm90b3R5cGUuc2V0TWFya2VkPXEuRXZlbnQucHJvdG90eXBlLnNldE1hcms7cS5FdmVudC5wcm90b3R5cGUuaXNNYXJrZWQ9ZnVuY3Rpb24oSyl7Sz1LfHwiaGFuZGxlZEJ5Q29udHJvbCI7cmV0dXJuISEodGhpcy5vcmlnaW5hbEV2ZW50fHx0aGlzKVsiX3NhcHVpXyIrS119O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuaGlzdG9yeScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuaGlzdG9yeScpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuaGlzdG9yeSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ2pxdWVyeS5zYXAuc3RyaW5ncyddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjsoZnVuY3Rpb24oJCx3KXt2YXIgcz0iX3NraXAiLHI9L1x8aWQtWzAtOV0rLVswLTldKy8sYT1uZXcgUmVnRXhwKHMrIlswLTldKiQiKSxiPVtdLGg9W10sUz17fSxjPTAsZD11bmRlZmluZWQsST0ifCIsSD1bXSxlPWZhbHNlLGYsZz1mYWxzZTskLnNhcC5oaXN0b3J5PWZ1bmN0aW9uKEEpe2lmKCFxLmlzUGxhaW5PYmplY3QoQSkpe3JldHVybn1pZighZyl7dmFyIFc9JCh3KSxCPSh3LmxvY2F0aW9uLmhyZWYuc3BsaXQoIiMiKVsxXXx8IiIpO1cuYmluZCgnaGFzaGNoYW5nZScsayk7aWYoJC5pc0FycmF5KEEucm91dGVzKSl7dmFyIGksQztmb3IoaT0wO2k8QS5yb3V0ZXMubGVuZ3RoO2krKyl7Qz1BLnJvdXRlc1tpXTtpZihDLnBhdGgmJkMuaGFuZGxlcil7JC5zYXAuaGlzdG9yeS5hZGRSb3V0ZShDLnBhdGgsQy5oYW5kbGVyKX19fWlmKHEuaXNGdW5jdGlvbihBLmRlZmF1bHRIYW5kbGVyKSl7Zj1BLmRlZmF1bHRIYW5kbGVyfWgucHVzaChCKTtpZihCLmxlbmd0aD4xKXtXLnRyaWdnZXIoImhhc2hjaGFuZ2UiLFt0cnVlXSl9ZWxzZXtkPUJ9Zz10cnVlfX07JC5zYXAuaGlzdG9yeS5hZGRIaXN0b3J5PWZ1bmN0aW9uKGksQSxCLFYpe3ZhciBDLEQ7aWYoQj09PXVuZGVmaW5lZCl7Qj10cnVlfWlmKCFWKXtEPW4oaSxBKTtDPW8oRCk7aWYoQyl7RCs9KEkrQyl9RCs9KEkrKEI/IjEiOiIwIikpfWVsc2V7RD1tKGQpfUgucHVzaChEKTtTW0RdPXRydWU7dy5sb2NhdGlvbi5oYXNoPUQ7cmV0dXJuIER9OyQuc2FwLmhpc3RvcnkuYWRkVmlydHVhbEhpc3Rvcnk9ZnVuY3Rpb24oKXskLnNhcC5oaXN0b3J5LmFkZEhpc3RvcnkoIiIsdW5kZWZpbmVkLGZhbHNlLHRydWUpfTskLnNhcC5oaXN0b3J5LmFkZFJvdXRlPWZ1bmN0aW9uKGksQSxUKXtpZihUKXtBPXEucHJveHkoQSxUKX12YXIgUj17fTtSLnNJZGVudGlmaWVyPWk7UlsnYWN0aW9uJ109QTtiLnB1c2goUik7cmV0dXJuIHRoaXN9OyQuc2FwLmhpc3Rvcnkuc2V0RGVmYXVsdEhhbmRsZXI9ZnVuY3Rpb24oaSl7Zj1pfTskLnNhcC5oaXN0b3J5LmdldERlZmF1bHRIYW5kbGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGZ9OyQuc2FwLmhpc3RvcnkuYmFja1RvSGFzaD1mdW5jdGlvbihpKXtpPWl8fCIiO3ZhciBBO2lmKGgubGVuZ3RoPT09MSl7aWYoJC5pc0Z1bmN0aW9uKGYpKXtmKCl9fWVsc2V7QT1qKGQsaSk7aWYoQTwwKXt3Lmhpc3RvcnkuZ28oQSl9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoImpRdWVyeS5zYXAuaGlzdG9yeS5iYWNrVG9IYXNoOiAiK2krImlzIG5vdCBpbiB0aGUgaGlzdG9yeSBzdGFjayBvciBpdCdzIGFmdGVyIHRoZSBjdXJyZW50IGhhc2giKX19fTskLnNhcC5oaXN0b3J5LmJhY2tUaHJvdWdoUGF0aD1mdW5jdGlvbihQKXtQPVB8fCIiO1A9dy5lbmNvZGVVUklDb21wb25lbnQoUCk7dmFyIGk7aWYoaC5sZW5ndGg9PT0xKXtpZigkLmlzRnVuY3Rpb24oZikpe2YoKX19ZWxzZXtpPWooZCxQLHRydWUpO2lmKGk8MCl7dy5oaXN0b3J5LmdvKGkpfWVsc2V7cS5zYXAubG9nLmVycm9yKCJqUXVlcnkuc2FwLmhpc3RvcnkuYmFja1Rocm91Z2hQYXRoOiB0aGVyZSdzIG5vIGhpc3Rvcnkgc3RhdGUgd2hpY2ggaGFzIHRoZSAiK1ArIiBpZGVudGlmaWVyIGluIHRoZSBoaXN0b3J5IHN0YWNrIGJlZm9yZSB0aGUgY3VycmVudCBoYXNoIil9fX07JC5zYXAuaGlzdG9yeS5iYWNrPWZ1bmN0aW9uKGkpe2lmKGgubGVuZ3RoPT09MSl7aWYoJC5pc0Z1bmN0aW9uKGYpKXtmKCQuc2FwLmhpc3RvcnkuTmF2VHlwZS5CYWNrKX19ZWxzZXtpZighaSl7aT0xfXcuaGlzdG9yeS5nbygtMSppKX19OyQuc2FwLmhpc3RvcnkuTmF2VHlwZT17fTskLnNhcC5oaXN0b3J5Lk5hdlR5cGUuQmFjaz0iX2JhY2siOyQuc2FwLmhpc3RvcnkuTmF2VHlwZS5Gb3J3YXJkPSJfZm9yd2FyZCI7JC5zYXAuaGlzdG9yeS5OYXZUeXBlLkJvb2ttYXJrPSJfYm9va21hcmsiOyQuc2FwLmhpc3RvcnkuTmF2VHlwZS5Vbmtub3duPSJfdW5rbm93biI7ZnVuY3Rpb24gaihDLFQsUCl7dmFyIEE9JC5pbkFycmF5KEMsaCksQixpLEQ7aWYoQT4wKXtpZihQKXtmb3IoaT1BLTE7aT49MDtpLS0pe0Q9aFtpXTtpZihELmluZGV4T2YoVCk9PT0wJiYhdShEKSl7cmV0dXJuIGktQX19fWVsc2V7Qj0kLmluQXJyYXkoVCxoKTtpZigoQj09PS0xKSYmVC5sZW5ndGg9PT0wKXtyZXR1cm4tMSpBfWlmKChCPi0xKSYmKEI8QSkpe3JldHVybiBCLUF9fX1yZXR1cm4gMH1mdW5jdGlvbiBrKEUsTSl7dmFyIGk9KHcubG9jYXRpb24uaHJlZi5zcGxpdCgiIyIpWzFdfHwiIik7aT1sKGkpO2lmKE18fCFTW2ldKXtILnB1c2goaSl9aWYoIWUpe2U9dHJ1ZTtpZihILmxlbmd0aD4wKXt2YXIgQT1ILnNoaWZ0KCk7aWYoU1tBXSl7dChBKTtkZWxldGUgU1tBXX1lbHNle3goQSl9ZD1BfWU9ZmFsc2V9fWZ1bmN0aW9uIHAoVSl7dmFyIGk9VS5pbmRleE9mKCIjIik7aWYoaT09PS0xKXtyZXR1cm4iIn1lbHNlIGlmKGk+MCYmaSE9PVUubGVuZ3RoLTEpe3JldHVybiBVLnNsaWNlKGkrMSl9fWZ1bmN0aW9uIGwoaSxSKXt2YXIgQT1pLEI9aT9pLmluZGV4T2YoIiMiKTotMSxDLEQ7aWYoQj09PTApe0E9QS5zbGljZShCKzEpfWlmKFIpe0E9QS5yZXBsYWNlKHIsIiIpfXJldHVybiBBfWZ1bmN0aW9uIG0oaSl7dmFyIFA9aT9pOiIiO2lmKHUoUCkpe3ZhciBBPVAubGFzdEluZGV4T2Yocyk7UD1QLnNsaWNlKDAsQSl9cmV0dXJuIFArcytjKyt9ZnVuY3Rpb24gbihpLEEpe3ZhciBFPXcuZW5jb2RlVVJJQ29tcG9uZW50KGkpO3ZhciBCPXcuZW5jb2RlVVJJQ29tcG9uZW50KHcuSlNPTi5zdHJpbmdpZnkoQSkpO3JldHVybiBFK0krQn1mdW5jdGlvbiBvKEEpe3ZhciBCPSQuaW5BcnJheShkLGgpLFQsaSxDO2lmKEI+LTEpe2ZvcihpPTA7aTxCKzE7aSsrKXtDPWhbaV07aWYoQy5zbGljZSgwLEMubGVuZ3RoLTIpPT09QSl7cmV0dXJuIHEuc2FwLnVpZCgpfX19cmV0dXJuIiJ9ZnVuY3Rpb24gdChpKXt2YXIgQT0kLmluQXJyYXkoZCxoKTtpZighKEE9PT0tMXx8QT09PWgubGVuZ3RoLTEpKXtoLnNwbGljZShBKzEsaC5sZW5ndGgtMS1BKX1oLnB1c2goaSl9ZnVuY3Rpb24gdShpKXtyZXR1cm4gYS50ZXN0KGkpfWZ1bmN0aW9uIHYoQyxGKXt2YXIgQT0kLmluQXJyYXkoQyxoKSxpO2lmKEEhPT0tMSl7aWYoRil7Zm9yKGk9QTtpPGgubGVuZ3RoO2krKyl7aWYoIXUoaFtpXSkpe3JldHVybiBpLUF9fX1lbHNle2ZvcihpPUE7aT49MDtpLS0pe2lmKCF1KGhbaV0pKXtyZXR1cm4gaS1BfX1yZXR1cm4tMSooQSsxKX19fWZ1bmN0aW9uIHgoQSl7dmFyIFIsQixpLFA9QSxDLEQsTixFO2lmKGQ9PT11bmRlZmluZWQpe0Q9eihBKTtpZighRHx8IUQuYkJvb2ttYXJrYWJsZSl7aWYocS5pc0Z1bmN0aW9uKGYpKXtmKCQuc2FwLmhpc3RvcnkuTmF2VHlwZS5Cb29rbWFyayl9cmV0dXJufX1pZihBLmxlbmd0aD09PTApe2lmKHEuaXNGdW5jdGlvbihmKSl7ZigkLnNhcC5oaXN0b3J5Lk5hdlR5cGUuQmFjayl9fWVsc2V7Tj1xLmluQXJyYXkoQSxoKTtpZihOPT09MCl7RD16KEEpO2lmKCFEfHwhRC5iQm9va21hcmthYmxlKXtpZihxLmlzRnVuY3Rpb24oZikpe2YoJC5zYXAuaGlzdG9yeS5OYXZUeXBlLkJhY2spfXJldHVybn19aWYodShBKSl7aWYodShkKSl7Qj12KEEsZmFsc2UpO3cuaGlzdG9yeS5nbyhCKX1lbHNle3ZhciBGPW5ldyBSZWdFeHAocS5zYXAuZXNjYXBlUmVnRXhwKGQrcykrIlswLTldKiQiKTtpZihGLnRlc3QoQSkpe0I9dihBLHRydWUpO2lmKEIpe3cuaGlzdG9yeS5nbyhCKX1lbHNle3cuaGlzdG9yeS5iYWNrKCl9fWVsc2V7Qj12KEEsZmFsc2UpO3cuaGlzdG9yeS5nbyhCKX19fWVsc2V7aWYoTj09PS0xKXtFPSQuc2FwLmhpc3RvcnkuTmF2VHlwZS5Vbmtub3duO2gucHVzaChBKX1lbHNle2lmKHEuaW5BcnJheShkLGgsTisxKT09PS0xKXtFPSQuc2FwLmhpc3RvcnkuTmF2VHlwZS5Gb3J3YXJkfWVsc2V7RT0kLnNhcC5oaXN0b3J5Lk5hdlR5cGUuQmFja319RD16KEEpO2lmKEQpe1I9eShELnNJZGVudGlmaWVyKTtpZihSKXtSLmFjdGlvbi5hcHBseShudWxsLFtELm9TdGF0ZURhdGEsRV0pfX1lbHNle3Euc2FwLmxvZy5lcnJvcigiaGFzaCBmb3JtYXQgZXJyb3IhIFRoZSBjdXJyZW50IEhhc2g6ICIrQSl9fX19ZnVuY3Rpb24geShBKXt2YXIgaTtmb3IoaT0wO2k8Yi5sZW5ndGg7aSsrKXtpZihiW2ldLnNJZGVudGlmaWVyPT09QSl7cmV0dXJuIGJbaV19fX1mdW5jdGlvbiB6KEEpe2lmKHUoQSkpe3ZhciBpPUEubGFzdEluZGV4T2Yocyk7QT1BLnNsaWNlKDAsaSl9dmFyIFA9QS5zcGxpdChJKSxSPXt9O2lmKFAubGVuZ3RoPT09NHx8UC5sZW5ndGg9PT0zKXtSLnNJZGVudGlmaWVyPXcuZGVjb2RlVVJJQ29tcG9uZW50KFBbMF0pO1Iub1N0YXRlRGF0YT13LkpTT04ucGFyc2Uody5kZWNvZGVVUklDb21wb25lbnQoUFsxXSkpO2lmKFAubGVuZ3RoPT09NCl7Ui51aWQ9UFsyXX1SLmJCb29rbWFya2FibGU9UFtQLmxlbmd0aC0xXT09PSIwIj9mYWxzZTp0cnVlO3JldHVybiBSfWVsc2V7cmV0dXJuIG51bGx9fX0pKHEsdGhpcyk7cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5tb2JpbGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLm1vYmlsZScpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAubW9iaWxlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZScsJ2pxdWVyeS5zYXAuZG9tJywnanF1ZXJ5LnNhcC5ldmVudHMnXSxmdW5jdGlvbihxLEQpeyJ1c2Ugc3RyaWN0IjsoZnVuY3Rpb24oJCl7dmFyIEY9Lyg/Olw/fCYpc2FwLXVpLXh4LWZha2VPUz0oW14mXSspLzskLnNhcC5zaW11bGF0ZU1vYmlsZU9uRGVza3RvcD1mYWxzZTtpZigoRC5icm93c2VyLndlYmtpdHx8KEQuYnJvd3Nlci5tc2llJiZELmJyb3dzZXIudmVyc2lvbj49MTApKSYmIXEuc3VwcG9ydC50b3VjaCl7dmFyIHI9ZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoLm1hdGNoKEYpO3ZhciBhPXImJnJbMV18fHEuc2FwLmJ5SWQoInNhcC11aS1ib290c3RyYXAiKS5hdHRyKCJkYXRhLXNhcC11aS14eC1mYWtlT1MiKTtpZihhKXskLnNhcC5zaW11bGF0ZU1vYmlsZU9uRGVza3RvcD10cnVlO3ZhciB1PXtpb3M6Ik1vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgNV8wXzEgbGlrZSBNYWMgT1MgWCkgQXBwbGVXZWJLaXQvNTM0LjQ4IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi81LjEgTW9iaWxlLzlBNDA2IFNhZmFyaS83NTM0LjQ4LjMiLGlwaG9uZToiTW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyA1XzBfMSBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC81MzQuNDggKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzUuMSBNb2JpbGUvOUE0MDYgU2FmYXJpLzc1MzQuNDguMyIsaXBhZDoiTW96aWxsYS81LjAgKGlQYWQ7IENQVSBPUyA1XzFfMSBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC81MzQuNDYgKEtIVE1MLCBsaWtlIEdlY2tvKSBNb2JpbGUvOUIyMDYiLGFuZHJvaWQ6Ik1vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjAuMzsgZW4tdXM7IEdULUk5MTAwIEJ1aWxkL0lNTDc0SykgQXBwbGVXZWJLaXQvNTM0LjQ2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuNDYiLGFuZHJvaWRfcGhvbmU6Ik1vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjAuMzsgZW4tdXM7IEdULUk5MTAwIEJ1aWxkL0lNTDc0SykgQXBwbGVXZWJLaXQvNTM0LjQ2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuNDYiLGFuZHJvaWRfdGFibGV0OiJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNC4xLjI7IE5leHVzIDcgQnVpbGQvSlowNTRLKSBBcHBsZVdlYktpdC81MzUuMTkgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTguMC4xMDI1LjE2NiBTYWZhcmkvNTM1LjE5IixibGFja2JlcnJ5OiJNb3ppbGxhLzUuMCAoQkIxMDsgVG91Y2gpIEFwcGxlV2ViS2l0LzUzNy4xMCsgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzEwLjAuOS4yMzcyIE1vYmlsZSBTYWZhcmkvNTM3LjEwKyIsd2lucGhvbmU6Ik1vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDEwLjA7IFdpbmRvd3MgUGhvbmUgOC4wOyBUcmlkZW50LzYuMDsgSUVNb2JpbGUvMTAuMDsgQVJNOyBUb3VjaDsgTk9LSUE7IEx1bWlhIDkyMCkifVthXTtpZih1JiYoRC5icm93c2VyLndlYmtpdCYmYSE9PSJ3aW5waG9uZSJ8fEQuYnJvd3Nlci5tc2llJiZhPT09IndpbnBob25lIikpe2lmKEQuYnJvd3Nlci5zYWZhcmkpe3ZhciBfPXdpbmRvdy5uYXZpZ2F0b3I7d2luZG93Lm5hdmlnYXRvcj1uZXcgT2JqZWN0KCk7d2luZG93Lm5hdmlnYXRvci5fX3Byb3RvX189Xzt3aW5kb3cubmF2aWdhdG9yLl9fZGVmaW5lR2V0dGVyX18oJ3VzZXJBZ2VudCcsZnVuY3Rpb24oKXtyZXR1cm4gdX0pfWVsc2V7T2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwidXNlckFnZW50Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHV9fSl9aWYoRC5icm93c2VyLndlYmtpdCl7cS5icm93c2VyLm1zaWU9cS5icm93c2VyLm9wZXJhPXEuYnJvd3Nlci5tb3ppbGxhPWZhbHNlO3EuYnJvd3Nlci53ZWJraXQ9dHJ1ZTtxLmJyb3dzZXIudmVyc2lvbj0iNTM0LjQ2In1lbHNle31ELl91cGRhdGUoJC5zYXAuc2ltdWxhdGVNb2JpbGVPbkRlc2t0b3ApfX19JC5vcz0kLmV4dGVuZCh7b3M6RC5vcy5uYW1lLHZlcnNpb246RC5vcy52ZXJzaW9uU3RyLGZWZXJzaW9uOkQub3MudmVyc2lvbn0sJC5vcyk7JC5vc1tELm9zLm5hbWVdPXRydWU7JC5leHRlbmQoJC5zdXBwb3J0LHtyZXRpbmE6d2luZG93LmRldmljZVBpeGVsUmF0aW8+PTJ9KTskLmRldmljZT0kLmV4dGVuZCh7fSwkLmRldmljZSk7JC5kZXZpY2UuaXM9JC5leHRlbmQoe3N0YW5kYWxvbmU6d2luZG93Lm5hdmlnYXRvci5zdGFuZGFsb25lLGxhbmRzY2FwZTpELm9yaWVudGF0aW9uLmxhbmRzY2FwZSxwb3J0cmFpdDpELm9yaWVudGF0aW9uLnBvcnRyYWl0LGlwaG9uZTpELm9zLmlvcyYmRC5zeXN0ZW0ucGhvbmUsaXBhZDpELm9zLmlvcyYmRC5zeXN0ZW0udGFibGV0LGFuZHJvaWRfcGhvbmU6RC5zeXN0ZW0ucGhvbmUmJkQub3MuYW5kcm9pZCxhbmRyb2lkX3RhYmxldDpELnN5c3RlbS50YWJsZXQmJkQub3MuYW5kcm9pZCx0YWJsZXQ6RC5zeXN0ZW0udGFibGV0LHBob25lOkQuc3lzdGVtLnBob25lLGRlc2t0b3A6RC5zeXN0ZW0uZGVza3RvcH0sJC5kZXZpY2UuaXMpO3ZhciBiPWZhbHNlOyQuc2FwLmluaXRNb2JpbGU9ZnVuY3Rpb24obyl7dmFyIGM9JCgiaGVhZCIpO2lmKCFiKXtiPXRydWU7bz0kLmV4dGVuZCh7fSx7dmlld3BvcnQ6dHJ1ZSxzdGF0dXNCYXI6ImRlZmF1bHQiLGhpZGVCcm93c2VyOnRydWUscHJldmVudFNjcm9sbDp0cnVlLHByZXZlbnRQaG9uZU51bWJlckRldGVjdGlvbjp0cnVlLHVzZUZ1bGxTY3JlZW5IZWlnaHQ6dHJ1ZSxob21lSWNvblByZWNvbXBvc2VkOmZhbHNlfSxvKTtpZihELm9zLmlvcyYmby5wcmV2ZW50UGhvbmVOdW1iZXJEZXRlY3Rpb24pe2MuYXBwZW5kKCQoJzxtZXRhIG5hbWU9ImZvcm1hdC1kZXRlY3Rpb24iIGNvbnRlbnQ9InRlbGVwaG9uZT1ubyI+JykpfWVsc2UgaWYoRC5icm93c2VyLm1zaWUpe2MuYXBwZW5kKCQoJzxtZXRhIGh0dHAtZXF1aXY9ImNsZWFydHlwZSIgY29udGVudD0ib24iPicpKTtjLmFwcGVuZCgkKCc8bWV0YSBuYW1lPSJtc2FwcGxpY2F0aW9uLXRhcC1oaWdobGlnaHQiIGNvbnRlbnQ9Im5vIi8+JykpfXZhciBpPUQub3MuaW9zJiZELm9zLnZlcnNpb24+PTcmJkQub3MudmVyc2lvbjw4JiZELmJyb3dzZXIubmFtZT09PSJzZiI7aWYoby52aWV3cG9ydCl7dmFyIG07aWYoaSYmRC5zeXN0ZW0ucGhvbmUpe209J21pbmltYWwtdWksIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT0wJ31lbHNlIGlmKGkmJkQuc3lzdGVtLnRhYmxldCl7bT0naW5pdGlhbC1zY2FsZT0xLjAsIG1heGltdW0tc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPW5vJ31lbHNlIGlmKCQuZGV2aWNlLmlzLmlwaG9uZSYmKE1hdGgubWF4KHdpbmRvdy5zY3JlZW4uaGVpZ2h0LHdpbmRvdy5zY3JlZW4ud2lkdGgpPT09NTY4KSl7bT0idXNlci1zY2FsYWJsZT0wLCBpbml0aWFsLXNjYWxlPTEuMCJ9ZWxzZSBpZihELm9zLmFuZHJvaWQmJkQub3MudmVyc2lvbjwzKXttPSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGhlaWdodD1kZXZpY2UtaGVpZ2h0LCBpbml0aWFsLXNjYWxlPTEuMCwgbWF4aW11bS1zY2FsZT0xLjAsIHVzZXItc2NhbGFibGU9bm8ifWVsc2UgaWYoRC5vcy53aW5waG9uZSl7bT0id2lkdGg9MzIwLCB1c2VyLXNjYWxhYmxlPW5vIn1lbHNle209IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAsIG1heGltdW0tc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPW5vIn1jLmFwcGVuZCgkKCc8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0iJyttKyciPicpKX1pZihELm9zLmlvcyl7Yy5hcHBlbmQoJCgnPG1ldGEgbmFtZT0iYXBwbGUtbW9iaWxlLXdlYi1hcHAtY2FwYWJsZSIgY29udGVudD0ieWVzIj4nKSk7Yy5hcHBlbmQoJCgnPG1ldGEgbmFtZT0iYXBwbGUtbW9iaWxlLXdlYi1hcHAtc3RhdHVzLWJhci1zdHlsZSIgY29udGVudD0iJytvLnN0YXR1c0JhcisnIj4nKSl9aWYoby5wcmV2ZW50U2Nyb2xsKXskKHdpbmRvdykuYmluZCgidG91Y2htb3ZlIixmdW5jdGlvbiBzYXBJbml0TW9iaWxlVG91Y2hNb3ZlSGFuZGxlKGUpe2lmKCFlLmlzTWFya2VkKCkpe2UucHJldmVudERlZmF1bHQoKX19KX1pZihvLnVzZUZ1bGxTY3JlZW5IZWlnaHQpeyQoZnVuY3Rpb24oKXtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0PSIxMDAlIn0pfX1pZihvLmhvbWVJY29uKXt2YXIgSTtpZih0eXBlb2Ygby5ob21lSWNvbj09PSJzdHJpbmciKXtJPXtwaG9uZTpvLmhvbWVJY29ufX1lbHNle0k9JC5leHRlbmQoe30sby5ob21lSWNvbil9SS5wcmVjb21wb3NlZD1vLmhvbWVJY29uUHJlY29tcG9zZWR8fEkucHJlY29tcG9zZWQ7SS5mYXZpY29uPW8uaG9tZUljb24uaWNvbnx8SS5mYXZpY29uO0kuaWNvbj11bmRlZmluZWQ7JC5zYXAuc2V0SWNvbnMoSSl9fTskLnNhcC5zZXRJY29ucz1mdW5jdGlvbihpKXtpZighaXx8KHR5cGVvZiBpIT09Im9iamVjdCIpKXskLnNhcC5sb2cud2FybmluZygiQ2FsbCB0byBqUXVlcnkuc2FwLnNldEljb25zKCkgaGFzIGJlZW4gaWdub3JlZCBiZWNhdXNlIHRoZXJlIHdlcmUgbm8gaWNvbnMgZ2l2ZW4gb3IgdGhlIGFyZ3VtZW50IHdhcyBub3QgYW4gb2JqZWN0LiIpO3JldHVybn12YXIgYz0kKCJoZWFkIikscD1pLnByZWNvbXBvc2VkPyItcHJlY29tcG9zZWQiOiIiLGc9ZnVuY3Rpb24oaCl7cmV0dXJuIGlbaF18fGlbJ3RhYmxldEAyJ118fGlbJ3Bob25lQDInXXx8aVsncGhvbmUnXXx8aVsndGFibGV0J119LHM9eyJwaG9uZSI6IiIsInRhYmxldCI6IjcyeDcyIiwicGhvbmVAMiI6IjExNHgxMTQiLCJ0YWJsZXRAMiI6IjE0NHgxNDQifTtpZihpWyJmYXZpY29uIl0pe3ZhciBkPWMuZmluZCgiW3JlbF49c2hvcnRjdXRdIik7ZC5lYWNoKGZ1bmN0aW9uKCl7aWYodGhpcy5yZWw9PT0ic2hvcnRjdXQgaWNvbiIpeyQodGhpcykucmVtb3ZlKCl9fSk7Yy5hcHBlbmQoJCgnPGxpbmsgcmVsPSJzaG9ydGN1dCBpY29uIiBocmVmPSInK2lbImZhdmljb24iXSsnIiAvPicpKX1pZihnKCJwaG9uZSIpKXtjLmZpbmQoIltyZWw9YXBwbGUtdG91Y2gtaWNvbl0iKS5yZW1vdmUoKTtjLmZpbmQoIltyZWw9YXBwbGUtdG91Y2gtaWNvbi1wcmVjb21wb3NlZF0iKS5yZW1vdmUoKX1mb3IodmFyIGUgaW4gcyl7aVtlXT1pW2VdfHxnKGUpO2lmKGlbZV0pe3ZhciBmPXNbZV07Yy5hcHBlbmQoJCgnPGxpbmsgcmVsPSJhcHBsZS10b3VjaC1pY29uJytwKyciICcrKGY/J3NpemVzPSInK2YrJyInOiIiKSsnIGhyZWY9IicraVtlXSsnIiAvPicpKX19fX0pKHEpO3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAucHJvcGVydGllcycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAucHJvcGVydGllcycpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAucHJvcGVydGllcyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ2pxdWVyeS5zYXAuc2pheCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgUD1mdW5jdGlvbigpe3RoaXMubVByb3BlcnRpZXM9e307dGhpcy5hS2V5cz1bXX07UC5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24oayxkKXt2YXIgdj10aGlzLm1Qcm9wZXJ0aWVzW2tdO2lmKHR5cGVvZih2KT09InN0cmluZyIpe3JldHVybiB2fWVsc2UgaWYoZCl7cmV0dXJuIGR9cmV0dXJuIG51bGx9O1AucHJvdG90eXBlLmdldEtleXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hS2V5c307UC5wcm90b3R5cGUuc2V0UHJvcGVydHk9ZnVuY3Rpb24oayx2KXtpZih0eXBlb2YodikhPSJzdHJpbmciKXtyZXR1cm59aWYodHlwZW9mKHRoaXMubVByb3BlcnRpZXNba10pIT0ic3RyaW5nIil7dGhpcy5hS2V5cy5wdXNoKGspfXRoaXMubVByb3BlcnRpZXNba109dn07UC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYz1uZXcgUCgpO2MubVByb3BlcnRpZXM9cS5leHRlbmQoe30sdGhpcy5tUHJvcGVydGllcyk7Yy5hS2V5cz1xLm1lcmdlKFtdLHRoaXMuYUtleXMpO3JldHVybiBjfTt2YXIgcj0vKD86XnxcclxufFxyfFxuKVsgXHRcZl0qLzt2YXIgYT0vKFxcdVswLTlhLWZBLUZdezAsNH0pfChcXC4pfChcXCQpfChbIFx0XGZdKlsgXHRcZjo9XVsgXHRcZl0qKS9nO3ZhciBlPXsnXFxmJzonXGYnLCdcXG4nOidcbicsJ1xccic6J1xyJywnXFx0JzonXHQnfTtmdW5jdGlvbiBwKHQsbyl7dmFyIGw9dC5zcGxpdChyKSxMLGssdixLLGksbSxiO28ubVByb3BlcnRpZXM9e307by5hS2V5cz1bXTtmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKXtMPWxbaV07aWYoTD09PSIifHxMLmNoYXJBdCgwKT09PSIjInx8TC5jaGFyQXQoMCk9PT0iISIpe2NvbnRpbnVlfWEubGFzdEluZGV4PWI9MDt2PSIiO0s9dHJ1ZTt3aGlsZShtPWEuZXhlYyhMKSl7aWYoYjxtLmluZGV4KXt2Kz1MLnNsaWNlKGIsbS5pbmRleCl9Yj1hLmxhc3RJbmRleDtpZihtWzFdKXtpZihtWzFdLmxlbmd0aCE9PTYpe3Rocm93IG5ldyBFcnJvcigiSW5jb21wbGV0ZSBVbmljb2RlIEVzY2FwZSAnIittWzFdKyInIil9dis9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChtWzFdLnNsaWNlKDIpLDE2KSl9ZWxzZSBpZihtWzJdKXt2Kz1lW21bMl1dfHxtWzJdLnNsaWNlKDEpfWVsc2UgaWYobVszXSl7TD1sWysraV07YS5sYXN0SW5kZXg9Yj0wfWVsc2UgaWYobVs0XSl7aWYoSyl7Sz1mYWxzZTtrPXY7dj0iIn1lbHNle3YrPW1bNF19fX1pZihiPEwubGVuZ3RoKXt2Kz1MLnNsaWNlKGIpfWlmKEspe2s9djt2PSIifW8uYUtleXMucHVzaChrKTtvLm1Qcm9wZXJ0aWVzW2tdPXZ9cS5zYXAudW5pcXVlKG8uYUtleXMpfXEuc2FwLnByb3BlcnRpZXM9ZnVuY3Rpb24gcHJvcGVydGllcyhtKXt2YXIgbz1uZXcgUCgpO209cS5leHRlbmQoe3VybDp1bmRlZmluZWQsaGVhZGVyczp7fX0sbSk7aWYodHlwZW9mKG0udXJsKT09InN0cmluZyIpe3ZhciB0PXEuc2FwLmxvYWRSZXNvdXJjZSh7dXJsOm0udXJsLGRhdGFUeXBlOid0ZXh0JyxoZWFkZXJzOm0uaGVhZGVycyxmYWlsT25FcnJvcjpmYWxzZX0pO2lmKHR5cGVvZih0KT09InN0cmluZyIpe3AodCxvKX19cmV0dXJuIG99O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAucmVzb3VyY2VzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5yZXNvdXJjZXMnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLnJlc291cmNlcyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ2pxdWVyeS5zYXAucHJvcGVydGllcycsJ2pxdWVyeS5zYXAuc3RyaW5ncyddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj0vXigoPzpbQS1aXXsyLDN9KD86LVtBLVpdezN9KXswLDN9KXxbQS1aXXs0fXxbQS1aXXs1LDh9KSg/Oi0oW0EtWl17NH0pKT8oPzotKFtBLVpdezJ9fFswLTldezN9KSk/KC1bMC05QS1aXXs1LDh9fCg/OlswLTldWzAtOUEtWl17M30pKSooPzotKFswLTlBLVdZWl0oPzotWzAtOUEtWl17Miw4fSkrKSkqKD86LShYKD86LVswLTlBLVpdezEsOH0pKykpPyQvaTt2YXIgTT17ImhlIjoiaXciLCJ5aSI6ImppIiwiaWQiOiJpbiIsInNyIjoic2gifTt2YXIgYT17Iml3IjoiaGUiLCJqaSI6InlpIiwiaW4iOiJpZCIsInNuIjoic3IifTt2YXIgYj0vLShzYXB0cmN8c2FwcHNkKSg/Oi18JCkvaTtmdW5jdGlvbiBuKEwpe3ZhciBtO2lmKHR5cGVvZiBMPT09J3N0cmluZycmJihtPXIuZXhlYyhMLnJlcGxhY2UoL18vZywnLScpKSkpe3ZhciBnPW1bMV0udG9Mb3dlckNhc2UoKTtnPU1bZ118fGc7dmFyIFM9bVsyXT9tWzJdLnRvTG93ZXJDYXNlKCk6dW5kZWZpbmVkO3ZhciBSPW1bM10/bVszXS50b1VwcGVyQ2FzZSgpOnVuZGVmaW5lZDt2YXIgVj1tWzRdO3ZhciBwPW1bNl07aWYoKHAmJihtPWIuZXhlYyhwKSkpfHwoViYmKG09Yi5leGVjKFYpKSkpe3JldHVybiJlbl9VU18iK21bMV0udG9Mb3dlckNhc2UoKX1pZihnPT09InpoIiYmIVIpe2lmKFM9PT0iaGFucyIpe1I9IkNOIn1lbHNlIGlmKFM9PT0iaGFudCIpe1I9IlRXIn19cmV0dXJuIGcrKFI/Il8iK1IrKFY/Il8iK1Yuc2xpY2UoMSkucmVwbGFjZSgiLSIsIl8iKToiIik6IiIpfX1mdW5jdGlvbiBkKCl7dmFyIEw7aWYod2luZG93LnNhcCYmc2FwLnVpJiZzYXAudWkuZ2V0Q29yZSl7TD1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRMYW5ndWFnZSgpO0w9bihMKX1yZXR1cm4gTHx8ImVuIn1mdW5jdGlvbiBjKEwpe3ZhciBtO2lmKHR5cGVvZiBMPT09J3N0cmluZycmJihtPXIuZXhlYyhMLnJlcGxhY2UoL18vZywnLScpKSkpe3ZhciBnPW1bMV0udG9Mb3dlckNhc2UoKTtnPWFbZ118fGc7cmV0dXJuIGcrKG1bM10/Ii0iK21bM10udG9VcHBlckNhc2UoKSsobVs0XT8iLSIrbVs0XS5zbGljZSgxKS5yZXBsYWNlKCJfIiwiLSIpOiIiKToiIil9fXZhciBlPS9eKCg/OltePyNdKlwvKT9bXlwvPyNdKikoXC5bXi5cLz8jXSspKCg/Olw/KFteI10qKSk/KD86IyguKikpPykkLzt2YXIgdj1bIi5wcm9wZXJ0aWVzIiwiLmhkYnRleHRidW5kbGUiXTtmdW5jdGlvbiBzKHUpe3ZhciBtPWUuZXhlYyh1KTtyZXR1cm4gbSYme3VybDp1LHByZWZpeDptWzFdLGV4dDptWzJdLHF1ZXJ5Om1bNF0saGFzaDoobVs1XXx8IiIpLHN1ZmZpeDptWzJdKyhtWzNdfHwiIil9fXZhciBCPWZ1bmN0aW9uKHUsTCxpKXt0aGlzLnNMb2NhbGU9bihMKXx8ZCgpO3RoaXMub1VybEluZm89cyh1KTtpZighdGhpcy5vVXJsSW5mb3x8cS5pbkFycmF5KHRoaXMub1VybEluZm8uZXh0LHYpPDApe3Rocm93IG5ldyBFcnJvcigicmVzb3VyY2UgVVJMICciK3UrIicgaGFzIHVua25vd24gdHlwZSAoc2hvdWxkIGJlIG9uZSBvZiAiK3Yuam9pbigiLCIpKyIpIil9dGhpcy5iSW5jbHVkZUluZm89aTt0aGlzLmFDdXN0b21CdW5kbGVzPVtdO3RoaXMuYVByb3BlcnR5RmlsZXM9W107dGhpcy5hTG9jYWxlcz1bXTtsKHRoaXMsdGhpcy5zTG9jYWxlKX07Qi5wcm90b3R5cGU9e307Qi5wcm90b3R5cGUuX2VuaGFuY2U9ZnVuY3Rpb24oQyl7aWYoQyYmQyBpbnN0YW5jZW9mIEIpe3RoaXMuYUN1c3RvbUJ1bmRsZXMucHVzaChDKX1lbHNle3Euc2FwLmxvZy5lcnJvcigiQ3VzdG9tIFJlc291cmNlQnVuZGxlIGlzIGVpdGhlciB1bmRlZmluZWQgb3Igbm90IGFuIGluc3RhbmNlb2YgalF1ZXJ5LnNhcC51dGlsLlJlc291cmNlQnVuZGxlLiBUaGVyZWZvcmUgdGhpcyBjdXN0b20gUmVzb3VyY2VCdW5kbGUgd2lsbCBiZSBpZ25vcmVkISIpfX07Qi5wcm90b3R5cGUuZ2V0VGV4dD1mdW5jdGlvbihrLEEsQyl7dmFyIFY9bnVsbDtmb3IodmFyIGk9dGhpcy5hQ3VzdG9tQnVuZGxlcy5sZW5ndGgtMTtpPj0wO2ktLSl7Vj10aGlzLmFDdXN0b21CdW5kbGVzW2ldLmdldFRleHQoayxBLHRydWUpO2lmKFYhPW51bGwpe3JldHVybiBWfX1mb3IodmFyIGk9MDtpPHRoaXMuYVByb3BlcnR5RmlsZXMubGVuZ3RoO2krKyl7Vj10aGlzLmFQcm9wZXJ0eUZpbGVzW2ldLmdldFByb3BlcnR5KGspO2lmKHR5cGVvZihWKT09PSJzdHJpbmciKXticmVha319aWYodHlwZW9mKFYpIT09InN0cmluZyIpe3ZhciB0PXRoaXMuYUxvY2FsZXNbMF07d2hpbGUodC5sZW5ndGg+MCl7aWYodD09InpoX0hLIil7dD0iemhfVFcifWVsc2V7dmFyIHA9dC5sYXN0SW5kZXhPZignXycpO2lmKHA+PTApe3Q9dC5zdWJzdHJpbmcoMCxwKX1lbHNlIGlmKHQhPSJlbiIpe3Q9ImVuIn1lbHNle3Q9IiJ9fXZhciBQPWwodGhpcyx0KTtpZihQPT1udWxsKXtjb250aW51ZX1WPVAuZ2V0UHJvcGVydHkoayk7aWYodHlwZW9mKFYpPT09InN0cmluZyIpe2JyZWFrfX19aWYoIUMmJnR5cGVvZihWKSE9PSJzdHJpbmciKXtWPWt9aWYodHlwZW9mKFYpPT09InN0cmluZyIpe2lmKEEpe1Y9cS5zYXAuZm9ybWF0TWVzc2FnZShWLEEpfWlmKHRoaXMuYkluY2x1ZGVJbmZvKXtWPW5ldyBTdHJpbmcoVik7Vi5vcmlnaW5JbmZvPXtzb3VyY2U6IlJlc291cmNlIEJ1bmRsZSIsdXJsOnRoaXMub1VybEluZm8udXJsLGxvY2FsZTp0aGlzLnNMb2NhbGUsa2V5Omt9fX1yZXR1cm4gVn07ZnVuY3Rpb24gbChvLEwpe3ZhciB1PW8ub1VybEluZm8sUixwO2lmKHEuaW5BcnJheShMLG8uYUxvY2FsZXMpPT0tMSl7aWYoZihMKSl7c3dpdGNoKHUuZXh0KXtjYXNlJy5oZGJ0ZXh0YnVuZGxlJzpSPXt1cmw6dS51cmwsaGVhZGVyczp7IkFjY2VwdC1MYW5ndWFnZSI6YyhMKXx8IiJ9fTticmVhaztkZWZhdWx0OlI9e3VybDp1LnByZWZpeCsoTD8iXyIrTDoiIikrdS5zdWZmaXh9O2JyZWFrfXA9cS5zYXAucHJvcGVydGllcyhSKX1lbHNle3A9e2dldFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH19fW8uYVByb3BlcnR5RmlsZXMucHVzaChwKTtvLmFMb2NhbGVzLnB1c2goTCk7cmV0dXJuIHB9cmV0dXJuIG51bGx9ZnVuY3Rpb24gZihMKXt2YXIgZz13aW5kb3cuc2FwJiZzYXAudWkmJnNhcC51aS5nZXRDb3JlJiZzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRTdXBwb3J0ZWRMYW5ndWFnZXMoKTtpZihnJiZnLmxlbmd0aD4wKXtyZXR1cm4gcS5pbkFycmF5KEwsZyk+PTB9cmV0dXJuIHRydWV9cS5zYXAucmVzb3VyY2VzPWZ1bmN0aW9uIHJlc291cmNlcyhwKXtwPXEuZXh0ZW5kKHt1cmw6IiIsbG9jYWxlOnVuZGVmaW5lZCxpbmNsdWRlSW5mbzpmYWxzZX0scCk7dmFyIG89bmV3IEIocC51cmwscC5sb2NhbGUscC5pbmNsdWRlSW5mbyk7cmV0dXJuIG99O3Euc2FwLnJlc291cmNlcy5fZ2V0RmFsbGJhY2tMb2NhbGVzPWZ1bmN0aW9uKEwsUyl7dmFyIHQ9bihMKSxnPVtdO2Z1bmN0aW9uIGgoTCl7cmV0dXJuIVN8fFMubGVuZ3RoPT09MHx8cS5pbkFycmF5KEwsUyk+PTB9d2hpbGUodCl7aWYoaCh0KSl7Zy5wdXNoKHQpfWlmKHQ9PT0iemhfSEsiKXt0PSJ6aF9UVyJ9ZWxzZXt2YXIgcD10Lmxhc3RJbmRleE9mKCdfJyk7aWYocD4wKXt0PXQuc2xpY2UoMCxwKX1lbHNlIGlmKHQhPT0iZW4iKXt0PSJlbiJ9ZWxzZXt0PSIifX19aWYoaCgiIikpe2cucHVzaCgiIil9cmV0dXJuIGd9O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5HbG9iYWwnKSl7aWYod2luZG93Lk9wZW5BamF4JiZ3aW5kb3cuT3BlbkFqYXguaHViKXtPcGVuQWpheC5odWIucmVnaXN0ZXJMaWJyYXJ5KCJzYXAiLCJodHRwOi8vd3d3LnNhcC5jb20vIiwiMC4xIix7fSl9alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuR2xvYmFsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL0dsb2JhbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ2pxdWVyeS5zYXAuZG9tJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO2lmKHR5cGVvZiB3aW5kb3cuc2FwIT09Im9iamVjdCImJnR5cGVvZiB3aW5kb3cuc2FwIT09ImZ1bmN0aW9uIil7d2luZG93LnNhcD17fX1pZih0eXBlb2Ygd2luZG93LnNhcC51aSE9PSJvYmplY3QiKXt3aW5kb3cuc2FwLnVpPXt9fXNhcC51aT1xLmV4dGVuZChzYXAudWkse3ZlcnNpb246IjEuMjIuMTAiLGJ1aWxkaW5mbzp7bGFzdGNoYW5nZToiJHtsZGkuc2NtLnJldmlzaW9ufSIsYnVpbGR0aW1lOiIyMDE0MDkyOTE2NDgifX0pO3NhcC51aS5nZXRWZXJzaW9uSW5mbz1mdW5jdGlvbihMKXtpZighc2FwLnVpLnZlcnNpb25pbmZvKXtzYXAudWkudmVyc2lvbmluZm89cS5zYXAubG9hZFJlc291cmNlKCJzYXAtdWktdmVyc2lvbi5qc29uIil9aWYoTCE9PXVuZGVmaW5lZCl7dmFyIGE9c2FwLnVpLnZlcnNpb25pbmZvLmxpYnJhcmllcztmb3IodmFyIGk9MCxsPWEubGVuZ3RoO2k8bDtpKyspe2lmKGFbaV0ubmFtZT09PUwpe3JldHVybiBhW2ldfX19ZWxzZXtyZXR1cm4gc2FwLnVpLnZlcnNpb25pbmZvfX07c2FwLnVpLm5hbWVzcGFjZT1mdW5jdGlvbihuKXtyZXR1cm4gcS5zYXAuZ2V0T2JqZWN0KG4sMCl9O3NhcC51aS5sYXp5UmVxdWlyZT1mdW5jdGlvbihjLG0sTSl7dmFyIGY9Yy5yZXBsYWNlKC9cLy9naSwiXC4iKSxsPWYubGFzdEluZGV4T2YoIi4iKSxwPWYuc3Vic3RyKDAsbCksQz1mLnN1YnN0cihsKzEpLFA9cS5zYXAuZ2V0T2JqZWN0KHAsMCksbz1QW0NdLGE9KG18fCJuZXciKS5zcGxpdCgiICIpLGI9cS5pbkFycmF5KCJuZXciLGEpO009TXx8ZjtpZighbyl7aWYoYj49MCl7bz1mdW5jdGlvbigpe3Euc2FwLmxvZy5kZWJ1ZygibGF6eSBzdHViIGZvciAnIitmKyInIChjb25zdHJ1Y3RvcikgY2FsbGVkLiIpO3Euc2FwLnJlcXVpcmUoTSk7dmFyIHI9UFtDXTtpZihyLl9zYXBVaUxhenlMb2FkZXIpe3Rocm93IG5ldyBFcnJvcigibGF6eVJlcXVpcmU6IHN0dWIgJyIrZisiJ2hhcyBub3QgYmVlbiByZXBsYWNlZCBieSBtb2R1bGUgJyIrTSsiJyIpfXZhciBpPXEuc2FwLm5ld09iamVjdChyLnByb3RvdHlwZSk7dmFyIFI9ci5hcHBseShpLGFyZ3VtZW50cyk7aWYoUiYmKHR5cGVvZiBSPT09ImZ1bmN0aW9uInx8dHlwZW9mIFI9PT0ib2JqZWN0Iikpe2k9Un1yZXR1cm4gaX07by5fc2FwVWlMYXp5TG9hZGVyPXRydWU7YS5zcGxpY2UoYiwxKX1lbHNle289e319UFtDXT1vfXEuZWFjaChhLGZ1bmN0aW9uKGkscyl7aWYoIW9bc10pe29bc109ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZGVidWcoImxhenkgc3R1YiBmb3IgJyIrZisiLiIrcysiJyBjYWxsZWQuIik7cS5zYXAucmVxdWlyZShNKTt2YXIgcj1QW0NdO2lmKHJbc10uX3NhcFVpTGF6eUxvYWRlcil7dGhyb3cgbmV3IEVycm9yKCJsYXp5UmVxdWlyZTogc3R1YiAnIitmKyIuIitzKyInIGhhcyBub3QgYmVlbiByZXBsYWNlZCBieSBsb2FkZWQgbW9kdWxlICciK00rIiciKX1yZXR1cm4gcltzXS5hcHBseShyLGFyZ3VtZW50cyl9O29bc10uX3NhcFVpTGF6eUxvYWRlcj10cnVlfX0pfTtzYXAudWkucmVzb3VyY2U9ZnVuY3Rpb24obCxyKXt2YXIgbT1yLm1hdGNoKC9edGhlbWVzXC8oW15cL10rKVwvLyk7aWYobSl7bCs9Ii50aGVtZXMuIittWzFdO3I9ci5zdWJzdHIobVswXS5sZW5ndGgpfXJldHVybiBxLnNhcC5nZXRNb2R1bGVQYXRoKGwsJy8nKStyfTtzYXAudWkubG9jYWxSZXNvdXJjZXM9ZnVuY3Rpb24obil7cS5zYXAucmVnaXN0ZXJNb2R1bGVQYXRoKG4sIi4vIituLnJlcGxhY2UoL1wuL2csIi8iKSl9O3JldHVybiBzYXAudWl9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5FdmVudCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLkV2ZW50Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvRXZlbnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL09iamVjdCddLGZ1bmN0aW9uKHEsQil7InVzZSBzdHJpY3QiO3ZhciBFPUIuZXh0ZW5kKCJzYXAudWkuYmFzZS5FdmVudCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyxwKXtCLmFwcGx5KHRoaXMpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MCl7dGhpcy5pbml0KGkscyxwKX19fSk7RS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihpLHMscCl7dGhpcy5zSWQ9aTt0aGlzLm9Tb3VyY2U9czt0aGlzLm1QYXJhbWV0ZXJzPXB8fHt9O3RoaXMuYkNhbmNlbEJ1YmJsZT1mYWxzZTt0aGlzLmJQcmV2ZW50RGVmYXVsdD1mYWxzZX07RS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLnNJZD0iIjt0aGlzLm9Tb3VyY2U9bnVsbDt0aGlzLm1QYXJhbWV0ZXJzPW51bGw7dGhpcy5iQ2FuY2VsQnViYmxlPWZhbHNlO3RoaXMuYlByZXZlbnREZWZhdWx0PWZhbHNlfTtFLnByb3RvdHlwZS5nZXRJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNJZH07RS5wcm90b3R5cGUuZ2V0U291cmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1NvdXJjZX07RS5wcm90b3R5cGUuZ2V0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1QYXJhbWV0ZXJzfTtFLnByb3RvdHlwZS5nZXRQYXJhbWV0ZXI9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMubVBhcmFtZXRlcnNbbl19O0UucHJvdG90eXBlLmNhbmNlbEJ1YmJsZT1mdW5jdGlvbigpe3RoaXMuYkNhbmNlbEJ1YmJsZT10cnVlfTtFLnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe3RoaXMuYlByZXZlbnREZWZhdWx0PXRydWV9O3JldHVybiBFfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuRXZlbnRQcm92aWRlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9FdmVudCcsJy4vT2JqZWN0JywnLi9PYmplY3RQb29sJ10sZnVuY3Rpb24ocSxFLEIsTyl7InVzZSBzdHJpY3QiO3ZhciBhPUIuZXh0ZW5kKCJzYXAudWkuYmFzZS5FdmVudFByb3ZpZGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtCLmFwcGx5KHRoaXMpO3RoaXMubUV2ZW50UmVnaXN0cnk9e319fSk7YS5NX0VWRU5UUz17RXZlbnRIYW5kbGVyQ2hhbmdlOiJFdmVudEhhbmRsZXJDaGFuZ2UifTthLnByb3RvdHlwZS5vRXZlbnRQb29sPW5ldyBPKEUpO2EucHJvdG90eXBlLmF0dGFjaEV2ZW50PWZ1bmN0aW9uKGUsZCxmLGwpe2lmKHR5cGVvZihkKT09PSJmdW5jdGlvbiIpe2w9ZjtmPWQ7ZD11bmRlZmluZWR9aWYoIXRoaXMubUV2ZW50UmVnaXN0cnlbZV0pe3RoaXMubUV2ZW50UmVnaXN0cnlbZV09W119dGhpcy5tRXZlbnRSZWdpc3RyeVtlXS5wdXNoKHtvTGlzdGVuZXI6bCxmRnVuY3Rpb246ZixvRGF0YTpkfSk7dGhpcy5maXJlRXZlbnQoYS5NX0VWRU5UUy5FdmVudEhhbmRsZXJDaGFuZ2Use0V2ZW50SWQ6ZSx0eXBlOidsaXN0ZW5lckF0dGFjaGVkJ30pO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5hdHRhY2hFdmVudE9uY2U9ZnVuY3Rpb24oZSxkLGYsbCl7aWYodHlwZW9mKGQpPT09ImZ1bmN0aW9uIil7bD1mO2Y9ZDtkPXVuZGVmaW5lZH1mdW5jdGlvbiBvKCl7dGhpcy5kZXRhY2hFdmVudChlLG8pO2YuYXBwbHkobHx8dGhpcyxhcmd1bWVudHMpfXRoaXMuYXR0YWNoRXZlbnQoZSxkLG8sdW5kZWZpbmVkKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZGV0YWNoRXZlbnQ9ZnVuY3Rpb24oZSxmLGwpe3ZhciBiPXRoaXMubUV2ZW50UmVnaXN0cnlbZV07aWYoIWIpe3JldHVybiB0aGlzfXZhciBMPWZhbHNlO2Zvcih2YXIgaT0wLGM9Yi5sZW5ndGg7aTxjO2krKyl7aWYoYltpXS5mRnVuY3Rpb249PT1mJiZiW2ldLm9MaXN0ZW5lcj09PWwpe2Iuc3BsaWNlKGksMSk7TD10cnVlO2JyZWFrfX1pZihiLmxlbmd0aD09MCl7ZGVsZXRlIHRoaXMubUV2ZW50UmVnaXN0cnlbZV19aWYoTCl7dGhpcy5maXJlRXZlbnQoYS5NX0VWRU5UUy5FdmVudEhhbmRsZXJDaGFuZ2Use0V2ZW50SWQ6ZSx0eXBlOidsaXN0ZW5lckRldGFjaGVkJ30pfXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5maXJlRXZlbnQ9ZnVuY3Rpb24oZSxwLEEsYil7aWYodHlwZW9mIHA9PSJib29sZWFuIil7Yj1BO0E9cH12YXIgYz10aGlzLm1FdmVudFJlZ2lzdHJ5W2VdLFA9ZmFsc2UsbyxkLEk7aWYoYnx8KGMmJnEuaXNBcnJheShjKSkpe2M9Yz9jLnNsaWNlKCk6W107bz10aGlzLm9FdmVudFBvb2wuYm9ycm93T2JqZWN0KGUsdGhpcyxwKTtmb3IodmFyIGk9MCxsPWMubGVuZ3RoO2k8bDtpKyspe0k9Y1tpXTtJLmZGdW5jdGlvbi5jYWxsKEkub0xpc3RlbmVyfHx0aGlzLG8sSS5vRGF0YSl9aWYoYil7ZD10aGlzLmdldEV2ZW50aW5nUGFyZW50KCk7d2hpbGUoZCYmIW8uYkNhbmNlbEJ1YmJsZSl7Yz1kLm1FdmVudFJlZ2lzdHJ5W2VdO2lmKGMmJmMgaW5zdGFuY2VvZiBBcnJheSl7Yz1jLnNsaWNlKCk7Zm9yKHZhciBpPTAsbD1jLmxlbmd0aDtpPGw7aSsrKXtJPWNbaV07SS5mRnVuY3Rpb24uY2FsbChJLm9MaXN0ZW5lcnx8ZCxvLEkub0RhdGEpfX1kPWQuZ2V0RXZlbnRpbmdQYXJlbnQoKX19UD1vLmJQcmV2ZW50RGVmYXVsdDt0aGlzLm9FdmVudFBvb2wucmV0dXJuT2JqZWN0KG8pfWlmKEEpe3JldHVybiFQfWVsc2V7cmV0dXJuIHRoaXN9fTthLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLm1FdmVudFJlZ2lzdHJ5W2VdfTthLmdldEV2ZW50TGlzdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5tRXZlbnRSZWdpc3RyeX07YS5wcm90b3R5cGUuZ2V0RXZlbnRpbmdQYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07YS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmdldE1ldGFkYXRhKXtyZXR1cm4iRXZlbnRQcm92aWRlciAiK3RoaXMuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCl9ZWxzZXtyZXR1cm4iRXZlbnRQcm92aWRlciJ9fTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5tRXZlbnRSZWdpc3RyeT17fTtCLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0TWV0YWRhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0TWV0YWRhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0TWV0YWRhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0RhdGFUeXBlJywnLi9NZXRhZGF0YSddLGZ1bmN0aW9uKHEsRCxNKXsidXNlIHN0cmljdCI7dmFyIGI9ZnVuY3Rpb24oYyxDKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07Yi5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KE0ucHJvdG90eXBlKTtiLnByb3RvdHlwZS5hcHBseVNldHRpbmdzPWZ1bmN0aW9uKGMpe3ZhciBzPWMubWV0YWRhdGE7TS5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncy5jYWxsKHRoaXMsYyk7dmFyIHI9LyhjaGlsZHJlbnxpZXN8dmVzfG9lc3xzZXN8Y2hlc3xzaGVzfHhlc3xzKSQvaTt2YXIgUz17J2NoaWxkcmVuJzotMywnaWVzJzoneScsJ3Zlcyc6J2YnLCdvZXMnOi0yLCdzZXMnOi0yLCdjaGVzJzotMiwnc2hlcyc6LTIsJ3hlcyc6LTIsJ3MnOi0xfTtmdW5jdGlvbiBuKGksZSxvKXt2YXIgTixJO2k9aXx8e307Zm9yKE4gaW4gaSl7ST1pW05dO2lmKGUmJnR5cGVvZiBJIT09Im9iamVjdCIpe0k9e307SVtlXT1pW05dfUk9cS5leHRlbmQoe30sbyxJKTtJLm5hbWU9TjtpZihJLm11bHRpcGxlPT09dHJ1ZSYmIUkuc2luZ3VsYXJOYW1lKXtJLnNpbmd1bGFyTmFtZT1OLnJlcGxhY2UocixmdW5jdGlvbigkLHApe3ZhciBSPVNbcC50b0xvd2VyQ2FzZSgpXTtyZXR1cm4gdHlwZW9mIFI9PT0ic3RyaW5nIj9SOnAuc2xpY2UoMCxSKX0pfWlbTl09SX1yZXR1cm4gaX1mdW5jdGlvbiBmKGkscCl7dmFyIFI9e30sTjtmb3IoTiBpbiBpKXtpZihwPT09KGlbTl0udmlzaWJpbGl0eT09PSdwdWJsaWMnKSl7UltOXT1pW05dfX1yZXR1cm4gUn12YXIgYT0vKFthLXpdW14uXSooPzpcLlthLXpdW14uXSopKilcLi87ZnVuY3Rpb24gZChOKXt2YXIgbT1hLmV4ZWMoTik7cmV0dXJuKG0mJm1bMV0pfHwiIn10aGlzLl9zTGlicmFyeU5hbWU9cy5saWJyYXJ5fHxkKHRoaXMuZ2V0TmFtZSgpKTt0aGlzLl9tUHJvcGVydGllcz1uKHMucHJvcGVydGllcywidHlwZSIse3R5cGU6InN0cmluZyIsZ3JvdXA6Ik1pc2MifSk7dmFyIEE9bihzLmFnZ3JlZ2F0aW9ucywidHlwZSIse3R5cGU6InNhcC51aS5jb3JlLkNvbnRyb2wiLG11bHRpcGxlOnRydWUsdmlzaWJpbGl0eToncHVibGljJ30pO3RoaXMuX21BZ2dyZWdhdGlvbnM9ZihBLHRydWUpO3RoaXMuX21Qcml2YXRlQWdncmVnYXRpb25zPWYoQSxmYWxzZSk7dGhpcy5fc0RlZmF1bHRBZ2dyZWdhdGlvbj1zLmRlZmF1bHRBZ2dyZWdhdGlvbnx8bnVsbDt0aGlzLl9tQXNzb2NpYXRpb25zPW4ocy5hc3NvY2lhdGlvbnMsInR5cGUiLHt0eXBlOiJzYXAudWkuY29yZS5Db250cm9sIixtdWx0aXBsZTpmYWxzZX0pO3RoaXMuX21FdmVudHM9bihzLmV2ZW50cyxudWxsLHthbGxvd1ByZXZlbnREZWZhdWx0OmZhbHNlfSk7dGhpcy5fYkVucmljaGVkPWZhbHNlO2lmKGMubWV0YWRhdGEuX192ZXJzaW9uPjEuMCl7dGhpcy5nZW5lcmF0ZUFjY2Vzc29ycygpfX07Yi5wcm90b3R5cGUuYWZ0ZXJBcHBseVNldHRpbmdzPWZ1bmN0aW9uKCl7TS5wcm90b3R5cGUuYWZ0ZXJBcHBseVNldHRpbmdzLmNhbGwodGhpcyk7dmFyIHA9dGhpcy5nZXRQYXJlbnQoKTtpZihwJiZwIGluc3RhbmNlb2YgYil7dGhpcy5fbUFsbEV2ZW50cz1xLmV4dGVuZCh7fSxwLl9tQWxsRXZlbnRzLHRoaXMuX21FdmVudHMpO3RoaXMuX21BbGxQcm9wZXJ0aWVzPXEuZXh0ZW5kKHt9LHAuX21BbGxQcm9wZXJ0aWVzLHRoaXMuX21Qcm9wZXJ0aWVzKTt0aGlzLl9tQWxsUHJpdmF0ZUFnZ3JlZ2F0aW9ucz1xLmV4dGVuZCh7fSxwLl9tQWxsUHJpdmF0ZUFnZ3JlZ2F0aW9ucyx0aGlzLl9tUHJpdmF0ZUFnZ3JlZ2F0aW9ucyk7dGhpcy5fbUFsbEFnZ3JlZ2F0aW9ucz1xLmV4dGVuZCh7fSxwLl9tQWxsQWdncmVnYXRpb25zLHRoaXMuX21BZ2dyZWdhdGlvbnMpO3RoaXMuX21BbGxBc3NvY2lhdGlvbnM9cS5leHRlbmQoe30scC5fbUFsbEFzc29jaWF0aW9ucyx0aGlzLl9tQXNzb2NpYXRpb25zKTt0aGlzLl9zRGVmYXVsdEFnZ3JlZ2F0aW9uPXRoaXMuX3NEZWZhdWx0QWdncmVnYXRpb258fHAuX3NEZWZhdWx0QWdncmVnYXRpb247aWYocC5fbUhpZGRlbkFnZ3JlZ2F0aW9ucyl7dGhpcy5fbUhpZGRlbkFnZ3JlZ2F0aW9ucz1xLmV4dGVuZCh7fSxwLl9tSGlkZGVuQWdncmVnYXRpb25zKX19ZWxzZXt0aGlzLl9tQWxsRXZlbnRzPXRoaXMuX21FdmVudHM7dGhpcy5fbUFsbFByb3BlcnRpZXM9dGhpcy5fbVByb3BlcnRpZXM7dGhpcy5fbUFsbFByaXZhdGVBZ2dyZWdhdGlvbnM9dGhpcy5fbVByaXZhdGVBZ2dyZWdhdGlvbnM7dGhpcy5fbUFsbEFnZ3JlZ2F0aW9ucz10aGlzLl9tQWdncmVnYXRpb25zO3RoaXMuX21BbGxBc3NvY2lhdGlvbnM9dGhpcy5fbUFzc29jaWF0aW9uc319O2IuS2luZD17UFJPUEVSVFk6MCxTSU5HTEVfQUdHUkVHQVRJT046MSxNVUxUSVBMRV9BR0dSRUdBVElPTjoyLFNJTkdMRV9BU1NPQ0lBVElPTjozLE1VTFRJUExFX0FTU09DSUFUSU9OOjQsRVZFTlQ6NX07Yi5wcm90b3R5cGUuZ2V0TGlicmFyeU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc0xpYnJhcnlOYW1lfTtiLnByb3RvdHlwZS5pc0Fic3RyYWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JBYnN0cmFjdH07Yi5wcm90b3R5cGUuYWRkUHJvcGVydHk9ZnVuY3Rpb24obixpKXtpLm5hbWU9bjt0aGlzLl9tUHJvcGVydGllc1tuXT1pO2lmKCF0aGlzLl9tQWxsUHJvcGVydGllc1tuXSl7dGhpcy5fbUFsbFByb3BlcnRpZXNbbl09aX1pZih0aGlzLl9iRW5yaWNoZWQpe3RoaXMuX2VucmljaENoaWxkSW5mb3MoKX19O2IucHJvdG90eXBlLmhhc1Byb3BlcnR5PWZ1bmN0aW9uKG4pe3JldHVybiEhdGhpcy5fbUFsbFByb3BlcnRpZXNbbl19O2IucHJvdG90eXBlLmdldFByb3BlcnRpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbVByb3BlcnRpZXN9O2IucHJvdG90eXBlLmdldEFsbFByb3BlcnRpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbUFsbFByb3BlcnRpZXN9O2IucHJvdG90eXBlLmdldEFnZ3JlZ2F0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tQWdncmVnYXRpb25zfTtiLnByb3RvdHlwZS5oYXNBZ2dyZWdhdGlvbj1mdW5jdGlvbihuKXtyZXR1cm4hIXRoaXMuX21BbGxBZ2dyZWdhdGlvbnNbbl19O2IucHJvdG90eXBlLmdldEFsbEFnZ3JlZ2F0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tQWxsQWdncmVnYXRpb25zfTtiLnByb3RvdHlwZS5nZXRBbGxQcml2YXRlQWdncmVnYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21BbGxQcml2YXRlQWdncmVnYXRpb25zfTtiLnByb3RvdHlwZS5nZXRNYW5hZ2VkQWdncmVnYXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX21BbGxBZ2dyZWdhdGlvbnNbYV18fHRoaXMuX21BbGxQcml2YXRlQWdncmVnYXRpb25zW2FdfTtiLnByb3RvdHlwZS5nZXREZWZhdWx0QWdncmVnYXRpb25OYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NEZWZhdWx0QWdncmVnYXRpb259O2IucHJvdG90eXBlLmdldERlZmF1bHRBZ2dyZWdhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zRGVmYXVsdEFnZ3JlZ2F0aW9uJiZ0aGlzLmdldEFsbEFnZ3JlZ2F0aW9ucygpW3RoaXMuX3NEZWZhdWx0QWdncmVnYXRpb25dfTtiLnByb3RvdHlwZS5nZXRBc3NvY2lhdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbUFzc29jaWF0aW9uc307Yi5wcm90b3R5cGUuaGFzQXNzb2NpYXRpb249ZnVuY3Rpb24obil7cmV0dXJuISF0aGlzLl9tQWxsQXNzb2NpYXRpb25zW25dfTtiLnByb3RvdHlwZS5nZXRBbGxBc3NvY2lhdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbUFsbEFzc29jaWF0aW9uc307Yi5wcm90b3R5cGUuZ2V0RXZlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21FdmVudHN9O2IucHJvdG90eXBlLmhhc0V2ZW50PWZ1bmN0aW9uKG4pe3JldHVybiEhdGhpcy5fbUFsbEV2ZW50c1tuXX07Yi5wcm90b3R5cGUuZ2V0QWxsRXZlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21BbGxFdmVudHN9O2IucHJvdG90eXBlLmdldFByb3BlcnR5RGVmYXVsdHM9ZnVuY3Rpb24oKXt2YXIgZD10aGlzLl9tRGVmYXVsdHMsdDtpZihkKXtyZXR1cm4gZH1pZih0aGlzLmdldFBhcmVudCgpaW5zdGFuY2VvZiBiKXtkPXEuc2FwLm5ld09iamVjdCh0aGlzLmdldFBhcmVudCgpLmdldFByb3BlcnR5RGVmYXVsdHMoKSl9ZWxzZXtkPXt9fWZvcih2YXIgcyBpbiB0aGlzLl9tUHJvcGVydGllcyl7aWYodGhpcy5fbVByb3BlcnRpZXNbc10uZGVmYXVsdFZhbHVlIT09bnVsbCl7ZFtzXT10aGlzLl9tUHJvcGVydGllc1tzXS5kZWZhdWx0VmFsdWV9ZWxzZXt0PUQuZ2V0VHlwZSh0aGlzLl9tUHJvcGVydGllc1tzXS50eXBlKTtpZih0IGluc3RhbmNlb2YgRCl7ZFtzXT10LmdldERlZmF1bHRWYWx1ZSgpfWVsc2V7Zm9yKHZhciBpIGluIHQpe2Rbc109dFtpXTticmVha319fX1yZXR1cm4odGhpcy5fbURlZmF1bHRzPWQpfTtiLnByb3RvdHlwZS5jcmVhdGVQcm9wZXJ0eUJhZz1mdW5jdGlvbigpe2lmKCF0aGlzLl9mblByb3BlcnR5QmFnRmFjdG9yeSl7dGhpcy5fZm5Qcm9wZXJ0eUJhZ0ZhY3Rvcnk9cS5zYXAuZmFjdG9yeSh0aGlzLmdldFByb3BlcnR5RGVmYXVsdHMoKSl9cmV0dXJuIG5ldyh0aGlzLl9mblByb3BlcnR5QmFnRmFjdG9yeSkoKX07Yi5wcm90b3R5cGUuX2VucmljaENoaWxkSW5mb3M9ZnVuY3Rpb24oKXtpZih0aGlzLl9iRW5yaWNoZWQpe3JldHVybn1pZih0aGlzLmdldFBhcmVudCgpaW5zdGFuY2VvZiBiKXt0aGlzLmdldFBhcmVudCgpLl9lbnJpY2hDaGlsZEluZm9zKCl9dmFyIG0sbixpO2Z1bmN0aW9uIGEocCxuKXtyZXR1cm4gcCtuLnN1YnN0cmluZygwLDEpLnRvVXBwZXJDYXNlKCkrbi5zdWJzdHJpbmcoMSl9bT10aGlzLl9tUHJvcGVydGllcztmb3IobiBpbiBtKXtpPW1bbl07aS5fc05hbWU9bjtpLl9zVUlEPW47aS5fb1BhcmVudD10aGlzO2kuX2lLaW5kPWIuS2luZC5QUk9QRVJUWTtpLl9zTXV0YXRvcj1hKCJzZXQiLG4pO2kuX3NHZXR0ZXI9YSgiZ2V0IixuKX1tPXRoaXMuX21BZ2dyZWdhdGlvbnM7Zm9yKG4gaW4gbSl7aT1tW25dO2kuX3NOYW1lPW47aS5fc1VJRD0iYWdncmVnYXRpb246IituO2kuX29QYXJlbnQ9dGhpcztpLl9zRGVzdHJ1Y3Rvcj1hKCJkZXN0cm95IixuKTtpLl9zR2V0dGVyPWEoImdldCIsbik7aWYoaS5tdWx0aXBsZSl7aS5faUtpbmQ9Yi5LaW5kLk1VTFRJUExFX0FHR1JFR0FUSU9OO2kuX3NNdXRhdG9yPWEoImFkZCIsaS5zaW5ndWxhck5hbWUpO2kuX3NSZW1vdmVNdXRhdG9yPWEoInJlbW92ZSIsaS5zaW5ndWxhck5hbWUpO2kuX3NSZW1vdmVBbGxNdXRhdG9yPWEoInJlbW92ZUFsbCIsbil9ZWxzZXtpLl9pS2luZD1iLktpbmQuU0lOR0xFX0FHR1JFR0FUSU9OO2kuX3NNdXRhdG9yPWEoInNldCIsbil9fW09dGhpcy5fbUFzc29jaWF0aW9ucztmb3IobiBpbiBtKXtpPW1bbl07aS5fc05hbWU9bjtpLl9zVUlEPSJhc3NvY2lhdGlvbjoiK247aS5fb1BhcmVudD10aGlzO2kuX3NHZXR0ZXI9YSgiZ2V0IixuKTtpZihpLm11bHRpcGxlKXtpLl9pS2luZD1iLktpbmQuTVVMVElQTEVfQVNTT0NJQVRJT047aS5fc011dGF0b3I9YSgiYWRkIixpLnNpbmd1bGFyTmFtZSl9ZWxzZXtpLl9pS2luZD1iLktpbmQuU0lOR0xFX0FTU09DSUFUSU9OO2kuX3NNdXRhdG9yPWEoInNldCIsbil9fW09dGhpcy5fbUV2ZW50cztmb3IobiBpbiBtKXtpPW1bbl07aS5fc05hbWU9bjtpLl9zVUlEPSJldmVudDoiK247aS5fb1BhcmVudD10aGlzO2kuX2lLaW5kPWIuS2luZC5FVkVOVDtpLl9zTXV0YXRvcj1hKCJhdHRhY2giLG4pfXRoaXMuX2JFbnJpY2hlZD10cnVlfTtiLnByb3RvdHlwZS5nZXRKU09OS2V5cz1mdW5jdGlvbigpe2lmKHRoaXMuX21KU09OS2V5cyl7cmV0dXJuIHRoaXMuX21KU09OS2V5c310aGlzLl9lbnJpY2hDaGlsZEluZm9zKCk7dmFyIGo9e307ZnVuY3Rpb24gYShtKXt2YXIgbixpO2ZvcihuIGluIG0pe2k9bVtuXTtpZighaltuXXx8aS5faUtpbmQ8altuXS5faUtpbmQpe2pbbl09aX07altpLl9zVUlEXT1pfX1hKHRoaXMuZ2V0QWxsUHJvcGVydGllcygpKTthKHRoaXMuZ2V0QWxsQWdncmVnYXRpb25zKCkpO2EodGhpcy5nZXRBbGxBc3NvY2lhdGlvbnMoKSk7YSh0aGlzLmdldEFsbEV2ZW50cygpKTtyZXR1cm4odGhpcy5fbUpTT05LZXlzPWopfTtiLnByb3RvdHlwZS5nZW5lcmF0ZUFjY2Vzc29ycz1mdW5jdGlvbigpe3ZhciBjPXRoaXM7dmFyIGU9dGhpcy5nZXRDbGFzcygpLnByb3RvdHlwZTtmdW5jdGlvbiBnKHAsbixmLGQpe3ZhciBuPXArbi5zdWJzdHJpbmcoMCwxKS50b1VwcGVyQ2FzZSgpK24uc3Vic3RyaW5nKDEpO2lmKCFlW25dKXtlW25dPWQ/ZnVuY3Rpb24oKXtxLnNhcC5sb2cud2FybmluZygiVXNhZ2Ugb2YgZGVwcmVjYXRlZCBmZWF0dXJlOiAiK2MuZ2V0TmFtZSgpKyIuIituKTtyZXR1cm4gZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9OmY7Yy5fYVB1YmxpY01ldGhvZHMucHVzaChuKX19cS5lYWNoKHRoaXMuX21Qcm9wZXJ0aWVzLGZ1bmN0aW9uKG4saSl7ZygiZ2V0IixuLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UHJvcGVydHkobil9KTtnKCJzZXQiLG4sZnVuY3Rpb24odil7dGhpcy5zZXRQcm9wZXJ0eShuLHYpO3JldHVybiB0aGlzfSxpLmRlcHJlY2F0ZWQpO2lmKGkuYmluZGFibGUpe2coImJpbmQiLG4sZnVuY3Rpb24ocCxmLG0pe3RoaXMuYmluZFByb3BlcnR5KG4scCxmLG0pO3JldHVybiB0aGlzfSxpLmRlcHJlY2F0ZWQpO2coInVuYmluZCIsbixmdW5jdGlvbihwKXt0aGlzLnVuYmluZFByb3BlcnR5KG4scCk7cmV0dXJuIHRoaXN9KX19KTtxLmVhY2godGhpcy5fbUFnZ3JlZ2F0aW9ucyxmdW5jdGlvbihuLGQpe2lmKCFkLm11bHRpcGxlKXtnKCJnZXQiLG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBZ2dyZWdhdGlvbihuKX0pO2coInNldCIsbixmdW5jdGlvbih2KXt0aGlzLnNldEFnZ3JlZ2F0aW9uKG4sdik7cmV0dXJuIHRoaXN9LGQuZGVwcmVjYXRlZCl9ZWxzZXt2YXIgaD1kLnNpbmd1bGFyTmFtZTtnKCJnZXQiLG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBZ2dyZWdhdGlvbihuLFtdKX0pO2coImFkZCIsaCxmdW5jdGlvbihhKXt0aGlzLmFkZEFnZ3JlZ2F0aW9uKG4sYSk7cmV0dXJuIHRoaXN9LGQuZGVwcmVjYXRlZCk7ZygiaW5zZXJ0IixoLGZ1bmN0aW9uKGksYSl7dGhpcy5pbnNlcnRBZ2dyZWdhdGlvbihuLGksYSk7cmV0dXJuIHRoaXN9LGQuZGVwcmVjYXRlZCk7ZygicmVtb3ZlIixoLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZUFnZ3JlZ2F0aW9uKG4sYSl9KTtnKCJyZW1vdmVBbGwiLG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdmVBbGxBZ2dyZWdhdGlvbihuKX0pO2coImluZGV4T2YiLGgsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW5kZXhPZkFnZ3JlZ2F0aW9uKG4sYSl9KX1nKCJkZXN0cm95IixuLGZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95QWdncmVnYXRpb24obik7cmV0dXJuIHRoaXN9KTtpZihkLmJpbmRhYmxlKXtnKCJiaW5kIixuLGZ1bmN0aW9uKHAsdCxzLGYpe3RoaXMuYmluZEFnZ3JlZ2F0aW9uKG4scCx0LHMsZik7cmV0dXJuIHRoaXN9LGQuZGVwcmVjYXRlZCk7ZygidW5iaW5kIixuLGZ1bmN0aW9uKHApe3RoaXMudW5iaW5kQWdncmVnYXRpb24obixwKTtyZXR1cm4gdGhpc30pfX0pO3EuZWFjaCh0aGlzLl9tQXNzb2NpYXRpb25zLGZ1bmN0aW9uKG4saSl7aWYoIWkubXVsdGlwbGUpe2coImdldCIsbixmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEFzc29jaWF0aW9uKG4pfSk7Zygic2V0IixuLGZ1bmN0aW9uKHYpe3RoaXMuc2V0QXNzb2NpYXRpb24obix2KTtyZXR1cm4gdGhpc30saS5kZXByZWNhdGVkKX1lbHNle3ZhciBkPWkuc2luZ3VsYXJOYW1lO2coImdldCIsbixmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEFzc29jaWF0aW9uKG4sW10pfSk7ZygiYWRkIixkLGZ1bmN0aW9uKGEpe3RoaXMuYWRkQXNzb2NpYXRpb24obixhKTtyZXR1cm4gdGhpc30saS5kZXByZWNhdGVkKTtnKCJyZW1vdmUiLGQsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVtb3ZlQXNzb2NpYXRpb24obixhKX0pO2coInJlbW92ZUFsbCIsbixmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW92ZUFsbEFzc29jaWF0aW9uKG4pfSl9fSk7cS5lYWNoKHRoaXMuX21FdmVudHMsZnVuY3Rpb24obixpKXtnKCJhdHRhY2giLG4sZnVuY3Rpb24oZCxmLG8pe3RoaXMuYXR0YWNoRXZlbnQobixkLGYsbyk7cmV0dXJuIHRoaXN9LGkuZGVwcmVjYXRlZCk7ZygiZGV0YWNoIixuLGZ1bmN0aW9uKGYsbyl7dGhpcy5kZXRhY2hFdmVudChuLGYsbyk7cmV0dXJuIHRoaXN9KTt2YXIgYT0hIWkuYWxsb3dQcmV2ZW50RGVmYXVsdDt2YXIgaD0hIWkuZW5hYmxlRXZlbnRCdWJibGluZztnKCJmaXJlIixuLGZ1bmN0aW9uKHApe3JldHVybiB0aGlzLmZpcmVFdmVudChuLHAsYSxoKX0pfSl9OyhmdW5jdGlvbigpe3ZhciB1PXt9O2Z1bmN0aW9uIGEoaSl7aT1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRVSURQcmVmaXgoKStpO3VbaV09dVtpXXx8MDtyZXR1cm4oaSt1W2ldKyspfWIudWlkPWE7Yi5wcm90b3R5cGUudWlkPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5fc1VJRFRva2VuO2lmKHR5cGVvZiBpIT09InN0cmluZyIpe2k9dGhpcy5nZXROYW1lKCk7aT1pLnNsaWNlKGkubGFzdEluZGV4T2YoJy4nKSsxKTtpPWkucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywiJDEgJDIiKS5zcGxpdCgiICIpLnNsaWNlKC0xKVswXTtpPXRoaXMuX3NVSURUb2tlbj1pLnJlcGxhY2UoLyhbXkEtWmEtejAtOS1fLjpdKXwoWzAtOV0rJCkvZywiIikudG9Mb3dlckNhc2UoKX1yZXR1cm4gYShpKX19KCkpO3JldHVybiBifSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29tcG9uZW50TWV0YWRhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Db21wb25lbnRNZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0NvbXBvbmVudE1ldGFkYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdE1ldGFkYXRhJ10sZnVuY3Rpb24ocSxNKXsidXNlIHN0cmljdCI7dmFyIEM9ZnVuY3Rpb24oYyxvKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07Qy5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KE0ucHJvdG90eXBlKTtDLnByZXByb2Nlc3NDbGFzc0luZm89ZnVuY3Rpb24oYyl7aWYoYyYmdHlwZW9mIGMubWV0YWRhdGE9PT0ic3RyaW5nIil7Yy5tZXRhZGF0YT17X3NyYzpjLm1ldGFkYXRhfX1yZXR1cm4gY307Qy5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncz1mdW5jdGlvbihjKXt2YXIgcz1jLm1ldGFkYXRhO3ZhciBuPXRoaXMuZ2V0TmFtZSgpLHA9bi5yZXBsYWNlKC9cLlx3Kz8kLywiIik7aWYocy5fc3JjKXtpZihzLl9zcmM9PSJjb21wb25lbnQuanNvbiIpe3Euc2FwLmxvZy53YXJuaW5nKCJVc2FnZSBvZiBkZWNsYWNhdGlvbiBcIm1ldGFkYXRhOiAnY29tcG9uZW50Lmpzb24nXCIgaXMgZGVwcmVjYXRlZCAoY29tcG9uZW50ICIrbisiKS4gVXNlIFwibWV0YWRhdGE6ICdqc29uJ1wiIGluc3RlYWQuIil9ZWxzZSBpZihzLl9zcmMhPSJqc29uIil7dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIG1ldGFkYXRhIGRlY2xhcmF0aW9uIGZvciBjb21wb25lbnQgIituKyI6IFwiIitzLl9zcmMrIlwiISBVc2UgXCJtZXRhZGF0YTogJ2pzb24nXCIgdG8gbG9hZCBtZXRhZGF0YSBmcm9tIGNvbXBvbmVudC5qc29uLiIpfXZhciByPXAucmVwbGFjZSgvXC4vZywiLyIpKyIvY29tcG9uZW50Lmpzb24iO3Euc2FwLmxvZy5pbmZvKCJUaGUgbWV0YWRhdGEgb2YgdGhlIGNvbXBvbmVudCAiK24rIiBpcyBsb2FkZWQgZnJvbSBmaWxlICIrcisiLiIpO3RyeXt2YXIgUj1xLnNhcC5sb2FkUmVzb3VyY2Uocix7ZGF0YVR5cGU6Impzb24iLGZhaWxPbkVycm9yOmZhbHNlfSk7cS5leHRlbmQocyxSKX1jYXRjaChlKXtxLnNhcC5sb2cuZXJyb3IoIkZhaWxlZCB0byBsb2FkIGNvbXBvbmVudCBtZXRhZGF0YSBmcm9tIFwiIityKyJcIiAoY29tcG9uZW50ICIrbisiKSEgUmVhc29uOiAiK2UpfX1NLnByb3RvdHlwZS5hcHBseVNldHRpbmdzLmNhbGwodGhpcyxjKTt0aGlzLl9zQ29tcG9uZW50TmFtZT1wO3RoaXMuX2JJbml0aWFsaXplZD1mYWxzZTt0aGlzLl9pSW5zdGFuY2VDb3VudD0wO3RoaXMuX3NWZXJzaW9uPXMudmVyc2lvbjt0aGlzLl9tRGVwZW5kZW5jaWVzPXMuZGVwZW5kZW5jaWVzO3RoaXMuX2FJbmNsdWRlcz1zLmluY2x1ZGVzO3RoaXMuX21Db25maWc9cy5jb25maWc7dGhpcy5fbUN1c3RvbWl6aW5nPXMuY3VzdG9taXppbmc7dGhpcy5fbU1vZGVscz1zLm1vZGVsc3x8e307dGhpcy5fbVNlcnZpY2VzPXMuc2VydmljZXN8fHt9O3ZhciBQPXRoaXMuZ2V0UGFyZW50KCk7aWYoUCBpbnN0YW5jZW9mIEMpe3RoaXMuX21Db25maWc9cS5leHRlbmQodHJ1ZSx7fSxQLl9tQ29uZmlnLHRoaXMuX21Db25maWcpO3RoaXMuX21DdXN0b21pemluZz1xLmV4dGVuZCh0cnVlLHt9LFAuX21DdXN0b21pemluZyx0aGlzLl9tQ3VzdG9taXppbmcpO3RoaXMuX21Nb2RlbHM9cS5leHRlbmQodHJ1ZSx7fSxQLl9tTW9kZWxzLHRoaXMuX21Nb2RlbHMpO3RoaXMuX21TZXJ2aWNlcz1xLmV4dGVuZCh0cnVlLHt9LFAuX21TZXJ2aWNlcyx0aGlzLl9tU2VydmljZXMpfXRoaXMuX29TdGF0aWNJbmZvPXN9O0MucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXtpZighdGhpcy5fYkluaXRpYWxpemVkKXt2YXIgcD10aGlzLmdldFBhcmVudCgpO2lmKHAgaW5zdGFuY2VvZiBDKXtwLmluaXQoKX10aGlzLl9sb2FkRGVwZW5kZW5jaWVzKCk7dGhpcy5fbG9hZEluY2x1ZGVzKCk7dGhpcy5fYkluaXRpYWxpemVkPXRydWV9fTtDLnByb3RvdHlwZS5leGl0PWZ1bmN0aW9uKCl7aWYodGhpcy5fYkluaXRpYWxpemVkKXt2YXIgcD10aGlzLmdldFBhcmVudCgpO2lmKHAgaW5zdGFuY2VvZiBDKXtwLmV4aXQoKX10aGlzLl9iSW5pdGlhbGl6ZWQ9ZmFsc2V9fTtDLnByb3RvdHlwZS5vbkluaXRDb21wb25lbnQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9pSW5zdGFuY2VDb3VudD09PTAmJiFxLmlzRW1wdHlPYmplY3QodGhpcy5fbUN1c3RvbWl6aW5nKSl7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uIik7c2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uLmFjdGl2YXRlRm9yQ29tcG9uZW50KHRoaXMuX3NDb21wb25lbnROYW1lKX10aGlzLl9pSW5zdGFuY2VDb3VudCsrfTtDLnByb3RvdHlwZS5vbkV4aXRDb21wb25lbnQ9ZnVuY3Rpb24oKXt0aGlzLl9pSW5zdGFuY2VDb3VudC0tO2lmKHRoaXMuX2lJbnN0YW5jZUNvdW50PT09MCYmIXEuaXNFbXB0eU9iamVjdCh0aGlzLl9tQ3VzdG9taXppbmcpKXtpZihzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24pe3NhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbi5kZWFjdGl2YXRlRm9yQ29tcG9uZW50KHRoaXMuX3NDb21wb25lbnROYW1lKX19fTtDLnByb3RvdHlwZS5nZXRDdXN0b21FbnRyeT1mdW5jdGlvbihrLG0pe2lmKCFrfHxrLmluZGV4T2YoIi4iKTw9MCl7cS5zYXAubG9nLndhcm5pbmcoIkNvbXBvbmVudCBNZXRhZGF0YSBlbnRyaWVzIHdpdGgga2V5cyB3aXRob3V0IG5hbWVzcGFjZSBwcmVmaXggY2FuIG5vdCBiZSByZWFkIHZpYSBnZXRDdXN0b21FbnRyeS4gS2V5OiAiK2srIiwgQ29tcG9uZW50OiAiK3RoaXMuZ2V0TmFtZSgpKTtyZXR1cm4gbnVsbH12YXIgZD10aGlzLl9vU3RhdGljSW5mb1trXXx8e307aWYoIXEuaXNQbGFpbk9iamVjdChkKSl7cS5zYXAubG9nLndhcm5pbmcoIkN1c3RvbSBDb21wb25lbnQgTWV0YWRhdGEgZW50cnkgd2l0aCBrZXkgJyIraysiJyBtdXN0IGJlIGFuIG9iamVjdC4gQ29tcG9uZW50OiAiK3RoaXMuZ2V0TmFtZSgpKTtyZXR1cm4gbnVsbH12YXIgcD10aGlzLmdldFBhcmVudCgpO2lmKG0mJnAgaW5zdGFuY2VvZiBDKXtyZXR1cm4gcS5leHRlbmQodHJ1ZSx7fSxwLmdldEN1c3RvbUVudHJ5KGssbSksZCl9cmV0dXJuIHEuZXh0ZW5kKHRydWUse30sZCl9O0MucHJvdG90eXBlLmdldERlcGVuZGVuY2llcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tRGVwZW5kZW5jaWVzfTtDLnByb3RvdHlwZS5nZXRJbmNsdWRlcz1mdW5jdGlvbigpe3JldHVybih0aGlzLl9hSW5jbHVkZXMmJnRoaXMuX2FJbmNsdWRlcy5sZW5ndGg+MCk/dGhpcy5fYUluY2x1ZGVzOm51bGx9O0MucHJvdG90eXBlLmdldFVJNVZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbURlcGVuZGVuY2llcz90aGlzLl9tRGVwZW5kZW5jaWVzLnVpNXZlcnNpb246bnVsbH07Qy5wcm90b3R5cGUuZ2V0Q29tcG9uZW50cz1mdW5jdGlvbigpe3ZhciBjPW51bGw7aWYodGhpcy5fbURlcGVuZGVuY2llcyl7aWYodGhpcy5fbURlcGVuZGVuY2llcy5jb21wb25lbnRzJiYodGhpcy5fbURlcGVuZGVuY2llcy5jb21wb25lbnRzLmxlbmd0aD4wKSl7Yz10aGlzLl9tRGVwZW5kZW5jaWVzLmNvbXBvbmVudHN9fXJldHVybiBjfTtDLnByb3RvdHlwZS5nZXRMaWJzPWZ1bmN0aW9uKCl7dmFyIGw9bnVsbDtpZih0aGlzLl9tRGVwZW5kZW5jaWVzKXtpZih0aGlzLl9tRGVwZW5kZW5jaWVzLmxpYnMmJih0aGlzLl9tRGVwZW5kZW5jaWVzLmxpYnMubGVuZ3RoPjApKXtsPXRoaXMuX21EZXBlbmRlbmNpZXMubGlic319cmV0dXJuIGx9O0MucHJvdG90eXBlLmdldFZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc1ZlcnNpb259O0MucHJvdG90eXBlLmdldENvbmZpZz1mdW5jdGlvbihrKXtyZXR1cm4gdGhpcy5fbUNvbmZpZz9xLmV4dGVuZCh7fSxrP3RoaXMuX21Db25maWdba106dGhpcy5fbUNvbmZpZyk6dW5kZWZpbmVkfTtDLnByb3RvdHlwZS5nZXRDdXN0b21pemluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tQ3VzdG9taXppbmc/cS5leHRlbmQoe30sdGhpcy5fbUN1c3RvbWl6aW5nKTp1bmRlZmluZWR9O0MucHJvdG90eXBlLmdldE1vZGVscz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tTW9kZWxzfTtDLnByb3RvdHlwZS5nZXRTZXJ2aWNlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tU2VydmljZXN9O0MucHJvdG90eXBlLl9sb2FkSW5jbHVkZXM9ZnVuY3Rpb24oKXt2YXIgST10aGlzLmdldEluY2x1ZGVzKCk7aWYoSSYmSS5sZW5ndGg+MCl7dmFyIHQ9dGhpczt2YXIgbD10aGlzLmdldExpYnJhcnlOYW1lKCk7cS5lYWNoKEksZnVuY3Rpb24oaSxmKXtpZihmLm1hdGNoKC9cLmNzcyQvaSkpe3ZhciBjPXNhcC51aS5yZXNvdXJjZShsLGYpO3Euc2FwLmxvZy5pbmZvKCJDb21wb25lbnQgXCIiK3QuZ2V0TmFtZSgpKyJcIiBpcyBsb2FkaW5nIENTUzogXCIiK2MrIlwiIik7cS5zYXAuaW5jbHVkZVN0eWxlU2hlZXQoYyl9ZWxzZXt2YXIgbT1mLm1hdGNoKC9cLmpzJC9pKTtpZihtKXt2YXIgcD1sLnJlcGxhY2UoL1wuL2csJy8nKSsoZi5zbGljZSgwLDEpPT09Jy8nPycnOicvJykrZi5zbGljZSgwLG0uaW5kZXgpO3Euc2FwLmxvZy5pbmZvKCJDb21wb25lbnQgXCIiK3QuZ2V0TmFtZSgpKyJcIiBpcyBsb2FkaW5nIEpTOiBcIiIrcCsiXCIiKTtxLnNhcC5fcmVxdWlyZVBhdGgocCl9fX0pfX07Qy5wcm90b3R5cGUuX2xvYWREZXBlbmRlbmNpZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGQ9dGhpcy5nZXREZXBlbmRlbmNpZXMoKTtpZihkKXt2YXIgbD1kLmxpYnM7aWYobCl7cS5lYWNoKGwsZnVuY3Rpb24oaSxMKXtxLnNhcC5sb2cuaW5mbygiQ29tcG9uZW50IFwiIit0LmdldE5hbWUoKSsiXCIgaXMgbG9hZGluZyBsaWJyYXJ5OiBcIiIrTCsiXCIiKTtzYXAudWkuZ2V0Q29yZSgpLmxvYWRMaWJyYXJ5KEwpfSl9dmFyIGM9ZC5jb21wb25lbnRzO2lmKGMpe3EuZWFjaChjLGZ1bmN0aW9uKGksbil7cS5zYXAubG9nLmluZm8oIkNvbXBvbmVudCBcIiIrdC5nZXROYW1lKCkrIlwiIGlzIGxvYWRpbmcgY29tcG9uZW50OiBcIiIrbisiLkNvbXBvbmVudFwiIik7c2FwLnVpLmNvbXBvbmVudC5sb2FkKHtuYW1lOm59KX0pfX19O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29uZmlndXJhdGlvbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkNvbmZpZ3VyYXRpb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Db25maWd1cmF0aW9uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0JywnLi9Mb2NhbGUnLCdzYXAvdWkvdGhpcmRwYXJ0eS9VUkknXSxmdW5jdGlvbihxLEIsTCxVKXsidXNlIHN0cmljdCI7dmFyIEM9Qi5leHRlbmQoInNhcC51aS5jb3JlLkNvbmZpZ3VyYXRpb24iLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihvKXt0aGlzLl9vQ29yZT1vO2Z1bmN0aW9uIGYoKXt2YXIgZTtpZighIXNhcC51aS5EZXZpY2Uub3MuYW5kcm9pZCl7ZT1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9ccyhbYS16XXsyfS1bYS16XXsyfSlbOyldL2kpO2lmKGUpe3JldHVybiBlWzFdfX1yZXR1cm4gbmF2aWdhdG9yLmxhbmd1YWdlfHxuYXZpZ2F0b3IudXNlckxhbmd1YWdlfHxuYXZpZ2F0b3IuYnJvd3Nlckxhbmd1YWdlfXZhciBnPXsidGhlbWUiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiYmFzZSJ9LCJsYW5ndWFnZSI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOmYoKX0sImZvcm1hdExvY2FsZSI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOm51bGx9LCJhY2Nlc3NpYmlsaXR5Ijp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOnRydWV9LCJhbmltYXRpb24iOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6dHJ1ZX0sInJ0bCI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpudWxsfSwiZGVidWciOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJpbnNwZWN0Ijp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlfSwib3JpZ2luSW5mbyI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX0sIm5vQ29uZmxpY3QiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2Usbm9Vcmw6dHJ1ZX0sIm5vRHVwbGljYXRlSWRzIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOnRydWV9LCJ0cmFjZSI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZSxub1VybDp0cnVlfSwibW9kdWxlcyI6e3R5cGU6InN0cmluZ1tdIixkZWZhdWx0VmFsdWU6W10sbm9Vcmw6dHJ1ZX0sImFyZWFzIjp7dHlwZToic3RyaW5nW10iLGRlZmF1bHRWYWx1ZTpudWxsLG5vVXJsOnRydWV9LCJvbkluaXQiOnt0eXBlOiJjb2RlIixkZWZhdWx0VmFsdWU6dW5kZWZpbmVkLG5vVXJsOnRydWV9LCJ1aWRQcmVmaXgiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiX18iLG5vVXJsOnRydWV9LCJpZ25vcmVVcmxQYXJhbXMiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2Usbm9Vcmw6dHJ1ZX0sIndlaW5yZVNlcnZlciI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiIiLG5vVXJsOnRydWV9LCJ3ZWlucmVJZCI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiIifSwicHJlbG9hZCI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiJhdXRvIn0sInJvb3RDb21wb25lbnQiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiIixub1VybDp0cnVlfSwieHgtcm9vdENvbXBvbmVudE5vZGUiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiIixub1VybDp0cnVlfSwiYXBwbGljYXRpb24iOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiIn0sImFwcENhY2hlQnVzdGVyIjp7dHlwZToic3RyaW5nW10iLGRlZmF1bHRWYWx1ZTpbXX0sInh4LWFwcENhY2hlQnVzdGVyTW9kZSI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiJzeW5jIn0sInh4LWRpc2FibGVDdXN0b21pemluZyI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZSxub1VybDp0cnVlfSwieHgtbG9hZEFsbE1vZGUiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2Usbm9Vcmw6dHJ1ZX0sInh4LXRlc3QtbW9iaWxlIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlfSwieHgtcHJlbG9hZExpYkNzcyI6e3R5cGU6InN0cmluZ1tdIixkZWZhdWx0VmFsdWU6W119LCJ4eC1jb21wb25lbnRQcmVsb2FkIjp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6IiJ9LCJ4eC1iaW5kaW5nU3ludGF4Ijp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6InNpbXBsZSIsbm9Vcmw6dHJ1ZX0sInh4LWRlc2lnbk1vZGUiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJ4eC1hY2Nlc3NpYmlsaXR5TW9kZSI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX0sInh4LXN1cHBvcnRlZExhbmd1YWdlcyI6e3R5cGU6InN0cmluZ1tdIixkZWZhdWx0VmFsdWU6W119LCJ4eC1ib290VGFzayI6e3R5cGU6ImZ1bmN0aW9uIixkZWZhdWx0VmFsdWU6dW5kZWZpbmVkLG5vVXJsOnRydWV9LCJ4eC1zdXBwcmVzc0RlYWN0aXZhdGlvbk9mQ29udHJvbGxlckNvZGUiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJ4eC1ub05hdGl2ZVNjcm9sbCI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX0sInN0YXRpc3RpY3MiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9fTt2YXIgaD17Inh4LXRlc3QiOiIxLjE1IiwiZmxleEJveFBvbHlmaWxsIjoiMS4xNCIsInNhcE1lVGFiQ29udGFpbmVyIjoiMS4xNCIsInNhcE1lUHJvZ2Vzc0luZGljYXRvciI6IjEuMTQiLCJzYXBNR3Jvd2luZ0xpc3QiOiIxLjE0Iiwic2FwTUxpc3RBc1RhYmxlIjoiMS4xNCIsInNhcE1EaWFsb2dXaXRoUGFkZGluZyI6IjEuMTQifTt0aGlzLm9Gb3JtYXRTZXR0aW5ncz1uZXcgQy5Gb3JtYXRTZXR0aW5ncyh0aGlzKTt2YXIgaT10aGlzO2Z1bmN0aW9uIHMoTixWKXtpZih0eXBlb2YgVj09PSJ1bmRlZmluZWQifHxWPT09bnVsbCl7cmV0dXJufXN3aXRjaChnW05dLnR5cGUpe2Nhc2UiYm9vbGVhbiI6aWYodHlwZW9mIFY9PT0ic3RyaW5nIil7aWYoZ1tOXS5kZWZhdWx0VmFsdWUpe2lbTl09Vi50b0xvd2VyQ2FzZSgpIT0iZmFsc2UifWVsc2V7aVtOXT1WLnRvTG93ZXJDYXNlKCk9PT0idHJ1ZSJ8fFYudG9Mb3dlckNhc2UoKT09PSJ4In19ZWxzZXtpW05dPSEhVn1icmVhaztjYXNlInN0cmluZyI6aVtOXT0iIitWO2JyZWFrO2Nhc2UiY29kZSI6aVtOXT10eXBlb2YgVj09PSJmdW5jdGlvbiI/VjpTdHJpbmcoVik7YnJlYWs7Y2FzZSJmdW5jdGlvbiI6aWYodHlwZW9mIFYhPT0iZnVuY3Rpb24iKXt0aHJvdyBuZXcgRXJyb3IoInVuc3VwcG9ydGVkIHZhbHVlIil9aVtOXT1WO2JyZWFrO2Nhc2Uic3RyaW5nW10iOmlmKHEuaXNBcnJheShWKSl7aVtOXT1WfWVsc2UgaWYodHlwZW9mIFY9PT0ic3RyaW5nIil7aVtOXT1xLm1hcChWLnNwbGl0KC9bICw7XS8pLGZ1bmN0aW9uKCQpe3JldHVybiBxLnRyaW0oJCl9KX1lbHNle3Rocm93IG5ldyBFcnJvcigidW5zdXBwb3J0ZWQgdmFsdWUiKX1icmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiaWxsZWdhbCBzdGF0ZSIpfX1mdW5jdGlvbiBqKFQpe3ZhciB2LHc7dHJ5e3Y9bmV3IFVSSShULHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5ub3JtYWxpemUoKTt3PXYucGF0aCgpO3JldHVybiB3Kyh3LnNsaWNlKC0xKT09PScvJz8nJzonLycpKyJVSTUvIn1jYXRjaChlKXt9fWZvcih2YXIgbiBpbiBnKXtpW25dPWdbbl0uZGVmYXVsdFZhbHVlfXZhciBrPXdpbmRvd1sic2FwLXVpLWNvbmZpZyJdfHx7fTtrLm9uaW5pdD1rLm9uaW5pdHx8a1siZXZ0LW9uaW5pdCJdO2Zvcih2YXIgbiBpbiBnKXtzKG4sa1tuLnRvTG93ZXJDYXNlKCldKX1pZihrLmxpYnMpe2kubW9kdWxlcz1xLm1hcChrLmxpYnMuc3BsaXQoIiwiKSxmdW5jdGlvbigkKXtyZXR1cm4gcS50cmltKCQpKyIubGlicmFyeSJ9KS5jb25jYXQoaS5tb2R1bGVzKX12YXIgUD0iY29tcGF0dmVyc2lvbiI7dmFyIEQ9a1tQXTt2YXIgbD1xLnNhcC5WZXJzaW9uKCIxLjE0Iik7dGhpcy5fY29tcGF0dmVyc2lvbj17fTtmdW5jdGlvbiBfKGUpe3ZhciB2PSFlP0R8fGwudG9TdHJpbmcoKTprW1ArIi0iK2UudG9Mb3dlckNhc2UoKV18fER8fGhbZV18fGwudG9TdHJpbmcoKTt2PXEuc2FwLlZlcnNpb24odi50b0xvd2VyQ2FzZSgpPT09ImVkZ2UiP3NhcC51aS52ZXJzaW9uOnYpO3JldHVybiBxLnNhcC5WZXJzaW9uKHYuZ2V0TWFqb3IoKSx2LmdldE1pbm9yKCkpfXRoaXMuX2NvbXBhdHZlcnNpb24uX2RlZmF1bHQ9XygpO2Zvcih2YXIgbiBpbiBoKXt0aGlzLl9jb21wYXR2ZXJzaW9uW25dPV8obil9aWYoIWkuaWdub3JlVXJsUGFyYW1zKXt2YXIgdT0ic2FwLXVpLSI7dmFyIG09cS5zYXAuZ2V0VXJpUGFyYW1ldGVycygpO2lmKG0ubVBhcmFtc1snc2FwLWxvY2FsZSddfHxtLm1QYXJhbXNbJ3NhcC1sYW5ndWFnZSddKXt2YXIgVj1tLmdldCgnc2FwLWxvY2FsZScpfHxNW20uZ2V0KCdzYXAtbGFuZ3VhZ2UnKS50b1VwcGVyQ2FzZSgpXXx8bS5nZXQoJ3NhcC1sYW5ndWFnZScpO2lmKFY9PT0iIil7aVsnbGFuZ3VhZ2UnXT1nWydsYW5ndWFnZSddLmRlZmF1bHRWYWx1ZX1lbHNle3MoJ2xhbmd1YWdlJyxWKX19aWYobS5tUGFyYW1zWydzYXAtYWNjZXNzaWJpbGl0eSddKXt2YXIgVj1tLmdldCgnc2FwLWFjY2Vzc2liaWxpdHknKTtpZihWPT09IlgifHxWPT09IngiKXtzKCd4eC1hY2Nlc3NpYmlsaXR5TW9kZScsdHJ1ZSl9ZWxzZXtzKCd4eC1hY2Nlc3NpYmlsaXR5TW9kZScsZmFsc2UpfX1pZihtLm1QYXJhbXNbJ3NhcC1ydGwnXSl7dmFyIFY9bS5nZXQoJ3NhcC1ydGwnKTtpZihWPT09IlgifHxWPT09IngiKXtzKCdydGwnLHRydWUpfWVsc2V7cygncnRsJyxmYWxzZSl9fWlmKG0ubVBhcmFtc1snc2FwLXRoZW1lJ10pe3ZhciBWPW0uZ2V0KCdzYXAtdGhlbWUnKTtpZihWPT09IiIpe2lbJ3RoZW1lJ109Z1sndGhlbWUnXS5kZWZhdWx0VmFsdWV9ZWxzZXtzKCd0aGVtZScsVil9fWlmKG0ubVBhcmFtc1snc2FwLXN0YXRpc3RpY3MnXSl7dmFyIFY9bS5nZXQoJ3NhcC1zdGF0aXN0aWNzJyk7cygnc3RhdGlzdGljcycsVil9Zm9yKHZhciBuIGluIGcpe2lmKGdbbl0ubm9Vcmwpe2NvbnRpbnVlfXZhciBWPW0uZ2V0KHUrbik7aWYoVj09PSIiKXtpW25dPWdbbl0uZGVmYXVsdFZhbHVlfWVsc2V7cyhuLFYpfX19dGhpcy5kZXJpdmVkUlRMPUwuX2ltcGxpZXNSVEwoaS5sYW5ndWFnZSk7dmFyIHQ9aS50aGVtZTt2YXIgVDt2YXIgST10LmluZGV4T2YoIkAiKTtpZihJPj0wKXtUPWoodC5zbGljZShJKzEpKTtpZihUKXtpLnRoZW1lPXQuc2xpY2UoMCxJKTtpLnRoZW1lUm9vdD1UfWVsc2V7aS50aGVtZT0oay50aGVtZSYmay50aGVtZSE9PXQpP2sudGhlbWU6ImJhc2UiO0k9LTF9fWkudGhlbWU9dGhpcy5fbm9ybWFsaXplVGhlbWUoaS50aGVtZSxUKTt2YXIgcD0iLGFyLGJnLGNhLGNzLGRhLGRlLGVsLGVuLGVzLGV0LGZpLGZyLGhpLGhyLGh1LGl0LGl3LGphLGtvLGx0LGx2LG5sLG5vLHBsLHB0LHJvLHJ1LHNoLHNrLHNsLHN2LHRoLHRyLHVrLHZpLHpoX0NOLHpoX1RXIi5zcGxpdCgvLC8pO2lmKHAubGVuZ3RoPT09MSYmcFswXS5zbGljZSgwLDEpPT09J0AnKXtwPXVuZGVmaW5lZH1pWydsYW5ndWFnZXNEZWxpdmVyZWRXaXRoQ29yZSddPXA7dmFyIHI9aVsneHgtc3VwcG9ydGVkTGFuZ3VhZ2VzJ107aWYoci5sZW5ndGg9PT0wfHwoci5sZW5ndGg9PT0xJiZyWzBdPT09JyonKSl7cj1bXX1lbHNlIGlmKHIubGVuZ3RoPT09MSYmclswXT09PSdkZWZhdWx0Jyl7cj1wfHxbXX1pWyd4eC1zdXBwb3J0ZWRMYW5ndWFnZXMnXT1yO2Zvcih2YXIgbiBpbiBnKXtpZihpW25dIT09Z1tuXS5kZWZhdWx0VmFsdWUpe3Euc2FwLmxvZy5pbmZvKCIgICIrbisiID0gIitpW25dKX19fSxnZXRWZXJzaW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fdmVyc2lvbil7cmV0dXJuIHRoaXMuX3ZlcnNpb259dGhpcy5fdmVyc2lvbj1uZXcgcS5zYXAuVmVyc2lvbihzYXAudWkudmVyc2lvbik7cmV0dXJuIHRoaXMuX3ZlcnNpb259LGdldENvbXBhdGliaWxpdHlWZXJzaW9uOmZ1bmN0aW9uKGYpe2lmKHR5cGVvZihmKT09PSJzdHJpbmciJiZ0aGlzLl9jb21wYXR2ZXJzaW9uW2ZdKXtyZXR1cm4gdGhpcy5fY29tcGF0dmVyc2lvbltmXX1yZXR1cm4gdGhpcy5fY29tcGF0dmVyc2lvbi5fZGVmYXVsdH0sZ2V0VGhlbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aGVtZX0sX3NldFRoZW1lOmZ1bmN0aW9uKHQpe3RoaXMudGhlbWU9dDtyZXR1cm4gdGhpc30sX25vcm1hbGl6ZVRoZW1lOmZ1bmN0aW9uKHQsVCl7aWYodCYmVD09bnVsbCYmdC5tYXRjaCgvXnNhcF9jb3JidSQvaSkpcmV0dXJuInNhcF9nb2xkcmVmbGVjdGlvbiI7cmV0dXJuIHR9LGdldExhbmd1YWdlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFuZ3VhZ2V9LHNldExhbmd1YWdlOmZ1bmN0aW9uKGwpe2QodHlwZW9mIGw9PT0ic3RyaW5nIiYmbCwic0xhbmd1YWdlIG11c3QgYmUgYSBCQ1A0NyBsYW5ndWFnZSB0YWcgb3IgSmF2YSBMb2NhbGUgaWQgb3IgbnVsbCIpO3ZhciBvPXRoaXMuZ2V0UlRMKCksbTtpZihsIT10aGlzLmxhbmd1YWdlKXttPXRoaXMuX2NvbGxlY3QoKTt0aGlzLmxhbmd1YWdlPW0ubGFuZ3VhZ2U9bDt0aGlzLmRlcml2ZWRSVEw9TC5faW1wbGllc1JUTChsKTtpZihvIT10aGlzLmdldFJUTCgpKXttLnJ0bD10aGlzLmdldFJUTCgpfXRoaXMuX2VuZENvbGxlY3QoKX1yZXR1cm4gdGhpc30sZ2V0TG9jYWxlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBMKHRoaXMubGFuZ3VhZ2UpfSxnZXRGb3JtYXRMb2NhbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mb3JtYXRMb2NhbGV8fHRoaXMubGFuZ3VhZ2V9LHNldEZvcm1hdExvY2FsZTpmdW5jdGlvbihmKXtkKGY9PT1udWxsfHx0eXBlb2YgZj09PSJzdHJpbmciJiZmLCJzRm9ybWF0TG9jYWxlIG11c3QgYmUgYSBCQ1A0NyBsYW5ndWFnZSB0YWcgb3IgSmF2YSBMb2NhbGUgaWQgb3IgbnVsbCIpO3ZhciBtO2lmKGYhPXRoaXMuZm9ybWF0TG9jYWxlKXttPXRoaXMuX2NvbGxlY3QoKTt0aGlzLmZvcm1hdExvY2FsZT1tLmZvcm1hdExvY2FsZT1mO3RoaXMuX2VuZENvbGxlY3QoKX1yZXR1cm4gdGhpc30sZ2V0TGFuZ3VhZ2VzRGVsaXZlcmVkV2l0aENvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sibGFuZ3VhZ2VzRGVsaXZlcmVkV2l0aENvcmUiXX0sZ2V0U3VwcG9ydGVkTGFuZ3VhZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbInh4LXN1cHBvcnRlZExhbmd1YWdlcyJdfSxnZXRBY2Nlc3NpYmlsaXR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWNjZXNzaWJpbGl0eX0sZ2V0QW5pbWF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYW5pbWF0aW9ufSxnZXRSVEw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ydGw9PT1udWxsP3RoaXMuZGVyaXZlZFJUTDp0aGlzLnJ0bH0sc2V0UlRMOmZ1bmN0aW9uKHIpe2Qocj09PW51bGx8fHR5cGVvZiByPT09ImJvb2xlYW4iLCJiUlRMIG11c3QgYmUgbnVsbCBvciBhIGJvb2xlYW4iKTt2YXIgbTtpZihyIT10aGlzLnJ0bCl7bT10aGlzLl9jb2xsZWN0KCk7dGhpcy5ydGw9bS5ydGw9dGhpcy5nZXRSVEwoKTt0aGlzLl9lbmRDb2xsZWN0KCl9cmV0dXJuIHRoaXN9LGdldERlYnVnOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVidWd9LGdldEluc3BlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnNwZWN0fSxnZXRPcmlnaW5JbmZvOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luSW5mb30sZ2V0Tm9EdXBsaWNhdGVJZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub0R1cGxpY2F0ZUlkc30sZ2V0VHJhY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFjZX0sZ2V0VUlEUHJlZml4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWlkUHJlZml4fSxnZXREZXNpZ25Nb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbInh4LWRlc2lnbk1vZGUiXX0sZ2V0U3VwcHJlc3NEZWFjdGl2YXRpb25PZkNvbnRyb2xsZXJDb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbInh4LXN1cHByZXNzRGVhY3RpdmF0aW9uT2ZDb250cm9sbGVyQ29kZSJdfSxnZXRXZWlucmVTZXJ2ZXI6ZnVuY3Rpb24oKXt2YXIgdz10aGlzLndlaW5yZVNlcnZlcjtpZighdyl7dz13aW5kb3cubG9jYXRpb24ucHJvdG9jb2wrIi8vIit3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUrIjoiO3crPShwYXJzZUludCh3aW5kb3cubG9jYXRpb24ucG9ydCwxMCl8fDgwODApKzF9cmV0dXJuIHd9LGdldFdlaW5yZUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2VpbnJlSWR9LGdldEFwcGxpY2F0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXBwbGljYXRpb259LGdldFJvb3RDb21wb25lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290Q29tcG9uZW50fSxnZXRBcHBDYWNoZUJ1c3RlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFwcENhY2hlQnVzdGVyfSxnZXRBcHBDYWNoZUJ1c3Rlck1vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sieHgtYXBwQ2FjaGVCdXN0ZXJNb2RlIl19LGdldERpc2FibGVDdXN0b21pemluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzWyJ4eC1kaXNhYmxlQ3VzdG9taXppbmciXX0sZ2V0UHJlbG9hZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZWxvYWR9LGdldENvbXBvbmVudFByZWxvYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sneHgtY29tcG9uZW50UHJlbG9hZCddfHx0aGlzLnByZWxvYWR9LGdldEZvcm1hdFNldHRpbmdzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0Zvcm1hdFNldHRpbmdzfSxfY29sbGVjdDpmdW5jdGlvbigpe3ZhciBtPXRoaXMubUNoYW5nZXN8fCh0aGlzLm1DaGFuZ2VzPXtfX2NvdW50OjB9KTttLl9fY291bnQrKztyZXR1cm4gbX0sX2VuZENvbGxlY3Q6ZnVuY3Rpb24oKXt2YXIgbT10aGlzLm1DaGFuZ2VzO2lmKG0mJigtLW0uX19jb3VudCk9PT0wKXtkZWxldGUgbS5fX2NvdW50O3RoaXMuX29Db3JlJiZ0aGlzLl9vQ29yZS5maXJlTG9jYWxpemF0aW9uQ2hhbmdlZChtKTtkZWxldGUgdGhpcy5tQ2hhbmdlc319LGdldFN0YXRpc3RpY3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0aXN0aWNzfHx3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInNhcC11aS1zdGF0aXN0aWNzIik9PSJYIn0sZ2V0Tm9OYXRpdmVTY3JvbGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sieHgtbm9OYXRpdmVTY3JvbGwiXX19KTt2YXIgTT17IlpIIjoiemgtSGFucyIsIlpGIjoiemgtSGFudCIsIjFRIjoiZW4tVVMteC1zYXB0cmMiLCIyUSI6ImVuLVVTLXgtc2FwcHNkIn07dmFyIGE9eyIiOntwYXR0ZXJuOm51bGx9LCIxIjp7cGF0dGVybjoiZGQuTU0ueXl5eSJ9LCIyIjp7cGF0dGVybjoiTU0vZGQveXl5eSJ9LCIzIjp7cGF0dGVybjoiTU0tZGQteXl5eSJ9LCI0Ijp7cGF0dGVybjoieXl5eS5NTS5kZCJ9LCI1Ijp7cGF0dGVybjoieXl5eS9NTS9kZCJ9LCI2Ijp7cGF0dGVybjoieXl5eS1NTS1kZCJ9LCI3Ijp7cGF0dGVybjoiR3l5Lk1NLmRkIixpZ25vcmU6dHJ1ZX0sIjgiOntwYXR0ZXJuOiJHeXkvTU0vZGQiLGlnbm9yZTp0cnVlfSwiOSI6e3BhdHRlcm46Ikd5eS1NTS1kZCIsaWdub3JlOnRydWV9LCJBIjp7cGF0dGVybjoieXl5eS9NTS9kZCIsaWdub3JlOnRydWV9LCJCIjp7cGF0dGVybjoieXl5eS9NTS9kZCIsaWdub3JlOnRydWV9LCJDIjp7cGF0dGVybjoieXl5eS9NTS9kZCIsaWdub3JlOnRydWV9fTt2YXIgYj17IiI6eyJzaG9ydCI6bnVsbCxtZWRpdW06bnVsbCxkYXlQZXJpb2RzOm51bGx9LCIwIjp7InNob3J0IjoiSEg6bW0iLG1lZGl1bToiSEg6bW06c3MiLGRheVBlcmlvZHM6bnVsbH0sIjEiOnsic2hvcnQiOiJoaDptbSBhIixtZWRpdW06ImhoOm1tOnNzIGEiLGRheVBlcmlvZHM6WyJBTSIsIlBNIl19LCIyIjp7InNob3J0IjoiaGg6bW0gYSIsbWVkaXVtOiJoaDptbTpzcyBhIixkYXlQZXJpb2RzOlsiYW0iLCJwbSJdfSwiMyI6eyJzaG9ydCI6IktLOm1tIGEiLG1lZGl1bToiS0s6bW06c3MgYSIsZGF5UGVyaW9kczpbIkFNIiwiUE0iXX0sIjQiOnsic2hvcnQiOiJLSzptbSBhIixtZWRpdW06IktLOm1tOnNzIGEiLGRheVBlcmlvZHM6WyJhbSIsInBtIl19fTt2YXIgYz17IiI6e2dyb3VwaW5nU2VwYXJhdG9yOm51bGwsZGVjaW1hbFNlcGFyYXRvcjpudWxsfSwiICI6e2dyb3VwaW5nU2VwYXJhdG9yOiIuIixkZWNpbWFsU2VwYXJhdG9yOiIsIn0sIlgiOntncm91cGluZ1NlcGFyYXRvcjoiLCIsZGVjaW1hbFNlcGFyYXRvcjoiLiJ9LCJZIjp7Z3JvdXBpbmdTZXBhcmF0b3I6IiAiLGRlY2ltYWxTZXBhcmF0b3I6IiwifX07ZnVuY3Rpb24gZChlLG0pe2lmKCFlKXt0aHJvdyBuZXcgRXJyb3IobSl9fUIuZXh0ZW5kKCJzYXAudWkuY29yZS5Db25maWd1cmF0aW9uLkZvcm1hdFNldHRpbmdzIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obyl7dGhpcy5vQ29uZmlndXJhdGlvbj1vO3RoaXMubVNldHRpbmdzPXt9O3RoaXMuc0xlZ2FjeURhdGVGb3JtYXQ9dW5kZWZpbmVkO3RoaXMuc0xlZ2FjeVRpbWVGb3JtYXQ9dW5kZWZpbmVkO3RoaXMuc0xlZ2FjeU51bWJlckZvcm1hdFN5bWJvbFNldD11bmRlZmluZWR9LGdldEZvcm1hdExvY2FsZTpmdW5jdGlvbigpe2Z1bmN0aW9uIGYodCl7dmFyIGw9dC5vQ29uZmlndXJhdGlvbi5sYW5ndWFnZTtpZighcS5pc0VtcHR5T2JqZWN0KHQubVNldHRpbmdzKSl7aWYobC5pbmRleE9mKCIteC0iKTwwKXtsPWwrIi14LXNhcHVmbXQifWVsc2UgaWYobC5pbmRleE9mKCItc2FwdWZtdCIpPD1sLmluZGV4T2YoIi14LSIpKXtsPWwrIi1zYXB1Zm10In19cmV0dXJuIGx9cmV0dXJuIG5ldyBMKHRoaXMub0NvbmZpZ3VyYXRpb24uZm9ybWF0TG9jYWxlfHxmKHRoaXMpKX0sX3NldDpmdW5jdGlvbihrLHYpe3ZhciBvPXRoaXMubVNldHRpbmdzW2tdO2lmKHYhPW51bGwpe3RoaXMubVNldHRpbmdzW2tdPXZ9ZWxzZXtkZWxldGUgdGhpcy5tU2V0dGluZ3Nba119aWYoKG89PW51bGwhPXY9PW51bGwpfHwhcS5zYXAuZXF1YWwobyx2KSl7dmFyIG09dGhpcy5vQ29uZmlndXJhdGlvbi5fY29sbGVjdCgpO21ba109djt0aGlzLm9Db25maWd1cmF0aW9uLl9lbmRDb2xsZWN0KCl9fSxnZXREYXRlUGF0dGVybjpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5tU2V0dGluZ3NbImRhdGVGb3JtYXQtIitzXX0sc2V0RGF0ZVBhdHRlcm46ZnVuY3Rpb24ocyxwKXtkKHM9PSJzaG9ydCJ8fHM9PSJtZWRpdW0ifHxzPT0ibG9uZyJ8fHM9PSJmdWxsIiwic1N0eWxlIG11c3QgYmUgc2hvcnQsIG1lZGl1bSwgbG9uZyBvciBmdWxsIik7dGhpcy5fc2V0KCJkYXRlRm9ybWF0LSIrcyxwKTtyZXR1cm4gdGhpc30sZ2V0VGltZVBhdHRlcm46ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMubVNldHRpbmdzWyJ0aW1lRm9ybWF0LSIrc119LHNldFRpbWVQYXR0ZXJuOmZ1bmN0aW9uKHMscCl7ZChzPT0ic2hvcnQifHxzPT0ibWVkaXVtInx8cz09ImxvbmcifHxzPT0iZnVsbCIsInNTdHlsZSBtdXN0IGJlIHNob3J0LCBtZWRpdW0sIGxvbmcgb3IgZnVsbCIpO3RoaXMuX3NldCgidGltZUZvcm1hdC0iK3MscCk7cmV0dXJuIHRoaXN9LGdldE51bWJlclN5bWJvbDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tU2V0dGluZ3NbInN5bWJvbHMtbGF0bi0iK3RdfSxzZXROdW1iZXJTeW1ib2w6ZnVuY3Rpb24odCxzKXtkKHQ9PSJkZWNpbWFsInx8dD09Imdyb3VwInx8dD09InBsdXNTaWduInx8dD09Im1pbnVzU2lnbiIsInNUeXBlIG11c3QgYmUgZGVjaW1hbCwgZ3JvdXAsIHBsdXNTaWduIG9yIG1pbnVzU2lnbiIpO3RoaXMuX3NldCgic3ltYm9scy1sYXRuLSIrdCxzKTtyZXR1cm4gdGhpc30sX3NldERheVBlcmlvZHM6ZnVuY3Rpb24odyx0KXt0aGlzLl9zZXQoImRheVBlcmlvZHMtZm9ybWF0LSIrdyx0KTtyZXR1cm4gdGhpc30sZ2V0TGVnYWN5RGF0ZUZvcm1hdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNMZWdhY3lEYXRlRm9ybWF0fHx1bmRlZmluZWR9LHNldExlZ2FjeURhdGVGb3JtYXQ6ZnVuY3Rpb24oZil7Zj1mP1N0cmluZyhmKS50b1VwcGVyQ2FzZSgpOiIiO2QoIWZ8fGEuaGFzT3duUHJvcGVydHkoZiksInNGb3JtYXRJZCBtdXN0IGJlIG9uZSBvZiBbJzEnLCcyJywnMycsJzQnLCc1JywnNicsJzcnLCc4JywnOScsJ0EnLCdCJywnQyddIG9yIGVtcHR5Iik7aWYoYVtmXS5pZ25vcmUpe3Euc2FwLmxvZy53YXJuaW5nKCJUaGUgQUJBUCBkYXRlIGZvcm1hdCAnIitmKyInICgiK2FbZl0ucGF0dGVybisiKSBpcyBub3Qgc3VwcG9ydGVkIHlldC4gRmFsbGluZyBiYWNrIHRvIGxvY2FsZSBzcGVjaWZpYyBkYXRlIGZvcm1hdHMuIik7Zj0iIn12YXIgbT10aGlzLm9Db25maWd1cmF0aW9uLl9jb2xsZWN0KCk7dGhpcy5zTGVnYWN5RGF0ZUZvcm1hdD1tLmxlZ2FjeURhdGVGb3JtYXQ9Zjt0aGlzLnNldERhdGVQYXR0ZXJuKCJzaG9ydCIsYVtmXS5wYXR0ZXJuKTt0aGlzLnNldERhdGVQYXR0ZXJuKCJtZWRpdW0iLGFbZl0ucGF0dGVybik7dGhpcy5vQ29uZmlndXJhdGlvbi5fZW5kQ29sbGVjdCgpO3JldHVybiB0aGlzfSxnZXRMZWdhY3lUaW1lRm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0xlZ2FjeVRpbWVGb3JtYXR8fHVuZGVmaW5lZH0sc2V0TGVnYWN5VGltZUZvcm1hdDpmdW5jdGlvbihmKXtkKCFmfHxiLmhhc093blByb3BlcnR5KGYpLCJzRm9ybWF0SWQgbXVzdCBiZSBvbmUgb2YgWycwJywnMScsJzInLCczJywnNCddIG9yIGVtcHR5Iik7dmFyIG09dGhpcy5vQ29uZmlndXJhdGlvbi5fY29sbGVjdCgpO3RoaXMuc0xlZ2FjeVRpbWVGb3JtYXQ9bS5sZWdhY3lUaW1lRm9ybWF0PWY9Znx8IiI7dGhpcy5zZXRUaW1lUGF0dGVybigic2hvcnQiLGJbZl1bInNob3J0Il0pO3RoaXMuc2V0VGltZVBhdHRlcm4oIm1lZGl1bSIsYltmXVsibWVkaXVtIl0pO3RoaXMuX3NldERheVBlcmlvZHMoImFiYnJldmlhdGVkIixiW2ZdLmRheVBlcmlvZHMpO3RoaXMub0NvbmZpZ3VyYXRpb24uX2VuZENvbGxlY3QoKTtyZXR1cm4gdGhpc30sZ2V0TGVnYWN5TnVtYmVyRm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0xlZ2FjeU51bWJlckZvcm1hdHx8dW5kZWZpbmVkfSxzZXRMZWdhY3lOdW1iZXJGb3JtYXQ6ZnVuY3Rpb24oZil7Zj1mP2YudG9VcHBlckNhc2UoKToiIjtkKCFmfHxjLmhhc093blByb3BlcnR5KGYpLCJzRm9ybWF0SWQgbXVzdCBiZSBvbmUgb2YgWycgJywnWCcsJ1knXSBvciBlbXB0eSIpO3ZhciBtPXRoaXMub0NvbmZpZ3VyYXRpb24uX2NvbGxlY3QoKTt0aGlzLnNMZWdhY3lOdW1iZXJGb3JtYXQ9bS5sZWdhY3lOdW1iZXJGb3JtYXQ9Zjt0aGlzLnNldE51bWJlclN5bWJvbCgiZ3JvdXAiLGNbZl0uZ3JvdXBpbmdTZXBhcmF0b3IpO3RoaXMuc2V0TnVtYmVyU3ltYm9sKCJkZWNpbWFsIixjW2ZdLmRlY2ltYWxTZXBhcmF0b3IpO3RoaXMub0NvbmZpZ3VyYXRpb24uX2VuZENvbGxlY3QoKX0sZ2V0Q3VzdG9tTG9jYWxlRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1TZXR0aW5nc319KTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkVsZW1lbnRNZXRhZGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkVsZW1lbnRNZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0VsZW1lbnRNZXRhZGF0YSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3RNZXRhZGF0YSddLGZ1bmN0aW9uKHEsTSl7InVzZSBzdHJpY3QiO3ZhciBFPWZ1bmN0aW9uKGMsQyl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O0UucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChNLnByb3RvdHlwZSk7RS51aWQ9TS51aWQ7RS5wcm90b3R5cGUuZ2V0RWxlbWVudE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc0NsYXNzTmFtZX07RS5wcm90b3R5cGUuZ2V0UmVuZGVyZXJOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NSZW5kZXJlck5hbWV9O0UucHJvdG90eXBlLmdldFJlbmRlcmVyPWZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5nZXRSZW5kZXJlck5hbWUoKTtpZighcil7cmV0dXJufXZhciBSPXEuc2FwLmdldE9iamVjdChyKTtpZihSKXtyZXR1cm4gUn1xLnNhcC5yZXF1aXJlKHIpO3JldHVybiBxLnNhcC5nZXRPYmplY3Qocil9O0UucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oYyl7dmFyIHM9Yy5tZXRhZGF0YTt0aGlzLl9zVmlzaWJpbGl0eT1zWyJ2aXNpYmlsaXR5Il18fCJwdWJsaWMiO3ZhciByPWMuaGFzT3duUHJvcGVydHkoInJlbmRlcmVyIik/KGMucmVuZGVyZXJ8fCIiKTp1bmRlZmluZWQ7ZGVsZXRlIGMucmVuZGVyZXI7TS5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncy5jYWxsKHRoaXMsYyk7dGhpcy5fc1JlbmRlcmVyTmFtZT10aGlzLmdldE5hbWUoKSsiUmVuZGVyZXIiO2lmKHR5cGVvZiByIT09InVuZGVmaW5lZCIpe2lmKHR5cGVvZiByPT09InN0cmluZyIpe3RoaXMuX3NSZW5kZXJlck5hbWU9cnx8dW5kZWZpbmVkO3JldHVybn1pZih0eXBlb2Ygcj09PSJmdW5jdGlvbiIpe3I9e3JlbmRlcjpyfX12YXIgcD10aGlzLmdldFBhcmVudCgpO3ZhciBiO2lmKHAmJnAgaW5zdGFuY2VvZiBFKXtiPXAuZ2V0UmVuZGVyZXIoKX1pZighYil7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuUmVuZGVyZXIiKTtiPXNhcC51aS5jb3JlLlJlbmRlcmVyfXZhciBSPXEuc2FwLm5ld09iamVjdChiKTtxLmV4dGVuZChSLHIpO3Euc2FwLnNldE9iamVjdCh0aGlzLmdldFJlbmRlcmVyTmFtZSgpLFIpfX07RS5wcm90b3R5cGUuYWZ0ZXJBcHBseVNldHRpbmdzPWZ1bmN0aW9uKCl7TS5wcm90b3R5cGUuYWZ0ZXJBcHBseVNldHRpbmdzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnJlZ2lzdGVyJiZ0aGlzLnJlZ2lzdGVyKHRoaXMpfTtFLnByb3RvdHlwZS5pc0hpZGRlbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zVmlzaWJpbGl0eT09PSJoaWRkZW4ifTtyZXR1cm4gRX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkV2ZW50QnVzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuRXZlbnRCdXMnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9FdmVudEJ1cyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1zYXAudWkuYmFzZS5PYmplY3QuZXh0ZW5kKCJzYXAudWkuY29yZS5FdmVudEJ1cyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7c2FwLnVpLmJhc2UuT2JqZWN0LmFwcGx5KHRoaXMpO3RoaXMuX21DaGFubmVscz17fTt0aGlzLl9kZWZhdWx0Q2hhbm5lbD1uZXcgRSgpfX0pO2EucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbihjLGUsZixsKXtpZih0eXBlb2YoZSk9PT0iZnVuY3Rpb24iKXtsPWY7Zj1lO2U9YztjPW51bGx9dmFyIEM9Yih0aGlzLGMpO0MuYXR0YWNoRXZlbnQoZSxmLGwpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbihjLGUsZixsKXtpZih0eXBlb2YoZSk9PT0iZnVuY3Rpb24iKXtsPWY7Zj1lO2U9YztjPW51bGx9dmFyIEM9Zyh0aGlzLGMpO2lmKCFDKXtyZXR1cm4gdGhpc31DLmRldGFjaEV2ZW50KGUsZixsKTtpZihDIT10aGlzLl9kZWZhdWx0Q2hhbm5lbCl7dmFyIG09RS5nZXRFdmVudExpc3QoQyk7dmFyIGk9dHJ1ZTtmb3IodmFyIEkgaW4gbSl7aWYoQy5oYXNMaXN0ZW5lcnMoSSkpe2k9ZmFsc2U7YnJlYWt9fWlmKGkpe2RlbGV0ZSB0aGlzLl9tQ2hhbm5lbHNbY119fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5wdWJsaXNoPWZ1bmN0aW9uKGMsZSxkKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXtkPW51bGw7ZT1jO2M9bnVsbH1lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PTIpe2lmKHR5cGVvZihlKSE9InN0cmluZyIpe2Q9ZTtlPWM7Yz1udWxsfX1kPWQ/ZDp7fTt2YXIgQz1nKHRoaXMsYyk7aWYoIUMpe3JldHVybn12YXIgZj1FLmdldEV2ZW50TGlzdChDKVtlXTtpZihmJiZxLmlzQXJyYXkoZikpe2Y9Zi5zbGljZSgpO3ZhciBJO2Zvcih2YXIgaT0wLGw9Zi5sZW5ndGg7aTxsO2krKyl7ST1mW2ldO0kuZkZ1bmN0aW9uLmNhbGwoSS5vTGlzdGVuZXJ8fHRoaXMsYyxlLGQpfX19O2EucHJvdG90eXBlLmdldEludGVyZmFjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5fZGVmYXVsdENoYW5uZWwuZGVzdHJveSgpO2Zvcih2YXIgYyBpbiB0aGlzLl9tQ2hhbm5lbHMpe3RoaXMuX21DaGFubmVsc1tjXS5kZXN0cm95KCl9dGhpcy5fbUNoYW5uZWxzPXt9O3NhcC51aS5iYXNlLk9iamVjdC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIGcoZSxjKXtpZighYyl7cmV0dXJuIGUuX2RlZmF1bHRDaGFubmVsfXJldHVybiBlLl9tQ2hhbm5lbHNbY119O2Z1bmN0aW9uIGIoZSxjKXt2YXIgQz1nKGUsYyk7aWYoIUMmJmMpe2UuX21DaGFubmVsc1tjXT1uZXcgRSgpO0M9ZS5fbUNoYW5uZWxzW2NdfXJldHVybiBDfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkZvY3VzSGFuZGxlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkZvY3VzSGFuZGxlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ZvY3VzSGFuZGxlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9EZXZpY2UnLCdzYXAvdWkvR2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0JywnanF1ZXJ5LnNhcC5zY3JpcHQnXSxmdW5jdGlvbihxLEQsRyxCKXsidXNlIHN0cmljdCI7dmFyIEY9Qi5leHRlbmQoInNhcC51aS5jb3JlLkZvY3VzSGFuZGxlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHIsYyl7Qi5hcHBseSh0aGlzKTt0aGlzLm9Db3JlPWM7dGhpcy5vQ3VycmVudD1udWxsO3RoaXMub0xhc3Q9bnVsbDt0aGlzLmFFdmVudFF1ZXVlPVtdO3RoaXMuZkV2ZW50SGFuZGxlcj1xLnByb3h5KHRoaXMub25FdmVudCx0aGlzKTt0aGlzLmZEZXN0cm95SGFuZGxlcj1xLnByb3h5KHRoaXMuZGVzdHJveSx0aGlzKTtpZihyLmFkZEV2ZW50TGlzdGVuZXImJiEhIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7ci5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpO3IuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpfWVsc2V7cShyKS5iaW5kKCJhY3RpdmF0ZSIsdGhpcy5mRXZlbnRIYW5kbGVyKTtxKHIpLmJpbmQoImRlYWN0aXZhdGUiLHRoaXMuZkV2ZW50SGFuZGxlcil9cS5zYXAubG9nLmRlYnVnKCJGb2N1c0hhbmRsZXIgc2V0dXAgb24gUm9vdCAiK3IudHlwZSsoci5pZD8iOiAiK3IuaWQ6IiIpLG51bGwsInNhcC51aS5jb3JlLkZvY3VzSGFuZGxlciIpO3Eod2luZG93KS5iaW5kKCJ1bmxvYWQiLHsib1Jvb3RSZWYiOnJ9LHRoaXMuZkRlc3Ryb3lIYW5kbGVyKX19KTtGLnByb3RvdHlwZS5nZXRDdXJyZW50Rm9jdXNlZENvbnRyb2xJZD1mdW5jdGlvbigpe3ZhciBjPW51bGw7dHJ5e3ZhciBhPXEoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7aWYoYS5pcygiOmZvY3VzIil8fChELmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJkQuYnJvd3Nlci52ZXJzaW9uPT04JiZkb2N1bWVudC5oYXNGb2N1cygpKSl7Yz1hLmNvbnRyb2woKX19Y2F0Y2goZSl7fXJldHVybiBjJiZjLmxlbmd0aD4wP2NbMF0uZ2V0SWQoKTpudWxsfTtGLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGUpe3ZhciByPWUuZGF0YS5vUm9vdFJlZjtpZihyKXtpZihyLnJlbW92ZUV2ZW50TGlzdGVuZXImJiEhIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7ci5yZW1vdmVFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpO3IucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpfWVsc2V7cShyKS51bmJpbmQoImFjdGl2YXRlIix0aGlzLmZFdmVudEhhbmRsZXIpO3EocikudW5iaW5kKCJkZWFjdGl2YXRlIix0aGlzLmZFdmVudEhhbmRsZXIpfX1xKHdpbmRvdykudW5iaW5kKCJ1bmxvYWQiLHRoaXMuZkRlc3Ryb3lIYW5kbGVyKTt0aGlzLm9Db3JlPW51bGx9O0YucHJvdG90eXBlLm9uRXZlbnQ9ZnVuY3Rpb24oYil7dmFyIGU9cS5ldmVudC5maXgoYik7cS5zYXAubG9nLmRlYnVnKCJFdmVudCAiK2UudHlwZSsiIHJlYWNoZWQgRm9jdXMgSGFuZGxlciAodGFyZ2V0OiAiK2UudGFyZ2V0KyhlLnRhcmdldD9lLnRhcmdldC5pZDoiIikrIikiLG51bGwsInNhcC51aS5jb3JlLkZvY3VzSGFuZGxlciIpO3ZhciBhPShlLnR5cGU9PSJmb2N1cyJ8fGUudHlwZT09ImZvY3VzaW4ifHxlLnR5cGU9PSJhY3RpdmF0ZSIpPyJmb2N1cyI6ImJsdXIiO3RoaXMuYUV2ZW50UXVldWUucHVzaCh7dHlwZTphLGNvbnRyb2xJZDpnKGUudGFyZ2V0KX0pO2lmKHRoaXMuYUV2ZW50UXVldWUubGVuZ3RoPT0xKXt0aGlzLnByb2Nlc3NFdmVudCgpfX07Ri5wcm90b3R5cGUucHJvY2Vzc0V2ZW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5hRXZlbnRRdWV1ZVswXTtpZighZSl7cmV0dXJufXRyeXtpZihlLnR5cGU9PSJmb2N1cyIpe3RoaXMub25mb2N1c0V2ZW50KGUuY29udHJvbElkKX1lbHNlIGlmKGUudHlwZT09ImJsdXIiKXt0aGlzLm9uYmx1ckV2ZW50KGUuY29udHJvbElkKX19ZmluYWxseXt0aGlzLmFFdmVudFF1ZXVlLnNoaWZ0KCk7aWYodGhpcy5hRXZlbnRRdWV1ZS5sZW5ndGg+MCl7dGhpcy5wcm9jZXNzRXZlbnQoKX19fTtGLnByb3RvdHlwZS5vbmZvY3VzRXZlbnQ9ZnVuY3Rpb24oYyl7dGhpcy5vQ3VycmVudD1jO2lmKCF0aGlzLm9MYXN0KXtyZXR1cm59dCh0aGlzLm9MYXN0LGMsdGhpcy5vQ29yZSk7dGhpcy5vTGFzdD1udWxsfTtGLnByb3RvdHlwZS5vbmJsdXJFdmVudD1mdW5jdGlvbihjKXtpZighdGhpcy5vQ3VycmVudCl7cmV0dXJufXRoaXMub0xhc3Q9Yzt0aGlzLm9DdXJyZW50PW51bGw7cS5zYXAuZGVsYXllZENhbGwoMCx0aGlzLCJjaGVja0Zvckxvc3RGb2N1cyIpfTtGLnByb3RvdHlwZS5jaGVja0Zvckxvc3RGb2N1cz1mdW5jdGlvbigpe2lmKHRoaXMub0N1cnJlbnQ9PW51bGwmJnRoaXMub0xhc3QhPW51bGwpe3QodGhpcy5vTGFzdCxudWxsLHRoaXMub0NvcmUpfXRoaXMub0xhc3Q9bnVsbH07dmFyIGc9ZnVuY3Rpb24oZCl7dmFyIGk9cShkKS5jbG9zZXN0KCJbZGF0YS1zYXAtdWldIikuYXR0cigiaWQiKTtpZihpKXtyZXR1cm4gaX1yZXR1cm4gbnVsbH07dmFyIHQ9ZnVuY3Rpb24oYyxyLEMpe3ZhciBvPWM/c2FwLnVpLmdldENvcmUoKS5ieUlkKGMpOm51bGw7aWYobyl7dmFyIFI9cj9zYXAudWkuZ2V0Q29yZSgpLmJ5SWQocik6bnVsbDt2YXIgZT1xLkV2ZW50KCJzYXBmb2N1c2xlYXZlIik7ZS50YXJnZXQ9by5nZXREb21SZWYoKTtlLnJlbGF0ZWRDb250cm9sSWQ9Uj9SLmdldElkKCk6bnVsbDtlLnJlbGF0ZWRDb250cm9sRm9jdXNJbmZvPVI/Ui5nZXRGb2N1c0luZm8oKTpudWxsO3ZhciBhPW8uZ2V0VUlBcmVhKCk7dmFyIHU9bnVsbDtpZihhKXt1PUMuZ2V0VUlBcmVhKGEuZ2V0SWQoKSl9ZWxzZXt2YXIgcD1zYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKTtpZihxLnNhcC5jb250YWluc09yRXF1YWxzKHAsZS50YXJnZXQpKXt1PUMuZ2V0VUlBcmVhKHAuaWQpfX1pZih1KXt1Ll9oYW5kbGVFdmVudChlKX19fTtyZXR1cm4gRn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkludGVydmFsVHJpZ2dlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkludGVydmFsVHJpZ2dlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ludGVydmFsVHJpZ2dlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRXZlbnRCdXMnXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgXz0ic2FwVWlJbnRlcnZhbFRyaWdnZXItZXZlbnQiO3ZhciBJPXNhcC51aS5iYXNlLk9iamVjdC5leHRlbmQoInNhcC51aS5jb3JlLkludGVydmFsVHJpZ2dlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGkpe3NhcC51aS5iYXNlLk9iamVjdC5hcHBseSh0aGlzKTt0aGlzLl9vRXZlbnRCdXM9bmV3IEUoKTt0aGlzLl9kZWxheWVkQ2FsbElkPW51bGw7dGhpcy5fdHJpZ2dlclByb3h5PXEucHJveHkodCx0aGlzKTt0aGlzLl9pSW50ZXJ2YWw9MDtpZihpKXt0aGlzLnNldEludGVydmFsKGkpfX19KTt2YXIgdD1mdW5jdGlvbigpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fZGVsYXllZENhbGxJZCk7dmFyIGg9dGhpcy5fb0V2ZW50QnVzLl9kZWZhdWx0Q2hhbm5lbC5oYXNMaXN0ZW5lcnMoXyk7aWYodGhpcy5faUludGVydmFsPjAmJmgpe3RoaXMuX29FdmVudEJ1cy5wdWJsaXNoKF8pO3RoaXMuX2RlbGF5ZWRDYWxsSWQ9cS5zYXAuZGVsYXllZENhbGwodGhpcy5faUludGVydmFsLHRoaXMsdGhpcy5fdHJpZ2dlclByb3h5KX19O0kucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtzYXAudWkuYmFzZS5PYmplY3QucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO2RlbGV0ZSB0aGlzLl90cmlnZ2VyUHJveHk7dGhpcy5fb0V2ZW50QnVzLmRlc3Ryb3koKTtkZWxldGUgdGhpcy5fb0V2ZW50QnVzfTtJLnByb3RvdHlwZS5zZXRJbnRlcnZhbD1mdW5jdGlvbihpKXtpZih0aGlzLl9pSW50ZXJ2YWwhPT1pKXt0aGlzLl9pSW50ZXJ2YWw9aTt0aGlzLl90cmlnZ2VyUHJveHkoKX19O0kucHJvdG90eXBlLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGYsbCl7dGhpcy5fb0V2ZW50QnVzLnN1YnNjcmliZShfLGYsbCk7dGhpcy5fdHJpZ2dlclByb3h5KCl9O0kucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGYsbCl7dGhpcy5fb0V2ZW50QnVzLnVuc3Vic2NyaWJlKF8sZixsKX07SS5wcm90b3R5cGUuZ2V0SW50ZXJmYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3JldHVybiBJfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuTG9jYWxlRGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkxvY2FsZURhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Mb2NhbGVEYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0JywnLi9Db25maWd1cmF0aW9uJywnLi9Mb2NhbGUnXSxmdW5jdGlvbihxLEIsQyxMKXsidXNlIHN0cmljdCI7dmFyIGE9Qi5leHRlbmQoInNhcC51aS5jb3JlLkxvY2FsZURhdGEiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihvKXtCLmFwcGx5KHRoaXMpO3RoaXMubURhdGE9ZyhvKX0sX2dldDpmdW5jdGlvbihrKXtyZXR1cm4gdGhpcy5tRGF0YVtrXX0sZ2V0T3JpZW50YXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJvcmllbnRhdGlvbiIpfSxnZXRMYW5ndWFnZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJsYW5ndWFnZXMiKX0sZ2V0U2NyaXB0czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoInNjcmlwdHMiKX0sZ2V0VGVycml0b3JpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJ0ZXJyaXRvcmllcyIpfSxnZXRNb250aHM6ZnVuY3Rpb24odyl7cmV0dXJuIHRoaXMuX2dldCgibW9udGhzLWZvcm1hdC0iK3cpfSxnZXRNb250aHNTdGFuZEFsb25lOmZ1bmN0aW9uKHcpe3JldHVybiB0aGlzLl9nZXQoIm1vbnRocy1zdGFuZEFsb25lLSIrdyl9LGdldERheXM6ZnVuY3Rpb24odyl7cmV0dXJuIHRoaXMuX2dldCgiZGF5cy1mb3JtYXQtIit3KX0sZ2V0RGF5c1N0YW5kQWxvbmU6ZnVuY3Rpb24odyl7cmV0dXJuIHRoaXMuX2dldCgiZGF5cy1zdGFuZEFsb25lLSIrdyl9LGdldFF1YXJ0ZXJzOmZ1bmN0aW9uKHcpe3JldHVybiB0aGlzLl9nZXQoInF1YXJ0ZXJzLWZvcm1hdC0iK3cpfSxnZXREYXlQZXJpb2RzOmZ1bmN0aW9uKHcpe3JldHVybiB0aGlzLl9nZXQoImRheVBlcmlvZHMtZm9ybWF0LSIrdyl9LGdldERhdGVQYXR0ZXJuOmZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLl9nZXQoImRhdGVGb3JtYXQtIitzKX0sZ2V0VGltZVBhdHRlcm46ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuX2dldCgidGltZUZvcm1hdC0iK3MpfSxnZXREYXRlVGltZVBhdHRlcm46ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuX2dldCgiZGF0ZVRpbWVGb3JtYXQtIitzKX0sZ2V0TnVtYmVyU3ltYm9sOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9nZXQoInN5bWJvbHMtbGF0bi0iK3QpfSxnZXREZWNpbWFsUGF0dGVybjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoImRlY2ltYWxGb3JtYXQiKS5zdGFuZGFyZH0sZ2V0Q3VycmVuY3lQYXR0ZXJuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldCgiY3VycmVuY3lGb3JtYXQiKS5zdGFuZGFyZH0sZ2V0UGVyY2VudFBhdHRlcm46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJwZXJjZW50Rm9ybWF0Iikuc3RhbmRhcmR9LGdldEZpcnN0RGF5T2ZXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldCgid2Vla0RhdGEtZmlyc3REYXkiKX0sZ2V0V2Vla2VuZFN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldCgid2Vla0RhdGEtd2Vla2VuZFN0YXJ0Iil9LGdldFdlZWtlbmRFbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJ3ZWVrRGF0YS13ZWVrZW5kRW5kIil9LGdldEludGVydmFsUGF0dGVybjpmdW5jdGlvbihpKXtyZXR1cm4oaSYmdGhpcy5fZ2V0KCJpbnRlcnZhbEZvcm1hdC0iK2kpKXx8dGhpcy5fZ2V0KCJpbnRlcnZhbEZvcm1hdEZhbGxiYWNrIil9LGdldEN1cnJlbmN5RGlnaXRzOmZ1bmN0aW9uKHMpe3ZhciBvPXRoaXMuX2dldCgiY3VycmVuY3lEaWdpdHMiKTt2YXIgZD0yO2lmKG8pe2lmKG9bc10hPXVuZGVmaW5lZCl7ZD1vW3NdfWVsc2V7ZD1vWyJERUZBVUxUIl19fXJldHVybiBkfSxnZXRDdXJyZW5jeVN5bWJvbDpmdW5jdGlvbihzKXt2YXIgbz10aGlzLl9nZXQoImN1cnJlbmN5U3ltYm9scyIpO3JldHVybihvJiZvW3NdKXx8c319KTt2YXIgTT17Im9yaWVudGF0aW9uIjoibGVmdC10by1yaWdodCIsImxhbmd1YWdlcyI6e30sInNjcmlwdHMiOnt9LCJ0ZXJyaXRvcmllcyI6e30sImRhdGVGb3JtYXQtZnVsbCI6IkVFRUUsIE1NTU0gZCwgeSIsImRhdGVGb3JtYXQtbG9uZyI6Ik1NTU0gZCwgeSIsImRhdGVGb3JtYXQtbWVkaXVtIjoiTU1NIGQsIHkiLCJkYXRlRm9ybWF0LXNob3J0IjoiTS9kL3l5IiwidGltZUZvcm1hdC1mdWxsIjoiaDptbTpzcyBhIHp6enoiLCJ0aW1lRm9ybWF0LWxvbmciOiJoOm1tOnNzIGEgeiIsInRpbWVGb3JtYXQtbWVkaXVtIjoiaDptbTpzcyBhIiwidGltZUZvcm1hdC1zaG9ydCI6Img6bW0gYSIsImRhdGVUaW1lRm9ybWF0LWZ1bGwiOiJ7MX0gJ2F0JyB7MH0iLCJkYXRlVGltZUZvcm1hdC1sb25nIjoiezF9ICdhdCcgezB9IiwiZGF0ZVRpbWVGb3JtYXQtbWVkaXVtIjoiezF9LCB7MH0iLCJkYXRlVGltZUZvcm1hdC1zaG9ydCI6InsxfSwgezB9IiwiZGVjaW1hbEZvcm1hdCI6eyJzdGFuZGFyZCI6IiMsIyMwLiMjIyJ9LCJjdXJyZW5jeUZvcm1hdCI6eyJzdGFuZGFyZCI6IsKkIywjIzAuMDAifSwicGVyY2VudEZvcm1hdCI6eyJzdGFuZGFyZCI6IiMsIyMwJSJ9LCJtb250aHMtZm9ybWF0LWFiYnJldmlhdGVkIjpbIkphbiIsIkZlYiIsIk1hciIsIkFwciIsIk1heSIsIkp1biIsIkp1bCIsIkF1ZyIsIlNlcCIsIk9jdCIsIk5vdiIsIkRlYyJdLCJtb250aHMtZm9ybWF0LXdpZGUiOlsiSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLCJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiXSwibW9udGhzLWZvcm1hdC1uYXJyb3ciOlsiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsIjEyIl0sIm1vbnRocy1zdGFuZEFsb25lLWFiYnJldmlhdGVkIjpbIkphbiIsIkZlYiIsIk1hciIsIkFwciIsIk1heSIsIkp1biIsIkp1bCIsIkF1ZyIsIlNlcCIsIk9jdCIsIk5vdiIsIkRlYyJdLCJtb250aHMtc3RhbmRBbG9uZS13aWRlIjpbIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIl0sIm1vbnRocy1zdGFuZEFsb25lLW5hcnJvdyI6WyIxIiwiMiIsIjMiLCI0IiwiNSIsIjYiLCI3IiwiOCIsIjkiLCIxMCIsIjExIiwiMTIiXSwiZGF5cy1mb3JtYXQtYWJicmV2aWF0ZWQiOlsiU3VuIiwiTW9uIiwiVHVlIiwiV2VkIiwiVGh1IiwiRnJpIiwiU2F0Il0sImRheXMtZm9ybWF0LXdpZGUiOlsiU3VuZGF5IiwiTW9uZGF5IiwiVHVlc2RheSIsIldlZG5lc2RheSIsIlRodXJzZGF5IiwiRnJpZGF5IiwiU2F0dXJkYXkiXSwiZGF5cy1mb3JtYXQtbmFycm93IjpbIlMiLCJNIiwiVCIsIlciLCJUIiwiRiIsIlMiXSwiZGF5cy1zdGFuZEFsb25lLWFiYnJldmlhdGVkIjpbIlN1biIsIk1vbiIsIlR1ZSIsIldlZCIsIlRodSIsIkZyaSIsIlNhdCJdLCJkYXlzLXN0YW5kQWxvbmUtd2lkZSI6WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLCJkYXlzLXN0YW5kQWxvbmUtbmFycm93IjpbIlMiLCJNIiwiVCIsIlciLCJUIiwiRiIsIlMiXSwicXVhcnRlcnMtZm9ybWF0LW5hcnJvdyI6WyIxIiwiMiIsIjMiLCI0Il0sInF1YXJ0ZXJzLWZvcm1hdC1hYmJyZXZpYXRlZCI6WyJRMSIsIlEyIiwiUTMiLCJRNCJdLCJxdWFydGVycy1mb3JtYXQtd2lkZSI6WyIxc3QgcXVhcnRlciIsIjJuZCBxdWFydGVyIiwiM3JkIHF1YXJ0ZXIiLCI0dGggcXVhcnRlciJdLCJxdWFydGVycy1zdGFuZEFsb25lLW5hcnJvdyI6WyIxIiwiMiIsIjMiLCI0Il0sInN5bWJvbHMtbGF0bi1kZWNpbWFsIjoiLiIsInN5bWJvbHMtbGF0bi1ncm91cCI6IiwiLCJzeW1ib2xzLWxhdG4tcGx1c1NpZ24iOiIrIiwic3ltYm9scy1sYXRuLW1pbnVzU2lnbiI6Ii0iLCJkYXlQZXJpb2RzLWZvcm1hdC1uYXJyb3ciOlsiQU0iLCJQTSJdLCJkYXlQZXJpb2RzLWZvcm1hdC13aWRlIjpbIkFNIiwiUE0iXSwiZGF5UGVyaW9kcy1mb3JtYXQtYWJicmV2aWF0ZWQiOlsiQU0iLCJQTSJdLCJ3ZWVrRGF0YS1taW5EYXlzIjo0LCJ3ZWVrRGF0YS1maXJzdERheSI6MSwid2Vla0RhdGEtd2Vla2VuZFN0YXJ0Ijo2LCJ3ZWVrRGF0YS13ZWVrZW5kRW5kIjowLCJpbnRlcnZhbEZvcm1hdEZhbGxiYWNrIjoiezB9IOKAkyB7MX0ifTt2YXIgYj17Iml3IjoiaGUiLCJqaSI6InlpIiwiaW4iOiJpZCIsInNoIjoic3IifTt2YXIgYz0oZnVuY3Rpb24oKXt2YXIgZD0iYXIsYXJfQUUsYXJfRUcsYXJfU0EsYmcsYmdfQkcsYnIsY2EsY2FfRVMsY3MsY3NfQ1osZGEsZGFfREssZGUsZGVfQVQsZGVfQkUsZGVfQ0gsZGVfREUsZGVfTFUsZWwsZWxfQ1ksZWxfR1IsZW4sZW5fQVUsZW5fQ0EsZW5fR0IsZW5fSEssZW5fSUUsZW5fSU4sZW5fTlosZW5fUEcsZW5fU0csZW5fVVMsZW5fWkEsZXMsZXNfQVIsZXNfQk8sZXNfQ0wsZXNfQ08sZXNfRVMsZXNfTVgsZXNfUEUsZXNfVVksZXNfVkUsZXQsZXRfRUUsZmEsZmFfSVIsZmksZmlfRkksZnIsZnJfQkUsZnJfQ0EsZnJfQ0gsZnJfRlIsZnJfTFUsaGUsaGVfSUwsaGksaGlfSU4saHIsaHJfSFIsaHUsaHVfSFUsaWQsaWRfSUQsaXQsaXRfQ0gsaXRfSVQsamEsamFfSlAsa28sa29fS1IsbHQsbHRfTFQsbHYsbHZfTFYsbmIsbmJfTk8sbmwsbmxfQkUsbmxfTkwsbm4sbm5fTk8scGwscGxfUEwscHQscHRfQlIscHRfUFQscm8scm9fUk8scnUscnVfS1oscnVfUlUscnVfVUEsc2ssc2tfU0ssc2wsc2xfU0ksc3Isc3Ysc3ZfU0UsdGgsdGhfVEgsdHIsdHJfQ1ksdHJfVFIsdWssdWtfVUEsdmksdmlfVk4semhfQ04semhfSEssemhfU0csemhfVFciLnNwbGl0KCIsIiksaSxyO2lmKGQubGVuZ3RoIT0xfHwoZFswXSYmZFswXS5pbmRleE9mKCJAIik8MCkpe3I9e307Zm9yKGk9MDtpPGQubGVuZ3RoO2krKyl7cltkW2ldXT10cnVlfX1yZXR1cm4gcn0oKSk7dmFyIGw9e307ZnVuY3Rpb24gZyhvKXt2YXIgcz1vLmdldExhbmd1YWdlKCl8fCIiLFM9by5nZXRTY3JpcHQoKXx8IiIscj1vLmdldFJlZ2lvbigpfHwiIixkO2Z1bmN0aW9uIGUoaSl7dmFyIEQ7aWYoIWxbaV0mJighY3x8Y1tpXT09PXRydWUpKXtsW2ldPXEuc2FwLmxvYWRSZXNvdXJjZSgic2FwL3VpL2NvcmUvY2xkci8iK2krIi5qc29uIix7ZGF0YVR5cGU6Impzb24iLGZhaWxPbkVycm9yOmZhbHNlfSl9cmV0dXJuIGxbaV19cz0ocyYmYltzXSl8fHM7aWYocz09PSJubyIpe3M9Im5iIn1pZihzPT09InpoIiYmIXIpe2lmKFM9PT0iSGFucyIpe3I9IkNOIn1lbHNlIGlmKFM9PT0iSGFudCIpe3I9IlRXIn19dmFyIGk9cysiXyIrcjtpZihzJiZyKXtkPWUoaSl9aWYoIWQmJnMpe2Q9ZShzKX1sW2ldPWR8fE07cmV0dXJuIGxbaV19O2EuZXh0ZW5kKCJzYXAudWkuY29yZS5DdXN0b21Mb2NhbGVEYXRhIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obyl7YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5tQ3VzdG9tRGF0YT1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRGb3JtYXRTZXR0aW5ncygpLmdldEN1c3RvbUxvY2FsZURhdGEoKX0sX2dldDpmdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5tQ3VzdG9tRGF0YVtpXXx8dGhpcy5tRGF0YVtpXX19KTthLmdldEluc3RhbmNlPWZ1bmN0aW9uKG8pe3JldHVybiBvLmhhc1ByaXZhdGVVc2VTdWJ0YWcoInNhcHVmbXQiKT9uZXcgc2FwLnVpLmNvcmUuQ3VzdG9tTG9jYWxlRGF0YShvKTpuZXcgYShvKX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1JlbmRlck1hbmFnZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9JbnRlcmZhY2UnLCdzYXAvdWkvYmFzZS9PYmplY3QnLCdqcXVlcnkuc2FwLmFjdCcsJ2pxdWVyeS5zYXAuZW5jb2RlciddLGZ1bmN0aW9uKHEsSSxCKXsidXNlIHN0cmljdCI7dmFyIGM9WyJyZW5kZXJDb250cm9sIiwid3JpdGUiLCJ3cml0ZUVzY2FwZWQiLCJ0cmFuc2xhdGUiLCJ3cml0ZUFjY2VsZXJhdG9yS2V5Iiwid3JpdGVDb250cm9sRGF0YSIsIndyaXRlRWxlbWVudERhdGEiLCJ3cml0ZUF0dHJpYnV0ZSIsIndyaXRlQXR0cmlidXRlRXNjYXBlZCIsImFkZENsYXNzIiwid3JpdGVDbGFzc2VzIiwiYWRkU3R5bGUiLCJ3cml0ZVN0eWxlcyIsIndyaXRlQWNjZXNzaWJpbGl0eVN0YXRlIiwid3JpdGVJY29uIiwiZ2V0Q29uZmlndXJhdGlvbiIsImdldEhUTUwiLCJjbGVhbnVwQ29udHJvbFdpdGhvdXRSZW5kZXJpbmciXTt2YXIgTj1bInJlbmRlciIsImZsdXNoIiwiZGVzdHJveSJdO3ZhciBSPUIuZXh0ZW5kKCJzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtCLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmFCdWZmZXI9W107dGhpcy5hUmVuZGVyZWRDb250cm9scz1bXTt0aGlzLmFTdHlsZVN0YWNrPVt7fV19LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOmMuY29uY2F0KE4pfX0pO1IucHJvdG90eXBlLmdldFJlbmRlcmVySW50ZXJmYWNlPWZ1bmN0aW9uKCl7dmFyIGk9bmV3IEkodGhpcyxjKTt0aGlzLmdldFJlbmRlcmVySW50ZXJmYWNlPXEuc2FwLmdldHRlcihpKTtyZXR1cm4gaX07Ui5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuYUJ1ZmZlcj1bXTt0aGlzLmFSZW5kZXJlZENvbnRyb2xzPVtdO3RoaXMuYVN0eWxlU3RhY2s9W3t9XX07Ui5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiBzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKX07Ui5wcm90b3R5cGUuZ2V0UmVuZGVyZXI9ZnVuY3Rpb24oQyl7cmV0dXJuIFIuZ2V0UmVuZGVyZXIoQyl9O3ZhciB0PWZ1bmN0aW9uKHIsQyl7ci5fYkxvY2tlZD10cnVlO3RyeXt2YXIgZT1xLkV2ZW50KCJCZWZvcmVSZW5kZXJpbmciKTtlLnNyY0NvbnRyb2w9QztDLl9oYW5kbGVFdmVudChlKX1maW5hbGx5e3IuX2JMb2NrZWQ9ZmFsc2V9fTtSLnByb3RvdHlwZS5jbGVhbnVwQ29udHJvbFdpdGhvdXRSZW5kZXJpbmc9ZnVuY3Rpb24oQyl7aWYoIUN8fCFDLmdldERvbVJlZigpKXtyZXR1cm59dCh0aGlzLEMpO0MuYk91dHB1dD1mYWxzZX07Ui5wcm90b3R5cGUucmVuZGVyQ29udHJvbD1mdW5jdGlvbihDKXtpZighQyl7cmV0dXJufWlmKCF0aGlzLmFSZW5kZXJTdGFjayl7dGhpcy5hUmVuZGVyU3RhY2s9bmV3IEFycmF5KCl9aWYodGhpcy5hUmVuZGVyU3RhY2smJnRoaXMuYVJlbmRlclN0YWNrLmxlbmd0aD4wKXtxLnNhcC5tZWFzdXJlLnBhdXNlKHRoaXMuYVJlbmRlclN0YWNrWzBdKyItLS1yZW5kZXJDb250cm9sIil9ZWxzZSBpZihDLmdldFBhcmVudCgpJiZDLmdldFBhcmVudCgpLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpPT0ic2FwLnVpLmNvcmUuVUlBcmVhIil7cS5zYXAubWVhc3VyZS5wYXVzZShDLmdldFBhcmVudCgpLmdldElkKCkrIi0tLXJlcmVuZGVyIil9dGhpcy5hUmVuZGVyU3RhY2sudW5zaGlmdChDLmdldElkKCkpO3Euc2FwLm1lYXN1cmUuc3RhcnQoQy5nZXRJZCgpKyItLS1yZW5kZXJDb250cm9sIiwiUmVuZGVyaW5nIG9mICIrQy5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKSk7dmFyIGI9dGhpcy5hQnVmZmVyLmxlbmd0aDt2YXIgbz17fTtpZihDLmFDdXN0b21TdHlsZUNsYXNzZXMmJkMuYUN1c3RvbVN0eWxlQ2xhc3Nlcy5sZW5ndGg+MCl7by5hQ3VzdG9tU3R5bGVDbGFzc2VzPUMuYUN1c3RvbVN0eWxlQ2xhc3Nlc310aGlzLmFTdHlsZVN0YWNrLnB1c2gobyk7cS5zYXAubWVhc3VyZS5wYXVzZShDLmdldElkKCkrIi0tLXJlbmRlckNvbnRyb2wiKTt2YXIgcj10aGlzLmdldFJlbmRlcmVyKEMpO3Euc2FwLm1lYXN1cmUucmVzdW1lKEMuZ2V0SWQoKSsiLS0tcmVuZGVyQ29udHJvbCIpO3QodGhpcyxDKTt2YXIgYT1DLmFCaW5kUGFyYW1ldGVycztpZihhJiZhLmxlbmd0aD4wKXt2YXIgZD1xKEMuZ2V0RG9tUmVmKCkpO2lmKGQmJmRbMF0pe2Zvcih2YXIgaT0wO2k8YS5sZW5ndGg7aSsrKXt2YXIgcD1hW2ldO2QudW5iaW5kKHAuc0V2ZW50VHlwZSxwLmZuUHJveHkpfX19ci5yZW5kZXIodGhpcy5nZXRSZW5kZXJlckludGVyZmFjZSgpLEMpO3RoaXMuYVN0eWxlU3RhY2sucG9wKCk7dGhpcy5hUmVuZGVyZWRDb250cm9scy5wdXNoKEMpO2lmKEMuZ2V0VUlBcmVhJiZDLmdldFVJQXJlYSgpKXtDLmdldFVJQXJlYSgpLl9vbkNvbnRyb2xSZW5kZXJlZChDKX1DLmJPdXRwdXQ9dGhpcy5hQnVmZmVyLmxlbmd0aCE9YjtxLnNhcC5tZWFzdXJlLmVuZChDLmdldElkKCkrIi0tLXJlbmRlckNvbnRyb2wiKTt0aGlzLmFSZW5kZXJTdGFjay5zaGlmdCgpO2lmKHRoaXMuYVJlbmRlclN0YWNrJiZ0aGlzLmFSZW5kZXJTdGFjay5sZW5ndGg+MCl7cS5zYXAubWVhc3VyZS5yZXN1bWUodGhpcy5hUmVuZGVyU3RhY2tbMF0rIi0tLXJlbmRlckNvbnRyb2wiKX1lbHNlIGlmKEMuZ2V0UGFyZW50KCkmJkMuZ2V0UGFyZW50KCkuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCk9PSJzYXAudWkuY29yZS5VSUFyZWEiKXtxLnNhcC5tZWFzdXJlLnJlc3VtZShDLmdldFBhcmVudCgpLmdldElkKCkrIi0tLXJlcmVuZGVyIil9fTtSLnByb3RvdHlwZS5nZXRIVE1MPWZ1bmN0aW9uKEMpe3ZhciBhPXRoaXMuYUJ1ZmZlcjt2YXIgcj10aGlzLmFCdWZmZXI9W107dGhpcy5yZW5kZXJDb250cm9sKEMpO3RoaXMuYUJ1ZmZlcj1hO3JldHVybiByLmpvaW4oIiIpfTsoZnVuY3Rpb24oKXt2YXIgcz1mdW5jdGlvbigpe3ZhciBDPXNhcC51aS5nZXRDb3JlKCk7dmFyIEY9Qy5nZXRDdXJyZW50Rm9jdXNlZENvbnRyb2xJZCgpLG89bnVsbCxhPW51bGw7aWYoRil7dmFyIGI9Qy5nZXRFbGVtZW50QnlJZChGKTtpZihiKXtvPWIuZ2V0Rm9jdXNJbmZvKCk7YT1iLmdldEZvY3VzRG9tUmVmKCl9fXJldHVybntmb2N1c2VkQ29udHJvbElkOkYsZm9jdXNJbmZvOm8sZm9jdXNEb21SZWY6YX19O3ZhciBmPWZ1bmN0aW9uKHIsYSxTKXtmb3IodmFyIGk9MCxiPWEubGVuZ3RoO2k8YjtpKyspe3ZhciBDPWFbaV07aWYoQy5iT3V0cHV0KXtyLl9iTG9ja2VkPXRydWU7dHJ5e3ZhciBFPXEuRXZlbnQoIkFmdGVyUmVuZGVyaW5nIik7RS5zcmNDb250cm9sPUM7cS5zYXAubWVhc3VyZS5zdGFydChDLmdldElkKCkrIi0tLUFmdGVyUmVuZGVyaW5nIiwiQWZ0ZXJSZW5kZXJpbmcgb2YgIitDLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpKTtDLl9oYW5kbGVFdmVudChFKTtxLnNhcC5tZWFzdXJlLmVuZChDLmdldElkKCkrIi0tLUFmdGVyUmVuZGVyaW5nIil9ZmluYWxseXtyLl9iTG9ja2VkPWZhbHNlfX19dHJ5e2lmKFMmJlMuZm9jdXNlZENvbnRyb2xJZCl7dmFyIEY9c2FwLnVpLmdldENvcmUoKS5nZXRFbGVtZW50QnlJZChTLmZvY3VzZWRDb250cm9sSWQpO2lmKEYmJkYuZ2V0Rm9jdXNEb21SZWYoKSE9Uy5mb2N1c0RvbVJlZil7Ri5hcHBseUZvY3VzSW5mbyhTLmZvY3VzSW5mbyl9fX1jYXRjaChlKXtxLnNhcC5sb2cud2FybmluZygiUHJvYmxlbXMgd2hpbGUgcmVzdG9yZSBmb2N1cyBhZnRlciByZW5kZXJpbmc6ICIrZSxudWxsLHIpfWZvcih2YXIgaT0wLGI9YS5sZW5ndGg7aTxiO2krKyl7dmFyIEM9YVtpXSxkPUMuYUJpbmRQYXJhbWV0ZXJzO2lmKGQmJmQubGVuZ3RoPjApe3ZhciBEPXEoQy5nZXREb21SZWYoKSk7aWYoRCYmRFswXSl7Zm9yKHZhciBqPTA7ajxkLmxlbmd0aDtqKyspe3ZhciBwPWRbal07RC5iaW5kKHAuc0V2ZW50VHlwZSxwLmZuUHJveHkpfX19fX07Ui5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oVCxkLHYpe2lmKHRoaXMuYlJlbmRlcmVyTW9kZSl7cS5zYXAubG9nLmluZm8oIkZsdXNoIG11c3Qgbm90IGJlIGNhbGxlZCBmcm9tIGNvbnRyb2wgcmVuZGVyZXJzLiBDYWxsIGlnbm9yZWQuIixudWxsLHRoaXMpO3JldHVybn1pZighZCYmKHR5cGVvZiB2IT09Im51bWJlciIpJiYhdil7Ui5wcmVzZXJ2ZUNvbnRlbnQoVCl9dmFyIFM9cygpO3ZhciBoPVIucHJlcGFyZUhUTUw1KHRoaXMuYUJ1ZmZlci5qb2luKCIiKSk7aWYodGhpcy5fZlB1dEludG9Eb20pe3RoaXMuX2ZQdXRJbnRvRG9tKFQsaCl9ZWxzZXtmb3IodmFyIGk9MDtpPHRoaXMuYVJlbmRlcmVkQ29udHJvbHMubGVuZ3RoO2krKyl7dmFyIG89dGhpcy5hUmVuZGVyZWRDb250cm9sc1tpXS5nZXREb21SZWYoKTtpZihvJiYhUi5pc1ByZXNlcnZlZENvbnRlbnQobykpe2lmKFIuaXNJbmxpbmVUZW1wbGF0ZShvKSl7cShvKS5lbXB0eSgpfWVsc2V7cShvKS5yZW1vdmUoKX19fWlmKHR5cGVvZiB2PT09Im51bWJlciIpe2lmKHY8PTApe3EoVCkucHJlcGVuZChoKX1lbHNle3ZhciAkPXEoVCkuY2hpbGRyZW4oKS5lcSh2LTEpO2lmKCQubGVuZ3RoPT09MSl7JC5hZnRlcihoKX1lbHNle3EoVCkuYXBwZW5kKGgpfX19ZWxzZSBpZighdil7cShUKS5odG1sKGgpfWVsc2V7cShUKS5hcHBlbmQoaCl9fWYodGhpcyx0aGlzLmFSZW5kZXJlZENvbnRyb2xzLFMpO3RoaXMuYVJlbmRlcmVkQ29udHJvbHM9W107dGhpcy5hQnVmZmVyPVtdO3RoaXMuYVN0eWxlU3RhY2s9W3t9XTtxLnNhcC5hY3QucmVmcmVzaCgpfTtSLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oQyxUKXtpZih0aGlzLmJSZW5kZXJlck1vZGUpe3Euc2FwLmxvZy5pbmZvKCJSZW5kZXIgbXVzdCBub3QgYmUgY2FsbGVkIGZyb20gY29udHJvbCByZW5kZXJlcnMuIENhbGwgaWdub3JlZC4iLG51bGwsdGhpcyk7cmV0dXJufWlmKHRoaXMuX2JMb2NrZWQpe3Euc2FwLmxvZy5lcnJvcigiUmVuZGVyIG11c3Qgbm90IGJlIGNhbGxlZCB3aXRoaW4gQmVmb3JlIG9yIEFmdGVyIFJlbmRlcmluZyBQaGFzZS4gQ2FsbCBpZ25vcmVkLiIsbnVsbCx0aGlzKTtyZXR1cm59dGhpcy5hQnVmZmVyPVtdO3RoaXMucmVuZGVyQ29udHJvbChDKTt0aGlzLl9mUHV0SW50b0RvbT1mdW5jdGlvbihvLGgpe2lmKEMmJlQpe3ZhciBhPUMuZ2V0RG9tUmVmKCk7aWYoUi5pc1ByZXNlcnZlZENvbnRlbnQoYSkpe2E9cS5zYXAuYnlJZCgic2FwLXVpLWR1bW15LSIrQy5nZXRJZCgpKVswXXx8YX12YXIgbj1hJiZhLnBhcmVudE5vZGUhPVQ7dmFyIEE9ZnVuY3Rpb24oKXt2YXIgaj1xKFQpO2lmKFQuaW5uZXJIVE1MPT0iIil7ai5odG1sKGgpfWVsc2V7ai5hcHBlbmQoaCl9fTtpZihuKXtpZighUi5pc1ByZXNlcnZlZENvbnRlbnQoYSkpe2lmKFIuaXNJbmxpbmVUZW1wbGF0ZShhKSl7cShhKS5lbXB0eSgpfWVsc2V7cShhKS5yZW1vdmUoKX19aWYoaCl7QSgpfX1lbHNle2lmKGgpe2lmKGEpe2lmKFIuaXNJbmxpbmVUZW1wbGF0ZShhKSl7cShhKS5odG1sKGgpfWVsc2V7cShhKS5yZXBsYWNlV2l0aChoKX19ZWxzZXtBKCl9fWVsc2V7aWYoUi5pc0lubGluZVRlbXBsYXRlKGEpKXtxKGEpLmVtcHR5KCl9ZWxzZXtpZighQy5nZXRQYXJlbnQoKXx8IUMuZ2V0UGFyZW50KCkuX29uQ2hpbGRSZXJlbmRlcmVkRW1wdHl8fCFDLmdldFBhcmVudCgpLl9vbkNoaWxkUmVyZW5kZXJlZEVtcHR5KEMsYSkpe3EoYSkucmVtb3ZlKCl9fX19fX07dGhpcy5mbHVzaChULHRydWUpO3RoaXMuX2ZQdXRJbnRvRG9tPW51bGx9fSgpKTtSLmdldFJlbmRlcmVyPWZ1bmN0aW9uKEMpe3JldHVybiBDLmdldE1ldGFkYXRhKCkuZ2V0UmVuZGVyZXIoKX07Ui5pbml0SFRNTDVTdXBwb3J0PWZ1bmN0aW9uKCl7aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJihzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbj09PTh8fHNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPT09Nykpe3ZhciBUPVsiYXJ0aWNsZSIsImFzaWRlIiwiYXVkaW8iLCJjYW52YXMiLCJjb21tYW5kIiwiZGF0YWxpc3QiLCJkZXRhaWxzIiwiZmlnY2FwdGlvbiIsImZpZ3VyZSIsImZvb3RlciIsImhlYWRlciIsImhncm91cCIsImtleWdlbiIsIm1hcmsiLCJtZXRlciIsIm5hdiIsIm91dHB1dCIsInByb2dyZXNzIiwicnAiLCJydCIsInJ1YnkiLCJzZWN0aW9uIiwic291cmNlIiwic3VtbWFyeSIsInRlbXBsYXRlIiwidGltZSIsInZpZGVvIiwid2JyIl07Zm9yKHZhciBpPTA7aTxULmxlbmd0aDtpKyspe2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoVFtpXSl9dmFyIHI9bmV3IFJlZ0V4cCgiPCgiK1Quam9pbigifCIpKyIpKFxcc3w+KSIsImkiKTt2YXIgZD1udWxsO1IucHJlcGFyZUhUTUw1PWZ1bmN0aW9uKGgpe2lmKGgmJmgubWF0Y2gocikpe2lmKCFkKXtkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO2Quc3R5bGUuZGlzcGxheT0nbm9uZSd9dmFyIGU9ZC5jbG9uZU5vZGUodHJ1ZSk7dmFyIGY9ZG9jdW1lbnQuYm9keXx8ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2YuYXBwZW5kQ2hpbGQoZSk7ZS5pbm5lckhUTUw9aC5yZXBsYWNlKC9eXHNccyovLCcnKS5yZXBsYWNlKC9cc1xzKiQvLCcnKTtmLnJlbW92ZUNoaWxkKGUpO3JldHVybiBlLmNoaWxkTm9kZXN9cmV0dXJuIGh9O3Euc2FwLmxvZy5pbmZvKCJJRTggSFRNTDUgc3VwcG9ydCBhY3RpdmF0ZWQiKX1lbHNle3Euc2FwLmxvZy5pbmZvKCJubyBJRTggSFRNTDUgc3VwcG9ydCByZXF1aXJlZCIpO1IucHJlcGFyZUhUTUw1PWZ1bmN0aW9uKGgpe3JldHVybiBofX19O1IuZm9yY2VSZXBhaW50PWZ1bmN0aW9uKGQpe3ZhciBEPXR5cGVvZiBkPT0ic3RyaW5nIj9xLnNhcC5kb21CeUlkKGQpOmQ7aWYoRCl7cS5zYXAubG9nLmRlYnVnKCJmb3JjaW5nIGEgcmVwYWludCBmb3IgIisoRC5pZHx8U3RyaW5nKEQpKSk7dmFyIG89RC5zdHlsZS5kaXNwbGF5O3ZhciBhPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7RC5zdHlsZS5kaXNwbGF5PSJub25lIjtELm9mZnNldEhlaWdodDtELnN0eWxlLmRpc3BsYXk9bztpZihkb2N1bWVudC5hY3RpdmVFbGVtZW50IT09YSl7cS5zYXAuZm9jdXMoYSl9fX07KGZ1bmN0aW9uKCl7dmFyIGE9InNhcC11aS1wcmVzZXJ2ZSIsYj0ic2FwLXVpLXN0YXRpYyIsQT0iZGF0YS1zYXAtdWktcHJlc2VydmUiLGQ9ImRhdGEtc2FwLXVpLWFyZWEiO2Z1bmN0aW9uIGcoKXt2YXIgJD1xKCIjIithKTtpZigkLmxlbmd0aD09PTApeyQ9cSgiPERJVi8+Iix7cm9sZToiYXBwbGljYXRpb24iLGlkOmF9KS5hZGRDbGFzcygic2FwVWlIaWRkZW4iKS5jc3MoIndpZHRoIiwiMCIpLmNzcygiaGVpZ2h0IiwiMCIpLmNzcygib3ZlcmZsb3ciLCJoaWRkZW4iKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KX1yZXR1cm4gJH1mdW5jdGlvbiBtKG4pe3EoIjxESVYvPiIse2lkOiJzYXAtdWktZHVtbXktIituLmlkfSkuYWRkQ2xhc3MoInNhcFVpSGlkZGVuIikuaW5zZXJ0QmVmb3JlKG4pfVIucHJlc2VydmVDb250ZW50PWZ1bmN0aW9uKHIscCxQKXtzYXAudWkuZ2V0Q29yZSgpLmdldEV2ZW50QnVzKCkucHVibGlzaCgic2FwLnVpIiwiX19wcmVzZXJ2ZUNvbnRlbnQiLHtkb21Ob2RlOnJ9KTt2YXIgJD1nKCk7ZnVuY3Rpb24gZihoKXtpZihoLmlkPT09YXx8aC5pZD09PWIpe3JldHVybn1pZihoLmhhc0F0dHJpYnV0ZShBKSl7aWYoaD09PXIpe20oaCl9JC5hcHBlbmQoaCl9ZWxzZSBpZihQJiZoLmlkKXtSLm1hcmtQcmVzZXJ2YWJsZUNvbnRlbnQocShoKSxoLmlkKTskLmFwcGVuZChoKTtyZXR1cm59aWYoIWguaGFzQXR0cmlidXRlKGQpKXt2YXIgbj1oLmZpcnN0Q2hpbGQ7d2hpbGUobil7aD1uO249bi5uZXh0U2libGluZztpZihoLm5vZGVUeXBlPT09MSl7ZihoKX19fX1xLnNhcC5tZWFzdXJlLnN0YXJ0KHIuaWQrIi0tLXByZXNlcnZlQ29udGVudCIsInByZXNlcnZlQ29udGVudCBmb3IgIityLmlkKTtpZihwKXtmKHIpfWVsc2V7cShyKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oaSxuKXtmKG4pfSl9cS5zYXAubWVhc3VyZS5lbmQoci5pZCsiLS0tcHJlc2VydmVDb250ZW50Iil9O1IuZmluZFByZXNlcnZlZENvbnRlbnQ9ZnVuY3Rpb24oaSl7dmFyICQ9ZygpLGY9JC5jaGlsZHJlbigiWyIrQSsiPSciK2kucmVwbGFjZSgvKDp8XC4pL2csJ1xcJDEnKSsiJ10iKTtyZXR1cm4gZn07Ui5tYXJrUHJlc2VydmFibGVDb250ZW50PWZ1bmN0aW9uKCQsaSl7JC5hdHRyKEEsaSl9O1IuaXNQcmVzZXJ2ZWRDb250ZW50PWZ1bmN0aW9uKEQpe3JldHVybihEJiZELmdldEF0dHJpYnV0ZShBKSYmRC5wYXJlbnROb2RlJiZELnBhcmVudE5vZGUuaWQ9PWEpfTtSLmdldFByZXNlcnZlQXJlYVJlZj1mdW5jdGlvbigpe3JldHVybiBnKClbMF19O3ZhciBlPSJkYXRhLXNhcC11aS10ZW1wbGF0ZSI7Ui5tYXJrSW5saW5lVGVtcGxhdGU9ZnVuY3Rpb24oJCl7JC5hdHRyKGUsIiIpfTtSLmlzSW5saW5lVGVtcGxhdGU9ZnVuY3Rpb24oRCl7cmV0dXJuKEQmJkQuaGFzQXR0cmlidXRlKGUpKX19KCkpO1IucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKFQpe3RoaXMuYUJ1ZmZlci5wdXNoLmFwcGx5KHRoaXMuYUJ1ZmZlcixhcmd1bWVudHMpO3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS53cml0ZUVzY2FwZWQ9ZnVuY3Rpb24oVCxsKXtpZihsKXt2YXIgTD1ULnNwbGl0KCJcbiIpO2Zvcih2YXIgaT0wO2k8TC5sZW5ndGg7aSsrKXtMW2ldPXEuc2FwLmVuY29kZUhUTUwoTFtpXSl9VD1MLmpvaW4oIjxicj4iKX1lbHNle1Q9cS5zYXAuZW5jb2RlSFRNTChUKX10aGlzLmFCdWZmZXIucHVzaChUKTtyZXR1cm4gdGhpc307Ui5wcm90b3R5cGUudHJhbnNsYXRlPWZ1bmN0aW9uKGspe307Ui5wcm90b3R5cGUud3JpdGVBY2NlbGVyYXRvcktleT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS5hZGRTdHlsZT1mdW5jdGlvbihuLHYpe2lmKHYhPT11bmRlZmluZWQmJnYhPT1udWxsKXt2YXIgcz10aGlzLmFTdHlsZVN0YWNrW3RoaXMuYVN0eWxlU3RhY2subGVuZ3RoLTFdO2lmKCFzLmFTdHlsZSl7cy5hU3R5bGU9W119cy5hU3R5bGUucHVzaChuKyI6Iit2KX1yZXR1cm4gdGhpc307Ui5wcm90b3R5cGUud3JpdGVTdHlsZXM9ZnVuY3Rpb24oKXt2YXIgcz10aGlzLmFTdHlsZVN0YWNrW3RoaXMuYVN0eWxlU3RhY2subGVuZ3RoLTFdO2lmKHMuYVN0eWxlKXt0aGlzLndyaXRlKCIgc3R5bGU9XCIiK3MuYVN0eWxlLmpvaW4oIjsiKSsiXCIgIil9cy5hU3R5bGU9bnVsbDtyZXR1cm4gdGhpc307Ui5wcm90b3R5cGUuYWRkQ2xhc3M9ZnVuY3Rpb24obil7aWYobil7dmFyIHM9dGhpcy5hU3R5bGVTdGFja1t0aGlzLmFTdHlsZVN0YWNrLmxlbmd0aC0xXTtpZighcy5hQ2xhc3Nlcyl7cy5hQ2xhc3Nlcz1bXX1zLmFDbGFzc2VzLnB1c2gobil9cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLndyaXRlQ2xhc3Nlcz1mdW5jdGlvbihlKXt2YXIgcz10aGlzLmFTdHlsZVN0YWNrW3RoaXMuYVN0eWxlU3RhY2subGVuZ3RoLTFdO3ZhciBDPWU/ZS5hQ3VzdG9tU3R5bGVDbGFzc2VzOigoZT09PWZhbHNlKT9bXTpzLmFDdXN0b21TdHlsZUNsYXNzZXMpO2lmKHMuYUNsYXNzZXN8fEMpe3ZhciBhPVtdLmNvbmNhdChzLmFDbGFzc2VzfHxbXSxDfHxbXSk7YS5zb3J0KCk7YT1xLm1hcChhLGZ1bmN0aW9uKG4saSl7cmV0dXJuKGk9PTB8fG4hPWFbaS0xXSk/bjpudWxsfSk7dGhpcy53cml0ZSgiIGNsYXNzPVwiIixhLmpvaW4oIiAiKSwiXCIgIil9aWYoIWUpe3MuYUN1c3RvbVN0eWxlQ2xhc3Nlcz1udWxsfXMuYUNsYXNzZXM9bnVsbDtyZXR1cm4gdGhpc307Ui5wcm90b3R5cGUud3JpdGVDb250cm9sRGF0YT1mdW5jdGlvbihDKXt0aGlzLndyaXRlRWxlbWVudERhdGEoQyk7cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLndyaXRlRWxlbWVudERhdGE9ZnVuY3Rpb24oZSl7dmFyIHM9ZS5nZXRJZCgpO2lmKHMpe3RoaXMud3JpdGVBdHRyaWJ1dGUoImlkIixzKS53cml0ZUF0dHJpYnV0ZSgiZGF0YS1zYXAtdWkiLHMpfXZhciBkPWUuZ2V0Q3VzdG9tRGF0YSgpO3ZhciBsPWQubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bDtpKyspe3ZhciBEPWRbaV07aWYoRC5nZXRXcml0ZVRvRG9tKCkpe3ZhciBrPUQuZ2V0S2V5KCk7aWYodHlwZW9mIEQuZ2V0VmFsdWUoKT09PSJzdHJpbmciKXtpZigoc2FwLnVpLmNvcmUuSUQuaXNWYWxpZChrKSkmJihrLmluZGV4T2YoIjoiKT09LTEpJiYoay5pbmRleE9mKCJzYXAtdWkiKSE9PTApKXt0aGlzLndyaXRlQXR0cmlidXRlRXNjYXBlZCgiZGF0YS0iK2ssRC5nZXRWYWx1ZSgpKX1lbHNle3Euc2FwLmxvZy5lcnJvcigiQ3VzdG9tRGF0YSB3aXRoIGtleSAiK2srIiBzaG91bGQgYmUgd3JpdHRlbiB0byBIVE1MIG9mICIrdGhpcysiIGJ1dCB0aGUga2V5IGlzIG5vdCB2YWxpZCAobXVzdCBiZSBhIHZhbGlkIHNhcC51aS5jb3JlLklEIHdpdGhvdXQgYW55IGNvbG9uIGFuZCBtYXkgbm90IHN0YXJ0IHdpdGggJ3NhcC11aScpLiIpfX1lbHNle3Euc2FwLmxvZy5lcnJvcigiQ3VzdG9tRGF0YSB3aXRoIGtleSAiK2srIiBzaG91bGQgYmUgd3JpdHRlbiB0byBIVE1MIG9mICIrdGhpcysiIGJ1dCB0aGUgdmFsdWUgaXMgbm90IGEgc3RyaW5nLiIpfX19cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLndyaXRlQXR0cmlidXRlPWZ1bmN0aW9uKG4sdil7dGhpcy53cml0ZSgiICIsbiwiPVwiIix2LCJcIiIpO3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS53cml0ZUF0dHJpYnV0ZUVzY2FwZWQ9ZnVuY3Rpb24obix2KXt0aGlzLndyaXRlQXR0cmlidXRlKG4scS5zYXAuZXNjYXBlSFRNTChTdHJpbmcodikpKTtyZXR1cm4gdGhpc307Ui5wcm90b3R5cGUud3JpdGVBY2Nlc3NpYmlsaXR5U3RhdGU9ZnVuY3Rpb24oZSxQKXtpZighc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0QWNjZXNzaWJpbGl0eSgpKXtyZXR1cm4gdGhpc31pZihhcmd1bWVudHMubGVuZ3RoPT0xJiYhKGUgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50KSl7UD1lO2U9bnVsbH12YXIgYT17fTtpZihlIT1udWxsKXt2YXIgbT1lLmdldE1ldGFkYXRhKCk7bS5fZW5yaWNoQ2hpbGRJbmZvcygpO3ZhciBiPWZ1bmN0aW9uKEUsQSx2KXt2YXIgbz1tLmdldEFsbFByb3BlcnRpZXMoKVtFXTtpZihvJiZlW28uX3NHZXR0ZXJdKCk9PT12KXthW0FdPSJ0cnVlIn19O3ZhciBkPWZ1bmN0aW9uKEUsQSl7dmFyIG89bS5nZXRBbGxBc3NvY2lhdGlvbnMoKVtFXTtpZihvJiZvLm11bHRpcGxlKXt2YXIgaz1lW28uX3NHZXR0ZXJdKCk7aWYoay5sZW5ndGg+MCl7YVtBXT1rLmpvaW4oIiAiKX19fTtiKCJlZGl0YWJsZSIsInJlYWRvbmx5IixmYWxzZSk7YigiZW5hYmxlZCIsImRpc2FibGVkIixmYWxzZSk7YigidmlzaWJsZSIsImhpZGRlbiIsZmFsc2UpO2IoInJlcXVpcmVkIiwicmVxdWlyZWQiLHRydWUpO2IoInNlbGVjdGVkIiwic2VsZWN0ZWQiLHRydWUpO2IoImNoZWNrZWQiLCJjaGVja2VkIix0cnVlKTtkKCJhcmlhRGVzY3JpYmVkQnkiLCJkZXNjcmliZWRieSIpO2QoImFyaWFMYWJlbGxlZEJ5IiwibGFiZWxsZWRieSIpfWlmKFApe3ZhciBmPWZ1bmN0aW9uKHYpe3ZhciBpPXR5cGVvZih2KTtyZXR1cm4gdj09PW51bGx8fHY9PT0iInx8aT09PSJudW1iZXIifHxpPT09InN0cmluZyJ8fGk9PT0iYm9vbGVhbiJ9O3ZhciBnPXt9O3ZhciB4LGgsaSxqO2Zvcih4IGluIFApe2g9UFt4XTtpZihmKGgpKXtnW3hdPWh9ZWxzZSBpZih0eXBlb2YoaCk9PT0ib2JqZWN0IiYmZihoLnZhbHVlKSl7aj0iIjtpZihoLmFwcGVuZCYmKHg9PT0iZGVzY3JpYmVkYnkifHx4PT09ImxhYmVsbGVkYnkiKSl7aj1hW3hdP2FbeF0rIiAiOiIifWdbeF09aitoLnZhbHVlfX1xLmV4dGVuZChhLGcpfWlmKGUgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50JiZlLmdldFBhcmVudCgpJiZlLmdldFBhcmVudCgpLmVuaGFuY2VBY2Nlc3NpYmlsaXR5U3RhdGUpe2UuZ2V0UGFyZW50KCkuZW5oYW5jZUFjY2Vzc2liaWxpdHlTdGF0ZShlLGEpfWZvcih2YXIgcCBpbiBhKXtpZihhW3BdIT1udWxsJiZhW3BdIT09IiIpe3RoaXMud3JpdGVBdHRyaWJ1dGVFc2NhcGVkKHA9PT0icm9sZSI/cDoiYXJpYS0iK3AsYVtwXSl9fXJldHVybiB0aGlzfTtSLnByb3RvdHlwZS53cml0ZUljb249ZnVuY3Rpb24odSxDLGEpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLkljb25Qb29sIik7dmFyIGk9c2FwLnVpLmNvcmUuSWNvblBvb2wuaXNJY29uVVJJKHUpLHM9aT8iPHNwYW4gIjoiPGltZyAiLFQ9KHNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248OSksYixwLG87aWYodHlwZW9mIEM9PT0ic3RyaW5nIil7Qz1bQ119aWYoaSl7bz1zYXAudWkuY29yZS5JY29uUG9vbC5nZXRJY29uSW5mbyh1KTtpZighbyl7cS5zYXAubG9nLmVycm9yKCJBbiB1bnJlZ2lzdGVyZWQgaWNvbjogIit1KyIgaXMgdXNlZCBpbiBzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyJ3Mgd3JpdGVJY29uIG1ldGhvZC4iKTtyZXR1cm59aWYoIUMpe0M9W119Qy5wdXNoKCJzYXBVaUljb24iKTtpZighby5zdXBwcmVzc01pcnJvcmluZyl7Qy5wdXNoKCJzYXBVaUljb25NaXJyb3JJblJUTCIpfX10aGlzLndyaXRlKHMpO2lmKHEuaXNBcnJheShDKSYmQy5sZW5ndGgpe2I9Qy5qb2luKCIgIik7dGhpcy53cml0ZSgiY2xhc3M9XCIiK2IrIlwiICIpfWlmKGkpe2lmKCFhKXthPXt9fWlmKCFUKXthWyJkYXRhLXNhcC11aS1pY29uLWNvbnRlbnQiXT1vLmNvbnRlbnR9dGhpcy53cml0ZSgic3R5bGU9XCJmb250LWZhbWlseTogIitvLmZvbnRGYW1pbHkrIjtcIiAiKX1lbHNle2E9cS5leHRlbmQoe3JvbGU6InByZXNlbnRhdGlvbiIsYWx0OiIiLHNyYzp1fSxhKX1pZih0eXBlb2YgYT09PSJvYmplY3QiKXtmb3IocCBpbiBhKXtpZihhLmhhc093blByb3BlcnR5KHApKXt0aGlzLndyaXRlQXR0cmlidXRlRXNjYXBlZChwLGFbcF0pfX19dGhpcy53cml0ZShpPyI+IjoiLz4iKTtpZihpKXtUJiZ0aGlzLndyaXRlKG8uY29udGVudCk7dGhpcy53cml0ZSgiPC9zcGFuPiIpfX07cmV0dXJuIFJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1Jlc2l6ZUhhbmRsZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvR2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0JywnanF1ZXJ5LnNhcC5hY3QnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEsRyxCKXsidXNlIHN0cmljdCI7dmFyIGw9cS5zYXAubG9nLmdldExvZ2dlcigic2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlciIscS5zYXAubG9nLkxldmVsLkVSUk9SKTt2YXIgYz1udWxsO3ZhciBSPUIuZXh0ZW5kKCJzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oQyl7Qi5hcHBseSh0aGlzKTtjPUM7dGhpcy5hUmVzaXplTGlzdGVuZXJzPVtdO3RoaXMuYlJlZ2lzdGVyZWQ9ZmFsc2U7dGhpcy5pSWRDb3VudGVyPTA7dGhpcy5mRGVzdHJveUhhbmRsZXI9cS5wcm94eSh0aGlzLmRlc3Ryb3ksdGhpcyk7cSh3aW5kb3cpLmJpbmQoInVubG9hZCIsdGhpcy5mRGVzdHJveUhhbmRsZXIpO3Euc2FwLmFjdC5hdHRhY2hBY3RpdmF0ZShpLHRoaXMpfX0pO2Z1bmN0aW9uIGEoKXtpZih0aGlzLmJSZWdpc3RlcmVkKXt0aGlzLmJSZWdpc3RlcmVkPWZhbHNlO3NhcC51aS5nZXRDb3JlKCkuZGV0YWNoSW50ZXJ2YWxUaW1lcih0aGlzLmNoZWNrU2l6ZXMsdGhpcyl9fTtmdW5jdGlvbiBpKCl7aWYoIXRoaXMuYlJlZ2lzdGVyZWQmJnRoaXMuYVJlc2l6ZUxpc3RlbmVycy5sZW5ndGg+MCl7dGhpcy5iUmVnaXN0ZXJlZD10cnVlO3NhcC51aS5nZXRDb3JlKCkuYXR0YWNoSW50ZXJ2YWxUaW1lcih0aGlzLmNoZWNrU2l6ZXMsdGhpcyl9fTtSLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGUpe3Euc2FwLmFjdC5kZXRhY2hBY3RpdmF0ZShpLHRoaXMpO3Eod2luZG93KS51bmJpbmQoInVubG9hZCIsdGhpcy5mRGVzdHJveUhhbmRsZXIpO2M9bnVsbDt0aGlzLmFSZXNpemVMaXN0ZW5lcnM9W107YS5hcHBseSh0aGlzKX07Ui5wcm90b3R5cGUuYXR0YWNoTGlzdGVuZXI9ZnVuY3Rpb24ocixoKXt2YXIgST1yIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuQ29udHJvbCxkPUk/ci5nZXREb21SZWYoKTpyLHc9ZD9kLm9mZnNldFdpZHRoOjAsSD1kP2Qub2Zmc2V0SGVpZ2h0OjAscz0icnMtIituZXcgRGF0ZSgpLnZhbHVlT2YoKSsiLSIrdGhpcy5pSWRDb3VudGVyKyssYj0oST8oIkNvbnRyb2wgIityLmdldElkKCkpOihyLmlkP3IuaWQ6U3RyaW5nKHIpKSk7dGhpcy5hUmVzaXplTGlzdGVuZXJzLnB1c2goe3NJZDpzLG9Eb21SZWY6ST9udWxsOnIsb0NvbnRyb2w6ST9yOm51bGwsZkhhbmRsZXI6aCxpV2lkdGg6dyxpSGVpZ2h0OkgsZGJnOmJ9KTtsLmRlYnVnKCJyZWdpc3RlcmVkICIrYik7aS5hcHBseSh0aGlzKTtyZXR1cm4gc307Ui5wcm90b3R5cGUuZGV0YWNoTGlzdGVuZXI9ZnVuY3Rpb24oSSl7dmFyIHQ9dGhpcztxLmVhY2godGhpcy5hUmVzaXplTGlzdGVuZXJzLGZ1bmN0aW9uKGIscil7aWYoci5zSWQ9PUkpe3QuYVJlc2l6ZUxpc3RlbmVycy5zcGxpY2UoYiwxKTtsLmRlYnVnKCJkZXJlZ2lzdGVyZWQgIitJKTtyZXR1cm4gZmFsc2V9fSk7aWYodGhpcy5hUmVzaXplTGlzdGVuZXJzLmxlbmd0aD09MCl7YS5hcHBseSh0aGlzKX19O1IucHJvdG90eXBlLmNoZWNrU2l6ZXM9ZnVuY3Rpb24oKXt2YXIgZD1sLmlzTG9nZ2FibGUoKTtpZihkKXtsLmRlYnVnKCJjaGVja1NpemVzOiIpfXEuZWFjaCh0aGlzLmFSZXNpemVMaXN0ZW5lcnMsZnVuY3Rpb24oYixyKXtpZihyKXt2YXIgQz0hIXIub0NvbnRyb2wsRD1DP3Iub0NvbnRyb2wuZ2V0RG9tUmVmKCk6ci5vRG9tUmVmO2lmKEQmJnEuY29udGFpbnMoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LEQpKXt2YXIgbz1yLmlXaWR0aCxPPXIuaUhlaWdodCxuPUQub2Zmc2V0V2lkdGgsTj1ELm9mZnNldEhlaWdodDtpZihvIT1ufHxPIT1OKXtyLmlXaWR0aD1uO3IuaUhlaWdodD1OO3ZhciBlPXEuRXZlbnQoInJlc2l6ZSIpO2UudGFyZ2V0PUQ7ZS5jdXJyZW50VGFyZ2V0PUQ7ZS5zaXplPXt3aWR0aDpuLGhlaWdodDpOfTtlLm9sZFNpemU9e3dpZHRoOm8saGVpZ2h0Ok99O2UuY29udHJvbD1DP3Iub0NvbnRyb2w6bnVsbDtpZihkKXtsLmRlYnVnKCJyZXNpemUgZGV0ZWN0ZWQgZm9yICciK3IuZGJnKyInOiAiK2Uub2xkU2l6ZS53aWR0aCsieCIrZS5vbGRTaXplLmhlaWdodCsiIC0+ICIrZS5zaXplLndpZHRoKyJ4IitlLnNpemUuaGVpZ2h0KX1yLmZIYW5kbGVyKGUpfX19fSk7aWYoUi5fa2VlcEFjdGl2ZSE9dHJ1ZSYmUi5fa2VlcEFjdGl2ZSE9ZmFsc2Upe1IuX2tlZXBBY3RpdmU9ZmFsc2V9aWYoIXEuc2FwLmFjdC5pc0FjdGl2ZSgpJiYhUi5fa2VlcEFjdGl2ZSl7YS5hcHBseSh0aGlzKX19O1IucmVnaXN0ZXI9ZnVuY3Rpb24ocixoKXtpZighY3x8IWMub1Jlc2l6ZUhhbmRsZXIpe3JldHVybiBudWxsfXJldHVybiBjLm9SZXNpemVIYW5kbGVyLmF0dGFjaExpc3RlbmVyKHIsaCl9O1IuZGVyZWdpc3Rlcj1mdW5jdGlvbihJKXtpZighY3x8IWMub1Jlc2l6ZUhhbmRsZXIpe3JldHVybn1jLm9SZXNpemVIYW5kbGVyLmRldGFjaExpc3RlbmVyKEkpfTtSLmRlcmVnaXN0ZXJBbGxGb3JDb250cm9sPWZ1bmN0aW9uKEMpe2lmKCFjfHwhYy5vUmVzaXplSGFuZGxlcil7cmV0dXJufXZhciBJPVtdO3EuZWFjaChjLm9SZXNpemVIYW5kbGVyLmFSZXNpemVMaXN0ZW5lcnMsZnVuY3Rpb24oYixyKXtpZihyJiZyLm9Db250cm9sJiZyLm9Db250cm9sLmdldElkKCk9PT1DKXtJLnB1c2goci5zSWQpfX0pO3EuZWFjaChJLGZ1bmN0aW9uKGIscyl7Ui5kZXJlZ2lzdGVyKHMpfSl9O3JldHVybiBSfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVUlDb21wb25lbnRNZXRhZGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlVJQ29tcG9uZW50TWV0YWRhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9VSUNvbXBvbmVudE1ldGFkYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Db21wb25lbnRNZXRhZGF0YSddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBVPWZ1bmN0aW9uKGMsbyl7Qy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O1UucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChDLnByb3RvdHlwZSk7VS5wcmVwcm9jZXNzQ2xhc3NJbmZvPWZ1bmN0aW9uKGMpe2lmKGMmJnR5cGVvZiBjLm1ldGFkYXRhPT09InN0cmluZyIpe2MubWV0YWRhdGE9e19zcmM6Yy5tZXRhZGF0YX19cmV0dXJuIGN9O1UucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oYyl7Qy5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncy5jYWxsKHRoaXMsYyk7dmFyIHM9Yy5tZXRhZGF0YTt0aGlzLl9tUm9vdFZpZXc9cy5yb290VmlldztpZih0eXBlb2YgdGhpcy5fbVJvb3RWaWV3PT09InN0cmluZyIpe3RoaXMuX21Sb290Vmlldz17dmlld05hbWU6dGhpcy5fbVJvb3RWaWV3LHR5cGU6c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlhNTH19dGhpcy5fbVJvdXRpbmc9cy5yb3V0aW5nO3ZhciBwPXRoaXMuZ2V0UGFyZW50KCk7aWYocCBpbnN0YW5jZW9mIFUpe2lmKHAuX21Sb290Vmlldyl7dGhpcy5fbVJvb3RWaWV3PXEuZXh0ZW5kKHRydWUse30scC5fbVJvb3RWaWV3LHRoaXMuX21Sb290Vmlldyl9dGhpcy5fbVJvdXRpbmc9cS5leHRlbmQodHJ1ZSx7fSxwLl9tUm91dGluZyx0aGlzLl9tUm91dGluZyl9fTtVLnByb3RvdHlwZS5nZXRSb290Vmlldz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tUm9vdFZpZXd9O1UucHJvdG90eXBlLmdldFJvdXRpbmdDb25maWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbVJvdXRpbmcmJnRoaXMuX21Sb3V0aW5nLmNvbmZpZ307VS5wcm90b3R5cGUuZ2V0Um91dGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21Sb3V0aW5nJiZ0aGlzLl9tUm91dGluZy5yb3V0ZXN9O3JldHVybiBVfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuZGVsZWdhdGUuSXRlbU5hdmlnYXRpb24nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5kZWxlZ2F0ZS5JdGVtTmF2aWdhdGlvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL2RlbGVnYXRlL0l0ZW1OYXZpZ2F0aW9uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBJPUUuZXh0ZW5kKCJzYXAudWkuY29yZS5kZWxlZ2F0ZS5JdGVtTmF2aWdhdGlvbiIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGQsaSxuKXtFLmFwcGx5KHRoaXMpO3RoaXMub0RvbVJlZj1udWxsO2lmKGQpe3RoaXMuc2V0Um9vdERvbVJlZihkKX10aGlzLmFJdGVtRG9tUmVmcz1bXTtpZihpKXt0aGlzLnNldEl0ZW1Eb21SZWZzKGkpfXRoaXMuaVRhYkluZGV4PS0xO3RoaXMuaUFjdGl2ZVRhYkluZGV4PSEhbj8tMTowO3RoaXMuaUZvY3VzZWRJbmRleD0tMTt0aGlzLmlTZWxlY3RlZEluZGV4PS0xO3RoaXMuYkN5Y2xpbmc9dHJ1ZTt0aGlzLmJUYWJsZU1vZGU9ZmFsc2U7dGhpcy5pUGFnZVNpemU9LTE7dGhpcy5fYk1vdXNlRG93bkhhcHBlbmVkPWZhbHNlO3RoaXMub0Rpc2FibGVkTW9kaWZpZXJzPXtzYXBlbmQ6WyJhbHQiLCJzaGlmdCJdLHNhcGhvbWU6WyJhbHQiLCJzaGlmdCJdfX19KTtJLkV2ZW50cz17QmVmb3JlRm9jdXM6IkJlZm9yZUZvY3VzIixBZnRlckZvY3VzOiJBZnRlckZvY3VzIixCb3JkZXJSZWFjaGVkOiJCb3JkZXJSZWFjaGVkIixGb2N1c0FnYWluOiJGb2N1c0FnYWluIn07SS5wcm90b3R5cGUuc2V0RGlzYWJsZWRNb2RpZmllcnM9ZnVuY3Rpb24oZCl7dGhpcy5vRGlzYWJsZWRNb2RpZmllcnM9ZDtyZXR1cm4gdGhpc307SS5wcm90b3R5cGUuZ2V0RGlzYWJsZWRNb2RpZmllcnM9ZnVuY3Rpb24oZCl7cmV0dXJuIHRoaXMub0Rpc2FibGVkTW9kaWZpZXJzfTtJLnByb3RvdHlwZS5oYXNEaXNhYmxlZE1vZGlmaWVyPWZ1bmN0aW9uKGUpe3ZhciBkPXRoaXMub0Rpc2FibGVkTW9kaWZpZXJzW2UudHlwZS5yZXBsYWNlKCJtb2RpZmllcnMiLCIiKV07aWYocS5pc0FycmF5KGQpKXtmb3IodmFyIGk9MDtpPGQubGVuZ3RoO2krKyl7aWYoZVtkW2ldKyJLZXkiXSl7cmV0dXJuIHRydWV9fX1yZXR1cm4gZmFsc2V9O0kucHJvdG90eXBlLnNldFJvb3REb21SZWY9ZnVuY3Rpb24oZCl7dGhpcy5vRG9tUmVmPWQ7aWYoIXEodGhpcy5vRG9tUmVmKS5kYXRhKCJzYXAuSU5JdGVtIikpe2lmKHRoaXMuaUZvY3VzZWRJbmRleD49MCl7cSh0aGlzLm9Eb21SZWYpLmF0dHIoInRhYkluZGV4Iix0aGlzLmlUYWJJbmRleCl9ZWxzZXtxKHRoaXMub0RvbVJlZikuYXR0cigidGFiSW5kZXgiLHRoaXMuaUFjdGl2ZVRhYkluZGV4KX19cSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5JTlJvb3QiLHRoaXMpO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5nZXRSb290RG9tUmVmPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0RvbVJlZn07SS5wcm90b3R5cGUuZ2V0SXRlbURvbVJlZnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hSXRlbURvbVJlZnN9O0kucHJvdG90eXBlLnNldEl0ZW1Eb21SZWZzPWZ1bmN0aW9uKGEpe3RoaXMuYUl0ZW1Eb21SZWZzPWE7Zm9yKHZhciBpPTA7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFJdGVtRG9tUmVmc1tpXSl7dmFyICQ9cSh0aGlzLmFJdGVtRG9tUmVmc1tpXSk7aWYoaT09dGhpcy5pRm9jdXNlZEluZGV4JiYhJC5kYXRhKCJzYXAuSU5Sb290IikpeyQuYXR0cigidGFiSW5kZXgiLHRoaXMuaUFjdGl2ZVRhYkluZGV4KX1lbHNlIGlmKCQuYXR0cigidGFiaW5kZXgiKT09IjAiKXskLmF0dHIoInRhYkluZGV4IiwtMSl9JC5kYXRhKCJzYXAuSU5JdGVtIix0cnVlKTskLmRhdGEoInNhcC5Jbk5hdkFyZWEiLHRydWUpO2lmKCQuZGF0YSgic2FwLklOUm9vdCIpJiZpIT10aGlzLmlGb2N1c2VkSW5kZXgpeyQuZGF0YSgic2FwLklOUm9vdCIpLnNldE5lc3RlZEl0ZW1zVGFiaW5kZXgoKX19fXJldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXRJdGVtc1RhYmluZGV4PWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFJdGVtRG9tUmVmc1tpXSl7dmFyICQ9cSh0aGlzLmFJdGVtRG9tUmVmc1tpXSk7aWYoJC5pcygiOnNhcEZvY3VzYWJsZSIpKXtpZihpPT10aGlzLmlGb2N1c2VkSW5kZXgmJiEkLmRhdGEoInNhcC5JTlJvb3QiKSl7JC5hdHRyKCJ0YWJJbmRleCIsdGhpcy5pQWN0aXZlVGFiSW5kZXgpfWVsc2V7JC5hdHRyKCJ0YWJJbmRleCIsLTEpfX19fXJldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXROZXN0ZWRJdGVtc1RhYmluZGV4PWZ1bmN0aW9uKCl7aWYocSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5JTkl0ZW0iKSl7Zm9yKHZhciBpPTA7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFJdGVtRG9tUmVmc1tpXSYmcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuYXR0cigidGFiaW5kZXgiKT09IjAiKXtxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5hdHRyKCJ0YWJJbmRleCIsLTEpfX19cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLm9Eb21SZWYpe3EodGhpcy5vRG9tUmVmKS5yZW1vdmVEYXRhKCJzYXAuSU5Sb290Iik7dGhpcy5vRG9tUmVmPW51bGx9aWYodGhpcy5hSXRlbURvbVJlZnMpe2Zvcih2YXIgaT0wO2k8dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoO2krKyl7aWYodGhpcy5hSXRlbURvbVJlZnNbaV0pe3EodGhpcy5hSXRlbURvbVJlZnNbaV0pLnJlbW92ZURhdGEoInNhcC5JTkl0ZW0iKTtxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5yZW1vdmVEYXRhKCJzYXAuSW5OYXZBcmVhIil9fXRoaXMuYUl0ZW1Eb21SZWZzPW51bGx9dGhpcy5fYkl0ZW1UYWJJbmRleD11bmRlZmluZWR9O0kucHJvdG90eXBlLnNldEN5Y2xpbmc9ZnVuY3Rpb24oYyl7dGhpcy5iQ3ljbGluZz1jO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXRUYWJsZU1vZGU9ZnVuY3Rpb24odCxUKXt0aGlzLmJUYWJsZU1vZGU9dDt0aGlzLmJUYWJsZUxpc3Q9dD9UOmZhbHNlO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXRQYWdlU2l6ZT1mdW5jdGlvbihwKXt0aGlzLmlQYWdlU2l6ZT1wO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXRTZWxlY3RlZEluZGV4PWZ1bmN0aW9uKGkpe3RoaXMuaVNlbGVjdGVkSW5kZXg9aTtyZXR1cm4gdGhpc307SS5wcm90b3R5cGUuc2V0Q29sdW1ucz1mdW5jdGlvbihjLG4pe3RoaXMuaUNvbHVtbnM9Yzt0aGlzLmJOb0NvbHVtbkNoYW5nZT1uO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXRIb21lRW5kQ29sdW1uTW9kZT1mdW5jdGlvbihzLGMpe3RoaXMuX2JTdGF5SW5Sb3c9czt0aGlzLl9iQ3RybEVuYWJsZWQ9Y307SS5wcm90b3R5cGUuZm9jdXNJdGVtPWZ1bmN0aW9uKGksZSl7cS5zYXAubG9nLmluZm8oIkZvY3VzSXRlbTogIitpKyIgaUZvY3VzZWRJbmRleDogIit0aGlzLmlGb2N1c2VkSW5kZXgsImZvY3VzSXRlbSIsIkl0ZW1OYXZpZ2F0aW9uIik7aWYoaT09dGhpcy5pRm9jdXNlZEluZGV4JiZ0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdPT1kb2N1bWVudC5hY3RpdmVFbGVtZW50KXt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5Gb2N1c0FnYWluLHtpbmRleDppLGV2ZW50OmV9KTtyZXR1cm59aWYoIXRoaXMuYUl0ZW1Eb21SZWZzW2ldfHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjpzYXBGb2N1c2FibGUiKSl7cmV0dXJufXRoaXMuZmlyZUV2ZW50KEkuRXZlbnRzLkJlZm9yZUZvY3VzLHtpbmRleDppLGV2ZW50OmV9KTt0aGlzLnNldEZvY3VzZWRJbmRleChpKTt0aGlzLmJJU2V0Rm9jdXM9dHJ1ZTtpZihxKHRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF0pLmRhdGEoInNhcC5JTlJvb3QiKSYmZSl7dmFyIG89cSh0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdKS5kYXRhKCJzYXAuSU5Sb290Iik7by5fc0ZvY3VzRXZlbnQ9ZS50eXBlfXEuc2FwLmxvZy5pbmZvKCJTZXQgRm9jdXMgb24gSUQ6ICIrdGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XS5pZCwiZm9jdXNJdGVtIiwiSXRlbU5hdmlnYXRpb24iKTtxLnNhcC5mb2N1cyh0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdKTt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5BZnRlckZvY3VzLHtpbmRleDppLGV2ZW50OmV9KX07SS5wcm90b3R5cGUuc2V0Rm9jdXNlZEluZGV4PWZ1bmN0aW9uKGkpe3ZhciAkO2lmKGk8MCl7aT0wfWlmKGk+dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTEpe2k9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTF9cSh0aGlzLm9Eb21SZWYpLmF0dHIoInRhYkluZGV4Iix0aGlzLmlUYWJJbmRleCk7aWYodGhpcy5pRm9jdXNlZEluZGV4IT09LTEmJnRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aD50aGlzLmlGb2N1c2VkSW5kZXgpe3EodGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XSkuYXR0cigidGFiSW5kZXgiLC0xKTskPXEodGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XSk7aWYoJC5kYXRhKCJzYXAuSU5Sb290IikmJmkhPXRoaXMuaUZvY3VzZWRJbmRleCl7cSgkLmRhdGEoInNhcC5JTlJvb3QiKS5hSXRlbURvbVJlZnNbJC5kYXRhKCJzYXAuSU5Sb290IikuaUZvY3VzZWRJbmRleF0pLmF0dHIoInRhYkluZGV4IiwtMSl9fXRoaXMuaUZvY3VzZWRJbmRleD1pO3ZhciBmPXRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF07JD1xKHRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF0pO2lmKCEkLmRhdGEoInNhcC5JTlJvb3QiKSl7cShmKS5hdHRyKCJ0YWJJbmRleCIsdGhpcy5pQWN0aXZlVGFiSW5kZXgpfXJldHVybiB0aGlzfTtJLnByb3RvdHlwZS5nZXRGb2N1c2VkRG9tUmVmPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF19O0kucHJvdG90eXBlLmdldEZvY3VzZWRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlGb2N1c2VkSW5kZXh9O0kucHJvdG90eXBlLm9uZm9jdXNpbj1mdW5jdGlvbihlKXt2YXIgcz1lLnRhcmdldDtpZihzPT10aGlzLm9Eb21SZWYpe2lmKCF0aGlzLl9iSXRlbVRhYkluZGV4KXt0aGlzLnNldEl0ZW1zVGFiaW5kZXgoKTt0aGlzLl9iSXRlbVRhYkluZGV4PXRydWV9aWYodGhpcy5fYk1vdXNlRG93bkhhcHBlbmVkKXtyZXR1cm59dmFyIGE7aWYocSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5JTkl0ZW0iKSYmdGhpcy5fc0ZvY3VzRXZlbnQmJiFxKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLkluTmF2QXJlYSIpKXtzd2l0Y2godGhpcy5fc0ZvY3VzRXZlbnQpe2Nhc2Uic2FwbmV4dCI6YT0wO2JyZWFrO2Nhc2Uic2FwcHJldmlvdXMiOmE9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTE7YnJlYWs7ZGVmYXVsdDphPXRoaXMuaVNlbGVjdGVkSW5kZXghPS0xP3RoaXMuaVNlbGVjdGVkSW5kZXg6KHRoaXMuaUZvY3VzZWRJbmRleCE9LTE/dGhpcy5pRm9jdXNlZEluZGV4OjApO2JyZWFrfXRoaXMuX3NGb2N1c0V2ZW50PXVuZGVmaW5lZH1lbHNle2E9dGhpcy5pU2VsZWN0ZWRJbmRleCE9LTE/dGhpcy5pU2VsZWN0ZWRJbmRleDoodGhpcy5pRm9jdXNlZEluZGV4IT0tMT90aGlzLmlGb2N1c2VkSW5kZXg6MCl9dGhpcy5mb2N1c0l0ZW0oYSxlKTtpZih0aGlzLmlGb2N1c2VkSW5kZXg9PS0xKXtmb3IodmFyIGk9YSsxO2k8dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoO2krKyl7dGhpcy5mb2N1c0l0ZW0oaSxlKTtpZih0aGlzLmlGb2N1c2VkSW5kZXg9PWkpe2JyZWFrfX1pZih0aGlzLmlGb2N1c2VkSW5kZXg9PS0xJiZhPjApe2Zvcih2YXIgaT1hLTE7aT49MDtpLS0pe3RoaXMuZm9jdXNJdGVtKGksZSk7aWYodGhpcy5pRm9jdXNlZEluZGV4PT1pKXticmVha319fX1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX1lbHNlIGlmKCF0aGlzLmJJU2V0Rm9jdXMpe2lmKHRoaXMuYUl0ZW1Eb21SZWZzJiZlLnRhcmdldCE9dGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XSl7Zm9yKHZhciBpPTA7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXtpZihlLnRhcmdldD09dGhpcy5hSXRlbURvbVJlZnNbaV0pe3RoaXMuZm9jdXNJdGVtKGksZSk7YnJlYWt9fX1lbHNle3RoaXMuZmlyZUV2ZW50KEkuRXZlbnRzLkFmdGVyRm9jdXMse2luZGV4OnRoaXMuaUZvY3VzZWRJbmRleCxldmVudDplfSl9fXRoaXMuYklTZXRGb2N1cz1mYWxzZX07SS5wcm90b3R5cGUub25zYXBmb2N1c2xlYXZlPWZ1bmN0aW9uKGUpe2lmKCFlLnJlbGF0ZWRDb250cm9sSWR8fCFxLnNhcC5jb250YWluc09yRXF1YWxzKHRoaXMub0RvbVJlZixzYXAudWkuZ2V0Q29yZSgpLmJ5SWQoZS5yZWxhdGVkQ29udHJvbElkKS5nZXRGb2N1c0RvbVJlZigpKSl7dGhpcy5zZXRGb2N1c2VkSW5kZXgodGhpcy5pU2VsZWN0ZWRJbmRleCE9LTE/dGhpcy5pU2VsZWN0ZWRJbmRleDoodGhpcy5pRm9jdXNlZEluZGV4IT0tMT90aGlzLmlGb2N1c2VkSW5kZXg6MCkpO2lmKHEodGhpcy5vRG9tUmVmKS5kYXRhKCJzYXAuSU5JdGVtIikpe3ZhciBwLGQ9cSh0aGlzLm9Eb21SZWYpO3doaWxlKCFwKXtkPWQucGFyZW50KCk7aWYoZC5kYXRhKCJzYXAuSU5Sb290Iikpe3A9ZC5nZXQoMCl9fWlmKCFlLnJlbGF0ZWRDb250cm9sSWR8fHEuc2FwLmNvbnRhaW5zT3JFcXVhbHMocCxzYXAudWkuZ2V0Q29yZSgpLmJ5SWQoZS5yZWxhdGVkQ29udHJvbElkKS5nZXRGb2N1c0RvbVJlZigpKSl7cSh0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdKS5hdHRyKCJ0YWJJbmRleCIsLTEpfX12YXIgZD1xKHRoaXMub0RvbVJlZik7aWYoZC5kYXRhKCJzYXAuSW5OYXZBcmVhIik9PT1mYWxzZSl7ZC5kYXRhKCJzYXAuSW5OYXZBcmVhIix0cnVlKX19fTtJLnByb3RvdHlwZS5vbm1vdXNlZG93bj1mdW5jdGlvbihlKXt2YXIgcz1lLnRhcmdldDtpZihxLnNhcC5jb250YWluc09yRXF1YWxzKHRoaXMub0RvbVJlZixzKSl7Zm9yKHZhciBpPTA7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXt2YXIgbz10aGlzLmFJdGVtRG9tUmVmc1tpXTtpZihxLnNhcC5jb250YWluc09yRXF1YWxzKG8scykpe2lmKCF0aGlzLmJUYWJsZU1vZGUpe3RoaXMuZm9jdXNJdGVtKGksZSl9ZWxzZXtpZihvPT09c3x8IXEocykuaXMoIjpzYXBGb2N1c2FibGUiKSl7dGhpcy5mb2N1c0l0ZW0oaSxlKX19cmV0dXJufX1pZihzPT10aGlzLm9Eb21SZWYpe3RoaXMuX2JNb3VzZURvd25IYXBwZW5lZD10cnVlO3ZhciB0PXRoaXM7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0Ll9iTW91c2VEb3duSGFwcGVuZWQ9ZmFsc2V9LDIwKX19fTtJLnByb3RvdHlwZS5vbnNhcG5leHQ9ZnVuY3Rpb24oZSl7aWYoIXEuc2FwLmNvbnRhaW5zT3JFcXVhbHModGhpcy5vRG9tUmVmLGUudGFyZ2V0KSl7cmV0dXJufWlmKHEodGhpcy5vRG9tUmVmKS5kYXRhKCJzYXAuSW5OYXZBcmVhIikpe3JldHVybn1pZih0aGlzLmJUYWJsZU1vZGUmJnEuaW5BcnJheShlLnRhcmdldCx0aGlzLmFJdGVtRG9tUmVmcyk9PT0tMSl7cmV0dXJufXZhciBpPXRoaXMuaUZvY3VzZWRJbmRleCxmPXRydWUsYj1mYWxzZTtpZihpPi0xKXtpZih0aGlzLmJUYWJsZU1vZGUpe3ZhciByPXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC90aGlzLmlDb2x1bW5zLFI9TWF0aC5mbG9vcihpL3RoaXMuaUNvbHVtbnMpLGM9aSV0aGlzLmlDb2x1bW5zO2lmKGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTil7aWYoUjxyLTEpe2krPXRoaXMuaUNvbHVtbnN9fWVsc2V7aWYoYzx0aGlzLmlDb2x1bW5zLTEpe2krPTF9fX1lbHNle2Rve2lmKHRoaXMuaUNvbHVtbnM+MSYmZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19ET1dOKXtpZigoaSt0aGlzLmlDb2x1bW5zKT49dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoKXtpZighdGhpcy5iTm9Db2x1bW5DaGFuZ2Upe2lmKChpJXRoaXMuaUNvbHVtbnMpPCh0aGlzLmlDb2x1bW5zLTEpKXtpPShpJXRoaXMuaUNvbHVtbnMpKzF9ZWxzZSBpZih0aGlzLmJDeWNsaW5nKXtpPTB9fWVsc2V7aT10aGlzLmlGb2N1c2VkSW5kZXg7Yj10cnVlfX1lbHNle2k9aSt0aGlzLmlDb2x1bW5zfX1lbHNle2lmKGk9PXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC0xKXtpZihxKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLklOSXRlbSIpKXtyZXR1cm59ZWxzZSBpZih0aGlzLmJDeWNsaW5nKXtpPTB9ZWxzZXtpPXRoaXMuaUZvY3VzZWRJbmRleDtiPXRydWV9fWVsc2V7aSsrfX1pZihpPT09dGhpcy5pRm9jdXNlZEluZGV4KXtpZihmKXtmPWZhbHNlfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJJdGVtTmF2aWdhdGlvbiBoYXMgbm8gdmlzaWJsZS9leGlzdGluZyBpdGVtcyBhbmQgaXMgaGVuY2UgdW5hYmxlIHRvIHNlbGVjdCB0aGUgbmV4dCBvbmUiKX19fXdoaWxlKCF0aGlzLmFJdGVtRG9tUmVmc1tpXXx8IXEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmlzKCI6dmlzaWJsZSIpfHxxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5jc3MoInZpc2liaWxpdHkiKT09PSJoaWRkZW4ifHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjpzYXBGb2N1c2FibGUiKSl9dGhpcy5mb2N1c0l0ZW0oaSxlKTtpZihiKXt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5Cb3JkZXJSZWFjaGVkLHtpbmRleDppLGV2ZW50OmV9KX1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX19O0kucHJvdG90eXBlLm9uc2FwbmV4dG1vZGlmaWVycz1mdW5jdGlvbihlKXtpZih0aGlzLmhhc0Rpc2FibGVkTW9kaWZpZXIoZSkpe3JldHVybn10aGlzLm9uc2FwbmV4dChlKX07SS5wcm90b3R5cGUub25zYXBwcmV2aW91cz1mdW5jdGlvbihlKXtpZighcS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLm9Eb21SZWYsZS50YXJnZXQpKXtyZXR1cm59aWYocSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5Jbk5hdkFyZWEiKSl7cmV0dXJufWlmKHRoaXMuYlRhYmxlTW9kZSYmcS5pbkFycmF5KGUudGFyZ2V0LHRoaXMuYUl0ZW1Eb21SZWZzKT09PS0xKXtyZXR1cm59dmFyIGk9dGhpcy5pRm9jdXNlZEluZGV4LGY9dHJ1ZSxiPWZhbHNlO2lmKGk+LTEpe2lmKHRoaXMuYlRhYmxlTW9kZSl7dmFyIHI9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoL3RoaXMuaUNvbHVtbnMsUj1NYXRoLmZsb29yKGkvdGhpcy5pQ29sdW1ucyksYz1pJXRoaXMuaUNvbHVtbnM7aWYoZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCl7aWYoUj4wKXtpLT10aGlzLmlDb2x1bW5zfX1lbHNle2lmKGM+MCl7aS09MX19fWVsc2V7ZG97aWYodGhpcy5pQ29sdW1ucz4xJiZlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX1VQKXtpZigoaS10aGlzLmlDb2x1bW5zKTwwKXtpZighdGhpcy5iTm9Db2x1bW5DaGFuZ2Upe3ZhciBjPTA7aWYoKGkldGhpcy5pQ29sdW1ucyk+MCl7Yz0oaSV0aGlzLmlDb2x1bW5zKS0xfWVsc2UgaWYodGhpcy5iQ3ljbGluZyl7Yz10aGlzLmlDb2x1bW5zLTF9aWYoaT09PTAmJmM9PT0wKXtpPTB9ZWxzZXt2YXIgYT1NYXRoLmNlaWwodGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoL3RoaXMuaUNvbHVtbnMpO2k9YysoKGEtMSkqdGhpcy5pQ29sdW1ucyk7aWYoaT49dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoKXtpPWktdGhpcy5pQ29sdW1uc319fWVsc2V7aT10aGlzLmlGb2N1c2VkSW5kZXg7Yj10cnVlfX1lbHNle2k9aS10aGlzLmlDb2x1bW5zfX1lbHNle2lmKGk9PTApe2lmKHEodGhpcy5vRG9tUmVmKS5kYXRhKCJzYXAuSU5JdGVtIikpe3JldHVybn1lbHNlIGlmKHRoaXMuYkN5Y2xpbmcpe2k9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTF9ZWxzZXtpPXRoaXMuaUZvY3VzZWRJbmRleDtiPXRydWV9fWVsc2V7aS0tfX1pZihpPT10aGlzLmlGb2N1c2VkSW5kZXgpe2lmKGYpe2Y9ZmFsc2V9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIkl0ZW1OYXZpZ2F0aW9uIGhhcyBubyB2aXNpYmxlL2V4aXN0aW5nIGl0ZW1zIGFuZCBpcyBoZW5jZSB1bmFibGUgdG8gc2VsZWN0IHRoZSBwcmV2aW91cyBvbmUiKX19fXdoaWxlKCF0aGlzLmFJdGVtRG9tUmVmc1tpXXx8IXEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmlzKCI6dmlzaWJsZSIpfHxxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5jc3MoInZpc2liaWxpdHkiKT09PSJoaWRkZW4ifHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjpzYXBGb2N1c2FibGUiKSl9dGhpcy5mb2N1c0l0ZW0oaSxlKTtpZihiKXt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5Cb3JkZXJSZWFjaGVkLHtpbmRleDppLGV2ZW50OmV9KX1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX19O0kucHJvdG90eXBlLm9uc2FwcHJldmlvdXNtb2RpZmllcnM9ZnVuY3Rpb24oZSl7aWYodGhpcy5oYXNEaXNhYmxlZE1vZGlmaWVyKGUpKXtyZXR1cm59dGhpcy5vbnNhcHByZXZpb3VzKGUpfTtJLnByb3RvdHlwZS5vbnNhcHBhZ2V1cD1mdW5jdGlvbihlKXtpZighcS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLm9Eb21SZWYsZS50YXJnZXQpKXtyZXR1cm59aWYodGhpcy5iVGFibGVNb2RlJiZxLmluQXJyYXkoZS50YXJnZXQsdGhpcy5hSXRlbURvbVJlZnMpPT09LTEpe3JldHVybn12YXIgaT0wO3ZhciBiPWZhbHNlO2lmKHRoaXMuaVBhZ2VTaXplPjApe2k9dGhpcy5pRm9jdXNlZEluZGV4O2lmKGk+LTEpe2k9aS10aGlzLmlQYWdlU2l6ZTt3aGlsZShpPjAmJiFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnNhcEZvY3VzYWJsZSIpKXtpLS19aWYoaTwwKXtpZighdGhpcy5iTm9Db2x1bW5DaGFuZ2Upe2k9MH1lbHNle2k9dGhpcy5pRm9jdXNlZEluZGV4O2I9dHJ1ZX19dGhpcy5mb2N1c0l0ZW0oaSxlKX19ZWxzZSBpZih0aGlzLmJUYWJsZU1vZGUpe2k9dGhpcy5pRm9jdXNlZEluZGV4JXRoaXMuaUNvbHVtbnM7dGhpcy5mb2N1c0l0ZW0oaSxlKX1pZihiKXt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5Cb3JkZXJSZWFjaGVkLHtpbmRleDppLGV2ZW50OmV9KX1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX07SS5wcm90b3R5cGUub25zYXBwYWdlZG93bj1mdW5jdGlvbihlKXtpZighcS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLm9Eb21SZWYsZS50YXJnZXQpKXtyZXR1cm59aWYodGhpcy5iVGFibGVNb2RlJiZxLmluQXJyYXkoZS50YXJnZXQsdGhpcy5hSXRlbURvbVJlZnMpPT09LTEpe3JldHVybn12YXIgaT0wO3ZhciBiPWZhbHNlO2lmKHRoaXMuaVBhZ2VTaXplPjApe2k9dGhpcy5pRm9jdXNlZEluZGV4O2lmKGk+LTEpe2k9aSt0aGlzLmlQYWdlU2l6ZTt3aGlsZShpPHRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC0xJiYhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjpzYXBGb2N1c2FibGUiKSl7aSsrfWlmKGk+dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTEpe2lmKCF0aGlzLmJOb0NvbHVtbkNoYW5nZSl7aT10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMX1lbHNle2k9dGhpcy5pRm9jdXNlZEluZGV4O2I9dHJ1ZX19dGhpcy5mb2N1c0l0ZW0oaSxlKX19ZWxzZSBpZih0aGlzLmJUYWJsZU1vZGUpe3ZhciByPXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC90aGlzLmlDb2x1bW5zLGM9dGhpcy5pRm9jdXNlZEluZGV4JXRoaXMuaUNvbHVtbnM7aT0oci0xKSp0aGlzLmlDb2x1bW5zK2M7dGhpcy5mb2N1c0l0ZW0oaSxlKX1pZihiKXt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5Cb3JkZXJSZWFjaGVkLHtpbmRleDppLGV2ZW50OmV9KX1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX07SS5wcm90b3R5cGUub25zYXBob21lPWZ1bmN0aW9uKGUpe2lmKCFxLnNhcC5jb250YWluc09yRXF1YWxzKHRoaXMub0RvbVJlZixlLnRhcmdldCkpe3JldHVybn1pZih0aGlzLmJUYWJsZU1vZGUmJnEuaW5BcnJheShlLnRhcmdldCx0aGlzLmFJdGVtRG9tUmVmcyk9PT0tMSl7cmV0dXJufXZhciBpPTA7aWYodGhpcy5iVGFibGVNb2RlKXtpZighdGhpcy5iVGFibGVMaXN0JiYhKGUubWV0YUtleXx8ZS5jdHJsS2V5KSl7dmFyIHI9TWF0aC5mbG9vcih0aGlzLmlGb2N1c2VkSW5kZXgvdGhpcy5pQ29sdW1ucyk7aT1yKnRoaXMuaUNvbHVtbnN9fWVsc2V7aWYoISEoZS5tZXRhS2V5fHxlLmN0cmxLZXkpJiYhdGhpcy5fYkN0cmxFbmFibGVkKXtyZXR1cm59aWYodGhpcy5fYlN0YXlJblJvdyYmISh0aGlzLl9iQ3RybEVuYWJsZWQmJihlLm1ldGFLZXl8fGUuY3RybEtleSkpJiZ0aGlzLmlDb2x1bW5zPjApe3ZhciByPU1hdGguZmxvb3IodGhpcy5pRm9jdXNlZEluZGV4L3RoaXMuaUNvbHVtbnMpO2k9cip0aGlzLmlDb2x1bW5zfWVsc2V7d2hpbGUoIXRoaXMuYUl0ZW1Eb21SZWZzW2ldfHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjp2aXNpYmxlIil8fHEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmNzcygidmlzaWJpbGl0eSIpPT09ImhpZGRlbiJ8fCFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnNhcEZvY3VzYWJsZSIpKXtpKys7aWYoaT09dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoKXtyZXR1cm59fX19dGhpcy5mb2N1c0l0ZW0oaSxlKTtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX07SS5wcm90b3R5cGUub25zYXBob21lbW9kaWZpZXJzPWZ1bmN0aW9uKGUpe2lmKHRoaXMuaGFzRGlzYWJsZWRNb2RpZmllcihlKSl7cmV0dXJufXRoaXMub25zYXBob21lKGUpfTtJLnByb3RvdHlwZS5vbnNhcGVuZD1mdW5jdGlvbihlKXtpZighcS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLm9Eb21SZWYsZS50YXJnZXQpKXtyZXR1cm59aWYodGhpcy5iVGFibGVNb2RlJiZxLmluQXJyYXkoZS50YXJnZXQsdGhpcy5hSXRlbURvbVJlZnMpPT09LTEpe3JldHVybn12YXIgaT10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMTtpZih0aGlzLmJUYWJsZU1vZGUpe2lmKCF0aGlzLmJUYWJsZUxpc3QmJiEoZS5tZXRhS2V5fHxlLmN0cmxLZXkpKXt2YXIgcj1NYXRoLmZsb29yKHRoaXMuaUZvY3VzZWRJbmRleC90aGlzLmlDb2x1bW5zKTtpPXIqdGhpcy5pQ29sdW1ucyt0aGlzLmlDb2x1bW5zLTF9fWVsc2V7aWYoISEoZS5tZXRhS2V5fHxlLmN0cmxLZXkpJiYhdGhpcy5fYkN0cmxFbmFibGVkKXtyZXR1cm59aWYodGhpcy5fYlN0YXlJblJvdyYmISh0aGlzLl9iQ3RybEVuYWJsZWQmJihlLm1ldGFLZXl8fGUuY3RybEtleSkpJiZ0aGlzLmlDb2x1bW5zPjApe3ZhciByPU1hdGguZmxvb3IodGhpcy5pRm9jdXNlZEluZGV4L3RoaXMuaUNvbHVtbnMpO2k9KHIrMSkqdGhpcy5pQ29sdW1ucy0xO2lmKGk+PXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aCl7aT10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMX19ZWxzZXt3aGlsZSghdGhpcy5hSXRlbURvbVJlZnNbaV18fCFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnZpc2libGUiKXx8cSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuY3NzKCJ2aXNpYmlsaXR5Iik9PSJoaWRkZW4ifHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjpzYXBGb2N1c2FibGUiKSl7aS0tO2lmKGk8MCl7cmV0dXJufX19fXRoaXMuZm9jdXNJdGVtKGksZSk7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9O0kucHJvdG90eXBlLm9uc2FwZW5kbW9kaWZpZXJzPWZ1bmN0aW9uKGUpe2lmKHRoaXMuaGFzRGlzYWJsZWRNb2RpZmllcihlKSl7cmV0dXJufXRoaXMub25zYXBlbmQoZSl9O0kucHJvdG90eXBlLnNldFRhYkluZGV4MD1mdW5jdGlvbigpe3RoaXMuaVRhYkluZGV4PTA7dGhpcy5pQWN0aXZlVGFiSW5kZXg9MH07SS5wcm90b3R5cGUub25rZXl1cD1mdW5jdGlvbihlKXtpZihlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkYyKXt2YXIgZD1xKHRoaXMub0RvbVJlZik7aWYoZC5kYXRhKCJzYXAuSW5OYXZBcmVhIikpe2QuZGF0YSgic2FwLkluTmF2QXJlYSIsZmFsc2UpfWVsc2UgaWYoZC5kYXRhKCJzYXAuSW5OYXZBcmVhIik9PT1mYWxzZSl7ZC5kYXRhKCJzYXAuSW5OYXZBcmVhIix0cnVlKX1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX19O3JldHVybiBJfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuZm9ybWF0LkRhdGVGb3JtYXQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5mb3JtYXQuRGF0ZUZvcm1hdCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL2Zvcm1hdC9EYXRlRm9ybWF0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvTG9jYWxlRGF0YSddLGZ1bmN0aW9uKHEsTCl7InVzZSBzdHJpY3QiO3ZhciBEPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCl9O0Qub0RhdGVJbmZvPXtvRGVmYXVsdEZvcm1hdE9wdGlvbnM6e3N0eWxlOiJtZWRpdW0ifSxhRmFsbGJhY2tGb3JtYXRPcHRpb25zOlt7c3R5bGU6InNob3J0In0se3N0eWxlOiJtZWRpdW0ifSx7cGF0dGVybjoieXl5eS1NTS1kZCJ9LHtwYXR0ZXJuOiJ5eXl5TU1kZCJ9XSxnZXRQYXR0ZXJuOmZ1bmN0aW9uKGwscyl7cmV0dXJuIGwuZ2V0RGF0ZVBhdHRlcm4ocyl9LG9SZXF1aXJlZFBhcnRzOnsidGV4dCI6dHJ1ZSwieWVhciI6dHJ1ZSwid2Vla1llYXIiOnRydWUsIm1vbnRoIjp0cnVlLCJkYXkiOnRydWV9fTtELm9EYXRlVGltZUluZm89e29EZWZhdWx0Rm9ybWF0T3B0aW9uczp7c3R5bGU6Im1lZGl1bSJ9LGFGYWxsYmFja0Zvcm1hdE9wdGlvbnM6W3tzdHlsZToic2hvcnQifSx7c3R5bGU6Im1lZGl1bSJ9LHtwYXR0ZXJuOiJ5eXl5LU1NLWRkJ1QnaGg6bW06c3MifSx7cGF0dGVybjoieXl5eU1NZGQgaGhtbXNzIn1dLGdldFBhdHRlcm46ZnVuY3Rpb24obCxzKXt2YXIgZD1sLmdldERhdGVUaW1lUGF0dGVybihzKSxhPWwuZ2V0RGF0ZVBhdHRlcm4ocyksdD1sLmdldFRpbWVQYXR0ZXJuKHMpO3JldHVybiBkLnJlcGxhY2UoInsxfSIsYSkucmVwbGFjZSgiezB9Iix0KX0sb1JlcXVpcmVkUGFydHM6eyJ0ZXh0Ijp0cnVlLCJ5ZWFyIjp0cnVlLCJ3ZWVrWWVhciI6dHJ1ZSwibW9udGgiOnRydWUsImRheSI6dHJ1ZSwiaG91cjBfMjMiOnRydWUsImhvdXIxXzI0Ijp0cnVlLCJob3VyMF8xMSI6dHJ1ZSwiaG91cjFfMTIiOnRydWV9fTtELm9UaW1lSW5mbz17b0RlZmF1bHRGb3JtYXRPcHRpb25zOntzdHlsZToibWVkaXVtIn0sYUZhbGxiYWNrRm9ybWF0T3B0aW9uczpbe3N0eWxlOiJzaG9ydCJ9LHtzdHlsZToibWVkaXVtIn0se3BhdHRlcm46ImhoOm1tOnNzIn0se3BhdHRlcm46ImhobW1zcyJ9XSxnZXRQYXR0ZXJuOmZ1bmN0aW9uKGwscyl7cmV0dXJuIGwuZ2V0VGltZVBhdHRlcm4ocyl9LG9SZXF1aXJlZFBhcnRzOnsidGV4dCI6dHJ1ZSwiaG91cjBfMjMiOnRydWUsImhvdXIxXzI0Ijp0cnVlLCJob3VyMF8xMSI6dHJ1ZSwiaG91cjFfMTIiOnRydWV9fTtELmdldEluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7cmV0dXJuIHRoaXMuZ2V0RGF0ZUluc3RhbmNlKGYsbCl9O0QuZ2V0RGF0ZUluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7cmV0dXJuIHRoaXMuY3JlYXRlSW5zdGFuY2UoZixsLHRoaXMub0RhdGVJbmZvKX07RC5nZXREYXRlVGltZUluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7cmV0dXJuIHRoaXMuY3JlYXRlSW5zdGFuY2UoZixsLHRoaXMub0RhdGVUaW1lSW5mbyl9O0QuZ2V0VGltZUluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7cmV0dXJuIHRoaXMuY3JlYXRlSW5zdGFuY2UoZixsLHRoaXMub1RpbWVJbmZvKX07RC5jcmVhdGVJbnN0YW5jZT1mdW5jdGlvbihmLGwsSSl7dmFyIEY9cS5zYXAubmV3T2JqZWN0KHRoaXMucHJvdG90eXBlKTtpZihmIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuTG9jYWxlKXtsPWY7Zj11bmRlZmluZWR9aWYoIWwpe2w9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0Rm9ybWF0U2V0dGluZ3MoKS5nZXRGb3JtYXRMb2NhbGUoKX1GLm9Mb2NhbGU9bDtGLm9Mb2NhbGVEYXRhPUwuZ2V0SW5zdGFuY2UobCk7Ri5vRm9ybWF0T3B0aW9ucz1xLmV4dGVuZChmYWxzZSx7fSxJLm9EZWZhdWx0Rm9ybWF0T3B0aW9ucyxmKTtpZighRi5vRm9ybWF0T3B0aW9ucy5wYXR0ZXJuKXtGLm9Gb3JtYXRPcHRpb25zLnBhdHRlcm49SS5nZXRQYXR0ZXJuKEYub0xvY2FsZURhdGEsRi5vRm9ybWF0T3B0aW9ucy5zdHlsZSl9aWYoIUkuYUZhbGxiYWNrRm9ybWF0cyl7SS5hRmFsbGJhY2tGb3JtYXRzPVtdO3EuZWFjaChJLmFGYWxsYmFja0Zvcm1hdE9wdGlvbnMsZnVuY3Rpb24oaSxmKXt2YXIgbz1ELmNyZWF0ZUluc3RhbmNlKGYsbCxJKTtvLmJJc0ZhbGxiYWNrPXRydWU7SS5hRmFsbGJhY2tGb3JtYXRzLnB1c2gobyl9KX1GLmFGYWxsYmFja0Zvcm1hdHM9SS5hRmFsbGJhY2tGb3JtYXRzO0Yub1JlcXVpcmVkUGFydHM9SS5vUmVxdWlyZWRQYXJ0cztGLmluaXQoKTtyZXR1cm4gRn07RC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuYU1vbnRoc0FiYnJldj10aGlzLm9Mb2NhbGVEYXRhLmdldE1vbnRocygiYWJicmV2aWF0ZWQiKTt0aGlzLmFNb250aHNXaWRlPXRoaXMub0xvY2FsZURhdGEuZ2V0TW9udGhzKCJ3aWRlIik7dGhpcy5hTW9udGhzQWJicmV2U3Q9dGhpcy5vTG9jYWxlRGF0YS5nZXRNb250aHNTdGFuZEFsb25lKCJhYmJyZXZpYXRlZCIpO3RoaXMuYU1vbnRoc1dpZGVTdD10aGlzLm9Mb2NhbGVEYXRhLmdldE1vbnRoc1N0YW5kQWxvbmUoIndpZGUiKTt0aGlzLmFEYXlzQWJicmV2PXRoaXMub0xvY2FsZURhdGEuZ2V0RGF5cygiYWJicmV2aWF0ZWQiKTt0aGlzLmFEYXlzV2lkZT10aGlzLm9Mb2NhbGVEYXRhLmdldERheXMoIndpZGUiKTt0aGlzLmFEYXlzQWJicmV2U3Q9dGhpcy5vTG9jYWxlRGF0YS5nZXREYXlzU3RhbmRBbG9uZSgiYWJicmV2aWF0ZWQiKTt0aGlzLmFEYXlzV2lkZVN0PXRoaXMub0xvY2FsZURhdGEuZ2V0RGF5c1N0YW5kQWxvbmUoIndpZGUiKTt0aGlzLmFEYXlQZXJpb2RzPXRoaXMub0xvY2FsZURhdGEuZ2V0RGF5UGVyaW9kcygiYWJicmV2aWF0ZWQiKTt0aGlzLmFGb3JtYXRBcnJheT10aGlzLnBhcnNlSmF2YURhdGVGb3JtYXQodGhpcy5vRm9ybWF0T3B0aW9ucy5wYXR0ZXJuKX07RC5wcm90b3R5cGUub1N0YXRlcz17IkciOiJlcmEiLCJ5IjoieWVhciIsIlkiOiJ3ZWVrWWVhciIsIk0iOiJtb250aCIsIkwiOiJtb250aFN0YW5kYWxvbmUiLCJ3Ijoid2Vla0luWWVhciIsIlciOiJ3ZWVrSW5Nb250aCIsIkQiOiJkYXlJblllYXIiLCJkIjoiZGF5IiwiRiI6ImRheU9mV2Vla0luTW9udGgiLCJFIjoiZGF5TmFtZUluV2VlayIsImMiOiJkYXlOYW1lSW5XZWVrU3RhbmRhbG9uZSIsInUiOiJkYXlOdW1iZXJPZldlZWsiLCJhIjoiYW1QbU1hcmtlciIsIkgiOiJob3VyMF8yMyIsImsiOiJob3VyMV8yNCIsIksiOiJob3VyMF8xMSIsImgiOiJob3VyMV8xMiIsIm0iOiJtaW51dGUiLCJzIjoic2Vjb25kIiwiUyI6Im1pbGxpc2Vjb25kIiwieiI6InRpbWV6b25lR2VuZXJhbCIsIloiOiJ0aW1lem9uZVJGQzgyMiIsIlgiOiJ0aW1lem9uZUlTTzg2MDEifTtELnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24oZCx1KXtpZih1PT09dW5kZWZpbmVkKXt1PXRoaXMub0Zvcm1hdE9wdGlvbnMuVVRDfXZhciBiPVtdLHAsYT11P2QuZ2V0VVRDRGF5KCk6ZC5nZXREYXkoKSxjPXU/ZC5nZXRVVENEYXRlKCk6ZC5nZXREYXRlKCksbT11P2QuZ2V0VVRDTW9udGgoKTpkLmdldE1vbnRoKCkseT11P2QuZ2V0VVRDRnVsbFllYXIoKTpkLmdldEZ1bGxZZWFyKCksTT11P2QuZ2V0VVRDTWlsbGlzZWNvbmRzKCk6ZC5nZXRNaWxsaXNlY29uZHMoKSxzPXU/ZC5nZXRVVENTZWNvbmRzKCk6ZC5nZXRTZWNvbmRzKCksZT11P2QuZ2V0VVRDTWludXRlcygpOmQuZ2V0TWludXRlcygpLGg9dT9kLmdldFVUQ0hvdXJzKCk6ZC5nZXRIb3VycygpLHQ9TWF0aC5hYnMoZC5nZXRUaW1lem9uZU9mZnNldCgpKSxQPWQuZ2V0VGltZXpvbmVPZmZzZXQoKT4wLEg9TWF0aC5mbG9vcih0LzYwKSxmPXQlNjAsWSx3LGcscjtmb3IodmFyIGk9MDtpPHRoaXMuYUZvcm1hdEFycmF5Lmxlbmd0aDtpKyspe3A9dGhpcy5hRm9ybWF0QXJyYXlbaV07c3dpdGNoKHAuc1R5cGUpe2Nhc2UidGV4dCI6Yi5wdXNoKHAuc1ZhbHVlKTticmVhaztjYXNlImRheSI6Yi5wdXNoKHEuc2FwLnBhZExlZnQoU3RyaW5nKGMpLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlImRheU5hbWVJbldlZWsiOmlmKHAuaURpZ2l0czw0KXtiLnB1c2godGhpcy5hRGF5c0FiYnJldlthXSl9ZWxzZSBpZihwLmlEaWdpdHM+PTQpe2IucHVzaCh0aGlzLmFEYXlzV2lkZVthXSl9YnJlYWs7Y2FzZSJkYXlOYW1lSW5XZWVrU3RhbmRhbG9uZSI6aWYocC5pRGlnaXRzPDQpe2IucHVzaCh0aGlzLmFEYXlzQWJicmV2U3RbYV0pfWVsc2UgaWYocC5pRGlnaXRzPj00KXtiLnB1c2godGhpcy5hRGF5c1dpZGVTdFthXSl9YnJlYWs7Y2FzZSJkYXlOdW1iZXJPZldlZWsiOmIucHVzaChhfHw3KTticmVhaztjYXNlIm1vbnRoIjppZihwLmlEaWdpdHM9PTMpe2IucHVzaCh0aGlzLmFNb250aHNBYmJyZXZbbV0pfWVsc2UgaWYocC5pRGlnaXRzPj00KXtiLnB1c2godGhpcy5hTW9udGhzV2lkZVttXSl9ZWxzZXtiLnB1c2gocS5zYXAucGFkTGVmdChTdHJpbmcobSsxKSwiMCIscC5pRGlnaXRzKSl9YnJlYWs7Y2FzZSJtb250aFN0YW5kYWxvbmUiOmlmKHAuaURpZ2l0cz09Myl7Yi5wdXNoKHRoaXMuYU1vbnRoc0FiYnJldlN0W21dKX1lbHNlIGlmKHAuaURpZ2l0cz49NCl7Yi5wdXNoKHRoaXMuYU1vbnRoc1dpZGVTdFttXSl9ZWxzZXtiLnB1c2gocS5zYXAucGFkTGVmdChTdHJpbmcobSsxKSwiMCIscC5pRGlnaXRzKSl9YnJlYWs7Y2FzZSJlcmEiOmIucHVzaCgiQUQiKTticmVhaztjYXNlInllYXIiOmNhc2Uid2Vla1llYXIiOlk9IiIreTtpZihwLmlEaWdpdHM9PTImJlkubGVuZ3RoPjIpe1k9WS5zdWJzdHIoWS5sZW5ndGgtMil9Yi5wdXNoKHEuc2FwLnBhZExlZnQoWSwiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJ3ZWVrSW5ZZWFyIjp3PSIiO2lmKGQuZ2V0V2Vlayl7dys9ZC5nZXRXZWVrKCl9Yi5wdXNoKHEuc2FwLnBhZExlZnQodywiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJob3VyMF8yMyI6Yi5wdXNoKHEuc2FwLnBhZExlZnQoU3RyaW5nKGgpLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlImhvdXIxXzI0IjppZihoPT0wKXtnPSIyNCJ9ZWxzZXtnPVN0cmluZyhoKX1iLnB1c2gocS5zYXAucGFkTGVmdChnLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlImhvdXIwXzExIjppZihoPjExKXtnPVN0cmluZyhoLTEyKX1lbHNle2c9U3RyaW5nKGgpfWIucHVzaChxLnNhcC5wYWRMZWZ0KGcsIjAiLHAuaURpZ2l0cykpO2JyZWFrO2Nhc2UiaG91cjFfMTIiOmlmKGg+MTIpe2c9U3RyaW5nKGgtMTIpfWVsc2UgaWYoaD09MCl7Zz0iMTIifWVsc2V7Zz1TdHJpbmcoaCl9Yi5wdXNoKHEuc2FwLnBhZExlZnQoZywiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJtaW51dGUiOmIucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhlKSwiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJzZWNvbmQiOmIucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhzKSwiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJtaWxsaXNlY29uZCI6Yi5wdXNoKHEuc2FwLnBhZFJpZ2h0KHEuc2FwLnBhZExlZnQoU3RyaW5nKE0pLCIwIixNYXRoLm1pbigzLHAuaURpZ2l0cykpLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlImFtUG1NYXJrZXIiOnZhciBqPWg8MTI/MDoxO2IucHVzaCh0aGlzLmFEYXlQZXJpb2RzW2pdKTticmVhaztjYXNlInRpbWV6b25lR2VuZXJhbCI6aWYocC5pRGlnaXRzPjMmJmQuZ2V0VGltZXpvbmVMb25nKXtiLnB1c2goZC5nZXRUaW1lem9uZUxvbmcoKSk7YnJlYWt9ZWxzZSBpZihkLmdldFRpbWV6b25lU2hvcnQpe2IucHVzaChkLmdldFRpbWV6b25lU2hvcnQoKSk7YnJlYWt9Yi5wdXNoKCJHTVQiKTtjYXNlInRpbWV6b25lSVNPODYwMSI6aWYoIXUmJnQhPTApe2IucHVzaChQPyItIjoiKyIpO2IucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhIKSwiMCIsMikpO2IucHVzaCgiOiIpO2IucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhmKSwiMCIsMikpfWVsc2V7Yi5wdXNoKCJaIil9YnJlYWs7Y2FzZSJ0aW1lem9uZVJGQzgyMiI6aWYoIXUmJnQhPTApe2IucHVzaChQPyItIjoiKyIpO2IucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhIKSwiMCIsMikpO2IucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhmKSwiMCIsMikpfWJyZWFrfX1yPWIuam9pbigiIik7aWYoc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0T3JpZ2luSW5mbygpKXtyPW5ldyBTdHJpbmcocik7ci5vcmlnaW5JbmZvPXtzb3VyY2U6IkNvbW1vbiBMb2NhbGUgRGF0YSBSZXBvc2l0b3J5Iixsb2NhbGU6dGhpcy5vTG9jYWxlLnRvU3RyaW5nKCksc3R5bGU6dGhpcy5vRm9ybWF0T3B0aW9ucy5zdHlsZSxwYXR0ZXJuOnRoaXMub0Zvcm1hdE9wdGlvbnMucGF0dGVybn19cmV0dXJuIHJ9O0QucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHYsdSl7aWYodT09PXVuZGVmaW5lZCl7dT10aGlzLm9Gb3JtYXRPcHRpb25zLlVUQ312YXIgZCxJPTAsZT1mYWxzZSxhPW51bGwsbT1udWxsLHk9bnVsbCxoPW51bGwsTT1udWxsLHM9bnVsbCxiPW51bGwscD1mYWxzZSxQLGMsdD1udWxsLFY9dHJ1ZSxyPXRoaXMub1JlcXVpcmVkUGFydHM7ZnVuY3Rpb24gZih4KXtyZXR1cm4geD49NDgmJng8PTU3fWZ1bmN0aW9uIGcoeCl7dmFyIHo9MDt3aGlsZSh6PHgmJmYodi5jaGFyQ29kZUF0KEkreikpKXt6Kyt9cmV0dXJuIHYuc3Vic3RyKEkseil9ZnVuY3Rpb24gaih4KXt2YXIgaTtmb3IoaT0wO2k8eC5sZW5ndGg7aSsrKXtpZih2LmluZGV4T2YoeFtpXSxJKT09SSl7cmV0dXJuIHhbaV19fXJldHVybiBudWxsfWZ1bmN0aW9uIGsoeCl7dmFyIGk7Zm9yKGk9MDtpPHgubGVuZ3RoO2krKyl7aWYodi5pbmRleE9mKHhbaV0sSSk9PUkpe3JldHVybiBpfX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBsKHgpe3ZhciB6PXYuY2hhckF0KEkpPT0iKyI/LTE6MTtJKys7Yz1nKDIpO3ZhciBCPXBhcnNlSW50KGMsMTApO0k9SSsyO2lmKHgpe0krK31jPWcoMik7ST1JKzI7dD1wYXJzZUludChjLDEwKTt0PSh0KzYwKkIpKnp9ZnVuY3Rpb24gbih4LHope2lmKHggaW4gciYmeil7Vj1mYWxzZX19dj1xLnRyaW0odik7Zm9yKHZhciBpPTA7aTx0aGlzLmFGb3JtYXRBcnJheS5sZW5ndGg7aSsrKXtQPXRoaXMuYUZvcm1hdEFycmF5W2ldO3N3aXRjaChQLnNUeXBlKXtjYXNlInRleHQiOmlmKHYuaW5kZXhPZihQLnNWYWx1ZSxJKT09SSl7SSs9UC5zVmFsdWUubGVuZ3RofWVsc2V7bihQLnNUeXBlLHRoaXMuYUZvcm1hdEFycmF5W2krMV0uc1R5cGUgaW4gcil9YnJlYWs7Y2FzZSJkYXkiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO0krPWMubGVuZ3RoO2E9cGFyc2VJbnQoYywxMCk7YnJlYWs7Y2FzZSJkYXlOYW1lSW5XZWVrIjpjYXNlImRheU5hbWVJbldlZWtTdGFuZGFsb25lIjpjPWoodGhpcy5hRGF5c1dpZGUpO2lmKGMpe0krPWMubGVuZ3RoO2JyZWFrfWM9aih0aGlzLmFEYXlzV2lkZVN0KTtpZihjKXtJKz1jLmxlbmd0aDticmVha31jPWoodGhpcy5hRGF5c0FiYnJldik7aWYoYyl7SSs9Yy5sZW5ndGg7YnJlYWt9Yz1qKHRoaXMuYURheXNBYmJyZXZTdCk7aWYoYyl7SSs9Yy5sZW5ndGg7YnJlYWt9YnJlYWs7Y2FzZSJkYXlOdW1iZXJPZldlZWsiOmM9ZyhQLmlEaWdpdHMpO0krPWMubGVuZ3RoO2JyZWFrO2Nhc2UibW9udGgiOmNhc2UibW9udGhTdGFuZGFsb25lIjppZihQLmlEaWdpdHM8Myl7Yz1nKE1hdGgubWF4KFAuaURpZ2l0cywyKSk7bihQLnNUeXBlLGM9PT0iIik7bT1wYXJzZUludChjLDEwKS0xO0krPWMubGVuZ3RofWVsc2V7bT1rKHRoaXMuYU1vbnRoc1dpZGUpO2lmKG0hPW51bGwpe0krPXRoaXMuYU1vbnRoc1dpZGVbbV0ubGVuZ3RoO2JyZWFrfW09ayh0aGlzLmFNb250aHNXaWRlU3QpO2lmKG0hPW51bGwpe0krPXRoaXMuYU1vbnRoc1dpZGVTdFttXS5sZW5ndGg7YnJlYWt9bT1rKHRoaXMuYU1vbnRoc0FiYnJldik7aWYobSE9bnVsbCl7SSs9dGhpcy5hTW9udGhzQWJicmV2W21dLmxlbmd0aDticmVha31tPWsodGhpcy5hTW9udGhzQWJicmV2U3QpO2lmKG0hPW51bGwpe0krPXRoaXMuYU1vbnRoc0FiYnJldlN0W21dLmxlbmd0aDticmVha31uKFAuc1R5cGUsdHJ1ZSl9YnJlYWs7Y2FzZSJlcmEiOmJyZWFrO2Nhc2UieWVhciI6Y2FzZSJ3ZWVrWWVhciI6aWYoUC5pRGlnaXRzPT0xKXtjPWcoNCl9ZWxzZSBpZihQLmlEaWdpdHM9PTIpe2M9ZygyKX1lbHNle2M9ZyhQLmlEaWdpdHMpfUkrPWMubGVuZ3RoO24oUC5zVHlwZSxjPT09IiIpO3k9cGFyc2VJbnQoYywxMCk7aWYoYy5sZW5ndGg8PTIpe3ZhciBDPW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSxvPU1hdGguZmxvb3IoQy8xMDApLFk9byoxMDAreS1DO2lmKFk8LTcwKXt5Kz0obysxKSoxMDB9ZWxzZSBpZihZPDMwKXt5Kz1vKjEwMH1lbHNle3krPShvLTEpKjEwMH19YnJlYWs7Y2FzZSJ3ZWVrSW5ZZWFyIjpicmVhaztjYXNlImhvdXIwXzIzIjpjPWcoTWF0aC5tYXgoUC5pRGlnaXRzLDIpKTtuKFAuc1R5cGUsYz09PSIiKTtJKz1jLmxlbmd0aDtoPXBhcnNlSW50KGMsMTApO2JyZWFrO2Nhc2UiaG91cjFfMjQiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO0krPWMubGVuZ3RoO2g9cGFyc2VJbnQoYywxMCk7aWYoaD09MjQpe2g9MH1icmVhaztjYXNlImhvdXIwXzExIjpjPWcoTWF0aC5tYXgoUC5pRGlnaXRzLDIpKTtuKFAuc1R5cGUsYz09PSIiKTtJKz1jLmxlbmd0aDtoPXBhcnNlSW50KGMsMTApO2JyZWFrO2Nhc2UiaG91cjFfMTIiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO0krPWMubGVuZ3RoO2g9cGFyc2VJbnQoYywxMCk7aWYoaD09MTIpe2g9MDtwPXRydWV9YnJlYWs7Y2FzZSJtaW51dGUiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO0krPWMubGVuZ3RoO009cGFyc2VJbnQoYywxMCk7YnJlYWs7Y2FzZSJzZWNvbmQiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO0krPWMubGVuZ3RoO3M9cGFyc2VJbnQoYywxMCk7YnJlYWs7Y2FzZSJtaWxsaXNlY29uZCI6Yz1nKE1hdGgubWF4KFAuaURpZ2l0cywzKSk7SSs9Yy5sZW5ndGg7Yz1xLnNhcC5wYWRSaWdodChjLCIwIiwzKTtiPXBhcnNlSW50KGMsMTApO2JyZWFrO2Nhc2UiYW1QbU1hcmtlciI6dmFyIEE9dGhpcy5hRGF5UGVyaW9kc1swXSx3PXRoaXMuYURheVBlcmlvZHNbMV07aWYodi5pbmRleE9mKEEsSSk9PUkpe3A9ZmFsc2U7SSs9Mn1lbHNlIGlmKHYuaW5kZXhPZih3LEkpPT1JKXtwPXRydWU7SSs9Mn1icmVhaztjYXNlInRpbWV6b25lR2VuZXJhbCI6dmFyIFQ9di5zdWJzdHJpbmcoSSxJKzMpO2lmKFQ9PT0iR01UInx8VD09PSJVVEMiKXtJPUkrM31lbHNlIGlmKHYuc3Vic3RyaW5nKEksSSsyKT09PSJVVCIpe0k9SSsyfWVsc2UgaWYodi5jaGFyQXQoSSk9PSJaIil7ST1JKzE7dD0wO2JyZWFrfWVsc2V7cS5zYXAubG9nLmVycm9yKHYrIiBjYW5ub3QgYmUgcGFyc2VkIGNvcnJlY2x5IGJ5IHNhcC51aS5jb3JlLmZvcm1hdC5EYXRlRm9ybWF0OiBUaGUgZ2l2ZW4gdGltZXpvbmUgaXMgbm90IHN1cHBvcnRlZCEiKTticmVha31jYXNlInRpbWV6b25lSVNPODYwMSI6aWYodi5jaGFyQXQoSSk9PSJaIil7ST1JKzE7dD0wO2JyZWFrfWwodHJ1ZSk7YnJlYWs7Y2FzZSJ0aW1lem9uZVJGQzgyMiI6bChmYWxzZSk7YnJlYWt9aWYoIVYpe2JyZWFrfX1pZihJPHYubGVuZ3RoKXtWPWZhbHNlfWlmKHApe2grPTEyfWlmKFYpe2lmKHQhPW51bGwpe2Q9bmV3IERhdGUoMCk7ZC5zZXRVVENGdWxsWWVhcih5fHwxOTcwKTtkLnNldFVUQ01vbnRoKG18fDApO2Quc2V0VVRDRGF0ZShhfHwxKTtkLnNldFVUQ0hvdXJzKGh8fDApO2Quc2V0VVRDTWludXRlcygoTXx8MCkrdCk7ZC5zZXRVVENTZWNvbmRzKHN8fDApO2Quc2V0VVRDTWlsbGlzZWNvbmRzKGJ8fDApfWVsc2UgaWYodSl7ZD1uZXcgRGF0ZSgwKTtkLnNldFVUQ0Z1bGxZZWFyKHl8fDE5NzApO2Quc2V0VVRDTW9udGgobXx8MCk7ZC5zZXRVVENEYXRlKGF8fDEpO2Quc2V0VVRDSG91cnMoaHx8MCk7ZC5zZXRVVENNaW51dGVzKE18fDApO2Quc2V0VVRDU2Vjb25kcyhzfHwwKTtkLnNldFVUQ01pbGxpc2Vjb25kcyhifHwwKX1lbHNle2Q9bmV3IERhdGUoMTk3MCwwLDEsMCwwLDApO2Quc2V0RnVsbFllYXIoeXx8MTk3MCk7ZC5zZXRNb250aChtfHwwKTtkLnNldERhdGUoYXx8MSk7ZC5zZXRIb3VycyhofHwwKTtkLnNldE1pbnV0ZXMoTXx8MCk7ZC5zZXRTZWNvbmRzKHN8fDApO2Quc2V0TWlsbGlzZWNvbmRzKGJ8fDApfXJldHVybiBkfWlmKCF0aGlzLmJJc0ZhbGxiYWNrKXtxLmVhY2godGhpcy5hRmFsbGJhY2tGb3JtYXRzLGZ1bmN0aW9uKGksRil7ZD1GLnBhcnNlKHYsdSk7aWYoZCl7cmV0dXJuIGZhbHNlfX0pO3JldHVybiBkfXJldHVybiBudWxsfTtELnByb3RvdHlwZS5wYXJzZUphdmFEYXRlRm9ybWF0PWZ1bmN0aW9uKGYpe3ZhciBGPVtdLGksUT1mYWxzZSxjPW51bGwscz0iIixuPSIiO2ZvcihpPTA7aTxmLmxlbmd0aDtpKyspe3ZhciBDPWYuY2hhckF0KGkpLE4scCxQO2lmKFEpe2lmKEM9PSInIil7cD1mLmNoYXJBdChpLTEpO1A9Zi5jaGFyQXQoaS0yKTtOPWYuY2hhckF0KGkrMSk7aWYocD09IiciJiZQIT0iJyIpe1E9ZmFsc2V9ZWxzZSBpZihOPT0iJyIpe2krPTF9ZWxzZXtRPWZhbHNlO2NvbnRpbnVlfX1pZihzPT0idGV4dCIpe2Muc1ZhbHVlKz1DfWVsc2V7Yz17c1R5cGU6InRleHQiLHNWYWx1ZTpDfTtGLnB1c2goYyk7cz0idGV4dCJ9fWVsc2V7aWYoQz09IiciKXtRPXRydWV9ZWxzZSBpZih0aGlzLm9TdGF0ZXNbQ10pe249dGhpcy5vU3RhdGVzW0NdO2lmKHM9PW4pe2MuaURpZ2l0cysrfWVsc2V7Yz17c1R5cGU6bixpRGlnaXRzOjF9O0YucHVzaChjKTtzPW59fWVsc2V7aWYocz09InRleHQiKXtjLnNWYWx1ZSs9Q31lbHNle2M9e3NUeXBlOiJ0ZXh0IixzVmFsdWU6Q307Ri5wdXNoKGMpO3M9InRleHQifX19fXJldHVybiBGfTtyZXR1cm4gRH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLmZvcm1hdC5OdW1iZXJGb3JtYXQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5mb3JtYXQuTnVtYmVyRm9ybWF0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvZm9ybWF0L051bWJlckZvcm1hdCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL0xvY2FsZURhdGEnXSxmdW5jdGlvbihxLEwpeyJ1c2Ugc3RyaWN0Ijt2YXIgTj1zYXAudWkuYmFzZS5PYmplY3QuZXh0ZW5kKCJzYXAudWkuY29yZS5mb3JtYXQuTnVtYmVyRm9ybWF0Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZil7dGhyb3cgbmV3IEVycm9yKCl9fSk7Ti5JTlRFR0VSPTA7Ti5GTE9BVD0xO04uQ1VSUkVOQ1k9MjtOLlBFUkNFTlQ9MztOLm9EZWZhdWx0SW50ZWdlckZvcm1hdD17bWluSW50ZWdlckRpZ2l0czoxLG1heEludGVnZXJEaWdpdHM6OTksbWluRnJhY3Rpb25EaWdpdHM6MCxtYXhGcmFjdGlvbkRpZ2l0czowLGdyb3VwaW5nRW5hYmxlZDpmYWxzZSxncm91cGluZ1NlcGFyYXRvcjoiLCIsZGVjaW1hbFNlcGFyYXRvcjoiLiIscGx1c1NpZ246IisiLG1pbnVzU2lnbjoiLSIsaXNJbnRlZ2VyOnRydWUsdHlwZTpOLklOVEVHRVIsc2hvd01lYXN1cmU6ZmFsc2V9O04ub0RlZmF1bHRGbG9hdEZvcm1hdD17bWluSW50ZWdlckRpZ2l0czoxLG1heEludGVnZXJEaWdpdHM6OTksbWluRnJhY3Rpb25EaWdpdHM6MCxtYXhGcmFjdGlvbkRpZ2l0czo5OSxncm91cGluZ0VuYWJsZWQ6dHJ1ZSxncm91cGluZ1NlcGFyYXRvcjoiLCIsZGVjaW1hbFNlcGFyYXRvcjoiLiIscGx1c1NpZ246IisiLG1pbnVzU2lnbjoiLSIsaXNJbnRlZ2VyOmZhbHNlLHR5cGU6Ti5GTE9BVCxzaG93TWVhc3VyZTpmYWxzZX07Ti5vRGVmYXVsdEN1cnJlbmN5Rm9ybWF0PXttaW5JbnRlZ2VyRGlnaXRzOjEsbWF4SW50ZWdlckRpZ2l0czo5OSxtaW5GcmFjdGlvbkRpZ2l0czoyLG1heEZyYWN0aW9uRGlnaXRzOjIsZ3JvdXBpbmdFbmFibGVkOnRydWUsZ3JvdXBpbmdTZXBhcmF0b3I6IiwiLGRlY2ltYWxTZXBhcmF0b3I6Ii4iLHBsdXNTaWduOiIrIixtaW51c1NpZ246Ii0iLGlzSW50ZWdlcjpmYWxzZSx0eXBlOk4uQ1VSUkVOQ1ksc2hvd01lYXN1cmU6dHJ1ZX07Ti5nZXRJbnN0YW5jZT1mdW5jdGlvbihmLGwpe3JldHVybiB0aGlzLmdldEZsb2F0SW5zdGFuY2UoZixsKX07Ti5nZXRGbG9hdEluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7dmFyIEY9dGhpcy5jcmVhdGVJbnN0YW5jZShmLGwpLG89dGhpcy5nZXRMb2NhbGVGb3JtYXRPcHRpb25zKEYub0xvY2FsZURhdGEsTi5GTE9BVCk7Ri5vRm9ybWF0T3B0aW9ucz1xLmV4dGVuZChmYWxzZSx7fSx0aGlzLm9EZWZhdWx0RmxvYXRGb3JtYXQsbyxmKTtpZihmJiZmLnBhdHRlcm4pe0Yub0Zvcm1hdE9wdGlvbnM9cS5leHRlbmQoZmFsc2UsRi5vRm9ybWF0T3B0aW9ucyx0aGlzLnBhcnNlTnVtYmVyUGF0dGVybihmLnBhdHRlcm4pKX1yZXR1cm4gRn07Ti5nZXRJbnRlZ2VySW5zdGFuY2U9ZnVuY3Rpb24oZixsKXt2YXIgRj10aGlzLmNyZWF0ZUluc3RhbmNlKGYsbCksbz10aGlzLmdldExvY2FsZUZvcm1hdE9wdGlvbnMoRi5vTG9jYWxlRGF0YSxOLklOVEVHRVIpO0Yub0Zvcm1hdE9wdGlvbnM9cS5leHRlbmQoZmFsc2Use30sdGhpcy5vRGVmYXVsdEludGVnZXJGb3JtYXQsbyxmKTtpZihmJiZmLnBhdHRlcm4pe0Yub0Zvcm1hdE9wdGlvbnM9cS5leHRlbmQoZmFsc2UsRi5vRm9ybWF0T3B0aW9ucyx0aGlzLnBhcnNlTnVtYmVyUGF0dGVybihmLnBhdHRlcm4pKX1yZXR1cm4gRn07Ti5nZXRDdXJyZW5jeUluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7dmFyIEY9dGhpcy5jcmVhdGVJbnN0YW5jZShmLGwpLG89dGhpcy5nZXRMb2NhbGVGb3JtYXRPcHRpb25zKEYub0xvY2FsZURhdGEsTi5DVVJSRU5DWSk7Ri5vRm9ybWF0T3B0aW9ucz1xLmV4dGVuZChmYWxzZSx7fSx0aGlzLm9EZWZhdWx0Q3VycmVuY3lGb3JtYXQsbyxmKTtpZihmJiZmLnBhdHRlcm4pe0Yub0Zvcm1hdE9wdGlvbnM9cS5leHRlbmQoZmFsc2UsRi5vRm9ybWF0T3B0aW9ucyx0aGlzLnBhcnNlTnVtYmVyUGF0dGVybihmLnBhdHRlcm4pKX1yZXR1cm4gRn07Ti5jcmVhdGVJbnN0YW5jZT1mdW5jdGlvbihmLGwpe3ZhciBGPXEuc2FwLm5ld09iamVjdCh0aGlzLnByb3RvdHlwZSk7aWYoZiBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkxvY2FsZSl7bD1mO2Y9dW5kZWZpbmVkfWlmKCFsKXtsPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldEZvcm1hdFNldHRpbmdzKCkuZ2V0Rm9ybWF0TG9jYWxlKCl9Ri5vTG9jYWxlPWw7Ri5vTG9jYWxlRGF0YT1MLmdldEluc3RhbmNlKGwpO3JldHVybiBGfTtOLmdldExvY2FsZUZvcm1hdE9wdGlvbnM9ZnVuY3Rpb24obCx0KXt2YXIgbz17fSxuO2lmKHQ9PU4uQ1VSUkVOQ1kpe249bC5nZXRDdXJyZW5jeVBhdHRlcm4oKTtvPXRoaXMucGFyc2VOdW1iZXJQYXR0ZXJuKG4pfW8ucGx1c1NpZ249bC5nZXROdW1iZXJTeW1ib2woInBsdXNTaWduIik7by5taW51c1NpZ249bC5nZXROdW1iZXJTeW1ib2woIm1pbnVzU2lnbiIpO28uZGVjaW1hbFNlcGFyYXRvcj1sLmdldE51bWJlclN5bWJvbCgiZGVjaW1hbCIpO28uZ3JvdXBpbmdTZXBhcmF0b3I9bC5nZXROdW1iZXJTeW1ib2woImdyb3VwIik7by5wYXR0ZXJuPW47cmV0dXJuIG99O04ucGFyc2VOdW1iZXJQYXR0ZXJuPWZ1bmN0aW9uKGYpe3ZhciBtPTA7dmFyIE09MDt2YXIgYT0wO3ZhciBnPWZhbHNlO3ZhciBzPTA7Zm9yKHZhciBpPTA7aTxmLmxlbmd0aDtpKyspe3ZhciBjPWZbaV07aWYoYz09PSIsIil7Zz10cnVlO2NvbnRpbnVlfWVsc2UgaWYoYz09PSIuIil7cz0xO2NvbnRpbnVlfWVsc2UgaWYocz09MCYmYz09PSIwIil7bSsrfWVsc2UgaWYocz09MSl7aWYoYz09PSIwIil7TSsrO2ErK31lbHNlIGlmKGM9PT0iIyIpe2ErK319fXJldHVybnttaW5JbnRlZ2VyRGlnaXRzOm0sbWluRnJhY3Rpb25EaWdpdHM6TSxtYXhGcmFjdGlvbkRpZ2l0czphLGdyb3VwaW5nRW5hYmxlZDpnfX07Ti5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKHYsbSl7dmFyIG49dGhpcy5jb252ZXJ0VG9EZWNpbWFsKHYpLGk9IiIsZj0iIixnPSIiLHI9IiIscD0wLGw9MCxiPXY8MCxkPS0xLG89dGhpcy5vRm9ybWF0T3B0aW9ucztpZihuPT0iTmFOIil7cmV0dXJuIG59aWYoby50eXBlPT1OLkNVUlJFTkNZKXt2YXIgRD10aGlzLm9Mb2NhbGVEYXRhLmdldEN1cnJlbmN5RGlnaXRzKG0pO28ubWF4RnJhY3Rpb25EaWdpdHM9RDtvLm1pbkZyYWN0aW9uRGlnaXRzPUR9aWYoYil7bj1uLnN1YnN0cigxKX1kPW4uaW5kZXhPZigiLiIpO2lmKGQ+LTEpe2k9bi5zdWJzdHIoMCxkKTtmPW4uc3Vic3RyKGQrMSl9ZWxzZXtpPW59aWYoaS5sZW5ndGg8by5taW5JbnRlZ2VyRGlnaXRzKXtpPXEuc2FwLnBhZExlZnQoaSwiMCIsby5taW5JbnRlZ2VyRGlnaXRzKX1lbHNlIGlmKGkubGVuZ3RoPm8ubWF4SW50ZWdlckRpZ2l0cyl7aT1xLnNhcC5wYWRMZWZ0KCIiLCI/IixvLm1heEludGVnZXJEaWdpdHMpfWlmKGYubGVuZ3RoPG8ubWluRnJhY3Rpb25EaWdpdHMpe2Y9cS5zYXAucGFkUmlnaHQoZiwiMCIsby5taW5GcmFjdGlvbkRpZ2l0cyl9ZWxzZSBpZihmLmxlbmd0aD5vLm1heEZyYWN0aW9uRGlnaXRzKXtmPWYuc3Vic3RyKDAsby5tYXhGcmFjdGlvbkRpZ2l0cyl9bD1pLmxlbmd0aDtpZihvLmdyb3VwaW5nRW5hYmxlZCYmbD4zKXtwPWwlM3x8MztnPWkuc3Vic3RyKDAscCk7d2hpbGUocDxpLmxlbmd0aCl7Zys9by5ncm91cGluZ1NlcGFyYXRvcjtnKz1pLnN1YnN0cihwLDMpO3ArPTN9aT1nfWlmKGIpe3I9by5taW51c1NpZ259cis9aTtpZihmKXtyKz1vLmRlY2ltYWxTZXBhcmF0b3IrZn1pZihtJiZvLnNob3dNZWFzdXJlKXtpZihvLnR5cGU9PU4uQ1VSUkVOQ1kpe3ZhciBjPSdcdTAwYTQnO3ZhciBQPW8ucGF0dGVybjtQPVAucmVwbGFjZSgvXHUwMGE0Lyx0aGlzLm9Mb2NhbGVEYXRhLmdldEN1cnJlbmN5U3ltYm9sKG0pKTtQPVAucmVwbGFjZSgvWzAjLixdKy8scik7cj1QfX1pZihzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRPcmlnaW5JbmZvKCkpe3I9bmV3IFN0cmluZyhyKTtyLm9yaWdpbkluZm89e3NvdXJjZToiQ29tbW9uIExvY2FsZSBEYXRhIFJlcG9zaXRvcnkiLGxvY2FsZTp0aGlzLm9Mb2NhbGUudG9TdHJpbmcoKX19cmV0dXJuIHJ9O04ucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHYpe3ZhciBvPXRoaXMub0Zvcm1hdE9wdGlvbnMscj0iXlxccyooWystXT8oPzpbMC05XFwiK28uZ3JvdXBpbmdTZXBhcmF0b3IrIl0rfFswLTlcXCIrby5ncm91cGluZ1NlcGFyYXRvcisiXSpcXCIrby5kZWNpbWFsU2VwYXJhdG9yKyJbMC05XSspKFtlRV1bKy1dWzAtOV0rKT8pXFxzKiQiLFI9Il5cXHMqKFsrLV0/WzAtOVxcIitvLmdyb3VwaW5nU2VwYXJhdG9yKyJdKylcXHMqJCIsZz1uZXcgUmVnRXhwKCJcXCIrby5ncm91cGluZ1NlcGFyYXRvciwiZyIpLGQ9bmV3IFJlZ0V4cCgiXFwiK28uZGVjaW1hbFNlcGFyYXRvciwiZyIpLGEsYj0wO3Y9di5yZXBsYWNlKC9ccy9nLCIiKTtpZihvLmlzSW50ZWdlcil7YT1uZXcgUmVnRXhwKFIpfWVsc2V7YT1uZXcgUmVnRXhwKHIpfWlmKCFhLnRlc3Qodikpe3JldHVybiBOYU59dj12LnJlcGxhY2UoZywiIik7aWYoby5pc0ludGVnZXIpe2I9cGFyc2VJbnQodiwxMCl9ZWxzZXt2PXYucmVwbGFjZShkLCIuIik7Yj1wYXJzZUZsb2F0KHYpfXJldHVybiBifTtOLnByb3RvdHlwZS5jb252ZXJ0VG9EZWNpbWFsPWZ1bmN0aW9uKHYpe3ZhciBWPSIiK3YsbixiLGQsZixlLHA7aWYoVi5pbmRleE9mKCJlIik9PS0xJiZWLmluZGV4T2YoIkUiKT09LTEpe3JldHVybiBWfXZhciByPVYubWF0Y2goL14oWystXT8pKChcZCspKD86XC4oXGQrKSk/KVtlRV0oWystXT9cZCspJC8pO249clsxXT09Ii0iO2I9clsyXS5yZXBsYWNlKC9cLi9nLCIiKTtkPXJbM10/clszXS5sZW5ndGg6MDtmPXJbNF0/cls0XS5sZW5ndGg6MDtlPXBhcnNlSW50KHJbNV0sMTApO2lmKGU+MCl7aWYoZTxmKXtwPWQrZTtWPWIuc3Vic3RyKDAscCkrIi4iK2Iuc3Vic3RyKHApfWVsc2V7Vj1iO2UtPWY7Zm9yKHZhciBpPTA7aTxlO2krKyl7Vis9IjAifX19ZWxzZXtpZigtZTxkKXtwPWQrZTtWPWIuc3Vic3RyKDAscCkrIi4iK2Iuc3Vic3RyKHApfWVsc2V7Vj1iO2UrPWQ7Zm9yKHZhciBpPTA7aT5lO2ktLSl7Vj0iMCIrVn1WPSIwLiIrVn19aWYobil7Vj0iLSIrVn1yZXR1cm4gVn07cmV0dXJuIE59LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuQ29udHJvbGxlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5Db250cm9sbGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL0NvbnRyb2xsZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJ10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIHI9e307dmFyIEM9RS5leHRlbmQoInNhcC51aS5jb3JlLm12Yy5Db250cm9sbGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obil7dmFyIHQ9bnVsbDtpZih0eXBlb2Yobik9PSJzdHJpbmciKXtpZighcltuXSl7cS5zYXAucmVxdWlyZSh7bW9kTmFtZTpuLHR5cGU6ImNvbnRyb2xsZXIifSk7aWYoIXJbbl0pe3Rocm93IG5ldyBFcnJvcigiQ29udHJvbGxlciB0eXBlICIrbisiIGlzIHN0aWxsIHVuZGVmaW5lZCBhZnRlciB0cnlpbmcgdG8gbG9hZCBpdC4iKX19dD1yW25dfUUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHQpe3EuZXh0ZW5kKHRoaXMscltuXSl9fX0pO3ZhciBjPXsib25Jbml0Ijp0cnVlLCJvbkV4aXQiOmZhbHNlLCJvbkJlZm9yZVJlbmRlcmluZyI6ZmFsc2UsIm9uQWZ0ZXJSZW5kZXJpbmciOnRydWV9O2Z1bmN0aW9uIGUobyxuKXt2YXIgYTtpZihzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24pe3ZhciBiPXNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbi5nZXRDb250cm9sbGVyRXh0ZW5zaW9uKG4pO2lmKGIpe3ZhciBzPWIuY29udHJvbGxlck5hbWU7cS5zYXAubG9nLmluZm8oIkN1c3RvbWl6aW5nOiBDb250cm9sbGVyICciK24rIicgaXMgbm93IGV4dGVuZGVkIGJ5ICciK3MrIiciKTtpZighcltzXSYmIXEuc2FwLmdldE9iamVjdChzKSl7cS5zYXAucmVxdWlyZSh7bW9kTmFtZTpzLHR5cGU6ImNvbnRyb2xsZXIifSl9aWYoIXJbc10mJiFxLnNhcC5nZXRPYmplY3Qocykpe3Euc2FwLmxvZy5lcnJvcigiQXR0ZW1wdCB0byBsb2FkIEV4dGVuc2lvbiBDb250cm9sbGVyICIrcysiIHdhcyBub3Qgc3VjY2Vzc2Z1bCAtIGlzIHRoZSBDb250cm9sbGVyIGNvcnJlY3RseSBkZWZpbmVkIGluIGl0cyBmaWxlPyIpfWlmKGE9cltzXSl7Zm9yKHZhciBtIGluIGEpe2lmKGNbbV0hPT11bmRlZmluZWQpe3ZhciBPPW9bbV07aWYoTyYmdHlwZW9mIE89PT0iZnVuY3Rpb24iKXsoZnVuY3Rpb24obSxPKXtvW21dPWZ1bmN0aW9uKCl7aWYoY1ttXSl7Ty5hcHBseShvLGFyZ3VtZW50cyk7YVttXS5hcHBseShvLGFyZ3VtZW50cyl9ZWxzZXthW21dLmFwcGx5KG8sYXJndW1lbnRzKTtPLmFwcGx5KG8sYXJndW1lbnRzKX19fSkobSxPKX1lbHNle29bbV09YVttXX19ZWxzZXtvW21dPWFbbV19fXJldHVybiBvfWVsc2V7fX19cmV0dXJuIG99c2FwLnVpLmNvbnRyb2xsZXI9ZnVuY3Rpb24obixvKXtpZighbil7dGhyb3cgbmV3IEVycm9yKCJDb250cm9sbGVyIG5hbWUgKCdzTmFtZScgcGFyYW1ldGVyKSBpcyByZXF1aXJlZCIpfWlmKCFvKXtpZighcltuXSYmIXEuc2FwLmdldE9iamVjdChuKSl7cS5zYXAucmVxdWlyZSh7bW9kTmFtZTpuLHR5cGU6ImNvbnRyb2xsZXIifSl9aWYocltuXSl7dmFyIGE9bmV3IEMobik7YT1lKGEsbik7cmV0dXJuIGF9ZWxzZXt2YXIgYj1xLnNhcC5nZXRPYmplY3Qobik7aWYodHlwZW9mIGI9PT0iZnVuY3Rpb24iJiZiLnByb3RvdHlwZSBpbnN0YW5jZW9mIEMpe3ZhciBhPW5ldyBiKCk7YT1lKGEsbik7cmV0dXJuIGF9fXRocm93IG5ldyBFcnJvcigiQ29udHJvbGxlciAiK24rIiBjb3VsZG4ndCBiZSBpbnN0YW50aWF0ZWQiKX1lbHNle3Jbbl09b319O0MucHJvdG90eXBlLmdldFZpZXc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vVmlld307Qy5wcm90b3R5cGUuYnlJZD1mdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5vVmlldz90aGlzLm9WaWV3LmJ5SWQoaSk6dW5kZWZpbmVkfTtDLnByb3RvdHlwZS5jcmVhdGVJZD1mdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5vVmlldz90aGlzLm9WaWV3LmNyZWF0ZUlkKGkpOnVuZGVmaW5lZH07Qy5wcm90b3R5cGUuY29ubmVjdFRvVmlldz1mdW5jdGlvbih2KXt0aGlzLm9WaWV3PXY7aWYodGhpcy5vbkluaXQpe3YuYXR0YWNoQWZ0ZXJJbml0KHRoaXMub25Jbml0LHRoaXMpfWlmKHRoaXMub25FeGl0KXt2LmF0dGFjaEJlZm9yZUV4aXQodGhpcy5vbkV4aXQsdGhpcyl9aWYodGhpcy5vbkFmdGVyUmVuZGVyaW5nKXt2LmF0dGFjaEFmdGVyUmVuZGVyaW5nKHRoaXMub25BZnRlclJlbmRlcmluZyx0aGlzKX1pZih0aGlzLm9uQmVmb3JlUmVuZGVyaW5nKXt2LmF0dGFjaEJlZm9yZVJlbmRlcmluZyh0aGlzLm9uQmVmb3JlUmVuZGVyaW5nLHRoaXMpfX07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuSFRNTFZpZXdSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5IVE1MVmlld1JlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL0hUTUxWaWV3UmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1ZpZXdSZW5kZXJlciddLGZ1bmN0aW9uKHEsVil7InVzZSBzdHJpY3QiO3ZhciBIPXt9O0gucmVuZGVyPWZ1bmN0aW9uKHIsYyl7dmFyIGE9cjthLndyaXRlKCI8ZGl2Iik7YS53cml0ZUNvbnRyb2xEYXRhKGMpO2EuYWRkQ2xhc3MoInNhcFVpVmlldyIpO2EuYWRkQ2xhc3MoInNhcFVpSFRNTFZpZXciKTtWLmFkZERpc3BsYXlDbGFzcyhhLGMpO2lmKGMuZ2V0V2lkdGgoKSl7YS5hZGRTdHlsZSgid2lkdGgiLGMuZ2V0V2lkdGgoKSl9aWYoYy5nZXRIZWlnaHQoKSl7YS5hZGRTdHlsZSgiaGVpZ2h0IixjLmdldEhlaWdodCgpKX1hLndyaXRlU3R5bGVzKCk7YS53cml0ZUNsYXNzZXMoKTthLndyaXRlKCI+Iik7dmFyIGg9Yy5fb1RlbXBsYXRlLmlubmVySFRNTDt2YXIgYj1jLmdldENvbnRlbnQoKTt2YXIgZD1bXTt2YXIgZT1mdW5jdGlvbihjKXt2YXIgdD1ILl9nZXRIVE1MKGEsYyxoKTtpZih0KXtoPXR9ZWxzZXtkLnB1c2goYyl9fTtpZihiKXtpZihxLmlzQXJyYXkoYikpe2Zvcih2YXIgaT0wO2k8Yi5sZW5ndGg7aSsrKXtlKGJbaV0pfX1lbHNlIGlmKGIpe2UoYil9fWEud3JpdGUoaCk7Zm9yKHZhciBpPTA7aTxkLmxlbmd0aDtpKyspe2EucmVuZGVyQ29udHJvbChkW2ldKX1hLndyaXRlKCI8L2Rpdj4iKX07SC5fZ2V0SFRNTD1mdW5jdGlvbihyLGMsaCl7dmFyIGk9Yy5nZXRJZCgpO2g9aC5yZXBsYWNlKC8oPGRpdikvZ2ksIlxuJDEiKTt2YXIgYT1uZXcgUmVnRXhwKCc8ZGl2Lio/ZGF0YS1zYXAtdWktaWQ9IicraSsnIi4qPz48L2Rpdj4nLCJnaSIpO3ZhciBtPWEuZXhlYyhoKTtpZihtKXtoPWgucmVwbGFjZShtWzBdLHIuZ2V0SFRNTChjKSk7cmV0dXJuIGh9ZWxzZXtyZXR1cm4iIn19O3JldHVybiBIfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLkpTT05WaWV3UmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuSlNPTlZpZXdSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9KU09OVmlld1JlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9WaWV3UmVuZGVyZXInXSxmdW5jdGlvbihxLFYpeyJ1c2Ugc3RyaWN0Ijt2YXIgSj17fTtKLnJlbmRlcj1mdW5jdGlvbihyLGMpe3ZhciBhPXI7YS53cml0ZSgiPGRpdiIpO2Eud3JpdGVDb250cm9sRGF0YShjKTthLmFkZENsYXNzKCJzYXBVaVZpZXciKTthLmFkZENsYXNzKCJzYXBVaUpTT05WaWV3Iik7Vi5hZGREaXNwbGF5Q2xhc3MoYSxjKTtpZihjLmdldFdpZHRoKCkpe2EuYWRkU3R5bGUoIndpZHRoIixjLmdldFdpZHRoKCkpfWlmKGMuZ2V0SGVpZ2h0KCkpe2EuYWRkU3R5bGUoImhlaWdodCIsYy5nZXRIZWlnaHQoKSl9YS53cml0ZVN0eWxlcygpO2Eud3JpdGVDbGFzc2VzKCk7YS53cml0ZSgiPiIpO3ZhciBiPWMuZ2V0Q29udGVudCgpO2lmKGIpe2lmKGIubGVuZ3RoJiYhKGIgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Db250cm9sKSl7Zm9yKHZhciBpPTA7aTxiLmxlbmd0aDtpKyspe2EucmVuZGVyQ29udHJvbChiW2ldKX19ZWxzZXthLnJlbmRlckNvbnRyb2woYy5nZXRDb250ZW50KCkpfX1hLndyaXRlKCI8L2Rpdj4iKX07cmV0dXJuIEp9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuSlNWaWV3UmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuSlNWaWV3UmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvSlNWaWV3UmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1ZpZXdSZW5kZXJlciddLGZ1bmN0aW9uKHEsVil7InVzZSBzdHJpY3QiO3ZhciBKPXt9O0oucmVuZGVyPWZ1bmN0aW9uKHIsYyl7dmFyIGE9cjthLndyaXRlKCI8ZGl2Iik7YS53cml0ZUNvbnRyb2xEYXRhKGMpO2EuYWRkQ2xhc3MoInNhcFVpVmlldyIpO2EuYWRkQ2xhc3MoInNhcFVpSlNWaWV3Iik7Vi5hZGREaXNwbGF5Q2xhc3MoYSxjKTtpZihjLmdldFdpZHRoKCkpe2EuYWRkU3R5bGUoIndpZHRoIixjLmdldFdpZHRoKCkpfWlmKGMuZ2V0SGVpZ2h0KCkpe2EuYWRkU3R5bGUoImhlaWdodCIsYy5nZXRIZWlnaHQoKSl9YS53cml0ZVN0eWxlcygpO2Eud3JpdGVDbGFzc2VzKCk7YS53cml0ZSgiPiIpO3ZhciBiPWMuZ2V0Q29udGVudCgpO2lmKGIpe2lmKHEuaXNBcnJheShiKSl7Zm9yKHZhciBpPTA7aTxiLmxlbmd0aDtpKyspe2EucmVuZGVyQ29udHJvbChiW2ldKX19ZWxzZSBpZihiKXthLnJlbmRlckNvbnRyb2woYil9fWEud3JpdGUoIjwvZGl2PiIpfTtyZXR1cm4gSn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXdSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXdSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9UZW1wbGF0ZVZpZXdSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vVmlld1JlbmRlcmVyJ10sZnVuY3Rpb24ocSxWKXsidXNlIHN0cmljdCI7dmFyIFQ9e307VC5yZW5kZXI9ZnVuY3Rpb24ocixjKXt2YXIgYT1yO2Eud3JpdGUoIjxkaXYiKTthLndyaXRlQ29udHJvbERhdGEoYyk7YS5hZGRDbGFzcygic2FwVWlWaWV3Iik7YS5hZGRDbGFzcygic2FwVWlUbXBsVmlldyIpO1YuYWRkRGlzcGxheUNsYXNzKGEsYyk7YS5hZGRTdHlsZSgid2lkdGgiLGMuZ2V0V2lkdGgoKSk7YS5hZGRTdHlsZSgiaGVpZ2h0IixjLmdldEhlaWdodCgpKTthLndyaXRlU3R5bGVzKCk7YS53cml0ZUNsYXNzZXMoKTthLndyaXRlKCI+Iik7YS5yZW5kZXJDb250cm9sKGMuX29UZW1wbGF0ZSk7YS53cml0ZSgiPC9kaXY+Iil9O3JldHVybiBUfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUucm91dGluZy5IYXNoQ2hhbmdlcicpKXsKLy8gQ29weXJpZ2h0IChjKSAyMDEzIFNBUCBBRywgQWxsIFJpZ2h0cyBSZXNlcnZlZApqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnJvdXRpbmcuSGFzaENoYW5nZXInKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LnNpZ25hbHMnKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5Lmhhc2hlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3JvdXRpbmcvSGFzaENoYW5nZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnc2FwL3VpL3RoaXJkcGFydHkvc2lnbmFscycsJ3NhcC91aS90aGlyZHBhcnR5L2hhc2hlciddLGZ1bmN0aW9uKHEsRSxzLGgpeyJ1c2Ugc3RyaWN0Ijt2YXIgSD1FLmV4dGVuZCgic2FwLnVpLmNvcmUucm91dGluZy5IYXNoQ2hhbmdlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7RS5hcHBseSh0aGlzKX19KTtILnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7aWYodGhpcy5faW5pdGlhbGl6ZWQpe3Euc2FwLmxvZy5pbmZvKCJ0aGlzIEhhc2hDaGFuZ2VyIGluc3RhbmNlIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQuIik7cmV0dXJuIGZhbHNlfWhhc2hlci5jaGFuZ2VkLmFkZCh0aGlzLmZpcmVIYXNoQ2hhbmdlZCx0aGlzKTtpZighaGFzaGVyLmlzQWN0aXZlKCkpe2hhc2hlci5pbml0aWFsaXplZC5hZGRPbmNlKHRoaXMuZmlyZUhhc2hDaGFuZ2VkLHRoaXMpO2hhc2hlci5pbml0KCl9ZWxzZXt0aGlzLmZpcmVIYXNoQ2hhbmdlZChoYXNoZXIuZ2V0SGFzaCgpKX10aGlzLl9pbml0aWFsaXplZD10cnVlO3JldHVybiB0aGlzLl9pbml0aWFsaXplZH07SC5wcm90b3R5cGUuZmlyZUhhc2hDaGFuZ2VkPWZ1bmN0aW9uKG4sbyl7dGhpcy5maXJlRXZlbnQoImhhc2hDaGFuZ2VkIix7bmV3SGFzaDpuLG9sZEhhc2g6b30pfTtILnByb3RvdHlwZS5zZXRIYXNoPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJoYXNoU2V0Iix7c0hhc2g6YX0pO2hhc2hlci5zZXRIYXNoKGEpfTtILnByb3RvdHlwZS5yZXBsYWNlSGFzaD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiaGFzaFJlcGxhY2VkIix7c0hhc2g6YX0pO2hhc2hlci5yZXBsYWNlSGFzaChhKX07SC5wcm90b3R5cGUuZ2V0SGFzaD1mdW5jdGlvbigpe3JldHVybiBoYXNoZXIuZ2V0SGFzaCgpfTtILnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7aGFzaGVyLmNoYW5nZWQucmVtb3ZlKHRoaXMuZmlyZUhhc2hDaGFuZ2VkLHRoaXMpO0UucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfTsoZnVuY3Rpb24oKXt2YXIgXz1udWxsO0guZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oKXtpZighXyl7Xz1uZXcgSCgpfXJldHVybiBffTtILnJlcGxhY2VIYXNoQ2hhbmdlcj1mdW5jdGlvbihvKXtpZihfKXtxLmV4dGVuZChvLm1FdmVudFJlZ2lzdHJ5LF8ubUV2ZW50UmVnaXN0cnkpO18uZGVzdHJveSgpfV89b319KCkpO3JldHVybiBIfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5JykpewovKiEKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3JvdXRpbmcvSGlzdG9yeSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vSGFzaENoYW5nZXInXSxmdW5jdGlvbihxLEgpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1mdW5jdGlvbihoKXt0aGlzLl9pSGlzdG9yeUxlbmd0aD13aW5kb3cuaGlzdG9yeS5sZW5ndGg7dGhpcy5hSGlzdG9yeT1bXTt0aGlzLl9iSXNJbml0aWFsPXRydWU7aWYoIWgpe3Euc2FwLmxvZy5lcnJvcigic2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5IGNvbnN0cnVjdG9yIHdhcyBjYWxsZWQgYW5kIGl0IGRpZCBub3QgZ2V0IGEgaGFzaENoYW5nZXIgYXMgcGFyYW1ldGVyIil9dGhpcy5fb0hhc2hDaGFuZ2VyPWg7dGhpcy5fb0hhc2hDaGFuZ2VyLmF0dGFjaEV2ZW50KCJoYXNoQ2hhbmdlZCIsdGhpcy5fb25IYXNoQ2hhbmdlLHRoaXMpO3RoaXMuX29IYXNoQ2hhbmdlci5hdHRhY2hFdmVudCgiaGFzaFJlcGxhY2VkIix0aGlzLl9oYXNoUmVwbGFjZWQsdGhpcyk7dGhpcy5fb0hhc2hDaGFuZ2VyLmF0dGFjaEV2ZW50KCJoYXNoU2V0Iix0aGlzLl9oYXNoU2V0LHRoaXMpO3RoaXMuX3Jlc2V0KCl9O2EucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24obil7dGhpcy5fb0hhc2hDaGFuZ2VyLmRldGFjaEV2ZW50KCJoYXNoQ2hhbmdlZCIsdGhpcy5fb25IYXNoQ2hhbmdlLHRoaXMpO3RoaXMuX29IYXNoQ2hhbmdlci5kZXRhY2hFdmVudCgiaGFzaFJlcGxhY2VkIix0aGlzLl9oYXNoUmVwbGFjZWQsdGhpcyk7dGhpcy5fb0hhc2hDaGFuZ2VyLmRldGFjaEV2ZW50KCJoYXNoU2V0Iix0aGlzLl9oYXNoU2V0LHRoaXMpO3RoaXMuX29IYXNoQ2hhbmdlcj1udWxsfTthLnByb3RvdHlwZS5nZXREaXJlY3Rpb249ZnVuY3Rpb24obil7aWYobiE9PXVuZGVmaW5lZCYmdGhpcy5fYklzSW5pdGlhbCl7cmV0dXJuIHVuZGVmaW5lZH1pZihuPT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5fc0N1cnJlbnREaXJlY3Rpb259cmV0dXJuIHRoaXMuX2dldERpcmVjdGlvbihuKX07YS5wcm90b3R5cGUuZ2V0UHJldmlvdXNIYXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYUhpc3RvcnlbdGhpcy5pSGlzdG9yeVBvc2l0aW9uLTFdfTthLnByb3RvdHlwZS5fcmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmFIaXN0b3J5Lmxlbmd0aD0wO3RoaXMuaUhpc3RvcnlQb3NpdGlvbj0wO3RoaXMuX2JVbmtub3duPXRydWU7dGhpcy5hSGlzdG9yeVswXT10aGlzLl9vSGFzaENoYW5nZXIuZ2V0SGFzaCgpfTthLnByb3RvdHlwZS5fZ2V0RGlyZWN0aW9uPWZ1bmN0aW9uKG4saCl7dmFyIGQ9c2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5RGlyZWN0aW9uO2lmKHRoaXMuX29OZXh0SGFzaCYmdGhpcy5fb05leHRIYXNoLnNIYXNoPT09bil7cmV0dXJuIGQuTmV3RW50cnl9aWYodGhpcy5fYlVua25vd24pe3JldHVybiBkLlVua25vd259aWYoaCl7cmV0dXJuIGQuTmV3RW50cnl9aWYodGhpcy5hSGlzdG9yeVt0aGlzLmlIaXN0b3J5UG9zaXRpb24rMV09PT1uJiZ0aGlzLmFIaXN0b3J5W3RoaXMuaUhpc3RvcnlQb3NpdGlvbi0xXT09PW4pe3JldHVybiBkLlVua25vd259aWYodGhpcy5hSGlzdG9yeVt0aGlzLmlIaXN0b3J5UG9zaXRpb24tMV09PT1uKXtyZXR1cm4gZC5CYWNrd2FyZHN9aWYodGhpcy5hSGlzdG9yeVt0aGlzLmlIaXN0b3J5UG9zaXRpb24rMV09PT1uKXtyZXR1cm4gZC5Gb3J3YXJkc31yZXR1cm4gZC5Vbmtub3dufTthLnByb3RvdHlwZS5fb25IYXNoQ2hhbmdlPWZ1bmN0aW9uKGUpe3RoaXMuX2hhc2hDaGFuZ2UoZS5nZXRQYXJhbWV0ZXIoIm5ld0hhc2giKSl9O2EucHJvdG90eXBlLl9oYXNoQ2hhbmdlPWZ1bmN0aW9uKG4pe3ZhciBkPXNhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeURpcmVjdGlvbixiPXdpbmRvdy5oaXN0b3J5Lmxlbmd0aCxEO2lmKHRoaXMuX29OZXh0SGFzaCYmdGhpcy5fb05leHRIYXNoLmJXYXNSZXBsYWNlZCYmdGhpcy5fb05leHRIYXNoLnNIYXNoPT09bil7dGhpcy5hSGlzdG9yeVt0aGlzLmlIaXN0b3J5UG9zaXRpb25dPW47dGhpcy5fb05leHRIYXNoPW51bGw7cmV0dXJufXRoaXMuX2JJc0luaXRpYWw9ZmFsc2U7RD10aGlzLl9zQ3VycmVudERpcmVjdGlvbj10aGlzLl9nZXREaXJlY3Rpb24obix0aGlzLl9pSGlzdG9yeUxlbmd0aDx3aW5kb3cuaGlzdG9yeS5sZW5ndGgpO2lmKHRoaXMuX29OZXh0SGFzaCYmIXRoaXMuX29OZXh0SGFzaC5iV2FzUmVwbGFjZWQpe3RoaXMuX2lIaXN0b3J5TGVuZ3RoPWIrMX1lbHNle3RoaXMuX2lIaXN0b3J5TGVuZ3RoPWJ9aWYodGhpcy5fb05leHRIYXNoKXt0aGlzLl9vTmV4dEhhc2g9bnVsbH1pZihEPT09ZC5Vbmtub3duKXt0aGlzLl9yZXNldCgpO3JldHVybn10aGlzLl9iVW5rbm93bj1mYWxzZTtpZihEPT09ZC5OZXdFbnRyeSl7aWYodGhpcy5pSGlzdG9yeVBvc2l0aW9uKzE8dGhpcy5hSGlzdG9yeS5sZW5ndGgpe3RoaXMuYUhpc3Rvcnk9dGhpcy5hSGlzdG9yeS5zbGljZSgwLHRoaXMuaUhpc3RvcnlQb3NpdGlvbisxKX10aGlzLmFIaXN0b3J5LnB1c2gobik7dGhpcy5pSGlzdG9yeVBvc2l0aW9uKz0xO3JldHVybn1pZihEPT09ZC5Gb3J3YXJkcyl7dGhpcy5pSGlzdG9yeVBvc2l0aW9uKys7cmV0dXJufWlmKEQ9PT1kLkJhY2t3YXJkcyl7dGhpcy5pSGlzdG9yeVBvc2l0aW9uLS19fTthLnByb3RvdHlwZS5faGFzaFNldD1mdW5jdGlvbihlKXt0aGlzLl9oYXNoQ2hhbmdlZEJ5QXBwKGUuZ2V0UGFyYW1ldGVyKCJzSGFzaCIpLGZhbHNlKX07YS5wcm90b3R5cGUuX2hhc2hSZXBsYWNlZD1mdW5jdGlvbihlKXt0aGlzLl9oYXNoQ2hhbmdlZEJ5QXBwKGUuZ2V0UGFyYW1ldGVyKCJzSGFzaCIpLHRydWUpfTthLnByb3RvdHlwZS5faGFzaENoYW5nZWRCeUFwcD1mdW5jdGlvbihuLHcpe3RoaXMuX29OZXh0SGFzaD17c0hhc2g6bixiV2FzUmVwbGFjZWQ6d319OyhmdW5jdGlvbigpe3ZhciBpPW5ldyBhKEguZ2V0SW5zdGFuY2UoKSk7YS5nZXRJbnN0YW5jZT1mdW5jdGlvbigpe3JldHVybiBpfX0oKSk7cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5yb3V0aW5nLlJvdXRlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUucm91dGluZy5Sb3V0ZScpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkuY3Jvc3Nyb2FkcycpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkuc2lnbmFscycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3JvdXRpbmcvUm91dGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnc2FwL3VpL3RoaXJkcGFydHkvY3Jvc3Nyb2FkcycsJ3NhcC91aS90aGlyZHBhcnR5L3NpZ25hbHMnXSxmdW5jdGlvbihxLEUsYyxzKXsidXNlIHN0cmljdCI7dmFyIFI9RS5leHRlbmQoInNhcC51aS5jb3JlLnJvdXRpbmcuUm91dGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihyLEMscCl7aWYoIUMubmFtZSl7cS5zYXAubG9nLmVycm9yKCJBIG5hbWUgaGFzIHRvIGJlIHNwZWNpZmllZCBmb3IgZXZlcnkgcm91dGUiKX12YXIgdD10aGlzLHY9Qy5wYXR0ZXJuO2lmKCFxLmlzQXJyYXkodikpe3Y9W3ZdfWlmKHEuaXNBcnJheShDLnN1YnJvdXRlcykpe3ZhciBTPUMuc3Vicm91dGVzO0Muc3Vicm91dGVzPXt9O3EuZWFjaChTLGZ1bmN0aW9uKGksbyl7Qy5zdWJyb3V0ZXNbby5uYW1lXT1vfSl9dGhpcy5fYVBhdHRlcm49W107dGhpcy5fYVJvdXRlcz1bXTt0aGlzLl9vUGFyZW50PXA7dGhpcy5fb0NvbmZpZz1DO2lmKEMuc3Vicm91dGVzKXtxLmVhY2goQy5zdWJyb3V0ZXMsZnVuY3Rpb24oYSxvKXtpZihvLm5hbWU9PXVuZGVmaW5lZCl7by5uYW1lPWF9ci5hZGRSb3V0ZShvLHQpfSl9aWYoQy5wYXR0ZXJuPT09dW5kZWZpbmVkKXtyZXR1cm59cS5lYWNoKHYsZnVuY3Rpb24oaSxhKXt0Ll9hUGF0dGVybltpXT1hO3QuX2FSb3V0ZXNbaV09ci5fb1JvdXRlci5hZGRSb3V0ZShhKTt0Ll9hUm91dGVzW2ldLm1hdGNoZWQuYWRkKGZ1bmN0aW9uKCl7dmFyIEE9e307cS5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihiLGQpe0FbdC5fYVJvdXRlc1tpXS5fcGFyYW1zSWRzW2JdXT1kfSk7dC5fcm91dGVNYXRjaGVkKHIsQSx0cnVlKX0pfSl9LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiZ2V0VVJMIiwiZ2V0UGF0dGVybiJdfX0pO1IucHJvdG90eXBlLmdldFVSTD1mdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5fYVJvdXRlc1swXS5pbnRlcnBvbGF0ZShwKX07Ui5wcm90b3R5cGUuZ2V0UGF0dGVybj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hUGF0dGVyblswXX07Ui5wcm90b3R5cGUuX3JvdXRlTWF0Y2hlZD1mdW5jdGlvbihyLGEsaSl7dmFyIHYscCx0LFQ7aWYodGhpcy5fb1BhcmVudCl7cD10aGlzLl9vUGFyZW50Ll9yb3V0ZU1hdGNoZWQocixhKTt0PXAub1RhcmdldFBhcmVudDtUPXAub1RhcmdldENvbnRyb2x9dmFyIEM9cS5leHRlbmQoe30sci5fb0NvbmZpZyx0aGlzLl9vQ29uZmlnKTtpZigoVHx8Qy50YXJnZXRDb250cm9sKSYmQy50YXJnZXRBZ2dyZWdhdGlvbil7aWYoIXQpe2lmKEMudGFyZ2V0UGFyZW50KXtUPXNhcC51aS5nZXRDb3JlKCkuYnlJZChDLnRhcmdldFBhcmVudCkuYnlJZChDLnRhcmdldENvbnRyb2wpfX1lbHNle2lmKEMudGFyZ2V0Q29udHJvbCl7VD10LmJ5SWQoQy50YXJnZXRDb250cm9sKX19aWYoIVQpe1Q9c2FwLnVpLmdldENvcmUoKS5ieUlkKEMudGFyZ2V0Q29udHJvbCl9aWYoVCl7dmFyIEE9VC5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKClbQy50YXJnZXRBZ2dyZWdhdGlvbl07aWYoQSl7dmFyIFY9Qy52aWV3O2lmKEMudmlld1BhdGgpe1Y9Qy52aWV3UGF0aCsiLiIrVn12PXIuZ2V0VmlldyhWLEMudmlld1R5cGUsQy52aWV3SWQpO2lmKEMuY2xlYXJUYXJnZXQ9PT10cnVlKXtUW0EuX3NSZW1vdmVBbGxNdXRhdG9yXSgpfVRbQS5fc011dGF0b3JdKHYpfWVsc2V7cS5zYXAubG9nLmVycm9yKCJDb250cm9sICIrQy50YXJnZXRDb250cm9sKyIgZG9lcyBub3QgaGFzIGFuIGFnZ3JlZ2F0aW9uIGNhbGxlZCAiK0MudGFyZ2V0QWdncmVnYXRpb24pfX1lbHNle3Euc2FwLmxvZy5lcnJvcigiQ29udHJvbCB3aXRoIElEICIrQy50YXJnZXRDb250cm9sKyIgY291bGQgbm90IGJlIGZvdW5kIil9fWlmKEMuY2FsbGJhY2spe0MuY2FsbGJhY2sodGhpcyxhLEMsVCx2KX1yLmZpcmVSb3V0ZU1hdGNoZWQoe25hbWU6Qy5uYW1lLGFyZ3VtZW50czphLHRhcmdldENvbnRyb2w6VCx2aWV3OnYsY29uZmlnOkN9KTtpZihpKXtyLmZpcmVSb3V0ZVBhdHRlcm5NYXRjaGVkKHtuYW1lOkMubmFtZSxhcmd1bWVudHM6YSx0YXJnZXRDb250cm9sOlQsdmlldzp2LGNvbmZpZzpDfSl9cmV0dXJue29UYXJnZXRQYXJlbnQ6dixvVGFyZ2V0Q29udHJvbDpUfX07cmV0dXJuIFJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuU2VyaWFsaXplcicpKXsKLyoKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5TZXJpYWxpemVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9zZXJpYWxpemVyL1NlcmlhbGl6ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJ10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIFM9RS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5TZXJpYWxpemVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocixzLGIsdyxmKXtFLmFwcGx5KHRoaXMpO3RoaXMuX29Sb290Q29udHJvbD1yO3RoaXMuX2RlbGVnYXRlPXM7dGhpcy5fYlNraXBSb290PSEhYjt0aGlzLl9vV2luZG93PXd8fHdpbmRvdzt0aGlzLl9mblNraXBBZ2dyZWdhdGlvbnM9Zn19KTtTLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VyaWFsaXplUmVjdXJzaXZlKHRoaXMuX29Sb290Q29udHJvbCwwKX07Uy5wcm90b3R5cGUuX3NlcmlhbGl6ZVJlY3Vyc2l2ZT1mdW5jdGlvbihjLGwsYSxiKXt2YXIgQz1bXTt2YXIgdz0oIXRoaXMuX2JTa2lwUm9vdHx8bCE9PTApO2lmKHcpe2MuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpO3ZhciBzPXRoaXMuX2RlbGVnYXRlLnN0YXJ0KGMsYSxiKTt2YXIgbT10aGlzLl9kZWxlZ2F0ZS5taWRkbGUoYyxhLGIpO0MucHVzaChzK20pfWlmKGw9PT0wfHwhKHRoaXMuX2ZuU2tpcEFnZ3JlZ2F0aW9ucyYmdGhpcy5fZm5Ta2lwQWdncmVnYXRpb25zKGMpKSl7dmFyIEE9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpO2lmKEEpe2Zvcih2YXIgbiBpbiBBKXt2YXIgZT1bXTt2YXIgbz1BW25dO3ZhciB2PWNbby5fc0dldHRlcl0oKTtpZihjLmdldEJpbmRpbmdQYXRoKG4pJiZjLmdldEJpbmRpbmdJbmZvKG4pLnRlbXBsYXRlKXtlLnB1c2goYy5nZXRCaW5kaW5nSW5mbyhuKS50ZW1wbGF0ZSl9ZWxzZSBpZih2JiZ2Lmxlbmd0aCl7Zm9yKHZhciBpPTA7aTx2Lmxlbmd0aDtpKyspe3ZhciBPPXZbaV07aWYoTyBpbnN0YW5jZW9mIHRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUuRWxlbWVudCl7ZS5wdXNoKE8pfX19ZWxzZSBpZih2IGluc3RhbmNlb2YgdGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5FbGVtZW50KXtlLnB1c2godil9aWYoZS5sZW5ndGg+MCl7aWYodyl7Qy5wdXNoKHRoaXMuX2RlbGVnYXRlLnN0YXJ0QWdncmVnYXRpb24oYyxuKSl9dmFyIGQ9dGhpcy5faXNEZWZhdWx0QWdncmVnYXRpb24oYyxuKTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7Qy5wdXNoKHRoaXMuX3NlcmlhbGl6ZVJlY3Vyc2l2ZShlW2ldLGwrMSxuLGQpKX1pZih3KXtDLnB1c2godGhpcy5fZGVsZWdhdGUuZW5kQWdncmVnYXRpb24oYyxuKSl9fX19fWlmKHcpe3ZhciBmPXRoaXMuX2RlbGVnYXRlLmVuZChjLGEsYik7Qy5wdXNoKGYpfXJldHVybiBDLmpvaW4oIiIpfTtTLnByb3RvdHlwZS5faXNEZWZhdWx0QWdncmVnYXRpb249ZnVuY3Rpb24oYyxhKXtyZXR1cm4gYy5nZXRNZXRhZGF0YSgpLmdldERlZmF1bHRBZ2dyZWdhdGlvbk5hbWUoKT09PWF9O3JldHVybiBTfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLkRlbGVnYXRlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLkRlbGVnYXRlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9zZXJpYWxpemVyL2RlbGVnYXRlL0RlbGVnYXRlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBEPUUuZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuRGVsZWdhdGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0UuYXBwbHkodGhpcyl9fSk7RC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiIifTtELnByb3RvdHlwZS5taWRkbGU9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiIifTtELnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiIifTtELnByb3RvdHlwZS5zdGFydEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsYSl7cmV0dXJuIiJ9O0QucHJvdG90eXBlLmVuZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsYSl7cmV0dXJuIiJ9O3JldHVybiBEfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLkhUTUwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuSFRNTCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvc2VyaWFsaXplci9kZWxlZ2F0ZS9IVE1MIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9EZWxlZ2F0ZSddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiO3ZhciBIPUQuZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuSFRNTCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGcsRyl7RC5hcHBseSh0aGlzKTt0aGlzLl9mbkdldENvbnRyb2xJZD1nO3RoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZT1HfX0pO0gucHJvdG90eXBlLnN0YXJ0QWdncmVnYXRpb249ZnVuY3Rpb24oYyxhKXtyZXR1cm4nPGRpdiBkYXRhLXNhcC11aS1hZ2dyZWdhdGlvbj0iJythKyciPid9O0gucHJvdG90eXBlLmVuZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsYSl7cmV0dXJuJzwvZGl2Pid9O0gucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGMsYSxpKXtyZXR1cm4iPGRpdiJ9O0gucHJvdG90eXBlLm1pZGRsZT1mdW5jdGlvbihjLGEsYil7dmFyIGg9W107dmFyIEk9KHRoaXMuX2ZuR2V0Q29udHJvbElkKT90aGlzLl9mbkdldENvbnRyb2xJZChjKTpjLmdldElkKCk7aWYoSS5pbmRleE9mKCJfXyIpIT09MCl7aC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiaWQiLEkpKX1oLnB1c2godGhpcy5fY3JlYXRlQXR0cmlidXRlKCJkYXRhLXNhcC11aS10eXBlIixjLmdldE1ldGFkYXRhKCkuX3NDbGFzc05hbWUpKTtpZihjLmFDdXN0b21TdHlsZUNsYXNzZXMpe3ZhciBDPWMuYUN1c3RvbVN0eWxlQ2xhc3Nlczt2YXIgZD1bXTtmb3IodmFyIGk9MDtpPEMubGVuZ3RoO2krKyl7dmFyIHM9Q1tpXTtpZighcS5zYXAuc3RhcnRzV2l0aChzLCJzYXBNIikmJiFxLnNhcC5zdGFydHNXaXRoKHMsInNhcFVpIikpe2QucHVzaChzKX19aWYoZC5sZW5ndGg+MCl7aC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiY2xhc3MiLGQuam9pbigiICIpKSl9fWlmKHRoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZSl7dmFyIGU9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEV2ZW50cygpO2Zvcih2YXIgRSBpbiBlKXtpZihjLmhhc0xpc3RlbmVycyhFKSl7dmFyIGY9Yy5tRXZlbnRSZWdpc3RyeVtFXTtmb3IodmFyIGk9MDtpPGYubGVuZ3RoO2krKyl7dmFyIGc9dGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lKGZbaV0pO2lmKGcpe2gucHVzaCh0aGlzLl9jcmVhdGVBdHRyaWJ1dGUoImRhdGEtIit0aGlzLl9jcmVhdGVIdG1sQXR0cmlidXRlTmFtZShFKSxnKSk7YnJlYWt9fX19fXZhciBBPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxBc3NvY2lhdGlvbnMoKTt0aGlzLl9jcmVhdGVBdHRyaWJ1dGVzKGgsYyxBLGZ1bmN0aW9uKG4sdil7aWYoQVtuXS5tdWx0aXBsZSl7cmV0dXJuIHYuam9pbigiICIpfXJldHVybiB2fSxmdW5jdGlvbihuLHYpe3JldHVybih2IT09bnVsbCYmdHlwZW9mIHYhPT11bmRlZmluZWQmJnYhPT0iIil9KTt2YXIgcD1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsUHJvcGVydGllcygpO3RoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoaCxjLHAsbnVsbCxmdW5jdGlvbihuLHYpe3JldHVybighIWMuZ2V0QmluZGluZ0luZm8obil8fCh2IT09bnVsbCYmdHlwZW9mIHYhPT11bmRlZmluZWQmJnYhPT0iIikpfSk7dmFyIG89Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpO3RoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoaCxjLG8sbnVsbCxmdW5jdGlvbihuLHYpe2lmKCFjLmdldEJpbmRpbmdJbmZvKG4pJiYoIXZ8fCh0eXBlb2YgdiE9PSJzdHJpbmciKSkpe3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0pO2gucHVzaCgnPicpO3JldHVybiBoLmpvaW4oJycpfTtILnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiI8L2Rpdj4ifTtILnByb3RvdHlwZS5fY3JlYXRlQXR0cmlidXRlcz1mdW5jdGlvbihoLGMsbyxnLHYpe2Zvcih2YXIgbiBpbiBvKXt2YXIgcD1vW25dO3ZhciBHPXAuX3NHZXR0ZXI7aWYoY1tHXSl7dmFyIFY9Y1tHXSgpO1Y9Zz9nKG4sVik6VjtpZighYy5nZXRCaW5kaW5nSW5mbyhuKSl7aWYoViE9PXAuZGVmYXVsdFZhbHVlKXtpZighdnx8dihuLFYpKXtoLnB1c2godGhpcy5fY3JlYXRlQXR0cmlidXRlKCJkYXRhLSIrdGhpcy5fY3JlYXRlSHRtbEF0dHJpYnV0ZU5hbWUobiksVikpfX19ZWxzZXtoLnB1c2godGhpcy5fY3JlYXRlRGF0YUJpbmRpbmdBdHRyaWJ1dGUoYyxuLFYpKX19fX07SC5wcm90b3R5cGUuX2NyZWF0ZURhdGFCaW5kaW5nQXR0cmlidXRlPWZ1bmN0aW9uKGMsbix2KXt2YXIgYj1jLmdldEJpbmRpbmdJbmZvKG4pO3ZhciBCPW51bGw7dmFyIHA9djtpZighYi5iaW5kaW5nU3RyaW5nKXtpZihiLmJpbmRpbmcpe3ZhciBDPWIuYmluZGluZy5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKTtpZihDPT09InNhcC51aS5tb2RlbC5Qcm9wZXJ0eUJpbmRpbmcifHxDPT09InNhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZVByb3BlcnR5QmluZGluZyIpe0I9Yi5iaW5kaW5nLmdldFZhbHVlKCl9fWlmKGIucGFydHMpe2I9Yi5wYXJ0c1swXX12YXIgbT1iLm1vZGVsO2lmKEI9PT12fHxCPT09bnVsbCl7cD0ieyIrKG0/KG0rIj4iK2IucGF0aCk6Yi5wYXRoKSsifSJ9fWVsc2V7cD1iLmJpbmRpbmdTdHJpbmd9cmV0dXJuIHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiZGF0YS0iK3RoaXMuX2NyZWF0ZUh0bWxBdHRyaWJ1dGVOYW1lKG4pLHApfTtILnByb3RvdHlwZS5fY3JlYXRlQXR0cmlidXRlPWZ1bmN0aW9uKGEsdil7cmV0dXJuJyAnK2ErJz0iJyt2KyciJ307SC5wcm90b3R5cGUuX2NyZWF0ZUh0bWxBdHRyaWJ1dGVOYW1lPWZ1bmN0aW9uKG4pe3JldHVybiBxLnNhcC5oeXBoZW4obil9O3JldHVybiBIfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLlhNTCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5kZWxlZ2F0ZS5YTUwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL3NlcmlhbGl6ZXIvZGVsZWdhdGUvWE1MIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9EZWxlZ2F0ZSddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiO3ZhciBYPUQuZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuWE1MIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZCxnLEcsbSl7RC5hcHBseSh0aGlzKTt0aGlzLl9zRGVmYXVsdE5hbWVzcGFjZT1kO3RoaXMuX2ZuR2V0Q29udHJvbElkPWc7dGhpcy5fZm5NZW1vcml6ZVBhY2thZ2U9bTt0aGlzLl9mbkdldEV2ZW50SGFuZGxlck5hbWU9R319KTtYLnByb3RvdHlwZS5zdGFydEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsYSl7cmV0dXJuJzwnK3RoaXMuX2NyZWF0ZUFnZ3JlZ2F0aW9uTmFtZShjLGEpKyc+J307WC5wcm90b3R5cGUuZW5kQWdncmVnYXRpb249ZnVuY3Rpb24oYyxhKXtyZXR1cm4nPC8nK3RoaXMuX2NyZWF0ZUFnZ3JlZ2F0aW9uTmFtZShjLGEpKyc+J307WC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiI8Iit0aGlzLl9jcmVhdGVUYWdOYW1lKGMpfTtYLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiI8LyIrdGhpcy5fY3JlYXRlVGFnTmFtZShjKSsiPiJ9O1gucHJvdG90eXBlLm1pZGRsZT1mdW5jdGlvbihjLGEsYil7dmFyIHg9W107dmFyIEk9KHRoaXMuX2ZuR2V0Q29udHJvbElkKT90aGlzLl9mbkdldENvbnRyb2xJZChjKTpjLmdldElkKCk7aWYoSS5pbmRleE9mKCJfXyIpIT09MCl7eC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiaWQiLEkpKX1pZihjLmFDdXN0b21TdHlsZUNsYXNzZXMpe3ZhciBDPWMuYUN1c3RvbVN0eWxlQ2xhc3Nlczt2YXIgZD1bXTtmb3IodmFyIGk9MDtpPEMubGVuZ3RoO2krKyl7dmFyIHM9Q1tpXTtpZighcS5zYXAuc3RhcnRzV2l0aChzLCJzYXBNIikmJiFxLnNhcC5zdGFydHNXaXRoKHMsInNhcFVpIikpe2QucHVzaChzKX19aWYoZC5sZW5ndGg+MCl7eC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiY2xhc3MiLGQuam9pbigiICIpKSl9fWlmKHRoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZSl7dmFyIGU9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEV2ZW50cygpO2Zvcih2YXIgRSBpbiBlKXtpZihjLmhhc0xpc3RlbmVycyhFKSl7dmFyIGY9Yy5tRXZlbnRSZWdpc3RyeVtFXTtmb3IodmFyIGk9MDtpPGYubGVuZ3RoO2krKyl7dmFyIGg9dGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lKGZbaV0pO2lmKGgpe3gucHVzaCh0aGlzLl9jcmVhdGVBdHRyaWJ1dGUoRSxoKSk7YnJlYWt9fX19fXZhciBBPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxBc3NvY2lhdGlvbnMoKTt0aGlzLl9jcmVhdGVBdHRyaWJ1dGVzKHgsYyxBLGZ1bmN0aW9uKG4sdil7aWYoQVtuXS5tdWx0aXBsZSl7cmV0dXJuIHYuam9pbigiICIpfXJldHVybiB2fSxmdW5jdGlvbihuLHYpe3JldHVybih2IT09bnVsbCYmdHlwZW9mIHYhPT11bmRlZmluZWQmJnYhPT0iIil9KTt2YXIgcD1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsUHJvcGVydGllcygpO3RoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoeCxjLHAsbnVsbCxmdW5jdGlvbihuLHYpe3JldHVybighIWMuZ2V0QmluZGluZ0luZm8obil8fCh2IT09bnVsbCYmdHlwZW9mIHYhPT11bmRlZmluZWQmJnYhPT0iIikpfSk7dmFyIG89Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpO3RoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoeCxjLG8sbnVsbCxmdW5jdGlvbihuLHYpe2lmKCFjLmdldEJpbmRpbmdJbmZvKG4pJiYoIXZ8fCh0eXBlb2YgdiE9PSJzdHJpbmciKSkpe3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0pO3gucHVzaCgnPicpO3JldHVybiB4LmpvaW4oJycpfTtYLnByb3RvdHlwZS5fY3JlYXRlQXR0cmlidXRlcz1mdW5jdGlvbih4LGMsbyxnLHYpe2Zvcih2YXIgbiBpbiBvKXt2YXIgcD1vW25dO3ZhciBHPXAuX3NHZXR0ZXI7aWYoY1tHXSl7dmFyIFY9Y1tHXSgpO1Y9Zz9nKG4sVik6VjtpZighYy5nZXRCaW5kaW5nSW5mbyhuKSl7aWYoViE9PXAuZGVmYXVsdFZhbHVlKXtpZighdnx8dihuLFYpKXt4LnB1c2godGhpcy5fY3JlYXRlQXR0cmlidXRlKG4sVikpfX19ZWxzZXt4LnB1c2godGhpcy5fY3JlYXRlRGF0YUJpbmRpbmdBdHRyaWJ1dGUoYyxuLFYpKX19fX07WC5wcm90b3R5cGUuX2NyZWF0ZURhdGFCaW5kaW5nQXR0cmlidXRlPWZ1bmN0aW9uKGMsbix2KXt2YXIgYj1jLmdldEJpbmRpbmdJbmZvKG4pO3ZhciBCPW51bGw7dmFyIHA9djtpZighYi5iaW5kaW5nU3RyaW5nKXtpZihiLmJpbmRpbmcpe3ZhciBDPWIuYmluZGluZy5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKTtpZihDPT09InNhcC51aS5tb2RlbC5Qcm9wZXJ0eUJpbmRpbmcifHxDPT09InNhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZVByb3BlcnR5QmluZGluZyIpe0I9Yi5iaW5kaW5nLmdldFZhbHVlKCl9fWlmKGIucGFydHMpe2I9Yi5wYXJ0c1swXX12YXIgbT1iLm1vZGVsO2lmKEI9PT12fHxCPT09bnVsbCl7cD0ieyIrKG0/KG0rIj4iK2IucGF0aCk6Yi5wYXRoKSsifSJ9fWVsc2V7cD1iLmJpbmRpbmdTdHJpbmd9cmV0dXJuIHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZShuLHApfTtYLnByb3RvdHlwZS5fY3JlYXRlQXR0cmlidXRlPWZ1bmN0aW9uKGEsdil7cmV0dXJuJyAnK2ErJz0iJyt2KyciJ307WC5wcm90b3R5cGUuX2NyZWF0ZVRhZ05hbWU9ZnVuY3Rpb24oYyl7dmFyIEM9Yy5nZXRNZXRhZGF0YSgpLl9zQ2xhc3NOYW1lO3ZhciBsPUMubGFzdEluZGV4T2YoIi4iKTt2YXIgcz0obD09PS0xKT9DOkMuc3Vic3RyaW5nKGwrMSk7dmFyIHA9KGw9PT0tMSk/QzpDLnN1YnN0cmluZygwLGwpO2lmKHRoaXMuX2ZuTWVtb3JpemVQYWNrYWdlKXt0aGlzLl9mbk1lbW9yaXplUGFja2FnZShjLHApfXJldHVybiB0aGlzLl9jcmVhdGVOYW1lc3BhY2UocCxzKX07WC5wcm90b3R5cGUuX2NyZWF0ZUFnZ3JlZ2F0aW9uTmFtZT1mdW5jdGlvbihjLGEpe3ZhciBDPWMuZ2V0TWV0YWRhdGEoKS5fc0NsYXNzTmFtZTt2YXIgbD1DLmxhc3RJbmRleE9mKCIuIik7dmFyIHA9KGw9PT0tMSk/QzpDLnN1YnN0cmluZygwLGwpO3JldHVybiB0aGlzLl9jcmVhdGVOYW1lc3BhY2UocCxhKX07WC5wcm90b3R5cGUuX2NyZWF0ZU5hbWVzcGFjZT1mdW5jdGlvbihuLE4pe2lmKHRoaXMuX3NEZWZhdWx0TmFtZXNwYWNlJiZ0aGlzLl9zRGVmYXVsdE5hbWVzcGFjZT09PW4pe3JldHVybiBOfWVsc2V7cmV0dXJuIG4rIjoiK059fTtyZXR1cm4gWH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLndzLldlYlNvY2tldCcpKXsKLyohCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS53cy5XZWJTb2NrZXQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS93cy9XZWJTb2NrZXQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvRGV2aWNlJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlcicsJy4vUmVhZHlTdGF0ZSddLGZ1bmN0aW9uKHEsRCxFLFIpeyJ1c2Ugc3RyaWN0Ijt2YXIgVz1FLmV4dGVuZCgic2FwLnVpLmNvcmUud3MuV2ViU29ja2V0Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24odSxwKXtFLmFwcGx5KHRoaXMpO2lmKCFELnN1cHBvcnQud2Vic29ja2V0KXt0aHJvdyBuZXcgRXJyb3IoIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBXZWJTb2NrZXRzLiIpfWlmKHR5cGVvZih1KSE9PSJzdHJpbmciKXt0aHJvdyBuZXcgRXJyb3IoInNVcmwgbXVzdCBiZSBhIHN0cmluZy4iKX1pZih0eXBlb2YocCkhPT0ndW5kZWZpbmVkJyYmIXEuaXNBcnJheShwKSYmdHlwZW9mKHApIT09J3N0cmluZycpe3Rocm93IG5ldyBFcnJvcigiYVByb3RvY29scyBtdXN0IGJlIGEgc3RyaW5nLCBhcnJheSBvZiBzdHJpbmdzIG9yIHVuZGVmaW5lZC4iKX10aGlzLl9vcGVuQ29ubmVjdGlvbih1LHApfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbInNlbmQiLCJjbG9zZSIsImdldFJlYWR5U3RhdGUiLCJnZXRQcm90b2NvbCJdfX0pO1cucHJvdG90eXBlLmdldEludGVyZmFjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtXLk1fRVZFTlRTPXtPcGVuOiJvcGVuIixDbG9zZToiY2xvc2UiLEVycm9yOiJlcnJvciIsTWVzc2FnZToibWVzc2FnZSJ9O1cucHJvdG90eXBlLmF0dGFjaE9wZW49ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoIm9wZW4iLGQsZixsKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZGV0YWNoT3Blbj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoIm9wZW4iLGYsbCk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmZpcmVPcGVuPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJvcGVuIixhKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuYXR0YWNoQ2xvc2U9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImNsb3NlIixkLGYsbCk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmRldGFjaENsb3NlPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiY2xvc2UiLGYsbCk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmZpcmVDbG9zZT1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiY2xvc2UiLGEpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5hdHRhY2hFcnJvcj1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiZXJyb3IiLGQsZixsKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZGV0YWNoRXJyb3I9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJlcnJvciIsZixsKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZmlyZUVycm9yPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJlcnJvciIsYSk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmF0dGFjaE1lc3NhZ2U9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoIm1lc3NhZ2UiLGQsZixsKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZGV0YWNoTWVzc2FnZT1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoIm1lc3NhZ2UiLGYsbCk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmZpcmVNZXNzYWdlPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJtZXNzYWdlIixhKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuX3Jlc29sdmVGdWxsVXJsPWZ1bmN0aW9uKHUpe3ZhciBmPScnO2lmKCEvXndzcz86XC9cLy8udGVzdCh1KSl7dmFyIGw9ZG9jdW1lbnQubG9jYXRpb247Zj0oKGwucHJvdG9jb2w9PT0naHR0cHM6Jyk/J3dzczovLyc6J3dzOi8vJykrbC5ob3N0O2lmKHUuc3Vic3RyKDAsMSk9PT0nLycpe2YrPXV9ZWxzZXtmKz1sLnBhdGhuYW1lLnN1YnN0cmluZygwLGwucGF0aG5hbWUubGFzdEluZGV4T2YoJy8nKSkrJy8nK3V9fWVsc2V7Zj11fXJldHVybiBmfTtXLnByb3RvdHlwZS5fb3BlbkNvbm5lY3Rpb249ZnVuY3Rpb24odSxwKXt2YXIgdT10aGlzLl9yZXNvbHZlRnVsbFVybCh1KTt0aGlzLl9vV3M9KHR5cGVvZihwKT09PSd1bmRlZmluZWQnKT9uZXcgd2luZG93LldlYlNvY2tldCh1KTpuZXcgd2luZG93LldlYlNvY2tldCh1LHApO3RoaXMuX29Xcy5vbm9wZW49cS5wcm94eSh0aGlzLl9vbm9wZW4sdGhpcyk7dGhpcy5fb1dzLm9uY2xvc2U9cS5wcm94eSh0aGlzLl9vbmNsb3NlLHRoaXMpO3RoaXMuX29Xcy5vbm1lc3NhZ2U9cS5wcm94eSh0aGlzLl9vbm1lc3NhZ2UsdGhpcyk7dGhpcy5fb1dzLm9uZXJyb3I9cS5wcm94eSh0aGlzLl9vbmVycm9yLHRoaXMpfTtXLnByb3RvdHlwZS5fb25vcGVuPWZ1bmN0aW9uKCl7dGhpcy5maXJlT3BlbigpfTtXLnByb3RvdHlwZS5fb25jbG9zZT1mdW5jdGlvbihjKXt0aGlzLmZpcmVDbG9zZSh7Y29kZTpjLmNvZGUscmVhc29uOmMucmVhc29uLHdhc0NsZWFuOmMud2FzQ2xlYW59KX07Vy5wcm90b3R5cGUuX29uZXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5maXJlRXJyb3IoKX07Vy5wcm90b3R5cGUuX29ubWVzc2FnZT1mdW5jdGlvbihtKXt0aGlzLmZpcmVNZXNzYWdlKHtkYXRhOm0uZGF0YX0pfTtXLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKG0pe2lmKHRoaXMuZ2V0UmVhZHlTdGF0ZSgpPT09Ui5PUEVOKXt0aGlzLl9vV3Muc2VuZChtKX1lbHNlIGlmKHRoaXMuZ2V0UmVhZHlTdGF0ZSgpPT09Ui5DT05ORUNUSU5HKXt0aGlzLmF0dGFjaEV2ZW50T25jZSgib3BlbiIsZnVuY3Rpb24oZSl7dGhpcy5fb1dzLnNlbmQobSl9KX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJVbmFibGUgdG8gc2VuZCBXZWJTb2NrZXQgbWVzc2FnZS4gIisiQ29ubmVjdGlvbiBpcyBhbHJlYWR5IGNsb3NlZCBvciBjbG9zaW5nLiBtZXNzYWdlOiAiK20pfXJldHVybiB0aGlzfTtXLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihjLHIpe2lmKHR5cGVvZihjKT09PSdzdHJpbmcnKXtyPWM7Yz11bmRlZmluZWR9Yz0odHlwZW9mKGMpPT09J3VuZGVmaW5lZCcpPzEwMDA6YztyPSh0eXBlb2Yocik9PT0ndW5kZWZpbmVkJyk/IiI6cjtpZih0aGlzLmdldFJlYWR5U3RhdGUoKT09PVIuT1BFTil7dGhpcy5fb1dzLmNsb3NlKGMscil9ZWxzZSBpZih0aGlzLmdldFJlYWR5U3RhdGUoKT09PVIuQ09OTkVDVElORyl7dGhpcy5hdHRhY2hFdmVudE9uY2UoIm9wZW4iLGZ1bmN0aW9uKGUpe3RoaXMuX29Xcy5jbG9zZShjLHIpfSl9ZWxzZXt2YXIgdD0nJztzd2l0Y2godGhpcy5nZXRSZWFkeVN0YXRlKCkpe2Nhc2UgUi5DTE9TRUQ6dD0iQ29ubmVjdGlvbiBpcyBhbHJlYWR5IGNsb3NlZC4iO2JyZWFrO2Nhc2UgUi5DTE9TSU5HOnQ9IkNvbm5lY3Rpb24gaXMgYWxyZWFkeSBjbG9zaW5nLiI7YnJlYWt9cS5zYXAubG9nLndhcm5pbmcoIlVuYWJsZSB0byBjbG9zZSBXZWJTb2NrZXQgY29ubmVjdGlvbi4gIit0KX1yZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZ2V0UmVhZHlTdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vV3MucmVhZHlTdGF0ZX07Vy5wcm90b3R5cGUuZ2V0UHJvdG9jb2w9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1dzLnByb3RvY29sfTtyZXR1cm4gV30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5CaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInLCcuL0NoYW5nZVJlYXNvbiddLGZ1bmN0aW9uKHEsRSxDKXsidXNlIHN0cmljdCI7dmFyIEI9RS5leHRlbmQoInNhcC51aS5tb2RlbC5CaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsUCl7RS5hcHBseSh0aGlzKTt0aGlzLm9Nb2RlbD1tO3RoaXMuYlJlbGF0aXZlPSFxLnNhcC5zdGFydHNXaXRoKHAsJy8nKTt0aGlzLnNQYXRoPXA7dGhpcy5vQ29udGV4dD1jO3RoaXMubVBhcmFtZXRlcnM9UDt0aGlzLmJJbml0aWFsPWZhbHNlfSxtZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJnZXRQYXRoIiwiZ2V0Q29udGV4dCIsImdldE1vZGVsIiwiYXR0YWNoQ2hhbmdlIiwiZGV0YWNoQ2hhbmdlIiwicmVmcmVzaCIsImlzSW5pdGlhbCIsImF0dGFjaERhdGFSZXF1ZXN0ZWQiLCJkZXRhY2hEYXRhUmVxdWVzdGVkIiwiYXR0YWNoRGF0YVJlY2VpdmVkIiwiZGV0YWNoRGF0YVJlY2VpdmVkIl19fSk7Qi5wcm90b3R5cGUuZ2V0UGF0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNQYXRofTtCLnByb3RvdHlwZS5nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0NvbnRleHR9O0IucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7aWYodGhpcy5vQ29udGV4dCE9Yyl7dGhpcy5vQ29udGV4dD1jO3RoaXMuX2ZpcmVDaGFuZ2UoKX19O0IucHJvdG90eXBlLmdldE1vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub01vZGVsfTtCLnByb3RvdHlwZS5hdHRhY2hDaGFuZ2U9ZnVuY3Rpb24oZixsKXtpZighdGhpcy5oYXNMaXN0ZW5lcnMoImNoYW5nZSIpKXt0aGlzLm9Nb2RlbC5hZGRCaW5kaW5nKHRoaXMpfXRoaXMuYXR0YWNoRXZlbnQoImNoYW5nZSIsZixsKX07Qi5wcm90b3R5cGUuZGV0YWNoQ2hhbmdlPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiY2hhbmdlIixmLGwpO2lmKCF0aGlzLmhhc0xpc3RlbmVycygiY2hhbmdlIikpe3RoaXMub01vZGVsLnJlbW92ZUJpbmRpbmcodGhpcyl9fTtCLnByb3RvdHlwZS5fZmlyZUNoYW5nZT1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiY2hhbmdlIixhKX07Qi5wcm90b3R5cGUuYXR0YWNoRGF0YVJlcXVlc3RlZD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImRhdGFSZXF1ZXN0ZWQiLGYsbCl9O0IucHJvdG90eXBlLmRldGFjaERhdGFSZXF1ZXN0ZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJkYXRhUmVxdWVzdGVkIixmLGwpfTtCLnByb3RvdHlwZS5maXJlRGF0YVJlcXVlc3RlZD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiZGF0YVJlcXVlc3RlZCIsYSl9O0IucHJvdG90eXBlLmF0dGFjaERhdGFSZWNlaXZlZD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImRhdGFSZWNlaXZlZCIsZixsKX07Qi5wcm90b3R5cGUuZGV0YWNoRGF0YVJlY2VpdmVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiZGF0YVJlY2VpdmVkIixmLGwpfTtCLnByb3RvdHlwZS5maXJlRGF0YVJlY2VpdmVkPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJkYXRhUmVjZWl2ZWQiLGEpfTtCLnByb3RvdHlwZS51cGRhdGVSZXF1aXJlZD1mdW5jdGlvbihtKXtyZXR1cm4gbSYmdGhpcy5nZXRNb2RlbCgpPT09bX07Qi5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOkMuQ2hhbmdlfSl9O0IucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZil7dGhpcy5jaGVja1VwZGF0ZShmKX07Qi5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe3RoaXMuY2hlY2tVcGRhdGUodHJ1ZSk7cmV0dXJuIHRoaXN9O0IucHJvdG90eXBlLl9yZWZyZXNoPWZ1bmN0aW9uKCl7dGhpcy5yZWZyZXNoKCl9O0IucHJvdG90eXBlLmlzSW5pdGlhbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJJbml0aWFsfTtCLnByb3RvdHlwZS5pc1JlbGF0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYlJlbGF0aXZlfTtCLnByb3RvdHlwZS5hdHRhY2hFdmVudHM9ZnVuY3Rpb24oZSl7aWYoIWUpe3JldHVybiB0aGlzfXZhciB0PXRoaXM7cS5lYWNoKGUsZnVuY3Rpb24ocyxoKXt2YXIgbT0iYXR0YWNoIitzLnN1YnN0cmluZygwLDEpLnRvVXBwZXJDYXNlKCkrcy5zdWJzdHJpbmcoMSk7aWYodFttXSl7dFttXShoKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKHQudG9TdHJpbmcoKSsiIGhhcyBubyBoYW5kbGVyIGZvciBldmVudCAnIitzKyInIil9fSk7cmV0dXJuIHRoaXN9O0IucHJvdG90eXBlLmRldGFjaEV2ZW50cz1mdW5jdGlvbihlKXtpZighZSl7cmV0dXJuIHRoaXN9dmFyIHQ9dGhpcztxLmVhY2goZSxmdW5jdGlvbihzLGgpe3ZhciBtPSJkZXRhY2giK3Muc3Vic3RyaW5nKDAsMSkudG9VcHBlckNhc2UoKStzLnN1YnN0cmluZygxKTtpZih0W21dKXt0W21dKGgpfWVsc2V7cS5zYXAubG9nLndhcm5pbmcodC50b1N0cmluZygpKyIgaGFzIG5vIGhhbmRsZXIgZm9yIGV2ZW50ICciK3MrIiciKX19KTtyZXR1cm4gdGhpc307Qi5wcm90b3R5cGUuYXR0YWNoUmVmcmVzaD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoInJlZnJlc2giLGYsbCl9O0IucHJvdG90eXBlLmRldGFjaFJlZnJlc2g9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJyZWZyZXNoIixmLGwpfTtCLnByb3RvdHlwZS5fZmlyZVJlZnJlc2g9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInJlZnJlc2giLGEpfTtyZXR1cm4gQn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5Db250ZXh0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkNvbnRleHQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ29udGV4dCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz1zYXAudWkuYmFzZS5PYmplY3QuZXh0ZW5kKCJzYXAudWkubW9kZWwuQ29udGV4dCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCl7c2FwLnVpLmJhc2UuT2JqZWN0LmFwcGx5KHRoaXMpO3RoaXMub01vZGVsPW07dGhpcy5zUGF0aD1wfSxtZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJnZXRNb2RlbCIsImdldFBhdGgiLCJnZXRQcm9wZXJ0eSIsImdldE9iamVjdCJdfX0pO0MucHJvdG90eXBlLmdldE1vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub01vZGVsfTtDLnByb3RvdHlwZS5nZXRQYXRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1BhdGh9O0MucHJvdG90eXBlLmdldFByb3BlcnR5PWZ1bmN0aW9uKHApe3JldHVybiB0aGlzLm9Nb2RlbC5nZXRQcm9wZXJ0eShwLHRoaXMpfTtDLnByb3RvdHlwZS5nZXRPYmplY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vTW9kZWwuZ2V0T2JqZWN0KHRoaXMuc1BhdGgpfTtDLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNQYXRofTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5Db250ZXh0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5Db250ZXh0QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9Db250ZXh0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQmluZGluZyddLGZ1bmN0aW9uKHEsQil7InVzZSBzdHJpY3QiO3ZhciBDPUIuZXh0ZW5kKCJzYXAudWkubW9kZWwuQ29udGV4dEJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxQLGUpe0IuY2FsbCh0aGlzLG0scCxjLFAsZSk7dGhpcy5vRWxlbWVudENvbnRleHQ9bnVsbDt0aGlzLmJJbml0aWFsPXRydWV9LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiZ2V0RWxlbWVudENvbnRleHQiXX19KTtDLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXt9O0MucHJvdG90eXBlLmdldEJvdW5kQ29udGV4dD1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5vRWxlbWVudENvbnRleHR9O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkZpbHRlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5GaWx0ZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvRmlsdGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9GaWx0ZXJPcGVyYXRvciddLGZ1bmN0aW9uKHEsRil7InVzZSBzdHJpY3QiO3ZhciBhPXNhcC51aS5iYXNlLk9iamVjdC5leHRlbmQoInNhcC51aS5tb2RlbC5GaWx0ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihwLG8sdixWKXtpZih0eXBlb2YgcD09PSJvYmplY3QiJiYhcS5pc0FycmF5KHApKXt2YXIgZj1wO3RoaXMuc1BhdGg9Zi5wYXRoO3RoaXMuc09wZXJhdG9yPWYub3BlcmF0b3I7dGhpcy5vVmFsdWUxPWYudmFsdWUxO3RoaXMub1ZhbHVlMj1mLnZhbHVlMjt0aGlzLmFGaWx0ZXJzPWYuZmlsdGVyc3x8Zi5hRmlsdGVyczt0aGlzLmJBbmQ9Zi5hbmR8fGYuYkFuZH1lbHNle2lmKHEuaXNBcnJheShwKSl7dGhpcy5hRmlsdGVycz1wfWVsc2V7dGhpcy5zUGF0aD1wfWlmKHEudHlwZShvKT09PSJib29sZWFuIil7dGhpcy5iQW5kPW99ZWxzZXt0aGlzLnNPcGVyYXRvcj1vfXRoaXMub1ZhbHVlMT12O3RoaXMub1ZhbHVlMj1WfWlmKHEuaXNBcnJheSh0aGlzLmFGaWx0ZXJzKSYmIXRoaXMuc1BhdGgmJiF0aGlzLnNPcGVyYXRvciYmIXRoaXMub1ZhbHVlMSYmIXRoaXMub1ZhbHVlMil7dGhpcy5fYk11bHRpRmlsdGVyPXRydWU7cS5lYWNoKHRoaXMuYUZpbHRlcnMsZnVuY3Rpb24oaSxiKXtpZighKGIgaW5zdGFuY2VvZiBhKSl7cS5zYXAubG9nLmVycm9yKCJGaWx0ZXIgaW4gQWdncmVnYXRpb24gb2YgTXVsdGkgZmlsdGVyIGhhcyB0byBiZSBpbnN0YW5jZSBvZiBzYXAudWkubW9kZWwuRmlsdGVyIil9fSl9ZWxzZSBpZighdGhpcy5hRmlsdGVycyYmdGhpcy5zUGF0aCE9PXVuZGVmaW5lZCYmdGhpcy5zT3BlcmF0b3ImJnRoaXMub1ZhbHVlMSE9PXVuZGVmaW5lZCl7dGhpcy5fYk11bHRpRmlsdGVyPWZhbHNlfWVsc2V7cS5zYXAubG9nLmVycm9yKCJXcm9uZyBwYXJhbWV0ZXJzIGRlZmluZWQgZm9yIGZpbHRlci4iKX19fSk7cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuTGlzdEJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuTGlzdEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvTGlzdEJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0JpbmRpbmcnLCcuL0ZpbHRlcicsJy4vU29ydGVyJ10sZnVuY3Rpb24ocSxCLEYsUyl7InVzZSBzdHJpY3QiO3ZhciBMPUIuZXh0ZW5kKCJzYXAudWkubW9kZWwuTGlzdEJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxzLGYsUCl7Qi5jYWxsKHRoaXMsbSxwLGMsUCk7dGhpcy5hU29ydGVycz1zO2lmKCFxLmlzQXJyYXkodGhpcy5hU29ydGVycykmJnRoaXMuYVNvcnRlcnMgaW5zdGFuY2VvZiBTKXt0aGlzLmFTb3J0ZXJzPVt0aGlzLmFTb3J0ZXJzXX1lbHNlIGlmKCFxLmlzQXJyYXkodGhpcy5hU29ydGVycykpe3RoaXMuYVNvcnRlcnM9W119dGhpcy5hRmlsdGVycz1bXTtpZighcS5pc0FycmF5KGYpJiZmIGluc3RhbmNlb2YgRil7Zj1bZl19ZWxzZSBpZighcS5pc0FycmF5KGYpKXtmPVtdfXRoaXMuYUFwcGxpY2F0aW9uRmlsdGVycz1mO3RoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uPWZhbHNlfSxtZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJnZXRDb250ZXh0cyIsInNvcnQiLCJhdHRhY2hTb3J0IiwiZGV0YWNoU29ydCIsImZpbHRlciIsImF0dGFjaEZpbHRlciIsImRldGFjaEZpbHRlciIsImdldERpc3RpbmN0VmFsdWVzIiwiaXNHcm91cGVkIl19fSk7TC5wcm90b3R5cGUuZ2V0RGlzdGluY3RWYWx1ZXM9ZnVuY3Rpb24ocCl7cmV0dXJuIG51bGx9O0wucHJvdG90eXBlLmF0dGFjaFNvcnQ9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJzb3J0IixmLGwpfTtMLnByb3RvdHlwZS5kZXRhY2hTb3J0PWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgic29ydCIsZixsKX07TC5wcm90b3R5cGUuX2ZpcmVTb3J0PWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJzb3J0IixhKX07TC5wcm90b3R5cGUuYXR0YWNoRmlsdGVyPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiZmlsdGVyIixmLGwpfTtMLnByb3RvdHlwZS5kZXRhY2hGaWx0ZXI9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJmaWx0ZXIiLGYsbCl9O0wucHJvdG90eXBlLl9maXJlRmlsdGVyPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJmaWx0ZXIiLGEpfTtMLnByb3RvdHlwZS5pc0dyb3VwZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hU29ydGVycy5sZW5ndGg+MCYmISF0aGlzLmFTb3J0ZXJzWzBdLmZuR3JvdXB9O0wucHJvdG90eXBlLmVuYWJsZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5iVXNlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb249dHJ1ZTtpZih0aGlzLnVwZGF0ZSl7dGhpcy51cGRhdGUoKX19O3JldHVybiBMfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLk1vZGVsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLk1vZGVsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL01vZGVsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlcicsJy4vQmluZGluZ01vZGUnLCcuL0NvbnRleHQnXSxmdW5jdGlvbihxLEUsQixDKXsidXNlIHN0cmljdCI7dmFyIE09RS5leHRlbmQoInNhcC51aS5tb2RlbC5Nb2RlbCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7RS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vRGF0YT17fTt0aGlzLmJEZXN0cm95ZWQ9ZmFsc2U7dGhpcy5hQmluZGluZ3M9W107dGhpcy5tQ29udGV4dHM9e307dGhpcy5pU2l6ZUxpbWl0PTEwMDt0aGlzLnNEZWZhdWx0QmluZGluZ01vZGU9Qi5Ud29XYXk7dGhpcy5tU3VwcG9ydGVkQmluZGluZ01vZGVzPXsiT25lV2F5Ijp0cnVlLCJUd29XYXkiOnRydWUsIk9uZVRpbWUiOnRydWV9O3RoaXMuYkxlZ2FjeVN5bnRheD1mYWxzZX0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiYmluZFByb3BlcnR5IiwiYmluZExpc3QiLCJiaW5kVHJlZSIsImJpbmRDb250ZXh0IiwiY3JlYXRlQmluZGluZ0NvbnRleHQiLCJkZXN0cm95QmluZGluZ0NvbnRleHQiLCJnZXRQcm9wZXJ0eSIsImdldERlZmF1bHRCaW5kaW5nTW9kZSIsInNldERlZmF1bHRCaW5kaW5nTW9kZSIsImlzQmluZGluZ01vZGVTdXBwb3J0ZWQiLCJhdHRhY2hQYXJzZUVycm9yIiwiZGV0YWNoUGFyc2VFcnJvciIsImF0dGFjaFJlcXVlc3RDb21wbGV0ZWQiLCJkZXRhY2hSZXF1ZXN0Q29tcGxldGVkIiwiYXR0YWNoUmVxdWVzdEZhaWxlZCIsImRldGFjaFJlcXVlc3RGYWlsZWQiLCJhdHRhY2hSZXF1ZXN0U2VudCIsImRldGFjaFJlcXVlc3RTZW50Iiwic2V0U2l6ZUxpbWl0IiwicmVmcmVzaCIsImlzTGlzdCIsImdldE9iamVjdCJdfX0pO00uTV9FVkVOVFM9e1BhcnNlRXJyb3I6InBhcnNlRXJyb3IiLFJlcXVlc3RGYWlsZWQ6InJlcXVlc3RGYWlsZWQiLFJlcXVlc3RTZW50OiJyZXF1ZXN0U2VudCIsUmVxdWVzdENvbXBsZXRlZDoicmVxdWVzdENvbXBsZXRlZCJ9O00ucHJvdG90eXBlLmF0dGFjaFJlcXVlc3RGYWlsZWQ9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoInJlcXVlc3RGYWlsZWQiLGQsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZGV0YWNoUmVxdWVzdEZhaWxlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoInJlcXVlc3RGYWlsZWQiLGYsbCk7cmV0dXJuIHRoaXN9O00ucHJvdG90eXBlLmZpcmVSZXF1ZXN0RmFpbGVkPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJyZXF1ZXN0RmFpbGVkIixhKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuYXR0YWNoUGFyc2VFcnJvcj1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgicGFyc2VFcnJvciIsZCxmLGwpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5kZXRhY2hQYXJzZUVycm9yPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgicGFyc2VFcnJvciIsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZmlyZVBhcnNlRXJyb3I9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBhcnNlRXJyb3IiLGEpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5hdHRhY2hSZXF1ZXN0U2VudD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgicmVxdWVzdFNlbnQiLGQsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZGV0YWNoUmVxdWVzdFNlbnQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJyZXF1ZXN0U2VudCIsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZmlyZVJlcXVlc3RTZW50PWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJyZXF1ZXN0U2VudCIsYSk7cmV0dXJuIHRoaXN9O00ucHJvdG90eXBlLmF0dGFjaFJlcXVlc3RDb21wbGV0ZWQ9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoInJlcXVlc3RDb21wbGV0ZWQiLGQsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZGV0YWNoUmVxdWVzdENvbXBsZXRlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoInJlcXVlc3RDb21wbGV0ZWQiLGYsbCk7cmV0dXJuIHRoaXN9O00ucHJvdG90eXBlLmZpcmVSZXF1ZXN0Q29tcGxldGVkPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJyZXF1ZXN0Q29tcGxldGVkIixhKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZ2V0T2JqZWN0PWZ1bmN0aW9uKHAsYyl7cmV0dXJuIHRoaXMuZ2V0UHJvcGVydHkocCxjKX07TS5wcm90b3R5cGUuZ2V0Q29udGV4dD1mdW5jdGlvbihwKXtpZighcS5zYXAuc3RhcnRzV2l0aChwLCIvIikpe3Rocm93IG5ldyBFcnJvcigiUGF0aCAiK3ArIiBtdXN0IHN0YXJ0IHdpdGggYSAvICIpfXZhciBjPXRoaXMubUNvbnRleHRzW3BdO2lmKCFjKXtjPW5ldyBDKHRoaXMscCk7dGhpcy5tQ29udGV4dHNbcF09Y31yZXR1cm4gY307TS5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbihwLGMpe3ZhciBpPSFxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSxyPXAscztpZihpKXtpZihjKXtzPWMuZ2V0UGF0aCgpO3I9cysocS5zYXAuZW5kc1dpdGgocywiLyIpPyIiOiIvIikrcH1lbHNle3I9dGhpcy5pc0xlZ2FjeVN5bnRheCgpPyIvIitwOnVuZGVmaW5lZH19aWYociYmciE9PSIvIiYmcS5zYXAuZW5kc1dpdGgociwiLyIpKXtyPXIuc3Vic3RyKDAsci5sZW5ndGgtMSl9cmV0dXJuIHJ9O00ucHJvdG90eXBlLmFkZEJpbmRpbmc9ZnVuY3Rpb24oYil7dGhpcy5hQmluZGluZ3MucHVzaChiKX07TS5wcm90b3R5cGUucmVtb3ZlQmluZGluZz1mdW5jdGlvbihiKXtmb3IodmFyIGk9MDtpPHRoaXMuYUJpbmRpbmdzLmxlbmd0aDtpKyspe2lmKHRoaXMuYUJpbmRpbmdzW2ldPT1iKXt0aGlzLmFCaW5kaW5ncy5zcGxpY2UoaSwxKTticmVha319fTtNLnByb3RvdHlwZS5nZXREZWZhdWx0QmluZGluZ01vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zRGVmYXVsdEJpbmRpbmdNb2RlfTtNLnByb3RvdHlwZS5zZXREZWZhdWx0QmluZGluZ01vZGU9ZnVuY3Rpb24obSl7aWYodGhpcy5pc0JpbmRpbmdNb2RlU3VwcG9ydGVkKG0pKXt0aGlzLnNEZWZhdWx0QmluZGluZ01vZGU9bX1lbHNle3Rocm93IG5ldyBFcnJvcigiQmluZGluZyBtb2RlICIrbSsiIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBtb2RlbC4iKX19O00ucHJvdG90eXBlLmlzQmluZGluZ01vZGVTdXBwb3J0ZWQ9ZnVuY3Rpb24obSl7cmV0dXJuKG0gaW4gdGhpcy5tU3VwcG9ydGVkQmluZGluZ01vZGVzKX07TS5wcm90b3R5cGUuc2V0TGVnYWN5U3ludGF4PWZ1bmN0aW9uKGwpe3RoaXMuYkxlZ2FjeVN5bnRheD1sfTtNLnByb3RvdHlwZS5pc0xlZ2FjeVN5bnRheD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJMZWdhY3lTeW50YXh9O00ucHJvdG90eXBlLnNldFNpemVMaW1pdD1mdW5jdGlvbihzKXt0aGlzLmlTaXplTGltaXQ9c307TS5wcm90b3R5cGUuZ2V0SW50ZXJmYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O00ucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZil7dGhpcy5jaGVja1VwZGF0ZShmKX07TS5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7dmFyIGI9dGhpcy5hQmluZGluZ3Muc2xpY2UoMCk7cS5lYWNoKGIsZnVuY3Rpb24oaSxvKXtvLmNoZWNrVXBkYXRlKGYpfSl9O00ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLm9EYXRhPXt9O3RoaXMuYUJpbmRpbmdzPVtdO3RoaXMubUNvbnRleHRzPXt9O3RoaXMuYkRlc3Ryb3llZD10cnVlO0UucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gTX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5TZWxlY3Rpb25Nb2RlbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5TZWxlY3Rpb25Nb2RlbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9TZWxlY3Rpb25Nb2RlbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgUz1FLmV4dGVuZCgic2FwLnVpLm1vZGVsLlNlbGVjdGlvbk1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocyl7RS5hcHBseSh0aGlzKTt0aGlzLmlTZWxlY3Rpb25Nb2RlPXN8fFMuU0lOR0xFX1NFTEVDVElPTjt0aGlzLmFTZWxlY3RlZEluZGljZXM9W107dGhpcy5pTGVhZEluZGV4PS0xO3RoaXMuZm5Tb3J0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEtYn07dGhpcy5mblNvcnRSZXZlcnNlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGItYX19fSk7Uy5TSU5HTEVfU0VMRUNUSU9OPTA7Uy5NVUxUSV9TRUxFQ1RJT049MTtTLnByb3RvdHlwZS5nZXRTZWxlY3Rpb25Nb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaVNlbGVjdGlvbk1vZGV9O1MucHJvdG90eXBlLnNldFNlbGVjdGlvbk1vZGU9ZnVuY3Rpb24ocyl7dGhpcy5pU2VsZWN0aW9uTW9kZT1zfHxTLlNJTkdMRV9TRUxFQ1RJT059O1MucHJvdG90eXBlLmlzU2VsZWN0ZWRJbmRleD1mdW5jdGlvbihpKXtyZXR1cm4gcS5pbkFycmF5KGksdGhpcy5hU2VsZWN0ZWRJbmRpY2VzKSE9PS0xfTtTLnByb3RvdHlwZS5nZXRMZWFkU2VsZWN0ZWRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlMZWFkSW5kZXh9O1MucHJvdG90eXBlLnNldExlYWRTZWxlY3RlZEluZGV4PWZ1bmN0aW9uKGwpe3RoaXMuc2V0U2VsZWN0aW9uSW50ZXJ2YWwobCxsKTtyZXR1cm4gdGhpc307Uy5wcm90b3R5cGUuZ2V0TWluU2VsZWN0aW9uSW5kZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmFTZWxlY3RlZEluZGljZXMubGVuZ3RoPjApe3ZhciBpPXRoaXMuYVNlbGVjdGVkSW5kaWNlcy5zb3J0KHRoaXMuZm5Tb3J0KTtyZXR1cm4gaVswXX1lbHNle3JldHVybi0xfX07Uy5wcm90b3R5cGUuZ2V0TWF4U2VsZWN0aW9uSW5kZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmFTZWxlY3RlZEluZGljZXMubGVuZ3RoPjApe3ZhciBpPXRoaXMuYVNlbGVjdGVkSW5kaWNlcy5zb3J0KHRoaXMuZm5Tb3J0UmV2ZXJzZSk7cmV0dXJuIGlbMF19ZWxzZXtyZXR1cm4tMX19O1MucHJvdG90eXBlLmdldFNlbGVjdGVkSW5kaWNlcz1mdW5jdGlvbigpe3ZhciBpPXRoaXMuYVNlbGVjdGVkSW5kaWNlcy5zb3J0KHRoaXMuZm5Tb3J0KTtyZXR1cm4gaX07Uy5wcm90b3R5cGUuc2V0U2VsZWN0aW9uSW50ZXJ2YWw9ZnVuY3Rpb24oZix0KXtpZih0aGlzLmlTZWxlY3Rpb25Nb2RlPT09Uy5TSU5HTEVfU0VMRUNUSU9OKXtmPXR9dmFyIEY9TWF0aC5taW4oZix0KTt2YXIgVD1NYXRoLm1heChmLHQpO3ZhciBjPXRoaXMuYVNlbGVjdGVkSW5kaWNlcy5zbGljZSgpO3ZhciBzPVtdO2Zvcih2YXIgaT1GO2k8PVQ7aSsrKXtzLnB1c2goaSk7dmFyIHA9cS5pbkFycmF5KGksYyk7aWYocD09PS0xKXtjLnB1c2goaSl9ZWxzZXtjLnNwbGljZShwLDEpfX10aGlzLl91cGRhdGUocyx0LGMpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5hZGRTZWxlY3Rpb25JbnRlcnZhbD1mdW5jdGlvbihmLHQpe2lmKHRoaXMuaVNlbGVjdGlvbk1vZGU9PT1TLlNJTkdMRV9TRUxFQ1RJT04pe3JldHVybiB0aGlzLnNldFNlbGVjdGlvbkludGVydmFsKGYsdCl9dmFyIEY9TWF0aC5taW4oZix0KTt2YXIgVD1NYXRoLm1heChmLHQpO3ZhciBjPVtdO3ZhciBzPXRoaXMuYVNlbGVjdGVkSW5kaWNlcztmb3IodmFyIGk9RjtpPD1UO2krKyl7aWYocS5pbkFycmF5KGkscyk9PT0tMSl7cy5wdXNoKGkpO2MucHVzaChpKX19dGhpcy5fdXBkYXRlKHMsVCxjKTtyZXR1cm4gdGhpc307Uy5wcm90b3R5cGUubW92ZVNlbGVjdGlvbkludGVydmFsPWZ1bmN0aW9uKHMsbSl7dmFyIGM9W107dmFyIGE9dGhpcy5hU2VsZWN0ZWRJbmRpY2VzO3ZhciBsPXRoaXMuaUxlYWRJbmRleDtmb3IodmFyIGk9MDtpPGEubGVuZ3RoO2krKyl7dmFyIEk9YVtpXTtpZihJPj1zKXtjLnB1c2goYVtpXSk7YVtpXSs9bTtjLnB1c2goYVtpXSk7aWYoST09PXRoaXMuaUxlYWRJbmRleCl7bCs9bX19fXRoaXMuX3VwZGF0ZShhLGwsYyk7cmV0dXJuIHRoaXN9O1MucHJvdG90eXBlLnJlbW92ZVNlbGVjdGlvbkludGVydmFsPWZ1bmN0aW9uKGYsdCl7aWYodGhpcy5pU2VsZWN0aW9uTW9kZT09PVMuU0lOR0xFX1NFTEVDVElPTil7Zj10fXZhciBGPU1hdGgubWluKGYsdCk7dmFyIFQ9TWF0aC5tYXgoZix0KTt2YXIgYz1bXTt2YXIgcz10aGlzLmFTZWxlY3RlZEluZGljZXM7dmFyIGw9dGhpcy5pTGVhZEluZGV4O2Zvcih2YXIgaT1GO2k8PVQ7aSsrKXt2YXIgST1xLmluQXJyYXkoaSxzKTtpZihJPi0xKXtzLnNwbGljZShJLDEpO2MucHVzaChpKX1pZihpPT09dGhpcy5pTGVhZEluZGV4KXtsPS0xfX10aGlzLl91cGRhdGUocyxsLGMpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5zbGljZVNlbGVjdGlvbkludGVydmFsPWZ1bmN0aW9uKGYsdCl7dmFyIEY9TWF0aC5taW4oZix0KTt2YXIgVD1NYXRoLm1heChmLHQpO3ZhciBjPVtdO3ZhciByPVtdO3ZhciBvPXRoaXMuYVNlbGVjdGVkSW5kaWNlcy5zbGljZSgwKTt2YXIgcz10aGlzLmFTZWxlY3RlZEluZGljZXM7dmFyIGw9dGhpcy5pTGVhZEluZGV4O3ZhciBSPVQtRisxO2Zvcih2YXIgST1UO0k+PUY7SS0tKXt2YXIgYT1xLmluQXJyYXkoSSxzKTtpZihhPi0xKXtzLnNwbGljZShhLDEpO3IucHVzaChJKX1pZihJPT09dGhpcy5pTGVhZEluZGV4KXtsPS0xfX1mb3IodmFyIEk9MDtJPHMubGVuZ3RoO0krKyl7dmFyIE89c1tJXTtpZihPPj1GKXt2YXIgbj1zW0ldLVI7aWYoTz09PWwpe2w9bn1zW0ldPW47aWYocS5pbkFycmF5KG4sbyk9PT0tMSl7Yy5wdXNoKG4pfX19Zm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspe3ZhciBJPW9bby5sZW5ndGgtMS1pXTtpZihxLmluQXJyYXkoSSxjKT09PS0xKXtjLnB1c2goSSl9fWZvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKXtpZihxLmluQXJyYXkocltpXSxzKT09PS0xJiZxLmluQXJyYXkocltpXSxjKT09PS0xKXtjLnB1c2gocltpXSl9fXRoaXMuX3VwZGF0ZShzLGwsYyk7cmV0dXJuIHRoaXN9O1MucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5hU2VsZWN0ZWRJbmRpY2VzLmxlbmd0aD4wfHx0aGlzLmlMZWFkSW5kZXghPT0tMSl7dGhpcy5fdXBkYXRlKFtdLC0xLHRoaXMuYVNlbGVjdGVkSW5kaWNlcy5zbGljZSgpKX1yZXR1cm4gdGhpc307Uy5wcm90b3R5cGUuYXR0YWNoU2VsZWN0aW9uQ2hhbmdlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgic2VsZWN0aW9uQ2hhbmdlZCIsZCxmLGwpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5kZXRhY2hTZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgic2VsZWN0aW9uQ2hhbmdlZCIsZixsKTtyZXR1cm4gdGhpc307Uy5wcm90b3R5cGUuZmlyZVNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbkNoYW5nZWQiLGEpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5fdXBkYXRlPWZ1bmN0aW9uKHMsbCxjKXt2YXIgcD17cm93SW5kaWNlczpjJiZjLnNvcnQodGhpcy5mblNvcnQpfTt0aGlzLmFTZWxlY3RlZEluZGljZXM9cztwLm9sZEluZGV4PXRoaXMuaUxlYWRJbmRleDtpZih0aGlzLmlMZWFkSW5kZXghPT1sKXt0aGlzLmlMZWFkSW5kZXg9bDtwLmxlYWRJbmRleD10aGlzLmlMZWFkSW5kZXh9aWYoYy5sZW5ndGg+MHx8dHlwZW9mIHAubGVhZEluZGV4IT09InVuZGVmaW5lZCIpe3RoaXMuZmlyZVNlbGVjdGlvbkNoYW5nZWQocCl9fTtyZXR1cm4gU30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5TaW1wbGVUeXBlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLlNpbXBsZVR5cGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvU2ltcGxlVHlwZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRm9ybWF0RXhjZXB0aW9uJywnLi9QYXJzZUV4Y2VwdGlvbicsJy4vVHlwZScsJy4vVmFsaWRhdGVFeGNlcHRpb24nXSxmdW5jdGlvbihxLEYsUCxULFYpeyJ1c2Ugc3RyaWN0Ijt2YXIgUz1ULmV4dGVuZCgic2FwLnVpLm1vZGVsLlNpbXBsZVR5cGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihmLGMpe1QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc2V0Rm9ybWF0T3B0aW9ucyhmfHx7fSk7dGhpcy5zZXRDb25zdHJhaW50cyhjfHx7fSk7dGhpcy5zTmFtZT0iU2ltcGxlVHlwZSJ9LG1ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbInNldENvbnN0cmFpbnRzIiwic2V0Rm9ybWF0T3B0aW9ucyIsImZvcm1hdFZhbHVlIiwicGFyc2VWYWx1ZSIsInZhbGlkYXRlVmFsdWUiXX19KTtTLnByb3RvdHlwZS5zZXRDb25zdHJhaW50cz1mdW5jdGlvbihjKXt0aGlzLm9Db25zdHJhaW50cz1jfTtTLnByb3RvdHlwZS5zZXRGb3JtYXRPcHRpb25zPWZ1bmN0aW9uKGYpe3RoaXMub0Zvcm1hdE9wdGlvbnM9Zn07cmV0dXJuIFN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuVHJlZUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuVHJlZUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvVHJlZUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0JpbmRpbmcnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgVD1CLmV4dGVuZCgic2FwLnVpLm1vZGVsLlRyZWVCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsZixQKXtCLmNhbGwodGhpcyxtLHAsYyxQKTt0aGlzLmFGaWx0ZXJzPWY7dGhpcy5iRGlzcGxheVJvb3ROb2RlPVAmJlAuZGlzcGxheVJvb3ROb2RlPT09dHJ1ZX0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiZ2V0Um9vdENvbnRleHRzIiwiZ2V0Tm9kZUNvbnRleHRzIiwiaGFzQ2hpbGRyZW4iLCJmaWx0ZXIiXX19KTtULnByb3RvdHlwZS5hdHRhY2hGaWx0ZXI9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJfZmlsdGVyIixmLGwpfTtULnByb3RvdHlwZS5kZXRhY2hGaWx0ZXI9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJfZmlsdGVyIixmLGwpfTtULnByb3RvdHlwZS5fZmlyZUZpbHRlcj1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiX2ZpbHRlciIsYSl9O3JldHVybiBUfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmFuYWx5dGljcy5BbmFseXRpY2FsQmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5hbmFseXRpY3MuQW5hbHl0aWNhbEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvYW5hbHl0aWNzL0FuYWx5dGljYWxCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL1RyZWVCaW5kaW5nJywnc2FwL3VpL21vZGVsL0NoYW5nZVJlYXNvbicsJ3NhcC91aS9tb2RlbC9Tb3J0ZXInLCdzYXAvdWkvbW9kZWwvRmlsdGVyT3BlcmF0b3InLCcuL29kYXRhNGFuYWx5dGljcyddLGZ1bmN0aW9uKHEsVCxDLFMsRixvKXsidXNlIHN0cmljdCI7dmFyIEE9VC5leHRlbmQoInNhcC51aS5tb2RlbC5hbmFseXRpY3MuQW5hbHl0aWNhbEJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxzLGYsUCl7VC5jYWxsKHRoaXMsbSxwLGMsZixQKTt0aGlzLnNFbnRpdHlTZXROYW1lPShQJiZQLmVudGl0eVNldCk/UC5lbnRpdHlTZXQ6dW5kZWZpbmVkO3RoaXMuYkFydGlmaWNhbFJvb3RDb250ZXh0PWZhbHNlO3RoaXMuYUdsb2JhbEZpbHRlcj1mO3RoaXMuYUdsb2JhbFNvcnRlcj1zO3RoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWw9W107dGhpcy5hQWdncmVnYXRpb25MZXZlbD1bXTt0aGlzLm9QZW5kaW5nUmVxdWVzdHM9e307dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGU9W107dGhpcy5vR3JvdXBlZFJlcXVlc3RzPXt9O3RoaXMuYlVzZUJhdGNoUmVxdWVzdHM9KFAmJlAudXNlQmF0Y2hSZXF1ZXN0cz09PXRydWUpP3RydWU6ZmFsc2U7dGhpcy5iUHJvdmlkZVRvdGFsU2l6ZT0oUCYmUC5wcm92aWRlVG90YWxSZXN1bHRTaXplPT09ZmFsc2UpP2ZhbHNlOnRydWU7dGhpcy5iUHJvdmlkZUdyYW5kVG90YWxzPShQJiZQLnByb3ZpZGVHcmFuZFRvdGFscz09PWZhbHNlKT9mYWxzZTp0cnVlO3RoaXMuYVJlcXVlc3RRdWV1ZT1bXTt0aGlzLmlUb3RhbFNpemU9LTE7dGhpcy5tS2V5PXt9O3RoaXMubUZpbmFsTGVuZ3RoPXt9O3RoaXMubUxlbmd0aD17fTt0aGlzLmJOZWVkc1VwZGF0ZT1mYWxzZTt0aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQ9dGhpcy5vTW9kZWwuZ2V0QW5hbHl0aWNhbEV4dGVuc2lvbnMoKS5maW5kUXVlcnlSZXN1bHRCeU5hbWUodGhpcy5fZ2V0RW50aXR5U2V0KCkpO3RoaXMuYUFuYWx5dGljYWxJbmZvPVtdO3RoaXMubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eT17fTt0aGlzLnVwZGF0ZUFuYWx5dGljYWxJbmZvKFA9PXVuZGVmaW5lZD9bXTpQLmFuYWx5dGljYWxJbmZvKX19KTtBLnByb3RvdHlwZS5nZXRSb290Q29udGV4dHM9ZnVuY3Rpb24ocCl7dmFyIGE9KHAmJnAubnVtYmVyT2ZFeHBhbmRlZExldmVscz9wLm51bWJlck9mRXhwYW5kZWRMZXZlbHMrMToxKTt2YXIgcj1udWxsO3ZhciBSPXRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpudWxsfSk7aWYodGhpcy5iQXJ0aWZpY2FsUm9vdENvbnRleHQmJiF0aGlzLl9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KFIpKXtyZXR1cm4gbnVsbH1pZihhPD0xKXtyPXRoaXMuX2dldENvbnRleHRzRm9yUGFyZW50Q29udGV4dChudWxsKTtpZihhPT0xKXt0aGlzLl9jb25zaWRlclJlcXVlc3RHcm91cGluZyhbUix0aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnkse2dyb3VwSWQ6Ii8ifSldKTt0aGlzLmdldE5vZGVDb250ZXh0cyh0aGlzLmdldE1vZGVsKCkuZ2V0Q29udGV4dCgiLyIpLHtzdGFydEluZGV4OnAuc3RhcnRJbmRleCxsZW5ndGg6cC5sZW5ndGgsdGhyZXNob2xkOnAudGhyZXNob2xkLGxldmVsOjAsbnVtYmVyT2ZFeHBhbmRlZExldmVsczowfSl9fWVsc2V7cj10aGlzLl9nZXRDb250ZXh0c0ZvclBhcmVudENvbnRleHQobnVsbCk7dmFyIGI9dGhpcy5fcHJlcGFyZUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25SZXF1ZXN0SWRzKCIvIixwLm51bWJlck9mRXhwYW5kZWRMZXZlbHMpO2IucHVzaChSKTt0aGlzLl9jb25zaWRlclJlcXVlc3RHcm91cGluZyhiKTt0aGlzLmdldE5vZGVDb250ZXh0cyh0aGlzLmdldE1vZGVsKCkuZ2V0Q29udGV4dCgiLyIpLHtzdGFydEluZGV4OnAuc3RhcnRJbmRleCxsZW5ndGg6cC5sZW5ndGgsdGhyZXNob2xkOnAudGhyZXNob2xkLGxldmVsOjAsbnVtYmVyT2ZFeHBhbmRlZExldmVsczpwLm51bWJlck9mRXhwYW5kZWRMZXZlbHN9KX1pZihyLmxlbmd0aD4xKXEuc2FwLmxvZy5mYXRhbCgiYXNzZXJ0aW9uIGZhaWxlZDogZ3JhbmQgdG90YWwgcmVwcmVzZW50ZWQgYnkgYSBzaW5nbGUgZW50cnkiKTtyZXR1cm4gcn07QS5wcm90b3R5cGUuZ2V0Tm9kZUNvbnRleHRzPWZ1bmN0aW9uKGMscCl7dmFyIHMsbCx0LEwsbjtpZih0eXBlb2YgcD09Im9iamVjdCIpe3M9cC5zdGFydEluZGV4O2w9cC5sZW5ndGg7dD1wLnRocmVzaG9sZDtMPXAubGV2ZWw7bj1wLm51bWJlck9mRXhwYW5kZWRMZXZlbHN9ZWxzZXtzPWFyZ3VtZW50c1sxXTtsPWFyZ3VtZW50c1syXTt0PWFyZ3VtZW50c1szXTtMPWFyZ3VtZW50c1s0XTtuPWFyZ3VtZW50c1s1XX12YXIgYT10aGlzLl9nZXRDb250ZXh0c0ZvclBhcmVudENvbnRleHQoYyxzLGwsdCxMLG4pO3JldHVybiBhfTtBLnByb3RvdHlwZS5Db250ZXh0c0F2YWlsYWJpbGl0eVN0YXR1cz17QUxMOjIsU09NRToxLE5PTkU6MH07QS5wcm90b3R5cGUuaGFzQXZhaWxhYmxlTm9kZUNvbnRleHRzPWZ1bmN0aW9uKGMsbCl7dmFyIGc9dGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KGMsbCk7aWYodGhpcy5tS2V5W2ddIT11bmRlZmluZWQpaWYodGhpcy5tRmluYWxMZW5ndGhbZ109PXRydWUpcmV0dXJuIEEucHJvdG90eXBlLkNvbnRleHRzQXZhaWxhYmlsaXR5U3RhdHVzLkFMTDtlbHNlIHJldHVybiBBLnByb3RvdHlwZS5Db250ZXh0c0F2YWlsYWJpbGl0eVN0YXR1cy5TT01FO2Vsc2UgcmV0dXJuIEEucHJvdG90eXBlLkNvbnRleHRzQXZhaWxhYmlsaXR5U3RhdHVzLk5PTkV9O0EucHJvdG90eXBlLmdldEdyb3VwU2l6ZT1mdW5jdGlvbihjLGwpe2lmKGM9PT11bmRlZmluZWQpcmV0dXJuIDA7dmFyIGc9dGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KGMsbCk7cmV0dXJuIHRoaXMubUZpbmFsTGVuZ3RoW2ddP3RoaXMubUxlbmd0aFtnXTotMX07QS5wcm90b3R5cGUuZ2V0VG90YWxTaXplPWZ1bmN0aW9uKCl7aWYoIXRoaXMuYlByb3ZpZGVUb3RhbFNpemUpcS5zYXAubG9nLmZhdGFsKCJ0b3RhbCBzaXplIG9mIHJlc3VsdCBleHBsaWNpdGx5IHR1cm5lZCBvZmYsIGJ1dCBnZXR0ZXIgaW52b2tlZCIpO3JldHVybiB0aGlzLmlUb3RhbFNpemV9O0EucHJvdG90eXBlLmhhc0NoaWxkcmVuPWZ1bmN0aW9uKGMscCl7aWYoYz09PXVuZGVmaW5lZClyZXR1cm4gZmFsc2U7aWYoYz09bnVsbClyZXR1cm4gdHJ1ZTt2YXIgaT1wLmxldmVsO2lmKGk9PTApcmV0dXJuIHRydWU7aWYodGhpcy5hQWdncmVnYXRpb25MZXZlbC5sZW5ndGg8aSlyZXR1cm4gZmFsc2U7cmV0dXJuIHRoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwuaW5kZXhPZih0aGlzLmFBZ2dyZWdhdGlvbkxldmVsW2ktMV0pPHRoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoLTF9O0EucHJvdG90eXBlLmhhc01lYXN1cmVzPWZ1bmN0aW9uKCl7dmFyIGg9ZmFsc2U7Zm9yKHZhciBwIGluIHRoaXMub01lYXN1cmVEZXRhaWxzU2V0KXtoPXRydWU7YnJlYWt9cmV0dXJuIGh9O0EucHJvdG90eXBlLmhhc0dyYW5kVG90YWxEaXNwbGF5ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iUHJvdmlkZUdyYW5kVG90YWxzfTtBLnByb3RvdHlwZS5nZXRGaWx0ZXJhYmxlUHJvcGVydHlOYW1lcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpLmdldEZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzKCl9O0EucHJvdG90eXBlLmdldFByb3BlcnR5TGFiZWw9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0TGFiZWxPZlByb3BlcnR5KHApfTtBLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZil7dGhpcy5hUHJvcGVydHlGaWx0ZXI9ZiYmZi5sZW5ndGg+MD9mOm51bGw7dGhpcy5pVG90YWxTaXplPS0xO3RoaXMuX2Fib3J0QWxsUGVuZGluZ1JlcXVlc3RzKCk7dGhpcy5yZXNldERhdGEoKTt0aGlzLl9maXJlUmVmcmVzaCh7cmVhc29uOkMuRmlsdGVyfSk7cmV0dXJuIHRoaXN9O0EucHJvdG90eXBlLnNvcnQ9ZnVuY3Rpb24ocyl7aWYocyBpbnN0YW5jZW9mIFMpe3M9W3NdfXRoaXMuYVByb3BlcnR5U29ydGVyPXM7dGhpcy5fYWJvcnRBbGxQZW5kaW5nUmVxdWVzdHMoKTt0aGlzLl9maXJlUmVmcmVzaCh7cmVhc29uOkMuU29ydH0pO3JldHVybiB0aGlzfTtBLnByb3RvdHlwZS5nZXRHcm91cE5hbWU9ZnVuY3Rpb24oYyxsKXtpZihjPT09dW5kZWZpbmVkKXJldHVybiIiO3ZhciBnPXRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbbC0xXSxkPXRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5maW5kRGltZW5zaW9uQnlQcm9wZXJ0eU5hbWUoZyksdj10aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbZ10uZm9ybWF0dGVyLHA9Yy5nZXRQcm9wZXJ0eShnKSxEPXA9PW51bGw/IiI6cCxmPXY/dihEKTpELEc9KChkLmdldExhYmVsVGV4dCgpKT9kLmdldExhYmVsVGV4dCgpKyc6ICc6JycpK2YsdD1udWxsO2lmKGQmJnRoaXMub0RpbWVuc2lvbkRldGFpbHNTZXRbZ10udGV4dFByb3BlcnR5TmFtZSl7dD1kLmdldFRleHRQcm9wZXJ0eSgpfWlmKHQpe3ZhciBzPWQuZ2V0VGV4dFByb3BlcnR5KCkubmFtZSxhPXRoaXMubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eVtnXS5mb3JtYXR0ZXIsYj1jLmdldFByb3BlcnR5KHMpLGU9Yj09bnVsbD8iIjpiLGg9YT9hKGUpOmU7aWYoaCl7Rys9JyAtICcraH19cmV0dXJuIEd9O0EucHJvdG90eXBlLnVwZGF0ZUFuYWx5dGljYWxJbmZvPWZ1bmN0aW9uKGMpe3ZhciBwPXRoaXMub0RpbWVuc2lvbkRldGFpbHNTZXQ7dGhpcy5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5PW5ldyBPYmplY3QoKTt0aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsPW5ldyBBcnJheSgpO3RoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWw9bmV3IEFycmF5KCk7dGhpcy5hTWVhc3VyZU5hbWU9bmV3IEFycmF5KCk7dGhpcy5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyPSh0aGlzLmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXI9PT11bmRlZmluZWQ/MToodGhpcy5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyPjk5OT8xOnRoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcisxKSk7dGhpcy5vTWVhc3VyZURldGFpbHNTZXQ9bmV3IE9iamVjdCgpO3RoaXMub0RpbWVuc2lvbkRldGFpbHNTZXQ9bmV3IE9iamVjdCgpO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXt2YXIgZD10aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQuZmluZERpbWVuc2lvbkJ5UHJvcGVydHlOYW1lKGNbaV0ubmFtZSk7aWYoZCYmKGNbaV0uaW5SZXN1bHQ9PXRydWV8fGNbaV0udmlzaWJsZT09dHJ1ZSkpe2NbaV0uZGltZW5zaW9uUHJvcGVydHlOYW1lPWQuZ2V0TmFtZSgpO3ZhciBEPXRoaXMub0RpbWVuc2lvbkRldGFpbHNTZXRbZC5nZXROYW1lKCldO2lmKCFEKXtEPW5ldyBPYmplY3QoKTtELm5hbWU9ZC5nZXROYW1lKCk7RC5hQXR0cmlidXRlTmFtZT1uZXcgQXJyYXkoKTtELmdyb3VwZWQ9ZmFsc2U7dGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldFtkLmdldE5hbWUoKV09RDt0aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsLnB1c2goRC5uYW1lKTtpZihjW2ldLmdyb3VwZWQ9PXRydWUpdGhpcy5hQWdncmVnYXRpb25MZXZlbC5wdXNoKEQubmFtZSl9aWYoY1tpXS5ncm91cGVkPT10cnVlKUQuZ3JvdXBlZD10cnVlO2lmKGQuZ2V0TmFtZSgpPT1jW2ldLm5hbWUpe0Qua2V5UHJvcGVydHlOYW1lPWNbaV0ubmFtZX12YXIgdD1kLmdldFRleHRQcm9wZXJ0eSgpO2lmKHQmJnQubmFtZT09Y1tpXS5uYW1lKXtELnRleHRQcm9wZXJ0eU5hbWU9Y1tpXS5uYW1lfWlmKGQuZmluZEF0dHJpYnV0ZUJ5TmFtZShjW2ldLm5hbWUpKXtELmFBdHRyaWJ1dGVOYW1lLnB1c2goY1tpXS5uYW1lKX19dmFyIG09dGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0LmZpbmRNZWFzdXJlQnlQcm9wZXJ0eU5hbWUoY1tpXS5uYW1lKTtpZihtJiYoY1tpXS5pblJlc3VsdD09dHJ1ZXx8Y1tpXS52aXNpYmxlPT10cnVlKSl7Y1tpXS5tZWFzdXJlUHJvcGVydHlOYW1lPW0uZ2V0TmFtZSgpO3ZhciBNPXRoaXMub01lYXN1cmVEZXRhaWxzU2V0W20uZ2V0TmFtZSgpXTtpZighTSl7TT1uZXcgT2JqZWN0KCk7TS5uYW1lPW0uZ2V0TmFtZSgpO3RoaXMub01lYXN1cmVEZXRhaWxzU2V0W20uZ2V0TmFtZSgpXT1NO3RoaXMuYU1lYXN1cmVOYW1lLnB1c2goTS5uYW1lKX1pZihtLmdldFJhd1ZhbHVlUHJvcGVydHkoKS5uYW1lPT1jW2ldLm5hbWUpe00ucmF3VmFsdWVQcm9wZXJ0eU5hbWU9Y1tpXS5uYW1lfXZhciBmPW0uZ2V0Rm9ybWF0dGVkVmFsdWVQcm9wZXJ0eSgpO2lmKGYmJmYubmFtZT09Y1tpXS5uYW1lKXtNLmZvcm1hdHRlZFZhbHVlUHJvcGVydHlOYW1lPWNbaV0ubmFtZX19dGhpcy5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5W2NbaV0ubmFtZV09Y1tpXX12YXIgTTtmb3IodmFyIGEgaW4gdGhpcy5vTWVhc3VyZURldGFpbHNTZXQpe3ZhciB1PXRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5maW5kTWVhc3VyZUJ5TmFtZShhKS5nZXRVbml0UHJvcGVydHkoKTtpZih1KXRoaXMub01lYXN1cmVEZXRhaWxzU2V0W2FdLnVuaXRQcm9wZXJ0eU5hbWU9dS5uYW1lfXZhciBiPWZ1bmN0aW9uKGUpe3ZhciBuPVtdO2Zvcih2YXIgZyBpbiBlKW4ucHVzaChnLm5hbWUpO3JldHVybiBuLnNvcnQoKS5qb2luKCI7Iil9O2lmKGIocCkhPWIodGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldCkpdGhpcy5pVG90YWxTaXplPS0xO3RoaXMuYUFuYWx5dGljYWxJbmZvPWM7dGhpcy5tRmluYWxMZW5ndGg9e307dGhpcy5tTGVuZ3RoPXt9O3RoaXMubUtleT17fTt0aGlzLm1Db250ZXh0cz17fTt0aGlzLmJOZWVkc1VwZGF0ZT1mYWxzZX07QS5wcm90b3R5cGUuZ2V0QW5hbHl0aWNhbEluZm9Gb3JDb2x1bW49ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eVtjXX07QS5wcm90b3R5cGUubG9hZEdyb3Vwcz1mdW5jdGlvbihnKXt2YXIgRz1uZXcgQXJyYXkoKTtmb3IodmFyIHMgaW4gZyl7Ry5wdXNoKHMpO2RlbGV0ZSB0aGlzLm1LZXlbc107ZGVsZXRlIHRoaXMubUxlbmd0aFtzXTtkZWxldGUgdGhpcy5tRmluYWxMZW5ndGhbc107dmFyIGE9Z1tzXTtmb3IodmFyIGk9MDtpPGEubGVuZ3RoO2krKyl7dmFyIGI9YVtpXTt0aGlzLl9nZXRDb250ZXh0c0ZvclBhcmVudEdyb3VwSWQocyxiLnN0YXJ0SW5kZXgsYi5sZW5ndGgsYi50aHJlc2hvbGQpfXZhciByPW5ldyBBcnJheSgpO2Zvcih2YXIgaT0tMSxzO3M9R1srK2ldOyl7ci5wdXNoKHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpzfSkpfXRoaXMuX2NvbnNpZGVyUmVxdWVzdEdyb3VwaW5nKHIpfX07QS5wcm90b3R5cGUuZ2V0QW5hbHl0aWNhbFF1ZXJ5UmVzdWx0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdH07QS5fcmVxdWVzdFR5cGU9e2dyb3VwTWVtYmVyc1F1ZXJ5OjEsdG90YWxTaXplUXVlcnk6Mixncm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUXVlcnk6MyxsZXZlbE1lbWJlcnNRdWVyeTo0LH07QS5wcm90b3R5cGUuX2dldENvbnRleHRzRm9yUGFyZW50Q29udGV4dD1mdW5jdGlvbihwLHMsbCx0LEwsbil7aWYocD09PXVuZGVmaW5lZClyZXR1cm5bXTtpZihwJiZwLmdldFBhdGgoKT09Ii9hcnRpZmljaWFsUm9vdENvbnRlbnQiKXtwPXRoaXMuZ2V0TW9kZWwoKS5nZXRDb250ZXh0KCIvIil9dmFyIFA9dGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KHAsTCk7cmV0dXJuIHRoaXMuX2dldENvbnRleHRzRm9yUGFyZW50R3JvdXBJZChQLHMsbCx0LG4pfTtBLnByb3RvdHlwZS5fZ2V0Q29udGV4dHNGb3JQYXJlbnRHcm91cElkPWZ1bmN0aW9uKHAscyxsLHQsbil7aWYocD09PXVuZGVmaW5lZClyZXR1cm5bXTtpZighcylzPTA7aWYoIWwpbD10aGlzLm9Nb2RlbC5pU2l6ZUxpbWl0O2lmKHRoaXMubUZpbmFsTGVuZ3RoW3BdJiZ0aGlzLm1MZW5ndGhbcF08bClsPXRoaXMubUxlbmd0aFtwXTtpZighdCl0PTA7aWYoIW4pbj0wO3ZhciBjLEwsZyxhLG07dmFyIEc9bj4wJiZwIT1udWxsO2lmKEcpe2E9W107bT1sK3Q7TD10cnVlO2M9W119ZWxzZXtjPXRoaXMuX2dldExvYWRlZENvbnRleHRzRm9yR3JvdXAocCxzLGwpO2c9dGhpcy5fY2FsY3VsYXRlUmVxdWlyZWRHcm91cFNlY3Rpb24ocCxzLGwsdCxjKTtMPWMubGVuZ3RoIT1sJiYhKHRoaXMubUZpbmFsTGVuZ3RoW3BdJiZjLmxlbmd0aD49dGhpcy5tTGVuZ3RoW3BdLXMpfWlmKCFMKXRoaXMuX2NsZWFudXBHcm91cGluZ0ZvckNvbXBsZXRlZFJlcXVlc3QodGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOnB9KSk7aWYodGhpcy5vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkpe2lmKEwmJiF0aGlzLl9pc1JlcXVlc3RQZW5kaW5nKHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpwfSkpKXt2YXIgTj10aGlzLmJQcm92aWRlVG90YWxTaXplJiZ0aGlzLmlUb3RhbFNpemU9PS0xJiYhdGhpcy5faXNSZXF1ZXN0UGVuZGluZyh0aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUudG90YWxTaXplUXVlcnkpKTtpZih0aGlzLmJVc2VCYXRjaFJlcXVlc3RzKXt2YXIgTTtpZihHKXt0aGlzLmFSZXF1ZXN0UXVldWUucHVzaChbQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblF1ZXJ5LHAsYSxtLG5dKTtNPXRoaXMuX3ByZXBhcmVHcm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUmVxdWVzdElkcygpfWVsc2V7dGhpcy5hUmVxdWVzdFF1ZXVlLnB1c2goW0EuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHAsZy5zdGFydEluZGV4LGcubGVuZ3RoXSk7TT1bdGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOnB9KV19aWYoTil7TS5wdXNoKHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeSkpO3RoaXMuX2NvbnNpZGVyUmVxdWVzdEdyb3VwaW5nKE0pO3RoaXMuYVJlcXVlc3RRdWV1ZS5wdXNoKFtBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeV0pfXEuc2FwLmRlbGF5ZWRDYWxsKDAsdGhpcyxBLnByb3RvdHlwZS5fcHJvY2Vzc1JlcXVlc3RRdWV1ZSl9ZWxzZXt2YXIgYjt2YXIgTTtpZihHKXtiPXRoaXMuX3ByZXBhcmVHcm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUXVlcnlSZXF1ZXN0KEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25RdWVyeSxwLGEsbSxuKTtNPWIuYVJlcXVlc3RJZH1lbHNle2I9dGhpcy5fcHJlcGFyZUdyb3VwTWVtYmVyc1F1ZXJ5UmVxdWVzdChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSxwLGcuc3RhcnRJbmRleCxnLmxlbmd0aCk7TT1bYi5zUmVxdWVzdElkXX10aGlzLl9leGVjdXRlUXVlcnlSZXF1ZXN0KGIpO2lmKE4mJiFiLmJJc0ZsYXRMaXN0UmVxdWVzdCl7TS5wdXNoKHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeSkpO3RoaXMuX2NvbnNpZGVyUmVxdWVzdEdyb3VwaW5nKE0pO3RoaXMuX2V4ZWN1dGVRdWVyeVJlcXVlc3QodGhpcy5fcHJlcGFyZVRvdGFsU2l6ZVF1ZXJ5UmVxdWVzdChBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeSkpfX1pZihwPT1udWxsKXRoaXMuX2Fib3J0QWxsUGVuZGluZ1JlcXVlc3RzKCl9fXJldHVybiBjfTtBLnByb3RvdHlwZS5fcHJvY2Vzc1JlcXVlc3RRdWV1ZT1mdW5jdGlvbigpe2lmKHRoaXMuYVJlcXVlc3RRdWV1ZS5sZW5ndGg9PTApcmV0dXJuO3ZhciByPVtdO3ZhciBmPWZhbHNlO2Zvcih2YXIgaT0tMSxSO1I9dGhpcy5hUmVxdWVzdFF1ZXVlWysraV07KXtpZihSWzBdPT1BLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSl7dmFyIGE9QS5wcm90b3R5cGUuX3ByZXBhcmVHcm91cE1lbWJlcnNRdWVyeVJlcXVlc3QuYXBwbHkodGhpcyxSKTtmPWZ8fGEuYklzRmxhdExpc3RSZXF1ZXN0O3IucHVzaChhKX19Zm9yKHZhciBpPS0xLFI7Uj10aGlzLmFSZXF1ZXN0UXVldWVbKytpXTspe3ZhciBhPW51bGw7c3dpdGNoKFJbMF0pe2Nhc2UgQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnk6Y29udGludWU7Y2FzZSBBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeTppZighZilhPUEucHJvdG90eXBlLl9wcmVwYXJlVG90YWxTaXplUXVlcnlSZXF1ZXN0LmFwcGx5KHRoaXMsUik7YnJlYWs7ZGVmYXVsdDpxLnNhcC5sb2cuZmF0YWwoInVuaGFuZGxlZCByZXF1ZXN0IHR5cGUgIit0aGlzLmFSZXF1ZXN0UXVldWVbaV1bMF0pO2NvbnRpbnVlfWlmKGEpci5wdXNoKGEpfWlmKHIubGVuZ3RoPjEpdGhpcy5fZXhlY3V0ZUJhdGNoUmVxdWVzdChyKTtlbHNlIHRoaXMuX2V4ZWN1dGVRdWVyeVJlcXVlc3QoclswXSk7dGhpcy5hUmVxdWVzdFF1ZXVlPVtdfTtBLnByb3RvdHlwZS5fcHJlcGFyZUdyb3VwTWVtYmVyc1F1ZXJ5UmVxdWVzdD1mdW5jdGlvbihyLGcscyxMKXt2YXIgRz1bXTt2YXIgYz10aGlzLmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXI7dmFyIGE9bmV3IG8uUXVlcnlSZXN1bHRSZXF1ZXN0KHRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdCk7YS5zZXRSZXNvdXJjZVBhdGgodGhpcy5fZ2V0UmVzb3VyY2VQYXRoKCkpO3ZhciBiPTAsZD0tMTtpZihnKXtHPXRoaXMuX2dldEdyb3VwSWRDb21wb25lbnRzKGcpO2I9ZD1HLmxlbmd0aDt2YXIgdT0wO2Zvcih2YXIgaT0wLGU9MDtpPGI7ZSsrKXtpZih0aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0W3RoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWxbZV1dLmdyb3VwZWQ9PWZhbHNlKSsrdTtlbHNlKytpfWI9ZD1iK3U7aWYodGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbC5sZW5ndGg+MCl7d2hpbGUodGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldFt0aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsW2RdXS5ncm91cGVkPT1mYWxzZSlpZigrK2Q9PXRoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoKWJyZWFrfX12YXIgZj10aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsLnNsaWNlKDAsZCsxKTthLnNldEFnZ3JlZ2F0aW9uTGV2ZWwoZik7Zm9yKHZhciBpPTA7aTxmLmxlbmd0aDtpKyspe3ZhciBEPXRoaXMub0RpbWVuc2lvbkRldGFpbHNTZXRbZltpXV07dmFyIEk9KEQua2V5UHJvcGVydHlOYW1lIT11bmRlZmluZWQpO3ZhciBoPXRydWU7YS5pbmNsdWRlRGltZW5zaW9uS2V5VGV4dEF0dHJpYnV0ZXMoRC5uYW1lLHRydWUsaCxELmFBdHRyaWJ1dGVOYW1lKX12YXIgaj1hLmdldEZpbHRlckV4cHJlc3Npb24oKTtqLmNsZWFyKCk7aWYodGhpcy5hR2xvYmFsRmlsdGVyKWouYWRkVUk1RmlsdGVyQ29uZGl0aW9ucyh0aGlzLmFHbG9iYWxGaWx0ZXIpO2lmKHRoaXMuYVByb3BlcnR5RmlsdGVyKWouYWRkVUk1RmlsdGVyQ29uZGl0aW9ucyh0aGlzLmFQcm9wZXJ0eUZpbHRlcik7aWYoYj49MSl7Zm9yKHZhciBpPTAsbD1HLmxlbmd0aDtpPGw7aSsrKXtqLmFkZENvbmRpdGlvbih0aGlzLmFBZ2dyZWdhdGlvbkxldmVsW2ldLEYuRVEsR1tpXSl9fXZhciBrPSEodGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbC5sZW5ndGgtZC0xPjApO3ZhciBtO3ZhciBuO3ZhciBwO3ZhciBNO3ZhciB0PW5ldyBBcnJheSgpO2lmKGchPW51bGx8fHRoaXMuYlByb3ZpZGVHcmFuZFRvdGFscyl7YS5zZXRNZWFzdXJlcyh0aGlzLmFNZWFzdXJlTmFtZSk7Zm9yKHZhciB2IGluIHRoaXMub01lYXN1cmVEZXRhaWxzU2V0KXtNPXRoaXMub01lYXN1cmVEZXRhaWxzU2V0W3ZdO2lmKCFrJiZ0aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbdl0udG90YWw9PWZhbHNlKXttPWZhbHNlO249ZmFsc2U7cD1mYWxzZX1lbHNle209KE0ucmF3VmFsdWVQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7bj0oTS5mb3JtYXR0ZWRWYWx1ZVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtwPShNLnVuaXRQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7aWYocCl7aWYodC5pbmRleE9mKE0udW5pdFByb3BlcnR5TmFtZSk9PS0xKXt0LnB1c2goTS51bml0UHJvcGVydHlOYW1lKX19fWEuaW5jbHVkZU1lYXN1cmVSYXdGb3JtYXR0ZWRWYWx1ZVVuaXQoTS5uYW1lLG0sbixwKX1mb3IodmFyIGkgaW4gZil7dmFyIHc7aWYoKHc9dC5pbmRleE9mKGZbaV0pKSE9LTEpdC5zcGxpY2UodywxKX19dmFyIHg9YS5nZXRTb3J0RXhwcmVzc2lvbigpO3guY2xlYXIoKTtpZighayl7Zm9yKHZhciBpIGluIGYpe3ZhciB5PW8uU29ydE9yZGVyLkFzY2VuZGluZztpZih0aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbZltpXV0uc29ydGVkKXN3aXRjaCh0aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbZltpXV0uc29ydE9yZGVyKXtjYXNlIHNhcC51aS50YWJsZS5Tb3J0T3JkZXIuQXNjZW5kaW5nOnk9by5Tb3J0T3JkZXIuQXNjZW5kaW5nO2JyZWFrO2Nhc2Ugc2FwLnVpLnRhYmxlLlNvcnRPcmRlci5EZXNjZW5kaW5nOnk9by5Tb3J0T3JkZXIuRGVzY2VuZGluZzticmVha314LmFkZFNvcnRlcihmW2ldLHkpfX1pZih0aGlzLmFHbG9iYWxTb3J0ZXIpdGhpcy5fYXBwbHlVSTVTb3J0ZXJUb1NvcnRFeHByZXNzaW9uKHRoaXMuYUdsb2JhbFNvcnRlcix4KTtpZih0aGlzLmFQcm9wZXJ0eVNvcnRlcil0aGlzLl9hcHBseVVJNVNvcnRlclRvU29ydEV4cHJlc3Npb24odGhpcy5hUHJvcGVydHlTb3J0ZXIseCk7aWYoTD09MClxLnNhcC5sb2cuZmF0YWwoInVuaGFuZGxlZCBjYXNlOiBsb2FkIDAgZW50aXRpZXMgb2Ygc3ViIGdyb3VwIik7YS5zZXRSZXN1bHRQYWdlQm91bmRhcmllcyhzKzEscytMKTthLnNldFJlcXVlc3RPcHRpb25zKG51bGwsIXRoaXMubUZpbmFsTGVuZ3RoW2ddKTtyZXR1cm57aVJlcXVlc3RUeXBlOnIsc1JlcXVlc3RJZDp0aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnkse2dyb3VwSWQ6Z30pLG9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0OmEsc0dyb3VwSWQ6ZyxhU2VsZWN0ZWRVbml0UHJvcGVydHlOYW1lOnQsYUFnZ3JlZ2F0aW9uTGV2ZWw6ZixiSXNGbGF0TGlzdFJlcXVlc3Q6ayYmYj09MCxpU3RhcnRJbmRleDpzLGlMZW5ndGg6TH19O0EucHJvdG90eXBlLl9wcmVwYXJlVG90YWxTaXplUXVlcnlSZXF1ZXN0PWZ1bmN0aW9uKHIpe3ZhciBjPXRoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcjt2YXIgYT1uZXcgby5RdWVyeVJlc3VsdFJlcXVlc3QodGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0KTthLnNldFJlc291cmNlUGF0aCh0aGlzLl9nZXRSZXNvdXJjZVBhdGgoKSk7YS5zZXRBZ2dyZWdhdGlvbkxldmVsKHRoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwpO2Euc2V0TWVhc3VyZXMoW10pO3ZhciBmPWEuZ2V0RmlsdGVyRXhwcmVzc2lvbigpO2YuY2xlYXIoKTtpZih0aGlzLmFHbG9iYWxGaWx0ZXIpZi5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKHRoaXMuYUdsb2JhbEZpbHRlcik7aWYodGhpcy5hUHJvcGVydHlGaWx0ZXIpZi5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKHRoaXMuYVByb3BlcnR5RmlsdGVyKTthLnNldFJlc3VsdFBhZ2VCb3VuZGFyaWVzKDEsMSk7YS5zZXRSZXF1ZXN0T3B0aW9ucyhudWxsLHRydWUpO3JldHVybntpUmVxdWVzdFR5cGU6cixzUmVxdWVzdElkOnRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeSksb0FuYWx5dGljYWxRdWVyeVJlcXVlc3Q6YX19O0EucHJvdG90eXBlLl9wcmVwYXJlR3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblF1ZXJ5UmVxdWVzdD1mdW5jdGlvbihyLGcsYSxsLG4pe3ZhciBwPWZ1bmN0aW9uKHIsTCxoLGwpe3ZhciBqPVtdO3ZhciBrPXQuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcjt2YXIgcz1uZXcgby5RdWVyeVJlc3VsdFJlcXVlc3QodC5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0KTtzLnNldFJlc291cmNlUGF0aCh0Ll9nZXRSZXNvdXJjZVBhdGgoKSk7dmFyIHU9dC5hQWdncmVnYXRpb25MZXZlbC5zbGljZSgwLEwpO3Muc2V0QWdncmVnYXRpb25MZXZlbCh1KTtmb3IodmFyIGk9MDtpPHUubGVuZ3RoO2krKyl7dmFyIEQ9dC5vRGltZW5zaW9uRGV0YWlsc1NldFt1W2ldXTt2YXIgST0oRC5rZXlQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7dmFyIHY9KEQudGV4dFByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtzLmluY2x1ZGVEaW1lbnNpb25LZXlUZXh0QXR0cmlidXRlcyhELm5hbWUsdHJ1ZSx2LEQuYUF0dHJpYnV0ZU5hbWUpfXZhciB3PXMuZ2V0RmlsdGVyRXhwcmVzc2lvbigpO3cuY2xlYXIoKTtpZih0LmFHbG9iYWxGaWx0ZXIpdy5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKHQuYUdsb2JhbEZpbHRlcik7aWYodC5hUHJvcGVydHlGaWx0ZXIpdy5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKHQuYVByb3BlcnR5RmlsdGVyKTtpZih0LmFQcm9wZXJ0eUZpbHRlcil3LmFkZFVJNUZpbHRlckNvbmRpdGlvbnModC5hUHJvcGVydHlGaWx0ZXIpO3cuYWRkVUk1RmlsdGVyQ29uZGl0aW9ucyhoKTt2YXIgeD0wO3ZhciB5PUwtMT09dC5hQWdncmVnYXRpb25MZXZlbC5sZW5ndGg7dmFyIHo7dmFyIEI7dmFyIEU7dmFyIE07dmFyIEg9bmV3IEFycmF5KCk7cy5zZXRNZWFzdXJlcyh0LmFNZWFzdXJlTmFtZSk7Zm9yKHZhciBKIGluIHQub01lYXN1cmVEZXRhaWxzU2V0KXtNPXQub01lYXN1cmVEZXRhaWxzU2V0W0pdO2lmKCF5JiZ0Lm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbSl0udG90YWw9PWZhbHNlKXt6PWZhbHNlO0I9ZmFsc2U7RT1mYWxzZX1lbHNle3o9KE0ucmF3VmFsdWVQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7Qj0oTS5mb3JtYXR0ZWRWYWx1ZVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtFPShNLnVuaXRQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7aWYoRSl7aWYoSC5pbmRleE9mKE0udW5pdFByb3BlcnR5TmFtZSk9PS0xKXtILnB1c2goTS51bml0UHJvcGVydHlOYW1lKX19fXMuaW5jbHVkZU1lYXN1cmVSYXdGb3JtYXR0ZWRWYWx1ZVVuaXQoTS5uYW1lLHosQixFKX1mb3IodmFyIGkgaW4gdSl7dmFyIEs7aWYoKEs9SC5pbmRleE9mKHVbaV0pKSE9LTEpSC5zcGxpY2UoSywxKX12YXIgTj1zLmdldFNvcnRFeHByZXNzaW9uKCk7Ti5jbGVhcigpO2lmKCF5KXtmb3IodmFyIGkgaW4gdSl7dmFyIE89by5Tb3J0T3JkZXIuQXNjZW5kaW5nO2lmKHQubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eVt1W2ldXS5zb3J0ZWQpc3dpdGNoKHQubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eVt1W2ldXS5zb3J0T3JkZXIpe2Nhc2Ugc2FwLnVpLnRhYmxlLlNvcnRPcmRlci5Bc2NlbmRpbmc6Tz1vLlNvcnRPcmRlci5Bc2NlbmRpbmc7YnJlYWs7Y2FzZSBzYXAudWkudGFibGUuU29ydE9yZGVyLkRlc2NlbmRpbmc6Tz1vLlNvcnRPcmRlci5EZXNjZW5kaW5nO2JyZWFrfU4uYWRkU29ydGVyKHVbaV0sTyl9fWlmKHQuYUdsb2JhbFNvcnRlcil0Ll9hcHBseVVJNVNvcnRlclRvU29ydEV4cHJlc3Npb24odC5hR2xvYmFsU29ydGVyLE4pO2lmKHQuYVByb3BlcnR5U29ydGVyKXQuX2FwcGx5VUk1U29ydGVyVG9Tb3J0RXhwcmVzc2lvbih0LmFQcm9wZXJ0eVNvcnRlcixOKTtpZihsPT0wKXEuc2FwLmxvZy5mYXRhbCgidW5oYW5kbGVkIGNhc2U6IGxvYWQgMCBlbnRpdGllcyBvZiBzdWIgZ3JvdXAiKTtzLnNldFJlc3VsdFBhZ2VCb3VuZGFyaWVzKHgrMSx4K2wpO3JldHVybntpUmVxdWVzdFR5cGU6cixzUmVxdWVzdElkOnQuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5sZXZlbE1lbWJlcnNRdWVyeSx7bGV2ZWw6TH0pLG9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0OnMsaUxldmVsOkwsYVNlbGVjdGVkVW5pdFByb3BlcnR5TmFtZTpILGFBZ2dyZWdhdGlvbkxldmVsOnUsYklzRmxhdExpc3RSZXF1ZXN0OnksaVN0YXJ0SW5kZXg6eCxpTGVuZ3RoOmx9fTtpZihhLmxlbmd0aCE9MCl7cS5zYXAubG9nLmZhdGFsKCJncm91cCBoZWFkZXIgcGF0aHMgbm90IHN1cHBvcnRlZCB5ZXQiKTtyZXR1cm59dmFyIG09dGhpcy5fZ2V0R3JvdXBJZExldmVsKGcpKzE7dmFyIGI9bStuO3ZhciBHPVtdO3ZhciBSPVtdO3ZhciB0PXRoaXM7dmFyIGY9W107dmFyIGM9dGhpcy5fZ2V0R3JvdXBJZENvbXBvbmVudHMoZyk7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspZi5wdXNoKG5ldyBzYXAudWkubW9kZWwuRmlsdGVyKHRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbaV0sc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkVRLGNbaV0pKTtmb3IodmFyIEw9bTtMPD1iO0wrKyl7dmFyIGQ9TWF0aC5jZWlsKChsLUwpLyhiLUwrMSkpO3ZhciBlPXAoQS5fcmVxdWVzdFR5cGUubGV2ZWxNZW1iZXJzUXVlcnksTCxmLGQpO0cucHVzaChlKTtSLnB1c2godGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5LHtsZXZlbDpMfSkpfXJldHVybntpUmVxdWVzdFR5cGU6cixhUmVxdWVzdElkOlIsYUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25SZXF1ZXN0RGV0YWlsczpHLHNHcm91cElkOmcsaUxlbmd0aDpsfX07QS5wcm90b3R5cGUuX3ByZXBhcmVHcm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUmVxdWVzdElkcz1mdW5jdGlvbihnLG4pe3ZhciBtPXRoaXMuX2dldEdyb3VwSWRMZXZlbChnKSsxO3ZhciBhPW0rbjt2YXIgcj1bXTtmb3IodmFyIGw9MTtsPD1hO2wrKyl7ci5wdXNoKHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5sZXZlbE1lbWJlcnNRdWVyeSx7bGV2ZWw6bH0pKX1yZXR1cm4gcn07QS5wcm90b3R5cGUuX2dldFF1ZXJ5T0RhdGFSZXF1ZXN0T3B0aW9ucz1mdW5jdGlvbihhKXt2YXIgcz1hLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRzZWxlY3QiKTt2YXIgZj1hLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRmaWx0ZXIiKTt2YXIgTz1hLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRvcmRlcmJ5Iik7dmFyIGI9YS5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkc2tpcCIpO3ZhciB0PWEuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHRvcCIpO3ZhciBpPWEuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJGlubGluZWNvdW50Iik7aWYodGhpcy5tUGFyYW1ldGVyc1siZmlsdGVyIl0pZis9ImFuZCAoIit0aGlzLm1QYXJhbWV0ZXJzWyJmaWx0ZXIiXSsiKSI7dmFyIHA9W107aWYocylwLnB1c2goIiRzZWxlY3Q9IitzKTtpZihmKXAucHVzaCgiJGZpbHRlcj0iK2YpO2lmKE8pcC5wdXNoKCIkb3JkZXJieT0iK08pO2lmKGIpcC5wdXNoKCIkc2tpcD0iK2IpO2lmKHQpcC5wdXNoKCIkdG9wPSIrdCk7aWYoaSlwLnB1c2goIiRpbmxpbmVjb3VudD0iK2kpO3JldHVybiBwfTtBLnByb3RvdHlwZS5fZXhlY3V0ZUJhdGNoUmVxdWVzdD1mdW5jdGlvbihyKXt2YXIgYz10aGlzLmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXI7dmFyIHQ9dGhpczt2YXIgYj1bXSxlPVtdO2Zvcih2YXIgaT0tMSxSO1I9clsrK2ldOyl7dmFyIGE9Ui5vQW5hbHl0aWNhbFF1ZXJ5UmVxdWVzdCxnPVIuc0dyb3VwSWQ7aWYoYS5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkc2VsZWN0Iik9PW51bGwpe3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKTt2YXIgRT10aGlzLmdldE1vZGVsKCkuZ2V0Q29udGV4dCgiL2FydGlmaWNpYWxSb290Q29udGVudCIpO2c9bnVsbDt0aGlzLm1MZW5ndGhbZ109MTt0aGlzLm1GaW5hbExlbmd0aFtnXT10cnVlO3RoaXMubUtleVtnXT1bImFydGlmaWNpYWxSb290Q29udGVudCJdO3RoaXMuYk5lZWRzVXBkYXRlPXRydWU7dmFyIHQ9dGhpcztpZihyLmxlbmd0aD09MSl7c2V0VGltZW91dChmdW5jdGlvbigpe3QuZmlyZURhdGFSZWNlaXZlZCgpfSl9dGhpcy5iQXJ0aWZpY2FsUm9vdENvbnRleHQ9dHJ1ZTtjb250aW51ZX12YXIgcD1hLmdldFVSSVRvUXVlcnlSZXN1bHRFbnRyaWVzKCk7aWYocC5pbmRleE9mKCIvIik9PTApcD1wLnN1YnN0cmluZygxKTtpZighdGhpcy5faXNSZXF1ZXN0UGVuZGluZyhSLnNSZXF1ZXN0SWQpKXt0aGlzLl9yZWdpc3Rlck5ld1JlcXVlc3QoUi5zUmVxdWVzdElkKTtiLnB1c2godGhpcy5vTW9kZWwuY3JlYXRlQmF0Y2hPcGVyYXRpb24ocC5yZXBsYWNlKC9cIC9nLCIlMjAiKSwiR0VUIikpO2UucHVzaChSKX19cS5zYXAubG9nLmRlYnVnKCJBbmFseXRpY2FsQmluZGluZzogZXhlY3V0aW5nIGJhdGNoIHJlcXVlc3Qgd2l0aCAiK2UubGVuZ3RoKyIgb3BlcmF0aW9ucyIpO3ZhciBkPXRoaXMuX2dldElkRm9yTmV3UmVxdWVzdEhhbmRsZSgpO2lmKGIubGVuZ3RoPjApe3RoaXMub01vZGVsLmFkZEJhdGNoUmVhZE9wZXJhdGlvbnMoYik7dGhpcy5maXJlRGF0YVJlcXVlc3RlZCgpO3ZhciBmPXRoaXMub01vZGVsLnN1Ym1pdEJhdGNoKHMsaCx0cnVlLHRydWUpO3RoaXMub01vZGVsLmZpcmVSZXF1ZXN0U2VudCh7dXJsOnRoaXMub01vZGVsLnNTZXJ2aWNlVXJsKyIvJGJhdGNoIix0eXBlOiJQT1NUIixhc3luYzp0cnVlLGluZm86IiIsaW5mb09iamVjdDp7fX0pO3RoaXMuX3JlZ2lzdGVyTmV3UmVxdWVzdEhhbmRsZShkLGYpfWZ1bmN0aW9uIHMoRCxqKXt0Ll9kZXJlZ2lzdGVySGFuZGxlT2ZDb21wbGV0ZWRSZXF1ZXN0KGQpO2lmKGUubGVuZ3RoIT1ELl9fYmF0Y2hSZXNwb25zZXMubGVuZ3RoKXEuc2FwLmxvZy5mYXRhbCgiYXNzZXJ0aW9uIGZhaWxlZDogcmVjZWl2ZWQgIitELl9fYmF0Y2hSZXNwb25zZXMubGVuZ3RoKyIgcmVzcG9uc2VzIGZvciAiK2UubGVuZ3RoKyIgcmVhZCBvcGVyYXRpb25zIGluIHRoZSBiYXRjaCByZXF1ZXN0Iik7aWYoYyE9dC5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyKXtmb3IodmFyIGk9LTEsaztrPWVbKytpXS5zUmVxdWVzdElkOyl7dC5fZGVyZWdpc3RlckNvbXBsZXRlZFJlcXVlc3Qoayk7dC5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdChrKX1yZXR1cm59Zm9yKHZhciBpPTA7aTxELl9fYmF0Y2hSZXNwb25zZXMubGVuZ3RoO2krKyl7aWYoRC5fX2JhdGNoUmVzcG9uc2VzW2ldLmRhdGEhPXVuZGVmaW5lZCl7c3dpdGNoKGVbaV0uaVJlcXVlc3RUeXBlKXtjYXNlIEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5OnQuX3Byb2Nlc3NHcm91cE1lbWJlcnNRdWVyeVJlc3BvbnNlKGVbaV0sRC5fX2JhdGNoUmVzcG9uc2VzW2ldLmRhdGEpO2JyZWFrO2Nhc2UgQS5fcmVxdWVzdFR5cGUudG90YWxTaXplUXVlcnk6dC5fcHJvY2Vzc1RvdGFsU2l6ZVF1ZXJ5UmVzcG9uc2UoZVtpXSxELl9fYmF0Y2hSZXNwb25zZXNbaV0uZGF0YSk7YnJlYWs7ZGVmYXVsdDpxLnNhcC5sb2cuZmF0YWwoImludmFsaWQgcmVxdWVzdCB0eXBlICIrZVtpXS5pUmVxdWVzdFR5cGUpO2NvbnRpbnVlfX10Ll9kZXJlZ2lzdGVyQ29tcGxldGVkUmVxdWVzdChlW2ldLnNSZXF1ZXN0SWQpO3QuX2NsZWFudXBHcm91cGluZ0ZvckNvbXBsZXRlZFJlcXVlc3QoZVtpXS5zUmVxdWVzdElkKX12YXIgTz10cnVlO3ZhciBCPXQub01vZGVsLl9nZXRCYXRjaEVycm9ycyhEKTtpZihCLmxlbmd0aD4wKU89ZmFsc2U7dC5vTW9kZWwuZmlyZVJlcXVlc3RDb21wbGV0ZWQoe3VybDpqLnJlcXVlc3RVcmksdHlwZToiUE9TVCIsYXN5bmM6dHJ1ZSxpbmZvOiIiLGluZm9PYmplY3Q6e30sc3VjY2VzczpPLGVycm9yb2JqZWN0Ok8/e306dC5vTW9kZWwuX2hhbmRsZUVycm9yKEJbMF0pfSk7aWYoTyl0Ll9maXJlQ2hhbmdlKHtyZWFzb246Qy5DaGFuZ2V9KTt0LmZpcmVEYXRhUmVjZWl2ZWQoKX1mdW5jdGlvbiBoKGope3QuX2RlcmVnaXN0ZXJIYW5kbGVPZkNvbXBsZXRlZFJlcXVlc3QoZCk7Zm9yKHZhciBpPS0xLGs7az1lWysraV07KXt0Ll9kZXJlZ2lzdGVyQ29tcGxldGVkUmVxdWVzdChrLnNSZXF1ZXN0SWQpO3QuX2NsZWFudXBHcm91cGluZ0ZvckNvbXBsZXRlZFJlcXVlc3Qoay5zUmVxdWVzdElkKX1pZihjIT10LmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXIpe3JldHVybn10Lm9Nb2RlbC5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOiIiLHR5cGU6IlBPU1QiLGFzeW5jOnRydWUsaW5mbzoiIixpbmZvT2JqZWN0Ont9LHN1Y2Nlc3M6ZmFsc2UsZXJyb3JvYmplY3Q6dC5vTW9kZWwuX2hhbmRsZUVycm9yKGopfSk7dC5maXJlUmVxdWVzdEZhaWxlZCh0Lm9Nb2RlbC5faGFuZGxlRXJyb3IoaikpO3QuZmlyZURhdGFSZWNlaXZlZCgpfX07QS5wcm90b3R5cGUuX2V4ZWN1dGVRdWVyeVJlcXVlc3Q9ZnVuY3Rpb24ocil7aWYoci5pUmVxdWVzdFR5cGU9PUEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25RdWVyeSl7Zm9yKHZhciBpPS0xLGE7YT1yLmFHcm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUmVxdWVzdERldGFpbHNbKytpXTspe3RoaXMuX2V4ZWN1dGVRdWVyeVJlcXVlc3QoYSl9cmV0dXJufXZhciBjPXRoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcjt2YXIgYT1yLm9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0LGc9ci5zR3JvdXBJZDt2YXIgcD1hLmdldFVSSVRvUXVlcnlSZXN1bHRFbnRpdHlTZXQoKTt2YXIgUD10aGlzLl9nZXRRdWVyeU9EYXRhUmVxdWVzdE9wdGlvbnMoYSk7dmFyIHQ9dGhpcztpZihhLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRzZWxlY3QiKT09bnVsbCl7dGhpcy5maXJlRGF0YVJlcXVlc3RlZCgpO3ZhciBlPXRoaXMuZ2V0TW9kZWwoKS5nZXRDb250ZXh0KCIvYXJ0aWZpY2lhbFJvb3RDb250ZW50Iik7Zz1udWxsO3RoaXMubUxlbmd0aFtnXT0xO3RoaXMubUZpbmFsTGVuZ3RoW2ddPXRydWU7dGhpcy5tS2V5W2ddPVsiYXJ0aWZpY2lhbFJvb3RDb250ZW50Il07dGhpcy5iTmVlZHNVcGRhdGU9dHJ1ZTt2YXIgdD10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZih0Ll9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KHIuc1JlcXVlc3RJZCkpdC5maXJlRGF0YVJlY2VpdmVkKCl9KTt0aGlzLmJBcnRpZmljYWxSb290Q29udGV4dD10cnVlO3JldHVybn10aGlzLl9yZWdpc3Rlck5ld1JlcXVlc3Qoci5zUmVxdWVzdElkKTt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCk7Zm9yKHZhciBpPTA7aTxQLmxlbmd0aDtpKyspUFtpXT1QW2ldLnJlcGxhY2UoL1wgL2csIiUyMCIpO3Euc2FwLmxvZy5kZWJ1ZygiQW5hbHl0aWNhbEJpbmRpbmc6IGV4ZWN1dGluZyBxdWVyeSByZXF1ZXN0Iik7dmFyIFI9dGhpcy5fZ2V0SWRGb3JOZXdSZXF1ZXN0SGFuZGxlKCk7dGhpcy5vTW9kZWwuX2xvYWREYXRhKHAsUCxzLEUsZmFsc2UsdSxmKTtmdW5jdGlvbiBzKGQpe3QuX2RlcmVnaXN0ZXJIYW5kbGVPZkNvbXBsZXRlZFJlcXVlc3QoUik7aWYoYyE9dC5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyKXt0Ll9kZXJlZ2lzdGVyQ29tcGxldGVkUmVxdWVzdChyLnNSZXF1ZXN0SWQpO3JldHVybn1zd2l0Y2goci5pUmVxdWVzdFR5cGUpe2Nhc2UgQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnk6dC5fcHJvY2Vzc0dyb3VwTWVtYmVyc1F1ZXJ5UmVzcG9uc2UocixkKTticmVhaztjYXNlIEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5OnQuX3Byb2Nlc3NUb3RhbFNpemVRdWVyeVJlc3BvbnNlKHIsZCk7YnJlYWs7Y2FzZSBBLl9yZXF1ZXN0VHlwZS5sZXZlbE1lbWJlcnNRdWVyeTp0Ll9wcm9jZXNzTGV2ZWxNZW1iZXJzUXVlcnlSZXNwb25zZShyLGQpO2JyZWFrO2RlZmF1bHQ6cS5zYXAubG9nLmZhdGFsKCJpbnZhbGlkIHJlcXVlc3QgdHlwZSAiK3IuaVJlcXVlc3RUeXBlKTticmVha310Ll9kZXJlZ2lzdGVyQ29tcGxldGVkUmVxdWVzdChyLnNSZXF1ZXN0SWQpfWZ1bmN0aW9uIGYoKXtpZihjIT10LmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXIpe3JldHVybn1pZih0Ll9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KHIuc1JlcXVlc3RJZCkpdC5maXJlRGF0YVJlY2VpdmVkKCl9ZnVuY3Rpb24gRShkKXt0Ll9kZXJlZ2lzdGVySGFuZGxlT2ZDb21wbGV0ZWRSZXF1ZXN0KFIpO3QuX2RlcmVnaXN0ZXJDb21wbGV0ZWRSZXF1ZXN0KHIuc1JlcXVlc3RJZCk7dC5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdChyLnNSZXF1ZXN0SWQpO2lmKGMhPXQuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcil7cmV0dXJufXQuZmlyZURhdGFSZWNlaXZlZCgpfWZ1bmN0aW9uIHUoYil7dC5fcmVnaXN0ZXJOZXdSZXF1ZXN0SGFuZGxlKFIsYil9fTtBLnByb3RvdHlwZS5fYWJvcnRBbGxQZW5kaW5nUmVxdWVzdHM9ZnVuY3Rpb24oKXt0aGlzLl9hYm9ydEFsbFBlbmRpbmdSZXF1ZXN0c0J5SGFuZGxlKCk7dGhpcy5fY2xlYXJBbGxQZW5kaW5nUmVxdWVzdHMoKX07QS5wcm90b3R5cGUuX3Byb2Nlc3NHcm91cE1lbWJlcnNRdWVyeVJlc3BvbnNlPWZ1bmN0aW9uKHIsZCl7dmFyIGc9ci5zR3JvdXBJZCxzPXIuYVNlbGVjdGVkVW5pdFByb3BlcnR5TmFtZSxhPXIuYUFnZ3JlZ2F0aW9uTGV2ZWwsYj1yLmlTdGFydEluZGV4LGw9ci5pTGVuZ3RoO2lmKCF0aGlzLm1LZXlbZ10pdGhpcy5tS2V5W2ddPVtdO3ZhciBLPXRoaXMubUtleVtnXTt2YXIgYz1iO3ZhciB1PShzLmxlbmd0aD4wKTt2YXIgcD1udWxsLEQ9bnVsbDt2YXIgZj0tMTt2YXIgZT0wO3ZhciBoPW51bGw7Zm9yKHZhciBpPTA7aTxkLnJlc3VsdHMubGVuZ3RoO2krKyl7dmFyIEU9ZC5yZXN1bHRzW2ldO2lmKHUpe0Q9IiI7Zm9yKHZhciBqPTA7ajxhLmxlbmd0aDtqKyspe0QrPUVbYVtqXV0rInwifWlmKHA9PUQpe2lmKGY9PS0xKWY9aS0xO3ZhciBtPS0xLFA9ZC5yZXN1bHRzW2ktMV07Zm9yKHZhciBrPTA7azxzLmxlbmd0aDtrKyspe2lmKFBbc1trXV0hPUVbc1trXV0pe209azticmVha319aWYobT09LTEpcS5zYXAubG9nLmZhdGFsKCJhc3NlcnRpb24gZmFpbGVkOiBubyBkZXZpYXRpbmcgdW5pdHMgZm91bmQgZm9yIHJlc3VsdCBlbnRyaWVzICIrKGktMSkrIiBhbmQgIitpKX1pZigocCE9RHx8aT09ZC5yZXN1bHRzLmxlbmd0aC0xKSYmZiE9LTEpe3ZhciBNPXEuZXh0ZW5kKHRydWUse30sZC5yZXN1bHRzW2ZdKTt2YXIgbj10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KCIvIit0aGlzLm9Nb2RlbC5fZ2V0S2V5KGQucmVzdWx0c1tmXSkpO2Zvcih2YXIgaz0wO2s8cy5sZW5ndGg7aysrKU1bc1trXV09IioiO2Zvcih2YXIgdCBpbiB0aGlzLm9NZWFzdXJlRGV0YWlsc1NldCl7dmFyIHY9dGhpcy5vTWVhc3VyZURldGFpbHNTZXRbdF07aWYodi5yYXdWYWx1ZVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKU1bdi5yYXdWYWx1ZVByb3BlcnR5TmFtZV09IioiO2lmKHYuZm9ybWF0dGVkVmFsdWVQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZClNW3YuZm9ybWF0dGVkVmFsdWVQcm9wZXJ0eU5hbWVdPSIqIn12YXIgdz0iIjtpZihoPT1udWxsKWg9dGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0LmdldEFsbERpbWVuc2lvbk5hbWVzKCkuY29uY2F0KFtdKS5zb3J0KCk7Zm9yKHZhciBrPTA7azxoLmxlbmd0aDtrKyspe3ZhciB4PU1baFtrXV07dys9KHg9PT11bmRlZmluZWQ/IiI6eCkrIiwifU0uX19tZXRhZGF0YS51cmk9dysiLW11bHRpcGxlLXVuaXRzLW5vdC1kZXJlZmVyZW5jYWJsZSI7ZGVsZXRlIE0uX19tZXRhZGF0YVsic2VsZiJdO2RlbGV0ZSBNLl9fbWV0YWRhdGFbInNlbGZfbGlua19leHRlbnNpb25zIl07TVsiXn52b2xhdGlsZSJdPXRydWU7dGhpcy5vTW9kZWwuX2ltcG9ydERhdGEoTSx7fSk7dGhpcy5vTW9kZWwuZ2V0Q29udGV4dCgnLycrTS5fX21ldGFkYXRhLnVyaSlbIl92b2xhdGlsZSJdPXRydWU7S1tjLTFdPXRoaXMub01vZGVsLl9nZXRLZXkoTSk7aWYoaT09ZC5yZXN1bHRzLmxlbmd0aC0xJiZwPT1EKWUrPWktZjtlbHNlIGUrPWktZi0xO2Y9LTE7aWYocCE9RClLW2MrK109dGhpcy5vTW9kZWwuX2dldEtleShFKX1lbHNlIGlmKHAhPUQpS1tjKytdPXRoaXMub01vZGVsLl9nZXRLZXkoRSk7cD1EfWVsc2UgS1tjKytdPXRoaXMub01vZGVsLl9nZXRLZXkoRSl9aWYoZC5fX2NvdW50KXt0aGlzLm1MZW5ndGhbZ109cGFyc2VJbnQoZC5fX2NvdW50LDEwKS1lO3RoaXMubUZpbmFsTGVuZ3RoW2ddPXRydWU7aWYoci5iSXNGbGF0TGlzdFJlcXVlc3QpdGhpcy5pVG90YWxTaXplPWQuX19jb3VudH1pZih0aGlzLm1MZW5ndGhbZ108YitkLnJlc3VsdHMubGVuZ3RoKXt0aGlzLm1MZW5ndGhbZ109YisoZC5yZXN1bHRzLmxlbmd0aC1lKTt0aGlzLm1GaW5hbExlbmd0aFtnXT1mYWxzZX1pZigoZC5yZXN1bHRzLmxlbmd0aC1lKTxsfHxsPT09dW5kZWZpbmVkKXt0aGlzLm1MZW5ndGhbZ109YisoZC5yZXN1bHRzLmxlbmd0aC1lKTt0aGlzLm1GaW5hbExlbmd0aFtnXT10cnVlfWlmKGQucmVzdWx0cy5sZW5ndGg9PTApe3RoaXMubUxlbmd0aFtnXT0wO3RoaXMubUZpbmFsTGVuZ3RoW2ddPXRydWV9dGhpcy5iTmVlZHNVcGRhdGU9dHJ1ZX07QS5wcm90b3R5cGUuX3Byb2Nlc3NUb3RhbFNpemVRdWVyeVJlc3BvbnNlPWZ1bmN0aW9uKHIsZCl7dmFyIGE9ci5vQW5hbHl0aWNhbFF1ZXJ5UmVxdWVzdDtpZihkLl9fY291bnQ9PXVuZGVmaW5lZCl7cS5zYXAubG9nLmZhdGFsKCJtaXNzaW5nIGVudGl0eSBjb3VudCBpbiBxdWVyeSByZXN1bHQiKTtyZXR1cm59dGhpcy5pVG90YWxTaXplPWQuX19jb3VudH07QS5wcm90b3R5cGUuX3Byb2Nlc3NMZXZlbE1lbWJlcnNRdWVyeVJlc3BvbnNlPWZ1bmN0aW9uKHIsZCl7dmFyIGE9ci5vQW5hbHl0aWNhbFF1ZXJ5UmVxdWVzdDtpZihkLnJlc3VsdHMubGVuZ3RoPT0wKXJldHVybjt2YXIgcD10aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQodGhpcy5vTW9kZWwuZ2V0Q29udGV4dCgiLyIrdGhpcy5vTW9kZWwuX2dldEtleShkLnJlc3VsdHNbMF0pKSxyLmlMZXZlbC0xKTt2YXIgUD1bXTtmb3IodmFyIGk9MDtpPGQucmVzdWx0cy5sZW5ndGg7aSsrKXt2YXIgZT1kLnJlc3VsdHNbaV07dmFyIGM9dGhpcy5vTW9kZWwuZ2V0Q29udGV4dCgiLyIrdGhpcy5vTW9kZWwuX2dldEtleShkLnJlc3VsdHNbaV0pKTt2YXIgcz10aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQoYyxyLmlMZXZlbC0xKTtpZihwPT1zKXtQLnB1c2goZSk7aWYoaTxkLnJlc3VsdHMubGVuZ3RoLTEpY29udGludWV9dmFyIGc9e2lSZXF1ZXN0VHlwZTpBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSxzUmVxdWVzdElkOnRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpwfSksb0FuYWx5dGljYWxRdWVyeVJlcXVlc3Q6ci5vQW5hbHl0aWNhbFF1ZXJ5UmVxdWVzdCxzR3JvdXBJZDpwLGFTZWxlY3RlZFVuaXRQcm9wZXJ0eU5hbWU6ci5hU2VsZWN0ZWRVbml0UHJvcGVydHlOYW1lLGFBZ2dyZWdhdGlvbkxldmVsOnIuYUFnZ3JlZ2F0aW9uTGV2ZWwsYklzRmxhdExpc3RSZXF1ZXN0OmZhbHNlLGlTdGFydEluZGV4OnIuaVN0YXJ0SW5kZXgsaUxlbmd0aDpyLmlMZW5ndGh9O3ZhciBiPXEuZXh0ZW5kKHRydWUse30sZCk7Yi5yZXN1bHRzPVA7dGhpcy5fcHJvY2Vzc0dyb3VwTWVtYmVyc1F1ZXJ5UmVzcG9uc2UoZyxiKTtpZihpPGQucmVzdWx0cy5sZW5ndGgtMSl7cD1zO1A9W2VdfX19O0EucHJvdG90eXBlLl9nZXRMb2FkZWRDb250ZXh0c0Zvckdyb3VwPWZ1bmN0aW9uKGcscyxsKXt2YXIgYz1bXSxhLGs9dGhpcy5tS2V5W2ddLEs7aWYoIWspcmV0dXJuIGM7aWYoIXMpcz0wO2lmKCFsKXtsPXRoaXMub01vZGVsLmlTaXplTGltaXQ7aWYodGhpcy5tRmluYWxMZW5ndGhbZ10mJnRoaXMubUxlbmd0aFtnXTxsKWw9dGhpcy5tTGVuZ3RoW2ddfWZvcih2YXIgaT1zO2k8cytsO2krKyl7Sz1rW2ldO2lmKCFLKXticmVha31hPXRoaXMub01vZGVsLmdldENvbnRleHQoJy8nK0spO2MucHVzaChhKX1yZXR1cm4gY307QS5wcm90b3R5cGUuX2NhbGN1bGF0ZVJlcXVpcmVkR3JvdXBTZWN0aW9uPWZ1bmN0aW9uKGcscyxsLHQsYyl7dmFyIEw9ZmFsc2UsYSxiLHAsUCxyLGQ9e30saz10aGlzLm1LZXlbZ10sSztiPXM7YT0wO2lmKCFrKXtQPXM7cD1zK2x9ZWxzZXtmb3IodmFyIGk9cy0xO2k+PU1hdGgubWF4KHMtdCwwKTtpLS0pe0s9a1tpXTtpZighSyl7UD1pKzE7YnJlYWt9fWZvcih2YXIgaj1zK2w7ajxzK2wrdDtqKyspe0s9a1tqXTtpZighSyl7cD1qO2JyZWFrfX19cj1zLVA7aWYoUCYmcz50JiZyPHQpe2lmKGMubGVuZ3RoIT1sKWI9cy10O2Vsc2UgYj1QLXQ7YT10fWlmKGI9PXMpYis9Yy5sZW5ndGg7aWYoYy5sZW5ndGghPWwpYSs9bC1jLmxlbmd0aDtyPXAtcy1sO2lmKHI9PTApYSs9dDtpZihwJiZyPHQmJnI+MCl7aWYoYj49cyl7Yj1wO2ErPXR9fWlmKHRoaXMubUZpbmFsTGVuZ3RoW2ddJiZ0aGlzLm1MZW5ndGhbZ108KGErYikpYT10aGlzLm1MZW5ndGhbZ10tYjtkLnN0YXJ0SW5kZXg9YjtkLmxlbmd0aD1hO3JldHVybiBkfTtBLnByb3RvdHlwZS5fY2FsY3VsYXRlUmVxdWlyZWRHcm91cEV4cGFuc2lvbj1mdW5jdGlvbihnLGwscyxMKXtpZihsPT10aGlzLmlBdXRvRXhwYW5kR3JvdXBzVG9MZXZlbCl7dmFyIGM9dGhpcy5fZ2V0TG9hZGVkQ29udGV4dHNGb3JHcm91cChnLHMsTCk7dmFyIGE9cytjLmxlbmd0aC0xO2lmKCF0aGlzLm1GaW5hbExlbmd0aFtnXSl7aWYoYy5sZW5ndGg8TClyZXR1cm57Z3JvdXBJZF9NaXNzaW5nOmcsc3RhcnRJbmRleF9NaXNzaW5nOmErMSxsZW5ndGhfTWlzc2luZzpMLWMubGVuZ3RofTtlbHNlIHJldHVybntncm91cElkX01pc3Npbmc6bnVsbCxsZW5ndGhfTWlzc2luZzowfX1lbHNle2lmKGMubGVuZ3RoPEwpcmV0dXJue2dyb3VwSWRfTWlzc2luZzpudWxsLGxlbmd0aF9NaXNzaW5nOkwtYy5sZW5ndGh9O2Vsc2UgcmV0dXJue2dyb3VwSWRfTWlzc2luZzpudWxsLGxlbmd0aF9NaXNzaW5nOjB9fX12YXIgYz10aGlzLl9nZXRMb2FkZWRDb250ZXh0c0Zvckdyb3VwKGcscyxMKTt2YXIgYj1MLGE9cytjLmxlbmd0aC0xO2Zvcih2YXIgaT0tMSxkO2Q9Y1srK2ldOyl7Yi0tO3ZhciBHPXRoaXMuX2NhbGN1bGF0ZVJlcXVpcmVkR3JvdXBFeHBhbnNpb24odGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KGQsbCksbCsxLDAsYik7aWYoRy5ncm91cElkX01pc3Npbmc9PW51bGwpe2lmKEcuc3RhcnRJbmRleF9NaXNzaW5nPT0wKXJldHVybiBHO2Vsc2UgYj1HLmxlbmd0aF9NaXNzaW5nfWVsc2V7cmV0dXJuIEd9aWYoYj09MClicmVha31pZih0aGlzLm1GaW5hbExlbmd0aFtnXXx8Yj09MClyZXR1cm57Z3JvdXBJZF9NaXNzaW5nOm51bGwsbGVuZ3RoX01pc3Npbmc6Yn07ZWxzZSByZXR1cm57Z3JvdXBJZF9NaXNzaW5nOmcsc3RhcnRJbmRleF9NaXNzaW5nOmErMSxsZW5ndGhfTWlzc2luZzpifX07QS5wcm90b3R5cGUuX2dldFJlc291cmNlUGF0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzUmVsYXRpdmUoKT90aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5nZXRDb250ZXh0KCkpOnRoaXMuc1BhdGh9O0EucHJvdG90eXBlLl9nZXRFbnRpdHlTZXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNFbnRpdHlTZXROYW1lO3ZhciBiPXRoaXMuZ2V0Q29udGV4dCgpO2lmKCFlKXtlPXRoaXMuc1BhdGguc3BsaXQoIi8iKVsxXTtpZihlLmluZGV4T2YoIigiKSE9LTEpe2U9ZS5zcGxpdCgiKCIpWzBdKyJSZXN1bHRzIn19cmV0dXJuIGV9O0EucHJvdG90eXBlLl9hcHBseVVJNVNvcnRlclRvU29ydEV4cHJlc3Npb249ZnVuY3Rpb24ocyxhKXtpZihzKXtmb3IodmFyIGkgaW4gcyl7dmFyIHA9dGhpcy5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5W3NbaV0uc1BhdGhdO2lmKHA9PT11bmRlZmluZWR8fHA9PW51bGwpcS5zYXAubG9nLmZhdGFsKCJhc3NlcnRpb24gZmFpbGVkOiBzb3J0aW5nIHByb3BlcnR5ICIrc1tpXS5zUGF0aCsiIG5vdCBmb3VuZCBpbiBhbmFseXRpY2FsIGluZm8iKTthLmFkZFNvcnRlcihzW2ldLnNQYXRoLHNbaV0uYkRlc2NlbmRpbmc/by5Tb3J0T3JkZXIuRGVzY2VuZGluZzpvLlNvcnRPcmRlci5Bc2NlbmRpbmcpfX19O0EucHJvdG90eXBlLl9nZXRHcm91cElkRnJvbUNvbnRleHQ9ZnVuY3Rpb24oYyxsKXtpZighYyl7cmV0dXJuIG51bGx9dmFyIGc9Ii8iO3ZhciBkPW51bGw7aWYobD50aGlzLmFBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aClxLnNhcC5sb2cuZmF0YWwoImFzc2VydGlvbiBmYWlsZWQ6IGFnZ3JlZ2F0aW9uIGxldmVsIGRlZXBlciB0aGFuIG51bWJlciBvZiBjdXJyZW50IGFnZ3JlZ2F0aW9uIGxldmVscyIpO2Zvcih2YXIgaT0wO2k8bDtpKyspe2Q9Yy5nZXRQcm9wZXJ0eSh0aGlzLmFBZ2dyZWdhdGlvbkxldmVsW2ldKTtpZihkIT1udWxsKXtnKz1lbmNvZGVVUklDb21wb25lbnQoZCkrIi8ifWVsc2V7Zys9IkAvIn19cmV0dXJuIGd9O0EucHJvdG90eXBlLl9nZXRHcm91cElkTGV2ZWw9ZnVuY3Rpb24oZyl7aWYoZz09bnVsbCl7cS5zYXAubG9nLmZhdGFsKCJhc3NlcnRpb24gZmFpbGVkOiBubyBuZWVkIHRvIGRldGVybWluZSBsZXZlbCBvZiBncm91cCBJRCA9IG51bGwiKTtyZXR1cm4tMX1yZXR1cm4gZy5zcGxpdCgiLyIpLmxlbmd0aC0yfTtBLnByb3RvdHlwZS5fZ2V0R3JvdXBJZENvbXBvbmVudHM9ZnVuY3Rpb24oZyl7aWYoZz09bnVsbClyZXR1cm4gbnVsbDt2YXIgRz1nLnNwbGl0KCIvIik7dmFyIGQ9bmV3IEFycmF5KCk7Zm9yKHZhciBpPTE7aTxHLmxlbmd0aC0xO2krKyl7aWYoR1tpXT09IkAiKWRbaS0xXT1udWxsO2Vsc2UgZFtpLTFdPWRlY29kZVVSSUNvbXBvbmVudChHW2ldKX1yZXR1cm4gZH07QS5wcm90b3R5cGUuX2dldEdyb3VwSWRBbmNlc3RvcnM9ZnVuY3Rpb24oZyxuKXtpZighbilyZXR1cm5bXTtpZihnPT1udWxsKXtxLnNhcC5sb2cuZmF0YWwoImdyb3VwIElEIG51bGwgZG9lcyBub3QgaGF2ZSBhbmNlc3RvcnMiKTtyZXR1cm5bXX1pZihnPT0iLyIpaWYoTWF0aC5hYnMobik9PTEpcmV0dXJuW251bGxdO2Vsc2V7cS5zYXAubG9nLmZhdGFsKCJpbnZhbGlkIGxldmVsIGNvdW50ICIrbisiIGZvciBhbmNlc3RvcnMgb2YgZ3JvdXBJZCAiK2cpO3JldHVybltdfXZhciBHPWcuc3BsaXQoIi8iKTt2YXIgYT1uZXcgQXJyYXkoKSxzPSIiO3ZhciBmPTAsdD1HLmxlbmd0aC0zO2lmKG4+MClpZihuLTE+dClxLnNhcC5sb2cuZmF0YWwoImludmFsaWQgbGV2ZWwgY291bnQgIituKyIgZm9yIGFuY2VzdG9ycyBvZiBncm91cElkICIrZyk7ZWxzZSB0PW4tMTtlbHNlIGlmKC0obisxKT50KXEuc2FwLmxvZy5mYXRhbCgiaW52YWxpZCBsZXZlbCBjb3VudCAiK24rIiBmb3IgYW5jZXN0b3JzIG9mIGdyb3VwSWQgIitnKTtlbHNle2Y9dCsxK247Zm9yKHZhciBpPTA7aTxmO2krKyl7cys9R1tpXSsiLyJ9fWZvcih2YXIgaT1mO2k8PXQ7aSsrKXtzKz1HW2ldKyIvIjthLnB1c2gocyl9cmV0dXJuIGF9O0EucHJvdG90eXBlLl9nZXRQYXJlbnRHcm91cElkPWZ1bmN0aW9uKGcpe3JldHVybiB0aGlzLl9nZXRHcm91cElkQW5jZXN0b3JzKGcsLTEpWzBdfTtBLnByb3RvdHlwZS5fcmVtb3ZlRHVwbGljYXRlc0Zyb21TdHJpbmdBcnJheT1mdW5jdGlvbihhKXt2YXIgdD17fTtmb3IodmFyIGk9MDtpPGEubGVuZ3RoO2krKyl0W2FbaV1dPXRydWU7dmFyIHU9W107Zm9yKHZhciBzIGluIHQpdS5wdXNoKHMpO3JldHVybiB1fTtBLnByb3RvdHlwZS5fZ2V0SWRGb3JOZXdSZXF1ZXN0SGFuZGxlPWZ1bmN0aW9uKCl7aWYodGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGU9PT11bmRlZmluZWQpdGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGU9W107Zm9yKHZhciBpPTA7aTx0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZS5sZW5ndGg7aSsrKXtpZih0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZVtpXT09PXVuZGVmaW5lZClyZXR1cm4gaX10aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZVt0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZS5sZW5ndGhdPXVuZGVmaW5lZDtyZXR1cm4gdGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGUubGVuZ3RoLTF9O0EucHJvdG90eXBlLl9yZWdpc3Rlck5ld1JlcXVlc3RIYW5kbGU9ZnVuY3Rpb24ocixSKXtpZih0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZVtyXSE9PXVuZGVmaW5lZClxLnNhcC5sb2cuZmF0YWwoInJlcXVlc3QgaGFuZGxlIElEIGFscmVhZHkgaW4gdXNlIik7dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGVbcl09Un07QS5wcm90b3R5cGUuX2RlcmVnaXN0ZXJIYW5kbGVPZkNvbXBsZXRlZFJlcXVlc3Q9ZnVuY3Rpb24ocil7aWYodGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGVbcl09PT11bmRlZmluZWQpcS5zYXAubG9nLmZhdGFsKCJubyBoYW5kbGUgZm91bmQgZm9yIHRoaXMgcmVxdWVzdCBJRCIpO3RoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlW3JdPXVuZGVmaW5lZH07QS5wcm90b3R5cGUuX2Fib3J0QWxsUGVuZGluZ1JlcXVlc3RzQnlIYW5kbGU9ZnVuY3Rpb24oKXtmb3IodmFyIGk9MDtpPHRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlLmxlbmd0aDtpKyspe3RoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlW2ldIT09dW5kZWZpbmVkJiZ0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZVtpXS5hYm9ydCgpfXRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlPVtdfTtBLnByb3RvdHlwZS5fZ2V0UmVxdWVzdElkPWZ1bmN0aW9uKHIscCl7c3dpdGNoKHIpe2Nhc2UgQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnk6aWYocC5ncm91cElkPT09dW5kZWZpbmVkKXEuc2FwLmxvZy5mYXRhbCgibWlzc2luZyBncm91cCBJRCIpO3ZhciBnPXAuZ3JvdXBJZDtyZXR1cm4gQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnkrKGc9PW51bGw/IiI6Zyk7Y2FzZSBBLl9yZXF1ZXN0VHlwZS5sZXZlbE1lbWJlcnNRdWVyeTppZihwLmxldmVsPT09dW5kZWZpbmVkKXEuc2FwLmxvZy5mYXRhbCgibWlzc2luZyBsZXZlbCIpO3ZhciBsPXAubGV2ZWw7cmV0dXJuIiIrQS5fcmVxdWVzdFR5cGUubGV2ZWxNZW1iZXJzUXVlcnkrbDtjYXNlIEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5OnJldHVybiBBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeTtkZWZhdWx0OnEuc2FwLmxvZy5mYXRhbCgiaW52YWxpZCByZXF1ZXN0IHR5cGUgIityKTtyZXR1cm4tMX19O0EucHJvdG90eXBlLl9yZWdpc3Rlck5ld1JlcXVlc3Q9ZnVuY3Rpb24ocil7aWYocj09dW5kZWZpbmVkfHxyPT0iIil7cS5zYXAubG9nLmZhdGFsKCJtaXNzaW5nIHJlcXVlc3QgSUQiKTtyZXR1cm59aWYoIXRoaXMub1BlbmRpbmdSZXF1ZXN0c1tyXSl0aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl09MTtlbHNlKyt0aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl19O0EucHJvdG90eXBlLl9jb25zaWRlclJlcXVlc3RHcm91cGluZz1mdW5jdGlvbihyKXtmb3IodmFyIGk9LTEsUjtSPXJbKytpXTspe2lmKHRoaXMub0dyb3VwZWRSZXF1ZXN0c1tSXT09PXVuZGVmaW5lZCl0aGlzLm9Hcm91cGVkUmVxdWVzdHNbUl09e307dmFyIGc9dGhpcy5vR3JvdXBlZFJlcXVlc3RzW1JdO2Zvcih2YXIgaj0wO2o8ci5sZW5ndGg7aisrKWdbcltqXV09dHJ1ZX19O0EucHJvdG90eXBlLl9pc1JlcXVlc3RQZW5kaW5nPWZ1bmN0aW9uKHIpe3JldHVybiB0aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl0hPXVuZGVmaW5lZCYmdGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdPjB9O0EucHJvdG90eXBlLl9kZXJlZ2lzdGVyQ29tcGxldGVkUmVxdWVzdD1mdW5jdGlvbihyKXtpZighdGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdKXEuc2FwLmxvZy5mYXRhbCgiYXNzZXJ0aW9uIGZhaWxlZDogdGhlcmUgaXMgbm8gcGVuZGluZyByZXF1ZXN0IElEICIrcik7aWYodGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdPT0xKWRlbGV0ZSB0aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl07ZWxzZS0tdGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdfTtBLnByb3RvdHlwZS5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdD1mdW5jdGlvbihyKXtpZih0aGlzLl9pc1JlcXVlc3RQZW5kaW5nKHIpKXJldHVybiBmYWxzZTt2YXIgZz10cnVlO2lmKHRoaXMub0dyb3VwZWRSZXF1ZXN0c1tyXSE9dW5kZWZpbmVkKXtmb3IodmFyIE8gaW4gdGhpcy5vR3JvdXBlZFJlcXVlc3RzW3JdKXtpZih0aGlzLm9QZW5kaW5nUmVxdWVzdHNbT10pe2c9ZmFsc2U7YnJlYWt9fX1pZihnKXt2YXIgUj10aGlzLm9Hcm91cGVkUmVxdWVzdHNbcl07ZGVsZXRlIHRoaXMub0dyb3VwZWRSZXF1ZXN0c1tyXTtmb3IodmFyIE8gaW4gUil7aWYoTyE9cil0aGlzLl9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KE8pfX1yZXR1cm4gZ307QS5wcm90b3R5cGUuX2NsZWFyQWxsUGVuZGluZ1JlcXVlc3RzPWZ1bmN0aW9uKCl7dGhpcy5vUGVuZGluZ1JlcXVlc3RzPXt9O3RoaXMub0dyb3VwZWRSZXF1ZXN0cz17fX07QS5wcm90b3R5cGUucmVzZXREYXRhPWZ1bmN0aW9uKGMpe2lmKGMpe3ZhciBwPWMuZ2V0UGF0aCgpO2RlbGV0ZSB0aGlzLm1LZXlbcF07ZGVsZXRlIHRoaXMubUxlbmd0aFtwXTtkZWxldGUgdGhpcy5tRmluYWxMZW5ndGhbcF19ZWxzZXt0aGlzLm1LZXk9e307dGhpcy5tTGVuZ3RoPXt9O3RoaXMubUZpbmFsTGVuZ3RoPXt9fX07QS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihmLGMsZSl7dmFyIGI9ZmFsc2U7aWYoIWYpe2lmKGUpe3ZhciByPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTt2YXIgRT10aGlzLm9Nb2RlbC5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgocik7aWYoRSYmKEUuZW50aXR5VHlwZSBpbiBlKSliPXRydWV9aWYoYyYmIWIpe3EuZWFjaCh0aGlzLm1LZXksZnVuY3Rpb24oaSxuKXtxLmVhY2gobixmdW5jdGlvbihpLGspe2lmKGsgaW4gYyl7Yj10cnVlO3JldHVybiBmYWxzZX19KTtpZihiKXJldHVybiBmYWxzZX0pfWlmKCFjJiYhZSl7Yj10cnVlfX1pZihmfHxiKXt0aGlzLl9hYm9ydEFsbFBlbmRpbmdSZXF1ZXN0cygpO3RoaXMucmVzZXREYXRhKCk7dGhpcy5iTmVlZHNVcGRhdGU9ZmFsc2U7dGhpcy5fZmlyZVJlZnJlc2goe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLlJlZnJlc2h9KX19O0EucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYsYyl7dmFyIGI9ZmFsc2U7aWYoIWYpe2lmKHRoaXMuYk5lZWRzVXBkYXRlfHwhYyl7Yj10cnVlfWVsc2V7cS5lYWNoKHRoaXMubUtleSxmdW5jdGlvbihpLG4pe3EuZWFjaChuLGZ1bmN0aW9uKGksayl7aWYoayBpbiBjKXtiPXRydWU7cmV0dXJuIGZhbHNlfX0pO2lmKGIpcmV0dXJuIGZhbHNlfSl9fWlmKGZ8fGIpe3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlO3RoaXMuX2ZpcmVDaGFuZ2UoKX19O3JldHVybiBBfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmFuYWx5dGljcy5UcmVlQmluZGluZ0FkYXB0ZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuYW5hbHl0aWNzLlRyZWVCaW5kaW5nQWRhcHRlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9hbmFseXRpY3MvVHJlZUJpbmRpbmdBZGFwdGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL1RyZWVCaW5kaW5nJywnLi9BbmFseXRpY2FsQmluZGluZyddLGZ1bmN0aW9uKHEsVCxBKXsidXNlIHN0cmljdCI7dmFyIGE9ZnVuY3Rpb24oKXtpZighKHRoaXMgaW5zdGFuY2VvZiBUJiZ0aGlzLmdldENvbnRleHRzPT09dW5kZWZpbmVkKSl7cmV0dXJufWZvcih2YXIgZiBpbiBhLnByb3RvdHlwZSl7aWYoYS5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoZikpe3RoaXNbZl09YS5wcm90b3R5cGVbZl19fXRoaXMuX2FDb250ZXh0cz1bXTt0aGlzLl9hQ29udGV4dEluZm9zPVtdO3RoaXMuX2FFeHBhbmRpbmc9W107dGhpcy5fYkluaXRpYWw9dHJ1ZTt0aGlzLl9vRXhwYW5kZWQ9e307dGhpcy5fb09wZW5Hcm91cHM9e307dGhpcy5fYlRyaWdnZXJlZE9wZW5Hcm91cHNMb2FkPWZhbHNlfTthLnByb3RvdHlwZS5fdXBkYXRlQ29udGV4dHM9ZnVuY3Rpb24ocCxjLEMscil7dmFyIEk9cDtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKyl7dmFyIG89Y1tpXTt2YXIgYj1DW2ldO3RoaXMuX2FDb250ZXh0cy5zcGxpY2UocCxyPzE6MCxvKTt0aGlzLl9hQ29udGV4dEluZm9zLnNwbGljZShwLHI/MTowLGIpO3ArK31pZighcil7dGhpcy5fZmlyZUNvbnRleHRDaGFuZ2Uoe3R5cGU6Imluc2VydCIsaW5kZXg6SSxsZW5ndGg6Yy5sZW5ndGh9KX1yZXR1cm4gQ307YS5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FDb250ZXh0cy5sZW5ndGh9O2EucHJvdG90eXBlLmdldENvbnRleHRJbmZvPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLl9hQ29udGV4dEluZm9zLnNsaWNlKGksaSsxKVswXX07YS5wcm90b3R5cGUuX2NyZWF0ZUNvbnRleHRJbmZvcz1mdW5jdGlvbihjLHAsUCxsLHMsSSl7aWYoIUkpe0k9MH12YXIgQz1bXTtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKyl7dmFyIG89Y1tpXTtDLnB1c2goe2NvbnRleHQ6byxsZXZlbDpsLGV4cGFuZGVkOmZhbHNlLGNoaWxkQ291bnQ6MCxwYXJlbnQ6cCxzdW06cyxwb3NpdGlvbjpQLGluZGV4OmkrSX0pO1ArK31yZXR1cm4gQ307YS5wcm90b3R5cGUuZ2V0Q29udGV4dHM9ZnVuY3Rpb24ocyxsLHQpe3ZhciBiPXRoaXM7aWYoIWwpe2w9dGhpcy5vTW9kZWwuaVNpemVMaW1pdH1pZih0aGlzLl9iSW5pdGlhbCl7dmFyIHI9dGhpcy5nZXRSb290Q29udGV4dHMoe3N0YXJ0SW5kZXg6cyxsZW5ndGg6bCx0aHJlc2hvbGQ6dCxudW1iZXJPZkV4cGFuZGVkTGV2ZWxzOnRoaXMubVBhcmFtZXRlcnMubnVtYmVyT2ZFeHBhbmRlZExldmVsc30pO2lmKHImJnIubGVuZ3RoPjApe3RoaXMuX2JJbml0aWFsPWZhbHNlO3ZhciBuPXRoaXMuX2NyZWF0ZUNvbnRleHRJbmZvcyhyLG51bGwsMCwwLHRydWUpO2lmKHRoaXMuYlByb3ZpZGVHcmFuZFRvdGFscyl7dGhpcy5fdXBkYXRlQ29udGV4dHMoMCxyLG4pfXRoaXMuX2FFeHBhbmRpbmc9bn19aWYodGhpcy5fb09wZW5Hcm91cHMhPXt9JiZ0aGlzLl9iVHJpZ2dlcmVkT3Blbkdyb3Vwc0xvYWQ9PWZhbHNlKXt0aGlzLmxvYWRHcm91cHModGhpcy5fb09wZW5Hcm91cHMpO3RoaXMuX2JUcmlnZ2VyZWRPcGVuR3JvdXBzTG9hZD10cnVlfWVsc2V7dGhpcy5fcHJvY2Vzc0V4cGFuZChsLHQpfXZhciBjPXRoaXMuX2FDb250ZXh0cy5zbGljZShzLHMrbCk7dmFyIG09e307cS5lYWNoKGMsZnVuY3Rpb24oaSxDKXtpZighQyl7dmFyIG89Yi5fYUNvbnRleHRJbmZvc1tzK2ldO3ZhciBwPW8ucGFyZW50O3ZhciBTPW1bcC5nZXRQYXRoKCldO2lmKFMpe1Muc3RhcnRJbmRleD1NYXRoLm1pbihTLnN0YXJ0SW5kZXgsby5pbmRleCk7Uy5wb3NpdGlvbj1NYXRoLm1pbihTLnBvc2l0aW9uLG8ucG9zaXRpb24pO1MuZW5kSW5kZXg9TWF0aC5tYXgoUy5lbmRJbmRleCxvLmluZGV4KX1lbHNle21bcC5nZXRQYXRoKCldPXtzdGFydEluZGV4Om8uaW5kZXgsZW5kSW5kZXg6by5pbmRleCxwYXJlbnQ6by5wYXJlbnQsbGV2ZWw6by5sZXZlbC0xLHBvc2l0aW9uOm8ucG9zaXRpb259fX19KTt2YXIgYj10aGlzLHU9ZmFsc2U7cS5lYWNoKG0sZnVuY3Rpb24oaSxTKXt2YXIgTT1iLmdldE5vZGVDb250ZXh0cyhTLnBhcmVudCx7c3RhcnRJbmRleDpTLnN0YXJ0SW5kZXgsbGVuZ3RoOlMuZW5kSW5kZXgtUy5zdGFydEluZGV4KzEsdGhyZXNob2xkOnQsbGV2ZWw6Uy5sZXZlbCxudW1iZXJPZkV4cGFuZGVkTGV2ZWxzOk1hdGgubWF4KGIubVBhcmFtZXRlcnMubnVtYmVyT2ZFeHBhbmRlZExldmVscy1TLmxldmVsLDApfSk7aWYoTS5sZW5ndGg+MCl7Yi5fdXBkYXRlQ29udGV4dHMoUy5wb3NpdGlvbixNLGIuX2NyZWF0ZUNvbnRleHRJbmZvcyhNLFMucGFyZW50LFMucG9zaXRpb24sUy5sZXZlbCsxLGZhbHNlKSx0cnVlKTtiLl91cGRhdGVFeHBhbmRlZEluZm8oUy5wYXJlbnQsUy5sZXZlbCxTLnN0YXJ0SW5kZXgsUy5lbmRJbmRleC1TLnN0YXJ0SW5kZXgrMSx0KTt1PXRydWV9fSk7aWYodSl7Yz10aGlzLl9hQ29udGV4dHMuc2xpY2UocyxzK2wpfXJldHVybiBjfTthLnByb3RvdHlwZS5fcHJvY2Vzc0V4cGFuZD1mdW5jdGlvbihsLHQpe3ZhciBiPXRoaXMscz10aGlzLl9hRXhwYW5kaW5nLmxlbmd0aCxjPWZhbHNlLGg9dGhpcy5oYXNNZWFzdXJlcygpO2Zvcih2YXIgaT10aGlzLl9hRXhwYW5kaW5nLmxlbmd0aC0xO2k+PTA7aS0tKXt2YXIgQz10aGlzLl9hRXhwYW5kaW5nW2ldO3ZhciBvPUMuY29udGV4dDt2YXIgbj0hdGhpcy5iUHJvdmlkZUdyYW5kVG90YWxzJiZvLmdldFBhdGgoKT09PSIvYXJ0aWZpY2lhbFJvb3RDb250ZW50IjtpZihxLmluQXJyYXkobyx0aGlzLl9hQ29udGV4dHMpPT0tMSYmIW4pe2NvbnRpbnVlfXZhciBkPXRoaXMuZ2V0Tm9kZUNvbnRleHRzKG8se3N0YXJ0SW5kZXg6MCxsZW5ndGg6bCx0aHJlc2hvbGQ6dCxsZXZlbDpDLmxldmVsfSk7aWYoZCYmZC5sZW5ndGg+MCl7dmFyIHI9dGhpcy5nZXRHcm91cFNpemUobyxDLmxldmVsKSxJPUMucGFyZW50P0MucG9zaXRpb24rMTowLHA9SSxMPUMubGV2ZWwrMSxlPXRoaXMuX2NyZWF0ZUNvbnRleHRJbmZvcyhkLG8scCxMLGZhbHNlKTt2YXIgYz1mYWxzZTtmb3IodmFyIGo9MDtqPGQubGVuZ3RoO2orKyl7aWYoTDx0aGlzLmFBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aCYmdGhpcy5fb09wZW5Hcm91cHNbdGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KGRbal0sTCldKXt0aGlzLl9hRXhwYW5kaW5nLnB1c2goZVtqXSk7ZGVsZXRlIHRoaXMuX29PcGVuR3JvdXBzW3RoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dChkW2pdLEwpXTtjPXRydWV9fXArPWUubGVuZ3RoO3ZhciBmPWUubGVuZ3RoO2lmKHI+LTEpe2Zvcih2YXIgaj1kLmxlbmd0aDtqPHI7aisrKXtkLnB1c2godW5kZWZpbmVkKTtlLnB1c2godGhpcy5fY3JlYXRlQ29udGV4dEluZm9zKFt1bmRlZmluZWRdLG8scCxMLGZhbHNlLGYpWzBdKTtwKys7ZisrfX1pZihvJiZDLnBhcmVudCE9bnVsbCYmcj4xJiYhdGhpcy5tUGFyYW1ldGVycy5zdW1PblRvcCYmaCl7ZC5wdXNoKG8pO2UucHVzaCh0aGlzLl9jcmVhdGVDb250ZXh0SW5mb3MoW29dLG8scCxMLTEsdHJ1ZSxmKVswXSl9dmFyIGc9ZC5sZW5ndGg7dGhpcy5fdXBkYXRlQ29udGV4dHMoSSxkLGUpO3ZhciBrPUkrZzt2YXIgUDtMLS07dmFyIG09STt3aGlsZShQPXRoaXMuX2FDb250ZXh0SW5mb3NbbV0pe2lmKFAubGV2ZWw9PUwpe1AuY2hpbGRDb3VudD1QLmNoaWxkQ291bnQrZztMLS19bS0tO2lmKEw8MClicmVha312YXIgdT10aGlzLl9hQ29udGV4dEluZm9zW2tdO2lmKHUpe3ZhciB2PXRoaXMuX2FDb250ZXh0SW5mb3Nbay0xXS5wb3NpdGlvbi11LnBvc2l0aW9uKzE7Zm9yKHZhciBqPWs7ajx0aGlzLl9hQ29udGV4dEluZm9zLmxlbmd0aDtqKyspe3RoaXMuX2FDb250ZXh0SW5mb3Nbal0ucG9zaXRpb24rPXZ9fWlmKEMpe0MuZXhwYW5kZWQ9dHJ1ZX10aGlzLl91cGRhdGVFeHBhbmRlZEluZm8oQy5jb250ZXh0LEMubGV2ZWwsMCxsLHQpO3RoaXMuX2FFeHBhbmRpbmcuc3BsaWNlKGksMSl9fWlmKChzIT10aGlzLl9hRXhwYW5kaW5nLmxlbmd0aCYmdGhpcy5fYUV4cGFuZGluZy5sZW5ndGg+MCl8fGMpe3RoaXMuX3Byb2Nlc3NFeHBhbmQobCx0KX19O2EucHJvdG90eXBlLl91cGRhdGVFeHBhbmRlZEluZm89ZnVuY3Rpb24oYyxsLHMsTCx0KXt2YXIgYj10aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQoYyxsKTt2YXIgcD1iLnN1YnN0cigwLGIubGVuZ3RoLTEpLnNwbGl0KCIvIik7dmFyIGU9dGhpcy5fb0V4cGFuZGVkO2Zvcih2YXIgaj0wO2o8cC5sZW5ndGg7aisrKXt2YXIgUD1wW2pdO2lmKGo9PTApe1A9InJvb3QifWVbUF09ZVtQXXx8e307ZT1lW1BdO2lmKGo9PXAubGVuZ3RoLTEpe2VbInNlY3Rpb25zIl09ZVsic2VjdGlvbnMiXXx8W107aWYoZVsic2VjdGlvbnMiXS5sZW5ndGg9PTApe2VbInNlY3Rpb25zIl0ucHVzaCh7c3RhcnRJbmRleDpzLGxlbmd0aDpMLHRocmVzaG9sZDp0fSl9dmFyIEU9ZmFsc2U7Zm9yKHZhciBrPTA7azxlWyJzZWN0aW9ucyJdLmxlbmd0aDtrKyspe3ZhciBTPWVbInNlY3Rpb25zIl1ba107dmFyIGk9Uy5zdGFydEluZGV4K1MubGVuZ3RoK1MudGhyZXNob2xkO3ZhciBkPXMrTCt0O2lmKFMuc3RhcnRJbmRleDw9cyYmaT49ZCl7cmV0dXJufWVsc2UgaWYoUy5zdGFydEluZGV4PD1zJiZpPj1zKXtTLnRocmVzaG9sZD1NYXRoLm1heChTLnRocmVzaG9sZCx0KTtTLmxlbmd0aD1kLVMuc3RhcnRJbmRleC1TLnRocmVzaG9sZDtFPXRydWV9ZWxzZSBpZihTLnN0YXJ0SW5kZXg+cyYmaT5kKXtTLmxlbmd0aD1TLmxlbmd0aCsoUy5zdGFydEluZGV4LXMpO1Muc3RhcnRJbmRleD1zO1MudGhyZXNob2xkPU1hdGgubWF4KFMudGhyZXNob2xkLHQpO0U9dHJ1ZX1lbHNlIGlmKFMuc3RhcnRJbmRleD5zJiZTLmVuZEluZGV4PGQpe1Muc3RhcnRJbmRleD1zO1MubGVuZ3RoPUw7Uy50aHJlc2hvbGQ9dDtFPXRydWV9fWlmKCFFKXtlWyJzZWN0aW9ucyJdLnB1c2goe3N0YXJ0SW5kZXg6cyxsZW5ndGg6TCx0aHJlc2hvbGQ6dH0pfX1lbHNle2VbImNoaWxkcmVuIl09ZVsiY2hpbGRyZW4iXXx8e307ZVsiY2hpbGRQcm9wZXJ0eSJdPXRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbal07ZT1lWyJjaGlsZHJlbiJdfX19O2EucHJvdG90eXBlLmV4cGFuZD1mdW5jdGlvbihpKXt2YXIgYz10aGlzLl9hQ29udGV4dEluZm9zW2ldO2lmKGMuZXhwYW5kZWQpe3JldHVybn10aGlzLl9hRXhwYW5kaW5nLnB1c2goYyl9O2EucHJvdG90eXBlLmNvbGxhcHNlPWZ1bmN0aW9uKEkpe3ZhciBjPXRoaXMuX2FDb250ZXh0SW5mb3NbSV07dmFyIEM9dGhpcy5fYUNvbnRleHRzW0ldO2lmKCFjLmV4cGFuZGVkKXtyZXR1cm59dmFyIHA9Yy5wb3NpdGlvbisxLGw9Yy5jaGlsZENvdW50LEw9Yy5sZXZlbDt2YXIgZT10aGlzLl9vRXhwYW5kZWRbInJvb3QiXTt2YXIgcz10aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQoQyxMKTt2YXIgUD1zLnN1YnN0cigwLHMubGVuZ3RoLTEpLnNwbGl0KCIvIik7Zm9yKHZhciBpPTE7aTxMO2krKyl7ZT1lWyJjaGlsZHJlbiJdW1BbaV1dfWRlbGV0ZSBlWyJjaGlsZHJlbiJdW1BbUC5sZW5ndGgtMV1dO3ZhciByPXA7dGhpcy5fYUNvbnRleHRzLnNwbGljZShwLGwpO3RoaXMuX2FDb250ZXh0SW5mb3Muc3BsaWNlKHAsbCk7cC0tO3ZhciBvO3doaWxlKG89dGhpcy5fYUNvbnRleHRJbmZvc1twXSl7aWYoby5sZXZlbD09TCl7by5jaGlsZENvdW50PW8uY2hpbGRDb3VudC1sO0wtLX1wLS07aWYoTDwwKWJyZWFrfWlmKHI8dGhpcy5fYUNvbnRleHRJbmZvcy5sZW5ndGgpe3ZhciBkPXRoaXMuX2FDb250ZXh0SW5mb3Nbci0xXS5wb3NpdGlvbi10aGlzLl9hQ29udGV4dEluZm9zW3JdLnBvc2l0aW9uKzE7Zm9yKHZhciBqPXI7ajx0aGlzLl9hQ29udGV4dEluZm9zLmxlbmd0aDtqKyspe3RoaXMuX2FDb250ZXh0SW5mb3Nbal0ucG9zaXRpb24rPWR9dGhpcy5fZmlyZUNvbnRleHRDaGFuZ2Uoe3R5cGU6InJlbW92ZSIsaW5kZXg6cixsZW5ndGg6TWF0aC5hYnMoZCl9KX1jLmV4cGFuZGVkPWZhbHNlfTthLnByb3RvdHlwZS5jb2xsYXBzZUFsbD1mdW5jdGlvbihsKXtpZighbHx8bDwxKXtsPTF9Zm9yKHZhciBpPTAsaj10aGlzLl9hQ29udGV4dEluZm9zLmxlbmd0aDtpPGo7aSsrKXtpZih0aGlzLl9hQ29udGV4dEluZm9zW2ldLmxldmVsPT1sKXt0aGlzLmNvbGxhcHNlKGkpO2o9dGhpcy5fYUNvbnRleHRJbmZvcy5sZW5ndGh9fX07YS5wcm90b3R5cGUudG9nZ2xlSW5kZXg9ZnVuY3Rpb24oaSl7aWYoIXRoaXMuX2FDb250ZXh0SW5mb3NbaV0uZXhwYW5kZWQpe3RoaXMuZXhwYW5kKGkpfWVsc2V7dGhpcy5jb2xsYXBzZShpKX19O2EucHJvdG90eXBlLmluZGV4SGFzQ2hpbGRyZW49ZnVuY3Rpb24oaSl7dmFyIGM9dGhpcy5fYUNvbnRleHRJbmZvc1tpXTtpZighYy5wYXJlbnR8fGMuc3VtKXtyZXR1cm4gZmFsc2V9ZWxzZXtyZXR1cm4gQS5wcm90b3R5cGUuaGFzQ2hpbGRyZW4uY2FsbCh0aGlzLGMuY29udGV4dCx7bGV2ZWw6Yy5sZXZlbH0pfX07YS5wcm90b3R5cGUucmVzZXREYXRhPWZ1bmN0aW9uKGMpe3ZhciByPUEucHJvdG90eXBlLnJlc2V0RGF0YS5jYWxsKHRoaXMsYyk7dGhpcy5fYUNvbnRleHRzPVtdO3RoaXMuX2FDb250ZXh0SW5mb3M9W107dGhpcy5fYUV4cGFuZGluZz1bXTt0aGlzLl9vT3Blbkdyb3Vwcz17fTt0aGlzLl9yZW1vdmVHcm91cHModGhpcy5fb0V4cGFuZGVkWyJyb290Il0sMCwnJyk7dGhpcy5fb0V4cGFuZGVkPXt9O3RoaXMuX2JJbml0aWFsPXRydWU7dGhpcy5fYlRyaWdnZXJlZE9wZW5Hcm91cHNMb2FkPWZhbHNlO3JldHVybiByfTthLnByb3RvdHlwZS51cGRhdGVBbmFseXRpY2FsSW5mbz1mdW5jdGlvbihjKXt2YXIgcj1BLnByb3RvdHlwZS51cGRhdGVBbmFseXRpY2FsSW5mby5jYWxsKHRoaXMsYyk7dGhpcy5fYUNvbnRleHRzPVtdO3RoaXMuX2FDb250ZXh0SW5mb3M9W107dGhpcy5fYUV4cGFuZGluZz1bXTt0aGlzLl9vT3Blbkdyb3Vwcz17fTt0aGlzLl9yZW1vdmVHcm91cHModGhpcy5fb0V4cGFuZGVkWyJyb290Il0sMCwnJyk7dGhpcy5fb0V4cGFuZGVkPXt9O3RoaXMuX2JJbml0aWFsPXRydWU7dGhpcy5fYlRyaWdnZXJlZE9wZW5Hcm91cHNMb2FkPWZhbHNlO3JldHVybiByfTthLnByb3RvdHlwZS5fcmVtb3ZlR3JvdXBzPWZ1bmN0aW9uKGcsbCxwKXtpZighZyl7cmV0dXJufXRoaXMuX29PcGVuR3JvdXBzW3ArJy8nXT1nLnNlY3Rpb25zO2lmKCFnLmNoaWxkUHJvcGVydHkpe3JldHVybn1pZihnLmNoaWxkUHJvcGVydHkhPXRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbbF0pe2RlbGV0ZSBnLmNoaWxkcmVuO2RlbGV0ZSBnLmNoaWxkUHJvcGVydHl9ZWxzZXtmb3IodmFyIGMgaW4gZy5jaGlsZHJlbil7dGhpcy5fcmVtb3ZlR3JvdXBzKGcuY2hpbGRyZW5bY10sbCsxLHArJy8nK2MpfX19O2EucHJvdG90eXBlLmF0dGFjaENvbnRleHRDaGFuZ2U9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJjb250ZXh0Q2hhbmdlIixmLGwpfTthLnByb3RvdHlwZS5kZXRhY2hDb250ZXh0Q2hhbmdlPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiY29udGV4dENoYW5nZSIsZixsKX07YS5wcm90b3R5cGUuX2ZpcmVDb250ZXh0Q2hhbmdlPWZ1bmN0aW9uKG0pe3RoaXMuZmlyZUV2ZW50KCJjb250ZXh0Q2hhbmdlIixtKX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuRmlsdGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLkZpbHRlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9GaWx0ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvRmlsdGVyJywnc2FwL3VpL21vZGVsL0ZpbHRlck9wZXJhdG9yJ10sZnVuY3Rpb24ocSxGLGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgTz1zYXAudWkuYmFzZS5PYmplY3QuZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuRmlsdGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocCx2LEEpe2lmKHR5cGVvZiBwPT09Im9iamVjdCIpe3ZhciBmPXA7cD1mLnBhdGg7dj1mLnZhbHVlcztBPWYuYW5kfXRoaXMuc1BhdGg9cDt0aGlzLmFWYWx1ZXM9djt0aGlzLmJBTkQ9QT09dW5kZWZpbmVkP3RydWU6QX0sY29udmVydDpmdW5jdGlvbigpe3ZhciBmPVtdO2Zvcih2YXIgaT0wLGw9dGhpcy5hVmFsdWVzJiZ0aGlzLmFWYWx1ZXMubGVuZ3RofHwwO2k8bDtpKyspe2YucHVzaChuZXcgRih7cGF0aDp0aGlzLnNQYXRoLG9wZXJhdG9yOnRoaXMuYVZhbHVlc1tpXS5vcGVyYXRvcix2YWx1ZTE6dGhpcy5hVmFsdWVzW2ldLnZhbHVlMSx2YWx1ZTI6dGhpcy5hVmFsdWVzW2ldLnZhbHVlMn0pKX1pZihmLmxlbmd0aD4xKXt2YXIgbz1uZXcgRih7ZmlsdGVyczpmLGFuZDp0aGlzLmJBTkR9KTtyZXR1cm4gb31lbHNle3JldHVybiBmWzBdfX19KTtyZXR1cm4gT30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUFubm90YXRpb25zJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQW5ub3RhdGlvbnMnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvb2RhdGEvT0RhdGFBbm5vdGF0aW9ucyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgTz1zYXAudWkuYmFzZS5FdmVudFByb3ZpZGVyLmV4dGVuZCgic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQW5ub3RhdGlvbnMiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhLG0scCl7InVzZSBzdHJpY3QiO0UuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMub01ldGFkYXRhPW07dGhpcy5vQW5ub3RhdGlvbnM9bnVsbDt0aGlzLmJJbml0aWFsaXplZD1mYWxzZTt0aGlzLmJMb2FkZWQ9ZmFsc2U7dGhpcy5iQXN5bmM9cC5hc3luYzt0aGlzLnhQYXRoPW51bGw7dGhpcy5zQW5ub3RhdGlvblVSST1hO3RoaXMub1hNTERvYz1udWxsO3RoaXMuZXJyb3I9bnVsbDt0aGlzLm9BbGlhcz17fTt0aGlzLmJWYWxpZFhNTD10cnVlO3RoaXMub1JlcXVlc3RIYW5kbGU9bnVsbDt0aGlzLm9Mb2FkRXZlbnQ9bnVsbDt0aGlzLm9GYWlsZWRFdmVudD1udWxsO3RoaXMueG1sQ29tcGF0VmVyc2lvbj1mYWxzZTtpZihhKXt0aGlzLmxvYWRYTUwoKTtpZighdGhpcy5iQXN5bmMpe2lmKHRoaXMuZXJyb3Ipe3Euc2FwLmxvZy5lcnJvcigiT0RhdGEgYW5ub3RhdGlvbnMgY291bGQgbm90IGJlIGxvYWRlZDogIit0aGlzLmVycm9yLm1lc3NhZ2UpfX19fSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbInBhcnNlIiwiZ2V0QW5ub3RhdGlvbnNEYXRhIiwiYXR0YWNoRmFpbGVkIiwiZGV0YWNoQW5ub2F0aW9uc0ZhaWxlZCIsImF0dGFjaExvYWRlZCIsImRldGFjaExvYWRlZCJdfX0pO08ucHJvdG90eXBlLmdldEFubm90YXRpb25zRGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Bbm5vdGF0aW9uc307Ty5wcm90b3R5cGUuaXNMb2FkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iTG9hZGVkfTtPLnByb3RvdHlwZS5maXJlTG9hZGVkPWZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoImxvYWRlZCIpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5hdHRhY2hMb2FkZWQ9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImxvYWRlZCIsZCxmLGwpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5kZXRhY2hMb2FkZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJsb2FkZWQiLGYsbCk7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLmZpcmVGYWlsZWQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoImZhaWxlZCIsYSk7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLmF0dGFjaEZhaWxlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiZmFpbGVkIixkLGYsbCk7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLmRldGFjaEZhaWxlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImZhaWxlZCIsZixsKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuX3BhcnNlQWxpYXNlcz1mdW5jdGlvbihhKXt2YXIgcj10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHRoaXMub1hNTERvYywiLy9lZG14OlJlZmVyZW5jZSIsdGhpcy5vWE1MRG9jKTtmb3IodmFyIGk9MDtpPHIubGVuZ3RoO2krPTEpe3ZhciBiPXRoaXMueFBhdGgubmV4dE5vZGUocixpKTt2YXIgYz10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHRoaXMub1hNTERvYywiLi9lZG14OkluY2x1ZGUiLGIpO2lmKGMmJmMubGVuZ3RoPjApe3ZhciBkPXRoaXMueFBhdGgubmV4dE5vZGUoYywwKTtpZihkLmdldEF0dHJpYnV0ZSgiQWxpYXMiKSl7dGhpcy5vQWxpYXNbZC5nZXRBdHRyaWJ1dGUoIkFsaWFzIildPWQuZ2V0QXR0cmlidXRlKCJOYW1lc3BhY2UiKX1lbHNle3RoaXMub0FsaWFzW2QuZ2V0QXR0cmlidXRlKCJOYW1lc3BhY2UiKV09ZC5nZXRBdHRyaWJ1dGUoIk5hbWVzcGFjZSIpfX12YXIgZT10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHRoaXMub1hNTERvYywiLi9lZG14OkluY2x1ZGVBbm5vdGF0aW9ucyIsYik7aWYoZS5sZW5ndGg+MCl7Zm9yKHZhciBqPTA7ajxlLmxlbmd0aDtqKz0xKXt2YXIgZj10aGlzLnhQYXRoLm5leHROb2RlKGUsaik7aWYoZi5nZXRBdHRyaWJ1dGUoIlRhcmdldE5hbWVzcGFjZSIpKXt2YXIgQT1mLmdldEF0dHJpYnV0ZSgiVGFyZ2V0TmFtZXNwYWNlIik7aWYoIWFbQV0pe2FbQV09e319YVtBXVtmLmdldEF0dHJpYnV0ZSgiVGVybU5hbWVzcGFjZSIpXT1iLmdldEF0dHJpYnV0ZSgiVXJpIil9ZWxzZXthW2YuZ2V0QXR0cmlidXRlKCJUZXJtTmFtZXNwYWNlIildPWIuZ2V0QXR0cmlidXRlKCJVcmkiKX19fX19O08ucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKCl7dmFyIG09e30scyxTPXt9LGEsQT17fSx0PXRoaXMsYixULGMsZCxNLGUsZixnLGgsaixwLGssbCxuLG8scix1LHYsdyx4LHkseixCO3RoaXMueFBhdGg9dGhpcy5nZXRYUGF0aCgpO3RoaXMub1NlcnZpY2VNZXRhZGF0YT10aGlzLm9NZXRhZGF0YS5nZXRTZXJ2aWNlTWV0YWRhdGEoKTtpZih0aGlzLmJJbml0aWFsaXplZCl7cmV0dXJuIHRoaXMub0Fubm90YXRpb25zfXRoaXMub1hNTERvYz10aGlzLnhQYXRoLnNldE5hbWVTcGFjZSh0aGlzLm9YTUxEb2MpO3M9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh0aGlzLm9YTUxEb2MsIi8vZDpTY2hlbWEiLHRoaXMub1hNTERvYyk7Zm9yKHZhciBpPTA7aTxzLmxlbmd0aDtpKz0xKXthPXRoaXMueFBhdGgubmV4dE5vZGUocyxpKTtTLkFsaWFzPWEuZ2V0QXR0cmlidXRlKCJBbGlhcyIpO1MuTmFtZXNwYWNlPWEuZ2V0QXR0cmlidXRlKCJOYW1lc3BhY2UiKX10aGlzLl9wYXJzZUFsaWFzZXMoQSk7aWYoQSl7bS5hbm5vdGF0aW9uUmVmZXJlbmNlcz1BfW0uYWxpYXNEZWZpbml0aW9ucz10aGlzLm9BbGlhcztiPXRoaXMueFBhdGguc2VsZWN0Tm9kZXModGhpcy5vWE1MRG9jLCIvL2Q6VGVybSIsdGhpcy5vWE1MRG9jKTtpZihiLmxlbmd0aD4wKXtUPXt9O2Zvcih2YXIgQz0wO0M8Yi5sZW5ndGg7Qys9MSl7Yz10aGlzLnhQYXRoLm5leHROb2RlKGIsQyk7ZD10aGlzLnJlcGxhY2VXaXRoQWxpYXMoYy5nZXRBdHRyaWJ1dGUoIlR5cGUiKSx0aGlzLm9BbGlhcyk7VFsiQCIrUy5BbGlhcysiLiIrYy5nZXRBdHRyaWJ1dGUoIk5hbWUiKV09ZH1tLnRlcm1EZWZpbml0aW9ucz1UfU09dGhpcy5nZXRBbGxQcm9wZXJ0aWVzTWV0YWRhdGEodGhpcy5vU2VydmljZU1ldGFkYXRhKTtpZihNLmV4dGVuc2lvbnMpe20ucHJvcGVydHlFeHRlbnNpb25zPU0uZXh0ZW5zaW9uc31lPXRoaXMueFBhdGguc2VsZWN0Tm9kZXModGhpcy5vWE1MRG9jLCIvL2Q6QW5ub3RhdGlvbnMgIix0aGlzLm9YTUxEb2MpO2Zvcih2YXIgQz0wO0M8ZS5sZW5ndGg7Qys9MSl7Zj10aGlzLnhQYXRoLm5leHROb2RlKGUsQyk7aWYoZi5oYXNDaGlsZE5vZGVzKCk9PT1mYWxzZSl7Y29udGludWV9Zz1mLmdldEF0dHJpYnV0ZSgiVGFyZ2V0Iik7aD1nLnNwbGl0KCIuIilbMF07aWYoaCYmdGhpcy5vQWxpYXNbaF0pe2c9Zy5yZXBsYWNlKG5ldyBSZWdFeHAoaCwiIiksdGhpcy5vQWxpYXNbaF0pfWo9ZztwPW51bGw7aWYoZy5pbmRleE9mKCIvIik+MCl7aj1nLnNwbGl0KCIvIilbMF07cD1nLnJlcGxhY2UoaisiLyIsIiIpfWlmKCFtW2pdKXttW2pdPXt9fWlmKHApe2lmKCFtLnByb3BlcnR5QW5ub3RhdGlvbnMpe20ucHJvcGVydHlBbm5vdGF0aW9ucz17fX1pZighbS5wcm9wZXJ0eUFubm90YXRpb25zW2pdKXttLnByb3BlcnR5QW5ub3RhdGlvbnNbal09e319bS5wcm9wZXJ0eUFubm90YXRpb25zW2pdW3BdPXt9O2s9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh0aGlzLm9YTUxEb2MsIi4vZDpBbm5vdGF0aW9uIixmKTtmb3IodmFyIEQ9MDtEPGsubGVuZ3RoO0QrPTEpe2w9dGhpcy54UGF0aC5uZXh0Tm9kZShrLEQpO2lmKGwuaGFzQ2hpbGROb2RlcygpPT09ZmFsc2Upe249dGhpcy5yZXBsYWNlV2l0aEFsaWFzKGwuZ2V0QXR0cmlidXRlKCJUZXJtIikpO20ucHJvcGVydHlBbm5vdGF0aW9uc1tqXVtwXVtuXT10aGlzLmdldFByb3BlcnR5VmFsdWVBdHRyaWJ1dGVzKGwpfX19ZWxzZXtvPWoucmVwbGFjZSh0aGlzLm9BbGlhc1toXSxoKTtrPXRoaXMueFBhdGguc2VsZWN0Tm9kZXModGhpcy5vWE1MRG9jLCIuL2Q6QW5ub3RhdGlvbiIsZik7Zm9yKHZhciBGPTA7RjxrLmxlbmd0aDtGKz0xKXtsPXRoaXMueFBhdGgubmV4dE5vZGUoayxGKTtyPWwuZ2V0QXR0cmlidXRlKCJRdWFsaWZpZXIiKTt1PXRoaXMucmVwbGFjZVdpdGhBbGlhcyhsLmdldEF0dHJpYnV0ZSgiVGVybSIpKTtpZihyKXt1Kz0iIyIrcn12PXRoaXMuZ2V0UHJvcGVydHlWYWx1ZSh0aGlzLm9YTUxEb2MsbCxvKTt2PXRoaXMuc2V0RWRtVHlwZXModixNLnR5cGVzLGosUyk7bVtqXVt1XT12fXc9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh0aGlzLm9YTUxEb2MsIi8vZDpBbm5vdGF0aW9uc1tjb250YWlucyhAVGFyZ2V0LCAnIitvKyInKV0vL2Q6UHJvcGVydHlWYWx1ZVtjb250YWlucyhAUGF0aCwgJy8nKV0vL0BQYXRoIix0aGlzLm9YTUxEb2MpO2ZvcihpPTA7aTx3Lmxlbmd0aDtpKz0xKXt4PXRoaXMueFBhdGgubmV4dE5vZGUodyxpKTt5PXgudmFsdWU7aWYobS5wcm9wZXJ0eUFubm90YXRpb25zKXtpZihtLnByb3BlcnR5QW5ub3RhdGlvbnNbal0pe2lmKG0ucHJvcGVydHlBbm5vdGF0aW9uc1tqXVt5XSl7Y29udGludWV9fX16PXkuc3BsaXQoJy8nKTtpZih0aGlzLmlzTmF2UHJvcGVydHkoaix6WzBdLHRoaXMub1NlcnZpY2VNZXRhZGF0YSkpe2lmKCFtLmV4cGFuZCl7bS5leHBhbmQ9e319aWYoIW0uZXhwYW5kW2pdKXttLmV4cGFuZFtqXT17fX1tLmV4cGFuZFtqXVt6WzBdXT16WzBdfX1CPXRoaXMueFBhdGguc2VsZWN0Tm9kZXModGhpcy5vWE1MRG9jLCIvL2Q6QW5ub3RhdGlvbnNbY29udGFpbnMoQFRhcmdldCwgJyIrbysiJyldLy9kOlBhdGhbY29udGFpbnMoLiwgJy8nKV0iLHRoaXMub1hNTERvYyk7Zm9yKGk9MDtpPEIubGVuZ3RoO2krPTEpe3g9dGhpcy54UGF0aC5uZXh0Tm9kZShCLGkpO3k9dGhpcy54UGF0aC5nZXROb2RlVGV4dCh4KTtpZihtLnByb3BlcnR5QW5ub3RhdGlvbnNbal0pe2lmKG0ucHJvcGVydHlBbm5vdGF0aW9uc1tqXVt5XSl7Y29udGludWV9fWlmKCFtLmV4cGFuZCl7bS5leHBhbmQ9e319aWYoIW0uZXhwYW5kW2pdKXttLmV4cGFuZFtqXT17fX16PXkuc3BsaXQoJy8nKTtpZih0aGlzLmlzTmF2UHJvcGVydHkoaix6WzBdLHRoaXMub1NlcnZpY2VNZXRhZGF0YSkpe2lmKCFtLmV4cGFuZCl7bS5leHBhbmQ9e319aWYoIW0uZXhwYW5kW2pdKXttLmV4cGFuZFtqXT17fX1tLmV4cGFuZFtqXVt6WzBdXT16WzBdfX19fXRoaXMub0Fubm90YXRpb25zPW07dGhpcy5iSW5pdGlhbGl6ZWQ9dHJ1ZTtpZih0aGlzLmJBc3luYyl7dGhpcy5maXJlTG9hZGVkKHthbm5vdGF0aW9uczp0aGlzfSl9ZWxzZXt0aGlzLm9Mb2FkRXZlbnQ9cS5zYXAuZGVsYXllZENhbGwoMCx0aGlzLHRoaXMuZmlyZUxvYWRlZCxbdF0pfXJldHVybiB0aGlzLm9Bbm5vdGF0aW9uc307Ty5wcm90b3R5cGUuZ2V0WFBhdGg9ZnVuY3Rpb24oKXt2YXIgeD17fTtpZih0aGlzLnhtbENvbXBhdFZlcnNpb24pe3g9e3NldE5hbWVTcGFjZTpmdW5jdGlvbihvKXtvLnNldFByb3BlcnR5KCJTZWxlY3Rpb25OYW1lc3BhY2VzIiwneG1sbnM6ZWRteD0iaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvb2RhdGEvbnMvZWRteCIgeG1sbnM6ZD0iaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvb2RhdGEvbnMvZWRtIicpO28uc2V0UHJvcGVydHkoIlNlbGVjdGlvbkxhbmd1YWdlIiwiWFBhdGgiKTtyZXR1cm4gb30sc2VsZWN0Tm9kZXM6ZnVuY3Rpb24obyx4LGkpe3JldHVybiBpLnNlbGVjdE5vZGVzKHgpfSxuZXh0Tm9kZTpmdW5jdGlvbihuKXtyZXR1cm4gbi5uZXh0Tm9kZSgpfSxnZXROb2RlVGV4dDpmdW5jdGlvbihuKXtyZXR1cm4gbi50ZXh0fX19ZWxzZXt4PXtzZXROYW1lU3BhY2U6ZnVuY3Rpb24obyl7cmV0dXJuIG99LG5zUmVzb2x2ZXI6ZnVuY3Rpb24ocCl7dmFyIG49eyJlZG14IjoiaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvb2RhdGEvbnMvZWRteCIsImQiOiJodHRwOi8vZG9jcy5vYXNpcy1vcGVuLm9yZy9vZGF0YS9ucy9lZG0ifTtyZXR1cm4gbltwXXx8bnVsbH0sc2VsZWN0Tm9kZXM6ZnVuY3Rpb24obyxwLGkpe3ZhciBhPW8uZXZhbHVhdGUocCxpLHRoaXMubnNSZXNvbHZlciw3LG51bGwpO2EubGVuZ3RoPWEuc25hcHNob3RMZW5ndGg7cmV0dXJuIGF9LG5leHROb2RlOmZ1bmN0aW9uKG4saSl7cmV0dXJuIG4uc25hcHNob3RJdGVtKGkpfSxnZXROb2RlVGV4dDpmdW5jdGlvbihuKXtyZXR1cm4gbi50ZXh0Q29udGVudH19fXJldHVybiB4fTtPLnByb3RvdHlwZS5zZXRYTUw9ZnVuY3Rpb24oeCxYKXt2YXIgdD10aGlzO2lmKHNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7dGhpcy5vWE1MRG9jPW5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIik7dGhpcy5vWE1MRG9jLmxvYWRYTUwoWCk7dGhpcy54bWxDb21wYXRWZXJzaW9uPXRydWV9ZWxzZSBpZih4KXt0aGlzLm9YTUxEb2M9eH1lbHNle3RoaXMub1hNTERvYz1uZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKFgsJ2FwcGxpY2F0aW9uL3htbCcpfWlmKHRoaXMub1hNTERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGg+MCl7cmV0dXJuIGZhbHNlfWVsc2V7aWYocS5pc0VtcHR5T2JqZWN0KHRoaXMub01ldGFkYXRhLmdldFNlcnZpY2VNZXRhZGF0YSgpKSl7dGhpcy5vTWV0YWRhdGEuYXR0YWNoTG9hZGVkKGZ1bmN0aW9uKCl7dC5wYXJzZSgpfSl9ZWxzZXt0aGlzLnBhcnNlKCl9cmV0dXJuIHRydWV9fTtPLnByb3RvdHlwZS5sb2FkWE1MPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt2YXIgYT17dXJsOnRoaXMuc0Fubm90YXRpb25VUkksYXN5bmM6dGhpcy5iQXN5bmN9O3ZhciBoPWZ1bmN0aW9uIF9oYW5kbGVGYWlsKGoscyl7aWYodC5vUmVxdWVzdEhhbmRsZSYmdC5vUmVxdWVzdEhhbmRsZS5iU3VwcHJlc3NFcnJvckhhbmRsZXJDYWxsKXtyZXR1cm59dC5vUmVxdWVzdEhhbmRsZT1udWxsO3QuZXJyb3I9e21lc3NhZ2U6cyxzdGF0dXNDb2RlOmouc3RhdHVzQ29kZSxzdGF0dXNUZXh0Omouc3RhdHVzVGV4dCxyZXNwb25zZVRleHQ6ai5yZXNwb25zZVRleHR9O2lmKCF0aGlzLmJBc3luYyl7dGhpcy5vRmFpbGVkRXZlbnQ9cS5zYXAuZGVsYXllZENhbGwoMCx0LHQuZmlyZUZhaWxlZCxbdC5lcnJvcl0pfWVsc2V7dC5maXJlRmFpbGVkKHQuZXJyb3IpfXQuYkluaXRpYWxpemVkPWZhbHNlfTt2YXIgSD1mdW5jdGlvbihkLFQsail7dC5vUmVxdWVzdEhhbmRsZT1udWxsO2lmKCF0LnNldFhNTChqLnJlc3BvbnNlWE1MLGoucmVzcG9uc2VUZXh0KSl7aChqLCJNYWxmb3JtZWQgWE1MIGRvY3VtZW50Iil9ZWxzZXt0LmJMb2FkZWQ9dHJ1ZX19O3RoaXMub1JlcXVlc3RIYW5kbGU9cS5hamF4KGEpLmRvbmUoSCkuZmFpbChoKX07Ty5wcm90b3R5cGUuZ2V0QWxsUHJvcGVydGllc01ldGFkYXRhPWZ1bmN0aW9uKG0pe3ZhciBNPXt9LFA9e30sbz17fSxiPWZhbHNlLG4sZSxjLGE9e30sZD17fSxmPXt9LGc9ZmFsc2UsaCxDLHMsdCxyLFI7Zm9yKHZhciBpPW0uZGF0YVNlcnZpY2VzLnNjaGVtYS5sZW5ndGgtMTtpPj0wO2ktPTEpe009bS5kYXRhU2VydmljZXMuc2NoZW1hW2ldO2lmKE0uZW50aXR5VHlwZSl7bj1NLm5hbWVzcGFjZTtlPU0uZW50aXR5VHlwZTtjPU0uY29tcGxleFR5cGU7Zm9yKHZhciBqIGluIGUpe2E9ZVtqXTtmPXt9O2lmKGEuaGFzU3RyZWFtJiZhLmhhc1N0cmVhbT09PSJ0cnVlIil7Y29udGludWV9Zm9yKHZhciBrIGluIGEucHJvcGVydHkpe2g9YS5wcm9wZXJ0eVtrXTtpZihoLnR5cGUuc3Vic3RyaW5nKDAsbi5sZW5ndGgpPT09bil7Zm9yKHZhciBsIGluIGMpe2lmKGNbbF0ubmFtZT09PWgudHlwZS5zdWJzdHJpbmcobi5sZW5ndGgrMSkpe2ZvcihrIGluIGNbbF0ucHJvcGVydHkpe0M9Y1tsXS5wcm9wZXJ0eVtrXTtkW2NbbF0ubmFtZSsiLyIrQy5uYW1lXT1DLnR5cGV9fX19ZWxzZXtzPWgubmFtZTt0PWgudHlwZTtmb3IodmFyIHAgaW4gaC5leHRlbnNpb25zKXtyPWguZXh0ZW5zaW9uc1twXTtpZigoci5uYW1lPT09ImRpc3BsYXktZm9ybWF0IikmJihyLnZhbHVlPT09IkRhdGUiKSl7dD0iRWRtLkRhdGUifWVsc2V7Zz10cnVlO2lmKCFmW3NdKXtmW3NdPXt9fWlmKHIubmFtZXNwYWNlJiYhZltzXVtyLm5hbWVzcGFjZV0pe2Zbc11bci5uYW1lc3BhY2VdPXt9fWZbc11bci5uYW1lc3BhY2VdW3IubmFtZV09ci52YWx1ZX19ZFtzXT10fX1pZighUFtuKyIuIithLm5hbWVdKXtQW24rIi4iK2EubmFtZV09e319UFtuKyIuIithLm5hbWVdPWQ7aWYoZyl7aWYoIW9bbisiLiIrYS5uYW1lXSl7Yj10cnVlfW9bbisiLiIrYS5uYW1lXT17fTtvW24rIi4iK2EubmFtZV09Zn19fX1pZihiKXtSPXt0eXBlczpQLGV4dGVuc2lvbnM6b319ZWxzZXtSPXt0eXBlczpQfX1yZXR1cm4gUn07Ty5wcm90b3R5cGUuc2V0RWRtVHlwZXM9ZnVuY3Rpb24ocCxQLHQscyl7dmFyIG8sZT0nJztmb3IodmFyIGEgaW4gcCl7aWYocFthXSl7bz1wW2FdO2lmKG8uVmFsdWUmJm8uVmFsdWUuUGF0aCl7ZT10aGlzLmdldEVkbVR5cGUoby5WYWx1ZS5QYXRoLFAsdCxzKTtpZihlKXtwW2FdLkVkbVR5cGU9ZX1jb250aW51ZX1pZihvLlBhdGgpe2U9dGhpcy5nZXRFZG1UeXBlKG8uUGF0aCxQLHQscyk7aWYoZSl7cFthXS5FZG1UeXBlPWV9Y29udGludWV9aWYoby5GYWNldHMpe3BbYV0uRmFjZXRzPXRoaXMuc2V0RWRtVHlwZXMoby5GYWNldHMsUCx0LHMpO2NvbnRpbnVlfWlmKG8uRGF0YSl7cFthXS5EYXRhPXRoaXMuc2V0RWRtVHlwZXMoby5EYXRhLFAsdCxzKTtjb250aW51ZX1pZihhPT09IkRhdGEiKXtwLkRhdGE9dGhpcy5zZXRFZG1UeXBlcyhvLFAsdCxzKTtjb250aW51ZX1pZihvLlZhbHVlJiZvLlZhbHVlLkFwcGx5KXtwW2FdLlZhbHVlLkFwcGx5LlBhcmFtZXRlcnM9dGhpcy5zZXRFZG1UeXBlcyhvLlZhbHVlLkFwcGx5LlBhcmFtZXRlcnMsUCx0LHMpO2NvbnRpbnVlfWlmKG8uVmFsdWUmJm8uVHlwZSYmKG8uVHlwZT09PSJQYXRoIikpe2U9dGhpcy5nZXRFZG1UeXBlKG8uVmFsdWUsUCx0LHMpO2lmKGUpe3BbYV0uRWRtVHlwZT1lfX19fXJldHVybiBwfTtPLnByb3RvdHlwZS5nZXRFZG1UeXBlPWZ1bmN0aW9uKHAsUCx0LHMpe2lmKChwLmNoYXJBdCgwKT09PSJAIikmJihwLmluZGV4T2Yocy5BbGlhcyk9PT0xKSl7cD1wLnNsaWNlKHMuQWxpYXMubGVuZ3RoKzIpfWlmKHAuaW5kZXhPZigiLyIpPj0wKXtpZihQW3Auc2xpY2UoMCxwLmluZGV4T2YoIi8iKSldKXt0PXAuc2xpY2UoMCxwLmluZGV4T2YoIi8iKSk7cD1wLnNsaWNlKHAuaW5kZXhPZigiLyIpKzEpfX1mb3IodmFyIGEgaW4gUFt0XSl7aWYocD09PWEpe3JldHVybiBQW3RdW2FdfX19O08ucHJvdG90eXBlLmdldFByb3BlcnR5VmFsdWVBdHRyaWJ1dGVzPWZ1bmN0aW9uKGQpe3ZhciBhPSIiLGI9IiIsaSxwPXt9O2ZvcihpPTA7aTxkLmF0dHJpYnV0ZXMubGVuZ3RoO2krPTEpe2lmKChkLmF0dHJpYnV0ZXNbaV0ubmFtZSE9PSJQcm9wZXJ0eSIpJiYoZC5hdHRyaWJ1dGVzW2ldLm5hbWUhPT0iVGVybSIpKXthPWQuYXR0cmlidXRlc1tpXS5uYW1lO2I9ZC5hdHRyaWJ1dGVzW2ldLnZhbHVlfX1pZihhLmxlbmd0aD4wKXtwW2FdPXRoaXMucmVwbGFjZVdpdGhBbGlhcyhiKX1yZXR1cm4gcH07Ty5wcm90b3R5cGUuZ2V0U2ltcGxlTm9kZVZhbHVlPWZ1bmN0aW9uKHgsZCl7dmFyIHY9e30scyxhLHAsYixjLGU7aWYoZC5oYXNDaGlsZE5vZGVzKCkpe3M9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6U3RyaW5nIixkKTtpZihzLmxlbmd0aD4wKXthPXRoaXMueFBhdGgubmV4dE5vZGUocywwKTt2WyJTdHJpbmciXT10aGlzLnhQYXRoLmdldE5vZGVUZXh0KGEpfWVsc2V7cD10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpQYXRoIixkKTtpZihwLmxlbmd0aD4wKXtiPXRoaXMueFBhdGgubmV4dE5vZGUocCwwKTt2WyJQYXRoIl09dGhpcy54UGF0aC5nZXROb2RlVGV4dChiKX1lbHNle2M9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6QXBwbHkiLGQpO2lmKGMubGVuZ3RoPjApe2U9dGhpcy54UGF0aC5uZXh0Tm9kZShjLDApO3ZbIkFwcGx5Il09dGhpcy5nZXRBcHBseUZ1bmN0aW9ucyh4LGUsdGhpcy54UGF0aCl9fX19cmV0dXJuIHZ9O08ucHJvdG90eXBlLmdldFByb3BlcnR5VmFsdWU9ZnVuY3Rpb24oeCxkLHQpe3ZhciBwPXt9LHIsYSxuLGIsYyx1LGUsZixQPXt9LGcsaCxpLGosazt2YXIgbD10aGlzLmdldFhQYXRoKCk7aWYoZC5oYXNDaGlsZE5vZGVzKCkpe3I9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6UmVjb3JkIHwgLi9kOkNvbGxlY3Rpb24vZDpSZWNvcmQgfCAuL2Q6Q29sbGVjdGlvbi9kOklmL2Q6UmVjb3JkIixkKTtpZihyLmxlbmd0aCl7YT0wO2ZvcihuPTA7bjxyLmxlbmd0aDtuKz0xKXtiPXRoaXMueFBhdGgubmV4dE5vZGUocixuKTtjPXRoaXMuZ2V0UHJvcGVydHlWYWx1ZXMoeCxiLHQpO2lmKGIuZ2V0QXR0cmlidXRlKCJUeXBlIikpe2NbIlJlY29yZFR5cGUiXT10aGlzLnJlcGxhY2VXaXRoQWxpYXMoYi5nZXRBdHRyaWJ1dGUoIlR5cGUiKSl9aWYoYT09PTApe2lmKGIubmV4dEVsZW1lbnRTaWJsaW5nfHwoYi5wYXJlbnROb2RlLm5vZGVOYW1lPT09IkNvbGxlY3Rpb24iKXx8KGIucGFyZW50Tm9kZS5ub2RlTmFtZT09PSJJZiIpKXtwPVtdO3AucHVzaChjKX1lbHNle3A9Y319ZWxzZXtwLnB1c2goYyl9YSs9MX19ZWxzZXt1PXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOlVybFJlZiIsZCk7aWYodS5sZW5ndGg+MCl7Zm9yKG49MDtuPHUubGVuZ3RoO24rPTEpe2U9dGhpcy54UGF0aC5uZXh0Tm9kZSh1LG4pO3BbIlVybFJlZiJdPXRoaXMuZ2V0U2ltcGxlTm9kZVZhbHVlKHgsZSl9fWVsc2V7dT10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpVcmwiLGQpO2lmKHUubGVuZ3RoPjApe2ZvcihuPTA7bjx1Lmxlbmd0aDtuKz0xKXtlPXRoaXMueFBhdGgubmV4dE5vZGUodSxuKTtwWyJVcmwiXT10aGlzLmdldFNpbXBsZU5vZGVWYWx1ZSh4LGUpfX1lbHNle2s9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6Q29sbGVjdGlvbi9kOkFubm90YXRpb25QYXRoIHwgLi9kOkNvbGxlY3Rpb24vZDpQcm9wZXJ0eVBhdGgiLGQpO2lmKGsubGVuZ3RoPjApe3A9W107Zm9yKG49MDtuPGsubGVuZ3RoO24rPTEpe2Y9dGhpcy54UGF0aC5uZXh0Tm9kZShrLG4pO1A9e307UFtmLm5vZGVOYW1lXT1sLmdldE5vZGVUZXh0KGYpO3AucHVzaChQKX19ZWxzZXtwPXRoaXMuZ2V0UHJvcGVydHlWYWx1ZUF0dHJpYnV0ZXMoZCk7Zz10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpBbm5vdGF0aW9uIixkKTtoPXt9O2ZvcihpPTA7aTxnLmxlbmd0aDtpKz0xKXtoPXRoaXMueFBhdGgubmV4dE5vZGUoZyxpKTtpZihoLmhhc0NoaWxkTm9kZXMoKT09PWZhbHNlKXtqPXRoaXMucmVwbGFjZVdpdGhBbGlhcyhoLmdldEF0dHJpYnV0ZSgiVGVybSIpKTtwW2pdPXRoaXMuZ2V0UHJvcGVydHlWYWx1ZUF0dHJpYnV0ZXMoaCl9fX19fX19ZWxzZXtwPXRoaXMuZ2V0UHJvcGVydHlWYWx1ZUF0dHJpYnV0ZXMoZCl9cmV0dXJuIHB9O08ucHJvdG90eXBlLmdldFByb3BlcnR5VmFsdWVzPWZ1bmN0aW9uKHgsZCx0KXt2YXIgcD17fSxhPXt9LGIsbixjLGUsZixnLGgsaSxqLGs7Yj10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpBbm5vdGF0aW9uIixkKTtmb3Iobj0wO248Yi5sZW5ndGg7bis9MSl7YT10aGlzLnhQYXRoLm5leHROb2RlKGIsbik7aWYoYS5oYXNDaGlsZE5vZGVzKCk9PT1mYWxzZSl7Yz10aGlzLnJlcGxhY2VXaXRoQWxpYXMoYS5nZXRBdHRyaWJ1dGUoIlRlcm0iKSk7cFtjXT10aGlzLmdldFByb3BlcnR5VmFsdWVBdHRyaWJ1dGVzKGEpfX1lPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOlByb3BlcnR5VmFsdWUiLGQpO2lmKGUubGVuZ3RoPjApe2ZvcihmPTA7ZjxlLmxlbmd0aDtmKz0xKXtnPXRoaXMueFBhdGgubmV4dE5vZGUoZSxmKTtoPWcuZ2V0QXR0cmlidXRlKCJQcm9wZXJ0eSIpO3BbaF09dGhpcy5nZXRQcm9wZXJ0eVZhbHVlKHgsZyx0KTtpPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOkFwcGx5IixnKTtqPW51bGw7Zm9yKGs9MDtrPGkubGVuZ3RoO2srPTEpe2o9dGhpcy54UGF0aC5uZXh0Tm9kZShpLGspO2lmKGope3BbaF09e307cFtoXVsnQXBwbHknXT10aGlzLmdldEFwcGx5RnVuY3Rpb25zKHgsail9fX19ZWxzZXtwPXRoaXMuZ2V0UHJvcGVydHlWYWx1ZSh4LGQsdCl9cmV0dXJuIHB9O08ucHJvdG90eXBlLmdldEFwcGx5RnVuY3Rpb25zPWZ1bmN0aW9uKHgsYSl7dmFyIGI9e30scCxjPW51bGwsZD1bXSxpO3A9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6KiIsYSk7Zm9yKGk9MDtpPHAubGVuZ3RoO2krPTEpe2M9dGhpcy54UGF0aC5uZXh0Tm9kZShwLGkpO3N3aXRjaChjLm5vZGVOYW1lKXtjYXNlIkFwcGx5IjpkLnB1c2goeyJUeXBlIjoiQXBwbHkiLCJWYWx1ZSI6dGhpcy5nZXRBcHBseUZ1bmN0aW9ucyh4LGMpfSk7YnJlYWs7Y2FzZSJMYWJlbGVkRWxlbWVudCI6ZC5wdXNoKHsiTmFtZSI6Yy5nZXRBdHRyaWJ1dGUoIk5hbWUiKSwiVmFsdWUiOnRoaXMuZ2V0U2ltcGxlTm9kZVZhbHVlKHgsYyl9KTticmVhaztkZWZhdWx0OmQucHVzaCh7IlR5cGUiOmMubm9kZU5hbWUsIlZhbHVlIjp0aGlzLnhQYXRoLmdldE5vZGVUZXh0KGMpfSk7YnJlYWt9fWJbJ05hbWUnXT1hLmdldEF0dHJpYnV0ZSgnRnVuY3Rpb24nKTtiWydQYXJhbWV0ZXJzJ109ZDtyZXR1cm4gYn07Ty5wcm90b3R5cGUuaXNOYXZQcm9wZXJ0eT1mdW5jdGlvbihlLHAsbSl7dmFyIE0saSxuLGEsaixrO2ZvcihpPW0uZGF0YVNlcnZpY2VzLnNjaGVtYS5sZW5ndGgtMTtpPj0wO2ktPTEpe009bS5kYXRhU2VydmljZXMuc2NoZW1hW2ldO2lmKE0uZW50aXR5VHlwZSl7bj1NLm5hbWVzcGFjZSsiLiI7YT1NLmVudGl0eVR5cGU7Zm9yKGs9YS5sZW5ndGgtMTtrPj0wO2stPTEpe2lmKG4rYVtrXS5uYW1lPT09ZSYmYVtrXS5uYXZpZ2F0aW9uUHJvcGVydHkpe2ZvcihqPTA7ajxhW2tdLm5hdmlnYXRpb25Qcm9wZXJ0eS5sZW5ndGg7ais9MSl7aWYoYVtrXS5uYXZpZ2F0aW9uUHJvcGVydHlbal0ubmFtZT09PXApe3JldHVybiB0cnVlfX19fX19cmV0dXJuIGZhbHNlfTtPLnByb3RvdHlwZS5yZXBsYWNlV2l0aEFsaWFzPWZ1bmN0aW9uKHYsYSl7aWYoYT09PXVuZGVmaW5lZCl7YT10aGlzLm9BbGlhc31mb3IodmFyIEEgaW4gYSl7aWYodi5pbmRleE9mKEErIi4iKT49MCl7dj12LnJlcGxhY2UoQSsiLiIsYVtBXSsiLiIpO3JldHVybiB2fX1yZXR1cm4gdn07Ty5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKHRoaXMub1JlcXVlc3RIYW5kbGUpe3RoaXMub1JlcXVlc3RIYW5kbGUuYlN1cHByZXNzRXJyb3JIYW5kbGVyQ2FsbD10cnVlO3RoaXMub1JlcXVlc3RIYW5kbGUuYWJvcnQoKTt0aGlzLm9SZXF1ZXN0SGFuZGxlPW51bGx9c2FwLnVpLmJhc2UuT2JqZWN0LnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZighIXRoaXMub0xvYWRFdmVudCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLm9Mb2FkRXZlbnQpfWlmKCEhdGhpcy5vRmFpbGVkRXZlbnQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5vRmFpbGVkRXZlbnQpfX07cmV0dXJuIE99LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFDb250ZXh0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUNvbnRleHRCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL09EYXRhQ29udGV4dEJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvQ29udGV4dEJpbmRpbmcnXSxmdW5jdGlvbihxLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgTz1DLmV4dGVuZCgic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQ29udGV4dEJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxQLGUpe0MuY2FsbCh0aGlzLG0scCxjLFAsZSl9fSk7Ty5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMscj10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCksZD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCksUj10aGlzLm9Nb2RlbC5faXNSZWxvYWROZWVkZWQocixkLHRoaXMubVBhcmFtZXRlcnMpO2lmKHRoaXMub01vZGVsLm9NZXRhZGF0YS5pc0xvYWRlZCgpKXtpZihSKXt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCl9dGhpcy5vTW9kZWwuY3JlYXRlQmluZGluZ0NvbnRleHQodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0LHRoaXMubVBhcmFtZXRlcnMsZnVuY3Rpb24oYyl7dC5vRWxlbWVudENvbnRleHQ9Yzt0Ll9maXJlQ2hhbmdlKCk7aWYoUil7dC5maXJlRGF0YVJlY2VpdmVkKCl9fSxSKX19O08ucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZixjKXt2YXIgdD10aGlzLGsscyxiPWZhbHNlO2lmKGMpe3M9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKHMpe2s9dGhpcy5vTW9kZWwuX2dldEtleShzKTtpZihrIGluIGMpe2I9dHJ1ZX19fWVsc2V7Yj10cnVlfWlmKGZ8fGIpe3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKTt0aGlzLm9Nb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQsdGhpcy5tUGFyYW1ldGVycyxmdW5jdGlvbihvKXtpZih0Lm9FbGVtZW50Q29udGV4dD09byl7aWYoZil7dC5fZmlyZUNoYW5nZSgpfX1lbHNle3Qub0VsZW1lbnRDb250ZXh0PW87dC5fZmlyZUNoYW5nZSgpfXQuZmlyZURhdGFSZWNlaXZlZCgpfSx0cnVlKX19O08ucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7dmFyIHQ9dGhpcyxyLGQsUjtpZih0aGlzLm9Db250ZXh0IT1jJiZ0aGlzLmlzUmVsYXRpdmUoKSl7cj10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCksZD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCksUj10aGlzLm9Nb2RlbC5faXNSZWxvYWROZWVkZWQocixkLHRoaXMubVBhcmFtZXRlcnMpO3RoaXMub0NvbnRleHQ9YztpZihSKXt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCl9dGhpcy5vTW9kZWwuY3JlYXRlQmluZGluZ0NvbnRleHQodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0LHRoaXMubVBhcmFtZXRlcnMsZnVuY3Rpb24oYyl7dC5vRWxlbWVudENvbnRleHQ9Yzt0Ll9maXJlQ2hhbmdlKCk7aWYoUil7dC5maXJlRGF0YVJlY2VpdmVkKCl9fSxSKX19O3JldHVybiBPfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTWV0YWRhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9PRGF0YU1ldGFkYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBPPXNhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIuZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNZXRhZGF0YSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCl7RS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5iTG9hZGVkPWZhbHNlO3RoaXMuYkZhaWxlZD1mYWxzZTt0aGlzLm1FbnRpdHlUeXBlcz17fTt0aGlzLm9SZXF1ZXN0SGFuZGxlPW51bGw7dGhpcy5zVXJsPW07dGhpcy5iQXN5bmM9cC5hc3luYzt0aGlzLnNVc2VyPXAudXNlcjt0aGlzLnNQYXNzd29yZD1wLnBhc3N3b3JkO3RoaXMubUhlYWRlcnM9cC5oZWFkZXJzO3RoaXMub0xvYWRFdmVudD1udWxsO3RoaXMub0ZhaWxlZEV2ZW50PW51bGw7dGhpcy5vTWV0YWRhdGE9bnVsbDt0aGlzLm1OYW1lc3BhY2VzPXAubmFtZXNwYWNlc3x8e3NhcDoiaHR0cDovL3d3dy5zYXAuY29tL1Byb3RvY29scy9TQVBEYXRhIixtOiJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL2Fkby8yMDA3LzA4L2RhdGFzZXJ2aWNlcy9tZXRhZGF0YSIsIiI6Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vYWRvLzIwMDcvMDYvZWRteCJ9O3RoaXMuX2xvYWRNZXRhZGF0YSgpfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldFNlcnZpY2VNZXRhZGF0YSIsImF0dGFjaEZhaWxlZCIsImRldGFjaEZhaWxlZCIsImF0dGFjaExvYWRlZCIsImRldGFjaExvYWRlZCJdfX0pO08ucHJvdG90eXBlLl9zZXROYW1lc3BhY2VzPWZ1bmN0aW9uKG4pe3RoaXMubU5hbWVzcGFjZXM9bn07Ty5wcm90b3R5cGUuX2xvYWRNZXRhZGF0YT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dmFyIHI9dGhpcy5fY3JlYXRlUmVxdWVzdCh0aGlzLnNVcmwpO2Z1bmN0aW9uIF8obSxSKXtpZighbXx8IW0uZGF0YVNlcnZpY2VzKXt2YXIgcD17bWVzc2FnZToiSW52YWxpZCBtZXRhZGF0YSBkb2N1bWVudCIscmVxdWVzdDpyLHJlc3BvbnNlOlJ9O2EocCk7cmV0dXJufXQub01ldGFkYXRhPW07dC5vUmVxdWVzdEhhbmRsZT1udWxsO2lmKHQuYkFzeW5jKXt0LmZpcmVMb2FkZWQodCl9ZWxzZXt0LmJMb2FkZWQ9dHJ1ZTt0Lm9Mb2FkRXZlbnQ9cS5zYXAuZGVsYXllZENhbGwoMCx0LHQuZmlyZUxvYWRlZCxbdF0pfX1mdW5jdGlvbiBhKGUpe3ZhciBwPXttZXNzYWdlOmUubWVzc2FnZX07aWYoZS5yZXNwb25zZSl7cC5zdGF0dXNDb2RlPWUucmVzcG9uc2Uuc3RhdHVzQ29kZTtwLnN0YXR1c1RleHQ9ZS5yZXNwb25zZS5zdGF0dXNUZXh0O3AucmVzcG9uc2VUZXh0PWUucmVzcG9uc2UuYm9keX1pZih0Lm9SZXF1ZXN0SGFuZGxlJiZ0Lm9SZXF1ZXN0SGFuZGxlLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGwpe3JldHVybn10Lm9SZXF1ZXN0SGFuZGxlPW51bGw7aWYodC5iQXN5bmMpe3QuZmlyZUZhaWxlZChwKX1lbHNle3Qub0ZhaWxlZEV2ZW50PXEuc2FwLmRlbGF5ZWRDYWxsKDAsdCx0LmZpcmVGYWlsZWQsW3BdKX19dGhpcy5vUmVxdWVzdEhhbmRsZT1PRGF0YS5yZXF1ZXN0KHIsXyxhLE9EYXRhLm1ldGFkYXRhSGFuZGxlcil9O08ucHJvdG90eXBlLmdldFNlcnZpY2VNZXRhZGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9NZXRhZGF0YX07Ty5wcm90b3R5cGUuaXNMb2FkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iTG9hZGVkfTtzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNZXRhZGF0YS5wcm90b3R5cGUuZmlyZUxvYWRlZD1mdW5jdGlvbigpe3RoaXMuYkxvYWRlZD10cnVlO3RoaXMuZmlyZUV2ZW50KCJsb2FkZWQiKTtxLnNhcC5sb2cuZGVidWcoJ2xvYWRlZCBvbiBNZXRhZGF0YSBvYmplY3Qgd2FzIGZpcmVkJyk7cmV0dXJuIHRoaXN9O3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1ldGFkYXRhLnByb3RvdHlwZS5hdHRhY2hMb2FkZWQ9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImxvYWRlZCIsZCxmLGwpO3JldHVybiB0aGlzfTtzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNZXRhZGF0YS5wcm90b3R5cGUuZGV0YWNoTG9hZGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgibG9hZGVkIixmLGwpO3JldHVybiB0aGlzfTtzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNZXRhZGF0YS5wcm90b3R5cGUuZmlyZUZhaWxlZD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiZmFpbGVkIixhKTtyZXR1cm4gdGhpc307c2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTWV0YWRhdGEucHJvdG90eXBlLmF0dGFjaEZhaWxlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiZmFpbGVkIixkLGYsbCk7cmV0dXJuIHRoaXN9O3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1ldGFkYXRhLnByb3RvdHlwZS5kZXRhY2hGYWlsZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJmYWlsZWQiLGYsbCk7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLl9nZXRFbnRpdHlUeXBlQnlQYXRoPWZ1bmN0aW9uKHApe2lmKCFwKXtyZXR1cm4gbnVsbH1pZighdGhpcy5vTWV0YWRhdGF8fHEuaXNFbXB0eU9iamVjdCh0aGlzLm9NZXRhZGF0YSkpe3JldHVybiBudWxsfXZhciBjPXAucmVwbGFjZSgvXlwvfFwvJC9nLCIiKSxQPWMuc3BsaXQoIi8iKSxsPVAubGVuZ3RoLGEsQSxvLGUsYixkLHIsdD10aGlzO2lmKFBbMF0uaW5kZXhPZigiKCIpIT0tMSl7UFswXT1QWzBdLnN1YnN0cmluZygwLFBbMF0uaW5kZXhPZigiKCIpKX1pZihsPjEpe289dC5fZ2V0RW50aXR5VHlwZUJ5UGF0aChQWzBdKTtmb3IodmFyIGk9MTtpPFAubGVuZ3RoO2krKyl7aWYobyl7aWYoUFtpXS5pbmRleE9mKCIoIikhPS0xKXtQW2ldPVBbaV0uc3Vic3RyaW5nKDAsUFtpXS5pbmRleE9mKCIoIikpfWlmKG8ubmF2aWdhdGlvblByb3BlcnR5KXtyPXQuX2dldEVudGl0eVR5cGVCeU5hdlByb3BlcnR5KG8sUFtpXSk7aWYocil7bz1yfX1kPW99fX1lbHNle2I9dGhpcy5fc3BsaXROYW1lKHRoaXMuX2dldEVudGl0eVR5cGVOYW1lKFBbMF0pKTtkPXRoaXMuX2dldE9iamVjdE1ldGFkYXRhKCJlbnRpdHlUeXBlIixiWzBdLGJbMV0pO2lmKGQpe2QuZW50aXR5VHlwZT10aGlzLl9nZXRFbnRpdHlUeXBlTmFtZShQWzBdKX19aWYoIWQpe3ZhciBmPVBbUC5sZW5ndGgtMV07dmFyIEY9dGhpcy5fZ2V0RnVuY3Rpb25JbXBvcnRNZXRhZGF0YShmLCJHRVQiKTtpZihGJiZGLmVudGl0eVNldCl7ZD10aGlzLl9nZXRFbnRpdHlUeXBlQnlQYXRoKEYuZW50aXR5U2V0KTtpZihkKXtkLmVudGl0eVR5cGU9dGhpcy5fZ2V0RW50aXR5VHlwZU5hbWUoRi5lbnRpdHlTZXQpfX19cmV0dXJuIGR9O08ucHJvdG90eXBlLl9nZXRFbnRpdHlUeXBlQnlOYW1lPWZ1bmN0aW9uKG4pe3ZhciBlLHQ9dGhpcztpZighbil7cmV0dXJuIG51bGx9aWYoIXRoaXMub01ldGFkYXRhfHxxLmlzRW1wdHlPYmplY3QodGhpcy5vTWV0YWRhdGEpKXtyZXR1cm4gbnVsbH1pZih0aGlzLm1FbnRpdHlUeXBlc1tuXSl7ZT10aGlzLm1FbnRpdHlUeXBlc1tuXX1lbHNle3EuZWFjaCh0aGlzLm9NZXRhZGF0YS5kYXRhU2VydmljZXMuc2NoZW1hLGZ1bmN0aW9uKGkscyl7aWYocy5lbnRpdHlUeXBlKXtxLmVhY2gocy5lbnRpdHlUeXBlLGZ1bmN0aW9uKGssbyl7aWYoby5uYW1lPT09bil7ZT1vO3QubUVudGl0eVR5cGVzW25dPWU7ZS5uYW1lc3BhY2U9cy5uYW1lc3BhY2U7cmV0dXJuIGZhbHNlfX0pfX0pfXJldHVybiBlfTtPLnByb3RvdHlwZS5fZ2V0QW5ub3RhdGlvbj1mdW5jdGlvbihwKXt2YXIgbixrLFAsbSxNLGUscyxvLGEscDtQPXAuc3BsaXQoJy8jJyk7TT1QWzFdLnNwbGl0KCcvJyk7aWYoIVBbMF0pe2U9dGhpcy5fZ2V0RW50aXR5VHlwZUJ5TmFtZShNWzBdKTtpZighZSlyZXR1cm47cz1QWzFdLnN1YnN0cihQWzFdLmluZGV4T2YoJy8nKSsxKTtvPXRoaXMuX2dldFByb3BlcnR5TWV0YWRhdGEoZSxzKTtpZighbylyZXR1cm47bT1zLnN1YnN0cihzLmluZGV4T2Yoby5uYW1lKSk7bT1tLnN1YnN0cihtLmluZGV4T2YoJy8nKSsxKX1lbHNle2U9dGhpcy5fZ2V0RW50aXR5VHlwZUJ5UGF0aChQWzBdKTtpZighZSlyZXR1cm47cD1QWzBdLnJlcGxhY2UoL15cL3xcLyQvZywiIik7cz1wLnN1YnN0cihwLmluZGV4T2YoJy8nKSsxKTtvPXRoaXMuX2dldFByb3BlcnR5TWV0YWRhdGEoZSxzKTtpZighbylyZXR1cm47bT1NLmpvaW4oJy8nKX1uPXRoaXMuX2dldEFubm90YXRpb25PYmplY3QoZSxvLG0pO3JldHVybiBufTtPLnByb3RvdHlwZS5fZ2V0QW5ub3RhdGlvbk9iamVjdD1mdW5jdGlvbihlLG8sbSl7dmFyIHQ9dGhpcyxhLHAsQSxuLHM7aWYoIW8pcmV0dXJuO249bztwPW0uc3BsaXQoJy8nKTtpZihwWzBdLmluZGV4T2YoJy4nKT4tMSl7cmV0dXJuIHRoaXMuX2dldFY0QW5ub3RhdGlvbk9iamVjdChlLG8scCl9ZWxzZXtpZihwLmxlbmd0aD4xKXtuPW5bcFswXV07aWYoIW4mJm8uZXh0ZW5zaW9ucyl7Zm9yKHZhciBpPTA7aTxvLmV4dGVuc2lvbnMubGVuZ3RoO2krKyl7dmFyIGI9by5leHRlbnNpb25zW2ldO2lmKGIubmFtZT09cFswXSl7bj1iO2JyZWFrfX19bT1wLnNwbGljZSgwLDEpO0E9dGhpcy5fZ2V0QW5ub3RhdGlvbk9iamVjdChlLG4scC5qb2luKCcvJykpfWVsc2V7aWYocFswXS5pbmRleE9mKCdAJyk+LTEpe3M9cFswXS5zdWJzdHIoMSk7YT1zLnNwbGl0KCc6Jyk7QT1uW2FbMF1dO2lmKCFBJiZuLmV4dGVuc2lvbnMpe2Zvcih2YXIgaT0wO2k8bi5leHRlbnNpb25zLmxlbmd0aDtpKyspe3ZhciBiPW4uZXh0ZW5zaW9uc1tpXTtpZihiLm5hbWU9PT1hWzFdJiZiLm5hbWVzcGFjZT09PXRoaXMubU5hbWVzcGFjZXNbYVswXV0pe0E9Yi52YWx1ZTticmVha319fX1lbHNle2E9cFswXS5zcGxpdCgnOicpO0E9blthWzBdXTtBPW5bcFswXV07aWYoIUEmJm4uZXh0ZW5zaW9ucyl7Zm9yKHZhciBpPTA7aTxuLmV4dGVuc2lvbnMubGVuZ3RoO2krKyl7dmFyIGI9bi5leHRlbnNpb25zW2ldO2lmKGIubmFtZT09PWFbMV0mJmIubmFtZXNwYWNlPT09dGhpcy5tTmFtZXNwYWNlc1thWzBdXSl7QT1iO2JyZWFrfX19fX19cmV0dXJuIEF9O08ucHJvdG90eXBlLl9nZXRWNEFubm90YXRpb25PYmplY3Q9ZnVuY3Rpb24oZSxvLHApe3ZhciBhLEE9W107aWYocC5sZW5ndGg+MSl7cmV0dXJufXZhciB0PWUubmFtZXNwYWNlP2UubmFtZXNwYWNlKyIuIjoiIjt0Kz1lLm5hbWUrIi8iK28ubmFtZTtxLmVhY2godGhpcy5vTWV0YWRhdGEuZGF0YVNlcnZpY2VzLnNjaGVtYSxmdW5jdGlvbihpLHMpe2lmKHMuYW5ub3RhdGlvbnMpe3EuZWFjaChzLmFubm90YXRpb25zLGZ1bmN0aW9uKGssbyl7aWYoby50YXJnZXQ9PT10JiYhby5xdWFsaWZpZXIpe0EucHVzaChvLmFubm90YXRpb24pO3JldHVybiBmYWxzZX19KX19KTtpZihBKXtxLmVhY2goQSxmdW5jdGlvbihpLGIpe3EuZWFjaChiLGZ1bmN0aW9uKGosYyl7aWYoYy50ZXJtPT09cFswXSl7YT1jfX0pfSl9cmV0dXJuIGF9O08ucHJvdG90eXBlLl9zcGxpdE5hbWU9ZnVuY3Rpb24oZil7dmFyIHA9W107aWYoZil7dmFyIHM9Zi5sYXN0SW5kZXhPZigiLiIpO3BbMF09Zi5zdWJzdHIocysxKTtwWzFdPWYuc3Vic3RyKDAscyl9cmV0dXJuIHB9O08ucHJvdG90eXBlLl9nZXRFbnRpdHlUeXBlTmFtZT1mdW5jdGlvbihjKXt2YXIgZTtpZihjKXtxLmVhY2godGhpcy5vTWV0YWRhdGEuZGF0YVNlcnZpY2VzLnNjaGVtYSxmdW5jdGlvbihpLHMpe2lmKHMuZW50aXR5Q29udGFpbmVyKXtxLmVhY2gocy5lbnRpdHlDb250YWluZXIsZnVuY3Rpb24oayxvKXtpZihvLmVudGl0eVNldCl7cS5lYWNoKG8uZW50aXR5U2V0LGZ1bmN0aW9uKGosYSl7aWYoYS5uYW1lPT09Yyl7ZT1hLmVudGl0eVR5cGU7cmV0dXJuIGZhbHNlfX0pfX0pfX0pfXJldHVybiBlfTtPLnByb3RvdHlwZS5fZ2V0T2JqZWN0TWV0YWRhdGE9ZnVuY3Rpb24obyxzLG4pe3ZhciBhO2lmKHMmJm4pe3EuZWFjaCh0aGlzLm9NZXRhZGF0YS5kYXRhU2VydmljZXMuc2NoZW1hLGZ1bmN0aW9uKGksUyl7aWYoU1tvXSYmUy5uYW1lc3BhY2U9PT1uKXtxLmVhY2goU1tvXSxmdW5jdGlvbihqLGMpe2lmKGMubmFtZT09PXMpe2E9YzthLm5hbWVzcGFjZT1TLm5hbWVzcGFjZTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIWF9fSl9cmV0dXJuIGF9O08ucHJvdG90eXBlLmdldFVzZUJhdGNoPWZ1bmN0aW9uKCl7dmFyIHU9ZmFsc2U7cS5lYWNoKHRoaXMub01ldGFkYXRhLmRhdGFTZXJ2aWNlcy5zY2hlbWEsZnVuY3Rpb24oaSxzKXtpZihzLmVudGl0eUNvbnRhaW5lcil7cS5lYWNoKHMuZW50aXR5Q29udGFpbmVyLGZ1bmN0aW9uKGssZSl7aWYoZS5leHRlbnNpb25zKXtxLmVhY2goZS5leHRlbnNpb25zLGZ1bmN0aW9uKGwsbyl7aWYoby5uYW1lPT09InVzZS1iYXRjaCImJm8ubmFtZXNwYWNlPT09Imh0dHA6Ly93d3cuc2FwLmNvbS9Qcm90b2NvbHMvU0FQRGF0YSIpe3U9KHR5cGVvZiBvLnZhbHVlPT09J3N0cmluZycpPyhvLnZhbHVlLnRvTG93ZXJDYXNlKCk9PT0ndHJ1ZScpOiEhby52YWx1ZTtyZXR1cm4gZmFsc2V9fSl9fSl9fSk7cmV0dXJuIHV9O08ucHJvdG90eXBlLl9nZXRGdW5jdGlvbkltcG9ydE1ldGFkYXRhPWZ1bmN0aW9uKGYsbSl7dmFyIG89bnVsbDtxLmVhY2godGhpcy5vTWV0YWRhdGEuZGF0YVNlcnZpY2VzLnNjaGVtYSxmdW5jdGlvbihpLHMpe2lmKHNbImVudGl0eUNvbnRhaW5lciJdKXtxLmVhY2goc1siZW50aXR5Q29udGFpbmVyIl0sZnVuY3Rpb24oaixlKXtpZihlWyJmdW5jdGlvbkltcG9ydCJdKXtxLmVhY2goZVsiZnVuY3Rpb25JbXBvcnQiXSxmdW5jdGlvbihrLEYpe2lmKEYubmFtZT09PWYmJkYuaHR0cE1ldGhvZD09PW0pe289RjtyZXR1cm4gZmFsc2V9fSl9cmV0dXJuIW99KX1yZXR1cm4hb30pO3JldHVybiBvfTtPLnByb3RvdHlwZS5fZ2V0RW50aXR5VHlwZUJ5TmF2UHJvcGVydHk9ZnVuY3Rpb24oZSxuKXt2YXIgdD10aGlzLGEsQSxiLE47cS5lYWNoKGUubmF2aWdhdGlvblByb3BlcnR5LGZ1bmN0aW9uKGssbyl7aWYoby5uYW1lPT09bil7YT10Ll9zcGxpdE5hbWUoby5yZWxhdGlvbnNoaXApO0E9dC5fZ2V0T2JqZWN0TWV0YWRhdGEoImFzc29jaWF0aW9uIixhWzBdLGFbMV0pO2lmKEEpe3ZhciBjPUEuZW5kWzBdO2lmKGMucm9sZSE9PW8udG9Sb2xlKXtjPUEuZW5kWzFdfWI9dC5fc3BsaXROYW1lKGMudHlwZSk7Tj10Ll9nZXRPYmplY3RNZXRhZGF0YSgiZW50aXR5VHlwZSIsYlswXSxiWzFdKTtpZihOKXtOLmVudGl0eVR5cGU9Yy50eXBlfXJldHVybiBmYWxzZX19fSk7cmV0dXJuIE59O08ucHJvdG90eXBlLl9nZXROYXZpZ2F0aW9uUHJvcGVydHlOYW1lcz1mdW5jdGlvbihlKXt2YXIgbj1bXTtpZihlLm5hdmlnYXRpb25Qcm9wZXJ0eSl7cS5lYWNoKGUubmF2aWdhdGlvblByb3BlcnR5LGZ1bmN0aW9uKGssTil7bi5wdXNoKE4ubmFtZSl9KX1yZXR1cm4gbn07Ty5wcm90b3R5cGUuX2dldFByb3BlcnR5TWV0YWRhdGE9ZnVuY3Rpb24oZSxwKXt2YXIgUCx0PXRoaXM7aWYoIWUpcmV0dXJuO3A9cC5yZXBsYWNlKC9eXC98XC8kL2csIiIpO3ZhciBhPXAuc3BsaXQoIi8iKTtxLmVhY2goZS5wcm9wZXJ0eSxmdW5jdGlvbihrLGIpe2lmKGIubmFtZT09PWFbMF0pe1A9YjtyZXR1cm4gZmFsc2V9fSk7aWYoUCYmYS5sZW5ndGg+MSYmIXEuc2FwLnN0YXJ0c1dpdGgoUC50eXBlLnRvTG93ZXJDYXNlKCksImVkbS4iKSl7dmFyIG49dGhpcy5fc3BsaXROYW1lKFAudHlwZSk7UD10aGlzLl9nZXRQcm9wZXJ0eU1ldGFkYXRhKHRoaXMuX2dldE9iamVjdE1ldGFkYXRhKCJjb21wbGV4VHlwZSIsblswXSxuWzFdKSxhWzFdKX1pZighUCYmYS5sZW5ndGg+MSl7dmFyIG89dGhpcy5fZ2V0RW50aXR5VHlwZUJ5TmF2UHJvcGVydHkoZSxhWzBdKTtpZihvKXtQPXQuX2dldFByb3BlcnR5TWV0YWRhdGEobyxhWzFdKX19cmV0dXJuIFB9O08ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5vTWV0YWRhdGE7aWYodGhpcy5vUmVxdWVzdEhhbmRsZSl7dGhpcy5vUmVxdWVzdEhhbmRsZS5iU3VwcHJlc3NFcnJvckhhbmRsZXJDYWxsPXRydWU7dGhpcy5vUmVxdWVzdEhhbmRsZS5hYm9ydCgpO3RoaXMub1JlcXVlc3RIYW5kbGU9bnVsbH1pZighIXRoaXMub0xvYWRFdmVudCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLm9Mb2FkRXZlbnQpfWlmKCEhdGhpcy5vRmFpbGVkRXZlbnQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5vRmFpbGVkRXZlbnQpfXNhcC51aS5iYXNlLk9iamVjdC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1ldGFkYXRhLnByb3RvdHlwZS5fY3JlYXRlUmVxdWVzdD1mdW5jdGlvbih1KXt2YXIgaD17fSxsPXsiQWNjZXB0LUxhbmd1YWdlIjpzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRMYW5ndWFnZSgpfTtxLmV4dGVuZChoLHRoaXMubUhlYWRlcnMsbCk7dmFyIHI9e2hlYWRlcnM6aCxyZXF1ZXN0VXJpOnUsbWV0aG9kOidHRVQnLHVzZXI6dGhpcy5zVXNlcixwYXNzd29yZDp0aGlzLnNQYXNzd29yZCxhc3luYzohIXRoaXMuYkFzeW5jfTtpZighIXRoaXMuYkFzeW5jKXtyLndpdGhDcmVkZW50aWFscz10aGlzLmJXaXRoQ3JlZGVudGlhbHN9cmV0dXJuIHJ9O3JldHVybiBPfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhVHJlZUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFUcmVlQmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9PRGF0YVRyZWVCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL1RyZWVCaW5kaW5nJ10sZnVuY3Rpb24ocSxUKXsidXNlIHN0cmljdCI7dmFyIE89VC5leHRlbmQoInNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YVRyZWVCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsZixQKXtULmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmJQZW5kaW5nUmVxdWVzdD1mYWxzZTt0aGlzLm9GaW5hbExlbmd0aHM9e307dGhpcy5vTGVuZ3Rocz17fTt0aGlzLm9LZXlzPXt9O3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlO2lmKCFQfHwhUC5uYXZpZ2F0aW9uKXtxLnNhcC5sb2cuZXJyb3IoIkEgbmF2aWdhdGlvbiBwYXRocyBwYXJhbWV0ZXIgb2JqZWN0IGhhcyB0byBiZSBkZWZpbmVkIik7dGhpcy5vTmF2aWdhdGlvblBhdGhzPXt9fWVsc2V7dGhpcy5vTmF2aWdhdGlvblBhdGhzPVAubmF2aWdhdGlvbn19fSk7Ty5wcm90b3R5cGUuZ2V0Um9vdENvbnRleHRzPWZ1bmN0aW9uKCl7dmFyIG49dGhpcy5fZ2V0TmF2UGF0aCh0aGlzLnNQYXRoKSxhPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLmdldENvbnRleHQoKSksdD10aGlzLGM7aWYoIWEpe3JldHVybltdfWlmKCF0aGlzLm9Nb2RlbC5pc0xpc3QodGhpcy5zUGF0aCx0aGlzLmdldENvbnRleHQoKSkpe2lmKHRoaXMuYkRpc3BsYXlSb290Tm9kZSl7dGhpcy5vTW9kZWwuY3JlYXRlQmluZGluZ0NvbnRleHQoYSxudWxsLHtleHBhbmQ6bn0sZnVuY3Rpb24oTil7Yz1OO2lmKHQub1Jvb3RDb250ZXh0IT09Til7dC5vUm9vdENvbnRleHQ9Tjt0LmJOZWVkc1VwZGF0ZT10cnVlfWVsc2V7dmFyIGQ9dC5vTW9kZWwub0RhdGFbYy5nZXRQYXRoKCkuc3Vic3RyKDEpXTt0Ll9wcm9jZXNzT0RhdGFPYmplY3QoZCxjLmdldFBhdGgoKSxuKX19LGZhbHNlKTtpZihjKXtyZXR1cm5bY119ZWxzZXtyZXR1cm5bXX19ZWxzZXtjPXRoaXMub01vZGVsLmdldENvbnRleHQodGhpcy5zUGF0aCk7cmV0dXJuIHRoaXMuZ2V0Tm9kZUNvbnRleHRzKGMpfX1lbHNle3JldHVybiB0aGlzLl9nZXRDb250ZXh0c0ZvclBhdGgoYSxuKX19O08ucHJvdG90eXBlLmdldE5vZGVDb250ZXh0cz1mdW5jdGlvbihjKXt2YXIgbj10aGlzLl9nZXROYXZQYXRoKGMuZ2V0UGF0aCgpKSxhO2lmKCFuKXtyZXR1cm5bXX1hPXRoaXMub01vZGVsLnJlc29sdmUobixjKTtuPXRoaXMub05hdmlnYXRpb25QYXRoc1tuXTtyZXR1cm4gdGhpcy5fZ2V0Q29udGV4dHNGb3JQYXRoKGEsbil9O08ucHJvdG90eXBlLmhhc0NoaWxkcmVuPWZ1bmN0aW9uKGMpe3JldHVybiBjJiZ0aGlzLm9MZW5ndGhzW2MuZ2V0UGF0aCgpXT4wfTtPLnByb3RvdHlwZS5fZ2V0Q29udGV4dHNGb3JQYXRoPWZ1bmN0aW9uKGEsbil7dmFyIGM9W10sbD10aGlzLm9Nb2RlbC5pU2l6ZUxpbWl0LEwsaztpZih0aGlzLm9GaW5hbExlbmd0aHMmJnRoaXMub0ZpbmFsTGVuZ3Roc1thXSYmdGhpcy5vTGVuZ3Roc1thXTxsKXtsPXRoaXMub0xlbmd0aHNbYV19aWYodGhpcy5vS2V5c1thXSl7Zm9yKHZhciBpPTA7aTxsO2krKyl7az10aGlzLm9LZXlzW2FdW2ldO2lmKCFrKXticmVha31jLnB1c2godGhpcy5vTW9kZWwuZ2V0Q29udGV4dCgnLycraykpfX1MPWMubGVuZ3RoIT1sJiYhKHRoaXMub0ZpbmFsTGVuZ3Roc1thXSYmYy5sZW5ndGg+PXRoaXMub0xlbmd0aHNbYV0pO2lmKHRoaXMub01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpKXtpZighdGhpcy5iUGVuZGluZ1JlcXVlc3QmJkwpe3RoaXMubG9hZFN1Yk5vZGVzKGEsbil9fXJldHVybiBjfTtPLnByb3RvdHlwZS5sb2FkU3ViTm9kZXM9ZnVuY3Rpb24oYSxuKXt2YXIgdD10aGlzLHA9W107aWYobil7cC5wdXNoKCIkZXhwYW5kPSIrbil9ZnVuY3Rpb24gcyhkKXt0Lm9MZW5ndGhzW2FdPWQucmVzdWx0cy5sZW5ndGg7dC5vRmluYWxMZW5ndGhzW2FdPXRydWU7dC5vS2V5c1thXT1bXTtmb3IodmFyIGk9MDtpPGQucmVzdWx0cy5sZW5ndGg7aSsrKXt2YXIgRT1kLnJlc3VsdHNbaV07dC5fcHJvY2Vzc09EYXRhT2JqZWN0KEUsYSxuKTt0Lm9LZXlzW2FdLnB1c2godC5vTW9kZWwuX2dldEtleShFKSl9dC5vUmVxdWVzdEhhbmRsZT1udWxsO3QuYlBlbmRpbmdSZXF1ZXN0PWZhbHNlO3QuYk5lZWRzVXBkYXRlPXRydWV9ZnVuY3Rpb24gYygpe3QuZmlyZURhdGFSZWNlaXZlZCgpfWZ1bmN0aW9uIGUoZCl7dC5vUmVxdWVzdEhhbmRsZT1udWxsO3QuYlBlbmRpbmdSZXF1ZXN0PWZhbHNlO3QuZmlyZURhdGFSZWNlaXZlZCgpfWZ1bmN0aW9uIHUoaCl7dC5vUmVxdWVzdEhhbmRsZT1ofWlmKGEpe2lmKCF0aGlzLm9GaW5hbExlbmd0aHNbYV0pe3RoaXMuYlBlbmRpbmdSZXF1ZXN0PXRydWU7dGhpcy5maXJlRGF0YVJlcXVlc3RlZCgpO3RoaXMub01vZGVsLl9sb2FkRGF0YShhLHAscyxlLGZhbHNlLHUsYyl9fX07Ty5wcm90b3R5cGUucmVzZXREYXRhPWZ1bmN0aW9uKGMpe2lmKGMpe3ZhciBwPWMuZ2V0UGF0aCgpO2RlbGV0ZSB0aGlzLm9LZXlzW3BdO2RlbGV0ZSB0aGlzLm9MZW5ndGhzW3BdO2RlbGV0ZSB0aGlzLm9GaW5hbExlbmd0aHNbcF19ZWxzZXt0aGlzLm9LZXlzPXt9O3RoaXMub0xlbmd0aHM9e307dGhpcy5vRmluYWxMZW5ndGhzPXt9fX07Ty5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihmLGMsZSl7dmFyIEM9ZmFsc2U7aWYoIWYpe2lmKGUpe3ZhciByPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTt2YXIgRT10aGlzLm9Nb2RlbC5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgocik7aWYoRSYmKEUuZW50aXR5VHlwZSBpbiBlKSl7Qz10cnVlfX1pZihjJiYhQyl7cS5lYWNoKHRoaXMub0tleXMsZnVuY3Rpb24oaSxuKXtxLmVhY2gobixmdW5jdGlvbihpLGspe2lmKGsgaW4gYyl7Qz10cnVlO3JldHVybiBmYWxzZX19KTtpZihDKXJldHVybiBmYWxzZX0pfWlmKCFjJiYhZSl7Qz10cnVlfX1pZihmfHxDKXt0aGlzLnJlc2V0RGF0YSgpO3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlO3RoaXMuX2ZpcmVDaGFuZ2UoKX19O08ucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbihmKXtxLnNhcC5sb2cud2FybmluZygiRmlsdGVyaW5nIGlzIGN1cnJlbnRseSBub3QgcG9zc2libGUgaW4gdGhlIE9EYXRhVHJlZUJpbmRpbmciKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZixjKXt2YXIgQz1mYWxzZTtpZighZil7aWYodGhpcy5iTmVlZHNVcGRhdGV8fCFjKXtDPXRydWV9ZWxzZXtxLmVhY2godGhpcy5vS2V5cyxmdW5jdGlvbihpLG4pe3EuZWFjaChuLGZ1bmN0aW9uKGksayl7aWYoayBpbiBjKXtDPXRydWU7cmV0dXJuIGZhbHNlfX0pO2lmKEMpcmV0dXJuIGZhbHNlfSl9fWlmKGZ8fEMpe3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlO3RoaXMuX2ZpcmVDaGFuZ2UoKX19O08ucHJvdG90eXBlLl9nZXROYXZQYXRoPWZ1bmN0aW9uKHApe3ZhciBhPXRoaXMub01vZGVsLnJlc29sdmUocCx0aGlzLmdldENvbnRleHQoKSk7aWYoIWEpe3JldHVybn12YXIgUD1hLnNwbGl0KCIvIiksZT1QW1AubGVuZ3RoLTFdLG47dmFyIGM9ZS5zcGxpdCgiKCIpWzBdO2lmKGMmJnRoaXMub05hdmlnYXRpb25QYXRoc1tjXSl7bj10aGlzLm9OYXZpZ2F0aW9uUGF0aHNbY119cmV0dXJuIG59O08ucHJvdG90eXBlLl9wcm9jZXNzT0RhdGFPYmplY3Q9ZnVuY3Rpb24obyxhLG4pe3ZhciBrPXRoaXMub01vZGVsLl9nZXRLZXkobyksYz10aGlzLm9Nb2RlbC5nZXRDb250ZXh0KCIvIitrKSxwPWMuZ2V0UGF0aCgpO3ZhciByPXRoaXMub01vZGVsLl9nZXRPYmplY3QobixjKTtpZihxLmlzQXJyYXkocikpe3RoaXMub0tleXNbcF09cjt0aGlzLm9MZW5ndGhzW3BdPXIubGVuZ3RoO3RoaXMub0ZpbmFsTGVuZ3Roc1twXT10cnVlfWVsc2UgaWYodHlwZW9mIHI9PT0ib2JqZWN0Iil7dGhpcy5vS2V5c1twXT1bcl07dGhpcy5vTGVuZ3Roc1twXT0wO3RoaXMub0ZpbmFsTGVuZ3Roc1twXT10cnVlfWVsc2V7aWYobiYmb1tuXS5fX2xpc3Qpe3RoaXMub0tleXNbcF09b1tuXS5fX2xpc3Q7dGhpcy5vTGVuZ3Roc1twXT10aGlzLm9LZXlzW3BdLmxlbmd0aDt0aGlzLm9GaW5hbExlbmd0aHNbcF09dHJ1ZX1lbHNle3RoaXMub0tleXNbYV09W107dGhpcy5vTGVuZ3Roc1thXT0wO3RoaXMub0ZpbmFsTGVuZ3Roc1thXT1mYWxzZX19fTtyZXR1cm4gT30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YVV0aWxzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhVXRpbHMnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvb2RhdGEvT0RhdGFVdGlscyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRmlsdGVyJywnc2FwL3VpL21vZGVsL1NvcnRlcicsJ3NhcC91aS9tb2RlbC9GaWx0ZXInLCdzYXAvdWkvY29yZS9mb3JtYXQvRGF0ZUZvcm1hdCddLGZ1bmN0aW9uKHEsTyxTLEYsRCl7InVzZSBzdHJpY3QiO3ZhciBhPWZ1bmN0aW9uKCl7fTthLmNyZWF0ZVNvcnRQYXJhbXM9ZnVuY3Rpb24ocyl7dmFyIGI7aWYoIXN8fHMubGVuZ3RoPT0wKXtyZXR1cm59Yj0iJG9yZGVyYnk9Ijtmb3IodmFyIGk9MDtpPHMubGVuZ3RoO2krKyl7dmFyIG89c1tpXTtpZihvIGluc3RhbmNlb2YgUyl7Yis9by5zUGF0aDtiKz1vLmJEZXNjZW5kaW5nPyIlMjBkZXNjIjoiJTIwYXNjIjtiKz0iLCJ9fWI9Yi5zbGljZSgwLC0xKTtyZXR1cm4gYn07YS5jcmVhdGVGaWx0ZXJQYXJhbXM9ZnVuY3Rpb24oZixtLGUpe3ZhciBzO2lmKCFmfHxmLmxlbmd0aD09MCl7cmV0dXJufXZhciBvPXt9LGI9MCxjLHM9IiRmaWx0ZXI9IixkPTAsdD10aGlzO3EuZWFjaChmLGZ1bmN0aW9uKGosZyl7aWYoZy5zUGF0aCl7Yz1vW2cuc1BhdGhdO2lmKCFjKXtjPW9bZy5zUGF0aF09W107YisrfX1lbHNle2M9b1siX19tdWx0aUZpbHRlciJdO2lmKCFjKXtjPW9bIl9fbXVsdGlGaWx0ZXIiXT1bXTtiKyt9fWMucHVzaChnKX0pO3EuZWFjaChvLGZ1bmN0aW9uKHAsYyl7aWYoYy5sZW5ndGg+MSl7cys9JygnfXEuZWFjaChjLGZ1bmN0aW9uKGksZyl7aWYoZyBpbnN0YW5jZW9mIE8pe2lmKGcuYVZhbHVlcy5sZW5ndGg+MSl7cys9JygnfXEuZWFjaChnLmFWYWx1ZXMsZnVuY3Rpb24oaSxoKXtpZihpPjApe2lmKGcuYkFORCl7cys9IiUyMGFuZCUyMCJ9ZWxzZXtzKz0iJTIwb3IlMjAifX1zPXQuX2NyZWF0ZUZpbHRlclNlZ21lbnQoZy5zUGF0aCxtLGUsaC5vcGVyYXRvcixoLnZhbHVlMSxoLnZhbHVlMixzKX0pO2lmKGcuYVZhbHVlcy5sZW5ndGg+MSl7cys9JyknfX1lbHNlIGlmKGcuX2JNdWx0aUZpbHRlcil7cys9dC5fcmVzb2x2ZU11bHRpRmlsdGVyKGcsbSxlKX1lbHNle3M9dC5fY3JlYXRlRmlsdGVyU2VnbWVudChnLnNQYXRoLG0sZSxnLnNPcGVyYXRvcixnLm9WYWx1ZTEsZy5vVmFsdWUyLHMpfWlmKGk8Yy5sZW5ndGgtMSl7cys9IiUyMG9yJTIwIn19KTtpZihjLmxlbmd0aD4xKXtzKz0nKSd9aWYoZDxiLTEpe3MrPSIlMjBhbmQlMjAifWQrK30pO3JldHVybiBzfTthLl9jcmVhdGVVcmxQYXJhbXNBcnJheT1mdW5jdGlvbihwKXt2YXIgdSx0PXEudHlwZShwKTtpZih0PT09ImFycmF5Iil7cmV0dXJuIHB9dT1bXTtpZih0PT09Im9iamVjdCIpe3UucHVzaChxLnNhcC5lbmNvZGVVUkxQYXJhbWV0ZXJzKHApKX1lbHNlIGlmKHQ9PT0ic3RyaW5nIil7dS5wdXNoKHApfXJldHVybiB1fTthLl9yZXNvbHZlTXVsdGlGaWx0ZXI9ZnVuY3Rpb24obSxNLGUpe3ZhciB0PXRoaXMsZj1tLmFGaWx0ZXJzLHM9IiI7aWYoZil7cys9IigiO3EuZWFjaChmLGZ1bmN0aW9uKGksbyl7dmFyIGw9ZmFsc2U7aWYoby5fYk11bHRpRmlsdGVyKXtzKz10Ll9yZXNvbHZlTXVsdGlGaWx0ZXIobyxNLGUpfWVsc2UgaWYoby5zUGF0aCl7cys9dC5fY3JlYXRlRmlsdGVyU2VnbWVudChvLnNQYXRoLE0sZSxvLnNPcGVyYXRvcixvLm9WYWx1ZTEsby5vVmFsdWUyLCIiKX1pZihpPChmLmxlbmd0aC0xKSl7aWYobS5iQW5kKXtzKz0iJTIwYW5kJTIwIn1lbHNle3MrPSIlMjBvciUyMCJ9fX0pO3MrPSIpIn1yZXR1cm4gc307YS5fY3JlYXRlRmlsdGVyU2VnbWVudD1mdW5jdGlvbihwLG0sZSxvLHYsVixmKXt2YXIgUCx0O2lmKGUpe1A9bS5fZ2V0UHJvcGVydHlNZXRhZGF0YShlLHApO3Q9UCYmUC50eXBlO31pZih0KXt2PXRoaXMuZm9ybWF0VmFsdWUodix0KTtWPShWIT1udWxsKT90aGlzLmZvcm1hdFZhbHVlKFYsdCk6bnVsbH1lbHNle31pZih2KXt2PXEuc2FwLmVuY29kZVVSTChTdHJpbmcodikpfWlmKFYpe1Y9cS5zYXAuZW5jb2RlVVJMKFN0cmluZyhWKSl9c3dpdGNoKG8pe2Nhc2UiRVEiOmNhc2UiTkUiOmNhc2UiR1QiOmNhc2UiR0UiOmNhc2UiTFQiOmNhc2UiTEUiOmYrPXArIiUyMCIrby50b0xvd2VyQ2FzZSgpKyIlMjAiK3Y7YnJlYWs7Y2FzZSJCVCI6Zis9IigiK3ArIiUyMGdlJTIwIit2KyIlMjBhbmQlMjAiK3ArIiUyMGxlJTIwIitWKyIpIjticmVhaztjYXNlIkNvbnRhaW5zIjpmKz0ic3Vic3RyaW5nb2YoIit2KyIsIitwKyIpIjticmVhaztjYXNlIlN0YXJ0c1dpdGgiOmYrPSJzdGFydHN3aXRoKCIrcCsiLCIrdisiKSI7YnJlYWs7Y2FzZSJFbmRzV2l0aCI6Zis9ImVuZHN3aXRoKCIrcCsiLCIrdisiKSI7YnJlYWs7ZGVmYXVsdDpmKz0idHJ1ZSJ9cmV0dXJuIGZ9O2EuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odix0KXtpZighdGhpcy5vRGF0ZVRpbWVGb3JtYXQpe3RoaXMub0RhdGVUaW1lRm9ybWF0PUQuZ2V0RGF0ZUluc3RhbmNlKHtwYXR0ZXJuOiInZGF0ZXRpbWUnJyd5eXl5LU1NLWRkJ1QnSEg6bW06c3MnJyJ9KTt0aGlzLm9EYXRlVGltZU9mZnNldEZvcm1hdD1ELmdldERhdGVJbnN0YW5jZSh7cGF0dGVybjoiJ2RhdGV0aW1lb2Zmc2V0JycneXl5eS1NTS1kZCdUJ0hIOm1tOnNzJ1onJycifSk7dGhpcy5vVGltZUZvcm1hdD1ELmdldFRpbWVJbnN0YW5jZSh7cGF0dGVybjoiJ3RpbWUnJydISDptbTpzcycnIn0pfWlmKHY9PT1udWxsfHx2PT09dW5kZWZpbmVkKXtyZXR1cm4ibnVsbCJ9dmFyIFY7c3dpdGNoKHQpe2Nhc2UiRWRtLlN0cmluZyI6Vj0iJyIrU3RyaW5nKHYpLnJlcGxhY2UoLycvZywiJyciKSsiJyI7YnJlYWs7Y2FzZSJFZG0uVGltZSI6Vj0idGltZSciK3YrIiciO2JyZWFrO2Nhc2UiRWRtLkRhdGVUaW1lIjpWPXRoaXMub0RhdGVUaW1lRm9ybWF0LmZvcm1hdChuZXcgRGF0ZSh2KSx0cnVlKTticmVhaztjYXNlIkVkbS5EYXRlVGltZU9mZnNldCI6Vj10aGlzLm9EYXRlVGltZU9mZnNldEZvcm1hdC5mb3JtYXQobmV3IERhdGUodiksdHJ1ZSk7YnJlYWs7Y2FzZSJFZG0uR3VpZCI6Vj0iZ3VpZCciK3YrIiciO2JyZWFrO2Nhc2UiRWRtLkRlY2ltYWwiOlY9disiTSI7YnJlYWs7Y2FzZSJFZG0uSW50NjQiOlY9disiTCI7YnJlYWs7Y2FzZSJFZG0uU2luZ2xlIjpWPXYrImYiO2JyZWFrO2Nhc2UiRWRtLkJpbmFyeSI6Vj0iYmluYXJ5JyIrdisiJyI7YnJlYWs7ZGVmYXVsdDpWPW5ldyBTdHJpbmcodik7YnJlYWt9cmV0dXJuIFZ9O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnR5cGUuQm9vbGVhbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC50eXBlLkJvb2xlYW4nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvdHlwZS9Cb29sZWFuIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvZm9ybWF0L051bWJlckZvcm1hdCcsJ3NhcC91aS9tb2RlbC9TaW1wbGVUeXBlJ10sZnVuY3Rpb24ocSxOLFMpeyJ1c2Ugc3RyaWN0Ijt2YXIgQj1TLmV4dGVuZCgic2FwLnVpLm1vZGVsLnR5cGUuQm9vbGVhbiIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7Uy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zTmFtZT0iQm9vbGVhbiJ9fSk7Qi5wcm90b3R5cGUuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odixpKXtpZih2PT11bmRlZmluZWR8fHY9PW51bGwpe3JldHVybiBudWxsfXN3aXRjaChpKXtjYXNlImJvb2xlYW4iOnJldHVybiB2O2Nhc2Uic3RyaW5nIjpyZXR1cm4gdi50b1N0cmluZygpO2Nhc2UiaW50IjpjYXNlImZsb2F0IjpkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBmb3JtYXQgQm9vbGVhbiB0byAiK2kpfX07Qi5wcm90b3R5cGUucGFyc2VWYWx1ZT1mdW5jdGlvbih2LGkpe3ZhciByO3N3aXRjaChpKXtjYXNlImJvb2xlYW4iOnJldHVybiB2O2Nhc2Uic3RyaW5nIjppZih2LnRvTG93ZXJDYXNlKCk9PSJ0cnVlInx8dj09IlgiKXtyZXR1cm4gdHJ1ZX1pZih2LnRvTG93ZXJDYXNlKCk9PSJmYWxzZSJ8fHY9PSIiKXtyZXR1cm4gZmFsc2V9dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gcGFyc2UgQm9vbGVhbiBmcm9tICIraSk7Y2FzZSJpbnQiOmNhc2UiZmxvYXQiOmRlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gcGFyc2UgQm9vbGVhbiBmcm9tICIraSl9fTtCLnByb3RvdHlwZS52YWxpZGF0ZVZhbHVlPWZ1bmN0aW9uKHYpe307cmV0dXJuIEJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwudHlwZS5EYXRlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnR5cGUuRGF0ZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC90eXBlL0RhdGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9mb3JtYXQvRGF0ZUZvcm1hdCcsJ3NhcC91aS9tb2RlbC9TaW1wbGVUeXBlJ10sZnVuY3Rpb24ocSxELFMpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1TLmV4dGVuZCgic2FwLnVpLm1vZGVsLnR5cGUuRGF0ZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7Uy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zTmFtZT0iRGF0ZSJ9fSk7YS5wcm90b3R5cGUuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odixpKXtzd2l0Y2goaSl7Y2FzZSJzdHJpbmciOmlmKHY9PW51bGwpe3JldHVybiIifWlmKHRoaXMub0lucHV0Rm9ybWF0KXtpZih0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZS5wYXR0ZXJuPT0idGltZXN0YW1wIil7aWYodHlwZW9mKHYpIT0ibnVtYmVyIil7aWYoaXNOYU4odikpe3Rocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKCJDYW5ub3QgZm9ybWF0IGRhdGU6ICIrdisiIGlzIG5vdCBhIHZhbGlkIFRpbWVzdGFtcCIpfWVsc2V7dj1wYXJzZUludCh2LDEwKX19dj1uZXcgRGF0ZSh2KX1lbHNle2lmKHY9PSIiKXtyZXR1cm4iIn12PXRoaXMub0lucHV0Rm9ybWF0LnBhcnNlKHYpO2lmKHY9PW51bGwpe3Rocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKCJDYW5ub3QgZm9ybWF0IGRhdGU6ICIrdisiIGhhcyB0aGUgd3JvbmcgZm9ybWF0Iil9fX1yZXR1cm4gdGhpcy5vT3V0cHV0Rm9ybWF0LmZvcm1hdCh2KTtkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBmb3JtYXQgRGF0ZSB0byAiK2kpfX07YS5wcm90b3R5cGUucGFyc2VWYWx1ZT1mdW5jdGlvbih2LGkpe3ZhciByO3N3aXRjaChpKXtjYXNlInN0cmluZyI6aWYodj09PSIiKXtyZXR1cm4gbnVsbH12YXIgcj10aGlzLm9PdXRwdXRGb3JtYXQucGFyc2Uodik7aWYoIXIpe3Rocm93IG5ldyBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24odisiIGlzIG5vdCBhIHZhbGlkIERhdGUgdmFsdWUiKX1pZih0aGlzLm9JbnB1dEZvcm1hdCl7aWYodGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2UucGF0dGVybj09InRpbWVzdGFtcCIpe3I9ci5nZXRUaW1lKCl9ZWxzZXtyPXRoaXMub0lucHV0Rm9ybWF0LmZvcm1hdChyKX19cmV0dXJuIHI7ZGVmYXVsdDp0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBwYXJzZSBEYXRlIGZyb20gIitpKX19O2EucHJvdG90eXBlLnZhbGlkYXRlVmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5vQ29uc3RyYWludHMpe3ZhciBWPVtdLGk9dGhpcy5vSW5wdXRGb3JtYXQ7aWYoaSYmdGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2UucGF0dGVybiE9InRpbWVzdGFtcCIpe3Y9aS5wYXJzZSh2KX1xLmVhY2godGhpcy5vQ29uc3RyYWludHMsZnVuY3Rpb24obixjKXtpZihpKXtjPWkucGFyc2UoYyl9c3dpdGNoKG4pe2Nhc2UibWluaW11bSI6aWYodjxjKXtWLnB1c2goIm1pbmltdW0iKX1icmVhaztjYXNlIm1heGltdW0iOmlmKHY+Yyl7Vi5wdXNoKCJtYXhpbXVtIil9fX0pO2lmKFYubGVuZ3RoPjApe3Rocm93IG5ldyBzYXAudWkubW9kZWwuVmFsaWRhdGVFeGNlcHRpb24oIlZhbGlkYXRpb24gb2YgdHlwZSBjb25zdHJhaW50cyBmYWlsZWQiLFYpfX19O2EucHJvdG90eXBlLnNldEZvcm1hdE9wdGlvbnM9ZnVuY3Rpb24oZil7dGhpcy5vRm9ybWF0T3B0aW9ucz1mO3RoaXMuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSgpfTthLnByb3RvdHlwZS5nZXRPdXRwdXRQYXR0ZXJuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub091dHB1dEZvcm1hdC5vRm9ybWF0T3B0aW9ucy5wYXR0ZXJufTthLnByb3RvdHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5vT3V0cHV0Rm9ybWF0PUQuZ2V0SW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucyk7aWYodGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2Upe3RoaXMub0lucHV0Rm9ybWF0PUQuZ2V0SW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2UpfX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwudHlwZS5EYXRlVGltZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC50eXBlLkRhdGVUaW1lJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3R5cGUvRGF0ZVRpbWUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0RhdGUnXSxmdW5jdGlvbihxLEQpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1ELmV4dGVuZCgic2FwLnVpLm1vZGVsLnR5cGUuRGF0ZVRpbWUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc05hbWU9IkRhdGVUaW1lIn19KTthLnByb3RvdHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5vT3V0cHV0Rm9ybWF0PXNhcC51aS5jb3JlLmZvcm1hdC5EYXRlRm9ybWF0LmdldERhdGVUaW1lSW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucyk7aWYodGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2Upe3RoaXMub0lucHV0Rm9ybWF0PXNhcC51aS5jb3JlLmZvcm1hdC5EYXRlRm9ybWF0LmdldERhdGVUaW1lSW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2UpfX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwudHlwZS5GbG9hdCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC50eXBlLkZsb2F0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3R5cGUvRmxvYXQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9mb3JtYXQvTnVtYmVyRm9ybWF0Jywnc2FwL3VpL21vZGVsL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLE4sUyl7InVzZSBzdHJpY3QiO3ZhciBGPVMuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5GbG9hdCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7Uy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zTmFtZT0iRmxvYXQifX0pO0YucHJvdG90eXBlLmZvcm1hdFZhbHVlPWZ1bmN0aW9uKHYsaSl7aWYodj09dW5kZWZpbmVkfHx2PT1udWxsKXtyZXR1cm4gbnVsbH1zd2l0Y2goaSl7Y2FzZSJzdHJpbmciOnJldHVybiB0aGlzLm9Gb3JtYXQuZm9ybWF0KHYpO2Nhc2UiaW50IjpyZXR1cm4gTWF0aC5mbG9vcih2KTtjYXNlImZsb2F0IjpyZXR1cm4gdjtkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBmb3JtYXQgRmxvYXQgdG8gIitpKX19O0YucHJvdG90eXBlLnBhcnNlVmFsdWU9ZnVuY3Rpb24odixpKXt2YXIgcjtzd2l0Y2goaSl7Y2FzZSJzdHJpbmciOnI9dGhpcy5vRm9ybWF0LnBhcnNlKHYpO2lmKGlzTmFOKHIpKXt0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKHYrIiBpcyBub3QgYSB2YWxpZCBGbG9hdCB2YWx1ZSIpfXJldHVybiByO2Nhc2UiaW50IjpjYXNlImZsb2F0IjpyZXR1cm4gdjtkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIHBhcnNlIEZsb2F0IGZyb20gIitpKX19O0YucHJvdG90eXBlLnZhbGlkYXRlVmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5vQ29uc3RyYWludHMpe3ZhciBWPVtdO3EuZWFjaCh0aGlzLm9Db25zdHJhaW50cyxmdW5jdGlvbihuLGMpe3N3aXRjaChuKXtjYXNlIm1pbmltdW0iOmlmKHY8Yyl7Vi5wdXNoKCJtaW5pbXVtIil9YnJlYWs7Y2FzZSJtYXhpbXVtIjppZih2PmMpe1YucHVzaCgibWF4aW11bSIpfX19KTtpZihWLmxlbmd0aD4wKXt0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlZhbGlkYXRlRXhjZXB0aW9uKCJWYWxpZGF0aW9uIG9mIHR5cGUgY29uc3RyYWludHMgZmFpbGVkIixWKX19fTtGLnByb3RvdHlwZS5zZXRGb3JtYXRPcHRpb25zPWZ1bmN0aW9uKGYpe3RoaXMub0Zvcm1hdE9wdGlvbnM9Zjt0aGlzLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2UoKX07Ri5wcm90b3R5cGUuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZT1mdW5jdGlvbigpe3RoaXMub0Zvcm1hdD1OLmdldEZsb2F0SW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucyl9O3JldHVybiBGfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnR5cGUuSW50ZWdlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC50eXBlLkludGVnZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvdHlwZS9JbnRlZ2VyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvZm9ybWF0L051bWJlckZvcm1hdCcsJ3NhcC91aS9tb2RlbC9TaW1wbGVUeXBlJ10sZnVuY3Rpb24ocSxOLFMpeyJ1c2Ugc3RyaWN0Ijt2YXIgST1TLmV4dGVuZCgic2FwLnVpLm1vZGVsLnR5cGUuSW50ZWdlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7Uy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zTmFtZT0iSW50ZWdlciJ9fSk7SS5wcm90b3R5cGUuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odixpKXtpZih2PT11bmRlZmluZWR8fHY9PW51bGwpe3JldHVybiBudWxsfXN3aXRjaChpKXtjYXNlInN0cmluZyI6cmV0dXJuIHRoaXMub0Zvcm1hdC5mb3JtYXQodik7Y2FzZSJpbnQiOmNhc2UiZmxvYXQiOnJldHVybiB2O2RlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIGZvcm1hdCBJbnRlZ2VyIHRvICIraSl9fTtJLnByb3RvdHlwZS5wYXJzZVZhbHVlPWZ1bmN0aW9uKHYsaSl7dmFyIHI7c3dpdGNoKGkpe2Nhc2UiZmxvYXQiOmNhc2Uic3RyaW5nIjpyPXRoaXMub0Zvcm1hdC5wYXJzZShTdHJpbmcodikpO2lmKGlzTmFOKHIpKXt0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKHYrIiBpcyBub3QgYSB2YWxpZCBJbnRlZ2VyIHZhbHVlIil9cmV0dXJuIHI7Y2FzZSJpbnQiOnJldHVybiB2O2RlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gcGFyc2UgSW50ZWdlciBmcm9tICIraSl9fTtJLnByb3RvdHlwZS52YWxpZGF0ZVZhbHVlPWZ1bmN0aW9uKHYpe2lmKHRoaXMub0NvbnN0cmFpbnRzKXt2YXIgVj1bXTtxLmVhY2godGhpcy5vQ29uc3RyYWludHMsZnVuY3Rpb24obixjKXtzd2l0Y2gobil7Y2FzZSJtaW5pbXVtIjppZih2PGMpe1YucHVzaCgibWluaW11bSIpfWJyZWFrO2Nhc2UibWF4aW11bSI6aWYodj5jKXtWLnB1c2goIm1heGltdW0iKX19fSk7aWYoVi5sZW5ndGg+MCl7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5WYWxpZGF0ZUV4Y2VwdGlvbigiVmFsaWRhdGlvbiBvZiB0eXBlIGNvbnN0cmFpbnRzIGZhaWxlZCIsVil9fX07SS5wcm90b3R5cGUuc2V0Rm9ybWF0T3B0aW9ucz1mdW5jdGlvbihmKXt0aGlzLm9Gb3JtYXRPcHRpb25zPWY7dGhpcy5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlKCl9O0kucHJvdG90eXBlLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLm9Gb3JtYXQ9Ti5nZXRJbnRlZ2VySW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucyl9O3JldHVybiBJfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnR5cGUuU3RyaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnR5cGUuU3RyaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3R5cGUvU3RyaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvZm9ybWF0L051bWJlckZvcm1hdCcsJ3NhcC91aS9tb2RlbC9TaW1wbGVUeXBlJ10sZnVuY3Rpb24ocSxOLFMpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1TLmV4dGVuZCgic2FwLnVpLm1vZGVsLnR5cGUuU3RyaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJTdHJpbmciO2lmKHRoaXMub0NvbnN0cmFpbnRzLnNlYXJjaCYmdHlwZW9mIHRoaXMub0NvbnN0cmFpbnRzLnNlYXJjaD09InN0cmluZyIpe3RoaXMub0NvbnN0cmFpbnRzLnNlYXJjaD1uZXcgUmVnRXhwKHRoaXMub0NvbnN0cmFpbnRzLnNlYXJjaCl9fX0pO2EucHJvdG90eXBlLmZvcm1hdFZhbHVlPWZ1bmN0aW9uKHYsaSl7aWYodj09dW5kZWZpbmVkfHx2PT1udWxsKXtyZXR1cm4gbnVsbH1zd2l0Y2goaSl7Y2FzZSJzdHJpbmciOnJldHVybiB2O2Nhc2UiaW50Ijp2YXIgcj1wYXJzZUludCh2LDEwKTtpZihpc05hTihyKSl7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24odisiIGlzIG5vdCBhIHZhbGlkIGludCB2YWx1ZSIpfXJldHVybiByO2Nhc2UiZmxvYXQiOnZhciBSPXBhcnNlRmxvYXQodik7aWYoaXNOYU4oUikpe3Rocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKHYrIiBpcyBub3QgYSB2YWxpZCBmbG9hdCB2YWx1ZSIpfXJldHVybiBSO2Nhc2UiYm9vbGVhbiI6aWYodi50b0xvd2VyQ2FzZSgpPT0idHJ1ZSJ8fHY9PSJYIil7cmV0dXJuIHRydWV9aWYodi50b0xvd2VyQ2FzZSgpPT0iZmFsc2UifHx2PT0iIil7cmV0dXJuIGZhbHNlfXRocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKHYrIiBpcyBub3QgYSB2YWxpZCBib29sZWFuIHZhbHVlIik7ZGVmYXVsdDp0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLkZvcm1hdEV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gZm9ybWF0IFN0cmluZyB0byAiK2kpfX07YS5wcm90b3R5cGUucGFyc2VWYWx1ZT1mdW5jdGlvbih2LGkpe3ZhciByO3N3aXRjaChpKXtjYXNlInN0cmluZyI6cmV0dXJuIHY7Y2FzZSJib29sZWFuIjpjYXNlImludCI6Y2FzZSJmbG9hdCI6cmV0dXJuIHYudG9TdHJpbmcoKTtkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIHBhcnNlIFN0cmluZyBmcm9tICIraSl9fTthLnByb3RvdHlwZS52YWxpZGF0ZVZhbHVlPWZ1bmN0aW9uKHYpe2lmKHRoaXMub0NvbnN0cmFpbnRzKXt2YXIgVj1bXTtxLmVhY2godGhpcy5vQ29uc3RyYWludHMsZnVuY3Rpb24obixjKXtzd2l0Y2gobil7Y2FzZSJtYXhMZW5ndGgiOmlmKHYubGVuZ3RoPmMpe1YucHVzaCgibWF4TGVuZ3RoIil9YnJlYWs7Y2FzZSJtaW5MZW5ndGgiOmlmKHYubGVuZ3RoPGMpe1YucHVzaCgibWluTGVuZ3RoIil9YnJlYWs7Y2FzZSJzdGFydHNXaXRoIjppZighcS5zYXAuc3RhcnRzV2l0aCh2LGMpKXtWLnB1c2goInN0YXJ0c1dpdGgiKX1icmVhaztjYXNlInN0YXJ0c1dpdGhJZ25vcmVDYXNlIjppZighcS5zYXAuc3RhcnRzV2l0aElnbm9yZUNhc2UodixjKSl7Vi5wdXNoKCJzdGFydHNXaXRoSWdub3JlQ2FzZSIpfWJyZWFrO2Nhc2UiZW5kc1dpdGgiOmlmKCFxLnNhcC5lbmRzV2l0aCh2LGMpKXtWLnB1c2goImVuZHNXaXRoIil9YnJlYWs7Y2FzZSJlbmRzV2l0aElnbm9yZUNhc2UiOmlmKCFxLnNhcC5lbmRzV2l0aElnbm9yZUNhc2UodixjKSl7Vi5wdXNoKCJlbmRzV2l0aElnbm9yZUNhc2UiKX1icmVhaztjYXNlImNvbnRhaW5zIjppZih2LmluZGV4T2YoYyk9PS0xKXtWLnB1c2goImNvbnRhaW5zIil9YnJlYWs7Y2FzZSJlcXVhbHMiOmlmKHYhPWMpe1YucHVzaCgiZXF1YWxzIil9YnJlYWs7Y2FzZSJzZWFyY2giOmlmKHYuc2VhcmNoKGMpPT0tMSl7Vi5wdXNoKCJzZWFyY2giKX1icmVha319KTtpZihWLmxlbmd0aD4wKXt0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlZhbGlkYXRlRXhjZXB0aW9uKCJWYWxpZGF0aW9uIG9mIHR5cGUgY29uc3RyYWludHMgZmFpbGVkIixWKX19fTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC50eXBlLlRpbWUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwudHlwZS5UaW1lJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3R5cGUvVGltZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRGF0ZSddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiO3ZhciBUPUQuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5UaW1lIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtELmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJUaW1lIn19KTtULnByb3RvdHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5vT3V0cHV0Rm9ybWF0PXNhcC51aS5jb3JlLmZvcm1hdC5EYXRlRm9ybWF0LmdldFRpbWVJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zKTtpZih0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZSl7dGhpcy5vSW5wdXRGb3JtYXQ9c2FwLnVpLmNvcmUuZm9ybWF0LkRhdGVGb3JtYXQuZ2V0VGltZUluc3RhbmNlKHRoaXMub0Zvcm1hdE9wdGlvbnMuc291cmNlKX19O3JldHVybiBUfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC51aScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAudWknKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLnVpIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0dsb2JhbCddLGZ1bmN0aW9uKHEsRyl7InVzZSBzdHJpY3QiO2lmKCFxLnNhcCl7dGhyb3ciSW5pdGlhbGlzYXRpb24gb2YgalF1ZXJ5LnNhcC51aSBmYWlsZWQuIGpRdWVyeS5zYXAgcGx1Z2luIHJlcXVpcmVkISJ9aWYoIXdpbmRvdy5zYXB8fCF3aW5kb3cuc2FwLnVpKXtxLnNhcC5mYXRhbCgiSW5pdGlhbGlzYXRpb24gb2YgalF1ZXJ5LnNhcC51aSBmYWlsZWQuIEdsb2JhbCBTQVAgVUkgbmFtZXNwYWNlIHJlcXVpcmVkISIpfWlmKHEuc2FwLnVpKXtyZXR1cm59ZnVuY3Rpb24gdShpKXtyZXR1cm4gc2FwLnVpLmdldENvcmUoKS5nZXRVSUFyZWEodGhpcy5pZCkhPW51bGx9ZnVuY3Rpb24gZihpLG8pe3JldHVybiBzYXAudWkuZ2V0Q29yZSgpLmdldFVJQXJlYSh0aGlzLmlkKX1mdW5jdGlvbiBhKGMsaSl7cmV0dXJuIGMuZ2V0VUlBcmVhKCkuZ2V0SW50ZXJmYWNlKCl9cS5mbi5yb290PWZ1bmN0aW9uKHIpe3ZhciB0O2lmKHIpe3NhcC51aS5nZXRDb3JlKCkuc2V0Um9vdCh0aGlzLmdldCgwKSxyKTtyZXR1cm4gdGhpc312YXIgYz10aGlzLmNvbnRyb2woKTtpZihjLmxlbmd0aD4wKXtyZXR1cm4gcS5tYXAoYyxhKX12YXIgVT10aGlzLnVpYXJlYSgpO2lmKFUubGVuZ3RoPjApe3JldHVybiBVfXRoaXMuZWFjaChmdW5jdGlvbihpKXtzYXAudWkuZ2V0Q29yZSgpLmNyZWF0ZVVJQXJlYSh0aGlzKX0pO3JldHVybiB0aGlzfTtxLmZuLnVpYXJlYT1mdW5jdGlvbihpKXt2YXIgVT10aGlzLnNsaWNlKCJbaWRdIikuZmlsdGVyKHUpLm1hcChmKS5nZXQoKTtyZXR1cm4gdHlwZW9mKGkpPT09Im51bWJlciI/VVtpXTpVfTtmdW5jdGlvbiBiKCl7aWYoIXRoaXN8fCF0aGlzLm5vZGVUeXBlfHx0aGlzLm5vZGVUeXBlPT09OSl7cmV0dXJuIG51bGx9dHJ5e3ZhciBpPXEodGhpcykuY2xvc2VzdCgiW2RhdGEtc2FwLXVpXSIpLmF0dHIoImlkIik7cmV0dXJuIGk/c2FwLnVpLmdldENvcmUoKS5ieUlkKGkpOm51bGx9Y2F0Y2goZSl7cmV0dXJuIG51bGx9fXEuZm4uY29udHJvbD1mdW5jdGlvbihpKXt2YXIgYz10aGlzLm1hcChiKTtpZihpPT09dW5kZWZpbmVkfHxpc05hTihpKSl7cmV0dXJuIGMuZ2V0KCl9ZWxzZXtyZXR1cm4gYy5nZXQoaSl9fTtxLmZuLnNhcHVpPWZ1bmN0aW9uKGMsaSxDKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG89bnVsbDtpZih0aGlzKXtpZihjLmluZGV4T2YoIi4iKT09LTEpe2M9InNhcC51aS5jb21tb25zLiIrY312YXIgZD1xLnNhcC5nZXRPYmplY3QoYyk7aWYoZCl7aWYodHlwZW9mIEM9PSdvYmplY3QnJiZ0eXBlb2YgQy5wcmVzcz09J2Z1bmN0aW9uJyl7Qy5wcmVzcz1xLnByb3h5KEMucHJlc3MsdGhpcyl9bz1uZXcoZCkoaSxDKTtvLnBsYWNlQXQodGhpcyl9fX0pfTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYXBwLkFwcGxpY2F0aW9uTWV0YWRhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYXBwLkFwcGxpY2F0aW9uTWV0YWRhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYXBwL0FwcGxpY2F0aW9uTWV0YWRhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9Db21wb25lbnRNZXRhZGF0YSddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBBPWZ1bmN0aW9uKGMsbyl7Qy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O0EucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChDLnByb3RvdHlwZSk7QS5wcmVwcm9jZXNzQ2xhc3NJbmZvPWZ1bmN0aW9uKGMpe2lmKGMmJnR5cGVvZiBjLm1ldGFkYXRhPT09InN0cmluZyIpe2MubWV0YWRhdGE9e19zcmM6Yy5tZXRhZGF0YX19cmV0dXJuIGN9O0EucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oYyl7dmFyIHM9Yy5tZXRhZGF0YTtDLnByb3RvdHlwZS5hcHBseVNldHRpbmdzLmNhbGwodGhpcyxjKTtpZihzLl9zcmMpe3Euc2FwLmxvZy53YXJuaW5nKCJUaGUgbWV0YWRhdGEgb2YgdGhlIGFwcGxpY2F0aW9uICIrdGhpcy5nZXROYW1lKCkrIiBpcyBsb2FkZWQgZnJvbSBmaWxlICIrcy5fc3JjKyIuIFRoaXMgaXMgYSBkZXNpZ24gdGltZSBmZWF0dXJlIGFuZCBub3QgZm9yIHByb2R1Y3RpdmUgdXNhZ2UhIik7dmFyIHA9dGhpcy5nZXROYW1lKCkucmVwbGFjZSgvXC5cdys/JC8sIiIpO3ZhciB1PXEuc2FwLmdldE1vZHVsZVBhdGgocCwiLyIrcy5fc3JjKTt2YXIgcj1xLnNhcC5zeW5jR2V0SlNPTih1KTtpZihyLnN1Y2Nlc3Mpe3EuZXh0ZW5kKHMsci5kYXRhKX1lbHNle3Euc2FwLmxvZy5lcnJvcigiRmFpbGVkIHRvIGxvYWQgYXBwbGljYXRpb24gbWV0YWRhdGEgZnJvbSBcIiIrcy5fc3JjKyJcIiEgUmVhc29uOiAiK3IuZXJyb3IpfX10aGlzLl9tUm9vdENvbXBvbmVudD1zLnJvb3RDb21wb25lbnR8fG51bGx9O0EucHJvdG90eXBlLmdldFJvb3RDb21wb25lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbVJvb3RDb21wb25lbnR9O3JldHVybiBBfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLkhUTUxWaWV3U2VyaWFsaXplcicpKXsKLyoKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5IVE1MVmlld1NlcmlhbGl6ZXInKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LnZrYmVhdXRpZnknKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL3NlcmlhbGl6ZXIvSFRNTFZpZXdTZXJpYWxpemVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlcicsJy4vZGVsZWdhdGUvSFRNTCcsJ3NhcC91aS90aGlyZHBhcnR5L3ZrYmVhdXRpZnknXSxmdW5jdGlvbihxLEUsSCx2KXsidXNlIHN0cmljdCI7dmFyIGE9RS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5IVE1MVmlld1NlcmlhbGl6ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihWLHcsZyxHKXtFLmFwcGx5KHRoaXMpO3RoaXMuX29WaWV3PVY7dGhpcy5fb1dpbmRvdz13O3RoaXMuX2ZuR2V0Q29udHJvbElkPWc7dGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lPUd9fSk7YS5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7dmFyIHM9ZnVuY3Rpb24oQyl7cmV0dXJuKEMgaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLm12Yy5WaWV3KX07dmFyIGM9bmV3IHNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5TZXJpYWxpemVyKHRoaXMuX29WaWV3LG5ldyBIKHRoaXMuX2ZuR2V0Q29udHJvbElkLHRoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZSksdHJ1ZSx0aGlzLl9vV2luZG93LHMpO3ZhciByPWMuc2VyaWFsaXplKCk7dmFyIFY9W107Vi5wdXNoKCc8dGVtcGxhdGUnKTtpZih0aGlzLl9vVmlldy5nZXRDb250cm9sbGVyTmFtZSYmdGhpcy5fb1ZpZXcuZ2V0Q29udHJvbGxlck5hbWUoKSl7Vi5wdXNoKCcgZGF0YS1jb250cm9sbGVyLW5hbWU9IicrdGhpcy5fb1ZpZXcuZ2V0Q29udHJvbGxlck5hbWUoKSsnIicpfVYucHVzaCgiID4iKTtWLnB1c2gocik7Vi5wdXNoKCI8L3RlbXBsYXRlPiIpO3JldHVybiB2a2JlYXV0aWZ5LnhtbChWLmpvaW4oIiIpKX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuWE1MVmlld1NlcmlhbGl6ZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuWE1MVmlld1NlcmlhbGl6ZXInKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LnZrYmVhdXRpZnknKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL3NlcmlhbGl6ZXIvWE1MVmlld1NlcmlhbGl6ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnLi9kZWxlZ2F0ZS9YTUwnLCdzYXAvdWkvdGhpcmRwYXJ0eS92a2JlYXV0aWZ5J10sZnVuY3Rpb24ocSxFLFgsdil7InVzZSBzdHJpY3QiO3ZhciBhPUUuZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuWE1MVmlld1NlcmlhbGl6ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihWLHcsZCxnLEcpe0UuYXBwbHkodGhpcyk7dGhpcy5fb1ZpZXc9Vjt0aGlzLl9vV2luZG93PXc7dGhpcy5fc0RlZmF1bHROYW1lc3BhY2U9ZDt0aGlzLl9mbkdldENvbnRyb2xJZD1nO3RoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZT1HfX0pO2EucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3ZhciBwPVtdO3ZhciBtPWZ1bmN0aW9uKEMsUCl7aWYoIVApe3ZhciB0PShDKT9DLmNvbnN0cnVjdG9yOiI/Ijt0aHJvdyBFcnJvcigiQ29udHJvbHMgd2l0aCBlbXB0eSBwYWNrYWdlIGFyZSBjdXJyZW50bHkgbm90IHN1cHBvcnRlZCBieSB0aGUgWE1MIHNlcmlhbGl6ZXI6ICIrdCl9aWYocS5pbkFycmF5KFAscCk9PT0tMSl7cC5wdXNoKFApfX07dmFyIHM9ZnVuY3Rpb24oQyl7cmV0dXJuKEMgaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLm12Yy5WaWV3KX07dmFyIGM9bmV3IHNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5TZXJpYWxpemVyKHRoaXMuX29WaWV3LG5ldyBYKHRoaXMuX3NEZWZhdWx0TmFtZXNwYWNlLHRoaXMuX2ZuR2V0Q29udHJvbElkLHRoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZSxtKSx0cnVlLHRoaXMuX29XaW5kb3cscyk7dmFyIHI9Yy5zZXJpYWxpemUoKTt2YXIgVj1bXTtWLnB1c2goJzxzYXAudWkuY29yZS5tdmM6VmlldycpO2lmKHRoaXMuX29WaWV3LmdldENvbnRyb2xsZXJOYW1lJiZ0aGlzLl9vVmlldy5nZXRDb250cm9sbGVyTmFtZSgpKXtWLnB1c2goJyBjb250cm9sbGVyTmFtZT0iJyt0aGlzLl9vVmlldy5nZXRDb250cm9sbGVyTmFtZSgpKyciJyl9aWYocS5pbkFycmF5KCdzYXAudWkuY29yZScscCk9PT0tMSl7cC5wdXNoKCdzYXAudWkuY29yZScpfWZvcih2YXIgaT0wO2k8cC5sZW5ndGg7aSsrKXtpZih0aGlzLl9zRGVmYXVsdE5hbWVzcGFjZSYmdGhpcy5fc0RlZmF1bHROYW1lc3BhY2U9PT1wW2ldKXtWLnB1c2goJyB4bWxucz0iJytwW2ldKyciJyl9ZWxzZXtWLnB1c2goJyB4bWxuczonK3BbaV0rJz0iJytwW2ldKyciJyl9fVYucHVzaCgiID4iKTtWLnB1c2gocik7Vi5wdXNoKCI8L3NhcC51aS5jb3JlLm12YzpWaWV3PiIpO3JldHVybiB2a2JlYXV0aWZ5LnhtbChWLmpvaW4oIiIpKX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS53cy5TYXBQY3BXZWJTb2NrZXQnKSl7Ci8qIQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUud3MuU2FwUGNwV2ViU29ja2V0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvd3MvU2FwUGNwV2ViU29ja2V0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9XZWJTb2NrZXQnXSxmdW5jdGlvbihxLFcpeyJ1c2Ugc3RyaWN0Ijt2YXIgUz1XLmV4dGVuZCgic2FwLnVpLmNvcmUud3MuU2FwUGNwV2ViU29ja2V0Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24odSxwKXtXLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KTtTLlNVUFBPUlRFRF9QUk9UT0NPTFM9e3YxMDoidjEwLnBjcC5zYXAuY29tIn07Uy5fZGVzZXJpYWxpemVSZWdleHA9LygoPzpbXjpcXF18KD86XFwuKSkrKTooKD86W146XFxcbl18KD86XFwuKSkqKS87Uy5fU0VQQVJBVE9SPSJcblxuIjtTLl9NRVNTQUdFPSJNRVNTQUdFIjtTLnByb3RvdHlwZS5fb25vcGVuPWZ1bmN0aW9uKCl7dmFyIHM9ZmFsc2U7aWYodGhpcy5nZXRQcm90b2NvbCgpPT09IiIpe3M9dHJ1ZX1lbHNle2Zvcih2YXIgcCBpbiBTLlNVUFBPUlRFRF9QUk9UT0NPTFMpe2lmKFMuU1VQUE9SVEVEX1BST1RPQ09MUy5oYXNPd25Qcm9wZXJ0eShwKSl7aWYoUy5TVVBQT1JURURfUFJPVE9DT0xTW3BdPT09dGhpcy5nZXRQcm90b2NvbCgpKXtzPXRydWU7YnJlYWt9fX19aWYocyl7dGhpcy5maXJlT3BlbigpfWVsc2V7cS5zYXAubG9nLmVycm9yKCJVbnN1cHBvcnRlZCBwcm90b2NvbCAnIit0aGlzLmdldFByb3RvY29sKCkrIicgc2VsZWN0ZWQgYnkgdGhlIHNlcnZlci4gIisiQ29ubmVjdGlvbiB3aWxsIGJlIGNsb3NlZC4iKTt0aGlzLmNsb3NlKCJVbnN1cHBvcnRlZCBwcm90b2NvbCBzZWxlY3RlZCBieSB0aGUgc2VydmVyIil9fTtTLnByb3RvdHlwZS5fb25tZXNzYWdlPWZ1bmN0aW9uKG0pe3ZhciBzPS0xLGU9e307aWYodHlwZW9mIG0uZGF0YT09PSJzdHJpbmciKXtzPW0uZGF0YS5pbmRleE9mKFMuX1NFUEFSQVRPUil9aWYocyE9PS0xKXtlLnBjcEZpZWxkcz10aGlzLl9leHRyYWN0UGNwRmllbGRzKG0uZGF0YS5zdWJzdHJpbmcoMCxzKSk7ZS5kYXRhPW0uZGF0YS5zdWJzdHIocytTLl9TRVBBUkFUT1IubGVuZ3RoKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJJbnZhbGlkIFBDUCBtZXNzYWdlIHJlY2VpdmVkOiAiK20uZGF0YSk7ZS5wY3BGaWVsZHM9e307ZS5kYXRhPW0uZGF0YX10aGlzLmZpcmVNZXNzYWdlKGUpfTtTLnByb3RvdHlwZS5fZXh0cmFjdFBjcEZpZWxkcz1mdW5jdGlvbihoKXt2YXIgZj1oLnNwbGl0KCJcbiIpLGw9W10scD17fTtmb3IodmFyIGk9MDtpPGYubGVuZ3RoO2krKyl7bD1mW2ldLm1hdGNoKFMuX2Rlc2VyaWFsaXplUmVnZXhwKTtpZihsJiZsLmxlbmd0aD09PTMpe3BbdGhpcy5fdW5lc2NhcGUobFsxXSldPXRoaXMuX3VuZXNjYXBlKGxbMl0pfX1yZXR1cm4gcH07Uy5wcm90b3R5cGUuX3VuZXNjYXBlPWZ1bmN0aW9uKGUpe3ZhciBwPWUuc3BsaXQoIlx1MDAwOCIpLHU9IiI7Zm9yKHZhciBpPTA7aTxwLmxlbmd0aDtpKyspe3BbaV09cFtpXS5yZXBsYWNlKC9cXFxcL2csIlx1MDAwOCIpLnJlcGxhY2UoL1xcOi9nLCc6JykucmVwbGFjZSgvXFxuL2csJ1xuJykucmVwbGFjZSgvXHUwMDA4L2csIlxcIil9dT1wLmpvaW4oIlx1MDAwOCIpO3JldHVybiB1fTtTLnByb3RvdHlwZS5fc2VyaWFsaXplUGNwRmllbGRzPWZ1bmN0aW9uKHAsbSxQKXt2YXIgcz0iIixmPSIiLGE9IiI7aWYobT09PSdzdHJpbmcnKXthPSd0ZXh0J31lbHNlIGlmKG09PT0nYmxvYid8fG09PT0nYXJyYXlidWZmZXInKXthPSdiaW5hcnknfWlmKHAmJnR5cGVvZiBwPT09J29iamVjdCcpe2ZvcihmIGluIHApe2lmKHAuaGFzT3duUHJvcGVydHkoZikmJmYuaW5kZXhPZigncGNwLScpIT09MCl7cys9dGhpcy5fZXNjYXBlKGYpKyI6Iit0aGlzLl9lc2NhcGUoU3RyaW5nKHBbZl0pKSsiXG4ifX19cmV0dXJuInBjcC1hY3Rpb246IitQKyJcbnBjcC1ib2R5LXR5cGU6IithKyJcbiIrcysiXG4ifTtTLnByb3RvdHlwZS5fZXNjYXBlPWZ1bmN0aW9uKHUpe3JldHVybiB1LnJlcGxhY2UoL1xcL2csJ1xcXFwnKS5yZXBsYWNlKC86L2csJ1xcOicpLnJlcGxhY2UoL1xuL2csJ1xcbicpfTtTLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKG0scCl7dmFyIE09dHlwZW9mIG0sUD0iIjtQPXRoaXMuX3NlcmlhbGl6ZVBjcEZpZWxkcyhwLE0sUy5fTUVTU0FHRSk7Vy5wcm90b3R5cGUuc2VuZC5jYWxsKHRoaXMsUCttKTtyZXR1cm4gdGhpc307cmV0dXJuIFN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQ2xpZW50Q29udGV4dEJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ2xpZW50Q29udGV4dEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ2xpZW50Q29udGV4dEJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0NvbnRleHRCaW5kaW5nJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIGE9Qy5leHRlbmQoInNhcC51aS5tb2RlbC5DbGllbnRDb250ZXh0QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLFAsZSl7Qy5jYWxsKHRoaXMsbSxwLGMsUCxlKTt2YXIgdD10aGlzO20uY3JlYXRlQmluZGluZ0NvbnRleHQocCxjLFAsZnVuY3Rpb24oYyl7dC5iSW5pdGlhbD1mYWxzZTt0Lm9FbGVtZW50Q29udGV4dD1jfSl9fSk7YS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihmKXt2YXIgdD10aGlzO3RoaXMub01vZGVsLmNyZWF0ZUJpbmRpbmdDb250ZXh0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCx0aGlzLm1QYXJhbWV0ZXJzLGZ1bmN0aW9uKGMpe2lmKHQub0VsZW1lbnRDb250ZXh0PT09YyYmIWYpe3Qub01vZGVsLmNoZWNrVXBkYXRlKHRydWUsYyl9ZWxzZXt0Lm9FbGVtZW50Q29udGV4dD1jO3QuX2ZpcmVDaGFuZ2UoKX19LHRydWUpfTthLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLm9Nb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQsdGhpcy5tUGFyYW1ldGVycyxmdW5jdGlvbihjKXt0Lm9FbGVtZW50Q29udGV4dD1jO3QuX2ZpcmVDaGFuZ2UoKX0sdHJ1ZSl9O2EucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7dmFyIHQ9dGhpcztpZih0aGlzLm9Db250ZXh0IT1jKXt0aGlzLm9Db250ZXh0PWM7dGhpcy5vTW9kZWwuY3JlYXRlQmluZGluZ0NvbnRleHQodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0LHRoaXMubVBhcmFtZXRlcnMsZnVuY3Rpb24oYyl7dC5vRWxlbWVudENvbnRleHQ9Yzt0Ll9maXJlQ2hhbmdlKCl9KX19O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkNsaWVudExpc3RCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkNsaWVudExpc3RCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0NsaWVudExpc3RCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9GaWx0ZXJUeXBlJywnLi9MaXN0QmluZGluZyddLGZ1bmN0aW9uKHEsRixMKXsidXNlIHN0cmljdCI7dmFyIEM9TC5leHRlbmQoInNhcC51aS5tb2RlbC5DbGllbnRMaXN0QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLHMsZixQKXtMLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnVwZGF0ZSgpfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldExlbmd0aCJdfX0pO0MucHJvdG90eXBlLl9nZXRDb250ZXh0cz1mdW5jdGlvbihzLGwpe2lmKCFzKXtzPTB9aWYoIWwpe2w9TWF0aC5taW4odGhpcy5pTGVuZ3RoLHRoaXMub01vZGVsLmlTaXplTGltaXQpfXZhciBlPU1hdGgubWluKHMrbCx0aGlzLmFJbmRpY2VzLmxlbmd0aCksYyxhPVtdLHA9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKHAmJiFxLnNhcC5lbmRzV2l0aChwLCIvIikpe3ArPSIvIn1mb3IodmFyIGk9cztpPGU7aSsrKXtjPXRoaXMub01vZGVsLmdldENvbnRleHQocCt0aGlzLmFJbmRpY2VzW2ldKTthLnB1c2goYyl9cmV0dXJuIGF9O0MucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7aWYodGhpcy5vQ29udGV4dCE9Yyl7dGhpcy5vQ29udGV4dD1jO2lmKHRoaXMuaXNSZWxhdGl2ZSgpKXt0aGlzLnVwZGF0ZSgpO3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNvbnRleHR9KX19fTtDLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pTGVuZ3RofTtDLnByb3RvdHlwZS5fZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYUluZGljZXMubGVuZ3RofTtDLnByb3RvdHlwZS51cGRhdGVJbmRpY2VzPWZ1bmN0aW9uKCl7dGhpcy5hSW5kaWNlcz1bXTtmb3IodmFyIGk9MDtpPHRoaXMub0xpc3QubGVuZ3RoO2krKyl7dGhpcy5hSW5kaWNlcy5wdXNoKGkpfX07Qy5wcm90b3R5cGUuc29ydD1mdW5jdGlvbihzKXtpZighcyl7dGhpcy5hU29ydGVycz1udWxsO3RoaXMudXBkYXRlSW5kaWNlcygpO3RoaXMuYXBwbHlGaWx0ZXIoKX1lbHNle2lmKHMgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuU29ydGVyKXtzPVtzXX10aGlzLmFTb3J0ZXJzPXM7dGhpcy5hcHBseVNvcnQoKX10aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5Tb3J0fSk7dGhpcy5fZmlyZVNvcnQoe3NvcnRlcjpzfSk7cmV0dXJuIHRoaXN9O0MucHJvdG90eXBlLmFwcGx5U29ydD1mdW5jdGlvbigpe3ZhciB0PXRoaXMscz1bXSxjPVtdLHYsUztpZighdGhpcy5hU29ydGVyc3x8dGhpcy5hU29ydGVycy5sZW5ndGg9PTApe3JldHVybn1mb3IodmFyIGo9MDtqPHRoaXMuYVNvcnRlcnMubGVuZ3RoO2orKyl7Uz10aGlzLmFTb3J0ZXJzW2pdO2Nbal09Uy5mbkNvbXBhcmU7aWYoIWNbal0pe2Nbal09ZnVuY3Rpb24oYSxiKXtpZihiPT1udWxsKXtyZXR1cm4tMX1pZihhPT1udWxsKXtyZXR1cm4gMX1pZih0eXBlb2YgYT09InN0cmluZyImJnR5cGVvZiBiPT0ic3RyaW5nIil7cmV0dXJuIGEubG9jYWxlQ29tcGFyZShiKX1pZihhPGIpe3JldHVybi0xfWlmKGE+Yil7cmV0dXJuIDF9cmV0dXJuIDB9fXEuZWFjaCh0aGlzLmFJbmRpY2VzLGZ1bmN0aW9uKGksSSl7dj10Lm9Nb2RlbC5nZXRQcm9wZXJ0eShTLnNQYXRoLHQub0xpc3RbSV0pO2lmKHR5cGVvZiB2PT0ic3RyaW5nIil7dj12LnRvTG9jYWxlVXBwZXJDYXNlKCl9aWYoIXNbal0pe3Nbal09W119c1tqXVtJXT12fSl9dGhpcy5hSW5kaWNlcy5zb3J0KGZ1bmN0aW9uKGEsYil7dmFyIGQ9c1swXVthXSxlPXNbMF1bYl07cmV0dXJuIHQuX2FwcGx5U29ydENvbXBhcmUoYSxiLGQsZSxzLGMsMCl9KX07Qy5wcm90b3R5cGUuX2FwcGx5U29ydENvbXBhcmU9ZnVuY3Rpb24oYSxiLHYsYyxzLGQsRCl7dmFyIFM9dGhpcy5hU29ydGVyc1tEXSxmPWRbRF0scjtyPWYodixjKTtpZihTLmJEZXNjZW5kaW5nKXtyPS1yfWlmKHI9PTAmJnRoaXMuYVNvcnRlcnNbRCsxXSl7dj1zW0QrMV1bYV0sYz1zW0QrMV1bYl07cj10aGlzLl9hcHBseVNvcnRDb21wYXJlKGEsYix2LGMscyxkLEQrMSl9cmV0dXJuIHJ9O0MucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbihmLHMpe3RoaXMudXBkYXRlSW5kaWNlcygpO2lmKGYgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuRmlsdGVyKXtmPVtmXX1pZihzPT1GLkFwcGxpY2F0aW9uKXt0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnM9Znx8W119ZWxzZSBpZihzPT1GLkNvbnRyb2wpe3RoaXMuYUZpbHRlcnM9Znx8W119ZWxzZXt0aGlzLmFGaWx0ZXJzPWZ8fFtdO3RoaXMuYUFwcGxpY2F0aW9uRmlsdGVycz1bXX1mPXRoaXMuYUZpbHRlcnMuY29uY2F0KHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVycyk7aWYoZi5sZW5ndGg9PTApe3RoaXMuYUZpbHRlcnM9W107dGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzPVtdO3RoaXMuaUxlbmd0aD10aGlzLl9nZXRMZW5ndGgoKX1lbHNle3RoaXMuYXBwbHlGaWx0ZXIoKX10aGlzLmFwcGx5U29ydCgpO3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkZpbHRlcn0pO2lmKHM9PUYuQXBwbGljYXRpb24pe3RoaXMuX2ZpcmVGaWx0ZXIoe2ZpbHRlcnM6dGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzfSl9ZWxzZXt0aGlzLl9maXJlRmlsdGVyKHtmaWx0ZXJzOnRoaXMuYUZpbHRlcnN9KX1yZXR1cm4gdGhpc307Qy5wcm90b3R5cGUubm9ybWFsaXplRmlsdGVyVmFsdWU9ZnVuY3Rpb24odil7aWYodHlwZW9mIHY9PSJzdHJpbmciKXtyZXR1cm4gdi50b1VwcGVyQ2FzZSgpfWlmKHYgaW5zdGFuY2VvZiBEYXRlKXtyZXR1cm4gdi5nZXRUaW1lKCl9cmV0dXJuIHZ9O0MucHJvdG90eXBlLmFwcGx5RmlsdGVyPWZ1bmN0aW9uKCl7aWYoIXRoaXMuYUZpbHRlcnMpe3JldHVybn12YXIgdD10aGlzLGY9e30sYSxiPVtdLGc9ZmFsc2UsYz10cnVlLGQ9dGhpcy5hRmlsdGVycy5jb25jYXQodGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzKTtxLmVhY2goZCxmdW5jdGlvbihqLG8pe2lmKG8uc1BhdGghPT11bmRlZmluZWQpe2E9ZltvLnNQYXRoXTtpZighYSl7YT1mW28uc1BhdGhdPVtdfX1lbHNle2E9ZlsiX19tdWx0aUZpbHRlciJdO2lmKCFhKXthPWZbIl9fbXVsdGlGaWx0ZXIiXT1bXX19YS5wdXNoKG8pfSk7cS5lYWNoKHRoaXMuYUluZGljZXMsZnVuY3Rpb24oaSxJKXtjPXRydWU7cS5lYWNoKGYsZnVuY3Rpb24ocCxhKXtpZihwIT09Il9fbXVsdGlGaWx0ZXIiKXt2YXIgdj10Lm9Nb2RlbC5nZXRQcm9wZXJ0eShwLHQub0xpc3RbSV0pO3Y9dC5ub3JtYWxpemVGaWx0ZXJWYWx1ZSh2KTtnPWZhbHNlO3EuZWFjaChhLGZ1bmN0aW9uKGosbyl7dmFyIFQ9dC5nZXRGaWx0ZXJGdW5jdGlvbihvKTtpZih2IT11bmRlZmluZWQmJlQodikpe2c9dHJ1ZTtyZXR1cm4gZmFsc2V9fSl9ZWxzZXtnPWZhbHNlO3EuZWFjaChhLGZ1bmN0aW9uKGosbyl7Zz10Ll9yZXNvbHZlTXVsdGlGaWx0ZXIobyxJKTtpZihnKXtyZXR1cm4gZmFsc2V9fSl9aWYoIWcpe2M9ZmFsc2U7cmV0dXJuIGZhbHNlfX0pO2lmKGMpe2IucHVzaChJKX19KTt0aGlzLmFJbmRpY2VzPWI7dGhpcy5pTGVuZ3RoPWIubGVuZ3RofTtDLnByb3RvdHlwZS5fcmVzb2x2ZU11bHRpRmlsdGVyPWZ1bmN0aW9uKG0sSSl7dmFyIHQ9dGhpcyxNPWZhbHNlLGY9bS5hRmlsdGVycztpZihmKXtxLmVhY2goZixmdW5jdGlvbihpLG8pe3ZhciBsPWZhbHNlO2lmKG8uX2JNdWx0aUZpbHRlcil7bD10Ll9yZXNvbHZlTXVsdGlGaWx0ZXIobyxJKX1lbHNlIGlmKG8uc1BhdGghPT11bmRlZmluZWQpe3ZhciB2PXQub01vZGVsLmdldFByb3BlcnR5KG8uc1BhdGgsdC5vTGlzdFtJXSk7dj10Lm5vcm1hbGl6ZUZpbHRlclZhbHVlKHYpO3ZhciBUPXQuZ2V0RmlsdGVyRnVuY3Rpb24obyk7aWYodiE9dW5kZWZpbmVkJiZUKHYpKXtsPXRydWV9fWlmKGwmJm0uYkFuZCl7TT10cnVlfWVsc2UgaWYoIWwmJm0uYkFuZCl7TT1mYWxzZTtyZXR1cm4gZmFsc2V9ZWxzZSBpZihsKXtNPXRydWU7cmV0dXJuIGZhbHNlfX0pfXJldHVybiBNfTtDLnByb3RvdHlwZS5nZXRGaWx0ZXJGdW5jdGlvbj1mdW5jdGlvbihmKXtpZihmLmZuVGVzdCl7cmV0dXJuIGYuZm5UZXN0fXZhciB2PXRoaXMubm9ybWFsaXplRmlsdGVyVmFsdWUoZi5vVmFsdWUxKSxWPXRoaXMubm9ybWFsaXplRmlsdGVyVmFsdWUoZi5vVmFsdWUyKTtzd2l0Y2goZi5zT3BlcmF0b3Ipe2Nhc2UiRVEiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPT12fTticmVhaztjYXNlIk5FIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYSE9dn07YnJlYWs7Y2FzZSJMVCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE8dn07YnJlYWs7Y2FzZSJMRSI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE8PXZ9O2JyZWFrO2Nhc2UiR1QiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPnZ9O2JyZWFrO2Nhc2UiR0UiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPj12fTticmVhaztjYXNlIkJUIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4oYT49dikmJihhPD1WKX07YnJlYWs7Y2FzZSJDb250YWlucyI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGEhPSJzdHJpbmciKXt0aHJvdyBuZXcgRXJyb3IoIk9ubHkgXCJTdHJpbmdcIiB2YWx1ZXMgYXJlIHN1cHBvcnRlZCBmb3IgdGhlIEZpbHRlck9wZXJhdG9yOiBcIkNvbnRhaW5zXCIuIil9cmV0dXJuIGEuaW5kZXhPZih2KSE9LTF9O2JyZWFrO2Nhc2UiU3RhcnRzV2l0aCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGEhPSJzdHJpbmciKXt0aHJvdyBuZXcgRXJyb3IoIk9ubHkgXCJTdHJpbmdcIiB2YWx1ZXMgYXJlIHN1cHBvcnRlZCBmb3IgdGhlIEZpbHRlck9wZXJhdG9yOiBcIlN0YXJ0c1dpdGhcIi4iKX1yZXR1cm4gYS5pbmRleE9mKHYpPT0wfTticmVhaztjYXNlIkVuZHNXaXRoIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtpZih0eXBlb2YgYSE9InN0cmluZyIpe3Rocm93IG5ldyBFcnJvcigiT25seSBcIlN0cmluZ1wiIHZhbHVlcyBhcmUgc3VwcG9ydGVkIGZvciB0aGUgRmlsdGVyT3BlcmF0b3I6IFwiRW5kc1dpdGhcIi4iKX12YXIgcD1hLmxhc3RJbmRleE9mKHYpO2lmKHA9PS0xKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHA9PWEubGVuZ3RoLW5ldyBTdHJpbmcoZi5vVmFsdWUxKS5sZW5ndGh9O2JyZWFrO2RlZmF1bHQ6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHRydWV9fXJldHVybiBmLmZuVGVzdH07Qy5wcm90b3R5cGUuZ2V0RGlzdGluY3RWYWx1ZXM9ZnVuY3Rpb24ocCl7dmFyIHI9W10sbT17fSx2LHQ9dGhpcztxLmVhY2godGhpcy5vTGlzdCxmdW5jdGlvbihpLGMpe3Y9dC5vTW9kZWwuZ2V0UHJvcGVydHkocCxjKTtpZighbVt2XSl7bVt2XT10cnVlO3IucHVzaCh2KX19KTtyZXR1cm4gcn07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQ2xpZW50VHJlZUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ2xpZW50VHJlZUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ2xpZW50VHJlZUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1RyZWVCaW5kaW5nJ10sZnVuY3Rpb24ocSxUKXsidXNlIHN0cmljdCI7dmFyIEM9VC5leHRlbmQoInNhcC51aS5tb2RlbC5DbGllbnRUcmVlQmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLGYsUCl7VC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIXRoaXMub0NvbnRleHQpe3RoaXMub0NvbnRleHQ9IiJ9dGhpcy5maWx0ZXJJbmZvPXt9O3RoaXMuZmlsdGVySW5mby5hRmlsdGVyZWRDb250ZXh0cz1bXTt0aGlzLmZpbHRlckluZm8ub1BhcmVudENvbnRleHQ9e307aWYodGhpcy5hRmlsdGVycyl7aWYodGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpKXt0aGlzLmZpbHRlcihmKX19fX0pO0MucHJvdG90eXBlLmdldFJvb3RDb250ZXh0cz1mdW5jdGlvbigpe2lmKCF0aGlzLm9Nb2RlbC5pc0xpc3QodGhpcy5zUGF0aCkpe3ZhciBjPXRoaXMub01vZGVsLmdldENvbnRleHQodGhpcy5zUGF0aCk7aWYodGhpcy5iRGlzcGxheVJvb3ROb2RlKXtyZXR1cm5bY119ZWxzZXtyZXR1cm4gdGhpcy5nZXROb2RlQ29udGV4dHMoYyl9fWVsc2V7dmFyIGE9W10sdD10aGlzO3EuZWFjaCh0aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgpLGZ1bmN0aW9uKGksbyl7dC5fc2F2ZVN1YkNvbnRleHQobyxhLHQuc1BhdGgrKHEuc2FwLmVuZHNXaXRoKHQuc1BhdGgsIi8iKT8iIjoiLyIpLGkpfSk7cmV0dXJuIGF9fTtDLnByb3RvdHlwZS5nZXROb2RlQ29udGV4dHM9ZnVuY3Rpb24oYyl7dmFyIHM9Yy5nZXRQYXRoKCk7aWYoIXEuc2FwLmVuZHNXaXRoKHMsIi8iKSl7cz1zKyIvIn1pZighcS5zYXAuc3RhcnRzV2l0aChzLCIvIikpe3M9Ii8iK3N9dmFyIGE9W10sdD10aGlzLG49dGhpcy5vTW9kZWwuX2dldE9iamVjdChzKSxvLEE9dGhpcy5tUGFyYW1ldGVycyYmdGhpcy5tUGFyYW1ldGVycy5hcnJheU5hbWVzLGI7aWYoQSYmcS5pc0FycmF5KEEpKXtxLmVhY2goQSxmdW5jdGlvbihpLGQpe2I9bltkXTtpZihiKXtxLmVhY2goYixmdW5jdGlvbihTLGUpe3QuX3NhdmVTdWJDb250ZXh0KGUsYSxzLGQrIi8iK1MpfSl9fSl9ZWxzZXtpZihuKXtxLnNhcC5lYWNoKG4sZnVuY3Rpb24oTixvKXtpZihxLmlzQXJyYXkobykpe3EuZWFjaChvLGZ1bmN0aW9uKFMsZCl7dC5fc2F2ZVN1YkNvbnRleHQoZCxhLHMsTisiLyIrUyl9KX1lbHNlIGlmKHR5cGVvZiBvPT0ib2JqZWN0Iil7dC5fc2F2ZVN1YkNvbnRleHQobyxhLHMsTil9fSl9fXJldHVybiBhfTtDLnByb3RvdHlwZS5oYXNDaGlsZHJlbj1mdW5jdGlvbihjKXtyZXR1cm4gYz90aGlzLmdldE5vZGVDb250ZXh0cyhjKS5sZW5ndGg+MDpmYWxzZX07Qy5wcm90b3R5cGUuX3NhdmVTdWJDb250ZXh0PWZ1bmN0aW9uKG4sYyxzLE4pe2lmKHR5cGVvZiBuPT0ib2JqZWN0Iil7dmFyIG89dGhpcy5vTW9kZWwuZ2V0Q29udGV4dChzK04pO2lmKHRoaXMuYUZpbHRlcnMmJiF0aGlzLmJJc0ZpbHRlcmluZyl7aWYocS5pbkFycmF5KG8sdGhpcy5maWx0ZXJJbmZvLmFGaWx0ZXJlZENvbnRleHRzKSE9LTEpe2MucHVzaChvKX19ZWxzZXtjLnB1c2gobyl9fX07Qy5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKGYpe3RoaXMuZmlsdGVySW5mby5hRmlsdGVyZWRDb250ZXh0cz1bXTt0aGlzLmZpbHRlckluZm8ub1BhcmVudENvbnRleHQ9e307aWYoIWZ8fCFxLmlzQXJyYXkoZil8fGYubGVuZ3RoPT0wKXt0aGlzLmFGaWx0ZXJzPW51bGx9ZWxzZXt0aGlzLmFGaWx0ZXJzPWY7dmFyIGM9bmV3IHNhcC51aS5tb2RlbC5Db250ZXh0KHRoaXMub01vZGVsLHRoaXMuc1BhdGgpO3RoaXMuZmlsdGVyUmVjdXJzaXZlKGMpfXRoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjoiZmlsdGVyIn0pO3RoaXMuX2ZpcmVGaWx0ZXIoe2ZpbHRlcnM6Zn0pfTtDLnByb3RvdHlwZS5maWx0ZXJSZWN1cnNpdmU9ZnVuY3Rpb24ocCl7dGhpcy5iSXNGaWx0ZXJpbmc9dHJ1ZTt2YXIgYz10aGlzLmdldE5vZGVDb250ZXh0cyhwKTt0aGlzLmJJc0ZpbHRlcmluZz1mYWxzZTtpZihjLmxlbmd0aD4wKXt2YXIgdD10aGlzO3EuZWFjaChjLGZ1bmN0aW9uKGksbyl7dC5maWx0ZXJSZWN1cnNpdmUobyl9KTt0aGlzLmFwcGx5RmlsdGVyKHApfX07Qy5wcm90b3R5cGUuYXBwbHlGaWx0ZXI9ZnVuY3Rpb24ocCl7aWYoIXRoaXMuYUZpbHRlcnMpe3JldHVybn12YXIgdD10aGlzLGY9e30sRixhPVtdLGc9ZmFsc2UsYj10cnVlO3RoaXMuYklzRmlsdGVyaW5nPXRydWU7dmFyIHU9dGhpcy5nZXROb2RlQ29udGV4dHMocCk7dGhpcy5iSXNGaWx0ZXJpbmc9ZmFsc2U7cS5lYWNoKHQuYUZpbHRlcnMsZnVuY3Rpb24oaixvKXtpZihvLnNQYXRoKXtGPWZbby5zUGF0aF07aWYoIUYpe0Y9ZltvLnNQYXRoXT1bXX19ZWxzZXtGPWZbIl9fbXVsdGlGaWx0ZXIiXTtpZighRil7Rj1mWyJfX211bHRpRmlsdGVyIl09W119fUYucHVzaChvKX0pO3EuZWFjaCh1LGZ1bmN0aW9uKGksVSl7Yj10cnVlO3EuZWFjaChmLGZ1bmN0aW9uKFAsRil7aWYoUCE9PSJfX211bHRpRmlsdGVyIil7dmFyIHY9dC5vTW9kZWwuX2dldE9iamVjdChQLFUpO2lmKHR5cGVvZiB2PT0ic3RyaW5nIil7dj12LnRvVXBwZXJDYXNlKCl9Zz1mYWxzZTtxLmVhY2goRixmdW5jdGlvbihqLG8pe3ZhciBjPXQuZ2V0RmlsdGVyRnVuY3Rpb24obyk7aWYodiE9dW5kZWZpbmVkJiZjKHYpKXtnPXRydWU7cmV0dXJuIGZhbHNlfX0pfWVsc2V7Zz1mYWxzZTtxLmVhY2goRixmdW5jdGlvbihqLG8pe2c9dC5fcmVzb2x2ZU11bHRpRmlsdGVyKG8sVSk7aWYoZyl7cmV0dXJuIGZhbHNlfX0pfWlmKCFnKXtiPWZhbHNlO3JldHVybiBmYWxzZX19KTtpZihiKXthLnB1c2goVSl9fSk7aWYoYS5sZW5ndGg+MCl7cS5tZXJnZSh0aGlzLmZpbHRlckluZm8uYUZpbHRlcmVkQ29udGV4dHMsYSk7dGhpcy5maWx0ZXJJbmZvLmFGaWx0ZXJlZENvbnRleHRzLnB1c2gocCk7dGhpcy5maWx0ZXJJbmZvLm9QYXJlbnRDb250ZXh0PXB9aWYocS5pbkFycmF5KHRoaXMuZmlsdGVySW5mby5vUGFyZW50Q29udGV4dCx1KSE9LTEpe3RoaXMuZmlsdGVySW5mby5hRmlsdGVyZWRDb250ZXh0cy5wdXNoKHApO3RoaXMuZmlsdGVySW5mby5vUGFyZW50Q29udGV4dD1wfX07Qy5wcm90b3R5cGUuX3Jlc29sdmVNdWx0aUZpbHRlcj1mdW5jdGlvbihtLHUpe3ZhciB0PXRoaXMsTT1mYWxzZSxmPW0uYUZpbHRlcnM7aWYoZil7cS5lYWNoKGYsZnVuY3Rpb24oaSxGKXt2YXIgbD1mYWxzZTtpZihGLl9iTXVsdGlGaWx0ZXIpe2w9dC5fcmVzb2x2ZU11bHRpRmlsdGVyKEYsdSl9ZWxzZSBpZihGLnNQYXRoKXt2YXIgdj10Lm9Nb2RlbC5nZXRQcm9wZXJ0eShGLnNQYXRoLHUpO2lmKHR5cGVvZiB2PT0ic3RyaW5nIil7dj12LnRvVXBwZXJDYXNlKCl9dmFyIGE9dC5nZXRGaWx0ZXJGdW5jdGlvbihGKTtpZih2IT11bmRlZmluZWQmJmEodikpe2w9dHJ1ZX19aWYobCYmbS5iQW5kKXtNPXRydWV9ZWxzZSBpZighbCYmbS5iQW5kKXtNPWZhbHNlO3JldHVybiBmYWxzZX1lbHNlIGlmKGwpe009dHJ1ZTtyZXR1cm4gZmFsc2V9fSl9cmV0dXJuIE19O0MucHJvdG90eXBlLmdldEZpbHRlckZ1bmN0aW9uPWZ1bmN0aW9uKGYpe2lmKGYuZm5UZXN0KXtyZXR1cm4gZi5mblRlc3R9dmFyIHY9Zi5vVmFsdWUxLFY9Zi5vVmFsdWUyO2lmKHR5cGVvZiB2PT0ic3RyaW5nIil7dj12LnRvVXBwZXJDYXNlKCl9aWYodHlwZW9mIFY9PSJzdHJpbmciKXtWPVYudG9VcHBlckNhc2UoKX1zd2l0Y2goZi5zT3BlcmF0b3Ipe2Nhc2UiRVEiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPT12fTticmVhaztjYXNlIk5FIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYSE9dn07YnJlYWs7Y2FzZSJMVCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE8dn07YnJlYWs7Y2FzZSJMRSI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE8PXZ9O2JyZWFrO2Nhc2UiR1QiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPnZ9O2JyZWFrO2Nhc2UiR0UiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPj12fTticmVhaztjYXNlIkJUIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4oYT52KSYmKGE8Vil9O2JyZWFrO2Nhc2UiQ29udGFpbnMiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhLmluZGV4T2YodikhPS0xfTticmVhaztjYXNlIlN0YXJ0c1dpdGgiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhLmluZGV4T2Yodik9PTB9O2JyZWFrO2Nhc2UiRW5kc1dpdGgiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhLmluZGV4T2Yodik9PWEubGVuZ3RoLW5ldyBTdHJpbmcoZi5vVmFsdWUxKS5sZW5ndGh9O2JyZWFrO2RlZmF1bHQ6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHRydWV9fXJldHVybiBmLmZuVGVzdH07Qy5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7dGhpcy5fZmlyZUNoYW5nZSgpfTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5Qcm9wZXJ0eUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuUHJvcGVydHlCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL1Byb3BlcnR5QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQmluZGluZycsJy4vU2ltcGxlVHlwZSddLGZ1bmN0aW9uKHEsQixTKXsidXNlIHN0cmljdCI7dmFyIFA9Qi5leHRlbmQoInNhcC51aS5tb2RlbC5Qcm9wZXJ0eUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxhKXtCLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiZ2V0VmFsdWUiLCJzZXRWYWx1ZSIsInNldFR5cGUiLCJnZXRUeXBlIiwic2V0Rm9ybWF0dGVyIiwiZ2V0Rm9ybWF0dGVyIiwiZ2V0RXh0ZXJuYWxWYWx1ZSIsInNldEV4dGVybmFsVmFsdWUiLCJnZXRCaW5kaW5nTW9kZSJdfX0pO1AucHJvdG90eXBlLmdldEV4dGVybmFsVmFsdWU9ZnVuY3Rpb24oKXt2YXIgdj10aGlzLmdldFZhbHVlKCk7aWYodGhpcy5vVHlwZSl7dj10aGlzLm9UeXBlLmZvcm1hdFZhbHVlKHYsdGhpcy5zSW50ZXJuYWxUeXBlKX1pZih0aGlzLmZuRm9ybWF0dGVyKXt2PXRoaXMuZm5Gb3JtYXR0ZXIodil9cmV0dXJuIHZ9O1AucHJvdG90eXBlLnNldEV4dGVybmFsVmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5mbkZvcm1hdHRlcil7cmV0dXJufWlmKHRoaXMub1R5cGUpe3Y9dGhpcy5vVHlwZS5wYXJzZVZhbHVlKHYsdGhpcy5zSW50ZXJuYWxUeXBlKTt0aGlzLm9UeXBlLnZhbGlkYXRlVmFsdWUodil9dGhpcy5zZXRWYWx1ZSh2KX07UC5wcm90b3R5cGUuc2V0VHlwZT1mdW5jdGlvbih0LGkpe3RoaXMub1R5cGU9dDt0aGlzLnNJbnRlcm5hbFR5cGU9aX07UC5wcm90b3R5cGUuZ2V0VHlwZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9UeXBlfTtQLnByb3RvdHlwZS5zZXRGb3JtYXR0ZXI9ZnVuY3Rpb24oZil7dGhpcy5mbkZvcm1hdHRlcj1mfTtQLnByb3RvdHlwZS5nZXRGb3JtYXR0ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mbkZvcm1hdHRlcn07UC5wcm90b3R5cGUuZ2V0QmluZGluZ01vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zTW9kZX07UC5wcm90b3R5cGUuc2V0QmluZGluZ01vZGU9ZnVuY3Rpb24oYil7dGhpcy5zTW9kZT1ifTtyZXR1cm4gUH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5jb250cm9sLkNvbnRyb2xQcm9wZXJ0eUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuY29udHJvbC5Db250cm9sUHJvcGVydHlCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2NvbnRyb2wvQ29udHJvbFByb3BlcnR5QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9Qcm9wZXJ0eUJpbmRpbmcnXSxmdW5jdGlvbihxLFApeyJ1c2Ugc3RyaWN0Ijt2YXIgQz1QLmV4dGVuZCgic2FwLnVpLm1vZGVsLmNvbnRyb2wuQ29udHJvbFByb3BlcnR5QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjKXtQLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm9WYWx1ZT10aGlzLl9nZXRWYWx1ZSgpfX0pO0MucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1ZhbHVlfTtDLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih2KXt0aGlzLm9WYWx1ZT12O3RoaXMub0NvbnRleHQuc2V0UHJvcGVydHkodGhpcy5zUGF0aCx2KX07Qy5wcm90b3R5cGUuX2dldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0NvbnRleHQuZ2V0UHJvcGVydHkodGhpcy5zUGF0aCl9O0MucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7dGhpcy5vQ29udGV4dD1jO3RoaXMuY2hlY2tVcGRhdGUoKX07Qy5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oKXt2YXIgdj10aGlzLl9nZXRWYWx1ZSgpO2lmKHYhPT10aGlzLm9WYWx1ZSl7dGhpcy5vVmFsdWU9djt0aGlzLl9maXJlQ2hhbmdlKCl9fTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05MaXN0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05MaXN0QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9qc29uL0pTT05MaXN0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9DaGFuZ2VSZWFzb24nLCdzYXAvdWkvbW9kZWwvQ2xpZW50TGlzdEJpbmRpbmcnXSxmdW5jdGlvbihxLEMsYSl7InVzZSBzdHJpY3QiO3ZhciBKPWEuZXh0ZW5kKCJzYXAudWkubW9kZWwuanNvbi5KU09OTGlzdEJpbmRpbmciKTtKLnByb3RvdHlwZS5nZXRDb250ZXh0cz1mdW5jdGlvbihzLGwpe3RoaXMuaUxhc3RTdGFydEluZGV4PXM7dGhpcy5pTGFzdExlbmd0aD1sO2lmKCFzKXtzPTB9aWYoIWwpe2w9TWF0aC5taW4odGhpcy5pTGVuZ3RoLHRoaXMub01vZGVsLmlTaXplTGltaXQpfXZhciBjPXRoaXMuX2dldENvbnRleHRzKHMsbCksbz17fTtpZih0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbil7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe29bY1tpXS5nZXRQYXRoKCldPWNbaV0uZ2V0T2JqZWN0KCl9aWYodGhpcy5hTGFzdENvbnRleHRzJiZzPHRoaXMuaUxhc3RFbmRJbmRleCl7dmFyIHQ9dGhpczt2YXIgZD1xLnNhcC5hcnJheURpZmYodGhpcy5hTGFzdENvbnRleHRzLGMsZnVuY3Rpb24oTyxuKXtyZXR1cm4gcS5zYXAuZXF1YWwoTyYmdC5vTGFzdENvbnRleHREYXRhJiZ0Lm9MYXN0Q29udGV4dERhdGFbTy5nZXRQYXRoKCldLG4mJm8mJm9bbi5nZXRQYXRoKCldKX0pO2MuZGlmZj1kfXRoaXMuaUxhc3RFbmRJbmRleD1zK2w7dGhpcy5hTGFzdENvbnRleHRzPWMuc2xpY2UoMCk7dGhpcy5vTGFzdENvbnRleHREYXRhPXEuZXh0ZW5kKHRydWUse30sbyl9cmV0dXJuIGN9O0oucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBsPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtpZihsJiZxLmlzQXJyYXkobCkpe2lmKHRoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uKXt0aGlzLm9MaXN0PXEuZXh0ZW5kKHRydWUsW10sbCl9ZWxzZXt0aGlzLm9MaXN0PWwuc2xpY2UoMCl9dGhpcy51cGRhdGVJbmRpY2VzKCk7dGhpcy5hcHBseUZpbHRlcigpO3RoaXMuYXBwbHlTb3J0KCk7dGhpcy5pTGVuZ3RoPXRoaXMuX2dldExlbmd0aCgpfWVsc2V7dGhpcy5vTGlzdD1bXTt0aGlzLmFJbmRpY2VzPVtdO3RoaXMuaUxlbmd0aD0wfX07Si5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7aWYoIXRoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uKXt2YXIgbD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYoIXEuc2FwLmVxdWFsKHRoaXMub0xpc3QsbCl8fGYpe3RoaXMudXBkYXRlKCk7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOkMuQ2hhbmdlfSl9fWVsc2V7dmFyIGM9ZmFsc2U7dmFyIHQ9dGhpczt2YXIgbD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYoIXEuc2FwLmVxdWFsKHRoaXMub0xpc3QsbCkpe3RoaXMudXBkYXRlKCl9dmFyIGI9dGhpcy5fZ2V0Q29udGV4dHModGhpcy5pTGFzdFN0YXJ0SW5kZXgsdGhpcy5pTGFzdExlbmd0aCk7aWYodGhpcy5hTGFzdENvbnRleHRzKXtpZih0aGlzLmFMYXN0Q29udGV4dHMubGVuZ3RoIT1iLmxlbmd0aCl7Yz10cnVlfWVsc2V7cS5lYWNoKHRoaXMuYUxhc3RDb250ZXh0cyxmdW5jdGlvbihpLG8pe2lmKCFxLnNhcC5lcXVhbChiW2ldLmdldE9iamVjdCgpLHQub0xhc3RDb250ZXh0RGF0YVtvLmdldFBhdGgoKV0pKXtjPXRydWU7cmV0dXJuIGZhbHNlfX0pfX1lbHNle2M9dHJ1ZX1pZihjfHxmKXt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246Qy5DaGFuZ2V9KX19fTtyZXR1cm4gSn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05UcmVlQmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05UcmVlQmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9qc29uL0pTT05UcmVlQmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9DbGllbnRUcmVlQmluZGluZyddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBKPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwuanNvbi5KU09OVHJlZUJpbmRpbmciKTtKLnByb3RvdHlwZS5nZXROb2RlQ29udGV4dHM9ZnVuY3Rpb24oYyl7dmFyIHM9Yy5nZXRQYXRoKCk7aWYoIXEuc2FwLmVuZHNXaXRoKHMsIi8iKSl7cz1zKyIvIn1pZighcS5zYXAuc3RhcnRzV2l0aChzLCIvIikpe3M9Ii8iK3N9dmFyIGE9W10sdD10aGlzLG49dGhpcy5vTW9kZWwuX2dldE9iamVjdChzKSxvLEE9dGhpcy5tUGFyYW1ldGVycyYmdGhpcy5tUGFyYW1ldGVycy5hcnJheU5hbWVzLGI7aWYobil7aWYoQSYmcS5pc0FycmF5KEEpKXtxLmVhY2goQSxmdW5jdGlvbihpLGQpe2I9bltkXTtpZihiKXtxLmVhY2goYixmdW5jdGlvbihTLGUpe3QuX3NhdmVTdWJDb250ZXh0KGUsYSxzLGQrIi8iK1MpfSl9fSl9ZWxzZXtxLnNhcC5lYWNoKG4sZnVuY3Rpb24oTixvKXtpZihxLmlzQXJyYXkobykpe3EuZWFjaChvLGZ1bmN0aW9uKFMsZCl7dC5fc2F2ZVN1YkNvbnRleHQoZCxhLHMsTisiLyIrUyl9KX1lbHNlIGlmKG8mJnR5cGVvZiBvPT0ib2JqZWN0Iil7dC5fc2F2ZVN1YkNvbnRleHQobyxhLHMsTil9fSl9fXJldHVybiBhfTtKLnByb3RvdHlwZS5fc2F2ZVN1YkNvbnRleHQ9ZnVuY3Rpb24obixjLHMsTil7aWYodHlwZW9mIG49PSJvYmplY3QiKXt2YXIgbz10aGlzLm9Nb2RlbC5nZXRDb250ZXh0KHMrTik7aWYodGhpcy5hRmlsdGVycyYmIXRoaXMuYklzRmlsdGVyaW5nKXtpZihxLmluQXJyYXkobyx0aGlzLmZpbHRlckluZm8uYUZpbHRlcmVkQ29udGV4dHMpIT0tMSl7Yy5wdXNoKG8pfX1lbHNle2MucHVzaChvKX19fTtyZXR1cm4gSn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUxpc3RCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTGlzdEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvb2RhdGEvT0RhdGFMaXN0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL2Zvcm1hdC9EYXRlRm9ybWF0Jywnc2FwL3VpL21vZGVsL0ZpbHRlclR5cGUnLCdzYXAvdWkvbW9kZWwvTGlzdEJpbmRpbmcnLCcuL09EYXRhVXRpbHMnLCcuL0NvdW50TW9kZScsJy4vRmlsdGVyJ10sZnVuY3Rpb24ocSxELEYsTCxPLEMsYSl7InVzZSBzdHJpY3QiO3ZhciBiPUwuZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFMaXN0QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLHMsZixQKXtMLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNGaWx0ZXJQYXJhbXM9bnVsbDt0aGlzLnNTb3J0UGFyYW1zPW51bGw7dGhpcy5zUmFuZ2VQYXJhbXM9bnVsbDt0aGlzLnNDdXN0b21QYXJhbXM9dGhpcy5vTW9kZWwuY3JlYXRlQ3VzdG9tUGFyYW1zKHRoaXMubVBhcmFtZXRlcnMpO3RoaXMuaVN0YXJ0SW5kZXg9MDt0aGlzLmJQZW5kaW5nQ2hhbmdlPWZhbHNlO3RoaXMuYUtleXM9W107dGhpcy5iSW5pdGlhbD10cnVlO3RoaXMuc0NvdW50TW9kZT0oUCYmUC5jb3VudE1vZGUpfHx0aGlzLm9Nb2RlbC5zRGVmYXVsdENvdW50TW9kZTt0aGlzLmJSZWZyZXNoPWZhbHNlO3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlO3RoaXMuYkRhdGFBdmFpbGFibGU9ZmFsc2U7aWYoIXRoaXMub01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpKXt2YXIgdD10aGlzLGQ9ZnVuY3Rpb24oZSl7dC5iSW5pdGlhbD1mYWxzZTt0Ll9pbml0U29ydGVyc0ZpbHRlcnMoKTt0Lm9Nb2RlbC5kZXRhY2hNZXRhZGF0YUxvYWRlZChkKX07dGhpcy5vTW9kZWwuYXR0YWNoTWV0YWRhdGFMb2FkZWQodGhpcyxkKX1lbHNle3RoaXMuYkluaXRpYWw9ZmFsc2U7dGhpcy5faW5pdFNvcnRlcnNGaWx0ZXJzKCl9dmFyIHI9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO3RoaXMuYUV4cGFuZFJlZnM9cjtpZihxLmlzQXJyYXkocikmJiFzJiYhZil7dGhpcy5hS2V5cz1yO3RoaXMuaUxlbmd0aD1yLmxlbmd0aDt0aGlzLmJMZW5ndGhGaW5hbD10cnVlO3RoaXMuYkRhdGFBdmFpbGFibGU9dHJ1ZX1lbHNle2lmKHRoaXMub01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpKXt0aGlzLnJlc2V0RGF0YSgpfX19LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiZ2V0TGVuZ3RoIl19fSk7Yi5wcm90b3R5cGUuZ2V0Q29udGV4dHM9ZnVuY3Rpb24ocyxsLHQpe2lmKHRoaXMuYkluaXRpYWwpe3JldHVybltdfXRoaXMuaUxhc3RMZW5ndGg9bDt0aGlzLmlMYXN0U3RhcnRJbmRleD1zO3RoaXMuaUxhc3RUaHJlc2hvbGQ9dDtpZighcyl7cz0wfWlmKCFsKXtsPXRoaXMub01vZGVsLmlTaXplTGltaXQ7aWYodGhpcy5iTGVuZ3RoRmluYWwmJnRoaXMuaUxlbmd0aDxsKXtsPXRoaXMuaUxlbmd0aH19aWYoIXQpe3Q9MH12YXIgYz10cnVlLGQ9dGhpcy5fZ2V0Q29udGV4dHMocyxsKSxvPXt9LFM7Uz10aGlzLmNhbGN1bGF0ZVNlY3Rpb24ocyxsLHQsZCk7Yz1kLmxlbmd0aCE9bCYmISh0aGlzLmJMZW5ndGhGaW5hbCYmZC5sZW5ndGg+PXRoaXMuaUxlbmd0aC1zKTtpZih0aGlzLm9Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl7aWYoIXRoaXMuYlBlbmRpbmdSZXF1ZXN0JiZTLmxlbmd0aD4wJiYoY3x8bDxTLmxlbmd0aCkpe3RoaXMubG9hZERhdGEoUy5zdGFydEluZGV4LFMubGVuZ3RoKTtkLmRhdGFSZXF1ZXN0ZWQ9dHJ1ZX19aWYodGhpcy5iUmVmcmVzaCl7aWYodGhpcy5iTGVuZ3RoRmluYWwmJnRoaXMuaUxlbmd0aD09MCl7dGhpcy5sb2FkRGF0YShTLnN0YXJ0SW5kZXgsUy5sZW5ndGgsdHJ1ZSk7ZC5kYXRhUmVxdWVzdGVkPXRydWV9dGhpcy5iUmVmcmVzaD1mYWxzZX1lbHNle2Zvcih2YXIgaT0wO2k8ZC5sZW5ndGg7aSsrKXtvW2RbaV0uZ2V0UGF0aCgpXT1kW2ldLmdldE9iamVjdCgpfWlmKHRoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uKXtpZih0aGlzLmFMYXN0Q29udGV4dHMmJnM8dGhpcy5pTGFzdEVuZEluZGV4KXt2YXIgZT10aGlzO3ZhciBmPXEuc2FwLmFycmF5RGlmZih0aGlzLmFMYXN0Q29udGV4dHMsZCxmdW5jdGlvbihnLG4pe3JldHVybiBxLnNhcC5lcXVhbChnJiZlLm9MYXN0Q29udGV4dERhdGEmJmUub0xhc3RDb250ZXh0RGF0YVtnLmdldFBhdGgoKV0sbiYmbyYmb1tuLmdldFBhdGgoKV0pfSk7ZC5kaWZmPWZ9fXRoaXMuaUxhc3RFbmRJbmRleD1zK2w7dGhpcy5hTGFzdENvbnRleHRzPWQuc2xpY2UoMCk7dGhpcy5vTGFzdENvbnRleHREYXRhPXEuZXh0ZW5kKHRydWUse30sbyl9cmV0dXJuIGR9O2IucHJvdG90eXBlLl9nZXRDb250ZXh0cz1mdW5jdGlvbihzLGwpe3ZhciBjPVtdLG8saztpZighcyl7cz0wfWlmKCFsKXtsPXRoaXMub01vZGVsLmlTaXplTGltaXQ7aWYodGhpcy5iTGVuZ3RoRmluYWwmJnRoaXMuaUxlbmd0aDxsKXtsPXRoaXMuaUxlbmd0aH19Zm9yKHZhciBpPXM7aTxzK2w7aSsrKXtrPXRoaXMuYUtleXNbaV07aWYoIWspe2JyZWFrfW89dGhpcy5vTW9kZWwuZ2V0Q29udGV4dCgnLycrayk7Yy5wdXNoKG8pfXJldHVybiBjfTtiLnByb3RvdHlwZS5jYWxjdWxhdGVTZWN0aW9uPWZ1bmN0aW9uKHMsbCx0LGMpe3ZhciBkPWZhbHNlLFMsZSxwLFAscixvPXt9LGs7ZT1zO1M9MDtmb3IodmFyIGk9cztpPj1NYXRoLm1heChzLXQsMCk7aS0tKXtrPXRoaXMuYUtleXNbaV07aWYoIWspe1A9aSsxO2JyZWFrfX1mb3IodmFyIGo9cytsO2o8cytsK3Q7aisrKXtrPXRoaXMuYUtleXNbal07aWYoIWspe3A9ajticmVha319cj1zLVA7aWYoUCYmcz50JiZyPHQpe2lmKGMubGVuZ3RoIT1sKXtlPXMtdH1lbHNle2U9UC10fVM9dH1pZihlPT1zKXtlKz1jLmxlbmd0aH1pZihjLmxlbmd0aCE9bCl7Uys9bC1jLmxlbmd0aH1yPXAtcy1sO2lmKHI9PTApe1MrPXR9aWYocCYmcjx0JiZyPjApe2lmKGU+cyl7ZT1wO1MrPXR9fWlmKHRoaXMuYkxlbmd0aEZpbmFsJiZ0aGlzLmlMZW5ndGg8KFMrZSkpe1M9dGhpcy5pTGVuZ3RoLWV9by5zdGFydEluZGV4PWU7by5sZW5ndGg9UztyZXR1cm4gb307Yi5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXtpZih0aGlzLm9Db250ZXh0IT1jKXt0aGlzLm9Db250ZXh0PWM7aWYodGhpcy5pc1JlbGF0aXZlKCkpe3RoaXMuX2luaXRTb3J0ZXJzRmlsdGVycygpO2lmKCF0aGlzLmJJbml0aWFsKXt2YXIgcj10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7dGhpcy5hRXhwYW5kUmVmcz1yO2lmKHEuaXNBcnJheShyKSYmIXRoaXMuYVNvcnRlcnMubGVuZ3RoPjAmJiF0aGlzLmFGaWx0ZXJzLmxlbmd0aD4wKXt0aGlzLmFLZXlzPXI7dGhpcy5pTGVuZ3RoPXIubGVuZ3RoO3RoaXMuYkxlbmd0aEZpbmFsPXRydWU7dGhpcy5fZmlyZUNoYW5nZSgpfWVsc2V7dGhpcy5yZWZyZXNoKCl9fX19fTtiLnByb3RvdHlwZS5sb2FkRGF0YT1mdW5jdGlvbihzLGwscCl7dmFyIHQ9dGhpcyxJPWZhbHNlO2lmKHN8fGwpe3RoaXMuc1JhbmdlUGFyYW1zPSIkc2tpcD0iK3MrIiYkdG9wPSIrbDt0aGlzLmlTdGFydEluZGV4PXN9ZWxzZXtzPXRoaXMuaVN0YXJ0SW5kZXh9dmFyIFA9W107aWYodGhpcy5zUmFuZ2VQYXJhbXMpe1AucHVzaCh0aGlzLnNSYW5nZVBhcmFtcyl9aWYodGhpcy5zU29ydFBhcmFtcyl7UC5wdXNoKHRoaXMuc1NvcnRQYXJhbXMpfWlmKHRoaXMuc0ZpbHRlclBhcmFtcyl7UC5wdXNoKHRoaXMuc0ZpbHRlclBhcmFtcyl9aWYodGhpcy5zQ3VzdG9tUGFyYW1zKXtQLnB1c2godGhpcy5zQ3VzdG9tUGFyYW1zKX1pZighdGhpcy5iTGVuZ3RoRmluYWwmJih0aGlzLnNDb3VudE1vZGU9PUMuSW5saW5lfHx0aGlzLnNDb3VudE1vZGU9PUMuQm90aCkpe1AucHVzaCgiJGlubGluZWNvdW50PWFsbHBhZ2VzIik7ST10cnVlfWZ1bmN0aW9uIFMoZil7cS5lYWNoKGYucmVzdWx0cyxmdW5jdGlvbihpLGcpe3QuYUtleXNbcytpXT10Lm9Nb2RlbC5fZ2V0S2V5KGcpfSk7aWYoSSYmZi5fX2NvdW50KXt0LmlMZW5ndGg9cGFyc2VJbnQoZi5fX2NvdW50LDEwKTt0LmJMZW5ndGhGaW5hbD10cnVlfWlmKHQuaUxlbmd0aDxzK2YucmVzdWx0cy5sZW5ndGgpe3QuaUxlbmd0aD1zK2YucmVzdWx0cy5sZW5ndGg7dC5iTGVuZ3RoRmluYWw9ZmFsc2V9aWYoZi5yZXN1bHRzLmxlbmd0aDxsfHxsPT09dW5kZWZpbmVkKXt0LmlMZW5ndGg9cytmLnJlc3VsdHMubGVuZ3RoO3QuYkxlbmd0aEZpbmFsPXRydWV9aWYocz09MCYmZi5yZXN1bHRzLmxlbmd0aD09MCl7dC5pTGVuZ3RoPTA7dC5iTGVuZ3RoRmluYWw9dHJ1ZX10Lm9SZXF1ZXN0SGFuZGxlPW51bGw7dC5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2U7dC5iTmVlZHNVcGRhdGU9dHJ1ZX1mdW5jdGlvbiBjKCl7dC5maXJlRGF0YVJlY2VpdmVkKCl9ZnVuY3Rpb24gZShFLEEpe3Qub1JlcXVlc3RIYW5kbGU9bnVsbDt0LmJQZW5kaW5nUmVxdWVzdD1mYWxzZTtpZighQSl7dC5hS2V5cz1bXTt0LmlMZW5ndGg9MDt0LmJMZW5ndGhGaW5hbD10cnVlO3QuYkRhdGFBdmFpbGFibGU9dHJ1ZTt0Ll9maXJlQ2hhbmdlKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5DaGFuZ2V9KX10LmZpcmVEYXRhUmVjZWl2ZWQoKX1mdW5jdGlvbiB1KGgpe3Qub1JlcXVlc3RIYW5kbGU9aH12YXIgZD10aGlzLnNQYXRoLG89dGhpcy5vQ29udGV4dDtpZih0aGlzLmlzUmVsYXRpdmUoKSl7ZD10aGlzLm9Nb2RlbC5yZXNvbHZlKGQsbyl9aWYoZCl7aWYocCl7dmFyIFU9dGhpcy5vTW9kZWwuX2NyZWF0ZVJlcXVlc3RVcmwoZCxQKTt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCk7dGhpcy5vTW9kZWwuZmlyZVJlcXVlc3RTZW50KHt1cmw6VSxtZXRob2Q6IkdFVCIsYXN5bmM6dHJ1ZX0pO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmJOZWVkc1VwZGF0ZT10cnVlO3QuY2hlY2tVcGRhdGUoKTt0Lm9Nb2RlbC5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOlUsbWV0aG9kOiJHRVQiLGFzeW5jOnRydWUsc3VjY2Vzczp0cnVlfSk7dC5maXJlRGF0YVJlY2VpdmVkKCl9LDApfWVsc2V7dGhpcy5iUGVuZGluZ1JlcXVlc3Q9dHJ1ZTt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCk7dGhpcy5vTW9kZWwuX2xvYWREYXRhKGQsUCxTLGUsZmFsc2UsdSxjKX19fTtiLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pTGVuZ3RofTtiLnByb3RvdHlwZS5fZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt2YXIgcD1bXTtpZih0aGlzLnNGaWx0ZXJQYXJhbXMpe3AucHVzaCh0aGlzLnNGaWx0ZXJQYXJhbXMpfWlmKHRoaXMubVBhcmFtZXRlcnMmJnRoaXMubVBhcmFtZXRlcnMuY3VzdG9tKXt2YXIgYz17Y3VzdG9tOnt9fTtxLmVhY2godGhpcy5tUGFyYW1ldGVycy5jdXN0b20sZnVuY3Rpb24ocyx2KXtjLmN1c3RvbVtzXT12fSk7cC5wdXNoKHRoaXMub01vZGVsLmNyZWF0ZUN1c3RvbVBhcmFtcyhjKSl9ZnVuY3Rpb24gXyhvKXt0LmlMZW5ndGg9cGFyc2VJbnQobywxMCk7dC5iTGVuZ3RoRmluYWw9dHJ1ZX1mdW5jdGlvbiBkKGUpe3ZhciBFPSJSZXF1ZXN0IGZvciAkY291bnQgZmFpbGVkOiAiK2UubWVzc2FnZTtpZihlLnJlc3BvbnNlKXtFKz0iLCAiK2UucmVzcG9uc2Uuc3RhdHVzQ29kZSsiLCAiK2UucmVzcG9uc2Uuc3RhdHVzVGV4dCsiLCAiK2UucmVzcG9uc2UuYm9keX1xLnNhcC5sb2cud2FybmluZyhFKX12YXIgUD10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYoUCl7dmFyIHU9dGhpcy5vTW9kZWwuX2NyZWF0ZVJlcXVlc3RVcmwoUCsiLyRjb3VudCIsbnVsbCxwKTt2YXIgcj10aGlzLm9Nb2RlbC5fY3JlYXRlUmVxdWVzdCh1LCJHRVQiLGZhbHNlKTtyLmhlYWRlcnNbIkFjY2VwdCJdPSJ0ZXh0L3BsYWluLCAqLyo7cT0wLjUiO3RoaXMub01vZGVsLl9yZXF1ZXN0KHIsXyxkLHVuZGVmaW5lZCx1bmRlZmluZWQsdGhpcy5vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkpfX07Yi5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihmLGMsZSl7dmFyIGQ9ZmFsc2U7aWYoIWYpe2lmKGUpe3ZhciByPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTt2YXIgRT10aGlzLm9Nb2RlbC5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgocik7aWYoRSYmKEUuZW50aXR5VHlwZSBpbiBlKSl7ZD10cnVlfX1pZihjJiYhZCl7cS5lYWNoKHRoaXMuYUtleXMsZnVuY3Rpb24oaSxrKXtpZihrIGluIGMpe2Q9dHJ1ZTtyZXR1cm4gZmFsc2V9fSl9aWYoIWMmJiFlKXtkPXRydWV9fWlmKGZ8fGQpe3RoaXMuYWJvcnRQZW5kaW5nUmVxdWVzdCgpO3RoaXMucmVzZXREYXRhKCk7dGhpcy5fZmlyZVJlZnJlc2goe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLlJlZnJlc2h9KX19O2IucHJvdG90eXBlLl9maXJlUmVmcmVzaD1mdW5jdGlvbihBKXtpZih0aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCkpe3RoaXMuYlJlZnJlc2g9dHJ1ZTt0aGlzLmZpcmVFdmVudCgicmVmcmVzaCIsQSl9fTtiLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7aWYodGhpcy5vTW9kZWwub01ldGFkYXRhLmlzTG9hZGVkKCkpe2lmKHRoaXMuYkRhdGFBdmFpbGFibGUpe3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNoYW5nZX0pfWVsc2V7dGhpcy5fZmlyZVJlZnJlc2goe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLlJlZnJlc2h9KX19fTtiLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmLGMpe3ZhciBkPXRoaXMuc0NoYW5nZVJlYXNvbj90aGlzLnNDaGFuZ2VSZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5DaGFuZ2UsZT1mYWxzZSxsLG8sdD10aGlzLHIsUjtpZighZiYmIXRoaXMuYk5lZWRzVXBkYXRlKXtyPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtSPXEuaXNBcnJheShyKSYmIXEuc2FwLmVxdWFsKHIsdGhpcy5hRXhwYW5kUmVmcyk7dGhpcy5hRXhwYW5kUmVmcz1yO2lmKFIpe2lmKHRoaXMuYVNvcnRlcnMubGVuZ3RoPjB8fHRoaXMuYUZpbHRlcnMubGVuZ3RoPjApe3RoaXMucmVmcmVzaCgpO3JldHVybn1lbHNle3RoaXMuYUtleXM9cjt0aGlzLmlMZW5ndGg9ci5sZW5ndGg7dGhpcy5iTGVuZ3RoRmluYWw9dHJ1ZTtlPXRydWV9fWVsc2UgaWYoYyl7cS5lYWNoKHRoaXMuYUtleXMsZnVuY3Rpb24oaSxrKXtpZihrIGluIGMpe2U9dHJ1ZTtyZXR1cm4gZmFsc2V9fSl9ZWxzZXtlPXRydWV9aWYoZSYmdGhpcy5hTGFzdENvbnRleHRzKXtlPWZhbHNlO3ZhciBnPXRoaXMuX2dldENvbnRleHRzKHRoaXMuaUxhc3RTdGFydEluZGV4LHRoaXMuaUxhc3RMZW5ndGgsdGhpcy5pTGFzdFRocmVzaG9sZCk7aWYodGhpcy5hTGFzdENvbnRleHRzLmxlbmd0aCE9Zy5sZW5ndGgpe2U9dHJ1ZX1lbHNle3EuZWFjaCh0aGlzLmFMYXN0Q29udGV4dHMsZnVuY3Rpb24oaSxoKXtsPXQub0xhc3RDb250ZXh0RGF0YVtoLmdldFBhdGgoKV07bz1nW2ldLmdldE9iamVjdCgpO2lmKCFxLnNhcC5lcXVhbChsLG8sMyx0cnVlKSl7ZT10cnVlO3JldHVybiBmYWxzZX19KX19fWlmKGZ8fGV8fHRoaXMuYk5lZWRzVXBkYXRlKXt0aGlzLmJOZWVkc1VwZGF0ZT1mYWxzZTt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246ZH0pfXRoaXMuc0NoYW5nZVJlYXNvbj11bmRlZmluZWR9O2IucHJvdG90eXBlLnJlc2V0RGF0YT1mdW5jdGlvbigpe3RoaXMuYUtleXM9W107dGhpcy5pTGVuZ3RoPTA7dGhpcy5iTGVuZ3RoRmluYWw9ZmFsc2U7dGhpcy5zQ2hhbmdlUmVhc29uPXVuZGVmaW5lZDt0aGlzLmJEYXRhQXZhaWxhYmxlPWZhbHNlO2lmKHRoaXMub01vZGVsLmlzQ291bnRTdXBwb3J0ZWQoKSYmKHRoaXMuc0NvdW50TW9kZT09Qy5SZXF1ZXN0fHx0aGlzLnNDb3VudE1vZGU9PUMuQm90aCkpe3RoaXMuX2dldExlbmd0aCgpfX07Yi5wcm90b3R5cGUuYWJvcnRQZW5kaW5nUmVxdWVzdD1mdW5jdGlvbigpe2lmKHRoaXMub1JlcXVlc3RIYW5kbGUpe3RoaXMub1JlcXVlc3RIYW5kbGUuYWJvcnQoKTt0aGlzLm9SZXF1ZXN0SGFuZGxlPW51bGw7dGhpcy5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2V9fTtiLnByb3RvdHlwZS5zb3J0PWZ1bmN0aW9uKHMpe2lmKHMgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuU29ydGVyKXtzPVtzXX10aGlzLmFTb3J0ZXJzPXM7dGhpcy5jcmVhdGVTb3J0UGFyYW1zKHMpO3RoaXMuYWJvcnRQZW5kaW5nUmVxdWVzdCgpO3RoaXMuYUtleXM9W107aWYoIXRoaXMuYkluaXRpYWwpe2lmKHRoaXMub1JlcXVlc3RIYW5kbGUpe3RoaXMub1JlcXVlc3RIYW5kbGUuYWJvcnQoKTt0aGlzLm9SZXF1ZXN0SGFuZGxlPW51bGw7dGhpcy5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2V9dGhpcy5zQ2hhbmdlUmVhc29uPXNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uU29ydDt0aGlzLl9maXJlUmVmcmVzaCh7cmVhc29uOnRoaXMuc0NoYW5nZVJlYXNvbn0pO3RoaXMuX2ZpcmVTb3J0KHtzb3J0ZXI6c30pfXJldHVybiB0aGlzfTtiLnByb3RvdHlwZS5jcmVhdGVTb3J0UGFyYW1zPWZ1bmN0aW9uKHMpe3RoaXMuc1NvcnRQYXJhbXM9Ty5jcmVhdGVTb3J0UGFyYW1zKHMpfTtiLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZixzKXtpZighZil7Zj1bXX1pZihmIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkZpbHRlcil7Zj1bZl19aWYocz09Ri5BcHBsaWNhdGlvbil7dGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzPWZ9ZWxzZXt0aGlzLmFGaWx0ZXJzPWZ9Zj10aGlzLmFGaWx0ZXJzLmNvbmNhdCh0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnMpO2lmKCFmfHwhcS5pc0FycmF5KGYpfHxmLmxlbmd0aD09MCl7dGhpcy5hRmlsdGVycz1bXTt0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnM9W119dGhpcy5jcmVhdGVGaWx0ZXJQYXJhbXMoZik7dGhpcy5hYm9ydFBlbmRpbmdSZXF1ZXN0KCk7dGhpcy5yZXNldERhdGEoKTtpZighdGhpcy5iSW5pdGlhbCl7aWYodGhpcy5vUmVxdWVzdEhhbmRsZSl7dGhpcy5vUmVxdWVzdEhhbmRsZS5hYm9ydCgpO3RoaXMub1JlcXVlc3RIYW5kbGU9bnVsbDt0aGlzLmJQZW5kaW5nUmVxdWVzdD1mYWxzZX10aGlzLnNDaGFuZ2VSZWFzb249c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5GaWx0ZXI7dGhpcy5fZmlyZVJlZnJlc2goe3JlYXNvbjp0aGlzLnNDaGFuZ2VSZWFzb259KTtpZihzPT1GLkFwcGxpY2F0aW9uKXt0aGlzLl9maXJlRmlsdGVyKHtmaWx0ZXJzOnRoaXMuYUFwcGxpY2F0aW9uRmlsdGVyc30pfWVsc2V7dGhpcy5fZmlyZUZpbHRlcih7ZmlsdGVyczp0aGlzLmFGaWx0ZXJzfSl9fXJldHVybiB0aGlzfTtiLnByb3RvdHlwZS5jcmVhdGVGaWx0ZXJQYXJhbXM9ZnVuY3Rpb24oZil7dGhpcy5zRmlsdGVyUGFyYW1zPU8uY3JlYXRlRmlsdGVyUGFyYW1zKGYsdGhpcy5vTW9kZWwub01ldGFkYXRhLHRoaXMub0VudGl0eVR5cGUpfTtiLnByb3RvdHlwZS5faW5pdFNvcnRlcnNGaWx0ZXJzPWZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKCFyKXtyZXR1cm59dGhpcy5vRW50aXR5VHlwZT10aGlzLl9nZXRFbnRpdHlUeXBlKCk7dGhpcy5jcmVhdGVTb3J0UGFyYW1zKHRoaXMuYVNvcnRlcnMpO3RoaXMuY3JlYXRlRmlsdGVyUGFyYW1zKHRoaXMuYUZpbHRlcnMuY29uY2F0KHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVycykpfTtiLnByb3RvdHlwZS5fZ2V0RW50aXR5VHlwZT1mdW5jdGlvbigpe3ZhciByPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtpZihyKXt2YXIgZT10aGlzLm9Nb2RlbC5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgocik7cmV0dXJuIGV9cmV0dXJuIHVuZGVmaW5lZH07cmV0dXJuIGJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFQcm9wZXJ0eUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFQcm9wZXJ0eUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvb2RhdGEvT0RhdGFQcm9wZXJ0eUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvUHJvcGVydHlCaW5kaW5nJ10sZnVuY3Rpb24ocSxQKXsidXNlIHN0cmljdCI7dmFyIE89UC5leHRlbmQoInNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YVByb3BlcnR5QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLGEpe1AuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMub1ZhbHVlPXRoaXMuX2dldFZhbHVlKCl9fSk7Ty5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe2lmKHRoaXMub01vZGVsLm9NZXRhZGF0YS5pc0xvYWRlZCgpKXt0aGlzLmNoZWNrVXBkYXRlKHRydWUpfX07Ty5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vVmFsdWV9O08ucHJvdG90eXBlLl9nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCl9O08ucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHYpe2lmKHRoaXMub1ZhbHVlIT12KXtpZighdGhpcy5vTW9kZWwuc2V0UHJvcGVydHkodGhpcy5zUGF0aCx2LHRoaXMub0NvbnRleHQpKXt0aGlzLl9maXJlQ2hhbmdlKCl9fX07Ty5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXtpZih0aGlzLm9Db250ZXh0IT1jKXt0aGlzLm9Db250ZXh0PWM7aWYodGhpcy5pc1JlbGF0aXZlKCkpe3RoaXMuY2hlY2tVcGRhdGUoKX19fTtPLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXt2YXIgdj10aGlzLl9nZXRWYWx1ZSgpO2lmKCFxLnNhcC5lcXVhbCh2LHRoaXMub1ZhbHVlKXx8Zil7dGhpcy5vVmFsdWU9djt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5DaGFuZ2V9KX19O3JldHVybiBPfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlUHJvcGVydHlCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlUHJvcGVydHlCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3Jlc291cmNlL1Jlc291cmNlUHJvcGVydHlCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL1Byb3BlcnR5QmluZGluZyddLGZ1bmN0aW9uKHEsUCl7InVzZSBzdHJpY3QiO3ZhciBSPVAuZXh0ZW5kKCJzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VQcm9wZXJ0eUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHApe1AuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMub1ZhbHVlPXRoaXMub01vZGVsLmdldFByb3BlcnR5KHApfX0pO1IucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub01vZGVsLmdldFByb3BlcnR5KHRoaXMuc1BhdGgpfTtyZXR1cm4gUn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC54bWwuWE1MTGlzdEJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwueG1sLlhNTExpc3RCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3htbC9YTUxMaXN0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9DaGFuZ2VSZWFzb24nLCdzYXAvdWkvbW9kZWwvQ2xpZW50TGlzdEJpbmRpbmcnXSxmdW5jdGlvbihxLEMsYSl7InVzZSBzdHJpY3QiO3ZhciBYPWEuZXh0ZW5kKCJzYXAudWkubW9kZWwueG1sLlhNTExpc3RCaW5kaW5nIik7WC5wcm90b3R5cGUuZ2V0Q29udGV4dHM9ZnVuY3Rpb24ocyxsKXt0aGlzLmlMYXN0U3RhcnRJbmRleD1zO3RoaXMuaUxhc3RMZW5ndGg9bDtpZighcyl7cz0wfWlmKCFsKXtsPU1hdGgubWluKHRoaXMuaUxlbmd0aCx0aGlzLm9Nb2RlbC5pU2l6ZUxpbWl0KX12YXIgYz10aGlzLl9nZXRDb250ZXh0cyhzLGwpLG89e307aWYodGhpcy5iVXNlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb24pe2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXtvW2NbaV0uZ2V0UGF0aCgpXT10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KGNbaV0uZ2V0UGF0aCgpKVswXX1pZih0aGlzLmFMYXN0Q29udGV4dHMmJnM8dGhpcy5pTGFzdEVuZEluZGV4KXt2YXIgdD10aGlzO3ZhciBkPXEuc2FwLmFycmF5RGlmZih0aGlzLmFMYXN0Q29udGV4dHMsYyxmdW5jdGlvbihPLG4pe3ZhciBiPXQub0xhc3RDb250ZXh0RGF0YSYmdC5vTGFzdENvbnRleHREYXRhW08uZ2V0UGF0aCgpXTt2YXIgTj1vJiZvW24uZ2V0UGF0aCgpXTtpZihiJiZOKXtyZXR1cm4gcS5zYXAuaXNFcXVhbE5vZGUoYixOKX1yZXR1cm4gZmFsc2V9KTtjLmRpZmY9ZH10aGlzLmlMYXN0RW5kSW5kZXg9cytsO3RoaXMuYUxhc3RDb250ZXh0cz1jLnNsaWNlKDApO3RoaXMub0xhc3RDb250ZXh0RGF0YT17fTt2YXIgdD10aGlzO3EuZWFjaChvLGZ1bmN0aW9uKGssbil7dC5vTGFzdENvbnRleHREYXRhW2tdPW4uY2xvbmVOb2RlKHRydWUpfSl9cmV0dXJuIGN9O1gucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBsPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtpZihsKXt0aGlzLm9MaXN0PVtdO3ZhciB0PXRoaXM7aWYodGhpcy5iVXNlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb24pe3EuZWFjaChsLGZ1bmN0aW9uKGssbil7dC5vTGlzdC5wdXNoKG4uY2xvbmVOb2RlKHRydWUpKX0pfWVsc2V7dGhpcy5vTGlzdD1sLnNsaWNlKDApfXRoaXMudXBkYXRlSW5kaWNlcygpO3RoaXMuYXBwbHlGaWx0ZXIoKTt0aGlzLmFwcGx5U29ydCgpO3RoaXMuaUxlbmd0aD10aGlzLl9nZXRMZW5ndGgoKX1lbHNle3RoaXMub0xpc3Q9W107dGhpcy5hSW5kaWNlcz1bXTt0aGlzLmlMZW5ndGg9MH19O1gucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe2lmKCF0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbil7dmFyIGw9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKCF0aGlzLm9MaXN0fHwhbHx8bC5sZW5ndGghPXRoaXMub0xpc3QubGVuZ3RofHxmKXt0aGlzLnVwZGF0ZSgpO3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpDLkNoYW5nZX0pfX1lbHNle3ZhciBjPWZhbHNlO3ZhciB0PXRoaXM7dmFyIGw9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKCFxLnNhcC5lcXVhbCh0aGlzLm9MaXN0LGwpKXt0aGlzLnVwZGF0ZSgpfXZhciBiPXRoaXMuX2dldENvbnRleHRzKHRoaXMuaUxhc3RTdGFydEluZGV4LHRoaXMuaUxhc3RMZW5ndGgpO2lmKHRoaXMuYUxhc3RDb250ZXh0cyl7aWYodGhpcy5hTGFzdENvbnRleHRzLmxlbmd0aCE9Yi5sZW5ndGgpe2M9dHJ1ZX1lbHNle3EuZWFjaCh0aGlzLmFMYXN0Q29udGV4dHMsZnVuY3Rpb24oaSxvKXt2YXIgbj1iW2ldLmdldE9iamVjdCgpO3ZhciBPPXQub0xhc3RDb250ZXh0RGF0YSYmdC5vTGFzdENvbnRleHREYXRhW28uZ2V0UGF0aCgpXTtpZihuJiZPJiYhTy5pc0VxdWFsTm9kZShuKSl7Yz10cnVlO3JldHVybiBmYWxzZX19KX19ZWxzZXtjPXRydWV9aWYoY3x8Zil7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOkMuQ2hhbmdlfSl9fX07cmV0dXJuIFh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwueG1sLlhNTFRyZWVCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnhtbC5YTUxUcmVlQmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC94bWwvWE1MVHJlZUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvQ2xpZW50VHJlZUJpbmRpbmcnXSxmdW5jdGlvbihxLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgWD1DLmV4dGVuZCgic2FwLnVpLm1vZGVsLnhtbC5YTUxUcmVlQmluZGluZyIpO1gucHJvdG90eXBlLmdldE5vZGVDb250ZXh0cz1mdW5jdGlvbihjKXt2YXIgcz1jLmdldFBhdGgoKTtpZighcS5zYXAuZW5kc1dpdGgocywiLyIpKXtzPXMrIi8ifWlmKCFxLnNhcC5zdGFydHNXaXRoKHMsIi8iKSl7cz0iLyIrc312YXIgYT1bXSxuPXt9LHQ9dGhpcyxOPXRoaXMub01vZGVsLl9nZXRPYmplY3QoYy5nZXRQYXRoKCkpLG8sYixkO3EuZWFjaChOWzBdLmNoaWxkTm9kZXMsZnVuY3Rpb24oZSxvKXtpZihvLm5vZGVUeXBlPT0xKXtpZihuW28ubm9kZU5hbWVdPT11bmRlZmluZWQpe25bby5ub2RlTmFtZV09MH1lbHNle25bby5ub2RlTmFtZV0rK31iPXMrby5ub2RlTmFtZSsiLyIrbltvLm5vZGVOYW1lXTtkPXQub01vZGVsLmdldENvbnRleHQoYik7aWYodC5hRmlsdGVycyYmIXQuYklzRmlsdGVyaW5nKXtpZihxLmluQXJyYXkoZCx0LmZpbHRlckluZm8uYUZpbHRlcmVkQ29udGV4dHMpIT0tMSl7YS5wdXNoKGQpfX1lbHNle2EucHVzaChkKX19fSk7cmV0dXJuIGF9O3JldHVybiBYfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLlZpZXdTZXJpYWxpemVyJykpewovKgogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLlZpZXdTZXJpYWxpemVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9zZXJpYWxpemVyL1ZpZXdTZXJpYWxpemVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlcicsJy4vSFRNTFZpZXdTZXJpYWxpemVyJywnLi9TZXJpYWxpemVyJywnLi9YTUxWaWV3U2VyaWFsaXplciddLGZ1bmN0aW9uKHEsRSxILFMsWCl7InVzZSBzdHJpY3QiO3ZhciBWPUUuZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuVmlld1NlcmlhbGl6ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihyLHcsZCl7RS5hcHBseSh0aGlzKTt0aGlzLl9vUm9vdENvbnRyb2w9cjt0aGlzLl9vV2luZG93PXd8fHdpbmRvdzt0aGlzLl9tVmlld3M9e307dGhpcy5fc0RlZmF1bHRYbWxOYW1lc3BhY2U9ZH19KTtWLnByb3RvdHlwZS5zZXJpYWxpemVUb1hNTD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlcmlhbGl6ZSgiWE1MIil9O1YucHJvdG90eXBlLnNlcmlhbGl6ZVRvSFRNTD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlcmlhbGl6ZSgiSFRNTCIpfTtWLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oYyl7dGhpcy5fbVZpZXdzPXt9O3RoaXMuX3NDb252ZXJ0VG9WaWV3VHlwZT1jfHx1bmRlZmluZWQ7cmV0dXJuIHRoaXMuX3NlcmlhbGl6ZVJlY3Vyc2l2ZSh0aGlzLl9vUm9vdENvbnRyb2wpfTtWLnByb3RvdHlwZS5fZ2V0Vmlld1R5cGU9ZnVuY3Rpb24odil7aWYoIXRoaXMuX3NDb252ZXJ0VG9WaWV3VHlwZSl7aWYodiBpbnN0YW5jZW9mIHRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3KXtyZXR1cm4iSFRNTCJ9ZWxzZSBpZih2IGluc3RhbmNlb2YgdGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5tdmMuWE1MVmlldyl7cmV0dXJuIlhNTCJ9fXJldHVybiB0aGlzLl9zQ29udmVydFRvVmlld1R5cGV9O1YucHJvdG90eXBlLl9zZXJpYWxpemVSZWN1cnNpdmU9ZnVuY3Rpb24oYyl7aWYoYyBpbnN0YW5jZW9mIHRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUubXZjLlZpZXcpe3ZhciB2PXRoaXMuX2dldFZpZXdTZXJpYWxpemVyKGMsdGhpcy5fZ2V0Vmlld1R5cGUoYykpO2lmKHYpe3ZhciBvPWMuZ2V0Vmlld05hbWUoKXx8Yy5nZXRDb250cm9sbGVyTmFtZSgpO2lmKCF0aGlzLl9tVmlld3Nbb10pe3RoaXMuX21WaWV3c1tvXT12LnNlcmlhbGl6ZSh0aGlzLl9nZXRWaWV3VHlwZShjKSl9fX1pZihjLmdldE1ldGFkYXRhKCkuZ2V0Q2xhc3MoKT09PXRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUuVUlBcmVhKXt2YXIgQz1jLmdldENvbnRlbnQoKTtmb3IodmFyIGk9MDtpPEMubGVuZ3RoO2krKyl7dGhpcy5fc2VyaWFsaXplUmVjdXJzaXZlKENbaV0pfX1lbHNlIGlmKGMuZ2V0TWV0YWRhdGEoKS5nZXRDbGFzcygpPT09dGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIpe3RoaXMuX3NlcmlhbGl6ZVJlY3Vyc2l2ZShjLmdldENvbXBvbmVudEluc3RhbmNlKCkuZ2V0QWdncmVnYXRpb24oInJvb3RDb250cm9sIikpfWVsc2V7dmFyIGE9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpO2lmKGEpe2Zvcih2YXIgbiBpbiBhKXt2YXIgQT1hW25dO3ZhciBiPWNbQS5fc0dldHRlcl0oKTtpZihiJiZiLmxlbmd0aCl7Zm9yKHZhciBpPTA7aTxiLmxlbmd0aDtpKyspe3ZhciBPPWJbaV07aWYoTyBpbnN0YW5jZW9mIHRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUuRWxlbWVudCl7dGhpcy5fc2VyaWFsaXplUmVjdXJzaXZlKE8pfX19ZWxzZSBpZihiIGluc3RhbmNlb2YgdGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5FbGVtZW50KXt0aGlzLl9zZXJpYWxpemVSZWN1cnNpdmUoYil9fX19cmV0dXJuIHRoaXMuX21WaWV3c307Vi5wcm90b3R5cGUuX2dldFZpZXdTZXJpYWxpemVyPWZ1bmN0aW9uKHYsdCl7dmFyIGc9ZnVuY3Rpb24oZSl7aWYoZS5mRnVuY3Rpb24mJmUuZkZ1bmN0aW9uLl9zYXB1aV9oYW5kbGVyTmFtZSl7dmFyIGg9ZS5mRnVuY3Rpb24uX3NhcHVpX2hhbmRsZXJOYW1lO3ZhciBjPXYuZ2V0Q29udHJvbGxlcigpO2lmKGNbaF0pe3JldHVybiBofX19O3ZhciBHPWZ1bmN0aW9uKGMpe2lmKGMuX3NhcHVpX2NvbnRyb2xJZCl7cmV0dXJuIGMuX3NhcHVpX2NvbnRyb2xJZH1yZXR1cm4gYy5nZXRJZCgpLnJlcGxhY2Uodi5jcmVhdGVJZCgiIiksIiIpfTtpZih0PT09IkhUTUwiKXtyZXR1cm4gbmV3IEgodix0aGlzLl9vV2luZG93LEcsZyl9ZWxzZSBpZih0PT09IlhNTCIpe3JldHVybiBuZXcgWCh2LHRoaXMuX29XaW5kb3csdGhpcy5fc0RlZmF1bHRYbWxOYW1lc3BhY2UsRyxnKX1lbHNle3ZhciB0PSh2KT92LmNvbnN0cnVjdG9yOiI/Ijt0aHJvdyBFcnJvcigiVmlldyB0eXBlICciK3QrIicgaXMgbm90IHN1cHBvcnRlZCBmb3IgY29udmVyc2lvbi4gT25seSBIVE1MIGFuZCBYTUwgaXMgc3VwcG9ydGVkIil9fTtyZXR1cm4gVn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5DbGllbnRQcm9wZXJ0eUJpbmRpbmcnKSl7Ci8qIQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkNsaWVudFByb3BlcnR5QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9DbGllbnRQcm9wZXJ0eUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1Byb3BlcnR5QmluZGluZyddLGZ1bmN0aW9uKHEsUCl7InVzZSBzdHJpY3QiO3ZhciBDPVAuZXh0ZW5kKCJzYXAudWkubW9kZWwuQ2xpZW50UHJvcGVydHlCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsYSl7UC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vVmFsdWU9dGhpcy5fZ2V0VmFsdWUoKX19KTtDLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9WYWx1ZX07Qy5wcm90b3R5cGUuX2dldFZhbHVlPWZ1bmN0aW9uKCl7dmFyIHA9dGhpcy5zUGF0aC5zdWJzdHIodGhpcy5zUGF0aC5sYXN0SW5kZXhPZigiLyIpKzEpO2lmKHA9PSJfX25hbWVfXyIpe3ZhciBhPXRoaXMub0NvbnRleHQuc3BsaXQoIi8iKTtyZXR1cm4gYVthLmxlbmd0aC0xXX1yZXR1cm4gdGhpcy5vTW9kZWwuZ2V0UHJvcGVydHkodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KX07Qy5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXtpZih0aGlzLm9Db250ZXh0IT1jKXt0aGlzLm9Db250ZXh0PWM7aWYodGhpcy5pc1JlbGF0aXZlKCkpe3RoaXMuY2hlY2tVcGRhdGUoKX19fTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5Db21wb3NpdGVCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkNvbXBvc2l0ZUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ29tcG9zaXRlQmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vUHJvcGVydHlCaW5kaW5nJywnLi9TaW1wbGVUeXBlJ10sZnVuY3Rpb24ocSxQLFMpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz1QLmV4dGVuZCgic2FwLnVpLm1vZGVsLkNvbXBvc2l0ZUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihiLHIpe1AuYXBwbHkodGhpcyxbbnVsbCwiIl0pO3ZhciB0PXRoaXM7dGhpcy5hQmluZGluZ3M9Yjt0aGlzLmJSYXdWYWx1ZXM9cn0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJnZXRCaW5kaW5ncyIsImF0dGFjaENoYW5nZSIsImRldGFjaENoYW5nZSJdfX0pO0MucHJvdG90eXBlLmdldFBhdGg9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07Qy5wcm90b3R5cGUuZ2V0TW9kZWw9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07Qy5wcm90b3R5cGUuZ2V0Q29udGV4dD1mdW5jdGlvbigpe3JldHVybiBudWxsfTtDLnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O0MucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7cS5lYWNoKHRoaXMuYUJpbmRpbmdzLGZ1bmN0aW9uKGksYil7aWYoIWN8fGIudXBkYXRlUmVxdWlyZWQoYy5nZXRNb2RlbCgpKSl7Yi5zZXRDb250ZXh0KGMpfX0pfTtDLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih2KXt0aHJvdyBuZXcgc2FwLnVpLmJhc2UuRXhjZXB0aW9uKCJDb21wb3NpdGUgQmluZGluZyBkb2VzIG5vdCBzdXBwb3J0IHNldFZhbHVlIGJlY2F1c2UgaXQgY29udGFpbnMgbXVsdGlwbGUgcHJvcGVydHkgYmluZGluZ3MhIil9O0MucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7dmFyIHY9W10sVjtxLmVhY2godGhpcy5hQmluZGluZ3MsZnVuY3Rpb24oaSxiKXtWPWIuZ2V0VmFsdWUoKTt2LnB1c2goVil9KTtyZXR1cm4gdn07Qy5wcm90b3R5cGUuZ2V0RXh0ZXJuYWxWYWx1ZT1mdW5jdGlvbigpe3ZhciB2PVtdLFY7aWYodGhpcy5iUmF3VmFsdWVzKXt2PXRoaXMuZ2V0VmFsdWUoKX1lbHNle3EuZWFjaCh0aGlzLmFCaW5kaW5ncyxmdW5jdGlvbihpLGIpe1Y9Yi5nZXRFeHRlcm5hbFZhbHVlKCk7di5wdXNoKFYpfSl9aWYodGhpcy5mbkZvcm1hdHRlcil7Vj10aGlzLmZuRm9ybWF0dGVyLmFwcGx5KHRoaXMsdil9ZWxzZXtpZih2Lmxlbmd0aD4xKXtWPXYuam9pbigiICIpfWVsc2V7Vj12WzBdfX1yZXR1cm4gVn07Qy5wcm90b3R5cGUuc2V0RXh0ZXJuYWxWYWx1ZT1mdW5jdGlvbih2KXt0aHJvdyBuZXcgc2FwLnVpLmJhc2UuRXhjZXB0aW9uKCJDb21wb3NpdGUgQmluZGluZyBkb2VzIG5vdCBzdXBwb3J0IHNldEV4dGVybmFsVmFsdWUgYmVjYXVzZSBpdCBjb250YWlucyBtdWx0aXBsZSBwcm9wZXJ0eSBiaW5kaW5ncyEiKX07Qy5wcm90b3R5cGUuZ2V0QmluZGluZ3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hQmluZGluZ3N9O0MucHJvdG90eXBlLmF0dGFjaENoYW5nZT1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImNoYW5nZSIsZixsKTtpZih0aGlzLmFCaW5kaW5ncyl7dmFyIHQ9dGhpcztxLmVhY2godGhpcy5hQmluZGluZ3MsZnVuY3Rpb24oaSxiKXtiLmF0dGFjaENoYW5nZSh0LmNoZWNrVXBkYXRlLHQpfSl9fTtDLnByb3RvdHlwZS5kZXRhY2hDaGFuZ2U9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJjaGFuZ2UiLGYsbCk7aWYodGhpcy5hQmluZGluZ3Mpe3ZhciB0PXRoaXM7cS5lYWNoKHRoaXMuYUJpbmRpbmdzLGZ1bmN0aW9uKGksYil7Yi5kZXRhY2hDaGFuZ2UodC5jaGVja1VwZGF0ZSx0KX0pfX07Qy5wcm90b3R5cGUudXBkYXRlUmVxdWlyZWQ9ZnVuY3Rpb24obSl7dmFyIHU9ZmFsc2U7cS5lYWNoKHRoaXMuYUJpbmRpbmdzLGZ1bmN0aW9uKGksYil7dT11fHxiLnVwZGF0ZVJlcXVpcmVkKG0pfSk7cmV0dXJuIHV9O0MucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe3ZhciB2PXRoaXMuZ2V0RXh0ZXJuYWxWYWx1ZSgpO2lmKCFxLnNhcC5lcXVhbCh2LHRoaXMub1ZhbHVlKXx8Zil7dGhpcy5vVmFsdWU9djt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5DaGFuZ2V9KX19O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmNvbnRyb2wuQ29udHJvbE1vZGVsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLmNvbnRyb2wuQ29udHJvbE1vZGVsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2NvbnRyb2wvQ29udHJvbE1vZGVsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL01vZGVsJywnLi9Db250cm9sUHJvcGVydHlCaW5kaW5nJ10sZnVuY3Rpb24ocSxNLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1NLmV4dGVuZCgic2FwLnVpLm1vZGVsLmNvbnRyb2wuQ29udHJvbE1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYyl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vQ29udHJvbD1jO3RoaXMub0NvbnRyb2wuYXR0YWNoRXZlbnQoIl9jaGFuZ2UiLHRoaXMuY2hlY2tVcGRhdGUsdGhpcyk7dGhpcy5vRWxlbWVudHM9W119fSk7YS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMub0NvbnRyb2wuZGV0YWNoRXZlbnQoIl9jaGFuZ2UiLHRoaXMuY2hlY2tVcGRhdGUsdGhpcyl9O2EucHJvdG90eXBlLmFkZEZhY2FkZUNvbXBvbmVudD1mdW5jdGlvbihlKXt2YXIgaT1xLmluQXJyYXkoZSx0aGlzLm9FbGVtZW50cyk7aWYoaTwwKXt0aGlzLm9FbGVtZW50cy5wdXNoKGUpO2UuYXR0YWNoRXZlbnQoIl9jaGFuZ2UiLHRoaXMuY2hlY2tVcGRhdGUsdGhpcyl9fTthLnByb3RvdHlwZS5yZW1vdmVGYWNhZGVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7dmFyIGk9cS5pbkFycmF5KGUsdGhpcy5vRWxlbWVudHMpO2lmKGk+PTApe3RoaXMub0VsZW1lbnRzLnNwbGljZShpLDEpO2UuZGV0YWNoRXZlbnQoIl9jaGFuZ2UiLHRoaXMuY2hlY2tVcGRhdGUsdGhpcyl9fTthLnByb3RvdHlwZS5iaW5kUHJvcGVydHk9ZnVuY3Rpb24ocCxjKXtjPWN8fHRoaXMub0NvbnRyb2w7aWYoYyE9PXRoaXMub0NvbnRyb2wpe3RoaXMuYWRkRmFjYWRlQ29tcG9uZW50KGMpfXJldHVybiBuZXcgQyh0aGlzLHAsYyl9O2EucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX29uY2hhbmdlKXt0aGlzLl9vbmNoYW5nZShlKX1pZih0aGlzLmFCaW5kaW5ncy5sZW5ndGgpe3ZhciBiPXRoaXMuYUJpbmRpbmdzLnNsaWNlKDApO3EuZWFjaChiLGZ1bmN0aW9uKGksQil7Qi5jaGVja1VwZGF0ZSgpfSl9fTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05Qcm9wZXJ0eUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuanNvbi5KU09OUHJvcGVydHlCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2pzb24vSlNPTlByb3BlcnR5QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9DbGllbnRQcm9wZXJ0eUJpbmRpbmcnXSxmdW5jdGlvbihxLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgSj1DLmV4dGVuZCgic2FwLnVpLm1vZGVsLmpzb24uSlNPTlByb3BlcnR5QmluZGluZyIpO0oucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHYpe2lmKCFxLnNhcC5lcXVhbCh0aGlzLm9WYWx1ZSx2KSl7dGhpcy5vTW9kZWwuc2V0UHJvcGVydHkodGhpcy5zUGF0aCx2LHRoaXMub0NvbnRleHQpfX07Si5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7dmFyIHY9dGhpcy5fZ2V0VmFsdWUoKTtpZighcS5zYXAuZXF1YWwodix0aGlzLm9WYWx1ZSl8fGYpe3RoaXMub1ZhbHVlPXY7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uQ2hhbmdlfSl9fTtyZXR1cm4gSn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1vZGVsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTW9kZWwnKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LmRhdGFqcycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9PRGF0YU1vZGVsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL01vZGVsJywnLi9PRGF0YVV0aWxzJywnLi9Db3VudE1vZGUnLCcuL09EYXRhQ29udGV4dEJpbmRpbmcnLCcuL09EYXRhTGlzdEJpbmRpbmcnLCcuL09EYXRhTWV0YWRhdGEnLCcuL09EYXRhUHJvcGVydHlCaW5kaW5nJywnLi9PRGF0YVRyZWVCaW5kaW5nJywnc2FwL3VpL3RoaXJkcGFydHkvVVJJJywnc2FwL3VpL3RoaXJkcGFydHkvZGF0YWpzJ10sZnVuY3Rpb24ocSxNLE8sQyxhLGIsYyxkLGUsVSxmKXsidXNlIHN0cmljdCI7dmFyIGc9TS5leHRlbmQoInNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocyxqLHUscCxoLHQsdyxsKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgaSxyLG0sQT1udWxsLEwsayxuLEQsbz10aGlzO2lmKHR5cGVvZiBqPT09Im9iamVjdCIpe3U9ai51c2VyO3A9ai5wYXNzd29yZDtoPWouaGVhZGVyczt0PWoudG9rZW5IYW5kbGluZztsPWoubG9hZE1ldGFkYXRhQXN5bmM7dz1qLndpdGhDcmVkZW50aWFsczttPWoubWF4RGF0YVNlcnZpY2VWZXJzaW9uO2k9ai51c2VCYXRjaDtyPWoucmVmcmVzaEFmdGVyQ2hhbmdlO0E9ai5hbm5vdGF0aW9uVVJJO0w9ai5sb2FkQW5ub3RhdGlvbnNKb2luZWQ7RD1qLmRlZmF1bHRDb3VudE1vZGU7bj1qLm1ldGFkYXRhTmFtZXNwYWNlcztqPWouanNvbn10aGlzLnNEZWZhdWx0QmluZGluZ01vZGU9c2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlLk9uZVdheTt0aGlzLm1TdXBwb3J0ZWRCaW5kaW5nTW9kZXM9eyJPbmVXYXkiOnRydWUsIk9uZVRpbWUiOnRydWUsIlR3b1dheSI6dHJ1ZX07dGhpcy5iQ291bnRTdXBwb3J0ZWQ9dHJ1ZTt0aGlzLmJKU09OPWo7dGhpcy5iQ2FjaGU9dHJ1ZTt0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXM9W107dGhpcy5vUmVxdWVzdFF1ZXVlPXt9O3RoaXMuYUJhdGNoT3BlcmF0aW9ucz1bXTt0aGlzLm9IYW5kbGVyO3RoaXMuYlRva2VuSGFuZGxpbmc9dCE9PWZhbHNlO3RoaXMuYldpdGhDcmVkZW50aWFscz13PT09dHJ1ZTt0aGlzLmJVc2VCYXRjaD1pPT09dHJ1ZTt0aGlzLmJSZWZyZXNoQWZ0ZXJDaGFuZ2U9ciE9PWZhbHNlO3RoaXMuc01heERhdGFTZXJ2aWNlVmVyc2lvbj1tO3RoaXMuYkxvYWRNZXRhZGF0YUFzeW5jPSEhbDt0aGlzLmJMb2FkQW5ub3RhdGlvbnNKb2luZWQ9TD09PXVuZGVmaW5lZD90cnVlOkw7dGhpcy5zQW5ub3RhdGlvblVSST1BO3RoaXMuc0RlZmF1bHRDb3VudE1vZGU9RHx8Qy5Cb3RoO3RoaXMub01ldGFkYXRhTG9hZEV2ZW50PW51bGw7dGhpcy5vTWV0YWRhdGFGYWlsZWRFdmVudD1udWxsO2lmKHRoaXMuc0Fubm90YXRpb25VUkkpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUFubm90YXRpb25zIil9dGhpcy5vSGVhZGVycz17fTt0aGlzLnNldEhlYWRlcnMoaCk7dGhpcy5vRGF0YT17fTt0aGlzLm9NZXRhZGF0YT1udWxsO3RoaXMub0Fubm90YXRpb25zPW51bGw7aWYocy5pbmRleE9mKCI/Iik9PS0xKXt0aGlzLnNTZXJ2aWNlVXJsPXN9ZWxzZXt2YXIgdj1zLnNwbGl0KCI/Iik7dGhpcy5zU2VydmljZVVybD12WzBdO3RoaXMuc1VybFBhcmFtcz12WzFdfWlmKHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFN0YXRpc3RpY3MoKSl7aWYodGhpcy5zVXJsUGFyYW1zKXt0aGlzLnNVcmxQYXJhbXM9dGhpcy5zVXJsUGFyYW1zKyImc2FwLXN0YXRpc3RpY3M9dHJ1ZSJ9ZWxzZXt0aGlzLnNVcmxQYXJhbXM9InNhcC1zdGF0aXN0aWNzPXRydWUifX10aGlzLnNTZXJ2aWNlVXJsPXRoaXMuc1NlcnZpY2VVcmwucmVwbGFjZSgvXC8kLywiIik7dGhpcy5vU2VydmljZURhdGE9Zy5tU2VydmljZURhdGFbdGhpcy5zU2VydmljZVVybF07aWYoIXRoaXMub1NlcnZpY2VEYXRhKXtnLm1TZXJ2aWNlRGF0YVt0aGlzLnNTZXJ2aWNlVXJsXT17fTt0aGlzLm9TZXJ2aWNlRGF0YT1nLm1TZXJ2aWNlRGF0YVt0aGlzLnNTZXJ2aWNlVXJsXX1pZih0aGlzLmJUb2tlbkhhbmRsaW5nJiZ0aGlzLm9TZXJ2aWNlRGF0YS5zZWN1cml0eVRva2VuKXt0aGlzLm9IZWFkZXJzWyJ4LWNzcmYtdG9rZW4iXT10aGlzLm9TZXJ2aWNlRGF0YS5zZWN1cml0eVRva2VufXRoaXMuc1VzZXI9dTt0aGlzLnNQYXNzd29yZD1wO3RoaXMub0hlYWRlcnNbIkFjY2VwdC1MYW5ndWFnZSJdPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldExhbmd1YWdlKCk7aWYoIXRoaXMub1NlcnZpY2VEYXRhLm9NZXRhZGF0YSl7dGhpcy5vTWV0YWRhdGE9bmV3IHNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1ldGFkYXRhKHRoaXMuX2NyZWF0ZVJlcXVlc3RVcmwoIiRtZXRhZGF0YSIpLHthc3luYzp0aGlzLmJMb2FkTWV0YWRhdGFBc3luYyx1c2VyOnRoaXMuc1VzZXIscGFzc3dvcmQ6dGhpcy5zUGFzc3dvcmQsaGVhZGVyczp0aGlzLm1DdXN0b21IZWFkZXJzLG5hbWVzcGFjZXM6bn0pO28ub1NlcnZpY2VEYXRhLm9NZXRhZGF0YT1vLm9NZXRhZGF0YX1lbHNle3RoaXMub01ldGFkYXRhPXRoaXMub1NlcnZpY2VEYXRhLm9NZXRhZGF0YX1pZighdGhpcy5vTWV0YWRhdGEuaXNMb2FkZWQoKSl7dGhpcy5vTWV0YWRhdGEuYXR0YWNoTG9hZGVkKGZ1bmN0aW9uKEUpe28uX2luaXRpYWxpemVNZXRhZGF0YSgpO28uaW5pdGlhbGl6ZSgpfSx0aGlzKTt0aGlzLm9NZXRhZGF0YS5hdHRhY2hGYWlsZWQodGhpcy5maXJlTWV0YWRhdGFGYWlsZWQsdGhpcyl9aWYodGhpcy5zQW5ub3RhdGlvblVSSSl7dGhpcy5vQW5ub3RhdGlvbnM9bmV3IHNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUFubm90YXRpb25zKHRoaXMuc0Fubm90YXRpb25VUkksdGhpcy5vTWV0YWRhdGEse2FzeW5jOnRoaXMuYkxvYWRNZXRhZGF0YUFzeW5jfSk7dGhpcy5vQW5ub3RhdGlvbnMuYXR0YWNoRmFpbGVkKHRoaXMuZmlyZUFubm90YXRpb25zRmFpbGVkLHRoaXMpO3RoaXMub0Fubm90YXRpb25zLmF0dGFjaExvYWRlZCh0aGlzLmZpcmVBbm5vdGF0aW9uc0xvYWRlZCx0aGlzKX1pZih0aGlzLm9NZXRhZGF0YS5pc0xvYWRlZCgpKXt0aGlzLl9pbml0aWFsaXplTWV0YWRhdGEodHJ1ZSl9aWYodGhpcy5iSlNPTil7aWYodGhpcy5zTWF4RGF0YVNlcnZpY2VWZXJzaW9uPT09IjMuMCIpe3RoaXMub0hlYWRlcnNbIkFjY2VwdCJdPSJhcHBsaWNhdGlvbi9qc29uO29kYXRhPWZ1bGxtZXRhZGF0YSJ9ZWxzZXt0aGlzLm9IZWFkZXJzWyJBY2NlcHQiXT0iYXBwbGljYXRpb24vanNvbiJ9dGhpcy5vSGFuZGxlcj1PRGF0YS5qc29uSGFuZGxlcn1lbHNle3RoaXMub0hlYWRlcnNbIkFjY2VwdCJdPSJhcHBsaWNhdGlvbi9hdG9tK3htbCxhcHBsaWNhdGlvbi9hdG9tc3ZjK3htbCxhcHBsaWNhdGlvbi94bWwiO3RoaXMub0hhbmRsZXI9T0RhdGEuYXRvbUhhbmRsZXJ9dGhpcy5vSGVhZGVyc1siTWF4RGF0YVNlcnZpY2VWZXJzaW9uIl09IjIuMCI7aWYodGhpcy5zTWF4RGF0YVNlcnZpY2VWZXJzaW9uKXt0aGlzLm9IZWFkZXJzWyJNYXhEYXRhU2VydmljZVZlcnNpb24iXT10aGlzLnNNYXhEYXRhU2VydmljZVZlcnNpb259dGhpcy5vSGVhZGVyc1siRGF0YVNlcnZpY2VWZXJzaW9uIl09IjIuMCJ9LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiY3JlYXRlIiwicmVtb3ZlIiwidXBkYXRlIiwic3VibWl0Q2hhbmdlcyIsImdldFNlcnZpY2VNZXRhZGF0YSIsInJlYWQiLCJoYXNQZW5kaW5nQ2hhbmdlcyIsInJlZnJlc2giLCJyZXNldENoYW5nZXMiLCJpc0NvdW50U3VwcG9ydGVkIiwic2V0Q291bnRTdXBwb3J0ZWQiLCJzZXREZWZhdWx0Q291bnRNb2RlIiwiZ2V0RGVmYXVsdENvdW50TW9kZSIsImZvcmNlTm9DYWNoZSIsInNldFByb3BlcnR5IiwicmVmcmVzaFNlY3VyaXR5VG9rZW4iLCJzZXRIZWFkZXJzIiwiZ2V0SGVhZGVycyIsInNldFVzZUJhdGNoIl19fSk7Zy5NX0VWRU5UUz17UmVqZWN0Q2hhbmdlOiJyZWplY3RDaGFuZ2UiLE1ldGFkYXRhTG9hZGVkOiJtZXRhZGF0YUxvYWRlZCIsTWV0YWRhdGFGYWlsZWQ6Im1ldGFkYXRhRmFpbGVkIixBbm5vdGF0aW9uc0xvYWRlZDoiYW5ub3RhdGlvbnNMb2FkZWQiLEFubm90YXRpb25zRmFpbGVkOiJhbm5vdGF0aW9uc0ZhaWxlZCJ9O2cubVNlcnZpY2VEYXRhPXt9O2cucHJvdG90eXBlLmZpcmVSZWplY3RDaGFuZ2U9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoInJlamVjdENoYW5nZSIsQSk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmF0dGFjaFJlamVjdENoYW5nZT1mdW5jdGlvbihELEYsbCl7dGhpcy5hdHRhY2hFdmVudCgicmVqZWN0Q2hhbmdlIixELEYsbCk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmRldGFjaFJlamVjdENoYW5nZT1mdW5jdGlvbihGLGwpe3RoaXMuZGV0YWNoRXZlbnQoInJlamVjdENoYW5nZSIsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuX2luaXRpYWxpemVNZXRhZGF0YT1mdW5jdGlvbihEKXt2YXIgdD10aGlzO3RoaXMuYlVzZUJhdGNoPXRoaXMuYlVzZUJhdGNofHx0aGlzLm9NZXRhZGF0YS5nZXRVc2VCYXRjaCgpO3ZhciBoPWZ1bmN0aW9uKGkpe2lmKCEhaSl7dC5tZXRhZGF0YUxvYWRFdmVudD1xLnNhcC5kZWxheWVkQ2FsbCgwLHQsaCl9ZWxzZXt0LmZpcmVNZXRhZGF0YUxvYWRlZCh7bWV0YWRhdGE6dC5vTWV0YWRhdGF9KTtxLnNhcC5sb2cuZGVidWcoIk9EYXRhTW9kZWwgZmlyZWQgbWV0YWRhdGFsb2FkZWQiKX19O2lmKHRoaXMuYkxvYWRNZXRhZGF0YUFzeW5jJiZ0aGlzLnNBbm5vdGF0aW9uVVJJJiZ0aGlzLmJMb2FkQW5ub3RhdGlvbnNKb2luZWQpe2lmKHRoaXMub0Fubm90YXRpb25zJiZ0aGlzLm9Bbm5vdGF0aW9ucy5iSW5pdGlhbGl6ZWQpe2goKX1lbHNle3RoaXMub0Fubm90YXRpb25zLmF0dGFjaExvYWRlZChmdW5jdGlvbigpe2goKX0sdGhpcyl9fWVsc2V7aChEKX19O2cucHJvdG90eXBlLmZpcmVBbm5vdGF0aW9uc0xvYWRlZD1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudCgiYW5ub3RhdGlvbnNMb2FkZWQiLEEpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5hdHRhY2hBbm5vdGF0aW9uc0xvYWRlZD1mdW5jdGlvbihELEYsbCl7dGhpcy5hdHRhY2hFdmVudCgiYW5ub3RhdGlvbnNMb2FkZWQiLEQsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuZGV0YWNoQW5ub3RhdGlvbnNMb2FkZWQ9ZnVuY3Rpb24oRixsKXt0aGlzLmRldGFjaEV2ZW50KCJhbm5vdGF0aW9uc0xvYWRlZCIsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuZmlyZUFubm90YXRpb25zRmFpbGVkPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJhbm5vdGF0aW9uc0ZhaWxlZCIsQSk7cS5zYXAubG9nLmRlYnVnKCJPRGF0YU1vZGVsIGZpcmVkIGFubm90YXRpb25zZmFpbGVkIik7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmF0dGFjaEFubm90YXRpb25zRmFpbGVkPWZ1bmN0aW9uKEQsRixsKXt0aGlzLmF0dGFjaEV2ZW50KCJhbm5vdGF0aW9uc0ZhaWxlZCIsRCxGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5kZXRhY2hBbm5vdGF0aW9uc0ZhaWxlZD1mdW5jdGlvbihGLGwpe3RoaXMuZGV0YWNoRXZlbnQoImFubm90YXRpb25zRmFpbGVkIixGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5maXJlTWV0YWRhdGFMb2FkZWQ9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoIm1ldGFkYXRhTG9hZGVkIixBKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuYXR0YWNoTWV0YWRhdGFMb2FkZWQ9ZnVuY3Rpb24oRCxGLGwpe3RoaXMuYXR0YWNoRXZlbnQoIm1ldGFkYXRhTG9hZGVkIixELEYsbCk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmRldGFjaE1ldGFkYXRhTG9hZGVkPWZ1bmN0aW9uKEYsbCl7dGhpcy5kZXRhY2hFdmVudCgibWV0YWRhdGFMb2FkZWQiLEYsbCk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmZpcmVNZXRhZGF0YUZhaWxlZD1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudCgibWV0YWRhdGFGYWlsZWQiLEEpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5hdHRhY2hNZXRhZGF0YUZhaWxlZD1mdW5jdGlvbihELEYsbCl7dGhpcy5hdHRhY2hFdmVudCgibWV0YWRhdGFGYWlsZWQiLEQsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuZGV0YWNoTWV0YWRhdGFGYWlsZWQ9ZnVuY3Rpb24oRixsKXt0aGlzLmRldGFjaEV2ZW50KCJtZXRhZGF0YUZhaWxlZCIsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuX2NyZWF0ZVJlcXVlc3RVcmw9ZnVuY3Rpb24ocCxvLHUsQixoKXt2YXIgaSxyLHMsaj0iIjtpZihwJiZwLmluZGV4T2YoJz8nKSE9LTEpe3M9cC5zdWJzdHIocC5pbmRleE9mKCc/JykrMSk7cD1wLnN1YnN0cigwLHAuaW5kZXhPZignPycpKX1yPXRoaXMuX25vcm1hbGl6ZVBhdGgocCxvKTtpZighQil7aj10aGlzLnNTZXJ2aWNlVXJsK3J9ZWxzZXtqPXIuc3Vic3RyKHIuaW5kZXhPZignLycpKzEpfWk9Ty5fY3JlYXRlVXJsUGFyYW1zQXJyYXkodSk7aWYodGhpcy5zVXJsUGFyYW1zKXtpLnB1c2godGhpcy5zVXJsUGFyYW1zKX1pZihzKXtpLnB1c2gocyl9aWYoaS5sZW5ndGg+MCl7ais9Ij8iK2kuam9pbigiJiIpfWlmKGg9PT11bmRlZmluZWQpe2g9dHJ1ZX1pZihoPT09ZmFsc2Upe3ZhciB0PXEubm93KCk7dmFyIGs9ai5yZXBsYWNlKC8oWz8mXSlfPVteJl0qLywiJDFfPSIrdCk7aj1rKygoaz09PWopPygvXD8vLnRlc3Qoaik/IiYiOiI/IikrIl89Iit0OiIiKX1yZXR1cm4gan07Zy5wcm90b3R5cGUuX2xvYWREYXRhPWZ1bmN0aW9uKHAsUCxzLEUsaCxILGkpe3ZhciByLFIsbyx0PXRoaXM7ZnVuY3Rpb24gXyhELG0pe3ZhciBuPUQsdj17fTtpZighbil7cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IE5vIGRhdGEgd2FzIHJldHJpZXZlZCBieSBzZXJ2aWNlOiAiK20ucmVxdWVzdFVyaSk7dC5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOm8ucmVxdWVzdFVyaSx0eXBlOiJHRVQiLGFzeW5jOm8uYXN5bmMsaW5mbzoiQWNjZXB0IGhlYWRlcnM6Iit0Lm9IZWFkZXJzWyJBY2NlcHQiXSxpbmZvT2JqZWN0OnthY2NlcHRIZWFkZXJzOnQub0hlYWRlcnNbIkFjY2VwdCJdfSxzdWNjZXNzOmZhbHNlfSk7cmV0dXJuIGZhbHNlfWlmKHQuYlVzZUJhdGNoKXt2YXIgdz10Ll9nZXRCYXRjaEVycm9ycyhEKTtpZih3Lmxlbmd0aD4wKXtqKHdbMF0pO3JldHVybiBmYWxzZX1pZihuLl9fYmF0Y2hSZXNwb25zZXMmJm4uX19iYXRjaFJlc3BvbnNlcy5sZW5ndGg+MCl7bj1uLl9fYmF0Y2hSZXNwb25zZXNbMF0uZGF0YX1lbHNle3Euc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiBObyBkYXRhIHdhcyByZXRyaWV2ZWQgYnkgc2VydmljZTogIittLnJlcXVlc3RVcmkpfX1sPWwuY29uY2F0KG4ucmVzdWx0cyk7aWYobi5fX25leHQpe3ZhciB4PW5ldyBVUkkobi5fX25leHQpO1I9eC5hYnNvbHV0ZVRvKG0ucmVxdWVzdFVyaSkudG9TdHJpbmcoKTtSKz10LnNVcmxQYXJhbXM/JyYnK3Quc1VybFBhcmFtczonJztvLnJlcXVlc3RVcmk9UjtrKG8pfWVsc2V7cS5leHRlbmQobi5yZXN1bHRzLGwpO2lmKG4ucmVzdWx0cyYmIXEuaXNBcnJheShuLnJlc3VsdHMpKXtuPW4ucmVzdWx0c310Ll9pbXBvcnREYXRhKG4sdik7aWYodC5zQ2hhbmdlS2V5JiZ2KXt2YXIgeT10LnNDaGFuZ2VLZXkuc3Vic3RyKHQuc0NoYW5nZUtleS5sYXN0SW5kZXhPZignLycpKzEpO2lmKHZbeV0pe2RlbGV0ZSB0Lm9SZXF1ZXN0UXVldWVbdC5zQ2hhbmdlS2V5XTt0LnNDaGFuZ2VLZXk9bnVsbH19aWYocyl7cyhuKX10LmNoZWNrVXBkYXRlKGZhbHNlLHYpO2lmKGkpe2koKX10LmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6by5yZXF1ZXN0VXJpLHR5cGU6IkdFVCIsYXN5bmM6by5hc3luYyxpbmZvOiJBY2NlcHQgaGVhZGVyczoiK3Qub0hlYWRlcnNbIkFjY2VwdCJdLGluZm9PYmplY3Q6e2FjY2VwdEhlYWRlcnM6dC5vSGVhZGVyc1siQWNjZXB0Il19LHN1Y2Nlc3M6dHJ1ZX0pfX1mdW5jdGlvbiBqKG0pe2lmKHQuYlRva2VuSGFuZGxpbmcmJm0ucmVzcG9uc2Upe3ZhciBUPXQuX2dldEhlYWRlcigieC1jc3JmLXRva2VuIixtLnJlc3BvbnNlLmhlYWRlcnMpO2lmKCFvLmJUb2tlblJlc2V0JiZtLnJlc3BvbnNlLnN0YXR1c0NvZGU9PSc0MDMnJiZUJiZULnRvTG93ZXJDYXNlKCk9PSJyZXF1aXJlZCIpe3QucmVzZXRTZWN1cml0eVRva2VuKCk7by5iVG9rZW5SZXNldD10cnVlO2soKTtyZXR1cm59fXZhciBuPXQuX2hhbmRsZUVycm9yKG0pO2lmKEUpe0UobSxyJiZyLmJBYm9ydGVkKX10LmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6by5yZXF1ZXN0VXJpLHR5cGU6IkdFVCIsYXN5bmM6by5hc3luYyxpbmZvOiJBY2NlcHQgaGVhZGVyczoiK3Qub0hlYWRlcnNbIkFjY2VwdCJdLGluZm9PYmplY3Q6e2FjY2VwdEhlYWRlcnM6dC5vSGVhZGVyc1siQWNjZXB0Il19LHN1Y2Nlc3M6ZmFsc2UsZXJyb3JvYmplY3Q6bn0pO2lmKCFyfHwhci5iQWJvcnRlZCl7dC5maXJlUmVxdWVzdEZhaWxlZChuKX19ZnVuY3Rpb24gaygpe2lmKHQuYlVzZUJhdGNoKXt0LnVwZGF0ZVNlY3VyaXR5VG9rZW4oKTt2YXIgbT1VUkkucGFyc2Uoby5yZXF1ZXN0VXJpKS5xdWVyeTt2YXIgbj10Ll9jcmVhdGVSZXF1ZXN0VXJsKHAsbnVsbCxtLHQuYlVzZUJhdGNoKTtvPXQuX2NyZWF0ZVJlcXVlc3QobiwiR0VUIix0cnVlKTt2YXIgQj10Ll9jcmVhdGVCYXRjaFJlcXVlc3QoW29dLHRydWUpO3I9dC5fcmVxdWVzdChCLF8saixPRGF0YS5iYXRjaEhhbmRsZXIsdW5kZWZpbmVkLHQuZ2V0U2VydmljZU1ldGFkYXRhKCkpfWVsc2V7cj10Ll9yZXF1ZXN0KG8sXyxqLHQub0hhbmRsZXIsdW5kZWZpbmVkLHQuZ2V0U2VydmljZU1ldGFkYXRhKCkpfWlmKEgpe3ZhciB3PXthYm9ydDpmdW5jdGlvbigpe3IuYkFib3J0ZWQ9dHJ1ZTtyLmFib3J0KCl9fTtIKHcpfX12YXIgbD1bXTt2YXIgdT10aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKHAsbnVsbCxQLG51bGwsaHx8dGhpcy5iQ2FjaGUpO289dGhpcy5fY3JlYXRlUmVxdWVzdCh1LCJHRVQiLHRydWUpO3RoaXMuZmlyZVJlcXVlc3RTZW50KHt1cmw6by5yZXF1ZXN0VXJpLHR5cGU6IkdFVCIsYXN5bmM6by5hc3luYyxpbmZvOiJBY2NlcHQgaGVhZGVyczoiK3RoaXMub0hlYWRlcnNbIkFjY2VwdCJdLGluZm9PYmplY3Q6e2FjY2VwdEhlYWRlcnM6dGhpcy5vSGVhZGVyc1siQWNjZXB0Il19fSk7aygpfTtnLnByb3RvdHlwZS5faW1wb3J0RGF0YT1mdW5jdGlvbihELGspe3ZhciB0PXRoaXMsbCxLLHIsRTtpZihELnJlc3VsdHMpe2w9W107cS5lYWNoKEQucmVzdWx0cyxmdW5jdGlvbihpLGgpe2wucHVzaCh0Ll9pbXBvcnREYXRhKGgsaykpfSk7cmV0dXJuIGx9ZWxzZXtLPXRoaXMuX2dldEtleShEKTtFPXRoaXMub0RhdGFbS107aWYoIUUpe0U9RDt0aGlzLm9EYXRhW0tdPUV9cS5lYWNoKEQsZnVuY3Rpb24obixwKXtpZihwJiYocC5fX21ldGFkYXRhJiZwLl9fbWV0YWRhdGEudXJpfHxwLnJlc3VsdHMpJiYhcC5fX2RlZmVycmVkKXtyPXQuX2ltcG9ydERhdGEocCxrKTtpZihxLmlzQXJyYXkocikpe0Vbbl09e19fbGlzdDpyfX1lbHNle0Vbbl09e19fcmVmOnJ9fX1lbHNlIGlmKCFwfHwhcC5fX2RlZmVycmVkKXtFW25dPXB9fSk7a1tLXT10cnVlO3JldHVybiBLfX07Zy5wcm90b3R5cGUuX3JlbW92ZVJlZmVyZW5jZXM9ZnVuY3Rpb24oRCl7dmFyIHQ9dGhpcyxsO2lmKEQucmVzdWx0cyl7bD1bXTtxLmVhY2goRC5yZXN1bHRzLGZ1bmN0aW9uKGksaCl7bC5wdXNoKHQuX3JlbW92ZVJlZmVyZW5jZXMoaCkpfSk7cmV0dXJuIGx9ZWxzZXtxLmVhY2goRCxmdW5jdGlvbihwLG8pe2lmKG8pe2lmKG9bIl9fcmVmIl18fG9bIl9fbGlzdCJdKXtkZWxldGUgRFtwXX19fSk7cmV0dXJuIER9fTtnLnByb3RvdHlwZS5fcmVzdG9yZVJlZmVyZW5jZXM9ZnVuY3Rpb24oRCl7dmFyIHQ9dGhpcyxvLGwscj1bXTtpZihELnJlc3VsdHMpe2w9W107cS5lYWNoKEQucmVzdWx0cyxmdW5jdGlvbihpLGgpe2wucHVzaCh0Ll9yZXN0b3JlUmVmZXJlbmNlcyhoKSl9KTtyZXR1cm4gbH1lbHNle3EuZWFjaChELGZ1bmN0aW9uKHAsbyl7aWYobyYmb1siX19yZWYiXSl7dmFyIGg9dC5fZ2V0T2JqZWN0KCIvIitvWyJfX3JlZiJdKTtpZihoKXtkZWxldGUgb1siX19yZWYiXTtEW3BdPWg7dC5fcmVzdG9yZVJlZmVyZW5jZXMoaCl9fWVsc2UgaWYobyYmb1siX19saXN0Il0pe3EuZWFjaChvWyJfX2xpc3QiXSxmdW5jdGlvbihqLEUpe3ZhciBoPXQuX2dldE9iamVjdCgiLyIrb1siX19saXN0Il1bal0pO2lmKGgpe3IucHVzaChoKTt0Ll9yZXN0b3JlUmVmZXJlbmNlcyhoKX19KTtkZWxldGUgb1siX19saXN0Il07by5yZXN1bHRzPXI7cj1bXX19KTtyZXR1cm4gRH19O2cucHJvdG90eXBlLnJlbW92ZURhdGE9ZnVuY3Rpb24oKXt0aGlzLm9EYXRhPXt9fTtnLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7dmFyIEI9dGhpcy5hQmluZGluZ3Muc2xpY2UoMCk7cS5lYWNoKEIsZnVuY3Rpb24oaSxvKXtvLmluaXRpYWxpemUoKX0pfTtnLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKEYsbSxFKXt2YXIgQj10aGlzLmFCaW5kaW5ncy5zbGljZSgwKTtxLmVhY2goQixmdW5jdGlvbihpLG8pe28ucmVmcmVzaChGLG0sRSl9KX07Zy5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oRixtKXt2YXIgQj10aGlzLmFCaW5kaW5ncy5zbGljZSgwKTtxLmVhY2goQixmdW5jdGlvbihpLG8pe28uY2hlY2tVcGRhdGUoRixtKX0pfTtnLnByb3RvdHlwZS5iaW5kUHJvcGVydHk9ZnVuY3Rpb24ocCxvLFApe3ZhciBCPW5ldyBkKHRoaXMscCxvLFApO3JldHVybiBCfTtnLnByb3RvdHlwZS5iaW5kTGlzdD1mdW5jdGlvbihwLG8scyxGLFApe3ZhciBCPW5ldyBiKHRoaXMscCxvLHMsRixQKTtyZXR1cm4gQn07Zy5wcm90b3R5cGUuYmluZFRyZWU9ZnVuY3Rpb24ocCxvLEYsUCl7dmFyIEI9bmV3IGUodGhpcyxwLG8sRixQKTtyZXR1cm4gQn07Zy5wcm90b3R5cGUuY3JlYXRlQmluZGluZ0NvbnRleHQ9ZnVuY3Rpb24ocCxvLFAsaCxyKXt2YXIgcj0hIXIsRj10aGlzLnJlc29sdmUocCxvKTtpZih0eXBlb2Ygbz09ImZ1bmN0aW9uIil7aD1vO289bnVsbH1pZih0eXBlb2YgUD09ImZ1bmN0aW9uIil7aD1QO1A9bnVsbH12YXIgRD10aGlzLl9nZXRPYmplY3QocCxvKSxrLG4sdD10aGlzO2lmKCFyKXtyPXRoaXMuX2lzUmVsb2FkTmVlZGVkKEYsRCxQKX1pZighcil7az10aGlzLl9nZXRLZXkoRCk7bj10aGlzLmdldENvbnRleHQoJy8nK2spO2gobil9ZWxzZXt2YXIgaT0hcS5zYXAuc3RhcnRzV2l0aChwLCIvIik7aWYoRil7dmFyIGo9W10scz10aGlzLmNyZWF0ZUN1c3RvbVBhcmFtcyhQKTtpZihzKXtqLnB1c2gocyl9dGhpcy5fbG9hZERhdGEoRixqLGZ1bmN0aW9uKEQpe2s9RD90Ll9nZXRLZXkoRCk6dW5kZWZpbmVkO2lmKGsmJm8mJmkpe3ZhciBsPW8uZ2V0UGF0aCgpO2w9bC5zdWJzdHIoMSk7aWYodC5vRGF0YVtsXSl7dC5vRGF0YVtsXVtwXT17X19yZWY6a319fW49dC5nZXRDb250ZXh0KCcvJytrKTtoKG4pfSxmdW5jdGlvbigpe2gobnVsbCl9KX1lbHNle2gobnVsbCl9fX07Zy5wcm90b3R5cGUuX2lzUmVsb2FkTmVlZGVkPWZ1bmN0aW9uKEYsRCxwKXt2YXIgbixOPVtdLHMsUz1bXTtpZighRCl7cmV0dXJuIHRydWV9aWYocCYmcFsiZXhwYW5kIl0pe249cFsiZXhwYW5kIl0ucmVwbGFjZSgvXHMvZywiIik7Tj1uLnNwbGl0KCcsJyl9aWYocCYmcFsic2VsZWN0Il0pe3M9cFsic2VsZWN0Il0ucmVwbGFjZSgvXHMvZywiIik7Uz1zLnNwbGl0KCcsJyl9Zm9yKHZhciBpPTA7aTxOLmxlbmd0aDtpKyspe2lmKERbTltpXV09PT11bmRlZmluZWR8fChEW05baV1dJiZEW05baV1dLl9fZGVmZXJyZWQpKXtyZXR1cm4gdHJ1ZX19Zm9yKHZhciBpPTA7aTxTLmxlbmd0aDtpKyspe2lmKERbU1tpXV09PT11bmRlZmluZWQpe3JldHVybiB0cnVlfX1pZihTLmxlbmd0aD09MCl7dmFyIEU9dGhpcy5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgoRik7aWYoIUUpe3JldHVybiBmYWxzZX1lbHNle2Zvcih2YXIgaT0wO2k8RS5wcm9wZXJ0eS5sZW5ndGg7aSsrKXtpZihEW0UucHJvcGVydHlbaV0ubmFtZV09PT11bmRlZmluZWQpe3JldHVybiB0cnVlfX19fXJldHVybiBmYWxzZX07Zy5wcm90b3R5cGUuZGVzdHJveUJpbmRpbmdDb250ZXh0PWZ1bmN0aW9uKG8pe307Zy5wcm90b3R5cGUuY3JlYXRlQ3VzdG9tUGFyYW1zPWZ1bmN0aW9uKHApe3ZhciBoPVtdLG0scz17ZXhwYW5kOnRydWUsc2VsZWN0OnRydWV9O2Zvcih2YXIgbiBpbiBwKXtpZihuIGluIHMpe2gucHVzaCgiJCIrbisiPSIrcS5zYXAuZW5jb2RlVVJMKHBbbl0pKX1pZihuPT0iY3VzdG9tIil7bT1wW25dO2Zvcih2YXIgbiBpbiBtKXtpZihuLmluZGV4T2YoIiQiKT09MCl7cS5zYXAubG9nLndhcm5pbmcoIlRyeWluZyB0byBzZXQgT0RhdGEgcGFyYW1ldGVyICIrbisiIGFzIGN1c3RvbSBxdWVyeSBvcHRpb24hIil9ZWxzZXtoLnB1c2gobisiPSIrcS5zYXAuZW5jb2RlVVJMKG1bbl0pKX19fX1yZXR1cm4gaC5qb2luKCImIil9O2cucHJvdG90eXBlLmJpbmRDb250ZXh0PWZ1bmN0aW9uKHAsbyxQKXt2YXIgQj1uZXcgYSh0aGlzLHAsbyxQKTtyZXR1cm4gQn07Zy5wcm90b3R5cGUuc2V0Q291bnRTdXBwb3J0ZWQ9ZnVuY3Rpb24oaCl7dGhpcy5iQ291bnRTdXBwb3J0ZWQ9aH07Zy5wcm90b3R5cGUuaXNDb3VudFN1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJDb3VudFN1cHBvcnRlZH07Zy5wcm90b3R5cGUuc2V0RGVmYXVsdENvdW50TW9kZT1mdW5jdGlvbihzKXt0aGlzLnNEZWZhdWx0Q291bnRNb2RlPXN9O2cucHJvdG90eXBlLmdldERlZmF1bHRDb3VudE1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zRGVmYXVsdENvdW50TW9kZX07Zy5wcm90b3R5cGUuX2dldEtleT1mdW5jdGlvbihvKXt2YXIgayx1O2lmKG8gaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuQ29udGV4dCl7az1vLmdldFBhdGgoKS5zdWJzdHIoMSl9ZWxzZSBpZihvJiZvLl9fbWV0YWRhdGEmJm8uX19tZXRhZGF0YS51cmkpe3U9by5fX21ldGFkYXRhLnVyaTtrPXUuc3Vic3RyKHUubGFzdEluZGV4T2YoIi8iKSsxKX1yZXR1cm4ga307Zy5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24ocCxvLGkpe3ZhciB2PXRoaXMuX2dldE9iamVjdChwLG8pO2lmKGk9PW51bGx8fGk9PXVuZGVmaW5lZCl7cmV0dXJuIHZ9aWYoIXEuaXNQbGFpbk9iamVjdCh2KSl7cmV0dXJuIHZ9dj1xLmV4dGVuZCh0cnVlLHt9LHYpO2lmKGk9PXRydWUpe3JldHVybiB0aGlzLl9yZXN0b3JlUmVmZXJlbmNlcyh2KX1lbHNle3JldHVybiB0aGlzLl9yZW1vdmVSZWZlcmVuY2VzKHYpfX07Zy5wcm90b3R5cGUuX2dldE9iamVjdD1mdW5jdGlvbihwLG8pe3ZhciBuPXRoaXMuaXNMZWdhY3lTeW50YXgoKT90aGlzLm9EYXRhOm51bGwscixrO2lmKHRoaXMub01ldGFkYXRhJiZwJiZwLmluZGV4T2YoJyMnKT4tMSl7cj10aGlzLnJlc29sdmUocCxvKTtpZihyKXtuPXRoaXMub01ldGFkYXRhLl9nZXRBbm5vdGF0aW9uKHIpfX1lbHNle2lmKG8pe2s9by5nZXRQYXRoKCk7az1rLnN1YnN0cigxKTtuPXRoaXMub0RhdGFba119aWYoIXApe3JldHVybiBufXZhciBQPXAuc3BsaXQoIi8iKSxpPTA7aWYoIVBbMF0pe249dGhpcy5vRGF0YTtpKyt9d2hpbGUobiYmUFtpXSl7bj1uW1BbaV1dO2lmKG4pe2lmKG4uX19yZWYpe249dGhpcy5vRGF0YVtuLl9fcmVmXX1lbHNlIGlmKG4uX19saXN0KXtuPW4uX19saXN0fWVsc2UgaWYobi5fX2RlZmVycmVkKXtuPW51bGx9fWkrK319cmV0dXJuIG59O2cucHJvdG90eXBlLnVwZGF0ZVNlY3VyaXR5VG9rZW49ZnVuY3Rpb24oKXtpZih0aGlzLmJUb2tlbkhhbmRsaW5nKXtpZighdGhpcy5vU2VydmljZURhdGEuc2VjdXJpdHlUb2tlbil7dGhpcy5yZWZyZXNoU2VjdXJpdHlUb2tlbigpfWlmKHRoaXMuYlRva2VuSGFuZGxpbmcpe3RoaXMub0hlYWRlcnNbIngtY3NyZi10b2tlbiJdPXRoaXMub1NlcnZpY2VEYXRhLnNlY3VyaXR5VG9rZW59fX07Zy5wcm90b3R5cGUucmVzZXRTZWN1cml0eVRva2VuPWZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMub1NlcnZpY2VEYXRhLnNlY3VyaXR5VG9rZW47ZGVsZXRlIHRoaXMub0hlYWRlcnNbIngtY3NyZi10b2tlbiJdfTtnLnByb3RvdHlwZS5yZWZyZXNoU2VjdXJpdHlUb2tlbj1mdW5jdGlvbihzLEUsQSl7dmFyIHQ9dGhpcyx1LFQ7QT1BPT09dHJ1ZTt1PXRoaXMuX2NyZWF0ZVJlcXVlc3RVcmwoIi8iKTt2YXIgcj10aGlzLl9jcmVhdGVSZXF1ZXN0KHUsIkdFVCIsQSk7ci5oZWFkZXJzWyJ4LWNzcmYtdG9rZW4iXT0iRmV0Y2giO2Z1bmN0aW9uIF8oRCxSKXtpZihSKXtUPXQuX2dldEhlYWRlcigieC1jc3JmLXRva2VuIixSLmhlYWRlcnMpO2lmKFQpe3Qub1NlcnZpY2VEYXRhLnNlY3VyaXR5VG9rZW49VDt0Lm9IZWFkZXJzWyJ4LWNzcmYtdG9rZW4iXT1UfWVsc2V7dC5yZXNldFNlY3VyaXR5VG9rZW4oKTt0LmJUb2tlbkhhbmRsaW5nPWZhbHNlfX1pZihzKXtzKEQsUil9fWZ1bmN0aW9uIGgobyl7dC5yZXNldFNlY3VyaXR5VG9rZW4oKTt0LmJUb2tlbkhhbmRsaW5nPWZhbHNlO3QuX2hhbmRsZUVycm9yKG8pO2lmKEUpe0Uobyl9fXJldHVybiB0aGlzLl9yZXF1ZXN0KHIsXyxoLHVuZGVmaW5lZCx1bmRlZmluZWQsdGhpcy5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl9O2cucHJvdG90eXBlLl9zdWJtaXRSZXF1ZXN0PWZ1bmN0aW9uKHIsQixzLEUsaCxpKXt2YXIgdD10aGlzLFIsbT17fTtmdW5jdGlvbiBfKEQsbyl7aWYoQiYmaCl7dmFyIGw9dC5fZ2V0QmF0Y2hFcnJvcnMoRCk7aWYobC5sZW5ndGg+MCl7aihsWzBdKTtyZXR1cm4gZmFsc2V9aWYoRC5fX2JhdGNoUmVzcG9uc2VzJiZELl9fYmF0Y2hSZXNwb25zZXMubGVuZ3RoPjApe1I9RC5fX2JhdGNoUmVzcG9uc2VzWzBdLmRhdGE7aWYoIVImJkQuX19iYXRjaFJlc3BvbnNlc1swXS5fX2NoYW5nZVJlc3BvbnNlcyl7Uj1ELl9fYmF0Y2hSZXNwb25zZXNbMF0uX19jaGFuZ2VSZXNwb25zZXNbMF0uZGF0YX19RD1SfWlmKGkpe2lmKEQmJkQuX19iYXRjaFJlc3BvbnNlcyl7cS5lYWNoKEQuX19iYXRjaFJlc3BvbnNlcyxmdW5jdGlvbihJLG8pe2lmKG8mJm8uZGF0YSl7dC5faW1wb3J0RGF0YShvLmRhdGEsbSl9fSl9fXQuX2hhbmRsZUVUYWcocixvLEIpO3QuX3VwZGF0ZVJlcXVlc3RRdWV1ZShyLEIpO2lmKHQuX2lzUmVmcmVzaE5lZWRlZChyLG8pKXt0LnJlZnJlc2goZmFsc2Usci5rZXlzLHIuZW50aXR5VHlwZXMpfWlmKHMpe3MoRCxvKX19ZnVuY3Rpb24gaihvKXtpZih0LmJUb2tlbkhhbmRsaW5nJiZvLnJlc3BvbnNlKXt2YXIgVD10Ll9nZXRIZWFkZXIoIngtY3NyZi10b2tlbiIsby5yZXNwb25zZS5oZWFkZXJzKTtpZighci5iVG9rZW5SZXNldCYmby5yZXNwb25zZS5zdGF0dXNDb2RlPT0nNDAzJyYmVCYmVC50b0xvd2VyQ2FzZSgpPT0icmVxdWlyZWQiKXt0LnJlc2V0U2VjdXJpdHlUb2tlbigpO3IuYlRva2VuUmVzZXQ9dHJ1ZTtrKCk7cmV0dXJufX10Ll9oYW5kbGVFcnJvcihvKTtpZihFKXtFKG8pfX1mdW5jdGlvbiBrKCl7aWYodC5iVG9rZW5IYW5kbGluZyYmci5tZXRob2QhPT0iR0VUIil7dC51cGRhdGVTZWN1cml0eVRva2VuKCk7aWYodC5iVG9rZW5IYW5kbGluZyl7ci5oZWFkZXJzWyJ4LWNzcmYtdG9rZW4iXT10Lm9TZXJ2aWNlRGF0YS5zZWN1cml0eVRva2VufX1pZihCKXtyZXR1cm4gdC5fcmVxdWVzdChyLF8saixPRGF0YS5iYXRjaEhhbmRsZXIsdW5kZWZpbmVkLHQuZ2V0U2VydmljZU1ldGFkYXRhKCkpfWVsc2V7cmV0dXJuIHQuX3JlcXVlc3QocixfLGosdC5vSGFuZGxlcix1bmRlZmluZWQsdC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl9fXJldHVybiBrKCl9O2cucHJvdG90eXBlLl9jcmVhdGVCYXRjaFJlcXVlc3Q9ZnVuY3Rpb24oQixBKXt2YXIgdSxyLG89e30scD17fSxoPVtdLEs9e30sRT17fTtwLl9fYmF0Y2hSZXF1ZXN0cz1CO3U9dGhpcy5zU2VydmljZVVybCsiLyRiYXRjaCI7aWYodGhpcy5zVXJsUGFyYW1zKXt1Kz0iPyIrdGhpcy5zVXJsUGFyYW1zfXEuZXh0ZW5kKG8sdGhpcy5tQ3VzdG9tSGVhZGVycyx0aGlzLm9IZWFkZXJzKTtkZWxldGUgb1siQ29udGVudC1UeXBlIl07cj17aGVhZGVyczpvLHJlcXVlc3RVcmk6dSxtZXRob2Q6IlBPU1QiLGRhdGE6cCx1c2VyOnRoaXMuc1VzZXIscGFzc3dvcmQ6dGhpcy5zUGFzc3dvcmQsYXN5bmM6QX07aWYoQSl7ci53aXRoQ3JlZGVudGlhbHM9dGhpcy5iV2l0aENyZWRlbnRpYWxzfXEuZWFjaChCLGZ1bmN0aW9uKGksbSl7aWYobVsiX19jaGFuZ2VSZXF1ZXN0cyJdKXtxLmVhY2gobVsiX19jaGFuZ2VSZXF1ZXN0cyJdLGZ1bmN0aW9uKGosbil7aWYobi5rZXlzJiZuLm1ldGhvZCE9IlBPU1QiKXtxLmVhY2gobi5rZXlzLGZ1bmN0aW9uKGsscyl7S1trXT1zfSl9ZWxzZSBpZihuLmVudGl0eVR5cGVzJiZuLm1ldGhvZD09IlBPU1QiKXtxLmVhY2gobi5lbnRpdHlUeXBlcyxmdW5jdGlvbihsLHMpe0VbbF09c30pfX0pfX0pO3Iua2V5cz1LO3IuZW50aXR5VHlwZXM9RTtyZXR1cm4gcn07Zy5wcm90b3R5cGUuX2hhbmRsZUVUYWc9ZnVuY3Rpb24ocixSLEIpe3ZhciB1LEUsaCxrLGwsbTtpZihCKXtsPXIuZGF0YS5fX2JhdGNoUmVxdWVzdHM7bT1SLmRhdGEuX19iYXRjaFJlc3BvbnNlcztpZihtJiZsKXtmb3IodmFyIGk9MDtpPGwubGVuZ3RoO2krKyl7aD1sW2ldLl9fY2hhbmdlUmVxdWVzdHM7aWYobVtpXSl7az1tW2ldLl9fY2hhbmdlUmVzcG9uc2VzO2lmKGgmJmspe2Zvcih2YXIgaj0wO2o8aC5sZW5ndGg7aisrKXtpZihoW2pdLm1ldGhvZD09Ik1FUkdFInx8aFtqXS5tZXRob2Q9PSJQVVQiKXt1PWhbal0ucmVxdWVzdFVyaS5yZXBsYWNlKHRoaXMuc1NlcnZpY2VVcmwrJy8nLCcnKTtpZighcS5zYXAuc3RhcnRzV2l0aCh1LCIvIikpe3U9Ii8iK3V9RT10aGlzLl9nZXRPYmplY3QodSk7aWYoRSYmRS5fX21ldGFkYXRhJiZrW2pdLmhlYWRlcnMmJmtbal0uaGVhZGVycy5FVGFnKXtFLl9fbWV0YWRhdGEuZXRhZz1rW2pdLmhlYWRlcnMuRVRhZ319fX19ZWxzZXtxLnNhcC5sb2cud2FybmluZygiY291bGQgbm90IHVwZGF0ZSBFVGFncyBmb3IgYmF0Y2ggcmVxdWVzdDogY29ycmVzcG9uZGluZyByZXNwb25zZSBmb3IgcmVxdWVzdCBtaXNzaW5nIil9fX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJjb3VsZCBub3QgdXBkYXRlIEVUYWdzIGZvciBiYXRjaCByZXF1ZXN0OiBubyBiYXRjaCByZXNwb25zZXMvcmVxdWVzdHMgYXZhaWxhYmxlIil9fWVsc2V7dT1yLnJlcXVlc3RVcmkucmVwbGFjZSh0aGlzLnNTZXJ2aWNlVXJsKycvJywnJyk7aWYoIXEuc2FwLnN0YXJ0c1dpdGgodSwiLyIpKXt1PSIvIit1fUU9dGhpcy5fZ2V0T2JqZWN0KHUpO2lmKEUmJkUuX19tZXRhZGF0YSYmUi5oZWFkZXJzLkVUYWcpe0UuX19tZXRhZGF0YS5ldGFnPVIuaGVhZGVycy5FVGFnfX19O2cucHJvdG90eXBlLl9oYW5kbGVCYXRjaEVycm9ycz1mdW5jdGlvbihyLEQpe3ZhciBFPVtdO0U9dGhpcy5fZ2V0QmF0Y2hFcnJvcnMoRCk7dGhpcy5faGFuZGxlRVRhZygpfTtnLnByb3RvdHlwZS5fZ2V0QmF0Y2hFcnJvcnM9ZnVuY3Rpb24oRCl7dmFyIEU9W10scztxLmVhY2goRC5fX2JhdGNoUmVzcG9uc2VzLGZ1bmN0aW9uKGksbyl7aWYoby5tZXNzYWdlKXtzPSJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6ICIrby5tZXNzYWdlO2lmKG8ucmVzcG9uc2Upe3MrPW8ucmVzcG9uc2Uuc3RhdHVzQ29kZSsiLCIrby5yZXNwb25zZS5zdGF0dXNUZXh0KyIsIitvLnJlc3BvbnNlLmJvZHl9RS5wdXNoKG8pO3Euc2FwLmxvZy5mYXRhbChzKX1pZihvLl9fY2hhbmdlUmVzcG9uc2VzKXtxLmVhY2goby5fX2NoYW5nZVJlc3BvbnNlcyxmdW5jdGlvbihpLGgpe2lmKGgubWVzc2FnZSl7cz0iVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiAiK2gubWVzc2FnZTtpZihoLnJlc3BvbnNlKXtzKz1oLnJlc3BvbnNlLnN0YXR1c0NvZGUrIiwiK2gucmVzcG9uc2Uuc3RhdHVzVGV4dCsiLCIraC5yZXNwb25zZS5ib2R5fUUucHVzaChoKTtxLnNhcC5sb2cuZmF0YWwocyl9fSl9fSk7cmV0dXJuIEV9O2cucHJvdG90eXBlLl9oYW5kbGVFcnJvcj1mdW5jdGlvbihFKXt2YXIgcD17fSxoLHQ7dmFyIHM9IlRoZSBmb2xsb3dpbmcgcHJvYmxlbSBvY2N1cnJlZDogIitFLm1lc3NhZ2U7cC5tZXNzYWdlPUUubWVzc2FnZTtpZihFLnJlc3BvbnNlKXtpZih0aGlzLmJUb2tlbkhhbmRsaW5nKXt0PXRoaXMuX2dldEhlYWRlcigieC1jc3JmLXRva2VuIixFLnJlc3BvbnNlLmhlYWRlcnMpO2lmKEUucmVzcG9uc2Uuc3RhdHVzQ29kZT09JzQwMycmJnQmJnQudG9Mb3dlckNhc2UoKT09InJlcXVpcmVkIil7dGhpcy5yZXNldFNlY3VyaXR5VG9rZW4oKX19cys9RS5yZXNwb25zZS5zdGF0dXNDb2RlKyIsIitFLnJlc3BvbnNlLnN0YXR1c1RleHQrIiwiK0UucmVzcG9uc2UuYm9keTtwLnN0YXR1c0NvZGU9RS5yZXNwb25zZS5zdGF0dXNDb2RlO3Auc3RhdHVzVGV4dD1FLnJlc3BvbnNlLnN0YXR1c1RleHQ7cC5yZXNwb25zZVRleHQ9RS5yZXNwb25zZS5ib2R5fXEuc2FwLmxvZy5mYXRhbChzKTtyZXR1cm4gcH07Zy5wcm90b3R5cGUuZ2V0RGF0YT1mdW5jdGlvbihwLG8saSl7cmV0dXJuIHRoaXMuZ2V0UHJvcGVydHkocCxvLGkpfTtnLnByb3RvdHlwZS5fZ2V0RVRhZz1mdW5jdGlvbihwLFAsRSl7dmFyIHMsaCxpO2lmKEUpe3M9RX1lbHNle2lmKFAmJlAuX19tZXRhZGF0YSl7cz1QLl9fbWV0YWRhdGEuZXRhZ31lbHNlIGlmKHApe2g9cC5yZXBsYWNlKHRoaXMuc1NlcnZpY2VVcmwrJy8nLCcnKTtpPWguaW5kZXhPZigiPyIpO2lmKGk+LTEpe2g9aC5zdWJzdHIoMCxpKX1pZih0aGlzLm9EYXRhLmhhc093blByb3BlcnR5KGgpKXtzPXRoaXMuZ2V0UHJvcGVydHkoJy8nK2grJy9fX21ldGFkYXRhL2V0YWcnKX19fXJldHVybiBzfTtnLnByb3RvdHlwZS5fY3JlYXRlUmVxdWVzdD1mdW5jdGlvbih1LG0sQSxwLEUpe3ZhciBvPXt9LHM7cS5leHRlbmQobyx0aGlzLm1DdXN0b21IZWFkZXJzLHRoaXMub0hlYWRlcnMpO3M9dGhpcy5fZ2V0RVRhZyh1LHAsRSk7aWYocyYmbSE9IkdFVCIpe29bIklmLU1hdGNoIl09c31pZih0aGlzLmJKU09OJiZtIT0iREVMRVRFIiYmdGhpcy5zTWF4RGF0YVNlcnZpY2VWZXJzaW9uPT09IjIuMCIpe29bIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi9qc29uIn1pZihtPT0iTUVSR0UiJiYhdGhpcy5iVXNlQmF0Y2gpe29bIngtaHR0cC1tZXRob2QiXT0iTUVSR0UiO209IlBPU1QifXZhciByPXtoZWFkZXJzOm8scmVxdWVzdFVyaTp1LG1ldGhvZDptLHVzZXI6dGhpcy5zVXNlcixwYXNzd29yZDp0aGlzLnNQYXNzd29yZCxhc3luYzpBfTtpZihwKXtyLmRhdGE9cH1pZihBKXtyLndpdGhDcmVkZW50aWFscz10aGlzLmJXaXRoQ3JlZGVudGlhbHN9cmV0dXJuIHJ9O2cucHJvdG90eXBlLl9pc1JlZnJlc2hOZWVkZWQ9ZnVuY3Rpb24ocixSKXt2YXIgaD1mYWxzZSxFLGk9W10sdD10aGlzO2lmKCF0aGlzLmJSZWZyZXNoQWZ0ZXJDaGFuZ2Upe3JldHVybiBofWlmKHIuZGF0YSYmcS5pc0FycmF5KHIuZGF0YS5fX2JhdGNoUmVxdWVzdHMpKXtpZihSKXtpPXQuX2dldEJhdGNoRXJyb3JzKFIuZGF0YSk7cS5lYWNoKGksZnVuY3Rpb24oSSxvKXtpZihvLnJlc3BvbnNlJiZvLnJlc3BvbnNlLnN0YXR1c0NvZGU9PSI0MTIiKXtFPW8ucmVzcG9uc2Uuc3RhdHVzQ29kZTtyZXR1cm4gZmFsc2V9fSk7aWYoISFFKXtyZXR1cm4gZmFsc2V9fXEuZWFjaChyLmRhdGEuX19iYXRjaFJlcXVlc3RzLGZ1bmN0aW9uKEksQil7aWYocS5pc0FycmF5KEIuX19jaGFuZ2VSZXF1ZXN0cykpe3EuZWFjaChCLl9fY2hhbmdlUmVxdWVzdHMsZnVuY3Rpb24oSSxvKXtoPWh8fHQuX2lzUmVmcmVzaE5lZWRlZChvKTtyZXR1cm4haH0pfXJldHVybiFofSl9ZWxzZXtpZihyLm1ldGhvZD09PSJHRVQiKXtyZXR1cm4gZmFsc2V9ZWxzZXtpZihSJiZSLnN0YXR1c0NvZGU9PSI0MTIiKXtoPWZhbHNlfWVsc2V7aD10cnVlfX19cmV0dXJuIGh9O2cucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihwLEQsUCl7dmFyIHMsRSxtLHIsdSxvLGgsUixCLGksUyxrLGosQT1mYWxzZTtpZihQIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkNvbnRleHR8fGFyZ3VtZW50cy5sZW5ndGg+Myl7bz1QO3M9YXJndW1lbnRzWzNdO0U9YXJndW1lbnRzWzRdO209YXJndW1lbnRzWzVdfWVsc2V7bz1QLmNvbnRleHR8fFAub0NvbnRleHQ7cz1QLnN1Y2Nlc3N8fFAuZm5TdWNjZXNzO0U9UC5lcnJvcnx8UC5mbkVycm9yO2g9UC5lVGFnfHxQLnNFVGFnO209dHlwZW9mKFAubWVyZ2UpPT0idW5kZWZpbmVkIj9QLmJNZXJnZT09PXRydWU6UC5tZXJnZT09PXRydWU7QT10eXBlb2YoUC5hc3luYyk9PSJ1bmRlZmluZWQiP1AuYkFzeW5jPT09dHJ1ZTpQLmFzeW5jPT09dHJ1ZTtqPVAudXJsUGFyYW1ldGVyc311PXRoaXMuX2NyZWF0ZVJlcXVlc3RVcmwocCxvLGosdGhpcy5iVXNlQmF0Y2gpO2lmKG0pe3I9dGhpcy5fY3JlYXRlUmVxdWVzdCh1LCJNRVJHRSIsQSxELGgpfWVsc2V7cj10aGlzLl9jcmVhdGVSZXF1ZXN0KHUsIlBVVCIsQSxELGgpfXA9dGhpcy5fbm9ybWFsaXplUGF0aChwLG8pO1M9dGhpcy5fZ2V0T2JqZWN0KHApO3Iua2V5cz17fTtpZihTKXtrPXRoaXMuX2dldEtleShTKTtyLmtleXNba109dHJ1ZX1pZih0aGlzLmJVc2VCYXRjaCl7Qj10aGlzLl9jcmVhdGVCYXRjaFJlcXVlc3QoW3tfX2NoYW5nZVJlcXVlc3RzOltyXX1dLEEpO1I9dGhpcy5fc3VibWl0UmVxdWVzdChCLHRoaXMuYlVzZUJhdGNoLHMsRSx0cnVlKX1lbHNle1I9dGhpcy5fc3VibWl0UmVxdWVzdChyLHRoaXMuYlVzZUJhdGNoLHMsRSl9cmV0dXJuIFJ9O2cucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbihwLEQsUCl7dmFyIHIsQix1LFIscyxFLG8sUyxoLEE9ZmFsc2UsbTtpZihQJiZ0eXBlb2YoUCk9PSJvYmplY3QiJiYhKFAgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuQ29udGV4dCkpe289UC5jb250ZXh0O1M9UC5zdWNjZXNzO209UC51cmxQYXJhbWV0ZXJzO2g9UC5lcnJvcjtBPVAuYXN5bmM9PT10cnVlfWVsc2V7bz1QO1M9YXJndW1lbnRzWzNdO2g9YXJndW1lbnRzWzRdfXU9dGhpcy5fY3JlYXRlUmVxdWVzdFVybChwLG8sbSx0aGlzLmJVc2VCYXRjaCk7cj10aGlzLl9jcmVhdGVSZXF1ZXN0KHUsIlBPU1QiLEEsRCk7cD10aGlzLl9ub3JtYWxpemVQYXRoKHAsbyk7RT10aGlzLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChwKTtyLmVudGl0eVR5cGVzPXt9O2lmKEUpe3IuZW50aXR5VHlwZXNbRS5lbnRpdHlUeXBlXT10cnVlfWlmKHRoaXMuYlVzZUJhdGNoKXtCPXRoaXMuX2NyZWF0ZUJhdGNoUmVxdWVzdChbe19fY2hhbmdlUmVxdWVzdHM6W3JdfV0sQSk7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KEIsdGhpcy5iVXNlQmF0Y2gsUyxoLHRydWUpfWVsc2V7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KHIsdGhpcy5iVXNlQmF0Y2gsUyxoKX1yZXR1cm4gUn07Zy5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHAsUCl7dmFyIG8sRSxzLFMsaCxyLHUsaSxrLGosXyxCLFIsbCxtLEE9ZmFsc2UsdD10aGlzO2lmKChQJiZQIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkNvbnRleHQpfHxhcmd1bWVudHNbMl0pe289UDtTPWFyZ3VtZW50c1syXTtoPWFyZ3VtZW50c1szXX1lbHNlIGlmKFApe289UC5jb250ZXh0fHxQLm9Db250ZXh0O1M9UC5zdWNjZXNzfHxQLmZuU3VjY2VzcztoPVAuZXJyb3J8fFAuZm5FcnJvcjtpPVAuZVRhZ3x8UC5zRVRhZztqPVAucGF5bG9hZHx8UC5vUGF5bG9hZDtBPXR5cGVvZihQLmFzeW5jKT09InVuZGVmaW5lZCI/UC5iQXN5bmM9PT10cnVlOlAuYXN5bmM9PT10cnVlO209UC51cmxQYXJhbWV0ZXJzfV89ZnVuY3Rpb24oRCxuKXtFPXUuc3Vic3RyKHUubGFzdEluZGV4T2YoJy8nKSsxKTtpZihFLmluZGV4T2YoJz8nKSE9LTEpe0U9RS5zdWJzdHIoMCxFLmluZGV4T2YoJz8nKSl9ZGVsZXRlIHQub0RhdGFbRV07ZGVsZXRlIHQubUNvbnRleHRzWyIvIitFXTtpZihTKXtTKEQsbil9fTt1PXRoaXMuX2NyZWF0ZVJlcXVlc3RVcmwocCxvLG0sdGhpcy5iVXNlQmF0Y2gpO3I9dGhpcy5fY3JlYXRlUmVxdWVzdCh1LCJERUxFVEUiLEEsaixpKTtwPXRoaXMuX25vcm1hbGl6ZVBhdGgocCxvKTtzPXRoaXMuX2dldE9iamVjdChwKTtyLmtleXM9e307aWYocyl7az10aGlzLl9nZXRLZXkocyk7ci5rZXlzW2tdPXRydWV9aWYodGhpcy5iVXNlQmF0Y2gpe0I9dGhpcy5fY3JlYXRlQmF0Y2hSZXF1ZXN0KFt7X19jaGFuZ2VSZXF1ZXN0czpbcl19XSxBKTtSPXRoaXMuX3N1Ym1pdFJlcXVlc3QoQix0aGlzLmJVc2VCYXRjaCxfLGgsdHJ1ZSl9ZWxzZXtSPXRoaXMuX3N1Ym1pdFJlcXVlc3Qocix0aGlzLmJVc2VCYXRjaCxfLGgpfXJldHVybiBSfTtnLnByb3RvdHlwZS5jYWxsRnVuY3Rpb249ZnVuY3Rpb24oRixwKXt2YXIgcixCLHUsUixvLFAsaCxzLEUsQSxtPSJHRVQiLGk9e30sdD10aGlzO2lmKHAmJnR5cGVvZihwKT09Im9iamVjdCIpe209cC5tZXRob2Q/cC5tZXRob2Q6bTtQPXAudXJsUGFyYW1ldGVycztoPXAuY29udGV4dDtzPXAuc3VjY2VzcztFPXAuZXJyb3I7QT1wLmFzeW5jPT09dHJ1ZX1lbHNle209cDtQPWFyZ3VtZW50c1syXTtoPWFyZ3VtZW50c1szXTtzPWFyZ3VtZW50c1s0XTtFPWFyZ3VtZW50c1s1XTtBPWFyZ3VtZW50c1s2XT09PXRydWV9bz10aGlzLm9NZXRhZGF0YS5fZ2V0RnVuY3Rpb25JbXBvcnRNZXRhZGF0YShGLG0pO2lmKG8pe3U9dGhpcy5fY3JlYXRlUmVxdWVzdFVybChGLGgsbnVsbCx0aGlzLmJVc2VCYXRjaCk7dmFyIGo9VVJJKHUpO2lmKG8ucGFyYW1ldGVyIT1udWxsKXtxLmVhY2goUCxmdW5jdGlvbihrLGwpe3ZhciBuPXEuZ3JlcChvLnBhcmFtZXRlcixmdW5jdGlvbih3KXtyZXR1cm4gdy5uYW1lPT1rJiZ3Lm1vZGU9PSJJbiJ9KTtpZihuIT1udWxsJiZuLmxlbmd0aD4wKXt2YXIgdj1uWzBdO2lba109Ty5mb3JtYXRWYWx1ZShsLHYudHlwZSl9ZWxzZXtxLnNhcC5sb2cud2FybmluZygiUGFyYW1ldGVyICIraysiIGlzIG5vdCBkZWZpbmVkIGZvciBmdW5jdGlvbiBjYWxsICIrRisiISIpfX0pfWlmKG09PT0iR0VUIil7cmV0dXJuIHQucmVhZChGLGgsaSx0cnVlLHMsRSl9ZWxzZXtxLmVhY2goaSxmdW5jdGlvbihrLGwpe2ouYWRkUXVlcnkoayxsKX0pO3I9dGhpcy5fY3JlYXRlUmVxdWVzdChqLnRvU3RyaW5nKCksbSxBKTtpZih0aGlzLmJVc2VCYXRjaCl7Qj10aGlzLl9jcmVhdGVCYXRjaFJlcXVlc3QoW3tfX2NoYW5nZVJlcXVlc3RzOltyXX1dLEEpO1I9dGhpcy5fc3VibWl0UmVxdWVzdChCLHRoaXMuYlVzZUJhdGNoLHMsRSx0cnVlKX1lbHNle1I9dGhpcy5fc3VibWl0UmVxdWVzdChyLHRoaXMuYlVzZUJhdGNoLHMsRSl9cmV0dXJuIFJ9fX07Zy5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihwLFApe3ZhciByLHUsUixCLG8sbSxBLHMsRSxGLFMsaCxpLGosayxsLHQ9dGhpcztpZihQJiZ0eXBlb2YoUCk9PSJvYmplY3QiJiYhKFAgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuQ29udGV4dCkpe289UC5jb250ZXh0O209UC51cmxQYXJhbWV0ZXJzO0E9UC5hc3luYyE9PWZhbHNlO3M9UC5zdWNjZXNzO0U9UC5lcnJvcjtGPVAuZmlsdGVycztTPVAuc29ydGVyc31lbHNle289UDttPWFyZ3VtZW50c1syXTtBPWFyZ3VtZW50c1szXSE9PWZhbHNlO3M9YXJndW1lbnRzWzRdO0U9YXJndW1lbnRzWzVdfUE9QSE9PWZhbHNlO2w9Ty5fY3JlYXRlVXJsUGFyYW1zQXJyYXkobSk7aT1PLmNyZWF0ZVNvcnRQYXJhbXMoUyk7aWYoaSl7bC5wdXNoKGkpfTtpZihGJiYhdGhpcy5vTWV0YWRhdGEpe3Euc2FwLmxvZy5mYXRhbCgiVHJpZWQgdG8gdXNlIGZpbHRlcnMgaW4gcmVhZCBtZXRob2QgYmVmb3JlIG1ldGFkYXRhIGlzIGF2YWlsYWJsZS4iKX1lbHNle2s9dGhpcy5fbm9ybWFsaXplUGF0aChwLG8pO2o9dGhpcy5vTWV0YWRhdGEmJnRoaXMub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKGspO2g9Ty5jcmVhdGVGaWx0ZXJQYXJhbXMoRix0aGlzLm9NZXRhZGF0YSxqKTtpZihoKXtsLnB1c2goaCl9fXU9dGhpcy5fY3JlYXRlUmVxdWVzdFVybChwLG8sbCx0aGlzLmJVc2VCYXRjaCk7cj10aGlzLl9jcmVhdGVSZXF1ZXN0KHUsIkdFVCIsQSk7aWYodGhpcy5iVXNlQmF0Y2gpe0I9dGhpcy5fY3JlYXRlQmF0Y2hSZXF1ZXN0KFtyXSxBKTtSPXRoaXMuX3N1Ym1pdFJlcXVlc3QoQix0aGlzLmJVc2VCYXRjaCxzLEUsdHJ1ZSl9ZWxzZXtSPXRoaXMuX3N1Ym1pdFJlcXVlc3Qocix0aGlzLmJVc2VCYXRjaCxzLEUpfXJldHVybiBSfTtnLnByb3RvdHlwZS5jcmVhdGVCYXRjaE9wZXJhdGlvbj1mdW5jdGlvbihwLG0sRCxQKXt2YXIgbz17fSxFLHMsayxoO3EuZXh0ZW5kKG8sdGhpcy5tQ3VzdG9tSGVhZGVycyx0aGlzLm9IZWFkZXJzKTtpZihxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSl7cD1wLnN1YnN0cigxKX1pZihQKXtFPVAuc0VUYWd9aWYobSE9IkdFVCIpe0U9dGhpcy5fZ2V0RVRhZyhwLEQsRSk7aWYoRSl7b1siSWYtTWF0Y2giXT1FfX1pZih0aGlzLmJKU09OKXtpZihtIT0iREVMRVRFIiYmbSE9IkdFVCImJnRoaXMuc01heERhdGFTZXJ2aWNlVmVyc2lvbj09PSIyLjAiKXtvWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24vanNvbiJ9fWVsc2V7b1siQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL2F0b20reG1sIn12YXIgcj17cmVxdWVzdFVyaTpwLG1ldGhvZDptLnRvVXBwZXJDYXNlKCksaGVhZGVyczpvfTtpZihEKXtyLmRhdGE9RH1pZihtIT0iR0VUIiYmbSE9IlBPU1QiKXtpZihwJiZwLmluZGV4T2YoIi8iKSE9MCl7cD0nLycrcH1zPXRoaXMuX2dldE9iamVjdChwKTtpZihzKXtrPXRoaXMuX2dldEtleShzKTtyLmtleXM9e307ci5rZXlzW2tdPXRydWV9fWVsc2UgaWYobT09IlBPU1QiKXtoPXRoaXMub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKHApO2lmKGgpe3IuZW50aXR5VHlwZXM9e307ci5lbnRpdHlUeXBlc1toLmVudGl0eVR5cGVdPXRydWV9fXJldHVybiByfTtnLnByb3RvdHlwZS5hZGRCYXRjaFJlYWRPcGVyYXRpb25zPWZ1bmN0aW9uKHIpe2lmKCFxLmlzQXJyYXkocil8fHIubGVuZ3RoPD0wKXtxLnNhcC5sb2cud2FybmluZygiTm8gYXJyYXkgd2l0aCBiYXRjaCBvcGVyYXRpb25zIHByb3ZpZGVkISIpO3JldHVybiBmYWxzZX12YXIgdD10aGlzO3EuZWFjaChyLGZ1bmN0aW9uKGksUil7aWYoUi5tZXRob2QhPSJHRVQiKXtxLnNhcC5sb2cud2FybmluZygiQmF0Y2ggb3BlcmF0aW9uIHNob3VsZCBiZSBhIEdFVCBvcGVyYXRpb24hIik7cmV0dXJuIGZhbHNlfXQuYUJhdGNoT3BlcmF0aW9ucy5wdXNoKFIpfSl9O2cucHJvdG90eXBlLmFkZEJhdGNoQ2hhbmdlT3BlcmF0aW9ucz1mdW5jdGlvbihoKXtpZighcS5pc0FycmF5KGgpfHxoLmxlbmd0aDw9MCl7cmV0dXJuIGZhbHNlfXEuZWFjaChoLGZ1bmN0aW9uKGksbyl7aWYoby5tZXRob2QhPSJQT1NUIiYmby5tZXRob2QhPSJQVVQiJiZvLm1ldGhvZCE9Ik1FUkdFIiYmby5tZXRob2QhPSJERUxFVEUiKXtxLnNhcC5sb2cud2FybmluZygiQmF0Y2ggb3BlcmF0aW9uIHNob3VsZCBiZSBhIFBPU1QvUFVUL01FUkdFL0RFTEVURSBvcGVyYXRpb24hIik7cmV0dXJuIGZhbHNlfX0pO3RoaXMuYUJhdGNoT3BlcmF0aW9ucy5wdXNoKHtfX2NoYW5nZVJlcXVlc3RzOmh9KX07Zy5wcm90b3R5cGUuY2xlYXJCYXRjaD1mdW5jdGlvbigpe3RoaXMuYUJhdGNoT3BlcmF0aW9ucz1bXX07Zy5wcm90b3R5cGUuc3VibWl0QmF0Y2g9ZnVuY3Rpb24ocyxFLEEsaSl7dmFyIHIsdSxSLHQ9dGhpcztmdW5jdGlvbiBfKEQsail7aWYocyl7cyhELGosdC5fZ2V0QmF0Y2hFcnJvcnMoRCkpfX1pZighKHR5cGVvZihzKT09ImZ1bmN0aW9uIikpe3ZhciBvPUE7dmFyIGg9RTtBPXM7cz1oO0U9b31BPUEhPT1mYWxzZTtpZih0aGlzLmFCYXRjaE9wZXJhdGlvbnMubGVuZ3RoPD0wKXtxLnNhcC5sb2cud2FybmluZygiTm8gYmF0Y2ggb3BlcmF0aW9ucyBpbiBiYXRjaC4gTm8gcmVxdWVzdCB3aWxsIGJlIHRyaWdnZXJlZCEiKTtyZXR1cm4gZmFsc2V9cj10aGlzLl9jcmVhdGVCYXRjaFJlcXVlc3QodGhpcy5hQmF0Y2hPcGVyYXRpb25zLEEpO1I9dGhpcy5fc3VibWl0UmVxdWVzdChyLHRydWUsXyxFLGZhbHNlLGkpO3RoaXMuY2xlYXJCYXRjaCgpO3JldHVybiBSfTtnLnByb3RvdHlwZS5nZXRTZXJ2aWNlTWV0YWRhdGE9ZnVuY3Rpb24oKXtpZih0aGlzLm9NZXRhZGF0YSYmdGhpcy5vTWV0YWRhdGEuaXNMb2FkZWQoKSl7cmV0dXJuIHRoaXMub01ldGFkYXRhLmdldFNlcnZpY2VNZXRhZGF0YSgpfX07Zy5wcm90b3R5cGUuZ2V0U2VydmljZUFubm90YXRpb25zPWZ1bmN0aW9uKCl7aWYodGhpcy5vQW5ub3RhdGlvbnMmJnRoaXMub0Fubm90YXRpb25zLmdldEFubm90YXRpb25zRGF0YSl7cmV0dXJuIHRoaXMub0Fubm90YXRpb25zLmdldEFubm90YXRpb25zRGF0YSgpfX07Zy5wcm90b3R5cGUuc3VibWl0Q2hhbmdlcz1mdW5jdGlvbihzLEUscCl7dmFyIHIsUCx0PXRoaXMsaCxpLFQsbSxTLGs7aWYodGhpcy5zQ2hhbmdlS2V5KXtoPXRoaXMuc0NoYW5nZUtleS5yZXBsYWNlKHRoaXMuc1NlcnZpY2VVcmwsJycpO1M9dGhpcy5fZ2V0T2JqZWN0KGgpO1A9UztpZihxLmlzUGxhaW5PYmplY3QoUykpe1A9cS5leHRlbmQodHJ1ZSx7fSxTKTtpZihQLl9fbWV0YWRhdGEpe1Q9UC5fX21ldGFkYXRhLnR5cGU7bT1QLl9fbWV0YWRhdGEuZXRhZztkZWxldGUgUC5fX21ldGFkYXRhO2lmKFR8fG0pe1AuX19tZXRhZGF0YT17fX1pZihUKXtQLl9fbWV0YWRhdGEudHlwZT1UfWlmKCEhbSl7UC5fX21ldGFkYXRhLmV0YWc9bX19cS5lYWNoKFAsZnVuY3Rpb24obCx1KXtpZih1JiZ1Ll9fZGVmZXJyZWQpe2RlbGV0ZSBQW2xdfX0pO3ZhciBvPXRoaXMub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKGgpO2lmKG8pe3ZhciBuPXRoaXMub01ldGFkYXRhLl9nZXROYXZpZ2F0aW9uUHJvcGVydHlOYW1lcyhvKTtxLmVhY2gobixmdW5jdGlvbihJLE4pe2RlbGV0ZSBQW05dfSl9UD10aGlzLl9yZW1vdmVSZWZlcmVuY2VzKFApfWlmKHAmJnAuc0VUYWcpe2k9cC5zRVRhZ31yPXRoaXMuX2NyZWF0ZVJlcXVlc3QodGhpcy5zQ2hhbmdlS2V5LCJNRVJHRSIsdHJ1ZSxQLGkpO2lmKHRoaXMuc1VybFBhcmFtcyl7ci5yZXF1ZXN0VXJpKz0iPyIrdGhpcy5zVXJsUGFyYW1zfXIua2V5cz17fTtpZihTKXtrPXRoaXMuX2dldEtleShTKTtyLmtleXNba109dHJ1ZX10aGlzLm9SZXF1ZXN0UXVldWVbdGhpcy5zQ2hhbmdlS2V5XT1yfWlmKHEuaXNFbXB0eU9iamVjdCh0aGlzLm9SZXF1ZXN0UXVldWUpKXtyZXR1cm4gdW5kZWZpbmVkfWlmKHRoaXMuYlVzZUJhdGNoKXt2YXIgaj1bXTtxLmVhY2godGhpcy5vUmVxdWVzdFF1ZXVlLGZ1bmN0aW9uKGssbCl7ZGVsZXRlIGwuX29SZWY7dmFyIFI9cS5leHRlbmQodHJ1ZSx7fSxsKTtsLl9vUmVmPVI7Ui5yZXF1ZXN0VXJpPVIucmVxdWVzdFVyaS5yZXBsYWNlKHQuc1NlcnZpY2VVcmwrJy8nLCcnKTtSLmRhdGEuX2JDcmVhdGU/ZGVsZXRlIFIuZGF0YS5fYkNyZWF0ZTpmYWxzZTtqLnB1c2goUil9KTtyPXRoaXMuX2NyZWF0ZUJhdGNoUmVxdWVzdChbe19fY2hhbmdlUmVxdWVzdHM6an1dLHRydWUpO3RoaXMuX3N1Ym1pdFJlcXVlc3Qocix0aGlzLmJVc2VCYXRjaCxzLEUsdHJ1ZSl9ZWxzZXtxLmVhY2godGhpcy5vUmVxdWVzdFF1ZXVlLGZ1bmN0aW9uKGssbCl7ZGVsZXRlIGwuX29SZWY7dmFyIFI9cS5leHRlbmQodHJ1ZSx7fSxsKTtsLl9vUmVmPVI7aWYoUi5kYXRhJiZSLmRhdGEuX2JDcmVhdGUpe2RlbGV0ZSBSLmRhdGEuX2JDcmVhdGV9dC5fc3VibWl0UmVxdWVzdChSLHRoaXMuYlVzZUJhdGNoLHMsRSx0cnVlKX0pfXJldHVybiB1bmRlZmluZWR9O2cucHJvdG90eXBlLl91cGRhdGVSZXF1ZXN0UXVldWU9ZnVuY3Rpb24ocixCKXt2YXIgaCxrLG8sdD10aGlzO2lmKEIpe2g9ci5kYXRhLl9fYmF0Y2hSZXF1ZXN0cztpZihoKXtmb3IodmFyIGk9MDtpPGgubGVuZ3RoO2krKyl7az1oW2ldLl9fY2hhbmdlUmVxdWVzdHM7aWYoayl7Zm9yKHZhciBqPTA7ajxrLmxlbmd0aDtqKyspe289a1tqXTtxLmVhY2godGhpcy5vUmVxdWVzdFF1ZXVlLGZ1bmN0aW9uKEssbCl7aWYobC5fb1JlZj09PW8mJkshPT10LnNDaGFuZ2VLZXkpe2RlbGV0ZSB0Lm9SZXF1ZXN0UXVldWVbS107ZGVsZXRlIHQub0RhdGFbS107ZGVsZXRlIHQubUNvbnRleHRzWyIvIitLXX1lbHNlIGlmKHQuc0NoYW5nZUtleSYmSz09PXQuc0NoYW5nZUtleSl7ZGVsZXRlIHQub1JlcXVlc3RRdWV1ZVtLXTt0LnNDaGFuZ2VLZXk9bnVsbH19KX19fX19ZWxzZXtxLmVhY2godGhpcy5vUmVxdWVzdFF1ZXVlLGZ1bmN0aW9uKEssbCl7aWYobC5fb1JlZj09PXImJkshPT10LnNDaGFuZ2VLZXkpe2RlbGV0ZSB0Lm9SZXF1ZXN0UXVldWVbS107ZGVsZXRlIHQub0RhdGFbS107ZGVsZXRlIHQubUNvbnRleHRzWyIvIitLXX1lbHNlIGlmKHQuc0NoYW5nZUtleSYmSz09PXQuc0NoYW5nZUtleSl7ZGVsZXRlIHQub1JlcXVlc3RRdWV1ZVtLXTt0LnNDaGFuZ2VLZXk9bnVsbH19KX19O2cucHJvdG90eXBlLnJlc2V0Q2hhbmdlcz1mdW5jdGlvbihzLEUpe3ZhciBwO2lmKHRoaXMuc0NoYW5nZUtleSl7cD10aGlzLnNDaGFuZ2VLZXkucmVwbGFjZSh0aGlzLnNTZXJ2aWNlVXJsLCcnKTt0aGlzLl9sb2FkRGF0YShwLG51bGwscyxFKX19O2cucHJvdG90eXBlLnNldFByb3BlcnR5PWZ1bmN0aW9uKHAsdixvKXt2YXIgUCxFPXt9LEQ9e30scz10aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKHAsbyksaD1wLnN1YnN0cmluZygwLHAubGFzdEluZGV4T2YoIi8iKSksayxqLG09e30sbD1mYWxzZTtpZighdGhpcy5yZXNvbHZlKHAsbykpe3JldHVybiBmYWxzZX1zPXMucmVwbGFjZSh0aGlzLnNTZXJ2aWNlVXJsKycvJywnJyk7cz1zLnN1YnN0cmluZygwLHMuaW5kZXhPZigiLyIpKTtzPXRoaXMuc1NlcnZpY2VVcmwrJy8nK3M7UD1wLnN1YnN0cihwLmxhc3RJbmRleE9mKCIvIikrMSk7RD10aGlzLl9nZXRPYmplY3QoaCxvKTtpZighRCl7cmV0dXJuIGZhbHNlfWo9aC5zcGxpdCgiLyIpO2Zvcih2YXIgaT1qLmxlbmd0aC0xO2k+PTA7aS0tKXtFPXRoaXMuX2dldE9iamVjdChqLmpvaW4oIi8iKSxvKTtpZihFKXtrPXRoaXMuX2dldEtleShFKTtpZihrKXticmVha319ai5zcGxpY2UoaS0xLDEpfWlmKCFrKXtrPXRoaXMuX2dldEtleShvKX1pZihrKXttW2tdPXRydWV9aWYoRC5fYkNyZWF0ZSl7RFtQXT12O2w9dHJ1ZTt0aGlzLmNoZWNrVXBkYXRlKGZhbHNlLG0pfWVsc2V7aWYoIXRoaXMuc0NoYW5nZUtleSl7dGhpcy5zQ2hhbmdlS2V5PXN9aWYodGhpcy5zQ2hhbmdlS2V5PT1zKXtEW1BdPXY7bD10cnVlO3RoaXMuY2hlY2tVcGRhdGUoZmFsc2UsbSl9ZWxzZXt0aGlzLmZpcmVSZWplY3RDaGFuZ2Uoe3JlamVjdGVkVmFsdWU6dixvbGRWYWx1ZTpEW1BdfSl9fXJldHVybiBsfTtnLnByb3RvdHlwZS5faXNIZWFkZXJQcml2YXRlPWZ1bmN0aW9uKGgpe3N3aXRjaChoLnRvTG93ZXJDYXNlKCkpe2Nhc2UiYWNjZXB0IjpjYXNlImFjY2VwdC1sYW5ndWFnZSI6Y2FzZSJtYXhkYXRhc2VydmljZXZlcnNpb24iOmNhc2UiZGF0YXNlcnZpY2V2ZXJzaW9uIjpyZXR1cm4gdHJ1ZTticmVhaztjYXNlIngtY3NyZi10b2tlbiI6cmV0dXJuIHRoaXMuYlRva2VuSGFuZGxpbmc7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gZmFsc2V9fTtnLnByb3RvdHlwZS5zZXRIZWFkZXJzPWZ1bmN0aW9uKGgpe3ZhciBtPXt9LHQ9dGhpcztpZihoKXtxLmVhY2goaCxmdW5jdGlvbihILHMpe2lmKHQuX2lzSGVhZGVyUHJpdmF0ZShIKSl7cS5zYXAubG9nLndhcm5pbmcoIk5vdCBhbGxvd2VkIHRvIG1vZGlmeSBwcml2YXRlIGhlYWRlcjogIitIKX1lbHNle21bSF09c319KTt0aGlzLm1DdXN0b21IZWFkZXJzPW19ZWxzZXt0aGlzLm1DdXN0b21IZWFkZXJzPXt9fX07Zy5wcm90b3R5cGUuZ2V0SGVhZGVycz1mdW5jdGlvbigpe3JldHVybiBxLmV4dGVuZCh7fSx0aGlzLm1DdXN0b21IZWFkZXJzLHRoaXMub0hlYWRlcnMpfTtnLnByb3RvdHlwZS5fZ2V0SGVhZGVyPWZ1bmN0aW9uKEYsaCl7dmFyIEg7Zm9yKEggaW4gaCl7aWYoSC50b0xvd2VyQ2FzZSgpPT09Ri50b0xvd2VyQ2FzZSgpKXtyZXR1cm4gaFtIXX19cmV0dXJuIG51bGx9O2cucHJvdG90eXBlLmhhc1BlbmRpbmdDaGFuZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0NoYW5nZUtleSE9bnVsbH07Zy5wcm90b3R5cGUudXBkYXRlQmluZGluZ3M9ZnVuY3Rpb24oRil7dGhpcy5jaGVja1VwZGF0ZShGKX07Zy5wcm90b3R5cGUuZm9yY2VOb0NhY2hlPWZ1bmN0aW9uKEYpe3RoaXMuYkNhY2hlPSFGfTtnLnByb3RvdHlwZS5zZXRUb2tlbkhhbmRsaW5nRW5hYmxlZD1mdW5jdGlvbih0KXt0aGlzLmJUb2tlbkhhbmRsaW5nPXR9O2cucHJvdG90eXBlLnNldFVzZUJhdGNoPWZ1bmN0aW9uKHUpe3RoaXMuYlVzZUJhdGNoPXV9O2cucHJvdG90eXBlLmZvcm1hdFZhbHVlPWZ1bmN0aW9uKHYsdCl7cmV0dXJuIE8uZm9ybWF0VmFsdWUodix0KX07Zy5wcm90b3R5cGUuZGVsZXRlQ3JlYXRlZEVudHJ5PWZ1bmN0aW9uKG8pe2lmKG8pe3ZhciBwPW8uZ2V0UGF0aCgpO2RlbGV0ZSB0aGlzLm1Db250ZXh0c1twXTtpZihxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSl7cD1wLnN1YnN0cigxKX1kZWxldGUgdGhpcy5vUmVxdWVzdFF1ZXVlW3BdO2RlbGV0ZSB0aGlzLm9EYXRhW3BdfX07Zy5wcm90b3R5cGUuY3JlYXRlRW50cnk9ZnVuY3Rpb24ocCxQKXt2YXIgRT17fSxrLHUscjtpZighcS5zYXAuc3RhcnRzV2l0aChwLCIvIikpe3A9Ii8iK3B9dmFyIG89dGhpcy5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgocCk7aWYoIW8pe3JldHVybiB1bmRlZmluZWR9aWYodHlwZW9mIFA9PT0ib2JqZWN0IiYmIXEuaXNBcnJheShQKSl7RT1QfWVsc2V7Zm9yKHZhciBpPTA7aTxvLnByb3BlcnR5Lmxlbmd0aDtpKyspe3ZhciBoPW8ucHJvcGVydHlbaV07dmFyIHQ9aC50eXBlLnNwbGl0KCcuJyk7dmFyIGo9cS5pbkFycmF5KGgubmFtZSxQKT4tMTtpZighUHx8ail7RVtoLm5hbWVdPXRoaXMuX2NyZWF0ZVByb3BlcnR5VmFsdWUodCk7aWYoail7UC5zcGxpY2UoUC5pbmRleE9mKGgubmFtZSksMSl9fX1pZihQKXt9fUUuX2JDcmVhdGU9dHJ1ZTtrPXAuc3Vic3RyaW5nKDEpKyIoJyIrcS5zYXAudWlkKCkrIicpIjt0aGlzLm9EYXRhW2tdPUU7RS5fX21ldGFkYXRhPXt0eXBlOiIiK28uZW50aXR5VHlwZX07dT10aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKHApO3I9dGhpcy5fY3JlYXRlUmVxdWVzdCh1LCJQT1NUIix0cnVlLEUpO3IuZW50aXR5VHlwZXM9e307ci5lbnRpdHlUeXBlc1tvLmVudGl0eVR5cGVdPXRydWU7dGhpcy5vUmVxdWVzdFF1ZXVlW2tdPXI7cmV0dXJuIHRoaXMuZ2V0Q29udGV4dCgiLyIrayl9O2cucHJvdG90eXBlLl9jcmVhdGVQcm9wZXJ0eVZhbHVlPWZ1bmN0aW9uKHQpe3ZhciBuPXRbMF07dmFyIFQ9dFsxXTtpZihuLnRvVXBwZXJDYXNlKCkhPT0nRURNJyl7dmFyIG89e307dmFyIGg9dGhpcy5vTWV0YWRhdGEuX2dldE9iamVjdE1ldGFkYXRhKCJjb21wbGV4VHlwZSIsVCxuKTtmb3IodmFyIGk9MDtpPGgucHJvcGVydHkubGVuZ3RoO2krKyl7dmFyIHA9aC5wcm9wZXJ0eVtpXTt2YXIgdD1wLnR5cGUuc3BsaXQoJy4nKTtvW3AubmFtZV09dGhpcy5fY3JlYXRlUHJvcGVydHlWYWx1ZSh0KX1yZXR1cm4gb31lbHNle3JldHVybiB0aGlzLl9nZXREZWZhdWx0UHJvcGVydHlWYWx1ZShULG4pfX07Zy5wcm90b3R5cGUuX2dldERlZmF1bHRQcm9wZXJ0eVZhbHVlPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHVuZGVmaW5lZH07Zy5wcm90b3R5cGUuX25vcm1hbGl6ZVBhdGg9ZnVuY3Rpb24ocCxvKXtpZihwJiZwLmluZGV4T2YoJz8nKSE9LTEpe3A9cC5zdWJzdHIoMCxwLmluZGV4T2YoJz8nKSl9aWYoIW8mJiFxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSl7cD0nLycrcDtxLnNhcC5sb2cud2FybmluZygic1BhdGggc2hvdWxkIGJlIGFic29sdXRlIGlmIG5vIENvbnRleHQgaXMgc2V0Iil9cmV0dXJuIHRoaXMucmVzb2x2ZShwLG8pfTtnLnByb3RvdHlwZS5zZXRSZWZyZXNoQWZ0ZXJDaGFuZ2U9ZnVuY3Rpb24ocil7dGhpcy5iUmVmcmVzaEFmdGVyQ2hhbmdlPXJ9O2cucHJvdG90eXBlLmlzTGlzdD1mdW5jdGlvbihwLG8pe3ZhciBwPXRoaXMucmVzb2x2ZShwLG8pO3JldHVybiBwJiZwLnN1YnN0cihwLmxhc3RJbmRleE9mKCIvIikpLmluZGV4T2YoIigiKT09PS0xfTtnLnByb3RvdHlwZS5fcmVxdWVzdD1mdW5jdGlvbihyLHMsRSxoLEgsbSl7aWYodGhpcy5iRGVzdHJveWVkKXtyZXR1cm57YWJvcnQ6ZnVuY3Rpb24oKXt9fX12YXIgdD10aGlzO2Z1bmN0aW9uIHcoaSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIEk9cS5pbkFycmF5KFIsdC5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzKTtpZihJPi0xKXt0LmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMuc3BsaWNlKEksMSl9aWYoIShSJiZSLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGwpKXtpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fXZhciBSPU9EYXRhLnJlcXVlc3Qocix3KHN8fE9EYXRhLmRlZmF1bHRTdWNjZXNzKSx3KEV8fE9EYXRhLmRlZmF1bHRFcnJvciksaCxILG0pO2lmKHIuYXN5bmMhPT1mYWxzZSl7dGhpcy5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzLnB1c2goUil9cmV0dXJuIFJ9O2cucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMpe2Zvcih2YXIgaT10aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMubGVuZ3RoLTE7aT49MDtpLS0pe3ZhciByPXRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlc1tpXTtpZihyJiZyLmFib3J0KXtyLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGw9dHJ1ZTtyLmFib3J0KCl9fWRlbGV0ZSB0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXN9aWYoISF0aGlzLm9NZXRhZGF0YUxvYWRFdmVudCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLm9NZXRhZGF0YUxvYWRFdmVudCl9aWYoISF0aGlzLm9NZXRhZGF0YUZhaWxlZEV2ZW50KXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMub01ldGFkYXRhRmFpbGVkRXZlbnQpfWlmKHRoaXMub01ldGFkYXRhKXt0aGlzLm9NZXRhZGF0YS5kZXN0cm95KCk7ZGVsZXRlIHRoaXMub01ldGFkYXRhfWlmKHRoaXMub0Fubm90YXRpb25zKXt0aGlzLm9Bbm5vdGF0aW9ucy5kZXN0cm95KCk7ZGVsZXRlIHRoaXMub0Fubm90YXRpb25zfU0ucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gZ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZU1vZGVsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlTW9kZWwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvcmVzb3VyY2UvUmVzb3VyY2VNb2RlbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9Nb2RlbCcsJy4vUmVzb3VyY2VQcm9wZXJ0eUJpbmRpbmcnXSxmdW5jdGlvbihxLE0sUil7InVzZSBzdHJpY3QiO3ZhciBhPU0uZXh0ZW5kKCJzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VNb2RlbCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGQpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc0RlZmF1bHRCaW5kaW5nTW9kZT1zYXAudWkubW9kZWwuQmluZGluZ01vZGUuT25lVGltZTt0aGlzLm1TdXBwb3J0ZWRCaW5kaW5nTW9kZXM9eyJPbmVXYXkiOmZhbHNlLCJUd29XYXkiOmZhbHNlLCJPbmVUaW1lIjp0cnVlfTt0aGlzLm9EYXRhPWQ7aWYoZCYmKGQuYnVuZGxlVXJsfHxkLmJ1bmRsZU5hbWUpKXt0aGlzLlJlc291cmNlQnVuZGxlPXRoaXMubG9hZFJlc291cmNlQnVuZGxlKGQpfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJOZWl0aGVyIGJ1bmRsZVVybCBub3IgYnVuZGxlTmFtZSBhcmUgZ2l2ZW4uIE9uZSBvZiB0aGVzZSBpcyBtYW5kYXRvcnkuIil9fSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldFJlc291cmNlQnVuZGxlIl19fSk7YS5wcm90b3R5cGUubG9hZFJlc291cmNlQnVuZGxlPWZ1bmN0aW9uKGQpe3ZhciBjPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLHIsdSxsLGk7bD1kLmJ1bmRsZUxvY2FsZTtpZighbCl7bD1jLmdldExhbmd1YWdlKCl9aT1jLmdldE9yaWdpbkluZm8oKTt1PWQuYnVuZGxlVXJsO2lmKGQuYnVuZGxlTmFtZSl7dT1xLnNhcC5nZXRNb2R1bGVQYXRoKGQuYnVuZGxlTmFtZSwnLnByb3BlcnRpZXMnKX1yPXEuc2FwLnJlc291cmNlcyh7dXJsOnUsbG9jYWxlOmwsaW5jbHVkZUluZm86aX0pO3JldHVybiByfTthLnByb3RvdHlwZS5lbmhhbmNlPWZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMubG9hZFJlc291cmNlQnVuZGxlKGQpO2lmKGMpe3RoaXMuUmVzb3VyY2VCdW5kbGUuX2VuaGFuY2UoYyl9fTthLnByb3RvdHlwZS5iaW5kUHJvcGVydHk9ZnVuY3Rpb24ocCl7dmFyIGI9bmV3IFIodGhpcyxwKTtyZXR1cm4gYn07YS5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMuUmVzb3VyY2VCdW5kbGUuZ2V0VGV4dChwKX07YS5wcm90b3R5cGUuZ2V0UmVzb3VyY2VCdW5kbGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5SZXNvdXJjZUJ1bmRsZX07YS5wcm90b3R5cGUuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZT1mdW5jdGlvbigpe2lmKHRoaXMub0RhdGEmJih0aGlzLm9EYXRhLmJ1bmRsZVVybHx8dGhpcy5vRGF0YS5idW5kbGVOYW1lKSl7dGhpcy5SZXNvdXJjZUJ1bmRsZT10aGlzLmxvYWRSZXNvdXJjZUJ1bmRsZSh0aGlzLm9EYXRhKX19O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnhtbC5YTUxQcm9wZXJ0eUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwueG1sLlhNTFByb3BlcnR5QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC94bWwvWE1MUHJvcGVydHlCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL0NsaWVudFByb3BlcnR5QmluZGluZyddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBYPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwueG1sLlhNTFByb3BlcnR5QmluZGluZyIpO1gucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHYpe2lmKHRoaXMub1ZhbHVlIT12KXt0aGlzLm9Nb2RlbC5zZXRQcm9wZXJ0eSh0aGlzLnNQYXRoLHYsdGhpcy5vQ29udGV4dCl9fTtYLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXt2YXIgdj10aGlzLl9nZXRWYWx1ZSgpO2lmKCFxLnNhcC5lcXVhbCh2LHRoaXMub1ZhbHVlKXx8Zil7dGhpcy5vVmFsdWU9djt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5DaGFuZ2V9KX19O3JldHVybiBYfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9CaW5kaW5nUGFyc2VyJywnLi9EYXRhVHlwZScsJy4vRXZlbnRQcm92aWRlcicsJy4vTWFuYWdlZE9iamVjdE1ldGFkYXRhJywnc2FwL3VpL21vZGVsL0NvbXBvc2l0ZUJpbmRpbmcnLCdzYXAvdWkvbW9kZWwvQ29udGV4dEJpbmRpbmcnLCdzYXAvdWkvbW9kZWwvTW9kZWwnLCdzYXAvdWkvbW9kZWwvVHlwZScsJ2pxdWVyeS5zYXAuYWN0JywnanF1ZXJ5LnNhcC5zY3JpcHQnLCdqcXVlcnkuc2FwLnN0cmluZ3MnXSxmdW5jdGlvbihxLEIsRCxFLE0sQyxiLGMsVCl7InVzZSBzdHJpY3QiO3ZhciBkPUUuZXh0ZW5kKCJzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0Iix7bWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiZ2V0SWQiLCJnZXRNZXRhZGF0YSIsImdldE1vZGVsIiwic2V0TW9kZWwiLCJoYXNNb2RlbCIsImJpbmRQcm9wZXJ0eSIsInVuYmluZFByb3BlcnR5IiwiYmluZEFnZ3JlZ2F0aW9uIiwidW5iaW5kQWdncmVnYXRpb24iLCJiaW5kT2JqZWN0IiwidW5iaW5kT2JqZWN0IiwiZ2V0T2JqZWN0QmluZGluZyJdLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnt9LGFnZ3JlZ2F0aW9uczp7fSxhc3NvY2lhdGlvbnM6e30sZXZlbnRzOnsidmFsaWRhdGlvblN1Y2Nlc3MiOntlbmFibGVFdmVudEJ1YmJsaW5nOnRydWV9LCJ2YWxpZGF0aW9uRXJyb3IiOntlbmFibGVFdmVudEJ1YmJsaW5nOnRydWV9LCJwYXJzZUVycm9yIjp7ZW5hYmxlRXZlbnRCdWJibGluZzp0cnVlfSwiZm9ybWF0RXJyb3IiOntlbmFibGVFdmVudEJ1YmJsaW5nOnRydWV9fX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzLFMpe0UuYXBwbHkodGhpcyk7aWYodHlwZW9mKGkpIT0ic3RyaW5nIiYmYXJndW1lbnRzLmxlbmd0aD4wKXtTPXM7cz1pO2lmKHMmJnMuaWQpe2k9c1siaWQiXX1lbHNle2k9bnVsbH19aWYoIWkpe2k9dGhpcy5nZXRNZXRhZGF0YSgpLnVpZCgpfHxxLnNhcC51aWQoKX1lbHNle3ZhciBwPWQuX2ZuSWRQcmVwcm9jZXNzb3I7aT0ocD9wLmNhbGwodGhpcyxpKTppKTt2YXIgdD1ELmdldFR5cGUoInNhcC51aS5jb3JlLklEIik7aWYoIXQuaXNWYWxpZChpKSl7dGhyb3cgbmV3IEVycm9yKCJcIiIraSsiXCIgaXMgbm90IGEgdmFsaWQgSUQuIil9fXRoaXMuc0lkPWk7dGhpcy5tUHJvcGVydGllcz10aGlzLmdldE1ldGFkYXRhKCkuY3JlYXRlUHJvcGVydHlCYWcoKTt0aGlzLm1BZ2dyZWdhdGlvbnM9e307dGhpcy5tQXNzb2NpYXRpb25zPXt9O3RoaXMubU1ldGhvZHM9e307dGhpcy5vUGFyZW50PW51bGw7dGhpcy5hRGVsZWdhdGVzPVtdO3RoaXMuYUJlZm9yZURlbGVnYXRlcz1bXTt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGU9MDt0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcz17b01vZGVsczp7fSxvQmluZGluZ0NvbnRleHRzOnt9fTt0aGlzLm9Nb2RlbHM9e307dGhpcy5vQmluZGluZ0NvbnRleHRzPXt9O3RoaXMubUJpbmRpbmdJbmZvcz17fTt0aGlzLnNCaW5kaW5nUGF0aD1udWxsO3RoaXMubUJpbmRpbmdQYXJhbWV0ZXJzPW51bGw7dGhpcy5tQm91bmRPYmplY3RzPXt9O3RoaXMuX3NPd25lcklkPWQuX3NPd25lcklkO3RyeXtpZih0aGlzLnJlZ2lzdGVyKXRoaXMucmVnaXN0ZXIoKTtpZih0aGlzLl9pbml0Q29tcG9zaXRlU3VwcG9ydCl7dGhpcy5faW5pdENvbXBvc2l0ZVN1cHBvcnQocyl9aWYodGhpcy5pbml0KXt0aGlzLmluaXQoKX10aGlzLmFwcGx5U2V0dGluZ3MocyxTKX1jYXRjaChlKXtpZih0aGlzLmRlcmVnaXN0ZXIpdGhpcy5kZXJlZ2lzdGVyKCk7dGhyb3cgZX19fSxNKTtkLmNyZWF0ZT1mdW5jdGlvbih2LGspe2lmKCF2fHx2IGluc3RhbmNlb2YgZHx8dHlwZW9mIHYhPT0ib2JqZWN0Inx8diBpbnN0YW5jZW9mIFN0cmluZyl7cmV0dXJuIHZ9ZnVuY3Rpb24gZyh0KXtpZih0eXBlb2YgdD09PSJmdW5jdGlvbiIpe3JldHVybiB0fWlmKHR5cGVvZiB0PT09InN0cmluZyIpe3JldHVybiBxLnNhcC5nZXRPYmplY3QodCl9fXZhciBmPWcodi5UeXBlKXx8ZyhrJiZrLnR5cGUpO2lmKHR5cGVvZiBmPT09ImZ1bmN0aW9uIil7cmV0dXJuIG5ldyBmKHYpfXZhciBtPSJEb24ndCBrbm93IGhvdyB0byBjcmVhdGUgYSBNYW5hZ2VkT2JqZWN0IGZyb20gIit2KyIgKCIrKHR5cGVvZiB2KSsiKSI7cS5zYXAubG9nLmZhdGFsKG0pO3Rocm93IG5ldyBFcnJvcihtKX07ZC5fZm5JZFByZXByb2Nlc3Nvcj1udWxsO2QuX2ZuU2V0dGluZ3NQcmVwcm9jZXNzb3I9bnVsbDtkLnJ1bldpdGhQcmVwcm9jZXNzb3JzPWZ1bmN0aW9uKGYscCl7dmFyIG89e2lkOnRoaXMuX2ZuSWRQcmVwcm9jZXNzb3Isc2V0dGluZ3M6dGhpcy5fZm5TZXR0aW5nc1ByZXByb2Nlc3Nvcn07cD1wfHx7fTt0aGlzLl9mbklkUHJlcHJvY2Vzc29yPXAuaWQ7dGhpcy5fZm5TZXR0aW5nc1ByZXByb2Nlc3Nvcj1wLnNldHRpbmdzO3RyeXt2YXIgcj1mLmNhbGwoKTt0aGlzLl9mbklkUHJlcHJvY2Vzc29yPW8uaWQ7dGhpcy5fZm5TZXR0aW5nc1ByZXByb2Nlc3Nvcj1vLnNldHRpbmdzO3JldHVybiByfWNhdGNoKGUpe3RoaXMuX2ZuSWRQcmVwcm9jZXNzb3I9by5pZDt0aGlzLl9mblNldHRpbmdzUHJlcHJvY2Vzc29yPW8uc2V0dGluZ3M7dGhyb3cgZX19O2QuZ2V0T3duZXJJZEZvcj1mdW5jdGlvbihvKXtyZXR1cm4gbyYmby5fc093bmVySWR9O2QucnVuV2l0aE93bmVyPWZ1bmN0aW9uKGYsbyl7dmFyIGE9ZC5fc093bmVySWQ7dHJ5e2QuX3NPd25lcklkPW8uZ2V0SWQoKTt2YXIgcj1mLmNhbGwoKTtkLl9zT3duZXJJZD1hO3JldHVybiByfWNhdGNoKGUpe2QuX3NPd25lcklkPWE7dGhyb3cgZX19O2QucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24ocyxTKXtpZighc3x8cS5pc0VtcHR5T2JqZWN0KHMpKXtyZXR1cm4gdGhpc312YXIgbT10aGlzLmdldE1ldGFkYXRhKCksdj1tLmdldEpTT05LZXlzKCksYT1kLmNyZWF0ZSxwPWQuX2ZuU2V0dGluZ3NQcmVwcm9jZXNzb3IsayxWLEs7cCYmcC5jYWxsKHRoaXMscyk7aWYocy5tb2RlbHMpe2lmKHR5cGVvZiBzLm1vZGVscyE9PSJvYmplY3QiKXt0aHJvdyBuZXcgRXJyb3IoIm1vZGVscyBtdXN0IGJlIGEgc2ltcGxlIG9iamVjdCIpfWlmKHMubW9kZWxzIGluc3RhbmNlb2YgYyl7dGhpcy5zZXRNb2RlbChzLm1vZGVscyl9ZWxzZXtmb3IoayBpbiBzLm1vZGVscyl7dGhpcy5zZXRNb2RlbChzLm1vZGVsc1trXSxrPT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOmspfX1kZWxldGUgcy5tb2RlbHN9aWYocy5iaW5kaW5nQ29udGV4dHMpe2lmKHR5cGVvZiBzLmJpbmRpbmdDb250ZXh0cyE9PSJvYmplY3QiKXt0aHJvdyBuZXcgRXJyb3IoImJpbmRpbmdDb250ZXh0cyBtdXN0IGJlIGEgc2ltcGxlIG9iamVjdCIpfWlmKHMuYmluZGluZ0NvbnRleHRzIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkNvbnRleHQpe3RoaXMuc2V0QmluZGluZ0NvbnRleHQocy5iaW5kaW5nQ29udGV4dHMpfWVsc2V7Zm9yKGsgaW4gcy5iaW5kaW5nQ29udGV4dHMpe3RoaXMuc2V0QmluZGluZ0NvbnRleHQocy5iaW5kaW5nQ29udGV4dHNba10saz09PSJ1bmRlZmluZWQiP3VuZGVmaW5lZDprKX19ZGVsZXRlIHMuYmluZGluZ0NvbnRleHRzfWlmKHMub2JqZWN0QmluZGluZ3Mpe2lmKHR5cGVvZiBzLm9iamVjdEJpbmRpbmdzIT09InN0cmluZyImJnR5cGVvZiBzLm9iamVjdEJpbmRpbmdzIT09Im9iamVjdCIpe3Rocm93IG5ldyBFcnJvcigiYmluZGluZyBtdXN0IGJlIGEgc3RyaW5nIG9yIHNpbXBsZSBvYmplY3QiKX1pZih0eXBlb2Ygcy5vYmplY3RCaW5kaW5ncz09PSJzdHJpbmcifHxzLm9iamVjdEJpbmRpbmdzLnBhdGgpe3RoaXMuYmluZE9iamVjdChzLm9iamVjdEJpbmRpbmdzKX1lbHNle2Zvcih2YXIgayBpbiBzLm9iamVjdEJpbmRpbmdzKXtzLm9iamVjdEJpbmRpbmdzLm1vZGVsPWs7dGhpcy5iaW5kT2JqZWN0KHMub2JqZWN0QmluZGluZ3Nba10pfX1kZWxldGUgcy5vYmplY3RCaW5kaW5nc31mb3IoayBpbiBzKXtpZihLPXZba10pe1Y9c1trXTtzd2l0Y2goSy5faUtpbmQpe2Nhc2UgMDp2YXIgbz10aGlzLmV4dHJhY3RCaW5kaW5nSW5mbyhWLFMpO2lmKG8mJnR5cGVvZiBvPT09Im9iamVjdCIpe3RoaXMuYmluZFByb3BlcnR5KGssbyl9ZWxzZXt0aGlzW0suX3NNdXRhdG9yXShvfHxWKX1icmVhaztjYXNlIDE6dmFyIG89Sy5hbHRUeXBlcyYmdGhpcy5leHRyYWN0QmluZGluZ0luZm8oVixTKTtpZihvJiZ0eXBlb2Ygbz09PSJvYmplY3QiKXt0aGlzLmJpbmRQcm9wZXJ0eShrLG8pfWVsc2V7dGhpc1tLLl9zTXV0YXRvcl0oYShvfHxWLEspKX1icmVhaztjYXNlIDI6dmFyIG89dGhpcy5leHRyYWN0QmluZGluZ0luZm8oVixTKTtpZihvJiZ0eXBlb2Ygbz09PSJvYmplY3QiKXt0aGlzLmJpbmRBZ2dyZWdhdGlvbihrLG8pfWVsc2V7Vj1vfHxWO2lmKFYmJiFxLmlzQXJyYXkoVikpe1Y9W1ZdfWlmKFYpe2Zvcih2YXIgaT0wLGw9Vi5sZW5ndGg7aTxsO2krKyl7dGhpc1tLLl9zTXV0YXRvcl0oYShWW2ldLEspKX19fWJyZWFrO2Nhc2UgMzp0aGlzW0suX3NNdXRhdG9yXShWKTticmVhaztjYXNlIDQ6aWYoViYmIXEuaXNBcnJheShWKSl7Vj1bVl19aWYoVil7Zm9yKHZhciBpPTAsbD1WLmxlbmd0aDtpPGw7aSsrKXt0aGlzW0suX3NNdXRhdG9yXShWW2ldKX19YnJlYWs7Y2FzZSA1OmlmKHR5cGVvZiBWPT0iZnVuY3Rpb24iKXt0aGlzW0suX3NNdXRhdG9yXShWKX1lbHNle3RoaXNbSy5fc011dGF0b3JdKFZbMF0sVlsxXSxWWzJdKX1icmVhaztkZWZhdWx0OmJyZWFrfX19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIk1hbmFnZWRPYmplY3QgIit0aGlzLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpKyIjIit0aGlzLmdldElkKCl9O2QucHJvdG90eXBlLmdldElkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0lkfTtkLnByb3RvdHlwZS5zZXRQcm9wZXJ0eT1mdW5jdGlvbihwLHYscyl7dmFyIG89dGhpcy5tUHJvcGVydGllc1twXTt2PXRoaXMudmFsaWRhdGVQcm9wZXJ0eShwLHYpO2lmKHEuc2FwLmVxdWFsKG8sdikpe3JldHVybiB0aGlzfWlmKHMpe3Euc2FwLmFjdC5yZWZyZXNoKCk7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9dGhpcy5tUHJvcGVydGllc1twXT12O2lmKCF0aGlzLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKSl7dGhpcy5pbnZhbGlkYXRlKCl9dGhpcy51cGRhdGVNb2RlbFByb3BlcnR5KHAsdixvKTtFLnByb3RvdHlwZS5maXJlRXZlbnQuYXBwbHkodGhpcyxbIl9jaGFuZ2UiLHsiaWQiOnRoaXMuZ2V0SWQoKSwibmFtZSI6cCwib2xkVmFsdWUiOm8sIm5ld1ZhbHVlIjp2fV0pO2lmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihwKXt2YXIgdj10aGlzLm1Qcm9wZXJ0aWVzW3BdLG09dGhpcy5nZXRNZXRhZGF0YSgpLFA9bS5nZXRBbGxQcm9wZXJ0aWVzKClbcF0sdDtpZighUCl7dGhyb3cgbmV3IEVycm9yKCJQcm9wZXJ0eSBcIiIrcCsiXCIgZG9lcyBub3QgZXhpc3QgaW4gIit0aGlzKX10PUQuZ2V0VHlwZShQLnR5cGUpO2lmKHQgaW5zdGFuY2VvZiBEJiZ0LmlzQXJyYXlUeXBlKCkmJnEuaXNBcnJheSh2KSl7dj12LnNsaWNlKDApfWlmKHYgaW5zdGFuY2VvZiBTdHJpbmcpe3Y9di52YWx1ZU9mKCl9cmV0dXJuIHZ9O2QucHJvdG90eXBlLnZhbGlkYXRlUHJvcGVydHk9ZnVuY3Rpb24ocCx2KXt2YXIgbT10aGlzLmdldE1ldGFkYXRhKCksUD1tLmdldEFsbFByb3BlcnRpZXMoKVtwXSx0O2lmKCFQKXt0aHJvdyBuZXcgRXJyb3IoIlByb3BlcnR5IFwiIitwKyJcIiBkb2VzIG5vdCBleGlzdCBpbiAiK3RoaXMpfXQ9RC5nZXRUeXBlKFAudHlwZSk7aWYodCBpbnN0YW5jZW9mIEQmJnQuaXNBcnJheVR5cGUoKSYmcS5pc0FycmF5KHYpKXt2PXYuc2xpY2UoMCl9aWYodj09PW51bGx8fHY9PT11bmRlZmluZWQpe2lmKFAuZGVmYXVsdFZhbHVlIT09bnVsbCl7dj1QLmRlZmF1bHRWYWx1ZX1lbHNle3Y9dC5nZXREZWZhdWx0VmFsdWUoKX19ZWxzZSBpZih0IGluc3RhbmNlb2YgRCl7aWYodC5nZXROYW1lKCk9PSJzdHJpbmciKXtpZighKHR5cGVvZiB2PT0ic3RyaW5nInx8diBpbnN0YW5jZW9mIFN0cmluZykpe3Y9IiIrdn19ZWxzZSBpZih0LmdldE5hbWUoKT09InN0cmluZ1tdIil7Zm9yKHZhciBpPTA7aTx2Lmxlbmd0aDtpKyspe2lmKCF0eXBlb2YgdltpXT09InN0cmluZyIpe3ZbaV09IiIrdltpXX19fWVsc2UgaWYoIXQuaXNWYWxpZCh2KSl7dGhyb3cgbmV3IEVycm9yKCJcIiIrdisiXCIgaXMgb2YgdHlwZSAiK3R5cGVvZiB2KyIsIGV4cGVjdGVkICIrdC5nZXROYW1lKCkrIiBmb3IgcHJvcGVydHkgXCIiK3ArIlwiIG9mICIrdGhpcyl9fWVsc2UgaWYoISh2IGluIHQpKXt0aHJvdyBuZXcgRXJyb3IoIlwiIit2KyJcIiBpcyBub3QgYSB2YWxpZCBlbnRyeSBvZiB0aGUgZW51bWVyYXRpb24gZm9yIHByb3BlcnR5IFwiIitwKyJcIiBvZiAiK3RoaXMpfWlmKHQmJnQubm9ybWFsaXplJiZ0eXBlb2YgdC5ub3JtYWxpemU9PT0iZnVuY3Rpb24iKXt2PXQubm9ybWFsaXplKHYpfXJldHVybiB2fTtkLnByb3RvdHlwZS5nZXRPcmlnaW5JbmZvPWZ1bmN0aW9uKHApe3ZhciB2PXRoaXMubVByb3BlcnRpZXNbcF07aWYoISh2IGluc3RhbmNlb2YgU3RyaW5nJiZ2Lm9yaWdpbkluZm8pKXtyZXR1cm4gbnVsbH1yZXR1cm4gdi5vcmlnaW5JbmZvfTtkLnByb3RvdHlwZS5zZXRBc3NvY2lhdGlvbj1mdW5jdGlvbihhLGkscyl7aWYoaSBpbnN0YW5jZW9mIGQpe2k9aS5nZXRJZCgpfWVsc2UgaWYoaSE9bnVsbCYmdHlwZW9mIGkhPT0ic3RyaW5nIil7cmV0dXJuIHRoaXN9aWYodGhpcy5tQXNzb2NpYXRpb25zW2FdPT09aSl7cmV0dXJuIHRoaXN9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9dGhpcy5tQXNzb2NpYXRpb25zW2FdPWk7aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUuZ2V0QXNzb2NpYXRpb249ZnVuY3Rpb24oYSxvKXt2YXIgcj10aGlzLm1Bc3NvY2lhdGlvbnNbYV07aWYoIXIpe3I9dGhpcy5tQXNzb2NpYXRpb25zW2FdPW98fG51bGx9ZWxzZXtpZih0eXBlb2Ygci5sZW5ndGg9PT0nbnVtYmVyJyYmIShyLnByb3BlcnR5SXNFbnVtZXJhYmxlKCdsZW5ndGgnKSkpe3JldHVybiByLnNsaWNlKCl9cmV0dXJuIHJ9cmV0dXJuIHJ9O2QucHJvdG90eXBlLmFkZEFzc29jaWF0aW9uPWZ1bmN0aW9uKGEsaSxzKXtpZihpIGluc3RhbmNlb2YgZCl7aT1pLmdldElkKCl9ZWxzZSBpZih0eXBlb2YgaSE9PSJzdHJpbmciKXtyZXR1cm4gdGhpc31pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK312YXIgST10aGlzLm1Bc3NvY2lhdGlvbnNbYV07aWYoIUkpe0k9dGhpcy5tQXNzb2NpYXRpb25zW2FdPVtpXX1lbHNle0kucHVzaChpKX1pZighdGhpcy5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCkpe3RoaXMuaW52YWxpZGF0ZSgpfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5yZW1vdmVBc3NvY2lhdGlvbj1mdW5jdGlvbihhLG8scyl7dmFyIEk9dGhpcy5tQXNzb2NpYXRpb25zW2FdO3ZhciBlPW51bGw7aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9aWYodHlwZW9mKG8pPT0ib2JqZWN0IiYmby5nZXRJZCl7bz1vLmdldElkKCl9aWYodHlwZW9mKG8pPT0ic3RyaW5nIil7Zm9yKHZhciBpPTA7aTxJLmxlbmd0aDtpKyspe2lmKElbaV09PW8pe289aTticmVha319fWlmKHR5cGVvZihvKT09Im51bWJlciIpe2lmKG88MHx8bz49SS5sZW5ndGgpe3Euc2FwLmxvZy53YXJuaW5nKCJNYW5hZ2VkT2JqZWN0LnJlbW92ZUFzc29jaWF0aW9uIGNhbGxlZCB3aXRoIGludmFsaWQgaW5kZXg6ICIrYSsiLCAiK28pfWVsc2V7ZT1JW29dO0kuc3BsaWNlKG8sMSk7aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX19fWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiBlfTtkLnByb3RvdHlwZS5yZW1vdmVBbGxBc3NvY2lhdGlvbj1mdW5jdGlvbihhLHMpe3ZhciBpPXRoaXMubUFzc29jaWF0aW9uc1thXTtpZighaSl7cmV0dXJuW119aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9ZGVsZXRlIHRoaXMubUFzc29jaWF0aW9uc1thXTtpZighdGhpcy5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCkpe3RoaXMuaW52YWxpZGF0ZSgpfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiBpfTtkLnByb3RvdHlwZS52YWxpZGF0ZUFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEsbyxtKXt2YXIgZT10aGlzLmdldE1ldGFkYXRhKCksQT1lLmdldE1hbmFnZWRBZ2dyZWdhdGlvbihhKSxmLHQsaSxnO2lmKCFBKXtpZihhJiZlLl9tSGlkZGVuQWdncmVnYXRpb25zJiZlLl9tSGlkZGVuQWdncmVnYXRpb25zW2FdKXtBPWUuX21IaWRkZW5BZ2dyZWdhdGlvbnNbYV07cS5zYXAubG9nLmVycm9yKCJTdXBwb3J0IGZvciAnX21IaWRkZW5BZ2dyZWdhdGlvbnMnIGlzIGFib3V0IHRvIGJlIHJlbW92ZWQgKHdpdGggMS4xMiBsYXRlc3QpLiBIaWRkZW4gYWdncmVnYXRpb25zIGxpa2UgJyIrZS5nZXROYW1lKCkrIi4iK2ErIicgaW5zdGVhZCBjYW4gYmUgZGVjbGFyZWQgbGlrZSBub3JtYWwgYWdncmVnYXRpb25zIGJ1dCB3aXRoIHZpc2liaWxpdHk6J2hpZGRlbicuIil9ZWxzZXtnPSJBZ2dyZWdhdGlvbiBcIiIrYSsiXCIgZG9lcyBub3QgZXhpc3QgaW4gIit0aGlzO2lmKC9ec2FwXC4odWlcLmNvcmV8dWlcLmNvbW1vbnN8dWlcLnRhYmxlfHVpXC51eDN8bXxtYWtpdHx2aXp8dWlleHRcLmluYm94KSQvLnRlc3QoZS5nZXRMaWJyYXJ5TmFtZSgpfHwiIikpe3Rocm93IG5ldyBFcnJvcihnKX1lbHNle3Euc2FwLmxvZy5lcnJvcigiU3VwcG9ydCBmb3IgdW5kZWNsYXJlZCBhZ2dyZWdhdGlvbnMgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZCAod2l0aCAxLjEyIGxhdGVzdCkuIEhpZGRlbiBhZ2dyZWdhdGlvbnMgbGlrZSAnIitlLmdldE5hbWUoKSsiLiIrYSsiJyBjYW4gYmUgZGVjbGFyZWQgbGlrZSBub3JtYWwgYWdncmVnYXRpb25zIGJ1dCB3aXRoIHZpc2liaWxpdHk6J2hpZGRlbicuIik7cmV0dXJuIG99fX1pZihBLm11bHRpcGxlIT09bSl7dGhyb3cgbmV3IEVycm9yKCJBZ2dyZWdhdGlvbiAnIithKyInIG9mICIrdGhpcysiIHVzZWQgd2l0aCB3cm9uZyBjYXJkaW5hbGl0eSAoZGVjbGFyZWQgYXMgIisoQS5tdWx0aXBsZT8iMC4ubiI6IjAuLjEiKSsiKSIpfWlmKCFBLm11bHRpcGxlJiYhbyl7cmV0dXJuIG99dD1xLnNhcC5nZXRPYmplY3QoQS50eXBlKTtpZih0eXBlb2YgdD09PSJmdW5jdGlvbiImJm8gaW5zdGFuY2VvZiB0KXtyZXR1cm4gb31pZihvJiZvLmdldE1ldGFkYXRhJiZvLmdldE1ldGFkYXRhKCkuaXNJbnN0YW5jZU9mKEEudHlwZSkpe3JldHVybiBvfWY9QS5hbHRUeXBlcztpZihmJiZmLmxlbmd0aCl7aWYobz09bnVsbCl7cmV0dXJuIG99Zm9yKGk9MDtpPGYubGVuZ3RoO2krKyl7dD1ELmdldFR5cGUoZltpXSk7aWYodCBpbnN0YW5jZW9mIEQpe2lmKHQuaXNWYWxpZChvKSl7cmV0dXJuIG99fWVsc2UgaWYobyBpbiB0KXtyZXR1cm4gb319fWc9IlwiIitvKyJcIiBpcyBub3QgdmFsaWQgZm9yIGFnZ3JlZ2F0aW9uIFwiIithKyJcIiBvZiAiK3RoaXM7aWYoRC5pc0ludGVyZmFjZVR5cGUoQS50eXBlKSl7cmV0dXJuIG99ZWxzZXt0aHJvdyBuZXcgRXJyb3IoZyl9fTtkLnByb3RvdHlwZS5zZXRBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLG8scyl7dmFyIE89dGhpcy5tQWdncmVnYXRpb25zW2FdO2lmKE89PT1vKXtyZXR1cm4gdGhpc31vPXRoaXMudmFsaWRhdGVBZ2dyZWdhdGlvbihhLG8sZmFsc2UpO2lmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfWlmKE8gaW5zdGFuY2VvZiBkKXtPLnNldFBhcmVudChudWxsKX10aGlzLm1BZ2dyZWdhdGlvbnNbYV09bztpZihvIGluc3RhbmNlb2YgZCl7by5zZXRQYXJlbnQodGhpcyxhLHMpfWVsc2V7aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX19aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLmdldEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEsbyl7dmFyIGU9dGhpcy5tQWdncmVnYXRpb25zW2FdO2lmKCFlKXtlPXRoaXMubUFnZ3JlZ2F0aW9uc1thXT1vfHxudWxsfWlmKGUpe2lmKHR5cGVvZiBlLmxlbmd0aD09PSdudW1iZXInJiYhKGUucHJvcGVydHlJc0VudW1lcmFibGUoJ2xlbmd0aCcpKSl7cmV0dXJuIGUuc2xpY2UoKX1yZXR1cm4gZX1lbHNle3JldHVybiBudWxsfX07ZC5wcm90b3R5cGUuaW5kZXhPZkFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEsbyl7dmFyIGU9dGhpcy5tQWdncmVnYXRpb25zW2FdO2lmKGUpe2lmKGUubGVuZ3RoPT11bmRlZmluZWQpe3JldHVybi0yfWZvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXtpZihlW2ldPT1vKXtyZXR1cm4gaX19fXJldHVybi0xfTtkLnByb3RvdHlwZS5pbnNlcnRBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLG8sSSxzKXtpZighbyl7cmV0dXJuIHRoaXN9bz10aGlzLnZhbGlkYXRlQWdncmVnYXRpb24oYSxvLHRydWUpO3ZhciBlPXRoaXMubUFnZ3JlZ2F0aW9uc1thXXx8KHRoaXMubUFnZ3JlZ2F0aW9uc1thXT1bXSk7dmFyIGk9STwwPzA6KEk+ZS5sZW5ndGg/ZS5sZW5ndGg6SSk7aWYoaSE9PUkpe3Euc2FwLmxvZy53YXJuaW5nKCJNYW5hZ2VkT2JqZWN0Lmluc2VydEFnZ3JlZ2F0aW9uOiBpbmRleCAnIitJKyInIG91dCBvZiByYW5nZSBbMCwiK2UubGVuZ3RoKyJdLCBmb3JjZWQgdG8gIitpKX1lLnNwbGljZShpLDAsbyk7by5zZXRQYXJlbnQodGhpcyxhLHMpO3JldHVybiB0aGlzfTtkLnByb3RvdHlwZS5hZGRBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLG8scyl7aWYoIW8pe3JldHVybiB0aGlzfW89dGhpcy52YWxpZGF0ZUFnZ3JlZ2F0aW9uKGEsbyx0cnVlKTt2YXIgZT10aGlzLm1BZ2dyZWdhdGlvbnNbYV07aWYoIWUpe2U9dGhpcy5tQWdncmVnYXRpb25zW2FdPVtvXX1lbHNle2UucHVzaChvKX1vLnNldFBhcmVudCh0aGlzLGEscyk7cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLnJlbW92ZUFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEsbyxzKXt2YXIgZT10aGlzLm1BZ2dyZWdhdGlvbnNbYV0sZj1udWxsLGk7aWYoIWUpe3JldHVybiBudWxsfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfWlmKHR5cGVvZihvKT09InN0cmluZyIpe2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspe2lmKGVbaV0mJmVbaV0uZ2V0SWQoKT09PW8pe289aTticmVha319fWlmKHR5cGVvZihvKT09Im9iamVjdCIpe2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspe2lmKGVbaV09PW8pe289aTticmVha319fWlmKHR5cGVvZihvKT09Im51bWJlciIpe2lmKG88MHx8bz49ZS5sZW5ndGgpe3Euc2FwLmxvZy53YXJuaW5nKCJNYW5hZ2VkT2JqZWN0LnJlbW92ZUFnZ3JlZ2F0aW9uIGNhbGxlZCB3aXRoIGludmFsaWQgaW5kZXg6ICIrYSsiLCAiK28pfWVsc2V7Zj1lW29dO2Uuc3BsaWNlKG8sMSk7Zi5zZXRQYXJlbnQobnVsbCk7aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX19fWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiBmfTtkLnByb3RvdHlwZS5yZW1vdmVBbGxBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLHMpe3ZhciBlPXRoaXMubUFnZ3JlZ2F0aW9uc1thXTtpZighZSl7cmV0dXJuW119aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9ZGVsZXRlIHRoaXMubUFnZ3JlZ2F0aW9uc1thXTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7ZVtpXS5zZXRQYXJlbnQobnVsbCl9aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1yZXR1cm4gZX07ZC5wcm90b3R5cGUuZGVzdHJveUFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEscyl7dmFyIGU9dGhpcy5tQWdncmVnYXRpb25zW2FdLGksZjtpZighZSl7cmV0dXJuIHRoaXN9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9ZGVsZXRlIHRoaXMubUFnZ3JlZ2F0aW9uc1thXTtpZihlIGluc3RhbmNlb2YgZCl7ZS5kZXN0cm95KHMpfWVsc2UgaWYocS5pc0FycmF5KGUpKXtmb3IoaT1lLmxlbmd0aC0xO2k+PTA7aS0tKXtmPWVbaV07aWYoZil7Zi5kZXN0cm95KHMpfX19aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUuaW52YWxpZGF0ZT1mdW5jdGlvbigpe2lmKHRoaXMub1BhcmVudCl7dGhpcy5vUGFyZW50LmludmFsaWRhdGUodGhpcyl9fTtkLnByb3RvdHlwZS5pc0ludmFsaWRhdGVTdXBwcmVzc2VkPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlPjA7aWYodGhpcy5vUGFyZW50JiZ0aGlzLm9QYXJlbnQgaW5zdGFuY2VvZiBkKXtpPWl8fHRoaXMub1BhcmVudC5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCl9cmV0dXJuIGl9O2QucHJvdG90eXBlLl9yZW1vdmVDaGlsZD1mdW5jdGlvbihvLGEscyl7aWYoIWEpe3Euc2FwLmxvZy5lcnJvcigiQ2Fubm90IHJlbW92ZSBhZ2dyZWdhdGVkIGNoaWxkIHdpdGhvdXQgYWdncmVnYXRpb24gbmFtZS4iLG51bGwsdGhpcyl9ZWxzZXtpZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK312YXIgaT10aGlzLmluZGV4T2ZBZ2dyZWdhdGlvbihhLG8pO3ZhciBBPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpW2FdO2lmKGk9PS0yKXtpZihBJiZ0aGlzW0EuX3NNdXRhdG9yXSl7dGhpc1tBLl9zTXV0YXRvcl0obnVsbCl9ZWxzZXt0aGlzLnNldEFnZ3JlZ2F0aW9uKGEsbnVsbCxzKX19ZWxzZSBpZihpPi0xKXtpZihBJiZ0aGlzW0EuX3NSZW1vdmVNdXRhdG9yXSl7dGhpc1tBLl9zUmVtb3ZlTXV0YXRvcl0oaSl9ZWxzZXt0aGlzLnJlbW92ZUFnZ3JlZ2F0aW9uKGEsaSxzKX19ZWxzZXt9aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX19fTtkLnByb3RvdHlwZS5zZXRQYXJlbnQ9ZnVuY3Rpb24ocCxhLHMpe3ZhciB0PXRoaXM7aWYoIXApe3RoaXMub1BhcmVudD1udWxsO3RoaXMuc1BhcmVudEFnZ3JlZ2F0aW9uTmFtZT1udWxsO3RoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzPXtvTW9kZWxzOnt9LG9CaW5kaW5nQ29udGV4dHM6e319O3Euc2FwLmFjdC5yZWZyZXNoKCk7cmV0dXJufWlmKHMpe3Euc2FwLmFjdC5yZWZyZXNoKCk7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9dmFyIG89dGhpcy5nZXRQYXJlbnQoKTtpZihvKXtvLl9yZW1vdmVDaGlsZCh0aGlzLHRoaXMuc1BhcmVudEFnZ3JlZ2F0aW9uTmFtZSl9dGhpcy5vUGFyZW50PXA7dGhpcy5zUGFyZW50QWdncmVnYXRpb25OYW1lPWE7dGhpcy5vUHJvcGFnYXRlZFByb3BlcnRpZXM9cC5fZ2V0UHJvcGVydGllc1RvUHJvcGFnYXRlKCk7aWYodGhpcy5oYXNNb2RlbCgpKXt0aGlzLnVwZGF0ZUJpbmRpbmdDb250ZXh0KGZhbHNlLHRydWUsdW5kZWZpbmVkLHRydWUpO3RoaXMudXBkYXRlQmluZGluZ3ModHJ1ZSxudWxsKTt0aGlzLnByb3BhZ2F0ZVByb3BlcnRpZXModHJ1ZSl9aWYocCYmIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXtwLmludmFsaWRhdGUodGhpcyl9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLmdldFBhcmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9QYXJlbnR9O2QucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24ocyl7dmFyIHQ9dGhpcztpZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK31pZih0aGlzLmV4aXQpe3RoaXMuZXhpdCgpfWlmKHRoaXMuX2V4aXRDb21wb3NpdGVTdXBwb3J0KXt0aGlzLl9leGl0Q29tcG9zaXRlU3VwcG9ydCgpfWZvcih2YXIgYSBpbiB0aGlzLm1BZ2dyZWdhdGlvbnMpe3RoaXMuZGVzdHJveUFnZ3JlZ2F0aW9uKGEscyl9aWYodGhpcy5kZXJlZ2lzdGVyKXRoaXMuZGVyZWdpc3RlcigpO2lmKHRoaXMub1BhcmVudCYmdGhpcy5zUGFyZW50QWdncmVnYXRpb25OYW1lKXt0aGlzLm9QYXJlbnQuX3JlbW92ZUNoaWxkKHRoaXMsdGhpcy5zUGFyZW50QWdncmVnYXRpb25OYW1lLHMpfWRlbGV0ZSB0aGlzLm9QYXJlbnQ7cS5lYWNoKHRoaXMubUJpbmRpbmdJbmZvcyxmdW5jdGlvbihuLG8pe2lmKG8uZmFjdG9yeSl7dC51bmJpbmRBZ2dyZWdhdGlvbihuLHRydWUpfWVsc2V7dC51bmJpbmRQcm9wZXJ0eShuLHRydWUpfX0pO2lmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfUUucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc2V0UGFyZW50PWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoIlRoZSBvYmplY3Qgd2l0aCBJRCAiK3QuZ2V0SWQoKSsiIHdhcyBkZXN0cm95ZWQgYW5kIGNhbm5vdCBiZSB1c2VkIGFueW1vcmUuIil9O3RoaXMuYklzRGVzdHJveWVkPXRydWV9O2QuYmluZGluZ1BhcnNlcj1CLnNpbXBsZVBhcnNlcjtkLnByb3RvdHlwZS5pc0JpbmRpbmc9ZnVuY3Rpb24odixrKXtyZXR1cm4ib2JqZWN0Ij09PXR5cGVvZiB0aGlzLmV4dHJhY3RCaW5kaW5nSW5mbyh2KX07ZC5wcm90b3R5cGUuZXh0cmFjdEJpbmRpbmdJbmZvPWZ1bmN0aW9uKHYscyl7aWYodiYmdHlwZW9mIHY9PT0ib2JqZWN0Iil7aWYodi51aTVvYmplY3Qpe2RlbGV0ZSB2LnVpNW9iamVjdH1lbHNlIGlmKHYucGF0aHx8di5wYXJ0cyl7aWYodi50ZW1wbGF0ZSl7di50ZW1wbGF0ZT1kLmNyZWF0ZSh2LnRlbXBsYXRlKX1yZXR1cm4gdn19aWYodHlwZW9mIHY9PT0ic3RyaW5nIil7cmV0dXJuIGQuYmluZGluZ1BhcnNlcih2LHMsdHJ1ZSl9fTtkLnByb3RvdHlwZS5nZXRCaW5kaW5nSW5mbz1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5tQmluZGluZ0luZm9zW25dfTtkLnByb3RvdHlwZS5iaW5kT2JqZWN0PWZ1bmN0aW9uKHAsUCl7dmFyIGE9e30sbyxtLHM7aWYodHlwZW9mIHA9PSJvYmplY3QiKXt2YXIgZT1wO3A9ZS5wYXRoO1A9ZS5wYXJhbWV0ZXJzO209ZS5tb2RlbDthLmV2ZW50cz1lLmV2ZW50c31zPXAuaW5kZXhPZigiPiIpO2Euc0JpbmRpbmdQYXRoPXA7YS5tQmluZGluZ1BhcmFtZXRlcnM9UDtpZihzPjApe209cC5zdWJzdHIoMCxzKTthLnNCaW5kaW5nUGF0aD1wLnN1YnN0cihzKzEpfW89dGhpcy5tQm91bmRPYmplY3RzW21dO2lmKG8mJm8uYmluZGluZyl7by5iaW5kaW5nLmRldGFjaENoYW5nZShvLmZDaGFuZ2VIYW5kbGVyKTtvLmJpbmRpbmcuZGV0YWNoRXZlbnRzKG8uZXZlbnRzKX10aGlzLm1Cb3VuZE9iamVjdHNbbV09YTtpZih0aGlzLmdldE1vZGVsKG0pKXt0aGlzLl9iaW5kT2JqZWN0KG0sYSl9cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLl9iaW5kT2JqZWN0PWZ1bmN0aW9uKG0sbyl7dmFyIGEscCxlLHQ9dGhpczt2YXIgZj1mdW5jdGlvbihnKXt0LnNldEJpbmRpbmdDb250ZXh0KGEuZ2V0Qm91bmRDb250ZXh0KCksbSl9O2U9dGhpcy5nZXRNb2RlbChtKTtpZih0aGlzLm9QYXJlbnQmJmU9PXRoaXMub1BhcmVudC5nZXRNb2RlbChtKSl7cD10aGlzLm9QYXJlbnQuZ2V0QmluZGluZ0NvbnRleHQobSl9YT1lLmJpbmRDb250ZXh0KG8uc0JpbmRpbmdQYXRoLHAsby5tQmluZGluZ1BhcmFtZXRlcnMpO2EuYXR0YWNoQ2hhbmdlKGYpO28uYmluZGluZz1hO28uZkNoYW5nZUhhbmRsZXI9ZjthLmF0dGFjaEV2ZW50cyhvLmV2ZW50cyk7YS5pbml0aWFsaXplKCl9O2QucHJvdG90eXBlLmJpbmRDb250ZXh0PWZ1bmN0aW9uKHApe3JldHVybiB0aGlzLmJpbmRFbGVtZW50KHApfTtkLnByb3RvdHlwZS51bmJpbmRDb250ZXh0PWZ1bmN0aW9uKG0pe3JldHVybiB0aGlzLnVuYmluZEVsZW1lbnQobSl9O2QucHJvdG90eXBlLnVuYmluZE9iamVjdD1mdW5jdGlvbihtKXt2YXIgbz10aGlzLm1Cb3VuZE9iamVjdHNbbV07aWYobyl7aWYoby5iaW5kaW5nKXtvLmJpbmRpbmcuZGV0YWNoQ2hhbmdlKG8uZkNoYW5nZUhhbmRsZXIpO28uYmluZGluZy5kZXRhY2hFdmVudHMoby5ldmVudHMpfWRlbGV0ZSB0aGlzLm1Cb3VuZE9iamVjdHNbbV07ZGVsZXRlIHRoaXMub0JpbmRpbmdDb250ZXh0c1ttXTt0aGlzLnVwZGF0ZUJpbmRpbmdDb250ZXh0KGZhbHNlLGZhbHNlLG0pfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5iaW5kUHJvcGVydHk9ZnVuY3Rpb24obixvKXt2YXIgcCxmLG0scyxGLHQsUyxhPXRydWUsZT10aGlzLGc9dGhpcy5nZXRNZXRhZGF0YSgpLFA9Zy5nZXRBbGxQcm9wZXJ0aWVzKClbbl0saz1nLmdldEpTT05LZXlzKClbbl07aWYoIVAmJiEoayYmay5hbHRUeXBlcykpe3Rocm93IG5ldyBFcnJvcigiUHJvcGVydHkgXCIiK24rIlwiIGRvZXMgbm90IGV4aXN0IGluICIrdGhpcyl9aWYodHlwZW9mIG89PSJzdHJpbmciKXtwPWFyZ3VtZW50c1sxXTtmPWFyZ3VtZW50c1syXTttPWFyZ3VtZW50c1szXTtpZih0eXBlb2YgZj09ImZ1bmN0aW9uIil7Rj1mfWVsc2UgaWYoZiBpbnN0YW5jZW9mIFQpe3Q9Zn1vPXtmb3JtYXR0ZXI6RixwYXJ0czpbe3BhdGg6cCx0eXBlOnQsbW9kZTptfV19fWlmKCFvLnBhcnRzKXtvLnBhcnRzPVtdO28ucGFydHNbMF09e3BhdGg6by5wYXRoLHR5cGU6by50eXBlLGZvcm1hdE9wdGlvbnM6by5mb3JtYXRPcHRpb25zLGNvbnN0cmFpbnRzOm8uY29uc3RyYWludHMsbW9kZWw6by5tb2RlbCxtb2RlOm8ubW9kZX07ZGVsZXRlIG8ucGF0aDtkZWxldGUgby5tb2RlO2RlbGV0ZSBvLm1vZGVsfXEuZWFjaChvLnBhcnRzLGZ1bmN0aW9uKGksaCl7aWYodHlwZW9mIGg9PSJzdHJpbmciKXtoPXtwYXRoOmh9O28ucGFydHNbaV09aH1TPWgucGF0aC5pbmRleE9mKCI+Iik7aWYoUz4wKXtoLm1vZGVsPWgucGF0aC5zdWJzdHIoMCxTKTtoLnBhdGg9aC5wYXRoLnN1YnN0cihTKzEpfWlmKG8uZm9ybWF0dGVyfHxvLnBhcnRzLmxlbmd0aD4xKXtoLm1vZGU9c2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlLk9uZVdheX1pZighZS5nZXRNb2RlbChoLm1vZGVsKSl7YT1mYWxzZX19KTtpZih0aGlzLmlzQm91bmQobikpe3RoaXMudW5iaW5kUHJvcGVydHkobix0cnVlKX10aGlzLm1CaW5kaW5nSW5mb3Nbbl09bztpZihhKXt0aGlzLl9iaW5kUHJvcGVydHkobixvKX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUuX2JpbmRQcm9wZXJ0eT1mdW5jdGlvbihuLG8pe3ZhciBtLHMsYSxlLHQsZixwPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpW25dLGc9dGhpcyxoPVtdLGo9ZnVuY3Rpb24oaSl7Zy51cGRhdGVQcm9wZXJ0eShuKX07YT10aGlzLmdldEJpbmRpbmdDb250ZXh0KG8ubW9kZWwpO3EuZWFjaChvLnBhcnRzLGZ1bmN0aW9uKGksUCl7YT1nLmdldEJpbmRpbmdDb250ZXh0KFAubW9kZWwpO209Zy5nZXRNb2RlbChQLm1vZGVsKTt0PVAudHlwZTtpZih0eXBlb2YgdD09InN0cmluZyIpe2Y9cS5zYXAuZ2V0T2JqZWN0KHQpO3Q9bmV3IGYoUC5mb3JtYXRPcHRpb25zLFAuY29uc3RyYWludHMpfWU9bS5iaW5kUHJvcGVydHkoUC5wYXRoLGEsby5wYXJhbWV0ZXJzKTtlLnNldFR5cGUodCxwLnR5cGUpO2Uuc2V0Rm9ybWF0dGVyKFAuZm9ybWF0dGVyKTtzPSFQLm1vZGU/bS5nZXREZWZhdWx0QmluZGluZ01vZGUoKTpQLm1vZGU7ZS5zZXRCaW5kaW5nTW9kZShzKTtoLnB1c2goZSl9KTtpZihoLmxlbmd0aD4xfHwoby5mb3JtYXR0ZXImJm8uZm9ybWF0dGVyLnRleHRGcmFnbWVudHMpKXt0PW8udHlwZTtpZih0eXBlb2YgdD09InN0cmluZyIpe2Y9cS5zYXAuZ2V0T2JqZWN0KHQpO3Q9bmV3IGYoby5mb3JtYXRPcHRpb25zLG8uY29uc3RyYWludHMpfWU9bmV3IEMoaCxvLnVzZVJhd1ZhbHVlcyk7ZS5zZXRUeXBlKHQscC50eXBlKTtlLnNldEJpbmRpbmdNb2RlKG8ubW9kZSl9ZWxzZXtlPWhbMF19ZS5hdHRhY2hDaGFuZ2Uoaik7ZS5zZXRGb3JtYXR0ZXIocS5wcm94eShvLmZvcm1hdHRlcix0aGlzKSk7by5iaW5kaW5nPWU7by5tb2RlbENoYW5nZUhhbmRsZXI9ajtlLmF0dGFjaEV2ZW50cyhvLmV2ZW50cyk7ZS5pbml0aWFsaXplKCk7aWYoZS5nZXRCaW5kaW5nTW9kZSgpPT09c2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlLk9uZVRpbWUpe2UuZGV0YWNoQ2hhbmdlKGopO2UuZGV0YWNoRXZlbnRzKG8uZXZlbnRzKX19O2QucHJvdG90eXBlLnVuYmluZFByb3BlcnR5PWZ1bmN0aW9uKG4scyl7dmFyIG89dGhpcy5tQmluZGluZ0luZm9zW25dLHA9dGhpcy5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKClbbl07aWYobyl7aWYoby5iaW5kaW5nKXtvLmJpbmRpbmcuZGV0YWNoQ2hhbmdlKG8ubW9kZWxDaGFuZ2VIYW5kbGVyKTtvLmJpbmRpbmcuZGV0YWNoRXZlbnRzKG8uZXZlbnRzKX1kZWxldGUgdGhpcy5tQmluZGluZ0luZm9zW25dO2lmKCFzKXt0aGlzW3AuX3NNdXRhdG9yXShudWxsKX19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLnVwZGF0ZVByb3BlcnR5PWZ1bmN0aW9uKG4pe3ZhciBvPXRoaXMubUJpbmRpbmdJbmZvc1tuXSxhPW8uYmluZGluZyxwPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpW25dO2lmKG8uc2tpcFByb3BlcnR5VXBkYXRlKXJldHVybjt0cnl7dmFyIHY9YS5nZXRFeHRlcm5hbFZhbHVlKCk7by5za2lwTW9kZWxVcGRhdGU9dHJ1ZTt0aGlzW3AuX3NNdXRhdG9yXSh2KTtvLnNraXBNb2RlbFVwZGF0ZT1mYWxzZX1jYXRjaChlKXtvLnNraXBNb2RlbFVwZGF0ZT1mYWxzZTtpZihlIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkZvcm1hdEV4Y2VwdGlvbil7dGhpcy5maXJlRm9ybWF0RXJyb3Ioe2VsZW1lbnQ6dGhpcyxwcm9wZXJ0eTpuLHR5cGU6YS5nZXRUeXBlKCksbmV3VmFsdWU6YS5nZXRWYWx1ZSgpLG9sZFZhbHVlOnRoaXMuZ2V0UHJvcGVydHkobiksZXhjZXB0aW9uOmV9LGZhbHNlLHRydWUpfWVsc2V7dGhyb3cgZX19fTtkLnByb3RvdHlwZS51cGRhdGVNb2RlbFByb3BlcnR5PWZ1bmN0aW9uKG4sdixvKXtpZih0aGlzLmlzQm91bmQobikpe3ZhciBhPXRoaXMubUJpbmRpbmdJbmZvc1tuXSxlPWEuYmluZGluZztpZihhLnNraXBNb2RlbFVwZGF0ZSlyZXR1cm47aWYoZSYmZS5nZXRCaW5kaW5nTW9kZSgpPT1zYXAudWkubW9kZWwuQmluZGluZ01vZGUuVHdvV2F5KXt0cnl7YS5za2lwUHJvcGVydHlVcGRhdGU9dHJ1ZTtlLnNldEV4dGVybmFsVmFsdWUodik7YS5za2lwUHJvcGVydHlVcGRhdGU9ZmFsc2U7dmFyIGY9ZS5nZXRFeHRlcm5hbFZhbHVlKCk7aWYodiE9Zil7dGhpcy51cGRhdGVQcm9wZXJ0eShuKX1pZihlLmdldFR5cGUoKSl7dGhpcy5maXJlVmFsaWRhdGlvblN1Y2Nlc3Moe2VsZW1lbnQ6dGhpcyxwcm9wZXJ0eTpuLHR5cGU6ZS5nZXRUeXBlKCksbmV3VmFsdWU6dixvbGRWYWx1ZTpvfSxmYWxzZSx0cnVlKX19Y2F0Y2goZyl7YS5za2lwUHJvcGVydHlVcGRhdGU9ZmFsc2U7aWYoZyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbil7dGhpcy5maXJlUGFyc2VFcnJvcih7ZWxlbWVudDp0aGlzLHByb3BlcnR5Om4sdHlwZTplLmdldFR5cGUoKSxuZXdWYWx1ZTp2LG9sZFZhbHVlOm8sZXhjZXB0aW9uOmd9LGZhbHNlLHRydWUpfWVsc2UgaWYoZyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5WYWxpZGF0ZUV4Y2VwdGlvbil7dGhpcy5maXJlVmFsaWRhdGlvbkVycm9yKHtlbGVtZW50OnRoaXMscHJvcGVydHk6bix0eXBlOmUuZ2V0VHlwZSgpLG5ld1ZhbHVlOnYsb2xkVmFsdWU6byxleGNlcHRpb246Z30sZmFsc2UsdHJ1ZSl9ZWxzZXt0aHJvdyBnfX19fX07ZC5wcm90b3R5cGUuYmluZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKG4sbyl7dmFyIHAsdCxzLGYsbT10aGlzLmdldE1ldGFkYXRhKCksYT1tLmdldEFsbEFnZ3JlZ2F0aW9ucygpW25dO2lmKCFhKXt0aHJvdyBuZXcgRXJyb3IoIkFnZ3JlZ2F0aW9uIFwiIituKyJcIiBkb2VzIG5vdCBleGlzdCBpbiAiK3RoaXMpfWlmKHR5cGVvZiBvPT0ic3RyaW5nIil7cD1hcmd1bWVudHNbMV07dD1hcmd1bWVudHNbMl07cz1hcmd1bWVudHNbM107Zj1hcmd1bWVudHNbNF07bz17cGF0aDpwLHNvcnRlcjpzLGZpbHRlcnM6Zn07aWYodCBpbnN0YW5jZW9mIGQpe28udGVtcGxhdGU9dH1lbHNlIGlmKHR5cGVvZiB0PT09ImZ1bmN0aW9uIil7by5mYWN0b3J5PXR9fWlmKHRoaXMuaXNCb3VuZChuKSl7dGhpcy51bmJpbmRBZ2dyZWdhdGlvbihuLHRydWUpfWlmKCEoby50ZW1wbGF0ZXx8by5mYWN0b3J5KSl7aWYoYS5fZG9lc05vdFJlcXVpcmVGYWN0b3J5KXtvLmZhY3Rvcnk9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoImR1bW15IGZhY3RvcnkgY2FsbGVkIHVuZXhwZWN0ZWRseSAiKX19ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIk1pc3NpbmcgdGVtcGxhdGUgb3IgZmFjdG9yeSBmdW5jdGlvbiBmb3IgYWdncmVnYXRpb24gIituKyIgb2YgIit0aGlzKyIgISIpfX1pZihvLnRlbXBsYXRlKXtvLmZhY3Rvcnk9ZnVuY3Rpb24oaSl7cmV0dXJuIG8udGVtcGxhdGUuY2xvbmUoaSl9fXZhciBTPW8ucGF0aC5pbmRleE9mKCI+Iik7aWYoUz4wKXtvLm1vZGVsPW8ucGF0aC5zdWJzdHIoMCxTKTtvLnBhdGg9by5wYXRoLnN1YnN0cihTKzEpfXRoaXMubUJpbmRpbmdJbmZvc1tuXT1vO2lmKHRoaXMuZ2V0TW9kZWwoby5tb2RlbCkpe3RoaXMuX2JpbmRBZ2dyZWdhdGlvbihuLG8pfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5fYmluZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKG4sbyl7dmFyIHQ9dGhpcyxhLG09ZnVuY3Rpb24oZyl7dmFyIHU9InVwZGF0ZSIrbi5zdWJzdHIoMCwxKS50b1VwcGVyQ2FzZSgpK24uc3Vic3RyKDEpO2lmKHRbdV0pe3ZhciBzPWcmJmcuZ2V0UGFyYW1ldGVyKCJyZWFzb24iKTtpZihzKXt0W3VdKHMpfWVsc2V7dFt1XSgpfX1lbHNle3QudXBkYXRlQWdncmVnYXRpb24obil9fSxmPWZ1bmN0aW9uKGcpe3ZhciByPSJyZWZyZXNoIituLnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrbi5zdWJzdHIoMSk7aWYodFtyXSl7dFtyXShnLmdldFBhcmFtZXRlcigicmVhc29uIikpfWVsc2V7bShnKX19O3ZhciBlPXRoaXMuZ2V0TW9kZWwoby5tb2RlbCk7aWYodGhpcy5pc1RyZWVCaW5kaW5nKG4pKXthPWUuYmluZFRyZWUoby5wYXRoLHRoaXMuZ2V0QmluZGluZ0NvbnRleHQoby5tb2RlbCksby5maWx0ZXJzLG8ucGFyYW1ldGVycyl9ZWxzZXthPWUuYmluZExpc3Qoby5wYXRoLHRoaXMuZ2V0QmluZGluZ0NvbnRleHQoby5tb2RlbCksby5zb3J0ZXIsby5maWx0ZXJzLG8ucGFyYW1ldGVycyl9aWYodGhpcy5iVXNlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb249PT10cnVlKXthLmVuYWJsZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uKCl9by5iaW5kaW5nPWE7by5tb2RlbENoYW5nZUhhbmRsZXI9bTtvLm1vZGVsUmVmcmVzaEhhbmRsZXI9ZjthLmF0dGFjaENoYW5nZShtKTthLmF0dGFjaFJlZnJlc2goZik7YS5hdHRhY2hFdmVudHMoby5ldmVudHMpO2EuaW5pdGlhbGl6ZSgpfTtkLnByb3RvdHlwZS51bmJpbmRBZ2dyZWdhdGlvbj1mdW5jdGlvbihuLHMpe3ZhciBvPXRoaXMubUJpbmRpbmdJbmZvc1tuXSxhPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpW25dO2lmKG8pe2lmKG8uYmluZGluZyl7by5iaW5kaW5nLmRldGFjaENoYW5nZShvLm1vZGVsQ2hhbmdlSGFuZGxlcik7by5iaW5kaW5nLmRldGFjaFJlZnJlc2goby5tb2RlbFJlZnJlc2hIYW5kbGVyKTtvLmJpbmRpbmcuZGV0YWNoRXZlbnRzKG8uZXZlbnRzKX1kZWxldGUgdGhpcy5tQmluZGluZ0luZm9zW25dO2lmKCFzKXt0aGlzW2EuX3NEZXN0cnVjdG9yXSgpfX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUudXBkYXRlQWdncmVnYXRpb249ZnVuY3Rpb24obil7dmFyIG89dGhpcy5tQmluZGluZ0luZm9zW25dLGE9by5iaW5kaW5nLGY9by5mYWN0b3J5LEE9dGhpcy5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKClbbl0sZSxOPW51bGwsZz1udWxsLEc9bnVsbCxzPW51bGwsdD10aGlzO3RoaXNbQS5fc0Rlc3RydWN0b3JdKCk7aWYodGhpcy5pc1RyZWVCaW5kaW5nKG4pKXt2YXIgaT0wLHU9ZnVuY3Rpb24oaCxmLGEscCl7cS5lYWNoKGgsZnVuY3Rpb24oSSxqKXt2YXIgaz10LmdldElkKCkrIi0iK2krKztlPWYoayxqKTtlLnNldEJpbmRpbmdDb250ZXh0KGosby5tb2RlbCk7cFtBLl9zTXV0YXRvcl0oZSk7dShhLmdldE5vZGVDb250ZXh0cyhqKSxmLGEsZSl9KX07dShhLmdldFJvb3RDb250ZXh0cygpLGYsYSx0aGlzKX1lbHNle2c9QS5fc011dGF0b3IrIkdyb3VwIjtHPWEuaXNHcm91cGVkKCkmJnRoaXNbZ107cS5lYWNoKGEuZ2V0Q29udGV4dHMoby5zdGFydEluZGV4LG8ubGVuZ3RoKSxmdW5jdGlvbihJLGgpe2lmKEcmJmEuYVNvcnRlcnMubGVuZ3RoPjApe049YS5hU29ydGVyc1swXS5mbkdyb3VwKGgpO2lmKHR5cGVvZiBOPT0ic3RyaW5nIil7Tj17a2V5Ok59fWlmKE4ua2V5IT09cyl7dmFyIGo7aWYoby5ncm91cEhlYWRlckZhY3Rvcnkpe2o9by5ncm91cEhlYWRlckZhY3RvcnkoTil9dFtnXShOLGopO3M9Ti5rZXl9fXZhciBrPXQuZ2V0SWQoKSsiLSIrSTtlPWYoayxoKTtlLnNldEJpbmRpbmdDb250ZXh0KGgsby5tb2RlbCk7dFtBLl9zTXV0YXRvcl0oZSl9KX19O2QucHJvdG90eXBlLnJlZnJlc2hBZ2dyZWdhdGlvbj1mdW5jdGlvbihuKXt2YXIgbz10aGlzLm1CaW5kaW5nSW5mb3Nbbl0sYT1vLmJpbmRpbmc7YS5nZXRDb250ZXh0cyhvLnN0YXJ0SW5kZXgsby5sZW5ndGgpfTtkLnByb3RvdHlwZS5pc1RyZWVCaW5kaW5nPWZ1bmN0aW9uKG4pe3JldHVybiBmYWxzZX07ZC5wcm90b3R5cGUudXBkYXRlQmluZGluZ3M9ZnVuY3Rpb24odSxtKXt2YXIgdD10aGlzO2Z1bmN0aW9uIGEobyl7dmFyIHA9by5wYXJ0cyxpO2lmKHAmJnAubGVuZ3RoPjEpe2ZvcihpPTA7aTxwLmxlbmd0aDtpKyspe2lmKCh1fHxwW2ldLm1vZGVsPT1tKSYmIW8uYmluZGluZy5hQmluZGluZ3NbaV0udXBkYXRlUmVxdWlyZWQodC5nZXRNb2RlbChwW2ldLm1vZGVsKSkpe3JldHVybiB0cnVlfX19ZWxzZSBpZihvLmZhY3Rvcnkpe3JldHVybih1fHxvLm1vZGVsPT1tKSYmIW8uYmluZGluZy51cGRhdGVSZXF1aXJlZCh0LmdldE1vZGVsKG8ubW9kZWwpKX1lbHNle3JldHVybih1fHxwWzBdLm1vZGVsPT1tKSYmIW8uYmluZGluZy51cGRhdGVSZXF1aXJlZCh0LmdldE1vZGVsKHBbMF0ubW9kZWwpKX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gZShvKXt2YXIgcD1vLnBhcnRzLGk7aWYocCl7Zm9yKGk9MDtpPHAubGVuZ3RoO2krKyl7aWYoIXQuZ2V0TW9kZWwocFtpXS5tb2RlbCkpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9ZWxzZSBpZihvLmZhY3Rvcnkpe3JldHVybiEhdC5nZXRNb2RlbChvLm1vZGVsKX1yZXR1cm4gZmFsc2V9cS5lYWNoKHRoaXMubUJpbmRpbmdJbmZvcyxmdW5jdGlvbihuLG8pe2lmKG8uYmluZGluZyYmYShvKSl7by5iaW5kaW5nLmRldGFjaENoYW5nZShvLm1vZGVsQ2hhbmdlSGFuZGxlcik7aWYoby5tb2RlbFJlZnJlc2hIYW5kbGVyKXtvLmJpbmRpbmcuZGV0YWNoUmVmcmVzaChvLm1vZGVsUmVmcmVzaEhhbmRsZXIpfW8uYmluZGluZy5kZXRhY2hFdmVudHMoby5ldmVudHMpO2RlbGV0ZSBvLmJpbmRpbmd9aWYoIW8uYmluZGluZyYmZShvKSl7aWYoby5mYWN0b3J5KXt0Ll9iaW5kQWdncmVnYXRpb24obixvKX1lbHNle3QuX2JpbmRQcm9wZXJ0eShuLG8pfX19KX07ZC5wcm90b3R5cGUuaXNCb3VuZD1mdW5jdGlvbihuKXtyZXR1cm4obiBpbiB0aGlzLm1CaW5kaW5nSW5mb3MpfTtkLnByb3RvdHlwZS5nZXRPYmplY3RCaW5kaW5nPWZ1bmN0aW9uKG0pe3JldHVybiB0aGlzLm1Cb3VuZE9iamVjdHNbbV0mJnRoaXMubUJvdW5kT2JqZWN0c1ttXS5iaW5kaW5nfTtkLnByb3RvdHlwZS5nZXRFdmVudGluZ1BhcmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9QYXJlbnR9O2QucHJvdG90eXBlLmdldEJpbmRpbmc9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMubUJpbmRpbmdJbmZvc1tuXSYmdGhpcy5tQmluZGluZ0luZm9zW25dLmJpbmRpbmd9O2QucHJvdG90eXBlLmdldEJpbmRpbmdQYXRoPWZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMubUJpbmRpbmdJbmZvc1tuXTtyZXR1cm4gaSYmKGkucGF0aHx8KGkucGFydHMmJmkucGFydHNbMF0mJmkucGFydHNbMF0ucGF0aCkpfTtkLnByb3RvdHlwZS5zZXRCaW5kaW5nQ29udGV4dD1mdW5jdGlvbihvLG0pe3ZhciBPPXRoaXMub0JpbmRpbmdDb250ZXh0c1ttXTtpZihPIT09byl7dGhpcy5vQmluZGluZ0NvbnRleHRzW21dPW87dGhpcy51cGRhdGVCaW5kaW5nQ29udGV4dCh0cnVlLHRydWUsbSk7dGhpcy5wcm9wYWdhdGVQcm9wZXJ0aWVzKG0pfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS51cGRhdGVCaW5kaW5nQ29udGV4dD1mdW5jdGlvbihzLFMsbSx1KXt2YXIgbyxhPXt9LHAsZSx0PXRoaXM7aWYodSl7Zm9yKG0gaW4gdGhpcy5vTW9kZWxzKXtpZih0aGlzLm9Nb2RlbHMuaGFzT3duUHJvcGVydHkobSkpe2FbbV09bX19Zm9yKG0gaW4gdGhpcy5vUHJvcGFnYXRlZFByb3BlcnRpZXMub01vZGVscyl7aWYodGhpcy5vUHJvcGFnYXRlZFByb3BlcnRpZXMub01vZGVscy5oYXNPd25Qcm9wZXJ0eShtKSl7YVttXT1tfX19ZWxzZXthW21dPW19Zm9yKG0gaW4gYSl7aWYoYS5oYXNPd25Qcm9wZXJ0eShtKSl7bT1tPT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOm07bz10aGlzLmdldE1vZGVsKG0pO2U9dGhpcy5tQm91bmRPYmplY3RzW21dO2lmKG8mJmUmJmUuc0JpbmRpbmdQYXRoJiYhcyl7aWYoIWUuYmluZGluZyl7dGhpcy5fYmluZE9iamVjdChtLGUpfWVsc2V7cD1udWxsO2lmKHRoaXMub1BhcmVudCYmbz09dGhpcy5vUGFyZW50LmdldE1vZGVsKG0pKXtwPXRoaXMub1BhcmVudC5nZXRCaW5kaW5nQ29udGV4dChtKX1pZihwIT09ZS5iaW5kaW5nLmdldENvbnRleHQoKSl7ZS5iaW5kaW5nLnNldENvbnRleHQocCl9fWNvbnRpbnVlfXEuZWFjaCh0aGlzLm1CaW5kaW5nSW5mb3MsZnVuY3Rpb24obixnKXt2YXIgaD1nLmJpbmRpbmc7dmFyIFA9Zy5wYXJ0cyxpO2lmKCFoKXtyZXR1cm59aWYoUCYmUC5sZW5ndGg+MSl7Zm9yKGk9MDtpPFAubGVuZ3RoO2krKyl7aWYoUFtpXS5tb2RlbD09bSl7aC5hQmluZGluZ3NbaV0uc2V0Q29udGV4dCh0LmdldEJpbmRpbmdDb250ZXh0KFBbaV0ubW9kZWwpKX19fWVsc2UgaWYoZy5mYWN0b3J5KXtpZihnLm1vZGVsPT1tKXtoLnNldENvbnRleHQodC5nZXRCaW5kaW5nQ29udGV4dChnLm1vZGVsKSl9fWVsc2V7aWYoUFswXS5tb2RlbD09bSl7aC5zZXRDb250ZXh0KHQuZ2V0QmluZGluZ0NvbnRleHQoUFswXS5tb2RlbCkpfX19KTtpZighUyl7dmFyIGY9dGhpcy5nZXRCaW5kaW5nQ29udGV4dChtKTtxLmVhY2godGhpcy5tQWdncmVnYXRpb25zLGZ1bmN0aW9uKG4sQSl7aWYoQSBpbnN0YW5jZW9mIGQpe0Eub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9CaW5kaW5nQ29udGV4dHNbbV09ZjtBLnVwZGF0ZUJpbmRpbmdDb250ZXh0KGZhbHNlLGZhbHNlLG0pfWVsc2UgaWYoQSBpbnN0YW5jZW9mIEFycmF5KXtmb3IodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7QVtpXS5vUHJvcGFnYXRlZFByb3BlcnRpZXMub0JpbmRpbmdDb250ZXh0c1ttXT1mO0FbaV0udXBkYXRlQmluZGluZ0NvbnRleHQoZmFsc2UsZmFsc2UsbSl9fX0pfX19fTtkLnByb3RvdHlwZS5nZXRCaW5kaW5nQ29udGV4dD1mdW5jdGlvbihtKXt2YXIgbz10aGlzLmdldE1vZGVsKG0pO2lmKHRoaXMub0JpbmRpbmdDb250ZXh0c1ttXSl7cmV0dXJuIHRoaXMub0JpbmRpbmdDb250ZXh0c1ttXX1lbHNlIGlmKG8mJnRoaXMub1BhcmVudCYmdGhpcy5vUGFyZW50LmdldE1vZGVsKG0pJiZvIT10aGlzLm9QYXJlbnQuZ2V0TW9kZWwobSkpe3JldHVybiB1bmRlZmluZWR9ZWxzZXtyZXR1cm4gdGhpcy5vUHJvcGFnYXRlZFByb3BlcnRpZXMub0JpbmRpbmdDb250ZXh0c1ttXX19O2QucHJvdG90eXBlLnNldE1vZGVsPWZ1bmN0aW9uKG0sbil7aWYoIW0mJnRoaXMub01vZGVsc1tuXSl7ZGVsZXRlIHRoaXMub01vZGVsc1tuXTt0aGlzLnByb3BhZ2F0ZVByb3BlcnRpZXMobik7dGhpcy51cGRhdGVCaW5kaW5ncyhmYWxzZSxuKX1lbHNlIGlmKG0mJm0hPT10aGlzLm9Nb2RlbHNbbl0pe3RoaXMub01vZGVsc1tuXT1tO3RoaXMucHJvcGFnYXRlUHJvcGVydGllcyhuKTt0aGlzLnVwZGF0ZUJpbmRpbmdDb250ZXh0KGZhbHNlLHRydWUsbik7dGhpcy51cGRhdGVCaW5kaW5ncyhmYWxzZSxuKX1lbHNle31yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUucHJvcGFnYXRlUHJvcGVydGllcz1mdW5jdGlvbihuKXt2YXIgcD10aGlzLl9nZXRQcm9wZXJ0aWVzVG9Qcm9wYWdhdGUoKSx1PW49PT10cnVlLE49dT91bmRlZmluZWQ6bix0PXRoaXM7cS5lYWNoKHRoaXMubUFnZ3JlZ2F0aW9ucyxmdW5jdGlvbihhLEEpe2lmKEEgaW5zdGFuY2VvZiBkKXt0Ll9wcm9wYWdhdGVQcm9wZXJ0aWVzKG4sQSxwLHUsTil9ZWxzZSBpZihBIGluc3RhbmNlb2YgQXJyYXkpe2Zvcih2YXIgaT0wO2k8QS5sZW5ndGg7aSsrKXtpZihBW2ldaW5zdGFuY2VvZiBkKXt0Ll9wcm9wYWdhdGVQcm9wZXJ0aWVzKG4sQVtpXSxwLHUsTil9fX19KX07ZC5wcm90b3R5cGUuX3Byb3BhZ2F0ZVByb3BlcnRpZXM9ZnVuY3Rpb24obixvLHAsdSxOKXtpZighcCl7cD10aGlzLl9nZXRQcm9wZXJ0aWVzVG9Qcm9wYWdhdGUoKSx1PW49PT10cnVlLE49dT91bmRlZmluZWQ6bn1vLm9Qcm9wYWdhdGVkUHJvcGVydGllcz1wO28udXBkYXRlQmluZGluZ3ModSxOKTtvLnVwZGF0ZUJpbmRpbmdDb250ZXh0KGZhbHNlLHRydWUsTix1KTtvLnByb3BhZ2F0ZVByb3BlcnRpZXMobil9O2QucHJvdG90eXBlLl9nZXRQcm9wZXJ0aWVzVG9Qcm9wYWdhdGU9ZnVuY3Rpb24oKXt2YXIgbj1xLmlzRW1wdHlPYmplY3QodGhpcy5vTW9kZWxzKSxOPXEuaXNFbXB0eU9iamVjdCh0aGlzLm9CaW5kaW5nQ29udGV4dHMpO2Z1bmN0aW9uIG0oZSxvLGEpe3JldHVybiBlP286cS5leHRlbmQoe30sbyxhKX1pZihOJiZuKXtyZXR1cm4gdGhpcy5vUHJvcGFnYXRlZFByb3BlcnRpZXN9ZWxzZXtyZXR1cm57b01vZGVsczptKG4sdGhpcy5vUHJvcGFnYXRlZFByb3BlcnRpZXMub01vZGVscyx0aGlzLm9Nb2RlbHMpLG9CaW5kaW5nQ29udGV4dHM6bShOLHRoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9CaW5kaW5nQ29udGV4dHMsdGhpcy5vQmluZGluZ0NvbnRleHRzKX19fTtkLnByb3RvdHlwZS5nZXRNb2RlbD1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5vTW9kZWxzW25dfHx0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vTW9kZWxzW25dfTtkLnByb3RvdHlwZS5oYXNNb2RlbD1mdW5jdGlvbigpe3JldHVybiEocS5pc0VtcHR5T2JqZWN0KHRoaXMub01vZGVscykmJnEuaXNFbXB0eU9iamVjdCh0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vTW9kZWxzKSl9O2QucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKEksbCxvKXt2YXIgdD10aGlzLGE9dHJ1ZSxlPXRydWU7aWYobyl7YT0hIW8uY2xvbmVDaGlsZHJlbjtlPSEhby5jbG9uZUJpbmRpbmdzfWlmKCFJKXtJPU0udWlkKCJjbG9uZSIpfHxxLnNhcC51aWQoKX1pZighbCYmYSl7bD1xLm1hcCh0aGlzLmZpbmRBZ2dyZWdhdGVkT2JqZWN0cyh0cnVlKSxmdW5jdGlvbihPKXtyZXR1cm4gTy5nZXRJZCgpfSl9dmFyIG09dGhpcy5nZXRNZXRhZGF0YSgpLGY9bS5fb0NsYXNzLHM9dGhpcy5nZXRJZCgpKyItIitJLFM9e30scD10aGlzLm1Qcm9wZXJ0aWVzLGssZyxoPWQuYmluZGluZ1BhcnNlci5lc2NhcGU7Zm9yKGsgaW4gcCl7aWYocC5oYXNPd25Qcm9wZXJ0eShrKSYmISh0aGlzLmlzQm91bmQoaykmJmUpKXtpZih0eXBlb2YgcFtrXT09PSJzdHJpbmciKXtTW2tdPWgocFtrXSl9ZWxzZXtTW2tdPXBba119fX1TWyJtb2RlbHMiXT10aGlzLm9Nb2RlbHM7U1siYmluZGluZ0NvbnRleHRzIl09dGhpcy5vQmluZGluZ0NvbnRleHRzO2lmKGEpe3EuZWFjaCh0aGlzLm1BZ2dyZWdhdGlvbnMsZnVuY3Rpb24obixBKXtpZihtLmhhc0FnZ3JlZ2F0aW9uKG4pJiYhKHQuaXNCb3VuZChuKSYmZSkpe2lmKEEgaW5zdGFuY2VvZiBkKXtTW25dPUEuY2xvbmUoSSxsKX1lbHNlIGlmKHEuaXNBcnJheShBKSl7U1tuXT1bXTtmb3IodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7U1tuXS5wdXNoKEFbaV0uY2xvbmUoSSxsKSl9fWVsc2V7U1tuXT1BfX19KTtxLmVhY2godGhpcy5tQXNzb2NpYXRpb25zLGZ1bmN0aW9uKG4sQSl7aWYocS5pc0FycmF5KEEpKXtBPUEuc2xpY2UoMCk7Zm9yKHZhciBpPTA7aTxBLmxlbmd0aDtpKyspe2lmKHEuaW5BcnJheShBW2ldLGwpPj0wKXtBW2ldKz0iLSIrSX19fWVsc2UgaWYocS5pbkFycmF5KEEsbCk+PTApe0ErPSItIitJfVNbbl09QX0pfWc9bmV3IGYocyxTKTtxLmVhY2godGhpcy5tQm91bmRPYmplY3RzLGZ1bmN0aW9uKG4saSl7Zy5tQm91bmRPYmplY3RzW25dPXEuZXh0ZW5kKHt9LGkpfSk7cS5lYWNoKHRoaXMubUV2ZW50UmVnaXN0cnksZnVuY3Rpb24obixMKXtnLm1FdmVudFJlZ2lzdHJ5W25dPUwuc2xpY2UoKX0pO2lmKGUpe3EuZWFjaCh0aGlzLm1CaW5kaW5nSW5mb3MsZnVuY3Rpb24obixpKXt2YXIgaj1xLmV4dGVuZCh7fSxpKTtkZWxldGUgai5iaW5kaW5nO2lmKGkuZmFjdG9yeSl7Zy5iaW5kQWdncmVnYXRpb24obixqKX1lbHNle2cuYmluZFByb3BlcnR5KG4sail9fSl9cmV0dXJuIGd9O2QuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZT1mdW5jdGlvbihwKXt2YXIgaTtpZihwPT09MSl7cS5lYWNoKHRoaXMub01vZGVscyxmdW5jdGlvbihuLG0pe2lmKG0mJm0uX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSl7bS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlKCl9fSl9ZWxzZSBpZihwPT09Mil7cS5lYWNoKHRoaXMubUJpbmRpbmdJbmZvcyxmdW5jdGlvbihuLG8pe3ZhciBQPW8ucGFydHM7aWYoUCl7Zm9yKGk9MDtpPFAubGVuZ3RoO2krKyl7aWYoby50eXBlJiZvLnR5cGUuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSl7by50eXBlLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2UoKX19aWYoby5tb2RlbENoYW5nZUhhbmRsZXIpe28ubW9kZWxDaGFuZ2VIYW5kbGVyKCl9fX0pfX07ZC5fbWFwQWdncmVnYXRpb249ZnVuY3Rpb24ocCxvLG4pe3ZhciBrPXAuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpO3ZhciBPPWtbb107dmFyIE49a1tuXTtpZighT3x8IU58fE8uX2lLaW5kIT0yfHxOLl9pS2luZCE9Mil7cmV0dXJufXZhciBmPXsiaW5zZXJ0Ijp0cnVlLCJhZGQiOnRydWUsInJlbW92ZSI6dHJ1ZSwicmVtb3ZlQWxsIjpmYWxzZSwiaW5kZXhPZiI6dHJ1ZSwiZGVzdHJveSI6ZmFsc2UsImdldCI6ZmFsc2V9O2Z1bmN0aW9uIG0oUCxnKXtyZXR1cm4gUCtnLnN1YnN0cmluZygwLDEpLnRvVXBwZXJDYXNlKCkrZy5zdWJzdHJpbmcoMSl9ZnVuY3Rpb24gYShGKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tGXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZvcih2YXIgUCBpbiBmKXt2YXIgcz1tKFAsZltQXT9PLnNpbmd1bGFyTmFtZTpPLl9zTmFtZSk7dmFyIGU9bShQLGZbUF0/Ti5zaW5ndWxhck5hbWU6Ti5fc05hbWUpO3Bbc109YShlKX19O2QucHJvdG90eXBlLmZpbmRBZ2dyZWdhdGVkT2JqZWN0cz1mdW5jdGlvbihyKXt2YXIgQT1bXTtmdW5jdGlvbiBmKG8pe2Zvcih2YXIgbiBpbiBvLm1BZ2dyZWdhdGlvbnMpe3ZhciBhPW8ubUFnZ3JlZ2F0aW9uc1tuXTtpZihxLmlzQXJyYXkoYSkpe2Zvcih2YXIgaT0wO2k8YS5sZW5ndGg7aSsrKXtBLnB1c2goYVtpXSk7aWYocil7ZihhW2ldKX19fWVsc2UgaWYoYSBpbnN0YW5jZW9mIGQpe0EucHVzaChhKTtpZihyKXtmKGEpfX19fWYodGhpcyk7cmV0dXJuIEF9O3JldHVybiBkfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuRnJhZ21lbnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5GcmFnbWVudCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ZyYWdtZW50IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJy4vRGVjbGFyYXRpdmVTdXBwb3J0JywnLi9YTUxUZW1wbGF0ZVByb2Nlc3NvciddLGZ1bmN0aW9uKHEsTSxELFgpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj17fSx0PXt9O3ZhciBGPU0uZXh0ZW5kKCJzYXAudWkuY29yZS5GcmFnbWVudCIse21ldGFkYXRhOntwcm9wZXJ0aWVzOnt0eXBlOiJzdHJpbmcifX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLl9hQ29udGVudCYmdGhpcy5fYUNvbnRlbnQubGVuZ3RoPT0xKXtyZXR1cm4gdGhpcy5fYUNvbnRlbnRbMF19ZWxzZXtyZXR1cm4gdGhpcy5fYUNvbnRlbnR9fX0pO0YucmVnaXN0ZXJUeXBlPWZ1bmN0aW9uKFQsZil7aWYoIXR5cGVvZihUKT09PSJzdHJpbmciKXtxLnNhcC5sb2cuZXJyb3IoIklnbm9yaW5nIG5vbi1zdHJpbmcgRnJhZ21lbnQgdHlwZTogIitUKTtyZXR1cm59aWYodFtUXSl7cS5zYXAubG9nLndhcm5pbmcoInNhcC51aS5jb3JlLkZyYWdtZW50LnJlZ2lzdGVyVHlwZSgpOiBGcmFnbWVudCB0eXBlICciK1QrIicgaXMgYWxyZWFkeSBkZWZpbmVkLiBPdmVycmlkaW5nIHRoaXMgdHlwZSBub3chIil9dFtUXT1mfTtGLnByb3RvdHlwZS5faW5pdENvbXBvc2l0ZVN1cHBvcnQ9ZnVuY3Rpb24ocyl7aWYoIXMpe3Rocm93IG5ldyBFcnJvcigiU2V0dGluZ3MgbXVzdCBiZSBzZXQiKX1pZighKHMuZnJhZ21lbnROYW1lfHxzLmZyYWdtZW50Q29udGVudCkpe3Rocm93IG5ldyBFcnJvcigiUGxlYXNlIHByb3ZpZGUgYSBmcmFnbWVudCBuYW1lIil9aWYocy5vQ29udHJvbGxlcil7dGhpcy5vQ29udHJvbGxlcj1zLm9Db250cm9sbGVyfXRoaXMuX3NFeHBsaWNpdElkPXMuc0lkfHxzLmlkO3RoaXMuX3NGcmFnbWVudE5hbWU9cy5mcmFnbWVudE5hbWU7dmFyIGY9dFtzLnR5cGVdO2lmKGYpe2YuaW5pdC5hcHBseSh0aGlzLFtzXSl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIk5vIHR5cGUgZm9yIHRoZSBmcmFnbWVudCBoYXMgYmVlbiBzcGVjaWZpZWQ6ICIrcy50eXBlKX19O0YucHJvdG90eXBlLmdldENvbnRyb2xsZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQ29udHJvbGxlcn07Ri5ieUlkPWZ1bmN0aW9uKGYsaSl7aWYoISh0eXBlb2YoZik9PT0ic3RyaW5nIiYmdHlwZW9mKGkpPT09InN0cmluZyIpKXtxLnNhcC5sb2cuZXJyb3IoInNhcC51aS5jb3JlLkZyYWdtZW50LmJ5SWQ6IHR3byBzdHJpbmdzIG11c3QgYmUgZ2l2ZW4gYXMgcGFyYW1ldGVycywgYnV0IGFyZTogIitmKyIgYW5kICIraSk7cmV0dXJuIHVuZGVmaW5lZH1yZXR1cm4gc2FwLnVpLmdldENvcmUoKS5ieUlkKGYrIi0tIitpKX07Ri5jcmVhdGVJZD1mdW5jdGlvbihmLGkpe2lmKCEodHlwZW9mKGYpPT09InN0cmluZyImJnR5cGVvZihpKT09PSJzdHJpbmciKSl7cS5zYXAubG9nLmVycm9yKCJzYXAudWkuY29yZS5GcmFnbWVudC5jcmVhdGVJZDogdHdvIHN0cmluZ3MgbXVzdCBiZSBnaXZlbiBhcyBwYXJhbWV0ZXJzLCBidXQgYXJlOiAiK2YrIiBhbmQgIitpKTtyZXR1cm4gdW5kZWZpbmVkfXJldHVybiBmKyItLSIraX07Ri5wcm90b3R5cGUuY3JlYXRlSWQ9ZnVuY3Rpb24oaSl7dmFyIGE9dGhpcy5fc0V4cGxpY2l0SWQ/dGhpcy5fc0V4cGxpY2l0SWQrIi0tIitpOmk7aWYodGhpcy5fb0NvbnRhaW5pbmdWaWV3JiZ0aGlzLl9vQ29udGFpbmluZ1ZpZXchPXRoaXMpe2E9dGhpcy5fb0NvbnRhaW5pbmdWaWV3LmNyZWF0ZUlkKGEpfXJldHVybiBhfTtGLnByb3RvdHlwZS5pc1N1YlZpZXc9ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX07c2FwLnVpLmZyYWdtZW50PWZ1bmN0aW9uKG4sVCxjKXt2YXIgcz17fTtpZih0eXBlb2Yobik9PT0ic3RyaW5nIil7cy5mcmFnbWVudE5hbWU9bjtzLm9Db250cm9sbGVyPWM7cy50eXBlPVR9ZWxzZSBpZih0eXBlb2Yobik9PT0ib2JqZWN0Iil7cz1uO2lmKFQpe3Mub0NvbnRyb2xsZXI9VH19ZWxzZXtxLnNhcC5sb2cuZXJyb3IoInNhcC51aS5mcmFnbWVudCgpIG11c3QgYmUgY2FsbGVkIHdpdGggRnJhZ21lbnQgbmFtZSBvciBjb25maWcgb2JqZWN0IGFzIGZpcnN0IHBhcmFtZXRlciwgYnV0IGlzOiAiK24pfXJldHVybiBuZXcgRihzKX07c2FwLnVpLnhtbGZyYWdtZW50PWZ1bmN0aW9uKGksZixjKXtpZih0eXBlb2YoaSk9PT0ic3RyaW5nIil7aWYodHlwZW9mKGYpPT09InN0cmluZyIpe3JldHVybiBzYXAudWkuZnJhZ21lbnQoe2ZyYWdtZW50TmFtZTpmLHNJZDppLHR5cGU6IlhNTCJ9LGMpfWVsc2V7cmV0dXJuIHNhcC51aS5mcmFnbWVudChpLCJYTUwiLGYpfX1lbHNle2kudHlwZT0iWE1MIjtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KGksZil9fTtzYXAudWkuanNmcmFnbWVudD1mdW5jdGlvbihuLGYpe2lmKHR5cGVvZihuKT09PSJzdHJpbmciJiZ0eXBlb2YoZik9PT0ib2JqZWN0Iil7aWYoZi5jcmVhdGVDb250ZW50KXtyW25dPWY7cS5zYXAuZGVjbGFyZSh7bW9kTmFtZTpuLHR5cGU6ImZyYWdtZW50In0sZmFsc2UpfWVsc2V7cmV0dXJuIHNhcC51aS5mcmFnbWVudChuLCJKUyIsZil9fWVsc2UgaWYodHlwZW9mKG4pPT09InN0cmluZyImJmY9PT11bmRlZmluZWQpe3JldHVybiBzYXAudWkuZnJhZ21lbnQobiwiSlMiKX1lbHNle2lmKHR5cGVvZihuKT09PSJvYmplY3QiKXtuLnR5cGU9IkpTIjtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KG4sZil9ZWxzZSBpZihhcmd1bWVudHMmJmFyZ3VtZW50cy5sZW5ndGg+PTMpe3JldHVybiBzYXAudWkuZnJhZ21lbnQoe2lkOm4sZnJhZ21lbnROYW1lOmYsdHlwZToiSlMifSxhcmd1bWVudHNbMl0pfWVsc2V7cS5zYXAubG9nLmVycm9yKCJzYXAudWkuanNmcmFnbWVudCgpIHdhcyBjYWxsZWQgd2l0aCB3cm9uZyBwYXJhbWV0ZXIgc2V0OiAiK24rIiArICIrZil9fX07c2FwLnVpLmh0bWxmcmFnbWVudD1mdW5jdGlvbihpLGYsYyl7aWYodHlwZW9mKGkpPT09InN0cmluZyIpe2lmKHR5cGVvZihmKT09PSJzdHJpbmciKXtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KHtmcmFnbWVudE5hbWU6ZixzSWQ6aSx0eXBlOiJIVE1MIn0sYyl9ZWxzZXtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KGksIkhUTUwiLGYpfX1lbHNle2kudHlwZT0iSFRNTCI7cmV0dXJuIHNhcC51aS5mcmFnbWVudChpLGYpfX07Ri5yZWdpc3RlclR5cGUoIlhNTCIse2luaXQ6ZnVuY3Rpb24ocyl7dGhpcy5feENvbnRlbnQ9cy5mcmFnbWVudENvbnRlbnQ/KCh0eXBlb2Yocy5mcmFnbWVudENvbnRlbnQpPT09InN0cmluZyIpP3EucGFyc2VYTUwocy5mcmFnbWVudENvbnRlbnQpLmRvY3VtZW50RWxlbWVudDpzLmZyYWdtZW50Q29udGVudCk6WC5sb2FkVGVtcGxhdGUocy5mcmFnbWVudE5hbWUsImZyYWdtZW50Iik7dGhpcy5fb0NvbnRhaW5pbmdWaWV3PXRoaXMuX3NFeHBsaWNpdElkP3RoaXM6KHMuY29udGFpbmluZ1ZpZXd8fHRoaXMpO2lmKCh0aGlzLl9vQ29udGFpbmluZ1ZpZXc9PT10aGlzKSl7dGhpcy5fb0NvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyPShzLmNvbnRhaW5pbmdWaWV3JiZzLmNvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyKXx8cy5vQ29udHJvbGxlcn12YXIgYT10aGlzO00ucnVuV2l0aFByZXByb2Nlc3NvcnMoZnVuY3Rpb24oKXt2YXIgeD1hLl94Q29udGVudDthLl9hQ29udGVudD1YLnBhcnNlVGVtcGxhdGUoYS5feENvbnRlbnQsYSl9KX19KTtGLnJlZ2lzdGVyVHlwZSgiSlMiLHtpbml0OmZ1bmN0aW9uKHMpe2lmKCFyW3MuZnJhZ21lbnROYW1lXSl7cS5zYXAucmVxdWlyZSh7bW9kTmFtZTpzLmZyYWdtZW50TmFtZSx0eXBlOiJmcmFnbWVudCJ9KX1xLmV4dGVuZCh0aGlzLHJbcy5mcmFnbWVudE5hbWVdKTt0aGlzLl9vQ29udGFpbmluZ1ZpZXc9cy5jb250YWluaW5nVmlld3x8dGhpczt2YXIgYT10aGlzO00ucnVuV2l0aFByZXByb2Nlc3NvcnMoZnVuY3Rpb24oKXt2YXIgYz1hLmNyZWF0ZUNvbnRlbnQocy5vQ29udHJvbGxlcnx8YS5fb0NvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyKTthLl9hQ29udGVudD1bXTthLl9hQ29udGVudD1hLl9hQ29udGVudC5jb25jYXQoYyl9KX19KTsoZnVuY3Rpb24oKXt2YXIgXz17fTt2YXIgYT1mdW5jdGlvbihUKXt2YXIgdT1xLnNhcC5nZXRNb2R1bGVQYXRoKFQsIi5mcmFnbWVudC5odG1sIik7dmFyIGg9X1t1XTt2YXIgUjtpZighaCl7Uj1xLnNhcC5nZXRSZXNvdXJjZU5hbWUoVCwiLmZyYWdtZW50Lmh0bWwiKTtoPXEuc2FwLmxvYWRSZXNvdXJjZShSKTtfW3VdPWh9cmV0dXJuIGh9O0YucmVnaXN0ZXJUeXBlKCJIVE1MIix7aW5pdDpmdW5jdGlvbihzKXt0aGlzLl9hQ29udGVudD1bXTt0aGlzLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYUNvbnRlbnR9O3RoaXMuYWRkQ29udGVudD1mdW5jdGlvbihDKXt0aGlzLl9hQ29udGVudC5wdXNoKEMpfTt0aGlzLl9vQ29udGFpbmluZ1ZpZXc9cy5jb250YWluaW5nVmlld3x8dGhpczt2YXIgaD1zLmZyYWdtZW50Q29udGVudHx8YShzLmZyYWdtZW50TmFtZSk7dGhpcy5fb1RlbXBsYXRlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3ZhciBIPXNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIucHJlcGFyZUhUTUw1KGgpO2lmKHR5cGVvZiBIPT09InN0cmluZyIpe3RoaXMuX29UZW1wbGF0ZS5pbm5lckhUTUw9SH1lbHNle3ZhciBuPUg7dmFyIGY9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXtmLmFwcGVuZENoaWxkKG4uaXRlbShpKSl9dGhpcy5fb1RlbXBsYXRlLmFwcGVuZENoaWxkKGYpfXZhciBtPXRoaXMuX29UZW1wbGF0ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGVtcGxhdGUiKVswXTt2YXIgcD10aGlzLmdldE1ldGFkYXRhKCkuZ2V0QWxsUHJvcGVydGllcygpO2lmKG0pe3ZhciBiPXRoaXM7dmFyIGM9RDtxLmVhY2gobS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKEksQSl7dmFyIE49Yy5jb252ZXJ0QXR0cmlidXRlVG9TZXR0aW5nTmFtZShBLm5hbWUsYi5nZXRJZCgpKTt2YXIgdj1BLnZhbHVlO3ZhciBQPXBbTl07aWYoIXNbTl0pe2lmKFApe3NbTl09Yy5jb252ZXJ0VmFsdWVUb1R5cGUoYy5nZXRQcm9wZXJ0eURhdGFUeXBlKFApLHYpfWVsc2UgaWYoc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9tQWxsb3dlZFNldHRpbmdzW05dKXtzW05dPXZ9fX0pO3RoaXMuX29UZW1wbGF0ZT1tfWlmKHRoaXMuX29UZW1wbGF0ZS5jb250ZW50KXt2YXIgZj10aGlzLl9vVGVtcGxhdGUuY29udGVudDt0aGlzLl9vVGVtcGxhdGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5fb1RlbXBsYXRlLmFwcGVuZENoaWxkKGYpfXZhciBiPXRoaXM7TS5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe0QuY29tcGlsZShiLl9vVGVtcGxhdGUsYik7dmFyIGQ9Yi5nZXRDb250ZW50KCk7aWYoZCYmZC5sZW5ndGg9PT0xKXtiLl9hQ29udGVudD1bZFswXV19ZWxzZXt9fSl9fSl9KCkpO3JldHVybiBGfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUucm91dGluZy5Sb3V0ZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5yb3V0aW5nLlJvdXRlcicpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkuY3Jvc3Nyb2FkcycpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkuc2lnbmFscycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3JvdXRpbmcvUm91dGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlcicsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnLCcuL0hhc2hDaGFuZ2VyJywnLi9Sb3V0ZScsJ3NhcC91aS90aGlyZHBhcnR5L2Nyb3Nzcm9hZHMnLCdzYXAvdWkvdGhpcmRwYXJ0eS9zaWduYWxzJ10sZnVuY3Rpb24ocSxFLE0sSCxSLGMscyl7InVzZSBzdHJpY3QiO3ZhciByPXt9O3ZhciBhPUUuZXh0ZW5kKCJzYXAudWkuY29yZS5yb3V0aW5nLlJvdXRlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG8sQyxPKXtFLmFwcGx5KHRoaXMpO3RoaXMuX29Db25maWc9Qzt0aGlzLl9vUm91dGVyPWNyb3Nzcm9hZHMuY3JlYXRlKCk7dGhpcy5fb1JvdXRlci5pZ25vcmVTdGF0ZT10cnVlO3RoaXMuX29Sb3V0ZXM9e307dGhpcy5fb1ZpZXdzPXt9O3RoaXMuX29Pd25lcj1PO3ZhciB0PXRoaXM7aWYoIW8pe289e319aWYocS5pc0FycmF5KG8pKXt2YXIgYj1vO289e307cS5lYWNoKGIsZnVuY3Rpb24oaSxkKXtvW2QubmFtZV09ZH0pfXEuZWFjaChvLGZ1bmN0aW9uKGQsZSl7aWYoZS5uYW1lPT11bmRlZmluZWQpe2UubmFtZT1kfXQuYWRkUm91dGUoZSl9KX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJpbml0aWFsaXplIiwiZ2V0VVJMIiwicmVnaXN0ZXIiXX19KTthLk1fRVZFTlRTPXtSb3V0ZU1hdGNoZWQ6InJvdXRlTWF0Y2hlZCIsUm91dGVQYXR0ZXJuTWF0Y2hlZDoicm91dGVQYXR0ZXJuTWF0Y2hlZCIsVmlld0NyZWF0ZWQ6InZpZXdDcmVhdGVkIn07YS5wcm90b3R5cGUuYWRkUm91dGU9ZnVuY3Rpb24oQyxwKXtpZighQy5uYW1lKXtxLnNhcC5sb2cuZXJyb3IoIkEgbmFtZSBoYXMgdG8gYmUgc3BlY2lmaWVkIGZvciBldmVyeSByb3V0ZSIpfWlmKHRoaXMuX29Sb3V0ZXNbQy5uYW1lXSl7cS5zYXAubG9nLmVycm9yKCJSb3V0ZSB3aXRoIG5hbWUgIitDLm5hbWUrIiBhbHJlYWR5IGV4aXN0cyIpfXRoaXMuX29Sb3V0ZXNbQy5uYW1lXT1uZXcgUih0aGlzLEMscCl9O2EucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKG4sbyl7dGhpcy5fb1JvdXRlci5wYXJzZShuKX07YS5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMsaD10aGlzLm9IYXNoQ2hhbmdlcj1ILmdldEluc3RhbmNlKCk7aWYodGhpcy5fYklzSW5pdGlhbGl6ZWQpe3Euc2FwLmxvZy53YXJuaW5nKCJSb3V0ZXIgaXMgYWxyZWFkeSBpbml0aWFsaXplZC4iKTtyZXR1cm4gdGhpc310aGlzLl9iSXNJbml0aWFsaXplZD10cnVlO3RoaXMuZm5IYXNoQ2hhbmdlZD1mdW5jdGlvbihlKXt0LnBhcnNlKGUuZ2V0UGFyYW1ldGVyKCJuZXdIYXNoIiksZS5nZXRQYXJhbWV0ZXIoIm9sZEhhc2giKSl9O2guYXR0YWNoRXZlbnQoImhhc2hDaGFuZ2VkIix0aGlzLmZuSGFzaENoYW5nZWQpO2lmKCFoLmluaXQoKSl7dGhpcy5wYXJzZShoLmdldEhhc2goKSl9cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtpZighdGhpcy5fYklzSW5pdGlhbGl6ZWQpe3Euc2FwLmxvZy53YXJuaW5nKCJSb3V0ZXIgaXMgbm90IGluaXRpYWxpemVkLiBCdXQgaXQgZ290IHN0b3BwZWQiKX1pZih0aGlzLmZuSGFzaENoYW5nZWQpe3RoaXMub0hhc2hDaGFuZ2VyLmRldGFjaEV2ZW50KCJoYXNoQ2hhbmdlZCIsdGhpcy5mbkhhc2hDaGFuZ2VkKX10aGlzLl9iSXNJbml0aWFsaXplZD1mYWxzZTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe0UucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyk7aWYoIXRoaXMuX2JJc0luaXRpYWxpemVkKXtxLnNhcC5sb2cuaW5mbygiUm91dGVyIGlzIG5vdCBpbml0aWFsaXplZCwgYnV0IGdvdCBkZXN0cm95ZWQuIil9aWYodGhpcy5mbkhhc2hDaGFuZ2VkKXt0aGlzLm9IYXNoQ2hhbmdlci5kZXRhY2hFdmVudCgiaGFzaENoYW5nZWQiLHRoaXMuZm5IYXNoQ2hhbmdlZCl9dGhpcy5fb093bmVyPW51bGw7dGhpcy5fb1JvdXRlci5yZW1vdmVBbGxSb3V0ZXMoKTt0aGlzLl9vUm91dGVyPW51bGw7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmdldFVSTD1mdW5jdGlvbihuLHApe2lmKHA9PT11bmRlZmluZWQpe3A9e319dmFyIG89dGhpcy5fb1JvdXRlc1tuXTtpZighbyl7cS5zYXAubG9nLndhcm5pbmcoIlJvdXRlIHdpdGggbmFtZSAiK24rIiBkb2VzIG5vdCBleGlzdCIpO3JldHVybn1yZXR1cm4gby5nZXRVUkwocCl9O2EucHJvdG90eXBlLmdldFZpZXc9ZnVuY3Rpb24odixWLGIpe2lmKCF2KXtxLnNhcC5sb2cuZXJyb3IoIkEgbmFtZSBmb3IgdGhlIHZpZXcgaGFzIHRvIGJlIGRlZmluZWQiKX1pZighdGhpcy5fb1ZpZXdzW3ZdKXt2YXIgQz1mdW5jdGlvbigpe3ZhciBvPXt0eXBlOlYsdmlld05hbWU6dn07aWYoYil7by5pZD1ifXJldHVybiBzYXAudWkudmlldyhvKX07aWYodGhpcy5fb093bmVyKXt2YXIgdD10aGlzO00ucnVuV2l0aE93bmVyKGZ1bmN0aW9uKCl7dC5fb1ZpZXdzW3ZdPUMoKX0sdGhpcy5fb093bmVyKX1lbHNle3RoaXMuX29WaWV3c1t2XT1DKCl9dGhpcy5maXJlVmlld0NyZWF0ZWQoe3ZpZXc6dGhpcy5fb1ZpZXdzW3ZdLHZpZXdOYW1lOnYsdHlwZTpWfSl9cmV0dXJuIHRoaXMuX29WaWV3c1t2XX07YS5wcm90b3R5cGUuc2V0Vmlldz1mdW5jdGlvbih2LFYpe2lmKCF2KXtxLnNhcC5sb2cuZXJyb3IoIkEgbmFtZSBmb3IgdGhlIHZpZXcgaGFzIHRvIGJlIGRlZmluZWQiKX10aGlzLl9vVmlld3Nbdl09Vn07YS5wcm90b3R5cGUubmF2VG89ZnVuY3Rpb24obixwLGIpe2lmKGIpe3RoaXMub0hhc2hDaGFuZ2VyLnJlcGxhY2VIYXNoKHRoaXMuZ2V0VVJMKG4scCkpfWVsc2V7dGhpcy5vSGFzaENoYW5nZXIuc2V0SGFzaCh0aGlzLmdldFVSTChuLHApKX19O2EucHJvdG90eXBlLmF0dGFjaFJvdXRlTWF0Y2hlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgicm91dGVNYXRjaGVkIixkLGYsbCk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmRldGFjaFJvdXRlTWF0Y2hlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoInJvdXRlTWF0Y2hlZCIsZixsKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZmlyZVJvdXRlTWF0Y2hlZD1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudCgicm91dGVNYXRjaGVkIixBKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuYXR0YWNoVmlld0NyZWF0ZWQ9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoInZpZXdDcmVhdGVkIixkLGYsbCk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmRldGFjaFZpZXdDcmVhdGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgidmlld0NyZWF0ZWQiLGYsbCk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmZpcmVWaWV3Q3JlYXRlZD1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudCgidmlld0NyZWF0ZWQiLEEpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5hdHRhY2hSb3V0ZVBhdHRlcm5NYXRjaGVkPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJyb3V0ZVBhdHRlcm5NYXRjaGVkIixkLGYsbCk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmRldGFjaFJvdXRlUGF0dGVybk1hdGNoZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJyb3V0ZVBhdHRlcm5NYXRjaGVkIixmLGwpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5maXJlUm91dGVQYXR0ZXJuTWF0Y2hlZD1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudCgicm91dGVQYXR0ZXJuTWF0Y2hlZCIsQSk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKG4pe3Jbbl09dGhpcztyZXR1cm4gdGhpc307YS5nZXRSb3V0ZXI9ZnVuY3Rpb24obil7cmV0dXJuIHJbbl19O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS90bXBsL1RlbXBsYXRlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCddLGZ1bmN0aW9uKHEsTSl7InVzZSBzdHJpY3QiO3ZhciBUPU0uZXh0ZW5kKCJzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbWV0YWRhdGE6e3N0ZXJlb3R5cGU6InRlbXBsYXRlIiwiYWJzdHJhY3QiOnRydWUscHJvcGVydGllczp7ImNvbnRlbnQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJEYXRhIixkZWZhdWx0VmFsdWU6bnVsbH19LHB1YmxpY01ldGhvZHM6WyJkZWNsYXJlQ29udHJvbCIsImNyZWF0ZUNvbnRyb2wiLCJwbGFjZUF0IiwiY3JlYXRlTWV0YWRhdGEiLCJjcmVhdGVSZW5kZXJlciJdLGxpYnJhcnk6InNhcC51aS5jb3JlIn19KTtULnByb3RvdHlwZS5nZXRJbnRlcmZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307VC5fbVN1cHBvcnRlZFR5cGVzPXt9O1QucmVnaXN0ZXJUeXBlPWZ1bmN0aW9uKHQsYyl7VC5fbVN1cHBvcnRlZFR5cGVzW3RdPWN9O1QudW5yZWdpc3RlclR5cGU9ZnVuY3Rpb24odCl7ZGVsZXRlIFQuX21TdXBwb3J0ZWRUeXBlc1t0XX07VC5wYXJzZVBhdGg9ZnVuY3Rpb24ocCl7dmFyIG09dW5kZWZpbmVkLHM9cC5pbmRleE9mKCI+Iik7aWYocz4wKXttPXAuc3Vic3RyKDAscyk7cD1wLnN1YnN0cihzKzEpfXJldHVybntwYXRoOnAsbW9kZWw6bX19O1QucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24ocyxTKXtpZih0aGlzLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpPT09InNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGUiKXt0aHJvdyBuZXcgRXJyb3IoIlRoZSBjbGFzcyAnc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZScgaXMgYWJzdHJhY3QgYW5kIG11c3Qgbm90IGJlIGluc3RhbnRpYXRlZCEiKX1pZihNLmJpbmRpbmdQYXJzZXI9PT1zYXAudWkuYmFzZS5CaW5kaW5nUGFyc2VyLmNvbXBsZXhQYXJzZXIpe1QucHJvdG90eXBlLmV4dHJhY3RCaW5kaW5nSW5mbz1mdW5jdGlvbih2LGksUyl7TS5iaW5kaW5nUGFyc2VyPXNhcC51aS5iYXNlLkJpbmRpbmdQYXJzZXIuc2ltcGxlUGFyc2VyO3ZhciByPXNhcC51aS5jb3JlLkNvbnRyb2wucHJvdG90eXBlLmV4dHJhY3RCaW5kaW5nSW5mby5hcHBseSh0aGlzLGFyZ3VtZW50cyk7TS5iaW5kaW5nUGFyc2VyPXNhcC51aS5iYXNlLkJpbmRpbmdQYXJzZXIuY29tcGxleFBhcnNlcjtyZXR1cm4gcn19fTtULnByb3RvdHlwZS5kZWNsYXJlQ29udHJvbD1mdW5jdGlvbihjKXtpZihjKXt2YXIgbT10aGlzLmNyZWF0ZU1ldGFkYXRhKCkscj10aGlzLmNyZWF0ZVJlbmRlcmVyKCksdD10aGlzO3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sIik7c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wuZXh0ZW5kKGMse21ldGFkYXRhOm0saW5pdDpmdW5jdGlvbigpe3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNldFRlbXBsYXRlKHQpfSxyZW5kZXJlcjp7cmVuZGVyVGVtcGxhdGU6cn19KTtyZXR1cm4gcS5zYXAuZ2V0T2JqZWN0KGMpfX07VC5wcm90b3R5cGUuY3JlYXRlQ29udHJvbD1mdW5jdGlvbihpLGMsdil7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wiKTt2YXIgQz1uZXcgc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2woe2lkOmksdGVtcGxhdGU6dGhpcyxjb250ZXh0OmN9KTtDLnNldFRlbXBsYXRlUmVuZGVyZXIodGhpcy5jcmVhdGVSZW5kZXJlcih2KSk7cmV0dXJuIEN9O1QucHJvdG90eXBlLnBsYWNlQXQ9ZnVuY3Rpb24ocixjLHAsaSl7aWYodHlwZW9mIGM9PT0ic3RyaW5nInx8dHlwZW9mIGM9PT0ibnVtYmVyIil7cD1jO2M9dW5kZWZpbmVkfXZhciBJO2lmKCEociBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkNvbnRyb2wpJiZpKXt2YXIgJD10eXBlb2Ygcj09PSJzdHJpbmciP3Euc2FwLmJ5SWQocik6cShyKTtpZigkLmxlbmd0aD4wKXtJPSQuYXR0cigiaWQiKTtyPSQuZ2V0KDApO3ZhciBDPSQuYXR0cigiZGF0YS1jb250ZXh0Iik7Yz1jfHxDJiZxLnBhcnNlSlNPTihDKTtzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLm1hcmtJbmxpbmVUZW1wbGF0ZSgkKX19dmFyIG89dGhpcy5jcmVhdGVDb250cm9sKEksYyk7by5wbGFjZUF0KHIscCk7cmV0dXJuIG99O1QucHJvdG90eXBlLmNyZWF0ZU1ldGFkYXRhPWZ1bmN0aW9uKCl7cS5zYXAubG9nLmVycm9yKCJUaGUgZnVuY3Rpb24gY3JlYXRlTWV0YWRhdGEgaXMgYW4gYWJzdHJhY3QgZnVuY3Rpb24gd2hpY2ggbmVlZHMgdG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3Nlcy4iKX07VC5wcm90b3R5cGUuY3JlYXRlUmVuZGVyZXI9ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZXJyb3IoIlRoZSBmdW5jdGlvbiBjcmVhdGVSZW5kZXJlciBpcyBhbiBhYnN0cmFjdCBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzc2VzLiIpfTtzYXAudWkudGVtcGxhdGU9ZnVuY3Rpb24odCl7aWYoIXQpe3ZhciBhPVtdO3EuZWFjaChULl9tU3VwcG9ydGVkVHlwZXMsZnVuY3Rpb24ocyxqKXtxKCJzY3JpcHRbdHlwZT0nIitzKyInXSwgW2RhdGEtdHlwZT0nIitzKyInXSIpLmVhY2goZnVuY3Rpb24obSxFKXthLnB1c2goc2FwLnVpLnRlbXBsYXRlKHtpZDpFLmlkLGRvbXJlZjpFLHR5cGU6cyxfY2xhc3M6an0pKX0pfSk7cmV0dXJuIGF9ZWxzZXtpZih0eXBlb2YgdD09PSJzdHJpbmciKXtyZXR1cm4gc2FwLnVpLnRlbXBsYXRlKHtpZDp0fSl9ZWxzZSBpZih0JiZ0LnRhZ05hbWUmJnQubm9kZU5hbWUmJnQub3duZXJEb2N1bWVudCYmdC5ub2RlVHlwZT09PTEpe3JldHVybiBzYXAudWkudGVtcGxhdGUoe2lkOnQuaWQsZG9tcmVmOnR9KX10PXEuZXh0ZW5kKHt0eXBlOlQuREVGQVVMVF9URU1QTEFURX0sdCk7dmFyIGkscyxjLEMscixiPWZhbHNlLGw9dHlwZW9mIHQuc3JjPT09InN0cmluZyI7aWYobCl7dmFyIFI9cS5zYXAuc2pheCh7dXJsOnQuc3JjLGRhdGFUeXBlOiJ0ZXh0In0pO2lmKFIuc3VjY2Vzcyl7aT10LmlkLHM9dC50eXBlLGM9dC5jb250cm9sLEM9Ui5kYXRhO3ZhciBkPS9ePCEtLVxzVUk1OlRlbXBsYXRlXHN0eXBlPShbYS16XC9cLV0qKVxzKD86Y29udHJvbGxlcj0oW0EtWmEtei5dKilccyk/LS0+LyxlPUMubWF0Y2goZCk7aWYoZSl7cz1lWzFdO2lmKGUubGVuZ3RoPT0zKXtiPWVbMl19Qz1DLnN1YnN0cihlWzBdLmxlbmd0aCl9fWVsc2V7dGhyb3cgbmV3IEVycm9yKCJUaGUgdGVtcGxhdGUgY291bGQgbm90IGJlIGxvYWRlZCBmcm9tICIrdC5zcmMrIiEiKX19ZWxzZXt2YXIgRT10LmRvbXJlZnx8cS5zYXAuZG9tQnlJZCh0LmlkKSwkPXEoRSksST1mYWxzZTtpPXQuaWR8fEUmJkUuaWQ7cz0kLmF0dHIoInR5cGUiKXx8dC50eXBlLGM9JC5hdHRyKCJkYXRhLWNvbnRyb2wiKXx8dC5jb250cm9sO2lmKGkpe3ZhciBmPXNhcC51aS5nZXRDb3JlKCkuZ2V0VGVtcGxhdGUoaSk7aWYoIWYgaW5zdGFuY2VvZiBUKXt0aHJvdyBuZXcgRXJyb3IoIk9iamVjdCBmb3IgaWQgXCIiK2krIlwiIGlzIG5vIHNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGUhIil9ZWxzZXtpZihmKXtyZXR1cm4gZn19fWlmKCQubGVuZ3RoPT09MCl7dGhyb3cgbmV3IEVycm9yKCJET00gZWxlbWVudCBmb3IgdGhlIFRlbXBsYXRlIHdpdGggdGhlIGlkIFwiIitpKyJcIiBub3QgZm91bmQhIil9Qz0kLmh0bWwoKTt2YXIgZz0vcGF0aD0iKFx3fFwvfCZndDspKyIvaTtpZihnLnRlc3QoQykpe0M9Qy5yZXBsYWNlKCImZ3Q7IiwiPiIpfXZhciBoPUUudGFnTmFtZS50b0xvd2VyQ2FzZSgpO2lmKGghPT0ic2NyaXB0Iil7ST0kLnBhcmVudHMoImJvZHkiKS5sZW5ndGg9PT0xfX12YXIgaj10Ll9jbGFzcztpZighail7aj1ULl9tU3VwcG9ydGVkVHlwZXNbc107aWYoIWope3Rocm93IG5ldyBFcnJvcigiVGhlIHR5cGUgXCIiK3MrIlwiIGlzIG5vdCBzdXBwb3J0ZWQuIil9fXEuc2FwLnJlcXVpcmUoaik7dmFyIG89cS5zYXAuZ2V0T2JqZWN0KGopO3ZhciBrPW5ldyBvKHtpZDppLGNvbnRlbnQ6Q30pO2lmKGMpe2suZGVjbGFyZUNvbnRyb2woYyl9aWYoYil7ay5fc0NvbnRyb2xsZXJOYW1lPWJ9aWYoSSl7ay5wbGFjZUF0KGksdC5jb250ZXh0LHVuZGVmaW5lZCx0cnVlKX1yZXR1cm4ga319O1QuREVGQVVMVF9URU1QTEFURT0idGV4dC94LWhhbmRsZWJhcnMtdGVtcGxhdGUiO1QucmVnaXN0ZXJUeXBlKFQuREVGQVVMVF9URU1QTEFURSwic2FwLnVpLmNvcmUudG1wbC5IYW5kbGViYXJzVGVtcGxhdGUiKTtyZXR1cm4gVH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0VHlwZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0VHlwZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvRXhwb3J0VHlwZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnXSxmdW5jdGlvbihxLE0peyd1c2Ugc3RyaWN0Jzt2YXIgRT1NLmV4dGVuZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRUeXBlJyx7bWV0YWRhdGE6e3Byb3BlcnRpZXM6e2ZpbGVFeHRlbnNpb246J3N0cmluZycsbWltZVR5cGU6J3N0cmluZycsY2hhcnNldDonc3RyaW5nJ319fSk7RS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuX29FeHBvcnQ9bnVsbH07RS5wcm90b3R5cGUuX2dlbmVyYXRlPWZ1bmN0aW9uKGUpe3RoaXMuX29FeHBvcnQ9ZTt2YXIgYz10aGlzLmdlbmVyYXRlKCk7dGhpcy5fb0V4cG9ydD1udWxsO3JldHVybiBjfTtFLnByb3RvdHlwZS5nZW5lcmF0ZT1mdW5jdGlvbigpe3JldHVybicnfTtFLnByb3RvdHlwZS5nZXRDb2x1bW5Db3VudD1mdW5jdGlvbigpe2lmKHRoaXMuX29FeHBvcnQpe3JldHVybiB0aGlzLl9vRXhwb3J0LmdldENvbHVtbnMoKS5sZW5ndGh9cmV0dXJuIDB9O0UucHJvdG90eXBlLmdldFJvd0NvdW50PWZ1bmN0aW9uKCl7aWYodGhpcy5fb0V4cG9ydCYmdGhpcy5fb0V4cG9ydC5nZXRCaW5kaW5nKCJyb3dzIikpe3JldHVybiB0aGlzLl9vRXhwb3J0LmdldEJpbmRpbmcoInJvd3MiKS5nZXRMZW5ndGgoKX1yZXR1cm4gMH07RS5wcm90b3R5cGUuY29sdW1uR2VuZXJhdG9yPWZ1bmN0aW9uKCl7dmFyIGk9MCxjPXRoaXMuX29FeHBvcnQuZ2V0Q29sdW1ucygpLEM9Yy5sZW5ndGg7cmV0dXJue25leHQ6ZnVuY3Rpb24oKXtpZihpPEMpe3ZhciBJPWk7aSsrO3JldHVybnt2YWx1ZTp7aW5kZXg6SSxuYW1lOmNbSV0uZ2V0TmFtZSgpfSxkb25lOmZhbHNlfX1lbHNle3JldHVybnt2YWx1ZTp1bmRlZmluZWQsZG9uZTp0cnVlfX19fX07RS5wcm90b3R5cGUuY2VsbEdlbmVyYXRvcj1mdW5jdGlvbigpe3ZhciBpPTAscj10aGlzLl9vRXhwb3J0LmdldEFnZ3JlZ2F0aW9uKCdfdGVtcGxhdGUnKSxjPXIuZ2V0Q2VsbHMoKSxDPWMubGVuZ3RoO3JldHVybntuZXh0OmZ1bmN0aW9uKCl7aWYoaTxDKXt2YXIgST1pO2krKzt2YXIgbT17fTtxLmVhY2goY1tJXS5nZXRDdXN0b21EYXRhKCksZnVuY3Rpb24oKXttW3RoaXMuZ2V0S2V5KCldPXRoaXMuZ2V0VmFsdWUoKX0pO3JldHVybnt2YWx1ZTp7aW5kZXg6SSxjb250ZW50OmNbSV0uZ2V0Q29udGVudCgpLGN1c3RvbURhdGE6bX0sZG9uZTpmYWxzZX19ZWxzZXtyZXR1cm57dmFsdWU6dW5kZWZpbmVkLGRvbmU6dHJ1ZX19fX19O0UucHJvdG90eXBlLnJvd0dlbmVyYXRvcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsaT0wLGU9dGhpcy5fb0V4cG9ydCxiPWUuZ2V0QmluZGluZygicm93cyIpLEI9ZS5nZXRCaW5kaW5nSW5mbygicm93cyIpLGM9Yi5nZXRDb250ZXh0cygwLGIuZ2V0TGVuZ3RoKCkpLEM9Yy5sZW5ndGgscj1lLmdldEFnZ3JlZ2F0aW9uKCdfdGVtcGxhdGUnKTtyZXR1cm57bmV4dDpmdW5jdGlvbigpe2lmKGk8Qyl7dmFyIEk9aTtpKys7ci5zZXRCaW5kaW5nQ29udGV4dChjW0ldLEIubW9kZWwpO3JldHVybnt2YWx1ZTp7aW5kZXg6SSxjZWxsczp0LmNlbGxHZW5lcmF0b3IoKX0sZG9uZTpmYWxzZX19ZWxzZXtyZXR1cm57dmFsdWU6dW5kZWZpbmVkLGRvbmU6dHJ1ZX19fX19O3JldHVybiBFfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRUeXBlQ1NWJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRUeXBlQ1NWJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9FeHBvcnRUeXBlQ1NWIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9FeHBvcnRUeXBlJ10sZnVuY3Rpb24ocSxFKXsndXNlIHN0cmljdCc7dmFyIEM9RS5leHRlbmQoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0VHlwZUNTVicse21ldGFkYXRhOntwcm9wZXJ0aWVzOntzZXBhcmF0b3JDaGFyOnt0eXBlOidzdHJpbmcnLGRlZmF1bHRWYWx1ZTonLCd9fX19KTtDLnByb3RvdHlwZS5zZXRTZXBhcmF0b3JDaGFyPWZ1bmN0aW9uKHMpe3ZhciBzPXRoaXMudmFsaWRhdGVQcm9wZXJ0eSgnc2VwYXJhdG9yQ2hhcicscyk7aWYocy5sZW5ndGg+MSl7dGhyb3cgbmV3IEVycm9yKCJWYWx1ZSBvZiBwcm9wZXJ0eSBcInNlcGFyYXRvckNoYXJcIiBuZWVkcyB0byBiZSBleGFjdGx5IG9uZSBjaGFyYWN0ZXIgb3IgZW1wdHkuICIrIlwiIitzKyJcIiBpcyAiK3MubGVuZ3RoKyIgY2hhcmFjdGVycyBsb25nLiIpfXJldHVybiB0aGlzLnNldFByb3BlcnR5KCdzZXBhcmF0b3JDaGFyJyxzKX07Qy5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuc2V0UHJvcGVydHkoJ2ZpbGVFeHRlbnNpb24nLCdjc3YnLHRydWUpO3RoaXMuc2V0UHJvcGVydHkoJ21pbWVUeXBlJywndGV4dC9jc3YnLHRydWUpO3RoaXMuc2V0UHJvcGVydHkoJ2NoYXJzZXQnLCd1dGYtOCcsdHJ1ZSl9O0MucHJvdG90eXBlLmVzY2FwZUNvbnRlbnQ9ZnVuY3Rpb24odil7aWYodiYmKHYuaW5kZXhPZih0aGlzLmdldFNlcGFyYXRvckNoYXIoKSk+LTF8fHYuaW5kZXhPZignXHJcbicpPi0xKSl7dj12LnJlcGxhY2UoLyIvZywnIiInKTt2PSciJyt2KyciJ31yZXR1cm4gdn07Qy5wcm90b3R5cGUuZ2VuZXJhdGU9ZnVuY3Rpb24oKXt2YXIgYj1bXTt0aGlzLmdlbmVyYXRlQ29sdW1ucyhiKTt0aGlzLmdlbmVyYXRlUm93cyhiKTtyZXR1cm4gYi5qb2luKCdcclxuJyl9O0MucHJvdG90eXBlLmdlbmVyYXRlQ29sdW1ucz1mdW5jdGlvbihiKXt2YXIgYz1bXSxvPXRoaXMuY29sdW1uR2VuZXJhdG9yKCksYTt3aGlsZSghKGE9by5uZXh0KCkpLmRvbmUpe2MucHVzaCh0aGlzLmVzY2FwZUNvbnRlbnQoYS52YWx1ZS5uYW1lKSl9Yi5wdXNoKGMuam9pbih0aGlzLmdldFNlcGFyYXRvckNoYXIoKSkpfTtDLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3M9ZnVuY3Rpb24oYil7dmFyIHI9dGhpcy5yb3dHZW5lcmF0b3IoKSxSO3doaWxlKCEoUj1yLm5leHQoKSkuZG9uZSl7dmFyIGE9W107dmFyIGM9Ui52YWx1ZS5jZWxscyxvO3doaWxlKCEobz1jLm5leHQoKSkuZG9uZSl7YS5wdXNoKHRoaXMuZXNjYXBlQ29udGVudChvLnZhbHVlLmNvbnRlbnQpKX1iLnB1c2goYS5qb2luKHRoaXMuZ2V0U2VwYXJhdG9yQ2hhcigpKSl9fTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuTW9ja1NlcnZlcicpKXsKLyoKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuTW9ja1NlcnZlcicpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkuc2lub24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL01vY2tTZXJ2ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvRGV2aWNlJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJ3NhcC91aS90aGlyZHBhcnR5L3Npbm9uJ10sZnVuY3Rpb24ocSxELE0sZCl7InVzZSBzdHJpY3QiO2lmKCEhRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkudGhpcmRwYXJ0eS5zaW5vbi1pZSIpfXZhciBmPU0uZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLk1vY2tTZXJ2ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMsUyl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Zi5fYVNlcnZlcnMucHVzaCh0aGlzKX0sbWV0YWRhdGE6e3Byb3BlcnRpZXM6e3Jvb3RVcmk6InN0cmluZyIscmVxdWVzdHM6e3R5cGU6Im9iamVjdFtdIixkZWZhdWx0VmFsdWU6W119fX0sX29TZXJ2ZXI6bnVsbCxfYUZpbHRlcjpudWxsLF9vTW9ja2RhdGE6bnVsbCxfb01ldGFkYXRhOm51bGwsX3NNZXRhZGF0YVVybDpudWxsLF9zTW9ja2RhdGFCYXNlVXJsOm51bGwsX21FbnRpdHlTZXRzOm51bGx9KTtmLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuX29TZXJ2ZXI9Zi5fZ2V0SW5zdGFuY2UoKTt0aGlzLl9hRmlsdGVycz1bXTt2YXIgcj10aGlzLmdldFJlcXVlc3RzKCk7dmFyIGw9ci5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsO2krKyl7dmFyIFI9cltpXTt0aGlzLl9hZGRSZXF1ZXN0SGFuZGxlcihSLm1ldGhvZCxSLnBhdGgsUi5yZXNwb25zZSl9fTtmLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7aWYodGhpcy5pc1N0YXJ0ZWQoKSl7dGhpcy5fcmVtb3ZlQWxsUmVxdWVzdEhhbmRsZXJzKCk7dGhpcy5fcmVtb3ZlQWxsRmlsdGVycygpO3RoaXMuX29TZXJ2ZXI9bnVsbH19O2YucHJvdG90eXBlLmlzU3RhcnRlZD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fb1NlcnZlcn07Zi5wcm90b3R5cGUuX2FwcGx5UXVlcnlPbkNvbGxlY3Rpb249ZnVuY3Rpb24oRixRLGUpe3ZhciBhPVEuc3BsaXQoJz0nKTt2YXIgbz1hWzFdO2lmKG89PT0iIilyZXR1cm47aWYoby5sYXN0SW5kZXhPZignLCcpPT09by5sZW5ndGgpe3Euc2FwLmxvZy5lcnJvcigiVGhlIFVSSSBpcyB2aW9sYXRpbmcgdGhlIGNvbnN0cnVjdGlvbiBydWxlcyBkZWZpbmVkIGluIHRoZSBEYXRhIFNlcnZpY2VzIHNwZWNpZmljYXRpb24hIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1zd2l0Y2goYVswXSl7Y2FzZSIkdG9wIjppZighKG5ldyBSZWdFeHAoL15cZCskLykudGVzdChvKSkpe3Euc2FwLmxvZy5lcnJvcigiSW52YWxpZCBzeXN0ZW0gcXVlcnkgb3B0aW9ucyB2YWx1ZSEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfUYucmVzdWx0cz1GLnJlc3VsdHMuc2xpY2UoMCxvKTticmVhaztjYXNlIiRza2lwIjppZighKG5ldyBSZWdFeHAoL15cZCskLykudGVzdChvKSkpe3Euc2FwLmxvZy5lcnJvcigiSW52YWxpZCBzeXN0ZW0gcXVlcnkgb3B0aW9ucyB2YWx1ZSEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfUYucmVzdWx0cz1GLnJlc3VsdHMuc2xpY2UobyxGLnJlc3VsdHMubGVuZ3RoKTticmVhaztjYXNlIiRvcmRlcmJ5IjpGLnJlc3VsdHM9dGhpcy5fZ2V0T2RhdGFRdWVyeU9yZGVyYnkoRi5yZXN1bHRzLG8pO2JyZWFrO2Nhc2UiJGZpbHRlciI6Ri5yZXN1bHRzPXRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoRi5yZXN1bHRzLG8pO2JyZWFrO2Nhc2UiJHNlbGVjdCI6Ri5yZXN1bHRzPXRoaXMuX2dldE9kYXRhUXVlcnlTZWxlY3QoRi5yZXN1bHRzLG8pO2JyZWFrO2Nhc2UiJGlubGluZWNvdW50Ijp2YXIgYz10aGlzLl9nZXRPZGF0YUlubGluZUNvdW50KEYucmVzdWx0cyxvKTtpZihjKXtGLl9fY291bnQ9Y31icmVhaztjYXNlIiRleHBhbmQiOkYucmVzdWx0cz10aGlzLl9nZXRPZGF0YVF1ZXJ5RXhwYW5kKEYucmVzdWx0cyxvLGUpO2JyZWFrO2Nhc2UiJGZvcm1hdCI6Ri5yZXN1bHRzPXRoaXMuX2dldE9kYXRhUXVlcnlGb3JtYXQoRi5yZXN1bHRzLG8pO2JyZWFrO2RlZmF1bHQ6cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkIHN5c3RlbSBxdWVyeSBvcHRpb25zIHZhbHVlISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9fTtmLnByb3RvdHlwZS5fYXBwbHlRdWVyeU9uRW50cnk9ZnVuY3Rpb24oZSxRLEUpe3ZhciBhPVEuc3BsaXQoJz0nKTt2YXIgbz1hWzFdO2lmKG89PT0iIilyZXR1cm47aWYoby5sYXN0SW5kZXhPZignLCcpPT09by5sZW5ndGgpe3Euc2FwLmxvZy5lcnJvcigiVGhlIFVSSSBpcyB2aW9sYXRpbmcgdGhlIGNvbnN0cnVjdGlvbiBydWxlcyBkZWZpbmVkIGluIHRoZSBEYXRhIFNlcnZpY2VzIHNwZWNpZmljYXRpb24hIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1zd2l0Y2goYVswXSl7Y2FzZSIkZmlsdGVyIjpyZXR1cm4gdGhpcy5fcmVjdXJzaXZlT2RhdGFRdWVyeUZpbHRlcihbZV0sbylbMF07Y2FzZSIkc2VsZWN0IjpyZXR1cm4gdGhpcy5fZ2V0T2RhdGFRdWVyeVNlbGVjdChbZV0sbylbMF07Y2FzZSIkZXhwYW5kIjpyZXR1cm4gdGhpcy5fZ2V0T2RhdGFRdWVyeUV4cGFuZChbZV0sbyxFKVswXTtjYXNlIiRmb3JtYXQiOnJldHVybiB0aGlzLl9nZXRPZGF0YVF1ZXJ5Rm9ybWF0KFtlXSxvKTtkZWZhdWx0OnEuc2FwLmxvZy5lcnJvcigiSW52YWxpZCBzeXN0ZW0gcXVlcnkgb3B0aW9ucyB2YWx1ZSEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfX07Zi5wcm90b3R5cGUuX2dldE9kYXRhUXVlcnlPcmRlcmJ5PWZ1bmN0aW9uKGMsbyl7dmFyIHA9by5zcGxpdCgnLCcpO3ZhciB0PXRoaXM7cS5lYWNoKHAsZnVuY3Rpb24oaSxQKXtwW2ldPXQuX3RyaW0oUCl9KTt2YXIgQz1mdW5jdGlvbiBjb21wYXJlKGEsYil7Zm9yKHZhciBpPTA7aTxwLmxlbmd0aDtpKyspe3ZhciBzPXBbaV0uc3BsaXQoJyAnKTt2YXIgUz0xO2lmKHMubGVuZ3RoPjEpe3N3aXRjaChzWzFdKXtjYXNlJ2FzYyc6Uz0xO2JyZWFrO2Nhc2UnZGVzYyc6Uz0tMTticmVhaztkZWZhdWx0OnEuc2FwLmxvZy5lcnJvcigiSW52YWxpZCBzb3J0b3JkZXIgJyIrc1sxXSsiJyBkZXRlY3RlZCEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfX12YXIgUCxlO3ZhciBoPXNbMF0uaW5kZXhPZigiLyIpO2lmKGghPT0tMSl7UD1zWzBdLnN1YnN0cmluZyhoKzEpO2U9c1swXS5zdWJzdHJpbmcoMCxoKTtpZighYVtlXS5oYXNPd25Qcm9wZXJ0eShQKSl7cS5zYXAubG9nLmVycm9yKCJQcm9wZXJ0eSAiK1ArIiBub3QgZm91bmQhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1pZihhW2VdW1BdPGJbZV1bUF0pcmV0dXJuLTEqUztpZihhW2VdW1BdPmJbZV1bUF0pcmV0dXJuIDEqU31lbHNle1A9c1swXTtpZighYS5oYXNPd25Qcm9wZXJ0eShQKSl7cS5zYXAubG9nLmVycm9yKCJQcm9wZXJ0eSAiK1ArIiBub3QgZm91bmQhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1pZihhW1BdPGJbUF0pcmV0dXJuLTEqUztpZihhW1BdPmJbUF0pcmV0dXJuIDEqU319cmV0dXJuIDB9O3JldHVybiBjLnNvcnQoQyl9O2YucHJvdG90eXBlLl9hcnJheVVuaXF1ZT1mdW5jdGlvbihiKXt2YXIgYT1iLmNvbmNhdCgpO2Zvcih2YXIgaT0wO2k8YS5sZW5ndGg7KytpKXtmb3IodmFyIGo9aSsxO2o8YS5sZW5ndGg7KytqKXtpZihhW2ldPT09YVtqXSlhLnNwbGljZShqLS0sMSl9fXJldHVybiBhfTtmLnByb3RvdHlwZS5fZ2V0QnJhY2tldEluZGljZXM9ZnVuY3Rpb24ocyl7dmFyIFM9W107dmFyIHI9ZmFsc2U7dmFyIGksZT0wO2Zvcih2YXIgYz0wO2M8cy5sZW5ndGg7YysrKXtpZihzW2NdPT09JygnKXtpZigvW3N1YnN0cmluZ29mfGVuZHN3aXRofHN0YXJ0c3dpdGhdJC8udGVzdChzLnN1YnN0cmluZygwLGMpKSl7cj10cnVlfWVsc2V7Uy5wdXNoKHNbY10pO2lmKGk9PT11bmRlZmluZWQpe2k9Y319fWVsc2UgaWYoc1tjXT09PScpJyl7aWYoIXIpe1MucG9wKCk7ZT1jO2lmKFMubGVuZ3RoPT09MClyZXR1cm57c3RhcnQ6aSxlbmQ6ZX19ZWxzZXtyPWZhbHNlfX19cmV0dXJue3N0YXJ0OmksZW5kOmV9fTtmLnByb3RvdHlwZS5fcmVjdXJzaXZlT2RhdGFRdWVyeUZpbHRlcj1mdW5jdGlvbihhLG8pe3ZhciBJPXRoaXMuX2dldEJyYWNrZXRJbmRpY2VzKG8pO2lmKEkuc3RhcnQ9PT0wJiZJLmVuZD09PW8ubGVuZ3RoLTEpe289dGhpcy5fdHJpbShvLnN1YnN0cmluZyhJLnN0YXJ0KzEsSS5lbmQpKTtyZXR1cm4gdGhpcy5fcmVjdXJzaXZlT2RhdGFRdWVyeUZpbHRlcihhLG8pfXZhciByPS8oW15zdWJzdHJpbmdvZnxlbmRzd2l0aHxzdGFydHN3aXRoXXxeKVwoKC4qKVwpLztpZihyLnRlc3Qobykpe3ZhciBiPW8uc3Vic3RyaW5nKEkuc3RhcnQsSS5lbmQrMSk7dmFyIGM9bmV3IFJlZ0V4cCgiKC4qKSArKG9yfGFuZCkgKygiK3RoaXMuX3RyaW0odGhpcy5fZXNjYXBlU3RyaW5nRm9yUmVnRXhwKGIpKSsiLiopIik7aWYoSS5zdGFydD09PTApe2M9bmV3IFJlZ0V4cCgiKCIrdGhpcy5fdHJpbSh0aGlzLl9lc2NhcGVTdHJpbmdGb3JSZWdFeHAoYikpKyIpICsob3J8YW5kKSArKC4qKSIpfXZhciBlPWMuZXhlYyhvKTt2YXIgRT1lWzFdO3ZhciBPPWVbMl07dmFyIHM9ZVszXTt2YXIgUz10aGlzLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyKGEsRSk7dmFyIGgscDtpZihPPT09Im9yIil7aD10aGlzLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyKGEscyk7cmV0dXJuIHRoaXMuX2FycmF5VW5pcXVlKFMuY29uY2F0KGgpKX1pZihPPT09ImFuZCIpe3JldHVybiB0aGlzLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyKFMscyl9fWVsc2V7cD1vLnNwbGl0KC8gK2FuZHxvciArLyk7aWYocC5sZW5ndGg9PT0xKXtpZihvLm1hdGNoKC8gK2FuZHxvciArLykpe3Rocm93IG5ldyBFcnJvcigiNDAwIil9cmV0dXJuIHRoaXMuX2dldE9kYXRhUXVlcnlGaWx0ZXIoYSx0aGlzLl90cmltKG8pKX12YXIgUj10aGlzLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyKGEscFswXSk7dmFyIGo7Zm9yKHZhciBpPTE7aTxwLmxlbmd0aDtpKyspe2o9bmV3IFJlZ0V4cCh0aGlzLl90cmltKHRoaXMuX2VzY2FwZVN0cmluZ0ZvclJlZ0V4cChwW2ktMV0pKSsiICsoYW5kfG9yKSArIit0aGlzLl90cmltKHRoaXMuX2VzY2FwZVN0cmluZ0ZvclJlZ0V4cChwW2ldKSkpO089ai5leGVjKG8pWzFdO2lmKE89PT0ib3IiKXtoPXRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoYSxwW2ldKTtSPXRoaXMuX2FycmF5VW5pcXVlKFIuY29uY2F0KGgpKX1pZihPPT09ImFuZCIpe1I9dGhpcy5fcmVjdXJzaXZlT2RhdGFRdWVyeUZpbHRlcihSLHBbaV0pfX1yZXR1cm4gUn19O2YucHJvdG90eXBlLl9nZXRPZGF0YVF1ZXJ5RmlsdGVyPWZ1bmN0aW9uKGEsbyl7aWYoYS5sZW5ndGg9PT0wKXJldHVybiBhO3ZhciByPW5ldyBSZWdFeHAoIiguKikgKGVxfG5lfGd0fGx0fGxlfGdlKSAoLiopIik7dmFyIGI9bmV3IFJlZ0V4cCgiKGVuZHN3aXRofHN0YXJ0c3dpdGh8c3Vic3RyaW5nb2YpXFwoKC4qKSIpO3ZhciBPPW51bGw7dmFyIGM9ci5leGVjKG8pO2lmKGMpe089Y1syXX1lbHNle2M9Yi5leGVjKG8pO2lmKGMpe089Y1sxXX1lbHNle3Rocm93IG5ldyBFcnJvcigiNDAwIil9fXZhciB0PXRoaXM7dmFyIEc9ZnVuY3Rpb24odixWLHAscyl7dmFyIGMsZTtpZighdil7Yz1yLmV4ZWMobyk7ZT10Ll90cmltKGNbVisxXSk7dmFyIFA9dC5fdHJpbShjW3ArMV0pfWVsc2V7dmFyIGg9bmV3IFJlZ0V4cCgiKHN1YnN0cmluZ29mfHN0YXJ0c3dpdGh8ZW5kc3dpdGgpXFwoKFteLFxcKV0qKSwoLiopXFwpIik7Yz1oLmV4ZWMobyk7ZT10Ll90cmltKGNbVisyXSk7UD10Ll90cmltKGNbcCsyXSl9aWYoZS5pbmRleE9mKCJkYXRldGltZSIpPT09MCl7ZT10Ll9nZXRKc29uRGF0ZShlKX1lbHNlIGlmKGU9PT0idHJ1ZSIpe2U9dHJ1ZX1lbHNlIGlmKGU9PT0iZmFsc2UiKXtlPWZhbHNlfWVsc2UgaWYodC5faXNWYWxpZE51bWJlcihlKSl7ZT1wYXJzZUZsb2F0KGUpfWVsc2UgaWYoKGUuY2hhckF0KDApPT09IiciKSYmKGUuY2hhckF0KGUubGVuZ3RoLTEpPT09IiciKSl7ZT1lLnN1YnN0cigxLGUubGVuZ3RoLTIpfXZhciBDPVAuaW5kZXhPZigiLyIpO2lmKEMhPT0tMSl7dmFyIGk9UC5zdWJzdHJpbmcoQysxKTt2YXIgaj1QLnN1YnN0cmluZygwLEMpO2lmKCFhWzBdW2pdLmhhc093blByb3BlcnR5KGkpKXtxLnNhcC5sb2cuZXJyb3IoIlByb3BlcnR5ICIraSsiIG5vdCBmb3VuZCEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfXJldHVybiBzKFAsZSxqLGkpfWVsc2V7aWYoIWFbMF0uaGFzT3duUHJvcGVydHkoUCkpe3Euc2FwLmxvZy5lcnJvcigiUHJvcGVydHkgIitQKyIgbm90IGZvdW5kIGZvciAiK2FbMF0uX19tZXRhZGF0YS50eXBlKyIhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1yZXR1cm4gcyhQLGUpfX07c3dpdGNoKE8pe2Nhc2Uic3Vic3RyaW5nb2YiOnJldHVybiBHKHRydWUsMCwxLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXS5pbmRleE9mKHYpIT09LTEpfXJldHVybihtW3BdLmluZGV4T2YodikhPT0tMSl9KX0pO2Nhc2Uic3RhcnRzd2l0aCI6cmV0dXJuIEcodHJ1ZSwxLDAsZnVuY3Rpb24ocCx2LEMsUCl7cmV0dXJuIHEuZ3JlcChhLGZ1bmN0aW9uKG0pe2lmKEMmJlApe3JldHVybihtW0NdW1BdLmluZGV4T2Yodik9PT0wKX1yZXR1cm4obVtwXS5pbmRleE9mKHYpPT09MCl9KX0pO2Nhc2UiZW5kc3dpdGgiOnJldHVybiBHKHRydWUsMSwwLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXS5pbmRleE9mKHYpPT09KG1bQ11bUF0ubGVuZ3RoLXYubGVuZ3RoKSl9cmV0dXJuKG1bcF0uaW5kZXhPZih2KT09PShtW3BdLmxlbmd0aC12Lmxlbmd0aCkpfSl9KTtjYXNlImVxIjpyZXR1cm4gRyhmYWxzZSwyLDAsZnVuY3Rpb24ocCx2LEMsUCl7cmV0dXJuIHEuZ3JlcChhLGZ1bmN0aW9uKG0pe2lmKEMmJlApe3JldHVybihtW0NdW1BdPT09dil9cmV0dXJuKG1bcF09PT12KX0pfSk7Y2FzZSJuZSI6cmV0dXJuIEcoZmFsc2UsMiwwLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXSE9PXYpfXJldHVybihtW3BdIT09dil9KX0pO2Nhc2UiZ3QiOnJldHVybiBHKGZhbHNlLDIsMCxmdW5jdGlvbihwLHYsQyxQKXtyZXR1cm4gcS5ncmVwKGEsZnVuY3Rpb24obSl7aWYoQyYmUCl7cmV0dXJuKG1bQ11bUF0+dil9cmV0dXJuKG1bcF0+dil9KX0pO2Nhc2UibHQiOnJldHVybiBHKGZhbHNlLDIsMCxmdW5jdGlvbihwLHYsQyxQKXtyZXR1cm4gcS5ncmVwKGEsZnVuY3Rpb24obSl7aWYoQyYmUCl7cmV0dXJuKG1bQ11bUF08dil9cmV0dXJuKG1bcF08dil9KX0pO2Nhc2UiZ2UiOnJldHVybiBHKGZhbHNlLDIsMCxmdW5jdGlvbihwLHYsQyxQKXtyZXR1cm4gcS5ncmVwKGEsZnVuY3Rpb24obSl7aWYoQyYmUCl7cmV0dXJuKG1bQ11bUF0+PXYpfXJldHVybihtW3BdPj12KX0pfSk7Y2FzZSJsZSI6cmV0dXJuIEcoZmFsc2UsMiwwLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXTw9dil9cmV0dXJuKG1bcF08PXYpfSl9KTtkZWZhdWx0OnEuc2FwLmxvZy5lcnJvcigiSW52YWxpZCAkZmlsdGVyIG9wZXJhdG9yICciK08rIichIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX19O2YucHJvdG90eXBlLl9nZXRPZGF0YVF1ZXJ5U2VsZWN0PWZ1bmN0aW9uKGEsbyl7dmFyIHA9by5zcGxpdCgnLCcpO2lmKHEuaW5BcnJheSgiKiIscCkhPT0tMSl7cmV0dXJuIGF9dmFyIHM9W107dmFyIHQ9dGhpcztxLmVhY2gocCxmdW5jdGlvbihpLFApe3BbaV09dC5fdHJpbShQKX0pO3EuZWFjaChwLGZ1bmN0aW9uKGksUCl7aWYoYS5sZW5ndGg+MCYmIWFbMF0uaGFzT3duUHJvcGVydHkoUCkpe3Euc2FwLmxvZy5lcnJvcigiUmVzb3VyY2Ugbm90IGZvdW5kIGZvciB0aGUgc2VsZWN0aW9uIGNsYXVzZSAnIitQKyInISIpO3Rocm93IG5ldyBFcnJvcigiNDA0Iil9fSk7cS5lYWNoKGEsZnVuY3Rpb24oaSxiKXt2YXIgUD1xLmV4dGVuZCh0cnVlLHt9LGIpO2Zvcih2YXIgbiBpbiBQKXtpZihuIT09Il9fbWV0YWRhdGEiJiZxLmluQXJyYXkobixwKT09PS0xKXtkZWxldGUgUFtuXX19cy5wdXNoKFApfSk7cmV0dXJuIHN9O2YucHJvdG90eXBlLl9nZXRPZGF0YUlubGluZUNvdW50PWZ1bmN0aW9uKGEsbyl7dmFyIHA9by5zcGxpdCgnLCcpO2lmKHAubGVuZ3RoIT09MXx8KHBbMF0hPT0nbm9uZScmJnBbMF0hPT0nYWxscGFnZXMnKSl7cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkIHN5c3RlbSBxdWVyeSBvcHRpb25zIHZhbHVlISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9aWYocFswXT09PSdub25lJyl7cmV0dXJufXJldHVybiBhLmxlbmd0aH07Zi5wcm90b3R5cGUuX2dldE9kYXRhUXVlcnlGb3JtYXQ9ZnVuY3Rpb24oYSxvKXtpZihvIT09J2pzb24nKXtxLnNhcC5sb2cuZXJyb3IoIlVuc3VwcG9ydGVkIGZvcm1hdCB2YWx1ZS4gT25seSBqc29uIGZvcm1hdCBpcyBzdXBwb3J0ZWQhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1yZXR1cm4gYX07Zi5wcm90b3R5cGUuX2dldE9kYXRhUXVlcnlFeHBhbmQ9ZnVuY3Rpb24oYSxvLGUpe3ZhciB0PXRoaXM7dmFyIG49by5zcGxpdCgnLCcpO3EuZWFjaChuLGZ1bmN0aW9uKGkscCl7bltpXT10Ll90cmltKHApfSk7dmFyIEU9dC5fbUVudGl0eVNldHNbZV0ubmF2cHJvcHM7cS5lYWNoKGEsZnVuY3Rpb24oaSxyKXtxLmVhY2gobixmdW5jdGlvbihpLE4pe3ZhciBiPU4uc3BsaXQoIi8iKTt2YXIgcz1iWzBdO2lmKCFyW3NdKXt0aHJvdyBuZXcgRXJyb3IoIjQwNCIpfXZhciBjPXJbc10ucmVzdWx0c3x8cltzXTtpZighY3x8ISFjLl9fZGVmZXJyZWQpe2M9cS5leHRlbmQodHJ1ZSxbXSx0Ll9yZXNvbHZlTmF2aWdhdGlvbihlLHIscykpfWlmKCEhYyYmYi5sZW5ndGg+MSl7dmFyIFI9Yi5zcGxpY2UoMSxiLmxlbmd0aCkuam9pbigiLyIpO2M9dC5fZ2V0T2RhdGFRdWVyeUV4cGFuZChjLFIsRVtzXS50by5lbnRpdHlTZXQpfWlmKEVbc10udG8ubXVsdGlwbGljaXR5PT09IioiKXtyW3NdPXtyZXN1bHRzOmN9fWVsc2V7cltzXT1jWzBdP2NbMF06e319fSl9KTtyZXR1cm4gYX07Zi5wcm90b3R5cGUuX3JlZnJlc2hEYXRhPWZ1bmN0aW9uKCl7dGhpcy5fbG9hZE1ldGFkYXRhKHRoaXMuX3NNZXRhZGF0YVVybCk7dGhpcy5fbUVudGl0eVNldHM9dGhpcy5fZmluZEVudGl0eVNldHModGhpcy5fb01ldGFkYXRhKTtpZighdGhpcy5fc01vY2tkYXRhQmFzZVVybCl7dGhpcy5fZ2VuZXJhdGVNb2NrZGF0YSh0aGlzLl9tRW50aXR5U2V0cyx0aGlzLl9vTWV0YWRhdGEpfWVsc2V7aWYoIXEuc2FwLmVuZHNXaXRoKHRoaXMuX3NNb2NrZGF0YUJhc2VVcmwsIi8iKSYmIXEuc2FwLmVuZHNXaXRoKHRoaXMuX3NNb2NrZGF0YUJhc2VVcmwsIi5qc29uIikpe3RoaXMuX3NNb2NrZGF0YUJhc2VVcmwrPSIvIn10aGlzLl9sb2FkTW9ja2RhdGEodGhpcy5fbUVudGl0eVNldHMsdGhpcy5fc01vY2tkYXRhQmFzZVVybCl9fTtmLnByb3RvdHlwZS5fZ2V0Um9vdFVyaT1mdW5jdGlvbigpe3ZhciB1PXRoaXMuZ2V0Um9vdFVyaSgpO3U9dSYmLyhbXj8jXSopKFs/I10uKik/Ly5leGVjKHUpWzFdO3JldHVybiB1fTtmLnByb3RvdHlwZS5fbG9hZE1ldGFkYXRhPWZ1bmN0aW9uKG0pe3ZhciBvPXEuc2FwLnNqYXgoe3VybDptLGRhdGFUeXBlOiJ4bWwifSkuZGF0YTt0aGlzLl9vTWV0YWRhdGE9bztyZXR1cm4gb307Zi5wcm90b3R5cGUuX2ZpbmRFbnRpdHlTZXRzPWZ1bmN0aW9uKG0pe3ZhciBlPXt9O3ZhciBwPXEobSkuZmluZCgiUHJpbmNpcGFsIik7dmFyIG89cShtKS5maW5kKCJEZXBlbmRlbnQiKTtxKG0pLmZpbmQoIkVudGl0eVNldCIpLmVhY2goZnVuY3Rpb24oaSxFKXt2YXIgJD1xKEUpO3ZhciBhPS8oKC4qKVwuKT8oLiopLy5leGVjKCQuYXR0cigiRW50aXR5VHlwZSIpKTtlWyQuYXR0cigiTmFtZSIpXT17Im5hbWUiOiQuYXR0cigiTmFtZSIpLCJzY2hlbWEiOmFbMl0sInR5cGUiOmFbM10sImtleXMiOltdLCJrZXlzVHlwZSI6e30sIm5hdnByb3BzIjp7fX19KTt2YXIgcj1mdW5jdGlvbihSLEYpe3ZhciBhPXEobSkuZmluZCgiRW5kW1JvbGU9IitSKyJdIik7dmFyIEU7dmFyIHM7cS5lYWNoKGEsZnVuY3Rpb24oaSx2KXtpZighIXEodikuYXR0cigiRW50aXR5U2V0Iikpe0U9cSh2KS5hdHRyKCJFbnRpdHlTZXQiKX1lbHNle3M9cSh2KS5hdHRyKCJNdWx0aXBsaWNpdHkiKX19KTt2YXIgUD1bXTt2YXIgYj0oRik/cDpvO3EoYikuZWFjaChmdW5jdGlvbihpLGMpe2lmKFI9PT0ocShjKS5hdHRyKCJSb2xlIikpKXtxKGMpLmNoaWxkcmVuKCJQcm9wZXJ0eVJlZiIpLmVhY2goZnVuY3Rpb24oaSxoKXtQLnB1c2gocShoKS5hdHRyKCJOYW1lIikpfSk7cmV0dXJuIGZhbHNlfX0pO3JldHVybnsicm9sZSI6UiwiZW50aXR5U2V0IjpFLCJwcm9wUmVmIjpQLCJtdWx0aXBsaWNpdHkiOnN9fTtxLmVhY2goZSxmdW5jdGlvbihFLGEpe3ZhciAkPXEobSkuZmluZCgiRW50aXR5VHlwZVtOYW1lPSIrYS50eXBlKyJdIik7dmFyIGs9cSgkKS5maW5kKCJQcm9wZXJ0eVJlZiIpO3EuZWFjaChrLGZ1bmN0aW9uKGksUCl7dmFyIEs9cShQKS5hdHRyKCJOYW1lIik7YS5rZXlzLnB1c2goSyk7YS5rZXlzVHlwZVtLXT1xKCQpLmZpbmQoIlByb3BlcnR5W05hbWU9IitLKyJdIikuYXR0cigiVHlwZSIpfSk7dmFyIG49cShtKS5maW5kKCJFbnRpdHlUeXBlW05hbWU9IithLnR5cGUrIl0gTmF2aWdhdGlvblByb3BlcnR5Iik7cS5lYWNoKG4sZnVuY3Rpb24oaSxOKXt2YXIgYj1xKE4pO2EubmF2cHJvcHNbYi5hdHRyKCJOYW1lIildPXsibmFtZSI6Yi5hdHRyKCJOYW1lIiksImZyb20iOnIoYi5hdHRyKCJGcm9tUm9sZSIpLHRydWUpLCJ0byI6cihiLmF0dHIoIlRvUm9sZSIpLGZhbHNlKX19KX0pO3JldHVybiBlfTtmLnByb3RvdHlwZS5fZmluZEVudGl0eVR5cGVzPWZ1bmN0aW9uKG0pe3ZhciBlPXt9O3EobSkuZmluZCgiRW50aXR5VHlwZSIpLmVhY2goZnVuY3Rpb24oaSxFKXt2YXIgJD1xKEUpO2VbJC5hdHRyKCJOYW1lIildPXsibmFtZSI6JC5hdHRyKCJOYW1lIiksInByb3BlcnRpZXMiOltdLCJrZXlzIjpbXX07JC5maW5kKCJQcm9wZXJ0eSIpLmVhY2goZnVuY3Rpb24oaSxwKXt2YXIgUD1xKHApO3ZhciB0PVAuYXR0cigiVHlwZSIpO2VbJC5hdHRyKCJOYW1lIildLnByb3BlcnRpZXMucHVzaCh7InNjaGVtYSI6dC5zdWJzdHJpbmcoMCx0Lmxhc3RJbmRleE9mKCIuIikpLCJ0eXBlIjp0LnN1YnN0cmluZyh0Lmxhc3RJbmRleE9mKCIuIikrMSksIm5hbWUiOlAuYXR0cigiTmFtZSIpLCJwcmVjaXNpb24iOlAuYXR0cigiUHJlY2lzaW9uIiksInNjYWxlIjpQLmF0dHIoIlNjYWxlIil9KX0pOyQuZmluZCgiUHJvcGVydHlSZWYiKS5lYWNoKGZ1bmN0aW9uKGksayl7dmFyIEs9cShrKTt2YXIgcD1LLmF0dHIoIk5hbWUiKTtlWyQuYXR0cigiTmFtZSIpXS5rZXlzLnB1c2gocCl9KX0pO3JldHVybiBlfTtmLnByb3RvdHlwZS5fZmluZENvbXBsZXhUeXBlcz1mdW5jdGlvbihtKXt2YXIgYz17fTtxKG0pLmZpbmQoIkNvbXBsZXhUeXBlIikuZWFjaChmdW5jdGlvbihpLEMpe3ZhciAkPXEoQyk7Y1skLmF0dHIoIk5hbWUiKV09eyJuYW1lIjokLmF0dHIoIk5hbWUiKSwicHJvcGVydGllcyI6W119OyQuZmluZCgiUHJvcGVydHkiKS5lYWNoKGZ1bmN0aW9uKGkscCl7dmFyIFA9cShwKTt2YXIgdD1QLmF0dHIoIlR5cGUiKTtjWyQuYXR0cigiTmFtZSIpXS5wcm9wZXJ0aWVzLnB1c2goeyJzY2hlbWEiOnQuc3Vic3RyaW5nKDAsdC5sYXN0SW5kZXhPZigiLiIpKSwidHlwZSI6dC5zdWJzdHJpbmcodC5sYXN0SW5kZXhPZigiLiIpKzEpLCJuYW1lIjpQLmF0dHIoIk5hbWUiKSwicHJlY2lzaW9uIjpQLmF0dHIoIlByZWNpc2lvbiIpLCJzY2FsZSI6UC5hdHRyKCJTY2FsZSIpfSl9KX0pO3JldHVybiBjfTtmLnByb3RvdHlwZS5fY3JlYXRlS2V5c1N0cmluZz1mdW5jdGlvbihlLEUpe3ZhciB0PXRoaXM7dmFyIGs9IiI7aWYoRSl7cS5lYWNoKGUua2V5cyxmdW5jdGlvbihpLEspe2lmKGspe2srPSIsIn12YXIgbz1FW0tdO2lmKGUua2V5c1R5cGVbS109PT0iRWRtLlN0cmluZyIpe289IiciK28rIicifWVsc2UgaWYoZS5rZXlzVHlwZVtLXT09PSJFZG0uRGF0ZVRpbWUiKXtvPXQuX2dldERhdGVUaW1lKG8pfWVsc2UgaWYoZS5rZXlzVHlwZVtLXT09PSJFZG0uR3VpZCIpe289Imd1aWQnIitvKyInIn1pZihlLmtleXMubGVuZ3RoPT09MSl7ays9bztyZXR1cm4ga31rKz1LKyI9IitvfSl9cmV0dXJuIGt9O2YucHJvdG90eXBlLl9sb2FkTW9ja2RhdGE9ZnVuY3Rpb24oZSxiKXt2YXIgdD10aGlzLEU9e307dGhpcy5fb01vY2tkYXRhPXt9O2lmKHEuc2FwLmVuZHNXaXRoKGIsIi5qc29uIikpe3ZhciByPXEuc2FwLnNqYXgoe3VybDpiLGRhdGFUeXBlOiJqc29uIn0pO2lmKHIuc3VjY2Vzcyl7RT1yLmRhdGF9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIlRoZSBtb2NrZGF0YSBmb3IgYWxsIHRoZSBlbnRpdHkgdHlwZXMgY291bGQgbm90IGJlIGZvdW5kIGF0IFwiIitiKyJcIiEiKX19ZWxzZXtxLmVhY2goZSxmdW5jdGlvbihzLG8pe2lmKCFFW28udHlwZV0pe3ZhciBhPWIrby50eXBlKyIuanNvbiI7dmFyIHI9cS5zYXAuc2pheCh7dXJsOmEsZGF0YVR5cGU6Impzb24ifSk7aWYoci5zdWNjZXNzKXtpZighIXIuZGF0YS5kKXtpZighIXIuZGF0YS5kLnJlc3VsdHMpe0Vbby50eXBlXT1yLmRhdGEuZC5yZXN1bHRzfWVsc2V7cS5zYXAubG9nLmVycm9yKCJUaGUgbW9ja2RhdGEgZm9ybWF0IGZvciBlbnRpdHkgdHlwZSBcIiIrby50eXBlKyJcIiBpbnZhbGlkIil9fWVsc2V7RVtvLnR5cGVdPXIuZGF0YX19ZWxzZXtpZihyLnN0YXR1cz09PSJwYXJzZXJlcnJvciIpe3Euc2FwLmxvZy5lcnJvcigiVGhlIG1vY2tkYXRhIGZvciBlbnRpdHkgdHlwZSBcIiIrby50eXBlKyJcIiBjb3VsZCBub3QgYmUgbG9hZGVkIGR1ZSB0byBhIHBhcnNpbmcgZXJyb3IhIil9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIlRoZSBtb2NrZGF0YSBmb3IgZW50aXR5IHR5cGUgXCIiK28udHlwZSsiXCIgY291bGQgbm90IGJlIGZvdW5kIGF0IFwiIitiKyJcIiEiKTtpZighIXQuX2JHZW5lcmF0ZU1pc3NpbmdNb2NrRGF0YSl7dmFyIG09e307bVtvLm5hbWVdPW87RVtvLnR5cGVdPXQuX2dlbmVyYXRlT0RhdGFNb2NrZGF0YUZvckVudGl0eVNldChtLHQuX29NZXRhZGF0YSlbby5uYW1lXX19fX19KX1xLmVhY2goZSxmdW5jdGlvbihzLG8pe3QuX29Nb2NrZGF0YVtzXT1bXTtpZihFW28udHlwZV0pe3EuZWFjaChFW28udHlwZV0sZnVuY3Rpb24oaSxhKXt0Ll9vTW9ja2RhdGFbc10ucHVzaChxLmV4dGVuZCh0cnVlLHt9LGEpKX0pfWlmKHQuX29Nb2NrZGF0YVtzXS5sZW5ndGg+MCl7dC5fZW5oYW5jZVdpdGhNZXRhZGF0YShvLHQuX29Nb2NrZGF0YVtzXSl9fSk7cmV0dXJuIHRoaXMuX29Nb2NrZGF0YX07Zi5wcm90b3R5cGUuX2VuaGFuY2VXaXRoTWV0YWRhdGE9ZnVuY3Rpb24oZSxtKXtpZihtKXt2YXIgdD10aGlzLHI9dGhpcy5fZ2V0Um9vdFVyaSgpLEU9ZSYmZS5uYW1lO3EuZWFjaChtLGZ1bmN0aW9uKGksbyl7by5fX21ldGFkYXRhPXtpZDpyK0UrIigiK3QuX2NyZWF0ZUtleXNTdHJpbmcoZSxvKSsiKSIsdHlwZTplLnNjaGVtYSsiLiIrZS50eXBlLHVyaTpyK0UrIigiK3QuX2NyZWF0ZUtleXNTdHJpbmcoZSxvKSsiKSJ9O3EuZWFjaChlLm5hdnByb3BzLGZ1bmN0aW9uKGssbil7b1trXT17X19kZWZlcnJlZDp7dXJpOnIrRSsiKCIrdC5fY3JlYXRlS2V5c1N0cmluZyhlLG8pKyIpLyIra319fSl9KX19O2YucHJvdG90eXBlLl9pc1JlcXVlc3RlZEtleXNWYWxpZD1mdW5jdGlvbihlLHIpe2lmKHIubGVuZ3RoPT09MSl7dmFyIHM9clswXS5zcGxpdCgnPScpO2lmKHRoaXMuX3RyaW0oc1swXSkhPT1lLmtleXNbMF0pe3I9W2Uua2V5c1swXSsiPSIrclswXV19fWZvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKXt2YXIgaz10aGlzLl90cmltKHJbaV0uc3Vic3RyaW5nKDAscltpXS5pbmRleE9mKCc9JykpKTt2YXIgUj10aGlzLl90cmltKHJbaV0uc3Vic3RyaW5nKHJbaV0uaW5kZXhPZignPScpKzEpKTt2YXIgRj1SLmNoYXJBdCgwKTt2YXIgbD1SLmNoYXJBdChSLmxlbmd0aC0xKTtpZihlLmtleXNUeXBlW2tdPT09IkVkbS5TdHJpbmciKXtpZihGIT09IicifHxsIT09IiciKXtyZXR1cm4gZmFsc2V9fWVsc2UgaWYoZS5rZXlzVHlwZVtrXT09PSJFZG0uRGF0ZVRpbWUiKXtpZihGPT09IicifHxsIT09IiciKXtyZXR1cm4gZmFsc2V9fWVsc2UgaWYoZS5rZXlzVHlwZVtrXT09PSJFZG0uR3VpZCIpe2lmKEY9PT0iJyJ8fGwhPT0iJyIpe3JldHVybiBmYWxzZX19ZWxzZXtpZihGPT09IicifHxsPT09IiciKXtyZXR1cm4gZmFsc2V9fX1yZXR1cm4gdHJ1ZX07Zi5wcm90b3R5cGUuX3BhcnNlS2V5cz1mdW5jdGlvbihrLGUpe3ZhciByPXt9O3ZhciBwPWsuc3BsaXQoIiwiKTt2YXIgSyxzLFA7Zm9yKHZhciBpPTA7aTxwLmxlbmd0aDtpKyspe1A9cFtpXS5zcGxpdCgiPSIpO2lmKFAubGVuZ3RoPT09MSYmZS5rZXlzLmxlbmd0aD09PTEpe0s9ZS5rZXlzWzBdO3M9UFswXX1lbHNle2lmKFAubGVuZ3RoPT09Mil7Sz1QWzBdO3M9UFsxXX19aWYocy5pbmRleE9mKCdcJycpPT09MCl7cltLXT1zLnNsaWNlKDEscy5sZW5ndGgtMSl9ZWxzZXtyW0tdPXN9fXJldHVybiByfTtmLnByb3RvdHlwZS5fZ2VuZXJhdGVQcm9wZXJ0eVZhbHVlPWZ1bmN0aW9uKGssdCxDLGkpe3ZhciBJPWk7aWYoIUkpe0k9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMDAwKSsxMDF9c3dpdGNoKHQpe2Nhc2UiU3RyaW5nIjpyZXR1cm4gaysiICIrSTtjYXNlIkRhdGVUaW1lIjp2YXIgYT1uZXcgRGF0ZSgpO2Euc2V0RnVsbFllYXIoMjAwMCtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMjApKTthLnNldERhdGUoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjMwKSk7YS5zZXRNb250aChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTIpKTthLnNldE1pbGxpc2Vjb25kcygwKTtyZXR1cm4iL0RhdGUoIithLmdldFRpbWUoKSsiKS8iO2Nhc2UiSW50MTYiOmNhc2UiSW50MzIiOmNhc2UiSW50NjQiOnJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMDApO2Nhc2UiRGVjaW1hbCI6cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDAwMDAwKS8xMDA7Y2FzZSJCb29sZWFuIjpyZXR1cm4gTWF0aC5yYW5kb20oKTwuNTtjYXNlIkJ5dGUiOnJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTApO2Nhc2UiRG91YmxlIjpyZXR1cm4gTWF0aC5yYW5kb20oKSoxMDtjYXNlIlNpbmdsZSI6cmV0dXJuIE1hdGgucmFuZG9tKCkqMTAwMDAwMDAwMDtjYXNlIlNCeXRlIjpyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwKTtjYXNlIlRpbWUiOnJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMjMpKyI6IitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqNTkpKyI6IitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqNTkpO2Nhc2UiR3VpZCI6cmV0dXJuJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLGZ1bmN0aW9uKGMpe3ZhciByPU1hdGgucmFuZG9tKCkqMTZ8MCx2PWM9PT0neCc/cjoociYweDN8MHg4KTtyZXR1cm4gdi50b1N0cmluZygxNil9KTtjYXNlIkJpbmFyeSI6dmFyIG49TWF0aC5mbG9vcigtMjE0NzQ4MzY0OCtNYXRoLnJhbmRvbSgpKjQyOTQ5NjcyOTUpO2Zvcih2YXIgYj0wLGU9bixtPSIiO2I8MzI7YisrLG0rPVN0cmluZyhlPj4+MzEpLGU8PD0xKTtyZXR1cm4gbTtjYXNlIkRhdGVUaW1lT2Zmc2V0IjpkZWZhdWx0OnJldHVybiB0aGlzLl9nZW5lcmF0ZURhdGFGcm9tRW50aXR5KENbdF0sSSl9fTtmLnByb3RvdHlwZS5fY29tcGxldGVLZXk9ZnVuY3Rpb24oZSxrLEUpe2lmKEUpe2Zvcih2YXIgaT0wO2k8ZS5rZXlzLmxlbmd0aDtpKyspe3ZhciBLPWUua2V5c1tpXTtpZihrW0tdKXtpZighRVtLXSl7c3dpdGNoKGUua2V5c1R5cGVbS10pe2Nhc2UiRWRtLkRhdGVUaW1lIjpFW0tdPXRoaXMuX2dldEpzb25EYXRlKGtbS10pO2JyZWFrO2Nhc2UiRWRtLkd1aWQiOkVbS109a1tLXS5zdWJzdHJpbmcoNSxrW0tdLmxlbmd0aC0yKTticmVhaztkZWZhdWx0OkVbS109a1tLXX19fWVsc2V7aWYoIUVbS10pe0VbS109dGhpcy5fZ2VuZXJhdGVQcm9wZXJ0eVZhbHVlKEssZS5rZXlzVHlwZVtLXS5zdWJzdHJpbmcoZS5rZXlzVHlwZVtLXS5sYXN0SW5kZXhPZignLicpKzEpKX19fX19O2YucHJvdG90eXBlLl9nZW5lcmF0ZURhdGFGcm9tRW50aXR5PWZ1bmN0aW9uKGUsSSxjKXt2YXIgRT17fTtpZighZSl7cmV0dXJuIEV9Zm9yKHZhciBpPTA7aTxlLnByb3BlcnRpZXMubGVuZ3RoO2krKyl7dmFyIHA9ZS5wcm9wZXJ0aWVzW2ldO3ZhciBQPSIiO0VbcC5uYW1lXT10aGlzLl9nZW5lcmF0ZVByb3BlcnR5VmFsdWUocC5uYW1lLHAudHlwZSxjLEkpfXJldHVybiBFfTtmLnByb3RvdHlwZS5fZ2VuZXJhdGVEYXRhRnJvbUVudGl0eVNldD1mdW5jdGlvbihlLEUsYyl7dmFyIG89RVtlLnR5cGVdO3ZhciBtPVtdO2Zvcih2YXIgaT0wO2k8MTAwO2krKyl7bS5wdXNoKHRoaXMuX2dlbmVyYXRlRGF0YUZyb21FbnRpdHkobyxpKzEsYykpfXJldHVybiBtfTtmLnByb3RvdHlwZS5fZ2VuZXJhdGVNb2NrZGF0YT1mdW5jdGlvbihlLG0pe3ZhciB0PXRoaXM7dmFyIG89e307cS5lYWNoKGUsZnVuY3Rpb24oRSxhKXt2YXIgYj17fTtiW2EubmFtZV09YTtvW0VdPXQuX2dlbmVyYXRlT0RhdGFNb2NrZGF0YUZvckVudGl0eVNldChiLG0pW0VdfSk7dGhpcy5fb01vY2tkYXRhPW99O2YucHJvdG90eXBlLl9nZW5lcmF0ZU9EYXRhTW9ja2RhdGFGb3JFbnRpdHlTZXQ9ZnVuY3Rpb24oZSxtKXt2YXIgdD10aGlzLHI9dGhpcy5fZ2V0Um9vdFVyaSgpLG89e307dmFyIEU9dGhpcy5fZmluZEVudGl0eVR5cGVzKG0pO3ZhciBjPXRoaXMuX2ZpbmRDb21wbGV4VHlwZXMobSk7cS5lYWNoKGUsZnVuY3Rpb24ocyxhKXtvW3NdPXQuX2dlbmVyYXRlRGF0YUZyb21FbnRpdHlTZXQoYSxFLGMpO3EuZWFjaChvW3NdLGZ1bmN0aW9uKGksYil7Yi5fX21ldGFkYXRhPXt1cmk6citzKyIoIit0Ll9jcmVhdGVLZXlzU3RyaW5nKGEsYikrIikiLHR5cGU6YS5zY2hlbWErIi4iK2EudHlwZX07cS5lYWNoKGEubmF2cHJvcHMsZnVuY3Rpb24oayxuKXtiW2tdPXtfX2RlZmVycmVkOnt1cmk6citzKyIoIit0Ll9jcmVhdGVLZXlzU3RyaW5nKGEsYikrIikvIitrfX19KX0pfSk7cmV0dXJuIG99O2YucHJvdG90eXBlLl9yZXNvbHZlTmF2aWdhdGlvbj1mdW5jdGlvbihlLEYsbil7dmFyIEU9dGhpcy5fbUVudGl0eVNldHNbZV07dmFyIE49RS5uYXZwcm9wc1tuXTtpZighTil7dGhyb3cgbmV3IEVycm9yKCI0MDQiKX12YXIgYT1bXTt2YXIgcD1OLmZyb20ucHJvcFJlZi5sZW5ndGg7aWYocD09PTApe2lmKE4udG8ubXVsdGlwbGljaXR5PT09IioiKXtyZXR1cm4gdGhpcy5fb01vY2tkYXRhW04udG8uZW50aXR5U2V0XX1lbHNle2EucHVzaCh0aGlzLl9vTW9ja2RhdGFbTi50by5lbnRpdHlTZXRdWzBdKTtyZXR1cm4gYX19cS5lYWNoKHRoaXMuX29Nb2NrZGF0YVtOLnRvLmVudGl0eVNldF0sZnVuY3Rpb24oSSx0KXt2YXIgYj10cnVlO2Zvcih2YXIgaT0wO2k8cDtpKyspe2lmKEZbTi5mcm9tLnByb3BSZWZbaV1dIT09dFtOLnRvLnByb3BSZWZbaV1dKXtiPWZhbHNlO2JyZWFrfX1pZihiKXthLnB1c2godCl9fSk7cmV0dXJuIGF9O2YucHJvdG90eXBlLnNpbXVsYXRlPWZ1bmN0aW9uKG0sdil7dmFyIHQ9dGhpczt0aGlzLl9zTWV0YWRhdGFVcmw9bTtpZighdnx8dHlwZW9mIHY9PT0ic3RyaW5nIil7dGhpcy5fc01vY2tkYXRhQmFzZVVybD12fWVsc2V7dGhpcy5fc01vY2tkYXRhQmFzZVVybD12LnNNb2NrZGF0YUJhc2VVcmw7dGhpcy5fYkdlbmVyYXRlTWlzc2luZ01vY2tEYXRhPXYuYkdlbmVyYXRlTWlzc2luZ01vY2tEYXRhfXRoaXMuX3JlZnJlc2hEYXRhKCk7dmFyIGg9ZnVuY3Rpb24oeCxIKXtpZih4LnJlcXVlc3RIZWFkZXJzWyJ4LWNzcmYtdG9rZW4iXT09PSJGZXRjaCIpe0hbIlgtQ1NSRi1Ub2tlbiJdPSI0MjQyNDI0MjQyNDI0MjQyNDI0MjQyNDI0MjQyNDI0MiJ9fTt2YXIgRz1mdW5jdGlvbihlLGspe3ZhciBGO3ZhciBFPXQuX21FbnRpdHlTZXRzW2VdO3ZhciBLPUUua2V5czt2YXIgYj1rLnNwbGl0KCcsJyk7aWYoYi5sZW5ndGghPT1LLmxlbmd0aHx8IXQuX2lzUmVxdWVzdGVkS2V5c1ZhbGlkKEUsYikpe3JldHVybiBGfWlmKGIubGVuZ3RoPT09MSYmIWJbMF0uc3BsaXQoJz0nKVsxXSl7Yj1bS1swXSsiPSIrYlswXV19cS5lYWNoKHQuX29Nb2NrZGF0YVtlXSxmdW5jdGlvbihJLG8pe2Zvcih2YXIgaT0wO2k8Yi5sZW5ndGg7aSsrKXt2YXIgYz1iW2ldLnNwbGl0KCc9Jyk7dmFyIHM9dC5fdHJpbShjWzBdKTtpZihxLmluQXJyYXkocyxLKT09PS0xKXtyZXR1cm4gdHJ1ZX12YXIgbj10Ll90cmltKGNbMV0pO3ZhciBPPW9bc107c3dpdGNoKEUua2V5c1R5cGVbc10pe2Nhc2UiRWRtLlN0cmluZyI6bj1uLnJlcGxhY2UoL15cJ3xcJyQvZywnJyk7YnJlYWs7Y2FzZSJFZG0uVGltZSI6Y2FzZSJFZG0uRGF0ZVRpbWUiOk89dC5fZ2V0RGF0ZVRpbWUoTyk7YnJlYWs7Y2FzZSJFZG0uSW50MTYiOmNhc2UiRWRtLkludDMyIjpjYXNlIkVkbS5JbnQ2NCI6Y2FzZSJFZG0uRGVjaW1hbCI6Y2FzZSJFZG0uQnl0ZSI6Y2FzZSJFZG0uRG91YmxlIjpjYXNlIkVkbS5TaW5nbGUiOmNhc2UiRWRtLlNCeXRlIjppZighdC5faXNWYWxpZE51bWJlcihuKSl7cmV0dXJuIGZhbHNlfW49cGFyc2VGbG9hdChuKTticmVhaztjYXNlIkVkbS5HdWlkIjpuPW4ucmVwbGFjZSgvXmd1aWRcJ3xcJyQvZywnJyk7YnJlYWs7Y2FzZSJFZG0uQm9vbGVhbiI6Y2FzZSJFZG0uQmluYXJ5IjpjYXNlIkVkbS5EYXRlVGltZU9mZnNldCI6ZGVmYXVsdDpuPW59aWYoTyE9PW4pe3JldHVybiB0cnVlfX1GPXtpbmRleDpJLGVudHJ5Om99O3JldHVybiBmYWxzZX0pO3JldHVybiBGfTt2YXIgcj1mdW5jdGlvbihlLGssdSl7dmFyIHM9ZS5uYW1lO2lmKHUpe3ZhciBuPWUubmF2cHJvcHNbdV19aWYobil7cz1uLnRvLmVudGl0eVNldH1yZXR1cm4gc307dmFyIGE9ZnVuY3Rpb24oeCxULGssdSl7dmFyIGU9SlNPTi5wYXJzZSh4LnJlcXVlc3RCb2R5KTtpZihlKXt2YXIgSz17fTtpZihrKXtLPXQuX3BhcnNlS2V5cyhrLHQuX21FbnRpdHlTZXRzW1RdKX10Ll9jb21wbGV0ZUtleSh0Ll9tRW50aXR5U2V0c1tUXSxLLGUpO3QuX2VuaGFuY2VXaXRoTWV0YWRhdGEodC5fbUVudGl0eVNldHNbVF0sW2VdKTtyZXR1cm4gZX1yZXR1cm4gbnVsbH07dmFyIFI9W107Ui5wdXNoKHttZXRob2Q6IkdFVCIscGF0aDpuZXcgUmVnRXhwKCJcXCRtZXRhZGF0YShbPyNdLiopPyIpLHJlc3BvbnNlOmZ1bmN0aW9uKHgpe3Euc2FwLnJlcXVpcmUoImpxdWVyeS5zYXAueG1sIik7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiBpbmNvbWluZyByZXF1ZXN0IGZvciB1cmw6ICIreC51cmwpO3ZhciBIPXsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24veG1sO2NoYXJzZXQ9dXRmLTgifTtoKHgsSCk7eC5yZXNwb25kKDIwMCxILHEuc2FwLnNlcmlhbGl6ZVhNTCh0Ll9vTWV0YWRhdGEpKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogMjAwLCAiK3Euc2FwLnNlcmlhbGl6ZVhNTCh0Ll9vTWV0YWRhdGEpKX19KTtSLnB1c2goe21ldGhvZDoiUE9TVCIscGF0aDpuZXcgUmVnRXhwKCJcXCRiYXRjaChbPyNdLiopPyIpLHJlc3BvbnNlOmZ1bmN0aW9uKHgpe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgYj1mdW5jdGlvbihVKXtzd2l0Y2goVSl7Y2FzZSAyMDA6cmV0dXJuIjIwMCBPSyI7Y2FzZSAyMDQ6cmV0dXJuIjIwNCBObyBDb250ZW50IjtjYXNlIDIwMTpyZXR1cm4iMjAxIENyZWF0ZWQiO2Nhc2UgNDAwOnJldHVybiI0MDAgQmFkIFJlcXVlc3QiO2Nhc2UgNDA0OnJldHVybiI0MDQgTm90IEZvdW5kIjtkZWZhdWx0OmJyZWFrfX07dmFyIEI9ZnVuY3Rpb24oQSxVKXt2YXIgVj1KU09OLnN0cmluZ2lmeShBLmRhdGEpfHwiIjtpZihVKXtyZXR1cm4iSFRUUC8xLjEgIitiKEEuc3RhdHVzQ29kZSkrIlxyXG5Db250ZW50LVR5cGU6ICIrVSsiXHJcbkNvbnRlbnQtTGVuZ3RoOiAiK1YubGVuZ3RoKyJcclxuZGF0YXNlcnZpY2V2ZXJzaW9uOiAyLjBcclxuXHJcbiIrVisiXHJcbiJ9cmV0dXJuIkhUVFAvMS4xICIrYihBLnN0YXR1c0NvZGUpKyJcclxuQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uXHJcbkNvbnRlbnQtTGVuZ3RoOiAiK1YubGVuZ3RoKyJcclxuZGF0YXNlcnZpY2V2ZXJzaW9uOiAyLjBcclxuXHJcbiIrVisiXHJcbiJ9O3ZhciBzPXgucmVxdWVzdEJvZHk7dmFyIG89bmV3IFJlZ0V4cCgiLS1iYXRjaF9bYS16MC05LV0qIik7dmFyIGM9by5leGVjKHMpWzBdO2lmKCEhYyl7dmFyIGU9W107dmFyIGw9cy5zcGxpdChjKTt2YXIgUz14LnVybC5zcGxpdCgiJCIpWzBdO3ZhciBuPW5ldyBSZWdFeHAoIlBVVCAoLiopIEhUVFAiKTt2YXIgcD1uZXcgUmVnRXhwKCJNRVJHRSAoLiopIEhUVFAiKTt2YXIgdT1uZXcgUmVnRXhwKCJQT1NUICguKikgSFRUUCIpO3ZhciB3PW5ldyBSZWdFeHAoIkRFTEVURSAoLiopIEhUVFAiKTt2YXIgeT1uZXcgUmVnRXhwKCJHRVQgKC4qKSBIVFRQIik7Zm9yKHZhciBpPTE7aTxsLmxlbmd0aC0xO2krKyl7dmFyIHo9bFtpXTtpZih5LnRlc3QoeikmJnouaW5kZXhPZigibXVsdGlwYXJ0L21peGVkIik9PT0tMSl7aWYobi50ZXN0KHopfHx1LnRlc3Qoeil8fHcudGVzdCh6KSl7eC5yZXNwb25kKDQwMCxudWxsLCJUaGUgRGF0YSBTZXJ2aWNlcyBSZXF1ZXN0IGNvdWxkIG5vdCBiZSB1bmRlcnN0b29kIGR1ZSB0byBtYWxmb3JtZWQgc3ludGF4Iik7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDQwMCIpO3JldHVybn12YXIgQT1xLnNhcC5zamF4KHt1cmw6Uyt5LmV4ZWMoeilbMV0sZGF0YVR5cGU6Impzb24ifSk7aWYoeS5leGVjKHopWzFdLmluZGV4T2YoJyRjb3VudCcpIT09LTEpe3ZhciBDPUIoQSwidGV4dC9wbGFpbiIpfWVsc2V7Qz1CKEEpfWUucHVzaCgiXHJcbkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vaHR0cFxyXG4iKyJDb250ZW50LUxlbmd0aDogIitDLmxlbmd0aCsiXHJcbiIrImNvbnRlbnQtdHJhbnNmZXItZW5jb2Rpbmc6IGJpbmFyeVxyXG5cclxuIitDKX1lbHNle3ZhciBFPVtdO3ZhciBGPXEuZXh0ZW5kKHRydWUse30sdC5fb01vY2tkYXRhKTt2YXIgSD1mdW5jdGlvbihVLEwsVil7dmFyIEE9cS5zYXAuc2pheCh7dHlwZTpWLHVybDpTK1UuZXhlYyhLKVsxXSxkYXRhVHlwZToianNvbiIsZGF0YTpMfSk7aWYoQS5zdGF0dXNDb2RlPT09NDAwfHxBLnN0YXR1c0NvZGU9PT00MDQpe3ZhciBQPSJcclxuSFRUUC8xLjEgIitiKEEuc3RhdHVzQ29kZSkrIlxyXG5Db250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cclxuQ29udGVudC1MZW5ndGg6IDBcclxuXHJcbiI7dGhyb3cgbmV3IEVycm9yKFApfUUucHVzaChCKEEpKX07dmFyIEk9ei5zdWJzdHJpbmcoei5pbmRleE9mKCJib3VuZGFyeT0iKSs5LHouaW5kZXhPZigiXHJcblxyXG4iKSk7dmFyIEo9ei5zcGxpdCgiLS0iK0kpO3RyeXtmb3IodmFyIGo9MTtqPEoubGVuZ3RoLTE7aisrKXt2YXIgSz1KW2pdO2lmKHkudGVzdChLKSl7dC5fb01vY2tkYXRhPUY7eC5yZXNwb25kKDQwMCxudWxsLCJUaGUgRGF0YSBTZXJ2aWNlcyBSZXF1ZXN0IGNvdWxkIG5vdCBiZSB1bmRlcnN0b29kIGR1ZSB0byBtYWxmb3JtZWQgc3ludGF4Iik7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDQwMCIpO3JldHVybn1lbHNlIGlmKG4udGVzdChLKSl7dmFyIEw9Sy5zdWJzdHJpbmcoSy5pbmRleE9mKCJ7IiksSy5sYXN0SW5kZXhPZigifSIpKzEpLnJlcGxhY2UoL1xcL2csJycpO0gobixMLCdQVVQnKX1lbHNlIGlmKHAudGVzdChLKSl7TD1LLnN1YnN0cmluZyhLLmluZGV4T2YoInsiKSxLLmxhc3RJbmRleE9mKCJ9IikrMSkucmVwbGFjZSgvXFwvZywnJyk7SChwLEwsJ1BVVCcpfWVsc2UgaWYodS50ZXN0KEspKXtMPUsuc3Vic3RyaW5nKEsuaW5kZXhPZigieyIpLEsubGFzdEluZGV4T2YoIn0iKSsxKS5yZXBsYWNlKC9cXC9nLCcnKTtIKHUsTCwnUE9TVCcpfWVsc2UgaWYody50ZXN0KEspKXtIKHcsbnVsbCwnREVMRVRFJyl9fXZhciBOPSJcclxuQ29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PWVqamVlZmZlMVxyXG5cclxuLS1lamplZWZmZTEiO2Zvcih2YXIgaz0wO2s8RS5sZW5ndGg7aysrKXtOKz0iXHJcbkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vaHR0cFxyXG4iKyJDb250ZW50LUxlbmd0aDogIitFW2tdLmxlbmd0aCsiXHJcbiIrImNvbnRlbnQtdHJhbnNmZXItZW5jb2Rpbmc6IGJpbmFyeVxyXG5cclxuIitFW2tdKyItLWVqamVlZmZlMSJ9Tis9Ii0tXHJcbiI7ZS5wdXNoKE4pfWNhdGNoKE8pe3QuX29Nb2NrZGF0YT1GO3ZhciBQPSJcclxuQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9odHRwXHJcbiIrIkNvbnRlbnQtTGVuZ3RoOiAiK08ubWVzc2FnZS5sZW5ndGgrIlxyXG4iKyJjb250ZW50LXRyYW5zZmVyLWVuY29kaW5nOiBiaW5hcnlcclxuXHJcbiIrTy5tZXNzYWdlO2UucHVzaChQKX19fXZhciBRPSItLWVqamVlZmZlMCI7Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe1ErPWVbaV0rIi0tZWpqZWVmZmUwIn1RKz0iLS0iO3ZhciBUPXsnQ29udGVudC1UeXBlJzoibXVsdGlwYXJ0L21peGVkOyBib3VuZGFyeT1lamplZWZmZTAifTtoKHgsVCk7eC5yZXNwb25kKDIwMixULFEpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAyMDIsICIrUSl9ZWxzZXt4LnJlc3BvbmQoMjAyKX19fSk7cS5lYWNoKHRoaXMuX21FbnRpdHlTZXRzLGZ1bmN0aW9uKEUsbyl7Ui5wdXNoKHttZXRob2Q6IkdFVCIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpL1xcJGNvdW50Lz8oLiopPyIpLHJlc3BvbnNlOmZ1bmN0aW9uKHgsRSx1KXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIHJlcXVlc3QgZm9yIHVybDogIit4LnVybCk7dmFyIEg9eyJDb250ZW50LVR5cGUiOiJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgifTtoKHgsSCk7eC5yZXNwb25kKDIwMCxILCIiK3QuX29Nb2NrZGF0YVtFXS5sZW5ndGgpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAyMDAsICIrdC5fb01vY2tkYXRhW0VdLmxlbmd0aCl9fSk7Ui5wdXNoKHttZXRob2Q6IkdFVCIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpLz8oXFw/KC4qKSk/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLHUpe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgSD17IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCJ9O2goeCxIKTt2YXIgYj10Ll9vTW9ja2RhdGFbRV07aWYoYil7dmFyIEY9e3Jlc3VsdHM6cS5leHRlbmQodHJ1ZSxbXSxiKX07aWYodSl7dmFyIFU9ZGVjb2RlVVJJQ29tcG9uZW50KHUpLnJlcGxhY2UoIj8iLCImIikuc3BsaXQoIiYiKTt0cnl7aWYoVS5sZW5ndGg+MSl7VT10Ll9vcmRlclF1ZXJ5T3B0aW9ucyhVKX1xLmVhY2goVSxmdW5jdGlvbihpLFEpe3QuX2FwcGx5UXVlcnlPbkNvbGxlY3Rpb24oRixRLEUpfSl9Y2F0Y2goZSl7eC5yZXNwb25kKHBhcnNlSW50KGUubWVzc2FnZXx8ZS5udW1iZXIsMTApKTtyZXR1cm59fXgucmVzcG9uZCgyMDAsSCxKU09OLnN0cmluZ2lmeSh7ZDpGfSkpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAyMDAsICIrSlNPTi5zdHJpbmdpZnkoe2Q6Rn0pKX1lbHNle3gucmVzcG9uZCg0MDQpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiA0MDQiKX19fSk7Ui5wdXNoKHttZXRob2Q6IkdFVCIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpXFwoKFteL1xcPyNdKylcXCkvPyhcXD8oLiopKT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsayx1KXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIHJlcXVlc3QgZm9yIHVybDogIit4LnVybCk7dmFyIEg9eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgifTtoKHgsSCk7dmFyIGI9cS5leHRlbmQodHJ1ZSx7fSxHKEUsaykpO2lmKCFxLmlzRW1wdHlPYmplY3QoYikpe2lmKHUpe3ZhciBVPWRlY29kZVVSSUNvbXBvbmVudCh1KS5yZXBsYWNlKCI/IiwiJiIpLnNwbGl0KCImIik7dHJ5e2lmKFUubGVuZ3RoPjEpe1U9dC5fb3JkZXJRdWVyeU9wdGlvbnMoVSl9cS5lYWNoKFUsZnVuY3Rpb24oaSxRKXtiLmVudHJ5PXQuX2FwcGx5UXVlcnlPbkVudHJ5KGIuZW50cnksUSxFKX0pfWNhdGNoKGUpe3gucmVzcG9uZChwYXJzZUludChlLm1lc3NhZ2V8fGUubnVtYmVyLDEwKSk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6ICIrcGFyc2VJbnQoZS5tZXNzYWdlfHxlLm51bWJlciwxMCkpO3JldHVybn19eC5yZXNwb25kKDIwMCxILEpTT04uc3RyaW5naWZ5KHtkOmIuZW50cnl9KSk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDIwMCwgIitKU09OLnN0cmluZ2lmeSh7ZDpiLmVudHJ5fSkpfWVsc2V7eC5yZXNwb25kKDQwNCk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDQwNCIpfX19KTtxLmVhY2goby5uYXZwcm9wcyxmdW5jdGlvbihuLE4pe1IucHVzaCh7bWV0aG9kOiJHRVQiLHBhdGg6bmV3IFJlZ0V4cCgiKCIrRSsiKVxcKChbXi9cXD8jXSspXFwpLygiK24rIikvXFwkY291bnQvPyguKik/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLGsscyx1KXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIHJlcXVlc3QgZm9yIHVybDogIit4LnVybCk7dmFyIEg9eyJDb250ZW50LVR5cGUiOiJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgifTtoKHgsSCk7dmFyIGU9RyhFLGspO2lmKGUpe3ZhciBiPXQuX3Jlc29sdmVOYXZpZ2F0aW9uKEUsZS5lbnRyeSxzKTt4LnJlc3BvbmQoMjAwLEgsIiIrYi5sZW5ndGgpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAyMDAsICIrYi5sZW5ndGgpfWVsc2V7eC5yZXNwb25kKDQwNCk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDQwNCIpfX19KTtSLnB1c2goe21ldGhvZDoiR0VUIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIilcXCgoW14vXFw/I10rKVxcKS8oIituKyIpLz8oXFw/KC4qKSk/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLGsscyx1KXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIHJlcXVlc3QgZm9yIHVybDogIit4LnVybCk7dmFyIEg9eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgifTtoKHgsSCk7dmFyIGI9RyhFLGRlY29kZVVSSUNvbXBvbmVudChrKSk7aWYoYil7dmFyIGMsRj17fTt0cnl7Yz10Ll9yZXNvbHZlTmF2aWdhdGlvbihFLGIuZW50cnkscyk7aWYoYyYmYy5sZW5ndGghPT0wKXt2YXIgaT10Ll9tRW50aXR5U2V0c1tFXS5uYXZwcm9wc1tzXS50by5tdWx0aXBsaWNpdHk7aWYoaT09PSIqIil7Rj17cmVzdWx0czpxLmV4dGVuZCh0cnVlLFtdLGMpfX1lbHNle0Y9cS5leHRlbmQodHJ1ZSx7fSxjWzBdKX1pZih1KXt2YXIgVT1kZWNvZGVVUklDb21wb25lbnQodSkucmVwbGFjZSgiPyIsIiYiKS5zcGxpdCgiJiIpO2lmKFUubGVuZ3RoPjEpe1U9dC5fb3JkZXJRdWVyeU9wdGlvbnMoVSl9aWYoaT09PSIqIil7cS5lYWNoKFUsZnVuY3Rpb24oSSxRKXt0Ll9hcHBseVF1ZXJ5T25Db2xsZWN0aW9uKEYsUSx0Ll9tRW50aXR5U2V0c1tFXS5uYXZwcm9wc1tzXS50by5lbnRpdHlTZXQpfSl9ZWxzZXtxLmVhY2goVSxmdW5jdGlvbihJLFEpe0Y9dC5fYXBwbHlRdWVyeU9uRW50cnkoRixRLHQuX21FbnRpdHlTZXRzW0VdLm5hdnByb3BzW3NdLnRvLmVudGl0eVNldCl9KX19fXgucmVzcG9uZCgyMDAsSCxKU09OLnN0cmluZ2lmeSh7ZDpGfSkpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAyMDAsICIrSlNPTi5zdHJpbmdpZnkoe2Q6Rn0pKTtyZXR1cm59Y2F0Y2goZSl7eC5yZXNwb25kKHBhcnNlSW50KGUubWVzc2FnZXx8ZS5udW1iZXIsMTApKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogIitwYXJzZUludChlLm1lc3NhZ2V8fGUubnVtYmVyLDEwKSk7cmV0dXJufX14LnJlc3BvbmQoNDA0KTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogNDA0Iil9fSl9KTtSLnB1c2goe21ldGhvZDoiUE9TVCIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpKFxcKChbXi9cXD8jXSspXFwpLz8oLiopPyk/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLGIsayxuKXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIGNyZWF0ZSByZXF1ZXN0IGZvciB1cmw6ICIreC51cmwpO3ZhciBzPW51bGw7dmFyIGM9bnVsbDt2YXIgaT00MDU7dmFyIFQ9cihvLGRlY29kZVVSSUNvbXBvbmVudChrKSxuKTtpZihUKXt2YXIgZT1hKHgsVCxrLG4pO2lmKGUpe3ZhciB1PXQuX2dldFJvb3RVcmkoKStUKyIoIit0Ll9jcmVhdGVLZXlzU3RyaW5nKHQuX21FbnRpdHlTZXRzW1RdLGUpKyIpIjtzPUpTT04uc3RyaW5naWZ5KHtkOmUsdXJpOnV9KTtjPXsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04In07dC5fb01vY2tkYXRhW1RdPXQuX29Nb2NrZGF0YVtUXS5jb25jYXQoW2VdKTtpPTIwMX19eC5yZXNwb25kKGksYyxzKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogIitpKyIsICIrcyl9fSk7Ui5wdXNoKHttZXRob2Q6IlBVVCIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpXFwoKFteL1xcPyNdKylcXCkvPyguKik/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLGssbil7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiBpbmNvbWluZyB1cGRhdGUgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgaT00MDU7dmFyIHM9bnVsbDt2YXIgYj1udWxsO3ZhciBUPXIobyxkZWNvZGVVUklDb21wb25lbnQoayksbik7aWYoVCl7dmFyIGU9YSh4LFQsayxuKTtpZihlKXt2YXIgdT10Ll9nZXRSb290VXJpKCkrVCsiKCIrdC5fY3JlYXRlS2V5c1N0cmluZyh0Ll9tRW50aXR5U2V0c1tUXSxlKSsiKSI7Yj17IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCJ9O3ZhciBjPUcoRSxrKTtpZihjKXt0Ll9vTW9ja2RhdGFbRV1bYy5pbmRleF09ZX1pPTIwNH19eC5yZXNwb25kKGksYixzKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogIitpKyIsICIrcyl9fSk7Ui5wdXNoKHttZXRob2Q6IkRFTEVURSIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpXFwoKFteL1xcPyNdKylcXCkvPyguKik/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLGssdSl7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiBpbmNvbWluZyBkZWxldGUgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgaT0yMDA7dmFyIGU9RyhFLGRlY29kZVVSSUNvbXBvbmVudChrKSk7aWYoZSl7dC5fb01vY2tkYXRhW0VdLnNwbGljZShlLmluZGV4LDEpfWVsc2V7aT00MDB9eC5yZXNwb25kKGksbnVsbCxudWxsKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogIitpKX19KX0pO3RoaXMuc2V0UmVxdWVzdHMoUil9O2YucHJvdG90eXBlLl9vcmRlclF1ZXJ5T3B0aW9ucz1mdW5jdGlvbih1KXt2YXIgRixpLHMsdCxvLFMsZSxhLE89W107cS5lYWNoKHUsZnVuY3Rpb24oSSxRKXtzd2l0Y2goUS5zcGxpdCgnPScpWzBdKXtjYXNlIiR0b3AiOnQ9cS5pbkFycmF5KFEsdSk7YnJlYWs7Y2FzZSIkc2tpcCI6cz1xLmluQXJyYXkoUSx1KTticmVhaztjYXNlIiRvcmRlcmJ5IjpvPXEuaW5BcnJheShRLHUpO2JyZWFrO2Nhc2UiJGZpbHRlciI6Rj1xLmluQXJyYXkoUSx1KTticmVhaztjYXNlIiRzZWxlY3QiOlM9cS5pbkFycmF5KFEsdSk7YnJlYWs7Y2FzZSIkaW5saW5lY291bnQiOmk9cS5pbkFycmF5KFEsdSk7YnJlYWs7Y2FzZSIkZXhwYW5kIjplPXEuaW5BcnJheShRLHUpO2JyZWFrO2Nhc2UiJGZvcm1hdCI6YT1xLmluQXJyYXkoUSx1KTticmVhaztkZWZhdWx0OmlmKFEuc3BsaXQoJz0nKVswXS5pbmRleE9mKCckJyk9PT0wKXtxLnNhcC5sb2cuZXJyb3IoIkludmFsaWQgc3lzdGVtIHF1ZXJ5IG9wdGlvbnMgdmFsdWUhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX19fSk7aWYoRj49MClPLnB1c2godVtGXSk7aWYoaT49MClPLnB1c2godVtpXSk7aWYocz49MClPLnB1c2godVtzXSk7aWYodD49MClPLnB1c2godVt0XSk7aWYoUz49MClPLnB1c2godVtTXSk7aWYobz49MClPLnB1c2godVtvXSk7aWYoZT49MClPLnB1c2godVtlXSk7aWYoYT49MClPLnB1c2godVthXSk7cmV0dXJuIE99O2YucHJvdG90eXBlLl9yZW1vdmVBbGxSZXF1ZXN0SGFuZGxlcnM9ZnVuY3Rpb24oKXt2YXIgcj10aGlzLmdldFJlcXVlc3RzKCk7dmFyIGw9ci5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsO2krKyl7Zi5fcmVtb3ZlUmVzcG9uc2UocltpXS5yZXNwb25zZSl9fTtmLnByb3RvdHlwZS5fcmVtb3ZlQWxsRmlsdGVycz1mdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8dGhpcy5fYUZpbHRlcnMubGVuZ3RoO2krKyl7Zi5fcmVtb3ZlRmlsdGVyKHRoaXMuX2FGaWx0ZXJzW2ldKX10aGlzLl9hRmlsdGVycz1udWxsfTtmLnByb3RvdHlwZS5fYWRkUmVxdWVzdEhhbmRsZXI9ZnVuY3Rpb24obSxwLHIpe209bT9tLnRvVXBwZXJDYXNlKCk6bTtpZih0eXBlb2YgbSE9PSJzdHJpbmciKXt0aHJvdyBuZXcgRXJyb3IoIkVycm9yIGluIHJlcXVlc3QgY29uZmlndXJhdGlvbjogdmFsdWUgb2YgJ21ldGhvZCcgaGFzIHRvIGJlIGEgc3RyaW5nIil9aWYoISh0eXBlb2YgcD09PSJzdHJpbmcifHxwIGluc3RhbmNlb2YgUmVnRXhwKSl7dGhyb3cgbmV3IEVycm9yKCJFcnJvciBpbiByZXF1ZXN0IGNvbmZpZ3VyYXRpb246IHZhbHVlIG9mICdwYXRoJyBoYXMgdG8gYmUgYSBzdHJpbmcgb3IgYSByZWd1bGFyIGV4cHJlc3Npb24iKX1pZih0eXBlb2YgciE9PSJmdW5jdGlvbiIpe3Rocm93IG5ldyBFcnJvcigiRXJyb3IgaW4gcmVxdWVzdCBjb25maWd1cmF0aW9uOiB2YWx1ZSBvZiAncmVzcG9uc2UnIGhhcyB0byBiZSBhIGZ1bmN0aW9uIil9dmFyIHU9dGhpcy5fZ2V0Um9vdFVyaSgpO3U9dSYmbmV3IFJlZ0V4cCh0aGlzLl9lc2NhcGVTdHJpbmdGb3JSZWdFeHAodSkpO2lmKHAmJiEocCBpbnN0YW5jZW9mIFJlZ0V4cCkpe3A9bmV3IFJlZ0V4cCh0aGlzLl9jcmVhdGVSZWdFeHBQYXR0ZXJuKHApKX12YXIgUj10aGlzLl9jcmVhdGVSZWdFeHAodT91LnNvdXJjZStwLnNvdXJjZTpwLnNvdXJjZSk7dGhpcy5fYWRkRmlsdGVyKHRoaXMuX2NyZWF0ZUZpbHRlcihtLFIpKTt0aGlzLl9vU2VydmVyLnJlc3BvbmRXaXRoKG0sUixyKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGFkZGluZyAiK20rIiByZXF1ZXN0IGhhbmRsZXIgZm9yIHBhdHRlcm4gIitSKX07Zi5wcm90b3R5cGUuX2NyZWF0ZVJlZ0V4cD1mdW5jdGlvbihwKXtyZXR1cm4gbmV3IFJlZ0V4cCgiXiIrcCsiJCIpfTtmLnByb3RvdHlwZS5fY3JlYXRlUmVnRXhwUGF0dGVybj1mdW5jdGlvbihwKXtyZXR1cm4gcC5yZXBsYWNlKC86KFtcd1xkXSspL2csIihbXlwvXSspIil9O2YucHJvdG90eXBlLl9lc2NhcGVTdHJpbmdGb3JSZWdFeHA9ZnVuY3Rpb24ocyl7cmV0dXJuIHMucmVwbGFjZSgvW1xcXC9cW1xdXHtcfVwoXClcLVwqXCtcP1wuXF5cJFx8XS9nLCJcXCQmIil9O2YucHJvdG90eXBlLl90cmltPWZ1bmN0aW9uKHMpe3JldHVybiBzJiZzLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKX07Zi5wcm90b3R5cGUuX2lzVmFsaWROdW1iZXI9ZnVuY3Rpb24ocyl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQocykpJiZpc0Zpbml0ZShzKX07Zi5wcm90b3R5cGUuX2dldERhdGVUaW1lPWZ1bmN0aW9uKHMpe2lmKCFzKXJldHVybjtyZXR1cm4iZGF0ZXRpbWUnIituZXcgRGF0ZShOdW1iZXIocy5yZXBsYWNlKCIvRGF0ZSgiLCcnKS5yZXBsYWNlKCIpLyIsJycpKSkudG9KU09OKCkuc3Vic3RyaW5nKDAsMTkpKyInIn07Zi5wcm90b3R5cGUuX2dldEpzb25EYXRlPWZ1bmN0aW9uKFMpe2lmKCFTKXJldHVybjt2YXIgbj1mdW5jdGlvbihzKXt2YXIgYT1xLm1hcChzLnNsaWNlKDAsLTUpLnNwbGl0KC9cRC8pLGZ1bmN0aW9uKGkpe3JldHVybiBwYXJzZUludChpLDEwKXx8MH0pO2FbMV0tPTE7YT1uZXcgRGF0ZShEYXRlLlVUQy5hcHBseShEYXRlLGEpKTt2YXIgbz1zLnNsaWNlKC01KTt2YXIgYj1wYXJzZUludChvLDEwKS8xMDA7aWYoby5zbGljZSgwLDEpPT09IisiKXtiKj0tMX1hLnNldEhvdXJzKGEuZ2V0SG91cnMoKStiKTtyZXR1cm4gYS5nZXRUaW1lKCl9O3JldHVybiIvRGF0ZSgiK24oUy5zdWJzdHJpbmcoImRhdGV0aW1lJyIubGVuZ3RoLFMubGVuZ3RoLTEpKSsiKS8ifTtmLnByb3RvdHlwZS5fYWRkRmlsdGVyPWZ1bmN0aW9uKEYpe3RoaXMuX2FGaWx0ZXJzLnB1c2goRik7Zi5fYWRkRmlsdGVyKEYpfTtmLnByb3RvdHlwZS5fY3JlYXRlRmlsdGVyPWZ1bmN0aW9uKHIsUil7cmV0dXJuIGZ1bmN0aW9uKG0sdSxhLFUscCl7cmV0dXJuIHI9PT1tJiZSLnRlc3QodSl9fTtmLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKHMpe00ucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc3RvcCgpO3ZhciBTPWYuX2FTZXJ2ZXJzO3ZhciBpPXEuaW5BcnJheSh0aGlzLFMpO1Muc3BsaWNlKGksMSl9O2YuX2FGaWx0ZXJzPVtdO2YuX29TZXJ2ZXI9bnVsbDtmLl9hU2VydmVycz1bXTtmLl9nZXRJbnN0YW5jZT1mdW5jdGlvbigpe2lmKCF0aGlzLl9vU2VydmVyKXt0aGlzLl9vU2VydmVyPXdpbmRvdy5zaW5vbi5mYWtlU2VydmVyLmNyZWF0ZSgpO3RoaXMuX29TZXJ2ZXIuYXV0b1Jlc3BvbmQ9dHJ1ZX1yZXR1cm4gdGhpcy5fb1NlcnZlcn07Zi5jb25maWc9ZnVuY3Rpb24oYyl7dmFyIHM9dGhpcy5fZ2V0SW5zdGFuY2UoKTtzLmF1dG9SZXNwb25kPWMuYXV0b1Jlc3BvbmQ9PT1mYWxzZT9mYWxzZTp0cnVlO3MuYXV0b1Jlc3BvbmRBZnRlcj1jLmF1dG9SZXNwb25kQWZ0ZXJ8fDA7cy5mYWtlSFRUUE1ldGhvZHM9Yy5mYWtlSFRUUE1ldGhvZHN8fGZhbHNlfTtmLnJlc3BvbmQ9ZnVuY3Rpb24oKXt0aGlzLl9nZXRJbnN0YW5jZSgpLnJlc3BvbmQoKX07Zi5zdGFydEFsbD1mdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8dGhpcy5fYVNlcnZlcnMubGVuZ3RoO2krKyl7dGhpcy5fYVNlcnZlcnNbaV0uc3RhcnQoKX19O2Yuc3RvcEFsbD1mdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8dGhpcy5fYVNlcnZlcnMubGVuZ3RoO2krKyl7dGhpcy5fYVNlcnZlcnNbaV0uc3RvcCgpfXRoaXMuX2dldEluc3RhbmNlKCkucmVzdG9yZSgpO3RoaXMuX29TZXJ2ZXI9bnVsbH07Zi5kZXN0cm95QWxsPWZ1bmN0aW9uKCl7dGhpcy5zdG9wQWxsKCk7Zm9yKHZhciBpPTA7aTx0aGlzLl9hU2VydmVycy5sZW5ndGg7aSsrKXt0aGlzLl9hU2VydmVyc1tpXS5kZXN0cm95KCl9fTtmLl9hZGRGaWx0ZXI9ZnVuY3Rpb24oRil7dGhpcy5fYUZpbHRlcnMucHVzaChGKX07Zi5fcmVtb3ZlRmlsdGVyPWZ1bmN0aW9uKEYpe3ZhciBpPXEuaW5BcnJheShGLHRoaXMuX2FGaWx0ZXJzKTtpZihpIT09LTEpe3RoaXMuX2FGaWx0ZXJzLnNwbGljZShpLDEpfXJldHVybiBpIT09LTF9O2YuX3JlbW92ZVJlc3BvbnNlPWZ1bmN0aW9uKHIpe3ZhciBSPXRoaXMuX29TZXJ2ZXIucmVzcG9uc2VzO3ZhciBsPVIubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bDtpKyspe2lmKFJbaV0ucmVzcG9uc2U9PT1yKXtSLnNwbGljZShpLDEpO3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9O3dpbmRvdy5zaW5vbi5GYWtlWE1MSHR0cFJlcXVlc3QudXNlRmlsdGVycz10cnVlO3dpbmRvdy5zaW5vbi5GYWtlWE1MSHR0cFJlcXVlc3QuYWRkRmlsdGVyKGZ1bmN0aW9uKG0sdSxhLFUscCl7dmFyIEY9Zi5fYUZpbHRlcnM7Zm9yKHZhciBpPTA7aTxGLmxlbmd0aDtpKyspe3ZhciBiPUZbaV07aWYoYihtLHUsYSxVLHApKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfSk7dmFyIGc9ZnVuY3Rpb24oRil7aWYoLy4qXC5qc29uJC9pLnRlc3QoRikpe3JldHVybiJKU09OIn1pZigvLipcLnhtbCQvaS50ZXN0KEYpKXtyZXR1cm4iWE1MIn1pZigvLiptZXRhZGF0YSQvaS50ZXN0KEYpKXtyZXR1cm4iWE1MIn1yZXR1cm4gbnVsbH07d2luZG93LnNpbm9uLkZha2VYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUucmVzcG9uZEZpbGU9ZnVuY3Rpb24ocyxoLEYpe3ZhciByPXEuc2FwLnNqYXgoe3VybDpGLGRhdGFUeXBlOiJ0ZXh0In0pO2lmKCFyLnN1Y2Nlc3MpdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgbG9hZCBmaWxlIGZyb206ICIrRik7dmFyIG89ci5kYXRhO3ZhciBtPWcoRik7aWYodGhpc1sicmVzcG9uZCIrbV0pe3RoaXNbInJlc3BvbmQiK21dKHMsaCxvKX1lbHNle3RoaXMucmVzcG9uZChzLGgsbyl9fTt3aW5kb3cuc2lub24uRmFrZVhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5yZXNwb25kSlNPTj1mdW5jdGlvbihzLGgsail7aD1ofHx7fTtoWyJDb250ZW50LVR5cGUiXT1oWyJDb250ZW50LVR5cGUiXXx8ImFwcGxpY2F0aW9uL2pzb24iO3RoaXMucmVzcG9uZChzLGgsdHlwZW9mIGo9PT0ic3RyaW5nIj9qOkpTT04uc3RyaW5naWZ5KGopKX07d2luZG93LnNpbm9uLkZha2VYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUucmVzcG9uZFhNTD1mdW5jdGlvbihzLGgseCl7aD1ofHx7fTtoWyJDb250ZW50LVR5cGUiXT1oWyJDb250ZW50LVR5cGUiXXx8ImFwcGxpY2F0aW9uL3htbCI7dGhpcy5yZXNwb25kKHMsaCx4KX07cmV0dXJuIGZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQ2xpZW50TW9kZWwnKSl7Ci8qIQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkNsaWVudE1vZGVsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0NsaWVudE1vZGVsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9DbGllbnRDb250ZXh0QmluZGluZycsJy4vQ2xpZW50TGlzdEJpbmRpbmcnLCcuL0NsaWVudFByb3BlcnR5QmluZGluZycsJy4vQ2xpZW50VHJlZUJpbmRpbmcnLCcuL01vZGVsJ10sZnVuY3Rpb24ocSxDLGEsYixjLE0peyJ1c2Ugc3RyaWN0Ijt2YXIgZD1NLmV4dGVuZCgic2FwLnVpLm1vZGVsLkNsaWVudE1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oRCl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5iQ2FjaGU9dHJ1ZTt0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXM9W107aWYodHlwZW9mIEQ9PSJzdHJpbmciKXt0aGlzLmxvYWREYXRhKEQpfX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJsb2FkRGF0YSIsInNldERhdGEiLCJnZXREYXRhIiwic2V0UHJvcGVydHkiLCJmb3JjZU5vQ2FjaGUiXX19KTtkLnByb3RvdHlwZS5nZXREYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0RhdGF9O2QucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe3ZhciBCPXRoaXMuYUJpbmRpbmdzLnNsaWNlKDApO3EuZWFjaChCLGZ1bmN0aW9uKGksbyl7by5jaGVja1VwZGF0ZShmKX0pfTtkLnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nQ29udGV4dD1mdW5jdGlvbihwLG8sUCxmKXtpZih0eXBlb2Ygbz09ImZ1bmN0aW9uIil7Zj1vO289bnVsbH1pZih0eXBlb2YgUD09ImZ1bmN0aW9uIil7Zj1QO1A9bnVsbH12YXIgcz10aGlzLnJlc29sdmUocCxvKSxuPShzPT11bmRlZmluZWQpP3VuZGVmaW5lZDp0aGlzLmdldENvbnRleHQocz9zOiIvIik7aWYoIW4pe249bnVsbH1mKG4pfTtkLnByb3RvdHlwZS5fYWpheD1mdW5jdGlvbihwKXt2YXIgdD10aGlzO2lmKHRoaXMuYkRlc3Ryb3llZCl7cmV0dXJufWZ1bmN0aW9uIHcoZil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGk9cS5pbkFycmF5KHIsdC5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzKTtpZihpPi0xKXt0LmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMuc3BsaWNlKGksMSl9aWYoIShyJiZyLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGwpKXtmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fXAuc3VjY2Vzcz13KHAuc3VjY2Vzcyk7cC5lcnJvcj13KHAuZXJyb3IpO3ZhciByPXEuYWpheChwKTtpZihwLmFzeW5jKXt0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMucHVzaChyKX19O2QucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMpe2Zvcih2YXIgaT10aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMubGVuZ3RoLTE7aT49MDtpLS0pe3ZhciByPXRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlc1tpXTtpZihyJiZyLmFib3J0KXtyLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGw9dHJ1ZTtyLmFib3J0KCl9fWRlbGV0ZSB0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXN9TS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2QucHJvdG90eXBlLmRlc3Ryb3lCaW5kaW5nQ29udGV4dD1mdW5jdGlvbihvKXt9O2QucHJvdG90eXBlLmJpbmRDb250ZXh0PWZ1bmN0aW9uKHAsbyxQKXt2YXIgQj1uZXcgQyh0aGlzLHAsbyxQKTtyZXR1cm4gQn07ZC5wcm90b3R5cGUudXBkYXRlQmluZGluZ3M9ZnVuY3Rpb24oZil7dGhpcy5jaGVja1VwZGF0ZShmKX07ZC5wcm90b3R5cGUuZm9yY2VOb0NhY2hlPWZ1bmN0aW9uKGYpe3RoaXMuYkNhY2hlPSFmfTtyZXR1cm4gZH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5hbmFseXRpY3MuT0RhdGFNb2RlbEFkYXB0ZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuYW5hbHl0aWNzLk9EYXRhTW9kZWxBZGFwdGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2FuYWx5dGljcy9PRGF0YU1vZGVsQWRhcHRlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQW5hbHl0aWNhbEJpbmRpbmcnLCIuL1RyZWVCaW5kaW5nQWRhcHRlciIsJ3NhcC91aS9tb2RlbC9vZGF0YS9PRGF0YU1vZGVsJywnLi9vZGF0YTRhbmFseXRpY3MnXSxmdW5jdGlvbihxLEEsVCxPLG8peyJ1c2Ugc3RyaWN0Ijt2YXIgYT1mdW5jdGlvbigpe2lmKCEodGhpcyBpbnN0YW5jZW9mIE8mJnRoaXMuZ2V0QW5hbHl0aWNhbEV4dGVuc2lvbnM9PT11bmRlZmluZWQpKXtyZXR1cm59Zm9yKHZhciBmIGluIGEucHJvdG90eXBlKXtpZihhLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShmKSl7dGhpc1tmXT1hLnByb3RvdHlwZVtmXX19aWYodGhpcy5pc0NvdW50U3VwcG9ydGVkKCkpe3Euc2FwLmxvZy5pbmZvKCJPRGF0YU1vZGVsQWRhcHRlcjogc3dpdGNoZWQgT0RhdGFNb2RlbCB0byB1c2UgaW5saW5lY291bnQgKG1hbmRhdG9yeSBmb3IgYW5hbHl0aWNhbCBiaW5kaW5ncykiKTt0aGlzLnNldENvdW50U3VwcG9ydGVkKGZhbHNlKX19O2EucHJvdG90eXBlLmJpbmRMaXN0PWZ1bmN0aW9uKHAsYyxzLGYsUCl7aWYoUCYmUC5hbmFseXRpY2FsSW5mbyl7dmFyIGI9bmV3IEEodGhpcyxwLGMscyxmLFApO1QuYXBwbHkoYik7cmV0dXJuIGJ9ZWxzZXtyZXR1cm4gTy5wcm90b3R5cGUuYmluZExpc3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfX07YS5wcm90b3R5cGUuYmluZFRyZWU9ZnVuY3Rpb24ocCxjLGYsUCl7aWYoUCYmUC5hbmFseXRpY2FsSW5mbyl7dmFyIGI9bmV3IEEodGhpcyxwLGMsW10sZixQKTtyZXR1cm4gYn1lbHNle3JldHVybiBPLnByb3RvdHlwZS5iaW5kVHJlZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fTthLnByb3RvdHlwZS5nZXRBbmFseXRpY2FsRXh0ZW5zaW9ucz1mdW5jdGlvbigpe2lmKHRoaXMub09EYXRhNFNBUEFuYWx5dGljc01vZGVsIT11bmRlZmluZWQmJnRoaXMub09EYXRhNFNBUEFuYWx5dGljc01vZGVsIT1udWxsKXJldHVybiB0aGlzLm9PRGF0YTRTQVBBbmFseXRpY3NNb2RlbDt2YXIgcz1udWxsO2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe3ZhciBiPWFyZ3VtZW50c1swXTt2YXIgcj1xLnNhcC5zeW5jR2V0VGV4dChiKTtpZihyLnN1Y2Nlc3Mpe3M9ci5kYXRhfX10cnl7dGhpcy5vT0RhdGE0U0FQQW5hbHl0aWNzTW9kZWw9bmV3IG8uTW9kZWwobmV3IG8uTW9kZWwuUmVmZXJlbmNlQnlNb2RlbCh0aGlzKSxzKX1jYXRjaChlKXt0aHJvdyJGYWlsZWQgdG8gaW5zdGFudGlhdGUgYW5hbHl0aWNhbCBleHRlbnNpb25zIGZvciBnaXZlbiBPRGF0YSBtb2RlbDogIitlLm1lc3NhZ2V9cmV0dXJuIHRoaXMub09EYXRhNFNBUEFuYWx5dGljc01vZGVsfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05Nb2RlbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05Nb2RlbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9qc29uL0pTT05Nb2RlbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9DbGllbnRNb2RlbCcsJy4vSlNPTkxpc3RCaW5kaW5nJywnLi9KU09OUHJvcGVydHlCaW5kaW5nJywnLi9KU09OVHJlZUJpbmRpbmcnXSxmdW5jdGlvbihxLEMsSixhLGIpeyJ1c2Ugc3RyaWN0Ijt2YXIgYz1DLmV4dGVuZCgic2FwLnVpLm1vZGVsLmpzb24uSlNPTk1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZCl7Qy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoZCYmdHlwZW9mIGQ9PSJvYmplY3QiKXt0aGlzLnNldERhdGEoZCl9fSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbInNldEpTT04iLCJnZXRKU09OIl19fSk7Yy5wcm90b3R5cGUuc2V0RGF0YT1mdW5jdGlvbihkLG0pe2lmKG0pe3RoaXMub0RhdGE9cS5leHRlbmQodHJ1ZSx7fSx0aGlzLm9EYXRhLGQpfWVsc2V7dGhpcy5vRGF0YT1kfXRoaXMuY2hlY2tVcGRhdGUoKX07Yy5wcm90b3R5cGUuc2V0SlNPTj1mdW5jdGlvbihqLG0pe3ZhciBvO3RyeXtvPXEucGFyc2VKU09OKGopO3RoaXMuc2V0RGF0YShvLG0pfWNhdGNoKGUpe3Euc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiBKU09OIHBhcnNlIEVycm9yOiAiK2UpO3RoaXMuZmlyZVBhcnNlRXJyb3Ioe3VybDoiIixlcnJvckNvZGU6LTEscmVhc29uOiIiLHNyY1RleHQ6ZSxsaW5lOi0xLGxpbmVwb3M6LTEsZmlsZXBvczotMX0pfX07Yy5wcm90b3R5cGUuZ2V0SlNPTj1mdW5jdGlvbigpe3JldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLm9EYXRhKX07Yy5wcm90b3R5cGUubG9hZERhdGE9ZnVuY3Rpb24odSxwLEEsdCxtLGQsaCl7dmFyIGU9dGhpcztBPShBIT09ZmFsc2UpO3Q9dHx8IkdFVCI7ZD1kPT09dW5kZWZpbmVkP3RoaXMuYkNhY2hlOmQ7dGhpcy5maXJlUmVxdWVzdFNlbnQoe3VybDp1LHR5cGU6dCxhc3luYzpBLGhlYWRlcnM6aCxpbmZvOiJjYWNoZT0iK2QrIjtiTWVyZ2U9IittLGluZm9PYmplY3Q6e2NhY2hlOmQsbWVyZ2U6bX19KTt0aGlzLl9hamF4KHt1cmw6dSxhc3luYzpBLGRhdGFUeXBlOidqc29uJyxjYWNoZTpkLGRhdGE6cCxoZWFkZXJzOmgsdHlwZTp0LHN1Y2Nlc3M6ZnVuY3Rpb24oRCl7aWYoIUQpe3Euc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiBObyBkYXRhIHdhcyByZXRyaWV2ZWQgYnkgc2VydmljZTogIit1KX1lLnNldERhdGEoRCxtKTtlLmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6dSx0eXBlOnQsYXN5bmM6QSxoZWFkZXJzOmgsaW5mbzoiY2FjaGU9IitkKyI7Yk1lcmdlPSIrbSxpbmZvT2JqZWN0OntjYWNoZTpkLG1lcmdlOm19LHN1Y2Nlc3M6dHJ1ZX0pfSxlcnJvcjpmdW5jdGlvbihYLGYsZyl7dmFyIEU9e21lc3NhZ2U6ZixzdGF0dXNDb2RlOlguc3RhdHVzLHN0YXR1c1RleHQ6WC5zdGF0dXNUZXh0LHJlc3BvbnNlVGV4dDpYLnJlc3BvbnNlVGV4dH07cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6ICIrZixYLnJlc3BvbnNlVGV4dCsiLCIrWC5zdGF0dXMrIiwiK1guc3RhdHVzVGV4dCk7ZS5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOnUsdHlwZTp0LGFzeW5jOkEsaGVhZGVyczpoLGluZm86ImNhY2hlPSIrZCsiO2JNZXJnZT0iK20saW5mb09iamVjdDp7Y2FjaGU6ZCxtZXJnZTptfSxzdWNjZXNzOmZhbHNlLGVycm9yb2JqZWN0OkV9KTtlLmZpcmVSZXF1ZXN0RmFpbGVkKEUpfX0pfTtjLnByb3RvdHlwZS5iaW5kUHJvcGVydHk9ZnVuY3Rpb24ocCxvLFApe3ZhciBCPW5ldyBhKHRoaXMscCxvLFApO3JldHVybiBCfTtjLnByb3RvdHlwZS5iaW5kTGlzdD1mdW5jdGlvbihwLG8scyxmLFApe3ZhciBCPW5ldyBKKHRoaXMscCxvLHMsZixQKTtyZXR1cm4gQn07Yy5wcm90b3R5cGUuYmluZFRyZWU9ZnVuY3Rpb24ocCxvLGYsUCl7dmFyIEI9bmV3IGIodGhpcyxwLG8sZixQKTtyZXR1cm4gQn07Yy5wcm90b3R5cGUuc2V0UHJvcGVydHk9ZnVuY3Rpb24ocCx2LG8pe3ZhciBPPXAuc3Vic3RyaW5nKDAscC5sYXN0SW5kZXhPZigiLyIpKSxQPXAuc3Vic3RyKHAubGFzdEluZGV4T2YoIi8iKSsxKTtpZighdGhpcy5yZXNvbHZlKHAsbykpe3JldHVybn1pZighTyYmIW8pe289dGhpcy5vRGF0YX12YXIgZD10aGlzLl9nZXRPYmplY3QoTyxvKTtpZihkKXtkW1BdPXY7dGhpcy5jaGVja1VwZGF0ZSgpfX07Yy5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24ocCxvKXtyZXR1cm4gdGhpcy5fZ2V0T2JqZWN0KHAsbyl9O2MucHJvdG90eXBlLl9nZXRPYmplY3Q9ZnVuY3Rpb24ocCxvKXt2YXIgbj10aGlzLmlzTGVnYWN5U3ludGF4KCk/dGhpcy5vRGF0YTpudWxsO2lmKG8gaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuQ29udGV4dCl7bj10aGlzLl9nZXRPYmplY3Qoby5nZXRQYXRoKCkpfWVsc2UgaWYobyl7bj1vfWlmKCFwKXtyZXR1cm4gbn12YXIgUD1wLnNwbGl0KCIvIiksaT0wO2lmKCFQWzBdKXtuPXRoaXMub0RhdGE7aSsrfXdoaWxlKG4mJlBbaV0pe249bltQW2ldXTtpKyt9cmV0dXJuIG59O2MucHJvdG90eXBlLmlzTGlzdD1mdW5jdGlvbihwLG8pe3ZhciBBPXRoaXMucmVzb2x2ZShwLG8pO3JldHVybiBxLmlzQXJyYXkodGhpcy5fZ2V0T2JqZWN0KEEpKX07cmV0dXJuIGN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwueG1sLlhNTE1vZGVsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnhtbC5YTUxNb2RlbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC94bWwvWE1MTW9kZWwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvQ2xpZW50TW9kZWwnLCcuL1hNTExpc3RCaW5kaW5nJywnLi9YTUxQcm9wZXJ0eUJpbmRpbmcnLCcuL1hNTFRyZWVCaW5kaW5nJywnanF1ZXJ5LnNhcC54bWwnXSxmdW5jdGlvbihxLEMsWCxhLGIpeyJ1c2Ugc3RyaWN0Ijt2YXIgYz1DLmV4dGVuZCgic2FwLnVpLm1vZGVsLnhtbC5YTUxNb2RlbCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGQpe0MuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMub05hbWVTcGFjZXM9bnVsbDtpZihkJiZkLmRvY3VtZW50RWxlbWVudCl7dGhpcy5zZXREYXRhKGQpfX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJzZXRYTUwiLCJnZXRYTUwiLCJzZXROYW1lU3BhY2UiXX19KTtjLnByb3RvdHlwZS5zZXRYTUw9ZnVuY3Rpb24oeCl7dmFyIG89cS5zYXAucGFyc2VYTUwoeCk7aWYoby5wYXJzZUVycm9yLmVycm9yQ29kZSE9MCl7dmFyIHA9by5wYXJzZUVycm9yO3Euc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiBYTUwgcGFyc2UgRXJyb3IgZm9yICIrcC51cmwrIiBjb2RlOiAiK3AuZXJyb3JDb2RlKyIgcmVhc29uOiAiK3AucmVhc29uKyIgc3JjOiAiK3Auc3JjVGV4dCsiIGxpbmU6ICIrcC5saW5lKyIgbGluZXBvczogIitwLmxpbmVwb3MrIiBmaWxlcG9zOiAiK3AuZmlsZXBvcyk7dGhpcy5maXJlUGFyc2VFcnJvcih7dXJsOnAudXJsLGVycm9yQ29kZTpwLmVycm9yQ29kZSxyZWFzb246cC5yZWFzb24sc3JjVGV4dDpwLnNyY1RleHQsbGluZTpwLmxpbmUsbGluZXBvczpwLmxpbmVwb3MsZmlsZXBvczpwLmZpbGVwb3N9KX10aGlzLnNldERhdGEobyl9O2MucHJvdG90eXBlLmdldFhNTD1mdW5jdGlvbigpe3JldHVybiBxLnNhcC5zZXJpYWxpemVYTUwodGhpcy5vRGF0YSl9O2MucHJvdG90eXBlLnNldERhdGE9ZnVuY3Rpb24oZCl7dGhpcy5vRGF0YT1kO3RoaXMuY2hlY2tVcGRhdGUoKX07Yy5wcm90b3R5cGUubG9hZERhdGE9ZnVuY3Rpb24odSxwLEEsdCxkLGgpe3ZhciBlPXRoaXM7QT0oQSE9PWZhbHNlKTt0PXR8fCJHRVQiO2Q9ZD09PXVuZGVmaW5lZD90aGlzLmJDYWNoZTpkO3RoaXMuZmlyZVJlcXVlc3RTZW50KHt1cmw6dSx0eXBlOnQsYXN5bmM6QSxoZWFkZXJzOmgsaW5mbzoiY2FjaGU9IitkLGluZm9PYmplY3Q6e2NhY2hlOmR9fSk7dGhpcy5fYWpheCh7dXJsOnUsYXN5bmM6QSxjYWNoZTpkLGRhdGFUeXBlOid4bWwnLGRhdGE6cCxoZWFkZXJzOmgsdHlwZTp0LHN1Y2Nlc3M6ZnVuY3Rpb24oRCl7aWYoIUQpe3Euc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiBObyBkYXRhIHdhcyByZXRyaWV2ZWQgYnkgc2VydmljZTogIit1KX1lLnNldERhdGEoRCk7ZS5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOnUsdHlwZTp0LGFzeW5jOkEsaGVhZGVyczpoLGluZm86ImNhY2hlPSIrZCxpbmZvT2JqZWN0OntjYWNoZTpkfSxzdWNjZXNzOnRydWV9KX0sZXJyb3I6ZnVuY3Rpb24oZixnLGkpe3ZhciBFPXttZXNzYWdlOmcsc3RhdHVzQ29kZTpmLnN0YXR1cyxzdGF0dXNUZXh0OmYuc3RhdHVzVGV4dCxyZXNwb25zZVRleHQ6Zi5yZXNwb25zZVRleHR9O3Euc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiAiK2csZi5yZXNwb25zZVRleHQrIiwiK2Yuc3RhdHVzKyIsIitmLnN0YXR1c1RleHQpO2UuZmlyZVJlcXVlc3RDb21wbGV0ZWQoe3VybDp1LHR5cGU6dCxhc3luYzpBLGhlYWRlcnM6aCxpbmZvOiJjYWNoZT0iK2QsaW5mb09iamVjdDp7Y2FjaGU6ZH0sc3VjY2VzczpmYWxzZSxlcnJvcm9iamVjdDpFfSk7ZS5maXJlUmVxdWVzdEZhaWxlZChFKX19KX07Yy5wcm90b3R5cGUuc2V0TmFtZVNwYWNlPWZ1bmN0aW9uKG4scCl7aWYoIXApe3A9IiJ9aWYoIXRoaXMub05hbWVTcGFjZXMpe3RoaXMub05hbWVTcGFjZXM9e319dGhpcy5vTmFtZVNwYWNlc1twXT1ufTtjLnByb3RvdHlwZS5iaW5kUHJvcGVydHk9ZnVuY3Rpb24ocCxvLFApe3ZhciBCPW5ldyBhKHRoaXMscCxvLFApO3JldHVybiBCfTtjLnByb3RvdHlwZS5iaW5kTGlzdD1mdW5jdGlvbihwLG8scyxmLFApe3ZhciBCPW5ldyBYKHRoaXMscCxvLHMsZixQKTtyZXR1cm4gQn07Yy5wcm90b3R5cGUuYmluZFRyZWU9ZnVuY3Rpb24ocCxvLGYsUCl7dmFyIEI9bmV3IGIodGhpcyxwLG8sZixQKTtyZXR1cm4gQn07Yy5wcm90b3R5cGUuc2V0UHJvcGVydHk9ZnVuY3Rpb24ocCx2LG8pe3ZhciBPPXAuc3Vic3RyaW5nKDAscC5sYXN0SW5kZXhPZigiLyIpKzEpLFA9cC5zdWJzdHIocC5sYXN0SW5kZXhPZigiLyIpKzEpO2lmKCF0aGlzLnJlc29sdmUocCxvKSl7cmV0dXJufWlmKCF0aGlzLm9EYXRhLmRvY3VtZW50RWxlbWVudCl7cS5zYXAubG9nLndhcm5pbmcoIlRyeWluZyB0byBzZXQgcHJvcGVydHkgIitwKyIsIGJ1dCBubyBkb2N1bWVudCBleGlzdHMuIik7cmV0dXJufXZhciBkO2lmKFAuaW5kZXhPZigiQCIpPT0wKXtkPXRoaXMuX2dldE9iamVjdChPLG8pO2lmKGRbMF0pe2RbMF0uc2V0QXR0cmlidXRlKFAuc3Vic3RyKDEpLHYpO3RoaXMuY2hlY2tVcGRhdGUoKX19ZWxzZXtkPXRoaXMuX2dldE9iamVjdChwLG8pO2lmKGRbMF0pe3EoZFswXSkudGV4dCh2KTt0aGlzLmNoZWNrVXBkYXRlKCl9fX07Yy5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24ocCxvKXt2YXIgcj10aGlzLl9nZXRPYmplY3QocCxvKTtpZihyJiZ0eXBlb2YgciE9InN0cmluZyIpe3I9cShyWzBdKS50ZXh0KCl9cmV0dXJuIHJ9O2MucHJvdG90eXBlLmdldE9iamVjdD1mdW5jdGlvbihwLG8pe3ZhciBPPXRoaXMuX2dldE9iamVjdChwLG8pO2lmKHEuaXNBcnJheShPKSl7Tz1PWzBdfXJldHVybiBPfTtjLnByb3RvdHlwZS5fZ2V0T2JqZWN0PWZ1bmN0aW9uKHAsbyl7dmFyIHI9dGhpcy5vRGF0YS5kb2N1bWVudEVsZW1lbnQ7aWYoIXIpe3JldHVybiBudWxsfXZhciBuPXRoaXMuaXNMZWdhY3lTeW50YXgoKT9bcl06W107aWYobyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Db250ZXh0KXtuPXRoaXMuX2dldE9iamVjdChvLmdldFBhdGgoKSl9ZWxzZSBpZihvKXtuPVtvXX1pZighcCl7cmV0dXJuIG59dmFyIFA9cC5zcGxpdCgiLyIpLHMsaT0wO2lmKCFQWzBdKXtuPXI7aSsrfW49bi5sZW5ndGg9PXVuZGVmaW5lZD9bbl06bjtuPW5bMF0/bjpudWxsO3doaWxlKG4mJm4ubGVuZ3RoPjAmJlBbaV0pe3M9UFtpXTtpZihzLmluZGV4T2YoIkAiKT09MCl7bj10aGlzLl9nZXRBdHRyaWJ1dGUoblswXSxzLnN1YnN0cigxKSl9ZWxzZSBpZihzPT0idGV4dCgpIil7bj1xKG5bMF0pLnRleHQoKX1lbHNlIGlmKGlzTmFOKHMpKXtuPXRoaXMuX2dldENoaWxkRWxlbWVudHNCeVRhZ05hbWUoblswXSxzKX1lbHNle249W25bc11dfWkrK31yZXR1cm4gbn07Yy5wcm90b3R5cGUuX2dldEF0dHJpYnV0ZT1mdW5jdGlvbihuLE4pe2lmKCF0aGlzLm9OYW1lU3BhY2VzfHxOLmluZGV4T2YoIjoiKT09LTEpe3JldHVybiBuLmdldEF0dHJpYnV0ZShOKX12YXIgcz10aGlzLl9nZXROYW1lU3BhY2UoTiksbD10aGlzLl9nZXRMb2NhbE5hbWUoTik7aWYobi5nZXRBdHRyaWJ1dGVOUyl7cmV0dXJuIG4uZ2V0QXR0cmlidXRlTlMocyxsKX1lbHNle2lmKCF0aGlzLm9Eb2NOU1ByZWZpeGVzKXt0aGlzLm9Eb2NOU1ByZWZpeGVzPXRoaXMuX2dldERvY05TUHJlZml4ZXMoKX12YXIgcD10aGlzLm9Eb2NOU1ByZWZpeGVzW3NdO049KHA/cCsiOiI6IiIpK2w7cmV0dXJuIG4uZ2V0QXR0cmlidXRlKE4pfX07Yy5wcm90b3R5cGUuX2dldENoaWxkRWxlbWVudHNCeVRhZ05hbWU9ZnVuY3Rpb24obixOKXt2YXIgZD1uLmNoaWxkTm9kZXMscj1bXTtpZih0aGlzLm9OYW1lU3BhY2VzKXt2YXIgcz10aGlzLl9nZXROYW1lU3BhY2UoTiksbD10aGlzLl9nZXRMb2NhbE5hbWUoTiksZTtxLmVhY2goZCxmdW5jdGlvbihpLG8pe2U9by5sb2NhbE5hbWV8fG8uYmFzZU5hbWU7aWYoby5ub2RlVHlwZT09MSYmZT09bCYmby5uYW1lc3BhY2VVUkk9PXMpe3IucHVzaChvKX19KX1lbHNle3EuZWFjaChkLGZ1bmN0aW9uKGksbyl7aWYoby5ub2RlVHlwZT09MSYmby5ub2RlTmFtZT09Til7ci5wdXNoKG8pfX0pfXJldHVybiByfTtjLnByb3RvdHlwZS5fZ2V0TmFtZVNwYWNlPWZ1bmN0aW9uKG4pe3ZhciBpPW4uaW5kZXhPZigiOiIpLHA9IiI7aWYoaT4wKXtwPW4uc3Vic3RyKDAsaSl9cmV0dXJuIHRoaXMub05hbWVTcGFjZXNbcF19O2MucHJvdG90eXBlLl9nZXRMb2NhbE5hbWU9ZnVuY3Rpb24obil7dmFyIGk9bi5pbmRleE9mKCI6IiksbD1uO2lmKGk+MCl7bD1uLnN1YnN0cihpKzEpfXJldHVybiBsfTtjLnByb3RvdHlwZS5fZ2V0RG9jTlNQcmVmaXhlcz1mdW5jdGlvbigpe3ZhciBwPXt9LGQ9dGhpcy5vRGF0YSYmdGhpcy5vRGF0YS5kb2N1bWVudEVsZW1lbnQ7aWYoIWQpe3JldHVybiBwfXZhciBBPWQuYXR0cmlidXRlcztxLmVhY2goQSxmdW5jdGlvbihpLG8pe3ZhciBuPW8ubmFtZSx2PW8udmFsdWU7aWYobj09InhtbG5zIil7cFt2XT0iIn1lbHNlIGlmKG4uaW5kZXhPZigieG1sbnMiKT09MCl7cFt2XT1uLnN1YnN0cig2KX19KTtyZXR1cm4gcH07Yy5wcm90b3R5cGUuX3Jlc29sdmU9ZnVuY3Rpb24ocCxvKXt2YXIgaT0hcS5zYXAuc3RhcnRzV2l0aChwLCIvIikscj1wO2lmKGkpe2lmKG8pe3I9by5nZXRQYXRoKCkrIi8iK3B9ZWxzZXtyPXRoaXMuaXNMZWdhY3lTeW50YXgoKT8iLyIrcDp1bmRlZmluZWR9fXJldHVybiByfTtjLnByb3RvdHlwZS5pc0xpc3Q9ZnVuY3Rpb24ocCxvKXtyZXR1cm4gZmFsc2V9O3JldHVybiBjfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmFwcC5Nb2NrU2VydmVyJykpewovKgogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmFwcC5Nb2NrU2VydmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2FwcC9Nb2NrU2VydmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvdXRpbC9Nb2NrU2VydmVyJ10sZnVuY3Rpb24ocSxNKXsidXNlIHN0cmljdCI7dmFyIGE9TTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRtcGwuSGFuZGxlYmFyc1RlbXBsYXRlJykpewovKiEKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnRtcGwuSGFuZGxlYmFyc1RlbXBsYXRlJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5oYW5kbGViYXJzJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdG1wbC9IYW5kbGViYXJzVGVtcGxhdGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1RlbXBsYXRlJywnc2FwL3VpL3RoaXJkcGFydHkvaGFuZGxlYmFycyddLGZ1bmN0aW9uKHEsVCxoKXsidXNlIHN0cmljdCI7dmFyIEg9VC5leHRlbmQoInNhcC51aS5jb3JlLnRtcGwuSGFuZGxlYmFyc1RlbXBsYXRlIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzKXtULmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KTtULnJlZ2lzdGVyVHlwZSgidGV4dC94LWhhbmRsZWJhcnMtdGVtcGxhdGUiLCJzYXAudWkuY29yZS50bXBsLkhhbmRsZWJhcnNUZW1wbGF0ZSIpO0guUkVOREVSX0hFTFBFUlM9KGZ1bmN0aW9uKCl7dmFyIGU9SGFuZGxlYmFycy5oZWxwZXJzWyJlYWNoIl0sdz1IYW5kbGViYXJzLmhlbHBlcnNbIndpdGgiXSxJPUhhbmRsZWJhcnMuaGVscGVyc1siaWYiXSx1PUhhbmRsZWJhcnMuaGVscGVyc1sidW5sZXNzIl0scD1ULnBhcnNlUGF0aDt2YXIgbz17ImVhY2giOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO2lmKCFhLmhhc2gucGF0aCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfWVsc2V7dmFyIHI9YS5kYXRhLnJlbmRlck1hbmFnZXIsUj1hLmRhdGEucm9vdENvbnRyb2wsUD1hLmRhdGEucGF0aCxiPWEuZGF0YS5wYXJlbnRDb250cm9sLHM9KHEuc2FwLnN0YXJ0c1dpdGgoYS5oYXNoLnBhdGgsIi8iKT8iIjooUHx8IiIpKSthLmhhc2gucGF0aCxkPVIuYmluZExpc3QocyksZj1bXSxnO2lmKGEuZGF0YSl7Zz1IYW5kbGViYXJzLmNyZWF0ZUZyYW1lKGEuZGF0YSl9aWYoZCl7cS5lYWNoKGQsZnVuY3Rpb24oayx2KXtpZihnKXtnLnJlbmRlck1hbmFnZXI9cjtnLnJvb3RDb250cm9sPVI7Zy5wYXRoPXMrIi8iK2srIi8iO2cucGFyZW50Q29udHJvbD1ifWYucHVzaChhLmZuKHt9LHtkYXRhOmd9KSl9KX1pZighYil7cmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoZi5qb2luKCIiKSl9fX0sIndpdGgiOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO2lmKCFhLmhhc2gucGF0aCl7cmV0dXJuIHcuYXBwbHkodGhpcyxhcmd1bWVudHMpfWVsc2V7fX0sImlmIjpmdW5jdGlvbihjLGEpe2E9YXx8YztpZighYS5oYXNoLnBhdGgpe3JldHVybiBJLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1lbHNle319LCJ1bmxlc3MiOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO2lmKCFhLmhhc2gucGF0aCl7cmV0dXJuIHUuYXBwbHkodGhpcyxhcmd1bWVudHMpfWVsc2V7fX0sInRleHQiOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO3ZhciByPWEuZGF0YS5yb290Q29udHJvbCxQPWEuZGF0YS5wYXRoLHM9KHEuc2FwLnN0YXJ0c1dpdGgoYS5oYXNoLnBhdGgsIi8iKT8iIjooUHx8IiIpKSthLmhhc2gucGF0aDtpZihzKXt2YXIgdj1yLmJpbmRQcm9wKHMpO3JldHVybiB2JiZuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKHYpfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJUaGUgZXhwcmVzc2lvbiBcInRleHRcIiByZXF1aXJlcyB0aGUgb3B0aW9uIFwicGF0aFwiISIpfX0sImVsZW1lbnQiOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO3ZhciByPWEuZGF0YS5yZW5kZXJNYW5hZ2VyLFI9YS5kYXRhLnJvb3RDb250cm9sLEU9Ui5jcmVhdGVET01FbGVtZW50KGEuaGFzaCxhLmRhdGEucGF0aCksUD1hLmRhdGEucGFyZW50RWxlbWVudDtpZihhLmZuKXt2YXIgQz1hLmZuKHt9LHtkYXRhOntyZW5kZXJNYW5hZ2VyOnIscm9vdENvbnRyb2w6UixwYXJlbnRFbGVtZW50OkV9fSl9aWYoUCl7UC5hZGRFbGVtZW50KEUpO3JldHVybn1yZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhyLmdldEhUTUwoRSkpfSwiY29udHJvbCI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIHI9YS5kYXRhLnJlbmRlck1hbmFnZXIsQz1hLmRhdGEuY29udHJvbDtpZihDKXtyZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhyLmdldEhUTUwoQykpfXZhciBSPWEuZGF0YS5yb290Q29udHJvbCxQPWEuZGF0YS5wYXRoLG09YS5kYXRhLmNoaWxkcmVuLHQ9YS5oYXNoWyJzYXAtdWktdHlwZSJdLE09cS5zYXAuZ2V0T2JqZWN0KHQpLmdldE1ldGFkYXRhKCksZD1hLmhhc2hbInNhcC11aS1kZWZhdWx0LWFnZ3JlZ2F0aW9uIl18fE0uZ2V0RGVmYXVsdEFnZ3JlZ2F0aW9uTmFtZSgpLHY9YS5kYXRhLnZpZXc7dmFyIGI9e307aWYoYS5mbil7YS5mbih7fSx7ZGF0YTp7cm9vdENvbnRyb2w6UixwYXRoOlAsY2hpbGRyZW46YixkZWZhdWx0QWdncmVnYXRpb246ZCx2aWV3OnZ9fSl9dmFyIHM9cS5leHRlbmQoe30sYS5oYXNoKTtxLmVhY2gocyxmdW5jdGlvbihrLFYpe2lmKGJba10pe2RlbGV0ZSBzW2tdfX0pO3ZhciBuPVIuY3JlYXRlQ29udHJvbChzLGEuZGF0YS5wYXRoLCEhbSx2KTtpZighcS5pc0VtcHR5T2JqZWN0KGIpKXtzPWEuaGFzaDt2YXIgQT1NLmdldEFsbEFnZ3JlZ2F0aW9ucygpO3EuZWFjaChiLGZ1bmN0aW9uKGYsZyl7Zm9yKHZhciBpPTAsbD1nLmxlbmd0aDtpPGw7aSsrKXt2YXIgaj1nW2ldLGs9QVtmXSx4PWsmJmsubXVsdGlwbGU7aWYodHlwZW9mIHNbZl09PT0ic3RyaW5nIil7dmFyIEI9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5iaW5kaW5nUGFyc2VyKHNbZl0sdiYmdi5nZXRDb250cm9sbGVyKCkpO0IudGVtcGxhdGU9ajtuLmJpbmRBZ2dyZWdhdGlvbihmLEIpfWVsc2V7aWYoeCl7bi5hZGRBZ2dyZWdhdGlvbihmLGopfWVsc2V7bi5zZXRBZ2dyZWdhdGlvbihmLGopfX19fSl9aWYobSl7dmFyIGY9YS5oYXNoWyJzYXAtdWktYWdncmVnYXRpb24iXXx8YS5kYXRhLmRlZmF1bHRBZ2dyZWdhdGlvbjttW2ZdPW1bZl18fFtdO21bZl0ucHVzaChuKTtyZXR1cm59cmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoci5nZXRIVE1MKG4pKX0sInByb3BlcnR5IjpmdW5jdGlvbihjLGEpe2E9YXx8Yzt2YXIgcj1hLmRhdGEucm9vdENvbnRyb2wsbT1yLmdldE1ldGFkYXRhKCksUD1hLmhhc2gubmFtZSxnPW0uZ2V0QWxsUHJvcGVydGllcygpW1BdLl9zR2V0dGVyO3JldHVybiByW2ddKCl9LCJhZ2dyZWdhdGlvbiI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIHI9YS5kYXRhLnJlbmRlck1hbmFnZXIsUj1hLmRhdGEucm9vdENvbnRyb2wsbT1SLmdldE1ldGFkYXRhKCksQT1hLmhhc2gubmFtZSxnPW0uZ2V0QWxsQWdncmVnYXRpb25zKClbQV0uX3NHZXR0ZXIsYj1bXTt2YXIgQz1SW2ddKCk7aWYoQyl7Zm9yKHZhciBpPTAsbD1DLmxlbmd0aDtpPGw7aSsrKXtpZihhLmZuKXtiLnB1c2goYS5mbih7fSx7ZGF0YTp7cmVuZGVyTWFuYWdlcjpyLHJvb3RDb250cm9sOlIsY29udHJvbDpDW2ldfX0pKX1lbHNle2IucHVzaChyLmdldEhUTUwoQ1tpXSkpfX19cmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoYi5qb2luKCIiKSl9LCJldmVudCI6ZnVuY3Rpb24oYyxhKXthPWF8fGN9fTtyZXR1cm4gb30oKSk7SC5wcm90b3R5cGUuY3JlYXRlTWV0YWRhdGE9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldENvbnRlbnQoKSxmPXRoaXMuX2ZuVGVtcGxhdGU9dGhpcy5fZm5UZW1wbGF0ZXx8SGFuZGxlYmFycy5jb21waWxlKHQpO3ZhciBtPXt9LGo9c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpLHA9c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQcml2YXRlQWdncmVnYXRpb25zKCk7dmFyIG89eyJwcm9wZXJ0eSI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIG49YS5oYXNoLm5hbWU7aWYobiYmbiE9PSJpZCImJiFqW25dKXttLnByb3BlcnRpZXM9bS5wcm9wZXJ0aWVzfHx7fTttLnByb3BlcnRpZXNbbl09cS5leHRlbmQoe30se3R5cGU6InN0cmluZyJ9LGEuaGFzaCl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIlRoZSBwcm9wZXJ0eSBuYW1lIFwiIituKyJcIiBpcyByZXNlcnZlZC4iKX19LCJhZ2dyZWdhdGlvbiI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIG49YS5oYXNoLm5hbWU7aWYobiYmIWpbbl0mJiFwW25dKXthLmhhc2gubXVsdGlwbGU9YS5oYXNoLm11bHRpcGxlPT0idHJ1ZSI7bS5hZ2dyZWdhdGlvbnM9bS5hZ2dyZWdhdGlvbnN8fHt9O20uYWdncmVnYXRpb25zW25dPXEuZXh0ZW5kKHt9LGEuaGFzaCl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIlRoZSBhZ2dyZWdhdGlvbiBuYW1lIFwiIituKyJcIiBpcyByZXNlcnZlZC4iKX19LCJldmVudCI6ZnVuY3Rpb24oYyxhKXthPWF8fGN9fTtxLmVhY2goWyJlYWNoIiwiaWYiLCJ1bmxlc3MiLCJ3aXRoIl0sZnVuY3Rpb24oaSx2KXtvW3ZdPWZ1bmN0aW9uKCl7fX0pO2Yoe30se2hlbHBlcnM6b30pO3JldHVybiBtfTtILnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlcj1mdW5jdGlvbih2KXt2YXIgdD10aGlzLmdldENvbnRlbnQoKSxmPXRoaXMuX2ZuVGVtcGxhdGU9dGhpcy5fZm5UZW1wbGF0ZXx8SGFuZGxlYmFycy5jb21waWxlKHQpO3ZhciByPWZ1bmN0aW9uKGEsYyl7dmFyIHM9ZihjLmdldENvbnRleHQoKXx8e30se2RhdGE6e3JlbmRlck1hbmFnZXI6YSxyb290Q29udHJvbDpjLHZpZXc6dn0saGVscGVyczpILlJFTkRFUl9IRUxQRVJTfSk7YS53cml0ZShzKX07cmV0dXJuIHJ9O3JldHVybiBIfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29yZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkNvcmUnKTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Db21wb25lbnQnKSl7Ci8qCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Db21wb25lbnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Db21wb25lbnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0JywnLi9Db21wb25lbnRNZXRhZGF0YScsJy4vQ29yZSddLGZ1bmN0aW9uKHEsTSxDLGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1NLmV4dGVuZCgic2FwLnVpLmNvcmUuQ29tcG9uZW50Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbWV0YWRhdGE6e3N0ZXJlb3R5cGU6ImNvbXBvbmVudCIsImFic3RyYWN0Ijp0cnVlLHZlcnNpb246IjAuMCIsaW5jbHVkZXM6W10sZGVwZW5kZW5jaWVzOntsaWJzOltdLGNvbXBvbmVudHM6W10sdWk1dmVyc2lvbjoiIn0sY29uZmlnOnt9LGN1c3RvbWl6aW5nOnt9LGxpYnJhcnk6InNhcC51aS5jb3JlIn19LEMpO2IuYWN0aXZhdGVDdXN0b21pemluZz1mdW5jdGlvbihjKXt9O2IuZGVhY3RpdmF0ZUN1c3RvbWl6aW5nPWZ1bmN0aW9uKGMpe307Yi5nZXRPd25lcklkRm9yPWZ1bmN0aW9uKG8pe2lmKG8mJihvIGluc3RhbmNlb2YgYnx8byBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLm12Yy5WaWV3KSl7cmV0dXJuIE0uZ2V0T3duZXJJZEZvcihvKX19O2IucHJvdG90eXBlLmdldEludGVyZmFjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtiLnByb3RvdHlwZS5faW5pdENvbXBvc2l0ZVN1cHBvcnQ9ZnVuY3Rpb24ocyl7dGhpcy5fbU1vY2tTZXJ2ZXJzPXt9O3RoaXMuZ2V0TWV0YWRhdGEoKS5vbkluaXRDb21wb25lbnQoKTt0aGlzLm9Db21wb25lbnREYXRhPXMmJnMuY29tcG9uZW50RGF0YTt0aGlzLmdldE1ldGFkYXRhKCkuaW5pdCgpO3RoaXMuaW5pdENvbXBvbmVudE1vZGVscygpO2lmKHRoaXMub25XaW5kb3dFcnJvcil7dGhpcy5fZm5XaW5kb3dFcnJvckhhbmRsZXI9cS5wcm94eShmdW5jdGlvbihlKXt2YXIgRT1lLm9yaWdpbmFsRXZlbnQ7dGhpcy5vbldpbmRvd0Vycm9yKEUubWVzc2FnZSxFLmZpbGVuYW1lLEUubGluZW5vKX0sdGhpcyk7cSh3aW5kb3cpLmJpbmQoImVycm9yIix0aGlzLl9mbldpbmRvd0Vycm9ySGFuZGxlcil9aWYodGhpcy5vbldpbmRvd0JlZm9yZVVubG9hZCl7dGhpcy5fZm5XaW5kb3dCZWZvcmVVbmxvYWRIYW5kbGVyPXEucHJveHkodGhpcy5vbldpbmRvd0JlZm9yZVVubG9hZCx0aGlzKTtxKHdpbmRvdykuYmluZCgiYmVmb3JldW5sb2FkIix0aGlzLl9mbldpbmRvd0JlZm9yZVVubG9hZEhhbmRsZXIpfWlmKHRoaXMub25XaW5kb3dVbmxvYWQpe3RoaXMuX2ZuV2luZG93VW5sb2FkSGFuZGxlcj1xLnByb3h5KHRoaXMub25XaW5kb3dVbmxvYWQsdGhpcyk7cSh3aW5kb3cpLmJpbmQoInVubG9hZCIsdGhpcy5fZm5XaW5kb3dVbmxvYWRIYW5kbGVyKX19O2IucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLl9tTW9ja1NlcnZlcnMpe3EuZWFjaCh0aGlzLl9tTW9ja1NlcnZlcnMsZnVuY3Rpb24obixtKXttLnN0b3AoKX0pO2RlbGV0ZSB0aGlzLl9tTW9ja1NlcnZlcnN9aWYodGhpcy5fZm5XaW5kb3dFcnJvckhhbmRsZXIpe3Eod2luZG93KS51bmJpbmQoImVycm9yIix0aGlzLl9mbldpbmRvd0Vycm9ySGFuZGxlcik7ZGVsZXRlIHRoaXMuX2ZuV2luZG93RXJyb3JIYW5kbGVyfWlmKHRoaXMuX2ZuV2luZG93QmVmb3JlVW5sb2FkSGFuZGxlcil7cSh3aW5kb3cpLnVuYmluZCgiYmVmb3JldW5sb2FkIix0aGlzLl9mbldpbmRvd0JlZm9yZVVubG9hZEhhbmRsZXIpO2RlbGV0ZSB0aGlzLl9mbldpbmRvd0JlZm9yZVVubG9hZEhhbmRsZXJ9aWYodGhpcy5fZm5XaW5kb3dVbmxvYWRIYW5kbGVyKXtxKHdpbmRvdykudW5iaW5kKCJ1bmxvYWQiLHRoaXMuX2ZuV2luZG93VW5sb2FkSGFuZGxlcik7ZGVsZXRlIHRoaXMuX2ZuV2luZG93VW5sb2FkSGFuZGxlcn1pZih0aGlzLl9vRXZlbnRCdXMpe3RoaXMuX29FdmVudEJ1cy5kZXN0cm95KCk7ZGVsZXRlIHRoaXMuX29FdmVudEJ1c31NLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmdldE1ldGFkYXRhKCkub25FeGl0Q29tcG9uZW50KCl9O2IucHJvdG90eXBlLmdldENvbXBvbmVudERhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQ29tcG9uZW50RGF0YX07Yi5wcm90b3R5cGUuZ2V0RXZlbnRCdXM9ZnVuY3Rpb24oKXtpZighdGhpcy5fb0V2ZW50QnVzKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS5FdmVudEJ1cyIpO3RoaXMuX29FdmVudEJ1cz1uZXcgc2FwLnVpLmNvcmUuRXZlbnRCdXMoKX1yZXR1cm4gdGhpcy5fb0V2ZW50QnVzfTtiLnByb3RvdHlwZS5pbml0Q29tcG9uZW50TW9kZWxzPWZ1bmN0aW9uKG0scyl7dmFyIG89dGhpcy5nZXRNZXRhZGF0YSgpO3ZhciBjPW18fG8uZ2V0TW9kZWxzKCksUz1zfHxvLmdldFNlcnZpY2VzKCk7aWYoYyl7dmFyIGY9ZnVuY3Rpb24obix1LGUsZyl7aWYodGhpcy5fbU1vY2tTZXJ2ZXJzW25dKXt0aGlzLl9tTW9ja1NlcnZlcnNbbl0uc3RvcCgpfXEuc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLnV0aWwuTW9ja1NlcnZlciIpO3RoaXMuX21Nb2NrU2VydmVyc1tuXT1uZXcgc2FwLnVpLmNvcmUudXRpbC5Nb2NrU2VydmVyKHtyb290VXJpOnV9KTt0aGlzLl9tTW9ja1NlcnZlcnNbbl0uc2ltdWxhdGUoZSxnKTt0aGlzLl9tTW9ja1NlcnZlcnNbbl0uc3RhcnQoKX07dmFyIGQ9ZnVuY3Rpb24obixlKXt2YXIgdT1lLnVyaSxUPWUudHlwZTtxLnNhcC5yZXF1aXJlKFQpO3ZhciBnPXEuc2FwLmdldE9iamVjdChUKTt2YXIgaDtpZihUPT09InNhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZU1vZGVsIil7aD1uZXcgZyh7YnVuZGxlVXJsOnV9KX1lbHNlIGlmKFQ9PT0ic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTW9kZWwiKXtpZihlLm1vY2tzZXJ2ZXIpe2YuY2FsbCh0aGlzLG4sdSxlLm1vY2tzZXJ2ZXIubW9kZWwsZS5tb2Nrc2VydmVyLmRhdGEpfWg9bmV3IGcodSxlLnNldHRpbmdzKX1lbHNlIGlmKFQ9PT0ic2FwLnVpLm1vZGVsLmpzb24uSlNPTk1vZGVsInx8VD09PSJzYXAudWkubW9kZWwueG1sLlhNTE1vZGVsIil7aD1uZXcgZygpO2lmKHUpe2gubG9hZERhdGEodSl9fXJldHVybiBofTt2YXIgdD10aGlzO3EuZWFjaChjLGZ1bmN0aW9uKGssZSl7dmFyIGc9ZS5zZXJ2aWNlLGg7aWYoZyl7dmFyIGk9U1tnXTtoPWQuY2FsbCh0LGssaSl9ZWxzZSBpZihlLnR5cGUpe2g9ZC5jYWxsKHQsayxlKX1pZihoKXt0LnNldE1vZGVsKGgsa3x8dW5kZWZpbmVkKX19KX19O3NhcC51aS5jb21wb25lbnQ9ZnVuY3Rpb24oYyl7aWYoIWMpe3Rocm93IG5ldyBFcnJvcigic2FwLnVpLmNvbXBvbmVudCBjYW5ub3QgYmUgY2FsbGVkIHdpdGhvdXQgcGFyYW1ldGVyISIpfWlmKHR5cGVvZiBjPT09InN0cmluZyIpe3JldHVybiBzYXAudWkuZ2V0Q29yZSgpLmdldENvbXBvbmVudChjKX1lbHNle3ZhciBuPWMubmFtZSxpPWMuaWQsbz1jLmNvbXBvbmVudERhdGEscz1uKyIuQ29tcG9uZW50IixTPWMuc2V0dGluZ3M7dmFyIGQ9c2FwLnVpLmNvbXBvbmVudC5sb2FkKGMsdHJ1ZSk7dmFyIEk9bmV3IGQocS5leHRlbmQoe30sUyx7aWQ6aSxjb21wb25lbnREYXRhOm99KSk7cS5zYXAubG9nLmluZm8oIkNvbXBvbmVudCBpbnN0YW5jZSBJZCA9ICIrSS5nZXRJZCgpKTtyZXR1cm4gSX19O3NhcC51aS5jb21wb25lbnQubG9hZD1mdW5jdGlvbihjLGYpe3ZhciBuPWMubmFtZSx1PWMudXJsLHM9bisiLkNvbXBvbmVudCIscD1zKyItcHJlbG9hZCIsUD1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRDb21wb25lbnRQcmVsb2FkKCk7aWYoIW4pe3Rocm93IG5ldyBFcnJvcigiVGhlIG5hbWUgb2YgdGhlIGNvbXBvbmVudCBpcyB1bmRlZmluZWQuIil9aWYodSl7cS5zYXAucmVnaXN0ZXJNb2R1bGVQYXRoKG4sdSl9aWYoUD09PSJzeW5jInx8UD09PSJhc3luYyIpe3RyeXtpZighcS5zYXAuaXNEZWNsYXJlZChzLHRydWUpKXtxLnNhcC5yZXF1aXJlKHApfX1jYXRjaChlKXtxLnNhcC5sb2cud2FybmluZygiY291bGRuJ3QgcHJlbG9hZCBjb21wb25lbnQgZnJvbSAiK3ArIjogIisoKGUmJmUubWVzc2FnZSl8fGUpKX19cS5zYXAucmVxdWlyZShzKTt2YXIgbz1xLnNhcC5nZXRPYmplY3Qocyk7aWYoIW8pe2lmKGYpe3Rocm93IG5ldyBFcnJvcigiVGhlIHNwZWNpZmllZCBjb21wb25lbnQgY29udHJvbGxlclwiIitzKyJcIiBjb3VsZCBub3QgYmUgZm91bmQhIil9ZWxzZXtxLnNhcC5sb2cud2FybmluZygiVGhlIHNwZWNpZmllZCBjb21wb25lbnQgY29udHJvbGxlciBcIiIrcysiXCIgY291bGQgbm90IGJlIGZvdW5kISIpfX1yZXR1cm4gb307cmV0dXJuIGJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Db250cm9sJykpewovKiEKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkNvbnRyb2wnKTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5DdXN0b21TdHlsZUNsYXNzU3VwcG9ydCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkN1c3RvbVN0eWxlQ2xhc3NTdXBwb3J0Jyk7aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuRWxlbWVudCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkVsZW1lbnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9FbGVtZW50IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJy4vQ29yZScsJy4vRWxlbWVudE1ldGFkYXRhJywnc2FwL3VpL21vZGVsL1NpbXBsZVR5cGUnLCdqcXVlcnkuc2FwLnN0cmluZ3MnXSxmdW5jdGlvbihxLE0sQyxFLFMpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1NLmV4dGVuZCgic2FwLnVpLmNvcmUuRWxlbWVudCIse21ldGFkYXRhOntzdGVyZW90eXBlOiJlbGVtZW50IiwiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbImdldElkIiwiZ2V0TWV0YWRhdGEiLCJnZXRUb29sdGlwX0FzU3RyaW5nIiwiZ2V0VG9vbHRpcF9UZXh0IiwiZ2V0TW9kZWwiLCJzZXRNb2RlbCIsImhhc01vZGVsIiwiYmluZEVsZW1lbnQiLCJ1bmJpbmRFbGVtZW50IiwiZ2V0RWxlbWVudEJpbmRpbmciLCJwcm9wIiwiZ2V0TGF5b3V0RGF0YSIsInNldExheW91dERhdGEiXSxsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7fSxhZ2dyZWdhdGlvbnM6e3Rvb2x0aXA6e25hbWU6InRvb2x0aXAiLHR5cGU6InNhcC51aS5jb3JlLlRvb2x0aXBCYXNlIixhbHRUeXBlczpbInN0cmluZyJdLG11bHRpcGxlOmZhbHNlfSxjdXN0b21EYXRhOntuYW1lOiJjdXN0b21EYXRhIix0eXBlOiJzYXAudWkuY29yZS5DdXN0b21EYXRhIixtdWx0aXBsZTp0cnVlLHNpbmd1bGFyTmFtZToiY3VzdG9tRGF0YSJ9LGxheW91dERhdGE6e25hbWU6ImxheW91dERhdGEiLHR5cGU6InNhcC51aS5jb3JlLkxheW91dERhdGEiLG11bHRpcGxlOmZhbHNlLHNpbmd1bGFyTmFtZToibGF5b3V0RGF0YSJ9LGRlcGVuZGVudHM6e25hbWU6ImRlcGVuZGVudHMiLHR5cGU6InNhcC51aS5jb3JlLkNvbnRyb2wiLG11bHRpcGxlOnRydWV9fSxhc3NvY2lhdGlvbnM6e30sZXZlbnRzOnt9fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZW5kZXJlcjpudWxsfSxFKTthLmRlZmluZUNsYXNzPWZ1bmN0aW9uKGMscyxtKXtyZXR1cm4gc2FwLnVpLmJhc2UuT2JqZWN0LmRlZmluZUNsYXNzKGMscyxtfHxFKX07YS5wcm90b3R5cGUuZ2V0SW50ZXJmYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLl9oYW5kbGVFdmVudD1mdW5jdGlvbihlKXt2YXIgaD0ib24iK2UudHlwZTt0aGlzLl9jYWxsRXZlbnRIYW5kbGVzKHRoaXMuYUJlZm9yZURlbGVnYXRlcy5zbGljZSgwKSxoLGUsdHJ1ZSk7dGhpcy5fY2FsbEV2ZW50SGFuZGxlcyhbdGhpc10saCxlKTt0aGlzLl9jYWxsRXZlbnRIYW5kbGVzKHRoaXMuYURlbGVnYXRlcy5zbGljZSgwKSxoLGUsdHJ1ZSl9O2EucHJvdG90eXBlLl9jYWxsRXZlbnRIYW5kbGVzPWZ1bmN0aW9uKGgsSCxlLGQpe2lmKGgubGVuZ3RoPjApe2Zvcih2YXIgaT0wO2k8aC5sZW5ndGg7aSsrKXtpZihlLmlzSW1tZWRpYXRlSGFuZGxlclByb3BhZ2F0aW9uU3RvcHBlZCgpKXticmVha312YXIgbz1kP2hbaV0ub0RlbGVnYXRlOmhbaV07dmFyIHQ9KGQmJmhbaV0udlRoaXMpP2hbaV0udlRoaXM6bztpZih0PT09dHJ1ZSl7dD10aGlzfWlmKG9bSF0pe29bSF0uY2FsbCh0LGUpfX19fTthLmNyZWF0ZT1mdW5jdGlvbihkLGspe2lmKCFkfHxkIGluc3RhbmNlb2YgYXx8dHlwZW9mIGQhPT0ib2JqZWN0Inx8ZCBpbnN0YW5jZW9mIFN0cmluZyl7cmV0dXJuIGR9ZnVuY3Rpb24gZyh0KXtpZih0eXBlb2YgdD09PSJmdW5jdGlvbiIpe3JldHVybiB0fWlmKHR5cGVvZiB0PT09InN0cmluZyIpe3JldHVybiBxLnNhcC5nZXRPYmplY3QodCl9fXZhciBjPWcoZC5UeXBlKXx8ZyhrJiZrLnR5cGUpO2lmKHR5cGVvZiBjPT09ImZ1bmN0aW9uIil7cmV0dXJuIG5ldyBjKGQpfXZhciBtPSJEb24ndCBrbm93IGhvdyB0byBjcmVhdGUgYW4gRWxlbWVudCBmcm9tICIrZCsiICgiKyh0eXBlb2YgZCkrIikiO3Euc2FwLmxvZy5mYXRhbChtKTt0aHJvdyBuZXcgRXJyb3IobSl9O2EucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXRNZXRhZGF0YSl7cmV0dXJuIkVsZW1lbnQgIit0aGlzLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpKyIjIit0aGlzLnNJZH1lbHNle3JldHVybiJFbGVtZW50IHt1bmtub3duIGNsYXNzfSMiK3RoaXMuc0lkfX07YS5wcm90b3R5cGUuZ2V0RG9tUmVmPWZ1bmN0aW9uKHMpe3JldHVybiBxLnNhcC5kb21CeUlkKHM/dGhpcy5nZXRJZCgpKyItIitzOnRoaXMuZ2V0SWQoKSl9O2EucHJvdG90eXBlLiQ9ZnVuY3Rpb24ocyl7cmV0dXJuIHEodGhpcy5nZXREb21SZWYocykpfTthLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9QYXJlbnQmJnRoaXMub1BhcmVudC5pc0FjdGl2ZSgpfTthLnByb3RvdHlwZS5wcm9wPWZ1bmN0aW9uKHAsdil7dmFyIFA9dGhpcy5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKClbcF07aWYoUCl7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7cmV0dXJuIHRoaXNbUC5fc0dldHRlcl0oKX1lbHNle3RoaXNbUC5fc011dGF0b3JdKHYpO3JldHVybiB0aGlzfX19O2EucHJvdG90eXBlLmluc2VydERlcGVuZGVudD1mdW5jdGlvbihjLGkpe3JldHVybiB0aGlzLmluc2VydEFnZ3JlZ2F0aW9uKCJkZXBlbmRlbnRzIixjLGksdHJ1ZSl9O2EucHJvdG90eXBlLmFkZERlcGVuZGVudD1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5hZGRBZ2dyZWdhdGlvbigiZGVwZW5kZW50cyIsYyx0cnVlKX07YS5wcm90b3R5cGUucmVtb3ZlRGVwZW5kZW50PWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLnJlbW92ZUFnZ3JlZ2F0aW9uKCJkZXBlbmRlbnRzIixjLHRydWUpfTthLnByb3RvdHlwZS5yZW1vdmVBbGxEZXBlbmRlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3ZlQWxsQWdncmVnYXRpb24oImRlcGVuZGVudHMiLHRydWUpfTthLnByb3RvdHlwZS5kZXN0cm95RGVwZW5kZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRlc3Ryb3lBZ2dyZWdhdGlvbigiZGVwZW5kZW50cyIsdHJ1ZSl9O2EucHJvdG90eXBlLnJlcmVuZGVyPWZ1bmN0aW9uKCl7aWYodGhpcy5vUGFyZW50KXt0aGlzLm9QYXJlbnQucmVyZW5kZXIoKX19O2EucHJvdG90eXBlLmdldFVJQXJlYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9QYXJlbnQ/dGhpcy5vUGFyZW50LmdldFVJQXJlYSgpOm51bGx9O2EucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24ocyl7TS5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMscyk7dGhpcy4kKCkucmVtb3ZlKCl9O2EucHJvdG90eXBlLmZpcmVFdmVudD1mdW5jdGlvbihlLHApe3ZhciBBPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpO0FbMV09cD1wfHx7fTtwLmlkPXAuaWR8fHRoaXMuZ2V0SWQoKTtyZXR1cm4gc2FwLnVpLmJhc2UuRXZlbnRQcm92aWRlci5wcm90b3R5cGUuZmlyZUV2ZW50LmFwcGx5KHRoaXMsQSl9O2EucHJvdG90eXBlLmFkZERlbGVnYXRlPWZ1bmN0aW9uKGQsYyx0LGIpe3RoaXMucmVtb3ZlRGVsZWdhdGUoZCk7aWYodHlwZW9mIGM9PT0ib2JqZWN0Iil7Yj10O3Q9YztjPWZhbHNlfWlmKHR5cGVvZiB0PT09ImJvb2xlYW4iKXtiPXQ7dD11bmRlZmluZWR9KGM/dGhpcy5hQmVmb3JlRGVsZWdhdGVzOnRoaXMuYURlbGVnYXRlcykucHVzaCh7b0RlbGVnYXRlOmQsYkNsb25lOiEhYix2VGhpczooKHQ9PT10aGlzKT90cnVlOnQpfSk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnJlbW92ZURlbGVnYXRlPWZ1bmN0aW9uKGQpe2Zvcih2YXIgaT0wO2k8dGhpcy5hRGVsZWdhdGVzLmxlbmd0aDtpKyspe2lmKHRoaXMuYURlbGVnYXRlc1tpXS5vRGVsZWdhdGU9PWQpe3RoaXMuYURlbGVnYXRlcy5zcGxpY2UoaSwxKX19Zm9yKHZhciBpPTA7aTx0aGlzLmFCZWZvcmVEZWxlZ2F0ZXMubGVuZ3RoO2krKyl7aWYodGhpcy5hQmVmb3JlRGVsZWdhdGVzW2ldLm9EZWxlZ2F0ZT09ZCl7dGhpcy5hQmVmb3JlRGVsZWdhdGVzLnNwbGljZShpLDEpfX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuYWRkRXZlbnREZWxlZ2F0ZT1mdW5jdGlvbihkLHQpe3JldHVybiB0aGlzLmFkZERlbGVnYXRlKGQsZmFsc2UsdCx0cnVlKX07YS5wcm90b3R5cGUucmVtb3ZlRXZlbnREZWxlZ2F0ZT1mdW5jdGlvbihkKXtyZXR1cm4gdGhpcy5yZW1vdmVEZWxlZ2F0ZShkKX07YS5wcm90b3R5cGUuZ2V0Rm9jdXNEb21SZWY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXREb21SZWYoKXx8bnVsbH07YS5wcm90b3R5cGUuZm9jdXM9ZnVuY3Rpb24oKXt2YXIgZj10aGlzLmdldEZvY3VzRG9tUmVmKCk7aWYoZil7dHJ5e2YuZm9jdXMoKX1jYXRjaChlKXt2YXIgaT1mLmlkPyIgKGlkOiAiK2YuaWQrIikiOiIgIjtxLnNhcC5sb2cud2FybmluZygiRE9NIGVsZW1lbnQiK2krIiBpbiAiK3RoaXMudG9TdHJpbmcoKSsiIHdoaWNoIHNob3VsZCBiZSBmb2N1c2VkIGNhbm5vdCBiZSBmb2N1c2VkOiAiK2UubWVzc2FnZSl9fX07YS5wcm90b3R5cGUuZ2V0Rm9jdXNJbmZvPWZ1bmN0aW9uKCl7cmV0dXJue2lkOnRoaXMuZ2V0SWQoKX19O2EucHJvdG90eXBlLmFwcGx5Rm9jdXNJbmZvPWZ1bmN0aW9uKGYpe3RoaXMuZm9jdXMoKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuX3JlZnJlc2hUb29sdGlwQmFzZURlbGVnYXRlPWZ1bmN0aW9uKHQpe3ZhciBvPXRoaXMuZ2V0VG9vbHRpcCgpO2lmKG8gaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Ub29sdGlwQmFzZSl7dGhpcy5yZW1vdmVEZWxlZ2F0ZShvKX1pZih0IGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Upe3QuX2N1cnJlbnRDb250cm9sPXRoaXM7dGhpcy5hZGREZWxlZ2F0ZSh0KX19O2EucHJvdG90eXBlLnNldFRvb2x0aXA9ZnVuY3Rpb24odCl7dGhpcy5fcmVmcmVzaFRvb2x0aXBCYXNlRGVsZWdhdGUodCk7dGhpcy5zZXRBZ2dyZWdhdGlvbigidG9vbHRpcCIsdCk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmdldFRvb2x0aXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBZ2dyZWdhdGlvbigidG9vbHRpcCIpfTthLnJ1bldpdGhQcmVwcm9jZXNzb3JzPU0ucnVuV2l0aFByZXByb2Nlc3NvcnM7YS5wcm90b3R5cGUuZ2V0VG9vbHRpcF9Bc1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0VG9vbHRpcCgpO2lmKHR5cGVvZiB0PT09InN0cmluZyJ8fHQgaW5zdGFuY2VvZiBTdHJpbmcpe3JldHVybiB0fXJldHVybiB1bmRlZmluZWR9O2EucHJvdG90eXBlLmdldFRvb2x0aXBfVGV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0VG9vbHRpcCgpO2lmKHQmJnR5cGVvZiB0LmdldFRleHQ9PT0iZnVuY3Rpb24iKXtyZXR1cm4gdC5nZXRUZXh0KCl9cmV0dXJuIHR9OyhmdW5jdGlvbigpe3ZhciBnPWZ1bmN0aW9uKGUsayl7dmFyIGQ9ZS5nZXRBZ2dyZWdhdGlvbigiY3VzdG9tRGF0YSIpO2lmKGQpe2Zvcih2YXIgaT0wO2k8ZC5sZW5ndGg7aSsrKXtpZihkW2ldLmdldEtleSgpPT1rKXtyZXR1cm4gZFtpXX19fXJldHVybiBudWxsfTt2YXIgcz1mdW5jdGlvbihlLGssdix3KXtpZih2PT09bnVsbCl7dmFyIGQ9ZyhlLGspO2lmKCFkKXtyZXR1cm59dmFyIGI9ZS5nZXRBZ2dyZWdhdGlvbigiY3VzdG9tRGF0YSIpLmxlbmd0aDtpZihiPT0xKXtlLmRlc3Ryb3lBZ2dyZWdhdGlvbigiY3VzdG9tRGF0YSIsdHJ1ZSl9ZWxzZXtlLnJlbW92ZUFnZ3JlZ2F0aW9uKCJjdXN0b21EYXRhIixkLHRydWUpO2QuZGVzdHJveSgpfX1lbHNle3ZhciBkPWcoZSxrKTtpZihkKXtkLnNldFZhbHVlKHYpO2Quc2V0V3JpdGVUb0RvbSh3KX1lbHNle3ZhciBkPW5ldyBzYXAudWkuY29yZS5DdXN0b21EYXRhKHtrZXk6ayx2YWx1ZTp2LHdyaXRlVG9Eb206d30pO2UuYWRkQWdncmVnYXRpb24oImN1c3RvbURhdGEiLGQsdHJ1ZSl9fX07YS5wcm90b3R5cGUuZGF0YT1mdW5jdGlvbigpe3ZhciBiPWFyZ3VtZW50cy5sZW5ndGg7aWYoYj09MCl7dmFyIGQ9dGhpcy5nZXRBZ2dyZWdhdGlvbigiY3VzdG9tRGF0YSIpLHI9e307aWYoZCl7Zm9yKHZhciBpPTA7aTxkLmxlbmd0aDtpKyspe3JbZFtpXS5nZXRLZXkoKV09ZFtpXS5nZXRWYWx1ZSgpfX1yZXR1cm4gcn1lbHNlIGlmKGI9PTEpe3ZhciBjPWFyZ3VtZW50c1swXTtpZihjPT09bnVsbCl7dGhpcy5kZXN0cm95QWdncmVnYXRpb24oImN1c3RvbURhdGEiLHRydWUpO3JldHVybiB0aGlzfWVsc2UgaWYodHlwZW9mIGM9PSJzdHJpbmciKXt2YXIgZT1nKHRoaXMsYyk7cmV0dXJuIGU/ZS5nZXRWYWx1ZSgpOm51bGx9ZWxzZSBpZih0eXBlb2YgYz09Im9iamVjdCIpe2Zvcih2YXIgayBpbiBjKXtzKHRoaXMsayxjW2tdKX1yZXR1cm4gdGhpc31lbHNle3Rocm93IG5ldyBFcnJvcigiV2hlbiBkYXRhKCkgaXMgY2FsbGVkIHdpdGggb25lIGFyZ3VtZW50LCB0aGlzIGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIGFuIG9iamVjdCBvciBudWxsLCBidXQgaXMgIisodHlwZW9mIGMpKyI6IitjKyIgKG9uIFVJIEVsZW1lbnQgd2l0aCBJRCAnIit0aGlzLmdldElkKCkrIicpIil9fWVsc2UgaWYoYj09Mil7cyh0aGlzLGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pO3JldHVybiB0aGlzfWVsc2UgaWYoYj09Myl7cyh0aGlzLGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKTtyZXR1cm4gdGhpc31lbHNle3Rocm93IG5ldyBFcnJvcigiZGF0YSgpIG1heSBvbmx5IGJlIGNhbGxlZCB3aXRoIDAtMyBhcmd1bWVudHMgKG9uIFVJIEVsZW1lbnQgd2l0aCBJRCAnIit0aGlzLmdldElkKCkrIicpIil9fX0pKCk7YS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oSSxsKXt2YXIgYz1NLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Zm9yKHZhciBpPTA7aTx0aGlzLmFEZWxlZ2F0ZXMubGVuZ3RoO2krKyl7aWYodGhpcy5hRGVsZWdhdGVzW2ldLmJDbG9uZSl7Yy5hRGVsZWdhdGVzLnB1c2godGhpcy5hRGVsZWdhdGVzW2ldKX19Zm9yKHZhciBpPTA7aTx0aGlzLmFCZWZvcmVEZWxlZ2F0ZXMubGVuZ3RoO2krKyl7aWYodGhpcy5hQmVmb3JlRGVsZWdhdGVzW2ldLmJDbG9uZSl7Yy5hQmVmb3JlRGVsZWdhdGVzLnB1c2godGhpcy5hQmVmb3JlRGVsZWdhdGVzW2ldKX19cmV0dXJuIGN9O2EucHJvdG90eXBlLmZpbmRFbGVtZW50cz1mdW5jdGlvbihyKXt2YXIgYz1NLnByb3RvdHlwZS5maW5kQWdncmVnYXRlZE9iamVjdHMuY2FsbCh0aGlzLHIpO3JldHVybiBjfTthLnByb3RvdHlwZS5zZXRMYXlvdXREYXRhPWZ1bmN0aW9uKGwpe3RoaXMuc2V0QWdncmVnYXRpb24oImxheW91dERhdGEiLGwsdHJ1ZSk7dmFyIEw9dGhpcy5nZXRQYXJlbnQoKTtpZihMKXt2YXIgZT1xLkV2ZW50KCJMYXlvdXREYXRhQ2hhbmdlIik7ZS5zcmNDb250cm9sPXRoaXM7TC5faGFuZGxlRXZlbnQoZSl9cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmJpbmRFbGVtZW50PWZ1bmN0aW9uKHAsUCl7cmV0dXJuIHRoaXMuYmluZE9iamVjdChwLFApfTthLnByb3RvdHlwZS51bmJpbmRFbGVtZW50PWZ1bmN0aW9uKG0pe3JldHVybiB0aGlzLnVuYmluZE9iamVjdChtKX07YS5wcm90b3R5cGUuZ2V0RWxlbWVudEJpbmRpbmc9ZnVuY3Rpb24obSl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QmluZGluZyhtKX07cmV0dXJuIGF9LHRydWUpfTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9DdXN0b21TdHlsZUNsYXNzU3VwcG9ydCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRWxlbWVudCddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBDPWZ1bmN0aW9uKCl7aWYoISh0aGlzIGluc3RhbmNlb2YgRSkpe3JldHVybn12YXIgbz10aGlzLmNsb25lO3RoaXMuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYz1vLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLmFDdXN0b21TdHlsZUNsYXNzZXMpe2MuYUN1c3RvbVN0eWxlQ2xhc3Nlcz10aGlzLmFDdXN0b21TdHlsZUNsYXNzZXMuc2xpY2UoKX1yZXR1cm4gY307dGhpcy5hZGRTdHlsZUNsYXNzPWZ1bmN0aW9uKHMsUyl7aWYoIXRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcyl7dGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzPVtdfWlmKHMpe2lmKHMuaW5kZXhPZigiXCIiKT4tMSl7cmV0dXJuIHRoaXN9aWYocy5pbmRleE9mKCInIik+LTEpe3JldHVybiB0aGlzfWZvcih2YXIgaT10aGlzLmFDdXN0b21TdHlsZUNsYXNzZXMubGVuZ3RoLTE7aT49MDtpLS0pe2lmKHRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlc1tpXT09cyl7cmV0dXJuIHRoaXN9fXRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcy5wdXNoKHMpO3ZhciByPXRoaXMuZ2V0RG9tUmVmKCk7aWYocil7cShyKS5hZGRDbGFzcyhzKX1lbHNlIGlmKFM9PT1mYWxzZSl7dGhpcy5pbnZhbGlkYXRlKCl9fXJldHVybiB0aGlzfTt0aGlzLnJlbW92ZVN0eWxlQ2xhc3M9ZnVuY3Rpb24ocyxTKXtpZihzJiZ0aGlzLmFDdXN0b21TdHlsZUNsYXNzZXMpe2Zvcih2YXIgaT10aGlzLmFDdXN0b21TdHlsZUNsYXNzZXMubGVuZ3RoLTE7aT49MDtpLS0pe2lmKHRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlc1tpXT09cyl7dGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzLnNwbGljZShpLDEpO3ZhciByPXRoaXMuZ2V0RG9tUmVmKCk7aWYocil7cShyKS5yZW1vdmVDbGFzcyhzKX1lbHNlIGlmKFM9PT1mYWxzZSl7dGhpcy5pbnZhbGlkYXRlKCl9fX19cmV0dXJuIHRoaXN9O3RoaXMudG9nZ2xlU3R5bGVDbGFzcz1mdW5jdGlvbihzLGEpe2lmKHMmJnR5cGVvZiBzPT09InN0cmluZyIpe2lmKGE9PT10cnVlKXt0aGlzLmFkZFN0eWxlQ2xhc3Mocyl9ZWxzZSBpZihhPT09ZmFsc2Upe3RoaXMucmVtb3ZlU3R5bGVDbGFzcyhzKX1lbHNlIGlmKGE9PT11bmRlZmluZWQpe3RoaXMuaGFzU3R5bGVDbGFzcyhzKT90aGlzLnJlbW92ZVN0eWxlQ2xhc3Mocyk6dGhpcy5hZGRTdHlsZUNsYXNzKHMpfWVsc2V7cS5zYXAubG9nLndhcm5pbmcodGhpcy50b1N0cmluZygpKyItIHRvZ2dsZVN0eWxlQ2xhc3MoKTogYkFkZCBzaG91bGQgYmUgYSBib29sZWFuIG9yIHVuZGVmaW5lZCwgYnV0IGlzICciK2ErIiciKX19cmV0dXJuIHRoaXN9O3RoaXMuaGFzU3R5bGVDbGFzcz1mdW5jdGlvbihzKXtpZihzJiZ0aGlzLmFDdXN0b21TdHlsZUNsYXNzZXMpe2Zvcih2YXIgaT10aGlzLmFDdXN0b21TdHlsZUNsYXNzZXMubGVuZ3RoLTE7aT49MDtpLS0pe2lmKHRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlc1tpXT09cyl7cmV0dXJuIHRydWV9fX1yZXR1cm4gZmFsc2V9O3RoaXMuZ2V0TWV0YWRhdGEoKS5hZGRQdWJsaWNNZXRob2RzKFsiYWRkU3R5bGVDbGFzcyIsInJlbW92ZVN0eWxlQ2xhc3MiLCJ0b2dnbGVTdHlsZUNsYXNzIiwiaGFzU3R5bGVDbGFzcyJdKX07cmV0dXJuIEN9LHRydWUpfTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Db250cm9sIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9DdXN0b21TdHlsZUNsYXNzU3VwcG9ydCcsJy4vRWxlbWVudCddLGZ1bmN0aW9uKHEsQyxFKXsidXNlIHN0cmljdCI7dmFyIGE9RS5leHRlbmQoInNhcC51aS5jb3JlLkNvbnRyb2wiLHttZXRhZGF0YTp7c3RlcmVvdHlwZToiY29udHJvbCIsImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJwbGFjZUF0IiwiYXR0YWNoQnJvd3NlckV2ZW50IiwiZGV0YWNoQnJvd3NlckV2ZW50Il0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJidXN5Ijp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlfSwiYnVzeUluZGljYXRvckRlbGF5Ijp7dHlwZToiaW50IixkZWZhdWx0VmFsdWU6MTAwMH19LGFnZ3JlZ2F0aW9uczp7fSxhc3NvY2lhdGlvbnM6e30sZXZlbnRzOnt9fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe3RoaXMuYkFsbG93VGV4dFNlbGVjdGlvbj10cnVlO0UuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuYk91dHB1dD10aGlzLmdldERvbVJlZigpIT1udWxsO2lmKHRoaXMuX3NhcFVpQ29yZUxvY2FsQnVzeV9pbml0QnVzeUluZGljYXRvcil7dGhpcy5fc2FwVWlDb3JlTG9jYWxCdXN5X2luaXRCdXN5SW5kaWNhdG9yKCl9fSxyZW5kZXJlcjpudWxsfSk7YS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYz1FLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5hQmluZFBhcmFtZXRlcnMpe2Zvcih2YXIgaT0wLGw9dGhpcy5hQmluZFBhcmFtZXRlcnMubGVuZ3RoO2k8bDtpKyspe3ZhciBwPXRoaXMuYUJpbmRQYXJhbWV0ZXJzW2ldO2MuYXR0YWNoQnJvd3NlckV2ZW50KHAuc0V2ZW50VHlwZSxwLmZuSGFuZGxlcixwLm9MaXN0ZW5lciE9PXRoaXM/cC5vTGlzdGVuZXI6dW5kZWZpbmVkKX19Yy5iQWxsb3dUZXh0U2VsZWN0aW9uPXRoaXMuYkFsbG93VGV4dFNlbGVjdGlvbjtyZXR1cm4gY307Qy5hcHBseShhLnByb3RvdHlwZSk7YS5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gcS5zYXAuZG9tQnlJZCh0aGlzLnNJZCkhPW51bGx9O2EucHJvdG90eXBlLmludmFsaWRhdGU9ZnVuY3Rpb24obyl7dmFyIHU7aWYodGhpcy5iT3V0cHV0JiYodT10aGlzLmdldFVJQXJlYSgpKSl7aWYoIXRoaXMuX2JJc0JlaW5nRGVzdHJveWVkKXt1LmFkZEludmFsaWRhdGVkQ29udHJvbCh0aGlzKX19ZWxzZXt2YXIgcD10aGlzLmdldFBhcmVudCgpO2lmKHAmJih0aGlzLmJPdXRwdXR8fCEodGhpcy5nZXRWaXNpYmxlJiZ0aGlzLmdldFZpc2libGUoKT09PWZhbHNlKSkpe3AuaW52YWxpZGF0ZSh0aGlzKX19fTthLnByb3RvdHlwZS5yZXJlbmRlcj1mdW5jdGlvbigpe3NhcC51aS5jb3JlLlVJQXJlYS5yZXJlbmRlckNvbnRyb2wodGhpcyl9O2EucHJvdG90eXBlLmFsbG93VGV4dFNlbGVjdGlvbj1mdW5jdGlvbihBKXt0aGlzLmJBbGxvd1RleHRTZWxlY3Rpb249QTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuYXR0YWNoQnJvd3NlckV2ZW50PWZ1bmN0aW9uKGUsaCxsKXtpZihlJiYodHlwZW9mKGUpPT09InN0cmluZyIpKXtpZihoJiZ0eXBlb2YoaCk9PT0iZnVuY3Rpb24iKXtpZighdGhpcy5hQmluZFBhcmFtZXRlcnMpe3RoaXMuYUJpbmRQYXJhbWV0ZXJzPVtdfWw9bHx8dGhpczt2YXIgcD1mdW5jdGlvbigpe2guYXBwbHkobCxhcmd1bWVudHMpfTt0aGlzLmFCaW5kUGFyYW1ldGVycy5wdXNoKHtzRXZlbnRUeXBlOmUsZm5IYW5kbGVyOmgsb0xpc3RlbmVyOmwsZm5Qcm94eTpwfSk7dGhpcy4kKCkuYmluZChlLHApfX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZGV0YWNoQnJvd3NlckV2ZW50PWZ1bmN0aW9uKGUsaCxsKXtpZihlJiYodHlwZW9mKGUpPT09InN0cmluZyIpKXtpZihoJiZ0eXBlb2YoaCk9PT0iZnVuY3Rpb24iKXt2YXIgJD10aGlzLiQoKSxpLHA7bD1sfHx0aGlzO2lmKHRoaXMuYUJpbmRQYXJhbWV0ZXJzKXtmb3IoaT10aGlzLmFCaW5kUGFyYW1ldGVycy5sZW5ndGgtMTtpPj0wO2ktLSl7cD10aGlzLmFCaW5kUGFyYW1ldGVyc1tpXTtpZihwLnNFdmVudFR5cGU9PT1lJiZwLmZuSGFuZGxlcj09PWgmJnAub0xpc3RlbmVyPT09bCl7dGhpcy5hQmluZFBhcmFtZXRlcnMuc3BsaWNlKGksMSk7JC51bmJpbmQoZSxwLmZuUHJveHkpfX19fX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZ2V0UmVuZGVyZXI9ZnVuY3Rpb24oKXtyZXR1cm4gc2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5nZXRSZW5kZXJlcih0aGlzKX07YS5wcm90b3R5cGUucGxhY2VBdD1mdW5jdGlvbihyLHApe3ZhciBjPXNhcC51aS5nZXRDb3JlKCk7aWYoYy5pc0luaXRpYWxpemVkKCkpe3ZhciBvPXI7aWYodHlwZW9mIG89PT0ic3RyaW5nIil7bz1jLmJ5SWQocil9dmFyIGk9ZmFsc2U7aWYoIShvIGluc3RhbmNlb2YgRSkpe289Yy5jcmVhdGVVSUFyZWEocik7aT10cnVlfWlmKCFvKXtyZXR1cm59aWYoIWkpe3ZhciBiPW8uZ2V0TWV0YWRhdGEoKS5nZXRBbGxBZ2dyZWdhdGlvbnMoKVsiY29udGVudCJdO3ZhciBkPXRydWU7aWYoYil7aWYoIWIubXVsdGlwbGV8fGIudHlwZSE9InNhcC51aS5jb3JlLkNvbnRyb2wiKXtkPWZhbHNlfX1lbHNle2lmKCFvLmFkZENvbnRlbnR8fCFvLmluc2VydENvbnRlbnR8fCFvLnJlbW92ZUFsbENvbnRlbnQpe2Q9ZmFsc2V9fWlmKCFkKXtxLnNhcC5sb2cud2FybmluZygicGxhY2VBdCBjYW5ub3QgYmUgcHJvY2Vzc2VkIGJlY2F1c2UgY29udGFpbmVyICIrbysiIGRvZXMgbm90IGhhdmUgYW4gYWdncmVnYXRpb24gJ2NvbnRlbnQnLiIpO3JldHVybn19aWYodHlwZW9mIHA9PT0ibnVtYmVyIil7by5pbnNlcnRDb250ZW50KHRoaXMscCl9ZWxzZXtwPXB8fCJsYXN0Ijtzd2l0Y2gocCl7Y2FzZSJsYXN0IjpvLmFkZENvbnRlbnQodGhpcyk7YnJlYWs7Y2FzZSJmaXJzdCI6by5pbnNlcnRDb250ZW50KHRoaXMsMCk7YnJlYWs7Y2FzZSJvbmx5IjpvLnJlbW92ZUFsbENvbnRlbnQoKTtvLmFkZENvbnRlbnQodGhpcyk7YnJlYWs7ZGVmYXVsdDpxLnNhcC5sb2cud2FybmluZygiUG9zaXRpb24gIitwKyIgaXMgbm90IHN1cHBvcnRlZCBmb3IgZnVuY3Rpb24gcGxhY2VBdC4iKX19fWVsc2V7dmFyIHQ9dGhpcztjLmF0dGFjaEluaXRFdmVudChmdW5jdGlvbigpe3QucGxhY2VBdChyLHApfSl9cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLm9uc2VsZWN0c3RhcnQ9ZnVuY3Rpb24oYil7aWYoIXRoaXMuYkFsbG93VGV4dFNlbGVjdGlvbil7Yi5wcmV2ZW50RGVmYXVsdCgpO2Iuc3RvcFByb3BhZ2F0aW9uKCl9fTthLnByb3RvdHlwZS5nZXRJZEZvckxhYmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0SWQoKX07YS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbihzKXt0aGlzLl9iSXNCZWluZ0Rlc3Ryb3llZD10cnVlO3RoaXMuX2NsZWFudXBCdXN5SW5kaWNhdG9yKCk7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyQWxsRm9yQ29udHJvbCh0aGlzLmdldElkKCkpO0UucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzLHMpfTsoZnVuY3Rpb24oKXt2YXIgcD0iZm9jdXNpbiBmb2N1c291dCBrZXlkb3duIGtleXByZXNzIGtleXVwIixiPXtvbkFmdGVyUmVuZGVyaW5nOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRQcm9wZXJ0eSgiYnVzeSIpPT09dHJ1ZSYmdGhpcy4kKCkpe0EuYXBwbHkodGhpcyl9fX0sQT1mdW5jdGlvbigpe3ZhciAkPXRoaXMuJCh0aGlzLl9zQnVzeVNlY3Rpb24pLEY9WyJhcmVhIiwiYmFzZSIsImJyIiwiY29sIiwiZW1iZWQiLCJociIsImltZyIsImlucHV0Iiwia2V5Z2VuIiwibGluayIsIm1lbnVpdGVtIiwibWV0YSIsInBhcmFtIiwic291cmNlIiwidHJhY2siLCJ3YnIiXTtpZih0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZCk7ZGVsZXRlIHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkfXZhciB0PSQuZ2V0KDApJiYkLmdldCgwKS50YWdOYW1lO2lmKHQmJnEuaW5BcnJheSh0LnRvTG93ZXJDYXNlKCksRik+PTApe3Euc2FwLmxvZy53YXJuaW5nKCJCdXN5IEluZGljYXRvciBjYW5ub3QgYmUgcGxhY2VkIGluIGVsZW1lbnRzIHdpdGggdGFnICIrdCk7cmV0dXJufWlmKCQuY3NzKCdwb3NpdGlvbicpPT0nc3RhdGljJyl7dGhpcy5fYnVzeVN0b3JlZFBvc2l0aW9uPSdzdGF0aWMnOyQuY3NzKCdwb3NpdGlvbicsJ3JlbGF0aXZlJyl9dmFyIEI9cSgnPGRpdiBjbGFzcz0ic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3IiPjxkaXYgY2xhc3M9InNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQW5pbWF0aW9uIj48ZGl2IGNsYXNzPSJzYXBVaUxvY2FsQnVzeUluZGljYXRvckJveCI+PC9kaXY+PGRpdiBjbGFzcz0ic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JCb3giPjwvZGl2PjxkaXYgY2xhc3M9InNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQm94Ij48L2Rpdj48L2Rpdj48L2Rpdj4nKTtCLmF0dHIoImlkIix0aGlzLmdldElkKCkrIi1idXN5SW5kaWNhdG9yIik7JC5hcHBlbmQoQik7JC5hZGRDbGFzcygnc2FwVWlMb2NhbEJ1c3knKTtpZih0aGlzLl9idXN5RGVsYXllZENhbGxJZCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9idXN5RGVsYXllZENhbGxJZCl9dGhpcy5fYnVzeURlbGF5ZWRDYWxsSWQ9cS5zYXAuZGVsYXllZENhbGwoMTIwMCx0aGlzLGYpO2guYXBwbHkodGhpcyxbdHJ1ZV0pfSxoPWZ1bmN0aW9uKEIpe2lmKEIpe3ZhciAkPXRoaXMuJCh0aGlzLl9zQnVzeVNlY3Rpb24pLHQ9JC5maW5kKCdbdGFiaW5kZXhdJyksYz10aGlzO3RoaXMuX2J1c3lUYWJJbmRpY2VzPVtdO3QuZWFjaChmdW5jdGlvbihpLG8pe3ZhciByPXEobyksVD1yLmF0dHIoJ3RhYmluZGV4Jyk7aWYoVDwwKXJldHVybiB0cnVlO2MuX2J1c3lUYWJJbmRpY2VzLnB1c2goe3JlZjpyLHRhYmluZGV4OlR9KTtyLmF0dHIoJ3RhYmluZGV4JywtMSk7ci5iaW5kKHAsUCl9KX1lbHNle2lmKHRoaXMuX2J1c3lUYWJJbmRpY2VzKXtxLmVhY2godGhpcy5fYnVzeVRhYkluZGljZXMsZnVuY3Rpb24oaSxvKXtvLnJlZi5hdHRyKCd0YWJpbmRleCcsby50YWJpbmRleCk7by5yZWYudW5iaW5kKHAsUCl9KX10aGlzLl9idXN5VGFiSW5kaWNlcz1bXX19LFA9ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9LGY9ZnVuY3Rpb24oKXt2YXIgJD10aGlzLiQodGhpcy5fc0J1c3lTZWN0aW9uKS5jaGlsZHJlbignLnNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yJykuY2hpbGRyZW4oJy5zYXBVaUxvY2FsQnVzeUluZGljYXRvckFuaW1hdGlvbicpO3ZhciB0PXRoaXM7dC5fYnVzeUFuaW1hdGlvblRpbWVyMT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JC5jaGlsZHJlbigiOmVxKDApIikuYWRkQ2xhc3MoJ2FjdGl2ZScpOyQuY2hpbGRyZW4oIjpub3QoOmVxKDApKSIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTt0Ll9idXN5QW5pbWF0aW9uVGltZXIyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXskLmNoaWxkcmVuKCI6ZXEoMSkiKS5hZGRDbGFzcygnYWN0aXZlJyk7JC5jaGlsZHJlbigiOm5vdCg6ZXEoMSkpIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO3QuX2J1c3lBbmltYXRpb25UaW1lcjM9c2V0VGltZW91dChmdW5jdGlvbigpeyQuY2hpbGRyZW4oIjplcSgyKSIpLmFkZENsYXNzKCdhY3RpdmUnKTskLmNoaWxkcmVuKCI6bm90KDplcSgyKSkiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7dC5fYnVzeUFuaW1hdGlvblRpbWVyND1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JC5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKX0sMTUwKX0sMTUwKX0sMTUwKX0sMTUwKTt0aGlzLl9idXN5RGVsYXllZENhbGxJZD1xLnNhcC5kZWxheWVkQ2FsbCgxMjAwLHRoaXMsZil9O2EucHJvdG90eXBlLnNldEJ1c3k9ZnVuY3Rpb24oQixzKXt0aGlzLl9zQnVzeVNlY3Rpb249czt2YXIgJD10aGlzLiQodGhpcy5fc0J1c3lTZWN0aW9uKTtpZihCPT10aGlzLmdldFByb3BlcnR5KCJidXN5Iikpe3JldHVybn10aGlzLnNldFByb3BlcnR5KCJidXN5IixCLHRydWUpO2lmKEIpe3RoaXMuYWRkRGVsZWdhdGUoYixmYWxzZSx0aGlzKX1lbHNle3RoaXMucmVtb3ZlRGVsZWdhdGUoYik7aWYodGhpcy5fYnVzeUluZGljYXRvckRlbGF5ZWRDYWxsSWQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fYnVzeUluZGljYXRvckRlbGF5ZWRDYWxsSWQpO2RlbGV0ZSB0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZH19aWYoIXRoaXMuZ2V0RG9tUmVmKCkpe3JldHVybn1pZihCKXtpZih0aGlzLmdldEJ1c3lJbmRpY2F0b3JEZWxheSgpPD0wKXtBLmFwcGx5KHRoaXMpfWVsc2V7dGhpcy5fYnVzeUluZGljYXRvckRlbGF5ZWRDYWxsSWQ9cS5zYXAuZGVsYXllZENhbGwodGhpcy5nZXRCdXN5SW5kaWNhdG9yRGVsYXkoKSx0aGlzLEEpfX1lbHNle3RoaXMuJCgiYnVzeUluZGljYXRvciIpLnJlbW92ZSgpO3RoaXMuJCgpLnJlbW92ZUNsYXNzKCdzYXBVaUxvY2FsQnVzeScpO2lmKHRoaXMuX2J1c3lTdG9yZWRQb3NpdGlvbil7JC5jc3MoJ3Bvc2l0aW9uJyx0aGlzLl9idXN5U3RvcmVkUG9zaXRpb24pO2RlbGV0ZSB0aGlzLl9idXN5U3RvcmVkUG9zaXRpb259aC5hcHBseSh0aGlzLFtmYWxzZV0pO2lmKHRoaXMuX2J1c3lEZWxheWVkQ2FsbElkKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2J1c3lEZWxheWVkQ2FsbElkKTtkZWxldGUgdGhpcy5fYnVzeURlbGF5ZWRDYWxsSWR9fX07YS5wcm90b3R5cGUuaXNCdXN5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UHJvcGVydHkoImJ1c3kiKX07YS5wcm90b3R5cGUuc2V0QnVzeUluZGljYXRvckRlbGF5PWZ1bmN0aW9uKGQpe3RoaXMuc2V0UHJvcGVydHkoImJ1c3lJbmRpY2F0b3JEZWxheSIsZCx0cnVlKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuX2NsZWFudXBCdXN5SW5kaWNhdG9yPWZ1bmN0aW9uKCl7aWYodGhpcy5fYnVzeUluZGljYXRvckRlbGF5ZWRDYWxsSWQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fYnVzeUluZGljYXRvckRlbGF5ZWRDYWxsSWQpO2RlbGV0ZSB0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZH1pZih0aGlzLl9idXN5RGVsYXllZENhbGxJZCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9idXN5RGVsYXllZENhbGxJZCk7ZGVsZXRlIHRoaXMuX2J1c3lEZWxheWVkQ2FsbElkfWlmKHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjEpe2NsZWFyVGltZW91dCh0aGlzLl9idXN5QW5pbWF0aW9uVGltZXIxKTtkZWxldGUgdGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyMX1pZih0aGlzLl9idXN5QW5pbWF0aW9uVGltZXIyKXtjbGVhclRpbWVvdXQodGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyMik7ZGVsZXRlIHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjJ9aWYodGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyMyl7Y2xlYXJUaW1lb3V0KHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjMpO2RlbGV0ZSB0aGlzLl9idXN5QW5pbWF0aW9uVGltZXIzfWlmKHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjQpe2NsZWFyVGltZW91dCh0aGlzLl9idXN5QW5pbWF0aW9uVGltZXI0KTtkZWxldGUgdGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyNH19fSkoKTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlVJQXJlYScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlVJQXJlYScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1VJQXJlYSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnLCcuL0VsZW1lbnQnLCdqcXVlcnkuc2FwLmFjdCcsJ2pxdWVyeS5zYXAudWknXSxmdW5jdGlvbihxLE0sRSl7InVzZSBzdHJpY3QiO3ZhciByPXEuc2FwLmxvZy5nZXRMb2dnZXIoInNhcC51aS5SZW5kZXJpbmciLCgod2luZG93WyJzYXAtdWktY29uZmlnIl0mJndpbmRvd1sic2FwLXVpLWNvbmZpZyJdWyJ4eC1kZWJ1Z1JlbmRlcmluZyJdKXx8L3NhcC11aS14eC1kZWJ1ZyhSfC1yKWVuZGVyaW5nPSh0cnVlfHh8WCkvLnRlc3QoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoKSk/cS5zYXAubG9nLkxldmVsLkRFQlVHOk1hdGgubWluKHEuc2FwLmxvZy5MZXZlbC5JTkZPLHEuc2FwLmxvZy5nZXRMZXZlbCgpKSksZD1mdW5jdGlvbihjKXtyZXR1cm4gY30sRD1xLm5vb3AsZj1xLm5vb3A7aWYoci5pc0xvZ2dhYmxlKCkpe2Q9ZnVuY3Rpb24oYyl7dmFyIGw7dHJ5e3Rocm93IG5ldyBFcnJvcigpfWNhdGNoKGUpe2w9ZS5zdGFja3x8ZS5zdGFja3RyYWNlfHwoZS5zb3VyY2VVUkw/ZS5zb3VyY2VVUkwrIjoiK2UubGluZTpudWxsKTtsPWw/bC5zcGxpdCgvXG5ccyovZykuc2xpY2UoMik6dW5kZWZpbmVkfXJldHVybntvYmo6Yyxsb2NhdGlvbjpsfX07RD1mdW5jdGlvbih0LGMpe3ZhciBDPXNhcC51aS5nZXRDb3JlKCksUj17fSxuLG87Zm9yKG4gaW4gYyl7bz1DLmJ5SWQobik7UltuXT17dHlwZTpvP28uZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCk6KGNbbl0ub2JqPT09dD8iVUlBcmVhIjoiKG5vIHN1Y2ggY29udHJvbCkiKSxsb2NhdGlvbjpjW25dLmxvY2F0aW9uLHJlYXNvbjpjW25dLnJlYXNvbn19ci5kZWJ1ZygiICBVSUFyZWEgJyIrdC5nZXRJZCgpKyInLCBwZW5kaW5nIHVwZGF0ZXM6ICIrSlNPTi5zdHJpbmdpZnkoUixudWxsLCJcdCIpKX07Zj1mdW5jdGlvbihiLGEpe3ZhciBuO2ZvcihuIGluIGEpe2lmKGJbbl0hPW51bGwpe2lmKGJbbl0ub2JqIT09YVtuXS5vYmope2Fbbl0ucmVhc29uPSJyZXBsYWNlZCBkdXJpbmcgcmVuZGVyaW5nIn1lbHNle2Fbbl0ucmVhc29uPSJpbnZhbGlkYXRlZCBhZ2FpbiBkdXJpbmcgcmVuZGVyaW5nIn19ZWxzZXthW25dLnJlYXNvbj0iaW52YWxpZGF0ZWQgZHVyaW5nIHJlbmRlcmluZyJ9fX19dmFyIFU9TS5leHRlbmQoInNhcC51aS5jb3JlLlVJQXJlYSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGMsUil7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybn1NLmFwcGx5KHRoaXMpO3RoaXMub0NvcmU9Yzt0aGlzLmJMb2NrZWQ9ZmFsc2U7dGhpcy5iSW5pdGlhbD10cnVlO3RoaXMuYUNvbnRlbnRUb1JlbW92ZT1bXTt0aGlzLmJOZWVkc1JlcmVuZGVyaW5nPWZhbHNlO2lmKFIhPW51bGwpe3RoaXMuc2V0Um9vdE5vZGUoUik7dGhpcy5iTmVlZHNSZXJlbmRlcmluZz10aGlzLmJOZWVkc1JlcmVuZGVyaW5nJiYhcS5zYXAuZG9tQnlJZChSLmlkKyItSW5pdCIpfXRoaXMubUludmFsaWRhdGVkQ29udHJvbHM9e307aWYoIXRoaXMuYk5lZWRzUmVyZW5kZXJpbmcpe3RoaXMuYlJlbmRlclNlbGY9ZmFsc2V9ZWxzZXt0aGlzLm9Db3JlLmFkZEludmFsaWRhdGVkVUlBcmVhKHRoaXMpfX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJzZXRSb290Tm9kZSIsImdldFJvb3ROb2RlIiwic2V0Um9vdENvbnRyb2wiLCJnZXRSb290Q29udHJvbCIsImxvY2siLCJ1bmxvY2siLCJpc0xvY2tlZCJdLGFnZ3JlZ2F0aW9uczp7Y29udGVudDp7bmFtZToiY29udGVudCIsdHlwZToic2FwLnVpLmNvcmUuQ29udHJvbCIsbXVsdGlwbGU6dHJ1ZSxzaW5ndWxhck5hbWU6ImNvbnRlbnQifSxkZXBlbmRlbnRzOntuYW1lOiJkZXBlbmRlbnRzIix0eXBlOiJzYXAudWkuY29yZS5Db250cm9sIixtdWx0aXBsZTp0cnVlfX19fSk7VS5wcm90b3R5cGUuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGU+MH07VS5wcm90b3R5cGUuZ2V0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vUm9vdE5vZGU/dGhpcy5vUm9vdE5vZGUuaWQ6bnVsbH07VS5wcm90b3R5cGUuZ2V0VUlBcmVhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O1UucHJvdG90eXBlLnNldFJvb3ROb2RlPWZ1bmN0aW9uKFIpe2lmKHRoaXMub1Jvb3ROb2RlPT09Uil7cmV0dXJufWlmKHRoaXMub1Jvb3ROb2RlKXt0aGlzLl9vbmRldGFjaCgpfXRoaXMub1Jvb3ROb2RlPVI7aWYodGhpcy5nZXRDb250ZW50KCkubGVuZ3RoPjApe3RoaXMuaW52YWxpZGF0ZSgpfWlmKHRoaXMub1Jvb3ROb2RlKXt0aGlzLl9vbmF0dGFjaCgpfX07VS5wcm90b3R5cGUuZ2V0Um9vdE5vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vUm9vdE5vZGV9O1UucHJvdG90eXBlLnNldFJvb3RDb250cm9sPWZ1bmN0aW9uKFIpe3RoaXMucmVtb3ZlQWxsQ29udGVudCgpO3RoaXMuYWRkQ29udGVudChSKX07VS5wcm90b3R5cGUuZ2V0Um9vdENvbnRyb2w9ZnVuY3Rpb24oaSl7dmFyIGM9dGhpcy5nZXRDb250ZW50KCk7aWYoYy5sZW5ndGg+MCl7aWYoaT49MCYmaTxjLmxlbmd0aCl7cmV0dXJuIGNbaV19cmV0dXJuIGNbMF19cmV0dXJuIG51bGx9O1UucHJvdG90eXBlLl9hZGRSZW1vdmVkQ29udGVudD1mdW5jdGlvbihvKXtpZih0aGlzLm9Sb290Tm9kZSYmbyl7dGhpcy5hQ29udGVudFRvUmVtb3ZlLnB1c2gobyl9fTtVLnByb3RvdHlwZS5hZGRDb250ZW50PWZ1bmN0aW9uKGMsXyl7dGhpcy5hZGRBZ2dyZWdhdGlvbigiY29udGVudCIsYyxfKTtpZihfIT09dHJ1ZSl7dGhpcy5pbnZhbGlkYXRlKCl9cmV0dXJuIHRoaXN9O1UucHJvdG90eXBlLnJlbW92ZUNvbnRlbnQ9ZnVuY3Rpb24oYyxfKXt2YXIgQz10aGlzLnJlbW92ZUFnZ3JlZ2F0aW9uKCJjb250ZW50IixjLF8pO2lmKCFfKXt2YXIgbztpZihDJiZDLmdldERvbVJlZil7bz1DLmdldERvbVJlZigpfXRoaXMuX2FkZFJlbW92ZWRDb250ZW50KG8pfXJldHVybiBDfTtVLnByb3RvdHlwZS5yZW1vdmVBbGxDb250ZW50PWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5yZW1vdmVBbGxBZ2dyZWdhdGlvbigiY29udGVudCIpO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXt2YXIgbzt2YXIgQz1jW2ldO2lmKEMmJkMuZ2V0RG9tUmVmKXtvPUMuZ2V0RG9tUmVmKCl9dGhpcy5fYWRkUmVtb3ZlZENvbnRlbnQobyl9cmV0dXJuIGN9O1UucHJvdG90eXBlLmRlc3Ryb3lDb250ZW50PWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRDb250ZW50KCk7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe3ZhciBvO3ZhciBDPWNbaV07aWYoQyYmQy5nZXREb21SZWYpe289Qy5nZXREb21SZWYoKX10aGlzLl9hZGRSZW1vdmVkQ29udGVudChvKX10aGlzLmRlc3Ryb3lBZ2dyZWdhdGlvbigiY29udGVudCIpO3JldHVybiB0aGlzfTtVLnByb3RvdHlwZS5sb2NrPWZ1bmN0aW9uKCl7dGhpcy5iTG9ja2VkPXRydWV9O1UucHJvdG90eXBlLnVubG9jaz1mdW5jdGlvbigpe2lmKHRoaXMuYkxvY2tlZCYmdGhpcy5iTmVlZHNSZXJlbmRlcmluZyl7dGhpcy5vQ29yZS5hZGRJbnZhbGlkYXRlZFVJQXJlYSh0aGlzKX10aGlzLmJMb2NrZWQ9ZmFsc2V9O1UucHJvdG90eXBlLmlzTG9ja2VkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYkxvY2tlZH07VS5wcm90b3R5cGUuZ2V0QmluZGluZ0NvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07VS5wcm90b3R5cGUuZ2V0RXZlbnRpbmdQYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQ29yZX07VS5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gcS5zYXAuZG9tQnlJZCh0aGlzLmdldElkKCkpIT1udWxsfTtVLnByb3RvdHlwZS5pbnZhbGlkYXRlPWZ1bmN0aW9uKCl7dGhpcy5hZGRJbnZhbGlkYXRlZENvbnRyb2wodGhpcyl9O1UucHJvdG90eXBlLmFkZEludmFsaWRhdGVkQ29udHJvbD1mdW5jdGlvbihjKXtpZih0aGlzLmJSZW5kZXJTZWxmKXtyZXR1cm59aWYoIXRoaXMuYk5lZWRzUmVyZW5kZXJpbmcpe3RoaXMub0NvcmUuYWRkSW52YWxpZGF0ZWRVSUFyZWEodGhpcyl9dmFyIGk9Yy5nZXRJZCgpO2lmKGM9PT10aGlzKXt0aGlzLmJSZW5kZXJTZWxmPXRydWU7dGhpcy5iTmVlZHNSZXJlbmRlcmluZz10cnVlO3RoaXMubUludmFsaWRhdGVkQ29udHJvbHM9e307dGhpcy5tSW52YWxpZGF0ZWRDb250cm9sc1tpXT1kKHRoaXMpO3JldHVybn1pZih0aGlzLm1JbnZhbGlkYXRlZENvbnRyb2xzW2ldKXtyZXR1cm59aWYoIXRoaXMuYlJlbmRlclNlbGYpe3RoaXMubUludmFsaWRhdGVkQ29udHJvbHNbaV09ZChjKTt0aGlzLmJOZWVkc1JlcmVuZGVyaW5nPXRydWV9fTtVLnByb3RvdHlwZS5yZXJlbmRlcj1mdW5jdGlvbihhKXt2YXIgdD10aGlzO2Z1bmN0aW9uIGMoKXt0LmJSZW5kZXJTZWxmPWZhbHNlO3QuYUNvbnRlbnRUb1JlbW92ZT1bXTt0Lm1JbnZhbGlkYXRlZENvbnRyb2xzPXt9O3QuYk5lZWRzUmVyZW5kZXJpbmc9ZmFsc2V9aWYoYSl7dGhpcy5iTmVlZHNSZXJlbmRlcmluZz10cnVlfWlmKHRoaXMuYkxvY2tlZHx8IXRoaXMuYk5lZWRzUmVyZW5kZXJpbmcpe3JldHVybiBmYWxzZX12YXIgUj10aGlzLmJSZW5kZXJTZWxmLEM9dGhpcy5hQ29udGVudFRvUmVtb3ZlLEk9dGhpcy5tSW52YWxpZGF0ZWRDb250cm9scyx1PWZhbHNlO2MoKTtxLnNhcC5tZWFzdXJlLnBhdXNlKCJyZW5kZXJQZW5kaW5nVUlVcGRhdGVzIik7cS5zYXAubWVhc3VyZS5zdGFydCh0aGlzLmdldElkKCkrIi0tLXJlcmVuZGVyIiwiUmVyZW5kZXJpbmcgb2YgIit0aGlzLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpKTtEKHRoaXMsSSk7aWYoUil7aWYodGhpcy5vUm9vdE5vZGUpe3IuZGVidWcoIkZ1bGwgUmVuZGVyaW5nIG9mIFVJQXJlYSAnIit0aGlzLmdldElkKCkrIiciKTtzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLnByZXNlcnZlQ29udGVudCh0aGlzLm9Sb290Tm9kZSxmYWxzZSx0aGlzLmJJbml0aWFsKTt0aGlzLmJJbml0aWFsPWZhbHNlO3ZhciBiPWZ1bmN0aW9uKGgsail7dmFyIGw9aC5sZW5ndGg7dmFyIGs7Zm9yKHZhciBpPTA7aTxsO2krKyl7az1qP2hbaV0uZ2V0RG9tUmVmKCk6aFtpXTtpZihrJiYhc2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5pc1ByZXNlcnZlZENvbnRlbnQoaykmJnQub1Jvb3ROb2RlPT09ay5wYXJlbnROb2RlKXtxKGspLnJlbW92ZSgpfX1yZXR1cm4gbH07YihDKTt2YXIgZT10aGlzLmdldENvbnRlbnQoKTt2YXIgbD1iKGUsdHJ1ZSk7Zm9yKHZhciBpPTA7aTxsO2krKyl7dGhpcy5vQ29yZS5vUmVuZGVyTWFuYWdlci5yZW5kZXIoZVtpXSx0aGlzLm9Sb290Tm9kZSx0cnVlKX11PXRydWV9ZWxzZXtyLmRlYnVnKCJGdWxsIFJlbmRlcmluZyBvZiBVSUFyZWEgJyIrdGhpcy5nZXRJZCgpKyInIHBvc3Rwb25lZCwgbm8gcm9vdCBub2RlIil9fWVsc2V7dmFyIGc9ZnVuY3Rpb24oQSl7d2hpbGUoQSYmQSE9PXQpe2lmKEkuaGFzT3duUHJvcGVydHkoQS5nZXRJZCgpKSl7cmV0dXJuIHRydWV9aWYoQSYmQS5nZXRNZXRhZGF0YSYmQS5nZXRNZXRhZGF0YSgpLmlzSW5zdGFuY2VPZigic2FwLnVpLmNvcmUuUG9wdXBJbnRlcmZhY2UiKSl7YnJlYWt9QT1BLmdldFBhcmVudCgpfXJldHVybiBmYWxzZX07Zm9yKHZhciBuIGluIEkpe3ZhciBvPXRoaXMub0NvcmUuYnlJZChuKTtpZihvJiYhZyhvLmdldFBhcmVudCgpKSl7by5yZXJlbmRlcigpO3U9dHJ1ZX19fWYoSSx0aGlzLm1JbnZhbGlkYXRlZENvbnRyb2xzKTtxLnNhcC5tZWFzdXJlLmVuZCh0aGlzLmdldElkKCkrIi0tLXJlcmVuZGVyIik7cS5zYXAubWVhc3VyZS5yZXN1bWUoInJlbmRlclBlbmRpbmdVSVVwZGF0ZXMiKTtyZXR1cm4gdX07VS5wcm90b3R5cGUuX29uQ29udHJvbFJlbmRlcmVkPWZ1bmN0aW9uKGMpe3ZhciBpPWMuZ2V0SWQoKTtpZih0aGlzLm1JbnZhbGlkYXRlZENvbnRyb2xzW2ldKXtkZWxldGUgdGhpcy5tSW52YWxpZGF0ZWRDb250cm9sc1tpXX19O1UucmVyZW5kZXJDb250cm9sPWZ1bmN0aW9uKGMpe3ZhciBvPWM/Yy5nZXREb21SZWYoKTpudWxsO3ZhciBwPW8mJm8ucGFyZW50Tm9kZTtpZihwKXt2YXIgdT1jLmdldFVJQXJlYSgpO3ZhciBhPXU/dS5vQ29yZS5vUmVuZGVyTWFuYWdlcjpzYXAudWkuZ2V0Q29yZSgpLmNyZWF0ZVJlbmRlck1hbmFnZXIoKTtyLmRlYnVnKCJSZXJlbmRlciBDb250cm9sICciK2MuZ2V0SWQoKSsiJyIrKHU/IiI6IiAodXNpbmcgYSB0ZW1wLiBSZW5kZXJNYW5hZ2VyKSIpKTtzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLnByZXNlcnZlQ29udGVudChvLHRydWUsZmFsc2UpO2EucmVuZGVyKGMscCl9ZWxzZXt2YXIgdT1jLmdldFVJQXJlYSgpO3UmJnUuX29uQ29udHJvbFJlbmRlcmVkKGMpO3Iud2FybmluZygiQ291bGRuJ3QgcmVyZW5kZXIgJyIrYy5nZXRJZCgpKyInLCBhcyBpdHMgRE9NIGxvY2F0aW9uIGNvdWxkbid0IGJlIGRldGVybWluZWQiKX19O1UucHJvdG90eXBlLl9oYW5kbGVFdmVudD1mdW5jdGlvbihlKXt2YXIgbz1udWxsO289cShlLnRhcmdldCkuY29udHJvbCgwKTtxLnNhcC5hY3QucmVmcmVzaCgpO2lmKG89PT1udWxsKXtyZXR1cm59aWYoZS5pc01hcmtlZCgiZGVsYXllZE1vdXNlRXZlbnQiKSl7cmV0dXJufWlmKGUuaXNNYXJrZWQoImhhbmRsZWRCeVVJQXJlYSIpKXtlLnNldE1hcmsoImZpcnN0VUlBcmVhIixmYWxzZSk7cmV0dXJufWUuc2V0TWFya2VkKCJmaXJzdFVJQXJlYSIpO2Uuc3JjQ29udHJvbD1vO2lmKGUudHlwZT09PSJjb250ZXh0bWVudSImJmUuc2hpZnRLZXkmJmUuYWx0S2V5JiYhIShlLm1ldGFLZXl8fGUuY3RybEtleSkpe3Euc2FwLmxvZy5pbmZvKCJTdXBwcmVzc2VkIGZvcndhcmRpbmcgdGhlIGNvbnRleHRtZW51IGV2ZW50IGFzIGNvbnRyb2wgZXZlbnQgYmVjYXVzZSBDVFJMK1NISUZUK0FMVCBpcyBwcmVzc2VkISIpO3JldHVybn10aGlzLm9Db3JlLl9oYW5kbGVDb250cm9sRXZlbnQoZSx0aGlzLmdldElkKCkpO2lmKHRoaXMuYkxvY2tlZHx8dGhpcy5vQ29yZS5pc0xvY2tlZCgpKXtyZXR1cm59dmFyIGE9W107aWYoZS5nZXRQc2V1ZG9UeXBlcyl7YT1lLmdldFBzZXVkb1R5cGVzKCl9YS5wdXNoKGUudHlwZSk7d2hpbGUobyYmbyBpbnN0YW5jZW9mIEUmJm8uaXNBY3RpdmUoKSYmIWUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7Zm9yKHZhciBpPTAsYj1hLmxlbmd0aDtpPGI7aSsrKXt2YXIgdD1hW2ldO2UudHlwZT10O2UuY3VycmVudFRhcmdldD1vLmdldERvbVJlZigpO28uX2hhbmRsZUV2ZW50KGUpO2lmKGUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSl7YnJlYWt9fWlmKGUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7YnJlYWt9aWYoby5iU3RvcEV2ZW50QnViYmxpbmcpe2JyZWFrfXZhciBjPW8uZ2V0RG9tUmVmKCk7aWYoIWMpe2JyZWFrfWM9Yy5wYXJlbnROb2RlO289bnVsbDtpZihlLmlzTWFya2VkKCJmcm9tTW91c2VvdXQiKSYmcS5zYXAuY29udGFpbnNPckVxdWFscyhjLGUucmVsYXRlZFRhcmdldCkpe2JyZWFrfXdoaWxlKGMmJmMhPT10aGlzLmdldFJvb3ROb2RlKCkpe2lmKGMuaWQpe289cShjKS5jb250cm9sKDApO2lmKG8pe2JyZWFrfX1jPWMucGFyZW50Tm9kZX19ZS5jdXJyZW50VGFyZ2V0PXRoaXMuZ2V0Um9vdE5vZGUoKTsoZS5vcmlnaW5hbEV2ZW50fHxlKS5fc2FwdWlfaGFuZGxlZEJ5VUlBcmVhPXRydWU7aWYoZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtxLnNhcC5sb2cuZGVidWcoIiciK2UudHlwZSsiJyBwcm9wYWdhdGlvbiBoYXMgYmVlbiBzdG9wcGVkIil9dmFyIG49ZS50eXBlO2lmKG4hPSJtb3VzZW1vdmUiJiZuIT0ibW91c2VvdmVyIiYmbiE9InNjcm9sbCImJm4hPSJtb3VzZW91dCIpe3ZhciBnPXEoZS50YXJnZXQpLmNvbnRyb2woMCk7aWYoZyl7cS5zYXAubG9nLmRlYnVnKCJFdmVudCBmaXJlZDogJyIrZS50eXBlKyInIG9uICIrZywiIiwic2FwLnVpLmNvcmUuVUlBcmVhIil9ZWxzZXtxLnNhcC5sb2cuZGVidWcoIkV2ZW50IGZpcmVkOiAnIitlLnR5cGUrIiciLCIiLCJzYXAudWkuY29yZS5VSUFyZWEiKX19fTtVLnByb3RvdHlwZS5fb25hdHRhY2g9ZnVuY3Rpb24oKXt2YXIgbz10aGlzLmdldFJvb3ROb2RlKCk7aWYobz09bnVsbCl7cmV0dXJufXEobykuYXR0cigiZGF0YS1zYXAtdWktYXJlYSIsby5pZCkuYmluZChxLnNhcC5Db250cm9sRXZlbnRzLmpvaW4oIiAiKSxxLnByb3h5KHRoaXMuX2hhbmRsZUV2ZW50LHRoaXMpKX07VS5wcm90b3R5cGUuX29uZGV0YWNoPWZ1bmN0aW9uKCl7dmFyIG89dGhpcy5nZXRSb290Tm9kZSgpO2lmKG89PW51bGwpe3JldHVybn1xKG8pLnJlbW92ZUF0dHIoImRhdGEtc2FwLXVpLWFyZWEiKS51bmJpbmQoKX07VS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoIlVJQXJlYSBjYW4ndCBiZSBjbG9uZWQiKX07VS5fb1JlbmRlckxvZz1yO3JldHVybiBVfSx0cnVlKX07c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ29yZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9EZXZpY2UnLCdzYXAvdWkvR2xvYmFsJywnc2FwL3VpL2Jhc2UvRGF0YVR5cGUnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnLi9Db21wb25lbnQnLCcuL0NvbmZpZ3VyYXRpb24nLCcuL0NvbnRyb2wnLCcuL0VsZW1lbnQnLCcuL0VsZW1lbnRNZXRhZGF0YScsJy4vRm9jdXNIYW5kbGVyJywnLi9SZW5kZXJNYW5hZ2VyJywnLi9SZXNpemVIYW5kbGVyJywnLi9UaGVtZUNoZWNrJywnLi9VSUFyZWEnLCcuL3RtcGwvVGVtcGxhdGUnLCdqcXVlcnkuc2FwLmFjdCcsJ2pxdWVyeS5zYXAuZG9tJywnanF1ZXJ5LnNhcC5ldmVudHMnLCdqcXVlcnkuc2FwLm1vYmlsZScsJ2pxdWVyeS5zYXAucHJvcGVydGllcycsJ2pxdWVyeS5zYXAucmVzb3VyY2VzJywnanF1ZXJ5LnNhcC5zY3JpcHQnXSxmdW5jdGlvbihxLEQsRyxhLEUsQyxjLGQsZSxnLEYsUixoLFQsVSxqKXsidXNlIHN0cmljdCI7dmFyIGs9RS5leHRlbmQoInNhcC51aS5jb3JlLkNvcmUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe2lmKHNhcC51aS5nZXRDb3JlJiZzYXAudWkuZ2V0Q29yZSgpKXtyZXR1cm4gc2FwLnVpLmdldENvcmUoKX12YXIgdD10aGlzLGw9cS5zYXAubG9nLE09InNhcC51aS5jb3JlLkNvcmUiO0UuYXBwbHkodGhpcyk7dGhpcy5iQm9vdGVkPWZhbHNlO3RoaXMuYkluaXRpYWxpemVkPWZhbHNlO3RoaXMuYkRvbVJlYWR5PWZhbHNlO3RoaXMuYVBsdWdpbnM9W107dGhpcy5tTGlicmFyaWVzPXt9O3RoaXMubVJlc291cmNlQnVuZGxlcz17fTt0aGlzLm1VSUFyZWFzPXt9O3RoaXMub01vZGVscz17fTt0aGlzLm9FdmVudEJ1cz1udWxsO3RoaXMubUVsZW1lbnRzPXt9O3RoaXMubU9iamVjdHM9eyJjb21wb25lbnQiOnt9LCJ0ZW1wbGF0ZSI6e319O3RoaXMub1Jvb3RDb21wb25lbnQ9bnVsbDt0aGlzLmFJbml0TGlzdGVuZXJzPVtdO3RoaXMuYkluaXRMZWdhY3lMaWI9ZmFsc2U7bC5pbmZvKCJDcmVhdGluZyBDb3JlIixudWxsLE0pO3RoaXMub0NvbmZpZ3VyYXRpb249bmV3IGModGhpcyk7aWYodGhpcy5vQ29uZmlndXJhdGlvblsieHgtYmluZGluZ1N5bnRheCJdPT09ImNvbXBsZXgiKXtzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXI9c2FwLnVpLmJhc2UuQmluZGluZ1BhcnNlci5jb21wbGV4UGFyc2VyfWlmKHRoaXMub0NvbmZpZ3VyYXRpb25bInh4LWRlc2lnbk1vZGUiXT09dHJ1ZSl7c2FwLnVpLmJhc2UuQmluZGluZ1BhcnNlci5fa2VlcEJpbmRpbmdTdHJpbmdzPXRydWV9Zy5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oSyl7dC5yZWdpc3RlckVsZW1lbnRDbGFzcyhLKX07ZS5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oKXt0LnJlZ2lzdGVyRWxlbWVudCh0aGlzKX07ZS5wcm90b3R5cGUuZGVyZWdpc3Rlcj1mdW5jdGlvbigpe3QuZGVyZWdpc3RlckVsZW1lbnQodGhpcyl9O0MucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKCl7dC5yZWdpc3Rlck9iamVjdCh0aGlzKX07Qy5wcm90b3R5cGUuZGVyZWdpc3Rlcj1mdW5jdGlvbigpe3QuZGVyZWdpc3Rlck9iamVjdCh0aGlzKX07ai5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oKXt0LnJlZ2lzdGVyT2JqZWN0KHRoaXMpfTtqLnByb3RvdHlwZS5kZXJlZ2lzdGVyPWZ1bmN0aW9uKCl7dC5kZXJlZ2lzdGVyT2JqZWN0KHRoaXMpfTt2YXIgbT10aGlzLm9Db25maWd1cmF0aW9uLm1vZHVsZXM7aWYodGhpcy5vQ29uZmlndXJhdGlvbi5nZXREZWJ1ZygpKXttLnVuc2hpZnQoInNhcC11aS1kZWJ1ZyIpfXZhciBpPXEuaW5BcnJheSgic2FwLnVpLmNvcmUubGlicmFyeSIsbSk7aWYoaSE9MCl7aWYoaT4wKXttLnNwbGljZShpLDEpfW0udW5zaGlmdCgic2FwLnVpLmNvcmUubGlicmFyeSIpfWwuaW5mbygiRGVjbGFyZWQgbW9kdWxlczogIittLE0pO3ZhciBvPXdpbmRvd1sic2FwLXVpLWNvbmZpZyJdO2lmKHRoaXMub0NvbmZpZ3VyYXRpb24udGhlbWVSb290KXtvPW98fHt9O28udGhlbWVyb290cz1vLnRoZW1lcm9vdHN8fHt9O28udGhlbWVyb290c1t0aGlzLm9Db25maWd1cmF0aW9uLmdldFRoZW1lKCldPXRoaXMub0NvbmZpZ3VyYXRpb24udGhlbWVSb290fWlmKG8pe2lmKG8udGhlbWVyb290cyl7Zm9yKHZhciBmIGluIG8udGhlbWVyb290cyl7dmFyIG49by50aGVtZXJvb3RzW2ZdO2lmKHR5cGVvZiBuPT09InN0cmluZyIpe3RoaXMuc2V0VGhlbWVSb290KGYsbil9ZWxzZXtmb3IodmFyIHAgaW4gbil7aWYocC5sZW5ndGg+MCl7dGhpcy5zZXRUaGVtZVJvb3QoZixbcF0sbltwXSl9ZWxzZXt0aGlzLnNldFRoZW1lUm9vdChmLG5bcF0pfX19fX19dGhpcy5zVGhlbWU9dGhpcy5vQ29uZmlndXJhdGlvbi5nZXRUaGVtZSgpO3EoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5hZGRDbGFzcygic2FwVWlUaGVtZS0iK3RoaXMuc1RoZW1lKTtsLmluZm8oIkRlY2xhcmVkIHRoZW1lICIrdGhpcy5zVGhlbWUsbnVsbCxNKTtpZih0aGlzLm9Db25maWd1cmF0aW9uLmdldFJUTCgpKXtxKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXR0cigiZGlyIiwicnRsIik7bC5pbmZvKCJSVEwgbW9kZSBhY3RpdmF0ZWQiLG51bGwsTSl9dmFyICQ9cSgiaHRtbCIpO3ZhciBiPUQuYnJvd3Nlcjt2YXIgcz1iLm5hbWU7aWYocz09PWIuQlJPV1NFUi5DSFJPTUUpe3EuYnJvd3Nlci5zYWZhcmk9ZmFsc2U7cS5icm93c2VyLmNocm9tZT10cnVlfWVsc2UgaWYocz09PWIuQlJPV1NFUi5TQUZBUkkpe3EuYnJvd3Nlci5zYWZhcmk9dHJ1ZTtxLmJyb3dzZXIuY2hyb21lPWZhbHNlO2lmKGIubW9iaWxlKXtzPSJtIitzfX1pZihzKXtxLmJyb3dzZXIuZlZlcnNpb249Yi52ZXJzaW9uO3EuYnJvd3Nlci5tb2JpbGU9Yi5tb2JpbGU7cz1zK01hdGguZmxvb3IoYi52ZXJzaW9uKTskLmF0dHIoImRhdGEtc2FwLXVpLWJyb3dzZXIiLHMpO2wuZGVidWcoIkJyb3dzZXItSWQ6ICIrcyxudWxsLE0pfSQuYXR0cigiZGF0YS1zYXAtdWktb3MiLEQub3MubmFtZStELm9zLnZlcnNpb25TdHIpO3ZhciB1PW51bGw7c3dpdGNoKEQub3MubmFtZSl7Y2FzZSBELm9zLk9TLklPUzp1PSJzYXAtaW9zIjticmVhaztjYXNlIEQub3MuT1MuQU5EUk9JRDp1PSJzYXAtYW5kcm9pZCI7YnJlYWs7Y2FzZSBELm9zLk9TLkJMQUNLQkVSUlk6dT0ic2FwLWJiIjticmVhaztjYXNlIEQub3MuT1MuV0lORE9XU19QSE9ORTp1PSJzYXAtd2lucGhvbmUiO2JyZWFrfWlmKHUpeyQuYWRkQ2xhc3ModSl9aWYodGhpcy5vQ29uZmlndXJhdGlvbi5nZXRXZWlucmVJZCgpKXtsLmluZm8oIlN0YXJ0aW5nIFdFSU5SRSBSZW1vdGUgV2ViIEluc3BlY3RvciIpO3ZhciB3PSI8c2NyaXB0IHNyYz1cIiI7dys9dGhpcy5vQ29uZmlndXJhdGlvbi5nZXRXZWlucmVTZXJ2ZXIoKTt3Kz0iL3RhcmdldC90YXJnZXQtc2NyaXB0LW1pbi5qcyMiO3crPXEuc2FwLmVuY29kZVVSTCh0aGlzLm9Db25maWd1cmF0aW9uLmdldFdlaW5yZUlkKCkpO3crPSJcIj48L3NjcmlwdD4iO2RvY3VtZW50LndyaXRlKHcpfXNhcC51aS5nZXRDb3JlPXEuc2FwLmdldHRlcih0aGlzLmdldEludGVyZmFjZSgpKTtSLmluaXRIVE1MNVN1cHBvcnQoKTt0aGlzLm9SZW5kZXJNYW5hZ2VyPW5ldyBSKCk7dmFyIFM9cS5zYXAuc3luY1BvaW50KCJVSTUgRG9jdW1lbnQgUmVhZHkiLGZ1bmN0aW9uKE8sSyl7dC5oYW5kbGVMb2FkKCl9KTt2YXIgdj1TLnN0YXJ0VGFzaygiZG9jdW1lbnQucmVhZHkiKTt2YXIgeD1TLnN0YXJ0VGFzaygicHJlbG9hZCBhbmQgYm9vdCIpO3EoZnVuY3Rpb24oKXtsLnRyYWNlKCJkb2N1bWVudCBpcyByZWFkeSIpO1MuZmluaXNoVGFzayh2KX0pO3ZhciB5PXEuc2FwLnN5bmNQb2ludCgiVUk1IENvcmUgUHJlbG9hZHMgYW5kIEJvb3RzdHJhcCBTY3JpcHQiLGZ1bmN0aW9uKE8sSyl7bC50cmFjZSgiQ29yZSBsb2FkZWQ6IG9wZW49IitPKyIsIGZhaWx1cmVzPSIrSyk7dC5fYm9vdCgpO1MuZmluaXNoVGFzayh4KX0pO3ZhciB6PXRoaXMub0NvbmZpZ3VyYXRpb25bInh4LWJvb3RUYXNrIl07aWYoeil7dmFyIEE9eS5zdGFydFRhc2soImN1c3RvbSBib290IHRhc2siKTt6KGZ1bmN0aW9uKEspe3kuZmluaXNoVGFzayhBLHR5cGVvZiBLPT09InVuZGVmaW5lZCJ8fEs9PT10cnVlKX0pfXZhciBCPW5ldyBxLnNhcC5WZXJzaW9uKHRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0Q29tcGF0aWJpbGl0eVZlcnNpb24oImZsZXhCb3hQb2x5ZmlsbCIpKTtpZihCLmNvbXBhcmVUbygiMS4xNiIpPj0wKXtxLnN1cHBvcnQudXNlRmxleEJveFBvbHlmaWxsPWZhbHNlfWVsc2UgaWYoIXEuc3VwcG9ydC5mbGV4Qm94TGF5b3V0JiYhcS5zdXBwb3J0Lm5ld0ZsZXhCb3hMYXlvdXQmJiFxLnN1cHBvcnQuaWUxMEZsZXhCb3hMYXlvdXQpe3Euc3VwcG9ydC51c2VGbGV4Qm94UG9seWZpbGw9dHJ1ZX1lbHNle3Euc3VwcG9ydC51c2VGbGV4Qm94UG9seWZpbGw9ZmFsc2V9dmFyIEg9eS5zdGFydFRhc2soImJvb3RzdHJhcCBzY3JpcHQiKTt0aGlzLmJvb3Q9ZnVuY3Rpb24oKXtpZih0aGlzLmJCb290ZWQpe3JldHVybn10aGlzLmJCb290ZWQ9dHJ1ZTt5LmZpbmlzaFRhc2soSCl9O3ZhciBQPXRoaXMub0NvbmZpZ3VyYXRpb24ucHJlbG9hZDtpZih3aW5kb3dbInNhcC11aS1kZWJ1ZyJdKXtQPSIifWlmKFA9PT0iYXV0byIpe1A9KHdpbmRvd1sic2FwLXVpLW9wdGltaXplZCJdJiYhdGhpcy5vQ29uZmlndXJhdGlvblsneHgtbG9hZEFsbE1vZGUnXSk/InN5bmMiOiIifXRoaXMub0NvbmZpZ3VyYXRpb24ucHJlbG9hZD1QO2lmKFA9PT0ic3luYyJ8fFA9PT0iYXN5bmMiKXt2YXIgST1QIT09InN5bmMiO3EuZWFjaChtLGZ1bmN0aW9uKGksSyl7aWYoSy5tYXRjaCgvXC5saWJyYXJ5JC8pKXtxLnNhcC5wcmVsb2FkTW9kdWxlcyhLKyItcHJlbG9hZCIsSSx5KX19KX12YXIgSj10aGlzLm9Db25maWd1cmF0aW9uLmdldEFwcENhY2hlQnVzdGVyKCk7aWYoSiYmSi5sZW5ndGg+MCl7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuQXBwQ2FjaGVCdXN0ZXIiKTtzYXAudWkuY29yZS5BcHBDYWNoZUJ1c3Rlci5ib290KHkpfX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJib290IiwiaXNJbml0aWFsaXplZCIsImlzVGhlbWVBcHBsaWVkIiwiYXR0YWNoSW5pdEV2ZW50IiwiYXR0YWNoSW5pdCIsImdldFJlbmRlck1hbmFnZXIiLCJjcmVhdGVSZW5kZXJNYW5hZ2VyIiwiZ2V0Q29uZmlndXJhdGlvbiIsInNldFJvb3QiLCJjcmVhdGVVSUFyZWEiLCJnZXRVSUFyZWEiLCJnZXRVSURpcnR5IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDdXJyZW50Rm9jdXNlZENvbnRyb2xJZCIsImdldENvbnRyb2wiLCJnZXRDb21wb25lbnQiLCJnZXRUZW1wbGF0ZSIsImxvY2siLCJ1bmxvY2siLCJpc0xvY2tlZCIsImF0dGFjaEV2ZW50IiwiZGV0YWNoRXZlbnQiLCJhcHBseUNoYW5nZXMiLCJnZXRFdmVudEJ1cyIsImFwcGx5VGhlbWUiLCJzZXRUaGVtZVJvb3QiLCJhdHRhY2hUaGVtZUNoYW5nZWQiLCJkZXRhY2hUaGVtZUNoYW5nZWQiLCJnZXRTdGF0aWNBcmVhUmVmIiwicmVnaXN0ZXJQbHVnaW4iLCJ1bnJlZ2lzdGVyUGx1Z2luIiwiZ2V0TGlicmFyeVJlc291cmNlQnVuZGxlIiwiYnlJZCIsImdldExvYWRlZExpYnJhcmllcyIsImxvYWRMaWJyYXJ5IiwiaW5pdExpYnJhcnkiLCJpbmNsdWRlTGlicmFyeVRoZW1lIiwic2V0TW9kZWwiLCJnZXRNb2RlbCIsImhhc01vZGVsIiwiaXNNb2JpbGUiLCJhdHRhY2hDb250cm9sRXZlbnQiLCJkZXRhY2hDb250cm9sRXZlbnQiLCJhdHRhY2hJbnRlcnZhbFRpbWVyIiwiZGV0YWNoSW50ZXJ2YWxUaW1lciIsImF0dGFjaFBhcnNlRXJyb3IiLCJkZXRhY2hQYXJzZUVycm9yIiwiZmlyZVBhcnNlRXJyb3IiLCJhdHRhY2hWYWxpZGF0aW9uRXJyb3IiLCJkZXRhY2hWYWxpZGF0aW9uRXJyb3IiLCJmaXJlVmFsaWRhdGlvbkVycm9yIiwiYXR0YWNoRm9ybWF0RXJyb3IiLCJkZXRhY2hGb3JtYXRFcnJvciIsImZpcmVGb3JtYXRFcnJvciIsImF0dGFjaFZhbGlkYXRpb25TdWNjZXNzIiwiZGV0YWNoVmFsaWRhdGlvblN1Y2Nlc3MiLCJmaXJlVmFsaWRhdGlvblN1Y2Nlc3MiLCJhdHRhY2hMb2NhbGl6YXRpb25DaGFuZ2VkIiwiZGV0YWNoTG9jYWxpemF0aW9uQ2hhbmdlZCIsImF0dGFjaExpYnJhcnlDaGFuZ2VkIiwiZGV0YWNoTGlicmFyeUNoYW5nZWQiLCJpc1N0YXRpY0FyZWFSZWYiLCJjcmVhdGVDb21wb25lbnQiLCJnZXRSb290Q29tcG9uZW50IiwiZ2V0QXBwbGljYXRpb24iXX19KTtrLk1fRVZFTlRTPXtDb250cm9sRXZlbnQ6IkNvbnRyb2xFdmVudCIsVUlVcGRhdGVkOiJVSVVwZGF0ZWQiLFRoZW1lQ2hhbmdlZDoiVGhlbWVDaGFuZ2VkIixMb2NhbGl6YXRpb25DaGFuZ2VkOiJsb2NhbGl6YXRpb25DaGFuZ2VkIixMaWJyYXJ5Q2hhbmdlZDoibGlicmFyeUNoYW5nZWQiLFZhbGlkYXRpb25FcnJvcjoidmFsaWRhdGlvbkVycm9yIixQYXJzZUVycm9yOiJwYXJzZUVycm9yIixGb3JtYXRFcnJvcjoiZm9ybWF0RXJyb3IiLFZhbGlkYXRpb25TdWNjZXNzOiJ2YWxpZGF0aW9uU3VjY2VzcyJ9O2sucHJvdG90eXBlLl9ib290PWZ1bmN0aW9uKCl7dGhpcy5sb2NrKCk7dmFyIGI9dGhpcy5vQ29uZmlndXJhdGlvblsneHgtcHJlbG9hZExpYkNzcyddO2lmKGIubGVuZ3RoPjApe3ZhciBBPWJbMF0uc2xpY2UoMCwxKT09PSIhIjtpZihBKXtiWzBdPWJbMF0uc2xpY2UoMSl9aWYoYlswXT09PSIqIil7Yi5zcGxpY2UoMCwxKTt2YXIgcD0wO3EuZWFjaCh0aGlzLm9Db25maWd1cmF0aW9uLm1vZHVsZXMsZnVuY3Rpb24oaSxmKXt2YXIgbT1mLm1hdGNoKC9eKC4qKVwubGlicmFyeSQvKTtpZihtKXtiLnNwbGljZShwLDAsbVsxXSl9fSl9aWYoIUEpe3RoaXMuaW5jbHVkZUxpYnJhcnlUaGVtZSgic2FwLXVpLW1lcmdlZCIsdW5kZWZpbmVkLCI/bD0iK2Iuam9pbigiLCIpKX19dmFyIHQ9dGhpcztxLmVhY2godGhpcy5vQ29uZmlndXJhdGlvbi5tb2R1bGVzLGZ1bmN0aW9uKGksZil7dmFyIG09Zi5tYXRjaCgvXiguKilcLmxpYnJhcnkkLyk7aWYobSl7dC5sb2FkTGlicmFyeShtWzFdKX1lbHNle3Euc2FwLnJlcXVpcmUoZil9fSk7dGhpcy51bmxvY2soKX07ay5wcm90b3R5cGUuYXBwbHlUaGVtZT1mdW5jdGlvbih0LHMpe3Q9dGhpcy5vQ29uZmlndXJhdGlvbi5fbm9ybWFsaXplVGhlbWUodCxzKTtpZihzKXt0aGlzLnNldFRoZW1lUm9vdCh0LHMpfWlmKHQmJnRoaXMuc1RoZW1lIT10KXt2YXIgYj10aGlzLnNUaGVtZTt0aGlzLl91cGRhdGVUaGVtZVVybHModCk7dGhpcy5zVGhlbWU9dDt0aGlzLm9Db25maWd1cmF0aW9uLl9zZXRUaGVtZSh0KTtxKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkucmVtb3ZlQ2xhc3MoInNhcFVpVGhlbWUtIitiKS5hZGRDbGFzcygic2FwVWlUaGVtZS0iK3QpO2lmKHRoaXMub1RoZW1lQ2hlY2spe3RoaXMub1RoZW1lQ2hlY2suZmlyZVRoZW1lQ2hhbmdlZEV2ZW50KGZhbHNlLHRydWUpfX19O2sucHJvdG90eXBlLl91cGRhdGVUaGVtZVVybHM9ZnVuY3Rpb24odCl7dmFyIGI9dGhpcyxzPXRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0UlRMKCk/Ii1SVEwiOiIiO3EoImxpbmtbaWRePXNhcC11aS10aGVtZS1dIikuZWFjaChmdW5jdGlvbigpe3ZhciBsPXRoaXMuaWQuc2xpY2UoMTMpLEw9dGhpcy5ocmVmLnNsaWNlKHRoaXMuaHJlZi5sYXN0SW5kZXhPZigiLyIpKzEpLFM9ImxpYnJhcnkiLEgscCwkPXEodGhpcyk7aWYoKHA9bC5pbmRleE9mKCItWyIpKT4wKXtTKz1sLnNsaWNlKHArMiwtMSk7bD1sLnNsaWNlKDAscCl9aWYoTD09PShTKyIuY3NzIil8fEw9PT0oUysiLVJUTC5jc3MiKSl7TD1TK3MrIi5jc3MifWlmKCQuYXR0cigic2FwLXVpLWNzcy1jb3VudCIpKXskLnJlbW92ZSgpfUg9Yi5fZ2V0VGhlbWVQYXRoKGwsdCkrTDtpZihIIT10aGlzLmhyZWYpe3RoaXMuaHJlZj1IOyQucmVtb3ZlQXR0cigic2FwLXVpLXJlYWR5Iil9fSl9O2sucHJvdG90eXBlLl9nZXRUaGVtZVBhdGg9ZnVuY3Rpb24obCx0KXtpZih0aGlzLl9tVGhlbWVSb290cyl7dmFyIHA9dGhpcy5fbVRoZW1lUm9vdHNbdCsiICIrbF18fHRoaXMuX21UaGVtZVJvb3RzW3RdO2lmKHApe3A9cCtsLnJlcGxhY2UoL1wuL2csIi8iKSsiL3RoZW1lcy8iK3QrIi8iO3Euc2FwLnJlZ2lzdGVyTW9kdWxlUGF0aChsKyIudGhlbWVzLiIrdCxwKTtyZXR1cm4gcH19cmV0dXJuIHEuc2FwLmdldE1vZHVsZVBhdGgobCsiLnRoZW1lcy4iK3QsIi8iKX07ay5wcm90b3R5cGUuc2V0VGhlbWVSb290PWZ1bmN0aW9uKHQsbCxzKXtpZighdGhpcy5fbVRoZW1lUm9vdHMpe3RoaXMuX21UaGVtZVJvb3RzPXt9fWlmKHM9PT11bmRlZmluZWQpe3M9bDtsPXVuZGVmaW5lZH1zPXMrKHMuc2xpY2UoLTEpPT0iLyI/IiI6Ii8iKTtpZihsKXtmb3IodmFyIGk9MDtpPGwubGVuZ3RoO2krKyl7dmFyIGI9bFtpXTt0aGlzLl9tVGhlbWVSb290c1t0KyIgIitiXT1zfX1lbHNle3RoaXMuX21UaGVtZVJvb3RzW3RdPXN9cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXtpZih0aGlzLmJJbml0aWFsaXplZCl7cmV0dXJufXZhciBiPXEuc2FwLmxvZyxNPSJzYXAudWkuY29yZS5Db3JlLmluaXQoKSI7dGhpcy5ib290KCk7Yi5pbmZvKCJJbml0aWFsaXppbmciLG51bGwsTSk7dGhpcy5vRm9jdXNIYW5kbGVyPW5ldyBGKGRvY3VtZW50LmJvZHksdGhpcyk7dGhpcy5vUmVzaXplSGFuZGxlcj1uZXcgaCh0aGlzKTt0aGlzLm9UaGVtZUNoZWNrPW5ldyBUKHRoaXMpO2IuaW5mbygiSW5pdGlhbGl6ZWQiLG51bGwsTSk7dGhpcy5iSW5pdGlhbGl6ZWQ9dHJ1ZTtiLmluZm8oIlN0YXJ0aW5nIFBsdWdpbnMiLG51bGwsTSk7dGhpcy5zdGFydFBsdWdpbnMoKTtiLmluZm8oIlBsdWdpbnMgc3RhcnRlZCIsbnVsbCxNKTt2YXIgbz10aGlzLm9Db25maWd1cmF0aW9uO2lmKG8uYXJlYXMpe2Zvcih2YXIgaT0wLGw9by5hcmVhcy5sZW5ndGg7aTxsO2krKyl7dGhpcy5jcmVhdGVVSUFyZWEoby5hcmVhc1tpXSl9by5hcmVhcz11bmRlZmluZWR9aWYoby5vbkluaXQpe2lmKHR5cGVvZiBvLm9uSW5pdD09PSJmdW5jdGlvbiIpe28ub25Jbml0KCl9ZWxzZXtxLnNhcC5nbG9iYWxFdmFsKG8ub25Jbml0KX1vLm9uSW5pdD11bmRlZmluZWR9dGhpcy5vVGhlbWVDaGVjay5maXJlVGhlbWVDaGFuZ2VkRXZlbnQodHJ1ZSk7dmFyIHM9by5nZXRSb290Q29tcG9uZW50KCk7aWYocyl7Yi5pbmZvKCJMb2FkaW5nIFJvb3QgQ29tcG9uZW50OiAiK3MsbnVsbCxNKTt2YXIgbT1zYXAudWkuY29tcG9uZW50KHtuYW1lOnN9KTt0aGlzLm9Sb290Q29tcG9uZW50PW07dmFyIG49b1sieHgtcm9vdENvbXBvbmVudE5vZGUiXTtpZihuJiZtIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuVUlDb21wb25lbnQpe3ZhciBwPXEuc2FwLmRvbUJ5SWQobik7aWYocCl7Yi5pbmZvKCJDcmVhdGluZyBDb21wb25lbnRDb250YWluZXIgZm9yIFJvb3QgQ29tcG9uZW50OiAiK3MsbnVsbCxNKTt2YXIgdD1uZXcgc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyKHtjb21wb25lbnQ6bSxwcm9wYWdhdGVNb2RlbDp0cnVlfSk7dC5wbGFjZUF0KHApfX19ZWxzZXt2YXIgQT1vLmdldEFwcGxpY2F0aW9uKCk7aWYoQSl7Yi53YXJuaW5nKCJUaGUgY29uZmlndXJhdGlvbiAnYXBwbGljYXRpb24nIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgdGhlIGNvbmZpZ3VyYXRpb24gJ2NvbXBvbmVudCcgaW5zdGVhZCEgUGxlYXNlIG1pZ3JhdGUgZnJvbSBzYXAudWkuYXBwLkFwcGxpY2F0aW9uIHRvIHNhcC51aS5jb3JlLkNvbXBvbmVudC4iKTtiLmluZm8oIkxvYWRpbmcgQXBwbGljYXRpb246ICIrQSxudWxsLE0pO3Euc2FwLnJlcXVpcmUoQSk7dmFyIHU9cS5zYXAuZ2V0T2JqZWN0KEEpO3ZhciB2PW5ldyB1KCk7fX12YXIgdz10aGlzLmFJbml0TGlzdGVuZXJzO3RoaXMuYUluaXRMaXN0ZW5lcnM9dW5kZWZpbmVkO2lmKHcmJncubGVuZ3RoPjApe2IuaW5mbygiRmlyZSBMb2FkZWQgRXZlbnQiLG51bGwsTSk7cS5lYWNoKHcsZnVuY3Rpb24oaSxmKXtmKCl9KX10aGlzLnJlbmRlclBlbmRpbmdVSVVwZGF0ZXMoKX07ay5wcm90b3R5cGUuaGFuZGxlTG9hZD1mdW5jdGlvbigpe3RoaXMuYkRvbVJlYWR5PXRydWU7dmFyIHc9dGhpcy5pc0xvY2tlZCgpO2lmKCF3KXt0aGlzLmxvY2soKX10aGlzLmluaXQoKTtpZighdyl7dGhpcy51bmxvY2soKX19O2sucHJvdG90eXBlLmlzSW5pdGlhbGl6ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iSW5pdGlhbGl6ZWR9O2sucHJvdG90eXBlLmlzVGhlbWVBcHBsaWVkPWZ1bmN0aW9uKCl7cmV0dXJuIFQudGhlbWVMb2FkZWR9O2sucHJvdG90eXBlLmF0dGFjaEluaXRFdmVudD1mdW5jdGlvbihmKXtpZih0aGlzLmFJbml0TGlzdGVuZXJzKXt0aGlzLmFJbml0TGlzdGVuZXJzLnB1c2goZil9fTtrLnByb3RvdHlwZS5hdHRhY2hJbml0PWZ1bmN0aW9uKGYpe2lmKHRoaXMuYUluaXRMaXN0ZW5lcnMpe3RoaXMuYUluaXRMaXN0ZW5lcnMucHVzaChmKX1lbHNle2YoKX19O2sucHJvdG90eXBlLmxvY2s9ZnVuY3Rpb24oKXt0aGlzLmJMb2NrZWQ9dHJ1ZX07ay5wcm90b3R5cGUudW5sb2NrPWZ1bmN0aW9uKCl7dGhpcy5iTG9ja2VkPWZhbHNlfTtrLnByb3RvdHlwZS5pc0xvY2tlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJMb2NrZWR9O2sucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQ29uZmlndXJhdGlvbn07ay5wcm90b3R5cGUuZ2V0UmVuZGVyTWFuYWdlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNyZWF0ZVJlbmRlck1hbmFnZXIoKX07ay5wcm90b3R5cGUuY3JlYXRlUmVuZGVyTWFuYWdlcj1mdW5jdGlvbigpe3JldHVybihuZXcgUigpKS5nZXRJbnRlcmZhY2UoKX07ay5wcm90b3R5cGUuZ2V0Q3VycmVudEZvY3VzZWRDb250cm9sSWQ9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0luaXRpYWxpemVkKCkpe3Rocm93IG5ldyBFcnJvcigiQ29yZSBtdXN0IGJlIGluaXRpYWxpemVkIil9cmV0dXJuIHRoaXMub0ZvY3VzSGFuZGxlci5nZXRDdXJyZW50Rm9jdXNlZENvbnRyb2xJZCgpfTtrLnByb3RvdHlwZS5sb2FkTGlicmFyeT1mdW5jdGlvbihsLHUpe2lmKCF0aGlzLm1MaWJyYXJpZXNbbF0pe3ZhciBtPWwrIi5saWJyYXJ5IixBO2lmKHUpe3Euc2FwLnJlZ2lzdGVyTW9kdWxlUGF0aChsLHUpfWlmKHRoaXMub0NvbmZpZ3VyYXRpb25bJ3h4LWxvYWRBbGxNb2RlJ10mJiFxLnNhcC5pc0RlY2xhcmVkKG0pKXtBPW0rIi1hbGwiO3Euc2FwLmxvZy5kZWJ1ZygibG9hZCBhbGwtaW4tb25lIGZpbGUgIitBKTtxLnNhcC5yZXF1aXJlKEEpfWVsc2UgaWYodGhpcy5vQ29uZmlndXJhdGlvbi5wcmVsb2FkPT09J3N5bmMnfHx0aGlzLm9Db25maWd1cmF0aW9uLnByZWxvYWQ9PT0nYXN5bmMnKXtxLnNhcC5wcmVsb2FkTW9kdWxlcyhtKyItcHJlbG9hZCIsZmFsc2UpfXEuc2FwLnJlcXVpcmUobSk7aWYoIXRoaXMubUxpYnJhcmllc1tsXSl7cS5zYXAubG9nLndhcm5pbmcoImxpYnJhcnkgIitsKyIgZGlkbid0IGluaXRpYWxpemUgaXRzZWxmIik7dGhpcy5pbml0TGlicmFyeShsKX1pZih0aGlzLm9UaGVtZUNoZWNrJiZ0aGlzLmlzSW5pdGlhbGl6ZWQoKSl7dGhpcy5vVGhlbWVDaGVjay5maXJlVGhlbWVDaGFuZ2VkRXZlbnQodHJ1ZSl9fXJldHVybiB0aGlzLm1MaWJyYXJpZXNbbF19O2sucHJvdG90eXBlLmNyZWF0ZUNvbXBvbmVudD1mdW5jdGlvbih2LHUsaSxzKXtpZih0eXBlb2Ygdj09PSJzdHJpbmciKXt2PXtuYW1lOnYsdXJsOnV9O2lmKHR5cGVvZiBpPT09Im9iamVjdCIpe3Yuc2V0dGluZ3M9aX1lbHNle3YuaWQ9aTt2LnNldHRpbmdzPXN9fXJldHVybiBzYXAudWkuY29tcG9uZW50KHYpfTtrLnByb3RvdHlwZS5nZXRSb290Q29tcG9uZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1Jvb3RDb21wb25lbnR9O2sucHJvdG90eXBlLmluaXRMaWJyYXJ5PWZ1bmN0aW9uKGwpe3ZhciBMPXR5cGVvZiBsPT09InN0cmluZyIsbz1MP3tuYW1lOmx9Omwscz1vLm5hbWUsYj1xLnNhcC5sb2csTT0ic2FwLnVpLmNvcmUuQ29yZS5pbml0TGlicmFyeSgpIjtpZihMKXtiLndhcm5pbmcoIltEZXByZWNhdGVkXSBsaWJyYXJ5ICIrcysiIHVzZXMgb2xkIGZhc2hpb25lZCBpbml0TGlicmFyeSgpIGNhbGwgKHJlYnVpbGQgd2l0aCBuZXdlc3QgZ2VuZXJhdG9yKSIpfWlmKCFzfHx0aGlzLm1MaWJyYXJpZXNbc10pe3JldHVybn1iLmRlYnVnKCJBbmFseXppbmcgTGlicmFyeSAiK3MsbnVsbCxNKTt0aGlzLm1MaWJyYXJpZXNbc109bz1xLmV4dGVuZCh7ZGVwZW5kZW5jaWVzOltdLHR5cGVzOltdLGludGVyZmFjZXM6W10sY29udHJvbHM6W10sZWxlbWVudHM6W119LG8pO2Z1bmN0aW9uIGYoKXt2YXIgcD1xLnNhcC5wcm9wZXJ0aWVzKHt1cmw6c2FwLnVpLnJlc291cmNlKHMsImxpYnJhcnkucHJvcGVydGllcyIpfSk7by52ZXJzaW9uPXAuZ2V0UHJvcGVydHkocysiW3ZlcnNpb25dIik7dmFyIHQ9cC5nZXRQcm9wZXJ0eShzKyJbZGVwZW5kZW5jaWVzXSIpO2IuZGVidWcoIlJlcXVpcmVkIExpYnJhcmllczogIit0LG51bGwsTSk7by5kZXBlbmRlbmNpZXM9KHQmJnQuc3BsaXQoL1ssO3wgXS8pKXx8W107dmFyIEs9cC5nZXRLZXlzKCksdT0vKC4rKVwuKHR5cGV8aW50ZXJmYWNlfGNvbnRyb2x8ZWxlbWVudCkkLyx2O2Zvcih2YXIgaT0wO2k8Sy5sZW5ndGg7aSsrKXt2YXIgdz1wLmdldFByb3BlcnR5KEtbaV0pO2lmKHY9dy5tYXRjaCh1KSl7b1t2WzJdKyJzIl0ucHVzaChLW2ldKX19fWlmKEwpe2YoKX1mb3IodmFyIGk9MDtpPG8uZGVwZW5kZW5jaWVzLmxlbmd0aDtpKyspe3ZhciBtPW8uZGVwZW5kZW5jaWVzW2ldO2IuZGVidWcoInJlc29sdmUgRGVwZW5kZW5jaWVzIHRvICIrbSxudWxsLE0pO2lmKCF0aGlzLm1MaWJyYXJpZXNbbV0pe2Iud2FybmluZygiRGVwZW5kZW5jeSBmcm9tICIrcysiIHRvICIrbSsiIGhhcyBub3QgYmVlbiByZXNvbHZlZCBieSBsaWJyYXJ5IGl0c2VsZiIsbnVsbCxNKTt0aGlzLmxvYWRMaWJyYXJ5KG0pfX1hLnJlZ2lzdGVySW50ZXJmYWNlVHlwZXMoby5pbnRlcmZhY2VzKTt2YXIgbj1vLmNvbnRyb2xzLmNvbmNhdChvLmVsZW1lbnRzKTtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl7c2FwLnVpLmxhenlSZXF1aXJlKG5baV0sIm5ldyBleHRlbmQgZ2V0TWV0YWRhdGEiKX1pZighby5ub0xpYnJhcnlDU1MmJnEuaW5BcnJheShzLHRoaXMub0NvbmZpZ3VyYXRpb25bJ3h4LXByZWxvYWRMaWJDc3MnXSk8MCl7dGhpcy5pbmNsdWRlTGlicmFyeVRoZW1lKHMpfW8uc05hbWU9by5uYW1lO28uYUNvbnRyb2xzPW8uY29udHJvbHM7aWYoIXEuc2FwLmlzRGVjbGFyZWQocysiLmxpYnJhcnkiKSl7Yi53YXJuaW5nKCJMaWJyYXJ5IE1vZHVsZSAiK3MrIi5saWJyYXJ5IisiIG5vdCBsb2FkZWQgYXV0b21hdGljYWxseSIsbnVsbCxNKTtxLnNhcC5yZXF1aXJlKHMrIi5saWJyYXJ5Iil9dGhpcy5maXJlTGlicmFyeUNoYW5nZWQoe25hbWU6cyxzdGVyZW90eXBlOiJsaWJyYXJ5IixvcGVyYXRpb246ImFkZCIsbWV0YWRhdGE6b30pfTtrLnByb3RvdHlwZS5pbmNsdWRlTGlicmFyeVRoZW1lPWZ1bmN0aW9uKGwsdixRKXtpZigobCE9InNhcC51aS5sZWdhY3kiKSYmKGwhPSJzYXAudWkuY2xhc3NpYyIpKXtpZighdil7dj0iIn12YXIgcz0odGhpcy5vQ29uZmlndXJhdGlvbi5nZXRSVEwoKT8iLVJUTCI6IiIpO3ZhciBMLGI9bCsodi5sZW5ndGg+MD8iLVsiK3YrIl0iOnYpO2lmKGwmJmwuaW5kZXhPZigiOiIpPT0tMSl7TD0ibGlicmFyeSIrditzfWVsc2V7TD1sLnN1YnN0cmluZyhsLmluZGV4T2YoIjoiKSsxKSt2O2w9bC5zdWJzdHJpbmcoMCxsLmluZGV4T2YoIjoiKSl9dmFyIGY9dGhpcy5fZ2V0VGhlbWVQYXRoKGwsdGhpcy5zVGhlbWUpK0wrIi5jc3MiKyhRP1E6IiIpO3Euc2FwLmxvZy5pbmZvKCJJbmNsdWRpbmcgIitmKyIgLSAgc2FwLnVpLmNvcmUuQ29yZS5pbmNsdWRlTGlicmFyeVRoZW1lKCkiKTtxLnNhcC5pbmNsdWRlU3R5bGVTaGVldChmLCJzYXAtdWktdGhlbWUtIitiKTtpZihzYXAudWkuY29yZS50aGVtaW5nJiZzYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMpe3NhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycy5fYWRkTGlicmFyeVRoZW1lKGYpfX19O2sucHJvdG90eXBlLmdldExvYWRlZExpYnJhcmllcz1mdW5jdGlvbigpe3JldHVybiBxLmV4dGVuZCh7fSx0aGlzLm1MaWJyYXJpZXMpfTtrLnByb3RvdHlwZS5nZXRMaWJyYXJ5UmVzb3VyY2VCdW5kbGU9ZnVuY3Rpb24obCxMKXtsPWx8fCJzYXAudWkuY29yZSI7TD1MfHx0aGlzLmdldENvbmZpZ3VyYXRpb24oKS5nZXRMYW5ndWFnZSgpO3ZhciBLPWwrIi8iK0w7aWYoIXRoaXMubVJlc291cmNlQnVuZGxlc1tLXSl7dmFyIHU9c2FwLnVpLnJlc291cmNlKGwsJ21lc3NhZ2VidW5kbGUucHJvcGVydGllcycpO3RoaXMubVJlc291cmNlQnVuZGxlc1tLXT1xLnNhcC5yZXNvdXJjZXMoe3VybDp1LGxvY2FsZTpMfSl9cmV0dXJuIHRoaXMubVJlc291cmNlQnVuZGxlc1tLXX07ay5wcm90b3R5cGUuc2V0Um9vdD1mdW5jdGlvbihvLGIpe2lmKGIpe2IucGxhY2VBdChvLCJvbmx5Iil9fTtrLnByb3RvdHlwZS5jcmVhdGVVSUFyZWE9ZnVuY3Rpb24obyl7dmFyIHQ9dGhpcztpZighbyl7dGhyb3cgbmV3IEVycm9yKCJvRG9tUmVmIG11c3Qgbm90IGJlIG51bGwiKX1pZih0eXBlb2Yobyk9PT0ic3RyaW5nIil7dmFyIGk9bztvPXEuc2FwLmRvbUJ5SWQobyk7aWYoIW8pe3Rocm93IG5ldyBFcnJvcigiRE9NIGVsZW1lbnQgd2l0aCBJRCAnIitpKyInIG5vdCBmb3VuZCBpbiBwYWdlLCBidXQgYXBwbGljYXRpb24gdHJpZXMgdG8gaW5zZXJ0IGNvbnRlbnQuIil9fWlmKCFvLmlkfHxvLmlkLmxlbmd0aD09MCl7by5pZD1xLnNhcC51aWQoKX12YXIgST1vLmlkO2lmKCF0aGlzLm1VSUFyZWFzW0ldKXt0aGlzLm1VSUFyZWFzW0ldPW5ldyBVKHRoaXMsbyk7cS5lYWNoKHRoaXMub01vZGVscyxmdW5jdGlvbihuLG0pe3QubVVJQXJlYXNbSV0ub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9Nb2RlbHNbbl09bX0pO3RoaXMubVVJQXJlYXNbSV0ucHJvcGFnYXRlUHJvcGVydGllcyh0cnVlKX1lbHNle3RoaXMubVVJQXJlYXNbSV0uc2V0Um9vdE5vZGUobyl9cmV0dXJuIHRoaXMubVVJQXJlYXNbSV19O2sucHJvdG90eXBlLmdldFVJQXJlYT1mdW5jdGlvbihvKXt2YXIgaT0iIjtpZih0eXBlb2Yobyk9PSJzdHJpbmciKXtpPW99ZWxzZXtpPW8uaWR9aWYoaSl7cmV0dXJuIHRoaXMubVVJQXJlYXNbaV19cmV0dXJuIG51bGx9O3ZhciByPVUuX29SZW5kZXJMb2c7ay5wcm90b3R5cGUuYWRkSW52YWxpZGF0ZWRVSUFyZWE9ZnVuY3Rpb24odSl7aWYoIXRoaXMuX3NSZXJlbmRlclRpbWVyKXtyLmRlYnVnKCJSZWdpc3RlcmluZyB0aW1lciBmb3IgZGVsYXllZCByZS1yZW5kZXJpbmciKTt0aGlzLl9zUmVyZW5kZXJUaW1lcj1xLnNhcC5kZWxheWVkQ2FsbCgwLHRoaXMsInJlbmRlclBlbmRpbmdVSVVwZGF0ZXMiKX19O2suTUFYX1JFTkRFUklOR19JVEVSQVRJT05TPTIwO2sucHJvdG90eXBlLnJlbmRlclBlbmRpbmdVSVVwZGF0ZXM9ZnVuY3Rpb24oKXtyLmRlYnVnKCJSZW5kZXIgcGVuZGluZyBVSSB1cGRhdGVzOiBzdGFydCIpO3Euc2FwLm1lYXN1cmUuc3RhcnQoInJlbmRlclBlbmRpbmdVSVVwZGF0ZXMiLCJSZW5kZXIgcGVuZGluZyBVSSB1cGRhdGVzIGluIGFsbCBVSUFyZWFzIik7dmFyIHU9ZmFsc2UsbD1rLk1BWF9SRU5ERVJJTkdfSVRFUkFUSU9OUz4wLEw9MDt0aGlzLl9iUmVuZGVyaW5nPXRydWU7ZG97aWYobCl7TCsrO2lmKEw+ay5NQVhfUkVOREVSSU5HX0lURVJBVElPTlMpe3RoaXMuX2JSZW5kZXJpbmc9ZmFsc2U7dGhyb3cgbmV3IEVycm9yKCJSZW5kZXJpbmcgaGFzIGJlZW4gcmUtc3RhcnRlZCB0b28gbWFueSB0aW1lcyAoIitMKyIpLiBBZGQgVVJMIHBhcmFtZXRlciBzYXAtdWkteHgtZGVidWdSZW5kZXJpbmc9dHJ1ZSBmb3IgYSBkZXRhaWxlZCBhbmFseXNpcy4iKX1pZihMPjEpe3IuZGVidWcoIlJlbmRlciBwZW5kaW5nIFVJIHVwZGF0ZXM6IGl0ZXJhdGlvbiAiK0wpfX1pZih0aGlzLl9zUmVyZW5kZXJUaW1lcil7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9zUmVyZW5kZXJUaW1lcik7dGhpcy5fc1JlcmVuZGVyVGltZXI9dW5kZWZpbmVkfXZhciBtPXRoaXMubVVJQXJlYXM7Zm9yKHZhciBpIGluIG0pe3U9bVtpXS5yZXJlbmRlcigpfHx1fX13aGlsZShsJiZ0aGlzLl9zUmVyZW5kZXJUaW1lcik7dGhpcy5fYlJlbmRlcmluZz1mYWxzZTtpZih1KXt0aGlzLmZpcmVVSVVwZGF0ZWQoKX1yLmRlYnVnKCJSZW5kZXIgcGVuZGluZyBVSSB1cGRhdGVzOiBmaW5pc2hlZCIpO3Euc2FwLm1lYXN1cmUuZW5kKCJyZW5kZXJQZW5kaW5nVUlVcGRhdGVzIil9O2sucHJvdG90eXBlLmdldFVJRGlydHk9ZnVuY3Rpb24oKXtyZXR1cm4hISh0aGlzLl9zUmVyZW5kZXJUaW1lcnx8dGhpcy5fYlJlbmRlcmluZyl9O2sucHJvdG90eXBlLmF0dGFjaFVJVXBkYXRlZD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5VSVVwZGF0ZWQsZixsKX07ay5wcm90b3R5cGUuZGV0YWNoVUlVcGRhdGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChrLk1fRVZFTlRTLlVJVXBkYXRlZCxmLGwpfTtrLnByb3RvdHlwZS5maXJlVUlVcGRhdGVkPWZ1bmN0aW9uKHApe3RoaXMuZmlyZUV2ZW50KGsuTV9FVkVOVFMuVUlVcGRhdGVkLHApfTtrLnByb3RvdHlwZS5hdHRhY2hUaGVtZUNoYW5nZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KGsuTV9FVkVOVFMuVGhlbWVDaGFuZ2VkLGYsbCl9O2sucHJvdG90eXBlLmRldGFjaFRoZW1lQ2hhbmdlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5UaGVtZUNoYW5nZWQsZixsKX07ay5wcm90b3R5cGUuZmlyZVRoZW1lQ2hhbmdlZD1mdW5jdGlvbihwKXtxLnNhcC5zY3JvbGxiYXJTaXplKHRydWUpO2lmKHNhcC51aS5jb3JlLnRoZW1pbmcmJnNhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycyl7c2FwLnVpLmNvcmUudGhlbWluZy5QYXJhbWV0ZXJzLnJlc2V0KHRydWUpfXZhciBzPWsuTV9FVkVOVFMuVGhlbWVDaGFuZ2VkO3ZhciBvPXEuRXZlbnQocyk7by50aGVtZT1wP3AudGhlbWU6bnVsbDtxLmVhY2godGhpcy5tRWxlbWVudHMsZnVuY3Rpb24oaSxiKXtiLl9oYW5kbGVFdmVudChvKX0pO3Euc2FwLmFjdC5yZWZyZXNoKCk7dGhpcy5maXJlRXZlbnQocyxwKX07ay5wcm90b3R5cGUuYXR0YWNoTG9jYWxpemF0aW9uQ2hhbmdlZD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5Mb2NhbGl6YXRpb25DaGFuZ2VkLGYsbCl9O2sucHJvdG90eXBlLmRldGFjaExvY2FsaXphdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KGsuTV9FVkVOVFMuTG9jYWxpemF0aW9uQ2hhbmdlZCxmLGwpfTtrLnByb3RvdHlwZS5maXJlTG9jYWxpemF0aW9uQ2hhbmdlZD1mdW5jdGlvbihtKXt2YXIgdD10aGlzLHM9ay5NX0VWRU5UUy5Mb2NhbGl6YXRpb25DaGFuZ2VkLGI9cS5FdmVudChzLHtjaGFuZ2VzOm19KSxBPXNhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSxmPVtdO3EuZWFjaChtLGZ1bmN0aW9uKGksdil7Zi5wdXNoKGkpfSk7cS5zYXAubG9nLmluZm8oImxvY2FsaXphdGlvbiBzZXR0aW5ncyBjaGFuZ2VkOiAiK2Yuam9pbigiLCIpLG51bGwsInNhcC51aS5jb3JlLkNvcmUiKTtxLmVhY2godGhpcy5vTW9kZWxzLGZ1bmN0aW9uKE4sTSl7aWYoTSYmTS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlKXtNLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2UoKX19KTtmdW5jdGlvbiBuKHApe3EuZWFjaCh0aGlzLm1VSUFyZWFzLGZ1bmN0aW9uKCl7QS5jYWxsKHRoaXMscCl9KTtxLmVhY2godGhpcy5tT2JqZWN0c1siY29tcG9uZW50Il0sZnVuY3Rpb24oKXtBLmNhbGwodGhpcyxwKX0pO3EuZWFjaCh0aGlzLm1FbGVtZW50cyxmdW5jdGlvbigpe0EuY2FsbCh0aGlzLHApfSl9bi5jYWxsKHRoaXMsMSk7bi5jYWxsKHRoaXMsMik7aWYobS5ydGwhPXVuZGVmaW5lZCl7cShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmF0dHIoImRpciIsbS5ydGw/InJ0bCI6Imx0ciIpO3RoaXMuX3VwZGF0ZVRoZW1lVXJscyh0aGlzLnNUaGVtZSk7cS5lYWNoKHRoaXMubVVJQXJlYXMsZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGUoKX0pO3Euc2FwLmxvZy5pbmZvKCJSVEwgbW9kZSAiK20ucnRsPyJhY3RpdmF0ZWQiOiJkZWFjdGl2YXRlZCIpfXEuZWFjaCh0aGlzLm1FbGVtZW50cyxmdW5jdGlvbihpLG8pe3RoaXMuX2hhbmRsZUV2ZW50KGIpfSk7dGhpcy5maXJlRXZlbnQocyx7Y2hhbmdlczptfSl9O2sucHJvdG90eXBlLmF0dGFjaExpYnJhcnlDaGFuZ2VkPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChrLk1fRVZFTlRTLkxpYnJhcnlDaGFuZ2VkLGYsbCl9O2sucHJvdG90eXBlLmRldGFjaExpYnJhcnlDaGFuZ2VkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChrLk1fRVZFTlRTLkxpYnJhcnlDaGFuZ2VkLGYsbCl9O2sucHJvdG90eXBlLmZpcmVMaWJyYXJ5Q2hhbmdlZD1mdW5jdGlvbihwKXt0aGlzLmZpcmVFdmVudChrLk1fRVZFTlRTLkxpYnJhcnlDaGFuZ2VkLHApfTtrLnByb3RvdHlwZS5hcHBseUNoYW5nZXM9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlclBlbmRpbmdVSVVwZGF0ZXMoKX07ay5wcm90b3R5cGUucmVnaXN0ZXJFbGVtZW50Q2xhc3M9ZnVuY3Rpb24obSl7dmFyIG49bS5nZXROYW1lKCksbD1tLmdldExpYnJhcnlOYW1lKCl8fCIiLEw9dGhpcy5tTGlicmFyaWVzW2xdLGI9ZC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihtLmdldENsYXNzKCkucHJvdG90eXBlKSxmPWZhbHNlO2lmKCFMKXtMPXRoaXMubUxpYnJhcmllc1tsXT17ZGVwZW5kZW5jaWVzOltdLHR5cGVzOltdLGludGVyZmFjZXM6W10sY29udHJvbHM6W10sZWxlbWVudHM6W119fWlmKGIpe2lmKHEuaW5BcnJheShuLEwuY29udHJvbHMpPDApe0wuY29udHJvbHMucHVzaChuKTtmPXRydWV9fWVsc2V7aWYocS5pbkFycmF5KG4sTC5lbGVtZW50cyk8MCl7TC5lbGVtZW50cy5wdXNoKG4pO2Y9dHJ1ZX19aWYoZil7cS5zYXAubG9nLmRlYnVnKCJDbGFzcyAiK20uZ2V0TmFtZSgpKyIgcmVnaXN0ZXJlZCBmb3IgbGlicmFyeSAiK20uZ2V0TGlicmFyeU5hbWUoKSk7dGhpcy5maXJlTGlicmFyeUNoYW5nZWQoe25hbWU6bS5nZXROYW1lKCksc3RlcmVvdHlwZTptLmdldFN0ZXJlb3R5cGUoKSxvcGVyYXRpb246ImFkZCIsbWV0YWRhdGE6bX0pfX07ay5wcm90b3R5cGUucmVnaXN0ZXJFbGVtZW50PWZ1bmN0aW9uKG8pe3ZhciBiPXRoaXMuYnlJZChvLmdldElkKCkpO2lmKGImJmIhPT1vKXtpZih0aGlzLm9Db25maWd1cmF0aW9uLmdldE5vRHVwbGljYXRlSWRzKCkpe3Euc2FwLmxvZy5lcnJvcigiYWRkaW5nIGVsZW1lbnQgd2l0aCBkdXBsaWNhdGUgaWQgJyIrby5nZXRJZCgpKyInIik7dGhyb3cgbmV3IEVycm9yKCJFcnJvcjogYWRkaW5nIGVsZW1lbnQgd2l0aCBkdXBsaWNhdGUgaWQgJyIrby5nZXRJZCgpKyInIil9ZWxzZXtxLnNhcC5sb2cud2FybmluZygiYWRkaW5nIGVsZW1lbnQgd2l0aCBkdXBsaWNhdGUgaWQgJyIrby5nZXRJZCgpKyInIil9fXRoaXMubUVsZW1lbnRzW28uZ2V0SWQoKV09b307ay5wcm90b3R5cGUuZGVyZWdpc3RlckVsZW1lbnQ9ZnVuY3Rpb24obyl7ZGVsZXRlIHRoaXMubUVsZW1lbnRzW28uZ2V0SWQoKV19O2sucHJvdG90eXBlLnJlZ2lzdGVyT2JqZWN0PWZ1bmN0aW9uKG8pe3ZhciBpPW8uZ2V0SWQoKSx0PW8uZ2V0TWV0YWRhdGEoKS5nZXRTdGVyZW90eXBlKCksYj10aGlzLmdldE9iamVjdCh0LGkpO2lmKGImJmIhPT1vKXtxLnNhcC5sb2cuZXJyb3IoImFkZGluZyBvYmplY3QgXCIiK3QrIlwiIHdpdGggZHVwbGljYXRlIGlkICciK2krIiciKTt0aHJvdyBuZXcgRXJyb3IoIkVycm9yOiBhZGRpbmcgb2JqZWN0IFwiIit0KyJcIiB3aXRoIGR1cGxpY2F0ZSBpZCAnIitpKyInIil9dGhpcy5tT2JqZWN0c1t0XVtpXT1vfTtrLnByb3RvdHlwZS5kZXJlZ2lzdGVyT2JqZWN0PWZ1bmN0aW9uKG8pe3ZhciBpPW8uZ2V0SWQoKSx0PW8uZ2V0TWV0YWRhdGEoKS5nZXRTdGVyZW90eXBlKCk7ZGVsZXRlIHRoaXMubU9iamVjdHNbdF1baV19O2sucHJvdG90eXBlLmJ5SWQ9ZnVuY3Rpb24oaSl7cmV0dXJuIGk9PW51bGw/dW5kZWZpbmVkOnRoaXMubUVsZW1lbnRzW2ldfTtrLnByb3RvdHlwZS5nZXRDb250cm9sPWsucHJvdG90eXBlLmJ5SWQ7ay5wcm90b3R5cGUuZ2V0RWxlbWVudEJ5SWQ9ay5wcm90b3R5cGUuYnlJZDtrLnByb3RvdHlwZS5nZXRPYmplY3Q9ZnVuY3Rpb24odCxpKXtyZXR1cm4gaT09bnVsbD91bmRlZmluZWQ6dGhpcy5tT2JqZWN0c1t0XSYmdGhpcy5tT2JqZWN0c1t0XVtpXX07ay5wcm90b3R5cGUuZ2V0Q29tcG9uZW50PWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLmdldE9iamVjdCgiY29tcG9uZW50IixpKX07ay5wcm90b3R5cGUuZ2V0VGVtcGxhdGU9ZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0KCJ0ZW1wbGF0ZSIsaSl9O2sucHJvdG90eXBlLmdldFN0YXRpY0FyZWFSZWY9ZnVuY3Rpb24oKXt2YXIgcz0ic2FwLXVpLXN0YXRpYyI7dmFyIFM9cS5zYXAuZG9tQnlJZChzKTtpZighUyl7aWYoIXRoaXMuYkRvbVJlYWR5KXt0aHJvdyBuZXcgRXJyb3IoIkRPTSBpcyBub3QgcmVhZHkgeWV0LiBTdGF0aWMgVUlBcmVhIGNhbm5vdCBiZSBjcmVhdGVkLiIpfXZhciBsPXRoaXMuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpPyJyaWdodCI6ImxlZnQiO1M9cSgiPERJVi8+Iix7aWQ6c30pLmNzcyh7ImhlaWdodCI6IjAiLCJ3aWR0aCI6IjAiLCJvdmVyZmxvdyI6ImhpZGRlbiIsImZsb2F0IjpsfSkucHJlcGVuZFRvKGRvY3VtZW50LmJvZHkpWzBdO3RoaXMuY3JlYXRlVUlBcmVhKFMpLmJJbml0aWFsPWZhbHNlfXJldHVybiBTfTtrLnByb3RvdHlwZS5pc1N0YXRpY0FyZWFSZWY9ZnVuY3Rpb24obyl7cmV0dXJuIG8mJihvLmlkPT09InNhcC11aS1zdGF0aWMiKX07ay5fSV9JTlRFUlZBTD0yMDA7aC5wcm90b3R5cGUuSV9JTlRFUlZBTD1rLl9JX0lOVEVSVkFMO2sucHJvdG90eXBlLmF0dGFjaEludGVydmFsVGltZXI9ZnVuY3Rpb24oZixsKXtpZighdGhpcy5vVGltZWRUcmlnZ2VyKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS5JbnRlcnZhbFRyaWdnZXIiKTt0aGlzLm9UaW1lZFRyaWdnZXI9bmV3IHNhcC51aS5jb3JlLkludGVydmFsVHJpZ2dlcihrLl9JX0lOVEVSVkFMKX10aGlzLm9UaW1lZFRyaWdnZXIuYWRkTGlzdGVuZXIoZixsKX07ay5wcm90b3R5cGUuZGV0YWNoSW50ZXJ2YWxUaW1lcj1mdW5jdGlvbihmLGwpe2lmKHRoaXMub1RpbWVkVHJpZ2dlcil7dGhpcy5vVGltZWRUcmlnZ2VyLnJlbW92ZUxpc3RlbmVyKGYsbCl9fTtrLnByb3RvdHlwZS5hdHRhY2hDb250cm9sRXZlbnQ9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KGsuTV9FVkVOVFMuQ29udHJvbEV2ZW50LGYsbCl9O2sucHJvdG90eXBlLmRldGFjaENvbnRyb2xFdmVudD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5Db250cm9sRXZlbnQsZixsKX07ay5wcm90b3R5cGUuZmlyZUNvbnRyb2xFdmVudD1mdW5jdGlvbihwKXt0aGlzLmZpcmVFdmVudChrLk1fRVZFTlRTLkNvbnRyb2xFdmVudCxwKX07ay5wcm90b3R5cGUuX2hhbmRsZUNvbnRyb2xFdmVudD1mdW5jdGlvbihvLHUpe3ZhciBiPXEuRXZlbnQoby50eXBlKTtxLmV4dGVuZChiLG8pO2Iub3JpZ2luYWxFdmVudD11bmRlZmluZWQ7dGhpcy5maXJlQ29udHJvbEV2ZW50KHsiYnJvd3NlckV2ZW50IjpiLCJ1aUFyZWEiOnV9KX07ay5wcm90b3R5cGUuZ2V0QXBwbGljYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gc2FwLnVpLmdldEFwcGxpY2F0aW9uJiZzYXAudWkuZ2V0QXBwbGljYXRpb24oKX07ay5wcm90b3R5cGUucmVnaXN0ZXJQbHVnaW49ZnVuY3Rpb24ocCl7aWYoIXApe3JldHVybn1mb3IodmFyIGk9MCxsPXRoaXMuYVBsdWdpbnMubGVuZ3RoO2k8bDtpKyspe2lmKHRoaXMuYVBsdWdpbnNbaV09PT1wKXtyZXR1cm59fXRoaXMuYVBsdWdpbnMucHVzaChwKTtpZih0aGlzLmJJbml0aWFsaXplZCYmcCYmcC5zdGFydFBsdWdpbil7cC5zdGFydFBsdWdpbih0aGlzKX19O2sucHJvdG90eXBlLnVucmVnaXN0ZXJQbHVnaW49ZnVuY3Rpb24ocCl7aWYoIXApe3JldHVybn12YXIgUD0tMTtmb3IodmFyIGk9dGhpcy5hUGx1Z2lucy5sZW5ndGg7aS0tO2k+PTApe2lmKHRoaXMuYVBsdWdpbnNbaV09PT1wKXtQPWk7YnJlYWt9fWlmKFA9PS0xKXtyZXR1cm59aWYodGhpcy5iSW5pdGlhbGl6ZWQmJnAmJnAuc3RvcFBsdWdpbil7cC5zdG9wUGx1Z2luKHRoaXMpfXRoaXMuYVBsdWdpbnMuc3BsaWNlKFAsMSl9O2sucHJvdG90eXBlLnN0YXJ0UGx1Z2lucz1mdW5jdGlvbigpe2Zvcih2YXIgaT0wLGw9dGhpcy5hUGx1Z2lucy5sZW5ndGg7aTxsO2krKyl7dmFyIHA9dGhpcy5hUGx1Z2luc1tpXTtpZihwJiZwLnN0YXJ0UGx1Z2luKXtwLnN0YXJ0UGx1Z2luKHRoaXMsdHJ1ZSl9fX07ay5wcm90b3R5cGUuc3RvcFBsdWdpbnM9ZnVuY3Rpb24oKXtmb3IodmFyIGk9MCxsPXRoaXMuYVBsdWdpbnMubGVuZ3RoO2k8bDtpKyspe3ZhciBwPXRoaXMuYVBsdWdpbnNbaV07aWYocCYmcC5zdG9wUGx1Z2luKXtwLnN0b3BQbHVnaW4odGhpcyl9fX07ay5wcm90b3R5cGUuc2V0TW9kZWw9ZnVuY3Rpb24obSxuKXtpZighbSYmdGhpcy5vTW9kZWxzW25dKXtkZWxldGUgdGhpcy5vTW9kZWxzW25dO3EuZWFjaCh0aGlzLm1VSUFyZWFzLGZ1bmN0aW9uKGksdSl7ZGVsZXRlIHUub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9Nb2RlbHNbbl07dS5wcm9wYWdhdGVQcm9wZXJ0aWVzKG4pfSl9ZWxzZSBpZihtJiZtIT09dGhpcy5vTW9kZWxzW25dKXt0aGlzLm9Nb2RlbHNbbl09bTtxLmVhY2godGhpcy5tVUlBcmVhcyxmdW5jdGlvbihpLHUpe3Uub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9Nb2RlbHNbbl09bTt1LnByb3BhZ2F0ZVByb3BlcnRpZXMobil9KX1lbHNle31yZXR1cm4gdGhpc307ay5wcm90b3R5cGUuZ2V0TW9kZWw9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMub01vZGVsc1tuXX07ay5wcm90b3R5cGUuaGFzTW9kZWw9ZnVuY3Rpb24oKXtyZXR1cm4hcS5pc0VtcHR5T2JqZWN0KHRoaXMub01vZGVscyl9O2sucHJvdG90eXBlLmdldEV2ZW50QnVzPWZ1bmN0aW9uKCl7aWYoIXRoaXMub0V2ZW50QnVzKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS5FdmVudEJ1cyIpO3RoaXMub0V2ZW50QnVzPW5ldyBzYXAudWkuY29yZS5FdmVudEJ1cygpfXJldHVybiB0aGlzLm9FdmVudEJ1c307ay5wcm90b3R5cGUuYXR0YWNoVmFsaWRhdGlvbkVycm9yPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChrLk1fRVZFTlRTLlZhbGlkYXRpb25FcnJvcixmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5kZXRhY2hWYWxpZGF0aW9uRXJyb3I9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KGsuTV9FVkVOVFMuVmFsaWRhdGlvbkVycm9yLGYsbCk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmF0dGFjaFBhcnNlRXJyb3I9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KGsuTV9FVkVOVFMuUGFyc2VFcnJvcixmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5kZXRhY2hQYXJzZUVycm9yPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChrLk1fRVZFTlRTLlBhcnNlRXJyb3IsZixsKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuYXR0YWNoRm9ybWF0RXJyb3I9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KGsuTV9FVkVOVFMuRm9ybWF0RXJyb3IsZixsKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuZGV0YWNoRm9ybWF0RXJyb3I9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KGsuTV9FVkVOVFMuRm9ybWF0RXJyb3IsZixsKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuYXR0YWNoVmFsaWRhdGlvblN1Y2Nlc3M9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KGsuTV9FVkVOVFMuVmFsaWRhdGlvblN1Y2Nlc3MsZixsKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuZGV0YWNoVmFsaWRhdGlvblN1Y2Nlc3M9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KGsuTV9FVkVOVFMuVmFsaWRhdGlvblN1Y2Nlc3MsZixsKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuZmlyZVBhcnNlRXJyb3I9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoay5NX0VWRU5UUy5QYXJzZUVycm9yLEEpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5maXJlVmFsaWRhdGlvbkVycm9yPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KGsuTV9FVkVOVFMuVmFsaWRhdGlvbkVycm9yLEEpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5maXJlRm9ybWF0RXJyb3I9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoay5NX0VWRU5UUy5Gb3JtYXRFcnJvcixBKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuZmlyZVZhbGlkYXRpb25TdWNjZXNzPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KGsuTV9FVkVOVFMuVmFsaWRhdGlvblN1Y2Nlc3MsQSk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmlzTW9iaWxlPWZ1bmN0aW9uKCl7cmV0dXJuIEQuYnJvd3Nlci5tb2JpbGV9O2lmKCF3aW5kb3cuc2FwLnVpLmdldENvcmUpeyhmdW5jdGlvbigpe25ldyBrKCl9KCkpfXNhcC51aS5zZXRSb290PWZ1bmN0aW9uKG8sYil7c2FwLnVpLmdldENvcmUoKS5zZXRSb290KG8sYil9O3JldHVybiBrfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmFwcC5BcHBsaWNhdGlvbicpKXsKLyoKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5hcHAuQXBwbGljYXRpb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYXBwL0FwcGxpY2F0aW9uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9BcHBsaWNhdGlvbk1ldGFkYXRhJywnc2FwL3VpL2NvcmUvQ29tcG9uZW50J10sZnVuY3Rpb24ocSxBLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1DLmV4dGVuZCgic2FwLnVpLmFwcC5BcHBsaWNhdGlvbiIse21ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUscHJvcGVydGllczp7cm9vdDoic3RyaW5nIixjb25maWc6ImFueSJ9LGFnZ3JlZ2F0aW9uczp7cm9vdENvbXBvbmVudDp7dHlwZToic2FwLnVpLmNvcmUuVUlDb21wb25lbnQiLG11bHRpcGxlOmZhbHNlfX0scHVibGljTWV0aG9kczpbImdldFZpZXciXSxkZXByZWNhdGVkOnRydWV9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyl7aWYodGhpcy5vbkVycm9yKXt0aGlzLm9uV2luZG93RXJyb3I9dGhpcy5vbkVycm9yfWlmKHRoaXMub25CZWZvcmVFeGl0KXt0aGlzLm9uV2luZG93QmVmb3JlVW5sb2FkPXRoaXMub25CZWZvcmVFeGl0fWlmKHRoaXMub25FeGl0KXt0aGlzLm9uV2luZG93VW5sb2FkPXRoaXMub25FeGl0fUMuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHNhcC51aS5nZXRBcHBsaWNhdGlvbil7dGhyb3cgbmV3IEVycm9yKCJPbmx5IG9uZSBpbnN0YW5jZSBvZiBzYXAudWkuYXBwLkFwcGxpY2F0aW9uIGlzIGFsbG93ZWQiKX1zYXAudWkuZ2V0QXBwbGljYXRpb249cS5wcm94eSh0aGlzLl9nZXRJbnN0YW5jZSx0aGlzKTtzYXAudWkuZ2V0Q29yZSgpLmF0dGFjaEluaXQocS5wcm94eShmdW5jdGlvbigpe3RoaXMuX2luaXRSb290Q29tcG9uZW50KCk7dGhpcy5tYWluKCl9LHRoaXMpKX0sX2luaXRSb290Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5jcmVhdGVSb290Q29tcG9uZW50KCk7aWYocil7dGhpcy5zZXRSb290Q29tcG9uZW50KHIpO3ZhciBjPW5ldyBzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIoe2NvbXBvbmVudDpyfSk7Yy5wbGFjZUF0KHRoaXMuZ2V0Um9vdCgpfHxkb2N1bWVudC5ib2R5KX19LGNyZWF0ZVJvb3RDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgcj10aGlzLmdldE1ldGFkYXRhKCkuZ2V0Um9vdENvbXBvbmVudCgpO3ZhciBSO2lmKHIpe1I9c2FwLnVpLmNvbXBvbmVudCh7bmFtZTpyfSl9cmV0dXJuIFJ9LGdldFZpZXc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRSb290Q29tcG9uZW50KCl9LF9nZXRJbnN0YW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzfSxtYWluOmZ1bmN0aW9uKCl7fSxvbkJlZm9yZUV4aXQ6ZnVuY3Rpb24oKXt9LG9uRXhpdDpmdW5jdGlvbigpe30sb25FcnJvcjpudWxsLHNldENvbmZpZzpmdW5jdGlvbihjKXtpZih0eXBlb2YgYz09PSJzdHJpbmciKXt2YXIgdT1jO3ZhciBjPW5ldyBzYXAudWkubW9kZWwuanNvbi5KU09OTW9kZWwoKTt2YXIgcj1xLnNhcC5zamF4KHt1cmw6dSxkYXRhVHlwZTonanNvbid9KTtpZihyLnN1Y2Nlc3Mpe2Muc2V0RGF0YShyLmRhdGEpfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgbG9hZCBjb25maWcgZmlsZTogIit1KX19aWYodHlwZW9mIGM9PT0ib2JqZWN0IiYmIWMgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuTW9kZWwpe2M9bmV3IHNhcC51aS5tb2RlbC5KU09OTW9kZWwoYyl9dGhpcy5zZXRQcm9wZXJ0eSgiY29uZmlnIixjKX0sZGVzdHJveTpmdW5jdGlvbihzKXtkZWxldGUgc2FwLnVpLmdldEFwcGxpY2F0aW9uO0MucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sQSk7cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5BcHBDYWNoZUJ1c3RlcicpKXsKLyohCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5BcHBDYWNoZUJ1c3RlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0FwcENhY2hlQnVzdGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Db3JlJywnc2FwL3VpL3RoaXJkcGFydHkvVVJJJ10sZnVuY3Rpb24ocSxDLFUpeyJ1c2Ugc3RyaWN0Ijt2YXIgYz1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKTt2YXIgbD1jLmdldExhbmd1YWdlKCk7dmFyIHM9Yy5nZXRBcHBDYWNoZUJ1c3Rlck1vZGUoKT09PSJzeW5jIjt2YXIgYj1jLmdldEFwcENhY2hlQnVzdGVyTW9kZSgpPT09ImJhdGNoIjt2YXIgaT17fTt2YXIgYT1xLmFqYXg7dmFyIEk9cS5zYXAuaW5jbHVkZVNjcmlwdDt2YXIgZj1xLnNhcC5pbmNsdWRlU3R5bGVTaGVldDt2YXIgdj1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LnByb3RvdHlwZS52YWxpZGF0ZVByb3BlcnR5O3ZhciBMPWRvY3VtZW50LmxvY2F0aW9uLmhyZWYucmVwbGFjZSgvXD8uKnwjLiovZywiIik7dmFyIEI9VVJJKCIuLyIpLmFic29sdXRlVG8oTCk7dmFyIEE9Qi50b1N0cmluZygpO3ZhciB1PVVSSShxLnNhcC5nZXRNb2R1bGVQYXRoKCIiLCIvLi4vIikpO3ZhciBvPXUudG9TdHJpbmcoKTtpZih1LmlzKCJyZWxhdGl2ZSIpKXt1PXUuYWJzb2x1dGVUbyhMKX12YXIgZD11Lm5vcm1hbGl6ZSgpLnRvU3RyaW5nKCk7dmFyIHI9VVJJKCJyZXNvdXJjZXMiKS5hYnNvbHV0ZVRvKGQpLnRvU3RyaW5nKCk7dmFyIEY9bmV3IFJlZ0V4cCgiXiIrcS5zYXAuZXNjYXBlUmVnRXhwKHIpKTt2YXIgRT1mdW5jdGlvbihlKXtpZihlLmxlbmd0aD4wJiZlLnNsaWNlKC0xKSE9PSIvIil7ZSs9Ii8ifXJldHVybiBlfTt2YXIgUj1mdW5jdGlvbihkLFMpe3ZhciBlO2lmKHEuaXNBcnJheShkKSYmIWIpe3EuZWFjaChkLGZ1bmN0aW9uKHgseSl7Uih5LFMpfSl9ZWxzZSBpZihxLmlzQXJyYXkoZCkmJmIpe3ZhciBoPUUoZFswXSk7dmFyIGo9W107cS5zYXAubG9nLmRlYnVnKCJzYXAudWkuY29yZS5BcHBDYWNoZUJ1c3Rlci5yZWdpc3RlcihcIiIraCsiXCIpOyAvLyBCQVRDSCBNT0RFISIpO3ZhciBrPWcubm9ybWFsaXplVVJMKGgpO3Euc2FwLmxvZy5kZWJ1ZygiICAtLT4gbm9ybWFsaXplZCB0bzogXCIiK2srIlwiIik7cS5lYWNoKGQsZnVuY3Rpb24oeCx5KXt2YXIgbT1FKHkpO3ZhciB6PWcubm9ybWFsaXplVVJMKG0pO2lmKCFpW25dKXtqLnB1c2goeil9fSk7aWYoai5sZW5ndGg+MCl7dmFyIG09aysic2FwLXVpLWNhY2hlYnVzdGVyLWluZm8uanNvbj9zYXAtdWktbGFuZ3VhZ2U9IitsO2U9e3VybDptLHR5cGU6IlBPU1QiLGFzeW5jOiFzJiYhIVMsZGF0YVR5cGU6Impzb24iLGNvbnRlbnRUeXBlOiJ0ZXh0L3BsYWluIixkYXRhOmouam9pbigiXG4iKSxzdWNjZXNzOmZ1bmN0aW9uKHgpe3EuZXh0ZW5kKGkseCl9LGVycm9yOmZ1bmN0aW9uKCl7cS5zYXAubG9nLmVycm9yKCJGYWlsZWQgdG8gYmF0Y2ggbG9hZCBBcHBDYWNoZUJ1c3RlciBpbmRleCBmaWxlIGZyb206IFwiIittKyJcIi4iKX19fX1lbHNle2Q9RShkKTtxLnNhcC5sb2cuZGVidWcoInNhcC51aS5jb3JlLkFwcENhY2hlQnVzdGVyLnJlZ2lzdGVyKFwiIitkKyJcIik7Iik7dmFyIG49Zy5ub3JtYWxpemVVUkwoZCk7cS5zYXAubG9nLmRlYnVnKCIgIC0tPiBub3JtYWxpemVkIHRvOiBcIiIrbisiXCIiKTtpZighaVtuXSl7dmFyIG09bisic2FwLXVpLWNhY2hlYnVzdGVyLWluZm8uanNvbj9zYXAtdWktbGFuZ3VhZ2U9IitsO2U9e3VybDptLGFzeW5jOiFzJiYhIVMsZGF0YVR5cGU6Impzb24iLHN1Y2Nlc3M6ZnVuY3Rpb24oeCl7aVtuXT14fSxlcnJvcjpmdW5jdGlvbigpe3Euc2FwLmxvZy5lcnJvcigiRmFpbGVkIHRvIGxvYWQgQXBwQ2FjaGVCdXN0ZXIgaW5kZXggZmlsZSBmcm9tOiBcIiIrbSsiXCIuIil9fX19aWYoZSl7aWYoZS5hc3luYyl7dmFyIHA9Uy5zdGFydFRhc2soImxvYWQgIittKTt2YXIgdD1lLnN1Y2Nlc3Msdz1lLmVycm9yO3EuZXh0ZW5kKGUse3N1Y2Nlc3M6ZnVuY3Rpb24oeCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Uy5maW5pc2hUYXNrKHApfSxlcnJvcjpmdW5jdGlvbigpe3cuYXBwbHkodGhpcyxhcmd1bWVudHMpO1MuZmluaXNoVGFzayhwLGZhbHNlKX19KX1xLnNhcC5sb2cuaW5mbygiTG9hZGluZyBBcHBDYWNoZUJ1c3RlciBpbmRleCBmaWxlIGZyb206IFwiIittKyJcIi4iKTtxLmFqYXgoZSl9fTt2YXIgZz17Ym9vdDpmdW5jdGlvbihTKXt2YXIgZT1jLmdldEFwcENhY2hlQnVzdGVyKCk7aWYoZSYmZS5sZW5ndGg+MCl7ZT1lLnNsaWNlKCk7dmFyIGg9dHJ1ZTt2YXIgVj1TdHJpbmcoZVswXSkudG9Mb3dlckNhc2UoKTtpZihlLmxlbmd0aD09PTEpe2lmKFY9PT0idHJ1ZSJ8fFY9PT0ieCIpe3ZhciB1PVVSSShvKTtlPXUuaXMoInJlbGF0aXZlIik/W3UudG9TdHJpbmcoKV06W119ZWxzZSBpZihWPT09ImZhbHNlIil7aD1mYWxzZX19aWYoaCl7Zy5pbml0KCk7UihlLFMpfX19LGluaXQ6ZnVuY3Rpb24oKXt2YXIgaD1nLmNvbnZlcnRVUkw7dmFyIG49Zy5ub3JtYWxpemVVUkw7dmFyIGo9ZnVuY3Rpb24oZSl7aWYoZSYmdHlwZW9mKGUpPT09InN0cmluZyIpe2U9bihlKTtyZXR1cm4hZS5tYXRjaChGKX1yZXR1cm4gZmFsc2V9O3EuYWpheD1mdW5jdGlvbihlLGspe2lmKGUmJmUudXJsJiZqKGUudXJsKSl7ZS51cmw9aChlLnVybCl9cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtxLnNhcC5pbmNsdWRlU2NyaXB0PWZ1bmN0aW9uKGUsayl7dmFyIG09QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7aWYoaihtWzBdKSl7bVswXT1oKG1bMF0pfXJldHVybiBJLmFwcGx5KHRoaXMsbSl9O3Euc2FwLmluY2x1ZGVTdHlsZVNoZWV0PWZ1bmN0aW9uKGUsayl7dmFyIG09QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7aWYoaihtWzBdKSl7bVswXT1oKG1bMF0pfXJldHVybiBmLmFwcGx5KHRoaXMsbSl9O3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QucHJvdG90eXBlLnZhbGlkYXRlUHJvcGVydHk9ZnVuY3Rpb24ocCxWKXt2YXIgbT10aGlzLmdldE1ldGFkYXRhKCksUD1tLmdldEFsbFByb3BlcnRpZXMoKVtwXSxrO2lmKFAmJlAudHlwZT09PSJzYXAudWkuY29yZS5VUkkiKXtrPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpO3RyeXtpZihqKGtbMV0pKXtrWzFdPWgoa1sxXSl9fWNhdGNoKGUpe319cmV0dXJuIHYuYXBwbHkodGhpcyxrfHxhcmd1bWVudHMpfX0sZXhpdDpmdW5jdGlvbigpe3EuYWpheD1hO3Euc2FwLmluY2x1ZGVTY3JpcHQ9STtxLnNhcC5pbmNsdWRlU3R5bGVTaGVldD1mO3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QucHJvdG90eXBlLnZhbGlkYXRlUHJvcGVydHk9djtpPXt9fSxyZWdpc3RlcjpmdW5jdGlvbihkKXtSKGQpfSxjb252ZXJ0VVJMOmZ1bmN0aW9uKGUpe3Euc2FwLmxvZy5kZWJ1Zygic2FwLnVpLmNvcmUuQXBwQ2FjaGVCdXN0ZXIuY29udmVydFVSTChcIiIrZSsiXCIpOyIpO2lmKGkmJmUpe3ZhciBuPWcubm9ybWFsaXplVVJMKGUpO3Euc2FwLmxvZy5kZWJ1ZygiICAtLT4gbm9ybWFsaXplZCB0bzogXCIiK24rIlwiIik7aWYobiYmZy5oYW5kbGVVUkwobikpe3EuZWFjaChpLGZ1bmN0aW9uKGQsbSl7dmFyIGg7aWYoZCYmbi5sZW5ndGg+PWQubGVuZ3RoJiZuLnNsaWNlKDAsZC5sZW5ndGgpPT09ZCl7aD1uLnNsaWNlKGQubGVuZ3RoKTtpZihtW2hdKXtlPWQrIn4iK21baF0rIn4vIitoO3Euc2FwLmxvZy5kZWJ1ZygiICA9PT4gcmV0dXJuIFwiIitlKyJcIjsiKTtyZXR1cm4gZmFsc2V9fX0pfX1yZXR1cm4gZX0sbm9ybWFsaXplVVJMOmZ1bmN0aW9uKGUpe3ZhciB1PVVSSShlfHwiLi8iKTtpZih1LmlzKCJyZWxhdGl2ZSIpKXt1PXUuYWJzb2x1dGVUbyhMKX1yZXR1cm4gdS5ub3JtYWxpemVQcm90b2NvbCgpLm5vcm1hbGl6ZUhvc3RuYW1lKCkubm9ybWFsaXplUG9ydCgpLm5vcm1hbGl6ZVBhdGgoKS50b1N0cmluZygpfSxoYW5kbGVVUkw6ZnVuY3Rpb24oZSl7cmV0dXJuIHRydWV9fTtyZXR1cm4gZ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0N1c3RvbWl6aW5nQ29uZmlndXJhdGlvbiIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQ29yZSddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBhPSJzYXAudWkudmlld1JlcGxhY2VtZW50cyIsYj0ic2FwLnVpLnZpZXdFeHRlbnNpb25zIixjPSJzYXAudWkudmlld01vZGlmaWNhdGlvbnMiLGQ9InNhcC51aS5jb250cm9sbGVyRXh0ZW5zaW9ucyI7dmFyIG09e307ZnVuY3Rpb24gZih0LGcpe3EuZWFjaChtLGZ1bmN0aW9uKG4sbyl7aWYobyYmb1t0XSl7aWYoZyhvW3RdKSl7cmV0dXJuIGZhbHNlfX19KX07dmFyIGU9e2xvZzpmdW5jdGlvbigpe2lmKHdpbmRvdy5jb25zb2xlKXt3aW5kb3cuY29uc29sZS5sb2cobSl9fSxhY3RpdmF0ZUZvckNvbXBvbmVudDpmdW5jdGlvbihzKXtxLnNhcC5sb2cuaW5mbygiQ3VzdG9taXppbmdDb25maWd1cmF0aW9uOiBhY3RpdmF0ZUZvckNvbXBvbmVudCgnIitzKyInKSIpO3ZhciBGPXMrIi5Db21wb25lbnQiO3Euc2FwLnJlcXVpcmUoRik7dmFyIG89cS5zYXAuZ2V0T2JqZWN0KEYpLmdldE1ldGFkYXRhKCkuZ2V0Q3VzdG9taXppbmcoKTttW3NdPW99LGRlYWN0aXZhdGVGb3JDb21wb25lbnQ6ZnVuY3Rpb24ocyl7cS5zYXAubG9nLmluZm8oIkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbjogZGVhY3RpdmF0ZUZvckNvbXBvbmVudCgnIitzKyInKSIpO2RlbGV0ZSBtW3NdfSxnZXRWaWV3UmVwbGFjZW1lbnQ6ZnVuY3Rpb24odil7dmFyIHI9dW5kZWZpbmVkO2YoYSxmdW5jdGlvbihvKXtyPW9bdl07cmV0dXJuISFyfSk7cmV0dXJuIHJ9LGdldFZpZXdFeHRlbnNpb246ZnVuY3Rpb24odixFKXt2YXIgcj11bmRlZmluZWQ7ZihiLGZ1bmN0aW9uKG8pe3I9b1t2XSYmb1t2XVtFXTtyZXR1cm4hIXJ9KTtyZXR1cm4gcn0sZ2V0Q29udHJvbGxlckV4dGVuc2lvbjpmdW5jdGlvbihzKXt2YXIgcj11bmRlZmluZWQ7ZihkLGZ1bmN0aW9uKG8pe3I9b1tzXTtyZXR1cm4hIXJ9KTtyZXR1cm4gcn0sZ2V0Q3VzdG9tUHJvcGVydGllczpmdW5jdGlvbih2LHMpe3ZhciBTPXt9O2YoYyxmdW5jdGlvbihvKXt2YXIgZz1vW3ZdJiZvW3ZdW3NdO3ZhciB1PXt9O2lmKGcpe3EuZWFjaChnLGZ1bmN0aW9uKG4sVil7aWYobj09PSJ2aXNpYmxlIil7dVtuXT1WO3Euc2FwLmxvZy5pbmZvKCJDdXN0b21pemluZzogY3VzdG9tIHZhbHVlIGZvciBwcm9wZXJ0eSAnIituKyInIG9mIGNvbnRyb2wgJyIrcysiJyBpbiBWaWV3ICciK3YrIicgYXBwbGllZDogIitWKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJDdXN0b21pemluZzogY3VzdG9tIHZhbHVlIGZvciBwcm9wZXJ0eSAnIituKyInIG9mIGNvbnRyb2wgJyIrcysiJyBpbiBWaWV3ICciK3YrIicgaWdub3JlZDogb25seSB0aGUgJ3Zpc2libGUnIHByb3BlcnR5IGNhbiBiZSBjdXN0b21pemVkLiIpfX0pO3EuZXh0ZW5kKFMsdSl9fSk7cmV0dXJuIFN9fTtpZihzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXREaXNhYmxlQ3VzdG9taXppbmcoKSl7cS5zYXAubG9nLmluZm8oIkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbjogZGlzYWJsaW5nIEN1c3RvbWl6aW5nIG5vdyIpO3EuZWFjaChlLGZ1bmN0aW9uKG4sQSl7aWYodHlwZW9mIEE9PT0iZnVuY3Rpb24iKXtlW25dPWZ1bmN0aW9uKCl7fX19KX1yZXR1cm4gZX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvclN1cHBvcnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3JTdXBwb3J0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvTG9jYWxCdXN5SW5kaWNhdG9yU3VwcG9ydCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRWxlbWVudCddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBMPWZ1bmN0aW9uKCl7aWYodGhpcz09PXNhcC51aS5jb3JlLkNvbnRyb2wucHJvdG90eXBlKXt0aGlzLnNldERlbGF5PWZ1bmN0aW9uKGQpe3RoaXMuc2V0QnVzeUluZGljYXRvckRlbGF5KGQpfX1lbHNle3Euc2FwLmxvZy5lcnJvcigiT25seSBjb250cm9scyBjYW4gdXNlIHRoZSBMb2NhbEJ1c3lJbmRpY2F0b3IiLHRoaXMpfX07cmV0dXJuIEx9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Qb3B1cFN1cHBvcnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Qb3B1cFN1cHBvcnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Qb3B1cFN1cHBvcnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0VsZW1lbnQnXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgUD1mdW5jdGlvbigpe3RoaXMuZ2V0TWV0YWRhdGEoKS5hZGRQdWJsaWNNZXRob2RzKFsiZ2V0UGFyZW50UG9wdXAiLCJpc0luUG9wdXAiLCJnZXRQYXJlbnRQb3B1cElkIiwiYWRkVG9Qb3B1cCIsInJlbW92ZUZyb21Qb3B1cCJdKTt0aGlzLmlzSW5Qb3B1cD1mdW5jdGlvbih0KXt2YXIgcD10aGlzLmdldFBhcmVudFBvcHVwKHQpO3JldHVybiBwJiZwLmxlbmd0aD4wfTt0aGlzLmdldFBhcmVudFBvcHVwPWZ1bmN0aW9uKHQpe3ZhciBUPXQ/dDp0aGlzO3ZhciAkPXEoVCBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkVsZW1lbnQ/VC5nZXREb21SZWYoKTpUKTtyZXR1cm4gJC5jbG9zZXN0KCJbZGF0YS1zYXAtdWktcG9wdXBdIil9O3RoaXMuZ2V0UGFyZW50UG9wdXBJZD1mdW5jdGlvbih0KXt2YXIgcD10aGlzLmdldFBhcmVudFBvcHVwKHQpO3JldHVybiBwLmF0dHIoImRhdGEtc2FwLXVpLXBvcHVwIil9O3RoaXMuYWRkQ2hpbGRUb1BvcHVwPWZ1bmN0aW9uKHAsYyl7dmFyIGU9InNhcC51aS5jb3JlLlBvcHVwLmFkZEZvY3VzYWJsZUNvbnRlbnQtIitwO3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS5wdWJsaXNoKCJzYXAudWkiLGUse2lkOmN9KX07dGhpcy5yZW1vdmVDaGlsZEZyb21Qb3B1cD1mdW5jdGlvbihwKXtpZighcCl7cD10aGlzLmdldFBvcHVwSWQoKX12YXIgZT0ic2FwLnVpLmNvcmUuUG9wdXAucmVtb3ZlRm9jdXNhYmxlQ29udGVudC0iK3A7c2FwLnVpLmdldENvcmUoKS5nZXRFdmVudEJ1cygpLnB1Ymxpc2goInNhcC51aSIsZSx7aWQ6dGhpcy5nZXRJZCgpfSl9O3RoaXMuY2xvc2VQb3B1cD1mdW5jdGlvbihwKXt2YXIgZT0ic2FwLnVpLmNvcmUuUG9wdXAuY2xvc2VQb3B1cC0iK3A7c2FwLnVpLmdldENvcmUoKS5nZXRFdmVudEJ1cygpLnB1Ymxpc2goInNhcC51aSIsZSl9O3RoaXMuaW5jcmVhc2VaSW5kZXg9ZnVuY3Rpb24ocCxpKXt2YXIgZT0ic2FwLnVpLmNvcmUuUG9wdXAuaW5jcmVhc2VaSW5kZXgtIitwO3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS5wdWJsaXNoKCJzYXAudWkiLGUse2lzRnJvbVBhcmVudFBvcHVwOmk/aTpmYWxzZX0pfX07cmV0dXJuIFB9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5saWJyYXJ5Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubGlicmFyeScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL2xpYnJhcnkiLFsnLi9Db3JlJ10sZnVuY3Rpb24oKXtzYXAudWkuZ2V0Q29yZSgpLmluaXRMaWJyYXJ5KHtuYW1lOiJzYXAudWkuY29yZSIsdHlwZXM6WyJzYXAudWkuY29yZS5BY2Nlc3NpYmxlUm9sZSIsInNhcC51aS5jb3JlLkJhckNvbG9yIiwic2FwLnVpLmNvcmUuQ1NTQ29sb3IiLCJzYXAudWkuY29yZS5DU1NTaXplIiwic2FwLnVpLmNvcmUuQ1NTU2l6ZVNob3J0SGFuZCIsInNhcC51aS5jb3JlLkNvbGxpc2lvbiIsInNhcC51aS5jb3JlLkRlc2lnbiIsInNhcC51aS5jb3JlLkRvY2siLCJzYXAudWkuY29yZS5Ib3Jpem9udGFsQWxpZ24iLCJzYXAudWkuY29yZS5JRCIsInNhcC51aS5jb3JlLkljb25Db2xvciIsInNhcC51aS5jb3JlLkltZU1vZGUiLCJzYXAudWkuY29yZS5NZXNzYWdlVHlwZSIsInNhcC51aS5jb3JlLk9wZW5TdGF0ZSIsInNhcC51aS5jb3JlLk9yaWVudGF0aW9uIiwic2FwLnVpLmNvcmUuUGVyY2VudGFnZSIsInNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbiIsInNhcC51aS5jb3JlLlNjcm9sbGluZyIsInNhcC51aS5jb3JlLlRleHRBbGlnbiIsInNhcC51aS5jb3JlLlRleHREaXJlY3Rpb24iLCJzYXAudWkuY29yZS5UaXRsZUxldmVsIiwic2FwLnVpLmNvcmUuVVJJIiwic2FwLnVpLmNvcmUuVmFsdWVTdGF0ZSIsInNhcC51aS5jb3JlLlZlcnRpY2FsQWxpZ24iLCJzYXAudWkuY29yZS5XcmFwcGluZyIsImFueSIsImJvb2xlYW4iLCJmbG9hdCIsImludCIsInNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZSIsIm9iamVjdCIsInNhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeURpcmVjdGlvbiIsInN0cmluZyIsInZvaWQiXSxpbnRlcmZhY2VzOlsic2FwLnVpLmNvcmUuTGFiZWwiLCJzYXAudWkuY29yZS5Qb3B1cEludGVyZmFjZSIsInNhcC51aS5jb3JlLlRvb2xiYXIiXSxjb250cm9sczpbInNhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lciIsInNhcC51aS5jb3JlLkNvbnRyb2wiLCJzYXAudWkuY29yZS5IVE1MIiwic2FwLnVpLmNvcmUuSWNvbiIsInNhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvciIsInNhcC51aS5jb3JlLlNjcm9sbEJhciIsInNhcC51aS5jb3JlLlRvb2x0aXBCYXNlIiwic2FwLnVpLmNvcmUuVUlDb21wb25lbnQiLCJzYXAudWkuY29yZS5tdmMuSFRNTFZpZXciLCJzYXAudWkuY29yZS5tdmMuSlNPTlZpZXciLCJzYXAudWkuY29yZS5tdmMuSlNWaWV3Iiwic2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldyIsInNhcC51aS5jb3JlLm12Yy5WaWV3Iiwic2FwLnVpLmNvcmUubXZjLlhNTFZpZXciLCJzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQiLCJzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlIiwic2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wiXSxlbGVtZW50czpbInNhcC51aS5jb3JlLkN1c3RvbURhdGEiLCJzYXAudWkuY29yZS5FbGVtZW50Iiwic2FwLnVpLmNvcmUuSXRlbSIsInNhcC51aS5jb3JlLkxheW91dERhdGEiLCJzYXAudWkuY29yZS5MaXN0SXRlbSIsInNhcC51aS5jb3JlLk1lc3NhZ2UiLCJzYXAudWkuY29yZS5TZXBhcmF0b3JJdGVtIiwic2FwLnVpLmNvcmUuVGl0bGUiLCJzYXAudWkuY29yZS5WYXJpYW50TGF5b3V0RGF0YSIsInNhcC51aS5jb3JlLnNlYXJjaC5PcGVuU2VhcmNoUHJvdmlkZXIiLCJzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXIiLCJzYXAudWkuY29yZS50bXBsLkRPTUF0dHJpYnV0ZSJdLHZlcnNpb246IjEuMjIuMTAifSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQWNjZXNzaWJsZVJvbGUiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkFjY2Vzc2libGVSb2xlPXtOb25lOiJOb25lIixBbGVydDoiQWxlcnQiLEFsZXJ0RGlhbG9nOiJBbGVydERpYWxvZyIsQXBwbGljYXRpb246IkFwcGxpY2F0aW9uIixCYW5uZXI6IkJhbm5lciIsQnV0dG9uOiJCdXR0b24iLENoZWNrYm94OiJDaGVja2JveCIsQ29sdW1uSGVhZGVyOiJDb2x1bW5IZWFkZXIiLENvbWJvYm94OiJDb21ib2JveCIsCi8qKgoJICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbnRlbnQgb24gdGhlIHBhZ2UuIEV4YW1wbGVzIGFyZSBmb290bm90ZXMsIGNvcHlyaWdodHMsIG9yIGxpbmtzIHRvIHByaXZhY3kgc3RhdGVtZW50cy4KCSAqIAoJICogQHB1YmxpYwoJICovCkNvbnRlbnRJbmZvOiJDb250ZW50SW5mbyIsRGVmaW5pdGlvbjoiRGVmaW5pdGlvbiIsRGVzY3JpcHRpb246IkRlc2NyaXB0aW9uIixEaWFsb2c6IkRpYWxvZyIsRGlyZWN0b3J5OiJEaXJlY3RvcnkiLERvY3VtZW50OiJEb2N1bWVudCIsR3JpZDoiR3JpZCIsR3JpZENlbGw6IkdyaWRDZWxsIixHcm91cDoiR3JvdXAiLEhlYWRpbmc6IkhlYWRpbmciLEltZzoiSW1nIixMaW5rOiJMaW5rIixMaXN0OiJMaXN0IixMaXN0Ym94OiJMaXN0Ym94IixMaXN0SXRlbToiTGlzdEl0ZW0iLExvZzoiTG9nIixNYWluOiJNYWluIixNYXJxdWVlOiJNYXJxdWVlIixNZW51OiJNZW51IixNZW51YmFyOiJNZW51YmFyIixNZW51SXRlbToiTWVudUl0ZW0iLE1lbnVJdGVtQ2hlY2tib3g6Ik1lbnVJdGVtQ2hlY2tib3giLE1lbnVJdGVtUmFkaW86Ik1lbnVJdGVtUmFkaW8iLE5hdmlnYXRpb246Ik5hdmlnYXRpb24iLE5vdGU6Ik5vdGUiLE9wdGlvbjoiT3B0aW9uIixQcmVzZW50YXRpb246IlByZXNlbnRhdGlvbiIsUHJvZ3Jlc3NCYXI6IlByb2dyZXNzQmFyIixSYWRpbzoiUmFkaW8iLFJhZGlvR3JvdXA6IlJhZGlvR3JvdXAiLFJlZ2lvbjoiUmVnaW9uIixSb3c6IlJvdyIsUm93SGVhZGVyOiJSb3dIZWFkZXIiLFNlYXJjaDoiU2VhcmNoIixTZWNvbmRhcnk6IlNlY29uZGFyeSIsU2VlQWxzbzoiU2VlQWxzbyIsU2VwYXJhdG9yOiJTZXBhcmF0b3IiLFNsaWRlcjoiU2xpZGVyIixTcGluQnV0dG9uOiJTcGluQnV0dG9uIixTdGF0dXM6IlN0YXR1cyIsVGFiOiJUYWIiLFRhYmxpc3Q6IlRhYmxpc3QiLFRhYnBhbmVsOiJUYWJwYW5lbCIsVGV4dGJveDoiVGV4dGJveCIsVGltZXI6IlRpbWVyIixUb29sYmFyOiJUb29sYmFyIixUb29sdGlwOiJUb29sdGlwIixUcmVlOiJUcmVlIixUcmVlR3JpZDoiVHJlZUdyaWQiLFRyZWVJdGVtOiJUcmVlSXRlbSJ9O3JldHVybiBzYXAudWkuY29yZS5BY2Nlc3NpYmxlUm9sZX0sdHJ1ZSk7Ci8qIQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCnNhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0JhckNvbG9yIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5CYXJDb2xvcj17TkVVVFJBTDoiTkVVVFJBTCIsUE9TSVRJVkU6IlBPU0lUSVZFIixDUklUSUNBTDoiQ1JJVElDQUwiLE5FR0FUSVZFOiJORUdBVElWRSJ9O3JldHVybiBzYXAudWkuY29yZS5CYXJDb2xvcn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvQ1NTQ29sb3InLFsnc2FwL3VpL2Jhc2UvRGF0YVR5cGUnXSxmdW5jdGlvbihEKXtzYXAudWkuY29yZS5DU1NDb2xvcj1ELmNyZWF0ZVR5cGUoJ3NhcC51aS5jb3JlLkNTU0NvbG9yJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXigjKFswLTlhLWZBLUZdezN9fFswLTlhLWZBLUZdezZ9KXxyZ2JcKFxzKigoMT9bMC05XT9bMC05XXwyKFswLTRdWzAtOV18NVswLTVdKSl8KFswLTldP1swLTldKFwuWzAtOV0rKT98MTAwKFwuMCspPyklKVxzKigsXHMqKCgxP1swLTldP1swLTldfDIoWzAtNF1bMC05XXw1WzAtNV0pKXwoWzAtOV0/WzAtOV0oXC5bMC05XSspP3wxMDAoXC4wKyk/KSUpXHMqKXsyfVwpfHJnYmFcKChccyooKDE/WzAtOV0/WzAtOV18MihbMC00XVswLTldfDVbMC01XSkpfChbMC05XT9bMC05XShcLlswLTldKyk/fDEwMChcLjArKT8pJSlccyosKXszfVxzKigwKFwuWzAtOV0rKT98MShcLjArKT8pXHMqXCl8aHNsXChccyooWzAtMl0/WzAtOV0/WzAtOV18MyhbMC01XVswLTldfDYwKSlccyooLFxzKigoWzAtOV0/WzAtOV0oXC5bMC05XSspP3wxMDAoXC4wKyk/KSUpXHMqKXsyfVwpfGhzbGFcKFxzKihbMC0yXT9bMC05XT9bMC05XXwzKFswLTVdWzAtOV18NjApKVxzKiwoXHMqKChbMC05XT9bMC05XShcLlswLTldKyk/fDEwMChcLjArKT8pJSlccyosKXsyfVxzKigwKFwuWzAtOV0rKT98MShcLjArKT8pXHMqXCl8YWxpY2VibHVlfGFudGlxdWV3aGl0ZXxhcXVhfGFxdWFtYXJpbmV8YXp1cmV8YmVpZ2V8YmlzcXVlfGJsYWNrfGJsYW5jaGVkYWxtb25kfGJsdWV8Ymx1ZXZpb2xldHxicm93bnxidXJseXdvb2R8Y2FkZXRibHVlfGNoYXJ0cmV1c2V8Y2hvY29sYXRlfGNvcmFsY29ybmZsb3dlcmJsdWV8Y29ybnNpbGt8Y3JpbXNvbnxjeWFufGRhcmtibHVlfGRhcmtjeWFufGRhcmtnb2xkZW5yb2R8ZGFya2dyYXl8ZGFya2dyZWVufGRhcmtraGFraXxkYXJrbWFnZW50YXxkYXJrb2xpdmVncmVlbnxkYXJrb3JhbmdlfGRhcmtvcmNoaWR8ZGFya3JlZHxkYXJrc2FsbW9ufGRhcmtzZWFncmVlbnxkYXJrc2xhdGVibHVlfGRhcmtzbGF0ZWdyYXl8ZGFya3R1cnF1b2lzZXxkYXJrdmlvbGV0fGRlZXBwaW5rfGRlZXBza3libHVlfGRpbWdyYXl8ZG9kZ2VyYmx1ZXxmaXJlYnJpY2t8ZmxvcmFsd2hpdGV8Zm9yZXN0Z3JlZW58ZnVjaHNpYXxnYWluc2Jvcm98Z2hvc3R3aGl0ZXxnb2xkfGdvbGRlbnJvZHxncmF5fGdyZWVufGdyZWVueWVsbG93fGhvbmV5ZGV3fGhvdHBpbmt8aW5kaWFucmVkfGluZGlnb3xpdm9yeXxraGFraXxsYXZlbmRlcnxsYXZlbmRlcmJsdXNofGxhd25ncmVlbnxsZW1vbmNoaWZmb258bGlnaHRibHVlfGxpZ2h0Y29yYWx8bGlnaHRjeWFufGxpZ2h0Z29sZGVucm9keWVsbG93fGxpZ2h0Z3JheXxsaWdodGdyZWVufGxpZ2h0cGlua3xsaWdodHNhbG1vbnxsaWdodHNlYWdyZWVufGxpZ2h0c2t5Ymx1ZXxsaWdodHNsYXRlZ3JheXxsaWdodHN0ZWVsYmx1ZXxsaWdodHllbGxvd3xsaW1lfGxpbWVncmVlbnxsaW5lbnxtYWdlbnRhfG1hcm9vbnxtZWRpdW1hcXVhbWFyaW5lfG1lZGl1bWJsdWV8bWVkaXVtb3JjaGlkfG1lZGl1bXB1cnBsZXxtZWRpdW1zZWFncmVlbnxtZWRpdW1zbGF0ZWJsdWV8bWVkaXVtc3ByaW5nZ3JlZW58bWVkaXVtdHVycXVvaXNlfG1lZGl1bXZpb2xldHJlZHxtaWRuaWdodGJsdWV8bWludGNyZWFtfG1pc3R5cm9zZXxtb2NjYXNpbnxuYXZham93aGl0ZXxuYXZ5fG9sZGxhY2V8b2xpdmV8b2xpdmVkcmFifG9yYW5nZXxvcmFuZ2VyZWR8b3JjaGlkfHBhbGVnb2xkZW5yb2R8cGFsZWdyZWVufHBhbGV0dXJxdW9pc2V8cGFsZXZpb2xldHJlZHxwYXBheWF3aGlwfHBlYWNocHVmZnxwZXJ1fHBpbmt8cGx1bXxwb3dkZXJibHVlfHB1cnBsZXxyZWR8cm9zeWJyb3dufHJveWFsYmx1ZXxzYWRkbGVicm93bnxzYWxtb258c2FuZHlicm93bnxzZWFncmVlbnxzZWFzaGVsbHxzaWVubmF8c2lsdmVyc2t5Ymx1ZXxzbGF0ZWJsdWV8c2xhdGVncmF5fHNub3d8c3ByaW5nZ3JlZW58c3RlZWxibHVlfHRhbnx0ZWFsfHRoaXN0bGV8dG9tYXRvfHR1cnF1b2lzZXx2aW9sZXR8d2hlYXR8d2hpdGV8d2hpdGVzbW9rZXx5ZWxsb3d8eWVsbG93Z3JlZW58dHJhbnNwYXJlbnR8aW5oZXJpdHwpJC8udGVzdCh2KX19LEQuZ2V0VHlwZSgnc3RyaW5nJykpO3JldHVybiBzYXAudWkuY29yZS5DU1NDb2xvcn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvQ1NTU2l6ZScsWydzYXAvdWkvYmFzZS9EYXRhVHlwZSddLGZ1bmN0aW9uKEQpe3NhcC51aS5jb3JlLkNTU1NpemU9RC5jcmVhdGVUeXBlKCdzYXAudWkuY29yZS5DU1NTaXplJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXihhdXRvfGluaGVyaXR8Wy0rXT8oMCp8KFswLTldK3xbMC05XSpcLlswLTldKykoW3JSXVtlRV1bbU1dfFtlRV1bbU1dfFtlRV1beFhdfFtwUF1beFhdfFtjQ11bbU1dfFttTV1bbU1dfFtpSV1bbk5dfFtwUF1bdFRdfFtwUF1bY0NdfCUpKSkkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLkNTU1NpemV9LHRydWUpO3NhcC51aS5kZWZpbmUoJ3NhcC91aS9jb3JlL0NTU1NpemVTaG9ydEhhbmQnLFsnc2FwL3VpL2Jhc2UvRGF0YVR5cGUnXSxmdW5jdGlvbihEKXtzYXAudWkuY29yZS5DU1NTaXplU2hvcnRIYW5kPUQuY3JlYXRlVHlwZSgnc2FwLnVpLmNvcmUuQ1NTU2l6ZVNob3J0SGFuZCcse2lzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuL14oaW5oZXJpdHwoYXV0b3xbLStdPygwKnwoXGQrfFxkKlwuXGQrKShbZUVdW21NXXxbZUVdW3hYXXxbcFBdW3hYXXxbY0NdW21NXXxbbU1dW21NXXxbaUldW25OXXxbcFBdW3RUXXxbcFBdW2NDXXwlKSkpezF9KFxzKGF1dG98Wy0rXT8oMCp8KFxkK3xcZCpcLlxkKykoW2VFXVttTV18W2VFXVt4WF18W3BQXVt4WF18W2NDXVttTV18W21NXVttTV18W2lJXVtuTl18W3BQXVt0VF18W3BQXVtjQ118JSkpKSl7MCwzfSkkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLkNTU1NpemVTaG9ydEhhbmR9LHRydWUpO3NhcC51aS5kZWZpbmUoJ3NhcC91aS9jb3JlL0NvbGxpc2lvbicsWydzYXAvdWkvYmFzZS9EYXRhVHlwZSddLGZ1bmN0aW9uKEQpe3NhcC51aS5jb3JlLkNvbGxpc2lvbj1ELmNyZWF0ZVR5cGUoJ3NhcC51aS5jb3JlLkNvbGxpc2lvbicse2lzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuL14oKGZsaXB8Zml0fG5vbmUpKCAoZmxpcHxmaXR8bm9uZSkpPykkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLkNvbGxpc2lvbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvRGVzaWduIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5EZXNpZ249e1N0YW5kYXJkOiJTdGFuZGFyZCIsTW9ub3NwYWNlOiJNb25vc3BhY2UifTtyZXR1cm4gc2FwLnVpLmNvcmUuRGVzaWdufSx0cnVlKTtzYXAudWkuZGVmaW5lKCdzYXAvdWkvY29yZS9Eb2NrJyxbJ3NhcC91aS9iYXNlL0RhdGFUeXBlJ10sZnVuY3Rpb24oRCl7c2FwLnVpLmNvcmUuRG9jaz1ELmNyZWF0ZVR5cGUoJ3NhcC51aS5jb3JlLkRvY2snLHtpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybi9eKChiZWdpbnxsZWZ0fGNlbnRlcnxyaWdodHxlbmQpICh0b3B8Y2VudGVyfGJvdHRvbSkpJC8udGVzdCh2KX19LEQuZ2V0VHlwZSgnc3RyaW5nJykpO3JldHVybiBzYXAudWkuY29yZS5Eb2NrfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Ib3Jpem9udGFsQWxpZ24iLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkhvcml6b250YWxBbGlnbj17QmVnaW46IkJlZ2luIixFbmQ6IkVuZCIsTGVmdDoiTGVmdCIsUmlnaHQ6IlJpZ2h0IixDZW50ZXI6IkNlbnRlciJ9O3JldHVybiBzYXAudWkuY29yZS5Ib3Jpem9udGFsQWxpZ259LHRydWUpO3NhcC51aS5kZWZpbmUoJ3NhcC91aS9jb3JlL0lEJyxbJ3NhcC91aS9iYXNlL0RhdGFUeXBlJ10sZnVuY3Rpb24oRCl7c2FwLnVpLmNvcmUuSUQ9RC5jcmVhdGVUeXBlKCdzYXAudWkuY29yZS5JRCcse2lzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuL14oW0EtWmEtel9dWy1BLVphLXowLTlfLjpdKikkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLklEfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9JY29uQ29sb3IiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkljb25Db2xvcj17RGVmYXVsdDoiRGVmYXVsdCIsUG9zaXRpdmU6IlBvc2l0aXZlIixOZWdhdGl2ZToiTmVnYXRpdmUiLENyaXRpY2FsOiJDcml0aWNhbCIsTmV1dHJhbDoiTmV1dHJhbCJ9O3JldHVybiBzYXAudWkuY29yZS5JY29uQ29sb3J9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ltZU1vZGUiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkltZU1vZGU9e0F1dG86IkF1dG8iLEFjdGl2ZToiQWN0aXZlIixJbmFjdGl2ZToiSW5hY3RpdmUiLERpc2FibGVkOiJEaXNhYmxlZCJ9O3JldHVybiBzYXAudWkuY29yZS5JbWVNb2RlfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9NZXNzYWdlVHlwZSIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuTWVzc2FnZVR5cGU9e0luZm9ybWF0aW9uOiJJbmZvcm1hdGlvbiIsV2FybmluZzoiV2FybmluZyIsRXJyb3I6IkVycm9yIixOb25lOiJOb25lIixTdWNjZXNzOiJTdWNjZXNzIn07cmV0dXJuIHNhcC51aS5jb3JlLk1lc3NhZ2VUeXBlfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9PcGVuU3RhdGUiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLk9wZW5TdGF0ZT17T1BFTjoiT1BFTiIsQ0xPU0VEOiJDTE9TRUQiLE9QRU5JTkc6Ik9QRU5JTkciLENMT1NJTkc6IkNMT1NJTkcifTtyZXR1cm4gc2FwLnVpLmNvcmUuT3BlblN0YXRlfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9PcmllbnRhdGlvbiIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuT3JpZW50YXRpb249e0hvcml6b250YWw6Ikhvcml6b250YWwiLFZlcnRpY2FsOiJWZXJ0aWNhbCJ9O3JldHVybiBzYXAudWkuY29yZS5PcmllbnRhdGlvbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvUGVyY2VudGFnZScsWydzYXAvdWkvYmFzZS9EYXRhVHlwZSddLGZ1bmN0aW9uKEQpe3NhcC51aS5jb3JlLlBlcmNlbnRhZ2U9RC5jcmVhdGVUeXBlKCdzYXAudWkuY29yZS5QZXJjZW50YWdlJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXihbMC05XVswLTldKihcLlswLTldKyk/JSkkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLlBlcmNlbnRhZ2V9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1Njcm9sbEJhckFjdGlvbiIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uPXtTdGVwOiJTdGVwIixQYWdlOiJQYWdlIixNb3VzZVdoZWVsOiJNb3VzZVdoZWVsIixEcmFnOiJEcmFnIn07cmV0dXJuIHNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvU2Nyb2xsaW5nIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5TY3JvbGxpbmc9e05vbmU6Ik5vbmUiLEF1dG86IkF1dG8iLFNjcm9sbDoiU2Nyb2xsIixIaWRkZW46IkhpZGRlbiJ9O3JldHVybiBzYXAudWkuY29yZS5TY3JvbGxpbmd9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1RleHRBbGlnbiIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuVGV4dEFsaWduPXtCZWdpbjoiQmVnaW4iLEVuZDoiRW5kIixMZWZ0OiJMZWZ0IixSaWdodDoiUmlnaHQiLENlbnRlcjoiQ2VudGVyIn07cmV0dXJuIHNhcC51aS5jb3JlLlRleHRBbGlnbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVGV4dERpcmVjdGlvbiIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuVGV4dERpcmVjdGlvbj17TFRSOiJMVFIiLFJUTDoiUlRMIixJbmhlcml0OiJJbmhlcml0In07cmV0dXJuIHNhcC51aS5jb3JlLlRleHREaXJlY3Rpb259LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1RpdGxlTGV2ZWwiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLlRpdGxlTGV2ZWw9e0F1dG86IkF1dG8iLEgxOiJIMSIsSDI6IkgyIixIMzoiSDMiLEg0OiJINCIsSDU6Ikg1IixINjoiSDYifTtyZXR1cm4gc2FwLnVpLmNvcmUuVGl0bGVMZXZlbH0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvVVJJJyxbJ3NhcC91aS9iYXNlL0RhdGFUeXBlJ10sZnVuY3Rpb24oRCl7c2FwLnVpLmNvcmUuVVJJPUQuY3JlYXRlVHlwZSgnc2FwLnVpLmNvcmUuVVJJJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXigoKFteOlwvPyNdKyk6KT8oXC9cLyhbXlwvPyNdKikpPyhbXj8jXSopKFw/KFteI10qKSk/KCMoLiopKT8pJC8udGVzdCh2KX19LEQuZ2V0VHlwZSgnc3RyaW5nJykpO3JldHVybiBzYXAudWkuY29yZS5VUkl9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1ZhbHVlU3RhdGUiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLlZhbHVlU3RhdGU9e0Vycm9yOiJFcnJvciIsV2FybmluZzoiV2FybmluZyIsU3VjY2VzczoiU3VjY2VzcyIsTm9uZToiTm9uZSJ9O3JldHVybiBzYXAudWkuY29yZS5WYWx1ZVN0YXRlfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9WZXJ0aWNhbEFsaWduIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5WZXJ0aWNhbEFsaWduPXtCb3R0b206IkJvdHRvbSIsTWlkZGxlOiJNaWRkbGUiLFRvcDoiVG9wIixJbmhlcml0OiJJbmhlcml0In07cmV0dXJuIHNhcC51aS5jb3JlLlZlcnRpY2FsQWxpZ259LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1dyYXBwaW5nIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5XcmFwcGluZz17Tm9uZToiTm9uZSIsU29mdDoiU29mdCIsSGFyZDoiSGFyZCIsT2ZmOiJPZmYifTtyZXR1cm4gc2FwLnVpLmNvcmUuV3JhcHBpbmd9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9WaWV3VHlwZSIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlPXtKU09OOiJKU09OIixYTUw6IlhNTCIsSFRNTDoiSFRNTCIsSlM6IkpTIixUZW1wbGF0ZToiVGVtcGxhdGUifTtyZXR1cm4gc2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9yb3V0aW5nL0hpc3RvcnlEaXJlY3Rpb24iLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeURpcmVjdGlvbj17Rm9yd2FyZHM6IkZvcndhcmRzIixCYWNrd2FyZHM6IkJhY2t3YXJkcyIsTmV3RW50cnk6Ik5ld0VudHJ5IixVbmtub3duOiJVbmtub3duIn07cmV0dXJuIHNhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeURpcmVjdGlvbn0sdHJ1ZSk7KGZ1bmN0aW9uKCl7dmFyIGw9c2FwLnVpLmxhenlSZXF1aXJlO2Z1bmN0aW9uIGUocCxjLHMpe2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXtpZihzKXtsKHMsY1tpXS50b0xvd2VyQ2FzZSgpLHArY1tpXSl9ZWxzZXtsKHArY1tpXSwibmV3IGV4dGVuZCBnZXRNZXRhZGF0YSIpfX19bCgic2FwLnVpLmNvcmUuQnVzeUluZGljYXRvciIsInNob3cgaGlkZSBhdHRhY2hPcGVuIGRldGFjaE9wZW4gYXR0YWNoQ2xvc2UgZGV0YWNoQ2xvc2UiKTtsKCJzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlIiwicmVnaXN0ZXJUeXBlIHVucmVnaXN0ZXJUeXBlIik7bCgic2FwLnVpLmNvcmUuRnJhZ21lbnQiLCJyZWdpc3RlclR5cGUiKTtsKCJzYXAudWkiLCJ4bWxmcmFnbWVudCIsInNhcC51aS5jb3JlLkZyYWdtZW50Iik7bCgic2FwLnVpIiwianNmcmFnbWVudCIsInNhcC51aS5jb3JlLkZyYWdtZW50Iik7bCgic2FwLnVpIiwiaHRtbGZyYWdtZW50Iiwic2FwLnVpLmNvcmUuRnJhZ21lbnQiKTtlKCJzYXAudWkubW9kZWwuIixbIkZpbHRlciIsIlNvcnRlciIsImpzb24uSlNPTk1vZGVsIiwicmVzb3VyY2UuUmVzb3VyY2VNb2RlbCIsIm9kYXRhLk9EYXRhTW9kZWwiLCJ4bWwuWE1MTW9kZWwiXSk7ZSgic2FwLnVpLm1vZGVsLnR5cGUuIixbIkJvb2xlYW4iLCJJbnRlZ2VyIiwiRmxvYXQiLCJTdHJpbmciLCJEYXRlIiwiVGltZSIsIkRhdGVUaW1lIl0pO2UoInNhcC51aS5jb3JlLiIsWyJMb2NhbGUiLCJMb2NhbGVEYXRhIiwibXZjLkNvbnRyb2xsZXIiXSk7ZSgic2FwLnVpLmNvcmUubXZjLiIsWyJDb250cm9sbGVyIiwiVmlldyIsIkpTVmlldyIsIkpTT05WaWV3IiwiWE1MVmlldyIsIkhUTUxWaWV3IiwiVGVtcGxhdGVWaWV3Il0sInNhcC51aSIpO2UoInNhcC51aS5jb3JlLiIsWyJDb21wb25lbnQiXSwic2FwLnVpIik7ZSgic2FwLnVpLmNvcmUudG1wbC4iLFsiVGVtcGxhdGUiXSwic2FwLnVpIil9KCkpfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnBsdWdpbi5UZW1wbGF0aW5nU3VwcG9ydCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnBsdWdpbi5UZW1wbGF0aW5nU3VwcG9ydCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3BsdWdpbi9UZW1wbGF0aW5nU3VwcG9ydCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL0NvcmUnLCdzYXAvdWkvY29yZS90bXBsL1RlbXBsYXRlJ10sZnVuY3Rpb24ocSxDLFQpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1mdW5jdGlvbigpe307YS5wcm90b3R5cGUuc3RhcnRQbHVnaW49ZnVuY3Rpb24oYyxvKXtxLnNhcC5sb2cuaW5mbygiU3RhcnRpbmcgVGVtcGxhdGluZ1N1cHBvcnQgcGx1Z2luLiIpO3RoaXMub0NvcmU9YztzYXAudWkudGVtcGxhdGUoKX07YS5wcm90b3R5cGUuc3RvcFBsdWdpbj1mdW5jdGlvbigpe3Euc2FwLmxvZy5pbmZvKCJTdG9wcGluZyBUZW1wbGF0aW5nU3VwcG9ydCBwbHVnaW4uIik7dGhpcy5vQ29yZT1udWxsfTsoZnVuY3Rpb24oKXt2YXIgdD1uZXcgYSgpO3NhcC51aS5nZXRDb3JlKCkucmVnaXN0ZXJQbHVnaW4odCl9KCkpO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuc2VhcmNoLlNlYXJjaFByb3ZpZGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuc2VhcmNoLlNlYXJjaFByb3ZpZGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvc2VhcmNoL1NlYXJjaFByb3ZpZGVyIixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCdzYXAvdWkvY29yZS9FbGVtZW50J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuRWxlbWVudC5leHRlbmQoInNhcC51aS5jb3JlLnNlYXJjaC5TZWFyY2hQcm92aWRlciIse21ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsic3VnZ2VzdCJdLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsiaWNvbiI6e3R5cGU6InN0cmluZyIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTpudWxsfX19fSk7c2FwLnVpLmNvcmUuc2VhcmNoLlNlYXJjaFByb3ZpZGVyLnByb3RvdHlwZS5zdWdnZXN0PWZ1bmN0aW9uKHYsYyl7alF1ZXJ5LnNhcC5sb2cud2FybmluZygic2FwLnVpLmNvcmUuc2VhcmNoLlNlYXJjaFByb3ZpZGVyIGlzIHRoZSBhYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBhbGwgU2VhcmNoUHJvdmlkZXJzLiBEbyBub3QgY3JlYXRlIGluc3RhbmNlcyBvZiB0aGlzIGNsYXNzLCBidXQgdXNlIGEgY29uY3JldGUgc3ViIGNsYXNzIGluc3RlYWQuIil9O3JldHVybiBzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS90aGVtaW5nL1BhcmFtZXRlcnMiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9Db3JlJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIFA9e307dmFyIHA9bnVsbDt2YXIgdD1udWxsO2Z1bmN0aW9uIHIoKXtwPW51bGx9ZnVuY3Rpb24gbCh1KXt2YXIgUixvO3U9dS5yZXBsYWNlKC9cL2xpYnJhcnkoW15cLy5dKilcLig/OmNzc3xsZXNzKSgkfFs/I10pLyxmdW5jdGlvbigkLGEsYil7cmV0dXJuIi9saWJyYXJ5LXBhcmFtZXRlcnMuanNvbiIrKGI/YjoiIil9KTtSPXEuc2FwLnNqYXgoe3VybDp1LGRhdGFUeXBlOidqc29uJ30pO2lmKFIuc3VjY2Vzcyl7bz0odHlwZW9mIFIuZGF0YT09InN0cmluZyIpP3EucGFyc2VKU09OKFIuZGF0YSk6Ui5kYXRhO2lmKHEuaXNBcnJheShvKSl7Zm9yKHZhciBqPTA7ajxvLmxlbmd0aDtqKyspe3A9cS5leHRlbmQocCxvW2pdKX19ZWxzZXtwPXEuZXh0ZW5kKHAsbyl9fWVsc2V7cS5zYXAubG9nLndhcm5pbmcoIkNvdWxkIG5vdCBsb2FkIHRoZW1lIHBhcmFtZXRlcnMgZnJvbTogIit1KX19ZnVuY3Rpb24gZygpe2lmKCFwKXtwPXt9O3Q9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0VGhlbWUoKTtxKCJsaW5rW2lkXj1zYXAtdWktdGhlbWUtXSIpLmVhY2goZnVuY3Rpb24oKXtsKHRoaXMuaHJlZil9KX1yZXR1cm4gcH1QLl9hZGRMaWJyYXJ5VGhlbWU9ZnVuY3Rpb24odSl7aWYocCl7bCh1KX19O1AuZ2V0PWZ1bmN0aW9uKG4pe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe3JldHVybiBnKClbbl19ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT0wKXt2YXIgYz17fTtyZXR1cm4gcS5leHRlbmQoYyxnKCkpfWVsc2V7cmV0dXJuIHVuZGVmaW5lZH19O1AucmVzZXQ9ZnVuY3Rpb24oKXt2YXIgbz1hcmd1bWVudHNbMF09PT10cnVlO2lmKCFvfHxzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRUaGVtZSgpIT09dCl7cigpfX07UC5fZ2V0VGhlbWVJbWFnZT1mdW5jdGlvbihzLGYpe3M9c3x8InNhcFVpR2xvYmFsTG9nbyI7dmFyIGE9c2FwLnVpLmNvcmUudGhlbWluZy5QYXJhbWV0ZXJzLmdldChzKTtpZihhKXt2YXIgbT0vdXJsW1xzXSpcKCc/Ij8oW15cJyIpXSopJz8iP1wpLy5leGVjKGEpO2lmKG0pe2E9bVsxXX1lbHNlIGlmKGE9PT0iJycifHxhPT09Im5vbmUiKXthPW51bGx9fWlmKCEhZiYmIWEpe3JldHVybiBzYXAudWkucmVzb3VyY2UoJ3NhcC51aS5jb3JlJywndGhlbWVzL2Jhc2UvaW1nLzF4MS5naWYnKX1yZXR1cm4gYX07cmV0dXJuIFB9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS50bXBsLkRPTUF0dHJpYnV0ZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnRtcGwuRE9NQXR0cmlidXRlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdG1wbC9ET01BdHRyaWJ1dGUiLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJ3NhcC91aS9jb3JlL0VsZW1lbnQnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5FbGVtZW50LmV4dGVuZCgic2FwLnVpLmNvcmUudG1wbC5ET01BdHRyaWJ1dGUiLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJuYW1lIjp7dHlwZToic3RyaW5nIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9LCJ2YWx1ZSI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfX19fSk7c2FwLnVpLmNvcmUudG1wbC5ET01BdHRyaWJ1dGUucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHYpe3RoaXMuc2V0UHJvcGVydHkoInZhbHVlIix2LHRydWUpO3ZhciBwPXRoaXMuZ2V0UGFyZW50KCksJD1wJiZwLiQoKTtpZigkJiYkLmxlbmd0aD4wKXskLmF0dHIodGhpcy5nZXROYW1lKCksdGhpcy5nZXRQcm9wZXJ0eSgidmFsdWUiKSl9cmV0dXJuIHRoaXN9O3JldHVybiBzYXAudWkuY29yZS50bXBsLkRPTUF0dHJpYnV0ZX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q2VsbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q2VsbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvRXhwb3J0Q2VsbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL0VsZW1lbnQnXSxmdW5jdGlvbihxLEUpeyd1c2Ugc3RyaWN0Jzt2YXIgYT1FLmV4dGVuZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRDZWxsJyx7bWV0YWRhdGE6e3Byb3BlcnRpZXM6e2NvbnRlbnQ6J3N0cmluZyd9fX0pO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRDb2x1bW4nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydENvbHVtbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvRXhwb3J0Q29sdW1uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJy4vRXhwb3J0Q2VsbCddLGZ1bmN0aW9uKHEsTSxFKXsndXNlIHN0cmljdCc7dmFyIGE9TS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q29sdW1uIix7bWV0YWRhdGE6e3Byb3BlcnRpZXM6e25hbWU6InN0cmluZyJ9LGFnZ3JlZ2F0aW9uczp7dGVtcGxhdGU6e3R5cGU6InNhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q2VsbCIsbXVsdGlwbGU6ZmFsc2V9fX19KTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Um93Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRSb3cnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL0V4cG9ydFJvdyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnLCcuL0V4cG9ydENlbGwnXSxmdW5jdGlvbihxLE0sRSl7J3VzZSBzdHJpY3QnO3ZhciBhPU0uZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLkV4cG9ydFJvdyIse21ldGFkYXRhOnthZ2dyZWdhdGlvbnM6e2NlbGxzOnt0eXBlOiJzYXAudWkuY29yZS51dGlsLkV4cG9ydENlbGwiLG11bHRpcGxlOnRydWV9fX19KTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkN1c3RvbURhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5DdXN0b21EYXRhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ3VzdG9tRGF0YSIsWycuL2xpYnJhcnknLCcuL0VsZW1lbnQnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5FbGVtZW50LmV4dGVuZCgic2FwLnVpLmNvcmUuQ3VzdG9tRGF0YSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7ImtleSI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfSwidmFsdWUiOnt0eXBlOiJhbnkiLGdyb3VwOiJEYXRhIixkZWZhdWx0VmFsdWU6bnVsbH0sIndyaXRlVG9Eb20iOnt0eXBlOiJib29sZWFuIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOmZhbHNlfX19fSk7c2FwLnVpLmNvcmUuQ3VzdG9tRGF0YS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odil7dGhpcy5zZXRQcm9wZXJ0eSgidmFsdWUiLHYsdHJ1ZSk7dmFyIGM9dGhpcy5nZXRQYXJlbnQoKTtpZihjJiZjLmdldERvbVJlZigpJiZ0aGlzLmdldFdyaXRlVG9Eb20oKSl7dmFyIGs9dGhpcy5nZXRLZXkoKTtpZih0eXBlb2Ygdj09PSJzdHJpbmciKXtpZigoc2FwLnVpLmNvcmUuSUQuaXNWYWxpZChrKSkmJihrLmluZGV4T2YoIjoiKT09LTEpJiYoay5pbmRleE9mKCJzYXAtdWkiKSE9PTApKXtjLiQoKS5hdHRyKCJkYXRhLSIrayx2KX1lbHNle2pRdWVyeS5zYXAubG9nLmVycm9yKCJDdXN0b21EYXRhIHdpdGgga2V5ICIraysiIHNob3VsZCBiZSB3cml0dGVuIHRvIEhUTUwgb2YgIitjKyIgYnV0IHRoZSBrZXkgaXMgbm90IHZhbGlkIChtdXN0IGJlIGEgdmFsaWQgc2FwLnVpLmNvcmUuSUQgd2l0aG91dCBhbnkgY29sb24gYW5kIG1heSBub3Qgc3RhcnQgd2l0aCAnc2FwLXVpJykuIil9fWVsc2V7alF1ZXJ5LnNhcC5sb2cuZXJyb3IoIkN1c3RvbURhdGEgd2l0aCBrZXkgIitrKyIgc2hvdWxkIGJlIHdyaXR0ZW4gdG8gSFRNTCBvZiAiK2MrIiBidXQgdGhlIHZhbHVlIGlzIG5vdCBhIHN0cmluZy4iKX19cmV0dXJuIHRoaXN9O3JldHVybiBzYXAudWkuY29yZS5DdXN0b21EYXRhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuRW5hYmxlZFByb3BhZ2F0b3InKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5FbmFibGVkUHJvcGFnYXRvcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0VuYWJsZWRQcm9wYWdhdG9yIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Db250cm9sJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIEU9ZnVuY3Rpb24oZCxsKXtpZighKHRoaXMgaW5zdGFuY2VvZiBDKSl7dGhyb3cgbmV3IEVycm9yKCJFbmFibGVkUHJvcGFnYXRvciBvbmx5IHN1cHBvcnRzIHN1YmNsYXNzZXMgb2YgQ29udHJvbCIpfWlmKGQ9PT11bmRlZmluZWQpe2Q9dHJ1ZX1mdW5jdGlvbiBmKGMpe3ZhciBwPWMuZ2V0UGFyZW50KCk7d2hpbGUocCYmIXAuZ2V0RW5hYmxlZCYmcC5nZXRQYXJlbnQpe3A9cC5nZXRQYXJlbnQoKX1yZXR1cm4gcH1pZih0aGlzLmdldEVuYWJsZWQ9PT11bmRlZmluZWQpe3RoaXMuZ2V0RW5hYmxlZD1mdW5jdGlvbigpe3ZhciBwPWYodGhpcyk7cmV0dXJuKHAmJnAuZ2V0RW5hYmxlZCYmIXAuZ2V0RW5hYmxlZCgpKT9mYWxzZTp0aGlzLmdldFByb3BlcnR5KCJlbmFibGVkIil9O2lmKGwpe3RoaXMuZ2V0TWV0YWRhdGEoKS5hZGRQcm9wZXJ0eSgiRW5hYmxlZCIse3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOiEhZH0pfXRoaXMuZ2V0TWV0YWRhdGEoKS5hZGRQcm9wZXJ0eSgiZW5hYmxlZCIse3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOiEhZH0pO3RoaXMuZ2V0TWV0YWRhdGEoKS5hZGRQdWJsaWNNZXRob2RzKCdnZXRFbmFibGVkJyl9ZWxzZXt2YXIgbz10aGlzLmdldEVuYWJsZWQ7dGhpcy5nZXRFbmFibGVkPWZ1bmN0aW9uKCl7dmFyIHA9Zih0aGlzKTtyZXR1cm4ocCYmcC5nZXRFbmFibGVkJiYhcC5nZXRFbmFibGVkKCkpP2ZhbHNlOm8uYXBwbHkodGhpcyl9fWlmKHRoaXMuc2V0RW5hYmxlZD09PXVuZGVmaW5lZCl7dGhpcy5zZXRFbmFibGVkPWZ1bmN0aW9uKGUpe3RoaXMuc2V0UHJvcGVydHkoImVuYWJsZWQiLGUpfTt0aGlzLmdldE1ldGFkYXRhKCkuYWRkUHVibGljTWV0aG9kcygnc2V0RW5hYmxlZCcpfX07cmV0dXJuIEV9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5IVE1MJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuSFRNTCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0hUTUwiLFsnLi9saWJyYXJ5JywnLi9Db250cm9sJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLkhUTUwiLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJjb250ZW50Ijp7dHlwZToic3RyaW5nIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOm51bGx9LCJwcmVmZXJET00iOnt0eXBlOiJib29sZWFuIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOnRydWV9LCJzYW5pdGl6ZUNvbnRlbnQiOnt0eXBlOiJib29sZWFuIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOmZhbHNlfX0sZXZlbnRzOnsiYWZ0ZXJSZW5kZXJpbmciOnt9fX19KTtzYXAudWkuY29yZS5IVE1MLk1fRVZFTlRTPXsnYWZ0ZXJSZW5kZXJpbmcnOidhZnRlclJlbmRlcmluZyd9O3NhcC51aS5jb3JlLkhUTUwucHJvdG90eXBlLmdldERvbVJlZj1mdW5jdGlvbihzKXt2YXIgaT1zP3RoaXMuZ2V0SWQoKSsiLSIrczp0aGlzLmdldElkKCk7cmV0dXJuIGpRdWVyeS5zYXAuZG9tQnlJZCgic2FwLXVpLWR1bW15LSIraSl8fGpRdWVyeS5zYXAuZG9tQnlJZChpKX07c2FwLnVpLmNvcmUuSFRNTC5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbihjKXtmdW5jdGlvbiBwKHMpe2lmKGpRdWVyeS5wYXJzZUhUTUwpe3ZhciBhPWpRdWVyeS5wYXJzZUhUTUwocyk7aWYoYSl7dmFyIGI9MCxlPWEubGVuZ3RoO3doaWxlKGI8ZSYmYVtiXS5ub2RlVHlwZSE9MSl7YisrfXdoaWxlKGI8ZSYmYVtlLTFdLm5vZGVUeXBlIT0xKXtlLS19aWYoYj4wfHxlPGEubGVuZ3RoKXthPWEuc2xpY2UoYixlKX1yZXR1cm4galF1ZXJ5KGEpfX1yZXR1cm4galF1ZXJ5KHMpfWlmKHRoaXMuZ2V0U2FuaXRpemVDb250ZW50KCkpe2M9alF1ZXJ5LnNhcC5fc2FuaXRpemVIVE1MKGMpfXRoaXMuc2V0UHJvcGVydHkoImNvbnRlbnQiLGMsdHJ1ZSk7aWYodGhpcy5nZXREb21SZWYoKSl7dmFyICQ9cCh0aGlzLmdldENvbnRlbnQoKSk7alF1ZXJ5KHRoaXMuZ2V0RG9tUmVmKCkpLnJlcGxhY2VXaXRoKCQpO3RoaXMuX3Bvc3Rwcm9jZXNzTmV3Q29udGVudCgkKX1lbHNle3RoaXMuaW52YWxpZGF0ZSgpfXJldHVybiB0aGlzfTtzYXAudWkuY29yZS5IVE1MLnByb3RvdHlwZS5vbkJlZm9yZVJlbmRlcmluZz1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0UHJlZmVyRE9NKCkmJnRoaXMuZ2V0RG9tUmVmKCkmJiFzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLmlzUHJlc2VydmVkQ29udGVudCh0aGlzLmdldERvbVJlZigpKSl7c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5wcmVzZXJ2ZUNvbnRlbnQodGhpcy5nZXREb21SZWYoKSx0cnVlLGZhbHNlKX19O3NhcC51aS5jb3JlLkhUTUwucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgJD1qUXVlcnkoalF1ZXJ5LnNhcC5kb21CeUlkKCJzYXAtdWktZHVtbXktIit0aGlzLmdldElkKCkpKTt2YXIgYT1zYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLmZpbmRQcmVzZXJ2ZWRDb250ZW50KHRoaXMuZ2V0SWQoKSk7dmFyIGI9dW5kZWZpbmVkO3ZhciBpPWZhbHNlO2lmKCghdGhpcy5nZXRQcmVmZXJET00oKXx8YS5zaXplKCk9PTApKXthLnJlbW92ZSgpO2I9bmV3IGpRdWVyeSh0aGlzLmdldENvbnRlbnQoKSk7JC5yZXBsYWNlV2l0aChiKX1lbHNlIGlmKGEuc2l6ZSgpPjApeyQucmVwbGFjZVdpdGgoYSk7Yj1hO2k9dHJ1ZX1lbHNleyQucmVtb3ZlKCl9dGhpcy5fcG9zdHByb2Nlc3NOZXdDb250ZW50KGIpO3RoaXMuZmlyZUFmdGVyUmVuZGVyaW5nKHtpc1ByZXNlcnZlZERPTTppfSl9O3NhcC51aS5jb3JlLkhUTUwucHJvdG90eXBlLl9wb3N0cHJvY2Vzc05ld0NvbnRlbnQ9ZnVuY3Rpb24oJCl7aWYoJCYmJC5zaXplKCk+MCl7aWYoJC5sZW5ndGg+MSl7alF1ZXJ5LnNhcC5sb2cud2FybmluZygiW1Vuc3VwcG9ydGVkIEZlYXR1cmVdOiAiK3RoaXMrIiBoYXMgcmVuZGVyZWQgIiskLmxlbmd0aCsiIHJvb3Qgbm9kZXMhIil9ZWxzZXt2YXIgYz0kLmF0dHIoImlkIik7aWYoYyYmYyE9dGhpcy5nZXRJZCgpKXtqUXVlcnkuc2FwLmxvZy53YXJuaW5nKCJbVW5zdXBwb3J0ZWQgRmVhdHVyZV06IElkIG9mIEhUTUwgQ29udHJvbCAnIit0aGlzLmdldElkKCkrIicgZG9lcyBub3QgbWF0Y2ggd2l0aCBjb250ZW50IGlkICciK2MrIichIil9fXNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIubWFya1ByZXNlcnZhYmxlQ29udGVudCgkLHRoaXMuZ2V0SWQoKSk7aWYoJC5maW5kKCIjIit0aGlzLmdldElkKCkucmVwbGFjZSgvKDp8XC4pL2csJ1xcJDEnKSkubGVuZ3RoPT09MCl7JC5maWx0ZXIoIjpub3QoW2lkXSkiKS5maXJzdCgpLmF0dHIoImlkIix0aGlzLmdldElkKCkpfX1lbHNle2pRdWVyeS5zYXAubG9nLmRlYnVnKCIiK3RoaXMrIiBpcyBlbXB0eSBhZnRlciByZW5kZXJpbmcsIHNldHRpbmcgYk91dHB1dCB0byBmYWxzZSIpO3RoaXMuYk91dHB1dD1mYWxzZX19O3NhcC51aS5jb3JlLkhUTUwucHJvdG90eXBlLnNldERPTUNvbnRlbnQ9ZnVuY3Rpb24oZCl7dmFyICQ9alF1ZXJ5KGQpO2lmKHRoaXMuZ2V0RG9tUmVmKCkpe2pRdWVyeSh0aGlzLmdldERvbVJlZigpKS5yZXBsYWNlV2l0aCgkKTt0aGlzLl9wb3N0cHJvY2Vzc05ld0NvbnRlbnQoJCl9ZWxzZXskLmFwcGVuZFRvKHNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIuZ2V0UHJlc2VydmVBcmVhUmVmKCkpO2lmKHRoaXMuZ2V0VUlBcmVhKCkpe3RoaXMuZ2V0VUlBcmVhKCkuaW52YWxpZGF0ZSgpfXRoaXMuX3Bvc3Rwcm9jZXNzTmV3Q29udGVudCgkKX1yZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuSFRNTC5wcm90b3R5cGUuc2V0VG9vbHRpcD1mdW5jdGlvbih0KXtqUXVlcnkuc2FwLmxvZy53YXJuaW5nKCJUaGUgc2FwLnVpLmNvcmUuSFRNTCBjb250cm9sIGRvZXNuJ3Qgc3VwcG9ydCB0b29sdGlwcy4gQWRkIHRoZSB0b29sdGlwIHRvIHRoZSBIVE1MIGNvbnRlbnQgaW5zdGVhZC4iKTtyZXR1cm4gc2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUuc2V0VG9vbHRpcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBzYXAudWkuY29yZS5IVE1MfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuSWNvbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkljb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9JY29uIixbJy4vbGlicmFyeScsJy4vQ29udHJvbCcsJy4vSWNvblBvb2wnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUuSWNvbiIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InNyYyI6e3R5cGU6InNhcC51aS5jb3JlLlVSSSIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfSwic2l6ZSI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTpudWxsfSwiY29sb3IiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NDb2xvciIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwiaG92ZXJDb2xvciI6e3R5cGU6InNhcC51aS5jb3JlLkNTU0NvbG9yIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJhY3RpdmVDb2xvciI6e3R5cGU6InNhcC51aS5jb3JlLkNTU0NvbG9yIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJ3aWR0aCI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTpudWxsfSwiaGVpZ2h0Ijp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJiYWNrZ3JvdW5kQ29sb3IiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NDb2xvciIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwiaG92ZXJCYWNrZ3JvdW5kQ29sb3IiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NDb2xvciIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwiYWN0aXZlQmFja2dyb3VuZENvbG9yIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTQ29sb3IiLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sInZpc2libGUiOnt0eXBlOiJib29sZWFuIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOnRydWV9LCJkZWNvcmF0aXZlIjp7dHlwZToiYm9vbGVhbiIsZ3JvdXA6IkFjY2Vzc2liaWxpdHkiLGRlZmF1bHRWYWx1ZTp0cnVlfX0sZXZlbnRzOnsicHJlc3MiOnt9fX19KTtzYXAudWkuY29yZS5JY29uLk1fRVZFTlRTPXsncHJlc3MnOidwcmVzcyd9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgaT10aGlzLiQoKTtpZih0aGlzLmhhc0xpc3RlbmVycygicHJlc3MiKSl7aS5jc3MoImN1cnNvciIsInBvaW50ZXIiKX1pZihpLmNzcygiY3Vyc29yIik9PT0iYXV0byIpe2kuY3NzKCJjdXJzb3IiLCJkZWZhdWx0Iil9fTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNlZG93bj1mdW5jdGlvbihlKXt0aGlzLl9iUHJlc3NGaXJlZD1mYWxzZTtpZih0aGlzLmhhc0xpc3RlbmVycygicHJlc3MiKXx8dGhpcy5oYXNMaXN0ZW5lcnMoInRhcCIpKXtlLnNldE1hcmtlZCgpfXZhciBhPXRoaXMuZ2V0QWN0aXZlQ29sb3IoKSxBPXRoaXMuZ2V0QWN0aXZlQmFja2dyb3VuZENvbG9yKCksaTtpZihhfHxBKXtpZighZS50YXJnZXRUb3VjaGVzfHwoZS50YXJnZXRUb3VjaGVzJiZlLnRhcmdldFRvdWNoZXMubGVuZ3RoPT09MSkpe2k9dGhpcy4kKCk7aS5hZGRDbGFzcygic2FwVWlJY29uQWN0aXZlIik7aWYoYSl7aS5jc3MoImNvbG9yIixhKX1pZihBKXtpLmNzcygiYmFja2dyb3VuZC1jb2xvciIsQSl9fX19O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9udG91Y2hzdGFydD1zYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNlZG93bjtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNldXA9ZnVuY3Rpb24oZSl7aWYoIWUudGFyZ2V0VG91Y2hlc3x8KGUudGFyZ2V0VG91Y2hlcyYmZS50YXJnZXRUb3VjaGVzLmxlbmd0aD09PTApKXt0aGlzLiQoKS5yZW1vdmVDbGFzcygic2FwVWlJY29uQWN0aXZlIik7dGhpcy5fcmVzdG9yZUNvbG9ycygpfX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub250b3VjaGVuZD1zYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNldXA7c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub250b3VjaGNhbmNlbD1zYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNldXA7c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub25tb3VzZW92ZXI9ZnVuY3Rpb24oKXt2YXIgaD10aGlzLmdldEhvdmVyQ29sb3IoKSxIPXRoaXMuZ2V0SG92ZXJCYWNrZ3JvdW5kQ29sb3IoKSxpPXRoaXMuJCgpO2lmKGgpe2kuY3NzKCJjb2xvciIsaCl9aWYoSCl7aS5jc3MoImJhY2tncm91bmQtY29sb3IiLEgpfX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub25tb3VzZW91dD1mdW5jdGlvbigpe3RoaXMuX3Jlc3RvcmVDb2xvcnMoKX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub25jbGljaz1mdW5jdGlvbigpe2lmKHRoaXMuX2JQcmVzc0ZpcmVkKXtyZXR1cm59dGhpcy5maXJlUHJlc3Moe30pO3RoaXMuX2JQcmVzc0ZpcmVkPXRydWV9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9udGFwPXNhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9uY2xpY2s7c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub25rZXlkb3duPWZ1bmN0aW9uKGUpe2lmKGUud2hpY2g9PT1qUXVlcnkuc2FwLktleUNvZGVzLlNQQUNFfHxlLndoaWNoPT09alF1ZXJ5LnNhcC5LZXlDb2Rlcy5FTlRFUil7ZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBpPXRoaXMuJCgpLGE9dGhpcy5nZXRBY3RpdmVDb2xvcigpLEE9dGhpcy5nZXRBY3RpdmVCYWNrZ3JvdW5kQ29sb3IoKTtpLmFkZENsYXNzKCJzYXBVaUljb25BY3RpdmUiKTtpZihhKXtpLmNzcygiY29sb3IiLGEpfWlmKEEpe2kuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIixBKX19fTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbmtleXVwPWZ1bmN0aW9uKGUpe2lmKGUud2hpY2g9PT1qUXVlcnkuc2FwLktleUNvZGVzLlNQQUNFfHxlLndoaWNoPT09alF1ZXJ5LnNhcC5LZXlDb2Rlcy5FTlRFUil7dGhpcy4kKCkucmVtb3ZlQ2xhc3MoInNhcFVpSWNvbkFjdGl2ZSIpO3RoaXMuX3Jlc3RvcmVDb2xvcnMoKTt0aGlzLmZpcmVQcmVzcyh7fSl9fTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5fcmVzdG9yZUNvbG9ycz1mdW5jdGlvbigpe3RoaXMuJCgpLmNzcyh7ImNvbG9yIjp0aGlzLmdldENvbG9yKCl8fCIiLCJiYWNrZ3JvdW5kLWNvbG9yIjp0aGlzLmdldEJhY2tncm91bmRDb2xvcigpfHwiIn0pfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5zZXRTcmM9ZnVuY3Rpb24ocyl7dmFyIGk9c2FwLnVpLmNvcmUuSWNvblBvb2wuZ2V0SWNvbkluZm8ocyksdD1zYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJnNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPDksST10aGlzLiQoKTtpZihpKXtJLmNzcygiZm9udC1mYW1pbHkiLGkuZm9udEZhbWlseSk7aWYodCl7SS50ZXh0KGkuY29udGVudCl9ZWxzZXtJLmF0dHIoImRhdGEtc2FwLXVpLWljb24tY29udGVudCIsaS5jb250ZW50KX1JLnRvZ2dsZUNsYXNzKCJzYXBVaUljb25NaXJyb3JJblJUTCIsIWkuc3VwcHJlc3NNaXJyb3JpbmcpfXRoaXMuc2V0UHJvcGVydHkoInNyYyIscywhIWkpO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5zZXRXaWR0aD1mdW5jdGlvbih3KXt0aGlzLnNldFByb3BlcnR5KCJ3aWR0aCIsdyx0cnVlKTt0aGlzLiQoKS5jc3MoIndpZHRoIix3KTtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0SGVpZ2h0PWZ1bmN0aW9uKGgpe3RoaXMuc2V0UHJvcGVydHkoImhlaWdodCIsaCx0cnVlKTt0aGlzLiQoKS5jc3MoeyJoZWlnaHQiOmgsImxpbmUtaGVpZ2h0IjpofSk7cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldFNpemU9ZnVuY3Rpb24ocyl7dGhpcy5zZXRQcm9wZXJ0eSgic2l6ZSIscyx0cnVlKTt0aGlzLiQoKS5jc3MoImZvbnQtc2l6ZSIscyk7cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldENvbG9yPWZ1bmN0aW9uKGMpe3RoaXMuc2V0UHJvcGVydHkoImNvbG9yIixjLHRydWUpO3RoaXMuJCgpLmNzcygiY29sb3IiLGMpO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5zZXRBY3RpdmVDb2xvcj1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5zZXRQcm9wZXJ0eSgiYWN0aXZlQ29sb3IiLGMsdHJ1ZSl9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldEhvdmVyQ29sb3I9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuc2V0UHJvcGVydHkoImhvdmVyQ29sb3IiLGMsdHJ1ZSl9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldEJhY2tncm91bmRDb2xvcj1mdW5jdGlvbihjKXt0aGlzLnNldFByb3BlcnR5KCJiYWNrZ3JvdW5kQ29sb3IiLGMsdHJ1ZSk7dGhpcy4kKCkuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIixjKTtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0QWN0aXZlQmFja2dyb3VuZENvbG9yPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLnNldFByb3BlcnR5KCJhY3RpdmVCYWNrZ3JvdW5kQ29sb3IiLGMsdHJ1ZSl9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldEhvdmVyQmFja2dyb3VuZENvbG9yPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLnNldFByb3BlcnR5KCJob3ZlckJhY2tncm91bmRDb2xvciIsYyx0cnVlKX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuYXR0YWNoUHJlc3M9ZnVuY3Rpb24oKXt2YXIgbT1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTttLnNwbGljZSgwLDAsInByZXNzIik7dGhpcy4kKCkuY3NzKCJjdXJzb3IiLCJwb2ludGVyIik7cmV0dXJuIHNhcC51aS5jb3JlLkNvbnRyb2wucHJvdG90eXBlLmF0dGFjaEV2ZW50LmFwcGx5KHRoaXMsbSl9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLmRldGFjaFByZXNzPWZ1bmN0aW9uKCl7dmFyIG09QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7bS5zcGxpY2UoMCwwLCJwcmVzcyIpO3NhcC51aS5jb3JlLkNvbnRyb2wucHJvdG90eXBlLmRldGFjaEV2ZW50LmFwcGx5KHRoaXMsbSk7aWYoIXRoaXMuaGFzTGlzdGVuZXJzKCJwcmVzcyIpKXt0aGlzLiQoKS5jc3MoImN1cnNvciIsImRlZmF1bHQiKX1yZXR1cm4gdGhpc307cmV0dXJuIHNhcC51aS5jb3JlLkljb259LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5JdGVtJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuSXRlbScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0l0ZW0iLFsnLi9saWJyYXJ5JywnLi9FbGVtZW50J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuRWxlbWVudC5leHRlbmQoInNhcC51aS5jb3JlLkl0ZW0iLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJ0ZXh0Ijp7dHlwZToic3RyaW5nIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOiIifSwiZW5hYmxlZCI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6dHJ1ZX0sInRleHREaXJlY3Rpb24iOnt0eXBlOiJzYXAudWkuY29yZS5UZXh0RGlyZWN0aW9uIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOnNhcC51aS5jb3JlLlRleHREaXJlY3Rpb24uSW5oZXJpdH0sImtleSI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfX19fSk7cmV0dXJuIHNhcC51aS5jb3JlLkl0ZW19LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5MYXlvdXREYXRhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTGF5b3V0RGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0xheW91dERhdGEiLFsnLi9saWJyYXJ5JywnLi9FbGVtZW50J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuRWxlbWVudC5leHRlbmQoInNhcC51aS5jb3JlLkxheW91dERhdGEiLHttZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLGxpYnJhcnk6InNhcC51aS5jb3JlIn19KTtzYXAudWkuY29yZS5MYXlvdXREYXRhLnByb3RvdHlwZS5pbnZhbGlkYXRlPWZ1bmN0aW9uKCl7dmFyIHA9dGhpcy5nZXRQYXJlbnQoKTtpZihwJiZwLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpPT0ic2FwLnVpLmNvcmUuVmFyaWFudExheW91dERhdGEiKXtwPXAuZ2V0UGFyZW50KCl9aWYocCl7dmFyIGw9cC5nZXRQYXJlbnQoKTtpZihsKXt2YXIgZT1qUXVlcnkuRXZlbnQoIkxheW91dERhdGFDaGFuZ2UiKTtlLnNyY0NvbnRyb2w9cDtsLl9oYW5kbGVFdmVudChlKX19fTtzYXAudWkuY29yZS5MYXlvdXREYXRhLnByb3RvdHlwZS5zZXRMYXlvdXREYXRhPWZ1bmN0aW9uKGwpe3JldHVybiB0aGlzfTtyZXR1cm4gc2FwLnVpLmNvcmUuTGF5b3V0RGF0YX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkxpc3RJdGVtJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTGlzdEl0ZW0nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9MaXN0SXRlbSIsWycuL2xpYnJhcnknLCcuL0l0ZW0nXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5JdGVtLmV4dGVuZCgic2FwLnVpLmNvcmUuTGlzdEl0ZW0iLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJpY29uIjp7dHlwZToic3RyaW5nIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJhZGRpdGlvbmFsVGV4dCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfX19fSk7cmV0dXJuIHNhcC51aS5jb3JlLkxpc3RJdGVtfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvTG9jYWxCdXN5SW5kaWNhdG9yIixbJy4vbGlicmFyeScsJy4vQ29udHJvbCcsJy4vdGhlbWluZy9QYXJhbWV0ZXJzJywnLi9Mb2NhbEJ1c3lJbmRpY2F0b3JSZW5kZXJlciddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkNvbnRyb2wuZXh0ZW5kKCJzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3IiLHttZXRhZGF0YTp7ZGVwcmVjYXRlZDp0cnVlLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsid2lkdGgiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOicxMDBweCd9LCJoZWlnaHQiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOicxMDBweCd9fX19KTsoZnVuY3Rpb24oKXtzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3IucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgcj0ic2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yOiI7dmFyIHA9InNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQm94U2l6ZSI7cD1zYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMuZ2V0KHIrcCk7dGhpcy5faUJveFNpemU9ODtwPSJzYXBVaUxvY2FsQnVzeUluZGljYXRvckJveENvbG9yIjt0aGlzLl9zQm94Q29sb3I9c2FwLnVpLmNvcmUudGhlbWluZy5QYXJhbWV0ZXJzLmdldChyK3ApO3A9InNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQm94Q29sb3JBY3RpdmUiO3RoaXMuX3NCb3hDb2xvckFjdGl2ZT1zYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMuZ2V0KHIrcCk7dGhpcy5fYW5pbWF0ZVByb3h5PWpRdWVyeS5wcm94eShhLHRoaXMpfTtzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3IucHJvdG90eXBlLmV4aXQ9ZnVuY3Rpb24oKXtqUXVlcnkuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fZGVsYXllZENhbGxJZCk7ZGVsZXRlIHRoaXMuX2RlbGF5ZWRDYWxsSWR9O3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvci5wcm90b3R5cGUub25UaGVtZUNoYW5nZWQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5nZXREb21SZWYoKSl7dGhpcy5pbnZhbGlkYXRlKCl9fTtzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3IucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgdz1wYXJzZUludCh0aGlzLmdldFdpZHRoKCksMTApO3ZhciBoPXBhcnNlSW50KHRoaXMuZ2V0SGVpZ2h0KCksMTApO3ZhciAkPXRoaXMuJCgpOyQuY3NzKCJ3aWR0aCIsdysicHgiKTskLmNzcygiaGVpZ2h0IixoKyJweCIpO3ZhciBiPXRoaXMuJCgiYW5pbWF0aW9uIik7dmFyIGw9TWF0aC5mbG9vcih3LzIpO2wtPU1hdGguZmxvb3IoKDUqdGhpcy5faUJveFNpemUpLzIpO3ZhciB0PU1hdGguZmxvb3IoaC8yKS1NYXRoLmZsb29yKHRoaXMuX2lCb3hTaXplLzIpO2IuY3NzKCJsZWZ0IixsKyJweCIpO2IuY3NzKCJ0b3AiLHQrInB4Iik7aWYoIXRoaXMuXyRsZWZ0KXt0aGlzLl8kbGVmdD10aGlzLiQoImxlZnRCb3giKX1pZighdGhpcy5fJG1pZGRsZSl7dGhpcy5fJG1pZGRsZT10aGlzLiQoIm1pZGRsZUJveCIpfWlmKCF0aGlzLl8kcmlnaHQpe3RoaXMuXyRyaWdodD10aGlzLiQoInJpZ2h0Qm94Iil9dGhpcy5fZGVsYXllZENhbGxJZD1qUXVlcnkuc2FwLmRlbGF5ZWRDYWxsKDAsdGhpcyx0aGlzLl9hbmltYXRlUHJveHkpfTt2YXIgYT1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0RG9tUmVmKCkpe3ZhciB0PXRoaXM7dmFyICQsYixjO3ZhciBkPSIiLGU9IiI7aWYodC5fJGxlZnQpeyQ9dC5fJGxlZnR9ZWxzZXtyZXR1cm59aWYodC5fJG1pZGRsZSl7Yj10Ll8kbWlkZGxlfWVsc2V7cmV0dXJufWlmKHQuXyRyaWdodCl7Yz10Ll8kcmlnaHR9ZWxzZXtyZXR1cm59aWYodC5fc0JveENvbG9yKXtkPXQuX3NCb3hDb2xvcn1lbHNle3JldHVybn1pZih0Ll9zQm94Q29sb3JBY3RpdmUpe2U9dC5fc0JveENvbG9yQWN0aXZlfWVsc2V7cmV0dXJufSQuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIixlKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JC5jc3MoImJhY2tncm91bmQtY29sb3IiLGQpO2IuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIixlKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5jc3MoImJhY2tncm91bmQtY29sb3IiLGQpO2MuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIixlKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5jc3MoImJhY2tncm91bmQtY29sb3IiLGQpfSwxNTApfSwxNTApfSwxNTApO3RoaXMuX2RlbGF5ZWRDYWxsSWQ9alF1ZXJ5LnNhcC5kZWxheWVkQ2FsbCgxMjAwLHRoaXMsdGhpcy5fYW5pbWF0ZVByb3h5KX19fSgpKTtyZXR1cm4gc2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuTWVzc2FnZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLk1lc3NhZ2UnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9NZXNzYWdlIixbJy4vbGlicmFyeScsJy4vRWxlbWVudCcsJy4vdGhlbWluZy9QYXJhbWV0ZXJzJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuRWxlbWVudC5leHRlbmQoInNhcC51aS5jb3JlLk1lc3NhZ2UiLHttZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldERlZmF1bHRJY29uIl0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJ0ZXh0Ijp7dHlwZToic3RyaW5nIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOm51bGx9LCJ0aW1lc3RhbXAiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6bnVsbH0sImljb24iOnt0eXBlOiJzYXAudWkuY29yZS5VUkkiLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6bnVsbH0sImxldmVsIjp7dHlwZToic2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUiLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6c2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUuTm9uZX0sInJlYWRPbmx5Ijp7dHlwZToiYm9vbGVhbiIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTpmYWxzZX19fX0pO3NhcC51aS5jb3JlLk1lc3NhZ2UucHJvdG90eXBlLmdldERlZmF1bHRJY29uPWZ1bmN0aW9uKHMpe3ZhciBtPWpRdWVyeS5zYXAuZ2V0TW9kdWxlUGF0aCgic2FwLnVpLmNvcmUiLCcvJyk7dmFyIHQ9InRoZW1lcy8iK3NhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFRoZW1lKCk7dmFyIGk9Ii9pbWcvbWVzc2FnZS8iO2lmKHMmJnM9PSIzMngzMiIpe2krPSIzMngzMi8ifWVsc2V7aSs9IjE2eDE2LyJ9dmFyIHU9IiI7c3dpdGNoKHRoaXMuZ2V0UHJvcGVydHkoImxldmVsIikpe2Nhc2Ugc2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUuRXJyb3I6dT1tK3QraSsiTWVzc2FnZV9JY29uX0Vycm9yLnBuZyI7YnJlYWs7Y2FzZSBzYXAudWkuY29yZS5NZXNzYWdlVHlwZS5JbmZvcm1hdGlvbjp1PW0rdCtpKyJNZXNzYWdlX0ljb25fSW5mb3JtYXRpb24ucG5nIjticmVhaztjYXNlIHNhcC51aS5jb3JlLk1lc3NhZ2VUeXBlLldhcm5pbmc6dT1tK3QraSsiTWVzc2FnZV9JY29uX1dhcm5pbmcucG5nIjticmVhaztjYXNlIHNhcC51aS5jb3JlLk1lc3NhZ2VUeXBlLlN1Y2Nlc3M6dT1tK3QraSsiTWVzc2FnZV9JY29uX1N1Y2Nlc3MucG5nIjticmVhaztjYXNlIHNhcC51aS5jb3JlLk1lc3NhZ2VUeXBlLk5vbmU6ZGVmYXVsdDp1PXRoaXMuZ2V0UHJvcGVydHkoImljb24iKTticmVha31yZXR1cm4gdX07c2FwLnVpLmNvcmUuTWVzc2FnZS5wcm90b3R5cGUuY29tcGFyZUJ5VHlwZT1mdW5jdGlvbihvKXtzYXAudWkuY29yZS5NZXNzYWdlLmNvbXBhcmVCeVR5cGUodGhpcyxvKX07c2FwLnVpLmNvcmUuTWVzc2FnZS5jb21wYXJlQnlUeXBlPWZ1bmN0aW9uKG0sTSl7aWYoIW0mJiFNKXtyZXR1cm4gMH1pZihtJiYhTSl7cmV0dXJuIDF9aWYoIW0mJk0pe3JldHVybi0xfXZhciBsPW0uZ2V0TGV2ZWwoKTt2YXIgTD1NLmdldExldmVsKCk7dmFyIHQ9c2FwLnVpLmNvcmUuTWVzc2FnZVR5cGU7aWYobD09PUwpe3JldHVybiAwfXN3aXRjaChsKXtjYXNlIHQuRXJyb3I6cmV0dXJuIDE7Y2FzZSB0Lldhcm5pbmc6cmV0dXJuIEw9PT10LkVycm9yPy0xOjE7Y2FzZSB0LlN1Y2Nlc3M6cmV0dXJuIEw9PT10LkVycm9yfHxMPT09dC5XYXJuaW5nPy0xOjE7Y2FzZSB0LkluZm9ybWF0aW9uOnJldHVybiBMPT09dC5Ob25lPzE6LTE7Y2FzZSB0Lk5vbmU6cmV0dXJuLTE7ZGVmYXVsdDpqUXVlcnkuc2FwLmxvZy5lcnJvcigiQ29tcGFyaXNvbiBlcnJvciIsdGhpcyk7cmV0dXJuIDB9fTtyZXR1cm4gc2FwLnVpLmNvcmUuTWVzc2FnZX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlBvcHVwJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuUG9wdXAnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Qb3B1cCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnLCdzYXAvdWkvYmFzZS9PYmplY3QnLCcuL0NvbnRyb2wnLCcuL0ludGVydmFsVHJpZ2dlcicsJy4vUmVuZGVyTWFuYWdlcicsJy4vVUlBcmVhJywnLi9Qb3B1cFN1cHBvcnQnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEsTSxCLEMsSSxSLFUsUCl7InVzZSBzdHJpY3QiO3ZhciBhPU0uZXh0ZW5kKCJzYXAudWkuY29yZS5Qb3B1cCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGMsbSxzLEEpe00uYXBwbHkodGhpcyk7UC5hcHBseSh0aGlzKTt0aGlzLl9wb3B1cFVJRD1xLnNhcC51aWQoKTt0aGlzLmJPcGVuPWZhbHNlO3RoaXMuZU9wZW5TdGF0ZT1zYXAudWkuY29yZS5PcGVuU3RhdGUuQ0xPU0VEO3RoaXMuX21Gb2N1c0V2ZW50cz17fTt0aGlzLl9tRm9jdXNFdmVudHNbInNhcC51aS5jb3JlLlBvcHVwLmFkZEZvY3VzYWJsZUNvbnRlbnQtIit0aGlzLl9wb3B1cFVJRF09dGhpcy5fYWRkRm9jdXNhYmxlQXJlYTt0aGlzLl9tRm9jdXNFdmVudHNbInNhcC51aS5jb3JlLlBvcHVwLnJlbW92ZUZvY3VzYWJsZUNvbnRlbnQtIit0aGlzLl9wb3B1cFVJRF09dGhpcy5fcmVtb3ZlRm9jdXNhYmxlQXJlYTt0aGlzLl9tRm9jdXNFdmVudHNbInNhcC51aS5jb3JlLlBvcHVwLmNsb3NlUG9wdXAtIit0aGlzLl9wb3B1cFVJRF09dGhpcy5fY2xvc2VQb3B1cDt0aGlzLl9tRm9jdXNFdmVudHNbInNhcC51aS5jb3JlLlBvcHVwLm9uRm9jdXNFdmVudC0iK3RoaXMuX3BvcHVwVUlEXT10aGlzLm9uRm9jdXNFdmVudDt0aGlzLl9tRm9jdXNFdmVudHNbInNhcC51aS5jb3JlLlBvcHVwLmluY3JlYXNlWkluZGV4LSIrdGhpcy5fcG9wdXBVSURdPXRoaXMuX2luY3JlYXNlTXlaSW5kZXg7aWYoYyl7dGhpcy5zZXRDb250ZW50KGMpfXRoaXMuX29EZWZhdWx0UG9zaXRpb249e215OmEuRG9jay5DZW50ZXJDZW50ZXIsYXQ6YS5Eb2NrLkNlbnRlckNlbnRlcixvZjpkb2N1bWVudCxvZmZzZXQ6IjAgMCIsY29sbGlzaW9uOiJmbGlwIn07dGhpcy5fb1Bvc2l0aW9uPXEuZXh0ZW5kKHt9LHRoaXMuX29EZWZhdWx0UG9zaXRpb24pO3RoaXMuX2JNb2RhbD0hIW07dGhpcy5fb1ByZXZpb3VzRm9jdXM9bnVsbDt0aGlzLl9zSW5pdGlhbEZvY3VzSWQ9bnVsbDt0aGlzLl9iU2hhZG93PXR5cGVvZihzKT09PSJib29sZWFuIj9zOnRydWU7dGhpcy5fYkF1dG9DbG9zZT0hIUE7dGhpcy5fYW5pbWF0aW9ucz17b3BlbjpudWxsLGNsb3NlOm51bGx9O3RoaXMuX2R1cmF0aW9ucz17b3BlbjoiZmFzdCIsY2xvc2U6ImZhc3QifTt0aGlzLl9pWkluZGV4PS0xO3RoaXMuX29CbGluZExheWVyPW51bGw7aWYodGhpcy50b3VjaEVuYWJsZWQpe3RoaXMuX2ZBdXRvQ2xvc2VIYW5kbGVyPWZ1bmN0aW9uKGUpe2lmKGUuaXNNYXJrZWQoImRlbGF5ZWRNb3VzZUV2ZW50Iil8fGUuaXNNYXJrZWQoImNhbmNlbEF1dG9DbG9zZSIpKXtyZXR1cm59aWYodGhpcy5lT3BlblN0YXRlPT09c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NJTkd8fHRoaXMuZU9wZW5TdGF0ZT09PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUQpe3JldHVybn12YXIgZD1lLnRhcmdldCxwPXRoaXMuXyQoKS5nZXQoMCksYj1xLmNvbnRhaW5zKHAsZCk7aWYoIWIpe3ZhciBmPXRoaXMuZ2V0Q2hpbGRQb3B1cHMoKTtmb3IodmFyIGk9MCxsPWYubGVuZ3RoO2k8bDtpKyspe3ZhciBEPXEuc2FwLmRvbUJ5SWQoZltpXSk7aWYocS5zYXAuY29udGFpbnNPckVxdWFscyhELGQpKXtiPXRydWU7YnJlYWt9fX1pZighYil7dGhpcy5jbG9zZSgpfX19fSxtZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHB1YmxpY01ldGhvZHM6WyJvcGVuIiwiY2xvc2UiLCJzZXRDb250ZW50IiwiZ2V0Q29udGVudCIsInNldFBvc2l0aW9uIiwic2V0U2hhZG93Iiwic2V0TW9kYWwiLCJnZXRNb2RhbCIsInNldEF1dG9DbG9zZSIsInNldEF1dG9DbG9zZUFyZWFzIiwiaXNPcGVuIiwiZ2V0QXV0b0Nsb3NlIiwiZ2V0T3BlblN0YXRlIiwic2V0QW5pbWF0aW9ucyIsInNldER1cmF0aW9ucyIsImF0dGFjaE9wZW5lZCIsImF0dGFjaENsb3NlZCIsImRldGFjaE9wZW5lZCIsImRldGFjaENsb3NlZCJdLGFzc29jaWF0aW9uczp7ImNoaWxkUG9wdXBzIjp7dHlwZToic2FwLnVpLmNvcmUuUG9wdXAiLG11bHRpcGxlOnRydWUsdmlzaWJpbGl0eToiaGlkZGVuIn19LGV2ZW50czp7Im9wZW5lZCI6e30sImNsb3NlZCI6e319fX0pO2EuX2FjdGl2YXRlQmxpbmRMYXllcj10cnVlO2EuYmxTdGFjaz1bXTthLkRvY2s9e0JlZ2luVG9wOiJiZWdpbiB0b3AiLEJlZ2luQ2VudGVyOiJiZWdpbiBjZW50ZXIiLEJlZ2luQm90dG9tOiJiZWdpbiBib3R0b20iLExlZnRUb3A6ImxlZnQgdG9wIixMZWZ0Q2VudGVyOiJsZWZ0IGNlbnRlciIsTGVmdEJvdHRvbToibGVmdCBib3R0b20iLENlbnRlclRvcDoiY2VudGVyIHRvcCIsQ2VudGVyQ2VudGVyOiJjZW50ZXIgY2VudGVyIixDZW50ZXJCb3R0b206ImNlbnRlciBib3R0b20iLFJpZ2h0VG9wOiJyaWdodCB0b3AiLFJpZ2h0Q2VudGVyOiJyaWdodCBjZW50ZXIiLFJpZ2h0Qm90dG9tOiJyaWdodCBib3R0b20iLEVuZFRvcDoiZW5kIHRvcCIsRW5kQ2VudGVyOiJlbmQgY2VudGVyIixFbmRCb3R0b206ImVuZCBib3R0b20ifTthLnByb3RvdHlwZS50b3VjaEVuYWJsZWQ9c2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNofHxxLnNhcC5zaW11bGF0ZU1vYmlsZU9uRGVza3RvcDthLnByb3RvdHlwZS5yZXN0b3JlRm9jdXM9IXNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCYmIXEuc2FwLnNpbXVsYXRlTW9iaWxlT25EZXNrdG9wO0IuZXh0ZW5kKCJzYXAudWkuY29yZS5Qb3B1cC5MYXllciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5nZXREb21TdHJpbmcoKTt0aGlzLl8kUmVmPXEoZCkuYXBwZW5kVG8oc2FwLnVpLmdldENvcmUoKS5nZXRTdGF0aWNBcmVhUmVmKCkpfX0pO2EuTGF5ZXIucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24obyx6KXt0aGlzLl8kUmVmLmNzcyh7InZpc2liaWxpdHkiOiJ2aXNpYmxlIiwiei1pbmRleCI6en0pO3RoaXMudXBkYXRlKG8seik7dGhpcy5fJFJlZi5pbnNlcnRBZnRlcihvKS5zaG93KCl9O2EuTGF5ZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihvLHope3ZhciBiPW8ucmVjdCgpO3RoaXMuXyRSZWYuY3NzKHsibGVmdCI6Yi5sZWZ0LCJ0b3AiOmIudG9wfSk7aWYoby5jc3MoInJpZ2h0IikhPSJhdXRvIiYmby5jc3MoInJpZ2h0IikhPSJpbmhlcml0Iil7dGhpcy5fJFJlZi5jc3MoeyJyaWdodCI6by5jc3MoInJpZ2h0IiksIndpZHRoIjoiYXV0byJ9KX1lbHNle3RoaXMuXyRSZWYuY3NzKHsid2lkdGgiOmIud2lkdGgsInJpZ2h0IjoiYXV0byJ9KX1pZihvLmNzcygiYm90dG9tIikhPSJhdXRvIiYmby5jc3MoImJvdHRvbSIpIT0iaW5oZXJpdCIpe3RoaXMuXyRSZWYuY3NzKHsiYm90dG9tIjpvLmNzcygiYm90dG9tIiksImhlaWdodCI6ImF1dG8ifSl9ZWxzZXt0aGlzLl8kUmVmLmNzcyh7ImhlaWdodCI6Yi5oZWlnaHQsImJvdHRvbSI6ImF1dG8ifSl9aWYodHlwZW9mKHopPT09Im51bWJlciIpe3RoaXMuXyRSZWYuY3NzKCJ6LWluZGV4Iix6KX19O2EuTGF5ZXIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fJFJlZi5oaWRlKCkuY3NzKCJ2aXNpYmlsaXR5IiwiaGlkZGVuIikuYXBwZW5kVG8oc2FwLnVpLmdldENvcmUoKS5nZXRTdGF0aWNBcmVhUmVmKCkpfTthLkxheWVyLnByb3RvdHlwZS5nZXREb21TdHJpbmc9ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZXJyb3IoInNhcC51aS5jb3JlLlBvcHVwLkxheWVyOiBnZXREb21TdHJpbmcgZnVuY3Rpb24gbXVzdCBiZSBvdmVyd3JpdHRlbiEiKTtyZXR1cm4iIn07YS5MYXllci5leHRlbmQoInNhcC51aS5jb3JlLlBvcHVwLkJsaW5kTGF5ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe2EuTGF5ZXIuYXBwbHkodGhpcyl9fSk7YS5CbGluZExheWVyLnByb3RvdHlwZS5nZXREb21TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPGRpdiBjbGFzcz1cInNhcFVpQmxpTHlcIiBpZD1cInNhcC11aS1ibGluZGxheWVyLSIrcS5zYXAudWlkKCkrIlwiPjxpZnJhbWUgc2Nyb2xsaW5nPVwibm9cIiBzcmM9XCJqYXZhc2NyaXB0OicnXCIJdGFiSW5kZXg9XCItMVwiPjwvaWZyYW1lPjwvZGl2PiJ9O2EucHJvdG90eXBlLm9CbGluZExheWVyUG9vbD1uZXcgc2FwLnVpLmJhc2UuT2JqZWN0UG9vbChhLkJsaW5kTGF5ZXIpO2EuTGF5ZXIuZXh0ZW5kKCJzYXAudWkuY29yZS5Qb3B1cC5TaGllbGRMYXllciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7YS5MYXllci5hcHBseSh0aGlzKX19KTthLlNoaWVsZExheWVyLnByb3RvdHlwZS5nZXREb21TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPGRpdiBjbGFzcz1cInNhcFVpUG9wdXBTaGllbGRcIiBpZD1cInNhcC11aS1zaGllbGRsYXllci0iK3Euc2FwLnVpZCgpKyJcIj48L2Rpdj4ifTthLnByb3RvdHlwZS5vU2hpZWxkTGF5ZXJQb29sPW5ldyBzYXAudWkuYmFzZS5PYmplY3RQb29sKGEuU2hpZWxkTGF5ZXIpOyhmdW5jdGlvbigpe3ZhciBsPTA7YS5nZXRMYXN0WkluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIGx9O2EucHJvdG90eXBlLmdldExhc3RaSW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRMYXN0WkluZGV4KCl9O2EuZ2V0TmV4dFpJbmRleD1mdW5jdGlvbigpe3JldHVybihsKz0xMCl9O2EucHJvdG90eXBlLmdldE5leHRaSW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXROZXh0WkluZGV4KCl9fSgpKTthLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGQsbSxiLG8sYyxmLGcpe2lmKHRoaXMuZU9wZW5TdGF0ZSE9c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NFRCl7cmV0dXJufXRoaXMuZU9wZW5TdGF0ZT1zYXAudWkuY29yZS5PcGVuU3RhdGUuT1BFTklORzt2YXIgczt0cnl7cz1zYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKTtzPXNhcC51aS5nZXRDb3JlKCkuZ2V0VUlBcmVhKHMpfWNhdGNoKGUpe3Euc2FwLmxvZy5lcnJvcihlKTt0aHJvdyBuZXcgRXJyb3IoIlBvcHVwIGNhbm5vdCBiZSBvcGVuZWQgYmVjYXVzZSBzdGF0aWMgVUlBcmVhIGNhbm5vdCBiZSBkZXRlcm1pbmVkLiIpfXRoaXMuX2JDb250ZW50QWRkZWRUb1N0YXRpYz1mYWxzZTtpZih0aGlzLm9Db250ZW50IGluc3RhbmNlb2YgQyYmIXRoaXMub0NvbnRlbnQuZ2V0UGFyZW50KCkpe3MuYWRkQ29udGVudCh0aGlzLm9Db250ZW50LHRydWUpO3RoaXMuX2JDb250ZW50QWRkZWRUb1N0YXRpYz10cnVlfWlmKHRoaXMub0NvbnRlbnQuZ2V0VUlBcmVhKXt2YXIgQT10aGlzLm9Db250ZW50LmdldFVJQXJlYSgpO2lmKEE9PT1udWxsKXtxLnNhcC5sb2cud2FybmluZygiVGhlIFBvcHVwIGNvbnRlbnQgaXMgTk9UIGNvbm5lY3RlZCB3aXRoIGFuIFVJQXJlYSBhbmQgbWF5IG5vdCB3b3JrIHByb3Blcmx5ISIpfWVsc2UgaWYoYS5fYkVuYWJsZVVJQXJlYUNoZWNrJiZBLmdldFJvb3ROb2RlKCkuaWQhPT1zLmdldFJvb3ROb2RlKCkuaWQpe3Euc2FwLmxvZy53YXJuaW5nKCJUaGUgUG9wdXAgY29udGVudCBpcyBOT1QgY29ubmVjdGVkIHdpdGggdGhlIHN0YXRpYy1VSUFyZWEgYW5kIG1heSBub3Qgd29yayBwcm9wZXJseSEiKX19aWYodHlwZW9mKGQpPT0ic3RyaW5nIil7Zz1mO2Y9YztjPW87bz1iO2I9bTttPWQ7ZD0tMX1pZihkPT09dW5kZWZpbmVkKXtkPS0xfWlmKHRoaXMucmVzdG9yZUZvY3VzKXt0aGlzLl9vUHJldmlvdXNGb2N1cz1hLmdldEN1cnJlbnRGb2N1c0luZm8oKX12YXIgJD10aGlzLl8kKHRydWUpO3ZhciBpPSJmYXN0IjtpZigoZD09PTApfHwoZD4wKSl7aT1kfWVsc2UgaWYoKHRoaXMuX2R1cmF0aW9ucy5vcGVuPT09MCl8fCh0aGlzLl9kdXJhdGlvbnMub3Blbj4wKSl7aT10aGlzLl9kdXJhdGlvbnMub3Blbn12YXIgXztpZihtfHxifHxvfHxjfHxmKXtfPXRoaXMuX2NyZWF0ZVBvc2l0aW9uKG0sYixvLGMsZil9ZWxzZXtfPXRoaXMuX29Qb3NpdGlvbn1pZighXy5vZil7Xy5vZj10aGlzLl9vUG9zaXRpb24ub2Z8fGRvY3VtZW50fXRoaXMuX2laSW5kZXg9dGhpcy5faVpJbmRleD09PXRoaXMuZ2V0TGFzdFpJbmRleCgpP3RoaXMuX2laSW5kZXg6dGhpcy5nZXROZXh0WkluZGV4KCk7dmFyIFM9c2FwLnVpLmdldENvcmUoKS5nZXRTdGF0aWNBcmVhUmVmKCk7JC5jc3MoeyJwb3NpdGlvbiI6ImFic29sdXRlIiwidmlzaWJpbGl0eSI6ImhpZGRlbiJ9KTtpZighKCRbMF0ucGFyZW50Tm9kZT09UykpeyQuYXBwZW5kVG8oUyl9JC5jc3MoInotaW5kZXgiLHRoaXMuX2laSW5kZXgpO3Euc2FwLmxvZy5kZWJ1ZygicG9zaXRpb24gcG9wdXAgY29udGVudCAiKyQuYXR0cigiaWQiKSsiIGF0ICIrKHdpbmRvdy5KU09OP0pTT04uc3RyaW5naWZ5KF8uYXQpOlN0cmluZyhfLmF0KSkpO3RoaXMuX2FwcGx5UG9zaXRpb24oXyk7aWYoZyE9PXVuZGVmaW5lZCl7dGhpcy5zZXRGb2xsb3dPZihnKX12YXIgdD10aGlzO2lmKHNhcC51aS5EZXZpY2Uub3MuaW9zJiZzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe2lmKHRoaXMuX29Ub3BTaGllbGRMYXllcil7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9pVG9wU2hpZWxkUmVtb3ZlVGltZXIpO3RoaXMuX2lUb3BTaGllbGRSZW1vdmVUaW1lcj1udWxsfWVsc2V7dGhpcy5fb1RvcFNoaWVsZExheWVyPXRoaXMub1NoaWVsZExheWVyUG9vbC5ib3Jyb3dPYmplY3QoJCx0aGlzLl9pWkluZGV4KzEpfXRoaXMuX2lUb3BTaGllbGRSZW1vdmVUaW1lcj1xLnNhcC5kZWxheWVkQ2FsbCg1MDAsdGhpcyxmdW5jdGlvbigpe3RoaXMub1NoaWVsZExheWVyUG9vbC5yZXR1cm5PYmplY3QodGhpcy5fb1RvcFNoaWVsZExheWVyKTt0aGlzLl9vVG9wU2hpZWxkTGF5ZXI9bnVsbDt0aGlzLl9pVG9wU2hpZWxkUmVtb3ZlVGltZXI9bnVsbH0pfXZhciBPPWZ1bmN0aW9uKCl7JC5jc3MoImRpc3BsYXkiLCJibG9jayIpO2lmKHQuX2JNb2RhbHx8dC5fYkF1dG9DbG9zZXx8dC5fc0luaXRpYWxGb2N1c0lkKXt2YXIgaz1udWxsO2lmKHQuX3NJbml0aWFsRm9jdXNJZCl7dmFyIGw9c2FwLnVpLmdldENvcmUoKS5ieUlkKHQuX3NJbml0aWFsRm9jdXNJZCk7aWYobCl7az1sLmdldEZvY3VzRG9tUmVmKCl9az1rfHxxLnNhcC5kb21CeUlkKHQuX3NJbml0aWFsRm9jdXNJZCl9cS5zYXAuZm9jdXMoa3x8JC5maXJzdEZvY3VzYWJsZURvbVJlZigpKX10LmVPcGVuU3RhdGU9c2FwLnVpLmNvcmUuT3BlblN0YXRlLk9QRU47aWYodC5nZXRGb2xsb3dPZigpKXthLkRvY2tUcmlnZ2VyLmFkZExpc3RlbmVyKGEuY2hlY2tEb2NraW5nLHQpfXQuX3VwZGF0ZUJsaW5kTGF5ZXIoKTtpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb249PTkpe3Euc2FwLmRlbGF5ZWRDYWxsKDAsdCxmdW5jdGlvbigpe3QuZmlyZU9wZW5lZCgpfSl9ZWxzZXt0LmZpcmVPcGVuZWQoKX19OyQudG9nZ2xlQ2xhc3MoInNhcFVpU2hkIix0aGlzLl9iU2hhZG93KS5oaWRlKCkuY3NzKCJ2aXNpYmlsaXR5IiwidmlzaWJsZSIpO2lmKGk9PTApe3RoaXMuYk9wZW49dHJ1ZTtPLmFwcGx5KCl9ZWxzZXtpZih0aGlzLl9hbmltYXRpb25zLm9wZW4pe3RoaXMuX2FuaW1hdGlvbnMub3Blbi5jYWxsKG51bGwsJCxpLE8pfWVsc2V7JC5mYWRlSW4oaSxPKX19aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJmEuX2FjdGl2YXRlQmxpbmRMYXllcil7dGhpcy5fb0JsaW5kTGF5ZXI9dGhpcy5vQmxpbmRMYXllclBvb2wuYm9ycm93T2JqZWN0KCQsdGhpcy5faVpJbmRleC0xKX1pZih0aGlzLl9iTW9kYWwpe3RoaXMuX3Nob3dCbG9ja0xheWVyKCl9aWYodGhpcy5vQ29udGVudCBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkVsZW1lbnQpe3RoaXMub0NvbnRlbnQuYWRkRGVsZWdhdGUodGhpcyl9dGhpcy5iT3Blbj10cnVlO2lmKHRoaXMuaXNJblBvcHVwKG8pfHx0aGlzLmlzSW5Qb3B1cCh0aGlzLl9vUG9zaXRpb24ub2YpKXt2YXIgcD10aGlzLmdldFBhcmVudFBvcHVwSWQobyl8fHRoaXMuZ2V0UGFyZW50UG9wdXBJZCh0aGlzLl9vUG9zaXRpb24ub2YpO3ZhciBoPSIiO3ZhciBqPXRoaXMuZ2V0Q29udGVudCgpO2lmKGogaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50KXtoPWouZ2V0SWQoKX1lbHNlIGlmKHR5cGVvZiBqPT09Im9iamVjdCIpe2g9ai5pZH10aGlzLmFkZENoaWxkVG9Qb3B1cChwLGgpO3RoaXMuYWRkQ2hpbGRUb1BvcHVwKHAsdGhpcy5fcG9wdXBVSUQpfWlmKHRoaXMuX2JNb2RhbHx8dGhpcy5fYkF1dG9DbG9zZSl7dGhpcy5fYWRkRm9jdXNFdmVudExpc3RlbmVycygpfWlmKHRoaXMudG91Y2hFbmFibGVkJiYhdGhpcy5fYk1vZGFsJiZ0aGlzLl9iQXV0b0Nsb3NlKXtxKGRvY3VtZW50KS5vbigidG91Y2hzdGFydCBtb3VzZWRvd24iLHEucHJveHkodGhpcy5fZkF1dG9DbG9zZUhhbmRsZXIsdGhpcykpfWlmKHRoaXMuX29CbGluZExheWVyKXt0aGlzLl9yZXNpemVMaXN0ZW5lcklkPXNhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIucmVnaXN0ZXIodGhpcy5fJCgpLmdldCgwKSxxLnByb3h5KHRoaXMub25yZXNpemUsdGhpcykpfX07YS5wcm90b3R5cGUub25Gb2N1c0V2ZW50PWZ1bmN0aW9uKGIpe3ZhciBlPXEuZXZlbnQuZml4KGIpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdPT09InNhcC51aS5jb3JlLlBvcHVwLm9uRm9jdXNFdmVudC0iK3RoaXMuX3BvcHVwVUlEKXtlPXEuZXZlbnQuZml4KGFyZ3VtZW50c1syXSl9dmFyIHQ9KGUudHlwZT09ImZvY3VzInx8ZS50eXBlPT0iYWN0aXZhdGUiKT8iZm9jdXMiOiJibHVyIjt2YXIgYz1mYWxzZTtpZih0PT0iZm9jdXMiKXt2YXIgZD10aGlzLl8kKCkuZ2V0KDApO2lmKGQpe2M9ZD09ZS50YXJnZXR8fHEuY29udGFpbnMoZCxlLnRhcmdldCk7dmFyIGY9dGhpcy5nZXRDaGlsZFBvcHVwcygpO2lmKCFjKXtmb3IodmFyIGk9MCxsPWYubGVuZ3RoO2k8bDtpKyspe3ZhciBvPXEuc2FwLmRvbUJ5SWQoZltpXSk7aWYobyl7Yz1vPT1lLnRhcmdldHx8cS5jb250YWlucyhvLGUudGFyZ2V0KTtpZihjKXticmVha319fX1xLnNhcC5sb2cuZGVidWcoImZvY3VzIGV2ZW50IG9uICIrZS50YXJnZXQuaWQrIiwgY29udGFpbnM6ICIrYyk7aWYodGhpcy5fYk1vZGFsJiYhYyl7dmFyIFQ9KGEuZ2V0TGFzdFpJbmRleCgpPT10aGlzLl9pWkluZGV4KTtpZihUKXtpZighc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNofHxxKGUudGFyZ2V0KS5pcygiOmlucHV0Iikpe3ZhciBEPXRoaXMub0xhc3RCbHVycmVkRWxlbWVudD90aGlzLm9MYXN0Qmx1cnJlZEVsZW1lbnQ6ZDtxLnNhcC5mb2N1cyhEKX19fWVsc2UgaWYodGhpcy5fYkF1dG9DbG9zZSYmYyYmdGhpcy5fc1RpbWVvdXRJZCl7aWYodGhpcy5fc1RpbWVvdXRJZCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9zVGltZW91dElkKTt0aGlzLl9zVGltZW91dElkPW51bGx9fX19ZWxzZSBpZih0PT0iYmx1ciIpe3Euc2FwLmxvZy5kZWJ1ZygiYmx1ciBldmVudCBvbiAiK2UudGFyZ2V0LmlkKTtpZih0aGlzLl9iTW9kYWwpe3RoaXMub0xhc3RCbHVycmVkRWxlbWVudD1lLnRhcmdldH1lbHNlIGlmKHRoaXMuX2JBdXRvQ2xvc2Upe2lmKCF0aGlzLnRvdWNoRW5hYmxlZCYmIXRoaXMuX3NUaW1lb3V0SWQpe3RoaXMuX3NUaW1lb3V0SWQ9cS5zYXAuZGVsYXllZENhbGwoMCx0aGlzLCJjbG9zZSIpfX19fTthLnByb3RvdHlwZS5zZXRJbml0aWFsRm9jdXNJZD1mdW5jdGlvbihpKXt0aGlzLl9zSW5pdGlhbEZvY3VzSWQ9aX07YS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oZCl7aWYodGhpcy5lT3BlblN0YXRlPT1zYXAudWkuY29yZS5PcGVuU3RhdGUuQ0xPU0VEfHx0aGlzLmVPcGVuU3RhdGU9PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TSU5HKXtyZXR1cm59dmFyIGk9ImZhc3QiO2lmKChkPT09MCl8fChkPjApKXtpPWR9ZWxzZSBpZigodGhpcy5fZHVyYXRpb25zLmNsb3NlPT09MCl8fCh0aGlzLl9kdXJhdGlvbnMuY2xvc2U+MCkpe2k9dGhpcy5fZHVyYXRpb25zLmNsb3NlfWlmKGk9PT0wJiZ0aGlzLmVPcGVuU3RhdGU9PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5PUEVOSU5HKXtyZXR1cm59dGhpcy5lT3BlblN0YXRlPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TSU5HO2lmKHRoaXMuZ2V0Rm9sbG93T2YoKSl7YS5Eb2NrVHJpZ2dlci5yZW1vdmVMaXN0ZW5lcihhLmNoZWNrRG9ja2luZyx0aGlzKX1pZih0aGlzLm9Db250ZW50JiZ0aGlzLl9iQ29udGVudEFkZGVkVG9TdGF0aWMpe3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS5wdWJsaXNoKCJzYXAudWkiLCJfX2JlZm9yZVBvcHVwQ2xvc2UiLHtkb21Ob2RlOnRoaXMuXyQoKS5nZXQoMCl9KTt2YXIgcz1zYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKTtzPXNhcC51aS5nZXRDb3JlKCkuZ2V0VUlBcmVhKHMpO3MucmVtb3ZlQ29udGVudChzLmluZGV4T2ZDb250ZW50KHRoaXMub0NvbnRlbnQpLHRydWUpfXRoaXMuX2JDb250ZW50QWRkZWRUb1N0YXRpYz1mYWxzZTt0aGlzLl9zVGltZW91dElkPW51bGw7aWYodGhpcy5mRXZlbnRIYW5kbGVyKXt0aGlzLl9yZW1vdmVGb2N1c0V2ZW50TGlzdGVuZXJzKCl9aWYodGhpcy50b3VjaEVuYWJsZWQpe2lmKCF0aGlzLl9iTW9kYWwmJnRoaXMuX2JBdXRvQ2xvc2Upe3EoZG9jdW1lbnQpLm9mZigidG91Y2hzdGFydCBtb3VzZWRvd24iLHRoaXMuX2ZBdXRvQ2xvc2VIYW5kbGVyKX19aWYodGhpcy5vQ29udGVudCBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkVsZW1lbnQpe3RoaXMub0NvbnRlbnQucmVtb3ZlRGVsZWdhdGUodGhpcyl9dmFyICQ9dGhpcy5fJCgpO2lmKHRoaXMuX2JFdmVudEJ1c0V2ZW50c1JlZ2lzdGVyZWQpe3RoaXMuX3VucmVnaXN0ZXJFdmVudEJ1c0V2ZW50cygpfWlmKHRoaXMuX29CbGluZExheWVyKXt0aGlzLm9CbGluZExheWVyUG9vbC5yZXR1cm5PYmplY3QodGhpcy5fb0JsaW5kTGF5ZXIpfXRoaXMuX29CbGluZExheWVyPW51bGw7dmFyIHQ9dGhpcztpZihzYXAudWkuRGV2aWNlLm9zLmlvcyYmc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoKXtpZih0aGlzLl9vQm90dG9tU2hpZWxkTGF5ZXIpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5faUJvdHRvbVNoaWVsZFJlbW92ZVRpbWVyKTt0aGlzLl9pQm90dG9tU2hpZWxkUmVtb3ZlVGltZXI9bnVsbH1lbHNle3RoaXMuX29Cb3R0b21TaGllbGRMYXllcj10aGlzLm9TaGllbGRMYXllclBvb2wuYm9ycm93T2JqZWN0KCQsdGhpcy5faVpJbmRleC0zKX10aGlzLl9pQm90dG9tU2hpZWxkUmVtb3ZlVGltZXI9cS5zYXAuZGVsYXllZENhbGwoNTAwLHRoaXMsZnVuY3Rpb24oKXt0aGlzLm9TaGllbGRMYXllclBvb2wucmV0dXJuT2JqZWN0KHRoaXMuX29Cb3R0b21TaGllbGRMYXllcik7dGhpcy5fb0JvdHRvbVNoaWVsZExheWVyPW51bGw7dGhpcy5faUJvdHRvbVNoaWVsZFJlbW92ZVRpbWVyPW51bGx9KX12YXIgYz1mdW5jdGlvbigpe3EoJCkuaGlkZSgpLmNzcyh7InZpc2liaWxpdHkiOiJoaWRkZW4iLCJsZWZ0IjoiMHB4IiwidG9wIjoiMHB4IiwicmlnaHQiOiIifSk7aWYodC5yZXN0b3JlRm9jdXMpe2lmKHQuX2JNb2RhbCl7YS5hcHBseUZvY3VzSW5mbyh0Ll9vUHJldmlvdXNGb2N1cyk7dC5fb1ByZXZpb3VzRm9jdXM9bnVsbDt0Lm9MYXN0Qmx1cnJlZEVsZW1lbnQ9bnVsbH19dC5iT3Blbj1mYWxzZTt0LmVPcGVuU3RhdGU9c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NFRDt0LmZpcmVDbG9zZWQoKTt2YXIgYj10LmdldENoaWxkUG9wdXBzKCk7Zm9yKHZhciBqPTAsbD1iLmxlbmd0aDtqPGw7aisrKXt0LmNsb3NlUG9wdXAoYltqXSl9fTtpZihpPT0wKXtjLmFwcGx5KCl9ZWxzZXtpZih0aGlzLl9hbmltYXRpb25zLmNsb3NlKXt0aGlzLl9hbmltYXRpb25zLmNsb3NlLmNhbGwobnVsbCwkLGksYyl9ZWxzZXskLmZhZGVPdXQoaSxjKX19aWYodGhpcy5fYk1vZGFsKXt0aGlzLl9oaWRlQmxvY2tMYXllcigpfWlmKHRoaXMuX3Jlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9yZXNpemVMaXN0ZW5lcklkKTt0aGlzLl9yZXNpemVMaXN0ZW5lcklkPW51bGx9fTthLmdldEN1cnJlbnRGb2N1c0luZm89ZnVuY3Rpb24oKXt2YXIgXz1udWxsO3ZhciBmPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q3VycmVudEZvY3VzZWRDb250cm9sSWQoKTtpZihmKXt2YXIgRj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbnRyb2woZik7Xz17J3NGb2N1c0lkJzpmLCdvRm9jdXNJbmZvJzpGP0YuZ2V0Rm9jdXNJbmZvKCk6e319fWVsc2V7dHJ5e3ZhciBlPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7aWYoZSl7Xz17J3NGb2N1c0lkJzplLmlkLCdvRm9jdXNlZEVsZW1lbnQnOmUsJ29Gb2N1c0luZm8nOnt9fX19Y2F0Y2goYil7Xz1udWxsfX1yZXR1cm4gX307YS5hcHBseUZvY3VzSW5mbz1mdW5jdGlvbihwKXtpZihwKXt2YXIgZj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbnRyb2wocC5zRm9jdXNJZCk7aWYoZil7Zi5hcHBseUZvY3VzSW5mbyhwLm9Gb2N1c0luZm8pfWVsc2V7dmFyIGU9cS5zYXAuZG9tQnlJZChwLnNGb2N1c0lkKXx8cC5vRm9jdXNlZEVsZW1lbnQ7cS5zYXAuZm9jdXMoZSl9fX07YS5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbihjKXt0aGlzLm9Db250ZW50PWM7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQ29udGVudH07YS5wcm90b3R5cGUuc2V0UG9zaXRpb249ZnVuY3Rpb24obSxiLG8sYyxkKXt0aGlzLl9vUG9zaXRpb249dGhpcy5fY3JlYXRlUG9zaXRpb24obSxiLG8sYyxkKTtpZih0aGlzLmVPcGVuU3RhdGUhPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUQpe3RoaXMuX2FwcGx5UG9zaXRpb24odGhpcy5fb1Bvc2l0aW9uKTt0aGlzLl9vQmxpbmRMYXllciYmdGhpcy5fb0JsaW5kTGF5ZXIudXBkYXRlKHRoaXMuXyQoKSl9cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLl9jcmVhdGVQb3NpdGlvbj1mdW5jdGlvbihtLGIsbyxjLGQpe3ZhciBuPWZhbHNlO2lmKG0mJihtLmluZGV4T2YoIisiKT49MHx8bS5pbmRleE9mKCItIik+PTApKXtuPXRydWU7aWYoYyYmYyE9IjAgMCIpe3Euc2FwLmxvZy53YXJuaW5nKCJvZmZzZXQgdXNlZCBpbiBteSBhbmQgaW4gb2Zmc2V0LCB0aGUgb2Zmc2V0IHZhbHVlIHdpbGwgYmUgaWdub3JlZCIsInNhcC51aS5jb3JlLlBvcHVwIiwic2V0UG9zaXRpb24iKX1jPW51bGx9dmFyIHA9cS5leHRlbmQoe30sdGhpcy5fb0RlZmF1bHRQb3NpdGlvbix7Im15IjptfHx0aGlzLl9vRGVmYXVsdFBvc2l0aW9uLm15LCJhdCI6Ynx8dGhpcy5fb0RlZmF1bHRQb3NpdGlvbi5hdCwib2YiOm8sIm9mZnNldCI6YywiY29sbGlzaW9uIjpkfSk7aWYoIXEudWkudmVyc2lvbil7aWYoYS5fYk5ld09mZnNldD09bnVsbCl7YS5fYk5ld09mZnNldD10cnVlO2lmKCEoc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbj09OCYmcS5zYXAuVmVyc2lvbihxKCkuanF1ZXJ5KS5jb21wYXJlVG8oIjEuOC4xIik8MCkpe3ZhciBEPXEoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpO0QucG9zaXRpb24oe29mOndpbmRvdyx1c2luZzpmdW5jdGlvbihmLGcpe2EuX2JOZXdPZmZzZXQ9KGchPT11bmRlZmluZWQpfX0pfX19aWYoYS5fYk5ld09mZnNldHx8cS5zYXAuVmVyc2lvbihxLnVpLnZlcnNpb24pLmNvbXBhcmVUbygiMS44LjIzIik+MCl7aWYoYyYmYyE9IjAgMCIpe3ZhciBlPXAubXkuc3BsaXQoIiAiKTt2YXIgTz1jLnNwbGl0KCIgIik7dmFyIHM9W3BhcnNlSW50KE9bMF0pPDA/IiI6IisiLHBhcnNlSW50KE9bMV0pPDA/IiI6IisiXTtwLm15PWVbMF0rc1swXStPWzBdKyIgIitlWzFdK3NbMV0rT1sxXTtwLm9mZnNldD1udWxsfX1lbHNlIGlmKG4pe3ZhciBlPXAubXkuc3BsaXQoIiAiKTt2YXIgTz1bIiIsIiJdO3ZhciBpPWVbMF0uaW5kZXhPZigiKyIpO2lmKGk8MCl7aT1lWzBdLmluZGV4T2YoIi0iKX1pZihpPj0wKXtPWzBdPWVbMF0uc2xpY2UoaSk7ZVswXT1lWzBdLnNsaWNlKDAsaSl9aT1lWzFdLmluZGV4T2YoIisiKTtpZihpPDApe2k9ZVsxXS5pbmRleE9mKCItIil9aWYoaT49MCl7T1sxXT1lWzFdLnNsaWNlKGkpO2VbMV09ZVsxXS5zbGljZSgwLGkpfXAubXk9ZVswXSsiICIrZVsxXTtwLm9mZnNldD1PWzBdKyIgIitPWzFdfXJldHVybiBwfTthLnByb3RvdHlwZS5fZ2V0UG9zaXRpb25PZmZzZXQ9ZnVuY3Rpb24oKXt2YXIgbz1bXTtpZih0aGlzLl9vUG9zaXRpb24ubXkmJih0aGlzLl9vUG9zaXRpb24ubXkuaW5kZXhPZigiKyIpPj0wfHx0aGlzLl9vUG9zaXRpb24ubXkuaW5kZXhPZigiLSIpPj0wKSl7dmFyIG09dGhpcy5fb1Bvc2l0aW9uLm15LnNwbGl0KCIgIik7dmFyIGk9bVswXS5pbmRleE9mKCIrIik7aWYoaTwwKXtpPW1bMF0uaW5kZXhPZigiLSIpfWlmKGk+PTApe29bMF09bVswXS5zbGljZShpKX1pPW1bMV0uaW5kZXhPZigiKyIpO2lmKGk8MCl7aT1tWzFdLmluZGV4T2YoIi0iKX1pZihpPj0wKXtvWzFdPW1bMV0uc2xpY2UoaSl9fWVsc2UgaWYodGhpcy5fb1Bvc2l0aW9uLm9mZnNldCl7bz10aGlzLl9vUG9zaXRpb24ub2Zmc2V0LnNwbGl0KCIgIil9cmV0dXJuIG99O2EucHJvdG90eXBlLl9hcHBseVBvc2l0aW9uPWZ1bmN0aW9uKHApe3ZhciBiPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciAkPXRoaXMuXyQoKTt2YXIgQT1wLmF0O2lmKHR5cGVvZihBKT09PSJzdHJpbmciKXskLmNzcygiZGlzcGxheSIsImJsb2NrIikucG9zaXRpb24odGhpcy5fcmVzb2x2ZVJlZmVyZW5jZSh0aGlzLl9jb252ZXJ0UG9zaXRpb25SVEwocCxiKSkpO3RoaXMuX2ZpeFBvc2l0aW9uaW5nKHAsYil9ZWxzZSBpZihzYXAudWkuY29yZS5DU1NTaXplLmlzVmFsaWQoQS5sZWZ0KSYmc2FwLnVpLmNvcmUuQ1NTU2l6ZS5pc1ZhbGlkKEEudG9wKSl7JC5jc3MoeyJsZWZ0IjpBLmxlZnQsInRvcCI6QS50b3B9KX1lbHNlIGlmKHNhcC51aS5jb3JlLkNTU1NpemUuaXNWYWxpZChBLnJpZ2h0KSYmc2FwLnVpLmNvcmUuQ1NTU2l6ZS5pc1ZhbGlkKEEudG9wKSl7JC5jc3MoeyJyaWdodCI6QS5yaWdodCwidG9wIjpBLnRvcH0pfWVsc2UgaWYodHlwZW9mKEEubGVmdCk9PT0ibnVtYmVyIiYmdHlwZW9mKEEudG9wKT09PSJudW1iZXIiKXt2YXIgZD0kWzBdO2lmKGQmJmQuc3R5bGUucmlnaHQpe3ZhciB3PSQub3V0ZXJXaWR0aCgpOyQuY3NzKHsicmlnaHQiOihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgtKEEubGVmdCt3KSkrInB4IiwidG9wIjpBLnRvcCsicHgifSl9ZWxzZXskLmNzcyh7ImxlZnQiOkEubGVmdCsicHgiLCJ0b3AiOkEudG9wKyJweCJ9KX19dGhpcy5fb0xhc3RQb3NpdGlvbj1wO3RoaXMuX29MYXN0T2ZSZWN0PXRoaXMuX2NhbGNPZlJlY3QocC5vZil9O2EucHJvdG90eXBlLl9jYWxjT2ZSZWN0PWZ1bmN0aW9uKG8pe3ZhciBPPXRoaXMuX2dldE9mRG9tKG8pO2lmKE8pe3JldHVybiBxKE8pLnJlY3QoKX1yZXR1cm4gbnVsbH07YS5wcm90b3R5cGUuX2dldE9mRG9tPWZ1bmN0aW9uKG8pe2lmKChvIGluc3RhbmNlb2YgRXZlbnQpfHwobyBpbnN0YW5jZW9mIHEuRXZlbnQpKXtyZXR1cm4gbnVsbH12YXIgTztpZih0eXBlb2Yobyk9PT0ic3RyaW5nIil7Tz1xLnNhcC5ieUlkKG8pfWVsc2UgaWYobyBpbnN0YW5jZW9mIHEpe089b31lbHNle089cShvIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudD9vLmdldERvbVJlZigpOm8pfXJldHVybiBPWzBdfTthLnByb3RvdHlwZS5fY29udmVydFBvc2l0aW9uUlRMPWZ1bmN0aW9uKHAsYil7dmFyIGY9cS5leHRlbmQoe30scCk7aWYoYil7dmFyIG49ZmFsc2U7aWYoZi5teSYmKGYubXkuaW5kZXhPZigiKyIpPj0wfHxmLm15LmluZGV4T2YoIi0iKT49MCkpe249dHJ1ZX1pZigoZi5vZmZzZXR8fG4pJiYoKGYubXkuaW5kZXhPZigiYmVnaW4iKT4tMSl8fChmLm15LmluZGV4T2YoImVuZCIpPi0xKSkmJigoZi5hdC5pbmRleE9mKCJiZWdpbiIpPi0xKXx8KGYuYXQuaW5kZXhPZigiZW5kIik+LTEpKSl7aWYobil7dmFyIG09Zi5teS5zcGxpdCgiICIpO2lmKG0ubGVuZ3RoPT0yKXtmLm15PSIiO2lmKG1bMF0pe2lmKG1bMF0uaW5kZXhPZigiYmVnaW4iKT4tMXx8bVswXS5pbmRleE9mKCJlbmQiKT4tMSl7aWYobVswXS5pbmRleE9mKCIrIik+LTEpe21bMF09bVswXS5yZXBsYWNlKCIrIiwiLSIpfWVsc2UgaWYobVswXS5pbmRleE9mKCItIik+LTEpe21bMF09bVswXS5yZXBsYWNlKCItIiwiKyIpfX1mLm15PW1bMF19aWYobVsxXSl7aWYobVsxXS5pbmRleE9mKCJiZWdpbiIpPi0xfHxtWzFdLmluZGV4T2YoImVuZCIpPi0xKXtpZihtWzFdLmluZGV4T2YoIisiKT4tMSl7bVsxXT1tWzFdLnJlcGxhY2UoIisiLCItIil9ZWxzZSBpZihtWzFdLmluZGV4T2YoIi0iKT4tMSl7bVsxXT1tWzFdLnJlcGxhY2UoIi0iLCIrIil9fWlmKG1bMF0pe2YubXk9Zi5teSsiICJ9Zi5teT1mLm15K21bMV19fX1lbHNle2Yub2Zmc2V0PXRoaXMuX21pcnJvck9mZnNldChmLm9mZnNldCl9fWYubXk9Zi5teS5yZXBsYWNlKCJiZWdpbiIsInJpZ2h0IikucmVwbGFjZSgiZW5kIiwibGVmdCIpO2YuYXQ9Zi5hdC5yZXBsYWNlKCJiZWdpbiIsInJpZ2h0IikucmVwbGFjZSgiZW5kIiwibGVmdCIpfWVsc2V7Zi5teT1mLm15LnJlcGxhY2UoImVuZCIsInJpZ2h0IikucmVwbGFjZSgiYmVnaW4iLCJsZWZ0Iik7Zi5hdD1mLmF0LnJlcGxhY2UoImVuZCIsInJpZ2h0IikucmVwbGFjZSgiYmVnaW4iLCJsZWZ0Iil9cmV0dXJuIGZ9O2EucHJvdG90eXBlLl9taXJyb3JPZmZzZXQ9ZnVuY3Rpb24obyl7dmFyIE89cS50cmltKG8pLnNwbGl0KC9ccy8pO3ZhciBwPXBhcnNlSW50KE9bMF0sMTApO3JldHVybigtcCkrIiAiK09bTy5sZW5ndGgtMV19O2EucHJvdG90eXBlLl9maXhQb3NpdGlvbmluZz1mdW5jdGlvbihwLGIpe3ZhciBtPXAubXk7aWYodHlwZW9mKG0pPT09InN0cmluZyIpe2lmKGImJigobS5pbmRleE9mKCJyaWdodCIpPi0xKXx8KG0uaW5kZXhPZigiYmVnaW4iKT4tMSl8fChtLmluZGV4T2YoImNlbnRlciIpPi0xKSkpe3ZhciAkPXRoaXMuXyQoKTt2YXIgYz1xKHdpbmRvdykud2lkdGgoKS0kLm91dGVyV2lkdGgoKS0kLm9mZnNldCgpLmxlZnQ7JC5jc3MoeyJyaWdodCI6YysicHgiLCJsZWZ0IjoiIn0pfWVsc2UgaWYoKG0uaW5kZXhPZigicmlnaHQiKT4tMSl8fChtLmluZGV4T2YoImVuZCIpPi0xKSl7dmFyICQ9dGhpcy5fJCgpO3ZhciBjPXEod2luZG93KS53aWR0aCgpLSQub3V0ZXJXaWR0aCgpLSQub2Zmc2V0KCkubGVmdDskLmNzcyh7InJpZ2h0IjpjKyJweCIsImxlZnQiOiIifSl9fX07YS5wcm90b3R5cGUuX3Jlc29sdmVSZWZlcmVuY2U9ZnVuY3Rpb24ocCl7dmFyIG89cDtpZihwLm9mIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudCl7bz1xLmV4dGVuZCh7fSxwLHtvZjpwLm9mLmdldERvbVJlZigpfSl9cmV0dXJuIG99O2EucHJvdG90eXBlLnNldFNoYWRvdz1mdW5jdGlvbihzKXt0aGlzLl9iU2hhZG93PXM7aWYodGhpcy5lT3BlblN0YXRlIT1zYXAudWkuY29yZS5PcGVuU3RhdGUuQ0xPU0VEKXt0aGlzLl8kKCkudG9nZ2xlQ2xhc3MoInNhcFVpU2hkIixzKX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuc2V0TW9kYWw9ZnVuY3Rpb24obSxzKXt2YXIgbz10aGlzLl9iTW9kYWw7dGhpcy5fYk1vZGFsPW07dGhpcy5fc01vZGFsQ1NTQ2xhc3M9cztpZih0aGlzLmlzT3BlbigpKXtpZihvIT09bSl7aWYobSl7dGhpcy5fc2hvd0Jsb2NrTGF5ZXIoKX1lbHNle3RoaXMuX2hpZGVCbG9ja0xheWVyKCl9aWYodGhpcy50b3VjaEVuYWJsZWQmJnRoaXMuX2JBdXRvQ2xvc2Upe2lmKCFtKXtxKGRvY3VtZW50KS5vbigidG91Y2hzdGFydCBtb3VzZWRvd24iLHEucHJveHkodGhpcy5fZkF1dG9DbG9zZUhhbmRsZXIsdGhpcykpfWVsc2V7cShkb2N1bWVudCkub2ZmKCJ0b3VjaHN0YXJ0IG1vdXNlZG93biIsdGhpcy5fZkF1dG9DbG9zZUhhbmRsZXIpfX19fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5nZXRNb2RhbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iTW9kYWx9O2EucHJvdG90eXBlLnNldEF1dG9DbG9zZT1mdW5jdGlvbihBKXtpZih0aGlzLnRvdWNoRW5hYmxlZCYmdGhpcy5pc09wZW4oKSYmdGhpcy5fYkF1dG9DbG9zZSE9PUEpe2lmKCF0aGlzLl9iTW9kYWwpe2lmKEEpe3EoZG9jdW1lbnQpLm9uKCJ0b3VjaHN0YXJ0IG1vdXNlZG93biIscS5wcm94eSh0aGlzLl9mQXV0b0Nsb3NlSGFuZGxlcix0aGlzKSl9ZWxzZXtxKGRvY3VtZW50KS5vZmYoInRvdWNoc3RhcnQgbW91c2Vkb3duIix0aGlzLl9mQXV0b0Nsb3NlSGFuZGxlcil9fX10aGlzLl9iQXV0b0Nsb3NlPUE7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnNldEF1dG9DbG9zZUFyZWFzPWZ1bmN0aW9uKEEpe2Zvcih2YXIgaT0wLGw9QS5sZW5ndGg7aTxsO2krKyl7dmFyIHM9IiI7aWYoQVtpXWluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudCl7cz1BW2ldLmdldElkKCl9ZWxzZSBpZih0eXBlb2YgQVtpXT09PSJvYmplY3QiKXtzPUFbaV0uaWR9ZWxzZSBpZih0eXBlb2YgQVtpXT09PSJzdHJpbmciKXtzPUFbaV19aWYocS5pbkFycmF5KHMsdGhpcy5nZXRDaGlsZFBvcHVwcygpKT09PS0xKXt0aGlzLmFkZENoaWxkUG9wdXAocyl9fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5zZXRBbmltYXRpb25zPWZ1bmN0aW9uKG8sYyl7aWYobyYmKHR5cGVvZihvKT09ImZ1bmN0aW9uIikpe3RoaXMuX2FuaW1hdGlvbnMub3Blbj1vfWlmKGMmJih0eXBlb2YoYyk9PSJmdW5jdGlvbiIpKXt0aGlzLl9hbmltYXRpb25zLmNsb3NlPWN9cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnNldER1cmF0aW9ucz1mdW5jdGlvbihvLGMpe2lmKChvPjApfHwobz09PTApKXt0aGlzLl9kdXJhdGlvbnMub3Blbj1vfWlmKChjPjApfHwoYz09PTApKXt0aGlzLl9kdXJhdGlvbnMuY2xvc2U9Y31yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuc2V0Rm9sbG93T2Y9ZnVuY3Rpb24oZil7dmFyIHU9ZmFsc2U7YS5Eb2NrVHJpZ2dlci5yZW1vdmVMaXN0ZW5lcihhLmNoZWNrRG9ja2luZyx0aGlzKTtpZih0eXBlb2YoZik9PT0iZnVuY3Rpb24iKXt0aGlzLl9iRm9sbG93T2Y9dHJ1ZTt0aGlzLl9mb2xsb3dPZkhhbmRsZXI9Zjt1PXRydWV9ZWxzZSBpZih0eXBlb2YoZik9PT0iYm9vbGVhbiIpe3RoaXMuX2JGb2xsb3dPZj1mO2lmKCF0aGlzLl9iRm9sbG93T2Ype3RoaXMuX2ZvbGxvd09mSGFuZGxlcj1udWxsfXU9Zn1lbHNle3RoaXMuX2JGb2xsb3dPZj1mYWxzZTt0aGlzLl9mb2xsb3dPZkhhbmRsZXI9bnVsbDtpZihmIT1udWxsKXtxLnNhcC5sb2cuZXJyb3IoIlRyeWluZyB0byBzZXQgYW4gaW52YWxpZCB0eXBlIHRvICdmb2xsb3dPZjogIitmKX19aWYodSYmdGhpcy5fb0xhc3RQb3NpdGlvbil7dGhpcy5fb0xhc3RPZlJlY3Q9dGhpcy5fY2FsY09mUmVjdCh0aGlzLl9vTGFzdFBvc2l0aW9uLm9mKX1pZih0aGlzLl9iRm9sbG93T2YmJnRoaXMuZ2V0T3BlblN0YXRlKCk9PT1zYXAudWkuY29yZS5PcGVuU3RhdGUuT1BFTil7YS5Eb2NrVHJpZ2dlci5hZGRMaXN0ZW5lcihhLmNoZWNrRG9ja2luZyx0aGlzKX19O2EucHJvdG90eXBlLmdldEF1dG9DbG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iQXV0b0Nsb3NlfTthLnByb3RvdHlwZS5nZXRGb2xsb3dPZj1mdW5jdGlvbigpe2lmKHRoaXMuX2JGb2xsb3dPZil7cmV0dXJuIHR5cGVvZih0aGlzLl9mb2xsb3dPZkhhbmRsZXIpPT09ImZ1bmN0aW9uIj90aGlzLl9mb2xsb3dPZkhhbmRsZXI6dHJ1ZX1yZXR1cm4gZmFsc2V9O2EucHJvdG90eXBlLmlzT3Blbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJPcGVufTthLnByb3RvdHlwZS5nZXRPcGVuU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lT3BlblN0YXRlfTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7aWYodGhpcy5fcmVzaXplTGlzdGVuZXJJZCl7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3Jlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3Jlc2l6ZUxpc3RlbmVySWQ9bnVsbH10aGlzLmNsb3NlKCk7dGhpcy5vQ29udGVudD1udWxsO2lmKHRoaXMuX2JGb2xsb3dPZil7dGhpcy5zZXRGb2xsb3dPZihudWxsKX1pZih0aGlzLl9iRXZlbnRCdXNFdmVudHNSZWdpc3RlcmVkKXt0aGlzLl91bnJlZ2lzdGVyRXZlbnRCdXNFdmVudHMoKX19O2EucHJvdG90eXBlLmV4aXQ9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5fbUZvY3VzRXZlbnRzfTthLnByb3RvdHlwZS5fYWRkRm9jdXNFdmVudExpc3RlbmVycz1mdW5jdGlvbihjLGUsRSl7aWYoIXRoaXMuZkV2ZW50SGFuZGxlcil7dGhpcy5mRXZlbnRIYW5kbGVyPXEucHJveHkodGhpcy5vbkZvY3VzRXZlbnQsdGhpcyl9dmFyIHA9dGhpcy5fJCgpO3ZhciBiPXRoaXMuZ2V0Q2hpbGRQb3B1cHMoKTtpZihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyJiYhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpO3AuZ2V0KDApLmFkZEV2ZW50TGlzdGVuZXIoImJsdXIiLHRoaXMuZkV2ZW50SGFuZGxlcix0cnVlKTtmb3IodmFyIGk9MCxsPWIubGVuZ3RoO2k8bDtpKyspe3ZhciBkPXEuc2FwLmRvbUJ5SWQoYltpXSk7aWYoZCl7ZC5hZGRFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSl9fX1lbHNle3EoZG9jdW1lbnQpLmJpbmQoImFjdGl2YXRlLiIrdGhpcy5fcG9wdXBVSUQsdGhpcy5mRXZlbnRIYW5kbGVyKTtwLmJpbmQoImRlYWN0aXZhdGUuIit0aGlzLl9wb3B1cFVJRCx0aGlzLmZFdmVudEhhbmRsZXIpO2Zvcih2YXIgaT0wLGw9Yi5sZW5ndGg7aTxsO2krKyl7dmFyIGQ9cS5zYXAuZG9tQnlJZChiW2ldKTtpZihkKXtxKGQpLmJpbmQoImRlYWN0aXZhdGUuIit0aGlzLl9wb3B1cFVJRCx0aGlzLmZFdmVudEhhbmRsZXIpfX19fTthLnByb3RvdHlwZS5fcmVtb3ZlRm9jdXNFdmVudExpc3RlbmVycz1mdW5jdGlvbihjLGUsRSl7dmFyIHA9dGhpcy5fJChmYWxzZSx0cnVlKTtpZighcC5sZW5ndGgpe3JldHVybn12YXIgYj10aGlzLmdldENoaWxkUG9wdXBzKCk7aWYoZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciYmIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuZkV2ZW50SGFuZGxlcix0cnVlKTtwLmdldCgwKS5yZW1vdmVFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSk7Zm9yKHZhciBpPTAsbD1iLmxlbmd0aDtpPGw7aSsrKXt2YXIgZD1xLnNhcC5kb21CeUlkKGJbaV0pO2lmKGQpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpfXRoaXMuY2xvc2VQb3B1cChiW2ldKX19ZWxzZXtxKGRvY3VtZW50KS51bmJpbmQoImFjdGl2YXRlLiIrdGhpcy5fcG9wdXBVSUQsdGhpcy5mRXZlbnRIYW5kbGVyKTtwLnVuYmluZCgiZGVhY3RpdmF0ZS4iK3RoaXMuX3BvcHVwVUlELHRoaXMuZkV2ZW50SGFuZGxlcik7Zm9yKHZhciBpPTAsbD1iLmxlbmd0aDtpPGw7aSsrKXt2YXIgZD1xLnNhcC5kb21CeUlkKGJbaV0pO2lmKGQpe3EoZCkudW5iaW5kKCJkZWFjdGl2YXRlLiIrdGhpcy5fcG9wdXBVSUQsdGhpcy5mRXZlbnRIYW5kbGVyKX19fXRoaXMuZkV2ZW50SGFuZGxlcj1udWxsfTthLnByb3RvdHlwZS5fcmVnaXN0ZXJFdmVudEJ1c0V2ZW50cz1mdW5jdGlvbihjLGUsRSl7dmFyIHQ9dGhpcztxLmVhY2godC5fbUZvY3VzRXZlbnRzLGZ1bmN0aW9uKHMsbCl7c2FwLnVpLmdldENvcmUoKS5nZXRFdmVudEJ1cygpLnN1YnNjcmliZSgic2FwLnVpIixzLGwsdCl9KTt0aGlzLl9iRXZlbnRCdXNFdmVudHNSZWdpc3RlcmVkPXRydWV9O2EucHJvdG90eXBlLl91bnJlZ2lzdGVyRXZlbnRCdXNFdmVudHM9ZnVuY3Rpb24oYyxlLEUpe3ZhciB0PXRoaXM7cS5lYWNoKHQuX21Gb2N1c0V2ZW50cyxmdW5jdGlvbihzLGwpe3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS51bnN1YnNjcmliZSgic2FwLnVpIixzLGwsdCl9KTtkZWxldGUgdGhpcy5fYkV2ZW50QnVzRXZlbnRzUmVnaXN0ZXJlZH07YS5wcm90b3R5cGUuX2FkZEZvY3VzYWJsZUFyZWE9ZnVuY3Rpb24oYyxlLEUpe3ZhciBwPXRoaXMuX3BvcHVwVUlEO2lmKHEuaW5BcnJheShFLmlkLHRoaXMuZ2V0Q2hpbGRQb3B1cHMoKSk9PT0tMSl7dGhpcy5hZGRDaGlsZFBvcHVwKEUuaWQpfXZhciAkPXEoJ1tkYXRhLXNhcC11aS1wb3B1cD0iJytFLmlkKyciXScpO2lmKCQubGVuZ3RoPjApe3ZhciBvPWZ1bmN0aW9uKGIpeyQub2ZmKCJibHVyIixvKTt2YXIgcz0ic2FwLnVpLmNvcmUuUG9wdXAub25Gb2N1c0V2ZW50LSIrcDtzYXAudWkuZ2V0Q29yZSgpLmdldEV2ZW50QnVzKCkucHVibGlzaCgic2FwLnVpIixzLGIpfTskLm9uKCJibHVyIixvKX19O2EucHJvdG90eXBlLl9yZW1vdmVGb2N1c2FibGVBcmVhPWZ1bmN0aW9uKGMsZSxFKXt0aGlzLnJlbW92ZUNoaWxkUG9wdXAoRS5pZCl9O2EucHJvdG90eXBlLl9jbG9zZVBvcHVwPWZ1bmN0aW9uKGMsZSxFKXt0aGlzLmNsb3NlKHR5cGVvZiB0aGlzLl9kdXJhdGlvbnMuY2xvc2U9PT0ic3RyaW5nIj8wOnRoaXMuX2R1cmF0aW9ucy5jbG9zZSl9O2EucHJvdG90eXBlLl9zZXRJZGVudGl0eT1mdW5jdGlvbigkKXtpZih0eXBlb2YgJD09PSJvYmplY3QiKXskLmF0dHIoImRhdGEtc2FwLXVpLXBvcHVwIix0aGlzLl9wb3B1cFVJRCl9ZWxzZXtxLnNhcC5sb2cud2FybmluZygiSW5jb3JyZWN0IERvbVJlZi10eXBlIGZvciAnc2V0SWRlbnRpdHknOiAiKyQsdGhpcyk7cmV0dXJufWlmKCF0aGlzLl9iRXZlbnRCdXNFdmVudHNSZWdpc3RlcmVkKXt0aGlzLl9yZWdpc3RlckV2ZW50QnVzRXZlbnRzKCl9fTthLnByb3RvdHlwZS5fJD1mdW5jdGlvbihmLGcpe3ZhciBjO2lmKHRoaXMub0NvbnRlbnQgaW5zdGFuY2VvZiBDKXtjPXRoaXMub0NvbnRlbnQuJCgpO2lmKGZ8fChjLmxlbmd0aD09PTAmJiFnKSl7cS5zYXAubG9nLmluZm8oIlJlbmRlcmluZyBvZiBwb3B1cCBjb250ZW50OiAiK3RoaXMub0NvbnRlbnQuZ2V0SWQoKSk7aWYoYy5sZW5ndGg+MCl7Ui5wcmVzZXJ2ZUNvbnRlbnQoY1swXSx0cnVlLGZhbHNlKX1zYXAudWkuZ2V0Q29yZSgpLmdldFJlbmRlck1hbmFnZXIoKS5yZW5kZXIodGhpcy5vQ29udGVudCxzYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKSk7Yz10aGlzLm9Db250ZW50LiQoKX19ZWxzZSBpZih0aGlzLm9Db250ZW50IGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudCl7Yz10aGlzLm9Db250ZW50LiQoKX1lbHNle2M9cSh0aGlzLm9Db250ZW50KX10aGlzLl9zZXRJZGVudGl0eShjKTtyZXR1cm4gY307YS5wcm90b3R5cGUuX3Nob3dCbG9ja0xheWVyPWZ1bmN0aW9uKCl7dmFyIGI9cSgiI3NhcC11aS1ibG9ja2xheWVyLXBvcHVwIiksYz0ic2FwVWlCTHkiKyh0aGlzLl9zTW9kYWxDU1NDbGFzcz8iICIrdGhpcy5fc01vZGFsQ1NTQ2xhc3M6IiIpO2lmKGIubGVuZ3RoPT09MCl7Yj1xKCc8ZGl2IGlkPSJzYXAtdWktYmxvY2tsYXllci1wb3B1cCIgdGFiaW5kZXg9IjAiIGNsYXNzPSInK2MrJyI+PC9kaXY+Jyk7Yi5hcHBlbmRUbyhzYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKSl9ZWxzZXtiLnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoYyl9YS5ibFN0YWNrLnB1c2godGhpcy5faVpJbmRleC0yKTtiLmNzcyh7InotaW5kZXgiOnRoaXMuX2laSW5kZXgtMiwidmlzaWJpbGl0eSI6InZpc2libGUifSkuc2hvdygpO3EoImh0bWwiKS5hZGRDbGFzcygic2FwVWlCTHlCYWNrIil9O2EucHJvdG90eXBlLl9oaWRlQmxvY2tMYXllcj1mdW5jdGlvbigpe2EuYmxTdGFjay5wb3AoKTtpZihhLmJsU3RhY2subGVuZ3RoPjApe3EoIiNzYXAtdWktYmxvY2tsYXllci1wb3B1cCIpLmNzcyh7InotaW5kZXgiOmEuYmxTdGFja1thLmJsU3RhY2subGVuZ3RoLTFdLCJ2aXNpYmlsaXR5IjoidmlzaWJsZSJ9KS5zaG93KCl9ZWxzZXtxKCIjc2FwLXVpLWJsb2NrbGF5ZXItcG9wdXAiKS5jc3MoInZpc2liaWxpdHkiLCJoaWRkZW4iKS5oaWRlKCk7cSgiaHRtbCIpLnJlbW92ZUNsYXNzKCJzYXBVaUJMeUJhY2siKX19O2EuRG9ja1RyaWdnZXI9bmV3IEkoMjAwKTt2YXIgcj1mdW5jdGlvbihvLGIpe2lmKG8ubGVmdCE9Yi5sZWZ0fHxvLnRvcCE9Yi50b3B8fG8ud2lkdGghPWIud2lkdGh8fG8uaGVpZ2h0IT1iLmhlaWdodCl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfTthLmNoZWNrRG9ja2luZz1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0T3BlblN0YXRlKCk9PT1zYXAudWkuY29yZS5PcGVuU3RhdGUuT1BFTil7dmFyIGM9dGhpcy5fZ2V0T2ZEb20odGhpcy5fb0xhc3RQb3NpdGlvbi5vZiksbz1xKGMpLnJlY3QoKTtpZighbyl7dGhpcy5jbG9zZSgpO3JldHVybn1pZighcS5zYXAuY29udGFpbnNPckVxdWFscyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsYykpe2lmKGMuaWQmJmMuaWQhPT0iIil7dmFyIG49cS5zYXAuZG9tQnlJZChjLmlkKTt2YXIgTj1xKG4pLnJlY3QoKTtpZihOJiYhcihvLE4pKXtvPU47ZGVsZXRlIHRoaXMuX29MYXN0UG9zaXRpb24ub2Y7dGhpcy5fb0xhc3RQb3NpdGlvbi5vZj1ufX19aWYodGhpcy5fb0xhc3RPZlJlY3Qpe2lmKCFyKHRoaXMuX29MYXN0T2ZSZWN0LG8pKXtpZih0aGlzLl9mb2xsb3dPZkhhbmRsZXIpe3ZhciBsPXEuZXh0ZW5kKHRydWUse30sdGhpcy5fb0xhc3RQb3NpdGlvbiksTD1xLmV4dGVuZCh0cnVlLHt9LHRoaXMuX29MYXN0T2ZSZWN0KTt0aGlzLl9mb2xsb3dPZkhhbmRsZXIoe2xhc3RQb3NpdGlvbjpsLGxhc3RPZlJlY3Q6TCxjdXJyZW50T2ZSZWN0Om99KX1lbHNle3RoaXMuX2FwcGx5UG9zaXRpb24odGhpcy5fb0xhc3RQb3NpdGlvbil9fX19fTthLnByb3RvdHlwZS5vbnRvdWNoc3RhcnQ9ZnVuY3Rpb24oZSl7dGhpcy5vbm1vdXNlZG93bihlLHRydWUpO3RoaXMuX2JNb3VzZWRvd25DYWxsZWQ9dHJ1ZX07YS5wcm90b3R5cGUub25tb3VzZWRvd249ZnVuY3Rpb24oZSxzKXtpZih0aGlzLl9iTW91c2Vkb3duQ2FsbGVkJiYhcyl7dGhpcy5fYk1vdXNlZG93bkNhbGxlZD1mYWxzZTtyZXR1cm59aWYodGhpcy5faVpJbmRleD09PXRoaXMuZ2V0TGFzdFpJbmRleCgpfHx0aGlzLmdldE1vZGFsKCkpe3JldHVybn10aGlzLl9pbmNyZWFzZU15WkluZGV4KCIiLCJtb3VzZWRvd24iLGUpfTthLnByb3RvdHlwZS5faW5jcmVhc2VNeVpJbmRleD1mdW5jdGlvbihjLGUsRSl7dmFyIHA9dGhpcy5nZXRQYXJlbnRQb3B1cCh0aGlzLl9vTGFzdFBvc2l0aW9uLm9mKTtpZihFLnR5cGUmJkUudHlwZT09PSJtb3VzZWRvd24ifHxFLmlzRnJvbVBhcmVudFBvcHVwfHxwLmxlbmd0aD09PTApe3RoaXMuX2laSW5kZXg9dGhpcy5nZXROZXh0WkluZGV4KCk7dmFyICQ9dGhpcy5fJCgpOyQuY3NzKCJ6LWluZGV4Iix0aGlzLl9pWkluZGV4KTtpZih0aGlzLl9vQmxpbmRMYXllcil7dGhpcy5fb0JsaW5kTGF5ZXIudXBkYXRlKCQsdGhpcy5faVpJbmRleC0xKX1pZighRS50eXBlfHxFLnR5cGUhPSJtb3VzZWRvd24iKXt2YXIgYj10aGlzLmdldENoaWxkUG9wdXBzKCk7Zm9yKHZhciBpPTAsbD1iLmxlbmd0aDtpPGw7aSsrKXt0aGlzLmluY3JlYXNlWkluZGV4KGJbaV0sdHJ1ZSl9fX1lbHNlIGlmKHAubGVuZ3RoPjApe3RoaXMuaW5jcmVhc2VaSW5kZXgocShwLmdldCgwKSkuYXR0cigiZGF0YS1zYXAtdWktcG9wdXAiKSxmYWxzZSl9fTthLnByb3RvdHlwZS5vbkFmdGVyUmVuZGVyaW5nPWZ1bmN0aW9uKGUpe3ZhciAkPXRoaXMuZ2V0Q29udGVudCgpLiQoKTskLnRvZ2dsZUNsYXNzKCJzYXBVaVNoZCIsdGhpcy5fYlNoYWRvdyk7JC5jc3MoInBvc2l0aW9uIiwiYWJzb2x1dGUiKTt0aGlzLl9zZXRJZGVudGl0eSgkKTt2YXIgYj0kWzBdO3ZhciBsPWIuc3R5bGUubGVmdDt2YXIgYz1iLnN0eWxlLnJpZ2h0O3ZhciB0PWIuc3R5bGUudG9wO3ZhciBkPWIuc3R5bGUuYm90dG9tO2lmKCEobCYmbCE9ImF1dG8ifHxjJiZjIT0iYXV0byJ8fHQmJnQhPSJhdXRvInx8ZCYmZCE9ImF1dG8iKSl7cS5zYXAubG9nLmRlYnVnKCJyZXBvc2l0aW9uIHBvcHVwIGNvbnRlbnQgIiskLmF0dHIoImlkIikrIiBhdCAiKyh3aW5kb3cuSlNPTj9KU09OLnN0cmluZ2lmeSh0aGlzLl9vTGFzdFBvc2l0aW9uLmF0KTpTdHJpbmcodGhpcy5fb0xhc3RQb3NpdGlvbi5hdCkpKTt0aGlzLl9hcHBseVBvc2l0aW9uKHRoaXMuX29MYXN0UG9zaXRpb24pfSQuc2hvdygpLmNzcyh7InZpc2liaWxpdHkiOiJ2aXNpYmxlIiwiei1pbmRleCI6dGhpcy5faVpJbmRleH0pO2lmKHRoaXMuX29CbGluZExheWVyKXt0aGlzLl9yZXNpemVMaXN0ZW5lcklkPXNhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIucmVnaXN0ZXIodGhpcy5fJCgpLmdldCgwKSxxLnByb3h5KHRoaXMub25yZXNpemUsdGhpcykpfWlmKHRoaXMuaXNPcGVuKCkmJih0aGlzLmdldE1vZGFsKCl8fHRoaXMuZ2V0QXV0b0Nsb3NlKCkpKXt0aGlzLl9hZGRGb2N1c0V2ZW50TGlzdGVuZXJzKCl9fTthLnByb3RvdHlwZS5vbkJlZm9yZVJlbmRlcmluZz1mdW5jdGlvbihlKXtpZih0aGlzLl9yZXNpemVMaXN0ZW5lcklkKXtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXIodGhpcy5fcmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fcmVzaXplTGlzdGVuZXJJZD1udWxsfWlmKHRoaXMuaXNPcGVuKCkmJih0aGlzLmdldE1vZGFsKCl8fHRoaXMuZ2V0QXV0b0Nsb3NlKCkpKXt0aGlzLl9yZW1vdmVGb2N1c0V2ZW50TGlzdGVuZXJzKCl9fTthLnByb3RvdHlwZS5vbnJlc2l6ZT1mdW5jdGlvbihlKXtpZih0aGlzLmVPcGVuU3RhdGUhPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUQmJnRoaXMuX29CbGluZExheWVyKXt2YXIgdD10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0Ll91cGRhdGVCbGluZExheWVyKCl9LDApfX07YS5wcm90b3R5cGUuX3VwZGF0ZUJsaW5kTGF5ZXI9ZnVuY3Rpb24oKXtpZih0aGlzLmVPcGVuU3RhdGUhPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUQmJnRoaXMuX29CbGluZExheWVyKXt0aGlzLl9vQmxpbmRMYXllci51cGRhdGUodGhpcy5fJCgpKX19O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuU2Nyb2xsQmFyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuU2Nyb2xsQmFyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvU2Nyb2xsQmFyIixbJy4vbGlicmFyeScsJy4vQ29udHJvbCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkNvbnRyb2wuZXh0ZW5kKCJzYXAudWkuY29yZS5TY3JvbGxCYXIiLHttZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImJpbmQiLCJ1bmJpbmQiLCJwYWdlVXAiLCJwYWdlRG93biJdLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsidmVydGljYWwiOnt0eXBlOiJib29sZWFuIixncm91cDoiQmVoYXZpb3IiLGRlZmF1bHRWYWx1ZTp0cnVlfSwic2Nyb2xsUG9zaXRpb24iOnt0eXBlOiJpbnQiLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOm51bGx9LCJzaXplIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJjb250ZW50U2l6ZSI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTpudWxsfSwic3RlcHMiOnt0eXBlOiJpbnQiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTpudWxsfX0sZXZlbnRzOnsic2Nyb2xsIjp7fX19fSk7c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLk1fRVZFTlRTPXsnc2Nyb2xsJzonc2Nyb2xsJ307c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5fJFNjcm9sbERvbVJlZj1udWxsO3RoaXMuX2lPbGRTY3JvbGxQb3M9MDt0aGlzLl9pT2xkU3RlcD0wO3RoaXMuX2JTY3JvbGxQb3NJc0NoZWNrZWQ9ZmFsc2U7dGhpcy5fYlJUTD1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTt0aGlzLl9iU3VwcHJlc3NTY3JvbGw9ZmFsc2U7dGhpcy5faU1heENvbnRlbnREaXZTaXplPTEwMDAwMDA7aWYoalF1ZXJ5LnNhcC50b3VjaEV2ZW50TW9kZT09PSJPTiIpe2pRdWVyeS5zYXAucmVxdWlyZSgic2FwLnVpLnRoaXJkcGFydHkuenluZ2FzY3JvbGwiKTt0aGlzLl9pTGFzdFRvdWNoU2Nyb2xsZXJQb3NpdGlvbj1udWxsO3RoaXMuX2lUb3VjaFN0ZXBUcmVzaG9sZD0yNDt0aGlzLl9iU2tpcFRvdWNoSGFuZGxpbmc9ZmFsc2U7dGhpcy5fb1RvdWNoU2Nyb2xsZXI9bmV3IHdpbmRvdy5TY3JvbGxlcihqUXVlcnkucHJveHkodGhpcy5faGFuZGxlVG91Y2hTY3JvbGwsdGhpcykse2JvdW5jaW5nOmZhbHNlfSl9fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dGhpcy4kKCJzYiIpLnVuYmluZCgic2Nyb2xsIix0aGlzLm9uc2Nyb2xsKX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5vbkFmdGVyUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dGhpcy5faVN0ZXBzPXRoaXMuZ2V0U3RlcHMoKTt2YXIgYz10aGlzLmdldENvbnRlbnRTaXplKCk7dGhpcy5fYlN0ZXBNb2RlPSFjO3ZhciBzPXRoaXMuZ2V0U2l6ZSgpO2lmKGpRdWVyeS5zYXAuZW5kc1dpdGgocywicHgiKSl7cz1zLnN1YnN0cigwLHMubGVuZ3RoLTIpfWVsc2V7cz10aGlzLmdldFZlcnRpY2FsKCk/dGhpcy4kKCkuaGVpZ2h0KCk6dGhpcy4kKCkud2lkdGgoKX12YXIgYT1udWxsO3ZhciAkPXRoaXMuJCgiZmZzaXplIik7aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveCl7YT0kLm91dGVySGVpZ2h0KCl9JC5yZW1vdmUoKTtpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQpe2lmKCFkb2N1bWVudC53aWR0aCl7YT1NYXRoLnJvdW5kKDQwLyh3aW5kb3cub3V0ZXJXaWR0aC9qUXVlcnkoZG9jdW1lbnQpLndpZHRoKCkpKX1lbHNle2E9TWF0aC5yb3VuZCg0MC8oZG9jdW1lbnQud2lkdGgvalF1ZXJ5KGRvY3VtZW50KS53aWR0aCgpKSl9fWlmKHRoaXMuZ2V0VmVydGljYWwoKSl7dGhpcy5faUZhY3Rvcj0hIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94P2E6ISFzYXAudWkuRGV2aWNlLmJyb3dzZXIud2Via2l0P2E6TWF0aC5mbG9vcihzKjAuMTI1KTt0aGlzLl9pRmFjdG9yUGFnZT0hIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94P3MtYTpNYXRoLmZsb29yKHMqMC44NzUpfWVsc2V7dGhpcy5faUZhY3Rvcj0hIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94PzEwOiEhc2FwLnVpLkRldmljZS5icm93c2VyLndlYmtpdD9hOjc7dGhpcy5faUZhY3RvclBhZ2U9ISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveD9NYXRoLmZsb29yKHMqMC44KTohIXNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQ/TWF0aC5mbG9vcihzKjAuODc1KTpzLTE0fXRoaXMuXyRTY3JvbGxEb21SZWY9dGhpcy4kKCJzYiIpO2lmKHRoaXMuX2JTdGVwTW9kZSl7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXt2YXIgUz10aGlzLl9pU3RlcHMqdGhpcy5faUZhY3RvcjtpZihTPnRoaXMuX2lNYXhDb250ZW50RGl2U2l6ZSl7dGhpcy5faUZhY3Rvcj1NYXRoLmNlaWwodGhpcy5faUZhY3Rvci9NYXRoLmNlaWwoUy90aGlzLl9pTWF4Q29udGVudERpdlNpemUpKX12YXIgQz10aGlzLl8kU2Nyb2xsRG9tUmVmLmhlaWdodCgpK3RoaXMuX2lTdGVwcyp0aGlzLl9pRmFjdG9yO3RoaXMuXyRTY3JvbGxEb21SZWYuZmluZCgiZGl2IikuaGVpZ2h0KEMpfWVsc2V7dmFyIEM9dGhpcy5fJFNjcm9sbERvbVJlZi53aWR0aCgpK3RoaXMuX2lTdGVwcyp0aGlzLl9pRmFjdG9yO3RoaXMuXyRTY3JvbGxEb21SZWYuZmluZCgiZGl2Iikud2lkdGgoQyl9fXRoaXMuc2V0Q2hlY2tlZFNjcm9sbFBvc2l0aW9uKHRoaXMuZ2V0U2Nyb2xsUG9zaXRpb24oKT90aGlzLmdldFNjcm9sbFBvc2l0aW9uKCk6MCx0cnVlKTt0aGlzLl8kU2Nyb2xsRG9tUmVmLmJpbmQoInNjcm9sbCIsalF1ZXJ5LnByb3h5KHRoaXMub25zY3JvbGwsdGhpcykpO2lmKGpRdWVyeS5zYXAudG91Y2hFdmVudE1vZGU9PT0iT04iKXt0aGlzLl9iU2tpcFRvdWNoSGFuZGxpbmc9dHJ1ZTt2YXIgbz17d2lkdGg6MCxoZWlnaHQ6MH07b1t0aGlzLmdldFZlcnRpY2FsKCk/ImhlaWdodCI6IndpZHRoIl09dGhpcy5fYlN0ZXBNb2RlPyh0aGlzLmdldFN0ZXBzKCkqdGhpcy5faVRvdWNoU3RlcFRyZXNob2xkKTpwYXJzZUludCh0aGlzLmdldENvbnRlbnRTaXplKCksMTApO3RoaXMuX29Ub3VjaFNjcm9sbGVyLnNldERpbWVuc2lvbnMoMCwwLG8ud2lkdGgsby5oZWlnaHQpO3ZhciBlPXRoaXMuXyRTY3JvbGxEb21SZWYuZ2V0KDApO3ZhciByPWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dGhpcy5fb1RvdWNoU2Nyb2xsZXIuc2V0UG9zaXRpb24oci5sZWZ0K2UuY2xpZW50TGVmdCxyLnRvcCtlLmNsaWVudFRvcCk7dGhpcy5fYlNraXBUb3VjaEhhbmRsaW5nPWZhbHNlfX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5vbm1vdXNld2hlZWw9ZnVuY3Rpb24oZSl7aWYodGhpcy4kKCkuaXMoIjp2aXNpYmxlIikpe3ZhciBvPWUub3JpZ2luYWxFdmVudDt2YXIgdz1vLmRldGFpbD9vLmRldGFpbDpvLndoZWVsRGVsdGEqKC0xKS80MDt2YXIgZj13PjA/dHJ1ZTpmYWxzZTtpZihqUXVlcnkuc2FwLmNvbnRhaW5zT3JFcXVhbHModGhpcy5fJFNjcm9sbERvbVJlZlswXSxlLnRhcmdldCkpe3RoaXMuX2RvU2Nyb2xsKHNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbi5Nb3VzZVdoZWVsLGYpfWVsc2V7dGhpcy5fYk1vdXNlV2hlZWw9dHJ1ZTt2YXIgcD1udWxsO2lmKHRoaXMuX2JTdGVwTW9kZSl7cD13K3RoaXMuX2lPbGRTdGVwfWVsc2V7cD13KnRoaXMuX2lGYWN0b3IrdGhpcy5faU9sZFNjcm9sbFBvc310aGlzLnNldENoZWNrZWRTY3JvbGxQb3NpdGlvbihwLHRydWUpfWUucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpO3JldHVybiBmYWxzZX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUub250b3VjaHN0YXJ0PWZ1bmN0aW9uKGUpe3ZhciB0PWUudG91Y2hlczt2YXIgZj10WzBdO2lmKGYmJmYudGFyZ2V0JiZmLnRhcmdldC50YWdOYW1lLm1hdGNoKC9pbnB1dHx0ZXh0YXJlYXxzZWxlY3QvaSkpe3JldHVybn1pZih0aGlzLl9vVG91Y2hTY3JvbGxlcil7dGhpcy5fb1RvdWNoU2Nyb2xsZXIuZG9Ub3VjaFN0YXJ0KHQsZS50aW1lU3RhbXApfWlmKHQubGVuZ3RoPT0xKXtlLnByZXZlbnREZWZhdWx0KCl9fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLm9udG91Y2htb3ZlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX29Ub3VjaFNjcm9sbGVyKXt0aGlzLl9vVG91Y2hTY3JvbGxlci5kb1RvdWNoTW92ZShlLnRvdWNoZXMsZS50aW1lU3RhbXAsZS5zY2FsZSl9fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLm9udG91Y2hlbmQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5fb1RvdWNoU2Nyb2xsZXIpe3RoaXMuX29Ub3VjaFNjcm9sbGVyLmRvVG91Y2hFbmQoZS50aW1lU3RhbXApfX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5vbnRvdWNoY2FuY2VsPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX29Ub3VjaFNjcm9sbGVyKXt0aGlzLl9vVG91Y2hTY3JvbGxlci5kb1RvdWNoRW5kKGUudGltZVN0YW1wKX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUub25zY3JvbGw9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYlN1cHByZXNzU2Nyb2xsKXt0aGlzLl9iU3VwcHJlc3NTY3JvbGw9ZmFsc2U7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCk7cmV0dXJuIGZhbHNlfXZhciBzPW51bGw7aWYodGhpcy5fJFNjcm9sbERvbVJlZil7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXtzPXRoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsVG9wKCl9ZWxzZXtzPXRoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsTGVmdCgpO2lmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3gmJnRoaXMuX2JSVEwpe3M9TWF0aC5hYnMocyl9ZWxzZSBpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQmJnRoaXMuX2JSVEwpe3ZhciBTPXRoaXMuXyRTY3JvbGxEb21SZWYuZ2V0KDApO3M9Uy5zY3JvbGxXaWR0aC1TLmNsaWVudFdpZHRoLVMuc2Nyb2xsTGVmdH19fXZhciBkPXMtdGhpcy5faU9sZFNjcm9sbFBvczt2YXIgZj1kPjA/dHJ1ZTpmYWxzZTtpZihkPDApe2Q9ZCooLTEpfXZhciBhPXNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbi5EcmFnO2lmKGQ9PXRoaXMuX2lGYWN0b3Ipe2E9c2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uLlN0ZXB9ZWxzZSBpZihkPT10aGlzLl9pRmFjdG9yUGFnZSl7YT1zYXAudWkuY29yZS5TY3JvbGxCYXJBY3Rpb24uUGFnZX1lbHNlIGlmKHRoaXMuX2JNb3VzZVdoZWVsKXthPXNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbi5Nb3VzZVdoZWVsfXRoaXMuX2RvU2Nyb2xsKGEsZik7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCk7cmV0dXJuIGZhbHNlfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLl9oYW5kbGVUb3VjaFNjcm9sbD1mdW5jdGlvbihsLHQseil7aWYodGhpcy5fYlNraXBUb3VjaEhhbmRsaW5nKXtyZXR1cm59dmFyIHY9dGhpcy5nZXRWZXJ0aWNhbCgpP3Q6bDtpZih0aGlzLl9iU3RlcE1vZGUpe3ZhciBwPU1hdGgubWF4KE1hdGgucm91bmQodi90aGlzLl9pVG91Y2hTdGVwVHJlc2hvbGQpLDApfWVsc2V7dmFyIHA9TWF0aC5yb3VuZCh2KX1pZih0aGlzLl9pTGFzdFRvdWNoU2Nyb2xsZXJQb3NpdGlvbiE9PXApe3RoaXMuX2lMYXN0VG91Y2hTY3JvbGxlclBvc2l0aW9uPXA7dGhpcy5zZXRDaGVja2VkU2Nyb2xsUG9zaXRpb24ocCx0cnVlKTt0aGlzLmZpcmVTY3JvbGwoKX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUudW5iaW5kPWZ1bmN0aW9uKG8pe2lmKG8pe3RoaXMuXyRPd25lckRvbVJlZj1qUXVlcnkobyk7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXt0aGlzLl8kT3duZXJEb21SZWYudW5iaW5kKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3g/IkRPTU1vdXNlU2Nyb2xsIjoibW91c2V3aGVlbCIsdGhpcy5vbm1vdXNld2hlZWwpfWlmKGpRdWVyeS5zYXAudG91Y2hFdmVudE1vZGU9PT0iT04iKXt0aGlzLl8kT3duZXJEb21SZWYudW5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaHN0YXJ0IiksalF1ZXJ5LnByb3h5KHRoaXMub250b3VjaHN0YXJ0LHRoaXMpKTt0aGlzLl8kT3duZXJEb21SZWYudW5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaG1vdmUiKSxqUXVlcnkucHJveHkodGhpcy5vbnRvdWNobW92ZSx0aGlzKSk7dGhpcy5fJE93bmVyRG9tUmVmLnVuYmluZCh0aGlzLl9nZXRUb3VjaEV2ZW50VHlwZSgidG91Y2hlbmQiKSxqUXVlcnkucHJveHkodGhpcy5vbnRvdWNoZW5kLHRoaXMpKTt0aGlzLl8kT3duZXJEb21SZWYudW5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaGNhbmNsZSIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2hjYW5jbGUsdGhpcykpfX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihvKXtpZihvKXt0aGlzLl8kT3duZXJEb21SZWY9alF1ZXJ5KG8pO2lmKHRoaXMuZ2V0VmVydGljYWwoKSl7dGhpcy5fJE93bmVyRG9tUmVmLmJpbmQoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveD8iRE9NTW91c2VTY3JvbGwiOiJtb3VzZXdoZWVsIixqUXVlcnkucHJveHkodGhpcy5vbm1vdXNld2hlZWwsdGhpcykpfWlmKGpRdWVyeS5zYXAudG91Y2hFdmVudE1vZGU9PT0iT04iKXt0aGlzLl8kT3duZXJEb21SZWYuYmluZCh0aGlzLl9nZXRUb3VjaEV2ZW50VHlwZSgidG91Y2hzdGFydCIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2hzdGFydCx0aGlzKSk7dGhpcy5fJE93bmVyRG9tUmVmLmJpbmQodGhpcy5fZ2V0VG91Y2hFdmVudFR5cGUoInRvdWNobW92ZSIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2htb3ZlLHRoaXMpKTt0aGlzLl8kT3duZXJEb21SZWYuYmluZCh0aGlzLl9nZXRUb3VjaEV2ZW50VHlwZSgidG91Y2hlbmQiKSxqUXVlcnkucHJveHkodGhpcy5vbnRvdWNoZW5kLHRoaXMpKTt0aGlzLl8kT3duZXJEb21SZWYuYmluZCh0aGlzLl9nZXRUb3VjaEV2ZW50VHlwZSgidG91Y2hjYW5jbGUiKSxqUXVlcnkucHJveHkodGhpcy5vbnRvdWNoY2FuY2xlLHRoaXMpKX19fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLl9nZXRUb3VjaEV2ZW50VHlwZT1mdW5jdGlvbih0KXtyZXR1cm4galF1ZXJ5LnNhcC50b3VjaEV2ZW50TW9kZT09PSJTSU0iPygic2FwIit0KTp0fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLnBhZ2VVcD1mdW5jdGlvbigpe3RoaXMuX2RvU2Nyb2xsKHNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbi5QYWdlLGZhbHNlKX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5wYWdlRG93bj1mdW5jdGlvbigpe3RoaXMuX2RvU2Nyb2xsKHNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbi5QYWdlLHRydWUpfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLnNldFNjcm9sbFBvc2l0aW9uPWZ1bmN0aW9uKHMpe2lmKHRoaXMuXyRTY3JvbGxEb21SZWYpe3RoaXMuc2V0Q2hlY2tlZFNjcm9sbFBvc2l0aW9uKHMsdHJ1ZSl9ZWxzZXt0aGlzLnNldFByb3BlcnR5KCJzY3JvbGxQb3NpdGlvbiIscyl9cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuc2V0Q2hlY2tlZFNjcm9sbFBvc2l0aW9uPWZ1bmN0aW9uKHMsYyl7dmFyIEM9TWF0aC5tYXgocywwKTtpZih0aGlzLl9iU3RlcE1vZGU9PT11bmRlZmluZWQpe3RoaXMuX2JTdGVwTW9kZT0hdGhpcy5nZXRDb250ZW50U2l6ZSgpfXZhciBTPUM7aWYodGhpcy5fYlN0ZXBNb2RlKXtDPU1hdGgubWluKEMsdGhpcy5nZXRTdGVwcygpKTtTPUMqdGhpcy5faUZhY3Rvcn1DPU1hdGguZmxvb3IoQyk7dGhpcy5fYlN1cHByZXNzU2Nyb2xsPSFjO3RoaXMuc2V0UHJvcGVydHkoInNjcm9sbFBvc2l0aW9uIixDLHRydWUpO2lmKHRoaXMuZ2V0VmVydGljYWwoKSl7dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxUb3AoUyl9ZWxzZXtpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94JiZ0aGlzLl9iUlRMKXt0aGlzLl8kU2Nyb2xsRG9tUmVmLnNjcm9sbExlZnQoLVMpfWVsc2UgaWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIud2Via2l0JiZ0aGlzLl9iUlRMKXt2YXIgbz10aGlzLl8kU2Nyb2xsRG9tUmVmLmdldCgwKTt0aGlzLl8kU2Nyb2xsRG9tUmVmLnNjcm9sbExlZnQoby5zY3JvbGxXaWR0aC1vLmNsaWVudFdpZHRoLVMpfWVsc2V7dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxMZWZ0KFMpfX1pZihqUXVlcnkuc2FwLnRvdWNoRXZlbnRNb2RlPT09Ik9OIil7dmFyIHY9QztpZih0aGlzLl9iU3RlcE1vZGUpe3Y9TWF0aC5yb3VuZChDKnRoaXMuX2lUb3VjaFN0ZXBUcmVzaG9sZCl9dGhpcy5fb1RvdWNoU2Nyb2xsZXIuX19zY3JvbGxUb3A9dGhpcy5nZXRWZXJ0aWNhbCgpP3Y6MDt0aGlzLl9vVG91Y2hTY3JvbGxlci5fX3Njcm9sbExlZnQ9dGhpcy5nZXRWZXJ0aWNhbCgpPzA6dn19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuc2V0Q29udGVudFNpemU9ZnVuY3Rpb24oYyl7dGhpcy5zZXRQcm9wZXJ0eSgiY29udGVudFNpemUiLGMpO3RoaXMuX2JTdGVwTW9kZT1mYWxzZTt2YXIgcz10aGlzLiQoInNiY250Iik7aWYocyl7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXtzLmhlaWdodChjKX1lbHNle3Mud2lkdGgoYyl9fXJldHVybiB0aGlzfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLl9kb1Njcm9sbD1mdW5jdGlvbihlLGYpe3ZhciBzPW51bGw7aWYodGhpcy5fJFNjcm9sbERvbVJlZil7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXtzPXRoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsVG9wKCl9ZWxzZXtzPXRoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsTGVmdCgpO2lmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3gmJnRoaXMuX2JSVEwpe3M9TWF0aC5hYnMocyl9ZWxzZSBpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQmJnRoaXMuX2JSVEwpe3ZhciBTPXRoaXMuXyRTY3JvbGxEb21SZWYuZ2V0KDApO3M9Uy5zY3JvbGxXaWR0aC1TLmNsaWVudFdpZHRoLVMuc2Nyb2xsTGVmdH19fWlmKHRoaXMuX2JTdGVwTW9kZSl7dmFyIGk9TWF0aC5yb3VuZChzL3RoaXMuX2lGYWN0b3IpO3ZhciBvPXRoaXMuX2lPbGRTdGVwO2lmKG8hPT1pKXt0aGlzLnNldENoZWNrZWRTY3JvbGxQb3NpdGlvbihpLGZhbHNlKTtqUXVlcnkuc2FwLmxvZy5kZWJ1ZygiLS0tLS1TVEVQTU9ERS0tLS0tOiBOZXcgU3RlcDogIitpKyIgLS0tIE9sZCBTdGVwOiAiK28rIiAtLS0gU2Nyb2xsIFBvcyBpbiBweDogIitzKyIgLS0tIEFjdGlvbjogIitlKyIgLS0tIERpcmVjdGlvbiBpcyBmb3J3YXJkOiAiK2YpO3RoaXMuZmlyZVNjcm9sbCh7YWN0aW9uOmUsZm9yd2FyZDpmLG5ld1Njcm9sbFBvczppLG9sZFNjcm9sbFBvczpvfSk7dGhpcy5faU9sZFN0ZXA9aX19ZWxzZXt0aGlzLnNldFByb3BlcnR5KCJzY3JvbGxQb3NpdGlvbiIscyx0cnVlKTtqUXVlcnkuc2FwLmxvZy5kZWJ1ZygiLS0tLS1QSVhFTE1PREUtLS0tLTogTmV3IFNjcm9sbFBvczogIitzKyIgLS0tIE9sZCBTY3JvbGxQb3M6ICIrdGhpcy5faU9sZFNjcm9sbFBvcysiIC0tLSBBY3Rpb246ICIrZSsiIC0tLSBEaXJlY3Rpb24gaXMgZm9yd2FyZDogIitmKTt0aGlzLmZpcmVTY3JvbGwoe2FjdGlvbjplLGZvcndhcmQ6ZixuZXdTY3JvbGxQb3M6cyxvbGRTY3JvbGxQb3M6dGhpcy5faU9sZFNjcm9sbFBvc30pfXRoaXMuX2JTdXBwcmVzc1Njcm9sbD1mYWxzZTt0aGlzLl9pT2xkU2Nyb2xsUG9zPXM7dGhpcy5fYk1vdXNlV2hlZWw9ZmFsc2V9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUub25UaGVtZUNoYW5nZWQ9ZnVuY3Rpb24oKXt0aGlzLnJlcmVuZGVyKCl9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuZ2V0TmF0aXZlU2Nyb2xsUG9zaXRpb249ZnVuY3Rpb24oKXtpZih0aGlzLl8kU2Nyb2xsRG9tUmVmKXtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3JldHVybiB0aGlzLl8kU2Nyb2xsRG9tUmVmLnNjcm9sbFRvcCgpfWVsc2V7cmV0dXJuIHRoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsTGVmdCgpfX1yZXR1cm4gMH07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5zZXROYXRpdmVTY3JvbGxQb3NpdGlvbj1mdW5jdGlvbihuKXtpZih0aGlzLl8kU2Nyb2xsRG9tUmVmKXtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3RoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsVG9wKG4pfWVsc2V7dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxMZWZ0KG4pfX19O3JldHVybiBzYXAudWkuY29yZS5TY3JvbGxCYXJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5TZXBhcmF0b3JJdGVtJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuU2VwYXJhdG9ySXRlbScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1NlcGFyYXRvckl0ZW0iLFsnLi9saWJyYXJ5JywnLi9JdGVtJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuSXRlbS5leHRlbmQoInNhcC51aS5jb3JlLlNlcGFyYXRvckl0ZW0iLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUifX0pO3JldHVybiBzYXAudWkuY29yZS5TZXBhcmF0b3JJdGVtfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVGl0bGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5UaXRsZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1RpdGxlIixbJy4vbGlicmFyeScsJy4vRWxlbWVudCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkVsZW1lbnQuZXh0ZW5kKCJzYXAudWkuY29yZS5UaXRsZSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InRleHQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sImljb24iOnt0eXBlOiJzYXAudWkuY29yZS5VUkkiLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sImxldmVsIjp7dHlwZToic2FwLnVpLmNvcmUuVGl0bGVMZXZlbCIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpzYXAudWkuY29yZS5UaXRsZUxldmVsLkF1dG99LCJlbXBoYXNpemVkIjp7dHlwZToiYm9vbGVhbiIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpmYWxzZX19fX0pO3JldHVybiBzYXAudWkuY29yZS5UaXRsZX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Ub29sdGlwQmFzZSIsWycuL2xpYnJhcnknLCcuL0NvbnRyb2wnLCcuL1BvcHVwJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLlRvb2x0aXBCYXNlIix7bWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InRleHQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6IiJ9LCJvcGVuRHVyYXRpb24iOnt0eXBlOiJpbnQiLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOjIwMH0sImNsb3NlRHVyYXRpb24iOnt0eXBlOiJpbnQiLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOjIwMH0sIm15UG9zaXRpb24iOnt0eXBlOiJzYXAudWkuY29yZS5Eb2NrIixncm91cDoiQmVoYXZpb3IiLGRlZmF1bHRWYWx1ZTonYmVnaW4gdG9wJ30sImF0UG9zaXRpb24iOnt0eXBlOiJzYXAudWkuY29yZS5Eb2NrIixncm91cDoiQmVoYXZpb3IiLGRlZmF1bHRWYWx1ZTonYmVnaW4gYm90dG9tJ30sIm9mZnNldCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6JzEwIDMnfSwiY29sbGlzaW9uIjp7dHlwZToic2FwLnVpLmNvcmUuQ29sbGlzaW9uIixncm91cDoiQmVoYXZpb3IiLGRlZmF1bHRWYWx1ZTonZmxpcCd9LCJvcGVuRGVsYXkiOnt0eXBlOiJpbnQiLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6NTAwfSwiY2xvc2VEZWxheSI6e3R5cGU6ImludCIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZToxMDB9fSxldmVudHM6eyJjbG9zZWQiOnt9fX19KTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5NX0VWRU5UUz17J2Nsb3NlZCc6J2Nsb3NlZCd9O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5fZ2V0UG9wdXA9alF1ZXJ5LnNhcC5nZXR0ZXIoKGZ1bmN0aW9uKCl7dmFyIHA9bmV3IHNhcC51aS5jb3JlLlBvcHVwKCk7cC5zZXRTaGFkb3codHJ1ZSk7cmV0dXJuIHB9KCkpKTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUub25mb2N1c2luPWZ1bmN0aW9uKGUpe3ZhciBzPWpRdWVyeShlLnRhcmdldCkuY29udHJvbCgwKTtpZihzIT1udWxsKXt2YXIgZD1zLmdldEZvY3VzRG9tUmVmKCk7dGhpcy5zU3RvcmVkVG9vbHRpcD1udWxsO2lmKGQudGl0bGUmJmQudGl0bGUhPSIiKXt0aGlzLnNTdG9yZWRUb29sdGlwPWQudGl0bGU7ZC50aXRsZT0iIn12YXIgcD10aGlzLl9nZXRQb3B1cCgpO2lmKCEocC5pc09wZW4oKSYmcC5nZXRDb250ZW50KCk9PXRoaXMpKXtzYXAudWkuZ2V0Q29yZSgpLmdldFJlbmRlck1hbmFnZXIoKS5yZW5kZXIodGhpcyxzYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKSx0cnVlKX12YXIgdj1kLmdldEF0dHJpYnV0ZSgiYXJpYS1kZXNjcmliZWRieSIpO3ZhciBpPXRoaXMuZ2V0SWQoKSsiLXRpdGxlICIrdGhpcy5nZXRJZCgpKyItdHh0IjtpZih2PT1udWxsfHx2PT0iIil7ZC5zZXRBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkYnkiLGkpfWVsc2UgaWYodi5pbmRleE9mKGkpPT0tMSl7ZC5zZXRBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkYnkiLHYrIiAiK2kpfX19O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5vbmZvY3Vzb3V0PWZ1bmN0aW9uKGUpe3ZhciBzPWpRdWVyeShlLnRhcmdldCkuY29udHJvbCgwKTtpZihzIT1udWxsKXt2YXIgZD1zLmdldEZvY3VzRG9tUmVmKCk7aWYodGhpcy5zU3RvcmVkVG9vbHRpcCl7ZC50aXRsZT10aGlzLnNTdG9yZWRUb29sdGlwfXZhciB2PWQuZ2V0QXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZGJ5Iik7dmFyIGk9dGhpcy5nZXRJZCgpKyItdGl0bGUgIit0aGlzLmdldElkKCkrIi10eHQiO2lmKHYmJnYuaW5kZXhPZihpKT49MCl7aWYoalF1ZXJ5LnRyaW0odik9PWkpe2QucmVtb3ZlQXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZGJ5Iil9ZWxzZXt2PXYucmVwbGFjZShpLCIiKTtkLnNldEF0dHJpYnV0ZSgiYXJpYS1kZXNjcmliZWRieSIsdil9fX1pZihzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbChzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpO3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dD11bmRlZmluZWR9dGhpcy5zQ2xvc2VOb3dUaW1lb3V0PWpRdWVyeS5zYXAuZGVsYXllZENhbGwodGhpcy5nZXRDbG9zZURlbGF5KCksdGhpcywiY2xvc2VQb3B1cCIpfTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUuaXNTdGFuZGFyZFRvb2x0aXA9ZnVuY3Rpb24odCl7cmV0dXJuKHR5cGVvZiB0PT09InN0cmluZyImJihqUXVlcnkudHJpbSh0KSkhPT0iIil9O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5vbm1vdXNlb3Zlcj1mdW5jdGlvbihlKXt2YXIgRT1qUXVlcnkoZS50YXJnZXQpLmNvbnRyb2woMCk7aWYoRSE9bnVsbCl7aWYoRT09PXRoaXMpe2lmKHRoaXMuc0Nsb3NlTm93VGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuc0Nsb3NlTm93VGltZW91dCk7dGhpcy5zQ2xvc2VOb3dUaW1lb3V0PW51bGx9ZS5zdG9wUHJvcGFnYXRpb24oKTtlLnByZXZlbnREZWZhdWx0KCk7cmV0dXJufXZhciBjPWpRdWVyeShlLmN1cnJlbnRUYXJnZXQpLmNvbnRyb2woMCk7aWYoYyE9PUUmJiF0aGlzLmlzU3RhbmRhcmRUb29sdGlwKEUuZ2V0VG9vbHRpcCgpKSl7aWYodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KXtqUXVlcnkuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KTt0aGlzLnNDbG9zZU5vd1RpbWVvdXQ9bnVsbDtlLnN0b3BQcm9wYWdhdGlvbigpO2UucHJldmVudERlZmF1bHQoKTtyZXR1cm59fXZhciBsPWpRdWVyeShlLnJlbGF0ZWRUYXJnZXQpLmNvbnRyb2woMCk7aWYobCl7aWYobC5nZXRQYXJlbnQoKSl7aWYobC5nZXRQYXJlbnQoKT09PWMmJmM9PT1FKXt2YXIgTD1sLmdldFRvb2x0aXAoKTtpZighdGhpcy5pc1N0YW5kYXJkVG9vbHRpcChMKSYmKCFMfHwhKEwgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Ub29sdGlwQmFzZSkpKXtpZih0aGlzLnNDbG9zZU5vd1RpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLnNDbG9zZU5vd1RpbWVvdXQpO3RoaXMuc0Nsb3NlTm93VGltZW91dD1udWxsO2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpO3JldHVybn19fX19aWYodGhpcy5fY3VycmVudENvbnRyb2w9PT1FfHwhdGhpcy5pc1N0YW5kYXJkVG9vbHRpcChFLmdldFRvb2x0aXAoKSkpe3RoaXMucmVtb3ZlU3RhbmRhcmRUb29sdGlwcyhFKTtpZihzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbChzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpfXNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dD1qUXVlcnkuc2FwLmRlbGF5ZWRDYWxsKHRoaXMuZ2V0T3BlbkRlbGF5KCksdGhpcywib3BlblBvcHVwIixbdGhpcy5fY3VycmVudENvbnRyb2xdKTtlLnN0b3BQcm9wYWdhdGlvbigpO2UucHJldmVudERlZmF1bHQoKX19fTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUub25tb3VzZW91dD1mdW5jdGlvbihlKXtpZihzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbChzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpO3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dD11bmRlZmluZWR9aWYoIXRoaXMuc0Nsb3NlTm93VGltZW91dCl7dGhpcy5zQ2xvc2VOb3dUaW1lb3V0PWpRdWVyeS5zYXAuZGVsYXllZENhbGwodGhpcy5nZXRDbG9zZURlbGF5KCksdGhpcywiY2xvc2VQb3B1cCIpfXRoaXMucmVzdG9yZVN0YW5kYXJkVG9vbHRpcHMoKTtlLnN0b3BQcm9wYWdhdGlvbigpO2UucHJldmVudERlZmF1bHQoKX07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLmNsb3NlUG9wdXA9ZnVuY3Rpb24oKXt2YXIgcD10aGlzLl9nZXRQb3B1cCgpO2lmKHRoaXMuc0Nsb3NlTm93VGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuc0Nsb3NlTm93VGltZW91dCl9dGhpcy5zQ2xvc2VOb3dUaW1lb3V0PXVuZGVmaW5lZDtwLmF0dGFjaENsb3NlZCh0aGlzLmhhbmRsZUNsb3NlZCx0aGlzKTtwLmNsb3NlKCk7dGhpcy5yZXN0b3JlU3RhbmRhcmRUb29sdGlwcygpfTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUuaGFuZGxlQ2xvc2VkPWZ1bmN0aW9uKCl7dGhpcy5fZ2V0UG9wdXAoKS5kZXRhY2hDbG9zZWQoalF1ZXJ5LnByb3h5KHRoaXMuaGFuZGxlQ2xvc2VkLHRoaXMpKTt0aGlzLmZpcmVDbG9zZWQoKX07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLm9wZW5Qb3B1cD1mdW5jdGlvbihzKXtpZihzLmdldFRvb2x0aXAoKSE9bnVsbCl7aWYodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KXtqUXVlcnkuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KTt0aGlzLnNDbG9zZU5vd1RpbWVvdXQ9bnVsbDtyZXR1cm59dmFyIHA9dGhpcy5fZ2V0UG9wdXAoKTtpZihwLmlzT3BlbigpJiZwLmdldENvbnRlbnQoKT09dGhpcyl7cmV0dXJufXNhcC51aS5nZXRDb3JlKCkuZ2V0UmVuZGVyTWFuYWdlcigpLnJlbmRlcih0aGlzLHNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpLHRydWUpO3ZhciBkPXMuZ2V0RG9tUmVmKCk7cC5zZXRDb250ZW50KHRoaXMpO3Auc2V0UG9zaXRpb24odGhpcy5nZXRNeVBvc2l0aW9uKCksdGhpcy5nZXRBdFBvc2l0aW9uKCksZCx0aGlzLmdldE9mZnNldCgpLHRoaXMuZ2V0Q29sbGlzaW9uKCkpO3Auc2V0RHVyYXRpb25zKHRoaXMuZ2V0T3BlbkR1cmF0aW9uKCksdGhpcy5nZXRDbG9zZUR1cmF0aW9uKCkpO3Aub3BlbigpO3RoaXMucmVtb3ZlU3RhbmRhcmRUb29sdGlwcyh0aGlzLl9jdXJyZW50Q29udHJvbCl9fTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUucmVtb3ZlU3RhbmRhcmRUb29sdGlwcz1mdW5jdGlvbigpe3ZhciBkPXRoaXMuX2N1cnJlbnRDb250cm9sLmdldERvbVJlZigpO2lmKCF0aGlzLmFTdG9yZWRUb29sdGlwcyl7dGhpcy5hU3RvcmVkVG9vbHRpcHM9W119ZWxzZXtyZXR1cm59dmFyIHQ9IiI7d2hpbGUoZCYmIShkPT09ZG9jdW1lbnQpKXt0PWQudGl0bGU7aWYodCl7dGhpcy5hU3RvcmVkVG9vbHRpcHMucHVzaCh7ZG9tcmVmOmQsdG9vbHRpcDp0fSk7ZC50aXRsZT0iIn1kPWQucGFyZW50Tm9kZX1pZih0aGlzLl9jdXJyZW50Q29udHJvbC5nZXRUb29sdGlwRG9tUmVmcyl7dmFyIEQ9dGhpcy5fY3VycmVudENvbnRyb2wuZ2V0VG9vbHRpcERvbVJlZnMoKTtmb3IodmFyIGk9MDtpPEQubGVuZ3RoO2krKyl7ZD1EW2ldO2lmKGQpe3Q9ZC50aXRsZTtpZih0KXt0aGlzLmFTdG9yZWRUb29sdGlwcy5wdXNoKHtkb21yZWY6ZCx0b29sdGlwOnR9KTtkLnRpdGxlPSIifX19fX07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLnJlc3RvcmVTdGFuZGFyZFRvb2x0aXBzPWZ1bmN0aW9uKCl7dmFyIHA9dGhpcy5fZ2V0UG9wdXAoKTt2YXIgZT1wLmdldE9wZW5TdGF0ZSgpO2lmKGU9PT1zYXAudWkuY29yZS5PcGVuU3RhdGUuT1BFTnx8ZT09PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5PUEVOSU5HKXtyZXR1cm59aWYoc2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0KXtyZXR1cm59aWYodGhpcy5hU3RvcmVkVG9vbHRpcHMpe2Zvcih2YXIgaT0wO2k8dGhpcy5hU3RvcmVkVG9vbHRpcHMubGVuZ3RoO2krKyl7dmFyIGQ9dGhpcy5hU3RvcmVkVG9vbHRpcHNbaV0uZG9tcmVmO2QudGl0bGU9dGhpcy5hU3RvcmVkVG9vbHRpcHNbaV0udG9vbHRpcH19dGhpcy5hU3RvcmVkVG9vbHRpcHM9bnVsbH07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLl9zZXRQYXJlbnQ9c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLnNldFBhcmVudDtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUuc2V0UGFyZW50PWZ1bmN0aW9uKHAsYSl7dmFyIF89dGhpcy5fZ2V0UG9wdXAoKTtpZihfJiZfLmlzT3BlbigpKXt0aGlzLmNsb3NlUG9wdXAoKX10aGlzLl9zZXRQYXJlbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUub25rZXlkb3duPWZ1bmN0aW9uKGUpe2lmKGUuY3RybEtleSYmZS53aGljaD09alF1ZXJ5LnNhcC5LZXlDb2Rlcy5JKXt2YXIgRT1qUXVlcnkoZS50YXJnZXQpLmNvbnRyb2woMCk7aWYoRSE9bnVsbCl7aWYodGhpcy5fY3VycmVudENvbnRyb2w9PT1FfHwhdGhpcy5pc1N0YW5kYXJkVG9vbHRpcChFLmdldFRvb2x0aXAoKSkpe3RoaXMucmVtb3ZlU3RhbmRhcmRUb29sdGlwcyhFKTt0aGlzLm9wZW5Qb3B1cCh0aGlzLl9jdXJyZW50Q29udHJvbCk7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9fX1lbHNlIGlmKGUud2hpY2g9PWpRdWVyeS5zYXAuS2V5Q29kZXMuRVNDQVBFKXtpZihzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbChzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpO3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dD11bmRlZmluZWR9dmFyIHc9dGhpcy5vUG9wdXAmJnRoaXMub1BvcHVwLmlzT3BlbigpO3RoaXMuY2xvc2VQb3B1cCgpO2lmKHcpe2UucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpfX19O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5fY2xvc2VPclByZXZlbnRPcGVuPWZ1bmN0aW9uKCl7dmFyIHA9dGhpcy5fZ2V0UG9wdXAoKTtpZihwLmlzT3BlbigpKXt0aGlzLmNsb3NlUG9wdXAoKX1lbHNlIGlmKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCk7c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0PXVuZGVmaW5lZH19O3JldHVybiBzYXAudWkuY29yZS5Ub29sdGlwQmFzZX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlZhcmlhbnRMYXlvdXREYXRhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVmFyaWFudExheW91dERhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9WYXJpYW50TGF5b3V0RGF0YSIsWycuL2xpYnJhcnknLCcuL0xheW91dERhdGEnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5MYXlvdXREYXRhLmV4dGVuZCgic2FwLnVpLmNvcmUuVmFyaWFudExheW91dERhdGEiLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLGFnZ3JlZ2F0aW9uczp7Im11bHRpcGxlTGF5b3V0RGF0YSI6e3R5cGU6InNhcC51aS5jb3JlLkxheW91dERhdGEiLG11bHRpcGxlOnRydWUsc2luZ3VsYXJOYW1lOiJtdWx0aXBsZUxheW91dERhdGEifX19fSk7cmV0dXJuIHNhcC51aS5jb3JlLlZhcmlhbnRMYXlvdXREYXRhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLlZpZXcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuVmlldycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9WaWV3IixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCdzYXAvdWkvY29yZS9Db250cm9sJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLm12Yy5WaWV3Iix7bWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJnZXRDb250cm9sbGVyIl0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJ3aWR0aCI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTonMTAwJSd9LCJoZWlnaHQiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiRGltZW5zaW9uIixkZWZhdWx0VmFsdWU6bnVsbH0sInZpZXdOYW1lIjp7dHlwZToic3RyaW5nIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOm51bGx9LCJkaXNwbGF5QmxvY2siOnt0eXBlOiJib29sZWFuIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOmZhbHNlfX0sYWdncmVnYXRpb25zOnsiY29udGVudCI6e3R5cGU6InNhcC51aS5jb3JlLkNvbnRyb2wiLG11bHRpcGxlOnRydWUsc2luZ3VsYXJOYW1lOiJjb250ZW50In19LGV2ZW50czp7ImFmdGVySW5pdCI6e30sImJlZm9yZUV4aXQiOnt9LCJhZnRlclJlbmRlcmluZyI6e30sImJlZm9yZVJlbmRlcmluZyI6e319fX0pO3NhcC51aS5jb3JlLm12Yy5WaWV3Lk1fRVZFTlRTPXsnYWZ0ZXJJbml0JzonYWZ0ZXJJbml0JywnYmVmb3JlRXhpdCc6J2JlZm9yZUV4aXQnLCdhZnRlclJlbmRlcmluZyc6J2FmdGVyUmVuZGVyaW5nJywnYmVmb3JlUmVuZGVyaW5nJzonYmVmb3JlUmVuZGVyaW5nJ307KGZ1bmN0aW9uKCl7c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLl9pbml0Q29tcG9zaXRlU3VwcG9ydD1mdW5jdGlvbihzKXt0aGlzLm9WaWV3RGF0YT1zLnZpZXdEYXRhO3RoaXMuc1ZpZXdOYW1lPXMudmlld05hbWU7aWYodGhpcy5pbml0Vmlld1NldHRpbmdzKXt0aGlzLmluaXRWaWV3U2V0dGluZ3Mocyl9Yyh0aGlzLHMpO2lmKHRoaXMub25Db250cm9sbGVyQ29ubmVjdGVkKXt0aGlzLm9uQ29udHJvbGxlckNvbm5lY3RlZCh0aGlzLm9Db250cm9sbGVyKX10aGlzLmZpcmVBZnRlckluaXQoKX07c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmdldENvbnRyb2xsZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQ29udHJvbGxlcn07c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmJ5SWQ9ZnVuY3Rpb24oaSl7cmV0dXJuIHNhcC51aS5nZXRDb3JlKCkuYnlJZCh0aGlzLmNyZWF0ZUlkKGkpKX07c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmNyZWF0ZUlkPWZ1bmN0aW9uKGkpe2lmKCF0aGlzLmlzUHJlZml4ZWRJZChpKSl7aT10aGlzLmdldElkKCkrIi0tIitpfXJldHVybiBpfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuaXNQcmVmaXhlZElkPWZ1bmN0aW9uKGkpe3JldHVybihpJiZpLmluZGV4T2YodGhpcy5nZXRJZCgpKyItLSIpPT09MCl9O3ZhciBjPWZ1bmN0aW9uKHQscyl7dmFyIEM9cy5jb250cm9sbGVyO2lmKCFDJiZ0LmdldENvbnRyb2xsZXJOYW1lKXt2YXIgZD10LmdldENvbnRyb2xsZXJOYW1lKCk7aWYoZCl7Qz1zYXAudWkuY29udHJvbGxlcihkKX19aWYoc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0RGVzaWduTW9kZSgpJiYhc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0U3VwcHJlc3NEZWFjdGl2YXRpb25PZkNvbnRyb2xsZXJDb2RlKCkpe2Zvcih2YXIgbSBpbiBDKXtpZih0eXBlb2YgQ1ttXT09PSJmdW5jdGlvbiImJiFzYXAudWkuY29yZS5tdmMuQ29udHJvbGxlci5wcm90b3R5cGVbbV0pe0NbbV09ZnVuY3Rpb24oKXt9fX19aWYoQyl7dC5vQ29udHJvbGxlcj1DO0MuY29ubmVjdFRvVmlldyh0KX19O3NhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5nZXRWaWV3RGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9WaWV3RGF0YX07c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmV4aXQ9ZnVuY3Rpb24oKXt0aGlzLmZpcmVCZWZvcmVFeGl0KCk7dGhpcy5vQ29udHJvbGxlcj1udWxsfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe3RoaXMuZmlyZUFmdGVyUmVuZGVyaW5nKCl9O3NhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5vbkJlZm9yZVJlbmRlcmluZz1mdW5jdGlvbigpe3RoaXMuZmlyZUJlZm9yZVJlbmRlcmluZygpfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oaSxsKXt2YXIgcz17fSxrLEM7Zm9yKGsgaW4gdGhpcy5tUHJvcGVydGllcyYmISh0aGlzLmlzQm91bmQmJnRoaXMuaXNCb3VuZChrKSkpe2lmKHRoaXMubVByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoaykpe3Nba109dGhpcy5tUHJvcGVydGllc1trXX19Qz1zYXAudWkuY29yZS5Db250cm9sLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsaSxsLHtjbG9uZUNoaWxkcmVuOmZhbHNlLGNsb25lQmluZGluZ3M6dHJ1ZX0pO0MuYXBwbHlTZXR0aW5ncyhzKTtyZXR1cm4gQ307c2FwLnVpLnZpZXc9ZnVuY3Rpb24oaSx2LHQpe3ZhciBhPW51bGwsVj17fTtpZih0eXBlb2YgaT09PSJvYmplY3QifHx0eXBlb2YgaT09PSJzdHJpbmciJiZ2PT09dW5kZWZpbmVkKXt2PWk7aT11bmRlZmluZWR9aWYodil7aWYodHlwZW9mIHY9PT0ic3RyaW5nIil7Vi52aWV3TmFtZT12fWVsc2V7Vj12fX1pZihpKXtWLmlkPWl9aWYodCl7Vi50eXBlPXR9aWYoc2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uKXt2YXIgYj1zYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24uZ2V0Vmlld1JlcGxhY2VtZW50KFYudmlld05hbWUpO2lmKGIpe2pRdWVyeS5zYXAubG9nLmluZm8oIkN1c3RvbWl6aW5nOiBWaWV3IHJlcGxhY2VtZW50IGZvciB2aWV3ICciK1Yudmlld05hbWUrIicgZm91bmQgYW5kIGFwcGxpZWQ6ICIrYi52aWV3TmFtZSsiICh0eXBlOiAiK2IudHlwZSsiKSIpO2pRdWVyeS5leHRlbmQoVixiKX19aWYoIVYudHlwZSl7dGhyb3cgbmV3IEVycm9yKCJObyB2aWV3IHR5cGUgc3BlY2lmaWVkLiIpfWVsc2UgaWYoVi50eXBlPT09c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLkpTKXthPW5ldyBzYXAudWkuY29yZS5tdmMuSlNWaWV3KFYpfWVsc2UgaWYoVi50eXBlPT09c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLkpTT04pe2E9bmV3IHNhcC51aS5jb3JlLm12Yy5KU09OVmlldyhWKX1lbHNlIGlmKFYudHlwZT09PXNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5YTUwpe2E9bmV3IHNhcC51aS5jb3JlLm12Yy5YTUxWaWV3KFYpfWVsc2UgaWYoVi50eXBlPT09c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLkhUTUwpe2E9bmV3IHNhcC51aS5jb3JlLm12Yy5IVE1MVmlldyhWKX1lbHNlIGlmKFYudHlwZT09PXNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5UZW1wbGF0ZSl7YT1uZXcgc2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldyhWKX1lbHNle3Rocm93IG5ldyBFcnJvcigiVW5rbm93biB2aWV3IHR5cGUgIitWLnR5cGUrIiBzcGVjaWZpZWQuIil9cmV0dXJuIGF9fSgpKTtyZXR1cm4gc2FwLnVpLmNvcmUubXZjLlZpZXd9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuWE1MVmlldycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL1hNTFZpZXciLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJy4vVmlldycsJ2pxdWVyeS5zYXAueG1sJywnc2FwL3VpL2Jhc2UvRGF0YVR5cGUnLCdzYXAvdWkvbW9kZWwvcmVzb3VyY2UvUmVzb3VyY2VNb2RlbCcsJ3NhcC91aS9jb3JlL1hNTFRlbXBsYXRlUHJvY2Vzc29yJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUubXZjLlZpZXcuZXh0ZW5kKCJzYXAudWkuY29yZS5tdmMuWE1MVmlldyIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSJ9fSk7c2FwLnVpLnhtbHZpZXc9ZnVuY3Rpb24oaSx2KXtyZXR1cm4gc2FwLnVpLnZpZXcoaSx2LHNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5YTUwpfTtzYXAudWkuY29yZS5tdmMuWE1MVmlldy5fc1R5cGU9c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlhNTDtzYXAudWkuY29yZS5tdmMuWE1MVmlldy5wcm90b3R5cGUuaW5pdFZpZXdTZXR0aW5ncz1mdW5jdGlvbihzKXtpZighcyl7dGhyb3cgbmV3IEVycm9yKCJtU2V0dGluZ3MgbXVzdCBiZSBnaXZlbiIpfWlmKHMudmlld05hbWUmJnMudmlld0NvbnRlbnQpe3Rocm93IG5ldyBFcnJvcigiVmlldyBuYW1lIGFuZCB2aWV3IGNvbnRlbnQgYXJlIGdpdmVuLiBUaGVyZSBpcyBubyBwb2ludCBpbiBkb2luZyB0aGlzLCBzbyBwbGVhc2UgZGVjaWRlLiIpfWVsc2UgaWYoKHMudmlld05hbWV8fHMudmlld0NvbnRlbnQpJiZzLnhtbE5vZGUpe3Rocm93IG5ldyBFcnJvcigiVmlldyBuYW1lL2NvbnRlbnQgQU5EIGFuIFhNTCBub2RlIGFyZSBnaXZlbi4gVGhlcmUgaXMgbm8gcG9pbnQgaW4gZG9pbmcgdGhpcywgc28gcGxlYXNlIGRlY2lkZS4iKX1lbHNlIGlmKCEocy52aWV3TmFtZXx8cy52aWV3Q29udGVudCkmJiFzLnhtbE5vZGUpe3Rocm93IG5ldyBFcnJvcigiTmVpdGhlciB2aWV3IG5hbWUvY29udGVudCBub3IgYW4gWE1MIG5vZGUgaXMgZ2l2ZW4uIE9uZSBvZiB0aGVtIGlzIHJlcXVpcmVkLiIpfWlmKHMudmlld05hbWUpe3RoaXMuX3hDb250ZW50PXNhcC51aS5jb3JlLlhNTFRlbXBsYXRlUHJvY2Vzc29yLmxvYWRUZW1wbGF0ZShzLnZpZXdOYW1lKX1lbHNlIGlmKHMudmlld0NvbnRlbnQpe3RoaXMubVByb3BlcnRpZXNbInZpZXdDb250ZW50Il09cy52aWV3Q29udGVudDt0aGlzLl94Q29udGVudD1qUXVlcnkuc2FwLnBhcnNlWE1MKHMudmlld0NvbnRlbnQpO2lmKHRoaXMuX3hDb250ZW50LnBhcnNlRXJyb3IuZXJyb3JDb2RlIT0wKXt2YXIgcD10aGlzLl94Q29udGVudC5wYXJzZUVycm9yO3Rocm93IG5ldyBFcnJvcigiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiBYTUwgcGFyc2UgRXJyb3IgZm9yICIrcC51cmwrIiBjb2RlOiAiK3AuZXJyb3JDb2RlKyIgcmVhc29uOiAiK3AucmVhc29uKyIgc3JjOiAiK3Auc3JjVGV4dCsiIGxpbmU6ICIrcC5saW5lKyIgbGluZXBvczogIitwLmxpbmVwb3MrIiBmaWxlcG9zOiAiK3AuZmlsZXBvcyl9ZWxzZXt0aGlzLl94Q29udGVudD10aGlzLl94Q29udGVudC5kb2N1bWVudEVsZW1lbnR9fWVsc2UgaWYocy54bWxOb2RlKXt0aGlzLl94Q29udGVudD1zLnhtbE5vZGV9ZWxzZXt9dGhpcy5fb0NvbnRhaW5pbmdWaWV3PXMuY29udGFpbmluZ1ZpZXd8fHRoaXM7aWYoIXRoaXMuaXNTdWJWaWV3KCkpe3NhcC51aS5jb3JlLlhNTFRlbXBsYXRlUHJvY2Vzc29yLnBhcnNlVmlld0F0dHJpYnV0ZXModGhpcy5feENvbnRlbnQsdGhpcyxzKX1lbHNle2RlbGV0ZSBzLmNvbnRyb2xsZXJ9aWYoKHRoaXMuX3Jlc291cmNlQnVuZGxlTmFtZXx8dGhpcy5fcmVzb3VyY2VCdW5kbGVVcmwpJiYoIXMubW9kZWxzfHwhcy5tb2RlbHNbdGhpcy5fcmVzb3VyY2VCdW5kbGVBbGlhc10pKXt2YXIgbT1uZXcgc2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlTW9kZWwoe2J1bmRsZU5hbWU6dGhpcy5fcmVzb3VyY2VCdW5kbGVOYW1lLGJ1bmRsZVVybDp0aGlzLl9yZXNvdXJjZUJ1bmRsZVVybCxidW5kbGVMb2NhbGU6dGhpcy5fcmVzb3VyY2VCdW5kbGVMb2NhbGV9KTt0aGlzLnNldE1vZGVsKG0sdGhpcy5fcmVzb3VyY2VCdW5kbGVBbGlhcyl9dmFyIHQ9dGhpczt0aGlzLm9BZnRlclJlbmRlcmluZ05vdGlmaWVyPW5ldyBzYXAudWkuY29yZS5tdmMuWE1MQWZ0ZXJSZW5kZXJpbmdOb3RpZmllcigpO3RoaXMub0FmdGVyUmVuZGVyaW5nTm90aWZpZXIuYWRkRGVsZWdhdGUoe29uQWZ0ZXJSZW5kZXJpbmc6ZnVuY3Rpb24oKXt0Lm9uQWZ0ZXJSZW5kZXJpbmdCZWZvcmVDaGlsZHJlbigpfX0pfTtzYXAudWkuY29yZS5tdmMuWE1MVmlldy5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe3RoaXMub0FmdGVyUmVuZGVyaW5nTm90aWZpZXIuZGVzdHJveSgpO3NhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5leGl0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07c2FwLnVpLmNvcmUubXZjLlhNTFZpZXcucHJvdG90eXBlLm9uQ29udHJvbGxlckNvbm5lY3RlZD1mdW5jdGlvbihjKXt2YXIgdD10aGlzO3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QucnVuV2l0aFByZXByb2Nlc3NvcnMoZnVuY3Rpb24oKXt0Ll9hUGFyc2VkQ29udGVudD1zYXAudWkuY29yZS5YTUxUZW1wbGF0ZVByb2Nlc3Nvci5wYXJzZVRlbXBsYXRlKHQuX3hDb250ZW50LHQpfSl9O3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3LnByb3RvdHlwZS5nZXRDb250cm9sbGVyTmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250cm9sbGVyTmFtZX07c2FwLnVpLmNvcmUubXZjLlhNTFZpZXcucHJvdG90eXBlLmlzU3ViVmlldz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vQ29udGFpbmluZ1ZpZXchPXRoaXN9O3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3LnByb3RvdHlwZS5vbkFmdGVyUmVuZGVyaW5nQmVmb3JlQ2hpbGRyZW49ZnVuY3Rpb24oKXtpZih0aGlzLl8kb2xkQ29udGVudC5sZW5ndGghPT0wKXt2YXIgYz10aGlzLmdldEFnZ3JlZ2F0aW9uKCJjb250ZW50Iik7aWYoYyl7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe2lmKGNbaV0uZ2V0RG9tUmVmKCk9PT1udWxsKXtjb250aW51ZX12YXIgJD1jW2ldLiQoKTtqUXVlcnkuc2FwLmJ5SWQoInNhcC11aS1kdW1teS0iK2NbaV0uZ2V0SWQoKSx0aGlzLl8kb2xkQ29udGVudCkucmVwbGFjZVdpdGgoJCl9fWpRdWVyeS5zYXAuYnlJZCgic2FwLXVpLWR1bW15LSIrdGhpcy5nZXRJZCgpKS5yZXBsYWNlV2l0aCh0aGlzLl8kb2xkQ29udGVudCl9dGhpcy5fJG9sZENvbnRlbnQ9dW5kZWZpbmVkfTtzYXAudWkuY29yZS5tdmMuWE1MVmlldy5wcm90b3R5cGUuX29uQ2hpbGRSZXJlbmRlcmVkRW1wdHk9ZnVuY3Rpb24oYyxlKXtqUXVlcnkoZSkucmVwbGFjZVdpdGgoJzxkaXYgaWQ9InNhcC11aS1kdW1teS0nK2MuZ2V0SWQoKSsnIiBjbGFzcz0ic2FwVWlIaWRkZW4iLz4nKTtyZXR1cm4gdHJ1ZX07c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLm12Yy5YTUxBZnRlclJlbmRlcmluZ05vdGlmaWVyIix7cmVuZGVyZXI6ZnVuY3Rpb24ocixjKXtyLndyaXRlKCIiKX19KTtyZXR1cm4gc2FwLnVpLmNvcmUubXZjLlhNTFZpZXd9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5zZWFyY2guT3BlblNlYXJjaFByb3ZpZGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuc2VhcmNoLk9wZW5TZWFyY2hQcm92aWRlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3NlYXJjaC9PcGVuU2VhcmNoUHJvdmlkZXIiLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJy4vU2VhcmNoUHJvdmlkZXInLCdqcXVlcnkuc2FwLmVuY29kZXInXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXIuZXh0ZW5kKCJzYXAudWkuY29yZS5zZWFyY2guT3BlblNlYXJjaFByb3ZpZGVyIix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsic3VnZ2VzdFVybCI6e3R5cGU6InNhcC51aS5jb3JlLlVSSSIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTpudWxsfSwic3VnZ2VzdFR5cGUiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6J2pzb24nfX19fSk7c2FwLnVpLmNvcmUuc2VhcmNoLk9wZW5TZWFyY2hQcm92aWRlci5wcm90b3R5cGUuc3VnZ2VzdD1mdW5jdGlvbih2LGMpe3ZhciB1PXRoaXMuZ2V0U3VnZ2VzdFVybCgpO2lmKCF1KXtyZXR1cm59dT11LnJlcGxhY2UoIntzZWFyY2hUZXJtc30iLGpRdWVyeS5zYXAuZW5jb2RlVVJMKHYpKTt2YXIgdD10aGlzLmdldFN1Z2dlc3RUeXBlKCk7dmFyIHM7aWYodCYmdC50b0xvd2VyQ2FzZSgpPT09InhtbCIpe3Q9InhtbCI7cz1mdW5jdGlvbihkKXt2YXIgeD1qUXVlcnkoZCk7dmFyIGk9eC5maW5kKCJUZXh0Iik7dmFyIFM9W107aS5lYWNoKGZ1bmN0aW9uKCl7Uy5wdXNoKGpRdWVyeSh0aGlzKS50ZXh0KCkpfSk7Yyh2LFMpfX1lbHNle3Q9Impzb24iO3M9ZnVuY3Rpb24oZCl7Yyh2LGRbMV0pfX1qUXVlcnkuYWpheCh7dXJsOnUsZGF0YVR5cGU6dCxzdWNjZXNzOnMsZXJyb3I6ZnVuY3Rpb24oWCxhLGUpe2pRdWVyeS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6ICIrYSxYLnJlc3BvbnNlVGV4dCsiLCIrWC5zdGF0dXMpfX0pfTtyZXR1cm4gc2FwLnVpLmNvcmUuc2VhcmNoLk9wZW5TZWFyY2hQcm92aWRlcn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3RtcGwvRE9NRWxlbWVudCIsWydzYXAvdWkvY29yZS9saWJyYXJ5Jywnc2FwL3VpL2NvcmUvQ29udHJvbCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkNvbnRyb2wuZXh0ZW5kKCJzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQiLHttZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImF0dHIiLCJyZW1vdmVBdHRyIl0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJ0ZXh0Ijp7dHlwZToic3RyaW5nIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJ0YWciOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOidzcGFuJ319LGFnZ3JlZ2F0aW9uczp7ImF0dHJpYnV0ZXMiOnt0eXBlOiJzYXAudWkuY29yZS50bXBsLkRPTUF0dHJpYnV0ZSIsbXVsdGlwbGU6dHJ1ZSxzaW5ndWxhck5hbWU6ImF0dHJpYnV0ZSJ9LCJlbGVtZW50cyI6e3R5cGU6InNhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudCIsbXVsdGlwbGU6dHJ1ZSxzaW5ndWxhck5hbWU6ImVsZW1lbnQifX19fSk7c2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50LnByb3RvdHlwZS5hcHBseVNldHRpbmdzPWZ1bmN0aW9uKHMpe3NhcC51aS5jb3JlLkNvbnRyb2wucHJvdG90eXBlLmFwcGx5U2V0dGluZ3MuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PXRoaXMsbT10aGlzLmdldE1ldGFkYXRhKCksaj1tLmdldEpTT05LZXlzKCk7alF1ZXJ5LmVhY2gocyxmdW5jdGlvbihrLHYpe2lmKGshPT0iaWQiJiZrIT09InRleHQiJiYhaltrXSYmdHlwZW9mIHY9PT0ic3RyaW5nIil7dC5hdHRyKGssdil9fSl9O3NhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudC5wcm90b3R5cGUuZXhpdD1zYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRUYWcoKS50b0xvd2VyQ2FzZSgpO2lmKHQ9PT0iaW5wdXQifHx0PT09InRleHRhcmVhInx8dD09PSJzZWxlY3QiKXt0aGlzLiQoKS5vZmYoImNoYW5nZSIpfX07c2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50LnByb3RvdHlwZS5vbkFmdGVyUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRUYWcoKS50b0xvd2VyQ2FzZSgpO2lmKHQ9PT0iaW5wdXQifHx0PT09InRleHRhcmVhInx8dD09PSJzZWxlY3QiKXt0aGlzLiQoKS5vbigiY2hhbmdlIixqUXVlcnkucHJveHkodGhpcy5vbmlucHV0Y2hhbmdlLHRoaXMpKX19O3NhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudC5wcm90b3R5cGUub25pbnB1dGNoYW5nZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldFRhZygpLnRvTG93ZXJDYXNlKCk7aWYodD09PSJpbnB1dCIpe3ZhciB2PXRoaXMuJCgpLnZhbCgpO2pRdWVyeS5lYWNoKHRoaXMuZ2V0QXR0cmlidXRlcygpLGZ1bmN0aW9uKGksYSl7aWYoYS5nZXROYW1lKCkudG9Mb3dlckNhc2UoKT09PSJ2YWx1ZSIpe2Euc2V0VmFsdWUodil9fSl9ZWxzZSBpZih0PT09InRleHRhcmVhIil7dmFyIFQ9dGhpcy4kKCkudmFsKCk7dGhpcy5zZXRUZXh0KFQpfWVsc2UgaWYodD09PSJzZWxlY3QiKXt2YXIgVD0iIjt0aGlzLiQoKS5maW5kKCJzZWxlY3Qgb3B0aW9uOnNlbGVjdGVkIikuZWFjaChmdW5jdGlvbigpe1QrPWpRdWVyeSh0aGlzKS50ZXh0KCkrIiAifSk7dGhpcy5zZXRUZXh0KFQpfX07c2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50LnByb3RvdHlwZS5hdHRyPWZ1bmN0aW9uKGssdil7dmFyIGE9dGhpcy5nZXRBdHRyaWJ1dGVzKCksQTtqUXVlcnkuZWFjaChhLGZ1bmN0aW9uKGksVil7dmFyIG49Vi5nZXROYW1lKCk7aWYobi50b0xvd2VyQ2FzZSgpPT09ayl7QT1WO3JldHVybiBmYWxzZX19KTtpZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gQSYmQS5nZXRWYWx1ZSgpfWVsc2V7aWYoQSl7aWYodj09PW51bGwpe3RoaXMucmVtb3ZlQXR0cmlidXRlKEEpfWVsc2V7QS5zZXRWYWx1ZSh2KX19ZWxzZXtpZih2IT09bnVsbCl7dGhpcy5hZGRBdHRyaWJ1dGUobmV3IHNhcC51aS5jb3JlLnRtcGwuRE9NQXR0cmlidXRlKHtuYW1lOmssdmFsdWU6dn0pKX19cmV0dXJuIHRoaXN9fTtzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUF0dHI9ZnVuY3Rpb24oayl7dGhpcy5hdHRyKGssbnVsbCk7cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudC5wcm90b3R5cGUuc2V0VGV4dD1mdW5jdGlvbih0KXt0aGlzLnNldFByb3BlcnR5KCJ0ZXh0Iix0LHRydWUpO3ZhciAkPXRoaXMuJCgpO2lmKCQubGVuZ3RoPjApe3ZhciBUPXRoaXMuZ2V0VGFnKCkudG9Mb3dlckNhc2UoKTtpZihUPT09InRleHRhcmVhIil7JC52YWwodGhpcy5nZXRQcm9wZXJ0eSgidGV4dCIpKX1lbHNleyQudGV4dCh0aGlzLmdldFByb3BlcnR5KCJ0ZXh0IikpfX19O3JldHVybiBzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdG1wbC9UZW1wbGF0ZUNvbnRyb2wiLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJ3NhcC91aS9jb3JlL0NvbnRyb2wnLCcuL0RPTUVsZW1lbnQnLCcuL0RPTUF0dHJpYnV0ZScsJ3NhcC91aS9jb3JlL0RlY2xhcmF0aXZlU3VwcG9ydCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkNvbnRyb2wuZXh0ZW5kKCJzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbCIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7ImNvbnRleHQiOnt0eXBlOiJvYmplY3QiLGdyb3VwOiJEYXRhIixkZWZhdWx0VmFsdWU6bnVsbH19LGFnZ3JlZ2F0aW9uczp7ImNvbnRyb2xzIjp7dHlwZToic2FwLnVpLmNvcmUuQ29udHJvbCIsbXVsdGlwbGU6dHJ1ZSxzaW5ndWxhck5hbWU6ImNvbnRyb2wiLHZpc2liaWxpdHk6ImhpZGRlbiJ9fSxhc3NvY2lhdGlvbnM6eyJ0ZW1wbGF0ZSI6e3R5cGU6InNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGUiLG11bHRpcGxlOmZhbHNlfX0sZXZlbnRzOnsiYWZ0ZXJSZW5kZXJpbmciOnt9LCJiZWZvcmVSZW5kZXJpbmciOnt9fX19KTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5NX0VWRU5UUz17J2FmdGVyUmVuZGVyaW5nJzonYWZ0ZXJSZW5kZXJpbmcnLCdiZWZvcmVSZW5kZXJpbmcnOidiZWZvcmVSZW5kZXJpbmcnfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuX2FCaW5kaW5nSW5mb3M9W119O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5pc0lubGluZT1mdW5jdGlvbigpe3ZhciBpPWZhbHNlO2lmKHRoaXMuZ2V0UGFyZW50KClpbnN0YW5jZW9mIHNhcC51aS5jb3JlLlVJQXJlYSYmalF1ZXJ5KHRoaXMuZ2V0UGFyZW50KCkuZ2V0Um9vdE5vZGUoKSkuYXR0cigiaWQiKT09PXRoaXMuZ2V0SWQoKSl7aT10cnVlfXJldHVybiBpfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUucGxhY2VBdD1mdW5jdGlvbihyLHApe3ZhciBpPXRoaXMuaXNJbmxpbmUoKTt2YXIgJD10aGlzLiQoKSx1PXRoaXMuZ2V0VUlBcmVhKCk7c2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUucGxhY2VBdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoaSYmJC5sZW5ndGg9PT0xKXskLnJlbW92ZSgpO3UuZGVzdHJveUNvbnRlbnQoKX19O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5nZXRUZW1wbGF0ZVJlbmRlcmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm5SZW5kZXJlcn07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLnNldFRlbXBsYXRlUmVuZGVyZXI9ZnVuY3Rpb24ocil7dGhpcy5mblJlbmRlcmVyPXI7cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5fY2xlYW51cD1mdW5jdGlvbigpe3RoaXMuZGVzdHJveUFnZ3JlZ2F0aW9uKCJjb250cm9scyIpO2lmKHRoaXMuX2FCaW5kaW5nSW5mb3Mpe3ZhciB0PXRoaXM7alF1ZXJ5LmVhY2godGhpcy5fYUJpbmRpbmdJbmZvcyxmdW5jdGlvbihpLGIpe3QuZ2V0TW9kZWwoYi5tb2RlbCkucmVtb3ZlQmluZGluZyhiLmJpbmRpbmcpfSk7dGhpcy5fYUJpbmRpbmdJbmZvcz1bXX19O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5fY29tcGlsZT1mdW5jdGlvbigpe3ZhciB0PXNhcC51aS5nZXRDb3JlKCkuYnlJZCh0aGlzLmdldFRlbXBsYXRlKCkpLGQ9dCYmdC5nZXREZWNsYXJhdGl2ZVN1cHBvcnQoKTtpZihkKXt2YXIgYT10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzYXAudWkuY29yZS5EZWNsYXJhdGl2ZVN1cHBvcnQuY29tcGlsZShhLmdldERvbVJlZigpKX0pfX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmV4aXQ9ZnVuY3Rpb24oKXt0aGlzLl9jbGVhbnVwKCl9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5vbkJlZm9yZVJlbmRlcmluZz1mdW5jdGlvbigpe3RoaXMuZmlyZUJlZm9yZVJlbmRlcmluZygpO3RoaXMuX2NsZWFudXAoKX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt0aGlzLmZpcmVBZnRlclJlbmRlcmluZygpfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUudXBkYXRlQmluZGluZ3M9ZnVuY3Rpb24odSxtKXtzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LnByb3RvdHlwZS51cGRhdGVCaW5kaW5ncy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5nZXREb21SZWYoKSl7dGhpcy5pbnZhbGlkYXRlKCl9fTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihwLHQpe3ZhciBQPXNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGUucGFyc2VQYXRoKHApLG09dGhpcy5nZXRNb2RlbChQLm1vZGVsKSxwPVAucGF0aCxNPXQ/ImJpbmQiK2pRdWVyeS5zYXAuY2hhclRvVXBwZXJDYXNlKHQpOiJiaW5kUHJvcGVydHkiLGI9bSYmbVtNXShwKSxhPXRoaXM7aWYoYil7Yi5hdHRhY2hDaGFuZ2UoZnVuY3Rpb24oKXtqUXVlcnkuc2FwLmxvZy5kZWJ1ZygiVGVtcGxhdGVDb250cm9sIyIrYS5nZXRJZCgpKyI6ICIrdCsiIGJpbmRpbmcgY2hhbmdlZCBmb3IgcGF0aCBcIiIrcCsiXCIiKTthLmludmFsaWRhdGUoKX0pfXRoaXMuX2FCaW5kaW5nSW5mb3MucHVzaCh7YmluZGluZzpiLHBhdGg6UC5wYXRoLG1vZGVsOlAubW9kZWx9KTtyZXR1cm4gYn07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmJpbmRQcm9wPWZ1bmN0aW9uKHApe3ZhciBiPXRoaXMuYmluZChwLCJwcm9wZXJ0eSIpO3JldHVybiBiJiZiLmdldEV4dGVybmFsVmFsdWUoKX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmJpbmRMaXN0PWZ1bmN0aW9uKHApe3ZhciBiPXRoaXMuYmluZChwLCJsaXN0IiksbT1iJiZiLmdldE1vZGVsKCkscD1iJiZiLmdldFBhdGgoKTtyZXR1cm4gYiYmbS5nZXRQcm9wZXJ0eShwKX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmNyZWF0ZURPTUVsZW1lbnQ9ZnVuY3Rpb24ocyxwLGQpe3ZhciBlPW5ldyBzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQocyk7aWYocCl7ZS5iaW5kRWxlbWVudChwKX1pZighZCl7dGhpcy5hZGRBZ2dyZWdhdGlvbigiY29udHJvbHMiLGUpfXJldHVybiBlfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuY3JlYXRlQ29udHJvbD1mdW5jdGlvbihzLHAsZCx2KXt2YXIgaD17fTtqUXVlcnkuZWFjaChzLGZ1bmN0aW9uKGssVil7aFsiZGF0YS0iK2pRdWVyeS5zYXAuaHlwaGVuKGspXT1WfSk7dmFyICQ9alF1ZXJ5KCI8ZGl2Lz4iLGgpO3ZhciBjPXNhcC51aS5jb3JlLkRlY2xhcmF0aXZlU3VwcG9ydC5fY3JlYXRlQ29udHJvbCgkLmdldCgwKSx2KTtpZihwKXtjLmJpbmRFbGVtZW50KHApfWlmKCFkKXt0aGlzLmFkZEFnZ3JlZ2F0aW9uKCJjb250cm9scyIsYyl9cmV0dXJuIGN9O3JldHVybiBzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL0V4cG9ydCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL0NvbnRyb2wnLCcuL0V4cG9ydENvbHVtbicsJy4vRXhwb3J0Um93JywnLi9FeHBvcnRUeXBlJywnLi9GaWxlJ10sZnVuY3Rpb24ocSxDLEUsYSxiLEYpeyd1c2Ugc3RyaWN0Jzt2YXIgYz1DLmV4dGVuZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnQnLHttZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdlbmVyYXRlIiwic2F2ZUZpbGUiXSxsaWJyYXJ5OiJzYXAudWkuY29yZSIsYWdncmVnYXRpb25zOntleHBvcnRUeXBlOnt0eXBlOidzYXAudWkuY29yZS51dGlsLkV4cG9ydFR5cGUnLG11bHRpcGxlOmZhbHNlfSxjb2x1bW5zOnt0eXBlOidzYXAudWkuY29yZS51dGlsLkV4cG9ydENvbHVtbicsbXVsdGlwbGU6dHJ1ZSxiaW5kYWJsZTonYmluZGFibGUnfSxyb3dzOnt0eXBlOidzYXAudWkuY29yZS51dGlsLkV4cG9ydFJvdycsbXVsdGlwbGU6dHJ1ZSxiaW5kYWJsZTonYmluZGFibGUnfSxfdGVtcGxhdGU6e3R5cGU6J3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Um93JyxtdWx0aXBsZTpmYWxzZSx2aXNpYmlsaXR5OidoaWRkZW4nfX19fSk7Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpWyJyb3dzIl0uX2RvZXNOb3RSZXF1aXJlRmFjdG9yeT10cnVlO2MucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLl9vRGVmZXJyZWQ9bnVsbDt0aGlzLl9vUm93QmluZGluZ0luZm89bnVsbH07Yy5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLl9vRGVmZXJyZWQ7ZGVsZXRlIHRoaXMuX29Sb3dCaW5kaW5nSW5mb307Yy5wcm90b3R5cGUuX2NyZWF0ZVJvd1RlbXBsYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGEodGhpcy5nZXRJZCgpKyItcm93IiksZD10aGlzLmdldENvbHVtbnMoKTtmb3IodmFyIGk9MCxsPWQubGVuZ3RoO2k8bDtpKyspe3ZhciBvPWRbaV0uZ2V0VGVtcGxhdGUoKTtpZihvKXt0LmFkZENlbGwoby5jbG9uZSgiY29sIitpKSl9fXJldHVybiB0fTtjLnByb3RvdHlwZS5iaW5kQWdncmVnYXRpb249ZnVuY3Rpb24obixCKXtpZihuPT09J3Jvd3MnKXt0aGlzLl9vUm93QmluZGluZ0luZm89QjtyZXR1cm4gdGhpc31yZXR1cm4gQy5wcm90b3R5cGUuYmluZEFnZ3JlZ2F0aW9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07Yy5wcm90b3R5cGUudXBkYXRlUm93cz1mdW5jdGlvbihyKXtpZihyPT09J2NoYW5nZScpe3ZhciBzPXRoaXMuZ2V0RXhwb3J0VHlwZSgpLl9nZW5lcmF0ZSh0aGlzKTt0aGlzLmRlc3Ryb3lBZ2dyZWdhdGlvbignX3RlbXBsYXRlJyk7dGhpcy51bmJpbmRBZ2dyZWdhdGlvbigncm93cycpO3RoaXMuX29EZWZlcnJlZC5yZXNvbHZlV2l0aCh0aGlzLFtzXSk7dGhpcy5fb0RlZmVycmVkPW51bGx9fTtjLnByb3RvdHlwZS5nZW5lcmF0ZT1mdW5jdGlvbigpe2lmKCF0aGlzLl9vRGVmZXJyZWQpe3RoaXMuX29EZWZlcnJlZD1xLkRlZmVycmVkKCk7dmFyIHA9dGhpcy5fb0RlZmVycmVkLnByb21pc2UoKTtpZighdGhpcy5oYXNNb2RlbCgpKXt0aGlzLl9vRGVmZXJyZWQucmVqZWN0V2l0aCh0aGlzLFsiR2VuZXJhdGUgaXMgbm90IHBvc3NpYmxlIGJlYXVzZSBubyBtb2RlbCB3YXMgc2V0LiJdKX1lbHNle3ZhciB0PXRoaXMuX2NyZWF0ZVJvd1RlbXBsYXRlKCk7dGhpcy5zZXRBZ2dyZWdhdGlvbignX3RlbXBsYXRlJyx0LHRydWUpO0MucHJvdG90eXBlLmJpbmRBZ2dyZWdhdGlvbi5jYWxsKHRoaXMsJ3Jvd3MnLHRoaXMuX29Sb3dCaW5kaW5nSW5mbyk7aWYodGhpcy5nZXRCaW5kaW5nKCJyb3dzIikpe3RoaXMuZ2V0QmluZGluZygicm93cyIpLmdldENvbnRleHRzKDAsdGhpcy5nZXRCaW5kaW5nKCJyb3dzIikuZ2V0TGVuZ3RoKCkpfX1yZXR1cm4gcH1yZXR1cm4gdGhpcy5fb0RlZmVycmVkLnByb21pc2UoKX07Yy5wcm90b3R5cGUuc2F2ZUZpbGU9ZnVuY3Rpb24oZil7cmV0dXJuIHRoaXMuZ2VuZXJhdGUoKS50aGVuKGZ1bmN0aW9uKHMpe3ZhciBlPXRoaXMuZ2V0RXhwb3J0VHlwZSgpO0Yuc2F2ZShzLGZ8fCJkYXRhIixlLmdldEZpbGVFeHRlbnNpb24oKSxlLmdldE1pbWVUeXBlKCksZS5nZXRDaGFyc2V0KCkpfSl9O3JldHVybiBjfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQnVzeUluZGljYXRvcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkJ1c3lJbmRpY2F0b3InKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9CdXN5SW5kaWNhdG9yIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Qb3B1cCddLGZ1bmN0aW9uKHEsUCl7InVzZSBzdHJpY3QiO3ZhciBCPXEuZXh0ZW5kKHEuc2FwLm5ld09iamVjdChzYXAudWkuYmFzZS5FdmVudFByb3ZpZGVyLnByb3RvdHlwZSkse29Qb3B1cDpudWxsLG9Eb21SZWY6bnVsbCxiT3BlblJlcXVlc3RlZDpmYWxzZSxpREVGQVVMVF9ERUxBWV9NUzoxMDAwLHNET01fSUQ6InNhcFVpQnVzeUluZGljYXRvciJ9KTtzYXAudWkuYmFzZS5FdmVudFByb3ZpZGVyLmFwcGx5KEIpO0IuTV9FVkVOVFM9e09wZW46Ik9wZW4iLENsb3NlOiJDbG9zZSJ9O0IuX2luaXQ9ZnVuY3Rpb24oKXt2YXIgcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyLmlkPXRoaXMuc0RPTV9JRDt0aGlzLl9vUmVzQnVuZGxlPXNhcC51aS5nZXRDb3JlKCkuZ2V0TGlicmFyeVJlc291cmNlQnVuZGxlKCJzYXAudWkuY29yZSIpO3ZhciB0PXRoaXMuX29SZXNCdW5kbGUuZ2V0VGV4dCgiQlVTWV9URVhUIik7ZGVsZXRlIHRoaXMuX29SZXNCdW5kbGU7dmFyIGk9c2FwLnVpLmdldENvcmUoKS5nZXRTdGF0aWNBcmVhUmVmKCk7aS5hcHBlbmRDaGlsZChyKTtxKHIpLmFkZENsYXNzKCJzYXBVaUJ1c3kiKS5hdHRyKCJ0YWJpbmRleCIsMCkuYXR0cigicm9sZSIsInByb2dyZXNzYmFyIikuYXR0cigiYWx0IiwiIikuYXR0cigidGl0bGUiLHQpO3RoaXMub0RvbVJlZj1yO3RoaXMub1BvcHVwPW5ldyBQKHIpO3RoaXMub1BvcHVwLnNldE1vZGFsKHRydWUsInNhcFVpQmx5QnVzeSIpO3RoaXMub1BvcHVwLnNldFNoYWRvdyhmYWxzZSk7aWYoc2FwLnVpLkRldmljZS5icm93c2VyLm1zaWUmJnNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPD05KXt0aGlzLl9pQnVzeVBhZ2VXaWR0aD1xKGRvY3VtZW50LmJvZHkpLndpZHRoKCk7dGhpcy5faUJ1c3lMZWZ0PTA7dGhpcy5faUJ1c3lEZWx0YT02MDt0aGlzLl9pQnVzeVRpbWVTdGVwPTUwO3RoaXMuX2lCdXN5V2lkdGg9NTAwO3RoaXMuYXR0YWNoT3Blbih0aGlzLl9JRUFuaW1hdGlvbix0aGlzKX19O0IuX0lFQW5pbWF0aW9uPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl8kQnVzeUluZGljYXRvciYmZSl7dGhpcy5fJEJ1c3lJbmRpY2F0b3I9ZS5nZXRQYXJhbWV0ZXIoIiRCdXN5Iil9cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9pQW5pbWF0aW9uVGltZW91dCk7dGhpcy5faUJ1c3lMZWZ0Kz10aGlzLl9pQnVzeURlbHRhO2lmKHRoaXMuX2lCdXN5TGVmdD50aGlzLl9pQnVzeVBhZ2VXaWR0aCl7dGhpcy5faUJ1c3lMZWZ0PS10aGlzLl9pQnVzeVdpZHRofWlmKCF0aGlzLl8kQnVzeUluZGljYXRvcil7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9pQW5pbWF0aW9uVGltZW91dCl9ZWxzZXt0aGlzLl8kQnVzeUluZGljYXRvci5jc3MoImJhY2tncm91bmQtcG9zaXRpb24iLHRoaXMuX2lCdXN5TGVmdCsicHggMHB4Iik7dGhpcy5faUFuaW1hdGlvblRpbWVvdXQ9cS5zYXAuZGVsYXllZENhbGwodGhpcy5faUJ1c3lUaW1lU3RlcCx0aGlzLHRoaXMuX0lFQW5pbWF0aW9uKX19O0Iuc2hvdz1mdW5jdGlvbihkKXtxLnNhcC5sb2cuZGVidWcoInNhcC51aS5jb3JlLkJ1c3lJbmRpY2F0b3Iuc2hvdyAoZGVsYXk6ICIrZCsiKSBhdCAiK25ldyBEYXRlKCkuZ2V0VGltZSgpKTtpZigoZD09PXVuZGVmaW5lZCl8fCgoZCE9MCkmJihwYXJzZUludChkLDEwKT09MCkpfHwocGFyc2VJbnQoZCwxMCk8MCkpe2Q9dGhpcy5pREVGQVVMVF9ERUxBWV9NU310aGlzLmJPcGVuUmVxdWVzdGVkPXRydWU7aWYoZD09PTApe3RoaXMuX3Nob3dOb3dJZlJlcXVlc3RlZCgpfWVsc2V7cS5zYXAuZGVsYXllZENhbGwoZCx0aGlzLCJfc2hvd05vd0lmUmVxdWVzdGVkIil9fTtCLl9zaG93Tm93SWZSZXF1ZXN0ZWQ9ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZGVidWcoInNhcC51aS5jb3JlLkJ1c3lJbmRpY2F0b3IuX3Nob3dOb3dJZlJlcXVlc3RlZCAoYk9wZW5SZXF1ZXN0ZWQ6ICIrdGhpcy5iT3BlblJlcXVlc3RlZCsiKSBhdCAiK25ldyBEYXRlKCkuZ2V0VGltZSgpKTtpZighdGhpcy5iT3BlblJlcXVlc3RlZCl7cmV0dXJufWlmKCFkb2N1bWVudC5ib2R5fHwhc2FwLnVpLmdldENvcmUoKS5pc0luaXRpYWxpemVkKCkpe3Euc2FwLmRlbGF5ZWRDYWxsKDEwMCx0aGlzLCJfc2hvd05vd0lmUmVxdWVzdGVkIik7cmV0dXJufXRoaXMuYk9wZW5SZXF1ZXN0ZWQ9ZmFsc2U7aWYoIXRoaXMub0RvbVJlZil7dGhpcy5faW5pdCgpfXRoaXMub1BvcHVwLm9wZW4oMCxQLkRvY2suQ2VudGVyQ2VudGVyLFAuRG9jay5DZW50ZXJDZW50ZXIsZG9jdW1lbnQpO3RoaXMuZmlyZU9wZW4oeyRCdXN5OnRoaXMub1BvcHVwLl8kKCl9KTt2YXIgZD1xLnNhcC5kb21CeUlkKEIuc0RPTV9JRCk7cS5zYXAuZm9jdXMoZCk7cSgiYm9keSIpLmF0dHIoImFyaWEtYnVzeSIsdHJ1ZSl9O0IuaGlkZT1mdW5jdGlvbigpe3Euc2FwLmxvZy5kZWJ1Zygic2FwLnVpLmNvcmUuQnVzeUluZGljYXRvci5oaWRlIGF0ICIrbmV3IERhdGUoKS5nZXRUaW1lKCkpO3ZhciB0PUI7dC5iT3BlblJlcXVlc3RlZD1mYWxzZTtpZih0Lm9Eb21SZWYpe3EoImJvZHkiKS5yZW1vdmVBdHRyKCJhcmlhLWJ1c3kiKTt0aGlzLmZpcmVDbG9zZSh7JEJ1c3k6dGhpcy5vUG9wdXAuXyQoKX0pO3Qub1BvcHVwLmNsb3NlKDApfWRlbGV0ZSB0aGlzLl8kQnVzeUluZGljYXRvcn07Qi5hdHRhY2hPcGVuPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChCLk1fRVZFTlRTLk9wZW4sZixsKTtyZXR1cm4gdGhpc307Qi5kZXRhY2hPcGVuPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChCLk1fRVZFTlRTLk9wZW4sZixsKTtyZXR1cm4gdGhpc307Qi5hdHRhY2hDbG9zZT1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoQi5NX0VWRU5UUy5DbG9zZSxmLGwpO3JldHVybiB0aGlzfTtCLmRldGFjaENsb3NlPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChCLk1fRVZFTlRTLkNsb3NlLGYsbCk7cmV0dXJuIHRoaXN9O0IuZmlyZU9wZW49ZnVuY3Rpb24ocCl7dGhpcy5maXJlRXZlbnQoQi5NX0VWRU5UUy5PcGVuLHApfTtCLmZpcmVDbG9zZT1mdW5jdGlvbihwKXt0aGlzLmZpcmVFdmVudChCLk1fRVZFTlRTLkNsb3NlLHApfTtyZXR1cm4gQn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0NvbXBvbmVudENvbnRhaW5lciIsWycuL2xpYnJhcnknLCcuL0NvbnRyb2wnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyIix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsibmFtZSI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IiIsZGVmYXVsdFZhbHVlOm51bGx9LCJ1cmwiOnt0eXBlOiJzYXAudWkuY29yZS5VUkkiLGdyb3VwOiIiLGRlZmF1bHRWYWx1ZTpudWxsfSwic2V0dGluZ3MiOnt0eXBlOiJvYmplY3QiLGdyb3VwOiIiLGRlZmF1bHRWYWx1ZTpudWxsfSwicHJvcGFnYXRlTW9kZWwiOnt0eXBlOiJib29sZWFuIixncm91cDoiIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJ3aWR0aCI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTpudWxsfSwiaGVpZ2h0Ijp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9fSxhc3NvY2lhdGlvbnM6eyJjb21wb25lbnQiOnt0eXBlOiJzYXAudWkuY29yZS5VSUNvbXBvbmVudCIsbXVsdGlwbGU6ZmFsc2V9fX19KTtzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIucHJvdG90eXBlLmdldENvbXBvbmVudEluc3RhbmNlPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRDb21wb25lbnQoKTtyZXR1cm4gc2FwLnVpLmdldENvcmUoKS5nZXRDb21wb25lbnQoYyl9O3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuc2V0Q29tcG9uZW50PWZ1bmN0aW9uKGMscyl7dmFyIG89dGhpcy5nZXRDb21wb25lbnRJbnN0YW5jZSgpO2lmKG8pe28uc2V0Q29udGFpbmVyKHVuZGVmaW5lZCl9dGhpcy5zZXRBc3NvY2lhdGlvbigiY29tcG9uZW50IixjLHMpO2M9dGhpcy5nZXRDb21wb25lbnRJbnN0YW5jZSgpO2lmKGMpe2Muc2V0Q29udGFpbmVyKHRoaXMpO3RoaXMucHJvcGFnYXRlUHJvcGVydGllcygpfX07c2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5vbkJlZm9yZVJlbmRlcmluZz1mdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0Q29tcG9uZW50SW5zdGFuY2UoKTtpZighYyl7dmFyIG49dGhpcy5nZXROYW1lKCk7aWYobil7Yz1zYXAudWkuY29tcG9uZW50KHtuYW1lOm4sdXJsOnRoaXMuZ2V0VXJsKCksc2V0dGluZ3M6dGhpcy5nZXRTZXR0aW5ncygpfSk7dGhpcy5zZXRDb21wb25lbnQoYyx0cnVlKX19aWYoYyYmYy5vbkJlZm9yZVJlbmRlcmluZyl7Yy5vbkJlZm9yZVJlbmRlcmluZygpfX07c2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5vbkFmdGVyUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRDb21wb25lbnRJbnN0YW5jZSgpO2lmKGMmJmMub25BZnRlclJlbmRlcmluZyl7Yy5vbkFmdGVyUmVuZGVyaW5nKCl9fTtzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIucHJvdG90eXBlLmV4aXQ9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldENvbXBvbmVudEluc3RhbmNlKCk7aWYoYyl7Yy5kZXN0cm95KCl9fTtzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIucHJvdG90eXBlLnByb3BhZ2F0ZVByb3BlcnRpZXM9ZnVuY3Rpb24obil7dmFyIGM9dGhpcy5nZXRDb21wb25lbnRJbnN0YW5jZSgpO2lmKGMmJnRoaXMuZ2V0UHJvcGFnYXRlTW9kZWwoKSl7dGhpcy5fcHJvcGFnYXRlUHJvcGVydGllcyhuLGMpO3NhcC51aS5jb3JlLkNvbnRyb2wucHJvdG90eXBlLnByb3BhZ2F0ZVByb3BlcnRpZXMuYXBwbHkodGhpcyxhcmd1bWVudHMpfX07cmV0dXJuIHNhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lcn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkNvbXBvc2l0ZVN1cHBvcnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Db21wb3NpdGVTdXBwb3J0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ29tcG9zaXRlU3VwcG9ydCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQ29udHJvbCcsJ3NhcC91aS9tb2RlbC9jb250cm9sL0NvbnRyb2xNb2RlbCddLGZ1bmN0aW9uKHEsQyxhKXsidXNlIHN0cmljdCI7dmFyIGI9e307Yi5taXhJbnRvPWZ1bmN0aW9uKGMsZixtKXtpZihhcmd1bWVudHMubGVuZ3RoPT0yJiZ0eXBlb2YgZj09PSJvYmplY3QiKXttPWY7Zj0iQ29tcG9uZW50RmFjdG9yeSJ9ZnVuY3Rpb24gXygpe3ZhciBNPWMuZ2V0TWV0YWRhdGEoKTtkb3tNPU0uZ2V0UGFyZW50KCk7aWYoTSYmTS5nZXRDb21wb25lbnRGYWN0b3J5Q2xhc3Mpe3JldHVybiBNLmdldENvbXBvbmVudEZhY3RvcnlDbGFzcygpfX13aGlsZShNKTtyZXR1cm4gc2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeX1jW2ZdPShfKCkpLnN1YmNsYXNzKG0pO2MuZ2V0TWV0YWRhdGEoKS5nZXRDb21wb25lbnRGYWN0b3J5Q2xhc3M9cS5zYXAuZ2V0dGVyKGNbZl0pO2lmKCFjLnByb3RvdHlwZS5faW5pdENvbXBvc2l0ZVN1cHBvcnQpe2MucHJvdG90eXBlLl9pbml0Q29tcG9zaXRlU3VwcG9ydD1mdW5jdGlvbihzKXt2YXIgRj1uZXcodGhpcy5nZXRNZXRhZGF0YSgpLmdldENvbXBvbmVudEZhY3RvcnlDbGFzcygpKSh0aGlzKTtpZihzLmNvbXBvbmVudEZhY3Rvcnkpe0YuY3VzdG9taXplKHMuY29tcG9uZW50RmFjdG9yeSk7ZGVsZXRlIHMuY29tcG9uZW50RmFjdG9yeX10aGlzLmdldENvbXBvbmVudEZhY3Rvcnk9cS5zYXAuZ2V0dGVyKEYpfX1pZighYy5wcm90b3R5cGUuX2V4aXRDb21wb3NpdGVTdXBwb3J0KXtjLnByb3RvdHlwZS5fZXhpdENvbXBvc2l0ZVN1cHBvcnQ9ZnVuY3Rpb24oKXt0aGlzLmdldENvbXBvbmVudEZhY3RvcnkoKS5kZXN0cm95KCk7ZGVsZXRlIHRoaXMuZ2V0Q29tcG9uZW50RmFjdG9yeX19fTtzYXAudWkuYmFzZS5FdmVudFByb3ZpZGVyLmV4dGVuZCgic2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGMpe3NhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIuYXBwbHkodGhpcyk7dGhpcy5vQ29tcG9zaXRlPWM7cmV0dXJuIHRoaXN9fSk7c2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeS5wcm90b3R5cGUuYXR0YWNoQ2hhbmdlPWZ1bmN0aW9uKGYsbyl7dGhpcy5nZXRNb2RlbCgpO3RoaXMuYXR0YWNoRXZlbnQoImNoYW5nZSIsZixvKTtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeS5wcm90b3R5cGUuZGV0YWNoQ2hhbmdlPWZ1bmN0aW9uKGYsbyl7dGhpcy5nZXRNb2RlbCgpO3RoaXMuZGV0YWNoRXZlbnQoImNoYW5nZSIsZixvKTtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeS5wcm90b3R5cGUuZ2V0TW9kZWw9ZnVuY3Rpb24oKXtpZighdGhpcy5vTW9kZWwpe3ZhciB0PXRoaXM7dGhpcy5vTW9kZWw9bmV3IGEodGhpcy5vQ29tcG9zaXRlKTt0aGlzLm9Nb2RlbC5fb25jaGFuZ2U9ZnVuY3Rpb24oZSl7dC5maXJlRXZlbnQoImNoYW5nZSIsZS5nZXRQYXJhbWV0ZXJzJiZlLmdldFBhcmFtZXRlcnMoKSl9fXJldHVybiB0aGlzLm9Nb2RlbH07c2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeS5wcm90b3R5cGUuYWRkRmFjYWRlQ29tcG9uZW50PWZ1bmN0aW9uKGUpe3RoaXMuZ2V0TW9kZWwoKS5hZGQoZSl9O3NhcC51aS5jb3JlLkNvbXBvbmVudEZhY3RvcnkucHJvdG90eXBlLnJlbW92ZUZhY2FkZUNvbXBvbmVudD1mdW5jdGlvbihlKXt0aGlzLmdldE1vZGVsKCkucmVtb3ZlKGUpfTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBfKG8sbSxkKXtxLmVhY2gobSxmdW5jdGlvbihuLGYpe2lmKG4uaW5kZXhPZigiZGVmYXVsdCIpIT0wKXtvW25dPWZ9aWYoZCYmbi5pbmRleE9mKCJjcmVhdGUiKT09MCl7b1siZGVmYXVsdEMiK24uc3Vic3RyaW5nKDEpXT1vW25dfX0pfWZ1bmN0aW9uIGMoQil7cmV0dXJuIGZ1bmN0aW9uKG0pe3ZhciBmPWZ1bmN0aW9uKCl7Qi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2YucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChCLnByb3RvdHlwZSk7XyhmLnByb3RvdHlwZSxtLHRydWUpO2YuY3VzdG9taXplPWZ1bmN0aW9uKG0pe18oZi5wcm90b3R5cGUsbSk7cmV0dXJuIHRoaXN9O2Yuc3ViY2xhc3M9YyhmKTtyZXR1cm4gZn19c2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeS5zdWJjbGFzcz1jKHNhcC51aS5jb3JlLkNvbXBvbmVudEZhY3RvcnkpO3NhcC51aS5jb3JlLkNvbXBvbmVudEZhY3RvcnkucHJvdG90eXBlLmN1c3RvbWl6ZT1mdW5jdGlvbihtKXtfKHRoaXMsbSk7aWYodGhpcy5vQ29tcG9zaXRlJiZ0aGlzLm9Db21wb3NpdGUuX29uQ29tcG9uZW50RmFjdG9yeUNoYW5nZWQpe3RoaXMub0NvbXBvc2l0ZS5fb25Db21wb25lbnRGYWN0b3J5Q2hhbmdlZCgpfXJldHVybiB0aGlzfX0oKSk7cmV0dXJuIGJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5VSUNvbXBvbmVudCcpKXsKLyoKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlVJQ29tcG9uZW50Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVUlDb21wb25lbnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0NvbXBvbmVudCcsJy4vVUlDb21wb25lbnRNZXRhZGF0YScsJy4vbXZjL1ZpZXcnXSxmdW5jdGlvbihxLEMsVSxWKXsidXNlIHN0cmljdCI7dmFyIGE9Qy5leHRlbmQoInNhcC51aS5jb3JlLlVJQ29tcG9uZW50Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzKXt0cnl7Qy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9Y2F0Y2goZSl7aWYodGhpcy5fb1JvdXRlcil7dGhpcy5fb1JvdXRlci5kZXN0cm95KCl9dGhyb3cgZX19LG1ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUscm9vdFZpZXc6bnVsbCxwdWJsaWNNZXRob2RzOlsicmVuZGVyIl0sYWdncmVnYXRpb25zOnsicm9vdENvbnRyb2wiOnt0eXBlOiJzYXAudWkuY29yZS5Db250cm9sIixtdWx0aXBsZTpmYWxzZSx2aXNpYmlsaXR5OiJoaWRkZW4ifX0scm91dGluZzp7fX19LFUpO2EucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3ZhciBwPXt9O2lmKHRoaXMuZ2V0QXV0b1ByZWZpeElkKCkpe3AuaWQ9ZnVuY3Rpb24oaSl7cmV0dXJuIHQuY3JlYXRlSWQoaSl9fXZhciBtPXRoaXMuZ2V0TWV0YWRhdGEoKTt2YXIgcj1xLmV4dGVuZCh7fSxtLmdldFJvdXRpbmdDb25maWcoKSk7dmFyIFI9bS5nZXRSb3V0ZXMoKTtpZihSKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS5yb3V0aW5nLlJvdXRlciIpO3ZhciBmPXIucm91dGVyQ2xhc3N8fHNhcC51aS5jb3JlLnJvdXRpbmcuUm91dGVyO3RoaXMuX29Sb3V0ZXI9bmV3IGYoUixyLHRoaXMpfXNhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QucnVuV2l0aE93bmVyKGZ1bmN0aW9uKCl7c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe3Quc2V0QWdncmVnYXRpb24oInJvb3RDb250cm9sIix0LmNyZWF0ZUNvbnRlbnQoKSl9LHApfSx0aGlzKTt2YXIgbz10aGlzLmdldEFnZ3JlZ2F0aW9uKCJyb290Q29udHJvbCIpO2lmKG8gaW5zdGFuY2VvZiBWKXtpZihyLnRhcmdldFBhcmVudD09PXVuZGVmaW5lZCl7ci50YXJnZXRQYXJlbnQ9by5nZXRJZCgpfX19O2EucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLl9vUm91dGVyKXt0aGlzLl9vUm91dGVyLmRlc3Ryb3koKTtkZWxldGUgdGhpcy5fb1JvdXRlcn1DLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07YS5nZXRSb3V0ZXJGb3I9ZnVuY3Rpb24oYyl7dmFyIHY9YztpZih2IGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUubXZjLkNvbnRyb2xsZXIpe3Y9di5nZXRWaWV3KCl9aWYodiBpbnN0YW5jZW9mIFYpe3ZhciBvPUMuZ2V0T3duZXJJZEZvcih2KSxiPXNhcC51aS5jb21wb25lbnQobyk7aWYoYil7cmV0dXJuIGIuZ2V0Um91dGVyKCl9ZWxzZXtyZXR1cm4gdW5kZWZpbmVkfX19O2EucHJvdG90eXBlLmdldFJvdXRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUm91dGVyfTthLnByb3RvdHlwZS5nZXRBdXRvUHJlZml4SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9O2EucHJvdG90eXBlLmJ5SWQ9ZnVuY3Rpb24oaSl7cmV0dXJuIHNhcC51aS5nZXRDb3JlKCkuYnlJZCh0aGlzLmNyZWF0ZUlkKGkpKX07YS5wcm90b3R5cGUuY3JlYXRlSWQ9ZnVuY3Rpb24oaSl7aWYoIXRoaXMuaXNQcmVmaXhlZElkKGkpKXtpPXRoaXMuZ2V0SWQoKSsiLS0tIitpfXJldHVybiBpfTthLnByb3RvdHlwZS5pc1ByZWZpeGVkSWQ9ZnVuY3Rpb24oaSl7cmV0dXJuKGkmJmkuaW5kZXhPZih0aGlzLmdldElkKCkrIi0tLSIpPT09MCl9O2EucHJvdG90eXBlLmNyZWF0ZUNvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgcj10aGlzLmdldE1ldGFkYXRhKCkuZ2V0Um9vdFZpZXcoKTtpZihyKXtyZXR1cm4gc2FwLnVpLnZpZXcocil9cmV0dXJuIG51bGx9O2EucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihyKXt2YXIgYz10aGlzLmdldEFnZ3JlZ2F0aW9uKCJyb290Q29udHJvbCIpO2lmKGMmJnIpe3IucmVuZGVyQ29udHJvbChjKX19O2EucHJvdG90eXBlLmdldFVJQXJlYT1mdW5jdGlvbigpe3JldHVybih0aGlzLm9Db250YWluZXI/dGhpcy5vQ29udGFpbmVyLmdldFVJQXJlYSgpOm51bGwpfTthLnByb3RvdHlwZS5nZXRFdmVudGluZ1BhcmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFVJQXJlYSgpfTthLnByb3RvdHlwZS5zZXRDb250YWluZXI9ZnVuY3Rpb24oYyl7dGhpcy5vQ29udGFpbmVyPWM7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7fTthLnByb3RvdHlwZS5vbkFmdGVyUmVuZGVyaW5nPWZ1bmN0aW9uKCl7fTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldycpKXsKLyohCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvSFRNTFZpZXciLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJy4vVmlldycsJ3NhcC91aS9jb3JlL0RlY2xhcmF0aXZlU3VwcG9ydCcsJ3NhcC91aS9jb3JlL1JlbmRlck1hbmFnZXInXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5tdmMuVmlldy5leHRlbmQoInNhcC51aS5jb3JlLm12Yy5IVE1MVmlldyIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSJ9fSk7c2FwLnVpLmh0bWx2aWV3PWZ1bmN0aW9uKGksdil7cmV0dXJuIHNhcC51aS52aWV3KGksdixzYXAudWkuY29yZS5tdmMuVmlld1R5cGUuSFRNTCl9O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5fc1R5cGU9c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLkhUTUw7c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9tVGVtcGxhdGVzPXt9O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5fbUFsbG93ZWRTZXR0aW5ncz17InZpZXdOYW1lIjp0cnVlLCJjb250cm9sbGVyIjp0cnVlLCJ2aWV3Q29udGVudCI6dHJ1ZSwiY29udHJvbGxlck5hbWUiOnRydWUsInJlc291cmNlQnVuZGxlTmFtZSI6dHJ1ZSwicmVzb3VyY2VCdW5kbGVVcmwiOnRydWUsInJlc291cmNlQnVuZGxlTG9jYWxlIjp0cnVlLCJyZXNvdXJjZUJ1bmRsZUFsaWFzIjp0cnVlfTtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcuX2dldFRlbXBsYXRlPWZ1bmN0aW9uKHQpe3ZhciB1PXRoaXMuX2dldFZpZXdVcmwodCk7dmFyIGg9dGhpcy5fbVRlbXBsYXRlc1t1XTtpZighaCl7aD10aGlzLl9sb2FkVGVtcGxhdGUodCk7dGhpcy5fbVRlbXBsYXRlc1t1XT1ofXJldHVybiBofTtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcucHJvdG90eXBlLmdldENvbnRyb2xsZXJOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRyb2xsZXJOYW1lfTtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcuX2dldFZpZXdVcmw9ZnVuY3Rpb24odCl7cmV0dXJuIGpRdWVyeS5zYXAuZ2V0TW9kdWxlUGF0aCh0LCIudmlldy5odG1sIil9O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5fbG9hZFRlbXBsYXRlPWZ1bmN0aW9uKHQpe3ZhciByPWpRdWVyeS5zYXAuZ2V0UmVzb3VyY2VOYW1lKHQsIi52aWV3Lmh0bWwiKTtyZXR1cm4galF1ZXJ5LnNhcC5sb2FkUmVzb3VyY2Uocil9O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5wcm90b3R5cGUuaW5pdFZpZXdTZXR0aW5ncz1mdW5jdGlvbihzKXtpZighcyl7dGhyb3cgbmV3IEVycm9yKCJtU2V0dGluZ3MgbXVzdCBiZSBnaXZlbiIpfWlmKHMudmlld05hbWUmJnMudmlld0NvbnRlbnQpe3Rocm93IG5ldyBFcnJvcigiVmlldyBuYW1lIGFuZCB2aWV3IGNvbnRlbnQgYXJlIGdpdmVuLiBUaGVyZSBpcyBubyBwb2ludCBpbiBkb2luZyB0aGlzLCBzbyBwbGVhc2UgZGVjaWRlLiIpfWVsc2UgaWYoIXMudmlld05hbWUmJiFzLnZpZXdDb250ZW50KXt0aHJvdyBuZXcgRXJyb3IoIk5laXRoZXIgdmlldyBuYW1lIG5vciB2aWV3IGNvbnRlbnQgaXMgZ2l2ZW4uIE9uZSBvZiB0aGVtIGlzIHJlcXVpcmVkLiIpfXZhciBoPXMudmlld0NvbnRlbnR8fHNhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5fZ2V0VGVtcGxhdGUocy52aWV3TmFtZSk7dGhpcy5fb1RlbXBsYXRlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3ZhciBoPXNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIucHJlcGFyZUhUTUw1KGgpO2lmKHR5cGVvZiBoPT09InN0cmluZyIpe3RoaXMuX29UZW1wbGF0ZS5pbm5lckhUTUw9aH1lbHNle3ZhciBuPWg7dmFyIGY9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXtmLmFwcGVuZENoaWxkKG4uaXRlbShpKSl9dGhpcy5fb1RlbXBsYXRlLmFwcGVuZENoaWxkKGYpfXZhciBtPXRoaXMuX29UZW1wbGF0ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGVtcGxhdGUiKVswXTt2YXIgcD10aGlzLmdldE1ldGFkYXRhKCkuZ2V0QWxsUHJvcGVydGllcygpO2lmKG0pe3ZhciBhPXRoaXM7dmFyIEQ9c2FwLnVpLmNvcmUuRGVjbGFyYXRpdmVTdXBwb3J0O2pRdWVyeS5lYWNoKG0uYXR0cmlidXRlcyxmdW5jdGlvbihJLEEpe3ZhciBOPUQuY29udmVydEF0dHJpYnV0ZVRvU2V0dGluZ05hbWUoQS5uYW1lLGEuZ2V0SWQoKSk7dmFyIHY9QS52YWx1ZTt2YXIgUD1wW05dO2lmKCFzW05dKXtpZihQKXtzW05dPUQuY29udmVydFZhbHVlVG9UeXBlKEQuZ2V0UHJvcGVydHlEYXRhVHlwZShQKSx2KX1lbHNlIGlmKHNhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5fbUFsbG93ZWRTZXR0aW5nc1tOXSl7c1tOXT12fX19KTt0aGlzLl9vVGVtcGxhdGU9bX1pZih0aGlzLl9vVGVtcGxhdGUuY29udGVudCl7dmFyIGY9dGhpcy5fb1RlbXBsYXRlLmNvbnRlbnQ7dGhpcy5fb1RlbXBsYXRlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuX29UZW1wbGF0ZS5hcHBlbmRDaGlsZChmKX1pZihzLmNvbnRyb2xsZXJOYW1lKXt0aGlzLl9jb250cm9sbGVyTmFtZT1zLmNvbnRyb2xsZXJOYW1lfWlmKChzLnJlc291cmNlQnVuZGxlTmFtZXx8cy5yZXNvdXJjZUJ1bmRsZVVybCkmJighcy5tb2RlbHN8fCFzLm1vZGVsc1tzLnJlc291cmNlQnVuZGxlQWxpYXNdKSl7dmFyIGI9bmV3IHNhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZU1vZGVsKHtidW5kbGVOYW1lOnMucmVzb3VyY2VCdW5kbGVOYW1lLGJ1bmRsZVVybDpzLnJlc291cmNlQnVuZGxlVXJsLGJ1bmRsZUxvY2FsZTpzLnJlc291cmNlQnVuZGxlTG9jYWxlfSk7dGhpcy5zZXRNb2RlbChiLHMucmVzb3VyY2VCdW5kbGVBbGlhcyl9fTtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcucHJvdG90eXBlLm9uQ29udHJvbGxlckNvbm5lY3RlZD1mdW5jdGlvbihjKXt2YXIgcz10aGlzO3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QucnVuV2l0aFByZXByb2Nlc3NvcnMoZnVuY3Rpb24oKXtzYXAudWkuY29yZS5EZWNsYXJhdGl2ZVN1cHBvcnQuY29tcGlsZShzLl9vVGVtcGxhdGUscyl9KX07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3LnByb3RvdHlwZS5leGl0PWZ1bmN0aW9uKCl7dGhpcy5fb1RlbXBsYXRlPW51bGw7c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmV4aXQuY2FsbCh0aGlzKTtpZih0aGlzLl9jb25uZWN0ZWRDb250cm9scyl7Zm9yKHZhciBpPTA7aTx0aGlzLl9jb25uZWN0ZWRDb250cm9scy5sZW5ndGg7aSsrKXt0aGlzLl9jb25uZWN0ZWRDb250cm9sc1tpXS5kZXN0cm95KCl9dGhpcy5fY29ubmVjdGVkQ29udHJvbHM9bnVsbH19O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5wcm90b3R5cGUuY29ubmVjdENvbnRyb2w9ZnVuY3Rpb24oYyl7dGhpcy5fY29ubmVjdGVkQ29udHJvbHM9dGhpcy5fY29ubmVjdGVkQ29udHJvbHN8fFtdO3RoaXMuX2Nvbm5lY3RlZENvbnRyb2xzLnB1c2goYyl9O3JldHVybiBzYXAudWkuY29yZS5tdmMuSFRNTFZpZXd9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuSlNPTlZpZXcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuSlNPTlZpZXcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvSlNPTlZpZXciLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJy4vVmlldyddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLm12Yy5WaWV3LmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLkpTT05WaWV3Iix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIn19KTsoZnVuY3Rpb24oKXtzYXAudWkuanNvbnZpZXc9ZnVuY3Rpb24oaSx2KXtyZXR1cm4gc2FwLnVpLnZpZXcoaSx2LHNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5KU09OKX07c2FwLnVpLmNvcmUubXZjLkpTT05WaWV3Ll9zVHlwZT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuSlNPTjtzYXAudWkuY29yZS5tdmMuSlNPTlZpZXcucHJvdG90eXBlLmluaXRWaWV3U2V0dGluZ3M9ZnVuY3Rpb24ocyl7aWYoIXMpe3Rocm93IG5ldyBFcnJvcigibVNldHRpbmdzIG11c3QgYmUgZ2l2ZW4iKX1pZihzLnZpZXdOYW1lJiZzLnZpZXdDb250ZW50KXt0aHJvdyBuZXcgRXJyb3IoIlZpZXcgbmFtZSBhbmQgdmlldyBjb250ZW50IGFyZSBnaXZlbi4gVGhlcmUgaXMgbm8gcG9pbnQgaW4gZG9pbmcgdGhpcywgc28gcGxlYXNlIGRlY2lkZS4iKX1lbHNlIGlmKCFzLnZpZXdOYW1lJiYhcy52aWV3Q29udGVudCl7dGhyb3cgbmV3IEVycm9yKCJOZWl0aGVyIHZpZXcgbmFtZSBub3IgdmlldyBjb250ZW50IGlzIGdpdmVuLiBPbmUgb2YgdGhlbSBpcyByZXF1aXJlZC4iKX1pZihzLnZpZXdOYW1lKXt0aGlzLl9sb2FkVGVtcGxhdGUocy52aWV3TmFtZSl9ZWxzZSBpZihzLnZpZXdDb250ZW50KXt0aGlzLm1Qcm9wZXJ0aWVzWyJ2aWV3Q29udGVudCJdPXMudmlld0NvbnRlbnQ7aWYodHlwZW9mIHMudmlld0NvbnRlbnQ9PT0ic3RyaW5nIil7dGhpcy5fb0pTT05WaWV3PWpRdWVyeS5wYXJzZUpTT04ocy52aWV3Q29udGVudCk7aWYoIXRoaXMuX29KU09OVmlldyl7dGhyb3cgbmV3IEVycm9yKCJlcnJvciB3aGVuIHBhcnNpbmcgdmlld0NvbnRlbnQ6ICIrcy52aWV3Q29udGVudCl9fWVsc2UgaWYodHlwZW9mIHMudmlld0NvbnRlbnQ9PT0ib2JqZWN0Iil7dGhpcy5fb0pTT05WaWV3PXMudmlld0NvbnRlbnR9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoInZpZXdDb250ZW50IG11c3QgYmUgYSBKU09OIHN0cmluZyBvciBvYmplY3QsIGJ1dCBpcyBhICIrKHR5cGVvZiBzLnZpZXdDb250ZW50KSl9fWVsc2V7fWlmKCh0aGlzLl9vSlNPTlZpZXcucmVzb3VyY2VCdW5kbGVOYW1lfHx0aGlzLl9vSlNPTlZpZXcucmVzb3VyY2VCdW5kbGVVcmwpJiYoIXMubW9kZWxzfHwhcy5tb2RlbHNbdGhpcy5fb0pTT05WaWV3LnJlc291cmNlQnVuZGxlQWxpYXNdKSl7dmFyIG09bmV3IHNhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZU1vZGVsKHtidW5kbGVOYW1lOnRoaXMuX29KU09OVmlldy5yZXNvdXJjZUJ1bmRsZU5hbWUsYnVuZGxlVXJsOnRoaXMuX29KU09OVmlldy5yZXNvdXJjZUJ1bmRsZVVybH0pO3RoaXMuc2V0TW9kZWwobSx0aGlzLl9vSlNPTlZpZXcucmVzb3VyY2VCdW5kbGVBbGlhcyl9fTtzYXAudWkuY29yZS5tdmMuSlNPTlZpZXcucHJvdG90eXBlLm9uQ29udHJvbGxlckNvbm5lY3RlZD1mdW5jdGlvbihjKXt2YXIgdD10aGlzO3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QucnVuV2l0aFByZXByb2Nlc3NvcnMoZnVuY3Rpb24oKXt0LmFwcGx5U2V0dGluZ3Moe2NvbnRlbnQ6dC5fb0pTT05WaWV3LmNvbnRlbnR9KX0se2lkOmZ1bmN0aW9uKGkpe3JldHVybiB0LmNyZWF0ZUlkKGkpfSxzZXR0aW5nczpmdW5jdGlvbihzKXt2YXIgbT10aGlzLmdldE1ldGFkYXRhKCksdj1tLmdldEpTT05LZXlzKCksayxWLEs7Zm9yKGsgaW4gcyl7aWYoSz12W2tdKXtWPXNba107c3dpdGNoKEsuX2lLaW5kKXtjYXNlIDM6c1trXT10LmNyZWF0ZUlkKFYpO2JyZWFrO2Nhc2UgNTppZih0eXBlb2Ygc1trXT09PSJzdHJpbmciKXtzW2tdPVtjW3Nba11dLGNdfWJyZWFrfX19fX0pfTtzYXAudWkuY29yZS5tdmMuSlNPTlZpZXcucHJvdG90eXBlLl9sb2FkVGVtcGxhdGU9ZnVuY3Rpb24odCl7dmFyIHI9alF1ZXJ5LnNhcC5nZXRSZXNvdXJjZU5hbWUodCwiLnZpZXcuanNvbiIpO3RoaXMuX29KU09OVmlldz1qUXVlcnkuc2FwLmxvYWRSZXNvdXJjZShyKX07c2FwLnVpLmNvcmUubXZjLkpTT05WaWV3LnByb3RvdHlwZS5nZXRDb250cm9sbGVyTmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vSlNPTlZpZXcuY29udHJvbGxlck5hbWV9fSgpKTtyZXR1cm4gc2FwLnVpLmNvcmUubXZjLkpTT05WaWV3fSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLkpTVmlldycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5KU1ZpZXcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvSlNWaWV3IixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCcuL1ZpZXcnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5tdmMuVmlldy5leHRlbmQoInNhcC51aS5jb3JlLm12Yy5KU1ZpZXciLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUifX0pOyhmdW5jdGlvbigpe3ZhciByPXt9O3NhcC51aS5qc3ZpZXc9ZnVuY3Rpb24oaSx2KXt2YXIgcz17fTtpZih2JiZ0eXBlb2Yodik9PSJzdHJpbmciKXtzLnZpZXdOYW1lPXY7cy5jb250cm9sbGVyPWFyZ3VtZW50c1syXTt2YXIgVj1uZXcgc2FwLnVpLmNvcmUubXZjLkpTVmlldyhpLHMpO3JldHVybiBWfWVsc2UgaWYodiYmdHlwZW9mKHYpPT0ib2JqZWN0Iil7cltpXT12O2pRdWVyeS5zYXAuZGVjbGFyZSh7bW9kTmFtZTppLHR5cGU6InZpZXcifSxmYWxzZSl9ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT0xJiZ0eXBlb2YoYXJndW1lbnRzWzBdKT09InN0cmluZyIpe3Mudmlld05hbWU9aTtzLmNvbnRyb2xsZXI9YXJndW1lbnRzWzFdO3ZhciBWPXMuaWQ/bmV3IHNhcC51aS5jb3JlLm12Yy5KU1ZpZXcocy5pZCxzKTpuZXcgc2FwLnVpLmNvcmUubXZjLkpTVmlldyhzKTtyZXR1cm4gVn1lbHNle3Rocm93IG5ldyBFcnJvcigiV3JvbmcgYXJndW1lbnRzISBFaXRoZXIgY2FsbCBzYXAudWkuanN2aWV3KFtzSWQsXSBzVmlld05hbWUpIHRvIGluc3RhbnRpYXRlIGEgVmlldyBvciBzYXAudWkuanN2aWV3KHNWaWV3TmFtZSwgb1ZpZXdJbXBsKSB0byBkZWZpbmUgYSBWaWV3IHR5cGUuIil9fTtzYXAudWkuY29yZS5tdmMuSlNWaWV3LnByb3RvdHlwZS5pbml0Vmlld1NldHRpbmdzPWZ1bmN0aW9uKHMpe2lmKCFyW3Mudmlld05hbWVdKXtqUXVlcnkuc2FwLnJlcXVpcmUoe21vZE5hbWU6cy52aWV3TmFtZSx0eXBlOiJ2aWV3In0pfWpRdWVyeS5leHRlbmQodGhpcyxyW3Mudmlld05hbWVdKX07c2FwLnVpLmNvcmUubXZjLkpTVmlldy5wcm90b3R5cGUub25Db250cm9sbGVyQ29ubmVjdGVkPWZ1bmN0aW9uKGMpe3ZhciB0PXRoaXM7dmFyIHA9e307aWYodGhpcy5nZXRBdXRvUHJlZml4SWQoKSl7cC5pZD1mdW5jdGlvbihpKXtyZXR1cm4gdC5jcmVhdGVJZChpKX19c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe3QuYXBwbHlTZXR0aW5ncyh7Y29udGVudDp0LmNyZWF0ZUNvbnRlbnQoYyl9KX0scCl9O3NhcC51aS5jb3JlLm12Yy5KU1ZpZXcucHJvdG90eXBlLmdldEF1dG9QcmVmaXhJZD1mdW5jdGlvbigpe3JldHVybiBmYWxzZX19KCkpO3JldHVybiBzYXAudWkuY29yZS5tdmMuSlNWaWV3fSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvVGVtcGxhdGVWaWV3IixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCcuL1ZpZXcnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5tdmMuVmlldy5leHRlbmQoInNhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXciLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUifX0pOyhmdW5jdGlvbigpe3NhcC51aS50ZW1wbGF0ZXZpZXc9ZnVuY3Rpb24oaSx2KXtyZXR1cm4gc2FwLnVpLnZpZXcoaSx2LHNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5UZW1wbGF0ZSl9O3NhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXcuX3NUeXBlPXNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5UZW1wbGF0ZTtzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3LnByb3RvdHlwZS5nZXRDb250cm9sbGVyTmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zQ29udHJvbGxlck5hbWV9O3NhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXcuX2dldFZpZXdVcmw9ZnVuY3Rpb24odCl7cmV0dXJuIGpRdWVyeS5zYXAuZ2V0TW9kdWxlUGF0aCh0LCIudmlldy50bXBsIil9O3NhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXcucHJvdG90eXBlLmluaXRWaWV3U2V0dGluZ3M9ZnVuY3Rpb24ocyl7aWYoIXMpe3Rocm93IG5ldyBFcnJvcigibVNldHRpbmdzIG11c3QgYmUgZ2l2ZW4iKX1pZighcy52aWV3TmFtZSl7dGhyb3cgbmV3IEVycm9yKCJObyB2aWV3IG5hbWUgaXMgZ2l2ZW4uIil9dGhpcy5fb1RlbXBsYXRlPXNhcC51aS50ZW1wbGF0ZSh7aWQ6dGhpcy5nZXRJZCgpLHNyYzpzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3Ll9nZXRWaWV3VXJsKHMudmlld05hbWUpfSk7dGhpcy5fc0NvbnRyb2xsZXJOYW1lPXRoaXMuX29UZW1wbGF0ZS5fc0NvbnRyb2xsZXJOYW1lO3RoaXMuX29UZW1wbGF0ZT10aGlzLl9vVGVtcGxhdGUuY3JlYXRlQ29udHJvbCh1bmRlZmluZWQsdW5kZWZpbmVkLHRoaXMpO3RoaXMuYWRkQ29udGVudCh0aGlzLl9vVGVtcGxhdGUpfX0oKSk7cmV0dXJuIHNhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXd9LHRydWUpfTtzYXAudWkuZ2V0Q29yZSgpLmJvb3QmJnNhcC51aS5nZXRDb3JlKCkuYm9vdCgpOwp9IGNhdGNoKG9FcnJvcikgewppZiAob0Vycm9yLm5hbWUgIT0gIlJlc3RhcnQiKSB7IHRocm93IG9FcnJvcjsgfQp9Cg==",
                "body": "d2luZG93WyJzYXAtdWktb3B0aW1pemVkIl0gPSB0cnVlOwp0cnkgewovKiEKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwppZih3aW5kb3cualF1ZXJ5JiZ3aW5kb3cualF1ZXJ5LnNhcCYmd2luZG93LmpRdWVyeS5zYXAuZGVjbGFyZSl7d2luZG93LmpRdWVyeS5zYXAuZGVjbGFyZSgic2FwLnVpLkRldmljZSIsZmFsc2UpfWlmKHR5cGVvZiB3aW5kb3cuc2FwIT09Im9iamVjdCImJnR5cGVvZiB3aW5kb3cuc2FwIT09ImZ1bmN0aW9uIil7d2luZG93LnNhcD17fX1pZih0eXBlb2Ygd2luZG93LnNhcC51aSE9PSJvYmplY3QiKXt3aW5kb3cuc2FwLnVpPXt9fShmdW5jdGlvbigpe2lmKHR5cGVvZiB3aW5kb3cuc2FwLnVpLkRldmljZT09PSJvYmplY3QifHx0eXBlb2Ygd2luZG93LnNhcC51aS5EZXZpY2U9PT0iZnVuY3Rpb24iKXt2YXIgYz0iMS4yMi4xMCI7d2luZG93LnNhcC51aS5EZXZpY2UuX2NoZWNrQVBJVmVyc2lvbihjKTtyZXR1cm59dmFyIGQ9e307ZnVuY3Rpb24gcChpLHcpe3JldHVybigiMDAwIitTdHJpbmcoaSkpLnNsaWNlKC13KX12YXIgRj0wLEU9MSxXPTIsST0zLEQ9NCxUPTU7dmFyIGc9ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRDb21wb25lbnQ9J0RFVklDRSc7dGhpcy5zV2luZG93TmFtZT0od2luZG93LnRvcD09d2luZG93KT8iIjoiWyIrd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJykuc2xpY2UoLTEpWzBdKyJdICI7dGhpcy5sb2c9ZnVuY3Rpb24oaSxzLGEpe2E9YXx8dGhpcy5kZWZhdWx0Q29tcG9uZW50fHwnJzt2YXIgYj1uZXcgRGF0ZSgpLGU9e3RpbWU6cChiLmdldEhvdXJzKCksMikrIjoiK3AoYi5nZXRNaW51dGVzKCksMikrIjoiK3AoYi5nZXRTZWNvbmRzKCksMiksZGF0ZTpwKGIuZ2V0RnVsbFllYXIoKSw0KSsiLSIrcChiLmdldE1vbnRoKCkrMSwyKSsiLSIrcChiLmdldERhdGUoKSwyKSx0aW1lc3RhbXA6Yi5nZXRUaW1lKCksbGV2ZWw6aSxtZXNzYWdlOnN8fCIiLGNvbXBvbmVudDphfHwiIn07aWYod2luZG93LmNvbnNvbGUpe3ZhciBmPWUuZGF0ZSsiICIrZS50aW1lKyIgIit0aGlzLnNXaW5kb3dOYW1lK2UubWVzc2FnZSsiIC0gIitlLmNvbXBvbmVudDtzd2l0Y2goaSl7Y2FzZSBGOmNhc2UgRTpjb25zb2xlLmVycm9yKGYpO2JyZWFrO2Nhc2UgVzpjb25zb2xlLndhcm4oZik7YnJlYWs7Y2FzZSBJOmNvbnNvbGUuaW5mbz9jb25zb2xlLmluZm8oZik6Y29uc29sZS5sb2coZik7YnJlYWs7Y2FzZSBEOmNvbnNvbGUuZGVidWc/Y29uc29sZS5kZWJ1ZyhmKTpjb25zb2xlLmxvZyhmKTticmVhaztjYXNlIFQ6Y29uc29sZS50cmFjZT9jb25zb2xlLnRyYWNlKGYpOmNvbnNvbGUubG9nKGYpO2JyZWFrfX1yZXR1cm4gZX19O3ZhciBsPW5ldyBnKCk7bC5sb2coSSwiRGV2aWNlIEFQSSBsb2dnaW5nIGluaXRpYWxpemVkIik7ZC5fY2hlY2tBUElWZXJzaW9uPWZ1bmN0aW9uKHMpe3ZhciB2PSIxLjIyLjEwIjtpZih2IT1zKXtsLmxvZyhXLCJEZXZpY2UgQVBJIHZlcnNpb24gZGlmZmVyczogIit2KyIgPC0+ICIrcyl9fTt2YXIgaD17fTtmdW5jdGlvbiBqKGUsZixhKXtpZighaFtlXSl7aFtlXT1bXX1oW2VdLnB1c2goe29MaXN0ZW5lcjphLGZGdW5jdGlvbjpmfSl9O2Z1bmN0aW9uIGsoZSxmLGEpe3ZhciBiPWhbZV07aWYoIWIpe3JldHVybiB0aGlzfWZvcih2YXIgaT0wLHE9Yi5sZW5ndGg7aTxxO2krKyl7aWYoYltpXS5mRnVuY3Rpb249PT1mJiZiW2ldLm9MaXN0ZW5lcj09PWEpe2Iuc3BsaWNlKGksMSk7YnJlYWt9fWlmKGIubGVuZ3RoPT0wKXtkZWxldGUgaFtlXX19O2Z1bmN0aW9uIG4oZSxhKXt2YXIgYj1oW2VdLGY7aWYoYil7Yj1iLnNsaWNlKCk7Zm9yKHZhciBpPTAscT1iLmxlbmd0aDtpPHE7aSsrKXtmPWJbaV07Zi5mRnVuY3Rpb24uY2FsbChmLm9MaXN0ZW5lcnx8d2luZG93LGEpfX19O3ZhciBPPXsiV0lORE9XUyI6IndpbiIsIk1BQ0lOVE9TSCI6Im1hYyIsIkxJTlVYIjoibGludXgiLCJJT1MiOiJpT1MiLCJBTkRST0lEIjoiQW5kcm9pZCIsIkJMQUNLQkVSUlkiOiJiYiIsIldJTkRPV1NfUEhPTkUiOiJ3aW5waG9uZSJ9O2Z1bmN0aW9uIG8oYSl7ZnVuY3Rpb24gYigpe3ZhciBzPW5hdmlnYXRvci5wbGF0Zm9ybTtpZihzLmluZGV4T2YoIldpbiIpIT0tMSl7dmFyIHQ9L3dpbmRvd3MgTlQgNi4oXGQpL2k7dmFyIGY9YS5tYXRjaCh0KTt2YXIgdj0iIjtpZihmKXtpZihmWzFdPT0xKXt2PSI3In1lbHNlIGlmKGZbMV0+MSl7dj0iOCJ9fXJldHVybnsibmFtZSI6Ty5XSU5ET1dTLCJ2ZXJzaW9uU3RyIjp2fX1lbHNlIGlmKHMuaW5kZXhPZigiTWFjIikhPS0xKXtyZXR1cm57Im5hbWUiOk8uTUFDSU5UT1NILCJ2ZXJzaW9uU3RyIjoiIn19ZWxzZSBpZihzLmluZGV4T2YoIkxpbnV4IikhPS0xKXtyZXR1cm57Im5hbWUiOk8uTElOVVgsInZlcnNpb25TdHIiOiIifX1sLmxvZyhJLCJPUyBkZXRlY3Rpb24gcmV0dXJuZWQgbm8gcmVzdWx0Iik7cmV0dXJuIG51bGx9YT1hfHxuYXZpZ2F0b3IudXNlckFnZW50O3ZhciBlPS9cKChbYS16QS1aIF0rKTtccyg/OltVXT9bO10/KShbXERdKykoKD86W1xkLl9dKikpKD86LipbXCldW15cZF0qKShbXGQuXSopXHMvO3ZhciBmPWEubWF0Y2goZSk7aWYoZil7dmFyIGk9L2lQaG9uZXxpUGFkfGlQb2QvO3ZhciBxPS9QbGF5Qm9va3xCbGFja0JlcnJ5LztpZihmWzBdLm1hdGNoKGkpKXtmWzNdPWZbM10ucmVwbGFjZSgvXy9nLCIuIik7cmV0dXJuKHsibmFtZSI6Ty5JT1MsInZlcnNpb25TdHIiOmZbM119KX1lbHNlIGlmKGZbMl0ubWF0Y2goL0FuZHJvaWQvKSl7ZlsyXT1mWzJdLnJlcGxhY2UoL1xzL2csIiIpO3JldHVybih7Im5hbWUiOk8uQU5EUk9JRCwidmVyc2lvblN0ciI6ZlszXX0pfWVsc2UgaWYoZlswXS5tYXRjaChxKSl7cmV0dXJuKHsibmFtZSI6Ty5CTEFDS0JFUlJZLCJ2ZXJzaW9uU3RyIjpmWzRdfSl9ZWxzZXtyZXR1cm4gYigpfX1lbHNlIGlmKGEuaW5kZXhPZigiKEJCMTA7Iik+MCl7ZT0vXHNWZXJzaW9uXC8oW1xkLl0rKVxzLztmPWEubWF0Y2goZSk7aWYoZil7cmV0dXJueyJuYW1lIjpPLkJMQUNLQkVSUlksInZlcnNpb25TdHIiOmZbMV19fWVsc2V7cmV0dXJueyJuYW1lIjpPLkJMQUNLQkVSUlksInZlcnNpb25TdHIiOicxMCd9fX1lbHNle2U9L1dpbmRvd3MgUGhvbmUgKD86T1MgKT8oW1xkLl0qKS87Zj1hLm1hdGNoKGUpO2lmKGYpe3JldHVybih7Im5hbWUiOk8uV0lORE9XU19QSE9ORSwidmVyc2lvblN0ciI6ZlsxXX0pfWVsc2V7cmV0dXJuIGIoKX19fTtmdW5jdGlvbiByKCl7ZC5vcz1vKCl8fHt9O2Qub3MuT1M9TztkLm9zLnZlcnNpb249ZC5vcy52ZXJzaW9uU3RyP3BhcnNlRmxvYXQoZC5vcy52ZXJzaW9uU3RyKTotMTtpZihkLm9zLm5hbWUpe2Zvcih2YXIgYiBpbiBPKXtpZihPW2JdPT09ZC5vcy5uYW1lKXtkLm9zW2IudG9Mb3dlckNhc2UoKV09dHJ1ZX19fX1yKCk7dmFyIEI9eyJJTlRFUk5FVF9FWFBMT1JFUiI6ImllIiwiRklSRUZPWCI6ImZmIiwiQ0hST01FIjoiY3IiLCJTQUZBUkkiOiJzZiIsIkFORFJPSUQiOiJhbiJ9O3ZhciB1PW5hdmlnYXRvci51c2VyQWdlbnQ7Ci8qIQoJICogVGFrZW4gZnJvbSBqUXVlcnkgSmF2YVNjcmlwdCBMaWJyYXJ5IHYxLjcuMQoJICogaHR0cDovL2pxdWVyeS5jb20vCgkgKgoJICogQ29weXJpZ2h0IDIwMTEsIEpvaG4gUmVzaWcKCSAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLgoJICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQoJICoKCSAqIEluY2x1ZGVzIFNpenpsZS5qcwoJICogaHR0cDovL3NpenpsZWpzLmNvbS8KCSAqIENvcHlyaWdodCAyMDExLCBUaGUgRG9qbyBGb3VuZGF0aW9uCgkgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlULCBCU0QsIGFuZCBHUEwgTGljZW5zZXMuCgkgKgoJICogRGF0ZTogTW9uIE5vdiAyMSAyMToxMTowMyAyMDExIC0wNTAwCgkgKi8KZnVuY3Rpb24geShhKXt2YXIgYj0oYXx8dSkudG9Mb3dlckNhc2UoKTt2YXIgZT0vKHdlYmtpdClbIFwvXShbXHcuXSspLzt2YXIgZj0vKG9wZXJhKSg/Oi4qdmVyc2lvbik/WyBcL10oW1x3Ll0rKS87dmFyIGk9Lyhtc2llKSAoW1x3Ll0rKS87dmFyIHE9Lyh0cmlkZW50KVwvW1x3Ll0rOy4qcnY6KFtcdy5dKykvO3ZhciBzPS8obW96aWxsYSkoPzouKj8gcnY6KFtcdy5dKykpPy87dmFyIFY9ZS5leGVjKGIpfHxmLmV4ZWMoYil8fGkuZXhlYyhiKXx8cS5leGVjKGIpfHxiLmluZGV4T2YoImNvbXBhdGlibGUiKTwwJiZzLmV4ZWMoYil8fFtdO3ZhciB0PXticm93c2VyOlZbMV18fCIiLHZlcnNpb246VlsyXXx8IjAifTt0W3QuYnJvd3Nlcl09dHJ1ZTtyZXR1cm4gdH07ZnVuY3Rpb24geihhKXt2YXIgYj15KGEpO3ZhciBlPWF8fHU7aWYoYi5tb3ppbGxhKXtpZihlLm1hdGNoKC9GaXJlZm94XC8oXGQrXC5cZCspLykpe3ZhciB2PXBhcnNlRmxvYXQoUmVnRXhwLiQxKTtyZXR1cm57bmFtZTpCLkZJUkVGT1gsdmVyc2lvblN0cjoiIit2LHZlcnNpb246dixtb3ppbGxhOnRydWUsbW9iaWxlOmZhbHNlfX1lbHNle3JldHVybnttb2JpbGU6aS50ZXN0KGUpLG1vemlsbGE6dHJ1ZX19fWVsc2UgaWYoYi53ZWJraXQpe3ZhciBmPWUudG9Mb3dlckNhc2UoKS5tYXRjaCgvd2Via2l0W1wvXShbXGQuXSspLyk7aWYoZil7dmFyIHc9ZlsxXX12YXIgaT0vTW9iaWxlLztpZihlLm1hdGNoKC9DaHJvbWVcLyhcZCtcLlxkKykuXGQrLykpe3ZhciB2PXBhcnNlRmxvYXQoUmVnRXhwLiQxKTtyZXR1cm57bmFtZTpCLkNIUk9NRSx2ZXJzaW9uU3RyOiIiK3YsdmVyc2lvbjp2LG1vYmlsZTppLnRlc3QoZSksd2Via2l0OnRydWUsd2Via2l0VmVyc2lvbjp3fX1lbHNlIGlmKGUubWF0Y2goL0FuZHJvaWQgLisgVmVyc2lvblwvKFxkK1wuXGQrKS8pKXt2YXIgdj1wYXJzZUZsb2F0KFJlZ0V4cC4kMSk7cmV0dXJue25hbWU6Qi5BTkRST0lELHZlcnNpb25TdHI6IiIrdix2ZXJzaW9uOnYsbW9iaWxlOmkudGVzdChlKSx3ZWJraXQ6dHJ1ZSx3ZWJraXRWZXJzaW9uOnd9fWVsc2V7dmFyIHE9L1ZlcnNpb25cLyhcZCtcLlxkKykuKlNhZmFyaS87aWYocS50ZXN0KGUpKXt2YXIgdj1wYXJzZUZsb2F0KHEuZXhlYyhlKVsxXSk7cmV0dXJue25hbWU6Qi5TQUZBUkksdmVyc2lvblN0cjoiIit2LHZlcnNpb246dixtb2JpbGU6aS50ZXN0KGUpLHdlYmtpdDp0cnVlfX1lbHNle3JldHVybnttb2JpbGU6aS50ZXN0KGUpLHdlYmtpdDp0cnVlLHdlYmtpdFZlcnNpb246d319fX1lbHNlIGlmKGIubXNpZXx8Yi50cmlkZW50KXt2YXIgdjtpZihkb2N1bWVudC5kb2N1bWVudE1vZGUmJiFhKXtpZihkb2N1bWVudC5kb2N1bWVudE1vZGU9PT03KXt2PTguMH1lbHNle3Y9cGFyc2VGbG9hdChkb2N1bWVudC5kb2N1bWVudE1vZGUpfX1lbHNle3Y9cGFyc2VGbG9hdChiLnZlcnNpb24pfXJldHVybntuYW1lOkIuSU5URVJORVRfRVhQTE9SRVIsdmVyc2lvblN0cjoiIit2LHZlcnNpb246dixtc2llOnRydWUsbW9iaWxlOmZhbHNlfX1yZXR1cm57bmFtZToiIix2ZXJzaW9uU3RyOiIiLHZlcnNpb246LTEsbW9iaWxlOmZhbHNlfX07ZC5fdGVzdFVzZXJBZ2VudD16O2Z1bmN0aW9uIEEoKXtkLmJyb3dzZXI9eigpO2QuYnJvd3Nlci5CUk9XU0VSPUI7aWYoZC5icm93c2VyLm5hbWUpe2Zvcih2YXIgYiBpbiBCKXtpZihCW2JdPT09ZC5icm93c2VyLm5hbWUpe2QuYnJvd3NlcltiLnRvTG93ZXJDYXNlKCldPXRydWV9fX19QSgpO2Quc3VwcG9ydD17fTtkLnN1cHBvcnQudG91Y2g9ISEoKCdvbnRvdWNoc3RhcnQnaW4gd2luZG93KXx8d2luZG93LkRvY3VtZW50VG91Y2gmJmRvY3VtZW50IGluc3RhbmNlb2Ygd2luZG93LkRvY3VtZW50VG91Y2gpO2Quc3VwcG9ydC5tYXRjaG1lZGlhPSEhd2luZG93Lm1hdGNoTWVkaWE7dmFyIG09ZC5zdXBwb3J0Lm1hdGNobWVkaWE/d2luZG93Lm1hdGNoTWVkaWEoInNjcmVlbiBhbmQgKG1heC13aWR0aDowcHgpIik6bnVsbDtkLnN1cHBvcnQubWF0Y2htZWRpYWxpc3RlbmVyPSEhKG0mJm0uYWRkTGlzdGVuZXIpO2lmKGQuYnJvd3Nlci5zYWZhcmkmJmQuYnJvd3Nlci52ZXJzaW9uPDYpe2Quc3VwcG9ydC5tYXRjaG1lZGlhbGlzdGVuZXI9ZmFsc2V9ZC5zdXBwb3J0Lm9yaWVudGF0aW9uPSEhKCJvcmllbnRhdGlvbiJpbiB3aW5kb3cmJiJvbm9yaWVudGF0aW9uY2hhbmdlImluIHdpbmRvdyk7ZC5zdXBwb3J0LnJldGluYT0od2luZG93LnJldGluYXx8d2luZG93LmRldmljZVBpeGVsUmF0aW8+PTIpO2Quc3VwcG9ydC53ZWJzb2NrZXQ9KCdXZWJTb2NrZXQnaW4gd2luZG93KTtkLnN1cHBvcnQuaW5wdXQ9e307ZC5zdXBwb3J0LmlucHV0LnBsYWNlaG9sZGVyPSgncGxhY2Vob2xkZXInaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSk7ZC5tZWRpYT17fTt2YXIgUj17IlNBUF8zU1RFUFMiOiIzU3RlcCIsIlNBUF80U1RFUFMiOiI0U3RlcCIsIlNBUF82U1RFUFMiOiI2U3RlcCIsIlNBUF9TVEFOREFSRCI6IlN0ZCJ9O2QubWVkaWEuUkFOR0VTRVRTPVI7ZC5tZWRpYS5fcHJlZGVmaW5lZFJhbmdlU2V0cz17fTtkLm1lZGlhLl9wcmVkZWZpbmVkUmFuZ2VTZXRzW1IuU0FQXzNTVEVQU109e3BvaW50czpbNTIwLDk2MF0sdW5pdDoicHgiLG5hbWU6Ui5TQVBfM1NURVBTLG5hbWVzOlsiUyIsIk0iLCJMIl19O2QubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHNbUi5TQVBfNFNURVBTXT17cG9pbnRzOls1MjAsNzYwLDk2MF0sdW5pdDoicHgiLG5hbWU6Ui5TQVBfNFNURVBTLG5hbWVzOlsiUyIsIk0iLCJMIiwiWEwiXX07ZC5tZWRpYS5fcHJlZGVmaW5lZFJhbmdlU2V0c1tSLlNBUF82U1RFUFNdPXtwb2ludHM6WzI0MSw0MDAsNTQxLDc2OCw5NjBdLHVuaXQ6InB4IixuYW1lOlIuU0FQXzZTVEVQUyxuYW1lczpbIlhTIiwiUyIsIk0iLCJMIiwiWEwiLCJYWEwiXX07ZC5tZWRpYS5fcHJlZGVmaW5lZFJhbmdlU2V0c1tSLlNBUF9TVEFOREFSRF09e3BvaW50czpbNjAwLDEwMjRdLHVuaXQ6InB4IixuYW1lOlIuU0FQX1NUQU5EQVJELG5hbWVzOlsiUGhvbmUiLCJUYWJsZXQiLCJEZXNrdG9wIl19O3ZhciBfPVIuU0FQX1NUQU5EQVJEO3ZhciBDPWQuc3VwcG9ydC5tYXRjaG1lZGlhbGlzdGVuZXI/MDoxMDA7dmFyIEc9e307dmFyIEg9bnVsbDtmdW5jdGlvbiBKKGYsdCxhKXthPWF8fCJweCI7dmFyIHE9InNjcmVlbiI7aWYoZj4wKXtxPXErIiBhbmQgKG1pbi13aWR0aDoiK2YrYSsiKSJ9aWYodD4wKXtxPXErIiBhbmQgKG1heC13aWR0aDoiK3QrYSsiKSJ9cmV0dXJuIHF9O2Z1bmN0aW9uIEsoYSl7aWYoIWQuc3VwcG9ydC5tYXRjaG1lZGlhbGlzdGVuZXImJkg9PVEoKVswXSl7cmV0dXJufWlmKEdbYV0udGltZXIpe2NsZWFyVGltZW91dChHW2FdLnRpbWVyKTtHW2FdLnRpbWVyPW51bGx9R1thXS50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGI9TShhLGZhbHNlKTtpZihiKXtuKCJtZWRpYV8iK2EsYil9fSxDKX07ZnVuY3Rpb24gTChzLGkpe3ZhciBxPUdbc10ucXVlcmllc1tpXTt2YXIgYT17ZnJvbTpxLmZyb20sdW5pdDpHW3NdLnVuaXR9O2lmKHEudG8+PTApe2EudG89cS50b31pZihHW3NdLm5hbWVzKXthLm5hbWU9R1tzXS5uYW1lc1tpXX1yZXR1cm4gYX07ZnVuY3Rpb24gTShhLGIpe2lmKEdbYV0pe3ZhciBlPUdbYV0ucXVlcmllczt2YXIgZj1udWxsO2Zvcih2YXIgaT0wLHM9ZS5sZW5ndGg7aTxzO2krKyl7dmFyIHE9ZVtpXTtpZigocSE9R1thXS5jdXJyZW50cXVlcnl8fGIpJiZkLm1lZGlhLm1hdGNoZXMocS5mcm9tLHEudG8sR1thXS51bml0KSl7aWYoIWIpe0dbYV0uY3VycmVudHF1ZXJ5PXF9aWYoIUdbYV0ubm9DbGFzc2VzJiZHW2FdLm5hbWVzJiYhYil7TihhLEdbYV0ubmFtZXNbaV0pfWY9TChhLGkpfX1yZXR1cm4gZn1sLmxvZyhXLCJObyBxdWVyeXNldCB3aXRoIG5hbWUgIithKyIgZm91bmQiLCdERVZJQ0UuTUVESUEnKTtyZXR1cm4gbnVsbH07ZnVuY3Rpb24gTihzLGEsYil7dmFyIGU9InNhcFVpTWVkaWEtIitzKyItIjtQKGUrYSxiLGUpfTtmdW5jdGlvbiBQKHMsYixhKXt2YXIgZT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7aWYoZS5jbGFzc05hbWUubGVuZ3RoPT0wKXtpZighYil7ZS5jbGFzc05hbWU9c319ZWxzZXt2YXIgZj1lLmNsYXNzTmFtZS5zcGxpdCgiICIpO3ZhciBxPSIiO2Zvcih2YXIgaT0wO2k8Zi5sZW5ndGg7aSsrKXtpZigoYSYmZltpXS5pbmRleE9mKGEpIT0wKXx8KCFhJiZmW2ldIT1zKSl7cT1xK2ZbaV0rIiAifX1pZighYil7cT1xK3N9ZS5jbGFzc05hbWU9cX19O2Z1bmN0aW9uIFEoKXtyZXR1cm5bZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRdfTtmdW5jdGlvbiBTKHYsYSl7aWYoYT09PSJlbSJ8fGE9PT0icmVtIil7dmFyIHM9d2luZG93LmdldENvbXB1dGVkU3R5bGV8fGZ1bmN0aW9uKGUpe3JldHVybiBlLmN1cnJlbnRTdHlsZX07dmFyIHg9cyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmZvbnRTaXplO3ZhciBmPSh4JiZ4LmluZGV4T2YoInB4Iik+PTApP3BhcnNlRmxvYXQoeCwxMCk6MTY7cmV0dXJuIHYqZn1yZXR1cm4gdn07ZnVuY3Rpb24gVShmLHQsZSl7Zj1TKGYsZSk7dD1TKHQsZSk7dmFyIHc9USgpWzBdO3ZhciBhPWY8MHx8Zjw9dzt2YXIgYj10PDB8fHc8PXQ7cmV0dXJuIGEmJmJ9O2Z1bmN0aW9uIFYoZix0LGEpe3ZhciBxPUooZix0LGEpO3ZhciBtPXdpbmRvdy5tYXRjaE1lZGlhKHEpO3JldHVybiBtJiZtLm1hdGNoZXN9O2QubWVkaWEubWF0Y2hlcz1kLnN1cHBvcnQubWF0Y2htZWRpYT9WOlU7ZC5tZWRpYS5hdHRhY2hIYW5kbGVyPWZ1bmN0aW9uKGYsYSxzKXt2YXIgYj1zfHxfO2ooIm1lZGlhXyIrYixmLGEpfTtkLm1lZGlhLmRldGFjaEhhbmRsZXI9ZnVuY3Rpb24oZixhLHMpe3ZhciBiPXN8fF87aygibWVkaWFfIitiLGYsYSl9O2QubWVkaWEuaW5pdFJhbmdlU2V0PWZ1bmN0aW9uKHMsYSxiLGUsZil7dmFyIHQ7aWYoIXMpe3Q9ZC5tZWRpYS5fcHJlZGVmaW5lZFJhbmdlU2V0c1tfXX1lbHNlIGlmKHMmJmQubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHNbc10pe3Q9ZC5tZWRpYS5fcHJlZGVmaW5lZFJhbmdlU2V0c1tzXX1lbHNle3Q9e25hbWU6cyx1bml0OihifHwicHgiKS50b0xvd2VyQ2FzZSgpLHBvaW50czphfHxbXSxuYW1lczplLG5vQ2xhc3NlczohIWZ9fWlmKGQubWVkaWEuaGFzUmFuZ2VTZXQodC5uYW1lKSl7cmV0dXJuO2wubG9nKEksIlJhbmdlIHNldCAiK3QubmFtZSsiIGhhc2UgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkIiwnREVWSUNFLk1FRElBJyl9cz10Lm5hbWU7dC5xdWVyaWVzPVtdO3QudGltZXI9bnVsbDt0LmN1cnJlbnRxdWVyeT1udWxsO3QubGlzdGVuZXI9ZnVuY3Rpb24oKXtyZXR1cm4gSyhzKX07dmFyIHYsdyx4O3ZhciB4MT10LnBvaW50cztmb3IodmFyIGk9MCx5MT14MS5sZW5ndGg7aTw9eTE7aSsrKXt2PShpPT0wKT8wOngxW2ktMV07dz0oaT09eDEubGVuZ3RoKT8tMTp4MVtpXTt4PUoodix3LHQudW5pdCk7dC5xdWVyaWVzLnB1c2goe3F1ZXJ5OngsZnJvbTp2LHRvOnd9KX07aWYodC5uYW1lcyYmdC5uYW1lcy5sZW5ndGghPXQucXVlcmllcy5sZW5ndGgpe3QubmFtZXM9bnVsbH1HW3QubmFtZV09dDtpZihkLnN1cHBvcnQubWF0Y2htZWRpYWxpc3RlbmVyKXt2YXIgejE9dC5xdWVyaWVzO2Zvcih2YXIgaT0wO2k8ejEubGVuZ3RoO2krKyl7dmFyIHE9ejFbaV07cS5tZWRpYT13aW5kb3cubWF0Y2hNZWRpYShxLnF1ZXJ5KTtxLm1lZGlhLmFkZExpc3RlbmVyKHQubGlzdGVuZXIpfX1lbHNle2lmKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIix0Lmxpc3RlbmVyLGZhbHNlKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigib3JpZW50YXRpb25jaGFuZ2UiLHQubGlzdGVuZXIsZmFsc2UpfWVsc2V7d2luZG93LmF0dGFjaEV2ZW50KCJvbnJlc2l6ZSIsdC5saXN0ZW5lcil9fXQubGlzdGVuZXIoKX07ZC5tZWRpYS5nZXRDdXJyZW50UmFuZ2U9ZnVuY3Rpb24ocyl7aWYoIWQubWVkaWEuaGFzUmFuZ2VTZXQocykpe3JldHVybiBudWxsfXJldHVybiBNKHMsdHJ1ZSl9O2QubWVkaWEuaGFzUmFuZ2VTZXQ9ZnVuY3Rpb24ocyl7cmV0dXJuIHMmJiEhR1tzXX07ZC5tZWRpYS5yZW1vdmVSYW5nZVNldD1mdW5jdGlvbihzKXtpZighZC5tZWRpYS5oYXNSYW5nZVNldChzKSl7bC5sb2coSSwiUmFuZ2VTZXQgIitzKyIgbm90IGZvdW5kLCB0aHVzIGNvdWxkIG5vdCBiZSByZW1vdmVkLiIsJ0RFVklDRS5NRURJQScpO3JldHVybn1mb3IodmFyIHggaW4gUil7aWYocz09PVJbeF0pe2wubG9nKFcsIkNhbm5vdCByZW1vdmUgZGVmYXVsdCByYW5nZXNldCAtIG5vIGFjdGlvbiB0YWtlbi4iLCdERVZJQ0UuTUVESUEnKTtyZXR1cm59fXZhciBhPUdbc107aWYoZC5zdXBwb3J0Lm1hdGNobWVkaWFsaXN0ZW5lcil7dmFyIHE9YS5xdWVyaWVzO2Zvcih2YXIgaT0wO2k8cS5sZW5ndGg7aSsrKXtxW2ldLm1lZGlhLnJlbW92ZUxpc3RlbmVyKGEubGlzdGVuZXIpfX1lbHNle2lmKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIixhLmxpc3RlbmVyLGZhbHNlKTt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigib3JpZW50YXRpb25jaGFuZ2UiLGEubGlzdGVuZXIsZmFsc2UpfWVsc2V7d2luZG93LmRldGFjaEV2ZW50KCJvbnJlc2l6ZSIsYS5saXN0ZW5lcil9fU4ocywiIix0cnVlKTtkZWxldGUgaFsibWVkaWFfIitzXTtkZWxldGUgR1tzXX07dmFyIFg9eyJUQUJMRVQiOiJ0YWJsZXQiLCJQSE9ORSI6InBob25lIiwiREVTS1RPUCI6ImRlc2t0b3AiLCJDT01CSSI6ImNvbWJpIn07dmFyIFk9ZC5vcy53aW5kb3dzJiZkLm9zLnZlcnNpb249PT04O3ZhciBaPWQub3Mud2luZG93cyYmZC5vcy52ZXJzaW9uPT09NztkLnN5c3RlbT17fTtmdW5jdGlvbiAkKGEpe3ZhciB0PWExKCk7dmFyIHM9e307cy50YWJsZXQ9KChkLnN1cHBvcnQudG91Y2gmJiFaKXx8ISFhKSYmdDtzLnBob25lPSgoZC5zdXBwb3J0LnRvdWNoJiYhWil8fCEhYSkmJiF0O3MuZGVza3RvcD0oIXMudGFibGV0JiYhcy5waG9uZSl8fFl8fFo7cy5jb21iaT0ocy5kZXNrdG9wJiZzLnRhYmxldCk7cy5TWVNURU1UWVBFPVg7Zm9yKHZhciBiIGluIFgpe1AoInNhcC0iK1hbYl0sIXNbWFtiXV0pfXJldHVybiBzfTtmdW5jdGlvbiBhMSgpe3ZhciBhPSgvKD89YW5kcm9pZCkoPz0uKm1vYmlsZSkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKTt2YXIgYj1kLm9zLmFuZHJvaWQmJihkLm9zLnZlcnNpb24+PTQuNCkmJi9WZXJzaW9uXC9cZC5cZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtpZihkLm9zLm5hbWU9PT1kLm9zLk9TLklPUyl7cmV0dXJuL2lwYWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfWVsc2V7aWYoZC5zdXBwb3J0LnRvdWNoKXt2YXIgZT13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbz93aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbzoxO2lmKCFiJiYoZC5vcy5uYW1lPT09ZC5vcy5PUy5BTkRST0lEKSYmZC5icm93c2VyLndlYmtpdCYmKGQuYnJvd3Nlci53ZWJraXRWZXJzaW9uPjUzNy4xMCkpe2U9MX12YXIgdD0oTWF0aC5taW4od2luZG93LnNjcmVlbi53aWR0aC9lLHdpbmRvdy5zY3JlZW4uaGVpZ2h0L2UpPj02MDApO2lmKHQxKCkmJih3aW5kb3cuc2NyZWVuLmhlaWdodD09PTU1Mnx8d2luZG93LnNjcmVlbi5oZWlnaHQ9PT01NTMpJiYoL05leHVzIDcvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSl7dD10cnVlfXJldHVybiB0fWVsc2V7dmFyIGY9KGQub3MubmFtZT09PWQub3MuT1MuQU5EUk9JRCkmJiFhO3JldHVybiBmfX19O2Z1bmN0aW9uIGIxKGEpe2Quc3lzdGVtPSQoYSk7aWYoZC5zeXN0ZW0udGFibGV0fHxkLnN5c3RlbS5waG9uZSl7ZC5icm93c2VyLm1vYmlsZT10cnVlfX1iMSgpO2Qub3JpZW50YXRpb249e307ZC5yZXNpemU9e307ZC5vcmllbnRhdGlvbi5hdHRhY2hIYW5kbGVyPWZ1bmN0aW9uKGYsYSl7aigib3JpZW50YXRpb24iLGYsYSl9O2QucmVzaXplLmF0dGFjaEhhbmRsZXI9ZnVuY3Rpb24oZixhKXtqKCJyZXNpemUiLGYsYSl9O2Qub3JpZW50YXRpb24uZGV0YWNoSGFuZGxlcj1mdW5jdGlvbihmLGEpe2soIm9yaWVudGF0aW9uIixmLGEpfTtkLnJlc2l6ZS5kZXRhY2hIYW5kbGVyPWZ1bmN0aW9uKGYsYSl7aygicmVzaXplIixmLGEpfTtmdW5jdGlvbiBjMShpKXtpLmxhbmRzY2FwZT10MSh0cnVlKTtpLnBvcnRyYWl0PSFpLmxhbmRzY2FwZX07ZnVuY3Rpb24gZDEoKXtjMShkLm9yaWVudGF0aW9uKTtuKCJvcmllbnRhdGlvbiIse2xhbmRzY2FwZTpkLm9yaWVudGF0aW9uLmxhbmRzY2FwZX0pfTtmdW5jdGlvbiBlMSgpe2YxKGQucmVzaXplKTtuKCJyZXNpemUiLHtoZWlnaHQ6ZC5yZXNpemUuaGVpZ2h0LHdpZHRoOmQucmVzaXplLndpZHRofSl9O2Z1bmN0aW9uIGYxKGkpe2kud2lkdGg9USgpWzBdO2kuaGVpZ2h0PVEoKVsxXX07ZnVuY3Rpb24gZzEoKXt2YXIgdz1kLm9yaWVudGF0aW9uLmxhbmRzY2FwZTt2YXIgaT10MSgpO2lmKHchPWkpe2QxKCl9aWYoIWwxKXtsMT13aW5kb3cuc2V0VGltZW91dChoMSwxNTApfX07ZnVuY3Rpb24gaDEoKXtlMSgpO2wxPW51bGx9O3ZhciBpMT1mYWxzZTt2YXIgajE9ZmFsc2U7dmFyIGsxO3ZhciBsMTt2YXIgbTE7dmFyIG4xPVEoKVsxXTt2YXIgbzE9USgpWzBdO3ZhciBwMT1mYWxzZTt2YXIgcTE7dmFyIHIxPS9JTlBVVHxURVhUQVJFQXxTRUxFQ1QvO3ZhciBzMT1kLm9zLmlvcyYmZC5icm93c2VyLm5hbWU9PT0ic2YiJiYoKGQuc3lzdGVtLnBob25lJiZkLm9zLnZlcnNpb24+PTcmJmQub3MudmVyc2lvbjw3LjEpfHwoZC5zeXN0ZW0udGFibGV0JiZkLm9zLnZlcnNpb24+PTcpKTtmdW5jdGlvbiB0MShmKXtpZihkLnN1cHBvcnQudG91Y2gmJmQuc3VwcG9ydC5vcmllbnRhdGlvbil7aWYocDEmJmYpe3JldHVybiFkLm9yaWVudGF0aW9uLmxhbmRzY2FwZX1pZihwMSl7cmV0dXJuIGQub3JpZW50YXRpb24ubGFuZHNjYXBlfX1lbHNle2lmKGQuc3VwcG9ydC5tYXRjaG1lZGlhJiZkLnN1cHBvcnQub3JpZW50YXRpb24pe3JldHVybiEhd2luZG93Lm1hdGNoTWVkaWEoIihvcmllbnRhdGlvbjogbGFuZHNjYXBlKSIpLm1hdGNoZXN9fXZhciBzPVEoKTtyZXR1cm4gc1swXT5zWzFdfTtmdW5jdGlvbiB1MShlKXtpZihlLnR5cGU9PSJyZXNpemUiKXtpZihzMSYmcjEudGVzdChkb2N1bWVudC5hY3RpdmVFbGVtZW50LnRhZ05hbWUpJiYhaTEpe3JldHVybn12YXIgdz1RKClbMV07dmFyIGk9USgpWzBdO3ZhciB0PW5ldyBEYXRlKCkuZ2V0VGltZSgpO2lmKHc9PT1uMSYmaT09PW8xKXtyZXR1cm59ajE9dHJ1ZTtpZigobjEhPXcpJiYobzE9PWkpKXtpZighcTF8fCh0LXExPjMwMCkpe3AxPSh3PG4xKX1lMSgpfWVsc2V7bzE9aX1xMT10O24xPXc7aWYobTEpe3dpbmRvdy5jbGVhclRpbWVvdXQobTEpO20xPW51bGx9bTE9d2luZG93LnNldFRpbWVvdXQodzEsMTIwMCl9ZWxzZSBpZihlLnR5cGU9PSJvcmllbnRhdGlvbmNoYW5nZSIpe2kxPXRydWV9aWYoazEpe2NsZWFyVGltZW91dChrMSk7azE9bnVsbH1rMT13aW5kb3cuc2V0VGltZW91dCh2MSw1MCl9O2Z1bmN0aW9uIHYxKCl7aWYoaTEmJmoxKXtkMSgpO2UxKCk7aTE9ZmFsc2U7ajE9ZmFsc2U7aWYobTEpe3dpbmRvdy5jbGVhclRpbWVvdXQobTEpO20xPW51bGx9fWsxPW51bGx9O2Z1bmN0aW9uIHcxKCl7aTE9ZmFsc2U7ajE9ZmFsc2U7bTE9bnVsbH07ZC5fdXBkYXRlPWZ1bmN0aW9uKGEpe3U9bmF2aWdhdG9yLnVzZXJBZ2VudDtsLmxvZyhXLCJEZXZpY2UgQVBJIHZhbHVlcyBtYW5pcHVsYXRlZDogTk9UIFBST0RVQ1RJVkUgRkVBVFVSRSEhISBUaGlzIHNob3VsZCBiZSBvbmx5IHVzZWQgZm9yIHRlc3QgcHVycG9zZXMuIE9ubHkgdXNlIGlmIHlvdSBrbm93IHdoYXQgeW91IGFyZSBkb2luZy4iKTtBKCk7cigpO2IxKGEpfTtmMShkLnJlc2l6ZSk7YzEoZC5vcmllbnRhdGlvbik7d2luZG93LnNhcC51aS5EZXZpY2U9ZDtpZihkLnN1cHBvcnQudG91Y2gmJmQuc3VwcG9ydC5vcmllbnRhdGlvbil7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsdTEsZmFsc2UpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJvcmllbnRhdGlvbmNoYW5nZSIsdTEsZmFsc2UpfWVsc2V7aWYod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLGcxLGZhbHNlKX1lbHNle3dpbmRvdy5hdHRhY2hFdmVudCgib25yZXNpemUiLGcxKX19ZC5tZWRpYS5pbml0UmFuZ2VTZXQoKTtpZihzYXAudWkuZGVmaW5lKXtzYXAudWkuZGVmaW5lKCJzYXAvdWkvRGV2aWNlIixbXSxmdW5jdGlvbigpe3JldHVybiBkfSl9fSgpKTsKLyohCiAqIFVSSS5qcyAtIE11dGF0aW5nIFVSTHMKICogU2Vjb25kIExldmVsIERvbWFpbiAoU0xEKSBTdXBwb3J0CiAqCiAqIFZlcnNpb246IDEuMTEuMgogKgogKiBBdXRob3I6IFJvZG5leSBSZWhtCiAqIFdlYjogaHR0cDovL21lZGlhbGl6ZS5naXRodWIuY29tL1VSSS5qcy8KICoKICogTGljZW5zZWQgdW5kZXIKICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlCiAqICAgR1BMIHYzIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9HUEwtMy4wCiAqCiAqLwooZnVuY3Rpb24ocixmKXtpZih0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnKXttb2R1bGUuZXhwb3J0cz1mKCl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZCl7ZGVmaW5lKGYpfWVsc2V7ci5TZWNvbmRMZXZlbERvbWFpbnM9ZihyKX19KHRoaXMsZnVuY3Rpb24ocil7InVzZSBzdHJpY3QiO3ZhciBfPXImJnIuU2Vjb25kTGV2ZWxEb21haW5zO3ZhciBoPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dmFyIFM9e2xpc3Q6eyJhYyI6ImNvbXxnb3Z8bWlsfG5ldHxvcmciLCJhZSI6ImFjfGNvfGdvdnxtaWx8bmFtZXxuZXR8b3JnfHByb3xzY2giLCJhZiI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJhbCI6ImNvbXxlZHV8Z292fG1pbHxuZXR8b3JnIiwiYW8iOiJjb3xlZHxndnxpdHxvZ3xwYiIsImFyIjoiY29tfGVkdXxnb2J8Z292fGludHxtaWx8bmV0fG9yZ3x0dXIiLCJhdCI6ImFjfGNvfGd2fG9yIiwiYXUiOiJhc258Y29tfGNzaXJvfGVkdXxnb3Z8aWR8bmV0fG9yZyIsImJhIjoiY298Y29tfGVkdXxnb3Z8bWlsfG5ldHxvcmd8cnN8dW5iaXx1bm1vfHVuc2F8dW50enx1bnplIiwiYmIiOiJiaXp8Y298Y29tfGVkdXxnb3Z8aW5mb3xuZXR8b3JnfHN0b3JlfHR2IiwiYmgiOiJiaXp8Y2N8Y29tfGVkdXxnb3Z8aW5mb3xuZXR8b3JnIiwiYm4iOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwiYm8iOiJjb218ZWR1fGdvYnxnb3Z8aW50fG1pbHxuZXR8b3JnfHR2IiwiYnIiOiJhZG18YWR2fGFncnxhbXxhcnF8YXJ0fGF0b3xifGJpb3xibG9nfGJtZHxjaW18Y25nfGNudHxjb218Y29vcHxlY258ZWR1fGVuZ3xlc3B8ZXRjfGV0aXxmYXJ8ZmxvZ3xmbXxmbmR8Zm90fGZzdHxnMTJ8Z2dmfGdvdnxpbWJ8aW5kfGluZnxqb3J8anVzfGxlbHxtYXR8bWVkfG1pbHxtdXN8bmV0fG5vbXxub3R8bnRyfG9kb3xvcmd8cHBnfHByb3xwc2N8cHNpfHFzbHxyZWN8c2xnfHNydnx0bXB8dHJkfHR1cnx0dnx2ZXR8dmxvZ3x3aWtpfHpsZyIsImJzIjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsImJ6IjoiZHV8ZXR8b218b3Z8cmciLCJjYSI6ImFifGJjfG1ifG5ifG5mfG5sfG5zfG50fG51fG9ufHBlfHFjfHNrfHlrIiwiY2siOiJiaXp8Y298ZWR1fGdlbnxnb3Z8aW5mb3xuZXR8b3JnIiwiY24iOiJhY3xhaHxianxjb218Y3F8ZWR1fGZqfGdkfGdvdnxnc3xneHxnenxoYXxoYnxoZXxoaXxobHxobnxqbHxqc3xqeHxsbnxtaWx8bmV0fG5tfG54fG9yZ3xxaHxzY3xzZHxzaHxzbnxzeHx0anx0d3x4anx4enx5bnx6aiIsImNvIjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxub218b3JnIiwiY3IiOiJhY3xjfGNvfGVkfGZpfGdvfG9yfHNhIiwiY3kiOiJhY3xiaXp8Y29tfGVrbG9nZXN8Z292fGx0ZHxuYW1lfG5ldHxvcmd8cGFybGlhbWVudHxwcmVzc3xwcm98dG0iLCJkbyI6ImFydHxjb218ZWR1fGdvYnxnb3Z8bWlsfG5ldHxvcmd8c2xkfHdlYiIsImR6IjoiYXJ0fGFzc298Y29tfGVkdXxnb3Z8bmV0fG9yZ3xwb2wiLCJlYyI6ImNvbXxlZHV8ZmlufGdvdnxpbmZvfG1lZHxtaWx8bmV0fG9yZ3xwcm8iLCJlZyI6ImNvbXxlZHV8ZXVufGdvdnxtaWx8bmFtZXxuZXR8b3JnfHNjaSIsImVyIjoiY29tfGVkdXxnb3Z8aW5kfG1pbHxuZXR8b3JnfHJvY2hlc3R8dyIsImVzIjoiY29tfGVkdXxnb2J8bm9tfG9yZyIsImV0IjoiYml6fGNvbXxlZHV8Z292fGluZm98bmFtZXxuZXR8b3JnIiwiZmoiOiJhY3xiaXp8Y29tfGluZm98bWlsfG5hbWV8bmV0fG9yZ3xwcm8iLCJmayI6ImFjfGNvfGdvdnxuZXR8bm9tfG9yZyIsImZyIjoiYXNzb3xjb218Znxnb3V2fG5vbXxwcmR8cHJlc3NlfHRtIiwiZ2ciOiJjb3xuZXR8b3JnIiwiZ2giOiJjb218ZWR1fGdvdnxtaWx8b3JnIiwiZ24iOiJhY3xjb218Z292fG5ldHxvcmciLCJnciI6ImNvbXxlZHV8Z292fG1pbHxuZXR8b3JnIiwiZ3QiOiJjb218ZWR1fGdvYnxpbmR8bWlsfG5ldHxvcmciLCJndSI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJoayI6ImNvbXxlZHV8Z292fGlkdnxuZXR8b3JnIiwiaWQiOiJhY3xjb3xnb3xtaWx8bmV0fG9yfHNjaHx3ZWIiLCJpbCI6ImFjfGNvfGdvdnxpZGZ8azEyfG11bml8bmV0fG9yZyIsImluIjoiYWN8Y298ZWR1fGVybmV0fGZpcm18Z2VufGdvdnxpfGluZHxtaWx8bmV0fG5pY3xvcmd8cmVzIiwiaXEiOiJjb218ZWR1fGdvdnxpfG1pbHxuZXR8b3JnIiwiaXIiOiJhY3xjb3xkbnNzZWN8Z292fGl8aWR8bmV0fG9yZ3xzY2giLCJpdCI6ImVkdXxnb3YiLCJqZSI6ImNvfG5ldHxvcmciLCJqbyI6ImNvbXxlZHV8Z292fG1pbHxuYW1lfG5ldHxvcmd8c2NoIiwianAiOiJhY3xhZHxjb3xlZHxnb3xncnxsZ3xuZXxvciIsImtlIjoiYWN8Y298Z298aW5mb3xtZXxtb2JpfG5lfG9yfHNjIiwia2giOiJjb218ZWR1fGdvdnxtaWx8bmV0fG9yZ3xwZXIiLCJraSI6ImJpenxjb218ZGV8ZWR1fGdvdnxpbmZvfG1vYnxuZXR8b3JnfHRlbCIsImttIjoiYXNzb3xjb218Y29vcHxlZHV8Z291dnxrfG1lZGVjaW58bWlsfG5vbXxub3RhaXJlc3xwaGFybWFjaWVuc3xwcmVzc2V8dG18dmV0ZXJpbmFpcmUiLCJrbiI6ImVkdXxnb3Z8bmV0fG9yZyIsImtyIjoiYWN8YnVzYW58Y2h1bmdidWt8Y2h1bmduYW18Y298ZGFlZ3V8ZGFlamVvbnxlc3xnYW5nd29ufGdvfGd3YW5nanV8Z3llb25nYnVrfGd5ZW9uZ2dpfGd5ZW9uZ25hbXxoc3xpbmNoZW9ufGplanV8amVvbmJ1a3xqZW9ubmFtfGt8a2d8bWlsfG1zfG5lfG9yfHBlfHJlfHNjfHNlb3VsfHVsc2FuIiwia3ciOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwia3kiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwia3oiOiJjb218ZWR1fGdvdnxtaWx8bmV0fG9yZyIsImxiIjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsImxrIjoiYXNzbnxjb218ZWR1fGdvdnxncnB8aG90ZWx8aW50fGx0ZHxuZXR8bmdvfG9yZ3xzY2h8c29jfHdlYiIsImxyIjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsImx2IjoiYXNufGNvbXxjb25mfGVkdXxnb3Z8aWR8bWlsfG5ldHxvcmciLCJseSI6ImNvbXxlZHV8Z292fGlkfG1lZHxuZXR8b3JnfHBsY3xzY2giLCJtYSI6ImFjfGNvfGdvdnxtfG5ldHxvcmd8cHJlc3MiLCJtYyI6ImFzc298dG0iLCJtZSI6ImFjfGNvfGVkdXxnb3Z8aXRzfG5ldHxvcmd8cHJpdiIsIm1nIjoiY29tfGVkdXxnb3Z8bWlsfG5vbXxvcmd8cHJkfHRtIiwibWsiOiJjb218ZWR1fGdvdnxpbmZ8bmFtZXxuZXR8b3JnfHBybyIsIm1sIjoiY29tfGVkdXxnb3Z8bmV0fG9yZ3xwcmVzc2UiLCJtbiI6ImVkdXxnb3Z8b3JnIiwibW8iOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwibXQiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwibXYiOiJhZXJvfGJpenxjb218Y29vcHxlZHV8Z292fGluZm98aW50fG1pbHxtdXNldW18bmFtZXxuZXR8b3JnfHBybyIsIm13IjoiYWN8Y298Y29tfGNvb3B8ZWR1fGdvdnxpbnR8bXVzZXVtfG5ldHxvcmciLCJteCI6ImNvbXxlZHV8Z29ifG5ldHxvcmciLCJteSI6ImNvbXxlZHV8Z292fG1pbHxuYW1lfG5ldHxvcmd8c2NoIiwibmYiOiJhcnRzfGNvbXxmaXJtfGluZm98bmV0fG90aGVyfHBlcnxyZWN8c3RvcmV8d2ViIiwibmciOiJiaXp8Y29tfGVkdXxnb3Z8bWlsfG1vYml8bmFtZXxuZXR8b3JnfHNjaCIsIm5pIjoiYWN8Y298Y29tfGVkdXxnb2J8bWlsfG5ldHxub218b3JnIiwibnAiOiJjb218ZWR1fGdvdnxtaWx8bmV0fG9yZyIsIm5yIjoiYml6fGNvbXxlZHV8Z292fGluZm98bmV0fG9yZyIsIm9tIjoiYWN8Yml6fGNvfGNvbXxlZHV8Z292fG1lZHxtaWx8bXVzZXVtfG5ldHxvcmd8cHJvfHNjaCIsInBlIjoiY29tfGVkdXxnb2J8bWlsfG5ldHxub218b3JnfHNsZCIsInBoIjoiY29tfGVkdXxnb3Z8aXxtaWx8bmV0fG5nb3xvcmciLCJwayI6ImJpenxjb218ZWR1fGZhbXxnb2J8Z29rfGdvbnxnb3B8Z29zfGdvdnxuZXR8b3JnfHdlYiIsInBsIjoiYXJ0fGJpYWx5c3Rva3xiaXp8Y29tfGVkdXxnZGF8Z2RhbnNrfGdvcnpvd3xnb3Z8aW5mb3xrYXRvd2ljZXxrcmFrb3d8bG9kenxsdWJsaW58bWlsfG5ldHxuZ298b2xzenR5bnxvcmd8cG96bmFufHB3cnxyYWRvbXxzbHVwc2t8c3pjemVjaW58dG9ydW58d2Fyc3phd2F8d2F3fHdyb2N8d3JvY2xhd3x6Z29yYSIsInByIjoiYWN8Yml6fGNvbXxlZHV8ZXN0fGdvdnxpbmZvfGlzbGF8bmFtZXxuZXR8b3JnfHByb3xwcm9mIiwicHMiOiJjb218ZWR1fGdvdnxuZXR8b3JnfHBsb3xzZWMiLCJwdyI6ImJlbGF1fGNvfGVkfGdvfG5lfG9yIiwicm8iOiJhcnRzfGNvbXxmaXJtfGluZm98bm9tfG50fG9yZ3xyZWN8c3RvcmV8dG18d3d3IiwicnMiOiJhY3xjb3xlZHV8Z292fGlufG9yZyIsInNiIjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsInNjIjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsInNoIjoiY298Y29tfGVkdXxnb3Z8bmV0fG5vbXxvcmciLCJzbCI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJzdCI6ImNvfGNvbXxjb25zdWxhZG98ZWR1fGVtYmFpeGFkYXxnb3Z8bWlsfG5ldHxvcmd8cHJpbmNpcGV8c2FvdG9tZXxzdG9yZSIsInN2IjoiY29tfGVkdXxnb2J8b3JnfHJlZCIsInN6IjoiYWN8Y298b3JnIiwidHIiOiJhdnxiYnN8YmVsfGJpenxjb218ZHJ8ZWR1fGdlbnxnb3Z8aW5mb3xrMTJ8bmFtZXxuZXR8b3JnfHBvbHx0ZWx8dHNrfHR2fHdlYiIsInR0IjoiYWVyb3xiaXp8Y2F0fGNvfGNvbXxjb29wfGVkdXxnb3Z8aW5mb3xpbnR8am9ic3xtaWx8bW9iaXxtdXNldW18bmFtZXxuZXR8b3JnfHByb3x0ZWx8dHJhdmVsIiwidHciOiJjbHVifGNvbXxlYml6fGVkdXxnYW1lfGdvdnxpZHZ8bWlsfG5ldHxvcmciLCJtdSI6ImFjfGNvfGNvbXxnb3Z8bmV0fG9yfG9yZyIsIm16IjoiYWN8Y298ZWR1fGdvdnxvcmciLCJuYSI6ImNvfGNvbSIsIm56IjoiYWN8Y298Y3JpfGdlZWt8Z2VufGdvdnR8aGVhbHRofGl3aXxtYW9yaXxtaWx8bmV0fG9yZ3xwYXJsaWFtZW50fHNjaG9vbCIsInBhIjoiYWJvfGFjfGNvbXxlZHV8Z29ifGluZ3xtZWR8bmV0fG5vbXxvcmd8c2xkIiwicHQiOiJjb218ZWR1fGdvdnxpbnR8bmV0fG5vbWV8b3JnfHB1YmwiLCJweSI6ImNvbXxlZHV8Z292fG1pbHxuZXR8b3JnIiwicWEiOiJjb218ZWR1fGdvdnxtaWx8bmV0fG9yZyIsInJlIjoiYXNzb3xjb218bm9tIiwicnUiOiJhY3xhZHlnZXlhfGFsdGFpfGFtdXJ8YXJraGFuZ2Vsc2t8YXN0cmFraGFufGJhc2hraXJpYXxiZWxnb3JvZHxiaXJ8YnJ5YW5za3xidXJ5YXRpYXxjYmd8Y2hlbHxjaGVseWFiaW5za3xjaGl0YXxjaHVrb3RrYXxjaHV2YXNoaWF8Y29tfGRhZ2VzdGFufGUtYnVyZ3xlZHV8Z292fGdyb3pueXxpbnR8aXJrdXRza3xpdmFub3ZvfGl6aGV2c2t8amFyfGpvc2hrYXItb2xhfGthbG15a2lhfGthbHVnYXxrYW1jaGF0a2F8a2FyZWxpYXxrYXphbnxrY2hyfGtlbWVyb3ZvfGtoYWJhcm92c2t8a2hha2Fzc2lhfGtodnxraXJvdnxrb2VuaWd8a29taXxrb3N0cm9tYXxrcmFub3lhcnNrfGt1YmFufGt1cmdhbnxrdXJza3xsaXBldHNrfG1hZ2FkYW58bWFyaXxtYXJpLWVsfG1hcmluZXxtaWx8bW9yZG92aWF8bW9zcmVnfG1za3xtdXJtYW5za3xuYWxjaGlrfG5ldHxubm92fG5vdnxub3Zvc2liaXJza3xuc2t8b21za3xvcmVuYnVyZ3xvcmd8b3J5b2x8cGVuemF8cGVybXxwcHxwc2tvdnxwdHp8cm5kfHJ5YXphbnxzYWtoYWxpbnxzYW1hcmF8c2FyYXRvdnxzaW1iaXJza3xzbW9sZW5za3xzcGJ8c3RhdnJvcG9sfHN0dnxzdXJndXR8dGFtYm92fHRhdGFyc3Rhbnx0b218dG9tc2t8dHNhcml0c3lufHRza3x0dWxhfHR1dmF8dHZlcnx0eXVtZW58dWRtfHVkbXVydGlhfHVsYW4tdWRlfHZsYWRpa2F2a2F6fHZsYWRpbWlyfHZsYWRpdm9zdG9rfHZvbGdvZ3JhZHx2b2xvZ2RhfHZvcm9uZXpofHZybnx2eWF0a2F8eWFrdXRpYXx5YW1hbHx5ZWthdGVyaW5idXJnfHl1emhuby1zYWtoYWxpbnNrIiwicnciOiJhY3xjb3xjb218ZWR1fGdvdXZ8Z292fGludHxtaWx8bmV0Iiwic2EiOiJjb218ZWR1fGdvdnxtZWR8bmV0fG9yZ3xwdWJ8c2NoIiwic2QiOiJjb218ZWR1fGdvdnxpbmZvfG1lZHxuZXR8b3JnfHR2Iiwic2UiOiJhfGFjfGJ8YmR8Y3xkfGV8ZnxnfGh8aXxrfGx8bXxufG98b3JnfHB8cGFydGl8cHB8cHJlc3N8cnxzfHR8dG18dXx3fHh8eXx6Iiwic2ciOiJjb218ZWR1fGdvdnxpZG58bmV0fG9yZ3xwZXIiLCJzbiI6ImFydHxjb218ZWR1fGdvdXZ8b3JnfHBlcnNvfHVuaXYiLCJzeSI6ImNvbXxlZHV8Z292fG1pbHxuZXR8bmV3c3xvcmciLCJ0aCI6ImFjfGNvfGdvfGlufG1pfG5ldHxvciIsInRqIjoiYWN8Yml6fGNvfGNvbXxlZHV8Z298Z292fGluZm98aW50fG1pbHxuYW1lfG5ldHxuaWN8b3JnfHRlc3R8d2ViIiwidG4iOiJhZ3JpbmV0fGNvbXxkZWZlbnNlfGVkdW5ldHxlbnN8ZmlufGdvdnxpbmR8aW5mb3xpbnRsfG1pbmNvbXxuYXR8bmV0fG9yZ3xwZXJzb3xybnJ0fHJuc3xybnV8dG91cmlzbSIsInR6IjoiYWN8Y298Z298bmV8b3IiLCJ1YSI6ImJpenxjaGVya2Fzc3l8Y2hlcm5pZ292fGNoZXJub3Z0c3l8Y2t8Y258Y298Y29tfGNyaW1lYXxjdnxkbnxkbmVwcm9wZXRyb3Zza3xkb25ldHNrfGRwfGVkdXxnb3Z8aWZ8aW58aXZhbm8tZnJhbmtpdnNrfGtofGtoYXJrb3Z8a2hlcnNvbnxraG1lbG5pdHNraXl8a2lldnxraXJvdm9ncmFkfGttfGtyfGtzfGt2fGxnfGx1Z2Fuc2t8bHV0c2t8bHZpdnxtZXxta3xuZXR8bmlrb2xhZXZ8b2R8b2Rlc3NhfG9yZ3xwbHxwb2x0YXZhfHBwfHJvdm5vfHJ2fHNlYmFzdG9wb2x8c3VteXx0ZXx0ZXJub3BpbHx1emhnb3JvZHx2aW5uaWNhfHZufHphcG9yaXpoemhlfHpoaXRvbWlyfHpwfHp0IiwidWciOiJhY3xjb3xnb3xuZXxvcnxvcmd8c2MiLCJ1ayI6ImFjfGJsfGJyaXRpc2gtbGlicmFyeXxjb3xjeW18Z292fGdvdnR8aWNuZXR8amV0fGxlYXxsdGR8bWV8bWlsfG1vZHxuYXRpb25hbC1saWJyYXJ5LXNjb3RsYW5kfG5lbHxuZXR8bmhzfG5pY3xubHN8b3JnfG9yZ258cGFybGlhbWVudHxwbGN8cG9saWNlfHNjaHxzY290fHNvYyIsInVzIjoiZG5pfGZlZHxpc2F8a2lkc3xuc24iLCJ1eSI6ImNvbXxlZHV8Z3VifG1pbHxuZXR8b3JnIiwidmUiOiJjb3xjb218ZWR1fGdvYnxpbmZvfG1pbHxuZXR8b3JnfHdlYiIsInZpIjoiY298Y29tfGsxMnxuZXR8b3JnIiwidm4iOiJhY3xiaXp8Y29tfGVkdXxnb3Z8aGVhbHRofGluZm98aW50fG5hbWV8bmV0fG9yZ3xwcm8iLCJ5ZSI6ImNvfGNvbXxnb3Z8bHRkfG1lfG5ldHxvcmd8cGxjIiwieXUiOiJhY3xjb3xlZHV8Z292fG9yZyIsInphIjoiYWN8YWdyaWN8YWx0fGJvdXJzZXxjaXR5fGNvfGN5YmVybmV0fGRifGVkdXxnb3Z8Z3JvbmRhcnxpYWNjZXNzfGltdHxpbmNhfGxhbmRlc2lnbnxsYXd8bWlsfG5ldHxuZ298bmlzfG5vbXxvbGl2ZXR0aXxvcmd8cGl4fHNjaG9vbHx0bXx3ZWIiLCJ6bSI6ImFjfGNvfGNvbXxlZHV8Z292fG5ldHxvcmd8c2NoIn0saGFzX2V4cHJlc3Npb246bnVsbCxpc19leHByZXNzaW9uOm51bGwsaGFzOmZ1bmN0aW9uKGQpe3JldHVybiEhZC5tYXRjaChTLmhhc19leHByZXNzaW9uKX0saXM6ZnVuY3Rpb24oZCl7cmV0dXJuISFkLm1hdGNoKFMuaXNfZXhwcmVzc2lvbil9LGdldDpmdW5jdGlvbihkKXt2YXIgdD1kLm1hdGNoKFMuaGFzX2V4cHJlc3Npb24pO3JldHVybiB0JiZ0WzFdfHxudWxsfSxub0NvbmZsaWN0OmZ1bmN0aW9uKCl7aWYoci5TZWNvbmRMZXZlbERvbWFpbnM9PT10aGlzKXtyLlNlY29uZExldmVsRG9tYWlucz1ffXJldHVybiB0aGlzfSxpbml0OmZ1bmN0aW9uKCl7dmFyIHQ9Jyc7Zm9yKHZhciBhIGluIFMubGlzdCl7aWYoIWguY2FsbChTLmxpc3QsYSkpe2NvbnRpbnVlfXZhciBlPScoJytTLmxpc3RbYV0rJylcLicrYTt0Kz0nfCgnK2UrJyknfVMuaGFzX2V4cHJlc3Npb249bmV3IFJlZ0V4cCgnXFwuKCcrdC5zdWJzdHIoMSkrJykkJywnaScpO1MuaXNfZXhwcmVzc2lvbj1uZXcgUmVnRXhwKCdeKCcrdC5zdWJzdHIoMSkrJykkJywnaScpfX07Uy5pbml0KCk7cmV0dXJuIFN9KSk7Ci8qIQogKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzCiAqCiAqIFZlcnNpb246IDEuMTEuMgogKgogKiBBdXRob3I6IFJvZG5leSBSZWhtCiAqIFdlYjogaHR0cDovL21lZGlhbGl6ZS5naXRodWIuY29tL1VSSS5qcy8KICoKICogTGljZW5zZWQgdW5kZXIKICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlCiAqICAgR1BMIHYzIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9HUEwtMy4wCiAqCiAqLwooZnVuY3Rpb24ocixmKXtpZih0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnKXttb2R1bGUuZXhwb3J0cz1mKHJlcXVpcmUoJy4vcHVueWNvZGUnKSxyZXF1aXJlKCcuL0lQdjYnKSxyZXF1aXJlKCcuL1NlY29uZExldmVsRG9tYWlucycpKX1lbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kKXtyLlVSST1mKHIucHVueWNvZGUsci5JUHY2LHIuU2Vjb25kTGV2ZWxEb21haW5zLHIpO2RlZmluZShbXSxmdW5jdGlvbigpe3JldHVybiByLlVSSX0pfWVsc2V7ci5VUkk9ZihyLnB1bnljb2RlLHIuSVB2NixyLlNlY29uZExldmVsRG9tYWlucyxyKX19KHRoaXMsZnVuY3Rpb24oYSxJLFMscil7InVzZSBzdHJpY3QiO3ZhciBfPXImJnIuVVJJO2Z1bmN0aW9uIFUoYyxkKXtpZighKHRoaXMgaW5zdGFuY2VvZiBVKSl7cmV0dXJuIG5ldyBVKGMsZCl9aWYoYz09PXVuZGVmaW5lZCl7aWYodHlwZW9mIGxvY2F0aW9uIT09J3VuZGVmaW5lZCcpe2M9bG9jYXRpb24uaHJlZisiIn1lbHNle2M9IiJ9fXRoaXMuaHJlZihjKTtpZihkIT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5hYnNvbHV0ZVRvKGQpfXJldHVybiB0aGlzfTt2YXIgcD1VLnByb3RvdHlwZTt2YXIgaD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIGIocyl7cmV0dXJuIHMucmVwbGFjZSgvKFsuKis/Xj0hOiR7fSgpfFtcXVwvXFxdKS9nLCdcXCQxJyl9ZnVuY3Rpb24gZyh2KXtpZih2PT09dW5kZWZpbmVkKXtyZXR1cm4nVW5kZWZpbmVkJ31yZXR1cm4gU3RyaW5nKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2KSkuc2xpY2UoOCwtMSl9ZnVuY3Rpb24gZihjKXtyZXR1cm4gZyhjKT09PSJBcnJheSJ9ZnVuY3Rpb24gaihkLHYpe3ZhciBsPXt9O3ZhciBpLGM7aWYoZih2KSl7Zm9yKGk9MCxjPXYubGVuZ3RoO2k8YztpKyspe2xbdltpXV09dHJ1ZX19ZWxzZXtsW3ZdPXRydWV9Zm9yKGk9MCxjPWQubGVuZ3RoO2k8YztpKyspe2lmKGxbZFtpXV0hPT11bmRlZmluZWQpe2Quc3BsaWNlKGksMSk7Yy0tO2ktLX19cmV0dXJuIGR9ZnVuY3Rpb24gayhsLHYpe3ZhciBpLGM7aWYoZih2KSl7Zm9yKGk9MCxjPXYubGVuZ3RoO2k8YztpKyspe2lmKCFrKGwsdltpXSkpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9dmFyIGQ9Zyh2KTtmb3IoaT0wLGM9bC5sZW5ndGg7aTxjO2krKyl7aWYoZD09PSdSZWdFeHAnKXtpZih0eXBlb2YgbFtpXT09PSdzdHJpbmcnJiZsW2ldLm1hdGNoKHYpKXtyZXR1cm4gdHJ1ZX19ZWxzZSBpZihsW2ldPT09dil7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX1mdW5jdGlvbiBtKGMsdCl7aWYoIWYoYyl8fCFmKHQpKXtyZXR1cm4gZmFsc2V9aWYoYy5sZW5ndGghPT10Lmxlbmd0aCl7cmV0dXJuIGZhbHNlfWMuc29ydCgpO3Quc29ydCgpO2Zvcih2YXIgaT0wLGw9Yy5sZW5ndGg7aTxsO2krKyl7aWYoY1tpXSE9PXRbaV0pe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9VS5fcGFydHM9ZnVuY3Rpb24oKXtyZXR1cm57cHJvdG9jb2w6bnVsbCx1c2VybmFtZTpudWxsLHBhc3N3b3JkOm51bGwsaG9zdG5hbWU6bnVsbCx1cm46bnVsbCxwb3J0Om51bGwscGF0aDpudWxsLHF1ZXJ5Om51bGwsZnJhZ21lbnQ6bnVsbCxkdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnM6VS5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsZXNjYXBlUXVlcnlTcGFjZTpVLmVzY2FwZVF1ZXJ5U3BhY2V9fTtVLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycz1mYWxzZTtVLmVzY2FwZVF1ZXJ5U3BhY2U9dHJ1ZTtVLnByb3RvY29sX2V4cHJlc3Npb249L15bYS16XVthLXowLTktKy1dKiQvaTtVLmlkbl9leHByZXNzaW9uPS9bXmEtejAtOVwuLV0vaTtVLnB1bnljb2RlX2V4cHJlc3Npb249Lyh4bi0tKS9pO1UuaXA0X2V4cHJlc3Npb249L15cZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9JC87VS5pcDZfZXhwcmVzc2lvbj0vXlxzKigoKFswLTlBLUZhLWZdezEsNH06KXs3fShbMC05QS1GYS1mXXsxLDR9fDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs2fSg6WzAtOUEtRmEtZl17MSw0fXwoKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezV9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsMn0pfDooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezR9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsM30pfCgoOlswLTlBLUZhLWZdezEsNH0pPzooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXszfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDR9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDJ9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezJ9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNX0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsM306KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7MX0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw2fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw0fTooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoOigoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDd9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDV9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpKSglLispP1xzKiQvO1UuZmluZF91cmlfZXhwcmVzc2lvbj0vXGIoKD86W2Etel1bXHctXSs6KD86XC97MSwzfXxbYS16MC05JV0pfHd3d1xkezAsM31bLl18W2EtejAtOS5cLV0rWy5dW2Etel17Miw0fVwvKSg/OlteXHMoKTw+XSt8XCgoW15ccygpPD5dK3woXChbXlxzKCk8Pl0rXCkpKSpcKSkrKD86XCgoW15ccygpPD5dK3woXChbXlxzKCk8Pl0rXCkpKSpcKXxbXlxzYCEoKVxbXF17fTs6JyIuLDw+P8KrwrvigJzigJ3igJjigJldKSkvaWc7VS5kZWZhdWx0UG9ydHM9e2h0dHA6IjgwIixodHRwczoiNDQzIixmdHA6IjIxIixnb3BoZXI6IjcwIix3czoiODAiLHdzczoiNDQzIn07VS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnM9L1teYS16QS1aMC05XC4tXS87VS5kb21BdHRyaWJ1dGVzPXsnYSc6J2hyZWYnLCdibG9ja3F1b3RlJzonY2l0ZScsJ2xpbmsnOidocmVmJywnYmFzZSc6J2hyZWYnLCdzY3JpcHQnOidzcmMnLCdmb3JtJzonYWN0aW9uJywnaW1nJzonc3JjJywnYXJlYSc6J2hyZWYnLCdpZnJhbWUnOidzcmMnLCdlbWJlZCc6J3NyYycsJ3NvdXJjZSc6J3NyYycsJ3RyYWNrJzonc3JjJywnaW5wdXQnOidzcmMnfTtVLmdldERvbUF0dHJpYnV0ZT1mdW5jdGlvbihjKXtpZighY3x8IWMubm9kZU5hbWUpe3JldHVybiB1bmRlZmluZWR9dmFyIGQ9Yy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKGQ9PT0naW5wdXQnJiZjLnR5cGUhPT0naW1hZ2UnKXtyZXR1cm4gdW5kZWZpbmVkfXJldHVybiBVLmRvbUF0dHJpYnV0ZXNbZF19O2Z1bmN0aW9uIG4odil7cmV0dXJuIGVzY2FwZSh2KX1mdW5jdGlvbiBvKHMpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQocykucmVwbGFjZSgvWyEnKCkqXS9nLG4pLnJlcGxhY2UoL1wqL2csIiUyQSIpfVUuZW5jb2RlPW87VS5kZWNvZGU9ZGVjb2RlVVJJQ29tcG9uZW50O1UuaXNvODg1OT1mdW5jdGlvbigpe1UuZW5jb2RlPWVzY2FwZTtVLmRlY29kZT11bmVzY2FwZX07VS51bmljb2RlPWZ1bmN0aW9uKCl7VS5lbmNvZGU9bztVLmRlY29kZT1kZWNvZGVVUklDb21wb25lbnR9O1UuY2hhcmFjdGVycz17cGF0aG5hbWU6e2VuY29kZTp7ZXhwcmVzc2lvbjovJSgyNHwyNnwyQnwyQ3wzQnwzRHwzQXw0MCkvaWcsbWFwOnsiJTI0IjoiJCIsIiUyNiI6IiYiLCIlMkIiOiIrIiwiJTJDIjoiLCIsIiUzQiI6IjsiLCIlM0QiOiI9IiwiJTNBIjoiOiIsIiU0MCI6IkAifX0sZGVjb2RlOntleHByZXNzaW9uOi9bXC9cPyNdL2csbWFwOnsiLyI6IiUyRiIsIj8iOiIlM0YiLCIjIjoiJTIzIn19fSxyZXNlcnZlZDp7ZW5jb2RlOntleHByZXNzaW9uOi8lKDIxfDIzfDI0fDI2fDI3fDI4fDI5fDJBfDJCfDJDfDJGfDNBfDNCfDNEfDNGfDQwfDVCfDVEKS9pZyxtYXA6eyIlM0EiOiI6IiwiJTJGIjoiLyIsIiUzRiI6Ij8iLCIlMjMiOiIjIiwiJTVCIjoiWyIsIiU1RCI6Il0iLCIlNDAiOiJAIiwiJTIxIjoiISIsIiUyNCI6IiQiLCIlMjYiOiImIiwiJTI3IjoiJyIsIiUyOCI6IigiLCIlMjkiOiIpIiwiJTJBIjoiKiIsIiUyQiI6IisiLCIlMkMiOiIsIiwiJTNCIjoiOyIsIiUzRCI6Ij0ifX19fTtVLmVuY29kZVF1ZXJ5PWZ1bmN0aW9uKHMsZSl7dmFyIGM9VS5lbmNvZGUocysiIik7cmV0dXJuIGU/Yy5yZXBsYWNlKC8lMjAvZywnKycpOmN9O1UuZGVjb2RlUXVlcnk9ZnVuY3Rpb24ocyxjKXtzKz0iIjt0cnl7cmV0dXJuIFUuZGVjb2RlKGM/cy5yZXBsYWNlKC9cKy9nLCclMjAnKTpzKX1jYXRjaChlKXtyZXR1cm4gc319O1UucmVjb2RlUGF0aD1mdW5jdGlvbihzKXt2YXIgYz0ocysiIikuc3BsaXQoJy8nKTtmb3IodmFyIGk9MCxsPWMubGVuZ3RoO2k8bDtpKyspe2NbaV09VS5lbmNvZGVQYXRoU2VnbWVudChVLmRlY29kZShjW2ldKSl9cmV0dXJuIGMuam9pbignLycpfTtVLmRlY29kZVBhdGg9ZnVuY3Rpb24ocyl7dmFyIGM9KHMrIiIpLnNwbGl0KCcvJyk7Zm9yKHZhciBpPTAsbD1jLmxlbmd0aDtpPGw7aSsrKXtjW2ldPVUuZGVjb2RlUGF0aFNlZ21lbnQoY1tpXSl9cmV0dXJuIGMuam9pbignLycpfTt2YXIgdT17J2VuY29kZSc6J2VuY29kZScsJ2RlY29kZSc6J2RlY29kZSd9O3ZhciB3O3ZhciB5PWZ1bmN0aW9uKGQsdyl7cmV0dXJuIGZ1bmN0aW9uKHMpe3JldHVybiBVW3ddKHMrIiIpLnJlcGxhY2UoVS5jaGFyYWN0ZXJzW2RdW3ddLmV4cHJlc3Npb24sZnVuY3Rpb24oYyl7cmV0dXJuIFUuY2hhcmFjdGVyc1tkXVt3XS5tYXBbY119KX19O2Zvcih3IGluIHUpe1VbdysiUGF0aFNlZ21lbnQiXT15KCJwYXRobmFtZSIsdVt3XSl9VS5lbmNvZGVSZXNlcnZlZD15KCJyZXNlcnZlZCIsImVuY29kZSIpO1UucGFyc2U9ZnVuY3Rpb24ocyxjKXt2YXIgZDtpZighYyl7Yz17fX1kPXMuaW5kZXhPZignIycpO2lmKGQ+LTEpe2MuZnJhZ21lbnQ9cy5zdWJzdHJpbmcoZCsxKXx8bnVsbDtzPXMuc3Vic3RyaW5nKDAsZCl9ZD1zLmluZGV4T2YoJz8nKTtpZihkPi0xKXtjLnF1ZXJ5PXMuc3Vic3RyaW5nKGQrMSl8fG51bGw7cz1zLnN1YnN0cmluZygwLGQpfWlmKHMuc3Vic3RyaW5nKDAsMik9PT0nLy8nKXtjLnByb3RvY29sPW51bGw7cz1zLnN1YnN0cmluZygyKTtzPVUucGFyc2VBdXRob3JpdHkocyxjKX1lbHNle2Q9cy5pbmRleE9mKCc6Jyk7aWYoZD4tMSl7Yy5wcm90b2NvbD1zLnN1YnN0cmluZygwLGQpfHxudWxsO2lmKGMucHJvdG9jb2wmJiFjLnByb3RvY29sLm1hdGNoKFUucHJvdG9jb2xfZXhwcmVzc2lvbikpe2MucHJvdG9jb2w9dW5kZWZpbmVkfWVsc2UgaWYoYy5wcm90b2NvbD09PSdmaWxlJyl7cz1zLnN1YnN0cmluZyhkKzMpfWVsc2UgaWYocy5zdWJzdHJpbmcoZCsxLGQrMyk9PT0nLy8nKXtzPXMuc3Vic3RyaW5nKGQrMyk7cz1VLnBhcnNlQXV0aG9yaXR5KHMsYyl9ZWxzZXtzPXMuc3Vic3RyaW5nKGQrMSk7Yy51cm49dHJ1ZX19fWMucGF0aD1zO3JldHVybiBjfTtVLnBhcnNlSG9zdD1mdW5jdGlvbihzLGMpe3ZhciBkPXMuaW5kZXhPZignLycpO3ZhciBlO3ZhciB0O2lmKGQ9PT0tMSl7ZD1zLmxlbmd0aH1pZihzLmNoYXJBdCgwKT09PSJbIil7ZT1zLmluZGV4T2YoJ10nKTtjLmhvc3RuYW1lPXMuc3Vic3RyaW5nKDEsZSl8fG51bGw7Yy5wb3J0PXMuc3Vic3RyaW5nKGUrMixkKXx8bnVsbH1lbHNlIGlmKHMuaW5kZXhPZignOicpIT09cy5sYXN0SW5kZXhPZignOicpKXtjLmhvc3RuYW1lPXMuc3Vic3RyaW5nKDAsZCl8fG51bGw7Yy5wb3J0PW51bGx9ZWxzZXt0PXMuc3Vic3RyaW5nKDAsZCkuc3BsaXQoJzonKTtjLmhvc3RuYW1lPXRbMF18fG51bGw7Yy5wb3J0PXRbMV18fG51bGx9aWYoYy5ob3N0bmFtZSYmcy5zdWJzdHJpbmcoZCkuY2hhckF0KDApIT09Jy8nKXtkKys7cz0iLyIrc31yZXR1cm4gcy5zdWJzdHJpbmcoZCl8fCcvJ307VS5wYXJzZUF1dGhvcml0eT1mdW5jdGlvbihzLGMpe3M9VS5wYXJzZVVzZXJpbmZvKHMsYyk7cmV0dXJuIFUucGFyc2VIb3N0KHMsYyl9O1UucGFyc2VVc2VyaW5mbz1mdW5jdGlvbihzLGMpe3ZhciBkPXMuaW5kZXhPZignLycpO3ZhciBlPWQ+LTE/cy5sYXN0SW5kZXhPZignQCcsZCk6cy5pbmRleE9mKCdAJyk7dmFyIHQ7aWYoZT4tMSYmKGQ9PT0tMXx8ZTxkKSl7dD1zLnN1YnN0cmluZygwLGUpLnNwbGl0KCc6Jyk7Yy51c2VybmFtZT10WzBdP1UuZGVjb2RlKHRbMF0pOm51bGw7dC5zaGlmdCgpO2MucGFzc3dvcmQ9dFswXT9VLmRlY29kZSh0LmpvaW4oJzonKSk6bnVsbDtzPXMuc3Vic3RyaW5nKGUrMSl9ZWxzZXtjLnVzZXJuYW1lPW51bGw7Yy5wYXNzd29yZD1udWxsfXJldHVybiBzfTtVLnBhcnNlUXVlcnk9ZnVuY3Rpb24ocyxlKXtpZighcyl7cmV0dXJue319cz1zLnJlcGxhY2UoLyYrL2csJyYnKS5yZXBsYWNlKC9eXD8qJip8JiskL2csJycpO2lmKCFzKXtyZXR1cm57fX12YXIgYz17fTt2YXIgZD1zLnNwbGl0KCcmJyk7dmFyIGw9ZC5sZW5ndGg7dmFyIHYsdCx4O2Zvcih2YXIgaT0wO2k8bDtpKyspe3Y9ZFtpXS5zcGxpdCgnPScpO3Q9VS5kZWNvZGVRdWVyeSh2LnNoaWZ0KCksZSk7eD12Lmxlbmd0aD9VLmRlY29kZVF1ZXJ5KHYuam9pbignPScpLGUpOm51bGw7aWYoY1t0XSl7aWYodHlwZW9mIGNbdF09PT0ic3RyaW5nIil7Y1t0XT1bY1t0XV19Y1t0XS5wdXNoKHgpfWVsc2V7Y1t0XT14fX1yZXR1cm4gY307VS5idWlsZD1mdW5jdGlvbihjKXt2YXIgdD0iIjtpZihjLnByb3RvY29sKXt0Kz1jLnByb3RvY29sKyI6In1pZighYy51cm4mJih0fHxjLmhvc3RuYW1lKSl7dCs9Jy8vJ310Kz0oVS5idWlsZEF1dGhvcml0eShjKXx8JycpO2lmKHR5cGVvZiBjLnBhdGg9PT0ic3RyaW5nIil7aWYoYy5wYXRoLmNoYXJBdCgwKSE9PScvJyYmdHlwZW9mIGMuaG9zdG5hbWU9PT0ic3RyaW5nIil7dCs9Jy8nfXQrPWMucGF0aH1pZih0eXBlb2YgYy5xdWVyeT09PSJzdHJpbmciJiZjLnF1ZXJ5KXt0Kz0nPycrYy5xdWVyeX1pZih0eXBlb2YgYy5mcmFnbWVudD09PSJzdHJpbmciJiZjLmZyYWdtZW50KXt0Kz0nIycrYy5mcmFnbWVudH1yZXR1cm4gdH07VS5idWlsZEhvc3Q9ZnVuY3Rpb24oYyl7dmFyIHQ9IiI7aWYoIWMuaG9zdG5hbWUpe3JldHVybiIifWVsc2UgaWYoVS5pcDZfZXhwcmVzc2lvbi50ZXN0KGMuaG9zdG5hbWUpKXtpZihjLnBvcnQpe3QrPSJbIitjLmhvc3RuYW1lKyJdOiIrYy5wb3J0fWVsc2V7dCs9Yy5ob3N0bmFtZX19ZWxzZXt0Kz1jLmhvc3RuYW1lO2lmKGMucG9ydCl7dCs9JzonK2MucG9ydH19cmV0dXJuIHR9O1UuYnVpbGRBdXRob3JpdHk9ZnVuY3Rpb24oYyl7cmV0dXJuIFUuYnVpbGRVc2VyaW5mbyhjKStVLmJ1aWxkSG9zdChjKX07VS5idWlsZFVzZXJpbmZvPWZ1bmN0aW9uKGMpe3ZhciB0PSIiO2lmKGMudXNlcm5hbWUpe3QrPVUuZW5jb2RlKGMudXNlcm5hbWUpO2lmKGMucGFzc3dvcmQpe3QrPSc6JytVLmVuY29kZShjLnBhc3N3b3JkKX10Kz0iQCJ9cmV0dXJuIHR9O1UuYnVpbGRRdWVyeT1mdW5jdGlvbihkLGMsZSl7dmFyIHQ9IiI7dmFyIGwscyxpLHY7Zm9yKHMgaW4gZCl7aWYoaC5jYWxsKGQscykmJnMpe2lmKGYoZFtzXSkpe2w9e307Zm9yKGk9MCx2PWRbc10ubGVuZ3RoO2k8djtpKyspe2lmKGRbc11baV0hPT11bmRlZmluZWQmJmxbZFtzXVtpXSsiIl09PT11bmRlZmluZWQpe3QrPSImIitVLmJ1aWxkUXVlcnlQYXJhbWV0ZXIocyxkW3NdW2ldLGUpO2lmKGMhPT10cnVlKXtsW2Rbc11baV0rIiJdPXRydWV9fX19ZWxzZSBpZihkW3NdIT09dW5kZWZpbmVkKXt0Kz0nJicrVS5idWlsZFF1ZXJ5UGFyYW1ldGVyKHMsZFtzXSxlKX19fXJldHVybiB0LnN1YnN0cmluZygxKX07VS5idWlsZFF1ZXJ5UGFyYW1ldGVyPWZ1bmN0aW9uKGMsdixlKXtyZXR1cm4gVS5lbmNvZGVRdWVyeShjLGUpKyh2IT09bnVsbD8iPSIrVS5lbmNvZGVRdWVyeSh2LGUpOiIiKX07VS5hZGRRdWVyeT1mdW5jdGlvbihkLGMsdil7aWYodHlwZW9mIGM9PT0ib2JqZWN0Iil7Zm9yKHZhciBlIGluIGMpe2lmKGguY2FsbChjLGUpKXtVLmFkZFF1ZXJ5KGQsZSxjW2VdKX19fWVsc2UgaWYodHlwZW9mIGM9PT0ic3RyaW5nIil7aWYoZFtjXT09PXVuZGVmaW5lZCl7ZFtjXT12O3JldHVybn1lbHNlIGlmKHR5cGVvZiBkW2NdPT09InN0cmluZyIpe2RbY109W2RbY11dfWlmKCFmKHYpKXt2PVt2XX1kW2NdPWRbY10uY29uY2F0KHYpfWVsc2V7dGhyb3cgbmV3IFR5cGVFcnJvcigiVVJJLmFkZFF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZyBhcyB0aGUgbmFtZSBwYXJhbWV0ZXIiKX19O1UucmVtb3ZlUXVlcnk9ZnVuY3Rpb24oZCxjLHYpe3ZhciBpLGwsZTtpZihmKGMpKXtmb3IoaT0wLGw9Yy5sZW5ndGg7aTxsO2krKyl7ZFtjW2ldXT11bmRlZmluZWR9fWVsc2UgaWYodHlwZW9mIGM9PT0ib2JqZWN0Iil7Zm9yKGUgaW4gYyl7aWYoaC5jYWxsKGMsZSkpe1UucmVtb3ZlUXVlcnkoZCxlLGNbZV0pfX19ZWxzZSBpZih0eXBlb2YgYz09PSJzdHJpbmciKXtpZih2IT09dW5kZWZpbmVkKXtpZihkW2NdPT09dil7ZFtjXT11bmRlZmluZWR9ZWxzZSBpZihmKGRbY10pKXtkW2NdPWooZFtjXSx2KX19ZWxzZXtkW2NdPXVuZGVmaW5lZH19ZWxzZXt0aHJvdyBuZXcgVHlwZUVycm9yKCJVUkkuYWRkUXVlcnkoKSBhY2NlcHRzIGFuIG9iamVjdCwgc3RyaW5nIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIiKX19O1UuaGFzUXVlcnk9ZnVuY3Rpb24oZCxjLHYsZSl7aWYodHlwZW9mIGM9PT0ib2JqZWN0Iil7Zm9yKHZhciBpIGluIGMpe2lmKGguY2FsbChjLGkpKXtpZighVS5oYXNRdWVyeShkLGksY1tpXSkpe3JldHVybiBmYWxzZX19fXJldHVybiB0cnVlfWVsc2UgaWYodHlwZW9mIGMhPT0ic3RyaW5nIil7dGhyb3cgbmV3IFR5cGVFcnJvcigiVVJJLmhhc1F1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZyBhcyB0aGUgbmFtZSBwYXJhbWV0ZXIiKX1zd2l0Y2goZyh2KSl7Y2FzZSdVbmRlZmluZWQnOnJldHVybiBjIGluIGQ7Y2FzZSdCb29sZWFuJzp2YXIgbD1Cb29sZWFuKGYoZFtjXSk/ZFtjXS5sZW5ndGg6ZFtjXSk7cmV0dXJuIHY9PT1sO2Nhc2UnRnVuY3Rpb24nOnJldHVybiEhdihkW2NdLGMsZCk7Y2FzZSdBcnJheSc6aWYoIWYoZFtjXSkpe3JldHVybiBmYWxzZX12YXIgcz1lP2s6bTtyZXR1cm4gcyhkW2NdLHYpO2Nhc2UnUmVnRXhwJzppZighZihkW2NdKSl7cmV0dXJuIEJvb2xlYW4oZFtjXSYmZFtjXS5tYXRjaCh2KSl9aWYoIWUpe3JldHVybiBmYWxzZX1yZXR1cm4gayhkW2NdLHYpO2Nhc2UnTnVtYmVyJzp2PVN0cmluZyh2KTtjYXNlJ1N0cmluZyc6aWYoIWYoZFtjXSkpe3JldHVybiBkW2NdPT09dn1pZighZSl7cmV0dXJuIGZhbHNlfXJldHVybiBrKGRbY10sdik7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKCJVUkkuaGFzUXVlcnkoKSBhY2NlcHRzIHVuZGVmaW5lZCwgYm9vbGVhbiwgc3RyaW5nLCBudW1iZXIsIFJlZ0V4cCwgRnVuY3Rpb24gYXMgdGhlIHZhbHVlIHBhcmFtZXRlciIpfX07VS5jb21tb25QYXRoPWZ1bmN0aW9uKGMsdCl7dmFyIGw9TWF0aC5taW4oYy5sZW5ndGgsdC5sZW5ndGgpO3ZhciBkO2ZvcihkPTA7ZDxsO2QrKyl7aWYoYy5jaGFyQXQoZCkhPT10LmNoYXJBdChkKSl7ZC0tO2JyZWFrfX1pZihkPDEpe3JldHVybiBjLmNoYXJBdCgwKT09PXQuY2hhckF0KDApJiZjLmNoYXJBdCgwKT09PScvJz8nLyc6Jyd9aWYoYy5jaGFyQXQoZCkhPT0nLyd8fHQuY2hhckF0KGQpIT09Jy8nKXtkPWMuc3Vic3RyaW5nKDAsZCkubGFzdEluZGV4T2YoJy8nKX1yZXR1cm4gYy5zdWJzdHJpbmcoMCxkKzEpfTtVLndpdGhpblN0cmluZz1mdW5jdGlvbihzLGMpe3JldHVybiBzLnJlcGxhY2UoVS5maW5kX3VyaV9leHByZXNzaW9uLGMpfTtVLmVuc3VyZVZhbGlkSG9zdG5hbWU9ZnVuY3Rpb24odil7aWYodi5tYXRjaChVLmludmFsaWRfaG9zdG5hbWVfY2hhcmFjdGVycykpe2lmKCFhKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJIb3N0bmFtZSAnIit2KyInIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dIGFuZCBQdW55Y29kZS5qcyBpcyBub3QgYXZhaWxhYmxlIil9aWYoYS50b0FTQ0lJKHYpLm1hdGNoKFUuaW52YWxpZF9ob3N0bmFtZV9jaGFyYWN0ZXJzKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSG9zdG5hbWUgJyIrdisiJyBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXSIpfX19O1Uubm9Db25mbGljdD1mdW5jdGlvbihjKXtpZihjKXt2YXIgZD17VVJJOnRoaXMubm9Db25mbGljdCgpfTtpZihVUklUZW1wbGF0ZSYmdHlwZW9mIFVSSVRlbXBsYXRlLm5vQ29uZmxpY3Q9PSJmdW5jdGlvbiIpe2QuVVJJVGVtcGxhdGU9VVJJVGVtcGxhdGUubm9Db25mbGljdCgpfWlmKEkmJnR5cGVvZiBJLm5vQ29uZmxpY3Q9PSJmdW5jdGlvbiIpe2QuSVB2Nj1JLm5vQ29uZmxpY3QoKX1pZihTZWNvbmRMZXZlbERvbWFpbnMmJnR5cGVvZiBTZWNvbmRMZXZlbERvbWFpbnMubm9Db25mbGljdD09ImZ1bmN0aW9uIil7ZC5TZWNvbmRMZXZlbERvbWFpbnM9U2Vjb25kTGV2ZWxEb21haW5zLm5vQ29uZmxpY3QoKX1yZXR1cm4gZH1lbHNlIGlmKHIuVVJJPT09dGhpcyl7ci5VUkk9X31yZXR1cm4gdGhpc307cC5idWlsZD1mdW5jdGlvbihkKXtpZihkPT09dHJ1ZSl7dGhpcy5fZGVmZXJyZWRfYnVpbGQ9dHJ1ZX1lbHNlIGlmKGQ9PT11bmRlZmluZWR8fHRoaXMuX2RlZmVycmVkX2J1aWxkKXt0aGlzLl9zdHJpbmc9VS5idWlsZCh0aGlzLl9wYXJ0cyk7dGhpcy5fZGVmZXJyZWRfYnVpbGQ9ZmFsc2V9cmV0dXJuIHRoaXN9O3AuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFUodGhpcyl9O3AudmFsdWVPZj1wLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVpbGQoZmFsc2UpLl9zdHJpbmd9O3U9e3Byb3RvY29sOidwcm90b2NvbCcsdXNlcm5hbWU6J3VzZXJuYW1lJyxwYXNzd29yZDoncGFzc3dvcmQnLGhvc3RuYW1lOidob3N0bmFtZScscG9ydDoncG9ydCd9O3k9ZnVuY3Rpb24odyl7cmV0dXJuIGZ1bmN0aW9uKHYsYyl7aWYodj09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuX3BhcnRzW3ddfHwiIn1lbHNle3RoaXMuX3BhcnRzW3ddPXZ8fG51bGw7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fX07Zm9yKHcgaW4gdSl7cFt3XT15KHVbd10pfXU9e3F1ZXJ5Oic/JyxmcmFnbWVudDonIyd9O3k9ZnVuY3Rpb24odyxjKXtyZXR1cm4gZnVuY3Rpb24odixkKXtpZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5fcGFydHNbd118fCIifWVsc2V7aWYodiE9PW51bGwpe3Y9disiIjtpZih2LmNoYXJBdCgwKT09PWMpe3Y9di5zdWJzdHJpbmcoMSl9fXRoaXMuX3BhcnRzW3ddPXY7dGhpcy5idWlsZCghZCk7cmV0dXJuIHRoaXN9fX07Zm9yKHcgaW4gdSl7cFt3XT15KHcsdVt3XSl9dT17c2VhcmNoOlsnPycsJ3F1ZXJ5J10saGFzaDpbJyMnLCdmcmFnbWVudCddfTt5PWZ1bmN0aW9uKHcsYyl7cmV0dXJuIGZ1bmN0aW9uKHYsZCl7dmFyIHQ9dGhpc1t3XSh2LGQpO3JldHVybiB0eXBlb2YgdD09PSJzdHJpbmciJiZ0Lmxlbmd0aD8oYyt0KTp0fX07Zm9yKHcgaW4gdSl7cFt3XT15KHVbd11bMV0sdVt3XVswXSl9cC5wYXRobmFtZT1mdW5jdGlvbih2LGMpe2lmKHY9PT11bmRlZmluZWR8fHY9PT10cnVlKXt2YXIgZD10aGlzLl9wYXJ0cy5wYXRofHwodGhpcy5fcGFydHMuaG9zdG5hbWU/Jy8nOicnKTtyZXR1cm4gdj9VLmRlY29kZVBhdGgoZCk6ZH1lbHNle3RoaXMuX3BhcnRzLnBhdGg9dj9VLnJlY29kZVBhdGgodik6Ii8iO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC5wYXRoPXAucGF0aG5hbWU7cC5ocmVmPWZ1bmN0aW9uKGMsZCl7dmFyIGU7aWYoYz09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoKX10aGlzLl9zdHJpbmc9IiI7dGhpcy5fcGFydHM9VS5fcGFydHMoKTt2YXIgXz1jIGluc3RhbmNlb2YgVTt2YXIgaT10eXBlb2YgYz09PSJvYmplY3QiJiYoYy5ob3N0bmFtZXx8Yy5wYXRofHxjLnBhdGhuYW1lKTtpZihjLm5vZGVOYW1lKXt2YXIgbD1VLmdldERvbUF0dHJpYnV0ZShjKTtjPWNbbF18fCIiO2k9ZmFsc2V9aWYoIV8mJmkmJmMucGF0aG5hbWUhPT11bmRlZmluZWQpe2M9Yy50b1N0cmluZygpfWlmKHR5cGVvZiBjPT09InN0cmluZyIpe3RoaXMuX3BhcnRzPVUucGFyc2UoYyx0aGlzLl9wYXJ0cyl9ZWxzZSBpZihffHxpKXt2YXIgcz1fP2MuX3BhcnRzOmM7Zm9yKGUgaW4gcyl7aWYoaC5jYWxsKHRoaXMuX3BhcnRzLGUpKXt0aGlzLl9wYXJ0c1tlXT1zW2VdfX19ZWxzZXt0aHJvdyBuZXcgVHlwZUVycm9yKCJpbnZhbGlkIGlucHV0Iil9dGhpcy5idWlsZCghZCk7cmV0dXJuIHRoaXN9O3AuaXM9ZnVuY3Rpb24oYyl7dmFyIGk9ZmFsc2U7dmFyIGQ9ZmFsc2U7dmFyIGU9ZmFsc2U7dmFyIGw9ZmFsc2U7dmFyIHM9ZmFsc2U7dmFyIHQ9ZmFsc2U7dmFyIGE9ZmFsc2U7dmFyIHY9IXRoaXMuX3BhcnRzLnVybjtpZih0aGlzLl9wYXJ0cy5ob3N0bmFtZSl7dj1mYWxzZTtkPVUuaXA0X2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7ZT1VLmlwNl9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpO2k9ZHx8ZTtsPSFpO3M9bCYmUyYmUy5oYXModGhpcy5fcGFydHMuaG9zdG5hbWUpO3Q9bCYmVS5pZG5fZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTthPWwmJlUucHVueWNvZGVfZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKX1zd2l0Y2goYy50b0xvd2VyQ2FzZSgpKXtjYXNlJ3JlbGF0aXZlJzpyZXR1cm4gdjtjYXNlJ2Fic29sdXRlJzpyZXR1cm4hdjtjYXNlJ2RvbWFpbic6Y2FzZSduYW1lJzpyZXR1cm4gbDtjYXNlJ3NsZCc6cmV0dXJuIHM7Y2FzZSdpcCc6cmV0dXJuIGk7Y2FzZSdpcDQnOmNhc2UnaXB2NCc6Y2FzZSdpbmV0NCc6cmV0dXJuIGQ7Y2FzZSdpcDYnOmNhc2UnaXB2Nic6Y2FzZSdpbmV0Nic6cmV0dXJuIGU7Y2FzZSdpZG4nOnJldHVybiB0O2Nhc2UndXJsJzpyZXR1cm4hdGhpcy5fcGFydHMudXJuO2Nhc2UndXJuJzpyZXR1cm4hIXRoaXMuX3BhcnRzLnVybjtjYXNlJ3B1bnljb2RlJzpyZXR1cm4gYX1yZXR1cm4gbnVsbH07dmFyIHo9cC5wcm90b2NvbDt2YXIgQT1wLnBvcnQ7dmFyIEI9cC5ob3N0bmFtZTtwLnByb3RvY29sPWZ1bmN0aW9uKHYsYyl7aWYodiE9PXVuZGVmaW5lZCl7aWYodil7dj12LnJlcGxhY2UoLzooXC9cLyk/JC8sJycpO2lmKHYubWF0Y2goL1teYS16QS16MC05XC4rLV0vKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiUHJvdG9jb2wgJyIrdisiJyBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4rLV0iKX19fXJldHVybiB6LmNhbGwodGhpcyx2LGMpfTtwLnNjaGVtZT1wLnByb3RvY29sO3AucG9ydD1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2IT09dW5kZWZpbmVkKXtpZih2PT09MCl7dj1udWxsfWlmKHYpe3YrPSIiO2lmKHYuY2hhckF0KDApPT09IjoiKXt2PXYuc3Vic3RyaW5nKDEpfWlmKHYubWF0Y2goL1teMC05XS8pKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJQb3J0ICciK3YrIicgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFswLTldIil9fX1yZXR1cm4gQS5jYWxsKHRoaXMsdixjKX07cC5ob3N0bmFtZT1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2IT09dW5kZWZpbmVkKXt2YXIgeD17fTtVLnBhcnNlSG9zdCh2LHgpO3Y9eC5ob3N0bmFtZX1yZXR1cm4gQi5jYWxsKHRoaXMsdixjKX07cC5ob3N0PWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHY9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZT9VLmJ1aWxkSG9zdCh0aGlzLl9wYXJ0cyk6IiJ9ZWxzZXtVLnBhcnNlSG9zdCh2LHRoaXMuX3BhcnRzKTt0aGlzLmJ1aWxkKCFjKTtyZXR1cm4gdGhpc319O3AuYXV0aG9yaXR5PWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHY9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZT9VLmJ1aWxkQXV0aG9yaXR5KHRoaXMuX3BhcnRzKToiIn1lbHNle1UucGFyc2VBdXRob3JpdHkodix0aGlzLl9wYXJ0cyk7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fTtwLnVzZXJpbmZvPWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHY9PT11bmRlZmluZWQpe2lmKCF0aGlzLl9wYXJ0cy51c2VybmFtZSl7cmV0dXJuIiJ9dmFyIHQ9VS5idWlsZFVzZXJpbmZvKHRoaXMuX3BhcnRzKTtyZXR1cm4gdC5zdWJzdHJpbmcoMCx0Lmxlbmd0aC0xKX1lbHNle2lmKHZbdi5sZW5ndGgtMV0hPT0nQCcpe3YrPSdAJ31VLnBhcnNlVXNlcmluZm8odix0aGlzLl9wYXJ0cyk7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fTtwLnJlc291cmNlPWZ1bmN0aW9uKHYsYyl7dmFyIGQ7aWYodj09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMucGF0aCgpK3RoaXMuc2VhcmNoKCkrdGhpcy5oYXNoKCl9ZD1VLnBhcnNlKHYpO3RoaXMuX3BhcnRzLnBhdGg9ZC5wYXRoO3RoaXMuX3BhcnRzLnF1ZXJ5PWQucXVlcnk7dGhpcy5fcGFydHMuZnJhZ21lbnQ9ZC5mcmFnbWVudDt0aGlzLmJ1aWxkKCFjKTtyZXR1cm4gdGhpc307cC5zdWJkb21haW49ZnVuY3Rpb24odixjKXtpZih0aGlzLl9wYXJ0cy51cm4pe3JldHVybiB2PT09dW5kZWZpbmVkPycnOnRoaXN9aWYodj09PXVuZGVmaW5lZCl7aWYoIXRoaXMuX3BhcnRzLmhvc3RuYW1lfHx0aGlzLmlzKCdJUCcpKXtyZXR1cm4iIn12YXIgZD10aGlzLl9wYXJ0cy5ob3N0bmFtZS5sZW5ndGgtdGhpcy5kb21haW4oKS5sZW5ndGgtMTtyZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKDAsZCl8fCIifWVsc2V7dmFyIGU9dGhpcy5fcGFydHMuaG9zdG5hbWUubGVuZ3RoLXRoaXMuZG9tYWluKCkubGVuZ3RoO3ZhciBzPXRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZygwLGUpO3ZhciBpPW5ldyBSZWdFeHAoJ14nK2IocykpO2lmKHYmJnYuY2hhckF0KHYubGVuZ3RoLTEpIT09Jy4nKXt2Kz0iLiJ9aWYodil7VS5lbnN1cmVWYWxpZEhvc3RuYW1lKHYpfXRoaXMuX3BhcnRzLmhvc3RuYW1lPXRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UoaSx2KTt0aGlzLmJ1aWxkKCFjKTtyZXR1cm4gdGhpc319O3AuZG9tYWluPWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHR5cGVvZiB2PT09J2Jvb2xlYW4nKXtjPXY7dj11bmRlZmluZWR9aWYodj09PXVuZGVmaW5lZCl7aWYoIXRoaXMuX3BhcnRzLmhvc3RuYW1lfHx0aGlzLmlzKCdJUCcpKXtyZXR1cm4iIn12YXIgdD10aGlzLl9wYXJ0cy5ob3N0bmFtZS5tYXRjaCgvXC4vZyk7aWYodCYmdC5sZW5ndGg8Mil7cmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lfXZhciBlPXRoaXMuX3BhcnRzLmhvc3RuYW1lLmxlbmd0aC10aGlzLnRsZChjKS5sZW5ndGgtMTtlPXRoaXMuX3BhcnRzLmhvc3RuYW1lLmxhc3RJbmRleE9mKCcuJyxlLTEpKzE7cmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZyhlKXx8IiJ9ZWxzZXtpZighdil7dGhyb3cgbmV3IFR5cGVFcnJvcigiY2Fubm90IHNldCBkb21haW4gZW1wdHkiKX1VLmVuc3VyZVZhbGlkSG9zdG5hbWUodik7aWYoIXRoaXMuX3BhcnRzLmhvc3RuYW1lfHx0aGlzLmlzKCdJUCcpKXt0aGlzLl9wYXJ0cy5ob3N0bmFtZT12fWVsc2V7dmFyIGQ9bmV3IFJlZ0V4cChiKHRoaXMuZG9tYWluKCkpKyIkIik7dGhpcy5fcGFydHMuaG9zdG5hbWU9dGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShkLHYpfXRoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC50bGQ9ZnVuY3Rpb24odixjKXtpZih0aGlzLl9wYXJ0cy51cm4pe3JldHVybiB2PT09dW5kZWZpbmVkPycnOnRoaXN9aWYodHlwZW9mIHY9PT0nYm9vbGVhbicpe2M9djt2PXVuZGVmaW5lZH1pZih2PT09dW5kZWZpbmVkKXtpZighdGhpcy5fcGFydHMuaG9zdG5hbWV8fHRoaXMuaXMoJ0lQJykpe3JldHVybiIifXZhciBkPXRoaXMuX3BhcnRzLmhvc3RuYW1lLmxhc3RJbmRleE9mKCcuJyk7dmFyIHQ9dGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKGQrMSk7aWYoYyE9PXRydWUmJlMmJlMubGlzdFt0LnRvTG93ZXJDYXNlKCldKXtyZXR1cm4gUy5nZXQodGhpcy5fcGFydHMuaG9zdG5hbWUpfHx0fXJldHVybiB0fWVsc2V7dmFyIGU7aWYoIXYpe3Rocm93IG5ldyBUeXBlRXJyb3IoImNhbm5vdCBzZXQgVExEIGVtcHR5Iil9ZWxzZSBpZih2Lm1hdGNoKC9bXmEtekEtWjAtOS1dLykpe2lmKFMmJlMuaXModikpe2U9bmV3IFJlZ0V4cChiKHRoaXMudGxkKCkpKyIkIik7dGhpcy5fcGFydHMuaG9zdG5hbWU9dGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShlLHYpfWVsc2V7dGhyb3cgbmV3IFR5cGVFcnJvcigiVExEICciK3YrIicgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTldIil9fWVsc2UgaWYoIXRoaXMuX3BhcnRzLmhvc3RuYW1lfHx0aGlzLmlzKCdJUCcpKXt0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoImNhbm5vdCBzZXQgVExEIG9uIG5vbi1kb21haW4gaG9zdCIpfWVsc2V7ZT1uZXcgUmVnRXhwKGIodGhpcy50bGQoKSkrIiQiKTt0aGlzLl9wYXJ0cy5ob3N0bmFtZT10aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKGUsdil9dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fTtwLmRpcmVjdG9yeT1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2PT09dW5kZWZpbmVkfHx2PT09dHJ1ZSl7aWYoIXRoaXMuX3BhcnRzLnBhdGgmJiF0aGlzLl9wYXJ0cy5ob3N0bmFtZSl7cmV0dXJuJyd9aWYodGhpcy5fcGFydHMucGF0aD09PScvJyl7cmV0dXJuJy8nfXZhciBkPXRoaXMuX3BhcnRzLnBhdGgubGVuZ3RoLXRoaXMuZmlsZW5hbWUoKS5sZW5ndGgtMTt2YXIgaT10aGlzLl9wYXJ0cy5wYXRoLnN1YnN0cmluZygwLGQpfHwodGhpcy5fcGFydHMuaG9zdG5hbWU/Ii8iOiIiKTtyZXR1cm4gdj9VLmRlY29kZVBhdGgoaSk6aX1lbHNle3ZhciBlPXRoaXMuX3BhcnRzLnBhdGgubGVuZ3RoLXRoaXMuZmlsZW5hbWUoKS5sZW5ndGg7dmFyIGw9dGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcoMCxlKTt2YXIgcz1uZXcgUmVnRXhwKCdeJytiKGwpKTtpZighdGhpcy5pcygncmVsYXRpdmUnKSl7aWYoIXYpe3Y9Jy8nfWlmKHYuY2hhckF0KDApIT09Jy8nKXt2PSIvIit2fX1pZih2JiZ2LmNoYXJBdCh2Lmxlbmd0aC0xKSE9PScvJyl7dis9Jy8nfXY9VS5yZWNvZGVQYXRoKHYpO3RoaXMuX3BhcnRzLnBhdGg9dGhpcy5fcGFydHMucGF0aC5yZXBsYWNlKHMsdik7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fTtwLmZpbGVuYW1lPWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHY9PT11bmRlZmluZWR8fHY9PT10cnVlKXtpZighdGhpcy5fcGFydHMucGF0aHx8dGhpcy5fcGFydHMucGF0aD09PScvJyl7cmV0dXJuIiJ9dmFyIGQ9dGhpcy5fcGFydHMucGF0aC5sYXN0SW5kZXhPZignLycpO3ZhciBlPXRoaXMuX3BhcnRzLnBhdGguc3Vic3RyaW5nKGQrMSk7cmV0dXJuIHY/VS5kZWNvZGVQYXRoU2VnbWVudChlKTplfWVsc2V7dmFyIGk9ZmFsc2U7aWYodi5jaGFyQXQoMCk9PT0nLycpe3Y9di5zdWJzdHJpbmcoMSl9aWYodi5tYXRjaCgvXC4/XC8vKSl7aT10cnVlfXZhciBsPW5ldyBSZWdFeHAoYih0aGlzLmZpbGVuYW1lKCkpKyIkIik7dj1VLnJlY29kZVBhdGgodik7dGhpcy5fcGFydHMucGF0aD10aGlzLl9wYXJ0cy5wYXRoLnJlcGxhY2UobCx2KTtpZihpKXt0aGlzLm5vcm1hbGl6ZVBhdGgoYyl9ZWxzZXt0aGlzLmJ1aWxkKCFjKX1yZXR1cm4gdGhpc319O3Auc3VmZml4PWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHY9PT11bmRlZmluZWR8fHY9PT10cnVlKXtpZighdGhpcy5fcGFydHMucGF0aHx8dGhpcy5fcGFydHMucGF0aD09PScvJyl7cmV0dXJuIiJ9dmFyIGQ9dGhpcy5maWxlbmFtZSgpO3ZhciBlPWQubGFzdEluZGV4T2YoJy4nKTt2YXIgcyxpO2lmKGU9PT0tMSl7cmV0dXJuIiJ9cz1kLnN1YnN0cmluZyhlKzEpO2k9KC9eW2EtejAtOSVdKyQvaSkudGVzdChzKT9zOiIiO3JldHVybiB2P1UuZGVjb2RlUGF0aFNlZ21lbnQoaSk6aX1lbHNle2lmKHYuY2hhckF0KDApPT09Jy4nKXt2PXYuc3Vic3RyaW5nKDEpfXZhciBsPXRoaXMuc3VmZml4KCk7dmFyIHQ7aWYoIWwpe2lmKCF2KXtyZXR1cm4gdGhpc310aGlzLl9wYXJ0cy5wYXRoKz0nLicrVS5yZWNvZGVQYXRoKHYpfWVsc2UgaWYoIXYpe3Q9bmV3IFJlZ0V4cChiKCIuIitsKSsiJCIpfWVsc2V7dD1uZXcgUmVnRXhwKGIobCkrIiQiKX1pZih0KXt2PVUucmVjb2RlUGF0aCh2KTt0aGlzLl9wYXJ0cy5wYXRoPXRoaXMuX3BhcnRzLnBhdGgucmVwbGFjZSh0LHYpfXRoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC5zZWdtZW50PWZ1bmN0aW9uKHMsdixjKXt2YXIgZD10aGlzLl9wYXJ0cy51cm4/JzonOicvJzt2YXIgZT10aGlzLnBhdGgoKTt2YXIgdD1lLnN1YnN0cmluZygwLDEpPT09Jy8nO3ZhciB4PWUuc3BsaXQoZCk7aWYocyE9PXVuZGVmaW5lZCYmdHlwZW9mIHMhPT0nbnVtYmVyJyl7Yz12O3Y9cztzPXVuZGVmaW5lZH1pZihzIT09dW5kZWZpbmVkJiZ0eXBlb2YgcyE9PSdudW1iZXInKXt0aHJvdyBuZXcgRXJyb3IoIkJhZCBzZWdtZW50ICciK3MrIicsIG11c3QgYmUgMC1iYXNlZCBpbnRlZ2VyIil9aWYodCl7eC5zaGlmdCgpfWlmKHM8MCl7cz1NYXRoLm1heCh4Lmxlbmd0aCtzLDApfWlmKHY9PT11bmRlZmluZWQpe3JldHVybiBzPT09dW5kZWZpbmVkP3g6eFtzXX1lbHNlIGlmKHM9PT1udWxsfHx4W3NdPT09dW5kZWZpbmVkKXtpZihmKHYpKXt4PVtdO2Zvcih2YXIgaT0wLGw9di5sZW5ndGg7aTxsO2krKyl7aWYoIXZbaV0ubGVuZ3RoJiYoIXgubGVuZ3RofHwheFt4Lmxlbmd0aC0xXS5sZW5ndGgpKXtjb250aW51ZX1pZih4Lmxlbmd0aCYmIXhbeC5sZW5ndGgtMV0ubGVuZ3RoKXt4LnBvcCgpfXgucHVzaCh2W2ldKX19ZWxzZSBpZih2fHwodHlwZW9mIHY9PT0ic3RyaW5nIikpe2lmKHhbeC5sZW5ndGgtMV09PT0iIil7eFt4Lmxlbmd0aC0xXT12fWVsc2V7eC5wdXNoKHYpfX19ZWxzZXtpZih2fHwodHlwZW9mIHY9PT0ic3RyaW5nIiYmdi5sZW5ndGgpKXt4W3NdPXZ9ZWxzZXt4LnNwbGljZShzLDEpfX1pZih0KXt4LnVuc2hpZnQoIiIpfXJldHVybiB0aGlzLnBhdGgoeC5qb2luKGQpLGMpfTtwLnNlZ21lbnRDb2RlZD1mdW5jdGlvbihzLHYsYyl7dmFyIGQsaSxsO2lmKHR5cGVvZiBzIT09J251bWJlcicpe2M9djt2PXM7cz11bmRlZmluZWR9aWYodj09PXVuZGVmaW5lZCl7ZD10aGlzLnNlZ21lbnQocyx2LGMpO2lmKCFmKGQpKXtkPWQhPT11bmRlZmluZWQ/VS5kZWNvZGUoZCk6dW5kZWZpbmVkfWVsc2V7Zm9yKGk9MCxsPWQubGVuZ3RoO2k8bDtpKyspe2RbaV09VS5kZWNvZGUoZFtpXSl9fXJldHVybiBkfWlmKCFmKHYpKXt2PXR5cGVvZiB2PT09J3N0cmluZyc/VS5lbmNvZGUodik6dn1lbHNle2ZvcihpPTAsbD12Lmxlbmd0aDtpPGw7aSsrKXt2W2ldPVUuZGVjb2RlKHZbaV0pfX1yZXR1cm4gdGhpcy5zZWdtZW50KHMsdixjKX07dmFyIHE9cC5xdWVyeTtwLnF1ZXJ5PWZ1bmN0aW9uKHYsYyl7aWYodj09PXRydWUpe3JldHVybiBVLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSl9ZWxzZSBpZih0eXBlb2Ygdj09PSJmdW5jdGlvbiIpe3ZhciBkPVUucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTt2YXIgZT12LmNhbGwodGhpcyxkKTt0aGlzLl9wYXJ0cy5xdWVyeT1VLmJ1aWxkUXVlcnkoZXx8ZCx0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9ZWxzZSBpZih2IT09dW5kZWZpbmVkJiZ0eXBlb2YgdiE9PSJzdHJpbmciKXt0aGlzLl9wYXJ0cy5xdWVyeT1VLmJ1aWxkUXVlcnkodix0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9ZWxzZXtyZXR1cm4gcS5jYWxsKHRoaXMsdixjKX19O3Auc2V0UXVlcnk9ZnVuY3Rpb24oYyx2LGQpe3ZhciBlPVUucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtpZih0eXBlb2YgYz09PSJvYmplY3QiKXtmb3IodmFyIGkgaW4gYyl7aWYoaC5jYWxsKGMsaSkpe2VbaV09Y1tpXX19fWVsc2UgaWYodHlwZW9mIGM9PT0ic3RyaW5nIil7ZVtjXT12IT09dW5kZWZpbmVkP3Y6bnVsbH1lbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoIlVSSS5hZGRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyIil9dGhpcy5fcGFydHMucXVlcnk9VS5idWlsZFF1ZXJ5KGUsdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO2lmKHR5cGVvZiBjIT09InN0cmluZyIpe2Q9dn10aGlzLmJ1aWxkKCFkKTtyZXR1cm4gdGhpc307cC5hZGRRdWVyeT1mdW5jdGlvbihjLHYsZCl7dmFyIGU9VS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1UuYWRkUXVlcnkoZSxjLHY9PT11bmRlZmluZWQ/bnVsbDp2KTt0aGlzLl9wYXJ0cy5xdWVyeT1VLmJ1aWxkUXVlcnkoZSx0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7aWYodHlwZW9mIGMhPT0ic3RyaW5nIil7ZD12fXRoaXMuYnVpbGQoIWQpO3JldHVybiB0aGlzfTtwLnJlbW92ZVF1ZXJ5PWZ1bmN0aW9uKGMsdixkKXt2YXIgZT1VLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7VS5yZW1vdmVRdWVyeShlLGMsdik7dGhpcy5fcGFydHMucXVlcnk9VS5idWlsZFF1ZXJ5KGUsdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO2lmKHR5cGVvZiBjIT09InN0cmluZyIpe2Q9dn10aGlzLmJ1aWxkKCFkKTtyZXR1cm4gdGhpc307cC5oYXNRdWVyeT1mdW5jdGlvbihjLHYsZCl7dmFyIGU9VS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO3JldHVybiBVLmhhc1F1ZXJ5KGUsYyx2LGQpfTtwLnNldFNlYXJjaD1wLnNldFF1ZXJ5O3AuYWRkU2VhcmNoPXAuYWRkUXVlcnk7cC5yZW1vdmVTZWFyY2g9cC5yZW1vdmVRdWVyeTtwLmhhc1NlYXJjaD1wLmhhc1F1ZXJ5O3Aubm9ybWFsaXplPWZ1bmN0aW9uKCl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdGhpcy5ub3JtYWxpemVQcm90b2NvbChmYWxzZSkubm9ybWFsaXplUXVlcnkoZmFsc2UpLm5vcm1hbGl6ZUZyYWdtZW50KGZhbHNlKS5idWlsZCgpfXJldHVybiB0aGlzLm5vcm1hbGl6ZVByb3RvY29sKGZhbHNlKS5ub3JtYWxpemVIb3N0bmFtZShmYWxzZSkubm9ybWFsaXplUG9ydChmYWxzZSkubm9ybWFsaXplUGF0aChmYWxzZSkubm9ybWFsaXplUXVlcnkoZmFsc2UpLm5vcm1hbGl6ZUZyYWdtZW50KGZhbHNlKS5idWlsZCgpfTtwLm5vcm1hbGl6ZVByb3RvY29sPWZ1bmN0aW9uKGMpe2lmKHR5cGVvZiB0aGlzLl9wYXJ0cy5wcm90b2NvbD09PSJzdHJpbmciKXt0aGlzLl9wYXJ0cy5wcm90b2NvbD10aGlzLl9wYXJ0cy5wcm90b2NvbC50b0xvd2VyQ2FzZSgpO3RoaXMuYnVpbGQoIWMpfXJldHVybiB0aGlzfTtwLm5vcm1hbGl6ZUhvc3RuYW1lPWZ1bmN0aW9uKGMpe2lmKHRoaXMuX3BhcnRzLmhvc3RuYW1lKXtpZih0aGlzLmlzKCdJRE4nKSYmYSl7dGhpcy5fcGFydHMuaG9zdG5hbWU9YS50b0FTQ0lJKHRoaXMuX3BhcnRzLmhvc3RuYW1lKX1lbHNlIGlmKHRoaXMuaXMoJ0lQdjYnKSYmSSl7dGhpcy5fcGFydHMuaG9zdG5hbWU9SS5iZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKX10aGlzLl9wYXJ0cy5ob3N0bmFtZT10aGlzLl9wYXJ0cy5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO3RoaXMuYnVpbGQoIWMpfXJldHVybiB0aGlzfTtwLm5vcm1hbGl6ZVBvcnQ9ZnVuY3Rpb24oYyl7aWYodHlwZW9mIHRoaXMuX3BhcnRzLnByb3RvY29sPT09InN0cmluZyImJnRoaXMuX3BhcnRzLnBvcnQ9PT1VLmRlZmF1bHRQb3J0c1t0aGlzLl9wYXJ0cy5wcm90b2NvbF0pe3RoaXMuX3BhcnRzLnBvcnQ9bnVsbDt0aGlzLmJ1aWxkKCFjKX1yZXR1cm4gdGhpc307cC5ub3JtYWxpemVQYXRoPWZ1bmN0aW9uKGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHRoaXN9aWYoIXRoaXMuX3BhcnRzLnBhdGh8fHRoaXMuX3BhcnRzLnBhdGg9PT0nLycpe3JldHVybiB0aGlzfXZhciBkO3ZhciBlPXRoaXMuX3BhcnRzLnBhdGg7dmFyIGksbDtpZihlLmNoYXJBdCgwKSE9PScvJyl7ZD10cnVlO2U9Jy8nK2V9ZT1lLnJlcGxhY2UoLyhcLyhcLlwvKSspfChcL1wuJCkvZywnLycpLnJlcGxhY2UoL1wvezIsfS9nLCcvJyk7d2hpbGUodHJ1ZSl7aT1lLmluZGV4T2YoJy8uLi8nKTtpZihpPT09LTEpe2JyZWFrfWVsc2UgaWYoaT09PTApe2U9ZS5zdWJzdHJpbmcoMyk7YnJlYWt9bD1lLnN1YnN0cmluZygwLGkpLmxhc3RJbmRleE9mKCcvJyk7aWYobD09PS0xKXtsPWl9ZT1lLnN1YnN0cmluZygwLGwpK2Uuc3Vic3RyaW5nKGkrMyl9aWYoZCYmdGhpcy5pcygncmVsYXRpdmUnKSl7ZT1lLnN1YnN0cmluZygxKX1lPVUucmVjb2RlUGF0aChlKTt0aGlzLl9wYXJ0cy5wYXRoPWU7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9O3Aubm9ybWFsaXplUGF0aG5hbWU9cC5ub3JtYWxpemVQYXRoO3Aubm9ybWFsaXplUXVlcnk9ZnVuY3Rpb24oYyl7aWYodHlwZW9mIHRoaXMuX3BhcnRzLnF1ZXJ5PT09InN0cmluZyIpe2lmKCF0aGlzLl9wYXJ0cy5xdWVyeS5sZW5ndGgpe3RoaXMuX3BhcnRzLnF1ZXJ5PW51bGx9ZWxzZXt0aGlzLnF1ZXJ5KFUucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKSl9dGhpcy5idWlsZCghYyl9cmV0dXJuIHRoaXN9O3Aubm9ybWFsaXplRnJhZ21lbnQ9ZnVuY3Rpb24oYyl7aWYoIXRoaXMuX3BhcnRzLmZyYWdtZW50KXt0aGlzLl9wYXJ0cy5mcmFnbWVudD1udWxsO3RoaXMuYnVpbGQoIWMpfXJldHVybiB0aGlzfTtwLm5vcm1hbGl6ZVNlYXJjaD1wLm5vcm1hbGl6ZVF1ZXJ5O3Aubm9ybWFsaXplSGFzaD1wLm5vcm1hbGl6ZUZyYWdtZW50O3AuaXNvODg1OT1mdW5jdGlvbigpe3ZhciBlPVUuZW5jb2RlO3ZhciBkPVUuZGVjb2RlO1UuZW5jb2RlPWVzY2FwZTtVLmRlY29kZT1kZWNvZGVVUklDb21wb25lbnQ7dGhpcy5ub3JtYWxpemUoKTtVLmVuY29kZT1lO1UuZGVjb2RlPWQ7cmV0dXJuIHRoaXN9O3AudW5pY29kZT1mdW5jdGlvbigpe3ZhciBlPVUuZW5jb2RlO3ZhciBkPVUuZGVjb2RlO1UuZW5jb2RlPW87VS5kZWNvZGU9dW5lc2NhcGU7dGhpcy5ub3JtYWxpemUoKTtVLmVuY29kZT1lO1UuZGVjb2RlPWQ7cmV0dXJuIHRoaXN9O3AucmVhZGFibGU9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmNsb25lKCk7Yy51c2VybmFtZSgiIikucGFzc3dvcmQoIiIpLm5vcm1hbGl6ZSgpO3ZhciB0PScnO2lmKGMuX3BhcnRzLnByb3RvY29sKXt0Kz1jLl9wYXJ0cy5wcm90b2NvbCsnOi8vJ31pZihjLl9wYXJ0cy5ob3N0bmFtZSl7aWYoYy5pcygncHVueWNvZGUnKSYmYSl7dCs9YS50b1VuaWNvZGUoYy5fcGFydHMuaG9zdG5hbWUpO2lmKGMuX3BhcnRzLnBvcnQpe3QrPSI6IitjLl9wYXJ0cy5wb3J0fX1lbHNle3QrPWMuaG9zdCgpfX1pZihjLl9wYXJ0cy5ob3N0bmFtZSYmYy5fcGFydHMucGF0aCYmYy5fcGFydHMucGF0aC5jaGFyQXQoMCkhPT0nLycpe3QrPScvJ310Kz1jLnBhdGgodHJ1ZSk7aWYoYy5fcGFydHMucXVlcnkpe3ZhciBxPScnO2Zvcih2YXIgaT0wLGQ9Yy5fcGFydHMucXVlcnkuc3BsaXQoJyYnKSxsPWQubGVuZ3RoO2k8bDtpKyspe3ZhciBlPShkW2ldfHwiIikuc3BsaXQoJz0nKTtxKz0nJicrVS5kZWNvZGVRdWVyeShlWzBdLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpLnJlcGxhY2UoLyYvZywnJTI2Jyk7aWYoZVsxXSE9PXVuZGVmaW5lZCl7cSs9Ij0iK1UuZGVjb2RlUXVlcnkoZVsxXSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKS5yZXBsYWNlKC8mL2csJyUyNicpfX10Kz0nPycrcS5zdWJzdHJpbmcoMSl9dCs9VS5kZWNvZGVRdWVyeShjLmhhc2goKSx0cnVlKTtyZXR1cm4gdH07cC5hYnNvbHV0ZVRvPWZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuY2xvbmUoKTt2YXIgZT1bJ3Byb3RvY29sJywndXNlcm5hbWUnLCdwYXNzd29yZCcsJ2hvc3RuYW1lJywncG9ydCddO3ZhciBsLGkscDtpZih0aGlzLl9wYXJ0cy51cm4pe3Rocm93IG5ldyBFcnJvcignVVJOcyBkbyBub3QgaGF2ZSBhbnkgZ2VuZXJhbGx5IGRlZmluZWQgaGllcmFyY2hpY2FsIGNvbXBvbmVudHMnKX1pZighKGMgaW5zdGFuY2VvZiBVKSl7Yz1uZXcgVShjKX1pZighZC5fcGFydHMucHJvdG9jb2wpe2QuX3BhcnRzLnByb3RvY29sPWMuX3BhcnRzLnByb3RvY29sfWlmKHRoaXMuX3BhcnRzLmhvc3RuYW1lKXtyZXR1cm4gZH1mb3IoaT0wO3A9ZVtpXTtpKyspe2QuX3BhcnRzW3BdPWMuX3BhcnRzW3BdfWU9WydxdWVyeScsJ3BhdGgnXTtmb3IoaT0wO3A9ZVtpXTtpKyspe2lmKCFkLl9wYXJ0c1twXSYmYy5fcGFydHNbcF0pe2QuX3BhcnRzW3BdPWMuX3BhcnRzW3BdfX1pZihkLnBhdGgoKS5jaGFyQXQoMCkhPT0nLycpe2w9Yy5kaXJlY3RvcnkoKTtkLl9wYXJ0cy5wYXRoPShsPyhsKycvJyk6JycpK2QuX3BhcnRzLnBhdGg7ZC5ub3JtYWxpemVQYXRoKCl9ZC5idWlsZCgpO3JldHVybiBkfTtwLnJlbGF0aXZlVG89ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5jbG9uZSgpLm5vcm1hbGl6ZSgpO3ZhciBlLGksbCxzLHQ7aWYoZC5fcGFydHMudXJuKXt0aHJvdyBuZXcgRXJyb3IoJ1VSTnMgZG8gbm90IGhhdmUgYW55IGdlbmVyYWxseSBkZWZpbmVkIGhpZXJhcmNoaWNhbCBjb21wb25lbnRzJyl9Yz1uZXcgVShjKS5ub3JtYWxpemUoKTtlPWQuX3BhcnRzO2k9Yy5fcGFydHM7cz1kLnBhdGgoKTt0PWMucGF0aCgpO2lmKHMuY2hhckF0KDApIT09Jy8nKXt0aHJvdyBuZXcgRXJyb3IoJ1VSSSBpcyBhbHJlYWR5IHJlbGF0aXZlJyl9aWYodC5jaGFyQXQoMCkhPT0nLycpe3Rocm93IG5ldyBFcnJvcignQ2Fubm90IGNhbGN1bGF0ZSBhIFVSSSByZWxhdGl2ZSB0byBhbm90aGVyIHJlbGF0aXZlIFVSSScpfWlmKGUucHJvdG9jb2w9PT1pLnByb3RvY29sKXtlLnByb3RvY29sPW51bGx9aWYoZS51c2VybmFtZSE9PWkudXNlcm5hbWV8fGUucGFzc3dvcmQhPT1pLnBhc3N3b3JkKXtyZXR1cm4gZC5idWlsZCgpfWlmKGUucHJvdG9jb2whPT1udWxsfHxlLnVzZXJuYW1lIT09bnVsbHx8ZS5wYXNzd29yZCE9PW51bGwpe3JldHVybiBkLmJ1aWxkKCl9aWYoZS5ob3N0bmFtZT09PWkuaG9zdG5hbWUmJmUucG9ydD09PWkucG9ydCl7ZS5ob3N0bmFtZT1udWxsO2UucG9ydD1udWxsfWVsc2V7cmV0dXJuIGQuYnVpbGQoKX1pZihzPT09dCl7ZS5wYXRoPScnO3JldHVybiBkLmJ1aWxkKCl9bD1VLmNvbW1vblBhdGgoZC5wYXRoKCksYy5wYXRoKCkpO2lmKCFsKXtyZXR1cm4gZC5idWlsZCgpfXZhciB2PWkucGF0aC5zdWJzdHJpbmcobC5sZW5ndGgpLnJlcGxhY2UoL1teXC9dKiQvLCcnKS5yZXBsYWNlKC8uKj9cLy9nLCcuLi8nKTtlLnBhdGg9ditlLnBhdGguc3Vic3RyaW5nKGwubGVuZ3RoKTtyZXR1cm4gZC5idWlsZCgpfTtwLmVxdWFscz1mdW5jdGlvbihjKXt2YXIgZD10aGlzLmNsb25lKCk7dmFyIHQ9bmV3IFUoYyk7dmFyIGU9e307dmFyIGk9e307dmFyIGw9e307dmFyIHMsdix4O2Qubm9ybWFsaXplKCk7dC5ub3JtYWxpemUoKTtpZihkLnRvU3RyaW5nKCk9PT10LnRvU3RyaW5nKCkpe3JldHVybiB0cnVlfXM9ZC5xdWVyeSgpO3Y9dC5xdWVyeSgpO2QucXVlcnkoIiIpO3QucXVlcnkoIiIpO2lmKGQudG9TdHJpbmcoKSE9PXQudG9TdHJpbmcoKSl7cmV0dXJuIGZhbHNlfWlmKHMubGVuZ3RoIT09di5sZW5ndGgpe3JldHVybiBmYWxzZX1lPVUucGFyc2VRdWVyeShzLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO2k9VS5wYXJzZVF1ZXJ5KHYsdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7Zm9yKHggaW4gZSl7aWYoaC5jYWxsKGUseCkpe2lmKCFmKGVbeF0pKXtpZihlW3hdIT09aVt4XSl7cmV0dXJuIGZhbHNlfX1lbHNlIGlmKCFtKGVbeF0saVt4XSkpe3JldHVybiBmYWxzZX1sW3hdPXRydWV9fWZvcih4IGluIGkpe2lmKGguY2FsbChpLHgpKXtpZighbFt4XSl7cmV0dXJuIGZhbHNlfX19cmV0dXJuIHRydWV9O3AuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzPWZ1bmN0aW9uKHYpe3RoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycz0hIXY7cmV0dXJuIHRoaXN9O3AuZXNjYXBlUXVlcnlTcGFjZT1mdW5jdGlvbih2KXt0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlPSEhdjtyZXR1cm4gdGhpc307cmV0dXJuIFV9KSk7Ci8qIQogKiBqUXVlcnkgSmF2YVNjcmlwdCBMaWJyYXJ5IHYxLjExLjEKICogaHR0cDovL2pxdWVyeS5jb20vCiAqCiAqIEluY2x1ZGVzIFNpenpsZS5qcwogKiBodHRwOi8vc2l6emxlanMuY29tLwogKgogKiBDb3B5cmlnaHQgMjAwNSwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIERhdGU6IDIwMTQtMDUtMDFUMTc6NDJaCiAqLwooZnVuY3Rpb24oZyxmKXtpZih0eXBlb2YgbW9kdWxlPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUuZXhwb3J0cz09PSJvYmplY3QiKXttb2R1bGUuZXhwb3J0cz1nLmRvY3VtZW50P2YoZyx0cnVlKTpmdW5jdGlvbih3KXtpZighdy5kb2N1bWVudCl7dGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iil9cmV0dXJuIGYodyl9fWVsc2V7ZihnKX19KHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6dGhpcyxmdW5jdGlvbih3LGMpe3ZhciBkPVtdO3ZhciBmPWQuc2xpY2U7dmFyIGc9ZC5jb25jYXQ7dmFyIGg9ZC5wdXNoO3ZhciBrPWQuaW5kZXhPZjt2YXIgbz17fTt2YXIgcT1vLnRvU3RyaW5nO3ZhciB1PW8uaGFzT3duUHJvcGVydHk7dmFyIHg9e307dmFyIHk9IjEuMTEuMSIsUT1mdW5jdGlvbihzLGEpe3JldHVybiBuZXcgUS5mbi5pbml0KHMsYSl9LHo9L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLEE9L14tbXMtLyxCPS8tKFtcZGEtel0pL2dpLEM9ZnVuY3Rpb24oYSxsKXtyZXR1cm4gbC50b1VwcGVyQ2FzZSgpfTtRLmZuPVEucHJvdG90eXBlPXtqcXVlcnk6eSxjb25zdHJ1Y3RvcjpRLHNlbGVjdG9yOiIiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZi5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24obil7cmV0dXJuIG4hPW51bGw/KG48MD90aGlzW24rdGhpcy5sZW5ndGhdOnRoaXNbbl0pOmYuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciByPVEubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3IucHJldk9iamVjdD10aGlzO3IuY29udGV4dD10aGlzLmNvbnRleHQ7cmV0dXJuIHJ9LGVhY2g6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUS5lYWNoKHRoaXMsYSxiKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhRLm1hcCh0aGlzLGZ1bmN0aW9uKGIsaSl7cmV0dXJuIGEuY2FsbChiLGksYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oaSl7dmFyIGw9dGhpcy5sZW5ndGgsaj0raSsoaTwwP2w6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGo+PTAmJmo8bD9bdGhpc1tqXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKG51bGwpfSxwdXNoOmgsc29ydDpkLnNvcnQsc3BsaWNlOmQuc3BsaWNlfTtRLmV4dGVuZD1RLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBzLGEsYixuLGosbCx0PWFyZ3VtZW50c1swXXx8e30saT0xLG09YXJndW1lbnRzLmxlbmd0aCxwPWZhbHNlO2lmKHR5cGVvZiB0PT09ImJvb2xlYW4iKXtwPXQ7dD1hcmd1bWVudHNbaV18fHt9O2krK31pZih0eXBlb2YgdCE9PSJvYmplY3QiJiYhUS5pc0Z1bmN0aW9uKHQpKXt0PXt9fWlmKGk9PT1tKXt0PXRoaXM7aS0tfWZvcig7aTxtO2krKyl7aWYoKGo9YXJndW1lbnRzW2ldKSE9bnVsbCl7Zm9yKG4gaW4gail7cz10W25dO2I9altuXTtpZih0PT09Yil7Y29udGludWV9aWYocCYmYiYmKFEuaXNQbGFpbk9iamVjdChiKXx8KGE9US5pc0FycmF5KGIpKSkpe2lmKGEpe2E9ZmFsc2U7bD1zJiZRLmlzQXJyYXkocyk/czpbXX1lbHNle2w9cyYmUS5pc1BsYWluT2JqZWN0KHMpP3M6e319dFtuXT1RLmV4dGVuZChwLGwsYil9ZWxzZSBpZihiIT09dW5kZWZpbmVkKXt0W25dPWJ9fX19cmV0dXJuIHR9O1EuZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyh5K01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6dHJ1ZSxlcnJvcjpmdW5jdGlvbihtKXt0aHJvdyBuZXcgRXJyb3IobSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuIFEudHlwZShhKT09PSJmdW5jdGlvbiJ9LGlzQXJyYXk6QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oYSl7cmV0dXJuIFEudHlwZShhKT09PSJhcnJheSJ9LGlzV2luZG93OmZ1bmN0aW9uKGEpe3JldHVybiBhIT1udWxsJiZhPT1hLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGEpe3JldHVybiFRLmlzQXJyYXkoYSkmJmEtcGFyc2VGbG9hdChhKT49MH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgbjtmb3IobiBpbiBhKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoIWF8fFEudHlwZShhKSE9PSJvYmplY3QifHxhLm5vZGVUeXBlfHxRLmlzV2luZG93KGEpKXtyZXR1cm4gZmFsc2V9dHJ5e2lmKGEuY29uc3RydWN0b3ImJiF1LmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIXUuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXtyZXR1cm4gZmFsc2V9fWNhdGNoKGUpe3JldHVybiBmYWxzZX1pZih4Lm93bkxhc3Qpe2ZvcihiIGluIGEpe3JldHVybiB1LmNhbGwoYSxiKX19Zm9yKGIgaW4gYSl7fXJldHVybiBiPT09dW5kZWZpbmVkfHx1LmNhbGwoYSxiKX0sdHlwZTpmdW5jdGlvbihhKXtpZihhPT1udWxsKXtyZXR1cm4gYSsiIn1yZXR1cm4gdHlwZW9mIGE9PT0ib2JqZWN0Inx8dHlwZW9mIGE9PT0iZnVuY3Rpb24iP29bcS5jYWxsKGEpXXx8Im9iamVjdCI6dHlwZW9mIGF9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYSl7aWYoYSYmUS50cmltKGEpKXsody5leGVjU2NyaXB0fHxmdW5jdGlvbihhKXt3WyJldmFsIl0uY2FsbCh3LGEpfSkoYSl9fSxjYW1lbENhc2U6ZnVuY3Rpb24ocyl7cmV0dXJuIHMucmVwbGFjZShBLCJtcy0iKS5yZXBsYWNlKEIsQyl9LG5vZGVOYW1lOmZ1bmN0aW9uKGEsbil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PW4udG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihhLGIsail7dmFyIHYsaT0wLGw9YS5sZW5ndGgsbT1EKGEpO2lmKGope2lmKG0pe2Zvcig7aTxsO2krKyl7dj1iLmFwcGx5KGFbaV0saik7aWYodj09PWZhbHNlKXticmVha319fWVsc2V7Zm9yKGkgaW4gYSl7dj1iLmFwcGx5KGFbaV0saik7aWYodj09PWZhbHNlKXticmVha319fX1lbHNle2lmKG0pe2Zvcig7aTxsO2krKyl7dj1iLmNhbGwoYVtpXSxpLGFbaV0pO2lmKHY9PT1mYWxzZSl7YnJlYWt9fX1lbHNle2ZvcihpIGluIGEpe3Y9Yi5jYWxsKGFbaV0saSxhW2ldKTtpZih2PT09ZmFsc2Upe2JyZWFrfX19fXJldHVybiBhfSx0cmltOmZ1bmN0aW9uKHQpe3JldHVybiB0PT1udWxsPyIiOih0KyIiKS5yZXBsYWNlKHosIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxyKXt2YXIgYj1yfHxbXTtpZihhIT1udWxsKXtpZihEKE9iamVjdChhKSkpe1EubWVyZ2UoYix0eXBlb2YgYT09PSJzdHJpbmciP1thXTphKX1lbHNle2guY2FsbChiLGEpfX1yZXR1cm4gYn0saW5BcnJheTpmdW5jdGlvbihhLGIsaSl7dmFyIGw7aWYoYil7aWYoayl7cmV0dXJuIGsuY2FsbChiLGEsaSl9bD1iLmxlbmd0aDtpPWk/aTwwP01hdGgubWF4KDAsbCtpKTppOjA7Zm9yKDtpPGw7aSsrKXtpZihpIGluIGImJmJbaV09PT1hKXtyZXR1cm4gaX19fXJldHVybi0xfSxtZXJnZTpmdW5jdGlvbihhLHMpe3ZhciBsPStzLmxlbmd0aCxqPTAsaT1hLmxlbmd0aDt3aGlsZShqPGwpe2FbaSsrXT1zW2orK119aWYobCE9PWwpe3doaWxlKHNbal0hPT11bmRlZmluZWQpe2FbaSsrXT1zW2orK119fWEubGVuZ3RoPWk7cmV0dXJuIGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGope3ZhciBsLG09W10saT0wLG49YS5sZW5ndGgscD0hajtmb3IoO2k8bjtpKyspe2w9IWIoYVtpXSxpKTtpZihsIT09cCl7bS5wdXNoKGFbaV0pfX1yZXR1cm4gbX0sbWFwOmZ1bmN0aW9uKGEsYixqKXt2YXIgdixpPTAsbD1hLmxlbmd0aCxtPUQoYSkscj1bXTtpZihtKXtmb3IoO2k8bDtpKyspe3Y9YihhW2ldLGksaik7aWYodiE9bnVsbCl7ci5wdXNoKHYpfX19ZWxzZXtmb3IoaSBpbiBhKXt2PWIoYVtpXSxpLGopO2lmKHYhPW51bGwpe3IucHVzaCh2KX19fXJldHVybiBnLmFwcGx5KFtdLHIpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxiKXt2YXIgaixwLHQ7aWYodHlwZW9mIGI9PT0ic3RyaW5nIil7dD1hW2JdO2I9YTthPXR9aWYoIVEuaXNGdW5jdGlvbihhKSl7cmV0dXJuIHVuZGVmaW5lZH1qPWYuY2FsbChhcmd1bWVudHMsMik7cD1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsai5jb25jYXQoZi5jYWxsKGFyZ3VtZW50cykpKX07cC5ndWlkPWEuZ3VpZD1hLmd1aWR8fFEuZ3VpZCsrO3JldHVybiBwfSxub3c6ZnVuY3Rpb24oKXtyZXR1cm4rKG5ldyBEYXRlKCkpfSxzdXBwb3J0Onh9KTtRLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IiLnNwbGl0KCIgIiksZnVuY3Rpb24oaSxuKXtvWyJbb2JqZWN0ICIrbisiXSJdPW4udG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIEQoYSl7dmFyIGw9YS5sZW5ndGgsdD1RLnR5cGUoYSk7aWYodD09PSJmdW5jdGlvbiJ8fFEuaXNXaW5kb3coYSkpe3JldHVybiBmYWxzZX1pZihhLm5vZGVUeXBlPT09MSYmbCl7cmV0dXJuIHRydWV9cmV0dXJuIHQ9PT0iYXJyYXkifHxsPT09MHx8dHlwZW9mIGw9PT0ibnVtYmVyIiYmbD4wJiYobC0xKWluIGF9dmFyIFM9Ci8qIQogKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2MS4xMC4xOQogKiBodHRwOi8vc2l6emxlanMuY29tLwogKgogKiBDb3B5cmlnaHQgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIERhdGU6IDIwMTQtMDQtMTgKICovCihmdW5jdGlvbih3KXt2YXIgaSx4LGwsbixwLHQscixzLHYscjMsczMsdDMsSixvMyx1Myx2Myx3Myx4Myx5Myx6Mz0ic2l6emxlIistKG5ldyBEYXRlKCkpLEEzPXcuZG9jdW1lbnQsQjM9MCxDMz0wLEQzPWM0KCksRTM9YzQoKSxGMz1jNCgpLEczPWZ1bmN0aW9uKGEsYil7aWYoYT09PWIpe3MzPXRydWV9cmV0dXJuIDB9LFg9dHlwZW9mIHVuZGVmaW5lZCxIMz0xPDwzMSx1PSh7fSkuaGFzT3duUHJvcGVydHksSTM9W10sSjM9STMucG9wLEszPUkzLnB1c2gsaD1JMy5wdXNoLGY9STMuc2xpY2Usaz1JMy5pbmRleE9mfHxmdW5jdGlvbihhKXt2YXIgaT0wLGI9dGhpcy5sZW5ndGg7Zm9yKDtpPGI7aSsrKXtpZih0aGlzW2ldPT09YSl7cmV0dXJuIGl9fXJldHVybi0xfSxMMz0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLE0zPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixOMz0iKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLE8zPU4zLnJlcGxhY2UoInciLCJ3IyIpLFAzPSJcXFsiK00zKyIqKCIrTjMrIikoPzoiK00zKyIqKFsqXiR8IX5dPz0pIitNMysiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiK08zKyIpKXwpIitNMysiKlxcXSIsUTM9IjooIitOMysiKSg/OlxcKCgiKyIoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCIrIigoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrUDMrIikqKXwiKyIuKiIrIilcXCl8KSIsej1uZXcgUmVnRXhwKCJeIitNMysiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitNMysiKyQiLCJnIiksUjM9bmV3IFJlZ0V4cCgiXiIrTTMrIiosIitNMysiKiIpLFMzPW5ldyBSZWdFeHAoIl4iK00zKyIqKFs+K35dfCIrTTMrIikiK00zKyIqIiksVDM9bmV3IFJlZ0V4cCgiPSIrTTMrIiooW15cXF0nXCJdKj8pIitNMysiKlxcXSIsImciKSxVMz1uZXcgUmVnRXhwKFEzKSxWMz1uZXcgUmVnRXhwKCJeIitPMysiJCIpLFczPXsiSUQiOm5ldyBSZWdFeHAoIl4jKCIrTjMrIikiKSwiQ0xBU1MiOm5ldyBSZWdFeHAoIl5cXC4oIitOMysiKSIpLCJUQUciOm5ldyBSZWdFeHAoIl4oIitOMy5yZXBsYWNlKCJ3IiwidyoiKSsiKSIpLCJBVFRSIjpuZXcgUmVnRXhwKCJeIitQMyksIlBTRVVETyI6bmV3IFJlZ0V4cCgiXiIrUTMpLCJDSElMRCI6bmV3IFJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIitNMysiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTTMrIiooPzooWystXXwpIitNMysiKihcXGQrKXwpKSIrTTMrIipcXCl8KSIsImkiKSwiYm9vbCI6bmV3IFJlZ0V4cCgiXig/OiIrTDMrIikkIiwiaSIpLCJuZWVkc0NvbnRleHQiOm5ldyBSZWdFeHAoIl4iK00zKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK00zKyIqKCg/Oi1cXGQpP1xcZCopIitNMysiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sWDM9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxZMz0vXmhcZCQvaSxaMz0vXltee10rXHtccypcW25hdGl2ZSBcdy8sSz0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLCQzPS9bK35dLyxfMz0vJ3xcXC9nLGE0PW5ldyBSZWdFeHAoIlxcXFwoW1xcZGEtZl17MSw2fSIrTTMrIj98KCIrTTMrIil8LikiLCJpZyIpLGI0PWZ1bmN0aW9uKF8sYSxiKXt2YXIgaj0iMHgiK2EtMHgxMDAwMDtyZXR1cm4gaiE9PWp8fGI/YTpqPDA/U3RyaW5nLmZyb21DaGFyQ29kZShqKzB4MTAwMDApOlN0cmluZy5mcm9tQ2hhckNvZGUoaj4+MTB8MHhEODAwLGomMHgzRkZ8MHhEQzAwKX07dHJ5e2guYXBwbHkoKEkzPWYuY2FsbChBMy5jaGlsZE5vZGVzKSksQTMuY2hpbGROb2Rlcyk7STNbQTMuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGUpe2g9e2FwcGx5OkkzLmxlbmd0aD9mdW5jdGlvbihhLGIpe0szLmFwcGx5KGEsZi5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgaj1hLmxlbmd0aCxpPTA7d2hpbGUoKGFbaisrXT1iW2krK10pKXt9YS5sZW5ndGg9ai0xfX19ZnVuY3Rpb24gUyhhLGIsaixfKXt2YXIgdTQsdjQsbSx3NCxpLHg0LHk0LHo0LEE0LEI0O2lmKChiP2Iub3duZXJEb2N1bWVudHx8YjpBMykhPT1KKXt0MyhiKX1iPWJ8fEo7aj1qfHxbXTtpZighYXx8dHlwZW9mIGEhPT0ic3RyaW5nIil7cmV0dXJuIGp9aWYoKHc0PWIubm9kZVR5cGUpIT09MSYmdzQhPT05KXtyZXR1cm5bXX1pZih1MyYmIV8pe2lmKCh1ND1LLmV4ZWMoYSkpKXtpZigobT11NFsxXSkpe2lmKHc0PT09OSl7djQ9Yi5nZXRFbGVtZW50QnlJZChtKTtpZih2NCYmdjQucGFyZW50Tm9kZSl7aWYodjQuaWQ9PT1tKXtqLnB1c2godjQpO3JldHVybiBqfX1lbHNle3JldHVybiBqfX1lbHNle2lmKGIub3duZXJEb2N1bWVudCYmKHY0PWIub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChtKSkmJnkzKGIsdjQpJiZ2NC5pZD09PW0pe2oucHVzaCh2NCk7cmV0dXJuIGp9fX1lbHNlIGlmKHU0WzJdKXtoLmFwcGx5KGosYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSk7cmV0dXJuIGp9ZWxzZSBpZigobT11NFszXSkmJnguZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXtoLmFwcGx5KGosYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG0pKTtyZXR1cm4gan19aWYoeC5xc2EmJighdjN8fCF2My50ZXN0KGEpKSl7ejQ9eTQ9ejM7QTQ9YjtCND13ND09PTkmJmE7aWYodzQ9PT0xJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0ib2JqZWN0Iil7eDQ9dChhKTtpZigoeTQ9Yi5nZXRBdHRyaWJ1dGUoImlkIikpKXt6ND15NC5yZXBsYWNlKF8zLCJcXCQmIil9ZWxzZXtiLnNldEF0dHJpYnV0ZSgiaWQiLHo0KX16ND0iW2lkPSciK3o0KyInXSAiO2k9eDQubGVuZ3RoO3doaWxlKGktLSl7eDRbaV09ejQrbTQoeDRbaV0pfUE0PSQzLnRlc3QoYSkmJms0KGIucGFyZW50Tm9kZSl8fGI7QjQ9eDQuam9pbigiLCIpfWlmKEI0KXt0cnl7aC5hcHBseShqLEE0LnF1ZXJ5U2VsZWN0b3JBbGwoQjQpKTtyZXR1cm4gan1jYXRjaChDNCl7fWZpbmFsbHl7aWYoIXk0KXtiLnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fX19cmV0dXJuIHMoYS5yZXBsYWNlKHosIiQxIiksYixqLF8pfWZ1bmN0aW9uIGM0KCl7dmFyIGE9W107ZnVuY3Rpb24gYihqLG0pe2lmKGEucHVzaChqKyIgIik+bC5jYWNoZUxlbmd0aCl7ZGVsZXRlIGJbYS5zaGlmdCgpXX1yZXR1cm4oYltqKyIgIl09bSl9cmV0dXJuIGJ9ZnVuY3Rpb24gZDQoYSl7YVt6M109dHJ1ZTtyZXR1cm4gYX1mdW5jdGlvbiBlNChhKXt2YXIgYj1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RyeXtyZXR1cm4hIWEoYil9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfWZpbmFsbHl7aWYoYi5wYXJlbnROb2RlKXtiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYil9Yj1udWxsfX1mdW5jdGlvbiBmNChhLGIpe3ZhciBJMz1hLnNwbGl0KCJ8IiksaT1hLmxlbmd0aDt3aGlsZShpLS0pe2wuYXR0ckhhbmRsZVtJM1tpXV09Yn19ZnVuY3Rpb24gZzQoYSxiKXt2YXIgaj1iJiZhLG09aiYmYS5ub2RlVHlwZT09PTEmJmIubm9kZVR5cGU9PT0xJiYofmIuc291cmNlSW5kZXh8fEgzKS0ofmEuc291cmNlSW5kZXh8fEgzKTtpZihtKXtyZXR1cm4gbX1pZihqKXt3aGlsZSgoaj1qLm5leHRTaWJsaW5nKSl7aWYoaj09PWIpe3JldHVybi0xfX19cmV0dXJuIGE/MTotMX1mdW5jdGlvbiBoNChhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGo9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiBqPT09ImlucHV0IiYmYi50eXBlPT09YX19ZnVuY3Rpb24gaTQoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBqPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oaj09PSJpbnB1dCJ8fGo9PT0iYnV0dG9uIikmJmIudHlwZT09PWF9fWZ1bmN0aW9uIGo0KGEpe3JldHVybiBkNChmdW5jdGlvbihiKXtiPStiO3JldHVybiBkNChmdW5jdGlvbihtLHgzKXt2YXIgaixfPWEoW10sbS5sZW5ndGgsYiksaT1fLmxlbmd0aDt3aGlsZShpLS0pe2lmKG1bKGo9X1tpXSldKXttW2pdPSEoeDNbal09bVtqXSl9fX0pfSl9ZnVuY3Rpb24gazQoYSl7cmV0dXJuIGEmJnR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09WCYmYX14PVMuc3VwcG9ydD17fTtwPVMuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiP2Iubm9kZU5hbWUhPT0iSFRNTCI6ZmFsc2V9O3QzPVMuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oail7dmFyIF8sdTQ9aj9qLm93bmVyRG9jdW1lbnR8fGo6QTMsdjQ9dTQuZGVmYXVsdFZpZXc7aWYodTQ9PT1KfHx1NC5ub2RlVHlwZSE9PTl8fCF1NC5kb2N1bWVudEVsZW1lbnQpe3JldHVybiBKfUo9dTQ7bzM9dTQuZG9jdW1lbnRFbGVtZW50O3UzPSFwKHU0KTtpZih2NCYmdjQhPT12NC50b3Ape2lmKHY0LmFkZEV2ZW50TGlzdGVuZXIpe3Y0LmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZnVuY3Rpb24oKXt0MygpfSxmYWxzZSl9ZWxzZSBpZih2NC5hdHRhY2hFdmVudCl7djQuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixmdW5jdGlvbigpe3QzKCl9KX19eC5hdHRyaWJ1dGVzPWU0KGZ1bmN0aW9uKGEpe2EuY2xhc3NOYW1lPSJpIjtyZXR1cm4hYS5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpfSk7eC5nZXRFbGVtZW50c0J5VGFnTmFtZT1lNChmdW5jdGlvbihhKXthLmFwcGVuZENoaWxkKHU0LmNyZWF0ZUNvbW1lbnQoIiIpKTtyZXR1cm4hYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pO3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT1aMy50ZXN0KHU0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpJiZlNChmdW5jdGlvbihhKXthLmlubmVySFRNTD0iPGRpdiBjbGFzcz0nYSc+PC9kaXY+PGRpdiBjbGFzcz0nYSBpJz48L2Rpdj4iO2EuZmlyc3RDaGlsZC5jbGFzc05hbWU9ImkiO3JldHVybiBhLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImkiKS5sZW5ndGg9PT0yfSk7eC5nZXRCeUlkPWU0KGZ1bmN0aW9uKGEpe28zLmFwcGVuZENoaWxkKGEpLmlkPXozO3JldHVybiF1NC5nZXRFbGVtZW50c0J5TmFtZXx8IXU0LmdldEVsZW1lbnRzQnlOYW1lKHozKS5sZW5ndGh9KTtpZih4LmdldEJ5SWQpe2wuZmluZFsiSUQiXT1mdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBiLmdldEVsZW1lbnRCeUlkIT09WCYmdTMpe3ZhciBtPWIuZ2V0RWxlbWVudEJ5SWQoYSk7cmV0dXJuIG0mJm0ucGFyZW50Tm9kZT9bbV06W119fTtsLmZpbHRlclsiSUQiXT1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYTQsYjQpO3JldHVybiBmdW5jdGlvbihtKXtyZXR1cm4gbS5nZXRBdHRyaWJ1dGUoImlkIik9PT1ifX19ZWxzZXtkZWxldGUgbC5maW5kWyJJRCJdO2wuZmlsdGVyWyJJRCJdPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShhNCxiNCk7cmV0dXJuIGZ1bmN0aW9uKG0pe3ZhciBqPXR5cGVvZiBtLmdldEF0dHJpYnV0ZU5vZGUhPT1YJiZtLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIGomJmoudmFsdWU9PT1ifX19bC5maW5kWyJUQUciXT14LmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7aWYodHlwZW9mIGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1YKXtyZXR1cm4gYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKX19OmZ1bmN0aW9uKGEsYil7dmFyIG0sdzQ9W10saT0wLHg0PWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoYT09PSIqIil7d2hpbGUoKG09eDRbaSsrXSkpe2lmKG0ubm9kZVR5cGU9PT0xKXt3NC5wdXNoKG0pfX1yZXR1cm4gdzR9cmV0dXJuIHg0fTtsLmZpbmRbIkNMQVNTIl09eC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT1YJiZ1Myl7cmV0dXJuIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKX19O3czPVtdO3YzPVtdO2lmKCh4LnFzYT1aMy50ZXN0KHU0LnF1ZXJ5U2VsZWN0b3JBbGwpKSl7ZTQoZnVuY3Rpb24oYSl7YS5pbm5lckhUTUw9IjxzZWxlY3QgbXNhbGxvd2NsaXA9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iO2lmKGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djbGlwXj0nJ10iKS5sZW5ndGgpe3YzLnB1c2goIlsqXiRdPSIrTTMrIiooPzonJ3xcIlwiKSIpfWlmKCFhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGgpe3YzLnB1c2goIlxcWyIrTTMrIiooPzp2YWx1ZXwiK0wzKyIpIil9aWYoIWEucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGgpe3YzLnB1c2goIjpjaGVja2VkIil9fSk7ZTQoZnVuY3Rpb24oYSl7dmFyIGI9dTQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpO2EuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpO2lmKGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgpe3YzLnB1c2goIm5hbWUiK00zKyIqWypeJHwhfl0/PSIpfWlmKCFhLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RoKXt2My5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpfWEucXVlcnlTZWxlY3RvckFsbCgiKiw6eCIpO3YzLnB1c2goIiwuKjoiKX0pfWlmKCh4Lm1hdGNoZXNTZWxlY3Rvcj1aMy50ZXN0KCh4Mz1vMy5tYXRjaGVzfHxvMy53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8zLm1vek1hdGNoZXNTZWxlY3Rvcnx8bzMub01hdGNoZXNTZWxlY3Rvcnx8bzMubXNNYXRjaGVzU2VsZWN0b3IpKSkpe2U0KGZ1bmN0aW9uKGEpe3guZGlzY29ubmVjdGVkTWF0Y2g9eDMuY2FsbChhLCJkaXYiKTt4My5jYWxsKGEsIltzIT0nJ106eCIpO3czLnB1c2goIiE9IixRMyl9KX12Mz12My5sZW5ndGgmJm5ldyBSZWdFeHAodjMuam9pbigifCIpKTt3Mz13My5sZW5ndGgmJm5ldyBSZWdFeHAodzMuam9pbigifCIpKTtfPVozLnRlc3QobzMuY29tcGFyZURvY3VtZW50UG9zaXRpb24pO3kzPV98fFozLnRlc3QobzMuY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIG09YS5ub2RlVHlwZT09PTk/YS5kb2N1bWVudEVsZW1lbnQ6YSx3ND1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT13NHx8ISEodzQmJnc0Lm5vZGVUeXBlPT09MSYmKG0uY29udGFpbnM/bS5jb250YWlucyh3NCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih3NCkmMTYpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXt3aGlsZSgoYj1iLnBhcmVudE5vZGUpKXtpZihiPT09YSl7cmV0dXJuIHRydWV9fX1yZXR1cm4gZmFsc2V9O0czPV8/ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7czM9dHJ1ZTtyZXR1cm4gMH12YXIgbT0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtpZihtKXtyZXR1cm4gbX1tPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxO2lmKG0mMXx8KCF4LnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PW0pKXtpZihhPT09dTR8fGEub3duZXJEb2N1bWVudD09PUEzJiZ5MyhBMyxhKSl7cmV0dXJuLTF9aWYoYj09PXU0fHxiLm93bmVyRG9jdW1lbnQ9PT1BMyYmeTMoQTMsYikpe3JldHVybiAxfXJldHVybiByMz8oay5jYWxsKHIzLGEpLWsuY2FsbChyMyxiKSk6MH1yZXR1cm4gbSY0Py0xOjF9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpe3MzPXRydWU7cmV0dXJuIDB9dmFyIG0saT0wLHc0PWEucGFyZW50Tm9kZSx4ND1iLnBhcmVudE5vZGUsYXA9W2FdLGJwPVtiXTtpZighdzR8fCF4NCl7cmV0dXJuIGE9PT11ND8tMTpiPT09dTQ/MTp3ND8tMTp4ND8xOnIzPyhrLmNhbGwocjMsYSktay5jYWxsKHIzLGIpKTowfWVsc2UgaWYodzQ9PT14NCl7cmV0dXJuIGc0KGEsYil9bT1hO3doaWxlKChtPW0ucGFyZW50Tm9kZSkpe2FwLnVuc2hpZnQobSl9bT1iO3doaWxlKChtPW0ucGFyZW50Tm9kZSkpe2JwLnVuc2hpZnQobSl9d2hpbGUoYXBbaV09PT1icFtpXSl7aSsrfXJldHVybiBpP2c0KGFwW2ldLGJwW2ldKTphcFtpXT09PUEzPy0xOmJwW2ldPT09QTM/MTowfTtyZXR1cm4gdTR9O1MubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBTKGEsbnVsbCxudWxsLGIpfTtTLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09Sil7dDMoYSl9Yj1iLnJlcGxhY2UoVDMsIj0nJDEnXSIpO2lmKHgubWF0Y2hlc1NlbGVjdG9yJiZ1MyYmKCF3M3x8IXczLnRlc3QoYikpJiYoIXYzfHwhdjMudGVzdChiKSkpe3RyeXt2YXIgaj14My5jYWxsKGEsYik7aWYoanx8eC5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmYS5kb2N1bWVudC5ub2RlVHlwZSE9PTExKXtyZXR1cm4gan19Y2F0Y2goZSl7fX1yZXR1cm4gUyhiLEosbnVsbCxbYV0pLmxlbmd0aD4wfTtTLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1KKXt0MyhhKX1yZXR1cm4geTMoYSxiKX07Uy5hdHRyPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1KKXt0MyhhKX12YXIgaj1sLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxtPWomJnUuY2FsbChsLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9qKGEsYiwhdTMpOnVuZGVmaW5lZDtyZXR1cm4gbSE9PXVuZGVmaW5lZD9tOnguYXR0cmlidXRlc3x8IXUzP2EuZ2V0QXR0cmlidXRlKGIpOihtPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJm0uc3BlY2lmaWVkP20udmFsdWU6bnVsbH07Uy5lcnJvcj1mdW5jdGlvbihtKXt0aHJvdyBuZXcgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrbSl9O1MudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixtPVtdLGo9MCxpPTA7czM9IXguZGV0ZWN0RHVwbGljYXRlcztyMz0heC5zb3J0U3RhYmxlJiZhLnNsaWNlKDApO2Euc29ydChHMyk7aWYoczMpe3doaWxlKChiPWFbaSsrXSkpe2lmKGI9PT1hW2ldKXtqPW0ucHVzaChpKX19d2hpbGUoai0tKXthLnNwbGljZShtW2pdLDEpfX1yMz1udWxsO3JldHVybiBhfTtuPVMuZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixqPSIiLGk9MCxtPWEubm9kZVR5cGU7aWYoIW0pe3doaWxlKChiPWFbaSsrXSkpe2orPW4oYil9fWVsc2UgaWYobT09PTF8fG09PT05fHxtPT09MTEpe2lmKHR5cGVvZiBhLnRleHRDb250ZW50PT09InN0cmluZyIpe3JldHVybiBhLnRleHRDb250ZW50fWVsc2V7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKXtqKz1uKGEpfX19ZWxzZSBpZihtPT09M3x8bT09PTQpe3JldHVybiBhLm5vZGVWYWx1ZX1yZXR1cm4gan07bD1TLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmQ0LG1hdGNoOlczLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OnRydWV9LCIgIjp7ZGlyOiJwYXJlbnROb2RlIn0sIisiOntkaXI6InByZXZpb3VzU2libGluZyIsZmlyc3Q6dHJ1ZX0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6eyJBVFRSIjpmdW5jdGlvbihtKXttWzFdPW1bMV0ucmVwbGFjZShhNCxiNCk7bVszXT0obVszXXx8bVs0XXx8bVs1XXx8IiIpLnJlcGxhY2UoYTQsYjQpO2lmKG1bMl09PT0ifj0iKXttWzNdPSIgIittWzNdKyIgIn1yZXR1cm4gbS5zbGljZSgwLDQpfSwiQ0hJTEQiOmZ1bmN0aW9uKG0pe21bMV09bVsxXS50b0xvd2VyQ2FzZSgpO2lmKG1bMV0uc2xpY2UoMCwzKT09PSJudGgiKXtpZighbVszXSl7Uy5lcnJvcihtWzBdKX1tWzRdPSsobVs0XT9tWzVdKyhtWzZdfHwxKToyKihtWzNdPT09ImV2ZW4ifHxtWzNdPT09Im9kZCIpKTttWzVdPSsoKG1bN10rbVs4XSl8fG1bM109PT0ib2RkIil9ZWxzZSBpZihtWzNdKXtTLmVycm9yKG1bMF0pfXJldHVybiBtfSwiUFNFVURPIjpmdW5jdGlvbihtKXt2YXIgYSxiPSFtWzZdJiZtWzJdO2lmKFczWyJDSElMRCJdLnRlc3QobVswXSkpe3JldHVybiBudWxsfWlmKG1bM10pe21bMl09bVs0XXx8bVs1XXx8IiJ9ZWxzZSBpZihiJiZVMy50ZXN0KGIpJiYoYT10KGIsdHJ1ZSkpJiYoYT1iLmluZGV4T2YoIikiLGIubGVuZ3RoLWEpLWIubGVuZ3RoKSl7bVswXT1tWzBdLnNsaWNlKDAsYSk7bVsyXT1iLnNsaWNlKDAsYSl9cmV0dXJuIG0uc2xpY2UoMCwzKX19LGZpbHRlcjp7IlRBRyI6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGE0LGI0KS50b0xvd2VyQ2FzZSgpO3JldHVybiBhPT09IioiP2Z1bmN0aW9uKCl7cmV0dXJuIHRydWV9OmZ1bmN0aW9uKGope3JldHVybiBqLm5vZGVOYW1lJiZqLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sIkNMQVNTIjpmdW5jdGlvbihhKXt2YXIgYj1EM1thKyIgIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoIihefCIrTTMrIikiK2ErIigiK00zKyJ8JCkiKSkmJkQzKGEsZnVuY3Rpb24oail7cmV0dXJuIGIudGVzdCh0eXBlb2Ygai5jbGFzc05hbWU9PT0ic3RyaW5nIiYmai5jbGFzc05hbWV8fHR5cGVvZiBqLmdldEF0dHJpYnV0ZSE9PVgmJmouZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sIkFUVFIiOmZ1bmN0aW9uKGEsYixqKXtyZXR1cm4gZnVuY3Rpb24obSl7dmFyIF89Uy5hdHRyKG0sYSk7aWYoXz09bnVsbCl7cmV0dXJuIGI9PT0iIT0ifWlmKCFiKXtyZXR1cm4gdHJ1ZX1fKz0iIjtyZXR1cm4gYj09PSI9Ij9fPT09ajpiPT09IiE9Ij9fIT09ajpiPT09Il49Ij9qJiZfLmluZGV4T2Yoaik9PT0wOmI9PT0iKj0iP2omJl8uaW5kZXhPZihqKT4tMTpiPT09IiQ9Ij9qJiZfLnNsaWNlKC1qLmxlbmd0aCk9PT1qOmI9PT0ifj0iPygiICIrXysiICIpLmluZGV4T2Yoaik+LTE6Yj09PSJ8PSI/Xz09PWp8fF8uc2xpY2UoMCxqLmxlbmd0aCsxKT09PWorIi0iOmZhbHNlfX0sIkNISUxEIjpmdW5jdGlvbihhLGIsaixtLF8pe3ZhciB1ND1hLnNsaWNlKDAsMykhPT0ibnRoIix2ND1hLnNsaWNlKC00KSE9PSJsYXN0Iix3ND1iPT09Im9mLXR5cGUiO3JldHVybiBtPT09MSYmXz09PTA/ZnVuY3Rpb24oeDQpe3JldHVybiEheDQucGFyZW50Tm9kZX06ZnVuY3Rpb24oeDQseTQsejQpe3ZhciBBNCxCNCxDNCxENCxFNCxGNCxHND11NCE9PXY0PyJuZXh0U2libGluZyI6InByZXZpb3VzU2libGluZyIsSDQ9eDQucGFyZW50Tm9kZSxJND13NCYmeDQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxKND0hejQmJiF3NDtpZihINCl7aWYodTQpe3doaWxlKEc0KXtDND14NDt3aGlsZSgoQzQ9QzRbRzRdKSl7aWYodzQ/QzQubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PUk0OkM0Lm5vZGVUeXBlPT09MSl7cmV0dXJuIGZhbHNlfX1GND1HND1hPT09Im9ubHkiJiYhRjQmJiJuZXh0U2libGluZyJ9cmV0dXJuIHRydWV9RjQ9W3Y0P0g0LmZpcnN0Q2hpbGQ6SDQubGFzdENoaWxkXTtpZih2NCYmSjQpe0I0PUg0W3ozXXx8KEg0W3ozXT17fSk7QTQ9QjRbYV18fFtdO0U0PUE0WzBdPT09QjMmJkE0WzFdO0Q0PUE0WzBdPT09QjMmJkE0WzJdO0M0PUU0JiZINC5jaGlsZE5vZGVzW0U0XTt3aGlsZSgoQzQ9KytFNCYmQzQmJkM0W0c0XXx8KEQ0PUU0PTApfHxGNC5wb3AoKSkpe2lmKEM0Lm5vZGVUeXBlPT09MSYmKytENCYmQzQ9PT14NCl7QjRbYV09W0IzLEU0LEQ0XTticmVha319fWVsc2UgaWYoSjQmJihBND0oeDRbejNdfHwoeDRbejNdPXt9KSlbYV0pJiZBNFswXT09PUIzKXtEND1BNFsxXX1lbHNle3doaWxlKChDND0rK0U0JiZDNCYmQzRbRzRdfHwoRDQ9RTQ9MCl8fEY0LnBvcCgpKSl7aWYoKHc0P0M0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1JNDpDNC5ub2RlVHlwZT09PTEpJiYrK0Q0KXtpZihKNCl7KEM0W3ozXXx8KEM0W3ozXT17fSkpW2FdPVtCMyxENF19aWYoQzQ9PT14NCl7YnJlYWt9fX19RDQtPV87cmV0dXJuIEQ0PT09bXx8KEQ0JW09PT0wJiZENC9tPj0wKX19fSwiUFNFVURPIjpmdW5jdGlvbihhLGIpe3ZhciBqLG09bC5wc2V1ZG9zW2FdfHxsLnNldEZpbHRlcnNbYS50b0xvd2VyQ2FzZSgpXXx8Uy5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO2lmKG1bejNdKXtyZXR1cm4gbShiKX1pZihtLmxlbmd0aD4xKXtqPVthLGEsIiIsYl07cmV0dXJuIGwuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2Q0KGZ1bmN0aW9uKF8seDMpe3ZhciB1NCx2ND1tKF8sYiksaT12NC5sZW5ndGg7d2hpbGUoaS0tKXt1ND1rLmNhbGwoXyx2NFtpXSk7X1t1NF09ISh4M1t1NF09djRbaV0pfX0pOmZ1bmN0aW9uKF8pe3JldHVybiBtKF8sMCxqKX19cmV0dXJuIG19fSxwc2V1ZG9zOnsibm90IjpkNChmdW5jdGlvbihhKXt2YXIgYj1bXSxqPVtdLG09cihhLnJlcGxhY2UoeiwiJDEiKSk7cmV0dXJuIG1bejNdP2Q0KGZ1bmN0aW9uKF8seDMsdTQsdjQpe3ZhciB3NCx4ND1tKF8sbnVsbCx2NCxbXSksaT1fLmxlbmd0aDt3aGlsZShpLS0pe2lmKCh3ND14NFtpXSkpe19baV09ISh4M1tpXT13NCl9fX0pOmZ1bmN0aW9uKF8sdTQsdjQpe2JbMF09XzttKGIsbnVsbCx2NCxqKTtyZXR1cm4hai5wb3AoKX19KSwiaGFzIjpkNChmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIFMoYSxiKS5sZW5ndGg+MH19KSwiY29udGFpbnMiOmQ0KGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4oYi50ZXh0Q29udGVudHx8Yi5pbm5lclRleHR8fG4oYikpLmluZGV4T2YoYSk+LTF9fSksImxhbmciOmQ0KGZ1bmN0aW9uKGEpe2lmKCFWMy50ZXN0KGF8fCIiKSl7Uy5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIithKX1hPWEucmVwbGFjZShhNCxiNCkudG9Mb3dlckNhc2UoKTtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGo7ZG97aWYoKGo9dTM/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxiLmdldEF0dHJpYnV0ZSgibGFuZyIpKSl7aj1qLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGo9PT1hfHxqLmluZGV4T2YoYSsiLSIpPT09MH19d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmYi5ub2RlVHlwZT09PTEpO3JldHVybiBmYWxzZX19KSwidGFyZ2V0IjpmdW5jdGlvbihhKXt2YXIgYj13LmxvY2F0aW9uJiZ3LmxvY2F0aW9uLmhhc2g7cmV0dXJuIGImJmIuc2xpY2UoMSk9PT1hLmlkfSwicm9vdCI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1vM30sImZvY3VzIjpmdW5jdGlvbihhKXtyZXR1cm4gYT09PUouYWN0aXZlRWxlbWVudCYmKCFKLmhhc0ZvY3VzfHxKLmhhc0ZvY3VzKCkpJiYhIShhLnR5cGV8fGEuaHJlZnx8fmEudGFiSW5kZXgpfSwiZW5hYmxlZCI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT1mYWxzZX0sImRpc2FibGVkIjpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PXRydWV9LCJjaGVja2VkIjpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKGI9PT0iaW5wdXQiJiYhIWEuY2hlY2tlZCl8fChiPT09Im9wdGlvbiImJiEhYS5zZWxlY3RlZCl9LCJzZWxlY3RlZCI6ZnVuY3Rpb24oYSl7aWYoYS5wYXJlbnROb2RlKXthLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleH1yZXR1cm4gYS5zZWxlY3RlZD09PXRydWV9LCJlbXB0eSI6ZnVuY3Rpb24oYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKXtpZihhLm5vZGVUeXBlPDYpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9LCJwYXJlbnQiOmZ1bmN0aW9uKGEpe3JldHVybiFsLnBzZXVkb3NbImVtcHR5Il0oYSl9LCJoZWFkZXIiOmZ1bmN0aW9uKGEpe3JldHVybiBZMy50ZXN0KGEubm9kZU5hbWUpfSwiaW5wdXQiOmZ1bmN0aW9uKGEpe3JldHVybiBYMy50ZXN0KGEubm9kZU5hbWUpfSwiYnV0dG9uIjpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGI9PT0iaW5wdXQiJiZhLnR5cGU9PT0iYnV0dG9uInx8Yj09PSJidXR0b24ifSwidGV4dCI6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJpbnB1dCImJmEudHlwZT09PSJ0ZXh0IiYmKChiPWEuZ2V0QXR0cmlidXRlKCJ0eXBlIikpPT1udWxsfHxiLnRvTG93ZXJDYXNlKCk9PT0idGV4dCIpfSwiZmlyc3QiOmo0KGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksImxhc3QiOmo0KGZ1bmN0aW9uKG0sYSl7cmV0dXJuW2EtMV19KSwiZXEiOmo0KGZ1bmN0aW9uKG0sYSxiKXtyZXR1cm5bYjwwP2IrYTpiXX0pLCJldmVuIjpqNChmdW5jdGlvbihtLGEpe3ZhciBpPTA7Zm9yKDtpPGE7aSs9Mil7bS5wdXNoKGkpfXJldHVybiBtfSksIm9kZCI6ajQoZnVuY3Rpb24obSxhKXt2YXIgaT0xO2Zvcig7aTxhO2krPTIpe20ucHVzaChpKX1yZXR1cm4gbX0pLCJsdCI6ajQoZnVuY3Rpb24obSxhLGIpe3ZhciBpPWI8MD9iK2E6Yjtmb3IoOy0taT49MDspe20ucHVzaChpKX1yZXR1cm4gbX0pLCJndCI6ajQoZnVuY3Rpb24obSxhLGIpe3ZhciBpPWI8MD9iK2E6Yjtmb3IoOysraTxhOyl7bS5wdXNoKGkpfXJldHVybiBtfSl9fTtsLnBzZXVkb3NbIm50aCJdPWwucHNldWRvc1siZXEiXTtmb3IoaSBpbntyYWRpbzp0cnVlLGNoZWNrYm94OnRydWUsZmlsZTp0cnVlLHBhc3N3b3JkOnRydWUsaW1hZ2U6dHJ1ZX0pe2wucHNldWRvc1tpXT1oNChpKX1mb3IoaSBpbntzdWJtaXQ6dHJ1ZSxyZXNldDp0cnVlfSl7bC5wc2V1ZG9zW2ldPWk0KGkpfWZ1bmN0aW9uIGw0KCl7fWw0LnByb3RvdHlwZT1sLmZpbHRlcnM9bC5wc2V1ZG9zO2wuc2V0RmlsdGVycz1uZXcgbDQoKTt0PVMudG9rZW5pemU9ZnVuY3Rpb24oYSxiKXt2YXIgbSxqLF8sdTQsdjQsdzQseDQseTQ9RTNbYSsiICJdO2lmKHk0KXtyZXR1cm4gYj8wOnk0LnNsaWNlKDApfXY0PWE7dzQ9W107eDQ9bC5wcmVGaWx0ZXI7d2hpbGUodjQpe2lmKCFtfHwoaj1SMy5leGVjKHY0KSkpe2lmKGope3Y0PXY0LnNsaWNlKGpbMF0ubGVuZ3RoKXx8djR9dzQucHVzaCgoXz1bXSkpfW09ZmFsc2U7aWYoKGo9UzMuZXhlYyh2NCkpKXttPWouc2hpZnQoKTtfLnB1c2goe3ZhbHVlOm0sdHlwZTpqWzBdLnJlcGxhY2UoeiwiICIpfSk7djQ9djQuc2xpY2UobS5sZW5ndGgpfWZvcih1NCBpbiBsLmZpbHRlcil7aWYoKGo9VzNbdTRdLmV4ZWModjQpKSYmKCF4NFt1NF18fChqPXg0W3U0XShqKSkpKXttPWouc2hpZnQoKTtfLnB1c2goe3ZhbHVlOm0sdHlwZTp1NCxtYXRjaGVzOmp9KTt2ND12NC5zbGljZShtLmxlbmd0aCl9fWlmKCFtKXticmVha319cmV0dXJuIGI/djQubGVuZ3RoOnY0P1MuZXJyb3IoYSk6RTMoYSx3NCkuc2xpY2UoMCl9O2Z1bmN0aW9uIG00KGEpe3ZhciBpPTAsYj1hLmxlbmd0aCxqPSIiO2Zvcig7aTxiO2krKyl7ais9YVtpXS52YWx1ZX1yZXR1cm4gan1mdW5jdGlvbiBuNChtLGEsYil7dmFyIGo9YS5kaXIsXz1iJiZqPT09InBhcmVudE5vZGUiLHU0PUMzKys7cmV0dXJuIGEuZmlyc3Q/ZnVuY3Rpb24odjQsdzQseDQpe3doaWxlKCh2ND12NFtqXSkpe2lmKHY0Lm5vZGVUeXBlPT09MXx8Xyl7cmV0dXJuIG0odjQsdzQseDQpfX19OmZ1bmN0aW9uKHY0LHc0LHg0KXt2YXIgeTQsejQsQTQ9W0IzLHU0XTtpZih4NCl7d2hpbGUoKHY0PXY0W2pdKSl7aWYodjQubm9kZVR5cGU9PT0xfHxfKXtpZihtKHY0LHc0LHg0KSl7cmV0dXJuIHRydWV9fX19ZWxzZXt3aGlsZSgodjQ9djRbal0pKXtpZih2NC5ub2RlVHlwZT09PTF8fF8pe3o0PXY0W3ozXXx8KHY0W3ozXT17fSk7aWYoKHk0PXo0W2pdKSYmeTRbMF09PT1CMyYmeTRbMV09PT11NCl7cmV0dXJuKEE0WzJdPXk0WzJdKX1lbHNle3o0W2pdPUE0O2lmKChBNFsyXT1tKHY0LHc0LHg0KSkpe3JldHVybiB0cnVlfX19fX19fWZ1bmN0aW9uIG80KG0pe3JldHVybiBtLmxlbmd0aD4xP2Z1bmN0aW9uKGEsYixqKXt2YXIgaT1tLmxlbmd0aDt3aGlsZShpLS0pe2lmKCFtW2ldKGEsYixqKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX06bVswXX1mdW5jdGlvbiBwNChhLGIsail7dmFyIGk9MCxtPWIubGVuZ3RoO2Zvcig7aTxtO2krKyl7UyhhLGJbaV0sail9cmV0dXJuIGp9ZnVuY3Rpb24gcTQoYSxtLGIsaixfKXt2YXIgdTQsdjQ9W10saT0wLHc0PWEubGVuZ3RoLHg0PW0hPW51bGw7Zm9yKDtpPHc0O2krKyl7aWYoKHU0PWFbaV0pKXtpZighYnx8Yih1NCxqLF8pKXt2NC5wdXNoKHU0KTtpZih4NCl7bS5wdXNoKGkpfX19fXJldHVybiB2NH1mdW5jdGlvbiByNChhLGIsbSxqLF8sdTQpe2lmKGomJiFqW3ozXSl7aj1yNChqKX1pZihfJiYhX1t6M10pe189cjQoXyx1NCl9cmV0dXJuIGQ0KGZ1bmN0aW9uKHY0LHc0LHg0LHk0KXt2YXIgejQsaSxBNCxCND1bXSxDND1bXSxEND13NC5sZW5ndGgsRTQ9djR8fHA0KGJ8fCIqIix4NC5ub2RlVHlwZT9beDRdOng0LFtdKSxGND1hJiYodjR8fCFiKT9xNChFNCxCNCxhLHg0LHk0KTpFNCxHND1tP198fCh2ND9hOkQ0fHxqKT9bXTp3NDpGNDtpZihtKXttKEY0LEc0LHg0LHk0KX1pZihqKXt6ND1xNChHNCxDNCk7aih6NCxbXSx4NCx5NCk7aT16NC5sZW5ndGg7d2hpbGUoaS0tKXtpZigoQTQ9ejRbaV0pKXtHNFtDNFtpXV09IShGNFtDNFtpXV09QTQpfX19aWYodjQpe2lmKF98fGEpe2lmKF8pe3o0PVtdO2k9RzQubGVuZ3RoO3doaWxlKGktLSl7aWYoKEE0PUc0W2ldKSl7ejQucHVzaCgoRjRbaV09QTQpKX19XyhudWxsLChHND1bXSksejQseTQpfWk9RzQubGVuZ3RoO3doaWxlKGktLSl7aWYoKEE0PUc0W2ldKSYmKHo0PV8/ay5jYWxsKHY0LEE0KTpCNFtpXSk+LTEpe3Y0W3o0XT0hKHc0W3o0XT1BNCl9fX19ZWxzZXtHND1xNChHND09PXc0P0c0LnNwbGljZShENCxHNC5sZW5ndGgpOkc0KTtpZihfKXtfKG51bGwsdzQsRzQseTQpfWVsc2V7aC5hcHBseSh3NCxHNCl9fX0pfWZ1bmN0aW9uIHM0KGEpe3ZhciBiLG0saixfPWEubGVuZ3RoLHU0PWwucmVsYXRpdmVbYVswXS50eXBlXSx2ND11NHx8bC5yZWxhdGl2ZVsiICJdLGk9dTQ/MTowLHc0PW40KGZ1bmN0aW9uKHo0KXtyZXR1cm4gejQ9PT1ifSx2NCx0cnVlKSx4ND1uNChmdW5jdGlvbih6NCl7cmV0dXJuIGsuY2FsbChiLHo0KT4tMX0sdjQsdHJ1ZSkseTQ9W2Z1bmN0aW9uKHo0LEE0LEI0KXtyZXR1cm4oIXU0JiYoQjR8fEE0IT09dikpfHwoKGI9QTQpLm5vZGVUeXBlP3c0KHo0LEE0LEI0KTp4NCh6NCxBNCxCNCkpfV07Zm9yKDtpPF87aSsrKXtpZigobT1sLnJlbGF0aXZlW2FbaV0udHlwZV0pKXt5ND1bbjQobzQoeTQpLG0pXX1lbHNle209bC5maWx0ZXJbYVtpXS50eXBlXS5hcHBseShudWxsLGFbaV0ubWF0Y2hlcyk7aWYobVt6M10pe2o9KytpO2Zvcig7ajxfO2orKyl7aWYobC5yZWxhdGl2ZVthW2pdLnR5cGVdKXticmVha319cmV0dXJuIHI0KGk+MSYmbzQoeTQpLGk+MSYmbTQoYS5zbGljZSgwLGktMSkuY29uY2F0KHt2YWx1ZTphW2ktMl0udHlwZT09PSIgIj8iKiI6IiJ9KSkucmVwbGFjZSh6LCIkMSIpLG0saTxqJiZzNChhLnNsaWNlKGksaikpLGo8XyYmczQoKGE9YS5zbGljZShqKSkpLGo8XyYmbTQoYSkpfXk0LnB1c2gobSl9fXJldHVybiBvNCh5NCl9ZnVuY3Rpb24gdDQoYSxiKXt2YXIgbT1iLmxlbmd0aD4wLF89YS5sZW5ndGg+MCx1ND1mdW5jdGlvbih2NCx3NCx4NCx5NCx6NCl7dmFyIEE0LGosQjQsQzQ9MCxpPSIwIixEND12NCYmW10sRTQ9W10sRjQ9dixHND12NHx8XyYmbC5maW5kWyJUQUciXSgiKiIsejQpLEg0PShCMys9RjQ9PW51bGw/MTpNYXRoLnJhbmRvbSgpfHwwLjEpLEk0PUc0Lmxlbmd0aDtpZih6NCl7dj13NCE9PUomJnc0fWZvcig7aSE9PUk0JiYoQTQ9RzRbaV0pIT1udWxsO2krKyl7aWYoXyYmQTQpe2o9MDt3aGlsZSgoQjQ9YVtqKytdKSl7aWYoQjQoQTQsdzQseDQpKXt5NC5wdXNoKEE0KTticmVha319aWYoejQpe0IzPUg0fX1pZihtKXtpZigoQTQ9IUI0JiZBNCkpe0M0LS19aWYodjQpe0Q0LnB1c2goQTQpfX19QzQrPWk7aWYobSYmaSE9PUM0KXtqPTA7d2hpbGUoKEI0PWJbaisrXSkpe0I0KEQ0LEU0LHc0LHg0KX1pZih2NCl7aWYoQzQ+MCl7d2hpbGUoaS0tKXtpZighKEQ0W2ldfHxFNFtpXSkpe0U0W2ldPUozLmNhbGwoeTQpfX19RTQ9cTQoRTQpfWguYXBwbHkoeTQsRTQpO2lmKHo0JiYhdjQmJkU0Lmxlbmd0aD4wJiYoQzQrYi5sZW5ndGgpPjEpe1MudW5pcXVlU29ydCh5NCl9fWlmKHo0KXtCMz1INDt2PUY0fXJldHVybiBENH07cmV0dXJuIG0/ZDQodTQpOnU0fXI9Uy5jb21waWxlPWZ1bmN0aW9uKGEsbSl7dmFyIGksYj1bXSxqPVtdLF89RjNbYSsiICJdO2lmKCFfKXtpZighbSl7bT10KGEpfWk9bS5sZW5ndGg7d2hpbGUoaS0tKXtfPXM0KG1baV0pO2lmKF9bejNdKXtiLnB1c2goXyl9ZWxzZXtqLnB1c2goXyl9fV89RjMoYSx0NChqLGIpKTtfLnNlbGVjdG9yPWF9cmV0dXJuIF99O3M9Uy5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGosbSl7dmFyIGksXyx1NCx2NCx3NCx4ND10eXBlb2YgYT09PSJmdW5jdGlvbiImJmEseTQ9IW0mJnQoKGE9eDQuc2VsZWN0b3J8fGEpKTtqPWp8fFtdO2lmKHk0Lmxlbmd0aD09PTEpe189eTRbMF09eTRbMF0uc2xpY2UoMCk7aWYoXy5sZW5ndGg+MiYmKHU0PV9bMF0pLnR5cGU9PT0iSUQiJiZ4LmdldEJ5SWQmJmIubm9kZVR5cGU9PT05JiZ1MyYmbC5yZWxhdGl2ZVtfWzFdLnR5cGVdKXtiPShsLmZpbmRbIklEIl0odTQubWF0Y2hlc1swXS5yZXBsYWNlKGE0LGI0KSxiKXx8W10pWzBdO2lmKCFiKXtyZXR1cm4gan1lbHNlIGlmKHg0KXtiPWIucGFyZW50Tm9kZX1hPWEuc2xpY2UoXy5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1XM1sibmVlZHNDb250ZXh0Il0udGVzdChhKT8wOl8ubGVuZ3RoO3doaWxlKGktLSl7dTQ9X1tpXTtpZihsLnJlbGF0aXZlWyh2ND11NC50eXBlKV0pe2JyZWFrfWlmKCh3ND1sLmZpbmRbdjRdKSl7aWYoKG09dzQodTQubWF0Y2hlc1swXS5yZXBsYWNlKGE0LGI0KSwkMy50ZXN0KF9bMF0udHlwZSkmJms0KGIucGFyZW50Tm9kZSl8fGIpKSl7Xy5zcGxpY2UoaSwxKTthPW0ubGVuZ3RoJiZtNChfKTtpZighYSl7aC5hcHBseShqLG0pO3JldHVybiBqfWJyZWFrfX19fSh4NHx8cihhLHk0KSkobSxiLCF1MyxqLCQzLnRlc3QoYSkmJms0KGIucGFyZW50Tm9kZSl8fGIpO3JldHVybiBqfTt4LnNvcnRTdGFibGU9ejMuc3BsaXQoIiIpLnNvcnQoRzMpLmpvaW4oIiIpPT09ejM7eC5kZXRlY3REdXBsaWNhdGVzPSEhczM7dDMoKTt4LnNvcnREZXRhY2hlZD1lNChmdW5jdGlvbihhKXtyZXR1cm4gYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihKLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSYxfSk7aWYoIWU0KGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IjtyZXR1cm4gYS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpPT09IiMifSkpe2Y0KCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihhLGIscCl7aWYoIXApe3JldHVybiBhLmdldEF0dHJpYnV0ZShiLGIudG9Mb3dlckNhc2UoKT09PSJ0eXBlIj8xOjIpfX0pfWlmKCF4LmF0dHJpYnV0ZXN8fCFlNChmdW5jdGlvbihhKXthLmlubmVySFRNTD0iPGlucHV0Lz4iO2EuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIik7cmV0dXJuIGEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT0iIn0pKXtmNCgidmFsdWUiLGZ1bmN0aW9uKGEsYixwKXtpZighcCYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ImlucHV0Iil7cmV0dXJuIGEuZGVmYXVsdFZhbHVlfX0pfWlmKCFlNChmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIik9PW51bGx9KSl7ZjQoTDMsZnVuY3Rpb24oYSxiLHApe3ZhciBqO2lmKCFwKXtyZXR1cm4gYVtiXT09PXRydWU/Yi50b0xvd2VyQ2FzZSgpOihqPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmouc3BlY2lmaWVkP2oudmFsdWU6bnVsbH19KX1yZXR1cm4gU30pKHcpO1EuZmluZD1TO1EuZXhwcj1TLnNlbGVjdG9ycztRLmV4cHJbIjoiXT1RLmV4cHIucHNldWRvcztRLnVuaXF1ZT1TLnVuaXF1ZVNvcnQ7US50ZXh0PVMuZ2V0VGV4dDtRLmlzWE1MRG9jPVMuaXNYTUw7US5jb250YWlucz1TLmNvbnRhaW5zO3ZhciBFPVEuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQ7dmFyIEY9KC9ePChcdyspXHMqXC8/Pig/OjxcL1wxPnwpJC8pO3ZhciBHPS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24gSChhLGIsbil7aWYoUS5pc0Z1bmN0aW9uKGIpKXtyZXR1cm4gUS5ncmVwKGEsZnVuY3Rpb24oaixpKXtyZXR1cm4hIWIuY2FsbChqLGksaikhPT1ufSl9aWYoYi5ub2RlVHlwZSl7cmV0dXJuIFEuZ3JlcChhLGZ1bmN0aW9uKGope3JldHVybihqPT09YikhPT1ufSl9aWYodHlwZW9mIGI9PT0ic3RyaW5nIil7aWYoRy50ZXN0KGIpKXtyZXR1cm4gUS5maWx0ZXIoYixhLG4pfWI9US5maWx0ZXIoYixhKX1yZXR1cm4gUS5ncmVwKGEsZnVuY3Rpb24oail7cmV0dXJuKFEuaW5BcnJheShqLGIpPj0wKSE9PW59KX1RLmZpbHRlcj1mdW5jdGlvbihhLGIsbil7dmFyIGo9YlswXTtpZihuKXthPSI6bm90KCIrYSsiKSJ9cmV0dXJuIGIubGVuZ3RoPT09MSYmai5ub2RlVHlwZT09PTE/US5maW5kLm1hdGNoZXNTZWxlY3RvcihqLGEpP1tqXTpbXTpRLmZpbmQubWF0Y2hlcyhhLFEuZ3JlcChiLGZ1bmN0aW9uKGope3JldHVybiBqLm5vZGVUeXBlPT09MX0pKX07US5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24ocyl7dmFyIGkscj1bXSxhPXRoaXMsbD1hLmxlbmd0aDtpZih0eXBlb2YgcyE9PSJzdHJpbmciKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUShzKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoaT0wO2k8bDtpKyspe2lmKFEuY29udGFpbnMoYVtpXSx0aGlzKSl7cmV0dXJuIHRydWV9fX0pKX1mb3IoaT0wO2k8bDtpKyspe1EuZmluZChzLGFbaV0scil9cj10aGlzLnB1c2hTdGFjayhsPjE/US51bmlxdWUocik6cik7ci5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yP3RoaXMuc2VsZWN0b3IrIiAiK3M6cztyZXR1cm4gcn0sZmlsdGVyOmZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLnB1c2hTdGFjayhIKHRoaXMsc3x8W10sZmFsc2UpKX0sbm90OmZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLnB1c2hTdGFjayhIKHRoaXMsc3x8W10sdHJ1ZSkpfSxpczpmdW5jdGlvbihzKXtyZXR1cm4hIUgodGhpcyx0eXBlb2Ygcz09PSJzdHJpbmciJiZFLnRlc3Qocyk/UShzKTpzfHxbXSxmYWxzZSkubGVuZ3RofX0pO3ZhciBJLEo9dy5kb2N1bWVudCxLPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKikpJC8sTD1RLmZuLmluaXQ9ZnVuY3Rpb24ocyxhKXt2YXIgbSxiO2lmKCFzKXtyZXR1cm4gdGhpc31pZih0eXBlb2Ygcz09PSJzdHJpbmciKXtpZihzLmNoYXJBdCgwKT09PSI8IiYmcy5jaGFyQXQocy5sZW5ndGgtMSk9PT0iPiImJnMubGVuZ3RoPj0zKXttPVtudWxsLHMsbnVsbF19ZWxzZXttPUsuZXhlYyhzKX1pZihtJiYobVsxXXx8IWEpKXtpZihtWzFdKXthPWEgaW5zdGFuY2VvZiBRP2FbMF06YTtRLm1lcmdlKHRoaXMsUS5wYXJzZUhUTUwobVsxXSxhJiZhLm5vZGVUeXBlP2Eub3duZXJEb2N1bWVudHx8YTpKLHRydWUpKTtpZihGLnRlc3QobVsxXSkmJlEuaXNQbGFpbk9iamVjdChhKSl7Zm9yKG0gaW4gYSl7aWYoUS5pc0Z1bmN0aW9uKHRoaXNbbV0pKXt0aGlzW21dKGFbbV0pfWVsc2V7dGhpcy5hdHRyKG0sYVttXSl9fX1yZXR1cm4gdGhpc31lbHNle2I9Si5nZXRFbGVtZW50QnlJZChtWzJdKTtpZihiJiZiLnBhcmVudE5vZGUpe2lmKGIuaWQhPT1tWzJdKXtyZXR1cm4gSS5maW5kKHMpfXRoaXMubGVuZ3RoPTE7dGhpc1swXT1ifXRoaXMuY29udGV4dD1KO3RoaXMuc2VsZWN0b3I9cztyZXR1cm4gdGhpc319ZWxzZSBpZighYXx8YS5qcXVlcnkpe3JldHVybihhfHxJKS5maW5kKHMpfWVsc2V7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IoYSkuZmluZChzKX19ZWxzZSBpZihzLm5vZGVUeXBlKXt0aGlzLmNvbnRleHQ9dGhpc1swXT1zO3RoaXMubGVuZ3RoPTE7cmV0dXJuIHRoaXN9ZWxzZSBpZihRLmlzRnVuY3Rpb24ocykpe3JldHVybiB0eXBlb2YgSS5yZWFkeSE9PSJ1bmRlZmluZWQiP0kucmVhZHkocyk6cyhRKX1pZihzLnNlbGVjdG9yIT09dW5kZWZpbmVkKXt0aGlzLnNlbGVjdG9yPXMuc2VsZWN0b3I7dGhpcy5jb250ZXh0PXMuY29udGV4dH1yZXR1cm4gUS5tYWtlQXJyYXkocyx0aGlzKX07TC5wcm90b3R5cGU9US5mbjtJPVEoSik7dmFyIE09L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sTj17Y2hpbGRyZW46dHJ1ZSxjb250ZW50czp0cnVlLG5leHQ6dHJ1ZSxwcmV2OnRydWV9O1EuZXh0ZW5kKHtkaXI6ZnVuY3Rpb24oYSxiLGope3ZhciBtPVtdLGw9YVtiXTt3aGlsZShsJiZsLm5vZGVUeXBlIT09OSYmKGo9PT11bmRlZmluZWR8fGwubm9kZVR5cGUhPT0xfHwhUShsKS5pcyhqKSkpe2lmKGwubm9kZVR5cGU9PT0xKXttLnB1c2gobCl9bD1sW2JdfXJldHVybiBtfSxzaWJsaW5nOmZ1bmN0aW9uKG4sYSl7dmFyIHI9W107Zm9yKDtuO249bi5uZXh0U2libGluZyl7aWYobi5ub2RlVHlwZT09PTEmJm4hPT1hKXtyLnB1c2gobil9fXJldHVybiByfX0pO1EuZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24odCl7dmFyIGksYT1RKHQsdGhpcyksbD1hLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoaT0wO2k8bDtpKyspe2lmKFEuY29udGFpbnModGhpcyxhW2ldKSl7cmV0dXJuIHRydWV9fX0pfSxjbG9zZXN0OmZ1bmN0aW9uKHMsYSl7dmFyIGIsaT0wLGw9dGhpcy5sZW5ndGgsbT1bXSxwPUUudGVzdChzKXx8dHlwZW9mIHMhPT0ic3RyaW5nIj9RKHMsYXx8dGhpcy5jb250ZXh0KTowO2Zvcig7aTxsO2krKyl7Zm9yKGI9dGhpc1tpXTtiJiZiIT09YTtiPWIucGFyZW50Tm9kZSl7aWYoYi5ub2RlVHlwZTwxMSYmKHA/cC5pbmRleChiKT4tMTpiLm5vZGVUeXBlPT09MSYmUS5maW5kLm1hdGNoZXNTZWxlY3RvcihiLHMpKSl7bS5wdXNoKGIpO2JyZWFrfX19cmV0dXJuIHRoaXMucHVzaFN0YWNrKG0ubGVuZ3RoPjE/US51bmlxdWUobSk6bSl9LGluZGV4OmZ1bmN0aW9uKGEpe2lmKCFhKXtyZXR1cm4odGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlKT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX1pZih0eXBlb2YgYT09PSJzdHJpbmciKXtyZXR1cm4gUS5pbkFycmF5KHRoaXNbMF0sUShhKSl9cmV0dXJuIFEuaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyl9LGFkZDpmdW5jdGlvbihzLGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhRLnVuaXF1ZShRLm1lcmdlKHRoaXMuZ2V0KCksUShzLGEpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLmFkZChzPT1udWxsP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKHMpKX19KTtmdW5jdGlvbiBPKGEsYil7ZG97YT1hW2JdfXdoaWxlKGEmJmEubm9kZVR5cGUhPT0xKTtyZXR1cm4gYX1RLmVhY2goe3BhcmVudDpmdW5jdGlvbihhKXt2YXIgcD1hLnBhcmVudE5vZGU7cmV0dXJuIHAmJnAubm9kZVR5cGUhPT0xMT9wOm51bGx9LHBhcmVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIFEuZGlyKGEsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGEsaSxiKXtyZXR1cm4gUS5kaXIoYSwicGFyZW50Tm9kZSIsYil9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIE8oYSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gTyhhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gUS5kaXIoYSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gUS5kaXIoYSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihhLGksYil7cmV0dXJuIFEuZGlyKGEsIm5leHRTaWJsaW5nIixiKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsaSxiKXtyZXR1cm4gUS5kaXIoYSwicHJldmlvdXNTaWJsaW5nIixiKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIFEuc2libGluZygoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIFEuc2libGluZyhhLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gUS5ub2RlTmFtZShhLCJpZnJhbWUiKT9hLmNvbnRlbnREb2N1bWVudHx8YS5jb250ZW50V2luZG93LmRvY3VtZW50OlEubWVyZ2UoW10sYS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKG4sYSl7US5mbltuXT1mdW5jdGlvbihiLHMpe3ZhciByPVEubWFwKHRoaXMsYSxiKTtpZihuLnNsaWNlKC01KSE9PSJVbnRpbCIpe3M9Yn1pZihzJiZ0eXBlb2Ygcz09PSJzdHJpbmciKXtyPVEuZmlsdGVyKHMscil9aWYodGhpcy5sZW5ndGg+MSl7aWYoIU5bbl0pe3I9US51bmlxdWUocil9aWYoTS50ZXN0KG4pKXtyPXIucmV2ZXJzZSgpfX1yZXR1cm4gdGhpcy5wdXNoU3RhY2socil9fSk7dmFyIFA9KC9cUysvZyk7dmFyIFI9e307ZnVuY3Rpb24gVChhKXt2YXIgYj1SW2FdPXt9O1EuZWFjaChhLm1hdGNoKFApfHxbXSxmdW5jdGlvbihfLGope2Jbal09dHJ1ZX0pO3JldHVybiBifVEuQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9dHlwZW9mIGE9PT0ic3RyaW5nIj8oUlthXXx8VChhKSk6US5leHRlbmQoe30sYSk7dmFyIGIsbSxqLGwsbixwLHI9W10scz0hYS5vbmNlJiZbXSx0PWZ1bmN0aW9uKF8pe209YS5tZW1vcnkmJl87aj10cnVlO249cHx8MDtwPTA7bD1yLmxlbmd0aDtiPXRydWU7Zm9yKDtyJiZuPGw7bisrKXtpZihyW25dLmFwcGx5KF9bMF0sX1sxXSk9PT1mYWxzZSYmYS5zdG9wT25GYWxzZSl7bT1mYWxzZTticmVha319Yj1mYWxzZTtpZihyKXtpZihzKXtpZihzLmxlbmd0aCl7dChzLnNoaWZ0KCkpfX1lbHNlIGlmKG0pe3I9W119ZWxzZXt2LmRpc2FibGUoKX19fSx2PXthZGQ6ZnVuY3Rpb24oKXtpZihyKXt2YXIgcjM9ci5sZW5ndGg7KGZ1bmN0aW9uIGFkZChzMyl7US5lYWNoKHMzLGZ1bmN0aW9uKF8sdDMpe3ZhciB1Mz1RLnR5cGUodDMpO2lmKHUzPT09ImZ1bmN0aW9uIil7aWYoIWEudW5pcXVlfHwhdi5oYXModDMpKXtyLnB1c2godDMpfX1lbHNlIGlmKHQzJiZ0My5sZW5ndGgmJnUzIT09InN0cmluZyIpe2FkZCh0Myl9fSl9KShhcmd1bWVudHMpO2lmKGIpe2w9ci5sZW5ndGh9ZWxzZSBpZihtKXtwPXIzO3QobSl9fXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtpZihyKXtRLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKF8scjMpe3ZhciBzMzt3aGlsZSgoczM9US5pbkFycmF5KHIzLHIsczMpKT4tMSl7ci5zcGxpY2UoczMsMSk7aWYoYil7aWYoczM8PWwpe2wtLX1pZihzMzw9bil7bi0tfX19fSl9cmV0dXJuIHRoaXN9LGhhczpmdW5jdGlvbihfKXtyZXR1cm4gXz9RLmluQXJyYXkoXyxyKT4tMTohIShyJiZyLmxlbmd0aCl9LGVtcHR5OmZ1bmN0aW9uKCl7cj1bXTtsPTA7cmV0dXJuIHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyPXM9bT11bmRlZmluZWQ7cmV0dXJuIHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIXJ9LGxvY2s6ZnVuY3Rpb24oKXtzPXVuZGVmaW5lZDtpZighbSl7di5kaXNhYmxlKCl9cmV0dXJuIHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFzfSxmaXJlV2l0aDpmdW5jdGlvbihfLHIzKXtpZihyJiYoIWp8fHMpKXtyMz1yM3x8W107cjM9W18scjMuc2xpY2U/cjMuc2xpY2UoKTpyM107aWYoYil7cy5wdXNoKHIzKX1lbHNle3QocjMpfX1yZXR1cm4gdGhpc30sZmlyZTpmdW5jdGlvbigpe3YuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhan19O3JldHVybiB2fTtRLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIHQ9W1sicmVzb2x2ZSIsImRvbmUiLFEuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsUS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsUS5DYWxsYmFja3MoIm1lbW9yeSIpXV0scz0icGVuZGluZyIscD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gc30sYWx3YXlzOmZ1bmN0aW9uKCl7Yi5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpO3JldHVybiB0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGo9YXJndW1lbnRzO3JldHVybiBRLkRlZmVycmVkKGZ1bmN0aW9uKG4pe1EuZWFjaCh0LGZ1bmN0aW9uKGksbCl7dmFyIG09US5pc0Z1bmN0aW9uKGpbaV0pJiZqW2ldO2JbbFsxXV0oZnVuY3Rpb24oKXt2YXIgcj1tJiZtLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihyJiZRLmlzRnVuY3Rpb24oci5wcm9taXNlKSl7ci5wcm9taXNlKCkuZG9uZShuLnJlc29sdmUpLmZhaWwobi5yZWplY3QpLnByb2dyZXNzKG4ubm90aWZ5KX1lbHNle25bbFswXSsiV2l0aCJdKHRoaXM9PT1wP24ucHJvbWlzZSgpOnRoaXMsbT9bcl06YXJndW1lbnRzKX19KX0pO2o9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihqKXtyZXR1cm4gaiE9bnVsbD9RLmV4dGVuZChqLHApOnB9fSxiPXt9O3AucGlwZT1wLnRoZW47US5lYWNoKHQsZnVuY3Rpb24oaSxqKXt2YXIgbD1qWzJdLG09alszXTtwW2pbMV1dPWwuYWRkO2lmKG0pe2wuYWRkKGZ1bmN0aW9uKCl7cz1tfSx0W2leMV1bMl0uZGlzYWJsZSx0WzJdWzJdLmxvY2spfWJbalswXV09ZnVuY3Rpb24oKXtiW2pbMF0rIldpdGgiXSh0aGlzPT09Yj9wOnRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpc307YltqWzBdKyJXaXRoIl09bC5maXJlV2l0aH0pO3AucHJvbWlzZShiKTtpZihhKXthLmNhbGwoYixiKX1yZXR1cm4gYn0sd2hlbjpmdW5jdGlvbihzKXt2YXIgaT0wLHI9Zi5jYWxsKGFyZ3VtZW50cyksbD1yLmxlbmd0aCxhPWwhPT0xfHwocyYmUS5pc0Z1bmN0aW9uKHMucHJvbWlzZSkpP2w6MCxiPWE9PT0xP3M6US5EZWZlcnJlZCgpLGo9ZnVuY3Rpb24oaSx0LHYpe3JldHVybiBmdW5jdGlvbihfKXt0W2ldPXRoaXM7dltpXT1hcmd1bWVudHMubGVuZ3RoPjE/Zi5jYWxsKGFyZ3VtZW50cyk6XztpZih2PT09cCl7Yi5ub3RpZnlXaXRoKHQsdil9ZWxzZSBpZighKC0tYSkpe2IucmVzb2x2ZVdpdGgodCx2KX19fSxwLG0sbjtpZihsPjEpe3A9bmV3IEFycmF5KGwpO209bmV3IEFycmF5KGwpO249bmV3IEFycmF5KGwpO2Zvcig7aTxsO2krKyl7aWYocltpXSYmUS5pc0Z1bmN0aW9uKHJbaV0ucHJvbWlzZSkpe3JbaV0ucHJvbWlzZSgpLmRvbmUoaihpLG4scikpLmZhaWwoYi5yZWplY3QpLnByb2dyZXNzKGooaSxtLHApKX1lbHNley0tYX19fWlmKCFhKXtiLnJlc29sdmVXaXRoKG4scil9cmV0dXJuIGIucHJvbWlzZSgpfX0pO3ZhciBVO1EuZm4ucmVhZHk9ZnVuY3Rpb24oYSl7US5yZWFkeS5wcm9taXNlKCkuZG9uZShhKTtyZXR1cm4gdGhpc307US5leHRlbmQoe2lzUmVhZHk6ZmFsc2UscmVhZHlXYWl0OjEsaG9sZFJlYWR5OmZ1bmN0aW9uKGEpe2lmKGEpe1EucmVhZHlXYWl0Kyt9ZWxzZXtRLnJlYWR5KHRydWUpfX0scmVhZHk6ZnVuY3Rpb24oYSl7aWYoYT09PXRydWU/LS1RLnJlYWR5V2FpdDpRLmlzUmVhZHkpe3JldHVybn1pZighSi5ib2R5KXtyZXR1cm4gc2V0VGltZW91dChRLnJlYWR5KX1RLmlzUmVhZHk9dHJ1ZTtpZihhIT09dHJ1ZSYmLS1RLnJlYWR5V2FpdD4wKXtyZXR1cm59VS5yZXNvbHZlV2l0aChKLFtRXSk7aWYoUS5mbi50cmlnZ2VySGFuZGxlcil7UShKKS50cmlnZ2VySGFuZGxlcigicmVhZHkiKTtRKEopLm9mZigicmVhZHkiKX19fSk7ZnVuY3Rpb24gVigpe2lmKEouYWRkRXZlbnRMaXN0ZW5lcil7Si5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixXLGZhbHNlKTt3LnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLFcsZmFsc2UpfWVsc2V7Si5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixXKTt3LmRldGFjaEV2ZW50KCJvbmxvYWQiLFcpfX1mdW5jdGlvbiBXKCl7aWYoSi5hZGRFdmVudExpc3RlbmVyfHxldmVudC50eXBlPT09ImxvYWQifHxKLnJlYWR5U3RhdGU9PT0iY29tcGxldGUiKXtWKCk7US5yZWFkeSgpfX1RLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYSl7aWYoIVUpe1U9US5EZWZlcnJlZCgpO2lmKEoucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpe3NldFRpbWVvdXQoUS5yZWFkeSl9ZWxzZSBpZihKLmFkZEV2ZW50TGlzdGVuZXIpe0ouYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsVyxmYWxzZSk7dy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixXLGZhbHNlKX1lbHNle0ouYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsVyk7dy5hdHRhY2hFdmVudCgib25sb2FkIixXKTt2YXIgdD1mYWxzZTt0cnl7dD13LmZyYW1lRWxlbWVudD09bnVsbCYmSi5kb2N1bWVudEVsZW1lbnR9Y2F0Y2goZSl7fWlmKHQmJnQuZG9TY3JvbGwpeyhmdW5jdGlvbiBkb1Njcm9sbENoZWNrKCl7aWYoIVEuaXNSZWFkeSl7dHJ5e3QuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChlKXtyZXR1cm4gc2V0VGltZW91dChkb1Njcm9sbENoZWNrLDUwKX1WKCk7US5yZWFkeSgpfX0pKCl9fX1yZXR1cm4gVS5wcm9taXNlKGEpfTt2YXIgWD10eXBlb2YgdW5kZWZpbmVkO3ZhciBpO2ZvcihpIGluIFEoeCkpe2JyZWFrfXgub3duTGFzdD1pIT09IjAiO3guaW5saW5lQmxvY2tOZWVkc0xheW91dD1mYWxzZTtRKGZ1bmN0aW9uKCl7dmFyIHYsYSxiLGo7Yj1KLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF07aWYoIWJ8fCFiLnN0eWxlKXtyZXR1cm59YT1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2o9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTtqLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4IjtiLmFwcGVuZENoaWxkKGopLmFwcGVuZENoaWxkKGEpO2lmKHR5cGVvZiBhLnN0eWxlLnpvb20hPT1YKXthLnN0eWxlLmNzc1RleHQ9ImRpc3BsYXk6aW5saW5lO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiO3guaW5saW5lQmxvY2tOZWVkc0xheW91dD12PWEub2Zmc2V0V2lkdGg9PT0zO2lmKHYpe2Iuc3R5bGUuem9vbT0xfX1iLnJlbW92ZUNoaWxkKGopfSk7KGZ1bmN0aW9uKCl7dmFyIGE9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZih4LmRlbGV0ZUV4cGFuZG89PW51bGwpe3guZGVsZXRlRXhwYW5kbz10cnVlO3RyeXtkZWxldGUgYS50ZXN0fWNhdGNoKGUpe3guZGVsZXRlRXhwYW5kbz1mYWxzZX19YT1udWxsfSkoKTtRLmFjY2VwdERhdGE9ZnVuY3Rpb24oYSl7dmFyIG49US5ub0RhdGFbKGEubm9kZU5hbWUrIiAiKS50b0xvd2VyQ2FzZSgpXSxiPSthLm5vZGVUeXBlfHwxO3JldHVybiBiIT09MSYmYiE9PTk/ZmFsc2U6IW58fG4hPT10cnVlJiZhLmdldEF0dHJpYnV0ZSgiY2xhc3NpZCIpPT09bn07dmFyIFk9L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxaPS8oW0EtWl0pL2c7ZnVuY3Rpb24gJChhLGIsail7aWYoaj09PXVuZGVmaW5lZCYmYS5ub2RlVHlwZT09PTEpe3ZhciBuPSJkYXRhLSIrYi5yZXBsYWNlKFosIi0kMSIpLnRvTG93ZXJDYXNlKCk7aj1hLmdldEF0dHJpYnV0ZShuKTtpZih0eXBlb2Ygaj09PSJzdHJpbmciKXt0cnl7aj1qPT09InRydWUiP3RydWU6aj09PSJmYWxzZSI/ZmFsc2U6aj09PSJudWxsIj9udWxsOitqKyIiPT09aj8rajpZLnRlc3Qoaik/US5wYXJzZUpTT04oaik6an1jYXRjaChlKXt9US5kYXRhKGEsYixqKX1lbHNle2o9dW5kZWZpbmVkfX1yZXR1cm4gan1mdW5jdGlvbiBhMShhKXt2YXIgbjtmb3IobiBpbiBhKXtpZihuPT09ImRhdGEiJiZRLmlzRW1wdHlPYmplY3QoYVtuXSkpe2NvbnRpbnVlfWlmKG4hPT0idG9KU09OIil7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX1mdW5jdGlvbiBiMShhLG4sYixwKXtpZighUS5hY2NlcHREYXRhKGEpKXtyZXR1cm59dmFyIHIsdCxqPVEuZXhwYW5kbyxsPWEubm9kZVR5cGUsbT1sP1EuY2FjaGU6YSxzPWw/YVtqXTphW2pdJiZqO2lmKCghc3x8IW1bc118fCghcCYmIW1bc10uZGF0YSkpJiZiPT09dW5kZWZpbmVkJiZ0eXBlb2Ygbj09PSJzdHJpbmciKXtyZXR1cm59aWYoIXMpe2lmKGwpe3M9YVtqXT1kLnBvcCgpfHxRLmd1aWQrK31lbHNle3M9an19aWYoIW1bc10pe21bc109bD97fTp7dG9KU09OOlEubm9vcH19aWYodHlwZW9mIG49PT0ib2JqZWN0Inx8dHlwZW9mIG49PT0iZnVuY3Rpb24iKXtpZihwKXttW3NdPVEuZXh0ZW5kKG1bc10sbil9ZWxzZXttW3NdLmRhdGE9US5leHRlbmQobVtzXS5kYXRhLG4pfX10PW1bc107aWYoIXApe2lmKCF0LmRhdGEpe3QuZGF0YT17fX10PXQuZGF0YX1pZihiIT09dW5kZWZpbmVkKXt0W1EuY2FtZWxDYXNlKG4pXT1ifWlmKHR5cGVvZiBuPT09InN0cmluZyIpe3I9dFtuXTtpZihyPT1udWxsKXtyPXRbUS5jYW1lbENhc2UobildfX1lbHNle3I9dH1yZXR1cm4gcn1mdW5jdGlvbiBjMShhLG4scCl7aWYoIVEuYWNjZXB0RGF0YShhKSl7cmV0dXJufXZhciB0LGksYj1hLm5vZGVUeXBlLGo9Yj9RLmNhY2hlOmEsbD1iP2FbUS5leHBhbmRvXTpRLmV4cGFuZG87aWYoIWpbbF0pe3JldHVybn1pZihuKXt0PXA/altsXTpqW2xdLmRhdGE7aWYodCl7aWYoIVEuaXNBcnJheShuKSl7aWYobiBpbiB0KXtuPVtuXX1lbHNle249US5jYW1lbENhc2Uobik7aWYobiBpbiB0KXtuPVtuXX1lbHNle249bi5zcGxpdCgiICIpfX19ZWxzZXtuPW4uY29uY2F0KFEubWFwKG4sUS5jYW1lbENhc2UpKX1pPW4ubGVuZ3RoO3doaWxlKGktLSl7ZGVsZXRlIHRbbltpXV19aWYocD8hYTEodCk6IVEuaXNFbXB0eU9iamVjdCh0KSl7cmV0dXJufX19aWYoIXApe2RlbGV0ZSBqW2xdLmRhdGE7aWYoIWExKGpbbF0pKXtyZXR1cm59fWlmKGIpe1EuY2xlYW5EYXRhKFthXSx0cnVlKX1lbHNlIGlmKHguZGVsZXRlRXhwYW5kb3x8aiE9ai53aW5kb3cpe2RlbGV0ZSBqW2xdfWVsc2V7altsXT1udWxsfX1RLmV4dGVuZCh7Y2FjaGU6e30sbm9EYXRhOnsiYXBwbGV0ICI6dHJ1ZSwiZW1iZWQgIjp0cnVlLCJvYmplY3QgIjoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIn0saGFzRGF0YTpmdW5jdGlvbihhKXthPWEubm9kZVR5cGU/US5jYWNoZVthW1EuZXhwYW5kb11dOmFbUS5leHBhbmRvXTtyZXR1cm4hIWEmJiFhMShhKX0sZGF0YTpmdW5jdGlvbihhLG4sYil7cmV0dXJuIGIxKGEsbixiKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLG4pe3JldHVybiBjMShhLG4pfSxfZGF0YTpmdW5jdGlvbihhLG4sYil7cmV0dXJuIGIxKGEsbixiLHRydWUpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLG4pe3JldHVybiBjMShhLG4sdHJ1ZSl9fSk7US5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSx2KXt2YXIgaSxuLGIsaj10aGlzWzBdLGw9aiYmai5hdHRyaWJ1dGVzO2lmKGE9PT11bmRlZmluZWQpe2lmKHRoaXMubGVuZ3RoKXtiPVEuZGF0YShqKTtpZihqLm5vZGVUeXBlPT09MSYmIVEuX2RhdGEoaiwicGFyc2VkQXR0cnMiKSl7aT1sLmxlbmd0aDt3aGlsZShpLS0pe2lmKGxbaV0pe249bFtpXS5uYW1lO2lmKG4uaW5kZXhPZigiZGF0YS0iKT09PTApe249US5jYW1lbENhc2Uobi5zbGljZSg1KSk7JChqLG4sYltuXSl9fX1RLl9kYXRhKGosInBhcnNlZEF0dHJzIix0cnVlKX19cmV0dXJuIGJ9aWYodHlwZW9mIGE9PT0ib2JqZWN0Iil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1EuZGF0YSh0aGlzLGEpfSl9cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MT90aGlzLmVhY2goZnVuY3Rpb24oKXtRLmRhdGEodGhpcyxhLHYpfSk6aj8kKGosYSxRLmRhdGEoaixhKSk6dW5kZWZpbmVkfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtRLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pO1EuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLHQsYil7dmFyIGo7aWYoYSl7dD0odHx8ImZ4IikrInF1ZXVlIjtqPVEuX2RhdGEoYSx0KTtpZihiKXtpZighanx8US5pc0FycmF5KGIpKXtqPVEuX2RhdGEoYSx0LFEubWFrZUFycmF5KGIpKX1lbHNle2oucHVzaChiKX19cmV0dXJuIGp8fFtdfX0sZGVxdWV1ZTpmdW5jdGlvbihhLHQpe3Q9dHx8ImZ4Ijt2YXIgYj1RLnF1ZXVlKGEsdCkscz1iLmxlbmd0aCxqPWIuc2hpZnQoKSxsPVEuX3F1ZXVlSG9va3MoYSx0KSxuPWZ1bmN0aW9uKCl7US5kZXF1ZXVlKGEsdCl9O2lmKGo9PT0iaW5wcm9ncmVzcyIpe2o9Yi5zaGlmdCgpO3MtLX1pZihqKXtpZih0PT09ImZ4Iil7Yi51bnNoaWZ0KCJpbnByb2dyZXNzIil9ZGVsZXRlIGwuc3RvcDtqLmNhbGwoYSxuLGwpfWlmKCFzJiZsKXtsLmVtcHR5LmZpcmUoKX19LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGEsdCl7dmFyIGI9dCsicXVldWVIb29rcyI7cmV0dXJuIFEuX2RhdGEoYSxiKXx8US5fZGF0YShhLGIse2VtcHR5OlEuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe1EuX3JlbW92ZURhdGEoYSx0KyJxdWV1ZSIpO1EuX3JlbW92ZURhdGEoYSxiKX0pfSl9fSk7US5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKHQsYSl7dmFyIHM9MjtpZih0eXBlb2YgdCE9PSJzdHJpbmciKXthPXQ7dD0iZngiO3MtLX1pZihhcmd1bWVudHMubGVuZ3RoPHMpe3JldHVybiBRLnF1ZXVlKHRoaXNbMF0sdCl9cmV0dXJuIGE9PT11bmRlZmluZWQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1RLnF1ZXVlKHRoaXMsdCxhKTtRLl9xdWV1ZUhvb2tzKHRoaXMsdCk7aWYodD09PSJmeCImJmJbMF0hPT0iaW5wcm9ncmVzcyIpe1EuZGVxdWV1ZSh0aGlzLHQpfX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtRLmRlcXVldWUodGhpcyx0KX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnF1ZXVlKHR8fCJmeCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKHQsYSl7dmFyIGIsaj0xLGw9US5EZWZlcnJlZCgpLG09dGhpcyxpPXRoaXMubGVuZ3RoLHI9ZnVuY3Rpb24oKXtpZighKC0taikpe2wucmVzb2x2ZVdpdGgobSxbbV0pfX07aWYodHlwZW9mIHQhPT0ic3RyaW5nIil7YT10O3Q9dW5kZWZpbmVkfXQ9dHx8ImZ4Ijt3aGlsZShpLS0pe2I9US5fZGF0YShtW2ldLHQrInF1ZXVlSG9va3MiKTtpZihiJiZiLmVtcHR5KXtqKys7Yi5lbXB0eS5hZGQocil9fXIoKTtyZXR1cm4gbC5wcm9taXNlKGEpfX0pO3ZhciBkMT0oL1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLykuc291cmNlO3ZhciBlMT1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdO3ZhciBmMT1mdW5jdGlvbihhLGIpe2E9Ynx8YTtyZXR1cm4gUS5jc3MoYSwiZGlzcGxheSIpPT09Im5vbmUifHwhUS5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl9O3ZhciBnMT1RLmFjY2Vzcz1mdW5jdGlvbihhLGIsaix2LGwsbSxyKXt2YXIgaT0wLG49YS5sZW5ndGgscD1qPT1udWxsO2lmKFEudHlwZShqKT09PSJvYmplY3QiKXtsPXRydWU7Zm9yKGkgaW4gail7US5hY2Nlc3MoYSxiLGksaltpXSx0cnVlLG0scil9fWVsc2UgaWYodiE9PXVuZGVmaW5lZCl7bD10cnVlO2lmKCFRLmlzRnVuY3Rpb24odikpe3I9dHJ1ZX1pZihwKXtpZihyKXtiLmNhbGwoYSx2KTtiPW51bGx9ZWxzZXtwPWI7Yj1mdW5jdGlvbihzLGosdil7cmV0dXJuIHAuY2FsbChRKHMpLHYpfX19aWYoYil7Zm9yKDtpPG47aSsrKXtiKGFbaV0saixyP3Y6di5jYWxsKGFbaV0saSxiKGFbaV0saikpKX19fXJldHVybiBsP2E6cD9iLmNhbGwoYSk6bj9iKGFbMF0saik6bX07dmFyIGgxPSgvXig/OmNoZWNrYm94fHJhZGlvKSQvaSk7KGZ1bmN0aW9uKCl7dmFyIGE9Si5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLGI9Si5jcmVhdGVFbGVtZW50KCJkaXYiKSxqPUouY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2IuaW5uZXJIVE1MPSIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iO3gubGVhZGluZ1doaXRlc3BhY2U9Yi5maXJzdENoaWxkLm5vZGVUeXBlPT09Mzt4LnRib2R5PSFiLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpLmxlbmd0aDt4Lmh0bWxTZXJpYWxpemU9ISFiLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJsaW5rIikubGVuZ3RoO3guaHRtbDVDbG9uZT1KLmNyZWF0ZUVsZW1lbnQoIm5hdiIpLmNsb25lTm9kZSh0cnVlKS5vdXRlckhUTUwhPT0iPDpuYXY+PC86bmF2PiI7YS50eXBlPSJjaGVja2JveCI7YS5jaGVja2VkPXRydWU7ai5hcHBlbmRDaGlsZChhKTt4LmFwcGVuZENoZWNrZWQ9YS5jaGVja2VkO2IuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+Ijt4Lm5vQ2xvbmVDaGVja2VkPSEhYi5jbG9uZU5vZGUodHJ1ZSkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTtqLmFwcGVuZENoaWxkKGIpO2IuaW5uZXJIVE1MPSI8aW5wdXQgdHlwZT0ncmFkaW8nIGNoZWNrZWQ9J2NoZWNrZWQnIG5hbWU9J3QnLz4iO3guY2hlY2tDbG9uZT1iLmNsb25lTm9kZSh0cnVlKS5jbG9uZU5vZGUodHJ1ZSkubGFzdENoaWxkLmNoZWNrZWQ7eC5ub0Nsb25lRXZlbnQ9dHJ1ZTtpZihiLmF0dGFjaEV2ZW50KXtiLmF0dGFjaEV2ZW50KCJvbmNsaWNrIixmdW5jdGlvbigpe3gubm9DbG9uZUV2ZW50PWZhbHNlfSk7Yi5jbG9uZU5vZGUodHJ1ZSkuY2xpY2soKX1pZih4LmRlbGV0ZUV4cGFuZG89PW51bGwpe3guZGVsZXRlRXhwYW5kbz10cnVlO3RyeXtkZWxldGUgYi50ZXN0fWNhdGNoKGUpe3guZGVsZXRlRXhwYW5kbz1mYWxzZX19fSkoKTsoZnVuY3Rpb24oKXt2YXIgaSxhLGI9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTtmb3IoaSBpbntzdWJtaXQ6dHJ1ZSxjaGFuZ2U6dHJ1ZSxmb2N1c2luOnRydWV9KXthPSJvbiIraTtpZighKHhbaSsiQnViYmxlcyJdPWEgaW4gdykpe2Iuc2V0QXR0cmlidXRlKGEsInQiKTt4W2krIkJ1YmJsZXMiXT1iLmF0dHJpYnV0ZXNbYV0uZXhwYW5kbz09PWZhbHNlfX1iPW51bGx9KSgpO3ZhciBpMT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksajE9L15rZXkvLGsxPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLGwxPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxtMT0vXihbXi5dKikoPzpcLiguKyl8KSQvO2Z1bmN0aW9uIG4xKCl7cmV0dXJuIHRydWV9ZnVuY3Rpb24gbzEoKXtyZXR1cm4gZmFsc2V9ZnVuY3Rpb24gcDEoKXt0cnl7cmV0dXJuIEouYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fVEuZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oYSxiLGosbCxzKXt2YXIgbSxuLHQscCxyLHYsXyxyMyxzMyx0Myx1Myx2Mz1RLl9kYXRhKGEpO2lmKCF2Myl7cmV0dXJufWlmKGouaGFuZGxlcil7cD1qO2o9cC5oYW5kbGVyO3M9cC5zZWxlY3Rvcn1pZighai5ndWlkKXtqLmd1aWQ9US5ndWlkKyt9aWYoIShuPXYzLmV2ZW50cykpe249djMuZXZlbnRzPXt9fWlmKCEodj12My5oYW5kbGUpKXt2PXYzLmhhbmRsZT1mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIFEhPT1YJiYoIWV8fFEuZXZlbnQudHJpZ2dlcmVkIT09ZS50eXBlKT9RLmV2ZW50LmRpc3BhdGNoLmFwcGx5KHYuZWxlbSxhcmd1bWVudHMpOnVuZGVmaW5lZH07di5lbGVtPWF9Yj0oYnx8IiIpLm1hdGNoKFApfHxbIiJdO3Q9Yi5sZW5ndGg7d2hpbGUodC0tKXttPW0xLmV4ZWMoYlt0XSl8fFtdO3MzPXUzPW1bMV07dDM9KG1bMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKTtpZighczMpe2NvbnRpbnVlfXI9US5ldmVudC5zcGVjaWFsW3MzXXx8e307czM9KHM/ci5kZWxlZ2F0ZVR5cGU6ci5iaW5kVHlwZSl8fHMzO3I9US5ldmVudC5zcGVjaWFsW3MzXXx8e307Xz1RLmV4dGVuZCh7dHlwZTpzMyxvcmlnVHlwZTp1MyxkYXRhOmwsaGFuZGxlcjpqLGd1aWQ6ai5ndWlkLHNlbGVjdG9yOnMsbmVlZHNDb250ZXh0OnMmJlEuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChzKSxuYW1lc3BhY2U6dDMuam9pbigiLiIpfSxwKTtpZighKHIzPW5bczNdKSl7cjM9bltzM109W107cjMuZGVsZWdhdGVDb3VudD0wO2lmKCFyLnNldHVwfHxyLnNldHVwLmNhbGwoYSxsLHQzLHYpPT09ZmFsc2Upe2lmKGEuYWRkRXZlbnRMaXN0ZW5lcil7YS5hZGRFdmVudExpc3RlbmVyKHMzLHYsZmFsc2UpfWVsc2UgaWYoYS5hdHRhY2hFdmVudCl7YS5hdHRhY2hFdmVudCgib24iK3MzLHYpfX19aWYoci5hZGQpe3IuYWRkLmNhbGwoYSxfKTtpZighXy5oYW5kbGVyLmd1aWQpe18uaGFuZGxlci5ndWlkPWouZ3VpZH19aWYocyl7cjMuc3BsaWNlKHIzLmRlbGVnYXRlQ291bnQrKywwLF8pfWVsc2V7cjMucHVzaChfKX1RLmV2ZW50Lmdsb2JhbFtzM109dHJ1ZX1hPW51bGx9LHJlbW92ZTpmdW5jdGlvbihhLGIsbCxzLG0pe3ZhciBqLG4scCxyLHQsdixfLHIzLHMzLHQzLHUzLHYzPVEuaGFzRGF0YShhKSYmUS5fZGF0YShhKTtpZighdjN8fCEodj12My5ldmVudHMpKXtyZXR1cm59Yj0oYnx8IiIpLm1hdGNoKFApfHxbIiJdO3Q9Yi5sZW5ndGg7d2hpbGUodC0tKXtwPW0xLmV4ZWMoYlt0XSl8fFtdO3MzPXUzPXBbMV07dDM9KHBbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKTtpZighczMpe2ZvcihzMyBpbiB2KXtRLmV2ZW50LnJlbW92ZShhLHMzK2JbdF0sbCxzLHRydWUpfWNvbnRpbnVlfV89US5ldmVudC5zcGVjaWFsW3MzXXx8e307czM9KHM/Xy5kZWxlZ2F0ZVR5cGU6Xy5iaW5kVHlwZSl8fHMzO3IzPXZbczNdfHxbXTtwPXBbMl0mJm5ldyBSZWdFeHAoIihefFxcLikiK3QzLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpO3I9aj1yMy5sZW5ndGg7d2hpbGUoai0tKXtuPXIzW2pdO2lmKChtfHx1Mz09PW4ub3JpZ1R5cGUpJiYoIWx8fGwuZ3VpZD09PW4uZ3VpZCkmJighcHx8cC50ZXN0KG4ubmFtZXNwYWNlKSkmJighc3x8cz09PW4uc2VsZWN0b3J8fHM9PT0iKioiJiZuLnNlbGVjdG9yKSl7cjMuc3BsaWNlKGosMSk7aWYobi5zZWxlY3Rvcil7cjMuZGVsZWdhdGVDb3VudC0tfWlmKF8ucmVtb3ZlKXtfLnJlbW92ZS5jYWxsKGEsbil9fX1pZihyJiYhcjMubGVuZ3RoKXtpZighXy50ZWFyZG93bnx8Xy50ZWFyZG93bi5jYWxsKGEsdDMsdjMuaGFuZGxlKT09PWZhbHNlKXtRLnJlbW92ZUV2ZW50KGEsczMsdjMuaGFuZGxlKX1kZWxldGUgdltzM119fWlmKFEuaXNFbXB0eU9iamVjdCh2KSl7ZGVsZXRlIHYzLmhhbmRsZTtRLl9yZW1vdmVEYXRhKGEsImV2ZW50cyIpfX0sdHJpZ2dlcjpmdW5jdGlvbihhLGIsaixsKXt2YXIgbSxuLHAscixzLHQsaSx2PVtqfHxKXSxfPXUuY2FsbChhLCJ0eXBlIik/YS50eXBlOmEscjM9dS5jYWxsKGEsIm5hbWVzcGFjZSIpP2EubmFtZXNwYWNlLnNwbGl0KCIuIik6W107cD10PWo9anx8SjtpZihqLm5vZGVUeXBlPT09M3x8ai5ub2RlVHlwZT09PTgpe3JldHVybn1pZihsMS50ZXN0KF8rUS5ldmVudC50cmlnZ2VyZWQpKXtyZXR1cm59aWYoXy5pbmRleE9mKCIuIik+PTApe3IzPV8uc3BsaXQoIi4iKTtfPXIzLnNoaWZ0KCk7cjMuc29ydCgpfW49Xy5pbmRleE9mKCI6Iik8MCYmIm9uIitfO2E9YVtRLmV4cGFuZG9dP2E6bmV3IFEuRXZlbnQoXyx0eXBlb2YgYT09PSJvYmplY3QiJiZhKTthLmlzVHJpZ2dlcj1sPzI6MzthLm5hbWVzcGFjZT1yMy5qb2luKCIuIik7YS5uYW1lc3BhY2VfcmU9YS5uYW1lc3BhY2U/bmV3IFJlZ0V4cCgiKF58XFwuKSIrcjMuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbDthLnJlc3VsdD11bmRlZmluZWQ7aWYoIWEudGFyZ2V0KXthLnRhcmdldD1qfWI9Yj09bnVsbD9bYV06US5tYWtlQXJyYXkoYixbYV0pO3M9US5ldmVudC5zcGVjaWFsW19dfHx7fTtpZighbCYmcy50cmlnZ2VyJiZzLnRyaWdnZXIuYXBwbHkoaixiKT09PWZhbHNlKXtyZXR1cm59aWYoIWwmJiFzLm5vQnViYmxlJiYhUS5pc1dpbmRvdyhqKSl7cj1zLmRlbGVnYXRlVHlwZXx8XztpZighbDEudGVzdChyK18pKXtwPXAucGFyZW50Tm9kZX1mb3IoO3A7cD1wLnBhcmVudE5vZGUpe3YucHVzaChwKTt0PXB9aWYodD09PShqLm93bmVyRG9jdW1lbnR8fEopKXt2LnB1c2godC5kZWZhdWx0Vmlld3x8dC5wYXJlbnRXaW5kb3d8fHcpfX1pPTA7d2hpbGUoKHA9dltpKytdKSYmIWEuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7YS50eXBlPWk+MT9yOnMuYmluZFR5cGV8fF87bT0oUS5fZGF0YShwLCJldmVudHMiKXx8e30pW2EudHlwZV0mJlEuX2RhdGEocCwiaGFuZGxlIik7aWYobSl7bS5hcHBseShwLGIpfW09biYmcFtuXTtpZihtJiZtLmFwcGx5JiZRLmFjY2VwdERhdGEocCkpe2EucmVzdWx0PW0uYXBwbHkocCxiKTtpZihhLnJlc3VsdD09PWZhbHNlKXthLnByZXZlbnREZWZhdWx0KCl9fX1hLnR5cGU9XztpZighbCYmIWEuaXNEZWZhdWx0UHJldmVudGVkKCkpe2lmKCghcy5fZGVmYXVsdHx8cy5fZGVmYXVsdC5hcHBseSh2LnBvcCgpLGIpPT09ZmFsc2UpJiZRLmFjY2VwdERhdGEoaikpe2lmKG4mJmpbX10mJiFRLmlzV2luZG93KGopKXt0PWpbbl07aWYodCl7altuXT1udWxsfVEuZXZlbnQudHJpZ2dlcmVkPV87dHJ5e2pbX10oKX1jYXRjaChlKXt9US5ldmVudC50cmlnZ2VyZWQ9dW5kZWZpbmVkO2lmKHQpe2pbbl09dH19fX1yZXR1cm4gYS5yZXN1bHR9LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe2E9US5ldmVudC5maXgoYSk7dmFyIGkscixiLG0saixsPVtdLG49Zi5jYWxsKGFyZ3VtZW50cykscD0oUS5fZGF0YSh0aGlzLCJldmVudHMiKXx8e30pW2EudHlwZV18fFtdLHM9US5ldmVudC5zcGVjaWFsW2EudHlwZV18fHt9O25bMF09YTthLmRlbGVnYXRlVGFyZ2V0PXRoaXM7aWYocy5wcmVEaXNwYXRjaCYmcy5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSk9PT1mYWxzZSl7cmV0dXJufWw9US5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYSxwKTtpPTA7d2hpbGUoKG09bFtpKytdKSYmIWEuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7YS5jdXJyZW50VGFyZ2V0PW0uZWxlbTtqPTA7d2hpbGUoKGI9bS5oYW5kbGVyc1tqKytdKSYmIWEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSl7aWYoIWEubmFtZXNwYWNlX3JlfHxhLm5hbWVzcGFjZV9yZS50ZXN0KGIubmFtZXNwYWNlKSl7YS5oYW5kbGVPYmo9YjthLmRhdGE9Yi5kYXRhO3I9KChRLmV2ZW50LnNwZWNpYWxbYi5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGIuaGFuZGxlcikuYXBwbHkobS5lbGVtLG4pO2lmKHIhPT11bmRlZmluZWQpe2lmKChhLnJlc3VsdD1yKT09PWZhbHNlKXthLnByZXZlbnREZWZhdWx0KCk7YS5zdG9wUHJvcGFnYXRpb24oKX19fX19aWYocy5wb3N0RGlzcGF0Y2gpe3MucG9zdERpc3BhdGNoLmNhbGwodGhpcyxhKX1yZXR1cm4gYS5yZXN1bHR9LGhhbmRsZXJzOmZ1bmN0aW9uKGEsYil7dmFyIHMsaixtLGksbD1bXSxuPWIuZGVsZWdhdGVDb3VudCxwPWEudGFyZ2V0O2lmKG4mJnAubm9kZVR5cGUmJighYS5idXR0b258fGEudHlwZSE9PSJjbGljayIpKXtmb3IoO3AhPXRoaXM7cD1wLnBhcmVudE5vZGV8fHRoaXMpe2lmKHAubm9kZVR5cGU9PT0xJiYocC5kaXNhYmxlZCE9PXRydWV8fGEudHlwZSE9PSJjbGljayIpKXttPVtdO2ZvcihpPTA7aTxuO2krKyl7aj1iW2ldO3M9ai5zZWxlY3RvcisiICI7aWYobVtzXT09PXVuZGVmaW5lZCl7bVtzXT1qLm5lZWRzQ29udGV4dD9RKHMsdGhpcykuaW5kZXgocCk+PTA6US5maW5kKHMsdGhpcyxudWxsLFtwXSkubGVuZ3RofWlmKG1bc10pe20ucHVzaChqKX19aWYobS5sZW5ndGgpe2wucHVzaCh7ZWxlbTpwLGhhbmRsZXJzOm19KX19fX1pZihuPGIubGVuZ3RoKXtsLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczpiLnNsaWNlKG4pfSl9cmV0dXJuIGx9LGZpeDpmdW5jdGlvbihhKXtpZihhW1EuZXhwYW5kb10pe3JldHVybiBhfXZhciBpLHAsYix0PWEudHlwZSxqPWEsbD10aGlzLmZpeEhvb2tzW3RdO2lmKCFsKXt0aGlzLmZpeEhvb2tzW3RdPWw9azEudGVzdCh0KT90aGlzLm1vdXNlSG9va3M6ajEudGVzdCh0KT90aGlzLmtleUhvb2tzOnt9fWI9bC5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChsLnByb3BzKTp0aGlzLnByb3BzO2E9bmV3IFEuRXZlbnQoaik7aT1iLmxlbmd0aDt3aGlsZShpLS0pe3A9YltpXTthW3BdPWpbcF19aWYoIWEudGFyZ2V0KXthLnRhcmdldD1qLnNyY0VsZW1lbnR8fEp9aWYoYS50YXJnZXQubm9kZVR5cGU9PT0zKXthLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlfWEubWV0YUtleT0hIWEubWV0YUtleTtyZXR1cm4gbC5maWx0ZXI/bC5maWx0ZXIoYSxqKTphfSxwcm9wczoiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtpZihhLndoaWNoPT1udWxsKXthLndoaWNoPWIuY2hhckNvZGUhPW51bGw/Yi5jaGFyQ29kZTpiLmtleUNvZGV9cmV0dXJuIGF9fSxtb3VzZUhvb2tzOntwcm9wczoiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIGZyb21FbGVtZW50IG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50Ii5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3ZhciBqLGwsbSxuPWIuYnV0dG9uLHA9Yi5mcm9tRWxlbWVudDtpZihhLnBhZ2VYPT1udWxsJiZiLmNsaWVudFghPW51bGwpe2w9YS50YXJnZXQub3duZXJEb2N1bWVudHx8SjttPWwuZG9jdW1lbnRFbGVtZW50O2o9bC5ib2R5O2EucGFnZVg9Yi5jbGllbnRYKyhtJiZtLnNjcm9sbExlZnR8fGomJmouc2Nyb2xsTGVmdHx8MCktKG0mJm0uY2xpZW50TGVmdHx8aiYmai5jbGllbnRMZWZ0fHwwKTthLnBhZ2VZPWIuY2xpZW50WSsobSYmbS5zY3JvbGxUb3B8fGomJmouc2Nyb2xsVG9wfHwwKS0obSYmbS5jbGllbnRUb3B8fGomJmouY2xpZW50VG9wfHwwKX1pZighYS5yZWxhdGVkVGFyZ2V0JiZwKXthLnJlbGF0ZWRUYXJnZXQ9cD09PWEudGFyZ2V0P2IudG9FbGVtZW50OnB9aWYoIWEud2hpY2gmJm4hPT11bmRlZmluZWQpe2Eud2hpY2g9KG4mMT8xOihuJjI/MzoobiY0PzI6MCkpKX1yZXR1cm4gYX19LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOnRydWV9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcyE9PXAxKCkmJnRoaXMuZm9jdXMpe3RyeXt0aGlzLmZvY3VzKCk7cmV0dXJuIGZhbHNlfWNhdGNoKGUpe319fSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcz09PXAxKCkmJnRoaXMuYmx1cil7dGhpcy5ibHVyKCk7cmV0dXJuIGZhbHNlfX0sZGVsZWdhdGVUeXBlOiJmb2N1c291dCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYoUS5ub2RlTmFtZSh0aGlzLCJpbnB1dCIpJiZ0aGlzLnR5cGU9PT0iY2hlY2tib3giJiZ0aGlzLmNsaWNrKXt0aGlzLmNsaWNrKCk7cmV0dXJuIGZhbHNlfX0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFEubm9kZU5hbWUoYS50YXJnZXQsImEiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe2lmKGEucmVzdWx0IT09dW5kZWZpbmVkJiZhLm9yaWdpbmFsRXZlbnQpe2Eub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdH19fX0sc2ltdWxhdGU6ZnVuY3Rpb24odCxhLGIsail7dmFyIGU9US5leHRlbmQobmV3IFEuRXZlbnQoKSxiLHt0eXBlOnQsaXNTaW11bGF0ZWQ6dHJ1ZSxvcmlnaW5hbEV2ZW50Ont9fSk7aWYoail7US5ldmVudC50cmlnZ2VyKGUsbnVsbCxhKX1lbHNle1EuZXZlbnQuZGlzcGF0Y2guY2FsbChhLGUpfWlmKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpe2IucHJldmVudERlZmF1bHQoKX19fTtRLnJlbW92ZUV2ZW50PUoucmVtb3ZlRXZlbnRMaXN0ZW5lcj9mdW5jdGlvbihhLHQsYil7aWYoYS5yZW1vdmVFdmVudExpc3RlbmVyKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxiLGZhbHNlKX19OmZ1bmN0aW9uKGEsdCxiKXt2YXIgbj0ib24iK3Q7aWYoYS5kZXRhY2hFdmVudCl7aWYodHlwZW9mIGFbbl09PT1YKXthW25dPW51bGx9YS5kZXRhY2hFdmVudChuLGIpfX07US5FdmVudD1mdW5jdGlvbihzLHApe2lmKCEodGhpcyBpbnN0YW5jZW9mIFEuRXZlbnQpKXtyZXR1cm4gbmV3IFEuRXZlbnQocyxwKX1pZihzJiZzLnR5cGUpe3RoaXMub3JpZ2luYWxFdmVudD1zO3RoaXMudHlwZT1zLnR5cGU7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9cy5kZWZhdWx0UHJldmVudGVkfHxzLmRlZmF1bHRQcmV2ZW50ZWQ9PT11bmRlZmluZWQmJnMucmV0dXJuVmFsdWU9PT1mYWxzZT9uMTpvMX1lbHNle3RoaXMudHlwZT1zfWlmKHApe1EuZXh0ZW5kKHRoaXMscCl9dGhpcy50aW1lU3RhbXA9cyYmcy50aW1lU3RhbXB8fFEubm93KCk7dGhpc1tRLmV4cGFuZG9dPXRydWV9O1EuRXZlbnQucHJvdG90eXBlPXtpc0RlZmF1bHRQcmV2ZW50ZWQ6bzEsaXNQcm9wYWdhdGlvblN0b3BwZWQ6bzEsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6bzEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9bjE7aWYoIWUpe3JldHVybn1pZihlLnByZXZlbnREZWZhdWx0KXtlLnByZXZlbnREZWZhdWx0KCl9ZWxzZXtlLnJldHVyblZhbHVlPWZhbHNlfX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9bjE7aWYoIWUpe3JldHVybn1pZihlLnN0b3BQcm9wYWdhdGlvbil7ZS5zdG9wUHJvcGFnYXRpb24oKX1lLmNhbmNlbEJ1YmJsZT10cnVlfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1uMTtpZihlJiZlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbil7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX10aGlzLnN0b3BQcm9wYWdhdGlvbigpfX07US5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0Iixwb2ludGVyZW50ZXI6InBvaW50ZXJvdmVyIixwb2ludGVybGVhdmU6InBvaW50ZXJvdXQifSxmdW5jdGlvbihhLGIpe1EuZXZlbnQuc3BlY2lhbFthXT17ZGVsZWdhdGVUeXBlOmIsYmluZFR5cGU6YixoYW5kbGU6ZnVuY3Rpb24oail7dmFyIHIsdD10aGlzLGw9ai5yZWxhdGVkVGFyZ2V0LG09ai5oYW5kbGVPYmo7aWYoIWx8fChsIT09dCYmIVEuY29udGFpbnModCxsKSkpe2oudHlwZT1tLm9yaWdUeXBlO3I9bS5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtqLnR5cGU9Yn1yZXR1cm4gcn19fSk7aWYoIXguc3VibWl0QnViYmxlcyl7US5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtpZihRLm5vZGVOYW1lKHRoaXMsImZvcm0iKSl7cmV0dXJuIGZhbHNlfVEuZXZlbnQuYWRkKHRoaXMsImNsaWNrLl9zdWJtaXQga2V5cHJlc3MuX3N1Ym1pdCIsZnVuY3Rpb24oZSl7dmFyIGE9ZS50YXJnZXQsYj1RLm5vZGVOYW1lKGEsImlucHV0Iil8fFEubm9kZU5hbWUoYSwiYnV0dG9uIik/YS5mb3JtOnVuZGVmaW5lZDtpZihiJiYhUS5fZGF0YShiLCJzdWJtaXRCdWJibGVzIikpe1EuZXZlbnQuYWRkKGIsInN1Ym1pdC5fc3VibWl0IixmdW5jdGlvbihqKXtqLl9zdWJtaXRfYnViYmxlPXRydWV9KTtRLl9kYXRhKGIsInN1Ym1pdEJ1YmJsZXMiLHRydWUpfX0pfSxwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7aWYoYS5fc3VibWl0X2J1YmJsZSl7ZGVsZXRlIGEuX3N1Ym1pdF9idWJibGU7aWYodGhpcy5wYXJlbnROb2RlJiYhYS5pc1RyaWdnZXIpe1EuZXZlbnQuc2ltdWxhdGUoInN1Ym1pdCIsdGhpcy5wYXJlbnROb2RlLGEsdHJ1ZSl9fX0sdGVhcmRvd246ZnVuY3Rpb24oKXtpZihRLm5vZGVOYW1lKHRoaXMsImZvcm0iKSl7cmV0dXJuIGZhbHNlfVEuZXZlbnQucmVtb3ZlKHRoaXMsIi5fc3VibWl0Iil9fX1pZigheC5jaGFuZ2VCdWJibGVzKXtRLmV2ZW50LnNwZWNpYWwuY2hhbmdlPXtzZXR1cDpmdW5jdGlvbigpe2lmKGkxLnRlc3QodGhpcy5ub2RlTmFtZSkpe2lmKHRoaXMudHlwZT09PSJjaGVja2JveCJ8fHRoaXMudHlwZT09PSJyYWRpbyIpe1EuZXZlbnQuYWRkKHRoaXMsInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2UiLGZ1bmN0aW9uKGEpe2lmKGEub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWU9PT0iY2hlY2tlZCIpe3RoaXMuX2p1c3RfY2hhbmdlZD10cnVlfX0pO1EuZXZlbnQuYWRkKHRoaXMsImNsaWNrLl9jaGFuZ2UiLGZ1bmN0aW9uKGEpe2lmKHRoaXMuX2p1c3RfY2hhbmdlZCYmIWEuaXNUcmlnZ2VyKXt0aGlzLl9qdXN0X2NoYW5nZWQ9ZmFsc2V9US5ldmVudC5zaW11bGF0ZSgiY2hhbmdlIix0aGlzLGEsdHJ1ZSl9KX1yZXR1cm4gZmFsc2V9US5ldmVudC5hZGQodGhpcywiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsZnVuY3Rpb24oZSl7dmFyIGE9ZS50YXJnZXQ7aWYoaTEudGVzdChhLm5vZGVOYW1lKSYmIVEuX2RhdGEoYSwiY2hhbmdlQnViYmxlcyIpKXtRLmV2ZW50LmFkZChhLCJjaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oYil7aWYodGhpcy5wYXJlbnROb2RlJiYhYi5pc1NpbXVsYXRlZCYmIWIuaXNUcmlnZ2VyKXtRLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMucGFyZW50Tm9kZSxiLHRydWUpfX0pO1EuX2RhdGEoYSwiY2hhbmdlQnViYmxlcyIsdHJ1ZSl9fSl9LGhhbmRsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldDtpZih0aGlzIT09Ynx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fChiLnR5cGUhPT0icmFkaW8iJiZiLnR5cGUhPT0iY2hlY2tib3giKSl7cmV0dXJuIGEuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sdGVhcmRvd246ZnVuY3Rpb24oKXtRLmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpO3JldHVybiFpMS50ZXN0KHRoaXMubm9kZU5hbWUpfX19aWYoIXguZm9jdXNpbkJ1YmJsZXMpe1EuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24oYSxiKXt2YXIgaj1mdW5jdGlvbihsKXtRLmV2ZW50LnNpbXVsYXRlKGIsbC50YXJnZXQsUS5ldmVudC5maXgobCksdHJ1ZSl9O1EuZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgbD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsbT1RLl9kYXRhKGwsYik7aWYoIW0pe2wuYWRkRXZlbnRMaXN0ZW5lcihhLGosdHJ1ZSl9US5fZGF0YShsLGIsKG18fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBsPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxtPVEuX2RhdGEobCxiKS0xO2lmKCFtKXtsLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxqLHRydWUpO1EuX3JlbW92ZURhdGEobCxiKX1lbHNle1EuX2RhdGEobCxiLG0pfX19fSl9US5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKHQscyxhLGIsail7dmFyIGwsbTtpZih0eXBlb2YgdD09PSJvYmplY3QiKXtpZih0eXBlb2YgcyE9PSJzdHJpbmciKXthPWF8fHM7cz11bmRlZmluZWR9Zm9yKGwgaW4gdCl7dGhpcy5vbihsLHMsYSx0W2xdLGopfXJldHVybiB0aGlzfWlmKGE9PW51bGwmJmI9PW51bGwpe2I9czthPXM9dW5kZWZpbmVkfWVsc2UgaWYoYj09bnVsbCl7aWYodHlwZW9mIHM9PT0ic3RyaW5nIil7Yj1hO2E9dW5kZWZpbmVkfWVsc2V7Yj1hO2E9cztzPXVuZGVmaW5lZH19aWYoYj09PWZhbHNlKXtiPW8xfWVsc2UgaWYoIWIpe3JldHVybiB0aGlzfWlmKGo9PT0xKXttPWI7Yj1mdW5jdGlvbihuKXtRKCkub2ZmKG4pO3JldHVybiBtLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07Yi5ndWlkPW0uZ3VpZHx8KG0uZ3VpZD1RLmd1aWQrKyl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1EuZXZlbnQuYWRkKHRoaXMsdCxiLGEscyl9KX0sb25lOmZ1bmN0aW9uKHQscyxhLGIpe3JldHVybiB0aGlzLm9uKHQscyxhLGIsMSl9LG9mZjpmdW5jdGlvbih0LHMsYSl7dmFyIGIsajtpZih0JiZ0LnByZXZlbnREZWZhdWx0JiZ0LmhhbmRsZU9iail7Yj10LmhhbmRsZU9iajtRKHQuZGVsZWdhdGVUYXJnZXQpLm9mZihiLm5hbWVzcGFjZT9iLm9yaWdUeXBlKyIuIitiLm5hbWVzcGFjZTpiLm9yaWdUeXBlLGIuc2VsZWN0b3IsYi5oYW5kbGVyKTtyZXR1cm4gdGhpc31pZih0eXBlb2YgdD09PSJvYmplY3QiKXtmb3IoaiBpbiB0KXt0aGlzLm9mZihqLHMsdFtqXSl9cmV0dXJuIHRoaXN9aWYocz09PWZhbHNlfHx0eXBlb2Ygcz09PSJmdW5jdGlvbiIpe2E9cztzPXVuZGVmaW5lZH1pZihhPT09ZmFsc2Upe2E9bzF9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1EuZXZlbnQucmVtb3ZlKHRoaXMsdCxhLHMpfSl9LHRyaWdnZXI6ZnVuY3Rpb24odCxhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5ldmVudC50cmlnZ2VyKHQsYSx0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbih0LGEpe3ZhciBiPXRoaXNbMF07aWYoYil7cmV0dXJuIFEuZXZlbnQudHJpZ2dlcih0LGEsYix0cnVlKX19fSk7ZnVuY3Rpb24gcTEoSil7dmFyIGw9cjEuc3BsaXQoInwiKSxzPUouY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKHMuY3JlYXRlRWxlbWVudCl7d2hpbGUobC5sZW5ndGgpe3MuY3JlYXRlRWxlbWVudChsLnBvcCgpKX19cmV0dXJuIHN9dmFyIHIxPSJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfCIrImhlYWRlcnxoZ3JvdXB8bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHByb2dyZXNzfHNlY3Rpb258c3VtbWFyeXx0aW1lfHZpZGVvIixzMT0vIGpRdWVyeVxkKz0iKD86bnVsbHxcZCspIi9nLHQxPW5ldyBSZWdFeHAoIjwoPzoiK3IxKyIpW1xccy8+XSIsImkiKSx1MT0vXlxzKy8sdjE9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1x3Ol0rKVtePl0qKVwvPi9naSx3MT0vPChbXHc6XSspLyx4MT0vPHRib2R5L2kseTE9Lzx8JiM/XHcrOy8sejE9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxBMT0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxCMT0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksQzE9L150cnVlXC8oLiopLyxEMT0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2csRTE9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLGxlZ2VuZDpbMSwiPGZpZWxkc2V0PiIsIjwvZmllbGRzZXQ+Il0sYXJlYTpbMSwiPG1hcD4iLCI8L21hcD4iXSxwYXJhbTpbMSwiPG9iamVjdD4iLCI8L29iamVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sdHI6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLGNvbDpbMiwiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4iLCI8L2NvbGdyb3VwPjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OnguaHRtbFNlcmlhbGl6ZT9bMCwiIiwiIl06WzEsIlg8ZGl2PiIsIjwvZGl2PiJdfSxGMT1xMShKKSxHMT1GMS5hcHBlbmRDaGlsZChKLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtFMS5vcHRncm91cD1FMS5vcHRpb247RTEudGJvZHk9RTEudGZvb3Q9RTEuY29sZ3JvdXA9RTEuY2FwdGlvbj1FMS50aGVhZDtFMS50aD1FMS50ZDtmdW5jdGlvbiBIMShhLHQpe3ZhciBiLGosaT0wLGw9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1YP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUodHx8IioiKTp0eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsIT09WD9hLnF1ZXJ5U2VsZWN0b3JBbGwodHx8IioiKTp1bmRlZmluZWQ7aWYoIWwpe2ZvcihsPVtdLGI9YS5jaGlsZE5vZGVzfHxhOyhqPWJbaV0pIT1udWxsO2krKyl7aWYoIXR8fFEubm9kZU5hbWUoaix0KSl7bC5wdXNoKGopfWVsc2V7US5tZXJnZShsLEgxKGosdCkpfX19cmV0dXJuIHQ9PT11bmRlZmluZWR8fHQmJlEubm9kZU5hbWUoYSx0KT9RLm1lcmdlKFthXSxsKTpsfWZ1bmN0aW9uIEkxKGEpe2lmKGgxLnRlc3QoYS50eXBlKSl7YS5kZWZhdWx0Q2hlY2tlZD1hLmNoZWNrZWR9fWZ1bmN0aW9uIEoxKGEsYil7cmV0dXJuIFEubm9kZU5hbWUoYSwidGFibGUiKSYmUS5ub2RlTmFtZShiLm5vZGVUeXBlIT09MTE/YjpiLmZpcnN0Q2hpbGQsInRyIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6YX1mdW5jdGlvbiBLMShhKXthLnR5cGU9KFEuZmluZC5hdHRyKGEsInR5cGUiKSE9PW51bGwpKyIvIithLnR5cGU7cmV0dXJuIGF9ZnVuY3Rpb24gTDEoYSl7dmFyIG09QzEuZXhlYyhhLnR5cGUpO2lmKG0pe2EudHlwZT1tWzFdfWVsc2V7YS5yZW1vdmVBdHRyaWJ1dGUoInR5cGUiKX1yZXR1cm4gYX1mdW5jdGlvbiBNMShhLHIpe3ZhciBiLGk9MDtmb3IoOyhiPWFbaV0pIT1udWxsO2krKyl7US5fZGF0YShiLCJnbG9iYWxFdmFsIiwhcnx8US5fZGF0YShyW2ldLCJnbG9iYWxFdmFsIikpfX1mdW5jdGlvbiBOMShzLGEpe2lmKGEubm9kZVR5cGUhPT0xfHwhUS5oYXNEYXRhKHMpKXtyZXR1cm59dmFyIHQsaSxsLGI9US5fZGF0YShzKSxqPVEuX2RhdGEoYSxiKSxtPWIuZXZlbnRzO2lmKG0pe2RlbGV0ZSBqLmhhbmRsZTtqLmV2ZW50cz17fTtmb3IodCBpbiBtKXtmb3IoaT0wLGw9bVt0XS5sZW5ndGg7aTxsO2krKyl7US5ldmVudC5hZGQoYSx0LG1bdF1baV0pfX19aWYoai5kYXRhKXtqLmRhdGE9US5leHRlbmQoe30sai5kYXRhKX19ZnVuY3Rpb24gTzEocyxhKXt2YXIgbixlLGI7aWYoYS5ub2RlVHlwZSE9PTEpe3JldHVybn1uPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZigheC5ub0Nsb25lRXZlbnQmJmFbUS5leHBhbmRvXSl7Yj1RLl9kYXRhKGEpO2ZvcihlIGluIGIuZXZlbnRzKXtRLnJlbW92ZUV2ZW50KGEsZSxiLmhhbmRsZSl9YS5yZW1vdmVBdHRyaWJ1dGUoUS5leHBhbmRvKX1pZihuPT09InNjcmlwdCImJmEudGV4dCE9PXMudGV4dCl7SzEoYSkudGV4dD1zLnRleHQ7TDEoYSl9ZWxzZSBpZihuPT09Im9iamVjdCIpe2lmKGEucGFyZW50Tm9kZSl7YS5vdXRlckhUTUw9cy5vdXRlckhUTUx9aWYoeC5odG1sNUNsb25lJiYocy5pbm5lckhUTUwmJiFRLnRyaW0oYS5pbm5lckhUTUwpKSl7YS5pbm5lckhUTUw9cy5pbm5lckhUTUx9fWVsc2UgaWYobj09PSJpbnB1dCImJmgxLnRlc3Qocy50eXBlKSl7YS5kZWZhdWx0Q2hlY2tlZD1hLmNoZWNrZWQ9cy5jaGVja2VkO2lmKGEudmFsdWUhPT1zLnZhbHVlKXthLnZhbHVlPXMudmFsdWV9fWVsc2UgaWYobj09PSJvcHRpb24iKXthLmRlZmF1bHRTZWxlY3RlZD1hLnNlbGVjdGVkPXMuZGVmYXVsdFNlbGVjdGVkfWVsc2UgaWYobj09PSJpbnB1dCJ8fG49PT0idGV4dGFyZWEiKXthLmRlZmF1bHRWYWx1ZT1zLmRlZmF1bHRWYWx1ZX19US5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGEsYixqKXt2YXIgbCxuLG0saSxzLHA9US5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSk7aWYoeC5odG1sNUNsb25lfHxRLmlzWE1MRG9jKGEpfHwhdDEudGVzdCgiPCIrYS5ub2RlTmFtZSsiPiIpKXttPWEuY2xvbmVOb2RlKHRydWUpfWVsc2V7RzEuaW5uZXJIVE1MPWEub3V0ZXJIVE1MO0cxLnJlbW92ZUNoaWxkKG09RzEuZmlyc3RDaGlsZCl9aWYoKCF4Lm5vQ2xvbmVFdmVudHx8IXgubm9DbG9uZUNoZWNrZWQpJiYoYS5ub2RlVHlwZT09PTF8fGEubm9kZVR5cGU9PT0xMSkmJiFRLmlzWE1MRG9jKGEpKXtsPUgxKG0pO3M9SDEoYSk7Zm9yKGk9MDsobj1zW2ldKSE9bnVsbDsrK2kpe2lmKGxbaV0pe08xKG4sbFtpXSl9fX1pZihiKXtpZihqKXtzPXN8fEgxKGEpO2w9bHx8SDEobSk7Zm9yKGk9MDsobj1zW2ldKSE9bnVsbDtpKyspe04xKG4sbFtpXSl9fWVsc2V7TjEoYSxtKX19bD1IMShtLCJzY3JpcHQiKTtpZihsLmxlbmd0aD4wKXtNMShsLCFwJiZIMShhLCJzY3JpcHQiKSl9bD1zPW49bnVsbDtyZXR1cm4gbX0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihhLGIscyxtKXt2YXIgaixuLHAsdCxyLHYsXyxsPWEubGVuZ3RoLHIzPXExKGIpLHMzPVtdLGk9MDtmb3IoO2k8bDtpKyspe249YVtpXTtpZihufHxuPT09MCl7aWYoUS50eXBlKG4pPT09Im9iamVjdCIpe1EubWVyZ2UoczMsbi5ub2RlVHlwZT9bbl06bil9ZWxzZSBpZigheTEudGVzdChuKSl7czMucHVzaChiLmNyZWF0ZVRleHROb2RlKG4pKX1lbHNle3Q9dHx8cjMuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSk7cj0odzEuZXhlYyhuKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKTtfPUUxW3JdfHxFMS5fZGVmYXVsdDt0LmlubmVySFRNTD1fWzFdK24ucmVwbGFjZSh2MSwiPCQxPjwvJDI+IikrX1syXTtqPV9bMF07d2hpbGUoai0tKXt0PXQubGFzdENoaWxkfWlmKCF4LmxlYWRpbmdXaGl0ZXNwYWNlJiZ1MS50ZXN0KG4pKXtzMy5wdXNoKGIuY3JlYXRlVGV4dE5vZGUodTEuZXhlYyhuKVswXSkpfWlmKCF4LnRib2R5KXtuPXI9PT0idGFibGUiJiYheDEudGVzdChuKT90LmZpcnN0Q2hpbGQ6X1sxXT09PSI8dGFibGU+IiYmIXgxLnRlc3Qobik/dDowO2o9biYmbi5jaGlsZE5vZGVzLmxlbmd0aDt3aGlsZShqLS0pe2lmKFEubm9kZU5hbWUoKHY9bi5jaGlsZE5vZGVzW2pdKSwidGJvZHkiKSYmIXYuY2hpbGROb2Rlcy5sZW5ndGgpe24ucmVtb3ZlQ2hpbGQodil9fX1RLm1lcmdlKHMzLHQuY2hpbGROb2Rlcyk7dC50ZXh0Q29udGVudD0iIjt3aGlsZSh0LmZpcnN0Q2hpbGQpe3QucmVtb3ZlQ2hpbGQodC5maXJzdENoaWxkKX10PXIzLmxhc3RDaGlsZH19fWlmKHQpe3IzLnJlbW92ZUNoaWxkKHQpfWlmKCF4LmFwcGVuZENoZWNrZWQpe1EuZ3JlcChIMShzMywiaW5wdXQiKSxJMSl9aT0wO3doaWxlKChuPXMzW2krK10pKXtpZihtJiZRLmluQXJyYXkobixtKSE9PS0xKXtjb250aW51ZX1wPVEuY29udGFpbnMobi5vd25lckRvY3VtZW50LG4pO3Q9SDEocjMuYXBwZW5kQ2hpbGQobiksInNjcmlwdCIpO2lmKHApe00xKHQpfWlmKHMpe2o9MDt3aGlsZSgobj10W2orK10pKXtpZihCMS50ZXN0KG4udHlwZXx8IiIpKXtzLnB1c2gobil9fX19dD1udWxsO3JldHVybiByM30sY2xlYW5EYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGosdCxsLG0saT0wLG49US5leHBhbmRvLHA9US5jYWNoZSxyPXguZGVsZXRlRXhwYW5kbyxzPVEuZXZlbnQuc3BlY2lhbDtmb3IoOyhqPWFbaV0pIT1udWxsO2krKyl7aWYoYnx8US5hY2NlcHREYXRhKGopKXtsPWpbbl07bT1sJiZwW2xdO2lmKG0pe2lmKG0uZXZlbnRzKXtmb3IodCBpbiBtLmV2ZW50cyl7aWYoc1t0XSl7US5ldmVudC5yZW1vdmUoaix0KX1lbHNle1EucmVtb3ZlRXZlbnQoaix0LG0uaGFuZGxlKX19fWlmKHBbbF0pe2RlbGV0ZSBwW2xdO2lmKHIpe2RlbGV0ZSBqW25dfWVsc2UgaWYodHlwZW9mIGoucmVtb3ZlQXR0cmlidXRlIT09WCl7ai5yZW1vdmVBdHRyaWJ1dGUobil9ZWxzZXtqW25dPW51bGx9ZC5wdXNoKGwpfX19fX19KTtRLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbih2KXtyZXR1cm4gZzEodGhpcyxmdW5jdGlvbih2KXtyZXR1cm4gdj09PXVuZGVmaW5lZD9RLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxKKS5jcmVhdGVUZXh0Tm9kZSh2KSl9LG51bGwsdixhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTF8fHRoaXMubm9kZVR5cGU9PT05KXt2YXIgdD1KMSh0aGlzLGEpO3QuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYodGhpcy5ub2RlVHlwZT09PTF8fHRoaXMubm9kZVR5cGU9PT0xMXx8dGhpcy5ub2RlVHlwZT09PTkpe3ZhciB0PUoxKHRoaXMsYSk7dC5pbnNlcnRCZWZvcmUoYSx0LmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYodGhpcy5wYXJlbnROb2RlKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9fSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKHRoaXMucGFyZW50Tm9kZSl7dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMubmV4dFNpYmxpbmcpfX0pfSxyZW1vdmU6ZnVuY3Rpb24ocyxhKXt2YXIgYixqPXM/US5maWx0ZXIocyx0aGlzKTp0aGlzLGk9MDtmb3IoOyhiPWpbaV0pIT1udWxsO2krKyl7aWYoIWEmJmIubm9kZVR5cGU9PT0xKXtRLmNsZWFuRGF0YShIMShiKSl9aWYoYi5wYXJlbnROb2RlKXtpZihhJiZRLmNvbnRhaW5zKGIub3duZXJEb2N1bWVudCxiKSl7TTEoSDEoYiwic2NyaXB0IikpfWIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKX19cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7dmFyIGEsaT0wO2Zvcig7KGE9dGhpc1tpXSkhPW51bGw7aSsrKXtpZihhLm5vZGVUeXBlPT09MSl7US5jbGVhbkRhdGEoSDEoYSxmYWxzZSkpfXdoaWxlKGEuZmlyc3RDaGlsZCl7YS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpfWlmKGEub3B0aW9ucyYmUS5ub2RlTmFtZShhLCJzZWxlY3QiKSl7YS5vcHRpb25zLmxlbmd0aD0wfX1yZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSxiKXthPWE9PW51bGw/ZmFsc2U6YTtiPWI9PW51bGw/YTpiO3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBRLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKHYpe3JldHVybiBnMSh0aGlzLGZ1bmN0aW9uKHYpe3ZhciBhPXRoaXNbMF18fHt9LGk9MCxsPXRoaXMubGVuZ3RoO2lmKHY9PT11bmRlZmluZWQpe3JldHVybiBhLm5vZGVUeXBlPT09MT9hLmlubmVySFRNTC5yZXBsYWNlKHMxLCIiKTp1bmRlZmluZWR9aWYodHlwZW9mIHY9PT0ic3RyaW5nIiYmIXoxLnRlc3QodikmJih4Lmh0bWxTZXJpYWxpemV8fCF0MS50ZXN0KHYpKSYmKHgubGVhZGluZ1doaXRlc3BhY2V8fCF1MS50ZXN0KHYpKSYmIUUxWyh3MS5leGVjKHYpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7dj12LnJlcGxhY2UodjEsIjwkMT48LyQyPiIpO3RyeXtmb3IoO2k8bDtpKyspe2E9dGhpc1tpXXx8e307aWYoYS5ub2RlVHlwZT09PTEpe1EuY2xlYW5EYXRhKEgxKGEsZmFsc2UpKTthLmlubmVySFRNTD12fX1hPTB9Y2F0Y2goZSl7fX1pZihhKXt0aGlzLmVtcHR5KCkuYXBwZW5kKHYpfX0sbnVsbCx2LGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXTt0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihiKXthPXRoaXMucGFyZW50Tm9kZTtRLmNsZWFuRGF0YShIMSh0aGlzKSk7aWYoYSl7YS5yZXBsYWNlQ2hpbGQoYix0aGlzKX19KTtyZXR1cm4gYSYmKGEubGVuZ3RofHxhLm5vZGVUeXBlKT90aGlzOnRoaXMucmVtb3ZlKCl9LGRldGFjaDpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5yZW1vdmUocyx0cnVlKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiKXthPWcuYXBwbHkoW10sYSk7dmFyIGosbixtLHMscCxyLGk9MCxsPXRoaXMubGVuZ3RoLHQ9dGhpcyx2PWwtMSxfPWFbMF0scjM9US5pc0Z1bmN0aW9uKF8pO2lmKHIzfHwobD4xJiZ0eXBlb2YgXz09PSJzdHJpbmciJiYheC5jaGVja0Nsb25lJiZBMS50ZXN0KF8pKSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihzMyl7dmFyIHQzPXQuZXEoczMpO2lmKHIzKXthWzBdPV8uY2FsbCh0aGlzLHMzLHQzLmh0bWwoKSl9dDMuZG9tTWFuaXAoYSxiKX0pfWlmKGwpe3I9US5idWlsZEZyYWdtZW50KGEsdGhpc1swXS5vd25lckRvY3VtZW50LGZhbHNlLHRoaXMpO2o9ci5maXJzdENoaWxkO2lmKHIuY2hpbGROb2Rlcy5sZW5ndGg9PT0xKXtyPWp9aWYoail7cz1RLm1hcChIMShyLCJzY3JpcHQiKSxLMSk7bT1zLmxlbmd0aDtmb3IoO2k8bDtpKyspe249cjtpZihpIT09dil7bj1RLmNsb25lKG4sdHJ1ZSx0cnVlKTtpZihtKXtRLm1lcmdlKHMsSDEobiwic2NyaXB0IikpfX1iLmNhbGwodGhpc1tpXSxuLGkpfWlmKG0pe3A9c1tzLmxlbmd0aC0xXS5vd25lckRvY3VtZW50O1EubWFwKHMsTDEpO2ZvcihpPTA7aTxtO2krKyl7bj1zW2ldO2lmKEIxLnRlc3Qobi50eXBlfHwiIikmJiFRLl9kYXRhKG4sImdsb2JhbEV2YWwiKSYmUS5jb250YWlucyhwLG4pKXtpZihuLnNyYyl7aWYoUS5fZXZhbFVybCl7US5fZXZhbFVybChuLnNyYyl9fWVsc2V7US5nbG9iYWxFdmFsKChuLnRleHR8fG4udGV4dENvbnRlbnR8fG4uaW5uZXJIVE1MfHwiIikucmVwbGFjZShEMSwiIikpfX19fXI9aj1udWxsfX1yZXR1cm4gdGhpc319KTtRLmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihuLGEpe1EuZm5bbl09ZnVuY3Rpb24ocyl7dmFyIGIsaT0wLHI9W10saj1RKHMpLGw9ai5sZW5ndGgtMTtmb3IoO2k8PWw7aSsrKXtiPWk9PT1sP3RoaXM6dGhpcy5jbG9uZSh0cnVlKTtRKGpbaV0pW2FdKGIpO2guYXBwbHkocixiLmdldCgpKX1yZXR1cm4gdGhpcy5wdXNoU3RhY2socil9fSk7dmFyIFAxLFExPXt9O2Z1bmN0aW9uIFIxKG4sYSl7dmFyIHMsYj1RKGEuY3JlYXRlRWxlbWVudChuKSkuYXBwZW5kVG8oYS5ib2R5KSxqPXcuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUmJihzPXcuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUoYlswXSkpP3MuZGlzcGxheTpRLmNzcyhiWzBdLCJkaXNwbGF5Iik7Yi5kZXRhY2goKTtyZXR1cm4gan1mdW5jdGlvbiBTMShuKXt2YXIgYT1KLGI9UTFbbl07aWYoIWIpe2I9UjEobixhKTtpZihiPT09Im5vbmUifHwhYil7UDE9KFAxfHxRKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKGEuZG9jdW1lbnRFbGVtZW50KTthPShQMVswXS5jb250ZW50V2luZG93fHxQMVswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50O2Eud3JpdGUoKTthLmNsb3NlKCk7Yj1SMShuLGEpO1AxLmRldGFjaCgpfVExW25dPWJ9cmV0dXJuIGJ9KGZ1bmN0aW9uKCl7dmFyIHM7eC5zaHJpbmtXcmFwQmxvY2tzPWZ1bmN0aW9uKCl7aWYocyE9bnVsbCl7cmV0dXJuIHN9cz1mYWxzZTt2YXIgYSxiLGo7Yj1KLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF07aWYoIWJ8fCFiLnN0eWxlKXtyZXR1cm59YT1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2o9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTtqLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4IjtiLmFwcGVuZENoaWxkKGopLmFwcGVuZENoaWxkKGEpO2lmKHR5cGVvZiBhLnN0eWxlLnpvb20hPT1YKXthLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7IisiYm94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowOyIrInBhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiO2EuYXBwZW5kQ2hpbGQoSi5jcmVhdGVFbGVtZW50KCJkaXYiKSkuc3R5bGUud2lkdGg9IjVweCI7cz1hLm9mZnNldFdpZHRoIT09M31iLnJlbW92ZUNoaWxkKGopO3JldHVybiBzfX0pKCk7dmFyIFQxPSgvXm1hcmdpbi8pO3ZhciBVMT1uZXcgUmVnRXhwKCJeKCIrZDErIikoPyFweClbYS16JV0rJCIsImkiKTt2YXIgVjEsVzEsWDE9L14odG9wfHJpZ2h0fGJvdHRvbXxsZWZ0KSQvO2lmKHcuZ2V0Q29tcHV0ZWRTdHlsZSl7VjE9ZnVuY3Rpb24oYSl7cmV0dXJuIGEub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGEsbnVsbCl9O1cxPWZ1bmN0aW9uKGEsbixiKXt2YXIgaixtLGwscixzPWEuc3R5bGU7Yj1ifHxWMShhKTtyPWI/Yi5nZXRQcm9wZXJ0eVZhbHVlKG4pfHxiW25dOnVuZGVmaW5lZDtpZihiKXtpZihyPT09IiImJiFRLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKSl7cj1RLnN0eWxlKGEsbil9aWYoVTEudGVzdChyKSYmVDEudGVzdChuKSl7aj1zLndpZHRoO209cy5taW5XaWR0aDtsPXMubWF4V2lkdGg7cy5taW5XaWR0aD1zLm1heFdpZHRoPXMud2lkdGg9cjtyPWIud2lkdGg7cy53aWR0aD1qO3MubWluV2lkdGg9bTtzLm1heFdpZHRoPWx9fXJldHVybiByPT09dW5kZWZpbmVkP3I6cisiIn19ZWxzZSBpZihKLmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUpe1YxPWZ1bmN0aW9uKGEpe3JldHVybiBhLmN1cnJlbnRTdHlsZX07VzE9ZnVuY3Rpb24oYSxuLGIpe3ZhciBsLHIsaixtLHM9YS5zdHlsZTtiPWJ8fFYxKGEpO209Yj9iW25dOnVuZGVmaW5lZDtpZihtPT1udWxsJiZzJiZzW25dKXttPXNbbl19aWYoVTEudGVzdChtKSYmIVgxLnRlc3Qobikpe2w9cy5sZWZ0O3I9YS5ydW50aW1lU3R5bGU7aj1yJiZyLmxlZnQ7aWYoail7ci5sZWZ0PWEuY3VycmVudFN0eWxlLmxlZnR9cy5sZWZ0PW49PT0iZm9udFNpemUiPyIxZW0iOm07bT1zLnBpeGVsTGVmdCsicHgiO3MubGVmdD1sO2lmKGope3IubGVmdD1qfX1yZXR1cm4gbT09PXVuZGVmaW5lZD9tOm0rIiJ8fCJhdXRvIn19ZnVuY3Rpb24gWTEoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7dmFyIGo9YSgpO2lmKGo9PW51bGwpe3JldHVybn1pZihqKXtkZWxldGUgdGhpcy5nZXQ7cmV0dXJufXJldHVybih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0oZnVuY3Rpb24oKXt2YXIgYixzLGEscCxqLHIsbDtiPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7Yi5pbm5lckhUTUw9IiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPiI7YT1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIilbMF07cz1hJiZhLnN0eWxlO2lmKCFzKXtyZXR1cm59cy5jc3NUZXh0PSJmbG9hdDpsZWZ0O29wYWNpdHk6LjUiO3gub3BhY2l0eT1zLm9wYWNpdHk9PT0iMC41Ijt4LmNzc0Zsb2F0PSEhcy5jc3NGbG9hdDtiLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCI7Yi5jbG9uZU5vZGUodHJ1ZSkuc3R5bGUuYmFja2dyb3VuZENsaXA9IiI7eC5jbGVhckNsb25lU3R5bGU9Yi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD09PSJjb250ZW50LWJveCI7eC5ib3hTaXppbmc9cy5ib3hTaXppbmc9PT0iInx8cy5Nb3pCb3hTaXppbmc9PT0iInx8cy5XZWJraXRCb3hTaXppbmc9PT0iIjtRLmV4dGVuZCh4LHtyZWxpYWJsZUhpZGRlbk9mZnNldHM6ZnVuY3Rpb24oKXtpZihyPT1udWxsKXttKCl9cmV0dXJuIHJ9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7aWYoaj09bnVsbCl7bSgpfXJldHVybiBqfSxwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYocD09bnVsbCl7bSgpfXJldHVybiBwfSxyZWxpYWJsZU1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7aWYobD09bnVsbCl7bSgpfXJldHVybiBsfX0pO2Z1bmN0aW9uIG0oKXt2YXIgYixuLHQsdjtuPUouZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXTtpZighbnx8IW4uc3R5bGUpe3JldHVybn1iPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7dD1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Quc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiO24uYXBwZW5kQ2hpbGQodCkuYXBwZW5kQ2hpbGQoYik7Yi5zdHlsZS5jc3NUZXh0PSItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDsiKyJib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjElO3RvcDoxJTsiKyJib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjRweDtwb3NpdGlvbjphYnNvbHV0ZSI7cD1qPWZhbHNlO2w9dHJ1ZTtpZih3LmdldENvbXB1dGVkU3R5bGUpe3A9KHcuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpfHx7fSkudG9wIT09IjElIjtqPSh3LmdldENvbXB1dGVkU3R5bGUoYixudWxsKXx8e3dpZHRoOiI0cHgifSkud2lkdGg9PT0iNHB4Ijt2PWIuYXBwZW5kQ2hpbGQoSi5jcmVhdGVFbGVtZW50KCJkaXYiKSk7di5zdHlsZS5jc3NUZXh0PWIuc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDsiKyJib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowIjt2LnN0eWxlLm1hcmdpblJpZ2h0PXYuc3R5bGUud2lkdGg9IjAiO2Iuc3R5bGUud2lkdGg9IjFweCI7bD0hcGFyc2VGbG9hdCgody5nZXRDb21wdXRlZFN0eWxlKHYsbnVsbCl8fHt9KS5tYXJnaW5SaWdodCl9Yi5pbm5lckhUTUw9Ijx0YWJsZT48dHI+PHRkPjwvdGQ+PHRkPnQ8L3RkPjwvdHI+PC90YWJsZT4iO3Y9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKTt2WzBdLnN0eWxlLmNzc1RleHQ9Im1hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MDtkaXNwbGF5Om5vbmUiO3I9dlswXS5vZmZzZXRIZWlnaHQ9PT0wO2lmKHIpe3ZbMF0uc3R5bGUuZGlzcGxheT0iIjt2WzFdLnN0eWxlLmRpc3BsYXk9Im5vbmUiO3I9dlswXS5vZmZzZXRIZWlnaHQ9PT0wfW4ucmVtb3ZlQ2hpbGQodCl9fSkoKTtRLnN3YXA9ZnVuY3Rpb24oYSxiLGosbCl7dmFyIHIsbixtPXt9O2ZvcihuIGluIGIpe21bbl09YS5zdHlsZVtuXTthLnN0eWxlW25dPWJbbl19cj1qLmFwcGx5KGEsbHx8W10pO2ZvcihuIGluIGIpe2Euc3R5bGVbbl09bVtuXX1yZXR1cm4gcn07dmFyIFoxPS9hbHBoYVwoW14pXSpcKS9pLCQxPS9vcGFjaXR5XHMqPVxzKihbXildKikvLF8xPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxhMj1uZXcgUmVnRXhwKCJeKCIrZDErIikoLiopJCIsImkiKSxiMj1uZXcgUmVnRXhwKCJeKFsrLV0pPSgiK2QxKyIpIiwiaSIpLGMyPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxkMj17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn0sZTI9WyJXZWJraXQiLCJPIiwiTW96IiwibXMiXTtmdW5jdGlvbiBmMihzLG4pe2lmKG4gaW4gcyl7cmV0dXJuIG59dmFyIGE9bi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStuLnNsaWNlKDEpLGI9bixpPWUyLmxlbmd0aDt3aGlsZShpLS0pe249ZTJbaV0rYTtpZihuIGluIHMpe3JldHVybiBufX1yZXR1cm4gYn1mdW5jdGlvbiBnMihhLHMpe3ZhciBiLGosbCx2PVtdLG09MCxuPWEubGVuZ3RoO2Zvcig7bTxuO20rKyl7aj1hW21dO2lmKCFqLnN0eWxlKXtjb250aW51ZX12W21dPVEuX2RhdGEoaiwib2xkZGlzcGxheSIpO2I9ai5zdHlsZS5kaXNwbGF5O2lmKHMpe2lmKCF2W21dJiZiPT09Im5vbmUiKXtqLnN0eWxlLmRpc3BsYXk9IiJ9aWYoai5zdHlsZS5kaXNwbGF5PT09IiImJmYxKGopKXt2W21dPVEuX2RhdGEoaiwib2xkZGlzcGxheSIsUzEoai5ub2RlTmFtZSkpfX1lbHNle2w9ZjEoaik7aWYoYiYmYiE9PSJub25lInx8IWwpe1EuX2RhdGEoaiwib2xkZGlzcGxheSIsbD9iOlEuY3NzKGosImRpc3BsYXkiKSl9fX1mb3IobT0wO208bjttKyspe2o9YVttXTtpZighai5zdHlsZSl7Y29udGludWV9aWYoIXN8fGouc3R5bGUuZGlzcGxheT09PSJub25lInx8ai5zdHlsZS5kaXNwbGF5PT09IiIpe2ouc3R5bGUuZGlzcGxheT1zP3ZbbV18fCIiOiJub25lIn19cmV0dXJuIGF9ZnVuY3Rpb24gaDIoYSx2LHMpe3ZhciBtPWEyLmV4ZWModik7cmV0dXJuIG0/TWF0aC5tYXgoMCxtWzFdLShzfHwwKSkrKG1bMl18fCJweCIpOnZ9ZnVuY3Rpb24gaTIoYSxuLGIsaixzKXt2YXIgaT1iPT09KGo/ImJvcmRlciI6ImNvbnRlbnQiKT80Om49PT0id2lkdGgiPzE6MCx2PTA7Zm9yKDtpPDQ7aSs9Mil7aWYoYj09PSJtYXJnaW4iKXt2Kz1RLmNzcyhhLGIrZTFbaV0sdHJ1ZSxzKX1pZihqKXtpZihiPT09ImNvbnRlbnQiKXt2LT1RLmNzcyhhLCJwYWRkaW5nIitlMVtpXSx0cnVlLHMpfWlmKGIhPT0ibWFyZ2luIil7di09US5jc3MoYSwiYm9yZGVyIitlMVtpXSsiV2lkdGgiLHRydWUscyl9fWVsc2V7dis9US5jc3MoYSwicGFkZGluZyIrZTFbaV0sdHJ1ZSxzKTtpZihiIT09InBhZGRpbmciKXt2Kz1RLmNzcyhhLCJib3JkZXIiK2UxW2ldKyJXaWR0aCIsdHJ1ZSxzKX19fXJldHVybiB2fWZ1bmN0aW9uIGoyKGEsbixiKXt2YXIgdj10cnVlLGo9bj09PSJ3aWR0aCI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxzPVYxKGEpLGw9eC5ib3hTaXppbmcmJlEuY3NzKGEsImJveFNpemluZyIsZmFsc2Uscyk9PT0iYm9yZGVyLWJveCI7aWYoajw9MHx8aj09bnVsbCl7aj1XMShhLG4scyk7aWYoajwwfHxqPT1udWxsKXtqPWEuc3R5bGVbbl19aWYoVTEudGVzdChqKSl7cmV0dXJuIGp9dj1sJiYoeC5ib3hTaXppbmdSZWxpYWJsZSgpfHxqPT09YS5zdHlsZVtuXSk7aj1wYXJzZUZsb2F0KGopfHwwfXJldHVybihqK2kyKGEsbixifHwobD8iYm9yZGVyIjoiY29udGVudCIpLHYscykpKyJweCJ9US5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgcj1XMShhLCJvcGFjaXR5Iik7cmV0dXJuIHI9PT0iIj8iMSI6cn19fX0sY3NzTnVtYmVyOnsiY29sdW1uQ291bnQiOnRydWUsImZpbGxPcGFjaXR5Ijp0cnVlLCJmbGV4R3JvdyI6dHJ1ZSwiZmxleFNocmluayI6dHJ1ZSwiZm9udFdlaWdodCI6dHJ1ZSwibGluZUhlaWdodCI6dHJ1ZSwib3BhY2l0eSI6dHJ1ZSwib3JkZXIiOnRydWUsIm9ycGhhbnMiOnRydWUsIndpZG93cyI6dHJ1ZSwiekluZGV4Ijp0cnVlLCJ6b29tIjp0cnVlfSxjc3NQcm9wczp7ImZsb2F0Ijp4LmNzc0Zsb2F0PyJjc3NGbG9hdCI6InN0eWxlRmxvYXQifSxzdHlsZTpmdW5jdGlvbihhLG4sdixiKXtpZighYXx8YS5ub2RlVHlwZT09PTN8fGEubm9kZVR5cGU9PT04fHwhYS5zdHlsZSl7cmV0dXJufXZhciByLHQsaixsPVEuY2FtZWxDYXNlKG4pLHM9YS5zdHlsZTtuPVEuY3NzUHJvcHNbbF18fChRLmNzc1Byb3BzW2xdPWYyKHMsbCkpO2o9US5jc3NIb29rc1tuXXx8US5jc3NIb29rc1tsXTtpZih2IT09dW5kZWZpbmVkKXt0PXR5cGVvZiB2O2lmKHQ9PT0ic3RyaW5nIiYmKHI9YjIuZXhlYyh2KSkpe3Y9KHJbMV0rMSkqclsyXStwYXJzZUZsb2F0KFEuY3NzKGEsbikpO3Q9Im51bWJlciJ9aWYodj09bnVsbHx8diE9PXYpe3JldHVybn1pZih0PT09Im51bWJlciImJiFRLmNzc051bWJlcltsXSl7dis9InB4In1pZigheC5jbGVhckNsb25lU3R5bGUmJnY9PT0iIiYmbi5pbmRleE9mKCJiYWNrZ3JvdW5kIik9PT0wKXtzW25dPSJpbmhlcml0In1pZighanx8ISgic2V0ImluIGopfHwodj1qLnNldChhLHYsYikpIT09dW5kZWZpbmVkKXt0cnl7c1tuXT12fWNhdGNoKGUpe319fWVsc2V7aWYoaiYmImdldCJpbiBqJiYocj1qLmdldChhLGZhbHNlLGIpKSE9PXVuZGVmaW5lZCl7cmV0dXJuIHJ9cmV0dXJuIHNbbl19fSxjc3M6ZnVuY3Rpb24oYSxuLGIscyl7dmFyIGosdixsLG09US5jYW1lbENhc2Uobik7bj1RLmNzc1Byb3BzW21dfHwoUS5jc3NQcm9wc1ttXT1mMihhLnN0eWxlLG0pKTtsPVEuY3NzSG9va3Nbbl18fFEuY3NzSG9va3NbbV07aWYobCYmImdldCJpbiBsKXt2PWwuZ2V0KGEsdHJ1ZSxiKX1pZih2PT09dW5kZWZpbmVkKXt2PVcxKGEsbixzKX1pZih2PT09Im5vcm1hbCImJm4gaW4gZDIpe3Y9ZDJbbl19aWYoYj09PSIifHxiKXtqPXBhcnNlRmxvYXQodik7cmV0dXJuIGI9PT10cnVlfHxRLmlzTnVtZXJpYyhqKT9qfHwwOnZ9cmV0dXJuIHZ9fSk7US5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihpLG4pe1EuY3NzSG9va3Nbbl09e2dldDpmdW5jdGlvbihhLGIsail7aWYoYil7cmV0dXJuIF8xLnRlc3QoUS5jc3MoYSwiZGlzcGxheSIpKSYmYS5vZmZzZXRXaWR0aD09PTA/US5zd2FwKGEsYzIsZnVuY3Rpb24oKXtyZXR1cm4gajIoYSxuLGopfSk6ajIoYSxuLGopfX0sc2V0OmZ1bmN0aW9uKGEsdixiKXt2YXIgcz1iJiZWMShhKTtyZXR1cm4gaDIoYSx2LGI/aTIoYSxuLGIseC5ib3hTaXppbmcmJlEuY3NzKGEsImJveFNpemluZyIsZmFsc2Uscyk9PT0iYm9yZGVyLWJveCIscyk6MCl9fX0pO2lmKCF4Lm9wYWNpdHkpe1EuY3NzSG9va3Mub3BhY2l0eT17Z2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuICQxLnRlc3QoKGImJmEuY3VycmVudFN0eWxlP2EuY3VycmVudFN0eWxlLmZpbHRlcjphLnN0eWxlLmZpbHRlcil8fCIiKT8oMC4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkpKyIiOmI/IjEiOiIifSxzZXQ6ZnVuY3Rpb24oYSx2KXt2YXIgcz1hLnN0eWxlLGI9YS5jdXJyZW50U3R5bGUsaj1RLmlzTnVtZXJpYyh2KT8iYWxwaGEob3BhY2l0eT0iK3YqMTAwKyIpIjoiIixsPWImJmIuZmlsdGVyfHxzLmZpbHRlcnx8IiI7cy56b29tPTE7aWYoKHY+PTF8fHY9PT0iIikmJlEudHJpbShsLnJlcGxhY2UoWjEsIiIpKT09PSIiJiZzLnJlbW92ZUF0dHJpYnV0ZSl7cy5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpO2lmKHY9PT0iInx8YiYmIWIuZmlsdGVyKXtyZXR1cm59fXMuZmlsdGVyPVoxLnRlc3QobCk/bC5yZXBsYWNlKFoxLGopOmwrIiAiK2p9fX1RLmNzc0hvb2tzLm1hcmdpblJpZ2h0PVkxKHgucmVsaWFibGVNYXJnaW5SaWdodCxmdW5jdGlvbihhLGIpe2lmKGIpe3JldHVybiBRLnN3YXAoYSx7ImRpc3BsYXkiOiJpbmxpbmUtYmxvY2sifSxXMSxbYSwibWFyZ2luUmlnaHQiXSl9fSk7US5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24ocCxzKXtRLmNzc0hvb2tzW3Arc109e2V4cGFuZDpmdW5jdGlvbih2KXt2YXIgaT0wLGE9e30sYj10eXBlb2Ygdj09PSJzdHJpbmciP3Yuc3BsaXQoIiAiKTpbdl07Zm9yKDtpPDQ7aSsrKXthW3ArZTFbaV0rc109YltpXXx8YltpLTJdfHxiWzBdfXJldHVybiBhfX07aWYoIVQxLnRlc3QocCkpe1EuY3NzSG9va3NbcCtzXS5zZXQ9aDJ9fSk7US5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihuLHYpe3JldHVybiBnMSh0aGlzLGZ1bmN0aW9uKGEsbix2KXt2YXIgcyxsLG09e30saT0wO2lmKFEuaXNBcnJheShuKSl7cz1WMShhKTtsPW4ubGVuZ3RoO2Zvcig7aTxsO2krKyl7bVtuW2ldXT1RLmNzcyhhLG5baV0sZmFsc2Uscyl9cmV0dXJuIG19cmV0dXJuIHYhPT11bmRlZmluZWQ/US5zdHlsZShhLG4sdik6US5jc3MoYSxuKX0sbix2LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gZzIodGhpcyx0cnVlKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBnMih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKHMpe2lmKHR5cGVvZiBzPT09ImJvb2xlYW4iKXtyZXR1cm4gcz90aGlzLnNob3coKTp0aGlzLmhpZGUoKX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoZjEodGhpcykpe1EodGhpcykuc2hvdygpfWVsc2V7USh0aGlzKS5oaWRlKCl9fSl9fSk7ZnVuY3Rpb24gazIoYSxiLHAsaixsKXtyZXR1cm4gbmV3IGsyLnByb3RvdHlwZS5pbml0KGEsYixwLGosbCl9US5Ud2Vlbj1rMjtrMi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmsyLGluaXQ6ZnVuY3Rpb24oYSxiLHAsaixsLG0pe3RoaXMuZWxlbT1hO3RoaXMucHJvcD1wO3RoaXMuZWFzaW5nPWx8fCJzd2luZyI7dGhpcy5vcHRpb25zPWI7dGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpO3RoaXMuZW5kPWo7dGhpcy51bml0PW18fChRLmNzc051bWJlcltwXT8iIjoicHgiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGE9azIucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGEmJmEuZ2V0P2EuZ2V0KHRoaXMpOmsyLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihwKXt2YXIgYSxiPWsyLnByb3BIb29rc1t0aGlzLnByb3BdO2lmKHRoaXMub3B0aW9ucy5kdXJhdGlvbil7dGhpcy5wb3M9YT1RLmVhc2luZ1t0aGlzLmVhc2luZ10ocCx0aGlzLm9wdGlvbnMuZHVyYXRpb24qcCwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKX1lbHNle3RoaXMucG9zPWE9cH10aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYSt0aGlzLnN0YXJ0O2lmKHRoaXMub3B0aW9ucy5zdGVwKXt0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKX1pZihiJiZiLnNldCl7Yi5zZXQodGhpcyl9ZWxzZXtrMi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpfXJldHVybiB0aGlzfX07azIucHJvdG90eXBlLmluaXQucHJvdG90eXBlPWsyLnByb3RvdHlwZTtrMi5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24odCl7dmFyIHI7aWYodC5lbGVtW3QucHJvcF0hPW51bGwmJighdC5lbGVtLnN0eWxlfHx0LmVsZW0uc3R5bGVbdC5wcm9wXT09bnVsbCkpe3JldHVybiB0LmVsZW1bdC5wcm9wXX1yPVEuY3NzKHQuZWxlbSx0LnByb3AsIiIpO3JldHVybiFyfHxyPT09ImF1dG8iPzA6cn0sc2V0OmZ1bmN0aW9uKHQpe2lmKFEuZnguc3RlcFt0LnByb3BdKXtRLmZ4LnN0ZXBbdC5wcm9wXSh0KX1lbHNlIGlmKHQuZWxlbS5zdHlsZSYmKHQuZWxlbS5zdHlsZVtRLmNzc1Byb3BzW3QucHJvcF1dIT1udWxsfHxRLmNzc0hvb2tzW3QucHJvcF0pKXtRLnN0eWxlKHQuZWxlbSx0LnByb3AsdC5ub3crdC51bml0KX1lbHNle3QuZWxlbVt0LnByb3BdPXQubm93fX19fTtrMi5wcm9wSG9va3Muc2Nyb2xsVG9wPWsyLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24odCl7aWYodC5lbGVtLm5vZGVUeXBlJiZ0LmVsZW0ucGFyZW50Tm9kZSl7dC5lbGVtW3QucHJvcF09dC5ub3d9fX07US5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihwKXtyZXR1cm4gcH0sc3dpbmc6ZnVuY3Rpb24ocCl7cmV0dXJuIDAuNS1NYXRoLmNvcyhwKk1hdGguUEkpLzJ9fTtRLmZ4PWsyLnByb3RvdHlwZS5pbml0O1EuZnguc3RlcD17fTt2YXIgbDIsbTIsbjI9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLG8yPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIitkMSsiKShbYS16JV0qKSQiLCJpIikscDI9L3F1ZXVlSG9va3MkLyxxMj1bdjJdLHIyPXsiKiI6W2Z1bmN0aW9uKHAsdil7dmFyIHQ9dGhpcy5jcmVhdGVUd2VlbihwLHYpLGE9dC5jdXIoKSxiPW8yLmV4ZWModiksaj1iJiZiWzNdfHwoUS5jc3NOdW1iZXJbcF0/IiI6InB4Iikscz0oUS5jc3NOdW1iZXJbcF18fGohPT0icHgiJiYrYSkmJm8yLmV4ZWMoUS5jc3ModC5lbGVtLHApKSxsPTEsbT0yMDtpZihzJiZzWzNdIT09ail7aj1qfHxzWzNdO2I9Ynx8W107cz0rYXx8MTtkb3tsPWx8fCIuNSI7cz1zL2w7US5zdHlsZSh0LmVsZW0scCxzK2opfXdoaWxlKGwhPT0obD10LmN1cigpL2EpJiZsIT09MSYmLS1tKX1pZihiKXtzPXQuc3RhcnQ9K3N8fCthfHwwO3QudW5pdD1qO3QuZW5kPWJbMV0/cysoYlsxXSsxKSpiWzJdOitiWzJdfXJldHVybiB0fV19O2Z1bmN0aW9uIHMyKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2wyPXVuZGVmaW5lZH0pO3JldHVybihsMj1RLm5vdygpKX1mdW5jdGlvbiB0Mih0LGEpe3ZhciBiLGo9e2hlaWdodDp0fSxpPTA7YT1hPzE6MDtmb3IoO2k8NDtpKz0yLWEpe2I9ZTFbaV07alsibWFyZ2luIitiXT1qWyJwYWRkaW5nIitiXT10fWlmKGEpe2oub3BhY2l0eT1qLndpZHRoPXR9cmV0dXJuIGp9ZnVuY3Rpb24gdTIodixwLGEpe3ZhciB0LGI9KHIyW3BdfHxbXSkuY29uY2F0KHIyWyIqIl0pLGo9MCxsPWIubGVuZ3RoO2Zvcig7ajxsO2orKyl7aWYoKHQ9YltqXS5jYWxsKGEscCx2KSkpe3JldHVybiB0fX19ZnVuY3Rpb24gdjIoYSxwLGIpe3ZhciBqLHYsdCxsLG0sbixyLHMsXz10aGlzLHIzPXt9LHMzPWEuc3R5bGUsdDM9YS5ub2RlVHlwZSYmZjEoYSksdTM9US5fZGF0YShhLCJmeHNob3ciKTtpZighYi5xdWV1ZSl7bT1RLl9xdWV1ZUhvb2tzKGEsImZ4Iik7aWYobS51bnF1ZXVlZD09bnVsbCl7bS51bnF1ZXVlZD0wO249bS5lbXB0eS5maXJlO20uZW1wdHkuZmlyZT1mdW5jdGlvbigpe2lmKCFtLnVucXVldWVkKXtuKCl9fX1tLnVucXVldWVkKys7Xy5hbHdheXMoZnVuY3Rpb24oKXtfLmFsd2F5cyhmdW5jdGlvbigpe20udW5xdWV1ZWQtLTtpZighUS5xdWV1ZShhLCJmeCIpLmxlbmd0aCl7bS5lbXB0eS5maXJlKCl9fSl9KX1pZihhLm5vZGVUeXBlPT09MSYmKCJoZWlnaHQiaW4gcHx8IndpZHRoImluIHApKXtiLm92ZXJmbG93PVtzMy5vdmVyZmxvdyxzMy5vdmVyZmxvd1gsczMub3ZlcmZsb3dZXTtyPVEuY3NzKGEsImRpc3BsYXkiKTtzPXI9PT0ibm9uZSI/US5fZGF0YShhLCJvbGRkaXNwbGF5Iil8fFMxKGEubm9kZU5hbWUpOnI7aWYocz09PSJpbmxpbmUiJiZRLmNzcyhhLCJmbG9hdCIpPT09Im5vbmUiKXtpZigheC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0fHxTMShhLm5vZGVOYW1lKT09PSJpbmxpbmUiKXtzMy5kaXNwbGF5PSJpbmxpbmUtYmxvY2sifWVsc2V7czMuem9vbT0xfX19aWYoYi5vdmVyZmxvdyl7czMub3ZlcmZsb3c9ImhpZGRlbiI7aWYoIXguc2hyaW5rV3JhcEJsb2NrcygpKXtfLmFsd2F5cyhmdW5jdGlvbigpe3MzLm92ZXJmbG93PWIub3ZlcmZsb3dbMF07czMub3ZlcmZsb3dYPWIub3ZlcmZsb3dbMV07czMub3ZlcmZsb3dZPWIub3ZlcmZsb3dbMl19KX19Zm9yKGogaW4gcCl7dj1wW2pdO2lmKG4yLmV4ZWModikpe2RlbGV0ZSBwW2pdO3Q9dHx8dj09PSJ0b2dnbGUiO2lmKHY9PT0odDM/ImhpZGUiOiJzaG93Iikpe2lmKHY9PT0ic2hvdyImJnUzJiZ1M1tqXSE9PXVuZGVmaW5lZCl7dDM9dHJ1ZX1lbHNle2NvbnRpbnVlfX1yM1tqXT11MyYmdTNbal18fFEuc3R5bGUoYSxqKX1lbHNle3I9dW5kZWZpbmVkfX1pZighUS5pc0VtcHR5T2JqZWN0KHIzKSl7aWYodTMpe2lmKCJoaWRkZW4iaW4gdTMpe3QzPXUzLmhpZGRlbn19ZWxzZXt1Mz1RLl9kYXRhKGEsImZ4c2hvdyIse30pfWlmKHQpe3UzLmhpZGRlbj0hdDN9aWYodDMpe1EoYSkuc2hvdygpfWVsc2V7Xy5kb25lKGZ1bmN0aW9uKCl7UShhKS5oaWRlKCl9KX1fLmRvbmUoZnVuY3Rpb24oKXt2YXIgajtRLl9yZW1vdmVEYXRhKGEsImZ4c2hvdyIpO2ZvcihqIGluIHIzKXtRLnN0eWxlKGEsaixyM1tqXSl9fSk7Zm9yKGogaW4gcjMpe2w9dTIodDM/dTNbal06MCxqLF8pO2lmKCEoaiBpbiB1Mykpe3UzW2pdPWwuc3RhcnQ7aWYodDMpe2wuZW5kPWwuc3RhcnQ7bC5zdGFydD1qPT09IndpZHRoInx8aj09PSJoZWlnaHQiPzE6MH19fX1lbHNlIGlmKChyPT09Im5vbmUiP1MxKGEubm9kZU5hbWUpOnIpPT09ImlubGluZSIpe3MzLmRpc3BsYXk9cn19ZnVuY3Rpb24gdzIocCxzKXt2YXIgYSxuLGIsdixqO2ZvcihhIGluIHApe249US5jYW1lbENhc2UoYSk7Yj1zW25dO3Y9cFthXTtpZihRLmlzQXJyYXkodikpe2I9dlsxXTt2PXBbYV09dlswXX1pZihhIT09bil7cFtuXT12O2RlbGV0ZSBwW2FdfWo9US5jc3NIb29rc1tuXTtpZihqJiYiZXhwYW5kImluIGope3Y9ai5leHBhbmQodik7ZGVsZXRlIHBbbl07Zm9yKGEgaW4gdil7aWYoIShhIGluIHApKXtwW2FdPXZbYV07c1thXT1ifX19ZWxzZXtzW25dPWJ9fX1mdW5jdGlvbiB4MihhLHAsYil7dmFyIHIscyxqPTAsbD1xMi5sZW5ndGgsbT1RLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIHQuZWxlbX0pLHQ9ZnVuY3Rpb24oKXtpZihzKXtyZXR1cm4gZmFsc2V9dmFyIF89bDJ8fHMyKCkscjM9TWF0aC5tYXgoMCxuLnN0YXJ0VGltZStuLmR1cmF0aW9uLV8pLHMzPXIzL24uZHVyYXRpb258fDAsdDM9MS1zMyxqPTAsbD1uLnR3ZWVucy5sZW5ndGg7Zm9yKDtqPGw7aisrKXtuLnR3ZWVuc1tqXS5ydW4odDMpfW0ubm90aWZ5V2l0aChhLFtuLHQzLHIzXSk7aWYodDM8MSYmbCl7cmV0dXJuIHIzfWVsc2V7bS5yZXNvbHZlV2l0aChhLFtuXSk7cmV0dXJuIGZhbHNlfX0sbj1tLnByb21pc2Uoe2VsZW06YSxwcm9wczpRLmV4dGVuZCh7fSxwKSxvcHRzOlEuZXh0ZW5kKHRydWUse3NwZWNpYWxFYXNpbmc6e319LGIpLG9yaWdpbmFsUHJvcGVydGllczpwLG9yaWdpbmFsT3B0aW9uczpiLHN0YXJ0VGltZTpsMnx8czIoKSxkdXJhdGlvbjpiLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbihfLHIzKXt2YXIgczM9US5Ud2VlbihhLG4ub3B0cyxfLHIzLG4ub3B0cy5zcGVjaWFsRWFzaW5nW19dfHxuLm9wdHMuZWFzaW5nKTtuLnR3ZWVucy5wdXNoKHMzKTtyZXR1cm4gczN9LHN0b3A6ZnVuY3Rpb24oXyl7dmFyIGo9MCxsPV8/bi50d2VlbnMubGVuZ3RoOjA7aWYocyl7cmV0dXJuIHRoaXN9cz10cnVlO2Zvcig7ajxsO2orKyl7bi50d2VlbnNbal0ucnVuKDEpfWlmKF8pe20ucmVzb2x2ZVdpdGgoYSxbbixfXSl9ZWxzZXttLnJlamVjdFdpdGgoYSxbbixfXSl9cmV0dXJuIHRoaXN9fSksdj1uLnByb3BzO3cyKHYsbi5vcHRzLnNwZWNpYWxFYXNpbmcpO2Zvcig7ajxsO2orKyl7cj1xMltqXS5jYWxsKG4sYSx2LG4ub3B0cyk7aWYocil7cmV0dXJuIHJ9fVEubWFwKHYsdTIsbik7aWYoUS5pc0Z1bmN0aW9uKG4ub3B0cy5zdGFydCkpe24ub3B0cy5zdGFydC5jYWxsKGEsbil9US5meC50aW1lcihRLmV4dGVuZCh0LHtlbGVtOmEsYW5pbTpuLHF1ZXVlOm4ub3B0cy5xdWV1ZX0pKTtyZXR1cm4gbi5wcm9ncmVzcyhuLm9wdHMucHJvZ3Jlc3MpLmRvbmUobi5vcHRzLmRvbmUsbi5vcHRzLmNvbXBsZXRlKS5mYWlsKG4ub3B0cy5mYWlsKS5hbHdheXMobi5vcHRzLmFsd2F5cyl9US5BbmltYXRpb249US5leHRlbmQoeDIse3R3ZWVuZXI6ZnVuY3Rpb24ocCxhKXtpZihRLmlzRnVuY3Rpb24ocCkpe2E9cDtwPVsiKiJdfWVsc2V7cD1wLnNwbGl0KCIgIil9dmFyIGIsaj0wLGw9cC5sZW5ndGg7Zm9yKDtqPGw7aisrKXtiPXBbal07cjJbYl09cjJbYl18fFtdO3IyW2JdLnVuc2hpZnQoYSl9fSxwcmVmaWx0ZXI6ZnVuY3Rpb24oYSxwKXtpZihwKXtxMi51bnNoaWZ0KGEpfWVsc2V7cTIucHVzaChhKX19fSk7US5zcGVlZD1mdW5jdGlvbihzLGEsYil7dmFyIGo9cyYmdHlwZW9mIHM9PT0ib2JqZWN0Ij9RLmV4dGVuZCh7fSxzKTp7Y29tcGxldGU6Ynx8IWImJmF8fFEuaXNGdW5jdGlvbihzKSYmcyxkdXJhdGlvbjpzLGVhc2luZzpiJiZhfHxhJiYhUS5pc0Z1bmN0aW9uKGEpJiZhfTtqLmR1cmF0aW9uPVEuZngub2ZmPzA6dHlwZW9mIGouZHVyYXRpb249PT0ibnVtYmVyIj9qLmR1cmF0aW9uOmouZHVyYXRpb24gaW4gUS5meC5zcGVlZHM/US5meC5zcGVlZHNbai5kdXJhdGlvbl06US5meC5zcGVlZHMuX2RlZmF1bHQ7aWYoai5xdWV1ZT09bnVsbHx8ai5xdWV1ZT09PXRydWUpe2oucXVldWU9ImZ4In1qLm9sZD1qLmNvbXBsZXRlO2ouY29tcGxldGU9ZnVuY3Rpb24oKXtpZihRLmlzRnVuY3Rpb24oai5vbGQpKXtqLm9sZC5jYWxsKHRoaXMpfWlmKGoucXVldWUpe1EuZGVxdWV1ZSh0aGlzLGoucXVldWUpfX07cmV0dXJuIGp9O1EuZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24ocyx0LGEsYil7cmV0dXJuIHRoaXMuZmlsdGVyKGYxKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LHMsYSxiKX0sYW5pbWF0ZTpmdW5jdGlvbihwLHMsYSxiKXt2YXIgaj1RLmlzRW1wdHlPYmplY3QocCksbD1RLnNwZWVkKHMsYSxiKSxtPWZ1bmN0aW9uKCl7dmFyIG49eDIodGhpcyxRLmV4dGVuZCh7fSxwKSxsKTtpZihqfHxRLl9kYXRhKHRoaXMsImZpbmlzaCIpKXtuLnN0b3AodHJ1ZSl9fTttLmZpbmlzaD1tO3JldHVybiBqfHxsLnF1ZXVlPT09ZmFsc2U/dGhpcy5lYWNoKG0pOnRoaXMucXVldWUobC5xdWV1ZSxtKX0sc3RvcDpmdW5jdGlvbih0LGEsYil7dmFyIHM9ZnVuY3Rpb24oail7dmFyIGw9ai5zdG9wO2RlbGV0ZSBqLnN0b3A7bChiKX07aWYodHlwZW9mIHQhPT0ic3RyaW5nIil7Yj1hO2E9dDt0PXVuZGVmaW5lZH1pZihhJiZ0IT09ZmFsc2Upe3RoaXMucXVldWUodHx8ImZ4IixbXSl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBqPXRydWUsbD10IT1udWxsJiZ0KyJxdWV1ZUhvb2tzIixtPVEudGltZXJzLG49US5fZGF0YSh0aGlzKTtpZihsKXtpZihuW2xdJiZuW2xdLnN0b3Ape3MobltsXSl9fWVsc2V7Zm9yKGwgaW4gbil7aWYobltsXSYmbltsXS5zdG9wJiZwMi50ZXN0KGwpKXtzKG5bbF0pfX19Zm9yKGw9bS5sZW5ndGg7bC0tOyl7aWYobVtsXS5lbGVtPT09dGhpcyYmKHQ9PW51bGx8fG1bbF0ucXVldWU9PT10KSl7bVtsXS5hbmltLnN0b3AoYik7aj1mYWxzZTttLnNwbGljZShsLDEpfX1pZihqfHwhYil7US5kZXF1ZXVlKHRoaXMsdCl9fSl9LGZpbmlzaDpmdW5jdGlvbih0KXtpZih0IT09ZmFsc2Upe3Q9dHx8ImZ4In1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGEsYj1RLl9kYXRhKHRoaXMpLGo9Ylt0KyJxdWV1ZSJdLGw9Ylt0KyJxdWV1ZUhvb2tzIl0sbT1RLnRpbWVycyxuPWo/ai5sZW5ndGg6MDtiLmZpbmlzaD10cnVlO1EucXVldWUodGhpcyx0LFtdKTtpZihsJiZsLnN0b3Ape2wuc3RvcC5jYWxsKHRoaXMsdHJ1ZSl9Zm9yKGE9bS5sZW5ndGg7YS0tOyl7aWYobVthXS5lbGVtPT09dGhpcyYmbVthXS5xdWV1ZT09PXQpe21bYV0uYW5pbS5zdG9wKHRydWUpO20uc3BsaWNlKGEsMSl9fWZvcihhPTA7YTxuO2ErKyl7aWYoalthXSYmalthXS5maW5pc2gpe2pbYV0uZmluaXNoLmNhbGwodGhpcyl9fWRlbGV0ZSBiLmZpbmlzaH0pfX0pO1EuZWFjaChbInRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oaSxuKXt2YXIgYT1RLmZuW25dO1EuZm5bbl09ZnVuY3Rpb24ocyxiLGope3JldHVybiBzPT1udWxsfHx0eXBlb2Ygcz09PSJib29sZWFuIj9hLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUodDIobix0cnVlKSxzLGIsail9fSk7US5lYWNoKHtzbGlkZURvd246dDIoInNob3ciKSxzbGlkZVVwOnQyKCJoaWRlIiksc2xpZGVUb2dnbGU6dDIoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24obixwKXtRLmZuW25dPWZ1bmN0aW9uKHMsYSxiKXtyZXR1cm4gdGhpcy5hbmltYXRlKHAscyxhLGIpfX0pO1EudGltZXJzPVtdO1EuZngudGljaz1mdW5jdGlvbigpe3ZhciB0LGE9US50aW1lcnMsaT0wO2wyPVEubm93KCk7Zm9yKDtpPGEubGVuZ3RoO2krKyl7dD1hW2ldO2lmKCF0KCkmJmFbaV09PT10KXthLnNwbGljZShpLS0sMSl9fWlmKCFhLmxlbmd0aCl7US5meC5zdG9wKCl9bDI9dW5kZWZpbmVkfTtRLmZ4LnRpbWVyPWZ1bmN0aW9uKHQpe1EudGltZXJzLnB1c2godCk7aWYodCgpKXtRLmZ4LnN0YXJ0KCl9ZWxzZXtRLnRpbWVycy5wb3AoKX19O1EuZnguaW50ZXJ2YWw9MTM7US5meC5zdGFydD1mdW5jdGlvbigpe2lmKCFtMil7bTI9c2V0SW50ZXJ2YWwoUS5meC50aWNrLFEuZnguaW50ZXJ2YWwpfX07US5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChtMik7bTI9bnVsbH07US5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH07US5mbi5kZWxheT1mdW5jdGlvbih0LGEpe3Q9US5meD9RLmZ4LnNwZWVkc1t0XXx8dDp0O2E9YXx8ImZ4IjtyZXR1cm4gdGhpcy5xdWV1ZShhLGZ1bmN0aW9uKG4sYil7dmFyIGo9c2V0VGltZW91dChuLHQpO2Iuc3RvcD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChqKX19KX07KGZ1bmN0aW9uKCl7dmFyIGIsaixzLGEsbDtqPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7ai5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsInQiKTtqLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IjthPWouZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXTtzPUouY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7bD1zLmFwcGVuZENoaWxkKEouY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO2I9ai5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXTthLnN0eWxlLmNzc1RleHQ9InRvcDoxcHgiO3guZ2V0U2V0QXR0cmlidXRlPWouY2xhc3NOYW1lIT09InQiO3guc3R5bGU9L3RvcC8udGVzdChhLmdldEF0dHJpYnV0ZSgic3R5bGUiKSk7eC5ocmVmTm9ybWFsaXplZD1hLmdldEF0dHJpYnV0ZSgiaHJlZiIpPT09Ii9hIjt4LmNoZWNrT249ISFiLnZhbHVlO3gub3B0U2VsZWN0ZWQ9bC5zZWxlY3RlZDt4LmVuY3R5cGU9ISFKLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlO3MuZGlzYWJsZWQ9dHJ1ZTt4Lm9wdERpc2FibGVkPSFsLmRpc2FibGVkO2I9Si5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Iuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIiIpO3guaW5wdXQ9Yi5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT0iIjtiLnZhbHVlPSJ0IjtiLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIik7eC5yYWRpb1ZhbHVlPWIudmFsdWU9PT0idCJ9KSgpO3ZhciB5Mj0vXHIvZztRLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKHYpe3ZhciBhLHIsYixqPXRoaXNbMF07aWYoIWFyZ3VtZW50cy5sZW5ndGgpe2lmKGope2E9US52YWxIb29rc1tqLnR5cGVdfHxRLnZhbEhvb2tzW2oubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07aWYoYSYmImdldCJpbiBhJiYocj1hLmdldChqLCJ2YWx1ZSIpKSE9PXVuZGVmaW5lZCl7cmV0dXJuIHJ9cj1qLnZhbHVlO3JldHVybiB0eXBlb2Ygcj09PSJzdHJpbmciP3IucmVwbGFjZSh5MiwiIik6cj09bnVsbD8iIjpyfXJldHVybn1iPVEuaXNGdW5jdGlvbih2KTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe3ZhciBsO2lmKHRoaXMubm9kZVR5cGUhPT0xKXtyZXR1cm59aWYoYil7bD12LmNhbGwodGhpcyxpLFEodGhpcykudmFsKCkpfWVsc2V7bD12fWlmKGw9PW51bGwpe2w9IiJ9ZWxzZSBpZih0eXBlb2YgbD09PSJudW1iZXIiKXtsKz0iIn1lbHNlIGlmKFEuaXNBcnJheShsKSl7bD1RLm1hcChsLGZ1bmN0aW9uKHYpe3JldHVybiB2PT1udWxsPyIiOnYrIiJ9KX1hPVEudmFsSG9va3NbdGhpcy50eXBlXXx8US52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO2lmKCFhfHwhKCJzZXQiaW4gYSl8fGEuc2V0KHRoaXMsbCwidmFsdWUiKT09PXVuZGVmaW5lZCl7dGhpcy52YWx1ZT1sfX0pfX0pO1EuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIHY9US5maW5kLmF0dHIoYSwidmFsdWUiKTtyZXR1cm4gdiE9bnVsbD92OlEudHJpbShRLnRleHQoYSkpfX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIHYsYixqPWEub3B0aW9ucyxsPWEuc2VsZWN0ZWRJbmRleCxtPWEudHlwZT09PSJzZWxlY3Qtb25lInx8bDwwLG49bT9udWxsOltdLHA9bT9sKzE6ai5sZW5ndGgsaT1sPDA/cDptP2w6MDtmb3IoO2k8cDtpKyspe2I9altpXTtpZigoYi5zZWxlY3RlZHx8aT09PWwpJiYoeC5vcHREaXNhYmxlZD8hYi5kaXNhYmxlZDpiLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKT09PW51bGwpJiYoIWIucGFyZW50Tm9kZS5kaXNhYmxlZHx8IVEubm9kZU5hbWUoYi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7dj1RKGIpLnZhbCgpO2lmKG0pe3JldHVybiB2fW4ucHVzaCh2KX19cmV0dXJuIG59LHNldDpmdW5jdGlvbihhLHYpe3ZhciBiLGosbD1hLm9wdGlvbnMsbT1RLm1ha2VBcnJheSh2KSxpPWwubGVuZ3RoO3doaWxlKGktLSl7aj1sW2ldO2lmKFEuaW5BcnJheShRLnZhbEhvb2tzLm9wdGlvbi5nZXQoaiksbSk+PTApe3RyeXtqLnNlbGVjdGVkPWI9dHJ1ZX1jYXRjaChfKXtqLnNjcm9sbEhlaWdodH19ZWxzZXtqLnNlbGVjdGVkPWZhbHNlfX1pZighYil7YS5zZWxlY3RlZEluZGV4PS0xfXJldHVybiBsfX19fSk7US5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7US52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsdil7aWYoUS5pc0FycmF5KHYpKXtyZXR1cm4oYS5jaGVja2VkPVEuaW5BcnJheShRKGEpLnZhbCgpLHYpPj0wKX19fTtpZigheC5jaGVja09uKXtRLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT1udWxsPyJvbiI6YS52YWx1ZX19fSk7dmFyIHoyLEEyLEIyPVEuZXhwci5hdHRySGFuZGxlLEMyPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2ksRDI9eC5nZXRTZXRBdHRyaWJ1dGUsRTI9eC5pbnB1dDtRLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihuLHYpe3JldHVybiBnMSh0aGlzLFEuYXR0cixuLHYsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5yZW1vdmVBdHRyKHRoaXMsbil9KX19KTtRLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLG4sdil7dmFyIGIscixqPWEubm9kZVR5cGU7aWYoIWF8fGo9PT0zfHxqPT09OHx8aj09PTIpe3JldHVybn1pZih0eXBlb2YgYS5nZXRBdHRyaWJ1dGU9PT1YKXtyZXR1cm4gUS5wcm9wKGEsbix2KX1pZihqIT09MXx8IVEuaXNYTUxEb2MoYSkpe249bi50b0xvd2VyQ2FzZSgpO2I9US5hdHRySG9va3Nbbl18fChRLmV4cHIubWF0Y2guYm9vbC50ZXN0KG4pP0EyOnoyKX1pZih2IT09dW5kZWZpbmVkKXtpZih2PT09bnVsbCl7US5yZW1vdmVBdHRyKGEsbil9ZWxzZSBpZihiJiYic2V0ImluIGImJihyPWIuc2V0KGEsdixuKSkhPT11bmRlZmluZWQpe3JldHVybiByfWVsc2V7YS5zZXRBdHRyaWJ1dGUobix2KyIiKTtyZXR1cm4gdn19ZWxzZSBpZihiJiYiZ2V0ImluIGImJihyPWIuZ2V0KGEsbikpIT09bnVsbCl7cmV0dXJuIHJ9ZWxzZXtyPVEuZmluZC5hdHRyKGEsbik7cmV0dXJuIHI9PW51bGw/dW5kZWZpbmVkOnJ9fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsdil7dmFyIG4scCxpPTAsYj12JiZ2Lm1hdGNoKFApO2lmKGImJmEubm9kZVR5cGU9PT0xKXt3aGlsZSgobj1iW2krK10pKXtwPVEucHJvcEZpeFtuXXx8bjtpZihRLmV4cHIubWF0Y2guYm9vbC50ZXN0KG4pKXtpZihFMiYmRDJ8fCFDMi50ZXN0KG4pKXthW3BdPWZhbHNlfWVsc2V7YVtRLmNhbWVsQ2FzZSgiZGVmYXVsdC0iK24pXT1hW3BdPWZhbHNlfX1lbHNle1EuYXR0cihhLG4sIiIpfWEucmVtb3ZlQXR0cmlidXRlKEQyP246cCl9fX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oYSx2KXtpZigheC5yYWRpb1ZhbHVlJiZ2PT09InJhZGlvIiYmUS5ub2RlTmFtZShhLCJpbnB1dCIpKXt2YXIgYj1hLnZhbHVlO2Euc2V0QXR0cmlidXRlKCJ0eXBlIix2KTtpZihiKXthLnZhbHVlPWJ9cmV0dXJuIHZ9fX19fSk7QTI9e3NldDpmdW5jdGlvbihhLHYsbil7aWYodj09PWZhbHNlKXtRLnJlbW92ZUF0dHIoYSxuKX1lbHNlIGlmKEUyJiZEMnx8IUMyLnRlc3Qobikpe2Euc2V0QXR0cmlidXRlKCFEMiYmUS5wcm9wRml4W25dfHxuLG4pfWVsc2V7YVtRLmNhbWVsQ2FzZSgiZGVmYXVsdC0iK24pXT1hW25dPXRydWV9cmV0dXJuIG59fTtRLmVhY2goUS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cdysvZyksZnVuY3Rpb24oaSxuKXt2YXIgYT1CMltuXXx8US5maW5kLmF0dHI7QjJbbl09RTImJkQyfHwhQzIudGVzdChuKT9mdW5jdGlvbihiLG4sail7dmFyIHIsbDtpZighail7bD1CMltuXTtCMltuXT1yO3I9YShiLG4saikhPW51bGw/bi50b0xvd2VyQ2FzZSgpOm51bGw7QjJbbl09bH1yZXR1cm4gcn06ZnVuY3Rpb24oYixuLGope2lmKCFqKXtyZXR1cm4gYltRLmNhbWVsQ2FzZSgiZGVmYXVsdC0iK24pXT9uLnRvTG93ZXJDYXNlKCk6bnVsbH19fSk7aWYoIUUyfHwhRDIpe1EuYXR0ckhvb2tzLnZhbHVlPXtzZXQ6ZnVuY3Rpb24oYSx2LG4pe2lmKFEubm9kZU5hbWUoYSwiaW5wdXQiKSl7YS5kZWZhdWx0VmFsdWU9dn1lbHNle3JldHVybiB6MiYmejIuc2V0KGEsdixuKX19fX1pZighRDIpe3oyPXtzZXQ6ZnVuY3Rpb24oYSx2LG4pe3ZhciByPWEuZ2V0QXR0cmlidXRlTm9kZShuKTtpZighcil7YS5zZXRBdHRyaWJ1dGVOb2RlKChyPWEub3duZXJEb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUobikpKX1yLnZhbHVlPXYrPSIiO2lmKG49PT0idmFsdWUifHx2PT09YS5nZXRBdHRyaWJ1dGUobikpe3JldHVybiB2fX19O0IyLmlkPUIyLm5hbWU9QjIuY29vcmRzPWZ1bmN0aW9uKGEsbixiKXt2YXIgcjtpZighYil7cmV0dXJuKHI9YS5nZXRBdHRyaWJ1dGVOb2RlKG4pKSYmci52YWx1ZSE9PSIiP3IudmFsdWU6bnVsbH19O1EudmFsSG9va3MuYnV0dG9uPXtnZXQ6ZnVuY3Rpb24oYSxuKXt2YXIgcj1hLmdldEF0dHJpYnV0ZU5vZGUobik7aWYociYmci5zcGVjaWZpZWQpe3JldHVybiByLnZhbHVlfX0sc2V0OnoyLnNldH07US5hdHRySG9va3MuY29udGVudGVkaXRhYmxlPXtzZXQ6ZnVuY3Rpb24oYSx2LG4pe3oyLnNldChhLHY9PT0iIj9mYWxzZTp2LG4pfX07US5lYWNoKFsid2lkdGgiLCJoZWlnaHQiXSxmdW5jdGlvbihpLG4pe1EuYXR0ckhvb2tzW25dPXtzZXQ6ZnVuY3Rpb24oYSx2KXtpZih2PT09IiIpe2Euc2V0QXR0cmlidXRlKG4sImF1dG8iKTtyZXR1cm4gdn19fX0pfWlmKCF4LnN0eWxlKXtRLmF0dHJIb29rcy5zdHlsZT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0eWxlLmNzc1RleHR8fHVuZGVmaW5lZH0sc2V0OmZ1bmN0aW9uKGEsdil7cmV0dXJuKGEuc3R5bGUuY3NzVGV4dD12KyIiKX19fXZhciBGMj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0KSQvaSxHMj0vXig/OmF8YXJlYSkkL2k7US5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24obix2KXtyZXR1cm4gZzEodGhpcyxRLnByb3Asbix2LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24obil7bj1RLnByb3BGaXhbbl18fG47cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW25dPXVuZGVmaW5lZDtkZWxldGUgdGhpc1tuXX1jYXRjaChlKXt9fSl9fSk7US5leHRlbmQoe3Byb3BGaXg6eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUifSxwcm9wOmZ1bmN0aW9uKGEsbix2KXt2YXIgcixiLGosbD1hLm5vZGVUeXBlO2lmKCFhfHxsPT09M3x8bD09PTh8fGw9PT0yKXtyZXR1cm59aj1sIT09MXx8IVEuaXNYTUxEb2MoYSk7aWYoail7bj1RLnByb3BGaXhbbl18fG47Yj1RLnByb3BIb29rc1tuXX1pZih2IT09dW5kZWZpbmVkKXtyZXR1cm4gYiYmInNldCJpbiBiJiYocj1iLnNldChhLHYsbikpIT09dW5kZWZpbmVkP3I6KGFbbl09dil9ZWxzZXtyZXR1cm4gYiYmImdldCJpbiBiJiYocj1iLmdldChhLG4pKSE9PW51bGw/cjphW25dfX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciB0PVEuZmluZC5hdHRyKGEsInRhYmluZGV4Iik7cmV0dXJuIHQ/cGFyc2VJbnQodCwxMCk6RjIudGVzdChhLm5vZGVOYW1lKXx8RzIudGVzdChhLm5vZGVOYW1lKSYmYS5ocmVmPzA6LTF9fX19KTtpZigheC5ocmVmTm9ybWFsaXplZCl7US5lYWNoKFsiaHJlZiIsInNyYyJdLGZ1bmN0aW9uKGksbil7US5wcm9wSG9va3Nbbl09e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUobiw0KX19fSl9aWYoIXgub3B0U2VsZWN0ZWQpe1EucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oYSl7dmFyIHA9YS5wYXJlbnROb2RlO2lmKHApe3Auc2VsZWN0ZWRJbmRleDtpZihwLnBhcmVudE5vZGUpe3AucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4fX1yZXR1cm4gbnVsbH19fVEuZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7US5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO2lmKCF4LmVuY3R5cGUpe1EucHJvcEZpeC5lbmN0eXBlPSJlbmNvZGluZyJ9dmFyIEgyPS9bXHRcclxuXGZdL2c7US5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKHYpe3ZhciBhLGIsbCxtLGosbixpPTAscD10aGlzLmxlbmd0aCxyPXR5cGVvZiB2PT09InN0cmluZyImJnY7aWYoUS5pc0Z1bmN0aW9uKHYpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope1EodGhpcykuYWRkQ2xhc3Modi5jYWxsKHRoaXMsaix0aGlzLmNsYXNzTmFtZSkpfSl9aWYocil7YT0odnx8IiIpLm1hdGNoKFApfHxbXTtmb3IoO2k8cDtpKyspe2I9dGhpc1tpXTtsPWIubm9kZVR5cGU9PT0xJiYoYi5jbGFzc05hbWU/KCIgIitiLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoSDIsIiAiKToiICIpO2lmKGwpe2o9MDt3aGlsZSgobT1hW2orK10pKXtpZihsLmluZGV4T2YoIiAiK20rIiAiKTwwKXtsKz1tKyIgIn19bj1RLnRyaW0obCk7aWYoYi5jbGFzc05hbWUhPT1uKXtiLmNsYXNzTmFtZT1ufX19fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbih2KXt2YXIgYSxiLGwsbSxqLG4saT0wLHA9dGhpcy5sZW5ndGgscj1hcmd1bWVudHMubGVuZ3RoPT09MHx8dHlwZW9mIHY9PT0ic3RyaW5nIiYmdjtpZihRLmlzRnVuY3Rpb24odikpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oail7USh0aGlzKS5yZW1vdmVDbGFzcyh2LmNhbGwodGhpcyxqLHRoaXMuY2xhc3NOYW1lKSl9KX1pZihyKXthPSh2fHwiIikubWF0Y2goUCl8fFtdO2Zvcig7aTxwO2krKyl7Yj10aGlzW2ldO2w9Yi5ub2RlVHlwZT09PTEmJihiLmNsYXNzTmFtZT8oIiAiK2IuY2xhc3NOYW1lKyIgIikucmVwbGFjZShIMiwiICIpOiIiKTtpZihsKXtqPTA7d2hpbGUoKG09YVtqKytdKSl7d2hpbGUobC5pbmRleE9mKCIgIittKyIgIik+PTApe2w9bC5yZXBsYWNlKCIgIittKyIgIiwiICIpfX1uPXY/US50cmltKGwpOiIiO2lmKGIuY2xhc3NOYW1lIT09bil7Yi5jbGFzc05hbWU9bn19fX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24odixzKXt2YXIgdD10eXBlb2YgdjtpZih0eXBlb2Ygcz09PSJib29sZWFuIiYmdD09PSJzdHJpbmciKXtyZXR1cm4gcz90aGlzLmFkZENsYXNzKHYpOnRoaXMucmVtb3ZlQ2xhc3Modil9aWYoUS5pc0Z1bmN0aW9uKHYpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe1EodGhpcykudG9nZ2xlQ2xhc3Modi5jYWxsKHRoaXMsaSx0aGlzLmNsYXNzTmFtZSxzKSxzKX0pfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZih0PT09InN0cmluZyIpe3ZhciBhLGk9MCxiPVEodGhpcyksaj12Lm1hdGNoKFApfHxbXTt3aGlsZSgoYT1qW2krK10pKXtpZihiLmhhc0NsYXNzKGEpKXtiLnJlbW92ZUNsYXNzKGEpfWVsc2V7Yi5hZGRDbGFzcyhhKX19fWVsc2UgaWYodD09PVh8fHQ9PT0iYm9vbGVhbiIpe2lmKHRoaXMuY2xhc3NOYW1lKXtRLl9kYXRhKHRoaXMsIl9fY2xhc3NOYW1lX18iLHRoaXMuY2xhc3NOYW1lKX10aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZXx8dj09PWZhbHNlPyIiOlEuX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIn19KX0saGFzQ2xhc3M6ZnVuY3Rpb24ocyl7dmFyIGE9IiAiK3MrIiAiLGk9MCxsPXRoaXMubGVuZ3RoO2Zvcig7aTxsO2krKyl7aWYodGhpc1tpXS5ub2RlVHlwZT09PTEmJigiICIrdGhpc1tpXS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKEgyLCIgIikuaW5kZXhPZihhKT49MCl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX19KTtRLmVhY2goKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayAiKyJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSAiKyJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51Iikuc3BsaXQoIiAiKSxmdW5jdGlvbihpLG4pe1EuZm5bbl09ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24obixudWxsLGEsYik6dGhpcy50cmlnZ2VyKG4pfX0pO1EuZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX0sYmluZDpmdW5jdGlvbih0LGEsYil7cmV0dXJuIHRoaXMub24odCxudWxsLGEsYil9LHVuYmluZDpmdW5jdGlvbih0LGEpe3JldHVybiB0aGlzLm9mZih0LG51bGwsYSl9LGRlbGVnYXRlOmZ1bmN0aW9uKHMsdCxhLGIpe3JldHVybiB0aGlzLm9uKHQscyxhLGIpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKHMsdCxhKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD09PTE/dGhpcy5vZmYocywiKioiKTp0aGlzLm9mZih0LHN8fCIqKiIsYSl9fSk7dmFyIEkyPVEubm93KCk7dmFyIEoyPSgvXD8vKTt2YXIgSzI9LygsKXwoXFt8eyl8KH18XSl8Iig/OlteIlxcXHJcbl18XFxbIlxcXC9iZm5ydF18XFx1W1xkYS1mQS1GXXs0fSkqIlxzKjo/fHRydWV8ZmFsc2V8bnVsbHwtPyg/ITBcZClcZCsoPzpcLlxkK3wpKD86W2VFXVsrLV0/XGQrfCkvZztRLnBhcnNlSlNPTj1mdW5jdGlvbihhKXtpZih3LkpTT04mJncuSlNPTi5wYXJzZSl7cmV0dXJuIHcuSlNPTi5wYXJzZShhKyIiKX12YXIgcixiPW51bGwscz1RLnRyaW0oYSsiIik7cmV0dXJuIHMmJiFRLnRyaW0ocy5yZXBsYWNlKEsyLGZ1bmN0aW9uKHQsaixsLG0pe2lmKHImJmope2I9MH1pZihiPT09MCl7cmV0dXJuIHR9cj1sfHxqO2IrPSFtLSFsO3JldHVybiIifSkpPyhGdW5jdGlvbigicmV0dXJuICIrcykpKCk6US5lcnJvcigiSW52YWxpZCBKU09OOiAiK2EpfTtRLnBhcnNlWE1MPWZ1bmN0aW9uKGEpe3ZhciBiLHQ7aWYoIWF8fHR5cGVvZiBhIT09InN0cmluZyIpe3JldHVybiBudWxsfXRyeXtpZih3LkRPTVBhcnNlcil7dD1uZXcgRE9NUGFyc2VyKCk7Yj10LnBhcnNlRnJvbVN0cmluZyhhLCJ0ZXh0L3htbCIpfWVsc2V7Yj1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpO2IuYXN5bmM9ImZhbHNlIjtiLmxvYWRYTUwoYSl9fWNhdGNoKGUpe2I9dW5kZWZpbmVkfWlmKCFifHwhYi5kb2N1bWVudEVsZW1lbnR8fGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKXtRLmVycm9yKCJJbnZhbGlkIFhNTDogIithKX1yZXR1cm4gYn07dmFyIEwyLE0yLE4yPS8jLiokLyxPMj0vKFs/Jl0pXz1bXiZdKi8sUDI9L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9tZyxRMj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxSMj0vXig/OkdFVHxIRUFEKSQvLFMyPS9eXC9cLy8sVDI9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sVTI9e30sVjI9e30sVzI9IiovIi5jb25jYXQoIioiKTt0cnl7TTI9bG9jYXRpb24uaHJlZn1jYXRjaChlKXtNMj1KLmNyZWF0ZUVsZW1lbnQoImEiKTtNMi5ocmVmPSIiO00yPU0yLmhyZWZ9TDI9VDIuZXhlYyhNMi50b0xvd2VyQ2FzZSgpKXx8W107ZnVuY3Rpb24gWDIocyl7cmV0dXJuIGZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGEhPT0ic3RyaW5nIil7Yj1hO2E9IioifXZhciBqLGk9MCxsPWEudG9Mb3dlckNhc2UoKS5tYXRjaChQKXx8W107aWYoUS5pc0Z1bmN0aW9uKGIpKXt3aGlsZSgoaj1sW2krK10pKXtpZihqLmNoYXJBdCgwKT09PSIrIil7aj1qLnNsaWNlKDEpfHwiKiI7KHNbal09c1tqXXx8W10pLnVuc2hpZnQoYil9ZWxzZXsoc1tqXT1zW2pdfHxbXSkucHVzaChiKX19fX19ZnVuY3Rpb24gWTIocyxhLGIsail7dmFyIGw9e30sbT0ocz09PVYyKTtmdW5jdGlvbiBuKHApe3ZhciByO2xbcF09dHJ1ZTtRLmVhY2goc1twXXx8W10sZnVuY3Rpb24oXyx0KXt2YXIgdj10KGEsYixqKTtpZih0eXBlb2Ygdj09PSJzdHJpbmciJiYhbSYmIWxbdl0pe2EuZGF0YVR5cGVzLnVuc2hpZnQodik7bih2KTtyZXR1cm4gZmFsc2V9ZWxzZSBpZihtKXtyZXR1cm4hKHI9dil9fSk7cmV0dXJuIHJ9cmV0dXJuIG4oYS5kYXRhVHlwZXNbMF0pfHwhbFsiKiJdJiZuKCIqIil9ZnVuY3Rpb24gWjIodCxzKXt2YXIgYSxiLGo9US5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihiIGluIHMpe2lmKHNbYl0hPT11bmRlZmluZWQpeyhqW2JdP3Q6KGF8fChhPXt9KSkpW2JdPXNbYl19fWlmKGEpe1EuZXh0ZW5kKHRydWUsdCxhKX1yZXR1cm4gdH1mdW5jdGlvbiAkMihzLGoscil7dmFyIGEsYixsLHQsbT1zLmNvbnRlbnRzLG49cy5kYXRhVHlwZXM7d2hpbGUoblswXT09PSIqIil7bi5zaGlmdCgpO2lmKGI9PT11bmRlZmluZWQpe2I9cy5taW1lVHlwZXx8ai5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIil9fWlmKGIpe2Zvcih0IGluIG0pe2lmKG1bdF0mJm1bdF0udGVzdChiKSl7bi51bnNoaWZ0KHQpO2JyZWFrfX19aWYoblswXWluIHIpe2w9blswXX1lbHNle2Zvcih0IGluIHIpe2lmKCFuWzBdfHxzLmNvbnZlcnRlcnNbdCsiICIrblswXV0pe2w9dDticmVha31pZighYSl7YT10fX1sPWx8fGF9aWYobCl7aWYobCE9PW5bMF0pe24udW5zaGlmdChsKX1yZXR1cm4gcltsXX19ZnVuY3Rpb24gXzIocyxyLGosYSl7dmFyIGIsbCxtLHQscCxuPXt9LHY9cy5kYXRhVHlwZXMuc2xpY2UoKTtpZih2WzFdKXtmb3IobSBpbiBzLmNvbnZlcnRlcnMpe25bbS50b0xvd2VyQ2FzZSgpXT1zLmNvbnZlcnRlcnNbbV19fWw9di5zaGlmdCgpO3doaWxlKGwpe2lmKHMucmVzcG9uc2VGaWVsZHNbbF0pe2pbcy5yZXNwb25zZUZpZWxkc1tsXV09cn1pZighcCYmYSYmcy5kYXRhRmlsdGVyKXtyPXMuZGF0YUZpbHRlcihyLHMuZGF0YVR5cGUpfXA9bDtsPXYuc2hpZnQoKTtpZihsKXtpZihsPT09IioiKXtsPXB9ZWxzZSBpZihwIT09IioiJiZwIT09bCl7bT1uW3ArIiAiK2xdfHxuWyIqICIrbF07aWYoIW0pe2ZvcihiIGluIG4pe3Q9Yi5zcGxpdCgiICIpO2lmKHRbMV09PT1sKXttPW5bcCsiICIrdFswXV18fG5bIiogIit0WzBdXTtpZihtKXtpZihtPT09dHJ1ZSl7bT1uW2JdfWVsc2UgaWYobltiXSE9PXRydWUpe2w9dFswXTt2LnVuc2hpZnQodFsxXSl9YnJlYWt9fX19aWYobSE9PXRydWUpe2lmKG0mJnNbInRocm93cyJdKXtyPW0ocil9ZWxzZXt0cnl7cj1tKHIpfWNhdGNoKGUpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOm0/ZToiTm8gY29udmVyc2lvbiBmcm9tICIrcCsiIHRvICIrbH19fX19fX1yZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6cn19US5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOk0yLHR5cGU6IkdFVCIsaXNMb2NhbDpRMi50ZXN0KEwyWzFdKSxnbG9iYWw6dHJ1ZSxwcm9jZXNzRGF0YTp0cnVlLGFzeW5jOnRydWUsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOlcyLHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi94bWwvLGh0bWw6L2h0bWwvLGpzb246L2pzb24vfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6dHJ1ZSwidGV4dCBqc29uIjpRLnBhcnNlSlNPTiwidGV4dCB4bWwiOlEucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6dHJ1ZSxjb250ZXh0OnRydWV9fSxhamF4U2V0dXA6ZnVuY3Rpb24odCxzKXtyZXR1cm4gcz9aMihaMih0LFEuYWpheFNldHRpbmdzKSxzKTpaMihRLmFqYXhTZXR0aW5ncyx0KX0sYWpheFByZWZpbHRlcjpYMihVMiksYWpheFRyYW5zcG9ydDpYMihWMiksYWpheDpmdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBhPT09Im9iamVjdCIpe2I9YTthPXVuZGVmaW5lZH1iPWJ8fHt9O3ZhciBwLGksaixyLHQsbCxtLG4scz1RLmFqYXhTZXR1cCh7fSxiKSx2PXMuY29udGV4dHx8cyxfPXMuY29udGV4dCYmKHYubm9kZVR5cGV8fHYuanF1ZXJ5KT9RKHYpOlEuZXZlbnQscjM9US5EZWZlcnJlZCgpLHMzPVEuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHQzPXMuc3RhdHVzQ29kZXx8e30sdTM9e30sdjM9e30sdzM9MCx4Mz0iY2FuY2VsZWQiLHkzPXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oQTMpe3ZhciBCMztpZih3Mz09PTIpe2lmKCFuKXtuPXt9O3doaWxlKChCMz1QMi5leGVjKHIpKSl7bltCM1sxXS50b0xvd2VyQ2FzZSgpXT1CM1syXX19QjM9bltBMy50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gQjM9PW51bGw/bnVsbDpCM30sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHczPT09Mj9yOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oQTMsQjMpe3ZhciBDMz1BMy50b0xvd2VyQ2FzZSgpO2lmKCF3Myl7QTM9djNbQzNdPXYzW0MzXXx8QTM7dTNbQTNdPUIzfXJldHVybiB0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKEEzKXtpZighdzMpe3MubWltZVR5cGU9QTN9cmV0dXJuIHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oQTMpe3ZhciBCMztpZihBMyl7aWYodzM8Mil7Zm9yKEIzIGluIEEzKXt0M1tCM109W3QzW0IzXSxBM1tCM11dfX1lbHNle3kzLmFsd2F5cyhBM1t5My5zdGF0dXNdKX19cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKEEzKXt2YXIgQjM9QTN8fHgzO2lmKG0pe20uYWJvcnQoQjMpfXozKDAsQjMpO3JldHVybiB0aGlzfX07cjMucHJvbWlzZSh5MykuY29tcGxldGU9czMuYWRkO3kzLnN1Y2Nlc3M9eTMuZG9uZTt5My5lcnJvcj15My5mYWlsO3MudXJsPSgoYXx8cy51cmx8fE0yKSsiIikucmVwbGFjZShOMiwiIikucmVwbGFjZShTMixMMlsxXSsiLy8iKTtzLnR5cGU9Yi5tZXRob2R8fGIudHlwZXx8cy5tZXRob2R8fHMudHlwZTtzLmRhdGFUeXBlcz1RLnRyaW0ocy5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKFApfHxbIiJdO2lmKHMuY3Jvc3NEb21haW49PW51bGwpe3A9VDIuZXhlYyhzLnVybC50b0xvd2VyQ2FzZSgpKTtzLmNyb3NzRG9tYWluPSEhKHAmJihwWzFdIT09TDJbMV18fHBbMl0hPT1MMlsyXXx8KHBbM118fChwWzFdPT09Imh0dHA6Ij8iODAiOiI0NDMiKSkhPT0oTDJbM118fChMMlsxXT09PSJodHRwOiI/IjgwIjoiNDQzIikpKSl9aWYocy5kYXRhJiZzLnByb2Nlc3NEYXRhJiZ0eXBlb2Ygcy5kYXRhIT09InN0cmluZyIpe3MuZGF0YT1RLnBhcmFtKHMuZGF0YSxzLnRyYWRpdGlvbmFsKX1ZMihVMixzLGIseTMpO2lmKHczPT09Mil7cmV0dXJuIHkzfWw9cy5nbG9iYWw7aWYobCYmUS5hY3RpdmUrKz09PTApe1EuZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iil9cy50eXBlPXMudHlwZS50b1VwcGVyQ2FzZSgpO3MuaGFzQ29udGVudD0hUjIudGVzdChzLnR5cGUpO2o9cy51cmw7aWYoIXMuaGFzQ29udGVudCl7aWYocy5kYXRhKXtqPShzLnVybCs9KEoyLnRlc3Qoaik/IiYiOiI/Iikrcy5kYXRhKTtkZWxldGUgcy5kYXRhfWlmKHMuY2FjaGU9PT1mYWxzZSl7cy51cmw9TzIudGVzdChqKT9qLnJlcGxhY2UoTzIsIiQxXz0iK0kyKyspOmorKEoyLnRlc3Qoaik/IiYiOiI/IikrIl89IitJMisrfX1pZihzLmlmTW9kaWZpZWQpe2lmKFEubGFzdE1vZGlmaWVkW2pdKXt5My5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsUS5sYXN0TW9kaWZpZWRbal0pfWlmKFEuZXRhZ1tqXSl7eTMuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsUS5ldGFnW2pdKX19aWYocy5kYXRhJiZzLmhhc0NvbnRlbnQmJnMuY29udGVudFR5cGUhPT1mYWxzZXx8Yi5jb250ZW50VHlwZSl7eTMuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixzLmNvbnRlbnRUeXBlKX15My5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLHMuZGF0YVR5cGVzWzBdJiZzLmFjY2VwdHNbcy5kYXRhVHlwZXNbMF1dP3MuYWNjZXB0c1tzLmRhdGFUeXBlc1swXV0rKHMuZGF0YVR5cGVzWzBdIT09IioiPyIsICIrVzIrIjsgcT0wLjAxIjoiIik6cy5hY2NlcHRzWyIqIl0pO2ZvcihpIGluIHMuaGVhZGVycyl7eTMuc2V0UmVxdWVzdEhlYWRlcihpLHMuaGVhZGVyc1tpXSl9aWYocy5iZWZvcmVTZW5kJiYocy5iZWZvcmVTZW5kLmNhbGwodix5MyxzKT09PWZhbHNlfHx3Mz09PTIpKXtyZXR1cm4geTMuYWJvcnQoKX14Mz0iYWJvcnQiO2ZvcihpIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KXt5M1tpXShzW2ldKX1tPVkyKFYyLHMsYix5Myk7aWYoIW0pe3ozKC0xLCJObyBUcmFuc3BvcnQiKX1lbHNle3kzLnJlYWR5U3RhdGU9MTtpZihsKXtfLnRyaWdnZXIoImFqYXhTZW5kIixbeTMsc10pfWlmKHMuYXN5bmMmJnMudGltZW91dD4wKXt0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXt5My5hYm9ydCgidGltZW91dCIpfSxzLnRpbWVvdXQpfXRyeXt3Mz0xO20uc2VuZCh1Myx6Myl9Y2F0Y2goZSl7aWYodzM8Mil7ejMoLTEsZSl9ZWxzZXt0aHJvdyBlfX19ZnVuY3Rpb24gejMoQTMsQjMsQzMsRDMpe3ZhciBFMyxGMyxHMyxIMyxJMyxKMz1CMztpZih3Mz09PTIpe3JldHVybn13Mz0yO2lmKHQpe2NsZWFyVGltZW91dCh0KX1tPXVuZGVmaW5lZDtyPUQzfHwiIjt5My5yZWFkeVN0YXRlPUEzPjA/NDowO0UzPUEzPj0yMDAmJkEzPDMwMHx8QTM9PT0zMDQ7aWYoQzMpe0gzPSQyKHMseTMsQzMpfUgzPV8yKHMsSDMseTMsRTMpO2lmKEUzKXtpZihzLmlmTW9kaWZpZWQpe0kzPXkzLmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIik7aWYoSTMpe1EubGFzdE1vZGlmaWVkW2pdPUkzfUkzPXkzLmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIik7aWYoSTMpe1EuZXRhZ1tqXT1JM319aWYoQTM9PT0yMDR8fHMudHlwZT09PSJIRUFEIil7SjM9Im5vY29udGVudCJ9ZWxzZSBpZihBMz09PTMwNCl7SjM9Im5vdG1vZGlmaWVkIn1lbHNle0ozPUgzLnN0YXRlO0YzPUgzLmRhdGE7RzM9SDMuZXJyb3I7RTM9IUczfX1lbHNle0czPUozO2lmKEEzfHwhSjMpe0ozPSJlcnJvciI7aWYoQTM8MCl7QTM9MH19fXkzLnN0YXR1cz1BMzt5My5zdGF0dXNUZXh0PShCM3x8SjMpKyIiO2lmKEUzKXtyMy5yZXNvbHZlV2l0aCh2LFtGMyxKMyx5M10pfWVsc2V7cjMucmVqZWN0V2l0aCh2LFt5MyxKMyxHM10pfXkzLnN0YXR1c0NvZGUodDMpO3QzPXVuZGVmaW5lZDtpZihsKXtfLnRyaWdnZXIoRTM/ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbeTMscyxFMz9GMzpHM10pfXMzLmZpcmVXaXRoKHYsW3kzLEozXSk7aWYobCl7Xy50cmlnZ2VyKCJhamF4Q29tcGxldGUiLFt5MyxzXSk7aWYoISgtLVEuYWN0aXZlKSl7US5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpfX19cmV0dXJuIHkzfSxnZXRKU09OOmZ1bmN0aW9uKGEsYixqKXtyZXR1cm4gUS5nZXQoYSxiLGosImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIFEuZ2V0KGEsdW5kZWZpbmVkLGIsInNjcmlwdCIpfX0pO1EuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihpLG0pe1FbbV09ZnVuY3Rpb24oYSxiLGosdCl7aWYoUS5pc0Z1bmN0aW9uKGIpKXt0PXR8fGo7aj1iO2I9dW5kZWZpbmVkfXJldHVybiBRLmFqYXgoe3VybDphLHR5cGU6bSxkYXRhVHlwZTp0LGRhdGE6YixzdWNjZXNzOmp9KX19KTtRLmVhY2goWyJhamF4U3RhcnQiLCJhamF4U3RvcCIsImFqYXhDb21wbGV0ZSIsImFqYXhFcnJvciIsImFqYXhTdWNjZXNzIiwiYWpheFNlbmQiXSxmdW5jdGlvbihpLHQpe1EuZm5bdF09ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub24odCxhKX19KTtRLl9ldmFsVXJsPWZ1bmN0aW9uKGEpe3JldHVybiBRLmFqYXgoe3VybDphLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNjcmlwdCIsYXN5bmM6ZmFsc2UsZ2xvYmFsOmZhbHNlLCJ0aHJvd3MiOnRydWV9KX07US5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oYSl7aWYoUS5pc0Z1bmN0aW9uKGEpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe1EodGhpcykud3JhcEFsbChhLmNhbGwodGhpcyxpKSl9KX1pZih0aGlzWzBdKXt2YXIgYj1RKGEsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSh0cnVlKTtpZih0aGlzWzBdLnBhcmVudE5vZGUpe2IuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pfWIubWFwKGZ1bmN0aW9uKCl7dmFyIGo9dGhpczt3aGlsZShqLmZpcnN0Q2hpbGQmJmouZmlyc3RDaGlsZC5ub2RlVHlwZT09PTEpe2o9ai5maXJzdENoaWxkfXJldHVybiBqfSkuYXBwZW5kKHRoaXMpfXJldHVybiB0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oYSl7aWYoUS5pc0Z1bmN0aW9uKGEpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe1EodGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGkpKX0pfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgcz1RKHRoaXMpLGI9cy5jb250ZW50cygpO2lmKGIubGVuZ3RoKXtiLndyYXBBbGwoYSl9ZWxzZXtzLmFwcGVuZChhKX19KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1RLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXtRKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxpKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7aWYoIVEubm9kZU5hbWUodGhpcywiYm9keSIpKXtRKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9fSkuZW5kKCl9fSk7US5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBhLm9mZnNldFdpZHRoPD0wJiZhLm9mZnNldEhlaWdodDw9MHx8KCF4LnJlbGlhYmxlSGlkZGVuT2Zmc2V0cygpJiYoKGEuc3R5bGUmJmEuc3R5bGUuZGlzcGxheSl8fFEuY3NzKGEsImRpc3BsYXkiKSk9PT0ibm9uZSIpfTtRLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFRLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9O3ZhciBhMz0vJTIwL2csYjM9L1xbXF0kLyxjMz0vXHI/XG4vZyxkMz0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksZTM9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIGYzKHAsYSx0LGIpe3ZhciBuO2lmKFEuaXNBcnJheShhKSl7US5lYWNoKGEsZnVuY3Rpb24oaSx2KXtpZih0fHxiMy50ZXN0KHApKXtiKHAsdil9ZWxzZXtmMyhwKyJbIisodHlwZW9mIHY9PT0ib2JqZWN0Ij9pOiIiKSsiXSIsdix0LGIpfX0pfWVsc2UgaWYoIXQmJlEudHlwZShhKT09PSJvYmplY3QiKXtmb3IobiBpbiBhKXtmMyhwKyJbIituKyJdIixhW25dLHQsYil9fWVsc2V7YihwLGEpfX1RLnBhcmFtPWZ1bmN0aW9uKGEsdCl7dmFyIHAscz1bXSxiPWZ1bmN0aW9uKGosdil7dj1RLmlzRnVuY3Rpb24odik/digpOih2PT1udWxsPyIiOnYpO3Nbcy5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChqKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHYpfTtpZih0PT09dW5kZWZpbmVkKXt0PVEuYWpheFNldHRpbmdzJiZRLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbH1pZihRLmlzQXJyYXkoYSl8fChhLmpxdWVyeSYmIVEuaXNQbGFpbk9iamVjdChhKSkpe1EuZWFjaChhLGZ1bmN0aW9uKCl7Yih0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KX1lbHNle2ZvcihwIGluIGEpe2YzKHAsYVtwXSx0LGIpfX1yZXR1cm4gcy5qb2luKCImIikucmVwbGFjZShhMywiKyIpfTtRLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIFEucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1RLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gYT9RLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFRKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmZTMudGVzdCh0aGlzLm5vZGVOYW1lKSYmIWQzLnRlc3QodCkmJih0aGlzLmNoZWNrZWR8fCFoMS50ZXN0KHQpKX0pLm1hcChmdW5jdGlvbihpLGEpe3ZhciB2PVEodGhpcykudmFsKCk7cmV0dXJuIHY9PW51bGw/bnVsbDpRLmlzQXJyYXkodik/US5tYXAodixmdW5jdGlvbih2KXtyZXR1cm57bmFtZTphLm5hbWUsdmFsdWU6di5yZXBsYWNlKGMzLCJcclxuIil9fSk6e25hbWU6YS5uYW1lLHZhbHVlOnYucmVwbGFjZShjMywiXHJcbiIpfX0pLmdldCgpfX0pO1EuYWpheFNldHRpbmdzLnhocj13LkFjdGl2ZVhPYmplY3QhPT11bmRlZmluZWQ/ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0xvY2FsJiYvXihnZXR8cG9zdHxoZWFkfHB1dHxkZWxldGV8b3B0aW9ucykkL2kudGVzdCh0aGlzLnR5cGUpJiZqMygpfHxrMygpfTpqMzt2YXIgZzM9MCxoMz17fSxpMz1RLmFqYXhTZXR0aW5ncy54aHIoKTtpZih3LkFjdGl2ZVhPYmplY3Qpe1Eodykub24oInVubG9hZCIsZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gaDMpe2gzW2FdKHVuZGVmaW5lZCx0cnVlKX19KX14LmNvcnM9ISFpMyYmKCJ3aXRoQ3JlZGVudGlhbHMiaW4gaTMpO2kzPXguYWpheD0hIWkzO2lmKGkzKXtRLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oYSl7aWYoIWEuY3Jvc3NEb21haW58fHguY29ycyl7dmFyIGI7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oaixsKXt2YXIgaSxtPWEueGhyKCksbj0rK2czO20ub3BlbihhLnR5cGUsYS51cmwsYS5hc3luYyxhLnVzZXJuYW1lLGEucGFzc3dvcmQpO2lmKGEueGhyRmllbGRzKXtmb3IoaSBpbiBhLnhockZpZWxkcyl7bVtpXT1hLnhockZpZWxkc1tpXX19aWYoYS5taW1lVHlwZSYmbS5vdmVycmlkZU1pbWVUeXBlKXttLm92ZXJyaWRlTWltZVR5cGUoYS5taW1lVHlwZSl9aWYoIWEuY3Jvc3NEb21haW4mJiFqWyJYLVJlcXVlc3RlZC1XaXRoIl0pe2pbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QifWZvcihpIGluIGope2lmKGpbaV0hPT11bmRlZmluZWQpe20uc2V0UmVxdWVzdEhlYWRlcihpLGpbaV0rIiIpfX1tLnNlbmQoKGEuaGFzQ29udGVudCYmYS5kYXRhKXx8bnVsbCk7Yj1mdW5jdGlvbihfLHApe3ZhciBzLHIsdDtpZihiJiYocHx8bS5yZWFkeVN0YXRlPT09NCkpe2RlbGV0ZSBoM1tuXTtiPXVuZGVmaW5lZDttLm9ucmVhZHlzdGF0ZWNoYW5nZT1RLm5vb3A7aWYocCl7aWYobS5yZWFkeVN0YXRlIT09NCl7bS5hYm9ydCgpfX1lbHNle3Q9e307cz1tLnN0YXR1cztpZih0eXBlb2YgbS5yZXNwb25zZVRleHQ9PT0ic3RyaW5nIil7dC50ZXh0PW0ucmVzcG9uc2VUZXh0fXRyeXtyPW0uc3RhdHVzVGV4dH1jYXRjaChlKXtyPSIifWlmKCFzJiZhLmlzTG9jYWwmJiFhLmNyb3NzRG9tYWluKXtzPXQudGV4dD8yMDA6NDA0fWVsc2UgaWYocz09PTEyMjMpe3M9MjA0fX19aWYodCl7bChzLHIsdCxtLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX19O2lmKCFhLmFzeW5jKXtiKCl9ZWxzZSBpZihtLnJlYWR5U3RhdGU9PT00KXtzZXRUaW1lb3V0KGIpfWVsc2V7bS5vbnJlYWR5c3RhdGVjaGFuZ2U9aDNbbl09Yn19LGFib3J0OmZ1bmN0aW9uKCl7aWYoYil7Yih1bmRlZmluZWQsdHJ1ZSl9fX19fSl9ZnVuY3Rpb24gajMoKXt0cnl7cmV0dXJuIG5ldyB3LlhNTEh0dHBSZXF1ZXN0KCl9Y2F0Y2goZSl7fX1mdW5jdGlvbiBrMygpe3RyeXtyZXR1cm4gbmV3IHcuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaChlKXt9fVEuYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovKD86amF2YXxlY21hKXNjcmlwdC99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24odCl7US5nbG9iYWxFdmFsKHQpO3JldHVybiB0fX19KTtRLmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24ocyl7aWYocy5jYWNoZT09PXVuZGVmaW5lZCl7cy5jYWNoZT1mYWxzZX1pZihzLmNyb3NzRG9tYWluKXtzLnR5cGU9IkdFVCI7cy5nbG9iYWw9ZmFsc2V9fSk7US5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKHMpe2lmKHMuY3Jvc3NEb21haW4pe3ZhciBhLGI9Si5oZWFkfHxRKCJoZWFkIilbMF18fEouZG9jdW1lbnRFbGVtZW50O3JldHVybntzZW5kOmZ1bmN0aW9uKF8sail7YT1KLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2EuYXN5bmM9dHJ1ZTtpZihzLnNjcmlwdENoYXJzZXQpe2EuY2hhcnNldD1zLnNjcmlwdENoYXJzZXR9YS5zcmM9cy51cmw7YS5vbmxvYWQ9YS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oXyxsKXtpZihsfHwhYS5yZWFkeVN0YXRlfHwvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KGEucmVhZHlTdGF0ZSkpe2Eub25sb2FkPWEub25yZWFkeXN0YXRlY2hhbmdlPW51bGw7aWYoYS5wYXJlbnROb2RlKXthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9YT1udWxsO2lmKCFsKXtqKDIwMCwic3VjY2VzcyIpfX19O2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX0sYWJvcnQ6ZnVuY3Rpb24oKXtpZihhKXthLm9ubG9hZCh1bmRlZmluZWQsdHJ1ZSl9fX19fSk7dmFyIGwzPVtdLG0zPS8oPSlcPyg/PSZ8JCl8XD9cPy87US5hamF4U2V0dXAoe2pzb25wOiJjYWxsYmFjayIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBhPWwzLnBvcCgpfHwoUS5leHBhbmRvKyJfIisoSTIrKykpO3RoaXNbYV09dHJ1ZTtyZXR1cm4gYX19KTtRLmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKHMsYSxqKXt2YXIgYixsLHIsbT1zLmpzb25wIT09ZmFsc2UmJihtMy50ZXN0KHMudXJsKT8idXJsIjp0eXBlb2Ygcy5kYXRhPT09InN0cmluZyImJiEocy5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZtMy50ZXN0KHMuZGF0YSkmJiJkYXRhIik7aWYobXx8cy5kYXRhVHlwZXNbMF09PT0ianNvbnAiKXtiPXMuanNvbnBDYWxsYmFjaz1RLmlzRnVuY3Rpb24ocy5qc29ucENhbGxiYWNrKT9zLmpzb25wQ2FsbGJhY2soKTpzLmpzb25wQ2FsbGJhY2s7aWYobSl7c1ttXT1zW21dLnJlcGxhY2UobTMsIiQxIitiKX1lbHNlIGlmKHMuanNvbnAhPT1mYWxzZSl7cy51cmwrPShKMi50ZXN0KHMudXJsKT8iJiI6Ij8iKStzLmpzb25wKyI9IitifXMuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe2lmKCFyKXtRLmVycm9yKGIrIiB3YXMgbm90IGNhbGxlZCIpfXJldHVybiByWzBdfTtzLmRhdGFUeXBlc1swXT0ianNvbiI7bD13W2JdO3dbYl09ZnVuY3Rpb24oKXtyPWFyZ3VtZW50c307ai5hbHdheXMoZnVuY3Rpb24oKXt3W2JdPWw7aWYoc1tiXSl7cy5qc29ucENhbGxiYWNrPWEuanNvbnBDYWxsYmFjaztsMy5wdXNoKGIpfWlmKHImJlEuaXNGdW5jdGlvbihsKSl7bChyWzBdKX1yPWw9dW5kZWZpbmVkfSk7cmV0dXJuInNjcmlwdCJ9fSk7US5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGope2lmKCFhfHx0eXBlb2YgYSE9PSJzdHJpbmciKXtyZXR1cm4gbnVsbH1pZih0eXBlb2YgYj09PSJib29sZWFuIil7aj1iO2I9ZmFsc2V9Yj1ifHxKO3ZhciBwPUYuZXhlYyhhKSxzPSFqJiZbXTtpZihwKXtyZXR1cm5bYi5jcmVhdGVFbGVtZW50KHBbMV0pXX1wPVEuYnVpbGRGcmFnbWVudChbYV0sYixzKTtpZihzJiZzLmxlbmd0aCl7UShzKS5yZW1vdmUoKX1yZXR1cm4gUS5tZXJnZShbXSxwLmNoaWxkTm9kZXMpfTt2YXIgbjM9US5mbi5sb2FkO1EuZm4ubG9hZD1mdW5jdGlvbihhLHAsYil7aWYodHlwZW9mIGEhPT0ic3RyaW5nIiYmbjMpe3JldHVybiBuMy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIHMscix0LGo9dGhpcyxsPWEuaW5kZXhPZigiICIpO2lmKGw+PTApe3M9US50cmltKGEuc2xpY2UobCxhLmxlbmd0aCkpO2E9YS5zbGljZSgwLGwpfWlmKFEuaXNGdW5jdGlvbihwKSl7Yj1wO3A9dW5kZWZpbmVkfWVsc2UgaWYocCYmdHlwZW9mIHA9PT0ib2JqZWN0Iil7dD0iUE9TVCJ9aWYoai5sZW5ndGg+MCl7US5hamF4KHt1cmw6YSx0eXBlOnQsZGF0YVR5cGU6Imh0bWwiLGRhdGE6cH0pLmRvbmUoZnVuY3Rpb24obSl7cj1hcmd1bWVudHM7ai5odG1sKHM/USgiPGRpdj4iKS5hcHBlbmQoUS5wYXJzZUhUTUwobSkpLmZpbmQocyk6bSl9KS5jb21wbGV0ZShiJiZmdW5jdGlvbihtLG4pe2ouZWFjaChiLHJ8fFttLnJlc3BvbnNlVGV4dCxuLG1dKX0pfXJldHVybiB0aGlzfTtRLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gUS5ncmVwKFEudGltZXJzLGZ1bmN0aW9uKGIpe3JldHVybiBhPT09Yi5lbGVtfSkubGVuZ3RofTt2YXIgbzM9dy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7ZnVuY3Rpb24gcDMoYSl7cmV0dXJuIFEuaXNXaW5kb3coYSk/YTphLm5vZGVUeXBlPT09OT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzpmYWxzZX1RLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixpKXt2YXIgaixsLG0sbixwLHIscyx0PVEuY3NzKGEsInBvc2l0aW9uIiksdj1RKGEpLF89e307aWYodD09PSJzdGF0aWMiKXthLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSJ9cD12Lm9mZnNldCgpO209US5jc3MoYSwidG9wIik7cj1RLmNzcyhhLCJsZWZ0Iik7cz0odD09PSJhYnNvbHV0ZSJ8fHQ9PT0iZml4ZWQiKSYmUS5pbkFycmF5KCJhdXRvIixbbSxyXSk+LTE7aWYocyl7aj12LnBvc2l0aW9uKCk7bj1qLnRvcDtsPWoubGVmdH1lbHNle249cGFyc2VGbG9hdChtKXx8MDtsPXBhcnNlRmxvYXQocil8fDB9aWYoUS5pc0Z1bmN0aW9uKGIpKXtiPWIuY2FsbChhLGkscCl9aWYoYi50b3AhPW51bGwpe18udG9wPShiLnRvcC1wLnRvcCkrbn1pZihiLmxlZnQhPW51bGwpe18ubGVmdD0oYi5sZWZ0LXAubGVmdCkrbH1pZigidXNpbmciaW4gYil7Yi51c2luZy5jYWxsKGEsXyl9ZWxzZXt2LmNzcyhfKX19fTtRLmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKGEpe2lmKGFyZ3VtZW50cy5sZW5ndGgpe3JldHVybiBhPT09dW5kZWZpbmVkP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGkpe1Eub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsaSl9KX12YXIgbzMsYixqPXt0b3A6MCxsZWZ0OjB9LGw9dGhpc1swXSxtPWwmJmwub3duZXJEb2N1bWVudDtpZighbSl7cmV0dXJufW8zPW0uZG9jdW1lbnRFbGVtZW50O2lmKCFRLmNvbnRhaW5zKG8zLGwpKXtyZXR1cm4gan1pZih0eXBlb2YgbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPT1YKXtqPWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl9Yj1wMyhtKTtyZXR1cm57dG9wOmoudG9wKyhiLnBhZ2VZT2Zmc2V0fHxvMy5zY3JvbGxUb3ApLShvMy5jbGllbnRUb3B8fDApLGxlZnQ6ai5sZWZ0KyhiLnBhZ2VYT2Zmc2V0fHxvMy5zY3JvbGxMZWZ0KS0obzMuY2xpZW50TGVmdHx8MCl9fSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKCF0aGlzWzBdKXtyZXR1cm59dmFyIGEsYixwPXt0b3A6MCxsZWZ0OjB9LGo9dGhpc1swXTtpZihRLmNzcyhqLCJwb3NpdGlvbiIpPT09ImZpeGVkIil7Yj1qLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWVsc2V7YT10aGlzLm9mZnNldFBhcmVudCgpO2I9dGhpcy5vZmZzZXQoKTtpZighUS5ub2RlTmFtZShhWzBdLCJodG1sIikpe3A9YS5vZmZzZXQoKX1wLnRvcCs9US5jc3MoYVswXSwiYm9yZGVyVG9wV2lkdGgiLHRydWUpO3AubGVmdCs9US5jc3MoYVswXSwiYm9yZGVyTGVmdFdpZHRoIix0cnVlKX1yZXR1cm57dG9wOmIudG9wLXAudG9wLVEuY3NzKGosIm1hcmdpblRvcCIsdHJ1ZSksbGVmdDpiLmxlZnQtcC5sZWZ0LVEuY3NzKGosIm1hcmdpbkxlZnQiLHRydWUpfX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vZmZzZXRQYXJlbnR8fG8zO3doaWxlKGEmJighUS5ub2RlTmFtZShhLCJodG1sIikmJlEuY3NzKGEsInBvc2l0aW9uIik9PT0ic3RhdGljIikpe2E9YS5vZmZzZXRQYXJlbnR9cmV0dXJuIGF8fG8zfSl9fSk7US5lYWNoKHtzY3JvbGxMZWZ0OiJwYWdlWE9mZnNldCIsc2Nyb2xsVG9wOiJwYWdlWU9mZnNldCJ9LGZ1bmN0aW9uKG0scCl7dmFyIHQ9L1kvLnRlc3QocCk7US5mblttXT1mdW5jdGlvbih2KXtyZXR1cm4gZzEodGhpcyxmdW5jdGlvbihhLG0sdil7dmFyIGI9cDMoYSk7aWYodj09PXVuZGVmaW5lZCl7cmV0dXJuIGI/KHAgaW4gYik/YltwXTpiLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFttXTphW21dfWlmKGIpe2Iuc2Nyb2xsVG8oIXQ/djpRKGIpLnNjcm9sbExlZnQoKSx0P3Y6UShiKS5zY3JvbGxUb3AoKSl9ZWxzZXthW21dPXZ9fSxtLHYsYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KTtRLmVhY2goWyJ0b3AiLCJsZWZ0Il0sZnVuY3Rpb24oaSxwKXtRLmNzc0hvb2tzW3BdPVkxKHgucGl4ZWxQb3NpdGlvbixmdW5jdGlvbihhLGIpe2lmKGIpe2I9VzEoYSxwKTtyZXR1cm4gVTEudGVzdChiKT9RKGEpLnBvc2l0aW9uKClbcF0rInB4IjpifX0pfSk7US5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24obix0KXtRLmVhY2goe3BhZGRpbmc6ImlubmVyIituLGNvbnRlbnQ6dCwiIjoib3V0ZXIiK259LGZ1bmN0aW9uKGEsYil7US5mbltiXT1mdW5jdGlvbihtLHYpe3ZhciBqPWFyZ3VtZW50cy5sZW5ndGgmJihhfHx0eXBlb2YgbSE9PSJib29sZWFuIiksbD1hfHwobT09PXRydWV8fHY9PT10cnVlPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gZzEodGhpcyxmdW5jdGlvbihwLHQsdil7dmFyIHI7aWYoUS5pc1dpbmRvdyhwKSl7cmV0dXJuIHAuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK25dfWlmKHAubm9kZVR5cGU9PT05KXtyPXAuZG9jdW1lbnRFbGVtZW50O3JldHVybiBNYXRoLm1heChwLmJvZHlbInNjcm9sbCIrbl0sclsic2Nyb2xsIituXSxwLmJvZHlbIm9mZnNldCIrbl0sclsib2Zmc2V0IituXSxyWyJjbGllbnQiK25dKX1yZXR1cm4gdj09PXVuZGVmaW5lZD9RLmNzcyhwLHQsbCk6US5zdHlsZShwLHQsdixsKX0sdCxqP206dW5kZWZpbmVkLGosbnVsbCl9fSl9KTtRLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9O1EuZm4uYW5kU2VsZj1RLmZuLmFkZEJhY2s7aWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiBRfSl9dmFyIHEzPXcualF1ZXJ5LF8kPXcuJDtRLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYSl7aWYody4kPT09USl7dy4kPV8kfWlmKGEmJncualF1ZXJ5PT09USl7dy5qUXVlcnk9cTN9cmV0dXJuIFF9O2lmKHR5cGVvZiBjPT09WCl7dy5qUXVlcnk9dy4kPVF9cmV0dXJuIFF9KSk7Ci8qIQogKiBqUXVlcnkgVUkgQ29yZSAxLjEwLjQKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9jYXRlZ29yeS91aS1jb3JlLwogKi8KKGZ1bmN0aW9uKCQsdSl7dmFyIGI9MCxyPS9edWktaWQtXGQrJC87JC51aT0kLnVpfHx7fTskLmV4dGVuZCgkLnVpLHt2ZXJzaW9uOiIxLjEwLjQiLGtleUNvZGU6e0JBQ0tTUEFDRTo4LENPTU1BOjE4OCxERUxFVEU6NDYsRE9XTjo0MCxFTkQ6MzUsRU5URVI6MTMsRVNDQVBFOjI3LEhPTUU6MzYsTEVGVDozNyxOVU1QQURfQUREOjEwNyxOVU1QQURfREVDSU1BTDoxMTAsTlVNUEFEX0RJVklERToxMTEsTlVNUEFEX0VOVEVSOjEwOCxOVU1QQURfTVVMVElQTFk6MTA2LE5VTVBBRF9TVUJUUkFDVDoxMDksUEFHRV9ET1dOOjM0LFBBR0VfVVA6MzMsUEVSSU9EOjE5MCxSSUdIVDozOSxTUEFDRTozMixUQUI6OSxVUDozOH19KTskLmZuLmV4dGVuZCh7Zm9jdXM6KGZ1bmN0aW9uKG8pe3JldHVybiBmdW5jdGlvbihkLGEpe3JldHVybiB0eXBlb2YgZD09PSJudW1iZXIiP3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpeyQoZSkuZm9jdXMoKTtpZihhKXthLmNhbGwoZSl9fSxkKX0pOm8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pKCQuZm4uZm9jdXMpLHNjcm9sbFBhcmVudDpmdW5jdGlvbigpe3ZhciBzO2lmKCgkLnVpLmllJiYoLyhzdGF0aWN8cmVsYXRpdmUpLykudGVzdCh0aGlzLmNzcygicG9zaXRpb24iKSkpfHwoL2Fic29sdXRlLykudGVzdCh0aGlzLmNzcygicG9zaXRpb24iKSkpe3M9dGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuKC8ocmVsYXRpdmV8YWJzb2x1dGV8Zml4ZWQpLykudGVzdCgkLmNzcyh0aGlzLCJwb3NpdGlvbiIpKSYmKC8oYXV0b3xzY3JvbGwpLykudGVzdCgkLmNzcyh0aGlzLCJvdmVyZmxvdyIpKyQuY3NzKHRoaXMsIm92ZXJmbG93LXkiKSskLmNzcyh0aGlzLCJvdmVyZmxvdy14IikpfSkuZXEoMCl9ZWxzZXtzPXRoaXMucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybigvKGF1dG98c2Nyb2xsKS8pLnRlc3QoJC5jc3ModGhpcywib3ZlcmZsb3ciKSskLmNzcyh0aGlzLCJvdmVyZmxvdy15IikrJC5jc3ModGhpcywib3ZlcmZsb3cteCIpKX0pLmVxKDApfXJldHVybigvZml4ZWQvKS50ZXN0KHRoaXMuY3NzKCJwb3NpdGlvbiIpKXx8IXMubGVuZ3RoPyQoZG9jdW1lbnQpOnN9LHpJbmRleDpmdW5jdGlvbih6KXtpZih6IT09dSl7cmV0dXJuIHRoaXMuY3NzKCJ6SW5kZXgiLHopfWlmKHRoaXMubGVuZ3RoKXt2YXIgZT0kKHRoaXNbMF0pLHAsYTt3aGlsZShlLmxlbmd0aCYmZVswXSE9PWRvY3VtZW50KXtwPWUuY3NzKCJwb3NpdGlvbiIpO2lmKHA9PT0iYWJzb2x1dGUifHxwPT09InJlbGF0aXZlInx8cD09PSJmaXhlZCIpe2E9cGFyc2VJbnQoZS5jc3MoInpJbmRleCIpLDEwKTtpZighaXNOYU4oYSkmJmEhPT0wKXtyZXR1cm4gYX19ZT1lLnBhcmVudCgpfX1yZXR1cm4gMH0sdW5pcXVlSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoIXRoaXMuaWQpe3RoaXMuaWQ9InVpLWlkLSIrKCsrYil9fSl9LHJlbW92ZVVuaXF1ZUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKHIudGVzdCh0aGlzLmlkKSl7JCh0aGlzKS5yZW1vdmVBdHRyKCJpZCIpfX0pfX0pO2Z1bmN0aW9uIGYoZSxpKXt2YXIgbSxhLGMsbj1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoImFyZWEiPT09bil7bT1lLnBhcmVudE5vZGU7YT1tLm5hbWU7aWYoIWUuaHJlZnx8IWF8fG0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJtYXAiKXtyZXR1cm4gZmFsc2V9Yz0kKCJpbWdbdXNlbWFwPSMiK2ErIl0iKVswXTtyZXR1cm4hIWMmJnYoYyl9cmV0dXJuKC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdC8udGVzdChuKT8hZS5kaXNhYmxlZDoiYSI9PT1uP2UuaHJlZnx8aTppKSYmdihlKX1mdW5jdGlvbiB2KGUpe3JldHVybiAkLmV4cHIuZmlsdGVycy52aXNpYmxlKGUpJiYhJChlKS5wYXJlbnRzKCkuYWRkQmFjaygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAkLmNzcyh0aGlzLCJ2aXNpYmlsaXR5Iik9PT0iaGlkZGVuIn0pLmxlbmd0aH0kLmV4dGVuZCgkLmV4cHJbIjoiXSx7ZGF0YTokLmV4cHIuY3JlYXRlUHNldWRvPyQuZXhwci5jcmVhdGVQc2V1ZG8oZnVuY3Rpb24oZCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiEhJC5kYXRhKGUsZCl9fSk6ZnVuY3Rpb24oZSxpLG0pe3JldHVybiEhJC5kYXRhKGUsbVszXSl9LGZvY3VzYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gZihlLCFpc05hTigkLmF0dHIoZSwidGFiaW5kZXgiKSkpfSx0YWJiYWJsZTpmdW5jdGlvbihlKXt2YXIgdD0kLmF0dHIoZSwidGFiaW5kZXgiKSxpPWlzTmFOKHQpO3JldHVybihpfHx0Pj0wKSYmZihlLCFpKX19KTtpZighJCgiPGE+Iikub3V0ZXJXaWR0aCgxKS5qcXVlcnkpeyQuZWFjaChbIldpZHRoIiwiSGVpZ2h0Il0sZnVuY3Rpb24oaSxuKXt2YXIgcz1uPT09IldpZHRoIj9bIkxlZnQiLCJSaWdodCJdOlsiVG9wIiwiQm90dG9tIl0sdD1uLnRvTG93ZXJDYXNlKCksbz17aW5uZXJXaWR0aDokLmZuLmlubmVyV2lkdGgsaW5uZXJIZWlnaHQ6JC5mbi5pbm5lckhlaWdodCxvdXRlcldpZHRoOiQuZm4ub3V0ZXJXaWR0aCxvdXRlckhlaWdodDokLmZuLm91dGVySGVpZ2h0fTtmdW5jdGlvbiBhKGUsYyxkLG0peyQuZWFjaChzLGZ1bmN0aW9uKCl7Yy09cGFyc2VGbG9hdCgkLmNzcyhlLCJwYWRkaW5nIit0aGlzKSl8fDA7aWYoZCl7Yy09cGFyc2VGbG9hdCgkLmNzcyhlLCJib3JkZXIiK3RoaXMrIldpZHRoIikpfHwwfWlmKG0pe2MtPXBhcnNlRmxvYXQoJC5jc3MoZSwibWFyZ2luIit0aGlzKSl8fDB9fSk7cmV0dXJuIGN9JC5mblsiaW5uZXIiK25dPWZ1bmN0aW9uKGMpe2lmKGM9PT11KXtyZXR1cm4gb1siaW5uZXIiK25dLmNhbGwodGhpcyl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpeyQodGhpcykuY3NzKHQsYSh0aGlzLGMpKyJweCIpfSl9OyQuZm5bIm91dGVyIituXT1mdW5jdGlvbihjLG0pe2lmKHR5cGVvZiBjIT09Im51bWJlciIpe3JldHVybiBvWyJvdXRlciIrbl0uY2FsbCh0aGlzLGMpfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXskKHRoaXMpLmNzcyh0LGEodGhpcyxjLHRydWUsbSkrInB4Iil9KX19KX1pZighJC5mbi5hZGRCYWNrKXskLmZuLmFkZEJhY2s9ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuYWRkKHM9PW51bGw/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIocykpfX1pZigkKCI8YT4iKS5kYXRhKCJhLWIiLCJhIikucmVtb3ZlRGF0YSgiYS1iIikuZGF0YSgiYS1iIikpeyQuZm4ucmVtb3ZlRGF0YT0oZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGspe2lmKGFyZ3VtZW50cy5sZW5ndGgpe3JldHVybiBhLmNhbGwodGhpcywkLmNhbWVsQ2FzZShrKSl9ZWxzZXtyZXR1cm4gYS5jYWxsKHRoaXMpfX19KSgkLmZuLnJlbW92ZURhdGEpfSQudWkuaWU9ISEvbXNpZSBbXHcuXSsvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTskLnN1cHBvcnQuc2VsZWN0c3RhcnQ9Im9uc2VsZWN0c3RhcnQiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7JC5mbi5leHRlbmQoe2Rpc2FibGVTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iaW5kKCgkLnN1cHBvcnQuc2VsZWN0c3RhcnQ/InNlbGVjdHN0YXJ0IjoibW91c2Vkb3duIikrIi51aS1kaXNhYmxlU2VsZWN0aW9uIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9KX0sZW5hYmxlU2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5iaW5kKCIudWktZGlzYWJsZVNlbGVjdGlvbiIpfX0pOyQuZXh0ZW5kKCQudWkse3BsdWdpbjp7YWRkOmZ1bmN0aW9uKG0sbyxzKXt2YXIgaSxwPSQudWlbbV0ucHJvdG90eXBlO2ZvcihpIGluIHMpe3AucGx1Z2luc1tpXT1wLnBsdWdpbnNbaV18fFtdO3AucGx1Z2luc1tpXS5wdXNoKFtvLHNbaV1dKX19LGNhbGw6ZnVuY3Rpb24oYSxuLGMpe3ZhciBpLHM9YS5wbHVnaW5zW25dO2lmKCFzfHwhYS5lbGVtZW50WzBdLnBhcmVudE5vZGV8fGEuZWxlbWVudFswXS5wYXJlbnROb2RlLm5vZGVUeXBlPT09MTEpe3JldHVybn1mb3IoaT0wO2k8cy5sZW5ndGg7aSsrKXtpZihhLm9wdGlvbnNbc1tpXVswXV0pe3NbaV1bMV0uYXBwbHkoYS5lbGVtZW50LGMpfX19fSxoYXNTY3JvbGw6ZnVuY3Rpb24oZSxhKXtpZigkKGUpLmNzcygib3ZlcmZsb3ciKT09PSJoaWRkZW4iKXtyZXR1cm4gZmFsc2V9dmFyIHM9KGEmJmE9PT0ibGVmdCIpPyJzY3JvbGxMZWZ0Ijoic2Nyb2xsVG9wIixoPWZhbHNlO2lmKGVbc10+MCl7cmV0dXJuIHRydWV9ZVtzXT0xO2g9KGVbc10+MCk7ZVtzXT0wO3JldHVybiBofX0pfSkoalF1ZXJ5KTsKLyohCiAqIGpRdWVyeSBVSSBEYXRlcGlja2VyIDEuMTAuNAogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2RhdGVwaWNrZXIvCiAqCiAqIERlcGVuZHM6CiAqCWpxdWVyeS51aS5jb3JlLmpzCiAqLwooZnVuY3Rpb24oJCx1KXskLmV4dGVuZCgkLnVpLHtkYXRlcGlja2VyOnt2ZXJzaW9uOiIxLjEwLjQifX0pO3ZhciBQPSJkYXRlcGlja2VyIixjO2Z1bmN0aW9uIEQoKXt0aGlzLl9jdXJJbnN0PW51bGw7dGhpcy5fa2V5RXZlbnQ9ZmFsc2U7dGhpcy5fZGlzYWJsZWRJbnB1dHM9W107dGhpcy5fZGF0ZXBpY2tlclNob3dpbmc9ZmFsc2U7dGhpcy5faW5EaWFsb2c9ZmFsc2U7dGhpcy5fbWFpbkRpdklkPSJ1aS1kYXRlcGlja2VyLWRpdiI7dGhpcy5faW5saW5lQ2xhc3M9InVpLWRhdGVwaWNrZXItaW5saW5lIjt0aGlzLl9hcHBlbmRDbGFzcz0idWktZGF0ZXBpY2tlci1hcHBlbmQiO3RoaXMuX3RyaWdnZXJDbGFzcz0idWktZGF0ZXBpY2tlci10cmlnZ2VyIjt0aGlzLl9kaWFsb2dDbGFzcz0idWktZGF0ZXBpY2tlci1kaWFsb2ciO3RoaXMuX2Rpc2FibGVDbGFzcz0idWktZGF0ZXBpY2tlci1kaXNhYmxlZCI7dGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3M9InVpLWRhdGVwaWNrZXItdW5zZWxlY3RhYmxlIjt0aGlzLl9jdXJyZW50Q2xhc3M9InVpLWRhdGVwaWNrZXItY3VycmVudC1kYXkiO3RoaXMuX2RheU92ZXJDbGFzcz0idWktZGF0ZXBpY2tlci1kYXlzLWNlbGwtb3ZlciI7dGhpcy5yZWdpb25hbD1bXTt0aGlzLnJlZ2lvbmFsWyIiXT17Y2xvc2VUZXh0OiJEb25lIixwcmV2VGV4dDoiUHJldiIsbmV4dFRleHQ6Ik5leHQiLGN1cnJlbnRUZXh0OiJUb2RheSIsbW9udGhOYW1lczpbIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIl0sbW9udGhOYW1lc1Nob3J0OlsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIl0sZGF5TmFtZXM6WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLGRheU5hbWVzU2hvcnQ6WyJTdW4iLCJNb24iLCJUdWUiLCJXZWQiLCJUaHUiLCJGcmkiLCJTYXQiXSxkYXlOYW1lc01pbjpbIlN1IiwiTW8iLCJUdSIsIldlIiwiVGgiLCJGciIsIlNhIl0sd2Vla0hlYWRlcjoiV2siLGRhdGVGb3JtYXQ6Im1tL2RkL3l5IixmaXJzdERheTowLGlzUlRMOmZhbHNlLHNob3dNb250aEFmdGVyWWVhcjpmYWxzZSx5ZWFyU3VmZml4OiIifTt0aGlzLl9kZWZhdWx0cz17c2hvd09uOiJmb2N1cyIsc2hvd0FuaW06ImZhZGVJbiIsc2hvd09wdGlvbnM6e30sZGVmYXVsdERhdGU6bnVsbCxhcHBlbmRUZXh0OiIiLGJ1dHRvblRleHQ6Ii4uLiIsYnV0dG9uSW1hZ2U6IiIsYnV0dG9uSW1hZ2VPbmx5OmZhbHNlLGhpZGVJZk5vUHJldk5leHQ6ZmFsc2UsbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdDpmYWxzZSxnb3RvQ3VycmVudDpmYWxzZSxjaGFuZ2VNb250aDpmYWxzZSxjaGFuZ2VZZWFyOmZhbHNlLHllYXJSYW5nZToiYy0xMDpjKzEwIixzaG93T3RoZXJNb250aHM6ZmFsc2Usc2VsZWN0T3RoZXJNb250aHM6ZmFsc2Usc2hvd1dlZWs6ZmFsc2UsY2FsY3VsYXRlV2Vlazp0aGlzLmlzbzg2MDFXZWVrLHNob3J0WWVhckN1dG9mZjoiKzEwIixtaW5EYXRlOm51bGwsbWF4RGF0ZTpudWxsLGR1cmF0aW9uOiJmYXN0IixiZWZvcmVTaG93RGF5Om51bGwsYmVmb3JlU2hvdzpudWxsLG9uU2VsZWN0Om51bGwsb25DaGFuZ2VNb250aFllYXI6bnVsbCxvbkNsb3NlOm51bGwsbnVtYmVyT2ZNb250aHM6MSxzaG93Q3VycmVudEF0UG9zOjAsc3RlcE1vbnRoczoxLHN0ZXBCaWdNb250aHM6MTIsYWx0RmllbGQ6IiIsYWx0Rm9ybWF0OiIiLGNvbnN0cmFpbklucHV0OnRydWUsc2hvd0J1dHRvblBhbmVsOmZhbHNlLGF1dG9TaXplOmZhbHNlLGRpc2FibGVkOmZhbHNlfTskLmV4dGVuZCh0aGlzLl9kZWZhdWx0cyx0aGlzLnJlZ2lvbmFsWyIiXSk7dGhpcy5kcERpdj1kKCQoIjxkaXYgaWQ9JyIrdGhpcy5fbWFpbkRpdklkKyInIGNsYXNzPSd1aS1kYXRlcGlja2VyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXggdWktY29ybmVyLWFsbCc+PC9kaXY+IikpfSQuZXh0ZW5kKEQucHJvdG90eXBlLHttYXJrZXJDbGFzc05hbWU6Imhhc0RhdGVwaWNrZXIiLG1heFJvd3M6NCxfd2lkZ2V0RGF0ZXBpY2tlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRwRGl2fSxzZXREZWZhdWx0czpmdW5jdGlvbihzKXtmKHRoaXMuX2RlZmF1bHRzLHN8fHt9KTtyZXR1cm4gdGhpc30sX2F0dGFjaERhdGVwaWNrZXI6ZnVuY3Rpb24odCxzKXt2YXIgbixpLGE7bj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aT0obj09PSJkaXYifHxuPT09InNwYW4iKTtpZighdC5pZCl7dGhpcy51dWlkKz0xO3QuaWQ9ImRwIit0aGlzLnV1aWR9YT10aGlzLl9uZXdJbnN0KCQodCksaSk7YS5zZXR0aW5ncz0kLmV4dGVuZCh7fSxzfHx7fSk7aWYobj09PSJpbnB1dCIpe3RoaXMuX2Nvbm5lY3REYXRlcGlja2VyKHQsYSl9ZWxzZSBpZihpKXt0aGlzLl9pbmxpbmVEYXRlcGlja2VyKHQsYSl9fSxfbmV3SW5zdDpmdW5jdGlvbih0LGkpe3ZhciBhPXRbMF0uaWQucmVwbGFjZSgvKFteQS1aYS16MC05X1wtXSkvZywiXFxcXCQxIik7cmV0dXJue2lkOmEsaW5wdXQ6dCxzZWxlY3RlZERheTowLHNlbGVjdGVkTW9udGg6MCxzZWxlY3RlZFllYXI6MCxkcmF3TW9udGg6MCxkcmF3WWVhcjowLGlubGluZTppLGRwRGl2OighaT90aGlzLmRwRGl2OmQoJCgiPGRpdiBjbGFzcz0nIit0aGlzLl9pbmxpbmVDbGFzcysiIHVpLWRhdGVwaWNrZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCB1aS1jb3JuZXItYWxsJz48L2Rpdj4iKSkpfX0sX2Nvbm5lY3REYXRlcGlja2VyOmZ1bmN0aW9uKHQsaSl7dmFyIGE9JCh0KTtpLmFwcGVuZD0kKFtdKTtpLnRyaWdnZXI9JChbXSk7aWYoYS5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3JldHVybn10aGlzLl9hdHRhY2htZW50cyhhLGkpO2EuYWRkQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmtleWRvd24odGhpcy5fZG9LZXlEb3duKS5rZXlwcmVzcyh0aGlzLl9kb0tleVByZXNzKS5rZXl1cCh0aGlzLl9kb0tleVVwKTt0aGlzLl9hdXRvU2l6ZShpKTskLmRhdGEodCxQLGkpO2lmKGkuc2V0dGluZ3MuZGlzYWJsZWQpe3RoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHQpfX0sX2F0dGFjaG1lbnRzOmZ1bmN0aW9uKGksYSl7dmFyIHMsYixlLGc9dGhpcy5fZ2V0KGEsImFwcGVuZFRleHQiKSxoPXRoaXMuX2dldChhLCJpc1JUTCIpO2lmKGEuYXBwZW5kKXthLmFwcGVuZC5yZW1vdmUoKX1pZihnKXthLmFwcGVuZD0kKCI8c3BhbiBjbGFzcz0nIit0aGlzLl9hcHBlbmRDbGFzcysiJz4iK2crIjwvc3Bhbj4iKTtpW2g/ImJlZm9yZSI6ImFmdGVyIl0oYS5hcHBlbmQpfWkudW5iaW5kKCJmb2N1cyIsdGhpcy5fc2hvd0RhdGVwaWNrZXIpO2lmKGEudHJpZ2dlcil7YS50cmlnZ2VyLnJlbW92ZSgpfXM9dGhpcy5fZ2V0KGEsInNob3dPbiIpO2lmKHM9PT0iZm9jdXMifHxzPT09ImJvdGgiKXtpLmZvY3VzKHRoaXMuX3Nob3dEYXRlcGlja2VyKX1pZihzPT09ImJ1dHRvbiJ8fHM9PT0iYm90aCIpe2I9dGhpcy5fZ2V0KGEsImJ1dHRvblRleHQiKTtlPXRoaXMuX2dldChhLCJidXR0b25JbWFnZSIpO2EudHJpZ2dlcj0kKHRoaXMuX2dldChhLCJidXR0b25JbWFnZU9ubHkiKT8kKCI8aW1nLz4iKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLmF0dHIoe3NyYzplLGFsdDpiLHRpdGxlOmJ9KTokKCI8YnV0dG9uIHR5cGU9J2J1dHRvbic+PC9idXR0b24+IikuYWRkQ2xhc3ModGhpcy5fdHJpZ2dlckNsYXNzKS5odG1sKCFlP2I6JCgiPGltZy8+IikuYXR0cih7c3JjOmUsYWx0OmIsdGl0bGU6Yn0pKSk7aVtoPyJiZWZvcmUiOiJhZnRlciJdKGEudHJpZ2dlcik7YS50cmlnZ2VyLmNsaWNrKGZ1bmN0aW9uKCl7aWYoJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmJC5kYXRlcGlja2VyLl9sYXN0SW5wdXQ9PT1pWzBdKXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCl9ZWxzZSBpZigkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiYkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dCE9PWlbMF0peyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTskLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKGlbMF0pfWVsc2V7JC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcihpWzBdKX1yZXR1cm4gZmFsc2V9KX19LF9hdXRvU2l6ZTpmdW5jdGlvbihhKXtpZih0aGlzLl9nZXQoYSwiYXV0b1NpemUiKSYmIWEuaW5saW5lKXt2YXIgYixtLGUsaSxnPW5ldyBEYXRlKDIwMDksMTItMSwyMCksaD10aGlzLl9nZXQoYSwiZGF0ZUZvcm1hdCIpO2lmKGgubWF0Y2goL1tETV0vKSl7Yj1mdW5jdGlvbihuKXttPTA7ZT0wO2ZvcihpPTA7aTxuLmxlbmd0aDtpKyspe2lmKG5baV0ubGVuZ3RoPm0pe209bltpXS5sZW5ndGg7ZT1pfX1yZXR1cm4gZX07Zy5zZXRNb250aChiKHRoaXMuX2dldChhLChoLm1hdGNoKC9NTS8pPyJtb250aE5hbWVzIjoibW9udGhOYW1lc1Nob3J0IikpKSk7Zy5zZXREYXRlKGIodGhpcy5fZ2V0KGEsKGgubWF0Y2goL0RELyk/ImRheU5hbWVzIjoiZGF5TmFtZXNTaG9ydCIpKSkrMjAtZy5nZXREYXkoKSl9YS5pbnB1dC5hdHRyKCJzaXplIix0aGlzLl9mb3JtYXREYXRlKGEsZykubGVuZ3RoKX19LF9pbmxpbmVEYXRlcGlja2VyOmZ1bmN0aW9uKHQsaSl7dmFyIGE9JCh0KTtpZihhLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cmV0dXJufWEuYWRkQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmFwcGVuZChpLmRwRGl2KTskLmRhdGEodCxQLGkpO3RoaXMuX3NldERhdGUoaSx0aGlzLl9nZXREZWZhdWx0RGF0ZShpKSx0cnVlKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGkpO3RoaXMuX3VwZGF0ZUFsdGVybmF0ZShpKTtpZihpLnNldHRpbmdzLmRpc2FibGVkKXt0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlcih0KX1pLmRwRGl2LmNzcygiZGlzcGxheSIsImJsb2NrIil9LF9kaWFsb2dEYXRlcGlja2VyOmZ1bmN0aW9uKGksYSxvLHMscCl7dmFyIGIsZSxnLGgsaixrPXRoaXMuX2RpYWxvZ0luc3Q7aWYoIWspe3RoaXMudXVpZCs9MTtiPSJkcCIrdGhpcy51dWlkO3RoaXMuX2RpYWxvZ0lucHV0PSQoIjxpbnB1dCB0eXBlPSd0ZXh0JyBpZD0nIitiKyInIHN0eWxlPSdwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTEwMHB4OyB3aWR0aDogMHB4OycvPiIpO3RoaXMuX2RpYWxvZ0lucHV0LmtleWRvd24odGhpcy5fZG9LZXlEb3duKTskKCJib2R5IikuYXBwZW5kKHRoaXMuX2RpYWxvZ0lucHV0KTtrPXRoaXMuX2RpYWxvZ0luc3Q9dGhpcy5fbmV3SW5zdCh0aGlzLl9kaWFsb2dJbnB1dCxmYWxzZSk7ay5zZXR0aW5ncz17fTskLmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0sUCxrKX1mKGsuc2V0dGluZ3Msc3x8e30pO2E9KGEmJmEuY29uc3RydWN0b3I9PT1EYXRlP3RoaXMuX2Zvcm1hdERhdGUoayxhKTphKTt0aGlzLl9kaWFsb2dJbnB1dC52YWwoYSk7dGhpcy5fcG9zPShwPyhwLmxlbmd0aD9wOltwLnBhZ2VYLHAucGFnZVldKTpudWxsKTtpZighdGhpcy5fcG9zKXtlPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtnPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7aD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O2o9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7dGhpcy5fcG9zPVsoZS8yKS0xMDAraCwoZy8yKS0xNTAral19dGhpcy5fZGlhbG9nSW5wdXQuY3NzKCJsZWZ0IiwodGhpcy5fcG9zWzBdKzIwKSsicHgiKS5jc3MoInRvcCIsdGhpcy5fcG9zWzFdKyJweCIpO2suc2V0dGluZ3Mub25TZWxlY3Q9bzt0aGlzLl9pbkRpYWxvZz10cnVlO3RoaXMuZHBEaXYuYWRkQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpO3RoaXMuX3Nob3dEYXRlcGlja2VyKHRoaXMuX2RpYWxvZ0lucHV0WzBdKTtpZigkLmJsb2NrVUkpeyQuYmxvY2tVSSh0aGlzLmRwRGl2KX0kLmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0sUCxrKTtyZXR1cm4gdGhpc30sX2Rlc3Ryb3lEYXRlcGlja2VyOmZ1bmN0aW9uKHQpe3ZhciBuLGE9JCh0KSxpPSQuZGF0YSh0LFApO2lmKCFhLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cmV0dXJufW49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOyQucmVtb3ZlRGF0YSh0LFApO2lmKG49PT0iaW5wdXQiKXtpLmFwcGVuZC5yZW1vdmUoKTtpLnRyaWdnZXIucmVtb3ZlKCk7YS5yZW1vdmVDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkudW5iaW5kKCJmb2N1cyIsdGhpcy5fc2hvd0RhdGVwaWNrZXIpLnVuYmluZCgia2V5ZG93biIsdGhpcy5fZG9LZXlEb3duKS51bmJpbmQoImtleXByZXNzIix0aGlzLl9kb0tleVByZXNzKS51bmJpbmQoImtleXVwIix0aGlzLl9kb0tleVVwKX1lbHNlIGlmKG49PT0iZGl2Inx8bj09PSJzcGFuIil7YS5yZW1vdmVDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkuZW1wdHkoKX19LF9lbmFibGVEYXRlcGlja2VyOmZ1bmN0aW9uKHQpe3ZhciBuLGksYT0kKHQpLGI9JC5kYXRhKHQsUCk7aWYoIWEuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm59bj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYobj09PSJpbnB1dCIpe3QuZGlzYWJsZWQ9ZmFsc2U7Yi50cmlnZ2VyLmZpbHRlcigiYnV0dG9uIikuZWFjaChmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ZmFsc2V9KS5lbmQoKS5maWx0ZXIoImltZyIpLmNzcyh7b3BhY2l0eToiMS4wIixjdXJzb3I6IiJ9KX1lbHNlIGlmKG49PT0iZGl2Inx8bj09PSJzcGFuIil7aT1hLmNoaWxkcmVuKCIuIit0aGlzLl9pbmxpbmVDbGFzcyk7aS5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpO2kuZmluZCgic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXIiKS5wcm9wKCJkaXNhYmxlZCIsZmFsc2UpfXRoaXMuX2Rpc2FibGVkSW5wdXRzPSQubWFwKHRoaXMuX2Rpc2FibGVkSW5wdXRzLGZ1bmN0aW9uKHYpe3JldHVybih2PT09dD9udWxsOnYpfSl9LF9kaXNhYmxlRGF0ZXBpY2tlcjpmdW5jdGlvbih0KXt2YXIgbixpLGE9JCh0KSxiPSQuZGF0YSh0LFApO2lmKCFhLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cmV0dXJufW49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKG49PT0iaW5wdXQiKXt0LmRpc2FibGVkPXRydWU7Yi50cmlnZ2VyLmZpbHRlcigiYnV0dG9uIikuZWFjaChmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9dHJ1ZX0pLmVuZCgpLmZpbHRlcigiaW1nIikuY3NzKHtvcGFjaXR5OiIwLjUiLGN1cnNvcjoiZGVmYXVsdCJ9KX1lbHNlIGlmKG49PT0iZGl2Inx8bj09PSJzcGFuIil7aT1hLmNoaWxkcmVuKCIuIit0aGlzLl9pbmxpbmVDbGFzcyk7aS5jaGlsZHJlbigpLmFkZENsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpO2kuZmluZCgic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXIiKS5wcm9wKCJkaXNhYmxlZCIsdHJ1ZSl9dGhpcy5fZGlzYWJsZWRJbnB1dHM9JC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsZnVuY3Rpb24odil7cmV0dXJuKHY9PT10P251bGw6dil9KTt0aGlzLl9kaXNhYmxlZElucHV0c1t0aGlzLl9kaXNhYmxlZElucHV0cy5sZW5ndGhdPXR9LF9pc0Rpc2FibGVkRGF0ZXBpY2tlcjpmdW5jdGlvbih0KXtpZighdCl7cmV0dXJuIGZhbHNlfWZvcih2YXIgaT0wO2k8dGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoO2krKyl7aWYodGhpcy5fZGlzYWJsZWRJbnB1dHNbaV09PT10KXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfSxfZ2V0SW5zdDpmdW5jdGlvbih0KXt0cnl7cmV0dXJuICQuZGF0YSh0LFApfWNhdGNoKGUpe3Rocm93Ik1pc3NpbmcgaW5zdGFuY2UgZGF0YSBmb3IgdGhpcyBkYXRlcGlja2VyIn19LF9vcHRpb25EYXRlcGlja2VyOmZ1bmN0aW9uKHQsbix2KXt2YXIgcyxhLG0sYixpPXRoaXMuX2dldEluc3QodCk7aWYoYXJndW1lbnRzLmxlbmd0aD09PTImJnR5cGVvZiBuPT09InN0cmluZyIpe3JldHVybihuPT09ImRlZmF1bHRzIj8kLmV4dGVuZCh7fSwkLmRhdGVwaWNrZXIuX2RlZmF1bHRzKTooaT8obj09PSJhbGwiPyQuZXh0ZW5kKHt9LGkuc2V0dGluZ3MpOnRoaXMuX2dldChpLG4pKTpudWxsKSl9cz1ufHx7fTtpZih0eXBlb2Ygbj09PSJzdHJpbmciKXtzPXt9O3Nbbl09dn1pZihpKXtpZih0aGlzLl9jdXJJbnN0PT09aSl7dGhpcy5faGlkZURhdGVwaWNrZXIoKX1hPXRoaXMuX2dldERhdGVEYXRlcGlja2VyKHQsdHJ1ZSk7bT10aGlzLl9nZXRNaW5NYXhEYXRlKGksIm1pbiIpO2I9dGhpcy5fZ2V0TWluTWF4RGF0ZShpLCJtYXgiKTtmKGkuc2V0dGluZ3Mscyk7aWYobSE9PW51bGwmJnMuZGF0ZUZvcm1hdCE9PXUmJnMubWluRGF0ZT09PXUpe2kuc2V0dGluZ3MubWluRGF0ZT10aGlzLl9mb3JtYXREYXRlKGksbSl9aWYoYiE9PW51bGwmJnMuZGF0ZUZvcm1hdCE9PXUmJnMubWF4RGF0ZT09PXUpe2kuc2V0dGluZ3MubWF4RGF0ZT10aGlzLl9mb3JtYXREYXRlKGksYil9aWYoImRpc2FibGVkImluIHMpe2lmKHMuZGlzYWJsZWQpe3RoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHQpfWVsc2V7dGhpcy5fZW5hYmxlRGF0ZXBpY2tlcih0KX19dGhpcy5fYXR0YWNobWVudHMoJCh0KSxpKTt0aGlzLl9hdXRvU2l6ZShpKTt0aGlzLl9zZXREYXRlKGksYSk7dGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGkpO3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaSl9fSxfY2hhbmdlRGF0ZXBpY2tlcjpmdW5jdGlvbih0LG4sdil7dGhpcy5fb3B0aW9uRGF0ZXBpY2tlcih0LG4sdil9LF9yZWZyZXNoRGF0ZXBpY2tlcjpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9nZXRJbnN0KHQpO2lmKGkpe3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaSl9fSxfc2V0RGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24odCxhKXt2YXIgaT10aGlzLl9nZXRJbnN0KHQpO2lmKGkpe3RoaXMuX3NldERhdGUoaSxhKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGkpO3RoaXMuX3VwZGF0ZUFsdGVybmF0ZShpKX19LF9nZXREYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMuX2dldEluc3QodCk7aWYoaSYmIWkuaW5saW5lKXt0aGlzLl9zZXREYXRlRnJvbUZpZWxkKGksbil9cmV0dXJuKGk/dGhpcy5fZ2V0RGF0ZShpKTpudWxsKX0sX2RvS2V5RG93bjpmdW5jdGlvbihlKXt2YXIgbyxhLHMsaT0kLmRhdGVwaWNrZXIuX2dldEluc3QoZS50YXJnZXQpLGg9dHJ1ZSxiPWkuZHBEaXYuaXMoIi51aS1kYXRlcGlja2VyLXJ0bCIpO2kuX2tleUV2ZW50PXRydWU7aWYoJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyl7c3dpdGNoKGUua2V5Q29kZSl7Y2FzZSA5OiQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTtoPWZhbHNlO2JyZWFrO2Nhc2UgMTM6cz0kKCJ0ZC4iKyQuZGF0ZXBpY2tlci5fZGF5T3ZlckNsYXNzKyI6bm90KC4iKyQuZGF0ZXBpY2tlci5fY3VycmVudENsYXNzKyIpIixpLmRwRGl2KTtpZihzWzBdKXskLmRhdGVwaWNrZXIuX3NlbGVjdERheShlLnRhcmdldCxpLnNlbGVjdGVkTW9udGgsaS5zZWxlY3RlZFllYXIsc1swXSl9bz0kLmRhdGVwaWNrZXIuX2dldChpLCJvblNlbGVjdCIpO2lmKG8pe2E9JC5kYXRlcGlja2VyLl9mb3JtYXREYXRlKGkpO28uYXBwbHkoKGkuaW5wdXQ/aS5pbnB1dFswXTpudWxsKSxbYSxpXSl9ZWxzZXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCl9cmV0dXJuIGZhbHNlO2Nhc2UgMjc6JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpO2JyZWFrO2Nhc2UgMzM6JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LChlLmN0cmxLZXk/LSQuZGF0ZXBpY2tlci5fZ2V0KGksInN0ZXBCaWdNb250aHMiKTotJC5kYXRlcGlja2VyLl9nZXQoaSwic3RlcE1vbnRocyIpKSwiTSIpO2JyZWFrO2Nhc2UgMzQ6JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LChlLmN0cmxLZXk/KyQuZGF0ZXBpY2tlci5fZ2V0KGksInN0ZXBCaWdNb250aHMiKTorJC5kYXRlcGlja2VyLl9nZXQoaSwic3RlcE1vbnRocyIpKSwiTSIpO2JyZWFrO2Nhc2UgMzU6aWYoZS5jdHJsS2V5fHxlLm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fY2xlYXJEYXRlKGUudGFyZ2V0KX1oPWUuY3RybEtleXx8ZS5tZXRhS2V5O2JyZWFrO2Nhc2UgMzY6aWYoZS5jdHJsS2V5fHxlLm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fZ290b1RvZGF5KGUudGFyZ2V0KX1oPWUuY3RybEtleXx8ZS5tZXRhS2V5O2JyZWFrO2Nhc2UgMzc6aWYoZS5jdHJsS2V5fHxlLm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwoYj8rMTotMSksIkQiKX1oPWUuY3RybEtleXx8ZS5tZXRhS2V5O2lmKGUub3JpZ2luYWxFdmVudC5hbHRLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwoZS5jdHJsS2V5Py0kLmRhdGVwaWNrZXIuX2dldChpLCJzdGVwQmlnTW9udGhzIik6LSQuZGF0ZXBpY2tlci5fZ2V0KGksInN0ZXBNb250aHMiKSksIk0iKX1icmVhaztjYXNlIDM4OmlmKGUuY3RybEtleXx8ZS5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQsLTcsIkQiKX1oPWUuY3RybEtleXx8ZS5tZXRhS2V5O2JyZWFrO2Nhc2UgMzk6aWYoZS5jdHJsS2V5fHxlLm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwoYj8tMTorMSksIkQiKX1oPWUuY3RybEtleXx8ZS5tZXRhS2V5O2lmKGUub3JpZ2luYWxFdmVudC5hbHRLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwoZS5jdHJsS2V5PyskLmRhdGVwaWNrZXIuX2dldChpLCJzdGVwQmlnTW9udGhzIik6KyQuZGF0ZXBpY2tlci5fZ2V0KGksInN0ZXBNb250aHMiKSksIk0iKX1icmVhaztjYXNlIDQwOmlmKGUuY3RybEtleXx8ZS5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQsKzcsIkQiKX1oPWUuY3RybEtleXx8ZS5tZXRhS2V5O2JyZWFrO2RlZmF1bHQ6aD1mYWxzZX19ZWxzZSBpZihlLmtleUNvZGU9PT0zNiYmZS5jdHJsS2V5KXskLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKHRoaXMpfWVsc2V7aD1mYWxzZX1pZihoKXtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX19LF9kb0tleVByZXNzOmZ1bmN0aW9uKGUpe3ZhciBhLGIsaT0kLmRhdGVwaWNrZXIuX2dldEluc3QoZS50YXJnZXQpO2lmKCQuZGF0ZXBpY2tlci5fZ2V0KGksImNvbnN0cmFpbklucHV0Iikpe2E9JC5kYXRlcGlja2VyLl9wb3NzaWJsZUNoYXJzKCQuZGF0ZXBpY2tlci5fZ2V0KGksImRhdGVGb3JtYXQiKSk7Yj1TdHJpbmcuZnJvbUNoYXJDb2RlKGUuY2hhckNvZGU9PW51bGw/ZS5rZXlDb2RlOmUuY2hhckNvZGUpO3JldHVybiBlLmN0cmxLZXl8fGUubWV0YUtleXx8KGI8IiAifHwhYXx8YS5pbmRleE9mKGIpPi0xKX19LF9kb0tleVVwOmZ1bmN0aW9uKGUpe3ZhciBhLGk9JC5kYXRlcGlja2VyLl9nZXRJbnN0KGUudGFyZ2V0KTtpZihpLmlucHV0LnZhbCgpIT09aS5sYXN0VmFsKXt0cnl7YT0kLmRhdGVwaWNrZXIucGFyc2VEYXRlKCQuZGF0ZXBpY2tlci5fZ2V0KGksImRhdGVGb3JtYXQiKSwoaS5pbnB1dD9pLmlucHV0LnZhbCgpOm51bGwpLCQuZGF0ZXBpY2tlci5fZ2V0Rm9ybWF0Q29uZmlnKGkpKTtpZihhKXskLmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQoaSk7JC5kYXRlcGlja2VyLl91cGRhdGVBbHRlcm5hdGUoaSk7JC5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGkpfX1jYXRjaChiKXt9fXJldHVybiB0cnVlfSxfc2hvd0RhdGVwaWNrZXI6ZnVuY3Rpb24oaSl7aT1pLnRhcmdldHx8aTtpZihpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0iaW5wdXQiKXtpPSQoImlucHV0IixpLnBhcmVudE5vZGUpWzBdfWlmKCQuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIoaSl8fCQuZGF0ZXBpY2tlci5fbGFzdElucHV0PT09aSl7cmV0dXJufXZhciBhLGIsZSxnLG8scyxoO2E9JC5kYXRlcGlja2VyLl9nZXRJbnN0KGkpO2lmKCQuZGF0ZXBpY2tlci5fY3VySW5zdCYmJC5kYXRlcGlja2VyLl9jdXJJbnN0IT09YSl7JC5kYXRlcGlja2VyLl9jdXJJbnN0LmRwRGl2LnN0b3AodHJ1ZSx0cnVlKTtpZihhJiYkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nKXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCQuZGF0ZXBpY2tlci5fY3VySW5zdC5pbnB1dFswXSl9fWI9JC5kYXRlcGlja2VyLl9nZXQoYSwiYmVmb3JlU2hvdyIpO2U9Yj9iLmFwcGx5KGksW2ksYV0pOnt9O2lmKGU9PT1mYWxzZSl7cmV0dXJufWYoYS5zZXR0aW5ncyxlKTthLmxhc3RWYWw9bnVsbDskLmRhdGVwaWNrZXIuX2xhc3RJbnB1dD1pOyQuZGF0ZXBpY2tlci5fc2V0RGF0ZUZyb21GaWVsZChhKTtpZigkLmRhdGVwaWNrZXIuX2luRGlhbG9nKXtpLnZhbHVlPSIifWlmKCEkLmRhdGVwaWNrZXIuX3Bvcyl7JC5kYXRlcGlja2VyLl9wb3M9JC5kYXRlcGlja2VyLl9maW5kUG9zKGkpOyQuZGF0ZXBpY2tlci5fcG9zWzFdKz1pLm9mZnNldEhlaWdodH1nPWZhbHNlOyQoaSkucGFyZW50cygpLmVhY2goZnVuY3Rpb24oKXtnfD0kKHRoaXMpLmNzcygicG9zaXRpb24iKT09PSJmaXhlZCI7cmV0dXJuIWd9KTtvPXtsZWZ0OiQuZGF0ZXBpY2tlci5fcG9zWzBdLHRvcDokLmRhdGVwaWNrZXIuX3Bvc1sxXX07JC5kYXRlcGlja2VyLl9wb3M9bnVsbDthLmRwRGl2LmVtcHR5KCk7YS5kcERpdi5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsZGlzcGxheToiYmxvY2siLHRvcDoiLTEwMDBweCJ9KTskLmRhdGVwaWNrZXIuX3VwZGF0ZURhdGVwaWNrZXIoYSk7bz0kLmRhdGVwaWNrZXIuX2NoZWNrT2Zmc2V0KGEsbyxnKTthLmRwRGl2LmNzcyh7cG9zaXRpb246KCQuZGF0ZXBpY2tlci5faW5EaWFsb2cmJiQuYmxvY2tVST8ic3RhdGljIjooZz8iZml4ZWQiOiJhYnNvbHV0ZSIpKSxkaXNwbGF5OiJub25lIixsZWZ0Om8ubGVmdCsicHgiLHRvcDpvLnRvcCsicHgifSk7aWYoIWEuaW5saW5lKXtzPSQuZGF0ZXBpY2tlci5fZ2V0KGEsInNob3dBbmltIik7aD0kLmRhdGVwaWNrZXIuX2dldChhLCJkdXJhdGlvbiIpO2EuZHBEaXYuekluZGV4KCQoaSkuekluZGV4KCkrMSk7JC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZz10cnVlO2lmKCQuZWZmZWN0cyYmJC5lZmZlY3RzLmVmZmVjdFtzXSl7YS5kcERpdi5zaG93KHMsJC5kYXRlcGlja2VyLl9nZXQoYSwic2hvd09wdGlvbnMiKSxoKX1lbHNle2EuZHBEaXZbc3x8InNob3ciXShzP2g6bnVsbCl9aWYoJC5kYXRlcGlja2VyLl9zaG91bGRGb2N1c0lucHV0KGEpKXthLmlucHV0LmZvY3VzKCl9JC5kYXRlcGlja2VyLl9jdXJJbnN0PWF9fSxfdXBkYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbihpKXt0aGlzLm1heFJvd3M9NDtjPWk7aS5kcERpdi5lbXB0eSgpLmFwcGVuZCh0aGlzLl9nZW5lcmF0ZUhUTUwoaSkpO3RoaXMuX2F0dGFjaEhhbmRsZXJzKGkpO2kuZHBEaXYuZmluZCgiLiIrdGhpcy5fZGF5T3ZlckNsYXNzKyIgYSIpLm1vdXNlb3ZlcigpO3ZhciBvLG49dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaSksYT1uWzFdLHc9MTc7aS5kcERpdi5yZW1vdmVDbGFzcygidWktZGF0ZXBpY2tlci1tdWx0aS0yIHVpLWRhdGVwaWNrZXItbXVsdGktMyB1aS1kYXRlcGlja2VyLW11bHRpLTQiKS53aWR0aCgiIik7aWYoYT4xKXtpLmRwRGl2LmFkZENsYXNzKCJ1aS1kYXRlcGlja2VyLW11bHRpLSIrYSkuY3NzKCJ3aWR0aCIsKHcqYSkrImVtIil9aS5kcERpdlsoblswXSE9PTF8fG5bMV0hPT0xPyJhZGQiOiJyZW1vdmUiKSsiQ2xhc3MiXSgidWktZGF0ZXBpY2tlci1tdWx0aSIpO2kuZHBEaXZbKHRoaXMuX2dldChpLCJpc1JUTCIpPyJhZGQiOiJyZW1vdmUiKSsiQ2xhc3MiXSgidWktZGF0ZXBpY2tlci1ydGwiKTtpZihpPT09JC5kYXRlcGlja2VyLl9jdXJJbnN0JiYkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiYkLmRhdGVwaWNrZXIuX3Nob3VsZEZvY3VzSW5wdXQoaSkpe2kuaW5wdXQuZm9jdXMoKX1pZihpLnllYXJzaHRtbCl7bz1pLnllYXJzaHRtbDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYobz09PWkueWVhcnNodG1sJiZpLnllYXJzaHRtbCl7aS5kcERpdi5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyOmZpcnN0IikucmVwbGFjZVdpdGgoaS55ZWFyc2h0bWwpfW89aS55ZWFyc2h0bWw9bnVsbH0sMCl9fSxfc2hvdWxkRm9jdXNJbnB1dDpmdW5jdGlvbihpKXtyZXR1cm4gaS5pbnB1dCYmaS5pbnB1dC5pcygiOnZpc2libGUiKSYmIWkuaW5wdXQuaXMoIjpkaXNhYmxlZCIpJiYhaS5pbnB1dC5pcygiOmZvY3VzIil9LF9jaGVja09mZnNldDpmdW5jdGlvbihpLG8sYSl7dmFyIGI9aS5kcERpdi5vdXRlcldpZHRoKCksZT1pLmRwRGl2Lm91dGVySGVpZ2h0KCksZz1pLmlucHV0P2kuaW5wdXQub3V0ZXJXaWR0aCgpOjAsaD1pLmlucHV0P2kuaW5wdXQub3V0ZXJIZWlnaHQoKTowLHY9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKyhhPzA6JChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKSxqPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQrKGE/MDokKGRvY3VtZW50KS5zY3JvbGxUb3AoKSk7by5sZWZ0LT0odGhpcy5fZ2V0KGksImlzUlRMIik/KGItZyk6MCk7by5sZWZ0LT0oYSYmby5sZWZ0PT09aS5pbnB1dC5vZmZzZXQoKS5sZWZ0KT8kKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCk6MDtvLnRvcC09KGEmJm8udG9wPT09KGkuaW5wdXQub2Zmc2V0KCkudG9wK2gpKT8kKGRvY3VtZW50KS5zY3JvbGxUb3AoKTowO28ubGVmdC09TWF0aC5taW4oby5sZWZ0LChvLmxlZnQrYj52JiZ2PmIpP01hdGguYWJzKG8ubGVmdCtiLXYpOjApO28udG9wLT1NYXRoLm1pbihvLnRvcCwoby50b3ArZT5qJiZqPmUpP01hdGguYWJzKGUraCk6MCk7cmV0dXJuIG99LF9maW5kUG9zOmZ1bmN0aW9uKG8pe3ZhciBwLGk9dGhpcy5fZ2V0SW5zdChvKSxhPXRoaXMuX2dldChpLCJpc1JUTCIpO3doaWxlKG8mJihvLnR5cGU9PT0iaGlkZGVuInx8by5ub2RlVHlwZSE9PTF8fCQuZXhwci5maWx0ZXJzLmhpZGRlbihvKSkpe289b1thPyJwcmV2aW91c1NpYmxpbmciOiJuZXh0U2libGluZyJdfXA9JChvKS5vZmZzZXQoKTtyZXR1cm5bcC5sZWZ0LHAudG9wXX0sX2hpZGVEYXRlcGlja2VyOmZ1bmN0aW9uKGkpe3ZhciBzLGEscCxvLGI9dGhpcy5fY3VySW5zdDtpZighYnx8KGkmJmIhPT0kLmRhdGEoaSxQKSkpe3JldHVybn1pZih0aGlzLl9kYXRlcGlja2VyU2hvd2luZyl7cz10aGlzLl9nZXQoYiwic2hvd0FuaW0iKTthPXRoaXMuX2dldChiLCJkdXJhdGlvbiIpO3A9ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX3RpZHlEaWFsb2coYil9O2lmKCQuZWZmZWN0cyYmKCQuZWZmZWN0cy5lZmZlY3Rbc118fCQuZWZmZWN0c1tzXSkpe2IuZHBEaXYuaGlkZShzLCQuZGF0ZXBpY2tlci5fZ2V0KGIsInNob3dPcHRpb25zIiksYSxwKX1lbHNle2IuZHBEaXZbKHM9PT0ic2xpZGVEb3duIj8ic2xpZGVVcCI6KHM9PT0iZmFkZUluIj8iZmFkZU91dCI6ImhpZGUiKSldKChzP2E6bnVsbCkscCl9aWYoIXMpe3AoKX10aGlzLl9kYXRlcGlja2VyU2hvd2luZz1mYWxzZTtvPXRoaXMuX2dldChiLCJvbkNsb3NlIik7aWYobyl7by5hcHBseSgoYi5pbnB1dD9iLmlucHV0WzBdOm51bGwpLFsoYi5pbnB1dD9iLmlucHV0LnZhbCgpOiIiKSxiXSl9dGhpcy5fbGFzdElucHV0PW51bGw7aWYodGhpcy5faW5EaWFsb2cpe3RoaXMuX2RpYWxvZ0lucHV0LmNzcyh7cG9zaXRpb246ImFic29sdXRlIixsZWZ0OiIwIix0b3A6Ii0xMDBweCJ9KTtpZigkLmJsb2NrVUkpeyQudW5ibG9ja1VJKCk7JCgiYm9keSIpLmFwcGVuZCh0aGlzLmRwRGl2KX19dGhpcy5faW5EaWFsb2c9ZmFsc2V9fSxfdGlkeURpYWxvZzpmdW5jdGlvbihpKXtpLmRwRGl2LnJlbW92ZUNsYXNzKHRoaXMuX2RpYWxvZ0NsYXNzKS51bmJpbmQoIi51aS1kYXRlcGlja2VyLWNhbGVuZGFyIil9LF9jaGVja0V4dGVybmFsQ2xpY2s6ZnVuY3Rpb24oZSl7aWYoISQuZGF0ZXBpY2tlci5fY3VySW5zdCl7cmV0dXJufXZhciBhPSQoZS50YXJnZXQpLGk9JC5kYXRlcGlja2VyLl9nZXRJbnN0KGFbMF0pO2lmKCgoYVswXS5pZCE9PSQuZGF0ZXBpY2tlci5fbWFpbkRpdklkJiZhLnBhcmVudHMoIiMiKyQuZGF0ZXBpY2tlci5fbWFpbkRpdklkKS5sZW5ndGg9PT0wJiYhYS5oYXNDbGFzcygkLmRhdGVwaWNrZXIubWFya2VyQ2xhc3NOYW1lKSYmIWEuY2xvc2VzdCgiLiIrJC5kYXRlcGlja2VyLl90cmlnZ2VyQ2xhc3MpLmxlbmd0aCYmJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmISgkLmRhdGVwaWNrZXIuX2luRGlhbG9nJiYkLmJsb2NrVUkpKSl8fChhLmhhc0NsYXNzKCQuZGF0ZXBpY2tlci5tYXJrZXJDbGFzc05hbWUpJiYkLmRhdGVwaWNrZXIuX2N1ckluc3QhPT1pKSl7JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpfX0sX2FkanVzdERhdGU6ZnVuY3Rpb24oaSxvLHApe3ZhciB0PSQoaSksYT10aGlzLl9nZXRJbnN0KHRbMF0pO2lmKHRoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKHRbMF0pKXtyZXR1cm59dGhpcy5fYWRqdXN0SW5zdERhdGUoYSxvKyhwPT09Ik0iP3RoaXMuX2dldChhLCJzaG93Q3VycmVudEF0UG9zIik6MCkscCk7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihhKX0sX2dvdG9Ub2RheTpmdW5jdGlvbihpKXt2YXIgYSx0PSQoaSksYj10aGlzLl9nZXRJbnN0KHRbMF0pO2lmKHRoaXMuX2dldChiLCJnb3RvQ3VycmVudCIpJiZiLmN1cnJlbnREYXkpe2Iuc2VsZWN0ZWREYXk9Yi5jdXJyZW50RGF5O2IuZHJhd01vbnRoPWIuc2VsZWN0ZWRNb250aD1iLmN1cnJlbnRNb250aDtiLmRyYXdZZWFyPWIuc2VsZWN0ZWRZZWFyPWIuY3VycmVudFllYXJ9ZWxzZXthPW5ldyBEYXRlKCk7Yi5zZWxlY3RlZERheT1hLmdldERhdGUoKTtiLmRyYXdNb250aD1iLnNlbGVjdGVkTW9udGg9YS5nZXRNb250aCgpO2IuZHJhd1llYXI9Yi5zZWxlY3RlZFllYXI9YS5nZXRGdWxsWWVhcigpfXRoaXMuX25vdGlmeUNoYW5nZShiKTt0aGlzLl9hZGp1c3REYXRlKHQpfSxfc2VsZWN0TW9udGhZZWFyOmZ1bmN0aW9uKGkscyxwKXt2YXIgdD0kKGkpLGE9dGhpcy5fZ2V0SW5zdCh0WzBdKTthWyJzZWxlY3RlZCIrKHA9PT0iTSI/Ik1vbnRoIjoiWWVhciIpXT1hWyJkcmF3IisocD09PSJNIj8iTW9udGgiOiJZZWFyIildPXBhcnNlSW50KHMub3B0aW9uc1tzLnNlbGVjdGVkSW5kZXhdLnZhbHVlLDEwKTt0aGlzLl9ub3RpZnlDaGFuZ2UoYSk7dGhpcy5fYWRqdXN0RGF0ZSh0KX0sX3NlbGVjdERheTpmdW5jdGlvbihpLG0seSx0KXt2YXIgYSxiPSQoaSk7aWYoJCh0KS5oYXNDbGFzcyh0aGlzLl91bnNlbGVjdGFibGVDbGFzcyl8fHRoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKGJbMF0pKXtyZXR1cm59YT10aGlzLl9nZXRJbnN0KGJbMF0pO2Euc2VsZWN0ZWREYXk9YS5jdXJyZW50RGF5PSQoImEiLHQpLmh0bWwoKTthLnNlbGVjdGVkTW9udGg9YS5jdXJyZW50TW9udGg9bTthLnNlbGVjdGVkWWVhcj1hLmN1cnJlbnRZZWFyPXk7dGhpcy5fc2VsZWN0RGF0ZShpLHRoaXMuX2Zvcm1hdERhdGUoYSxhLmN1cnJlbnREYXksYS5jdXJyZW50TW9udGgsYS5jdXJyZW50WWVhcikpfSxfY2xlYXJEYXRlOmZ1bmN0aW9uKGkpe3ZhciB0PSQoaSk7dGhpcy5fc2VsZWN0RGF0ZSh0LCIiKX0sX3NlbGVjdERhdGU6ZnVuY3Rpb24oaSxhKXt2YXIgbyx0PSQoaSksYj10aGlzLl9nZXRJbnN0KHRbMF0pO2E9KGEhPW51bGw/YTp0aGlzLl9mb3JtYXREYXRlKGIpKTtpZihiLmlucHV0KXtiLmlucHV0LnZhbChhKX10aGlzLl91cGRhdGVBbHRlcm5hdGUoYik7bz10aGlzLl9nZXQoYiwib25TZWxlY3QiKTtpZihvKXtvLmFwcGx5KChiLmlucHV0P2IuaW5wdXRbMF06bnVsbCksW2EsYl0pfWVsc2UgaWYoYi5pbnB1dCl7Yi5pbnB1dC50cmlnZ2VyKCJjaGFuZ2UiKX1pZihiLmlubGluZSl7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihiKX1lbHNle3RoaXMuX2hpZGVEYXRlcGlja2VyKCk7dGhpcy5fbGFzdElucHV0PWIuaW5wdXRbMF07aWYodHlwZW9mKGIuaW5wdXRbMF0pIT09Im9iamVjdCIpe2IuaW5wdXQuZm9jdXMoKX10aGlzLl9sYXN0SW5wdXQ9bnVsbH19LF91cGRhdGVBbHRlcm5hdGU6ZnVuY3Rpb24oaSl7dmFyIGEsYixlLGc9dGhpcy5fZ2V0KGksImFsdEZpZWxkIik7aWYoZyl7YT10aGlzLl9nZXQoaSwiYWx0Rm9ybWF0Iil8fHRoaXMuX2dldChpLCJkYXRlRm9ybWF0Iik7Yj10aGlzLl9nZXREYXRlKGkpO2U9dGhpcy5mb3JtYXREYXRlKGEsYix0aGlzLl9nZXRGb3JtYXRDb25maWcoaSkpOyQoZykuZWFjaChmdW5jdGlvbigpeyQodGhpcykudmFsKGUpfSl9fSxub1dlZWtlbmRzOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0RGF5KCk7cmV0dXJuWyhiPjAmJmI8NiksIiJdfSxpc284NjAxV2VlazpmdW5jdGlvbihhKXt2YXIgdCxiPW5ldyBEYXRlKGEuZ2V0VGltZSgpKTtiLnNldERhdGUoYi5nZXREYXRlKCkrNC0oYi5nZXREYXkoKXx8NykpO3Q9Yi5nZXRUaW1lKCk7Yi5zZXRNb250aCgwKTtiLnNldERhdGUoMSk7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yb3VuZCgodC1iKS84NjQwMDAwMCkvNykrMX0scGFyc2VEYXRlOmZ1bmN0aW9uKGUsZyxzKXtpZihlPT1udWxsfHxnPT1udWxsKXt0aHJvdyJJbnZhbGlkIGFyZ3VtZW50cyJ9Zz0odHlwZW9mIGc9PT0ib2JqZWN0Ij9nLnRvU3RyaW5nKCk6ZysiIik7aWYoZz09PSIiKXtyZXR1cm4gbnVsbH12YXIgRixoLGosVj0wLGw9KHM/cy5zaG9ydFllYXJDdXRvZmY6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLnNob3J0WWVhckN1dG9mZixtPSh0eXBlb2YgbCE9PSJzdHJpbmciP2w6bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpJTEwMCtwYXJzZUludChsLDEwKSksbj0ocz9zLmRheU5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzU2hvcnQsbz0ocz9zLmRheU5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lcyxwPShzP3MubW9udGhOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzU2hvcnQscT0ocz9zLm1vbnRoTmFtZXM6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXMseT0tMSxyPS0xLHQ9LTEsdz0tMSx4PWZhbHNlLHosQT1mdW5jdGlvbihhKXt2YXIgYj0oRisxPGUubGVuZ3RoJiZlLmNoYXJBdChGKzEpPT09YSk7aWYoYil7RisrfXJldHVybiBifSxCPWZ1bmN0aW9uKGEpe3ZhciBpPUEoYSksYj0oYT09PSJAIj8xNDooYT09PSIhIj8yMDooYT09PSJ5IiYmaT80OihhPT09Im8iPzM6MikpKSksaz1uZXcgUmVnRXhwKCJeXFxkezEsIitiKyJ9Iiksdj1nLnN1YnN0cmluZyhWKS5tYXRjaChrKTtpZighdil7dGhyb3ciTWlzc2luZyBudW1iZXIgYXQgcG9zaXRpb24gIitWfVYrPXZbMF0ubGVuZ3RoO3JldHVybiBwYXJzZUludCh2WzBdLDEwKX0sQz1mdW5jdGlvbihHLEgsSSl7dmFyIEo9LTEsSz0kLm1hcChBKEcpP0k6SCxmdW5jdGlvbih2LGspe3JldHVybltbayx2XV19KS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuLShhWzFdLmxlbmd0aC1iWzFdLmxlbmd0aCl9KTskLmVhY2goSyxmdW5jdGlvbihpLGEpe3ZhciBiPWFbMV07aWYoZy5zdWJzdHIoVixiLmxlbmd0aCkudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKSl7Sj1hWzBdO1YrPWIubGVuZ3RoO3JldHVybiBmYWxzZX19KTtpZihKIT09LTEpe3JldHVybiBKKzF9ZWxzZXt0aHJvdyJVbmtub3duIG5hbWUgYXQgcG9zaXRpb24gIitWfX0sRT1mdW5jdGlvbigpe2lmKGcuY2hhckF0KFYpIT09ZS5jaGFyQXQoRikpe3Rocm93IlVuZXhwZWN0ZWQgbGl0ZXJhbCBhdCBwb3NpdGlvbiAiK1Z9VisrfTtmb3IoRj0wO0Y8ZS5sZW5ndGg7RisrKXtpZih4KXtpZihlLmNoYXJBdChGKT09PSInIiYmIUEoIiciKSl7eD1mYWxzZX1lbHNle0UoKX19ZWxzZXtzd2l0Y2goZS5jaGFyQXQoRikpe2Nhc2UiZCI6dD1CKCJkIik7YnJlYWs7Y2FzZSJEIjpDKCJEIixuLG8pO2JyZWFrO2Nhc2UibyI6dz1CKCJvIik7YnJlYWs7Y2FzZSJtIjpyPUIoIm0iKTticmVhaztjYXNlIk0iOnI9QygiTSIscCxxKTticmVhaztjYXNlInkiOnk9QigieSIpO2JyZWFrO2Nhc2UiQCI6ej1uZXcgRGF0ZShCKCJAIikpO3k9ei5nZXRGdWxsWWVhcigpO3I9ei5nZXRNb250aCgpKzE7dD16LmdldERhdGUoKTticmVhaztjYXNlIiEiOno9bmV3IERhdGUoKEIoIiEiKS10aGlzLl90aWNrc1RvMTk3MCkvMTAwMDApO3k9ei5nZXRGdWxsWWVhcigpO3I9ei5nZXRNb250aCgpKzE7dD16LmdldERhdGUoKTticmVhaztjYXNlIiciOmlmKEEoIiciKSl7RSgpfWVsc2V7eD10cnVlfWJyZWFrO2RlZmF1bHQ6RSgpfX19aWYoVjxnLmxlbmd0aCl7aj1nLnN1YnN0cihWKTtpZighL15ccysvLnRlc3Qoaikpe3Rocm93IkV4dHJhL3VucGFyc2VkIGNoYXJhY3RlcnMgZm91bmQgaW4gZGF0ZTogIitqfX1pZih5PT09LTEpe3k9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpfWVsc2UgaWYoeTwxMDApe3krPW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKS1uZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCklMTAwKyh5PD1tPzA6LTEwMCl9aWYodz4tMSl7cj0xO3Q9dztkb3toPXRoaXMuX2dldERheXNJbk1vbnRoKHksci0xKTtpZih0PD1oKXticmVha31yKys7dC09aH13aGlsZSh0cnVlKX16PXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHksci0xLHQpKTtpZih6LmdldEZ1bGxZZWFyKCkhPT15fHx6LmdldE1vbnRoKCkrMSE9PXJ8fHouZ2V0RGF0ZSgpIT09dCl7dGhyb3ciSW52YWxpZCBkYXRlIn1yZXR1cm4gen0sQVRPTToieXktbW0tZGQiLENPT0tJRToiRCwgZGQgTSB5eSIsSVNPXzg2MDE6Inl5LW1tLWRkIixSRkNfODIyOiJELCBkIE0geSIsUkZDXzg1MDoiREQsIGRkLU0teSIsUkZDXzEwMzY6IkQsIGQgTSB5IixSRkNfMTEyMzoiRCwgZCBNIHl5IixSRkNfMjgyMjoiRCwgZCBNIHl5IixSU1M6IkQsIGQgTSB5IixUSUNLUzoiISIsVElNRVNUQU1QOiJAIixXM0M6Inl5LW1tLWRkIixfdGlja3NUbzE5NzA6KCgoMTk3MC0xKSozNjUrTWF0aC5mbG9vcigxOTcwLzQpLU1hdGguZmxvb3IoMTk3MC8xMDApK01hdGguZmxvb3IoMTk3MC80MDApKSoyNCo2MCo2MCoxMDAwMDAwMCksZm9ybWF0RGF0ZTpmdW5jdGlvbihhLGIscyl7aWYoIWIpe3JldHVybiIifXZhciBGLGU9KHM/cy5kYXlOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LGc9KHM/cy5kYXlOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXMsbT0ocz9zLm1vbnRoTmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LGg9KHM/cy5tb250aE5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLGw9ZnVuY3Rpb24obil7dmFyIHA9KEYrMTxhLmxlbmd0aCYmYS5jaGFyQXQoRisxKT09PW4pO2lmKHApe0YrK31yZXR1cm4gcH0saT1mdW5jdGlvbihuLHYscCl7dmFyIHE9IiIrdjtpZihsKG4pKXt3aGlsZShxLmxlbmd0aDxwKXtxPSIwIitxfX1yZXR1cm4gcX0saj1mdW5jdGlvbihuLHYscCxxKXtyZXR1cm4obChuKT9xW3ZdOnBbdl0pfSxvPSIiLGs9ZmFsc2U7aWYoYil7Zm9yKEY9MDtGPGEubGVuZ3RoO0YrKyl7aWYoayl7aWYoYS5jaGFyQXQoRik9PT0iJyImJiFsKCInIikpe2s9ZmFsc2V9ZWxzZXtvKz1hLmNoYXJBdChGKX19ZWxzZXtzd2l0Y2goYS5jaGFyQXQoRikpe2Nhc2UiZCI6bys9aSgiZCIsYi5nZXREYXRlKCksMik7YnJlYWs7Y2FzZSJEIjpvKz1qKCJEIixiLmdldERheSgpLGUsZyk7YnJlYWs7Y2FzZSJvIjpvKz1pKCJvIixNYXRoLnJvdW5kKChuZXcgRGF0ZShiLmdldEZ1bGxZZWFyKCksYi5nZXRNb250aCgpLGIuZ2V0RGF0ZSgpKS5nZXRUaW1lKCktbmV3IERhdGUoYi5nZXRGdWxsWWVhcigpLDAsMCkuZ2V0VGltZSgpKS84NjQwMDAwMCksMyk7YnJlYWs7Y2FzZSJtIjpvKz1pKCJtIixiLmdldE1vbnRoKCkrMSwyKTticmVhaztjYXNlIk0iOm8rPWooIk0iLGIuZ2V0TW9udGgoKSxtLGgpO2JyZWFrO2Nhc2UieSI6bys9KGwoInkiKT9iLmdldEZ1bGxZZWFyKCk6KGIuZ2V0WWVhcigpJTEwMDwxMD8iMCI6IiIpK2IuZ2V0WWVhcigpJTEwMCk7YnJlYWs7Y2FzZSJAIjpvKz1iLmdldFRpbWUoKTticmVhaztjYXNlIiEiOm8rPWIuZ2V0VGltZSgpKjEwMDAwK3RoaXMuX3RpY2tzVG8xOTcwO2JyZWFrO2Nhc2UiJyI6aWYobCgiJyIpKXtvKz0iJyJ9ZWxzZXtrPXRydWV9YnJlYWs7ZGVmYXVsdDpvKz1hLmNoYXJBdChGKX19fX1yZXR1cm4gb30sX3Bvc3NpYmxlQ2hhcnM6ZnVuY3Rpb24oYSl7dmFyIEYsYj0iIixsPWZhbHNlLGU9ZnVuY3Rpb24obSl7dmFyIGc9KEYrMTxhLmxlbmd0aCYmYS5jaGFyQXQoRisxKT09PW0pO2lmKGcpe0YrK31yZXR1cm4gZ307Zm9yKEY9MDtGPGEubGVuZ3RoO0YrKyl7aWYobCl7aWYoYS5jaGFyQXQoRik9PT0iJyImJiFlKCInIikpe2w9ZmFsc2V9ZWxzZXtiKz1hLmNoYXJBdChGKX19ZWxzZXtzd2l0Y2goYS5jaGFyQXQoRikpe2Nhc2UiZCI6Y2FzZSJtIjpjYXNlInkiOmNhc2UiQCI6Yis9IjAxMjM0NTY3ODkiO2JyZWFrO2Nhc2UiRCI6Y2FzZSJNIjpyZXR1cm4gbnVsbDtjYXNlIiciOmlmKGUoIiciKSl7Yis9IicifWVsc2V7bD10cnVlfWJyZWFrO2RlZmF1bHQ6Yis9YS5jaGFyQXQoRil9fX1yZXR1cm4gYn0sX2dldDpmdW5jdGlvbihpLG4pe3JldHVybiBpLnNldHRpbmdzW25dIT09dT9pLnNldHRpbmdzW25dOnRoaXMuX2RlZmF1bHRzW25dfSxfc2V0RGF0ZUZyb21GaWVsZDpmdW5jdGlvbihpLG4pe2lmKGkuaW5wdXQudmFsKCk9PT1pLmxhc3RWYWwpe3JldHVybn12YXIgYT10aGlzLl9nZXQoaSwiZGF0ZUZvcm1hdCIpLGI9aS5sYXN0VmFsPWkuaW5wdXQ/aS5pbnB1dC52YWwoKTpudWxsLGU9dGhpcy5fZ2V0RGVmYXVsdERhdGUoaSksZz1lLHM9dGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGkpO3RyeXtnPXRoaXMucGFyc2VEYXRlKGEsYixzKXx8ZX1jYXRjaChoKXtiPShuPyIiOmIpfWkuc2VsZWN0ZWREYXk9Zy5nZXREYXRlKCk7aS5kcmF3TW9udGg9aS5zZWxlY3RlZE1vbnRoPWcuZ2V0TW9udGgoKTtpLmRyYXdZZWFyPWkuc2VsZWN0ZWRZZWFyPWcuZ2V0RnVsbFllYXIoKTtpLmN1cnJlbnREYXk9KGI/Zy5nZXREYXRlKCk6MCk7aS5jdXJyZW50TW9udGg9KGI/Zy5nZXRNb250aCgpOjApO2kuY3VycmVudFllYXI9KGI/Zy5nZXRGdWxsWWVhcigpOjApO3RoaXMuX2FkanVzdEluc3REYXRlKGkpfSxfZ2V0RGVmYXVsdERhdGU6ZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuX3Jlc3RyaWN0TWluTWF4KGksdGhpcy5fZGV0ZXJtaW5lRGF0ZShpLHRoaXMuX2dldChpLCJkZWZhdWx0RGF0ZSIpLG5ldyBEYXRlKCkpKX0sX2RldGVybWluZURhdGU6ZnVuY3Rpb24oaSxhLGIpe3ZhciBvPWZ1bmN0aW9uKGUpe3ZhciBhPW5ldyBEYXRlKCk7YS5zZXREYXRlKGEuZ2V0RGF0ZSgpK2UpO3JldHVybiBhfSxnPWZ1bmN0aW9uKGgpe3RyeXtyZXR1cm4gJC5kYXRlcGlja2VyLnBhcnNlRGF0ZSgkLmRhdGVwaWNrZXIuX2dldChpLCJkYXRlRm9ybWF0IiksaCwkLmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyhpKSl9Y2F0Y2goZSl7fXZhciBhPShoLnRvTG93ZXJDYXNlKCkubWF0Y2goL15jLyk/JC5kYXRlcGlja2VyLl9nZXREYXRlKGkpOm51bGwpfHxuZXcgRGF0ZSgpLHk9YS5nZXRGdWxsWWVhcigpLG09YS5nZXRNb250aCgpLGo9YS5nZXREYXRlKCkscD0vKFsrXC1dP1swLTldKylccyooZHxEfHd8V3xtfE18eXxZKT8vZyxrPXAuZXhlYyhoKTt3aGlsZShrKXtzd2l0Y2goa1syXXx8ImQiKXtjYXNlImQiOmNhc2UiRCI6ais9cGFyc2VJbnQoa1sxXSwxMCk7YnJlYWs7Y2FzZSJ3IjpjYXNlIlciOmorPXBhcnNlSW50KGtbMV0sMTApKjc7YnJlYWs7Y2FzZSJtIjpjYXNlIk0iOm0rPXBhcnNlSW50KGtbMV0sMTApO2o9TWF0aC5taW4oaiwkLmRhdGVwaWNrZXIuX2dldERheXNJbk1vbnRoKHksbSkpO2JyZWFrO2Nhc2UieSI6Y2FzZSJZIjp5Kz1wYXJzZUludChrWzFdLDEwKTtqPU1hdGgubWluKGosJC5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aCh5LG0pKTticmVha31rPXAuZXhlYyhoKX1yZXR1cm4gbmV3IERhdGUoeSxtLGopfSxuPShhPT1udWxsfHxhPT09IiI/YjoodHlwZW9mIGE9PT0ic3RyaW5nIj9nKGEpOih0eXBlb2YgYT09PSJudW1iZXIiPyhpc05hTihhKT9iOm8oYSkpOm5ldyBEYXRlKGEuZ2V0VGltZSgpKSkpKTtuPShuJiZuLnRvU3RyaW5nKCk9PT0iSW52YWxpZCBEYXRlIj9iOm4pO2lmKG4pe24uc2V0SG91cnMoMCk7bi5zZXRNaW51dGVzKDApO24uc2V0U2Vjb25kcygwKTtuLnNldE1pbGxpc2Vjb25kcygwKX1yZXR1cm4gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3Qobil9LF9kYXlsaWdodFNhdmluZ0FkanVzdDpmdW5jdGlvbihhKXtpZighYSl7cmV0dXJuIG51bGx9YS5zZXRIb3VycyhhLmdldEhvdXJzKCk+MTI/YS5nZXRIb3VycygpKzI6MCk7cmV0dXJuIGF9LF9zZXREYXRlOmZ1bmN0aW9uKGksYSxuKXt2YXIgYj0hYSxvPWkuc2VsZWN0ZWRNb250aCxlPWkuc2VsZWN0ZWRZZWFyLGc9dGhpcy5fcmVzdHJpY3RNaW5NYXgoaSx0aGlzLl9kZXRlcm1pbmVEYXRlKGksYSxuZXcgRGF0ZSgpKSk7aS5zZWxlY3RlZERheT1pLmN1cnJlbnREYXk9Zy5nZXREYXRlKCk7aS5kcmF3TW9udGg9aS5zZWxlY3RlZE1vbnRoPWkuY3VycmVudE1vbnRoPWcuZ2V0TW9udGgoKTtpLmRyYXdZZWFyPWkuc2VsZWN0ZWRZZWFyPWkuY3VycmVudFllYXI9Zy5nZXRGdWxsWWVhcigpO2lmKChvIT09aS5zZWxlY3RlZE1vbnRofHxlIT09aS5zZWxlY3RlZFllYXIpJiYhbil7dGhpcy5fbm90aWZ5Q2hhbmdlKGkpfXRoaXMuX2FkanVzdEluc3REYXRlKGkpO2lmKGkuaW5wdXQpe2kuaW5wdXQudmFsKGI/IiI6dGhpcy5fZm9ybWF0RGF0ZShpKSl9fSxfZ2V0RGF0ZTpmdW5jdGlvbihpKXt2YXIgcz0oIWkuY3VycmVudFllYXJ8fChpLmlucHV0JiZpLmlucHV0LnZhbCgpPT09IiIpP251bGw6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaS5jdXJyZW50WWVhcixpLmN1cnJlbnRNb250aCxpLmN1cnJlbnREYXkpKSk7cmV0dXJuIHN9LF9hdHRhY2hIYW5kbGVyczpmdW5jdGlvbihpKXt2YXIgcz10aGlzLl9nZXQoaSwic3RlcE1vbnRocyIpLGE9IiMiK2kuaWQucmVwbGFjZSgvXFxcXC9nLCJcXCIpO2kuZHBEaXYuZmluZCgiW2RhdGEtaGFuZGxlcl0iKS5tYXAoZnVuY3Rpb24oKXt2YXIgaD17cHJldjpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShhLC1zLCJNIil9LG5leHQ6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoYSwrcywiTSIpfSxoaWRlOmZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpfSx0b2RheTpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fZ290b1RvZGF5KGEpfSxzZWxlY3REYXk6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX3NlbGVjdERheShhLCt0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS1tb250aCIpLCt0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS15ZWFyIiksdGhpcyk7cmV0dXJuIGZhbHNlfSxzZWxlY3RNb250aDpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKGEsdGhpcywiTSIpO3JldHVybiBmYWxzZX0sc2VsZWN0WWVhcjpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKGEsdGhpcywiWSIpO3JldHVybiBmYWxzZX19OyQodGhpcykuYmluZCh0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS1ldmVudCIpLGhbdGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEtaGFuZGxlciIpXSl9KX0sX2dlbmVyYXRlSFRNTDpmdW5jdGlvbihpKXt2YXIgbSxwLGEsbixiLGUsZyxoLGosayxzLGwsbyxxLHIsdCx2LHcseCx5LHosQSxCLEMsRSxGLEcsSCxJLEosSyxMLE0sTixSLE8sUSxTLFQsVT1uZXcgRGF0ZSgpLFY9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoVS5nZXRGdWxsWWVhcigpLFUuZ2V0TW9udGgoKSxVLmdldERhdGUoKSkpLFc9dGhpcy5fZ2V0KGksImlzUlRMIiksWD10aGlzLl9nZXQoaSwic2hvd0J1dHRvblBhbmVsIiksWT10aGlzLl9nZXQoaSwiaGlkZUlmTm9QcmV2TmV4dCIpLFo9dGhpcy5fZ2V0KGksIm5hdmlnYXRpb25Bc0RhdGVGb3JtYXQiKSxfPXRoaXMuX2dldE51bWJlck9mTW9udGhzKGkpLGExPXRoaXMuX2dldChpLCJzaG93Q3VycmVudEF0UG9zIiksYjE9dGhpcy5fZ2V0KGksInN0ZXBNb250aHMiKSxjMT0oX1swXSE9PTF8fF9bMV0hPT0xKSxkMT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCgoIWkuY3VycmVudERheT9uZXcgRGF0ZSg5OTk5LDksOSk6bmV3IERhdGUoaS5jdXJyZW50WWVhcixpLmN1cnJlbnRNb250aCxpLmN1cnJlbnREYXkpKSksZTE9dGhpcy5fZ2V0TWluTWF4RGF0ZShpLCJtaW4iKSxmMT10aGlzLl9nZXRNaW5NYXhEYXRlKGksIm1heCIpLGcxPWkuZHJhd01vbnRoLWExLGgxPWkuZHJhd1llYXI7aWYoZzE8MCl7ZzErPTEyO2gxLS19aWYoZjEpe209dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZjEuZ2V0RnVsbFllYXIoKSxmMS5nZXRNb250aCgpLShfWzBdKl9bMV0pKzEsZjEuZ2V0RGF0ZSgpKSk7bT0oZTEmJm08ZTE/ZTE6bSk7d2hpbGUodGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaDEsZzEsMSkpPm0pe2cxLS07aWYoZzE8MCl7ZzE9MTE7aDEtLX19fWkuZHJhd01vbnRoPWcxO2kuZHJhd1llYXI9aDE7cD10aGlzLl9nZXQoaSwicHJldlRleHQiKTtwPSghWj9wOnRoaXMuZm9ybWF0RGF0ZShwLHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGgxLGcxLWIxLDEpKSx0aGlzLl9nZXRGb3JtYXRDb25maWcoaSkpKTthPSh0aGlzLl9jYW5BZGp1c3RNb250aChpLC0xLGgxLGcxKT8iPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItcHJldiB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J3ByZXYnIGRhdGEtZXZlbnQ9J2NsaWNrJyIrIiB0aXRsZT0nIitwKyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKFc/ImUiOiJ3IikrIic+IitwKyI8L3NwYW4+PC9hPiI6KFk/IiI6IjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLXByZXYgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1kaXNhYmxlZCcgdGl0bGU9JyIrcCsiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0iKyhXPyJlIjoidyIpKyInPiIrcCsiPC9zcGFuPjwvYT4iKSk7bj10aGlzLl9nZXQoaSwibmV4dFRleHQiKTtuPSghWj9uOnRoaXMuZm9ybWF0RGF0ZShuLHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGgxLGcxK2IxLDEpKSx0aGlzLl9nZXRGb3JtYXRDb25maWcoaSkpKTtiPSh0aGlzLl9jYW5BZGp1c3RNb250aChpLCsxLGgxLGcxKT8iPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J25leHQnIGRhdGEtZXZlbnQ9J2NsaWNrJyIrIiB0aXRsZT0nIituKyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKFc/InciOiJlIikrIic+IituKyI8L3NwYW4+PC9hPiI6KFk/IiI6IjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLW5leHQgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1kaXNhYmxlZCcgdGl0bGU9JyIrbisiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0iKyhXPyJ3IjoiZSIpKyInPiIrbisiPC9zcGFuPjwvYT4iKSk7ZT10aGlzLl9nZXQoaSwiY3VycmVudFRleHQiKTtnPSh0aGlzLl9nZXQoaSwiZ290b0N1cnJlbnQiKSYmaS5jdXJyZW50RGF5P2QxOlYpO2U9KCFaP2U6dGhpcy5mb3JtYXREYXRlKGUsZyx0aGlzLl9nZXRGb3JtYXRDb25maWcoaSkpKTtoPSghaS5pbmxpbmU/IjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0ndWktZGF0ZXBpY2tlci1jbG9zZSB1aS1zdGF0ZS1kZWZhdWx0IHVpLXByaW9yaXR5LXByaW1hcnkgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSdoaWRlJyBkYXRhLWV2ZW50PSdjbGljayc+Iit0aGlzLl9nZXQoaSwiY2xvc2VUZXh0IikrIjwvYnV0dG9uPiI6IiIpO2o9KFgpPyI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLWJ1dHRvbnBhbmUgdWktd2lkZ2V0LWNvbnRlbnQnPiIrKFc/aDoiIikrKHRoaXMuX2lzSW5SYW5nZShpLGcpPyI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J3VpLWRhdGVwaWNrZXItY3VycmVudCB1aS1zdGF0ZS1kZWZhdWx0IHVpLXByaW9yaXR5LXNlY29uZGFyeSB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J3RvZGF5JyBkYXRhLWV2ZW50PSdjbGljayciKyI+IitlKyI8L2J1dHRvbj4iOiIiKSsoVz8iIjpoKSsiPC9kaXY+IjoiIjtrPXBhcnNlSW50KHRoaXMuX2dldChpLCJmaXJzdERheSIpLDEwKTtrPShpc05hTihrKT8wOmspO3M9dGhpcy5fZ2V0KGksInNob3dXZWVrIik7bD10aGlzLl9nZXQoaSwiZGF5TmFtZXMiKTtvPXRoaXMuX2dldChpLCJkYXlOYW1lc01pbiIpO3E9dGhpcy5fZ2V0KGksIm1vbnRoTmFtZXMiKTtyPXRoaXMuX2dldChpLCJtb250aE5hbWVzU2hvcnQiKTt0PXRoaXMuX2dldChpLCJiZWZvcmVTaG93RGF5Iik7dj10aGlzLl9nZXQoaSwic2hvd090aGVyTW9udGhzIik7dz10aGlzLl9nZXQoaSwic2VsZWN0T3RoZXJNb250aHMiKTt4PXRoaXMuX2dldERlZmF1bHREYXRlKGkpO3k9IiI7ejtmb3IoQT0wO0E8X1swXTtBKyspe0I9IiI7dGhpcy5tYXhSb3dzPTQ7Zm9yKEM9MDtDPF9bMV07QysrKXtFPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGgxLGcxLGkuc2VsZWN0ZWREYXkpKTtGPSIgdWktY29ybmVyLWFsbCI7Rz0iIjtpZihjMSl7Rys9IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItZ3JvdXAiO2lmKF9bMV0+MSl7c3dpdGNoKEMpe2Nhc2UgMDpHKz0iIHVpLWRhdGVwaWNrZXItZ3JvdXAtZmlyc3QiO0Y9IiB1aS1jb3JuZXItIisoVz8icmlnaHQiOiJsZWZ0Iik7YnJlYWs7Y2FzZSBfWzFdLTE6Rys9IiB1aS1kYXRlcGlja2VyLWdyb3VwLWxhc3QiO0Y9IiB1aS1jb3JuZXItIisoVz8ibGVmdCI6InJpZ2h0Iik7YnJlYWs7ZGVmYXVsdDpHKz0iIHVpLWRhdGVwaWNrZXItZ3JvdXAtbWlkZGxlIjtGPSIiO2JyZWFrfX1HKz0iJz4ifUcrPSI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLWhlYWRlciB1aS13aWRnZXQtaGVhZGVyIHVpLWhlbHBlci1jbGVhcmZpeCIrRisiJz4iKygvYWxsfGxlZnQvLnRlc3QoRikmJkE9PT0wPyhXP2I6YSk6IiIpKygvYWxsfHJpZ2h0Ly50ZXN0KEYpJiZBPT09MD8oVz9hOmIpOiIiKSt0aGlzLl9nZW5lcmF0ZU1vbnRoWWVhckhlYWRlcihpLGcxLGgxLGUxLGYxLEE+MHx8Qz4wLHEscikrIjwvZGl2Pjx0YWJsZSBjbGFzcz0ndWktZGF0ZXBpY2tlci1jYWxlbmRhcic+PHRoZWFkPiIrIjx0cj4iO0g9KHM/Ijx0aCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+Iit0aGlzLl9nZXQoaSwid2Vla0hlYWRlciIpKyI8L3RoPiI6IiIpO2Zvcih6PTA7ejw3O3orKyl7ST0oeitrKSU3O0grPSI8dGgiKygoeitrKzYpJTc+PTU/IiBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWVuZCciOiIiKSsiPiIrIjxzcGFuIHRpdGxlPSciK2xbSV0rIic+IitvW0ldKyI8L3NwYW4+PC90aD4ifUcrPUgrIjwvdHI+PC90aGVhZD48dGJvZHk+IjtKPXRoaXMuX2dldERheXNJbk1vbnRoKGgxLGcxKTtpZihoMT09PWkuc2VsZWN0ZWRZZWFyJiZnMT09PWkuc2VsZWN0ZWRNb250aCl7aS5zZWxlY3RlZERheT1NYXRoLm1pbihpLnNlbGVjdGVkRGF5LEopfUs9KHRoaXMuX2dldEZpcnN0RGF5T2ZNb250aChoMSxnMSktays3KSU3O0w9TWF0aC5jZWlsKChLK0opLzcpO009KGMxP3RoaXMubWF4Um93cz5MP3RoaXMubWF4Um93czpMOkwpO3RoaXMubWF4Um93cz1NO049dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaDEsZzEsMS1LKSk7Zm9yKFI9MDtSPE07UisrKXtHKz0iPHRyPiI7Tz0oIXM/IiI6Ijx0ZCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+Iit0aGlzLl9nZXQoaSwiY2FsY3VsYXRlV2VlayIpKE4pKyI8L3RkPiIpO2Zvcih6PTA7ejw3O3orKyl7UT0odD90LmFwcGx5KChpLmlucHV0P2kuaW5wdXRbMF06bnVsbCksW05dKTpbdHJ1ZSwiIl0pO1M9KE4uZ2V0TW9udGgoKSE9PWcxKTtUPShTJiYhdyl8fCFRWzBdfHwoZTEmJk48ZTEpfHwoZjEmJk4+ZjEpO08rPSI8dGQgY2xhc3M9JyIrKCh6K2srNiklNz49NT8iIHVpLWRhdGVwaWNrZXItd2Vlay1lbmQiOiIiKSsoUz8iIHVpLWRhdGVwaWNrZXItb3RoZXItbW9udGgiOiIiKSsoKE4uZ2V0VGltZSgpPT09RS5nZXRUaW1lKCkmJmcxPT09aS5zZWxlY3RlZE1vbnRoJiZpLl9rZXlFdmVudCl8fCh4LmdldFRpbWUoKT09PU4uZ2V0VGltZSgpJiZ4LmdldFRpbWUoKT09PUUuZ2V0VGltZSgpKT8iICIrdGhpcy5fZGF5T3ZlckNsYXNzOiIiKSsoVD8iICIrdGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MrIiB1aS1zdGF0ZS1kaXNhYmxlZCI6IiIpKyhTJiYhdj8iIjoiICIrUVsxXSsoTi5nZXRUaW1lKCk9PT1kMS5nZXRUaW1lKCk/IiAiK3RoaXMuX2N1cnJlbnRDbGFzczoiIikrKE4uZ2V0VGltZSgpPT09Vi5nZXRUaW1lKCk/IiB1aS1kYXRlcGlja2VyLXRvZGF5IjoiIikpKyInIisoKCFTfHx2KSYmUVsyXT8iIHRpdGxlPSciK1FbMl0ucmVwbGFjZSgvJy9nLCImIzM5OyIpKyInIjoiIikrKFQ/IiI6IiBkYXRhLWhhbmRsZXI9J3NlbGVjdERheScgZGF0YS1ldmVudD0nY2xpY2snIGRhdGEtbW9udGg9JyIrTi5nZXRNb250aCgpKyInIGRhdGEteWVhcj0nIitOLmdldEZ1bGxZZWFyKCkrIiciKSsiPiIrKFMmJiF2PyImI3hhMDsiOihUPyI8c3BhbiBjbGFzcz0ndWktc3RhdGUtZGVmYXVsdCc+IitOLmdldERhdGUoKSsiPC9zcGFuPiI6IjxhIGNsYXNzPSd1aS1zdGF0ZS1kZWZhdWx0IisoTi5nZXRUaW1lKCk9PT1WLmdldFRpbWUoKT8iIHVpLXN0YXRlLWhpZ2hsaWdodCI6IiIpKyhOLmdldFRpbWUoKT09PWQxLmdldFRpbWUoKT8iIHVpLXN0YXRlLWFjdGl2ZSI6IiIpKyhTPyIgdWktcHJpb3JpdHktc2Vjb25kYXJ5IjoiIikrIicgaHJlZj0nIyc+IitOLmdldERhdGUoKSsiPC9hPiIpKSsiPC90ZD4iO04uc2V0RGF0ZShOLmdldERhdGUoKSsxKTtOPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KE4pfUcrPU8rIjwvdHI+In1nMSsrO2lmKGcxPjExKXtnMT0wO2gxKyt9Rys9IjwvdGJvZHk+PC90YWJsZT4iKyhjMT8iPC9kaXY+IisoKF9bMF0+MCYmQz09PV9bMV0tMSk/IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItcm93LWJyZWFrJz48L2Rpdj4iOiIiKToiIik7Qis9R315Kz1CfXkrPWo7aS5fa2V5RXZlbnQ9ZmFsc2U7cmV0dXJuIHl9LF9nZW5lcmF0ZU1vbnRoWWVhckhlYWRlcjpmdW5jdGlvbihpLGEsYixtLGUscyxnLGgpe3ZhciBqLGssbCx5LHQsbixvLHAscT10aGlzLl9nZXQoaSwiY2hhbmdlTW9udGgiKSxyPXRoaXMuX2dldChpLCJjaGFuZ2VZZWFyIiksdj10aGlzLl9nZXQoaSwic2hvd01vbnRoQWZ0ZXJZZWFyIiksdz0iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci10aXRsZSc+Iix4PSIiO2lmKHN8fCFxKXt4Kz0iPHNwYW4gY2xhc3M9J3VpLWRhdGVwaWNrZXItbW9udGgnPiIrZ1thXSsiPC9zcGFuPiJ9ZWxzZXtqPShtJiZtLmdldEZ1bGxZZWFyKCk9PT1iKTtrPShlJiZlLmdldEZ1bGxZZWFyKCk9PT1iKTt4Kz0iPHNlbGVjdCBjbGFzcz0ndWktZGF0ZXBpY2tlci1tb250aCcgZGF0YS1oYW5kbGVyPSdzZWxlY3RNb250aCcgZGF0YS1ldmVudD0nY2hhbmdlJz4iO2ZvcihsPTA7bDwxMjtsKyspe2lmKCghanx8bD49bS5nZXRNb250aCgpKSYmKCFrfHxsPD1lLmdldE1vbnRoKCkpKXt4Kz0iPG9wdGlvbiB2YWx1ZT0nIitsKyInIisobD09PWE/IiBzZWxlY3RlZD0nc2VsZWN0ZWQnIjoiIikrIj4iK2hbbF0rIjwvb3B0aW9uPiJ9fXgrPSI8L3NlbGVjdD4ifWlmKCF2KXt3Kz14KyhzfHwhKHEmJnIpPyImI3hhMDsiOiIiKX1pZighaS55ZWFyc2h0bWwpe2kueWVhcnNodG1sPSIiO2lmKHN8fCFyKXt3Kz0iPHNwYW4gY2xhc3M9J3VpLWRhdGVwaWNrZXIteWVhcic+IitiKyI8L3NwYW4+In1lbHNle3k9dGhpcy5fZ2V0KGksInllYXJSYW5nZSIpLnNwbGl0KCI6Iik7dD1uZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7bj1mdW5jdGlvbih6KXt2YXIgbz0oei5tYXRjaCgvY1srXC1dLiovKT9iK3BhcnNlSW50KHouc3Vic3RyaW5nKDEpLDEwKTooei5tYXRjaCgvWytcLV0uKi8pP3QrcGFyc2VJbnQoeiwxMCk6cGFyc2VJbnQoeiwxMCkpKTtyZXR1cm4oaXNOYU4obyk/dDpvKX07bz1uKHlbMF0pO3A9TWF0aC5tYXgobyxuKHlbMV18fCIiKSk7bz0obT9NYXRoLm1heChvLG0uZ2V0RnVsbFllYXIoKSk6byk7cD0oZT9NYXRoLm1pbihwLGUuZ2V0RnVsbFllYXIoKSk6cCk7aS55ZWFyc2h0bWwrPSI8c2VsZWN0IGNsYXNzPSd1aS1kYXRlcGlja2VyLXllYXInIGRhdGEtaGFuZGxlcj0nc2VsZWN0WWVhcicgZGF0YS1ldmVudD0nY2hhbmdlJz4iO2Zvcig7bzw9cDtvKyspe2kueWVhcnNodG1sKz0iPG9wdGlvbiB2YWx1ZT0nIitvKyInIisobz09PWI/IiBzZWxlY3RlZD0nc2VsZWN0ZWQnIjoiIikrIj4iK28rIjwvb3B0aW9uPiJ9aS55ZWFyc2h0bWwrPSI8L3NlbGVjdD4iO3crPWkueWVhcnNodG1sO2kueWVhcnNodG1sPW51bGx9fXcrPXRoaXMuX2dldChpLCJ5ZWFyU3VmZml4Iik7aWYodil7dys9KHN8fCEocSYmcik/IiYjeGEwOyI6IiIpK3h9dys9IjwvZGl2PiI7cmV0dXJuIHd9LF9hZGp1c3RJbnN0RGF0ZTpmdW5jdGlvbihpLG8scCl7dmFyIHk9aS5kcmF3WWVhcisocD09PSJZIj9vOjApLG09aS5kcmF3TW9udGgrKHA9PT0iTSI/bzowKSxhPU1hdGgubWluKGkuc2VsZWN0ZWREYXksdGhpcy5fZ2V0RGF5c0luTW9udGgoeSxtKSkrKHA9PT0iRCI/bzowKSxiPXRoaXMuX3Jlc3RyaWN0TWluTWF4KGksdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoeSxtLGEpKSk7aS5zZWxlY3RlZERheT1iLmdldERhdGUoKTtpLmRyYXdNb250aD1pLnNlbGVjdGVkTW9udGg9Yi5nZXRNb250aCgpO2kuZHJhd1llYXI9aS5zZWxlY3RlZFllYXI9Yi5nZXRGdWxsWWVhcigpO2lmKHA9PT0iTSJ8fHA9PT0iWSIpe3RoaXMuX25vdGlmeUNoYW5nZShpKX19LF9yZXN0cmljdE1pbk1heDpmdW5jdGlvbihpLGEpe3ZhciBtPXRoaXMuX2dldE1pbk1heERhdGUoaSwibWluIiksYj10aGlzLl9nZXRNaW5NYXhEYXRlKGksIm1heCIpLG49KG0mJmE8bT9tOmEpO3JldHVybihiJiZuPmI/YjpuKX0sX25vdGlmeUNoYW5nZTpmdW5jdGlvbihpKXt2YXIgbz10aGlzLl9nZXQoaSwib25DaGFuZ2VNb250aFllYXIiKTtpZihvKXtvLmFwcGx5KChpLmlucHV0P2kuaW5wdXRbMF06bnVsbCksW2kuc2VsZWN0ZWRZZWFyLGkuc2VsZWN0ZWRNb250aCsxLGldKX19LF9nZXROdW1iZXJPZk1vbnRoczpmdW5jdGlvbihpKXt2YXIgbj10aGlzLl9nZXQoaSwibnVtYmVyT2ZNb250aHMiKTtyZXR1cm4obj09bnVsbD9bMSwxXToodHlwZW9mIG49PT0ibnVtYmVyIj9bMSxuXTpuKSl9LF9nZXRNaW5NYXhEYXRlOmZ1bmN0aW9uKGksbSl7cmV0dXJuIHRoaXMuX2RldGVybWluZURhdGUoaSx0aGlzLl9nZXQoaSxtKyJEYXRlIiksbnVsbCl9LF9nZXREYXlzSW5Nb250aDpmdW5jdGlvbih5LG0pe3JldHVybiAzMi10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh5LG0sMzIpKS5nZXREYXRlKCl9LF9nZXRGaXJzdERheU9mTW9udGg6ZnVuY3Rpb24oeSxtKXtyZXR1cm4gbmV3IERhdGUoeSxtLDEpLmdldERheSgpfSxfY2FuQWRqdXN0TW9udGg6ZnVuY3Rpb24oaSxvLGEsYil7dmFyIG49dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaSksZT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShhLGIrKG88MD9vOm5bMF0qblsxXSksMSkpO2lmKG88MCl7ZS5zZXREYXRlKHRoaXMuX2dldERheXNJbk1vbnRoKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCkpKX1yZXR1cm4gdGhpcy5faXNJblJhbmdlKGksZSl9LF9pc0luUmFuZ2U6ZnVuY3Rpb24oaSxhKXt2YXIgeSxiLG09dGhpcy5fZ2V0TWluTWF4RGF0ZShpLCJtaW4iKSxlPXRoaXMuX2dldE1pbk1heERhdGUoaSwibWF4IiksZz1udWxsLGg9bnVsbCxqPXRoaXMuX2dldChpLCJ5ZWFyUmFuZ2UiKTtpZihqKXt5PWouc3BsaXQoIjoiKTtiPW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtnPXBhcnNlSW50KHlbMF0sMTApO2g9cGFyc2VJbnQoeVsxXSwxMCk7aWYoeVswXS5tYXRjaCgvWytcLV0uKi8pKXtnKz1ifWlmKHlbMV0ubWF0Y2goL1srXC1dLiovKSl7aCs9Yn19cmV0dXJuKCghbXx8YS5nZXRUaW1lKCk+PW0uZ2V0VGltZSgpKSYmKCFlfHxhLmdldFRpbWUoKTw9ZS5nZXRUaW1lKCkpJiYoIWd8fGEuZ2V0RnVsbFllYXIoKT49ZykmJighaHx8YS5nZXRGdWxsWWVhcigpPD1oKSl9LF9nZXRGb3JtYXRDb25maWc6ZnVuY3Rpb24oaSl7dmFyIHM9dGhpcy5fZ2V0KGksInNob3J0WWVhckN1dG9mZiIpO3M9KHR5cGVvZiBzIT09InN0cmluZyI/czpuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCklMTAwK3BhcnNlSW50KHMsMTApKTtyZXR1cm57c2hvcnRZZWFyQ3V0b2ZmOnMsZGF5TmFtZXNTaG9ydDp0aGlzLl9nZXQoaSwiZGF5TmFtZXNTaG9ydCIpLGRheU5hbWVzOnRoaXMuX2dldChpLCJkYXlOYW1lcyIpLG1vbnRoTmFtZXNTaG9ydDp0aGlzLl9nZXQoaSwibW9udGhOYW1lc1Nob3J0IiksbW9udGhOYW1lczp0aGlzLl9nZXQoaSwibW9udGhOYW1lcyIpfX0sX2Zvcm1hdERhdGU6ZnVuY3Rpb24oaSxhLG0seSl7aWYoIWEpe2kuY3VycmVudERheT1pLnNlbGVjdGVkRGF5O2kuY3VycmVudE1vbnRoPWkuc2VsZWN0ZWRNb250aDtpLmN1cnJlbnRZZWFyPWkuc2VsZWN0ZWRZZWFyfXZhciBiPShhPyh0eXBlb2YgYT09PSJvYmplY3QiP2E6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoeSxtLGEpKSk6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaS5jdXJyZW50WWVhcixpLmN1cnJlbnRNb250aCxpLmN1cnJlbnREYXkpKSk7cmV0dXJuIHRoaXMuZm9ybWF0RGF0ZSh0aGlzLl9nZXQoaSwiZGF0ZUZvcm1hdCIpLGIsdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGkpKX19KTtmdW5jdGlvbiBkKGEpe3ZhciBzPSJidXR0b24sIC51aS1kYXRlcGlja2VyLXByZXYsIC51aS1kYXRlcGlja2VyLW5leHQsIC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIHRkIGEiO3JldHVybiBhLmRlbGVnYXRlKHMsIm1vdXNlb3V0IixmdW5jdGlvbigpeyQodGhpcykucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWhvdmVyIik7aWYodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1wcmV2IikhPT0tMSl7JCh0aGlzKS5yZW1vdmVDbGFzcygidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyIil9aWYodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1uZXh0IikhPT0tMSl7JCh0aGlzKS5yZW1vdmVDbGFzcygidWktZGF0ZXBpY2tlci1uZXh0LWhvdmVyIil9fSkuZGVsZWdhdGUocywibW91c2VvdmVyIixmdW5jdGlvbigpe2lmKCEkLmRhdGVwaWNrZXIuX2lzRGlzYWJsZWREYXRlcGlja2VyKGMuaW5saW5lP2EucGFyZW50KClbMF06Yy5pbnB1dFswXSkpeyQodGhpcykucGFyZW50cygiLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIiKS5maW5kKCJhIikucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWhvdmVyIik7JCh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtaG92ZXIiKTtpZih0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCJ1aS1kYXRlcGlja2VyLXByZXYiKSE9PS0xKXskKHRoaXMpLmFkZENsYXNzKCJ1aS1kYXRlcGlja2VyLXByZXYtaG92ZXIiKX1pZih0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCJ1aS1kYXRlcGlja2VyLW5leHQiKSE9PS0xKXskKHRoaXMpLmFkZENsYXNzKCJ1aS1kYXRlcGlja2VyLW5leHQtaG92ZXIiKX19fSl9ZnVuY3Rpb24gZih0LHApeyQuZXh0ZW5kKHQscCk7Zm9yKHZhciBuIGluIHApe2lmKHBbbl09PW51bGwpe3Rbbl09cFtuXX19cmV0dXJuIHR9JC5mbi5kYXRlcGlja2VyPWZ1bmN0aW9uKG8pe2lmKCF0aGlzLmxlbmd0aCl7cmV0dXJuIHRoaXN9aWYoISQuZGF0ZXBpY2tlci5pbml0aWFsaXplZCl7JChkb2N1bWVudCkubW91c2Vkb3duKCQuZGF0ZXBpY2tlci5fY2hlY2tFeHRlcm5hbENsaWNrKTskLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQ9dHJ1ZX1pZigkKCIjIiskLmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoPT09MCl7JCgiYm9keSIpLmFwcGVuZCgkLmRhdGVwaWNrZXIuZHBEaXYpfXZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtpZih0eXBlb2Ygbz09PSJzdHJpbmciJiYobz09PSJpc0Rpc2FibGVkInx8bz09PSJnZXREYXRlInx8bz09PSJ3aWRnZXQiKSl7cmV0dXJuICQuZGF0ZXBpY2tlclsiXyIrbysiRGF0ZXBpY2tlciJdLmFwcGx5KCQuZGF0ZXBpY2tlcixbdGhpc1swXV0uY29uY2F0KGEpKX1pZihvPT09Im9wdGlvbiImJmFyZ3VtZW50cy5sZW5ndGg9PT0yJiZ0eXBlb2YgYXJndW1lbnRzWzFdPT09InN0cmluZyIpe3JldHVybiAkLmRhdGVwaWNrZXJbIl8iK28rIkRhdGVwaWNrZXIiXS5hcHBseSgkLmRhdGVwaWNrZXIsW3RoaXNbMF1dLmNvbmNhdChhKSl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3R5cGVvZiBvPT09InN0cmluZyI/JC5kYXRlcGlja2VyWyJfIitvKyJEYXRlcGlja2VyIl0uYXBwbHkoJC5kYXRlcGlja2VyLFt0aGlzXS5jb25jYXQoYSkpOiQuZGF0ZXBpY2tlci5fYXR0YWNoRGF0ZXBpY2tlcih0aGlzLG8pfSl9OyQuZGF0ZXBpY2tlcj1uZXcgRCgpOyQuZGF0ZXBpY2tlci5pbml0aWFsaXplZD1mYWxzZTskLmRhdGVwaWNrZXIudXVpZD1uZXcgRGF0ZSgpLmdldFRpbWUoKTskLmRhdGVwaWNrZXIudmVyc2lvbj0iMS4xMC40In0pKGpRdWVyeSk7Ci8qIQogKiBqUXVlcnkgVUkgUG9zaXRpb24gMS4xMC40CiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vcG9zaXRpb24vCiAqLwooZnVuY3Rpb24oJCx1KXskLnVpPSQudWl8fHt9O3ZhciBjLG09TWF0aC5tYXgsYT1NYXRoLmFicyxyPU1hdGgucm91bmQsYj0vbGVmdHxjZW50ZXJ8cmlnaHQvLGQ9L3RvcHxjZW50ZXJ8Ym90dG9tLyxlPS9bXCtcLV1cZCsoXC5bXGRdKyk/JT8vLGY9L15cdysvLGc9LyUkLyxfPSQuZm4ucG9zaXRpb247ZnVuY3Rpb24gaChvLHcsaSl7cmV0dXJuW3BhcnNlRmxvYXQob1swXSkqKGcudGVzdChvWzBdKT93LzEwMDoxKSxwYXJzZUZsb2F0KG9bMV0pKihnLnRlc3Qob1sxXSk/aS8xMDA6MSldfWZ1bmN0aW9uIHAoaSxrKXtyZXR1cm4gcGFyc2VJbnQoJC5jc3MoaSxrKSwxMCl8fDB9ZnVuY3Rpb24gaihpKXt2YXIgaz1pWzBdO2lmKGsubm9kZVR5cGU9PT05KXtyZXR1cm57d2lkdGg6aS53aWR0aCgpLGhlaWdodDppLmhlaWdodCgpLG9mZnNldDp7dG9wOjAsbGVmdDowfX19aWYoJC5pc1dpbmRvdyhrKSl7cmV0dXJue3dpZHRoOmkud2lkdGgoKSxoZWlnaHQ6aS5oZWlnaHQoKSxvZmZzZXQ6e3RvcDppLnNjcm9sbFRvcCgpLGxlZnQ6aS5zY3JvbGxMZWZ0KCl9fX1pZihrLnByZXZlbnREZWZhdWx0KXtyZXR1cm57d2lkdGg6MCxoZWlnaHQ6MCxvZmZzZXQ6e3RvcDprLnBhZ2VZLGxlZnQ6ay5wYWdlWH19fXJldHVybnt3aWR0aDppLm91dGVyV2lkdGgoKSxoZWlnaHQ6aS5vdXRlckhlaWdodCgpLG9mZnNldDppLm9mZnNldCgpfX0kLnBvc2l0aW9uPXtzY3JvbGxiYXJXaWR0aDpmdW5jdGlvbigpe2lmKGMhPT11KXtyZXR1cm4gY312YXIgdyxpLGs9JCgiPGRpdiBzdHlsZT0nZGlzcGxheTpibG9jaztwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDo1MHB4O2hlaWdodDo1MHB4O292ZXJmbG93OmhpZGRlbjsnPjxkaXYgc3R5bGU9J2hlaWdodDoxMDBweDt3aWR0aDphdXRvOyc+PC9kaXY+PC9kaXY+IiksbD1rLmNoaWxkcmVuKClbMF07JCgiYm9keSIpLmFwcGVuZChrKTt3PWwub2Zmc2V0V2lkdGg7ay5jc3MoIm92ZXJmbG93Iiwic2Nyb2xsIik7aT1sLm9mZnNldFdpZHRoO2lmKHc9PT1pKXtpPWtbMF0uY2xpZW50V2lkdGh9ay5yZW1vdmUoKTtyZXR1cm4oYz13LWkpfSxnZXRTY3JvbGxJbmZvOmZ1bmN0aW9uKHcpe3ZhciBvPXcuaXNXaW5kb3d8fHcuaXNEb2N1bWVudD8iIjp3LmVsZW1lbnQuY3NzKCJvdmVyZmxvdy14IiksaT13LmlzV2luZG93fHx3LmlzRG9jdW1lbnQ/IiI6dy5lbGVtZW50LmNzcygib3ZlcmZsb3cteSIpLGs9bz09PSJzY3JvbGwifHwobz09PSJhdXRvIiYmdy53aWR0aDx3LmVsZW1lbnRbMF0uc2Nyb2xsV2lkdGgpLGw9aT09PSJzY3JvbGwifHwoaT09PSJhdXRvIiYmdy5oZWlnaHQ8dy5lbGVtZW50WzBdLnNjcm9sbEhlaWdodCk7cmV0dXJue3dpZHRoOmw/JC5wb3NpdGlvbi5zY3JvbGxiYXJXaWR0aCgpOjAsaGVpZ2h0Oms/JC5wb3NpdGlvbi5zY3JvbGxiYXJXaWR0aCgpOjB9fSxnZXRXaXRoaW5JbmZvOmZ1bmN0aW9uKGkpe3ZhciB3PSQoaXx8d2luZG93KSxrPSQuaXNXaW5kb3cod1swXSksbD0hIXdbMF0mJndbMF0ubm9kZVR5cGU9PT05O3JldHVybntlbGVtZW50OncsaXNXaW5kb3c6ayxpc0RvY3VtZW50Omwsb2Zmc2V0Oncub2Zmc2V0KCl8fHtsZWZ0OjAsdG9wOjB9LHNjcm9sbExlZnQ6dy5zY3JvbGxMZWZ0KCksc2Nyb2xsVG9wOncuc2Nyb2xsVG9wKCksd2lkdGg6az93LndpZHRoKCk6dy5vdXRlcldpZHRoKCksaGVpZ2h0Oms/dy5oZWlnaHQoKTp3Lm91dGVySGVpZ2h0KCl9fX07JC5mbi5wb3NpdGlvbj1mdW5jdGlvbihvKXtpZighb3x8IW8ub2Ype3JldHVybiBfLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1vPSQuZXh0ZW5kKHt9LG8pO3ZhciBrLHQsbCxuLHEscyx2PSQoby5vZiksdz0kLnBvc2l0aW9uLmdldFdpdGhpbkluZm8oby53aXRoaW4pLHg9JC5wb3NpdGlvbi5nZXRTY3JvbGxJbmZvKHcpLHk9KG8uY29sbGlzaW9ufHwiZmxpcCIpLnNwbGl0KCIgIiksej17fTtzPWoodik7aWYodlswXS5wcmV2ZW50RGVmYXVsdCl7by5hdD0ibGVmdCB0b3AifXQ9cy53aWR0aDtsPXMuaGVpZ2h0O249cy5vZmZzZXQ7cT0kLmV4dGVuZCh7fSxuKTskLmVhY2goWyJteSIsImF0Il0sZnVuY3Rpb24oKXt2YXIgaT0ob1t0aGlzXXx8IiIpLnNwbGl0KCIgIiksQSxCO2lmKGkubGVuZ3RoPT09MSl7aT1iLnRlc3QoaVswXSk/aS5jb25jYXQoWyJjZW50ZXIiXSk6ZC50ZXN0KGlbMF0pP1siY2VudGVyIl0uY29uY2F0KGkpOlsiY2VudGVyIiwiY2VudGVyIl19aVswXT1iLnRlc3QoaVswXSk/aVswXToiY2VudGVyIjtpWzFdPWQudGVzdChpWzFdKT9pWzFdOiJjZW50ZXIiO0E9ZS5leGVjKGlbMF0pO0I9ZS5leGVjKGlbMV0pO3pbdGhpc109W0E/QVswXTowLEI/QlswXTowXTtvW3RoaXNdPVtmLmV4ZWMoaVswXSlbMF0sZi5leGVjKGlbMV0pWzBdXX0pO2lmKHkubGVuZ3RoPT09MSl7eVsxXT15WzBdfWlmKG8uYXRbMF09PT0icmlnaHQiKXtxLmxlZnQrPXR9ZWxzZSBpZihvLmF0WzBdPT09ImNlbnRlciIpe3EubGVmdCs9dC8yfWlmKG8uYXRbMV09PT0iYm90dG9tIil7cS50b3ArPWx9ZWxzZSBpZihvLmF0WzFdPT09ImNlbnRlciIpe3EudG9wKz1sLzJ9az1oKHouYXQsdCxsKTtxLmxlZnQrPWtbMF07cS50b3ArPWtbMV07cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBBLEIsQz0kKHRoaXMpLEQ9Qy5vdXRlcldpZHRoKCksRT1DLm91dGVySGVpZ2h0KCksRj1wKHRoaXMsIm1hcmdpbkxlZnQiKSxHPXAodGhpcywibWFyZ2luVG9wIiksSD1EK0YrcCh0aGlzLCJtYXJnaW5SaWdodCIpK3gud2lkdGgsST1FK0crcCh0aGlzLCJtYXJnaW5Cb3R0b20iKSt4LmhlaWdodCxKPSQuZXh0ZW5kKHt9LHEpLEs9aCh6Lm15LEMub3V0ZXJXaWR0aCgpLEMub3V0ZXJIZWlnaHQoKSk7aWYoby5teVswXT09PSJyaWdodCIpe0oubGVmdC09RH1lbHNlIGlmKG8ubXlbMF09PT0iY2VudGVyIil7Si5sZWZ0LT1ELzJ9aWYoby5teVsxXT09PSJib3R0b20iKXtKLnRvcC09RX1lbHNlIGlmKG8ubXlbMV09PT0iY2VudGVyIil7Si50b3AtPUUvMn1KLmxlZnQrPUtbMF07Si50b3ArPUtbMV07aWYoISQuc3VwcG9ydC5vZmZzZXRGcmFjdGlvbnMpe0oubGVmdD1yKEoubGVmdCk7Si50b3A9cihKLnRvcCl9QT17bWFyZ2luTGVmdDpGLG1hcmdpblRvcDpHfTskLmVhY2goWyJsZWZ0IiwidG9wIl0sZnVuY3Rpb24oaSxMKXtpZigkLnVpLnBvc2l0aW9uW3lbaV1dKXskLnVpLnBvc2l0aW9uW3lbaV1dW0xdKEose3RhcmdldFdpZHRoOnQsdGFyZ2V0SGVpZ2h0OmwsZWxlbVdpZHRoOkQsZWxlbUhlaWdodDpFLGNvbGxpc2lvblBvc2l0aW9uOkEsY29sbGlzaW9uV2lkdGg6SCxjb2xsaXNpb25IZWlnaHQ6SSxvZmZzZXQ6W2tbMF0rS1swXSxrWzFdK0tbMV1dLG15Om8ubXksYXQ6by5hdCx3aXRoaW46dyxlbGVtOkN9KX19KTtpZihvLnVzaW5nKXtCPWZ1bmN0aW9uKGkpe3ZhciBMPW4ubGVmdC1KLmxlZnQsTT1MK3QtRCxOPW4udG9wLUoudG9wLE89TitsLUUsUD17dGFyZ2V0OntlbGVtZW50OnYsbGVmdDpuLmxlZnQsdG9wOm4udG9wLHdpZHRoOnQsaGVpZ2h0Omx9LGVsZW1lbnQ6e2VsZW1lbnQ6QyxsZWZ0OkoubGVmdCx0b3A6Si50b3Asd2lkdGg6RCxoZWlnaHQ6RX0saG9yaXpvbnRhbDpNPDA/ImxlZnQiOkw+MD8icmlnaHQiOiJjZW50ZXIiLHZlcnRpY2FsOk88MD8idG9wIjpOPjA/ImJvdHRvbSI6Im1pZGRsZSJ9O2lmKHQ8RCYmYShMK00pPHQpe1AuaG9yaXpvbnRhbD0iY2VudGVyIn1pZihsPEUmJmEoTitPKTxsKXtQLnZlcnRpY2FsPSJtaWRkbGUifWlmKG0oYShMKSxhKE0pKT5tKGEoTiksYShPKSkpe1AuaW1wb3J0YW50PSJob3Jpem9udGFsIn1lbHNle1AuaW1wb3J0YW50PSJ2ZXJ0aWNhbCJ9by51c2luZy5jYWxsKHRoaXMsaSxQKX19Qy5vZmZzZXQoJC5leHRlbmQoSix7dXNpbmc6Qn0pKX0pfTskLnVpLnBvc2l0aW9uPXtmaXQ6e2xlZnQ6ZnVuY3Rpb24oaSxrKXt2YXIgdz1rLndpdGhpbixsPXcuaXNXaW5kb3c/dy5zY3JvbGxMZWZ0Oncub2Zmc2V0LmxlZnQsbz13LndpZHRoLG49aS5sZWZ0LWsuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCxxPWwtbixzPW4ray5jb2xsaXNpb25XaWR0aC1vLWwsdDtpZihrLmNvbGxpc2lvbldpZHRoPm8pe2lmKHE+MCYmczw9MCl7dD1pLmxlZnQrcStrLmNvbGxpc2lvbldpZHRoLW8tbDtpLmxlZnQrPXEtdH1lbHNlIGlmKHM+MCYmcTw9MCl7aS5sZWZ0PWx9ZWxzZXtpZihxPnMpe2kubGVmdD1sK28tay5jb2xsaXNpb25XaWR0aH1lbHNle2kubGVmdD1sfX19ZWxzZSBpZihxPjApe2kubGVmdCs9cX1lbHNlIGlmKHM+MCl7aS5sZWZ0LT1zfWVsc2V7aS5sZWZ0PW0oaS5sZWZ0LW4saS5sZWZ0KX19LHRvcDpmdW5jdGlvbihpLGspe3ZhciB3PWsud2l0aGluLGw9dy5pc1dpbmRvdz93LnNjcm9sbFRvcDp3Lm9mZnNldC50b3Asbz1rLndpdGhpbi5oZWlnaHQsbj1pLnRvcC1rLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCxxPWwtbixzPW4ray5jb2xsaXNpb25IZWlnaHQtby1sLHQ7aWYoay5jb2xsaXNpb25IZWlnaHQ+byl7aWYocT4wJiZzPD0wKXt0PWkudG9wK3Eray5jb2xsaXNpb25IZWlnaHQtby1sO2kudG9wKz1xLXR9ZWxzZSBpZihzPjAmJnE8PTApe2kudG9wPWx9ZWxzZXtpZihxPnMpe2kudG9wPWwrby1rLmNvbGxpc2lvbkhlaWdodH1lbHNle2kudG9wPWx9fX1lbHNlIGlmKHE+MCl7aS50b3ArPXF9ZWxzZSBpZihzPjApe2kudG9wLT1zfWVsc2V7aS50b3A9bShpLnRvcC1uLGkudG9wKX19fSxmbGlwOntsZWZ0OmZ1bmN0aW9uKGksayl7dmFyIHc9ay53aXRoaW4sbD13Lm9mZnNldC5sZWZ0K3cuc2Nyb2xsTGVmdCxvPXcud2lkdGgsbj13LmlzV2luZG93P3cuc2Nyb2xsTGVmdDp3Lm9mZnNldC5sZWZ0LHE9aS5sZWZ0LWsuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCxzPXEtbix0PXEray5jb2xsaXNpb25XaWR0aC1vLW4sdj1rLm15WzBdPT09ImxlZnQiPy1rLmVsZW1XaWR0aDprLm15WzBdPT09InJpZ2h0Ij9rLmVsZW1XaWR0aDowLHg9ay5hdFswXT09PSJsZWZ0Ij9rLnRhcmdldFdpZHRoOmsuYXRbMF09PT0icmlnaHQiPy1rLnRhcmdldFdpZHRoOjAseT0tMiprLm9mZnNldFswXSx6LEE7aWYoczwwKXt6PWkubGVmdCt2K3greStrLmNvbGxpc2lvbldpZHRoLW8tbDtpZih6PDB8fHo8YShzKSl7aS5sZWZ0Kz12K3greX19ZWxzZSBpZih0PjApe0E9aS5sZWZ0LWsuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCt2K3greS1uO2lmKEE+MHx8YShBKTx0KXtpLmxlZnQrPXYreCt5fX19LHRvcDpmdW5jdGlvbihpLGspe3ZhciB3PWsud2l0aGluLGw9dy5vZmZzZXQudG9wK3cuc2Nyb2xsVG9wLG89dy5oZWlnaHQsbj13LmlzV2luZG93P3cuc2Nyb2xsVG9wOncub2Zmc2V0LnRvcCxxPWkudG9wLWsuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wLHM9cS1uLHQ9cStrLmNvbGxpc2lvbkhlaWdodC1vLW4sdj1rLm15WzFdPT09InRvcCIseD12Py1rLmVsZW1IZWlnaHQ6ay5teVsxXT09PSJib3R0b20iP2suZWxlbUhlaWdodDowLHk9ay5hdFsxXT09PSJ0b3AiP2sudGFyZ2V0SGVpZ2h0OmsuYXRbMV09PT0iYm90dG9tIj8tay50YXJnZXRIZWlnaHQ6MCx6PS0yKmsub2Zmc2V0WzFdLEEsQjtpZihzPDApe0I9aS50b3AreCt5K3oray5jb2xsaXNpb25IZWlnaHQtby1sO2lmKChpLnRvcCt4K3kreik+cyYmKEI8MHx8QjxhKHMpKSl7aS50b3ArPXgreSt6fX1lbHNlIGlmKHQ+MCl7QT1pLnRvcC1rLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCt4K3krei1uO2lmKChpLnRvcCt4K3kreik+dCYmKEE+MHx8YShBKTx0KSl7aS50b3ArPXgreSt6fX19fSxmbGlwZml0OntsZWZ0OmZ1bmN0aW9uKCl7JC51aS5wb3NpdGlvbi5mbGlwLmxlZnQuYXBwbHkodGhpcyxhcmd1bWVudHMpOyQudWkucG9zaXRpb24uZml0LmxlZnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx0b3A6ZnVuY3Rpb24oKXskLnVpLnBvc2l0aW9uLmZsaXAudG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKTskLnVpLnBvc2l0aW9uLmZpdC50b3AuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19OyhmdW5jdGlvbigpe3ZhciB0LGssbCxvLGksbj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdLHE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KG4/ImRpdiI6ImJvZHkiKTtsPXt2aXNpYmlsaXR5OiJoaWRkZW4iLHdpZHRoOjAsaGVpZ2h0OjAsYm9yZGVyOjAsbWFyZ2luOjAsYmFja2dyb3VuZDoibm9uZSJ9O2lmKG4peyQuZXh0ZW5kKGwse3Bvc2l0aW9uOiJhYnNvbHV0ZSIsbGVmdDoiLTEwMDBweCIsdG9wOiItMTAwMHB4In0pfWZvcihpIGluIGwpe3Quc3R5bGVbaV09bFtpXX10LmFwcGVuZENoaWxkKHEpO2s9bnx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2suaW5zZXJ0QmVmb3JlKHQsay5maXJzdENoaWxkKTtxLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTAuNzQzMjIyMnB4OyI7bz0kKHEpLm9mZnNldCgpLmxlZnQ7JC5zdXBwb3J0Lm9mZnNldEZyYWN0aW9ucz1vPjEwJiZvPDExO3QuaW5uZXJIVE1MPSIiO2sucmVtb3ZlQ2hpbGQodCl9KSgpfShqUXVlcnkpKTsKLyohCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KKGZ1bmN0aW9uKCl7aWYoIXdpbmRvdy5qUXVlcnkpe3Rocm93IG5ldyBFcnJvcigiU0FQVUk1IHJlcXVpcmVzIGpRdWVyeSBhcyBhIHByZXJlcXVpc2l0ZSAoPj0gdmVyc2lvbiAxLjcpIil9aWYoalF1ZXJ5LnNhcCl7cmV0dXJufXZhciBfPXdpbmRvdzt2YXIgYT1bXTtmdW5jdGlvbiBiKGwsbSl7YS5wdXNoKHtsZXZlbDpsLG1lc3NhZ2U6bX0pfXZhciBjPXVuZGVmaW5lZDt2YXIgcj0vXlswLTldKyg/OlwuKFswLTldKykoPzpcLihbMC05XSspKT8pPyguKikkLztmdW5jdGlvbiBWKE0saSxsLHMpe2lmKE0gaW5zdGFuY2VvZiBWKXtyZXR1cm4gTX1pZighKHRoaXMgaW5zdGFuY2VvZiBWKSl7cmV0dXJuIG5ldyBWKE0saSxsLHMpfXZhciBtPSh0eXBlb2YgTT09PSJzdHJpbmciP3IuZXhlYyhNKTooalF1ZXJ5LmlzQXJyYXkoTSk/TTphcmd1bWVudHMpKXx8W107ZnVuY3Rpb24gbih2KXt2PXBhcnNlSW50KHYsMTApO3JldHVybiBpc05hTih2KT8wOnZ9TT1uKG1bMF0pO2k9bihtWzFdKTtsPW4obVsyXSk7cz1TdHJpbmcobVszXXx8IiIpO3RoaXMudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gTSsiLiIraSsiLiIrbCtzfTt0aGlzLmdldE1ham9yPWZ1bmN0aW9uKCl7cmV0dXJuIE19O3RoaXMuZ2V0TWlub3I9ZnVuY3Rpb24oKXtyZXR1cm4gaX07dGhpcy5nZXRQYXRjaD1mdW5jdGlvbigpe3JldHVybiBsfTt0aGlzLmdldFN1ZmZpeD1mdW5jdGlvbigpe3JldHVybiBzfTt0aGlzLmNvbXBhcmVUbz1mdW5jdGlvbigpe3ZhciBvPVYuYXBwbHkod2luZG93LGFyZ3VtZW50cyk7cmV0dXJuIE0tby5nZXRNYWpvcigpfHxpLW8uZ2V0TWlub3IoKXx8bC1vLmdldFBhdGNoKCl8fCgoczxvLmdldFN1ZmZpeCgpKT8tMToocz09PW8uZ2V0U3VmZml4KCkpPzA6MSl9fVYucHJvdG90eXBlLmluUmFuZ2U9ZnVuY3Rpb24obSxNKXtyZXR1cm4gdGhpcy5jb21wYXJlVG8obSk+PTAmJnRoaXMuY29tcGFyZVRvKE0pPDB9O3ZhciBqPVYoalF1ZXJ5LmZuLmpxdWVyeSk7aWYoIWouaW5SYW5nZSgiMS43LjAiLCIyLjAuMCIpKXtiKCJlcnJvciIsIlNBUFVJNSByZXF1aXJlcyBhIGpRdWVyeSB2ZXJzaW9uIG9mIDEuNyBvciBoaWdoZXIsIGJ1dCBsb3dlciB0aGFuIDIuMDsgY3VycmVudCB2ZXJzaW9uIGlzICIralF1ZXJ5LmZuLmpxdWVyeSl9aWYoIWpRdWVyeS5icm93c2VyKXtqUXVlcnkuYnJvd3Nlcj0oZnVuY3Rpb24odSl7dmFyIGk9Lyh3ZWJraXQpWyBcL10oW1x3Ll0rKS8sbD0vKG9wZXJhKSg/Oi4qdmVyc2lvbik/WyBcL10oW1x3Ll0rKS8sbT0vKG1zaWUpIChbXHcuXSspLyxuPS8obW96aWxsYSkoPzouKj8gcnY6KFtcdy5dKykpPy8sdT11LnRvTG93ZXJDYXNlKCksbz1pLmV4ZWModSl8fGwuZXhlYyh1KXx8bS5leGVjKHUpfHx1LmluZGV4T2YoImNvbXBhdGlibGUiKTwwJiZuLmV4ZWModSl8fFtdLHE9e307aWYob1sxXSl7cVtvWzFdXT10cnVlO3EudmVyc2lvbj1vWzJdfHwiMCI7aWYocS53ZWJraXQpe3Euc2FmYXJpPXRydWV9fXJldHVybiBxfSh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpfWlmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtqUXVlcnkuc3VwcG9ydC5jb3JzPXRydWV9dmFyIGQ9KGZ1bmN0aW9uKCl7dmFyIHQsdSxSLGk9L14oLipcLyk/ZG93bmxvYWRcL2NvbmZpZ3VyYXRvcltcL1w/XS8sbD0vXiguKlwvKT8oc2FwLXVpLShjb3JlfGN1c3RvbXxib290fG1lcmdlZCkoLS4qKT8pXC5qcyhbPyNdfCQpLyxuPS9eKC4qXC8pP3Jlc291cmNlc1wvLztqUXVlcnkoInNjcmlwdFtzcmNdIikuZWFjaChmdW5jdGlvbigpe3ZhciBzPXRoaXMuZ2V0QXR0cmlidXRlKCJzcmMiKSxtO2lmKG09cy5tYXRjaChpKSl7dD10aGlzO3U9cztSPShtWzFdfHwiIikrInJlc291cmNlcy8iO3JldHVybiBmYWxzZX1lbHNlIGlmKG09cy5tYXRjaChsKSl7dD10aGlzO3U9cztSPW1bMV18fCIiO3JldHVybiBmYWxzZX1lbHNlIGlmKHRoaXMuaWQ9PSdzYXAtdWktYm9vdHN0cmFwJyYmKG09cy5tYXRjaChuKSkpe3Q9dGhpczt1PXM7Uj1tWzBdO3JldHVybiBmYWxzZX19KTtyZXR1cm57dGFnOnQsdXJsOnUscmVzb3VyY2VSb290OlJ9fSkoKTsoZnVuY3Rpb24oKXtpZigvc2FwLWJvb3RzdHJhcC1kZWJ1Zz0odHJ1ZXx4fFgpLy50ZXN0KGxvY2F0aW9uLnNlYXJjaCkpe3dpbmRvd1sic2FwLXVpLWJSZXN0YXJ0Il09ZmFsc2U7d2luZG93WyJzYXAtdWktc1Jlc3RhcnRVcmwiXT0iaHR0cDovL2xvY2FsaG9zdDo4MDgwL3NhcHVpNS9yZXNvdXJjZXMvc2FwLXVpLWNvcmUuanMiO3ZhciBsPWZ1bmN0aW9uKCl7dmFyIHM9ZC50YWcsbT0iPHNjcmlwdCBzcmM9XCIiK3dpbmRvd1sic2FwLXVpLXNSZXN0YXJ0VXJsIl0rIlwiIjtqUXVlcnkuZWFjaChzLmF0dHJpYnV0ZXMsZnVuY3Rpb24oaSxBKXtpZihBLm5vZGVOYW1lLmluZGV4T2YoImRhdGEtc2FwLXVpLSIpPT0wKXttKz0iICIrQS5ub2RlTmFtZSsiPVwiIitBLm5vZGVWYWx1ZSsiXCIifX0pO20rPSI+PC9zY3JpcHQ+IjtzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocyk7alF1ZXJ5KCIjc2FwLXVpLWJvb3RzdHJhcC1jYWNoZWJ1c3RlZCIpLnJlbW92ZSgpO3dpbmRvd1sic2FwLXVpLWNvbmZpZyJdJiZ3aW5kb3dbInNhcC11aS1jb25maWciXS5yZXNvdXJjZVJvb3RzJiYod2luZG93WyJzYXAtdWktY29uZmlnIl0ucmVzb3VyY2VSb290c1siIl09dW5kZWZpbmVkKTtkb2N1bWVudC53cml0ZShtKTt2YXIgUj1uZXcgRXJyb3IoIkFib3J0aW5nIFVJNSBib290c3RyYXAgYW5kIHJlc3RhcnRpbmcgZnJvbTogIit3aW5kb3dbInNhcC11aS1zUmVzdGFydFVybCJdKTtSLm5hbWU9IlJlc3RhcnQiO2RlbGV0ZSB3aW5kb3dbInNhcC11aS1iUmVzdGFydCJdO2RlbGV0ZSB3aW5kb3dbInNhcC11aS1zUmVzdGFydFVybCJdO3Rocm93IFJ9O2RlYnVnZ2VyO2lmKHdpbmRvd1sic2FwLXVpLWJSZXN0YXJ0Il0pe2woKX19fSkoKTsoZnVuY3Rpb24oKXt2YXIgRD0vc2FwLXVpLWRlYnVnPSh0cnVlfHh8WCkvLnRlc3QobG9jYXRpb24uc2VhcmNoKSxpPXdpbmRvd1sic2FwLXVpLW9wdGltaXplZCJdO3RyeXtEPUR8fCh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInNhcC11aS1kZWJ1ZyIpPT0iWCIpfWNhdGNoKGUpe313aW5kb3dbInNhcC11aS1kZWJ1ZyJdPUQ7aWYoLy1kYmdcLmpzKFs/I118JCkvLnRlc3QoZC51cmwpKXt3aW5kb3dbInNhcC11aS1sb2FkZGJnIl09dHJ1ZTt3aW5kb3dbInNhcC11aS1kZWJ1ZyJdPXRydWV9aWYoaSYmRCl7dmFyIHM9ZC51cmwucmVwbGFjZSgvXC8oPzpzYXAtdWktY2FjaGVidXN0ZXJcLyk/KFteXC9dKylcLmpzLywiLyQxLWRiZy5qcyIpO3dpbmRvd1sic2FwLXVpLW9wdGltaXplZCJdPWZhbHNlO3dpbmRvd1sic2FwLXVpLWxvYWRkYmciXT10cnVlO2RvY3VtZW50LndyaXRlKCI8c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIiBzcmM9XCIiK3MrIlwiPjwvc2NyaXB0PiIpO3ZhciBSPW5ldyBFcnJvcigiQWJvcnRpbmcgVUk1IGJvb3RzdHJhcCBhbmQgcmVzdGFydGluZyBmcm9tOiAiK3MpO1IubmFtZT0iUmVzdGFydCI7dGhyb3cgUn19KSgpO3ZhciBDPV9bInNhcC11aS1jb25maWciXT0oZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG8pe2pRdWVyeS5lYWNoKG8sZnVuY3Rpb24oaSx2KXt2YXIgbT1pLnRvTG93ZXJDYXNlKCk7aWYoIW8uaGFzT3duUHJvcGVydHkobSkpe29bbV09djtkZWxldGUgb1tpXX19KTtyZXR1cm4gb312YXIgcz1kLnRhZyxsPV9bInNhcC11aS1jb25maWciXSxxPSJzYXAtdWktY29uZmlnLmpzb24iO2lmKHR5cGVvZiBsPT09InN0cmluZyIpe2IoIndhcm5pbmciLCJMb2FkaW5nIGV4dGVybmFsIGJvb3RzdHJhcCBjb25maWd1cmF0aW9uIGZyb20gXCIiK2wrIlwiLiBUaGlzIGlzIGEgZGVzaWduIHRpbWUgZmVhdHVyZSBhbmQgbm90IGZvciBwcm9kdWN0aXZlIHVzYWdlISIpO2lmKGwhPT1xKXtiKCJ3YXJuaW5nIiwiVGhlIGV4dGVybmFsIGJvb3RzdHJhcCBjb25maWd1cmF0aW9uIGZpbGUgc2hvdWxkIGJlIG5hbWVkIFwiIitxKyJcIiEiKX1qUXVlcnkuYWpheCh7dXJsOmwsZGF0YVR5cGU6J2pzb24nLGFzeW5jOmZhbHNlLHN1Y2Nlc3M6ZnVuY3Rpb24oRCxULGkpe2w9RH0sZXJyb3I6ZnVuY3Rpb24oaSxULG8pe2IoImVycm9yIiwiTG9hZGluZyBleHRlcm5hbGl6ZWQgYm9vdHN0cmFwIGNvbmZpZ3VyYXRpb24gZnJvbSBcIiIrbCsiXCIgZmFpbGVkISBSZWFzb246ICIrbysiISIpO2w9dW5kZWZpbmVkfX0pfWw9bihsfHx7fSk7bC5yZXNvdXJjZXJvb3RzPWwucmVzb3VyY2Vyb290c3x8e307bC50aGVtZXJvb3RzPWwudGhlbWVyb290c3x8e307bC5yZXNvdXJjZXJvb3RzWycnXT1sLnJlc291cmNlcm9vdHNbJyddfHxkLnJlc291cmNlUm9vdDtsWyd4eC1sb2FkYWxsbW9kZSddPS8oXnxcLykoc2FwLT91aTV8W15cL10rLWFsbCkuanMoWz8jXXwkKS8udGVzdChkLnVybCk7aWYocyl7dmFyIHQ9cy5nZXRBdHRyaWJ1dGUoImRhdGEtc2FwLXVpLWNvbmZpZyIpO2lmKHQpe3RyeXtqUXVlcnkuZXh0ZW5kKGwsbigobmV3IEZ1bmN0aW9uKCJyZXR1cm4geyIrdCsifTsiKSkoKSkpfWNhdGNoKGUpe2IoImVycm9yIiwiZmFpbGVkIHRvIHBhcnNlIGRhdGEtc2FwLXVpLWNvbmZpZyBhdHRyaWJ1dGU6ICIrKGUubWVzc2FnZXx8ZSkpfX1qUXVlcnkuZWFjaChzLmF0dHJpYnV0ZXMsZnVuY3Rpb24oaSxvKXt2YXIgbT1vLm5hbWUubWF0Y2goL15kYXRhLXNhcC11aS0oLiopJC8pO2lmKG0pe209bVsxXS50b0xvd2VyQ2FzZSgpO2lmKG09PT0ncmVzb3VyY2Vyb290cycpe2pRdWVyeS5leHRlbmQobFttXSxqUXVlcnkucGFyc2VKU09OKG8udmFsdWUpKX1lbHNlIGlmKG09PT0ndGhlbWUtcm9vdHMnKXtqUXVlcnkuZXh0ZW5kKGwudGhlbWVyb290cyxqUXVlcnkucGFyc2VKU09OKG8udmFsdWUpKX1lbHNlIGlmKG0hPT0nY29uZmlnJyl7bFttXT1vLnZhbHVlfX19KX1yZXR1cm4gbH0oKSk7aWYoQy5ub2NvbmZsaWN0PT09dHJ1ZXx8Qy5ub2NvbmZsaWN0PT09InRydWUifHxDLm5vY29uZmxpY3Q9PT0ieCIpe2pRdWVyeS5ub0NvbmZsaWN0KCl9alF1ZXJ5LnNhcD17fTtqUXVlcnkuc2FwLlZlcnNpb249VjtqUXVlcnkuc2FwLmRlYnVnPWZ1bmN0aW9uKGkpe2lmKCF3aW5kb3cubG9jYWxTdG9yYWdlKXtyZXR1cm4gbnVsbH1mdW5jdGlvbiBsKHUpe2FsZXJ0KCJVc2FnZSBvZiBkZWJ1ZyBzb3VyY2VzIGlzICIrKHU/Im9uIjoib2ZmIikrIiBub3cuXG5Gb3IgdGhlIGNoYW5nZSB0byB0YWtlIGVmZmVjdCwgeW91IG5lZWQgdG8gcmVsb2FkIHRoZSBwYWdlLiIpfTtpZihpPT09dHJ1ZSl7d2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJzYXAtdWktZGVidWciLCJYIik7bCh0cnVlKX1lbHNlIGlmKGk9PT1mYWxzZSl7d2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJzYXAtdWktZGVidWciKTtsKGZhbHNlKX1yZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzYXAtdWktZGVidWciKT09IlgifTtqUXVlcnkuc2FwLnN0YXRpc3RpY3M9ZnVuY3Rpb24oaSl7aWYoIXdpbmRvdy5sb2NhbFN0b3JhZ2Upe3JldHVybiBudWxsfWZ1bmN0aW9uIGwodSl7YWxlcnQoIlVzYWdlIG9mIEdhdGV3YXkgc3RhdGlzdGljcyAiKyh1PyJvbiI6Im9mZiIpKyIgbm93LlxuRm9yIHRoZSBjaGFuZ2UgdG8gdGFrZSBlZmZlY3QsIHlvdSBuZWVkIHRvIHJlbG9hZCB0aGUgcGFnZS4iKX07aWYoaT09PXRydWUpe3dpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgic2FwLXVpLXN0YXRpc3RpY3MiLCJYIik7bCh0cnVlKX1lbHNlIGlmKGk9PT1mYWxzZSl7d2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJzYXAtdWktc3RhdGlzdGljcyIpO2woZmFsc2UpfXJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInNhcC11aS1zdGF0aXN0aWNzIik9PSJYIn07KGZ1bmN0aW9uKCl7dmFyIEY9MCxsPTEsVz0yLEk9MyxEPTQsVD01LHM9KHdpbmRvdy50b3A9PXdpbmRvdyk/IiI6IlsiK3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpLnNsaWNlKC0xKVswXSsiXSAiLEw9W10sTT17Jyc6bH0sbz1udWxsO2Z1bmN0aW9uIG4oaSx3KXtyZXR1cm4oIjAwMCIrU3RyaW5nKGkpKS5zbGljZSgtdyl9ZnVuY3Rpb24gcShpKXtyZXR1cm4oIWl8fGlzTmFOKE1baV0pKT9NWycnXTpNW2ldfWZ1bmN0aW9uIHQoKXtpZighbyl7bz17bGlzdGVuZXJzOltdLG9uTG9nRW50cnk6ZnVuY3Rpb24obSl7Zm9yKHZhciBpPTA7aTxvLmxpc3RlbmVycy5sZW5ndGg7aSsrKXtpZihvLmxpc3RlbmVyc1tpXS5vbkxvZ0VudHJ5KXtvLmxpc3RlbmVyc1tpXS5vbkxvZ0VudHJ5KG0pfX19LGF0dGFjaDpmdW5jdGlvbihpLG0pe2lmKG0pe28ubGlzdGVuZXJzLnB1c2gobSk7aWYobS5vbkF0dGFjaFRvTG9nKXttLm9uQXR0YWNoVG9Mb2coaSl9fX0sZGV0YWNoOmZ1bmN0aW9uKG0sdil7Zm9yKHZhciBpPTA7aTxvLmxpc3RlbmVycy5sZW5ndGg7aSsrKXtpZihvLmxpc3RlbmVyc1tpXT09PXYpe2lmKHYub25EZXRhY2hGcm9tTG9nKXt2Lm9uRGV0YWNoRnJvbUxvZyhtKX1vLmxpc3RlbmVycy5zcGxpY2UoaSwxKTtyZXR1cm59fX19fXJldHVybiBvfWZ1bmN0aW9uIHUoaSxtLHYsdyl7aWYoaTw9cSh3KSl7dmFyIE49bmV3IERhdGUoKSx5PXt0aW1lOm4oTi5nZXRIb3VycygpLDIpKyI6IituKE4uZ2V0TWludXRlcygpLDIpKyI6IituKE4uZ2V0U2Vjb25kcygpLDIpLGRhdGU6bihOLmdldEZ1bGxZZWFyKCksNCkrIi0iK24oTi5nZXRNb250aCgpKzEsMikrIi0iK24oTi5nZXREYXRlKCksMiksdGltZXN0YW1wOk4uZ2V0VGltZSgpLGxldmVsOmksbWVzc2FnZTpTdHJpbmcobXx8IiIpLGRldGFpbHM6U3RyaW5nKHZ8fCIiKSxjb21wb25lbnQ6U3RyaW5nKHd8fCIiKX07TC5wdXNoKHkpO2lmKG8pe28ub25Mb2dFbnRyeSh5KX1pZih3aW5kb3cuY29uc29sZSl7dmFyIHo9eS5kYXRlKyIgIit5LnRpbWUrIiAiK3MreS5tZXNzYWdlKyIgLSAiK3kuZGV0YWlscysiICIreS5jb21wb25lbnQ7c3dpdGNoKGkpe2Nhc2UgRjpjYXNlIGw6Y29uc29sZS5lcnJvcih6KTticmVhaztjYXNlIFc6Y29uc29sZS53YXJuKHopO2JyZWFrO2Nhc2UgSTpjb25zb2xlLmluZm8/Y29uc29sZS5pbmZvKHopOmNvbnNvbGUubG9nKHopO2JyZWFrO2Nhc2UgRDpjb25zb2xlLmRlYnVnP2NvbnNvbGUuZGVidWcoeik6Y29uc29sZS5sb2coeik7YnJlYWs7Y2FzZSBUOmNvbnNvbGUudHJhY2U/Y29uc29sZS50cmFjZSh6KTpjb25zb2xlLmxvZyh6KTticmVha319cmV0dXJuIHl9fWZ1bmN0aW9uIHgoaSl7dGhpcy5mYXRhbD1mdW5jdGlvbihtLHYsdyl7dShGLG0sdix3fHxpKTtyZXR1cm4gdGhpc307dGhpcy5lcnJvcj1mdW5jdGlvbiBlcnJvcihtLHYsdyl7dShsLG0sdix3fHxpKTtyZXR1cm4gdGhpc307dGhpcy53YXJuaW5nPWZ1bmN0aW9uIHdhcm5pbmcobSx2LHcpe3UoVyxtLHYsd3x8aSk7cmV0dXJuIHRoaXN9O3RoaXMuaW5mbz1mdW5jdGlvbiBpbmZvKG0sdix3KXt1KEksbSx2LHd8fGkpO3JldHVybiB0aGlzfTt0aGlzLmRlYnVnPWZ1bmN0aW9uIGRlYnVnKG0sdix3KXt1KEQsbSx2LHd8fGkpO3JldHVybiB0aGlzfTt0aGlzLnRyYWNlPWZ1bmN0aW9uIHRyYWNlKG0sdix3KXt1KFQsbSx2LHd8fGkpO3JldHVybiB0aGlzfTt0aGlzLnNldExldmVsPWZ1bmN0aW9uIHNldExldmVsKG0sdyl7dz13fHxpfHwnJztNW3ddPW07dmFyIEI9W107alF1ZXJ5LmVhY2goalF1ZXJ5LnNhcC5sb2cuTG9nTGV2ZWwsZnVuY3Rpb24oeSx2KXtCW3ZdPXl9KTt1KEksIkNoYW5naW5nIGxvZyBsZXZlbCAiKyh3PyJmb3IgJyIrdysiJyAiOiIiKSsidG8gIitCW21dLCIiLCJqUXVlcnkuc2FwLmxvZyIpO3JldHVybiB0aGlzfTt0aGlzLmdldExldmVsPWZ1bmN0aW9uIGdldExldmVsKG0pe3JldHVybiBxKG18fGkpfTt0aGlzLmlzTG9nZ2FibGU9ZnVuY3Rpb24obSx2KXtyZXR1cm4obT09bnVsbD9EOm0pPD1xKHZ8fGkpfX1qUXVlcnkuc2FwLmxvZz1qUXVlcnkuZXh0ZW5kKG5ldyB4KCkse0xldmVsOntOT05FOkYtMSxGQVRBTDpGLEVSUk9SOmwsV0FSTklORzpXLElORk86SSxERUJVRzpELFRSQUNFOlQsQUxMOihUKzEpfSxnZXRMb2dnZXI6ZnVuY3Rpb24oaSxtKXtpZighaXNOYU4obSkmJk1baV09PW51bGwpe01baV09bX1yZXR1cm4gbmV3IHgoaSl9LGdldExvZ0VudHJpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gTC5zbGljZSgpfSxhZGRMb2dMaXN0ZW5lcjpmdW5jdGlvbihvKXt0KCkuYXR0YWNoKHRoaXMsbyk7cmV0dXJuIHRoaXN9LHJlbW92ZUxvZ0xpc3RlbmVyOmZ1bmN0aW9uKG8pe3QoKS5kZXRhY2godGhpcyxvKTtyZXR1cm4gdGhpc319KTtqUXVlcnkuc2FwLmxvZy5Mb2dMZXZlbD1qUXVlcnkuc2FwLmxvZy5MZXZlbDtqUXVlcnkuc2FwLmxvZy5nZXRMb2c9alF1ZXJ5LnNhcC5sb2cuZ2V0TG9nRW50cmllcztqUXVlcnkuc2FwLmFzc2VydD1mdW5jdGlvbihSLG0pe2lmKCFSKXtpZih3aW5kb3cuY29uc29sZSYmY29uc29sZS5hc3NlcnQpe2NvbnNvbGUuYXNzZXJ0KFIscyttKX1lbHNle2pRdWVyeS5zYXAubG9nLmRlYnVnKCJbQXNzZXJ0aW9uc10gIittKX19fTtDLmxvZ2xldmVsPShmdW5jdGlvbigpe3ZhciBtPS8oPzpcP3wmKXNhcC11aS1sb2coPzpMfC1sKWV2ZWw9KFteJl0qKS8uZXhlYyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtyZXR1cm4gbSYmbVsxXX0oKSl8fEMubG9nbGV2ZWw7aWYoQy5sb2dsZXZlbCl7alF1ZXJ5LnNhcC5sb2cuc2V0TGV2ZWwoalF1ZXJ5LnNhcC5sb2cuTGV2ZWxbQy5sb2dsZXZlbC50b1VwcGVyQ2FzZSgpXXx8cGFyc2VJbnQoQy5sb2dsZXZlbCwxMCkpfWpRdWVyeS5zYXAubG9nLmluZm8oIlNBUCBMb2dnZXIgc3RhcnRlZC4iKTtqUXVlcnkuZWFjaChhLGZ1bmN0aW9uKGksZSl7alF1ZXJ5LnNhcC5sb2dbZS5sZXZlbF0oZS5tZXNzYWdlKX0pO2E9bnVsbH0oKSk7alF1ZXJ5LnNhcC5mYWN0b3J5PWZ1bmN0aW9uIGZhY3Rvcnkobyl7ZnVuY3Rpb24gRigpe31GLnByb3RvdHlwZT1vO3JldHVybiBGfTtqUXVlcnkuc2FwLm5ld09iamVjdD1mdW5jdGlvbiBuZXdPYmplY3Qobyl7cmV0dXJuIG5ldyhqUXVlcnkuc2FwLmZhY3RvcnkobykpKCl9O2pRdWVyeS5zYXAuZ2V0dGVyPWZ1bmN0aW9uIGdldHRlcih2KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdn19O2pRdWVyeS5zYXAuZ2V0T2JqZWN0PWZ1bmN0aW9uIGdldE9iamVjdChuLE4sbyl7dmFyIE89b3x8XyxtPShufHwiIikuc3BsaXQoIi4iKSxsPW0ubGVuZ3RoLHE9aXNOYU4oTik/MDpsLU4saTtmb3IoaT0wO08mJmk8bDtpKyspe2lmKCFPW21baV1dJiZpPHEpe09bbVtpXV09e319Tz1PW21baV1dfXJldHVybiBPfTtqUXVlcnkuc2FwLnNldE9iamVjdD1mdW5jdGlvbihuLHYsbyl7dmFyIE89b3x8XyxOPShufHwiIikuc3BsaXQoIi4iKSxsPU4ubGVuZ3RoLGk7aWYobD4wKXtmb3IoaT0wO08mJmk8bC0xO2krKyl7aWYoIU9bTltpXV0pe09bTltpXV09e319Tz1PW05baV1dfU9bTltsLTFdXT12fX07ZnVuY3Rpb24gUyhuLGksdCl7dmFyIFQ9W10sbz0wLEY9MCxzO3RoaXMuc3RhcnRUYXNrPWZ1bmN0aW9uKG0pe3ZhciBJPVQubGVuZ3RoO1RbSV09e25hbWU6bSxmaW5pc2hlZDpmYWxzZX07bysrO3JldHVybiBJfTt0aGlzLmZpbmlzaFRhc2s9ZnVuY3Rpb24oSSxtKXtpZighVFtJXXx8VFtJXS5maW5pc2hlZCl7dGhyb3cgbmV3IEVycm9yKCJ0cnlpbmcgdG8gZmluaXNoIG5vbiBleGlzdGluZyBvciBhbHJlYWR5IGZpbmlzaGVkIHRhc2siKX1UW0ldLmZpbmlzaGVkPXRydWU7by0tO2lmKG09PT1mYWxzZSl7RisrfWlmKG89PT0wKXtqUXVlcnkuc2FwLmxvZy5pbmZvKCJTeW5jIHBvaW50ICciK24rIicgZmluaXNoZWQgKHRhc2tzOiIrVC5sZW5ndGgrIiwgb3BlbjoiK28rIiwgZmFpbHVyZXM6IitGKyIpIik7aWYocyl7Y2xlYXJUaW1lb3V0KHMpO3M9bnVsbH07bCgpfX07ZnVuY3Rpb24gbCgpe2kmJmkobyxGKTtpPW51bGx9aWYoIWlzTmFOKHQpKXtzPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtqUXVlcnkuc2FwLmxvZy5pbmZvKCJTeW5jIHBvaW50ICciK24rIicgdGltZWQgb3V0ICh0YXNrczoiK1QubGVuZ3RoKyIsIG9wZW46IitvKyIsIGZhaWx1cmVzOiIrRisiKSIpO2woKX0sdCl9O2pRdWVyeS5zYXAubG9nLmluZm8oIlN5bmMgcG9pbnQgJyIrbisiJyBjcmVhdGVkIisodD8iKHRpbWVvdXQgYWZ0ZXIgIit0KyIgbXMpIjoiIikpfWpRdWVyeS5zYXAuc3luY1BvaW50PWZ1bmN0aW9uKG4saSx0KXtyZXR1cm4gbmV3IFMobixpLHQpfTt2YXIgZz0oZnVuY3Rpb24oKXt2YXIgbz1qUXVlcnkuc2FwLmxvZy5nZXRMb2dnZXIoInNhcC51aS5Nb2R1bGVTeXN0ZW0iLCgvc2FwLXVpLXh4LWRlYnVnKE18LW0pb2R1bGUoTHwtbClvYWRpbmc9KHRydWV8eHxYKS8udGVzdChsb2NhdGlvbi5zZWFyY2gpfHxDWyJ4eC1kZWJ1Z01vZHVsZUxvYWRpbmciXSk/alF1ZXJ5LnNhcC5sb2cuTGV2ZWwuREVCVUc6alF1ZXJ5LnNhcC5sb2cuTGV2ZWwuSU5GTyksdT17Jyc6J3Jlc291cmNlcy8nfSxJPTAscT0tMSxMPTEsdD0yLHY9MyxSPTQsRj01LE09eyJzYXAvdWkvdGhpcmRwYXJ0eS9VUkkuanMiOntzdGF0ZTpSLHVybDpjLGNvbnRlbnQ6VVJJfSwic2FwL3VpL0RldmljZS5qcyI6e3N0YXRlOlIsdXJsOmMsY29udGVudDpzYXAudWkuRGV2aWNlfSwianF1ZXJ5LnNhcC5nbG9iYWwuanMiOntzdGF0ZTpSLHVybDpjLGNvbnRlbnQ6alF1ZXJ5fX0sdz17fSxBPXsnc2FwL3VpL3RoaXJkcGFydHkvY3Jvc3Nyb2Fkcy5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvZGF0YWpzLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9oYXNoZXIuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L0lQdjYuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2pxdWVyeS9qcXVlcnktMS4xMS4xLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9qcXVlcnkvanF1ZXJ5LTEuMTAuMi5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvanF1ZXJ5L2pxdWVyeS0xLjEwLjEuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2pxdWVyeS9qcXVlcnkuMS43LjEuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2pxdWVyeS9qcXVlcnkuMS44LjEuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2pxdWVyeS1tb2JpbGUtY3VzdG9tLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9sZXNzLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9wdW55Y29kZS5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvcmVxdWlyZS5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvU2Vjb25kTGV2ZWxEb21haW5zLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9zaWduYWxzLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9VUkkuanMnOnRydWV9LHg9W10seT0iIix6PTUxMioxMDI0LEQ9ZG9jdW1lbnQubG9jYXRpb24uaHJlZi5yZXBsYWNlKC9cPy4qfCMuKi9nLCIiKSxCPSJmcmFnbWVudCIsRz0idmlldyIsSz17anM6W0csQiwiY29udHJvbGxlciJdLHhtbDpbRyxCXSxqc29uOltHLEJdLGh0bWw6W0csQl19LEg9bmV3IFJlZ0V4cCgiKFxcLig/OiIrSy5qcy5qb2luKCJ8IikrIikpP1xcLmpzJCIpLEosTjsoZnVuY3Rpb24oKXt2YXIgcz0iIixpPSIiO2pRdWVyeS5lYWNoKEssZnVuY3Rpb24obCxtKXtzPShzP3MrInwiOiIiKStsO2k9KGk/aSsifCI6IiIpKyIoPzooPzoiK20uam9pbigiXFwufCIpKyJcXC4pPyIrbCsiKSJ9KTtzPSJcXC4oIitzKyIpJCI7aT0iXFwuKD86IitpKyJ8W14uL10rKSQiO28uZGVidWcoImNvbnN0cnVjdGVkIHJlZ2V4cCBmb3IgZmlsZSB0eXBlcyA6IitzKTtvLmRlYnVnKCJjb25zdHJ1Y3RlZCByZWdleHAgZm9yIGZpbGUgc3ViLXR5cGVzIDoiK2kpO0o9bmV3IFJlZ0V4cChzKTtOPW5ldyBSZWdFeHAoaSl9KCkpO2Z1bmN0aW9uIE8ocyl7aWYoL15zYXBcLnVpXC50aGlyZHBhcnR5XC5qcXVlcnlcLmpxdWVyeS0vLnRlc3Qocykpe3JldHVybiJzYXAvdWkvdGhpcmRwYXJ0eS9qcXVlcnkvanF1ZXJ5LSIrcy5zbGljZSgic2FwLnVpLnRoaXJkcGFydHkuanF1ZXJ5LmpxdWVyeS0iLmxlbmd0aCl9ZWxzZSBpZigvXmpxdWVyeVwuc2FwXC4vLnRlc3Qocykpe3JldHVybiBzfXJldHVybiBzLnJlcGxhY2UoL1wuL2csIi8iKX1mdW5jdGlvbiBRKHMpe3ZhciBpO2lmKCEvXC5qcyQvLnRlc3Qocykpe3JldHVybn1zPXMuc2xpY2UoMCwtMyk7aWYoL15zYXBcL3VpXC90aGlyZHBhcnR5XC9qcXVlcnlcL2pxdWVyeS0vLnRlc3Qocykpe3JldHVybiJzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnkuanF1ZXJ5LSIrcy5zbGljZSgic2FwL3VpL3RoaXJkcGFydHkvanF1ZXJ5L2pxdWVyeS0iLmxlbmd0aCl9ZWxzZSBpZigvXmpxdWVyeVwuc2FwXC4vLnRlc3Qocykpe3JldHVybiBzfXJldHVybiBzLnJlcGxhY2UoL1wvL2csIi4iKX1mdW5jdGlvbiBUKHMsaSl7dmFyICQ9cy5zcGxpdCgvXC8vKSxsLGExLGIxLG07aWYoYXJndW1lbnRzLmxlbmd0aD09PTEmJiQubGVuZ3RoPjApe209Ti5leGVjKCRbJC5sZW5ndGgtMV0pO2lmKG0pe2k9bVswXTskWyQubGVuZ3RoLTFdPSRbJC5sZW5ndGgtMV0uc2xpY2UoMCxtLmluZGV4KX1lbHNle2k9IiJ9fWZvcihsPSQubGVuZ3RoO2w+PTA7bC0tKXthMT0kLnNsaWNlKDAsbCkuam9pbignLycpO2lmKHVbYTFdKXtiMT11W2ExXTtpZihsPCQubGVuZ3RoKXtiMSs9JC5zbGljZShsKS5qb2luKCcvJyl9aWYoYjEuc2xpY2UoLTEpPT09Jy8nKXtiMT1iMS5zbGljZSgwLC0xKX1yZXR1cm4gYjErKGl8fCcnKX19fWZ1bmN0aW9uIFUocyl7dmFyIGw9LTEsaSxtLCQ7Zm9yKHZhciBtIGluIHUpeyQ9dVttXTskPSQrKCQuc2xpY2UoLTEpIT09Jy8nPyIvIjoiIik7aWYodS5oYXNPd25Qcm9wZXJ0eShtKSYmbS5sZW5ndGg+bCYmKHM9PT0kfHxzLmluZGV4T2YoJCk9PT0wKSl7bD1tLmxlbmd0aDtpPW0rKG0/Ii8iOiIiKStzLnNsaWNlKCQubGVuZ3RoKX19cmV0dXJuIGw8MD91bmRlZmluZWQ6aX1mdW5jdGlvbiBXKG0pe3ZhciBpO2k9TVttXXx8KE1bbV09e3N0YXRlOkl9KTtpZihpLnN0YXRlPkkpe3JldHVybiBpfWlmKG8uaXNMb2dnYWJsZSgpKXtvLmRlYnVnKHkrImRlY2xhcmUgbW9kdWxlICciK20rIiciKX1pLnN0YXRlPVI7aWYoeC5sZW5ndGg9PT0wKXt4LnB1c2gobSk7aS51cmw9aS51cmx8fGN9cmV0dXJuIGl9ZnVuY3Rpb24gWChzKXt2YXIgbT1ILmV4ZWMocyksbCwkLGExLGIxLGk7aWYoIW0pe28uZXJyb3IoImNhbiBvbmx5IHJlcXVpcmUgSmF2YXNjcmlwdCBtb2R1bGUsIG5vdCAiK3MpO2ExLnN0YXRlPUY7cmV0dXJufWw9cy5zbGljZSgwLG0uaW5kZXgpOyQ9bVswXTthMT1NW3NdfHwoTVtzXT17c3RhdGU6SX0pO2lmKG8uaXNMb2dnYWJsZSgpKXtvLmRlYnVnKHkrInJlcXVpcmUgJyIrcysiJyBvZiB0eXBlICciKyQrIiciKX1pZihhMS5zdGF0ZSE9PUkpe2lmKGExLnN0YXRlPT09cSl7YTEuc3RhdGU9dDtpZihBW3NdJiZ0eXBlb2Ygd2luZG93LmRlZmluZT09PSJmdW5jdGlvbiImJndpbmRvdy5kZWZpbmUuYW1kKXt2YXIgYzE9d2luZG93LmRlZmluZS5hbWQ7dHJ5e2RlbGV0ZSB3aW5kb3cuZGVmaW5lLmFtZDtZKHMpfWZpbmFsbHl7d2luZG93LmRlZmluZS5hbWQ9YzF9fWVsc2V7WShzKX19aWYoYTEuc3RhdGU9PT1SKXtpZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1Zyh5KyJtb2R1bGUgJyIrcysiJyBoYXMgYWxyZWFkeSBiZWVuIGxvYWRlZCAoc2tpcHBlZCkuIil9cmV0dXJuIHRoaXN9ZWxzZSBpZihhMS5zdGF0ZT09PUYpe3Rocm93IG5ldyBFcnJvcigiZm91bmQgaW4gbmVnYXRpdmUgY2FjaGU6ICciK3MrIicgZnJvbSAiK2ExLnVybCsiOiAiK2ExLmVycm9yKX1lbHNle3JldHVybiB0aGlzfX1hMS5zdGF0ZT1MO2IxPXdpbmRvd1sic2FwLXVpLWxvYWRkYmciXT9bIi1kYmciLCIiXTpbIiJdO2ZvcihpPTA7aTxiMS5sZW5ndGgmJmExLnN0YXRlIT09dDtpKyspe2ExLnVybD1UKGwsYjFbaV0rJCk7aWYoby5pc0xvZ2dhYmxlKCkpe28uZGVidWcoeSsibG9hZGluZyAiKyhiMVtpXT9iMVtpXSsiIHZlcnNpb24gb2YgIjoiIikrIiciK3MrIicgZnJvbSAnIithMS51cmwrIiciKX1qUXVlcnkuYWpheCh7dXJsOmExLnVybCxkYXRhVHlwZTondGV4dCcsYXN5bmM6ZmFsc2Usc3VjY2VzczpmdW5jdGlvbihkMSxlMSxmMSl7YTEuc3RhdGU9dDthMS5kYXRhPWQxfSxlcnJvcjpmdW5jdGlvbihkMSxlMSxmMSl7YTEuc3RhdGU9RjthMS5lcnJvcj1kMT9kMS5zdGF0dXMrIiAtICIrZDEuc3RhdHVzVGV4dDplMX19KX1pZihhMS5zdGF0ZT09PXQpe2lmKEFbc10mJnR5cGVvZiB3aW5kb3cuZGVmaW5lPT09ImZ1bmN0aW9uIiYmd2luZG93LmRlZmluZS5hbWQpe3ZhciBjMT13aW5kb3cuZGVmaW5lLmFtZDt0cnl7ZGVsZXRlIHdpbmRvdy5kZWZpbmUuYW1kO1kocyl9ZmluYWxseXt3aW5kb3cuZGVmaW5lLmFtZD1jMX19ZWxzZXtZKHMpfX1pZihhMS5zdGF0ZSE9PVIpe3Rocm93IG5ldyBFcnJvcigiZmFpbGVkIHRvIGxvYWQgJyIrcysiJyBmcm9tICIrYTEudXJsKyI6ICIrYTEuZXJyb3IpfX1mdW5jdGlvbiBZKG0pe3ZhciBpPU1bbV0scyxsO2lmKGkmJmkuc3RhdGU9PT10JiZ0eXBlb2YgaS5kYXRhIT09InVuZGVmaW5lZCIpe3RyeXtpZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1Zyh5KyJleGVjdXRpbmcgJyIrbSsiJyIpO3M9eTt5PXkrIjogIn1pLnN0YXRlPXY7eC5wdXNoKG0pO2lmKHR5cGVvZiBpLmRhdGE9PT0iZnVuY3Rpb24iKXtpLmRhdGEuYXBwbHkod2luZG93KX1lbHNle2w9aS5kYXRhO2lmKGwmJiFsLm1hdGNoKC9cL1wvWyNAXSBzb3VyY2UoTWFwcGluZyk/VVJMPS4qJC8pKXtsKz0iXG4vLyMgc291cmNlVVJMPSIrVVJJKGkudXJsKS5hYnNvbHV0ZVRvKEQpfWlmKF8uZXhlY1NjcmlwdCYmKCFpLmRhdGF8fGkuZGF0YS5sZW5ndGg8eikpe3RyeXtpLmRhdGEmJl8uZXhlY1NjcmlwdChsKX1jYXRjaChlKXt4LnBvcCgpO2pRdWVyeS5zYXAuZ2xvYmFsRXZhbChpLmRhdGEpO3Rocm93IGV9fWVsc2V7Xy5ldmFsKGwpfX14LnBvcCgpO2kuc3RhdGU9UjtpLmRhdGE9dW5kZWZpbmVkO2kuY29udGVudD1pLmNvbnRlbnR8fGpRdWVyeS5zYXAuZ2V0T2JqZWN0KFEobSkpO2lmKG8uaXNMb2dnYWJsZSgpKXt5PXM7by5kZWJ1Zyh5KyJmaW5pc2hlZCBleGVjdXRpbmcgJyIrbSsiJyIpfX1jYXRjaCgkKXtpLnN0YXRlPUY7aS5lcnJvcj0oKCQudG9TdHJpbmcmJiQudG9TdHJpbmcoKSl8fCQubWVzc2FnZSkrKCQubGluZT8iKGxpbmUgIiskLmxpbmUrIikiOiIiKTtpLmRhdGE9dW5kZWZpbmVkO2lmKHdpbmRvd1sic2FwLXVpLWRlYnVnIl0mJigvc2FwLXVpLXh4LXNob3coTHwtbClvYWQoRXwtZSlycm9ycz0odHJ1ZXx4fFgpLy50ZXN0KGxvY2F0aW9uLnNlYXJjaCl8fENbInh4LXNob3dsb2FkZXJyb3JzIl0pKXtvLmVycm9yKCJlcnJvciB3aGlsZSBldmFsdWF0aW5nICIrbSsiLCBlbWJlZGRpbmcgYWdhaW4gdmlhIHNjcmlwdCB0YWcgdG8gZW5mb3JjZSBhIHN0YWNrIHRyYWNlIChzZWUgYmVsb3cpIik7alF1ZXJ5LnNhcC5pbmNsdWRlU2NyaXB0KGkudXJsKTtyZXR1cm59fX19ZnVuY3Rpb24gWihsLHMpe3ZhciAkPVtdLGksYTEsYjEsbTtmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKXthMT1sW2ldO28uZGVidWcoeSsicmVxdWlyZSAnIithMSsiJyIpO1goYTErIi5qcyIpOyRbaV09TVthMSsiLmpzIl0uY29udGVudHx8alF1ZXJ5LnNhcC5nZXRPYmplY3QoUShhMSsiLmpzIikpO28uZGVidWcoeSsicmVxdWlyZSAnIithMSsiJzogZG9uZS4iKX1zLmFwcGx5KHRoaXMsJCl9alF1ZXJ5LnNhcC5nZXRNb2R1bGVQYXRoPWZ1bmN0aW9uKG0scyl7cmV0dXJuIFQoTyhtKSxzKX07alF1ZXJ5LnNhcC5nZXRSZXNvdXJjZVBhdGg9VDtqUXVlcnkuc2FwLnJlZ2lzdGVyTW9kdWxlUGF0aD1mdW5jdGlvbiByZWdpc3Rlck1vZHVsZVBhdGgobSxzKXttPW0ucmVwbGFjZSgvXC4vZywiLyIpO3M9c3x8Jy4nO2pRdWVyeS5zYXAucmVnaXN0ZXJSZXNvdXJjZVBhdGgobSxzKX07alF1ZXJ5LnNhcC5yZWdpc3RlclJlc291cmNlUGF0aD1mdW5jdGlvbihzLGkpe3M9U3RyaW5nKHN8fCIiKTtpZihpPT1udWxsKXtkZWxldGUgdVtzXX1lbHNle2k9U3RyaW5nKGkpO2lmKGkuc2xpY2UoLTEpIT0nLycpe2krPScvJ311W3NdPWl9by5pbmZvKCJyZWdpc3RlclJlc291cmNlUGF0aCAoJyIrcysiJywgJyIraSsiJykiKX07alF1ZXJ5LnNhcC5pc0RlY2xhcmVkPWZ1bmN0aW9uIGlzRGVjbGFyZWQobSxpKXttPU8obSkrIi5qcyI7cmV0dXJuIE1bbV0mJihpfHxNW21dLnN0YXRlIT09cSl9O2pRdWVyeS5zYXAuZ2V0QWxsRGVjbGFyZWRNb2R1bGVzPWZ1bmN0aW9uKCl7dmFyIG09W107alF1ZXJ5LmVhY2goTSxmdW5jdGlvbihzLGkpe2lmKGkmJmkuc3RhdGUhPT1xKXt2YXIgbD1RKHMpO2lmKGwpe20ucHVzaChsKX19fSk7cmV0dXJuIG19O2lmKEMucmVzb3VyY2Vyb290cyl7alF1ZXJ5LmVhY2goQy5yZXNvdXJjZXJvb3RzLGpRdWVyeS5zYXAucmVnaXN0ZXJNb2R1bGVQYXRoKX1vLmluZm8oIlVSTCBwcmVmaXhlcyBzZXQgdG86Iik7Zm9yKHZhciBuIGluIHUpe28uaW5mbygiICAiKyhuPyInIituKyInIjoiKGRlZmF1bHQpIikrIiA6ICIrdVtuXSl9alF1ZXJ5LnNhcC5kZWNsYXJlPWZ1bmN0aW9uKG0saSl7dmFyIHM9bTtpZih0eXBlb2YobSk9PT0ib2JqZWN0Iil7cz1tLm1vZE5hbWU7bT1PKG0ubW9kTmFtZSkrKG0udHlwZT8iLiIrbS50eXBlOiIiKSsiLmpzIn1lbHNle209TyhtKSsiLmpzIn1XKG0pO2lmKGkhPT1mYWxzZSl7alF1ZXJ5LnNhcC5nZXRPYmplY3QocywxKX1yZXR1cm4gdGhpc307alF1ZXJ5LnNhcC5yZXF1aXJlPWZ1bmN0aW9uKG0sbCl7aWYoalF1ZXJ5LmlzQXJyYXkobSkmJnR5cGVvZiBsPT09ImZ1bmN0aW9uIil7WihtLGwpfWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD4xKXtmb3IodmFyIGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXtqUXVlcnkuc2FwLnJlcXVpcmUoYXJndW1lbnRzW2ldKX1yZXR1cm4gdGhpc31pZih0eXBlb2YobSk9PT0ib2JqZWN0Iil7bT1PKG0ubW9kTmFtZSkrKG0udHlwZT8iLiIrbS50eXBlOiIiKSsiLmpzIn1lbHNle209TyhtKSsiLmpzIn1YKG0pO3JldHVybiB0aGlzfTtqUXVlcnkuc2FwLl9yZXF1aXJlUGF0aD1mdW5jdGlvbihtKXtYKG0rIi5qcyIpfTt3aW5kb3cuc2FwPXdpbmRvdy5zYXB8fHt9O3NhcC51aT1zYXAudWl8fHt9O3NhcC51aS5kZWZpbmU9ZnVuY3Rpb24ocyxsLG0sJCl7dmFyIGExPVtdLGIxLGMxLGk7aWYodHlwZW9mIHM9PT0ic3RyaW5nIil7YjE9cysiLmpzIn1lbHNleyQ9bTttPWw7bD1zO2IxPXhbeC5sZW5ndGgtMV19cz1RKGIxKTtpZighalF1ZXJ5LmlzQXJyYXkobCkpeyQ9bTttPWw7bD1bXX1lbHNle3ZhciBkMT1iMS5zbGljZSgwLDErYjEubGFzdEluZGV4T2YoJy8nKSk7Zm9yKGk9MDtpPGwubGVuZ3RoO2krKyl7aWYoL15cLlwvLy50ZXN0KGxbaV0pKXtsW2ldPWQxK2xbaV0uc2xpY2UoMil9fX1pZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1ZygiZGVmaW5lKCIrYjErIiwgIisiWyciK2wuam9pbigiJywnIikrIiddIisiKSIpfXZhciBlMT1XKGIxKTtaKGwsZnVuY3Rpb24oKXtpZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1ZygiZGVmaW5lKCIrYjErIik6IGNhbGxpbmcgZmFjdG9yeSAiK3R5cGVvZiBtKX1pZigkKXtqUXVlcnkuc2FwLmdldE9iamVjdChzLDEpfWlmKHR5cGVvZiBtPT09ImZ1bmN0aW9uIil7ZTEuY29udGVudD1tLmFwcGx5KHdpbmRvdyxhcmd1bWVudHMpfWVsc2V7ZTEuY29udGVudD1tfWlmKCQpe2lmKGUxLmNvbnRlbnQ9PW51bGwpe28uZXJyb3IoIm1vZHVsZSAnIitiMSsiJyByZXR1cm5lZCBubyBjb250ZW50LCBidXQgc2hvdWxkIGJlIGV4cG9ydGVkIil9ZWxzZXtpZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1ZygiZXhwb3J0aW5nIGNvbnRlbnQgb2YgJyIrYjErIic6IGFzIGdsb2JhbCBvYmplY3QiKX1qUXVlcnkuc2FwLnNldE9iamVjdChzLGUxLmNvbnRlbnQpfX19KX07alF1ZXJ5LnNhcC5wcmVsb2FkTW9kdWxlcz1mdW5jdGlvbihzLGksbCl7dmFyIG0sJDtpZih3W3NdKXJldHVybjt3W3NdPXRydWU7bT1qUXVlcnkuc2FwLmdldE1vZHVsZVBhdGgocywiLmpzb24iKTtvLmRlYnVnKCJwcmVsb2FkIGZpbGUgIitzKTskPWwmJmwuc3RhcnRUYXNrKCJsb2FkICIrcyk7alF1ZXJ5LmFqYXgoe2RhdGFUeXBlOiJqc29uIixhc3luYzppLHVybDptLHN1Y2Nlc3M6ZnVuY3Rpb24oYTEpe2lmKGExKXthMS51cmw9bX1qUXVlcnkuc2FwLnJlZ2lzdGVyUHJlbG9hZGVkTW9kdWxlcyhhMSxpLGwpO2wmJmwuZmluaXNoVGFzaygkKX0sZXJyb3I6ZnVuY3Rpb24oYTEsYjEsYzEpe28uZXJyb3IoImZhaWxlZCB0byBwcmVsb2FkICciK3MrIic6ICIrKGMxfHxiMSkpO2wmJmwuZmluaXNoVGFzaygkLGZhbHNlKX19KX07alF1ZXJ5LnNhcC5yZWdpc3RlclByZWxvYWRlZE1vZHVsZXM9ZnVuY3Rpb24oaSxsLHMpe3ZhciBtPVYoaS52ZXJzaW9ufHwiMS4wIikuY29tcGFyZVRvKCIyLjAiKTwwO2lmKG8uaXNMb2dnYWJsZSgpKXtvLmRlYnVnKHkrImFkZGluZyBwcmVsb2FkZWQgbW9kdWxlcyBmcm9tICciK2kudXJsKyInIil9aWYoaS5uYW1lKXt3W2kubmFtZV09dHJ1ZX1qUXVlcnkuZWFjaChpLm1vZHVsZXMsZnVuY3Rpb24oJCxhMSl7JD1tP08oJCkrIi5qcyI6JDtpZighTVskXSl7TVskXT17c3RhdGU6cSx1cmw6aS51cmwrIi8iKyQsZGF0YTphMSxncm91cDppLm5hbWV9fWlmKCQubWF0Y2goL1wvbGlicmFyeVwuanMkLykpe3dbUSgkKSsiLXByZWxvYWQiXT10cnVlfX0pO2lmKGkuZGVwZW5kZW5jaWVzKXtqUXVlcnkuZWFjaChpLmRlcGVuZGVuY2llcyxmdW5jdGlvbigkLGExKXtqUXVlcnkuc2FwLnByZWxvYWRNb2R1bGVzKGExLGwscyl9KX19O2pRdWVyeS5zYXAudW5sb2FkUmVzb3VyY2VzPWZ1bmN0aW9uKHMsbCxtLCQpe3ZhciBhMT1bXTtpZihsPT1udWxsKXtsPXRydWV9aWYobCl7alF1ZXJ5LmVhY2goTSxmdW5jdGlvbihpLGIxKXtpZihiMSYmYjEuZ3JvdXA9PT1zKXthMS5wdXNoKGkpfX0pO2RlbGV0ZSB3W3NdfWVsc2V7aWYoTVtzXSl7YTEucHVzaChzKX19alF1ZXJ5LmVhY2goYTEsZnVuY3Rpb24oaSxiMSl7dmFyIGMxPU1bYjFdO2lmKGMxJiYkJiZiMS5tYXRjaCgvXC5qcyQvKSl7alF1ZXJ5LnNhcC5zZXRPYmplY3QoUShiMSksdW5kZWZpbmVkKX1pZihjMSYmKG18fGMxLnN0YXRlPT09cSkpe2RlbGV0ZSBNW2IxXX19KX07alF1ZXJ5LnNhcC5nZXRSZXNvdXJjZU5hbWU9ZnVuY3Rpb24obSxzKXtyZXR1cm4gTyhtKSsoc3x8Ii5qcyIpfTtqUXVlcnkuc2FwLmxvYWRSZXNvdXJjZT1mdW5jdGlvbihzLG0pe3ZhciBpLGwsJCxhMSxiMTtpZih0eXBlb2Ygcz09PSJzdHJpbmciKXttPW18fHt9fWVsc2V7bT1zfHx7fTtzPW0ubmFtZTtpZighcyYmbS51cmwpe3M9VShtLnVybCl9fW09alF1ZXJ5LmV4dGVuZCh7ZmFpbE9uRXJyb3I6dHJ1ZX0sbSk7aT1tLmRhdGFUeXBlO2lmKGk9PW51bGwmJnMpe2k9KGk9Si5leGVjKHMpKSYmaVsxXX1sPXMmJk1bc10mJk1bc10uZGF0YTtpZihsIT1udWxsKXskPWpRdWVyeS5hamF4U2V0dGluZ3MuY29udmVydGVyc1sidGV4dCAiK2ldO2lmKHR5cGVvZiAkPT09ImZ1bmN0aW9uIil7bD0kKGwpfX1lbHNle2pRdWVyeS5hamF4KHt1cmw6YTE9bS51cmx8fFQocyksYXN5bmM6ZmFsc2UsZGF0YVR5cGU6aSxoZWFkZXJzOm0uaGVhZGVycyxzdWNjZXNzOmZ1bmN0aW9uKGMxLGQxLGUxKXtsPWMxfSxlcnJvcjpmdW5jdGlvbihjMSxkMSxlMSl7bD1udWxsO2IxPW5ldyBFcnJvcigicmVzb3VyY2UgIitzKyIgY291bGQgbm90IGJlIGxvYWRlZCBmcm9tICIrYTErIi4gQ2hlY2sgZm9yICdmaWxlIG5vdCBmb3VuZCcgb3IgcGFyc2UgZXJyb3JzLiIpO2IxLnN0YXR1cz1kMTtiMS5lcnJvcj1lMTtiMS5zdGF0dXNDb2RlPWMxLnN0YXR1c319KX1pZihsPT1udWxsJiZtLmZhaWxPbkVycm9yKXt0aHJvdyBiMXx8bmV3IEVycm9yKCJubyBkYXRhIHJldHVybmVkIGZvciAiK3MpfXJldHVybiBsfTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm57bW9kdWxlczpNLHByZWZpeGVzOnV9fX0oKSk7ZnVuY3Rpb24gZihvKXt2YXIgaT13aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXTtpZihpKXtpLmFwcGVuZENoaWxkKG8pfX1qUXVlcnkuc2FwLmluY2x1ZGVTY3JpcHQ9ZnVuY3Rpb24gaW5jbHVkZVNjcmlwdCh1LGksbCxtKXt2YXIgcz13aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7cy5zcmM9dTtzLnR5cGU9InRleHQvamF2YXNjcmlwdCI7aWYoaSl7cy5pZD1pfWlmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbjw5KXtpZihsKXtzLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKHMucmVhZHlTdGF0ZT09PSJsb2FkZWQifHxzLnJlYWR5U3RhdGU9PT0iY29tcGxldGUiKXtsKCk7cy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbH19fX1lbHNle2lmKGwpe2pRdWVyeShzKS5sb2FkKGwpfWlmKG0pe2pRdWVyeShzKS5lcnJvcihtKX19dmFyIG87aWYoKGkmJihvPWpRdWVyeS5zYXAuZG9tQnlJZChpKSkmJm8udGFnTmFtZT09PSJTQ1JJUFQiKSl7alF1ZXJ5KG8pLnJlbW92ZSgpfWYocyl9O2pRdWVyeS5zYXAuaW5jbHVkZVN0eWxlU2hlZXQ9ZnVuY3Rpb24gaW5jbHVkZVN0eWxlU2hlZXQodSxJLGwsbSl7dmFyIG49ZnVuY3Rpb24odSxJLGwsbSl7dmFyIEw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpO0wudHlwZT0idGV4dC9jc3MiO0wucmVsPSJzdHlsZXNoZWV0IjtMLmhyZWY9dTtpZihJKXtMLmlkPUl9alF1ZXJ5KEwpLmxvYWQoZnVuY3Rpb24oKXtqUXVlcnkoTCkuYXR0cigic2FwLXVpLXJlYWR5IiwidHJ1ZSIpO2lmKGwpe2woKX19KTtqUXVlcnkoTCkuZXJyb3IoZnVuY3Rpb24oKXtqUXVlcnkoTCkuYXR0cigic2FwLXVpLXJlYWR5IiwiZmFsc2UiKTtpZihtKXttKCl9fSk7cmV0dXJuIEx9O3ZhciBvPWZ1bmN0aW9uKHUsSSxsLG0pe2lmKHNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248PTkmJmRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aD49Mjkpe3ZhciBzPVVSSS5wYXJzZShkb2N1bWVudC5VUkwpLnBhdGg7alF1ZXJ5LnNhcC5sb2cud2FybmluZygiU3RseWVTaGVldCAiK0krIiBub3QgYWRkZWQgYXMgTElOSyBiZWNhdXNlIG9mIElFIGxpbWl0cyIsdSwialF1ZXJ5LnNhcC5pbmNsdWRlU3R5bGVTaGVldCIpO2lmKCF0aGlzLl9vSUVTdHlsZVNoZWV0KXt0aGlzLl9vSUVTdHlsZVNoZWV0PWRvY3VtZW50LmNyZWF0ZVN0eWxlU2hlZXQoKTt0aGlzLl9vSUVTdHlsZVNoZWV0LmFkZEltcG9ydChVUkkodSkuYWJzb2x1dGVUbyhzKSl9ZWxzZXt2YXIgQT1mYWxzZTtmb3IodmFyIGk9MDtpPHRoaXMuX29JRVN0eWxlU2hlZXQuaW1wb3J0cy5sZW5ndGg7aSsrKXt2YXIgcT10aGlzLl9vSUVTdHlsZVNoZWV0LmltcG9ydHNbaV07aWYocS5pbXBvcnRzLmxlbmd0aDwzMCl7cS5hZGRJbXBvcnQoVVJJKHUpLmFic29sdXRlVG8ocykpO0E9dHJ1ZTticmVha319aWYoIUEpe3RoaXMuX29JRVN0eWxlU2hlZXQuYWRkSW1wb3J0KFVSSSh1KS5hYnNvbHV0ZVRvKHMpKX19fWVsc2V7ZihuKHUsSSxsLG0pKX19O3ZhciBPLFI7aWYoKEkmJihPPWpRdWVyeS5zYXAuZG9tQnlJZChJKSkmJihSPU8udGFnTmFtZT09PSJMSU5LIiYmTy5yZWw9PT0ic3R5bGVzaGVldCIpKXx8d2luZG93LmRvY3VtZW50LmJvZHkpe2lmKFIpe2lmKE8uZ2V0QXR0cmlidXRlKCJocmVmIikhPT11fHxsfHxtKXtqUXVlcnkoTykucmVwbGFjZVdpdGgobih1LEksbCxtKSl9fWVsc2V7byh1LEksbCxtKX19ZWxzZXtvKHUsSSxsLG0pfX07aWYoIShDLnByb2R1Y3RpdmU9PT10cnVlfHxDLnByb2R1Y3RpdmU9PT0idHJ1ZSJ8fEMucHJvZHVjdGl2ZT09PSJ4Iikpe2pRdWVyeShmdW5jdGlvbigpe2pRdWVyeShkb2N1bWVudC5ib2R5KS5rZXlkb3duKGZ1bmN0aW9uKGUpe2lmKGUua2V5Q29kZT09ODAmJmUuc2hpZnRLZXkmJmUuYWx0S2V5JiZlLmN0cmxLZXkpe3RyeXtqUXVlcnkuc2FwLnJlcXVpcmUoInNhcC51aS5kZWJ1Zy5UZWNobmljYWxJbmZvIil9Y2F0Y2goZSl7cmV0dXJufXNhcC51aS5kZWJ1Zy5UZWNobmljYWxJbmZvLm9wZW4oZnVuY3Rpb24oKXt2YXIgaT1nKCk7cmV0dXJue21vZHVsZXM6aS5tb2R1bGVzLHByZWZpeGVzOmkudXJsUHJlZml4ZXMsY29uZmlnOkN9fSl9fSl9KTtqUXVlcnkoZnVuY3Rpb24oKXtqUXVlcnkoZG9jdW1lbnQuYm9keSkua2V5ZG93bihmdW5jdGlvbihlKXtpZihlLmtleUNvZGU9PTgzJiZlLnNoaWZ0S2V5JiZlLmFsdEtleSYmZS5jdHJsS2V5KXt0cnl7alF1ZXJ5LnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS5zdXBwb3J0LlN1cHBvcnQiKTt2YXIgcz1zYXAudWkuY29yZS5zdXBwb3J0LlN1cHBvcnQuZ2V0U3R1YigpO2lmKHMuZ2V0VHlwZSgpIT1zYXAudWkuY29yZS5zdXBwb3J0LlN1cHBvcnQuU3R1YlR5cGUuQVBQTElDQVRJT04pe3JldHVybn1zLm9wZW5TdXBwb3J0VG9vbCgpfWNhdGNoKGUpe319fSl9KX1pZigvc2FwLXVpLXh4LWUyZS10cmFjZT0odHJ1ZXx4fFgpLy50ZXN0KGxvY2F0aW9uLnNlYXJjaCkpe2pRdWVyeS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuc3VwcG9ydC50cmFjZS5FMmVUcmFjZUxpYiIrIiIpfWlmKCFqUXVlcnkuc3VwcG9ydCl7alF1ZXJ5LnN1cHBvcnQ9e319alF1ZXJ5LmV4dGVuZChqUXVlcnkuc3VwcG9ydCx7dG91Y2g6Im9udG91Y2hlbmQiaW4gZG9jdW1lbnR9KTt2YXIgcD1bIldlYmtpdCIsIm1zIiwiTW96Il07dmFyIGg9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlO3ZhciBrPWZ1bmN0aW9uKGwsbSl7aWYoalF1ZXJ5LnN1cHBvcnRbbF09PT11bmRlZmluZWQpe2lmKGhbbV0hPT11bmRlZmluZWQpe2pRdWVyeS5zdXBwb3J0W2xdPXRydWU7aWYobT09PSJib3hGbGV4Inx8bT09PSJmbGV4T3JkZXIifHxtPT09ImZsZXhHcm93Iil7aWYoIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5jaHJvbWV8fHNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPjI4KXtqUXVlcnkuc3VwcG9ydC5mbGV4Qm94UHJlZml4ZWQ9ZmFsc2V9fXJldHVybn1lbHNle209bS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSttLnNsaWNlKDEpO2Zvcih2YXIgaSBpbiBwKXtpZihoW3BbaV0rbV0hPT11bmRlZmluZWQpe2pRdWVyeS5zdXBwb3J0W2xdPXRydWU7cmV0dXJufX19alF1ZXJ5LnN1cHBvcnRbbF09ZmFsc2V9fTtrKCJjc3NUcmFuc2Zvcm1zIiwidHJhbnNmb3JtIik7aygiY3NzVHJhbnNmb3JtczNkIiwicGVyc3BlY3RpdmUiKTtrKCJjc3NUcmFuc2l0aW9ucyIsInRyYW5zaXRpb24iKTtrKCJjc3NBbmltYXRpb25zIiwiYW5pbWF0aW9uTmFtZSIpO2lmKGpRdWVyeS5zdXBwb3J0LmNzc0dyYWRpZW50cz09PXVuZGVmaW5lZCl7dmFyIEU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksaD1FLnN0eWxlO3RyeXtoLmJhY2tncm91bmRJbWFnZT0ibGluZWFyLWdyYWRpZW50KGxlZnQgdG9wLCByZWQsIHdoaXRlKSI7aC5iYWNrZ3JvdW5kSW1hZ2U9Ii1tb3otbGluZWFyLWdyYWRpZW50KGxlZnQgdG9wLCByZWQsIHdoaXRlKSI7aC5iYWNrZ3JvdW5kSW1hZ2U9Ii13ZWJraXQtbGluZWFyLWdyYWRpZW50KGxlZnQgdG9wLCByZWQsIHdoaXRlKSI7aC5iYWNrZ3JvdW5kSW1hZ2U9Ii1tcy1saW5lYXItZ3JhZGllbnQobGVmdCB0b3AsIHJlZCwgd2hpdGUpIjtoLmJhY2tncm91bmRJbWFnZT0iLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIGxlZnQgdG9wLCByaWdodCBib3R0b20sIGZyb20ocmVkKSwgdG8od2hpdGUpKSJ9Y2F0Y2goZSl7fWpRdWVyeS5zdXBwb3J0LmNzc0dyYWRpZW50cz0oaC5iYWNrZ3JvdW5kSW1hZ2UmJmguYmFja2dyb3VuZEltYWdlLmluZGV4T2YoImdyYWRpZW50Iik+LTEpO0U9bnVsbH1qUXVlcnkuc3VwcG9ydC5mbGV4Qm94UHJlZml4ZWQ9dHJ1ZTtrKCJmbGV4Qm94TGF5b3V0IiwiYm94RmxleCIpO2lmKGgubXNGbGV4T3JkZXIhPT11bmRlZmluZWQpe2pRdWVyeS5zdXBwb3J0LmllMTBGbGV4Qm94TGF5b3V0PXRydWV9aygibmV3RmxleEJveExheW91dCIsImZsZXhHcm93Iik7aWYoalF1ZXJ5LnN1cHBvcnQuZmxleEJveExheW91dHx8alF1ZXJ5LnN1cHBvcnQubmV3RmxleEJveExheW91dHx8alF1ZXJ5LnN1cHBvcnQuaWUxMEZsZXhCb3hMYXlvdXQpe2pRdWVyeS5zdXBwb3J0Lmhhc0ZsZXhCb3hTdXBwb3J0PXRydWV9ZWxzZXtqUXVlcnkuc3VwcG9ydC5oYXNGbGV4Qm94U3VwcG9ydD1mYWxzZX1pZighalF1ZXJ5LnN1cHBvcnQub3BhY2l0eSl7KGZ1bmN0aW9uKCl7dmFyIG89alF1ZXJ5LmNzc0hvb2tzLm9wYWNpdHkuc2V0O2pRdWVyeS5jc3NIb29rcy5vcGFjaXR5LnNldD1mdW5jdGlvbihpLHYpe28uYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCFqUXVlcnkudHJpbShpLnN0eWxlLmZpbHRlcikpe2kuc3R5bGUucmVtb3ZlQXR0cmlidXRlKCJmaWx0ZXIiKX19fSgpKX1mdW5jdGlvbiBQKCl7ZnVuY3Rpb24gTShJLHMsbCxtKXt0aGlzLmlkPUk7dGhpcy5pbmZvPXM7dGhpcy5zdGFydD1sO3RoaXMuZW5kPW07dGhpcy5wYXVzZT0wO3RoaXMucmVzdW1lPTA7dGhpcy5kdXJhdGlvbj0wO3RoaXMudGltZT0wfXZhciBBPWZhbHNlO3ZhciBpPWpRdWVyeS5hamF4O3RoaXMuZ2V0QWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIEF9O3RoaXMuc2V0QWN0aXZlPWZ1bmN0aW9uKG8pe2lmKEE9PW8pe3JldHVybiBBfUE9bztpZihBKXtqUXVlcnkuYWpheD1mdW5jdGlvbih1LGwpe2pRdWVyeS5zYXAubWVhc3VyZS5zdGFydCh1LnVybCwiUmVxdWVzdCBmb3IgIit1LnVybCk7aS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7alF1ZXJ5LnNhcC5tZWFzdXJlLmVuZCh1LnVybCl9fWVsc2UgaWYoaSl7alF1ZXJ5LmFqYXg9aX1yZXR1cm4gQX07dGhpcy5zZXRBY3RpdmUoL3NhcC11aS1tZWFzdXJlPSh0cnVlfHh8WCkvLnRlc3QobG9jYXRpb24uc2VhcmNoKSk7dGhpcy5tTWVhc3VyZW1lbnRzPXt9O3RoaXMuc3RhcnQ9ZnVuY3Rpb24oSSxzKXtpZighQSl7cmV0dXJufXZhciB0PW5ldyBEYXRlKCkuZ2V0VGltZSgpO3ZhciBtPW5ldyBNKEkscyx0LDApO2lmKG0pe3RoaXMubU1lYXN1cmVtZW50c1tJXT1tO3JldHVybih7aWQ6bS5pZCxpbmZvOm0uaW5mbyxzdGFydDptLnN0YXJ0fSl9ZWxzZXtyZXR1cm4gZmFsc2V9fTt0aGlzLnBhdXNlPWZ1bmN0aW9uKEkpe2lmKCFBKXtyZXR1cm59dmFyIHQ9bmV3IERhdGUoKS5nZXRUaW1lKCk7dmFyIG09dGhpcy5tTWVhc3VyZW1lbnRzW0ldO2lmKG0mJm0uZW5kPjApe3JldHVybiBmYWxzZX1pZihtJiZtLnBhdXNlPT0wKXttLnBhdXNlPXQ7aWYobS5wYXVzZT49bS5yZXN1bWUmJm0ucmVzdW1lPjApe20uZHVyYXRpb249bS5kdXJhdGlvbittLnBhdXNlLW0ucmVzdW1lO20ucmVzdW1lPTB9ZWxzZSBpZihtLnBhdXNlPj1tLnN0YXJ0KXttLmR1cmF0aW9uPW0ucGF1c2UtbS5zdGFydH19aWYobSl7cmV0dXJuKHtpZDptLmlkLGluZm86bS5pbmZvLHN0YXJ0Om0uc3RhcnQscGF1c2U6bS5wYXVzZX0pfWVsc2V7cmV0dXJuIGZhbHNlfX07dGhpcy5yZXN1bWU9ZnVuY3Rpb24oSSl7aWYoIUEpe3JldHVybn12YXIgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTt2YXIgbT10aGlzLm1NZWFzdXJlbWVudHNbSV07aWYobSYmbS5wYXVzZT4wKXttLnBhdXNlPTA7bS5yZXN1bWU9dH1pZihtKXtyZXR1cm4oe2lkOm0uaWQsaW5mbzptLmluZm8sc3RhcnQ6bS5zdGFydCxyZXN1bWU6bS5yZXN1bWV9KX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMuZW5kPWZ1bmN0aW9uKEkpe2lmKCFBKXtyZXR1cm59dmFyIHQ9bmV3IERhdGUoKS5nZXRUaW1lKCk7dmFyIG09dGhpcy5tTWVhc3VyZW1lbnRzW0ldO2lmKG0mJiFtLmVuZCl7bS5lbmQ9dDtpZihtLmVuZD49bS5yZXN1bWUmJm0ucmVzdW1lPjApe20uZHVyYXRpb249bS5kdXJhdGlvbittLmVuZC1tLnJlc3VtZTttLnJlc3VtZT0wfWVsc2UgaWYobS5wYXVzZT4wKXttLnBhdXNlPTB9ZWxzZSBpZihtLmVuZD49bS5zdGFydCl7bS5kdXJhdGlvbj1tLmVuZC1tLnN0YXJ0fWlmKG0uZW5kPj1tLnN0YXJ0KXttLnRpbWU9bS5lbmQtbS5zdGFydH19aWYobSl7cmV0dXJuKHtpZDptLmlkLGluZm86bS5pbmZvLHN0YXJ0Om0uc3RhcnQsZW5kOm0uZW5kLHRpbWU6bS50aW1lLGR1cmF0aW9uOm0uZHVyYXRpb259KX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMuZ2V0TWVhc3VyZW1lbnQ9ZnVuY3Rpb24oSSl7aWYoIUEpe3JldHVybn12YXIgbT10aGlzLm1NZWFzdXJlbWVudHNbSV07aWYobSl7cmV0dXJuKHtpZDptLmlkLGluZm86bS5pbmZvLHN0YXJ0Om0uc3RhcnQsZW5kOm0uZW5kLHRpbWU6bS50aW1lLGR1cmF0aW9uOm0uZHVyYXRpb259KX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMuY2xlYXI9ZnVuY3Rpb24oKXtpZighQSl7cmV0dXJufXRoaXMubU1lYXN1cmVtZW50cz17fTtyZXR1cm59O3RoaXMucmVtb3ZlPWZ1bmN0aW9uKEkpe2lmKCFBKXtyZXR1cm59ZGVsZXRlIHRoaXMubU1lYXN1cmVtZW50c1tJXTtyZXR1cm59O3RoaXMuZ2V0QWxsTWVhc3VyZW1lbnRzPWZ1bmN0aW9uKCl7aWYoIUEpe3JldHVybn12YXIgbT1uZXcgQXJyYXkoKTtqUXVlcnkuZWFjaCh0aGlzLm1NZWFzdXJlbWVudHMsZnVuY3Rpb24oSSxvKXttLnB1c2goe2lkOm8uaWQsaW5mbzpvLmluZm8sc3RhcnQ6by5zdGFydCxlbmQ6by5lbmQsZHVyYXRpb246by5kdXJhdGlvbix0aW1lOm8udGltZX0pfSk7cmV0dXJuIG19O3RoaXMuYWRkPWZ1bmN0aW9uKEkscyxsLG0sdCxEKXtpZighQSl7cmV0dXJufXZhciBvPW5ldyBNKEkscyxsLG0pO28udGltZT10O28uZHVyYXRpb249RDtpZihvKXt0aGlzLm1NZWFzdXJlbWVudHNbSV09bztyZXR1cm4oe2lkOm8uaWQsaW5mbzpvLmluZm8sc3RhcnQ6by5zdGFydCxlbmQ6by5lbmQsdGltZTpvLnRpbWUsZHVyYXRpb246by5kdXJhdGlvbn0pfWVsc2V7cmV0dXJuIGZhbHNlfX19alF1ZXJ5LnNhcC5tZWFzdXJlPW5ldyBQKCl9KCkpOwpqUXVlcnkuc2FwLmdsb2JhbEV2YWw9ZnVuY3Rpb24oKXtldmFsKGFyZ3VtZW50c1swXSl9OwovKgoqIGpRdWVyeSBNb2JpbGUgdjEuMy4xCiogaHR0cDovL2pxdWVyeW1vYmlsZS5jb20KKgoqIENvcHlyaWdodCAyMDEwLCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnMKKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQoqCiovCgooZnVuY3Rpb24ocixkLGYpe2lmKHR5cGVvZiBkZWZpbmU9PT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kKXtkZWZpbmUoWyJqcXVlcnkiXSxmdW5jdGlvbigkKXtmKCQscixkKTtyZXR1cm4gJC5tb2JpbGV9KX1lbHNle2Yoci5qUXVlcnkscixkKX19KHRoaXMsZG9jdW1lbnQsZnVuY3Rpb24oUSxkLGYsdSl7Ci8vIEFib3V0OiBMaWNlbnNlCi8vIENvcHlyaWdodCAoYykgMjAxMCAiQ293Ym95IiBCZW4gQWxtYW4sCi8vIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLgovLyBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvCihmdW5jdGlvbigkLGQsdSl7dmFyIHM9J2hhc2hjaGFuZ2UnLGE9ZixiLGM9JC5ldmVudC5zcGVjaWFsLGc9YS5kb2N1bWVudE1vZGUsaD0nb24nK3MgaW4gZCYmKGc9PT11fHxnPjcpO2Z1bmN0aW9uIGkoZSl7ZT1lfHxsb2NhdGlvbi5ocmVmO3JldHVybicjJytlLnJlcGxhY2UoL15bXiNdKiM/KC4qKSQvLCckMScpfTskLmZuW3NdPWZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMuYmluZChzLGUpOnRoaXMudHJpZ2dlcihzKX07JC5mbltzXS5kZWxheT01MDtjW3NdPSQuZXh0ZW5kKGNbc10se3NldHVwOmZ1bmN0aW9uKCl7aWYoaCl7cmV0dXJuIGZhbHNlfSQoYi5zdGFydCl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7aWYoaCl7cmV0dXJuIGZhbHNlfSQoYi5zdG9wKX19KTtiPShmdW5jdGlvbigpe3ZhciBqPXt9LHQsbD1pKCksaz1mdW5jdGlvbih2KXtyZXR1cm4gdn0sbT1rLG49aztqLnN0YXJ0PWZ1bmN0aW9uKCl7dHx8cCgpfTtqLnN0b3A9ZnVuY3Rpb24oKXt0JiZjbGVhclRpbWVvdXQodCk7dD11fTtmdW5jdGlvbiBwKCl7dmFyIGU9aSgpLG89bihsKTtpZihlIT09bCl7bShsPWUsbyk7JChkKS50cmlnZ2VyKHMpfWVsc2UgaWYobyE9PWwpe2xvY2F0aW9uLmhyZWY9bG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiovLCcnKStvfXQ9c2V0VGltZW91dChwLCQuZm5bc10uZGVsYXkpfTtkLmF0dGFjaEV2ZW50JiYhZC5hZGRFdmVudExpc3RlbmVyJiYhaCYmKGZ1bmN0aW9uKCl7dmFyIG8scTtqLnN0YXJ0PWZ1bmN0aW9uKCl7aWYoIW8pe3E9JC5mbltzXS5zcmM7cT1xJiZxK2koKTtvPSQoJzxpZnJhbWUgdGFiaW5kZXg9Ii0xIiB0aXRsZT0iZW1wdHkiLz4nKS5oaWRlKCkub25lKCdsb2FkJyxmdW5jdGlvbigpe3F8fG0oaSgpKTtwKCl9KS5hdHRyKCdzcmMnLHF8fCdqYXZhc2NyaXB0OjAnKS5pbnNlcnRBZnRlcignYm9keScpWzBdLmNvbnRlbnRXaW5kb3c7YS5vbnByb3BlcnR5Y2hhbmdlPWZ1bmN0aW9uKCl7dHJ5e2lmKGV2ZW50LnByb3BlcnR5TmFtZT09PSd0aXRsZScpe28uZG9jdW1lbnQudGl0bGU9YS50aXRsZX19Y2F0Y2goZSl7fX19fTtqLnN0b3A9aztuPWZ1bmN0aW9uKCl7cmV0dXJuIGkoby5sb2NhdGlvbi5ocmVmKX07bT1mdW5jdGlvbihlLHIpe3ZhciB2PW8uZG9jdW1lbnQsdz0kLmZuW3NdLmRvbWFpbjtpZihlIT09cil7di50aXRsZT1hLnRpdGxlO3Yub3BlbigpO3cmJnYud3JpdGUoJzxzY3JpcHQ+ZG9jdW1lbnQuZG9tYWluPSInK3crJyI8L3NjcmlwdD4nKTt2LmNsb3NlKCk7by5sb2NhdGlvbi5oYXNoPWV9fX0pKCk7cmV0dXJuIGp9KSgpfSkoUSx0aGlzKTsoZnVuY3Rpb24oJCl7JC5tb2JpbGU9e307US5tb2JpbGUub3JpZW50YXRpb25DaGFuZ2VFbmFibGVkPXRydWV9KFEpKTsoZnVuY3Rpb24oJCxkLHUpe3ZhciBuPXt9OyQubW9iaWxlPSQuZXh0ZW5kKCQubW9iaWxlLHt2ZXJzaW9uOiIxLjMuMSIsbnM6IiIsc3ViUGFnZVVybEtleToidWktcGFnZSIsYWN0aXZlUGFnZUNsYXNzOiJ1aS1wYWdlLWFjdGl2ZSIsYWN0aXZlQnRuQ2xhc3M6InVpLWJ0bi1hY3RpdmUiLGZvY3VzQ2xhc3M6InVpLWZvY3VzIixhamF4RW5hYmxlZDp0cnVlLGhhc2hMaXN0ZW5pbmdFbmFibGVkOnRydWUsbGlua0JpbmRpbmdFbmFibGVkOnRydWUsZGVmYXVsdFBhZ2VUcmFuc2l0aW9uOiJmYWRlIixtYXhUcmFuc2l0aW9uV2lkdGg6ZmFsc2UsbWluU2Nyb2xsQmFjazoyNTAsdG91Y2hPdmVyZmxvd0VuYWJsZWQ6ZmFsc2UsZGVmYXVsdERpYWxvZ1RyYW5zaXRpb246InBvcCIscGFnZUxvYWRFcnJvck1lc3NhZ2U6IkVycm9yIExvYWRpbmcgUGFnZSIscGFnZUxvYWRFcnJvck1lc3NhZ2VUaGVtZToiZSIscGhvbmVnYXBOYXZpZ2F0aW9uRW5hYmxlZDpmYWxzZSxhdXRvSW5pdGlhbGl6ZVBhZ2U6dHJ1ZSxwdXNoU3RhdGVFbmFibGVkOnRydWUsaWdub3JlQ29udGVudEVuYWJsZWQ6ZmFsc2Usb3JpZW50YXRpb25DaGFuZ2VFbmFibGVkOnRydWUsYnV0dG9uTWFya3VwOntob3ZlckRlbGF5OjIwMH0sd2luZG93OiQoZCksZG9jdW1lbnQ6JChmKSxrZXlDb2RlOntBTFQ6MTgsQkFDS1NQQUNFOjgsQ0FQU19MT0NLOjIwLENPTU1BOjE4OCxDT01NQU5EOjkxLENPTU1BTkRfTEVGVDo5MSxDT01NQU5EX1JJR0hUOjkzLENPTlRST0w6MTcsREVMRVRFOjQ2LERPV046NDAsRU5EOjM1LEVOVEVSOjEzLEVTQ0FQRToyNyxIT01FOjM2LElOU0VSVDo0NSxMRUZUOjM3LE1FTlU6OTMsTlVNUEFEX0FERDoxMDcsTlVNUEFEX0RFQ0lNQUw6MTEwLE5VTVBBRF9ESVZJREU6MTExLE5VTVBBRF9FTlRFUjoxMDgsTlVNUEFEX01VTFRJUExZOjEwNixOVU1QQURfU1VCVFJBQ1Q6MTA5LFBBR0VfRE9XTjozNCxQQUdFX1VQOjMzLFBFUklPRDoxOTAsUklHSFQ6MzksU0hJRlQ6MTYsU1BBQ0U6MzIsVEFCOjksVVA6MzgsV0lORE9XUzo5MX0sYmVoYXZpb3JzOnt9LHNpbGVudFNjcm9sbDpmdW5jdGlvbih5KXtpZigkLnR5cGUoeSkhPT0ibnVtYmVyIil7eT0kLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbH0kLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZD1mYWxzZTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC5zY3JvbGxUbygwLHkpOyQubW9iaWxlLmRvY3VtZW50LnRyaWdnZXIoInNpbGVudHNjcm9sbCIse3g6MCx5Onl9KX0sMjApO3NldFRpbWVvdXQoZnVuY3Rpb24oKXskLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZD10cnVlfSwxNTApfSxuc05vcm1hbGl6ZURpY3Q6bixuc05vcm1hbGl6ZTpmdW5jdGlvbihwKXtpZighcCl7cmV0dXJufXJldHVybiBuW3BdfHwobltwXT0kLmNhbWVsQ2FzZSgkLm1vYmlsZS5ucytwKSl9LGdldEluaGVyaXRlZFRoZW1lOmZ1bmN0aW9uKGEsYil7dmFyIGU9YVswXSxsPSIiLHI9L3VpLShiYXJ8Ym9keXxvdmVybGF5KS0oW2Etel0pXGIvLGMsbTt3aGlsZShlKXtjPWUuY2xhc3NOYW1lfHwiIjtpZihjJiYobT1yLmV4ZWMoYykpJiYobD1tWzJdKSl7YnJlYWt9ZT1lLnBhcmVudE5vZGV9cmV0dXJuIGx8fGJ8fCJhIn0sY2xvc2VzdFBhZ2VEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNsb3Nlc3QoJzpqcW1EYXRhKHJvbGU9InBhZ2UiKSwgOmpxbURhdGEocm9sZT0iZGlhbG9nIiknKS5kYXRhKCJtb2JpbGUtcGFnZSIpfSxlbmhhbmNlYWJsZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYXZlUGFyZW50cyhhLCJlbmhhbmNlIil9LGhpamFja2FibGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaGF2ZVBhcmVudHMoYSwiYWpheCIpfSxoYXZlUGFyZW50czpmdW5jdGlvbihhLGIpe2lmKCEkLm1vYmlsZS5pZ25vcmVDb250ZW50RW5hYmxlZCl7cmV0dXJuIGF9dmFyIGc9YS5sZW5ndGgsaD0kKCksZSxrLGw7Zm9yKHZhciBpPTA7aTxnO2krKyl7az1hLmVxKGkpO2w9ZmFsc2U7ZT1hW2ldO3doaWxlKGUpe3ZhciBjPWUuZ2V0QXR0cmlidXRlP2UuZ2V0QXR0cmlidXRlKCJkYXRhLSIrJC5tb2JpbGUubnMrYik6IiI7aWYoYz09PSJmYWxzZSIpe2w9dHJ1ZTticmVha31lPWUucGFyZW50Tm9kZX1pZighbCl7aD1oLmFkZChrKX19cmV0dXJuIGh9LGdldFNjcmVlbkhlaWdodDpmdW5jdGlvbigpe3JldHVybiBkLmlubmVySGVpZ2h0fHwkLm1vYmlsZS53aW5kb3cuaGVpZ2h0KCl9fSwkLm1vYmlsZSk7JC5mbi5qcW1EYXRhPWZ1bmN0aW9uKHAsdil7dmFyIHI7aWYodHlwZW9mIHAhPT0idW5kZWZpbmVkIil7aWYocCl7cD0kLm1vYmlsZS5uc05vcm1hbGl6ZShwKX1pZihhcmd1bWVudHMubGVuZ3RoPDJ8fHY9PT11KXtyPXRoaXMuZGF0YShwKX1lbHNle3I9dGhpcy5kYXRhKHAsdil9fXJldHVybiByfTskLmpxbURhdGE9ZnVuY3Rpb24oZSxwLHYpe3ZhciByO2lmKHR5cGVvZiBwIT09InVuZGVmaW5lZCIpe3I9JC5kYXRhKGUscD8kLm1vYmlsZS5uc05vcm1hbGl6ZShwKTpwLHYpfXJldHVybiByfTskLmZuLmpxbVJlbW92ZURhdGE9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMucmVtb3ZlRGF0YSgkLm1vYmlsZS5uc05vcm1hbGl6ZShwKSl9OyQuanFtUmVtb3ZlRGF0YT1mdW5jdGlvbihlLHApe3JldHVybiAkLnJlbW92ZURhdGEoZSwkLm1vYmlsZS5uc05vcm1hbGl6ZShwKSl9OyQuZm4ucmVtb3ZlV2l0aERlcGVuZGVudHM9ZnVuY3Rpb24oKXskLnJlbW92ZVdpdGhEZXBlbmRlbnRzKHRoaXMpfTskLnJlbW92ZVdpdGhEZXBlbmRlbnRzPWZ1bmN0aW9uKGUpe3ZhciBhPSQoZSk7KGEuanFtRGF0YSgnZGVwZW5kZW50cycpfHwkKCkpLnJlbW92ZSgpO2EucmVtb3ZlKCl9OyQuZm4uYWRkRGVwZW5kZW50cz1mdW5jdGlvbihhKXskLmFkZERlcGVuZGVudHMoJCh0aGlzKSxhKX07JC5hZGREZXBlbmRlbnRzPWZ1bmN0aW9uKGUsYSl7dmFyIGI9JChlKS5qcW1EYXRhKCdkZXBlbmRlbnRzJyl8fCQoKTskKGUpLmpxbURhdGEoJ2RlcGVuZGVudHMnLCQubWVyZ2UoYixhKSl9OyQuZm4uZ2V0RW5jb2RlZFRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gJCgiPGRpdi8+IikudGV4dCgkKHRoaXMpLnRleHQoKSkuaHRtbCgpfTskLmZuLmpxbUVuaGFuY2VhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuICQubW9iaWxlLmVuaGFuY2VhYmxlKHRoaXMpfTskLmZuLmpxbUhpamFja2FibGU9ZnVuY3Rpb24oKXtyZXR1cm4gJC5tb2JpbGUuaGlqYWNrYWJsZSh0aGlzKX07dmFyIG89JC5maW5kLGo9LzpqcW1EYXRhXCgoW14pXSopXCkvZzskLmZpbmQ9ZnVuY3Rpb24ocyxjLHIsZSl7cz1zLnJlcGxhY2UoaiwiW2RhdGEtIisoJC5tb2JpbGUubnN8fCIiKSsiJDFdIik7cmV0dXJuIG8uY2FsbCh0aGlzLHMsYyxyLGUpfTskLmV4dGVuZCgkLmZpbmQsbyk7JC5maW5kLm1hdGNoZXM9ZnVuY3Rpb24oZSxzKXtyZXR1cm4gJC5maW5kKGUsbnVsbCxudWxsLHMpfTskLmZpbmQubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsZSl7cmV0dXJuICQuZmluZChlLG51bGwsbnVsbCxbYV0pLmxlbmd0aD4wfX0pKFEsdGhpcyk7KGZ1bmN0aW9uKCQsdSl7Ci8qISBtYXRjaE1lZGlhKCkgcG9seWZpbGwgLSBUZXN0IGEgQ1NTIG1lZGlhIHR5cGUvcXVlcnkgaW4gSlMuIEF1dGhvcnMgJiBjb3B5cmlnaHQgKGMpIDIwMTI6IFNjb3R0IEplaGwsIFBhdWwgSXJpc2gsIE5pY2hvbGFzIFpha2FzLiBEdWFsIE1JVC9CU0QgbGljZW5zZSAqLwpkLm1hdGNoTWVkaWE9ZC5tYXRjaE1lZGlhfHwoZnVuY3Rpb24oYSx1KXt2YXIgYixjPWEuZG9jdW1lbnRFbGVtZW50LHI9Yy5maXJzdEVsZW1lbnRDaGlsZHx8Yy5maXJzdENoaWxkLGU9YS5jcmVhdGVFbGVtZW50KCJib2R5IiksZz1hLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2cuaWQ9Im1xLXRlc3QtMSI7Zy5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTEwMGVtIjtlLnN0eWxlLmJhY2tncm91bmQ9Im5vbmUiO2UuYXBwZW5kQ2hpbGQoZyk7cmV0dXJuIGZ1bmN0aW9uKHEpe2cuaW5uZXJIVE1MPSImc2h5OzxzdHlsZSBtZWRpYT1cIiIrcSsiXCI+ICNtcS10ZXN0LTEgeyB3aWR0aDogNDJweDsgfTwvc3R5bGU+IjtjLmluc2VydEJlZm9yZShlLHIpO2I9Zy5vZmZzZXRXaWR0aD09PTQyO2MucmVtb3ZlQ2hpbGQoZSk7cmV0dXJue21hdGNoZXM6YixtZWRpYTpxfX19KGYpKTskLm1vYmlsZS5tZWRpYT1mdW5jdGlvbihxKXtyZXR1cm4gZC5tYXRjaE1lZGlhKHEpLm1hdGNoZXN9fSkoUSk7KGZ1bmN0aW9uKCQsdSl7dmFyIHM9e3RvdWNoOiJvbnRvdWNoZW5kImluIGZ9OyQubW9iaWxlLnN1cHBvcnQ9JC5tb2JpbGUuc3VwcG9ydHx8e307JC5leHRlbmQoJC5zdXBwb3J0LHMpOyQuZXh0ZW5kKCQubW9iaWxlLnN1cHBvcnQscyl9KFEpKTsoZnVuY3Rpb24oJCx1KXskLmV4dGVuZCgkLnN1cHBvcnQse29yaWVudGF0aW9uOiJvcmllbnRhdGlvbiJpbiBkJiYib25vcmllbnRhdGlvbmNoYW5nZSJpbiBkfSl9KFEpKTsoZnVuY3Rpb24oJCx1KXtmdW5jdGlvbiBwKGEpe3ZhciBpPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zdWJzdHIoMSksdD0oYSsiICIrZS5qb2luKGkrIiAiKStpKS5zcGxpdCgiICIpO2Zvcih2YXIgdiBpbiB0KXtpZihjW3Rbdl1dIT09dSl7cmV0dXJuIHRydWV9fX12YXIgYj0kKCI8Ym9keT4iKS5wcmVwZW5kVG8oImh0bWwiKSxjPWJbMF0uc3R5bGUsZT1bIldlYmtpdCIsIk1veiIsIk8iXSxnPSJwYWxtR2V0UmVzb3VyY2UiaW4gZCxvPWQub3BlcmEsaD1kLm9wZXJhbWluaSYmKHt9KS50b1N0cmluZy5jYWxsKGQub3BlcmFtaW5pKT09PSJbb2JqZWN0IE9wZXJhTWluaV0iLGo9ZC5ibGFja2JlcnJ5JiYhcCgiLXdlYmtpdC10cmFuc2Zvcm0iKTtmdW5jdGlvbiBrKGEsdix0KXt2YXIgdz1mLmNyZWF0ZUVsZW1lbnQoJ2RpdicpLHg9ZnVuY3Rpb24oQyl7cmV0dXJuIEMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrQy5zdWJzdHIoMSl9LHk9ZnVuY3Rpb24oQyl7aWYoQz09PSIiKXtyZXR1cm4iIn1lbHNle3JldHVybiItIitDLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpK0Muc3Vic3RyKDEpKyItIn19LHo9ZnVuY3Rpb24oQyl7dmFyIEQ9eShDKSthKyI6ICIrdisiOyIsRT14KEMpLEY9RSsoRT09PSIiP2E6eChhKSk7dy5zZXRBdHRyaWJ1dGUoInN0eWxlIixEKTtpZighIXcuc3R5bGVbRl0pe0I9dHJ1ZX19LEE9dD90OmUsQjtmb3IodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7eihBW2ldKX1yZXR1cm4hIUJ9ZnVuY3Rpb24gbCgpe3ZhciBhPSJ0cmFuc2Zvcm0tM2QiLGk9JC5tb2JpbGUubWVkaWEoIigtIitlLmpvaW4oIi0iK2ErIiksKC0iKSsiLSIrYSsiKSwoIithKyIpIik7aWYoaSl7cmV0dXJuISFpfXZhciB2PWYuY3JlYXRlRWxlbWVudCgiZGl2Iiksdz17J01velRyYW5zZm9ybSc6Jy1tb3otdHJhbnNmb3JtJywndHJhbnNmb3JtJzondHJhbnNmb3JtJ307Yi5hcHBlbmQodik7Zm9yKHZhciB0IGluIHcpe2lmKHYuc3R5bGVbdF0hPT11KXt2LnN0eWxlW3RdPSd0cmFuc2xhdGUzZCggMTAwcHgsIDFweCwgMXB4ICknO2k9ZC5nZXRDb21wdXRlZFN0eWxlKHYpLmdldFByb3BlcnR5VmFsdWUod1t0XSl9fXJldHVybighIWkmJmkhPT0ibm9uZSIpfWZ1bmN0aW9uIG0oKXt2YXIgYT1sb2NhdGlvbi5wcm90b2NvbCsiLy8iK2xvY2F0aW9uLmhvc3QrbG9jYXRpb24ucGF0aG5hbWUrInVpLWRpci8iLGk9JCgiaGVhZCBiYXNlIiksdD1udWxsLHY9IiIsdyx4O2lmKCFpLmxlbmd0aCl7aT10PSQoIjxiYXNlPiIseyJocmVmIjphfSkuYXBwZW5kVG8oImhlYWQiKX1lbHNle3Y9aS5hdHRyKCJocmVmIil9dz0kKCI8YSBocmVmPSd0ZXN0dXJsJyAvPiIpLnByZXBlbmRUbyhiKTt4PXdbMF0uaHJlZjtpWzBdLmhyZWY9dnx8bG9jYXRpb24ucGF0aG5hbWU7aWYodCl7dC5yZW1vdmUoKX1yZXR1cm4geC5pbmRleE9mKGEpPT09MH1mdW5jdGlvbiBuKCl7dmFyIGE9Zi5jcmVhdGVFbGVtZW50KCd4JyksaT1mLmRvY3VtZW50RWxlbWVudCx0PWQuZ2V0Q29tcHV0ZWRTdHlsZSx2O2lmKCEoJ3BvaW50ZXJFdmVudHMnaW4gYS5zdHlsZSkpe3JldHVybiBmYWxzZX1hLnN0eWxlLnBvaW50ZXJFdmVudHM9J2F1dG8nO2Euc3R5bGUucG9pbnRlckV2ZW50cz0neCc7aS5hcHBlbmRDaGlsZChhKTt2PXQmJnQoYSwnJykucG9pbnRlckV2ZW50cz09PSdhdXRvJztpLnJlbW92ZUNoaWxkKGEpO3JldHVybiEhdn1mdW5jdGlvbiBxKCl7dmFyIGE9Zi5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gdHlwZW9mIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09InVuZGVmaW5lZCJ9JC5leHRlbmQoJC5tb2JpbGUse2Jyb3dzZXI6e319KTskLm1vYmlsZS5icm93c2VyLm9sZElFPShmdW5jdGlvbigpe3ZhciB2PTMsaT1mLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGE9aS5hbGx8fFtdO2Rve2kuaW5uZXJIVE1MPSI8IS0tW2lmIGd0IElFICIrKCsrdikrIl0+PGJyPjwhW2VuZGlmXS0tPiJ9d2hpbGUoYVswXSk7cmV0dXJuIHY+ND92OiF2fSkoKTtmdW5jdGlvbiByKCl7dmFyIHc9ZCxhPW5hdmlnYXRvci51c2VyQWdlbnQsaT1uYXZpZ2F0b3IucGxhdGZvcm0sdD1hLm1hdGNoKC9BcHBsZVdlYktpdFwvKFswLTldKykvKSx2PSEhdCYmdFsxXSx4PWEubWF0Y2goL0Zlbm5lY1wvKFswLTldKykvKSx5PSEheCYmeFsxXSx6PWEubWF0Y2goL09wZXJhIE1vYmlcLyhbMC05XSspLyksQT0hIXomJnpbMV07aWYoKChpLmluZGV4T2YoImlQaG9uZSIpPi0xfHxpLmluZGV4T2YoImlQYWQiKT4tMXx8aS5pbmRleE9mKCJpUG9kIik+LTEpJiZ2JiZ2PDUzNCl8fCh3Lm9wZXJhbWluaSYmKHt9KS50b1N0cmluZy5jYWxsKHcub3BlcmFtaW5pKT09PSJbb2JqZWN0IE9wZXJhTWluaV0iKXx8KHomJkE8NzQ1OCl8fChhLmluZGV4T2YoIkFuZHJvaWQiKT4tMSYmdiYmdjw1MzMpfHwoeSYmeTw2KXx8KCJwYWxtR2V0UmVzb3VyY2UiaW4gZCYmdiYmdjw1MzQpfHwoYS5pbmRleE9mKCJNZWVHbyIpPi0xJiZhLmluZGV4T2YoIk5va2lhQnJvd3Nlci84LjUuMCIpPi0xKSl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfSQuZXh0ZW5kKCQuc3VwcG9ydCx7Y3NzVHJhbnNpdGlvbnM6IldlYktpdFRyYW5zaXRpb25FdmVudCJpbiBkfHxrKCd0cmFuc2l0aW9uJywnaGVpZ2h0IDEwMG1zIGxpbmVhcicsWyJXZWJraXQiLCJNb3oiLCIiXSkmJiEkLm1vYmlsZS5icm93c2VyLm9sZElFJiYhbyxwdXNoU3RhdGU6InB1c2hTdGF0ZSJpbiBoaXN0b3J5JiYicmVwbGFjZVN0YXRlImluIGhpc3RvcnkmJiEoZC5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3giKT49MCYmZC50b3AhPT1kKSYmKGQubmF2aWdhdG9yLnVzZXJBZ2VudC5zZWFyY2goL0NyaU9TLyk9PT0tMSksbWVkaWFxdWVyeTokLm1vYmlsZS5tZWRpYSgib25seSBhbGwiKSxjc3NQc2V1ZG9FbGVtZW50OiEhcCgiY29udGVudCIpLHRvdWNoT3ZlcmZsb3c6ISFwKCJvdmVyZmxvd1Njcm9sbGluZyIpLGNzc1RyYW5zZm9ybTNkOmwoKSxib3hTaGFkb3c6ISFwKCJib3hTaGFkb3ciKSYmIWosZml4ZWRQb3NpdGlvbjpyKCksc2Nyb2xsVG9wOigicGFnZVhPZmZzZXQiaW4gZHx8InNjcm9sbFRvcCJpbiBmLmRvY3VtZW50RWxlbWVudHx8InNjcm9sbFRvcCJpbiBiWzBdKSYmIWcmJiFoLGR5bmFtaWNCYXNlVGFnOm0oKSxjc3NQb2ludGVyRXZlbnRzOm4oKSxib3VuZGluZ1JlY3Q6cSgpfSk7Yi5yZW1vdmUoKTt2YXIgcz0oZnVuY3Rpb24oKXt2YXIgYT1kLm5hdmlnYXRvci51c2VyQWdlbnQ7cmV0dXJuIGEuaW5kZXhPZigiTm9raWEiKT4tMSYmKGEuaW5kZXhPZigiU3ltYmlhbi8zIik+LTF8fGEuaW5kZXhPZigiU2VyaWVzNjAvNSIpPi0xKSYmYS5pbmRleE9mKCJBcHBsZVdlYktpdCIpPi0xJiZhLm1hdGNoKC8oQnJvd3Nlck5HfE5va2lhQnJvd3NlcilcLzdcLlswLTNdLyl9KSgpOyQubW9iaWxlLmdyYWRlQT1mdW5jdGlvbigpe3JldHVybigkLnN1cHBvcnQubWVkaWFxdWVyeXx8JC5tb2JpbGUuYnJvd3Nlci5vbGRJRSYmJC5tb2JpbGUuYnJvd3Nlci5vbGRJRT49NykmJigkLnN1cHBvcnQuYm91bmRpbmdSZWN0fHwkLmZuLmpxdWVyeS5tYXRjaCgvMVwuWzAtNytdXC5bMC05K10/LykhPT1udWxsKX07JC5tb2JpbGUuYWpheEJsYWNrbGlzdD1kLmJsYWNrYmVycnkmJiFkLldlYktpdFBvaW50fHxofHxzO2lmKHMpeyQoZnVuY3Rpb24oKXskKCJoZWFkIGxpbmtbcmVsPSdzdHlsZXNoZWV0J10iKS5hdHRyKCJyZWwiLCJhbHRlcm5hdGUgc3R5bGVzaGVldCIpLmF0dHIoInJlbCIsInN0eWxlc2hlZXQiKX0pfWlmKCEkLnN1cHBvcnQuYm94U2hhZG93KXskKCJodG1sIikuYWRkQ2xhc3MoInVpLW1vYmlsZS1ub3N1cHBvcnQtYm94c2hhZG93Iil9fSkoUSk7KGZ1bmN0aW9uKCQsdSl7dmFyIGE9JC5tb2JpbGUud2luZG93LHMsaDskLmV2ZW50LnNwZWNpYWwubmF2aWdhdGU9cz17Ym91bmQ6ZmFsc2UscHVzaFN0YXRlRW5hYmxlZDp0cnVlLG9yaWdpbmFsRXZlbnROYW1lOnUsaXNQdXNoU3RhdGVFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuICQuc3VwcG9ydC5wdXNoU3RhdGUmJiQubW9iaWxlLnB1c2hTdGF0ZUVuYWJsZWQ9PT10cnVlJiZ0aGlzLmlzSGFzaENoYW5nZUVuYWJsZWQoKX0saXNIYXNoQ2hhbmdlRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZD09PXRydWV9LHBvcHN0YXRlOmZ1bmN0aW9uKGUpe3ZhciBuPW5ldyAkLkV2ZW50KCJuYXZpZ2F0ZSIpLGI9bmV3ICQuRXZlbnQoImJlZm9yZW5hdmlnYXRlIiksYz1lLm9yaWdpbmFsRXZlbnQuc3RhdGV8fHt9LGc9bG9jYXRpb24uaHJlZjthLnRyaWdnZXIoYik7aWYoYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7cmV0dXJufWlmKGUuaGlzdG9yeVN0YXRlKXskLmV4dGVuZChjLGUuaGlzdG9yeVN0YXRlKX1uLm9yaWdpbmFsRXZlbnQ9ZTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS50cmlnZ2VyKG4se3N0YXRlOmN9KX0sMCl9LGhhc2hjaGFuZ2U6ZnVuY3Rpb24oZSxiKXt2YXIgbj1uZXcgJC5FdmVudCgibmF2aWdhdGUiKSxjPW5ldyAkLkV2ZW50KCJiZWZvcmVuYXZpZ2F0ZSIpO2EudHJpZ2dlcihjKTtpZihjLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm59bi5vcmlnaW5hbEV2ZW50PWU7YS50cmlnZ2VyKG4se3N0YXRlOmUuaGFzaGNoYW5nZVN0YXRlfHx7fX0pfSxzZXR1cDpmdW5jdGlvbihiLG4pe2lmKHMuYm91bmQpe3JldHVybn1zLmJvdW5kPXRydWU7aWYocy5pc1B1c2hTdGF0ZUVuYWJsZWQoKSl7cy5vcmlnaW5hbEV2ZW50TmFtZT0icG9wc3RhdGUiO2EuYmluZCgicG9wc3RhdGUubmF2aWdhdGUiLHMucG9wc3RhdGUpfWVsc2UgaWYocy5pc0hhc2hDaGFuZ2VFbmFibGVkKCkpe3Mub3JpZ2luYWxFdmVudE5hbWU9Imhhc2hjaGFuZ2UiO2EuYmluZCgiaGFzaGNoYW5nZS5uYXZpZ2F0ZSIscy5oYXNoY2hhbmdlKX19fX0pKFEpOyhmdW5jdGlvbigkKXskLmV2ZW50LnNwZWNpYWwudGhyb3R0bGVkcmVzaXplPXtzZXR1cDpmdW5jdGlvbigpeyQodGhpcykuYmluZCgicmVzaXplIixoKX0sdGVhcmRvd246ZnVuY3Rpb24oKXskKHRoaXMpLnVuYmluZCgicmVzaXplIixoKX19O3ZhciB0PTI1MCxoPWZ1bmN0aW9uKCl7Yz0obmV3IERhdGUoKSkuZ2V0VGltZSgpO2I9Yy1sO2lmKGI+PXQpe2w9YzskKHRoaXMpLnRyaWdnZXIoInRocm90dGxlZHJlc2l6ZSIpfWVsc2V7aWYoYSl7Y2xlYXJUaW1lb3V0KGEpfWE9c2V0VGltZW91dChoLHQtYil9fSxsPTAsYSxjLGJ9KShRKTsoZnVuY3Rpb24oJCxkKXt2YXIgdz0kKGQpLGU9Im9yaWVudGF0aW9uY2hhbmdlIixzLGcsbCxpLGEscD17IjAiOnRydWUsIjE4MCI6dHJ1ZX07aWYoJC5zdXBwb3J0Lm9yaWVudGF0aW9uKXt2YXIgYj1kLmlubmVyV2lkdGh8fHcud2lkdGgoKSxjPWQuaW5uZXJIZWlnaHR8fHcuaGVpZ2h0KCksaD01MDtpPWI+YyYmKGItYyk+aDthPXBbZC5vcmllbnRhdGlvbl07aWYoKGkmJmEpfHwoIWkmJiFhKSl7cD17Ii05MCI6dHJ1ZSwiOTAiOnRydWV9fX0kLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2U9JC5leHRlbmQoe30sJC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLHtzZXR1cDpmdW5jdGlvbigpe2lmKCQuc3VwcG9ydC5vcmllbnRhdGlvbiYmISQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZS5kaXNhYmxlZCl7cmV0dXJuIGZhbHNlfWw9ZygpO3cuYmluZCgidGhyb3R0bGVkcmVzaXplIixqKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtpZigkLnN1cHBvcnQub3JpZW50YXRpb24mJiEkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2UuZGlzYWJsZWQpe3JldHVybiBmYWxzZX13LnVuYmluZCgidGhyb3R0bGVkcmVzaXplIixqKX0sYWRkOmZ1bmN0aW9uKGspe3ZhciBvPWsuaGFuZGxlcjtrLmhhbmRsZXI9ZnVuY3Rpb24obSl7bS5vcmllbnRhdGlvbj1nKCk7cmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX19KTtmdW5jdGlvbiBqKCl7dmFyIG89ZygpO2lmKG8hPT1sKXtsPW87dy50cmlnZ2VyKGUpfX0kLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2Uub3JpZW50YXRpb249Zz1mdW5jdGlvbigpe3ZhciBrPXRydWUsbT1mLmRvY3VtZW50RWxlbWVudDtpZigkLnN1cHBvcnQub3JpZW50YXRpb24pe2s9cFtkLm9yaWVudGF0aW9uXX1lbHNle2s9bSYmbS5jbGllbnRXaWR0aC9tLmNsaWVudEhlaWdodDwxLjF9cmV0dXJuIGs/InBvcnRyYWl0IjoibGFuZHNjYXBlIn07JC5mbltlXT1mdW5jdGlvbihrKXtyZXR1cm4gaz90aGlzLmJpbmQoZSxrKTp0aGlzLnRyaWdnZXIoZSl9O2lmKCQuYXR0ckZuKXskLmF0dHJGbltlXT10cnVlfX0oUSx0aGlzKSk7KGZ1bmN0aW9uKCQsZCxmLHUpe3ZhciBhPSJ2aXJ0dWFsTW91c2VCaW5kaW5ncyIsYz0idmlydHVhbFRvdWNoSUQiLHY9InZtb3VzZW92ZXIgdm1vdXNlZG93biB2bW91c2Vtb3ZlIHZtb3VzZXVwIHZjbGljayB2bW91c2VvdXQgdm1vdXNlY2FuY2VsIi5zcGxpdCgiICIpLGc9ImNsaWVudFggY2xpZW50WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkiLnNwbGl0KCIgIiksbT0kLmV2ZW50Lm1vdXNlSG9va3M/JC5ldmVudC5tb3VzZUhvb2tzLnByb3BzOltdLGg9JC5ldmVudC5wcm9wcy5jb25jYXQobSksbD17fSxyPTAscz0wLG49MCxwPWZhbHNlLHE9W10sdz1mYWxzZSx6PWZhbHNlLEE9ImFkZEV2ZW50TGlzdGVuZXIiaW4gZixCPSQoZiksQz0xLEQ9MCxFOyQudm1vdXNlPXttb3ZlRGlzdGFuY2VUaHJlc2hvbGQ6MTAsY2xpY2tEaXN0YW5jZVRocmVzaG9sZDoxMCxyZXNldFRpbWVyRHVyYXRpb246MTUwMH07ZnVuY3Rpb24gRihlKXt3aGlsZShlJiZ0eXBlb2YgZS5vcmlnaW5hbEV2ZW50IT09InVuZGVmaW5lZCIpe2U9ZS5vcmlnaW5hbEV2ZW50fXJldHVybiBlfWZ1bmN0aW9uIEcoZSxiKXt2YXIgdD1lLnR5cGUsbyxrLHgseSxfLGExLGksaixiMTtlPSQuRXZlbnQoZSk7ZS50eXBlPWI7bz1lLm9yaWdpbmFsRXZlbnQ7az0kLmV2ZW50LnByb3BzO2lmKHQuc2VhcmNoKC9eKG1vdXNlfGNsaWNrKS8pPi0xKXtrPWh9aWYobyl7Zm9yKGk9ay5sZW5ndGgseTtpOyl7eT1rWy0taV07ZVt5XT1vW3ldfX1pZih0LnNlYXJjaCgvbW91c2UoZG93bnx1cCl8Y2xpY2svKT4tMSYmIWUud2hpY2gpe2Uud2hpY2g9MX1pZih0LnNlYXJjaCgvXnRvdWNoLykhPT0tMSl7eD1GKG8pO3Q9eC50b3VjaGVzO189eC5jaGFuZ2VkVG91Y2hlczthMT0odCYmdC5sZW5ndGgpP3RbMF06KChfJiZfLmxlbmd0aCk/X1swXTp1KTtpZihhMSl7Zm9yKGo9MCxiMT1nLmxlbmd0aDtqPGIxO2orKyl7eT1nW2pdO2VbeV09YTFbeV19fX1yZXR1cm4gZX1mdW5jdGlvbiBIKGUpe3ZhciBqPXt9LGIsazt3aGlsZShlKXtiPSQuZGF0YShlLGEpO2ZvcihrIGluIGIpe2lmKGJba10pe2pba109ai5oYXNWaXJ0dWFsQmluZGluZz10cnVlfX1lPWUucGFyZW50Tm9kZX1yZXR1cm4gan1mdW5jdGlvbiBJKGUsail7dmFyIGI7d2hpbGUoZSl7Yj0kLmRhdGEoZSxhKTtpZihiJiYoIWp8fGJbal0pKXtyZXR1cm4gZX1lPWUucGFyZW50Tm9kZX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBKKCl7ej1mYWxzZX1mdW5jdGlvbiBLKCl7ej10cnVlfWZ1bmN0aW9uIEwoKXtEPTA7cS5sZW5ndGg9MDt3PWZhbHNlO0soKX1mdW5jdGlvbiBNKCl7SigpfWZ1bmN0aW9uIE4oKXtPKCk7cj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cj0wO0woKX0sJC52bW91c2UucmVzZXRUaW1lckR1cmF0aW9uKX1mdW5jdGlvbiBPKCl7aWYocil7Y2xlYXJUaW1lb3V0KHIpO3I9MH19ZnVuY3Rpb24gUChlLGIsail7dmFyIGs7aWYoKGomJmpbZV0pfHwoIWomJkkoYi50YXJnZXQsZSkpKXtrPUcoYixlKTskKGIudGFyZ2V0KS50cmlnZ2VyKGspfXJldHVybiBrfWZ1bmN0aW9uIFIoZSl7dmFyIHQ9JC5kYXRhKGUudGFyZ2V0LGMpO2lmKCF3JiYoIUR8fEQhPT10KSl7dmFyIGI9UCgidiIrZS50eXBlLGUpO2lmKGIpe2lmKGIuaXNEZWZhdWx0UHJldmVudGVkKCkpe2UucHJldmVudERlZmF1bHQoKX1pZihiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2Uuc3RvcFByb3BhZ2F0aW9uKCl9aWYoYi5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfX19fWZ1bmN0aW9uIFMoZSl7dmFyIGI9RihlKS50b3VjaGVzLGosaztpZihiJiZiLmxlbmd0aD09PTEpe2o9ZS50YXJnZXQ7az1IKGopO2lmKGsuaGFzVmlydHVhbEJpbmRpbmcpe0Q9QysrOyQuZGF0YShqLGMsRCk7TygpO00oKTtwPWZhbHNlO3ZhciB0PUYoZSkudG91Y2hlc1swXTtzPXQucGFnZVg7bj10LnBhZ2VZO1AoInZtb3VzZW92ZXIiLGUsayk7UCgidm1vdXNlZG93biIsZSxrKX19fWZ1bmN0aW9uIFQoZSl7aWYoeil7cmV0dXJufWlmKCFwKXtQKCJ2bW91c2VjYW5jZWwiLGUsSChlLnRhcmdldCkpfXA9dHJ1ZTtOKCl9ZnVuY3Rpb24gVShlKXtpZih6KXtyZXR1cm59dmFyIHQ9RihlKS50b3VjaGVzWzBdLGI9cCxqPSQudm1vdXNlLm1vdmVEaXN0YW5jZVRocmVzaG9sZCxrPUgoZS50YXJnZXQpO3A9cHx8KE1hdGguYWJzKHQucGFnZVgtcyk+anx8TWF0aC5hYnModC5wYWdlWS1uKT5qKTtpZihwJiYhYil7UCgidm1vdXNlY2FuY2VsIixlLGspfVAoInZtb3VzZW1vdmUiLGUsayk7TigpfWZ1bmN0aW9uIFYoZSl7aWYoeil7cmV0dXJufUsoKTt2YXIgYj1IKGUudGFyZ2V0KSx0O1AoInZtb3VzZXVwIixlLGIpO2lmKCFwKXt2YXIgaj1QKCJ2Y2xpY2siLGUsYik7aWYoaiYmJC5zdXBwb3J0LnRvdWNoKXt0PUYoZSkuY2hhbmdlZFRvdWNoZXNbMF07cS5wdXNoKHt0b3VjaElEOkQseDp0LmNsaWVudFgseTp0LmNsaWVudFksdGFyZ2V0OmUudGFyZ2V0fSk7dz10cnVlfX1QKCJ2bW91c2VvdXQiLGUsYik7cD1mYWxzZTtOKCl9ZnVuY3Rpb24gVyhlKXt2YXIgYj0kLmRhdGEoZSxhKSxrO2lmKGIpe2ZvcihrIGluIGIpe2lmKGJba10pe3JldHVybiB0cnVlfX19cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIFgoKXt9ZnVuY3Rpb24gWShlKXt2YXIgYj1lLnN1YnN0cigxKTtyZXR1cm57c2V0dXA6ZnVuY3Rpb24oaixrKXtpZighVyh0aGlzKSl7JC5kYXRhKHRoaXMsYSx7fSl9dmFyIG89JC5kYXRhKHRoaXMsYSk7b1tlXT10cnVlO2xbZV09KGxbZV18fDApKzE7aWYobFtlXT09PTEpe0IuYmluZChiLFIpfSQodGhpcykuYmluZChiLFgpO2lmKEEpe2xbInRvdWNoc3RhcnQiXT0obFsidG91Y2hzdGFydCJdfHwwKSsxO2lmKGxbInRvdWNoc3RhcnQiXT09PTEpe0IuYmluZCgidG91Y2hzdGFydCIsUykuYmluZCgidG91Y2hlbmQiLFYpLmJpbmQoInRvdWNobW92ZSIsVSl9fX0sdGVhcmRvd246ZnVuY3Rpb24oaixrKXstLWxbZV07aWYoIWxbZV0pe0IudW5iaW5kKGIsUil9aWYoQSl7LS1sWyJ0b3VjaHN0YXJ0Il07aWYoIWxbInRvdWNoc3RhcnQiXSl7Qi51bmJpbmQoInRvdWNoc3RhcnQiLFMpLnVuYmluZCgidG91Y2htb3ZlIixVKS51bmJpbmQoInRvdWNoZW5kIixWKS51bmJpbmQoInNjcm9sbCIsVCl9fXZhciBvPSQodGhpcyksdD0kLmRhdGEodGhpcyxhKTtpZih0KXt0W2VdPWZhbHNlfW8udW5iaW5kKGIsWCk7aWYoIVcodGhpcykpe28ucmVtb3ZlRGF0YShhKX19fX1mb3IodmFyIGk9MDtpPHYubGVuZ3RoO2krKyl7JC5ldmVudC5zcGVjaWFsW3ZbaV1dPVkodltpXSl9aWYoQSl7ZnVuY3Rpb24gWihlKXt2YXIgYj1xLmxlbmd0aCx0PWUudGFyZ2V0LHgseSxqLGksbyxrO2lmKGIpe3g9ZS5jbGllbnRYO3k9ZS5jbGllbnRZO0U9JC52bW91c2UuY2xpY2tEaXN0YW5jZVRocmVzaG9sZDtqPXQ7d2hpbGUoail7Zm9yKGk9MDtpPGI7aSsrKXtvPXFbaV07az0wO2lmKChqPT09dCYmTWF0aC5hYnMoby54LXgpPEUmJk1hdGguYWJzKG8ueS15KTxFKXx8JC5kYXRhKGosYyk9PT1vLnRvdWNoSUQpe2lmKCFlLmlzU3ludGhldGljKXtlLl9zYXB1aV9kZWxheWVkTW91c2VFdmVudD10cnVlfWlmKHQ9PT1vLnRhcmdldCl7cmV0dXJufWUucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpO3JldHVybn19aj1qLnBhcmVudE5vZGV9fX07Zi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLFosdHJ1ZSk7Zi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIixaLHRydWUpO2YuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLFosdHJ1ZSl9fSkoUSxkLGYpOyhmdW5jdGlvbigkLGQsdSl7dmFyIGE9JChmKTskLmVhY2goKCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCAiKyJ0YXAgdGFwaG9sZCAiKyJzd2lwZSBzd2lwZWxlZnQgc3dpcGVyaWdodCAiKyJzY3JvbGxzdGFydCBzY3JvbGxzdG9wIikuc3BsaXQoIiAiKSxmdW5jdGlvbihpLG4peyQuZm5bbl09ZnVuY3Rpb24oaCl7cmV0dXJuIGg/dGhpcy5iaW5kKG4saCk6dGhpcy50cmlnZ2VyKG4pfTtpZigkLmF0dHJGbil7JC5hdHRyRm5bbl09dHJ1ZX19KTt2YXIgcz0kLm1vYmlsZS5zdXBwb3J0LnRvdWNoLGI9InRvdWNobW92ZSBzY3JvbGwiLHQ9cz8idG91Y2hzdGFydCI6Im1vdXNlZG93biIsYz1zPyJ0b3VjaGVuZCB0b3VjaGNhbmNlbCI6Im1vdXNldXAiLGU9cz8idG91Y2htb3ZlIjoibW91c2Vtb3ZlIjtmdW5jdGlvbiBnKG8saCxpKXt2YXIgaj1pLnR5cGU7aS50eXBlPWg7JC5ldmVudC5kaXNwYXRjaC5jYWxsKG8saSk7aS50eXBlPWp9JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0PXtlbmFibGVkOnRydWUsc2V0dXA6ZnVuY3Rpb24oKXt2YXIgaD10aGlzLGk9JChoKSxqLGs7ZnVuY3Rpb24gbChtLG4pe2o9bjtnKGgsaj8ic2Nyb2xsc3RhcnQiOiJzY3JvbGxzdG9wIixtKX1pLmJpbmQoYixmdW5jdGlvbihtKXtpZighJC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQpe3JldHVybn1pZighail7bChtLHRydWUpfWNsZWFyVGltZW91dChrKTtrPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtsKG0sZmFsc2UpfSw1MCl9KX19OyQuZXZlbnQuc3BlY2lhbC50YXA9e3RhcGhvbGRUaHJlc2hvbGQ6NzUwLHNldHVwOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxpPSQoaCk7aS5iaW5kKCJ2bW91c2Vkb3duIixmdW5jdGlvbihqKXtpZihqLndoaWNoJiZqLndoaWNoIT09MSl7cmV0dXJuIGZhbHNlfXZhciBvPWoudGFyZ2V0LGs9ai5vcmlnaW5hbEV2ZW50LGw7ZnVuY3Rpb24gbSgpe2NsZWFyVGltZW91dChsKX1mdW5jdGlvbiBuKCl7bSgpO2kudW5iaW5kKCJ2Y2xpY2siLHApLnVuYmluZCgidm1vdXNldXAiLG0pO2EudW5iaW5kKCJ2bW91c2VjYW5jZWwiLG4pfWZ1bmN0aW9uIHAoail7bigpO2lmKG89PT1qLnRhcmdldCl7ZyhoLCJ0YXAiLGopfX1pLmJpbmQoInZtb3VzZXVwIixtKS5iaW5kKCJ2Y2xpY2siLHApO2EuYmluZCgidm1vdXNlY2FuY2VsIixuKTtsPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtnKGgsInRhcGhvbGQiLCQuRXZlbnQoInRhcGhvbGQiLHt0YXJnZXQ6b30pKX0sJC5ldmVudC5zcGVjaWFsLnRhcC50YXBob2xkVGhyZXNob2xkKX0pfX07JC5ldmVudC5zcGVjaWFsLnN3aXBlPXtzY3JvbGxTdXByZXNzaW9uVGhyZXNob2xkOjMwLGR1cmF0aW9uVGhyZXNob2xkOjEwMDAsaG9yaXpvbnRhbERpc3RhbmNlVGhyZXNob2xkOjMwLHZlcnRpY2FsRGlzdGFuY2VUaHJlc2hvbGQ6NzUsc3RhcnQ6ZnVuY3Rpb24oaCl7dmFyIGk9aC5vcmlnaW5hbEV2ZW50LnRvdWNoZXM/aC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF06aDtyZXR1cm57dGltZToobmV3IERhdGUoKSkuZ2V0VGltZSgpLGNvb3JkczpbaS5wYWdlWCxpLnBhZ2VZXSxvcmlnaW46JChoLnRhcmdldCl9fSxzdG9wOmZ1bmN0aW9uKGgpe3ZhciBpPWgub3JpZ2luYWxFdmVudC50b3VjaGVzP2gub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdOmg7cmV0dXJue3RpbWU6KG5ldyBEYXRlKCkpLmdldFRpbWUoKSxjb29yZHM6W2kucGFnZVgsaS5wYWdlWV19fSxoYW5kbGVTd2lwZTpmdW5jdGlvbihoLGkpe2lmKGkudGltZS1oLnRpbWU8JC5ldmVudC5zcGVjaWFsLnN3aXBlLmR1cmF0aW9uVGhyZXNob2xkJiZNYXRoLmFicyhoLmNvb3Jkc1swXS1pLmNvb3Jkc1swXSk+JC5ldmVudC5zcGVjaWFsLnN3aXBlLmhvcml6b250YWxEaXN0YW5jZVRocmVzaG9sZCYmTWF0aC5hYnMoaC5jb29yZHNbMV0taS5jb29yZHNbMV0pPCQuZXZlbnQuc3BlY2lhbC5zd2lwZS52ZXJ0aWNhbERpc3RhbmNlVGhyZXNob2xkKXtoLm9yaWdpbi50cmlnZ2VyKCJzd2lwZSIpLnRyaWdnZXIoaC5jb29yZHNbMF0+aS5jb29yZHNbMF0/InN3aXBlbGVmdCI6InN3aXBlcmlnaHQiKX19LHNldHVwOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxpPSQoaCk7aS5iaW5kKHQsZnVuY3Rpb24oail7aWYoai5pc01hcmtlZCgic3dpcGVzdGFydEhhbmRsZWQiKSl7cmV0dXJufWouc2V0TWFya2VkKCJzd2lwZXN0YXJ0SGFuZGxlZCIpO3ZhciBrPSQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zdGFydChqKSxsO2Z1bmN0aW9uIG0oail7aWYoIWspe3JldHVybn1sPSQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zdG9wKGopO2lmKCFzYXAudWkuRGV2aWNlLnN5c3RlbS5kZXNrdG9wfHxzYXAudWkuRGV2aWNlLmJyb3dzZXIubmFtZSE9PSJjciIpe2lmKE1hdGguYWJzKGsuY29vcmRzWzBdLWwuY29vcmRzWzBdKT4kLmV2ZW50LnNwZWNpYWwuc3dpcGUuc2Nyb2xsU3VwcmVzc2lvblRocmVzaG9sZCl7ai5wcmV2ZW50RGVmYXVsdCgpfX19ZnVuY3Rpb24gbihqKXtpLnVuYmluZChlLG0pLnVuYmluZChjLG4pO2lmKGsmJmwpeyQuZXZlbnQuc3BlY2lhbC5zd2lwZS5oYW5kbGVTd2lwZShrLGwpfWs9bD11fWkuYmluZChlLG0pLmJpbmQoYyxuKX0pfX07JC5lYWNoKHtzY3JvbGxzdG9wOiJzY3JvbGxzdGFydCIsdGFwaG9sZDoidGFwIixzd2lwZWxlZnQ6InN3aXBlIixzd2lwZXJpZ2h0OiJzd2lwZSJ9LGZ1bmN0aW9uKGgsaSl7JC5ldmVudC5zcGVjaWFsW2hdPXtzZXR1cDpmdW5jdGlvbigpeyQodGhpcykuYmluZChpLCQubm9vcCl9fX0pfSkoUSx0aGlzKX0pKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC11aS1jb3JlLWFsbCcpO2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLkRldmljZScpO2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLnRoaXJkcGFydHkuU2Vjb25kTGV2ZWxEb21haW5zJyk7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkudGhpcmRwYXJ0eS5VUkknKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS50aGlyZHBhcnR5LmpxdWVyeS5qcXVlcnktMS4xMS4xJyk7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnl1aS5qcXVlcnktdWktY29yZScpO2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLnRoaXJkcGFydHkuanF1ZXJ5dWkuanF1ZXJ5LXVpLWRhdGVwaWNrZXInKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS50aGlyZHBhcnR5LmpxdWVyeXVpLmpxdWVyeS11aS1wb3NpdGlvbicpO2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5nbG9iYWwnKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS50aGlyZHBhcnR5LmpxdWVyeS1tb2JpbGUtY3VzdG9tJyk7aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5rZXljb2RlcycpKXsKLyohCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KalF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLmtleWNvZGVzJyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5rZXljb2RlcyIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjtxLnNhcC5LZXlDb2Rlcz17QkFDS1NQQUNFOjgsVEFCOjksRU5URVI6MTMsU0hJRlQ6MTYsQ09OVFJPTDoxNyxBTFQ6MTgsQlJFQUs6MTksQ0FQU19MT0NLOjIwLEVTQ0FQRToyNyxTUEFDRTozMixQQUdFX1VQOjMzLFBBR0VfRE9XTjozNCxFTkQ6MzUsSE9NRTozNixBUlJPV19MRUZUOjM3LEFSUk9XX1VQOjM4LEFSUk9XX1JJR0hUOjM5LEFSUk9XX0RPV046NDAsUFJJTlQ6NDQsSU5TRVJUOjQ1LERFTEVURTo0NixESUdJVF8wOjQ4LERJR0lUXzE6NDksRElHSVRfMjo1MCxESUdJVF8zOjUxLERJR0lUXzQ6NTIsRElHSVRfNTo1MyxESUdJVF82OjU0LERJR0lUXzc6NTUsRElHSVRfODo1NixESUdJVF85OjU3LEE6NjUsQjo2NixDOjY3LEQ6NjgsRTo2OSxGOjcwLEc6NzEsSDo3MixJOjczLEo6NzQsSzo3NSxMOjc2LE06NzcsTjo3OCxPOjc5LFA6ODAsUTo4MSxSOjgyLFM6ODMsVDo4NCxVOjg1LFY6ODYsVzo4NyxYOjg4LFk6ODksWjo5MCxXSU5ET1dTOjkxLENPTlRFWFRfTUVOVTo5MyxUVVJOX09GRjo5NCxTTEVFUDo5NSxOVU1QQURfMDo5NixOVU1QQURfMTo5NyxOVU1QQURfMjo5OCxOVU1QQURfMzo5OSxOVU1QQURfNDoxMDAsTlVNUEFEXzU6MTAxLE5VTVBBRF82OjEwMixOVU1QQURfNzoxMDMsTlVNUEFEXzg6MTA0LE5VTVBBRF85OjEwNSxOVU1QQURfQVNURVJJU0s6MTA2LE5VTVBBRF9QTFVTOjEwNyxOVU1QQURfTUlOVVM6MTA5LE5VTVBBRF9DT01NQToxMTAsTlVNUEFEX1NMQVNIOjExMSxGMToxMTIsRjI6MTEzLEYzOjExNCxGNDoxMTUsRjU6MTE2LEY2OjExNyxGNzoxMTgsRjg6MTE5LEY5OjEyMCxGMTA6MTIxLEYxMToxMjIsRjEyOjEyMyxOVU1fTE9DSzoxNDQsU0NST0xMX0xPQ0s6MTQ1LE9QRU5fQlJBQ0tFVDoxODYsUExVUzoxODcsQ09NTUE6MTg4LFNMQVNIOjE4OSxET1Q6MTkwLFBJUEU6MTkxLFNFTUlDT0xPTjoxOTIsTUlOVVM6MjE5LEdSRUFUX0FDQ0VOVDoyMjAsRVFVQUxTOjIyMSxTSU5HTEVfUVVPVEU6MjIyLEJBQ0tTTEFTSDoyMjZ9O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAubG9nZ2VyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgianF1ZXJ5LnNhcC5sb2dnZXIiLGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5zY3JpcHQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLnNjcmlwdCcpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuc2NyaXB0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBJPTA7cS5zYXAudWlkPWZ1bmN0aW9uIHVpZCgpe3JldHVybiJpZC0iK25ldyBEYXRlKCkudmFsdWVPZigpKyItIitJKyt9O3Euc2FwLmRlbGF5ZWRDYWxsPWZ1bmN0aW9uIGRlbGF5ZWRDYWxsKGQsbyxtLHApe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYocS50eXBlKG0pPT0ic3RyaW5nIil7bT1vW21dfW0uYXBwbHkobyxwfHxbXSl9LGQpfTtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsPWZ1bmN0aW9uIGNsZWFyRGVsYXllZENhbGwoZCl7Y2xlYXJUaW1lb3V0KGQpO3JldHVybiB0aGlzfTtxLnNhcC5pbnRlcnZhbENhbGw9ZnVuY3Rpb24gaW50ZXJ2YWxDYWxsKGksbyxtLHApe3JldHVybiBzZXRJbnRlcnZhbChmdW5jdGlvbigpe2lmKHEudHlwZShtKT09InN0cmluZyIpe209b1ttXX1tLmFwcGx5KG8scHx8W10pfSxpKX07cS5zYXAuY2xlYXJJbnRlcnZhbENhbGw9ZnVuY3Rpb24gY2xlYXJJbnRlcnZhbENhbGwoaSl7Y2xlYXJJbnRlcnZhbChpKTtyZXR1cm4gdGhpc307dmFyIFU9ZnVuY3Rpb24odSl7dGhpcy5tUGFyYW1zPXt9O3ZhciBRPXV8fHdpbmRvdy5sb2NhdGlvbi5ocmVmO2lmKFEuaW5kZXhPZignIycpPj0wKXtRPVEuc2xpY2UoMCxRLmluZGV4T2YoJyMnKSl9aWYoUS5pbmRleE9mKCI/Iik+PTApe1E9US5zbGljZShRLmluZGV4T2YoIj8iKSsxKTt2YXIgcD1RLnNwbGl0KCImIiksUD17fSxhLG4sdjtmb3IodmFyIGk9MDtpPHAubGVuZ3RoO2krKyl7YT1wW2ldLnNwbGl0KCI9Iik7bj1kZWNvZGVVUklDb21wb25lbnQoYVswXSk7dj1hLmxlbmd0aD4xP2RlY29kZVVSSUNvbXBvbmVudChhWzFdLnJlcGxhY2UoL1wrL2csJyAnKSk6IiI7aWYobil7aWYoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChQLG4pKXtQW25dPVtdfVBbbl0ucHVzaCh2KX19dGhpcy5tUGFyYW1zPVB9fTtVLnByb3RvdHlwZT17fTtVLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24obixhKXt2YXIgdj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5tUGFyYW1zLG4pP3RoaXMubVBhcmFtc1tuXTpbXTtyZXR1cm4gYT09PXRydWU/djoodlswXXx8bnVsbCl9O3Euc2FwLmdldFVyaVBhcmFtZXRlcnM9ZnVuY3Rpb24gZ2V0VXJpUGFyYW1ldGVycyh1KXtyZXR1cm4gbmV3IFUodSl9O3Euc2FwLnVuaXF1ZT1mdW5jdGlvbihhKXt2YXIgbD1hLmxlbmd0aDtpZihsPjEpe2Euc29ydCgpO2Zvcih2YXIgaT0xLGo9MDtpPGw7aSsrKXtpZihhW2ldIT09YVtqXSl7YVsrK2pdPWFbaV19fWlmKCsrajxsKXthLnNwbGljZShqLGwtail9fXJldHVybiBhfTtxLnNhcC5lcXVhbD1mdW5jdGlvbihhLGIsbSxjLGQpe2lmKHR5cGVvZiBtPT0iYm9vbGVhbiIpe2M9bTttPXVuZGVmaW5lZH1pZighZClkPTA7aWYoIW0pbT0xMDtpZihkPm0pcmV0dXJuIGZhbHNlO2lmKGE9PT1iKXJldHVybiB0cnVlO2lmKHEuaXNBcnJheShhKSYmcS5pc0FycmF5KGIpKXtpZighYyl7aWYoYS5sZW5ndGghPWIubGVuZ3RoKXtyZXR1cm4gZmFsc2V9fWVsc2V7aWYoYS5sZW5ndGg+Yi5sZW5ndGgpe3JldHVybiBmYWxzZX19Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDtpKyspe2lmKCFxLnNhcC5lcXVhbChhW2ldLGJbaV0sbSxjLGQrMSkpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9aWYodHlwZW9mIGE9PSJvYmplY3QiJiZ0eXBlb2YgYj09Im9iamVjdCIpe2lmKCFhfHwhYil7cmV0dXJuIGZhbHNlfWlmKGEuY29uc3RydWN0b3IhPWIuY29uc3RydWN0b3Ipe3JldHVybiBmYWxzZX1pZihhLm5vZGVOYW1lJiZiLm5vZGVOYW1lJiZhLm5hbWVzcGFjZVVSSSYmYi5uYW1lc3BhY2VVUkkpe3JldHVybiBxLnNhcC5pc0VxdWFsTm9kZShhLGIpfWlmKGEgaW5zdGFuY2VvZiBEYXRlKXtyZXR1cm4gYS52YWx1ZU9mKCk9PWIudmFsdWVPZigpfWZvcih2YXIgaSBpbiBhKXtpZighcS5zYXAuZXF1YWwoYVtpXSxiW2ldLG0sYyxkKzEpKXtyZXR1cm4gZmFsc2V9fWlmKCFjKXtmb3IodmFyIGkgaW4gYil7aWYoYVtpXT09PXVuZGVmaW5lZCl7cmV0dXJuIGZhbHNlfX19cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfTtxLnNhcC5lYWNoPWZ1bmN0aW9uKG8sYyl7dmFyIGE9cS5pc0FycmF5KG8pLGwsaTtpZihhKXtmb3IoaT0wLGw9by5sZW5ndGg7aTxsO2krKyl7aWYoYy5jYWxsKG9baV0saSxvW2ldKT09PWZhbHNlKXticmVha319fWVsc2V7Zm9yKGkgaW4gbyl7aWYoYy5jYWxsKG9baV0saSxvW2ldKT09PWZhbHNlKXticmVha319fXJldHVybiBvfTtxLnNhcC5mb3JJbj17dG9TdHJpbmc6bnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoInRvU3RyaW5nIik/ZnVuY3Rpb24obyxjKXtmb3IodmFyIG4gaW4gbyl7aWYoYyhuLG9bbl0pPT09ZmFsc2Upe3JldHVybn19fTooZnVuY3Rpb24oKXt2YXIgRD1bInRvU3RyaW5nIiwidmFsdWVPZiIsInRvTG9jYWxlU3RyaW5nIiwiaGFzT3duUHJvcGVydHkiLCJpc1Byb3RvdHlwZU9mIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJjb25zdHJ1Y3RvciJdLGE9RC5sZW5ndGgsbz1PYmplY3QucHJvdG90eXBlLGg9by5oYXNPd25Qcm9wZXJ0eTtyZXR1cm4gZnVuY3Rpb24oTyxjKXt2YXIgbixpO2ZvcihuIGluIE8pe2lmKGMobixPW25dKT09PWZhbHNlKXtyZXR1cm59fWZvcih2YXIgaT0wO2k8YTtpKyspe249RFtpXTtpZihoLmNhbGwoTyxuKXx8T1tuXSE9PW9bbl0pe2lmKGMobixPW25dKT09PWZhbHNlKXtyZXR1cm59fX19fSgpKTtxLnNhcC5hcnJheURpZmY9ZnVuY3Rpb24obyxuLGMpe2M9Y3x8ZnVuY3Rpb24odixWKXtyZXR1cm4gcS5zYXAuZXF1YWwodixWKX07dmFyIE89W107dmFyIE49W107dmFyIG09W107Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe3ZhciBhPW5baV07dmFyIGY9MDt2YXIgdDtmb3IodmFyIGo9MDtqPG8ubGVuZ3RoO2orKyl7aWYoYyhvW2pdLGEpKXtmKys7dD1qO2lmKGY+MSl7YnJlYWt9fX1pZihmPT0xKXt2YXIgTT17b2xkSW5kZXg6dCxuZXdJbmRleDppfTtpZihtW3RdKXtkZWxldGUgT1t0XTtkZWxldGUgTlttW3RdLm5ld0luZGV4XX1lbHNle05baV09e2RhdGE6bltpXSxyb3c6dH07T1t0XT17ZGF0YTpvW3RdLHJvdzppfTttW3RdPU19fX1mb3IodmFyIGk9MDtpPG4ubGVuZ3RoLTE7aSsrKXtpZihOW2ldJiYhTltpKzFdJiZOW2ldLnJvdysxPG8ubGVuZ3RoJiYhT1tOW2ldLnJvdysxXSYmYyhvW05baV0ucm93KzFdLG5baSsxXSkpe05baSsxXT17ZGF0YTpuW2krMV0scm93Ok5baV0ucm93KzF9O09bTltpXS5yb3crMV09e2RhdGE6T1tOW2ldLnJvdysxXSxyb3c6aSsxfX19Zm9yKHZhciBpPW4ubGVuZ3RoLTE7aT4wO2ktLSl7aWYoTltpXSYmIU5baS0xXSYmTltpXS5yb3c+MCYmIU9bTltpXS5yb3ctMV0mJmMob1tOW2ldLnJvdy0xXSxuW2ktMV0pKXtOW2ktMV09e2RhdGE6bltpLTFdLHJvdzpOW2ldLnJvdy0xfTtPW05baV0ucm93LTFdPXtkYXRhOk9bTltpXS5yb3ctMV0scm93OmktMX19fXZhciBkPVtdO2lmKG4ubGVuZ3RoPT0wKXtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7ZC5wdXNoKHtpbmRleDowLHR5cGU6J2RlbGV0ZSd9KX19ZWxzZXt2YXIgYj0wO2lmKCFPWzBdKXtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoJiYhT1tpXTtpKyspe2QucHVzaCh7aW5kZXg6MCx0eXBlOidkZWxldGUnfSk7Yj1pKzF9fWZvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXtpZighTltpXXx8TltpXS5yb3c+Yil7ZC5wdXNoKHtpbmRleDppLHR5cGU6J2luc2VydCd9KX1lbHNle2I9TltpXS5yb3crMTtmb3IodmFyIGo9TltpXS5yb3crMTtqPG8ubGVuZ3RoJiYoIU9bal18fE9bal0ucm93PGkpO2orKyl7ZC5wdXNoKHtpbmRleDppKzEsdHlwZTonZGVsZXRlJ30pO2I9aisxfX19fXJldHVybiBkfTtxLnNhcC5wYXJzZUpTPShmdW5jdGlvbigpe3ZhciBhLGIsZT17JyInOiciJywnXCcnOidcJycsJ1xcJzonXFwnLCcvJzonLycsYjonXGInLGY6J1xmJyxuOidcbicscjonXHInLHQ6J1x0J30sdCxkPWZ1bmN0aW9uKG0pe3Rocm93e25hbWU6J1N5bnRheEVycm9yJyxtZXNzYWdlOm0sYXQ6YSx0ZXh0OnR9fSxuPWZ1bmN0aW9uKGMpe2lmKGMmJmMhPT1iKXtkKCJFeHBlY3RlZCAnIitjKyInIGluc3RlYWQgb2YgJyIrYisiJyIpfWI9dC5jaGFyQXQoYSk7YSs9MTtyZXR1cm4gYn0sZj1mdW5jdGlvbigpe3ZhciBmLHM9Jyc7aWYoYj09PSctJyl7cz0nLSc7bignLScpfXdoaWxlKGI+PScwJyYmYjw9JzknKXtzKz1iO24oKX1pZihiPT09Jy4nKXtzKz0nLic7d2hpbGUobigpJiZiPj0nMCcmJmI8PSc5Jyl7cys9Yn19aWYoYj09PSdlJ3x8Yj09PSdFJyl7cys9YjtuKCk7aWYoYj09PSctJ3x8Yj09PScrJyl7cys9YjtuKCl9d2hpbGUoYj49JzAnJiZiPD0nOScpe3MrPWI7bigpfX1mPStzO2lmKCFpc0Zpbml0ZShmKSl7ZCgiQmFkIG51bWJlciIpfWVsc2V7cmV0dXJuIGZ9fSxzPWZ1bmN0aW9uKCl7dmFyIGMsaSxzPScnLGssdTtpZihiPT09JyInfHxiPT09J1wnJyl7az1iO3doaWxlKG4oKSl7aWYoYj09PWspe24oKTtyZXR1cm4gc31pZihiPT09J1xcJyl7bigpO2lmKGI9PT0ndScpe3U9MDtmb3IoaT0wO2k8NDtpKz0xKXtjPXBhcnNlSW50KG4oKSwxNik7aWYoIWlzRmluaXRlKGMpKXticmVha311PXUqMTYrY31zKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHUpfWVsc2UgaWYodHlwZW9mIGVbYl09PT0nc3RyaW5nJyl7cys9ZVtiXX1lbHNle2JyZWFrfX1lbHNle3MrPWJ9fX1kKCJCYWQgc3RyaW5nIil9LGc9ZnVuY3Rpb24oKXt2YXIgZz0nJyxjLGk9ZnVuY3Rpb24oYil7cmV0dXJuIGI9PT0iXyJ8fChiPj0iMCImJmI8PSI5Iil8fChiPj0iYSImJmI8PSJ6Iil8fChiPj0iQSImJmI8PSJaIil9O2lmKGkoYikpe2crPWJ9ZWxzZXtkKCJCYWQgbmFtZSIpfXdoaWxlKG4oKSl7aWYoYj09PScgJyl7bigpO3JldHVybiBnfWlmKGI9PT0nOicpe3JldHVybiBnfWlmKGkoYikpe2crPWJ9ZWxzZXtkKCJCYWQgbmFtZSIpfX1kKCJCYWQgbmFtZSIpfSx3PWZ1bmN0aW9uKCl7d2hpbGUoYiYmYjw9JyAnKXtuKCl9fSxoPWZ1bmN0aW9uKCl7c3dpdGNoKGIpe2Nhc2UndCc6bigndCcpO24oJ3InKTtuKCd1Jyk7bignZScpO3JldHVybiB0cnVlO2Nhc2UnZic6bignZicpO24oJ2EnKTtuKCdsJyk7bigncycpO24oJ2UnKTtyZXR1cm4gZmFsc2U7Y2FzZSduJzpuKCduJyk7bigndScpO24oJ2wnKTtuKCdsJyk7cmV0dXJuIG51bGx9ZCgiVW5leHBlY3RlZCAnIitiKyInIil9LHYsaj1mdW5jdGlvbigpe3ZhciBqPVtdO2lmKGI9PT0nWycpe24oJ1snKTt3KCk7aWYoYj09PSddJyl7bignXScpO3JldHVybiBqfXdoaWxlKGIpe2oucHVzaCh2KCkpO3coKTtpZihiPT09J10nKXtuKCddJyk7cmV0dXJuIGp9bignLCcpO3coKX19ZCgiQmFkIGFycmF5Iil9LG89ZnVuY3Rpb24oKXt2YXIgayxvPXt9O2lmKGI9PT0neycpe24oJ3snKTt3KCk7aWYoYj09PSd9Jyl7bignfScpO3JldHVybiBvfXdoaWxlKGIpe2lmKGI+PSIwIiYmYjw9IjkiKXtrPWYoKX1lbHNlIGlmKGI9PT0nIid8fGI9PT0nXCcnKXtrPXMoKX1lbHNle2s9ZygpfXcoKTtuKCc6Jyk7aWYoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobyxrKSl7ZCgnRHVwbGljYXRlIGtleSAiJytrKyciJyl9b1trXT12KCk7dygpO2lmKGI9PT0nfScpe24oJ30nKTtyZXR1cm4gb31uKCcsJyk7dygpfX1kKCJCYWQgb2JqZWN0Iil9O3Y9ZnVuY3Rpb24oKXt3KCk7c3dpdGNoKGIpe2Nhc2Uneyc6cmV0dXJuIG8oKTtjYXNlJ1snOnJldHVybiBqKCk7Y2FzZSciJzpjYXNlJ1wnJzpyZXR1cm4gcygpO2Nhc2UnLSc6cmV0dXJuIGYoKTtkZWZhdWx0OnJldHVybiBiPj0nMCcmJmI8PSc5Jz9mKCk6aCgpfX07cmV0dXJuIGZ1bmN0aW9uKGMsaSl7dmFyIHI7dD1jO2E9aXx8MDtiPScgJztyPXYoKTtpZihpc05hTihpKSl7dygpO2lmKGIpe2QoIlN5bnRheCBlcnJvciIpfXJldHVybiByfWVsc2V7cmV0dXJue3Jlc3VsdDpyLGF0OmEtMX19fX0oKSk7cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5zamF4Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5zamF4Jyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5zamF4IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3Euc2FwLnNqYXhTZXR0aW5ncz17Y29tcGxleFJlc3VsdDp0cnVlLGZhbGxiYWNrOnVuZGVmaW5lZH07cS5zYXAuc2pheD1mdW5jdGlvbiBzamF4KG8pe3ZhciBzPXEuZXh0ZW5kKHRydWUse30scS5zYXAuc2pheFNldHRpbmdzLG8se2FzeW5jOmZhbHNlLHN1Y2Nlc3M6ZnVuY3Rpb24oZCx0LHgpe3I9e3N1Y2Nlc3M6dHJ1ZSxkYXRhOmQsc3RhdHVzOnQsc3RhdHVzQ29kZTp4JiZ4LnN0YXR1c319LGVycm9yOmZ1bmN0aW9uKHgsdCxlKXtyPXtzdWNjZXNzOmZhbHNlLGRhdGE6dW5kZWZpbmVkLHN0YXR1czp0LGVycm9yOmUsc3RhdHVzQ29kZTp4LnN0YXR1c319fSk7dmFyIHI9dW5kZWZpbmVkO3EuYWpheChzKTtpZighcy5jb21wbGV4UmVzdWx0KXtyZXR1cm4gci5zdWNjZXNzP3IuZGF0YTpzLmZhbGxiYWNrfXJldHVybiByfTtxLnNhcC5zeW5jSGVhZD1mdW5jdGlvbih1KXtyZXR1cm4gcS5zYXAuc2pheCh7dHlwZTonSEVBRCcsdXJsOnV9KS5zdWNjZXNzfTtxLnNhcC5zeW5jR2V0PWZ1bmN0aW9uIHN5bmNHZXQodSxkLEQpe3JldHVybiBxLnNhcC5zamF4KHt1cmw6dSxkYXRhOmQsdHlwZTonR0VUJyxkYXRhVHlwZTpEfHwndGV4dCd9KX07cS5zYXAuc3luY1Bvc3Q9ZnVuY3Rpb24gc3luY1Bvc3QodSxkLEQpe3JldHVybiBxLnNhcC5zamF4KHt1cmw6dSxkYXRhOmQsdHlwZTonUE9TVCcsZGF0YVR5cGU6RHx8J3RleHQnfSl9O3Euc2FwLnN5bmNHZXRUZXh0PWZ1bmN0aW9uIHN5bmNHZXRUZXh0KHUsZCxmKXtyZXR1cm4gcS5zYXAuc2pheCh7dXJsOnUsZGF0YTpkLHR5cGU6J0dFVCcsZGF0YVR5cGU6J3RleHQnLGZhbGxiYWNrOmYsY29tcGxleFJlc3VsdDooYXJndW1lbnRzLmxlbmd0aDwzKX0pfTtxLnNhcC5zeW5jR2V0SlNPTj1mdW5jdGlvbiBzeW5jR2V0SlNPTih1LGQsZil7cmV0dXJuIHEuc2FwLnNqYXgoe3VybDp1LGRhdGE6ZHx8bnVsbCx0eXBlOidHRVQnLGRhdGFUeXBlOidqc29uJyxmYWxsYmFjazpmLGNvbXBsZXhSZXN1bHQ6KGFyZ3VtZW50cy5sZW5ndGg8Myl9KX07cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5zdG9yYWdlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5zdG9yYWdlJyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5zdG9yYWdlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBzPSEhKHdpbmRvdy5KU09OJiZKU09OLnBhcnNlJiZKU09OLnN0cmluZ2lmeSk7dmFyIFM9InN0YXRlLmtleV8iO3ZhciBmPWZ1bmN0aW9uKGEsYil7dmFyIHQ9InVua25vd24iO3ZhciBQPWJ8fFM7UCs9Ii0iO3ZhciBvO2lmKCFvfHx0eXBlb2YoYSk9PT0ic3RyaW5nIil7dD1hfHwic2Vzc2lvbiI7dHJ5e289d2luZG93W3QrIlN0b3JhZ2UiXX1jYXRjaChlKXtvPW51bGx9fWVsc2UgaWYodHlwZW9mKGEpPT09T2JqZWN0KXt0PWEuZ2V0VHlwZT9hLmdldFR5cGUoKToidW5rbm93biI7bz1hfXZhciBjPSEhbzt0aGlzLnB1dD1mdW5jdGlvbihpLGQpe2lmKGMmJmkpe3RyeXtvLnNldEl0ZW0oUCtpLHM/SlNPTi5zdHJpbmdpZnkoZCk6ZCk7cmV0dXJuIHRydWV9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMuZ2V0PWZ1bmN0aW9uKGkpe2lmKGMmJmkpe3RyeXt2YXIgST1vLmdldEl0ZW0oUCtpKTtyZXR1cm4gcz9KU09OLnBhcnNlKEkpOkl9Y2F0Y2goZSl7cmV0dXJuIG51bGx9fWVsc2V7cmV0dXJuIG51bGx9fTt0aGlzLnJlbW92ZT1mdW5jdGlvbihpKXtpZihjJiZpKXt0cnl7by5yZW1vdmVJdGVtKFAraSk7cmV0dXJuIHRydWV9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMucmVtb3ZlQWxsPWZ1bmN0aW9uKEkpe2lmKGMmJm8ubGVuZ3RoJiZ0eXBlb2Yoby5rZXkpPT09ImZ1bmN0aW9uIil7dHJ5e3ZhciBsPW8ubGVuZ3RoO3ZhciBrPVtdO3ZhciBkLGk7dmFyIHA9UCsoSXx8IiIpO2ZvcihpPTA7aTxsO2krKyl7ZD1vLmtleShpKTtpZihkJiZkLmluZGV4T2YocCk9PTApe2sucHVzaChkKX19Zm9yKGk9MDtpPGsubGVuZ3RoO2krKyl7by5yZW1vdmVJdGVtKGtbaV0pfXJldHVybiB0cnVlfWNhdGNoKGUpe3JldHVybiBmYWxzZX19ZWxzZXtyZXR1cm4gZmFsc2V9fTt0aGlzLmNsZWFyPWZ1bmN0aW9uKCl7aWYoYyl7dHJ5e28uY2xlYXIoKTtyZXR1cm4gdHJ1ZX1jYXRjaChlKXtyZXR1cm4gZmFsc2V9fWVsc2V7cmV0dXJuIGZhbHNlfX07dGhpcy5nZXRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHR9fTt2YXIgbT17fTtxLnNhcC5zdG9yYWdlPWZ1bmN0aW9uKG8saSl7aWYoIW8pe289cS5zYXAuc3RvcmFnZS5UeXBlLnNlc3Npb259aWYodHlwZW9mKG8pPT09InN0cmluZyImJnEuc2FwLnN0b3JhZ2UuVHlwZVtvXSl7dmFyIGs9bztpZihpJiZpIT1TKXtrPW8rIl8iK2l9cmV0dXJuIG1ba118fChtW2tdPW5ldyBmKG8saSkpfXJldHVybiBuZXcgZihvLGkpfTtxLnNhcC5zdG9yYWdlLlR5cGU9e2xvY2FsOiJsb2NhbCIsc2Vzc2lvbjoic2Vzc2lvbiIsZ2xvYmFsOiJnbG9iYWwifTtmLmFwcGx5KHEuc2FwLnN0b3JhZ2UpO21bcS5zYXAuc3RvcmFnZS5UeXBlLnNlc3Npb25dPXEuc2FwLnN0b3JhZ2U7cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5zdHJpbmdzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5zdHJpbmdzJyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5zdHJpbmdzIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3Euc2FwLmVuZHNXaXRoPWZ1bmN0aW9uIGVuZHNXaXRoKHMsZSl7aWYodHlwZW9mKGUpIT0ic3RyaW5nInx8ZT09IiIpe3JldHVybiBmYWxzZX12YXIgcD1zLmxhc3RJbmRleE9mKGUpO3JldHVybiBwPj0wJiZwPT1zLmxlbmd0aC1lLmxlbmd0aH07cS5zYXAuZW5kc1dpdGhJZ25vcmVDYXNlPWZ1bmN0aW9uIGVuZHNXaXRoSWdub3JlQ2FzZShzLGUpe2lmKHR5cGVvZihlKSE9InN0cmluZyJ8fGU9PSIiKXtyZXR1cm4gZmFsc2V9cz1zLnRvVXBwZXJDYXNlKCk7ZT1lLnRvVXBwZXJDYXNlKCk7cmV0dXJuIHEuc2FwLmVuZHNXaXRoKHMsZSl9O3Euc2FwLnN0YXJ0c1dpdGg9ZnVuY3Rpb24gc3RhcnRzV2l0aChzLFMpe2lmKHR5cGVvZihTKSE9InN0cmluZyJ8fFM9PSIiKXtyZXR1cm4gZmFsc2V9aWYocz09Uyl7cmV0dXJuIHRydWV9cmV0dXJuIHMuaW5kZXhPZihTKT09MH07cS5zYXAuc3RhcnRzV2l0aElnbm9yZUNhc2U9ZnVuY3Rpb24gc3RhcnRzV2l0aElnbm9yZUNhc2UocyxTKXtpZih0eXBlb2YoUykhPSJzdHJpbmcifHxTPT0iIil7cmV0dXJuIGZhbHNlfXM9cy50b1VwcGVyQ2FzZSgpO1M9Uy50b1VwcGVyQ2FzZSgpO3JldHVybiBxLnNhcC5zdGFydHNXaXRoKHMsUyl9O3Euc2FwLmNoYXJUb1VwcGVyQ2FzZT1mdW5jdGlvbiBjaGFyVG9VcHBlckNhc2UocyxwKXtpZighcyl7cmV0dXJuIHN9aWYoIXB8fGlzTmFOKHApfHxwPD0wfHxwPj1zLmxlbmd0aCl7cD0wfXZhciBDPXMuY2hhckF0KHApLnRvVXBwZXJDYXNlKCk7aWYocD4wKXtyZXR1cm4gcy5zdWJzdHJpbmcoMCxwKStDK3Muc3Vic3RyaW5nKHArMSl9cmV0dXJuIEMrcy5zdWJzdHJpbmcocCsxKX07cS5zYXAucGFkTGVmdD1mdW5jdGlvbiBwYWRMZWZ0KHMscCxsKXtpZighcyl7cz0iIn13aGlsZShzLmxlbmd0aDxsKXtzPXArc31yZXR1cm4gc307cS5zYXAucGFkUmlnaHQ9ZnVuY3Rpb24gcGFkUmlnaHQocyxwLGwpe2lmKCFzKXtzPSIifXdoaWxlKHMubGVuZ3RoPGwpe3M9cytwfXJldHVybiBzfTt2YXIgcj0vLSguKS9pZztxLnNhcC5jYW1lbENhc2U9ZnVuY3Rpb24gY2FtZWxDYXNlKHMpe3JldHVybiBzLnJlcGxhY2UocixmdW5jdGlvbihtLEMpe3JldHVybiBDLnRvVXBwZXJDYXNlKCl9KX07dmFyIGE9LyhbQS1aXSkvZztxLnNhcC5oeXBoZW49ZnVuY3Rpb24gaHlwaGVuKHMpe3JldHVybiBzLnJlcGxhY2UoYSxmdW5jdGlvbihtLEMpe3JldHVybiItIitDLnRvTG93ZXJDYXNlKCl9KX07dmFyIGI9L1stW1xde30oKSorPy4sXFxeJHwjXHNdL2c7cS5zYXAuZXNjYXBlUmVnRXhwPWZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzKXtyZXR1cm4gcy5yZXBsYWNlKGIsIlxcJCYiKX07cS5zYXAuZm9ybWF0TWVzc2FnZT1mdW5jdGlvbiBmb3JtYXRNZXNzYWdlKHAsdil7aWYoYXJndW1lbnRzLmxlbmd0aD4yfHwodiE9bnVsbCYmIXEuaXNBcnJheSh2KSkpe3Y9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpfXY9dnx8W107cmV0dXJuIHAucmVwbGFjZShjLGZ1bmN0aW9uKCQsZCxlLGYsbyl7aWYoZCl7cmV0dXJuIicifWVsc2UgaWYoZSl7cmV0dXJuIGUucmVwbGFjZSgvJycvZywiJyIpfWVsc2UgaWYoZil7cmV0dXJuIFN0cmluZyh2W3BhcnNlSW50KGYsMTApXSl9dGhyb3cgbmV3IEVycm9yKCJmb3JtYXRNZXNzYWdlOiBwYXR0ZXJuIHN5bnRheCBlcnJvciBhdCBwb3MuICIrbyl9KX07dmFyIGM9LygnJyl8JyhbXiddKyg/OicnW14nXSopKikoPzonfCQpfFx7KFswLTldKyg/OlxzKixbXnt9XSopPylcfXxbe31dL2c7cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC54bWwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLnhtbCcpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAueG1sIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZSddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiO3Euc2FwLnBhcnNlWE1MPWZ1bmN0aW9uIHBhcnNlWE1MKHgpe3ZhciBYO2lmKHdpbmRvdy5ET01QYXJzZXIpe3ZhciBwPW5ldyBET01QYXJzZXIoKTt0cnl7WD1wLnBhcnNlRnJvbVN0cmluZyh4LCJ0ZXh0L3htbCIpfWNhdGNoKGUpe3ZhciBQPXEuc2FwLmdldFBhcnNlRXJyb3IoWCk7WD17fTtQLnJlYXNvbj1lLm1lc3NhZ2U7WC5wYXJzZUVycm9yPVA7cmV0dXJuIFh9fWVsc2V7WD1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpO1guYXN5bmM9ZmFsc2U7WC5sb2FkWE1MKHgpfXZhciBQPXEuc2FwLmdldFBhcnNlRXJyb3IoWCk7aWYoUCl7aWYoIVgucGFyc2VFcnJvcil7WC5wYXJzZUVycm9yPVB9fXJldHVybiBYfTtxLnNhcC5zZXJpYWxpemVYTUw9ZnVuY3Rpb24gc2VyaWFsaXplWE1MKHgpe3ZhciBYPSIiO2lmKHdpbmRvdy5BY3RpdmVYT2JqZWN0KXtYPXgueG1sO2lmKFgpe3JldHVybiBYfX1pZih3aW5kb3cuWE1MU2VyaWFsaXplcil7dmFyIHM9bmV3IFhNTFNlcmlhbGl6ZXIoKTtYPXMuc2VyaWFsaXplVG9TdHJpbmcoeCl9cmV0dXJuIFh9O3Euc2FwLmlzRXF1YWxOb2RlPWZ1bmN0aW9uKG4sTil7aWYobj09PU4pcmV0dXJuIHRydWU7aWYoIW58fCFOKXJldHVybiBmYWxzZTtpZihuLmlzRXF1YWxOb2RlKXtyZXR1cm4gbi5pc0VxdWFsTm9kZShOKX1pZihuLm5vZGVUeXBlIT1OLm5vZGVUeXBlKXJldHVybiBmYWxzZTtpZihuLm5vZGVWYWx1ZSE9Ti5ub2RlVmFsdWUpcmV0dXJuIGZhbHNlO2lmKG4uYmFzZU5hbWUhPU4uYmFzZU5hbWUpcmV0dXJuIGZhbHNlO2lmKG4ubm9kZU5hbWUhPU4ubm9kZU5hbWUpcmV0dXJuIGZhbHNlO2lmKG4ubmFtZVNwYWNlVVJJIT1OLm5hbWVTcGFjZVVSSSlyZXR1cm4gZmFsc2U7aWYobi5wcmVmaXghPU4ucHJlZml4KXJldHVybiBmYWxzZTtpZihuLm5vZGVUeXBlIT0xKXJldHVybiB0cnVlO2lmKG4uYXR0cmlidXRlcy5sZW5ndGghPU4uYXR0cmlidXRlcy5sZW5ndGgpcmV0dXJuIGZhbHNlO2Zvcih2YXIgaT0wO2k8bi5hdHRyaWJ1dGVzLmxlbmd0aDtpKyspe2lmKCFxLnNhcC5pc0VxdWFsTm9kZShuLmF0dHJpYnV0ZXNbaV0sTi5hdHRyaWJ1dGVzW2ldKSl7cmV0dXJuIGZhbHNlfX1pZihuLmNoaWxkTm9kZXMubGVuZ3RoIT1OLmNoaWxkTm9kZXMubGVuZ3RoKXJldHVybiBmYWxzZTtmb3IodmFyIGk9MDtpPG4uY2hpbGROb2Rlcy5sZW5ndGg7aSsrKXtpZighcS5zYXAuaXNFcXVhbE5vZGUobi5jaGlsZE5vZGVzW2ldLE4uY2hpbGROb2Rlc1tpXSkpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9O3Euc2FwLmdldFBhcnNlRXJyb3I9ZnVuY3Rpb24gZ2V0UGFyc2VFcnJvcihkKXt2YXIgcD17ZXJyb3JDb2RlOi0xLHVybDoiIixyZWFzb246InVua25vd24gZXJyb3IiLHNyY1RleHQ6IiIsbGluZTotMSxsaW5lcG9zOi0xLGZpbGVwb3M6LTF9O2lmKCEhRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZkJiZkLnBhcnNlRXJyb3ImJmQucGFyc2VFcnJvci5lcnJvckNvZGUhPTApe3JldHVybiBkLnBhcnNlRXJyb3J9aWYoISFELmJyb3dzZXIuZmlyZWZveCYmZCYmZC5kb2N1bWVudEVsZW1lbnQmJmQuZG9jdW1lbnRFbGVtZW50LnRhZ05hbWU9PSJwYXJzZXJlcnJvciIpe3ZhciBlPWQuZG9jdW1lbnRFbGVtZW50LmZpcnN0Q2hpbGQubm9kZVZhbHVlLHI9L1hNTCBQYXJzaW5nIEVycm9yOiAoLiopXG5Mb2NhdGlvbjogKC4qKVxuTGluZSBOdW1iZXIgKFxkKyksIENvbHVtbiAoXGQrKTooLiopLztpZihyLnRlc3QoZSkpe3AucmVhc29uPVJlZ0V4cC4kMTtwLnVybD1SZWdFeHAuJDI7cC5saW5lPXBhcnNlSW50KFJlZ0V4cC4kMywxMCk7cC5saW5lcG9zPXBhcnNlSW50KFJlZ0V4cC4kNCwxMCk7cC5zcmNUZXh0PVJlZ0V4cC4kNX1yZXR1cm4gcH1pZighIUQuYnJvd3Nlci53ZWJraXQmJmQmJmQuZG9jdW1lbnRFbGVtZW50JiZkLmRvY3VtZW50RWxlbWVudC50YWdOYW1lPT0iaHRtbCImJmQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoPjApe3ZhciBlPXEuc2FwLnNlcmlhbGl6ZVhNTChkKSxyPS9lcnJvciBvbiBsaW5lIChcZCspIGF0IGNvbHVtbiAoXGQrKTogKFtePF0qKS87aWYoci50ZXN0KGUpKXtwLnJlYXNvbj1SZWdFeHAuJDM7cC51cmw9IiI7cC5saW5lPXBhcnNlSW50KFJlZ0V4cC4kMSwxMCk7cC5saW5lcG9zPXBhcnNlSW50KFJlZ0V4cC4kMiwxMCk7cC5zcmNUZXh0PSIifXJldHVybiBwfWlmKCFkfHwhZC5kb2N1bWVudEVsZW1lbnQpe3JldHVybiBwfXJldHVybntlcnJvckNvZGU6MH19O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5iYXNlLkJpbmRpbmdQYXJzZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5CaW5kaW5nUGFyc2VyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvQmluZGluZ1BhcnNlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ2pxdWVyeS5zYXAuc2NyaXB0J10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciByPS9eXHtccypbYS16QS1aX11bYS16QS1aMC05X10qXHMqOi87dmFyIGE9LyhcXFtcXFx7XH1dKXwoXHspL2c7dmFyIGI9LyhbXFxce1x9XSkvZztmdW5jdGlvbiBjKGYpe3ZhciBGPWZ1bmN0aW9uKHYpe3ZhciBSPVtdLGw9Zi5sZW5ndGgsaTtmb3IoaT0wO2k8bDtpKyspe2lmKHR5cGVvZiBmW2ldPT09Im51bWJlciIpe1IucHVzaChhcmd1bWVudHNbZltpXV0pfWVsc2V7Ui5wdXNoKGZbaV0pfX1yZXR1cm4gUi5qb2luKCcnKX07Ri50ZXh0RnJhZ21lbnRzPWY7cmV0dXJuIEZ9ZnVuY3Rpb24gZChwKXt2YXIgUD1wLmluZGV4T2YoIj4iKSxvPXtwYXRoOnB9O2lmKFA+MCl7by5tb2RlbD1wLnNsaWNlKDAsUCk7by5wYXRoPXAuc2xpY2UoUCsxKX1yZXR1cm4gb312YXIgQj17fTtCLl9rZWVwQmluZGluZ1N0cmluZ3M9ZmFsc2U7Qi5zaW1wbGVQYXJzZXI9ZnVuY3Rpb24ocyxDKXtpZihxLnNhcC5zdGFydHNXaXRoKHMsInsiKSYmcS5zYXAuZW5kc1dpdGgocywifSIpKXtyZXR1cm4gZChzLnNsaWNlKDEsLTEpKX19O0Iuc2ltcGxlUGFyc2VyLmVzY2FwZT1mdW5jdGlvbih2KXtyZXR1cm4gdn07Qi5jb21wbGV4UGFyc2VyPWZ1bmN0aW9uKHMsQyx1KXt2YXIgZT1xLnNhcC5wYXJzZUpTLGY9e3BhcnRzOltdfSxGPVtdLFUsUCxwPTAsbSxnO2Z1bmN0aW9uIGgobyxrKXtpZih0eXBlb2Ygb1trXT09PSJzdHJpbmciKXt2YXIgbj1vW2tdO2lmKHEuc2FwLnN0YXJ0c1dpdGgob1trXSwiLiIpKXtvW2tdPXEucHJveHkocS5zYXAuZ2V0T2JqZWN0KG9ba10uc2xpY2UoMSksdW5kZWZpbmVkLEMpLEMpfWVsc2V7b1trXT1xLnNhcC5nZXRPYmplY3Qob1trXSl9aWYodHlwZW9mKG9ba10pIT09ImZ1bmN0aW9uIil7cS5zYXAubG9nLmVycm9yKGsrIiBmdW5jdGlvbiAiK24rIiBub3QgZm91bmQhIil9fX1mdW5jdGlvbiBpKG8sayl7dmFyIGw7aWYodHlwZW9mIG9ba109PT0ic3RyaW5nIil7aWYocS5zYXAuc3RhcnRzV2l0aChvW2tdLCIuIikpe2w9cS5zYXAuZ2V0T2JqZWN0KG9ba10uc2xpY2UoMSksdW5kZWZpbmVkLEMpfWVsc2V7bD1xLnNhcC5nZXRPYmplY3Qob1trXSl9aWYodHlwZW9mIGw9PT0iZnVuY3Rpb24iKXtvW2tdPW5ldyBsKG8uZm9ybWF0T3B0aW9ucyxvLmNvbnN0cmFpbnRzKX1lbHNle29ba109bH1kZWxldGUgby5mb3JtYXRPcHRpb25zO2RlbGV0ZSBvLmNvbnN0cmFpbnRzfX1mdW5jdGlvbiBqKG8sayxsKXt2YXIgbjtpZighKHR5cGVvZiBvW2tdPT09Im9iamVjdCJ8fHEuaXNBcnJheShvW2tdKSkpe3JldHVybn1pZihxLmlzQXJyYXkob1trXSkpe3EuZWFjaChvW2tdLGZ1bmN0aW9uKEksTyl7aihvW2tdLEksayl9KX1lbHNle2lmKGs9PT0iZmlsdGVycyJ8fGw9PT0iZmlsdGVycyIpe249cS5zYXAuZ2V0T2JqZWN0KCJzYXAudWkubW9kZWwuRmlsdGVyIil9ZWxzZSBpZihrPT09InNvcnRlciJ8fGw9PT0ic29ydGVyIil7bj1xLnNhcC5nZXRPYmplY3QoInNhcC51aS5tb2RlbC5Tb3J0ZXIiKTtoKG9ba10sImdyb3VwIil9aWYobil7b1trXT1uZXcgbihvW2tdKX19fXdoaWxlKG09YS5leGVjKHMpKXtpZihwPG0uaW5kZXgpe0YucHVzaChzLnNsaWNlKHAsbS5pbmRleCkpfWlmKG1bMV0pe0YucHVzaChtWzFdLnNsaWNlKDEpKTtVPXRydWV9ZWxzZXtpZihyLnRlc3Qocy5zbGljZShtLmluZGV4KSkpe1A9ZShzLG0uaW5kZXgpO2koUC5yZXN1bHQsJ3R5cGUnKTtqKFAucmVzdWx0LCdmaWx0ZXJzJyk7aihQLnJlc3VsdCwnc29ydGVyJyk7aChQLnJlc3VsdCwnZm9ybWF0dGVyJyk7aChQLnJlc3VsdCwnZmFjdG9yeScpO0YucHVzaChmLnBhcnRzLmxlbmd0aCk7Zi5wYXJ0cy5wdXNoKFAucmVzdWx0KTthLmxhc3RJbmRleD1QLmF0fWVsc2V7Zz1zLmluZGV4T2YoJ30nLG0uaW5kZXgpO2lmKGc8bS5pbmRleCl7dGhyb3cgbmV3IFN5bnRheEVycm9yKCJubyBjbG9zaW5nIGJyYWNlcyBmb3VuZCBpbiAnIitzKyInIGFmdGVyIHBvczoiK20uaW5kZXgpfUYucHVzaChmLnBhcnRzLmxlbmd0aCk7Zi5wYXJ0cy5wdXNoKGQocy5zbGljZShtLmluZGV4KzEsZykpKTthLmxhc3RJbmRleD1nKzF9fXA9YS5sYXN0SW5kZXh9aWYocDxzLmxlbmd0aCl7Ri5wdXNoKHMuc2xpY2UocCkpfWlmKGYucGFydHMubGVuZ3RoPjApe2lmKEYubGVuZ3RoPT09MSl7Zj1mLnBhcnRzWzBdfWVsc2V7Zi5mb3JtYXR0ZXI9YyhGKX1pZihCLl9rZWVwQmluZGluZ1N0cmluZ3Mpe2YuYmluZGluZ1N0cmluZz1zfXJldHVybiBmfWVsc2UgaWYodSYmVSl7cmV0dXJuIEYuam9pbignJyl9fTtCLmNvbXBsZXhQYXJzZXIuZXNjYXBlPWZ1bmN0aW9uKHYpe3JldHVybiB2LnJlcGxhY2UoYiwiXFwkMSIpfTtyZXR1cm4gQn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5iYXNlLkRhdGFUeXBlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuRGF0YVR5cGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9EYXRhVHlwZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgRD1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigpfTtELnByb3RvdHlwZS5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH07RC5wcm90b3R5cGUuZ2V0QmFzZVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkfTtELnByb3RvdHlwZS5nZXRDb21wb25lbnRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH07RC5wcm90b3R5cGUuZ2V0RGVmYXVsdFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH07RC5wcm90b3R5cGUuaXNBcnJheVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkfTtELnByb3RvdHlwZS5wYXJzZVZhbHVlPWZ1bmN0aW9uKHYpe3ZhciB0PXRoaXMuZ2V0TmFtZSgpO2lmKHQ9PSJzdHJpbmciKXtyZXR1cm4gdn1lbHNlIGlmKHQ9PSJib29sZWFuIil7cmV0dXJuIHY9PSJ0cnVlIn1lbHNlIGlmKHQ9PSJpbnQiKXtyZXR1cm4gcGFyc2VJbnQodiwxMCl9ZWxzZSBpZih0PT0iZmxvYXQiKXtyZXR1cm4gcGFyc2VGbG9hdCh2KX1lbHNlIGlmKHQ9PSJvYmplY3QiKXtyZXR1cm4gdj9xLnBhcnNlSlNPTih2KTpudWxsfWVsc2V7cmV0dXJuIHZ9fTtELnByb3RvdHlwZS5pc1ZhbGlkPXVuZGVmaW5lZDtELnByb3RvdHlwZS5zZXROb3JtYWxpemVyPWZ1bmN0aW9uKG4pe3RoaXMuX2ZuTm9ybWFsaXplcj1ufTtELnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24odil7aWYodHlwZW9mIHRoaXMuX2ZuTm9ybWFsaXplcj09PSJmdW5jdGlvbiIpe3JldHVybiB0aGlzLl9mbk5vcm1hbGl6ZXIodil9ZWxzZXtyZXR1cm4gdn19OyhmdW5jdGlvbigpe2Z1bmN0aW9uIGMobixzLGIpe3M9c3x8e307Yj1ifHxELnByb3RvdHlwZTt2YXIgdD1xLnNhcC5uZXdPYmplY3QoYik7dC5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIG59O2lmKHMuaGFzT3duUHJvcGVydHkoImRlZmF1bHRWYWx1ZSIpKXt2YXIgZD1zLmRlZmF1bHRWYWx1ZTt0LmdldERlZmF1bHRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiBkfX1pZihzLmhhc093blByb3BlcnR5KCJpc1ZhbGlkIikpe3ZhciBpPXMuaXNWYWxpZDt0LmlzVmFsaWQ9Yi5pc1ZhbGlkP2Z1bmN0aW9uKHYpe2lmKCFiLmlzVmFsaWQodikpe3JldHVybiBmYWxzZX1yZXR1cm4gaSh2KX06aX07dC5pc0FycmF5VHlwZT1mdW5jdGlvbigpe3JldHVybiBmYWxzZX07cmV0dXJuIHR9ZnVuY3Rpb24gYShiKXt2YXIgdD1xLnNhcC5uZXdPYmplY3QoRC5wcm90b3R5cGUpO3QuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiBiLmdldE5hbWUoKSsiW10ifTt0LmdldENvbXBvbmVudFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gYn07dC5pc1ZhbGlkPWZ1bmN0aW9uKHYpe2lmKHY9PT1udWxsKXtyZXR1cm4gdHJ1ZX1pZihxLmlzQXJyYXkodikpe2Zvcih2YXIgaT0wO2k8di5sZW5ndGg7aSsrKXtpZighYi5pc1ZhbGlkKHZbaV0pKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfXJldHVybiBmYWxzZX07dC5wYXJzZVZhbHVlPWZ1bmN0aW9uKHYpe3ZhciBWPXYuc3BsaXQoIiwiKTtmb3IodmFyIGk9MDtpPFYubGVuZ3RoO2krKyl7VltpXT1iLnBhcnNlVmFsdWUoVltpXSl9cmV0dXJuIFZ9O3QuaXNBcnJheVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX07cmV0dXJuIHR9dmFyIFA9eyJhbnkiOmMoImFueSIse2RlZmF1bHRWYWx1ZTpudWxsLGlzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuIHRydWV9fSksImJvb2xlYW4iOmMoImJvb2xlYW4iLHtkZWZhdWx0VmFsdWU6ZmFsc2UsaXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4gdHlwZW9mIHY9PT0iYm9vbGVhbiJ9fSksImludCI6YygiaW50Iix7ZGVmYXVsdFZhbHVlOjAsaXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4gdHlwZW9mIHY9PT0ibnVtYmVyIiYmTWF0aC5mbG9vcih2KT09dn19KSwiZmxvYXQiOmMoImZsb2F0Iix7ZGVmYXVsdFZhbHVlOjAuMCxpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybiB0eXBlb2Ygdj09PSJudW1iZXIifX0pLCJzdHJpbmciOmMoInN0cmluZyIse2RlZmF1bHRWYWx1ZToiIixpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybiB0eXBlb2Ygdj09PSJzdHJpbmcifHx2IGluc3RhbmNlb2YgU3RyaW5nfX0pLCJvYmplY3QiOmMoIm9iamVjdCIse2RlZmF1bHRWYWx1ZTpudWxsLGlzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuIHR5cGVvZiB2PT09Im9iamVjdCJ8fHR5cGVvZiB2PT09ImZ1bmN0aW9uIn19KX07RC5nZXRUeXBlPWZ1bmN0aW9uKHQpe2lmKHQuaW5kZXhPZigiW10iKT4wKXt2YXIgQz10LnN1YnN0cigwLHQubGVuZ3RoLTIpLG89dGhpcy5nZXRUeXBlKEMpO3JldHVybiBvJiZhKG8pfWVsc2V7cmV0dXJuIFBbdF18fHEuc2FwLmdldE9iamVjdCh0KX19O0QuY3JlYXRlVHlwZT1jO3ZhciBJPXt9O0QucmVnaXN0ZXJJbnRlcmZhY2VUeXBlcz1mdW5jdGlvbih0KXtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl7cS5zYXAuc2V0T2JqZWN0KHRbaV0sSVt0W2ldXT1uZXcgU3RyaW5nKHRbaV0pKX19O0QuaXNJbnRlcmZhY2VUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBJLmhhc093blByb3BlcnR5KHQpJiZxLnNhcC5nZXRPYmplY3QodCk9PT1JW3RdfX0oKSk7cmV0dXJuIER9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5FeGNlcHRpb24nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5FeGNlcHRpb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9FeGNlcHRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEU9ZnVuY3Rpb24obSl7dGhpcy5uYW1lPSJFeGNlcHRpb24iO3RoaXMubWVzc2FnZT1tfTtyZXR1cm4gRX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5iYXNlLkludGVyZmFjZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLkludGVyZmFjZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL0ludGVyZmFjZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgST1mdW5jdGlvbihvLG0pe2lmKCFvKXtyZXR1cm4gb31mdW5jdGlvbiBjKG8sTSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9b1tNXS5hcHBseShvLGFyZ3VtZW50cyk7cmV0dXJuKHQgaW5zdGFuY2VvZiBzYXAudWkuYmFzZS5PYmplY3QpP3QuZ2V0SW50ZXJmYWNlKCk6dH19aWYoIW0pe3JldHVybnt9fXZhciBNO2Zvcih2YXIgaT0wLGE9bS5sZW5ndGg7aTxhO2krKyl7TT1tW2ldO3RoaXNbTV09YyhvLE0pfX07cmV0dXJuIEl9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5NZXRhZGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLk1ldGFkYXRhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvTWV0YWRhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgTT1mdW5jdGlvbihjLEMpe2lmKCFDfHx0eXBlb2YgQy5tZXRhZGF0YSE9PSJvYmplY3QiKXtDPXttZXRhZGF0YTpDfHx7fSxjb25zdHJ1Y3RvcjpxLnNhcC5nZXRPYmplY3QoYyl9O0MubWV0YWRhdGEuX192ZXJzaW9uPTEuMH1DLm1ldGFkYXRhLl9fdmVyc2lvbj1DLm1ldGFkYXRhLl9fdmVyc2lvbnx8Mi4wO2lmKHR5cGVvZiBDLmNvbnN0cnVjdG9yIT09ImZ1bmN0aW9uIil7dGhyb3cgRXJyb3IoImNvbnN0cnVjdG9yIGZvciBjbGFzcyAiK2MrIiBtdXN0IGhhdmUgYmVlbiBkZWNsYXJlZCBiZWZvcmUgY3JlYXRpbmcgbWV0YWRhdGEgZm9yIGl0Iil9dGhpcy5fc0NsYXNzTmFtZT1jO3RoaXMuX29DbGFzcz1DLmNvbnN0cnVjdG9yO3RoaXMuZXh0ZW5kKEMpfTtNLnByb3RvdHlwZS5leHRlbmQ9ZnVuY3Rpb24oYyl7dGhpcy5hcHBseVNldHRpbmdzKGMpO3RoaXMuYWZ0ZXJBcHBseVNldHRpbmdzKCl9O00ucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oYyl7dmFyIHQ9dGhpcyxzPWMubWV0YWRhdGEscCxuO2lmKHMuYmFzZVR5cGUpe3ZhciBQPXEuc2FwLmdldE9iamVjdChzLmJhc2VUeXBlKTtpZih0eXBlb2YgUCE9PSJmdW5jdGlvbiIpe3Euc2FwLmxvZy5mYXRhbCgiYmFzZSBjbGFzcyAnIitzLmJhc2VUeXBlKyInIGRvZXMgbm90IGV4aXN0Iil9aWYoUC5nZXRNZXRhZGF0YSl7dGhpcy5fb1BhcmVudD1QLmdldE1ldGFkYXRhKCk7fWVsc2V7dGhpcy5fb1BhcmVudD1uZXcgTShzLmJhc2VUeXBlLHt9KX19ZWxzZXt0aGlzLl9vUGFyZW50PXVuZGVmaW5lZH10aGlzLl9iQWJzdHJhY3Q9ISFzWyJhYnN0cmFjdCJdO3RoaXMuX2JGaW5hbD0hIXNbImZpbmFsIl07dGhpcy5fc1N0ZXJlb3R5cGU9cy5zdGVyZW90eXBlfHwodGhpcy5fb1BhcmVudD90aGlzLl9vUGFyZW50Ll9zU3RlcmVvdHlwZToib2JqZWN0Iik7dGhpcy5fYUludGVyZmFjZXM9cS5zYXAudW5pcXVlKHMuaW50ZXJmYWNlc3x8W10pO3RoaXMuX2FQdWJsaWNNZXRob2RzPXEuc2FwLnVuaXF1ZShzLnB1YmxpY01ldGhvZHN8fFtdKTtwPXRoaXMuX29DbGFzcy5wcm90b3R5cGU7cS5zYXAuZm9ySW4oYyxmdW5jdGlvbihuLHYpe2lmKG4hPT0ibWV0YWRhdGEiJiZuIT09ImNvbnN0cnVjdG9yIil7cFtuXT12O2lmKCFuLm1hdGNoKC9eX3xeb258XmluaXQkfF5leGl0JC8pKXt0Ll9hUHVibGljTWV0aG9kcy5wdXNoKG4pfX19KX07TS5wcm90b3R5cGUuYWZ0ZXJBcHBseVNldHRpbmdzPWZ1bmN0aW9uKCl7aWYodGhpcy5fb1BhcmVudCl7dGhpcy5fYUFsbFB1YmxpY01ldGhvZHM9cS5zYXAudW5pcXVlKHRoaXMuX29QYXJlbnQuX2FBbGxQdWJsaWNNZXRob2RzLmNvbmNhdCh0aGlzLl9hUHVibGljTWV0aG9kcykpfWVsc2V7dGhpcy5fYUFsbFB1YmxpY01ldGhvZHM9dGhpcy5fYVB1YmxpY01ldGhvZHN9fTtNLnByb3RvdHlwZS5nZXRTdGVyZW90eXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NTdGVyZW90eXBlfTtNLnByb3RvdHlwZS5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NDbGFzc05hbWV9O00ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29DbGFzc307TS5wcm90b3R5cGUuZ2V0UGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29QYXJlbnR9O00ucHJvdG90eXBlLmdldFB1YmxpY01ldGhvZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYVB1YmxpY01ldGhvZHN9O00ucHJvdG90eXBlLmdldEFsbFB1YmxpY01ldGhvZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYUFsbFB1YmxpY01ldGhvZHN9O00ucHJvdG90eXBlLmdldEludGVyZmFjZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYUludGVyZmFjZXN9O00ucHJvdG90eXBlLmlzSW5zdGFuY2VPZj1mdW5jdGlvbihJKXtpZih0aGlzLl9vUGFyZW50KXtpZih0aGlzLl9vUGFyZW50LmlzSW5zdGFuY2VPZihJKSl7cmV0dXJuIHRydWV9fTt2YXIgYT10aGlzLl9hSW50ZXJmYWNlcztmb3IodmFyIGk9MCxsPWEubGVuZ3RoO2k8bDtpKyspe2lmKGFbaV09PT1JKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfTtNLnByb3RvdHlwZS5pc0Fic3RyYWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JBYnN0cmFjdH07TS5wcm90b3R5cGUuaXNGaW5hbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iRmluYWx9O00ucHJvdG90eXBlLmFkZFB1YmxpY01ldGhvZHM9ZnVuY3Rpb24obSl7dmFyIG49KG0gaW5zdGFuY2VvZiBBcnJheSk/bTphcmd1bWVudHM7ZnVuY3Rpb24gdShhLHYpe0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGEsdik7cS5zYXAudW5pcXVlKGEpfXUodGhpcy5fYVB1YmxpY01ldGhvZHMsbik7dSh0aGlzLl9hQWxsUHVibGljTWV0aG9kcyxuKX07TS5jcmVhdGVDbGFzcz1mdW5jdGlvbihiLGMsQyxGKXtpZih0eXBlb2YgYj09PSJzdHJpbmciKXtGPUM7Qz1jO2M9YjtiPW51bGx9Rj1GfHxNO2lmKHR5cGVvZiBGLnByZXByb2Nlc3NDbGFzc0luZm89PT0iZnVuY3Rpb24iKXtDPUYucHJlcHJvY2Vzc0NsYXNzSW5mbyhDKX1DPUN8fHt9O0MubWV0YWRhdGE9Qy5tZXRhZGF0YXx8e307aWYoIUMuaGFzT3duUHJvcGVydHkoJ2NvbnN0cnVjdG9yJykpe0MuY29uc3RydWN0b3I9dW5kZWZpbmVkfXZhciBmPUMuY29uc3RydWN0b3I7aWYoYil7aWYoIWYpe2lmKEMubWV0YWRhdGEuZGVwcmVjYXRlZCl7Zj1mdW5jdGlvbigpe3Euc2FwLmxvZy53YXJuaW5nKCJVc2FnZSBvZiBkZXByZWNhdGVkIGNsYXNzOiAiK2MpO2IuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1lbHNle2Y9ZnVuY3Rpb24oKXtiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fWYucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChiLnByb3RvdHlwZSk7Zi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZjtDLm1ldGFkYXRhLmJhc2VUeXBlPWIuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCl9ZWxzZXtmPWZ8fGZ1bmN0aW9uKCl7fTtkZWxldGUgQy5tZXRhZGF0YS5iYXNlVHlwZX1DLmNvbnN0cnVjdG9yPWY7cS5zYXAuc2V0T2JqZWN0KGMsZik7dmFyIG09bmV3IEYoYyxDKTtmLmdldE1ldGFkYXRhPWYucHJvdG90eXBlLmdldE1ldGFkYXRhPXEuc2FwLmdldHRlcihtKTtpZighZi5nZXRNZXRhZGF0YSgpLmlzRmluYWwoKSl7Zi5leHRlbmQ9ZnVuY3Rpb24ocyxTLGEpe3JldHVybiBNLmNyZWF0ZUNsYXNzKGYscyxTLGF8fEYpfX1yZXR1cm4gZn07cmV0dXJuIE19LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5PYmplY3QnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5PYmplY3QnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9PYmplY3QiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0ludGVyZmFjZScsJy4vTWV0YWRhdGEnXSxmdW5jdGlvbihxLEksTSl7InVzZSBzdHJpY3QiO3ZhciBCPU0uY3JlYXRlQ2xhc3MoInNhcC51aS5iYXNlLk9iamVjdCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7aWYoISh0aGlzIGluc3RhbmNlb2YgQikpe3Rocm93IEVycm9yKCJDYW5ub3QgaW5zdGFudGlhdGUgb2JqZWN0OiBcIm5ld1wiIGlzIG1pc3NpbmchIil9fX0pO0IucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt9O0IucHJvdG90eXBlLmdldEludGVyZmFjZT1mdW5jdGlvbigpe3ZhciBpPW5ldyBJKHRoaXMsdGhpcy5nZXRNZXRhZGF0YSgpLmdldEFsbFB1YmxpY01ldGhvZHMoKSk7dGhpcy5nZXRJbnRlcmZhY2U9cS5zYXAuZ2V0dGVyKGkpO3JldHVybiBpfTtCLmRlZmluZUNsYXNzPWZ1bmN0aW9uKGMscyxGKXt2YXIgbT1uZXcoRnx8TSkoYyxzKTt2YXIgQz1tLmdldENsYXNzKCk7Qy5nZXRNZXRhZGF0YT1DLnByb3RvdHlwZS5nZXRNZXRhZGF0YT1xLnNhcC5nZXR0ZXIobSk7aWYoIW0uaXNGaW5hbCgpKXtDLmV4dGVuZD1mdW5jdGlvbihTLG8sZil7cmV0dXJuIE0uY3JlYXRlQ2xhc3MoQyxTLG8sZnx8Ril9fXEuc2FwLmxvZy5kZWJ1ZygiZGVmaW5lZCBjbGFzcyAnIitjKyInIisobS5nZXRQYXJlbnQoKT8iIGFzIHN1YmNsYXNzIG9mICIrbS5nZXRQYXJlbnQoKS5nZXROYW1lKCk6IiIpKTtyZXR1cm4gbX07cmV0dXJuIEJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5PYmplY3RQb29sJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuT2JqZWN0UG9vbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL09iamVjdFBvb2wiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL09iamVjdCddLGZ1bmN0aW9uKHEsQil7InVzZSBzdHJpY3QiO3ZhciBPPUIuZXh0ZW5kKCJzYXAudWkuYmFzZS5PYmplY3RQb29sIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obyl7Qi5hcHBseSh0aGlzKTt0aGlzLm9PYmplY3RDbGFzcz1vO3RoaXMuYUZyZWVPYmplY3RzPVtdfX0pO08ucHJvdG90eXBlLmJvcnJvd09iamVjdD1mdW5jdGlvbigpe3ZhciBvPXRoaXMuYUZyZWVPYmplY3RzLmxlbmd0aD09MD9uZXcgdGhpcy5vT2JqZWN0Q2xhc3MoKTp0aGlzLmFGcmVlT2JqZWN0cy5wb3AoKTtvLmluaXQuYXBwbHkobyxhcmd1bWVudHMpO3JldHVybiBvfTtPLnByb3RvdHlwZS5yZXR1cm5PYmplY3Q9ZnVuY3Rpb24obyl7by5yZXNldCgpO3RoaXMuYUZyZWVPYmplY3RzLnB1c2gobyl9O3JldHVybiBPfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyUmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXJSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0NvbXBvbmVudENvbnRhaW5lclJlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBDPXt9O0MucmVuZGVyPWZ1bmN0aW9uKHIsYyl7dmFyIFI9cjt2YXIgYj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTt2YXIgbz1jLmdldENvbXBvbmVudEluc3RhbmNlKCk7dmFyIHc9Yy5nZXRXaWR0aCgpO3ZhciBoPWMuZ2V0SGVpZ2h0KCk7Ui53cml0ZSgiPGRpdiIpO1Iud3JpdGVDb250cm9sRGF0YShjKTtpZih3KXtSLmFkZFN0eWxlKCJ3aWR0aCIsdyl9aWYoaCl7Ui5hZGRTdHlsZSgiaGVpZ2h0IixoKX1SLndyaXRlU3R5bGVzKCk7Ui5hZGRDbGFzcygic2FwVWlDb21wb25lbnRDb250YWluZXIiKTtSLndyaXRlQ2xhc3NlcygpO1Iud3JpdGUoIj4iKTtSLndyaXRlKCI8ZGl2IGlkPVwiIitjLmdldElkKCkrIi11aWFyZWFcIiIpO2lmKHcmJnchPT0iYXV0byIpe1IuYWRkU3R5bGUoIndpZHRoIiwiMTAwJSIpfWlmKGgmJmghPT0iYXV0byIpe1IuYWRkU3R5bGUoImhlaWdodCIsIjEwMCUiKX1SLndyaXRlU3R5bGVzKCk7Ui53cml0ZSgiPiIpO2lmKG8pe28ucmVuZGVyKFIpfVIud3JpdGUoIjwvZGl2PjwvZGl2PiIpfTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkRlY2xhcmF0aXZlU3VwcG9ydCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkRlY2xhcmF0aXZlU3VwcG9ydCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0RlY2xhcmF0aXZlU3VwcG9ydCIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgRD17fTtELmF0dHJpYnV0ZXM9eyJkYXRhLXNhcC11aS10eXBlIjp0cnVlLCJkYXRhLXNhcC11aS1hZ2dyZWdhdGlvbiI6dHJ1ZSwiZGF0YS1zYXAtdWktZGVmYXVsdC1hZ2dyZWdhdGlvbiI6dHJ1ZSwiZGF0YS1zYXAtdWktYmluZGluZyI6ZnVuY3Rpb24odixzKXt2YXIgYj1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXIodik7cy5vYmplY3RCaW5kaW5ncz1zLm9iamVjdEJpbmRpbmdzfHx7fTtzLm9iamVjdEJpbmRpbmdzW2IubW9kZWx8fHVuZGVmaW5lZF09Yn0sImRhdGEtdG9vbHRpcCI6ZnVuY3Rpb24odixzKXtzWyJ0b29sdGlwIl09dn0sInRvb2x0aXAiOmZ1bmN0aW9uKHYscyxjKXtzWyJ0b29sdGlwIl09djtxLnNhcC5sb2cud2FybmluZygnW0RlcHJlY2F0ZWRdIENvbnRyb2wgIicrcy5pZCsnIjogVGhlIGF0dHJpYnV0ZSAidG9vbHRpcCIgaXMgbm90IHByZWZpeGVkIHdpdGggImRhdGEtKiIuIEZ1dHVyZSB2ZXJzaW9uIG9mIGRlY2xhcmF0aXZlIHN1cHBvcnQgd2lsbCBvbmx5IHN1cHBwb3J0IGF0dHJpYnV0ZXMgd2l0aCAiZGF0YS0qIiBwcmVmaXguJyl9LCJjbGFzcyI6dHJ1ZSwic3R5bGUiOnRydWUsImlkIjp0cnVlfTtELmNvbXBpbGU9ZnVuY3Rpb24oZSx2LGkpe3ZhciBzPXRoaXM7cShlKS5maW5kKCJbZGF0YS1zYXAtdWktdHlwZV0iKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gcSh0aGlzKS5wYXJlbnRzKCJbZGF0YS1zYXAtdWktdHlwZV0iKS5sZW5ndGg9PT0wfSkuZWFjaChmdW5jdGlvbigpe3MuX2NvbXBpbGUodGhpcyx2LGkpfSl9O0QuX2NvbXBpbGU9ZnVuY3Rpb24oZSx2LGkpe3ZhciAkPXEoZSk7dmFyIHQ9JC5hdHRyKCJkYXRhLXNhcC11aS10eXBlIik7dmFyIGM9W107dmFyIEk9dD09PSJzYXAudWkuY29yZS5VSUFyZWEiO2lmKEkpe3ZhciBzPXRoaXM7JC5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKXt2YXIgQz1zLl9jcmVhdGVDb250cm9sKHRoaXMsdik7aWYoQyl7Yy5wdXNoKEMpfX0pfWVsc2V7dmFyIEM9dGhpcy5fY3JlYXRlQ29udHJvbChlLHYpO2lmKEMpe2MucHVzaChDKX19JC5lbXB0eSgpO3ZhciBhPVtdO3EuZWFjaChlLmF0dHJpYnV0ZXMsZnVuY3Rpb24oYixBKXt2YXIgbj1BLm5hbWU7aWYoIUl8fEkmJi9eZGF0YS0vZy50ZXN0KG4udG9Mb3dlckNhc2UoKSkpe2EucHVzaChuKX19KTtpZihhLmxlbmd0aD4wKXskLnJlbW92ZUF0dHIoYS5qb2luKCIgIikpfXEuZWFjaChjLGZ1bmN0aW9uKGssQyl7aWYoQyBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkNvbnRyb2wpe2lmKHYmJiFpKXt2LmFkZENvbnRlbnQoQyl9ZWxzZXtDLnBsYWNlQXQoZSk7aWYodil7di5jb25uZWN0Q29udHJvbChDKX19fX0pfTtELl9jcmVhdGVDb250cm9sPWZ1bmN0aW9uKGUsdil7dmFyICQ9cShlKTt2YXIgYz1udWxsO3ZhciB0PSQuYXR0cigiZGF0YS1zYXAtdWktdHlwZSIpO2lmKHQpe3Euc2FwLnJlcXVpcmUodCk7dmFyIEM9cS5zYXAuZ2V0T2JqZWN0KHQpO3ZhciBzPXt9O3ZhciBpPXMuaWQ9dGhpcy5fZ2V0SWQoJCx2KTt0aGlzLl9hZGRTZXR0aW5nc0ZvckF0dHJpYnV0ZXMocyxDLGUsdik7dGhpcy5fYWRkU2V0dGluZ3NGb3JBZ2dyZWdhdGlvbnMocyxDLGUsdik7dmFyIGM7aWYoc2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoQy5wcm90b3R5cGUpJiZ0eXBlb2YgQy5fc1R5cGU9PT0ic3RyaW5nIil7Yz1zYXAudWkudmlldyhzLHVuZGVmaW5lZCxDLl9zVHlwZSl9ZWxzZXtjPW5ldyBDKHMpfWlmKGUuY2xhc3NOYW1lKXtjLmFkZFN0eWxlQ2xhc3MoZS5jbGFzc05hbWUpfSQucmVtb3ZlQXR0cigiZGF0YS1zYXAtdWktdHlwZSIpfWVsc2V7Yz10aGlzLl9jcmVhdGVIdG1sQ29udHJvbChlLHYpfXJldHVybiBjfTtELl9jcmVhdGVIdG1sQ29udHJvbD1mdW5jdGlvbihlLHYpe3ZhciBoPW5ldyBzYXAudWkuY29yZS5IVE1MKCk7aC5zZXRET01Db250ZW50KGUpO3RoaXMuY29tcGlsZShlLHYsdHJ1ZSk7cmV0dXJuIGh9O0QuX2FkZFNldHRpbmdzRm9yQXR0cmlidXRlcz1mdW5jdGlvbihzLGMsZSx2KXt2YXIgYT10aGlzO3ZhciBTPUQuYXR0cmlidXRlczt2YXIgYj1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXI7dmFyIEM9W107dmFyIHI9L15kYXRhLWN1c3RvbS1kYXRhOiguKykvaTtxLmVhY2goZS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGksQSl7dmFyIG49QS5uYW1lO3ZhciBWPUEudmFsdWU7aWYoIXIudGVzdChuKSl7aWYodHlwZW9mIFNbbl09PT0idW5kZWZpbmVkIil7bj1hLmNvbnZlcnRBdHRyaWJ1dGVUb1NldHRpbmdOYW1lKG4scy5pZCk7dmFyIHA9YS5fZ2V0UHJvcGVydHkoYyxuKTtpZihwKXt2YXIgQj1iKFYsdiYmdi5nZXRDb250cm9sbGVyKCksdHJ1ZSk7aWYoQiYmdHlwZW9mIEI9PT0ib2JqZWN0Iil7c1tuXT1CfWVsc2V7c1tuXT1hLmNvbnZlcnRWYWx1ZVRvVHlwZShhLmdldFByb3BlcnR5RGF0YVR5cGUocCksQnx8Vil9fWVsc2UgaWYoYS5fZ2V0QXNzb2NpYXRpb24oYyxuKSl7dmFyIG89YS5fZ2V0QXNzb2NpYXRpb24oYyxuKTtpZihvLm11bHRpcGxlKXtWPVYucmVwbGFjZSgvXHMqLFxzKnxccysvZywiLCIpO3ZhciBJPVYuc3BsaXQoIiwiKTtxLmVhY2goSSxmdW5jdGlvbihpLGcpe0lbaV09dj92LmNyZWF0ZUlkKGcpOmd9KTtzW25dPUl9ZWxzZXtzW25dPXY/di5jcmVhdGVJZChWKTpWfX1lbHNlIGlmKGEuX2dldEFnZ3JlZ2F0aW9uKGMsbikpe3ZhciBkPWEuX2dldEFnZ3JlZ2F0aW9uKGMsbik7aWYoZC5tdWx0aXBsZSl7dmFyIEI9YihWLHYmJnYuZ2V0Q29udHJvbGxlcigpKTtpZihCKXtzW25dPUJ9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIkFnZ3JlZ2F0aW9uICIrbisiIHdpdGggY2FyZGluYWxpdHkgMC4ubiBvbmx5IGFsbG93cyBiaW5kaW5nIHBhdGhzIGFzIGF0dHJpYnV0ZSB2YWx1ZSIpfX1lbHNlIGlmKGQuYWx0VHlwZXMpe3ZhciBCPWIoVix2JiZ2LmdldENvbnRyb2xsZXIoKSx0cnVlKTtpZihCJiZ0eXBlb2YgQj09PSJvYmplY3QiKXtzW25dPUJ9ZWxzZXtzW25dPWEuY29udmVydFZhbHVlVG9UeXBlKGQuYWx0VHlwZXNbMF0sQnx8Vil9fWVsc2V7dGhyb3cgbmV3IEVycm9yKCJBZ2dyZWdhdGlvbiAiK24rIiBub3Qgc3VwcG9ydGVkIil9fWVsc2UgaWYoYS5fZ2V0RXZlbnQoYyxuKSl7dmFyIGg9cS5zYXAuZ2V0T2JqZWN0KFYpO2lmKHYmJnR5cGVvZiBoPT09InVuZGVmaW5lZCIpe3ZhciBmPSh2Ll9vQ29udGFpbmluZ1ZpZXd8fHYpLmdldENvbnRyb2xsZXIoKTtoPWZbVl07aWYodHlwZW9mIGg9PT0iZnVuY3Rpb24iKXtoPXEucHJveHkoaCxmKTtoLl9zYXB1aV9oYW5kbGVyTmFtZT1WfX1pZih0eXBlb2YgaD09PSJmdW5jdGlvbiIpe3Nbbl09aH1lbHNle3Rocm93IG5ldyBFcnJvcignQ29udHJvbCAiJytzLmlkKyciOiBUaGUgZnVuY3Rpb24gIicrVisnIiBmb3IgdGhlIGV2ZW50ICInK24rJyIgaXMgbm90IGRlZmluZWQnKX19fWVsc2UgaWYodHlwZW9mIFNbbl09PT0iZnVuY3Rpb24iKXtTW25dKFYscyxjKX19ZWxzZXtuPXEuc2FwLmNhbWVsQ2FzZShyLmV4ZWMobilbMV0pO3ZhciBCPWIoVix2JiZ2LmdldENvbnRyb2xsZXIoKSk7Qy5wdXNoKG5ldyBzYXAudWkuY29yZS5DdXN0b21EYXRhKHtrZXk6bix2YWx1ZTpCfHxWfSkpfX0pO2lmKEMubGVuZ3RoPjApe3MuY3VzdG9tRGF0YT1DfXJldHVybiBzfTtELl9hZGRTZXR0aW5nc0ZvckFnZ3JlZ2F0aW9ucz1mdW5jdGlvbihzLGMsZSx2KXt2YXIgJD1xKGUpO3ZhciBkPXRoaXMuX2dldERlZmF1bHRBZ2dyZWdhdGlvbihjLGUpO3ZhciBhPXRoaXM7dmFyIEE9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpOyQuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9cSh0aGlzKTt2YXIgZj1iLmF0dHIoImRhdGEtc2FwLXVpLWFnZ3JlZ2F0aW9uIik7dmFyIHQ9Yi5hdHRyKCJkYXRhLXNhcC11aS10eXBlIik7dmFyIHU9ZmFsc2U7aWYoIWYpe3U9dHJ1ZTtmPWR9aWYoZiYmQVtmXSl7dmFyIG09QVtmXS5tdWx0aXBsZTt2YXIgZz1mdW5jdGlvbihDKXt2YXIgbz1hLl9jcmVhdGVDb250cm9sKEMsdik7aWYobyl7aWYobSl7aWYoIXNbZl0pe3NbZl09W119aWYodHlwZW9mIHNbZl0ucGF0aD09PSJzdHJpbmciKXtzW2ZdLnRlbXBsYXRlPW99ZWxzZXtzW2ZdLnB1c2gobyl9fWVsc2V7c1tmXT1vfX19O2lmKHV8fCh0JiYhdSkpe2codGhpcyl9ZWxzZXtiLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe2codGhpcyl9KX19Yi5yZW1vdmVBdHRyKCJkYXRhLXNhcC11aS1hZ2dyZWdhdGlvbiIpO2IucmVtb3ZlQXR0cigiZGF0YS1zYXAtdWktdHlwZSIpfSk7cmV0dXJuIHN9O0QuX2dldElkPWZ1bmN0aW9uKGUsdil7dmFyICQ9cShlKTt2YXIgaT0kLmF0dHIoImlkIik7aWYoaSl7aWYodil7aT12LmNyZWF0ZUlkKGkpOyQuYXR0cigiZGF0YS1zYXAtdWktaWQiLGkpfSQuYXR0cigiaWQiLCIiKX1yZXR1cm4gaX07RC5fZ2V0UHJvcGVydHk9ZnVuY3Rpb24oYyxuKXtyZXR1cm4gYy5nZXRNZXRhZGF0YSgpLmdldEFsbFByb3BlcnRpZXMoKVtuXX07RC5jb252ZXJ0VmFsdWVUb1R5cGU9ZnVuY3Rpb24odCx2KXtpZih0IGluc3RhbmNlb2Ygc2FwLnVpLmJhc2UuRGF0YVR5cGUpe3Y9dC5wYXJzZVZhbHVlKHYpfXJldHVybiB0eXBlb2Ygdj09PSJzdHJpbmciP3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QuYmluZGluZ1BhcnNlci5lc2NhcGUodik6dn07RC5nZXRQcm9wZXJ0eURhdGFUeXBlPWZ1bmN0aW9uKHApe3ZhciB0PXNhcC51aS5iYXNlLkRhdGFUeXBlLmdldFR5cGUocC50eXBlKTtpZighdCl7dGhyb3cgbmV3IEVycm9yKCJQcm9wZXJ0eSAiK3AubmFtZSsiIGhhcyBubyBrbm93biB0eXBlIil9cmV0dXJuIHR9O0QuY29udmVydEF0dHJpYnV0ZVRvU2V0dGluZ05hbWU9ZnVuY3Rpb24oYSxpLGQpe2lmKGEuaW5kZXhPZigiZGF0YS0iKT09PTApe2E9YS5zdWJzdHIoNSl9ZWxzZSBpZihkKXtxLnNhcC5sb2cud2FybmluZygnW0RlcHJlY2F0ZWRdIENvbnRyb2wgIicraSsnIjogVGhlIGF0dHJpYnV0ZSAiJythKyciIGlzIG5vdCBwcmVmaXhlZCB3aXRoICJkYXRhLSoiLiBGdXR1cmUgdmVyc2lvbiBvZiBkZWNsYXJhdGl2ZSBzdXBwb3J0IHdpbGwgb25seSBzdXBwcG9ydCBhdHRyaWJ1dGVzIHdpdGggImRhdGEtKiIgcHJlZml4LicpfWVsc2V7dGhyb3cgbmV3IEVycm9yKCdDb250cm9sICInK2krJyI6IFRoZSBhdHRyaWJ1dGUgIicrYSsnIiBpcyBub3QgcHJlZml4ZWQgd2l0aCAiZGF0YS0qIi4nKX1yZXR1cm4gcS5zYXAuY2FtZWxDYXNlKGEpfTtELl9nZXRBc3NvY2lhdGlvbj1mdW5jdGlvbihjLG4pe3JldHVybiBjLmdldE1ldGFkYXRhKCkuZ2V0QWxsQXNzb2NpYXRpb25zKClbbl19O0QuX2dldEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsbil7cmV0dXJuIGMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxBZ2dyZWdhdGlvbnMoKVtuXX07RC5fZ2V0RXZlbnQ9ZnVuY3Rpb24oYyxuKXtyZXR1cm4gYy5nZXRNZXRhZGF0YSgpLmdldEFsbEV2ZW50cygpW25dfTtELl9nZXREZWZhdWx0QWdncmVnYXRpb249ZnVuY3Rpb24oYyxlKXt2YXIgJD1xKGUpO3ZhciBkPSQuYXR0cigiZGF0YS1zYXAtdWktZGVmYXVsdC1hZ2dyZWdhdGlvbiIpfHxjLmdldE1ldGFkYXRhKCkuZ2V0RGVmYXVsdEFnZ3JlZ2F0aW9uTmFtZSgpOyQucmVtb3ZlQXR0cigiZGF0YS1zYXAtdWktZGVmYXVsdC1hZ2dyZWdhdGlvbiIpO3JldHVybiBkfTtyZXR1cm4gRH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkhUTUxSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkhUTUxSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0hUTUxSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgSD17cmVuZGVyOmZ1bmN0aW9uKHIsYyl7dmFyIHU9Yy5nZXRVSUFyZWEoKTtyLndyaXRlKCI8ZGl2IGlkPVwic2FwLXVpLWR1bW15LSIrYy5nZXRJZCgpKyJcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPiIpO3Iud3JpdGUoIjwvZGl2PiIpfX07cmV0dXJuIEh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5IaXN0b3J5Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuSGlzdG9yeScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0hpc3RvcnkiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgSD1CLmV4dGVuZCgic2FwLnVpLmNvcmUuSGlzdG9yeSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyl7Qi5hcHBseSh0aGlzKTtpZighcyl7cz17fX12YXIgaD1zLnByZWZpeD9zLnByZWZpeDpkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZTt0aGlzLl9pTWF4SGlzdG9yeT1zLm1heD9zLm1heDoxMDA7dGhpcy5fc0hpc3RvcnlJZD1oK2k7cS5zYXAucmVxdWlyZSgianF1ZXJ5LnNhcC5zdG9yYWdlIik7dGhpcy5fb1N0b3JhZ2U9cS5zYXAuc3RvcmFnZShxLnNhcC5zdG9yYWdlLlR5cGUubG9jYWwpO3RoaXMuX2ZGaWx0ZXI9cy5maWx0ZXI/cy5maWx0ZXI6ZnVuY3Rpb24oYSx2KXtyZXR1cm4gYSYmKCF2fHwodiYmcS5zYXAuc3RhcnRzV2l0aElnbm9yZUNhc2UoYSx2KSkpfTt0aGlzLl9mQ2hlY2tIaXN0b3J5PXMuY2hlY2tIaXN0b3J5P3MuY2hlY2tIaXN0b3J5OmZ1bmN0aW9uKGEpe3JldHVybiBhfX0sX2luaXRIaXN0b3J5OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2FIaXN0b3J5KXt2YXIgaD10aGlzLl9vU3RvcmFnZS5nZXQodGhpcy5fc0hpc3RvcnlJZCk7aWYodHlwZW9mKGgpPT09InN0cmluZyIpe2g9aC5zcGxpdCgiLCIpfWVsc2UgaWYoIWgpe2g9W119dGhpcy5fYUhpc3Rvcnk9dGhpcy5fZkNoZWNrSGlzdG9yeShoKX1yZXR1cm4gdGhpcy5fYUhpc3Rvcnl9LGdldDpmdW5jdGlvbih2KXt2YXIgaD10aGlzLl9pbml0SGlzdG9yeSgpO3ZhciByPVtdO2Zvcih2YXIgaT0wO2k8aC5sZW5ndGg7aSsrKXtpZih0aGlzLl9mRmlsdGVyKGhbaV0sdikpe3IucHVzaChoW2ldKX19cmV0dXJuIHJ9LHJlbW92ZTpmdW5jdGlvbih2KXt2YXIgaD10aGlzLl9pbml0SGlzdG9yeSgpO2Zvcih2YXIgaT0wO2k8aC5sZW5ndGg7aSsrKXtpZihoW2ldPT12KXtoLnNwbGljZShpLDEpO2JyZWFrfX19LGFkZDpmdW5jdGlvbih2KXt2YXIgaD10aGlzLl9pbml0SGlzdG9yeSgpO2Zvcih2YXIgaT0wO2k8aC5sZW5ndGg7aSsrKXtpZihoW2ldPT09dil7aC5zcGxpY2UoaSwxKTticmVha319aC51bnNoaWZ0KHYpO2lmKGgubGVuZ3RoPnRoaXMuX2lNYXhIaXN0b3J5KXtoLnNwbGljZSh0aGlzLl9pTWF4SGlzdG9yeSl9dGhpcy5fb1N0b3JhZ2UucHV0KHRoaXMuX3NIaXN0b3J5SWQsaCl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5fb1N0b3JhZ2UucmVtb3ZlKHRoaXMuX3NIaXN0b3J5SWQpO3RoaXMuX2FIaXN0b3J5PW51bGx9fSk7cmV0dXJuIEh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5JY29uUG9vbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkljb25Qb29sJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvSWNvblBvb2wiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvdGhpcmRwYXJ0eS9VUkknXSxmdW5jdGlvbihxLFUpeyJ1c2Ugc3RyaWN0IjtpZihiKXtyZXR1cm59dmFyIEk9WyJhY2NpZGVudGFsLWxlYXZlIiwiYWNjb3VudCIsIndyZW5jaCIsIndpbmRvd3MtZG9vcnMiLCJ3YXNoaW5nLW1hY2hpbmUiLCJ2aXNpdHMiLCJ2aWRlbyIsInRyYXZlbC1leHBlbnNlIiwidGVtcGVyYXR1cmUiLCJ0YXNrIiwic3luY2hyb25pemUiLCJzdXJ2ZXkiLCJzZXR0aW5ncyIsInNlYXJjaCIsInNhbGVzLWRvY3VtZW50IiwicmV0YWlsLXN0b3JlIiwicmVmcmVzaCIsInByb2R1Y3QiLCJwcmVzZW50IiwicHB0LWF0dGFjaG1lbnQiLCJwb29sIiwicGllLWNoYXJ0IiwicGljdHVyZSIsInBob3RvLXZvbHRhaWMiLCJwaG9uZSIsInBlbmRpbmciLCJwZGYtYXR0YWNobWVudCIsInBhc3QiLCJvdXRnb2luZy1jYWxsIiwib3Bwb3J0dW5pdHkiLCJvcHBvcnR1bml0aWVzIiwibm90ZXMiLCJtb25leS1iaWxscyIsIm1hcCIsImxvZyIsImxpbmUtY2hhcnRzIiwibGlnaHRidWxiIiwibGVhZHMiLCJsZWFkIiwibGFwdG9wIiwia3BpLW1hbmFnaW5nLW15LWFyZWEiLCJrcGktY29ycG9yYXRlLXBlcmZvcm1hbmNlIiwiaW5jb21pbmctY2FsbCIsImluYm94IiwiaG9yaXpvbnRhbC1iYXItY2hhcnQiLCJoaXN0b3J5IiwiaGVhdGluZy1jb29saW5nIiwiZ2FudHQtYmFycyIsImZ1dHVyZSIsImZyaWRnZSIsImZhbGxiYWNrIiwiZXhwZW5zZS1yZXBvcnQiLCJleGNlbC1hdHRhY2htZW50IiwiZW5lcmd5LXNhdmluZy1saWdodGJ1bGIiLCJlbXBsb3llZSIsImVtYWlsIiwiZWRpdCIsImR1cGxpY2F0ZSIsImRvd25sb2FkIiwiZG9jLWF0dGFjaG1lbnQiLCJkaXNod2FzaGVyIiwiZGVsZXRlIiwiZGVjbGluZSIsImNvbXBsZXRlIiwiY29tcGV0aXRvciIsImNvbGxlY3Rpb25zLW1hbmFnZW1lbnQiLCJjaGFsa2JvYXJkIiwiY2FydCIsImNhcmQiLCJjYW1lcmEiLCJjYWxlbmRhciIsImJlZ2luIiwiYmFza2V0IiwiYmFyLWNoYXJ0IiwiYXR0YWNobWVudCIsImFycm93LXRvcCIsImFycm93LXJpZ2h0IiwiYXJyb3ctbGVmdCIsImFycm93LWJvdHRvbSIsImFwcHJvdmFscyIsImFwcG9pbnRtZW50IiwiYWxwaGFiZXRpY2FsLW9yZGVyIiwiYWxvbmctc3RhY2tlZC1jaGFydCIsImFsZXJ0IiwiYWRkcmVzc2VzIiwiYWRkcmVzcy1ib29rIiwiYWRkLWZpbHRlciIsImFkZC1mYXZvcml0ZSIsImFkZCIsImFjdGl2aXRpZXMiLCJhY3Rpb24iLCJhY2NlcHQiLCJoaW50IiwiZ3JvdXAiLCJjaGVjay1hdmFpbGFiaWxpdHkiLCJ3ZWF0aGVyLXByb29maW5nIiwicGF5bWVudC1hcHByb3ZhbCIsImJhdGNoLXBheW1lbnRzIiwiYmVkIiwiYXJvYmFzZSIsImZhbWlseS1jYXJlIiwiZmF2b3JpdGUiLCJuYXZpZ2F0aW9uLXJpZ2h0LWFycm93IiwibmF2aWdhdGlvbi1sZWZ0LWFycm93IiwiZS1jYXJlIiwibGVzcyIsImxhdGVuZXNzIiwibGFiIiwiaW50ZXJuZXQtYnJvd3NlciIsImluc3RhbmNlIiwiaW5zcGVjdGlvbiIsImltYWdlLXZpZXdlciIsImhvbWUiLCJncmlkIiwiZ29hbHNlZWsiLCJnZW5lcmFsLWxlYXZlLXJlcXVlc3QiLCJjcmVhdGUtbGVhdmUtcmVxdWVzdCIsImZsaWdodCIsImZpbHRlciIsImZhdm9yaXRlLWxpc3QiLCJmYWN0b3J5IiwiZW5kb3Njb3B5IiwiZW1wbG95ZWUtcGFuZSIsImVtcGxveWVlLWFwcHJvdmFscyIsImVtYWlsLXJlYWQiLCJlbGVjdHJvY2FyZGlvZ3JhbSIsImRvY3VtZW50cyIsImRlY2lzaW9uIiwiZGF0YWJhc2UiLCJjdXN0b21lci1oaXN0b3J5IiwiY3VzdG9tZXIiLCJjcmVkaXQtY2FyZCIsImNyZWF0ZS1lbnRyeS10aW1lIiwiY29udGFjdHMiLCJjb21wYXJlIiwiY2xpbmljYWwtb3JkZXIiLCJjaGFpbi1saW5rIiwicHVsbC1kb3duIiwiY2FyZ28tdHJhaW4iLCJjYXItcmVudGFsIiwiYnVzaW5lc3MtY2FyZCIsImJhci1jb2RlIiwiZm9sZGVyLWJsYW5rIiwicGFzc2VuZ2VyLXRyYWluIiwicXVlc3Rpb24tbWFyayIsIndvcmxkIiwiaXBob25lIiwiaXBhZCIsIndhcm5pbmciLCJzb3J0IiwiY291cnNlLWJvb2siLCJjb3Vyc2UtcHJvZ3JhbSIsImFkZC1jb3Vyc2Vib29rIiwicHJpbnQiLCJzYXZlIiwicGxheSIsInBhdXNlIiwicmVjb3JkIiwicmVzcG9uc2UiLCJwdXNocGluLW9uIiwicHVzaHBpbi1vZmYiLCJ1bmZhdm9yaXRlIiwibGVhcm5pbmctYXNzaXN0YW50IiwidGltZXNoZWV0IiwidGltZS1lbnRyeS1yZXF1ZXN0IiwibGlzdCIsImFjdGlvbi1zZXR0aW5ncyIsInNoYXJlIiwiZmVlZCIsInJvbGUiLCJmbGFnIiwicG9zdCIsImluc3BlY3QiLCJpbnNwZWN0LWRvd24iLCJhcHBvaW50bWVudC0yIiwidGFyZ2V0LWdyb3VwIiwibWFya2V0aW5nLWNhbXBhaWduIiwibm90aWZpY2F0aW9uIiwiY29tbWVudCIsInNoaXBwaW5nLXN0YXR1cyIsImNvbGxhYm9yYXRlIiwic2hvcnRjdXQiLCJsZWFkLW91dGRhdGVkIiwidG9vbHMtb3Bwb3J0dW5pdHkiLCJwZXJtaXNzaW9uIiwic3VwcGxpZXIiLCJ0YWJsZS12aWV3IiwidGFibGUtY2hhcnQiLCJzd2l0Y2gtdmlld3MiLCJlLWxlYXJuaW5nIiwibWFuYWdlciIsInN3aXRjaC1jbGFzc2VzIiwic2ltcGxlLXBheW1lbnQiLCJzaWduYXR1cmUiLCJzYWxlcy1vcmRlci1pdGVtIiwic2FsZXMtb3JkZXIiLCJyZXF1ZXN0IiwicmVjZWlwdCIsInB1enpsZSIsInByb2Nlc3MiLCJwcml2YXRlIiwicG9wdXAtd2luZG93IiwicGVyc29uLXBsYWNlaG9sZGVyIiwicGVyLWRpZW0iLCJwYXBlci1wbGFuZSIsInBhaWQtbGVhdmUiLCJwZGYtcmVhZGVyIiwib3ZlcnZpZXctY2hhcnQiLCJvdmVybGF5Iiwib3JnLWNoYXJ0IiwibnVtYmVyLXNpZ24iLCJub3RpZmljYXRpb24tMiIsIm15LXNhbGVzLW9yZGVyIiwibWVhbCIsImxvYW4iLCJvcmRlci1zdGF0dXMiLCJjdXN0b21lci1vcmRlci1lbnRyeSIsInBlcmZvcm1hbmNlIiwibWVudSIsImVtcGxveWVlLWxvb2t1cCIsImVkdWNhdGlvbiIsImN1c3RvbWVyLWJyaWVmaW5nIiwiY3VzdG9tZXItYW5kLWNvbnRhY3RzIiwibXktdmlldyIsImFjY2VsZXJhdGVkIiwidG8tYmUtcmV2aWV3ZWQiLCJ3YXJuaW5nMiIsImZlZWRlci1hcnJvdyIsInF1YWxpdHktaXNzdWUiLCJ3b3JrZmxvdy10YXNrcyIsImNyZWF0ZSIsImhvbWUtc2hhcmUiLCJnbG9iZSIsInRhZ3MiLCJ3b3JrLWhpc3RvcnkiLCJ4LXJheSIsIndvdW5kcy1kb2MiLCJ3ZWItY2FtIiwid2FpdmVyIiwidmVydGljYWwtYmFyLWNoYXJ0IiwidXBzdGFja2VkLWNoYXJ0IiwidHJpcC1yZXBvcnQiLCJtaWNyb3Bob25lIiwidW5wYWlkLWxlYXZlIiwidHJlZSIsInRvYXN0ZXItdXAiLCJ0b2FzdGVyLXRvcCIsInRvYXN0ZXItZG93biIsInRpbWUtYWNjb3VudCIsInRoZWF0ZXIiLCJ0YXhpIiwic3Vid2F5LXRyYWluIiwic3R1ZHktbGVhdmUiLCJzdGV0aG9zY29wZSIsInN0ZXAiLCJzb25vZ3JhcGh5Iiwic29jY29yIiwicGh5c2ljYWwtYWN0aXZpdHkiLCJwaGFybWFjeSIsIm9mZmljaWFsLXNlcnZpY2UiLCJvZmZzaXRlLXdvcmsiLCJudXRyaXRpb24tYWN0aXZpdHkiLCJuZXdzcGFwZXIiLCJtb25pdG9yLXBheW1lbnRzIiwibWFwLTIiLCJtYWNoaW5lIiwibXJpLXNjYW4iLCJlbmQtdXNlci1leHBlcmllbmNlLW1vbml0b3JpbmciLCJ1bndpcmVkIiwiY3VzdG9tZXItZmluYW5jaWFsLWZhY3Qtc2hlZXQiLCJyZXRhaWwtc3RvcmUtbWFuYWdlciIsIk5ldHdlYXZlci1idXNpbmVzcy1jbGllbnQiLCJlbGVjdHJvbmljLW1lZGljYWwtcmVjb3JkIiwiZWFtLXdvcmstb3JkZXIiLCJjdXN0b21lci12aWV3IiwiY3JtLXNlcnZpY2UtbWFuYWdlciIsImNybS1zYWxlcyIsIndpZGdldHMiLCJjb21taXNzaW9uLWNoZWNrIiwiY29sbGVjdGlvbnMtaW5zaWdodCIsImNsaW5pY2FsLXRhc3QtdHJhY2tlciIsImNpdGl6ZW4tY29ubmVjdCIsImNhcnQtYXBwcm92YWwiLCJjYXBpdGFsLXByb2plY3RzIiwiYm8tc3RyYXRlZ3ktbWFuYWdlbWVudCIsImJ1c2luZXNzLW9iamVjdHMtbW9iaWxlIiwiYnVzaW5lc3Mtb2JqZWN0cy1leHBsb3JlciIsImJ1c2luZXNzLW9iamVjdHMtZXhwZXJpZW5jZSIsImJieWQtZGFzaGJvYXJkIiwiYmJ5ZC1hY3RpdmUtc2FsZXMiLCJidXNpbmVzcy1ieS1kZXNpZ24iLCJidXNpbmVzcy1vbmUiLCJzYXAtYm94IiwibWFuYWdlci1pbnNpZ2h0IiwiYWNjb3VudGluZy1kb2N1bWVudC12ZXJpZmljYXRpb24iLCJoci1hcHByb3ZhbCIsImlkZWEtd2FsbCIsIkNoYXJ0LVRyZWUtTWFwIiwiY2FydC01IiwiY2FydC00Iiwid2FsbGV0IiwidmVoaWNsZS1yZXBhaXIiLCJ1cGxvYWQiLCJ1bmxvY2tlZCIsInVtYnJlbGxhIiwidHJhdmVsLXJlcXVlc3QiLCJ0cmF2ZWwtZXhwZW5zZS1yZXBvcnQiLCJ0cmF2ZWwtaXRpbmVyYXJ5IiwidGltZS1vdmVydGltZSIsInRoaW5nLXR5cGUiLCJ0ZWNobmljYWwtb2JqZWN0IiwidGFnIiwic3lyaW5nZSIsInN5bnRheCIsInN1aXRjYXNlIiwic2ltdWxhdGUiLCJzaGllbGQiLCJzaGFyZS0yIiwic2FsZXMtcXVvdGUiLCJyZXBvc3QiLCJwcm92aXNpb24iLCJwcm9qZWN0b3IiLCJhZGQtcHJvZHVjdCIsInBpcGVsaW5lLWFuYWx5c2lzIiwiYWRkLXBob3RvIiwicGFsZXR0ZSIsIm51cnNlIiwic2FsZXMtbm90aWZpY2F0aW9uIiwibWlsZWFnZSIsIm1lZXRpbmctcm9vbSIsIm1lZGlhLWZvcndhcmQiLCJtZWRpYS1wbGF5IiwibWVkaWEtcGF1c2UiLCJtZWRpYS1yZXZlcnNlIiwibWVkaWEtcmV3aW5kIiwibWVhc3VyZW1lbnQtZG9jdW1lbnQiLCJtZWFzdXJpbmctcG9pbnQiLCJtZWFzdXJlIiwibWFwLTMiLCJsb2NrZWQiLCJsZXR0ZXIiLCJqb3VybmV5LWFycml2ZSIsImpvdXJuZXktY2hhbmdlIiwiam91cm5leS1kZXBhcnQiLCJpdC1zeXN0ZW0iLCJpdC1pbnN0YW5jZSIsIml0LWhvc3QiLCJpcGhvbmUtMiIsImlwYWQtMiIsImludmVudG9yeSIsImluc3VyYW5jZS1ob3VzZSIsImluc3VyYW5jZS1saWZlIiwiaW5zdXJhbmNlLWNhciIsImluaXRpYXRpdmUiLCJpbmNpZGVudCIsImdyb3VwLTIiLCJnb2FsIiwiZnVuY3Rpb25hbC1sb2NhdGlvbiIsImZ1bGwtc2NyZWVuIiwiZm9ybSIsImZvYi13YXRjaCIsImJsYW5rLXRhZyIsImZhbWlseS1wcm90ZWN0aW9uIiwiZm9sZGVyIiwiZmF4LW1hY2hpbmUiLCJleGFtcGxlIiwiZXJhc2VyIiwiZW1wbG95ZWUtcmVqZWN0aW9ucyIsImRyb3AtZG93bi1saXN0IiwiZHJhdy1yZWN0YW5nbGUiLCJkb2N1bWVudCIsImRvY3RvciIsImRpc2N1c3Npb24tMiIsImRpc2N1c3Npb24iLCJkaW1lbnNpb24iLCJjdXN0b21lci1hbmQtc3VwcGxpZXIiLCJjcm9wIiwiYWRkLWNvbnRhY3QiLCJjb21wYXJlLTIiLCJjb2xvci1maWxsIiwiY29sbGlzaW9uIiwiY3VycmljdWx1bSIsImNoYXJ0LWF4aXMiLCJmdWxsLXN0YWNrZWQtY2hhcnQiLCJmdWxsLXN0YWNrZWQtY29sdW1uLWNoYXJ0IiwidmVydGljYWwtYmFyLWNoYXJ0LTIiLCJob3Jpem9udGFsLWJhci1jaGFydC0yIiwiaG9yaXpvbnRhbC1zdGFja2VkLWNoYXJ0IiwidmVydGljYWwtc3RhY2tlZC1jaGFydCIsImNob3JvcGxldGgtY2hhcnQiLCJnZW9ncmFwaGljLWJ1YmJsZS1jaGFydCIsIm11bHRpcGxlLXJhZGFyLWNoYXJ0IiwicmFkYXItY2hhcnQiLCJjcm9zc2VkLWxpbmUtY2hhcnQiLCJtdWx0aXBsZS1saW5lLWNoYXJ0IiwibXVsdGlwbGUtYmFyLWNoYXJ0IiwibGluZS1jaGFydCIsImxpbmUtY2hhcnQtZHVhbC1heGlzIiwiYnViYmxlLWNoYXJ0Iiwic2NhdHRlci1jaGFydCIsIm11bHRpcGxlLXBpZS1jaGFydCIsImNvbHVtbi1jaGFydC1kdWFsLWF4aXMiLCJ0YWctY2xvdWQtY2hhcnQiLCJhcmVhLWNoYXJ0IiwiY2F1c2UiLCJjYXJ0LTMiLCJjYXJ0LTIiLCJidXMtcHVibGljLXRyYW5zcG9ydCIsImJ1cmdsYXJ5IiwiYnVpbGRpbmciLCJib3JkZXIiLCJib29rbWFyayIsImJhZGdlIiwiYXR0YWNobWVudC1hdWRpbyIsImF0dGFjaG1lbnQtdmlkZW8iLCJhdHRhY2htZW50LWh0bWwiLCJhdHRhY2htZW50LXBob3RvIiwiYXR0YWNobWVudC1lLXB1YiIsImF0dGFjaG1lbnQtemlwLWZpbGUiLCJhdHRhY2htZW50LXRleHQtZmlsZSIsImFkZC1lcXVpcG1lbnQiLCJhZGQtYWN0aXZpdHkiLCJhY3Rpdml0eS1pbmRpdmlkdWFsIiwiYWN0aXZpdHktMiIsImFkZC1hY3Rpdml0eS0yIiwiYWN0aXZpdHktaXRlbXMiLCJhY3Rpdml0eS1hc3NpZ25lZC10by1nb2FsIiwic3RhdHVzLWNvbXBsZXRlZCIsInN0YXR1cy1lcnJvciIsInN0YXR1cy1pbmFjdGl2ZSIsInN0YXR1cy1pbi1wcm9jZXNzIiwiYmxhbmstdGFnLTIiLCJjYXJ0LWZ1bGwiLCJsb2NhdGUtbWUiLCJwYWdpbmciLCJjb21wYW55LXZpZXciLCJkb2N1bWVudC10ZXh0IiwiZXhwbG9yZXIiLCJwZXJzb25uZWwtdmlldyIsInNvcnRpbmctcmFua2luZyIsImRyaWxsLWRvd24iLCJkcmlsbC11cCIsInZkcy1maWxlIiwic2FwLWxvZ28tc2hhcGUiLCJmb2xkZXItZnVsbCIsInN5c3RlbS1leGl0Iiwic3lzdGVtLWV4aXQtMiIsImNsb3NlLWNvbW1hbmQtZmllbGQiLCJvcGVuLWNvbW1hbmQtZmllbGQiLCJzeXMtZW50ZXItMiIsInN5cy1lbnRlciIsInN5cy1oZWxwLTIiLCJzeXMtaGVscCIsInN5cy1iYWNrIiwic3lzLWJhY2stMiIsInN5cy1jYW5jZWwiLCJzeXMtY2FuY2VsLTIiLCJvcGVuLWZvbGRlciIsInN5cy1maW5kLW5leHQiLCJzeXMtZmluZCIsInN5cy1tb25pdG9yIiwic3lzLXByZXYtcGFnZSIsInN5cy1maXJzdC1wYWdlIiwic3lzLW5leHQtcGFnZSIsInN5cy1sYXN0LXBhZ2UiLCJnZW5lcmF0ZS1zaG9ydGN1dCIsImNyZWF0ZS1zZXNzaW9uIiwiZGlzcGxheS1tb3JlIiwiZW50ZXItbW9yZSIsInpvb20taW4iLCJ6b29tLW91dCIsImhlYWRlciIsImRldGFpbC12aWV3IiwiY29sbGFwc2UiLCJleHBhbmQiLCJwb3NpdGl2ZSIsIm5lZ2F0aXZlIiwiZGlzcGxheSIsIm1lbnUyIiwicmVkbyIsInVuZG8iLCJuYXZpZ2F0aW9uLXVwLWFycm93IiwibmF2aWdhdGlvbi1kb3duLWFycm93IiwiZG93biIsInVwIiwic2hlbGYiLCJiYWNrZ3JvdW5kIiwicmVzaXplIiwibW92ZSIsInNob3ciLCJoaWRlIiwibmF2LWJhY2siLCJlcnJvciIsInNsaW0tYXJyb3ctcmlnaHQiLCJzbGltLWFycm93LWxlZnQiLCJzbGltLWFycm93LWRvd24iLCJzbGltLWFycm93LXVwIiwiZm9yd2FyZCIsIm92ZXJmbG93IiwidmFsdWUtaGVscCIsIm11bHRpLXNlbGVjdCIsImV4aXQtZnVsbC1zY3JlZW4iLCJzeXMtYWRkIiwic3lzLW1pbnVzIiwiZHJvcGRvd24iLCJleHBhbmQtZ3JvdXAiLCJjb2xsYXBzZS1ncm91cCIsInZlcnRpY2FsLWdyaXAiLCJob3Jpem9udGFsLWdyaXAiLCJzb3J0LWRlc2NlbmRpbmciLCJzb3J0LWFzY2VuZGluZyJdO3ZhciBhPVsiZTAwMCIsImUwMDEiLCJlMDAyIiwiZTAwMyIsImUwMDQiLCJlMDA1IiwiZTAwNiIsImUwMDciLCJlMDA4IiwiZTAwOSIsImUwMGEiLCJlMDBiIiwiZTAwYyIsImUwMGQiLCJlMDBlIiwiZTAwZiIsImUwMTAiLCJlMDExIiwiZTAxMiIsImUwMTMiLCJlMDE0IiwiZTAxNSIsImUwMTYiLCJlMDE3IiwiZTAxOCIsImUwMTkiLCJlMDFhIiwiZTAxYiIsImUwMWMiLCJlMDFkIiwiZTAxZSIsImUwMWYiLCJlMDIwIiwiZTAyMSIsImUwMjIiLCJlMDIzIiwiZTAyNCIsImUwMjUiLCJlMDI2IiwiZTAyNyIsImUwMjgiLCJlMDI5IiwiZTAyYSIsImUwMmIiLCJlMDJjIiwiZTAyZCIsImUwMmUiLCJlMDJmIiwiZTAzMCIsImUwMzEiLCJlMDMyIiwiZTAzMyIsImUwMzQiLCJlMDM1IiwiZTAzNiIsImUwMzciLCJlMDM4IiwiZTAzOSIsImUwM2EiLCJlMDNiIiwiZTAzYyIsImUwM2QiLCJlMDNlIiwiZTAzZiIsImUwNDAiLCJlMDQxIiwiZTA0MiIsImUwNDMiLCJlMDQ0IiwiZTA0NSIsImUwNDYiLCJlMDQ3IiwiZTA0OCIsImUwNDkiLCJlMDRhIiwiZTA0YiIsImUwNGMiLCJlMDRkIiwiZTA0ZSIsImUwNGYiLCJlMDUwIiwiZTA1MSIsImUwNTIiLCJlMDUzIiwiZTA1NCIsImUwNTUiLCJlMDU2IiwiZTA1NyIsImUwNTgiLCJlMDU5IiwiZTA1YSIsImUwNWIiLCJlMDVjIiwiZTA1ZCIsImUwNWUiLCJlMDVmIiwiZTA2MCIsImUwNjEiLCJlMDYyIiwiZTA2MyIsImUwNjQiLCJlMDY1IiwiZTA2NiIsImUwNjciLCJlMDY4IiwiZTA2OSIsImUwNmEiLCJlMDZiIiwiZTA2YyIsImUwNmQiLCJlMDZlIiwiZTA2ZiIsImUwNzAiLCJlMDcxIiwiZTA3MiIsImUwNzMiLCJlMDc0IiwiZTA3NSIsImUwNzYiLCJlMDc3IiwiZTA3OCIsImUwNzkiLCJlMDdhIiwiZTA3YiIsImUwN2MiLCJlMDdkIiwiZTA3ZSIsImUwN2YiLCJlMDgwIiwiZTA4MSIsImUwODIiLCJlMDgzIiwiZTA4NCIsImUwODUiLCJlMDg2IiwiZTA4NyIsImUwODgiLCJlMDg5IiwiZTA4YSIsImUwOGIiLCJlMDhjIiwiZTA4ZCIsImUwOGUiLCJlMDhmIiwiZTA5MCIsImUwOTEiLCJlMDkyIiwiZTA5MyIsImUwOTQiLCJlMDk1IiwiZTA5NiIsImUwOTciLCJlMDk4IiwiZTA5OSIsImUwOWEiLCJlMDliIiwiZTA5YyIsImUwOWQiLCJlMDllIiwiZTA5ZiIsImUwYTAiLCJlMGExIiwiZTBhMiIsImUwYTMiLCJlMGE0IiwiZTBhNSIsImUwYTYiLCJlMGE3IiwiZTBhOCIsImUwYTkiLCJlMGFhIiwiZTBhYiIsImUwYWMiLCJlMGFkIiwiZTBhZSIsImUwYWYiLCJlMGIwIiwiZTBiMSIsImUwYjIiLCJlMGIzIiwiZTBiNCIsImUwYjUiLCJlMGI2IiwiZTBiNyIsImUwYjgiLCJlMGI5IiwiZTBiYSIsImUwYmIiLCJlMGJjIiwiZTBiZCIsImUwYmUiLCJlMGJmIiwiZTBjMCIsImUwYzEiLCJlMGMyIiwiZTBjMyIsImUwYzQiLCJlMGM1IiwiZTBjNiIsImUwYzciLCJlMGM4IiwiZTBjOSIsImUwY2EiLCJlMGNiIiwiZTBjYyIsImUwY2QiLCJlMGNlIiwiZTBjZiIsImUwZDAiLCJlMGQxIiwiZTBkMiIsImUwZDMiLCJlMGQ0IiwiZTBkNSIsImUwZDYiLCJlMGQ3IiwiZTBkOCIsImUwZDkiLCJlMGRhIiwiZTBkYiIsImUwZGMiLCJlMGRkIiwiZTBkZSIsImUwZGYiLCJlMGUwIiwiZTBlMSIsImUwZTIiLCJlMGUzIiwiZTBlNCIsImUwZTUiLCJlMGU2IiwiZTBlNyIsImUwZTgiLCJlMGU5IiwiZTBlYSIsImUwZWIiLCJlMGVjIiwiZTBlZCIsImUwZWUiLCJlMGVmIiwiZTBmMCIsImUwZjEiLCJlMGYyIiwiZTBmMyIsImUwZjQiLCJlMGY1IiwiZTBmNiIsImUwZjciLCJlMGY4IiwiZTBmOSIsImUwZmEiLCJlMGZiIiwiZTBmYyIsImUwZmQiLCJlMGZlIiwiZTBmZiIsImUxMDAiLCJlMTAxIiwiZTEwMiIsImUxMDMiLCJlMTA0IiwiZTEwNSIsImUxMDYiLCJlMTA3IiwiZTEwOCIsImUxMDkiLCJlMTBhIiwiZTEwYiIsImUxMGMiLCJlMTBkIiwiZTEwZSIsImUxMGYiLCJlMTEwIiwiZTExMSIsImUxMTIiLCJlMTEzIiwiZTExNCIsImUxMTUiLCJlMTE2IiwiZTExNyIsImUxMTgiLCJlMTE5IiwiZTExYSIsImUxMWIiLCJlMTFjIiwiZTExZCIsImUxMWUiLCJlMTFmIiwiZTEyMCIsImUxMjEiLCJlMTIyIiwiZTEyMyIsImUxMjQiLCJlMTI1IiwiZTEyNiIsImUxMjciLCJlMTI4IiwiZTEyOSIsImUxMmEiLCJlMTJiIiwiZTEyYyIsImUxMmQiLCJlMTJlIiwiZTEyZiIsImUxMzAiLCJlMTMxIiwiZTEzMiIsImUxMzMiLCJlMTM0IiwiZTEzNSIsImUxMzYiLCJlMTM3IiwiZTEzOCIsImUxMzkiLCJlMTNhIiwiZTEzYiIsImUxM2MiLCJlMTNkIiwiZTEzZSIsImUxM2YiLCJlMTQwIiwiZTE0MSIsImUxNDIiLCJlMTQzIiwiZTE0NCIsImUxNDUiLCJlMTQ2IiwiZTE0NyIsImUxNDgiLCJlMTQ5IiwiZTE0YSIsImUxNGIiLCJlMTRjIiwiZTE0ZCIsImUxNGUiLCJlMTRmIiwiZTE1MCIsImUxNTEiLCJlMTUyIiwiZTE1MyIsImUxNTQiLCJlMTU1IiwiZTE1NiIsImUxNTciLCJlMTU4IiwiZTE1OSIsImUxNWEiLCJlMTViIiwiZTE1YyIsImUxNWQiLCJlMTVlIiwiZTE1ZiIsImUxNjAiLCJlMTYxIiwiZTE2MiIsImUxNjMiLCJlMTY0IiwiZTE2NSIsImUxNjYiLCJlMTY3IiwiZTE2OCIsImUxNjkiLCJlMTZhIiwiZTE2YiIsImUxNmMiLCJlMTZkIiwiZTE2ZSIsImUxNmYiLCJlMTcwIiwiZTE3MSIsImUxNzIiLCJlMTczIiwiZTE3NCIsImUxNzUiLCJlMTc2IiwiZTE3NyIsImUxNzgiLCJlMTc5IiwiZTE3YSIsImUxN2IiLCJlMTdjIiwiZTE3ZCIsImUxN2UiLCJlMTdmIiwiZTE4MCIsImUxODEiLCJlMTgyIiwiZTE4MyIsImUxODQiLCJlMTg1IiwiZTE4NiIsImUxODciLCJlMTg4IiwiZTE4OSIsImUxOGEiLCJlMThiIiwiZTE4YyIsImUxOGQiLCJlMThlIiwiZTE4ZiIsImUxOTAiLCJlMTkxIiwiZTE5MiIsImUxOTMiLCJlMTk0IiwiZTE5NSIsImUxOTYiLCJlMTk3IiwiZTE5OCIsImUxOTkiLCJlMTlhIiwiZTE5YiIsImUxOWMiLCJlMTlkIiwiZTE5ZSIsImUxOWYiLCJlMWEwIiwiZTFhMSIsImUxYTIiLCJlMWEzIiwiZTFhNCIsImUxYTUiLCJlMWE2IiwiZTFhNyIsImUxYTgiLCJlMWE5IiwiZTFhYSIsImUxYWIiLCJlMWFjIiwiZTFhZCIsImUxYWUiLCJlMWFmIiwiZTFiMCIsImUxYjEiLCJlMWIyIiwiZTFiMyIsImUxYjQiLCJlMWI1IiwiZTFiNiIsImUxYjciLCJlMWI4IiwiZTFiOSIsImUxYmEiLCJlMWJiIiwiZTFiYyIsImUxYmQiLCJlMWJlIiwiZTFiZiIsImUxYzAiLCJlMWMxIiwiZTFjMiIsImUxYzMiLCJlMWM0IiwiZTFjNSIsImUxYzYiLCJlMWM3IiwiZTFjOCIsImUxYzkiLCJlMWNhIiwiZTFjYiIsImUxY2MiLCJlMWNkIiwiZTFjZSIsImUxY2YiLCJlMWQwIiwiZTFkMSIsImUxZDIiLCJlMWQzIiwiZTFkNCIsImUxZDUiLCJlMWQ2IiwiZTFkNyIsImUxZDgiLCJlMWQ5IiwiZTFkYSIsImUxZGIiLCJlMWRjIiwiZTFkZCIsImUxZGUiLCJlMWRmIiwiZTFlMCIsImUxZTEiLCJlMWUyIiwiZTFlMyIsImUxZTQiLCJlMWU1IiwiZTFlNiIsImUxZTciLCJlMWU4IiwiZTFlOSIsImUxZWEiLCJlMWViIiwiZTFlYyIsImUxZWQiLCJlMWVlIiwiZTFlZiIsImUxZjAiLCJlMWYxIiwiZTFmMiIsImUxZjMiLCJlMWY0IiwiZTFmNSIsImUxZjYiLCJlMWY3IiwiZTFmOCIsImUxZjkiLCJlMjAwIiwiZTFmYSIsImUxZmIiLCJlMWZjIiwiZTFmZCJdO3ZhciBtPXsiY2hhbGtib2FyZCI6dHJ1ZSwiY2FsZW5kYXIiOnRydWUsImFscGhhYmV0aWNhbC1vcmRlciI6dHJ1ZSwiYWRkcmVzcy1ib29rIjp0cnVlLCJoaW50Ijp0cnVlLCJwYXltZW50LWFwcHJvdmFsIjp0cnVlLCJiYXRjaC1wYXltZW50cyI6dHJ1ZSwiYXJvYmFzZSI6dHJ1ZSwicXVlc3Rpb24tbWFyayI6dHJ1ZSwibGVhZCI6dHJ1ZSwibGVhZC1vdXRkYXRlZCI6dHJ1ZSwic2ltcGxlLXBheW1lbnQiOnRydWUsInNhbGVzLW9yZGVyLWl0ZW0iOnRydWUsInNhbGVzLW9yZGVyIjp0cnVlLCJwZXItZGllbSI6dHJ1ZSwicGFpZC1sZWF2ZSI6dHJ1ZSwicGRmLXJlYWRlciI6dHJ1ZSwibXktc2FsZXMtb3JkZXIiOnRydWUsImxvYW4iOnRydWUsImdsb2JlIjp0cnVlLCJ3YWl2ZXIiOnRydWUsInVucGFpZC1sZWF2ZSI6dHJ1ZSwiY3VzdG9tZXItZmluYW5jaWFsLWZhY3Qtc2hlZXQiOnRydWUsImNybS1zYWxlcyI6dHJ1ZSwiY29tbWlzc2lvbi1jaGVjayI6dHJ1ZSwiY29sbGVjdGlvbnMtaW5zaWdodCI6dHJ1ZSwiY2FwaXRhbC1wcm9qZWN0cyI6dHJ1ZSwiYnVzaW5lc3Mtb25lIjp0cnVlLCJ0cmF2ZWwtZXhwZW5zZSI6dHJ1ZSwidHJhdmVsLWV4cGVuc2UtcmVwb3J0Ijp0cnVlLCJ0cmF2ZWwtcmVxdWVzdCI6dHJ1ZSwidGltZS1vdmVydGltZSI6dHJ1ZSwic2FsZXMtcXVvdGUiOnRydWUsInNhbGVzLW5vdGlmaWNhdGlvbiI6dHJ1ZSwiaW5jaWRlbnQiOnRydWUsIm1vbmV5LWJpbGxzIjp0cnVlLCJzYWxlcy1kb2N1bWVudCI6dHJ1ZSwib3Bwb3J0dW5pdGllcyI6dHJ1ZSwiZXhwZW5zZS1yZXBvcnQiOnRydWUsIm1vbml0b3ItcGF5bWVudHMiOnRydWUsIndpZGdldHMiOnRydWUsInN5cy1oZWxwLTIiOnRydWUsInN5cy1oZWxwIjp0cnVlLCJhY2NlcHQiOnRydWUsImFjY291bnRpbmctZG9jdW1lbnQtdmVyaWZpY2F0aW9uIjp0cnVlLCJhY3Rpdml0aWVzIjp0cnVlLCJhY3Rpdml0eS0yIjp0cnVlLCJhZGQtYWN0aXZpdHkiOnRydWUsImFkZC1hY3Rpdml0eS0yIjp0cnVlLCJhcHByb3ZhbHMiOnRydWUsImJieWQtYWN0aXZlLXNhbGVzIjp0cnVlLCJidXNpbmVzcy1ieS1kZXNpZ24iOnRydWUsImNhcnQtYXBwcm92YWwiOnRydWUsImNvbXBsZXRlIjp0cnVlLCJjdXN0b21lci1vcmRlci1lbnRyeSI6dHJ1ZSwiZW1wbG95ZWUtYXBwcm92YWxzIjp0cnVlLCJoci1hcHByb3ZhbCI6dHJ1ZSwia3BpLWNvcnBvcmF0ZS1wZXJmb3JtYW5jZSI6dHJ1ZSwia3BpLW1hbmFnaW5nLW15LWFyZWEiOnRydWUsInN1cnZleSI6dHJ1ZSwic3lzLWVudGVyIjp0cnVlLCJzeXMtZW50ZXItMiI6dHJ1ZSwidGFzayI6dHJ1ZX07dmFyIHM9IlNBUC1pY29ucyI7dmFyIHA9InNhcC1pY29uIjt2YXIgcj17fTt2YXIgZj1mYWxzZTt2YXIgYj1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigpfTtiLmNyZWF0ZUNvbnRyb2xCeVVSST1mdW5jdGlvbihjLGQpe2lmKHR5cGVvZiBjPT09InN0cmluZyIpe2M9e3NyYzpjfX1pZihjJiZjLnNyYyl7dmFyIFM9Yy5zcmMsQz1kO2lmKGIuaXNJY29uVVJJKFMpKXtpZighc2FwLnVpLmNvcmUuSWNvbil7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuSWNvbiIpfUM9c2FwLnVpLmNvcmUuSWNvbjtpZihjLnRhcCl7Yy5wcmVzcz1jLnRhcDtkZWxldGUgYy50YXB9fWlmKHR5cGVvZiBDPT09ImZ1bmN0aW9uIil7cmV0dXJuIG5ldyBDKGMpfX19O2IuYWRkSWNvbj1mdW5jdGlvbihpLGMsZCl7aWYodHlwZW9mIGQ9PT0ic3RyaW5nIil7ZD17Zm9udEZhbWlseTphcmd1bWVudHNbMl0sY29udGVudDphcmd1bWVudHNbM10sb3ZlcldyaXRlOiEhYXJndW1lbnRzWzRdLHN1cHByZXNzTWlycm9yaW5nOiEhYXJndW1lbnRzWzVdfX1pZighcltjXSl7cltjXT17fX12YXIgZT1yW2NdLGcsbz1lW2ldLGg7aWYobyYmKGM9PT11bmRlZmluZWR8fCFkLm92ZXJXcml0ZSkpe3Euc2FwLmxvZy53YXJuaW5nKCJpY29uIHdpdGggdGhlIHNhbWUgaWNvbk5hbWUgaW4gdGhlIGNvbGxlY3Rpb24gYWxyZWFkeSBleGlzdHMsIHNwZWNpZnkgdGhlIGxhc3QgcGFyYW1ldGVyIHRvIHRydWUgaW4gb3JkZXIgdG8gb3ZlcndyaXRlIik7cmV0dXJufWg9e3Byb3RvY29sOnAsaG9zdG5hbWU6Y3x8aSxwYXRoOmM/aTp1bmRlZmluZWR9O2c9e25hbWU6aSxjb2xsZWN0aW9uOmMsdXJpOndpbmRvdy5VUkkuYnVpbGQoaCksZm9udEZhbWlseTpkLmZvbnRGYW1pbHksY29udGVudDpTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGQuY29udGVudCwxNikpLHN1cHByZXNzTWlycm9yaW5nOmQuc3VwcHJlc3NNaXJyb3Jpbmcsc2tpcE1pcnJvcmluZzpkLnN1cHByZXNzTWlycm9yaW5nfTtlW2ldPWc7cmV0dXJuIGd9O2IuZ2V0SWNvblVSST1mdW5jdGlvbihpLGMpe3ZhciBkPXJbY107aWYoZCYmZFtpXSl7cmV0dXJuIGRbaV0udXJpfX07Yi5nZXRJY29uSW5mbz1mdW5jdGlvbihpLGMpe2IuaW5zZXJ0Rm9udEZhY2VTdHlsZSgpO3ZhciBQPWksZD1jLGUsZztpZih0aGlzLmlzSWNvblVSSShpKSl7ZT13aW5kb3cuVVJJLnBhcnNlKGkpO2lmKGUucGF0aC5sZW5ndGg9PT0xKXtQPWUuaG9zdG5hbWU7ZD11bmRlZmluZWR9ZWxzZXtkPWUuaG9zdG5hbWU7UD1lLnBhdGguc3Vic3RyKDEsZS5wYXRoLmxlbmd0aCl9fWc9cltkXTtyZXR1cm4gZyYmZ1tQXX07Yi5pc0ljb25VUkk9ZnVuY3Rpb24odSl7aWYoIXUpe3JldHVybiBmYWxzZX12YXIgYz13aW5kb3cuVVJJLnBhcnNlKHUpO3JldHVybihjLnByb3RvY29sPT09cCkmJiEhYy5ob3N0bmFtZX07Yi5nZXRJY29uQ29sbGVjdGlvbk5hbWVzPWZ1bmN0aW9uKCl7dmFyIG49W107cS5tYXAocixmdW5jdGlvbih2LGspe24ucHVzaChrKX0pO3JldHVybiBufTtiLmdldEljb25OYW1lcz1mdW5jdGlvbihjKXt2YXIgZD1yW2NdLG49W107cS5tYXAoZCxmdW5jdGlvbih2LGspe24ucHVzaChrKX0pO3JldHVybiBufTtiLmluc2VydEZvbnRGYWNlU3R5bGU9ZnVuY3Rpb24oKXtpZihmKXtyZXR1cm59dmFyIEY9cS5zYXAuZ2V0TW9kdWxlUGF0aCgic2FwLnVpLmNvcmUiLCcvJykrInRoZW1lcy9iYXNlL2ZvbnRzLyIsdyxjLGQsaTtpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248MTAmJndpbmRvdy5zZWxmIT09d2luZG93LnRvcCl7Rj1iLl9jYWxjQWJzUGF0aChGLHdpbmRvdy5sb2NhdGlvbi5ocmVmKX1kPSJAZm9udC1mYWNlIHsiKyJmb250LWZhbWlseTogJ1NBUC1pY29ucyc7Iisic3JjOiB1cmwoJyIrRisiU0FQLWljb25zLmVvdCcpOyIrInNyYzogdXJsKCciK0YrIlNBUC1pY29ucy5lb3Q/I2llZml4JykgZm9ybWF0KCdlbWJlZGRlZC1vcGVudHlwZScpLCIrInVybCgnIitGKyJTQVAtaWNvbnMudHRmJykgZm9ybWF0KCd0cnVldHlwZScpOyIrImZvbnQtd2VpZ2h0OiBub3JtYWw7IisiZm9udC1zdHlsZTogbm9ybWFsOyIrIn0iO3EoJ2hlYWQnKS5hcHBlbmQoJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+JytkKyc8L3N0eWxlPicpO2Y9dHJ1ZX07Yi5fY2FsY0Fic1BhdGg9ZnVuY3Rpb24oUixCKXtCPUImJkIucmVwbGFjZSgvXD8uKnwjLiovZywiIik7dmFyIHU9bmV3IHdpbmRvdy5VUkkoUiksQT11LmFic29sdXRlVG8oQik7cmV0dXJuIEEuaHJlZigpfTtiLl9pc01pcnJvcmluZ1NraXBwZWQ9ZnVuY3Rpb24oaSl7cmV0dXJuISFtW2ldfTtxLmVhY2goSSxmdW5jdGlvbihpLG4pe2IuYWRkSWNvbihuLHVuZGVmaW5lZCx7Zm9udEZhbWlseTpzLGNvbnRlbnQ6YVtpXSxzdXBwcmVzc01pcnJvcmluZzpiLl9pc01pcnJvcmluZ1NraXBwZWQobil9KX0pO3JldHVybiBifSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuSWNvblJlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuSWNvblJlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvSWNvblJlbmRlcmVyIixbImpxdWVyeS5zYXAuZ2xvYmFsIl0sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBJPXt9O0kucmVuZGVyPWZ1bmN0aW9uKHIsYyl7aWYoIWMuZ2V0VmlzaWJsZSgpKXtyZXR1cm59dmFyIGk9c2FwLnVpLmNvcmUuSWNvblBvb2wuZ2V0SWNvbkluZm8oYy5nZXRTcmMoKSksdz1jLmdldFdpZHRoKCksaD1jLmdldEhlaWdodCgpLEM9Yy5nZXRDb2xvcigpLGI9Yy5nZXRCYWNrZ3JvdW5kQ29sb3IoKSxzPWMuZ2V0U2l6ZSgpLHQ9Yy5nZXRUb29sdGlwX0FzU3RyaW5nKCksVD0oc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbjw5KTtyLndyaXRlKCI8c3BhbiIpO3Iud3JpdGVDb250cm9sRGF0YShjKTtpZighYy5nZXREZWNvcmF0aXZlKCkpe3Iud3JpdGVBdHRyaWJ1dGUoInRhYmluZGV4IiwwKX1pZih0KXtyLndyaXRlQXR0cmlidXRlRXNjYXBlZCgidGl0bGUiLHQpfWlmKGkpe2lmKCFUKXtyLndyaXRlQXR0cmlidXRlKCJkYXRhLXNhcC11aS1pY29uLWNvbnRlbnQiLGkuY29udGVudCl9ci5hZGRTdHlsZSgiZm9udC1mYW1pbHkiLCInIitpLmZvbnRGYW1pbHkrIiciKX1pZih3KXtyLmFkZFN0eWxlKCJ3aWR0aCIsdyl9aWYoaCl7ci5hZGRTdHlsZSgiaGVpZ2h0IixoKTtyLmFkZFN0eWxlKCJsaW5lLWhlaWdodCIsaCl9aWYoQyl7ci5hZGRTdHlsZSgiY29sb3IiLEMpfWlmKGIpe3IuYWRkU3R5bGUoImJhY2tncm91bmQtY29sb3IiLGIpfWlmKHMpe3IuYWRkU3R5bGUoImZvbnQtc2l6ZSIscyl9ci5hZGRDbGFzcygic2FwVWlJY29uIik7aWYoaSYmIWkuc3VwcHJlc3NNaXJyb3Jpbmcpe3IuYWRkQ2xhc3MoInNhcFVpSWNvbk1pcnJvckluUlRMIil9ci53cml0ZUNsYXNzZXMoKTtyLndyaXRlU3R5bGVzKCk7ci53cml0ZSgiPiIpO2lmKGkmJlQpe3Iud3JpdGUoaS5jb250ZW50KX1yLndyaXRlKCI8L3NwYW4+Iil9O3JldHVybiBJfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yUmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3JSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0xvY2FsQnVzeUluZGljYXRvclJlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBMPXt9OyhmdW5jdGlvbigpe0wucmVuZGVyPWZ1bmN0aW9uKFIsYyl7Ui53cml0ZSgiPGRpdiIpO1Iud3JpdGVDb250cm9sRGF0YShjKTtSLmFkZENsYXNzKCJzYXBVaUxvY2FsQnVzeUluZGljYXRvciIpO1Iud3JpdGVDbGFzc2VzKCk7Ui53cml0ZSgiPiIpO3IoUixjKTtSLndyaXRlKCI8L2Rpdj4iKX07dmFyIHI9ZnVuY3Rpb24oUixjKXt2YXIgST1jLmdldElkKCk7dmFyIHM9SSsiLWFuaW1hdGlvbiI7dmFyIGI9WyItbGVmdEJveCIsIi1taWRkbGVCb3giLCItcmlnaHRCb3giXTtSLndyaXRlKCc8ZGl2Jyk7Ui53cml0ZUF0dHJpYnV0ZSgnaWQnLHMpO1IuYWRkQ2xhc3MoInNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQW5pbWF0aW9uIik7Ui53cml0ZUNsYXNzZXMoKTtSLndyaXRlKCI+Iik7Zm9yKHZhciBpPTA7aTxiLmxlbmd0aDtpKyspe1Iud3JpdGUoJzxkaXYnKTtSLmFkZENsYXNzKCJzYXBVaUxvY2FsQnVzeUluZGljYXRvckJveCIpO1Iud3JpdGVDbGFzc2VzKCk7Ui53cml0ZUF0dHJpYnV0ZSgiaWQiLEkrYltpXSk7Ui53cml0ZSgiPiIpO1Iud3JpdGUoIjwvZGl2PiIpfVIud3JpdGUoIjwvZGl2PiIpfX0oKSk7cmV0dXJuIEx9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Mb2NhbGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Mb2NhbGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Mb2NhbGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT0vXigoPzpbQS1aXXsyLDN9KD86LVtBLVpdezN9KXswLDN9KXxbQS1aXXs0fXxbQS1aXXs1LDh9KSg/Oi0oW0EtWl17NH0pKT8oPzotKFtBLVpdezJ9fFswLTldezN9KSk/KC1bMC05QS1aXXs1LDh9fCg/OlswLTldWzAtOUEtWl17M30pKSooPzotKFswLTlBLVdZWl0oPzotWzAtOUEtWl17Miw4fSkrKSkqKD86LShYKD86LVswLTlBLVpdezEsOH0pKykpPyQvaTt2YXIgTD1CLmV4dGVuZCgic2FwLnVpLmNvcmUuTG9jYWxlIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obCl7Qi5hcHBseSh0aGlzKTt2YXIgcj1hLmV4ZWMobC5yZXBsYWNlKC9fL2csIi0iKSk7aWYocj09PW51bGwpe3Rocm93IlRoZSBnaXZlbiBsYW5ndWFnZSBkb2VzIG5vdCBhZGhlcmUgdG8gQkNQLTQ3LiJ9dGhpcy5zTG9jYWxlSWQ9bDt0aGlzLnNMYW5ndWFnZT1yWzFdfHxudWxsO3RoaXMuc1NjcmlwdD1yWzJdfHxudWxsO3RoaXMuc1JlZ2lvbj1yWzNdfHxudWxsO3RoaXMuc1ZhcmlhbnQ9KHJbNF0mJnJbNF0uc2xpY2UoMSkpfHxudWxsO3RoaXMuc0V4dGVuc2lvbj1yWzVdfHxudWxsO3RoaXMuc1ByaXZhdGVVc2U9cls2XXx8bnVsbDtpZih0aGlzLnNMYW5ndWFnZSl7dGhpcy5zTGFuZ3VhZ2U9dGhpcy5zTGFuZ3VhZ2UudG9Mb3dlckNhc2UoKX1pZih0aGlzLnNTY3JpcHQpe3RoaXMuc1NjcmlwdD10aGlzLnNTY3JpcHQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eW2Etel0vLGZ1bmN0aW9uKCQpe3JldHVybiAkLnRvVXBwZXJDYXNlKCl9KX1pZih0aGlzLnNSZWdpb24pe3RoaXMuc1JlZ2lvbj10aGlzLnNSZWdpb24udG9VcHBlckNhc2UoKX19LGdldExhbmd1YWdlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0xhbmd1YWdlfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zU2NyaXB0fSxnZXRSZWdpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zUmVnaW9ufSxnZXRWYXJpYW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1ZhcmlhbnR9LGdldFZhcmlhbnRTdWJ0YWdzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1ZhcmlhbnQ/dGhpcy5zVmFyaWFudC5zcGxpdCgnLScpOltdfSxnZXRFeHRlbnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zRXh0ZW5zaW9ufSxnZXRFeHRlbnNpb25TdWJ0YWdzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0V4dGVuc2lvbj90aGlzLnNFeHRlbnNpb24uc2xpY2UoMikuc3BsaXQoJy0nKTpbXX0sZ2V0UHJpdmF0ZVVzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNQcml2YXRlVXNlfSxnZXRQcml2YXRlVXNlU3VidGFnczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNQcml2YXRlVXNlP3RoaXMuc1ByaXZhdGVVc2Uuc2xpY2UoMikuc3BsaXQoJy0nKTpbXX0saGFzUHJpdmF0ZVVzZVN1YnRhZzpmdW5jdGlvbihzKXtyZXR1cm4gcS5pbkFycmF5KHMsdGhpcy5nZXRQcml2YXRlVXNlU3VidGFncygpKT49MH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgcj1bdGhpcy5zTGFuZ3VhZ2VdO2lmKHRoaXMuc1NjcmlwdCl7ci5wdXNoKHRoaXMuc1NjcmlwdCl9aWYodGhpcy5zUmVnaW9uKXtyLnB1c2godGhpcy5zUmVnaW9uKX1pZih0aGlzLnNWYXJpYW50KXtyLnB1c2godGhpcy5zVmFyaWFudCl9aWYodGhpcy5zRXh0ZW5zaW9uKXtyLnB1c2godGhpcy5zRXh0ZW5zaW9uKX1pZih0aGlzLnNQcml2YXRlVXNlKXtyLnB1c2godGhpcy5zUHJpdmF0ZVVzZSl9cmV0dXJuIHIuam9pbigiLSIpfSxnZXRTQVBMb2dvbkxhbmd1YWdlOmZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5zTGFuZ3VhZ2V8fCIiLG07aWYobC5pbmRleE9mKCItIik+PTApe2w9bC5zbGljZSgwLGwuaW5kZXhPZigiLSIpKX1sPU1bbF18fGw7aWYobD09PSJ6aCIpe2lmKHRoaXMuc1NjcmlwdD09PSJIYW50Inx8KCF0aGlzLnNTY3JpcHQmJnRoaXMuc1JlZ2lvbj09PSJUVyIpKXtsPSJ6ZiJ9fWlmKHRoaXMuc1ByaXZhdGVVc2UmJihtPS8tKHNhcHRyY3xzYXBwc2QpKD86LXwkKS9pLmV4ZWModGhpcy5zUHJpdmF0ZVVzZSkpKXtsPShtWzFdLnRvTG93ZXJDYXNlKCk9PT0ic2FwdHJjIik/IjFRIjoiMlEifXJldHVybiBsLnRvVXBwZXJDYXNlKCl9fSk7dmFyIE09eyJpdyI6ImhlIiwiamkiOiJ5aSIsImluIjoiaWQiLCJzaCI6InNyIn07dmFyIEE9ImFyLGZhLGhlIi5zcGxpdCgiLCIpO0wuX2ltcGxpZXNSVEw9ZnVuY3Rpb24obCl7dmFyIG89bmV3IEwobCk7bD1vLmdldExhbmd1YWdlKCl8fCIiO2w9KGwmJk1bbF0pfHxsO3ZhciByPW8uZ2V0UmVnaW9uKCl8fCIiO2lmKHImJnEuaW5BcnJheShsKyJfIityLEEpPj0wKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gcS5pbkFycmF5KGwsQSk+PTB9O3JldHVybiBMfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuUmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5SZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1JlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBSPXt9O1IuZXh0ZW5kPWZ1bmN0aW9uKHApe3ZhciBjPXtfc3VwZXI6cH07Zm9yKHZhciBmIGluIHApe2lmKHR5cGVvZihwW2ZdKT09ImZ1bmN0aW9uIil7Y1tmXT0oZnVuY3Rpb24oKXt2YXIgbT1mLHQ9YztyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5fc3VwZXJbbV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oKSl9fXJldHVybiBjfTtSLmdldFRleHRBbGlnbj1mdW5jdGlvbih0LFQpe3ZhciBzPSIiO3ZhciBjPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpO3N3aXRjaCh0KXtjYXNlIHNhcC51aS5jb3JlLlRleHRBbGlnbi5FbmQ6c3dpdGNoKFQpe2Nhc2UiTFRSIjpzPSJyaWdodCI7YnJlYWs7Y2FzZSJSVEwiOnM9ImxlZnQiO2JyZWFrO2RlZmF1bHQ6aWYoYy5nZXRSVEwoKSl7cz0ibGVmdCJ9ZWxzZXtzPSJyaWdodCJ9YnJlYWt9YnJlYWs7Y2FzZSBzYXAudWkuY29yZS5UZXh0QWxpZ24uQmVnaW46c3dpdGNoKFQpe2Nhc2UiTFRSIjpzPSJsZWZ0IjticmVhaztjYXNlIlJUTCI6cz0icmlnaHQiO2JyZWFrO2RlZmF1bHQ6aWYoYy5nZXRSVEwoKSl7cz0icmlnaHQifWVsc2V7cz0ibGVmdCJ9YnJlYWt9YnJlYWs7Y2FzZSBzYXAudWkuY29yZS5UZXh0QWxpZ24uUmlnaHQ6aWYoYy5nZXRSVEwoKSl7aWYoVD09IkxUUiIpe3M9InJpZ2h0In19ZWxzZXtzPSJyaWdodCJ9YnJlYWs7Y2FzZSBzYXAudWkuY29yZS5UZXh0QWxpZ24uQ2VudGVyOnM9ImNlbnRlciI7YnJlYWs7Y2FzZSBzYXAudWkuY29yZS5UZXh0QWxpZ24uTGVmdDppZihjLmdldFJUTCgpKXtzPSJsZWZ0In1lbHNle2lmKFQ9PSJSVEwiKXtzPSJsZWZ0In19YnJlYWt9cmV0dXJuIHN9O3JldHVybiBSfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuU2Nyb2xsQmFyUmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5TY3JvbGxCYXJSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1Njcm9sbEJhclJlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBTPXt9O1MucmVuZGVyPWZ1bmN0aW9uKHIscyl7dmFyIGE9cjt2YXIgUj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTthLmFkZENsYXNzKCJzYXBVaVNjcm9sbEJhciIpO3ZhciBiO2lmKHNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCl7Yj0ic2FwVWlTY3JvbGxCYXJUb3VjaCI7YS5hZGRDbGFzcyhiKX12YXIgdj1zLmdldFZlcnRpY2FsKCk7dmFyIGM9cy5nZXRTaXplKCk7dmFyIEM9cy5nZXRDb250ZW50U2l6ZSgpO3ZhciBCPXEuc2FwLnNjcm9sbGJhclNpemUoYik7dmFyIHc9Qi53aWR0aDt2YXIgaD1CLmhlaWdodDtpZih2KXthLndyaXRlKCI8ZGl2Iik7YS53cml0ZUNvbnRyb2xEYXRhKHMpO2Eud3JpdGUoIiBzdHlsZT1cIm92ZXJmbG93OmhpZGRlbjt3aWR0aDoiK3crInB4Iik7aWYoYyl7YS53cml0ZSgiO2hlaWdodDoiK2MpfWEud3JpdGUoIlwiIik7YS53cml0ZUNsYXNzZXMoKTthLndyaXRlKCI+Iik7YS53cml0ZSgiPGRpdiAiKTthLndyaXRlQXR0cmlidXRlKCJpZCIscy5nZXRJZCgpKyItc2IiKTthLndyaXRlKCIgc3R5bGU9XCJ3aWR0aDoiK3cqMisicHg7aGVpZ2h0OjEwMCU7b3ZlcmZsb3cteTpzY3JvbGw7b3ZlcmZsb3cteDpoaWRkZW4iKTtpZihSKXtpZigoISghIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94JiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbj09My42KSkmJighISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuc2FmYXJpKSl7YS53cml0ZSgiO21hcmdpbi1yaWdodDotIit3KyJweCIpfX1lbHNle2Eud3JpdGUoIjttYXJnaW4tbGVmdDotIit3KyJweDsiKX1hLndyaXRlKCJcIj4iKTthLndyaXRlKCI8ZGl2Iik7YS53cml0ZUF0dHJpYnV0ZSgiaWQiLHMuZ2V0SWQoKSsiLXNiY250Iik7YS53cml0ZSgiIHN0eWxlPVwid2lkdGg6Iit3KyJweCIpO2lmKEMpe2Eud3JpdGUoIjtoZWlnaHQ6IitDKX1hLndyaXRlKCJcIiIpO2Eud3JpdGUoIj4iKTthLndyaXRlKCI8L2Rpdj4iKTthLndyaXRlKCI8L2Rpdj4iKTthLndyaXRlKCI8ZGl2PiA8c3BhbiBpZD0iK3MuZ2V0SWQoKSsiLWZmc2l6ZSIrIiBzdHlsZT0ncG9zaXRpb246IGFic29sdXRlOyB0b3A6IC05MDAwcHg7IGxlZnQ6IC05MDAwcHg7IHZpc2liaWxpdHk6IGhpZGRlbjsgbGluZS1oZWlnaHQ6IG5vcm1hbDsnPiBGRiBTaXplPC9zcGFuPjwvZGl2PiIpO2Eud3JpdGUoIjwvZGl2PiIpfWVsc2V7YS53cml0ZSgiPGRpdiIpO2Eud3JpdGVDb250cm9sRGF0YShzKTthLndyaXRlKCIgc3R5bGU9XCJvdmVyZmxvdzpoaWRkZW47aGVpZ2h0OiIraCsicHgiKTtpZihjKXthLndyaXRlKCI7d2lkdGg6IitjKX1hLndyaXRlKCJcIiIpO2Eud3JpdGVDbGFzc2VzKCk7YS53cml0ZSgiPiIpO2Eud3JpdGUoIjxkaXYgIik7YS53cml0ZUF0dHJpYnV0ZSgiaWQiLHMuZ2V0SWQoKSsiLXNiIik7YS53cml0ZSgiIHN0eWxlPVwiaGVpZ2h0OiIraCoyKyJweDttYXJnaW4tdG9wOi0iK2grInB4O292ZXJmbG93LXg6c2Nyb2xsO292ZXJmbG93LXk6aGlkZGVuXCI+Iik7YS53cml0ZSgiPGRpdiIpO2Eud3JpdGVBdHRyaWJ1dGUoImlkIixzLmdldElkKCkrIi1zYmNudCIpO2Eud3JpdGUoIiBzdHlsZT1cImhlaWdodDoiK2grInB4Iik7aWYoQyl7YS53cml0ZSgiO3dpZHRoOiIrQyl9YS53cml0ZSgiXCIiKTthLndyaXRlKCI+Iik7YS53cml0ZSgiPC9kaXY+Iik7YS53cml0ZSgiPC9kaXY+Iik7YS53cml0ZSgiPC9kaXY+Iil9fTtyZXR1cm4gU30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlRoZW1lQ2hlY2snKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5UaGVtZUNoZWNrJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVGhlbWVDaGVjayIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9EZXZpY2UnLCdzYXAvdWkvYmFzZS9PYmplY3QnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEsRCxCKXsidXNlIHN0cmljdCI7c2FwLnVpLl9tYXhUaGVtZUNoZWNrQ3ljbGVzPTEwMDt2YXIgVD1CLmV4dGVuZCgic2FwLnVpLmNvcmUuVGhlbWVDaGVjayIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKEMpe3RoaXMuX29Db3JlPUM7dGhpcy5faUNvdW50PTA7dGhpcy5fQ1VTVE9NQ1NTQ0hFQ0s9L1wuc2FwVWlUaGVtZURlc2lnbmVyQ3VzdG9tQ3NzL2k7dGhpcy5fQ1VTVE9NSUQ9InNhcC11aS1jb3JlLWN1c3RvbWNzcyI7dGhpcy5fY3VzdG9tQ1NTQWRkZWQ9ZmFsc2U7dGhpcy5fdGhlbWVDaGVja2VkRm9yQ3VzdG9tPW51bGw7dGhpcy5fbUFkZGl0aW9uYWxMaWJDc3M9e319LGdldEludGVyZmFjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzfSxmaXJlVGhlbWVDaGFuZ2VkRXZlbnQ6ZnVuY3Rpb24obyxmKXtjKHRoaXMpO3ZhciB1PXNhcC51aS5fbWF4VGhlbWVDaGVja0N5Y2xlcz4wO2lmKHV8fGYpe2QuYXBwbHkodGhpcyxbdHJ1ZV0pfWVsc2V7VC50aGVtZUxvYWRlZD10cnVlfWlmKCFvJiYhdGhpcy5fc1RoZW1lQ2hlY2tJZCl7dGhpcy5fb0NvcmUuZmlyZVRoZW1lQ2hhbmdlZCh7dGhlbWU6dGhpcy5fb0NvcmUuZ2V0Q29uZmlndXJhdGlvbigpLmdldFRoZW1lKCl9KX19fSk7VC50aGVtZUxvYWRlZD1mYWxzZTtULmNoZWNrU3R5bGU9ZnVuY3Rpb24ocyxsKXtpZih0eXBlb2Yocyk9PT0ic3RyaW5nIil7cz1xLnNhcC5kb21CeUlkKHMpfXZhciBTPXEocyk7dHJ5e3ZhciByPSFzfHwhISgocy5zaGVldCYmcy5zaGVldC5jc3NSdWxlcy5sZW5ndGg+MCl8fCEhKHMuc3R5bGVTaGVldCYmcy5zdHlsZVNoZWV0LmNzc1RleHQubGVuZ3RoPjApfHwhIShzLmlubmVySFRNTCYmcy5pbm5lckhUTUwubGVuZ3RoPjApKTt2YXIgZj1TLmF0dHIoInNhcC11aS1yZWFkeSIpO2Y9ISEoZj09PSJ0cnVlInx8Zj09PSJmYWxzZSIpO2lmKGwpe3Euc2FwLmxvZy5kZWJ1ZygiVGhlbWVDaGVjazogQ2hlY2sgc3R5bGVzICciK1MuYXR0cigiaWQiKSsiJzogIityKyIvIitmKyIvIishIXMpfXJldHVybiByfHxmfWNhdGNoKGUpe31pZihsKXtxLnNhcC5sb2cuZGVidWcoIlRoZW1lQ2hlY2s6IEVycm9yIGR1cmluZyBjaGVjayBzdHlsZXMgJyIrUy5hdHRyKCJpZCIpKyInOiBmYWxzZS9mYWxzZS8iKyEhcyl9cmV0dXJuIGZhbHNlfTtmdW5jdGlvbiBjKHQpe1QudGhlbWVMb2FkZWQ9ZmFsc2U7aWYodC5fc1RoZW1lQ2hlY2tJZCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0Ll9zVGhlbWVDaGVja0lkKTt0Ll9zVGhlbWVDaGVja0lkPW51bGw7dC5faUNvdW50PTA7dC5fbUFkZGl0aW9uYWxMaWJDc3M9e319fWZ1bmN0aW9uIGEodCl7dmFyIGw9dC5fb0NvcmUuZ2V0TG9hZGVkTGlicmFyaWVzKCk7dmFyIHM9dC5fb0NvcmUuZ2V0Q29uZmlndXJhdGlvbigpLmdldFRoZW1lKCk7dmFyIHA9dC5fb0NvcmUuX2dldFRoZW1lUGF0aCgic2FwLnVpLmNvcmUiLHMpKyJjdXN0b20uY3NzIjt2YXIgcj10cnVlO2lmKCEhdC5fY3VzdG9tQ1NTQWRkZWQmJnQuX3RoZW1lQ2hlY2tlZEZvckN1c3RvbT09PXMpe2xbdC5fQ1VTVE9NSURdPXt9fWZ1bmN0aW9uIGUoZil7cj1yJiZULmNoZWNrU3R5bGUoInNhcC11aS10aGVtZS0iK2YsdHJ1ZSk7aWYoISFyKXtpZihELmJyb3dzZXIubXNpZSYmRC5icm93c2VyLnZlcnNpb248PTkpe3ZhciBTPXEuc2FwLmRvbUJ5SWQoInNhcC11aS10aGVtZS0iK2YpO3ZhciBSPVMmJlMuc2hlZXQmJlMuc2hlZXQucnVsZXMmJlMuc2hlZXQucnVsZXMubGVuZ3RoP1Muc2hlZXQucnVsZXMubGVuZ3RoOjA7aWYoUj09PTQwOTUpe3ZhciBuPXBhcnNlSW50KHEoUykuYXR0cigic2FwLXVpLWNzcy1jb3VudCIpLDEwKTtpZihpc05hTihuKSl7bj0xfWVsc2V7bis9MX12YXIgQT0iaWU5XyIrbjt2YXIgZz10aGlzLm5hbWUrIi0iK0E7dmFyIEw9InNhcC11aS10aGVtZS0iK2c7aWYoIXQuX21BZGRpdGlvbmFsTGliQ3NzW2ddJiYhcS5zYXAuZG9tQnlJZChMKSl7dC5fbUFkZGl0aW9uYWxMaWJDc3NbZ109e25hbWU6dGhpcy5uYW1lfTt2YXIgbztpZihmIT09dGhpcy5uYW1lKXtvPXEuc2FwLmRvbUJ5SWQoInNhcC11aS10aGVtZS0iK3RoaXMubmFtZSl9ZWxzZXtvPVN9dmFyIGg9bmV3IFVSSShvLmdldEF0dHJpYnV0ZSgiaHJlZiIpKTt2YXIgaT1oLnN1ZmZpeCgpO3ZhciBGPWguZmlsZW5hbWUoKTtpZihpLmxlbmd0aD4wKXtpPSIuIitpO0Y9Ri5zbGljZSgwLC1pLmxlbmd0aCl9aC5maWxlbmFtZShGKyJfIitBK2kpO3ZhciBIPWgudG9TdHJpbmcoKTt2YXIgaj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIik7ai50eXBlPSJ0ZXh0L2NzcyI7ai5yZWw9InN0eWxlc2hlZXQiO2ouaHJlZj1IO2ouaWQ9TDtxKGopLmF0dHIoInNhcC11aS1jc3MtY291bnQiLG4pLmxvYWQoZnVuY3Rpb24oKXtxKGopLmF0dHIoInNhcC11aS1yZWFkeSIsInRydWUiKX0pLmVycm9yKGZ1bmN0aW9uKCl7cShqKS5hdHRyKCJzYXAtdWktcmVhZHkiLCJmYWxzZSIpfSk7Uy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqLFMubmV4dFNpYmxpbmcpfX19aWYodC5fdGhlbWVDaGVja2VkRm9yQ3VzdG9tIT1zKXtpZihiKHQsZikpe3Euc2FwLmluY2x1ZGVTdHlsZVNoZWV0KHAsdC5fQ1VTVE9NSUQpO3QuX2N1c3RvbUNTU0FkZGVkPXRydWU7cS5zYXAubG9nLndhcm5pbmcoIlRoZW1lQ2hlY2sgZGVsaXZlcmVkIGN1c3RvbSBDU1MgbmVlZHMgdG8gYmUgbG9hZGVkLCBUaGVtZSBub3QgeWV0IGFwcGxpZWQiKTt0Ll90aGVtZUNoZWNrZWRGb3JDdXN0b209cztyPWZhbHNlO3JldHVybiBmYWxzZX1lbHNle3ZhciBrPXEoIkxJTktbaWQ9JyIrdC5fQ1VTVE9NSUQrIiddIik7aWYoay5sZW5ndGg+MCl7ay5yZW1vdmUoKTtxLnNhcC5sb2cuZGVidWcoIkN1c3RvbSBDU1MgcmVtb3ZlZCIpfXQuX2N1c3RvbUNTU0FkZGVkPWZhbHNlfX19fXEuZWFjaChsLGUpO3EuZWFjaCh0Ll9tQWRkaXRpb25hbExpYkNzcyxlKTtpZighcil7cS5zYXAubG9nLndhcm5pbmcoIlRoZW1lQ2hlY2s6IFRoZW1lIG5vdCB5ZXQgYXBwbGllZC4iKX1lbHNle3QuX3RoZW1lQ2hlY2tlZEZvckN1c3RvbT1zfXJldHVybiByfWZ1bmN0aW9uIGIodCxsKXt2YXIgcj1udWxsLHM9ZmFsc2UsUj1BcnJheSgpO2lmKHEuc2FwLmRvbUJ5SWQoInNhcC11aS10aGVtZS0iK2wpKXt2YXIgZT1xLnNhcC5kb21CeUlkKCJzYXAtdWktdGhlbWUtIitsKTtpZihlLnNoZWV0KXtSPWUuc2hlZXQuY3NzUnVsZXN9ZWxzZSBpZihlLnN0eWxlU2hlZXQpe1I9ZS5zdHlsZVNoZWV0LnJ1bGVzfX1pZihSLmxlbmd0aD4wKXtyPVJbMF0uc2VsZWN0b3JUZXh0fWVsc2V7cS5zYXAubG9nLndhcm5pbmcoIkN1c3RvbSBjaGVjazogRmFpbGVkIHJldHJpZXZpbmcgYSBDU1MgcnVsZSBmcm9tIHN0eWxlc2hlZXQgIitsKTtyZXR1cm4gZmFsc2V9aWYodC5fQ1VTVE9NQ1NTQ0hFQ0sudGVzdChyKSl7cz10cnVlfXJldHVybiBzfWZ1bmN0aW9uIGQoZil7dGhpcy5faUNvdW50Kys7dmFyIGU9dGhpcy5faUNvdW50PnNhcC51aS5fbWF4VGhlbWVDaGVja0N5Y2xlcztpZighYSh0aGlzKSYmIWUpe3RoaXMuX3NUaGVtZUNoZWNrSWQ9cS5zYXAuZGVsYXllZENhbGwoMix0aGlzLGQpfWVsc2UgaWYoIWYpe2ModGhpcyk7VC50aGVtZUxvYWRlZD10cnVlO3RoaXMuX29Db3JlLmZpcmVUaGVtZUNoYW5nZWQoe3RoZW1lOnRoaXMuX29Db3JlLmdldENvbmZpZ3VyYXRpb24oKS5nZXRUaGVtZSgpfSk7aWYoZSl7cS5zYXAubG9nLndhcm5pbmcoIlRoZW1lQ2hlY2s6IG1heC4gY2hlY2sgY3ljbGVzIHJlYWNoZWQuIil9fWVsc2V7VC50aGVtZUxvYWRlZD10cnVlfX1yZXR1cm4gVH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlZhbHVlU3RhdGVTdXBwb3J0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVmFsdWVTdGF0ZVN1cHBvcnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9WYWx1ZVN0YXRlU3VwcG9ydCIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgVj17fTt2YXIgdD1udWxsO3ZhciBlPWZ1bmN0aW9uKCl7aWYoIXQpe3Q9e307dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRMaWJyYXJ5UmVzb3VyY2VCdW5kbGUoInNhcC51aS5jb3JlIik7dFtzYXAudWkuY29yZS5WYWx1ZVN0YXRlLkVycm9yXT1yLmdldFRleHQoIlZBTFVFX1NUQVRFX0VSUk9SIik7dFtzYXAudWkuY29yZS5WYWx1ZVN0YXRlLldhcm5pbmddPXIuZ2V0VGV4dCgiVkFMVUVfU1RBVEVfV0FSTklORyIpO3Rbc2FwLnVpLmNvcmUuVmFsdWVTdGF0ZS5TdWNjZXNzXT1yLmdldFRleHQoIlZBTFVFX1NUQVRFX1NVQ0NFU1MiKX19O1YuZW5yaWNoVG9vbHRpcD1mdW5jdGlvbihFLFQpe2lmKCFUJiZFLmdldFRvb2x0aXAoKSl7cmV0dXJuIHVuZGVmaW5lZH1pZihFLmdldFZhbHVlU3RhdGUpe3ZhciBzPUUuZ2V0VmFsdWVTdGF0ZSgpO2lmKHMmJihzIT1zYXAudWkuY29yZS5WYWx1ZVN0YXRlLk5vbmUpKXtlKCk7cmV0dXJuKFQ/VCsiIC0gIjoiIikrdFtzXX19cmV0dXJuIFR9O1YuZ2V0QWRkaXRpb25hbFRleHQ9ZnVuY3Rpb24oRSl7dmFyIHI9bnVsbDtpZihFLmdldFZhbHVlU3RhdGUpe3ZhciBzPUUuZ2V0VmFsdWVTdGF0ZSgpO2lmKHMmJihzIT1zYXAudWkuY29yZS5WYWx1ZVN0YXRlLk5vbmUpKXtlKCk7cj10W3NdfX1yZXR1cm4gcn07cmV0dXJuIFZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5YTUxUZW1wbGF0ZVByb2Nlc3NvcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlhNTFRlbXBsYXRlUHJvY2Vzc29yJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvWE1MVGVtcGxhdGVQcm9jZXNzb3IiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcCh0LHYsbixjKXt2YXIgYj1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXIodixjLHRydWUpO2lmKGImJnR5cGVvZiBiPT09Im9iamVjdCIpe3JldHVybiBifXZhciBWPXY9Ynx8djt2YXIgVD1zYXAudWkuYmFzZS5EYXRhVHlwZS5nZXRUeXBlKHQpO2lmKFQpe2lmKFQgaW5zdGFuY2VvZiBzYXAudWkuYmFzZS5EYXRhVHlwZSl7Vj1ULnBhcnNlVmFsdWUodil9fWVsc2V7dGhyb3cgbmV3IEVycm9yKCJQcm9wZXJ0eSAiK24rIiBoYXMgdW5rbm93biB0eXBlICIrdCl9cmV0dXJuIHR5cGVvZiBWPT09InN0cmluZyI/c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5iaW5kaW5nUGFyc2VyLmVzY2FwZShWKTpWfWZ1bmN0aW9uIGwoeCl7cmV0dXJuIHgubG9jYWxOYW1lfHx4LmJhc2VOYW1lfHx4Lm5vZGVOYW1lfXZhciBYPXt9O1gubG9hZFRlbXBsYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9cS5zYXAuZ2V0UmVzb3VyY2VOYW1lKHQsIi4iKyhlfHwidmlldyIpKyIueG1sIik7cmV0dXJuIHEuc2FwLmxvYWRSZXNvdXJjZShyKS5kb2N1bWVudEVsZW1lbnR9O1gucGFyc2VWaWV3QXR0cmlidXRlcz1mdW5jdGlvbih4LHYscyl7dmFyIGE9di5nZXRNZXRhZGF0YSgpLmdldEFsbFByb3BlcnRpZXMoKTtmb3IodmFyIGk9MDtpPHguYXR0cmlidXRlcy5sZW5ndGg7aSsrKXt2YXIgYj14LmF0dHJpYnV0ZXNbaV07aWYoYi5uYW1lPT09J2NvbnRyb2xsZXJOYW1lJyl7di5fY29udHJvbGxlck5hbWU9Yi52YWx1ZX1lbHNlIGlmKGIubmFtZT09PSdyZXNvdXJjZUJ1bmRsZU5hbWUnKXt2Ll9yZXNvdXJjZUJ1bmRsZU5hbWU9Yi52YWx1ZX1lbHNlIGlmKGIubmFtZT09PSdyZXNvdXJjZUJ1bmRsZVVybCcpe3YuX3Jlc291cmNlQnVuZGxlVXJsPWIudmFsdWV9ZWxzZSBpZihiLm5hbWU9PT0ncmVzb3VyY2VCdW5kbGVMb2NhbGUnKXt2Ll9yZXNvdXJjZUJ1bmRsZUxvY2FsZT1iLnZhbHVlfWVsc2UgaWYoYi5uYW1lPT09J3Jlc291cmNlQnVuZGxlQWxpYXMnKXt2Ll9yZXNvdXJjZUJ1bmRsZUFsaWFzPWIudmFsdWV9ZWxzZSBpZihiLm5hbWU9PT0nY2xhc3MnKXt2LmFkZFN0eWxlQ2xhc3MoYi52YWx1ZSl9ZWxzZSBpZighc1tiLm5hbWVdJiZhW2IubmFtZV0pe3NbYi5uYW1lXT1wKGFbYi5uYW1lXS50eXBlLGIudmFsdWUsYi5uYW1lLHYuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcil9fX07WC5wYXJzZVRlbXBsYXRlPWZ1bmN0aW9uKHgsdil7dmFyIHI9W107dmFyIGM9dW5kZWZpbmVkO3ZhciBDPXYuc1ZpZXdOYW1lfHx2Ll9zRnJhZ21lbnROYW1lO2lmKCFDKXt2YXIgdD12O3ZhciBMPTA7d2hpbGUoKytMPDEwMDAmJnQmJnQhPT10Ll9vQ29udGFpbmluZ1ZpZXcpe3Q9dC5fb0NvbnRhaW5pbmdWaWV3fUM9dC5zVmlld05hbWV9aWYodi5pc1N1YlZpZXcoKSl7YSh4LHRydWUpfWVsc2V7Yih4KX1yZXR1cm4gcjtmdW5jdGlvbiBhKHgsUixJKXtpZih4Lm5vZGVUeXBlPT09MSl7dmFyIHM9bCh4KTtpZih4Lm5hbWVzcGFjZVVSST09PSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sInx8eC5uYW1lc3BhY2VVUkk9PT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciKXtyLnB1c2goIjwiK3MrIiAiKTt2YXIgajtmb3IodmFyIGk9MDtpPHguYXR0cmlidXRlcy5sZW5ndGg7aSsrKXt2YXIgaz14LmF0dHJpYnV0ZXNbaV07dmFyIG09ay52YWx1ZTtpZihrLm5hbWU9PT0iaWQiKXttPXYuX29Db250YWluaW5nVmlldy5jcmVhdGVJZChtKX1yLnB1c2goay5uYW1lKyI9XCIiK3Euc2FwLmVuY29kZUhUTUwobSkrIlwiICIpfWlmKFI9PT10cnVlKXtyLnB1c2goImRhdGEtc2FwLXVpLXByZXNlcnZlIisiPVwiIit2LmdldElkKCkrIlwiICIpfXIucHVzaCgiPiIpO2IoeCk7ci5wdXNoKCI8LyIrcysiPiIpfWVsc2UgaWYocz09PSJGcmFnbWVudERlZmluaXRpb24iJiZ4Lm5hbWVzcGFjZVVSST09PSJzYXAudWkuY29yZSIpe2IoeCxmYWxzZSx0cnVlKX1lbHNle3ZhciBuPWUoeCk7Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe3ZhciBvPW5baV07aWYodi5nZXRNZXRhZGF0YSgpLmhhc0FnZ3JlZ2F0aW9uKCJjb250ZW50Iikpe3YuYWRkQWdncmVnYXRpb24oImNvbnRlbnQiLG8pfWVsc2UgaWYodi5nZXRNZXRhZGF0YSgpLmhhc0Fzc29jaWF0aW9uKCgiY29udGVudCIpKSl7di5hZGRBc3NvY2lhdGlvbigiY29udGVudCIsbyl9ci5wdXNoKG8pfX19ZWxzZSBpZih4Lm5vZGVUeXBlPT09MyYmIUkpe3ZhciB1PXgudGV4dENvbnRlbnR8fHgudGV4dCx3PWwoeC5wYXJlbnROb2RlKTtpZih1KXtpZih3IT0ic3R5bGUiKXt1PXEuc2FwLmVuY29kZUhUTUwodSl9ci5wdXNoKHUpfX19ZnVuY3Rpb24gYih4LFIsSSl7dmFyIGo9eC5jaGlsZE5vZGVzO2Zvcih2YXIgaT0wO2k8ai5sZW5ndGg7aSsrKXthKGpbaV0sUixJKX19ZnVuY3Rpb24gZihuLHMpe3ZhciBpO3ZhciBtPXNhcC51aS5nZXRDb3JlKCkuZ2V0TG9hZGVkTGlicmFyaWVzKCk7cS5lYWNoKG0sZnVuY3Rpb24oaixrKXtpZihuPT09ay5uYW1lc3BhY2V8fG49PT1rLm5hbWUpe2k9ay5uYW1lKyIuIisoKGsudGFnTmFtZXMmJmsudGFnTmFtZXNbc10pfHxzKX19KTtpPWl8fG4rIi4iK3M7cS5zYXAucmVxdWlyZShpKTt2YXIgbz1xLnNhcC5nZXRPYmplY3QoaSk7aWYobyl7cmV0dXJuIG99ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIkNhbid0IGZpbmQgb2JqZWN0IGNsYXNzICciK2krIicgZm9yIFhNTC12aWV3IiwiIiwiWE1MVGVtcGxhdGVQcm9jZXNzb3IuanMiKX19ZnVuY3Rpb24gZChuKXtpZihuLm5hbWVzcGFjZVVSST09PSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sInx8bi5uYW1lc3BhY2VVUkk9PT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciKXt2YXIgaT1uLmF0dHJpYnV0ZXNbJ2lkJ10/bi5hdHRyaWJ1dGVzWydpZCddLnRleHRDb250ZW50fHxuLmF0dHJpYnV0ZXNbJ2lkJ10udGV4dDpudWxsO3JldHVybltuZXcgc2FwLnVpLmNvcmUubXZjLlhNTFZpZXcoe2lkOmk/di5fb0NvbnRhaW5pbmdWaWV3LmNyZWF0ZUlkKGkpOnVuZGVmaW5lZCx4bWxOb2RlOm4sY29udGFpbmluZ1ZpZXc6di5fb0NvbnRhaW5pbmdWaWV3fSldfWVsc2V7cmV0dXJuIGUobil9fWZ1bmN0aW9uIGUobil7aWYobChuKT09PSJFeHRlbnNpb25Qb2ludCImJm4ubmFtZXNwYWNlVVJJPT09InNhcC51aS5jb3JlIil7cmV0dXJuIGcobix2KX1lbHNle3JldHVybiBoKG4pfX1mdW5jdGlvbiBnKG4sdil7dmFyIFI9dW5kZWZpbmVkO2lmKHNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbil7dmFyIGo9c2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uLmdldFZpZXdFeHRlbnNpb24oQyxuLmdldEF0dHJpYnV0ZSgibmFtZSIpKTtpZihqKXtpZihqLmNsYXNzTmFtZSl7cS5zYXAucmVxdWlyZShqLmNsYXNzTmFtZSk7dmFyIG89cS5zYXAuZ2V0T2JqZWN0KGouY2xhc3NOYW1lKTtxLnNhcC5sb2cuaW5mbygiQ3VzdG9taXppbmc6IFZpZXcgZXh0ZW5zaW9uIGZvdW5kIGZvciBleHRlbnNpb24gcG9pbnQgJyIrbi5nZXRBdHRyaWJ1dGUoIm5hbWUiKSsiJyBpbiBWaWV3ICciK0MrIic6ICIrai5jbGFzc05hbWUrIjogIisoai52aWV3TmFtZXx8ai5mcmFnbWVudE5hbWUpKTtpZihqLmNsYXNzTmFtZT09PSJzYXAudWkuY29yZS5GcmFnbWVudCIpe3ZhciBGPW5ldyBvKHt0eXBlOmoudHlwZSxmcmFnbWVudE5hbWU6ai5mcmFnbWVudE5hbWUsY29udGFpbmluZ1ZpZXc6dn0pO1I9KHEuaXNBcnJheShGKT9GOltGXSl9ZWxzZSBpZihqLmNsYXNzTmFtZT09PSJzYXAudWkuY29yZS5tdmMuVmlldyIpe3ZhciB2PXNhcC51aS52aWV3KHt0eXBlOmoudHlwZSx2aWV3TmFtZTpqLnZpZXdOYW1lfSk7Uj1bdl19ZWxzZXtxLnNhcC5sb2cud2FybmluZygiQ3VzdG9taXppbmc6IFVua25vd24gZXh0ZW5zaW9uIGNsYXNzTmFtZSBjb25maWd1cmVkIChhbmQgaWdub3JlZCkgaW4gQ29tcG9uZW50LmpzIGZvciBleHRlbnNpb24gcG9pbnQgJyIrbi5nZXRBdHRyaWJ1dGUoIm5hbWUiKSsiJyBpbiBWaWV3ICciK0MrIic6ICIrai5jbGFzc05hbWUpfX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJDdXN0b21pemluZzogbm8gZXh0ZW5zaW9uIGNsYXNzTmFtZSBjb25maWd1cmVkIGluIENvbXBvbmVudC5qcyBmb3IgZXh0ZW5zaW9uIHBvaW50ICciK24uZ2V0QXR0cmlidXRlKCJuYW1lIikrIicgaW4gVmlldyAnIitDKyInOiAiK2ouY2xhc3NOYW1lKX19ZWxzZXt9fWlmKCFSKXtSPVtdO3ZhciBrPW4uY2hpbGROb2Rlcztmb3IodmFyIGk9MDtpPGsubGVuZ3RoO2krKyl7dmFyIG09a1tpXTtpZihtLm5vZGVUeXBlPT09MSl7Uj1xLm1lcmdlKFIsZChtKSl9fX1yZXR1cm4gUnx8W119ZnVuY3Rpb24gaChuKXt2YXIgaj1uLm5hbWVzcGFjZVVSSSxvPWYoaixsKG4pKSxzPXt9LFM9IiIsaz1bXSxPO2lmKCFvKXtyZXR1cm5bXX12YXIgbT1vLmdldE1ldGFkYXRhKCk7dmFyIEo9bS5nZXRKU09OS2V5cygpO2Zvcih2YXIgaT0wO2k8bi5hdHRyaWJ1dGVzLmxlbmd0aDtpKyspe3ZhciB1PW4uYXR0cmlidXRlc1tpXTt2YXIgTj11Lm5hbWU7dmFyIFY9dS52YWx1ZTt2YXIgST1KW05dO2lmKE49PT0iaWQiKXtzW05dPXYuX29Db250YWluaW5nVmlldy5jcmVhdGVJZChWKTtPPVZ9ZWxzZSBpZihOPT09ImNsYXNzIil7Uys9Vn1lbHNlIGlmKE49PT0idmlld05hbWUiKXtzW05dPVZ9ZWxzZSBpZihOPT09ImZyYWdtZW50TmFtZSIpe3NbTl09VjtzWydjb250YWluaW5nVmlldyddPXYuX29Db250YWluaW5nVmlld31lbHNlIGlmKE49PT0iYmluZGluZyIpe3ZhciBCPXNhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QuYmluZGluZ1BhcnNlcihWLHYuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcik7cy5vYmplY3RCaW5kaW5ncz1zLm9iamVjdEJpbmRpbmdzfHx7fTtzLm9iamVjdEJpbmRpbmdzW0IubW9kZWx8fHVuZGVmaW5lZF09Qn1lbHNlIGlmKE4uaW5kZXhPZigiOiIpPi0xKXtpZih1Lm5hbWVzcGFjZVVSST09PSJodHRwOi8vc2NoZW1hcy5zYXAuY29tL3NhcHVpNS9leHRlbnNpb24vc2FwLnVpLmNvcmUuQ3VzdG9tRGF0YS8xIil7dmFyIHc9bCh1KTtrLnB1c2gobmV3IHNhcC51aS5jb3JlLkN1c3RvbURhdGEoe2tleTp3LHZhbHVlOnAoImFueSIsVix3LHYuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcil9KSl9ZWxzZSBpZihOLmluZGV4T2YoInhtbG5zOiIpIT09MCl7cS5zYXAubG9nLndhcm5pbmcodisiOiBYTUxWaWV3IHBhcnNlciBlbmNvdW50ZXJlZCBhbmQgaWdub3JlZCBhdHRyaWJ1dGUgJyIrTisiJyAodmFsdWU6ICciK1YrIicpIHdpdGggdW5rbm93biBuYW1lc3BhY2UiKX19ZWxzZSBpZihJJiZJLl9pS2luZD09PTApe3NbTl09cChJLnR5cGUsVixOLHYuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcil9ZWxzZSBpZihJJiZJLl9pS2luZD09PTEmJkkuYWx0VHlwZXMpe3NbTl09cChJLmFsdFR5cGVzWzBdLFYsTix2Ll9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXIpfWVsc2UgaWYoSSYmSS5faUtpbmQ9PT0yKXt2YXIgQj1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXIoVix2Ll9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXIpO2lmKEIpe3NbTl09Qn1lbHNle3Euc2FwLmxvZy5lcnJvcih2KyI6IGFnZ3JlZ2F0aW9ucyB3aXRoIGNhcmRpbmFsaXR5IDAuLm4gb25seSBhbGxvdyBiaW5kaW5nIHBhdGhzIGFzIGF0dHJpYnV0ZSB2YWx1ZSAod3JvbmcgdmFsdWU6ICIrTisiPSciK1YrIicpIil9fWVsc2UgaWYoSSYmSS5faUtpbmQ9PT0zKXtzW05dPXYuY3JlYXRlSWQoVil9ZWxzZSBpZihJJiZJLl9pS2luZD09PTQpe3NbTl09cS5tYXAoVi5zcGxpdCgvW1xzLF0rL2cpLGZ1bmN0aW9uKEcpe3JldHVybiBHP3YuY3JlYXRlSWQoRyk6bnVsbH0pfWVsc2UgaWYoSSYmSS5faUtpbmQ9PT01KXt2YXIgRT12Ll9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXJbVl07aWYodHlwZW9mKEUpIT09ImZ1bmN0aW9uIil7cS5zYXAubG9nLndhcm5pbmcodisiOiBldmVudCBoYW5kbGVyIGZ1bmN0aW9uIFwiIitWKyJcIiBpcyBub3QgYSBmdW5jdGlvbiBvciBkb2VzIG5vdCBleGlzdCBpbiB0aGUgY29udHJvbGxlci4iKX1pZihFKXtFWyJfc2FwdWlfaGFuZGxlck5hbWUiXT1WO3NbTl09W0Usdi5fb0NvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyXX19ZWxzZSBpZihOIT09InhtbG5zIil7cS5zYXAubG9nLndhcm5pbmcodisiOiBYTUxUZW1wbGF0ZVByb2Nlc3NvciBlbmNvdW50ZXJlZCBhbmQgaWdub3JlZCB1bmtub3duIGF0dHJpYnV0ZSAnIitOKyInICh2YWx1ZTogJyIrVisiJykiKX19aWYoay5sZW5ndGg+MCl7cy5jdXN0b21EYXRhPWt9ZnVuY3Rpb24geShuLEEseil7dmFyIEcsSDtmb3IoRz1uLmZpcnN0Q2hpbGQ7RztHPUcubmV4dFNpYmxpbmcpe2lmKEcubm9kZVR5cGU9PT0xKXtIPUcubmFtZXNwYWNlVVJJPT09aiYmeiYmeltsKEcpXTtpZihIKXt5KEcsSCl9ZWxzZSBpZihBKXt2YXIgSz1kKEcpO2Zvcih2YXIgaT0wO2k8Sy5sZW5ndGg7aSsrKXt2YXIgTT1LW2ldO3ZhciBQPUEuX3NOYW1lO2lmKEEubXVsdGlwbGUpe2lmKCFzW1BdKXtzW1BdPVtdfWlmKHR5cGVvZiBzW1BdLnBhdGg9PT0ic3RyaW5nIil7c1tQXS50ZW1wbGF0ZT1NfWVsc2V7c1tQXS5wdXNoKE0pfX1lbHNle3NbUF09TX19fWVsc2UgaWYobChuKSE9PSJGcmFnbWVudERlZmluaXRpb24ifHxuLm5hbWVzcGFjZVVSSSE9PSJzYXAudWkuY29yZSIpe3Rocm93IG5ldyBFcnJvcigiQ2Fubm90IGFkZCBkaXJlY3QgY2hpbGQgd2l0aG91dCBkZWZhdWx0IGFnZ3JlZ2F0aW9uIGRlZmluZWQgZm9yIGNvbnRyb2wgIittLmdldEVsZW1lbnROYW1lKCkpfX1lbHNlIGlmKEcubm9kZVR5cGU9PT0zKXtpZihxLnRyaW0oRy50ZXh0Q29udGVudHx8Ry50ZXh0KSl7dGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgYWRkIHRleHQgbm9kZXMgYXMgZGlyZWN0IGNoaWxkIG9mIGFuIGFnZ3JlZ2F0aW9uLiBGb3IgYWRkaW5nIHRleHQgdG8gYW4gYWdncmVnYXRpb24sIGEgc3Vycm91bmRpbmcgaHRtbCB0YWcgaXMgbmVlZGVkIil9fX19dmFyIEE9bS5nZXREZWZhdWx0QWdncmVnYXRpb24oKTt2YXIgej1tLmdldEFsbEFnZ3JlZ2F0aW9ucygpO3kobixBLHopO2lmKHNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbiYmTyl7dmFyIEQ9c2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uLmdldEN1c3RvbVByb3BlcnRpZXMoQyxPKTtpZihEKXtzPXEuZXh0ZW5kKHMsRCl9fXZhciBGO2lmKHNhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKG8ucHJvdG90eXBlKSYmdHlwZW9mIG8uX3NUeXBlPT09InN0cmluZyIpe0Y9c2FwLnVpLnZpZXcocyx1bmRlZmluZWQsby5fc1R5cGUpfWVsc2V7Rj1uZXcgbyhzKX1pZihTJiZGLmFkZFN0eWxlQ2xhc3Mpe0YuYWRkU3R5bGVDbGFzcyhTKX1pZighRil7Rj1bXX1lbHNlIGlmKCFxLmlzQXJyYXkoRikpe0Y9W0ZdfXJldHVybiBGfX07cmV0dXJuIFh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5kZWxlZ2F0ZS5TY3JvbGxFbmFibGVtZW50Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuZGVsZWdhdGUuU2Nyb2xsRW5hYmxlbWVudCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL2RlbGVnYXRlL1Njcm9sbEVuYWJsZW1lbnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgJD1xO3ZhciBTPUIuZXh0ZW5kKCJzYXAudWkuY29yZS5kZWxlZ2F0ZS5TY3JvbGxFbmFibGVtZW50Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYyxzLEMpe0IuYXBwbHkodGhpcyk7dGhpcy5fb0NvbnRyb2w9Yzt0aGlzLl9vQ29udHJvbC5hZGREZWxlZ2F0ZSh0aGlzKTt0aGlzLl9zQ29udGVudElkPXM7dGhpcy5fYkhvcml6b250YWw9ISFDLmhvcml6b250YWw7dGhpcy5fYlZlcnRpY2FsPSEhQy52ZXJ0aWNhbDt0aGlzLl9zY3JvbGxYPTA7dGhpcy5fc2Nyb2xsWT0wO3RoaXMuX3Njcm9sbGVyPW51bGw7dGhpcy5fc2Nyb2xsYmFyQ2xhc3M9Qy5zY3JvbGxiYXJDbGFzc3x8ZmFsc2U7dGhpcy5fYm91bmNlPUMuYm91bmNlO2EodGhpcyxDKTtpZih0aGlzLl9pbml0KXt0aGlzLl9pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LHNldEhvcml6b250YWw6ZnVuY3Rpb24oaCl7dGhpcy5fYkhvcml6b250YWw9ISFoO2lmKHRoaXMuX3Njcm9sbGVyKXtpZih0aGlzLl96eW5nYSl7dGhpcy5fc2Nyb2xsZXIub3B0aW9ucy5zY3JvbGxpbmdYPXRoaXMuX2JIb3Jpem9udGFsfWVsc2V7dGhpcy5fc2Nyb2xsZXIuaFNjcm9sbD10aGlzLl9zY3JvbGxlci5oU2Nyb2xsYmFyPXRoaXMuX2JIb3Jpem9udGFsO3RoaXMuX3Njcm9sbGVyLl9zY3JvbGxiYXIoJ2gnKX19ZWxzZSBpZih0aGlzLl9zZXRPdmVyZmxvdyl7dGhpcy5fc2V0T3ZlcmZsb3coKX19LHNldFZlcnRpY2FsOmZ1bmN0aW9uKHYpe3RoaXMuX2JWZXJ0aWNhbD0hIXY7aWYodGhpcy5fc2Nyb2xsZXIpe2lmKHRoaXMuX3p5bmdhKXt0aGlzLl9zY3JvbGxlci5vcHRpb25zLnNjcm9sbGluZ1k9dGhpcy5fYlZlcnRpY2FsfWVsc2V7dGhpcy5fc2Nyb2xsZXIudlNjcm9sbD10aGlzLl9zY3JvbGxlci52U2Nyb2xsYmFyPXRoaXMuX2JWZXJ0aWNhbDt0aGlzLl9zY3JvbGxlci5fc2Nyb2xsYmFyKCd2Jyl9fWVsc2UgaWYodGhpcy5fc2V0T3ZlcmZsb3cpe3RoaXMuX3NldE92ZXJmbG93KCl9fSxnZXRIb3Jpem9udGFsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JIb3Jpem9udGFsfSxnZXRWZXJ0aWNhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iVmVydGljYWx9LHNldEJvdW5jZTpmdW5jdGlvbihiKXt0aGlzLl9ib3VuY2U9ISFifSxzZXRQdWxsRG93bjpmdW5jdGlvbihjKXt0aGlzLl9vUHVsbERvd249YztyZXR1cm4gdGhpc30sc2V0R3Jvd2luZ0xpc3Q6ZnVuY3Rpb24oZyxzKXt0aGlzLl9vR3Jvd2luZ0xpc3Q9Zzt0aGlzLl9mblNjcm9sbExvYWRDYWxsYmFjaz1xLnByb3h5KHMsZyk7cmV0dXJuIHRoaXN9LHNldEljb25UYWJCYXI6ZnVuY3Rpb24oSSxzLGYpe3RoaXMuX29JY29uVGFiQmFyPUk7dGhpcy5fZm5TY3JvbGxFbmRDYWxsYmFjaz1xLnByb3h5KHMsSSk7dGhpcy5fZm5TY3JvbGxTdGFydENhbGxiYWNrPXEucHJveHkoZixJKTtyZXR1cm4gdGhpc30sc2Nyb2xsVG86ZnVuY3Rpb24oeCx5LHQpe3RoaXMuX3Njcm9sbFg9eDt0aGlzLl9zY3JvbGxZPXk7dGhpcy5fc2Nyb2xsVG8oeCx5LHQpO3JldHVybiB0aGlzfSxkZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5fZXhpdCl7dGhpcy5fZXhpdCgpfWlmKHRoaXMuX29Db250cm9sKXt0aGlzLl9vQ29udHJvbC5yZW1vdmVEZWxlZ2F0ZSh0aGlzKTt0aGlzLl9vQ29udHJvbD11bmRlZmluZWR9fSxyZWZyZXNoOmZ1bmN0aW9uKCl7aWYodGhpcy5fcmVmcmVzaCl7dGhpcy5fcmVmcmVzaCgpfX19KTt2YXIgaT17Z2V0U2Nyb2xsVG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbFl9LGdldFNjcm9sbExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Nyb2xsWH0sZ2V0TWF4U2Nyb2xsVG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbGVyPy10aGlzLl9zY3JvbGxlci5tYXhTY3JvbGxZOjB9LF9zY3JvbGxUbzpmdW5jdGlvbih4LHksdCl7dGhpcy5fc2Nyb2xsZXImJnRoaXMuX3Njcm9sbGVyLnNjcm9sbFRvKC14LC15LHQsZmFsc2UpfSxfcmVmcmVzaDpmdW5jdGlvbigpe2lmKHRoaXMuX3Njcm9sbGVyJiZ0aGlzLl9zU2Nyb2xsZXJJZCl7dmFyIHM9JC5zYXAuZG9tQnlJZCh0aGlzLl9zU2Nyb2xsZXJJZCk7aWYocyYmKHMub2Zmc2V0SGVpZ2h0PjApKXt0aGlzLl9iSWdub3JlU2Nyb2xsRW5kPXRydWU7dGhpcy5fc2Nyb2xsZXIucmVmcmVzaCgpO3RoaXMuX2JJZ25vcmVTY3JvbGxFbmQ9ZmFsc2U7aWYoLXRoaXMuX3Njcm9sbFghPXRoaXMuX3Njcm9sbGVyLnh8fC10aGlzLl9zY3JvbGxZIT10aGlzLl9zY3JvbGxlci55KXt0aGlzLl9zY3JvbGxlci5zY3JvbGxUbygtdGhpcy5fc2Nyb2xsWCwtdGhpcy5fc2Nyb2xsWSwwKX1pZih0aGlzLl9zY3JvbGxlci53cmFwcGVyJiZ0aGlzLl9zY3JvbGxlci53cmFwcGVyLnNjcm9sbFRvcCl7dGhpcy5fc2Nyb2xsZXIud3JhcHBlci5zY3JvbGxUb3A9MH19fX0sX2NsZWFudXA6ZnVuY3Rpb24oKXt0aGlzLl90b2dnbGVSZXNpemVMaXN0ZW5lcnMoZmFsc2UpO2lmKHRoaXMuX3Njcm9sbGVyKXt0aGlzLl9zY3JvbGxlci5zdG9wKCk7dGhpcy5fc2Nyb2xsWD0tdGhpcy5fc2Nyb2xsZXIueDt2YXIgcz0kLnNhcC5kb21CeUlkKHRoaXMuX3NTY3JvbGxlcklkKTtpZihzJiYocy5vZmZzZXRIZWlnaHQ+MCkpe3RoaXMuX3Njcm9sbFk9LXRoaXMuX3Njcm9sbGVyLnl9dGhpcy5fc2Nyb2xsZXIuZGVzdHJveSgpO3RoaXMuX3Njcm9sbGVyPW51bGx9fSxfdG9nZ2xlUmVzaXplTGlzdGVuZXJzOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX3NTY3JvbGxlclJlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9zU2Nyb2xsZXJSZXNpemVMaXN0ZW5lcklkKTt0aGlzLl9zU2Nyb2xsZXJSZXNpemVMaXN0ZW5lcklkPW51bGx9aWYodGhpcy5fc0NvbnRlbnRSZXNpemVMaXN0ZW5lcklkKXtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXIodGhpcy5fc0NvbnRlbnRSZXNpemVMaXN0ZW5lcklkKTt0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQ9bnVsbH1pZih0JiZ0aGlzLl9zQ29udGVudElkJiYkLnNhcC5kb21CeUlkKHRoaXMuX3NDb250ZW50SWQpKXt2YXIgYj0kLnByb3h5KHRoaXMuX3JlZnJlc2gsdGhpcyk7dGhpcy5fc1Njcm9sbGVyUmVzaXplTGlzdGVuZXJJZD1zYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLnJlZ2lzdGVyKCQuc2FwLmRvbUJ5SWQodGhpcy5fc1Njcm9sbGVySWQpLGIpO3RoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZD1zYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLnJlZ2lzdGVyKCQuc2FwLmRvbUJ5SWQodGhpcy5fc0NvbnRlbnRJZCksYil9fSxvbkJlZm9yZVJlbmRlcmluZzpmdW5jdGlvbigpe3RoaXMuX2NsZWFudXAoKX0sb25mb2N1c2luOmZ1bmN0aW9uKGUpe2lmKFMuX2JTY3JvbGxUb0lucHV0JiZzYXAudWkuRGV2aWNlLm9zLmFuZHJvaWQpe3ZhciBiPWUuc3JjRWxlbWVudDt0aGlzLl9zVGltZXJJZCYmcS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9zVGltZXJJZCk7aWYoYiYmYi5ub2RlTmFtZSYmKGIubm9kZU5hbWUudG9VcHBlckNhc2UoKT09PSJJTlBVVCJ8fGIubm9kZU5hbWUudG9VcHBlckNhc2UoKT09PSJURVhUQVJFQSIpKXt0aGlzLl9zVGltZXJJZD1xLnNhcC5kZWxheWVkQ2FsbCg0MDAsdGhpcyxmdW5jdGlvbigpe3ZhciBvPXRoaXMuX3Njcm9sbGVyLl9vZmZzZXQoYik7by50b3ArPTQ4O3RoaXMuX3Njcm9sbGVyLnNjcm9sbFRvKG8ubGVmdCxvLnRvcCl9KX19fSxvbkFmdGVyUmVuZGVyaW5nOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxiPSh0aGlzLl9ib3VuY2UhPT11bmRlZmluZWQpP3RoaXMuX2JvdW5jZTpzYXAudWkuRGV2aWNlLm9zLmlvczt2YXIgYz0kLnNhcC5ieUlkKHRoaXMuX3NDb250ZW50SWQpO3RoaXMuX3NTY3JvbGxlcklkPWMucGFyZW50KCkuYXR0cigiaWQiKTt2YXIgZD0oISFzYXAudWkuRGV2aWNlLm9zLmFuZHJvaWQmJiFzYXAudWkuRGV2aWNlLmJyb3dzZXIuY2hyb21lJiYoc2FwLnVpLkRldmljZS5vcy52ZXJzaW9uPT00fHwhc2FwLnVpLkRldmljZS5vcy52ZXJzaW9uU3RyLmluZGV4T2YoIjIuMy40IikpJiZjLmZpbmQoImlucHV0LHRleHRhcmVhIikubGVuZ3RoKTt0aGlzLl9pVG9wT2Zmc2V0PXRoaXMuX29QdWxsRG93biYmdGhpcy5fb1B1bGxEb3duLmdldERvbVJlZiYmdGhpcy5fb1B1bGxEb3duLmdldERvbVJlZigpLm9mZnNldEhlaWdodHx8MDt2YXIgeD10aGlzLl9zY3JvbGxYfHwwLHk9dGhpcy5fc2Nyb2xsWXx8MDtpZihzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKSl7Yy5hdHRyKCJkaXIiLCJydGwiKTt2YXIgcD1jLnBhcmVudCgpO3AuYXR0cigiZGlyIiwibHRyIik7aWYoIXRoaXMuX2JTY3JvbGxQb3NJbml0aWFsaXplZCl7eD10aGlzLl9zY3JvbGxYPWMud2lkdGgoKS1wLndpZHRoKCk7dGhpcy5fYlNjcm9sbFBvc0luaXRpYWxpemVkPXRydWV9fXRoaXMuX3Njcm9sbGVyPW5ldyB3aW5kb3cuaVNjcm9sbCh0aGlzLl9zU2Nyb2xsZXJJZCx7dXNlVHJhbnNpdGlvbjp0cnVlLHVzZVRyYW5zZm9ybTohZCxoaWRlU2Nyb2xsYmFyOnRydWUsZmFkZVNjcm9sbGJhcjp0cnVlLGJvdW5jZTohIWIsbW9tZW50dW06dHJ1ZSxoYW5kbGVDbGljazpmYWxzZSxoU2Nyb2xsOnRoaXMuX2JIb3Jpem9udGFsLHZTY3JvbGw6dGhpcy5fYlZlcnRpY2FsLHg6LXgseToteSx0b3BPZmZzZXQ6dGhpcy5faVRvcE9mZnNldCxzY3JvbGxiYXJDbGFzczp0aGlzLl9zY3JvbGxiYXJDbGFzcyxvbkJlZm9yZVNjcm9sbFN0YXJ0OmZ1bmN0aW9uKGUpe2lmKHQuX2lzU2Nyb2xsaW5nKXtlLnN0b3BQcm9wYWdhdGlvbigpO2UucHJldmVudERlZmF1bHQoKX19LG9uU2Nyb2xsRW5kOmZ1bmN0aW9uKCl7aWYoIXQuX2JJZ25vcmVTY3JvbGxFbmQmJnQuX3Njcm9sbGVyKXt0Ll9zY3JvbGxYPS10Ll9zY3JvbGxlci54O3QuX3Njcm9sbFk9LXQuX3Njcm9sbGVyLnl9aWYodC5fb1B1bGxEb3duKXt0Ll9vUHVsbERvd24uZG9TY3JvbGxFbmQoKX1pZih0Ll9vR3Jvd2luZ0xpc3QmJnQuX2ZuU2Nyb2xsTG9hZENhbGxiYWNrKXt2YXIgZT1NYXRoLmZsb29yKHRoaXMud3JhcHBlckgvNCk7dmFyIEk9LXRoaXMubWF4U2Nyb2xsWSt0aGlzLnk8ZTtpZih0aGlzLmRpclk+MCYmSSl7dC5fZm5TY3JvbGxMb2FkQ2FsbGJhY2soKX19aWYodC5fb0ljb25UYWJCYXImJnQuX2ZuU2Nyb2xsRW5kQ2FsbGJhY2spe3QuX2ZuU2Nyb2xsRW5kQ2FsbGJhY2soKX10Ll9pc1Njcm9sbGluZz1mYWxzZX0sb25SZWZyZXNoOmZ1bmN0aW9uKCl7aWYodC5fb1B1bGxEb3duKXt0Ll9vUHVsbERvd24uZG9SZWZyZXNoKCl9dC5fdG9nZ2xlUmVzaXplTGlzdGVuZXJzKHRydWUpfSxvblNjcm9sbE1vdmU6ZnVuY3Rpb24oZSl7aWYoIXQuX2lzU2Nyb2xsaW5nKXt2YXIgcj0vKElOUFVUfFRFWFRBUkVBKS9pLEE9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtpZihyLnRlc3QoQS50YWdOYW1lKSYmZS50YXJnZXQhPT1BKXtBLmJsdXIoKX19dC5faXNTY3JvbGxpbmc9dHJ1ZTtpZih0Ll9vUHVsbERvd24pe3QuX29QdWxsRG93bi5kb1Njcm9sbE1vdmUoKX1pZih0Ll9vSWNvblRhYkJhciYmdC5fZm5TY3JvbGxTdGFydENhbGxiYWNrKXt0Ll9mblNjcm9sbFN0YXJ0Q2FsbGJhY2soKX19fSk7Zm9yKHZhciBQPXRoaXMuX29Db250cm9sO1A9UC5vUGFyZW50Oyl7dmFyIHM9UC5nZXRTY3JvbGxEZWxlZ2F0ZT9QLmdldFNjcm9sbERlbGVnYXRlKCk6bnVsbDtpZihzJiYocy5nZXRWZXJ0aWNhbCgpJiZ0aGlzLmdldFZlcnRpY2FsKCl8fHMuZ2V0SG9yaXpvbnRhbCgpJiZ0aGlzLmdldEhvcml6b250YWwoKSkpe3RoaXMuX3Njcm9sbGVyLl9zYXB1aV9pc05lc3RlZD10cnVlO2JyZWFrfX10aGlzLl9zY3JvbGxlci5fbW92ZT1mdW5jdGlvbihlKXtpZihlLl9zYXB1aV9oYW5kbGVkQnlDb250cm9sJiYhZS5fc2FwdWlfc2Nyb2xsKXtyZXR1cm59aWYodGhpcy5fc2FwdWlfaXNOZXN0ZWQpe2UuX3NhcHVpX2hhbmRsZWRCeUNvbnRyb2w9ISh0aGlzLmRpclk8MCYmdGhpcy55Pj0wKSYmISh0aGlzLmRpclk+MCYmdGhpcy55PD10aGlzLm1heFNjcm9sbFkpJiYhKHRoaXMuZGlyWDwwJiZ0aGlzLng+PTApJiYhKHRoaXMuZGlyWD4wJiZ0aGlzLng8PXRoaXMubWF4U2Nyb2xsWCl9d2luZG93LmlTY3JvbGwucHJvdG90eXBlLl9tb3ZlLmNhbGwodGhpcyxlKX07dmFyIG89Yy5wYXJlbnQoKVswXTtpZihvJiYoby5vZmZzZXRIZWlnaHQ+MCkpe2lmKHRoaXMuX3Njcm9sbFghPS10aGlzLl9zY3JvbGxlci54fHx0aGlzLl9zY3JvbGxZIT0tdGhpcy5fc2Nyb2xsZXIueSl7dGhpcy5fc2Nyb2xsZXIuc2Nyb2xsVG8oLXRoaXMuX3Njcm9sbFgsLXRoaXMuX3Njcm9sbFksMCl9fXRoaXMuX3RvZ2dsZVJlc2l6ZUxpc3RlbmVycyh0cnVlKX0sb250b3VjaG1vdmU6ZnVuY3Rpb24oZSl7aWYodGhpcy5fcHJldmVudFRvdWNoTW92ZURlZmF1bHQpe2UucHJldmVudERlZmF1bHQoKX19fTt2YXIgej17X3JlZnJlc2g6ZnVuY3Rpb24oKXtpZih0aGlzLl9zY3JvbGxlciYmdGhpcy5fc0NvbnRlbnRJZCYmJC5zYXAuZG9tQnlJZCh0aGlzLl9zQ29udGVudElkKSl7dmFyIGM9JC5zYXAuYnlJZCh0aGlzLl9zQ29udGVudElkKTt2YXIgQz1jLnBhcmVudCgpO3RoaXMuX3Njcm9sbGVyLnNldERpbWVuc2lvbnMoQy53aWR0aCgpLEMuaGVpZ2h0KCksYy53aWR0aCgpLGMuaGVpZ2h0KCkpfX0sX2NsZWFudXA6ZnVuY3Rpb24oKXtpZih0aGlzLl9zU2Nyb2xsZXJSZXNpemVMaXN0ZW5lcklkKXtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXIodGhpcy5fc1Njcm9sbGVyUmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fc1Njcm9sbGVyUmVzaXplTGlzdGVuZXJJZD1udWxsfWlmKHRoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZCl7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fc0NvbnRlbnRSZXNpemVMaXN0ZW5lcklkPW51bGx9aWYodGhpcy5fc2Nyb2xsZXIpe3ZhciB2PXRoaXMuX3Njcm9sbGVyLmdldFZhbHVlcygpO3RoaXMuX3Njcm9sbFg9di5sZWZ0O3RoaXMuX3Njcm9sbFk9di50b3B9fSxfc2Nyb2xsVG86ZnVuY3Rpb24oeCx5LHQpe2lmKHRoaXMuX3Njcm9sbGVyKXtpZighaXNOYU4odCkpe3RoaXMuX3Njcm9sbGVyLm9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb249dH10aGlzLl9zY3JvbGxlci5zY3JvbGxUbyh4LHksISF0KX19LG9uQmVmb3JlUmVuZGVyaW5nOmZ1bmN0aW9uKCl7dGhpcy5fY2xlYW51cCgpfSxvbkFmdGVyUmVuZGVyaW5nOmZ1bmN0aW9uKCl7dGhpcy5fcmVmcmVzaCgpO3RoaXMuX3Njcm9sbGVyLnNjcm9sbFRvKHRoaXMuX3Njcm9sbFgsdGhpcy5fc2Nyb2xsWSxmYWxzZSk7dGhpcy5fc0NvbnRlbnRSZXNpemVMaXN0ZW5lcklkPXNhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIucmVnaXN0ZXIoJC5zYXAuZG9tQnlJZCh0aGlzLl9zQ29udGVudElkKSwkLnByb3h5KGZ1bmN0aW9uKCl7aWYoKCF0aGlzLl9zQ29udGVudElkfHwhJC5zYXAuZG9tQnlJZCh0aGlzLl9zQ29udGVudElkKSkmJnRoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZCl7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fc0NvbnRlbnRSZXNpemVMaXN0ZW5lcklkPW51bGx9ZWxzZXt0aGlzLl9yZWZyZXNoKCl9fSx0aGlzKSl9LG9udG91Y2hzdGFydDpmdW5jdGlvbihlKXtpZihlLnRhcmdldC50YWdOYW1lLm1hdGNoKC9pbnB1dHx0ZXh0YXJlYXxzZWxlY3QvaSkpe3JldHVybn10aGlzLl9zY3JvbGxlci5kb1RvdWNoU3RhcnQoZS50b3VjaGVzLGUudGltZVN0YW1wKX0sb250b3VjaGVuZDpmdW5jdGlvbihlKXt0aGlzLl9zY3JvbGxlci5kb1RvdWNoRW5kKGUudGltZVN0YW1wKX0sb250b3VjaG1vdmU6ZnVuY3Rpb24oZSl7dGhpcy5fc2Nyb2xsZXIuZG9Ub3VjaE1vdmUoZS50b3VjaGVzLGUudGltZVN0YW1wKTtpZih0aGlzLl9wcmV2ZW50VG91Y2hNb3ZlRGVmYXVsdCl7ZS5wcmV2ZW50RGVmYXVsdCgpfWVsc2V7ZS5zdG9wUHJvcGFnYXRpb24oKX19fTt2YXIgbj17Z2V0U2Nyb2xsVG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbFl8fDB9LGdldFNjcm9sbExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Nyb2xsWHx8MH0sZ2V0TWF4U2Nyb2xsVG9wOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuXyRDb250YWluZXImJnRoaXMuXyRDb250YWluZXIubGVuZ3RoKT90aGlzLl8kQ29udGFpbmVyWzBdLnNjcm9sbEhlaWdodC10aGlzLl8kQ29udGFpbmVyLmhlaWdodCgpOi0xfSxfc2V0T3ZlcmZsb3c6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl8kQ29udGFpbmVyO2lmKCFjfHwhY1swXSlyZXR1cm47Yy5jc3MoInotaW5kZXgiLCIwIik7aWYoc2FwLnVpLkRldmljZS5vcy5pb3Mpe2MuY3NzKCJvdmVyZmxvdy14Iix0aGlzLl9iSG9yaXpvbnRhbD8ic2Nyb2xsIjoiaGlkZGVuIikuY3NzKCJvdmVyZmxvdy15Iix0aGlzLl9iVmVydGljYWw/InNjcm9sbCI6ImhpZGRlbiIpLmNzcygiLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmciLCJ0b3VjaCIpfWVsc2V7Yy5jc3MoIm92ZXJmbG93LXgiLHRoaXMuX2JIb3Jpem9udGFsJiYhdGhpcy5fYkRyYWdTY3JvbGw/ImF1dG8iOiJoaWRkZW4iKS5jc3MoIm92ZXJmbG93LXkiLHRoaXMuX2JWZXJ0aWNhbCYmIXRoaXMuX2JEcmFnU2Nyb2xsPyJhdXRvIjoiaGlkZGVuIil9fSxfcmVmcmVzaDpmdW5jdGlvbigpe3ZhciBjPXRoaXMuXyRDb250YWluZXI7aWYoIWN8fCFjLmhlaWdodCgpKXJldHVybjt2YXIgQz0kLnNhcC5ieUlkKHRoaXMuX3NDb250ZW50SWQpO2lmKHRoaXMuX29QdWxsRG93biYmdGhpcy5fb1B1bGxEb3duLl9iVG91Y2hNb2RlKXt2YXIgZD10aGlzLl9vUHVsbERvd24uZ2V0RG9tUmVmKCk7aWYoZCl7ZC5zdHlsZS5tYXJnaW5Ub3A9dGhpcy5fb1B1bGxEb3duLl9pU3RhdGU9PTI/IiI6Ii0iK2Qub2Zmc2V0SGVpZ2h0KyJweCJ9fWlmKGMuc2Nyb2xsVG9wKCkhPXRoaXMuX3Njcm9sbFkpe2Muc2Nyb2xsVG9wKHRoaXMuX3Njcm9sbFkpfWlmKCEodGhpcy5fb1B1bGxEb3duJiZ0aGlzLl9vUHVsbERvd24uX2JUb3VjaE1vZGUpJiYhdGhpcy5fZm5TY3JvbGxMb2FkQ2FsbGJhY2smJiEhIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3NSZXNpemVMaXN0ZW5lcklkKTt0aGlzLl9zUmVzaXplTGlzdGVuZXJJZD1udWxsfX0sX29uU2Nyb2xsOmZ1bmN0aW9uKGUpe3ZhciBjPXRoaXMuXyRDb250YWluZXI7aWYodGhpcy5fb0lPU1Njcm9sbCYmdGhpcy5fb0lPU1Njcm9sbC5iTW9tZW50dW0pe3ZhciB5PU1hdGguYWJzKHRoaXMuX3Njcm9sbFktYy5zY3JvbGxUb3AoKSk7aWYoeT4wJiZ5PDEwfHxlLnRpbWVTdGFtcC10aGlzLl9vSU9TU2Nyb2xsLmlUaW1lU3RhbXA+MTIwKXtxLnNhcC5sb2cuZGVidWcoIklPUyBNb21lbnR1bSBTY3JvbGxpbmcgaXMgT0ZGIik7dGhpcy5fb0lPU1Njcm9sbC5iTW9tZW50dW09ZmFsc2V9fXRoaXMuX3Njcm9sbFg9Yy5zY3JvbGxMZWZ0KCk7dGhpcy5fc2Nyb2xsWT1jLnNjcm9sbFRvcCgpO2lmKHRoaXMuX2ZuU2Nyb2xsTG9hZENhbGxiYWNrJiZjWzBdLnNjcm9sbEhlaWdodC1jLnNjcm9sbFRvcCgpLWMuaGVpZ2h0KCk8MTAwKXt0aGlzLl9mblNjcm9sbExvYWRDYWxsYmFjaygpfWlmKHRoaXMuX29JY29uVGFiQmFyJiZ0aGlzLl9mblNjcm9sbEVuZENhbGxiYWNrKXt0aGlzLl9mblNjcm9sbEVuZENhbGxiYWNrKCl9fSxfb25TdGFydDpmdW5jdGlvbihlKXt2YXIgYz10aGlzLl8kQ29udGFpbmVyWzBdO2lmKCFjKXJldHVybjt0aGlzLl9iQWxsb3dTY3JvbGw9IXNhcC51aS5EZXZpY2Uub3MuaW9zfHx0aGlzLl9iVmVydGljYWwmJihjLnNjcm9sbEhlaWdodD5jLmNsaWVudEhlaWdodCsxKTtpZih0aGlzLl9iQWxsb3dTY3JvbGwmJnNhcC51aS5EZXZpY2Uub3MuaW9zKXtpZihjLnNjcm9sbFRvcD09MCl7Yy5zY3JvbGxUb3A9MX12YXIgZD1jLnNjcm9sbEhlaWdodC1jLmNsaWVudEhlaWdodDtpZihjLnNjcm9sbFRvcD09PWQpe2Muc2Nyb2xsVG9wPWQtMX19aWYodGhpcy5fb0lPU1Njcm9sbCYmdGhpcy5fb0lPU1Njcm9sbC5iTW9tZW50dW0pe3Euc2FwLmxvZy5kZWJ1ZygiSU9TIE1vbWVudHVtIFNjcm9sbGluZzogcHJldmVudCB0YXAgZXZlbnQiKTtlLnN0b3BQcm9wYWdhdGlvbigpO3RoaXMuX29JT1NTY3JvbGwuYk1vbWVudHVtPWZhbHNlfXZhciBwPWUudG91Y2hlcz9lLnRvdWNoZXNbMF06ZTt0aGlzLl9pWD1wLnBhZ2VYO3RoaXMuX2lZPXAucGFnZVk7dGhpcy5fYlB1bGxEb3duPWZhbHNlO3RoaXMuX2lEaXJlY3Rpb249IiJ9LF9vblRvdWNoTW92ZTpmdW5jdGlvbihlKXt2YXIgYz10aGlzLl8kQ29udGFpbmVyWzBdO3ZhciBwPWUudG91Y2hlc1swXTtpZih0aGlzLl9pRGlyZWN0aW9uPT0iIil7dmFyIGQ9cC5wYWdlWC10aGlzLl9pWDt2YXIgYj1wLnBhZ2VZLXRoaXMuX2lZO2lmKGQhPTB8fGIhPTApe3RoaXMuX2lEaXJlY3Rpb249TWF0aC5hYnMoYik+TWF0aC5hYnMoZCk/InYiOiJoIn1pZih0aGlzLl9vUHVsbERvd24mJnRoaXMuX29QdWxsRG93bi5fYlRvdWNoTW9kZSYmdGhpcy5faURpcmVjdGlvbj09InYiJiZjLnNjcm9sbFRvcDw9MSl7aWYoYj5NYXRoLmFicyhkKSl7dGhpcy5fYlB1bGxEb3duPXRydWV9fX1pZih0aGlzLl9iUHVsbERvd249PT10cnVlKXt2YXIgZj10aGlzLl9vUHVsbERvd24uZ2V0RG9tUmVmKCk7dmFyIHQ9ZS50b3VjaGVzWzBdLnBhZ2VZLXRoaXMuX2lZLWYub2Zmc2V0SGVpZ2h0O2lmKHQ+MjApdD0yMDtmLnN0eWxlLm1hcmdpblRvcD10KyJweCI7dGhpcy5fb1B1bGxEb3duLmRvUHVsbCh0KTtlLnByZXZlbnREZWZhdWx0KCl9aWYodGhpcy5fYkRyYWdTY3JvbGwpe2lmKHRoaXMuX2lEaXJlY3Rpb249PSJ2IiYmdGhpcy5fYlZlcnRpY2FsfHx0aGlzLl9pRGlyZWN0aW9uPT0iaCImJnRoaXMuX2JIb3Jpem9udGFsKXtjLnNjcm9sbExlZnQ9Yy5zY3JvbGxMZWZ0K3RoaXMuX2lYLXAucGFnZVg7Yy5zY3JvbGxUb3A9Yy5zY3JvbGxUb3ArdGhpcy5faVktcC5wYWdlWTt0aGlzLl9pWD1wLnBhZ2VYO3RoaXMuX2lZPXAucGFnZVk7ZS5zdG9wUHJvcGFnYXRpb24oKTtlLnByZXZlbnREZWZhdWx0KCl9cmV0dXJufWlmKHRoaXMuX29JT1NTY3JvbGwmJnRoaXMuX2JBbGxvd1Njcm9sbCYmdGhpcy5faURpcmVjdGlvbj09InYiJiZNYXRoLmFicyhlLnRvdWNoZXNbMF0ucGFnZVktdGhpcy5faVkpPj0xMCl7dGhpcy5fb0lPU1Njcm9sbC5iTW9tZW50dW09dHJ1ZTt0aGlzLl9vSU9TU2Nyb2xsLmlUaW1lU3RhbXA9ZS50aW1lU3RhbXB9aWYodGhpcy5fYkFsbG93U2Nyb2xsfHx0aGlzLl9iSG9yaXpvbnRhbCYmdGhpcy5faURpcmVjdGlvbj09ImgiKXtlLnNldE1hcmtlZCgpO2lmKHdpbmRvdy5pU2Nyb2xsKXtlLnNldE1hcmtlZCgic2Nyb2xsIil9fX0sX29uRW5kOmZ1bmN0aW9uKGUpe2lmKHRoaXMuX29JT1NTY3JvbGwmJnRoaXMuX29JT1NTY3JvbGwuYk1vbWVudHVtKXt0aGlzLl9vSU9TU2Nyb2xsLmlUaW1lU3RhbXA9ZS50aW1lU3RhbXB9aWYodGhpcy5fb1B1bGxEb3duJiZ0aGlzLl9vUHVsbERvd24uX2JUb3VjaE1vZGUpe3RoaXMuX29QdWxsRG93bi5kb1Njcm9sbEVuZCgpO3RoaXMuX3JlZnJlc2goKX1pZih0aGlzLl9iRHJhZ1Njcm9sbCYmdGhpcy5faURpcmVjdGlvbil7ZS5zZXRNYXJrZWQoKX19LF9vbk1vdXNlRG93bjpmdW5jdGlvbihlKXtpZihlLmJ1dHRvbj09MCl7dGhpcy5fYlNjcm9sbGluZz10cnVlO3RoaXMuX29uU3RhcnQoZSl9fSxfb25Nb3VzZU1vdmU6ZnVuY3Rpb24oRSl7aWYodGhpcy5fYlNjcm9sbGluZyl7dmFyIGU9RS5vcmlnaW5hbEV2ZW50O3ZhciBiPWUuYnV0dG9uc3x8ZS53aGljaDtpZihiPT0xKXt2YXIgYz10aGlzLl8kQ29udGFpbmVyWzBdO2Muc2Nyb2xsTGVmdD1jLnNjcm9sbExlZnQrdGhpcy5faVgtRS5wYWdlWDtjLnNjcm9sbFRvcD1jLnNjcm9sbFRvcCt0aGlzLl9pWS1FLnBhZ2VZO3RoaXMuX2lYPUUucGFnZVg7dGhpcy5faVk9RS5wYWdlWX19fSxfb25Nb3VzZVVwOmZ1bmN0aW9uKGUpe3RoaXMuX2JTY3JvbGxpbmc9ZmFsc2U7dGhpcy5fb25FbmQoKX0sb25CZWZvcmVSZW5kZXJpbmc6ZnVuY3Rpb24oKXtpZih0aGlzLl9zUmVzaXplTGlzdGVuZXJJZCl7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3NSZXNpemVMaXN0ZW5lcklkKTt0aGlzLl9zUmVzaXplTGlzdGVuZXJJZD1udWxsfXZhciBjPXRoaXMuXyRDb250YWluZXI7aWYoYyl7aWYoYy5oZWlnaHQoKT4wKXt0aGlzLl9zY3JvbGxYPWMuc2Nyb2xsTGVmdCgpO3RoaXMuX3Njcm9sbFk9Yy5zY3JvbGxUb3AoKX1jLm9mZigpfX0sb25BZnRlclJlbmRlcmluZzpmdW5jdGlvbigpe3ZhciBjPXRoaXMuXyRDb250YWluZXI9JC5zYXAuYnlJZCh0aGlzLl9zQ29udGVudElkKS5wYXJlbnQoKTt2YXIgXz1xLnByb3h5KHRoaXMuX3JlZnJlc2gsdGhpcyk7dGhpcy5fc2V0T3ZlcmZsb3coKTt0aGlzLl9zY3JvbGxUbyh0aGlzLl9zY3JvbGxYLHRoaXMuX3Njcm9sbFkpO3RoaXMuX3JlZnJlc2goKTtpZighYy5pcygiOnZpc2libGUiKXx8ISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXJ8fHRoaXMuX29QdWxsRG93bnx8dGhpcy5fZm5TY3JvbGxMb2FkQ2FsbGJhY2spe3RoaXMuX3NSZXNpemVMaXN0ZW5lcklkPXNhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIucmVnaXN0ZXIoY1swXSxfKX1jLnNjcm9sbChxLnByb3h5KHRoaXMuX29uU2Nyb2xsLHRoaXMpKTtpZihzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe2Mub24oInRvdWNoY2FuY2VsIHRvdWNoZW5kIixxLnByb3h5KHRoaXMuX29uRW5kLHRoaXMpKS5vbigidG91Y2hzdGFydCIscS5wcm94eSh0aGlzLl9vblN0YXJ0LHRoaXMpKS5vbigidG91Y2htb3ZlIixxLnByb3h5KHRoaXMuX29uVG91Y2hNb3ZlLHRoaXMpKX1lbHNlIGlmKHRoaXMuX2JEcmFnU2Nyb2xsKXtjLm9uKCJtb3VzZXVwIG1vdXNlbGVhdmUiLHEucHJveHkodGhpcy5fb25Nb3VzZVVwLHRoaXMpKS5tb3VzZWRvd24ocS5wcm94eSh0aGlzLl9vbk1vdXNlRG93bix0aGlzKSkubW91c2Vtb3ZlKHEucHJveHkodGhpcy5fb25Nb3VzZU1vdmUsdGhpcykpfX0sX3JlYWRBY3R1YWxTY3JvbGxQb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXMuXyRDb250YWluZXIud2lkdGgoKT4wKXt0aGlzLl9zY3JvbGxYPXRoaXMuXyRDb250YWluZXIuc2Nyb2xsTGVmdCgpfWlmKHRoaXMuXyRDb250YWluZXIuaGVpZ2h0KCk+MCl7dGhpcy5fc2Nyb2xsWT10aGlzLl8kQ29udGFpbmVyLnNjcm9sbFRvcCgpfX0sX3Njcm9sbFRvOmZ1bmN0aW9uKHgseSx0KXtpZih0aGlzLl8kQ29udGFpbmVyLmxlbmd0aD4wKXtpZih0PjApe3RoaXMuXyRDb250YWluZXIuYW5pbWF0ZSh7c2Nyb2xsVG9wOnksc2Nyb2xsTGVmdDp4fSx0LHEucHJveHkodGhpcy5fcmVhZEFjdHVhbFNjcm9sbFBvc2l0aW9uLHRoaXMpKX1lbHNle3RoaXMuXyRDb250YWluZXIuc2Nyb2xsVG9wKHkpO3RoaXMuXyRDb250YWluZXIuc2Nyb2xsTGVmdCh4KTt0aGlzLl9yZWFkQWN0dWFsU2Nyb2xsUG9zaXRpb24oKX19fX07ZnVuY3Rpb24gYShzLGMpe3ZhciBkO2lmKCFzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gmJiEkLnNhcC5zaW11bGF0ZU1vYmlsZU9uRGVza3RvcCYmIWMubm9uVG91Y2hTY3JvbGxpbmcpe3JldHVybn1pZihzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2h8fCQuc2FwLnNpbXVsYXRlTW9iaWxlT25EZXNrdG9wKXskLnNhcC5yZXF1aXJlKCJqcXVlcnkuc2FwLm1vYmlsZSIpfWQ9e19pbml0OmZ1bmN0aW9uKEMsYixjKXtmdW5jdGlvbiBlKGYsaCx2KXt2YXIgbz1uZXcgd2luZG93LlNjcm9sbGVyKGZ1bmN0aW9uKGosdCxrKXt2YXIgbT0kLnNhcC5ieUlkKGYpLnBhcmVudCgpO20uc2Nyb2xsTGVmdChqKTttLnNjcm9sbFRvcCh0KX0se3Njcm9sbGluZ1g6aCxzY3JvbGxpbmdZOnYsYm91bmNpbmc6ZmFsc2V9KTtyZXR1cm4gb31mdW5jdGlvbiBnKCl7aWYoYy56eW5nYSl7cmV0dXJuInoifWlmKHNhcC51aS5EZXZpY2Uub3MuYW5kcm9pZCYmc2FwLnVpLkRldmljZS5vcy52ZXJzaW9uPDQuMXx8c2FwLnVpLkRldmljZS5vcy5ibGFja2JlcnJ5fHxzYXAudWkuRGV2aWNlLm9zLmlvcyYmc2FwLnVpLkRldmljZS5vcy52ZXJzaW9uPDYpe3JldHVybiJpIn1pZighc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoJiYkLnNhcC5zaW11bGF0ZU1vYmlsZU9uRGVza3RvcCl7cmV0dXJuImkifWlmKGMuaXNjcm9sbD09ImZvcmNlInx8KHNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCYmKGMuaXNjcm9sbHx8c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0Tm9OYXRpdmVTY3JvbGwoKSkpKXtyZXR1cm4iaSJ9cmV0dXJuIm4ifXZhciBsPWcoKTt0aGlzLl9wcmV2ZW50VG91Y2hNb3ZlRGVmYXVsdD0hIWMucHJldmVudERlZmF1bHQ7dGhpcy5fc2Nyb2xsZXI9bnVsbDtzd2l0Y2gobCl7Y2FzZSJ6IjokLnNhcC5yZXF1aXJlKCJzYXAudWkudGhpcmRwYXJ0eS56eW5nYXNjcm9sbCIpOyQuZXh0ZW5kKHRoaXMseik7dGhpcy5fenluZ2E9dHJ1ZTt0aGlzLl9zY3JvbGxlcj1lKHRoaXMuX3NDb250ZW50SWQsdGhpcy5fYkhvcml6b250YWwsdGhpcy5fYlZlcnRpY2FsKTticmVhaztjYXNlImkiOiQuc2FwLnJlcXVpcmUoInNhcC51aS50aGlyZHBhcnR5LmlzY3JvbGwiKTskLmV4dGVuZCh0aGlzLGkpO3RoaXMuX2JJU2Nyb2xsPXRydWU7YnJlYWs7ZGVmYXVsdDppZigkLm1vYmlsZSYmJC5ldmVudC5zcGVjaWFsLnN3aXBlJiYkLmV2ZW50LnNwZWNpYWwuc3dpcGUuc2Nyb2xsU3VwcmVzc2lvblRocmVzaG9sZDwxMjApeyQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zY3JvbGxTdXByZXNzaW9uVGhyZXNob2xkPTEyMH0kLmV4dGVuZCh0aGlzLG4pO2lmKGMubm9uVG91Y2hTY3JvbGxpbmc9PT10cnVlKXt0aGlzLl9iRHJhZ1Njcm9sbD10cnVlfWlmKHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpKXt0aGlzLl9zY3JvbGxYPTk5OTl9aWYoc2FwLnVpLkRldmljZS5vcy5pb3Mpe3RoaXMuX29JT1NTY3JvbGw9e2lUaW1lU3RhbXA6MCxiTW9tZW50dW06ZmFsc2V9fWJyZWFrfX0sX2V4aXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9jbGVhbnVwKXt0aGlzLl9jbGVhbnVwKCl9dGhpcy5fc2Nyb2xsZXI9bnVsbH19OyQuZXh0ZW5kKHMsZCl9cmV0dXJuIFN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuVmlld1JlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLlZpZXdSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9WaWV3UmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIFY9e307Vi5hZGREaXNwbGF5Q2xhc3M9ZnVuY3Rpb24ocixjKXtpZihjLmdldERpc3BsYXlCbG9jaygpfHwoYy5nZXRXaWR0aCgpPT09IjEwMCUiJiZjLmdldEhlaWdodCgpPT09IjEwMCUiKSl7ci5hZGRDbGFzcygic2FwVWlWaWV3RGlzcGxheUJsb2NrIil9fTtyZXR1cm4gVn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3UmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuWE1MVmlld1JlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL1hNTFZpZXdSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vVmlld1JlbmRlcmVyJ10sZnVuY3Rpb24ocSxWKXsidXNlIHN0cmljdCI7dmFyIFg9e307WC5yZW5kZXI9ZnVuY3Rpb24ocixjKXt2YXIgJD1jLl8kb2xkQ29udGVudD1zYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLmZpbmRQcmVzZXJ2ZWRDb250ZW50KGMuZ2V0SWQoKSk7aWYoJC5sZW5ndGg9PT0wKXt2YXIgcz1jLmlzU3ViVmlldygpO2lmKCFzKXtyLndyaXRlKCI8ZGl2Iik7ci53cml0ZUNvbnRyb2xEYXRhKGMpO3IuYWRkQ2xhc3MoInNhcFVpVmlldyIpO3IuYWRkQ2xhc3MoInNhcFVpWE1MVmlldyIpO1YuYWRkRGlzcGxheUNsYXNzKHIsYyk7ci53cml0ZUF0dHJpYnV0ZSgiZGF0YS1zYXAtdWktcHJlc2VydmUiLGMuZ2V0SWQoKSk7aWYoYy5nZXRXaWR0aCgpKXtyLmFkZFN0eWxlKCJ3aWR0aCIsYy5nZXRXaWR0aCgpKX1pZihjLmdldEhlaWdodCgpKXtyLmFkZFN0eWxlKCJoZWlnaHQiLGMuZ2V0SGVpZ2h0KCkpfXIud3JpdGVTdHlsZXMoKTtyLndyaXRlQ2xhc3NlcygpO3Iud3JpdGUoIj4iKX1mb3IodmFyIGk9MDtpPGMuX2FQYXJzZWRDb250ZW50Lmxlbmd0aDtpKyspe3ZhciBmPWMuX2FQYXJzZWRDb250ZW50W2ldO2lmKGYmJnR5cGVvZihmKT09PSJzdHJpbmciKXtyLndyaXRlKGYpfWVsc2V7ci5yZW5kZXJDb250cm9sKGYpO2lmKCFmLmJPdXRwdXQpe3Iud3JpdGUoJzxkaXYgaWQ9InNhcC11aS1kdW1teS0nK2YuZ2V0SWQoKSsnIiBjbGFzcz0ic2FwVWlIaWRkZW4iLz4nKX19fWlmKCFzKXtyLndyaXRlKCI8L2Rpdj4iKX19ZWxzZXtyLnJlbmRlckNvbnRyb2woYy5vQWZ0ZXJSZW5kZXJpbmdOb3RpZmllcik7ci53cml0ZSgnPGRpdiBpZD0ic2FwLXVpLWR1bW15LScrYy5nZXRJZCgpKyciIGNsYXNzPSJzYXBVaUhpZGRlbiI+Jyk7Zm9yKHZhciBpPTA7aTxjLl9hUGFyc2VkQ29udGVudC5sZW5ndGg7aSsrKXt2YXIgZj1jLl9hUGFyc2VkQ29udGVudFtpXTtpZih0eXBlb2YoZikhPT0ic3RyaW5nIil7cS5zYXAuYnlJZChmLmdldElkKCksJCkucmVwbGFjZVdpdGgoJzxkaXYgaWQ9InNhcC11aS1kdW1teS0nK2YuZ2V0SWQoKSsnIiBjbGFzcz0ic2FwVWlIaWRkZW4iLz4nKTtyLnJlbmRlckNvbnRyb2woZil9fXIud3JpdGUoJzwvZGl2PicpfX07cmV0dXJuIFh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnRSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudFJlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdG1wbC9ET01FbGVtZW50UmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEQ9e307RC5yZW5kZXI9ZnVuY3Rpb24ocixlKXtyLndyaXRlKCI8Iik7ci53cml0ZShlLmdldFRhZygpKTtyLndyaXRlQ29udHJvbERhdGEoZSk7cS5lYWNoKGUuZ2V0QXR0cmlidXRlcygpLGZ1bmN0aW9uKGksYSl7dmFyIG49YS5nZXROYW1lKCkudG9Mb3dlckNhc2UoKTtpZihuPT09ImNsYXNzIil7dmFyIGM9YS5nZXRWYWx1ZSgpLnNwbGl0KCIgIik7cS5lYWNoKGMsZnVuY3Rpb24oaSxDKXt2YXIgQz1DLnRyaW0oKTtpZihDKXtyLmFkZENsYXNzKEMpfX0pfWVsc2UgaWYobj09PSJzdHlsZSIpe3ZhciBzPWEuZ2V0VmFsdWUoKS5zcGxpdCgiOyIpO3EuZWFjaChzLGZ1bmN0aW9uKGksUyl7dmFyIGk9Uy5pbmRleE9mKCI6Iik7aWYoaSE9LTEpe3ZhciBrPVMuc3Vic3RyaW5nKDAsaSkudHJpbSgpO3ZhciB2PVMuc3Vic3RyaW5nKGkrMSkudHJpbSgpO3IuYWRkU3R5bGUoayx2KX19KX1lbHNle3Iud3JpdGVBdHRyaWJ1dGVFc2NhcGVkKGEuZ2V0TmFtZSgpLGEuZ2V0VmFsdWUoKSl9fSk7ci53cml0ZUNsYXNzZXMoKTtyLndyaXRlU3R5bGVzKCk7dmFyIEU9ZS5nZXRFbGVtZW50cygpLGg9ISFlLmdldFRleHQoKXx8RS5sZW5ndGg+MDtpZighaCl7ci53cml0ZSgiLz4iKX1lbHNle3Iud3JpdGUoIj4iKTtpZihlLmdldFRleHQoKSl7ci53cml0ZUVzY2FwZWQoZS5nZXRUZXh0KCkpfXEuZWFjaChFLGZ1bmN0aW9uKGksYyl7ci5yZW5kZXJDb250cm9sKGMpfSk7ci53cml0ZSgiPC8iKTtyLndyaXRlKGUuZ2V0VGFnKCkpO3Iud3JpdGUoIj4iKX19O3JldHVybiBEfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2xSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sUmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS90bXBsL1RlbXBsYXRlQ29udHJvbFJlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBUPXt9O1QucmVuZGVyPWZ1bmN0aW9uKHIsYyl7dmFyIGk9Yy5pc0lubGluZSgpO2lmKCFpKXtyLndyaXRlKCI8ZGl2Iik7ci53cml0ZUNvbnRyb2xEYXRhKGMpO3Iud3JpdGVTdHlsZXMoKTtyLndyaXRlQ2xhc3NlcygpO3Iud3JpdGUoIj4iKX12YXIgUj10aGlzLnJlbmRlclRlbXBsYXRlfHxjLmdldFRlbXBsYXRlUmVuZGVyZXIoKTtpZihSKXtSLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1pZighaSl7ci53cml0ZSgiPC9kaXY+Iil9fTtyZXR1cm4gVH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuRmlsZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuRmlsZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvRmlsZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9EZXZpY2UnXSxmdW5jdGlvbihxLEQpeyd1c2Ugc3RyaWN0Jzt2YXIgRj17c2F2ZTpmdW5jdGlvbihkLGYscyxtLGMpe3ZhciBhPWYrJy4nK3M7aWYoYz09PSd1dGYtOCcmJnM9PT0nY3N2Jyl7ZD0nXHVmZWZmJytkfWlmKHdpbmRvdy5CbG9iKXt2YXIgdD0nZGF0YTonK207aWYoYyl7dCs9JztjaGFyc2V0PScrY312YXIgYj1uZXcgd2luZG93LkJsb2IoW2RdLHt0eXBlOnR9KTtpZih3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2Ipe3dpbmRvdy5uYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihiLGEpfWVsc2V7dmFyIHU9d2luZG93LlVSTHx8d2luZG93LndlYmtpdFVSTDt2YXIgQj11LmNyZWF0ZU9iamVjdFVSTChiKTt2YXIgbD13aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO2lmKCdkb3dubG9hZCdpbiBsKXt2YXIgJD1xKGRvY3VtZW50LmJvZHkpO3ZhciBlPXEobCkuYXR0cih7ZG93bmxvYWQ6YSxocmVmOkIsc3R5bGU6J2Rpc3BsYXk6bm9uZSd9KTskLmFwcGVuZChlKTtlLmdldCgwKS5jbGljaygpO2UucmVtb3ZlKCl9ZWxzZXt3aW5kb3cub3Blbih0KyI7YmFzZTY0LCIrd2luZG93LmJ0b2EoZCkpfX19ZWxzZSBpZihELmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJkQuYnJvd3Nlci52ZXJzaW9uPD05KXt2YXIgJD1xKGRvY3VtZW50LmJvZHkpO3ZhciBnPXEoJzxpZnJhbWUvPicse3N0eWxlOidkaXNwbGF5Om5vbmUnfSk7JC5hcHBlbmQoZyk7dmFyIG89Zy5nZXQoMCkuY29udGVudFdpbmRvdy5kb2N1bWVudDtvLm9wZW4obSwncmVwbGFjZScpO2lmKGMpe28uY2hhcnNldD1jfW8ud3JpdGUoZCk7by5jbG9zZSgpO3ZhciBUPW5ldyBEYXRlKCk7dmFyIFM9by5leGVjQ29tbWFuZCgnU2F2ZUFzJyxmYWxzZSxhKTtpZighUyYmbmV3IERhdGUoKS1UPDEwKXtvLmV4ZWNDb21tYW5kKCdTYXZlQXMnLGZhbHNlLGErJy50eHQnKX1nLnJlbW92ZSgpfX19O3JldHVybiBGfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5MaWJyYXJ5SW5mbycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuTGlicmFyeUluZm8nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL0xpYnJhcnlJbmZvIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0JywnanF1ZXJ5LnNhcC5zY3JpcHQnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgTD1CLmV4dGVuZCgic2FwLnVpLmNvcmUudXRpbC5MaWJyYXJ5SW5mbyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7Qi5hcHBseSh0aGlzKTt0aGlzLl9vTGliSW5mb3M9e319LGRlc3Ryb3k6ZnVuY3Rpb24oKXtCLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9vTGliSW5mb3M9e319LGdldEludGVyZmFjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pO0wucHJvdG90eXBlLl9sb2FkTGlicmFyeU1ldGFkYXRhPWZ1bmN0aW9uKGwsYyl7bD1sLnJlcGxhY2UoL1wvL2csIi4iKTtpZih0aGlzLl9vTGliSW5mb3NbbF0pe3Euc2FwLmRlbGF5ZWRDYWxsKDAsd2luZG93LGMsW3RoaXMuX29MaWJJbmZvc1tsXV0pO3JldHVybn12YXIgdT1xLnNhcC5nZXRNb2R1bGVQYXRoKGwsJy8nKSx0PXRoaXM7cS5hamF4KHt1cmw6dSsiLmxpYnJhcnkiLGRhdGFUeXBlOiJ4bWwiLGVycm9yOmZ1bmN0aW9uKHgscyxlKXtxLnNhcC5sb2cuZXJyb3IoImZhaWxlZCB0byBsb2FkIGxpYnJhcnkgZGV0YWlscyBmcm9tICciK3UrIi5saWJyYXJ5JzogIitzKyIsICIrZSk7dC5fb0xpYkluZm9zW2xdPXtuYW1lOmwsZGF0YTpudWxsLHVybDp1fTtjKHQuX29MaWJJbmZvc1tsXSl9LHN1Y2Nlc3M6ZnVuY3Rpb24oZCxzLHgpe3QuX29MaWJJbmZvc1tsXT17bmFtZTpsLGRhdGE6ZCx1cmw6dX07Yyh0Ll9vTGliSW5mb3NbbF0pfX0pfTtMLnByb3RvdHlwZS5fZ2V0TGlicmFyeUluZm89ZnVuY3Rpb24obCxjKXt0aGlzLl9sb2FkTGlicmFyeU1ldGFkYXRhKGwsZnVuY3Rpb24oZCl7dmFyIHI9e2xpYnM6W10sbGlicmFyeTpkLm5hbWUsbGlicmFyeVVybDpkLnVybH07aWYoZC5kYXRhKXt2YXIgJD1xKGQuZGF0YSk7ci52ZW5kb3I9JC5maW5kKCJ2ZW5kb3IiKS50ZXh0KCk7ci5jb3B5cmlnaHQ9JC5maW5kKCJjb3B5cmlnaHQiKS50ZXh0KCk7ci52ZXJzaW9uPSQuZmluZCgidmVyc2lvbiIpLnRleHQoKTtyLmRvY3VtZW50YXRpb249JC5maW5kKCJkb2N1bWVudGF0aW9uIikudGV4dCgpfWMocil9KX07TC5wcm90b3R5cGUuX2dldFRoaXJkUGFydHlJbmZvPWZ1bmN0aW9uKGwsYyl7dGhpcy5fbG9hZExpYnJhcnlNZXRhZGF0YShsLGZ1bmN0aW9uKGQpe3ZhciByPXtsaWJzOltdLGxpYnJhcnk6ZC5uYW1lLGxpYnJhcnlVcmw6ZC51cmx9O2lmKGQuZGF0YSl7dmFyICQ9cShkLmRhdGEpLmZpbmQoImFwcERhdGEiKS5maW5kKCJ0aGlyZHBhcnR5IikuY2hpbGRyZW4oKTskLmVhY2goZnVuY3Rpb24oaSxvKXtpZihvLm5vZGVOYW1lPT09ImxpYiIpe3ZhciBhPXEobyk7dmFyIGI9YS5jaGlsZHJlbigibGljZW5zZSIpO3IubGlicy5wdXNoKHtkaXNwbGF5TmFtZTphLmF0dHIoImRpc3BsYXlOYW1lIiksaG9tZXBhZ2U6YS5hdHRyKCJob21lcGFnZSIpLGxpY2Vuc2U6e3VybDpiLmF0dHIoInVybCIpLHR5cGU6Yi5hdHRyKCJ0eXBlIiksZmlsZTpkLnVybCtiLmF0dHIoImZpbGUiKX19KX19KX1jKHIpfSl9O0wucHJvdG90eXBlLl9nZXREb2N1SW5kZXg9ZnVuY3Rpb24obCxjKXt0aGlzLl9sb2FkTGlicmFyeU1ldGFkYXRhKGwsZnVuY3Rpb24oZCl7dmFyIGE9ZC5uYW1lLGI9ZC51cmwscj17ImRvY3UiOnt9LGxpYnJhcnk6YSxsaWJyYXJ5VXJsOmJ9O2lmKCFkLmRhdGEpe2Mocik7cmV0dXJufXZhciBEPXEoZC5kYXRhKS5maW5kKCJhcHBEYXRhIikuZmluZCgiZG9jdW1lbnRhdGlvbiIpO3ZhciB1PUQuYXR0cigiaW5kZXhVcmwiKTtpZighdSl7YyhyKTtyZXR1cm59aWYoRC5hdHRyKCJyZXNvbHZlIik9PSJsaWIiKXt1PWQudXJsK3V9cS5hamF4KHt1cmw6dSxkYXRhVHlwZToianNvbiIsZXJyb3I6ZnVuY3Rpb24oeCxzLGUpe3Euc2FwLmxvZy5lcnJvcigiZmFpbGVkIHRvIGxvYWQgbGlicmFyeSBkb2N1IGZyb20gJyIrdSsiJzogIitzKyIsICIrZSk7YyhyKX0sc3VjY2VzczpmdW5jdGlvbihkLHMseCl7ZC5saWJyYXJ5PWE7ZC5saWJyYXJ5VXJsPWI7YyhkKX19KX0pfTtyZXR1cm4gTH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLndzLlJlYWR5U3RhdGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS53cy5SZWFkeVN0YXRlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvd3MvUmVhZHlTdGF0ZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgUj17Q09OTkVDVElORzowLE9QRU46MSxDTE9TSU5HOjIsQ0xPU0VEOjN9O3JldHVybiBSfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0JpbmRpbmdNb2RlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBCPXtEZWZhdWx0OiJEZWZhdWx0IixPbmVUaW1lOiJPbmVUaW1lIixPbmVXYXk6Ik9uZVdheSIsVHdvV2F5OiJUd29XYXkifTtyZXR1cm4gQn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0NoYW5nZVJlYXNvbiIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz17U29ydDoic29ydCIsRmlsdGVyOiJmaWx0ZXIiLENoYW5nZToiY2hhbmdlIixDb250ZXh0OiJjb250ZXh0IixSZWZyZXNoOiJyZWZyZXNoIn07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3InKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3InKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvRmlsdGVyT3BlcmF0b3IiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEY9e0VROiJFUSIsTkU6Ik5FIixMVDoiTFQiLExFOiJMRSIsR1Q6IkdUIixHRToiR0UiLEJUOiJCVCIsQ29udGFpbnM6IkNvbnRhaW5zIixTdGFydHNXaXRoOiJTdGFydHNXaXRoIixFbmRzV2l0aDoiRW5kc1dpdGgifTtyZXR1cm4gRn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5GaWx0ZXJUeXBlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkZpbHRlclR5cGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvRmlsdGVyVHlwZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgRj17QXBwbGljYXRpb246IkFwcGxpY2F0aW9uIixDb250cm9sOiJDb250cm9sIn07cmV0dXJuIEZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkZvcm1hdEV4Y2VwdGlvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9Gb3JtYXRFeGNlcHRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FeGNlcHRpb24nXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgRj1mdW5jdGlvbihtKXt0aGlzLm5hbWU9IkZvcm1hdEV4Y2VwdGlvbiI7dGhpcy5tZXNzYWdlPW19O0YucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChFLnByb3RvdHlwZSk7cmV0dXJuIEZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvUGFyc2VFeGNlcHRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FeGNlcHRpb24nXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgUD1mdW5jdGlvbihtKXt0aGlzLm5hbWU9IlBhcnNlRXhjZXB0aW9uIjt0aGlzLm1lc3NhZ2U9bX07UC5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KEUucHJvdG90eXBlKTtyZXR1cm4gUH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5Tb3J0ZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuU29ydGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL1NvcnRlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgUz1zYXAudWkuYmFzZS5PYmplY3QuZXh0ZW5kKCJzYXAudWkubW9kZWwuU29ydGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocCxkLGcpe2lmKHR5cGVvZiBwPT09Im9iamVjdCIpe3ZhciBzPXA7cD1zLnBhdGg7ZD1zLmRlc2NlbmRpbmc7Zz1zLmdyb3VwfXRoaXMuc1BhdGg9cDt2YXIgaT10aGlzLnNQYXRoLmluZGV4T2YoIj4iKTtpZihpPjApe3RoaXMuc1BhdGg9dGhpcy5zUGF0aC5zdWJzdHIoaSsxKX10aGlzLmJEZXNjZW5kaW5nPWQ7dGhpcy52R3JvdXA9ZztpZih0eXBlb2YgZz09ImJvb2xlYW4iJiZnKXt0aGlzLmZuR3JvdXA9ZnVuY3Rpb24oYyl7cmV0dXJuIGMuZ2V0UHJvcGVydHkodGhpcy5zUGF0aCl9fWlmKHR5cGVvZiBnPT0iZnVuY3Rpb24iKXt0aGlzLmZuR3JvdXA9Z319fSk7cmV0dXJuIFN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuVHlwZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5UeXBlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL1R5cGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgVD1CLmV4dGVuZCgic2FwLnVpLm1vZGVsLlR5cGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0IuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc05hbWU9IlR5cGUifSxtZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJnZXROYW1lIl19fSk7VC5wcm90b3R5cGUuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNOYW1lfTtyZXR1cm4gVH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5WYWxpZGF0ZUV4Y2VwdGlvbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5WYWxpZGF0ZUV4Y2VwdGlvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9WYWxpZGF0ZUV4Y2VwdGlvbiIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V4Y2VwdGlvbiddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBWPWZ1bmN0aW9uKG0sdil7dGhpcy5uYW1lPSJWYWxpZGF0ZUV4Y2VwdGlvbiI7dGhpcy5tZXNzYWdlPW07dGhpcy52aW9sYXRlZENvbnN0cmFpbnRzPXZ9O1YucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChFLnByb3RvdHlwZSk7cmV0dXJuIFZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuYW5hbHl0aWNzLm9kYXRhNGFuYWx5dGljcycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5hbmFseXRpY3Mub2RhdGE0YW5hbHl0aWNzJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2FuYWx5dGljcy9vZGF0YTRhbmFseXRpY3MiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIG89b3x8e307by5jb25zdGFudHM9e307by5jb25zdGFudHNbIlNBUF9OQU1FU1BBQ0UiXT0iaHR0cDovL3d3dy5zYXAuY29tL1Byb3RvY29scy9TQVBEYXRhIjtvLmNvbnN0YW50c1siVkVSU0lPTiJdPSIwLjciO28uaGVscGVyPXt0b2tlbml6ZU5hbWV0b0xhYmVsVGV4dDpmdW5jdGlvbihuKXt2YXIgbD0iIjtsPW4ucmVwbGFjZSgvXlBfKC4qKS8sIiQxIik7bD1sLnJlcGxhY2UoLyhbXkEtWjAtOV9dKykoW0EtWjAtOV9dKS9nLCIkMSAkMiIpO2w9bC5yZXBsYWNlKC8oW0EtWjAtOV9dezIsfSkoW0EtWjAtOV9dKShbXkEtWjAtOV9dKykvZywiJDEgJDIkMyIpO2w9bC5yZXBsYWNlKC8oLiopIF9FJC8sIiQxIik7bD1sLnJlcGxhY2UoLyguKikgXyguKikvZywiJDEgJDIiKTtyZXR1cm4gbH19O28uTW9kZWw9ZnVuY3Rpb24obSxwKXt0aGlzLl9pbml0KG0scCl9O28uTW9kZWwuUmVmZXJlbmNlQnlVUkk9ZnVuY3Rpb24odSl7cmV0dXJue3NTZXJ2aWNlVVJJOnV9fTtvLk1vZGVsLlJlZmVyZW5jZUJ5TW9kZWw9ZnVuY3Rpb24obSl7cmV0dXJue29Nb2RlbDptfX07by5Nb2RlbC5SZWZlcmVuY2VXaXRoV29ya2Fyb3VuZD1mdW5jdGlvbihtLHcpe3JldHVybntvTW9kZWxSZWZlcmVuY2U6bSxhV29ya2Fyb3VuZElEOnd9fTtvLk1vZGVsLnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24obSxwKXtpZih0eXBlb2YgcD09InN0cmluZyIpe3Rocm93IkRlcHJlY2F0ZWQgc2Vjb25kIGFyZ3VtZW50OiBBZGp1c3QgeW91ciBpbnZvY2F0aW9uIGJ5IHBhc3NpbmcgYW4gb2JqZWN0IHdpdGggYSBwcm9wZXJ0eSBzQW5ub3RhdGlvbkpTT05Eb2MgYXMgYSBzZWNvbmQgYXJndW1lbnQgaW5zdGVhZCJ9dGhpcy5fbVBhcmFtZXRlcj1wO3RoaXMuX29BY3RpdmF0ZWRXb3JrYXJvdW5kcz1uZXcgT2JqZWN0KCk7aWYobSYmbS5hV29ya2Fyb3VuZElEKXtmb3IodmFyIGk9LTEsSTtJPW0uYVdvcmthcm91bmRJRFsrK2ldOyl7dGhpcy5fb0FjdGl2YXRlZFdvcmthcm91bmRzW0ldPXRydWV9bT1tLm9Nb2RlbFJlZmVyZW5jZX1pZighbXx8KCFtLnNTZXJ2aWNlVVJJJiYhbS5vTW9kZWwpKXt0aHJvdyJVc2FnZSB3aXRoIG9Nb2RlbFJlZmVyZW5jZSBiZWluZyBhbiBpbnN0YW5jZSBvZiBNb2RlbC5SZWZlcmVuY2VCeVVSSSBvciBNb2RlbC5SZWZlcmVuY2VCeU1vZGVsIn1pZihtLm9Nb2RlbCl0aGlzLl9vTW9kZWw9bS5vTW9kZWw7ZWxzZSB0aGlzLl9vTW9kZWw9bmV3IHNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1vZGVsKG0uc1NlcnZpY2VVUkkpO2lmKHRoaXMuX29Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKS5kYXRhU2VydmljZXM9PXVuZGVmaW5lZCl7dGhyb3ciTW9kZWwgY291bGQgbm90IGJlIGxvYWRlZCJ9aWYocCYmcC5zQW5ub3RhdGlvbkpTT05Eb2MpdGhpcy5tZXJnZVYyQW5ub3RhdGlvbnMocC5zQW5ub3RhdGlvbkpTT05Eb2MpO3RoaXMuX29RdWVyeVJlc3VsdFNldD1uZXcgT2JqZWN0KCk7dGhpcy5fb1BhcmFtZXRlcml6YXRpb25TZXQ9bmV3IE9iamVjdCgpO3RoaXMuX29FbnRpdHlUeXBlU2V0PW5ldyBPYmplY3QoKTt0aGlzLl9vRW50aXR5U2V0U2V0PW5ldyBPYmplY3QoKTt0aGlzLl9vRW50aXR5VHlwZU5hbWVUb0VudGl0eVNldE1hcD1uZXcgT2JqZWN0KCk7dmFyIHM9dGhpcy5fb01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpLmRhdGFTZXJ2aWNlcy5zY2hlbWFbMF07Zm9yKHZhciBpPS0xLGM7Yz1zLmVudGl0eUNvbnRhaW5lclsrK2ldOyl7aWYoYy5pc0RlZmF1bHRFbnRpdHlDb250YWluZXI9PSJ0cnVlIil7dGhpcy5fb0RlZmF1bHRFbnRpdHlDb250YWluZXI9YzticmVha319dmFyIGU9cy5lbnRpdHlUeXBlO3ZhciBRPVtdLFA9W10sdT1bXTtmb3IodmFyIGk9LTEsdDt0PWVbKytpXTspe3ZhciBiPWZhbHNlO2lmKHQuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXtmb3IodmFyIGo9LTEsRTtFPXQuZXh0ZW5zaW9uc1srK2pdOyl7aWYoRS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UmJkUubmFtZT09InNlbWFudGljcyIpe2I9dHJ1ZTtzd2l0Y2goRS52YWx1ZSl7Y2FzZSJhZ2dyZWdhdGUiOlEucHVzaCh0KTticmVhaztjYXNlInBhcmFtZXRlcnMiOlAucHVzaCh0KTticmVhaztkZWZhdWx0OnUucHVzaCh0KX19aWYoYiljb250aW51ZX1pZighYil1LnB1c2godCl9ZWxzZSB1LnB1c2godCl9Zm9yKHZhciBpPS0xLHQ7dD11WysraV07KXt2YXIgYT1uZXcgby5FbnRpdHlUeXBlKHRoaXMuX29Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSxzLHQpO3RoaXMuX29FbnRpdHlUeXBlU2V0W2EuZ2V0UU5hbWUoKV09YTt2YXIgZD10aGlzLl9nZXRFbnRpdHlTZXRzT2ZUeXBlKHMsYS5nZXRRTmFtZSgpKTtpZihkLmxlbmd0aD09MCl0aHJvdyJJbnZhbGlkIGNvbnN1bXB0aW9uIG1vZGVsOiBObyBlbnRpdHkgc2V0IGZvciBlbnRpdHkgdHlwZSAiK2EuZ2V0UU5hbWUoKSsiIGZvdW5kIjtpZihkLmxlbmd0aD4xKXRocm93IlVuc3VwcG9ydGVkIGNvbnN1bXB0aW9uIG1vZGVsOiBNb3JlIHRoYW4gb25lIGVudGl0eSBzZXQgZm9yIGVudGl0eSB0eXBlICIrYS5nZXRRTmFtZSgpKyIgZm91bmQiO3ZhciBmPW5ldyBvLkVudGl0eVNldCh0aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkscyxkWzBdWzBdLGRbMF1bMV0sYSk7dGhpcy5fb0VudGl0eVNldFNldFtmLmdldFFOYW1lKCldPWY7dGhpcy5fb0VudGl0eVR5cGVOYW1lVG9FbnRpdHlTZXRNYXBbYS5nZXRRTmFtZSgpXT1mfXZhciBnPXt9O2Zvcih2YXIgaT0tMSx0O3Q9UFsrK2ldOyl7dmFyIGE9bmV3IG8uRW50aXR5VHlwZSh0aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkscyx0KTt0aGlzLl9vRW50aXR5VHlwZVNldFthLmdldFFOYW1lKCldPWE7dmFyIGQ9dGhpcy5fZ2V0RW50aXR5U2V0c09mVHlwZShzLGEuZ2V0UU5hbWUoKSk7aWYoZC5sZW5ndGg9PTApdGhyb3ciSW52YWxpZCBjb25zdW1wdGlvbiBtb2RlbDogTm8gZW50aXR5IHNldCBmb3IgcGFyYW1ldGVyIGVudGl0eSB0eXBlICIrYS5nZXRRTmFtZSgpKyIgZm91bmQiO2lmKGQubGVuZ3RoPjEpdGhyb3ciVW5zdXBwb3J0ZWQgY29uc3VtcHRpb24gbW9kZWw6IE1vcmUgdGhhbiBvbmUgZW50aXR5IHNldCBmb3IgcGFyYW1ldGVyIGVudGl0eSB0eXBlICIrYS5nZXRRTmFtZSgpKyIgZm91bmQiO3ZhciBmPW5ldyBvLkVudGl0eVNldCh0aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkscyxkWzBdWzBdLGRbMF1bMV0sYSk7dGhpcy5fb0VudGl0eVNldFNldFtmLmdldFFOYW1lKCldPWY7dGhpcy5fb0VudGl0eVR5cGVOYW1lVG9FbnRpdHlTZXRNYXBbYS5nZXRRTmFtZSgpXT1mO3ZhciBoPW5ldyBvLlBhcmFtZXRlcml6YXRpb24oYSxmKTt0aGlzLl9vUGFyYW1ldGVyaXphdGlvblNldFtoLmdldE5hbWUoKV09aDtnW2EuZ2V0UU5hbWUoKV09aDt2YXIgaz1hLmdldFFOYW1lKCk7aWYocy5hc3NvY2lhdGlvbiE9dW5kZWZpbmVkKXtmb3IodmFyIGo9LTEsQTtBPXMuYXNzb2NpYXRpb25bKytqXTspe2lmKEEucmVmZXJlbnRpYWxDb25zdHJhaW50PT11bmRlZmluZWQpY29udGludWU7dmFyIGw9bnVsbDtpZihBLmVuZFswXS50eXBlPT1rJiZBLmVuZFswXS5tdWx0aXBsaWNpdHk9PSIqIiYmQS5lbmRbMV0ubXVsdGlwbGljaXR5PT0iMSIpe2w9QS5lbmRbMV0udHlwZX1lbHNlIGlmKEEuZW5kWzFdLnR5cGU9PWsmJkEuZW5kWzFdLm11bHRpcGxpY2l0eT09IioiJiZBLmVuZFswXS5tdWx0aXBsaWNpdHk9PSIxIil7bD1BLmVuZFswXS50eXBlfWlmKCFsKWNvbnRpbnVlO2lmKEEucmVmZXJlbnRpYWxDb25zdHJhaW50LmRlcGVuZGVudC5wcm9wZXJ0eVJlZi5sZW5ndGghPTEpY29udGludWU7dmFyIG49aC5maW5kUGFyYW1ldGVyQnlOYW1lKEEucmVmZXJlbnRpYWxDb25zdHJhaW50LmRlcGVuZGVudC5wcm9wZXJ0eVJlZlswXS5uYW1lKTtpZihuPT1udWxsKWNvbnRpbnVlO3ZhciB2PXRoaXMuX29FbnRpdHlUeXBlU2V0W2xdO3ZhciBWPXRoaXMuX29FbnRpdHlUeXBlTmFtZVRvRW50aXR5U2V0TWFwW2xdO24uc2V0VmFsdWVTZXRFbnRpdHkodixWKX19fWZvcih2YXIgaT0tMSx0O3Q9UVsrK2ldOyl7dmFyIGE9bmV3IG8uRW50aXR5VHlwZSh0aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkscyx0KTt0aGlzLl9vRW50aXR5VHlwZVNldFthLmdldFFOYW1lKCldPWE7dmFyIHI9YS5nZXRRTmFtZSgpO3ZhciBoPW51bGw7dmFyIHc9bnVsbDtpZihzLmFzc29jaWF0aW9uIT11bmRlZmluZWQpe2Zvcih2YXIgaj0tMSxBO0E9cy5hc3NvY2lhdGlvblsrK2pdOyl7dmFyIHg9bnVsbDtpZihBLmVuZFswXS50eXBlPT1yKXg9QS5lbmRbMV0udHlwZTtlbHNlIGlmKEEuZW5kWzFdLnR5cGU9PXIpeD1BLmVuZFswXS50eXBlO2Vsc2UgY29udGludWU7dmFyIE09bnVsbDtNPWdbeF07aWYoTSE9bnVsbClpZihoIT1udWxsKXt0aHJvdyJMSU1JVEFUSU9OOiBVbmFibGUgdG8gaGFuZGxlIG11bHRpcGxlIHBhcmFtZXRlciBlbnRpdHkgdHlwZXMgb2YgcXVlcnkgZW50aXR5ICIrYS5uYW1lfWVsc2V7aD1NO3c9QX19fXZhciBkPXRoaXMuX2dldEVudGl0eVNldHNPZlR5cGUocyxhLmdldFFOYW1lKCkpO2lmKGQubGVuZ3RoIT0xKXRocm93IkludmFsaWQgY29uc3VtcHRpb24gbW9kZWw6IFRoZXJlIG11c3QgYmUgZXhhY3RseSBvbmUgZW50aXR5IHNldCBmb3IgYW4gZW50aXR5IHR5cGUgYW5ub3RhdGVkIHdpdGggYWdncmVnYXRpbmcgc2VtYW50aWNzIjt2YXIgZj1uZXcgby5FbnRpdHlTZXQodGhpcy5fb01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpLHMsZFswXVswXSxkWzBdWzFdLGEpO3RoaXMuX29FbnRpdHlTZXRTZXRbZi5nZXRRTmFtZSgpXT1mO3RoaXMuX29FbnRpdHlUeXBlTmFtZVRvRW50aXR5U2V0TWFwW2EuZ2V0UU5hbWUoKV09Zjt2YXIgeT1uZXcgby5RdWVyeVJlc3VsdCh0aGlzLGEsZixoKTt0aGlzLl9vUXVlcnlSZXN1bHRTZXRbeS5nZXROYW1lKCldPXk7aWYoaCloLnNldFRhcmdldFF1ZXJ5UmVzdWx0KHksdyk7aWYocy5hc3NvY2lhdGlvbiE9dW5kZWZpbmVkKXtmb3IodmFyIGo9LTEsQTtBPXMuYXNzb2NpYXRpb25bKytqXTspe2lmKEEucmVmZXJlbnRpYWxDb25zdHJhaW50PT11bmRlZmluZWQpY29udGludWU7dmFyIEQ9bnVsbDtpZihBLmVuZFswXS50eXBlPT1yJiZBLmVuZFswXS5tdWx0aXBsaWNpdHk9PSIqIiYmQS5lbmRbMV0ubXVsdGlwbGljaXR5PT0iMSIpe0Q9QS5lbmRbMV0udHlwZX1lbHNlIGlmKEEuZW5kWzFdLnR5cGU9PXImJkEuZW5kWzFdLm11bHRpcGxpY2l0eT09IioiJiZBLmVuZFswXS5tdWx0aXBsaWNpdHk9PSIxIil7RD1BLmVuZFswXS50eXBlfWlmKCFEKWNvbnRpbnVlO2lmKEEucmVmZXJlbnRpYWxDb25zdHJhaW50LmRlcGVuZGVudC5wcm9wZXJ0eVJlZi5sZW5ndGghPTEpY29udGludWU7dmFyIHo9eS5maW5kRGltZW5zaW9uQnlOYW1lKEEucmVmZXJlbnRpYWxDb25zdHJhaW50LmRlcGVuZGVudC5wcm9wZXJ0eVJlZlswXS5uYW1lKTtpZih6PT1udWxsKWNvbnRpbnVlO3ZhciBCPXRoaXMuX29FbnRpdHlUeXBlTmFtZVRvRW50aXR5U2V0TWFwW0RdO3ouc2V0TWVtYmVyc0VudGl0eVNldChCKX19fX0sb1VJNU9EYXRhTW9kZWxBbm5vdGF0YWJsZU9iamVjdDp7b2JqZWN0TmFtZToic2NoZW1hIixrZXlQcm9wTmFtZToibmFtZXNwYWNlIixleHRlbnNpb25zOnRydWUsYVN1Yk9iamVjdDpbe29iamVjdE5hbWU6ImVudGl0eVR5cGUiLGtleVByb3BOYW1lOiJuYW1lIixleHRlbnNpb25zOnRydWUsYVN1Yk9iamVjdDpbe29iamVjdE5hbWU6InByb3BlcnR5IixrZXlQcm9wTmFtZToibmFtZSIsYVN1Yk9iamVjdDpbXSxleHRlbnNpb25zOnRydWV9XX0se29iamVjdE5hbWU6ImVudGl0eUNvbnRhaW5lciIsa2V5UHJvcE5hbWU6Im5hbWUiLGV4dGVuc2lvbnM6ZmFsc2UsYVN1Yk9iamVjdDpbe29iamVjdE5hbWU6ImVudGl0eVNldCIsa2V5UHJvcE5hbWU6Im5hbWUiLGV4dGVuc2lvbnM6dHJ1ZSxhU3ViT2JqZWN0OltdfV19XX0sbWVyZ2VWMkFubm90YXRpb25zOmZ1bmN0aW9uKGEpe3ZhciBBPW51bGw7dHJ5e0E9SlNPTi5wYXJzZShhKX1jYXRjaChlKXtyZXR1cm59dmFyIG07dHJ5e209dGhpcy5fb01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpLmRhdGFTZXJ2aWNlc31jYXRjaChlKXtyZXR1cm59Zm9yKHZhciBwIGluIEEpe2lmKCEodGhpcy5vVUk1T0RhdGFNb2RlbEFubm90YXRhYmxlT2JqZWN0Lm9iamVjdE5hbWU9PXApKWNvbnRpbnVlO2lmKCEoQVtwXWluc3RhbmNlb2YgQXJyYXkpKXtjb250aW51ZX10aGlzLm1lcmdlVjJBbm5vdGF0aW9uTGV2ZWwobVt0aGlzLm9VSTVPRGF0YU1vZGVsQW5ub3RhdGFibGVPYmplY3Qub2JqZWN0TmFtZV0sQVt0aGlzLm9VSTVPRGF0YU1vZGVsQW5ub3RhdGFibGVPYmplY3Qub2JqZWN0TmFtZV0sdGhpcy5vVUk1T0RhdGFNb2RlbEFubm90YXRhYmxlT2JqZWN0KTticmVha31yZXR1cm59LG1lcmdlVjJBbm5vdGF0aW9uTGV2ZWw6ZnVuY3Rpb24oTSxhLHUpe2Zvcih2YXIgaT0tMSxBO0E9YVsrK2ldOyl7Zm9yKHZhciBqPS0xLGI7Yj1NWysral07KXtpZighKEFbdS5rZXlQcm9wTmFtZV09PWJbdS5rZXlQcm9wTmFtZV0pKWNvbnRpbnVlO2lmKEFbImV4dGVuc2lvbnMiXSE9dW5kZWZpbmVkKXtpZihiWyJleHRlbnNpb25zIl09PXVuZGVmaW5lZCliWyJleHRlbnNpb25zIl09bmV3IEFycmF5KCk7Zm9yKHZhciBsPS0xLGM7Yz1BWyJleHRlbnNpb25zIl1bKytsXTspe3ZhciBmPWZhbHNlO2Zvcih2YXIgbT0tMSxkO2Q9YlsiZXh0ZW5zaW9ucyJdWysrbV07KXtpZihjLm5hbWU9PWQubmFtZSYmYy5uYW1lc3BhY2U9PWQubmFtZXNwYWNlKXtkLnZhbHVlPWMudmFsdWU7Zj10cnVlO2JyZWFrfX1pZighZiliWyJleHRlbnNpb25zIl0ucHVzaChjKX19Zm9yKHZhciBrPS0xLFU7VT11LmFTdWJPYmplY3RbKytrXTspe2Zvcih2YXIgcCBpbiBBKXtpZighKFUub2JqZWN0TmFtZT09cCkpY29udGludWU7aWYoIShBW1Uub2JqZWN0TmFtZV1pbnN0YW5jZW9mIEFycmF5KSljb250aW51ZTtpZigoYltVLm9iamVjdE5hbWVdPT11bmRlZmluZWQpfHwoIShiW1Uub2JqZWN0TmFtZV1pbnN0YW5jZW9mIEFycmF5KSkpY29udGludWU7dGhpcy5tZXJnZVYyQW5ub3RhdGlvbkxldmVsKGJbVS5vYmplY3ROYW1lXSxBW1Uub2JqZWN0TmFtZV0sVSk7YnJlYWt9fX19cmV0dXJufSxmaW5kUXVlcnlSZXN1bHRCeU5hbWU6ZnVuY3Rpb24obil7dmFyIFE9dGhpcy5fb1F1ZXJ5UmVzdWx0U2V0W25dO2lmKCFRJiZ0aGlzLl9vRGVmYXVsdEVudGl0eUNvbnRhaW5lcil7dmFyIHM9dGhpcy5fb0RlZmF1bHRFbnRpdHlDb250YWluZXIubmFtZSsiLiIrbjtRPXRoaXMuX29RdWVyeVJlc3VsdFNldFtzXX1yZXR1cm4gUX0sZ2V0QWxsUXVlcnlSZXN1bHROYW1lczpmdW5jdGlvbigpe2lmKHRoaXMuX2FRdWVyeVJlc3VsdE5hbWVzKXJldHVybiB0aGlzLl9hUXVlcnlSZXN1bHROYW1lczt0aGlzLl9hUXVlcnlSZXN1bHROYW1lcz1uZXcgQXJyYXkoMCk7Zm9yKHZhciBuIGluIHRoaXMuX29RdWVyeVJlc3VsdFNldCl0aGlzLl9hUXVlcnlSZXN1bHROYW1lcy5wdXNoKHRoaXMuX29RdWVyeVJlc3VsdFNldFtuXS5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9hUXVlcnlSZXN1bHROYW1lc30sZ2V0QWxsUXVlcnlSZXN1bHRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29RdWVyeVJlc3VsdFNldH0sZ2V0T0RhdGFNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTW9kZWx9LF9nZXRFbnRpdHlTZXRzT2ZUeXBlOmZ1bmN0aW9uKHMsUSl7dmFyIGU9W107Zm9yKHZhciBpPS0xLEU7RT1zLmVudGl0eUNvbnRhaW5lclsrK2ldOyl7Zm9yKHZhciBqPS0xLGE7YT1FLmVudGl0eVNldFsrK2pdOyl7aWYoYS5lbnRpdHlUeXBlPT1RKWUucHVzaChbRSxhXSl9fXJldHVybiBlfSxfbVBhcmFtZXRlcjpudWxsLF9vTW9kZWw6bnVsbCxfb0RlZmF1bHRFbnRpdHlDb250YWluZXI6bnVsbCxfYVF1ZXJ5UmVzdWx0TmFtZXM6bnVsbCxfb1F1ZXJ5UmVzdWx0U2V0Om51bGwsX29QYXJhbWV0ZXJpemF0aW9uU2V0Om51bGwsX29FbnRpdHlUeXBlU2V0Om51bGwsX29FbnRpdHlTZXRTZXQ6bnVsbCxfb0VudGl0eVR5cGVOYW1lVG9FbnRpdHlTZXRNYXA6bnVsbCxfb0FjdGl2YXRlZFdvcmthcm91bmRzOm51bGx9O28uUXVlcnlSZXN1bHQ9ZnVuY3Rpb24obSxlLEUscCl7dGhpcy5faW5pdChtLGUsRSxwKX07by5RdWVyeVJlc3VsdC5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKG0sZSxFLHAsYSl7dGhpcy5fb01vZGVsPW07dGhpcy5fb0VudGl0eVR5cGU9ZTt0aGlzLl9vRW50aXR5U2V0PUU7dGhpcy5fb1BhcmFtZXRlcml6YXRpb249cDt0aGlzLl9vRGltZW5zaW9uU2V0PW5ldyBPYmplY3QoKTt0aGlzLl9vTWVhc3VyZVNldD1uZXcgT2JqZWN0KCk7dmFyIFA9ZS5nZXRUeXBlRGVzY3JpcHRpb24oKS5wcm9wZXJ0eTt2YXIgQT17fTtmb3IodmFyIGk9LTEsYjtiPVBbKytpXTspe2lmKGIuZXh0ZW5zaW9ucz09dW5kZWZpbmVkKWNvbnRpbnVlO2Zvcih2YXIgaj0tMSxjO2M9Yi5leHRlbnNpb25zWysral07KXtpZighYy5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7c3dpdGNoKGMubmFtZSl7Y2FzZSJhZ2dyZWdhdGlvbi1yb2xlIjpzd2l0Y2goYy52YWx1ZSl7Y2FzZSJkaW1lbnNpb24iOnZhciBkPW5ldyBvLkRpbWVuc2lvbih0aGlzLGIpO3RoaXMuX29EaW1lbnNpb25TZXRbZC5nZXROYW1lKCldPWQ7YnJlYWs7Y2FzZSJtZWFzdXJlIjp2YXIgTT1uZXcgby5NZWFzdXJlKHRoaXMsYik7dGhpcy5fb01lYXN1cmVTZXRbTS5nZXROYW1lKCldPU07YnJlYWs7Y2FzZSJ0b3RhbGVkLXByb3BlcnRpZXMtbGlzdCI6dGhpcy5fb1RvdGFsZWRQcm9wZXJ0eUxpc3RQcm9wZXJ0eT1iO2JyZWFrfWJyZWFrO2Nhc2UiYXR0cmlidXRlLWZvciI6dmFyIEQ9bmV3IG8uRGltZW5zaW9uQXR0cmlidXRlKHRoaXMsYik7QVtELmdldEtleVByb3BlcnR5KCldPUQ7YnJlYWt9fX1mb3IodmFyIHMgaW4gQSl7dmFyIEQ9QVtzXTtELmdldERpbWVuc2lvbigpLmFkZEF0dHJpYnV0ZShEKX1pZihtLl9vQWN0aXZhdGVkV29ya2Fyb3VuZHMuSWRlbnRpZnlUZXh0UHJvcGVydGllc0J5TmFtZSl7dmFyIGY9bmV3IEFycmF5KCk7Zm9yKHZhciBnIGluIHRoaXMuX29EaW1lbnNpb25TZXQpe3ZhciBkPXRoaXMuX29EaW1lbnNpb25TZXRbZ107aWYoIWQuZ2V0VGV4dFByb3BlcnR5KCkpe3ZhciB0PW51bGw7dD1lLmZpbmRQcm9wZXJ0eUJ5TmFtZShnKyJOYW1lIik7aWYoIXQpdD1lLmZpbmRQcm9wZXJ0eUJ5TmFtZShnKyJUZXh0Iik7aWYoIXQpdD1lLmZpbmRQcm9wZXJ0eUJ5TmFtZShnKyJEZXNjIik7aWYoIXQpdD1lLmZpbmRQcm9wZXJ0eUJ5TmFtZShnKyJEZXNjcmlwdGlvbiIpO2lmKHQpe2Quc2V0VGV4dFByb3BlcnR5KHQpO2YucHVzaCh0Lm5hbWUpfX19Zm9yKHZhciBpPS0xLGg7aD1mWysraV07KXtkZWxldGUgdGhpcy5fb0RpbWVuc2lvblNldFtoXX19fSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RW50aXR5U2V0KCkuZ2V0UU5hbWUoKX0sZ2V0UGFyYW1ldGVyaXphdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUGFyYW1ldGVyaXphdGlvbn0sZ2V0QWxsRGltZW5zaW9uTmFtZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9hRGltZW5zaW9uTmFtZXMpcmV0dXJuIHRoaXMuX2FEaW1lbnNpb25OYW1lczt0aGlzLl9hRGltZW5zaW9uTmFtZXM9W107Zm9yKHZhciBuIGluIHRoaXMuX29EaW1lbnNpb25TZXQpdGhpcy5fYURpbWVuc2lvbk5hbWVzLnB1c2godGhpcy5fb0RpbWVuc2lvblNldFtuXS5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9hRGltZW5zaW9uTmFtZXN9LGdldEFsbERpbWVuc2lvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0RpbWVuc2lvblNldH0sZ2V0QWxsTWVhc3VyZU5hbWVzOmZ1bmN0aW9uKCl7aWYodGhpcy5fYU1lYXN1cmVOYW1lcylyZXR1cm4gdGhpcy5fYU1lYXN1cmVOYW1lczt0aGlzLl9hTWVhc3VyZU5hbWVzPVtdO2Zvcih2YXIgbiBpbiB0aGlzLl9vTWVhc3VyZVNldCl0aGlzLl9hTWVhc3VyZU5hbWVzLnB1c2godGhpcy5fb01lYXN1cmVTZXRbbl0uZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5fYU1lYXN1cmVOYW1lc30sZ2V0QWxsTWVhc3VyZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01lYXN1cmVTZXR9LGZpbmREaW1lbnNpb25CeU5hbWU6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuX29EaW1lbnNpb25TZXRbbl19LGZpbmREaW1lbnNpb25CeVByb3BlcnR5TmFtZTpmdW5jdGlvbihuKXtpZih0aGlzLl9vRGltZW5zaW9uU2V0W25dKXJldHVybiB0aGlzLl9vRGltZW5zaW9uU2V0W25dO2Zvcih2YXIgZCBpbiB0aGlzLl9vRGltZW5zaW9uU2V0KXt2YXIgRD10aGlzLl9vRGltZW5zaW9uU2V0W2RdO3ZhciB0PUQuZ2V0VGV4dFByb3BlcnR5KCk7aWYodCYmdC5uYW1lPT1uKXJldHVybiBEO2lmKEQuZmluZEF0dHJpYnV0ZUJ5TmFtZShuKSlyZXR1cm4gRH1yZXR1cm4gbnVsbH0sZ2V0VG90YWxlZFByb3BlcnRpZXNMaXN0UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1RvdGFsZWRQcm9wZXJ0eUxpc3RQcm9wZXJ0eX0sZmluZE1lYXN1cmVCeU5hbWU6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuX29NZWFzdXJlU2V0W25dfSxmaW5kTWVhc3VyZUJ5UHJvcGVydHlOYW1lOmZ1bmN0aW9uKG4pe2lmKHRoaXMuX29NZWFzdXJlU2V0W25dKXJldHVybiB0aGlzLl9vTWVhc3VyZVNldFtuXTtmb3IodmFyIG0gaW4gdGhpcy5fb01lYXN1cmVTZXQpe3ZhciBNPXRoaXMuX29NZWFzdXJlU2V0W21dO3ZhciBmPU0uZ2V0Rm9ybWF0dGVkVmFsdWVQcm9wZXJ0eSgpO2lmKGYmJmYubmFtZT09bilyZXR1cm4gTX1yZXR1cm4gbnVsbH0sZ2V0TW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01vZGVsfSxnZXRFbnRpdHlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlUeXBlfSxnZXRFbnRpdHlTZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0VudGl0eVNldH0sX29Nb2RlbDpudWxsLF9vRW50aXR5VHlwZTpudWxsLF9vRW50aXR5U2V0Om51bGwsX29QYXJhbWV0ZXJpemF0aW9uOm51bGwsX2FEaW1lbnNpb25OYW1lczpudWxsLF9vRGltZW5zaW9uU2V0Om51bGwsX2FNZWFzdXJlTmFtZXM6bnVsbCxfb01lYXN1cmVTZXQ6bnVsbCxfb1RvdGFsZWRQcm9wZXJ0eUxpc3RQcm9wZXJ0eTpudWxsfTtvLlBhcmFtZXRlcml6YXRpb249ZnVuY3Rpb24oZSxFKXt0aGlzLl9pbml0KGUsRSl9O28uUGFyYW1ldGVyaXphdGlvbi5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKGUsRSl7dGhpcy5fb0VudGl0eVR5cGU9ZTt0aGlzLl9vRW50aXR5U2V0PUU7dGhpcy5fb1BhcmFtZXRlclNldD1uZXcgT2JqZWN0KCk7dmFyIHA9ZS5nZXRUeXBlRGVzY3JpcHRpb24oKS5wcm9wZXJ0eTtmb3IodmFyIGk9LTEsUDtQPXBbKytpXTspe2lmKFAuZXh0ZW5zaW9ucz09dW5kZWZpbmVkKWNvbnRpbnVlO2Zvcih2YXIgaj0tMSxhO2E9UC5leHRlbnNpb25zWysral07KXtpZighYS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7c3dpdGNoKGEubmFtZSl7Y2FzZSJwYXJhbWV0ZXIiOnZhciBiPW5ldyBvLlBhcmFtZXRlcih0aGlzLFApO3RoaXMuX29QYXJhbWV0ZXJTZXRbYi5nZXROYW1lKCldPWI7YnJlYWt9fX19LHNldFRhcmdldFF1ZXJ5UmVzdWx0OmZ1bmN0aW9uKFEsYSl7dGhpcy5fb1F1ZXJ5UmVzdWx0PVE7dmFyIHM9dGhpcy5fb0VudGl0eVR5cGUuZ2V0U2NoZW1hKCkubmFtZXNwYWNlKyIuIithLm5hbWU7dmFyIG49dGhpcy5fb0VudGl0eVR5cGUuZ2V0VHlwZURlc2NyaXB0aW9uKCkubmF2aWdhdGlvblByb3BlcnR5O2lmKCFuKXRocm93IkludmFsaWQgY29uc3VtcHRpb24gbW9kZWw6IFBhcmFtZXRlcnMgZW50aXR5IHR5cGUgbGFja3MgbmF2aWdhdGlvbiBwcm9wZXJ0eSBmb3IgYXNzb2NpYXRpb24gdG8gcXVlcnkgcmVzdWx0IGVudGl0eSB0eXBlIjtmb3IodmFyIGk9LTEsTjtOPW5bKytpXTspe2lmKE4ucmVsYXRpb25zaGlwPT1zKXRoaXMuX29OYXZQcm9wVG9RdWVyeVJlc3VsdD1OLm5hbWV9aWYoIXRoaXMuX29OYXZQcm9wVG9RdWVyeVJlc3VsdCl0aHJvdyJJbnZhbGlkIGNvbnN1bXB0aW9uIG1vZGVsOiBQYXJhbWV0ZXJzIGVudGl0eSB0eXBlIGxhY2tzIG5hdmlnYXRpb24gcHJvcGVydHkgZm9yIGFzc29jaWF0aW9uIHRvIHF1ZXJ5IHJlc3VsdCBlbnRpdHkgdHlwZSJ9LGdldFRhcmdldFF1ZXJ5UmVzdWx0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX29RdWVyeVJlc3VsdCl0aHJvdyJObyB0YXJnZXQgcXVlcnkgcmVzdWx0IHNldCI7cmV0dXJuIHRoaXMuX29RdWVyeVJlc3VsdH0sZ2V0TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEVudGl0eVNldCgpLmdldFFOYW1lKCl9LGdldEFsbFBhcmFtZXRlck5hbWVzOmZ1bmN0aW9uKCl7aWYodGhpcy5fYVBhcmFtZXRlck5hbWVzKXJldHVybiB0aGlzLl9hUGFyYW1ldGVyTmFtZXM7dGhpcy5fYVBhcmFtZXRlck5hbWVzPVtdO2Zvcih2YXIgbiBpbiB0aGlzLl9vUGFyYW1ldGVyU2V0KXRoaXMuX2FQYXJhbWV0ZXJOYW1lcy5wdXNoKHRoaXMuX29QYXJhbWV0ZXJTZXRbbl0uZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5fYVBhcmFtZXRlck5hbWVzfSxnZXRBbGxQYXJhbWV0ZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29QYXJhbWV0ZXJTZXR9LGZpbmRQYXJhbWV0ZXJCeU5hbWU6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuX29QYXJhbWV0ZXJTZXRbbl19LGdldE5hdmlnYXRpb25Qcm9wZXJ0eVRvUXVlcnlSZXN1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb05hdlByb3BUb1F1ZXJ5UmVzdWx0fSxnZXRFbnRpdHlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlUeXBlfSxnZXRFbnRpdHlTZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0VudGl0eVNldH0sX29FbnRpdHlUeXBlOm51bGwsX29FbnRpdHlTZXQ6bnVsbCxfb1F1ZXJ5UmVzdWx0Om51bGwsX29OYXZQcm9wVG9RdWVyeVJlc3VsdDpudWxsLF9hUGFyYW1ldGVyTmFtZXM6bnVsbCxfb1BhcmFtZXRlclNldDpudWxsfTtvLlBhcmFtZXRlcj1mdW5jdGlvbihwLFApe3RoaXMuX2luaXQocCxQKX07by5QYXJhbWV0ZXIucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihwLFApe3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uPXA7dGhpcy5fb1Byb3BlcnR5PVA7dmFyIGU9cC5nZXRFbnRpdHlUeXBlKCk7aWYoUC5leHRlbnNpb25zIT11bmRlZmluZWQpe2Zvcih2YXIgaT0tMSxFO0U9UC5leHRlbnNpb25zWysraV07KXtpZighRS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7c3dpdGNoKEUubmFtZSl7Y2FzZSJwYXJhbWV0ZXIiOnN3aXRjaChFLnZhbHVlKXtjYXNlIm1hbmRhdG9yeSI6dGhpcy5fYlJlcXVpcmVkPXRydWU7YnJlYWs7Y2FzZSJvcHRpb25hbCI6dGhpcy5fYlJlcXVpcmVkPWZhbHNlO2JyZWFrO2RlZmF1bHQ6dGhyb3ciSW52YWxpZCBhbm5vdGF0aW9uIHZhbHVlIGZvciBwYXJhbWV0ZXIgcHJvcGVydHkifWJyZWFrO2Nhc2UibGFiZWwiOnRoaXMuX3NMYWJlbFRleHQ9RS52YWx1ZTticmVhaztjYXNlInRleHQiOnRoaXMuX29UZXh0UHJvcGVydHk9ZS5maW5kUHJvcGVydHlCeU5hbWUoRS52YWx1ZSk7YnJlYWs7Y2FzZSJ1cHBlci1ib3VuZGFyeSI6dGhpcy5fYkludGVydmFsQm91bmRhcnlQYXJhbWV0ZXI9dHJ1ZTt0aGlzLl9vVXBwZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyUHJvcGVydHk9ZS5maW5kUHJvcGVydHlCeU5hbWUoRS52YWx1ZSk7YnJlYWs7Y2FzZSJsb3dlci1ib3VuZGFyeSI6dGhpcy5fYkludGVydmFsQm91bmRhcnlQYXJhbWV0ZXI9dHJ1ZTt0aGlzLl9vTG93ZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyUHJvcGVydHk9ZS5maW5kUHJvcGVydHlCeU5hbWUoRS52YWx1ZSk7YnJlYWt9fX1pZighdGhpcy5fc0xhYmVsVGV4dCl0aGlzLl9zTGFiZWxUZXh0PSIifSxzZXRWYWx1ZVNldEVudGl0eTpmdW5jdGlvbihlLEUpe3RoaXMuX29WYWx1ZVNldEVudGl0eVR5cGU9ZTt0aGlzLl9vVmFsdWVTZXRFbnRpdHlTZXQ9RX0sZ2V0VGV4dFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29UZXh0UHJvcGVydHl9LGdldExhYmVsVGV4dDpmdW5jdGlvbigpe2lmKCF0aGlzLl9zTGFiZWxUZXh0JiZ0aGlzLl9vUGFyYW1ldGVyaXphdGlvbi5fb1F1ZXJ5UmVzdWx0Ll9vTW9kZWwuX29BY3RpdmF0ZWRXb3JrYXJvdW5kcy5DcmVhdGVMYWJlbHNGcm9tVGVjaG5pY2FsTmFtZXMpdGhpcy5fc0xhYmVsVGV4dD1vLmhlbHBlci50b2tlbml6ZU5hbWV0b0xhYmVsVGV4dCh0aGlzLmdldE5hbWUoKSk7cmV0dXJuIHRoaXMuX3NMYWJlbFRleHR9LGlzT3B0aW9uYWw6ZnVuY3Rpb24oKXtyZXR1cm4oIXRoaXMuX2JSZXF1aXJlZCl9LGlzSW50ZXJ2YWxCb3VuZGFyeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iSW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlcn0saXNMb3dlckludGVydmFsQm91bmRhcnk6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fb1VwcGVySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlclByb3BlcnR5P3RydWU6ZmFsc2UpfSxnZXRQZWVySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlcjpmdW5jdGlvbigpe3ZhciBwPW51bGw7aWYodGhpcy5fb0xvd2VySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlclByb3BlcnR5KXA9dGhpcy5fb0xvd2VySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlclByb3BlcnR5Lm5hbWU7ZWxzZSBwPXRoaXMuX29VcHBlckludGVydmFsQm91bmRhcnlQYXJhbWV0ZXJQcm9wZXJ0eS5uYW1lO2lmKCFwKXRocm93IlBhcmFtZXRlciBpcyBub3QgYW4gaW50ZXJ2YWwgYm91bmRhcnkiO3JldHVybiB0aGlzLl9vUGFyYW1ldGVyaXphdGlvbi5maW5kUGFyYW1ldGVyQnlOYW1lKHApfSxpc1ZhbHVlU2V0QXZhaWxhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuX29WYWx1ZVNldEVudGl0eVR5cGU/dHJ1ZTpmYWxzZSl9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5Lm5hbWV9LGdldFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eX0sZ2V0Q29udGFpbmluZ1BhcmFtZXRlcml6YXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1BhcmFtZXRlcml6YXRpb259LGdldFVSSVRvVmFsdWVFbnRpdHlTZXQ6ZnVuY3Rpb24ocyl7dmFyIHU9bnVsbDt1PShzP3M6IiIpKyIvIit0aGlzLl9vVmFsdWVTZXRFbnRpdHlTZXQuZ2V0UU5hbWUoKTtyZXR1cm4gdX0sX29QYXJhbWV0ZXJpemF0aW9uOm51bGwsX29Qcm9wZXJ0eTpudWxsLF9zTGFiZWxUZXh0Om51bGwsX29UZXh0UHJvcGVydHk6bnVsbCxfYlJlcXVpcmVkOmZhbHNlLF9iSW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlcjpmYWxzZSxfb0xvd2VySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlclByb3BlcnR5Om51bGwsX29VcHBlckludGVydmFsQm91bmRhcnlQYXJhbWV0ZXJQcm9wZXJ0eTpudWxsLF9vVmFsdWVTZXRFbnRpdHlUeXBlOm51bGwsX29WYWx1ZVNldEVudGl0eVNldDpudWxsfTtvLkRpbWVuc2lvbj1mdW5jdGlvbihRLHApe3RoaXMuX2luaXQoUSxwKX07by5EaW1lbnNpb24ucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihRLHApe3RoaXMuX29RdWVyeVJlc3VsdD1RO3RoaXMuX29Qcm9wZXJ0eT1wO3RoaXMuX29BdHRyaWJ1dGVTZXQ9bmV3IE9iamVjdCgpfSxzZXRNZW1iZXJzRW50aXR5U2V0OmZ1bmN0aW9uKGUpe3RoaXMuX29NZW1iZXJzRW50aXR5U2V0PWV9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5Lm5hbWV9LGdldEtleVByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eX0sZ2V0VGV4dFByb3BlcnR5OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX29UZXh0UHJvcGVydHkpdGhpcy5fb1RleHRQcm9wZXJ0eT10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpLmdldFRleHRQcm9wZXJ0eU9mUHJvcGVydHkodGhpcy5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9vVGV4dFByb3BlcnR5fSxzZXRUZXh0UHJvcGVydHk6ZnVuY3Rpb24odCl7dGhpcy5fb1RleHRQcm9wZXJ0eT10fSxnZXRMYWJlbFRleHQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fc0xhYmVsVGV4dCl0aGlzLl9zTGFiZWxUZXh0PXRoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0TGFiZWxPZlByb3BlcnR5KHRoaXMuZ2V0TmFtZSgpKTtpZighdGhpcy5fc0xhYmVsVGV4dCYmdGhpcy5fb1F1ZXJ5UmVzdWx0Ll9vTW9kZWwuX29BY3RpdmF0ZWRXb3JrYXJvdW5kcy5DcmVhdGVMYWJlbHNGcm9tVGVjaG5pY2FsTmFtZXMpdGhpcy5fc0xhYmVsVGV4dD1vLmhlbHBlci50b2tlbml6ZU5hbWV0b0xhYmVsVGV4dCh0aGlzLmdldE5hbWUoKSk7cmV0dXJuKHRoaXMuX3NMYWJlbFRleHQ9PW51bGw/IiI6dGhpcy5fc0xhYmVsVGV4dCl9LGdldFN1cGVyT3JkaW5hdGVEaW1lbnNpb246ZnVuY3Rpb24oKXtpZighdGhpcy5fc1N1cGVyT3JkaW5hdGVEaW1lbnNpb24pe3ZhciBzPXRoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0U3VwZXJPcmRpbmF0ZVByb3BlcnR5T2ZQcm9wZXJ0eSh0aGlzLmdldE5hbWUoKSkubmFtZTt0aGlzLl9zU3VwZXJPcmRpbmF0ZURpbWVuc2lvbj10aGlzLl9vUXVlcnlSZXN1bHQuZmluZERpbWVuc2lvbkJ5TmFtZShzKX1yZXR1cm4gdGhpcy5fc1N1cGVyT3JkaW5hdGVEaW1lbnNpb259LGdldEhpZXJhcmNoeTpmdW5jdGlvbigpe2lmKCF0aGlzLl9vSGllcmFyY2h5KXRoaXMuX29IaWVyYXJjaHk9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEVudGl0eVR5cGUoKS5nZXRIaWVyYXJjaHkodGhpcy5fb1Byb3BlcnR5Lm5hbWUpO3JldHVybiB0aGlzLl9vSGllcmFyY2h5fSxnZXRBbGxBdHRyaWJ1dGVOYW1lczpmdW5jdGlvbigpe2lmKHRoaXMuX2FBdHRyaWJ1dGVOYW1lcylyZXR1cm4gdGhpcy5fYUF0dHJpYnV0ZU5hbWVzO3RoaXMuX2FBdHRyaWJ1dGVOYW1lcz1bXTtmb3IodmFyIG4gaW4gdGhpcy5fb0F0dHJpYnV0ZVNldCl0aGlzLl9hQXR0cmlidXRlTmFtZXMucHVzaCh0aGlzLl9vQXR0cmlidXRlU2V0W25dLmdldE5hbWUoKSk7cmV0dXJuIHRoaXMuX2FBdHRyaWJ1dGVOYW1lc30sZ2V0QWxsQXR0cmlidXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vQXR0cmlidXRlU2V0fSxmaW5kQXR0cmlidXRlQnlOYW1lOmZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLl9vQXR0cmlidXRlU2V0W25dfSxhZGRBdHRyaWJ1dGU6ZnVuY3Rpb24oZCl7dGhpcy5fb0F0dHJpYnV0ZVNldFtkLmdldE5hbWUoKV09ZH0sZ2V0Q29udGFpbmluZ1F1ZXJ5UmVzdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29RdWVyeVJlc3VsdH0saGFzTWFzdGVyRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTWVtYmVyc0VudGl0eVNldCE9bnVsbD90cnVlOmZhbHNlfSxnZXRNYXN0ZXJEYXRhRW50aXR5U2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29NZW1iZXJzRW50aXR5U2V0fSxfb1F1ZXJ5UmVzdWx0Om51bGwsX29Qcm9wZXJ0eTpudWxsLF9vVGV4dFByb3BlcnR5Om51bGwsX3NMYWJlbFRleHQ6bnVsbCxfc1N1cGVyT3JkaW5hdGVEaW1lbnNpb246bnVsbCxfYUF0dHJpYnV0ZU5hbWVzOm51bGwsX29BdHRyaWJ1dGVTZXQ6bnVsbCxfb01lbWJlcnNFbnRpdHlTZXQ6bnVsbCxfb0hpZXJhcmNoeTpudWxsfTtvLkRpbWVuc2lvbkF0dHJpYnV0ZT1mdW5jdGlvbihRLHApe3RoaXMuX2luaXQoUSxwKX07by5EaW1lbnNpb25BdHRyaWJ1dGUucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihRLHApe3RoaXMuX29RdWVyeVJlc3VsdD1RO3RoaXMuX29Qcm9wZXJ0eT1wO2lmKHAuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXtmb3IodmFyIGk9LTEsZTtlPXAuZXh0ZW5zaW9uc1srK2ldOyl7aWYoIWUubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFKWNvbnRpbnVlO3N3aXRjaChlLm5hbWUpe2Nhc2UiYXR0cmlidXRlLWZvciI6dGhpcy5fc0RpbWVuc2lvbk5hbWU9ZS52YWx1ZTticmVhaztjYXNlImxhYmVsIjp0aGlzLl9zTGFiZWxUZXh0PWUudmFsdWU7YnJlYWs7Y2FzZSJ0ZXh0Ijp0aGlzLl9vVGV4dFByb3BlcnR5PVEuZ2V0RW50aXR5VHlwZSgpLmZpbmRQcm9wZXJ0eUJ5TmFtZShlLnZhbHVlKTticmVha319fX0sZ2V0TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUHJvcGVydHkubmFtZX0sZ2V0S2V5UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5fSxnZXRUZXh0UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1RleHRQcm9wZXJ0eX0sZ2V0TGFiZWxUZXh0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3NMYWJlbFRleHQmJnRoaXMuX29RdWVyeVJlc3VsdC5fb01vZGVsLl9vQWN0aXZhdGVkV29ya2Fyb3VuZHMuQ3JlYXRlTGFiZWxzRnJvbVRlY2huaWNhbE5hbWVzKXRoaXMuX3NMYWJlbFRleHQ9by5oZWxwZXIudG9rZW5pemVOYW1ldG9MYWJlbFRleHQodGhpcy5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9zTGFiZWxUZXh0fSxnZXREaW1lbnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1F1ZXJ5UmVzdWx0LmZpbmREaW1lbnNpb25CeU5hbWUodGhpcy5fc0RpbWVuc2lvbk5hbWUpfSxfb1F1ZXJ5UmVzdWx0Om51bGwsX29Qcm9wZXJ0eTpudWxsLF9vVGV4dFByb3BlcnR5Om51bGwsX3NMYWJlbFRleHQ6bnVsbCxfc0RpbWVuc2lvbk5hbWU6bnVsbH07by5NZWFzdXJlPWZ1bmN0aW9uKFEscCl7dGhpcy5faW5pdChRLHApfTtvLk1lYXN1cmUucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihRLHApe3RoaXMuX29RdWVyeVJlc3VsdD1RO3RoaXMuX29Qcm9wZXJ0eT1wO2lmKHAuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXtmb3IodmFyIGk9LTEsZTtlPXAuZXh0ZW5zaW9uc1srK2ldOyl7aWYoIWUubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFKWNvbnRpbnVlO3N3aXRjaChlLm5hbWUpe2Nhc2UibGFiZWwiOnRoaXMuX3NMYWJlbFRleHQ9ZS52YWx1ZTticmVhaztjYXNlInRleHQiOnRoaXMuX29UZXh0UHJvcGVydHk9US5nZXRFbnRpdHlUeXBlKCkuZmluZFByb3BlcnR5QnlOYW1lKGUudmFsdWUpO2JyZWFrO2Nhc2UidW5pdCI6dGhpcy5fb1VuaXRQcm9wZXJ0eT1RLmdldEVudGl0eVR5cGUoKS5maW5kUHJvcGVydHlCeU5hbWUoZS52YWx1ZSk7YnJlYWt9fX1pZighdGhpcy5fc0xhYmVsVGV4dCl0aGlzLl9zTGFiZWxUZXh0PSIifSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eS5uYW1lfSxnZXRSYXdWYWx1ZVByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eX0sZ2V0Rm9ybWF0dGVkVmFsdWVQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vVGV4dFByb3BlcnR5fSxnZXRVbml0UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1VuaXRQcm9wZXJ0eX0sZ2V0TGFiZWxUZXh0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3NMYWJlbFRleHQmJnRoaXMuX29RdWVyeVJlc3VsdC5fb01vZGVsLl9vQWN0aXZhdGVkV29ya2Fyb3VuZHMuQ3JlYXRlTGFiZWxzRnJvbVRlY2huaWNhbE5hbWVzKXRoaXMuX3NMYWJlbFRleHQ9by5oZWxwZXIudG9rZW5pemVOYW1ldG9MYWJlbFRleHQodGhpcy5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9zTGFiZWxUZXh0fSxpc1VwZGF0YWJsZTpmdW5jdGlvbigpe2lmKHRoaXMuX2JJc1VwZGF0YWJsZSE9bnVsbClyZXR1cm4gdGhpcy5fYklzVXBkYXRhYmxlO3ZhciB1PXRoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlTZXQoKS5nZXRVcGRhdGFibGVQcm9wZXJ0eU5hbWVTZXQoKTtyZXR1cm4odVt0aGlzLmdldE5hbWUoKV0hPXVuZGVmaW5lZCl9LF9vUXVlcnlSZXN1bHQ6bnVsbCxfb1Byb3BlcnR5Om51bGwsX29UZXh0UHJvcGVydHk6bnVsbCxfc0xhYmVsVGV4dDpudWxsLF9vVW5pdFByb3BlcnR5Om51bGwsX2JJc1VwZGF0YWJsZTpudWxsfTtvLkVudGl0eVNldD1mdW5jdGlvbihtLHMsYyxlLEUpe3RoaXMuX2luaXQobSxzLGMsZSxFKX07by5FbnRpdHlTZXQucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihtLHMsYyxlLEUpe3RoaXMuX29FbnRpdHlUeXBlPUU7dGhpcy5fb0VudGl0eVNldD1lO3RoaXMuX29Db250YWluZXI9Yzt0aGlzLl9vU2NoZW1hPXM7dGhpcy5fb01vZGVsPW07aWYocy5lbnRpdHlDb250YWluZXIubGVuZ3RoPjEpdGhpcy5fc1FOYW1lPWMubmFtZSsiLiIrZS5uYW1lO2Vsc2UgdGhpcy5fc1FOYW1lPWUubmFtZX0sZ2V0UU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc1FOYW1lfSxnZXRTZXREZXNjcmlwdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRW50aXR5U2V0fSxnZXRFbnRpdHlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlUeXBlfSxnZXRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1NjaGVtYX0sZ2V0TW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01vZGVsfSxnZXRVcGRhdGFibGVQcm9wZXJ0eU5hbWVTZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9vVXBkYXRhYmxlUHJvcGVydHlOYW1lcylyZXR1cm4gdGhpcy5fb1VwZGF0YWJsZVByb3BlcnR5TmFtZXM7dGhpcy5fb1VwZGF0YWJsZVByb3BlcnR5TmFtZXM9bmV3IE9iamVjdCgpO3ZhciBzPXRydWU7aWYodGhpcy5fb0VudGl0eVNldC5leHRlbnNpb25zIT11bmRlZmluZWQpe2Zvcih2YXIgaj0tMSxlO2U9dGhpcy5fb0VudGl0eVNldC5leHRlbnNpb25zWysral07KXtpZihlLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSYmZS5uYW1lPT0idXBkYXRhYmxlIil7aWYoZS52YWx1ZT09ImZhbHNlIil7cz1mYWxzZTticmVha319fX1pZighcyl7cmV0dXJuIHRoaXMuX29VcGRhdGFibGVQcm9wZXJ0eU5hbWVzfXZhciBwPXRoaXMuX29FbnRpdHlUeXBlLmdldFR5cGVEZXNjcmlwdGlvbigpLnByb3BlcnR5O2Zvcih2YXIgaT0tMSxQO1A9cFsrK2ldOyl7dmFyIGI9dHJ1ZTtpZihQLmV4dGVuc2lvbnM9PXVuZGVmaW5lZCljb250aW51ZTtmb3IodmFyIGo9LTEsZTtlPVAuZXh0ZW5zaW9uc1srK2pdOyl7aWYoZS5uYW1lc3BhY2UhPW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7aWYoZS5uYW1lPT0idXBkYXRhYmxlIil7aWYoZS52YWx1ZT09ImZhbHNlIil7Yj1mYWxzZTticmVha319fWlmKGIpdGhpcy5fb1VwZGF0YWJsZVByb3BlcnR5TmFtZXNbUC5uYW1lXT10cnVlfXJldHVybiB0aGlzLl9vVXBkYXRhYmxlUHJvcGVydHlOYW1lc30sX29FbnRpdHlUeXBlOm51bGwsX29FbnRpdHlTZXQ6bnVsbCxfb0NvbnRhaW5lcjpudWxsLF9vU2NoZW1hOm51bGwsX29Nb2RlbDpudWxsLF9zUU5hbWU6bnVsbCxfb1VwZGF0YWJsZVByb3BlcnR5TmFtZXM6bnVsbH07by5FbnRpdHlUeXBlPWZ1bmN0aW9uKG0scyxlKXt0aGlzLl9pbml0KG0scyxlKX07by5FbnRpdHlUeXBlLnByb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb249e1NJTkdMRV9WQUxVRToic2luZ2xlLXZhbHVlIixNVUxUSV9WQUxVRToibXVsdGktdmFsdWUiLElOVEVSVkFMOiJpbnRlcnZhbCJ9O28uRW50aXR5VHlwZS5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKG0scyxlKXt0aGlzLl9vRW50aXR5VHlwZT1lO3RoaXMuX29TY2hlbWE9czt0aGlzLl9vTW9kZWw9bTt0aGlzLl9hS2V5UHJvcGVydGllcz1bXTt0aGlzLl9vUHJvcGVydHlTZXQ9bmV3IE9iamVjdCgpO3RoaXMuX2FGaWx0ZXJhYmxlUHJvcGVydHlOYW1lcz1bXTt0aGlzLl9hU29ydGFibGVQcm9wZXJ0eU5hbWVzPVtdO3RoaXMuX2FSZXF1aXJlZEZpbHRlclByb3BlcnR5TmFtZXM9W107dGhpcy5fb1Byb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb25TZXQ9bmV3IE9iamVjdCgpO3RoaXMuX29Qcm9wZXJ0eUhlYWRpbmdzU2V0PXt9O3RoaXMuX29Qcm9wZXJ0eVF1aWNrSW5mb3NTZXQ9e307dGhpcy5fc1FOYW1lPXMubmFtZXNwYWNlKyIuIitlLm5hbWU7dmFyIHI9e307dmFyIFI9bnVsbDtmb3IodmFyIGk9LTEscDtwPWUua2V5LnByb3BlcnR5UmVmWysraV07KXt0aGlzLl9hS2V5UHJvcGVydGllcy5wdXNoKHAubmFtZSl9Zm9yKHZhciBpPS0xLFA7UD1lLnByb3BlcnR5WysraV07KXt0aGlzLl9vUHJvcGVydHlTZXRbUC5uYW1lXT1QO3RoaXMuX2FGaWx0ZXJhYmxlUHJvcGVydHlOYW1lcy5wdXNoKFAubmFtZSk7dGhpcy5fYVNvcnRhYmxlUHJvcGVydHlOYW1lcy5wdXNoKFAubmFtZSk7aWYoUC5leHRlbnNpb25zPT11bmRlZmluZWQpY29udGludWU7Zm9yKHZhciBqPS0xLEU7RT1QLmV4dGVuc2lvbnNbKytqXTspe2lmKCFFLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSljb250aW51ZTtzd2l0Y2goRS5uYW1lKXtjYXNlImZpbHRlcmFibGUiOmlmKEUudmFsdWU9PSJmYWxzZSIpdGhpcy5fYUZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzLnBvcChQLm5hbWUpO2JyZWFrO2Nhc2Uic29ydGFibGUiOmlmKEUudmFsdWU9PSJmYWxzZSIpdGhpcy5fYVNvcnRhYmxlUHJvcGVydHlOYW1lcy5wb3AoUC5uYW1lKTticmVhaztjYXNlInJlcXVpcmVkLWluLWZpbHRlciI6aWYoRS52YWx1ZT09InRydWUiKXRoaXMuX2FSZXF1aXJlZEZpbHRlclByb3BlcnR5TmFtZXMucHVzaChQLm5hbWUpO2JyZWFrO2Nhc2UiZmlsdGVyLXJlc3RyaWN0aW9uIjppZihFLnZhbHVlPT1vLkVudGl0eVR5cGUucHJvcGVydHlGaWx0ZXJSZXN0cmljdGlvbi5TSU5HTEVfVkFMVUV8fEUudmFsdWU9PW8uRW50aXR5VHlwZS5wcm9wZXJ0eUZpbHRlclJlc3RyaWN0aW9uLk1VTFRJX1ZBTFVFfHxFLnZhbHVlPT1vLkVudGl0eVR5cGUucHJvcGVydHlGaWx0ZXJSZXN0cmljdGlvbi5JTlRFUlZBTCl0aGlzLl9vUHJvcGVydHlGaWx0ZXJSZXN0cmljdGlvblNldFtQLm5hbWVdPUUudmFsdWU7YnJlYWs7Y2FzZSJoaWVyYXJjaHktbm9kZS1mb3IiOmlmKCEoUj1yW1AubmFtZV0pKVI9cltQLm5hbWVdPW5ldyBPYmplY3QoKTtSLmRpbWVuc2lvbk5hbWU9RS52YWx1ZTticmVhaztjYXNlImhpZXJhcmNoeS1wYXJlbnQtbm9kZS1mb3IiOmNhc2UiaGllcmFyY2h5LXBhcmVudC1ub2QiOmlmKCEoUj1yW0UudmFsdWVdKSlSPXJbRS52YWx1ZV09bmV3IE9iamVjdCgpO1IucGFyZW50Tm9kZUlEUHJvcGVydHk9UDticmVhaztjYXNlImhpZXJhcmNoeS1sZXZlbC1mb3IiOmlmKCEoUj1yW0UudmFsdWVdKSlSPXJbRS52YWx1ZV09bmV3IE9iamVjdCgpO1IubGV2ZWxQcm9wZXJ0eT1QO2JyZWFrO2Nhc2UiaGllcmFyY2h5LWRyaWxsLXN0YXRlLWZvciI6Y2FzZSJoaWVyYXJjaHktZHJpbGwtc3RhdCI6aWYoIShSPXJbRS52YWx1ZV0pKVI9cltFLnZhbHVlXT1uZXcgT2JqZWN0KCk7Ui5kcmlsbFN0YXRlUHJvcGVydHk9UDticmVha319fXRoaXMuX29SZWN1cnNpdmVIaWVyYXJjaHlTZXQ9bmV3IE9iamVjdCgpO2Zvcih2YXIgaCBpbiByKXt2YXIgSD1yW2hdO3ZhciBhPXRoaXMuX29Qcm9wZXJ0eVNldFtoXTt2YXIgZD10aGlzLl9vUHJvcGVydHlTZXRbSC5kaW1lbnNpb25OYW1lXTtpZihkPT1udWxsKXtkPWF9dGhpcy5fb1JlY3Vyc2l2ZUhpZXJhcmNoeVNldFtkLm5hbWVdPW5ldyBvLlJlY3Vyc2l2ZUhpZXJhcmNoeShlLGEsSC5wYXJlbnROb2RlSURQcm9wZXJ0eSxILmxldmVsUHJvcGVydHksZCl9fSxnZXRQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eVNldH0sZmluZFByb3BlcnR5QnlOYW1lOmZ1bmN0aW9uKHApe3JldHVybiB0aGlzLl9vUHJvcGVydHlTZXRbcF19LGdldEtleVByb3BlcnRpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYUtleVByb3BlcnRpZXN9LGdldExhYmVsT2ZQcm9wZXJ0eTpmdW5jdGlvbihwKXt2YXIgUD10aGlzLl9vUHJvcGVydHlTZXRbcF07aWYoUD09bnVsbCl0aHJvdyJubyBzdWNoIHByb3BlcnR5IHdpdGggbmFtZSAiK3A7aWYoUC5leHRlbnNpb25zIT11bmRlZmluZWQpe2Zvcih2YXIgaT0tMSxlO2U9UC5leHRlbnNpb25zWysraV07KXtpZighZS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7aWYoZS5uYW1lPT0ibGFiZWwiKXJldHVybiBlLnZhbHVlfX1yZXR1cm4gbnVsbH0sZ2V0SGVhZGluZ09mUHJvcGVydHk6ZnVuY3Rpb24ocCl7dmFyIFA9dGhpcy5fb1Byb3BlcnR5U2V0W3BdO2lmKFA9PW51bGwpdGhyb3cibm8gc3VjaCBwcm9wZXJ0eSB3aXRoIG5hbWUgIitwO2lmKFAuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXt2YXIgcz1udWxsO2Zvcih2YXIgaT0tMSxlO2U9UC5leHRlbnNpb25zWysraV07KXtpZighZS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7aWYoZS5uYW1lPT0iaGVhZGluZyIpcmV0dXJuIGUudmFsdWU7aWYoZS5uYW1lPT0ibGFiZWwiKXM9ZS52YWx1ZX19cmV0dXJuIHN9LGdldFF1aWNrSW5mb09mUHJvcGVydHk6ZnVuY3Rpb24ocCl7dmFyIFA9dGhpcy5fb1Byb3BlcnR5U2V0W3BdO2lmKFA9PW51bGwpdGhyb3cibm8gc3VjaCBwcm9wZXJ0eSB3aXRoIG5hbWUgIitwO2lmKFAuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXt2YXIgcz1udWxsO2Zvcih2YXIgaT0tMSxlO2U9UC5leHRlbnNpb25zWysraV07KXtpZighZS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7aWYoZS5uYW1lPT0icXVpY2tpbmZvIilyZXR1cm4gZS52YWx1ZTtpZihlLm5hbWU9PSJsYWJlbCIpcz1lLnZhbHVlfX1yZXR1cm4gc30sZ2V0VGV4dFByb3BlcnR5T2ZQcm9wZXJ0eTpmdW5jdGlvbihwKXt2YXIgUD10aGlzLl9vUHJvcGVydHlTZXRbcF07aWYoUD09bnVsbCl0aHJvdyJubyBzdWNoIHByb3BlcnR5IHdpdGggbmFtZSAiK3A7aWYoUC5leHRlbnNpb25zIT11bmRlZmluZWQpe2Zvcih2YXIgaT0tMSxlO2U9UC5leHRlbnNpb25zWysraV07KXtpZihlLm5hbWU9PSJ0ZXh0IilyZXR1cm4gdGhpcy5maW5kUHJvcGVydHlCeU5hbWUoZS52YWx1ZSl9fXJldHVybiBudWxsfSxnZXRTdXBlck9yZGluYXRlUHJvcGVydHlPZlByb3BlcnR5OmZ1bmN0aW9uKHApe3ZhciBQPXRoaXMuX29Qcm9wZXJ0eVNldFtwXTtpZihQPT1udWxsKXRocm93Im5vIHN1Y2ggcHJvcGVydHkgd2l0aCBuYW1lICIrcDtpZihQLmV4dGVuc2lvbnMhPXVuZGVmaW5lZCl7Zm9yKHZhciBpPS0xLGU7ZT1QLmV4dGVuc2lvbnNbKytpXTspe2lmKGUubmFtZT09InN1cGVyLW9yZGluYXRlIilyZXR1cm4gdGhpcy5maW5kUHJvcGVydHlCeU5hbWUoZS52YWx1ZSl9fXJldHVybiBudWxsfSxnZXRGaWx0ZXJhYmxlUHJvcGVydHlOYW1lczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hRmlsdGVyYWJsZVByb3BlcnR5TmFtZXN9LGdldFNvcnRhYmxlUHJvcGVydHlOYW1lczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hU29ydGFibGVQcm9wZXJ0eU5hbWVzfSxnZXRSZXF1aXJlZEZpbHRlclByb3BlcnR5TmFtZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYVJlcXVpcmVkRmlsdGVyUHJvcGVydHlOYW1lc30sZ2V0UHJvcGVydGllc1dpdGhGaWx0ZXJSZXN0cmljdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb25TZXR9LGdldEFsbEhpZXJhcmNoeVByb3BlcnR5TmFtZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9hSGllcmFyY2h5UHJvcGVydHlOYW1lcylyZXR1cm4gdGhpcy5fYUhpZXJhcmNoeVByb3BlcnR5TmFtZXM7dGhpcy5fYUhpZXJhcmNoeVByb3BlcnR5TmFtZXM9W107Zm9yKHZhciBuIGluIHRoaXMuX29SZWN1cnNpdmVIaWVyYXJjaHlTZXQpdGhpcy5fYUhpZXJhcmNoeVByb3BlcnR5TmFtZXMucHVzaCh0aGlzLl9vUmVjdXJzaXZlSGllcmFyY2h5U2V0W25dLmdldE5vZGVWYWx1ZVByb3BlcnR5KCkubmFtZSk7cmV0dXJuIHRoaXMuX2FIaWVyYXJjaHlQcm9wZXJ0eU5hbWVzfSxnZXRIaWVyYXJjaHk6ZnVuY3Rpb24obil7aWYodGhpcy5fb1JlY3Vyc2l2ZUhpZXJhcmNoeVNldFtuXT09dW5kZWZpbmVkKXJldHVybiBudWxsO3JldHVybiB0aGlzLl9vUmVjdXJzaXZlSGllcmFyY2h5U2V0W25dfSxnZXRRTmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zUU5hbWV9LGdldFR5cGVEZXNjcmlwdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRW50aXR5VHlwZX0sZ2V0U2NoZW1hOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29TY2hlbWF9LGdldE1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Nb2RlbH0sX29FbnRpdHlUeXBlOm51bGwsX29TY2hlbWE6bnVsbCxfb01vZGVsOm51bGwsX3NRTmFtZTpudWxsLF9hS2V5UHJvcGVydGllczpudWxsLF9vUHJvcGVydHlTZXQ6bnVsbCxfYUZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzOm51bGwsX2FSZXF1aXJlZEZpbHRlclByb3BlcnR5TmFtZXM6bnVsbCxfb1Byb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb25TZXQ6bnVsbCxfYUhpZXJhcmNoeVByb3BlcnR5TmFtZXM6bnVsbCxfb1JlY3Vyc2l2ZUhpZXJhcmNoeVNldDpudWxsfTtvLlJlY3Vyc2l2ZUhpZXJhcmNoeT1mdW5jdGlvbihlLG4scCxOLGEpe3RoaXMuX2luaXQoZSxuLHAsTixhKX07by5SZWN1cnNpdmVIaWVyYXJjaHkucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihlLG4scCxOLGEpe3RoaXMuX29FbnRpdHlUeXBlPWU7dGhpcy5fb05vZGVJRFByb3BlcnR5PW47dGhpcy5fb1BhcmVudE5vZGVJRFByb3BlcnR5PXA7dGhpcy5fb05vZGVMZXZlbFByb3BlcnR5PU47dGhpcy5fb05vZGVWYWx1ZVByb3BlcnR5PWF9LGlzUmVjdXJzaXZlSGllcmFyY2h5OmZ1bmN0aW9uKCl7cmV0dXJuIHRydWV9LGlzTGV2ZWxlZEhpZXJhcmNoeTpmdW5jdGlvbigpe3JldHVybiBmYWxzZX0sZ2V0Tm9kZUlEUHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb05vZGVJRFByb3BlcnR5fSxnZXRQYXJlbnROb2RlSURQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUGFyZW50Tm9kZUlEUHJvcGVydHl9LGdldE5vZGVMZXZlbFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Ob2RlTGV2ZWxQcm9wZXJ0eX0sZ2V0Tm9kZVZhbHVlUHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb05vZGVWYWx1ZVByb3BlcnR5fSxfb05vZGVJRFByb3BlcnR5Om51bGwsX29QYXJlbnROb2RlSURQcm9wZXJ0eTpudWxsLF9vTm9kZUxldmVsUHJvcGVydHk6bnVsbCxfb05vZGVWYWx1ZVByb3BlcnR5Om51bGx9O28uRmlsdGVyRXhwcmVzc2lvbj1mdW5jdGlvbihtLHMsZSl7dGhpcy5faW5pdChtLHMsZSl9O28uRmlsdGVyRXhwcmVzc2lvbi5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKG0scyxlKXt0aGlzLl9vRW50aXR5VHlwZT1lO3RoaXMuX29TY2hlbWE9czt0aGlzLl9vTW9kZWw9bTt0aGlzLl9hQ29uZGl0aW9uVUk1RmlsdGVyPW5ldyBBcnJheSgpO3RoaXMuX2FVSTVGaWx0ZXJBcnJheT1uZXcgQXJyYXkoKX0sX3JlbmRlclByb3BlcnR5RmlsdGVyVmFsdWU6ZnVuY3Rpb24oZixwKXtyZXR1cm4gcS5zYXAuZW5jb2RlVVJMKHRoaXMuX29Nb2RlbC5nZXRPRGF0YU1vZGVsKCkuZm9ybWF0VmFsdWUoZixwKSl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5fYUNvbmRpdGlvblVJNUZpbHRlcj1uZXcgQXJyYXkoKTt0aGlzLl9hVUk1RmlsdGVyQXJyYXk9bmV3IEFycmF5KCl9LF9hZGRDb25kaXRpb246ZnVuY3Rpb24ocCxPLHYsVil7Zm9yKHZhciBpPS0xLHU7dT10aGlzLl9hQ29uZGl0aW9uVUk1RmlsdGVyWysraV07KXtpZih1LnNQYXRoPT1wJiZ1LnNPcGVyYXRvcj09TyYmdS5vVmFsdWUxPT12JiZ1Lm9WYWx1ZTI9PVYpcmV0dXJufXRoaXMuX2FDb25kaXRpb25VSTVGaWx0ZXIucHVzaChuZXcgc2FwLnVpLm1vZGVsLkZpbHRlcihwLE8sdixWKSl9LF9hZGRVSTVGaWx0ZXJBcnJheTpmdW5jdGlvbih1KXt0aGlzLl9hVUk1RmlsdGVyQXJyYXkucHVzaCh1KX0sYWRkQ29uZGl0aW9uOmZ1bmN0aW9uKHAsTyx2LFYpe3ZhciBQPXRoaXMuX29FbnRpdHlUeXBlLmZpbmRQcm9wZXJ0eUJ5TmFtZShwKTtpZihQPT1udWxsKXt0aHJvdyJDYW5ub3QgYWRkIGZpbHRlciBjb25kaXRpb24gZm9yIHVua25vd24gcHJvcGVydHkgbmFtZSAiK3B9dmFyIGY9dGhpcy5fb0VudGl0eVR5cGUuZ2V0RmlsdGVyYWJsZVByb3BlcnR5TmFtZXMoKTtpZihmLmluZGV4T2YocCk9PT0tMSl7dGhyb3ciQ2Fubm90IGFkZCBmaWx0ZXIgY29uZGl0aW9uIGZvciBub3QgZmlsdGVyYWJsZSBwcm9wZXJ0eSBuYW1lICIrcH10aGlzLl9hZGRDb25kaXRpb24ocCxPLHYsVik7cmV0dXJuIHRoaXN9LGFkZFNldENvbmRpdGlvbjpmdW5jdGlvbihwLHYpe3ZhciBQPXRoaXMuX29FbnRpdHlUeXBlLmZpbmRQcm9wZXJ0eUJ5TmFtZShwKTtpZihQPT1udWxsKXt0aHJvdyJDYW5ub3QgYWRkIGZpbHRlciBjb25kaXRpb24gZm9yIHVua25vd24gcHJvcGVydHkgbmFtZSAiK3B9dmFyIGY9dGhpcy5fb0VudGl0eVR5cGUuZ2V0RmlsdGVyYWJsZVByb3BlcnR5TmFtZXMoKTtpZihmLmluZGV4T2YocCk9PT0tMSl7dGhyb3ciQ2Fubm90IGFkZCBmaWx0ZXIgY29uZGl0aW9uIGZvciBub3QgZmlsdGVyYWJsZSBwcm9wZXJ0eSBuYW1lICIrcH1mb3IodmFyIGk9LTEsVjtWPXZbKytpXTspdGhpcy5fYWRkQ29uZGl0aW9uKHAsc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkVRLFYpO3JldHVybiB0aGlzfSxhZGRVSTVGaWx0ZXJDb25kaXRpb25zOmZ1bmN0aW9uKHUpe2lmKCFBcnJheS5pc0FycmF5KHUpKXRocm93IkFyZ3VtZW50IGlzIG5vdCBhbiBhcnJheSI7aWYodS5sZW5ndGg9PTApcmV0dXJuIHRoaXM7dmFyIGg9ZmFsc2U7Zm9yKHZhciBpPTA7aTx1Lmxlbmd0aDtpKyspe2lmKHVbaV0uYUZpbHRlcnMhPXVuZGVmaW5lZCl7aD10cnVlO2JyZWFrfX1pZihoKXRoaXMuX2FkZFVJNUZpbHRlckFycmF5KHUpO2Vsc2V7Zm9yKHZhciBpPTA7aTx1Lmxlbmd0aDtpKyspe3RoaXMuYWRkQ29uZGl0aW9uKHVbaV0uc1BhdGgsdVtpXS5zT3BlcmF0b3IsdVtpXS5vVmFsdWUxLHVbaV0ub1ZhbHVlMil9fXJldHVybiB0aGlzfSxnZXRFeHByZXNzaW9uQXNVSTVGaWx0ZXJBcnJheTpmdW5jdGlvbigpe3ZhciBmPXRoaXMuX2FDb25kaXRpb25VSTVGaWx0ZXIuY29uY2F0KFtdKTtmb3IodmFyIGk9LTEsRjtGPXRoaXMuX2FVSTVGaWx0ZXJBcnJheVsrK2ldOyl7Zm9yKHZhciBqPS0xLGE7YT1GWysral07KXtmLnB1c2goYSl9fXJldHVybiBmfSxnZXRQcm9wZXJ0aWVzUmVmZXJlbmNlZEJ5VUk1RmlsdGVyQXJyYXk6ZnVuY3Rpb24odSxyKXtmb3IodmFyIGk9LTEsVTtVPXVbKytpXTspe2lmKFUuYUZpbHRlcnMhPXVuZGVmaW5lZCl0aGlzLmdldFByb3BlcnRpZXNSZWZlcmVuY2VkQnlVSTVGaWx0ZXJBcnJheShVLmFGaWx0ZXJzLHIpO2Vsc2V7aWYocltVLnNQYXRoXT09dW5kZWZpbmVkKXJbVS5zUGF0aF09W107cltVLnNQYXRoXS5wdXNoKFUpfX19LGdldFJlZmVyZW5jZWRQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7dmFyIHI9bmV3IE9iamVjdCgpO2Zvcih2YXIgaT0tMSx1O3U9dGhpcy5fYUNvbmRpdGlvblVJNUZpbHRlclsrK2ldOyl7aWYoclt1LnNQYXRoXT09dW5kZWZpbmVkKXJbdS5zUGF0aF09W107clt1LnNQYXRoXS5wdXNoKHUpfWZvcih2YXIgaT0tMSxVO1U9dGhpcy5fYVVJNUZpbHRlckFycmF5WysraV07KXt0aGlzLmdldFByb3BlcnRpZXNSZWZlcmVuY2VkQnlVSTVGaWx0ZXJBcnJheShVLHIpfXJldHVybiByfSxyZW5kZXJVSTVGaWx0ZXI6ZnVuY3Rpb24odSl7dmFyIHA9dGhpcy5fb0VudGl0eVR5cGUuZmluZFByb3BlcnR5QnlOYW1lKHUuc1BhdGgpO2lmKHA9PW51bGwpe3Rocm93IkNhbm5vdCBhZGQgZmlsdGVyIGNvbmRpdGlvbiBmb3IgdW5rbm93biBwcm9wZXJ0eSBuYW1lICIrdS5zUGF0aH12YXIgZj1udWxsO3N3aXRjaCh1LnNPcGVyYXRvcil7Y2FzZSBzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuQlQ6Zj0iKCIrdS5zUGF0aCsiICIrc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkdFLnRvTG93ZXJDYXNlKCkrIiAiK3RoaXMuX3JlbmRlclByb3BlcnR5RmlsdGVyVmFsdWUodS5vVmFsdWUxLHAudHlwZSkrIiBhbmQgIit1LnNQYXRoKyIgIitzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuTEUudG9Mb3dlckNhc2UoKSsiICIrdGhpcy5fcmVuZGVyUHJvcGVydHlGaWx0ZXJWYWx1ZSh1Lm9WYWx1ZTIscC50eXBlKSsiKSI7YnJlYWs7Y2FzZSBzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuQ29udGFpbnM6Zj0ic3Vic3RyaW5nb2YoIit0aGlzLl9yZW5kZXJQcm9wZXJ0eUZpbHRlclZhbHVlKHUub1ZhbHVlMSwiRWRtLlN0cmluZyIpKyIsIit1LnNQYXRoKyIpIjticmVhaztjYXNlIHNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5TdGFydHNXaXRoOmNhc2Ugc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkVuZHNXaXRoOmY9dS5zT3BlcmF0b3IudG9Mb3dlckNhc2UoKSsiKCIrdS5zUGF0aCsiLCIrdGhpcy5fcmVuZGVyUHJvcGVydHlGaWx0ZXJWYWx1ZSh1Lm9WYWx1ZTEsIkVkbS5TdHJpbmciKSsiKSI7YnJlYWs7ZGVmYXVsdDpmPXUuc1BhdGgrIiAiK3Uuc09wZXJhdG9yLnRvTG93ZXJDYXNlKCkrIiAiK3RoaXMuX3JlbmRlclByb3BlcnR5RmlsdGVyVmFsdWUodS5vVmFsdWUxLHAudHlwZSl9cmV0dXJuIGZ9LHJlbmRlclVJNU11bHRpRmlsdGVyOmZ1bmN0aW9uKHUpe3ZhciBVPW5ldyBBcnJheSgpO3ZhciBPPSIiO3ZhciBsPXUuYkFuZD09dHJ1ZT8iIGFuZCAiOiIgb3IgIjtmb3IodmFyIGk9LTEsYTthPXUuYUZpbHRlcnNbKytpXTspe2lmKGEuYUZpbHRlcnMhPXVuZGVmaW5lZCl7VS5wdXNoKGEpO2NvbnRpbnVlfU8rPShPPT0iIj8iIjpsKSsiKCIrdGhpcy5yZW5kZXJVSTVGaWx0ZXIoYSkrIikifWlmKFUubGVuZ3RoPjApe2Zvcih2YXIgaT0tMSxtO209VVsrK2ldOyl7Tys9KE89PSIiPyIiOmwpKyIoIit0aGlzLnJlbmRlclVJNU11bHRpRmlsdGVyKG0pKyIpIn19cmV0dXJuIE99LHJlbmRlclVJNUZpbHRlckFycmF5OmZ1bmN0aW9uKHUpe2lmKHUubGVuZ3RoPT0wKXJldHVybiIiO3ZhciBPPSIiO3Uuc29ydChmdW5jdGlvbihhLGIpe2lmKGEuc1BhdGg9PWIuc1BhdGgpcmV0dXJuIDA7aWYoYS5zUGF0aD5iLnNQYXRoKXJldHVybiAxO2Vsc2UgcmV0dXJuLTF9KTt2YXIgcD11WzBdLnNQYXRoO3ZhciBzPSIiO3ZhciBuPW5ldyBBcnJheSgpLFU9bmV3IEFycmF5KCk7Zm9yKHZhciBpPS0xLGM7Yz11WysraV07KXtpZihjLmFGaWx0ZXJzIT11bmRlZmluZWQpe1UucHVzaChjKTtjb250aW51ZX1pZihwIT1jLnNQYXRoKXtpZihzIT0iIilPKz0oTz09IiI/IiI6IiBhbmQgIikrIigiK3MrIikiO3M9IiI7aWYobi5sZW5ndGg+MCl7Zm9yKHZhciBqPS0xLE47Tj1uWysral07KXtzKz0ocz09IiI/IiI6IiBhbmQgIikrdGhpcy5yZW5kZXJVSTVGaWx0ZXIoTil9Tys9KE89PSIiPyIiOiIgYW5kICIpKyIoIitzKyIpIjtzPSIifXA9Yy5zUGF0aDtuPW5ldyBBcnJheSgpfWlmKGMuc09wZXJhdG9yPT1zYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuTkUpe24ucHVzaChjKTtjb250aW51ZX1zKz0ocz09IiI/IiI6IiBvciAiKSt0aGlzLnJlbmRlclVJNUZpbHRlcihjKX1pZihzIT0iIilPKz0oTz09IiI/IiI6IiBhbmQgIikrIigiK3MrIikiO2lmKG4ubGVuZ3RoPjApe3M9IiI7Zm9yKHZhciBqPS0xLE47Tj1uWysral07KXtzKz0ocz09IiI/IiI6IiBhbmQgIikrdGhpcy5yZW5kZXJVSTVGaWx0ZXIoTil9Tys9KE89PSIiPyIiOiIgYW5kICIpKyIoIitzKyIpIn1pZihVLmxlbmd0aD4wKXtmb3IodmFyIGo9LTEsbTttPVVbKytqXTspe08rPShPPT0iIj8iIjoiIGFuZCAiKSsiKCIrdGhpcy5yZW5kZXJVSTVNdWx0aUZpbHRlcihtKSsiKSJ9fXJldHVybiBPfSxnZXRVUklGaWx0ZXJPcHRpb25WYWx1ZTpmdW5jdGlvbigpe3ZhciBPPXRoaXMucmVuZGVyVUk1RmlsdGVyQXJyYXkodGhpcy5fYUNvbmRpdGlvblVJNUZpbHRlcik7Zm9yKHZhciBpPS0xLHU7dT10aGlzLl9hVUk1RmlsdGVyQXJyYXlbKytpXTspe08rPShPPT0iIj8iIjoiIGFuZCAiKSsiKCIrdGhpcy5yZW5kZXJVSTVGaWx0ZXJBcnJheSh1KSsiKSJ9cmV0dXJuIE99LGlzVmFsaWQ6ZnVuY3Rpb24oKXt2YXIgcj10aGlzLl9vRW50aXR5VHlwZS5nZXRSZXF1aXJlZEZpbHRlclByb3BlcnR5TmFtZXMoKTt2YXIgcD10aGlzLmdldFJlZmVyZW5jZWRQcm9wZXJ0aWVzKCk7Zm9yKHZhciBpPS0xLFA7UD1yWysraV07KXtpZihwW1BdPT11bmRlZmluZWQpdGhyb3ciZmlsdGVyIGV4cHJlc3Npb24gZG9lcyBub3QgY29udGFpbiByZXF1aXJlZCBwcm9wZXJ0eSAiK1B9dmFyIGE9dGhpcy5fb0VudGl0eVR5cGUuZ2V0UHJvcGVydGllc1dpdGhGaWx0ZXJSZXN0cmljdGlvbnMoKTtmb3IodmFyIFAgaW4gYSl7dmFyIGY9YVtQXTt2YXIgYz0wO2lmKGY9PW8uRW50aXR5VHlwZS5wcm9wZXJ0eUZpbHRlclJlc3RyaWN0aW9uLlNJTkdMRV9WQUxVRSl7aWYocFtQXSE9dW5kZWZpbmVkKXtpZihwW1BdLmxlbmd0aD4xfHxwW1BdWzBdLnNPcGVyYXRvciE9c2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkVRKXRocm93ImZpbHRlciBleHByZXNzaW9uIG1heSB1c2UgIitQKyIgb25seSB3aXRoIGEgc2luZ2xlIEVRIGNvbmRpdGlvbiJ9fX1yZXR1cm4gdHJ1ZX0sZ2V0RW50aXR5VHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRW50aXR5VHlwZX0sZ2V0U2NoZW1hOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29TY2hlbWF9LGdldE1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Nb2RlbH0sX29FbnRpdHlUeXBlOm51bGwsX29TY2hlbWE6bnVsbCxfb01vZGVsOm51bGwsX2FGaWx0ZXJDb25kaXRpb246bnVsbH07by5Tb3J0T3JkZXI9e0FzY2VuZGluZzoiYXNjIixEZXNjZW5kaW5nOiJkZXNjIn07by5Tb3J0RXhwcmVzc2lvbj1mdW5jdGlvbihtLHMsZSl7dGhpcy5faW5pdChtLHMsZSl9O28uU29ydEV4cHJlc3Npb24ucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihtLHMsZSl7dGhpcy5fb0VudGl0eVR5cGU9ZTt0aGlzLl9vU2NoZW1hPXM7dGhpcy5fb01vZGVsPW07dGhpcy5fYVNvcnRDb25kaXRpb249W119LF9jb250YWluc1NvcnRlcjpmdW5jdGlvbihwKXt2YXIgcj1udWxsO2Zvcih2YXIgaT0tMSxjO2M9dGhpcy5fYVNvcnRDb25kaXRpb25bKytpXTspe2lmKGMucHJvcGVydHkubmFtZT09PXApe3I9e3NvcnRlcjpjLGluZGV4Oml9O2JyZWFrfX1yZXR1cm4gcn0sX3JlbW92ZUZyb21BcnJheTpmdW5jdGlvbihhLGYsdCl7dmFyIHI9YS5zbGljZSgodHx8ZikrMXx8YS5sZW5ndGgpO2EubGVuZ3RoPWY8MD9hLmxlbmd0aCtmOmY7cmV0dXJuIGEucHVzaC5hcHBseShhLHIpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuX2FTb3J0Q29uZGl0aW9uPVtdfSxhZGRTb3J0ZXI6ZnVuY3Rpb24ocCxzKXt2YXIgUD10aGlzLl9vRW50aXR5VHlwZS5maW5kUHJvcGVydHlCeU5hbWUocCk7aWYoUD09bnVsbCl7dGhyb3ciQ2Fubm90IGFkZCBzb3J0IGNvbmRpdGlvbiBmb3IgdW5rbm93biBwcm9wZXJ0eSBuYW1lICIrcH12YXIgZT10aGlzLl9jb250YWluc1NvcnRlcihwKTtpZihlIT1udWxsKXtlLnNvcnRlci5vcmRlcj1zO3JldHVybiB0aGlzfXZhciBTPXRoaXMuX29FbnRpdHlUeXBlLmdldFNvcnRhYmxlUHJvcGVydHlOYW1lcygpO2lmKFMuaW5kZXhPZihwKT09PS0xKXt0aHJvdyJDYW5ub3QgYWRkIHNvcnQgY29uZGl0aW9uIGZvciBub3Qgc29ydGFibGUgcHJvcGVydHkgbmFtZSAiK3B9dGhpcy5fYVNvcnRDb25kaXRpb24ucHVzaCh7cHJvcGVydHk6UCxvcmRlcjpzfSk7cmV0dXJuIHRoaXN9LHJlbW92ZVNvcnRlcjpmdW5jdGlvbihwKXtpZighcClyZXR1cm47dmFyIHM9dGhpcy5fY29udGFpbnNTb3J0ZXIocCk7aWYocyl7dGhpcy5fcmVtb3ZlRnJvbUFycmF5KHRoaXMuX2FTb3J0Q29uZGl0aW9uLHMuaW5kZXgpfX0sZ2V0RXhwcmVzc2lvbnNBc1VJNVNvcnRlckFycmF5OmZ1bmN0aW9uKCl7dmFyIHM9W107Zm9yKHZhciBpPS0xLGM7Yz10aGlzLl9hU29ydENvbmRpdGlvblsrK2ldOyl7cy5wdXNoKG5ldyBzYXAudWkubW9kZWwuU29ydGVyKGMucHJvcGVydHkubmFtZSxjLm9yZGVyPT1vLlNvcnRPcmRlci5EZXNjZW5kaW5nKSl9cmV0dXJuIHN9LGdldEV4cHJlc3Npb25Bc1VJNVNvcnRlcjpmdW5jdGlvbigpe3ZhciBzPXRoaXMuZ2V0RXhwcmVzc2lvbnNBc1VJNVNvcnRlckFycmF5KCk7aWYocy5sZW5ndGg9PTApe3JldHVybiBudWxsfWVsc2V7cmV0dXJuIHNbMF19fSxnZXRVUklPcmRlckJ5T3B0aW9uVmFsdWU6ZnVuY3Rpb24ocyl7aWYodGhpcy5fYVNvcnRDb25kaXRpb24ubGVuZ3RoPT0wKXJldHVybiIiO3ZhciBPPSIiO2Zvcih2YXIgaT0tMSxjO2M9dGhpcy5fYVNvcnRDb25kaXRpb25bKytpXTspe2lmKCFzW2MucHJvcGVydHkubmFtZV0pY29udGludWU7Tys9KE89PSIiPyIiOiIsIikrYy5wcm9wZXJ0eS5uYW1lKyIgIitjLm9yZGVyfXJldHVybiBPfSxnZXRFbnRpdHlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlUeXBlfSxnZXRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1NjaGVtYX0sZ2V0TW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01vZGVsfSxfb0VudGl0eVR5cGU6bnVsbCxfb1NjaGVtYTpudWxsLF9vTW9kZWw6bnVsbCxfYVNvcnRDb25kaXRpb246bnVsbH07by5QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdD1mdW5jdGlvbihwKXt0aGlzLl9pbml0KHApfTtvLlBhcmFtZXRlcml6YXRpb25SZXF1ZXN0LnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24ocCl7aWYoIXApdGhyb3ciTm8gcGFyYW1ldGVyaXphdGlvbiBnaXZlbiI7dGhpcy5fb1BhcmFtZXRlcml6YXRpb249cDt0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50PW5ldyBBcnJheSgpfSxfcmVuZGVyUGFyYW1ldGVyS2V5VmFsdWU6ZnVuY3Rpb24oayxwKXtyZXR1cm4gcS5zYXAuZW5jb2RlVVJMKHRoaXMuX29Nb2RlbC5nZXRPRGF0YU1vZGVsKCkuZm9ybWF0VmFsdWUoayxwKSl9LGdldFBhcmFtZXRlcml6YXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1BhcmFtZXRlcml6YXRpb259LHNldFBhcmFtZXRlclZhbHVlOmZ1bmN0aW9uKHAsdix0KXt2YXIgUD10aGlzLl9vUGFyYW1ldGVyaXphdGlvbi5maW5kUGFyYW1ldGVyQnlOYW1lKHApO2lmKCFQKXRocm93IkludmFsaWQgcGFyYW1ldGVyIG5hbWUgIitwO2lmKHQhPW51bGwpe2lmKCFQLmlzSW50ZXJ2YWxCb3VuZGFyeSgpKXRocm93IlJhbmdlIHZhbHVlIGNhbm5vdCBiZSBhcHBsaWVkIHRvIHBhcmFtZXRlciAiK3ArIiBhY2NlcHRpbmcgb25seSBzaW5nbGUgdmFsdWVzIjtpZighUC5pc0xvd2VySW50ZXJ2YWxCb3VuZGFyeSgpKXRocm93IlJhbmdlIHZhbHVlIGdpdmVuLCBidXQgcGFyYW1ldGVyICIrcCsiIGRvZXMgbm90IGhvbGQgdGhlIGxvd2VyIGJvdW5kYXJ5In1pZighUC5pc0ludGVydmFsQm91bmRhcnkoKSl7aWYodj09bnVsbClkZWxldGUgdGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudFtwXTtlbHNlIHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnRbcF09dn1lbHNle2lmKHY9PW51bGwmJnQhPW51bGwpdGhyb3ciUGFyYW1ldGVyICIrcCsiOiBBbiB1cHBlciBib3VuZGFyeSBjYW5ub3QgYmUgZ2l2ZW4gd2l0aG91dCB0aGUgbG93ZXIgYm91bmRhcnkiO2lmKHY9PW51bGwpe2RlbGV0ZSB0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50W3BdO3Q9bnVsbH1lbHNlIHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnRbcF09djt2YXIgdT1QLmdldFBlZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyKCk7aWYodD09bnVsbCl0PXY7aWYodj09bnVsbClkZWxldGUgdGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudFt1LmdldE5hbWUoKV07ZWxzZSB0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50W3UuZ2V0TmFtZSgpXT10fXJldHVybn0sZ2V0VVJJVG9QYXJhbWV0ZXJpemF0aW9uRW50aXR5U2V0OmZ1bmN0aW9uKHMpe3JldHVybihzP3M6IiIpKyIvIit0aGlzLl9vUGFyYW1ldGVyaXphdGlvbi5nZXRFbnRpdHlTZXQoKS5nZXRRTmFtZSgpfSxnZXRVUklUb1BhcmFtZXRlcml6YXRpb25FbnRyeTpmdW5jdGlvbihzKXt2YXIgZD10aGlzLl9vUGFyYW1ldGVyaXphdGlvbi5nZXRBbGxQYXJhbWV0ZXJzKCk7Zm9yKHZhciBEIGluIGQpe2lmKHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnRbRF09PXVuZGVmaW5lZCl0aHJvdyJQYXJhbWV0ZXIgIitEKyIgaGFzIG5vIHZhbHVlIGFzc2lnbmVkIn12YXIgaz0iIixmPXRydWU7Zm9yKHZhciBwIGluIHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnQpe2srPShmPyIiOiIsIikrcCsiPSIrdGhpcy5fcmVuZGVyUGFyYW1ldGVyS2V5VmFsdWUodGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudFtwXSxkW3BdLmdldFByb3BlcnR5KCkudHlwZSk7Zj1mYWxzZX1yZXR1cm4ocz9zOiIiKSsiLyIrdGhpcy5fb1BhcmFtZXRlcml6YXRpb24uZ2V0RW50aXR5U2V0KCkuZ2V0UU5hbWUoKSsiKCIraysiKSJ9LF9vUGFyYW1ldGVyaXphdGlvbjpudWxsLF9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50Om51bGx9O28uUXVlcnlSZXN1bHRSZXF1ZXN0PWZ1bmN0aW9uKFEscCl7dGhpcy5faW5pdChRKX07by5RdWVyeVJlc3VsdFJlcXVlc3QucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihRLHApe3RoaXMuX29RdWVyeVJlc3VsdD1RO3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdD1wO3RoaXMuX29BZ2dyZWdhdGlvbkxldmVsPW5ldyBPYmplY3QoKTt0aGlzLl9vTWVhc3VyZXM9bmV3IE9iamVjdCgpO3RoaXMuX2JJbmNsdWRlRW50aXR5S2V5PWZhbHNlO3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPW51bGw7dGhpcy5fb1NvcnRFeHByZXNzaW9uPW51bGw7dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lcz1udWxsfSxzZXRQYXJhbWV0ZXJpemF0aW9uUmVxdWVzdDpmdW5jdGlvbihwKXt0aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3Q9cH0sc2V0UmVzb3VyY2VQYXRoOmZ1bmN0aW9uKHIpe3RoaXMuX3NSZXNvdXJjZVBhdGg9cjtpZih0aGlzLl9zUmVzb3VyY2VQYXRoLmluZGV4T2YoIi8iKSE9MCl0aHJvdyJNaXNzaW5nIGxlYWRpbmcgLyAoc2xhc2gpIGZvciByZXNvdXJjZSBwYXRoIjtpZih0aGlzLl9vUXVlcnlSZXN1bHQuZ2V0UGFyYW1ldGVyaXphdGlvbigpKXt2YXIgbD1yLmxhc3RJbmRleE9mKCIvIik7aWYobD09LTEpdGhyb3ciTWlzc2luZyBuYXZpZ2F0aW9uIGZyb20gcGFyYW1ldGVyIGVudGl0eSBzZXQgdG8gcXVlcnkgcmVzdWx0IGluIHJlc291cmNlIHBhdGgiO3ZhciBuPXIuc3Vic3RyaW5nKGwrMSk7aWYobiE9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldFBhcmFtZXRlcml6YXRpb24oKS5nZXROYXZpZ2F0aW9uUHJvcGVydHlUb1F1ZXJ5UmVzdWx0KCkpdGhyb3ciSW52YWxpZCBuYXZpZ2F0aW9uIHByb3BlcnR5IGZyb20gcGFyYW1ldGVyIGVudGl0eSBzZXQgdG8gcXVlcnkgcmVzdWx0IGluIHJlc291cmNlIHBhdGgifX0sZ2V0UGFyYW1ldGVyaXphdGlvblJlcXVlc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0fSxnZXRRdWVyeVJlc3VsdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUXVlcnlSZXN1bHR9LHNldEFnZ3JlZ2F0aW9uTGV2ZWw6ZnVuY3Rpb24oZCl7dGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWw9bmV3IE9iamVjdCgpO2lmKCFkKXtkPXRoaXMuX29RdWVyeVJlc3VsdC5nZXRBbGxEaW1lbnNpb25OYW1lcygpfXRoaXMuYWRkVG9BZ2dyZWdhdGlvbkxldmVsKGQpO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXM9bnVsbH0sYWRkVG9BZ2dyZWdhdGlvbkxldmVsOmZ1bmN0aW9uKGQpe2lmKCFkKXJldHVybjt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW51bGw7Zm9yKHZhciBpPS0xLEQ7RD1kWysraV07KXtpZighdGhpcy5fb1F1ZXJ5UmVzdWx0LmZpbmREaW1lbnNpb25CeU5hbWUoRCkpdGhyb3cgRCsiIGlzIG5vdCBhIHZhbGlkIGRpbWVuc2lvbiBuYW1lIjt0aGlzLl9vQWdncmVnYXRpb25MZXZlbFtEXT17a2V5OnRydWUsdGV4dDpmYWxzZSxhdHRyaWJ1dGVzOm51bGx9fX0scmVtb3ZlRnJvbUFnZ3JlZ2F0aW9uTGV2ZWw6ZnVuY3Rpb24oZCl7aWYoIWQpe3JldHVybn10aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW51bGw7Zm9yKHZhciBpPS0xLEQ7RD1kWysraV07KXtpZighdGhpcy5fb1F1ZXJ5UmVzdWx0LmZpbmREaW1lbnNpb25CeU5hbWUoRCkpe3Rocm93IEQrIiBpcyBub3QgYSB2YWxpZCBkaW1lbnNpb24gbmFtZSJ9aWYodGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbRF0hPXVuZGVmaW5lZCl7ZGVsZXRlIHRoaXMuX29BZ2dyZWdhdGlvbkxldmVsW0RdO3RoaXMuZ2V0U29ydEV4cHJlc3Npb24oKS5yZW1vdmVTb3J0ZXIoRCl9fX0sZ2V0QWdncmVnYXRpb25MZXZlbDpmdW5jdGlvbigpe3ZhciBkPW5ldyBBcnJheSgpO2Zvcih2YXIgRCBpbiB0aGlzLl9vQWdncmVnYXRpb25MZXZlbCl7ZC5wdXNoKEQpfXJldHVybiBkfSxnZXRBZ2dyZWdhdGlvbkxldmVsRGV0YWlsczpmdW5jdGlvbihkKXtpZih0aGlzLl9vQWdncmVnYXRpb25MZXZlbFtkXT09dW5kZWZpbmVkKXRocm93IkFnZ3JlZ2F0aW9uIGxldmVsIGRvZXMgbm90IGluY2x1ZGUgZGltZW5zaW9uICIrZDtyZXR1cm4gdGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbZF19LHNldE1lYXN1cmVzOmZ1bmN0aW9uKG0pe2lmKCFtKXttPXRoaXMuX29RdWVyeVJlc3VsdC5nZXRBbGxNZWFzdXJlTmFtZXMoKX10aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW51bGw7dGhpcy5fb01lYXN1cmVzPW5ldyBPYmplY3QoKTtmb3IodmFyIGk9LTEsTTtNPW1bKytpXTspe2lmKCF0aGlzLl9vUXVlcnlSZXN1bHQuZmluZE1lYXN1cmVCeU5hbWUoTSkpdGhyb3cgTSsiIGlzIG5vdCBhIHZhbGlkIG1lYXN1cmUgbmFtZSI7dGhpcy5fb01lYXN1cmVzW01dPXt2YWx1ZTp0cnVlLHRleHQ6ZmFsc2UsdW5pdDpmYWxzZX19fSxnZXRNZWFzdXJlTmFtZXM6ZnVuY3Rpb24oKXt2YXIgbT1uZXcgQXJyYXkoKTtmb3IodmFyIE0gaW4gdGhpcy5fb01lYXN1cmVzKXttLnB1c2goTSl9cmV0dXJuIG19LGluY2x1ZGVEaW1lbnNpb25LZXlUZXh0QXR0cmlidXRlczpmdW5jdGlvbihkLEksYixhKXt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW51bGw7dmFyIEQ9bmV3IEFycmF5KCk7aWYoZCl7aWYodGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbZF09PXVuZGVmaW5lZCl0aHJvdyBkKyIgaXMgbm90IGluY2x1ZGVkIGluIHRoZSBhZ2dyZWdhdGlvbiBsZXZlbCI7RC5wdXNoKGQpfWVsc2V7Zm9yKHZhciBuIGluIHRoaXMuX29BZ2dyZWdhdGlvbkxldmVsKXtELnB1c2gobil9YT1udWxsfWZvcih2YXIgaT0tMSxzO3M9RFsrK2ldOyl7aWYoSSE9bnVsbCl0aGlzLl9vQWdncmVnYXRpb25MZXZlbFtzXS5rZXk9STtpZihiIT1udWxsKXRoaXMuX29BZ2dyZWdhdGlvbkxldmVsW3NdLnRleHQ9YjtpZihhIT1udWxsKXRoaXMuX29BZ2dyZWdhdGlvbkxldmVsW3NdLmF0dHJpYnV0ZXM9YX19LGluY2x1ZGVNZWFzdXJlUmF3Rm9ybWF0dGVkVmFsdWVVbml0OmZ1bmN0aW9uKG0sSSxiLGEpe3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXM9bnVsbDt2YXIgTT1uZXcgQXJyYXkoKTtpZihtKXtpZih0aGlzLl9vTWVhc3VyZXNbbV09PXVuZGVmaW5lZCl0aHJvdyBtKyIgaXMgbm90IHBhcnQgb2YgdGhlIHF1ZXJ5IHJlc3VsdCI7TS5wdXNoKG0pfWVsc2V7Zm9yKHZhciBuIGluIHRoaXMuX29NZWFzdXJlcyl7TS5wdXNoKG4pfX1mb3IodmFyIGk9LTEscztzPU1bKytpXTspe2lmKEkhPW51bGwpdGhpcy5fb01lYXN1cmVzW3NdLnZhbHVlPUk7aWYoYiE9bnVsbCl0aGlzLl9vTWVhc3VyZXNbc10udGV4dD1iO2lmKGEhPW51bGwpdGhpcy5fb01lYXN1cmVzW3NdLnVuaXQ9YX19LGdldEZpbHRlckV4cHJlc3Npb246ZnVuY3Rpb24oKXtpZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj09bnVsbCl7dmFyIGU9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEVudGl0eVR5cGUoKTt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1uZXcgby5GaWx0ZXJFeHByZXNzaW9uKHRoaXMuX29RdWVyeVJlc3VsdC5nZXRNb2RlbCgpLGUuZ2V0U2NoZW1hKCksZSl9cmV0dXJuIHRoaXMuX29GaWx0ZXJFeHByZXNzaW9ufSxzZXRGaWx0ZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGYpe3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPWZ9LGdldFNvcnRFeHByZXNzaW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uPT1udWxsKXt2YXIgZT10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpO3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1uZXcgby5Tb3J0RXhwcmVzc2lvbihlLmdldE1vZGVsKCksZS5nZXRTY2hlbWEoKSxlKX1yZXR1cm4gdGhpcy5fb1NvcnRFeHByZXNzaW9ufSxzZXRTb3J0RXhwcmVzc2lvbjpmdW5jdGlvbihzKXt0aGlzLl9vU29ydEV4cHJlc3Npb249c30sc2V0UmVxdWVzdE9wdGlvbnM6ZnVuY3Rpb24oaSxJKXtpZihpIT1udWxsKXRoaXMuX2JJbmNsdWRlRW50aXR5S2V5PWk7aWYoSSE9bnVsbCl0aGlzLl9iSW5jbHVkZUNvdW50PUl9LHNldFJlc3VsdFBhZ2VCb3VuZGFyaWVzOmZ1bmN0aW9uKHMsZSl7aWYocyE9bnVsbCYmdHlwZW9mIHMhPT0ibnVtYmVyIil7dGhyb3ciU3RhcnQgdmFsdWUgbXVzdCBiZSBudWxsIG9yIG51bWVyaWMifWlmKGUhPT1udWxsJiZ0eXBlb2YgZSE9PSJudW1iZXIiKXt0aHJvdyJFbmQgdmFsdWUgbXVzdCBiZSBudWxsIG9yIG51bWVyaWMifWlmKHM9PW51bGwpcz0xO2lmKHM8MXx8cz4oZT09bnVsbD9zOmUpKXt0aHJvdyJJbnZhbGlkIHZhbHVlcyBmb3IgcmVxdWVzdGVkIHBhZ2UgYm91bmRhcmllcyJ9dGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uPShzPjEpP3MtMTpudWxsO3RoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uPShlIT1udWxsKT8oZS1zKzEpOm51bGx9LGdldFJlc3VsdFBhZ2VCb3VuZGFyaWVzOmZ1bmN0aW9uKCl7cmV0dXJue3N0YXJ0Oih0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb249PW51bGwpPzE6dGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uLGVuZDoodGhpcy5faVRvcFJlcXVlc3RPcHRpb24hPW51bGwpPyh0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb249PW51bGwpPzE6dGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uK3RoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uOm51bGx9fSxnZXRVUklUb1F1ZXJ5UmVzdWx0RW50aXR5U2V0OmZ1bmN0aW9uKHMpe3ZhciB1PW51bGw7aWYodGhpcy5fc1Jlc291cmNlUGF0aCE9bnVsbCl7dT0ocz9zOiIiKSt0aGlzLl9zUmVzb3VyY2VQYXRofWVsc2V7aWYodGhpcy5fb1F1ZXJ5UmVzdWx0LmdldFBhcmFtZXRlcml6YXRpb24oKSl7aWYoIXRoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdCl0aHJvdyJNaXNzaW5nIHBhcmFtZXRlcml6YXRpb24gcmVxdWVzdCI7ZWxzZSB1PXRoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdC5nZXRVUklUb1BhcmFtZXRlcml6YXRpb25FbnRyeShzKSsiLyIrdGhpcy5fb1F1ZXJ5UmVzdWx0LmdldFBhcmFtZXRlcml6YXRpb24oKS5nZXROYXZpZ2F0aW9uUHJvcGVydHlUb1F1ZXJ5UmVzdWx0KCl9ZWxzZSB1PShzP3M6IiIpKyIvIit0aGlzLl9vUXVlcnlSZXN1bHQuZ2V0RW50aXR5U2V0KCkuZ2V0UU5hbWUoKX1yZXR1cm4gdX0sZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZTpmdW5jdGlvbihRKXt2YXIgcz1udWxsO3N3aXRjaChRKXtjYXNlIiRzZWxlY3QiOnt2YXIgUz0iIjt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW5ldyBPYmplY3QoKTt2YXIgZD1udWxsO2Zvcih2YXIgRCBpbiB0aGlzLl9vQWdncmVnYXRpb25MZXZlbCl7dmFyIGE9dGhpcy5fb1F1ZXJ5UmVzdWx0LmZpbmREaW1lbnNpb25CeU5hbWUoRCk7dmFyIGI9dGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbRF07aWYoYi5rZXk9PXRydWUpe2Q9YS5nZXRLZXlQcm9wZXJ0eSgpLm5hbWU7aWYodGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1tkXT09dW5kZWZpbmVkKXtTKz0oUz09IiI/IiI6IiwiKStkO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbZF09dHJ1ZX19aWYoYi50ZXh0PT10cnVlJiZhLmdldFRleHRQcm9wZXJ0eSgpKXtkPWEuZ2V0VGV4dFByb3BlcnR5KCkubmFtZTtpZih0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW2RdPT11bmRlZmluZWQpe1MrPShTPT0iIj8iIjoiLCIpK2Q7dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1tkXT10cnVlfX1pZihiLmF0dHJpYnV0ZXMpe2Zvcih2YXIgaT0tMSxBO0E9Yi5hdHRyaWJ1dGVzWysraV07KXtkPWEuZmluZEF0dHJpYnV0ZUJ5TmFtZShBKS5nZXROYW1lKCk7aWYodGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1tkXT09dW5kZWZpbmVkKXtTKz0oUz09IiI/IiI6IiwiKStkO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbZF09dHJ1ZX19fX12YXIgbTtmb3IodmFyIE0gaW4gdGhpcy5fb01lYXN1cmVzKXt2YXIgYz10aGlzLl9vUXVlcnlSZXN1bHQuZmluZE1lYXN1cmVCeU5hbWUoTSk7dmFyIGU9dGhpcy5fb01lYXN1cmVzW01dO2lmKGUudmFsdWU9PXRydWUpe209Yy5nZXRSYXdWYWx1ZVByb3BlcnR5KCkubmFtZTtpZih0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW21dPT11bmRlZmluZWQpe1MrPShTPT0iIj8iIjoiLCIpK207dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1ttXT10cnVlfX1pZihlLnRleHQ9PXRydWUmJmMuZ2V0Rm9ybWF0dGVkVmFsdWVQcm9wZXJ0eSgpKXttPWMuZ2V0Rm9ybWF0dGVkVmFsdWVQcm9wZXJ0eSgpLm5hbWU7aWYodGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1ttXT09dW5kZWZpbmVkKXtTKz0oUz09IiI/IiI6IiwiKSttO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbbV09dHJ1ZX19aWYoZS51bml0PT10cnVlJiZjLmdldFVuaXRQcm9wZXJ0eSgpKXttPWMuZ2V0VW5pdFByb3BlcnR5KCkubmFtZTtpZih0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW21dPT11bmRlZmluZWQpe1MrPShTPT0iIj8iIjoiLCIpK207dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1ttXT10cnVlfX19aWYodGhpcy5fYkluY2x1ZGVFbnRpdHlLZXkpe3ZhciBrPXRoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0VHlwZURlc2NyaXB0aW9uKCkua2V5LnByb3BlcnR5UmVmO2Zvcih2YXIgaT0tMSxLO0s9a1srK2ldOyl7Uys9KFM9PSIiPyIiOiIsIikrSy5uYW1lfX1zPShTP1M6bnVsbCk7YnJlYWt9Y2FzZSIkZmlsdGVyIjp7dmFyIGY9bnVsbDtpZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbilmPXRoaXMuX29GaWx0ZXJFeHByZXNzaW9uLmdldFVSSUZpbHRlck9wdGlvblZhbHVlKCk7cz0oZj9mOm51bGwpO2JyZWFrfWNhc2UiJG9yZGVyYnkiOnt2YXIgZz1udWxsO2lmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbilnPXRoaXMuX29Tb3J0RXhwcmVzc2lvbi5nZXRVUklPcmRlckJ5T3B0aW9uVmFsdWUodGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lcyk7cz0oZz9nOm51bGwpO2JyZWFrfWNhc2UiJHRvcCI6e2lmKHRoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uIT09bnVsbCl7cz10aGlzLl9pVG9wUmVxdWVzdE9wdGlvbn1icmVha31jYXNlIiRza2lwIjp7cz10aGlzLl9pU2tpcFJlcXVlc3RPcHRpb247YnJlYWt9Y2FzZSIkaW5saW5lY291bnQiOntzPSh0aGlzLl9iSW5jbHVkZUNvdW50PT10cnVlPyJhbGxwYWdlcyI6bnVsbCk7YnJlYWt9ZGVmYXVsdDpicmVha31yZXR1cm4gc30sZ2V0VVJJVG9RdWVyeVJlc3VsdEVudHJpZXM6ZnVuY3Rpb24ocyxyKXt2YXIgcj10aGlzLmdldFVSSVRvUXVlcnlSZXN1bHRFbnRpdHlTZXQocyk7dGhpcy5nZXRGaWx0ZXJFeHByZXNzaW9uKCkuaXNWYWxpZCgpO3ZhciBTPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHNlbGVjdCIpO3ZhciBmPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJGZpbHRlciIpO3ZhciBhPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJG9yZGVyYnkiKTt2YXIgdD10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiR0b3AiKTt2YXIgYj10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRza2lwIik7dmFyIGk9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkaW5saW5lY291bnQiKTt2YXIgdT1yO3ZhciBRPWZhbHNlO2lmKFMpe3UrPSI/JHNlbGVjdD0iK1M7UT10cnVlfWlmKHRoaXMuX29GaWx0ZXJFeHByZXNzaW9uJiZmKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJGZpbHRlcj0iK2Z9aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uJiZhKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJG9yZGVyYnk9IithfWlmKHRoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uJiZ0KXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJHRvcD0iK3R9aWYodGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uJiZiKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJHNraXA9IitifWlmKHRoaXMuX2JJbmNsdWRlQ291bnQmJmkpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2V7dSs9IiYifXUrPSIkaW5saW5lY291bnQ9IitpfXJldHVybiB1fSxfb1F1ZXJ5UmVzdWx0Om51bGwsX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdDpudWxsLF9zUmVzb3VyY2VQYXRoOm51bGwsX29BZ2dyZWdhdGlvbkxldmVsOm51bGwsX29NZWFzdXJlczpudWxsLF9iSW5jbHVkZUVudGl0eUtleTpudWxsLF9iSW5jbHVkZUNvdW50Om51bGwsX29GaWx0ZXJFeHByZXNzaW9uOm51bGwsX29Tb3J0RXhwcmVzc2lvbjpudWxsLF9pU2tpcFJlcXVlc3RPcHRpb246MCxfaVRvcFJlcXVlc3RPcHRpb246bnVsbH07by5QYXJhbWV0ZXJWYWx1ZVNldFJlcXVlc3Q9ZnVuY3Rpb24ocCl7dGhpcy5faW5pdChwKX07by5QYXJhbWV0ZXJWYWx1ZVNldFJlcXVlc3QucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihwKXt0aGlzLl9vUGFyYW1ldGVyPXA7dGhpcy5fb1ZhbHVlU2V0UmVzdWx0PW5ldyBPYmplY3QoKTt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1udWxsO3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1udWxsfSxpbmNsdWRlUGFyYW1ldGVyVGV4dDpmdW5jdGlvbihpKXtpZihpIT1udWxsKXRoaXMuX29WYWx1ZVNldFJlc3VsdC50ZXh0PWl9LGdldEZpbHRlckV4cHJlc3Npb246ZnVuY3Rpb24oKXtpZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj09bnVsbCl7dmFyIGU9dGhpcy5fb1BhcmFtZXRlci5nZXRDb250YWluaW5nUGFyYW1ldGVyaXphdGlvbigpLmdldEVudGl0eVR5cGUoKTt2YXIgbT10aGlzLl9vUGFyYW1ldGVyLmdldENvbnRhaW5pbmdQYXJhbWV0ZXJpemF0aW9uKCkuZ2V0VGFyZ2V0UXVlcnlSZXN1bHQoKS5nZXRNb2RlbCgpO3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPW5ldyBvLkZpbHRlckV4cHJlc3Npb24obSxlLmdldFNjaGVtYSgpLGUpfXJldHVybiB0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbn0sc2V0RmlsdGVyRXhwcmVzc2lvbjpmdW5jdGlvbihmKXt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1mfSxnZXRTb3J0RXhwcmVzc2lvbjpmdW5jdGlvbigpe2lmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbj09bnVsbCl7dmFyIGU9dGhpcy5fb1BhcmFtZXRlci5nZXRDb250YWluaW5nUGFyYW1ldGVyaXphdGlvbigpLmdldEVudGl0eVR5cGUoKTt0aGlzLl9vU29ydEV4cHJlc3Npb249bmV3IG8uU29ydEV4cHJlc3Npb24oZS5nZXRNb2RlbCgpLGUuZ2V0U2NoZW1hKCksZSl9cmV0dXJuIHRoaXMuX29Tb3J0RXhwcmVzc2lvbn0sc2V0U29ydEV4cHJlc3Npb246ZnVuY3Rpb24ocyl7dGhpcy5fb1NvcnRFeHByZXNzaW9uPXN9LGdldFVSSVF1ZXJ5T3B0aW9uVmFsdWU6ZnVuY3Rpb24oUSl7dmFyIHM9bnVsbDtzd2l0Y2goUSl7Y2FzZSIkc2VsZWN0Ijp7dmFyIFM9IiI7Uys9KFM9PSIiPyIiOiIsIikrdGhpcy5fb1BhcmFtZXRlci5nZXRQcm9wZXJ0eSgpLm5hbWU7aWYodGhpcy5fb1ZhbHVlU2V0UmVzdWx0LnRleHQ9PXRydWUmJnRoaXMuX29QYXJhbWV0ZXIuZ2V0VGV4dFByb3BlcnR5KCkpUys9KFM9PSIiPyIiOiIsIikrdGhpcy5fb1BhcmFtZXRlci5nZXRUZXh0UHJvcGVydHkoKS5uYW1lO3M9KFM/UzpudWxsKTticmVha31jYXNlIiRmaWx0ZXIiOnt2YXIgZj1udWxsO2lmKHRoaXMuX29GaWx0ZXJFeHByZXNzaW9uKWY9dGhpcy5fb0ZpbHRlckV4cHJlc3Npb24uZ2V0VVJJRmlsdGVyT3B0aW9uVmFsdWUoKTtzPShmP2Y6bnVsbCk7YnJlYWt9Y2FzZSIkb3JkZXJieSI6e3ZhciBhPW51bGw7aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uKWE9dGhpcy5fb1NvcnRFeHByZXNzaW9uLmdldFVSSU9yZGVyQnlPcHRpb25WYWx1ZSgpO3M9KGE/YTpudWxsKTticmVha31kZWZhdWx0OmJyZWFrfXJldHVybiBzfSxnZXRVUklUb1BhcmFtZXRlclZhbHVlU2V0RW50cmllczpmdW5jdGlvbihzKXt2YXIgcj1udWxsO3I9KHM/czoiIikrIi8iK3RoaXMuX29QYXJhbWV0ZXIuZ2V0Q29udGFpbmluZ1BhcmFtZXRlcml6YXRpb24oKS5nZXRFbnRpdHlTZXQoKS5nZXRRTmFtZSgpO3RoaXMuZ2V0RmlsdGVyRXhwcmVzc2lvbigpLmlzVmFsaWQoKTt2YXIgUz10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRzZWxlY3QiKTt2YXIgZj10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRmaWx0ZXIiKTt2YXIgYT10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRvcmRlcmJ5Iik7dmFyIHU9cjt2YXIgUT1mYWxzZTtpZihTKXt1Kz0iPyRzZWxlY3Q9IitTO1E9dHJ1ZX1pZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbiYmZil7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZSB1Kz0iJiI7dSs9IiRmaWx0ZXI9IitmfWlmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbiYmYSl7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZSB1Kz0iJiI7dSs9IiRvcmRlcmJ5PSIrYX1yZXR1cm4gdX0sX29QYXJhbWV0ZXI6bnVsbCxfb0ZpbHRlckV4cHJlc3Npb246bnVsbCxfb1NvcnRFeHByZXNzaW9uOm51bGwsX29WYWx1ZVNldFJlc3VsdDpudWxsfTtvLkRpbWVuc2lvbk1lbWJlclNldFJlcXVlc3Q9ZnVuY3Rpb24oZCxwLHUpe3RoaXMuX2luaXQoZCxwLHUpfTtvLkRpbWVuc2lvbk1lbWJlclNldFJlcXVlc3QucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihkLHAsdSl7dGhpcy5fb0RpbWVuc2lvbj1kO3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdD1wO3RoaXMuX2JVc2VNYXN0ZXJEYXRhPXU7dGhpcy5fb1ZhbHVlU2V0UmVzdWx0PW5ldyBPYmplY3QoKTt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1udWxsO3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1udWxsO2lmKHRoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdCE9bnVsbCYmdGhpcy5fYlVzZU1hc3RlckRhdGE9PXRydWUpdGhyb3ciTElNSVRBVElPTjogcGFyYW1ldGVyaXplZCBtYXN0ZXIgZGF0YSBlbnRpdHkgc2V0cyBhcmUgbm90IHlldCBpbXBsZW1lbnRlZCI7aWYodGhpcy5fYlVzZU1hc3RlckRhdGEpe3RoaXMuX29FbnRpdHlTZXQ9dGhpcy5fb0RpbWVuc2lvbi5nZXRNYXN0ZXJEYXRhRW50aXR5U2V0KCl9ZWxzZXt0aGlzLl9vRW50aXR5U2V0PXRoaXMuX29EaW1lbnNpb24uZ2V0Q29udGFpbmluZ1F1ZXJ5UmVzdWx0KCkuZ2V0RW50aXR5U2V0KCk7aWYodGhpcy5fb0RpbWVuc2lvbi5nZXRDb250YWluaW5nUXVlcnlSZXN1bHQoKS5nZXRQYXJhbWV0ZXJpemF0aW9uKCkmJiF0aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3QpdGhyb3ciTWlzc2luZyBwYXJhbWV0ZXJpemF0aW9uIHJlcXVlc3QifX0sc2V0UGFyYW1ldGVyaXphdGlvblJlcXVlc3Q6ZnVuY3Rpb24ocCl7dGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0PXB9LGluY2x1ZGVEaW1lbnNpb25UZXh0QXR0cmlidXRlczpmdW5jdGlvbihpLEkpe3RoaXMuX29WYWx1ZVNldFJlc3VsdC50ZXh0PXt0ZXh0OmZhbHNlLGF0dHJpYnV0ZXM6ZmFsc2V9O2lmKGk9PXRydWUpdGhpcy5fb1ZhbHVlU2V0UmVzdWx0LnRleHQ9dHJ1ZTtpZihJPT10cnVlKXRoaXMuX29WYWx1ZVNldFJlc3VsdC5hdHRyaWJ1dGVzPXRydWV9LGdldEZpbHRlckV4cHJlc3Npb246ZnVuY3Rpb24oKXtpZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj09bnVsbCl7dmFyIGU9dGhpcy5fb0VudGl0eVNldC5nZXRFbnRpdHlUeXBlKCk7dmFyIG09dGhpcy5fb0RpbWVuc2lvbi5nZXRDb250YWluaW5nUXVlcnlSZXN1bHQoKS5nZXRNb2RlbCgpO3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPW5ldyBvLkZpbHRlckV4cHJlc3Npb24obSxlLmdldFNjaGVtYSgpLGUpfXJldHVybiB0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbn0sc2V0RmlsdGVyRXhwcmVzc2lvbjpmdW5jdGlvbihmKXt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1mfSxnZXRTb3J0RXhwcmVzc2lvbjpmdW5jdGlvbigpe2lmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbj09bnVsbCl7dGhpcy5fb1NvcnRFeHByZXNzaW9uPW5ldyBvLlNvcnRFeHByZXNzaW9uKHRoaXMuX29FbnRpdHlUeXBlLmdldE1vZGVsKCksdGhpcy5fb0VudGl0eVR5cGUuZ2V0U2NoZW1hKCksdGhpcy5fb0VudGl0eVR5cGUpfXJldHVybiB0aGlzLl9vU29ydEV4cHJlc3Npb259LHNldFNvcnRFeHByZXNzaW9uOmZ1bmN0aW9uKHMpe3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1zfSxzZXRSZXF1ZXN0T3B0aW9uczpmdW5jdGlvbihpKXtpZihpIT1udWxsKXRoaXMuX2JJbmNsdWRlQ291bnQ9aX0sc2V0UmVzdWx0UGFnZUJvdW5kYXJpZXM6ZnVuY3Rpb24ocyxlKXtpZihzIT1udWxsJiZ0eXBlb2YgcyE9PSJudW1iZXIiKXt0aHJvdyJTdGFydCB2YWx1ZSBtdXN0IGJlIG51bGwgb3IgbnVtZXJpYyJ9aWYoZSE9PW51bGwmJnR5cGVvZiBlIT09Im51bWJlciIpe3Rocm93IkVuZCB2YWx1ZSBtdXN0IGJlIG51bGwgb3IgbnVtZXJpYyJ9aWYocz09bnVsbClzPTE7aWYoczwxfHxzPihlPT1udWxsP3M6ZSkpe3Rocm93IkludmFsaWQgdmFsdWVzIGZvciByZXF1ZXN0ZWQgcGFnZSBib3VuZGFyaWVzIn10aGlzLl9pU2tpcFJlcXVlc3RPcHRpb249KHM+MSk/cy0xOm51bGw7dGhpcy5faVRvcFJlcXVlc3RPcHRpb249KGUhPW51bGwpPyhlLXMrMSk6bnVsbH0sZ2V0UmVzdWx0UGFnZUJvdW5kYXJpZXM6ZnVuY3Rpb24oKXtyZXR1cm57c3RhcnQ6KHRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbj09bnVsbCk/MTp0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb24sZW5kOih0aGlzLl9pVG9wUmVxdWVzdE9wdGlvbiE9bnVsbCk/KHRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbj09bnVsbCk/MTp0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb24rdGhpcy5faVRvcFJlcXVlc3RPcHRpb246bnVsbH19LGdldFVSSVF1ZXJ5T3B0aW9uVmFsdWU6ZnVuY3Rpb24oUSl7dmFyIHM9bnVsbDtzd2l0Y2goUSl7Y2FzZSIkc2VsZWN0Ijp7dmFyIFM9IiI7dmFyIGU9dGhpcy5fb0VudGl0eVNldC5nZXRFbnRpdHlUeXBlKCk7dmFyIGs9ZS5nZXRLZXlQcm9wZXJ0aWVzKCk7dmFyIEs9W107aWYodGhpcy5fYlVzZU1hc3RlckRhdGEpe2Zvcih2YXIgaT0tMSxhO2E9a1srK2ldOyl7Uys9KFM9PSIiPyIiOiIsIikrYTt2YXIgYj1lLmdldFRleHRQcm9wZXJ0eU9mUHJvcGVydHkoYSk7aWYoYil7aWYodGhpcy5fb1ZhbHVlU2V0UmVzdWx0LnRleHQ9PXRydWUpUys9IiwiK2IubmFtZTtLLnB1c2goYi5uYW1lKX19fWVsc2V7Uys9KFM9PSIiPyIiOiIsIikrdGhpcy5fb0RpbWVuc2lvbi5nZXRLZXlQcm9wZXJ0eSgpLm5hbWU7aWYodGhpcy5fb1ZhbHVlU2V0UmVzdWx0LnRleHQ9PXRydWUmJnRoaXMuX29EaW1lbnNpb24uZ2V0VGV4dFByb3BlcnR5KCkpUys9KFM9PSIiPyIiOiIsIikrdGhpcy5fb0RpbWVuc2lvbi5nZXRUZXh0UHJvcGVydHkoKS5uYW1lfWlmKHRoaXMuX29WYWx1ZVNldFJlc3VsdC5hdHRyaWJ1dGVzKXtpZih0aGlzLl9iVXNlTWFzdGVyRGF0YSl7dmFyIEE9ZS5nZXRQcm9wZXJ0aWVzKCk7Zm9yKHZhciBwIGluIEEpe3ZhciBJPWZhbHNlO2Zvcih2YXIgaT0tMSxhO2E9a1srK2ldOyl7aWYocD09YSl7ST10cnVlO2JyZWFrfX1pZihJKWNvbnRpbnVlO2Zvcih2YXIgaT0tMSxjO2M9S1srK2ldOyl7aWYocD09Yyl7ST10cnVlO2JyZWFrfX1pZighSSlTKz0iLCIrcH19ZWxzZXt2YXIgZD10aGlzLl9vRGltZW5zaW9uLmdldEFsbEF0dHJpYnV0ZU5hbWVzKCk7Zm9yKHZhciBpPS0xLGY7Zj1kWysraV07KXtTKz0oUz09IiI/IiI6IiwiKSt0aGlzLl9vRGltZW5zaW9uLmZpbmRBdHRyaWJ1dGVCeU5hbWUoZikuZ2V0TmFtZSgpfX19cz0oUz9TOm51bGwpO2JyZWFrfWNhc2UiJGZpbHRlciI6e3ZhciBGPW51bGw7aWYodGhpcy5fb0ZpbHRlckV4cHJlc3Npb24pRj10aGlzLl9vRmlsdGVyRXhwcmVzc2lvbi5nZXRVUklGaWx0ZXJPcHRpb25WYWx1ZSgpO3M9KEY/RjpudWxsKTticmVha31jYXNlIiRvcmRlcmJ5Ijp7dmFyIGc9bnVsbDtpZih0aGlzLl9vU29ydEV4cHJlc3Npb24pZz10aGlzLl9vU29ydEV4cHJlc3Npb24uZ2V0VVJJT3JkZXJCeU9wdGlvblZhbHVlKCk7cz0oZz9nOm51bGwpO2JyZWFrfWNhc2UiJHRvcCI6e2lmKHRoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uIT09bnVsbCl7cz10aGlzLl9pVG9wUmVxdWVzdE9wdGlvbn1icmVha31jYXNlIiRza2lwIjp7cz10aGlzLl9pU2tpcFJlcXVlc3RPcHRpb247YnJlYWt9Y2FzZSIkaW5saW5lY291bnQiOntzPSh0aGlzLl9iSW5jbHVkZUNvdW50PT10cnVlPyJhbGxwYWdlcyI6bnVsbCk7YnJlYWt9ZGVmYXVsdDpicmVha31yZXR1cm4gc30sZ2V0VVJJVG9EaW1lbnNpb25NZW1iZXJFbnRpdHlTZXQ6ZnVuY3Rpb24ocyl7dmFyIHI9bnVsbDtpZighdGhpcy5fYlVzZU1hc3RlckRhdGEmJnRoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdCl7cj10aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3QuZ2V0VVJJVG9QYXJhbWV0ZXJpemF0aW9uRW50cnkocykrIi8iK3RoaXMuX29EaW1lbnNpb24uZ2V0Q29udGFpbmluZ1F1ZXJ5UmVzdWx0KCkuZ2V0UGFyYW1ldGVyaXphdGlvbigpLmdldE5hdmlnYXRpb25Qcm9wZXJ0eVRvUXVlcnlSZXN1bHQoKX1lbHNle3I9KHM/czoiIikrIi8iK3RoaXMuX29FbnRpdHlTZXQuZ2V0UU5hbWUoKX1yZXR1cm4gcn0sZ2V0VVJJVG9EaW1lbnNpb25NZW1iZXJFbnRyaWVzOmZ1bmN0aW9uKHMpe3ZhciByPXRoaXMuZ2V0VVJJVG9EaW1lbnNpb25NZW1iZXJFbnRpdHlTZXQocyk7dGhpcy5nZXRGaWx0ZXJFeHByZXNzaW9uKCkuaXNWYWxpZCgpO3ZhciBTPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHNlbGVjdCIpO3ZhciBmPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJGZpbHRlciIpO3ZhciBhPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJG9yZGVyYnkiKTt2YXIgdD10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiR0b3AiKTt2YXIgYj10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRza2lwIik7dmFyIGk9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkaW5saW5lY291bnQiKTt2YXIgdT1yO3ZhciBRPWZhbHNlO2lmKFMpe3UrPSI/JHNlbGVjdD0iK1M7UT10cnVlfWlmKHRoaXMuX29GaWx0ZXJFeHByZXNzaW9uJiZmKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNlIHUrPSImIjt1Kz0iJGZpbHRlcj0iK2Z9aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uJiZhKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNlIHUrPSImIjt1Kz0iJG9yZGVyYnk9IithfWlmKHRoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uJiZ0KXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJHRvcD0iK3R9aWYodGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uJiZiKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJHNraXA9IitifWlmKHRoaXMuX2JJbmNsdWRlQ291bnQmJmkpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2V7dSs9IiYifXUrPSIkaW5saW5lY291bnQ9IitpfXJldHVybiB1fSxfb0RpbWVuc2lvbjpudWxsLF9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3Q6bnVsbCxfb0VudGl0eVNldDpudWxsLF9iVXNlTWFzdGVyRGF0YTpmYWxzZSxfb0ZpbHRlckV4cHJlc3Npb246bnVsbCxfb1NvcnRFeHByZXNzaW9uOm51bGwsX29WYWx1ZVNldFJlc3VsdDpudWxsLF9iSW5jbHVkZUNvdW50Om51bGwsX2lTa2lwUmVxdWVzdE9wdGlvbjowLF9pVG9wUmVxdWVzdE9wdGlvbjpudWxsfTtyZXR1cm4gb30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5Db3VudE1vZGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuQ291bnRNb2RlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL0NvdW50TW9kZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz17UmVxdWVzdDoiUmVxdWVzdCIsSW5saW5lOiJJbmxpbmUiLEJvdGg6IkJvdGgiLE5vbmU6Ik5vbmUifTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS50aGlyZHBhcnR5LmNhamEtaHRtbC1zYW5pdGl6ZXInKSl7Ci8qIENvcHlyaWdodCBHb29nbGUgSW5jLgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2VuY2UgVmVyc2lvbiAyLjAKICogQXV0b2dlbmVyYXRlZCBhdCBUdWUgTWF5IDIyIDEwOjE4OjIxIFBEVCAyMDEyCiAqIFxAb3ZlcnJpZGVzIHdpbmRvdwogKiBcQHByb3ZpZGVzIGNzc1NjaGVtYSwgQ1NTX1BST1BfQklUX1FVQU5USVRZLCBDU1NfUFJPUF9CSVRfSEFTSF9WQUxVRSwgQ1NTX1BST1BfQklUX05FR0FUSVZFX1FVQU5USVRZLCBDU1NfUFJPUF9CSVRfUVNUUklOR19DT05URU5ULCBDU1NfUFJPUF9CSVRfUVNUUklOR19VUkwsIENTU19QUk9QX0JJVF9ISVNUT1JZX0lOU0VOU0lUSVZFLCBDU1NfUFJPUF9CSVRfWl9JTkRFWCwgQ1NTX1BST1BfQklUX0FMTE9XRURfSU5fTElOSyAqLwp2YXIgQ1NTX1BST1BfQklUX1FVQU5USVRZPTE7dmFyIENTU19QUk9QX0JJVF9IQVNIX1ZBTFVFPTI7dmFyIENTU19QUk9QX0JJVF9ORUdBVElWRV9RVUFOVElUWT00O3ZhciBDU1NfUFJPUF9CSVRfUVNUUklOR19DT05URU5UPTg7dmFyIENTU19QUk9QX0JJVF9RU1RSSU5HX1VSTD0xNjt2YXIgQ1NTX1BST1BfQklUX0hJU1RPUllfSU5TRU5TSVRJVkU9MzI7dmFyIENTU19QUk9QX0JJVF9aX0lOREVYPTY0O3ZhciBDU1NfUFJPUF9CSVRfQUxMT1dFRF9JTl9MSU5LPTEyODt2YXIgY3NzU2NoZW1hPShmdW5jdGlvbigpe3ZhciBzPVsncmdiKD86XFwoXFxzKig/OlxcZCt8MHxcXGQrKD86XFwuXFxkKyk/JSlcXHMqLFxccyooPzpcXGQrfDB8XFxkKyg/OlxcLlxcZCspPyUpXFxzKixcXHMqKD86XFxkK3wwfFxcZCsoPzpcXC5cXGQrKT8lKXxhXFwoXFxzKig/OlxcZCt8MHxcXGQrKD86XFwuXFxkKyk/JSlcXHMqLFxccyooPzpcXGQrfDB8XFxkKyg/OlxcLlxcZCspPyUpXFxzKixcXHMqKD86XFxkK3wwfFxcZCsoPzpcXC5cXGQrKT8lKVxccyosXFxzKig/OlxcZCt8MCg/OlxcLlxcZCspP3xcXC5cXGQrfDEoPzpcXC4wKyk/fDB8XFxkKyg/OlxcLlxcZCspPyUpKSAqXFwpJ10sYz1bL14gKiQvaSxSZWdFeHAoJ14gKig/OlxccyonK3NbMF0rJ3woPzpcXHMqJytzWzBdKycpPykrICokJywnaScpLFJlZ0V4cCgnXiAqXFxzKicrc1swXSsnICokJywnaScpLFJlZ0V4cCgnXiAqXFxzKicrc1swXSsnXFxzKicrc1swXSsnICokJywnaScpXSxMPVtbJ2FsaWNlYmx1ZScsJ2FudGlxdWV3aGl0ZScsJ2FxdWEnLCdhcXVhbWFyaW5lJywnYXp1cmUnLCdiZWlnZScsJ2Jpc3F1ZScsJ2JsYWNrJywnYmxhbmNoZWRhbG1vbmQnLCdibHVlJywnYmx1ZXZpb2xldCcsJ2Jyb3duJywnYnVybHl3b29kJywnY2FkZXRibHVlJywnY2hhcnRyZXVzZScsJ2Nob2NvbGF0ZScsJ2NvcmFsJywnY29ybmZsb3dlcmJsdWUnLCdjb3Juc2lsaycsJ2NyaW1zb24nLCdjeWFuJywnZGFya2JsdWUnLCdkYXJrY3lhbicsJ2Rhcmtnb2xkZW5yb2QnLCdkYXJrZ3JheScsJ2RhcmtncmVlbicsJ2RhcmtraGFraScsJ2RhcmttYWdlbnRhJywnZGFya29saXZlZ3JlZW4nLCdkYXJrb3JhbmdlJywnZGFya29yY2hpZCcsJ2RhcmtyZWQnLCdkYXJrc2FsbW9uJywnZGFya3NlYWdyZWVuJywnZGFya3NsYXRlYmx1ZScsJ2RhcmtzbGF0ZWdyYXknLCdkYXJrdHVycXVvaXNlJywnZGFya3Zpb2xldCcsJ2RlZXBwaW5rJywnZGVlcHNreWJsdWUnLCdkaW1ncmF5JywnZG9kZ2VyYmx1ZScsJ2ZpcmVicmljaycsJ2Zsb3JhbHdoaXRlJywnZm9yZXN0Z3JlZW4nLCdmdWNoc2lhJywnZ2FpbnNib3JvJywnZ2hvc3R3aGl0ZScsJ2dvbGQnLCdnb2xkZW5yb2QnLCdncmF5JywnZ3JlZW4nLCdncmVlbnllbGxvdycsJ2hvbmV5ZGV3JywnaG90cGluaycsJ2luZGlhbnJlZCcsJ2luZGlnbycsJ2l2b3J5Jywna2hha2knLCdsYXZlbmRlcicsJ2xhdmVuZGVyYmx1c2gnLCdsYXduZ3JlZW4nLCdsZW1vbmNoaWZmb24nLCdsaWdodGJsdWUnLCdsaWdodGNvcmFsJywnbGlnaHRjeWFuJywnbGlnaHRnb2xkZW5yb2R5ZWxsb3cnLCdsaWdodGdyZWVuJywnbGlnaHRncmV5JywnbGlnaHRwaW5rJywnbGlnaHRzYWxtb24nLCdsaWdodHNlYWdyZWVuJywnbGlnaHRza3libHVlJywnbGlnaHRzbGF0ZWdyYXknLCdsaWdodHN0ZWVsYmx1ZScsJ2xpZ2h0eWVsbG93JywnbGltZScsJ2xpbWVncmVlbicsJ2xpbmVuJywnbWFnZW50YScsJ21hcm9vbicsJ21lZGl1bWFxdWFtYXJpbmUnLCdtZWRpdW1ibHVlJywnbWVkaXVtb3JjaGlkJywnbWVkaXVtcHVycGxlJywnbWVkaXVtc2VhZ3JlZW4nLCdtZWRpdW1zbGF0ZWJsdWUnLCdtZWRpdW1zcHJpbmdncmVlbicsJ21lZGl1bXR1cnF1b2lzZScsJ21lZGl1bXZpb2xldHJlZCcsJ21pZG5pZ2h0Ymx1ZScsJ21pbnRjcmVhbScsJ21pc3R5cm9zZScsJ21vY2Nhc2luJywnbmF2YWpvd2hpdGUnLCduYXZ5Jywnb2xkbGFjZScsJ29saXZlJywnb2xpdmVkcmFiJywnb3JhbmdlJywnb3JhbmdlcmVkJywnb3JjaGlkJywncGFsZWdvbGRlbnJvZCcsJ3BhbGVncmVlbicsJ3BhbGV0dXJxdW9pc2UnLCdwYWxldmlvbGV0cmVkJywncGFwYXlhd2hpcCcsJ3BlYWNocHVmZicsJ3BlcnUnLCdwaW5rJywncGx1bScsJ3Bvd2RlcmJsdWUnLCdwdXJwbGUnLCdyZWQnLCdyb3N5YnJvd24nLCdyb3lhbGJsdWUnLCdzYWRkbGVicm93bicsJ3NhbG1vbicsJ3NhbmR5YnJvd24nLCdzZWFncmVlbicsJ3NlYXNoZWxsJywnc2llbm5hJywnc2lsdmVyJywnc2t5Ymx1ZScsJ3NsYXRlYmx1ZScsJ3NsYXRlZ3JheScsJ3Nub3cnLCdzcHJpbmdncmVlbicsJ3N0ZWVsYmx1ZScsJ3RhbicsJ3RlYWwnLCd0aGlzdGxlJywndG9tYXRvJywndHVycXVvaXNlJywndmlvbGV0Jywnd2hlYXQnLCd3aGl0ZScsJ3doaXRlc21va2UnLCd5ZWxsb3cnLCd5ZWxsb3dncmVlbiddLFsnYWxsLXNjcm9sbCcsJ2NvbC1yZXNpemUnLCdjcm9zc2hhaXInLCdkZWZhdWx0JywnZS1yZXNpemUnLCdoYW5kJywnaGVscCcsJ21vdmUnLCduLXJlc2l6ZScsJ25lLXJlc2l6ZScsJ25vLWRyb3AnLCdub3QtYWxsb3dlZCcsJ253LXJlc2l6ZScsJ3BvaW50ZXInLCdwcm9ncmVzcycsJ3Jvdy1yZXNpemUnLCdzLXJlc2l6ZScsJ3NlLXJlc2l6ZScsJ3N3LXJlc2l6ZScsJ3RleHQnLCd2ZXJ0aWNhbC10ZXh0Jywndy1yZXNpemUnLCd3YWl0J10sWyctbW96LWlubGluZS1ib3gnLCctbW96LWlubGluZS1zdGFjaycsJ2Jsb2NrJywnaW5saW5lJywnaW5saW5lLWJsb2NrJywnaW5saW5lLXRhYmxlJywnbGlzdC1pdGVtJywncnVuLWluJywndGFibGUnLCd0YWJsZS1jYXB0aW9uJywndGFibGUtY2VsbCcsJ3RhYmxlLWNvbHVtbicsJ3RhYmxlLWNvbHVtbi1ncm91cCcsJ3RhYmxlLWZvb3Rlci1ncm91cCcsJ3RhYmxlLWhlYWRlci1ncm91cCcsJ3RhYmxlLXJvdycsJ3RhYmxlLXJvdy1ncm91cCddLFsnYXJtZW5pYW4nLCdjaXJjbGUnLCdkZWNpbWFsJywnZGVjaW1hbC1sZWFkaW5nLXplcm8nLCdkaXNjJywnZ2VvcmdpYW4nLCdsb3dlci1hbHBoYScsJ2xvd2VyLWdyZWVrJywnbG93ZXItbGF0aW4nLCdsb3dlci1yb21hbicsJ3NxdWFyZScsJ3VwcGVyLWFscGhhJywndXBwZXItbGF0aW4nLCd1cHBlci1yb21hbiddLFsnMTAwJywnMjAwJywnMzAwJywnNDAwJywnNTAwJywnNjAwJywnNzAwJywnODAwJywnOTAwJywnYm9sZCcsJ2JvbGRlcicsJ2xpZ2h0ZXInXSxbJ2NvbmRlbnNlZCcsJ2V4cGFuZGVkJywnZXh0cmEtY29uZGVuc2VkJywnZXh0cmEtZXhwYW5kZWQnLCduYXJyb3dlcicsJ3NlbWktY29uZGVuc2VkJywnc2VtaS1leHBhbmRlZCcsJ3VsdHJhLWNvbmRlbnNlZCcsJ3VsdHJhLWV4cGFuZGVkJywnd2lkZXInXSxbJ2JlaGluZCcsJ2NlbnRlci1sZWZ0JywnY2VudGVyLXJpZ2h0JywnZmFyLWxlZnQnLCdmYXItcmlnaHQnLCdsZWZ0LXNpZGUnLCdsZWZ0d2FyZHMnLCdyaWdodC1zaWRlJywncmlnaHR3YXJkcyddLFsnbGFyZ2UnLCdsYXJnZXInLCdzbWFsbCcsJ3NtYWxsZXInLCd4LWxhcmdlJywneC1zbWFsbCcsJ3h4LWxhcmdlJywneHgtc21hbGwnXSxbJy1tb3otcHJlLXdyYXAnLCctby1wcmUtd3JhcCcsJy1wcmUtd3JhcCcsJ25vd3JhcCcsJ3ByZScsJ3ByZS1saW5lJywncHJlLXdyYXAnXSxbJ2Rhc2hlZCcsJ2RvdHRlZCcsJ2RvdWJsZScsJ2dyb292ZScsJ291dHNldCcsJ3JpZGdlJywnc29saWQnXSxbJ2Jhc2VsaW5lJywnbWlkZGxlJywnc3ViJywnc3VwZXInLCd0ZXh0LWJvdHRvbScsJ3RleHQtdG9wJ10sWydjYXB0aW9uJywnaWNvbicsJ21lbnUnLCdtZXNzYWdlLWJveCcsJ3NtYWxsLWNhcHRpb24nLCdzdGF0dXMtYmFyJ10sWydmYXN0JywnZmFzdGVyJywnc2xvdycsJ3Nsb3dlcicsJ3gtZmFzdCcsJ3gtc2xvdyddLFsnYWJvdmUnLCdiZWxvdycsJ2hpZ2hlcicsJ2xldmVsJywnbG93ZXInXSxbJ2JvcmRlci1ib3gnLCdjb250YWluJywnY29udGVudC1ib3gnLCdjb3ZlcicsJ3BhZGRpbmctYm94J10sWydjdXJzaXZlJywnZmFudGFzeScsJ21vbm9zcGFjZScsJ3NhbnMtc2VyaWYnLCdzZXJpZiddLFsnbG91ZCcsJ3NpbGVudCcsJ3NvZnQnLCd4LWxvdWQnLCd4LXNvZnQnXSxbJ25vLXJlcGVhdCcsJ3JlcGVhdC14JywncmVwZWF0LXknLCdyb3VuZCcsJ3NwYWNlJ10sWydibGluaycsJ2xpbmUtdGhyb3VnaCcsJ292ZXJsaW5lJywndW5kZXJsaW5lJ10sWydoaWdoJywnbG93JywneC1oaWdoJywneC1sb3cnXSxbJ2Fic29sdXRlJywncmVsYXRpdmUnLCdzdGF0aWMnXSxbJ2NhcGl0YWxpemUnLCdsb3dlcmNhc2UnLCd1cHBlcmNhc2UnXSxbJ2NoaWxkJywnZmVtYWxlJywnbWFsZSddLFsnYmlkaS1vdmVycmlkZScsJ2VtYmVkJ10sWydib3R0b20nLCd0b3AnXSxbJ2NsaXAnLCdlbGxpcHNpcyddLFsnY29udGludW91cycsJ2RpZ2l0cyddLFsnaGlkZScsJ3Nob3cnXSxbJ2luc2lkZScsJ291dHNpZGUnXSxbJ2l0YWxpYycsJ29ibGlxdWUnXSxbJ2xlZnQnLCdyaWdodCddLFsnbHRyJywncnRsJ10sWyduby1jb250ZW50Jywnbm8tZGlzcGxheSddLFsnc3VwcHJlc3MnLCd1bnJlc3RyaWN0ZWQnXSxbJ3RoaWNrJywndGhpbiddLFsnLCddLFsnLyddLFsnYWx3YXlzJ10sWydhdXRvJ10sWydhdm9pZCddLFsnYm90aCddLFsnYnJlYWstd29yZCddLFsnY2VudGVyJ10sWydjb2RlJ10sWydjb2xsYXBzZSddLFsnZml4ZWQnXSxbJ2hpZGRlbiddLFsnaW5oZXJpdCddLFsnaW5zZXQnXSxbJ2ludmVydCddLFsnanVzdGlmeSddLFsnbG9jYWwnXSxbJ21lZGl1bSddLFsnbWl4J10sWydub25lJ10sWydub3JtYWwnXSxbJ29uY2UnXSxbJ3JlcGVhdCddLFsnc2Nyb2xsJ10sWydzZXBhcmF0ZSddLFsnc21hbGwtY2FwcyddLFsnc3BlbGwtb3V0J10sWyd0cmFuc3BhcmVudCddLFsndmlzaWJsZSddXTtyZXR1cm57Jy1tb3otYm9yZGVyLXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNl1dfSwnLW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbWxlZnQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbXJpZ2h0Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy1tb3otYm9yZGVyLXJhZGl1cy10b3BsZWZ0Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy1tb3otYm9yZGVyLXJhZGl1cy10b3ByaWdodCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctbW96LWJveC1zaGFkb3cnOnsnY3NzRXh0cmEnOmNbMV0sJ2Nzc0FsdGVybmF0ZXMnOlsnYm94U2hhZG93J10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFszNV0sTFs0OF0sTFs1NF1dfSwnLW1vei1vcGFjaXR5Jzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJy1tb3otb3V0bGluZSc6eydjc3NFeHRyYSc6Y1szXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzldLExbMzRdLExbNDZdLExbNDddLExbNDhdLExbNDldLExbNTJdLExbNTRdXX0sJy1tb3otb3V0bGluZS1jb2xvcic6eydjc3NFeHRyYSc6Y1syXSwnY3NzUHJvcEJpdHMnOjIsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XSxMWzQ5XV19LCctbW96LW91dGxpbmUtc3R5bGUnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs5XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzU0XV19LCctbW96LW91dGxpbmUtd2lkdGgnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNF0sTFs0N10sTFs1Ml1dfSwnLW8tdGV4dC1vdmVyZmxvdyc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzI1XV19LCctd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLXdlYmtpdC1ib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJvcmRlci1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzZdXX0sJy13ZWJraXQtYm9yZGVyLXJhZGl1cy1ib3R0b20tbGVmdCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJvcmRlci1yYWRpdXMtYm90dG9tLXJpZ2h0Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy13ZWJraXQtYm9yZGVyLXJhZGl1cy10b3AtbGVmdCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJvcmRlci1yYWRpdXMtdG9wLXJpZ2h0Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy13ZWJraXQtYm9yZGVyLXRvcC1sZWZ0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJvcmRlci10b3AtcmlnaHQtcmFkaXVzJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy13ZWJraXQtYm94LXNoYWRvdyc6eydjc3NFeHRyYSc6Y1sxXSwnY3NzQWx0ZXJuYXRlcyc6Wydib3hTaGFkb3cnXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzM1XSxMWzQ4XSxMWzU0XV19LCdhemltdXRoJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNl0sTFszMF0sTFs0Ml0sTFs0N11dfSwnYmFja2dyb3VuZCc6eydjc3NFeHRyYSc6UmVnRXhwKCdeICooPzpcXHMqJytzWzBdKycpezAsMn0gKiQnLCdpJyksJ2Nzc1Byb3BCaXRzJzoyMywnY3NzTGl0R3JvdXAnOltMWzBdLExbMTRdLExbMTddLExbMjRdLExbMzBdLExbMzVdLExbMzZdLExbMzhdLExbNDJdLExbNDVdLExbNDddLExbNTFdLExbNTRdLExbNTddLExbNThdLExbNjJdXX0sJ2JhY2tncm91bmQtYXR0YWNobWVudCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszNV0sTFs0NV0sTFs1MV0sTFs1OF1dfSwnYmFja2dyb3VuZC1jb2xvcic6eydjc3NFeHRyYSc6Y1syXSwnY3NzUHJvcEJpdHMnOjEzMCwnY3NzTGl0R3JvdXAnOltMWzBdLExbNDddLExbNjJdXX0sJ2JhY2tncm91bmQtaW1hZ2UnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzoxNiwnY3NzTGl0R3JvdXAnOltMWzM1XSxMWzU0XV19LCdiYWNrZ3JvdW5kLXBvc2l0aW9uJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzI0XSxMWzMwXSxMWzM1XSxMWzQyXV19LCdiYWNrZ3JvdW5kLXJlcGVhdCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFsxN10sTFszNV0sTFs1N11dfSwnYm9yZGVyJzp7J2Nzc0V4dHJhJzpjWzNdLCdjc3NQcm9wQml0cyc6NywnY3NzTGl0R3JvdXAnOltMWzBdLExbOV0sTFszNF0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1Ml0sTFs1NF0sTFs2Ml1dfSwnYm9yZGVyLWJvdHRvbSc6eydjc3NFeHRyYSc6Y1szXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzldLExbMzRdLExbNDZdLExbNDddLExbNDhdLExbNTJdLExbNTRdLExbNjJdXX0sJ2JvcmRlci1ib3R0b20tY29sb3InOnsnY3NzRXh0cmEnOmNbMl0sJ2Nzc1Byb3BCaXRzJzoyLCdjc3NMaXRHcm91cCc6W0xbMF0sTFs0N10sTFs2Ml1dfSwnYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCdib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCdib3JkZXItYm90dG9tLXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbOV0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1NF1dfSwnYm9yZGVyLWJvdHRvbS13aWR0aCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM0XSxMWzQ3XSxMWzUyXV19LCdib3JkZXItY29sbGFwc2UnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs0NF0sTFs0N10sTFs1OV1dfSwnYm9yZGVyLWNvbG9yJzp7J2Nzc0V4dHJhJzpSZWdFeHAoJ14gKig/OlxccyonK3NbMF0rJyl7MSw0fSAqJCcsJ2knKSwnY3NzUHJvcEJpdHMnOjIsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XSxMWzYyXV19LCdib3JkZXItbGVmdCc6eydjc3NFeHRyYSc6Y1szXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzldLExbMzRdLExbNDZdLExbNDddLExbNDhdLExbNTJdLExbNTRdLExbNjJdXX0sJ2JvcmRlci1sZWZ0LWNvbG9yJzp7J2Nzc0V4dHJhJzpjWzJdLCdjc3NQcm9wQml0cyc6MiwnY3NzTGl0R3JvdXAnOltMWzBdLExbNDddLExbNjJdXX0sJ2JvcmRlci1sZWZ0LXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbOV0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1NF1dfSwnYm9yZGVyLWxlZnQtd2lkdGgnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNF0sTFs0N10sTFs1Ml1dfSwnYm9yZGVyLXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNl1dfSwnYm9yZGVyLXJpZ2h0Jzp7J2Nzc0V4dHJhJzpjWzNdLCdjc3NQcm9wQml0cyc6NywnY3NzTGl0R3JvdXAnOltMWzBdLExbOV0sTFszNF0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1Ml0sTFs1NF0sTFs2Ml1dfSwnYm9yZGVyLXJpZ2h0LWNvbG9yJzp7J2Nzc0V4dHJhJzpjWzJdLCdjc3NQcm9wQml0cyc6MiwnY3NzTGl0R3JvdXAnOltMWzBdLExbNDddLExbNjJdXX0sJ2JvcmRlci1yaWdodC1zdHlsZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzldLExbNDZdLExbNDddLExbNDhdLExbNTRdXX0sJ2JvcmRlci1yaWdodC13aWR0aCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM0XSxMWzQ3XSxMWzUyXV19LCdib3JkZXItc3BhY2luZyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwnYm9yZGVyLXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbOV0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1NF1dfSwnYm9yZGVyLXRvcCc6eydjc3NFeHRyYSc6Y1szXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzldLExbMzRdLExbNDZdLExbNDddLExbNDhdLExbNTJdLExbNTRdLExbNjJdXX0sJ2JvcmRlci10b3AtY29sb3InOnsnY3NzRXh0cmEnOmNbMl0sJ2Nzc1Byb3BCaXRzJzoyLCdjc3NMaXRHcm91cCc6W0xbMF0sTFs0N10sTFs2Ml1dfSwnYm9yZGVyLXRvcC1sZWZ0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCdib3JkZXItdG9wLXJpZ2h0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCdib3JkZXItdG9wLXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbOV0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1NF1dfSwnYm9yZGVyLXRvcC13aWR0aCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM0XSxMWzQ3XSxMWzUyXV19LCdib3JkZXItd2lkdGgnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNF0sTFs0N10sTFs1Ml1dfSwnYm90dG9tJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ2JveC1zaGFkb3cnOnsnY3NzRXh0cmEnOmNbMV0sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFszNV0sTFs0OF0sTFs1NF1dfSwnY2FwdGlvbi1zaWRlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjRdLExbNDddXX0sJ2NsZWFyJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzBdLExbNDBdLExbNDddLExbNTRdXX0sJ2NsaXAnOnsnY3NzRXh0cmEnOi9eICpccypyZWN0XChccyooPzowfFsrXC1dP1xkKyg/OlwuXGQrKT8oPzpbY2VtXW18ZXh8aW58cFtjdHhdKXxhdXRvKVxzKixccyooPzowfFsrXC1dP1xkKyg/OlwuXGQrKT8oPzpbY2VtXW18ZXh8aW58cFtjdHhdKXxhdXRvKVxzKixccyooPzowfFsrXC1dP1xkKyg/OlwuXGQrKT8oPzpbY2VtXW18ZXh8aW58cFtjdHhdKXxhdXRvKVxzKixccyooPzowfFsrXC1dP1xkKyg/OlwuXGQrKT8oPzpbY2VtXW18ZXh8aW58cFtjdHhdKXxhdXRvKSAqXCkgKiQvaSwnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnY29sb3InOnsnY3NzRXh0cmEnOmNbMl0sJ2Nzc1Byb3BCaXRzJzoxMzAsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XV19LCdjb250ZW50Jzp7J2Nzc1Byb3BCaXRzJzowfSwnY291bnRlci1pbmNyZW1lbnQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTRdXX0sJ2NvdW50ZXItcmVzZXQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTRdXX0sJ2N1ZSc6eydjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NF1dfSwnY3VlLWFmdGVyJzp7J2Nzc1Byb3BCaXRzJzoxNiwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU0XV19LCdjdWUtYmVmb3JlJzp7J2Nzc1Byb3BCaXRzJzoxNiwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU0XV19LCdjdXJzb3InOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzoxNDQsJ2Nzc0xpdEdyb3VwJzpbTFsxXSxMWzM1XSxMWzM4XSxMWzQ3XV19LCdkaXJlY3Rpb24nOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszMV0sTFs0N11dfSwnZGlzcGxheSc6eydjc3NQcm9wQml0cyc6MzIsJ2Nzc0xpdEdyb3VwJzpbTFsyXSxMWzQ3XSxMWzU0XV19LCdlbGV2YXRpb24nOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFsxM10sTFs0N11dfSwnZW1wdHktY2VsbHMnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFsyN10sTFs0N11dfSwnZmlsdGVyJzp7J2Nzc0V4dHJhJzovXiAqKD86XHMqYWxwaGFcKFxzKm9wYWNpdHlccyo9XHMqKD86MHxcZCsoPzpcLlxkKyk/JXxbK1wtXT9cZCsoPzpcLlxkKyk/KSAqXCkpKyAqJC9pLCdjc3NQcm9wQml0cyc6MzJ9LCdmbG9hdCc6eydjc3NBbHRlcm5hdGVzJzpbJ2Nzc0Zsb2F0Jywnc3R5bGVGbG9hdCddLCdjc3NQcm9wQml0cyc6MzIsJ2Nzc0xpdEdyb3VwJzpbTFszMF0sTFs0N10sTFs1NF1dfSwnZm9udCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjksJ2Nzc0xpdEdyb3VwJzpbTFs0XSxMWzddLExbMTFdLExbMTVdLExbMjldLExbMzVdLExbMzZdLExbNDddLExbNTJdLExbNTVdLExbNjBdXX0sJ2ZvbnQtZmFtaWx5Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6OCwnY3NzTGl0R3JvdXAnOltMWzE1XSxMWzM1XSxMWzQ3XV19LCdmb250LXNpemUnOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFs3XSxMWzQ3XSxMWzUyXV19LCdmb250LXN0cmV0Y2gnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs1XSxMWzU1XV19LCdmb250LXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjldLExbNDddLExbNTVdXX0sJ2ZvbnQtdmFyaWFudCc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU1XSxMWzYwXV19LCdmb250LXdlaWdodCc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzRdLExbNDddLExbNTVdXX0sJ2hlaWdodCc6eydjc3NQcm9wQml0cyc6MzcsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnbGVmdCc6eydjc3NQcm9wQml0cyc6MzcsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnbGV0dGVyLXNwYWNpbmcnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NV1dfSwnbGluZS1oZWlnaHQnOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NV1dfSwnbGlzdC1zdHlsZSc6eydjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFszXSxMWzI4XSxMWzQ3XSxMWzU0XV19LCdsaXN0LXN0eWxlLWltYWdlJzp7J2Nzc1Byb3BCaXRzJzoxNiwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU0XV19LCdsaXN0LXN0eWxlLXBvc2l0aW9uJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjhdLExbNDddXX0sJ2xpc3Qtc3R5bGUtdHlwZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzNdLExbNDddLExbNTRdXX0sJ21hcmdpbic6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdtYXJnaW4tYm90dG9tJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ21hcmdpbi1sZWZ0Jzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ21hcmdpbi1yaWdodCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdtYXJnaW4tdG9wJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ21heC1oZWlnaHQnOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N10sTFs1NF1dfSwnbWF4LXdpZHRoJzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddLExbNTRdXX0sJ21pbi1oZWlnaHQnOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnbWluLXdpZHRoJzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ29wYWNpdHknOnsnY3NzUHJvcEJpdHMnOjMzLCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ291dGxpbmUnOnsnY3NzRXh0cmEnOmNbM10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFs5XSxMWzM0XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzQ5XSxMWzUyXSxMWzU0XV19LCdvdXRsaW5lLWNvbG9yJzp7J2Nzc0V4dHJhJzpjWzJdLCdjc3NQcm9wQml0cyc6MiwnY3NzTGl0R3JvdXAnOltMWzBdLExbNDddLExbNDldXX0sJ291dGxpbmUtc3R5bGUnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs5XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzU0XV19LCdvdXRsaW5lLXdpZHRoJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzRdLExbNDddLExbNTJdXX0sJ292ZXJmbG93Jzp7J2Nzc1Byb3BCaXRzJzozMiwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ2XSxMWzQ3XSxMWzU4XSxMWzYzXV19LCdvdmVyZmxvdy14Jzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzJdLExbMzhdLExbNDZdLExbNThdLExbNjNdXX0sJ292ZXJmbG93LXknOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszMl0sTFszOF0sTFs0Nl0sTFs1OF0sTFs2M11dfSwncGFkZGluZyc6eydjc3NQcm9wQml0cyc6MSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdwYWRkaW5nLWJvdHRvbSc6eydjc3NQcm9wQml0cyc6MzMsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGFkZGluZy1sZWZ0Jzp7J2Nzc1Byb3BCaXRzJzozMywnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdwYWRkaW5nLXJpZ2h0Jzp7J2Nzc1Byb3BCaXRzJzozMywnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdwYWRkaW5nLXRvcCc6eydjc3NQcm9wQml0cyc6MzMsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGFnZS1icmVhay1hZnRlcic6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzMwXSxMWzM3XSxMWzM4XSxMWzM5XSxMWzQ3XV19LCdwYWdlLWJyZWFrLWJlZm9yZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzMwXSxMWzM3XSxMWzM4XSxMWzM5XSxMWzQ3XV19LCdwYWdlLWJyZWFrLWluc2lkZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzM5XSxMWzQ3XV19LCdwYXVzZSc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdwYXVzZS1hZnRlcic6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdwYXVzZS1iZWZvcmUnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGl0Y2gnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFsxOV0sTFs0N10sTFs1Ml1dfSwncGl0Y2gtcmFuZ2UnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGxheS1kdXJpbmcnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzoxNiwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XSxMWzUzXSxMWzU0XSxMWzU3XV19LCdwb3NpdGlvbic6eydjc3NQcm9wQml0cyc6MzIsJ2Nzc0xpdEdyb3VwJzpbTFsyMF0sTFs0N11dfSwncXVvdGVzJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU0XV19LCdyaWNobmVzcyc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdyaWdodCc6eydjc3NQcm9wQml0cyc6MzcsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnc3BlYWsnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NF0sTFs1NV0sTFs2MV1dfSwnc3BlYWstaGVhZGVyJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzddLExbNDddLExbNTZdXX0sJ3NwZWFrLW51bWVyYWwnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFsyNl0sTFs0N11dfSwnc3BlYWstcHVuY3R1YXRpb24nOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs0M10sTFs0N10sTFs1NF1dfSwnc3BlZWNoLXJhdGUnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFsxMl0sTFs0N10sTFs1Ml1dfSwnc3RyZXNzJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ3RhYmxlLWxheW91dCc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ1XSxMWzQ3XV19LCd0ZXh0LWFsaWduJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzBdLExbNDJdLExbNDddLExbNTBdXX0sJ3RleHQtZGVjb3JhdGlvbic6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzE4XSxMWzQ3XSxMWzU0XV19LCd0ZXh0LWluZGVudCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCd0ZXh0LW92ZXJmbG93Jzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjVdXX0sJ3RleHQtc2hhZG93Jzp7J2Nzc0V4dHJhJzpjWzFdLCdjc3NQcm9wQml0cyc6NywnY3NzTGl0R3JvdXAnOltMWzBdLExbMzVdLExbNDhdLExbNTRdXX0sJ3RleHQtdHJhbnNmb3JtJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjFdLExbNDddLExbNTRdXX0sJ3RleHQtd3JhcCc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzMzXSxMWzU0XSxMWzU1XV19LCd0b3AnOnsnY3NzUHJvcEJpdHMnOjM3LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ3VuaWNvZGUtYmlkaSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzIzXSxMWzQ3XSxMWzU1XV19LCd2ZXJ0aWNhbC1hbGlnbic6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzEwXSxMWzI0XSxMWzQ3XV19LCd2aXNpYmlsaXR5Jzp7J2Nzc1Byb3BCaXRzJzozMiwnY3NzTGl0R3JvdXAnOltMWzQ0XSxMWzQ2XSxMWzQ3XSxMWzYzXV19LCd2b2ljZS1mYW1pbHknOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo4LCdjc3NMaXRHcm91cCc6W0xbMjJdLExbMzVdLExbNDddXX0sJ3ZvbHVtZSc6eydjc3NQcm9wQml0cyc6MSwnY3NzTGl0R3JvdXAnOltMWzE2XSxMWzQ3XSxMWzUyXV19LCd3aGl0ZS1zcGFjZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzhdLExbNDddLExbNTVdXX0sJ3dpZHRoJzp7J2Nzc1Byb3BCaXRzJzozMywnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCd3b3JkLXNwYWNpbmcnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NV1dfSwnd29yZC13cmFwJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbNDFdLExbNTVdXX0sJ3otaW5kZXgnOnsnY3NzUHJvcEJpdHMnOjY5LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ3pvb20nOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFs1NV1dfX19KSgpO2lmKHR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJyl7d2luZG93Wydjc3NTY2hlbWEnXT1jc3NTY2hlbWF9Ci8vIENvcHlyaWdodCAoQykgMjAxMSBHb29nbGUgSW5jLgovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKLy8gICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAovLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KdmFyIGxleENzczt2YXIgZGVjb2RlQ3NzOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGQocyl7dmFyIGk9cGFyc2VJbnQocy5zdWJzdHJpbmcoMSksMTYpO2lmKGk+MHhmZmZmKXtyZXR1cm4gaS09MHgxMDAwMCxTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCsoaT4+MTApLDB4ZGMwMCsoaSYweDNGRikpfWVsc2UgaWYoaT09aSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoaSl9ZWxzZSBpZihzWzFdPCcgJyl7cmV0dXJuJyd9ZWxzZXtyZXR1cm4gc1sxXX19ZnVuY3Rpb24gZShzLGkpe3JldHVybiciJytzLnJlcGxhY2UoL1tcdTAwMDAtXHUwMDFmXFxcIjw+XS9nLGkpKyciJ31mdW5jdGlvbiBhKGkpe3JldHVybiBjW2ldfHwoY1tpXT0nXFwnK2kuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikrJyAnKX1mdW5jdGlvbiBiKGkpe3JldHVybiBmW2ldfHwoZltpXT0oaTwnXHgxMCc/JyUwJzonJScpK2kuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpfXZhciBjPXsnXFwnOidcXFxcJ307dmFyIGY9eydcXCc6JyU1Yyd9O3ZhciBnPSdbXFx0XFxuXFxmIF0nO3ZhciBXPWcrJyonO3ZhciBOPSdbXFxuXFxmXSc7dmFyIGg9J1tcXHVkODAwLVxcdWRiZmZdW1xcdWRjMDAtXFx1ZGZmZl0nO3ZhciBrPSdbXFx1MDA4MC1cXHVkN2ZmXFx1ZTAwMC1cXHVmZmZkXXwnK2g7dmFyIFU9J1swLTlhLWZBLUZdezEsNn0nK2crJz8nO3ZhciBsPSdcXFxcJytVO3ZhciBFPScoPzonK1UrJ3xbXFx1MDAyMC1cXHUwMDdlXFx1MDA4MC1cXHVkN2ZmXFx1ZTAwMFxcdWZmZmRdfCcraCsnKSc7dmFyIG09J1xcXFwnK0U7dmFyIG89Jyg/OltcXHRcXHgyMVxceDIzLVxceDI2XFx4MjgtXFx4NWJcXHg1ZC1cXHg3ZV18JytrKyd8JyttKycpJzt2YXIgcD0nW15cJyJcXG5cXGZcXFxcXXxcXFxcW1xcc1xcU10nO3ZhciBxPSciKD86XCd8JytwKycpKiInKyd8XCcoPzpcInwnK3ArJykqXCcnO3ZhciByPSdbLStdPyg/OlswLTldKyg/OlsuXVswLTldKyk/fFsuXVswLTldKyknO3ZhciB0PScoPzpbYS16QS1aX118JytrKyd8JyttKycpJzt2YXIgdT0nKD86W2EtekEtWjAtOV8tXXwnK2srJ3wnK20rJyknO3ZhciB2PXUrJysnO3ZhciBJPSctPycrdCt1KycqJzt2YXIgQT0nQCcrSTt2YXIgSD0nIycrdjt2YXIgdz1yO3ZhciB4PScoPzpAPy0/Jyt0Kyd8IyknK3UrJyonO3ZhciBQPXIrJyUnO3ZhciBEPXIrSTt2YXIgeT1yKycoPzolfCcrSSsnKT8nO3ZhciB6PSd1cmxbKF0nK1crJyg/OicrcSsnfCcrbysnKiknK1crJ1spXSc7dmFyIEI9J1VbK11bMC05QS1GP117MSw2fSg/Oi1bMC05QS1GXXsxLDZ9KT8nO3ZhciBDPSc8XCEtLSc7dmFyIEY9Jy0tPic7dmFyIFM9ZysnKyc7dmFyIEc9Jy8oPzpbKl1bXipdKlsqXSsoPzpbXi9dW14qXSpbKl0rKSovfC9bXlxcblxcZl0qKSc7dmFyIEo9Jyg/IXVybFsoXSknK0krJ1soXSc7dmFyIEs9J349Jzt2YXIgTD0nW3xdPSc7dmFyIE09J1teXT0nO3ZhciBPPSdbJF09Jzt2YXIgUT0nWypdPSc7dmFyIFI9J1t+fF4kKl09Jzt2YXIgVD0nW14iXCdcXFxcL118Lyg/IVsvKl0pJzt2YXIgVj0nXFx1RkVGRic7dmFyIFg9bmV3IFJlZ0V4cChbVixCLHosSix4LHEseSxDLEYsUyxHLFIsVF0uam9pbigifCIpLCdnaScpO2RlY29kZUNzcz1mdW5jdGlvbihpKXtyZXR1cm4gaS5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFwoPzonK0UrJ3wnK04rJyknLCdnJyksZCl9O2xleENzcz1mdW5jdGlvbihzKXtzPScnK3M7dmFyIFk9cy5yZXBsYWNlKC9cclxuPy9nLCdcbicpLm1hdGNoKFgpfHxbXTt2YXIgaj0wO3ZhciBaPScgJztmb3IodmFyIGk9MCxuPVkubGVuZ3RoO2k8bjsrK2kpe3ZhciAkPWRlY29kZUNzcyhZW2ldKTt2YXIgXz0kLmxlbmd0aDt2YXIgY2M9JC5jaGFyQ29kZUF0KDApOyQ9KGNjPT0nIicuY2hhckNvZGVBdCgwKXx8Y2M9PSdcJycuY2hhckNvZGVBdCgwKSk/ZSgkLnN1YnN0cmluZygxLF8tMSksYSk6KGNjPT0nLycuY2hhckNvZGVBdCgwKSYmXz4xfHwkPT0nXFwnfHwkPT1GfHwkPT1DfHwkPT0nXHVmZWZmJ3x8Y2M8PScgJy5jaGFyQ29kZUF0KDApKT8nICc6L3VybFwoL2kudGVzdCgkKT8ndXJsKCcrZSgkLnJlcGxhY2UobmV3IFJlZ0V4cCgnXnVybFxcKCcrVysnWyJcJ10/fFsiXCddPycrVysnXFwpJCcsJ2dpJyksJycpLGIpKycpJzokO2lmKFohPSR8fCQhPScgJyl7WVtqKytdPVo9JH19WS5sZW5ndGg9ajtyZXR1cm4gWX19KSgpO2lmKHR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJyl7d2luZG93WydsZXhDc3MnXT1sZXhDc3M7d2luZG93WydkZWNvZGVDc3MnXT1kZWNvZGVDc3N9Ci8vIENvcHlyaWdodCAoQykgMjAxMSBHb29nbGUgSW5jLgovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKLy8gICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAovLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KdmFyIHNhbml0aXplQ3NzUHJvcGVydHk9KGZ1bmN0aW9uKCl7dmFyIE49J3VybCgiYWJvdXQ6YmxhbmsiKSc7dmFyIGE9L1tcblxmXHJcIlwnKCkqPD5dL2c7dmFyIGI9eydcbic6JyUwYScsJ1xmJzonJTBjJywnXHInOiclMGQnLCciJzonJTIyJywnXCcnOiclMjcnLCcoJzonJTI4JywnKSc6JyUyOScsJyonOiclMmEnLCc8JzonJTNjJywnPic6JyUzZSd9O2Z1bmN0aW9uIGMocyl7aWYoJ3N0cmluZyc9PT10eXBlb2Ygcyl7cmV0dXJuJ3VybCgiJytzLnJlcGxhY2UoYSxkKSsnIiknfWVsc2V7cmV0dXJuIE59fWZ1bmN0aW9uIGQoaCl7cmV0dXJuIGJbaF19dmFyIFU9bmV3IFJlZ0V4cCgnXicrJyg/OicrJyhbXjpcLz8jIF0rKScrJzopPycpO3ZhciBBPS9eKD86aHR0cHM/fG1haWx0bykkL2k7ZnVuY3Rpb24gZShoLHAsbil7aWYoIW4pe3JldHVybiBudWxsfXZhciBpPSgnJytoKS5tYXRjaChVKTtpZihpJiYoIWlbMV18fEEudGVzdChpWzFdKSkpe3JldHVybiBuKGgscCl9ZWxzZXtyZXR1cm4gbnVsbH19ZnVuY3Rpb24gdShoKXt2YXIgbT17fTtmb3IodmFyIGk9aC5sZW5ndGg7LS1pPj0wOyl7dmFyIGs9aFtpXTtmb3IodmFyIGo9ay5sZW5ndGg7LS1qPj0wOyl7bVtrW2pdXT1nfX1yZXR1cm4gbX1mdW5jdGlvbiBmKHQscyl7dmFyIHA9MSxoPXMrMSxuPXQubGVuZ3RoO3doaWxlKGg8biYmcCl7dmFyIGk9dFtoKytdO3ArPShpPT09JygnPzE6aT09PScpJz8tMTowKX1yZXR1cm4gaH12YXIgZz17fTtyZXR1cm4gZnVuY3Rpb24ocCxoLHQsbyl7dmFyIGo9aC5jc3NQcm9wQml0czt2YXIgcT1qJihDU1NfUFJPUF9CSVRfUVNUUklOR19DT05URU5UfENTU19QUk9QX0JJVF9RU1RSSU5HX1VSTCk7dmFyIGw9TmFOO3ZhciBpPTAsaz0wO2Zvcig7aTx0Lmxlbmd0aDsrK2kpe3ZhciBtPXRbaV0udG9Mb3dlckNhc2UoKTt2YXIgbj1tLmNoYXJDb2RlQXQoMCkscixzLHYsdyx4O3ZhciB5LHo7bT0oKG49PT0nICcuY2hhckNvZGVBdCgwKSk/Jyc6KG49PT0nIicuY2hhckNvZGVBdCgwKSk/KChxPT09Q1NTX1BST1BfQklUX1FTVFJJTkdfVVJMJiZvKT8oYyhlKGRlY29kZUNzcyh0W2ldLnN1YnN0cmluZygxLG0ubGVuZ3RoLTEpKSxwLG8pKSk6KHE9PT1DU1NfUFJPUF9CSVRfUVNUUklOR19DT05URU5UKT9tOicnKToobj09PScjJy5jaGFyQ29kZUF0KDApJiYvXiMoPzpbMC05YS1mXXszfSl7MSwyfSQvLnRlc3QobSkpPyhqJkNTU19QUk9QX0JJVF9IQVNIX1ZBTFVFP206JycpOignMCcuY2hhckNvZGVBdCgwKTw9biYmbjw9JzknLmNoYXJDb2RlQXQoMCkpPygoaiZDU1NfUFJPUF9CSVRfUVVBTlRJVFkpPygoaiZDU1NfUFJPUF9CSVRfWl9JTkRFWCk/KG0ubWF0Y2goL15cZHsxLDd9JC8pP206JycpOm0pOicnKToocj1tLmNoYXJDb2RlQXQoMSkscz1tLmNoYXJDb2RlQXQoMiksdj0nMCcuY2hhckNvZGVBdCgwKTw9ciYmcjw9JzknLmNoYXJDb2RlQXQoMCksdz0nMCcuY2hhckNvZGVBdCgwKTw9cyYmczw9JzknLmNoYXJDb2RlQXQoMCksKG49PT0nKycuY2hhckNvZGVBdCgwKSYmKHZ8fChyPT09Jy4nLmNoYXJDb2RlQXQoMCkmJncpKSkpPygoaiZDU1NfUFJPUF9CSVRfUVVBTlRJVFkpPygoaiZDU1NfUFJPUF9CSVRfWl9JTkRFWCk/KG0ubWF0Y2goL15cK1xkezEsN30kLyk/bTonJyk6KCh2PycnOicwJykrbS5zdWJzdHJpbmcoMSkpKTonJyk6KG49PT0nLScuY2hhckNvZGVBdCgwKSYmKHZ8fChyPT09Jy4nLmNoYXJDb2RlQXQoMCkmJncpKSk/KChqJkNTU19QUk9QX0JJVF9ORUdBVElWRV9RVUFOVElUWSk/KChqJkNTU19QUk9QX0JJVF9aX0lOREVYKT8obS5tYXRjaCgvXlwtXGR7MSw3fSQvKT9tOicnKTooKHY/Jy0nOictMCcpK20uc3Vic3RyaW5nKDEpKSk6KChqJkNTU19QUk9QX0JJVF9RVUFOVElUWSk/JzAnOicnKSk6KG49PT0nLicuY2hhckNvZGVBdCgwKSYmdik/KChqJkNTU19QUk9QX0JJVF9RVUFOVElUWSk/JzAnK206JycpOigndXJsKCc9PT1tLnN1YnN0cmluZygwLDQpKT8oKG8mJihxJkNTU19QUk9QX0JJVF9RU1RSSU5HX1VSTCkpP2MoZSh0W2ldLnN1YnN0cmluZyg1LG0ubGVuZ3RoLTIpLHAsbykpOicnKTooKG0uY2hhckF0KG0ubGVuZ3RoLTEpPT09JygnKSYmKHg9Zih0LGkpLHQuc3BsaWNlKGkseC1pLG09dC5zbGljZShpLHgpLmpvaW4oJyAnKSkpLHk9aC5jc3NMaXRHcm91cCx6PSh5PyhoLmNzc0xpdE1hcHx8KGguY3NzTGl0TWFwPXUoeSkpKTpnKSwoelttXT09PWd8fGguY3NzRXh0cmEmJmguY3NzRXh0cmEudGVzdChtKSkpP206KC9eXHcrJC8udGVzdChtKSYmKHE9PT1DU1NfUFJPUF9CSVRfUVNUUklOR19DT05URU5UKSk/KGwrMT09PWs/KHRbbF09dFtsXS5zdWJzdHJpbmcoMCx0W2xdLmxlbmd0aC0xKSsnICcrbSsnIicsbT0nJyk6KGw9aywnIicrbSsnIicpKTonJyk7aWYobSl7dFtrKytdPW19fWlmKGs9PT0xJiZ0WzBdPT09Til7az0wfXQubGVuZ3RoPWt9fSkoKTtmdW5jdGlvbiBzYW5pdGl6ZUNzc1NlbGVjdG9ycyhzLGEpe3ZhciBoPVtdO3ZhciBiPVtdO3ZhciBrPTAsaTtmb3IoaT0wO2k8cy5sZW5ndGg7KytpKXtpZighKHNbaV09PScgJyYmKHNbaS0xXT09Jz4nfHxzW2krMV09PSc+JykpKXtzW2srK109c1tpXX19cy5sZW5ndGg9azt2YXIgbj1zLmxlbmd0aCxjPTA7Zm9yKGk9MDtpPG47KytpKXtpZihzW2ldPT0nLCcpe3AoYyxpKTtjPWkrMX19cChjLG4pO2Z1bmN0aW9uIHAoYyxlKXt2YXIgZD1mYWxzZTtpZihzW2NdPT09JyAnKXsrK2N9aWYoZS0xIT09YyYmc1tlXT09PScgJyl7LS1lfXZhciBvPVtdO3ZhciBsPWM7dmFyIGY9Jyc7Zm9yKHZhciBpPWM7aTxlOysraSl7dmFyIHQ9c1tpXTt2YXIgZz0odD09PSc+Jyk7aWYoZ3x8dD09PScgJyl7Zj1qKGwsaSxmYWxzZSk7aWYoIWZ8fChnJiYvXmh0bWwvaS50ZXN0KGYpKSl7cmV0dXJufWw9aSsxO28ucHVzaChmLGc/JyA+ICc6JyAnKX19Zj1qKGwsZSx0cnVlKTtpZighZil7cmV0dXJufW8ucHVzaChmKTtmdW5jdGlvbiBqKGMsZSxxKXt2YXIgcj1jLHU9ZTt2YXIgdix3LHgsdCx5O3Y9Jyc7aWYoYzxlKXt0PXNbY10udG9Mb3dlckNhc2UoKTtpZih0PT09JyonfHwodD09PSdib2R5JyYmYysxIT09ZSYmIXEpfHwoJ251bWJlcic9PT10eXBlb2YoeT1odG1sNC5FTEVNRU5UU1t0XSkmJiEoeSZodG1sNC5lZmxhZ3MuVU5TQUZFKSkpeysrYzt2PXR9fXc9Jyc7d2hpbGUoYzxlKXt0PXNbY107aWYodC5jaGFyQXQoMCk9PT0nIycpe2lmKC9eI198X18kfFteIzAtOUEtWmEtejpfXC1dLy50ZXN0KHQpKXtyZXR1cm4gbnVsbH13Kz10KyctJythfWVsc2UgaWYodD09PScuJyl7aWYoKytjPGUmJi9eWzAtOUEtWmEtejpfXC1dKyQvLnRlc3QodD1zW2NdKSYmIS9eX3xfXyQvLnRlc3QodCkpe3crPScuJyt0fWVsc2V7cmV0dXJuIG51bGx9fWVsc2V7YnJlYWt9KytjfXg9Jyc7aWYoYzxlJiZzW2NdPT09JzonKXt0PXNbKytjXTtpZih0PT09J3Zpc2l0ZWQnfHx0PT09J2xpbmsnKXtpZighL15bYSpdPyQvLnRlc3Qodikpe3JldHVybiBudWxsfWQ9dHJ1ZTt4PSc6Jyt0O3Y9J2EnOysrY319aWYoYz09PWUpe3JldHVybiB2K3creH1yZXR1cm4gbnVsbH12YXIgbT1vLmpvaW4oJycpO2lmKC9eYm9keVxiLy50ZXN0KG0pKXttPScudmRvYy1ib2R5X19fLicrYSttLnN1YnN0cmluZyg0KX1lbHNle209Jy4nK2ErJyAnK219KGQ/aDpiKS5wdXNoKG0pfXJldHVybltiLGhdfTt2YXIgc2FuaXRpemVTdHlsZXNoZWV0PShmdW5jdGlvbigpe3ZhciBhPXt9O3ZhciBjPXsnYnJhaWxsZSc6YSwnZW1ib3NzZWQnOmEsJ2hhbmRoZWxkJzphLCdwcmludCc6YSwncHJvamVjdGlvbic6YSwnc2NyZWVuJzphLCdzcGVlY2gnOmEsJ3R0eSc6YSwndHYnOmF9O2Z1bmN0aW9uIHMoYil7dmFyIGU9ZmFsc2U7Zm9yKHZhciBpPTAsbj1iLmxlbmd0aDtpPG4tMTsrK2kpe3ZhciB0PWJbaV07aWYoJzonPT09YltpKzFdKXtlPSEoY3NzU2NoZW1hW3RdLmNzc1Byb3BCaXRzJkNTU19QUk9QX0JJVF9BTExPV0VEX0lOX0xJTkspfWlmKGUpe2JbaV09Jyd9aWYoJzsnPT09dCl7ZT1mYWxzZX19cmV0dXJuIGIuam9pbignJyl9cmV0dXJuIGZ1bmN0aW9uKGIsZCxvKXt2YXIgZT12b2lkIDA7dmFyIGY9W107dmFyIGc9ZmFsc2U7cGFyc2VDc3NTdHlsZXNoZWV0KGIse3N0YXJ0U3R5bGVzaGVldDpmdW5jdGlvbigpe2U9W119LGVuZFN0eWxlc2hlZXQ6ZnVuY3Rpb24oKXt9LHN0YXJ0QXRydWxlOmZ1bmN0aW9uKGksail7aWYoZyl7aT1udWxsfWVsc2UgaWYoaT09PSdAbWVkaWEnKXtqPWouZmlsdGVyKGZ1bmN0aW9uKG0pe3JldHVybiBjW21dPT1hfSk7aWYoai5sZW5ndGgpe2UucHVzaChpLGouam9pbignLCcpLCd7Jyl9ZWxzZXtpPW51bGx9fWVsc2V7aWYoaT09PSdAaW1wb3J0Jyl7aWYod2luZG93LmNvbnNvbGUpe3dpbmRvdy5jb25zb2xlLmxvZygnQGltcG9ydCAnK2ouam9pbignICcpKycgZWxpZGVkJyl9fWk9bnVsbH1nPSFpO2YucHVzaChpKX0sZW5kQXRydWxlOmZ1bmN0aW9uKCl7dmFyIGk9Zi5wb3AoKTtpZighZyl7ZS5wdXNoKCc7Jyl9aCgpfSxzdGFydEJsb2NrOmZ1bmN0aW9uKCl7aWYoIWcpe2UucHVzaCgneycpfX0sZW5kQmxvY2s6ZnVuY3Rpb24oKXtpZighZyl7ZS5wdXNoKCd9Jyk7Zz10cnVlfX0sc3RhcnRSdWxlc2V0OmZ1bmN0aW9uKGkpe3ZhciBqPXZvaWQgMDt2YXIgcj1mYWxzZTtpZighZyl7dmFyIGs9c2FuaXRpemVDc3NTZWxlY3RvcnMoaSxkKTt2YXIgbD1rWzBdO2o9a1sxXTtpZighbC5sZW5ndGgmJiFqLmxlbmd0aCl7Zz10cnVlfWVsc2V7dmFyIG09bC5qb2luKCcsICcpO2lmKCFtKXttPSdoZWFkID4gaHRtbCc7cj10cnVlfWUucHVzaChtLCd7Jyl9fWYucHVzaChnP251bGw6e2hpc3RvcnlTZW5zaXRpdmVTZWxlY3RvcnM6aixlbmRPZlNlbGVjdG9yczplLmxlbmd0aC0xLHJlbW92ZUhpc3RvcnlJbnNlbnNpdGl2ZVNlbGVjdG9yczpyfSl9LGVuZFJ1bGVzZXQ6ZnVuY3Rpb24oKXt2YXIgcj1mLnBvcCgpO3ZhciBwPWUubGVuZ3RoO2lmKCFnKXtlLnB1c2goJ30nKTtpZihyKXt2YXIgaT1yLmhpc3RvcnlTZW5zaXRpdmVTZWxlY3RvcnM7aWYoaS5sZW5ndGgpe3ZhciBqPWUuc2xpY2Uoci5lbmRPZlNlbGVjdG9ycyk7ZS5wdXNoKGkuam9pbignLCAnKSxzKGopKX19fWlmKHImJnIucmVtb3ZlSGlzdG9yeUluc2Vuc2l0aXZlU2VsZWN0b3JzKXtlLnNwbGljZShyLmVuZE9mU2VsZWN0b3JzLTEscCsxKX1oKCl9LGRlY2xhcmF0aW9uOmZ1bmN0aW9uKHAsdil7aWYoIWcpe3ZhciBpPWNzc1NjaGVtYVtwXTtpZihpKXtzYW5pdGl6ZUNzc1Byb3BlcnR5KHAsaSx2LG8pO2lmKHYubGVuZ3RoKXtlLnB1c2gocCwnOicsdi5qb2luKCcgJyksJzsnKX19fX19KTtmdW5jdGlvbiBoKCl7Zz1mLmxlbmd0aCE9PTAmJmZbZi5sZW5ndGgtMV0hPT1udWxsfXJldHVybiBlLmpvaW4oJycpfX0pKCk7aWYodHlwZW9mIHdpbmRvdyE9PSd1bmRlZmluZWQnKXt3aW5kb3dbJ3Nhbml0aXplQ3NzUHJvcGVydHknXT1zYW5pdGl6ZUNzc1Byb3BlcnR5O3dpbmRvd1snc2FuaXRpemVDc3NTZWxlY3RvcnMnXT1zYW5pdGl6ZUNzc1NlbGVjdG9yczt3aW5kb3dbJ3Nhbml0aXplU3R5bGVzaGVldCddPXNhbml0aXplU3R5bGVzaGVldH0KLy8gQ29weXJpZ2h0IChDKSAyMDEwIEdvb2dsZSBJbmMuCi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwovLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAovLyAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAovLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAovLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgp2YXIgcGFyc2VDc3NTdHlsZXNoZWV0O3ZhciBwYXJzZUNzc0RlY2xhcmF0aW9uczsoZnVuY3Rpb24oKXtwYXJzZUNzc1N0eWxlc2hlZXQ9ZnVuY3Rpb24oZSxoKXt2YXIgdD1sZXhDc3MoZSk7aWYoaC5zdGFydFN0eWxlc2hlZXQpe2guc3RhcnRTdHlsZXNoZWV0KCl9Zm9yKHZhciBpPTAsbj10Lmxlbmd0aDtpPG47KXtpPXRbaV09PT0nICc/aSsxOmEodCxpLG4saCl9aWYoaC5lbmRTdHlsZXNoZWV0KXtoLmVuZFN0eWxlc2hlZXQoKX19O2Z1bmN0aW9uIGEodCxpLG4saCl7aWYoaTxuKXt2YXIgZT10W2ldO2lmKGUuY2hhckF0KDApPT09J0AnKXtyZXR1cm4gYih0LGksbixoLHRydWUpfWVsc2V7cmV0dXJuIHIodCxpLG4saCl9fWVsc2V7cmV0dXJuIGl9fWZ1bmN0aW9uIGIodCxpLG4saCxqKXt2YXIgaz1pKys7d2hpbGUoaTxuJiZ0W2ldIT09J3snJiZ0W2ldIT09JzsnKXsrK2l9aWYoaTxuJiYoanx8dFtpXT09PSc7Jykpe3ZhciBzPWsrMSxlPWk7aWYoczxuJiZ0W3NdPT09JyAnKXsrK3N9aWYoZT5zJiZ0W2UtMV09PT0nICcpey0tZX1pZihoLnN0YXJ0QXRydWxlKXtoLnN0YXJ0QXRydWxlKHRba10udG9Mb3dlckNhc2UoKSx0LnNsaWNlKHMsZSkpfWk9KHRbaV09PT0neycpP2ModCxpLG4saCk6aSsxO2lmKGguZW5kQXRydWxlKXtoLmVuZEF0cnVsZSgpfX1yZXR1cm4gaX1mdW5jdGlvbiBjKHQsaSxuLGgpeysraTtpZihoLnN0YXJ0QmxvY2spe2guc3RhcnRCbG9jaygpfXdoaWxlKGk8bil7dmFyIGU9dFtpXS5jaGFyQXQoMCk7aWYoZT09J30nKXsrK2k7YnJlYWt9aWYoZT09PScgJ3x8ZT09PSc7Jyl7aT1pKzF9ZWxzZSBpZihlPT09J0AnKXtpPWIodCxpLG4saCxmYWxzZSl9ZWxzZSBpZihlPT09J3snKXtpPWModCxpLG4saCl9ZWxzZXtpPXIodCxpLG4saCl9fWlmKGguZW5kQmxvY2spe2guZW5kQmxvY2soKX1yZXR1cm4gaX1mdW5jdGlvbiByKHQsaSxuLGgpe3ZhciBzPWksZT1kKHQsaSxuLHRydWUpO2lmKGU8MCl7ZT1+ZTtyZXR1cm4gaT09PWU/ZSsxOmV9aT1lO2lmKGU+cyYmdFtlLTFdPT09JyAnKXstLWV9dmFyIGo9dFtpXTsrK2k7aWYoaiE9PSd7Jyl7cmV0dXJuIGl9aWYoaC5zdGFydFJ1bGVzZXQpe2guc3RhcnRSdWxlc2V0KHQuc2xpY2UocyxlKSl9d2hpbGUoaTxuKXtqPXRbaV07aWYoaj09PSd9Jyl7KytpO2JyZWFrfWlmKGo9PT0nICcpe2k9aSsxfWVsc2V7aT1nKHQsaSxuLGgpfX1pZihoLmVuZFJ1bGVzZXQpe2guZW5kUnVsZXNldCgpfXJldHVybiBpPG4/aSsxOml9ZnVuY3Rpb24gZCh0LGksbixlKXt2YXIgcz1pO3ZhciBoO3ZhciBqPVtdLGs9LTE7Zm9yKDtpPG47KytpKXtoPXRbaV0uY2hhckF0KDApO2lmKGg9PT0nWyd8fGg9PT0nKCcpe2pbKytrXT1ofWVsc2UgaWYoKGg9PT0nXScmJmpba109PT0nWycpfHwoaD09PScpJyYmaltrXT09PScoJykpey0ta31lbHNlIGlmKGg9PT0neyd8fGg9PT0nfSd8fGg9PT0nOyd8fGg9PT0nQCd8fChoPT09JzonJiYhZSkpe2JyZWFrfX1pZihrPj0wKXtpPX4oaSsxKX1yZXR1cm4gaX12YXIgZj0vXi0/W2Etel0vaTtmdW5jdGlvbiBnKHQsaSxuLGgpe3ZhciBwPXRbaSsrXTtpZighZi50ZXN0KHApKXtyZXR1cm4gaSsxfXZhciBrO2lmKGk8biYmdFtpXT09PScgJyl7KytpfWlmKGk9PW58fHRbaV0hPT0nOicpe3doaWxlKGk8biYmKGs9dFtpXSkhPT0nOycmJmshPT0nfScpeysraX1yZXR1cm4gaX0rK2k7aWYoaTxuJiZ0W2ldPT09JyAnKXsrK2l9dmFyIHM9aSxlPWQodCxpLG4sZmFsc2UpO2lmKGU8MCl7ZT1+ZX1lbHNle3ZhciB2PVtdLGw9MDtmb3IodmFyIGo9cztqPGU7KytqKXtrPXRbal07aWYoayE9PScgJyl7dltsKytdPWt9fWlmKGU8bil7ZG97az10W2VdO2lmKGs9PT0nOyd8fGs9PT0nfScpe2JyZWFrfWw9MH13aGlsZSgrK2U8bik7aWYoaz09PSc7Jyl7KytlfX1pZihsJiZoLmRlY2xhcmF0aW9uKXtoLmRlY2xhcmF0aW9uKHAudG9Mb3dlckNhc2UoKSx2KX19cmV0dXJuIGV9cGFyc2VDc3NEZWNsYXJhdGlvbnM9ZnVuY3Rpb24oZSxoKXt2YXIgdD1sZXhDc3MoZSk7Zm9yKHZhciBpPTAsbj10Lmxlbmd0aDtpPG47KXtpPXRbaV0hPT0nICc/Zyh0LGksbixoKTppKzF9fX0pKCk7aWYodHlwZW9mIHdpbmRvdyE9PSd1bmRlZmluZWQnKXt3aW5kb3dbJ3BhcnNlQ3NzU3R5bGVzaGVldCddPXBhcnNlQ3NzU3R5bGVzaGVldDt3aW5kb3dbJ3BhcnNlQ3NzRGVjbGFyYXRpb25zJ109cGFyc2VDc3NEZWNsYXJhdGlvbnN9Ci8qIQogKiBAY29weXJpZ2h0QAogKi8KdmFyIGh0bWw0PXt9O2h0bWw0LmF0eXBlPXtOT05FOjAsVVJJOjEsVVJJX0ZSQUdNRU5UOjExLFNDUklQVDoyLFNUWUxFOjMsSUQ6NCxJRFJFRjo1LElEUkVGUzo2LEdMT0JBTF9OQU1FOjcsTE9DQUxfTkFNRTo4LENMQVNTRVM6OSxGUkFNRV9UQVJHRVQ6MTB9O2h0bWw0LkFUVFJJQlM9eycqOjphY2Nlc3NrZXknOjAsJyo6OmNsYXNzJzo5LCcqOjpjb250ZW50ZWRpdGFibGUnOjAsJyo6OmNvbnRleHRtZW51JzowLCcqOjpkaXInOjAsJyo6OmRyYWdnYWJsZSc6MCwnKjo6ZHJvcHpvbmUnOjAsJyo6OmhpZGRlbic6MCwnKjo6aWQnOjQsJyo6OmxhbmcnOjAsJyo6Om9uYWJvcnQnOjIsJyo6Om9uYmx1cic6MiwnKjo6b25jYW5wbGF5JzoyLCcqOjpvbmNhbnBsYXl0aHJvdWdoJzoyLCcqOjpvbmNoYW5nZSc6MiwnKjo6b25jbGljayc6MiwnKjo6b25jb250ZXh0bWVudSc6MiwnKjo6b25jdWVjaGFuZ2UnOjIsJyo6Om9uZGJsY2xpY2snOjIsJyo6Om9uZHJhZyc6MiwnKjo6b25kcmFnZW5kJzoyLCcqOjpvbmRyYWdlbnRlcic6MiwnKjo6b25kcmFnbGVhdmUnOjIsJyo6Om9uZHJhZ292ZXInOjIsJyo6Om9uZHJhZ3N0YXJ0JzoyLCcqOjpvbmRyb3AnOjIsJyo6Om9uZHVyYXRpb25jaGFuZ2UnOjIsJyo6Om9uZW1wdGllZCc6MiwnKjo6b25lbmRlZCc6MiwnKjo6b25lcnJvcic6MiwnKjo6b25mb2N1cyc6MiwnKjo6b25pbnB1dCc6MiwnKjo6b25pbnZhbGlkJzoyLCcqOjpvbmtleWRvd24nOjIsJyo6Om9ua2V5cHJlc3MnOjIsJyo6Om9ua2V5dXAnOjIsJyo6Om9ubG9hZCc6MiwnKjo6b25sb2FkZWRkYXRhJzoyLCcqOjpvbmxvYWRlZG1ldGFkYXRhJzoyLCcqOjpvbmxvYWRzdGFydCc6MiwnKjo6b25tb3VzZWRvd24nOjIsJyo6Om9ubW91c2Vtb3ZlJzoyLCcqOjpvbm1vdXNlb3V0JzoyLCcqOjpvbm1vdXNlb3Zlcic6MiwnKjo6b25tb3VzZXVwJzoyLCcqOjpvbm1vdXNld2hlZWwnOjIsJyo6Om9ucGF1c2UnOjIsJyo6Om9ucGxheSc6MiwnKjo6b25wbGF5aW5nJzoyLCcqOjpvbnByb2dyZXNzJzoyLCcqOjpvbnJhdGVjaGFuZ2UnOjIsJyo6Om9ucmVhZHlzdGF0ZWNoYW5nZSc6MiwnKjo6b25yZXNldCc6MiwnKjo6b25zY3JvbGwnOjIsJyo6Om9uc2Vla2VkJzoyLCcqOjpvbnNlZWtpbmcnOjIsJyo6Om9uc2VsZWN0JzoyLCcqOjpvbnNob3cnOjIsJyo6Om9uc3RhbGxlZCc6MiwnKjo6b25zdWJtaXQnOjIsJyo6Om9uc3VzcGVuZCc6MiwnKjo6b250aW1ldXBkYXRlJzoyLCcqOjpvbnZvbHVtZWNoYW5nZSc6MiwnKjo6b253YWl0aW5nJzoyLCcqOjpzcGVsbGNoZWNrJzowLCcqOjpzdHlsZSc6MywnKjo6dGFiaW5kZXgnOjAsJyo6OnRpdGxlJzowLCdhOjpocmVmJzoxLCdhOjpocmVmbGFuZyc6MCwnYTo6bWVkaWEnOjAsJ2E6OnJlbCc6MCwnYTo6dGFyZ2V0JzowLCdhOjp0eXBlJzowLCdhcmVhOjphbHQnOjAsJ2FyZWE6OmNvb3Jkcyc6MCwnYXJlYTo6aHJlZic6MSwnYXJlYTo6aHJlZmxhbmcnOjAsJ2FyZWE6Om1lZGlhJzowLCdhcmVhOjpyZWwnOjAsJ2FyZWE6OnNoYXBlJzowLCdhcmVhOjp0YXJnZXQnOjEwLCdhcmVhOjp0eXBlJzowLCdhdWRpbzo6YXV0b3BsYXknOjAsJ2F1ZGlvOjpjb250cm9scyc6MCwnYXVkaW86Omxvb3AnOjAsJ2F1ZGlvOjptZWRpYWdyb3VwJzowLCdhdWRpbzo6cHJlbG9hZCc6MCwnYXVkaW86OnNyYyc6MSwnYmFzZTo6aHJlZic6MSwnYmFzZTo6dGFyZ2V0JzoxMCwnYmxvY2txdW90ZTo6Y2l0ZSc6MSwnYm9keTo6b25hZnRlcnByaW50JzoyLCdib2R5OjpvbmJlZm9yZXByaW50JzoyLCdib2R5OjpvbmJlZm9yZXVubG9hZCc6MiwnYm9keTo6b25ibHVyJzoyLCdib2R5OjpvbmVycm9yJzoyLCdib2R5OjpvbmZvY3VzJzoyLCdib2R5Ojpvbmhhc2hjaGFuZ2UnOjIsJ2JvZHk6Om9ubG9hZCc6MiwnYm9keTo6b25tZXNzYWdlJzoyLCdib2R5Ojpvbm9mZmxpbmUnOjIsJ2JvZHk6Om9ub25saW5lJzoyLCdib2R5OjpvbnBhZ2VoaWRlJzoyLCdib2R5OjpvbnBhZ2VzaG93JzoyLCdib2R5OjpvbnBvcHN0YXRlJzoyLCdib2R5OjpvbnJlZG8nOjIsJ2JvZHk6Om9ucmVzaXplJzoyLCdib2R5OjpvbnNjcm9sbCc6MiwnYm9keTo6b25zdG9yYWdlJzoyLCdib2R5OjpvbnVuZG8nOjIsJ2JvZHk6Om9udW5sb2FkJzoyLCdidXR0b246OmF1dG9mb2N1cyc6MCwnYnV0dG9uOjpkaXNhYmxlZCc6MCwnYnV0dG9uOjpmb3JtJzowLCdidXR0b246OmZvcm1hY3Rpb24nOjEsJ2J1dHRvbjo6Zm9ybWVuY3R5cGUnOjAsJ2J1dHRvbjo6Zm9ybW1ldGhvZCc6MCwnYnV0dG9uOjpmb3Jtbm92YWxpZGF0ZSc6MCwnYnV0dG9uOjpmb3JtdGFyZ2V0JzoxMCwnYnV0dG9uOjpuYW1lJzo4LCdidXR0b246OnR5cGUnOjAsJ2J1dHRvbjo6dmFsdWUnOjAsJ2NhbnZhczo6aGVpZ2h0JzowLCdjYW52YXM6OndpZHRoJzowLCdjb2w6OnNwYW4nOjAsJ2NvbGdyb3VwOjpzcGFuJzowLCdjb21tYW5kOjpjaGVja2VkJzowLCdjb21tYW5kOjpkaXNhYmxlZCc6MCwnY29tbWFuZDo6aWNvbic6MSwnY29tbWFuZDo6bGFiZWwnOjAsJ2NvbW1hbmQ6OnJhZGlvZ3JvdXAnOjAsJ2NvbW1hbmQ6OnR5cGUnOjAsJ2RlbDo6Y2l0ZSc6MSwnZGVsOjpkYXRldGltZSc6MCwnZGV0YWlsczo6b3Blbic6MCwnZW1iZWQ6OmhlaWdodCc6MCwnZW1iZWQ6OnNyYyc6MSwnZW1iZWQ6OnR5cGUnOjAsJ2VtYmVkOjp3aWR0aCc6MCwnZmllbGRzZXQ6OmRpc2FibGVkJzowLCdmaWVsZHNldDo6Zm9ybSc6MCwnZmllbGRzZXQ6Om5hbWUnOjgsJ2Zvcm06OmFjY2VwdC1jaGFyc2V0JzowLCdmb3JtOjphY3Rpb24nOjEsJ2Zvcm06OmF1dG9jb21wbGV0ZSc6MCwnZm9ybTo6ZW5jdHlwZSc6MCwnZm9ybTo6bWV0aG9kJzowLCdmb3JtOjpuYW1lJzo3LCdmb3JtOjpub3ZhbGlkYXRlJzowLCdmb3JtOjp0YXJnZXQnOjEwLCdodG1sOjogbWFuaWZlc3QnOjEsJ2lmcmFtZTo6aGVpZ2h0JzowLCdpZnJhbWU6Om5hbWUnOjcsJ2lmcmFtZTo6c2FuZGJveCc6MCwnaWZyYW1lOjpzZWFtbGVzcyc6MCwnaWZyYW1lOjpzcmMnOjEsJ2lmcmFtZTo6c3JjZG9jJzoxMCwnaWZyYW1lOjp3aWR0aCc6MCwnaW1nOjphbHQnOjAsJ2ltZzo6aGVpZ2h0JzowLCdpbWc6OmlzbWFwJzowLCdpbWc6Om5hbWUnOjcsJ2ltZzo6c3JjJzoxLCdpbWc6OnVzZW1hcCc6MTEsJ2ltZzo6d2lkdGgnOjAsJ2lucHV0OjphY2NlcHQnOjAsJ2lucHV0OjphbHQnOjAsJ2lucHV0OjphdXRvY29tcGxldGUnOjAsJ2lucHV0OjphdXRvZm9jdXMnOjAsJ2lucHV0OjpjaGVja2VkJzowLCdpbnB1dDo6ZGlybmFtZSc6MCwnaW5wdXQ6OmRpc2FibGVkJzowLCdpbnB1dDo6Zm9ybSc6MCwnaW5wdXQ6OmZvcm1hY3Rpb24nOjEsJ2lucHV0Ojpmb3JtZW5jdHlwZSc6MCwnaW5wdXQ6OmZvcm1tZXRob2QnOjAsJ2lucHV0Ojpmb3Jtbm92YWxpZGF0ZSc6MCwnaW5wdXQ6OmZvcm10YXJnZXQnOjEwLCdpbnB1dDo6aGVpZ2h0JzowLCdpbnB1dDo6bGlzdCc6MCwnaW5wdXQ6Om1heCc6MCwnaW5wdXQ6Om1heGxlbmd0aCc6MCwnaW5wdXQ6Om1pbic6MCwnaW5wdXQ6Om11bHRpcGxlJzowLCdpbnB1dDo6bmFtZSc6OCwnaW5wdXQ6OnBhdHRlcm4nOjAsJ2lucHV0OjpwbGFjZWhvbGRlcic6MCwnaW5wdXQ6OnJlYWRvbmx5JzowLCdpbnB1dDo6cmVxdWlyZWQnOjAsJ2lucHV0OjpzdGVwJzowLCdpbnB1dDo6c2l6ZSc6MCwnaW5wdXQ6OnNyYyc6MSwnaW5wdXQ6OnR5cGUnOjAsJ2lucHV0Ojp2YWx1ZSc6MCwnaW5wdXQ6OndpZHRoJzowLCdpbnM6OmNpdGUnOjEsJ2luczo6ZGF0ZXRpbWUnOjAsJ2tleWdlbjo6YXV0b2ZvY3VzJzowLCdrZXlnZW46OmNoYWxsZW5nZSc6MCwna2V5Z2VuOjpkaXNhYmxlZCc6MCwna2V5Z2VuOjpmb3JtJzowLCdrZXlnZW46OmtleXR5cGUnOjAsJ2tleWdlbjo6bmFtZSc6OCwnbGFiZWw6OmZvcic6NSwnbGFiZWw6OmZvcm0nOjAsJ2xpbms6OmhyZWYnOjEsJ2xpbms6OmhyZWZsYW5nJzowLCdsaW5rOjptZWRpYSc6MCwnbGluazo6cmVsJzowLCdsaW5rOjpzaXplcyc6MCwnbGluazo6dHlwZSc6MCwnbGk6OnZhbHVlJzowLCdtYXA6Om5hbWUnOjcsJ21lbnU6OmxhYmVsJzowLCdtZW51Ojp0eXBlJzowLCdtZXRhOjpjaGFyc2V0JzowLCdtZXRhOjpjb250ZW50JzowLCdtZXRhOjpodHRwLWVxdWl2JzowLCdtZXRhOjpuYW1lJzo3LCdtZXRlcjo6Zm9ybSc6MCwnbWV0ZXI6OmhpZ2gnOjAsJ21ldGVyOjpsb3cnOjAsJ21ldGVyOjptYXgnOjAsJ21ldGVyOjptaW4nOjAsJ21ldGVyOjpvcHRpbXVtJzowLCdtZXRlcjo6dmFsdWUnOjAsJ29iamVjdDo6ZGF0YSc6MSwnb2JqZWN0Ojpmb3JtJzowLCdvYmplY3Q6OmhlaWdodCc6MCwnb2JqZWN0OjpuYW1lJzo4LCdvYmplY3Q6OnR5cGUnOjAsJ29iamVjdDo6dXNlbWFwJzoxMSwnb2JqZWN0Ojp3aWR0aCc6MCwnb2w6OnJldmVyc2VkJzowLCdvbDo6c3RhcnQnOjAsJ29wdGdyb3VwOjpkaXNhYmxlZCc6MCwnb3B0Z3JvdXA6OmxhYmVsJzowLCdvcHRpb246OmRpc2FibGVkJzowLCdvcHRpb246OmxhYmVsJzowLCdvcHRpb246OnNlbGVjdGVkJzowLCdvcHRpb246OnZhbHVlJzowLCdvdXRwdXQ6OmZvcic6NSwnb3V0cHV0Ojpmb3JtJzowLCdvdXRwdXQ6Om5hbWUnOjgsJ3BhcmFtOjpuYW1lJzo4LCdwYXJhbTo6dmFsdWUnOjAsJ3Byb2dyZXNzOjpmb3JtJzowLCdwcm9ncmVzczo6bWF4JzowLCdwcm9ncmVzczo6dmFsdWUnOjAsJ3E6OmNpdGUnOjEsJ3NjcmlwdDo6YXN5bmMnOjAsJ3NjcmlwdDo6Y2hhcnNldCc6MCwnc2NyaXB0OjpkZWZlcic6MCwnc2NyaXB0OjpzcmMnOjEsJ3NjcmlwdDo6dHlwZSc6MCwnc2VsZWN0OjphdXRvZm9jdXMnOjAsJ3NlbGVjdDo6ZGlzYWJsZWQnOjAsJ3NlbGVjdDo6Zm9ybSc6MCwnc2VsZWN0OjptdWx0aXBsZSc6MCwnc2VsZWN0OjpuYW1lJzo4LCdzZWxlY3Q6OnJlcXVpcmVkJzowLCdzZWxlY3Q6OnNpemUnOjAsJ3NvdXJjZTo6bWVkaWEnOjAsJ3NvdXJjZTo6c3JjJzoxLCdzb3VyY2U6OnR5cGUnOjAsJ3N0eWxlOjptZWRpYSc6MCwnc3R5bGU6OnNjb3BlZCc6MCwnc3R5bGU6OnR5cGUnOjAsJ3RhYmxlOjpib3JkZXInOjAsJ3RkOjpjb2xzcGFuJzowLCd0ZDo6aGVhZGVycyc6NiwndGQ6OnJvd3NwYW4nOjAsJ3RleHRhcmVhOjphdXRvZm9jdXMnOjAsJ3RleHRhcmVhOjpjb2xzJzowLCd0ZXh0YXJlYTo6ZGlzYWJsZWQnOjAsJ3RleHRhcmVhOjpmb3JtJzowLCd0ZXh0YXJlYTo6bWF4bGVuZ3RoJzowLCd0ZXh0YXJlYTo6bmFtZSc6OCwndGV4dGFyZWE6OnBsYWNlaG9sZGVyJzowLCd0ZXh0YXJlYTo6cmVhZG9ubHknOjAsJ3RleHRhcmVhOjpyZXF1aXJlZCc6MCwndGV4dGFyZWE6OnJvd3MnOjAsJ3RleHRhcmVhOjp3cmFwJzowLCd0aDo6Y29sc3Bhbic6MCwndGg6OmhlYWRlcnMnOjYsJ3RoOjpyb3dzcGFuJzowLCd0aDo6c2NvcGUnOjAsJ3RpbWU6OmRhdGV0aW1lJzowLCd0aW1lOjpwdWJkYXRlJzowLCd0cmFjazo6ZGVmYXVsdCc6MCwndHJhY2s6OmtpbmQnOjAsJ3RyYWNrOjpsYWJlbCc6MCwndHJhY2s6OnNyYyc6MSwndHJhY2s6OnNyY2xhbmcnOjAsJ3ZpZGVvOjphdXRvcGxheSc6MCwndmlkZW86OmNvbnRyb2xzJzowLCd2aWRlbzo6aGVpZ2h0JzowLCd2aWRlbzo6bG9vcCc6MCwndmlkZW86Om1lZGlhZ3JvdXAnOjAsJ3ZpZGVvOjpwb3N0ZXInOjEsJ3ZpZGVvOjpwcmVsb2FkJzowLCd2aWRlbzo6c3JjJzoxLCd2aWRlbzo6d2lkdGgnOjB9O2h0bWw0LmVmbGFncz17T1BUSU9OQUxfRU5EVEFHOjEsRU1QVFk6MixDREFUQTo0LFJDREFUQTo4LFVOU0FGRToxNixGT0xEQUJMRTozMixTQ1JJUFQ6NjQsU1RZTEU6MTI4fTtodG1sNC5FTEVNRU5UUz17J2EnOjAsJ2FiYnInOjAsJ2FkZHJlc3MnOjAsJ2FyZWEnOjIsJ2FydGljbGUnOjAsJ2FzaWRlJzowLCdhdWRpbyc6MCwnYic6MCwnYmFzZSc6MTgsJ2JkaSc6MCwnYmRvJzowLCdibG9ja3F1b3RlJzowLCdib2R5Jzo0OSwnYnInOjIsJ2J1dHRvbic6MCwnY2FudmFzJzowLCdjYXB0aW9uJzowLCdjaXRlJzowLCdjb2RlJzowLCdjb2wnOjIsJ2NvbGdyb3VwJzoxLCdjb21tYW5kJzoyLCdkYXRhbGlzdCc6MCwnZGQnOjEsJ2RlbCc6MCwnZGV0YWlscyc6MCwnZGZuJzowLCdkaXYnOjAsJ2RsJzowLCdkdCc6MSwnZW0nOjAsJ2VtYmVkJzoxOCwnZmllbGRzZXQnOjAsJ2ZpZ2NhcHRpb24nOjAsJ2ZpZ3VyZSc6MCwnZm9vdGVyJzowLCdmb3JtJzowLCdoMSc6MCwnaDInOjAsJ2gzJzowLCdoNCc6MCwnaDUnOjAsJ2g2JzowLCdoZWFkJzo0OSwnaGVhZGVyJzowLCdoZ3JvdXAnOjAsJ2hyJzoyLCdodG1sJzo0OSwnaSc6MCwnaWZyYW1lJzo0LCdpbWcnOjIsJ2lucHV0JzoyLCdpbnMnOjAsJ2tiZCc6MCwna2V5Z2VuJzoyLCdsYWJlbCc6MCwnbGVnZW5kJzowLCdsaSc6MSwnbGluayc6MTgsJ21hcCc6MCwnbWFyayc6MCwnbWVudSc6MCwnbWV0YSc6MTgsJ21ldGVyJzowLCduYXYnOjAsJ25vc2NyaXB0JzoyMCwnb2JqZWN0JzoxNiwnb2wnOjAsJ29wdGdyb3VwJzoxLCdvcHRpb24nOjEsJ291dHB1dCc6MCwncCc6MSwncGFyYW0nOjE4LCdwcmUnOjAsJ3Byb2dyZXNzJzowLCdxJzowLCdycCc6MSwncnQnOjEsJ3J1YnknOjAsJ3MnOjAsJ3NhbXAnOjAsJ3NjcmlwdCc6ODQsJ3NlY3Rpb24nOjAsJ3NlbGVjdCc6MCwnc21hbGwnOjAsJ3NvdXJjZSc6Miwnc3Bhbic6MCwnc3Ryb25nJzowLCdzdHlsZSc6MTQ4LCdzdWInOjAsJ3N1bW1hcnknOjAsJ3N1cCc6MCwndGFibGUnOjAsJ3Rib2R5JzoxLCd0ZCc6MSwndGV4dGFyZWEnOjgsJ3Rmb290JzoxLCd0aCc6MSwndGhlYWQnOjEsJ3RpbWUnOjAsJ3RpdGxlJzoyNCwndHInOjEsJ3RyYWNrJzoyLCd1JzowLCd1bCc6MCwndmFyJzowLCd2aWRlbyc6MCwnd2JyJzoyfTtodG1sNC51ZWZmZWN0cz17Tk9UX0xPQURFRDowLFNBTUVfRE9DVU1FTlQ6MSxORVdfRE9DVU1FTlQ6Mn07aHRtbDQuVVJJRUZGRUNUUz17J2E6OmhyZWYnOjIsJ2FyZWE6OmhyZWYnOjIsJ2F1ZGlvOjpzcmMnOjEsJ2Jhc2U6OmhyZWYnOjIsJ2Jsb2NrcXVvdGU6OmNpdGUnOjAsJ2J1dHRvbjo6Zm9ybWFjdGlvbic6MiwnY29tbWFuZDo6aWNvbic6MSwnZGVsOjpjaXRlJzowLCdlbWJlZDo6c3JjJzoxLCdmb3JtOjphY3Rpb24nOjIsJ2h0bWw6OiBtYW5pZmVzdCc6MSwnaWZyYW1lOjpzcmMnOjEsJ2ltZzo6c3JjJzoxLCdpbnB1dDo6Zm9ybWFjdGlvbic6MiwnaW5wdXQ6OnNyYyc6MSwnaW5zOjpjaXRlJzowLCdsaW5rOjpocmVmJzoyLCdvYmplY3Q6OmRhdGEnOjEsJ3E6OmNpdGUnOjAsJ3NjcmlwdDo6c3JjJzoxLCdzb3VyY2U6OnNyYyc6MSwndHJhY2s6OnNyYyc6MSwndmlkZW86OnBvc3Rlcic6MSwndmlkZW86OnNyYyc6MX07aHRtbDQubHR5cGVzPXtVTlNBTkRCT1hFRDoyLFNBTkRCT1hFRDoxLERBVEE6MH07aHRtbDQuTE9BREVSVFlQRVM9eydhOjpocmVmJzoyLCdhcmVhOjpocmVmJzoyLCdhdWRpbzo6c3JjJzoxLCdiYXNlOjpocmVmJzoyLCdibG9ja3F1b3RlOjpjaXRlJzoyLCdidXR0b246OmZvcm1hY3Rpb24nOjIsJ2NvbW1hbmQ6Omljb24nOjEsJ2RlbDo6Y2l0ZSc6MiwnZW1iZWQ6OnNyYyc6MSwnZm9ybTo6YWN0aW9uJzoyLCdodG1sOjogbWFuaWZlc3QnOjEsJ2lmcmFtZTo6c3JjJzoxLCdpbWc6OnNyYyc6MSwnaW5wdXQ6OmZvcm1hY3Rpb24nOjIsJ2lucHV0OjpzcmMnOjEsJ2luczo6Y2l0ZSc6MiwnbGluazo6aHJlZic6Miwnb2JqZWN0OjpkYXRhJzowLCdxOjpjaXRlJzoyLCdzY3JpcHQ6OnNyYyc6MSwnc291cmNlOjpzcmMnOjEsJ3RyYWNrOjpzcmMnOjEsJ3ZpZGVvOjpwb3N0ZXInOjEsJ3ZpZGVvOjpzcmMnOjF9O2lmKHR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJyl7d2luZG93WydodG1sNCddPWh0bWw0fQovLyBDb3B5cmlnaHQgKEMpIDIwMDYgR29vZ2xlIEluYy4KLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7Ci8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0Ci8vICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCnZhciBodG1sPShmdW5jdGlvbihhKXt2YXIgYixjLGQ7aWYoJ3VuZGVmaW5lZCchPT10eXBlb2Ygd2luZG93KXtiPXdpbmRvd1sncGFyc2VDc3NEZWNsYXJhdGlvbnMnXTtjPXdpbmRvd1snc2FuaXRpemVDc3NQcm9wZXJ0eSddO2Q9d2luZG93Wydjc3NTY2hlbWEnXX12YXIgbDtpZignc2NyaXB0Jz09PSdTQ1JJUFQnLnRvTG93ZXJDYXNlKCkpe2w9ZnVuY3Rpb24ocyl7cmV0dXJuIHMudG9Mb3dlckNhc2UoKX19ZWxzZXtsPWZ1bmN0aW9uKHMpe3JldHVybiBzLnJlcGxhY2UoL1tBLVpdL2csZnVuY3Rpb24oZSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoZS5jaGFyQ29kZUF0KDApfDMyKX0pfX12YXIgRT17J2x0JzonPCcsJ2d0JzonPicsJ2FtcCc6JyYnLCduYnNwJzonXDI0MCcsJ3F1b3QnOiciJywnYXBvcyc6J1wnJ307dmFyIGY9L14jKFxkKykkLzt2YXIgZz0vXiN4KFswLTlBLUZhLWZdKykkLztmdW5jdGlvbiBqKG4pe249bChuKTtpZihFLmhhc093blByb3BlcnR5KG4pKXtyZXR1cm4gRVtuXX12YXIgbT1uLm1hdGNoKGYpO2lmKG0pe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KG1bMV0sMTApKX1lbHNlIGlmKCEhKG09bi5tYXRjaChnKSkpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KG1bMV0sMTYpKX1yZXR1cm4nJ31mdW5jdGlvbiBrKF8sbil7cmV0dXJuIGoobil9dmFyIG89L1wwL2c7ZnVuY3Rpb24gcihzKXtyZXR1cm4gcy5yZXBsYWNlKG8sJycpfXZhciB0PS8mKCNcZCt8I3hbMC05QS1GYS1mXSt8XHcrKTsvZztmdW5jdGlvbiB1KHMpe3JldHVybiBzLnJlcGxhY2UodCxrKX12YXIgdz0vJi9nO3ZhciB4PS8mKFteYS16I118Iyg/OlteMC05eF18eCg/OlteMC05YS1mXXwkKXwkKXwkKS9naTt2YXIgeT0vWzxdL2c7dmFyIHo9Lz4vZzt2YXIgQT0vXCIvZztmdW5jdGlvbiBCKHMpe3JldHVybignJytzKS5yZXBsYWNlKHcsJyZhbXA7JykucmVwbGFjZSh5LCcmbHQ7JykucmVwbGFjZSh6LCcmZ3Q7JykucmVwbGFjZShBLCcmIzM0OycpfWZ1bmN0aW9uIEMoZSl7cmV0dXJuIGUucmVwbGFjZSh4LCcmYW1wOyQxJykucmVwbGFjZSh5LCcmbHQ7JykucmVwbGFjZSh6LCcmZ3Q7Jyl9dmFyIEQ9bmV3IFJlZ0V4cCgnXlxccyonKycoW2Etel1bYS16LV0qKScrJyg/OicrKCdcXHMqKD0pXFxzKicrJygnKygnKFwiKVteXCJdKihcInwkKScrJ3wnKycoXCcpW15cJ10qKFwnfCQpJysnfCcrJyg/PVthLXpdW2Etei1dKlxccyo9KScrJ3wnKydbXlwiXCdcXHNdKicpKycpJykrJyk/JywnaScpO3ZhciBGPS9eKCNbMC05XSt8I3hbMC05YS1mXSt8XHcrKTsvaTt2YXIgRz0oJ2EsYicuc3BsaXQoLygsKS8pLmxlbmd0aD09PTMpO3ZhciBIPWEuZWZsYWdzLkNEQVRBfGEuZWZsYWdzLlJDREFUQTtmdW5jdGlvbiBJKGgpe3JldHVybiBmdW5jdGlvbihlLHApe3JldHVybiBLKGUsaCxwKX19dmFyIEo9e307ZnVuY3Rpb24gSyhlLGksbil7dmFyIGg9aTt2YXIgbSxwLHE7dmFyIHM9TihlKTt2YXIgdj17bm9Nb3JlR1Q6ZmFsc2Usbm9Nb3JlRW5kQ29tbWVudHM6ZmFsc2V9O00oaSxzLDAsdixuKX1mdW5jdGlvbiBMKGgscCxpLHMsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7TShoLHAsaSxzLGUpfX1mdW5jdGlvbiBNKGgsaSxuLHMscSl7dHJ5e2lmKGguc3RhcnREb2MmJm49PTApe2guc3RhcnREb2MocSl9dmFyIG0scCx2O2Zvcih2YXIgXz1uLGIxPWkubGVuZ3RoO188YjE7KXt2YXIgYzE9aVtfKytdO3ZhciBkMT1pW19dO3N3aXRjaChjMSl7Y2FzZScmJzppZihGLnRlc3QoZDEpKXtpZihoLnBjZGF0YSl7aC5wY2RhdGEoJyYnK2QxLHEsSixMKGgsaSxfLHMscSkpfV8rK31lbHNle2lmKGgucGNkYXRhKXtoLnBjZGF0YSgiJmFtcDsiLHEsSixMKGgsaSxfLHMscSkpfX1icmVhaztjYXNlJzxcLyc6aWYobT0vXihcdyspW15cJ1wiXSovLmV4ZWMoZDEpKXtpZihtWzBdLmxlbmd0aD09PWQxLmxlbmd0aCYmaVtfKzFdPT09Jz4nKXtfKz0yO3Y9bChtWzFdKTtpZihhLkVMRU1FTlRTLmhhc093blByb3BlcnR5KHYpKXtpZihoLmVuZFRhZyl7aC5lbmRUYWcodixxLEosTChoLGksXyxzLHEpKX19fWVsc2V7Xz1PKGksXyxoLHEsSixzKX19ZWxzZXtpZihoLnBjZGF0YSl7aC5wY2RhdGEoJyZsdDsvJyxxLEosTChoLGksXyxzLHEpKX19YnJlYWs7Y2FzZSc8JzppZihtPS9eKFx3KylccypcLz8vLmV4ZWMoZDEpKXtpZihtWzBdLmxlbmd0aD09PWQxLmxlbmd0aCYmaVtfKzFdPT09Jz4nKXtfKz0yO3Y9bChtWzFdKTtpZihhLkVMRU1FTlRTLmhhc093blByb3BlcnR5KHYpKXtpZihoLnN0YXJ0VGFnKXtoLnN0YXJ0VGFnKHYsW10scSxKLEwoaCxpLF8scyxxKSl9dmFyIGUxPWEuRUxFTUVOVFNbdl07aWYoZTEmSCl7dmFyIGYxPXtuYW1lOnYsbmV4dDpfLGVmbGFnczplMX07Xz1SKGksZjEsaCxxLEoscyl9fX1lbHNle189UChpLF8saCxxLEoscyl9fWVsc2V7aWYoaC5wY2RhdGEpe2gucGNkYXRhKCcmbHQ7JyxxLEosTChoLGksXyxzLHEpKX19YnJlYWs7Y2FzZSc8XCEtLSc6aWYoIXMubm9Nb3JlRW5kQ29tbWVudHMpe2ZvcihwPV8rMTtwPGIxO3ArKyl7aWYoaVtwXT09PSc+JyYmLy0tJC8udGVzdChpW3AtMV0pKXticmVha319aWYocDxiMSl7Xz1wKzF9ZWxzZXtzLm5vTW9yZUVuZENvbW1lbnRzPXRydWV9fWlmKHMubm9Nb3JlRW5kQ29tbWVudHMpe2lmKGgucGNkYXRhKXtoLnBjZGF0YSgnJmx0OyEtLScscSxKLEwoaCxpLF8scyxxKSl9fWJyZWFrO2Nhc2UnPFwhJzppZighL15cdy8udGVzdChkMSkpe2lmKGgucGNkYXRhKXtoLnBjZGF0YSgnJmx0OyEnLHEsSixMKGgsaSxfLHMscSkpfX1lbHNle2lmKCFzLm5vTW9yZUdUKXtmb3IocD1fKzE7cDxiMTtwKyspe2lmKGlbcF09PT0nPicpe2JyZWFrfX1pZihwPGIxKXtfPXArMX1lbHNle3Mubm9Nb3JlR1Q9dHJ1ZX19aWYocy5ub01vcmVHVCl7aWYoaC5wY2RhdGEpe2gucGNkYXRhKCcmbHQ7IScscSxKLEwoaCxpLF8scyxxKSl9fX1icmVhaztjYXNlJzw/JzppZighcy5ub01vcmVHVCl7Zm9yKHA9XysxO3A8YjE7cCsrKXtpZihpW3BdPT09Jz4nKXticmVha319aWYocDxiMSl7Xz1wKzF9ZWxzZXtzLm5vTW9yZUdUPXRydWV9fWlmKHMubm9Nb3JlR1Qpe2lmKGgucGNkYXRhKXtoLnBjZGF0YSgnJmx0Oz8nLHEsSixMKGgsaSxfLHMscSkpfX1icmVhaztjYXNlJz4nOmlmKGgucGNkYXRhKXtoLnBjZGF0YSgiJmd0OyIscSxKLEwoaCxpLF8scyxxKSl9YnJlYWs7Y2FzZScnOmJyZWFrO2RlZmF1bHQ6aWYoaC5wY2RhdGEpe2gucGNkYXRhKGMxLHEsSixMKGgsaSxfLHMscSkpfWJyZWFrfX1pZihoLmVuZERvYyl7aC5lbmREb2MocSl9fWNhdGNoKGUpe2lmKGUhPT1KKXt0aHJvdyBlfX19ZnVuY3Rpb24gTihzKXt2YXIgZT0vKDxcL3w8XCEtLXw8WyE/XXxbJjw+XSkvZztzKz0nJztpZihHKXtyZXR1cm4gcy5zcGxpdChlKX1lbHNle3ZhciBwPVtdO3ZhciBoPTA7dmFyIG07d2hpbGUoKG09ZS5leGVjKHMpKSE9PW51bGwpe3AucHVzaChzLnN1YnN0cmluZyhoLG0uaW5kZXgpKTtwLnB1c2gobVswXSk7aD1tLmluZGV4K21bMF0ubGVuZ3RofXAucHVzaChzLnN1YnN0cmluZyhoKSk7cmV0dXJuIHB9fWZ1bmN0aW9uIE8ocCxlLGgsaSxKLHMpe3ZhciBtPVMocCxlKTtpZighbSl7cmV0dXJuIHAubGVuZ3RofWlmKG0uZWZsYWdzIT09dm9pZCAwKXtpZihoLmVuZFRhZyl7aC5lbmRUYWcobS5uYW1lLGksSixMKGgscCxlLHMsaSkpfX1yZXR1cm4gbS5uZXh0fWZ1bmN0aW9uIFAocCxlLGgsaSxKLHMpe3ZhciBtPVMocCxlKTtpZighbSl7cmV0dXJuIHAubGVuZ3RofWlmKG0uZWZsYWdzIT09dm9pZCAwKXtpZihoLnN0YXJ0VGFnKXtoLnN0YXJ0VGFnKG0ubmFtZSxtLmF0dHJzLGksSixMKGgscCxtLm5leHQscyxpKSl9aWYobS5lZmxhZ3MmSCl7cmV0dXJuIFIocCxtLGgsaSxKLHMpfX1yZXR1cm4gbS5uZXh0fXZhciBRPXt9O2Z1bmN0aW9uIFIoZSxpLGgsbSxKLHMpe3ZhciBuPWUubGVuZ3RoO2lmKCFRLmhhc093blByb3BlcnR5KGkubmFtZSkpe1FbaS5uYW1lXT1uZXcgUmVnRXhwKCdeJytpLm5hbWUrJyg/OltcXHNcXC9dfCQpJywnaScpfXZhciBxPVFbaS5uYW1lXTt2YXIgdj1pLm5leHQ7dmFyIHA9aS5uZXh0KzE7Zm9yKDtwPG47cCsrKXtpZihlW3AtMV09PT0nPFwvJyYmcS50ZXN0KGVbcF0pKXticmVha319aWYocDxuKXtwLT0xfXZhciBfPWUuc2xpY2UodixwKS5qb2luKCcnKTtpZihpLmVmbGFncyZhLmVmbGFncy5DREFUQSl7aWYoaC5jZGF0YSl7aC5jZGF0YShfLG0sSixMKGgsZSxwLHMsbSkpfX1lbHNlIGlmKGkuZWZsYWdzJmEuZWZsYWdzLlJDREFUQSl7aWYoaC5yY2RhdGEpe2gucmNkYXRhKEMoXyksbSxKLEwoaCxlLHAscyxtKSl9fWVsc2V7dGhyb3cgbmV3IEVycm9yKCdidWcnKX1yZXR1cm4gcH1mdW5jdGlvbiBTKGUsaCl7dmFyIG09L14oXHcrKS8uZXhlYyhlW2hdKTt2YXIgaT17bmFtZTpsKG1bMV0pfTtpZihhLkVMRU1FTlRTLmhhc093blByb3BlcnR5KGkubmFtZSkpe2kuZWZsYWdzPWEuRUxFTUVOVFNbaS5uYW1lXX1lbHNle2kuZWZsYWdzPXZvaWQgMH12YXIgbj1lW2hdLnN1YnN0cihtWzBdLmxlbmd0aCk7dmFyIHA9aCsxO3ZhciBxPWUubGVuZ3RoO2Zvcig7cDxxO3ArKyl7aWYoZVtwXT09PSc+Jyl7YnJlYWt9bis9ZVtwXX1pZihxPD1wKXtyZXR1cm4gdm9pZCAwfXZhciBzPVtdO3doaWxlKG4hPT0nJyl7bT1ELmV4ZWMobik7aWYoIW0pe249bi5yZXBsYWNlKC9eW1xzXFNdW15hLXpcc10qLywnJyl9ZWxzZSBpZigobVs0XSYmIW1bNV0pfHwobVs2XSYmIW1bN10pKXt2YXIgdj1tWzRdfHxtWzZdO3ZhciBfPWZhbHNlO3ZhciBiMT1bbixlW3ArK11dO2Zvcig7cDxxO3ArKyl7aWYoXyl7aWYoZVtwXT09PSc+Jyl7YnJlYWt9fWVsc2UgaWYoMDw9ZVtwXS5pbmRleE9mKHYpKXtfPXRydWV9YjEucHVzaChlW3BdKX1pZihxPD1wKXticmVha31uPWIxLmpvaW4oJycpO2NvbnRpbnVlfWVsc2V7dmFyIGMxPWwobVsxXSk7dmFyIGQxPW1bMl0/VChtWzNdKTpjMTtzLnB1c2goYzEsZDEpO249bi5zdWJzdHIobVswXS5sZW5ndGgpfX1pLmF0dHJzPXM7aS5uZXh0PXArMTtyZXR1cm4gaX1mdW5jdGlvbiBUKHYpe3ZhciBxPXYuY2hhckNvZGVBdCgwKTtpZihxPT09MHgyMnx8cT09PTB4Mjcpe3Y9di5zdWJzdHIoMSx2Lmxlbmd0aC0yKX1yZXR1cm4gdShyKHYpKX1mdW5jdGlvbiBVKGUpe3ZhciBzO3ZhciBoO3ZhciBtPWZ1bmN0aW9uKGksbil7aWYoIWgpe24ucHVzaChpKX19O3JldHVybiBJKHtzdGFydERvYzpmdW5jdGlvbihfKXtzPVtdO2g9ZmFsc2V9LHN0YXJ0VGFnOmZ1bmN0aW9uKHAscSx2KXtpZihoKXtyZXR1cm59aWYoIWEuRUxFTUVOVFMuaGFzT3duUHJvcGVydHkocCkpe3JldHVybn12YXIgXz1hLkVMRU1FTlRTW3BdO2lmKF8mYS5lZmxhZ3MuRk9MREFCTEUpe3JldHVybn1xPWUocCxxKTtpZighcSl7aD0hKF8mYS5lZmxhZ3MuRU1QVFkpO3JldHVybn1pZighKF8mYS5lZmxhZ3MuRU1QVFkpKXtzLnB1c2gocCl9di5wdXNoKCc8JyxwKTtmb3IodmFyIGk9MCxuPXEubGVuZ3RoO2k8bjtpKz0yKXt2YXIgYjE9cVtpXSxjMT1xW2krMV07aWYoYzEhPT1udWxsJiZjMSE9PXZvaWQgMCl7di5wdXNoKCcgJyxiMSwnPSInLEIoYzEpLCciJyl9fXYucHVzaCgnPicpfSxlbmRUYWc6ZnVuY3Rpb24obixwKXtpZihoKXtoPWZhbHNlO3JldHVybn1pZighYS5FTEVNRU5UUy5oYXNPd25Qcm9wZXJ0eShuKSl7cmV0dXJufXZhciBxPWEuRUxFTUVOVFNbbl07aWYoIShxJihhLmVmbGFncy5FTVBUWXxhLmVmbGFncy5GT0xEQUJMRSkpKXt2YXIgdjtpZihxJmEuZWZsYWdzLk9QVElPTkFMX0VORFRBRyl7Zm9yKHY9cy5sZW5ndGg7LS12Pj0wOyl7dmFyIF89c1t2XTtpZihfPT09bil7YnJlYWt9aWYoIShhLkVMRU1FTlRTW19dJmEuZWZsYWdzLk9QVElPTkFMX0VORFRBRykpe3JldHVybn19fWVsc2V7Zm9yKHY9cy5sZW5ndGg7LS12Pj0wOyl7aWYoc1t2XT09PW4pe2JyZWFrfX19aWYodjwwKXtyZXR1cm59Zm9yKHZhciBpPXMubGVuZ3RoOy0taT52Oyl7dmFyIF89c1tpXTtpZighKGEuRUxFTUVOVFNbX10mYS5lZmxhZ3MuT1BUSU9OQUxfRU5EVEFHKSl7cC5wdXNoKCc8XC8nLF8sJz4nKX19cy5sZW5ndGg9djtwLnB1c2goJzxcLycsbiwnPicpfX0scGNkYXRhOm0scmNkYXRhOm0sY2RhdGE6bSxlbmREb2M6ZnVuY3Rpb24oaSl7Zm9yKDtzLmxlbmd0aDtzLmxlbmd0aC0tKXtpLnB1c2goJzxcLycsc1tzLmxlbmd0aC0xXSwnPicpfX19KX12YXIgVj1uZXcgUmVnRXhwKCdeJysnKD86JysnKFteOlwvPyMgXSspJysnOik/Jyk7dmFyIFc9L14oPzpodHRwcz98bWFpbHRvKSQvaTtmdW5jdGlvbiBYKGUsbil7aWYoIW4pe3JldHVybiBudWxsfXZhciBwPSgnJytlKS5tYXRjaChWKTtpZihwJiYoIXBbMV18fFcudGVzdChwWzFdKSkpe3JldHVybiBuKGUpfWVsc2V7cmV0dXJuIG51bGx9fWZ1bmN0aW9uIFkoZSxoLG0sbil7Zm9yKHZhciBpPTA7aTxoLmxlbmd0aDtpKz0yKXt2YXIgcD1oW2ldO3ZhciB2PWhbaSsxXTt2YXIgcT1udWxsLHM7aWYoKHM9ZSsnOjonK3AsYS5BVFRSSUJTLmhhc093blByb3BlcnR5KHMpKXx8KHM9Jyo6OicrcCxhLkFUVFJJQlMuaGFzT3duUHJvcGVydHkocykpKXtxPWEuQVRUUklCU1tzXX1pZihxIT09bnVsbCl7c3dpdGNoKHEpe2Nhc2UgYS5hdHlwZS5OT05FOmJyZWFrO2Nhc2UgYS5hdHlwZS5TQ1JJUFQ6dj1udWxsO2JyZWFrO2Nhc2UgYS5hdHlwZS5TVFlMRTppZigndW5kZWZpbmVkJz09PXR5cGVvZiBiKXt2PW51bGw7YnJlYWt9dmFyIF89W107Yih2LHtkZWNsYXJhdGlvbjpmdW5jdGlvbihiMSxjMSl7dmFyIGQxPWIxLnRvTG93ZXJDYXNlKCk7dmFyIGUxPWRbZDFdO2lmKCFlMSl7cmV0dXJufWMoZDEsZTEsYzEsbSk7Xy5wdXNoKGIxKyc6ICcrYzEuam9pbignICcpKX19KTt2PV8ubGVuZ3RoPjA/Xy5qb2luKCcgOyAnKTpudWxsO2JyZWFrO2Nhc2UgYS5hdHlwZS5JRDpjYXNlIGEuYXR5cGUuSURSRUY6Y2FzZSBhLmF0eXBlLklEUkVGUzpjYXNlIGEuYXR5cGUuR0xPQkFMX05BTUU6Y2FzZSBhLmF0eXBlLkxPQ0FMX05BTUU6Y2FzZSBhLmF0eXBlLkNMQVNTRVM6dj1uP24odik6djticmVhaztjYXNlIGEuYXR5cGUuVVJJOnY9WCh2LG0pO2JyZWFrO2Nhc2UgYS5hdHlwZS5VUklfRlJBR01FTlQ6aWYodiYmJyMnPT09di5jaGFyQXQoMCkpe3Y9di5zdWJzdHJpbmcoMSk7dj1uP24odik6djtpZih2IT09bnVsbCYmdiE9PXZvaWQgMCl7dj0nIycrdn19ZWxzZXt2PW51bGx9YnJlYWs7ZGVmYXVsdDp2PW51bGw7YnJlYWt9fWVsc2V7dj1udWxsfWhbaSsxXT12fXJldHVybiBofWZ1bmN0aW9uIFooZSxoKXtyZXR1cm4gZnVuY3Rpb24oaSxtKXtpZighKGEuRUxFTUVOVFNbaV0mYS5lZmxhZ3MuVU5TQUZFKSl7cmV0dXJuIFkoaSxtLGUsaCl9fX1mdW5jdGlvbiAkKGksZSl7dmFyIGg9W107VShlKShpLGgpO3JldHVybiBoLmpvaW4oJycpfWZ1bmN0aW9uIGExKGksZSxoKXt2YXIgbT1aKGUsaCk7cmV0dXJuICQoaSxtKX1yZXR1cm57ZXNjYXBlQXR0cmliOkIsbWFrZUh0bWxTYW5pdGl6ZXI6VSxtYWtlU2F4UGFyc2VyOkksbWFrZVRhZ1BvbGljeTpaLG5vcm1hbGl6ZVJDRGF0YTpDLHNhbml0aXplOmExLHNhbml0aXplQXR0cmliczpZLHNhbml0aXplV2l0aFBvbGljeTokLHVuZXNjYXBlRW50aXRpZXM6dX19KShodG1sNCk7dmFyIGh0bWxfc2FuaXRpemU9aHRtbC5zYW5pdGl6ZTtpZih0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcpe3dpbmRvd1snaHRtbCddPWh0bWw7d2luZG93WydodG1sX3Nhbml0aXplJ109aHRtbF9zYW5pdGl6ZX1qUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS50aGlyZHBhcnR5LmNhamEtaHRtbC1zYW5pdGl6ZXInKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5hY3QnKSl7Ci8qIQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5hY3QnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLmFjdCIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjtpZih0eXBlb2Ygd2luZG93LmpRdWVyeS5zYXAuYWN0PT09Im9iamVjdCJ8fHR5cGVvZiB3aW5kb3cualF1ZXJ5LnNhcC5hY3Q9PT0iZnVuY3Rpb24iKXtyZXR1cm59dmFyIF89e30sYT10cnVlLGI9bnVsbCxjPTEwMDAwLGQ9ISF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcixlPVtdLGY9W10sZz1mYWxzZSxoPW51bGw7ZnVuY3Rpb24gaigpe2I9bnVsbDtpZihnKXtrKCk7cmV0dXJufWE9ZmFsc2U7aC5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCx7Y2hpbGRMaXN0OnRydWUsYXR0cmlidXRlczp0cnVlLHN1YnRyZWU6dHJ1ZSxjaGFyYWN0ZXJEYXRhOnRydWV9KX07ZnVuY3Rpb24gaygpe2lmKCFhKXthPXRydWU7bChlKTtoLmRpc2Nvbm5lY3QoKX1pZihiKXtnPXRydWV9ZWxzZXtiPXNldFRpbWVvdXQoaixjKTtnPWZhbHNlfX07ZnVuY3Rpb24gbChMKXtpZihMLmxlbmd0aD09MCl7cmV0dXJufXZhciBtPUwuc2xpY2UoKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIEk7Zm9yKHZhciBpPTAsbj1tLmxlbmd0aDtpPG47aSsrKXtJPW1baV07SS5mRnVuY3Rpb24uY2FsbChJLm9MaXN0ZW5lcnx8d2luZG93KX19LDApfTtfLmF0dGFjaEFjdGl2YXRlPWZ1bmN0aW9uKEYsTCl7ZS5wdXNoKHtvTGlzdGVuZXI6TCxmRnVuY3Rpb246Rn0pfTtfLmRldGFjaEFjdGl2YXRlPWZ1bmN0aW9uKEYsTCl7Zm9yKHZhciBpPTAsbT1lLmxlbmd0aDtpPG07aSsrKXtpZihlW2ldLmZGdW5jdGlvbj09PUYmJmVbaV0ub0xpc3RlbmVyPT09TCl7ZS5zcGxpY2UoaSwxKTticmVha319fTtfLmlzQWN0aXZlPSFkP2Z1bmN0aW9uKCl7cmV0dXJuIHRydWV9OmZ1bmN0aW9uKCl7cmV0dXJuIGF9O18ucmVmcmVzaD0hZD9mdW5jdGlvbigpe306aztpZihkKXt2YXIgRT1bInJlc2l6ZSIsIm9yaWVudGF0aW9uY2hhbmdlIiwibW91c2Vtb3ZlIiwibW91c2Vkb3duIiwibW91c2V1cCIsInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIiwicGFzdGUiLCJjdXQiLCJrZXlkb3duIiwia2V5dXAiLCJET01Nb3VzZVNjcm9sbCIsIm1vdXNld2hlZWwiXTtmb3IodmFyIGk9MDtpPEUubGVuZ3RoO2krKyl7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoRVtpXSxfLnJlZnJlc2gsdHJ1ZSl9aWYod2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIpe2g9bmV3IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyKF8ucmVmcmVzaCl9ZWxzZSBpZih3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcil7aD1uZXcgd2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIoXy5yZWZyZXNoKX1lbHNle2g9e29ic2VydmU6ZnVuY3Rpb24oKXtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NU3VidHJlZU1vZGlmaWVkIixfLnJlZnJlc2gpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTVN1YnRyZWVNb2RpZmllZCIsXy5yZWZyZXNoKX19fWsoKX1xLnNhcC5hY3Q9XztyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLmRvbScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuZG9tJyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5kb20iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvRGV2aWNlJ10sZnVuY3Rpb24ocSxEKXsidXNlIHN0cmljdCI7dmFyIGQ9ZnVuY3Rpb24oSSx3KXtpZighdyl7dz13aW5kb3d9aWYoIUl8fEk9PSIiKXtyZXR1cm4gbnVsbH12YXIgbz13LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEkpO2lmKG8mJm8uaWQ9PUkpe3JldHVybiBvfXZhciByPXcuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoSSk7Zm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspe289cltpXTtpZihvJiZvLmlkPT1JKXtyZXR1cm4gb319cmV0dXJuIG51bGx9O3Euc2FwLmRvbUJ5SWQ9ISFELmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJkQuYnJvd3Nlci52ZXJzaW9uPDg/ZDpmdW5jdGlvbiBkb21CeUlkKGksdyl7cmV0dXJuIGk/KHd8fHdpbmRvdykuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaSk6bnVsbH07cS5zYXAuYnlJZD1mdW5jdGlvbiBieUlkKGksYyl7dmFyIGU9IiI7aWYoaSl7ZT0iIyIraS5yZXBsYWNlKC8oOnxcLikvZywnXFwkMScpfXJldHVybiBxKGUsYyl9O3Euc2FwLmZvY3VzPWZ1bmN0aW9uIGZvY3VzKG8pe2lmKCFvKXtyZXR1cm59dHJ5e28uZm9jdXMoKX1jYXRjaChlKXt2YXIgaT0obyYmby5pZCk/IiAoSUQ6ICciK28uaWQrIicpIjoiIjtxLnNhcC5sb2cud2FybmluZygiRXJyb3Igd2hlbiB0cnlpbmcgdG8gZm9jdXMgYSBET00gZWxlbWVudCIraSsiOiAiK2UubWVzc2FnZSk7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfTtxLmZuLmN1cnNvclBvcz1mdW5jdGlvbiBjdXJzb3JQb3MocCl7dmFyIGw9YXJndW1lbnRzLmxlbmd0aCx0LEwsVCxzO1Q9dGhpcy5wcm9wKCJ0YWdOYW1lIik7cz10aGlzLnByb3AoInR5cGUiKTtpZih0aGlzLmxlbmd0aD09PTEmJigoVD09IklOUFVUIiYmKHM9PSJ0ZXh0Inx8cz09InBhc3N3b3JkInx8cz09InNlYXJjaCIpKXx8VD09IlRFWFRBUkVBIikpe3ZhciBvPXRoaXMuZ2V0KDApO2lmKGw+MCl7aWYodHlwZW9mKG8uc2VsZWN0aW9uU3RhcnQpPT0ibnVtYmVyIil7by5mb2N1cygpO28uc2VsZWN0aW9uU3RhcnQ9cDtvLnNlbGVjdGlvbkVuZD1wfWVsc2UgaWYoby5jcmVhdGVUZXh0UmFuZ2Upe3Q9by5jcmVhdGVUZXh0UmFuZ2UoKTt2YXIgbT1vLnZhbHVlLmxlbmd0aDtpZihwPDB8fHA+bSl7cD1tfWlmKHQpe3QuY29sbGFwc2UoKTt0Lm1vdmVFbmQoImNoYXJhY3RlciIscCk7dC5tb3ZlU3RhcnQoImNoYXJhY3RlciIscCk7dC5zZWxlY3QoKX19cmV0dXJuIHRoaXN9ZWxzZXtpZih0eXBlb2Yoby5zZWxlY3Rpb25TdGFydCk9PSJudW1iZXIiKXtyZXR1cm4gby5zZWxlY3Rpb25TdGFydH1lbHNlIGlmKG8uY3JlYXRlVGV4dFJhbmdlKXt0PXdpbmRvdy5kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTt2YXIgYz10LmR1cGxpY2F0ZSgpO2lmKG8udGFnTmFtZT09IlRFWFRBUkVBIil7Yy5tb3ZlVG9FbGVtZW50VGV4dChvKTt2YXIgQz1jLmR1cGxpY2F0ZSgpO0w9Yy50ZXh0Lmxlbmd0aDtDLm1vdmVTdGFydCgiY2hhcmFjdGVyIixMKTtpZihDLmluUmFuZ2UodCkpe1M9TH1lbHNle3ZhciBpPUw7dmFyIFM9MDt3aGlsZShMPjEpe2k9TWF0aC5yb3VuZChMLzIpO1M9UytpO0M9Yy5kdXBsaWNhdGUoKTtDLm1vdmVTdGFydCgiY2hhcmFjdGVyIixTKTtpZihDLmluUmFuZ2UodCkpe0w9TC1pfWVsc2V7Uz1TLWk7TD1pfX19cmV0dXJuIFN9ZWxzZSBpZihjLnBhcmVudEVsZW1lbnQoKT09PW8pe2MuY29sbGFwc2UoKTt2YXIgTD1vLnZhbHVlLmxlbmd0aDtjLm1vdmVTdGFydCgnY2hhcmFjdGVyJywtTCk7cmV0dXJuIGMudGV4dC5sZW5ndGh9fXJldHVybi0xfX1lbHNle3JldHVybiB0aGlzfX07cS5mbi5zZWxlY3RUZXh0PWZ1bmN0aW9uIHNlbGVjdFRleHQocyxFKXt2YXIgbz10aGlzLmdldCgwKTtpZighbyl7cmV0dXJuIHRoaXN9dHJ5e2lmKHR5cGVvZihvLnNlbGVjdGlvblN0YXJ0KT09PSJudW1iZXIiKXtpZihzPDApe3M9MH1pZihFPm8udmFsdWUubGVuZ3RoKXtFPW8udmFsdWUubGVuZ3RofWlmKCFFfHxzPkUpe3M9MDtFPTB9by5zZWxlY3Rpb25TdGFydD1zO28uc2VsZWN0aW9uRW5kPUV9ZWxzZSBpZihvLmNyZWF0ZVRleHRSYW5nZSl7dmFyIHQ9by5jcmVhdGVUZXh0UmFuZ2UoKTt0LmNvbGxhcHNlKCk7dC5tb3ZlU3RhcnQoJ2NoYXJhY3Rlcicscyk7dC5tb3ZlRW5kKCdjaGFyYWN0ZXInLEUtcyk7dC5zZWxlY3QoKX19Y2F0Y2goZSl7fXJldHVybiB0aGlzfTtxLmZuLm91dGVySFRNTD1mdW5jdGlvbiBvdXRlckhUTUwoKXt2YXIgbz10aGlzLmdldCgwKTtpZihvJiZvLm91dGVySFRNTCl7cmV0dXJuIHEudHJpbShvLm91dGVySFRNTCl9ZWxzZXt2YXIgYT10aGlzWzBdP3RoaXNbMF0ub3duZXJEb2N1bWVudDpkb2N1bWVudDt2YXIgYj1hLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2IuYXBwZW5kQ2hpbGQoby5jbG9uZU5vZGUodHJ1ZSkpO3JldHVybiBiLmlubmVySFRNTH19O3Euc2FwLmNvbnRhaW5zT3JFcXVhbHM9ZnVuY3Rpb24gY29udGFpbnNPckVxdWFscyhvLGEpe2lmKGEmJm8mJmEhPWRvY3VtZW50JiZhIT13aW5kb3cpe3JldHVybihvPT09YSl8fHEuY29udGFpbnMobyxhKX1yZXR1cm4gZmFsc2V9O3EuZm4ucmVjdD1mdW5jdGlvbiByZWN0KCl7dmFyIG89dGhpcy5nZXQoMCk7aWYobyl7aWYoby5nZXRCb3VuZGluZ0NsaWVudFJlY3Qpe3ZhciBjPW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dmFyIHI9e3RvcDpjLnRvcCxsZWZ0OmMubGVmdCx3aWR0aDpjLnJpZ2h0LWMubGVmdCxoZWlnaHQ6Yy5ib3R0b20tYy50b3B9O3ZhciB3PXEuc2FwLm93bmVyV2luZG93KG8pO3IubGVmdCs9cSh3KS5zY3JvbGxMZWZ0KCk7ci50b3ArPXEodykuc2Nyb2xsVG9wKCk7cmV0dXJuIHJ9ZWxzZXtyZXR1cm57dG9wOjEwLGxlZnQ6MTAsd2lkdGg6by5vZmZzZXRXaWR0aCxoZWlnaHQ6by5vZmZzZXRXaWR0aH19fXJldHVybiBudWxsfTtxLmZuLnJlY3RDb250YWlucz1mdW5jdGlvbiByZWN0Q29udGFpbnMocCxQKXt2YXIgcj10aGlzLnJlY3QoKTtpZihyKXtyZXR1cm4gcD49ci5sZWZ0JiZwPD1yLmxlZnQrci53aWR0aCYmUD49ci50b3AmJlA8PXIudG9wK3IuaGVpZ2h0fXJldHVybiBmYWxzZX07cS5mbi5oYXNUYWJJbmRleD1mdW5jdGlvbiBoYXNUYWJJbmRleCgpe3ZhciB0PXRoaXMucHJvcCgidGFiSW5kZXgiKTtpZih0aGlzLmF0dHIoImRpc2FibGVkIikmJiF0aGlzLmF0dHIoInRhYmluZGV4Iikpe3Q9LTF9cmV0dXJuIWlzTmFOKHQpJiZ0Pj0wfTtxLmZuLmZpcnN0Rm9jdXNhYmxlRG9tUmVmPWZ1bmN0aW9uIGZpcnN0Rm9jdXNhYmxlRG9tUmVmKCl7dmFyIGM9dGhpcy5nZXQoMCk7dmFyIGE9ZnVuY3Rpb24oaSl7cmV0dXJuIHEodGhpcykuY3NzKCJ2aXNpYmlsaXR5Iik9PSJoaWRkZW4ifTtpZighY3x8cShjKS5pcygnOmhpZGRlbicpfHxxKGMpLmZpbHRlcihhKS5sZW5ndGg9PTEpe3JldHVybiBudWxsfXZhciBDPWMuZmlyc3RDaGlsZCxvPW51bGw7d2hpbGUoQyl7aWYoQy5ub2RlVHlwZT09MSYmcShDKS5pcygnOnZpc2libGUnKSl7aWYocShDKS5oYXNUYWJJbmRleCgpKXtyZXR1cm4gQ31pZihDLmNoaWxkTm9kZXMpe289cShDKS5maXJzdEZvY3VzYWJsZURvbVJlZigpO2lmKG8pe3JldHVybiBvfX19Qz1DLm5leHRTaWJsaW5nfXJldHVybiBudWxsfTtxLmZuLmxhc3RGb2N1c2FibGVEb21SZWY9ZnVuY3Rpb24gbGFzdEZvY3VzYWJsZURvbVJlZigpe3ZhciBjPXRoaXMuZ2V0KDApO3ZhciBhPWZ1bmN0aW9uKGkpe3JldHVybiBxKHRoaXMpLmNzcygidmlzaWJpbGl0eSIpPT0iaGlkZGVuIn07aWYoIWN8fHEoYykuaXMoJzpoaWRkZW4nKXx8cShjKS5maWx0ZXIoYSkubGVuZ3RoPT0xKXtyZXR1cm4gbnVsbH12YXIgQz1jLmxhc3RDaGlsZCxvPW51bGw7d2hpbGUoQyl7aWYoQy5ub2RlVHlwZT09MSYmcShDKS5pcygnOnZpc2libGUnKSl7aWYoQy5jaGlsZE5vZGVzKXtvPXEoQykubGFzdEZvY3VzYWJsZURvbVJlZigpO2lmKG8pe3JldHVybiBvfX1pZihxKEMpLmhhc1RhYkluZGV4KCkpe3JldHVybiBDfX1DPUMucHJldmlvdXNTaWJsaW5nfXJldHVybiBudWxsfTtxLmZuLnNjcm9sbExlZnRSVEw9ZnVuY3Rpb24gc2Nyb2xsTGVmdFJUTChwKXt2YXIgbz10aGlzLmdldCgwKTtpZihvKXtpZihwPT09dW5kZWZpbmVkKXtpZighIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7cmV0dXJuIG8uc2Nyb2xsV2lkdGgtby5zY3JvbGxMZWZ0LW8uY2xpZW50V2lkdGh9ZWxzZSBpZighIUQuYnJvd3Nlci53ZWJraXQpe3JldHVybiBvLnNjcm9sbExlZnR9ZWxzZSBpZighIUQuYnJvd3Nlci5maXJlZm94KXtyZXR1cm4gby5zY3JvbGxXaWR0aCtvLnNjcm9sbExlZnQtby5jbGllbnRXaWR0aH1lbHNle3JldHVybiBvLnNjcm9sbExlZnR9fWVsc2V7by5zY3JvbGxMZWZ0PXEuc2FwLmRlbm9ybWFsaXplU2Nyb2xsTGVmdFJUTChwLG8pO3JldHVybiB0aGlzfX19O3EuZm4uc2Nyb2xsUmlnaHRSVEw9ZnVuY3Rpb24gc2Nyb2xsUmlnaHRSVEwoKXt2YXIgbz10aGlzLmdldCgwKTtpZihvKXtpZighIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7cmV0dXJuIG8uc2Nyb2xsTGVmdH1lbHNlIGlmKCEhRC5icm93c2VyLndlYmtpdCl7cmV0dXJuIG8uc2Nyb2xsV2lkdGgtby5zY3JvbGxMZWZ0LW8uY2xpZW50V2lkdGh9ZWxzZSBpZighIUQuYnJvd3Nlci5maXJlZm94KXtyZXR1cm4oLW8uc2Nyb2xsTGVmdCl9ZWxzZXtyZXR1cm4gby5zY3JvbGxMZWZ0fX19O3Euc2FwLmRlbm9ybWFsaXplU2Nyb2xsTGVmdFJUTD1mdW5jdGlvbihuLG8pe2lmKG8pe2lmKCEhRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtyZXR1cm4gby5zY3JvbGxXaWR0aC1vLmNsaWVudFdpZHRoLW59ZWxzZSBpZighIUQuYnJvd3Nlci53ZWJraXQpe3JldHVybiBufWVsc2UgaWYoISFELmJyb3dzZXIuZmlyZWZveCl7cmV0dXJuIG8uY2xpZW50V2lkdGgrbi1vLnNjcm9sbFdpZHRofWVsc2V7cmV0dXJuIG59fX07Ci8qIQoJICogVGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgYXJlIHRha2VuIGZyb20galF1ZXJ5IFVJIDEuOC4xNyBidXQgbW9kaWZpZWQKCSAqCgkgKiBDb3B5cmlnaHQgMjAxMSwgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpCgkgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4KCSAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKCSAqCgkgKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJCgkgKi8KZnVuY3Rpb24gdihlKXt2YXIgbz1xKGUpLm9mZnNldFBhcmVudCgpO3ZhciBPPWZhbHNlO3ZhciAkPXEoZSkucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpe2lmKHRoaXM9PT1vKXtPPXRydWV9cmV0dXJuIE99KTtyZXR1cm4hcShlKS5hZGQoJCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHEuY3NzKHRoaXMsInZpc2liaWxpdHkiKT09PSJoaWRkZW4ifHxxLmV4cHIuZmlsdGVycy5oaWRkZW4odGhpcyl9KS5sZW5ndGh9ZnVuY3Rpb24gZihlLGkpe3ZhciBuPWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZigiYXJlYSI9PT1uKXt2YXIgbT1lLnBhcmVudE5vZGUsYT1tLm5hbWUsYjtpZighZS5ocmVmfHwhYXx8bS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09Im1hcCIpe3JldHVybiBmYWxzZX1iPXEoImltZ1t1c2VtYXA9IyIrYSsiXSIpWzBdO3JldHVybiEhYiYmdihiKX1yZXR1cm4oL2lucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0Ly50ZXN0KG4pPyFlLmRpc2FibGVkOiJhIj09bj9lLmhyZWZ8fGk6aSkmJnYoZSl9aWYoIXEuZXhwclsiOiJdLmZvY3VzYWJsZSl7Ci8qIQoJCSAqIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb24gaXMgdGFrZW4gZnJvbSBqUXVlcnkgVUkgMS44LjE3CgkJICoKCQkgKiBDb3B5cmlnaHQgMjAxMSwgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpCgkJICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuCgkJICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQoJCSAqCgkJICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSQoJCSAqCgkJICogQnV0IHNpbmNlIHZpc2libGUgaXMgbW9kaWZpZWQsIGZvY3VzYWJsZSBpcyBkaWZmZXJlbnQgdG9vIHRoZSBqUXVlcnkgVUkgdmVyc2lvbiB0b28uCgkJICovCnEuZXh0ZW5kKHEuZXhwclsiOiJdLHtmb2N1c2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGYoZSwhaXNOYU4ocS5hdHRyKGUsInRhYmluZGV4IikpKX19KX1pZighcS5leHByWyI6Il0uc2FwVGFiYmFibGUpewovKiEKCQkgKiBUaGUgZm9sbG93aW5nIGZ1bmN0aW9uIGlzIHRha2VuIGZyb20KCQkgKiBqUXVlcnkgVUkgQ29yZSAxLjEwLjQKCQkgKiBodHRwOi8vanF1ZXJ5dWkuY29tCgkJICoKCQkgKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCgkJICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgoJCSAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKCQkgKgoJCSAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2NhdGVnb3J5L3VpLWNvcmUvCgkJICovCnEuZXh0ZW5kKHEuZXhwclsiOiJdLHtzYXBUYWJiYWJsZTpmdW5jdGlvbihlKXt2YXIgdD1xLmF0dHIoZSwidGFiaW5kZXgiKSxpPWlzTmFOKHQpO3JldHVybihpfHx0Pj0wKSYmZihlLCFpKX19KX1pZighcS5leHByWyI6Il0uc2FwRm9jdXNhYmxlKXtxLmV4dGVuZChxLmV4cHJbIjoiXSx7c2FwRm9jdXNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBmKGUsIWlzTmFOKHEuYXR0cihlLCJ0YWJpbmRleCIpKSl9fSl9aWYoIXEuZm4uekluZGV4KXtxLmZuLnpJbmRleD1mdW5jdGlvbih6KXtpZih6IT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5jc3MoInpJbmRleCIseil9aWYodGhpcy5sZW5ndGgpe3ZhciBlPXEodGhpc1swXSkscCxhO3doaWxlKGUubGVuZ3RoJiZlWzBdIT09ZG9jdW1lbnQpe3A9ZS5jc3MoInBvc2l0aW9uIik7aWYocD09PSJhYnNvbHV0ZSJ8fHA9PT0icmVsYXRpdmUifHxwPT09ImZpeGVkIil7YT1wYXJzZUludChlLmNzcygiekluZGV4IiksMTApO2lmKCFpc05hTihhKSYmYSE9PTApe3JldHVybiBhfX1lPWUucGFyZW50KCl9fXJldHVybiAwfX1xLmZuLnBhcmVudEJ5QXR0cmlidXRlPWZ1bmN0aW9uIHBhcmVudEJ5QXR0cmlidXRlKGEsVil7aWYodGhpcy5sZW5ndGg+MCl7aWYoVil7cmV0dXJuIHRoaXMuZmlyc3QoKS5wYXJlbnRzKCJbIithKyI9JyIrVisiJ10iKS5nZXQoMCl9ZWxzZXtyZXR1cm4gdGhpcy5maXJzdCgpLnBhcmVudHMoIlsiK2ErIl0iKS5nZXQoMCl9fX07cS5zYXAub3duZXJXaW5kb3c9ZnVuY3Rpb24gb3duZXJXaW5kb3cobyl7aWYoby5vd25lckRvY3VtZW50LnBhcmVudFdpbmRvdyl7cmV0dXJuIG8ub3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3d9cmV0dXJuIG8ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlld307dmFyIF89e307cS5zYXAuc2Nyb2xsYmFyU2l6ZT1mdW5jdGlvbihjLEYpe2lmKHR5cGVvZiBjPT09ImJvb2xlYW4iKXtGPWM7Yz1udWxsfXZhciBrPWN8fCIjREVGQVVMVCI7aWYoRil7aWYoYyl7ZGVsZXRlIF9bY119ZWxzZXtfPXt9fX1pZihfW2tdKXtyZXR1cm4gX1trXX1pZighZG9jdW1lbnQuYm9keSl7cmV0dXJue3dpZHRoOjAsaGVpZ2h0OjB9fXZhciBhPXEoIjxESVYvPiIpLmNzcygidmlzaWJpbGl0eSIsImhpZGRlbiIpLmNzcygiaGVpZ2h0IiwiMCIpLmNzcygid2lkdGgiLCIwIikuY3NzKCJvdmVyZmxvdyIsImhpZGRlbiIpO2lmKGMpe2EuYWRkQ2xhc3MoYyl9YS5wcmVwZW5kVG8oZG9jdW1lbnQuYm9keSk7dmFyICQ9cSgiPGRpdiBzdHlsZT1cInZpc2liaWxpdHk6dmlzaWJsZTtwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MTAwcHg7d2lkdGg6MTAwcHg7b3ZlcmZsb3c6c2Nyb2xsO29wYWNpdHk6MDtcIj48L2Rpdj4iKTthLmFwcGVuZCgkKTt2YXIgbz0kLmdldCgwKTt2YXIgdz1vLm9mZnNldFdpZHRoLW8uc2Nyb2xsV2lkdGg7dmFyIGg9by5vZmZzZXRIZWlnaHQtby5zY3JvbGxIZWlnaHQ7YS5yZW1vdmUoKTtpZih3PT09MHx8aD09PTApe3JldHVybnt3aWR0aDp3LGhlaWdodDpofX1fW2tdPXt3aWR0aDp3LGhlaWdodDpofTtyZXR1cm4gX1trXX07cS5zYXAuc3luY1N0eWxlQ2xhc3M9ZnVuY3Rpb24ocyxTLGEpe2lmKCFzKXJldHVybiBhO2lmKFMgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Db250cm9sKXtTPVMuJCgpfWVsc2UgaWYodHlwZW9mIFM9PT0ic3RyaW5nIil7Uz1xLnNhcC5ieUlkKFMpfWVsc2UgaWYoIShTIGluc3RhbmNlb2YgcSkpe3JldHVybiBhfXZhciBjPSEhUy5jbG9zZXN0KCIuIitzKS5sZW5ndGg7aWYoYSBpbnN0YW5jZW9mIHEpe2EudG9nZ2xlQ2xhc3MocyxjKX1lbHNlIGlmKGEgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Db250cm9sKXthLnRvZ2dsZVN0eWxlQ2xhc3MocyxjKX1lbHNle31yZXR1cm4gYX07cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5lbmNvZGVyJykpewovKiEKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuZW5jb2RlcicpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuZW5jb2RlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBoKGksbCl7dmFyIGc9aS50b1N0cmluZygxNik7aWYobCl7d2hpbGUobD5nLmxlbmd0aCl7Zz0iMCIrZ319cmV0dXJuIGd9dmFyIHI9L1tceDAwLVx4MmJceDJmXHgzYS1ceDQwXHg1Yi1ceDVlXHg2MFx4N2ItXHhmZlx1MjAyOFx1MjAyOV0vZyxhPS9bXHgwMC1ceDA4XHgwYlx4MGNceDBlLVx4MWZceDdmLVx4OWZdLyxIPXsiPCI6IiZsdDsiLCI+IjoiJmd0OyIsIiYiOiImYW1wOyIsIlwiIjoiJnF1b3Q7In07dmFyIGY9ZnVuY3Rpb24oZyl7dmFyIEU9SFtnXTtpZighRSl7aWYoYS50ZXN0KGcpKXtFPSImI3hmZmZkOyJ9ZWxzZXtFPSImI3giK2goZy5jaGFyQ29kZUF0KDApKSsiOyJ9SFtnXT1FfXJldHVybiBFfTtxLnNhcC5lbmNvZGVIVE1MPWZ1bmN0aW9uKFMpe3JldHVybiBTLnJlcGxhY2UocixmKX07cS5zYXAuZW5jb2RlWE1MPWZ1bmN0aW9uKFMpe3JldHVybiBTLnJlcGxhY2UocixmKX07cS5zYXAuZXNjYXBlSFRNTD1mdW5jdGlvbihTKXtyZXR1cm4gUy5yZXBsYWNlKHIsZil9O3ZhciBiPS9bXHgwMC1ceDJiXHgyZFx4MmZceDNhLVx4NDBceDViLVx4NWVceDYwXHg3Yi1ceGZmXHUyMDI4XHUyMDI5XS9nLGo9e307dmFyIEo9ZnVuY3Rpb24oZyl7dmFyIEU9altnXTtpZighRSl7dmFyIGk9Zy5jaGFyQ29kZUF0KDApO2lmKGk8MjU2KXtFPSJcXHgiK2goaSwyKX1lbHNle0U9IlxcdSIraChpLDQpfWpbZ109RX1yZXR1cm4gRX07cS5zYXAuZW5jb2RlSlM9ZnVuY3Rpb24oUyl7cmV0dXJuIFMucmVwbGFjZShiLEopfTtxLnNhcC5lc2NhcGVKUz1mdW5jdGlvbihTKXtyZXR1cm4gUy5yZXBsYWNlKGIsSil9O3ZhciBjPS9bXHgwMC1ceDJjXHgyZlx4M2EtXHg0MFx4NWItXHg1ZVx4NjBceDdiLVx1ZmZmZl0vZyx1PXt9O3ZhciBVPWZ1bmN0aW9uKGcpe3ZhciBFPXVbZ107aWYoIUUpe3ZhciBpPWcuY2hhckNvZGVBdCgwKTtpZihpPDEyOCl7RT0iJSIraChpLDIpfWVsc2UgaWYoaTwyMDQ4KXtFPSIlIitoKChpPj42KXwxOTIsMikrIiUiK2goKGkmNjMpfDEyOCwyKX1lbHNle0U9IiUiK2goKGk+PjEyKXwyMjQsMikrIiUiK2goKChpPj42KSY2Myl8MTI4LDIpKyIlIitoKChpJjYzKXwxMjgsMil9dVtnXT1FfXJldHVybiBFfTtxLnNhcC5lbmNvZGVVUkw9ZnVuY3Rpb24oUyl7cmV0dXJuIFMucmVwbGFjZShjLFUpfTtxLnNhcC5lbmNvZGVVUkxQYXJhbWV0ZXJzPWZ1bmN0aW9uKHApe2lmKCFwKXtyZXR1cm4iIn12YXIgZz1bXTtxLmVhY2gocCxmdW5jdGlvbihuLHYpe2lmKHEudHlwZSh2KT09PSJzdHJpbmciKXt2PXEuc2FwLmVuY29kZVVSTCh2KX1nLnB1c2gocS5zYXAuZW5jb2RlVVJMKG4pKyI9Iit2KX0pO3JldHVybiBnLmpvaW4oIiYiKX07dmFyIGQ9L1tceDAwLVx4MmZceDNhLVx4NDBceDViLVx4NjBceDdiLVx4ZmZcdTIwMjhcdTIwMjldWzAtOUEtRmEtZl0/L2c7dmFyIEM9ZnVuY3Rpb24oZyl7dmFyIGk9Zy5jaGFyQ29kZUF0KDApO2lmKGcubGVuZ3RoPT0xKXtyZXR1cm4iXFwiK2goaSl9ZWxzZXtyZXR1cm4iXFwiK2goaSkrIiAiK2cuc3Vic3RyKDEpfX07cS5zYXAuZW5jb2RlQ1NTPWZ1bmN0aW9uKFMpe3JldHVybiBTLnJlcGxhY2UoZCxDKX07ZnVuY3Rpb24gVyhwLGcsaSxrKXtpZihwKXt0aGlzLnByb3RvY29sPXAudG9VcHBlckNhc2UoKX1pZihnKXt0aGlzLmhvc3Q9Zy50b1VwcGVyQ2FzZSgpfXRoaXMucG9ydD1pO3RoaXMucGF0aD1rfXZhciB3PW5ldyBBcnJheSgpO3Euc2FwLmNsZWFyVXJsV2hpdGVsaXN0PWZ1bmN0aW9uKCl7dy5zcGxpY2UoMCx3Lmxlbmd0aCl9O3Euc2FwLmFkZFVybFdoaXRlbGlzdD1mdW5jdGlvbihwLGcsaSxrKXt2YXIgRT1uZXcgVyhwLGcsaSxrKTt2YXIgST13Lmxlbmd0aDt3W0ldPUV9O3Euc2FwLnJlbW92ZVVybFdoaXRlbGlzdD1mdW5jdGlvbihpKXt3LnNwbGljZShpLDEpfTtxLnNhcC5nZXRVcmxXaGl0ZWxpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdy5zbGljZSgpfTtxLnNhcC52YWxpZGF0ZVVybD1mdW5jdGlvbihnKXt2YXIgaz0vKD86KFteOlwvPyNdKyk6KT8oPzpcL1wvKFteXC8/IzpdKikoPzo6KFswLTldKykpPyk/KFtePyNdKikoPzpcPyhbXiNdKikpPyg/OiMoLiopKT8vLmV4ZWMoZyk7aWYoIWspe3JldHVybiBrfXZhciBwPWtbMV0sbD1rWzJdLFA9a1szXSxtPWtbNF0sUT1rWzVdLG49a1s2XTt2YXIgbz0vW1x4MDAtXHgyNFx4MjYtXHgyOVx4MmJceDJjXHgyZlx4M2EtXHg0MFx4NWItXHg1ZVx4NjBceDdiLVx4N2RceDdmLVx1ZmZmZl0vO3ZhciB0PS9bYS16MC05ISMkJSYnKitcLz0/Xl9ge3x9fi1dKyg/OlwuW2EtejAtOSEjJCUmJyorXC89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT8vO2lmKHApe3A9cC50b1VwcGVyQ2FzZSgpO2lmKHcubGVuZ3RoPD0wKXtpZighL14oaHR0cHM/fGZ0cCkvaS50ZXN0KHApKXtyZXR1cm4gZmFsc2V9fX1pZihsKXtsPWwudG9VcHBlckNhc2UoKX1pZihtKXtpZihwPT09Ik1BSUxUTyIpe3ZhciB2PXQudGVzdChtKTtpZighdil7cmV0dXJuIGZhbHNlfX1lbHNle3ZhciB4PW0uc3BsaXQoIi8iKTtmb3IodmFyIGk9MDtpPHgubGVuZ3RoO2krKyl7dmFyIHY9by50ZXN0KHhbaV0pO2lmKHYpe3JldHVybiBmYWxzZX19fX1pZihRKXt2YXIgeD1RLnNwbGl0KCImIik7Zm9yKHZhciBpPTA7aTx4Lmxlbmd0aDtpKyspe3ZhciB5PXhbaV0uc2VhcmNoKCI9Iik7aWYoeSE9LTEpe3ZhciB6PXhbaV0uc3Vic3RyaW5nKDAseSk7dmFyIEE9eFtpXS5zdWJzdHJpbmcoeSsxKTt2YXIgQj1vLnRlc3Qoeik7dmFyIEQ9by50ZXN0KEEpO2lmKEJ8fEQpe3JldHVybiBmYWxzZX19fX1pZihuKXtpZihvLnRlc3Qobikpe3JldHVybiBmYWxzZX19aWYody5sZW5ndGg+MCl7dmFyIEY9ZmFsc2U7Zm9yKHZhciBpPTA7aTx3Lmxlbmd0aDtpKyspe2lmKCFwfHwhd1tpXS5wcm90b2NvbHx8cD09d1tpXS5wcm90b2NvbCl7dmFyIE89ZmFsc2U7aWYobCYmd1tpXS5ob3N0JiYvXlwqLy50ZXN0KHdbaV0uaG9zdCkpe3ZhciBFPXdbaV0uaG9zdC5zbGljZSgxKS5yZXBsYWNlKC9bLVtcXXt9KCkqKz8uLFxcXiR8I1xzXS9nLCJcXCQmIik7dmFyIEc9UmVnRXhwKEUrIiQiKTtpZihHLnRlc3QobCkpe089dHJ1ZX19ZWxzZSBpZighbHx8IXdbaV0uaG9zdHx8bD09d1tpXS5ob3N0KXtPPXRydWV9aWYoTyl7aWYoKCFsJiYhUCl8fCF3W2ldLnBvcnR8fFA9PXdbaV0ucG9ydCl7aWYod1tpXS5wYXRoJiYvXCokLy50ZXN0KHdbaV0ucGF0aCkpe3ZhciBJPXdbaV0ucGF0aC5zbGljZSgwLC0xKS5yZXBsYWNlKC9bLVtcXXt9KCkqKz8uLFxcXiR8I1xzXS9nLCJcXCQmIik7dmFyIEc9UmVnRXhwKCJeIitJKTtpZihHLnRlc3QobSkpe0Y9dHJ1ZX19ZWxzZSBpZighd1tpXS5wYXRofHxtPT13W2ldLnBhdGgpe0Y9dHJ1ZX19fX1pZihGKXticmVha319aWYoIUYpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9O3Euc2FwLl9zYW5pdGl6ZUhUTUw9ZnVuY3Rpb24oZyxvKXtyZXR1cm4gcyhnLG98fHt1cmlSZXdyaXRlcjpmdW5jdGlvbihpKXtpZihxLnNhcC52YWxpZGF0ZVVybChpKSl7cmV0dXJuIGl9fX0pfTtxLnNhcC5fc2V0SFRNTFNhbml0aXplcj1mdW5jdGlvbihzKXtzPXN8fGV9O2Z1bmN0aW9uIGUoZyxvKXtpZighd2luZG93Lmh0bWx8fCF3aW5kb3cuaHRtbC5zYW5pdGl6ZSl7cS5zYXAucmVxdWlyZSgic2FwLnVpLnRoaXJkcGFydHkuY2FqYS1odG1sLXNhbml0aXplciIpO312YXIgdD1vLnRhZ1BvbGljeXx8d2luZG93Lmh0bWwubWFrZVRhZ1BvbGljeShvLnVyaVJld3JpdGVyLG8udG9rZW5Qb2xpY3kpO3JldHVybiB3aW5kb3cuaHRtbC5zYW5pdGl6ZVdpdGhQb2xpY3koZyx0KX12YXIgcz1lO3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuZXZlbnRzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5ldmVudHMnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLmV2ZW50cyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ2pxdWVyeS5zYXAua2V5Y29kZXMnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7cS5zYXAuX3RvdWNoVG9Nb3VzZUV2ZW50PXRydWU7dmFyIG8sYSxiLGMsZCxtLEk9ZmFsc2U7aWYoc2FwLnVpLkRldmljZS5icm93c2VyLndlYmtpdCYmL01vYmlsZS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoKXtJPXRydWU7dmFyIHM9KGZ1bmN0aW9uKCl7dmFyIGU9d2luZG93LmRvY3VtZW50LEg9ZmFsc2UsdD1udWxsLGo9ZmFsc2Uscix1LGk9MDttPVsibW91c2Vkb3duIiwibW91c2VvdmVyIiwibW91c2V1cCIsIm1vdXNlb3V0IiwiY2xpY2siXTt2YXIgdj1mdW5jdGlvbihULEUpe2lmKCFIKXtyZXR1cm59dmFyIE09RS50eXBlPT0idG91Y2hlbmQiP0UuY2hhbmdlZFRvdWNoZXNbMF06RS50b3VjaGVzWzBdO3ZhciB4PWUuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnQnKTt4LmluaXRNb3VzZUV2ZW50KFQsdHJ1ZSx0cnVlLHdpbmRvdyxFLmRldGFpbCxNLnNjcmVlblgsTS5zY3JlZW5ZLE0uY2xpZW50WCxNLmNsaWVudFksRS5jdHJsS2V5LEUuc2hpZnRLZXksRS5hbHRLZXksRS5tZXRhS2V5LEUuYnV0dG9uLEUucmVsYXRlZFRhcmdldCk7eC5pc1N5bnRoZXRpYz10cnVlO3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5kaXNwYXRjaEV2ZW50KHgpfSwwKX07dmFyIHc9ZnVuY3Rpb24oRSl7cmV0dXJuIEUudGFyZ2V0LnRhZ05hbWUubWF0Y2goL2lucHV0fHRleHRhcmVhfHNlbGVjdC9pKX07ZD1mdW5jdGlvbihFKXtpZighRS5pc1N5bnRoZXRpYyYmIXcoRSkpe0Uuc3RvcFByb3BhZ2F0aW9uKCk7RS5wcmV2ZW50RGVmYXVsdCgpfX07bz1mdW5jdGlvbihFKXt2YXIgVD1FLnRvdWNoZXMseDtIPShULmxlbmd0aD09MSYmIXcoRSkpO2o9ZmFsc2U7aWYoSCl7eD1UWzBdO3Q9eC50YXJnZXQ7aWYodC5ub2RlVHlwZT09PTMpe3Q9dC5wYXJlbnROb2RlfXI9eC5jbGllbnRYO3U9eC5jbGllbnRZO3YoIm1vdXNlZG93biIsRSl9fTthPWZ1bmN0aW9uKEUpe3ZhciBUO2lmKEgpe1Q9RS50b3VjaGVzWzBdO2lmKE1hdGguYWJzKFQuY2xpZW50WC1yKT4xMHx8TWF0aC5hYnMoVC5jbGllbnRZLXUpPjEwKXtqPXRydWV9aWYoail7digibW91c2Vtb3ZlIixFKX19fTtiPWZ1bmN0aW9uKEUpe3YoIm1vdXNldXAiLEUpO2lmKCFqKXt2KCJjbGljayIsRSl9fTtjPWZ1bmN0aW9uKEUpe3YoIm1vdXNldXAiLEUpfTtmb3IoO2k8bS5sZW5ndGg7aSsrKXtlLmFkZEV2ZW50TGlzdGVuZXIobVtpXSxkLHRydWUpfWUuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsbyx0cnVlKTtlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsYSx0cnVlKTtlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJyxiLHRydWUpO2UuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLGMsdHJ1ZSl9KCkpfXEuc2FwLmRpc2FibGVUb3VjaFRvTW91c2VIYW5kbGluZz1mdW5jdGlvbigpe3ZhciBpPTA7aWYoIUkpe3JldHVybn1kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JyxvLHRydWUpO2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsYSx0cnVlKTtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsYix0cnVlKTtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsYyx0cnVlKTtmb3IoO2k8bS5sZW5ndGg7aSsrKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKG1baV0sZCx0cnVlKX19O3Euc2FwLkNvbnRyb2xFdmVudHM9WyJjbGljayIsImRibGNsaWNrIiwiY29udGV4dG1lbnUiLCJmb2N1c2luIiwiZm9jdXNvdXQiLCJrZXlkb3duIiwia2V5cHJlc3MiLCJrZXl1cCIsIm1vdXNlZG93biIsIm1vdXNlb3V0IiwibW91c2VvdmVyIiwibW91c2V1cCIsInNlbGVjdCIsInNlbGVjdHN0YXJ0IiwiZHJhZ3N0YXJ0IiwiZHJhZ2VudGVyIiwiZHJhZ292ZXIiLCJkcmFnbGVhdmUiLCJkcmFnZW5kIiwiZHJvcCIsInBhc3RlIiwiY3V0IiwiaW5wdXQiXTtpZihzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe3Euc2FwLkNvbnRyb2xFdmVudHMucHVzaCgidG91Y2hzdGFydCIsInRvdWNoZW5kIiwidG91Y2htb3ZlIiwidG91Y2hjYW5jZWwiKX1xLnNhcC5Qc2V1ZG9FdmVudHM9e3NhcGRvd246e3NOYW1lOiJzYXBkb3duIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19ET1dOJiYhayhlKX19LHNhcGRvd25tb2RpZmllcnM6e3NOYW1lOiJzYXBkb3dubW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19ET1dOJiZrKGUpfX0sc2Fwc2hvdzp7c05hbWU6InNhcHNob3ciLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybihlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkY0JiYhayhlKSl8fChlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0RPV04mJmgoZSxmYWxzZSx0cnVlLGZhbHNlKSl9fSxzYXB1cDp7c05hbWU6InNhcHVwIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCYmIWsoZSl9fSxzYXB1cG1vZGlmaWVyczp7c05hbWU6InNhcHVwbW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCYmayhlKX19LHNhcGhpZGU6e3NOYW1lOiJzYXBoaWRlIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCYmaChlLGZhbHNlLHRydWUsZmFsc2UpfX0sc2FwbGVmdDp7c05hbWU6InNhcGxlZnQiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0xFRlQmJiFrKGUpfX0sc2FwbGVmdG1vZGlmaWVyczp7c05hbWU6InNhcGxlZnRtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0xFRlQmJmsoZSl9fSxzYXByaWdodDp7c05hbWU6InNhcHJpZ2h0IixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVCYmIWsoZSl9fSxzYXByaWdodG1vZGlmaWVyczp7c05hbWU6InNhcHJpZ2h0bW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVCYmayhlKX19LHNhcGhvbWU6e3NOYW1lOiJzYXBob21lIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5IT01FJiYhayhlKX19LHNhcGhvbWVtb2RpZmllcnM6e3NOYW1lOiJzYXBob21lbW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5IT01FJiZrKGUpfX0sc2FwdG9wOntzTmFtZToic2FwdG9wIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5IT01FJiZoKGUsdHJ1ZSxmYWxzZSxmYWxzZSl9fSxzYXBlbmQ6e3NOYW1lOiJzYXBlbmQiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkVORCYmIWsoZSl9fSxzYXBlbmRtb2RpZmllcnM6e3NOYW1lOiJzYXBlbmRtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkVORCYmayhlKX19LHNhcGJvdHRvbTp7c05hbWU6InNhcGJvdHRvbSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRU5EJiZoKGUsdHJ1ZSxmYWxzZSxmYWxzZSl9fSxzYXBwYWdldXA6e3NOYW1lOiJzYXBwYWdldXAiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlBBR0VfVVAmJiFrKGUpfX0sc2FwcGFnZXVwbW9kaWZpZXJzOntzTmFtZToic2FwcGFnZXVwbW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5QQUdFX1VQJiZrKGUpfX0sc2FwcGFnZWRvd246e3NOYW1lOiJzYXBwYWdlZG93biIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuUEFHRV9ET1dOJiYhayhlKX19LHNhcHBhZ2Vkb3dubW9kaWZpZXJzOntzTmFtZToic2FwcGFnZWRvd25tb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlBBR0VfRE9XTiYmayhlKX19LHNhcHNlbGVjdDp7c05hbWU6InNhcHNlbGVjdCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuKGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRU5URVJ8fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuU1BBQ0UpJiYhayhlKX19LHNhcHNlbGVjdG1vZGlmaWVyczp7c05hbWU6InNhcHNlbGVjdG1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuKGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRU5URVJ8fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuU1BBQ0UpJiZrKGUpfX0sc2Fwc3BhY2U6e3NOYW1lOiJzYXBzcGFjZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuU1BBQ0UmJiFrKGUpfX0sc2Fwc3BhY2Vtb2RpZmllcnM6e3NOYW1lOiJzYXBzcGFjZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuU1BBQ0UmJmsoZSl9fSxzYXBlbnRlcjp7c05hbWU6InNhcGVudGVyIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5FTlRFUiYmIWsoZSl9fSxzYXBlbnRlcm1vZGlmaWVyczp7c05hbWU6InNhcGVudGVybW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5FTlRFUiYmayhlKX19LHNhcGJhY2tzcGFjZTp7c05hbWU6InNhcGJhY2tzcGFjZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQkFDS1NQQUNFJiYhayhlKX19LHNhcGJhY2tzcGFjZW1vZGlmaWVyczp7c05hbWU6InNhcGJhY2tzcGFjZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQkFDS1NQQUNFJiZrKGUpfX0sc2FwZGVsZXRlOntzTmFtZToic2FwZGVsZXRlIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5ERUxFVEUmJiFrKGUpfX0sc2FwZGVsZXRlbW9kaWZpZXJzOntzTmFtZToic2FwZGVsZXRlbW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5ERUxFVEUmJmsoZSl9fSxzYXBleHBhbmQ6e3NOYW1lOiJzYXBleHBhbmQiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLk5VTVBBRF9QTFVTJiYhayhlKX19LHNhcGV4cGFuZG1vZGlmaWVyczp7c05hbWU6InNhcGV4cGFuZG1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuTlVNUEFEX1BMVVMmJmsoZSl9fSxzYXBjb2xsYXBzZTp7c05hbWU6InNhcGNvbGxhcHNlIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5OVU1QQURfTUlOVVMmJiFrKGUpfX0sc2FwY29sbGFwc2Vtb2RpZmllcnM6e3NOYW1lOiJzYXBjb2xsYXBzZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuTlVNUEFEX01JTlVTJiZrKGUpfX0sc2FwY29sbGFwc2VhbGw6e3NOYW1lOiJzYXBjb2xsYXBzZWFsbCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuTlVNUEFEX0FTVEVSSVNLJiYhayhlKX19LHNhcGVzY2FwZTp7c05hbWU6InNhcGVzY2FwZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRVNDQVBFJiYhayhlKX19LHNhcHRhYm5leHQ6e3NOYW1lOiJzYXB0YWJuZXh0IixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5UQUImJiFrKGUpfX0sc2FwdGFicHJldmlvdXM6e3NOYW1lOiJzYXB0YWJwcmV2aW91cyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuVEFCJiZoKGUsZmFsc2UsZmFsc2UsdHJ1ZSl9fSxzYXBza2lwZm9yd2FyZDp7c05hbWU6InNhcHNraXBmb3J3YXJkIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5GNiYmIWsoZSl9fSxzYXBza2lwYmFjazp7c05hbWU6InNhcHNraXBiYWNrIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5GNiYmaChlLGZhbHNlLGZhbHNlLHRydWUpfX0sc2FwZGVjcmVhc2U6e3NOYW1lOiJzYXBkZWNyZWFzZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIGk9cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVDpxLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUO3JldHVybihlLmtleUNvZGU9PWl8fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTikmJiFrKGUpfX0sc2FwZGVjcmVhc2Vtb2RpZmllcnM6e3NOYW1lOiJzYXBkZWNyZWFzZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIGk9cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVDpxLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUO3JldHVybihlLmtleUNvZGU9PWl8fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTikmJmsoZSl9fSxzYXBpbmNyZWFzZTp7c05hbWU6InNhcGluY3JlYXNlIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXt2YXIgcj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTt2YXIgTj1yP3Euc2FwLktleUNvZGVzLkFSUk9XX0xFRlQ6cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQ7cmV0dXJuKGUua2V5Q29kZT09Tnx8ZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCkmJiFrKGUpfX0sc2FwaW5jcmVhc2Vtb2RpZmllcnM6e3NOYW1lOiJzYXBpbmNyZWFzZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIE49cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUOnEuc2FwLktleUNvZGVzLkFSUk9XX1JJR0hUO3JldHVybihlLmtleUNvZGU9PU58fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVApJiZrKGUpfX0sc2FwcHJldmlvdXM6e3NOYW1lOiJzYXBwcmV2aW91cyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIGk9cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVDpxLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUO3JldHVybihlLmtleUNvZGU9PWl8fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVApJiYhayhlKX19LHNhcHByZXZpb3VzbW9kaWZpZXJzOntzTmFtZToic2FwcHJldmlvdXNtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciBpPXI/cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQ6cS5zYXAuS2V5Q29kZXMuQVJST1dfTEVGVDtyZXR1cm4oZS5rZXlDb2RlPT1pfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX1VQKSYmayhlKX19LHNhcG5leHQ6e3NOYW1lOiJzYXBuZXh0IixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXt2YXIgcj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTt2YXIgTj1yP3Euc2FwLktleUNvZGVzLkFSUk9XX0xFRlQ6cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQ7cmV0dXJuKGUua2V5Q29kZT09Tnx8ZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19ET1dOKSYmIWsoZSl9fSxzYXBuZXh0bW9kaWZpZXJzOntzTmFtZToic2FwbmV4dG1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIE49cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUOnEuc2FwLktleUNvZGVzLkFSUk9XX1JJR0hUO3JldHVybihlLmtleUNvZGU9PU58fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTikmJmsoZSl9fSxzYXBkZWxheWVkZG91YmxlY2xpY2s6e3NOYW1lOiJzYXBkZWxheWVkZG91YmxlY2xpY2siLGFUeXBlczpbImNsaWNrIl0sZm5DaGVjazpmdW5jdGlvbihlKXt2YXIgaT1xKGUudGFyZ2V0KTt2YXIgaj1lLnRpbWVTdGFtcDt2YXIgcj1pLmRhdGEoInNhcGRlbGF5ZWRkb3VibGVjbGlja19sYXN0Q2xpY2tUaW1lc3RhbXAiKTt2YXIgdD1yfHwwO2kuZGF0YSgic2FwZGVsYXllZGRvdWJsZWNsaWNrX2xhc3RDbGlja1RpbWVzdGFtcCIsaik7dmFyIHU9ai10O3JldHVybih1Pj0zMDAmJnU8PTEzMDApfX19O3ZhciBQPVsic2FwZG93biIsInNhcGRvd25tb2RpZmllcnMiLCJzYXBzaG93Iiwic2FwdXAiLCJzYXB1cG1vZGlmaWVycyIsInNhcGhpZGUiLCJzYXBsZWZ0Iiwic2FwbGVmdG1vZGlmaWVycyIsInNhcHJpZ2h0Iiwic2FwcmlnaHRtb2RpZmllcnMiLCJzYXBob21lIiwic2FwaG9tZW1vZGlmaWVycyIsInNhcHRvcCIsInNhcGVuZCIsInNhcGVuZG1vZGlmaWVycyIsInNhcGJvdHRvbSIsInNhcHBhZ2V1cCIsInNhcHBhZ2V1cG1vZGlmaWVycyIsInNhcHBhZ2Vkb3duIiwic2FwcGFnZWRvd25tb2RpZmllcnMiLCJzYXBzZWxlY3QiLCJzYXBzZWxlY3Rtb2RpZmllcnMiLCJzYXBzcGFjZSIsInNhcHNwYWNlbW9kaWZpZXJzIiwic2FwZW50ZXIiLCJzYXBlbnRlcm1vZGlmaWVycyIsInNhcGV4cGFuZCIsInNhcGJhY2tzcGFjZSIsInNhcGJhY2tzcGFjZW1vZGlmaWVycyIsInNhcGRlbGV0ZSIsInNhcGRlbGV0ZW1vZGlmaWVycyIsInNhcGV4cGFuZG1vZGlmaWVycyIsInNhcGNvbGxhcHNlIiwic2FwY29sbGFwc2Vtb2RpZmllcnMiLCJzYXBjb2xsYXBzZWFsbCIsInNhcGVzY2FwZSIsInNhcHRhYm5leHQiLCJzYXB0YWJwcmV2aW91cyIsInNhcHNraXBmb3J3YXJkIiwic2Fwc2tpcGJhY2siLCJzYXBwcmV2aW91cyIsInNhcHByZXZpb3VzbW9kaWZpZXJzIiwic2FwbmV4dCIsInNhcG5leHRtb2RpZmllcnMiLCJzYXBkZWNyZWFzZSIsInNhcGRlY3JlYXNlbW9kaWZpZXJzIiwic2FwaW5jcmVhc2UiLCJzYXBpbmNyZWFzZW1vZGlmaWVycyIsInNhcGRlbGF5ZWRkb3VibGVjbGljayJdOyhmdW5jdGlvbiBpbml0VG91Y2hFdmVudFN1cHBvcnQoKXtxLnNhcC50b3VjaEV2ZW50TW9kZT0iU0lNIjt2YXIgQT1bXTt2YXIgZT1bXTtpZihzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe3Euc2FwLnRvdWNoRXZlbnRNb2RlPSJPTiI7cS5ldmVudC5wcm9wcy5wdXNoKCJ0b3VjaGVzIiwidGFyZ2V0VG91Y2hlcyIsImNoYW5nZWRUb3VjaGVzIil9dmFyIGo9ZnVuY3Rpb24oeCx5LEgpe3ZhciB6PSJfXyIreCsiSGFuZGxlciI7dmFyIEI9InNhcCIreDtBLnB1c2goQik7ZS5wdXNoKHtzTmFtZTp4LGFUeXBlczpbQl0sZm5DaGVjazpmdW5jdGlvbihFKXtyZXR1cm4gdHJ1ZX19KTtxLmV2ZW50LnNwZWNpYWxbQl09e2FkZDpmdW5jdGlvbihDKXt2YXIgRD10aGlzLCQ9cSh0aGlzKSxFPXtkb21SZWY6RCxldmVudE5hbWU6eCxzYXBFdmVudE5hbWU6QixldmVudEhhbmRsZTpDfTt2YXIgRz1mdW5jdGlvbihKKXtIKEosRSl9O0MuX19zYXBTaW11bGF0ZWRFdmVudEhhbmRsZXI9Rztmb3IodmFyIGk9MDtpPHkubGVuZ3RoO2krKyl7JC5vbih5W2ldLEcpfX0scmVtb3ZlOmZ1bmN0aW9uKEMpe3ZhciAkPXEodGhpcyk7dmFyIEg9Qy5fX3NhcFNpbXVsYXRlZEV2ZW50SGFuZGxlcjskLnJlbW92ZURhdGEoeitDLmd1aWQpO2Zvcih2YXIgaT0wO2k8eS5sZW5ndGg7aSsrKXtxLmV2ZW50LnJlbW92ZSh0aGlzLHlbaV0sSCl9fX19O3ZhciBNPWZ1bmN0aW9uKEUsQyl7dmFyIEQ9cShDLmRvbVJlZik7aWYoRS5pc01hcmtlZCgiZGVsYXllZE1vdXNlRXZlbnQiKSl7cmV0dXJufWlmKCEoRS50eXBlIT0ibW91c2VvdXQifHwoRS50eXBlPT09Im1vdXNlb3V0IiYmcS5zYXAuY2hlY2tNb3VzZUVudGVyT3JMZWF2ZShFLEMuZG9tUmVmKSkpKXt2YXIgeD10cnVlO3ZhciB5PUQuZGF0YSgiX190b3VjaHN0YXJ0X2NvbnRyb2wiKTtpZih5KXt2YXIgej1xLnNhcC5kb21CeUlkKHkpO2lmKHomJnEuc2FwLmNoZWNrTW91c2VFbnRlck9yTGVhdmUoRSx6KSl7eD1mYWxzZX19aWYoeCl7cmV0dXJufX12YXIgTj1xLmV2ZW50LmZpeChFLm9yaWdpbmFsRXZlbnR8fEUpO04udHlwZT1DLnNhcEV2ZW50TmFtZTtpZihOLmlzTWFya2VkKCJmaXJzdFVJQXJlYSIpKXtOLnNldE1hcmsoImhhbmRsZWRCeVVJQXJlYSIsZmFsc2UpfXZhciBCPVt7aWRlbnRpZmllcjoxLHBhZ2VYOk4ucGFnZVgscGFnZVk6Ti5wYWdlWSxjbGllbnRYOk4uY2xpZW50WCxjbGllbnRZOk4uY2xpZW50WSxzY3JlZW5YOk4uc2NyZWVuWCxzY3JlZW5ZOk4uc2NyZWVuWSx0YXJnZXQ6Ti50YXJnZXQscmFkaXVzWDoxLHJhZGl1c1k6MSxyb3RhdGlvbkFuZ2xlOjB9XTtzd2l0Y2goQy5ldmVudE5hbWUpe2Nhc2UidG91Y2hzdGFydCI6Y2FzZSJ0b3VjaG1vdmUiOk4udG91Y2hlcz1OLmNoYW5nZWRUb3VjaGVzPU4udGFyZ2V0VG91Y2hlcz1CO2JyZWFrO2Nhc2UidG91Y2hlbmQiOk4uY2hhbmdlZFRvdWNoZXM9QjtOLnRvdWNoZXM9Ti50YXJnZXRUb3VjaGVzPVtdO2JyZWFrfWlmKEMuZXZlbnROYW1lPT09InRvdWNoc3RhcnQifHxELmRhdGEoIl9fdG91Y2hfaW5fcHJvZ3Jlc3MiKSl7RC5kYXRhKCJfX3RvdWNoX2luX3Byb2dyZXNzIiwiWCIpO3ZhciBHPXEuZm4uY29udHJvbD9xKEUudGFyZ2V0KS5jb250cm9sKDApOm51bGw7aWYoRyl7RC5kYXRhKCJfX3RvdWNoc3RhcnRfY29udHJvbCIsRy5nZXRJZCgpKX1pZihFLnR5cGU9PT0ibW91c2VvdXQiKXtOLnNldE1hcmtlZCgiZnJvbU1vdXNlb3V0Iil9Qy5ldmVudEhhbmRsZS5oYW5kbGVyLmNhbGwoQy5kb21SZWYsTik7aWYoQy5ldmVudE5hbWU9PT0idG91Y2hlbmQiJiYhTi5pc01hcmtlZCgiZnJvbU1vdXNlb3V0Iikpe0QucmVtb3ZlRGF0YSgiX190b3VjaF9pbl9wcm9ncmVzcyIpO0QucmVtb3ZlRGF0YSgiX190b3VjaHN0YXJ0X2NvbnRyb2wiKX19fTtqKCJ0b3VjaHN0YXJ0IixbIm1vdXNlZG93biJdLE0pO2ooInRvdWNoZW5kIixbIm1vdXNldXAiLCJtb3VzZW91dCJdLE0pO2ooInRvdWNobW92ZSIsWyJtb3VzZW1vdmUiXSxNKTtmdW5jdGlvbiByKCl7dmFyIEM9d2luZG93WyJzYXAtdWktY29uZmlnIl18fHt9LEw9Qy5saWJzfHwiIjtmdW5jdGlvbiB4KEspe3JldHVybiBkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2guaW5kZXhPZigic2FwLXVpLSIrSyk+LTF8fCEhQ1tLLnRvTG93ZXJDYXNlKCldfXJldHVybiBzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2h8fHgoInh4LXRlc3QtbW9iaWxlIil8fHgoInh4LWZha2VPUyIpfHxMLm1hdGNoKC9zYXAubVxiLyl9aWYocigpKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnktbW9iaWxlLWN1c3RvbSIpO2lmKHNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCl7dmFyIEY9ZmFsc2UsdD1xLnZtb3VzZS5tb3ZlRGlzdGFuY2VUaHJlc2hvbGQsdSx2LE8sdzt2YXIgVD1mdW5jdGlvbihFLEMpe3ZhciB4PUUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLHk7aWYoRS50eXBlPT09InRvdWNoc3RhcnQiKXtGPWZhbHNlO3U9eC5wYWdlWDt2PXgucGFnZVk7Tz1NYXRoLnJvdW5kKHgucGFnZVgtcShFLnRhcmdldCkub2Zmc2V0KCkubGVmdCk7dz1NYXRoLnJvdW5kKHgucGFnZVktcShFLnRhcmdldCkub2Zmc2V0KCkudG9wKX1lbHNlIGlmKEUudHlwZT09PSJ0b3VjaG1vdmUiKXtGPUZ8fChNYXRoLmFicyh4LnBhZ2VYLXUpPnR8fE1hdGguYWJzKHgucGFnZVktdik+dCl9dmFyIE49cS5ldmVudC5maXgoRS5vcmlnaW5hbEV2ZW50fHxFKTtOLnR5cGU9Qy5zYXBFdmVudE5hbWU7aWYoTi5pc01hcmtlZCgiZmlyc3RVSUFyZWEiKSl7Ti5zZXRNYXJrKCJoYW5kbGVkQnlVSUFyZWEiLGZhbHNlKX1kZWxldGUgTi50b3VjaGVzO2RlbGV0ZSBOLmNoYW5nZWRUb3VjaGVzO2RlbGV0ZSBOLnRhcmdldFRvdWNoZXM7dmFyIHo9KEMuZXZlbnROYW1lPT09Im1vdXNldXAiP0UuY2hhbmdlZFRvdWNoZXNbMF06RS50b3VjaGVzWzBdKTtOLnNjcmVlblg9ei5zY3JlZW5YO04uc2NyZWVuWT16LnNjcmVlblk7Ti5jbGllbnRYPXouY2xpZW50WDtOLmNsaWVudFk9ei5jbGllbnRZO04uY3RybEtleT16LmN0cmxLZXk7Ti5hbHRLZXk9ei5hbHRLZXk7Ti5zaGlmdEtleT16LnNoaWZ0S2V5O04uYnV0dG9uPShzYXAudWkuRGV2aWNlLmJyb3dzZXIubXNpZSYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248PTg/MTowKTt5PU4uaXNNYXJrZWQoImhhbmRsZWRCeVVJQXJlYSIpO0MuZXZlbnRIYW5kbGUuaGFuZGxlci5jYWxsKEMuZG9tUmVmLE4pO2lmKEUudHlwZT09PSJ0b3VjaGVuZCImJiF5JiYhRil7Ti50eXBlPSJjbGljayI7Ti5zZXRNYXJrKCJoYW5kbGVkQnlVSUFyZWEiLGZhbHNlKTtOLm9mZnNldFg9TztOLm9mZnNldFk9dztDLmV2ZW50SGFuZGxlLmhhbmRsZXIuY2FsbChDLmRvbVJlZixOKX19O3Euc2FwLmRpc2FibGVUb3VjaFRvTW91c2VIYW5kbGluZygpO3Euc2FwLl90b3VjaFRvTW91c2VFdmVudD1mYWxzZTtqKCJtb3VzZWRvd24iLFsidG91Y2hzdGFydCJdLFQpO2ooIm1vdXNlbW92ZSIsWyJ0b3VjaG1vdmUiXSxUKTtqKCJtb3VzZXVwIixbInRvdWNoZW5kIiwidG91Y2hjYW5jZWwiXSxUKX1BLnB1c2goInN3aXBlIiwidGFwIiwic3dpcGVsZWZ0Iiwic3dpcGVyaWdodCIsInNjcm9sbHN0YXJ0Iiwic2Nyb2xsc3RvcCIpO2UucHVzaCh7c05hbWU6InN3aXBlYmVnaW4iLGFUeXBlczpbInN3aXBlbGVmdCIsInN3aXBlcmlnaHQiXSxmbkNoZWNrOmZ1bmN0aW9uKEUpe3ZhciBSPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3JldHVybihSJiZFLnR5cGU9PT0ic3dpcGVyaWdodCIpfHwoIVImJkUudHlwZT09PSJzd2lwZWxlZnQiKX19KTtlLnB1c2goe3NOYW1lOiJzd2lwZWVuZCIsYVR5cGVzOlsic3dpcGVsZWZ0Iiwic3dpcGVyaWdodCJdLGZuQ2hlY2s6ZnVuY3Rpb24oRSl7dmFyIFI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7cmV0dXJuKCFSJiZFLnR5cGU9PT0ic3dpcGVyaWdodCIpfHwoUiYmRS50eXBlPT09InN3aXBlbGVmdCIpfX0pfWlmKHEuc2FwLlZlcnNpb24ocS5mbi5qcXVlcnkpLmNvbXBhcmVUbygiMS45LjEiKTwwKXtxLnNhcC5Db250cm9sRXZlbnRzPXEuc2FwLkNvbnRyb2xFdmVudHMuY29uY2F0KEEpfWVsc2V7cS5zYXAuQ29udHJvbEV2ZW50cz1BLmNvbmNhdChxLnNhcC5Db250cm9sRXZlbnRzKX1mb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7cS5zYXAuUHNldWRvRXZlbnRzW2VbaV0uc05hbWVdPWVbaV07UC5wdXNoKGVbaV0uc05hbWUpfX0oKSk7ZnVuY3Rpb24gZigpe3ZhciBlPXEuc2FwLlBzZXVkb0V2ZW50cyxyPVtdO2Zvcih2YXIgTiBpbiBlKXtpZihlW05dLmFUeXBlcyl7Zm9yKHZhciBqPTAsaT1lW05dLmFUeXBlcy5sZW5ndGg7ajxpO2orKyl7dmFyIHQ9ZVtOXS5hVHlwZXNbal07aWYocS5pbkFycmF5KHQscik9PS0xKXtyLnB1c2godCl9fX19cmV0dXJuIHJ9dmFyIGc9ZigpO2Z1bmN0aW9uIGgoZSxDLEEsaSl7cmV0dXJuIGUuc2hpZnRLZXk9PWkmJmUuYWx0S2V5PT1BJiZsKGUpPT1DfWZ1bmN0aW9uIGsoZSl7cmV0dXJuIGUuc2hpZnRLZXl8fGUuYWx0S2V5fHxsKGUpfWZ1bmN0aW9uIGwoZSl7cmV0dXJuISEoZS5tZXRhS2V5fHxlLmN0cmxLZXkpfXEuRXZlbnQucHJvdG90eXBlLmdldFBzZXVkb1R5cGVzPWZ1bmN0aW9uKCl7dmFyIGU9W107aWYocS5pbkFycmF5KHRoaXMudHlwZSxnKSE9LTEpe3ZhciBqPVA7dmFyIHI9ai5sZW5ndGg7dmFyIHQ9bnVsbDtmb3IodmFyIGk9MDtpPHI7aSsrKXt0PXEuc2FwLlBzZXVkb0V2ZW50c1tqW2ldXTtpZih0LmFUeXBlcyYmcS5pbkFycmF5KHRoaXMudHlwZSx0LmFUeXBlcyk+LTEmJnQuZm5DaGVjayYmdC5mbkNoZWNrKHRoaXMpKXtlLnB1c2godC5zTmFtZSl9fX10aGlzLmdldFBzZXVkb1R5cGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGUuc2xpY2UoKX07cmV0dXJuIGUuc2xpY2UoKX07cS5FdmVudC5wcm90b3R5cGUuaXNQc2V1ZG9UeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0UHNldWRvVHlwZXMoKTtpZih0KXtyZXR1cm4gcS5pbkFycmF5KHQsZSk+LTF9ZWxzZXtyZXR1cm4gZS5sZW5ndGg+MH19O3ZhciBfPXEuRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0O3EuRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Xy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O2lmKCFlKXtyZXR1cm59aWYoZS5rZXlDb2RlIT0wKXt0cnl7aWYoIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94KXtlLmtleUNvZGU9MH19Y2F0Y2goaSl7fX19O3Euc2FwLmJpbmRBbnlFdmVudD1mdW5jdGlvbiBiaW5kQW55RXZlbnQoQyl7aWYoQyl7cShkb2N1bWVudCkuYmluZChxLnNhcC5Db250cm9sRXZlbnRzLmpvaW4oIiAiKSxDKX19O3Euc2FwLnVuYmluZEFueUV2ZW50PWZ1bmN0aW9uIHVuYmluZEFueUV2ZW50KEMpe2lmKEMpe3EoZG9jdW1lbnQpLnVuYmluZChxLnNhcC5Db250cm9sRXZlbnRzLmpvaW4oIiAiKSxDKX19O3Euc2FwLmNoZWNrTW91c2VFbnRlck9yTGVhdmU9ZnVuY3Rpb24gY2hlY2tNb3VzZUVudGVyT3JMZWF2ZShFLEQpe2lmKEUudHlwZSE9Im1vdXNlb3ZlciImJkUudHlwZSE9Im1vdXNlb3V0Iil7cmV0dXJuIGZhbHNlfXZhciBpPWZhbHNlO3ZhciBqPUQ7dmFyIHI9RS5yZWxhdGVkVGFyZ2V0O3RyeXt3aGlsZShyJiZyIT09ail7cj1yLnBhcmVudE5vZGV9aWYociE9PWope2k9dHJ1ZX19Y2F0Y2goZSl7fXJldHVybiBpfTtxLnNhcC5pc1NwZWNpYWxLZXk9ZnVuY3Rpb24oZSl7dmFyIEs9cS5zYXAuS2V5Q29kZXMsaT1lLndoaWNoLGo9bihlKXx8cChlKXx8KGk+PTMzJiZpPD0zNil8fChpPj00NCYmaTw9NDYpfHwoaT49MTEyJiZpPD0xMjMpfHwoaT09PUsuQlJFQUspfHwoaT09PUsuQkFDS1NQQUNFKXx8KGk9PT1LLlRBQil8fChpPT09Sy5FTlRFUil8fChpPT09Sy5FU0NBUEUpfHwoaT09PUsuU0NST0xMX0xPQ0spO3N3aXRjaChlLnR5cGUpe2Nhc2Uia2V5ZG93biI6Y2FzZSJrZXl1cCI6cmV0dXJuIGo7Y2FzZSJrZXlwcmVzcyI6cmV0dXJuKGk9PT0wfHxpPT09Sy5CQUNLU1BBQ0V8fGk9PT1LLkVTQ0FQRXx8aT09PUsuRU5URVIpfHxmYWxzZTtkZWZhdWx0OnJldHVybiBmYWxzZX19O2Z1bmN0aW9uIG4oZSl7dmFyIEs9cS5zYXAuS2V5Q29kZXMsaT1lLndoaWNoO3JldHVybihpPT09Sy5TSElGVCl8fChpPT09Sy5DT05UUk9MKXx8KGk9PT1LLkFMVCl8fChpPT09Sy5DQVBTX0xPQ0spfHwoaT09PUsuTlVNX0xPQ0spfWZ1bmN0aW9uIHAoZSl7dmFyIEs9ZS53aGljaCxBPShLPj0zNyYmSzw9NDApO3N3aXRjaChlLnR5cGUpe2Nhc2Uia2V5ZG93biI6Y2FzZSJrZXl1cCI6cmV0dXJuIEE7Y2FzZSJrZXlwcmVzcyI6cmV0dXJuIEs9PT0wO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX1xLkV2ZW50LnByb3RvdHlwZS5nZXRPZmZzZXRYPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlPT0nY2xpY2snKXtpZih0aGlzLm9mZnNldFgpe3JldHVybiB0aGlzLm9mZnNldFh9aWYodGhpcy5sYXllclgpe3JldHVybiB0aGlzLmxheWVyWH1pZih0aGlzLm9yaWdpbmFsRXZlbnQubGF5ZXJYKXtyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50LmxheWVyWH19cmV0dXJuIDB9O3EuRXZlbnQucHJvdG90eXBlLmdldE9mZnNldFk9ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGU9PSdjbGljaycpe2lmKHRoaXMub2Zmc2V0WSl7cmV0dXJuIHRoaXMub2Zmc2V0WX1pZih0aGlzLmxheWVyWSl7cmV0dXJuIHRoaXMubGF5ZXJZfWlmKHRoaXMub3JpZ2luYWxFdmVudC5sYXllclkpe3JldHVybiB0aGlzLm9yaWdpbmFsRXZlbnQubGF5ZXJZfX1yZXR1cm4gMH07dmFyIFM9cS5FdmVudC5wcm90b3R5cGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uO3EuRXZlbnQucHJvdG90eXBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbj1mdW5jdGlvbihlKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihlKXt0aGlzLl9iSXNTdG9wSGFuZGxlcnM9dHJ1ZX19O3EuRXZlbnQucHJvdG90eXBlLmlzSW1tZWRpYXRlSGFuZGxlclByb3BhZ2F0aW9uU3RvcHBlZD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fYklzU3RvcEhhbmRsZXJzfTtxLkV2ZW50LnByb3RvdHlwZS5zZXRNYXJrPWZ1bmN0aW9uKEssdil7Sz1LfHwiaGFuZGxlZEJ5Q29udHJvbCI7dj1hcmd1bWVudHMubGVuZ3RoPDI/dHJ1ZTp2Oyh0aGlzLm9yaWdpbmFsRXZlbnR8fHRoaXMpWyJfc2FwdWlfIitLXT12fTtxLkV2ZW50LnByb3RvdHlwZS5zZXRNYXJrZWQ9cS5FdmVudC5wcm90b3R5cGUuc2V0TWFyaztxLkV2ZW50LnByb3RvdHlwZS5pc01hcmtlZD1mdW5jdGlvbihLKXtLPUt8fCJoYW5kbGVkQnlDb250cm9sIjtyZXR1cm4hISh0aGlzLm9yaWdpbmFsRXZlbnR8fHRoaXMpWyJfc2FwdWlfIitLXX07cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5oaXN0b3J5Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5oaXN0b3J5Jyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5oaXN0b3J5IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnanF1ZXJ5LnNhcC5zdHJpbmdzJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiOyhmdW5jdGlvbigkLHcpe3ZhciBzPSJfc2tpcCIscj0vXHxpZC1bMC05XSstWzAtOV0rLyxhPW5ldyBSZWdFeHAocysiWzAtOV0qJCIpLGI9W10saD1bXSxTPXt9LGM9MCxkPXVuZGVmaW5lZCxJPSJ8IixIPVtdLGU9ZmFsc2UsZixnPWZhbHNlOyQuc2FwLmhpc3Rvcnk9ZnVuY3Rpb24oQSl7aWYoIXEuaXNQbGFpbk9iamVjdChBKSl7cmV0dXJufWlmKCFnKXt2YXIgVz0kKHcpLEI9KHcubG9jYXRpb24uaHJlZi5zcGxpdCgiIyIpWzFdfHwiIik7Vy5iaW5kKCdoYXNoY2hhbmdlJyxrKTtpZigkLmlzQXJyYXkoQS5yb3V0ZXMpKXt2YXIgaSxDO2ZvcihpPTA7aTxBLnJvdXRlcy5sZW5ndGg7aSsrKXtDPUEucm91dGVzW2ldO2lmKEMucGF0aCYmQy5oYW5kbGVyKXskLnNhcC5oaXN0b3J5LmFkZFJvdXRlKEMucGF0aCxDLmhhbmRsZXIpfX19aWYocS5pc0Z1bmN0aW9uKEEuZGVmYXVsdEhhbmRsZXIpKXtmPUEuZGVmYXVsdEhhbmRsZXJ9aC5wdXNoKEIpO2lmKEIubGVuZ3RoPjEpe1cudHJpZ2dlcigiaGFzaGNoYW5nZSIsW3RydWVdKX1lbHNle2Q9Qn1nPXRydWV9fTskLnNhcC5oaXN0b3J5LmFkZEhpc3Rvcnk9ZnVuY3Rpb24oaSxBLEIsVil7dmFyIEMsRDtpZihCPT09dW5kZWZpbmVkKXtCPXRydWV9aWYoIVYpe0Q9bihpLEEpO0M9byhEKTtpZihDKXtEKz0oSStDKX1EKz0oSSsoQj8iMSI6IjAiKSl9ZWxzZXtEPW0oZCl9SC5wdXNoKEQpO1NbRF09dHJ1ZTt3LmxvY2F0aW9uLmhhc2g9RDtyZXR1cm4gRH07JC5zYXAuaGlzdG9yeS5hZGRWaXJ0dWFsSGlzdG9yeT1mdW5jdGlvbigpeyQuc2FwLmhpc3RvcnkuYWRkSGlzdG9yeSgiIix1bmRlZmluZWQsZmFsc2UsdHJ1ZSl9OyQuc2FwLmhpc3RvcnkuYWRkUm91dGU9ZnVuY3Rpb24oaSxBLFQpe2lmKFQpe0E9cS5wcm94eShBLFQpfXZhciBSPXt9O1Iuc0lkZW50aWZpZXI9aTtSWydhY3Rpb24nXT1BO2IucHVzaChSKTtyZXR1cm4gdGhpc307JC5zYXAuaGlzdG9yeS5zZXREZWZhdWx0SGFuZGxlcj1mdW5jdGlvbihpKXtmPWl9OyQuc2FwLmhpc3RvcnkuZ2V0RGVmYXVsdEhhbmRsZXI9ZnVuY3Rpb24oKXtyZXR1cm4gZn07JC5zYXAuaGlzdG9yeS5iYWNrVG9IYXNoPWZ1bmN0aW9uKGkpe2k9aXx8IiI7dmFyIEE7aWYoaC5sZW5ndGg9PT0xKXtpZigkLmlzRnVuY3Rpb24oZikpe2YoKX19ZWxzZXtBPWooZCxpKTtpZihBPDApe3cuaGlzdG9yeS5nbyhBKX1lbHNle3Euc2FwLmxvZy5lcnJvcigialF1ZXJ5LnNhcC5oaXN0b3J5LmJhY2tUb0hhc2g6ICIraSsiaXMgbm90IGluIHRoZSBoaXN0b3J5IHN0YWNrIG9yIGl0J3MgYWZ0ZXIgdGhlIGN1cnJlbnQgaGFzaCIpfX19OyQuc2FwLmhpc3RvcnkuYmFja1Rocm91Z2hQYXRoPWZ1bmN0aW9uKFApe1A9UHx8IiI7UD13LmVuY29kZVVSSUNvbXBvbmVudChQKTt2YXIgaTtpZihoLmxlbmd0aD09PTEpe2lmKCQuaXNGdW5jdGlvbihmKSl7ZigpfX1lbHNle2k9aihkLFAsdHJ1ZSk7aWYoaTwwKXt3Lmhpc3RvcnkuZ28oaSl9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoImpRdWVyeS5zYXAuaGlzdG9yeS5iYWNrVGhyb3VnaFBhdGg6IHRoZXJlJ3Mgbm8gaGlzdG9yeSBzdGF0ZSB3aGljaCBoYXMgdGhlICIrUCsiIGlkZW50aWZpZXIgaW4gdGhlIGhpc3Rvcnkgc3RhY2sgYmVmb3JlIHRoZSBjdXJyZW50IGhhc2giKX19fTskLnNhcC5oaXN0b3J5LmJhY2s9ZnVuY3Rpb24oaSl7aWYoaC5sZW5ndGg9PT0xKXtpZigkLmlzRnVuY3Rpb24oZikpe2YoJC5zYXAuaGlzdG9yeS5OYXZUeXBlLkJhY2spfX1lbHNle2lmKCFpKXtpPTF9dy5oaXN0b3J5LmdvKC0xKmkpfX07JC5zYXAuaGlzdG9yeS5OYXZUeXBlPXt9OyQuc2FwLmhpc3RvcnkuTmF2VHlwZS5CYWNrPSJfYmFjayI7JC5zYXAuaGlzdG9yeS5OYXZUeXBlLkZvcndhcmQ9Il9mb3J3YXJkIjskLnNhcC5oaXN0b3J5Lk5hdlR5cGUuQm9va21hcms9Il9ib29rbWFyayI7JC5zYXAuaGlzdG9yeS5OYXZUeXBlLlVua25vd249Il91bmtub3duIjtmdW5jdGlvbiBqKEMsVCxQKXt2YXIgQT0kLmluQXJyYXkoQyxoKSxCLGksRDtpZihBPjApe2lmKFApe2ZvcihpPUEtMTtpPj0wO2ktLSl7RD1oW2ldO2lmKEQuaW5kZXhPZihUKT09PTAmJiF1KEQpKXtyZXR1cm4gaS1BfX19ZWxzZXtCPSQuaW5BcnJheShULGgpO2lmKChCPT09LTEpJiZULmxlbmd0aD09PTApe3JldHVybi0xKkF9aWYoKEI+LTEpJiYoQjxBKSl7cmV0dXJuIEItQX19fXJldHVybiAwfWZ1bmN0aW9uIGsoRSxNKXt2YXIgaT0ody5sb2NhdGlvbi5ocmVmLnNwbGl0KCIjIilbMV18fCIiKTtpPWwoaSk7aWYoTXx8IVNbaV0pe0gucHVzaChpKX1pZighZSl7ZT10cnVlO2lmKEgubGVuZ3RoPjApe3ZhciBBPUguc2hpZnQoKTtpZihTW0FdKXt0KEEpO2RlbGV0ZSBTW0FdfWVsc2V7eChBKX1kPUF9ZT1mYWxzZX19ZnVuY3Rpb24gcChVKXt2YXIgaT1VLmluZGV4T2YoIiMiKTtpZihpPT09LTEpe3JldHVybiIifWVsc2UgaWYoaT4wJiZpIT09VS5sZW5ndGgtMSl7cmV0dXJuIFUuc2xpY2UoaSsxKX19ZnVuY3Rpb24gbChpLFIpe3ZhciBBPWksQj1pP2kuaW5kZXhPZigiIyIpOi0xLEMsRDtpZihCPT09MCl7QT1BLnNsaWNlKEIrMSl9aWYoUil7QT1BLnJlcGxhY2UociwiIil9cmV0dXJuIEF9ZnVuY3Rpb24gbShpKXt2YXIgUD1pP2k6IiI7aWYodShQKSl7dmFyIEE9UC5sYXN0SW5kZXhPZihzKTtQPVAuc2xpY2UoMCxBKX1yZXR1cm4gUCtzK2MrK31mdW5jdGlvbiBuKGksQSl7dmFyIEU9dy5lbmNvZGVVUklDb21wb25lbnQoaSk7dmFyIEI9dy5lbmNvZGVVUklDb21wb25lbnQody5KU09OLnN0cmluZ2lmeShBKSk7cmV0dXJuIEUrSStCfWZ1bmN0aW9uIG8oQSl7dmFyIEI9JC5pbkFycmF5KGQsaCksVCxpLEM7aWYoQj4tMSl7Zm9yKGk9MDtpPEIrMTtpKyspe0M9aFtpXTtpZihDLnNsaWNlKDAsQy5sZW5ndGgtMik9PT1BKXtyZXR1cm4gcS5zYXAudWlkKCl9fX1yZXR1cm4iIn1mdW5jdGlvbiB0KGkpe3ZhciBBPSQuaW5BcnJheShkLGgpO2lmKCEoQT09PS0xfHxBPT09aC5sZW5ndGgtMSkpe2guc3BsaWNlKEErMSxoLmxlbmd0aC0xLUEpfWgucHVzaChpKX1mdW5jdGlvbiB1KGkpe3JldHVybiBhLnRlc3QoaSl9ZnVuY3Rpb24gdihDLEYpe3ZhciBBPSQuaW5BcnJheShDLGgpLGk7aWYoQSE9PS0xKXtpZihGKXtmb3IoaT1BO2k8aC5sZW5ndGg7aSsrKXtpZighdShoW2ldKSl7cmV0dXJuIGktQX19fWVsc2V7Zm9yKGk9QTtpPj0wO2ktLSl7aWYoIXUoaFtpXSkpe3JldHVybiBpLUF9fXJldHVybi0xKihBKzEpfX19ZnVuY3Rpb24geChBKXt2YXIgUixCLGksUD1BLEMsRCxOLEU7aWYoZD09PXVuZGVmaW5lZCl7RD16KEEpO2lmKCFEfHwhRC5iQm9va21hcmthYmxlKXtpZihxLmlzRnVuY3Rpb24oZikpe2YoJC5zYXAuaGlzdG9yeS5OYXZUeXBlLkJvb2ttYXJrKX1yZXR1cm59fWlmKEEubGVuZ3RoPT09MCl7aWYocS5pc0Z1bmN0aW9uKGYpKXtmKCQuc2FwLmhpc3RvcnkuTmF2VHlwZS5CYWNrKX19ZWxzZXtOPXEuaW5BcnJheShBLGgpO2lmKE49PT0wKXtEPXooQSk7aWYoIUR8fCFELmJCb29rbWFya2FibGUpe2lmKHEuaXNGdW5jdGlvbihmKSl7ZigkLnNhcC5oaXN0b3J5Lk5hdlR5cGUuQmFjayl9cmV0dXJufX1pZih1KEEpKXtpZih1KGQpKXtCPXYoQSxmYWxzZSk7dy5oaXN0b3J5LmdvKEIpfWVsc2V7dmFyIEY9bmV3IFJlZ0V4cChxLnNhcC5lc2NhcGVSZWdFeHAoZCtzKSsiWzAtOV0qJCIpO2lmKEYudGVzdChBKSl7Qj12KEEsdHJ1ZSk7aWYoQil7dy5oaXN0b3J5LmdvKEIpfWVsc2V7dy5oaXN0b3J5LmJhY2soKX19ZWxzZXtCPXYoQSxmYWxzZSk7dy5oaXN0b3J5LmdvKEIpfX19ZWxzZXtpZihOPT09LTEpe0U9JC5zYXAuaGlzdG9yeS5OYXZUeXBlLlVua25vd247aC5wdXNoKEEpfWVsc2V7aWYocS5pbkFycmF5KGQsaCxOKzEpPT09LTEpe0U9JC5zYXAuaGlzdG9yeS5OYXZUeXBlLkZvcndhcmR9ZWxzZXtFPSQuc2FwLmhpc3RvcnkuTmF2VHlwZS5CYWNrfX1EPXooQSk7aWYoRCl7Uj15KEQuc0lkZW50aWZpZXIpO2lmKFIpe1IuYWN0aW9uLmFwcGx5KG51bGwsW0Qub1N0YXRlRGF0YSxFXSl9fWVsc2V7cS5zYXAubG9nLmVycm9yKCJoYXNoIGZvcm1hdCBlcnJvciEgVGhlIGN1cnJlbnQgSGFzaDogIitBKX19fX1mdW5jdGlvbiB5KEEpe3ZhciBpO2ZvcihpPTA7aTxiLmxlbmd0aDtpKyspe2lmKGJbaV0uc0lkZW50aWZpZXI9PT1BKXtyZXR1cm4gYltpXX19fWZ1bmN0aW9uIHooQSl7aWYodShBKSl7dmFyIGk9QS5sYXN0SW5kZXhPZihzKTtBPUEuc2xpY2UoMCxpKX12YXIgUD1BLnNwbGl0KEkpLFI9e307aWYoUC5sZW5ndGg9PT00fHxQLmxlbmd0aD09PTMpe1Iuc0lkZW50aWZpZXI9dy5kZWNvZGVVUklDb21wb25lbnQoUFswXSk7Ui5vU3RhdGVEYXRhPXcuSlNPTi5wYXJzZSh3LmRlY29kZVVSSUNvbXBvbmVudChQWzFdKSk7aWYoUC5sZW5ndGg9PT00KXtSLnVpZD1QWzJdfVIuYkJvb2ttYXJrYWJsZT1QW1AubGVuZ3RoLTFdPT09IjAiP2ZhbHNlOnRydWU7cmV0dXJuIFJ9ZWxzZXtyZXR1cm4gbnVsbH19fSkocSx0aGlzKTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLm1vYmlsZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAubW9iaWxlJyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5tb2JpbGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvRGV2aWNlJywnanF1ZXJ5LnNhcC5kb20nLCdqcXVlcnkuc2FwLmV2ZW50cyddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiOyhmdW5jdGlvbigkKXt2YXIgRj0vKD86XD98JilzYXAtdWkteHgtZmFrZU9TPShbXiZdKykvOyQuc2FwLnNpbXVsYXRlTW9iaWxlT25EZXNrdG9wPWZhbHNlO2lmKChELmJyb3dzZXIud2Via2l0fHwoRC5icm93c2VyLm1zaWUmJkQuYnJvd3Nlci52ZXJzaW9uPj0xMCkpJiYhcS5zdXBwb3J0LnRvdWNoKXt2YXIgcj1kb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gubWF0Y2goRik7dmFyIGE9ciYmclsxXXx8cS5zYXAuYnlJZCgic2FwLXVpLWJvb3RzdHJhcCIpLmF0dHIoImRhdGEtc2FwLXVpLXh4LWZha2VPUyIpO2lmKGEpeyQuc2FwLnNpbXVsYXRlTW9iaWxlT25EZXNrdG9wPXRydWU7dmFyIHU9e2lvczoiTW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyA1XzBfMSBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC81MzQuNDggKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzUuMSBNb2JpbGUvOUE0MDYgU2FmYXJpLzc1MzQuNDguMyIsaXBob25lOiJNb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDVfMF8xIGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzUzNC40OCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNS4xIE1vYmlsZS85QTQwNiBTYWZhcmkvNzUzNC40OC4zIixpcGFkOiJNb3ppbGxhLzUuMCAoaVBhZDsgQ1BVIE9TIDVfMV8xIGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzUzNC40NiAoS0hUTUwsIGxpa2UgR2Vja28pIE1vYmlsZS85QjIwNiIsYW5kcm9pZDoiTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMC4zOyBlbi11czsgR1QtSTkxMDAgQnVpbGQvSU1MNzRLKSBBcHBsZVdlYktpdC81MzQuNDYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzNC40NiIsYW5kcm9pZF9waG9uZToiTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMC4zOyBlbi11czsgR1QtSTkxMDAgQnVpbGQvSU1MNzRLKSBBcHBsZVdlYktpdC81MzQuNDYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzNC40NiIsYW5kcm9pZF90YWJsZXQ6Ik1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA0LjEuMjsgTmV4dXMgNyBCdWlsZC9KWjA1NEspIEFwcGxlV2ViS2l0LzUzNS4xOSAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xOC4wLjEwMjUuMTY2IFNhZmFyaS81MzUuMTkiLGJsYWNrYmVycnk6Ik1vemlsbGEvNS4wIChCQjEwOyBUb3VjaCkgQXBwbGVXZWJLaXQvNTM3LjEwKyAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vMTAuMC45LjIzNzIgTW9iaWxlIFNhZmFyaS81MzcuMTArIix3aW5waG9uZToiTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgMTAuMDsgV2luZG93cyBQaG9uZSA4LjA7IFRyaWRlbnQvNi4wOyBJRU1vYmlsZS8xMC4wOyBBUk07IFRvdWNoOyBOT0tJQTsgTHVtaWEgOTIwKSJ9W2FdO2lmKHUmJihELmJyb3dzZXIud2Via2l0JiZhIT09IndpbnBob25lInx8RC5icm93c2VyLm1zaWUmJmE9PT0id2lucGhvbmUiKSl7aWYoRC5icm93c2VyLnNhZmFyaSl7dmFyIF89d2luZG93Lm5hdmlnYXRvcjt3aW5kb3cubmF2aWdhdG9yPW5ldyBPYmplY3QoKTt3aW5kb3cubmF2aWdhdG9yLl9fcHJvdG9fXz1fO3dpbmRvdy5uYXZpZ2F0b3IuX19kZWZpbmVHZXR0ZXJfXygndXNlckFnZW50JyxmdW5jdGlvbigpe3JldHVybiB1fSl9ZWxzZXtPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCJ1c2VyQWdlbnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdX19KX1pZihELmJyb3dzZXIud2Via2l0KXtxLmJyb3dzZXIubXNpZT1xLmJyb3dzZXIub3BlcmE9cS5icm93c2VyLm1vemlsbGE9ZmFsc2U7cS5icm93c2VyLndlYmtpdD10cnVlO3EuYnJvd3Nlci52ZXJzaW9uPSI1MzQuNDYifWVsc2V7fUQuX3VwZGF0ZSgkLnNhcC5zaW11bGF0ZU1vYmlsZU9uRGVza3RvcCl9fX0kLm9zPSQuZXh0ZW5kKHtvczpELm9zLm5hbWUsdmVyc2lvbjpELm9zLnZlcnNpb25TdHIsZlZlcnNpb246RC5vcy52ZXJzaW9ufSwkLm9zKTskLm9zW0Qub3MubmFtZV09dHJ1ZTskLmV4dGVuZCgkLnN1cHBvcnQse3JldGluYTp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbz49Mn0pOyQuZGV2aWNlPSQuZXh0ZW5kKHt9LCQuZGV2aWNlKTskLmRldmljZS5pcz0kLmV4dGVuZCh7c3RhbmRhbG9uZTp3aW5kb3cubmF2aWdhdG9yLnN0YW5kYWxvbmUsbGFuZHNjYXBlOkQub3JpZW50YXRpb24ubGFuZHNjYXBlLHBvcnRyYWl0OkQub3JpZW50YXRpb24ucG9ydHJhaXQsaXBob25lOkQub3MuaW9zJiZELnN5c3RlbS5waG9uZSxpcGFkOkQub3MuaW9zJiZELnN5c3RlbS50YWJsZXQsYW5kcm9pZF9waG9uZTpELnN5c3RlbS5waG9uZSYmRC5vcy5hbmRyb2lkLGFuZHJvaWRfdGFibGV0OkQuc3lzdGVtLnRhYmxldCYmRC5vcy5hbmRyb2lkLHRhYmxldDpELnN5c3RlbS50YWJsZXQscGhvbmU6RC5zeXN0ZW0ucGhvbmUsZGVza3RvcDpELnN5c3RlbS5kZXNrdG9wfSwkLmRldmljZS5pcyk7dmFyIGI9ZmFsc2U7JC5zYXAuaW5pdE1vYmlsZT1mdW5jdGlvbihvKXt2YXIgYz0kKCJoZWFkIik7aWYoIWIpe2I9dHJ1ZTtvPSQuZXh0ZW5kKHt9LHt2aWV3cG9ydDp0cnVlLHN0YXR1c0JhcjoiZGVmYXVsdCIsaGlkZUJyb3dzZXI6dHJ1ZSxwcmV2ZW50U2Nyb2xsOnRydWUscHJldmVudFBob25lTnVtYmVyRGV0ZWN0aW9uOnRydWUsdXNlRnVsbFNjcmVlbkhlaWdodDp0cnVlLGhvbWVJY29uUHJlY29tcG9zZWQ6ZmFsc2V9LG8pO2lmKEQub3MuaW9zJiZvLnByZXZlbnRQaG9uZU51bWJlckRldGVjdGlvbil7Yy5hcHBlbmQoJCgnPG1ldGEgbmFtZT0iZm9ybWF0LWRldGVjdGlvbiIgY29udGVudD0idGVsZXBob25lPW5vIj4nKSl9ZWxzZSBpZihELmJyb3dzZXIubXNpZSl7Yy5hcHBlbmQoJCgnPG1ldGEgaHR0cC1lcXVpdj0iY2xlYXJ0eXBlIiBjb250ZW50PSJvbiI+JykpO2MuYXBwZW5kKCQoJzxtZXRhIG5hbWU9Im1zYXBwbGljYXRpb24tdGFwLWhpZ2hsaWdodCIgY29udGVudD0ibm8iLz4nKSl9dmFyIGk9RC5vcy5pb3MmJkQub3MudmVyc2lvbj49NyYmRC5vcy52ZXJzaW9uPDgmJkQuYnJvd3Nlci5uYW1lPT09InNmIjtpZihvLnZpZXdwb3J0KXt2YXIgbTtpZihpJiZELnN5c3RlbS5waG9uZSl7bT0nbWluaW1hbC11aSwgaW5pdGlhbC1zY2FsZT0xLjAsIG1heGltdW0tc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPTAnfWVsc2UgaWYoaSYmRC5zeXN0ZW0udGFibGV0KXttPSdpbml0aWFsLXNjYWxlPTEuMCwgbWF4aW11bS1zY2FsZT0xLjAsIHVzZXItc2NhbGFibGU9bm8nfWVsc2UgaWYoJC5kZXZpY2UuaXMuaXBob25lJiYoTWF0aC5tYXgod2luZG93LnNjcmVlbi5oZWlnaHQsd2luZG93LnNjcmVlbi53aWR0aCk9PT01NjgpKXttPSJ1c2VyLXNjYWxhYmxlPTAsIGluaXRpYWwtc2NhbGU9MS4wIn1lbHNlIGlmKEQub3MuYW5kcm9pZCYmRC5vcy52ZXJzaW9uPDMpe209IndpZHRoPWRldmljZS13aWR0aCwgaGVpZ2h0PWRldmljZS1oZWlnaHQsIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyJ9ZWxzZSBpZihELm9zLndpbnBob25lKXttPSJ3aWR0aD0zMjAsIHVzZXItc2NhbGFibGU9bm8ifWVsc2V7bT0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCwgbWF4aW11bS1zY2FsZT0xLjAsIHVzZXItc2NhbGFibGU9bm8ifWMuYXBwZW5kKCQoJzxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSInK20rJyI+JykpfWlmKEQub3MuaW9zKXtjLmFwcGVuZCgkKCc8bWV0YSBuYW1lPSJhcHBsZS1tb2JpbGUtd2ViLWFwcC1jYXBhYmxlIiBjb250ZW50PSJ5ZXMiPicpKTtjLmFwcGVuZCgkKCc8bWV0YSBuYW1lPSJhcHBsZS1tb2JpbGUtd2ViLWFwcC1zdGF0dXMtYmFyLXN0eWxlIiBjb250ZW50PSInK28uc3RhdHVzQmFyKyciPicpKX1pZihvLnByZXZlbnRTY3JvbGwpeyQod2luZG93KS5iaW5kKCJ0b3VjaG1vdmUiLGZ1bmN0aW9uIHNhcEluaXRNb2JpbGVUb3VjaE1vdmVIYW5kbGUoZSl7aWYoIWUuaXNNYXJrZWQoKSl7ZS5wcmV2ZW50RGVmYXVsdCgpfX0pfWlmKG8udXNlRnVsbFNjcmVlbkhlaWdodCl7JChmdW5jdGlvbigpe2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5oZWlnaHQ9IjEwMCUifSl9fWlmKG8uaG9tZUljb24pe3ZhciBJO2lmKHR5cGVvZiBvLmhvbWVJY29uPT09InN0cmluZyIpe0k9e3Bob25lOm8uaG9tZUljb259fWVsc2V7ST0kLmV4dGVuZCh7fSxvLmhvbWVJY29uKX1JLnByZWNvbXBvc2VkPW8uaG9tZUljb25QcmVjb21wb3NlZHx8SS5wcmVjb21wb3NlZDtJLmZhdmljb249by5ob21lSWNvbi5pY29ufHxJLmZhdmljb247SS5pY29uPXVuZGVmaW5lZDskLnNhcC5zZXRJY29ucyhJKX19OyQuc2FwLnNldEljb25zPWZ1bmN0aW9uKGkpe2lmKCFpfHwodHlwZW9mIGkhPT0ib2JqZWN0IikpeyQuc2FwLmxvZy53YXJuaW5nKCJDYWxsIHRvIGpRdWVyeS5zYXAuc2V0SWNvbnMoKSBoYXMgYmVlbiBpZ25vcmVkIGJlY2F1c2UgdGhlcmUgd2VyZSBubyBpY29ucyBnaXZlbiBvciB0aGUgYXJndW1lbnQgd2FzIG5vdCBhbiBvYmplY3QuIik7cmV0dXJufXZhciBjPSQoImhlYWQiKSxwPWkucHJlY29tcG9zZWQ/Ii1wcmVjb21wb3NlZCI6IiIsZz1mdW5jdGlvbihoKXtyZXR1cm4gaVtoXXx8aVsndGFibGV0QDInXXx8aVsncGhvbmVAMiddfHxpWydwaG9uZSddfHxpWyd0YWJsZXQnXX0scz17InBob25lIjoiIiwidGFibGV0IjoiNzJ4NzIiLCJwaG9uZUAyIjoiMTE0eDExNCIsInRhYmxldEAyIjoiMTQ0eDE0NCJ9O2lmKGlbImZhdmljb24iXSl7dmFyIGQ9Yy5maW5kKCJbcmVsXj1zaG9ydGN1dF0iKTtkLmVhY2goZnVuY3Rpb24oKXtpZih0aGlzLnJlbD09PSJzaG9ydGN1dCBpY29uIil7JCh0aGlzKS5yZW1vdmUoKX19KTtjLmFwcGVuZCgkKCc8bGluayByZWw9InNob3J0Y3V0IGljb24iIGhyZWY9IicraVsiZmF2aWNvbiJdKyciIC8+JykpfWlmKGcoInBob25lIikpe2MuZmluZCgiW3JlbD1hcHBsZS10b3VjaC1pY29uXSIpLnJlbW92ZSgpO2MuZmluZCgiW3JlbD1hcHBsZS10b3VjaC1pY29uLXByZWNvbXBvc2VkXSIpLnJlbW92ZSgpfWZvcih2YXIgZSBpbiBzKXtpW2VdPWlbZV18fGcoZSk7aWYoaVtlXSl7dmFyIGY9c1tlXTtjLmFwcGVuZCgkKCc8bGluayByZWw9ImFwcGxlLXRvdWNoLWljb24nK3ArJyIgJysoZj8nc2l6ZXM9IicrZisnIic6IiIpKycgaHJlZj0iJytpW2VdKyciIC8+JykpfX19fSkocSk7cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5wcm9wZXJ0aWVzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5wcm9wZXJ0aWVzJyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5wcm9wZXJ0aWVzIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnanF1ZXJ5LnNhcC5zamF4J10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBQPWZ1bmN0aW9uKCl7dGhpcy5tUHJvcGVydGllcz17fTt0aGlzLmFLZXlzPVtdfTtQLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihrLGQpe3ZhciB2PXRoaXMubVByb3BlcnRpZXNba107aWYodHlwZW9mKHYpPT0ic3RyaW5nIil7cmV0dXJuIHZ9ZWxzZSBpZihkKXtyZXR1cm4gZH1yZXR1cm4gbnVsbH07UC5wcm90b3R5cGUuZ2V0S2V5cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFLZXlzfTtQLnByb3RvdHlwZS5zZXRQcm9wZXJ0eT1mdW5jdGlvbihrLHYpe2lmKHR5cGVvZih2KSE9InN0cmluZyIpe3JldHVybn1pZih0eXBlb2YodGhpcy5tUHJvcGVydGllc1trXSkhPSJzdHJpbmciKXt0aGlzLmFLZXlzLnB1c2goayl9dGhpcy5tUHJvcGVydGllc1trXT12fTtQLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBjPW5ldyBQKCk7Yy5tUHJvcGVydGllcz1xLmV4dGVuZCh7fSx0aGlzLm1Qcm9wZXJ0aWVzKTtjLmFLZXlzPXEubWVyZ2UoW10sdGhpcy5hS2V5cyk7cmV0dXJuIGN9O3ZhciByPS8oPzpefFxyXG58XHJ8XG4pWyBcdFxmXSovO3ZhciBhPS8oXFx1WzAtOWEtZkEtRl17MCw0fSl8KFxcLil8KFxcJCl8KFsgXHRcZl0qWyBcdFxmOj1dWyBcdFxmXSopL2c7dmFyIGU9eydcXGYnOidcZicsJ1xcbic6J1xuJywnXFxyJzonXHInLCdcXHQnOidcdCd9O2Z1bmN0aW9uIHAodCxvKXt2YXIgbD10LnNwbGl0KHIpLEwsayx2LEssaSxtLGI7by5tUHJvcGVydGllcz17fTtvLmFLZXlzPVtdO2ZvcihpPTA7aTxsLmxlbmd0aDtpKyspe0w9bFtpXTtpZihMPT09IiJ8fEwuY2hhckF0KDApPT09IiMifHxMLmNoYXJBdCgwKT09PSIhIil7Y29udGludWV9YS5sYXN0SW5kZXg9Yj0wO3Y9IiI7Sz10cnVlO3doaWxlKG09YS5leGVjKEwpKXtpZihiPG0uaW5kZXgpe3YrPUwuc2xpY2UoYixtLmluZGV4KX1iPWEubGFzdEluZGV4O2lmKG1bMV0pe2lmKG1bMV0ubGVuZ3RoIT09Nil7dGhyb3cgbmV3IEVycm9yKCJJbmNvbXBsZXRlIFVuaWNvZGUgRXNjYXBlICciK21bMV0rIiciKX12Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KG1bMV0uc2xpY2UoMiksMTYpKX1lbHNlIGlmKG1bMl0pe3YrPWVbbVsyXV18fG1bMl0uc2xpY2UoMSl9ZWxzZSBpZihtWzNdKXtMPWxbKytpXTthLmxhc3RJbmRleD1iPTB9ZWxzZSBpZihtWzRdKXtpZihLKXtLPWZhbHNlO2s9djt2PSIifWVsc2V7dis9bVs0XX19fWlmKGI8TC5sZW5ndGgpe3YrPUwuc2xpY2UoYil9aWYoSyl7az12O3Y9IiJ9by5hS2V5cy5wdXNoKGspO28ubVByb3BlcnRpZXNba109dn1xLnNhcC51bmlxdWUoby5hS2V5cyl9cS5zYXAucHJvcGVydGllcz1mdW5jdGlvbiBwcm9wZXJ0aWVzKG0pe3ZhciBvPW5ldyBQKCk7bT1xLmV4dGVuZCh7dXJsOnVuZGVmaW5lZCxoZWFkZXJzOnt9fSxtKTtpZih0eXBlb2YobS51cmwpPT0ic3RyaW5nIil7dmFyIHQ9cS5zYXAubG9hZFJlc291cmNlKHt1cmw6bS51cmwsZGF0YVR5cGU6J3RleHQnLGhlYWRlcnM6bS5oZWFkZXJzLGZhaWxPbkVycm9yOmZhbHNlfSk7aWYodHlwZW9mKHQpPT0ic3RyaW5nIil7cCh0LG8pfX1yZXR1cm4gb307cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5yZXNvdXJjZXMnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLnJlc291cmNlcycpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAucmVzb3VyY2VzIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnanF1ZXJ5LnNhcC5wcm9wZXJ0aWVzJywnanF1ZXJ5LnNhcC5zdHJpbmdzJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciByPS9eKCg/OltBLVpdezIsM30oPzotW0EtWl17M30pezAsM30pfFtBLVpdezR9fFtBLVpdezUsOH0pKD86LShbQS1aXXs0fSkpPyg/Oi0oW0EtWl17Mn18WzAtOV17M30pKT8oLVswLTlBLVpdezUsOH18KD86WzAtOV1bMC05QS1aXXszfSkpKig/Oi0oWzAtOUEtV1laXSg/Oi1bMC05QS1aXXsyLDh9KSspKSooPzotKFgoPzotWzAtOUEtWl17MSw4fSkrKSk/JC9pO3ZhciBNPXsiaGUiOiJpdyIsInlpIjoiamkiLCJpZCI6ImluIiwic3IiOiJzaCJ9O3ZhciBhPXsiaXciOiJoZSIsImppIjoieWkiLCJpbiI6ImlkIiwic24iOiJzciJ9O3ZhciBiPS8tKHNhcHRyY3xzYXBwc2QpKD86LXwkKS9pO2Z1bmN0aW9uIG4oTCl7dmFyIG07aWYodHlwZW9mIEw9PT0nc3RyaW5nJyYmKG09ci5leGVjKEwucmVwbGFjZSgvXy9nLCctJykpKSl7dmFyIGc9bVsxXS50b0xvd2VyQ2FzZSgpO2c9TVtnXXx8Zzt2YXIgUz1tWzJdP21bMl0udG9Mb3dlckNhc2UoKTp1bmRlZmluZWQ7dmFyIFI9bVszXT9tWzNdLnRvVXBwZXJDYXNlKCk6dW5kZWZpbmVkO3ZhciBWPW1bNF07dmFyIHA9bVs2XTtpZigocCYmKG09Yi5leGVjKHApKSl8fChWJiYobT1iLmV4ZWMoVikpKSl7cmV0dXJuImVuX1VTXyIrbVsxXS50b0xvd2VyQ2FzZSgpfWlmKGc9PT0iemgiJiYhUil7aWYoUz09PSJoYW5zIil7Uj0iQ04ifWVsc2UgaWYoUz09PSJoYW50Iil7Uj0iVFcifX1yZXR1cm4gZysoUj8iXyIrUisoVj8iXyIrVi5zbGljZSgxKS5yZXBsYWNlKCItIiwiXyIpOiIiKToiIil9fWZ1bmN0aW9uIGQoKXt2YXIgTDtpZih3aW5kb3cuc2FwJiZzYXAudWkmJnNhcC51aS5nZXRDb3JlKXtMPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldExhbmd1YWdlKCk7TD1uKEwpfXJldHVybiBMfHwiZW4ifWZ1bmN0aW9uIGMoTCl7dmFyIG07aWYodHlwZW9mIEw9PT0nc3RyaW5nJyYmKG09ci5leGVjKEwucmVwbGFjZSgvXy9nLCctJykpKSl7dmFyIGc9bVsxXS50b0xvd2VyQ2FzZSgpO2c9YVtnXXx8ZztyZXR1cm4gZysobVszXT8iLSIrbVszXS50b1VwcGVyQ2FzZSgpKyhtWzRdPyItIittWzRdLnNsaWNlKDEpLnJlcGxhY2UoIl8iLCItIik6IiIpOiIiKX19dmFyIGU9L14oKD86W14/I10qXC8pP1teXC8/I10qKShcLlteLlwvPyNdKykoKD86XD8oW14jXSopKT8oPzojKC4qKSk/KSQvO3ZhciB2PVsiLnByb3BlcnRpZXMiLCIuaGRidGV4dGJ1bmRsZSJdO2Z1bmN0aW9uIHModSl7dmFyIG09ZS5leGVjKHUpO3JldHVybiBtJiZ7dXJsOnUscHJlZml4Om1bMV0sZXh0Om1bMl0scXVlcnk6bVs0XSxoYXNoOihtWzVdfHwiIiksc3VmZml4Om1bMl0rKG1bM118fCIiKX19dmFyIEI9ZnVuY3Rpb24odSxMLGkpe3RoaXMuc0xvY2FsZT1uKEwpfHxkKCk7dGhpcy5vVXJsSW5mbz1zKHUpO2lmKCF0aGlzLm9VcmxJbmZvfHxxLmluQXJyYXkodGhpcy5vVXJsSW5mby5leHQsdik8MCl7dGhyb3cgbmV3IEVycm9yKCJyZXNvdXJjZSBVUkwgJyIrdSsiJyBoYXMgdW5rbm93biB0eXBlIChzaG91bGQgYmUgb25lIG9mICIrdi5qb2luKCIsIikrIikiKX10aGlzLmJJbmNsdWRlSW5mbz1pO3RoaXMuYUN1c3RvbUJ1bmRsZXM9W107dGhpcy5hUHJvcGVydHlGaWxlcz1bXTt0aGlzLmFMb2NhbGVzPVtdO2wodGhpcyx0aGlzLnNMb2NhbGUpfTtCLnByb3RvdHlwZT17fTtCLnByb3RvdHlwZS5fZW5oYW5jZT1mdW5jdGlvbihDKXtpZihDJiZDIGluc3RhbmNlb2YgQil7dGhpcy5hQ3VzdG9tQnVuZGxlcy5wdXNoKEMpfWVsc2V7cS5zYXAubG9nLmVycm9yKCJDdXN0b20gUmVzb3VyY2VCdW5kbGUgaXMgZWl0aGVyIHVuZGVmaW5lZCBvciBub3QgYW4gaW5zdGFuY2VvZiBqUXVlcnkuc2FwLnV0aWwuUmVzb3VyY2VCdW5kbGUuIFRoZXJlZm9yZSB0aGlzIGN1c3RvbSBSZXNvdXJjZUJ1bmRsZSB3aWxsIGJlIGlnbm9yZWQhIil9fTtCLnByb3RvdHlwZS5nZXRUZXh0PWZ1bmN0aW9uKGssQSxDKXt2YXIgVj1udWxsO2Zvcih2YXIgaT10aGlzLmFDdXN0b21CdW5kbGVzLmxlbmd0aC0xO2k+PTA7aS0tKXtWPXRoaXMuYUN1c3RvbUJ1bmRsZXNbaV0uZ2V0VGV4dChrLEEsdHJ1ZSk7aWYoViE9bnVsbCl7cmV0dXJuIFZ9fWZvcih2YXIgaT0wO2k8dGhpcy5hUHJvcGVydHlGaWxlcy5sZW5ndGg7aSsrKXtWPXRoaXMuYVByb3BlcnR5RmlsZXNbaV0uZ2V0UHJvcGVydHkoayk7aWYodHlwZW9mKFYpPT09InN0cmluZyIpe2JyZWFrfX1pZih0eXBlb2YoVikhPT0ic3RyaW5nIil7dmFyIHQ9dGhpcy5hTG9jYWxlc1swXTt3aGlsZSh0Lmxlbmd0aD4wKXtpZih0PT0iemhfSEsiKXt0PSJ6aF9UVyJ9ZWxzZXt2YXIgcD10Lmxhc3RJbmRleE9mKCdfJyk7aWYocD49MCl7dD10LnN1YnN0cmluZygwLHApfWVsc2UgaWYodCE9ImVuIil7dD0iZW4ifWVsc2V7dD0iIn19dmFyIFA9bCh0aGlzLHQpO2lmKFA9PW51bGwpe2NvbnRpbnVlfVY9UC5nZXRQcm9wZXJ0eShrKTtpZih0eXBlb2YoVik9PT0ic3RyaW5nIil7YnJlYWt9fX1pZighQyYmdHlwZW9mKFYpIT09InN0cmluZyIpe1Y9a31pZih0eXBlb2YoVik9PT0ic3RyaW5nIil7aWYoQSl7Vj1xLnNhcC5mb3JtYXRNZXNzYWdlKFYsQSl9aWYodGhpcy5iSW5jbHVkZUluZm8pe1Y9bmV3IFN0cmluZyhWKTtWLm9yaWdpbkluZm89e3NvdXJjZToiUmVzb3VyY2UgQnVuZGxlIix1cmw6dGhpcy5vVXJsSW5mby51cmwsbG9jYWxlOnRoaXMuc0xvY2FsZSxrZXk6a319fXJldHVybiBWfTtmdW5jdGlvbiBsKG8sTCl7dmFyIHU9by5vVXJsSW5mbyxSLHA7aWYocS5pbkFycmF5KEwsby5hTG9jYWxlcyk9PS0xKXtpZihmKEwpKXtzd2l0Y2godS5leHQpe2Nhc2UnLmhkYnRleHRidW5kbGUnOlI9e3VybDp1LnVybCxoZWFkZXJzOnsiQWNjZXB0LUxhbmd1YWdlIjpjKEwpfHwiIn19O2JyZWFrO2RlZmF1bHQ6Uj17dXJsOnUucHJlZml4KyhMPyJfIitMOiIiKSt1LnN1ZmZpeH07YnJlYWt9cD1xLnNhcC5wcm9wZXJ0aWVzKFIpfWVsc2V7cD17Z2V0UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkfX19by5hUHJvcGVydHlGaWxlcy5wdXNoKHApO28uYUxvY2FsZXMucHVzaChMKTtyZXR1cm4gcH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBmKEwpe3ZhciBnPXdpbmRvdy5zYXAmJnNhcC51aSYmc2FwLnVpLmdldENvcmUmJnNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFN1cHBvcnRlZExhbmd1YWdlcygpO2lmKGcmJmcubGVuZ3RoPjApe3JldHVybiBxLmluQXJyYXkoTCxnKT49MH1yZXR1cm4gdHJ1ZX1xLnNhcC5yZXNvdXJjZXM9ZnVuY3Rpb24gcmVzb3VyY2VzKHApe3A9cS5leHRlbmQoe3VybDoiIixsb2NhbGU6dW5kZWZpbmVkLGluY2x1ZGVJbmZvOmZhbHNlfSxwKTt2YXIgbz1uZXcgQihwLnVybCxwLmxvY2FsZSxwLmluY2x1ZGVJbmZvKTtyZXR1cm4gb307cS5zYXAucmVzb3VyY2VzLl9nZXRGYWxsYmFja0xvY2FsZXM9ZnVuY3Rpb24oTCxTKXt2YXIgdD1uKEwpLGc9W107ZnVuY3Rpb24gaChMKXtyZXR1cm4hU3x8Uy5sZW5ndGg9PT0wfHxxLmluQXJyYXkoTCxTKT49MH13aGlsZSh0KXtpZihoKHQpKXtnLnB1c2godCl9aWYodD09PSJ6aF9ISyIpe3Q9InpoX1RXIn1lbHNle3ZhciBwPXQubGFzdEluZGV4T2YoJ18nKTtpZihwPjApe3Q9dC5zbGljZSgwLHApfWVsc2UgaWYodCE9PSJlbiIpe3Q9ImVuIn1lbHNle3Q9IiJ9fX1pZihoKCIiKSl7Zy5wdXNoKCIiKX1yZXR1cm4gZ307cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLkdsb2JhbCcpKXtpZih3aW5kb3cuT3BlbkFqYXgmJndpbmRvdy5PcGVuQWpheC5odWIpe09wZW5BamF4Lmh1Yi5yZWdpc3RlckxpYnJhcnkoInNhcCIsImh0dHA6Ly93d3cuc2FwLmNvbS8iLCIwLjEiLHt9KX1qUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5HbG9iYWwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvR2xvYmFsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnanF1ZXJ5LnNhcC5kb20nXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7aWYodHlwZW9mIHdpbmRvdy5zYXAhPT0ib2JqZWN0IiYmdHlwZW9mIHdpbmRvdy5zYXAhPT0iZnVuY3Rpb24iKXt3aW5kb3cuc2FwPXt9fWlmKHR5cGVvZiB3aW5kb3cuc2FwLnVpIT09Im9iamVjdCIpe3dpbmRvdy5zYXAudWk9e319c2FwLnVpPXEuZXh0ZW5kKHNhcC51aSx7dmVyc2lvbjoiMS4yMi4xMCIsYnVpbGRpbmZvOntsYXN0Y2hhbmdlOiIke2xkaS5zY20ucmV2aXNpb259IixidWlsZHRpbWU6IjIwMTQwOTI5MTY0OCJ9fSk7c2FwLnVpLmdldFZlcnNpb25JbmZvPWZ1bmN0aW9uKEwpe2lmKCFzYXAudWkudmVyc2lvbmluZm8pe3NhcC51aS52ZXJzaW9uaW5mbz1xLnNhcC5sb2FkUmVzb3VyY2UoInNhcC11aS12ZXJzaW9uLmpzb24iKX1pZihMIT09dW5kZWZpbmVkKXt2YXIgYT1zYXAudWkudmVyc2lvbmluZm8ubGlicmFyaWVzO2Zvcih2YXIgaT0wLGw9YS5sZW5ndGg7aTxsO2krKyl7aWYoYVtpXS5uYW1lPT09TCl7cmV0dXJuIGFbaV19fX1lbHNle3JldHVybiBzYXAudWkudmVyc2lvbmluZm99fTtzYXAudWkubmFtZXNwYWNlPWZ1bmN0aW9uKG4pe3JldHVybiBxLnNhcC5nZXRPYmplY3QobiwwKX07c2FwLnVpLmxhenlSZXF1aXJlPWZ1bmN0aW9uKGMsbSxNKXt2YXIgZj1jLnJlcGxhY2UoL1wvL2dpLCJcLiIpLGw9Zi5sYXN0SW5kZXhPZigiLiIpLHA9Zi5zdWJzdHIoMCxsKSxDPWYuc3Vic3RyKGwrMSksUD1xLnNhcC5nZXRPYmplY3QocCwwKSxvPVBbQ10sYT0obXx8Im5ldyIpLnNwbGl0KCIgIiksYj1xLmluQXJyYXkoIm5ldyIsYSk7TT1NfHxmO2lmKCFvKXtpZihiPj0wKXtvPWZ1bmN0aW9uKCl7cS5zYXAubG9nLmRlYnVnKCJsYXp5IHN0dWIgZm9yICciK2YrIicgKGNvbnN0cnVjdG9yKSBjYWxsZWQuIik7cS5zYXAucmVxdWlyZShNKTt2YXIgcj1QW0NdO2lmKHIuX3NhcFVpTGF6eUxvYWRlcil7dGhyb3cgbmV3IEVycm9yKCJsYXp5UmVxdWlyZTogc3R1YiAnIitmKyInaGFzIG5vdCBiZWVuIHJlcGxhY2VkIGJ5IG1vZHVsZSAnIitNKyInIil9dmFyIGk9cS5zYXAubmV3T2JqZWN0KHIucHJvdG90eXBlKTt2YXIgUj1yLmFwcGx5KGksYXJndW1lbnRzKTtpZihSJiYodHlwZW9mIFI9PT0iZnVuY3Rpb24ifHx0eXBlb2YgUj09PSJvYmplY3QiKSl7aT1SfXJldHVybiBpfTtvLl9zYXBVaUxhenlMb2FkZXI9dHJ1ZTthLnNwbGljZShiLDEpfWVsc2V7bz17fX1QW0NdPW99cS5lYWNoKGEsZnVuY3Rpb24oaSxzKXtpZighb1tzXSl7b1tzXT1mdW5jdGlvbigpe3Euc2FwLmxvZy5kZWJ1ZygibGF6eSBzdHViIGZvciAnIitmKyIuIitzKyInIGNhbGxlZC4iKTtxLnNhcC5yZXF1aXJlKE0pO3ZhciByPVBbQ107aWYocltzXS5fc2FwVWlMYXp5TG9hZGVyKXt0aHJvdyBuZXcgRXJyb3IoImxhenlSZXF1aXJlOiBzdHViICciK2YrIi4iK3MrIicgaGFzIG5vdCBiZWVuIHJlcGxhY2VkIGJ5IGxvYWRlZCBtb2R1bGUgJyIrTSsiJyIpfXJldHVybiByW3NdLmFwcGx5KHIsYXJndW1lbnRzKX07b1tzXS5fc2FwVWlMYXp5TG9hZGVyPXRydWV9fSl9O3NhcC51aS5yZXNvdXJjZT1mdW5jdGlvbihsLHIpe3ZhciBtPXIubWF0Y2goL150aGVtZXNcLyhbXlwvXSspXC8vKTtpZihtKXtsKz0iLnRoZW1lcy4iK21bMV07cj1yLnN1YnN0cihtWzBdLmxlbmd0aCl9cmV0dXJuIHEuc2FwLmdldE1vZHVsZVBhdGgobCwnLycpK3J9O3NhcC51aS5sb2NhbFJlc291cmNlcz1mdW5jdGlvbihuKXtxLnNhcC5yZWdpc3Rlck1vZHVsZVBhdGgobiwiLi8iK24ucmVwbGFjZSgvXC4vZywiLyIpKX07cmV0dXJuIHNhcC51aX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5iYXNlLkV2ZW50Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuRXZlbnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9FdmVudCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vT2JqZWN0J10sZnVuY3Rpb24ocSxCKXsidXNlIHN0cmljdCI7dmFyIEU9Qi5leHRlbmQoInNhcC51aS5iYXNlLkV2ZW50Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzLHApe0IuYXBwbHkodGhpcyk7aWYoYXJndW1lbnRzLmxlbmd0aD4wKXt0aGlzLmluaXQoaSxzLHApfX19KTtFLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGkscyxwKXt0aGlzLnNJZD1pO3RoaXMub1NvdXJjZT1zO3RoaXMubVBhcmFtZXRlcnM9cHx8e307dGhpcy5iQ2FuY2VsQnViYmxlPWZhbHNlO3RoaXMuYlByZXZlbnREZWZhdWx0PWZhbHNlfTtFLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuc0lkPSIiO3RoaXMub1NvdXJjZT1udWxsO3RoaXMubVBhcmFtZXRlcnM9bnVsbDt0aGlzLmJDYW5jZWxCdWJibGU9ZmFsc2U7dGhpcy5iUHJldmVudERlZmF1bHQ9ZmFsc2V9O0UucHJvdG90eXBlLmdldElkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0lkfTtFLnByb3RvdHlwZS5nZXRTb3VyY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vU291cmNlfTtFLnByb3RvdHlwZS5nZXRQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubVBhcmFtZXRlcnN9O0UucHJvdG90eXBlLmdldFBhcmFtZXRlcj1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5tUGFyYW1ldGVyc1tuXX07RS5wcm90b3R5cGUuY2FuY2VsQnViYmxlPWZ1bmN0aW9uKCl7dGhpcy5iQ2FuY2VsQnViYmxlPXRydWV9O0UucHJvdG90eXBlLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7dGhpcy5iUHJldmVudERlZmF1bHQ9dHJ1ZX07cmV0dXJuIEV9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5FdmVudFByb3ZpZGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuRXZlbnRQcm92aWRlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0V2ZW50JywnLi9PYmplY3QnLCcuL09iamVjdFBvb2wnXSxmdW5jdGlvbihxLEUsQixPKXsidXNlIHN0cmljdCI7dmFyIGE9Qi5leHRlbmQoInNhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0IuYXBwbHkodGhpcyk7dGhpcy5tRXZlbnRSZWdpc3RyeT17fX19KTthLk1fRVZFTlRTPXtFdmVudEhhbmRsZXJDaGFuZ2U6IkV2ZW50SGFuZGxlckNoYW5nZSJ9O2EucHJvdG90eXBlLm9FdmVudFBvb2w9bmV3IE8oRSk7YS5wcm90b3R5cGUuYXR0YWNoRXZlbnQ9ZnVuY3Rpb24oZSxkLGYsbCl7aWYodHlwZW9mKGQpPT09ImZ1bmN0aW9uIil7bD1mO2Y9ZDtkPXVuZGVmaW5lZH1pZighdGhpcy5tRXZlbnRSZWdpc3RyeVtlXSl7dGhpcy5tRXZlbnRSZWdpc3RyeVtlXT1bXX10aGlzLm1FdmVudFJlZ2lzdHJ5W2VdLnB1c2goe29MaXN0ZW5lcjpsLGZGdW5jdGlvbjpmLG9EYXRhOmR9KTt0aGlzLmZpcmVFdmVudChhLk1fRVZFTlRTLkV2ZW50SGFuZGxlckNoYW5nZSx7RXZlbnRJZDplLHR5cGU6J2xpc3RlbmVyQXR0YWNoZWQnfSk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmF0dGFjaEV2ZW50T25jZT1mdW5jdGlvbihlLGQsZixsKXtpZih0eXBlb2YoZCk9PT0iZnVuY3Rpb24iKXtsPWY7Zj1kO2Q9dW5kZWZpbmVkfWZ1bmN0aW9uIG8oKXt0aGlzLmRldGFjaEV2ZW50KGUsbyk7Zi5hcHBseShsfHx0aGlzLGFyZ3VtZW50cyl9dGhpcy5hdHRhY2hFdmVudChlLGQsbyx1bmRlZmluZWQpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5kZXRhY2hFdmVudD1mdW5jdGlvbihlLGYsbCl7dmFyIGI9dGhpcy5tRXZlbnRSZWdpc3RyeVtlXTtpZighYil7cmV0dXJuIHRoaXN9dmFyIEw9ZmFsc2U7Zm9yKHZhciBpPTAsYz1iLmxlbmd0aDtpPGM7aSsrKXtpZihiW2ldLmZGdW5jdGlvbj09PWYmJmJbaV0ub0xpc3RlbmVyPT09bCl7Yi5zcGxpY2UoaSwxKTtMPXRydWU7YnJlYWt9fWlmKGIubGVuZ3RoPT0wKXtkZWxldGUgdGhpcy5tRXZlbnRSZWdpc3RyeVtlXX1pZihMKXt0aGlzLmZpcmVFdmVudChhLk1fRVZFTlRTLkV2ZW50SGFuZGxlckNoYW5nZSx7RXZlbnRJZDplLHR5cGU6J2xpc3RlbmVyRGV0YWNoZWQnfSl9cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmZpcmVFdmVudD1mdW5jdGlvbihlLHAsQSxiKXtpZih0eXBlb2YgcD09ImJvb2xlYW4iKXtiPUE7QT1wfXZhciBjPXRoaXMubUV2ZW50UmVnaXN0cnlbZV0sUD1mYWxzZSxvLGQsSTtpZihifHwoYyYmcS5pc0FycmF5KGMpKSl7Yz1jP2Muc2xpY2UoKTpbXTtvPXRoaXMub0V2ZW50UG9vbC5ib3Jyb3dPYmplY3QoZSx0aGlzLHApO2Zvcih2YXIgaT0wLGw9Yy5sZW5ndGg7aTxsO2krKyl7ST1jW2ldO0kuZkZ1bmN0aW9uLmNhbGwoSS5vTGlzdGVuZXJ8fHRoaXMsbyxJLm9EYXRhKX1pZihiKXtkPXRoaXMuZ2V0RXZlbnRpbmdQYXJlbnQoKTt3aGlsZShkJiYhby5iQ2FuY2VsQnViYmxlKXtjPWQubUV2ZW50UmVnaXN0cnlbZV07aWYoYyYmYyBpbnN0YW5jZW9mIEFycmF5KXtjPWMuc2xpY2UoKTtmb3IodmFyIGk9MCxsPWMubGVuZ3RoO2k8bDtpKyspe0k9Y1tpXTtJLmZGdW5jdGlvbi5jYWxsKEkub0xpc3RlbmVyfHxkLG8sSS5vRGF0YSl9fWQ9ZC5nZXRFdmVudGluZ1BhcmVudCgpfX1QPW8uYlByZXZlbnREZWZhdWx0O3RoaXMub0V2ZW50UG9vbC5yZXR1cm5PYmplY3Qobyl9aWYoQSl7cmV0dXJuIVB9ZWxzZXtyZXR1cm4gdGhpc319O2EucHJvdG90eXBlLmhhc0xpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm4hIXRoaXMubUV2ZW50UmVnaXN0cnlbZV19O2EuZ2V0RXZlbnRMaXN0PWZ1bmN0aW9uKGUpe3JldHVybiBlLm1FdmVudFJlZ2lzdHJ5fTthLnByb3RvdHlwZS5nZXRFdmVudGluZ1BhcmVudD1mdW5jdGlvbigpe3JldHVybiBudWxsfTthLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0TWV0YWRhdGEpe3JldHVybiJFdmVudFByb3ZpZGVyICIrdGhpcy5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKX1lbHNle3JldHVybiJFdmVudFByb3ZpZGVyIn19O2EucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLm1FdmVudFJlZ2lzdHJ5PXt9O0IucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3RNZXRhZGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3RNZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL01hbmFnZWRPYmplY3RNZXRhZGF0YSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRGF0YVR5cGUnLCcuL01ldGFkYXRhJ10sZnVuY3Rpb24ocSxELE0peyJ1c2Ugc3RyaWN0Ijt2YXIgYj1mdW5jdGlvbihjLEMpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpfTtiLnByb3RvdHlwZT1xLnNhcC5uZXdPYmplY3QoTS5wcm90b3R5cGUpO2IucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oYyl7dmFyIHM9Yy5tZXRhZGF0YTtNLnByb3RvdHlwZS5hcHBseVNldHRpbmdzLmNhbGwodGhpcyxjKTt2YXIgcj0vKGNoaWxkcmVufGllc3x2ZXN8b2VzfHNlc3xjaGVzfHNoZXN8eGVzfHMpJC9pO3ZhciBTPXsnY2hpbGRyZW4nOi0zLCdpZXMnOid5JywndmVzJzonZicsJ29lcyc6LTIsJ3Nlcyc6LTIsJ2NoZXMnOi0yLCdzaGVzJzotMiwneGVzJzotMiwncyc6LTF9O2Z1bmN0aW9uIG4oaSxlLG8pe3ZhciBOLEk7aT1pfHx7fTtmb3IoTiBpbiBpKXtJPWlbTl07aWYoZSYmdHlwZW9mIEkhPT0ib2JqZWN0Iil7ST17fTtJW2VdPWlbTl19ST1xLmV4dGVuZCh7fSxvLEkpO0kubmFtZT1OO2lmKEkubXVsdGlwbGU9PT10cnVlJiYhSS5zaW5ndWxhck5hbWUpe0kuc2luZ3VsYXJOYW1lPU4ucmVwbGFjZShyLGZ1bmN0aW9uKCQscCl7dmFyIFI9U1twLnRvTG93ZXJDYXNlKCldO3JldHVybiB0eXBlb2YgUj09PSJzdHJpbmciP1I6cC5zbGljZSgwLFIpfSl9aVtOXT1JfXJldHVybiBpfWZ1bmN0aW9uIGYoaSxwKXt2YXIgUj17fSxOO2ZvcihOIGluIGkpe2lmKHA9PT0oaVtOXS52aXNpYmlsaXR5PT09J3B1YmxpYycpKXtSW05dPWlbTl19fXJldHVybiBSfXZhciBhPS8oW2Etel1bXi5dKig/OlwuW2Etel1bXi5dKikqKVwuLztmdW5jdGlvbiBkKE4pe3ZhciBtPWEuZXhlYyhOKTtyZXR1cm4obSYmbVsxXSl8fCIifXRoaXMuX3NMaWJyYXJ5TmFtZT1zLmxpYnJhcnl8fGQodGhpcy5nZXROYW1lKCkpO3RoaXMuX21Qcm9wZXJ0aWVzPW4ocy5wcm9wZXJ0aWVzLCJ0eXBlIix7dHlwZToic3RyaW5nIixncm91cDoiTWlzYyJ9KTt2YXIgQT1uKHMuYWdncmVnYXRpb25zLCJ0eXBlIix7dHlwZToic2FwLnVpLmNvcmUuQ29udHJvbCIsbXVsdGlwbGU6dHJ1ZSx2aXNpYmlsaXR5OidwdWJsaWMnfSk7dGhpcy5fbUFnZ3JlZ2F0aW9ucz1mKEEsdHJ1ZSk7dGhpcy5fbVByaXZhdGVBZ2dyZWdhdGlvbnM9ZihBLGZhbHNlKTt0aGlzLl9zRGVmYXVsdEFnZ3JlZ2F0aW9uPXMuZGVmYXVsdEFnZ3JlZ2F0aW9ufHxudWxsO3RoaXMuX21Bc3NvY2lhdGlvbnM9bihzLmFzc29jaWF0aW9ucywidHlwZSIse3R5cGU6InNhcC51aS5jb3JlLkNvbnRyb2wiLG11bHRpcGxlOmZhbHNlfSk7dGhpcy5fbUV2ZW50cz1uKHMuZXZlbnRzLG51bGwse2FsbG93UHJldmVudERlZmF1bHQ6ZmFsc2V9KTt0aGlzLl9iRW5yaWNoZWQ9ZmFsc2U7aWYoYy5tZXRhZGF0YS5fX3ZlcnNpb24+MS4wKXt0aGlzLmdlbmVyYXRlQWNjZXNzb3JzKCl9fTtiLnByb3RvdHlwZS5hZnRlckFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oKXtNLnByb3RvdHlwZS5hZnRlckFwcGx5U2V0dGluZ3MuY2FsbCh0aGlzKTt2YXIgcD10aGlzLmdldFBhcmVudCgpO2lmKHAmJnAgaW5zdGFuY2VvZiBiKXt0aGlzLl9tQWxsRXZlbnRzPXEuZXh0ZW5kKHt9LHAuX21BbGxFdmVudHMsdGhpcy5fbUV2ZW50cyk7dGhpcy5fbUFsbFByb3BlcnRpZXM9cS5leHRlbmQoe30scC5fbUFsbFByb3BlcnRpZXMsdGhpcy5fbVByb3BlcnRpZXMpO3RoaXMuX21BbGxQcml2YXRlQWdncmVnYXRpb25zPXEuZXh0ZW5kKHt9LHAuX21BbGxQcml2YXRlQWdncmVnYXRpb25zLHRoaXMuX21Qcml2YXRlQWdncmVnYXRpb25zKTt0aGlzLl9tQWxsQWdncmVnYXRpb25zPXEuZXh0ZW5kKHt9LHAuX21BbGxBZ2dyZWdhdGlvbnMsdGhpcy5fbUFnZ3JlZ2F0aW9ucyk7dGhpcy5fbUFsbEFzc29jaWF0aW9ucz1xLmV4dGVuZCh7fSxwLl9tQWxsQXNzb2NpYXRpb25zLHRoaXMuX21Bc3NvY2lhdGlvbnMpO3RoaXMuX3NEZWZhdWx0QWdncmVnYXRpb249dGhpcy5fc0RlZmF1bHRBZ2dyZWdhdGlvbnx8cC5fc0RlZmF1bHRBZ2dyZWdhdGlvbjtpZihwLl9tSGlkZGVuQWdncmVnYXRpb25zKXt0aGlzLl9tSGlkZGVuQWdncmVnYXRpb25zPXEuZXh0ZW5kKHt9LHAuX21IaWRkZW5BZ2dyZWdhdGlvbnMpfX1lbHNle3RoaXMuX21BbGxFdmVudHM9dGhpcy5fbUV2ZW50czt0aGlzLl9tQWxsUHJvcGVydGllcz10aGlzLl9tUHJvcGVydGllczt0aGlzLl9tQWxsUHJpdmF0ZUFnZ3JlZ2F0aW9ucz10aGlzLl9tUHJpdmF0ZUFnZ3JlZ2F0aW9uczt0aGlzLl9tQWxsQWdncmVnYXRpb25zPXRoaXMuX21BZ2dyZWdhdGlvbnM7dGhpcy5fbUFsbEFzc29jaWF0aW9ucz10aGlzLl9tQXNzb2NpYXRpb25zfX07Yi5LaW5kPXtQUk9QRVJUWTowLFNJTkdMRV9BR0dSRUdBVElPTjoxLE1VTFRJUExFX0FHR1JFR0FUSU9OOjIsU0lOR0xFX0FTU09DSUFUSU9OOjMsTVVMVElQTEVfQVNTT0NJQVRJT046NCxFVkVOVDo1fTtiLnByb3RvdHlwZS5nZXRMaWJyYXJ5TmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zTGlicmFyeU5hbWV9O2IucHJvdG90eXBlLmlzQWJzdHJhY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYkFic3RyYWN0fTtiLnByb3RvdHlwZS5hZGRQcm9wZXJ0eT1mdW5jdGlvbihuLGkpe2kubmFtZT1uO3RoaXMuX21Qcm9wZXJ0aWVzW25dPWk7aWYoIXRoaXMuX21BbGxQcm9wZXJ0aWVzW25dKXt0aGlzLl9tQWxsUHJvcGVydGllc1tuXT1pfWlmKHRoaXMuX2JFbnJpY2hlZCl7dGhpcy5fZW5yaWNoQ2hpbGRJbmZvcygpfX07Yi5wcm90b3R5cGUuaGFzUHJvcGVydHk9ZnVuY3Rpb24obil7cmV0dXJuISF0aGlzLl9tQWxsUHJvcGVydGllc1tuXX07Yi5wcm90b3R5cGUuZ2V0UHJvcGVydGllcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tUHJvcGVydGllc307Yi5wcm90b3R5cGUuZ2V0QWxsUHJvcGVydGllcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tQWxsUHJvcGVydGllc307Yi5wcm90b3R5cGUuZ2V0QWdncmVnYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21BZ2dyZWdhdGlvbnN9O2IucHJvdG90eXBlLmhhc0FnZ3JlZ2F0aW9uPWZ1bmN0aW9uKG4pe3JldHVybiEhdGhpcy5fbUFsbEFnZ3JlZ2F0aW9uc1tuXX07Yi5wcm90b3R5cGUuZ2V0QWxsQWdncmVnYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21BbGxBZ2dyZWdhdGlvbnN9O2IucHJvdG90eXBlLmdldEFsbFByaXZhdGVBZ2dyZWdhdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbUFsbFByaXZhdGVBZ2dyZWdhdGlvbnN9O2IucHJvdG90eXBlLmdldE1hbmFnZWRBZ2dyZWdhdGlvbj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fbUFsbEFnZ3JlZ2F0aW9uc1thXXx8dGhpcy5fbUFsbFByaXZhdGVBZ2dyZWdhdGlvbnNbYV19O2IucHJvdG90eXBlLmdldERlZmF1bHRBZ2dyZWdhdGlvbk5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc0RlZmF1bHRBZ2dyZWdhdGlvbn07Yi5wcm90b3R5cGUuZ2V0RGVmYXVsdEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NEZWZhdWx0QWdncmVnYXRpb24mJnRoaXMuZ2V0QWxsQWdncmVnYXRpb25zKClbdGhpcy5fc0RlZmF1bHRBZ2dyZWdhdGlvbl19O2IucHJvdG90eXBlLmdldEFzc29jaWF0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tQXNzb2NpYXRpb25zfTtiLnByb3RvdHlwZS5oYXNBc3NvY2lhdGlvbj1mdW5jdGlvbihuKXtyZXR1cm4hIXRoaXMuX21BbGxBc3NvY2lhdGlvbnNbbl19O2IucHJvdG90eXBlLmdldEFsbEFzc29jaWF0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tQWxsQXNzb2NpYXRpb25zfTtiLnByb3RvdHlwZS5nZXRFdmVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbUV2ZW50c307Yi5wcm90b3R5cGUuaGFzRXZlbnQ9ZnVuY3Rpb24obil7cmV0dXJuISF0aGlzLl9tQWxsRXZlbnRzW25dfTtiLnByb3RvdHlwZS5nZXRBbGxFdmVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbUFsbEV2ZW50c307Yi5wcm90b3R5cGUuZ2V0UHJvcGVydHlEZWZhdWx0cz1mdW5jdGlvbigpe3ZhciBkPXRoaXMuX21EZWZhdWx0cyx0O2lmKGQpe3JldHVybiBkfWlmKHRoaXMuZ2V0UGFyZW50KClpbnN0YW5jZW9mIGIpe2Q9cS5zYXAubmV3T2JqZWN0KHRoaXMuZ2V0UGFyZW50KCkuZ2V0UHJvcGVydHlEZWZhdWx0cygpKX1lbHNle2Q9e319Zm9yKHZhciBzIGluIHRoaXMuX21Qcm9wZXJ0aWVzKXtpZih0aGlzLl9tUHJvcGVydGllc1tzXS5kZWZhdWx0VmFsdWUhPT1udWxsKXtkW3NdPXRoaXMuX21Qcm9wZXJ0aWVzW3NdLmRlZmF1bHRWYWx1ZX1lbHNle3Q9RC5nZXRUeXBlKHRoaXMuX21Qcm9wZXJ0aWVzW3NdLnR5cGUpO2lmKHQgaW5zdGFuY2VvZiBEKXtkW3NdPXQuZ2V0RGVmYXVsdFZhbHVlKCl9ZWxzZXtmb3IodmFyIGkgaW4gdCl7ZFtzXT10W2ldO2JyZWFrfX19fXJldHVybih0aGlzLl9tRGVmYXVsdHM9ZCl9O2IucHJvdG90eXBlLmNyZWF0ZVByb3BlcnR5QmFnPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2ZuUHJvcGVydHlCYWdGYWN0b3J5KXt0aGlzLl9mblByb3BlcnR5QmFnRmFjdG9yeT1xLnNhcC5mYWN0b3J5KHRoaXMuZ2V0UHJvcGVydHlEZWZhdWx0cygpKX1yZXR1cm4gbmV3KHRoaXMuX2ZuUHJvcGVydHlCYWdGYWN0b3J5KSgpfTtiLnByb3RvdHlwZS5fZW5yaWNoQ2hpbGRJbmZvcz1mdW5jdGlvbigpe2lmKHRoaXMuX2JFbnJpY2hlZCl7cmV0dXJufWlmKHRoaXMuZ2V0UGFyZW50KClpbnN0YW5jZW9mIGIpe3RoaXMuZ2V0UGFyZW50KCkuX2VucmljaENoaWxkSW5mb3MoKX12YXIgbSxuLGk7ZnVuY3Rpb24gYShwLG4pe3JldHVybiBwK24uc3Vic3RyaW5nKDAsMSkudG9VcHBlckNhc2UoKStuLnN1YnN0cmluZygxKX1tPXRoaXMuX21Qcm9wZXJ0aWVzO2ZvcihuIGluIG0pe2k9bVtuXTtpLl9zTmFtZT1uO2kuX3NVSUQ9bjtpLl9vUGFyZW50PXRoaXM7aS5faUtpbmQ9Yi5LaW5kLlBST1BFUlRZO2kuX3NNdXRhdG9yPWEoInNldCIsbik7aS5fc0dldHRlcj1hKCJnZXQiLG4pfW09dGhpcy5fbUFnZ3JlZ2F0aW9ucztmb3IobiBpbiBtKXtpPW1bbl07aS5fc05hbWU9bjtpLl9zVUlEPSJhZ2dyZWdhdGlvbjoiK247aS5fb1BhcmVudD10aGlzO2kuX3NEZXN0cnVjdG9yPWEoImRlc3Ryb3kiLG4pO2kuX3NHZXR0ZXI9YSgiZ2V0IixuKTtpZihpLm11bHRpcGxlKXtpLl9pS2luZD1iLktpbmQuTVVMVElQTEVfQUdHUkVHQVRJT047aS5fc011dGF0b3I9YSgiYWRkIixpLnNpbmd1bGFyTmFtZSk7aS5fc1JlbW92ZU11dGF0b3I9YSgicmVtb3ZlIixpLnNpbmd1bGFyTmFtZSk7aS5fc1JlbW92ZUFsbE11dGF0b3I9YSgicmVtb3ZlQWxsIixuKX1lbHNle2kuX2lLaW5kPWIuS2luZC5TSU5HTEVfQUdHUkVHQVRJT047aS5fc011dGF0b3I9YSgic2V0IixuKX19bT10aGlzLl9tQXNzb2NpYXRpb25zO2ZvcihuIGluIG0pe2k9bVtuXTtpLl9zTmFtZT1uO2kuX3NVSUQ9ImFzc29jaWF0aW9uOiIrbjtpLl9vUGFyZW50PXRoaXM7aS5fc0dldHRlcj1hKCJnZXQiLG4pO2lmKGkubXVsdGlwbGUpe2kuX2lLaW5kPWIuS2luZC5NVUxUSVBMRV9BU1NPQ0lBVElPTjtpLl9zTXV0YXRvcj1hKCJhZGQiLGkuc2luZ3VsYXJOYW1lKX1lbHNle2kuX2lLaW5kPWIuS2luZC5TSU5HTEVfQVNTT0NJQVRJT047aS5fc011dGF0b3I9YSgic2V0IixuKX19bT10aGlzLl9tRXZlbnRzO2ZvcihuIGluIG0pe2k9bVtuXTtpLl9zTmFtZT1uO2kuX3NVSUQ9ImV2ZW50OiIrbjtpLl9vUGFyZW50PXRoaXM7aS5faUtpbmQ9Yi5LaW5kLkVWRU5UO2kuX3NNdXRhdG9yPWEoImF0dGFjaCIsbil9dGhpcy5fYkVucmljaGVkPXRydWV9O2IucHJvdG90eXBlLmdldEpTT05LZXlzPWZ1bmN0aW9uKCl7aWYodGhpcy5fbUpTT05LZXlzKXtyZXR1cm4gdGhpcy5fbUpTT05LZXlzfXRoaXMuX2VucmljaENoaWxkSW5mb3MoKTt2YXIgaj17fTtmdW5jdGlvbiBhKG0pe3ZhciBuLGk7Zm9yKG4gaW4gbSl7aT1tW25dO2lmKCFqW25dfHxpLl9pS2luZDxqW25dLl9pS2luZCl7altuXT1pfTtqW2kuX3NVSURdPWl9fWEodGhpcy5nZXRBbGxQcm9wZXJ0aWVzKCkpO2EodGhpcy5nZXRBbGxBZ2dyZWdhdGlvbnMoKSk7YSh0aGlzLmdldEFsbEFzc29jaWF0aW9ucygpKTthKHRoaXMuZ2V0QWxsRXZlbnRzKCkpO3JldHVybih0aGlzLl9tSlNPTktleXM9ail9O2IucHJvdG90eXBlLmdlbmVyYXRlQWNjZXNzb3JzPWZ1bmN0aW9uKCl7dmFyIGM9dGhpczt2YXIgZT10aGlzLmdldENsYXNzKCkucHJvdG90eXBlO2Z1bmN0aW9uIGcocCxuLGYsZCl7dmFyIG49cCtuLnN1YnN0cmluZygwLDEpLnRvVXBwZXJDYXNlKCkrbi5zdWJzdHJpbmcoMSk7aWYoIWVbbl0pe2Vbbl09ZD9mdW5jdGlvbigpe3Euc2FwLmxvZy53YXJuaW5nKCJVc2FnZSBvZiBkZXByZWNhdGVkIGZlYXR1cmU6ICIrYy5nZXROYW1lKCkrIi4iK24pO3JldHVybiBmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX06ZjtjLl9hUHVibGljTWV0aG9kcy5wdXNoKG4pfX1xLmVhY2godGhpcy5fbVByb3BlcnRpZXMsZnVuY3Rpb24obixpKXtnKCJnZXQiLG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eShuKX0pO2coInNldCIsbixmdW5jdGlvbih2KXt0aGlzLnNldFByb3BlcnR5KG4sdik7cmV0dXJuIHRoaXN9LGkuZGVwcmVjYXRlZCk7aWYoaS5iaW5kYWJsZSl7ZygiYmluZCIsbixmdW5jdGlvbihwLGYsbSl7dGhpcy5iaW5kUHJvcGVydHkobixwLGYsbSk7cmV0dXJuIHRoaXN9LGkuZGVwcmVjYXRlZCk7ZygidW5iaW5kIixuLGZ1bmN0aW9uKHApe3RoaXMudW5iaW5kUHJvcGVydHkobixwKTtyZXR1cm4gdGhpc30pfX0pO3EuZWFjaCh0aGlzLl9tQWdncmVnYXRpb25zLGZ1bmN0aW9uKG4sZCl7aWYoIWQubXVsdGlwbGUpe2coImdldCIsbixmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEFnZ3JlZ2F0aW9uKG4pfSk7Zygic2V0IixuLGZ1bmN0aW9uKHYpe3RoaXMuc2V0QWdncmVnYXRpb24obix2KTtyZXR1cm4gdGhpc30sZC5kZXByZWNhdGVkKX1lbHNle3ZhciBoPWQuc2luZ3VsYXJOYW1lO2coImdldCIsbixmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEFnZ3JlZ2F0aW9uKG4sW10pfSk7ZygiYWRkIixoLGZ1bmN0aW9uKGEpe3RoaXMuYWRkQWdncmVnYXRpb24obixhKTtyZXR1cm4gdGhpc30sZC5kZXByZWNhdGVkKTtnKCJpbnNlcnQiLGgsZnVuY3Rpb24oaSxhKXt0aGlzLmluc2VydEFnZ3JlZ2F0aW9uKG4saSxhKTtyZXR1cm4gdGhpc30sZC5kZXByZWNhdGVkKTtnKCJyZW1vdmUiLGgsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVtb3ZlQWdncmVnYXRpb24obixhKX0pO2coInJlbW92ZUFsbCIsbixmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW92ZUFsbEFnZ3JlZ2F0aW9uKG4pfSk7ZygiaW5kZXhPZiIsaCxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbmRleE9mQWdncmVnYXRpb24obixhKX0pfWcoImRlc3Ryb3kiLG4sZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3lBZ2dyZWdhdGlvbihuKTtyZXR1cm4gdGhpc30pO2lmKGQuYmluZGFibGUpe2coImJpbmQiLG4sZnVuY3Rpb24ocCx0LHMsZil7dGhpcy5iaW5kQWdncmVnYXRpb24obixwLHQscyxmKTtyZXR1cm4gdGhpc30sZC5kZXByZWNhdGVkKTtnKCJ1bmJpbmQiLG4sZnVuY3Rpb24ocCl7dGhpcy51bmJpbmRBZ2dyZWdhdGlvbihuLHApO3JldHVybiB0aGlzfSl9fSk7cS5lYWNoKHRoaXMuX21Bc3NvY2lhdGlvbnMsZnVuY3Rpb24obixpKXtpZighaS5tdWx0aXBsZSl7ZygiZ2V0IixuLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QXNzb2NpYXRpb24obil9KTtnKCJzZXQiLG4sZnVuY3Rpb24odil7dGhpcy5zZXRBc3NvY2lhdGlvbihuLHYpO3JldHVybiB0aGlzfSxpLmRlcHJlY2F0ZWQpfWVsc2V7dmFyIGQ9aS5zaW5ndWxhck5hbWU7ZygiZ2V0IixuLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QXNzb2NpYXRpb24obixbXSl9KTtnKCJhZGQiLGQsZnVuY3Rpb24oYSl7dGhpcy5hZGRBc3NvY2lhdGlvbihuLGEpO3JldHVybiB0aGlzfSxpLmRlcHJlY2F0ZWQpO2coInJlbW92ZSIsZCxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmVBc3NvY2lhdGlvbihuLGEpfSk7ZygicmVtb3ZlQWxsIixuLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3ZlQWxsQXNzb2NpYXRpb24obil9KX19KTtxLmVhY2godGhpcy5fbUV2ZW50cyxmdW5jdGlvbihuLGkpe2coImF0dGFjaCIsbixmdW5jdGlvbihkLGYsbyl7dGhpcy5hdHRhY2hFdmVudChuLGQsZixvKTtyZXR1cm4gdGhpc30saS5kZXByZWNhdGVkKTtnKCJkZXRhY2giLG4sZnVuY3Rpb24oZixvKXt0aGlzLmRldGFjaEV2ZW50KG4sZixvKTtyZXR1cm4gdGhpc30pO3ZhciBhPSEhaS5hbGxvd1ByZXZlbnREZWZhdWx0O3ZhciBoPSEhaS5lbmFibGVFdmVudEJ1YmJsaW5nO2coImZpcmUiLG4sZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMuZmlyZUV2ZW50KG4scCxhLGgpfSl9KX07KGZ1bmN0aW9uKCl7dmFyIHU9e307ZnVuY3Rpb24gYShpKXtpPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFVJRFByZWZpeCgpK2k7dVtpXT11W2ldfHwwO3JldHVybihpK3VbaV0rKyl9Yi51aWQ9YTtiLnByb3RvdHlwZS51aWQ9ZnVuY3Rpb24oKXt2YXIgaT10aGlzLl9zVUlEVG9rZW47aWYodHlwZW9mIGkhPT0ic3RyaW5nIil7aT10aGlzLmdldE5hbWUoKTtpPWkuc2xpY2UoaS5sYXN0SW5kZXhPZignLicpKzEpO2k9aS5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCIkMSAkMiIpLnNwbGl0KCIgIikuc2xpY2UoLTEpWzBdO2k9dGhpcy5fc1VJRFRva2VuPWkucmVwbGFjZSgvKFteQS1aYS16MC05LV8uOl0pfChbMC05XSskKS9nLCIiKS50b0xvd2VyQ2FzZSgpfXJldHVybiBhKGkpfX0oKSk7cmV0dXJuIGJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Db21wb25lbnRNZXRhZGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkNvbXBvbmVudE1ldGFkYXRhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ29tcG9uZW50TWV0YWRhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0TWV0YWRhdGEnXSxmdW5jdGlvbihxLE0peyJ1c2Ugc3RyaWN0Ijt2YXIgQz1mdW5jdGlvbihjLG8pe00uYXBwbHkodGhpcyxhcmd1bWVudHMpfTtDLnByb3RvdHlwZT1xLnNhcC5uZXdPYmplY3QoTS5wcm90b3R5cGUpO0MucHJlcHJvY2Vzc0NsYXNzSW5mbz1mdW5jdGlvbihjKXtpZihjJiZ0eXBlb2YgYy5tZXRhZGF0YT09PSJzdHJpbmciKXtjLm1ldGFkYXRhPXtfc3JjOmMubWV0YWRhdGF9fXJldHVybiBjfTtDLnByb3RvdHlwZS5hcHBseVNldHRpbmdzPWZ1bmN0aW9uKGMpe3ZhciBzPWMubWV0YWRhdGE7dmFyIG49dGhpcy5nZXROYW1lKCkscD1uLnJlcGxhY2UoL1wuXHcrPyQvLCIiKTtpZihzLl9zcmMpe2lmKHMuX3NyYz09ImNvbXBvbmVudC5qc29uIil7cS5zYXAubG9nLndhcm5pbmcoIlVzYWdlIG9mIGRlY2xhY2F0aW9uIFwibWV0YWRhdGE6ICdjb21wb25lbnQuanNvbidcIiBpcyBkZXByZWNhdGVkIChjb21wb25lbnQgIituKyIpLiBVc2UgXCJtZXRhZGF0YTogJ2pzb24nXCIgaW5zdGVhZC4iKX1lbHNlIGlmKHMuX3NyYyE9Impzb24iKXt0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgbWV0YWRhdGEgZGVjbGFyYXRpb24gZm9yIGNvbXBvbmVudCAiK24rIjogXCIiK3MuX3NyYysiXCIhIFVzZSBcIm1ldGFkYXRhOiAnanNvbidcIiB0byBsb2FkIG1ldGFkYXRhIGZyb20gY29tcG9uZW50Lmpzb24uIil9dmFyIHI9cC5yZXBsYWNlKC9cLi9nLCIvIikrIi9jb21wb25lbnQuanNvbiI7cS5zYXAubG9nLmluZm8oIlRoZSBtZXRhZGF0YSBvZiB0aGUgY29tcG9uZW50ICIrbisiIGlzIGxvYWRlZCBmcm9tIGZpbGUgIityKyIuIik7dHJ5e3ZhciBSPXEuc2FwLmxvYWRSZXNvdXJjZShyLHtkYXRhVHlwZToianNvbiIsZmFpbE9uRXJyb3I6ZmFsc2V9KTtxLmV4dGVuZChzLFIpfWNhdGNoKGUpe3Euc2FwLmxvZy5lcnJvcigiRmFpbGVkIHRvIGxvYWQgY29tcG9uZW50IG1ldGFkYXRhIGZyb20gXCIiK3IrIlwiIChjb21wb25lbnQgIituKyIpISBSZWFzb246ICIrZSl9fU0ucHJvdG90eXBlLmFwcGx5U2V0dGluZ3MuY2FsbCh0aGlzLGMpO3RoaXMuX3NDb21wb25lbnROYW1lPXA7dGhpcy5fYkluaXRpYWxpemVkPWZhbHNlO3RoaXMuX2lJbnN0YW5jZUNvdW50PTA7dGhpcy5fc1ZlcnNpb249cy52ZXJzaW9uO3RoaXMuX21EZXBlbmRlbmNpZXM9cy5kZXBlbmRlbmNpZXM7dGhpcy5fYUluY2x1ZGVzPXMuaW5jbHVkZXM7dGhpcy5fbUNvbmZpZz1zLmNvbmZpZzt0aGlzLl9tQ3VzdG9taXppbmc9cy5jdXN0b21pemluZzt0aGlzLl9tTW9kZWxzPXMubW9kZWxzfHx7fTt0aGlzLl9tU2VydmljZXM9cy5zZXJ2aWNlc3x8e307dmFyIFA9dGhpcy5nZXRQYXJlbnQoKTtpZihQIGluc3RhbmNlb2YgQyl7dGhpcy5fbUNvbmZpZz1xLmV4dGVuZCh0cnVlLHt9LFAuX21Db25maWcsdGhpcy5fbUNvbmZpZyk7dGhpcy5fbUN1c3RvbWl6aW5nPXEuZXh0ZW5kKHRydWUse30sUC5fbUN1c3RvbWl6aW5nLHRoaXMuX21DdXN0b21pemluZyk7dGhpcy5fbU1vZGVscz1xLmV4dGVuZCh0cnVlLHt9LFAuX21Nb2RlbHMsdGhpcy5fbU1vZGVscyk7dGhpcy5fbVNlcnZpY2VzPXEuZXh0ZW5kKHRydWUse30sUC5fbVNlcnZpY2VzLHRoaXMuX21TZXJ2aWNlcyl9dGhpcy5fb1N0YXRpY0luZm89c307Qy5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe2lmKCF0aGlzLl9iSW5pdGlhbGl6ZWQpe3ZhciBwPXRoaXMuZ2V0UGFyZW50KCk7aWYocCBpbnN0YW5jZW9mIEMpe3AuaW5pdCgpfXRoaXMuX2xvYWREZXBlbmRlbmNpZXMoKTt0aGlzLl9sb2FkSW5jbHVkZXMoKTt0aGlzLl9iSW5pdGlhbGl6ZWQ9dHJ1ZX19O0MucHJvdG90eXBlLmV4aXQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9iSW5pdGlhbGl6ZWQpe3ZhciBwPXRoaXMuZ2V0UGFyZW50KCk7aWYocCBpbnN0YW5jZW9mIEMpe3AuZXhpdCgpfXRoaXMuX2JJbml0aWFsaXplZD1mYWxzZX19O0MucHJvdG90eXBlLm9uSW5pdENvbXBvbmVudD1mdW5jdGlvbigpe2lmKHRoaXMuX2lJbnN0YW5jZUNvdW50PT09MCYmIXEuaXNFbXB0eU9iamVjdCh0aGlzLl9tQ3VzdG9taXppbmcpKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24iKTtzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24uYWN0aXZhdGVGb3JDb21wb25lbnQodGhpcy5fc0NvbXBvbmVudE5hbWUpfXRoaXMuX2lJbnN0YW5jZUNvdW50Kyt9O0MucHJvdG90eXBlLm9uRXhpdENvbXBvbmVudD1mdW5jdGlvbigpe3RoaXMuX2lJbnN0YW5jZUNvdW50LS07aWYodGhpcy5faUluc3RhbmNlQ291bnQ9PT0wJiYhcS5pc0VtcHR5T2JqZWN0KHRoaXMuX21DdXN0b21pemluZykpe2lmKHNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbil7c2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uLmRlYWN0aXZhdGVGb3JDb21wb25lbnQodGhpcy5fc0NvbXBvbmVudE5hbWUpfX19O0MucHJvdG90eXBlLmdldEN1c3RvbUVudHJ5PWZ1bmN0aW9uKGssbSl7aWYoIWt8fGsuaW5kZXhPZigiLiIpPD0wKXtxLnNhcC5sb2cud2FybmluZygiQ29tcG9uZW50IE1ldGFkYXRhIGVudHJpZXMgd2l0aCBrZXlzIHdpdGhvdXQgbmFtZXNwYWNlIHByZWZpeCBjYW4gbm90IGJlIHJlYWQgdmlhIGdldEN1c3RvbUVudHJ5LiBLZXk6ICIraysiLCBDb21wb25lbnQ6ICIrdGhpcy5nZXROYW1lKCkpO3JldHVybiBudWxsfXZhciBkPXRoaXMuX29TdGF0aWNJbmZvW2tdfHx7fTtpZighcS5pc1BsYWluT2JqZWN0KGQpKXtxLnNhcC5sb2cud2FybmluZygiQ3VzdG9tIENvbXBvbmVudCBNZXRhZGF0YSBlbnRyeSB3aXRoIGtleSAnIitrKyInIG11c3QgYmUgYW4gb2JqZWN0LiBDb21wb25lbnQ6ICIrdGhpcy5nZXROYW1lKCkpO3JldHVybiBudWxsfXZhciBwPXRoaXMuZ2V0UGFyZW50KCk7aWYobSYmcCBpbnN0YW5jZW9mIEMpe3JldHVybiBxLmV4dGVuZCh0cnVlLHt9LHAuZ2V0Q3VzdG9tRW50cnkoayxtKSxkKX1yZXR1cm4gcS5leHRlbmQodHJ1ZSx7fSxkKX07Qy5wcm90b3R5cGUuZ2V0RGVwZW5kZW5jaWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21EZXBlbmRlbmNpZXN9O0MucHJvdG90eXBlLmdldEluY2x1ZGVzPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuX2FJbmNsdWRlcyYmdGhpcy5fYUluY2x1ZGVzLmxlbmd0aD4wKT90aGlzLl9hSW5jbHVkZXM6bnVsbH07Qy5wcm90b3R5cGUuZ2V0VUk1VmVyc2lvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tRGVwZW5kZW5jaWVzP3RoaXMuX21EZXBlbmRlbmNpZXMudWk1dmVyc2lvbjpudWxsfTtDLnByb3RvdHlwZS5nZXRDb21wb25lbnRzPWZ1bmN0aW9uKCl7dmFyIGM9bnVsbDtpZih0aGlzLl9tRGVwZW5kZW5jaWVzKXtpZih0aGlzLl9tRGVwZW5kZW5jaWVzLmNvbXBvbmVudHMmJih0aGlzLl9tRGVwZW5kZW5jaWVzLmNvbXBvbmVudHMubGVuZ3RoPjApKXtjPXRoaXMuX21EZXBlbmRlbmNpZXMuY29tcG9uZW50c319cmV0dXJuIGN9O0MucHJvdG90eXBlLmdldExpYnM9ZnVuY3Rpb24oKXt2YXIgbD1udWxsO2lmKHRoaXMuX21EZXBlbmRlbmNpZXMpe2lmKHRoaXMuX21EZXBlbmRlbmNpZXMubGlicyYmKHRoaXMuX21EZXBlbmRlbmNpZXMubGlicy5sZW5ndGg+MCkpe2w9dGhpcy5fbURlcGVuZGVuY2llcy5saWJzfX1yZXR1cm4gbH07Qy5wcm90b3R5cGUuZ2V0VmVyc2lvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zVmVyc2lvbn07Qy5wcm90b3R5cGUuZ2V0Q29uZmlnPWZ1bmN0aW9uKGspe3JldHVybiB0aGlzLl9tQ29uZmlnP3EuZXh0ZW5kKHt9LGs/dGhpcy5fbUNvbmZpZ1trXTp0aGlzLl9tQ29uZmlnKTp1bmRlZmluZWR9O0MucHJvdG90eXBlLmdldEN1c3RvbWl6aW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21DdXN0b21pemluZz9xLmV4dGVuZCh7fSx0aGlzLl9tQ3VzdG9taXppbmcpOnVuZGVmaW5lZH07Qy5wcm90b3R5cGUuZ2V0TW9kZWxzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21Nb2RlbHN9O0MucHJvdG90eXBlLmdldFNlcnZpY2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21TZXJ2aWNlc307Qy5wcm90b3R5cGUuX2xvYWRJbmNsdWRlcz1mdW5jdGlvbigpe3ZhciBJPXRoaXMuZ2V0SW5jbHVkZXMoKTtpZihJJiZJLmxlbmd0aD4wKXt2YXIgdD10aGlzO3ZhciBsPXRoaXMuZ2V0TGlicmFyeU5hbWUoKTtxLmVhY2goSSxmdW5jdGlvbihpLGYpe2lmKGYubWF0Y2goL1wuY3NzJC9pKSl7dmFyIGM9c2FwLnVpLnJlc291cmNlKGwsZik7cS5zYXAubG9nLmluZm8oIkNvbXBvbmVudCBcIiIrdC5nZXROYW1lKCkrIlwiIGlzIGxvYWRpbmcgQ1NTOiBcIiIrYysiXCIiKTtxLnNhcC5pbmNsdWRlU3R5bGVTaGVldChjKX1lbHNle3ZhciBtPWYubWF0Y2goL1wuanMkL2kpO2lmKG0pe3ZhciBwPWwucmVwbGFjZSgvXC4vZywnLycpKyhmLnNsaWNlKDAsMSk9PT0nLyc/Jyc6Jy8nKStmLnNsaWNlKDAsbS5pbmRleCk7cS5zYXAubG9nLmluZm8oIkNvbXBvbmVudCBcIiIrdC5nZXROYW1lKCkrIlwiIGlzIGxvYWRpbmcgSlM6IFwiIitwKyJcIiIpO3Euc2FwLl9yZXF1aXJlUGF0aChwKX19fSl9fTtDLnByb3RvdHlwZS5fbG9hZERlcGVuZGVuY2llcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZD10aGlzLmdldERlcGVuZGVuY2llcygpO2lmKGQpe3ZhciBsPWQubGlicztpZihsKXtxLmVhY2gobCxmdW5jdGlvbihpLEwpe3Euc2FwLmxvZy5pbmZvKCJDb21wb25lbnQgXCIiK3QuZ2V0TmFtZSgpKyJcIiBpcyBsb2FkaW5nIGxpYnJhcnk6IFwiIitMKyJcIiIpO3NhcC51aS5nZXRDb3JlKCkubG9hZExpYnJhcnkoTCl9KX12YXIgYz1kLmNvbXBvbmVudHM7aWYoYyl7cS5lYWNoKGMsZnVuY3Rpb24oaSxuKXtxLnNhcC5sb2cuaW5mbygiQ29tcG9uZW50IFwiIit0LmdldE5hbWUoKSsiXCIgaXMgbG9hZGluZyBjb21wb25lbnQ6IFwiIituKyIuQ29tcG9uZW50XCIiKTtzYXAudWkuY29tcG9uZW50LmxvYWQoe25hbWU6bn0pfSl9fX07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Db25maWd1cmF0aW9uJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ29uZmlndXJhdGlvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0NvbmZpZ3VyYXRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnLCcuL0xvY2FsZScsJ3NhcC91aS90aGlyZHBhcnR5L1VSSSddLGZ1bmN0aW9uKHEsQixMLFUpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz1CLmV4dGVuZCgic2FwLnVpLmNvcmUuQ29uZmlndXJhdGlvbiIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG8pe3RoaXMuX29Db3JlPW87ZnVuY3Rpb24gZigpe3ZhciBlO2lmKCEhc2FwLnVpLkRldmljZS5vcy5hbmRyb2lkKXtlPW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1xzKFthLXpdezJ9LVthLXpdezJ9KVs7KV0vaSk7aWYoZSl7cmV0dXJuIGVbMV19fXJldHVybiBuYXZpZ2F0b3IubGFuZ3VhZ2V8fG5hdmlnYXRvci51c2VyTGFuZ3VhZ2V8fG5hdmlnYXRvci5icm93c2VyTGFuZ3VhZ2V9dmFyIGc9eyJ0aGVtZSI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiJiYXNlIn0sImxhbmd1YWdlIjp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6ZigpfSwiZm9ybWF0TG9jYWxlIjp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6bnVsbH0sImFjY2Vzc2liaWxpdHkiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6dHJ1ZX0sImFuaW1hdGlvbiI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTp0cnVlfSwicnRsIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJkZWJ1ZyI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX0sImluc3BlY3QiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJvcmlnaW5JbmZvIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlfSwibm9Db25mbGljdCI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZSxub1VybDp0cnVlfSwibm9EdXBsaWNhdGVJZHMiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6dHJ1ZX0sInRyYWNlIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlLG5vVXJsOnRydWV9LCJtb2R1bGVzIjp7dHlwZToic3RyaW5nW10iLGRlZmF1bHRWYWx1ZTpbXSxub1VybDp0cnVlfSwiYXJlYXMiOnt0eXBlOiJzdHJpbmdbXSIsZGVmYXVsdFZhbHVlOm51bGwsbm9Vcmw6dHJ1ZX0sIm9uSW5pdCI6e3R5cGU6ImNvZGUiLGRlZmF1bHRWYWx1ZTp1bmRlZmluZWQsbm9Vcmw6dHJ1ZX0sInVpZFByZWZpeCI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiJfXyIsbm9Vcmw6dHJ1ZX0sImlnbm9yZVVybFBhcmFtcyI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZSxub1VybDp0cnVlfSwid2VpbnJlU2VydmVyIjp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6IiIsbm9Vcmw6dHJ1ZX0sIndlaW5yZUlkIjp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6IiJ9LCJwcmVsb2FkIjp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6ImF1dG8ifSwicm9vdENvbXBvbmVudCI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiIiLG5vVXJsOnRydWV9LCJ4eC1yb290Q29tcG9uZW50Tm9kZSI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiIiLG5vVXJsOnRydWV9LCJhcHBsaWNhdGlvbiI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiIifSwiYXBwQ2FjaGVCdXN0ZXIiOnt0eXBlOiJzdHJpbmdbXSIsZGVmYXVsdFZhbHVlOltdfSwieHgtYXBwQ2FjaGVCdXN0ZXJNb2RlIjp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6InN5bmMifSwieHgtZGlzYWJsZUN1c3RvbWl6aW5nIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlLG5vVXJsOnRydWV9LCJ4eC1sb2FkQWxsTW9kZSI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZSxub1VybDp0cnVlfSwieHgtdGVzdC1tb2JpbGUiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJ4eC1wcmVsb2FkTGliQ3NzIjp7dHlwZToic3RyaW5nW10iLGRlZmF1bHRWYWx1ZTpbXX0sInh4LWNvbXBvbmVudFByZWxvYWQiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiIn0sInh4LWJpbmRpbmdTeW50YXgiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToic2ltcGxlIixub1VybDp0cnVlfSwieHgtZGVzaWduTW9kZSI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX0sInh4LWFjY2Vzc2liaWxpdHlNb2RlIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlfSwieHgtc3VwcG9ydGVkTGFuZ3VhZ2VzIjp7dHlwZToic3RyaW5nW10iLGRlZmF1bHRWYWx1ZTpbXX0sInh4LWJvb3RUYXNrIjp7dHlwZToiZnVuY3Rpb24iLGRlZmF1bHRWYWx1ZTp1bmRlZmluZWQsbm9Vcmw6dHJ1ZX0sInh4LXN1cHByZXNzRGVhY3RpdmF0aW9uT2ZDb250cm9sbGVyQ29kZSI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX0sInh4LW5vTmF0aXZlU2Nyb2xsIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlfSwic3RhdGlzdGljcyI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX19O3ZhciBoPXsieHgtdGVzdCI6IjEuMTUiLCJmbGV4Qm94UG9seWZpbGwiOiIxLjE0Iiwic2FwTWVUYWJDb250YWluZXIiOiIxLjE0Iiwic2FwTWVQcm9nZXNzSW5kaWNhdG9yIjoiMS4xNCIsInNhcE1Hcm93aW5nTGlzdCI6IjEuMTQiLCJzYXBNTGlzdEFzVGFibGUiOiIxLjE0Iiwic2FwTURpYWxvZ1dpdGhQYWRkaW5nIjoiMS4xNCJ9O3RoaXMub0Zvcm1hdFNldHRpbmdzPW5ldyBDLkZvcm1hdFNldHRpbmdzKHRoaXMpO3ZhciBpPXRoaXM7ZnVuY3Rpb24gcyhOLFYpe2lmKHR5cGVvZiBWPT09InVuZGVmaW5lZCJ8fFY9PT1udWxsKXtyZXR1cm59c3dpdGNoKGdbTl0udHlwZSl7Y2FzZSJib29sZWFuIjppZih0eXBlb2YgVj09PSJzdHJpbmciKXtpZihnW05dLmRlZmF1bHRWYWx1ZSl7aVtOXT1WLnRvTG93ZXJDYXNlKCkhPSJmYWxzZSJ9ZWxzZXtpW05dPVYudG9Mb3dlckNhc2UoKT09PSJ0cnVlInx8Vi50b0xvd2VyQ2FzZSgpPT09IngifX1lbHNle2lbTl09ISFWfWJyZWFrO2Nhc2Uic3RyaW5nIjppW05dPSIiK1Y7YnJlYWs7Y2FzZSJjb2RlIjppW05dPXR5cGVvZiBWPT09ImZ1bmN0aW9uIj9WOlN0cmluZyhWKTticmVhaztjYXNlImZ1bmN0aW9uIjppZih0eXBlb2YgViE9PSJmdW5jdGlvbiIpe3Rocm93IG5ldyBFcnJvcigidW5zdXBwb3J0ZWQgdmFsdWUiKX1pW05dPVY7YnJlYWs7Y2FzZSJzdHJpbmdbXSI6aWYocS5pc0FycmF5KFYpKXtpW05dPVZ9ZWxzZSBpZih0eXBlb2YgVj09PSJzdHJpbmciKXtpW05dPXEubWFwKFYuc3BsaXQoL1sgLDtdLyksZnVuY3Rpb24oJCl7cmV0dXJuIHEudHJpbSgkKX0pfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJ1bnN1cHBvcnRlZCB2YWx1ZSIpfWJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIHN0YXRlIil9fWZ1bmN0aW9uIGooVCl7dmFyIHYsdzt0cnl7dj1uZXcgVVJJKFQsd2luZG93LmxvY2F0aW9uLmhyZWYpLm5vcm1hbGl6ZSgpO3c9di5wYXRoKCk7cmV0dXJuIHcrKHcuc2xpY2UoLTEpPT09Jy8nPycnOicvJykrIlVJNS8ifWNhdGNoKGUpe319Zm9yKHZhciBuIGluIGcpe2lbbl09Z1tuXS5kZWZhdWx0VmFsdWV9dmFyIGs9d2luZG93WyJzYXAtdWktY29uZmlnIl18fHt9O2sub25pbml0PWsub25pbml0fHxrWyJldnQtb25pbml0Il07Zm9yKHZhciBuIGluIGcpe3MobixrW24udG9Mb3dlckNhc2UoKV0pfWlmKGsubGlicyl7aS5tb2R1bGVzPXEubWFwKGsubGlicy5zcGxpdCgiLCIpLGZ1bmN0aW9uKCQpe3JldHVybiBxLnRyaW0oJCkrIi5saWJyYXJ5In0pLmNvbmNhdChpLm1vZHVsZXMpfXZhciBQPSJjb21wYXR2ZXJzaW9uIjt2YXIgRD1rW1BdO3ZhciBsPXEuc2FwLlZlcnNpb24oIjEuMTQiKTt0aGlzLl9jb21wYXR2ZXJzaW9uPXt9O2Z1bmN0aW9uIF8oZSl7dmFyIHY9IWU/RHx8bC50b1N0cmluZygpOmtbUCsiLSIrZS50b0xvd2VyQ2FzZSgpXXx8RHx8aFtlXXx8bC50b1N0cmluZygpO3Y9cS5zYXAuVmVyc2lvbih2LnRvTG93ZXJDYXNlKCk9PT0iZWRnZSI/c2FwLnVpLnZlcnNpb246dik7cmV0dXJuIHEuc2FwLlZlcnNpb24odi5nZXRNYWpvcigpLHYuZ2V0TWlub3IoKSl9dGhpcy5fY29tcGF0dmVyc2lvbi5fZGVmYXVsdD1fKCk7Zm9yKHZhciBuIGluIGgpe3RoaXMuX2NvbXBhdHZlcnNpb25bbl09XyhuKX1pZighaS5pZ25vcmVVcmxQYXJhbXMpe3ZhciB1PSJzYXAtdWktIjt2YXIgbT1xLnNhcC5nZXRVcmlQYXJhbWV0ZXJzKCk7aWYobS5tUGFyYW1zWydzYXAtbG9jYWxlJ118fG0ubVBhcmFtc1snc2FwLWxhbmd1YWdlJ10pe3ZhciBWPW0uZ2V0KCdzYXAtbG9jYWxlJyl8fE1bbS5nZXQoJ3NhcC1sYW5ndWFnZScpLnRvVXBwZXJDYXNlKCldfHxtLmdldCgnc2FwLWxhbmd1YWdlJyk7aWYoVj09PSIiKXtpWydsYW5ndWFnZSddPWdbJ2xhbmd1YWdlJ10uZGVmYXVsdFZhbHVlfWVsc2V7cygnbGFuZ3VhZ2UnLFYpfX1pZihtLm1QYXJhbXNbJ3NhcC1hY2Nlc3NpYmlsaXR5J10pe3ZhciBWPW0uZ2V0KCdzYXAtYWNjZXNzaWJpbGl0eScpO2lmKFY9PT0iWCJ8fFY9PT0ieCIpe3MoJ3h4LWFjY2Vzc2liaWxpdHlNb2RlJyx0cnVlKX1lbHNle3MoJ3h4LWFjY2Vzc2liaWxpdHlNb2RlJyxmYWxzZSl9fWlmKG0ubVBhcmFtc1snc2FwLXJ0bCddKXt2YXIgVj1tLmdldCgnc2FwLXJ0bCcpO2lmKFY9PT0iWCJ8fFY9PT0ieCIpe3MoJ3J0bCcsdHJ1ZSl9ZWxzZXtzKCdydGwnLGZhbHNlKX19aWYobS5tUGFyYW1zWydzYXAtdGhlbWUnXSl7dmFyIFY9bS5nZXQoJ3NhcC10aGVtZScpO2lmKFY9PT0iIil7aVsndGhlbWUnXT1nWyd0aGVtZSddLmRlZmF1bHRWYWx1ZX1lbHNle3MoJ3RoZW1lJyxWKX19aWYobS5tUGFyYW1zWydzYXAtc3RhdGlzdGljcyddKXt2YXIgVj1tLmdldCgnc2FwLXN0YXRpc3RpY3MnKTtzKCdzdGF0aXN0aWNzJyxWKX1mb3IodmFyIG4gaW4gZyl7aWYoZ1tuXS5ub1VybCl7Y29udGludWV9dmFyIFY9bS5nZXQodStuKTtpZihWPT09IiIpe2lbbl09Z1tuXS5kZWZhdWx0VmFsdWV9ZWxzZXtzKG4sVil9fX10aGlzLmRlcml2ZWRSVEw9TC5faW1wbGllc1JUTChpLmxhbmd1YWdlKTt2YXIgdD1pLnRoZW1lO3ZhciBUO3ZhciBJPXQuaW5kZXhPZigiQCIpO2lmKEk+PTApe1Q9aih0LnNsaWNlKEkrMSkpO2lmKFQpe2kudGhlbWU9dC5zbGljZSgwLEkpO2kudGhlbWVSb290PVR9ZWxzZXtpLnRoZW1lPShrLnRoZW1lJiZrLnRoZW1lIT09dCk/ay50aGVtZToiYmFzZSI7ST0tMX19aS50aGVtZT10aGlzLl9ub3JtYWxpemVUaGVtZShpLnRoZW1lLFQpO3ZhciBwPSIsYXIsYmcsY2EsY3MsZGEsZGUsZWwsZW4sZXMsZXQsZmksZnIsaGksaHIsaHUsaXQsaXcsamEsa28sbHQsbHYsbmwsbm8scGwscHQscm8scnUsc2gsc2ssc2wsc3YsdGgsdHIsdWssdmksemhfQ04semhfVFciLnNwbGl0KC8sLyk7aWYocC5sZW5ndGg9PT0xJiZwWzBdLnNsaWNlKDAsMSk9PT0nQCcpe3A9dW5kZWZpbmVkfWlbJ2xhbmd1YWdlc0RlbGl2ZXJlZFdpdGhDb3JlJ109cDt2YXIgcj1pWyd4eC1zdXBwb3J0ZWRMYW5ndWFnZXMnXTtpZihyLmxlbmd0aD09PTB8fChyLmxlbmd0aD09PTEmJnJbMF09PT0nKicpKXtyPVtdfWVsc2UgaWYoci5sZW5ndGg9PT0xJiZyWzBdPT09J2RlZmF1bHQnKXtyPXB8fFtdfWlbJ3h4LXN1cHBvcnRlZExhbmd1YWdlcyddPXI7Zm9yKHZhciBuIGluIGcpe2lmKGlbbl0hPT1nW25dLmRlZmF1bHRWYWx1ZSl7cS5zYXAubG9nLmluZm8oIiAgIituKyIgPSAiK2lbbl0pfX19LGdldFZlcnNpb246ZnVuY3Rpb24oKXtpZih0aGlzLl92ZXJzaW9uKXtyZXR1cm4gdGhpcy5fdmVyc2lvbn10aGlzLl92ZXJzaW9uPW5ldyBxLnNhcC5WZXJzaW9uKHNhcC51aS52ZXJzaW9uKTtyZXR1cm4gdGhpcy5fdmVyc2lvbn0sZ2V0Q29tcGF0aWJpbGl0eVZlcnNpb246ZnVuY3Rpb24oZil7aWYodHlwZW9mKGYpPT09InN0cmluZyImJnRoaXMuX2NvbXBhdHZlcnNpb25bZl0pe3JldHVybiB0aGlzLl9jb21wYXR2ZXJzaW9uW2ZdfXJldHVybiB0aGlzLl9jb21wYXR2ZXJzaW9uLl9kZWZhdWx0fSxnZXRUaGVtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRoZW1lfSxfc2V0VGhlbWU6ZnVuY3Rpb24odCl7dGhpcy50aGVtZT10O3JldHVybiB0aGlzfSxfbm9ybWFsaXplVGhlbWU6ZnVuY3Rpb24odCxUKXtpZih0JiZUPT1udWxsJiZ0Lm1hdGNoKC9ec2FwX2NvcmJ1JC9pKSlyZXR1cm4ic2FwX2dvbGRyZWZsZWN0aW9uIjtyZXR1cm4gdH0sZ2V0TGFuZ3VhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYW5ndWFnZX0sc2V0TGFuZ3VhZ2U6ZnVuY3Rpb24obCl7ZCh0eXBlb2YgbD09PSJzdHJpbmciJiZsLCJzTGFuZ3VhZ2UgbXVzdCBiZSBhIEJDUDQ3IGxhbmd1YWdlIHRhZyBvciBKYXZhIExvY2FsZSBpZCBvciBudWxsIik7dmFyIG89dGhpcy5nZXRSVEwoKSxtO2lmKGwhPXRoaXMubGFuZ3VhZ2Upe209dGhpcy5fY29sbGVjdCgpO3RoaXMubGFuZ3VhZ2U9bS5sYW5ndWFnZT1sO3RoaXMuZGVyaXZlZFJUTD1MLl9pbXBsaWVzUlRMKGwpO2lmKG8hPXRoaXMuZ2V0UlRMKCkpe20ucnRsPXRoaXMuZ2V0UlRMKCl9dGhpcy5fZW5kQ29sbGVjdCgpfXJldHVybiB0aGlzfSxnZXRMb2NhbGU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEwodGhpcy5sYW5ndWFnZSl9LGdldEZvcm1hdExvY2FsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcm1hdExvY2FsZXx8dGhpcy5sYW5ndWFnZX0sc2V0Rm9ybWF0TG9jYWxlOmZ1bmN0aW9uKGYpe2QoZj09PW51bGx8fHR5cGVvZiBmPT09InN0cmluZyImJmYsInNGb3JtYXRMb2NhbGUgbXVzdCBiZSBhIEJDUDQ3IGxhbmd1YWdlIHRhZyBvciBKYXZhIExvY2FsZSBpZCBvciBudWxsIik7dmFyIG07aWYoZiE9dGhpcy5mb3JtYXRMb2NhbGUpe209dGhpcy5fY29sbGVjdCgpO3RoaXMuZm9ybWF0TG9jYWxlPW0uZm9ybWF0TG9jYWxlPWY7dGhpcy5fZW5kQ29sbGVjdCgpfXJldHVybiB0aGlzfSxnZXRMYW5ndWFnZXNEZWxpdmVyZWRXaXRoQ29yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzWyJsYW5ndWFnZXNEZWxpdmVyZWRXaXRoQ29yZSJdfSxnZXRTdXBwb3J0ZWRMYW5ndWFnZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sieHgtc3VwcG9ydGVkTGFuZ3VhZ2VzIl19LGdldEFjY2Vzc2liaWxpdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY2Nlc3NpYmlsaXR5fSxnZXRBbmltYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hbmltYXRpb259LGdldFJUTDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJ0bD09PW51bGw/dGhpcy5kZXJpdmVkUlRMOnRoaXMucnRsfSxzZXRSVEw6ZnVuY3Rpb24ocil7ZChyPT09bnVsbHx8dHlwZW9mIHI9PT0iYm9vbGVhbiIsImJSVEwgbXVzdCBiZSBudWxsIG9yIGEgYm9vbGVhbiIpO3ZhciBtO2lmKHIhPXRoaXMucnRsKXttPXRoaXMuX2NvbGxlY3QoKTt0aGlzLnJ0bD1tLnJ0bD10aGlzLmdldFJUTCgpO3RoaXMuX2VuZENvbGxlY3QoKX1yZXR1cm4gdGhpc30sZ2V0RGVidWc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWJ1Z30sZ2V0SW5zcGVjdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluc3BlY3R9LGdldE9yaWdpbkluZm86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnaW5JbmZvfSxnZXROb0R1cGxpY2F0ZUlkczpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vRHVwbGljYXRlSWRzfSxnZXRUcmFjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYWNlfSxnZXRVSURQcmVmaXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51aWRQcmVmaXh9LGdldERlc2lnbk1vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sieHgtZGVzaWduTW9kZSJdfSxnZXRTdXBwcmVzc0RlYWN0aXZhdGlvbk9mQ29udHJvbGxlckNvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sieHgtc3VwcHJlc3NEZWFjdGl2YXRpb25PZkNvbnRyb2xsZXJDb2RlIl19LGdldFdlaW5yZVNlcnZlcjpmdW5jdGlvbigpe3ZhciB3PXRoaXMud2VpbnJlU2VydmVyO2lmKCF3KXt3PXdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCsiLy8iK3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSsiOiI7dys9KHBhcnNlSW50KHdpbmRvdy5sb2NhdGlvbi5wb3J0LDEwKXx8ODA4MCkrMX1yZXR1cm4gd30sZ2V0V2VpbnJlSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53ZWlucmVJZH0sZ2V0QXBwbGljYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcHBsaWNhdGlvbn0sZ2V0Um9vdENvbXBvbmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3RDb21wb25lbnR9LGdldEFwcENhY2hlQnVzdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXBwQ2FjaGVCdXN0ZXJ9LGdldEFwcENhY2hlQnVzdGVyTW9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzWyJ4eC1hcHBDYWNoZUJ1c3Rlck1vZGUiXX0sZ2V0RGlzYWJsZUN1c3RvbWl6aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbInh4LWRpc2FibGVDdXN0b21pemluZyJdfSxnZXRQcmVsb2FkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJlbG9hZH0sZ2V0Q29tcG9uZW50UHJlbG9hZDpmdW5jdGlvbigpe3JldHVybiB0aGlzWyd4eC1jb21wb25lbnRQcmVsb2FkJ118fHRoaXMucHJlbG9hZH0sZ2V0Rm9ybWF0U2V0dGluZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vRm9ybWF0U2V0dGluZ3N9LF9jb2xsZWN0OmZ1bmN0aW9uKCl7dmFyIG09dGhpcy5tQ2hhbmdlc3x8KHRoaXMubUNoYW5nZXM9e19fY291bnQ6MH0pO20uX19jb3VudCsrO3JldHVybiBtfSxfZW5kQ29sbGVjdDpmdW5jdGlvbigpe3ZhciBtPXRoaXMubUNoYW5nZXM7aWYobSYmKC0tbS5fX2NvdW50KT09PTApe2RlbGV0ZSBtLl9fY291bnQ7dGhpcy5fb0NvcmUmJnRoaXMuX29Db3JlLmZpcmVMb2NhbGl6YXRpb25DaGFuZ2VkKG0pO2RlbGV0ZSB0aGlzLm1DaGFuZ2VzfX0sZ2V0U3RhdGlzdGljczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRpc3RpY3N8fHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2FwLXVpLXN0YXRpc3RpY3MiKT09IlgifSxnZXROb05hdGl2ZVNjcm9sbDpmdW5jdGlvbigpe3JldHVybiB0aGlzWyJ4eC1ub05hdGl2ZVNjcm9sbCJdfX0pO3ZhciBNPXsiWkgiOiJ6aC1IYW5zIiwiWkYiOiJ6aC1IYW50IiwiMVEiOiJlbi1VUy14LXNhcHRyYyIsIjJRIjoiZW4tVVMteC1zYXBwc2QifTt2YXIgYT17IiI6e3BhdHRlcm46bnVsbH0sIjEiOntwYXR0ZXJuOiJkZC5NTS55eXl5In0sIjIiOntwYXR0ZXJuOiJNTS9kZC95eXl5In0sIjMiOntwYXR0ZXJuOiJNTS1kZC15eXl5In0sIjQiOntwYXR0ZXJuOiJ5eXl5Lk1NLmRkIn0sIjUiOntwYXR0ZXJuOiJ5eXl5L01NL2RkIn0sIjYiOntwYXR0ZXJuOiJ5eXl5LU1NLWRkIn0sIjciOntwYXR0ZXJuOiJHeXkuTU0uZGQiLGlnbm9yZTp0cnVlfSwiOCI6e3BhdHRlcm46Ikd5eS9NTS9kZCIsaWdub3JlOnRydWV9LCI5Ijp7cGF0dGVybjoiR3l5LU1NLWRkIixpZ25vcmU6dHJ1ZX0sIkEiOntwYXR0ZXJuOiJ5eXl5L01NL2RkIixpZ25vcmU6dHJ1ZX0sIkIiOntwYXR0ZXJuOiJ5eXl5L01NL2RkIixpZ25vcmU6dHJ1ZX0sIkMiOntwYXR0ZXJuOiJ5eXl5L01NL2RkIixpZ25vcmU6dHJ1ZX19O3ZhciBiPXsiIjp7InNob3J0IjpudWxsLG1lZGl1bTpudWxsLGRheVBlcmlvZHM6bnVsbH0sIjAiOnsic2hvcnQiOiJISDptbSIsbWVkaXVtOiJISDptbTpzcyIsZGF5UGVyaW9kczpudWxsfSwiMSI6eyJzaG9ydCI6ImhoOm1tIGEiLG1lZGl1bToiaGg6bW06c3MgYSIsZGF5UGVyaW9kczpbIkFNIiwiUE0iXX0sIjIiOnsic2hvcnQiOiJoaDptbSBhIixtZWRpdW06ImhoOm1tOnNzIGEiLGRheVBlcmlvZHM6WyJhbSIsInBtIl19LCIzIjp7InNob3J0IjoiS0s6bW0gYSIsbWVkaXVtOiJLSzptbTpzcyBhIixkYXlQZXJpb2RzOlsiQU0iLCJQTSJdfSwiNCI6eyJzaG9ydCI6IktLOm1tIGEiLG1lZGl1bToiS0s6bW06c3MgYSIsZGF5UGVyaW9kczpbImFtIiwicG0iXX19O3ZhciBjPXsiIjp7Z3JvdXBpbmdTZXBhcmF0b3I6bnVsbCxkZWNpbWFsU2VwYXJhdG9yOm51bGx9LCIgIjp7Z3JvdXBpbmdTZXBhcmF0b3I6Ii4iLGRlY2ltYWxTZXBhcmF0b3I6IiwifSwiWCI6e2dyb3VwaW5nU2VwYXJhdG9yOiIsIixkZWNpbWFsU2VwYXJhdG9yOiIuIn0sIlkiOntncm91cGluZ1NlcGFyYXRvcjoiICIsZGVjaW1hbFNlcGFyYXRvcjoiLCJ9fTtmdW5jdGlvbiBkKGUsbSl7aWYoIWUpe3Rocm93IG5ldyBFcnJvcihtKX19Qi5leHRlbmQoInNhcC51aS5jb3JlLkNvbmZpZ3VyYXRpb24uRm9ybWF0U2V0dGluZ3MiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihvKXt0aGlzLm9Db25maWd1cmF0aW9uPW87dGhpcy5tU2V0dGluZ3M9e307dGhpcy5zTGVnYWN5RGF0ZUZvcm1hdD11bmRlZmluZWQ7dGhpcy5zTGVnYWN5VGltZUZvcm1hdD11bmRlZmluZWQ7dGhpcy5zTGVnYWN5TnVtYmVyRm9ybWF0U3ltYm9sU2V0PXVuZGVmaW5lZH0sZ2V0Rm9ybWF0TG9jYWxlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZih0KXt2YXIgbD10Lm9Db25maWd1cmF0aW9uLmxhbmd1YWdlO2lmKCFxLmlzRW1wdHlPYmplY3QodC5tU2V0dGluZ3MpKXtpZihsLmluZGV4T2YoIi14LSIpPDApe2w9bCsiLXgtc2FwdWZtdCJ9ZWxzZSBpZihsLmluZGV4T2YoIi1zYXB1Zm10Iik8PWwuaW5kZXhPZigiLXgtIikpe2w9bCsiLXNhcHVmbXQifX1yZXR1cm4gbH1yZXR1cm4gbmV3IEwodGhpcy5vQ29uZmlndXJhdGlvbi5mb3JtYXRMb2NhbGV8fGYodGhpcykpfSxfc2V0OmZ1bmN0aW9uKGssdil7dmFyIG89dGhpcy5tU2V0dGluZ3Nba107aWYodiE9bnVsbCl7dGhpcy5tU2V0dGluZ3Nba109dn1lbHNle2RlbGV0ZSB0aGlzLm1TZXR0aW5nc1trXX1pZigobz09bnVsbCE9dj09bnVsbCl8fCFxLnNhcC5lcXVhbChvLHYpKXt2YXIgbT10aGlzLm9Db25maWd1cmF0aW9uLl9jb2xsZWN0KCk7bVtrXT12O3RoaXMub0NvbmZpZ3VyYXRpb24uX2VuZENvbGxlY3QoKX19LGdldERhdGVQYXR0ZXJuOmZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLm1TZXR0aW5nc1siZGF0ZUZvcm1hdC0iK3NdfSxzZXREYXRlUGF0dGVybjpmdW5jdGlvbihzLHApe2Qocz09InNob3J0Inx8cz09Im1lZGl1bSJ8fHM9PSJsb25nInx8cz09ImZ1bGwiLCJzU3R5bGUgbXVzdCBiZSBzaG9ydCwgbWVkaXVtLCBsb25nIG9yIGZ1bGwiKTt0aGlzLl9zZXQoImRhdGVGb3JtYXQtIitzLHApO3JldHVybiB0aGlzfSxnZXRUaW1lUGF0dGVybjpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5tU2V0dGluZ3NbInRpbWVGb3JtYXQtIitzXX0sc2V0VGltZVBhdHRlcm46ZnVuY3Rpb24ocyxwKXtkKHM9PSJzaG9ydCJ8fHM9PSJtZWRpdW0ifHxzPT0ibG9uZyJ8fHM9PSJmdWxsIiwic1N0eWxlIG11c3QgYmUgc2hvcnQsIG1lZGl1bSwgbG9uZyBvciBmdWxsIik7dGhpcy5fc2V0KCJ0aW1lRm9ybWF0LSIrcyxwKTtyZXR1cm4gdGhpc30sZ2V0TnVtYmVyU3ltYm9sOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1TZXR0aW5nc1sic3ltYm9scy1sYXRuLSIrdF19LHNldE51bWJlclN5bWJvbDpmdW5jdGlvbih0LHMpe2QodD09ImRlY2ltYWwifHx0PT0iZ3JvdXAifHx0PT0icGx1c1NpZ24ifHx0PT0ibWludXNTaWduIiwic1R5cGUgbXVzdCBiZSBkZWNpbWFsLCBncm91cCwgcGx1c1NpZ24gb3IgbWludXNTaWduIik7dGhpcy5fc2V0KCJzeW1ib2xzLWxhdG4tIit0LHMpO3JldHVybiB0aGlzfSxfc2V0RGF5UGVyaW9kczpmdW5jdGlvbih3LHQpe3RoaXMuX3NldCgiZGF5UGVyaW9kcy1mb3JtYXQtIit3LHQpO3JldHVybiB0aGlzfSxnZXRMZWdhY3lEYXRlRm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0xlZ2FjeURhdGVGb3JtYXR8fHVuZGVmaW5lZH0sc2V0TGVnYWN5RGF0ZUZvcm1hdDpmdW5jdGlvbihmKXtmPWY/U3RyaW5nKGYpLnRvVXBwZXJDYXNlKCk6IiI7ZCghZnx8YS5oYXNPd25Qcm9wZXJ0eShmKSwic0Zvcm1hdElkIG11c3QgYmUgb25lIG9mIFsnMScsJzInLCczJywnNCcsJzUnLCc2JywnNycsJzgnLCc5JywnQScsJ0InLCdDJ10gb3IgZW1wdHkiKTtpZihhW2ZdLmlnbm9yZSl7cS5zYXAubG9nLndhcm5pbmcoIlRoZSBBQkFQIGRhdGUgZm9ybWF0ICciK2YrIicgKCIrYVtmXS5wYXR0ZXJuKyIpIGlzIG5vdCBzdXBwb3J0ZWQgeWV0LiBGYWxsaW5nIGJhY2sgdG8gbG9jYWxlIHNwZWNpZmljIGRhdGUgZm9ybWF0cy4iKTtmPSIifXZhciBtPXRoaXMub0NvbmZpZ3VyYXRpb24uX2NvbGxlY3QoKTt0aGlzLnNMZWdhY3lEYXRlRm9ybWF0PW0ubGVnYWN5RGF0ZUZvcm1hdD1mO3RoaXMuc2V0RGF0ZVBhdHRlcm4oInNob3J0IixhW2ZdLnBhdHRlcm4pO3RoaXMuc2V0RGF0ZVBhdHRlcm4oIm1lZGl1bSIsYVtmXS5wYXR0ZXJuKTt0aGlzLm9Db25maWd1cmF0aW9uLl9lbmRDb2xsZWN0KCk7cmV0dXJuIHRoaXN9LGdldExlZ2FjeVRpbWVGb3JtYXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zTGVnYWN5VGltZUZvcm1hdHx8dW5kZWZpbmVkfSxzZXRMZWdhY3lUaW1lRm9ybWF0OmZ1bmN0aW9uKGYpe2QoIWZ8fGIuaGFzT3duUHJvcGVydHkoZiksInNGb3JtYXRJZCBtdXN0IGJlIG9uZSBvZiBbJzAnLCcxJywnMicsJzMnLCc0J10gb3IgZW1wdHkiKTt2YXIgbT10aGlzLm9Db25maWd1cmF0aW9uLl9jb2xsZWN0KCk7dGhpcy5zTGVnYWN5VGltZUZvcm1hdD1tLmxlZ2FjeVRpbWVGb3JtYXQ9Zj1mfHwiIjt0aGlzLnNldFRpbWVQYXR0ZXJuKCJzaG9ydCIsYltmXVsic2hvcnQiXSk7dGhpcy5zZXRUaW1lUGF0dGVybigibWVkaXVtIixiW2ZdWyJtZWRpdW0iXSk7dGhpcy5fc2V0RGF5UGVyaW9kcygiYWJicmV2aWF0ZWQiLGJbZl0uZGF5UGVyaW9kcyk7dGhpcy5vQ29uZmlndXJhdGlvbi5fZW5kQ29sbGVjdCgpO3JldHVybiB0aGlzfSxnZXRMZWdhY3lOdW1iZXJGb3JtYXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zTGVnYWN5TnVtYmVyRm9ybWF0fHx1bmRlZmluZWR9LHNldExlZ2FjeU51bWJlckZvcm1hdDpmdW5jdGlvbihmKXtmPWY/Zi50b1VwcGVyQ2FzZSgpOiIiO2QoIWZ8fGMuaGFzT3duUHJvcGVydHkoZiksInNGb3JtYXRJZCBtdXN0IGJlIG9uZSBvZiBbJyAnLCdYJywnWSddIG9yIGVtcHR5Iik7dmFyIG09dGhpcy5vQ29uZmlndXJhdGlvbi5fY29sbGVjdCgpO3RoaXMuc0xlZ2FjeU51bWJlckZvcm1hdD1tLmxlZ2FjeU51bWJlckZvcm1hdD1mO3RoaXMuc2V0TnVtYmVyU3ltYm9sKCJncm91cCIsY1tmXS5ncm91cGluZ1NlcGFyYXRvcik7dGhpcy5zZXROdW1iZXJTeW1ib2woImRlY2ltYWwiLGNbZl0uZGVjaW1hbFNlcGFyYXRvcik7dGhpcy5vQ29uZmlndXJhdGlvbi5fZW5kQ29sbGVjdCgpfSxnZXRDdXN0b21Mb2NhbGVEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubVNldHRpbmdzfX0pO3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuRWxlbWVudE1ldGFkYXRhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuRWxlbWVudE1ldGFkYXRhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvRWxlbWVudE1ldGFkYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdE1ldGFkYXRhJ10sZnVuY3Rpb24ocSxNKXsidXNlIHN0cmljdCI7dmFyIEU9ZnVuY3Rpb24oYyxDKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07RS5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KE0ucHJvdG90eXBlKTtFLnVpZD1NLnVpZDtFLnByb3RvdHlwZS5nZXRFbGVtZW50TmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zQ2xhc3NOYW1lfTtFLnByb3RvdHlwZS5nZXRSZW5kZXJlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc1JlbmRlcmVyTmFtZX07RS5wcm90b3R5cGUuZ2V0UmVuZGVyZXI9ZnVuY3Rpb24oKXt2YXIgcj10aGlzLmdldFJlbmRlcmVyTmFtZSgpO2lmKCFyKXtyZXR1cm59dmFyIFI9cS5zYXAuZ2V0T2JqZWN0KHIpO2lmKFIpe3JldHVybiBSfXEuc2FwLnJlcXVpcmUocik7cmV0dXJuIHEuc2FwLmdldE9iamVjdChyKX07RS5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncz1mdW5jdGlvbihjKXt2YXIgcz1jLm1ldGFkYXRhO3RoaXMuX3NWaXNpYmlsaXR5PXNbInZpc2liaWxpdHkiXXx8InB1YmxpYyI7dmFyIHI9Yy5oYXNPd25Qcm9wZXJ0eSgicmVuZGVyZXIiKT8oYy5yZW5kZXJlcnx8IiIpOnVuZGVmaW5lZDtkZWxldGUgYy5yZW5kZXJlcjtNLnByb3RvdHlwZS5hcHBseVNldHRpbmdzLmNhbGwodGhpcyxjKTt0aGlzLl9zUmVuZGVyZXJOYW1lPXRoaXMuZ2V0TmFtZSgpKyJSZW5kZXJlciI7aWYodHlwZW9mIHIhPT0idW5kZWZpbmVkIil7aWYodHlwZW9mIHI9PT0ic3RyaW5nIil7dGhpcy5fc1JlbmRlcmVyTmFtZT1yfHx1bmRlZmluZWQ7cmV0dXJufWlmKHR5cGVvZiByPT09ImZ1bmN0aW9uIil7cj17cmVuZGVyOnJ9fXZhciBwPXRoaXMuZ2V0UGFyZW50KCk7dmFyIGI7aWYocCYmcCBpbnN0YW5jZW9mIEUpe2I9cC5nZXRSZW5kZXJlcigpfWlmKCFiKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS5SZW5kZXJlciIpO2I9c2FwLnVpLmNvcmUuUmVuZGVyZXJ9dmFyIFI9cS5zYXAubmV3T2JqZWN0KGIpO3EuZXh0ZW5kKFIscik7cS5zYXAuc2V0T2JqZWN0KHRoaXMuZ2V0UmVuZGVyZXJOYW1lKCksUil9fTtFLnByb3RvdHlwZS5hZnRlckFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oKXtNLnByb3RvdHlwZS5hZnRlckFwcGx5U2V0dGluZ3MuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVnaXN0ZXImJnRoaXMucmVnaXN0ZXIodGhpcyl9O0UucHJvdG90eXBlLmlzSGlkZGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NWaXNpYmlsaXR5PT09ImhpZGRlbiJ9O3JldHVybiBFfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuRXZlbnRCdXMnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5FdmVudEJ1cycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0V2ZW50QnVzIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBhPXNhcC51aS5iYXNlLk9iamVjdC5leHRlbmQoInNhcC51aS5jb3JlLkV2ZW50QnVzIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtzYXAudWkuYmFzZS5PYmplY3QuYXBwbHkodGhpcyk7dGhpcy5fbUNoYW5uZWxzPXt9O3RoaXMuX2RlZmF1bHRDaGFubmVsPW5ldyBFKCl9fSk7YS5wcm90b3R5cGUuc3Vic2NyaWJlPWZ1bmN0aW9uKGMsZSxmLGwpe2lmKHR5cGVvZihlKT09PSJmdW5jdGlvbiIpe2w9ZjtmPWU7ZT1jO2M9bnVsbH12YXIgQz1iKHRoaXMsYyk7Qy5hdHRhY2hFdmVudChlLGYsbCk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKGMsZSxmLGwpe2lmKHR5cGVvZihlKT09PSJmdW5jdGlvbiIpe2w9ZjtmPWU7ZT1jO2M9bnVsbH12YXIgQz1nKHRoaXMsYyk7aWYoIUMpe3JldHVybiB0aGlzfUMuZGV0YWNoRXZlbnQoZSxmLGwpO2lmKEMhPXRoaXMuX2RlZmF1bHRDaGFubmVsKXt2YXIgbT1FLmdldEV2ZW50TGlzdChDKTt2YXIgaT10cnVlO2Zvcih2YXIgSSBpbiBtKXtpZihDLmhhc0xpc3RlbmVycyhJKSl7aT1mYWxzZTticmVha319aWYoaSl7ZGVsZXRlIHRoaXMuX21DaGFubmVsc1tjXX19cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnB1Ymxpc2g9ZnVuY3Rpb24oYyxlLGQpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe2Q9bnVsbDtlPWM7Yz1udWxsfWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD09Mil7aWYodHlwZW9mKGUpIT0ic3RyaW5nIil7ZD1lO2U9YztjPW51bGx9fWQ9ZD9kOnt9O3ZhciBDPWcodGhpcyxjKTtpZighQyl7cmV0dXJufXZhciBmPUUuZ2V0RXZlbnRMaXN0KEMpW2VdO2lmKGYmJnEuaXNBcnJheShmKSl7Zj1mLnNsaWNlKCk7dmFyIEk7Zm9yKHZhciBpPTAsbD1mLmxlbmd0aDtpPGw7aSsrKXtJPWZbaV07SS5mRnVuY3Rpb24uY2FsbChJLm9MaXN0ZW5lcnx8dGhpcyxjLGUsZCl9fX07YS5wcm90b3R5cGUuZ2V0SW50ZXJmYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLl9kZWZhdWx0Q2hhbm5lbC5kZXN0cm95KCk7Zm9yKHZhciBjIGluIHRoaXMuX21DaGFubmVscyl7dGhpcy5fbUNoYW5uZWxzW2NdLmRlc3Ryb3koKX10aGlzLl9tQ2hhbm5lbHM9e307c2FwLnVpLmJhc2UuT2JqZWN0LnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07ZnVuY3Rpb24gZyhlLGMpe2lmKCFjKXtyZXR1cm4gZS5fZGVmYXVsdENoYW5uZWx9cmV0dXJuIGUuX21DaGFubmVsc1tjXX07ZnVuY3Rpb24gYihlLGMpe3ZhciBDPWcoZSxjKTtpZighQyYmYyl7ZS5fbUNoYW5uZWxzW2NdPW5ldyBFKCk7Qz1lLl9tQ2hhbm5lbHNbY119cmV0dXJuIEN9O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuRm9jdXNIYW5kbGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuRm9jdXNIYW5kbGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvRm9jdXNIYW5kbGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZScsJ3NhcC91aS9HbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEsRCxHLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgRj1CLmV4dGVuZCgic2FwLnVpLmNvcmUuRm9jdXNIYW5kbGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocixjKXtCLmFwcGx5KHRoaXMpO3RoaXMub0NvcmU9Yzt0aGlzLm9DdXJyZW50PW51bGw7dGhpcy5vTGFzdD1udWxsO3RoaXMuYUV2ZW50UXVldWU9W107dGhpcy5mRXZlbnRIYW5kbGVyPXEucHJveHkodGhpcy5vbkV2ZW50LHRoaXMpO3RoaXMuZkRlc3Ryb3lIYW5kbGVyPXEucHJveHkodGhpcy5kZXN0cm95LHRoaXMpO2lmKHIuYWRkRXZlbnRMaXN0ZW5lciYmISEhRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtyLmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSk7ci5hZGRFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSl9ZWxzZXtxKHIpLmJpbmQoImFjdGl2YXRlIix0aGlzLmZFdmVudEhhbmRsZXIpO3EocikuYmluZCgiZGVhY3RpdmF0ZSIsdGhpcy5mRXZlbnRIYW5kbGVyKX1xLnNhcC5sb2cuZGVidWcoIkZvY3VzSGFuZGxlciBzZXR1cCBvbiBSb290ICIrci50eXBlKyhyLmlkPyI6ICIrci5pZDoiIiksbnVsbCwic2FwLnVpLmNvcmUuRm9jdXNIYW5kbGVyIik7cSh3aW5kb3cpLmJpbmQoInVubG9hZCIseyJvUm9vdFJlZiI6cn0sdGhpcy5mRGVzdHJveUhhbmRsZXIpfX0pO0YucHJvdG90eXBlLmdldEN1cnJlbnRGb2N1c2VkQ29udHJvbElkPWZ1bmN0aW9uKCl7dmFyIGM9bnVsbDt0cnl7dmFyIGE9cShkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtpZihhLmlzKCI6Zm9jdXMiKXx8KEQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmRC5icm93c2VyLnZlcnNpb249PTgmJmRvY3VtZW50Lmhhc0ZvY3VzKCkpKXtjPWEuY29udHJvbCgpfX1jYXRjaChlKXt9cmV0dXJuIGMmJmMubGVuZ3RoPjA/Y1swXS5nZXRJZCgpOm51bGx9O0YucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oZSl7dmFyIHI9ZS5kYXRhLm9Sb290UmVmO2lmKHIpe2lmKHIucmVtb3ZlRXZlbnRMaXN0ZW5lciYmISEhRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtyLnJlbW92ZUV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSk7ci5yZW1vdmVFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSl9ZWxzZXtxKHIpLnVuYmluZCgiYWN0aXZhdGUiLHRoaXMuZkV2ZW50SGFuZGxlcik7cShyKS51bmJpbmQoImRlYWN0aXZhdGUiLHRoaXMuZkV2ZW50SGFuZGxlcil9fXEod2luZG93KS51bmJpbmQoInVubG9hZCIsdGhpcy5mRGVzdHJveUhhbmRsZXIpO3RoaXMub0NvcmU9bnVsbH07Ri5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbihiKXt2YXIgZT1xLmV2ZW50LmZpeChiKTtxLnNhcC5sb2cuZGVidWcoIkV2ZW50ICIrZS50eXBlKyIgcmVhY2hlZCBGb2N1cyBIYW5kbGVyICh0YXJnZXQ6ICIrZS50YXJnZXQrKGUudGFyZ2V0P2UudGFyZ2V0LmlkOiIiKSsiKSIsbnVsbCwic2FwLnVpLmNvcmUuRm9jdXNIYW5kbGVyIik7dmFyIGE9KGUudHlwZT09ImZvY3VzInx8ZS50eXBlPT0iZm9jdXNpbiJ8fGUudHlwZT09ImFjdGl2YXRlIik/ImZvY3VzIjoiYmx1ciI7dGhpcy5hRXZlbnRRdWV1ZS5wdXNoKHt0eXBlOmEsY29udHJvbElkOmcoZS50YXJnZXQpfSk7aWYodGhpcy5hRXZlbnRRdWV1ZS5sZW5ndGg9PTEpe3RoaXMucHJvY2Vzc0V2ZW50KCl9fTtGLnByb3RvdHlwZS5wcm9jZXNzRXZlbnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmFFdmVudFF1ZXVlWzBdO2lmKCFlKXtyZXR1cm59dHJ5e2lmKGUudHlwZT09ImZvY3VzIil7dGhpcy5vbmZvY3VzRXZlbnQoZS5jb250cm9sSWQpfWVsc2UgaWYoZS50eXBlPT0iYmx1ciIpe3RoaXMub25ibHVyRXZlbnQoZS5jb250cm9sSWQpfX1maW5hbGx5e3RoaXMuYUV2ZW50UXVldWUuc2hpZnQoKTtpZih0aGlzLmFFdmVudFF1ZXVlLmxlbmd0aD4wKXt0aGlzLnByb2Nlc3NFdmVudCgpfX19O0YucHJvdG90eXBlLm9uZm9jdXNFdmVudD1mdW5jdGlvbihjKXt0aGlzLm9DdXJyZW50PWM7aWYoIXRoaXMub0xhc3Qpe3JldHVybn10KHRoaXMub0xhc3QsYyx0aGlzLm9Db3JlKTt0aGlzLm9MYXN0PW51bGx9O0YucHJvdG90eXBlLm9uYmx1ckV2ZW50PWZ1bmN0aW9uKGMpe2lmKCF0aGlzLm9DdXJyZW50KXtyZXR1cm59dGhpcy5vTGFzdD1jO3RoaXMub0N1cnJlbnQ9bnVsbDtxLnNhcC5kZWxheWVkQ2FsbCgwLHRoaXMsImNoZWNrRm9yTG9zdEZvY3VzIil9O0YucHJvdG90eXBlLmNoZWNrRm9yTG9zdEZvY3VzPWZ1bmN0aW9uKCl7aWYodGhpcy5vQ3VycmVudD09bnVsbCYmdGhpcy5vTGFzdCE9bnVsbCl7dCh0aGlzLm9MYXN0LG51bGwsdGhpcy5vQ29yZSl9dGhpcy5vTGFzdD1udWxsfTt2YXIgZz1mdW5jdGlvbihkKXt2YXIgaT1xKGQpLmNsb3Nlc3QoIltkYXRhLXNhcC11aV0iKS5hdHRyKCJpZCIpO2lmKGkpe3JldHVybiBpfXJldHVybiBudWxsfTt2YXIgdD1mdW5jdGlvbihjLHIsQyl7dmFyIG89Yz9zYXAudWkuZ2V0Q29yZSgpLmJ5SWQoYyk6bnVsbDtpZihvKXt2YXIgUj1yP3NhcC51aS5nZXRDb3JlKCkuYnlJZChyKTpudWxsO3ZhciBlPXEuRXZlbnQoInNhcGZvY3VzbGVhdmUiKTtlLnRhcmdldD1vLmdldERvbVJlZigpO2UucmVsYXRlZENvbnRyb2xJZD1SP1IuZ2V0SWQoKTpudWxsO2UucmVsYXRlZENvbnRyb2xGb2N1c0luZm89Uj9SLmdldEZvY3VzSW5mbygpOm51bGw7dmFyIGE9by5nZXRVSUFyZWEoKTt2YXIgdT1udWxsO2lmKGEpe3U9Qy5nZXRVSUFyZWEoYS5nZXRJZCgpKX1lbHNle3ZhciBwPXNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpO2lmKHEuc2FwLmNvbnRhaW5zT3JFcXVhbHMocCxlLnRhcmdldCkpe3U9Qy5nZXRVSUFyZWEocC5pZCl9fWlmKHUpe3UuX2hhbmRsZUV2ZW50KGUpfX19O3JldHVybiBGfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuSW50ZXJ2YWxUcmlnZ2VyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuSW50ZXJ2YWxUcmlnZ2VyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvSW50ZXJ2YWxUcmlnZ2VyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9FdmVudEJ1cyddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBfPSJzYXBVaUludGVydmFsVHJpZ2dlci1ldmVudCI7dmFyIEk9c2FwLnVpLmJhc2UuT2JqZWN0LmV4dGVuZCgic2FwLnVpLmNvcmUuSW50ZXJ2YWxUcmlnZ2VyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oaSl7c2FwLnVpLmJhc2UuT2JqZWN0LmFwcGx5KHRoaXMpO3RoaXMuX29FdmVudEJ1cz1uZXcgRSgpO3RoaXMuX2RlbGF5ZWRDYWxsSWQ9bnVsbDt0aGlzLl90cmlnZ2VyUHJveHk9cS5wcm94eSh0LHRoaXMpO3RoaXMuX2lJbnRlcnZhbD0wO2lmKGkpe3RoaXMuc2V0SW50ZXJ2YWwoaSl9fX0pO3ZhciB0PWZ1bmN0aW9uKCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9kZWxheWVkQ2FsbElkKTt2YXIgaD10aGlzLl9vRXZlbnRCdXMuX2RlZmF1bHRDaGFubmVsLmhhc0xpc3RlbmVycyhfKTtpZih0aGlzLl9pSW50ZXJ2YWw+MCYmaCl7dGhpcy5fb0V2ZW50QnVzLnB1Ymxpc2goXyk7dGhpcy5fZGVsYXllZENhbGxJZD1xLnNhcC5kZWxheWVkQ2FsbCh0aGlzLl9pSW50ZXJ2YWwsdGhpcyx0aGlzLl90cmlnZ2VyUHJveHkpfX07SS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3NhcC51aS5iYXNlLk9iamVjdC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZGVsZXRlIHRoaXMuX3RyaWdnZXJQcm94eTt0aGlzLl9vRXZlbnRCdXMuZGVzdHJveSgpO2RlbGV0ZSB0aGlzLl9vRXZlbnRCdXN9O0kucHJvdG90eXBlLnNldEludGVydmFsPWZ1bmN0aW9uKGkpe2lmKHRoaXMuX2lJbnRlcnZhbCE9PWkpe3RoaXMuX2lJbnRlcnZhbD1pO3RoaXMuX3RyaWdnZXJQcm94eSgpfX07SS5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZnVuY3Rpb24oZixsKXt0aGlzLl9vRXZlbnRCdXMuc3Vic2NyaWJlKF8sZixsKTt0aGlzLl90cmlnZ2VyUHJveHkoKX07SS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZixsKXt0aGlzLl9vRXZlbnRCdXMudW5zdWJzY3JpYmUoXyxmLGwpfTtJLnByb3RvdHlwZS5nZXRJbnRlcmZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307cmV0dXJuIEl9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Mb2NhbGVEYXRhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTG9jYWxlRGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0xvY2FsZURhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnLCcuL0NvbmZpZ3VyYXRpb24nLCcuL0xvY2FsZSddLGZ1bmN0aW9uKHEsQixDLEwpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1CLmV4dGVuZCgic2FwLnVpLmNvcmUuTG9jYWxlRGF0YSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG8pe0IuYXBwbHkodGhpcyk7dGhpcy5tRGF0YT1nKG8pfSxfZ2V0OmZ1bmN0aW9uKGspe3JldHVybiB0aGlzLm1EYXRhW2tdfSxnZXRPcmllbnRhdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoIm9yaWVudGF0aW9uIil9LGdldExhbmd1YWdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoImxhbmd1YWdlcyIpfSxnZXRTY3JpcHRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldCgic2NyaXB0cyIpfSxnZXRUZXJyaXRvcmllczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoInRlcnJpdG9yaWVzIil9LGdldE1vbnRoczpmdW5jdGlvbih3KXtyZXR1cm4gdGhpcy5fZ2V0KCJtb250aHMtZm9ybWF0LSIrdyl9LGdldE1vbnRoc1N0YW5kQWxvbmU6ZnVuY3Rpb24odyl7cmV0dXJuIHRoaXMuX2dldCgibW9udGhzLXN0YW5kQWxvbmUtIit3KX0sZ2V0RGF5czpmdW5jdGlvbih3KXtyZXR1cm4gdGhpcy5fZ2V0KCJkYXlzLWZvcm1hdC0iK3cpfSxnZXREYXlzU3RhbmRBbG9uZTpmdW5jdGlvbih3KXtyZXR1cm4gdGhpcy5fZ2V0KCJkYXlzLXN0YW5kQWxvbmUtIit3KX0sZ2V0UXVhcnRlcnM6ZnVuY3Rpb24odyl7cmV0dXJuIHRoaXMuX2dldCgicXVhcnRlcnMtZm9ybWF0LSIrdyl9LGdldERheVBlcmlvZHM6ZnVuY3Rpb24odyl7cmV0dXJuIHRoaXMuX2dldCgiZGF5UGVyaW9kcy1mb3JtYXQtIit3KX0sZ2V0RGF0ZVBhdHRlcm46ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuX2dldCgiZGF0ZUZvcm1hdC0iK3MpfSxnZXRUaW1lUGF0dGVybjpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5fZ2V0KCJ0aW1lRm9ybWF0LSIrcyl9LGdldERhdGVUaW1lUGF0dGVybjpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5fZ2V0KCJkYXRlVGltZUZvcm1hdC0iK3MpfSxnZXROdW1iZXJTeW1ib2w6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2dldCgic3ltYm9scy1sYXRuLSIrdCl9LGdldERlY2ltYWxQYXR0ZXJuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldCgiZGVjaW1hbEZvcm1hdCIpLnN0YW5kYXJkfSxnZXRDdXJyZW5jeVBhdHRlcm46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJjdXJyZW5jeUZvcm1hdCIpLnN0YW5kYXJkfSxnZXRQZXJjZW50UGF0dGVybjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoInBlcmNlbnRGb3JtYXQiKS5zdGFuZGFyZH0sZ2V0Rmlyc3REYXlPZldlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJ3ZWVrRGF0YS1maXJzdERheSIpfSxnZXRXZWVrZW5kU3RhcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJ3ZWVrRGF0YS13ZWVrZW5kU3RhcnQiKX0sZ2V0V2Vla2VuZEVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoIndlZWtEYXRhLXdlZWtlbmRFbmQiKX0sZ2V0SW50ZXJ2YWxQYXR0ZXJuOmZ1bmN0aW9uKGkpe3JldHVybihpJiZ0aGlzLl9nZXQoImludGVydmFsRm9ybWF0LSIraSkpfHx0aGlzLl9nZXQoImludGVydmFsRm9ybWF0RmFsbGJhY2siKX0sZ2V0Q3VycmVuY3lEaWdpdHM6ZnVuY3Rpb24ocyl7dmFyIG89dGhpcy5fZ2V0KCJjdXJyZW5jeURpZ2l0cyIpO3ZhciBkPTI7aWYobyl7aWYob1tzXSE9dW5kZWZpbmVkKXtkPW9bc119ZWxzZXtkPW9bIkRFRkFVTFQiXX19cmV0dXJuIGR9LGdldEN1cnJlbmN5U3ltYm9sOmZ1bmN0aW9uKHMpe3ZhciBvPXRoaXMuX2dldCgiY3VycmVuY3lTeW1ib2xzIik7cmV0dXJuKG8mJm9bc10pfHxzfX0pO3ZhciBNPXsib3JpZW50YXRpb24iOiJsZWZ0LXRvLXJpZ2h0IiwibGFuZ3VhZ2VzIjp7fSwic2NyaXB0cyI6e30sInRlcnJpdG9yaWVzIjp7fSwiZGF0ZUZvcm1hdC1mdWxsIjoiRUVFRSwgTU1NTSBkLCB5IiwiZGF0ZUZvcm1hdC1sb25nIjoiTU1NTSBkLCB5IiwiZGF0ZUZvcm1hdC1tZWRpdW0iOiJNTU0gZCwgeSIsImRhdGVGb3JtYXQtc2hvcnQiOiJNL2QveXkiLCJ0aW1lRm9ybWF0LWZ1bGwiOiJoOm1tOnNzIGEgenp6eiIsInRpbWVGb3JtYXQtbG9uZyI6Img6bW06c3MgYSB6IiwidGltZUZvcm1hdC1tZWRpdW0iOiJoOm1tOnNzIGEiLCJ0aW1lRm9ybWF0LXNob3J0IjoiaDptbSBhIiwiZGF0ZVRpbWVGb3JtYXQtZnVsbCI6InsxfSAnYXQnIHswfSIsImRhdGVUaW1lRm9ybWF0LWxvbmciOiJ7MX0gJ2F0JyB7MH0iLCJkYXRlVGltZUZvcm1hdC1tZWRpdW0iOiJ7MX0sIHswfSIsImRhdGVUaW1lRm9ybWF0LXNob3J0IjoiezF9LCB7MH0iLCJkZWNpbWFsRm9ybWF0Ijp7InN0YW5kYXJkIjoiIywjIzAuIyMjIn0sImN1cnJlbmN5Rm9ybWF0Ijp7InN0YW5kYXJkIjoiwqQjLCMjMC4wMCJ9LCJwZXJjZW50Rm9ybWF0Ijp7InN0YW5kYXJkIjoiIywjIzAlIn0sIm1vbnRocy1mb3JtYXQtYWJicmV2aWF0ZWQiOlsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIl0sIm1vbnRocy1mb3JtYXQtd2lkZSI6WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciJdLCJtb250aHMtZm9ybWF0LW5hcnJvdyI6WyIxIiwiMiIsIjMiLCI0IiwiNSIsIjYiLCI3IiwiOCIsIjkiLCIxMCIsIjExIiwiMTIiXSwibW9udGhzLXN0YW5kQWxvbmUtYWJicmV2aWF0ZWQiOlsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIl0sIm1vbnRocy1zdGFuZEFsb25lLXdpZGUiOlsiSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLCJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiXSwibW9udGhzLXN0YW5kQWxvbmUtbmFycm93IjpbIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4IiwiOSIsIjEwIiwiMTEiLCIxMiJdLCJkYXlzLWZvcm1hdC1hYmJyZXZpYXRlZCI6WyJTdW4iLCJNb24iLCJUdWUiLCJXZWQiLCJUaHUiLCJGcmkiLCJTYXQiXSwiZGF5cy1mb3JtYXQtd2lkZSI6WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLCJkYXlzLWZvcm1hdC1uYXJyb3ciOlsiUyIsIk0iLCJUIiwiVyIsIlQiLCJGIiwiUyJdLCJkYXlzLXN0YW5kQWxvbmUtYWJicmV2aWF0ZWQiOlsiU3VuIiwiTW9uIiwiVHVlIiwiV2VkIiwiVGh1IiwiRnJpIiwiU2F0Il0sImRheXMtc3RhbmRBbG9uZS13aWRlIjpbIlN1bmRheSIsIk1vbmRheSIsIlR1ZXNkYXkiLCJXZWRuZXNkYXkiLCJUaHVyc2RheSIsIkZyaWRheSIsIlNhdHVyZGF5Il0sImRheXMtc3RhbmRBbG9uZS1uYXJyb3ciOlsiUyIsIk0iLCJUIiwiVyIsIlQiLCJGIiwiUyJdLCJxdWFydGVycy1mb3JtYXQtbmFycm93IjpbIjEiLCIyIiwiMyIsIjQiXSwicXVhcnRlcnMtZm9ybWF0LWFiYnJldmlhdGVkIjpbIlExIiwiUTIiLCJRMyIsIlE0Il0sInF1YXJ0ZXJzLWZvcm1hdC13aWRlIjpbIjFzdCBxdWFydGVyIiwiMm5kIHF1YXJ0ZXIiLCIzcmQgcXVhcnRlciIsIjR0aCBxdWFydGVyIl0sInF1YXJ0ZXJzLXN0YW5kQWxvbmUtbmFycm93IjpbIjEiLCIyIiwiMyIsIjQiXSwic3ltYm9scy1sYXRuLWRlY2ltYWwiOiIuIiwic3ltYm9scy1sYXRuLWdyb3VwIjoiLCIsInN5bWJvbHMtbGF0bi1wbHVzU2lnbiI6IisiLCJzeW1ib2xzLWxhdG4tbWludXNTaWduIjoiLSIsImRheVBlcmlvZHMtZm9ybWF0LW5hcnJvdyI6WyJBTSIsIlBNIl0sImRheVBlcmlvZHMtZm9ybWF0LXdpZGUiOlsiQU0iLCJQTSJdLCJkYXlQZXJpb2RzLWZvcm1hdC1hYmJyZXZpYXRlZCI6WyJBTSIsIlBNIl0sIndlZWtEYXRhLW1pbkRheXMiOjQsIndlZWtEYXRhLWZpcnN0RGF5IjoxLCJ3ZWVrRGF0YS13ZWVrZW5kU3RhcnQiOjYsIndlZWtEYXRhLXdlZWtlbmRFbmQiOjAsImludGVydmFsRm9ybWF0RmFsbGJhY2siOiJ7MH0g4oCTIHsxfSJ9O3ZhciBiPXsiaXciOiJoZSIsImppIjoieWkiLCJpbiI6ImlkIiwic2giOiJzciJ9O3ZhciBjPShmdW5jdGlvbigpe3ZhciBkPSJhcixhcl9BRSxhcl9FRyxhcl9TQSxiZyxiZ19CRyxicixjYSxjYV9FUyxjcyxjc19DWixkYSxkYV9ESyxkZSxkZV9BVCxkZV9CRSxkZV9DSCxkZV9ERSxkZV9MVSxlbCxlbF9DWSxlbF9HUixlbixlbl9BVSxlbl9DQSxlbl9HQixlbl9ISyxlbl9JRSxlbl9JTixlbl9OWixlbl9QRyxlbl9TRyxlbl9VUyxlbl9aQSxlcyxlc19BUixlc19CTyxlc19DTCxlc19DTyxlc19FUyxlc19NWCxlc19QRSxlc19VWSxlc19WRSxldCxldF9FRSxmYSxmYV9JUixmaSxmaV9GSSxmcixmcl9CRSxmcl9DQSxmcl9DSCxmcl9GUixmcl9MVSxoZSxoZV9JTCxoaSxoaV9JTixocixocl9IUixodSxodV9IVSxpZCxpZF9JRCxpdCxpdF9DSCxpdF9JVCxqYSxqYV9KUCxrbyxrb19LUixsdCxsdF9MVCxsdixsdl9MVixuYixuYl9OTyxubCxubF9CRSxubF9OTCxubixubl9OTyxwbCxwbF9QTCxwdCxwdF9CUixwdF9QVCxybyxyb19STyxydSxydV9LWixydV9SVSxydV9VQSxzayxza19TSyxzbCxzbF9TSSxzcixzdixzdl9TRSx0aCx0aF9USCx0cix0cl9DWSx0cl9UUix1ayx1a19VQSx2aSx2aV9WTix6aF9DTix6aF9ISyx6aF9TRyx6aF9UVyIuc3BsaXQoIiwiKSxpLHI7aWYoZC5sZW5ndGghPTF8fChkWzBdJiZkWzBdLmluZGV4T2YoIkAiKTwwKSl7cj17fTtmb3IoaT0wO2k8ZC5sZW5ndGg7aSsrKXtyW2RbaV1dPXRydWV9fXJldHVybiByfSgpKTt2YXIgbD17fTtmdW5jdGlvbiBnKG8pe3ZhciBzPW8uZ2V0TGFuZ3VhZ2UoKXx8IiIsUz1vLmdldFNjcmlwdCgpfHwiIixyPW8uZ2V0UmVnaW9uKCl8fCIiLGQ7ZnVuY3Rpb24gZShpKXt2YXIgRDtpZighbFtpXSYmKCFjfHxjW2ldPT09dHJ1ZSkpe2xbaV09cS5zYXAubG9hZFJlc291cmNlKCJzYXAvdWkvY29yZS9jbGRyLyIraSsiLmpzb24iLHtkYXRhVHlwZToianNvbiIsZmFpbE9uRXJyb3I6ZmFsc2V9KX1yZXR1cm4gbFtpXX1zPShzJiZiW3NdKXx8cztpZihzPT09Im5vIil7cz0ibmIifWlmKHM9PT0iemgiJiYhcil7aWYoUz09PSJIYW5zIil7cj0iQ04ifWVsc2UgaWYoUz09PSJIYW50Iil7cj0iVFcifX12YXIgaT1zKyJfIityO2lmKHMmJnIpe2Q9ZShpKX1pZighZCYmcyl7ZD1lKHMpfWxbaV09ZHx8TTtyZXR1cm4gbFtpXX07YS5leHRlbmQoInNhcC51aS5jb3JlLkN1c3RvbUxvY2FsZURhdGEiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihvKXthLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1DdXN0b21EYXRhPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldEZvcm1hdFNldHRpbmdzKCkuZ2V0Q3VzdG9tTG9jYWxlRGF0YSgpfSxfZ2V0OmZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLm1DdXN0b21EYXRhW2ldfHx0aGlzLm1EYXRhW2ldfX0pO2EuZ2V0SW5zdGFuY2U9ZnVuY3Rpb24obyl7cmV0dXJuIG8uaGFzUHJpdmF0ZVVzZVN1YnRhZygic2FwdWZtdCIpP25ldyBzYXAudWkuY29yZS5DdXN0b21Mb2NhbGVEYXRhKG8pOm5ldyBhKG8pfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlJlbmRlck1hbmFnZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvUmVuZGVyTWFuYWdlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0ludGVyZmFjZScsJ3NhcC91aS9iYXNlL09iamVjdCcsJ2pxdWVyeS5zYXAuYWN0JywnanF1ZXJ5LnNhcC5lbmNvZGVyJ10sZnVuY3Rpb24ocSxJLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgYz1bInJlbmRlckNvbnRyb2wiLCJ3cml0ZSIsIndyaXRlRXNjYXBlZCIsInRyYW5zbGF0ZSIsIndyaXRlQWNjZWxlcmF0b3JLZXkiLCJ3cml0ZUNvbnRyb2xEYXRhIiwid3JpdGVFbGVtZW50RGF0YSIsIndyaXRlQXR0cmlidXRlIiwid3JpdGVBdHRyaWJ1dGVFc2NhcGVkIiwiYWRkQ2xhc3MiLCJ3cml0ZUNsYXNzZXMiLCJhZGRTdHlsZSIsIndyaXRlU3R5bGVzIiwid3JpdGVBY2Nlc3NpYmlsaXR5U3RhdGUiLCJ3cml0ZUljb24iLCJnZXRDb25maWd1cmF0aW9uIiwiZ2V0SFRNTCIsImNsZWFudXBDb250cm9sV2l0aG91dFJlbmRlcmluZyJdO3ZhciBOPVsicmVuZGVyIiwiZmx1c2giLCJkZXN0cm95Il07dmFyIFI9Qi5leHRlbmQoInNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0IuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuYUJ1ZmZlcj1bXTt0aGlzLmFSZW5kZXJlZENvbnRyb2xzPVtdO3RoaXMuYVN0eWxlU3RhY2s9W3t9XX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6Yy5jb25jYXQoTil9fSk7Ui5wcm90b3R5cGUuZ2V0UmVuZGVyZXJJbnRlcmZhY2U9ZnVuY3Rpb24oKXt2YXIgaT1uZXcgSSh0aGlzLGMpO3RoaXMuZ2V0UmVuZGVyZXJJbnRlcmZhY2U9cS5zYXAuZ2V0dGVyKGkpO3JldHVybiBpfTtSLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5hQnVmZmVyPVtdO3RoaXMuYVJlbmRlcmVkQ29udHJvbHM9W107dGhpcy5hU3R5bGVTdGFjaz1be31dfTtSLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpfTtSLnByb3RvdHlwZS5nZXRSZW5kZXJlcj1mdW5jdGlvbihDKXtyZXR1cm4gUi5nZXRSZW5kZXJlcihDKX07dmFyIHQ9ZnVuY3Rpb24ocixDKXtyLl9iTG9ja2VkPXRydWU7dHJ5e3ZhciBlPXEuRXZlbnQoIkJlZm9yZVJlbmRlcmluZyIpO2Uuc3JjQ29udHJvbD1DO0MuX2hhbmRsZUV2ZW50KGUpfWZpbmFsbHl7ci5fYkxvY2tlZD1mYWxzZX19O1IucHJvdG90eXBlLmNsZWFudXBDb250cm9sV2l0aG91dFJlbmRlcmluZz1mdW5jdGlvbihDKXtpZighQ3x8IUMuZ2V0RG9tUmVmKCkpe3JldHVybn10KHRoaXMsQyk7Qy5iT3V0cHV0PWZhbHNlfTtSLnByb3RvdHlwZS5yZW5kZXJDb250cm9sPWZ1bmN0aW9uKEMpe2lmKCFDKXtyZXR1cm59aWYoIXRoaXMuYVJlbmRlclN0YWNrKXt0aGlzLmFSZW5kZXJTdGFjaz1uZXcgQXJyYXkoKX1pZih0aGlzLmFSZW5kZXJTdGFjayYmdGhpcy5hUmVuZGVyU3RhY2subGVuZ3RoPjApe3Euc2FwLm1lYXN1cmUucGF1c2UodGhpcy5hUmVuZGVyU3RhY2tbMF0rIi0tLXJlbmRlckNvbnRyb2wiKX1lbHNlIGlmKEMuZ2V0UGFyZW50KCkmJkMuZ2V0UGFyZW50KCkuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCk9PSJzYXAudWkuY29yZS5VSUFyZWEiKXtxLnNhcC5tZWFzdXJlLnBhdXNlKEMuZ2V0UGFyZW50KCkuZ2V0SWQoKSsiLS0tcmVyZW5kZXIiKX10aGlzLmFSZW5kZXJTdGFjay51bnNoaWZ0KEMuZ2V0SWQoKSk7cS5zYXAubWVhc3VyZS5zdGFydChDLmdldElkKCkrIi0tLXJlbmRlckNvbnRyb2wiLCJSZW5kZXJpbmcgb2YgIitDLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpKTt2YXIgYj10aGlzLmFCdWZmZXIubGVuZ3RoO3ZhciBvPXt9O2lmKEMuYUN1c3RvbVN0eWxlQ2xhc3NlcyYmQy5hQ3VzdG9tU3R5bGVDbGFzc2VzLmxlbmd0aD4wKXtvLmFDdXN0b21TdHlsZUNsYXNzZXM9Qy5hQ3VzdG9tU3R5bGVDbGFzc2VzfXRoaXMuYVN0eWxlU3RhY2sucHVzaChvKTtxLnNhcC5tZWFzdXJlLnBhdXNlKEMuZ2V0SWQoKSsiLS0tcmVuZGVyQ29udHJvbCIpO3ZhciByPXRoaXMuZ2V0UmVuZGVyZXIoQyk7cS5zYXAubWVhc3VyZS5yZXN1bWUoQy5nZXRJZCgpKyItLS1yZW5kZXJDb250cm9sIik7dCh0aGlzLEMpO3ZhciBhPUMuYUJpbmRQYXJhbWV0ZXJzO2lmKGEmJmEubGVuZ3RoPjApe3ZhciBkPXEoQy5nZXREb21SZWYoKSk7aWYoZCYmZFswXSl7Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDtpKyspe3ZhciBwPWFbaV07ZC51bmJpbmQocC5zRXZlbnRUeXBlLHAuZm5Qcm94eSl9fX1yLnJlbmRlcih0aGlzLmdldFJlbmRlcmVySW50ZXJmYWNlKCksQyk7dGhpcy5hU3R5bGVTdGFjay5wb3AoKTt0aGlzLmFSZW5kZXJlZENvbnRyb2xzLnB1c2goQyk7aWYoQy5nZXRVSUFyZWEmJkMuZ2V0VUlBcmVhKCkpe0MuZ2V0VUlBcmVhKCkuX29uQ29udHJvbFJlbmRlcmVkKEMpfUMuYk91dHB1dD10aGlzLmFCdWZmZXIubGVuZ3RoIT1iO3Euc2FwLm1lYXN1cmUuZW5kKEMuZ2V0SWQoKSsiLS0tcmVuZGVyQ29udHJvbCIpO3RoaXMuYVJlbmRlclN0YWNrLnNoaWZ0KCk7aWYodGhpcy5hUmVuZGVyU3RhY2smJnRoaXMuYVJlbmRlclN0YWNrLmxlbmd0aD4wKXtxLnNhcC5tZWFzdXJlLnJlc3VtZSh0aGlzLmFSZW5kZXJTdGFja1swXSsiLS0tcmVuZGVyQ29udHJvbCIpfWVsc2UgaWYoQy5nZXRQYXJlbnQoKSYmQy5nZXRQYXJlbnQoKS5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKT09InNhcC51aS5jb3JlLlVJQXJlYSIpe3Euc2FwLm1lYXN1cmUucmVzdW1lKEMuZ2V0UGFyZW50KCkuZ2V0SWQoKSsiLS0tcmVyZW5kZXIiKX19O1IucHJvdG90eXBlLmdldEhUTUw9ZnVuY3Rpb24oQyl7dmFyIGE9dGhpcy5hQnVmZmVyO3ZhciByPXRoaXMuYUJ1ZmZlcj1bXTt0aGlzLnJlbmRlckNvbnRyb2woQyk7dGhpcy5hQnVmZmVyPWE7cmV0dXJuIHIuam9pbigiIil9OyhmdW5jdGlvbigpe3ZhciBzPWZ1bmN0aW9uKCl7dmFyIEM9c2FwLnVpLmdldENvcmUoKTt2YXIgRj1DLmdldEN1cnJlbnRGb2N1c2VkQ29udHJvbElkKCksbz1udWxsLGE9bnVsbDtpZihGKXt2YXIgYj1DLmdldEVsZW1lbnRCeUlkKEYpO2lmKGIpe289Yi5nZXRGb2N1c0luZm8oKTthPWIuZ2V0Rm9jdXNEb21SZWYoKX19cmV0dXJue2ZvY3VzZWRDb250cm9sSWQ6Rixmb2N1c0luZm86byxmb2N1c0RvbVJlZjphfX07dmFyIGY9ZnVuY3Rpb24ocixhLFMpe2Zvcih2YXIgaT0wLGI9YS5sZW5ndGg7aTxiO2krKyl7dmFyIEM9YVtpXTtpZihDLmJPdXRwdXQpe3IuX2JMb2NrZWQ9dHJ1ZTt0cnl7dmFyIEU9cS5FdmVudCgiQWZ0ZXJSZW5kZXJpbmciKTtFLnNyY0NvbnRyb2w9QztxLnNhcC5tZWFzdXJlLnN0YXJ0KEMuZ2V0SWQoKSsiLS0tQWZ0ZXJSZW5kZXJpbmciLCJBZnRlclJlbmRlcmluZyBvZiAiK0MuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCkpO0MuX2hhbmRsZUV2ZW50KEUpO3Euc2FwLm1lYXN1cmUuZW5kKEMuZ2V0SWQoKSsiLS0tQWZ0ZXJSZW5kZXJpbmciKX1maW5hbGx5e3IuX2JMb2NrZWQ9ZmFsc2V9fX10cnl7aWYoUyYmUy5mb2N1c2VkQ29udHJvbElkKXt2YXIgRj1zYXAudWkuZ2V0Q29yZSgpLmdldEVsZW1lbnRCeUlkKFMuZm9jdXNlZENvbnRyb2xJZCk7aWYoRiYmRi5nZXRGb2N1c0RvbVJlZigpIT1TLmZvY3VzRG9tUmVmKXtGLmFwcGx5Rm9jdXNJbmZvKFMuZm9jdXNJbmZvKX19fWNhdGNoKGUpe3Euc2FwLmxvZy53YXJuaW5nKCJQcm9ibGVtcyB3aGlsZSByZXN0b3JlIGZvY3VzIGFmdGVyIHJlbmRlcmluZzogIitlLG51bGwscil9Zm9yKHZhciBpPTAsYj1hLmxlbmd0aDtpPGI7aSsrKXt2YXIgQz1hW2ldLGQ9Qy5hQmluZFBhcmFtZXRlcnM7aWYoZCYmZC5sZW5ndGg+MCl7dmFyIEQ9cShDLmdldERvbVJlZigpKTtpZihEJiZEWzBdKXtmb3IodmFyIGo9MDtqPGQubGVuZ3RoO2orKyl7dmFyIHA9ZFtqXTtELmJpbmQocC5zRXZlbnRUeXBlLHAuZm5Qcm94eSl9fX19fTtSLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbihULGQsdil7aWYodGhpcy5iUmVuZGVyZXJNb2RlKXtxLnNhcC5sb2cuaW5mbygiRmx1c2ggbXVzdCBub3QgYmUgY2FsbGVkIGZyb20gY29udHJvbCByZW5kZXJlcnMuIENhbGwgaWdub3JlZC4iLG51bGwsdGhpcyk7cmV0dXJufWlmKCFkJiYodHlwZW9mIHYhPT0ibnVtYmVyIikmJiF2KXtSLnByZXNlcnZlQ29udGVudChUKX12YXIgUz1zKCk7dmFyIGg9Ui5wcmVwYXJlSFRNTDUodGhpcy5hQnVmZmVyLmpvaW4oIiIpKTtpZih0aGlzLl9mUHV0SW50b0RvbSl7dGhpcy5fZlB1dEludG9Eb20oVCxoKX1lbHNle2Zvcih2YXIgaT0wO2k8dGhpcy5hUmVuZGVyZWRDb250cm9scy5sZW5ndGg7aSsrKXt2YXIgbz10aGlzLmFSZW5kZXJlZENvbnRyb2xzW2ldLmdldERvbVJlZigpO2lmKG8mJiFSLmlzUHJlc2VydmVkQ29udGVudChvKSl7aWYoUi5pc0lubGluZVRlbXBsYXRlKG8pKXtxKG8pLmVtcHR5KCl9ZWxzZXtxKG8pLnJlbW92ZSgpfX19aWYodHlwZW9mIHY9PT0ibnVtYmVyIil7aWYodjw9MCl7cShUKS5wcmVwZW5kKGgpfWVsc2V7dmFyICQ9cShUKS5jaGlsZHJlbigpLmVxKHYtMSk7aWYoJC5sZW5ndGg9PT0xKXskLmFmdGVyKGgpfWVsc2V7cShUKS5hcHBlbmQoaCl9fX1lbHNlIGlmKCF2KXtxKFQpLmh0bWwoaCl9ZWxzZXtxKFQpLmFwcGVuZChoKX19Zih0aGlzLHRoaXMuYVJlbmRlcmVkQ29udHJvbHMsUyk7dGhpcy5hUmVuZGVyZWRDb250cm9scz1bXTt0aGlzLmFCdWZmZXI9W107dGhpcy5hU3R5bGVTdGFjaz1be31dO3Euc2FwLmFjdC5yZWZyZXNoKCl9O1IucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihDLFQpe2lmKHRoaXMuYlJlbmRlcmVyTW9kZSl7cS5zYXAubG9nLmluZm8oIlJlbmRlciBtdXN0IG5vdCBiZSBjYWxsZWQgZnJvbSBjb250cm9sIHJlbmRlcmVycy4gQ2FsbCBpZ25vcmVkLiIsbnVsbCx0aGlzKTtyZXR1cm59aWYodGhpcy5fYkxvY2tlZCl7cS5zYXAubG9nLmVycm9yKCJSZW5kZXIgbXVzdCBub3QgYmUgY2FsbGVkIHdpdGhpbiBCZWZvcmUgb3IgQWZ0ZXIgUmVuZGVyaW5nIFBoYXNlLiBDYWxsIGlnbm9yZWQuIixudWxsLHRoaXMpO3JldHVybn10aGlzLmFCdWZmZXI9W107dGhpcy5yZW5kZXJDb250cm9sKEMpO3RoaXMuX2ZQdXRJbnRvRG9tPWZ1bmN0aW9uKG8saCl7aWYoQyYmVCl7dmFyIGE9Qy5nZXREb21SZWYoKTtpZihSLmlzUHJlc2VydmVkQ29udGVudChhKSl7YT1xLnNhcC5ieUlkKCJzYXAtdWktZHVtbXktIitDLmdldElkKCkpWzBdfHxhfXZhciBuPWEmJmEucGFyZW50Tm9kZSE9VDt2YXIgQT1mdW5jdGlvbigpe3ZhciBqPXEoVCk7aWYoVC5pbm5lckhUTUw9PSIiKXtqLmh0bWwoaCl9ZWxzZXtqLmFwcGVuZChoKX19O2lmKG4pe2lmKCFSLmlzUHJlc2VydmVkQ29udGVudChhKSl7aWYoUi5pc0lubGluZVRlbXBsYXRlKGEpKXtxKGEpLmVtcHR5KCl9ZWxzZXtxKGEpLnJlbW92ZSgpfX1pZihoKXtBKCl9fWVsc2V7aWYoaCl7aWYoYSl7aWYoUi5pc0lubGluZVRlbXBsYXRlKGEpKXtxKGEpLmh0bWwoaCl9ZWxzZXtxKGEpLnJlcGxhY2VXaXRoKGgpfX1lbHNle0EoKX19ZWxzZXtpZihSLmlzSW5saW5lVGVtcGxhdGUoYSkpe3EoYSkuZW1wdHkoKX1lbHNle2lmKCFDLmdldFBhcmVudCgpfHwhQy5nZXRQYXJlbnQoKS5fb25DaGlsZFJlcmVuZGVyZWRFbXB0eXx8IUMuZ2V0UGFyZW50KCkuX29uQ2hpbGRSZXJlbmRlcmVkRW1wdHkoQyxhKSl7cShhKS5yZW1vdmUoKX19fX19fTt0aGlzLmZsdXNoKFQsdHJ1ZSk7dGhpcy5fZlB1dEludG9Eb209bnVsbH19KCkpO1IuZ2V0UmVuZGVyZXI9ZnVuY3Rpb24oQyl7cmV0dXJuIEMuZ2V0TWV0YWRhdGEoKS5nZXRSZW5kZXJlcigpfTtSLmluaXRIVE1MNVN1cHBvcnQ9ZnVuY3Rpb24oKXtpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmKHNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPT09OHx8c2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb249PT03KSl7dmFyIFQ9WyJhcnRpY2xlIiwiYXNpZGUiLCJhdWRpbyIsImNhbnZhcyIsImNvbW1hbmQiLCJkYXRhbGlzdCIsImRldGFpbHMiLCJmaWdjYXB0aW9uIiwiZmlndXJlIiwiZm9vdGVyIiwiaGVhZGVyIiwiaGdyb3VwIiwia2V5Z2VuIiwibWFyayIsIm1ldGVyIiwibmF2Iiwib3V0cHV0IiwicHJvZ3Jlc3MiLCJycCIsInJ0IiwicnVieSIsInNlY3Rpb24iLCJzb3VyY2UiLCJzdW1tYXJ5IiwidGVtcGxhdGUiLCJ0aW1lIiwidmlkZW8iLCJ3YnIiXTtmb3IodmFyIGk9MDtpPFQubGVuZ3RoO2krKyl7ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChUW2ldKX12YXIgcj1uZXcgUmVnRXhwKCI8KCIrVC5qb2luKCJ8IikrIikoXFxzfD4pIiwiaSIpO3ZhciBkPW51bGw7Ui5wcmVwYXJlSFRNTDU9ZnVuY3Rpb24oaCl7aWYoaCYmaC5tYXRjaChyKSl7aWYoIWQpe2Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7ZC5zdHlsZS5kaXNwbGF5PSdub25lJ312YXIgZT1kLmNsb25lTm9kZSh0cnVlKTt2YXIgZj1kb2N1bWVudC5ib2R5fHxkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zi5hcHBlbmRDaGlsZChlKTtlLmlubmVySFRNTD1oLnJlcGxhY2UoL15cc1xzKi8sJycpLnJlcGxhY2UoL1xzXHMqJC8sJycpO2YucmVtb3ZlQ2hpbGQoZSk7cmV0dXJuIGUuY2hpbGROb2Rlc31yZXR1cm4gaH07cS5zYXAubG9nLmluZm8oIklFOCBIVE1MNSBzdXBwb3J0IGFjdGl2YXRlZCIpfWVsc2V7cS5zYXAubG9nLmluZm8oIm5vIElFOCBIVE1MNSBzdXBwb3J0IHJlcXVpcmVkIik7Ui5wcmVwYXJlSFRNTDU9ZnVuY3Rpb24oaCl7cmV0dXJuIGh9fX07Ui5mb3JjZVJlcGFpbnQ9ZnVuY3Rpb24oZCl7dmFyIEQ9dHlwZW9mIGQ9PSJzdHJpbmciP3Euc2FwLmRvbUJ5SWQoZCk6ZDtpZihEKXtxLnNhcC5sb2cuZGVidWcoImZvcmNpbmcgYSByZXBhaW50IGZvciAiKyhELmlkfHxTdHJpbmcoRCkpKTt2YXIgbz1ELnN0eWxlLmRpc3BsYXk7dmFyIGE9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtELnN0eWxlLmRpc3BsYXk9Im5vbmUiO0Qub2Zmc2V0SGVpZ2h0O0Quc3R5bGUuZGlzcGxheT1vO2lmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQhPT1hKXtxLnNhcC5mb2N1cyhhKX19fTsoZnVuY3Rpb24oKXt2YXIgYT0ic2FwLXVpLXByZXNlcnZlIixiPSJzYXAtdWktc3RhdGljIixBPSJkYXRhLXNhcC11aS1wcmVzZXJ2ZSIsZD0iZGF0YS1zYXAtdWktYXJlYSI7ZnVuY3Rpb24gZygpe3ZhciAkPXEoIiMiK2EpO2lmKCQubGVuZ3RoPT09MCl7JD1xKCI8RElWLz4iLHtyb2xlOiJhcHBsaWNhdGlvbiIsaWQ6YX0pLmFkZENsYXNzKCJzYXBVaUhpZGRlbiIpLmNzcygid2lkdGgiLCIwIikuY3NzKCJoZWlnaHQiLCIwIikuY3NzKCJvdmVyZmxvdyIsImhpZGRlbiIpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpfXJldHVybiAkfWZ1bmN0aW9uIG0obil7cSgiPERJVi8+Iix7aWQ6InNhcC11aS1kdW1teS0iK24uaWR9KS5hZGRDbGFzcygic2FwVWlIaWRkZW4iKS5pbnNlcnRCZWZvcmUobil9Ui5wcmVzZXJ2ZUNvbnRlbnQ9ZnVuY3Rpb24ocixwLFApe3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS5wdWJsaXNoKCJzYXAudWkiLCJfX3ByZXNlcnZlQ29udGVudCIse2RvbU5vZGU6cn0pO3ZhciAkPWcoKTtmdW5jdGlvbiBmKGgpe2lmKGguaWQ9PT1hfHxoLmlkPT09Yil7cmV0dXJufWlmKGguaGFzQXR0cmlidXRlKEEpKXtpZihoPT09cil7bShoKX0kLmFwcGVuZChoKX1lbHNlIGlmKFAmJmguaWQpe1IubWFya1ByZXNlcnZhYmxlQ29udGVudChxKGgpLGguaWQpOyQuYXBwZW5kKGgpO3JldHVybn1pZighaC5oYXNBdHRyaWJ1dGUoZCkpe3ZhciBuPWguZmlyc3RDaGlsZDt3aGlsZShuKXtoPW47bj1uLm5leHRTaWJsaW5nO2lmKGgubm9kZVR5cGU9PT0xKXtmKGgpfX19fXEuc2FwLm1lYXN1cmUuc3RhcnQoci5pZCsiLS0tcHJlc2VydmVDb250ZW50IiwicHJlc2VydmVDb250ZW50IGZvciAiK3IuaWQpO2lmKHApe2Yocil9ZWxzZXtxKHIpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbihpLG4pe2Yobil9KX1xLnNhcC5tZWFzdXJlLmVuZChyLmlkKyItLS1wcmVzZXJ2ZUNvbnRlbnQiKX07Ui5maW5kUHJlc2VydmVkQ29udGVudD1mdW5jdGlvbihpKXt2YXIgJD1nKCksZj0kLmNoaWxkcmVuKCJbIitBKyI9JyIraS5yZXBsYWNlKC8oOnxcLikvZywnXFwkMScpKyInXSIpO3JldHVybiBmfTtSLm1hcmtQcmVzZXJ2YWJsZUNvbnRlbnQ9ZnVuY3Rpb24oJCxpKXskLmF0dHIoQSxpKX07Ui5pc1ByZXNlcnZlZENvbnRlbnQ9ZnVuY3Rpb24oRCl7cmV0dXJuKEQmJkQuZ2V0QXR0cmlidXRlKEEpJiZELnBhcmVudE5vZGUmJkQucGFyZW50Tm9kZS5pZD09YSl9O1IuZ2V0UHJlc2VydmVBcmVhUmVmPWZ1bmN0aW9uKCl7cmV0dXJuIGcoKVswXX07dmFyIGU9ImRhdGEtc2FwLXVpLXRlbXBsYXRlIjtSLm1hcmtJbmxpbmVUZW1wbGF0ZT1mdW5jdGlvbigkKXskLmF0dHIoZSwiIil9O1IuaXNJbmxpbmVUZW1wbGF0ZT1mdW5jdGlvbihEKXtyZXR1cm4oRCYmRC5oYXNBdHRyaWJ1dGUoZSkpfX0oKSk7Ui5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oVCl7dGhpcy5hQnVmZmVyLnB1c2guYXBwbHkodGhpcy5hQnVmZmVyLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLndyaXRlRXNjYXBlZD1mdW5jdGlvbihULGwpe2lmKGwpe3ZhciBMPVQuc3BsaXQoIlxuIik7Zm9yKHZhciBpPTA7aTxMLmxlbmd0aDtpKyspe0xbaV09cS5zYXAuZW5jb2RlSFRNTChMW2ldKX1UPUwuam9pbigiPGJyPiIpfWVsc2V7VD1xLnNhcC5lbmNvZGVIVE1MKFQpfXRoaXMuYUJ1ZmZlci5wdXNoKFQpO3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS50cmFuc2xhdGU9ZnVuY3Rpb24oayl7fTtSLnByb3RvdHlwZS53cml0ZUFjY2VsZXJhdG9yS2V5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLmFkZFN0eWxlPWZ1bmN0aW9uKG4sdil7aWYodiE9PXVuZGVmaW5lZCYmdiE9PW51bGwpe3ZhciBzPXRoaXMuYVN0eWxlU3RhY2tbdGhpcy5hU3R5bGVTdGFjay5sZW5ndGgtMV07aWYoIXMuYVN0eWxlKXtzLmFTdHlsZT1bXX1zLmFTdHlsZS5wdXNoKG4rIjoiK3YpfXJldHVybiB0aGlzfTtSLnByb3RvdHlwZS53cml0ZVN0eWxlcz1mdW5jdGlvbigpe3ZhciBzPXRoaXMuYVN0eWxlU3RhY2tbdGhpcy5hU3R5bGVTdGFjay5sZW5ndGgtMV07aWYocy5hU3R5bGUpe3RoaXMud3JpdGUoIiBzdHlsZT1cIiIrcy5hU3R5bGUuam9pbigiOyIpKyJcIiAiKX1zLmFTdHlsZT1udWxsO3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS5hZGRDbGFzcz1mdW5jdGlvbihuKXtpZihuKXt2YXIgcz10aGlzLmFTdHlsZVN0YWNrW3RoaXMuYVN0eWxlU3RhY2subGVuZ3RoLTFdO2lmKCFzLmFDbGFzc2VzKXtzLmFDbGFzc2VzPVtdfXMuYUNsYXNzZXMucHVzaChuKX1yZXR1cm4gdGhpc307Ui5wcm90b3R5cGUud3JpdGVDbGFzc2VzPWZ1bmN0aW9uKGUpe3ZhciBzPXRoaXMuYVN0eWxlU3RhY2tbdGhpcy5hU3R5bGVTdGFjay5sZW5ndGgtMV07dmFyIEM9ZT9lLmFDdXN0b21TdHlsZUNsYXNzZXM6KChlPT09ZmFsc2UpP1tdOnMuYUN1c3RvbVN0eWxlQ2xhc3Nlcyk7aWYocy5hQ2xhc3Nlc3x8Qyl7dmFyIGE9W10uY29uY2F0KHMuYUNsYXNzZXN8fFtdLEN8fFtdKTthLnNvcnQoKTthPXEubWFwKGEsZnVuY3Rpb24obixpKXtyZXR1cm4oaT09MHx8biE9YVtpLTFdKT9uOm51bGx9KTt0aGlzLndyaXRlKCIgY2xhc3M9XCIiLGEuam9pbigiICIpLCJcIiAiKX1pZighZSl7cy5hQ3VzdG9tU3R5bGVDbGFzc2VzPW51bGx9cy5hQ2xhc3Nlcz1udWxsO3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS53cml0ZUNvbnRyb2xEYXRhPWZ1bmN0aW9uKEMpe3RoaXMud3JpdGVFbGVtZW50RGF0YShDKTtyZXR1cm4gdGhpc307Ui5wcm90b3R5cGUud3JpdGVFbGVtZW50RGF0YT1mdW5jdGlvbihlKXt2YXIgcz1lLmdldElkKCk7aWYocyl7dGhpcy53cml0ZUF0dHJpYnV0ZSgiaWQiLHMpLndyaXRlQXR0cmlidXRlKCJkYXRhLXNhcC11aSIscyl9dmFyIGQ9ZS5nZXRDdXN0b21EYXRhKCk7dmFyIGw9ZC5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsO2krKyl7dmFyIEQ9ZFtpXTtpZihELmdldFdyaXRlVG9Eb20oKSl7dmFyIGs9RC5nZXRLZXkoKTtpZih0eXBlb2YgRC5nZXRWYWx1ZSgpPT09InN0cmluZyIpe2lmKChzYXAudWkuY29yZS5JRC5pc1ZhbGlkKGspKSYmKGsuaW5kZXhPZigiOiIpPT0tMSkmJihrLmluZGV4T2YoInNhcC11aSIpIT09MCkpe3RoaXMud3JpdGVBdHRyaWJ1dGVFc2NhcGVkKCJkYXRhLSIrayxELmdldFZhbHVlKCkpfWVsc2V7cS5zYXAubG9nLmVycm9yKCJDdXN0b21EYXRhIHdpdGgga2V5ICIraysiIHNob3VsZCBiZSB3cml0dGVuIHRvIEhUTUwgb2YgIit0aGlzKyIgYnV0IHRoZSBrZXkgaXMgbm90IHZhbGlkIChtdXN0IGJlIGEgdmFsaWQgc2FwLnVpLmNvcmUuSUQgd2l0aG91dCBhbnkgY29sb24gYW5kIG1heSBub3Qgc3RhcnQgd2l0aCAnc2FwLXVpJykuIil9fWVsc2V7cS5zYXAubG9nLmVycm9yKCJDdXN0b21EYXRhIHdpdGgga2V5ICIraysiIHNob3VsZCBiZSB3cml0dGVuIHRvIEhUTUwgb2YgIit0aGlzKyIgYnV0IHRoZSB2YWx1ZSBpcyBub3QgYSBzdHJpbmcuIil9fX1yZXR1cm4gdGhpc307Ui5wcm90b3R5cGUud3JpdGVBdHRyaWJ1dGU9ZnVuY3Rpb24obix2KXt0aGlzLndyaXRlKCIgIixuLCI9XCIiLHYsIlwiIik7cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLndyaXRlQXR0cmlidXRlRXNjYXBlZD1mdW5jdGlvbihuLHYpe3RoaXMud3JpdGVBdHRyaWJ1dGUobixxLnNhcC5lc2NhcGVIVE1MKFN0cmluZyh2KSkpO3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS53cml0ZUFjY2Vzc2liaWxpdHlTdGF0ZT1mdW5jdGlvbihlLFApe2lmKCFzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRBY2Nlc3NpYmlsaXR5KCkpe3JldHVybiB0aGlzfWlmKGFyZ3VtZW50cy5sZW5ndGg9PTEmJiEoZSBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkVsZW1lbnQpKXtQPWU7ZT1udWxsfXZhciBhPXt9O2lmKGUhPW51bGwpe3ZhciBtPWUuZ2V0TWV0YWRhdGEoKTttLl9lbnJpY2hDaGlsZEluZm9zKCk7dmFyIGI9ZnVuY3Rpb24oRSxBLHYpe3ZhciBvPW0uZ2V0QWxsUHJvcGVydGllcygpW0VdO2lmKG8mJmVbby5fc0dldHRlcl0oKT09PXYpe2FbQV09InRydWUifX07dmFyIGQ9ZnVuY3Rpb24oRSxBKXt2YXIgbz1tLmdldEFsbEFzc29jaWF0aW9ucygpW0VdO2lmKG8mJm8ubXVsdGlwbGUpe3ZhciBrPWVbby5fc0dldHRlcl0oKTtpZihrLmxlbmd0aD4wKXthW0FdPWsuam9pbigiICIpfX19O2IoImVkaXRhYmxlIiwicmVhZG9ubHkiLGZhbHNlKTtiKCJlbmFibGVkIiwiZGlzYWJsZWQiLGZhbHNlKTtiKCJ2aXNpYmxlIiwiaGlkZGVuIixmYWxzZSk7YigicmVxdWlyZWQiLCJyZXF1aXJlZCIsdHJ1ZSk7Yigic2VsZWN0ZWQiLCJzZWxlY3RlZCIsdHJ1ZSk7YigiY2hlY2tlZCIsImNoZWNrZWQiLHRydWUpO2QoImFyaWFEZXNjcmliZWRCeSIsImRlc2NyaWJlZGJ5Iik7ZCgiYXJpYUxhYmVsbGVkQnkiLCJsYWJlbGxlZGJ5Iil9aWYoUCl7dmFyIGY9ZnVuY3Rpb24odil7dmFyIGk9dHlwZW9mKHYpO3JldHVybiB2PT09bnVsbHx8dj09PSIifHxpPT09Im51bWJlciJ8fGk9PT0ic3RyaW5nInx8aT09PSJib29sZWFuIn07dmFyIGc9e307dmFyIHgsaCxpLGo7Zm9yKHggaW4gUCl7aD1QW3hdO2lmKGYoaCkpe2dbeF09aH1lbHNlIGlmKHR5cGVvZihoKT09PSJvYmplY3QiJiZmKGgudmFsdWUpKXtqPSIiO2lmKGguYXBwZW5kJiYoeD09PSJkZXNjcmliZWRieSJ8fHg9PT0ibGFiZWxsZWRieSIpKXtqPWFbeF0/YVt4XSsiICI6IiJ9Z1t4XT1qK2gudmFsdWV9fXEuZXh0ZW5kKGEsZyl9aWYoZSBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkVsZW1lbnQmJmUuZ2V0UGFyZW50KCkmJmUuZ2V0UGFyZW50KCkuZW5oYW5jZUFjY2Vzc2liaWxpdHlTdGF0ZSl7ZS5nZXRQYXJlbnQoKS5lbmhhbmNlQWNjZXNzaWJpbGl0eVN0YXRlKGUsYSl9Zm9yKHZhciBwIGluIGEpe2lmKGFbcF0hPW51bGwmJmFbcF0hPT0iIil7dGhpcy53cml0ZUF0dHJpYnV0ZUVzY2FwZWQocD09PSJyb2xlIj9wOiJhcmlhLSIrcCxhW3BdKX19cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLndyaXRlSWNvbj1mdW5jdGlvbih1LEMsYSl7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuSWNvblBvb2wiKTt2YXIgaT1zYXAudWkuY29yZS5JY29uUG9vbC5pc0ljb25VUkkodSkscz1pPyI8c3BhbiAiOiI8aW1nICIsVD0oc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbjw5KSxiLHAsbztpZih0eXBlb2YgQz09PSJzdHJpbmciKXtDPVtDXX1pZihpKXtvPXNhcC51aS5jb3JlLkljb25Qb29sLmdldEljb25JbmZvKHUpO2lmKCFvKXtxLnNhcC5sb2cuZXJyb3IoIkFuIHVucmVnaXN0ZXJlZCBpY29uOiAiK3UrIiBpcyB1c2VkIGluIHNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIncyB3cml0ZUljb24gbWV0aG9kLiIpO3JldHVybn1pZighQyl7Qz1bXX1DLnB1c2goInNhcFVpSWNvbiIpO2lmKCFvLnN1cHByZXNzTWlycm9yaW5nKXtDLnB1c2goInNhcFVpSWNvbk1pcnJvckluUlRMIil9fXRoaXMud3JpdGUocyk7aWYocS5pc0FycmF5KEMpJiZDLmxlbmd0aCl7Yj1DLmpvaW4oIiAiKTt0aGlzLndyaXRlKCJjbGFzcz1cIiIrYisiXCIgIil9aWYoaSl7aWYoIWEpe2E9e319aWYoIVQpe2FbImRhdGEtc2FwLXVpLWljb24tY29udGVudCJdPW8uY29udGVudH10aGlzLndyaXRlKCJzdHlsZT1cImZvbnQtZmFtaWx5OiAiK28uZm9udEZhbWlseSsiO1wiICIpfWVsc2V7YT1xLmV4dGVuZCh7cm9sZToicHJlc2VudGF0aW9uIixhbHQ6IiIsc3JjOnV9LGEpfWlmKHR5cGVvZiBhPT09Im9iamVjdCIpe2ZvcihwIGluIGEpe2lmKGEuaGFzT3duUHJvcGVydHkocCkpe3RoaXMud3JpdGVBdHRyaWJ1dGVFc2NhcGVkKHAsYVtwXSl9fX10aGlzLndyaXRlKGk/Ij4iOiIvPiIpO2lmKGkpe1QmJnRoaXMud3JpdGUoby5jb250ZW50KTt0aGlzLndyaXRlKCI8L3NwYW4+Iil9fTtyZXR1cm4gUn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvUmVzaXplSGFuZGxlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9HbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnLCdqcXVlcnkuc2FwLmFjdCcsJ2pxdWVyeS5zYXAuc2NyaXB0J10sZnVuY3Rpb24ocSxHLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbD1xLnNhcC5sb2cuZ2V0TG9nZ2VyKCJzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyIixxLnNhcC5sb2cuTGV2ZWwuRVJST1IpO3ZhciBjPW51bGw7dmFyIFI9Qi5leHRlbmQoInNhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihDKXtCLmFwcGx5KHRoaXMpO2M9Qzt0aGlzLmFSZXNpemVMaXN0ZW5lcnM9W107dGhpcy5iUmVnaXN0ZXJlZD1mYWxzZTt0aGlzLmlJZENvdW50ZXI9MDt0aGlzLmZEZXN0cm95SGFuZGxlcj1xLnByb3h5KHRoaXMuZGVzdHJveSx0aGlzKTtxKHdpbmRvdykuYmluZCgidW5sb2FkIix0aGlzLmZEZXN0cm95SGFuZGxlcik7cS5zYXAuYWN0LmF0dGFjaEFjdGl2YXRlKGksdGhpcyl9fSk7ZnVuY3Rpb24gYSgpe2lmKHRoaXMuYlJlZ2lzdGVyZWQpe3RoaXMuYlJlZ2lzdGVyZWQ9ZmFsc2U7c2FwLnVpLmdldENvcmUoKS5kZXRhY2hJbnRlcnZhbFRpbWVyKHRoaXMuY2hlY2tTaXplcyx0aGlzKX19O2Z1bmN0aW9uIGkoKXtpZighdGhpcy5iUmVnaXN0ZXJlZCYmdGhpcy5hUmVzaXplTGlzdGVuZXJzLmxlbmd0aD4wKXt0aGlzLmJSZWdpc3RlcmVkPXRydWU7c2FwLnVpLmdldENvcmUoKS5hdHRhY2hJbnRlcnZhbFRpbWVyKHRoaXMuY2hlY2tTaXplcyx0aGlzKX19O1IucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oZSl7cS5zYXAuYWN0LmRldGFjaEFjdGl2YXRlKGksdGhpcyk7cSh3aW5kb3cpLnVuYmluZCgidW5sb2FkIix0aGlzLmZEZXN0cm95SGFuZGxlcik7Yz1udWxsO3RoaXMuYVJlc2l6ZUxpc3RlbmVycz1bXTthLmFwcGx5KHRoaXMpfTtSLnByb3RvdHlwZS5hdHRhY2hMaXN0ZW5lcj1mdW5jdGlvbihyLGgpe3ZhciBJPXIgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Db250cm9sLGQ9ST9yLmdldERvbVJlZigpOnIsdz1kP2Qub2Zmc2V0V2lkdGg6MCxIPWQ/ZC5vZmZzZXRIZWlnaHQ6MCxzPSJycy0iK25ldyBEYXRlKCkudmFsdWVPZigpKyItIit0aGlzLmlJZENvdW50ZXIrKyxiPShJPygiQ29udHJvbCAiK3IuZ2V0SWQoKSk6KHIuaWQ/ci5pZDpTdHJpbmcocikpKTt0aGlzLmFSZXNpemVMaXN0ZW5lcnMucHVzaCh7c0lkOnMsb0RvbVJlZjpJP251bGw6cixvQ29udHJvbDpJP3I6bnVsbCxmSGFuZGxlcjpoLGlXaWR0aDp3LGlIZWlnaHQ6SCxkYmc6Yn0pO2wuZGVidWcoInJlZ2lzdGVyZWQgIitiKTtpLmFwcGx5KHRoaXMpO3JldHVybiBzfTtSLnByb3RvdHlwZS5kZXRhY2hMaXN0ZW5lcj1mdW5jdGlvbihJKXt2YXIgdD10aGlzO3EuZWFjaCh0aGlzLmFSZXNpemVMaXN0ZW5lcnMsZnVuY3Rpb24oYixyKXtpZihyLnNJZD09SSl7dC5hUmVzaXplTGlzdGVuZXJzLnNwbGljZShiLDEpO2wuZGVidWcoImRlcmVnaXN0ZXJlZCAiK0kpO3JldHVybiBmYWxzZX19KTtpZih0aGlzLmFSZXNpemVMaXN0ZW5lcnMubGVuZ3RoPT0wKXthLmFwcGx5KHRoaXMpfX07Ui5wcm90b3R5cGUuY2hlY2tTaXplcz1mdW5jdGlvbigpe3ZhciBkPWwuaXNMb2dnYWJsZSgpO2lmKGQpe2wuZGVidWcoImNoZWNrU2l6ZXM6Iil9cS5lYWNoKHRoaXMuYVJlc2l6ZUxpc3RlbmVycyxmdW5jdGlvbihiLHIpe2lmKHIpe3ZhciBDPSEhci5vQ29udHJvbCxEPUM/ci5vQ29udHJvbC5nZXREb21SZWYoKTpyLm9Eb21SZWY7aWYoRCYmcS5jb250YWlucyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsRCkpe3ZhciBvPXIuaVdpZHRoLE89ci5pSGVpZ2h0LG49RC5vZmZzZXRXaWR0aCxOPUQub2Zmc2V0SGVpZ2h0O2lmKG8hPW58fE8hPU4pe3IuaVdpZHRoPW47ci5pSGVpZ2h0PU47dmFyIGU9cS5FdmVudCgicmVzaXplIik7ZS50YXJnZXQ9RDtlLmN1cnJlbnRUYXJnZXQ9RDtlLnNpemU9e3dpZHRoOm4saGVpZ2h0Ok59O2Uub2xkU2l6ZT17d2lkdGg6byxoZWlnaHQ6T307ZS5jb250cm9sPUM/ci5vQ29udHJvbDpudWxsO2lmKGQpe2wuZGVidWcoInJlc2l6ZSBkZXRlY3RlZCBmb3IgJyIrci5kYmcrIic6ICIrZS5vbGRTaXplLndpZHRoKyJ4IitlLm9sZFNpemUuaGVpZ2h0KyIgLT4gIitlLnNpemUud2lkdGgrIngiK2Uuc2l6ZS5oZWlnaHQpfXIuZkhhbmRsZXIoZSl9fX19KTtpZihSLl9rZWVwQWN0aXZlIT10cnVlJiZSLl9rZWVwQWN0aXZlIT1mYWxzZSl7Ui5fa2VlcEFjdGl2ZT1mYWxzZX1pZighcS5zYXAuYWN0LmlzQWN0aXZlKCkmJiFSLl9rZWVwQWN0aXZlKXthLmFwcGx5KHRoaXMpfX07Ui5yZWdpc3Rlcj1mdW5jdGlvbihyLGgpe2lmKCFjfHwhYy5vUmVzaXplSGFuZGxlcil7cmV0dXJuIG51bGx9cmV0dXJuIGMub1Jlc2l6ZUhhbmRsZXIuYXR0YWNoTGlzdGVuZXIocixoKX07Ui5kZXJlZ2lzdGVyPWZ1bmN0aW9uKEkpe2lmKCFjfHwhYy5vUmVzaXplSGFuZGxlcil7cmV0dXJufWMub1Jlc2l6ZUhhbmRsZXIuZGV0YWNoTGlzdGVuZXIoSSl9O1IuZGVyZWdpc3RlckFsbEZvckNvbnRyb2w9ZnVuY3Rpb24oQyl7aWYoIWN8fCFjLm9SZXNpemVIYW5kbGVyKXtyZXR1cm59dmFyIEk9W107cS5lYWNoKGMub1Jlc2l6ZUhhbmRsZXIuYVJlc2l6ZUxpc3RlbmVycyxmdW5jdGlvbihiLHIpe2lmKHImJnIub0NvbnRyb2wmJnIub0NvbnRyb2wuZ2V0SWQoKT09PUMpe0kucHVzaChyLnNJZCl9fSk7cS5lYWNoKEksZnVuY3Rpb24oYixzKXtSLmRlcmVnaXN0ZXIocyl9KX07cmV0dXJuIFJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5VSUNvbXBvbmVudE1ldGFkYXRhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVUlDb21wb25lbnRNZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1VJQ29tcG9uZW50TWV0YWRhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0NvbXBvbmVudE1ldGFkYXRhJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIFU9ZnVuY3Rpb24oYyxvKXtDLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07VS5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KEMucHJvdG90eXBlKTtVLnByZXByb2Nlc3NDbGFzc0luZm89ZnVuY3Rpb24oYyl7aWYoYyYmdHlwZW9mIGMubWV0YWRhdGE9PT0ic3RyaW5nIil7Yy5tZXRhZGF0YT17X3NyYzpjLm1ldGFkYXRhfX1yZXR1cm4gY307VS5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncz1mdW5jdGlvbihjKXtDLnByb3RvdHlwZS5hcHBseVNldHRpbmdzLmNhbGwodGhpcyxjKTt2YXIgcz1jLm1ldGFkYXRhO3RoaXMuX21Sb290Vmlldz1zLnJvb3RWaWV3O2lmKHR5cGVvZiB0aGlzLl9tUm9vdFZpZXc9PT0ic3RyaW5nIil7dGhpcy5fbVJvb3RWaWV3PXt2aWV3TmFtZTp0aGlzLl9tUm9vdFZpZXcsdHlwZTpzYXAudWkuY29yZS5tdmMuVmlld1R5cGUuWE1MfX10aGlzLl9tUm91dGluZz1zLnJvdXRpbmc7dmFyIHA9dGhpcy5nZXRQYXJlbnQoKTtpZihwIGluc3RhbmNlb2YgVSl7aWYocC5fbVJvb3RWaWV3KXt0aGlzLl9tUm9vdFZpZXc9cS5leHRlbmQodHJ1ZSx7fSxwLl9tUm9vdFZpZXcsdGhpcy5fbVJvb3RWaWV3KX10aGlzLl9tUm91dGluZz1xLmV4dGVuZCh0cnVlLHt9LHAuX21Sb3V0aW5nLHRoaXMuX21Sb3V0aW5nKX19O1UucHJvdG90eXBlLmdldFJvb3RWaWV3PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21Sb290Vmlld307VS5wcm90b3R5cGUuZ2V0Um91dGluZ0NvbmZpZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tUm91dGluZyYmdGhpcy5fbVJvdXRpbmcuY29uZmlnfTtVLnByb3RvdHlwZS5nZXRSb3V0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbVJvdXRpbmcmJnRoaXMuX21Sb3V0aW5nLnJvdXRlc307cmV0dXJuIFV9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5kZWxlZ2F0ZS5JdGVtTmF2aWdhdGlvbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLmRlbGVnYXRlLkl0ZW1OYXZpZ2F0aW9uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvZGVsZWdhdGUvSXRlbU5hdmlnYXRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJ10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIEk9RS5leHRlbmQoInNhcC51aS5jb3JlLmRlbGVnYXRlLkl0ZW1OYXZpZ2F0aW9uIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZCxpLG4pe0UuYXBwbHkodGhpcyk7dGhpcy5vRG9tUmVmPW51bGw7aWYoZCl7dGhpcy5zZXRSb290RG9tUmVmKGQpfXRoaXMuYUl0ZW1Eb21SZWZzPVtdO2lmKGkpe3RoaXMuc2V0SXRlbURvbVJlZnMoaSl9dGhpcy5pVGFiSW5kZXg9LTE7dGhpcy5pQWN0aXZlVGFiSW5kZXg9ISFuPy0xOjA7dGhpcy5pRm9jdXNlZEluZGV4PS0xO3RoaXMuaVNlbGVjdGVkSW5kZXg9LTE7dGhpcy5iQ3ljbGluZz10cnVlO3RoaXMuYlRhYmxlTW9kZT1mYWxzZTt0aGlzLmlQYWdlU2l6ZT0tMTt0aGlzLl9iTW91c2VEb3duSGFwcGVuZWQ9ZmFsc2U7dGhpcy5vRGlzYWJsZWRNb2RpZmllcnM9e3NhcGVuZDpbImFsdCIsInNoaWZ0Il0sc2FwaG9tZTpbImFsdCIsInNoaWZ0Il19fX0pO0kuRXZlbnRzPXtCZWZvcmVGb2N1czoiQmVmb3JlRm9jdXMiLEFmdGVyRm9jdXM6IkFmdGVyRm9jdXMiLEJvcmRlclJlYWNoZWQ6IkJvcmRlclJlYWNoZWQiLEZvY3VzQWdhaW46IkZvY3VzQWdhaW4ifTtJLnByb3RvdHlwZS5zZXREaXNhYmxlZE1vZGlmaWVycz1mdW5jdGlvbihkKXt0aGlzLm9EaXNhYmxlZE1vZGlmaWVycz1kO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5nZXREaXNhYmxlZE1vZGlmaWVycz1mdW5jdGlvbihkKXtyZXR1cm4gdGhpcy5vRGlzYWJsZWRNb2RpZmllcnN9O0kucHJvdG90eXBlLmhhc0Rpc2FibGVkTW9kaWZpZXI9ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcy5vRGlzYWJsZWRNb2RpZmllcnNbZS50eXBlLnJlcGxhY2UoIm1vZGlmaWVycyIsIiIpXTtpZihxLmlzQXJyYXkoZCkpe2Zvcih2YXIgaT0wO2k8ZC5sZW5ndGg7aSsrKXtpZihlW2RbaV0rIktleSJdKXtyZXR1cm4gdHJ1ZX19fXJldHVybiBmYWxzZX07SS5wcm90b3R5cGUuc2V0Um9vdERvbVJlZj1mdW5jdGlvbihkKXt0aGlzLm9Eb21SZWY9ZDtpZighcSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5JTkl0ZW0iKSl7aWYodGhpcy5pRm9jdXNlZEluZGV4Pj0wKXtxKHRoaXMub0RvbVJlZikuYXR0cigidGFiSW5kZXgiLHRoaXMuaVRhYkluZGV4KX1lbHNle3EodGhpcy5vRG9tUmVmKS5hdHRyKCJ0YWJJbmRleCIsdGhpcy5pQWN0aXZlVGFiSW5kZXgpfX1xKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLklOUm9vdCIsdGhpcyk7cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLmdldFJvb3REb21SZWY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vRG9tUmVmfTtJLnByb3RvdHlwZS5nZXRJdGVtRG9tUmVmcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFJdGVtRG9tUmVmc307SS5wcm90b3R5cGUuc2V0SXRlbURvbVJlZnM9ZnVuY3Rpb24oYSl7dGhpcy5hSXRlbURvbVJlZnM9YTtmb3IodmFyIGk9MDtpPHRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aDtpKyspe2lmKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKXt2YXIgJD1xKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKTtpZihpPT10aGlzLmlGb2N1c2VkSW5kZXgmJiEkLmRhdGEoInNhcC5JTlJvb3QiKSl7JC5hdHRyKCJ0YWJJbmRleCIsdGhpcy5pQWN0aXZlVGFiSW5kZXgpfWVsc2UgaWYoJC5hdHRyKCJ0YWJpbmRleCIpPT0iMCIpeyQuYXR0cigidGFiSW5kZXgiLC0xKX0kLmRhdGEoInNhcC5JTkl0ZW0iLHRydWUpOyQuZGF0YSgic2FwLkluTmF2QXJlYSIsdHJ1ZSk7aWYoJC5kYXRhKCJzYXAuSU5Sb290IikmJmkhPXRoaXMuaUZvY3VzZWRJbmRleCl7JC5kYXRhKCJzYXAuSU5Sb290Iikuc2V0TmVzdGVkSXRlbXNUYWJpbmRleCgpfX19cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLnNldEl0ZW1zVGFiaW5kZXg9ZnVuY3Rpb24oKXtmb3IodmFyIGk9MDtpPHRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aDtpKyspe2lmKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKXt2YXIgJD1xKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKTtpZigkLmlzKCI6c2FwRm9jdXNhYmxlIikpe2lmKGk9PXRoaXMuaUZvY3VzZWRJbmRleCYmISQuZGF0YSgic2FwLklOUm9vdCIpKXskLmF0dHIoInRhYkluZGV4Iix0aGlzLmlBY3RpdmVUYWJJbmRleCl9ZWxzZXskLmF0dHIoInRhYkluZGV4IiwtMSl9fX19cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLnNldE5lc3RlZEl0ZW1zVGFiaW5kZXg9ZnVuY3Rpb24oKXtpZihxKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLklOSXRlbSIpKXtmb3IodmFyIGk9MDtpPHRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aDtpKyspe2lmKHRoaXMuYUl0ZW1Eb21SZWZzW2ldJiZxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5hdHRyKCJ0YWJpbmRleCIpPT0iMCIpe3EodGhpcy5hSXRlbURvbVJlZnNbaV0pLmF0dHIoInRhYkluZGV4IiwtMSl9fX1yZXR1cm4gdGhpc307SS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKHRoaXMub0RvbVJlZil7cSh0aGlzLm9Eb21SZWYpLnJlbW92ZURhdGEoInNhcC5JTlJvb3QiKTt0aGlzLm9Eb21SZWY9bnVsbH1pZih0aGlzLmFJdGVtRG9tUmVmcyl7Zm9yKHZhciBpPTA7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFJdGVtRG9tUmVmc1tpXSl7cSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkucmVtb3ZlRGF0YSgic2FwLklOSXRlbSIpO3EodGhpcy5hSXRlbURvbVJlZnNbaV0pLnJlbW92ZURhdGEoInNhcC5Jbk5hdkFyZWEiKX19dGhpcy5hSXRlbURvbVJlZnM9bnVsbH10aGlzLl9iSXRlbVRhYkluZGV4PXVuZGVmaW5lZH07SS5wcm90b3R5cGUuc2V0Q3ljbGluZz1mdW5jdGlvbihjKXt0aGlzLmJDeWNsaW5nPWM7cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLnNldFRhYmxlTW9kZT1mdW5jdGlvbih0LFQpe3RoaXMuYlRhYmxlTW9kZT10O3RoaXMuYlRhYmxlTGlzdD10P1Q6ZmFsc2U7cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHApe3RoaXMuaVBhZ2VTaXplPXA7cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLnNldFNlbGVjdGVkSW5kZXg9ZnVuY3Rpb24oaSl7dGhpcy5pU2VsZWN0ZWRJbmRleD1pO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXRDb2x1bW5zPWZ1bmN0aW9uKGMsbil7dGhpcy5pQ29sdW1ucz1jO3RoaXMuYk5vQ29sdW1uQ2hhbmdlPW47cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLnNldEhvbWVFbmRDb2x1bW5Nb2RlPWZ1bmN0aW9uKHMsYyl7dGhpcy5fYlN0YXlJblJvdz1zO3RoaXMuX2JDdHJsRW5hYmxlZD1jfTtJLnByb3RvdHlwZS5mb2N1c0l0ZW09ZnVuY3Rpb24oaSxlKXtxLnNhcC5sb2cuaW5mbygiRm9jdXNJdGVtOiAiK2krIiBpRm9jdXNlZEluZGV4OiAiK3RoaXMuaUZvY3VzZWRJbmRleCwiZm9jdXNJdGVtIiwiSXRlbU5hdmlnYXRpb24iKTtpZihpPT10aGlzLmlGb2N1c2VkSW5kZXgmJnRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF09PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpe3RoaXMuZmlyZUV2ZW50KEkuRXZlbnRzLkZvY3VzQWdhaW4se2luZGV4OmksZXZlbnQ6ZX0pO3JldHVybn1pZighdGhpcy5hSXRlbURvbVJlZnNbaV18fCFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnNhcEZvY3VzYWJsZSIpKXtyZXR1cm59dGhpcy5maXJlRXZlbnQoSS5FdmVudHMuQmVmb3JlRm9jdXMse2luZGV4OmksZXZlbnQ6ZX0pO3RoaXMuc2V0Rm9jdXNlZEluZGV4KGkpO3RoaXMuYklTZXRGb2N1cz10cnVlO2lmKHEodGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XSkuZGF0YSgic2FwLklOUm9vdCIpJiZlKXt2YXIgbz1xKHRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF0pLmRhdGEoInNhcC5JTlJvb3QiKTtvLl9zRm9jdXNFdmVudD1lLnR5cGV9cS5zYXAubG9nLmluZm8oIlNldCBGb2N1cyBvbiBJRDogIit0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdLmlkLCJmb2N1c0l0ZW0iLCJJdGVtTmF2aWdhdGlvbiIpO3Euc2FwLmZvY3VzKHRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF0pO3RoaXMuZmlyZUV2ZW50KEkuRXZlbnRzLkFmdGVyRm9jdXMse2luZGV4OmksZXZlbnQ6ZX0pfTtJLnByb3RvdHlwZS5zZXRGb2N1c2VkSW5kZXg9ZnVuY3Rpb24oaSl7dmFyICQ7aWYoaTwwKXtpPTB9aWYoaT50aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMSl7aT10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMX1xKHRoaXMub0RvbVJlZikuYXR0cigidGFiSW5kZXgiLHRoaXMuaVRhYkluZGV4KTtpZih0aGlzLmlGb2N1c2VkSW5kZXghPT0tMSYmdGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoPnRoaXMuaUZvY3VzZWRJbmRleCl7cSh0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdKS5hdHRyKCJ0YWJJbmRleCIsLTEpOyQ9cSh0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdKTtpZigkLmRhdGEoInNhcC5JTlJvb3QiKSYmaSE9dGhpcy5pRm9jdXNlZEluZGV4KXtxKCQuZGF0YSgic2FwLklOUm9vdCIpLmFJdGVtRG9tUmVmc1skLmRhdGEoInNhcC5JTlJvb3QiKS5pRm9jdXNlZEluZGV4XSkuYXR0cigidGFiSW5kZXgiLC0xKX19dGhpcy5pRm9jdXNlZEluZGV4PWk7dmFyIGY9dGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XTskPXEodGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XSk7aWYoISQuZGF0YSgic2FwLklOUm9vdCIpKXtxKGYpLmF0dHIoInRhYkluZGV4Iix0aGlzLmlBY3RpdmVUYWJJbmRleCl9cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLmdldEZvY3VzZWREb21SZWY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XX07SS5wcm90b3R5cGUuZ2V0Rm9jdXNlZEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaUZvY3VzZWRJbmRleH07SS5wcm90b3R5cGUub25mb2N1c2luPWZ1bmN0aW9uKGUpe3ZhciBzPWUudGFyZ2V0O2lmKHM9PXRoaXMub0RvbVJlZil7aWYoIXRoaXMuX2JJdGVtVGFiSW5kZXgpe3RoaXMuc2V0SXRlbXNUYWJpbmRleCgpO3RoaXMuX2JJdGVtVGFiSW5kZXg9dHJ1ZX1pZih0aGlzLl9iTW91c2VEb3duSGFwcGVuZWQpe3JldHVybn12YXIgYTtpZihxKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLklOSXRlbSIpJiZ0aGlzLl9zRm9jdXNFdmVudCYmIXEodGhpcy5vRG9tUmVmKS5kYXRhKCJzYXAuSW5OYXZBcmVhIikpe3N3aXRjaCh0aGlzLl9zRm9jdXNFdmVudCl7Y2FzZSJzYXBuZXh0IjphPTA7YnJlYWs7Y2FzZSJzYXBwcmV2aW91cyI6YT10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMTticmVhaztkZWZhdWx0OmE9dGhpcy5pU2VsZWN0ZWRJbmRleCE9LTE/dGhpcy5pU2VsZWN0ZWRJbmRleDoodGhpcy5pRm9jdXNlZEluZGV4IT0tMT90aGlzLmlGb2N1c2VkSW5kZXg6MCk7YnJlYWt9dGhpcy5fc0ZvY3VzRXZlbnQ9dW5kZWZpbmVkfWVsc2V7YT10aGlzLmlTZWxlY3RlZEluZGV4IT0tMT90aGlzLmlTZWxlY3RlZEluZGV4Oih0aGlzLmlGb2N1c2VkSW5kZXghPS0xP3RoaXMuaUZvY3VzZWRJbmRleDowKX10aGlzLmZvY3VzSXRlbShhLGUpO2lmKHRoaXMuaUZvY3VzZWRJbmRleD09LTEpe2Zvcih2YXIgaT1hKzE7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXt0aGlzLmZvY3VzSXRlbShpLGUpO2lmKHRoaXMuaUZvY3VzZWRJbmRleD09aSl7YnJlYWt9fWlmKHRoaXMuaUZvY3VzZWRJbmRleD09LTEmJmE+MCl7Zm9yKHZhciBpPWEtMTtpPj0wO2ktLSl7dGhpcy5mb2N1c0l0ZW0oaSxlKTtpZih0aGlzLmlGb2N1c2VkSW5kZXg9PWkpe2JyZWFrfX19fWUucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpfWVsc2UgaWYoIXRoaXMuYklTZXRGb2N1cyl7aWYodGhpcy5hSXRlbURvbVJlZnMmJmUudGFyZ2V0IT10aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdKXtmb3IodmFyIGk9MDtpPHRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aDtpKyspe2lmKGUudGFyZ2V0PT10aGlzLmFJdGVtRG9tUmVmc1tpXSl7dGhpcy5mb2N1c0l0ZW0oaSxlKTticmVha319fWVsc2V7dGhpcy5maXJlRXZlbnQoSS5FdmVudHMuQWZ0ZXJGb2N1cyx7aW5kZXg6dGhpcy5pRm9jdXNlZEluZGV4LGV2ZW50OmV9KX19dGhpcy5iSVNldEZvY3VzPWZhbHNlfTtJLnByb3RvdHlwZS5vbnNhcGZvY3VzbGVhdmU9ZnVuY3Rpb24oZSl7aWYoIWUucmVsYXRlZENvbnRyb2xJZHx8IXEuc2FwLmNvbnRhaW5zT3JFcXVhbHModGhpcy5vRG9tUmVmLHNhcC51aS5nZXRDb3JlKCkuYnlJZChlLnJlbGF0ZWRDb250cm9sSWQpLmdldEZvY3VzRG9tUmVmKCkpKXt0aGlzLnNldEZvY3VzZWRJbmRleCh0aGlzLmlTZWxlY3RlZEluZGV4IT0tMT90aGlzLmlTZWxlY3RlZEluZGV4Oih0aGlzLmlGb2N1c2VkSW5kZXghPS0xP3RoaXMuaUZvY3VzZWRJbmRleDowKSk7aWYocSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5JTkl0ZW0iKSl7dmFyIHAsZD1xKHRoaXMub0RvbVJlZik7d2hpbGUoIXApe2Q9ZC5wYXJlbnQoKTtpZihkLmRhdGEoInNhcC5JTlJvb3QiKSl7cD1kLmdldCgwKX19aWYoIWUucmVsYXRlZENvbnRyb2xJZHx8cS5zYXAuY29udGFpbnNPckVxdWFscyhwLHNhcC51aS5nZXRDb3JlKCkuYnlJZChlLnJlbGF0ZWRDb250cm9sSWQpLmdldEZvY3VzRG9tUmVmKCkpKXtxKHRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF0pLmF0dHIoInRhYkluZGV4IiwtMSl9fXZhciBkPXEodGhpcy5vRG9tUmVmKTtpZihkLmRhdGEoInNhcC5Jbk5hdkFyZWEiKT09PWZhbHNlKXtkLmRhdGEoInNhcC5Jbk5hdkFyZWEiLHRydWUpfX19O0kucHJvdG90eXBlLm9ubW91c2Vkb3duPWZ1bmN0aW9uKGUpe3ZhciBzPWUudGFyZ2V0O2lmKHEuc2FwLmNvbnRhaW5zT3JFcXVhbHModGhpcy5vRG9tUmVmLHMpKXtmb3IodmFyIGk9MDtpPHRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aDtpKyspe3ZhciBvPXRoaXMuYUl0ZW1Eb21SZWZzW2ldO2lmKHEuc2FwLmNvbnRhaW5zT3JFcXVhbHMobyxzKSl7aWYoIXRoaXMuYlRhYmxlTW9kZSl7dGhpcy5mb2N1c0l0ZW0oaSxlKX1lbHNle2lmKG89PT1zfHwhcShzKS5pcygiOnNhcEZvY3VzYWJsZSIpKXt0aGlzLmZvY3VzSXRlbShpLGUpfX1yZXR1cm59fWlmKHM9PXRoaXMub0RvbVJlZil7dGhpcy5fYk1vdXNlRG93bkhhcHBlbmVkPXRydWU7dmFyIHQ9dGhpczt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2JNb3VzZURvd25IYXBwZW5lZD1mYWxzZX0sMjApfX19O0kucHJvdG90eXBlLm9uc2FwbmV4dD1mdW5jdGlvbihlKXtpZighcS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLm9Eb21SZWYsZS50YXJnZXQpKXtyZXR1cm59aWYocSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5Jbk5hdkFyZWEiKSl7cmV0dXJufWlmKHRoaXMuYlRhYmxlTW9kZSYmcS5pbkFycmF5KGUudGFyZ2V0LHRoaXMuYUl0ZW1Eb21SZWZzKT09PS0xKXtyZXR1cm59dmFyIGk9dGhpcy5pRm9jdXNlZEluZGV4LGY9dHJ1ZSxiPWZhbHNlO2lmKGk+LTEpe2lmKHRoaXMuYlRhYmxlTW9kZSl7dmFyIHI9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoL3RoaXMuaUNvbHVtbnMsUj1NYXRoLmZsb29yKGkvdGhpcy5pQ29sdW1ucyksYz1pJXRoaXMuaUNvbHVtbnM7aWYoZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19ET1dOKXtpZihSPHItMSl7aSs9dGhpcy5pQ29sdW1uc319ZWxzZXtpZihjPHRoaXMuaUNvbHVtbnMtMSl7aSs9MX19fWVsc2V7ZG97aWYodGhpcy5pQ29sdW1ucz4xJiZlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0RPV04pe2lmKChpK3RoaXMuaUNvbHVtbnMpPj10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgpe2lmKCF0aGlzLmJOb0NvbHVtbkNoYW5nZSl7aWYoKGkldGhpcy5pQ29sdW1ucyk8KHRoaXMuaUNvbHVtbnMtMSkpe2k9KGkldGhpcy5pQ29sdW1ucykrMX1lbHNlIGlmKHRoaXMuYkN5Y2xpbmcpe2k9MH19ZWxzZXtpPXRoaXMuaUZvY3VzZWRJbmRleDtiPXRydWV9fWVsc2V7aT1pK3RoaXMuaUNvbHVtbnN9fWVsc2V7aWYoaT09dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTEpe2lmKHEodGhpcy5vRG9tUmVmKS5kYXRhKCJzYXAuSU5JdGVtIikpe3JldHVybn1lbHNlIGlmKHRoaXMuYkN5Y2xpbmcpe2k9MH1lbHNle2k9dGhpcy5pRm9jdXNlZEluZGV4O2I9dHJ1ZX19ZWxzZXtpKyt9fWlmKGk9PT10aGlzLmlGb2N1c2VkSW5kZXgpe2lmKGYpe2Y9ZmFsc2V9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIkl0ZW1OYXZpZ2F0aW9uIGhhcyBubyB2aXNpYmxlL2V4aXN0aW5nIGl0ZW1zIGFuZCBpcyBoZW5jZSB1bmFibGUgdG8gc2VsZWN0IHRoZSBuZXh0IG9uZSIpfX19d2hpbGUoIXRoaXMuYUl0ZW1Eb21SZWZzW2ldfHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjp2aXNpYmxlIil8fHEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmNzcygidmlzaWJpbGl0eSIpPT09ImhpZGRlbiJ8fCFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnNhcEZvY3VzYWJsZSIpKX10aGlzLmZvY3VzSXRlbShpLGUpO2lmKGIpe3RoaXMuZmlyZUV2ZW50KEkuRXZlbnRzLkJvcmRlclJlYWNoZWQse2luZGV4OmksZXZlbnQ6ZX0pfWUucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpfX07SS5wcm90b3R5cGUub25zYXBuZXh0bW9kaWZpZXJzPWZ1bmN0aW9uKGUpe2lmKHRoaXMuaGFzRGlzYWJsZWRNb2RpZmllcihlKSl7cmV0dXJufXRoaXMub25zYXBuZXh0KGUpfTtJLnByb3RvdHlwZS5vbnNhcHByZXZpb3VzPWZ1bmN0aW9uKGUpe2lmKCFxLnNhcC5jb250YWluc09yRXF1YWxzKHRoaXMub0RvbVJlZixlLnRhcmdldCkpe3JldHVybn1pZihxKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLkluTmF2QXJlYSIpKXtyZXR1cm59aWYodGhpcy5iVGFibGVNb2RlJiZxLmluQXJyYXkoZS50YXJnZXQsdGhpcy5hSXRlbURvbVJlZnMpPT09LTEpe3JldHVybn12YXIgaT10aGlzLmlGb2N1c2VkSW5kZXgsZj10cnVlLGI9ZmFsc2U7aWYoaT4tMSl7aWYodGhpcy5iVGFibGVNb2RlKXt2YXIgcj10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgvdGhpcy5pQ29sdW1ucyxSPU1hdGguZmxvb3IoaS90aGlzLmlDb2x1bW5zKSxjPWkldGhpcy5pQ29sdW1ucztpZihlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX1VQKXtpZihSPjApe2ktPXRoaXMuaUNvbHVtbnN9fWVsc2V7aWYoYz4wKXtpLT0xfX19ZWxzZXtkb3tpZih0aGlzLmlDb2x1bW5zPjEmJmUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVApe2lmKChpLXRoaXMuaUNvbHVtbnMpPDApe2lmKCF0aGlzLmJOb0NvbHVtbkNoYW5nZSl7dmFyIGM9MDtpZigoaSV0aGlzLmlDb2x1bW5zKT4wKXtjPShpJXRoaXMuaUNvbHVtbnMpLTF9ZWxzZSBpZih0aGlzLmJDeWNsaW5nKXtjPXRoaXMuaUNvbHVtbnMtMX1pZihpPT09MCYmYz09PTApe2k9MH1lbHNle3ZhciBhPU1hdGguY2VpbCh0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgvdGhpcy5pQ29sdW1ucyk7aT1jKygoYS0xKSp0aGlzLmlDb2x1bW5zKTtpZihpPj10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgpe2k9aS10aGlzLmlDb2x1bW5zfX19ZWxzZXtpPXRoaXMuaUZvY3VzZWRJbmRleDtiPXRydWV9fWVsc2V7aT1pLXRoaXMuaUNvbHVtbnN9fWVsc2V7aWYoaT09MCl7aWYocSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5JTkl0ZW0iKSl7cmV0dXJufWVsc2UgaWYodGhpcy5iQ3ljbGluZyl7aT10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMX1lbHNle2k9dGhpcy5pRm9jdXNlZEluZGV4O2I9dHJ1ZX19ZWxzZXtpLS19fWlmKGk9PXRoaXMuaUZvY3VzZWRJbmRleCl7aWYoZil7Zj1mYWxzZX1lbHNle3Rocm93IG5ldyBFcnJvcigiSXRlbU5hdmlnYXRpb24gaGFzIG5vIHZpc2libGUvZXhpc3RpbmcgaXRlbXMgYW5kIGlzIGhlbmNlIHVuYWJsZSB0byBzZWxlY3QgdGhlIHByZXZpb3VzIG9uZSIpfX19d2hpbGUoIXRoaXMuYUl0ZW1Eb21SZWZzW2ldfHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjp2aXNpYmxlIil8fHEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmNzcygidmlzaWJpbGl0eSIpPT09ImhpZGRlbiJ8fCFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnNhcEZvY3VzYWJsZSIpKX10aGlzLmZvY3VzSXRlbShpLGUpO2lmKGIpe3RoaXMuZmlyZUV2ZW50KEkuRXZlbnRzLkJvcmRlclJlYWNoZWQse2luZGV4OmksZXZlbnQ6ZX0pfWUucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpfX07SS5wcm90b3R5cGUub25zYXBwcmV2aW91c21vZGlmaWVycz1mdW5jdGlvbihlKXtpZih0aGlzLmhhc0Rpc2FibGVkTW9kaWZpZXIoZSkpe3JldHVybn10aGlzLm9uc2FwcHJldmlvdXMoZSl9O0kucHJvdG90eXBlLm9uc2FwcGFnZXVwPWZ1bmN0aW9uKGUpe2lmKCFxLnNhcC5jb250YWluc09yRXF1YWxzKHRoaXMub0RvbVJlZixlLnRhcmdldCkpe3JldHVybn1pZih0aGlzLmJUYWJsZU1vZGUmJnEuaW5BcnJheShlLnRhcmdldCx0aGlzLmFJdGVtRG9tUmVmcyk9PT0tMSl7cmV0dXJufXZhciBpPTA7dmFyIGI9ZmFsc2U7aWYodGhpcy5pUGFnZVNpemU+MCl7aT10aGlzLmlGb2N1c2VkSW5kZXg7aWYoaT4tMSl7aT1pLXRoaXMuaVBhZ2VTaXplO3doaWxlKGk+MCYmIXEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmlzKCI6c2FwRm9jdXNhYmxlIikpe2ktLX1pZihpPDApe2lmKCF0aGlzLmJOb0NvbHVtbkNoYW5nZSl7aT0wfWVsc2V7aT10aGlzLmlGb2N1c2VkSW5kZXg7Yj10cnVlfX10aGlzLmZvY3VzSXRlbShpLGUpfX1lbHNlIGlmKHRoaXMuYlRhYmxlTW9kZSl7aT10aGlzLmlGb2N1c2VkSW5kZXgldGhpcy5pQ29sdW1uczt0aGlzLmZvY3VzSXRlbShpLGUpfWlmKGIpe3RoaXMuZmlyZUV2ZW50KEkuRXZlbnRzLkJvcmRlclJlYWNoZWQse2luZGV4OmksZXZlbnQ6ZX0pfWUucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpfTtJLnByb3RvdHlwZS5vbnNhcHBhZ2Vkb3duPWZ1bmN0aW9uKGUpe2lmKCFxLnNhcC5jb250YWluc09yRXF1YWxzKHRoaXMub0RvbVJlZixlLnRhcmdldCkpe3JldHVybn1pZih0aGlzLmJUYWJsZU1vZGUmJnEuaW5BcnJheShlLnRhcmdldCx0aGlzLmFJdGVtRG9tUmVmcyk9PT0tMSl7cmV0dXJufXZhciBpPTA7dmFyIGI9ZmFsc2U7aWYodGhpcy5pUGFnZVNpemU+MCl7aT10aGlzLmlGb2N1c2VkSW5kZXg7aWYoaT4tMSl7aT1pK3RoaXMuaVBhZ2VTaXplO3doaWxlKGk8dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTEmJiFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnNhcEZvY3VzYWJsZSIpKXtpKyt9aWYoaT50aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMSl7aWYoIXRoaXMuYk5vQ29sdW1uQ2hhbmdlKXtpPXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC0xfWVsc2V7aT10aGlzLmlGb2N1c2VkSW5kZXg7Yj10cnVlfX10aGlzLmZvY3VzSXRlbShpLGUpfX1lbHNlIGlmKHRoaXMuYlRhYmxlTW9kZSl7dmFyIHI9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoL3RoaXMuaUNvbHVtbnMsYz10aGlzLmlGb2N1c2VkSW5kZXgldGhpcy5pQ29sdW1ucztpPShyLTEpKnRoaXMuaUNvbHVtbnMrYzt0aGlzLmZvY3VzSXRlbShpLGUpfWlmKGIpe3RoaXMuZmlyZUV2ZW50KEkuRXZlbnRzLkJvcmRlclJlYWNoZWQse2luZGV4OmksZXZlbnQ6ZX0pfWUucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpfTtJLnByb3RvdHlwZS5vbnNhcGhvbWU9ZnVuY3Rpb24oZSl7aWYoIXEuc2FwLmNvbnRhaW5zT3JFcXVhbHModGhpcy5vRG9tUmVmLGUudGFyZ2V0KSl7cmV0dXJufWlmKHRoaXMuYlRhYmxlTW9kZSYmcS5pbkFycmF5KGUudGFyZ2V0LHRoaXMuYUl0ZW1Eb21SZWZzKT09PS0xKXtyZXR1cm59dmFyIGk9MDtpZih0aGlzLmJUYWJsZU1vZGUpe2lmKCF0aGlzLmJUYWJsZUxpc3QmJiEoZS5tZXRhS2V5fHxlLmN0cmxLZXkpKXt2YXIgcj1NYXRoLmZsb29yKHRoaXMuaUZvY3VzZWRJbmRleC90aGlzLmlDb2x1bW5zKTtpPXIqdGhpcy5pQ29sdW1uc319ZWxzZXtpZighIShlLm1ldGFLZXl8fGUuY3RybEtleSkmJiF0aGlzLl9iQ3RybEVuYWJsZWQpe3JldHVybn1pZih0aGlzLl9iU3RheUluUm93JiYhKHRoaXMuX2JDdHJsRW5hYmxlZCYmKGUubWV0YUtleXx8ZS5jdHJsS2V5KSkmJnRoaXMuaUNvbHVtbnM+MCl7dmFyIHI9TWF0aC5mbG9vcih0aGlzLmlGb2N1c2VkSW5kZXgvdGhpcy5pQ29sdW1ucyk7aT1yKnRoaXMuaUNvbHVtbnN9ZWxzZXt3aGlsZSghdGhpcy5hSXRlbURvbVJlZnNbaV18fCFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnZpc2libGUiKXx8cSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuY3NzKCJ2aXNpYmlsaXR5Iik9PT0iaGlkZGVuInx8IXEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmlzKCI6c2FwRm9jdXNhYmxlIikpe2krKztpZihpPT10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgpe3JldHVybn19fX10aGlzLmZvY3VzSXRlbShpLGUpO2UucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpfTtJLnByb3RvdHlwZS5vbnNhcGhvbWVtb2RpZmllcnM9ZnVuY3Rpb24oZSl7aWYodGhpcy5oYXNEaXNhYmxlZE1vZGlmaWVyKGUpKXtyZXR1cm59dGhpcy5vbnNhcGhvbWUoZSl9O0kucHJvdG90eXBlLm9uc2FwZW5kPWZ1bmN0aW9uKGUpe2lmKCFxLnNhcC5jb250YWluc09yRXF1YWxzKHRoaXMub0RvbVJlZixlLnRhcmdldCkpe3JldHVybn1pZih0aGlzLmJUYWJsZU1vZGUmJnEuaW5BcnJheShlLnRhcmdldCx0aGlzLmFJdGVtRG9tUmVmcyk9PT0tMSl7cmV0dXJufXZhciBpPXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC0xO2lmKHRoaXMuYlRhYmxlTW9kZSl7aWYoIXRoaXMuYlRhYmxlTGlzdCYmIShlLm1ldGFLZXl8fGUuY3RybEtleSkpe3ZhciByPU1hdGguZmxvb3IodGhpcy5pRm9jdXNlZEluZGV4L3RoaXMuaUNvbHVtbnMpO2k9cip0aGlzLmlDb2x1bW5zK3RoaXMuaUNvbHVtbnMtMX19ZWxzZXtpZighIShlLm1ldGFLZXl8fGUuY3RybEtleSkmJiF0aGlzLl9iQ3RybEVuYWJsZWQpe3JldHVybn1pZih0aGlzLl9iU3RheUluUm93JiYhKHRoaXMuX2JDdHJsRW5hYmxlZCYmKGUubWV0YUtleXx8ZS5jdHJsS2V5KSkmJnRoaXMuaUNvbHVtbnM+MCl7dmFyIHI9TWF0aC5mbG9vcih0aGlzLmlGb2N1c2VkSW5kZXgvdGhpcy5pQ29sdW1ucyk7aT0ocisxKSp0aGlzLmlDb2x1bW5zLTE7aWYoaT49dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoKXtpPXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC0xfX1lbHNle3doaWxlKCF0aGlzLmFJdGVtRG9tUmVmc1tpXXx8IXEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmlzKCI6dmlzaWJsZSIpfHxxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5jc3MoInZpc2liaWxpdHkiKT09ImhpZGRlbiJ8fCFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnNhcEZvY3VzYWJsZSIpKXtpLS07aWYoaTwwKXtyZXR1cm59fX19dGhpcy5mb2N1c0l0ZW0oaSxlKTtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX07SS5wcm90b3R5cGUub25zYXBlbmRtb2RpZmllcnM9ZnVuY3Rpb24oZSl7aWYodGhpcy5oYXNEaXNhYmxlZE1vZGlmaWVyKGUpKXtyZXR1cm59dGhpcy5vbnNhcGVuZChlKX07SS5wcm90b3R5cGUuc2V0VGFiSW5kZXgwPWZ1bmN0aW9uKCl7dGhpcy5pVGFiSW5kZXg9MDt0aGlzLmlBY3RpdmVUYWJJbmRleD0wfTtJLnByb3RvdHlwZS5vbmtleXVwPWZ1bmN0aW9uKGUpe2lmKGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRjIpe3ZhciBkPXEodGhpcy5vRG9tUmVmKTtpZihkLmRhdGEoInNhcC5Jbk5hdkFyZWEiKSl7ZC5kYXRhKCJzYXAuSW5OYXZBcmVhIixmYWxzZSl9ZWxzZSBpZihkLmRhdGEoInNhcC5Jbk5hdkFyZWEiKT09PWZhbHNlKXtkLmRhdGEoInNhcC5Jbk5hdkFyZWEiLHRydWUpfWUucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpfX07cmV0dXJuIEl9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5mb3JtYXQuRGF0ZUZvcm1hdCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLmZvcm1hdC5EYXRlRm9ybWF0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvZm9ybWF0L0RhdGVGb3JtYXQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9Mb2NhbGVEYXRhJ10sZnVuY3Rpb24ocSxMKXsidXNlIHN0cmljdCI7dmFyIEQ9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoKX07RC5vRGF0ZUluZm89e29EZWZhdWx0Rm9ybWF0T3B0aW9uczp7c3R5bGU6Im1lZGl1bSJ9LGFGYWxsYmFja0Zvcm1hdE9wdGlvbnM6W3tzdHlsZToic2hvcnQifSx7c3R5bGU6Im1lZGl1bSJ9LHtwYXR0ZXJuOiJ5eXl5LU1NLWRkIn0se3BhdHRlcm46Inl5eXlNTWRkIn1dLGdldFBhdHRlcm46ZnVuY3Rpb24obCxzKXtyZXR1cm4gbC5nZXREYXRlUGF0dGVybihzKX0sb1JlcXVpcmVkUGFydHM6eyJ0ZXh0Ijp0cnVlLCJ5ZWFyIjp0cnVlLCJ3ZWVrWWVhciI6dHJ1ZSwibW9udGgiOnRydWUsImRheSI6dHJ1ZX19O0Qub0RhdGVUaW1lSW5mbz17b0RlZmF1bHRGb3JtYXRPcHRpb25zOntzdHlsZToibWVkaXVtIn0sYUZhbGxiYWNrRm9ybWF0T3B0aW9uczpbe3N0eWxlOiJzaG9ydCJ9LHtzdHlsZToibWVkaXVtIn0se3BhdHRlcm46Inl5eXktTU0tZGQnVCdoaDptbTpzcyJ9LHtwYXR0ZXJuOiJ5eXl5TU1kZCBoaG1tc3MifV0sZ2V0UGF0dGVybjpmdW5jdGlvbihsLHMpe3ZhciBkPWwuZ2V0RGF0ZVRpbWVQYXR0ZXJuKHMpLGE9bC5nZXREYXRlUGF0dGVybihzKSx0PWwuZ2V0VGltZVBhdHRlcm4ocyk7cmV0dXJuIGQucmVwbGFjZSgiezF9IixhKS5yZXBsYWNlKCJ7MH0iLHQpfSxvUmVxdWlyZWRQYXJ0czp7InRleHQiOnRydWUsInllYXIiOnRydWUsIndlZWtZZWFyIjp0cnVlLCJtb250aCI6dHJ1ZSwiZGF5Ijp0cnVlLCJob3VyMF8yMyI6dHJ1ZSwiaG91cjFfMjQiOnRydWUsImhvdXIwXzExIjp0cnVlLCJob3VyMV8xMiI6dHJ1ZX19O0Qub1RpbWVJbmZvPXtvRGVmYXVsdEZvcm1hdE9wdGlvbnM6e3N0eWxlOiJtZWRpdW0ifSxhRmFsbGJhY2tGb3JtYXRPcHRpb25zOlt7c3R5bGU6InNob3J0In0se3N0eWxlOiJtZWRpdW0ifSx7cGF0dGVybjoiaGg6bW06c3MifSx7cGF0dGVybjoiaGhtbXNzIn1dLGdldFBhdHRlcm46ZnVuY3Rpb24obCxzKXtyZXR1cm4gbC5nZXRUaW1lUGF0dGVybihzKX0sb1JlcXVpcmVkUGFydHM6eyJ0ZXh0Ijp0cnVlLCJob3VyMF8yMyI6dHJ1ZSwiaG91cjFfMjQiOnRydWUsImhvdXIwXzExIjp0cnVlLCJob3VyMV8xMiI6dHJ1ZX19O0QuZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oZixsKXtyZXR1cm4gdGhpcy5nZXREYXRlSW5zdGFuY2UoZixsKX07RC5nZXREYXRlSW5zdGFuY2U9ZnVuY3Rpb24oZixsKXtyZXR1cm4gdGhpcy5jcmVhdGVJbnN0YW5jZShmLGwsdGhpcy5vRGF0ZUluZm8pfTtELmdldERhdGVUaW1lSW5zdGFuY2U9ZnVuY3Rpb24oZixsKXtyZXR1cm4gdGhpcy5jcmVhdGVJbnN0YW5jZShmLGwsdGhpcy5vRGF0ZVRpbWVJbmZvKX07RC5nZXRUaW1lSW5zdGFuY2U9ZnVuY3Rpb24oZixsKXtyZXR1cm4gdGhpcy5jcmVhdGVJbnN0YW5jZShmLGwsdGhpcy5vVGltZUluZm8pfTtELmNyZWF0ZUluc3RhbmNlPWZ1bmN0aW9uKGYsbCxJKXt2YXIgRj1xLnNhcC5uZXdPYmplY3QodGhpcy5wcm90b3R5cGUpO2lmKGYgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Mb2NhbGUpe2w9ZjtmPXVuZGVmaW5lZH1pZighbCl7bD1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRGb3JtYXRTZXR0aW5ncygpLmdldEZvcm1hdExvY2FsZSgpfUYub0xvY2FsZT1sO0Yub0xvY2FsZURhdGE9TC5nZXRJbnN0YW5jZShsKTtGLm9Gb3JtYXRPcHRpb25zPXEuZXh0ZW5kKGZhbHNlLHt9LEkub0RlZmF1bHRGb3JtYXRPcHRpb25zLGYpO2lmKCFGLm9Gb3JtYXRPcHRpb25zLnBhdHRlcm4pe0Yub0Zvcm1hdE9wdGlvbnMucGF0dGVybj1JLmdldFBhdHRlcm4oRi5vTG9jYWxlRGF0YSxGLm9Gb3JtYXRPcHRpb25zLnN0eWxlKX1pZighSS5hRmFsbGJhY2tGb3JtYXRzKXtJLmFGYWxsYmFja0Zvcm1hdHM9W107cS5lYWNoKEkuYUZhbGxiYWNrRm9ybWF0T3B0aW9ucyxmdW5jdGlvbihpLGYpe3ZhciBvPUQuY3JlYXRlSW5zdGFuY2UoZixsLEkpO28uYklzRmFsbGJhY2s9dHJ1ZTtJLmFGYWxsYmFja0Zvcm1hdHMucHVzaChvKX0pfUYuYUZhbGxiYWNrRm9ybWF0cz1JLmFGYWxsYmFja0Zvcm1hdHM7Ri5vUmVxdWlyZWRQYXJ0cz1JLm9SZXF1aXJlZFBhcnRzO0YuaW5pdCgpO3JldHVybiBGfTtELnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5hTW9udGhzQWJicmV2PXRoaXMub0xvY2FsZURhdGEuZ2V0TW9udGhzKCJhYmJyZXZpYXRlZCIpO3RoaXMuYU1vbnRoc1dpZGU9dGhpcy5vTG9jYWxlRGF0YS5nZXRNb250aHMoIndpZGUiKTt0aGlzLmFNb250aHNBYmJyZXZTdD10aGlzLm9Mb2NhbGVEYXRhLmdldE1vbnRoc1N0YW5kQWxvbmUoImFiYnJldmlhdGVkIik7dGhpcy5hTW9udGhzV2lkZVN0PXRoaXMub0xvY2FsZURhdGEuZ2V0TW9udGhzU3RhbmRBbG9uZSgid2lkZSIpO3RoaXMuYURheXNBYmJyZXY9dGhpcy5vTG9jYWxlRGF0YS5nZXREYXlzKCJhYmJyZXZpYXRlZCIpO3RoaXMuYURheXNXaWRlPXRoaXMub0xvY2FsZURhdGEuZ2V0RGF5cygid2lkZSIpO3RoaXMuYURheXNBYmJyZXZTdD10aGlzLm9Mb2NhbGVEYXRhLmdldERheXNTdGFuZEFsb25lKCJhYmJyZXZpYXRlZCIpO3RoaXMuYURheXNXaWRlU3Q9dGhpcy5vTG9jYWxlRGF0YS5nZXREYXlzU3RhbmRBbG9uZSgid2lkZSIpO3RoaXMuYURheVBlcmlvZHM9dGhpcy5vTG9jYWxlRGF0YS5nZXREYXlQZXJpb2RzKCJhYmJyZXZpYXRlZCIpO3RoaXMuYUZvcm1hdEFycmF5PXRoaXMucGFyc2VKYXZhRGF0ZUZvcm1hdCh0aGlzLm9Gb3JtYXRPcHRpb25zLnBhdHRlcm4pfTtELnByb3RvdHlwZS5vU3RhdGVzPXsiRyI6ImVyYSIsInkiOiJ5ZWFyIiwiWSI6IndlZWtZZWFyIiwiTSI6Im1vbnRoIiwiTCI6Im1vbnRoU3RhbmRhbG9uZSIsInciOiJ3ZWVrSW5ZZWFyIiwiVyI6IndlZWtJbk1vbnRoIiwiRCI6ImRheUluWWVhciIsImQiOiJkYXkiLCJGIjoiZGF5T2ZXZWVrSW5Nb250aCIsIkUiOiJkYXlOYW1lSW5XZWVrIiwiYyI6ImRheU5hbWVJbldlZWtTdGFuZGFsb25lIiwidSI6ImRheU51bWJlck9mV2VlayIsImEiOiJhbVBtTWFya2VyIiwiSCI6ImhvdXIwXzIzIiwiayI6ImhvdXIxXzI0IiwiSyI6ImhvdXIwXzExIiwiaCI6ImhvdXIxXzEyIiwibSI6Im1pbnV0ZSIsInMiOiJzZWNvbmQiLCJTIjoibWlsbGlzZWNvbmQiLCJ6IjoidGltZXpvbmVHZW5lcmFsIiwiWiI6InRpbWV6b25lUkZDODIyIiwiWCI6InRpbWV6b25lSVNPODYwMSJ9O0QucHJvdG90eXBlLmZvcm1hdD1mdW5jdGlvbihkLHUpe2lmKHU9PT11bmRlZmluZWQpe3U9dGhpcy5vRm9ybWF0T3B0aW9ucy5VVEN9dmFyIGI9W10scCxhPXU/ZC5nZXRVVENEYXkoKTpkLmdldERheSgpLGM9dT9kLmdldFVUQ0RhdGUoKTpkLmdldERhdGUoKSxtPXU/ZC5nZXRVVENNb250aCgpOmQuZ2V0TW9udGgoKSx5PXU/ZC5nZXRVVENGdWxsWWVhcigpOmQuZ2V0RnVsbFllYXIoKSxNPXU/ZC5nZXRVVENNaWxsaXNlY29uZHMoKTpkLmdldE1pbGxpc2Vjb25kcygpLHM9dT9kLmdldFVUQ1NlY29uZHMoKTpkLmdldFNlY29uZHMoKSxlPXU/ZC5nZXRVVENNaW51dGVzKCk6ZC5nZXRNaW51dGVzKCksaD11P2QuZ2V0VVRDSG91cnMoKTpkLmdldEhvdXJzKCksdD1NYXRoLmFicyhkLmdldFRpbWV6b25lT2Zmc2V0KCkpLFA9ZC5nZXRUaW1lem9uZU9mZnNldCgpPjAsSD1NYXRoLmZsb29yKHQvNjApLGY9dCU2MCxZLHcsZyxyO2Zvcih2YXIgaT0wO2k8dGhpcy5hRm9ybWF0QXJyYXkubGVuZ3RoO2krKyl7cD10aGlzLmFGb3JtYXRBcnJheVtpXTtzd2l0Y2gocC5zVHlwZSl7Y2FzZSJ0ZXh0IjpiLnB1c2gocC5zVmFsdWUpO2JyZWFrO2Nhc2UiZGF5IjpiLnB1c2gocS5zYXAucGFkTGVmdChTdHJpbmcoYyksIjAiLHAuaURpZ2l0cykpO2JyZWFrO2Nhc2UiZGF5TmFtZUluV2VlayI6aWYocC5pRGlnaXRzPDQpe2IucHVzaCh0aGlzLmFEYXlzQWJicmV2W2FdKX1lbHNlIGlmKHAuaURpZ2l0cz49NCl7Yi5wdXNoKHRoaXMuYURheXNXaWRlW2FdKX1icmVhaztjYXNlImRheU5hbWVJbldlZWtTdGFuZGFsb25lIjppZihwLmlEaWdpdHM8NCl7Yi5wdXNoKHRoaXMuYURheXNBYmJyZXZTdFthXSl9ZWxzZSBpZihwLmlEaWdpdHM+PTQpe2IucHVzaCh0aGlzLmFEYXlzV2lkZVN0W2FdKX1icmVhaztjYXNlImRheU51bWJlck9mV2VlayI6Yi5wdXNoKGF8fDcpO2JyZWFrO2Nhc2UibW9udGgiOmlmKHAuaURpZ2l0cz09Myl7Yi5wdXNoKHRoaXMuYU1vbnRoc0FiYnJldlttXSl9ZWxzZSBpZihwLmlEaWdpdHM+PTQpe2IucHVzaCh0aGlzLmFNb250aHNXaWRlW21dKX1lbHNle2IucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhtKzEpLCIwIixwLmlEaWdpdHMpKX1icmVhaztjYXNlIm1vbnRoU3RhbmRhbG9uZSI6aWYocC5pRGlnaXRzPT0zKXtiLnB1c2godGhpcy5hTW9udGhzQWJicmV2U3RbbV0pfWVsc2UgaWYocC5pRGlnaXRzPj00KXtiLnB1c2godGhpcy5hTW9udGhzV2lkZVN0W21dKX1lbHNle2IucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhtKzEpLCIwIixwLmlEaWdpdHMpKX1icmVhaztjYXNlImVyYSI6Yi5wdXNoKCJBRCIpO2JyZWFrO2Nhc2UieWVhciI6Y2FzZSJ3ZWVrWWVhciI6WT0iIit5O2lmKHAuaURpZ2l0cz09MiYmWS5sZW5ndGg+Mil7WT1ZLnN1YnN0cihZLmxlbmd0aC0yKX1iLnB1c2gocS5zYXAucGFkTGVmdChZLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlIndlZWtJblllYXIiOnc9IiI7aWYoZC5nZXRXZWVrKXt3Kz1kLmdldFdlZWsoKX1iLnB1c2gocS5zYXAucGFkTGVmdCh3LCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlImhvdXIwXzIzIjpiLnB1c2gocS5zYXAucGFkTGVmdChTdHJpbmcoaCksIjAiLHAuaURpZ2l0cykpO2JyZWFrO2Nhc2UiaG91cjFfMjQiOmlmKGg9PTApe2c9IjI0In1lbHNle2c9U3RyaW5nKGgpfWIucHVzaChxLnNhcC5wYWRMZWZ0KGcsIjAiLHAuaURpZ2l0cykpO2JyZWFrO2Nhc2UiaG91cjBfMTEiOmlmKGg+MTEpe2c9U3RyaW5nKGgtMTIpfWVsc2V7Zz1TdHJpbmcoaCl9Yi5wdXNoKHEuc2FwLnBhZExlZnQoZywiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJob3VyMV8xMiI6aWYoaD4xMil7Zz1TdHJpbmcoaC0xMil9ZWxzZSBpZihoPT0wKXtnPSIxMiJ9ZWxzZXtnPVN0cmluZyhoKX1iLnB1c2gocS5zYXAucGFkTGVmdChnLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlIm1pbnV0ZSI6Yi5wdXNoKHEuc2FwLnBhZExlZnQoU3RyaW5nKGUpLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlInNlY29uZCI6Yi5wdXNoKHEuc2FwLnBhZExlZnQoU3RyaW5nKHMpLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlIm1pbGxpc2Vjb25kIjpiLnB1c2gocS5zYXAucGFkUmlnaHQocS5zYXAucGFkTGVmdChTdHJpbmcoTSksIjAiLE1hdGgubWluKDMscC5pRGlnaXRzKSksIjAiLHAuaURpZ2l0cykpO2JyZWFrO2Nhc2UiYW1QbU1hcmtlciI6dmFyIGo9aDwxMj8wOjE7Yi5wdXNoKHRoaXMuYURheVBlcmlvZHNbal0pO2JyZWFrO2Nhc2UidGltZXpvbmVHZW5lcmFsIjppZihwLmlEaWdpdHM+MyYmZC5nZXRUaW1lem9uZUxvbmcpe2IucHVzaChkLmdldFRpbWV6b25lTG9uZygpKTticmVha31lbHNlIGlmKGQuZ2V0VGltZXpvbmVTaG9ydCl7Yi5wdXNoKGQuZ2V0VGltZXpvbmVTaG9ydCgpKTticmVha31iLnB1c2goIkdNVCIpO2Nhc2UidGltZXpvbmVJU084NjAxIjppZighdSYmdCE9MCl7Yi5wdXNoKFA/Ii0iOiIrIik7Yi5wdXNoKHEuc2FwLnBhZExlZnQoU3RyaW5nKEgpLCIwIiwyKSk7Yi5wdXNoKCI6Iik7Yi5wdXNoKHEuc2FwLnBhZExlZnQoU3RyaW5nKGYpLCIwIiwyKSl9ZWxzZXtiLnB1c2goIloiKX1icmVhaztjYXNlInRpbWV6b25lUkZDODIyIjppZighdSYmdCE9MCl7Yi5wdXNoKFA/Ii0iOiIrIik7Yi5wdXNoKHEuc2FwLnBhZExlZnQoU3RyaW5nKEgpLCIwIiwyKSk7Yi5wdXNoKHEuc2FwLnBhZExlZnQoU3RyaW5nKGYpLCIwIiwyKSl9YnJlYWt9fXI9Yi5qb2luKCIiKTtpZihzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRPcmlnaW5JbmZvKCkpe3I9bmV3IFN0cmluZyhyKTtyLm9yaWdpbkluZm89e3NvdXJjZToiQ29tbW9uIExvY2FsZSBEYXRhIFJlcG9zaXRvcnkiLGxvY2FsZTp0aGlzLm9Mb2NhbGUudG9TdHJpbmcoKSxzdHlsZTp0aGlzLm9Gb3JtYXRPcHRpb25zLnN0eWxlLHBhdHRlcm46dGhpcy5vRm9ybWF0T3B0aW9ucy5wYXR0ZXJufX1yZXR1cm4gcn07RC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odix1KXtpZih1PT09dW5kZWZpbmVkKXt1PXRoaXMub0Zvcm1hdE9wdGlvbnMuVVRDfXZhciBkLEk9MCxlPWZhbHNlLGE9bnVsbCxtPW51bGwseT1udWxsLGg9bnVsbCxNPW51bGwscz1udWxsLGI9bnVsbCxwPWZhbHNlLFAsYyx0PW51bGwsVj10cnVlLHI9dGhpcy5vUmVxdWlyZWRQYXJ0cztmdW5jdGlvbiBmKHgpe3JldHVybiB4Pj00OCYmeDw9NTd9ZnVuY3Rpb24gZyh4KXt2YXIgej0wO3doaWxlKHo8eCYmZih2LmNoYXJDb2RlQXQoSSt6KSkpe3orK31yZXR1cm4gdi5zdWJzdHIoSSx6KX1mdW5jdGlvbiBqKHgpe3ZhciBpO2ZvcihpPTA7aTx4Lmxlbmd0aDtpKyspe2lmKHYuaW5kZXhPZih4W2ldLEkpPT1JKXtyZXR1cm4geFtpXX19cmV0dXJuIG51bGx9ZnVuY3Rpb24gayh4KXt2YXIgaTtmb3IoaT0wO2k8eC5sZW5ndGg7aSsrKXtpZih2LmluZGV4T2YoeFtpXSxJKT09SSl7cmV0dXJuIGl9fXJldHVybiBudWxsfWZ1bmN0aW9uIGwoeCl7dmFyIHo9di5jaGFyQXQoSSk9PSIrIj8tMToxO0krKztjPWcoMik7dmFyIEI9cGFyc2VJbnQoYywxMCk7ST1JKzI7aWYoeCl7SSsrfWM9ZygyKTtJPUkrMjt0PXBhcnNlSW50KGMsMTApO3Q9KHQrNjAqQikqen1mdW5jdGlvbiBuKHgseil7aWYoeCBpbiByJiZ6KXtWPWZhbHNlfX12PXEudHJpbSh2KTtmb3IodmFyIGk9MDtpPHRoaXMuYUZvcm1hdEFycmF5Lmxlbmd0aDtpKyspe1A9dGhpcy5hRm9ybWF0QXJyYXlbaV07c3dpdGNoKFAuc1R5cGUpe2Nhc2UidGV4dCI6aWYodi5pbmRleE9mKFAuc1ZhbHVlLEkpPT1JKXtJKz1QLnNWYWx1ZS5sZW5ndGh9ZWxzZXtuKFAuc1R5cGUsdGhpcy5hRm9ybWF0QXJyYXlbaSsxXS5zVHlwZSBpbiByKX1icmVhaztjYXNlImRheSI6Yz1nKE1hdGgubWF4KFAuaURpZ2l0cywyKSk7bihQLnNUeXBlLGM9PT0iIik7SSs9Yy5sZW5ndGg7YT1wYXJzZUludChjLDEwKTticmVhaztjYXNlImRheU5hbWVJbldlZWsiOmNhc2UiZGF5TmFtZUluV2Vla1N0YW5kYWxvbmUiOmM9aih0aGlzLmFEYXlzV2lkZSk7aWYoYyl7SSs9Yy5sZW5ndGg7YnJlYWt9Yz1qKHRoaXMuYURheXNXaWRlU3QpO2lmKGMpe0krPWMubGVuZ3RoO2JyZWFrfWM9aih0aGlzLmFEYXlzQWJicmV2KTtpZihjKXtJKz1jLmxlbmd0aDticmVha31jPWoodGhpcy5hRGF5c0FiYnJldlN0KTtpZihjKXtJKz1jLmxlbmd0aDticmVha31icmVhaztjYXNlImRheU51bWJlck9mV2VlayI6Yz1nKFAuaURpZ2l0cyk7SSs9Yy5sZW5ndGg7YnJlYWs7Y2FzZSJtb250aCI6Y2FzZSJtb250aFN0YW5kYWxvbmUiOmlmKFAuaURpZ2l0czwzKXtjPWcoTWF0aC5tYXgoUC5pRGlnaXRzLDIpKTtuKFAuc1R5cGUsYz09PSIiKTttPXBhcnNlSW50KGMsMTApLTE7SSs9Yy5sZW5ndGh9ZWxzZXttPWsodGhpcy5hTW9udGhzV2lkZSk7aWYobSE9bnVsbCl7SSs9dGhpcy5hTW9udGhzV2lkZVttXS5sZW5ndGg7YnJlYWt9bT1rKHRoaXMuYU1vbnRoc1dpZGVTdCk7aWYobSE9bnVsbCl7SSs9dGhpcy5hTW9udGhzV2lkZVN0W21dLmxlbmd0aDticmVha31tPWsodGhpcy5hTW9udGhzQWJicmV2KTtpZihtIT1udWxsKXtJKz10aGlzLmFNb250aHNBYmJyZXZbbV0ubGVuZ3RoO2JyZWFrfW09ayh0aGlzLmFNb250aHNBYmJyZXZTdCk7aWYobSE9bnVsbCl7SSs9dGhpcy5hTW9udGhzQWJicmV2U3RbbV0ubGVuZ3RoO2JyZWFrfW4oUC5zVHlwZSx0cnVlKX1icmVhaztjYXNlImVyYSI6YnJlYWs7Y2FzZSJ5ZWFyIjpjYXNlIndlZWtZZWFyIjppZihQLmlEaWdpdHM9PTEpe2M9Zyg0KX1lbHNlIGlmKFAuaURpZ2l0cz09Mil7Yz1nKDIpfWVsc2V7Yz1nKFAuaURpZ2l0cyl9SSs9Yy5sZW5ndGg7bihQLnNUeXBlLGM9PT0iIik7eT1wYXJzZUludChjLDEwKTtpZihjLmxlbmd0aDw9Mil7dmFyIEM9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLG89TWF0aC5mbG9vcihDLzEwMCksWT1vKjEwMCt5LUM7aWYoWTwtNzApe3krPShvKzEpKjEwMH1lbHNlIGlmKFk8MzApe3krPW8qMTAwfWVsc2V7eSs9KG8tMSkqMTAwfX1icmVhaztjYXNlIndlZWtJblllYXIiOmJyZWFrO2Nhc2UiaG91cjBfMjMiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO0krPWMubGVuZ3RoO2g9cGFyc2VJbnQoYywxMCk7YnJlYWs7Y2FzZSJob3VyMV8yNCI6Yz1nKE1hdGgubWF4KFAuaURpZ2l0cywyKSk7bihQLnNUeXBlLGM9PT0iIik7SSs9Yy5sZW5ndGg7aD1wYXJzZUludChjLDEwKTtpZihoPT0yNCl7aD0wfWJyZWFrO2Nhc2UiaG91cjBfMTEiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO0krPWMubGVuZ3RoO2g9cGFyc2VJbnQoYywxMCk7YnJlYWs7Y2FzZSJob3VyMV8xMiI6Yz1nKE1hdGgubWF4KFAuaURpZ2l0cywyKSk7bihQLnNUeXBlLGM9PT0iIik7SSs9Yy5sZW5ndGg7aD1wYXJzZUludChjLDEwKTtpZihoPT0xMil7aD0wO3A9dHJ1ZX1icmVhaztjYXNlIm1pbnV0ZSI6Yz1nKE1hdGgubWF4KFAuaURpZ2l0cywyKSk7bihQLnNUeXBlLGM9PT0iIik7SSs9Yy5sZW5ndGg7TT1wYXJzZUludChjLDEwKTticmVhaztjYXNlInNlY29uZCI6Yz1nKE1hdGgubWF4KFAuaURpZ2l0cywyKSk7bihQLnNUeXBlLGM9PT0iIik7SSs9Yy5sZW5ndGg7cz1wYXJzZUludChjLDEwKTticmVhaztjYXNlIm1pbGxpc2Vjb25kIjpjPWcoTWF0aC5tYXgoUC5pRGlnaXRzLDMpKTtJKz1jLmxlbmd0aDtjPXEuc2FwLnBhZFJpZ2h0KGMsIjAiLDMpO2I9cGFyc2VJbnQoYywxMCk7YnJlYWs7Y2FzZSJhbVBtTWFya2VyIjp2YXIgQT10aGlzLmFEYXlQZXJpb2RzWzBdLHc9dGhpcy5hRGF5UGVyaW9kc1sxXTtpZih2LmluZGV4T2YoQSxJKT09SSl7cD1mYWxzZTtJKz0yfWVsc2UgaWYodi5pbmRleE9mKHcsSSk9PUkpe3A9dHJ1ZTtJKz0yfWJyZWFrO2Nhc2UidGltZXpvbmVHZW5lcmFsIjp2YXIgVD12LnN1YnN0cmluZyhJLEkrMyk7aWYoVD09PSJHTVQifHxUPT09IlVUQyIpe0k9SSszfWVsc2UgaWYodi5zdWJzdHJpbmcoSSxJKzIpPT09IlVUIil7ST1JKzJ9ZWxzZSBpZih2LmNoYXJBdChJKT09IloiKXtJPUkrMTt0PTA7YnJlYWt9ZWxzZXtxLnNhcC5sb2cuZXJyb3IodisiIGNhbm5vdCBiZSBwYXJzZWQgY29ycmVjbHkgYnkgc2FwLnVpLmNvcmUuZm9ybWF0LkRhdGVGb3JtYXQ6IFRoZSBnaXZlbiB0aW1lem9uZSBpcyBub3Qgc3VwcG9ydGVkISIpO2JyZWFrfWNhc2UidGltZXpvbmVJU084NjAxIjppZih2LmNoYXJBdChJKT09IloiKXtJPUkrMTt0PTA7YnJlYWt9bCh0cnVlKTticmVhaztjYXNlInRpbWV6b25lUkZDODIyIjpsKGZhbHNlKTticmVha31pZighVil7YnJlYWt9fWlmKEk8di5sZW5ndGgpe1Y9ZmFsc2V9aWYocCl7aCs9MTJ9aWYoVil7aWYodCE9bnVsbCl7ZD1uZXcgRGF0ZSgwKTtkLnNldFVUQ0Z1bGxZZWFyKHl8fDE5NzApO2Quc2V0VVRDTW9udGgobXx8MCk7ZC5zZXRVVENEYXRlKGF8fDEpO2Quc2V0VVRDSG91cnMoaHx8MCk7ZC5zZXRVVENNaW51dGVzKChNfHwwKSt0KTtkLnNldFVUQ1NlY29uZHMoc3x8MCk7ZC5zZXRVVENNaWxsaXNlY29uZHMoYnx8MCl9ZWxzZSBpZih1KXtkPW5ldyBEYXRlKDApO2Quc2V0VVRDRnVsbFllYXIoeXx8MTk3MCk7ZC5zZXRVVENNb250aChtfHwwKTtkLnNldFVUQ0RhdGUoYXx8MSk7ZC5zZXRVVENIb3VycyhofHwwKTtkLnNldFVUQ01pbnV0ZXMoTXx8MCk7ZC5zZXRVVENTZWNvbmRzKHN8fDApO2Quc2V0VVRDTWlsbGlzZWNvbmRzKGJ8fDApfWVsc2V7ZD1uZXcgRGF0ZSgxOTcwLDAsMSwwLDAsMCk7ZC5zZXRGdWxsWWVhcih5fHwxOTcwKTtkLnNldE1vbnRoKG18fDApO2Quc2V0RGF0ZShhfHwxKTtkLnNldEhvdXJzKGh8fDApO2Quc2V0TWludXRlcyhNfHwwKTtkLnNldFNlY29uZHMoc3x8MCk7ZC5zZXRNaWxsaXNlY29uZHMoYnx8MCl9cmV0dXJuIGR9aWYoIXRoaXMuYklzRmFsbGJhY2spe3EuZWFjaCh0aGlzLmFGYWxsYmFja0Zvcm1hdHMsZnVuY3Rpb24oaSxGKXtkPUYucGFyc2Uodix1KTtpZihkKXtyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIGR9cmV0dXJuIG51bGx9O0QucHJvdG90eXBlLnBhcnNlSmF2YURhdGVGb3JtYXQ9ZnVuY3Rpb24oZil7dmFyIEY9W10saSxRPWZhbHNlLGM9bnVsbCxzPSIiLG49IiI7Zm9yKGk9MDtpPGYubGVuZ3RoO2krKyl7dmFyIEM9Zi5jaGFyQXQoaSksTixwLFA7aWYoUSl7aWYoQz09IiciKXtwPWYuY2hhckF0KGktMSk7UD1mLmNoYXJBdChpLTIpO049Zi5jaGFyQXQoaSsxKTtpZihwPT0iJyImJlAhPSInIil7UT1mYWxzZX1lbHNlIGlmKE49PSInIil7aSs9MX1lbHNle1E9ZmFsc2U7Y29udGludWV9fWlmKHM9PSJ0ZXh0Iil7Yy5zVmFsdWUrPUN9ZWxzZXtjPXtzVHlwZToidGV4dCIsc1ZhbHVlOkN9O0YucHVzaChjKTtzPSJ0ZXh0In19ZWxzZXtpZihDPT0iJyIpe1E9dHJ1ZX1lbHNlIGlmKHRoaXMub1N0YXRlc1tDXSl7bj10aGlzLm9TdGF0ZXNbQ107aWYocz09bil7Yy5pRGlnaXRzKyt9ZWxzZXtjPXtzVHlwZTpuLGlEaWdpdHM6MX07Ri5wdXNoKGMpO3M9bn19ZWxzZXtpZihzPT0idGV4dCIpe2Muc1ZhbHVlKz1DfWVsc2V7Yz17c1R5cGU6InRleHQiLHNWYWx1ZTpDfTtGLnB1c2goYyk7cz0idGV4dCJ9fX19cmV0dXJuIEZ9O3JldHVybiBEfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuZm9ybWF0Lk51bWJlckZvcm1hdCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLmZvcm1hdC5OdW1iZXJGb3JtYXQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9mb3JtYXQvTnVtYmVyRm9ybWF0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvTG9jYWxlRGF0YSddLGZ1bmN0aW9uKHEsTCl7InVzZSBzdHJpY3QiO3ZhciBOPXNhcC51aS5iYXNlLk9iamVjdC5leHRlbmQoInNhcC51aS5jb3JlLmZvcm1hdC5OdW1iZXJGb3JtYXQiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihmKXt0aHJvdyBuZXcgRXJyb3IoKX19KTtOLklOVEVHRVI9MDtOLkZMT0FUPTE7Ti5DVVJSRU5DWT0yO04uUEVSQ0VOVD0zO04ub0RlZmF1bHRJbnRlZ2VyRm9ybWF0PXttaW5JbnRlZ2VyRGlnaXRzOjEsbWF4SW50ZWdlckRpZ2l0czo5OSxtaW5GcmFjdGlvbkRpZ2l0czowLG1heEZyYWN0aW9uRGlnaXRzOjAsZ3JvdXBpbmdFbmFibGVkOmZhbHNlLGdyb3VwaW5nU2VwYXJhdG9yOiIsIixkZWNpbWFsU2VwYXJhdG9yOiIuIixwbHVzU2lnbjoiKyIsbWludXNTaWduOiItIixpc0ludGVnZXI6dHJ1ZSx0eXBlOk4uSU5URUdFUixzaG93TWVhc3VyZTpmYWxzZX07Ti5vRGVmYXVsdEZsb2F0Rm9ybWF0PXttaW5JbnRlZ2VyRGlnaXRzOjEsbWF4SW50ZWdlckRpZ2l0czo5OSxtaW5GcmFjdGlvbkRpZ2l0czowLG1heEZyYWN0aW9uRGlnaXRzOjk5LGdyb3VwaW5nRW5hYmxlZDp0cnVlLGdyb3VwaW5nU2VwYXJhdG9yOiIsIixkZWNpbWFsU2VwYXJhdG9yOiIuIixwbHVzU2lnbjoiKyIsbWludXNTaWduOiItIixpc0ludGVnZXI6ZmFsc2UsdHlwZTpOLkZMT0FULHNob3dNZWFzdXJlOmZhbHNlfTtOLm9EZWZhdWx0Q3VycmVuY3lGb3JtYXQ9e21pbkludGVnZXJEaWdpdHM6MSxtYXhJbnRlZ2VyRGlnaXRzOjk5LG1pbkZyYWN0aW9uRGlnaXRzOjIsbWF4RnJhY3Rpb25EaWdpdHM6Mixncm91cGluZ0VuYWJsZWQ6dHJ1ZSxncm91cGluZ1NlcGFyYXRvcjoiLCIsZGVjaW1hbFNlcGFyYXRvcjoiLiIscGx1c1NpZ246IisiLG1pbnVzU2lnbjoiLSIsaXNJbnRlZ2VyOmZhbHNlLHR5cGU6Ti5DVVJSRU5DWSxzaG93TWVhc3VyZTp0cnVlfTtOLmdldEluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7cmV0dXJuIHRoaXMuZ2V0RmxvYXRJbnN0YW5jZShmLGwpfTtOLmdldEZsb2F0SW5zdGFuY2U9ZnVuY3Rpb24oZixsKXt2YXIgRj10aGlzLmNyZWF0ZUluc3RhbmNlKGYsbCksbz10aGlzLmdldExvY2FsZUZvcm1hdE9wdGlvbnMoRi5vTG9jYWxlRGF0YSxOLkZMT0FUKTtGLm9Gb3JtYXRPcHRpb25zPXEuZXh0ZW5kKGZhbHNlLHt9LHRoaXMub0RlZmF1bHRGbG9hdEZvcm1hdCxvLGYpO2lmKGYmJmYucGF0dGVybil7Ri5vRm9ybWF0T3B0aW9ucz1xLmV4dGVuZChmYWxzZSxGLm9Gb3JtYXRPcHRpb25zLHRoaXMucGFyc2VOdW1iZXJQYXR0ZXJuKGYucGF0dGVybikpfXJldHVybiBGfTtOLmdldEludGVnZXJJbnN0YW5jZT1mdW5jdGlvbihmLGwpe3ZhciBGPXRoaXMuY3JlYXRlSW5zdGFuY2UoZixsKSxvPXRoaXMuZ2V0TG9jYWxlRm9ybWF0T3B0aW9ucyhGLm9Mb2NhbGVEYXRhLE4uSU5URUdFUik7Ri5vRm9ybWF0T3B0aW9ucz1xLmV4dGVuZChmYWxzZSx7fSx0aGlzLm9EZWZhdWx0SW50ZWdlckZvcm1hdCxvLGYpO2lmKGYmJmYucGF0dGVybil7Ri5vRm9ybWF0T3B0aW9ucz1xLmV4dGVuZChmYWxzZSxGLm9Gb3JtYXRPcHRpb25zLHRoaXMucGFyc2VOdW1iZXJQYXR0ZXJuKGYucGF0dGVybikpfXJldHVybiBGfTtOLmdldEN1cnJlbmN5SW5zdGFuY2U9ZnVuY3Rpb24oZixsKXt2YXIgRj10aGlzLmNyZWF0ZUluc3RhbmNlKGYsbCksbz10aGlzLmdldExvY2FsZUZvcm1hdE9wdGlvbnMoRi5vTG9jYWxlRGF0YSxOLkNVUlJFTkNZKTtGLm9Gb3JtYXRPcHRpb25zPXEuZXh0ZW5kKGZhbHNlLHt9LHRoaXMub0RlZmF1bHRDdXJyZW5jeUZvcm1hdCxvLGYpO2lmKGYmJmYucGF0dGVybil7Ri5vRm9ybWF0T3B0aW9ucz1xLmV4dGVuZChmYWxzZSxGLm9Gb3JtYXRPcHRpb25zLHRoaXMucGFyc2VOdW1iZXJQYXR0ZXJuKGYucGF0dGVybikpfXJldHVybiBGfTtOLmNyZWF0ZUluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7dmFyIEY9cS5zYXAubmV3T2JqZWN0KHRoaXMucHJvdG90eXBlKTtpZihmIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuTG9jYWxlKXtsPWY7Zj11bmRlZmluZWR9aWYoIWwpe2w9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0Rm9ybWF0U2V0dGluZ3MoKS5nZXRGb3JtYXRMb2NhbGUoKX1GLm9Mb2NhbGU9bDtGLm9Mb2NhbGVEYXRhPUwuZ2V0SW5zdGFuY2UobCk7cmV0dXJuIEZ9O04uZ2V0TG9jYWxlRm9ybWF0T3B0aW9ucz1mdW5jdGlvbihsLHQpe3ZhciBvPXt9LG47aWYodD09Ti5DVVJSRU5DWSl7bj1sLmdldEN1cnJlbmN5UGF0dGVybigpO289dGhpcy5wYXJzZU51bWJlclBhdHRlcm4obil9by5wbHVzU2lnbj1sLmdldE51bWJlclN5bWJvbCgicGx1c1NpZ24iKTtvLm1pbnVzU2lnbj1sLmdldE51bWJlclN5bWJvbCgibWludXNTaWduIik7by5kZWNpbWFsU2VwYXJhdG9yPWwuZ2V0TnVtYmVyU3ltYm9sKCJkZWNpbWFsIik7by5ncm91cGluZ1NlcGFyYXRvcj1sLmdldE51bWJlclN5bWJvbCgiZ3JvdXAiKTtvLnBhdHRlcm49bjtyZXR1cm4gb307Ti5wYXJzZU51bWJlclBhdHRlcm49ZnVuY3Rpb24oZil7dmFyIG09MDt2YXIgTT0wO3ZhciBhPTA7dmFyIGc9ZmFsc2U7dmFyIHM9MDtmb3IodmFyIGk9MDtpPGYubGVuZ3RoO2krKyl7dmFyIGM9ZltpXTtpZihjPT09IiwiKXtnPXRydWU7Y29udGludWV9ZWxzZSBpZihjPT09Ii4iKXtzPTE7Y29udGludWV9ZWxzZSBpZihzPT0wJiZjPT09IjAiKXttKyt9ZWxzZSBpZihzPT0xKXtpZihjPT09IjAiKXtNKys7YSsrfWVsc2UgaWYoYz09PSIjIil7YSsrfX19cmV0dXJue21pbkludGVnZXJEaWdpdHM6bSxtaW5GcmFjdGlvbkRpZ2l0czpNLG1heEZyYWN0aW9uRGlnaXRzOmEsZ3JvdXBpbmdFbmFibGVkOmd9fTtOLnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24odixtKXt2YXIgbj10aGlzLmNvbnZlcnRUb0RlY2ltYWwodiksaT0iIixmPSIiLGc9IiIscj0iIixwPTAsbD0wLGI9djwwLGQ9LTEsbz10aGlzLm9Gb3JtYXRPcHRpb25zO2lmKG49PSJOYU4iKXtyZXR1cm4gbn1pZihvLnR5cGU9PU4uQ1VSUkVOQ1kpe3ZhciBEPXRoaXMub0xvY2FsZURhdGEuZ2V0Q3VycmVuY3lEaWdpdHMobSk7by5tYXhGcmFjdGlvbkRpZ2l0cz1EO28ubWluRnJhY3Rpb25EaWdpdHM9RH1pZihiKXtuPW4uc3Vic3RyKDEpfWQ9bi5pbmRleE9mKCIuIik7aWYoZD4tMSl7aT1uLnN1YnN0cigwLGQpO2Y9bi5zdWJzdHIoZCsxKX1lbHNle2k9bn1pZihpLmxlbmd0aDxvLm1pbkludGVnZXJEaWdpdHMpe2k9cS5zYXAucGFkTGVmdChpLCIwIixvLm1pbkludGVnZXJEaWdpdHMpfWVsc2UgaWYoaS5sZW5ndGg+by5tYXhJbnRlZ2VyRGlnaXRzKXtpPXEuc2FwLnBhZExlZnQoIiIsIj8iLG8ubWF4SW50ZWdlckRpZ2l0cyl9aWYoZi5sZW5ndGg8by5taW5GcmFjdGlvbkRpZ2l0cyl7Zj1xLnNhcC5wYWRSaWdodChmLCIwIixvLm1pbkZyYWN0aW9uRGlnaXRzKX1lbHNlIGlmKGYubGVuZ3RoPm8ubWF4RnJhY3Rpb25EaWdpdHMpe2Y9Zi5zdWJzdHIoMCxvLm1heEZyYWN0aW9uRGlnaXRzKX1sPWkubGVuZ3RoO2lmKG8uZ3JvdXBpbmdFbmFibGVkJiZsPjMpe3A9bCUzfHwzO2c9aS5zdWJzdHIoMCxwKTt3aGlsZShwPGkubGVuZ3RoKXtnKz1vLmdyb3VwaW5nU2VwYXJhdG9yO2crPWkuc3Vic3RyKHAsMyk7cCs9M31pPWd9aWYoYil7cj1vLm1pbnVzU2lnbn1yKz1pO2lmKGYpe3IrPW8uZGVjaW1hbFNlcGFyYXRvcitmfWlmKG0mJm8uc2hvd01lYXN1cmUpe2lmKG8udHlwZT09Ti5DVVJSRU5DWSl7dmFyIGM9J1x1MDBhNCc7dmFyIFA9by5wYXR0ZXJuO1A9UC5yZXBsYWNlKC9cdTAwYTQvLHRoaXMub0xvY2FsZURhdGEuZ2V0Q3VycmVuY3lTeW1ib2wobSkpO1A9UC5yZXBsYWNlKC9bMCMuLF0rLyxyKTtyPVB9fWlmKHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldE9yaWdpbkluZm8oKSl7cj1uZXcgU3RyaW5nKHIpO3Iub3JpZ2luSW5mbz17c291cmNlOiJDb21tb24gTG9jYWxlIERhdGEgUmVwb3NpdG9yeSIsbG9jYWxlOnRoaXMub0xvY2FsZS50b1N0cmluZygpfX1yZXR1cm4gcn07Ti5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odil7dmFyIG89dGhpcy5vRm9ybWF0T3B0aW9ucyxyPSJeXFxzKihbKy1dPyg/OlswLTlcXCIrby5ncm91cGluZ1NlcGFyYXRvcisiXSt8WzAtOVxcIitvLmdyb3VwaW5nU2VwYXJhdG9yKyJdKlxcIitvLmRlY2ltYWxTZXBhcmF0b3IrIlswLTldKykoW2VFXVsrLV1bMC05XSspPylcXHMqJCIsUj0iXlxccyooWystXT9bMC05XFwiK28uZ3JvdXBpbmdTZXBhcmF0b3IrIl0rKVxccyokIixnPW5ldyBSZWdFeHAoIlxcIitvLmdyb3VwaW5nU2VwYXJhdG9yLCJnIiksZD1uZXcgUmVnRXhwKCJcXCIrby5kZWNpbWFsU2VwYXJhdG9yLCJnIiksYSxiPTA7dj12LnJlcGxhY2UoL1xzL2csIiIpO2lmKG8uaXNJbnRlZ2VyKXthPW5ldyBSZWdFeHAoUil9ZWxzZXthPW5ldyBSZWdFeHAocil9aWYoIWEudGVzdCh2KSl7cmV0dXJuIE5hTn12PXYucmVwbGFjZShnLCIiKTtpZihvLmlzSW50ZWdlcil7Yj1wYXJzZUludCh2LDEwKX1lbHNle3Y9di5yZXBsYWNlKGQsIi4iKTtiPXBhcnNlRmxvYXQodil9cmV0dXJuIGJ9O04ucHJvdG90eXBlLmNvbnZlcnRUb0RlY2ltYWw9ZnVuY3Rpb24odil7dmFyIFY9IiIrdixuLGIsZCxmLGUscDtpZihWLmluZGV4T2YoImUiKT09LTEmJlYuaW5kZXhPZigiRSIpPT0tMSl7cmV0dXJuIFZ9dmFyIHI9Vi5tYXRjaCgvXihbKy1dPykoKFxkKykoPzpcLihcZCspKT8pW2VFXShbKy1dP1xkKykkLyk7bj1yWzFdPT0iLSI7Yj1yWzJdLnJlcGxhY2UoL1wuL2csIiIpO2Q9clszXT9yWzNdLmxlbmd0aDowO2Y9cls0XT9yWzRdLmxlbmd0aDowO2U9cGFyc2VJbnQocls1XSwxMCk7aWYoZT4wKXtpZihlPGYpe3A9ZCtlO1Y9Yi5zdWJzdHIoMCxwKSsiLiIrYi5zdWJzdHIocCl9ZWxzZXtWPWI7ZS09Zjtmb3IodmFyIGk9MDtpPGU7aSsrKXtWKz0iMCJ9fX1lbHNle2lmKC1lPGQpe3A9ZCtlO1Y9Yi5zdWJzdHIoMCxwKSsiLiIrYi5zdWJzdHIocCl9ZWxzZXtWPWI7ZSs9ZDtmb3IodmFyIGk9MDtpPmU7aS0tKXtWPSIwIitWfVY9IjAuIitWfX1pZihuKXtWPSItIitWfXJldHVybiBWfTtyZXR1cm4gTn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5Db250cm9sbGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLkNvbnRyb2xsZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvQ29udHJvbGxlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj17fTt2YXIgQz1FLmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLkNvbnRyb2xsZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihuKXt2YXIgdD1udWxsO2lmKHR5cGVvZihuKT09InN0cmluZyIpe2lmKCFyW25dKXtxLnNhcC5yZXF1aXJlKHttb2ROYW1lOm4sdHlwZToiY29udHJvbGxlciJ9KTtpZighcltuXSl7dGhyb3cgbmV3IEVycm9yKCJDb250cm9sbGVyIHR5cGUgIituKyIgaXMgc3RpbGwgdW5kZWZpbmVkIGFmdGVyIHRyeWluZyB0byBsb2FkIGl0LiIpfX10PXJbbl19RS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodCl7cS5leHRlbmQodGhpcyxyW25dKX19fSk7dmFyIGM9eyJvbkluaXQiOnRydWUsIm9uRXhpdCI6ZmFsc2UsIm9uQmVmb3JlUmVuZGVyaW5nIjpmYWxzZSwib25BZnRlclJlbmRlcmluZyI6dHJ1ZX07ZnVuY3Rpb24gZShvLG4pe3ZhciBhO2lmKHNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbil7dmFyIGI9c2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uLmdldENvbnRyb2xsZXJFeHRlbnNpb24obik7aWYoYil7dmFyIHM9Yi5jb250cm9sbGVyTmFtZTtxLnNhcC5sb2cuaW5mbygiQ3VzdG9taXppbmc6IENvbnRyb2xsZXIgJyIrbisiJyBpcyBub3cgZXh0ZW5kZWQgYnkgJyIrcysiJyIpO2lmKCFyW3NdJiYhcS5zYXAuZ2V0T2JqZWN0KHMpKXtxLnNhcC5yZXF1aXJlKHttb2ROYW1lOnMsdHlwZToiY29udHJvbGxlciJ9KX1pZighcltzXSYmIXEuc2FwLmdldE9iamVjdChzKSl7cS5zYXAubG9nLmVycm9yKCJBdHRlbXB0IHRvIGxvYWQgRXh0ZW5zaW9uIENvbnRyb2xsZXIgIitzKyIgd2FzIG5vdCBzdWNjZXNzZnVsIC0gaXMgdGhlIENvbnRyb2xsZXIgY29ycmVjdGx5IGRlZmluZWQgaW4gaXRzIGZpbGU/Iil9aWYoYT1yW3NdKXtmb3IodmFyIG0gaW4gYSl7aWYoY1ttXSE9PXVuZGVmaW5lZCl7dmFyIE89b1ttXTtpZihPJiZ0eXBlb2YgTz09PSJmdW5jdGlvbiIpeyhmdW5jdGlvbihtLE8pe29bbV09ZnVuY3Rpb24oKXtpZihjW21dKXtPLmFwcGx5KG8sYXJndW1lbnRzKTthW21dLmFwcGx5KG8sYXJndW1lbnRzKX1lbHNle2FbbV0uYXBwbHkobyxhcmd1bWVudHMpO08uYXBwbHkobyxhcmd1bWVudHMpfX19KShtLE8pfWVsc2V7b1ttXT1hW21dfX1lbHNle29bbV09YVttXX19cmV0dXJuIG99ZWxzZXt9fX1yZXR1cm4gb31zYXAudWkuY29udHJvbGxlcj1mdW5jdGlvbihuLG8pe2lmKCFuKXt0aHJvdyBuZXcgRXJyb3IoIkNvbnRyb2xsZXIgbmFtZSAoJ3NOYW1lJyBwYXJhbWV0ZXIpIGlzIHJlcXVpcmVkIil9aWYoIW8pe2lmKCFyW25dJiYhcS5zYXAuZ2V0T2JqZWN0KG4pKXtxLnNhcC5yZXF1aXJlKHttb2ROYW1lOm4sdHlwZToiY29udHJvbGxlciJ9KX1pZihyW25dKXt2YXIgYT1uZXcgQyhuKTthPWUoYSxuKTtyZXR1cm4gYX1lbHNle3ZhciBiPXEuc2FwLmdldE9iamVjdChuKTtpZih0eXBlb2YgYj09PSJmdW5jdGlvbiImJmIucHJvdG90eXBlIGluc3RhbmNlb2YgQyl7dmFyIGE9bmV3IGIoKTthPWUoYSxuKTtyZXR1cm4gYX19dGhyb3cgbmV3IEVycm9yKCJDb250cm9sbGVyICIrbisiIGNvdWxkbid0IGJlIGluc3RhbnRpYXRlZCIpfWVsc2V7cltuXT1vfX07Qy5wcm90b3R5cGUuZ2V0Vmlldz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9WaWV3fTtDLnByb3RvdHlwZS5ieUlkPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLm9WaWV3P3RoaXMub1ZpZXcuYnlJZChpKTp1bmRlZmluZWR9O0MucHJvdG90eXBlLmNyZWF0ZUlkPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLm9WaWV3P3RoaXMub1ZpZXcuY3JlYXRlSWQoaSk6dW5kZWZpbmVkfTtDLnByb3RvdHlwZS5jb25uZWN0VG9WaWV3PWZ1bmN0aW9uKHYpe3RoaXMub1ZpZXc9djtpZih0aGlzLm9uSW5pdCl7di5hdHRhY2hBZnRlckluaXQodGhpcy5vbkluaXQsdGhpcyl9aWYodGhpcy5vbkV4aXQpe3YuYXR0YWNoQmVmb3JlRXhpdCh0aGlzLm9uRXhpdCx0aGlzKX1pZih0aGlzLm9uQWZ0ZXJSZW5kZXJpbmcpe3YuYXR0YWNoQWZ0ZXJSZW5kZXJpbmcodGhpcy5vbkFmdGVyUmVuZGVyaW5nLHRoaXMpfWlmKHRoaXMub25CZWZvcmVSZW5kZXJpbmcpe3YuYXR0YWNoQmVmb3JlUmVuZGVyaW5nKHRoaXMub25CZWZvcmVSZW5kZXJpbmcsdGhpcyl9fTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5IVE1MVmlld1JlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3UmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvSFRNTFZpZXdSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vVmlld1JlbmRlcmVyJ10sZnVuY3Rpb24ocSxWKXsidXNlIHN0cmljdCI7dmFyIEg9e307SC5yZW5kZXI9ZnVuY3Rpb24ocixjKXt2YXIgYT1yO2Eud3JpdGUoIjxkaXYiKTthLndyaXRlQ29udHJvbERhdGEoYyk7YS5hZGRDbGFzcygic2FwVWlWaWV3Iik7YS5hZGRDbGFzcygic2FwVWlIVE1MVmlldyIpO1YuYWRkRGlzcGxheUNsYXNzKGEsYyk7aWYoYy5nZXRXaWR0aCgpKXthLmFkZFN0eWxlKCJ3aWR0aCIsYy5nZXRXaWR0aCgpKX1pZihjLmdldEhlaWdodCgpKXthLmFkZFN0eWxlKCJoZWlnaHQiLGMuZ2V0SGVpZ2h0KCkpfWEud3JpdGVTdHlsZXMoKTthLndyaXRlQ2xhc3NlcygpO2Eud3JpdGUoIj4iKTt2YXIgaD1jLl9vVGVtcGxhdGUuaW5uZXJIVE1MO3ZhciBiPWMuZ2V0Q29udGVudCgpO3ZhciBkPVtdO3ZhciBlPWZ1bmN0aW9uKGMpe3ZhciB0PUguX2dldEhUTUwoYSxjLGgpO2lmKHQpe2g9dH1lbHNle2QucHVzaChjKX19O2lmKGIpe2lmKHEuaXNBcnJheShiKSl7Zm9yKHZhciBpPTA7aTxiLmxlbmd0aDtpKyspe2UoYltpXSl9fWVsc2UgaWYoYil7ZShiKX19YS53cml0ZShoKTtmb3IodmFyIGk9MDtpPGQubGVuZ3RoO2krKyl7YS5yZW5kZXJDb250cm9sKGRbaV0pfWEud3JpdGUoIjwvZGl2PiIpfTtILl9nZXRIVE1MPWZ1bmN0aW9uKHIsYyxoKXt2YXIgaT1jLmdldElkKCk7aD1oLnJlcGxhY2UoLyg8ZGl2KS9naSwiXG4kMSIpO3ZhciBhPW5ldyBSZWdFeHAoJzxkaXYuKj9kYXRhLXNhcC11aS1pZD0iJytpKyciLio/PjwvZGl2PicsImdpIik7dmFyIG09YS5leGVjKGgpO2lmKG0pe2g9aC5yZXBsYWNlKG1bMF0sci5nZXRIVE1MKGMpKTtyZXR1cm4gaH1lbHNle3JldHVybiIifX07cmV0dXJuIEh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuSlNPTlZpZXdSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5KU09OVmlld1JlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL0pTT05WaWV3UmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1ZpZXdSZW5kZXJlciddLGZ1bmN0aW9uKHEsVil7InVzZSBzdHJpY3QiO3ZhciBKPXt9O0oucmVuZGVyPWZ1bmN0aW9uKHIsYyl7dmFyIGE9cjthLndyaXRlKCI8ZGl2Iik7YS53cml0ZUNvbnRyb2xEYXRhKGMpO2EuYWRkQ2xhc3MoInNhcFVpVmlldyIpO2EuYWRkQ2xhc3MoInNhcFVpSlNPTlZpZXciKTtWLmFkZERpc3BsYXlDbGFzcyhhLGMpO2lmKGMuZ2V0V2lkdGgoKSl7YS5hZGRTdHlsZSgid2lkdGgiLGMuZ2V0V2lkdGgoKSl9aWYoYy5nZXRIZWlnaHQoKSl7YS5hZGRTdHlsZSgiaGVpZ2h0IixjLmdldEhlaWdodCgpKX1hLndyaXRlU3R5bGVzKCk7YS53cml0ZUNsYXNzZXMoKTthLndyaXRlKCI+Iik7dmFyIGI9Yy5nZXRDb250ZW50KCk7aWYoYil7aWYoYi5sZW5ndGgmJiEoYiBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkNvbnRyb2wpKXtmb3IodmFyIGk9MDtpPGIubGVuZ3RoO2krKyl7YS5yZW5kZXJDb250cm9sKGJbaV0pfX1lbHNle2EucmVuZGVyQ29udHJvbChjLmdldENvbnRlbnQoKSl9fWEud3JpdGUoIjwvZGl2PiIpfTtyZXR1cm4gSn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5KU1ZpZXdSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5KU1ZpZXdSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9KU1ZpZXdSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vVmlld1JlbmRlcmVyJ10sZnVuY3Rpb24ocSxWKXsidXNlIHN0cmljdCI7dmFyIEo9e307Si5yZW5kZXI9ZnVuY3Rpb24ocixjKXt2YXIgYT1yO2Eud3JpdGUoIjxkaXYiKTthLndyaXRlQ29udHJvbERhdGEoYyk7YS5hZGRDbGFzcygic2FwVWlWaWV3Iik7YS5hZGRDbGFzcygic2FwVWlKU1ZpZXciKTtWLmFkZERpc3BsYXlDbGFzcyhhLGMpO2lmKGMuZ2V0V2lkdGgoKSl7YS5hZGRTdHlsZSgid2lkdGgiLGMuZ2V0V2lkdGgoKSl9aWYoYy5nZXRIZWlnaHQoKSl7YS5hZGRTdHlsZSgiaGVpZ2h0IixjLmdldEhlaWdodCgpKX1hLndyaXRlU3R5bGVzKCk7YS53cml0ZUNsYXNzZXMoKTthLndyaXRlKCI+Iik7dmFyIGI9Yy5nZXRDb250ZW50KCk7aWYoYil7aWYocS5pc0FycmF5KGIpKXtmb3IodmFyIGk9MDtpPGIubGVuZ3RoO2krKyl7YS5yZW5kZXJDb250cm9sKGJbaV0pfX1lbHNlIGlmKGIpe2EucmVuZGVyQ29udHJvbChiKX19YS53cml0ZSgiPC9kaXY+Iil9O3JldHVybiBKfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlld1JlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlld1JlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL1RlbXBsYXRlVmlld1JlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9WaWV3UmVuZGVyZXInXSxmdW5jdGlvbihxLFYpeyJ1c2Ugc3RyaWN0Ijt2YXIgVD17fTtULnJlbmRlcj1mdW5jdGlvbihyLGMpe3ZhciBhPXI7YS53cml0ZSgiPGRpdiIpO2Eud3JpdGVDb250cm9sRGF0YShjKTthLmFkZENsYXNzKCJzYXBVaVZpZXciKTthLmFkZENsYXNzKCJzYXBVaVRtcGxWaWV3Iik7Vi5hZGREaXNwbGF5Q2xhc3MoYSxjKTthLmFkZFN0eWxlKCJ3aWR0aCIsYy5nZXRXaWR0aCgpKTthLmFkZFN0eWxlKCJoZWlnaHQiLGMuZ2V0SGVpZ2h0KCkpO2Eud3JpdGVTdHlsZXMoKTthLndyaXRlQ2xhc3NlcygpO2Eud3JpdGUoIj4iKTthLnJlbmRlckNvbnRyb2woYy5fb1RlbXBsYXRlKTthLndyaXRlKCI8L2Rpdj4iKX07cmV0dXJuIFR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5yb3V0aW5nLkhhc2hDaGFuZ2VyJykpewovLyBDb3B5cmlnaHQgKGMpIDIwMTMgU0FQIEFHLCBBbGwgUmlnaHRzIFJlc2VydmVkCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUucm91dGluZy5IYXNoQ2hhbmdlcicpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkuc2lnbmFscycpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkuaGFzaGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvcm91dGluZy9IYXNoQ2hhbmdlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInLCdzYXAvdWkvdGhpcmRwYXJ0eS9zaWduYWxzJywnc2FwL3VpL3RoaXJkcGFydHkvaGFzaGVyJ10sZnVuY3Rpb24ocSxFLHMsaCl7InVzZSBzdHJpY3QiO3ZhciBIPUUuZXh0ZW5kKCJzYXAudWkuY29yZS5yb3V0aW5nLkhhc2hDaGFuZ2VyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtFLmFwcGx5KHRoaXMpfX0pO0gucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9pbml0aWFsaXplZCl7cS5zYXAubG9nLmluZm8oInRoaXMgSGFzaENoYW5nZXIgaW5zdGFuY2UgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZC4iKTtyZXR1cm4gZmFsc2V9aGFzaGVyLmNoYW5nZWQuYWRkKHRoaXMuZmlyZUhhc2hDaGFuZ2VkLHRoaXMpO2lmKCFoYXNoZXIuaXNBY3RpdmUoKSl7aGFzaGVyLmluaXRpYWxpemVkLmFkZE9uY2UodGhpcy5maXJlSGFzaENoYW5nZWQsdGhpcyk7aGFzaGVyLmluaXQoKX1lbHNle3RoaXMuZmlyZUhhc2hDaGFuZ2VkKGhhc2hlci5nZXRIYXNoKCkpfXRoaXMuX2luaXRpYWxpemVkPXRydWU7cmV0dXJuIHRoaXMuX2luaXRpYWxpemVkfTtILnByb3RvdHlwZS5maXJlSGFzaENoYW5nZWQ9ZnVuY3Rpb24obixvKXt0aGlzLmZpcmVFdmVudCgiaGFzaENoYW5nZWQiLHtuZXdIYXNoOm4sb2xkSGFzaDpvfSl9O0gucHJvdG90eXBlLnNldEhhc2g9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoImhhc2hTZXQiLHtzSGFzaDphfSk7aGFzaGVyLnNldEhhc2goYSl9O0gucHJvdG90eXBlLnJlcGxhY2VIYXNoPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJoYXNoUmVwbGFjZWQiLHtzSGFzaDphfSk7aGFzaGVyLnJlcGxhY2VIYXNoKGEpfTtILnByb3RvdHlwZS5nZXRIYXNoPWZ1bmN0aW9uKCl7cmV0dXJuIGhhc2hlci5nZXRIYXNoKCl9O0gucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtoYXNoZXIuY2hhbmdlZC5yZW1vdmUodGhpcy5maXJlSGFzaENoYW5nZWQsdGhpcyk7RS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9OyhmdW5jdGlvbigpe3ZhciBfPW51bGw7SC5nZXRJbnN0YW5jZT1mdW5jdGlvbigpe2lmKCFfKXtfPW5ldyBIKCl9cmV0dXJuIF99O0gucmVwbGFjZUhhc2hDaGFuZ2VyPWZ1bmN0aW9uKG8pe2lmKF8pe3EuZXh0ZW5kKG8ubUV2ZW50UmVnaXN0cnksXy5tRXZlbnRSZWdpc3RyeSk7Xy5kZXN0cm95KCl9Xz1vfX0oKSk7cmV0dXJuIEh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5yb3V0aW5nLkhpc3RvcnknKSl7Ci8qIQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvcm91dGluZy9IaXN0b3J5IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9IYXNoQ2hhbmdlciddLGZ1bmN0aW9uKHEsSCl7InVzZSBzdHJpY3QiO3ZhciBhPWZ1bmN0aW9uKGgpe3RoaXMuX2lIaXN0b3J5TGVuZ3RoPXdpbmRvdy5oaXN0b3J5Lmxlbmd0aDt0aGlzLmFIaXN0b3J5PVtdO3RoaXMuX2JJc0luaXRpYWw9dHJ1ZTtpZighaCl7cS5zYXAubG9nLmVycm9yKCJzYXAudWkuY29yZS5yb3V0aW5nLkhpc3RvcnkgY29uc3RydWN0b3Igd2FzIGNhbGxlZCBhbmQgaXQgZGlkIG5vdCBnZXQgYSBoYXNoQ2hhbmdlciBhcyBwYXJhbWV0ZXIiKX10aGlzLl9vSGFzaENoYW5nZXI9aDt0aGlzLl9vSGFzaENoYW5nZXIuYXR0YWNoRXZlbnQoImhhc2hDaGFuZ2VkIix0aGlzLl9vbkhhc2hDaGFuZ2UsdGhpcyk7dGhpcy5fb0hhc2hDaGFuZ2VyLmF0dGFjaEV2ZW50KCJoYXNoUmVwbGFjZWQiLHRoaXMuX2hhc2hSZXBsYWNlZCx0aGlzKTt0aGlzLl9vSGFzaENoYW5nZXIuYXR0YWNoRXZlbnQoImhhc2hTZXQiLHRoaXMuX2hhc2hTZXQsdGhpcyk7dGhpcy5fcmVzZXQoKX07YS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbihuKXt0aGlzLl9vSGFzaENoYW5nZXIuZGV0YWNoRXZlbnQoImhhc2hDaGFuZ2VkIix0aGlzLl9vbkhhc2hDaGFuZ2UsdGhpcyk7dGhpcy5fb0hhc2hDaGFuZ2VyLmRldGFjaEV2ZW50KCJoYXNoUmVwbGFjZWQiLHRoaXMuX2hhc2hSZXBsYWNlZCx0aGlzKTt0aGlzLl9vSGFzaENoYW5nZXIuZGV0YWNoRXZlbnQoImhhc2hTZXQiLHRoaXMuX2hhc2hTZXQsdGhpcyk7dGhpcy5fb0hhc2hDaGFuZ2VyPW51bGx9O2EucHJvdG90eXBlLmdldERpcmVjdGlvbj1mdW5jdGlvbihuKXtpZihuIT09dW5kZWZpbmVkJiZ0aGlzLl9iSXNJbml0aWFsKXtyZXR1cm4gdW5kZWZpbmVkfWlmKG49PT11bmRlZmluZWQpe3JldHVybiB0aGlzLl9zQ3VycmVudERpcmVjdGlvbn1yZXR1cm4gdGhpcy5fZ2V0RGlyZWN0aW9uKG4pfTthLnByb3RvdHlwZS5nZXRQcmV2aW91c0hhc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hSGlzdG9yeVt0aGlzLmlIaXN0b3J5UG9zaXRpb24tMV19O2EucHJvdG90eXBlLl9yZXNldD1mdW5jdGlvbigpe3RoaXMuYUhpc3RvcnkubGVuZ3RoPTA7dGhpcy5pSGlzdG9yeVBvc2l0aW9uPTA7dGhpcy5fYlVua25vd249dHJ1ZTt0aGlzLmFIaXN0b3J5WzBdPXRoaXMuX29IYXNoQ2hhbmdlci5nZXRIYXNoKCl9O2EucHJvdG90eXBlLl9nZXREaXJlY3Rpb249ZnVuY3Rpb24obixoKXt2YXIgZD1zYXAudWkuY29yZS5yb3V0aW5nLkhpc3RvcnlEaXJlY3Rpb247aWYodGhpcy5fb05leHRIYXNoJiZ0aGlzLl9vTmV4dEhhc2guc0hhc2g9PT1uKXtyZXR1cm4gZC5OZXdFbnRyeX1pZih0aGlzLl9iVW5rbm93bil7cmV0dXJuIGQuVW5rbm93bn1pZihoKXtyZXR1cm4gZC5OZXdFbnRyeX1pZih0aGlzLmFIaXN0b3J5W3RoaXMuaUhpc3RvcnlQb3NpdGlvbisxXT09PW4mJnRoaXMuYUhpc3RvcnlbdGhpcy5pSGlzdG9yeVBvc2l0aW9uLTFdPT09bil7cmV0dXJuIGQuVW5rbm93bn1pZih0aGlzLmFIaXN0b3J5W3RoaXMuaUhpc3RvcnlQb3NpdGlvbi0xXT09PW4pe3JldHVybiBkLkJhY2t3YXJkc31pZih0aGlzLmFIaXN0b3J5W3RoaXMuaUhpc3RvcnlQb3NpdGlvbisxXT09PW4pe3JldHVybiBkLkZvcndhcmRzfXJldHVybiBkLlVua25vd259O2EucHJvdG90eXBlLl9vbkhhc2hDaGFuZ2U9ZnVuY3Rpb24oZSl7dGhpcy5faGFzaENoYW5nZShlLmdldFBhcmFtZXRlcigibmV3SGFzaCIpKX07YS5wcm90b3R5cGUuX2hhc2hDaGFuZ2U9ZnVuY3Rpb24obil7dmFyIGQ9c2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5RGlyZWN0aW9uLGI9d2luZG93Lmhpc3RvcnkubGVuZ3RoLEQ7aWYodGhpcy5fb05leHRIYXNoJiZ0aGlzLl9vTmV4dEhhc2guYldhc1JlcGxhY2VkJiZ0aGlzLl9vTmV4dEhhc2guc0hhc2g9PT1uKXt0aGlzLmFIaXN0b3J5W3RoaXMuaUhpc3RvcnlQb3NpdGlvbl09bjt0aGlzLl9vTmV4dEhhc2g9bnVsbDtyZXR1cm59dGhpcy5fYklzSW5pdGlhbD1mYWxzZTtEPXRoaXMuX3NDdXJyZW50RGlyZWN0aW9uPXRoaXMuX2dldERpcmVjdGlvbihuLHRoaXMuX2lIaXN0b3J5TGVuZ3RoPHdpbmRvdy5oaXN0b3J5Lmxlbmd0aCk7aWYodGhpcy5fb05leHRIYXNoJiYhdGhpcy5fb05leHRIYXNoLmJXYXNSZXBsYWNlZCl7dGhpcy5faUhpc3RvcnlMZW5ndGg9YisxfWVsc2V7dGhpcy5faUhpc3RvcnlMZW5ndGg9Yn1pZih0aGlzLl9vTmV4dEhhc2gpe3RoaXMuX29OZXh0SGFzaD1udWxsfWlmKEQ9PT1kLlVua25vd24pe3RoaXMuX3Jlc2V0KCk7cmV0dXJufXRoaXMuX2JVbmtub3duPWZhbHNlO2lmKEQ9PT1kLk5ld0VudHJ5KXtpZih0aGlzLmlIaXN0b3J5UG9zaXRpb24rMTx0aGlzLmFIaXN0b3J5Lmxlbmd0aCl7dGhpcy5hSGlzdG9yeT10aGlzLmFIaXN0b3J5LnNsaWNlKDAsdGhpcy5pSGlzdG9yeVBvc2l0aW9uKzEpfXRoaXMuYUhpc3RvcnkucHVzaChuKTt0aGlzLmlIaXN0b3J5UG9zaXRpb24rPTE7cmV0dXJufWlmKEQ9PT1kLkZvcndhcmRzKXt0aGlzLmlIaXN0b3J5UG9zaXRpb24rKztyZXR1cm59aWYoRD09PWQuQmFja3dhcmRzKXt0aGlzLmlIaXN0b3J5UG9zaXRpb24tLX19O2EucHJvdG90eXBlLl9oYXNoU2V0PWZ1bmN0aW9uKGUpe3RoaXMuX2hhc2hDaGFuZ2VkQnlBcHAoZS5nZXRQYXJhbWV0ZXIoInNIYXNoIiksZmFsc2UpfTthLnByb3RvdHlwZS5faGFzaFJlcGxhY2VkPWZ1bmN0aW9uKGUpe3RoaXMuX2hhc2hDaGFuZ2VkQnlBcHAoZS5nZXRQYXJhbWV0ZXIoInNIYXNoIiksdHJ1ZSl9O2EucHJvdG90eXBlLl9oYXNoQ2hhbmdlZEJ5QXBwPWZ1bmN0aW9uKG4sdyl7dGhpcy5fb05leHRIYXNoPXtzSGFzaDpuLGJXYXNSZXBsYWNlZDp3fX07KGZ1bmN0aW9uKCl7dmFyIGk9bmV3IGEoSC5nZXRJbnN0YW5jZSgpKTthLmdldEluc3RhbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIGl9fSgpKTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnJvdXRpbmcuUm91dGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5yb3V0aW5nLlJvdXRlJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5jcm9zc3JvYWRzJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5zaWduYWxzJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvcm91dGluZy9Sb3V0ZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInLCdzYXAvdWkvdGhpcmRwYXJ0eS9jcm9zc3JvYWRzJywnc2FwL3VpL3RoaXJkcGFydHkvc2lnbmFscyddLGZ1bmN0aW9uKHEsRSxjLHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgUj1FLmV4dGVuZCgic2FwLnVpLmNvcmUucm91dGluZy5Sb3V0ZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHIsQyxwKXtpZighQy5uYW1lKXtxLnNhcC5sb2cuZXJyb3IoIkEgbmFtZSBoYXMgdG8gYmUgc3BlY2lmaWVkIGZvciBldmVyeSByb3V0ZSIpfXZhciB0PXRoaXMsdj1DLnBhdHRlcm47aWYoIXEuaXNBcnJheSh2KSl7dj1bdl19aWYocS5pc0FycmF5KEMuc3Vicm91dGVzKSl7dmFyIFM9Qy5zdWJyb3V0ZXM7Qy5zdWJyb3V0ZXM9e307cS5lYWNoKFMsZnVuY3Rpb24oaSxvKXtDLnN1YnJvdXRlc1tvLm5hbWVdPW99KX10aGlzLl9hUGF0dGVybj1bXTt0aGlzLl9hUm91dGVzPVtdO3RoaXMuX29QYXJlbnQ9cDt0aGlzLl9vQ29uZmlnPUM7aWYoQy5zdWJyb3V0ZXMpe3EuZWFjaChDLnN1YnJvdXRlcyxmdW5jdGlvbihhLG8pe2lmKG8ubmFtZT09dW5kZWZpbmVkKXtvLm5hbWU9YX1yLmFkZFJvdXRlKG8sdCl9KX1pZihDLnBhdHRlcm49PT11bmRlZmluZWQpe3JldHVybn1xLmVhY2godixmdW5jdGlvbihpLGEpe3QuX2FQYXR0ZXJuW2ldPWE7dC5fYVJvdXRlc1tpXT1yLl9vUm91dGVyLmFkZFJvdXRlKGEpO3QuX2FSb3V0ZXNbaV0ubWF0Y2hlZC5hZGQoZnVuY3Rpb24oKXt2YXIgQT17fTtxLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGIsZCl7QVt0Ll9hUm91dGVzW2ldLl9wYXJhbXNJZHNbYl1dPWR9KTt0Ll9yb3V0ZU1hdGNoZWQocixBLHRydWUpfSl9KX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJnZXRVUkwiLCJnZXRQYXR0ZXJuIl19fSk7Ui5wcm90b3R5cGUuZ2V0VVJMPWZ1bmN0aW9uKHApe3JldHVybiB0aGlzLl9hUm91dGVzWzBdLmludGVycG9sYXRlKHApfTtSLnByb3RvdHlwZS5nZXRQYXR0ZXJuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FQYXR0ZXJuWzBdfTtSLnByb3RvdHlwZS5fcm91dGVNYXRjaGVkPWZ1bmN0aW9uKHIsYSxpKXt2YXIgdixwLHQsVDtpZih0aGlzLl9vUGFyZW50KXtwPXRoaXMuX29QYXJlbnQuX3JvdXRlTWF0Y2hlZChyLGEpO3Q9cC5vVGFyZ2V0UGFyZW50O1Q9cC5vVGFyZ2V0Q29udHJvbH12YXIgQz1xLmV4dGVuZCh7fSxyLl9vQ29uZmlnLHRoaXMuX29Db25maWcpO2lmKChUfHxDLnRhcmdldENvbnRyb2wpJiZDLnRhcmdldEFnZ3JlZ2F0aW9uKXtpZighdCl7aWYoQy50YXJnZXRQYXJlbnQpe1Q9c2FwLnVpLmdldENvcmUoKS5ieUlkKEMudGFyZ2V0UGFyZW50KS5ieUlkKEMudGFyZ2V0Q29udHJvbCl9fWVsc2V7aWYoQy50YXJnZXRDb250cm9sKXtUPXQuYnlJZChDLnRhcmdldENvbnRyb2wpfX1pZighVCl7VD1zYXAudWkuZ2V0Q29yZSgpLmJ5SWQoQy50YXJnZXRDb250cm9sKX1pZihUKXt2YXIgQT1ULmdldE1ldGFkYXRhKCkuZ2V0SlNPTktleXMoKVtDLnRhcmdldEFnZ3JlZ2F0aW9uXTtpZihBKXt2YXIgVj1DLnZpZXc7aWYoQy52aWV3UGF0aCl7Vj1DLnZpZXdQYXRoKyIuIitWfXY9ci5nZXRWaWV3KFYsQy52aWV3VHlwZSxDLnZpZXdJZCk7aWYoQy5jbGVhclRhcmdldD09PXRydWUpe1RbQS5fc1JlbW92ZUFsbE11dGF0b3JdKCl9VFtBLl9zTXV0YXRvcl0odil9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIkNvbnRyb2wgIitDLnRhcmdldENvbnRyb2wrIiBkb2VzIG5vdCBoYXMgYW4gYWdncmVnYXRpb24gY2FsbGVkICIrQy50YXJnZXRBZ2dyZWdhdGlvbil9fWVsc2V7cS5zYXAubG9nLmVycm9yKCJDb250cm9sIHdpdGggSUQgIitDLnRhcmdldENvbnRyb2wrIiBjb3VsZCBub3QgYmUgZm91bmQiKX19aWYoQy5jYWxsYmFjayl7Qy5jYWxsYmFjayh0aGlzLGEsQyxULHYpfXIuZmlyZVJvdXRlTWF0Y2hlZCh7bmFtZTpDLm5hbWUsYXJndW1lbnRzOmEsdGFyZ2V0Q29udHJvbDpULHZpZXc6dixjb25maWc6Q30pO2lmKGkpe3IuZmlyZVJvdXRlUGF0dGVybk1hdGNoZWQoe25hbWU6Qy5uYW1lLGFyZ3VtZW50czphLHRhcmdldENvbnRyb2w6VCx2aWV3OnYsY29uZmlnOkN9KX1yZXR1cm57b1RhcmdldFBhcmVudDp2LG9UYXJnZXRDb250cm9sOlR9fTtyZXR1cm4gUn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5TZXJpYWxpemVyJykpewovKgogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLlNlcmlhbGl6ZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL3NlcmlhbGl6ZXIvU2VyaWFsaXplciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgUz1FLmV4dGVuZCgic2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLlNlcmlhbGl6ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihyLHMsYix3LGYpe0UuYXBwbHkodGhpcyk7dGhpcy5fb1Jvb3RDb250cm9sPXI7dGhpcy5fZGVsZWdhdGU9czt0aGlzLl9iU2tpcFJvb3Q9ISFiO3RoaXMuX29XaW5kb3c9d3x8d2luZG93O3RoaXMuX2ZuU2tpcEFnZ3JlZ2F0aW9ucz1mfX0pO1MucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZXJpYWxpemVSZWN1cnNpdmUodGhpcy5fb1Jvb3RDb250cm9sLDApfTtTLnByb3RvdHlwZS5fc2VyaWFsaXplUmVjdXJzaXZlPWZ1bmN0aW9uKGMsbCxhLGIpe3ZhciBDPVtdO3ZhciB3PSghdGhpcy5fYlNraXBSb290fHxsIT09MCk7aWYodyl7Yy5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKCk7dmFyIHM9dGhpcy5fZGVsZWdhdGUuc3RhcnQoYyxhLGIpO3ZhciBtPXRoaXMuX2RlbGVnYXRlLm1pZGRsZShjLGEsYik7Qy5wdXNoKHMrbSl9aWYobD09PTB8fCEodGhpcy5fZm5Ta2lwQWdncmVnYXRpb25zJiZ0aGlzLl9mblNraXBBZ2dyZWdhdGlvbnMoYykpKXt2YXIgQT1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsQWdncmVnYXRpb25zKCk7aWYoQSl7Zm9yKHZhciBuIGluIEEpe3ZhciBlPVtdO3ZhciBvPUFbbl07dmFyIHY9Y1tvLl9zR2V0dGVyXSgpO2lmKGMuZ2V0QmluZGluZ1BhdGgobikmJmMuZ2V0QmluZGluZ0luZm8obikudGVtcGxhdGUpe2UucHVzaChjLmdldEJpbmRpbmdJbmZvKG4pLnRlbXBsYXRlKX1lbHNlIGlmKHYmJnYubGVuZ3RoKXtmb3IodmFyIGk9MDtpPHYubGVuZ3RoO2krKyl7dmFyIE89dltpXTtpZihPIGluc3RhbmNlb2YgdGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5FbGVtZW50KXtlLnB1c2goTyl9fX1lbHNlIGlmKHYgaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLkVsZW1lbnQpe2UucHVzaCh2KX1pZihlLmxlbmd0aD4wKXtpZih3KXtDLnB1c2godGhpcy5fZGVsZWdhdGUuc3RhcnRBZ2dyZWdhdGlvbihjLG4pKX12YXIgZD10aGlzLl9pc0RlZmF1bHRBZ2dyZWdhdGlvbihjLG4pO2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXtDLnB1c2godGhpcy5fc2VyaWFsaXplUmVjdXJzaXZlKGVbaV0sbCsxLG4sZCkpfWlmKHcpe0MucHVzaCh0aGlzLl9kZWxlZ2F0ZS5lbmRBZ2dyZWdhdGlvbihjLG4pKX19fX19aWYodyl7dmFyIGY9dGhpcy5fZGVsZWdhdGUuZW5kKGMsYSxiKTtDLnB1c2goZil9cmV0dXJuIEMuam9pbigiIil9O1MucHJvdG90eXBlLl9pc0RlZmF1bHRBZ2dyZWdhdGlvbj1mdW5jdGlvbihjLGEpe3JldHVybiBjLmdldE1ldGFkYXRhKCkuZ2V0RGVmYXVsdEFnZ3JlZ2F0aW9uTmFtZSgpPT09YX07cmV0dXJuIFN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuRGVsZWdhdGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuRGVsZWdhdGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL3NlcmlhbGl6ZXIvZGVsZWdhdGUvRGVsZWdhdGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJ10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIEQ9RS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5kZWxlZ2F0ZS5EZWxlZ2F0ZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7RS5hcHBseSh0aGlzKX19KTtELnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihjLGEsaSl7cmV0dXJuIiJ9O0QucHJvdG90eXBlLm1pZGRsZT1mdW5jdGlvbihjLGEsaSl7cmV0dXJuIiJ9O0QucHJvdG90eXBlLmVuZD1mdW5jdGlvbihjLGEsaSl7cmV0dXJuIiJ9O0QucHJvdG90eXBlLnN0YXJ0QWdncmVnYXRpb249ZnVuY3Rpb24oYyxhKXtyZXR1cm4iIn07RC5wcm90b3R5cGUuZW5kQWdncmVnYXRpb249ZnVuY3Rpb24oYyxhKXtyZXR1cm4iIn07cmV0dXJuIER9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuSFRNTCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5kZWxlZ2F0ZS5IVE1MJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9zZXJpYWxpemVyL2RlbGVnYXRlL0hUTUwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0RlbGVnYXRlJ10sZnVuY3Rpb24ocSxEKXsidXNlIHN0cmljdCI7dmFyIEg9RC5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5kZWxlZ2F0ZS5IVE1MIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZyxHKXtELmFwcGx5KHRoaXMpO3RoaXMuX2ZuR2V0Q29udHJvbElkPWc7dGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lPUd9fSk7SC5wcm90b3R5cGUuc3RhcnRBZ2dyZWdhdGlvbj1mdW5jdGlvbihjLGEpe3JldHVybic8ZGl2IGRhdGEtc2FwLXVpLWFnZ3JlZ2F0aW9uPSInK2ErJyI+J307SC5wcm90b3R5cGUuZW5kQWdncmVnYXRpb249ZnVuY3Rpb24oYyxhKXtyZXR1cm4nPC9kaXY+J307SC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiI8ZGl2In07SC5wcm90b3R5cGUubWlkZGxlPWZ1bmN0aW9uKGMsYSxiKXt2YXIgaD1bXTt2YXIgST0odGhpcy5fZm5HZXRDb250cm9sSWQpP3RoaXMuX2ZuR2V0Q29udHJvbElkKGMpOmMuZ2V0SWQoKTtpZihJLmluZGV4T2YoIl9fIikhPT0wKXtoLnB1c2godGhpcy5fY3JlYXRlQXR0cmlidXRlKCJpZCIsSSkpfWgucHVzaCh0aGlzLl9jcmVhdGVBdHRyaWJ1dGUoImRhdGEtc2FwLXVpLXR5cGUiLGMuZ2V0TWV0YWRhdGEoKS5fc0NsYXNzTmFtZSkpO2lmKGMuYUN1c3RvbVN0eWxlQ2xhc3Nlcyl7dmFyIEM9Yy5hQ3VzdG9tU3R5bGVDbGFzc2VzO3ZhciBkPVtdO2Zvcih2YXIgaT0wO2k8Qy5sZW5ndGg7aSsrKXt2YXIgcz1DW2ldO2lmKCFxLnNhcC5zdGFydHNXaXRoKHMsInNhcE0iKSYmIXEuc2FwLnN0YXJ0c1dpdGgocywic2FwVWkiKSl7ZC5wdXNoKHMpfX1pZihkLmxlbmd0aD4wKXtoLnB1c2godGhpcy5fY3JlYXRlQXR0cmlidXRlKCJjbGFzcyIsZC5qb2luKCIgIikpKX19aWYodGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lKXt2YXIgZT1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsRXZlbnRzKCk7Zm9yKHZhciBFIGluIGUpe2lmKGMuaGFzTGlzdGVuZXJzKEUpKXt2YXIgZj1jLm1FdmVudFJlZ2lzdHJ5W0VdO2Zvcih2YXIgaT0wO2k8Zi5sZW5ndGg7aSsrKXt2YXIgZz10aGlzLl9mbkdldEV2ZW50SGFuZGxlck5hbWUoZltpXSk7aWYoZyl7aC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiZGF0YS0iK3RoaXMuX2NyZWF0ZUh0bWxBdHRyaWJ1dGVOYW1lKEUpLGcpKTticmVha319fX19dmFyIEE9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEFzc29jaWF0aW9ucygpO3RoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoaCxjLEEsZnVuY3Rpb24obix2KXtpZihBW25dLm11bHRpcGxlKXtyZXR1cm4gdi5qb2luKCIgIil9cmV0dXJuIHZ9LGZ1bmN0aW9uKG4sdil7cmV0dXJuKHYhPT1udWxsJiZ0eXBlb2YgdiE9PXVuZGVmaW5lZCYmdiE9PSIiKX0pO3ZhciBwPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQcm9wZXJ0aWVzKCk7dGhpcy5fY3JlYXRlQXR0cmlidXRlcyhoLGMscCxudWxsLGZ1bmN0aW9uKG4sdil7cmV0dXJuKCEhYy5nZXRCaW5kaW5nSW5mbyhuKXx8KHYhPT1udWxsJiZ0eXBlb2YgdiE9PXVuZGVmaW5lZCYmdiE9PSIiKSl9KTt2YXIgbz1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsQWdncmVnYXRpb25zKCk7dGhpcy5fY3JlYXRlQXR0cmlidXRlcyhoLGMsbyxudWxsLGZ1bmN0aW9uKG4sdil7aWYoIWMuZ2V0QmluZGluZ0luZm8obikmJighdnx8KHR5cGVvZiB2IT09InN0cmluZyIpKSl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfSk7aC5wdXNoKCc+Jyk7cmV0dXJuIGguam9pbignJyl9O0gucHJvdG90eXBlLmVuZD1mdW5jdGlvbihjLGEsaSl7cmV0dXJuIjwvZGl2PiJ9O0gucHJvdG90eXBlLl9jcmVhdGVBdHRyaWJ1dGVzPWZ1bmN0aW9uKGgsYyxvLGcsdil7Zm9yKHZhciBuIGluIG8pe3ZhciBwPW9bbl07dmFyIEc9cC5fc0dldHRlcjtpZihjW0ddKXt2YXIgVj1jW0ddKCk7Vj1nP2cobixWKTpWO2lmKCFjLmdldEJpbmRpbmdJbmZvKG4pKXtpZihWIT09cC5kZWZhdWx0VmFsdWUpe2lmKCF2fHx2KG4sVikpe2gucHVzaCh0aGlzLl9jcmVhdGVBdHRyaWJ1dGUoImRhdGEtIit0aGlzLl9jcmVhdGVIdG1sQXR0cmlidXRlTmFtZShuKSxWKSl9fX1lbHNle2gucHVzaCh0aGlzLl9jcmVhdGVEYXRhQmluZGluZ0F0dHJpYnV0ZShjLG4sVikpfX19fTtILnByb3RvdHlwZS5fY3JlYXRlRGF0YUJpbmRpbmdBdHRyaWJ1dGU9ZnVuY3Rpb24oYyxuLHYpe3ZhciBiPWMuZ2V0QmluZGluZ0luZm8obik7dmFyIEI9bnVsbDt2YXIgcD12O2lmKCFiLmJpbmRpbmdTdHJpbmcpe2lmKGIuYmluZGluZyl7dmFyIEM9Yi5iaW5kaW5nLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpO2lmKEM9PT0ic2FwLnVpLm1vZGVsLlByb3BlcnR5QmluZGluZyJ8fEM9PT0ic2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlUHJvcGVydHlCaW5kaW5nIil7Qj1iLmJpbmRpbmcuZ2V0VmFsdWUoKX19aWYoYi5wYXJ0cyl7Yj1iLnBhcnRzWzBdfXZhciBtPWIubW9kZWw7aWYoQj09PXZ8fEI9PT1udWxsKXtwPSJ7IisobT8obSsiPiIrYi5wYXRoKTpiLnBhdGgpKyJ9In19ZWxzZXtwPWIuYmluZGluZ1N0cmluZ31yZXR1cm4gdGhpcy5fY3JlYXRlQXR0cmlidXRlKCJkYXRhLSIrdGhpcy5fY3JlYXRlSHRtbEF0dHJpYnV0ZU5hbWUobikscCl9O0gucHJvdG90eXBlLl9jcmVhdGVBdHRyaWJ1dGU9ZnVuY3Rpb24oYSx2KXtyZXR1cm4nICcrYSsnPSInK3YrJyInfTtILnByb3RvdHlwZS5fY3JlYXRlSHRtbEF0dHJpYnV0ZU5hbWU9ZnVuY3Rpb24obil7cmV0dXJuIHEuc2FwLmh5cGhlbihuKX07cmV0dXJuIEh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuWE1MJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLlhNTCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvc2VyaWFsaXplci9kZWxlZ2F0ZS9YTUwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0RlbGVnYXRlJ10sZnVuY3Rpb24ocSxEKXsidXNlIHN0cmljdCI7dmFyIFg9RC5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5kZWxlZ2F0ZS5YTUwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihkLGcsRyxtKXtELmFwcGx5KHRoaXMpO3RoaXMuX3NEZWZhdWx0TmFtZXNwYWNlPWQ7dGhpcy5fZm5HZXRDb250cm9sSWQ9Zzt0aGlzLl9mbk1lbW9yaXplUGFja2FnZT1tO3RoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZT1HfX0pO1gucHJvdG90eXBlLnN0YXJ0QWdncmVnYXRpb249ZnVuY3Rpb24oYyxhKXtyZXR1cm4nPCcrdGhpcy5fY3JlYXRlQWdncmVnYXRpb25OYW1lKGMsYSkrJz4nfTtYLnByb3RvdHlwZS5lbmRBZ2dyZWdhdGlvbj1mdW5jdGlvbihjLGEpe3JldHVybic8LycrdGhpcy5fY3JlYXRlQWdncmVnYXRpb25OYW1lKGMsYSkrJz4nfTtYLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihjLGEsaSl7cmV0dXJuIjwiK3RoaXMuX2NyZWF0ZVRhZ05hbWUoYyl9O1gucHJvdG90eXBlLmVuZD1mdW5jdGlvbihjLGEsaSl7cmV0dXJuIjwvIit0aGlzLl9jcmVhdGVUYWdOYW1lKGMpKyI+In07WC5wcm90b3R5cGUubWlkZGxlPWZ1bmN0aW9uKGMsYSxiKXt2YXIgeD1bXTt2YXIgST0odGhpcy5fZm5HZXRDb250cm9sSWQpP3RoaXMuX2ZuR2V0Q29udHJvbElkKGMpOmMuZ2V0SWQoKTtpZihJLmluZGV4T2YoIl9fIikhPT0wKXt4LnB1c2godGhpcy5fY3JlYXRlQXR0cmlidXRlKCJpZCIsSSkpfWlmKGMuYUN1c3RvbVN0eWxlQ2xhc3Nlcyl7dmFyIEM9Yy5hQ3VzdG9tU3R5bGVDbGFzc2VzO3ZhciBkPVtdO2Zvcih2YXIgaT0wO2k8Qy5sZW5ndGg7aSsrKXt2YXIgcz1DW2ldO2lmKCFxLnNhcC5zdGFydHNXaXRoKHMsInNhcE0iKSYmIXEuc2FwLnN0YXJ0c1dpdGgocywic2FwVWkiKSl7ZC5wdXNoKHMpfX1pZihkLmxlbmd0aD4wKXt4LnB1c2godGhpcy5fY3JlYXRlQXR0cmlidXRlKCJjbGFzcyIsZC5qb2luKCIgIikpKX19aWYodGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lKXt2YXIgZT1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsRXZlbnRzKCk7Zm9yKHZhciBFIGluIGUpe2lmKGMuaGFzTGlzdGVuZXJzKEUpKXt2YXIgZj1jLm1FdmVudFJlZ2lzdHJ5W0VdO2Zvcih2YXIgaT0wO2k8Zi5sZW5ndGg7aSsrKXt2YXIgaD10aGlzLl9mbkdldEV2ZW50SGFuZGxlck5hbWUoZltpXSk7aWYoaCl7eC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZShFLGgpKTticmVha319fX19dmFyIEE9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEFzc29jaWF0aW9ucygpO3RoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoeCxjLEEsZnVuY3Rpb24obix2KXtpZihBW25dLm11bHRpcGxlKXtyZXR1cm4gdi5qb2luKCIgIil9cmV0dXJuIHZ9LGZ1bmN0aW9uKG4sdil7cmV0dXJuKHYhPT1udWxsJiZ0eXBlb2YgdiE9PXVuZGVmaW5lZCYmdiE9PSIiKX0pO3ZhciBwPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQcm9wZXJ0aWVzKCk7dGhpcy5fY3JlYXRlQXR0cmlidXRlcyh4LGMscCxudWxsLGZ1bmN0aW9uKG4sdil7cmV0dXJuKCEhYy5nZXRCaW5kaW5nSW5mbyhuKXx8KHYhPT1udWxsJiZ0eXBlb2YgdiE9PXVuZGVmaW5lZCYmdiE9PSIiKSl9KTt2YXIgbz1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsQWdncmVnYXRpb25zKCk7dGhpcy5fY3JlYXRlQXR0cmlidXRlcyh4LGMsbyxudWxsLGZ1bmN0aW9uKG4sdil7aWYoIWMuZ2V0QmluZGluZ0luZm8obikmJighdnx8KHR5cGVvZiB2IT09InN0cmluZyIpKSl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfSk7eC5wdXNoKCc+Jyk7cmV0dXJuIHguam9pbignJyl9O1gucHJvdG90eXBlLl9jcmVhdGVBdHRyaWJ1dGVzPWZ1bmN0aW9uKHgsYyxvLGcsdil7Zm9yKHZhciBuIGluIG8pe3ZhciBwPW9bbl07dmFyIEc9cC5fc0dldHRlcjtpZihjW0ddKXt2YXIgVj1jW0ddKCk7Vj1nP2cobixWKTpWO2lmKCFjLmdldEJpbmRpbmdJbmZvKG4pKXtpZihWIT09cC5kZWZhdWx0VmFsdWUpe2lmKCF2fHx2KG4sVikpe3gucHVzaCh0aGlzLl9jcmVhdGVBdHRyaWJ1dGUobixWKSl9fX1lbHNle3gucHVzaCh0aGlzLl9jcmVhdGVEYXRhQmluZGluZ0F0dHJpYnV0ZShjLG4sVikpfX19fTtYLnByb3RvdHlwZS5fY3JlYXRlRGF0YUJpbmRpbmdBdHRyaWJ1dGU9ZnVuY3Rpb24oYyxuLHYpe3ZhciBiPWMuZ2V0QmluZGluZ0luZm8obik7dmFyIEI9bnVsbDt2YXIgcD12O2lmKCFiLmJpbmRpbmdTdHJpbmcpe2lmKGIuYmluZGluZyl7dmFyIEM9Yi5iaW5kaW5nLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpO2lmKEM9PT0ic2FwLnVpLm1vZGVsLlByb3BlcnR5QmluZGluZyJ8fEM9PT0ic2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlUHJvcGVydHlCaW5kaW5nIil7Qj1iLmJpbmRpbmcuZ2V0VmFsdWUoKX19aWYoYi5wYXJ0cyl7Yj1iLnBhcnRzWzBdfXZhciBtPWIubW9kZWw7aWYoQj09PXZ8fEI9PT1udWxsKXtwPSJ7IisobT8obSsiPiIrYi5wYXRoKTpiLnBhdGgpKyJ9In19ZWxzZXtwPWIuYmluZGluZ1N0cmluZ31yZXR1cm4gdGhpcy5fY3JlYXRlQXR0cmlidXRlKG4scCl9O1gucHJvdG90eXBlLl9jcmVhdGVBdHRyaWJ1dGU9ZnVuY3Rpb24oYSx2KXtyZXR1cm4nICcrYSsnPSInK3YrJyInfTtYLnByb3RvdHlwZS5fY3JlYXRlVGFnTmFtZT1mdW5jdGlvbihjKXt2YXIgQz1jLmdldE1ldGFkYXRhKCkuX3NDbGFzc05hbWU7dmFyIGw9Qy5sYXN0SW5kZXhPZigiLiIpO3ZhciBzPShsPT09LTEpP0M6Qy5zdWJzdHJpbmcobCsxKTt2YXIgcD0obD09PS0xKT9DOkMuc3Vic3RyaW5nKDAsbCk7aWYodGhpcy5fZm5NZW1vcml6ZVBhY2thZ2Upe3RoaXMuX2ZuTWVtb3JpemVQYWNrYWdlKGMscCl9cmV0dXJuIHRoaXMuX2NyZWF0ZU5hbWVzcGFjZShwLHMpfTtYLnByb3RvdHlwZS5fY3JlYXRlQWdncmVnYXRpb25OYW1lPWZ1bmN0aW9uKGMsYSl7dmFyIEM9Yy5nZXRNZXRhZGF0YSgpLl9zQ2xhc3NOYW1lO3ZhciBsPUMubGFzdEluZGV4T2YoIi4iKTt2YXIgcD0obD09PS0xKT9DOkMuc3Vic3RyaW5nKDAsbCk7cmV0dXJuIHRoaXMuX2NyZWF0ZU5hbWVzcGFjZShwLGEpfTtYLnByb3RvdHlwZS5fY3JlYXRlTmFtZXNwYWNlPWZ1bmN0aW9uKG4sTil7aWYodGhpcy5fc0RlZmF1bHROYW1lc3BhY2UmJnRoaXMuX3NEZWZhdWx0TmFtZXNwYWNlPT09bil7cmV0dXJuIE59ZWxzZXtyZXR1cm4gbisiOiIrTn19O3JldHVybiBYfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUud3MuV2ViU29ja2V0JykpewovKiEKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLndzLldlYlNvY2tldCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3dzL1dlYlNvY2tldCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9EZXZpY2UnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnLi9SZWFkeVN0YXRlJ10sZnVuY3Rpb24ocSxELEUsUil7InVzZSBzdHJpY3QiO3ZhciBXPUUuZXh0ZW5kKCJzYXAudWkuY29yZS53cy5XZWJTb2NrZXQiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbih1LHApe0UuYXBwbHkodGhpcyk7aWYoIUQuc3VwcG9ydC53ZWJzb2NrZXQpe3Rocm93IG5ldyBFcnJvcigiQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFdlYlNvY2tldHMuIil9aWYodHlwZW9mKHUpIT09InN0cmluZyIpe3Rocm93IG5ldyBFcnJvcigic1VybCBtdXN0IGJlIGEgc3RyaW5nLiIpfWlmKHR5cGVvZihwKSE9PSd1bmRlZmluZWQnJiYhcS5pc0FycmF5KHApJiZ0eXBlb2YocCkhPT0nc3RyaW5nJyl7dGhyb3cgbmV3IEVycm9yKCJhUHJvdG9jb2xzIG11c3QgYmUgYSBzdHJpbmcsIGFycmF5IG9mIHN0cmluZ3Mgb3IgdW5kZWZpbmVkLiIpfXRoaXMuX29wZW5Db25uZWN0aW9uKHUscCl9LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsic2VuZCIsImNsb3NlIiwiZ2V0UmVhZHlTdGF0ZSIsImdldFByb3RvY29sIl19fSk7Vy5wcm90b3R5cGUuZ2V0SW50ZXJmYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O1cuTV9FVkVOVFM9e09wZW46Im9wZW4iLENsb3NlOiJjbG9zZSIsRXJyb3I6ImVycm9yIixNZXNzYWdlOiJtZXNzYWdlIn07Vy5wcm90b3R5cGUuYXR0YWNoT3Blbj1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgib3BlbiIsZCxmLGwpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5kZXRhY2hPcGVuPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgib3BlbiIsZixsKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZmlyZU9wZW49ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoIm9wZW4iLGEpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5hdHRhY2hDbG9zZT1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiY2xvc2UiLGQsZixsKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZGV0YWNoQ2xvc2U9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJjbG9zZSIsZixsKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZmlyZUNsb3NlPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJjbG9zZSIsYSk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmF0dGFjaEVycm9yPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJlcnJvciIsZCxmLGwpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5kZXRhY2hFcnJvcj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImVycm9yIixmLGwpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5maXJlRXJyb3I9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoImVycm9yIixhKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuYXR0YWNoTWVzc2FnZT1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgibWVzc2FnZSIsZCxmLGwpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5kZXRhY2hNZXNzYWdlPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgibWVzc2FnZSIsZixsKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZmlyZU1lc3NhZ2U9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoIm1lc3NhZ2UiLGEpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5fcmVzb2x2ZUZ1bGxVcmw9ZnVuY3Rpb24odSl7dmFyIGY9Jyc7aWYoIS9ed3NzPzpcL1wvLy50ZXN0KHUpKXt2YXIgbD1kb2N1bWVudC5sb2NhdGlvbjtmPSgobC5wcm90b2NvbD09PSdodHRwczonKT8nd3NzOi8vJzond3M6Ly8nKStsLmhvc3Q7aWYodS5zdWJzdHIoMCwxKT09PScvJyl7Zis9dX1lbHNle2YrPWwucGF0aG5hbWUuc3Vic3RyaW5nKDAsbC5wYXRobmFtZS5sYXN0SW5kZXhPZignLycpKSsnLycrdX19ZWxzZXtmPXV9cmV0dXJuIGZ9O1cucHJvdG90eXBlLl9vcGVuQ29ubmVjdGlvbj1mdW5jdGlvbih1LHApe3ZhciB1PXRoaXMuX3Jlc29sdmVGdWxsVXJsKHUpO3RoaXMuX29Xcz0odHlwZW9mKHApPT09J3VuZGVmaW5lZCcpP25ldyB3aW5kb3cuV2ViU29ja2V0KHUpOm5ldyB3aW5kb3cuV2ViU29ja2V0KHUscCk7dGhpcy5fb1dzLm9ub3Blbj1xLnByb3h5KHRoaXMuX29ub3Blbix0aGlzKTt0aGlzLl9vV3Mub25jbG9zZT1xLnByb3h5KHRoaXMuX29uY2xvc2UsdGhpcyk7dGhpcy5fb1dzLm9ubWVzc2FnZT1xLnByb3h5KHRoaXMuX29ubWVzc2FnZSx0aGlzKTt0aGlzLl9vV3Mub25lcnJvcj1xLnByb3h5KHRoaXMuX29uZXJyb3IsdGhpcyl9O1cucHJvdG90eXBlLl9vbm9wZW49ZnVuY3Rpb24oKXt0aGlzLmZpcmVPcGVuKCl9O1cucHJvdG90eXBlLl9vbmNsb3NlPWZ1bmN0aW9uKGMpe3RoaXMuZmlyZUNsb3NlKHtjb2RlOmMuY29kZSxyZWFzb246Yy5yZWFzb24sd2FzQ2xlYW46Yy53YXNDbGVhbn0pfTtXLnByb3RvdHlwZS5fb25lcnJvcj1mdW5jdGlvbihlKXt0aGlzLmZpcmVFcnJvcigpfTtXLnByb3RvdHlwZS5fb25tZXNzYWdlPWZ1bmN0aW9uKG0pe3RoaXMuZmlyZU1lc3NhZ2Uoe2RhdGE6bS5kYXRhfSl9O1cucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24obSl7aWYodGhpcy5nZXRSZWFkeVN0YXRlKCk9PT1SLk9QRU4pe3RoaXMuX29Xcy5zZW5kKG0pfWVsc2UgaWYodGhpcy5nZXRSZWFkeVN0YXRlKCk9PT1SLkNPTk5FQ1RJTkcpe3RoaXMuYXR0YWNoRXZlbnRPbmNlKCJvcGVuIixmdW5jdGlvbihlKXt0aGlzLl9vV3Muc2VuZChtKX0pfWVsc2V7cS5zYXAubG9nLndhcm5pbmcoIlVuYWJsZSB0byBzZW5kIFdlYlNvY2tldCBtZXNzYWdlLiAiKyJDb25uZWN0aW9uIGlzIGFscmVhZHkgY2xvc2VkIG9yIGNsb3NpbmcuIG1lc3NhZ2U6ICIrbSl9cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKGMscil7aWYodHlwZW9mKGMpPT09J3N0cmluZycpe3I9YztjPXVuZGVmaW5lZH1jPSh0eXBlb2YoYyk9PT0ndW5kZWZpbmVkJyk/MTAwMDpjO3I9KHR5cGVvZihyKT09PSd1bmRlZmluZWQnKT8iIjpyO2lmKHRoaXMuZ2V0UmVhZHlTdGF0ZSgpPT09Ui5PUEVOKXt0aGlzLl9vV3MuY2xvc2UoYyxyKX1lbHNlIGlmKHRoaXMuZ2V0UmVhZHlTdGF0ZSgpPT09Ui5DT05ORUNUSU5HKXt0aGlzLmF0dGFjaEV2ZW50T25jZSgib3BlbiIsZnVuY3Rpb24oZSl7dGhpcy5fb1dzLmNsb3NlKGMscil9KX1lbHNle3ZhciB0PScnO3N3aXRjaCh0aGlzLmdldFJlYWR5U3RhdGUoKSl7Y2FzZSBSLkNMT1NFRDp0PSJDb25uZWN0aW9uIGlzIGFscmVhZHkgY2xvc2VkLiI7YnJlYWs7Y2FzZSBSLkNMT1NJTkc6dD0iQ29ubmVjdGlvbiBpcyBhbHJlYWR5IGNsb3NpbmcuIjticmVha31xLnNhcC5sb2cud2FybmluZygiVW5hYmxlIHRvIGNsb3NlIFdlYlNvY2tldCBjb25uZWN0aW9uLiAiK3QpfXJldHVybiB0aGlzfTtXLnByb3RvdHlwZS5nZXRSZWFkeVN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Xcy5yZWFkeVN0YXRlfTtXLnByb3RvdHlwZS5nZXRQcm90b2NvbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vV3MucHJvdG9jb2x9O3JldHVybiBXfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9CaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlcicsJy4vQ2hhbmdlUmVhc29uJ10sZnVuY3Rpb24ocSxFLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgQj1FLmV4dGVuZCgic2FwLnVpLm1vZGVsLkJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxQKXtFLmFwcGx5KHRoaXMpO3RoaXMub01vZGVsPW07dGhpcy5iUmVsYXRpdmU9IXEuc2FwLnN0YXJ0c1dpdGgocCwnLycpO3RoaXMuc1BhdGg9cDt0aGlzLm9Db250ZXh0PWM7dGhpcy5tUGFyYW1ldGVycz1QO3RoaXMuYkluaXRpYWw9ZmFsc2V9LG1ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbImdldFBhdGgiLCJnZXRDb250ZXh0IiwiZ2V0TW9kZWwiLCJhdHRhY2hDaGFuZ2UiLCJkZXRhY2hDaGFuZ2UiLCJyZWZyZXNoIiwiaXNJbml0aWFsIiwiYXR0YWNoRGF0YVJlcXVlc3RlZCIsImRldGFjaERhdGFSZXF1ZXN0ZWQiLCJhdHRhY2hEYXRhUmVjZWl2ZWQiLCJkZXRhY2hEYXRhUmVjZWl2ZWQiXX19KTtCLnByb3RvdHlwZS5nZXRQYXRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1BhdGh9O0IucHJvdG90eXBlLmdldENvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQ29udGV4dH07Qi5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXtpZih0aGlzLm9Db250ZXh0IT1jKXt0aGlzLm9Db250ZXh0PWM7dGhpcy5fZmlyZUNoYW5nZSgpfX07Qi5wcm90b3R5cGUuZ2V0TW9kZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vTW9kZWx9O0IucHJvdG90eXBlLmF0dGFjaENoYW5nZT1mdW5jdGlvbihmLGwpe2lmKCF0aGlzLmhhc0xpc3RlbmVycygiY2hhbmdlIikpe3RoaXMub01vZGVsLmFkZEJpbmRpbmcodGhpcyl9dGhpcy5hdHRhY2hFdmVudCgiY2hhbmdlIixmLGwpfTtCLnByb3RvdHlwZS5kZXRhY2hDaGFuZ2U9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJjaGFuZ2UiLGYsbCk7aWYoIXRoaXMuaGFzTGlzdGVuZXJzKCJjaGFuZ2UiKSl7dGhpcy5vTW9kZWwucmVtb3ZlQmluZGluZyh0aGlzKX19O0IucHJvdG90eXBlLl9maXJlQ2hhbmdlPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJjaGFuZ2UiLGEpfTtCLnByb3RvdHlwZS5hdHRhY2hEYXRhUmVxdWVzdGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiZGF0YVJlcXVlc3RlZCIsZixsKX07Qi5wcm90b3R5cGUuZGV0YWNoRGF0YVJlcXVlc3RlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImRhdGFSZXF1ZXN0ZWQiLGYsbCl9O0IucHJvdG90eXBlLmZpcmVEYXRhUmVxdWVzdGVkPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJkYXRhUmVxdWVzdGVkIixhKX07Qi5wcm90b3R5cGUuYXR0YWNoRGF0YVJlY2VpdmVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiZGF0YVJlY2VpdmVkIixmLGwpfTtCLnByb3RvdHlwZS5kZXRhY2hEYXRhUmVjZWl2ZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJkYXRhUmVjZWl2ZWQiLGYsbCl9O0IucHJvdG90eXBlLmZpcmVEYXRhUmVjZWl2ZWQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoImRhdGFSZWNlaXZlZCIsYSl9O0IucHJvdG90eXBlLnVwZGF0ZVJlcXVpcmVkPWZ1bmN0aW9uKG0pe3JldHVybiBtJiZ0aGlzLmdldE1vZGVsKCk9PT1tfTtCLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246Qy5DaGFuZ2V9KX07Qi5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihmKXt0aGlzLmNoZWNrVXBkYXRlKGYpfTtCLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7dGhpcy5jaGVja1VwZGF0ZSh0cnVlKTtyZXR1cm4gdGhpc307Qi5wcm90b3R5cGUuX3JlZnJlc2g9ZnVuY3Rpb24oKXt0aGlzLnJlZnJlc2goKX07Qi5wcm90b3R5cGUuaXNJbml0aWFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYkluaXRpYWx9O0IucHJvdG90eXBlLmlzUmVsYXRpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iUmVsYXRpdmV9O0IucHJvdG90eXBlLmF0dGFjaEV2ZW50cz1mdW5jdGlvbihlKXtpZighZSl7cmV0dXJuIHRoaXN9dmFyIHQ9dGhpcztxLmVhY2goZSxmdW5jdGlvbihzLGgpe3ZhciBtPSJhdHRhY2giK3Muc3Vic3RyaW5nKDAsMSkudG9VcHBlckNhc2UoKStzLnN1YnN0cmluZygxKTtpZih0W21dKXt0W21dKGgpfWVsc2V7cS5zYXAubG9nLndhcm5pbmcodC50b1N0cmluZygpKyIgaGFzIG5vIGhhbmRsZXIgZm9yIGV2ZW50ICciK3MrIiciKX19KTtyZXR1cm4gdGhpc307Qi5wcm90b3R5cGUuZGV0YWNoRXZlbnRzPWZ1bmN0aW9uKGUpe2lmKCFlKXtyZXR1cm4gdGhpc312YXIgdD10aGlzO3EuZWFjaChlLGZ1bmN0aW9uKHMsaCl7dmFyIG09ImRldGFjaCIrcy5zdWJzdHJpbmcoMCwxKS50b1VwcGVyQ2FzZSgpK3Muc3Vic3RyaW5nKDEpO2lmKHRbbV0pe3RbbV0oaCl9ZWxzZXtxLnNhcC5sb2cud2FybmluZyh0LnRvU3RyaW5nKCkrIiBoYXMgbm8gaGFuZGxlciBmb3IgZXZlbnQgJyIrcysiJyIpfX0pO3JldHVybiB0aGlzfTtCLnByb3RvdHlwZS5hdHRhY2hSZWZyZXNoPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudCgicmVmcmVzaCIsZixsKX07Qi5wcm90b3R5cGUuZGV0YWNoUmVmcmVzaD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoInJlZnJlc2giLGYsbCl9O0IucHJvdG90eXBlLl9maXJlUmVmcmVzaD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicmVmcmVzaCIsYSl9O3JldHVybiBCfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkNvbnRleHQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ29udGV4dCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9Db250ZXh0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBDPXNhcC51aS5iYXNlLk9iamVjdC5leHRlbmQoInNhcC51aS5tb2RlbC5Db250ZXh0Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwKXtzYXAudWkuYmFzZS5PYmplY3QuYXBwbHkodGhpcyk7dGhpcy5vTW9kZWw9bTt0aGlzLnNQYXRoPXB9LG1ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbImdldE1vZGVsIiwiZ2V0UGF0aCIsImdldFByb3BlcnR5IiwiZ2V0T2JqZWN0Il19fSk7Qy5wcm90b3R5cGUuZ2V0TW9kZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vTW9kZWx9O0MucHJvdG90eXBlLmdldFBhdGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zUGF0aH07Qy5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMub01vZGVsLmdldFByb3BlcnR5KHAsdGhpcyl9O0MucHJvdG90eXBlLmdldE9iamVjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Nb2RlbC5nZXRPYmplY3QodGhpcy5zUGF0aCl9O0MucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1BhdGh9O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkNvbnRleHRCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkNvbnRleHRCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0NvbnRleHRCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9CaW5kaW5nJ10sZnVuY3Rpb24ocSxCKXsidXNlIHN0cmljdCI7dmFyIEM9Qi5leHRlbmQoInNhcC51aS5tb2RlbC5Db250ZXh0QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLFAsZSl7Qi5jYWxsKHRoaXMsbSxwLGMsUCxlKTt0aGlzLm9FbGVtZW50Q29udGV4dD1udWxsO3RoaXMuYkluaXRpYWw9dHJ1ZX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJnZXRFbGVtZW50Q29udGV4dCJdfX0pO0MucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe307Qy5wcm90b3R5cGUuZ2V0Qm91bmRDb250ZXh0PWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLm9FbGVtZW50Q29udGV4dH07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuRmlsdGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkZpbHRlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9GaWx0ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0ZpbHRlck9wZXJhdG9yJ10sZnVuY3Rpb24ocSxGKXsidXNlIHN0cmljdCI7dmFyIGE9c2FwLnVpLmJhc2UuT2JqZWN0LmV4dGVuZCgic2FwLnVpLm1vZGVsLkZpbHRlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHAsbyx2LFYpe2lmKHR5cGVvZiBwPT09Im9iamVjdCImJiFxLmlzQXJyYXkocCkpe3ZhciBmPXA7dGhpcy5zUGF0aD1mLnBhdGg7dGhpcy5zT3BlcmF0b3I9Zi5vcGVyYXRvcjt0aGlzLm9WYWx1ZTE9Zi52YWx1ZTE7dGhpcy5vVmFsdWUyPWYudmFsdWUyO3RoaXMuYUZpbHRlcnM9Zi5maWx0ZXJzfHxmLmFGaWx0ZXJzO3RoaXMuYkFuZD1mLmFuZHx8Zi5iQW5kfWVsc2V7aWYocS5pc0FycmF5KHApKXt0aGlzLmFGaWx0ZXJzPXB9ZWxzZXt0aGlzLnNQYXRoPXB9aWYocS50eXBlKG8pPT09ImJvb2xlYW4iKXt0aGlzLmJBbmQ9b31lbHNle3RoaXMuc09wZXJhdG9yPW99dGhpcy5vVmFsdWUxPXY7dGhpcy5vVmFsdWUyPVZ9aWYocS5pc0FycmF5KHRoaXMuYUZpbHRlcnMpJiYhdGhpcy5zUGF0aCYmIXRoaXMuc09wZXJhdG9yJiYhdGhpcy5vVmFsdWUxJiYhdGhpcy5vVmFsdWUyKXt0aGlzLl9iTXVsdGlGaWx0ZXI9dHJ1ZTtxLmVhY2godGhpcy5hRmlsdGVycyxmdW5jdGlvbihpLGIpe2lmKCEoYiBpbnN0YW5jZW9mIGEpKXtxLnNhcC5sb2cuZXJyb3IoIkZpbHRlciBpbiBBZ2dyZWdhdGlvbiBvZiBNdWx0aSBmaWx0ZXIgaGFzIHRvIGJlIGluc3RhbmNlIG9mIHNhcC51aS5tb2RlbC5GaWx0ZXIiKX19KX1lbHNlIGlmKCF0aGlzLmFGaWx0ZXJzJiZ0aGlzLnNQYXRoIT09dW5kZWZpbmVkJiZ0aGlzLnNPcGVyYXRvciYmdGhpcy5vVmFsdWUxIT09dW5kZWZpbmVkKXt0aGlzLl9iTXVsdGlGaWx0ZXI9ZmFsc2V9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIldyb25nIHBhcmFtZXRlcnMgZGVmaW5lZCBmb3IgZmlsdGVyLiIpfX19KTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5MaXN0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5MaXN0QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9MaXN0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQmluZGluZycsJy4vRmlsdGVyJywnLi9Tb3J0ZXInXSxmdW5jdGlvbihxLEIsRixTKXsidXNlIHN0cmljdCI7dmFyIEw9Qi5leHRlbmQoInNhcC51aS5tb2RlbC5MaXN0QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLHMsZixQKXtCLmNhbGwodGhpcyxtLHAsYyxQKTt0aGlzLmFTb3J0ZXJzPXM7aWYoIXEuaXNBcnJheSh0aGlzLmFTb3J0ZXJzKSYmdGhpcy5hU29ydGVycyBpbnN0YW5jZW9mIFMpe3RoaXMuYVNvcnRlcnM9W3RoaXMuYVNvcnRlcnNdfWVsc2UgaWYoIXEuaXNBcnJheSh0aGlzLmFTb3J0ZXJzKSl7dGhpcy5hU29ydGVycz1bXX10aGlzLmFGaWx0ZXJzPVtdO2lmKCFxLmlzQXJyYXkoZikmJmYgaW5zdGFuY2VvZiBGKXtmPVtmXX1lbHNlIGlmKCFxLmlzQXJyYXkoZikpe2Y9W119dGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzPWY7dGhpcy5iVXNlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb249ZmFsc2V9LG1ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbImdldENvbnRleHRzIiwic29ydCIsImF0dGFjaFNvcnQiLCJkZXRhY2hTb3J0IiwiZmlsdGVyIiwiYXR0YWNoRmlsdGVyIiwiZGV0YWNoRmlsdGVyIiwiZ2V0RGlzdGluY3RWYWx1ZXMiLCJpc0dyb3VwZWQiXX19KTtMLnByb3RvdHlwZS5nZXREaXN0aW5jdFZhbHVlcz1mdW5jdGlvbihwKXtyZXR1cm4gbnVsbH07TC5wcm90b3R5cGUuYXR0YWNoU29ydD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoInNvcnQiLGYsbCl9O0wucHJvdG90eXBlLmRldGFjaFNvcnQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJzb3J0IixmLGwpfTtMLnByb3RvdHlwZS5fZmlyZVNvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInNvcnQiLGEpfTtMLnByb3RvdHlwZS5hdHRhY2hGaWx0ZXI9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJmaWx0ZXIiLGYsbCl9O0wucHJvdG90eXBlLmRldGFjaEZpbHRlcj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImZpbHRlciIsZixsKX07TC5wcm90b3R5cGUuX2ZpcmVGaWx0ZXI9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoImZpbHRlciIsYSl9O0wucHJvdG90eXBlLmlzR3JvdXBlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFTb3J0ZXJzLmxlbmd0aD4wJiYhIXRoaXMuYVNvcnRlcnNbMF0uZm5Hcm91cH07TC5wcm90b3R5cGUuZW5hYmxlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbj10cnVlO2lmKHRoaXMudXBkYXRlKXt0aGlzLnVwZGF0ZSgpfX07cmV0dXJuIEx9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuTW9kZWwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuTW9kZWwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvTW9kZWwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnLi9CaW5kaW5nTW9kZScsJy4vQ29udGV4dCddLGZ1bmN0aW9uKHEsRSxCLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgTT1FLmV4dGVuZCgic2FwLnVpLm1vZGVsLk1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtFLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm9EYXRhPXt9O3RoaXMuYkRlc3Ryb3llZD1mYWxzZTt0aGlzLmFCaW5kaW5ncz1bXTt0aGlzLm1Db250ZXh0cz17fTt0aGlzLmlTaXplTGltaXQ9MTAwO3RoaXMuc0RlZmF1bHRCaW5kaW5nTW9kZT1CLlR3b1dheTt0aGlzLm1TdXBwb3J0ZWRCaW5kaW5nTW9kZXM9eyJPbmVXYXkiOnRydWUsIlR3b1dheSI6dHJ1ZSwiT25lVGltZSI6dHJ1ZX07dGhpcy5iTGVnYWN5U3ludGF4PWZhbHNlfSxtZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJiaW5kUHJvcGVydHkiLCJiaW5kTGlzdCIsImJpbmRUcmVlIiwiYmluZENvbnRleHQiLCJjcmVhdGVCaW5kaW5nQ29udGV4dCIsImRlc3Ryb3lCaW5kaW5nQ29udGV4dCIsImdldFByb3BlcnR5IiwiZ2V0RGVmYXVsdEJpbmRpbmdNb2RlIiwic2V0RGVmYXVsdEJpbmRpbmdNb2RlIiwiaXNCaW5kaW5nTW9kZVN1cHBvcnRlZCIsImF0dGFjaFBhcnNlRXJyb3IiLCJkZXRhY2hQYXJzZUVycm9yIiwiYXR0YWNoUmVxdWVzdENvbXBsZXRlZCIsImRldGFjaFJlcXVlc3RDb21wbGV0ZWQiLCJhdHRhY2hSZXF1ZXN0RmFpbGVkIiwiZGV0YWNoUmVxdWVzdEZhaWxlZCIsImF0dGFjaFJlcXVlc3RTZW50IiwiZGV0YWNoUmVxdWVzdFNlbnQiLCJzZXRTaXplTGltaXQiLCJyZWZyZXNoIiwiaXNMaXN0IiwiZ2V0T2JqZWN0Il19fSk7TS5NX0VWRU5UUz17UGFyc2VFcnJvcjoicGFyc2VFcnJvciIsUmVxdWVzdEZhaWxlZDoicmVxdWVzdEZhaWxlZCIsUmVxdWVzdFNlbnQ6InJlcXVlc3RTZW50IixSZXF1ZXN0Q29tcGxldGVkOiJyZXF1ZXN0Q29tcGxldGVkIn07TS5wcm90b3R5cGUuYXR0YWNoUmVxdWVzdEZhaWxlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgicmVxdWVzdEZhaWxlZCIsZCxmLGwpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5kZXRhY2hSZXF1ZXN0RmFpbGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgicmVxdWVzdEZhaWxlZCIsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZmlyZVJlcXVlc3RGYWlsZWQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInJlcXVlc3RGYWlsZWQiLGEpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5hdHRhY2hQYXJzZUVycm9yPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJwYXJzZUVycm9yIixkLGYsbCk7cmV0dXJuIHRoaXN9O00ucHJvdG90eXBlLmRldGFjaFBhcnNlRXJyb3I9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJwYXJzZUVycm9yIixmLGwpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5maXJlUGFyc2VFcnJvcj1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicGFyc2VFcnJvciIsYSk7cmV0dXJuIHRoaXN9O00ucHJvdG90eXBlLmF0dGFjaFJlcXVlc3RTZW50PWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJyZXF1ZXN0U2VudCIsZCxmLGwpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5kZXRhY2hSZXF1ZXN0U2VudD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoInJlcXVlc3RTZW50IixmLGwpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5maXJlUmVxdWVzdFNlbnQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInJlcXVlc3RTZW50IixhKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuYXR0YWNoUmVxdWVzdENvbXBsZXRlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgicmVxdWVzdENvbXBsZXRlZCIsZCxmLGwpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5kZXRhY2hSZXF1ZXN0Q29tcGxldGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgicmVxdWVzdENvbXBsZXRlZCIsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZmlyZVJlcXVlc3RDb21wbGV0ZWQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInJlcXVlc3RDb21wbGV0ZWQiLGEpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5nZXRPYmplY3Q9ZnVuY3Rpb24ocCxjKXtyZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eShwLGMpfTtNLnByb3RvdHlwZS5nZXRDb250ZXh0PWZ1bmN0aW9uKHApe2lmKCFxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSl7dGhyb3cgbmV3IEVycm9yKCJQYXRoICIrcCsiIG11c3Qgc3RhcnQgd2l0aCBhIC8gIil9dmFyIGM9dGhpcy5tQ29udGV4dHNbcF07aWYoIWMpe2M9bmV3IEModGhpcyxwKTt0aGlzLm1Db250ZXh0c1twXT1jfXJldHVybiBjfTtNLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHAsYyl7dmFyIGk9IXEuc2FwLnN0YXJ0c1dpdGgocCwiLyIpLHI9cCxzO2lmKGkpe2lmKGMpe3M9Yy5nZXRQYXRoKCk7cj1zKyhxLnNhcC5lbmRzV2l0aChzLCIvIik/IiI6Ii8iKStwfWVsc2V7cj10aGlzLmlzTGVnYWN5U3ludGF4KCk/Ii8iK3A6dW5kZWZpbmVkfX1pZihyJiZyIT09Ii8iJiZxLnNhcC5lbmRzV2l0aChyLCIvIikpe3I9ci5zdWJzdHIoMCxyLmxlbmd0aC0xKX1yZXR1cm4gcn07TS5wcm90b3R5cGUuYWRkQmluZGluZz1mdW5jdGlvbihiKXt0aGlzLmFCaW5kaW5ncy5wdXNoKGIpfTtNLnByb3RvdHlwZS5yZW1vdmVCaW5kaW5nPWZ1bmN0aW9uKGIpe2Zvcih2YXIgaT0wO2k8dGhpcy5hQmluZGluZ3MubGVuZ3RoO2krKyl7aWYodGhpcy5hQmluZGluZ3NbaV09PWIpe3RoaXMuYUJpbmRpbmdzLnNwbGljZShpLDEpO2JyZWFrfX19O00ucHJvdG90eXBlLmdldERlZmF1bHRCaW5kaW5nTW9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNEZWZhdWx0QmluZGluZ01vZGV9O00ucHJvdG90eXBlLnNldERlZmF1bHRCaW5kaW5nTW9kZT1mdW5jdGlvbihtKXtpZih0aGlzLmlzQmluZGluZ01vZGVTdXBwb3J0ZWQobSkpe3RoaXMuc0RlZmF1bHRCaW5kaW5nTW9kZT1tfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJCaW5kaW5nIG1vZGUgIittKyIgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIG1vZGVsLiIpfX07TS5wcm90b3R5cGUuaXNCaW5kaW5nTW9kZVN1cHBvcnRlZD1mdW5jdGlvbihtKXtyZXR1cm4obSBpbiB0aGlzLm1TdXBwb3J0ZWRCaW5kaW5nTW9kZXMpfTtNLnByb3RvdHlwZS5zZXRMZWdhY3lTeW50YXg9ZnVuY3Rpb24obCl7dGhpcy5iTGVnYWN5U3ludGF4PWx9O00ucHJvdG90eXBlLmlzTGVnYWN5U3ludGF4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYkxlZ2FjeVN5bnRheH07TS5wcm90b3R5cGUuc2V0U2l6ZUxpbWl0PWZ1bmN0aW9uKHMpe3RoaXMuaVNpemVMaW1pdD1zfTtNLnByb3RvdHlwZS5nZXRJbnRlcmZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihmKXt0aGlzLmNoZWNrVXBkYXRlKGYpfTtNLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXt2YXIgYj10aGlzLmFCaW5kaW5ncy5zbGljZSgwKTtxLmVhY2goYixmdW5jdGlvbihpLG8pe28uY2hlY2tVcGRhdGUoZil9KX07TS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMub0RhdGE9e307dGhpcy5hQmluZGluZ3M9W107dGhpcy5tQ29udGV4dHM9e307dGhpcy5iRGVzdHJveWVkPXRydWU7RS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBNfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLlNlbGVjdGlvbk1vZGVsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLlNlbGVjdGlvbk1vZGVsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL1NlbGVjdGlvbk1vZGVsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBTPUUuZXh0ZW5kKCJzYXAudWkubW9kZWwuU2VsZWN0aW9uTW9kZWwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihzKXtFLmFwcGx5KHRoaXMpO3RoaXMuaVNlbGVjdGlvbk1vZGU9c3x8Uy5TSU5HTEVfU0VMRUNUSU9OO3RoaXMuYVNlbGVjdGVkSW5kaWNlcz1bXTt0aGlzLmlMZWFkSW5kZXg9LTE7dGhpcy5mblNvcnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS1ifTt0aGlzLmZuU29ydFJldmVyc2U9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi1hfX19KTtTLlNJTkdMRV9TRUxFQ1RJT049MDtTLk1VTFRJX1NFTEVDVElPTj0xO1MucHJvdG90eXBlLmdldFNlbGVjdGlvbk1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pU2VsZWN0aW9uTW9kZX07Uy5wcm90b3R5cGUuc2V0U2VsZWN0aW9uTW9kZT1mdW5jdGlvbihzKXt0aGlzLmlTZWxlY3Rpb25Nb2RlPXN8fFMuU0lOR0xFX1NFTEVDVElPTn07Uy5wcm90b3R5cGUuaXNTZWxlY3RlZEluZGV4PWZ1bmN0aW9uKGkpe3JldHVybiBxLmluQXJyYXkoaSx0aGlzLmFTZWxlY3RlZEluZGljZXMpIT09LTF9O1MucHJvdG90eXBlLmdldExlYWRTZWxlY3RlZEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaUxlYWRJbmRleH07Uy5wcm90b3R5cGUuc2V0TGVhZFNlbGVjdGVkSW5kZXg9ZnVuY3Rpb24obCl7dGhpcy5zZXRTZWxlY3Rpb25JbnRlcnZhbChsLGwpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5nZXRNaW5TZWxlY3Rpb25JbmRleD1mdW5jdGlvbigpe2lmKHRoaXMuYVNlbGVjdGVkSW5kaWNlcy5sZW5ndGg+MCl7dmFyIGk9dGhpcy5hU2VsZWN0ZWRJbmRpY2VzLnNvcnQodGhpcy5mblNvcnQpO3JldHVybiBpWzBdfWVsc2V7cmV0dXJuLTF9fTtTLnByb3RvdHlwZS5nZXRNYXhTZWxlY3Rpb25JbmRleD1mdW5jdGlvbigpe2lmKHRoaXMuYVNlbGVjdGVkSW5kaWNlcy5sZW5ndGg+MCl7dmFyIGk9dGhpcy5hU2VsZWN0ZWRJbmRpY2VzLnNvcnQodGhpcy5mblNvcnRSZXZlcnNlKTtyZXR1cm4gaVswXX1lbHNle3JldHVybi0xfX07Uy5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRJbmRpY2VzPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5hU2VsZWN0ZWRJbmRpY2VzLnNvcnQodGhpcy5mblNvcnQpO3JldHVybiBpfTtTLnByb3RvdHlwZS5zZXRTZWxlY3Rpb25JbnRlcnZhbD1mdW5jdGlvbihmLHQpe2lmKHRoaXMuaVNlbGVjdGlvbk1vZGU9PT1TLlNJTkdMRV9TRUxFQ1RJT04pe2Y9dH12YXIgRj1NYXRoLm1pbihmLHQpO3ZhciBUPU1hdGgubWF4KGYsdCk7dmFyIGM9dGhpcy5hU2VsZWN0ZWRJbmRpY2VzLnNsaWNlKCk7dmFyIHM9W107Zm9yKHZhciBpPUY7aTw9VDtpKyspe3MucHVzaChpKTt2YXIgcD1xLmluQXJyYXkoaSxjKTtpZihwPT09LTEpe2MucHVzaChpKX1lbHNle2Muc3BsaWNlKHAsMSl9fXRoaXMuX3VwZGF0ZShzLHQsYyk7cmV0dXJuIHRoaXN9O1MucHJvdG90eXBlLmFkZFNlbGVjdGlvbkludGVydmFsPWZ1bmN0aW9uKGYsdCl7aWYodGhpcy5pU2VsZWN0aW9uTW9kZT09PVMuU0lOR0xFX1NFTEVDVElPTil7cmV0dXJuIHRoaXMuc2V0U2VsZWN0aW9uSW50ZXJ2YWwoZix0KX12YXIgRj1NYXRoLm1pbihmLHQpO3ZhciBUPU1hdGgubWF4KGYsdCk7dmFyIGM9W107dmFyIHM9dGhpcy5hU2VsZWN0ZWRJbmRpY2VzO2Zvcih2YXIgaT1GO2k8PVQ7aSsrKXtpZihxLmluQXJyYXkoaSxzKT09PS0xKXtzLnB1c2goaSk7Yy5wdXNoKGkpfX10aGlzLl91cGRhdGUocyxULGMpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5tb3ZlU2VsZWN0aW9uSW50ZXJ2YWw9ZnVuY3Rpb24ocyxtKXt2YXIgYz1bXTt2YXIgYT10aGlzLmFTZWxlY3RlZEluZGljZXM7dmFyIGw9dGhpcy5pTGVhZEluZGV4O2Zvcih2YXIgaT0wO2k8YS5sZW5ndGg7aSsrKXt2YXIgST1hW2ldO2lmKEk+PXMpe2MucHVzaChhW2ldKTthW2ldKz1tO2MucHVzaChhW2ldKTtpZihJPT09dGhpcy5pTGVhZEluZGV4KXtsKz1tfX19dGhpcy5fdXBkYXRlKGEsbCxjKTtyZXR1cm4gdGhpc307Uy5wcm90b3R5cGUucmVtb3ZlU2VsZWN0aW9uSW50ZXJ2YWw9ZnVuY3Rpb24oZix0KXtpZih0aGlzLmlTZWxlY3Rpb25Nb2RlPT09Uy5TSU5HTEVfU0VMRUNUSU9OKXtmPXR9dmFyIEY9TWF0aC5taW4oZix0KTt2YXIgVD1NYXRoLm1heChmLHQpO3ZhciBjPVtdO3ZhciBzPXRoaXMuYVNlbGVjdGVkSW5kaWNlczt2YXIgbD10aGlzLmlMZWFkSW5kZXg7Zm9yKHZhciBpPUY7aTw9VDtpKyspe3ZhciBJPXEuaW5BcnJheShpLHMpO2lmKEk+LTEpe3Muc3BsaWNlKEksMSk7Yy5wdXNoKGkpfWlmKGk9PT10aGlzLmlMZWFkSW5kZXgpe2w9LTF9fXRoaXMuX3VwZGF0ZShzLGwsYyk7cmV0dXJuIHRoaXN9O1MucHJvdG90eXBlLnNsaWNlU2VsZWN0aW9uSW50ZXJ2YWw9ZnVuY3Rpb24oZix0KXt2YXIgRj1NYXRoLm1pbihmLHQpO3ZhciBUPU1hdGgubWF4KGYsdCk7dmFyIGM9W107dmFyIHI9W107dmFyIG89dGhpcy5hU2VsZWN0ZWRJbmRpY2VzLnNsaWNlKDApO3ZhciBzPXRoaXMuYVNlbGVjdGVkSW5kaWNlczt2YXIgbD10aGlzLmlMZWFkSW5kZXg7dmFyIFI9VC1GKzE7Zm9yKHZhciBJPVQ7ST49RjtJLS0pe3ZhciBhPXEuaW5BcnJheShJLHMpO2lmKGE+LTEpe3Muc3BsaWNlKGEsMSk7ci5wdXNoKEkpfWlmKEk9PT10aGlzLmlMZWFkSW5kZXgpe2w9LTF9fWZvcih2YXIgST0wO0k8cy5sZW5ndGg7SSsrKXt2YXIgTz1zW0ldO2lmKE8+PUYpe3ZhciBuPXNbSV0tUjtpZihPPT09bCl7bD1ufXNbSV09bjtpZihxLmluQXJyYXkobixvKT09PS0xKXtjLnB1c2gobil9fX1mb3IodmFyIGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIEk9b1tvLmxlbmd0aC0xLWldO2lmKHEuaW5BcnJheShJLGMpPT09LTEpe2MucHVzaChJKX19Zm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspe2lmKHEuaW5BcnJheShyW2ldLHMpPT09LTEmJnEuaW5BcnJheShyW2ldLGMpPT09LTEpe2MucHVzaChyW2ldKX19dGhpcy5fdXBkYXRlKHMsbCxjKTtyZXR1cm4gdGhpc307Uy5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb249ZnVuY3Rpb24oKXtpZih0aGlzLmFTZWxlY3RlZEluZGljZXMubGVuZ3RoPjB8fHRoaXMuaUxlYWRJbmRleCE9PS0xKXt0aGlzLl91cGRhdGUoW10sLTEsdGhpcy5hU2VsZWN0ZWRJbmRpY2VzLnNsaWNlKCkpfXJldHVybiB0aGlzfTtTLnByb3RvdHlwZS5hdHRhY2hTZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJzZWxlY3Rpb25DaGFuZ2VkIixkLGYsbCk7cmV0dXJuIHRoaXN9O1MucHJvdG90eXBlLmRldGFjaFNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJzZWxlY3Rpb25DaGFuZ2VkIixmLGwpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5maXJlU2VsZWN0aW9uQ2hhbmdlZD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgic2VsZWN0aW9uQ2hhbmdlZCIsYSk7cmV0dXJuIHRoaXN9O1MucHJvdG90eXBlLl91cGRhdGU9ZnVuY3Rpb24ocyxsLGMpe3ZhciBwPXtyb3dJbmRpY2VzOmMmJmMuc29ydCh0aGlzLmZuU29ydCl9O3RoaXMuYVNlbGVjdGVkSW5kaWNlcz1zO3Aub2xkSW5kZXg9dGhpcy5pTGVhZEluZGV4O2lmKHRoaXMuaUxlYWRJbmRleCE9PWwpe3RoaXMuaUxlYWRJbmRleD1sO3AubGVhZEluZGV4PXRoaXMuaUxlYWRJbmRleH1pZihjLmxlbmd0aD4wfHx0eXBlb2YgcC5sZWFkSW5kZXghPT0idW5kZWZpbmVkIil7dGhpcy5maXJlU2VsZWN0aW9uQ2hhbmdlZChwKX19O3JldHVybiBTfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLlNpbXBsZVR5cGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuU2ltcGxlVHlwZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9TaW1wbGVUeXBlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Gb3JtYXRFeGNlcHRpb24nLCcuL1BhcnNlRXhjZXB0aW9uJywnLi9UeXBlJywnLi9WYWxpZGF0ZUV4Y2VwdGlvbiddLGZ1bmN0aW9uKHEsRixQLFQsVil7InVzZSBzdHJpY3QiO3ZhciBTPVQuZXh0ZW5kKCJzYXAudWkubW9kZWwuU2ltcGxlVHlwZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGYsYyl7VC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zZXRGb3JtYXRPcHRpb25zKGZ8fHt9KTt0aGlzLnNldENvbnN0cmFpbnRzKGN8fHt9KTt0aGlzLnNOYW1lPSJTaW1wbGVUeXBlIn0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsic2V0Q29uc3RyYWludHMiLCJzZXRGb3JtYXRPcHRpb25zIiwiZm9ybWF0VmFsdWUiLCJwYXJzZVZhbHVlIiwidmFsaWRhdGVWYWx1ZSJdfX0pO1MucHJvdG90eXBlLnNldENvbnN0cmFpbnRzPWZ1bmN0aW9uKGMpe3RoaXMub0NvbnN0cmFpbnRzPWN9O1MucHJvdG90eXBlLnNldEZvcm1hdE9wdGlvbnM9ZnVuY3Rpb24oZil7dGhpcy5vRm9ybWF0T3B0aW9ucz1mfTtyZXR1cm4gU30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5UcmVlQmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5UcmVlQmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9UcmVlQmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQmluZGluZyddLGZ1bmN0aW9uKHEsQil7InVzZSBzdHJpY3QiO3ZhciBUPUIuZXh0ZW5kKCJzYXAudWkubW9kZWwuVHJlZUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxmLFApe0IuY2FsbCh0aGlzLG0scCxjLFApO3RoaXMuYUZpbHRlcnM9Zjt0aGlzLmJEaXNwbGF5Um9vdE5vZGU9UCYmUC5kaXNwbGF5Um9vdE5vZGU9PT10cnVlfSxtZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJnZXRSb290Q29udGV4dHMiLCJnZXROb2RlQ29udGV4dHMiLCJoYXNDaGlsZHJlbiIsImZpbHRlciJdfX0pO1QucHJvdG90eXBlLmF0dGFjaEZpbHRlcj1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoIl9maWx0ZXIiLGYsbCl9O1QucHJvdG90eXBlLmRldGFjaEZpbHRlcj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoIl9maWx0ZXIiLGYsbCl9O1QucHJvdG90eXBlLl9maXJlRmlsdGVyPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJfZmlsdGVyIixhKX07cmV0dXJuIFR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuYW5hbHl0aWNzLkFuYWx5dGljYWxCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLmFuYWx5dGljcy5BbmFseXRpY2FsQmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9hbmFseXRpY3MvQW5hbHl0aWNhbEJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvVHJlZUJpbmRpbmcnLCdzYXAvdWkvbW9kZWwvQ2hhbmdlUmVhc29uJywnc2FwL3VpL21vZGVsL1NvcnRlcicsJ3NhcC91aS9tb2RlbC9GaWx0ZXJPcGVyYXRvcicsJy4vb2RhdGE0YW5hbHl0aWNzJ10sZnVuY3Rpb24ocSxULEMsUyxGLG8peyJ1c2Ugc3RyaWN0Ijt2YXIgQT1ULmV4dGVuZCgic2FwLnVpLm1vZGVsLmFuYWx5dGljcy5BbmFseXRpY2FsQmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLHMsZixQKXtULmNhbGwodGhpcyxtLHAsYyxmLFApO3RoaXMuc0VudGl0eVNldE5hbWU9KFAmJlAuZW50aXR5U2V0KT9QLmVudGl0eVNldDp1bmRlZmluZWQ7dGhpcy5iQXJ0aWZpY2FsUm9vdENvbnRleHQ9ZmFsc2U7dGhpcy5hR2xvYmFsRmlsdGVyPWY7dGhpcy5hR2xvYmFsU29ydGVyPXM7dGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbD1bXTt0aGlzLmFBZ2dyZWdhdGlvbkxldmVsPVtdO3RoaXMub1BlbmRpbmdSZXF1ZXN0cz17fTt0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZT1bXTt0aGlzLm9Hcm91cGVkUmVxdWVzdHM9e307dGhpcy5iVXNlQmF0Y2hSZXF1ZXN0cz0oUCYmUC51c2VCYXRjaFJlcXVlc3RzPT09dHJ1ZSk/dHJ1ZTpmYWxzZTt0aGlzLmJQcm92aWRlVG90YWxTaXplPShQJiZQLnByb3ZpZGVUb3RhbFJlc3VsdFNpemU9PT1mYWxzZSk/ZmFsc2U6dHJ1ZTt0aGlzLmJQcm92aWRlR3JhbmRUb3RhbHM9KFAmJlAucHJvdmlkZUdyYW5kVG90YWxzPT09ZmFsc2UpP2ZhbHNlOnRydWU7dGhpcy5hUmVxdWVzdFF1ZXVlPVtdO3RoaXMuaVRvdGFsU2l6ZT0tMTt0aGlzLm1LZXk9e307dGhpcy5tRmluYWxMZW5ndGg9e307dGhpcy5tTGVuZ3RoPXt9O3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlO3RoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdD10aGlzLm9Nb2RlbC5nZXRBbmFseXRpY2FsRXh0ZW5zaW9ucygpLmZpbmRRdWVyeVJlc3VsdEJ5TmFtZSh0aGlzLl9nZXRFbnRpdHlTZXQoKSk7dGhpcy5hQW5hbHl0aWNhbEluZm89W107dGhpcy5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5PXt9O3RoaXMudXBkYXRlQW5hbHl0aWNhbEluZm8oUD09dW5kZWZpbmVkP1tdOlAuYW5hbHl0aWNhbEluZm8pfX0pO0EucHJvdG90eXBlLmdldFJvb3RDb250ZXh0cz1mdW5jdGlvbihwKXt2YXIgYT0ocCYmcC5udW1iZXJPZkV4cGFuZGVkTGV2ZWxzP3AubnVtYmVyT2ZFeHBhbmRlZExldmVscysxOjEpO3ZhciByPW51bGw7dmFyIFI9dGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOm51bGx9KTtpZih0aGlzLmJBcnRpZmljYWxSb290Q29udGV4dCYmIXRoaXMuX2NsZWFudXBHcm91cGluZ0ZvckNvbXBsZXRlZFJlcXVlc3QoUikpe3JldHVybiBudWxsfWlmKGE8PTEpe3I9dGhpcy5fZ2V0Q29udGV4dHNGb3JQYXJlbnRDb250ZXh0KG51bGwpO2lmKGE9PTEpe3RoaXMuX2NvbnNpZGVyUmVxdWVzdEdyb3VwaW5nKFtSLHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDoiLyJ9KV0pO3RoaXMuZ2V0Tm9kZUNvbnRleHRzKHRoaXMuZ2V0TW9kZWwoKS5nZXRDb250ZXh0KCIvIikse3N0YXJ0SW5kZXg6cC5zdGFydEluZGV4LGxlbmd0aDpwLmxlbmd0aCx0aHJlc2hvbGQ6cC50aHJlc2hvbGQsbGV2ZWw6MCxudW1iZXJPZkV4cGFuZGVkTGV2ZWxzOjB9KX19ZWxzZXtyPXRoaXMuX2dldENvbnRleHRzRm9yUGFyZW50Q29udGV4dChudWxsKTt2YXIgYj10aGlzLl9wcmVwYXJlR3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblJlcXVlc3RJZHMoIi8iLHAubnVtYmVyT2ZFeHBhbmRlZExldmVscyk7Yi5wdXNoKFIpO3RoaXMuX2NvbnNpZGVyUmVxdWVzdEdyb3VwaW5nKGIpO3RoaXMuZ2V0Tm9kZUNvbnRleHRzKHRoaXMuZ2V0TW9kZWwoKS5nZXRDb250ZXh0KCIvIikse3N0YXJ0SW5kZXg6cC5zdGFydEluZGV4LGxlbmd0aDpwLmxlbmd0aCx0aHJlc2hvbGQ6cC50aHJlc2hvbGQsbGV2ZWw6MCxudW1iZXJPZkV4cGFuZGVkTGV2ZWxzOnAubnVtYmVyT2ZFeHBhbmRlZExldmVsc30pfWlmKHIubGVuZ3RoPjEpcS5zYXAubG9nLmZhdGFsKCJhc3NlcnRpb24gZmFpbGVkOiBncmFuZCB0b3RhbCByZXByZXNlbnRlZCBieSBhIHNpbmdsZSBlbnRyeSIpO3JldHVybiByfTtBLnByb3RvdHlwZS5nZXROb2RlQ29udGV4dHM9ZnVuY3Rpb24oYyxwKXt2YXIgcyxsLHQsTCxuO2lmKHR5cGVvZiBwPT0ib2JqZWN0Iil7cz1wLnN0YXJ0SW5kZXg7bD1wLmxlbmd0aDt0PXAudGhyZXNob2xkO0w9cC5sZXZlbDtuPXAubnVtYmVyT2ZFeHBhbmRlZExldmVsc31lbHNle3M9YXJndW1lbnRzWzFdO2w9YXJndW1lbnRzWzJdO3Q9YXJndW1lbnRzWzNdO0w9YXJndW1lbnRzWzRdO249YXJndW1lbnRzWzVdfXZhciBhPXRoaXMuX2dldENvbnRleHRzRm9yUGFyZW50Q29udGV4dChjLHMsbCx0LEwsbik7cmV0dXJuIGF9O0EucHJvdG90eXBlLkNvbnRleHRzQXZhaWxhYmlsaXR5U3RhdHVzPXtBTEw6MixTT01FOjEsTk9ORTowfTtBLnByb3RvdHlwZS5oYXNBdmFpbGFibGVOb2RlQ29udGV4dHM9ZnVuY3Rpb24oYyxsKXt2YXIgZz10aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQoYyxsKTtpZih0aGlzLm1LZXlbZ10hPXVuZGVmaW5lZClpZih0aGlzLm1GaW5hbExlbmd0aFtnXT09dHJ1ZSlyZXR1cm4gQS5wcm90b3R5cGUuQ29udGV4dHNBdmFpbGFiaWxpdHlTdGF0dXMuQUxMO2Vsc2UgcmV0dXJuIEEucHJvdG90eXBlLkNvbnRleHRzQXZhaWxhYmlsaXR5U3RhdHVzLlNPTUU7ZWxzZSByZXR1cm4gQS5wcm90b3R5cGUuQ29udGV4dHNBdmFpbGFiaWxpdHlTdGF0dXMuTk9ORX07QS5wcm90b3R5cGUuZ2V0R3JvdXBTaXplPWZ1bmN0aW9uKGMsbCl7aWYoYz09PXVuZGVmaW5lZClyZXR1cm4gMDt2YXIgZz10aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQoYyxsKTtyZXR1cm4gdGhpcy5tRmluYWxMZW5ndGhbZ10/dGhpcy5tTGVuZ3RoW2ddOi0xfTtBLnByb3RvdHlwZS5nZXRUb3RhbFNpemU9ZnVuY3Rpb24oKXtpZighdGhpcy5iUHJvdmlkZVRvdGFsU2l6ZSlxLnNhcC5sb2cuZmF0YWwoInRvdGFsIHNpemUgb2YgcmVzdWx0IGV4cGxpY2l0bHkgdHVybmVkIG9mZiwgYnV0IGdldHRlciBpbnZva2VkIik7cmV0dXJuIHRoaXMuaVRvdGFsU2l6ZX07QS5wcm90b3R5cGUuaGFzQ2hpbGRyZW49ZnVuY3Rpb24oYyxwKXtpZihjPT09dW5kZWZpbmVkKXJldHVybiBmYWxzZTtpZihjPT1udWxsKXJldHVybiB0cnVlO3ZhciBpPXAubGV2ZWw7aWYoaT09MClyZXR1cm4gdHJ1ZTtpZih0aGlzLmFBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aDxpKXJldHVybiBmYWxzZTtyZXR1cm4gdGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbC5pbmRleE9mKHRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbaS0xXSk8dGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbC5sZW5ndGgtMX07QS5wcm90b3R5cGUuaGFzTWVhc3VyZXM9ZnVuY3Rpb24oKXt2YXIgaD1mYWxzZTtmb3IodmFyIHAgaW4gdGhpcy5vTWVhc3VyZURldGFpbHNTZXQpe2g9dHJ1ZTticmVha31yZXR1cm4gaH07QS5wcm90b3R5cGUuaGFzR3JhbmRUb3RhbERpc3BsYXllZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJQcm92aWRlR3JhbmRUb3RhbHN9O0EucHJvdG90eXBlLmdldEZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0RmlsdGVyYWJsZVByb3BlcnR5TmFtZXMoKX07QS5wcm90b3R5cGUuZ2V0UHJvcGVydHlMYWJlbD1mdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0LmdldEVudGl0eVR5cGUoKS5nZXRMYWJlbE9mUHJvcGVydHkocCl9O0EucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbihmKXt0aGlzLmFQcm9wZXJ0eUZpbHRlcj1mJiZmLmxlbmd0aD4wP2Y6bnVsbDt0aGlzLmlUb3RhbFNpemU9LTE7dGhpcy5fYWJvcnRBbGxQZW5kaW5nUmVxdWVzdHMoKTt0aGlzLnJlc2V0RGF0YSgpO3RoaXMuX2ZpcmVSZWZyZXNoKHtyZWFzb246Qy5GaWx0ZXJ9KTtyZXR1cm4gdGhpc307QS5wcm90b3R5cGUuc29ydD1mdW5jdGlvbihzKXtpZihzIGluc3RhbmNlb2YgUyl7cz1bc119dGhpcy5hUHJvcGVydHlTb3J0ZXI9czt0aGlzLl9hYm9ydEFsbFBlbmRpbmdSZXF1ZXN0cygpO3RoaXMuX2ZpcmVSZWZyZXNoKHtyZWFzb246Qy5Tb3J0fSk7cmV0dXJuIHRoaXN9O0EucHJvdG90eXBlLmdldEdyb3VwTmFtZT1mdW5jdGlvbihjLGwpe2lmKGM9PT11bmRlZmluZWQpcmV0dXJuIiI7dmFyIGc9dGhpcy5hQWdncmVnYXRpb25MZXZlbFtsLTFdLGQ9dGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0LmZpbmREaW1lbnNpb25CeVByb3BlcnR5TmFtZShnKSx2PXRoaXMubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eVtnXS5mb3JtYXR0ZXIscD1jLmdldFByb3BlcnR5KGcpLEQ9cD09bnVsbD8iIjpwLGY9dj92KEQpOkQsRz0oKGQuZ2V0TGFiZWxUZXh0KCkpP2QuZ2V0TGFiZWxUZXh0KCkrJzogJzonJykrZix0PW51bGw7aWYoZCYmdGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldFtnXS50ZXh0UHJvcGVydHlOYW1lKXt0PWQuZ2V0VGV4dFByb3BlcnR5KCl9aWYodCl7dmFyIHM9ZC5nZXRUZXh0UHJvcGVydHkoKS5uYW1lLGE9dGhpcy5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5W2ddLmZvcm1hdHRlcixiPWMuZ2V0UHJvcGVydHkocyksZT1iPT1udWxsPyIiOmIsaD1hP2EoZSk6ZTtpZihoKXtHKz0nIC0gJytofX1yZXR1cm4gR307QS5wcm90b3R5cGUudXBkYXRlQW5hbHl0aWNhbEluZm89ZnVuY3Rpb24oYyl7dmFyIHA9dGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldDt0aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHk9bmV3IE9iamVjdCgpO3RoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWw9bmV3IEFycmF5KCk7dGhpcy5hQWdncmVnYXRpb25MZXZlbD1uZXcgQXJyYXkoKTt0aGlzLmFNZWFzdXJlTmFtZT1uZXcgQXJyYXkoKTt0aGlzLmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXI9KHRoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcj09PXVuZGVmaW5lZD8xOih0aGlzLmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXI+OTk5PzE6dGhpcy5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyKzEpKTt0aGlzLm9NZWFzdXJlRGV0YWlsc1NldD1uZXcgT2JqZWN0KCk7dGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldD1uZXcgT2JqZWN0KCk7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe3ZhciBkPXRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5maW5kRGltZW5zaW9uQnlQcm9wZXJ0eU5hbWUoY1tpXS5uYW1lKTtpZihkJiYoY1tpXS5pblJlc3VsdD09dHJ1ZXx8Y1tpXS52aXNpYmxlPT10cnVlKSl7Y1tpXS5kaW1lbnNpb25Qcm9wZXJ0eU5hbWU9ZC5nZXROYW1lKCk7dmFyIEQ9dGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldFtkLmdldE5hbWUoKV07aWYoIUQpe0Q9bmV3IE9iamVjdCgpO0QubmFtZT1kLmdldE5hbWUoKTtELmFBdHRyaWJ1dGVOYW1lPW5ldyBBcnJheSgpO0QuZ3JvdXBlZD1mYWxzZTt0aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0W2QuZ2V0TmFtZSgpXT1EO3RoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwucHVzaChELm5hbWUpO2lmKGNbaV0uZ3JvdXBlZD09dHJ1ZSl0aGlzLmFBZ2dyZWdhdGlvbkxldmVsLnB1c2goRC5uYW1lKX1pZihjW2ldLmdyb3VwZWQ9PXRydWUpRC5ncm91cGVkPXRydWU7aWYoZC5nZXROYW1lKCk9PWNbaV0ubmFtZSl7RC5rZXlQcm9wZXJ0eU5hbWU9Y1tpXS5uYW1lfXZhciB0PWQuZ2V0VGV4dFByb3BlcnR5KCk7aWYodCYmdC5uYW1lPT1jW2ldLm5hbWUpe0QudGV4dFByb3BlcnR5TmFtZT1jW2ldLm5hbWV9aWYoZC5maW5kQXR0cmlidXRlQnlOYW1lKGNbaV0ubmFtZSkpe0QuYUF0dHJpYnV0ZU5hbWUucHVzaChjW2ldLm5hbWUpfX12YXIgbT10aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQuZmluZE1lYXN1cmVCeVByb3BlcnR5TmFtZShjW2ldLm5hbWUpO2lmKG0mJihjW2ldLmluUmVzdWx0PT10cnVlfHxjW2ldLnZpc2libGU9PXRydWUpKXtjW2ldLm1lYXN1cmVQcm9wZXJ0eU5hbWU9bS5nZXROYW1lKCk7dmFyIE09dGhpcy5vTWVhc3VyZURldGFpbHNTZXRbbS5nZXROYW1lKCldO2lmKCFNKXtNPW5ldyBPYmplY3QoKTtNLm5hbWU9bS5nZXROYW1lKCk7dGhpcy5vTWVhc3VyZURldGFpbHNTZXRbbS5nZXROYW1lKCldPU07dGhpcy5hTWVhc3VyZU5hbWUucHVzaChNLm5hbWUpfWlmKG0uZ2V0UmF3VmFsdWVQcm9wZXJ0eSgpLm5hbWU9PWNbaV0ubmFtZSl7TS5yYXdWYWx1ZVByb3BlcnR5TmFtZT1jW2ldLm5hbWV9dmFyIGY9bS5nZXRGb3JtYXR0ZWRWYWx1ZVByb3BlcnR5KCk7aWYoZiYmZi5uYW1lPT1jW2ldLm5hbWUpe00uZm9ybWF0dGVkVmFsdWVQcm9wZXJ0eU5hbWU9Y1tpXS5uYW1lfX10aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbY1tpXS5uYW1lXT1jW2ldfXZhciBNO2Zvcih2YXIgYSBpbiB0aGlzLm9NZWFzdXJlRGV0YWlsc1NldCl7dmFyIHU9dGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0LmZpbmRNZWFzdXJlQnlOYW1lKGEpLmdldFVuaXRQcm9wZXJ0eSgpO2lmKHUpdGhpcy5vTWVhc3VyZURldGFpbHNTZXRbYV0udW5pdFByb3BlcnR5TmFtZT11Lm5hbWV9dmFyIGI9ZnVuY3Rpb24oZSl7dmFyIG49W107Zm9yKHZhciBnIGluIGUpbi5wdXNoKGcubmFtZSk7cmV0dXJuIG4uc29ydCgpLmpvaW4oIjsiKX07aWYoYihwKSE9Yih0aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0KSl0aGlzLmlUb3RhbFNpemU9LTE7dGhpcy5hQW5hbHl0aWNhbEluZm89Yzt0aGlzLm1GaW5hbExlbmd0aD17fTt0aGlzLm1MZW5ndGg9e307dGhpcy5tS2V5PXt9O3RoaXMubUNvbnRleHRzPXt9O3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlfTtBLnByb3RvdHlwZS5nZXRBbmFseXRpY2FsSW5mb0ZvckNvbHVtbj1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5W2NdfTtBLnByb3RvdHlwZS5sb2FkR3JvdXBzPWZ1bmN0aW9uKGcpe3ZhciBHPW5ldyBBcnJheSgpO2Zvcih2YXIgcyBpbiBnKXtHLnB1c2gocyk7ZGVsZXRlIHRoaXMubUtleVtzXTtkZWxldGUgdGhpcy5tTGVuZ3RoW3NdO2RlbGV0ZSB0aGlzLm1GaW5hbExlbmd0aFtzXTt2YXIgYT1nW3NdO2Zvcih2YXIgaT0wO2k8YS5sZW5ndGg7aSsrKXt2YXIgYj1hW2ldO3RoaXMuX2dldENvbnRleHRzRm9yUGFyZW50R3JvdXBJZChzLGIuc3RhcnRJbmRleCxiLmxlbmd0aCxiLnRocmVzaG9sZCl9dmFyIHI9bmV3IEFycmF5KCk7Zm9yKHZhciBpPS0xLHM7cz1HWysraV07KXtyLnB1c2godGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOnN9KSl9dGhpcy5fY29uc2lkZXJSZXF1ZXN0R3JvdXBpbmcocil9fTtBLnByb3RvdHlwZS5nZXRBbmFseXRpY2FsUXVlcnlSZXN1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0fTtBLl9yZXF1ZXN0VHlwZT17Z3JvdXBNZW1iZXJzUXVlcnk6MSx0b3RhbFNpemVRdWVyeToyLGdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25RdWVyeTozLGxldmVsTWVtYmVyc1F1ZXJ5OjQsfTtBLnByb3RvdHlwZS5fZ2V0Q29udGV4dHNGb3JQYXJlbnRDb250ZXh0PWZ1bmN0aW9uKHAscyxsLHQsTCxuKXtpZihwPT09dW5kZWZpbmVkKXJldHVybltdO2lmKHAmJnAuZ2V0UGF0aCgpPT0iL2FydGlmaWNpYWxSb290Q29udGVudCIpe3A9dGhpcy5nZXRNb2RlbCgpLmdldENvbnRleHQoIi8iKX12YXIgUD10aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQocCxMKTtyZXR1cm4gdGhpcy5fZ2V0Q29udGV4dHNGb3JQYXJlbnRHcm91cElkKFAscyxsLHQsbil9O0EucHJvdG90eXBlLl9nZXRDb250ZXh0c0ZvclBhcmVudEdyb3VwSWQ9ZnVuY3Rpb24ocCxzLGwsdCxuKXtpZihwPT09dW5kZWZpbmVkKXJldHVybltdO2lmKCFzKXM9MDtpZighbClsPXRoaXMub01vZGVsLmlTaXplTGltaXQ7aWYodGhpcy5tRmluYWxMZW5ndGhbcF0mJnRoaXMubUxlbmd0aFtwXTxsKWw9dGhpcy5tTGVuZ3RoW3BdO2lmKCF0KXQ9MDtpZighbiluPTA7dmFyIGMsTCxnLGEsbTt2YXIgRz1uPjAmJnAhPW51bGw7aWYoRyl7YT1bXTttPWwrdDtMPXRydWU7Yz1bXX1lbHNle2M9dGhpcy5fZ2V0TG9hZGVkQ29udGV4dHNGb3JHcm91cChwLHMsbCk7Zz10aGlzLl9jYWxjdWxhdGVSZXF1aXJlZEdyb3VwU2VjdGlvbihwLHMsbCx0LGMpO0w9Yy5sZW5ndGghPWwmJiEodGhpcy5tRmluYWxMZW5ndGhbcF0mJmMubGVuZ3RoPj10aGlzLm1MZW5ndGhbcF0tcyl9aWYoIUwpdGhpcy5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdCh0aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnkse2dyb3VwSWQ6cH0pKTtpZih0aGlzLm9Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl7aWYoTCYmIXRoaXMuX2lzUmVxdWVzdFBlbmRpbmcodGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOnB9KSkpe3ZhciBOPXRoaXMuYlByb3ZpZGVUb3RhbFNpemUmJnRoaXMuaVRvdGFsU2l6ZT09LTEmJiF0aGlzLl9pc1JlcXVlc3RQZW5kaW5nKHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeSkpO2lmKHRoaXMuYlVzZUJhdGNoUmVxdWVzdHMpe3ZhciBNO2lmKEcpe3RoaXMuYVJlcXVlc3RRdWV1ZS5wdXNoKFtBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUXVlcnkscCxhLG0sbl0pO009dGhpcy5fcHJlcGFyZUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25SZXF1ZXN0SWRzKCl9ZWxzZXt0aGlzLmFSZXF1ZXN0UXVldWUucHVzaChbQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnkscCxnLnN0YXJ0SW5kZXgsZy5sZW5ndGhdKTtNPVt0aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnkse2dyb3VwSWQ6cH0pXX1pZihOKXtNLnB1c2godGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5KSk7dGhpcy5fY29uc2lkZXJSZXF1ZXN0R3JvdXBpbmcoTSk7dGhpcy5hUmVxdWVzdFF1ZXVlLnB1c2goW0EuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5XSl9cS5zYXAuZGVsYXllZENhbGwoMCx0aGlzLEEucHJvdG90eXBlLl9wcm9jZXNzUmVxdWVzdFF1ZXVlKX1lbHNle3ZhciBiO3ZhciBNO2lmKEcpe2I9dGhpcy5fcHJlcGFyZUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25RdWVyeVJlcXVlc3QoQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblF1ZXJ5LHAsYSxtLG4pO009Yi5hUmVxdWVzdElkfWVsc2V7Yj10aGlzLl9wcmVwYXJlR3JvdXBNZW1iZXJzUXVlcnlSZXF1ZXN0KEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHAsZy5zdGFydEluZGV4LGcubGVuZ3RoKTtNPVtiLnNSZXF1ZXN0SWRdfXRoaXMuX2V4ZWN1dGVRdWVyeVJlcXVlc3QoYik7aWYoTiYmIWIuYklzRmxhdExpc3RSZXF1ZXN0KXtNLnB1c2godGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5KSk7dGhpcy5fY29uc2lkZXJSZXF1ZXN0R3JvdXBpbmcoTSk7dGhpcy5fZXhlY3V0ZVF1ZXJ5UmVxdWVzdCh0aGlzLl9wcmVwYXJlVG90YWxTaXplUXVlcnlSZXF1ZXN0KEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5KSl9fWlmKHA9PW51bGwpdGhpcy5fYWJvcnRBbGxQZW5kaW5nUmVxdWVzdHMoKX19cmV0dXJuIGN9O0EucHJvdG90eXBlLl9wcm9jZXNzUmVxdWVzdFF1ZXVlPWZ1bmN0aW9uKCl7aWYodGhpcy5hUmVxdWVzdFF1ZXVlLmxlbmd0aD09MClyZXR1cm47dmFyIHI9W107dmFyIGY9ZmFsc2U7Zm9yKHZhciBpPS0xLFI7Uj10aGlzLmFSZXF1ZXN0UXVldWVbKytpXTspe2lmKFJbMF09PUEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5KXt2YXIgYT1BLnByb3RvdHlwZS5fcHJlcGFyZUdyb3VwTWVtYmVyc1F1ZXJ5UmVxdWVzdC5hcHBseSh0aGlzLFIpO2Y9Znx8YS5iSXNGbGF0TGlzdFJlcXVlc3Q7ci5wdXNoKGEpfX1mb3IodmFyIGk9LTEsUjtSPXRoaXMuYVJlcXVlc3RRdWV1ZVsrK2ldOyl7dmFyIGE9bnVsbDtzd2l0Y2goUlswXSl7Y2FzZSBBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeTpjb250aW51ZTtjYXNlIEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5OmlmKCFmKWE9QS5wcm90b3R5cGUuX3ByZXBhcmVUb3RhbFNpemVRdWVyeVJlcXVlc3QuYXBwbHkodGhpcyxSKTticmVhaztkZWZhdWx0OnEuc2FwLmxvZy5mYXRhbCgidW5oYW5kbGVkIHJlcXVlc3QgdHlwZSAiK3RoaXMuYVJlcXVlc3RRdWV1ZVtpXVswXSk7Y29udGludWV9aWYoYSlyLnB1c2goYSl9aWYoci5sZW5ndGg+MSl0aGlzLl9leGVjdXRlQmF0Y2hSZXF1ZXN0KHIpO2Vsc2UgdGhpcy5fZXhlY3V0ZVF1ZXJ5UmVxdWVzdChyWzBdKTt0aGlzLmFSZXF1ZXN0UXVldWU9W119O0EucHJvdG90eXBlLl9wcmVwYXJlR3JvdXBNZW1iZXJzUXVlcnlSZXF1ZXN0PWZ1bmN0aW9uKHIsZyxzLEwpe3ZhciBHPVtdO3ZhciBjPXRoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcjt2YXIgYT1uZXcgby5RdWVyeVJlc3VsdFJlcXVlc3QodGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0KTthLnNldFJlc291cmNlUGF0aCh0aGlzLl9nZXRSZXNvdXJjZVBhdGgoKSk7dmFyIGI9MCxkPS0xO2lmKGcpe0c9dGhpcy5fZ2V0R3JvdXBJZENvbXBvbmVudHMoZyk7Yj1kPUcubGVuZ3RoO3ZhciB1PTA7Zm9yKHZhciBpPTAsZT0wO2k8YjtlKyspe2lmKHRoaXMub0RpbWVuc2lvbkRldGFpbHNTZXRbdGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbFtlXV0uZ3JvdXBlZD09ZmFsc2UpKyt1O2Vsc2UrK2l9Yj1kPWIrdTtpZih0aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aD4wKXt3aGlsZSh0aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0W3RoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWxbZF1dLmdyb3VwZWQ9PWZhbHNlKWlmKCsrZD09dGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbC5sZW5ndGgpYnJlYWt9fXZhciBmPXRoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwuc2xpY2UoMCxkKzEpO2Euc2V0QWdncmVnYXRpb25MZXZlbChmKTtmb3IodmFyIGk9MDtpPGYubGVuZ3RoO2krKyl7dmFyIEQ9dGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldFtmW2ldXTt2YXIgST0oRC5rZXlQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7dmFyIGg9dHJ1ZTthLmluY2x1ZGVEaW1lbnNpb25LZXlUZXh0QXR0cmlidXRlcyhELm5hbWUsdHJ1ZSxoLEQuYUF0dHJpYnV0ZU5hbWUpfXZhciBqPWEuZ2V0RmlsdGVyRXhwcmVzc2lvbigpO2ouY2xlYXIoKTtpZih0aGlzLmFHbG9iYWxGaWx0ZXIpai5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKHRoaXMuYUdsb2JhbEZpbHRlcik7aWYodGhpcy5hUHJvcGVydHlGaWx0ZXIpai5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKHRoaXMuYVByb3BlcnR5RmlsdGVyKTtpZihiPj0xKXtmb3IodmFyIGk9MCxsPUcubGVuZ3RoO2k8bDtpKyspe2ouYWRkQ29uZGl0aW9uKHRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbaV0sRi5FUSxHW2ldKX19dmFyIGs9ISh0aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aC1kLTE+MCk7dmFyIG07dmFyIG47dmFyIHA7dmFyIE07dmFyIHQ9bmV3IEFycmF5KCk7aWYoZyE9bnVsbHx8dGhpcy5iUHJvdmlkZUdyYW5kVG90YWxzKXthLnNldE1lYXN1cmVzKHRoaXMuYU1lYXN1cmVOYW1lKTtmb3IodmFyIHYgaW4gdGhpcy5vTWVhc3VyZURldGFpbHNTZXQpe009dGhpcy5vTWVhc3VyZURldGFpbHNTZXRbdl07aWYoIWsmJnRoaXMubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eVt2XS50b3RhbD09ZmFsc2Upe209ZmFsc2U7bj1mYWxzZTtwPWZhbHNlfWVsc2V7bT0oTS5yYXdWYWx1ZVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtuPShNLmZvcm1hdHRlZFZhbHVlUHJvcGVydHlOYW1lIT11bmRlZmluZWQpO3A9KE0udW5pdFByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtpZihwKXtpZih0LmluZGV4T2YoTS51bml0UHJvcGVydHlOYW1lKT09LTEpe3QucHVzaChNLnVuaXRQcm9wZXJ0eU5hbWUpfX19YS5pbmNsdWRlTWVhc3VyZVJhd0Zvcm1hdHRlZFZhbHVlVW5pdChNLm5hbWUsbSxuLHApfWZvcih2YXIgaSBpbiBmKXt2YXIgdztpZigodz10LmluZGV4T2YoZltpXSkpIT0tMSl0LnNwbGljZSh3LDEpfX12YXIgeD1hLmdldFNvcnRFeHByZXNzaW9uKCk7eC5jbGVhcigpO2lmKCFrKXtmb3IodmFyIGkgaW4gZil7dmFyIHk9by5Tb3J0T3JkZXIuQXNjZW5kaW5nO2lmKHRoaXMubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eVtmW2ldXS5zb3J0ZWQpc3dpdGNoKHRoaXMubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eVtmW2ldXS5zb3J0T3JkZXIpe2Nhc2Ugc2FwLnVpLnRhYmxlLlNvcnRPcmRlci5Bc2NlbmRpbmc6eT1vLlNvcnRPcmRlci5Bc2NlbmRpbmc7YnJlYWs7Y2FzZSBzYXAudWkudGFibGUuU29ydE9yZGVyLkRlc2NlbmRpbmc6eT1vLlNvcnRPcmRlci5EZXNjZW5kaW5nO2JyZWFrfXguYWRkU29ydGVyKGZbaV0seSl9fWlmKHRoaXMuYUdsb2JhbFNvcnRlcil0aGlzLl9hcHBseVVJNVNvcnRlclRvU29ydEV4cHJlc3Npb24odGhpcy5hR2xvYmFsU29ydGVyLHgpO2lmKHRoaXMuYVByb3BlcnR5U29ydGVyKXRoaXMuX2FwcGx5VUk1U29ydGVyVG9Tb3J0RXhwcmVzc2lvbih0aGlzLmFQcm9wZXJ0eVNvcnRlcix4KTtpZihMPT0wKXEuc2FwLmxvZy5mYXRhbCgidW5oYW5kbGVkIGNhc2U6IGxvYWQgMCBlbnRpdGllcyBvZiBzdWIgZ3JvdXAiKTthLnNldFJlc3VsdFBhZ2VCb3VuZGFyaWVzKHMrMSxzK0wpO2Euc2V0UmVxdWVzdE9wdGlvbnMobnVsbCwhdGhpcy5tRmluYWxMZW5ndGhbZ10pO3JldHVybntpUmVxdWVzdFR5cGU6cixzUmVxdWVzdElkOnRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpnfSksb0FuYWx5dGljYWxRdWVyeVJlcXVlc3Q6YSxzR3JvdXBJZDpnLGFTZWxlY3RlZFVuaXRQcm9wZXJ0eU5hbWU6dCxhQWdncmVnYXRpb25MZXZlbDpmLGJJc0ZsYXRMaXN0UmVxdWVzdDprJiZiPT0wLGlTdGFydEluZGV4OnMsaUxlbmd0aDpMfX07QS5wcm90b3R5cGUuX3ByZXBhcmVUb3RhbFNpemVRdWVyeVJlcXVlc3Q9ZnVuY3Rpb24ocil7dmFyIGM9dGhpcy5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyO3ZhciBhPW5ldyBvLlF1ZXJ5UmVzdWx0UmVxdWVzdCh0aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQpO2Euc2V0UmVzb3VyY2VQYXRoKHRoaXMuX2dldFJlc291cmNlUGF0aCgpKTthLnNldEFnZ3JlZ2F0aW9uTGV2ZWwodGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbCk7YS5zZXRNZWFzdXJlcyhbXSk7dmFyIGY9YS5nZXRGaWx0ZXJFeHByZXNzaW9uKCk7Zi5jbGVhcigpO2lmKHRoaXMuYUdsb2JhbEZpbHRlcilmLmFkZFVJNUZpbHRlckNvbmRpdGlvbnModGhpcy5hR2xvYmFsRmlsdGVyKTtpZih0aGlzLmFQcm9wZXJ0eUZpbHRlcilmLmFkZFVJNUZpbHRlckNvbmRpdGlvbnModGhpcy5hUHJvcGVydHlGaWx0ZXIpO2Euc2V0UmVzdWx0UGFnZUJvdW5kYXJpZXMoMSwxKTthLnNldFJlcXVlc3RPcHRpb25zKG51bGwsdHJ1ZSk7cmV0dXJue2lSZXF1ZXN0VHlwZTpyLHNSZXF1ZXN0SWQ6dGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5KSxvQW5hbHl0aWNhbFF1ZXJ5UmVxdWVzdDphfX07QS5wcm90b3R5cGUuX3ByZXBhcmVHcm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUXVlcnlSZXF1ZXN0PWZ1bmN0aW9uKHIsZyxhLGwsbil7dmFyIHA9ZnVuY3Rpb24ocixMLGgsbCl7dmFyIGo9W107dmFyIGs9dC5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyO3ZhciBzPW5ldyBvLlF1ZXJ5UmVzdWx0UmVxdWVzdCh0Lm9BbmFseXRpY2FsUXVlcnlSZXN1bHQpO3Muc2V0UmVzb3VyY2VQYXRoKHQuX2dldFJlc291cmNlUGF0aCgpKTt2YXIgdT10LmFBZ2dyZWdhdGlvbkxldmVsLnNsaWNlKDAsTCk7cy5zZXRBZ2dyZWdhdGlvbkxldmVsKHUpO2Zvcih2YXIgaT0wO2k8dS5sZW5ndGg7aSsrKXt2YXIgRD10Lm9EaW1lbnNpb25EZXRhaWxzU2V0W3VbaV1dO3ZhciBJPShELmtleVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTt2YXIgdj0oRC50ZXh0UHJvcGVydHlOYW1lIT11bmRlZmluZWQpO3MuaW5jbHVkZURpbWVuc2lvbktleVRleHRBdHRyaWJ1dGVzKEQubmFtZSx0cnVlLHYsRC5hQXR0cmlidXRlTmFtZSl9dmFyIHc9cy5nZXRGaWx0ZXJFeHByZXNzaW9uKCk7dy5jbGVhcigpO2lmKHQuYUdsb2JhbEZpbHRlcil3LmFkZFVJNUZpbHRlckNvbmRpdGlvbnModC5hR2xvYmFsRmlsdGVyKTtpZih0LmFQcm9wZXJ0eUZpbHRlcil3LmFkZFVJNUZpbHRlckNvbmRpdGlvbnModC5hUHJvcGVydHlGaWx0ZXIpO2lmKHQuYVByb3BlcnR5RmlsdGVyKXcuYWRkVUk1RmlsdGVyQ29uZGl0aW9ucyh0LmFQcm9wZXJ0eUZpbHRlcik7dy5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKGgpO3ZhciB4PTA7dmFyIHk9TC0xPT10LmFBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aDt2YXIgejt2YXIgQjt2YXIgRTt2YXIgTTt2YXIgSD1uZXcgQXJyYXkoKTtzLnNldE1lYXN1cmVzKHQuYU1lYXN1cmVOYW1lKTtmb3IodmFyIEogaW4gdC5vTWVhc3VyZURldGFpbHNTZXQpe009dC5vTWVhc3VyZURldGFpbHNTZXRbSl07aWYoIXkmJnQubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eVtKXS50b3RhbD09ZmFsc2Upe3o9ZmFsc2U7Qj1mYWxzZTtFPWZhbHNlfWVsc2V7ej0oTS5yYXdWYWx1ZVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtCPShNLmZvcm1hdHRlZFZhbHVlUHJvcGVydHlOYW1lIT11bmRlZmluZWQpO0U9KE0udW5pdFByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtpZihFKXtpZihILmluZGV4T2YoTS51bml0UHJvcGVydHlOYW1lKT09LTEpe0gucHVzaChNLnVuaXRQcm9wZXJ0eU5hbWUpfX19cy5pbmNsdWRlTWVhc3VyZVJhd0Zvcm1hdHRlZFZhbHVlVW5pdChNLm5hbWUseixCLEUpfWZvcih2YXIgaSBpbiB1KXt2YXIgSztpZigoSz1ILmluZGV4T2YodVtpXSkpIT0tMSlILnNwbGljZShLLDEpfXZhciBOPXMuZ2V0U29ydEV4cHJlc3Npb24oKTtOLmNsZWFyKCk7aWYoIXkpe2Zvcih2YXIgaSBpbiB1KXt2YXIgTz1vLlNvcnRPcmRlci5Bc2NlbmRpbmc7aWYodC5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5W3VbaV1dLnNvcnRlZClzd2l0Y2godC5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5W3VbaV1dLnNvcnRPcmRlcil7Y2FzZSBzYXAudWkudGFibGUuU29ydE9yZGVyLkFzY2VuZGluZzpPPW8uU29ydE9yZGVyLkFzY2VuZGluZzticmVhaztjYXNlIHNhcC51aS50YWJsZS5Tb3J0T3JkZXIuRGVzY2VuZGluZzpPPW8uU29ydE9yZGVyLkRlc2NlbmRpbmc7YnJlYWt9Ti5hZGRTb3J0ZXIodVtpXSxPKX19aWYodC5hR2xvYmFsU29ydGVyKXQuX2FwcGx5VUk1U29ydGVyVG9Tb3J0RXhwcmVzc2lvbih0LmFHbG9iYWxTb3J0ZXIsTik7aWYodC5hUHJvcGVydHlTb3J0ZXIpdC5fYXBwbHlVSTVTb3J0ZXJUb1NvcnRFeHByZXNzaW9uKHQuYVByb3BlcnR5U29ydGVyLE4pO2lmKGw9PTApcS5zYXAubG9nLmZhdGFsKCJ1bmhhbmRsZWQgY2FzZTogbG9hZCAwIGVudGl0aWVzIG9mIHN1YiBncm91cCIpO3Muc2V0UmVzdWx0UGFnZUJvdW5kYXJpZXMoeCsxLHgrbCk7cmV0dXJue2lSZXF1ZXN0VHlwZTpyLHNSZXF1ZXN0SWQ6dC5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5LHtsZXZlbDpMfSksb0FuYWx5dGljYWxRdWVyeVJlcXVlc3Q6cyxpTGV2ZWw6TCxhU2VsZWN0ZWRVbml0UHJvcGVydHlOYW1lOkgsYUFnZ3JlZ2F0aW9uTGV2ZWw6dSxiSXNGbGF0TGlzdFJlcXVlc3Q6eSxpU3RhcnRJbmRleDp4LGlMZW5ndGg6bH19O2lmKGEubGVuZ3RoIT0wKXtxLnNhcC5sb2cuZmF0YWwoImdyb3VwIGhlYWRlciBwYXRocyBub3Qgc3VwcG9ydGVkIHlldCIpO3JldHVybn12YXIgbT10aGlzLl9nZXRHcm91cElkTGV2ZWwoZykrMTt2YXIgYj1tK247dmFyIEc9W107dmFyIFI9W107dmFyIHQ9dGhpczt2YXIgZj1bXTt2YXIgYz10aGlzLl9nZXRHcm91cElkQ29tcG9uZW50cyhnKTtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKylmLnB1c2gobmV3IHNhcC51aS5tb2RlbC5GaWx0ZXIodGhpcy5hQWdncmVnYXRpb25MZXZlbFtpXSxzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuRVEsY1tpXSkpO2Zvcih2YXIgTD1tO0w8PWI7TCsrKXt2YXIgZD1NYXRoLmNlaWwoKGwtTCkvKGItTCsxKSk7dmFyIGU9cChBLl9yZXF1ZXN0VHlwZS5sZXZlbE1lbWJlcnNRdWVyeSxMLGYsZCk7Ry5wdXNoKGUpO1IucHVzaCh0aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUubGV2ZWxNZW1iZXJzUXVlcnkse2xldmVsOkx9KSl9cmV0dXJue2lSZXF1ZXN0VHlwZTpyLGFSZXF1ZXN0SWQ6UixhR3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblJlcXVlc3REZXRhaWxzOkcsc0dyb3VwSWQ6ZyxpTGVuZ3RoOmx9fTtBLnByb3RvdHlwZS5fcHJlcGFyZUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25SZXF1ZXN0SWRzPWZ1bmN0aW9uKGcsbil7dmFyIG09dGhpcy5fZ2V0R3JvdXBJZExldmVsKGcpKzE7dmFyIGE9bStuO3ZhciByPVtdO2Zvcih2YXIgbD0xO2w8PWE7bCsrKXtyLnB1c2godGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5LHtsZXZlbDpsfSkpfXJldHVybiByfTtBLnByb3RvdHlwZS5fZ2V0UXVlcnlPRGF0YVJlcXVlc3RPcHRpb25zPWZ1bmN0aW9uKGEpe3ZhciBzPWEuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHNlbGVjdCIpO3ZhciBmPWEuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJGZpbHRlciIpO3ZhciBPPWEuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJG9yZGVyYnkiKTt2YXIgYj1hLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRza2lwIik7dmFyIHQ9YS5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkdG9wIik7dmFyIGk9YS5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkaW5saW5lY291bnQiKTtpZih0aGlzLm1QYXJhbWV0ZXJzWyJmaWx0ZXIiXSlmKz0iYW5kICgiK3RoaXMubVBhcmFtZXRlcnNbImZpbHRlciJdKyIpIjt2YXIgcD1bXTtpZihzKXAucHVzaCgiJHNlbGVjdD0iK3MpO2lmKGYpcC5wdXNoKCIkZmlsdGVyPSIrZik7aWYoTylwLnB1c2goIiRvcmRlcmJ5PSIrTyk7aWYoYilwLnB1c2goIiRza2lwPSIrYik7aWYodClwLnB1c2goIiR0b3A9Iit0KTtpZihpKXAucHVzaCgiJGlubGluZWNvdW50PSIraSk7cmV0dXJuIHB9O0EucHJvdG90eXBlLl9leGVjdXRlQmF0Y2hSZXF1ZXN0PWZ1bmN0aW9uKHIpe3ZhciBjPXRoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcjt2YXIgdD10aGlzO3ZhciBiPVtdLGU9W107Zm9yKHZhciBpPS0xLFI7Uj1yWysraV07KXt2YXIgYT1SLm9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0LGc9Ui5zR3JvdXBJZDtpZihhLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRzZWxlY3QiKT09bnVsbCl7dGhpcy5maXJlRGF0YVJlcXVlc3RlZCgpO3ZhciBFPXRoaXMuZ2V0TW9kZWwoKS5nZXRDb250ZXh0KCIvYXJ0aWZpY2lhbFJvb3RDb250ZW50Iik7Zz1udWxsO3RoaXMubUxlbmd0aFtnXT0xO3RoaXMubUZpbmFsTGVuZ3RoW2ddPXRydWU7dGhpcy5tS2V5W2ddPVsiYXJ0aWZpY2lhbFJvb3RDb250ZW50Il07dGhpcy5iTmVlZHNVcGRhdGU9dHJ1ZTt2YXIgdD10aGlzO2lmKHIubGVuZ3RoPT0xKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5maXJlRGF0YVJlY2VpdmVkKCl9KX10aGlzLmJBcnRpZmljYWxSb290Q29udGV4dD10cnVlO2NvbnRpbnVlfXZhciBwPWEuZ2V0VVJJVG9RdWVyeVJlc3VsdEVudHJpZXMoKTtpZihwLmluZGV4T2YoIi8iKT09MClwPXAuc3Vic3RyaW5nKDEpO2lmKCF0aGlzLl9pc1JlcXVlc3RQZW5kaW5nKFIuc1JlcXVlc3RJZCkpe3RoaXMuX3JlZ2lzdGVyTmV3UmVxdWVzdChSLnNSZXF1ZXN0SWQpO2IucHVzaCh0aGlzLm9Nb2RlbC5jcmVhdGVCYXRjaE9wZXJhdGlvbihwLnJlcGxhY2UoL1wgL2csIiUyMCIpLCJHRVQiKSk7ZS5wdXNoKFIpfX1xLnNhcC5sb2cuZGVidWcoIkFuYWx5dGljYWxCaW5kaW5nOiBleGVjdXRpbmcgYmF0Y2ggcmVxdWVzdCB3aXRoICIrZS5sZW5ndGgrIiBvcGVyYXRpb25zIik7dmFyIGQ9dGhpcy5fZ2V0SWRGb3JOZXdSZXF1ZXN0SGFuZGxlKCk7aWYoYi5sZW5ndGg+MCl7dGhpcy5vTW9kZWwuYWRkQmF0Y2hSZWFkT3BlcmF0aW9ucyhiKTt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCk7dmFyIGY9dGhpcy5vTW9kZWwuc3VibWl0QmF0Y2gocyxoLHRydWUsdHJ1ZSk7dGhpcy5vTW9kZWwuZmlyZVJlcXVlc3RTZW50KHt1cmw6dGhpcy5vTW9kZWwuc1NlcnZpY2VVcmwrIi8kYmF0Y2giLHR5cGU6IlBPU1QiLGFzeW5jOnRydWUsaW5mbzoiIixpbmZvT2JqZWN0Ont9fSk7dGhpcy5fcmVnaXN0ZXJOZXdSZXF1ZXN0SGFuZGxlKGQsZil9ZnVuY3Rpb24gcyhELGope3QuX2RlcmVnaXN0ZXJIYW5kbGVPZkNvbXBsZXRlZFJlcXVlc3QoZCk7aWYoZS5sZW5ndGghPUQuX19iYXRjaFJlc3BvbnNlcy5sZW5ndGgpcS5zYXAubG9nLmZhdGFsKCJhc3NlcnRpb24gZmFpbGVkOiByZWNlaXZlZCAiK0QuX19iYXRjaFJlc3BvbnNlcy5sZW5ndGgrIiByZXNwb25zZXMgZm9yICIrZS5sZW5ndGgrIiByZWFkIG9wZXJhdGlvbnMgaW4gdGhlIGJhdGNoIHJlcXVlc3QiKTtpZihjIT10LmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXIpe2Zvcih2YXIgaT0tMSxrO2s9ZVsrK2ldLnNSZXF1ZXN0SWQ7KXt0Ll9kZXJlZ2lzdGVyQ29tcGxldGVkUmVxdWVzdChrKTt0Ll9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KGspfXJldHVybn1mb3IodmFyIGk9MDtpPEQuX19iYXRjaFJlc3BvbnNlcy5sZW5ndGg7aSsrKXtpZihELl9fYmF0Y2hSZXNwb25zZXNbaV0uZGF0YSE9dW5kZWZpbmVkKXtzd2l0Y2goZVtpXS5pUmVxdWVzdFR5cGUpe2Nhc2UgQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnk6dC5fcHJvY2Vzc0dyb3VwTWVtYmVyc1F1ZXJ5UmVzcG9uc2UoZVtpXSxELl9fYmF0Y2hSZXNwb25zZXNbaV0uZGF0YSk7YnJlYWs7Y2FzZSBBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeTp0Ll9wcm9jZXNzVG90YWxTaXplUXVlcnlSZXNwb25zZShlW2ldLEQuX19iYXRjaFJlc3BvbnNlc1tpXS5kYXRhKTticmVhaztkZWZhdWx0OnEuc2FwLmxvZy5mYXRhbCgiaW52YWxpZCByZXF1ZXN0IHR5cGUgIitlW2ldLmlSZXF1ZXN0VHlwZSk7Y29udGludWV9fXQuX2RlcmVnaXN0ZXJDb21wbGV0ZWRSZXF1ZXN0KGVbaV0uc1JlcXVlc3RJZCk7dC5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdChlW2ldLnNSZXF1ZXN0SWQpfXZhciBPPXRydWU7dmFyIEI9dC5vTW9kZWwuX2dldEJhdGNoRXJyb3JzKEQpO2lmKEIubGVuZ3RoPjApTz1mYWxzZTt0Lm9Nb2RlbC5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOmoucmVxdWVzdFVyaSx0eXBlOiJQT1NUIixhc3luYzp0cnVlLGluZm86IiIsaW5mb09iamVjdDp7fSxzdWNjZXNzOk8sZXJyb3JvYmplY3Q6Tz97fTp0Lm9Nb2RlbC5faGFuZGxlRXJyb3IoQlswXSl9KTtpZihPKXQuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpDLkNoYW5nZX0pO3QuZmlyZURhdGFSZWNlaXZlZCgpfWZ1bmN0aW9uIGgoail7dC5fZGVyZWdpc3RlckhhbmRsZU9mQ29tcGxldGVkUmVxdWVzdChkKTtmb3IodmFyIGk9LTEsaztrPWVbKytpXTspe3QuX2RlcmVnaXN0ZXJDb21wbGV0ZWRSZXF1ZXN0KGsuc1JlcXVlc3RJZCk7dC5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdChrLnNSZXF1ZXN0SWQpfWlmKGMhPXQuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcil7cmV0dXJufXQub01vZGVsLmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6IiIsdHlwZToiUE9TVCIsYXN5bmM6dHJ1ZSxpbmZvOiIiLGluZm9PYmplY3Q6e30sc3VjY2VzczpmYWxzZSxlcnJvcm9iamVjdDp0Lm9Nb2RlbC5faGFuZGxlRXJyb3Ioail9KTt0LmZpcmVSZXF1ZXN0RmFpbGVkKHQub01vZGVsLl9oYW5kbGVFcnJvcihqKSk7dC5maXJlRGF0YVJlY2VpdmVkKCl9fTtBLnByb3RvdHlwZS5fZXhlY3V0ZVF1ZXJ5UmVxdWVzdD1mdW5jdGlvbihyKXtpZihyLmlSZXF1ZXN0VHlwZT09QS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblF1ZXJ5KXtmb3IodmFyIGk9LTEsYTthPXIuYUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25SZXF1ZXN0RGV0YWlsc1srK2ldOyl7dGhpcy5fZXhlY3V0ZVF1ZXJ5UmVxdWVzdChhKX1yZXR1cm59dmFyIGM9dGhpcy5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyO3ZhciBhPXIub0FuYWx5dGljYWxRdWVyeVJlcXVlc3QsZz1yLnNHcm91cElkO3ZhciBwPWEuZ2V0VVJJVG9RdWVyeVJlc3VsdEVudGl0eVNldCgpO3ZhciBQPXRoaXMuX2dldFF1ZXJ5T0RhdGFSZXF1ZXN0T3B0aW9ucyhhKTt2YXIgdD10aGlzO2lmKGEuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHNlbGVjdCIpPT1udWxsKXt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCk7dmFyIGU9dGhpcy5nZXRNb2RlbCgpLmdldENvbnRleHQoIi9hcnRpZmljaWFsUm9vdENvbnRlbnQiKTtnPW51bGw7dGhpcy5tTGVuZ3RoW2ddPTE7dGhpcy5tRmluYWxMZW5ndGhbZ109dHJ1ZTt0aGlzLm1LZXlbZ109WyJhcnRpZmljaWFsUm9vdENvbnRlbnQiXTt0aGlzLmJOZWVkc1VwZGF0ZT10cnVlO3ZhciB0PXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKHQuX2NsZWFudXBHcm91cGluZ0ZvckNvbXBsZXRlZFJlcXVlc3Qoci5zUmVxdWVzdElkKSl0LmZpcmVEYXRhUmVjZWl2ZWQoKX0pO3RoaXMuYkFydGlmaWNhbFJvb3RDb250ZXh0PXRydWU7cmV0dXJufXRoaXMuX3JlZ2lzdGVyTmV3UmVxdWVzdChyLnNSZXF1ZXN0SWQpO3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKTtmb3IodmFyIGk9MDtpPFAubGVuZ3RoO2krKylQW2ldPVBbaV0ucmVwbGFjZSgvXCAvZywiJTIwIik7cS5zYXAubG9nLmRlYnVnKCJBbmFseXRpY2FsQmluZGluZzogZXhlY3V0aW5nIHF1ZXJ5IHJlcXVlc3QiKTt2YXIgUj10aGlzLl9nZXRJZEZvck5ld1JlcXVlc3RIYW5kbGUoKTt0aGlzLm9Nb2RlbC5fbG9hZERhdGEocCxQLHMsRSxmYWxzZSx1LGYpO2Z1bmN0aW9uIHMoZCl7dC5fZGVyZWdpc3RlckhhbmRsZU9mQ29tcGxldGVkUmVxdWVzdChSKTtpZihjIT10LmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXIpe3QuX2RlcmVnaXN0ZXJDb21wbGV0ZWRSZXF1ZXN0KHIuc1JlcXVlc3RJZCk7cmV0dXJufXN3aXRjaChyLmlSZXF1ZXN0VHlwZSl7Y2FzZSBBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeTp0Ll9wcm9jZXNzR3JvdXBNZW1iZXJzUXVlcnlSZXNwb25zZShyLGQpO2JyZWFrO2Nhc2UgQS5fcmVxdWVzdFR5cGUudG90YWxTaXplUXVlcnk6dC5fcHJvY2Vzc1RvdGFsU2l6ZVF1ZXJ5UmVzcG9uc2UocixkKTticmVhaztjYXNlIEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5OnQuX3Byb2Nlc3NMZXZlbE1lbWJlcnNRdWVyeVJlc3BvbnNlKHIsZCk7YnJlYWs7ZGVmYXVsdDpxLnNhcC5sb2cuZmF0YWwoImludmFsaWQgcmVxdWVzdCB0eXBlICIrci5pUmVxdWVzdFR5cGUpO2JyZWFrfXQuX2RlcmVnaXN0ZXJDb21wbGV0ZWRSZXF1ZXN0KHIuc1JlcXVlc3RJZCl9ZnVuY3Rpb24gZigpe2lmKGMhPXQuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcil7cmV0dXJufWlmKHQuX2NsZWFudXBHcm91cGluZ0ZvckNvbXBsZXRlZFJlcXVlc3Qoci5zUmVxdWVzdElkKSl0LmZpcmVEYXRhUmVjZWl2ZWQoKX1mdW5jdGlvbiBFKGQpe3QuX2RlcmVnaXN0ZXJIYW5kbGVPZkNvbXBsZXRlZFJlcXVlc3QoUik7dC5fZGVyZWdpc3RlckNvbXBsZXRlZFJlcXVlc3Qoci5zUmVxdWVzdElkKTt0Ll9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KHIuc1JlcXVlc3RJZCk7aWYoYyE9dC5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyKXtyZXR1cm59dC5maXJlRGF0YVJlY2VpdmVkKCl9ZnVuY3Rpb24gdShiKXt0Ll9yZWdpc3Rlck5ld1JlcXVlc3RIYW5kbGUoUixiKX19O0EucHJvdG90eXBlLl9hYm9ydEFsbFBlbmRpbmdSZXF1ZXN0cz1mdW5jdGlvbigpe3RoaXMuX2Fib3J0QWxsUGVuZGluZ1JlcXVlc3RzQnlIYW5kbGUoKTt0aGlzLl9jbGVhckFsbFBlbmRpbmdSZXF1ZXN0cygpfTtBLnByb3RvdHlwZS5fcHJvY2Vzc0dyb3VwTWVtYmVyc1F1ZXJ5UmVzcG9uc2U9ZnVuY3Rpb24ocixkKXt2YXIgZz1yLnNHcm91cElkLHM9ci5hU2VsZWN0ZWRVbml0UHJvcGVydHlOYW1lLGE9ci5hQWdncmVnYXRpb25MZXZlbCxiPXIuaVN0YXJ0SW5kZXgsbD1yLmlMZW5ndGg7aWYoIXRoaXMubUtleVtnXSl0aGlzLm1LZXlbZ109W107dmFyIEs9dGhpcy5tS2V5W2ddO3ZhciBjPWI7dmFyIHU9KHMubGVuZ3RoPjApO3ZhciBwPW51bGwsRD1udWxsO3ZhciBmPS0xO3ZhciBlPTA7dmFyIGg9bnVsbDtmb3IodmFyIGk9MDtpPGQucmVzdWx0cy5sZW5ndGg7aSsrKXt2YXIgRT1kLnJlc3VsdHNbaV07aWYodSl7RD0iIjtmb3IodmFyIGo9MDtqPGEubGVuZ3RoO2orKyl7RCs9RVthW2pdXSsifCJ9aWYocD09RCl7aWYoZj09LTEpZj1pLTE7dmFyIG09LTEsUD1kLnJlc3VsdHNbaS0xXTtmb3IodmFyIGs9MDtrPHMubGVuZ3RoO2srKyl7aWYoUFtzW2tdXSE9RVtzW2tdXSl7bT1rO2JyZWFrfX1pZihtPT0tMSlxLnNhcC5sb2cuZmF0YWwoImFzc2VydGlvbiBmYWlsZWQ6IG5vIGRldmlhdGluZyB1bml0cyBmb3VuZCBmb3IgcmVzdWx0IGVudHJpZXMgIisoaS0xKSsiIGFuZCAiK2kpfWlmKChwIT1EfHxpPT1kLnJlc3VsdHMubGVuZ3RoLTEpJiZmIT0tMSl7dmFyIE09cS5leHRlbmQodHJ1ZSx7fSxkLnJlc3VsdHNbZl0pO3ZhciBuPXRoaXMub01vZGVsLl9nZXRPYmplY3QoIi8iK3RoaXMub01vZGVsLl9nZXRLZXkoZC5yZXN1bHRzW2ZdKSk7Zm9yKHZhciBrPTA7azxzLmxlbmd0aDtrKyspTVtzW2tdXT0iKiI7Zm9yKHZhciB0IGluIHRoaXMub01lYXN1cmVEZXRhaWxzU2V0KXt2YXIgdj10aGlzLm9NZWFzdXJlRGV0YWlsc1NldFt0XTtpZih2LnJhd1ZhbHVlUHJvcGVydHlOYW1lIT11bmRlZmluZWQpTVt2LnJhd1ZhbHVlUHJvcGVydHlOYW1lXT0iKiI7aWYodi5mb3JtYXR0ZWRWYWx1ZVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKU1bdi5mb3JtYXR0ZWRWYWx1ZVByb3BlcnR5TmFtZV09IioifXZhciB3PSIiO2lmKGg9PW51bGwpaD10aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQuZ2V0QWxsRGltZW5zaW9uTmFtZXMoKS5jb25jYXQoW10pLnNvcnQoKTtmb3IodmFyIGs9MDtrPGgubGVuZ3RoO2srKyl7dmFyIHg9TVtoW2tdXTt3Kz0oeD09PXVuZGVmaW5lZD8iIjp4KSsiLCJ9TS5fX21ldGFkYXRhLnVyaT13KyItbXVsdGlwbGUtdW5pdHMtbm90LWRlcmVmZXJlbmNhYmxlIjtkZWxldGUgTS5fX21ldGFkYXRhWyJzZWxmIl07ZGVsZXRlIE0uX19tZXRhZGF0YVsic2VsZl9saW5rX2V4dGVuc2lvbnMiXTtNWyJefnZvbGF0aWxlIl09dHJ1ZTt0aGlzLm9Nb2RlbC5faW1wb3J0RGF0YShNLHt9KTt0aGlzLm9Nb2RlbC5nZXRDb250ZXh0KCcvJytNLl9fbWV0YWRhdGEudXJpKVsiX3ZvbGF0aWxlIl09dHJ1ZTtLW2MtMV09dGhpcy5vTW9kZWwuX2dldEtleShNKTtpZihpPT1kLnJlc3VsdHMubGVuZ3RoLTEmJnA9PUQpZSs9aS1mO2Vsc2UgZSs9aS1mLTE7Zj0tMTtpZihwIT1EKUtbYysrXT10aGlzLm9Nb2RlbC5fZ2V0S2V5KEUpfWVsc2UgaWYocCE9RClLW2MrK109dGhpcy5vTW9kZWwuX2dldEtleShFKTtwPUR9ZWxzZSBLW2MrK109dGhpcy5vTW9kZWwuX2dldEtleShFKX1pZihkLl9fY291bnQpe3RoaXMubUxlbmd0aFtnXT1wYXJzZUludChkLl9fY291bnQsMTApLWU7dGhpcy5tRmluYWxMZW5ndGhbZ109dHJ1ZTtpZihyLmJJc0ZsYXRMaXN0UmVxdWVzdCl0aGlzLmlUb3RhbFNpemU9ZC5fX2NvdW50fWlmKHRoaXMubUxlbmd0aFtnXTxiK2QucmVzdWx0cy5sZW5ndGgpe3RoaXMubUxlbmd0aFtnXT1iKyhkLnJlc3VsdHMubGVuZ3RoLWUpO3RoaXMubUZpbmFsTGVuZ3RoW2ddPWZhbHNlfWlmKChkLnJlc3VsdHMubGVuZ3RoLWUpPGx8fGw9PT11bmRlZmluZWQpe3RoaXMubUxlbmd0aFtnXT1iKyhkLnJlc3VsdHMubGVuZ3RoLWUpO3RoaXMubUZpbmFsTGVuZ3RoW2ddPXRydWV9aWYoZC5yZXN1bHRzLmxlbmd0aD09MCl7dGhpcy5tTGVuZ3RoW2ddPTA7dGhpcy5tRmluYWxMZW5ndGhbZ109dHJ1ZX10aGlzLmJOZWVkc1VwZGF0ZT10cnVlfTtBLnByb3RvdHlwZS5fcHJvY2Vzc1RvdGFsU2l6ZVF1ZXJ5UmVzcG9uc2U9ZnVuY3Rpb24ocixkKXt2YXIgYT1yLm9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0O2lmKGQuX19jb3VudD09dW5kZWZpbmVkKXtxLnNhcC5sb2cuZmF0YWwoIm1pc3NpbmcgZW50aXR5IGNvdW50IGluIHF1ZXJ5IHJlc3VsdCIpO3JldHVybn10aGlzLmlUb3RhbFNpemU9ZC5fX2NvdW50fTtBLnByb3RvdHlwZS5fcHJvY2Vzc0xldmVsTWVtYmVyc1F1ZXJ5UmVzcG9uc2U9ZnVuY3Rpb24ocixkKXt2YXIgYT1yLm9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0O2lmKGQucmVzdWx0cy5sZW5ndGg9PTApcmV0dXJuO3ZhciBwPXRoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dCh0aGlzLm9Nb2RlbC5nZXRDb250ZXh0KCIvIit0aGlzLm9Nb2RlbC5fZ2V0S2V5KGQucmVzdWx0c1swXSkpLHIuaUxldmVsLTEpO3ZhciBQPVtdO2Zvcih2YXIgaT0wO2k8ZC5yZXN1bHRzLmxlbmd0aDtpKyspe3ZhciBlPWQucmVzdWx0c1tpXTt2YXIgYz10aGlzLm9Nb2RlbC5nZXRDb250ZXh0KCIvIit0aGlzLm9Nb2RlbC5fZ2V0S2V5KGQucmVzdWx0c1tpXSkpO3ZhciBzPXRoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dChjLHIuaUxldmVsLTEpO2lmKHA9PXMpe1AucHVzaChlKTtpZihpPGQucmVzdWx0cy5sZW5ndGgtMSljb250aW51ZX12YXIgZz17aVJlcXVlc3RUeXBlOkEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHNSZXF1ZXN0SWQ6dGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOnB9KSxvQW5hbHl0aWNhbFF1ZXJ5UmVxdWVzdDpyLm9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0LHNHcm91cElkOnAsYVNlbGVjdGVkVW5pdFByb3BlcnR5TmFtZTpyLmFTZWxlY3RlZFVuaXRQcm9wZXJ0eU5hbWUsYUFnZ3JlZ2F0aW9uTGV2ZWw6ci5hQWdncmVnYXRpb25MZXZlbCxiSXNGbGF0TGlzdFJlcXVlc3Q6ZmFsc2UsaVN0YXJ0SW5kZXg6ci5pU3RhcnRJbmRleCxpTGVuZ3RoOnIuaUxlbmd0aH07dmFyIGI9cS5leHRlbmQodHJ1ZSx7fSxkKTtiLnJlc3VsdHM9UDt0aGlzLl9wcm9jZXNzR3JvdXBNZW1iZXJzUXVlcnlSZXNwb25zZShnLGIpO2lmKGk8ZC5yZXN1bHRzLmxlbmd0aC0xKXtwPXM7UD1bZV19fX07QS5wcm90b3R5cGUuX2dldExvYWRlZENvbnRleHRzRm9yR3JvdXA9ZnVuY3Rpb24oZyxzLGwpe3ZhciBjPVtdLGEsaz10aGlzLm1LZXlbZ10sSztpZighaylyZXR1cm4gYztpZighcylzPTA7aWYoIWwpe2w9dGhpcy5vTW9kZWwuaVNpemVMaW1pdDtpZih0aGlzLm1GaW5hbExlbmd0aFtnXSYmdGhpcy5tTGVuZ3RoW2ddPGwpbD10aGlzLm1MZW5ndGhbZ119Zm9yKHZhciBpPXM7aTxzK2w7aSsrKXtLPWtbaV07aWYoIUspe2JyZWFrfWE9dGhpcy5vTW9kZWwuZ2V0Q29udGV4dCgnLycrSyk7Yy5wdXNoKGEpfXJldHVybiBjfTtBLnByb3RvdHlwZS5fY2FsY3VsYXRlUmVxdWlyZWRHcm91cFNlY3Rpb249ZnVuY3Rpb24oZyxzLGwsdCxjKXt2YXIgTD1mYWxzZSxhLGIscCxQLHIsZD17fSxrPXRoaXMubUtleVtnXSxLO2I9czthPTA7aWYoIWspe1A9cztwPXMrbH1lbHNle2Zvcih2YXIgaT1zLTE7aT49TWF0aC5tYXgocy10LDApO2ktLSl7Sz1rW2ldO2lmKCFLKXtQPWkrMTticmVha319Zm9yKHZhciBqPXMrbDtqPHMrbCt0O2orKyl7Sz1rW2pdO2lmKCFLKXtwPWo7YnJlYWt9fX1yPXMtUDtpZihQJiZzPnQmJnI8dCl7aWYoYy5sZW5ndGghPWwpYj1zLXQ7ZWxzZSBiPVAtdDthPXR9aWYoYj09cyliKz1jLmxlbmd0aDtpZihjLmxlbmd0aCE9bClhKz1sLWMubGVuZ3RoO3I9cC1zLWw7aWYocj09MClhKz10O2lmKHAmJnI8dCYmcj4wKXtpZihiPj1zKXtiPXA7YSs9dH19aWYodGhpcy5tRmluYWxMZW5ndGhbZ10mJnRoaXMubUxlbmd0aFtnXTwoYStiKSlhPXRoaXMubUxlbmd0aFtnXS1iO2Quc3RhcnRJbmRleD1iO2QubGVuZ3RoPWE7cmV0dXJuIGR9O0EucHJvdG90eXBlLl9jYWxjdWxhdGVSZXF1aXJlZEdyb3VwRXhwYW5zaW9uPWZ1bmN0aW9uKGcsbCxzLEwpe2lmKGw9PXRoaXMuaUF1dG9FeHBhbmRHcm91cHNUb0xldmVsKXt2YXIgYz10aGlzLl9nZXRMb2FkZWRDb250ZXh0c0Zvckdyb3VwKGcscyxMKTt2YXIgYT1zK2MubGVuZ3RoLTE7aWYoIXRoaXMubUZpbmFsTGVuZ3RoW2ddKXtpZihjLmxlbmd0aDxMKXJldHVybntncm91cElkX01pc3Npbmc6ZyxzdGFydEluZGV4X01pc3Npbmc6YSsxLGxlbmd0aF9NaXNzaW5nOkwtYy5sZW5ndGh9O2Vsc2UgcmV0dXJue2dyb3VwSWRfTWlzc2luZzpudWxsLGxlbmd0aF9NaXNzaW5nOjB9fWVsc2V7aWYoYy5sZW5ndGg8TClyZXR1cm57Z3JvdXBJZF9NaXNzaW5nOm51bGwsbGVuZ3RoX01pc3Npbmc6TC1jLmxlbmd0aH07ZWxzZSByZXR1cm57Z3JvdXBJZF9NaXNzaW5nOm51bGwsbGVuZ3RoX01pc3Npbmc6MH19fXZhciBjPXRoaXMuX2dldExvYWRlZENvbnRleHRzRm9yR3JvdXAoZyxzLEwpO3ZhciBiPUwsYT1zK2MubGVuZ3RoLTE7Zm9yKHZhciBpPS0xLGQ7ZD1jWysraV07KXtiLS07dmFyIEc9dGhpcy5fY2FsY3VsYXRlUmVxdWlyZWRHcm91cEV4cGFuc2lvbih0aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQoZCxsKSxsKzEsMCxiKTtpZihHLmdyb3VwSWRfTWlzc2luZz09bnVsbCl7aWYoRy5zdGFydEluZGV4X01pc3Npbmc9PTApcmV0dXJuIEc7ZWxzZSBiPUcubGVuZ3RoX01pc3Npbmd9ZWxzZXtyZXR1cm4gR31pZihiPT0wKWJyZWFrfWlmKHRoaXMubUZpbmFsTGVuZ3RoW2ddfHxiPT0wKXJldHVybntncm91cElkX01pc3Npbmc6bnVsbCxsZW5ndGhfTWlzc2luZzpifTtlbHNlIHJldHVybntncm91cElkX01pc3Npbmc6ZyxzdGFydEluZGV4X01pc3Npbmc6YSsxLGxlbmd0aF9NaXNzaW5nOmJ9fTtBLnByb3RvdHlwZS5fZ2V0UmVzb3VyY2VQYXRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNSZWxhdGl2ZSgpP3RoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLmdldENvbnRleHQoKSk6dGhpcy5zUGF0aH07QS5wcm90b3R5cGUuX2dldEVudGl0eVNldD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuc0VudGl0eVNldE5hbWU7dmFyIGI9dGhpcy5nZXRDb250ZXh0KCk7aWYoIWUpe2U9dGhpcy5zUGF0aC5zcGxpdCgiLyIpWzFdO2lmKGUuaW5kZXhPZigiKCIpIT0tMSl7ZT1lLnNwbGl0KCIoIilbMF0rIlJlc3VsdHMifX1yZXR1cm4gZX07QS5wcm90b3R5cGUuX2FwcGx5VUk1U29ydGVyVG9Tb3J0RXhwcmVzc2lvbj1mdW5jdGlvbihzLGEpe2lmKHMpe2Zvcih2YXIgaSBpbiBzKXt2YXIgcD10aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbc1tpXS5zUGF0aF07aWYocD09PXVuZGVmaW5lZHx8cD09bnVsbClxLnNhcC5sb2cuZmF0YWwoImFzc2VydGlvbiBmYWlsZWQ6IHNvcnRpbmcgcHJvcGVydHkgIitzW2ldLnNQYXRoKyIgbm90IGZvdW5kIGluIGFuYWx5dGljYWwgaW5mbyIpO2EuYWRkU29ydGVyKHNbaV0uc1BhdGgsc1tpXS5iRGVzY2VuZGluZz9vLlNvcnRPcmRlci5EZXNjZW5kaW5nOm8uU29ydE9yZGVyLkFzY2VuZGluZyl9fX07QS5wcm90b3R5cGUuX2dldEdyb3VwSWRGcm9tQ29udGV4dD1mdW5jdGlvbihjLGwpe2lmKCFjKXtyZXR1cm4gbnVsbH12YXIgZz0iLyI7dmFyIGQ9bnVsbDtpZihsPnRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoKXEuc2FwLmxvZy5mYXRhbCgiYXNzZXJ0aW9uIGZhaWxlZDogYWdncmVnYXRpb24gbGV2ZWwgZGVlcGVyIHRoYW4gbnVtYmVyIG9mIGN1cnJlbnQgYWdncmVnYXRpb24gbGV2ZWxzIik7Zm9yKHZhciBpPTA7aTxsO2krKyl7ZD1jLmdldFByb3BlcnR5KHRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbaV0pO2lmKGQhPW51bGwpe2crPWVuY29kZVVSSUNvbXBvbmVudChkKSsiLyJ9ZWxzZXtnKz0iQC8ifX1yZXR1cm4gZ307QS5wcm90b3R5cGUuX2dldEdyb3VwSWRMZXZlbD1mdW5jdGlvbihnKXtpZihnPT1udWxsKXtxLnNhcC5sb2cuZmF0YWwoImFzc2VydGlvbiBmYWlsZWQ6IG5vIG5lZWQgdG8gZGV0ZXJtaW5lIGxldmVsIG9mIGdyb3VwIElEID0gbnVsbCIpO3JldHVybi0xfXJldHVybiBnLnNwbGl0KCIvIikubGVuZ3RoLTJ9O0EucHJvdG90eXBlLl9nZXRHcm91cElkQ29tcG9uZW50cz1mdW5jdGlvbihnKXtpZihnPT1udWxsKXJldHVybiBudWxsO3ZhciBHPWcuc3BsaXQoIi8iKTt2YXIgZD1uZXcgQXJyYXkoKTtmb3IodmFyIGk9MTtpPEcubGVuZ3RoLTE7aSsrKXtpZihHW2ldPT0iQCIpZFtpLTFdPW51bGw7ZWxzZSBkW2ktMV09ZGVjb2RlVVJJQ29tcG9uZW50KEdbaV0pfXJldHVybiBkfTtBLnByb3RvdHlwZS5fZ2V0R3JvdXBJZEFuY2VzdG9ycz1mdW5jdGlvbihnLG4pe2lmKCFuKXJldHVybltdO2lmKGc9PW51bGwpe3Euc2FwLmxvZy5mYXRhbCgiZ3JvdXAgSUQgbnVsbCBkb2VzIG5vdCBoYXZlIGFuY2VzdG9ycyIpO3JldHVybltdfWlmKGc9PSIvIilpZihNYXRoLmFicyhuKT09MSlyZXR1cm5bbnVsbF07ZWxzZXtxLnNhcC5sb2cuZmF0YWwoImludmFsaWQgbGV2ZWwgY291bnQgIituKyIgZm9yIGFuY2VzdG9ycyBvZiBncm91cElkICIrZyk7cmV0dXJuW119dmFyIEc9Zy5zcGxpdCgiLyIpO3ZhciBhPW5ldyBBcnJheSgpLHM9IiI7dmFyIGY9MCx0PUcubGVuZ3RoLTM7aWYobj4wKWlmKG4tMT50KXEuc2FwLmxvZy5mYXRhbCgiaW52YWxpZCBsZXZlbCBjb3VudCAiK24rIiBmb3IgYW5jZXN0b3JzIG9mIGdyb3VwSWQgIitnKTtlbHNlIHQ9bi0xO2Vsc2UgaWYoLShuKzEpPnQpcS5zYXAubG9nLmZhdGFsKCJpbnZhbGlkIGxldmVsIGNvdW50ICIrbisiIGZvciBhbmNlc3RvcnMgb2YgZ3JvdXBJZCAiK2cpO2Vsc2V7Zj10KzErbjtmb3IodmFyIGk9MDtpPGY7aSsrKXtzKz1HW2ldKyIvIn19Zm9yKHZhciBpPWY7aTw9dDtpKyspe3MrPUdbaV0rIi8iO2EucHVzaChzKX1yZXR1cm4gYX07QS5wcm90b3R5cGUuX2dldFBhcmVudEdyb3VwSWQ9ZnVuY3Rpb24oZyl7cmV0dXJuIHRoaXMuX2dldEdyb3VwSWRBbmNlc3RvcnMoZywtMSlbMF19O0EucHJvdG90eXBlLl9yZW1vdmVEdXBsaWNhdGVzRnJvbVN0cmluZ0FycmF5PWZ1bmN0aW9uKGEpe3ZhciB0PXt9O2Zvcih2YXIgaT0wO2k8YS5sZW5ndGg7aSsrKXRbYVtpXV09dHJ1ZTt2YXIgdT1bXTtmb3IodmFyIHMgaW4gdCl1LnB1c2gocyk7cmV0dXJuIHV9O0EucHJvdG90eXBlLl9nZXRJZEZvck5ld1JlcXVlc3RIYW5kbGU9ZnVuY3Rpb24oKXtpZih0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZT09PXVuZGVmaW5lZCl0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZT1bXTtmb3IodmFyIGk9MDtpPHRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlLmxlbmd0aDtpKyspe2lmKHRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlW2ldPT09dW5kZWZpbmVkKXJldHVybiBpfXRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlW3RoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlLmxlbmd0aF09dW5kZWZpbmVkO3JldHVybiB0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZS5sZW5ndGgtMX07QS5wcm90b3R5cGUuX3JlZ2lzdGVyTmV3UmVxdWVzdEhhbmRsZT1mdW5jdGlvbihyLFIpe2lmKHRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlW3JdIT09dW5kZWZpbmVkKXEuc2FwLmxvZy5mYXRhbCgicmVxdWVzdCBoYW5kbGUgSUQgYWxyZWFkeSBpbiB1c2UiKTt0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZVtyXT1SfTtBLnByb3RvdHlwZS5fZGVyZWdpc3RlckhhbmRsZU9mQ29tcGxldGVkUmVxdWVzdD1mdW5jdGlvbihyKXtpZih0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZVtyXT09PXVuZGVmaW5lZClxLnNhcC5sb2cuZmF0YWwoIm5vIGhhbmRsZSBmb3VuZCBmb3IgdGhpcyByZXF1ZXN0IElEIik7dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGVbcl09dW5kZWZpbmVkfTtBLnByb3RvdHlwZS5fYWJvcnRBbGxQZW5kaW5nUmVxdWVzdHNCeUhhbmRsZT1mdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGUubGVuZ3RoO2krKyl7dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGVbaV0hPT11bmRlZmluZWQmJnRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlW2ldLmFib3J0KCl9dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGU9W119O0EucHJvdG90eXBlLl9nZXRSZXF1ZXN0SWQ9ZnVuY3Rpb24ocixwKXtzd2l0Y2gocil7Y2FzZSBBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeTppZihwLmdyb3VwSWQ9PT11bmRlZmluZWQpcS5zYXAubG9nLmZhdGFsKCJtaXNzaW5nIGdyb3VwIElEIik7dmFyIGc9cC5ncm91cElkO3JldHVybiBBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSsoZz09bnVsbD8iIjpnKTtjYXNlIEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5OmlmKHAubGV2ZWw9PT11bmRlZmluZWQpcS5zYXAubG9nLmZhdGFsKCJtaXNzaW5nIGxldmVsIik7dmFyIGw9cC5sZXZlbDtyZXR1cm4iIitBLl9yZXF1ZXN0VHlwZS5sZXZlbE1lbWJlcnNRdWVyeStsO2Nhc2UgQS5fcmVxdWVzdFR5cGUudG90YWxTaXplUXVlcnk6cmV0dXJuIEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5O2RlZmF1bHQ6cS5zYXAubG9nLmZhdGFsKCJpbnZhbGlkIHJlcXVlc3QgdHlwZSAiK3IpO3JldHVybi0xfX07QS5wcm90b3R5cGUuX3JlZ2lzdGVyTmV3UmVxdWVzdD1mdW5jdGlvbihyKXtpZihyPT11bmRlZmluZWR8fHI9PSIiKXtxLnNhcC5sb2cuZmF0YWwoIm1pc3NpbmcgcmVxdWVzdCBJRCIpO3JldHVybn1pZighdGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdKXRoaXMub1BlbmRpbmdSZXF1ZXN0c1tyXT0xO2Vsc2UrK3RoaXMub1BlbmRpbmdSZXF1ZXN0c1tyXX07QS5wcm90b3R5cGUuX2NvbnNpZGVyUmVxdWVzdEdyb3VwaW5nPWZ1bmN0aW9uKHIpe2Zvcih2YXIgaT0tMSxSO1I9clsrK2ldOyl7aWYodGhpcy5vR3JvdXBlZFJlcXVlc3RzW1JdPT09dW5kZWZpbmVkKXRoaXMub0dyb3VwZWRSZXF1ZXN0c1tSXT17fTt2YXIgZz10aGlzLm9Hcm91cGVkUmVxdWVzdHNbUl07Zm9yKHZhciBqPTA7ajxyLmxlbmd0aDtqKyspZ1tyW2pdXT10cnVlfX07QS5wcm90b3R5cGUuX2lzUmVxdWVzdFBlbmRpbmc9ZnVuY3Rpb24ocil7cmV0dXJuIHRoaXMub1BlbmRpbmdSZXF1ZXN0c1tyXSE9dW5kZWZpbmVkJiZ0aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl0+MH07QS5wcm90b3R5cGUuX2RlcmVnaXN0ZXJDb21wbGV0ZWRSZXF1ZXN0PWZ1bmN0aW9uKHIpe2lmKCF0aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl0pcS5zYXAubG9nLmZhdGFsKCJhc3NlcnRpb24gZmFpbGVkOiB0aGVyZSBpcyBubyBwZW5kaW5nIHJlcXVlc3QgSUQgIityKTtpZih0aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl09PTEpZGVsZXRlIHRoaXMub1BlbmRpbmdSZXF1ZXN0c1tyXTtlbHNlLS10aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl19O0EucHJvdG90eXBlLl9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0PWZ1bmN0aW9uKHIpe2lmKHRoaXMuX2lzUmVxdWVzdFBlbmRpbmcocikpcmV0dXJuIGZhbHNlO3ZhciBnPXRydWU7aWYodGhpcy5vR3JvdXBlZFJlcXVlc3RzW3JdIT11bmRlZmluZWQpe2Zvcih2YXIgTyBpbiB0aGlzLm9Hcm91cGVkUmVxdWVzdHNbcl0pe2lmKHRoaXMub1BlbmRpbmdSZXF1ZXN0c1tPXSl7Zz1mYWxzZTticmVha319fWlmKGcpe3ZhciBSPXRoaXMub0dyb3VwZWRSZXF1ZXN0c1tyXTtkZWxldGUgdGhpcy5vR3JvdXBlZFJlcXVlc3RzW3JdO2Zvcih2YXIgTyBpbiBSKXtpZihPIT1yKXRoaXMuX2NsZWFudXBHcm91cGluZ0ZvckNvbXBsZXRlZFJlcXVlc3QoTyl9fXJldHVybiBnfTtBLnByb3RvdHlwZS5fY2xlYXJBbGxQZW5kaW5nUmVxdWVzdHM9ZnVuY3Rpb24oKXt0aGlzLm9QZW5kaW5nUmVxdWVzdHM9e307dGhpcy5vR3JvdXBlZFJlcXVlc3RzPXt9fTtBLnByb3RvdHlwZS5yZXNldERhdGE9ZnVuY3Rpb24oYyl7aWYoYyl7dmFyIHA9Yy5nZXRQYXRoKCk7ZGVsZXRlIHRoaXMubUtleVtwXTtkZWxldGUgdGhpcy5tTGVuZ3RoW3BdO2RlbGV0ZSB0aGlzLm1GaW5hbExlbmd0aFtwXX1lbHNle3RoaXMubUtleT17fTt0aGlzLm1MZW5ndGg9e307dGhpcy5tRmluYWxMZW5ndGg9e319fTtBLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGYsYyxlKXt2YXIgYj1mYWxzZTtpZighZil7aWYoZSl7dmFyIHI9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO3ZhciBFPXRoaXMub01vZGVsLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChyKTtpZihFJiYoRS5lbnRpdHlUeXBlIGluIGUpKWI9dHJ1ZX1pZihjJiYhYil7cS5lYWNoKHRoaXMubUtleSxmdW5jdGlvbihpLG4pe3EuZWFjaChuLGZ1bmN0aW9uKGksayl7aWYoayBpbiBjKXtiPXRydWU7cmV0dXJuIGZhbHNlfX0pO2lmKGIpcmV0dXJuIGZhbHNlfSl9aWYoIWMmJiFlKXtiPXRydWV9fWlmKGZ8fGIpe3RoaXMuX2Fib3J0QWxsUGVuZGluZ1JlcXVlc3RzKCk7dGhpcy5yZXNldERhdGEoKTt0aGlzLmJOZWVkc1VwZGF0ZT1mYWxzZTt0aGlzLl9maXJlUmVmcmVzaCh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uUmVmcmVzaH0pfX07QS5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZixjKXt2YXIgYj1mYWxzZTtpZighZil7aWYodGhpcy5iTmVlZHNVcGRhdGV8fCFjKXtiPXRydWV9ZWxzZXtxLmVhY2godGhpcy5tS2V5LGZ1bmN0aW9uKGksbil7cS5lYWNoKG4sZnVuY3Rpb24oaSxrKXtpZihrIGluIGMpe2I9dHJ1ZTtyZXR1cm4gZmFsc2V9fSk7aWYoYilyZXR1cm4gZmFsc2V9KX19aWYoZnx8Yil7dGhpcy5iTmVlZHNVcGRhdGU9ZmFsc2U7dGhpcy5fZmlyZUNoYW5nZSgpfX07cmV0dXJuIEF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuYW5hbHl0aWNzLlRyZWVCaW5kaW5nQWRhcHRlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5hbmFseXRpY3MuVHJlZUJpbmRpbmdBZGFwdGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2FuYWx5dGljcy9UcmVlQmluZGluZ0FkYXB0ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvVHJlZUJpbmRpbmcnLCcuL0FuYWx5dGljYWxCaW5kaW5nJ10sZnVuY3Rpb24ocSxULEEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1mdW5jdGlvbigpe2lmKCEodGhpcyBpbnN0YW5jZW9mIFQmJnRoaXMuZ2V0Q29udGV4dHM9PT11bmRlZmluZWQpKXtyZXR1cm59Zm9yKHZhciBmIGluIGEucHJvdG90eXBlKXtpZihhLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShmKSl7dGhpc1tmXT1hLnByb3RvdHlwZVtmXX19dGhpcy5fYUNvbnRleHRzPVtdO3RoaXMuX2FDb250ZXh0SW5mb3M9W107dGhpcy5fYUV4cGFuZGluZz1bXTt0aGlzLl9iSW5pdGlhbD10cnVlO3RoaXMuX29FeHBhbmRlZD17fTt0aGlzLl9vT3Blbkdyb3Vwcz17fTt0aGlzLl9iVHJpZ2dlcmVkT3Blbkdyb3Vwc0xvYWQ9ZmFsc2V9O2EucHJvdG90eXBlLl91cGRhdGVDb250ZXh0cz1mdW5jdGlvbihwLGMsQyxyKXt2YXIgST1wO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXt2YXIgbz1jW2ldO3ZhciBiPUNbaV07dGhpcy5fYUNvbnRleHRzLnNwbGljZShwLHI/MTowLG8pO3RoaXMuX2FDb250ZXh0SW5mb3Muc3BsaWNlKHAscj8xOjAsYik7cCsrfWlmKCFyKXt0aGlzLl9maXJlQ29udGV4dENoYW5nZSh7dHlwZToiaW5zZXJ0IixpbmRleDpJLGxlbmd0aDpjLmxlbmd0aH0pfXJldHVybiBDfTthLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYUNvbnRleHRzLmxlbmd0aH07YS5wcm90b3R5cGUuZ2V0Q29udGV4dEluZm89ZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuX2FDb250ZXh0SW5mb3Muc2xpY2UoaSxpKzEpWzBdfTthLnByb3RvdHlwZS5fY3JlYXRlQ29udGV4dEluZm9zPWZ1bmN0aW9uKGMscCxQLGwscyxJKXtpZighSSl7ST0wfXZhciBDPVtdO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXt2YXIgbz1jW2ldO0MucHVzaCh7Y29udGV4dDpvLGxldmVsOmwsZXhwYW5kZWQ6ZmFsc2UsY2hpbGRDb3VudDowLHBhcmVudDpwLHN1bTpzLHBvc2l0aW9uOlAsaW5kZXg6aStJfSk7UCsrfXJldHVybiBDfTthLnByb3RvdHlwZS5nZXRDb250ZXh0cz1mdW5jdGlvbihzLGwsdCl7dmFyIGI9dGhpcztpZighbCl7bD10aGlzLm9Nb2RlbC5pU2l6ZUxpbWl0fWlmKHRoaXMuX2JJbml0aWFsKXt2YXIgcj10aGlzLmdldFJvb3RDb250ZXh0cyh7c3RhcnRJbmRleDpzLGxlbmd0aDpsLHRocmVzaG9sZDp0LG51bWJlck9mRXhwYW5kZWRMZXZlbHM6dGhpcy5tUGFyYW1ldGVycy5udW1iZXJPZkV4cGFuZGVkTGV2ZWxzfSk7aWYociYmci5sZW5ndGg+MCl7dGhpcy5fYkluaXRpYWw9ZmFsc2U7dmFyIG49dGhpcy5fY3JlYXRlQ29udGV4dEluZm9zKHIsbnVsbCwwLDAsdHJ1ZSk7aWYodGhpcy5iUHJvdmlkZUdyYW5kVG90YWxzKXt0aGlzLl91cGRhdGVDb250ZXh0cygwLHIsbil9dGhpcy5fYUV4cGFuZGluZz1ufX1pZih0aGlzLl9vT3Blbkdyb3VwcyE9e30mJnRoaXMuX2JUcmlnZ2VyZWRPcGVuR3JvdXBzTG9hZD09ZmFsc2Upe3RoaXMubG9hZEdyb3Vwcyh0aGlzLl9vT3Blbkdyb3Vwcyk7dGhpcy5fYlRyaWdnZXJlZE9wZW5Hcm91cHNMb2FkPXRydWV9ZWxzZXt0aGlzLl9wcm9jZXNzRXhwYW5kKGwsdCl9dmFyIGM9dGhpcy5fYUNvbnRleHRzLnNsaWNlKHMscytsKTt2YXIgbT17fTtxLmVhY2goYyxmdW5jdGlvbihpLEMpe2lmKCFDKXt2YXIgbz1iLl9hQ29udGV4dEluZm9zW3MraV07dmFyIHA9by5wYXJlbnQ7dmFyIFM9bVtwLmdldFBhdGgoKV07aWYoUyl7Uy5zdGFydEluZGV4PU1hdGgubWluKFMuc3RhcnRJbmRleCxvLmluZGV4KTtTLnBvc2l0aW9uPU1hdGgubWluKFMucG9zaXRpb24sby5wb3NpdGlvbik7Uy5lbmRJbmRleD1NYXRoLm1heChTLmVuZEluZGV4LG8uaW5kZXgpfWVsc2V7bVtwLmdldFBhdGgoKV09e3N0YXJ0SW5kZXg6by5pbmRleCxlbmRJbmRleDpvLmluZGV4LHBhcmVudDpvLnBhcmVudCxsZXZlbDpvLmxldmVsLTEscG9zaXRpb246by5wb3NpdGlvbn19fX0pO3ZhciBiPXRoaXMsdT1mYWxzZTtxLmVhY2gobSxmdW5jdGlvbihpLFMpe3ZhciBNPWIuZ2V0Tm9kZUNvbnRleHRzKFMucGFyZW50LHtzdGFydEluZGV4OlMuc3RhcnRJbmRleCxsZW5ndGg6Uy5lbmRJbmRleC1TLnN0YXJ0SW5kZXgrMSx0aHJlc2hvbGQ6dCxsZXZlbDpTLmxldmVsLG51bWJlck9mRXhwYW5kZWRMZXZlbHM6TWF0aC5tYXgoYi5tUGFyYW1ldGVycy5udW1iZXJPZkV4cGFuZGVkTGV2ZWxzLVMubGV2ZWwsMCl9KTtpZihNLmxlbmd0aD4wKXtiLl91cGRhdGVDb250ZXh0cyhTLnBvc2l0aW9uLE0sYi5fY3JlYXRlQ29udGV4dEluZm9zKE0sUy5wYXJlbnQsUy5wb3NpdGlvbixTLmxldmVsKzEsZmFsc2UpLHRydWUpO2IuX3VwZGF0ZUV4cGFuZGVkSW5mbyhTLnBhcmVudCxTLmxldmVsLFMuc3RhcnRJbmRleCxTLmVuZEluZGV4LVMuc3RhcnRJbmRleCsxLHQpO3U9dHJ1ZX19KTtpZih1KXtjPXRoaXMuX2FDb250ZXh0cy5zbGljZShzLHMrbCl9cmV0dXJuIGN9O2EucHJvdG90eXBlLl9wcm9jZXNzRXhwYW5kPWZ1bmN0aW9uKGwsdCl7dmFyIGI9dGhpcyxzPXRoaXMuX2FFeHBhbmRpbmcubGVuZ3RoLGM9ZmFsc2UsaD10aGlzLmhhc01lYXN1cmVzKCk7Zm9yKHZhciBpPXRoaXMuX2FFeHBhbmRpbmcubGVuZ3RoLTE7aT49MDtpLS0pe3ZhciBDPXRoaXMuX2FFeHBhbmRpbmdbaV07dmFyIG89Qy5jb250ZXh0O3ZhciBuPSF0aGlzLmJQcm92aWRlR3JhbmRUb3RhbHMmJm8uZ2V0UGF0aCgpPT09Ii9hcnRpZmljaWFsUm9vdENvbnRlbnQiO2lmKHEuaW5BcnJheShvLHRoaXMuX2FDb250ZXh0cyk9PS0xJiYhbil7Y29udGludWV9dmFyIGQ9dGhpcy5nZXROb2RlQ29udGV4dHMobyx7c3RhcnRJbmRleDowLGxlbmd0aDpsLHRocmVzaG9sZDp0LGxldmVsOkMubGV2ZWx9KTtpZihkJiZkLmxlbmd0aD4wKXt2YXIgcj10aGlzLmdldEdyb3VwU2l6ZShvLEMubGV2ZWwpLEk9Qy5wYXJlbnQ/Qy5wb3NpdGlvbisxOjAscD1JLEw9Qy5sZXZlbCsxLGU9dGhpcy5fY3JlYXRlQ29udGV4dEluZm9zKGQsbyxwLEwsZmFsc2UpO3ZhciBjPWZhbHNlO2Zvcih2YXIgaj0wO2o8ZC5sZW5ndGg7aisrKXtpZihMPHRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoJiZ0aGlzLl9vT3Blbkdyb3Vwc1t0aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQoZFtqXSxMKV0pe3RoaXMuX2FFeHBhbmRpbmcucHVzaChlW2pdKTtkZWxldGUgdGhpcy5fb09wZW5Hcm91cHNbdGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KGRbal0sTCldO2M9dHJ1ZX19cCs9ZS5sZW5ndGg7dmFyIGY9ZS5sZW5ndGg7aWYocj4tMSl7Zm9yKHZhciBqPWQubGVuZ3RoO2o8cjtqKyspe2QucHVzaCh1bmRlZmluZWQpO2UucHVzaCh0aGlzLl9jcmVhdGVDb250ZXh0SW5mb3MoW3VuZGVmaW5lZF0sbyxwLEwsZmFsc2UsZilbMF0pO3ArKztmKyt9fWlmKG8mJkMucGFyZW50IT1udWxsJiZyPjEmJiF0aGlzLm1QYXJhbWV0ZXJzLnN1bU9uVG9wJiZoKXtkLnB1c2gobyk7ZS5wdXNoKHRoaXMuX2NyZWF0ZUNvbnRleHRJbmZvcyhbb10sbyxwLEwtMSx0cnVlLGYpWzBdKX12YXIgZz1kLmxlbmd0aDt0aGlzLl91cGRhdGVDb250ZXh0cyhJLGQsZSk7dmFyIGs9SStnO3ZhciBQO0wtLTt2YXIgbT1JO3doaWxlKFA9dGhpcy5fYUNvbnRleHRJbmZvc1ttXSl7aWYoUC5sZXZlbD09TCl7UC5jaGlsZENvdW50PVAuY2hpbGRDb3VudCtnO0wtLX1tLS07aWYoTDwwKWJyZWFrfXZhciB1PXRoaXMuX2FDb250ZXh0SW5mb3Nba107aWYodSl7dmFyIHY9dGhpcy5fYUNvbnRleHRJbmZvc1trLTFdLnBvc2l0aW9uLXUucG9zaXRpb24rMTtmb3IodmFyIGo9aztqPHRoaXMuX2FDb250ZXh0SW5mb3MubGVuZ3RoO2orKyl7dGhpcy5fYUNvbnRleHRJbmZvc1tqXS5wb3NpdGlvbis9dn19aWYoQyl7Qy5leHBhbmRlZD10cnVlfXRoaXMuX3VwZGF0ZUV4cGFuZGVkSW5mbyhDLmNvbnRleHQsQy5sZXZlbCwwLGwsdCk7dGhpcy5fYUV4cGFuZGluZy5zcGxpY2UoaSwxKX19aWYoKHMhPXRoaXMuX2FFeHBhbmRpbmcubGVuZ3RoJiZ0aGlzLl9hRXhwYW5kaW5nLmxlbmd0aD4wKXx8Yyl7dGhpcy5fcHJvY2Vzc0V4cGFuZChsLHQpfX07YS5wcm90b3R5cGUuX3VwZGF0ZUV4cGFuZGVkSW5mbz1mdW5jdGlvbihjLGwscyxMLHQpe3ZhciBiPXRoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dChjLGwpO3ZhciBwPWIuc3Vic3RyKDAsYi5sZW5ndGgtMSkuc3BsaXQoIi8iKTt2YXIgZT10aGlzLl9vRXhwYW5kZWQ7Zm9yKHZhciBqPTA7ajxwLmxlbmd0aDtqKyspe3ZhciBQPXBbal07aWYoaj09MCl7UD0icm9vdCJ9ZVtQXT1lW1BdfHx7fTtlPWVbUF07aWYoaj09cC5sZW5ndGgtMSl7ZVsic2VjdGlvbnMiXT1lWyJzZWN0aW9ucyJdfHxbXTtpZihlWyJzZWN0aW9ucyJdLmxlbmd0aD09MCl7ZVsic2VjdGlvbnMiXS5wdXNoKHtzdGFydEluZGV4OnMsbGVuZ3RoOkwsdGhyZXNob2xkOnR9KX12YXIgRT1mYWxzZTtmb3IodmFyIGs9MDtrPGVbInNlY3Rpb25zIl0ubGVuZ3RoO2srKyl7dmFyIFM9ZVsic2VjdGlvbnMiXVtrXTt2YXIgaT1TLnN0YXJ0SW5kZXgrUy5sZW5ndGgrUy50aHJlc2hvbGQ7dmFyIGQ9cytMK3Q7aWYoUy5zdGFydEluZGV4PD1zJiZpPj1kKXtyZXR1cm59ZWxzZSBpZihTLnN0YXJ0SW5kZXg8PXMmJmk+PXMpe1MudGhyZXNob2xkPU1hdGgubWF4KFMudGhyZXNob2xkLHQpO1MubGVuZ3RoPWQtUy5zdGFydEluZGV4LVMudGhyZXNob2xkO0U9dHJ1ZX1lbHNlIGlmKFMuc3RhcnRJbmRleD5zJiZpPmQpe1MubGVuZ3RoPVMubGVuZ3RoKyhTLnN0YXJ0SW5kZXgtcyk7Uy5zdGFydEluZGV4PXM7Uy50aHJlc2hvbGQ9TWF0aC5tYXgoUy50aHJlc2hvbGQsdCk7RT10cnVlfWVsc2UgaWYoUy5zdGFydEluZGV4PnMmJlMuZW5kSW5kZXg8ZCl7Uy5zdGFydEluZGV4PXM7Uy5sZW5ndGg9TDtTLnRocmVzaG9sZD10O0U9dHJ1ZX19aWYoIUUpe2VbInNlY3Rpb25zIl0ucHVzaCh7c3RhcnRJbmRleDpzLGxlbmd0aDpMLHRocmVzaG9sZDp0fSl9fWVsc2V7ZVsiY2hpbGRyZW4iXT1lWyJjaGlsZHJlbiJdfHx7fTtlWyJjaGlsZFByb3BlcnR5Il09dGhpcy5hQWdncmVnYXRpb25MZXZlbFtqXTtlPWVbImNoaWxkcmVuIl19fX07YS5wcm90b3R5cGUuZXhwYW5kPWZ1bmN0aW9uKGkpe3ZhciBjPXRoaXMuX2FDb250ZXh0SW5mb3NbaV07aWYoYy5leHBhbmRlZCl7cmV0dXJufXRoaXMuX2FFeHBhbmRpbmcucHVzaChjKX07YS5wcm90b3R5cGUuY29sbGFwc2U9ZnVuY3Rpb24oSSl7dmFyIGM9dGhpcy5fYUNvbnRleHRJbmZvc1tJXTt2YXIgQz10aGlzLl9hQ29udGV4dHNbSV07aWYoIWMuZXhwYW5kZWQpe3JldHVybn12YXIgcD1jLnBvc2l0aW9uKzEsbD1jLmNoaWxkQ291bnQsTD1jLmxldmVsO3ZhciBlPXRoaXMuX29FeHBhbmRlZFsicm9vdCJdO3ZhciBzPXRoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dChDLEwpO3ZhciBQPXMuc3Vic3RyKDAscy5sZW5ndGgtMSkuc3BsaXQoIi8iKTtmb3IodmFyIGk9MTtpPEw7aSsrKXtlPWVbImNoaWxkcmVuIl1bUFtpXV19ZGVsZXRlIGVbImNoaWxkcmVuIl1bUFtQLmxlbmd0aC0xXV07dmFyIHI9cDt0aGlzLl9hQ29udGV4dHMuc3BsaWNlKHAsbCk7dGhpcy5fYUNvbnRleHRJbmZvcy5zcGxpY2UocCxsKTtwLS07dmFyIG87d2hpbGUobz10aGlzLl9hQ29udGV4dEluZm9zW3BdKXtpZihvLmxldmVsPT1MKXtvLmNoaWxkQ291bnQ9by5jaGlsZENvdW50LWw7TC0tfXAtLTtpZihMPDApYnJlYWt9aWYocjx0aGlzLl9hQ29udGV4dEluZm9zLmxlbmd0aCl7dmFyIGQ9dGhpcy5fYUNvbnRleHRJbmZvc1tyLTFdLnBvc2l0aW9uLXRoaXMuX2FDb250ZXh0SW5mb3Nbcl0ucG9zaXRpb24rMTtmb3IodmFyIGo9cjtqPHRoaXMuX2FDb250ZXh0SW5mb3MubGVuZ3RoO2orKyl7dGhpcy5fYUNvbnRleHRJbmZvc1tqXS5wb3NpdGlvbis9ZH10aGlzLl9maXJlQ29udGV4dENoYW5nZSh7dHlwZToicmVtb3ZlIixpbmRleDpyLGxlbmd0aDpNYXRoLmFicyhkKX0pfWMuZXhwYW5kZWQ9ZmFsc2V9O2EucHJvdG90eXBlLmNvbGxhcHNlQWxsPWZ1bmN0aW9uKGwpe2lmKCFsfHxsPDEpe2w9MX1mb3IodmFyIGk9MCxqPXRoaXMuX2FDb250ZXh0SW5mb3MubGVuZ3RoO2k8ajtpKyspe2lmKHRoaXMuX2FDb250ZXh0SW5mb3NbaV0ubGV2ZWw9PWwpe3RoaXMuY29sbGFwc2UoaSk7aj10aGlzLl9hQ29udGV4dEluZm9zLmxlbmd0aH19fTthLnByb3RvdHlwZS50b2dnbGVJbmRleD1mdW5jdGlvbihpKXtpZighdGhpcy5fYUNvbnRleHRJbmZvc1tpXS5leHBhbmRlZCl7dGhpcy5leHBhbmQoaSl9ZWxzZXt0aGlzLmNvbGxhcHNlKGkpfX07YS5wcm90b3R5cGUuaW5kZXhIYXNDaGlsZHJlbj1mdW5jdGlvbihpKXt2YXIgYz10aGlzLl9hQ29udGV4dEluZm9zW2ldO2lmKCFjLnBhcmVudHx8Yy5zdW0pe3JldHVybiBmYWxzZX1lbHNle3JldHVybiBBLnByb3RvdHlwZS5oYXNDaGlsZHJlbi5jYWxsKHRoaXMsYy5jb250ZXh0LHtsZXZlbDpjLmxldmVsfSl9fTthLnByb3RvdHlwZS5yZXNldERhdGE9ZnVuY3Rpb24oYyl7dmFyIHI9QS5wcm90b3R5cGUucmVzZXREYXRhLmNhbGwodGhpcyxjKTt0aGlzLl9hQ29udGV4dHM9W107dGhpcy5fYUNvbnRleHRJbmZvcz1bXTt0aGlzLl9hRXhwYW5kaW5nPVtdO3RoaXMuX29PcGVuR3JvdXBzPXt9O3RoaXMuX3JlbW92ZUdyb3Vwcyh0aGlzLl9vRXhwYW5kZWRbInJvb3QiXSwwLCcnKTt0aGlzLl9vRXhwYW5kZWQ9e307dGhpcy5fYkluaXRpYWw9dHJ1ZTt0aGlzLl9iVHJpZ2dlcmVkT3Blbkdyb3Vwc0xvYWQ9ZmFsc2U7cmV0dXJuIHJ9O2EucHJvdG90eXBlLnVwZGF0ZUFuYWx5dGljYWxJbmZvPWZ1bmN0aW9uKGMpe3ZhciByPUEucHJvdG90eXBlLnVwZGF0ZUFuYWx5dGljYWxJbmZvLmNhbGwodGhpcyxjKTt0aGlzLl9hQ29udGV4dHM9W107dGhpcy5fYUNvbnRleHRJbmZvcz1bXTt0aGlzLl9hRXhwYW5kaW5nPVtdO3RoaXMuX29PcGVuR3JvdXBzPXt9O3RoaXMuX3JlbW92ZUdyb3Vwcyh0aGlzLl9vRXhwYW5kZWRbInJvb3QiXSwwLCcnKTt0aGlzLl9vRXhwYW5kZWQ9e307dGhpcy5fYkluaXRpYWw9dHJ1ZTt0aGlzLl9iVHJpZ2dlcmVkT3Blbkdyb3Vwc0xvYWQ9ZmFsc2U7cmV0dXJuIHJ9O2EucHJvdG90eXBlLl9yZW1vdmVHcm91cHM9ZnVuY3Rpb24oZyxsLHApe2lmKCFnKXtyZXR1cm59dGhpcy5fb09wZW5Hcm91cHNbcCsnLyddPWcuc2VjdGlvbnM7aWYoIWcuY2hpbGRQcm9wZXJ0eSl7cmV0dXJufWlmKGcuY2hpbGRQcm9wZXJ0eSE9dGhpcy5hQWdncmVnYXRpb25MZXZlbFtsXSl7ZGVsZXRlIGcuY2hpbGRyZW47ZGVsZXRlIGcuY2hpbGRQcm9wZXJ0eX1lbHNle2Zvcih2YXIgYyBpbiBnLmNoaWxkcmVuKXt0aGlzLl9yZW1vdmVHcm91cHMoZy5jaGlsZHJlbltjXSxsKzEscCsnLycrYyl9fX07YS5wcm90b3R5cGUuYXR0YWNoQ29udGV4dENoYW5nZT1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImNvbnRleHRDaGFuZ2UiLGYsbCl9O2EucHJvdG90eXBlLmRldGFjaENvbnRleHRDaGFuZ2U9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJjb250ZXh0Q2hhbmdlIixmLGwpfTthLnByb3RvdHlwZS5fZmlyZUNvbnRleHRDaGFuZ2U9ZnVuY3Rpb24obSl7dGhpcy5maXJlRXZlbnQoImNvbnRleHRDaGFuZ2UiLG0pfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5GaWx0ZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuRmlsdGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL0ZpbHRlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9GaWx0ZXInLCdzYXAvdWkvbW9kZWwvRmlsdGVyT3BlcmF0b3InXSxmdW5jdGlvbihxLEYsYSl7InVzZSBzdHJpY3QiO3ZhciBPPXNhcC51aS5iYXNlLk9iamVjdC5leHRlbmQoInNhcC51aS5tb2RlbC5vZGF0YS5GaWx0ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihwLHYsQSl7aWYodHlwZW9mIHA9PT0ib2JqZWN0Iil7dmFyIGY9cDtwPWYucGF0aDt2PWYudmFsdWVzO0E9Zi5hbmR9dGhpcy5zUGF0aD1wO3RoaXMuYVZhbHVlcz12O3RoaXMuYkFORD1BPT11bmRlZmluZWQ/dHJ1ZTpBfSxjb252ZXJ0OmZ1bmN0aW9uKCl7dmFyIGY9W107Zm9yKHZhciBpPTAsbD10aGlzLmFWYWx1ZXMmJnRoaXMuYVZhbHVlcy5sZW5ndGh8fDA7aTxsO2krKyl7Zi5wdXNoKG5ldyBGKHtwYXRoOnRoaXMuc1BhdGgsb3BlcmF0b3I6dGhpcy5hVmFsdWVzW2ldLm9wZXJhdG9yLHZhbHVlMTp0aGlzLmFWYWx1ZXNbaV0udmFsdWUxLHZhbHVlMjp0aGlzLmFWYWx1ZXNbaV0udmFsdWUyfSkpfWlmKGYubGVuZ3RoPjEpe3ZhciBvPW5ldyBGKHtmaWx0ZXJzOmYsYW5kOnRoaXMuYkFORH0pO3JldHVybiBvfWVsc2V7cmV0dXJuIGZbMF19fX0pO3JldHVybiBPfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQW5ub3RhdGlvbnMnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFBbm5vdGF0aW9ucycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9PRGF0YUFubm90YXRpb25zIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBPPXNhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIuZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFBbm5vdGF0aW9ucyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGEsbSxwKXsidXNlIHN0cmljdCI7RS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vTWV0YWRhdGE9bTt0aGlzLm9Bbm5vdGF0aW9ucz1udWxsO3RoaXMuYkluaXRpYWxpemVkPWZhbHNlO3RoaXMuYkxvYWRlZD1mYWxzZTt0aGlzLmJBc3luYz1wLmFzeW5jO3RoaXMueFBhdGg9bnVsbDt0aGlzLnNBbm5vdGF0aW9uVVJJPWE7dGhpcy5vWE1MRG9jPW51bGw7dGhpcy5lcnJvcj1udWxsO3RoaXMub0FsaWFzPXt9O3RoaXMuYlZhbGlkWE1MPXRydWU7dGhpcy5vUmVxdWVzdEhhbmRsZT1udWxsO3RoaXMub0xvYWRFdmVudD1udWxsO3RoaXMub0ZhaWxlZEV2ZW50PW51bGw7dGhpcy54bWxDb21wYXRWZXJzaW9uPWZhbHNlO2lmKGEpe3RoaXMubG9hZFhNTCgpO2lmKCF0aGlzLmJBc3luYyl7aWYodGhpcy5lcnJvcil7cS5zYXAubG9nLmVycm9yKCJPRGF0YSBhbm5vdGF0aW9ucyBjb3VsZCBub3QgYmUgbG9hZGVkOiAiK3RoaXMuZXJyb3IubWVzc2FnZSl9fX19LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsicGFyc2UiLCJnZXRBbm5vdGF0aW9uc0RhdGEiLCJhdHRhY2hGYWlsZWQiLCJkZXRhY2hBbm5vYXRpb25zRmFpbGVkIiwiYXR0YWNoTG9hZGVkIiwiZGV0YWNoTG9hZGVkIl19fSk7Ty5wcm90b3R5cGUuZ2V0QW5ub3RhdGlvbnNEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0Fubm90YXRpb25zfTtPLnByb3RvdHlwZS5pc0xvYWRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJMb2FkZWR9O08ucHJvdG90eXBlLmZpcmVMb2FkZWQ9ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgibG9hZGVkIik7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLmF0dGFjaExvYWRlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgibG9hZGVkIixkLGYsbCk7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLmRldGFjaExvYWRlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImxvYWRlZCIsZixsKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuZmlyZUZhaWxlZD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiZmFpbGVkIixhKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuYXR0YWNoRmFpbGVkPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJmYWlsZWQiLGQsZixsKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuZGV0YWNoRmFpbGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiZmFpbGVkIixmLGwpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5fcGFyc2VBbGlhc2VzPWZ1bmN0aW9uKGEpe3ZhciByPXRoaXMueFBhdGguc2VsZWN0Tm9kZXModGhpcy5vWE1MRG9jLCIvL2VkbXg6UmVmZXJlbmNlIix0aGlzLm9YTUxEb2MpO2Zvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSs9MSl7dmFyIGI9dGhpcy54UGF0aC5uZXh0Tm9kZShyLGkpO3ZhciBjPXRoaXMueFBhdGguc2VsZWN0Tm9kZXModGhpcy5vWE1MRG9jLCIuL2VkbXg6SW5jbHVkZSIsYik7aWYoYyYmYy5sZW5ndGg+MCl7dmFyIGQ9dGhpcy54UGF0aC5uZXh0Tm9kZShjLDApO2lmKGQuZ2V0QXR0cmlidXRlKCJBbGlhcyIpKXt0aGlzLm9BbGlhc1tkLmdldEF0dHJpYnV0ZSgiQWxpYXMiKV09ZC5nZXRBdHRyaWJ1dGUoIk5hbWVzcGFjZSIpfWVsc2V7dGhpcy5vQWxpYXNbZC5nZXRBdHRyaWJ1dGUoIk5hbWVzcGFjZSIpXT1kLmdldEF0dHJpYnV0ZSgiTmFtZXNwYWNlIil9fXZhciBlPXRoaXMueFBhdGguc2VsZWN0Tm9kZXModGhpcy5vWE1MRG9jLCIuL2VkbXg6SW5jbHVkZUFubm90YXRpb25zIixiKTtpZihlLmxlbmd0aD4wKXtmb3IodmFyIGo9MDtqPGUubGVuZ3RoO2orPTEpe3ZhciBmPXRoaXMueFBhdGgubmV4dE5vZGUoZSxqKTtpZihmLmdldEF0dHJpYnV0ZSgiVGFyZ2V0TmFtZXNwYWNlIikpe3ZhciBBPWYuZ2V0QXR0cmlidXRlKCJUYXJnZXROYW1lc3BhY2UiKTtpZighYVtBXSl7YVtBXT17fX1hW0FdW2YuZ2V0QXR0cmlidXRlKCJUZXJtTmFtZXNwYWNlIildPWIuZ2V0QXR0cmlidXRlKCJVcmkiKX1lbHNle2FbZi5nZXRBdHRyaWJ1dGUoIlRlcm1OYW1lc3BhY2UiKV09Yi5nZXRBdHRyaWJ1dGUoIlVyaSIpfX19fX07Ty5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oKXt2YXIgbT17fSxzLFM9e30sYSxBPXt9LHQ9dGhpcyxiLFQsYyxkLE0sZSxmLGcsaCxqLHAsayxsLG4sbyxyLHUsdix3LHgseSx6LEI7dGhpcy54UGF0aD10aGlzLmdldFhQYXRoKCk7dGhpcy5vU2VydmljZU1ldGFkYXRhPXRoaXMub01ldGFkYXRhLmdldFNlcnZpY2VNZXRhZGF0YSgpO2lmKHRoaXMuYkluaXRpYWxpemVkKXtyZXR1cm4gdGhpcy5vQW5ub3RhdGlvbnN9dGhpcy5vWE1MRG9jPXRoaXMueFBhdGguc2V0TmFtZVNwYWNlKHRoaXMub1hNTERvYyk7cz10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHRoaXMub1hNTERvYywiLy9kOlNjaGVtYSIsdGhpcy5vWE1MRG9jKTtmb3IodmFyIGk9MDtpPHMubGVuZ3RoO2krPTEpe2E9dGhpcy54UGF0aC5uZXh0Tm9kZShzLGkpO1MuQWxpYXM9YS5nZXRBdHRyaWJ1dGUoIkFsaWFzIik7Uy5OYW1lc3BhY2U9YS5nZXRBdHRyaWJ1dGUoIk5hbWVzcGFjZSIpfXRoaXMuX3BhcnNlQWxpYXNlcyhBKTtpZihBKXttLmFubm90YXRpb25SZWZlcmVuY2VzPUF9bS5hbGlhc0RlZmluaXRpb25zPXRoaXMub0FsaWFzO2I9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh0aGlzLm9YTUxEb2MsIi8vZDpUZXJtIix0aGlzLm9YTUxEb2MpO2lmKGIubGVuZ3RoPjApe1Q9e307Zm9yKHZhciBDPTA7QzxiLmxlbmd0aDtDKz0xKXtjPXRoaXMueFBhdGgubmV4dE5vZGUoYixDKTtkPXRoaXMucmVwbGFjZVdpdGhBbGlhcyhjLmdldEF0dHJpYnV0ZSgiVHlwZSIpLHRoaXMub0FsaWFzKTtUWyJAIitTLkFsaWFzKyIuIitjLmdldEF0dHJpYnV0ZSgiTmFtZSIpXT1kfW0udGVybURlZmluaXRpb25zPVR9TT10aGlzLmdldEFsbFByb3BlcnRpZXNNZXRhZGF0YSh0aGlzLm9TZXJ2aWNlTWV0YWRhdGEpO2lmKE0uZXh0ZW5zaW9ucyl7bS5wcm9wZXJ0eUV4dGVuc2lvbnM9TS5leHRlbnNpb25zfWU9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh0aGlzLm9YTUxEb2MsIi8vZDpBbm5vdGF0aW9ucyAiLHRoaXMub1hNTERvYyk7Zm9yKHZhciBDPTA7QzxlLmxlbmd0aDtDKz0xKXtmPXRoaXMueFBhdGgubmV4dE5vZGUoZSxDKTtpZihmLmhhc0NoaWxkTm9kZXMoKT09PWZhbHNlKXtjb250aW51ZX1nPWYuZ2V0QXR0cmlidXRlKCJUYXJnZXQiKTtoPWcuc3BsaXQoIi4iKVswXTtpZihoJiZ0aGlzLm9BbGlhc1toXSl7Zz1nLnJlcGxhY2UobmV3IFJlZ0V4cChoLCIiKSx0aGlzLm9BbGlhc1toXSl9aj1nO3A9bnVsbDtpZihnLmluZGV4T2YoIi8iKT4wKXtqPWcuc3BsaXQoIi8iKVswXTtwPWcucmVwbGFjZShqKyIvIiwiIil9aWYoIW1bal0pe21bal09e319aWYocCl7aWYoIW0ucHJvcGVydHlBbm5vdGF0aW9ucyl7bS5wcm9wZXJ0eUFubm90YXRpb25zPXt9fWlmKCFtLnByb3BlcnR5QW5ub3RhdGlvbnNbal0pe20ucHJvcGVydHlBbm5vdGF0aW9uc1tqXT17fX1tLnByb3BlcnR5QW5ub3RhdGlvbnNbal1bcF09e307az10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHRoaXMub1hNTERvYywiLi9kOkFubm90YXRpb24iLGYpO2Zvcih2YXIgRD0wO0Q8ay5sZW5ndGg7RCs9MSl7bD10aGlzLnhQYXRoLm5leHROb2RlKGssRCk7aWYobC5oYXNDaGlsZE5vZGVzKCk9PT1mYWxzZSl7bj10aGlzLnJlcGxhY2VXaXRoQWxpYXMobC5nZXRBdHRyaWJ1dGUoIlRlcm0iKSk7bS5wcm9wZXJ0eUFubm90YXRpb25zW2pdW3BdW25dPXRoaXMuZ2V0UHJvcGVydHlWYWx1ZUF0dHJpYnV0ZXMobCl9fX1lbHNle289ai5yZXBsYWNlKHRoaXMub0FsaWFzW2hdLGgpO2s9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh0aGlzLm9YTUxEb2MsIi4vZDpBbm5vdGF0aW9uIixmKTtmb3IodmFyIEY9MDtGPGsubGVuZ3RoO0YrPTEpe2w9dGhpcy54UGF0aC5uZXh0Tm9kZShrLEYpO3I9bC5nZXRBdHRyaWJ1dGUoIlF1YWxpZmllciIpO3U9dGhpcy5yZXBsYWNlV2l0aEFsaWFzKGwuZ2V0QXR0cmlidXRlKCJUZXJtIikpO2lmKHIpe3UrPSIjIityfXY9dGhpcy5nZXRQcm9wZXJ0eVZhbHVlKHRoaXMub1hNTERvYyxsLG8pO3Y9dGhpcy5zZXRFZG1UeXBlcyh2LE0udHlwZXMsaixTKTttW2pdW3VdPXZ9dz10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHRoaXMub1hNTERvYywiLy9kOkFubm90YXRpb25zW2NvbnRhaW5zKEBUYXJnZXQsICciK28rIicpXS8vZDpQcm9wZXJ0eVZhbHVlW2NvbnRhaW5zKEBQYXRoLCAnLycpXS8vQFBhdGgiLHRoaXMub1hNTERvYyk7Zm9yKGk9MDtpPHcubGVuZ3RoO2krPTEpe3g9dGhpcy54UGF0aC5uZXh0Tm9kZSh3LGkpO3k9eC52YWx1ZTtpZihtLnByb3BlcnR5QW5ub3RhdGlvbnMpe2lmKG0ucHJvcGVydHlBbm5vdGF0aW9uc1tqXSl7aWYobS5wcm9wZXJ0eUFubm90YXRpb25zW2pdW3ldKXtjb250aW51ZX19fXo9eS5zcGxpdCgnLycpO2lmKHRoaXMuaXNOYXZQcm9wZXJ0eShqLHpbMF0sdGhpcy5vU2VydmljZU1ldGFkYXRhKSl7aWYoIW0uZXhwYW5kKXttLmV4cGFuZD17fX1pZighbS5leHBhbmRbal0pe20uZXhwYW5kW2pdPXt9fW0uZXhwYW5kW2pdW3pbMF1dPXpbMF19fUI9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh0aGlzLm9YTUxEb2MsIi8vZDpBbm5vdGF0aW9uc1tjb250YWlucyhAVGFyZ2V0LCAnIitvKyInKV0vL2Q6UGF0aFtjb250YWlucyguLCAnLycpXSIsdGhpcy5vWE1MRG9jKTtmb3IoaT0wO2k8Qi5sZW5ndGg7aSs9MSl7eD10aGlzLnhQYXRoLm5leHROb2RlKEIsaSk7eT10aGlzLnhQYXRoLmdldE5vZGVUZXh0KHgpO2lmKG0ucHJvcGVydHlBbm5vdGF0aW9uc1tqXSl7aWYobS5wcm9wZXJ0eUFubm90YXRpb25zW2pdW3ldKXtjb250aW51ZX19aWYoIW0uZXhwYW5kKXttLmV4cGFuZD17fX1pZighbS5leHBhbmRbal0pe20uZXhwYW5kW2pdPXt9fXo9eS5zcGxpdCgnLycpO2lmKHRoaXMuaXNOYXZQcm9wZXJ0eShqLHpbMF0sdGhpcy5vU2VydmljZU1ldGFkYXRhKSl7aWYoIW0uZXhwYW5kKXttLmV4cGFuZD17fX1pZighbS5leHBhbmRbal0pe20uZXhwYW5kW2pdPXt9fW0uZXhwYW5kW2pdW3pbMF1dPXpbMF19fX19dGhpcy5vQW5ub3RhdGlvbnM9bTt0aGlzLmJJbml0aWFsaXplZD10cnVlO2lmKHRoaXMuYkFzeW5jKXt0aGlzLmZpcmVMb2FkZWQoe2Fubm90YXRpb25zOnRoaXN9KX1lbHNle3RoaXMub0xvYWRFdmVudD1xLnNhcC5kZWxheWVkQ2FsbCgwLHRoaXMsdGhpcy5maXJlTG9hZGVkLFt0XSl9cmV0dXJuIHRoaXMub0Fubm90YXRpb25zfTtPLnByb3RvdHlwZS5nZXRYUGF0aD1mdW5jdGlvbigpe3ZhciB4PXt9O2lmKHRoaXMueG1sQ29tcGF0VmVyc2lvbil7eD17c2V0TmFtZVNwYWNlOmZ1bmN0aW9uKG8pe28uc2V0UHJvcGVydHkoIlNlbGVjdGlvbk5hbWVzcGFjZXMiLCd4bWxuczplZG14PSJodHRwOi8vZG9jcy5vYXNpcy1vcGVuLm9yZy9vZGF0YS9ucy9lZG14IiB4bWxuczpkPSJodHRwOi8vZG9jcy5vYXNpcy1vcGVuLm9yZy9vZGF0YS9ucy9lZG0iJyk7by5zZXRQcm9wZXJ0eSgiU2VsZWN0aW9uTGFuZ3VhZ2UiLCJYUGF0aCIpO3JldHVybiBvfSxzZWxlY3ROb2RlczpmdW5jdGlvbihvLHgsaSl7cmV0dXJuIGkuc2VsZWN0Tm9kZXMoeCl9LG5leHROb2RlOmZ1bmN0aW9uKG4pe3JldHVybiBuLm5leHROb2RlKCl9LGdldE5vZGVUZXh0OmZ1bmN0aW9uKG4pe3JldHVybiBuLnRleHR9fX1lbHNle3g9e3NldE5hbWVTcGFjZTpmdW5jdGlvbihvKXtyZXR1cm4gb30sbnNSZXNvbHZlcjpmdW5jdGlvbihwKXt2YXIgbj17ImVkbXgiOiJodHRwOi8vZG9jcy5vYXNpcy1vcGVuLm9yZy9vZGF0YS9ucy9lZG14IiwiZCI6Imh0dHA6Ly9kb2NzLm9hc2lzLW9wZW4ub3JnL29kYXRhL25zL2VkbSJ9O3JldHVybiBuW3BdfHxudWxsfSxzZWxlY3ROb2RlczpmdW5jdGlvbihvLHAsaSl7dmFyIGE9by5ldmFsdWF0ZShwLGksdGhpcy5uc1Jlc29sdmVyLDcsbnVsbCk7YS5sZW5ndGg9YS5zbmFwc2hvdExlbmd0aDtyZXR1cm4gYX0sbmV4dE5vZGU6ZnVuY3Rpb24obixpKXtyZXR1cm4gbi5zbmFwc2hvdEl0ZW0oaSl9LGdldE5vZGVUZXh0OmZ1bmN0aW9uKG4pe3JldHVybiBuLnRleHRDb250ZW50fX19cmV0dXJuIHh9O08ucHJvdG90eXBlLnNldFhNTD1mdW5jdGlvbih4LFgpe3ZhciB0PXRoaXM7aWYoc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXt0aGlzLm9YTUxEb2M9bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKTt0aGlzLm9YTUxEb2MubG9hZFhNTChYKTt0aGlzLnhtbENvbXBhdFZlcnNpb249dHJ1ZX1lbHNlIGlmKHgpe3RoaXMub1hNTERvYz14fWVsc2V7dGhpcy5vWE1MRG9jPW5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoWCwnYXBwbGljYXRpb24veG1sJyl9aWYodGhpcy5vWE1MRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aD4wKXtyZXR1cm4gZmFsc2V9ZWxzZXtpZihxLmlzRW1wdHlPYmplY3QodGhpcy5vTWV0YWRhdGEuZ2V0U2VydmljZU1ldGFkYXRhKCkpKXt0aGlzLm9NZXRhZGF0YS5hdHRhY2hMb2FkZWQoZnVuY3Rpb24oKXt0LnBhcnNlKCl9KX1lbHNle3RoaXMucGFyc2UoKX1yZXR1cm4gdHJ1ZX19O08ucHJvdG90eXBlLmxvYWRYTUw9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3ZhciBhPXt1cmw6dGhpcy5zQW5ub3RhdGlvblVSSSxhc3luYzp0aGlzLmJBc3luY307dmFyIGg9ZnVuY3Rpb24gX2hhbmRsZUZhaWwoaixzKXtpZih0Lm9SZXF1ZXN0SGFuZGxlJiZ0Lm9SZXF1ZXN0SGFuZGxlLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGwpe3JldHVybn10Lm9SZXF1ZXN0SGFuZGxlPW51bGw7dC5lcnJvcj17bWVzc2FnZTpzLHN0YXR1c0NvZGU6ai5zdGF0dXNDb2RlLHN0YXR1c1RleHQ6ai5zdGF0dXNUZXh0LHJlc3BvbnNlVGV4dDpqLnJlc3BvbnNlVGV4dH07aWYoIXRoaXMuYkFzeW5jKXt0aGlzLm9GYWlsZWRFdmVudD1xLnNhcC5kZWxheWVkQ2FsbCgwLHQsdC5maXJlRmFpbGVkLFt0LmVycm9yXSl9ZWxzZXt0LmZpcmVGYWlsZWQodC5lcnJvcil9dC5iSW5pdGlhbGl6ZWQ9ZmFsc2V9O3ZhciBIPWZ1bmN0aW9uKGQsVCxqKXt0Lm9SZXF1ZXN0SGFuZGxlPW51bGw7aWYoIXQuc2V0WE1MKGoucmVzcG9uc2VYTUwsai5yZXNwb25zZVRleHQpKXtoKGosIk1hbGZvcm1lZCBYTUwgZG9jdW1lbnQiKX1lbHNle3QuYkxvYWRlZD10cnVlfX07dGhpcy5vUmVxdWVzdEhhbmRsZT1xLmFqYXgoYSkuZG9uZShIKS5mYWlsKGgpfTtPLnByb3RvdHlwZS5nZXRBbGxQcm9wZXJ0aWVzTWV0YWRhdGE9ZnVuY3Rpb24obSl7dmFyIE09e30sUD17fSxvPXt9LGI9ZmFsc2UsbixlLGMsYT17fSxkPXt9LGY9e30sZz1mYWxzZSxoLEMscyx0LHIsUjtmb3IodmFyIGk9bS5kYXRhU2VydmljZXMuc2NoZW1hLmxlbmd0aC0xO2k+PTA7aS09MSl7TT1tLmRhdGFTZXJ2aWNlcy5zY2hlbWFbaV07aWYoTS5lbnRpdHlUeXBlKXtuPU0ubmFtZXNwYWNlO2U9TS5lbnRpdHlUeXBlO2M9TS5jb21wbGV4VHlwZTtmb3IodmFyIGogaW4gZSl7YT1lW2pdO2Y9e307aWYoYS5oYXNTdHJlYW0mJmEuaGFzU3RyZWFtPT09InRydWUiKXtjb250aW51ZX1mb3IodmFyIGsgaW4gYS5wcm9wZXJ0eSl7aD1hLnByb3BlcnR5W2tdO2lmKGgudHlwZS5zdWJzdHJpbmcoMCxuLmxlbmd0aCk9PT1uKXtmb3IodmFyIGwgaW4gYyl7aWYoY1tsXS5uYW1lPT09aC50eXBlLnN1YnN0cmluZyhuLmxlbmd0aCsxKSl7Zm9yKGsgaW4gY1tsXS5wcm9wZXJ0eSl7Qz1jW2xdLnByb3BlcnR5W2tdO2RbY1tsXS5uYW1lKyIvIitDLm5hbWVdPUMudHlwZX19fX1lbHNle3M9aC5uYW1lO3Q9aC50eXBlO2Zvcih2YXIgcCBpbiBoLmV4dGVuc2lvbnMpe3I9aC5leHRlbnNpb25zW3BdO2lmKChyLm5hbWU9PT0iZGlzcGxheS1mb3JtYXQiKSYmKHIudmFsdWU9PT0iRGF0ZSIpKXt0PSJFZG0uRGF0ZSJ9ZWxzZXtnPXRydWU7aWYoIWZbc10pe2Zbc109e319aWYoci5uYW1lc3BhY2UmJiFmW3NdW3IubmFtZXNwYWNlXSl7ZltzXVtyLm5hbWVzcGFjZV09e319ZltzXVtyLm5hbWVzcGFjZV1bci5uYW1lXT1yLnZhbHVlfX1kW3NdPXR9fWlmKCFQW24rIi4iK2EubmFtZV0pe1BbbisiLiIrYS5uYW1lXT17fX1QW24rIi4iK2EubmFtZV09ZDtpZihnKXtpZighb1tuKyIuIithLm5hbWVdKXtiPXRydWV9b1tuKyIuIithLm5hbWVdPXt9O29bbisiLiIrYS5uYW1lXT1mfX19fWlmKGIpe1I9e3R5cGVzOlAsZXh0ZW5zaW9uczpvfX1lbHNle1I9e3R5cGVzOlB9fXJldHVybiBSfTtPLnByb3RvdHlwZS5zZXRFZG1UeXBlcz1mdW5jdGlvbihwLFAsdCxzKXt2YXIgbyxlPScnO2Zvcih2YXIgYSBpbiBwKXtpZihwW2FdKXtvPXBbYV07aWYoby5WYWx1ZSYmby5WYWx1ZS5QYXRoKXtlPXRoaXMuZ2V0RWRtVHlwZShvLlZhbHVlLlBhdGgsUCx0LHMpO2lmKGUpe3BbYV0uRWRtVHlwZT1lfWNvbnRpbnVlfWlmKG8uUGF0aCl7ZT10aGlzLmdldEVkbVR5cGUoby5QYXRoLFAsdCxzKTtpZihlKXtwW2FdLkVkbVR5cGU9ZX1jb250aW51ZX1pZihvLkZhY2V0cyl7cFthXS5GYWNldHM9dGhpcy5zZXRFZG1UeXBlcyhvLkZhY2V0cyxQLHQscyk7Y29udGludWV9aWYoby5EYXRhKXtwW2FdLkRhdGE9dGhpcy5zZXRFZG1UeXBlcyhvLkRhdGEsUCx0LHMpO2NvbnRpbnVlfWlmKGE9PT0iRGF0YSIpe3AuRGF0YT10aGlzLnNldEVkbVR5cGVzKG8sUCx0LHMpO2NvbnRpbnVlfWlmKG8uVmFsdWUmJm8uVmFsdWUuQXBwbHkpe3BbYV0uVmFsdWUuQXBwbHkuUGFyYW1ldGVycz10aGlzLnNldEVkbVR5cGVzKG8uVmFsdWUuQXBwbHkuUGFyYW1ldGVycyxQLHQscyk7Y29udGludWV9aWYoby5WYWx1ZSYmby5UeXBlJiYoby5UeXBlPT09IlBhdGgiKSl7ZT10aGlzLmdldEVkbVR5cGUoby5WYWx1ZSxQLHQscyk7aWYoZSl7cFthXS5FZG1UeXBlPWV9fX19cmV0dXJuIHB9O08ucHJvdG90eXBlLmdldEVkbVR5cGU9ZnVuY3Rpb24ocCxQLHQscyl7aWYoKHAuY2hhckF0KDApPT09IkAiKSYmKHAuaW5kZXhPZihzLkFsaWFzKT09PTEpKXtwPXAuc2xpY2Uocy5BbGlhcy5sZW5ndGgrMil9aWYocC5pbmRleE9mKCIvIik+PTApe2lmKFBbcC5zbGljZSgwLHAuaW5kZXhPZigiLyIpKV0pe3Q9cC5zbGljZSgwLHAuaW5kZXhPZigiLyIpKTtwPXAuc2xpY2UocC5pbmRleE9mKCIvIikrMSl9fWZvcih2YXIgYSBpbiBQW3RdKXtpZihwPT09YSl7cmV0dXJuIFBbdF1bYV19fX07Ty5wcm90b3R5cGUuZ2V0UHJvcGVydHlWYWx1ZUF0dHJpYnV0ZXM9ZnVuY3Rpb24oZCl7dmFyIGE9IiIsYj0iIixpLHA9e307Zm9yKGk9MDtpPGQuYXR0cmlidXRlcy5sZW5ndGg7aSs9MSl7aWYoKGQuYXR0cmlidXRlc1tpXS5uYW1lIT09IlByb3BlcnR5IikmJihkLmF0dHJpYnV0ZXNbaV0ubmFtZSE9PSJUZXJtIikpe2E9ZC5hdHRyaWJ1dGVzW2ldLm5hbWU7Yj1kLmF0dHJpYnV0ZXNbaV0udmFsdWV9fWlmKGEubGVuZ3RoPjApe3BbYV09dGhpcy5yZXBsYWNlV2l0aEFsaWFzKGIpfXJldHVybiBwfTtPLnByb3RvdHlwZS5nZXRTaW1wbGVOb2RlVmFsdWU9ZnVuY3Rpb24oeCxkKXt2YXIgdj17fSxzLGEscCxiLGMsZTtpZihkLmhhc0NoaWxkTm9kZXMoKSl7cz10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpTdHJpbmciLGQpO2lmKHMubGVuZ3RoPjApe2E9dGhpcy54UGF0aC5uZXh0Tm9kZShzLDApO3ZbIlN0cmluZyJdPXRoaXMueFBhdGguZ2V0Tm9kZVRleHQoYSl9ZWxzZXtwPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOlBhdGgiLGQpO2lmKHAubGVuZ3RoPjApe2I9dGhpcy54UGF0aC5uZXh0Tm9kZShwLDApO3ZbIlBhdGgiXT10aGlzLnhQYXRoLmdldE5vZGVUZXh0KGIpfWVsc2V7Yz10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpBcHBseSIsZCk7aWYoYy5sZW5ndGg+MCl7ZT10aGlzLnhQYXRoLm5leHROb2RlKGMsMCk7dlsiQXBwbHkiXT10aGlzLmdldEFwcGx5RnVuY3Rpb25zKHgsZSx0aGlzLnhQYXRoKX19fX1yZXR1cm4gdn07Ty5wcm90b3R5cGUuZ2V0UHJvcGVydHlWYWx1ZT1mdW5jdGlvbih4LGQsdCl7dmFyIHA9e30scixhLG4sYixjLHUsZSxmLFA9e30sZyxoLGksaixrO3ZhciBsPXRoaXMuZ2V0WFBhdGgoKTtpZihkLmhhc0NoaWxkTm9kZXMoKSl7cj10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpSZWNvcmQgfCAuL2Q6Q29sbGVjdGlvbi9kOlJlY29yZCB8IC4vZDpDb2xsZWN0aW9uL2Q6SWYvZDpSZWNvcmQiLGQpO2lmKHIubGVuZ3RoKXthPTA7Zm9yKG49MDtuPHIubGVuZ3RoO24rPTEpe2I9dGhpcy54UGF0aC5uZXh0Tm9kZShyLG4pO2M9dGhpcy5nZXRQcm9wZXJ0eVZhbHVlcyh4LGIsdCk7aWYoYi5nZXRBdHRyaWJ1dGUoIlR5cGUiKSl7Y1siUmVjb3JkVHlwZSJdPXRoaXMucmVwbGFjZVdpdGhBbGlhcyhiLmdldEF0dHJpYnV0ZSgiVHlwZSIpKX1pZihhPT09MCl7aWYoYi5uZXh0RWxlbWVudFNpYmxpbmd8fChiLnBhcmVudE5vZGUubm9kZU5hbWU9PT0iQ29sbGVjdGlvbiIpfHwoYi5wYXJlbnROb2RlLm5vZGVOYW1lPT09IklmIikpe3A9W107cC5wdXNoKGMpfWVsc2V7cD1jfX1lbHNle3AucHVzaChjKX1hKz0xfX1lbHNle3U9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6VXJsUmVmIixkKTtpZih1Lmxlbmd0aD4wKXtmb3Iobj0wO248dS5sZW5ndGg7bis9MSl7ZT10aGlzLnhQYXRoLm5leHROb2RlKHUsbik7cFsiVXJsUmVmIl09dGhpcy5nZXRTaW1wbGVOb2RlVmFsdWUoeCxlKX19ZWxzZXt1PXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOlVybCIsZCk7aWYodS5sZW5ndGg+MCl7Zm9yKG49MDtuPHUubGVuZ3RoO24rPTEpe2U9dGhpcy54UGF0aC5uZXh0Tm9kZSh1LG4pO3BbIlVybCJdPXRoaXMuZ2V0U2ltcGxlTm9kZVZhbHVlKHgsZSl9fWVsc2V7az10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpDb2xsZWN0aW9uL2Q6QW5ub3RhdGlvblBhdGggfCAuL2Q6Q29sbGVjdGlvbi9kOlByb3BlcnR5UGF0aCIsZCk7aWYoay5sZW5ndGg+MCl7cD1bXTtmb3Iobj0wO248ay5sZW5ndGg7bis9MSl7Zj10aGlzLnhQYXRoLm5leHROb2RlKGssbik7UD17fTtQW2Yubm9kZU5hbWVdPWwuZ2V0Tm9kZVRleHQoZik7cC5wdXNoKFApfX1lbHNle3A9dGhpcy5nZXRQcm9wZXJ0eVZhbHVlQXR0cmlidXRlcyhkKTtnPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOkFubm90YXRpb24iLGQpO2g9e307Zm9yKGk9MDtpPGcubGVuZ3RoO2krPTEpe2g9dGhpcy54UGF0aC5uZXh0Tm9kZShnLGkpO2lmKGguaGFzQ2hpbGROb2RlcygpPT09ZmFsc2Upe2o9dGhpcy5yZXBsYWNlV2l0aEFsaWFzKGguZ2V0QXR0cmlidXRlKCJUZXJtIikpO3Bbal09dGhpcy5nZXRQcm9wZXJ0eVZhbHVlQXR0cmlidXRlcyhoKX19fX19fX1lbHNle3A9dGhpcy5nZXRQcm9wZXJ0eVZhbHVlQXR0cmlidXRlcyhkKX1yZXR1cm4gcH07Ty5wcm90b3R5cGUuZ2V0UHJvcGVydHlWYWx1ZXM9ZnVuY3Rpb24oeCxkLHQpe3ZhciBwPXt9LGE9e30sYixuLGMsZSxmLGcsaCxpLGosaztiPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOkFubm90YXRpb24iLGQpO2ZvcihuPTA7bjxiLmxlbmd0aDtuKz0xKXthPXRoaXMueFBhdGgubmV4dE5vZGUoYixuKTtpZihhLmhhc0NoaWxkTm9kZXMoKT09PWZhbHNlKXtjPXRoaXMucmVwbGFjZVdpdGhBbGlhcyhhLmdldEF0dHJpYnV0ZSgiVGVybSIpKTtwW2NdPXRoaXMuZ2V0UHJvcGVydHlWYWx1ZUF0dHJpYnV0ZXMoYSl9fWU9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6UHJvcGVydHlWYWx1ZSIsZCk7aWYoZS5sZW5ndGg+MCl7Zm9yKGY9MDtmPGUubGVuZ3RoO2YrPTEpe2c9dGhpcy54UGF0aC5uZXh0Tm9kZShlLGYpO2g9Zy5nZXRBdHRyaWJ1dGUoIlByb3BlcnR5Iik7cFtoXT10aGlzLmdldFByb3BlcnR5VmFsdWUoeCxnLHQpO2k9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6QXBwbHkiLGcpO2o9bnVsbDtmb3Ioaz0wO2s8aS5sZW5ndGg7ays9MSl7aj10aGlzLnhQYXRoLm5leHROb2RlKGksayk7aWYoail7cFtoXT17fTtwW2hdWydBcHBseSddPXRoaXMuZ2V0QXBwbHlGdW5jdGlvbnMoeCxqKX19fX1lbHNle3A9dGhpcy5nZXRQcm9wZXJ0eVZhbHVlKHgsZCx0KX1yZXR1cm4gcH07Ty5wcm90b3R5cGUuZ2V0QXBwbHlGdW5jdGlvbnM9ZnVuY3Rpb24oeCxhKXt2YXIgYj17fSxwLGM9bnVsbCxkPVtdLGk7cD10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDoqIixhKTtmb3IoaT0wO2k8cC5sZW5ndGg7aSs9MSl7Yz10aGlzLnhQYXRoLm5leHROb2RlKHAsaSk7c3dpdGNoKGMubm9kZU5hbWUpe2Nhc2UiQXBwbHkiOmQucHVzaCh7IlR5cGUiOiJBcHBseSIsIlZhbHVlIjp0aGlzLmdldEFwcGx5RnVuY3Rpb25zKHgsYyl9KTticmVhaztjYXNlIkxhYmVsZWRFbGVtZW50IjpkLnB1c2goeyJOYW1lIjpjLmdldEF0dHJpYnV0ZSgiTmFtZSIpLCJWYWx1ZSI6dGhpcy5nZXRTaW1wbGVOb2RlVmFsdWUoeCxjKX0pO2JyZWFrO2RlZmF1bHQ6ZC5wdXNoKHsiVHlwZSI6Yy5ub2RlTmFtZSwiVmFsdWUiOnRoaXMueFBhdGguZ2V0Tm9kZVRleHQoYyl9KTticmVha319YlsnTmFtZSddPWEuZ2V0QXR0cmlidXRlKCdGdW5jdGlvbicpO2JbJ1BhcmFtZXRlcnMnXT1kO3JldHVybiBifTtPLnByb3RvdHlwZS5pc05hdlByb3BlcnR5PWZ1bmN0aW9uKGUscCxtKXt2YXIgTSxpLG4sYSxqLGs7Zm9yKGk9bS5kYXRhU2VydmljZXMuc2NoZW1hLmxlbmd0aC0xO2k+PTA7aS09MSl7TT1tLmRhdGFTZXJ2aWNlcy5zY2hlbWFbaV07aWYoTS5lbnRpdHlUeXBlKXtuPU0ubmFtZXNwYWNlKyIuIjthPU0uZW50aXR5VHlwZTtmb3Ioaz1hLmxlbmd0aC0xO2s+PTA7ay09MSl7aWYobithW2tdLm5hbWU9PT1lJiZhW2tdLm5hdmlnYXRpb25Qcm9wZXJ0eSl7Zm9yKGo9MDtqPGFba10ubmF2aWdhdGlvblByb3BlcnR5Lmxlbmd0aDtqKz0xKXtpZihhW2tdLm5hdmlnYXRpb25Qcm9wZXJ0eVtqXS5uYW1lPT09cCl7cmV0dXJuIHRydWV9fX19fX1yZXR1cm4gZmFsc2V9O08ucHJvdG90eXBlLnJlcGxhY2VXaXRoQWxpYXM9ZnVuY3Rpb24odixhKXtpZihhPT09dW5kZWZpbmVkKXthPXRoaXMub0FsaWFzfWZvcih2YXIgQSBpbiBhKXtpZih2LmluZGV4T2YoQSsiLiIpPj0wKXt2PXYucmVwbGFjZShBKyIuIixhW0FdKyIuIik7cmV0dXJuIHZ9fXJldHVybiB2fTtPLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7aWYodGhpcy5vUmVxdWVzdEhhbmRsZSl7dGhpcy5vUmVxdWVzdEhhbmRsZS5iU3VwcHJlc3NFcnJvckhhbmRsZXJDYWxsPXRydWU7dGhpcy5vUmVxdWVzdEhhbmRsZS5hYm9ydCgpO3RoaXMub1JlcXVlc3RIYW5kbGU9bnVsbH1zYXAudWkuYmFzZS5PYmplY3QucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCEhdGhpcy5vTG9hZEV2ZW50KXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMub0xvYWRFdmVudCl9aWYoISF0aGlzLm9GYWlsZWRFdmVudCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLm9GYWlsZWRFdmVudCl9fTtyZXR1cm4gT30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUNvbnRleHRCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQ29udGV4dEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvb2RhdGEvT0RhdGFDb250ZXh0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9Db250ZXh0QmluZGluZyddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBPPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFDb250ZXh0QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLFAsZSl7Qy5jYWxsKHRoaXMsbSxwLGMsUCxlKX19KTtPLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxyPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSxkPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSxSPXRoaXMub01vZGVsLl9pc1JlbG9hZE5lZWRlZChyLGQsdGhpcy5tUGFyYW1ldGVycyk7aWYodGhpcy5vTW9kZWwub01ldGFkYXRhLmlzTG9hZGVkKCkpe2lmKFIpe3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKX10aGlzLm9Nb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQsdGhpcy5tUGFyYW1ldGVycyxmdW5jdGlvbihjKXt0Lm9FbGVtZW50Q29udGV4dD1jO3QuX2ZpcmVDaGFuZ2UoKTtpZihSKXt0LmZpcmVEYXRhUmVjZWl2ZWQoKX19LFIpfX07Ty5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihmLGMpe3ZhciB0PXRoaXMsayxzLGI9ZmFsc2U7aWYoYyl7cz10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYocyl7az10aGlzLm9Nb2RlbC5fZ2V0S2V5KHMpO2lmKGsgaW4gYyl7Yj10cnVlfX19ZWxzZXtiPXRydWV9aWYoZnx8Yil7dGhpcy5maXJlRGF0YVJlcXVlc3RlZCgpO3RoaXMub01vZGVsLmNyZWF0ZUJpbmRpbmdDb250ZXh0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCx0aGlzLm1QYXJhbWV0ZXJzLGZ1bmN0aW9uKG8pe2lmKHQub0VsZW1lbnRDb250ZXh0PT1vKXtpZihmKXt0Ll9maXJlQ2hhbmdlKCl9fWVsc2V7dC5vRWxlbWVudENvbnRleHQ9bzt0Ll9maXJlQ2hhbmdlKCl9dC5maXJlRGF0YVJlY2VpdmVkKCl9LHRydWUpfX07Ty5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXt2YXIgdD10aGlzLHIsZCxSO2lmKHRoaXMub0NvbnRleHQhPWMmJnRoaXMuaXNSZWxhdGl2ZSgpKXtyPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSxkPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSxSPXRoaXMub01vZGVsLl9pc1JlbG9hZE5lZWRlZChyLGQsdGhpcy5tUGFyYW1ldGVycyk7dGhpcy5vQ29udGV4dD1jO2lmKFIpe3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKX10aGlzLm9Nb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQsdGhpcy5tUGFyYW1ldGVycyxmdW5jdGlvbihjKXt0Lm9FbGVtZW50Q29udGV4dD1jO3QuX2ZpcmVDaGFuZ2UoKTtpZihSKXt0LmZpcmVEYXRhUmVjZWl2ZWQoKX19LFIpfX07cmV0dXJuIE99LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNZXRhZGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1ldGFkYXRhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL09EYXRhTWV0YWRhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJ10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIE89c2FwLnVpLmJhc2UuRXZlbnRQcm92aWRlci5leHRlbmQoInNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1ldGFkYXRhIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwKXtFLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmJMb2FkZWQ9ZmFsc2U7dGhpcy5iRmFpbGVkPWZhbHNlO3RoaXMubUVudGl0eVR5cGVzPXt9O3RoaXMub1JlcXVlc3RIYW5kbGU9bnVsbDt0aGlzLnNVcmw9bTt0aGlzLmJBc3luYz1wLmFzeW5jO3RoaXMuc1VzZXI9cC51c2VyO3RoaXMuc1Bhc3N3b3JkPXAucGFzc3dvcmQ7dGhpcy5tSGVhZGVycz1wLmhlYWRlcnM7dGhpcy5vTG9hZEV2ZW50PW51bGw7dGhpcy5vRmFpbGVkRXZlbnQ9bnVsbDt0aGlzLm9NZXRhZGF0YT1udWxsO3RoaXMubU5hbWVzcGFjZXM9cC5uYW1lc3BhY2VzfHx7c2FwOiJodHRwOi8vd3d3LnNhcC5jb20vUHJvdG9jb2xzL1NBUERhdGEiLG06Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vYWRvLzIwMDcvMDgvZGF0YXNlcnZpY2VzL21ldGFkYXRhIiwiIjoiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9hZG8vMjAwNy8wNi9lZG14In07dGhpcy5fbG9hZE1ldGFkYXRhKCl9LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiZ2V0U2VydmljZU1ldGFkYXRhIiwiYXR0YWNoRmFpbGVkIiwiZGV0YWNoRmFpbGVkIiwiYXR0YWNoTG9hZGVkIiwiZGV0YWNoTG9hZGVkIl19fSk7Ty5wcm90b3R5cGUuX3NldE5hbWVzcGFjZXM9ZnVuY3Rpb24obil7dGhpcy5tTmFtZXNwYWNlcz1ufTtPLnByb3RvdHlwZS5fbG9hZE1ldGFkYXRhPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt2YXIgcj10aGlzLl9jcmVhdGVSZXF1ZXN0KHRoaXMuc1VybCk7ZnVuY3Rpb24gXyhtLFIpe2lmKCFtfHwhbS5kYXRhU2VydmljZXMpe3ZhciBwPXttZXNzYWdlOiJJbnZhbGlkIG1ldGFkYXRhIGRvY3VtZW50IixyZXF1ZXN0OnIscmVzcG9uc2U6Un07YShwKTtyZXR1cm59dC5vTWV0YWRhdGE9bTt0Lm9SZXF1ZXN0SGFuZGxlPW51bGw7aWYodC5iQXN5bmMpe3QuZmlyZUxvYWRlZCh0KX1lbHNle3QuYkxvYWRlZD10cnVlO3Qub0xvYWRFdmVudD1xLnNhcC5kZWxheWVkQ2FsbCgwLHQsdC5maXJlTG9hZGVkLFt0XSl9fWZ1bmN0aW9uIGEoZSl7dmFyIHA9e21lc3NhZ2U6ZS5tZXNzYWdlfTtpZihlLnJlc3BvbnNlKXtwLnN0YXR1c0NvZGU9ZS5yZXNwb25zZS5zdGF0dXNDb2RlO3Auc3RhdHVzVGV4dD1lLnJlc3BvbnNlLnN0YXR1c1RleHQ7cC5yZXNwb25zZVRleHQ9ZS5yZXNwb25zZS5ib2R5fWlmKHQub1JlcXVlc3RIYW5kbGUmJnQub1JlcXVlc3RIYW5kbGUuYlN1cHByZXNzRXJyb3JIYW5kbGVyQ2FsbCl7cmV0dXJufXQub1JlcXVlc3RIYW5kbGU9bnVsbDtpZih0LmJBc3luYyl7dC5maXJlRmFpbGVkKHApfWVsc2V7dC5vRmFpbGVkRXZlbnQ9cS5zYXAuZGVsYXllZENhbGwoMCx0LHQuZmlyZUZhaWxlZCxbcF0pfX10aGlzLm9SZXF1ZXN0SGFuZGxlPU9EYXRhLnJlcXVlc3QocixfLGEsT0RhdGEubWV0YWRhdGFIYW5kbGVyKX07Ty5wcm90b3R5cGUuZ2V0U2VydmljZU1ldGFkYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub01ldGFkYXRhfTtPLnByb3RvdHlwZS5pc0xvYWRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJMb2FkZWR9O3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1ldGFkYXRhLnByb3RvdHlwZS5maXJlTG9hZGVkPWZ1bmN0aW9uKCl7dGhpcy5iTG9hZGVkPXRydWU7dGhpcy5maXJlRXZlbnQoImxvYWRlZCIpO3Euc2FwLmxvZy5kZWJ1ZygnbG9hZGVkIG9uIE1ldGFkYXRhIG9iamVjdCB3YXMgZmlyZWQnKTtyZXR1cm4gdGhpc307c2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTWV0YWRhdGEucHJvdG90eXBlLmF0dGFjaExvYWRlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgibG9hZGVkIixkLGYsbCk7cmV0dXJuIHRoaXN9O3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1ldGFkYXRhLnByb3RvdHlwZS5kZXRhY2hMb2FkZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJsb2FkZWQiLGYsbCk7cmV0dXJuIHRoaXN9O3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1ldGFkYXRhLnByb3RvdHlwZS5maXJlRmFpbGVkPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJmYWlsZWQiLGEpO3JldHVybiB0aGlzfTtzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNZXRhZGF0YS5wcm90b3R5cGUuYXR0YWNoRmFpbGVkPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJmYWlsZWQiLGQsZixsKTtyZXR1cm4gdGhpc307c2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTWV0YWRhdGEucHJvdG90eXBlLmRldGFjaEZhaWxlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImZhaWxlZCIsZixsKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuX2dldEVudGl0eVR5cGVCeVBhdGg9ZnVuY3Rpb24ocCl7aWYoIXApe3JldHVybiBudWxsfWlmKCF0aGlzLm9NZXRhZGF0YXx8cS5pc0VtcHR5T2JqZWN0KHRoaXMub01ldGFkYXRhKSl7cmV0dXJuIG51bGx9dmFyIGM9cC5yZXBsYWNlKC9eXC98XC8kL2csIiIpLFA9Yy5zcGxpdCgiLyIpLGw9UC5sZW5ndGgsYSxBLG8sZSxiLGQscix0PXRoaXM7aWYoUFswXS5pbmRleE9mKCIoIikhPS0xKXtQWzBdPVBbMF0uc3Vic3RyaW5nKDAsUFswXS5pbmRleE9mKCIoIikpfWlmKGw+MSl7bz10Ll9nZXRFbnRpdHlUeXBlQnlQYXRoKFBbMF0pO2Zvcih2YXIgaT0xO2k8UC5sZW5ndGg7aSsrKXtpZihvKXtpZihQW2ldLmluZGV4T2YoIigiKSE9LTEpe1BbaV09UFtpXS5zdWJzdHJpbmcoMCxQW2ldLmluZGV4T2YoIigiKSl9aWYoby5uYXZpZ2F0aW9uUHJvcGVydHkpe3I9dC5fZ2V0RW50aXR5VHlwZUJ5TmF2UHJvcGVydHkobyxQW2ldKTtpZihyKXtvPXJ9fWQ9b319fWVsc2V7Yj10aGlzLl9zcGxpdE5hbWUodGhpcy5fZ2V0RW50aXR5VHlwZU5hbWUoUFswXSkpO2Q9dGhpcy5fZ2V0T2JqZWN0TWV0YWRhdGEoImVudGl0eVR5cGUiLGJbMF0sYlsxXSk7aWYoZCl7ZC5lbnRpdHlUeXBlPXRoaXMuX2dldEVudGl0eVR5cGVOYW1lKFBbMF0pfX1pZighZCl7dmFyIGY9UFtQLmxlbmd0aC0xXTt2YXIgRj10aGlzLl9nZXRGdW5jdGlvbkltcG9ydE1ldGFkYXRhKGYsIkdFVCIpO2lmKEYmJkYuZW50aXR5U2V0KXtkPXRoaXMuX2dldEVudGl0eVR5cGVCeVBhdGgoRi5lbnRpdHlTZXQpO2lmKGQpe2QuZW50aXR5VHlwZT10aGlzLl9nZXRFbnRpdHlUeXBlTmFtZShGLmVudGl0eVNldCl9fX1yZXR1cm4gZH07Ty5wcm90b3R5cGUuX2dldEVudGl0eVR5cGVCeU5hbWU9ZnVuY3Rpb24obil7dmFyIGUsdD10aGlzO2lmKCFuKXtyZXR1cm4gbnVsbH1pZighdGhpcy5vTWV0YWRhdGF8fHEuaXNFbXB0eU9iamVjdCh0aGlzLm9NZXRhZGF0YSkpe3JldHVybiBudWxsfWlmKHRoaXMubUVudGl0eVR5cGVzW25dKXtlPXRoaXMubUVudGl0eVR5cGVzW25dfWVsc2V7cS5lYWNoKHRoaXMub01ldGFkYXRhLmRhdGFTZXJ2aWNlcy5zY2hlbWEsZnVuY3Rpb24oaSxzKXtpZihzLmVudGl0eVR5cGUpe3EuZWFjaChzLmVudGl0eVR5cGUsZnVuY3Rpb24oayxvKXtpZihvLm5hbWU9PT1uKXtlPW87dC5tRW50aXR5VHlwZXNbbl09ZTtlLm5hbWVzcGFjZT1zLm5hbWVzcGFjZTtyZXR1cm4gZmFsc2V9fSl9fSl9cmV0dXJuIGV9O08ucHJvdG90eXBlLl9nZXRBbm5vdGF0aW9uPWZ1bmN0aW9uKHApe3ZhciBuLGssUCxtLE0sZSxzLG8sYSxwO1A9cC5zcGxpdCgnLyMnKTtNPVBbMV0uc3BsaXQoJy8nKTtpZighUFswXSl7ZT10aGlzLl9nZXRFbnRpdHlUeXBlQnlOYW1lKE1bMF0pO2lmKCFlKXJldHVybjtzPVBbMV0uc3Vic3RyKFBbMV0uaW5kZXhPZignLycpKzEpO289dGhpcy5fZ2V0UHJvcGVydHlNZXRhZGF0YShlLHMpO2lmKCFvKXJldHVybjttPXMuc3Vic3RyKHMuaW5kZXhPZihvLm5hbWUpKTttPW0uc3Vic3RyKG0uaW5kZXhPZignLycpKzEpfWVsc2V7ZT10aGlzLl9nZXRFbnRpdHlUeXBlQnlQYXRoKFBbMF0pO2lmKCFlKXJldHVybjtwPVBbMF0ucmVwbGFjZSgvXlwvfFwvJC9nLCIiKTtzPXAuc3Vic3RyKHAuaW5kZXhPZignLycpKzEpO289dGhpcy5fZ2V0UHJvcGVydHlNZXRhZGF0YShlLHMpO2lmKCFvKXJldHVybjttPU0uam9pbignLycpfW49dGhpcy5fZ2V0QW5ub3RhdGlvbk9iamVjdChlLG8sbSk7cmV0dXJuIG59O08ucHJvdG90eXBlLl9nZXRBbm5vdGF0aW9uT2JqZWN0PWZ1bmN0aW9uKGUsbyxtKXt2YXIgdD10aGlzLGEscCxBLG4scztpZighbylyZXR1cm47bj1vO3A9bS5zcGxpdCgnLycpO2lmKHBbMF0uaW5kZXhPZignLicpPi0xKXtyZXR1cm4gdGhpcy5fZ2V0VjRBbm5vdGF0aW9uT2JqZWN0KGUsbyxwKX1lbHNle2lmKHAubGVuZ3RoPjEpe249bltwWzBdXTtpZighbiYmby5leHRlbnNpb25zKXtmb3IodmFyIGk9MDtpPG8uZXh0ZW5zaW9ucy5sZW5ndGg7aSsrKXt2YXIgYj1vLmV4dGVuc2lvbnNbaV07aWYoYi5uYW1lPT1wWzBdKXtuPWI7YnJlYWt9fX1tPXAuc3BsaWNlKDAsMSk7QT10aGlzLl9nZXRBbm5vdGF0aW9uT2JqZWN0KGUsbixwLmpvaW4oJy8nKSl9ZWxzZXtpZihwWzBdLmluZGV4T2YoJ0AnKT4tMSl7cz1wWzBdLnN1YnN0cigxKTthPXMuc3BsaXQoJzonKTtBPW5bYVswXV07aWYoIUEmJm4uZXh0ZW5zaW9ucyl7Zm9yKHZhciBpPTA7aTxuLmV4dGVuc2lvbnMubGVuZ3RoO2krKyl7dmFyIGI9bi5leHRlbnNpb25zW2ldO2lmKGIubmFtZT09PWFbMV0mJmIubmFtZXNwYWNlPT09dGhpcy5tTmFtZXNwYWNlc1thWzBdXSl7QT1iLnZhbHVlO2JyZWFrfX19fWVsc2V7YT1wWzBdLnNwbGl0KCc6Jyk7QT1uW2FbMF1dO0E9bltwWzBdXTtpZighQSYmbi5leHRlbnNpb25zKXtmb3IodmFyIGk9MDtpPG4uZXh0ZW5zaW9ucy5sZW5ndGg7aSsrKXt2YXIgYj1uLmV4dGVuc2lvbnNbaV07aWYoYi5uYW1lPT09YVsxXSYmYi5uYW1lc3BhY2U9PT10aGlzLm1OYW1lc3BhY2VzW2FbMF1dKXtBPWI7YnJlYWt9fX19fX1yZXR1cm4gQX07Ty5wcm90b3R5cGUuX2dldFY0QW5ub3RhdGlvbk9iamVjdD1mdW5jdGlvbihlLG8scCl7dmFyIGEsQT1bXTtpZihwLmxlbmd0aD4xKXtyZXR1cm59dmFyIHQ9ZS5uYW1lc3BhY2U/ZS5uYW1lc3BhY2UrIi4iOiIiO3QrPWUubmFtZSsiLyIrby5uYW1lO3EuZWFjaCh0aGlzLm9NZXRhZGF0YS5kYXRhU2VydmljZXMuc2NoZW1hLGZ1bmN0aW9uKGkscyl7aWYocy5hbm5vdGF0aW9ucyl7cS5lYWNoKHMuYW5ub3RhdGlvbnMsZnVuY3Rpb24oayxvKXtpZihvLnRhcmdldD09PXQmJiFvLnF1YWxpZmllcil7QS5wdXNoKG8uYW5ub3RhdGlvbik7cmV0dXJuIGZhbHNlfX0pfX0pO2lmKEEpe3EuZWFjaChBLGZ1bmN0aW9uKGksYil7cS5lYWNoKGIsZnVuY3Rpb24oaixjKXtpZihjLnRlcm09PT1wWzBdKXthPWN9fSl9KX1yZXR1cm4gYX07Ty5wcm90b3R5cGUuX3NwbGl0TmFtZT1mdW5jdGlvbihmKXt2YXIgcD1bXTtpZihmKXt2YXIgcz1mLmxhc3RJbmRleE9mKCIuIik7cFswXT1mLnN1YnN0cihzKzEpO3BbMV09Zi5zdWJzdHIoMCxzKX1yZXR1cm4gcH07Ty5wcm90b3R5cGUuX2dldEVudGl0eVR5cGVOYW1lPWZ1bmN0aW9uKGMpe3ZhciBlO2lmKGMpe3EuZWFjaCh0aGlzLm9NZXRhZGF0YS5kYXRhU2VydmljZXMuc2NoZW1hLGZ1bmN0aW9uKGkscyl7aWYocy5lbnRpdHlDb250YWluZXIpe3EuZWFjaChzLmVudGl0eUNvbnRhaW5lcixmdW5jdGlvbihrLG8pe2lmKG8uZW50aXR5U2V0KXtxLmVhY2goby5lbnRpdHlTZXQsZnVuY3Rpb24oaixhKXtpZihhLm5hbWU9PT1jKXtlPWEuZW50aXR5VHlwZTtyZXR1cm4gZmFsc2V9fSl9fSl9fSl9cmV0dXJuIGV9O08ucHJvdG90eXBlLl9nZXRPYmplY3RNZXRhZGF0YT1mdW5jdGlvbihvLHMsbil7dmFyIGE7aWYocyYmbil7cS5lYWNoKHRoaXMub01ldGFkYXRhLmRhdGFTZXJ2aWNlcy5zY2hlbWEsZnVuY3Rpb24oaSxTKXtpZihTW29dJiZTLm5hbWVzcGFjZT09PW4pe3EuZWFjaChTW29dLGZ1bmN0aW9uKGosYyl7aWYoYy5uYW1lPT09cyl7YT1jO2EubmFtZXNwYWNlPVMubmFtZXNwYWNlO3JldHVybiBmYWxzZX19KTtyZXR1cm4hYX19KX1yZXR1cm4gYX07Ty5wcm90b3R5cGUuZ2V0VXNlQmF0Y2g9ZnVuY3Rpb24oKXt2YXIgdT1mYWxzZTtxLmVhY2godGhpcy5vTWV0YWRhdGEuZGF0YVNlcnZpY2VzLnNjaGVtYSxmdW5jdGlvbihpLHMpe2lmKHMuZW50aXR5Q29udGFpbmVyKXtxLmVhY2gocy5lbnRpdHlDb250YWluZXIsZnVuY3Rpb24oayxlKXtpZihlLmV4dGVuc2lvbnMpe3EuZWFjaChlLmV4dGVuc2lvbnMsZnVuY3Rpb24obCxvKXtpZihvLm5hbWU9PT0idXNlLWJhdGNoIiYmby5uYW1lc3BhY2U9PT0iaHR0cDovL3d3dy5zYXAuY29tL1Byb3RvY29scy9TQVBEYXRhIil7dT0odHlwZW9mIG8udmFsdWU9PT0nc3RyaW5nJyk/KG8udmFsdWUudG9Mb3dlckNhc2UoKT09PSd0cnVlJyk6ISFvLnZhbHVlO3JldHVybiBmYWxzZX19KX19KX19KTtyZXR1cm4gdX07Ty5wcm90b3R5cGUuX2dldEZ1bmN0aW9uSW1wb3J0TWV0YWRhdGE9ZnVuY3Rpb24oZixtKXt2YXIgbz1udWxsO3EuZWFjaCh0aGlzLm9NZXRhZGF0YS5kYXRhU2VydmljZXMuc2NoZW1hLGZ1bmN0aW9uKGkscyl7aWYoc1siZW50aXR5Q29udGFpbmVyIl0pe3EuZWFjaChzWyJlbnRpdHlDb250YWluZXIiXSxmdW5jdGlvbihqLGUpe2lmKGVbImZ1bmN0aW9uSW1wb3J0Il0pe3EuZWFjaChlWyJmdW5jdGlvbkltcG9ydCJdLGZ1bmN0aW9uKGssRil7aWYoRi5uYW1lPT09ZiYmRi5odHRwTWV0aG9kPT09bSl7bz1GO3JldHVybiBmYWxzZX19KX1yZXR1cm4hb30pfXJldHVybiFvfSk7cmV0dXJuIG99O08ucHJvdG90eXBlLl9nZXRFbnRpdHlUeXBlQnlOYXZQcm9wZXJ0eT1mdW5jdGlvbihlLG4pe3ZhciB0PXRoaXMsYSxBLGIsTjtxLmVhY2goZS5uYXZpZ2F0aW9uUHJvcGVydHksZnVuY3Rpb24oayxvKXtpZihvLm5hbWU9PT1uKXthPXQuX3NwbGl0TmFtZShvLnJlbGF0aW9uc2hpcCk7QT10Ll9nZXRPYmplY3RNZXRhZGF0YSgiYXNzb2NpYXRpb24iLGFbMF0sYVsxXSk7aWYoQSl7dmFyIGM9QS5lbmRbMF07aWYoYy5yb2xlIT09by50b1JvbGUpe2M9QS5lbmRbMV19Yj10Ll9zcGxpdE5hbWUoYy50eXBlKTtOPXQuX2dldE9iamVjdE1ldGFkYXRhKCJlbnRpdHlUeXBlIixiWzBdLGJbMV0pO2lmKE4pe04uZW50aXR5VHlwZT1jLnR5cGV9cmV0dXJuIGZhbHNlfX19KTtyZXR1cm4gTn07Ty5wcm90b3R5cGUuX2dldE5hdmlnYXRpb25Qcm9wZXJ0eU5hbWVzPWZ1bmN0aW9uKGUpe3ZhciBuPVtdO2lmKGUubmF2aWdhdGlvblByb3BlcnR5KXtxLmVhY2goZS5uYXZpZ2F0aW9uUHJvcGVydHksZnVuY3Rpb24oayxOKXtuLnB1c2goTi5uYW1lKX0pfXJldHVybiBufTtPLnByb3RvdHlwZS5fZ2V0UHJvcGVydHlNZXRhZGF0YT1mdW5jdGlvbihlLHApe3ZhciBQLHQ9dGhpcztpZighZSlyZXR1cm47cD1wLnJlcGxhY2UoL15cL3xcLyQvZywiIik7dmFyIGE9cC5zcGxpdCgiLyIpO3EuZWFjaChlLnByb3BlcnR5LGZ1bmN0aW9uKGssYil7aWYoYi5uYW1lPT09YVswXSl7UD1iO3JldHVybiBmYWxzZX19KTtpZihQJiZhLmxlbmd0aD4xJiYhcS5zYXAuc3RhcnRzV2l0aChQLnR5cGUudG9Mb3dlckNhc2UoKSwiZWRtLiIpKXt2YXIgbj10aGlzLl9zcGxpdE5hbWUoUC50eXBlKTtQPXRoaXMuX2dldFByb3BlcnR5TWV0YWRhdGEodGhpcy5fZ2V0T2JqZWN0TWV0YWRhdGEoImNvbXBsZXhUeXBlIixuWzBdLG5bMV0pLGFbMV0pfWlmKCFQJiZhLmxlbmd0aD4xKXt2YXIgbz10aGlzLl9nZXRFbnRpdHlUeXBlQnlOYXZQcm9wZXJ0eShlLGFbMF0pO2lmKG8pe1A9dC5fZ2V0UHJvcGVydHlNZXRhZGF0YShvLGFbMV0pfX1yZXR1cm4gUH07Ty5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLm9NZXRhZGF0YTtpZih0aGlzLm9SZXF1ZXN0SGFuZGxlKXt0aGlzLm9SZXF1ZXN0SGFuZGxlLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGw9dHJ1ZTt0aGlzLm9SZXF1ZXN0SGFuZGxlLmFib3J0KCk7dGhpcy5vUmVxdWVzdEhhbmRsZT1udWxsfWlmKCEhdGhpcy5vTG9hZEV2ZW50KXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMub0xvYWRFdmVudCl9aWYoISF0aGlzLm9GYWlsZWRFdmVudCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLm9GYWlsZWRFdmVudCl9c2FwLnVpLmJhc2UuT2JqZWN0LnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07c2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTWV0YWRhdGEucHJvdG90eXBlLl9jcmVhdGVSZXF1ZXN0PWZ1bmN0aW9uKHUpe3ZhciBoPXt9LGw9eyJBY2NlcHQtTGFuZ3VhZ2UiOnNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldExhbmd1YWdlKCl9O3EuZXh0ZW5kKGgsdGhpcy5tSGVhZGVycyxsKTt2YXIgcj17aGVhZGVyczpoLHJlcXVlc3RVcmk6dSxtZXRob2Q6J0dFVCcsdXNlcjp0aGlzLnNVc2VyLHBhc3N3b3JkOnRoaXMuc1Bhc3N3b3JkLGFzeW5jOiEhdGhpcy5iQXN5bmN9O2lmKCEhdGhpcy5iQXN5bmMpe3Iud2l0aENyZWRlbnRpYWxzPXRoaXMuYldpdGhDcmVkZW50aWFsc31yZXR1cm4gcn07cmV0dXJuIE99LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFUcmVlQmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YVRyZWVCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL09EYXRhVHJlZUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvVHJlZUJpbmRpbmcnXSxmdW5jdGlvbihxLFQpeyJ1c2Ugc3RyaWN0Ijt2YXIgTz1ULmV4dGVuZCgic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhVHJlZUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxmLFApe1QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuYlBlbmRpbmdSZXF1ZXN0PWZhbHNlO3RoaXMub0ZpbmFsTGVuZ3Rocz17fTt0aGlzLm9MZW5ndGhzPXt9O3RoaXMub0tleXM9e307dGhpcy5iTmVlZHNVcGRhdGU9ZmFsc2U7aWYoIVB8fCFQLm5hdmlnYXRpb24pe3Euc2FwLmxvZy5lcnJvcigiQSBuYXZpZ2F0aW9uIHBhdGhzIHBhcmFtZXRlciBvYmplY3QgaGFzIHRvIGJlIGRlZmluZWQiKTt0aGlzLm9OYXZpZ2F0aW9uUGF0aHM9e319ZWxzZXt0aGlzLm9OYXZpZ2F0aW9uUGF0aHM9UC5uYXZpZ2F0aW9ufX19KTtPLnByb3RvdHlwZS5nZXRSb290Q29udGV4dHM9ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl9nZXROYXZQYXRoKHRoaXMuc1BhdGgpLGE9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMuZ2V0Q29udGV4dCgpKSx0PXRoaXMsYztpZighYSl7cmV0dXJuW119aWYoIXRoaXMub01vZGVsLmlzTGlzdCh0aGlzLnNQYXRoLHRoaXMuZ2V0Q29udGV4dCgpKSl7aWYodGhpcy5iRGlzcGxheVJvb3ROb2RlKXt0aGlzLm9Nb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dChhLG51bGwse2V4cGFuZDpufSxmdW5jdGlvbihOKXtjPU47aWYodC5vUm9vdENvbnRleHQhPT1OKXt0Lm9Sb290Q29udGV4dD1OO3QuYk5lZWRzVXBkYXRlPXRydWV9ZWxzZXt2YXIgZD10Lm9Nb2RlbC5vRGF0YVtjLmdldFBhdGgoKS5zdWJzdHIoMSldO3QuX3Byb2Nlc3NPRGF0YU9iamVjdChkLGMuZ2V0UGF0aCgpLG4pfX0sZmFsc2UpO2lmKGMpe3JldHVybltjXX1lbHNle3JldHVybltdfX1lbHNle2M9dGhpcy5vTW9kZWwuZ2V0Q29udGV4dCh0aGlzLnNQYXRoKTtyZXR1cm4gdGhpcy5nZXROb2RlQ29udGV4dHMoYyl9fWVsc2V7cmV0dXJuIHRoaXMuX2dldENvbnRleHRzRm9yUGF0aChhLG4pfX07Ty5wcm90b3R5cGUuZ2V0Tm9kZUNvbnRleHRzPWZ1bmN0aW9uKGMpe3ZhciBuPXRoaXMuX2dldE5hdlBhdGgoYy5nZXRQYXRoKCkpLGE7aWYoIW4pe3JldHVybltdfWE9dGhpcy5vTW9kZWwucmVzb2x2ZShuLGMpO249dGhpcy5vTmF2aWdhdGlvblBhdGhzW25dO3JldHVybiB0aGlzLl9nZXRDb250ZXh0c0ZvclBhdGgoYSxuKX07Ty5wcm90b3R5cGUuaGFzQ2hpbGRyZW49ZnVuY3Rpb24oYyl7cmV0dXJuIGMmJnRoaXMub0xlbmd0aHNbYy5nZXRQYXRoKCldPjB9O08ucHJvdG90eXBlLl9nZXRDb250ZXh0c0ZvclBhdGg9ZnVuY3Rpb24oYSxuKXt2YXIgYz1bXSxsPXRoaXMub01vZGVsLmlTaXplTGltaXQsTCxrO2lmKHRoaXMub0ZpbmFsTGVuZ3RocyYmdGhpcy5vRmluYWxMZW5ndGhzW2FdJiZ0aGlzLm9MZW5ndGhzW2FdPGwpe2w9dGhpcy5vTGVuZ3Roc1thXX1pZih0aGlzLm9LZXlzW2FdKXtmb3IodmFyIGk9MDtpPGw7aSsrKXtrPXRoaXMub0tleXNbYV1baV07aWYoIWspe2JyZWFrfWMucHVzaCh0aGlzLm9Nb2RlbC5nZXRDb250ZXh0KCcvJytrKSl9fUw9Yy5sZW5ndGghPWwmJiEodGhpcy5vRmluYWxMZW5ndGhzW2FdJiZjLmxlbmd0aD49dGhpcy5vTGVuZ3Roc1thXSk7aWYodGhpcy5vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkpe2lmKCF0aGlzLmJQZW5kaW5nUmVxdWVzdCYmTCl7dGhpcy5sb2FkU3ViTm9kZXMoYSxuKX19cmV0dXJuIGN9O08ucHJvdG90eXBlLmxvYWRTdWJOb2Rlcz1mdW5jdGlvbihhLG4pe3ZhciB0PXRoaXMscD1bXTtpZihuKXtwLnB1c2goIiRleHBhbmQ9IituKX1mdW5jdGlvbiBzKGQpe3Qub0xlbmd0aHNbYV09ZC5yZXN1bHRzLmxlbmd0aDt0Lm9GaW5hbExlbmd0aHNbYV09dHJ1ZTt0Lm9LZXlzW2FdPVtdO2Zvcih2YXIgaT0wO2k8ZC5yZXN1bHRzLmxlbmd0aDtpKyspe3ZhciBFPWQucmVzdWx0c1tpXTt0Ll9wcm9jZXNzT0RhdGFPYmplY3QoRSxhLG4pO3Qub0tleXNbYV0ucHVzaCh0Lm9Nb2RlbC5fZ2V0S2V5KEUpKX10Lm9SZXF1ZXN0SGFuZGxlPW51bGw7dC5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2U7dC5iTmVlZHNVcGRhdGU9dHJ1ZX1mdW5jdGlvbiBjKCl7dC5maXJlRGF0YVJlY2VpdmVkKCl9ZnVuY3Rpb24gZShkKXt0Lm9SZXF1ZXN0SGFuZGxlPW51bGw7dC5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2U7dC5maXJlRGF0YVJlY2VpdmVkKCl9ZnVuY3Rpb24gdShoKXt0Lm9SZXF1ZXN0SGFuZGxlPWh9aWYoYSl7aWYoIXRoaXMub0ZpbmFsTGVuZ3Roc1thXSl7dGhpcy5iUGVuZGluZ1JlcXVlc3Q9dHJ1ZTt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCk7dGhpcy5vTW9kZWwuX2xvYWREYXRhKGEscCxzLGUsZmFsc2UsdSxjKX19fTtPLnByb3RvdHlwZS5yZXNldERhdGE9ZnVuY3Rpb24oYyl7aWYoYyl7dmFyIHA9Yy5nZXRQYXRoKCk7ZGVsZXRlIHRoaXMub0tleXNbcF07ZGVsZXRlIHRoaXMub0xlbmd0aHNbcF07ZGVsZXRlIHRoaXMub0ZpbmFsTGVuZ3Roc1twXX1lbHNle3RoaXMub0tleXM9e307dGhpcy5vTGVuZ3Rocz17fTt0aGlzLm9GaW5hbExlbmd0aHM9e319fTtPLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGYsYyxlKXt2YXIgQz1mYWxzZTtpZighZil7aWYoZSl7dmFyIHI9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO3ZhciBFPXRoaXMub01vZGVsLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChyKTtpZihFJiYoRS5lbnRpdHlUeXBlIGluIGUpKXtDPXRydWV9fWlmKGMmJiFDKXtxLmVhY2godGhpcy5vS2V5cyxmdW5jdGlvbihpLG4pe3EuZWFjaChuLGZ1bmN0aW9uKGksayl7aWYoayBpbiBjKXtDPXRydWU7cmV0dXJuIGZhbHNlfX0pO2lmKEMpcmV0dXJuIGZhbHNlfSl9aWYoIWMmJiFlKXtDPXRydWV9fWlmKGZ8fEMpe3RoaXMucmVzZXREYXRhKCk7dGhpcy5iTmVlZHNVcGRhdGU9ZmFsc2U7dGhpcy5fZmlyZUNoYW5nZSgpfX07Ty5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKGYpe3Euc2FwLmxvZy53YXJuaW5nKCJGaWx0ZXJpbmcgaXMgY3VycmVudGx5IG5vdCBwb3NzaWJsZSBpbiB0aGUgT0RhdGFUcmVlQmluZGluZyIpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmLGMpe3ZhciBDPWZhbHNlO2lmKCFmKXtpZih0aGlzLmJOZWVkc1VwZGF0ZXx8IWMpe0M9dHJ1ZX1lbHNle3EuZWFjaCh0aGlzLm9LZXlzLGZ1bmN0aW9uKGksbil7cS5lYWNoKG4sZnVuY3Rpb24oaSxrKXtpZihrIGluIGMpe0M9dHJ1ZTtyZXR1cm4gZmFsc2V9fSk7aWYoQylyZXR1cm4gZmFsc2V9KX19aWYoZnx8Qyl7dGhpcy5iTmVlZHNVcGRhdGU9ZmFsc2U7dGhpcy5fZmlyZUNoYW5nZSgpfX07Ty5wcm90b3R5cGUuX2dldE5hdlBhdGg9ZnVuY3Rpb24ocCl7dmFyIGE9dGhpcy5vTW9kZWwucmVzb2x2ZShwLHRoaXMuZ2V0Q29udGV4dCgpKTtpZighYSl7cmV0dXJufXZhciBQPWEuc3BsaXQoIi8iKSxlPVBbUC5sZW5ndGgtMV0sbjt2YXIgYz1lLnNwbGl0KCIoIilbMF07aWYoYyYmdGhpcy5vTmF2aWdhdGlvblBhdGhzW2NdKXtuPXRoaXMub05hdmlnYXRpb25QYXRoc1tjXX1yZXR1cm4gbn07Ty5wcm90b3R5cGUuX3Byb2Nlc3NPRGF0YU9iamVjdD1mdW5jdGlvbihvLGEsbil7dmFyIGs9dGhpcy5vTW9kZWwuX2dldEtleShvKSxjPXRoaXMub01vZGVsLmdldENvbnRleHQoIi8iK2spLHA9Yy5nZXRQYXRoKCk7dmFyIHI9dGhpcy5vTW9kZWwuX2dldE9iamVjdChuLGMpO2lmKHEuaXNBcnJheShyKSl7dGhpcy5vS2V5c1twXT1yO3RoaXMub0xlbmd0aHNbcF09ci5sZW5ndGg7dGhpcy5vRmluYWxMZW5ndGhzW3BdPXRydWV9ZWxzZSBpZih0eXBlb2Ygcj09PSJvYmplY3QiKXt0aGlzLm9LZXlzW3BdPVtyXTt0aGlzLm9MZW5ndGhzW3BdPTA7dGhpcy5vRmluYWxMZW5ndGhzW3BdPXRydWV9ZWxzZXtpZihuJiZvW25dLl9fbGlzdCl7dGhpcy5vS2V5c1twXT1vW25dLl9fbGlzdDt0aGlzLm9MZW5ndGhzW3BdPXRoaXMub0tleXNbcF0ubGVuZ3RoO3RoaXMub0ZpbmFsTGVuZ3Roc1twXT10cnVlfWVsc2V7dGhpcy5vS2V5c1thXT1bXTt0aGlzLm9MZW5ndGhzW2FdPTA7dGhpcy5vRmluYWxMZW5ndGhzW2FdPWZhbHNlfX19O3JldHVybiBPfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhVXRpbHMnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFVdGlscycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9PRGF0YVV0aWxzIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9GaWx0ZXInLCdzYXAvdWkvbW9kZWwvU29ydGVyJywnc2FwL3VpL21vZGVsL0ZpbHRlcicsJ3NhcC91aS9jb3JlL2Zvcm1hdC9EYXRlRm9ybWF0J10sZnVuY3Rpb24ocSxPLFMsRixEKXsidXNlIHN0cmljdCI7dmFyIGE9ZnVuY3Rpb24oKXt9O2EuY3JlYXRlU29ydFBhcmFtcz1mdW5jdGlvbihzKXt2YXIgYjtpZighc3x8cy5sZW5ndGg9PTApe3JldHVybn1iPSIkb3JkZXJieT0iO2Zvcih2YXIgaT0wO2k8cy5sZW5ndGg7aSsrKXt2YXIgbz1zW2ldO2lmKG8gaW5zdGFuY2VvZiBTKXtiKz1vLnNQYXRoO2IrPW8uYkRlc2NlbmRpbmc/IiUyMGRlc2MiOiIlMjBhc2MiO2IrPSIsIn19Yj1iLnNsaWNlKDAsLTEpO3JldHVybiBifTthLmNyZWF0ZUZpbHRlclBhcmFtcz1mdW5jdGlvbihmLG0sZSl7dmFyIHM7aWYoIWZ8fGYubGVuZ3RoPT0wKXtyZXR1cm59dmFyIG89e30sYj0wLGMscz0iJGZpbHRlcj0iLGQ9MCx0PXRoaXM7cS5lYWNoKGYsZnVuY3Rpb24oaixnKXtpZihnLnNQYXRoKXtjPW9bZy5zUGF0aF07aWYoIWMpe2M9b1tnLnNQYXRoXT1bXTtiKyt9fWVsc2V7Yz1vWyJfX211bHRpRmlsdGVyIl07aWYoIWMpe2M9b1siX19tdWx0aUZpbHRlciJdPVtdO2IrK319Yy5wdXNoKGcpfSk7cS5lYWNoKG8sZnVuY3Rpb24ocCxjKXtpZihjLmxlbmd0aD4xKXtzKz0nKCd9cS5lYWNoKGMsZnVuY3Rpb24oaSxnKXtpZihnIGluc3RhbmNlb2YgTyl7aWYoZy5hVmFsdWVzLmxlbmd0aD4xKXtzKz0nKCd9cS5lYWNoKGcuYVZhbHVlcyxmdW5jdGlvbihpLGgpe2lmKGk+MCl7aWYoZy5iQU5EKXtzKz0iJTIwYW5kJTIwIn1lbHNle3MrPSIlMjBvciUyMCJ9fXM9dC5fY3JlYXRlRmlsdGVyU2VnbWVudChnLnNQYXRoLG0sZSxoLm9wZXJhdG9yLGgudmFsdWUxLGgudmFsdWUyLHMpfSk7aWYoZy5hVmFsdWVzLmxlbmd0aD4xKXtzKz0nKSd9fWVsc2UgaWYoZy5fYk11bHRpRmlsdGVyKXtzKz10Ll9yZXNvbHZlTXVsdGlGaWx0ZXIoZyxtLGUpfWVsc2V7cz10Ll9jcmVhdGVGaWx0ZXJTZWdtZW50KGcuc1BhdGgsbSxlLGcuc09wZXJhdG9yLGcub1ZhbHVlMSxnLm9WYWx1ZTIscyl9aWYoaTxjLmxlbmd0aC0xKXtzKz0iJTIwb3IlMjAifX0pO2lmKGMubGVuZ3RoPjEpe3MrPScpJ31pZihkPGItMSl7cys9IiUyMGFuZCUyMCJ9ZCsrfSk7cmV0dXJuIHN9O2EuX2NyZWF0ZVVybFBhcmFtc0FycmF5PWZ1bmN0aW9uKHApe3ZhciB1LHQ9cS50eXBlKHApO2lmKHQ9PT0iYXJyYXkiKXtyZXR1cm4gcH11PVtdO2lmKHQ9PT0ib2JqZWN0Iil7dS5wdXNoKHEuc2FwLmVuY29kZVVSTFBhcmFtZXRlcnMocCkpfWVsc2UgaWYodD09PSJzdHJpbmciKXt1LnB1c2gocCl9cmV0dXJuIHV9O2EuX3Jlc29sdmVNdWx0aUZpbHRlcj1mdW5jdGlvbihtLE0sZSl7dmFyIHQ9dGhpcyxmPW0uYUZpbHRlcnMscz0iIjtpZihmKXtzKz0iKCI7cS5lYWNoKGYsZnVuY3Rpb24oaSxvKXt2YXIgbD1mYWxzZTtpZihvLl9iTXVsdGlGaWx0ZXIpe3MrPXQuX3Jlc29sdmVNdWx0aUZpbHRlcihvLE0sZSl9ZWxzZSBpZihvLnNQYXRoKXtzKz10Ll9jcmVhdGVGaWx0ZXJTZWdtZW50KG8uc1BhdGgsTSxlLG8uc09wZXJhdG9yLG8ub1ZhbHVlMSxvLm9WYWx1ZTIsIiIpfWlmKGk8KGYubGVuZ3RoLTEpKXtpZihtLmJBbmQpe3MrPSIlMjBhbmQlMjAifWVsc2V7cys9IiUyMG9yJTIwIn19fSk7cys9IikifXJldHVybiBzfTthLl9jcmVhdGVGaWx0ZXJTZWdtZW50PWZ1bmN0aW9uKHAsbSxlLG8sdixWLGYpe3ZhciBQLHQ7aWYoZSl7UD1tLl9nZXRQcm9wZXJ0eU1ldGFkYXRhKGUscCk7dD1QJiZQLnR5cGU7fWlmKHQpe3Y9dGhpcy5mb3JtYXRWYWx1ZSh2LHQpO1Y9KFYhPW51bGwpP3RoaXMuZm9ybWF0VmFsdWUoVix0KTpudWxsfWVsc2V7fWlmKHYpe3Y9cS5zYXAuZW5jb2RlVVJMKFN0cmluZyh2KSl9aWYoVil7Vj1xLnNhcC5lbmNvZGVVUkwoU3RyaW5nKFYpKX1zd2l0Y2gobyl7Y2FzZSJFUSI6Y2FzZSJORSI6Y2FzZSJHVCI6Y2FzZSJHRSI6Y2FzZSJMVCI6Y2FzZSJMRSI6Zis9cCsiJTIwIitvLnRvTG93ZXJDYXNlKCkrIiUyMCIrdjticmVhaztjYXNlIkJUIjpmKz0iKCIrcCsiJTIwZ2UlMjAiK3YrIiUyMGFuZCUyMCIrcCsiJTIwbGUlMjAiK1YrIikiO2JyZWFrO2Nhc2UiQ29udGFpbnMiOmYrPSJzdWJzdHJpbmdvZigiK3YrIiwiK3ArIikiO2JyZWFrO2Nhc2UiU3RhcnRzV2l0aCI6Zis9InN0YXJ0c3dpdGgoIitwKyIsIit2KyIpIjticmVhaztjYXNlIkVuZHNXaXRoIjpmKz0iZW5kc3dpdGgoIitwKyIsIit2KyIpIjticmVhaztkZWZhdWx0OmYrPSJ0cnVlIn1yZXR1cm4gZn07YS5mb3JtYXRWYWx1ZT1mdW5jdGlvbih2LHQpe2lmKCF0aGlzLm9EYXRlVGltZUZvcm1hdCl7dGhpcy5vRGF0ZVRpbWVGb3JtYXQ9RC5nZXREYXRlSW5zdGFuY2Uoe3BhdHRlcm46IidkYXRldGltZScnJ3l5eXktTU0tZGQnVCdISDptbTpzcycnIn0pO3RoaXMub0RhdGVUaW1lT2Zmc2V0Rm9ybWF0PUQuZ2V0RGF0ZUluc3RhbmNlKHtwYXR0ZXJuOiInZGF0ZXRpbWVvZmZzZXQnJyd5eXl5LU1NLWRkJ1QnSEg6bW06c3MnWicnJyJ9KTt0aGlzLm9UaW1lRm9ybWF0PUQuZ2V0VGltZUluc3RhbmNlKHtwYXR0ZXJuOiIndGltZScnJ0hIOm1tOnNzJycifSl9aWYodj09PW51bGx8fHY9PT11bmRlZmluZWQpe3JldHVybiJudWxsIn12YXIgVjtzd2l0Y2godCl7Y2FzZSJFZG0uU3RyaW5nIjpWPSInIitTdHJpbmcodikucmVwbGFjZSgvJy9nLCInJyIpKyInIjticmVhaztjYXNlIkVkbS5UaW1lIjpWPSJ0aW1lJyIrdisiJyI7YnJlYWs7Y2FzZSJFZG0uRGF0ZVRpbWUiOlY9dGhpcy5vRGF0ZVRpbWVGb3JtYXQuZm9ybWF0KG5ldyBEYXRlKHYpLHRydWUpO2JyZWFrO2Nhc2UiRWRtLkRhdGVUaW1lT2Zmc2V0IjpWPXRoaXMub0RhdGVUaW1lT2Zmc2V0Rm9ybWF0LmZvcm1hdChuZXcgRGF0ZSh2KSx0cnVlKTticmVhaztjYXNlIkVkbS5HdWlkIjpWPSJndWlkJyIrdisiJyI7YnJlYWs7Y2FzZSJFZG0uRGVjaW1hbCI6Vj12KyJNIjticmVhaztjYXNlIkVkbS5JbnQ2NCI6Vj12KyJMIjticmVhaztjYXNlIkVkbS5TaW5nbGUiOlY9disiZiI7YnJlYWs7Y2FzZSJFZG0uQmluYXJ5IjpWPSJiaW5hcnknIit2KyInIjticmVhaztkZWZhdWx0OlY9bmV3IFN0cmluZyh2KTticmVha31yZXR1cm4gVn07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwudHlwZS5Cb29sZWFuJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnR5cGUuQm9vbGVhbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC90eXBlL0Jvb2xlYW4iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9mb3JtYXQvTnVtYmVyRm9ybWF0Jywnc2FwL3VpL21vZGVsL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLE4sUyl7InVzZSBzdHJpY3QiO3ZhciBCPVMuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5Cb29sZWFuIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJCb29sZWFuIn19KTtCLnByb3RvdHlwZS5mb3JtYXRWYWx1ZT1mdW5jdGlvbih2LGkpe2lmKHY9PXVuZGVmaW5lZHx8dj09bnVsbCl7cmV0dXJuIG51bGx9c3dpdGNoKGkpe2Nhc2UiYm9vbGVhbiI6cmV0dXJuIHY7Y2FzZSJzdHJpbmciOnJldHVybiB2LnRvU3RyaW5nKCk7Y2FzZSJpbnQiOmNhc2UiZmxvYXQiOmRlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIGZvcm1hdCBCb29sZWFuIHRvICIraSl9fTtCLnByb3RvdHlwZS5wYXJzZVZhbHVlPWZ1bmN0aW9uKHYsaSl7dmFyIHI7c3dpdGNoKGkpe2Nhc2UiYm9vbGVhbiI6cmV0dXJuIHY7Y2FzZSJzdHJpbmciOmlmKHYudG9Mb3dlckNhc2UoKT09InRydWUifHx2PT0iWCIpe3JldHVybiB0cnVlfWlmKHYudG9Mb3dlckNhc2UoKT09ImZhbHNlInx8dj09IiIpe3JldHVybiBmYWxzZX10aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBwYXJzZSBCb29sZWFuIGZyb20gIitpKTtjYXNlImludCI6Y2FzZSJmbG9hdCI6ZGVmYXVsdDp0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBwYXJzZSBCb29sZWFuIGZyb20gIitpKX19O0IucHJvdG90eXBlLnZhbGlkYXRlVmFsdWU9ZnVuY3Rpb24odil7fTtyZXR1cm4gQn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC50eXBlLkRhdGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwudHlwZS5EYXRlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3R5cGUvRGF0ZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL2Zvcm1hdC9EYXRlRm9ybWF0Jywnc2FwL3VpL21vZGVsL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLEQsUyl7InVzZSBzdHJpY3QiO3ZhciBhPVMuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5EYXRlIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJEYXRlIn19KTthLnByb3RvdHlwZS5mb3JtYXRWYWx1ZT1mdW5jdGlvbih2LGkpe3N3aXRjaChpKXtjYXNlInN0cmluZyI6aWYodj09bnVsbCl7cmV0dXJuIiJ9aWYodGhpcy5vSW5wdXRGb3JtYXQpe2lmKHRoaXMub0Zvcm1hdE9wdGlvbnMuc291cmNlLnBhdHRlcm49PSJ0aW1lc3RhbXAiKXtpZih0eXBlb2YodikhPSJudW1iZXIiKXtpZihpc05hTih2KSl7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24oIkNhbm5vdCBmb3JtYXQgZGF0ZTogIit2KyIgaXMgbm90IGEgdmFsaWQgVGltZXN0YW1wIil9ZWxzZXt2PXBhcnNlSW50KHYsMTApfX12PW5ldyBEYXRlKHYpfWVsc2V7aWYodj09IiIpe3JldHVybiIifXY9dGhpcy5vSW5wdXRGb3JtYXQucGFyc2Uodik7aWYodj09bnVsbCl7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24oIkNhbm5vdCBmb3JtYXQgZGF0ZTogIit2KyIgaGFzIHRoZSB3cm9uZyBmb3JtYXQiKX19fXJldHVybiB0aGlzLm9PdXRwdXRGb3JtYXQuZm9ybWF0KHYpO2RlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIGZvcm1hdCBEYXRlIHRvICIraSl9fTthLnByb3RvdHlwZS5wYXJzZVZhbHVlPWZ1bmN0aW9uKHYsaSl7dmFyIHI7c3dpdGNoKGkpe2Nhc2Uic3RyaW5nIjppZih2PT09IiIpe3JldHVybiBudWxsfXZhciByPXRoaXMub091dHB1dEZvcm1hdC5wYXJzZSh2KTtpZighcil7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbih2KyIgaXMgbm90IGEgdmFsaWQgRGF0ZSB2YWx1ZSIpfWlmKHRoaXMub0lucHV0Rm9ybWF0KXtpZih0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZS5wYXR0ZXJuPT0idGltZXN0YW1wIil7cj1yLmdldFRpbWUoKX1lbHNle3I9dGhpcy5vSW5wdXRGb3JtYXQuZm9ybWF0KHIpfX1yZXR1cm4gcjtkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIHBhcnNlIERhdGUgZnJvbSAiK2kpfX07YS5wcm90b3R5cGUudmFsaWRhdGVWYWx1ZT1mdW5jdGlvbih2KXtpZih0aGlzLm9Db25zdHJhaW50cyl7dmFyIFY9W10saT10aGlzLm9JbnB1dEZvcm1hdDtpZihpJiZ0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZS5wYXR0ZXJuIT0idGltZXN0YW1wIil7dj1pLnBhcnNlKHYpfXEuZWFjaCh0aGlzLm9Db25zdHJhaW50cyxmdW5jdGlvbihuLGMpe2lmKGkpe2M9aS5wYXJzZShjKX1zd2l0Y2gobil7Y2FzZSJtaW5pbXVtIjppZih2PGMpe1YucHVzaCgibWluaW11bSIpfWJyZWFrO2Nhc2UibWF4aW11bSI6aWYodj5jKXtWLnB1c2goIm1heGltdW0iKX19fSk7aWYoVi5sZW5ndGg+MCl7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5WYWxpZGF0ZUV4Y2VwdGlvbigiVmFsaWRhdGlvbiBvZiB0eXBlIGNvbnN0cmFpbnRzIGZhaWxlZCIsVil9fX07YS5wcm90b3R5cGUuc2V0Rm9ybWF0T3B0aW9ucz1mdW5jdGlvbihmKXt0aGlzLm9Gb3JtYXRPcHRpb25zPWY7dGhpcy5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlKCl9O2EucHJvdG90eXBlLmdldE91dHB1dFBhdHRlcm49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vT3V0cHV0Rm9ybWF0Lm9Gb3JtYXRPcHRpb25zLnBhdHRlcm59O2EucHJvdG90eXBlLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLm9PdXRwdXRGb3JtYXQ9RC5nZXRJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zKTtpZih0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZSl7dGhpcy5vSW5wdXRGb3JtYXQ9RC5nZXRJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZSl9fTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC50eXBlLkRhdGVUaW1lJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnR5cGUuRGF0ZVRpbWUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvdHlwZS9EYXRlVGltZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRGF0ZSddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiO3ZhciBhPUQuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5EYXRlVGltZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7RC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zTmFtZT0iRGF0ZVRpbWUifX0pO2EucHJvdG90eXBlLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLm9PdXRwdXRGb3JtYXQ9c2FwLnVpLmNvcmUuZm9ybWF0LkRhdGVGb3JtYXQuZ2V0RGF0ZVRpbWVJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zKTtpZih0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZSl7dGhpcy5vSW5wdXRGb3JtYXQ9c2FwLnVpLmNvcmUuZm9ybWF0LkRhdGVGb3JtYXQuZ2V0RGF0ZVRpbWVJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZSl9fTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC50eXBlLkZsb2F0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnR5cGUuRmxvYXQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvdHlwZS9GbG9hdCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL2Zvcm1hdC9OdW1iZXJGb3JtYXQnLCdzYXAvdWkvbW9kZWwvU2ltcGxlVHlwZSddLGZ1bmN0aW9uKHEsTixTKXsidXNlIHN0cmljdCI7dmFyIEY9Uy5leHRlbmQoInNhcC51aS5tb2RlbC50eXBlLkZsb2F0Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJGbG9hdCJ9fSk7Ri5wcm90b3R5cGUuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odixpKXtpZih2PT11bmRlZmluZWR8fHY9PW51bGwpe3JldHVybiBudWxsfXN3aXRjaChpKXtjYXNlInN0cmluZyI6cmV0dXJuIHRoaXMub0Zvcm1hdC5mb3JtYXQodik7Y2FzZSJpbnQiOnJldHVybiBNYXRoLmZsb29yKHYpO2Nhc2UiZmxvYXQiOnJldHVybiB2O2RlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIGZvcm1hdCBGbG9hdCB0byAiK2kpfX07Ri5wcm90b3R5cGUucGFyc2VWYWx1ZT1mdW5jdGlvbih2LGkpe3ZhciByO3N3aXRjaChpKXtjYXNlInN0cmluZyI6cj10aGlzLm9Gb3JtYXQucGFyc2Uodik7aWYoaXNOYU4ocikpe3Rocm93IG5ldyBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24odisiIGlzIG5vdCBhIHZhbGlkIEZsb2F0IHZhbHVlIil9cmV0dXJuIHI7Y2FzZSJpbnQiOmNhc2UiZmxvYXQiOnJldHVybiB2O2RlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gcGFyc2UgRmxvYXQgZnJvbSAiK2kpfX07Ri5wcm90b3R5cGUudmFsaWRhdGVWYWx1ZT1mdW5jdGlvbih2KXtpZih0aGlzLm9Db25zdHJhaW50cyl7dmFyIFY9W107cS5lYWNoKHRoaXMub0NvbnN0cmFpbnRzLGZ1bmN0aW9uKG4sYyl7c3dpdGNoKG4pe2Nhc2UibWluaW11bSI6aWYodjxjKXtWLnB1c2goIm1pbmltdW0iKX1icmVhaztjYXNlIm1heGltdW0iOmlmKHY+Yyl7Vi5wdXNoKCJtYXhpbXVtIil9fX0pO2lmKFYubGVuZ3RoPjApe3Rocm93IG5ldyBzYXAudWkubW9kZWwuVmFsaWRhdGVFeGNlcHRpb24oIlZhbGlkYXRpb24gb2YgdHlwZSBjb25zdHJhaW50cyBmYWlsZWQiLFYpfX19O0YucHJvdG90eXBlLnNldEZvcm1hdE9wdGlvbnM9ZnVuY3Rpb24oZil7dGhpcy5vRm9ybWF0T3B0aW9ucz1mO3RoaXMuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSgpfTtGLnByb3RvdHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5vRm9ybWF0PU4uZ2V0RmxvYXRJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zKX07cmV0dXJuIEZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwudHlwZS5JbnRlZ2VyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnR5cGUuSW50ZWdlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC90eXBlL0ludGVnZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9mb3JtYXQvTnVtYmVyRm9ybWF0Jywnc2FwL3VpL21vZGVsL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLE4sUyl7InVzZSBzdHJpY3QiO3ZhciBJPVMuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5JbnRlZ2VyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJJbnRlZ2VyIn19KTtJLnByb3RvdHlwZS5mb3JtYXRWYWx1ZT1mdW5jdGlvbih2LGkpe2lmKHY9PXVuZGVmaW5lZHx8dj09bnVsbCl7cmV0dXJuIG51bGx9c3dpdGNoKGkpe2Nhc2Uic3RyaW5nIjpyZXR1cm4gdGhpcy5vRm9ybWF0LmZvcm1hdCh2KTtjYXNlImludCI6Y2FzZSJmbG9hdCI6cmV0dXJuIHY7ZGVmYXVsdDp0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLkZvcm1hdEV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gZm9ybWF0IEludGVnZXIgdG8gIitpKX19O0kucHJvdG90eXBlLnBhcnNlVmFsdWU9ZnVuY3Rpb24odixpKXt2YXIgcjtzd2l0Y2goaSl7Y2FzZSJmbG9hdCI6Y2FzZSJzdHJpbmciOnI9dGhpcy5vRm9ybWF0LnBhcnNlKFN0cmluZyh2KSk7aWYoaXNOYU4ocikpe3Rocm93IG5ldyBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24odisiIGlzIG5vdCBhIHZhbGlkIEludGVnZXIgdmFsdWUiKX1yZXR1cm4gcjtjYXNlImludCI6cmV0dXJuIHY7ZGVmYXVsdDp0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBwYXJzZSBJbnRlZ2VyIGZyb20gIitpKX19O0kucHJvdG90eXBlLnZhbGlkYXRlVmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5vQ29uc3RyYWludHMpe3ZhciBWPVtdO3EuZWFjaCh0aGlzLm9Db25zdHJhaW50cyxmdW5jdGlvbihuLGMpe3N3aXRjaChuKXtjYXNlIm1pbmltdW0iOmlmKHY8Yyl7Vi5wdXNoKCJtaW5pbXVtIil9YnJlYWs7Y2FzZSJtYXhpbXVtIjppZih2PmMpe1YucHVzaCgibWF4aW11bSIpfX19KTtpZihWLmxlbmd0aD4wKXt0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlZhbGlkYXRlRXhjZXB0aW9uKCJWYWxpZGF0aW9uIG9mIHR5cGUgY29uc3RyYWludHMgZmFpbGVkIixWKX19fTtJLnByb3RvdHlwZS5zZXRGb3JtYXRPcHRpb25zPWZ1bmN0aW9uKGYpe3RoaXMub0Zvcm1hdE9wdGlvbnM9Zjt0aGlzLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2UoKX07SS5wcm90b3R5cGUuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZT1mdW5jdGlvbigpe3RoaXMub0Zvcm1hdD1OLmdldEludGVnZXJJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zKX07cmV0dXJuIEl9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwudHlwZS5TdHJpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwudHlwZS5TdHJpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvdHlwZS9TdHJpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9mb3JtYXQvTnVtYmVyRm9ybWF0Jywnc2FwL3VpL21vZGVsL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLE4sUyl7InVzZSBzdHJpY3QiO3ZhciBhPVMuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5TdHJpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe1MuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc05hbWU9IlN0cmluZyI7aWYodGhpcy5vQ29uc3RyYWludHMuc2VhcmNoJiZ0eXBlb2YgdGhpcy5vQ29uc3RyYWludHMuc2VhcmNoPT0ic3RyaW5nIil7dGhpcy5vQ29uc3RyYWludHMuc2VhcmNoPW5ldyBSZWdFeHAodGhpcy5vQ29uc3RyYWludHMuc2VhcmNoKX19fSk7YS5wcm90b3R5cGUuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odixpKXtpZih2PT11bmRlZmluZWR8fHY9PW51bGwpe3JldHVybiBudWxsfXN3aXRjaChpKXtjYXNlInN0cmluZyI6cmV0dXJuIHY7Y2FzZSJpbnQiOnZhciByPXBhcnNlSW50KHYsMTApO2lmKGlzTmFOKHIpKXt0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLkZvcm1hdEV4Y2VwdGlvbih2KyIgaXMgbm90IGEgdmFsaWQgaW50IHZhbHVlIil9cmV0dXJuIHI7Y2FzZSJmbG9hdCI6dmFyIFI9cGFyc2VGbG9hdCh2KTtpZihpc05hTihSKSl7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24odisiIGlzIG5vdCBhIHZhbGlkIGZsb2F0IHZhbHVlIil9cmV0dXJuIFI7Y2FzZSJib29sZWFuIjppZih2LnRvTG93ZXJDYXNlKCk9PSJ0cnVlInx8dj09IlgiKXtyZXR1cm4gdHJ1ZX1pZih2LnRvTG93ZXJDYXNlKCk9PSJmYWxzZSJ8fHY9PSIiKXtyZXR1cm4gZmFsc2V9dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24odisiIGlzIG5vdCBhIHZhbGlkIGJvb2xlYW4gdmFsdWUiKTtkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBmb3JtYXQgU3RyaW5nIHRvICIraSl9fTthLnByb3RvdHlwZS5wYXJzZVZhbHVlPWZ1bmN0aW9uKHYsaSl7dmFyIHI7c3dpdGNoKGkpe2Nhc2Uic3RyaW5nIjpyZXR1cm4gdjtjYXNlImJvb2xlYW4iOmNhc2UiaW50IjpjYXNlImZsb2F0IjpyZXR1cm4gdi50b1N0cmluZygpO2RlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gcGFyc2UgU3RyaW5nIGZyb20gIitpKX19O2EucHJvdG90eXBlLnZhbGlkYXRlVmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5vQ29uc3RyYWludHMpe3ZhciBWPVtdO3EuZWFjaCh0aGlzLm9Db25zdHJhaW50cyxmdW5jdGlvbihuLGMpe3N3aXRjaChuKXtjYXNlIm1heExlbmd0aCI6aWYodi5sZW5ndGg+Yyl7Vi5wdXNoKCJtYXhMZW5ndGgiKX1icmVhaztjYXNlIm1pbkxlbmd0aCI6aWYodi5sZW5ndGg8Yyl7Vi5wdXNoKCJtaW5MZW5ndGgiKX1icmVhaztjYXNlInN0YXJ0c1dpdGgiOmlmKCFxLnNhcC5zdGFydHNXaXRoKHYsYykpe1YucHVzaCgic3RhcnRzV2l0aCIpfWJyZWFrO2Nhc2Uic3RhcnRzV2l0aElnbm9yZUNhc2UiOmlmKCFxLnNhcC5zdGFydHNXaXRoSWdub3JlQ2FzZSh2LGMpKXtWLnB1c2goInN0YXJ0c1dpdGhJZ25vcmVDYXNlIil9YnJlYWs7Y2FzZSJlbmRzV2l0aCI6aWYoIXEuc2FwLmVuZHNXaXRoKHYsYykpe1YucHVzaCgiZW5kc1dpdGgiKX1icmVhaztjYXNlImVuZHNXaXRoSWdub3JlQ2FzZSI6aWYoIXEuc2FwLmVuZHNXaXRoSWdub3JlQ2FzZSh2LGMpKXtWLnB1c2goImVuZHNXaXRoSWdub3JlQ2FzZSIpfWJyZWFrO2Nhc2UiY29udGFpbnMiOmlmKHYuaW5kZXhPZihjKT09LTEpe1YucHVzaCgiY29udGFpbnMiKX1icmVhaztjYXNlImVxdWFscyI6aWYodiE9Yyl7Vi5wdXNoKCJlcXVhbHMiKX1icmVhaztjYXNlInNlYXJjaCI6aWYodi5zZWFyY2goYyk9PS0xKXtWLnB1c2goInNlYXJjaCIpfWJyZWFrfX0pO2lmKFYubGVuZ3RoPjApe3Rocm93IG5ldyBzYXAudWkubW9kZWwuVmFsaWRhdGVFeGNlcHRpb24oIlZhbGlkYXRpb24gb2YgdHlwZSBjb25zdHJhaW50cyBmYWlsZWQiLFYpfX19O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnR5cGUuVGltZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC50eXBlLlRpbWUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvdHlwZS9UaW1lIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9EYXRlJ10sZnVuY3Rpb24ocSxEKXsidXNlIHN0cmljdCI7dmFyIFQ9RC5leHRlbmQoInNhcC51aS5tb2RlbC50eXBlLlRpbWUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc05hbWU9IlRpbWUifX0pO1QucHJvdG90eXBlLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLm9PdXRwdXRGb3JtYXQ9c2FwLnVpLmNvcmUuZm9ybWF0LkRhdGVGb3JtYXQuZ2V0VGltZUluc3RhbmNlKHRoaXMub0Zvcm1hdE9wdGlvbnMpO2lmKHRoaXMub0Zvcm1hdE9wdGlvbnMuc291cmNlKXt0aGlzLm9JbnB1dEZvcm1hdD1zYXAudWkuY29yZS5mb3JtYXQuRGF0ZUZvcm1hdC5nZXRUaW1lSW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2UpfX07cmV0dXJuIFR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLnVpJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC51aScpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAudWkiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvR2xvYmFsJ10sZnVuY3Rpb24ocSxHKXsidXNlIHN0cmljdCI7aWYoIXEuc2FwKXt0aHJvdyJJbml0aWFsaXNhdGlvbiBvZiBqUXVlcnkuc2FwLnVpIGZhaWxlZC4galF1ZXJ5LnNhcCBwbHVnaW4gcmVxdWlyZWQhIn1pZighd2luZG93LnNhcHx8IXdpbmRvdy5zYXAudWkpe3Euc2FwLmZhdGFsKCJJbml0aWFsaXNhdGlvbiBvZiBqUXVlcnkuc2FwLnVpIGZhaWxlZC4gR2xvYmFsIFNBUCBVSSBuYW1lc3BhY2UgcmVxdWlyZWQhIil9aWYocS5zYXAudWkpe3JldHVybn1mdW5jdGlvbiB1KGkpe3JldHVybiBzYXAudWkuZ2V0Q29yZSgpLmdldFVJQXJlYSh0aGlzLmlkKSE9bnVsbH1mdW5jdGlvbiBmKGksbyl7cmV0dXJuIHNhcC51aS5nZXRDb3JlKCkuZ2V0VUlBcmVhKHRoaXMuaWQpfWZ1bmN0aW9uIGEoYyxpKXtyZXR1cm4gYy5nZXRVSUFyZWEoKS5nZXRJbnRlcmZhY2UoKX1xLmZuLnJvb3Q9ZnVuY3Rpb24ocil7dmFyIHQ7aWYocil7c2FwLnVpLmdldENvcmUoKS5zZXRSb290KHRoaXMuZ2V0KDApLHIpO3JldHVybiB0aGlzfXZhciBjPXRoaXMuY29udHJvbCgpO2lmKGMubGVuZ3RoPjApe3JldHVybiBxLm1hcChjLGEpfXZhciBVPXRoaXMudWlhcmVhKCk7aWYoVS5sZW5ndGg+MCl7cmV0dXJuIFV9dGhpcy5lYWNoKGZ1bmN0aW9uKGkpe3NhcC51aS5nZXRDb3JlKCkuY3JlYXRlVUlBcmVhKHRoaXMpfSk7cmV0dXJuIHRoaXN9O3EuZm4udWlhcmVhPWZ1bmN0aW9uKGkpe3ZhciBVPXRoaXMuc2xpY2UoIltpZF0iKS5maWx0ZXIodSkubWFwKGYpLmdldCgpO3JldHVybiB0eXBlb2YoaSk9PT0ibnVtYmVyIj9VW2ldOlV9O2Z1bmN0aW9uIGIoKXtpZighdGhpc3x8IXRoaXMubm9kZVR5cGV8fHRoaXMubm9kZVR5cGU9PT05KXtyZXR1cm4gbnVsbH10cnl7dmFyIGk9cSh0aGlzKS5jbG9zZXN0KCJbZGF0YS1zYXAtdWldIikuYXR0cigiaWQiKTtyZXR1cm4gaT9zYXAudWkuZ2V0Q29yZSgpLmJ5SWQoaSk6bnVsbH1jYXRjaChlKXtyZXR1cm4gbnVsbH19cS5mbi5jb250cm9sPWZ1bmN0aW9uKGkpe3ZhciBjPXRoaXMubWFwKGIpO2lmKGk9PT11bmRlZmluZWR8fGlzTmFOKGkpKXtyZXR1cm4gYy5nZXQoKX1lbHNle3JldHVybiBjLmdldChpKX19O3EuZm4uc2FwdWk9ZnVuY3Rpb24oYyxpLEMpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbz1udWxsO2lmKHRoaXMpe2lmKGMuaW5kZXhPZigiLiIpPT0tMSl7Yz0ic2FwLnVpLmNvbW1vbnMuIitjfXZhciBkPXEuc2FwLmdldE9iamVjdChjKTtpZihkKXtpZih0eXBlb2YgQz09J29iamVjdCcmJnR5cGVvZiBDLnByZXNzPT0nZnVuY3Rpb24nKXtDLnByZXNzPXEucHJveHkoQy5wcmVzcyx0aGlzKX1vPW5ldyhkKShpLEMpO28ucGxhY2VBdCh0aGlzKX19fSl9O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5hcHAuQXBwbGljYXRpb25NZXRhZGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5hcHAuQXBwbGljYXRpb25NZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9hcHAvQXBwbGljYXRpb25NZXRhZGF0YSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL0NvbXBvbmVudE1ldGFkYXRhJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIEE9ZnVuY3Rpb24oYyxvKXtDLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07QS5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KEMucHJvdG90eXBlKTtBLnByZXByb2Nlc3NDbGFzc0luZm89ZnVuY3Rpb24oYyl7aWYoYyYmdHlwZW9mIGMubWV0YWRhdGE9PT0ic3RyaW5nIil7Yy5tZXRhZGF0YT17X3NyYzpjLm1ldGFkYXRhfX1yZXR1cm4gY307QS5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncz1mdW5jdGlvbihjKXt2YXIgcz1jLm1ldGFkYXRhO0MucHJvdG90eXBlLmFwcGx5U2V0dGluZ3MuY2FsbCh0aGlzLGMpO2lmKHMuX3NyYyl7cS5zYXAubG9nLndhcm5pbmcoIlRoZSBtZXRhZGF0YSBvZiB0aGUgYXBwbGljYXRpb24gIit0aGlzLmdldE5hbWUoKSsiIGlzIGxvYWRlZCBmcm9tIGZpbGUgIitzLl9zcmMrIi4gVGhpcyBpcyBhIGRlc2lnbiB0aW1lIGZlYXR1cmUgYW5kIG5vdCBmb3IgcHJvZHVjdGl2ZSB1c2FnZSEiKTt2YXIgcD10aGlzLmdldE5hbWUoKS5yZXBsYWNlKC9cLlx3Kz8kLywiIik7dmFyIHU9cS5zYXAuZ2V0TW9kdWxlUGF0aChwLCIvIitzLl9zcmMpO3ZhciByPXEuc2FwLnN5bmNHZXRKU09OKHUpO2lmKHIuc3VjY2Vzcyl7cS5leHRlbmQocyxyLmRhdGEpfWVsc2V7cS5zYXAubG9nLmVycm9yKCJGYWlsZWQgdG8gbG9hZCBhcHBsaWNhdGlvbiBtZXRhZGF0YSBmcm9tIFwiIitzLl9zcmMrIlwiISBSZWFzb246ICIrci5lcnJvcil9fXRoaXMuX21Sb290Q29tcG9uZW50PXMucm9vdENvbXBvbmVudHx8bnVsbH07QS5wcm90b3R5cGUuZ2V0Um9vdENvbXBvbmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tUm9vdENvbXBvbmVudH07cmV0dXJuIEF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuSFRNTFZpZXdTZXJpYWxpemVyJykpewovKgogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLkhUTUxWaWV3U2VyaWFsaXplcicpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkudmtiZWF1dGlmeScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvc2VyaWFsaXplci9IVE1MVmlld1NlcmlhbGl6ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnLi9kZWxlZ2F0ZS9IVE1MJywnc2FwL3VpL3RoaXJkcGFydHkvdmtiZWF1dGlmeSddLGZ1bmN0aW9uKHEsRSxILHYpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1FLmV4dGVuZCgic2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLkhUTUxWaWV3U2VyaWFsaXplciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKFYsdyxnLEcpe0UuYXBwbHkodGhpcyk7dGhpcy5fb1ZpZXc9Vjt0aGlzLl9vV2luZG93PXc7dGhpcy5fZm5HZXRDb250cm9sSWQ9Zzt0aGlzLl9mbkdldEV2ZW50SGFuZGxlck5hbWU9R319KTthLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXt2YXIgcz1mdW5jdGlvbihDKXtyZXR1cm4oQyBpbnN0YW5jZW9mIHRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUubXZjLlZpZXcpfTt2YXIgYz1uZXcgc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLlNlcmlhbGl6ZXIodGhpcy5fb1ZpZXcsbmV3IEgodGhpcy5fZm5HZXRDb250cm9sSWQsdGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lKSx0cnVlLHRoaXMuX29XaW5kb3cscyk7dmFyIHI9Yy5zZXJpYWxpemUoKTt2YXIgVj1bXTtWLnB1c2goJzx0ZW1wbGF0ZScpO2lmKHRoaXMuX29WaWV3LmdldENvbnRyb2xsZXJOYW1lJiZ0aGlzLl9vVmlldy5nZXRDb250cm9sbGVyTmFtZSgpKXtWLnB1c2goJyBkYXRhLWNvbnRyb2xsZXItbmFtZT0iJyt0aGlzLl9vVmlldy5nZXRDb250cm9sbGVyTmFtZSgpKyciJyl9Vi5wdXNoKCIgPiIpO1YucHVzaChyKTtWLnB1c2goIjwvdGVtcGxhdGU+Iik7cmV0dXJuIHZrYmVhdXRpZnkueG1sKFYuam9pbigiIikpfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5YTUxWaWV3U2VyaWFsaXplcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5YTUxWaWV3U2VyaWFsaXplcicpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkudmtiZWF1dGlmeScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvc2VyaWFsaXplci9YTUxWaWV3U2VyaWFsaXplciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInLCcuL2RlbGVnYXRlL1hNTCcsJ3NhcC91aS90aGlyZHBhcnR5L3ZrYmVhdXRpZnknXSxmdW5jdGlvbihxLEUsWCx2KXsidXNlIHN0cmljdCI7dmFyIGE9RS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5YTUxWaWV3U2VyaWFsaXplciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKFYsdyxkLGcsRyl7RS5hcHBseSh0aGlzKTt0aGlzLl9vVmlldz1WO3RoaXMuX29XaW5kb3c9dzt0aGlzLl9zRGVmYXVsdE5hbWVzcGFjZT1kO3RoaXMuX2ZuR2V0Q29udHJvbElkPWc7dGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lPUd9fSk7YS5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7dmFyIHA9W107dmFyIG09ZnVuY3Rpb24oQyxQKXtpZighUCl7dmFyIHQ9KEMpP0MuY29uc3RydWN0b3I6Ij8iO3Rocm93IEVycm9yKCJDb250cm9scyB3aXRoIGVtcHR5IHBhY2thZ2UgYXJlIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBYTUwgc2VyaWFsaXplcjogIit0KX1pZihxLmluQXJyYXkoUCxwKT09PS0xKXtwLnB1c2goUCl9fTt2YXIgcz1mdW5jdGlvbihDKXtyZXR1cm4oQyBpbnN0YW5jZW9mIHRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUubXZjLlZpZXcpfTt2YXIgYz1uZXcgc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLlNlcmlhbGl6ZXIodGhpcy5fb1ZpZXcsbmV3IFgodGhpcy5fc0RlZmF1bHROYW1lc3BhY2UsdGhpcy5fZm5HZXRDb250cm9sSWQsdGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lLG0pLHRydWUsdGhpcy5fb1dpbmRvdyxzKTt2YXIgcj1jLnNlcmlhbGl6ZSgpO3ZhciBWPVtdO1YucHVzaCgnPHNhcC51aS5jb3JlLm12YzpWaWV3Jyk7aWYodGhpcy5fb1ZpZXcuZ2V0Q29udHJvbGxlck5hbWUmJnRoaXMuX29WaWV3LmdldENvbnRyb2xsZXJOYW1lKCkpe1YucHVzaCgnIGNvbnRyb2xsZXJOYW1lPSInK3RoaXMuX29WaWV3LmdldENvbnRyb2xsZXJOYW1lKCkrJyInKX1pZihxLmluQXJyYXkoJ3NhcC51aS5jb3JlJyxwKT09PS0xKXtwLnB1c2goJ3NhcC51aS5jb3JlJyl9Zm9yKHZhciBpPTA7aTxwLmxlbmd0aDtpKyspe2lmKHRoaXMuX3NEZWZhdWx0TmFtZXNwYWNlJiZ0aGlzLl9zRGVmYXVsdE5hbWVzcGFjZT09PXBbaV0pe1YucHVzaCgnIHhtbG5zPSInK3BbaV0rJyInKX1lbHNle1YucHVzaCgnIHhtbG5zOicrcFtpXSsnPSInK3BbaV0rJyInKX19Vi5wdXNoKCIgPiIpO1YucHVzaChyKTtWLnB1c2goIjwvc2FwLnVpLmNvcmUubXZjOlZpZXc+Iik7cmV0dXJuIHZrYmVhdXRpZnkueG1sKFYuam9pbigiIikpfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLndzLlNhcFBjcFdlYlNvY2tldCcpKXsKLyohCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS53cy5TYXBQY3BXZWJTb2NrZXQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS93cy9TYXBQY3BXZWJTb2NrZXQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1dlYlNvY2tldCddLGZ1bmN0aW9uKHEsVyl7InVzZSBzdHJpY3QiO3ZhciBTPVcuZXh0ZW5kKCJzYXAudWkuY29yZS53cy5TYXBQY3BXZWJTb2NrZXQiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbih1LHApe1cuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pO1MuU1VQUE9SVEVEX1BST1RPQ09MUz17djEwOiJ2MTAucGNwLnNhcC5jb20ifTtTLl9kZXNlcmlhbGl6ZVJlZ2V4cD0vKCg/OlteOlxcXXwoPzpcXC4pKSspOigoPzpbXjpcXFxuXXwoPzpcXC4pKSopLztTLl9TRVBBUkFUT1I9IlxuXG4iO1MuX01FU1NBR0U9Ik1FU1NBR0UiO1MucHJvdG90eXBlLl9vbm9wZW49ZnVuY3Rpb24oKXt2YXIgcz1mYWxzZTtpZih0aGlzLmdldFByb3RvY29sKCk9PT0iIil7cz10cnVlfWVsc2V7Zm9yKHZhciBwIGluIFMuU1VQUE9SVEVEX1BST1RPQ09MUyl7aWYoUy5TVVBQT1JURURfUFJPVE9DT0xTLmhhc093blByb3BlcnR5KHApKXtpZihTLlNVUFBPUlRFRF9QUk9UT0NPTFNbcF09PT10aGlzLmdldFByb3RvY29sKCkpe3M9dHJ1ZTticmVha319fX1pZihzKXt0aGlzLmZpcmVPcGVuKCl9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIlVuc3VwcG9ydGVkIHByb3RvY29sICciK3RoaXMuZ2V0UHJvdG9jb2woKSsiJyBzZWxlY3RlZCBieSB0aGUgc2VydmVyLiAiKyJDb25uZWN0aW9uIHdpbGwgYmUgY2xvc2VkLiIpO3RoaXMuY2xvc2UoIlVuc3VwcG9ydGVkIHByb3RvY29sIHNlbGVjdGVkIGJ5IHRoZSBzZXJ2ZXIiKX19O1MucHJvdG90eXBlLl9vbm1lc3NhZ2U9ZnVuY3Rpb24obSl7dmFyIHM9LTEsZT17fTtpZih0eXBlb2YgbS5kYXRhPT09InN0cmluZyIpe3M9bS5kYXRhLmluZGV4T2YoUy5fU0VQQVJBVE9SKX1pZihzIT09LTEpe2UucGNwRmllbGRzPXRoaXMuX2V4dHJhY3RQY3BGaWVsZHMobS5kYXRhLnN1YnN0cmluZygwLHMpKTtlLmRhdGE9bS5kYXRhLnN1YnN0cihzK1MuX1NFUEFSQVRPUi5sZW5ndGgpfWVsc2V7cS5zYXAubG9nLndhcm5pbmcoIkludmFsaWQgUENQIG1lc3NhZ2UgcmVjZWl2ZWQ6ICIrbS5kYXRhKTtlLnBjcEZpZWxkcz17fTtlLmRhdGE9bS5kYXRhfXRoaXMuZmlyZU1lc3NhZ2UoZSl9O1MucHJvdG90eXBlLl9leHRyYWN0UGNwRmllbGRzPWZ1bmN0aW9uKGgpe3ZhciBmPWguc3BsaXQoIlxuIiksbD1bXSxwPXt9O2Zvcih2YXIgaT0wO2k8Zi5sZW5ndGg7aSsrKXtsPWZbaV0ubWF0Y2goUy5fZGVzZXJpYWxpemVSZWdleHApO2lmKGwmJmwubGVuZ3RoPT09Myl7cFt0aGlzLl91bmVzY2FwZShsWzFdKV09dGhpcy5fdW5lc2NhcGUobFsyXSl9fXJldHVybiBwfTtTLnByb3RvdHlwZS5fdW5lc2NhcGU9ZnVuY3Rpb24oZSl7dmFyIHA9ZS5zcGxpdCgiXHUwMDA4IiksdT0iIjtmb3IodmFyIGk9MDtpPHAubGVuZ3RoO2krKyl7cFtpXT1wW2ldLnJlcGxhY2UoL1xcXFwvZywiXHUwMDA4IikucmVwbGFjZSgvXFw6L2csJzonKS5yZXBsYWNlKC9cXG4vZywnXG4nKS5yZXBsYWNlKC9cdTAwMDgvZywiXFwiKX11PXAuam9pbigiXHUwMDA4Iik7cmV0dXJuIHV9O1MucHJvdG90eXBlLl9zZXJpYWxpemVQY3BGaWVsZHM9ZnVuY3Rpb24ocCxtLFApe3ZhciBzPSIiLGY9IiIsYT0iIjtpZihtPT09J3N0cmluZycpe2E9J3RleHQnfWVsc2UgaWYobT09PSdibG9iJ3x8bT09PSdhcnJheWJ1ZmZlcicpe2E9J2JpbmFyeSd9aWYocCYmdHlwZW9mIHA9PT0nb2JqZWN0Jyl7Zm9yKGYgaW4gcCl7aWYocC5oYXNPd25Qcm9wZXJ0eShmKSYmZi5pbmRleE9mKCdwY3AtJykhPT0wKXtzKz10aGlzLl9lc2NhcGUoZikrIjoiK3RoaXMuX2VzY2FwZShTdHJpbmcocFtmXSkpKyJcbiJ9fX1yZXR1cm4icGNwLWFjdGlvbjoiK1ArIlxucGNwLWJvZHktdHlwZToiK2ErIlxuIitzKyJcbiJ9O1MucHJvdG90eXBlLl9lc2NhcGU9ZnVuY3Rpb24odSl7cmV0dXJuIHUucmVwbGFjZSgvXFwvZywnXFxcXCcpLnJlcGxhY2UoLzovZywnXFw6JykucmVwbGFjZSgvXG4vZywnXFxuJyl9O1MucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24obSxwKXt2YXIgTT10eXBlb2YgbSxQPSIiO1A9dGhpcy5fc2VyaWFsaXplUGNwRmllbGRzKHAsTSxTLl9NRVNTQUdFKTtXLnByb3RvdHlwZS5zZW5kLmNhbGwodGhpcyxQK20pO3JldHVybiB0aGlzfTtyZXR1cm4gU30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5DbGllbnRDb250ZXh0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5DbGllbnRDb250ZXh0QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9DbGllbnRDb250ZXh0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQ29udGV4dEJpbmRpbmcnXSxmdW5jdGlvbihxLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1DLmV4dGVuZCgic2FwLnVpLm1vZGVsLkNsaWVudENvbnRleHRCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsUCxlKXtDLmNhbGwodGhpcyxtLHAsYyxQLGUpO3ZhciB0PXRoaXM7bS5jcmVhdGVCaW5kaW5nQ29udGV4dChwLGMsUCxmdW5jdGlvbihjKXt0LmJJbml0aWFsPWZhbHNlO3Qub0VsZW1lbnRDb250ZXh0PWN9KX19KTthLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGYpe3ZhciB0PXRoaXM7dGhpcy5vTW9kZWwuY3JlYXRlQmluZGluZ0NvbnRleHQodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0LHRoaXMubVBhcmFtZXRlcnMsZnVuY3Rpb24oYyl7aWYodC5vRWxlbWVudENvbnRleHQ9PT1jJiYhZil7dC5vTW9kZWwuY2hlY2tVcGRhdGUodHJ1ZSxjKX1lbHNle3Qub0VsZW1lbnRDb250ZXh0PWM7dC5fZmlyZUNoYW5nZSgpfX0sdHJ1ZSl9O2EucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMub01vZGVsLmNyZWF0ZUJpbmRpbmdDb250ZXh0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCx0aGlzLm1QYXJhbWV0ZXJzLGZ1bmN0aW9uKGMpe3Qub0VsZW1lbnRDb250ZXh0PWM7dC5fZmlyZUNoYW5nZSgpfSx0cnVlKX07YS5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXt2YXIgdD10aGlzO2lmKHRoaXMub0NvbnRleHQhPWMpe3RoaXMub0NvbnRleHQ9Yzt0aGlzLm9Nb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQsdGhpcy5tUGFyYW1ldGVycyxmdW5jdGlvbihjKXt0Lm9FbGVtZW50Q29udGV4dD1jO3QuX2ZpcmVDaGFuZ2UoKX0pfX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQ2xpZW50TGlzdEJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ2xpZW50TGlzdEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ2xpZW50TGlzdEJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0ZpbHRlclR5cGUnLCcuL0xpc3RCaW5kaW5nJ10sZnVuY3Rpb24ocSxGLEwpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz1MLmV4dGVuZCgic2FwLnVpLm1vZGVsLkNsaWVudExpc3RCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMscyxmLFApe0wuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudXBkYXRlKCl9LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiZ2V0TGVuZ3RoIl19fSk7Qy5wcm90b3R5cGUuX2dldENvbnRleHRzPWZ1bmN0aW9uKHMsbCl7aWYoIXMpe3M9MH1pZighbCl7bD1NYXRoLm1pbih0aGlzLmlMZW5ndGgsdGhpcy5vTW9kZWwuaVNpemVMaW1pdCl9dmFyIGU9TWF0aC5taW4ocytsLHRoaXMuYUluZGljZXMubGVuZ3RoKSxjLGE9W10scD10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYocCYmIXEuc2FwLmVuZHNXaXRoKHAsIi8iKSl7cCs9Ii8ifWZvcih2YXIgaT1zO2k8ZTtpKyspe2M9dGhpcy5vTW9kZWwuZ2V0Q29udGV4dChwK3RoaXMuYUluZGljZXNbaV0pO2EucHVzaChjKX1yZXR1cm4gYX07Qy5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXtpZih0aGlzLm9Db250ZXh0IT1jKXt0aGlzLm9Db250ZXh0PWM7aWYodGhpcy5pc1JlbGF0aXZlKCkpe3RoaXMudXBkYXRlKCk7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uQ29udGV4dH0pfX19O0MucHJvdG90eXBlLmdldExlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlMZW5ndGh9O0MucHJvdG90eXBlLl9nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hSW5kaWNlcy5sZW5ndGh9O0MucHJvdG90eXBlLnVwZGF0ZUluZGljZXM9ZnVuY3Rpb24oKXt0aGlzLmFJbmRpY2VzPVtdO2Zvcih2YXIgaT0wO2k8dGhpcy5vTGlzdC5sZW5ndGg7aSsrKXt0aGlzLmFJbmRpY2VzLnB1c2goaSl9fTtDLnByb3RvdHlwZS5zb3J0PWZ1bmN0aW9uKHMpe2lmKCFzKXt0aGlzLmFTb3J0ZXJzPW51bGw7dGhpcy51cGRhdGVJbmRpY2VzKCk7dGhpcy5hcHBseUZpbHRlcigpfWVsc2V7aWYocyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Tb3J0ZXIpe3M9W3NdfXRoaXMuYVNvcnRlcnM9czt0aGlzLmFwcGx5U29ydCgpfXRoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLlNvcnR9KTt0aGlzLl9maXJlU29ydCh7c29ydGVyOnN9KTtyZXR1cm4gdGhpc307Qy5wcm90b3R5cGUuYXBwbHlTb3J0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxzPVtdLGM9W10sdixTO2lmKCF0aGlzLmFTb3J0ZXJzfHx0aGlzLmFTb3J0ZXJzLmxlbmd0aD09MCl7cmV0dXJufWZvcih2YXIgaj0wO2o8dGhpcy5hU29ydGVycy5sZW5ndGg7aisrKXtTPXRoaXMuYVNvcnRlcnNbal07Y1tqXT1TLmZuQ29tcGFyZTtpZighY1tqXSl7Y1tqXT1mdW5jdGlvbihhLGIpe2lmKGI9PW51bGwpe3JldHVybi0xfWlmKGE9PW51bGwpe3JldHVybiAxfWlmKHR5cGVvZiBhPT0ic3RyaW5nIiYmdHlwZW9mIGI9PSJzdHJpbmciKXtyZXR1cm4gYS5sb2NhbGVDb21wYXJlKGIpfWlmKGE8Yil7cmV0dXJuLTF9aWYoYT5iKXtyZXR1cm4gMX1yZXR1cm4gMH19cS5lYWNoKHRoaXMuYUluZGljZXMsZnVuY3Rpb24oaSxJKXt2PXQub01vZGVsLmdldFByb3BlcnR5KFMuc1BhdGgsdC5vTGlzdFtJXSk7aWYodHlwZW9mIHY9PSJzdHJpbmciKXt2PXYudG9Mb2NhbGVVcHBlckNhc2UoKX1pZighc1tqXSl7c1tqXT1bXX1zW2pdW0ldPXZ9KX10aGlzLmFJbmRpY2VzLnNvcnQoZnVuY3Rpb24oYSxiKXt2YXIgZD1zWzBdW2FdLGU9c1swXVtiXTtyZXR1cm4gdC5fYXBwbHlTb3J0Q29tcGFyZShhLGIsZCxlLHMsYywwKX0pfTtDLnByb3RvdHlwZS5fYXBwbHlTb3J0Q29tcGFyZT1mdW5jdGlvbihhLGIsdixjLHMsZCxEKXt2YXIgUz10aGlzLmFTb3J0ZXJzW0RdLGY9ZFtEXSxyO3I9Zih2LGMpO2lmKFMuYkRlc2NlbmRpbmcpe3I9LXJ9aWYocj09MCYmdGhpcy5hU29ydGVyc1tEKzFdKXt2PXNbRCsxXVthXSxjPXNbRCsxXVtiXTtyPXRoaXMuX2FwcGx5U29ydENvbXBhcmUoYSxiLHYsYyxzLGQsRCsxKX1yZXR1cm4gcn07Qy5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKGYscyl7dGhpcy51cGRhdGVJbmRpY2VzKCk7aWYoZiBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5GaWx0ZXIpe2Y9W2ZdfWlmKHM9PUYuQXBwbGljYXRpb24pe3RoaXMuYUFwcGxpY2F0aW9uRmlsdGVycz1mfHxbXX1lbHNlIGlmKHM9PUYuQ29udHJvbCl7dGhpcy5hRmlsdGVycz1mfHxbXX1lbHNle3RoaXMuYUZpbHRlcnM9Znx8W107dGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzPVtdfWY9dGhpcy5hRmlsdGVycy5jb25jYXQodGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzKTtpZihmLmxlbmd0aD09MCl7dGhpcy5hRmlsdGVycz1bXTt0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnM9W107dGhpcy5pTGVuZ3RoPXRoaXMuX2dldExlbmd0aCgpfWVsc2V7dGhpcy5hcHBseUZpbHRlcigpfXRoaXMuYXBwbHlTb3J0KCk7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uRmlsdGVyfSk7aWYocz09Ri5BcHBsaWNhdGlvbil7dGhpcy5fZmlyZUZpbHRlcih7ZmlsdGVyczp0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnN9KX1lbHNle3RoaXMuX2ZpcmVGaWx0ZXIoe2ZpbHRlcnM6dGhpcy5hRmlsdGVyc30pfXJldHVybiB0aGlzfTtDLnByb3RvdHlwZS5ub3JtYWxpemVGaWx0ZXJWYWx1ZT1mdW5jdGlvbih2KXtpZih0eXBlb2Ygdj09InN0cmluZyIpe3JldHVybiB2LnRvVXBwZXJDYXNlKCl9aWYodiBpbnN0YW5jZW9mIERhdGUpe3JldHVybiB2LmdldFRpbWUoKX1yZXR1cm4gdn07Qy5wcm90b3R5cGUuYXBwbHlGaWx0ZXI9ZnVuY3Rpb24oKXtpZighdGhpcy5hRmlsdGVycyl7cmV0dXJufXZhciB0PXRoaXMsZj17fSxhLGI9W10sZz1mYWxzZSxjPXRydWUsZD10aGlzLmFGaWx0ZXJzLmNvbmNhdCh0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnMpO3EuZWFjaChkLGZ1bmN0aW9uKGosbyl7aWYoby5zUGF0aCE9PXVuZGVmaW5lZCl7YT1mW28uc1BhdGhdO2lmKCFhKXthPWZbby5zUGF0aF09W119fWVsc2V7YT1mWyJfX211bHRpRmlsdGVyIl07aWYoIWEpe2E9ZlsiX19tdWx0aUZpbHRlciJdPVtdfX1hLnB1c2gobyl9KTtxLmVhY2godGhpcy5hSW5kaWNlcyxmdW5jdGlvbihpLEkpe2M9dHJ1ZTtxLmVhY2goZixmdW5jdGlvbihwLGEpe2lmKHAhPT0iX19tdWx0aUZpbHRlciIpe3ZhciB2PXQub01vZGVsLmdldFByb3BlcnR5KHAsdC5vTGlzdFtJXSk7dj10Lm5vcm1hbGl6ZUZpbHRlclZhbHVlKHYpO2c9ZmFsc2U7cS5lYWNoKGEsZnVuY3Rpb24oaixvKXt2YXIgVD10LmdldEZpbHRlckZ1bmN0aW9uKG8pO2lmKHYhPXVuZGVmaW5lZCYmVCh2KSl7Zz10cnVlO3JldHVybiBmYWxzZX19KX1lbHNle2c9ZmFsc2U7cS5lYWNoKGEsZnVuY3Rpb24oaixvKXtnPXQuX3Jlc29sdmVNdWx0aUZpbHRlcihvLEkpO2lmKGcpe3JldHVybiBmYWxzZX19KX1pZighZyl7Yz1mYWxzZTtyZXR1cm4gZmFsc2V9fSk7aWYoYyl7Yi5wdXNoKEkpfX0pO3RoaXMuYUluZGljZXM9Yjt0aGlzLmlMZW5ndGg9Yi5sZW5ndGh9O0MucHJvdG90eXBlLl9yZXNvbHZlTXVsdGlGaWx0ZXI9ZnVuY3Rpb24obSxJKXt2YXIgdD10aGlzLE09ZmFsc2UsZj1tLmFGaWx0ZXJzO2lmKGYpe3EuZWFjaChmLGZ1bmN0aW9uKGksbyl7dmFyIGw9ZmFsc2U7aWYoby5fYk11bHRpRmlsdGVyKXtsPXQuX3Jlc29sdmVNdWx0aUZpbHRlcihvLEkpfWVsc2UgaWYoby5zUGF0aCE9PXVuZGVmaW5lZCl7dmFyIHY9dC5vTW9kZWwuZ2V0UHJvcGVydHkoby5zUGF0aCx0Lm9MaXN0W0ldKTt2PXQubm9ybWFsaXplRmlsdGVyVmFsdWUodik7dmFyIFQ9dC5nZXRGaWx0ZXJGdW5jdGlvbihvKTtpZih2IT11bmRlZmluZWQmJlQodikpe2w9dHJ1ZX19aWYobCYmbS5iQW5kKXtNPXRydWV9ZWxzZSBpZighbCYmbS5iQW5kKXtNPWZhbHNlO3JldHVybiBmYWxzZX1lbHNlIGlmKGwpe009dHJ1ZTtyZXR1cm4gZmFsc2V9fSl9cmV0dXJuIE19O0MucHJvdG90eXBlLmdldEZpbHRlckZ1bmN0aW9uPWZ1bmN0aW9uKGYpe2lmKGYuZm5UZXN0KXtyZXR1cm4gZi5mblRlc3R9dmFyIHY9dGhpcy5ub3JtYWxpemVGaWx0ZXJWYWx1ZShmLm9WYWx1ZTEpLFY9dGhpcy5ub3JtYWxpemVGaWx0ZXJWYWx1ZShmLm9WYWx1ZTIpO3N3aXRjaChmLnNPcGVyYXRvcil7Y2FzZSJFUSI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PXZ9O2JyZWFrO2Nhc2UiTkUiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhIT12fTticmVhaztjYXNlIkxUIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYTx2fTticmVhaztjYXNlIkxFIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYTw9dn07YnJlYWs7Y2FzZSJHVCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE+dn07YnJlYWs7Y2FzZSJHRSI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE+PXZ9O2JyZWFrO2Nhc2UiQlQiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybihhPj12KSYmKGE8PVYpfTticmVhaztjYXNlIkNvbnRhaW5zIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtpZih0eXBlb2YgYSE9InN0cmluZyIpe3Rocm93IG5ldyBFcnJvcigiT25seSBcIlN0cmluZ1wiIHZhbHVlcyBhcmUgc3VwcG9ydGVkIGZvciB0aGUgRmlsdGVyT3BlcmF0b3I6IFwiQ29udGFpbnNcIi4iKX1yZXR1cm4gYS5pbmRleE9mKHYpIT0tMX07YnJlYWs7Y2FzZSJTdGFydHNXaXRoIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtpZih0eXBlb2YgYSE9InN0cmluZyIpe3Rocm93IG5ldyBFcnJvcigiT25seSBcIlN0cmluZ1wiIHZhbHVlcyBhcmUgc3VwcG9ydGVkIGZvciB0aGUgRmlsdGVyT3BlcmF0b3I6IFwiU3RhcnRzV2l0aFwiLiIpfXJldHVybiBhLmluZGV4T2Yodik9PTB9O2JyZWFrO2Nhc2UiRW5kc1dpdGgiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhIT0ic3RyaW5nIil7dGhyb3cgbmV3IEVycm9yKCJPbmx5IFwiU3RyaW5nXCIgdmFsdWVzIGFyZSBzdXBwb3J0ZWQgZm9yIHRoZSBGaWx0ZXJPcGVyYXRvcjogXCJFbmRzV2l0aFwiLiIpfXZhciBwPWEubGFzdEluZGV4T2Yodik7aWYocD09LTEpe3JldHVybiBmYWxzZX1yZXR1cm4gcD09YS5sZW5ndGgtbmV3IFN0cmluZyhmLm9WYWx1ZTEpLmxlbmd0aH07YnJlYWs7ZGVmYXVsdDpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGYuZm5UZXN0fTtDLnByb3RvdHlwZS5nZXREaXN0aW5jdFZhbHVlcz1mdW5jdGlvbihwKXt2YXIgcj1bXSxtPXt9LHYsdD10aGlzO3EuZWFjaCh0aGlzLm9MaXN0LGZ1bmN0aW9uKGksYyl7dj10Lm9Nb2RlbC5nZXRQcm9wZXJ0eShwLGMpO2lmKCFtW3ZdKXttW3ZdPXRydWU7ci5wdXNoKHYpfX0pO3JldHVybiByfTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5DbGllbnRUcmVlQmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5DbGllbnRUcmVlQmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9DbGllbnRUcmVlQmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vVHJlZUJpbmRpbmcnXSxmdW5jdGlvbihxLFQpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz1ULmV4dGVuZCgic2FwLnVpLm1vZGVsLkNsaWVudFRyZWVCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsZixQKXtULmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZighdGhpcy5vQ29udGV4dCl7dGhpcy5vQ29udGV4dD0iIn10aGlzLmZpbHRlckluZm89e307dGhpcy5maWx0ZXJJbmZvLmFGaWx0ZXJlZENvbnRleHRzPVtdO3RoaXMuZmlsdGVySW5mby5vUGFyZW50Q29udGV4dD17fTtpZih0aGlzLmFGaWx0ZXJzKXtpZih0aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCkpe3RoaXMuZmlsdGVyKGYpfX19fSk7Qy5wcm90b3R5cGUuZ2V0Um9vdENvbnRleHRzPWZ1bmN0aW9uKCl7aWYoIXRoaXMub01vZGVsLmlzTGlzdCh0aGlzLnNQYXRoKSl7dmFyIGM9dGhpcy5vTW9kZWwuZ2V0Q29udGV4dCh0aGlzLnNQYXRoKTtpZih0aGlzLmJEaXNwbGF5Um9vdE5vZGUpe3JldHVybltjXX1lbHNle3JldHVybiB0aGlzLmdldE5vZGVDb250ZXh0cyhjKX19ZWxzZXt2YXIgYT1bXSx0PXRoaXM7cS5lYWNoKHRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCksZnVuY3Rpb24oaSxvKXt0Ll9zYXZlU3ViQ29udGV4dChvLGEsdC5zUGF0aCsocS5zYXAuZW5kc1dpdGgodC5zUGF0aCwiLyIpPyIiOiIvIiksaSl9KTtyZXR1cm4gYX19O0MucHJvdG90eXBlLmdldE5vZGVDb250ZXh0cz1mdW5jdGlvbihjKXt2YXIgcz1jLmdldFBhdGgoKTtpZighcS5zYXAuZW5kc1dpdGgocywiLyIpKXtzPXMrIi8ifWlmKCFxLnNhcC5zdGFydHNXaXRoKHMsIi8iKSl7cz0iLyIrc312YXIgYT1bXSx0PXRoaXMsbj10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHMpLG8sQT10aGlzLm1QYXJhbWV0ZXJzJiZ0aGlzLm1QYXJhbWV0ZXJzLmFycmF5TmFtZXMsYjtpZihBJiZxLmlzQXJyYXkoQSkpe3EuZWFjaChBLGZ1bmN0aW9uKGksZCl7Yj1uW2RdO2lmKGIpe3EuZWFjaChiLGZ1bmN0aW9uKFMsZSl7dC5fc2F2ZVN1YkNvbnRleHQoZSxhLHMsZCsiLyIrUyl9KX19KX1lbHNle2lmKG4pe3Euc2FwLmVhY2gobixmdW5jdGlvbihOLG8pe2lmKHEuaXNBcnJheShvKSl7cS5lYWNoKG8sZnVuY3Rpb24oUyxkKXt0Ll9zYXZlU3ViQ29udGV4dChkLGEscyxOKyIvIitTKX0pfWVsc2UgaWYodHlwZW9mIG89PSJvYmplY3QiKXt0Ll9zYXZlU3ViQ29udGV4dChvLGEscyxOKX19KX19cmV0dXJuIGF9O0MucHJvdG90eXBlLmhhc0NoaWxkcmVuPWZ1bmN0aW9uKGMpe3JldHVybiBjP3RoaXMuZ2V0Tm9kZUNvbnRleHRzKGMpLmxlbmd0aD4wOmZhbHNlfTtDLnByb3RvdHlwZS5fc2F2ZVN1YkNvbnRleHQ9ZnVuY3Rpb24obixjLHMsTil7aWYodHlwZW9mIG49PSJvYmplY3QiKXt2YXIgbz10aGlzLm9Nb2RlbC5nZXRDb250ZXh0KHMrTik7aWYodGhpcy5hRmlsdGVycyYmIXRoaXMuYklzRmlsdGVyaW5nKXtpZihxLmluQXJyYXkobyx0aGlzLmZpbHRlckluZm8uYUZpbHRlcmVkQ29udGV4dHMpIT0tMSl7Yy5wdXNoKG8pfX1lbHNle2MucHVzaChvKX19fTtDLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZil7dGhpcy5maWx0ZXJJbmZvLmFGaWx0ZXJlZENvbnRleHRzPVtdO3RoaXMuZmlsdGVySW5mby5vUGFyZW50Q29udGV4dD17fTtpZighZnx8IXEuaXNBcnJheShmKXx8Zi5sZW5ndGg9PTApe3RoaXMuYUZpbHRlcnM9bnVsbH1lbHNle3RoaXMuYUZpbHRlcnM9Zjt2YXIgYz1uZXcgc2FwLnVpLm1vZGVsLkNvbnRleHQodGhpcy5vTW9kZWwsdGhpcy5zUGF0aCk7dGhpcy5maWx0ZXJSZWN1cnNpdmUoYyl9dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOiJmaWx0ZXIifSk7dGhpcy5fZmlyZUZpbHRlcih7ZmlsdGVyczpmfSl9O0MucHJvdG90eXBlLmZpbHRlclJlY3Vyc2l2ZT1mdW5jdGlvbihwKXt0aGlzLmJJc0ZpbHRlcmluZz10cnVlO3ZhciBjPXRoaXMuZ2V0Tm9kZUNvbnRleHRzKHApO3RoaXMuYklzRmlsdGVyaW5nPWZhbHNlO2lmKGMubGVuZ3RoPjApe3ZhciB0PXRoaXM7cS5lYWNoKGMsZnVuY3Rpb24oaSxvKXt0LmZpbHRlclJlY3Vyc2l2ZShvKX0pO3RoaXMuYXBwbHlGaWx0ZXIocCl9fTtDLnByb3RvdHlwZS5hcHBseUZpbHRlcj1mdW5jdGlvbihwKXtpZighdGhpcy5hRmlsdGVycyl7cmV0dXJufXZhciB0PXRoaXMsZj17fSxGLGE9W10sZz1mYWxzZSxiPXRydWU7dGhpcy5iSXNGaWx0ZXJpbmc9dHJ1ZTt2YXIgdT10aGlzLmdldE5vZGVDb250ZXh0cyhwKTt0aGlzLmJJc0ZpbHRlcmluZz1mYWxzZTtxLmVhY2godC5hRmlsdGVycyxmdW5jdGlvbihqLG8pe2lmKG8uc1BhdGgpe0Y9ZltvLnNQYXRoXTtpZighRil7Rj1mW28uc1BhdGhdPVtdfX1lbHNle0Y9ZlsiX19tdWx0aUZpbHRlciJdO2lmKCFGKXtGPWZbIl9fbXVsdGlGaWx0ZXIiXT1bXX19Ri5wdXNoKG8pfSk7cS5lYWNoKHUsZnVuY3Rpb24oaSxVKXtiPXRydWU7cS5lYWNoKGYsZnVuY3Rpb24oUCxGKXtpZihQIT09Il9fbXVsdGlGaWx0ZXIiKXt2YXIgdj10Lm9Nb2RlbC5fZ2V0T2JqZWN0KFAsVSk7aWYodHlwZW9mIHY9PSJzdHJpbmciKXt2PXYudG9VcHBlckNhc2UoKX1nPWZhbHNlO3EuZWFjaChGLGZ1bmN0aW9uKGosbyl7dmFyIGM9dC5nZXRGaWx0ZXJGdW5jdGlvbihvKTtpZih2IT11bmRlZmluZWQmJmModikpe2c9dHJ1ZTtyZXR1cm4gZmFsc2V9fSl9ZWxzZXtnPWZhbHNlO3EuZWFjaChGLGZ1bmN0aW9uKGosbyl7Zz10Ll9yZXNvbHZlTXVsdGlGaWx0ZXIobyxVKTtpZihnKXtyZXR1cm4gZmFsc2V9fSl9aWYoIWcpe2I9ZmFsc2U7cmV0dXJuIGZhbHNlfX0pO2lmKGIpe2EucHVzaChVKX19KTtpZihhLmxlbmd0aD4wKXtxLm1lcmdlKHRoaXMuZmlsdGVySW5mby5hRmlsdGVyZWRDb250ZXh0cyxhKTt0aGlzLmZpbHRlckluZm8uYUZpbHRlcmVkQ29udGV4dHMucHVzaChwKTt0aGlzLmZpbHRlckluZm8ub1BhcmVudENvbnRleHQ9cH1pZihxLmluQXJyYXkodGhpcy5maWx0ZXJJbmZvLm9QYXJlbnRDb250ZXh0LHUpIT0tMSl7dGhpcy5maWx0ZXJJbmZvLmFGaWx0ZXJlZENvbnRleHRzLnB1c2gocCk7dGhpcy5maWx0ZXJJbmZvLm9QYXJlbnRDb250ZXh0PXB9fTtDLnByb3RvdHlwZS5fcmVzb2x2ZU11bHRpRmlsdGVyPWZ1bmN0aW9uKG0sdSl7dmFyIHQ9dGhpcyxNPWZhbHNlLGY9bS5hRmlsdGVycztpZihmKXtxLmVhY2goZixmdW5jdGlvbihpLEYpe3ZhciBsPWZhbHNlO2lmKEYuX2JNdWx0aUZpbHRlcil7bD10Ll9yZXNvbHZlTXVsdGlGaWx0ZXIoRix1KX1lbHNlIGlmKEYuc1BhdGgpe3ZhciB2PXQub01vZGVsLmdldFByb3BlcnR5KEYuc1BhdGgsdSk7aWYodHlwZW9mIHY9PSJzdHJpbmciKXt2PXYudG9VcHBlckNhc2UoKX12YXIgYT10LmdldEZpbHRlckZ1bmN0aW9uKEYpO2lmKHYhPXVuZGVmaW5lZCYmYSh2KSl7bD10cnVlfX1pZihsJiZtLmJBbmQpe009dHJ1ZX1lbHNlIGlmKCFsJiZtLmJBbmQpe009ZmFsc2U7cmV0dXJuIGZhbHNlfWVsc2UgaWYobCl7TT10cnVlO3JldHVybiBmYWxzZX19KX1yZXR1cm4gTX07Qy5wcm90b3R5cGUuZ2V0RmlsdGVyRnVuY3Rpb249ZnVuY3Rpb24oZil7aWYoZi5mblRlc3Qpe3JldHVybiBmLmZuVGVzdH12YXIgdj1mLm9WYWx1ZTEsVj1mLm9WYWx1ZTI7aWYodHlwZW9mIHY9PSJzdHJpbmciKXt2PXYudG9VcHBlckNhc2UoKX1pZih0eXBlb2YgVj09InN0cmluZyIpe1Y9Vi50b1VwcGVyQ2FzZSgpfXN3aXRjaChmLnNPcGVyYXRvcil7Y2FzZSJFUSI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PXZ9O2JyZWFrO2Nhc2UiTkUiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhIT12fTticmVhaztjYXNlIkxUIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYTx2fTticmVhaztjYXNlIkxFIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYTw9dn07YnJlYWs7Y2FzZSJHVCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE+dn07YnJlYWs7Y2FzZSJHRSI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE+PXZ9O2JyZWFrO2Nhc2UiQlQiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybihhPnYpJiYoYTxWKX07YnJlYWs7Y2FzZSJDb250YWlucyI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5kZXhPZih2KSE9LTF9O2JyZWFrO2Nhc2UiU3RhcnRzV2l0aCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5kZXhPZih2KT09MH07YnJlYWs7Y2FzZSJFbmRzV2l0aCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5kZXhPZih2KT09YS5sZW5ndGgtbmV3IFN0cmluZyhmLm9WYWx1ZTEpLmxlbmd0aH07YnJlYWs7ZGVmYXVsdDpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGYuZm5UZXN0fTtDLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXt0aGlzLl9maXJlQ2hhbmdlKCl9O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLlByb3BlcnR5QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5Qcm9wZXJ0eUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvUHJvcGVydHlCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9CaW5kaW5nJywnLi9TaW1wbGVUeXBlJ10sZnVuY3Rpb24ocSxCLFMpeyJ1c2Ugc3RyaWN0Ijt2YXIgUD1CLmV4dGVuZCgic2FwLnVpLm1vZGVsLlByb3BlcnR5QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLGEpe0IuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxtZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJnZXRWYWx1ZSIsInNldFZhbHVlIiwic2V0VHlwZSIsImdldFR5cGUiLCJzZXRGb3JtYXR0ZXIiLCJnZXRGb3JtYXR0ZXIiLCJnZXRFeHRlcm5hbFZhbHVlIiwic2V0RXh0ZXJuYWxWYWx1ZSIsImdldEJpbmRpbmdNb2RlIl19fSk7UC5wcm90b3R5cGUuZ2V0RXh0ZXJuYWxWYWx1ZT1mdW5jdGlvbigpe3ZhciB2PXRoaXMuZ2V0VmFsdWUoKTtpZih0aGlzLm9UeXBlKXt2PXRoaXMub1R5cGUuZm9ybWF0VmFsdWUodix0aGlzLnNJbnRlcm5hbFR5cGUpfWlmKHRoaXMuZm5Gb3JtYXR0ZXIpe3Y9dGhpcy5mbkZvcm1hdHRlcih2KX1yZXR1cm4gdn07UC5wcm90b3R5cGUuc2V0RXh0ZXJuYWxWYWx1ZT1mdW5jdGlvbih2KXtpZih0aGlzLmZuRm9ybWF0dGVyKXtyZXR1cm59aWYodGhpcy5vVHlwZSl7dj10aGlzLm9UeXBlLnBhcnNlVmFsdWUodix0aGlzLnNJbnRlcm5hbFR5cGUpO3RoaXMub1R5cGUudmFsaWRhdGVWYWx1ZSh2KX10aGlzLnNldFZhbHVlKHYpfTtQLnByb3RvdHlwZS5zZXRUeXBlPWZ1bmN0aW9uKHQsaSl7dGhpcy5vVHlwZT10O3RoaXMuc0ludGVybmFsVHlwZT1pfTtQLnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1R5cGV9O1AucHJvdG90eXBlLnNldEZvcm1hdHRlcj1mdW5jdGlvbihmKXt0aGlzLmZuRm9ybWF0dGVyPWZ9O1AucHJvdG90eXBlLmdldEZvcm1hdHRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZuRm9ybWF0dGVyfTtQLnByb3RvdHlwZS5nZXRCaW5kaW5nTW9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNNb2RlfTtQLnByb3RvdHlwZS5zZXRCaW5kaW5nTW9kZT1mdW5jdGlvbihiKXt0aGlzLnNNb2RlPWJ9O3JldHVybiBQfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmNvbnRyb2wuQ29udHJvbFByb3BlcnR5QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5jb250cm9sLkNvbnRyb2xQcm9wZXJ0eUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvY29udHJvbC9Db250cm9sUHJvcGVydHlCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL1Byb3BlcnR5QmluZGluZyddLGZ1bmN0aW9uKHEsUCl7InVzZSBzdHJpY3QiO3ZhciBDPVAuZXh0ZW5kKCJzYXAudWkubW9kZWwuY29udHJvbC5Db250cm9sUHJvcGVydHlCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMpe1AuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMub1ZhbHVlPXRoaXMuX2dldFZhbHVlKCl9fSk7Qy5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vVmFsdWV9O0MucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHYpe3RoaXMub1ZhbHVlPXY7dGhpcy5vQ29udGV4dC5zZXRQcm9wZXJ0eSh0aGlzLnNQYXRoLHYpfTtDLnByb3RvdHlwZS5fZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQ29udGV4dC5nZXRQcm9wZXJ0eSh0aGlzLnNQYXRoKX07Qy5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXt0aGlzLm9Db250ZXh0PWM7dGhpcy5jaGVja1VwZGF0ZSgpfTtDLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbigpe3ZhciB2PXRoaXMuX2dldFZhbHVlKCk7aWYodiE9PXRoaXMub1ZhbHVlKXt0aGlzLm9WYWx1ZT12O3RoaXMuX2ZpcmVDaGFuZ2UoKX19O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmpzb24uSlNPTkxpc3RCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLmpzb24uSlNPTkxpc3RCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2pzb24vSlNPTkxpc3RCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL0NoYW5nZVJlYXNvbicsJ3NhcC91aS9tb2RlbC9DbGllbnRMaXN0QmluZGluZyddLGZ1bmN0aW9uKHEsQyxhKXsidXNlIHN0cmljdCI7dmFyIEo9YS5leHRlbmQoInNhcC51aS5tb2RlbC5qc29uLkpTT05MaXN0QmluZGluZyIpO0oucHJvdG90eXBlLmdldENvbnRleHRzPWZ1bmN0aW9uKHMsbCl7dGhpcy5pTGFzdFN0YXJ0SW5kZXg9czt0aGlzLmlMYXN0TGVuZ3RoPWw7aWYoIXMpe3M9MH1pZighbCl7bD1NYXRoLm1pbih0aGlzLmlMZW5ndGgsdGhpcy5vTW9kZWwuaVNpemVMaW1pdCl9dmFyIGM9dGhpcy5fZ2V0Q29udGV4dHMocyxsKSxvPXt9O2lmKHRoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uKXtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKyl7b1tjW2ldLmdldFBhdGgoKV09Y1tpXS5nZXRPYmplY3QoKX1pZih0aGlzLmFMYXN0Q29udGV4dHMmJnM8dGhpcy5pTGFzdEVuZEluZGV4KXt2YXIgdD10aGlzO3ZhciBkPXEuc2FwLmFycmF5RGlmZih0aGlzLmFMYXN0Q29udGV4dHMsYyxmdW5jdGlvbihPLG4pe3JldHVybiBxLnNhcC5lcXVhbChPJiZ0Lm9MYXN0Q29udGV4dERhdGEmJnQub0xhc3RDb250ZXh0RGF0YVtPLmdldFBhdGgoKV0sbiYmbyYmb1tuLmdldFBhdGgoKV0pfSk7Yy5kaWZmPWR9dGhpcy5pTGFzdEVuZEluZGV4PXMrbDt0aGlzLmFMYXN0Q29udGV4dHM9Yy5zbGljZSgwKTt0aGlzLm9MYXN0Q29udGV4dERhdGE9cS5leHRlbmQodHJ1ZSx7fSxvKX1yZXR1cm4gY307Si5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKGwmJnEuaXNBcnJheShsKSl7aWYodGhpcy5iVXNlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb24pe3RoaXMub0xpc3Q9cS5leHRlbmQodHJ1ZSxbXSxsKX1lbHNle3RoaXMub0xpc3Q9bC5zbGljZSgwKX10aGlzLnVwZGF0ZUluZGljZXMoKTt0aGlzLmFwcGx5RmlsdGVyKCk7dGhpcy5hcHBseVNvcnQoKTt0aGlzLmlMZW5ndGg9dGhpcy5fZ2V0TGVuZ3RoKCl9ZWxzZXt0aGlzLm9MaXN0PVtdO3RoaXMuYUluZGljZXM9W107dGhpcy5pTGVuZ3RoPTB9fTtKLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXtpZighdGhpcy5iVXNlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb24pe3ZhciBsPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtpZighcS5zYXAuZXF1YWwodGhpcy5vTGlzdCxsKXx8Zil7dGhpcy51cGRhdGUoKTt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246Qy5DaGFuZ2V9KX19ZWxzZXt2YXIgYz1mYWxzZTt2YXIgdD10aGlzO3ZhciBsPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtpZighcS5zYXAuZXF1YWwodGhpcy5vTGlzdCxsKSl7dGhpcy51cGRhdGUoKX12YXIgYj10aGlzLl9nZXRDb250ZXh0cyh0aGlzLmlMYXN0U3RhcnRJbmRleCx0aGlzLmlMYXN0TGVuZ3RoKTtpZih0aGlzLmFMYXN0Q29udGV4dHMpe2lmKHRoaXMuYUxhc3RDb250ZXh0cy5sZW5ndGghPWIubGVuZ3RoKXtjPXRydWV9ZWxzZXtxLmVhY2godGhpcy5hTGFzdENvbnRleHRzLGZ1bmN0aW9uKGksbyl7aWYoIXEuc2FwLmVxdWFsKGJbaV0uZ2V0T2JqZWN0KCksdC5vTGFzdENvbnRleHREYXRhW28uZ2V0UGF0aCgpXSkpe2M9dHJ1ZTtyZXR1cm4gZmFsc2V9fSl9fWVsc2V7Yz10cnVlfWlmKGN8fGYpe3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpDLkNoYW5nZX0pfX19O3JldHVybiBKfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmpzb24uSlNPTlRyZWVCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLmpzb24uSlNPTlRyZWVCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2pzb24vSlNPTlRyZWVCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL0NsaWVudFRyZWVCaW5kaW5nJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIEo9Qy5leHRlbmQoInNhcC51aS5tb2RlbC5qc29uLkpTT05UcmVlQmluZGluZyIpO0oucHJvdG90eXBlLmdldE5vZGVDb250ZXh0cz1mdW5jdGlvbihjKXt2YXIgcz1jLmdldFBhdGgoKTtpZighcS5zYXAuZW5kc1dpdGgocywiLyIpKXtzPXMrIi8ifWlmKCFxLnNhcC5zdGFydHNXaXRoKHMsIi8iKSl7cz0iLyIrc312YXIgYT1bXSx0PXRoaXMsbj10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHMpLG8sQT10aGlzLm1QYXJhbWV0ZXJzJiZ0aGlzLm1QYXJhbWV0ZXJzLmFycmF5TmFtZXMsYjtpZihuKXtpZihBJiZxLmlzQXJyYXkoQSkpe3EuZWFjaChBLGZ1bmN0aW9uKGksZCl7Yj1uW2RdO2lmKGIpe3EuZWFjaChiLGZ1bmN0aW9uKFMsZSl7dC5fc2F2ZVN1YkNvbnRleHQoZSxhLHMsZCsiLyIrUyl9KX19KX1lbHNle3Euc2FwLmVhY2gobixmdW5jdGlvbihOLG8pe2lmKHEuaXNBcnJheShvKSl7cS5lYWNoKG8sZnVuY3Rpb24oUyxkKXt0Ll9zYXZlU3ViQ29udGV4dChkLGEscyxOKyIvIitTKX0pfWVsc2UgaWYobyYmdHlwZW9mIG89PSJvYmplY3QiKXt0Ll9zYXZlU3ViQ29udGV4dChvLGEscyxOKX19KX19cmV0dXJuIGF9O0oucHJvdG90eXBlLl9zYXZlU3ViQ29udGV4dD1mdW5jdGlvbihuLGMscyxOKXtpZih0eXBlb2Ygbj09Im9iamVjdCIpe3ZhciBvPXRoaXMub01vZGVsLmdldENvbnRleHQocytOKTtpZih0aGlzLmFGaWx0ZXJzJiYhdGhpcy5iSXNGaWx0ZXJpbmcpe2lmKHEuaW5BcnJheShvLHRoaXMuZmlsdGVySW5mby5hRmlsdGVyZWRDb250ZXh0cykhPS0xKXtjLnB1c2gobyl9fWVsc2V7Yy5wdXNoKG8pfX19O3JldHVybiBKfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTGlzdEJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFMaXN0QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9PRGF0YUxpc3RCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvZm9ybWF0L0RhdGVGb3JtYXQnLCdzYXAvdWkvbW9kZWwvRmlsdGVyVHlwZScsJ3NhcC91aS9tb2RlbC9MaXN0QmluZGluZycsJy4vT0RhdGFVdGlscycsJy4vQ291bnRNb2RlJywnLi9GaWx0ZXInXSxmdW5jdGlvbihxLEQsRixMLE8sQyxhKXsidXNlIHN0cmljdCI7dmFyIGI9TC5leHRlbmQoInNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUxpc3RCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMscyxmLFApe0wuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc0ZpbHRlclBhcmFtcz1udWxsO3RoaXMuc1NvcnRQYXJhbXM9bnVsbDt0aGlzLnNSYW5nZVBhcmFtcz1udWxsO3RoaXMuc0N1c3RvbVBhcmFtcz10aGlzLm9Nb2RlbC5jcmVhdGVDdXN0b21QYXJhbXModGhpcy5tUGFyYW1ldGVycyk7dGhpcy5pU3RhcnRJbmRleD0wO3RoaXMuYlBlbmRpbmdDaGFuZ2U9ZmFsc2U7dGhpcy5hS2V5cz1bXTt0aGlzLmJJbml0aWFsPXRydWU7dGhpcy5zQ291bnRNb2RlPShQJiZQLmNvdW50TW9kZSl8fHRoaXMub01vZGVsLnNEZWZhdWx0Q291bnRNb2RlO3RoaXMuYlJlZnJlc2g9ZmFsc2U7dGhpcy5iTmVlZHNVcGRhdGU9ZmFsc2U7dGhpcy5iRGF0YUF2YWlsYWJsZT1mYWxzZTtpZighdGhpcy5vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkpe3ZhciB0PXRoaXMsZD1mdW5jdGlvbihlKXt0LmJJbml0aWFsPWZhbHNlO3QuX2luaXRTb3J0ZXJzRmlsdGVycygpO3Qub01vZGVsLmRldGFjaE1ldGFkYXRhTG9hZGVkKGQpfTt0aGlzLm9Nb2RlbC5hdHRhY2hNZXRhZGF0YUxvYWRlZCh0aGlzLGQpfWVsc2V7dGhpcy5iSW5pdGlhbD1mYWxzZTt0aGlzLl9pbml0U29ydGVyc0ZpbHRlcnMoKX12YXIgcj10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7dGhpcy5hRXhwYW5kUmVmcz1yO2lmKHEuaXNBcnJheShyKSYmIXMmJiFmKXt0aGlzLmFLZXlzPXI7dGhpcy5pTGVuZ3RoPXIubGVuZ3RoO3RoaXMuYkxlbmd0aEZpbmFsPXRydWU7dGhpcy5iRGF0YUF2YWlsYWJsZT10cnVlfWVsc2V7aWYodGhpcy5vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkpe3RoaXMucmVzZXREYXRhKCl9fX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJnZXRMZW5ndGgiXX19KTtiLnByb3RvdHlwZS5nZXRDb250ZXh0cz1mdW5jdGlvbihzLGwsdCl7aWYodGhpcy5iSW5pdGlhbCl7cmV0dXJuW119dGhpcy5pTGFzdExlbmd0aD1sO3RoaXMuaUxhc3RTdGFydEluZGV4PXM7dGhpcy5pTGFzdFRocmVzaG9sZD10O2lmKCFzKXtzPTB9aWYoIWwpe2w9dGhpcy5vTW9kZWwuaVNpemVMaW1pdDtpZih0aGlzLmJMZW5ndGhGaW5hbCYmdGhpcy5pTGVuZ3RoPGwpe2w9dGhpcy5pTGVuZ3RofX1pZighdCl7dD0wfXZhciBjPXRydWUsZD10aGlzLl9nZXRDb250ZXh0cyhzLGwpLG89e30sUztTPXRoaXMuY2FsY3VsYXRlU2VjdGlvbihzLGwsdCxkKTtjPWQubGVuZ3RoIT1sJiYhKHRoaXMuYkxlbmd0aEZpbmFsJiZkLmxlbmd0aD49dGhpcy5pTGVuZ3RoLXMpO2lmKHRoaXMub01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpKXtpZighdGhpcy5iUGVuZGluZ1JlcXVlc3QmJlMubGVuZ3RoPjAmJihjfHxsPFMubGVuZ3RoKSl7dGhpcy5sb2FkRGF0YShTLnN0YXJ0SW5kZXgsUy5sZW5ndGgpO2QuZGF0YVJlcXVlc3RlZD10cnVlfX1pZih0aGlzLmJSZWZyZXNoKXtpZih0aGlzLmJMZW5ndGhGaW5hbCYmdGhpcy5pTGVuZ3RoPT0wKXt0aGlzLmxvYWREYXRhKFMuc3RhcnRJbmRleCxTLmxlbmd0aCx0cnVlKTtkLmRhdGFSZXF1ZXN0ZWQ9dHJ1ZX10aGlzLmJSZWZyZXNoPWZhbHNlfWVsc2V7Zm9yKHZhciBpPTA7aTxkLmxlbmd0aDtpKyspe29bZFtpXS5nZXRQYXRoKCldPWRbaV0uZ2V0T2JqZWN0KCl9aWYodGhpcy5iVXNlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb24pe2lmKHRoaXMuYUxhc3RDb250ZXh0cyYmczx0aGlzLmlMYXN0RW5kSW5kZXgpe3ZhciBlPXRoaXM7dmFyIGY9cS5zYXAuYXJyYXlEaWZmKHRoaXMuYUxhc3RDb250ZXh0cyxkLGZ1bmN0aW9uKGcsbil7cmV0dXJuIHEuc2FwLmVxdWFsKGcmJmUub0xhc3RDb250ZXh0RGF0YSYmZS5vTGFzdENvbnRleHREYXRhW2cuZ2V0UGF0aCgpXSxuJiZvJiZvW24uZ2V0UGF0aCgpXSl9KTtkLmRpZmY9Zn19dGhpcy5pTGFzdEVuZEluZGV4PXMrbDt0aGlzLmFMYXN0Q29udGV4dHM9ZC5zbGljZSgwKTt0aGlzLm9MYXN0Q29udGV4dERhdGE9cS5leHRlbmQodHJ1ZSx7fSxvKX1yZXR1cm4gZH07Yi5wcm90b3R5cGUuX2dldENvbnRleHRzPWZ1bmN0aW9uKHMsbCl7dmFyIGM9W10sbyxrO2lmKCFzKXtzPTB9aWYoIWwpe2w9dGhpcy5vTW9kZWwuaVNpemVMaW1pdDtpZih0aGlzLmJMZW5ndGhGaW5hbCYmdGhpcy5pTGVuZ3RoPGwpe2w9dGhpcy5pTGVuZ3RofX1mb3IodmFyIGk9cztpPHMrbDtpKyspe2s9dGhpcy5hS2V5c1tpXTtpZighayl7YnJlYWt9bz10aGlzLm9Nb2RlbC5nZXRDb250ZXh0KCcvJytrKTtjLnB1c2gobyl9cmV0dXJuIGN9O2IucHJvdG90eXBlLmNhbGN1bGF0ZVNlY3Rpb249ZnVuY3Rpb24ocyxsLHQsYyl7dmFyIGQ9ZmFsc2UsUyxlLHAsUCxyLG89e30saztlPXM7Uz0wO2Zvcih2YXIgaT1zO2k+PU1hdGgubWF4KHMtdCwwKTtpLS0pe2s9dGhpcy5hS2V5c1tpXTtpZighayl7UD1pKzE7YnJlYWt9fWZvcih2YXIgaj1zK2w7ajxzK2wrdDtqKyspe2s9dGhpcy5hS2V5c1tqXTtpZighayl7cD1qO2JyZWFrfX1yPXMtUDtpZihQJiZzPnQmJnI8dCl7aWYoYy5sZW5ndGghPWwpe2U9cy10fWVsc2V7ZT1QLXR9Uz10fWlmKGU9PXMpe2UrPWMubGVuZ3RofWlmKGMubGVuZ3RoIT1sKXtTKz1sLWMubGVuZ3RofXI9cC1zLWw7aWYocj09MCl7Uys9dH1pZihwJiZyPHQmJnI+MCl7aWYoZT5zKXtlPXA7Uys9dH19aWYodGhpcy5iTGVuZ3RoRmluYWwmJnRoaXMuaUxlbmd0aDwoUytlKSl7Uz10aGlzLmlMZW5ndGgtZX1vLnN0YXJ0SW5kZXg9ZTtvLmxlbmd0aD1TO3JldHVybiBvfTtiLnByb3RvdHlwZS5zZXRDb250ZXh0PWZ1bmN0aW9uKGMpe2lmKHRoaXMub0NvbnRleHQhPWMpe3RoaXMub0NvbnRleHQ9YztpZih0aGlzLmlzUmVsYXRpdmUoKSl7dGhpcy5faW5pdFNvcnRlcnNGaWx0ZXJzKCk7aWYoIXRoaXMuYkluaXRpYWwpe3ZhciByPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTt0aGlzLmFFeHBhbmRSZWZzPXI7aWYocS5pc0FycmF5KHIpJiYhdGhpcy5hU29ydGVycy5sZW5ndGg+MCYmIXRoaXMuYUZpbHRlcnMubGVuZ3RoPjApe3RoaXMuYUtleXM9cjt0aGlzLmlMZW5ndGg9ci5sZW5ndGg7dGhpcy5iTGVuZ3RoRmluYWw9dHJ1ZTt0aGlzLl9maXJlQ2hhbmdlKCl9ZWxzZXt0aGlzLnJlZnJlc2goKX19fX19O2IucHJvdG90eXBlLmxvYWREYXRhPWZ1bmN0aW9uKHMsbCxwKXt2YXIgdD10aGlzLEk9ZmFsc2U7aWYoc3x8bCl7dGhpcy5zUmFuZ2VQYXJhbXM9IiRza2lwPSIrcysiJiR0b3A9IitsO3RoaXMuaVN0YXJ0SW5kZXg9c31lbHNle3M9dGhpcy5pU3RhcnRJbmRleH12YXIgUD1bXTtpZih0aGlzLnNSYW5nZVBhcmFtcyl7UC5wdXNoKHRoaXMuc1JhbmdlUGFyYW1zKX1pZih0aGlzLnNTb3J0UGFyYW1zKXtQLnB1c2godGhpcy5zU29ydFBhcmFtcyl9aWYodGhpcy5zRmlsdGVyUGFyYW1zKXtQLnB1c2godGhpcy5zRmlsdGVyUGFyYW1zKX1pZih0aGlzLnNDdXN0b21QYXJhbXMpe1AucHVzaCh0aGlzLnNDdXN0b21QYXJhbXMpfWlmKCF0aGlzLmJMZW5ndGhGaW5hbCYmKHRoaXMuc0NvdW50TW9kZT09Qy5JbmxpbmV8fHRoaXMuc0NvdW50TW9kZT09Qy5Cb3RoKSl7UC5wdXNoKCIkaW5saW5lY291bnQ9YWxscGFnZXMiKTtJPXRydWV9ZnVuY3Rpb24gUyhmKXtxLmVhY2goZi5yZXN1bHRzLGZ1bmN0aW9uKGksZyl7dC5hS2V5c1tzK2ldPXQub01vZGVsLl9nZXRLZXkoZyl9KTtpZihJJiZmLl9fY291bnQpe3QuaUxlbmd0aD1wYXJzZUludChmLl9fY291bnQsMTApO3QuYkxlbmd0aEZpbmFsPXRydWV9aWYodC5pTGVuZ3RoPHMrZi5yZXN1bHRzLmxlbmd0aCl7dC5pTGVuZ3RoPXMrZi5yZXN1bHRzLmxlbmd0aDt0LmJMZW5ndGhGaW5hbD1mYWxzZX1pZihmLnJlc3VsdHMubGVuZ3RoPGx8fGw9PT11bmRlZmluZWQpe3QuaUxlbmd0aD1zK2YucmVzdWx0cy5sZW5ndGg7dC5iTGVuZ3RoRmluYWw9dHJ1ZX1pZihzPT0wJiZmLnJlc3VsdHMubGVuZ3RoPT0wKXt0LmlMZW5ndGg9MDt0LmJMZW5ndGhGaW5hbD10cnVlfXQub1JlcXVlc3RIYW5kbGU9bnVsbDt0LmJQZW5kaW5nUmVxdWVzdD1mYWxzZTt0LmJOZWVkc1VwZGF0ZT10cnVlfWZ1bmN0aW9uIGMoKXt0LmZpcmVEYXRhUmVjZWl2ZWQoKX1mdW5jdGlvbiBlKEUsQSl7dC5vUmVxdWVzdEhhbmRsZT1udWxsO3QuYlBlbmRpbmdSZXF1ZXN0PWZhbHNlO2lmKCFBKXt0LmFLZXlzPVtdO3QuaUxlbmd0aD0wO3QuYkxlbmd0aEZpbmFsPXRydWU7dC5iRGF0YUF2YWlsYWJsZT10cnVlO3QuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNoYW5nZX0pfXQuZmlyZURhdGFSZWNlaXZlZCgpfWZ1bmN0aW9uIHUoaCl7dC5vUmVxdWVzdEhhbmRsZT1ofXZhciBkPXRoaXMuc1BhdGgsbz10aGlzLm9Db250ZXh0O2lmKHRoaXMuaXNSZWxhdGl2ZSgpKXtkPXRoaXMub01vZGVsLnJlc29sdmUoZCxvKX1pZihkKXtpZihwKXt2YXIgVT10aGlzLm9Nb2RlbC5fY3JlYXRlUmVxdWVzdFVybChkLFApO3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKTt0aGlzLm9Nb2RlbC5maXJlUmVxdWVzdFNlbnQoe3VybDpVLG1ldGhvZDoiR0VUIixhc3luYzp0cnVlfSk7c2V0VGltZW91dChmdW5jdGlvbigpe3QuYk5lZWRzVXBkYXRlPXRydWU7dC5jaGVja1VwZGF0ZSgpO3Qub01vZGVsLmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6VSxtZXRob2Q6IkdFVCIsYXN5bmM6dHJ1ZSxzdWNjZXNzOnRydWV9KTt0LmZpcmVEYXRhUmVjZWl2ZWQoKX0sMCl9ZWxzZXt0aGlzLmJQZW5kaW5nUmVxdWVzdD10cnVlO3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKTt0aGlzLm9Nb2RlbC5fbG9hZERhdGEoZCxQLFMsZSxmYWxzZSx1LGMpfX19O2IucHJvdG90eXBlLmdldExlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlMZW5ndGh9O2IucHJvdG90eXBlLl9nZXRMZW5ndGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3ZhciBwPVtdO2lmKHRoaXMuc0ZpbHRlclBhcmFtcyl7cC5wdXNoKHRoaXMuc0ZpbHRlclBhcmFtcyl9aWYodGhpcy5tUGFyYW1ldGVycyYmdGhpcy5tUGFyYW1ldGVycy5jdXN0b20pe3ZhciBjPXtjdXN0b206e319O3EuZWFjaCh0aGlzLm1QYXJhbWV0ZXJzLmN1c3RvbSxmdW5jdGlvbihzLHYpe2MuY3VzdG9tW3NdPXZ9KTtwLnB1c2godGhpcy5vTW9kZWwuY3JlYXRlQ3VzdG9tUGFyYW1zKGMpKX1mdW5jdGlvbiBfKG8pe3QuaUxlbmd0aD1wYXJzZUludChvLDEwKTt0LmJMZW5ndGhGaW5hbD10cnVlfWZ1bmN0aW9uIGQoZSl7dmFyIEU9IlJlcXVlc3QgZm9yICRjb3VudCBmYWlsZWQ6ICIrZS5tZXNzYWdlO2lmKGUucmVzcG9uc2Upe0UrPSIsICIrZS5yZXNwb25zZS5zdGF0dXNDb2RlKyIsICIrZS5yZXNwb25zZS5zdGF0dXNUZXh0KyIsICIrZS5yZXNwb25zZS5ib2R5fXEuc2FwLmxvZy53YXJuaW5nKEUpfXZhciBQPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtpZihQKXt2YXIgdT10aGlzLm9Nb2RlbC5fY3JlYXRlUmVxdWVzdFVybChQKyIvJGNvdW50IixudWxsLHApO3ZhciByPXRoaXMub01vZGVsLl9jcmVhdGVSZXF1ZXN0KHUsIkdFVCIsZmFsc2UpO3IuaGVhZGVyc1siQWNjZXB0Il09InRleHQvcGxhaW4sICovKjtxPTAuNSI7dGhpcy5vTW9kZWwuX3JlcXVlc3QocixfLGQsdW5kZWZpbmVkLHVuZGVmaW5lZCx0aGlzLm9Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl9fTtiLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGYsYyxlKXt2YXIgZD1mYWxzZTtpZighZil7aWYoZSl7dmFyIHI9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO3ZhciBFPXRoaXMub01vZGVsLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChyKTtpZihFJiYoRS5lbnRpdHlUeXBlIGluIGUpKXtkPXRydWV9fWlmKGMmJiFkKXtxLmVhY2godGhpcy5hS2V5cyxmdW5jdGlvbihpLGspe2lmKGsgaW4gYyl7ZD10cnVlO3JldHVybiBmYWxzZX19KX1pZighYyYmIWUpe2Q9dHJ1ZX19aWYoZnx8ZCl7dGhpcy5hYm9ydFBlbmRpbmdSZXF1ZXN0KCk7dGhpcy5yZXNldERhdGEoKTt0aGlzLl9maXJlUmVmcmVzaCh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uUmVmcmVzaH0pfX07Yi5wcm90b3R5cGUuX2ZpcmVSZWZyZXNoPWZ1bmN0aW9uKEEpe2lmKHRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSl7dGhpcy5iUmVmcmVzaD10cnVlO3RoaXMuZmlyZUV2ZW50KCJyZWZyZXNoIixBKX19O2IucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXtpZih0aGlzLm9Nb2RlbC5vTWV0YWRhdGEuaXNMb2FkZWQoKSl7aWYodGhpcy5iRGF0YUF2YWlsYWJsZSl7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uQ2hhbmdlfSl9ZWxzZXt0aGlzLl9maXJlUmVmcmVzaCh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uUmVmcmVzaH0pfX19O2IucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYsYyl7dmFyIGQ9dGhpcy5zQ2hhbmdlUmVhc29uP3RoaXMuc0NoYW5nZVJlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNoYW5nZSxlPWZhbHNlLGwsbyx0PXRoaXMscixSO2lmKCFmJiYhdGhpcy5iTmVlZHNVcGRhdGUpe3I9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO1I9cS5pc0FycmF5KHIpJiYhcS5zYXAuZXF1YWwocix0aGlzLmFFeHBhbmRSZWZzKTt0aGlzLmFFeHBhbmRSZWZzPXI7aWYoUil7aWYodGhpcy5hU29ydGVycy5sZW5ndGg+MHx8dGhpcy5hRmlsdGVycy5sZW5ndGg+MCl7dGhpcy5yZWZyZXNoKCk7cmV0dXJufWVsc2V7dGhpcy5hS2V5cz1yO3RoaXMuaUxlbmd0aD1yLmxlbmd0aDt0aGlzLmJMZW5ndGhGaW5hbD10cnVlO2U9dHJ1ZX19ZWxzZSBpZihjKXtxLmVhY2godGhpcy5hS2V5cyxmdW5jdGlvbihpLGspe2lmKGsgaW4gYyl7ZT10cnVlO3JldHVybiBmYWxzZX19KX1lbHNle2U9dHJ1ZX1pZihlJiZ0aGlzLmFMYXN0Q29udGV4dHMpe2U9ZmFsc2U7dmFyIGc9dGhpcy5fZ2V0Q29udGV4dHModGhpcy5pTGFzdFN0YXJ0SW5kZXgsdGhpcy5pTGFzdExlbmd0aCx0aGlzLmlMYXN0VGhyZXNob2xkKTtpZih0aGlzLmFMYXN0Q29udGV4dHMubGVuZ3RoIT1nLmxlbmd0aCl7ZT10cnVlfWVsc2V7cS5lYWNoKHRoaXMuYUxhc3RDb250ZXh0cyxmdW5jdGlvbihpLGgpe2w9dC5vTGFzdENvbnRleHREYXRhW2guZ2V0UGF0aCgpXTtvPWdbaV0uZ2V0T2JqZWN0KCk7aWYoIXEuc2FwLmVxdWFsKGwsbywzLHRydWUpKXtlPXRydWU7cmV0dXJuIGZhbHNlfX0pfX19aWYoZnx8ZXx8dGhpcy5iTmVlZHNVcGRhdGUpe3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlO3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpkfSl9dGhpcy5zQ2hhbmdlUmVhc29uPXVuZGVmaW5lZH07Yi5wcm90b3R5cGUucmVzZXREYXRhPWZ1bmN0aW9uKCl7dGhpcy5hS2V5cz1bXTt0aGlzLmlMZW5ndGg9MDt0aGlzLmJMZW5ndGhGaW5hbD1mYWxzZTt0aGlzLnNDaGFuZ2VSZWFzb249dW5kZWZpbmVkO3RoaXMuYkRhdGFBdmFpbGFibGU9ZmFsc2U7aWYodGhpcy5vTW9kZWwuaXNDb3VudFN1cHBvcnRlZCgpJiYodGhpcy5zQ291bnRNb2RlPT1DLlJlcXVlc3R8fHRoaXMuc0NvdW50TW9kZT09Qy5Cb3RoKSl7dGhpcy5fZ2V0TGVuZ3RoKCl9fTtiLnByb3RvdHlwZS5hYm9ydFBlbmRpbmdSZXF1ZXN0PWZ1bmN0aW9uKCl7aWYodGhpcy5vUmVxdWVzdEhhbmRsZSl7dGhpcy5vUmVxdWVzdEhhbmRsZS5hYm9ydCgpO3RoaXMub1JlcXVlc3RIYW5kbGU9bnVsbDt0aGlzLmJQZW5kaW5nUmVxdWVzdD1mYWxzZX19O2IucHJvdG90eXBlLnNvcnQ9ZnVuY3Rpb24ocyl7aWYocyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Tb3J0ZXIpe3M9W3NdfXRoaXMuYVNvcnRlcnM9czt0aGlzLmNyZWF0ZVNvcnRQYXJhbXMocyk7dGhpcy5hYm9ydFBlbmRpbmdSZXF1ZXN0KCk7dGhpcy5hS2V5cz1bXTtpZighdGhpcy5iSW5pdGlhbCl7aWYodGhpcy5vUmVxdWVzdEhhbmRsZSl7dGhpcy5vUmVxdWVzdEhhbmRsZS5hYm9ydCgpO3RoaXMub1JlcXVlc3RIYW5kbGU9bnVsbDt0aGlzLmJQZW5kaW5nUmVxdWVzdD1mYWxzZX10aGlzLnNDaGFuZ2VSZWFzb249c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5Tb3J0O3RoaXMuX2ZpcmVSZWZyZXNoKHtyZWFzb246dGhpcy5zQ2hhbmdlUmVhc29ufSk7dGhpcy5fZmlyZVNvcnQoe3NvcnRlcjpzfSl9cmV0dXJuIHRoaXN9O2IucHJvdG90eXBlLmNyZWF0ZVNvcnRQYXJhbXM9ZnVuY3Rpb24ocyl7dGhpcy5zU29ydFBhcmFtcz1PLmNyZWF0ZVNvcnRQYXJhbXMocyl9O2IucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbihmLHMpe2lmKCFmKXtmPVtdfWlmKGYgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuRmlsdGVyKXtmPVtmXX1pZihzPT1GLkFwcGxpY2F0aW9uKXt0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnM9Zn1lbHNle3RoaXMuYUZpbHRlcnM9Zn1mPXRoaXMuYUZpbHRlcnMuY29uY2F0KHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVycyk7aWYoIWZ8fCFxLmlzQXJyYXkoZil8fGYubGVuZ3RoPT0wKXt0aGlzLmFGaWx0ZXJzPVtdO3RoaXMuYUFwcGxpY2F0aW9uRmlsdGVycz1bXX10aGlzLmNyZWF0ZUZpbHRlclBhcmFtcyhmKTt0aGlzLmFib3J0UGVuZGluZ1JlcXVlc3QoKTt0aGlzLnJlc2V0RGF0YSgpO2lmKCF0aGlzLmJJbml0aWFsKXtpZih0aGlzLm9SZXF1ZXN0SGFuZGxlKXt0aGlzLm9SZXF1ZXN0SGFuZGxlLmFib3J0KCk7dGhpcy5vUmVxdWVzdEhhbmRsZT1udWxsO3RoaXMuYlBlbmRpbmdSZXF1ZXN0PWZhbHNlfXRoaXMuc0NoYW5nZVJlYXNvbj1zYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkZpbHRlcjt0aGlzLl9maXJlUmVmcmVzaCh7cmVhc29uOnRoaXMuc0NoYW5nZVJlYXNvbn0pO2lmKHM9PUYuQXBwbGljYXRpb24pe3RoaXMuX2ZpcmVGaWx0ZXIoe2ZpbHRlcnM6dGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzfSl9ZWxzZXt0aGlzLl9maXJlRmlsdGVyKHtmaWx0ZXJzOnRoaXMuYUZpbHRlcnN9KX19cmV0dXJuIHRoaXN9O2IucHJvdG90eXBlLmNyZWF0ZUZpbHRlclBhcmFtcz1mdW5jdGlvbihmKXt0aGlzLnNGaWx0ZXJQYXJhbXM9Ty5jcmVhdGVGaWx0ZXJQYXJhbXMoZix0aGlzLm9Nb2RlbC5vTWV0YWRhdGEsdGhpcy5vRW50aXR5VHlwZSl9O2IucHJvdG90eXBlLl9pbml0U29ydGVyc0ZpbHRlcnM9ZnVuY3Rpb24oKXt2YXIgcj10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYoIXIpe3JldHVybn10aGlzLm9FbnRpdHlUeXBlPXRoaXMuX2dldEVudGl0eVR5cGUoKTt0aGlzLmNyZWF0ZVNvcnRQYXJhbXModGhpcy5hU29ydGVycyk7dGhpcy5jcmVhdGVGaWx0ZXJQYXJhbXModGhpcy5hRmlsdGVycy5jb25jYXQodGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzKSl9O2IucHJvdG90eXBlLl9nZXRFbnRpdHlUeXBlPWZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKHIpe3ZhciBlPXRoaXMub01vZGVsLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChyKTtyZXR1cm4gZX1yZXR1cm4gdW5kZWZpbmVkfTtyZXR1cm4gYn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YVByb3BlcnR5QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YVByb3BlcnR5QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9PRGF0YVByb3BlcnR5QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9Qcm9wZXJ0eUJpbmRpbmcnXSxmdW5jdGlvbihxLFApeyJ1c2Ugc3RyaWN0Ijt2YXIgTz1QLmV4dGVuZCgic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhUHJvcGVydHlCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsYSl7UC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vVmFsdWU9dGhpcy5fZ2V0VmFsdWUoKX19KTtPLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7aWYodGhpcy5vTW9kZWwub01ldGFkYXRhLmlzTG9hZGVkKCkpe3RoaXMuY2hlY2tVcGRhdGUodHJ1ZSl9fTtPLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9WYWx1ZX07Ty5wcm90b3R5cGUuX2dldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KX07Ty5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5vVmFsdWUhPXYpe2lmKCF0aGlzLm9Nb2RlbC5zZXRQcm9wZXJ0eSh0aGlzLnNQYXRoLHYsdGhpcy5vQ29udGV4dCkpe3RoaXMuX2ZpcmVDaGFuZ2UoKX19fTtPLnByb3RvdHlwZS5zZXRDb250ZXh0PWZ1bmN0aW9uKGMpe2lmKHRoaXMub0NvbnRleHQhPWMpe3RoaXMub0NvbnRleHQ9YztpZih0aGlzLmlzUmVsYXRpdmUoKSl7dGhpcy5jaGVja1VwZGF0ZSgpfX19O08ucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe3ZhciB2PXRoaXMuX2dldFZhbHVlKCk7aWYoIXEuc2FwLmVxdWFsKHYsdGhpcy5vVmFsdWUpfHxmKXt0aGlzLm9WYWx1ZT12O3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNoYW5nZX0pfX07cmV0dXJuIE99LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VQcm9wZXJ0eUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VQcm9wZXJ0eUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvcmVzb3VyY2UvUmVzb3VyY2VQcm9wZXJ0eUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvUHJvcGVydHlCaW5kaW5nJ10sZnVuY3Rpb24ocSxQKXsidXNlIHN0cmljdCI7dmFyIFI9UC5leHRlbmQoInNhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZVByb3BlcnR5QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCl7UC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vVmFsdWU9dGhpcy5vTW9kZWwuZ2V0UHJvcGVydHkocCl9fSk7Ui5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vTW9kZWwuZ2V0UHJvcGVydHkodGhpcy5zUGF0aCl9O3JldHVybiBSfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnhtbC5YTUxMaXN0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC54bWwuWE1MTGlzdEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwveG1sL1hNTExpc3RCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL0NoYW5nZVJlYXNvbicsJ3NhcC91aS9tb2RlbC9DbGllbnRMaXN0QmluZGluZyddLGZ1bmN0aW9uKHEsQyxhKXsidXNlIHN0cmljdCI7dmFyIFg9YS5leHRlbmQoInNhcC51aS5tb2RlbC54bWwuWE1MTGlzdEJpbmRpbmciKTtYLnByb3RvdHlwZS5nZXRDb250ZXh0cz1mdW5jdGlvbihzLGwpe3RoaXMuaUxhc3RTdGFydEluZGV4PXM7dGhpcy5pTGFzdExlbmd0aD1sO2lmKCFzKXtzPTB9aWYoIWwpe2w9TWF0aC5taW4odGhpcy5pTGVuZ3RoLHRoaXMub01vZGVsLmlTaXplTGltaXQpfXZhciBjPXRoaXMuX2dldENvbnRleHRzKHMsbCksbz17fTtpZih0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbil7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe29bY1tpXS5nZXRQYXRoKCldPXRoaXMub01vZGVsLl9nZXRPYmplY3QoY1tpXS5nZXRQYXRoKCkpWzBdfWlmKHRoaXMuYUxhc3RDb250ZXh0cyYmczx0aGlzLmlMYXN0RW5kSW5kZXgpe3ZhciB0PXRoaXM7dmFyIGQ9cS5zYXAuYXJyYXlEaWZmKHRoaXMuYUxhc3RDb250ZXh0cyxjLGZ1bmN0aW9uKE8sbil7dmFyIGI9dC5vTGFzdENvbnRleHREYXRhJiZ0Lm9MYXN0Q29udGV4dERhdGFbTy5nZXRQYXRoKCldO3ZhciBOPW8mJm9bbi5nZXRQYXRoKCldO2lmKGImJk4pe3JldHVybiBxLnNhcC5pc0VxdWFsTm9kZShiLE4pfXJldHVybiBmYWxzZX0pO2MuZGlmZj1kfXRoaXMuaUxhc3RFbmRJbmRleD1zK2w7dGhpcy5hTGFzdENvbnRleHRzPWMuc2xpY2UoMCk7dGhpcy5vTGFzdENvbnRleHREYXRhPXt9O3ZhciB0PXRoaXM7cS5lYWNoKG8sZnVuY3Rpb24oayxuKXt0Lm9MYXN0Q29udGV4dERhdGFba109bi5jbG9uZU5vZGUodHJ1ZSl9KX1yZXR1cm4gY307WC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKGwpe3RoaXMub0xpc3Q9W107dmFyIHQ9dGhpcztpZih0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbil7cS5lYWNoKGwsZnVuY3Rpb24oayxuKXt0Lm9MaXN0LnB1c2gobi5jbG9uZU5vZGUodHJ1ZSkpfSl9ZWxzZXt0aGlzLm9MaXN0PWwuc2xpY2UoMCl9dGhpcy51cGRhdGVJbmRpY2VzKCk7dGhpcy5hcHBseUZpbHRlcigpO3RoaXMuYXBwbHlTb3J0KCk7dGhpcy5pTGVuZ3RoPXRoaXMuX2dldExlbmd0aCgpfWVsc2V7dGhpcy5vTGlzdD1bXTt0aGlzLmFJbmRpY2VzPVtdO3RoaXMuaUxlbmd0aD0wfX07WC5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7aWYoIXRoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uKXt2YXIgbD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYoIXRoaXMub0xpc3R8fCFsfHxsLmxlbmd0aCE9dGhpcy5vTGlzdC5sZW5ndGh8fGYpe3RoaXMudXBkYXRlKCk7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOkMuQ2hhbmdlfSl9fWVsc2V7dmFyIGM9ZmFsc2U7dmFyIHQ9dGhpczt2YXIgbD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYoIXEuc2FwLmVxdWFsKHRoaXMub0xpc3QsbCkpe3RoaXMudXBkYXRlKCl9dmFyIGI9dGhpcy5fZ2V0Q29udGV4dHModGhpcy5pTGFzdFN0YXJ0SW5kZXgsdGhpcy5pTGFzdExlbmd0aCk7aWYodGhpcy5hTGFzdENvbnRleHRzKXtpZih0aGlzLmFMYXN0Q29udGV4dHMubGVuZ3RoIT1iLmxlbmd0aCl7Yz10cnVlfWVsc2V7cS5lYWNoKHRoaXMuYUxhc3RDb250ZXh0cyxmdW5jdGlvbihpLG8pe3ZhciBuPWJbaV0uZ2V0T2JqZWN0KCk7dmFyIE89dC5vTGFzdENvbnRleHREYXRhJiZ0Lm9MYXN0Q29udGV4dERhdGFbby5nZXRQYXRoKCldO2lmKG4mJk8mJiFPLmlzRXF1YWxOb2RlKG4pKXtjPXRydWU7cmV0dXJuIGZhbHNlfX0pfX1lbHNle2M9dHJ1ZX1pZihjfHxmKXt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246Qy5DaGFuZ2V9KX19fTtyZXR1cm4gWH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC54bWwuWE1MVHJlZUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwueG1sLlhNTFRyZWVCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3htbC9YTUxUcmVlQmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9DbGllbnRUcmVlQmluZGluZyddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBYPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwueG1sLlhNTFRyZWVCaW5kaW5nIik7WC5wcm90b3R5cGUuZ2V0Tm9kZUNvbnRleHRzPWZ1bmN0aW9uKGMpe3ZhciBzPWMuZ2V0UGF0aCgpO2lmKCFxLnNhcC5lbmRzV2l0aChzLCIvIikpe3M9cysiLyJ9aWYoIXEuc2FwLnN0YXJ0c1dpdGgocywiLyIpKXtzPSIvIitzfXZhciBhPVtdLG49e30sdD10aGlzLE49dGhpcy5vTW9kZWwuX2dldE9iamVjdChjLmdldFBhdGgoKSksbyxiLGQ7cS5lYWNoKE5bMF0uY2hpbGROb2RlcyxmdW5jdGlvbihlLG8pe2lmKG8ubm9kZVR5cGU9PTEpe2lmKG5bby5ub2RlTmFtZV09PXVuZGVmaW5lZCl7bltvLm5vZGVOYW1lXT0wfWVsc2V7bltvLm5vZGVOYW1lXSsrfWI9cytvLm5vZGVOYW1lKyIvIituW28ubm9kZU5hbWVdO2Q9dC5vTW9kZWwuZ2V0Q29udGV4dChiKTtpZih0LmFGaWx0ZXJzJiYhdC5iSXNGaWx0ZXJpbmcpe2lmKHEuaW5BcnJheShkLHQuZmlsdGVySW5mby5hRmlsdGVyZWRDb250ZXh0cykhPS0xKXthLnB1c2goZCl9fWVsc2V7YS5wdXNoKGQpfX19KTtyZXR1cm4gYX07cmV0dXJuIFh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuVmlld1NlcmlhbGl6ZXInKSl7Ci8qCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuVmlld1NlcmlhbGl6ZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL3NlcmlhbGl6ZXIvVmlld1NlcmlhbGl6ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnLi9IVE1MVmlld1NlcmlhbGl6ZXInLCcuL1NlcmlhbGl6ZXInLCcuL1hNTFZpZXdTZXJpYWxpemVyJ10sZnVuY3Rpb24ocSxFLEgsUyxYKXsidXNlIHN0cmljdCI7dmFyIFY9RS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5WaWV3U2VyaWFsaXplciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHIsdyxkKXtFLmFwcGx5KHRoaXMpO3RoaXMuX29Sb290Q29udHJvbD1yO3RoaXMuX29XaW5kb3c9d3x8d2luZG93O3RoaXMuX21WaWV3cz17fTt0aGlzLl9zRGVmYXVsdFhtbE5hbWVzcGFjZT1kfX0pO1YucHJvdG90eXBlLnNlcmlhbGl6ZVRvWE1MPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VyaWFsaXplKCJYTUwiKX07Vi5wcm90b3R5cGUuc2VyaWFsaXplVG9IVE1MPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VyaWFsaXplKCJIVE1MIil9O1YucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbihjKXt0aGlzLl9tVmlld3M9e307dGhpcy5fc0NvbnZlcnRUb1ZpZXdUeXBlPWN8fHVuZGVmaW5lZDtyZXR1cm4gdGhpcy5fc2VyaWFsaXplUmVjdXJzaXZlKHRoaXMuX29Sb290Q29udHJvbCl9O1YucHJvdG90eXBlLl9nZXRWaWV3VHlwZT1mdW5jdGlvbih2KXtpZighdGhpcy5fc0NvbnZlcnRUb1ZpZXdUeXBlKXtpZih2IGluc3RhbmNlb2YgdGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5tdmMuSFRNTFZpZXcpe3JldHVybiJIVE1MIn1lbHNlIGlmKHYgaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLm12Yy5YTUxWaWV3KXtyZXR1cm4iWE1MIn19cmV0dXJuIHRoaXMuX3NDb252ZXJ0VG9WaWV3VHlwZX07Vi5wcm90b3R5cGUuX3NlcmlhbGl6ZVJlY3Vyc2l2ZT1mdW5jdGlvbihjKXtpZihjIGluc3RhbmNlb2YgdGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5tdmMuVmlldyl7dmFyIHY9dGhpcy5fZ2V0Vmlld1NlcmlhbGl6ZXIoYyx0aGlzLl9nZXRWaWV3VHlwZShjKSk7aWYodil7dmFyIG89Yy5nZXRWaWV3TmFtZSgpfHxjLmdldENvbnRyb2xsZXJOYW1lKCk7aWYoIXRoaXMuX21WaWV3c1tvXSl7dGhpcy5fbVZpZXdzW29dPXYuc2VyaWFsaXplKHRoaXMuX2dldFZpZXdUeXBlKGMpKX19fWlmKGMuZ2V0TWV0YWRhdGEoKS5nZXRDbGFzcygpPT09dGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5VSUFyZWEpe3ZhciBDPWMuZ2V0Q29udGVudCgpO2Zvcih2YXIgaT0wO2k8Qy5sZW5ndGg7aSsrKXt0aGlzLl9zZXJpYWxpemVSZWN1cnNpdmUoQ1tpXSl9fWVsc2UgaWYoYy5nZXRNZXRhZGF0YSgpLmdldENsYXNzKCk9PT10aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lcil7dGhpcy5fc2VyaWFsaXplUmVjdXJzaXZlKGMuZ2V0Q29tcG9uZW50SW5zdGFuY2UoKS5nZXRBZ2dyZWdhdGlvbigicm9vdENvbnRyb2wiKSl9ZWxzZXt2YXIgYT1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsQWdncmVnYXRpb25zKCk7aWYoYSl7Zm9yKHZhciBuIGluIGEpe3ZhciBBPWFbbl07dmFyIGI9Y1tBLl9zR2V0dGVyXSgpO2lmKGImJmIubGVuZ3RoKXtmb3IodmFyIGk9MDtpPGIubGVuZ3RoO2krKyl7dmFyIE89YltpXTtpZihPIGluc3RhbmNlb2YgdGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5FbGVtZW50KXt0aGlzLl9zZXJpYWxpemVSZWN1cnNpdmUoTyl9fX1lbHNlIGlmKGIgaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLkVsZW1lbnQpe3RoaXMuX3NlcmlhbGl6ZVJlY3Vyc2l2ZShiKX19fX1yZXR1cm4gdGhpcy5fbVZpZXdzfTtWLnByb3RvdHlwZS5fZ2V0Vmlld1NlcmlhbGl6ZXI9ZnVuY3Rpb24odix0KXt2YXIgZz1mdW5jdGlvbihlKXtpZihlLmZGdW5jdGlvbiYmZS5mRnVuY3Rpb24uX3NhcHVpX2hhbmRsZXJOYW1lKXt2YXIgaD1lLmZGdW5jdGlvbi5fc2FwdWlfaGFuZGxlck5hbWU7dmFyIGM9di5nZXRDb250cm9sbGVyKCk7aWYoY1toXSl7cmV0dXJuIGh9fX07dmFyIEc9ZnVuY3Rpb24oYyl7aWYoYy5fc2FwdWlfY29udHJvbElkKXtyZXR1cm4gYy5fc2FwdWlfY29udHJvbElkfXJldHVybiBjLmdldElkKCkucmVwbGFjZSh2LmNyZWF0ZUlkKCIiKSwiIil9O2lmKHQ9PT0iSFRNTCIpe3JldHVybiBuZXcgSCh2LHRoaXMuX29XaW5kb3csRyxnKX1lbHNlIGlmKHQ9PT0iWE1MIil7cmV0dXJuIG5ldyBYKHYsdGhpcy5fb1dpbmRvdyx0aGlzLl9zRGVmYXVsdFhtbE5hbWVzcGFjZSxHLGcpfWVsc2V7dmFyIHQ9KHYpP3YuY29uc3RydWN0b3I6Ij8iO3Rocm93IEVycm9yKCJWaWV3IHR5cGUgJyIrdCsiJyBpcyBub3Qgc3VwcG9ydGVkIGZvciBjb252ZXJzaW9uLiBPbmx5IEhUTUwgYW5kIFhNTCBpcyBzdXBwb3J0ZWQiKX19O3JldHVybiBWfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkNsaWVudFByb3BlcnR5QmluZGluZycpKXsKLyohCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ2xpZW50UHJvcGVydHlCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0NsaWVudFByb3BlcnR5QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vUHJvcGVydHlCaW5kaW5nJ10sZnVuY3Rpb24ocSxQKXsidXNlIHN0cmljdCI7dmFyIEM9UC5leHRlbmQoInNhcC51aS5tb2RlbC5DbGllbnRQcm9wZXJ0eUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxhKXtQLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm9WYWx1ZT10aGlzLl9nZXRWYWx1ZSgpfX0pO0MucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1ZhbHVlfTtDLnByb3RvdHlwZS5fZ2V0VmFsdWU9ZnVuY3Rpb24oKXt2YXIgcD10aGlzLnNQYXRoLnN1YnN0cih0aGlzLnNQYXRoLmxhc3RJbmRleE9mKCIvIikrMSk7aWYocD09Il9fbmFtZV9fIil7dmFyIGE9dGhpcy5vQ29udGV4dC5zcGxpdCgiLyIpO3JldHVybiBhW2EubGVuZ3RoLTFdfXJldHVybiB0aGlzLm9Nb2RlbC5nZXRQcm9wZXJ0eSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpfTtDLnByb3RvdHlwZS5zZXRDb250ZXh0PWZ1bmN0aW9uKGMpe2lmKHRoaXMub0NvbnRleHQhPWMpe3RoaXMub0NvbnRleHQ9YztpZih0aGlzLmlzUmVsYXRpdmUoKSl7dGhpcy5jaGVja1VwZGF0ZSgpfX19O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkNvbXBvc2l0ZUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ29tcG9zaXRlQmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9Db21wb3NpdGVCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Qcm9wZXJ0eUJpbmRpbmcnLCcuL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLFAsUyl7InVzZSBzdHJpY3QiO3ZhciBDPVAuZXh0ZW5kKCJzYXAudWkubW9kZWwuQ29tcG9zaXRlQmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGIscil7UC5hcHBseSh0aGlzLFtudWxsLCIiXSk7dmFyIHQ9dGhpczt0aGlzLmFCaW5kaW5ncz1iO3RoaXMuYlJhd1ZhbHVlcz1yfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldEJpbmRpbmdzIiwiYXR0YWNoQ2hhbmdlIiwiZGV0YWNoQ2hhbmdlIl19fSk7Qy5wcm90b3R5cGUuZ2V0UGF0aD1mdW5jdGlvbigpe3JldHVybiBudWxsfTtDLnByb3RvdHlwZS5nZXRNb2RlbD1mdW5jdGlvbigpe3JldHVybiBudWxsfTtDLnByb3RvdHlwZS5nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O0MucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07Qy5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXtxLmVhY2godGhpcy5hQmluZGluZ3MsZnVuY3Rpb24oaSxiKXtpZighY3x8Yi51cGRhdGVSZXF1aXJlZChjLmdldE1vZGVsKCkpKXtiLnNldENvbnRleHQoYyl9fSl9O0MucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHYpe3Rocm93IG5ldyBzYXAudWkuYmFzZS5FeGNlcHRpb24oIkNvbXBvc2l0ZSBCaW5kaW5nIGRvZXMgbm90IHN1cHBvcnQgc2V0VmFsdWUgYmVjYXVzZSBpdCBjb250YWlucyBtdWx0aXBsZSBwcm9wZXJ0eSBiaW5kaW5ncyEiKX07Qy5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXt2YXIgdj1bXSxWO3EuZWFjaCh0aGlzLmFCaW5kaW5ncyxmdW5jdGlvbihpLGIpe1Y9Yi5nZXRWYWx1ZSgpO3YucHVzaChWKX0pO3JldHVybiB2fTtDLnByb3RvdHlwZS5nZXRFeHRlcm5hbFZhbHVlPWZ1bmN0aW9uKCl7dmFyIHY9W10sVjtpZih0aGlzLmJSYXdWYWx1ZXMpe3Y9dGhpcy5nZXRWYWx1ZSgpfWVsc2V7cS5lYWNoKHRoaXMuYUJpbmRpbmdzLGZ1bmN0aW9uKGksYil7Vj1iLmdldEV4dGVybmFsVmFsdWUoKTt2LnB1c2goVil9KX1pZih0aGlzLmZuRm9ybWF0dGVyKXtWPXRoaXMuZm5Gb3JtYXR0ZXIuYXBwbHkodGhpcyx2KX1lbHNle2lmKHYubGVuZ3RoPjEpe1Y9di5qb2luKCIgIil9ZWxzZXtWPXZbMF19fXJldHVybiBWfTtDLnByb3RvdHlwZS5zZXRFeHRlcm5hbFZhbHVlPWZ1bmN0aW9uKHYpe3Rocm93IG5ldyBzYXAudWkuYmFzZS5FeGNlcHRpb24oIkNvbXBvc2l0ZSBCaW5kaW5nIGRvZXMgbm90IHN1cHBvcnQgc2V0RXh0ZXJuYWxWYWx1ZSBiZWNhdXNlIGl0IGNvbnRhaW5zIG11bHRpcGxlIHByb3BlcnR5IGJpbmRpbmdzISIpfTtDLnByb3RvdHlwZS5nZXRCaW5kaW5ncz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFCaW5kaW5nc307Qy5wcm90b3R5cGUuYXR0YWNoQ2hhbmdlPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiY2hhbmdlIixmLGwpO2lmKHRoaXMuYUJpbmRpbmdzKXt2YXIgdD10aGlzO3EuZWFjaCh0aGlzLmFCaW5kaW5ncyxmdW5jdGlvbihpLGIpe2IuYXR0YWNoQ2hhbmdlKHQuY2hlY2tVcGRhdGUsdCl9KX19O0MucHJvdG90eXBlLmRldGFjaENoYW5nZT1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImNoYW5nZSIsZixsKTtpZih0aGlzLmFCaW5kaW5ncyl7dmFyIHQ9dGhpcztxLmVhY2godGhpcy5hQmluZGluZ3MsZnVuY3Rpb24oaSxiKXtiLmRldGFjaENoYW5nZSh0LmNoZWNrVXBkYXRlLHQpfSl9fTtDLnByb3RvdHlwZS51cGRhdGVSZXF1aXJlZD1mdW5jdGlvbihtKXt2YXIgdT1mYWxzZTtxLmVhY2godGhpcy5hQmluZGluZ3MsZnVuY3Rpb24oaSxiKXt1PXV8fGIudXBkYXRlUmVxdWlyZWQobSl9KTtyZXR1cm4gdX07Qy5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7dmFyIHY9dGhpcy5nZXRFeHRlcm5hbFZhbHVlKCk7aWYoIXEuc2FwLmVxdWFsKHYsdGhpcy5vVmFsdWUpfHxmKXt0aGlzLm9WYWx1ZT12O3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNoYW5nZX0pfX07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuY29udHJvbC5Db250cm9sTW9kZWwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuY29udHJvbC5Db250cm9sTW9kZWwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvY29udHJvbC9Db250cm9sTW9kZWwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvTW9kZWwnLCcuL0NvbnRyb2xQcm9wZXJ0eUJpbmRpbmcnXSxmdW5jdGlvbihxLE0sQyl7InVzZSBzdHJpY3QiO3ZhciBhPU0uZXh0ZW5kKCJzYXAudWkubW9kZWwuY29udHJvbC5Db250cm9sTW9kZWwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihjKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm9Db250cm9sPWM7dGhpcy5vQ29udHJvbC5hdHRhY2hFdmVudCgiX2NoYW5nZSIsdGhpcy5jaGVja1VwZGF0ZSx0aGlzKTt0aGlzLm9FbGVtZW50cz1bXX19KTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5vQ29udHJvbC5kZXRhY2hFdmVudCgiX2NoYW5nZSIsdGhpcy5jaGVja1VwZGF0ZSx0aGlzKX07YS5wcm90b3R5cGUuYWRkRmFjYWRlQ29tcG9uZW50PWZ1bmN0aW9uKGUpe3ZhciBpPXEuaW5BcnJheShlLHRoaXMub0VsZW1lbnRzKTtpZihpPDApe3RoaXMub0VsZW1lbnRzLnB1c2goZSk7ZS5hdHRhY2hFdmVudCgiX2NoYW5nZSIsdGhpcy5jaGVja1VwZGF0ZSx0aGlzKX19O2EucHJvdG90eXBlLnJlbW92ZUZhY2FkZUNvbXBvbmVudD1mdW5jdGlvbihlKXt2YXIgaT1xLmluQXJyYXkoZSx0aGlzLm9FbGVtZW50cyk7aWYoaT49MCl7dGhpcy5vRWxlbWVudHMuc3BsaWNlKGksMSk7ZS5kZXRhY2hFdmVudCgiX2NoYW5nZSIsdGhpcy5jaGVja1VwZGF0ZSx0aGlzKX19O2EucHJvdG90eXBlLmJpbmRQcm9wZXJ0eT1mdW5jdGlvbihwLGMpe2M9Y3x8dGhpcy5vQ29udHJvbDtpZihjIT09dGhpcy5vQ29udHJvbCl7dGhpcy5hZGRGYWNhZGVDb21wb25lbnQoYyl9cmV0dXJuIG5ldyBDKHRoaXMscCxjKX07YS5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fb25jaGFuZ2Upe3RoaXMuX29uY2hhbmdlKGUpfWlmKHRoaXMuYUJpbmRpbmdzLmxlbmd0aCl7dmFyIGI9dGhpcy5hQmluZGluZ3Muc2xpY2UoMCk7cS5lYWNoKGIsZnVuY3Rpb24oaSxCKXtCLmNoZWNrVXBkYXRlKCl9KX19O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmpzb24uSlNPTlByb3BlcnR5QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05Qcm9wZXJ0eUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvanNvbi9KU09OUHJvcGVydHlCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL0NsaWVudFByb3BlcnR5QmluZGluZyddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBKPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwuanNvbi5KU09OUHJvcGVydHlCaW5kaW5nIik7Si5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odil7aWYoIXEuc2FwLmVxdWFsKHRoaXMub1ZhbHVlLHYpKXt0aGlzLm9Nb2RlbC5zZXRQcm9wZXJ0eSh0aGlzLnNQYXRoLHYsdGhpcy5vQ29udGV4dCl9fTtKLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXt2YXIgdj10aGlzLl9nZXRWYWx1ZSgpO2lmKCFxLnNhcC5lcXVhbCh2LHRoaXMub1ZhbHVlKXx8Zil7dGhpcy5vVmFsdWU9djt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5DaGFuZ2V9KX19O3JldHVybiBKfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTW9kZWwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNb2RlbCcpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkuZGF0YWpzJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL09EYXRhTW9kZWwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvTW9kZWwnLCcuL09EYXRhVXRpbHMnLCcuL0NvdW50TW9kZScsJy4vT0RhdGFDb250ZXh0QmluZGluZycsJy4vT0RhdGFMaXN0QmluZGluZycsJy4vT0RhdGFNZXRhZGF0YScsJy4vT0RhdGFQcm9wZXJ0eUJpbmRpbmcnLCcuL09EYXRhVHJlZUJpbmRpbmcnLCdzYXAvdWkvdGhpcmRwYXJ0eS9VUkknLCdzYXAvdWkvdGhpcmRwYXJ0eS9kYXRhanMnXSxmdW5jdGlvbihxLE0sTyxDLGEsYixjLGQsZSxVLGYpeyJ1c2Ugc3RyaWN0Ijt2YXIgZz1NLmV4dGVuZCgic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTW9kZWwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihzLGosdSxwLGgsdCx3LGwpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBpLHIsbSxBPW51bGwsTCxrLG4sRCxvPXRoaXM7aWYodHlwZW9mIGo9PT0ib2JqZWN0Iil7dT1qLnVzZXI7cD1qLnBhc3N3b3JkO2g9ai5oZWFkZXJzO3Q9ai50b2tlbkhhbmRsaW5nO2w9ai5sb2FkTWV0YWRhdGFBc3luYzt3PWoud2l0aENyZWRlbnRpYWxzO209ai5tYXhEYXRhU2VydmljZVZlcnNpb247aT1qLnVzZUJhdGNoO3I9ai5yZWZyZXNoQWZ0ZXJDaGFuZ2U7QT1qLmFubm90YXRpb25VUkk7TD1qLmxvYWRBbm5vdGF0aW9uc0pvaW5lZDtEPWouZGVmYXVsdENvdW50TW9kZTtuPWoubWV0YWRhdGFOYW1lc3BhY2VzO2o9ai5qc29ufXRoaXMuc0RlZmF1bHRCaW5kaW5nTW9kZT1zYXAudWkubW9kZWwuQmluZGluZ01vZGUuT25lV2F5O3RoaXMubVN1cHBvcnRlZEJpbmRpbmdNb2Rlcz17Ik9uZVdheSI6dHJ1ZSwiT25lVGltZSI6dHJ1ZSwiVHdvV2F5Ijp0cnVlfTt0aGlzLmJDb3VudFN1cHBvcnRlZD10cnVlO3RoaXMuYkpTT049ajt0aGlzLmJDYWNoZT10cnVlO3RoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcz1bXTt0aGlzLm9SZXF1ZXN0UXVldWU9e307dGhpcy5hQmF0Y2hPcGVyYXRpb25zPVtdO3RoaXMub0hhbmRsZXI7dGhpcy5iVG9rZW5IYW5kbGluZz10IT09ZmFsc2U7dGhpcy5iV2l0aENyZWRlbnRpYWxzPXc9PT10cnVlO3RoaXMuYlVzZUJhdGNoPWk9PT10cnVlO3RoaXMuYlJlZnJlc2hBZnRlckNoYW5nZT1yIT09ZmFsc2U7dGhpcy5zTWF4RGF0YVNlcnZpY2VWZXJzaW9uPW07dGhpcy5iTG9hZE1ldGFkYXRhQXN5bmM9ISFsO3RoaXMuYkxvYWRBbm5vdGF0aW9uc0pvaW5lZD1MPT09dW5kZWZpbmVkP3RydWU6TDt0aGlzLnNBbm5vdGF0aW9uVVJJPUE7dGhpcy5zRGVmYXVsdENvdW50TW9kZT1EfHxDLkJvdGg7dGhpcy5vTWV0YWRhdGFMb2FkRXZlbnQ9bnVsbDt0aGlzLm9NZXRhZGF0YUZhaWxlZEV2ZW50PW51bGw7aWYodGhpcy5zQW5ub3RhdGlvblVSSSl7cS5zYXAucmVxdWlyZSgic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQW5ub3RhdGlvbnMiKX10aGlzLm9IZWFkZXJzPXt9O3RoaXMuc2V0SGVhZGVycyhoKTt0aGlzLm9EYXRhPXt9O3RoaXMub01ldGFkYXRhPW51bGw7dGhpcy5vQW5ub3RhdGlvbnM9bnVsbDtpZihzLmluZGV4T2YoIj8iKT09LTEpe3RoaXMuc1NlcnZpY2VVcmw9c31lbHNle3ZhciB2PXMuc3BsaXQoIj8iKTt0aGlzLnNTZXJ2aWNlVXJsPXZbMF07dGhpcy5zVXJsUGFyYW1zPXZbMV19aWYoc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0U3RhdGlzdGljcygpKXtpZih0aGlzLnNVcmxQYXJhbXMpe3RoaXMuc1VybFBhcmFtcz10aGlzLnNVcmxQYXJhbXMrIiZzYXAtc3RhdGlzdGljcz10cnVlIn1lbHNle3RoaXMuc1VybFBhcmFtcz0ic2FwLXN0YXRpc3RpY3M9dHJ1ZSJ9fXRoaXMuc1NlcnZpY2VVcmw9dGhpcy5zU2VydmljZVVybC5yZXBsYWNlKC9cLyQvLCIiKTt0aGlzLm9TZXJ2aWNlRGF0YT1nLm1TZXJ2aWNlRGF0YVt0aGlzLnNTZXJ2aWNlVXJsXTtpZighdGhpcy5vU2VydmljZURhdGEpe2cubVNlcnZpY2VEYXRhW3RoaXMuc1NlcnZpY2VVcmxdPXt9O3RoaXMub1NlcnZpY2VEYXRhPWcubVNlcnZpY2VEYXRhW3RoaXMuc1NlcnZpY2VVcmxdfWlmKHRoaXMuYlRva2VuSGFuZGxpbmcmJnRoaXMub1NlcnZpY2VEYXRhLnNlY3VyaXR5VG9rZW4pe3RoaXMub0hlYWRlcnNbIngtY3NyZi10b2tlbiJdPXRoaXMub1NlcnZpY2VEYXRhLnNlY3VyaXR5VG9rZW59dGhpcy5zVXNlcj11O3RoaXMuc1Bhc3N3b3JkPXA7dGhpcy5vSGVhZGVyc1siQWNjZXB0LUxhbmd1YWdlIl09c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0TGFuZ3VhZ2UoKTtpZighdGhpcy5vU2VydmljZURhdGEub01ldGFkYXRhKXt0aGlzLm9NZXRhZGF0YT1uZXcgc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTWV0YWRhdGEodGhpcy5fY3JlYXRlUmVxdWVzdFVybCgiJG1ldGFkYXRhIikse2FzeW5jOnRoaXMuYkxvYWRNZXRhZGF0YUFzeW5jLHVzZXI6dGhpcy5zVXNlcixwYXNzd29yZDp0aGlzLnNQYXNzd29yZCxoZWFkZXJzOnRoaXMubUN1c3RvbUhlYWRlcnMsbmFtZXNwYWNlczpufSk7by5vU2VydmljZURhdGEub01ldGFkYXRhPW8ub01ldGFkYXRhfWVsc2V7dGhpcy5vTWV0YWRhdGE9dGhpcy5vU2VydmljZURhdGEub01ldGFkYXRhfWlmKCF0aGlzLm9NZXRhZGF0YS5pc0xvYWRlZCgpKXt0aGlzLm9NZXRhZGF0YS5hdHRhY2hMb2FkZWQoZnVuY3Rpb24oRSl7by5faW5pdGlhbGl6ZU1ldGFkYXRhKCk7by5pbml0aWFsaXplKCl9LHRoaXMpO3RoaXMub01ldGFkYXRhLmF0dGFjaEZhaWxlZCh0aGlzLmZpcmVNZXRhZGF0YUZhaWxlZCx0aGlzKX1pZih0aGlzLnNBbm5vdGF0aW9uVVJJKXt0aGlzLm9Bbm5vdGF0aW9ucz1uZXcgc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQW5ub3RhdGlvbnModGhpcy5zQW5ub3RhdGlvblVSSSx0aGlzLm9NZXRhZGF0YSx7YXN5bmM6dGhpcy5iTG9hZE1ldGFkYXRhQXN5bmN9KTt0aGlzLm9Bbm5vdGF0aW9ucy5hdHRhY2hGYWlsZWQodGhpcy5maXJlQW5ub3RhdGlvbnNGYWlsZWQsdGhpcyk7dGhpcy5vQW5ub3RhdGlvbnMuYXR0YWNoTG9hZGVkKHRoaXMuZmlyZUFubm90YXRpb25zTG9hZGVkLHRoaXMpfWlmKHRoaXMub01ldGFkYXRhLmlzTG9hZGVkKCkpe3RoaXMuX2luaXRpYWxpemVNZXRhZGF0YSh0cnVlKX1pZih0aGlzLmJKU09OKXtpZih0aGlzLnNNYXhEYXRhU2VydmljZVZlcnNpb249PT0iMy4wIil7dGhpcy5vSGVhZGVyc1siQWNjZXB0Il09ImFwcGxpY2F0aW9uL2pzb247b2RhdGE9ZnVsbG1ldGFkYXRhIn1lbHNle3RoaXMub0hlYWRlcnNbIkFjY2VwdCJdPSJhcHBsaWNhdGlvbi9qc29uIn10aGlzLm9IYW5kbGVyPU9EYXRhLmpzb25IYW5kbGVyfWVsc2V7dGhpcy5vSGVhZGVyc1siQWNjZXB0Il09ImFwcGxpY2F0aW9uL2F0b20reG1sLGFwcGxpY2F0aW9uL2F0b21zdmMreG1sLGFwcGxpY2F0aW9uL3htbCI7dGhpcy5vSGFuZGxlcj1PRGF0YS5hdG9tSGFuZGxlcn10aGlzLm9IZWFkZXJzWyJNYXhEYXRhU2VydmljZVZlcnNpb24iXT0iMi4wIjtpZih0aGlzLnNNYXhEYXRhU2VydmljZVZlcnNpb24pe3RoaXMub0hlYWRlcnNbIk1heERhdGFTZXJ2aWNlVmVyc2lvbiJdPXRoaXMuc01heERhdGFTZXJ2aWNlVmVyc2lvbn10aGlzLm9IZWFkZXJzWyJEYXRhU2VydmljZVZlcnNpb24iXT0iMi4wIn0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJjcmVhdGUiLCJyZW1vdmUiLCJ1cGRhdGUiLCJzdWJtaXRDaGFuZ2VzIiwiZ2V0U2VydmljZU1ldGFkYXRhIiwicmVhZCIsImhhc1BlbmRpbmdDaGFuZ2VzIiwicmVmcmVzaCIsInJlc2V0Q2hhbmdlcyIsImlzQ291bnRTdXBwb3J0ZWQiLCJzZXRDb3VudFN1cHBvcnRlZCIsInNldERlZmF1bHRDb3VudE1vZGUiLCJnZXREZWZhdWx0Q291bnRNb2RlIiwiZm9yY2VOb0NhY2hlIiwic2V0UHJvcGVydHkiLCJyZWZyZXNoU2VjdXJpdHlUb2tlbiIsInNldEhlYWRlcnMiLCJnZXRIZWFkZXJzIiwic2V0VXNlQmF0Y2giXX19KTtnLk1fRVZFTlRTPXtSZWplY3RDaGFuZ2U6InJlamVjdENoYW5nZSIsTWV0YWRhdGFMb2FkZWQ6Im1ldGFkYXRhTG9hZGVkIixNZXRhZGF0YUZhaWxlZDoibWV0YWRhdGFGYWlsZWQiLEFubm90YXRpb25zTG9hZGVkOiJhbm5vdGF0aW9uc0xvYWRlZCIsQW5ub3RhdGlvbnNGYWlsZWQ6ImFubm90YXRpb25zRmFpbGVkIn07Zy5tU2VydmljZURhdGE9e307Zy5wcm90b3R5cGUuZmlyZVJlamVjdENoYW5nZT1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudCgicmVqZWN0Q2hhbmdlIixBKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuYXR0YWNoUmVqZWN0Q2hhbmdlPWZ1bmN0aW9uKEQsRixsKXt0aGlzLmF0dGFjaEV2ZW50KCJyZWplY3RDaGFuZ2UiLEQsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuZGV0YWNoUmVqZWN0Q2hhbmdlPWZ1bmN0aW9uKEYsbCl7dGhpcy5kZXRhY2hFdmVudCgicmVqZWN0Q2hhbmdlIixGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5faW5pdGlhbGl6ZU1ldGFkYXRhPWZ1bmN0aW9uKEQpe3ZhciB0PXRoaXM7dGhpcy5iVXNlQmF0Y2g9dGhpcy5iVXNlQmF0Y2h8fHRoaXMub01ldGFkYXRhLmdldFVzZUJhdGNoKCk7dmFyIGg9ZnVuY3Rpb24oaSl7aWYoISFpKXt0Lm1ldGFkYXRhTG9hZEV2ZW50PXEuc2FwLmRlbGF5ZWRDYWxsKDAsdCxoKX1lbHNle3QuZmlyZU1ldGFkYXRhTG9hZGVkKHttZXRhZGF0YTp0Lm9NZXRhZGF0YX0pO3Euc2FwLmxvZy5kZWJ1ZygiT0RhdGFNb2RlbCBmaXJlZCBtZXRhZGF0YWxvYWRlZCIpfX07aWYodGhpcy5iTG9hZE1ldGFkYXRhQXN5bmMmJnRoaXMuc0Fubm90YXRpb25VUkkmJnRoaXMuYkxvYWRBbm5vdGF0aW9uc0pvaW5lZCl7aWYodGhpcy5vQW5ub3RhdGlvbnMmJnRoaXMub0Fubm90YXRpb25zLmJJbml0aWFsaXplZCl7aCgpfWVsc2V7dGhpcy5vQW5ub3RhdGlvbnMuYXR0YWNoTG9hZGVkKGZ1bmN0aW9uKCl7aCgpfSx0aGlzKX19ZWxzZXtoKEQpfX07Zy5wcm90b3R5cGUuZmlyZUFubm90YXRpb25zTG9hZGVkPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJhbm5vdGF0aW9uc0xvYWRlZCIsQSk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmF0dGFjaEFubm90YXRpb25zTG9hZGVkPWZ1bmN0aW9uKEQsRixsKXt0aGlzLmF0dGFjaEV2ZW50KCJhbm5vdGF0aW9uc0xvYWRlZCIsRCxGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5kZXRhY2hBbm5vdGF0aW9uc0xvYWRlZD1mdW5jdGlvbihGLGwpe3RoaXMuZGV0YWNoRXZlbnQoImFubm90YXRpb25zTG9hZGVkIixGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5maXJlQW5ub3RhdGlvbnNGYWlsZWQ9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoImFubm90YXRpb25zRmFpbGVkIixBKTtxLnNhcC5sb2cuZGVidWcoIk9EYXRhTW9kZWwgZmlyZWQgYW5ub3RhdGlvbnNmYWlsZWQiKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuYXR0YWNoQW5ub3RhdGlvbnNGYWlsZWQ9ZnVuY3Rpb24oRCxGLGwpe3RoaXMuYXR0YWNoRXZlbnQoImFubm90YXRpb25zRmFpbGVkIixELEYsbCk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmRldGFjaEFubm90YXRpb25zRmFpbGVkPWZ1bmN0aW9uKEYsbCl7dGhpcy5kZXRhY2hFdmVudCgiYW5ub3RhdGlvbnNGYWlsZWQiLEYsbCk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmZpcmVNZXRhZGF0YUxvYWRlZD1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudCgibWV0YWRhdGFMb2FkZWQiLEEpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5hdHRhY2hNZXRhZGF0YUxvYWRlZD1mdW5jdGlvbihELEYsbCl7dGhpcy5hdHRhY2hFdmVudCgibWV0YWRhdGFMb2FkZWQiLEQsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuZGV0YWNoTWV0YWRhdGFMb2FkZWQ9ZnVuY3Rpb24oRixsKXt0aGlzLmRldGFjaEV2ZW50KCJtZXRhZGF0YUxvYWRlZCIsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuZmlyZU1ldGFkYXRhRmFpbGVkPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJtZXRhZGF0YUZhaWxlZCIsQSk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmF0dGFjaE1ldGFkYXRhRmFpbGVkPWZ1bmN0aW9uKEQsRixsKXt0aGlzLmF0dGFjaEV2ZW50KCJtZXRhZGF0YUZhaWxlZCIsRCxGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5kZXRhY2hNZXRhZGF0YUZhaWxlZD1mdW5jdGlvbihGLGwpe3RoaXMuZGV0YWNoRXZlbnQoIm1ldGFkYXRhRmFpbGVkIixGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5fY3JlYXRlUmVxdWVzdFVybD1mdW5jdGlvbihwLG8sdSxCLGgpe3ZhciBpLHIscyxqPSIiO2lmKHAmJnAuaW5kZXhPZignPycpIT0tMSl7cz1wLnN1YnN0cihwLmluZGV4T2YoJz8nKSsxKTtwPXAuc3Vic3RyKDAscC5pbmRleE9mKCc/JykpfXI9dGhpcy5fbm9ybWFsaXplUGF0aChwLG8pO2lmKCFCKXtqPXRoaXMuc1NlcnZpY2VVcmwrcn1lbHNle2o9ci5zdWJzdHIoci5pbmRleE9mKCcvJykrMSl9aT1PLl9jcmVhdGVVcmxQYXJhbXNBcnJheSh1KTtpZih0aGlzLnNVcmxQYXJhbXMpe2kucHVzaCh0aGlzLnNVcmxQYXJhbXMpfWlmKHMpe2kucHVzaChzKX1pZihpLmxlbmd0aD4wKXtqKz0iPyIraS5qb2luKCImIil9aWYoaD09PXVuZGVmaW5lZCl7aD10cnVlfWlmKGg9PT1mYWxzZSl7dmFyIHQ9cS5ub3coKTt2YXIgaz1qLnJlcGxhY2UoLyhbPyZdKV89W14mXSovLCIkMV89Iit0KTtqPWsrKChrPT09aik/KC9cPy8udGVzdChqKT8iJiI6Ij8iKSsiXz0iK3Q6IiIpfXJldHVybiBqfTtnLnByb3RvdHlwZS5fbG9hZERhdGE9ZnVuY3Rpb24ocCxQLHMsRSxoLEgsaSl7dmFyIHIsUixvLHQ9dGhpcztmdW5jdGlvbiBfKEQsbSl7dmFyIG49RCx2PXt9O2lmKCFuKXtxLnNhcC5sb2cuZmF0YWwoIlRoZSBmb2xsb3dpbmcgcHJvYmxlbSBvY2N1cnJlZDogTm8gZGF0YSB3YXMgcmV0cmlldmVkIGJ5IHNlcnZpY2U6ICIrbS5yZXF1ZXN0VXJpKTt0LmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6by5yZXF1ZXN0VXJpLHR5cGU6IkdFVCIsYXN5bmM6by5hc3luYyxpbmZvOiJBY2NlcHQgaGVhZGVyczoiK3Qub0hlYWRlcnNbIkFjY2VwdCJdLGluZm9PYmplY3Q6e2FjY2VwdEhlYWRlcnM6dC5vSGVhZGVyc1siQWNjZXB0Il19LHN1Y2Nlc3M6ZmFsc2V9KTtyZXR1cm4gZmFsc2V9aWYodC5iVXNlQmF0Y2gpe3ZhciB3PXQuX2dldEJhdGNoRXJyb3JzKEQpO2lmKHcubGVuZ3RoPjApe2ood1swXSk7cmV0dXJuIGZhbHNlfWlmKG4uX19iYXRjaFJlc3BvbnNlcyYmbi5fX2JhdGNoUmVzcG9uc2VzLmxlbmd0aD4wKXtuPW4uX19iYXRjaFJlc3BvbnNlc1swXS5kYXRhfWVsc2V7cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IE5vIGRhdGEgd2FzIHJldHJpZXZlZCBieSBzZXJ2aWNlOiAiK20ucmVxdWVzdFVyaSl9fWw9bC5jb25jYXQobi5yZXN1bHRzKTtpZihuLl9fbmV4dCl7dmFyIHg9bmV3IFVSSShuLl9fbmV4dCk7Uj14LmFic29sdXRlVG8obS5yZXF1ZXN0VXJpKS50b1N0cmluZygpO1IrPXQuc1VybFBhcmFtcz8nJicrdC5zVXJsUGFyYW1zOicnO28ucmVxdWVzdFVyaT1SO2sobyl9ZWxzZXtxLmV4dGVuZChuLnJlc3VsdHMsbCk7aWYobi5yZXN1bHRzJiYhcS5pc0FycmF5KG4ucmVzdWx0cykpe249bi5yZXN1bHRzfXQuX2ltcG9ydERhdGEobix2KTtpZih0LnNDaGFuZ2VLZXkmJnYpe3ZhciB5PXQuc0NoYW5nZUtleS5zdWJzdHIodC5zQ2hhbmdlS2V5Lmxhc3RJbmRleE9mKCcvJykrMSk7aWYodlt5XSl7ZGVsZXRlIHQub1JlcXVlc3RRdWV1ZVt0LnNDaGFuZ2VLZXldO3Quc0NoYW5nZUtleT1udWxsfX1pZihzKXtzKG4pfXQuY2hlY2tVcGRhdGUoZmFsc2Usdik7aWYoaSl7aSgpfXQuZmlyZVJlcXVlc3RDb21wbGV0ZWQoe3VybDpvLnJlcXVlc3RVcmksdHlwZToiR0VUIixhc3luYzpvLmFzeW5jLGluZm86IkFjY2VwdCBoZWFkZXJzOiIrdC5vSGVhZGVyc1siQWNjZXB0Il0saW5mb09iamVjdDp7YWNjZXB0SGVhZGVyczp0Lm9IZWFkZXJzWyJBY2NlcHQiXX0sc3VjY2Vzczp0cnVlfSl9fWZ1bmN0aW9uIGoobSl7aWYodC5iVG9rZW5IYW5kbGluZyYmbS5yZXNwb25zZSl7dmFyIFQ9dC5fZ2V0SGVhZGVyKCJ4LWNzcmYtdG9rZW4iLG0ucmVzcG9uc2UuaGVhZGVycyk7aWYoIW8uYlRva2VuUmVzZXQmJm0ucmVzcG9uc2Uuc3RhdHVzQ29kZT09JzQwMycmJlQmJlQudG9Mb3dlckNhc2UoKT09InJlcXVpcmVkIil7dC5yZXNldFNlY3VyaXR5VG9rZW4oKTtvLmJUb2tlblJlc2V0PXRydWU7aygpO3JldHVybn19dmFyIG49dC5faGFuZGxlRXJyb3IobSk7aWYoRSl7RShtLHImJnIuYkFib3J0ZWQpfXQuZmlyZVJlcXVlc3RDb21wbGV0ZWQoe3VybDpvLnJlcXVlc3RVcmksdHlwZToiR0VUIixhc3luYzpvLmFzeW5jLGluZm86IkFjY2VwdCBoZWFkZXJzOiIrdC5vSGVhZGVyc1siQWNjZXB0Il0saW5mb09iamVjdDp7YWNjZXB0SGVhZGVyczp0Lm9IZWFkZXJzWyJBY2NlcHQiXX0sc3VjY2VzczpmYWxzZSxlcnJvcm9iamVjdDpufSk7aWYoIXJ8fCFyLmJBYm9ydGVkKXt0LmZpcmVSZXF1ZXN0RmFpbGVkKG4pfX1mdW5jdGlvbiBrKCl7aWYodC5iVXNlQmF0Y2gpe3QudXBkYXRlU2VjdXJpdHlUb2tlbigpO3ZhciBtPVVSSS5wYXJzZShvLnJlcXVlc3RVcmkpLnF1ZXJ5O3ZhciBuPXQuX2NyZWF0ZVJlcXVlc3RVcmwocCxudWxsLG0sdC5iVXNlQmF0Y2gpO289dC5fY3JlYXRlUmVxdWVzdChuLCJHRVQiLHRydWUpO3ZhciBCPXQuX2NyZWF0ZUJhdGNoUmVxdWVzdChbb10sdHJ1ZSk7cj10Ll9yZXF1ZXN0KEIsXyxqLE9EYXRhLmJhdGNoSGFuZGxlcix1bmRlZmluZWQsdC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl9ZWxzZXtyPXQuX3JlcXVlc3QobyxfLGosdC5vSGFuZGxlcix1bmRlZmluZWQsdC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl9aWYoSCl7dmFyIHc9e2Fib3J0OmZ1bmN0aW9uKCl7ci5iQWJvcnRlZD10cnVlO3IuYWJvcnQoKX19O0godyl9fXZhciBsPVtdO3ZhciB1PXRoaXMuX2NyZWF0ZVJlcXVlc3RVcmwocCxudWxsLFAsbnVsbCxofHx0aGlzLmJDYWNoZSk7bz10aGlzLl9jcmVhdGVSZXF1ZXN0KHUsIkdFVCIsdHJ1ZSk7dGhpcy5maXJlUmVxdWVzdFNlbnQoe3VybDpvLnJlcXVlc3RVcmksdHlwZToiR0VUIixhc3luYzpvLmFzeW5jLGluZm86IkFjY2VwdCBoZWFkZXJzOiIrdGhpcy5vSGVhZGVyc1siQWNjZXB0Il0saW5mb09iamVjdDp7YWNjZXB0SGVhZGVyczp0aGlzLm9IZWFkZXJzWyJBY2NlcHQiXX19KTtrKCl9O2cucHJvdG90eXBlLl9pbXBvcnREYXRhPWZ1bmN0aW9uKEQsayl7dmFyIHQ9dGhpcyxsLEsscixFO2lmKEQucmVzdWx0cyl7bD1bXTtxLmVhY2goRC5yZXN1bHRzLGZ1bmN0aW9uKGksaCl7bC5wdXNoKHQuX2ltcG9ydERhdGEoaCxrKSl9KTtyZXR1cm4gbH1lbHNle0s9dGhpcy5fZ2V0S2V5KEQpO0U9dGhpcy5vRGF0YVtLXTtpZighRSl7RT1EO3RoaXMub0RhdGFbS109RX1xLmVhY2goRCxmdW5jdGlvbihuLHApe2lmKHAmJihwLl9fbWV0YWRhdGEmJnAuX19tZXRhZGF0YS51cml8fHAucmVzdWx0cykmJiFwLl9fZGVmZXJyZWQpe3I9dC5faW1wb3J0RGF0YShwLGspO2lmKHEuaXNBcnJheShyKSl7RVtuXT17X19saXN0OnJ9fWVsc2V7RVtuXT17X19yZWY6cn19fWVsc2UgaWYoIXB8fCFwLl9fZGVmZXJyZWQpe0Vbbl09cH19KTtrW0tdPXRydWU7cmV0dXJuIEt9fTtnLnByb3RvdHlwZS5fcmVtb3ZlUmVmZXJlbmNlcz1mdW5jdGlvbihEKXt2YXIgdD10aGlzLGw7aWYoRC5yZXN1bHRzKXtsPVtdO3EuZWFjaChELnJlc3VsdHMsZnVuY3Rpb24oaSxoKXtsLnB1c2godC5fcmVtb3ZlUmVmZXJlbmNlcyhoKSl9KTtyZXR1cm4gbH1lbHNle3EuZWFjaChELGZ1bmN0aW9uKHAsbyl7aWYobyl7aWYob1siX19yZWYiXXx8b1siX19saXN0Il0pe2RlbGV0ZSBEW3BdfX19KTtyZXR1cm4gRH19O2cucHJvdG90eXBlLl9yZXN0b3JlUmVmZXJlbmNlcz1mdW5jdGlvbihEKXt2YXIgdD10aGlzLG8sbCxyPVtdO2lmKEQucmVzdWx0cyl7bD1bXTtxLmVhY2goRC5yZXN1bHRzLGZ1bmN0aW9uKGksaCl7bC5wdXNoKHQuX3Jlc3RvcmVSZWZlcmVuY2VzKGgpKX0pO3JldHVybiBsfWVsc2V7cS5lYWNoKEQsZnVuY3Rpb24ocCxvKXtpZihvJiZvWyJfX3JlZiJdKXt2YXIgaD10Ll9nZXRPYmplY3QoIi8iK29bIl9fcmVmIl0pO2lmKGgpe2RlbGV0ZSBvWyJfX3JlZiJdO0RbcF09aDt0Ll9yZXN0b3JlUmVmZXJlbmNlcyhoKX19ZWxzZSBpZihvJiZvWyJfX2xpc3QiXSl7cS5lYWNoKG9bIl9fbGlzdCJdLGZ1bmN0aW9uKGosRSl7dmFyIGg9dC5fZ2V0T2JqZWN0KCIvIitvWyJfX2xpc3QiXVtqXSk7aWYoaCl7ci5wdXNoKGgpO3QuX3Jlc3RvcmVSZWZlcmVuY2VzKGgpfX0pO2RlbGV0ZSBvWyJfX2xpc3QiXTtvLnJlc3VsdHM9cjtyPVtdfX0pO3JldHVybiBEfX07Zy5wcm90b3R5cGUucmVtb3ZlRGF0YT1mdW5jdGlvbigpe3RoaXMub0RhdGE9e319O2cucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXt2YXIgQj10aGlzLmFCaW5kaW5ncy5zbGljZSgwKTtxLmVhY2goQixmdW5jdGlvbihpLG8pe28uaW5pdGlhbGl6ZSgpfSl9O2cucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oRixtLEUpe3ZhciBCPXRoaXMuYUJpbmRpbmdzLnNsaWNlKDApO3EuZWFjaChCLGZ1bmN0aW9uKGksbyl7by5yZWZyZXNoKEYsbSxFKX0pfTtnLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihGLG0pe3ZhciBCPXRoaXMuYUJpbmRpbmdzLnNsaWNlKDApO3EuZWFjaChCLGZ1bmN0aW9uKGksbyl7by5jaGVja1VwZGF0ZShGLG0pfSl9O2cucHJvdG90eXBlLmJpbmRQcm9wZXJ0eT1mdW5jdGlvbihwLG8sUCl7dmFyIEI9bmV3IGQodGhpcyxwLG8sUCk7cmV0dXJuIEJ9O2cucHJvdG90eXBlLmJpbmRMaXN0PWZ1bmN0aW9uKHAsbyxzLEYsUCl7dmFyIEI9bmV3IGIodGhpcyxwLG8scyxGLFApO3JldHVybiBCfTtnLnByb3RvdHlwZS5iaW5kVHJlZT1mdW5jdGlvbihwLG8sRixQKXt2YXIgQj1uZXcgZSh0aGlzLHAsbyxGLFApO3JldHVybiBCfTtnLnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nQ29udGV4dD1mdW5jdGlvbihwLG8sUCxoLHIpe3ZhciByPSEhcixGPXRoaXMucmVzb2x2ZShwLG8pO2lmKHR5cGVvZiBvPT0iZnVuY3Rpb24iKXtoPW87bz1udWxsfWlmKHR5cGVvZiBQPT0iZnVuY3Rpb24iKXtoPVA7UD1udWxsfXZhciBEPXRoaXMuX2dldE9iamVjdChwLG8pLGssbix0PXRoaXM7aWYoIXIpe3I9dGhpcy5faXNSZWxvYWROZWVkZWQoRixELFApfWlmKCFyKXtrPXRoaXMuX2dldEtleShEKTtuPXRoaXMuZ2V0Q29udGV4dCgnLycrayk7aChuKX1lbHNle3ZhciBpPSFxLnNhcC5zdGFydHNXaXRoKHAsIi8iKTtpZihGKXt2YXIgaj1bXSxzPXRoaXMuY3JlYXRlQ3VzdG9tUGFyYW1zKFApO2lmKHMpe2oucHVzaChzKX10aGlzLl9sb2FkRGF0YShGLGosZnVuY3Rpb24oRCl7az1EP3QuX2dldEtleShEKTp1bmRlZmluZWQ7aWYoayYmbyYmaSl7dmFyIGw9by5nZXRQYXRoKCk7bD1sLnN1YnN0cigxKTtpZih0Lm9EYXRhW2xdKXt0Lm9EYXRhW2xdW3BdPXtfX3JlZjprfX19bj10LmdldENvbnRleHQoJy8nK2spO2gobil9LGZ1bmN0aW9uKCl7aChudWxsKX0pfWVsc2V7aChudWxsKX19fTtnLnByb3RvdHlwZS5faXNSZWxvYWROZWVkZWQ9ZnVuY3Rpb24oRixELHApe3ZhciBuLE49W10scyxTPVtdO2lmKCFEKXtyZXR1cm4gdHJ1ZX1pZihwJiZwWyJleHBhbmQiXSl7bj1wWyJleHBhbmQiXS5yZXBsYWNlKC9ccy9nLCIiKTtOPW4uc3BsaXQoJywnKX1pZihwJiZwWyJzZWxlY3QiXSl7cz1wWyJzZWxlY3QiXS5yZXBsYWNlKC9ccy9nLCIiKTtTPXMuc3BsaXQoJywnKX1mb3IodmFyIGk9MDtpPE4ubGVuZ3RoO2krKyl7aWYoRFtOW2ldXT09PXVuZGVmaW5lZHx8KERbTltpXV0mJkRbTltpXV0uX19kZWZlcnJlZCkpe3JldHVybiB0cnVlfX1mb3IodmFyIGk9MDtpPFMubGVuZ3RoO2krKyl7aWYoRFtTW2ldXT09PXVuZGVmaW5lZCl7cmV0dXJuIHRydWV9fWlmKFMubGVuZ3RoPT0wKXt2YXIgRT10aGlzLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChGKTtpZighRSl7cmV0dXJuIGZhbHNlfWVsc2V7Zm9yKHZhciBpPTA7aTxFLnByb3BlcnR5Lmxlbmd0aDtpKyspe2lmKERbRS5wcm9wZXJ0eVtpXS5uYW1lXT09PXVuZGVmaW5lZCl7cmV0dXJuIHRydWV9fX19cmV0dXJuIGZhbHNlfTtnLnByb3RvdHlwZS5kZXN0cm95QmluZGluZ0NvbnRleHQ9ZnVuY3Rpb24obyl7fTtnLnByb3RvdHlwZS5jcmVhdGVDdXN0b21QYXJhbXM9ZnVuY3Rpb24ocCl7dmFyIGg9W10sbSxzPXtleHBhbmQ6dHJ1ZSxzZWxlY3Q6dHJ1ZX07Zm9yKHZhciBuIGluIHApe2lmKG4gaW4gcyl7aC5wdXNoKCIkIituKyI9IitxLnNhcC5lbmNvZGVVUkwocFtuXSkpfWlmKG49PSJjdXN0b20iKXttPXBbbl07Zm9yKHZhciBuIGluIG0pe2lmKG4uaW5kZXhPZigiJCIpPT0wKXtxLnNhcC5sb2cud2FybmluZygiVHJ5aW5nIHRvIHNldCBPRGF0YSBwYXJhbWV0ZXIgIituKyIgYXMgY3VzdG9tIHF1ZXJ5IG9wdGlvbiEiKX1lbHNle2gucHVzaChuKyI9IitxLnNhcC5lbmNvZGVVUkwobVtuXSkpfX19fXJldHVybiBoLmpvaW4oIiYiKX07Zy5wcm90b3R5cGUuYmluZENvbnRleHQ9ZnVuY3Rpb24ocCxvLFApe3ZhciBCPW5ldyBhKHRoaXMscCxvLFApO3JldHVybiBCfTtnLnByb3RvdHlwZS5zZXRDb3VudFN1cHBvcnRlZD1mdW5jdGlvbihoKXt0aGlzLmJDb3VudFN1cHBvcnRlZD1ofTtnLnByb3RvdHlwZS5pc0NvdW50U3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYkNvdW50U3VwcG9ydGVkfTtnLnByb3RvdHlwZS5zZXREZWZhdWx0Q291bnRNb2RlPWZ1bmN0aW9uKHMpe3RoaXMuc0RlZmF1bHRDb3VudE1vZGU9c307Zy5wcm90b3R5cGUuZ2V0RGVmYXVsdENvdW50TW9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNEZWZhdWx0Q291bnRNb2RlfTtnLnByb3RvdHlwZS5fZ2V0S2V5PWZ1bmN0aW9uKG8pe3ZhciBrLHU7aWYobyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Db250ZXh0KXtrPW8uZ2V0UGF0aCgpLnN1YnN0cigxKX1lbHNlIGlmKG8mJm8uX19tZXRhZGF0YSYmby5fX21ldGFkYXRhLnVyaSl7dT1vLl9fbWV0YWRhdGEudXJpO2s9dS5zdWJzdHIodS5sYXN0SW5kZXhPZigiLyIpKzEpfXJldHVybiBrfTtnLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihwLG8saSl7dmFyIHY9dGhpcy5fZ2V0T2JqZWN0KHAsbyk7aWYoaT09bnVsbHx8aT09dW5kZWZpbmVkKXtyZXR1cm4gdn1pZighcS5pc1BsYWluT2JqZWN0KHYpKXtyZXR1cm4gdn12PXEuZXh0ZW5kKHRydWUse30sdik7aWYoaT09dHJ1ZSl7cmV0dXJuIHRoaXMuX3Jlc3RvcmVSZWZlcmVuY2VzKHYpfWVsc2V7cmV0dXJuIHRoaXMuX3JlbW92ZVJlZmVyZW5jZXModil9fTtnLnByb3RvdHlwZS5fZ2V0T2JqZWN0PWZ1bmN0aW9uKHAsbyl7dmFyIG49dGhpcy5pc0xlZ2FjeVN5bnRheCgpP3RoaXMub0RhdGE6bnVsbCxyLGs7aWYodGhpcy5vTWV0YWRhdGEmJnAmJnAuaW5kZXhPZignIycpPi0xKXtyPXRoaXMucmVzb2x2ZShwLG8pO2lmKHIpe249dGhpcy5vTWV0YWRhdGEuX2dldEFubm90YXRpb24ocil9fWVsc2V7aWYobyl7az1vLmdldFBhdGgoKTtrPWsuc3Vic3RyKDEpO249dGhpcy5vRGF0YVtrXX1pZighcCl7cmV0dXJuIG59dmFyIFA9cC5zcGxpdCgiLyIpLGk9MDtpZighUFswXSl7bj10aGlzLm9EYXRhO2krK313aGlsZShuJiZQW2ldKXtuPW5bUFtpXV07aWYobil7aWYobi5fX3JlZil7bj10aGlzLm9EYXRhW24uX19yZWZdfWVsc2UgaWYobi5fX2xpc3Qpe249bi5fX2xpc3R9ZWxzZSBpZihuLl9fZGVmZXJyZWQpe249bnVsbH19aSsrfX1yZXR1cm4gbn07Zy5wcm90b3R5cGUudXBkYXRlU2VjdXJpdHlUb2tlbj1mdW5jdGlvbigpe2lmKHRoaXMuYlRva2VuSGFuZGxpbmcpe2lmKCF0aGlzLm9TZXJ2aWNlRGF0YS5zZWN1cml0eVRva2VuKXt0aGlzLnJlZnJlc2hTZWN1cml0eVRva2VuKCl9aWYodGhpcy5iVG9rZW5IYW5kbGluZyl7dGhpcy5vSGVhZGVyc1sieC1jc3JmLXRva2VuIl09dGhpcy5vU2VydmljZURhdGEuc2VjdXJpdHlUb2tlbn19fTtnLnByb3RvdHlwZS5yZXNldFNlY3VyaXR5VG9rZW49ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5vU2VydmljZURhdGEuc2VjdXJpdHlUb2tlbjtkZWxldGUgdGhpcy5vSGVhZGVyc1sieC1jc3JmLXRva2VuIl19O2cucHJvdG90eXBlLnJlZnJlc2hTZWN1cml0eVRva2VuPWZ1bmN0aW9uKHMsRSxBKXt2YXIgdD10aGlzLHUsVDtBPUE9PT10cnVlO3U9dGhpcy5fY3JlYXRlUmVxdWVzdFVybCgiLyIpO3ZhciByPXRoaXMuX2NyZWF0ZVJlcXVlc3QodSwiR0VUIixBKTtyLmhlYWRlcnNbIngtY3NyZi10b2tlbiJdPSJGZXRjaCI7ZnVuY3Rpb24gXyhELFIpe2lmKFIpe1Q9dC5fZ2V0SGVhZGVyKCJ4LWNzcmYtdG9rZW4iLFIuaGVhZGVycyk7aWYoVCl7dC5vU2VydmljZURhdGEuc2VjdXJpdHlUb2tlbj1UO3Qub0hlYWRlcnNbIngtY3NyZi10b2tlbiJdPVR9ZWxzZXt0LnJlc2V0U2VjdXJpdHlUb2tlbigpO3QuYlRva2VuSGFuZGxpbmc9ZmFsc2V9fWlmKHMpe3MoRCxSKX19ZnVuY3Rpb24gaChvKXt0LnJlc2V0U2VjdXJpdHlUb2tlbigpO3QuYlRva2VuSGFuZGxpbmc9ZmFsc2U7dC5faGFuZGxlRXJyb3Iobyk7aWYoRSl7RShvKX19cmV0dXJuIHRoaXMuX3JlcXVlc3QocixfLGgsdW5kZWZpbmVkLHVuZGVmaW5lZCx0aGlzLmdldFNlcnZpY2VNZXRhZGF0YSgpKX07Zy5wcm90b3R5cGUuX3N1Ym1pdFJlcXVlc3Q9ZnVuY3Rpb24ocixCLHMsRSxoLGkpe3ZhciB0PXRoaXMsUixtPXt9O2Z1bmN0aW9uIF8oRCxvKXtpZihCJiZoKXt2YXIgbD10Ll9nZXRCYXRjaEVycm9ycyhEKTtpZihsLmxlbmd0aD4wKXtqKGxbMF0pO3JldHVybiBmYWxzZX1pZihELl9fYmF0Y2hSZXNwb25zZXMmJkQuX19iYXRjaFJlc3BvbnNlcy5sZW5ndGg+MCl7Uj1ELl9fYmF0Y2hSZXNwb25zZXNbMF0uZGF0YTtpZighUiYmRC5fX2JhdGNoUmVzcG9uc2VzWzBdLl9fY2hhbmdlUmVzcG9uc2VzKXtSPUQuX19iYXRjaFJlc3BvbnNlc1swXS5fX2NoYW5nZVJlc3BvbnNlc1swXS5kYXRhfX1EPVJ9aWYoaSl7aWYoRCYmRC5fX2JhdGNoUmVzcG9uc2VzKXtxLmVhY2goRC5fX2JhdGNoUmVzcG9uc2VzLGZ1bmN0aW9uKEksbyl7aWYobyYmby5kYXRhKXt0Ll9pbXBvcnREYXRhKG8uZGF0YSxtKX19KX19dC5faGFuZGxlRVRhZyhyLG8sQik7dC5fdXBkYXRlUmVxdWVzdFF1ZXVlKHIsQik7aWYodC5faXNSZWZyZXNoTmVlZGVkKHIsbykpe3QucmVmcmVzaChmYWxzZSxyLmtleXMsci5lbnRpdHlUeXBlcyl9aWYocyl7cyhELG8pfX1mdW5jdGlvbiBqKG8pe2lmKHQuYlRva2VuSGFuZGxpbmcmJm8ucmVzcG9uc2Upe3ZhciBUPXQuX2dldEhlYWRlcigieC1jc3JmLXRva2VuIixvLnJlc3BvbnNlLmhlYWRlcnMpO2lmKCFyLmJUb2tlblJlc2V0JiZvLnJlc3BvbnNlLnN0YXR1c0NvZGU9PSc0MDMnJiZUJiZULnRvTG93ZXJDYXNlKCk9PSJyZXF1aXJlZCIpe3QucmVzZXRTZWN1cml0eVRva2VuKCk7ci5iVG9rZW5SZXNldD10cnVlO2soKTtyZXR1cm59fXQuX2hhbmRsZUVycm9yKG8pO2lmKEUpe0Uobyl9fWZ1bmN0aW9uIGsoKXtpZih0LmJUb2tlbkhhbmRsaW5nJiZyLm1ldGhvZCE9PSJHRVQiKXt0LnVwZGF0ZVNlY3VyaXR5VG9rZW4oKTtpZih0LmJUb2tlbkhhbmRsaW5nKXtyLmhlYWRlcnNbIngtY3NyZi10b2tlbiJdPXQub1NlcnZpY2VEYXRhLnNlY3VyaXR5VG9rZW59fWlmKEIpe3JldHVybiB0Ll9yZXF1ZXN0KHIsXyxqLE9EYXRhLmJhdGNoSGFuZGxlcix1bmRlZmluZWQsdC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl9ZWxzZXtyZXR1cm4gdC5fcmVxdWVzdChyLF8saix0Lm9IYW5kbGVyLHVuZGVmaW5lZCx0LmdldFNlcnZpY2VNZXRhZGF0YSgpKX19cmV0dXJuIGsoKX07Zy5wcm90b3R5cGUuX2NyZWF0ZUJhdGNoUmVxdWVzdD1mdW5jdGlvbihCLEEpe3ZhciB1LHIsbz17fSxwPXt9LGg9W10sSz17fSxFPXt9O3AuX19iYXRjaFJlcXVlc3RzPUI7dT10aGlzLnNTZXJ2aWNlVXJsKyIvJGJhdGNoIjtpZih0aGlzLnNVcmxQYXJhbXMpe3UrPSI/Iit0aGlzLnNVcmxQYXJhbXN9cS5leHRlbmQobyx0aGlzLm1DdXN0b21IZWFkZXJzLHRoaXMub0hlYWRlcnMpO2RlbGV0ZSBvWyJDb250ZW50LVR5cGUiXTtyPXtoZWFkZXJzOm8scmVxdWVzdFVyaTp1LG1ldGhvZDoiUE9TVCIsZGF0YTpwLHVzZXI6dGhpcy5zVXNlcixwYXNzd29yZDp0aGlzLnNQYXNzd29yZCxhc3luYzpBfTtpZihBKXtyLndpdGhDcmVkZW50aWFscz10aGlzLmJXaXRoQ3JlZGVudGlhbHN9cS5lYWNoKEIsZnVuY3Rpb24oaSxtKXtpZihtWyJfX2NoYW5nZVJlcXVlc3RzIl0pe3EuZWFjaChtWyJfX2NoYW5nZVJlcXVlc3RzIl0sZnVuY3Rpb24oaixuKXtpZihuLmtleXMmJm4ubWV0aG9kIT0iUE9TVCIpe3EuZWFjaChuLmtleXMsZnVuY3Rpb24oayxzKXtLW2tdPXN9KX1lbHNlIGlmKG4uZW50aXR5VHlwZXMmJm4ubWV0aG9kPT0iUE9TVCIpe3EuZWFjaChuLmVudGl0eVR5cGVzLGZ1bmN0aW9uKGwscyl7RVtsXT1zfSl9fSl9fSk7ci5rZXlzPUs7ci5lbnRpdHlUeXBlcz1FO3JldHVybiByfTtnLnByb3RvdHlwZS5faGFuZGxlRVRhZz1mdW5jdGlvbihyLFIsQil7dmFyIHUsRSxoLGssbCxtO2lmKEIpe2w9ci5kYXRhLl9fYmF0Y2hSZXF1ZXN0czttPVIuZGF0YS5fX2JhdGNoUmVzcG9uc2VzO2lmKG0mJmwpe2Zvcih2YXIgaT0wO2k8bC5sZW5ndGg7aSsrKXtoPWxbaV0uX19jaGFuZ2VSZXF1ZXN0cztpZihtW2ldKXtrPW1baV0uX19jaGFuZ2VSZXNwb25zZXM7aWYoaCYmayl7Zm9yKHZhciBqPTA7ajxoLmxlbmd0aDtqKyspe2lmKGhbal0ubWV0aG9kPT0iTUVSR0UifHxoW2pdLm1ldGhvZD09IlBVVCIpe3U9aFtqXS5yZXF1ZXN0VXJpLnJlcGxhY2UodGhpcy5zU2VydmljZVVybCsnLycsJycpO2lmKCFxLnNhcC5zdGFydHNXaXRoKHUsIi8iKSl7dT0iLyIrdX1FPXRoaXMuX2dldE9iamVjdCh1KTtpZihFJiZFLl9fbWV0YWRhdGEmJmtbal0uaGVhZGVycyYma1tqXS5oZWFkZXJzLkVUYWcpe0UuX19tZXRhZGF0YS5ldGFnPWtbal0uaGVhZGVycy5FVGFnfX19fX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJjb3VsZCBub3QgdXBkYXRlIEVUYWdzIGZvciBiYXRjaCByZXF1ZXN0OiBjb3JyZXNwb25kaW5nIHJlc3BvbnNlIGZvciByZXF1ZXN0IG1pc3NpbmciKX19fWVsc2V7cS5zYXAubG9nLndhcm5pbmcoImNvdWxkIG5vdCB1cGRhdGUgRVRhZ3MgZm9yIGJhdGNoIHJlcXVlc3Q6IG5vIGJhdGNoIHJlc3BvbnNlcy9yZXF1ZXN0cyBhdmFpbGFibGUiKX19ZWxzZXt1PXIucmVxdWVzdFVyaS5yZXBsYWNlKHRoaXMuc1NlcnZpY2VVcmwrJy8nLCcnKTtpZighcS5zYXAuc3RhcnRzV2l0aCh1LCIvIikpe3U9Ii8iK3V9RT10aGlzLl9nZXRPYmplY3QodSk7aWYoRSYmRS5fX21ldGFkYXRhJiZSLmhlYWRlcnMuRVRhZyl7RS5fX21ldGFkYXRhLmV0YWc9Ui5oZWFkZXJzLkVUYWd9fX07Zy5wcm90b3R5cGUuX2hhbmRsZUJhdGNoRXJyb3JzPWZ1bmN0aW9uKHIsRCl7dmFyIEU9W107RT10aGlzLl9nZXRCYXRjaEVycm9ycyhEKTt0aGlzLl9oYW5kbGVFVGFnKCl9O2cucHJvdG90eXBlLl9nZXRCYXRjaEVycm9ycz1mdW5jdGlvbihEKXt2YXIgRT1bXSxzO3EuZWFjaChELl9fYmF0Y2hSZXNwb25zZXMsZnVuY3Rpb24oaSxvKXtpZihvLm1lc3NhZ2Upe3M9IlRoZSBmb2xsb3dpbmcgcHJvYmxlbSBvY2N1cnJlZDogIitvLm1lc3NhZ2U7aWYoby5yZXNwb25zZSl7cys9by5yZXNwb25zZS5zdGF0dXNDb2RlKyIsIitvLnJlc3BvbnNlLnN0YXR1c1RleHQrIiwiK28ucmVzcG9uc2UuYm9keX1FLnB1c2gobyk7cS5zYXAubG9nLmZhdGFsKHMpfWlmKG8uX19jaGFuZ2VSZXNwb25zZXMpe3EuZWFjaChvLl9fY2hhbmdlUmVzcG9uc2VzLGZ1bmN0aW9uKGksaCl7aWYoaC5tZXNzYWdlKXtzPSJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6ICIraC5tZXNzYWdlO2lmKGgucmVzcG9uc2Upe3MrPWgucmVzcG9uc2Uuc3RhdHVzQ29kZSsiLCIraC5yZXNwb25zZS5zdGF0dXNUZXh0KyIsIitoLnJlc3BvbnNlLmJvZHl9RS5wdXNoKGgpO3Euc2FwLmxvZy5mYXRhbChzKX19KX19KTtyZXR1cm4gRX07Zy5wcm90b3R5cGUuX2hhbmRsZUVycm9yPWZ1bmN0aW9uKEUpe3ZhciBwPXt9LGgsdDt2YXIgcz0iVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiAiK0UubWVzc2FnZTtwLm1lc3NhZ2U9RS5tZXNzYWdlO2lmKEUucmVzcG9uc2Upe2lmKHRoaXMuYlRva2VuSGFuZGxpbmcpe3Q9dGhpcy5fZ2V0SGVhZGVyKCJ4LWNzcmYtdG9rZW4iLEUucmVzcG9uc2UuaGVhZGVycyk7aWYoRS5yZXNwb25zZS5zdGF0dXNDb2RlPT0nNDAzJyYmdCYmdC50b0xvd2VyQ2FzZSgpPT0icmVxdWlyZWQiKXt0aGlzLnJlc2V0U2VjdXJpdHlUb2tlbigpfX1zKz1FLnJlc3BvbnNlLnN0YXR1c0NvZGUrIiwiK0UucmVzcG9uc2Uuc3RhdHVzVGV4dCsiLCIrRS5yZXNwb25zZS5ib2R5O3Auc3RhdHVzQ29kZT1FLnJlc3BvbnNlLnN0YXR1c0NvZGU7cC5zdGF0dXNUZXh0PUUucmVzcG9uc2Uuc3RhdHVzVGV4dDtwLnJlc3BvbnNlVGV4dD1FLnJlc3BvbnNlLmJvZHl9cS5zYXAubG9nLmZhdGFsKHMpO3JldHVybiBwfTtnLnByb3RvdHlwZS5nZXREYXRhPWZ1bmN0aW9uKHAsbyxpKXtyZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eShwLG8saSl9O2cucHJvdG90eXBlLl9nZXRFVGFnPWZ1bmN0aW9uKHAsUCxFKXt2YXIgcyxoLGk7aWYoRSl7cz1FfWVsc2V7aWYoUCYmUC5fX21ldGFkYXRhKXtzPVAuX19tZXRhZGF0YS5ldGFnfWVsc2UgaWYocCl7aD1wLnJlcGxhY2UodGhpcy5zU2VydmljZVVybCsnLycsJycpO2k9aC5pbmRleE9mKCI/Iik7aWYoaT4tMSl7aD1oLnN1YnN0cigwLGkpfWlmKHRoaXMub0RhdGEuaGFzT3duUHJvcGVydHkoaCkpe3M9dGhpcy5nZXRQcm9wZXJ0eSgnLycraCsnL19fbWV0YWRhdGEvZXRhZycpfX19cmV0dXJuIHN9O2cucHJvdG90eXBlLl9jcmVhdGVSZXF1ZXN0PWZ1bmN0aW9uKHUsbSxBLHAsRSl7dmFyIG89e30scztxLmV4dGVuZChvLHRoaXMubUN1c3RvbUhlYWRlcnMsdGhpcy5vSGVhZGVycyk7cz10aGlzLl9nZXRFVGFnKHUscCxFKTtpZihzJiZtIT0iR0VUIil7b1siSWYtTWF0Y2giXT1zfWlmKHRoaXMuYkpTT04mJm0hPSJERUxFVEUiJiZ0aGlzLnNNYXhEYXRhU2VydmljZVZlcnNpb249PT0iMi4wIil7b1siQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL2pzb24ifWlmKG09PSJNRVJHRSImJiF0aGlzLmJVc2VCYXRjaCl7b1sieC1odHRwLW1ldGhvZCJdPSJNRVJHRSI7bT0iUE9TVCJ9dmFyIHI9e2hlYWRlcnM6byxyZXF1ZXN0VXJpOnUsbWV0aG9kOm0sdXNlcjp0aGlzLnNVc2VyLHBhc3N3b3JkOnRoaXMuc1Bhc3N3b3JkLGFzeW5jOkF9O2lmKHApe3IuZGF0YT1wfWlmKEEpe3Iud2l0aENyZWRlbnRpYWxzPXRoaXMuYldpdGhDcmVkZW50aWFsc31yZXR1cm4gcn07Zy5wcm90b3R5cGUuX2lzUmVmcmVzaE5lZWRlZD1mdW5jdGlvbihyLFIpe3ZhciBoPWZhbHNlLEUsaT1bXSx0PXRoaXM7aWYoIXRoaXMuYlJlZnJlc2hBZnRlckNoYW5nZSl7cmV0dXJuIGh9aWYoci5kYXRhJiZxLmlzQXJyYXkoci5kYXRhLl9fYmF0Y2hSZXF1ZXN0cykpe2lmKFIpe2k9dC5fZ2V0QmF0Y2hFcnJvcnMoUi5kYXRhKTtxLmVhY2goaSxmdW5jdGlvbihJLG8pe2lmKG8ucmVzcG9uc2UmJm8ucmVzcG9uc2Uuc3RhdHVzQ29kZT09IjQxMiIpe0U9by5yZXNwb25zZS5zdGF0dXNDb2RlO3JldHVybiBmYWxzZX19KTtpZighIUUpe3JldHVybiBmYWxzZX19cS5lYWNoKHIuZGF0YS5fX2JhdGNoUmVxdWVzdHMsZnVuY3Rpb24oSSxCKXtpZihxLmlzQXJyYXkoQi5fX2NoYW5nZVJlcXVlc3RzKSl7cS5lYWNoKEIuX19jaGFuZ2VSZXF1ZXN0cyxmdW5jdGlvbihJLG8pe2g9aHx8dC5faXNSZWZyZXNoTmVlZGVkKG8pO3JldHVybiFofSl9cmV0dXJuIWh9KX1lbHNle2lmKHIubWV0aG9kPT09IkdFVCIpe3JldHVybiBmYWxzZX1lbHNle2lmKFImJlIuc3RhdHVzQ29kZT09IjQxMiIpe2g9ZmFsc2V9ZWxzZXtoPXRydWV9fX1yZXR1cm4gaH07Zy5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHAsRCxQKXt2YXIgcyxFLG0scix1LG8saCxSLEIsaSxTLGssaixBPWZhbHNlO2lmKFAgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuQ29udGV4dHx8YXJndW1lbnRzLmxlbmd0aD4zKXtvPVA7cz1hcmd1bWVudHNbM107RT1hcmd1bWVudHNbNF07bT1hcmd1bWVudHNbNV19ZWxzZXtvPVAuY29udGV4dHx8UC5vQ29udGV4dDtzPVAuc3VjY2Vzc3x8UC5mblN1Y2Nlc3M7RT1QLmVycm9yfHxQLmZuRXJyb3I7aD1QLmVUYWd8fFAuc0VUYWc7bT10eXBlb2YoUC5tZXJnZSk9PSJ1bmRlZmluZWQiP1AuYk1lcmdlPT09dHJ1ZTpQLm1lcmdlPT09dHJ1ZTtBPXR5cGVvZihQLmFzeW5jKT09InVuZGVmaW5lZCI/UC5iQXN5bmM9PT10cnVlOlAuYXN5bmM9PT10cnVlO2o9UC51cmxQYXJhbWV0ZXJzfXU9dGhpcy5fY3JlYXRlUmVxdWVzdFVybChwLG8saix0aGlzLmJVc2VCYXRjaCk7aWYobSl7cj10aGlzLl9jcmVhdGVSZXF1ZXN0KHUsIk1FUkdFIixBLEQsaCl9ZWxzZXtyPXRoaXMuX2NyZWF0ZVJlcXVlc3QodSwiUFVUIixBLEQsaCl9cD10aGlzLl9ub3JtYWxpemVQYXRoKHAsbyk7Uz10aGlzLl9nZXRPYmplY3QocCk7ci5rZXlzPXt9O2lmKFMpe2s9dGhpcy5fZ2V0S2V5KFMpO3Iua2V5c1trXT10cnVlfWlmKHRoaXMuYlVzZUJhdGNoKXtCPXRoaXMuX2NyZWF0ZUJhdGNoUmVxdWVzdChbe19fY2hhbmdlUmVxdWVzdHM6W3JdfV0sQSk7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KEIsdGhpcy5iVXNlQmF0Y2gscyxFLHRydWUpfWVsc2V7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KHIsdGhpcy5iVXNlQmF0Y2gscyxFKX1yZXR1cm4gUn07Zy5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHAsRCxQKXt2YXIgcixCLHUsUixzLEUsbyxTLGgsQT1mYWxzZSxtO2lmKFAmJnR5cGVvZihQKT09Im9iamVjdCImJiEoUCBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Db250ZXh0KSl7bz1QLmNvbnRleHQ7Uz1QLnN1Y2Nlc3M7bT1QLnVybFBhcmFtZXRlcnM7aD1QLmVycm9yO0E9UC5hc3luYz09PXRydWV9ZWxzZXtvPVA7Uz1hcmd1bWVudHNbM107aD1hcmd1bWVudHNbNF19dT10aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKHAsbyxtLHRoaXMuYlVzZUJhdGNoKTtyPXRoaXMuX2NyZWF0ZVJlcXVlc3QodSwiUE9TVCIsQSxEKTtwPXRoaXMuX25vcm1hbGl6ZVBhdGgocCxvKTtFPXRoaXMub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKHApO3IuZW50aXR5VHlwZXM9e307aWYoRSl7ci5lbnRpdHlUeXBlc1tFLmVudGl0eVR5cGVdPXRydWV9aWYodGhpcy5iVXNlQmF0Y2gpe0I9dGhpcy5fY3JlYXRlQmF0Y2hSZXF1ZXN0KFt7X19jaGFuZ2VSZXF1ZXN0czpbcl19XSxBKTtSPXRoaXMuX3N1Ym1pdFJlcXVlc3QoQix0aGlzLmJVc2VCYXRjaCxTLGgsdHJ1ZSl9ZWxzZXtSPXRoaXMuX3N1Ym1pdFJlcXVlc3Qocix0aGlzLmJVc2VCYXRjaCxTLGgpfXJldHVybiBSfTtnLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24ocCxQKXt2YXIgbyxFLHMsUyxoLHIsdSxpLGssaixfLEIsUixsLG0sQT1mYWxzZSx0PXRoaXM7aWYoKFAmJlAgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuQ29udGV4dCl8fGFyZ3VtZW50c1syXSl7bz1QO1M9YXJndW1lbnRzWzJdO2g9YXJndW1lbnRzWzNdfWVsc2UgaWYoUCl7bz1QLmNvbnRleHR8fFAub0NvbnRleHQ7Uz1QLnN1Y2Nlc3N8fFAuZm5TdWNjZXNzO2g9UC5lcnJvcnx8UC5mbkVycm9yO2k9UC5lVGFnfHxQLnNFVGFnO2o9UC5wYXlsb2FkfHxQLm9QYXlsb2FkO0E9dHlwZW9mKFAuYXN5bmMpPT0idW5kZWZpbmVkIj9QLmJBc3luYz09PXRydWU6UC5hc3luYz09PXRydWU7bT1QLnVybFBhcmFtZXRlcnN9Xz1mdW5jdGlvbihELG4pe0U9dS5zdWJzdHIodS5sYXN0SW5kZXhPZignLycpKzEpO2lmKEUuaW5kZXhPZignPycpIT0tMSl7RT1FLnN1YnN0cigwLEUuaW5kZXhPZignPycpKX1kZWxldGUgdC5vRGF0YVtFXTtkZWxldGUgdC5tQ29udGV4dHNbIi8iK0VdO2lmKFMpe1MoRCxuKX19O3U9dGhpcy5fY3JlYXRlUmVxdWVzdFVybChwLG8sbSx0aGlzLmJVc2VCYXRjaCk7cj10aGlzLl9jcmVhdGVSZXF1ZXN0KHUsIkRFTEVURSIsQSxqLGkpO3A9dGhpcy5fbm9ybWFsaXplUGF0aChwLG8pO3M9dGhpcy5fZ2V0T2JqZWN0KHApO3Iua2V5cz17fTtpZihzKXtrPXRoaXMuX2dldEtleShzKTtyLmtleXNba109dHJ1ZX1pZih0aGlzLmJVc2VCYXRjaCl7Qj10aGlzLl9jcmVhdGVCYXRjaFJlcXVlc3QoW3tfX2NoYW5nZVJlcXVlc3RzOltyXX1dLEEpO1I9dGhpcy5fc3VibWl0UmVxdWVzdChCLHRoaXMuYlVzZUJhdGNoLF8saCx0cnVlKX1lbHNle1I9dGhpcy5fc3VibWl0UmVxdWVzdChyLHRoaXMuYlVzZUJhdGNoLF8saCl9cmV0dXJuIFJ9O2cucHJvdG90eXBlLmNhbGxGdW5jdGlvbj1mdW5jdGlvbihGLHApe3ZhciByLEIsdSxSLG8sUCxoLHMsRSxBLG09IkdFVCIsaT17fSx0PXRoaXM7aWYocCYmdHlwZW9mKHApPT0ib2JqZWN0Iil7bT1wLm1ldGhvZD9wLm1ldGhvZDptO1A9cC51cmxQYXJhbWV0ZXJzO2g9cC5jb250ZXh0O3M9cC5zdWNjZXNzO0U9cC5lcnJvcjtBPXAuYXN5bmM9PT10cnVlfWVsc2V7bT1wO1A9YXJndW1lbnRzWzJdO2g9YXJndW1lbnRzWzNdO3M9YXJndW1lbnRzWzRdO0U9YXJndW1lbnRzWzVdO0E9YXJndW1lbnRzWzZdPT09dHJ1ZX1vPXRoaXMub01ldGFkYXRhLl9nZXRGdW5jdGlvbkltcG9ydE1ldGFkYXRhKEYsbSk7aWYobyl7dT10aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKEYsaCxudWxsLHRoaXMuYlVzZUJhdGNoKTt2YXIgaj1VUkkodSk7aWYoby5wYXJhbWV0ZXIhPW51bGwpe3EuZWFjaChQLGZ1bmN0aW9uKGssbCl7dmFyIG49cS5ncmVwKG8ucGFyYW1ldGVyLGZ1bmN0aW9uKHcpe3JldHVybiB3Lm5hbWU9PWsmJncubW9kZT09IkluIn0pO2lmKG4hPW51bGwmJm4ubGVuZ3RoPjApe3ZhciB2PW5bMF07aVtrXT1PLmZvcm1hdFZhbHVlKGwsdi50eXBlKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJQYXJhbWV0ZXIgIitrKyIgaXMgbm90IGRlZmluZWQgZm9yIGZ1bmN0aW9uIGNhbGwgIitGKyIhIil9fSl9aWYobT09PSJHRVQiKXtyZXR1cm4gdC5yZWFkKEYsaCxpLHRydWUscyxFKX1lbHNle3EuZWFjaChpLGZ1bmN0aW9uKGssbCl7ai5hZGRRdWVyeShrLGwpfSk7cj10aGlzLl9jcmVhdGVSZXF1ZXN0KGoudG9TdHJpbmcoKSxtLEEpO2lmKHRoaXMuYlVzZUJhdGNoKXtCPXRoaXMuX2NyZWF0ZUJhdGNoUmVxdWVzdChbe19fY2hhbmdlUmVxdWVzdHM6W3JdfV0sQSk7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KEIsdGhpcy5iVXNlQmF0Y2gscyxFLHRydWUpfWVsc2V7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KHIsdGhpcy5iVXNlQmF0Y2gscyxFKX1yZXR1cm4gUn19fTtnLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHAsUCl7dmFyIHIsdSxSLEIsbyxtLEEscyxFLEYsUyxoLGksaixrLGwsdD10aGlzO2lmKFAmJnR5cGVvZihQKT09Im9iamVjdCImJiEoUCBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Db250ZXh0KSl7bz1QLmNvbnRleHQ7bT1QLnVybFBhcmFtZXRlcnM7QT1QLmFzeW5jIT09ZmFsc2U7cz1QLnN1Y2Nlc3M7RT1QLmVycm9yO0Y9UC5maWx0ZXJzO1M9UC5zb3J0ZXJzfWVsc2V7bz1QO209YXJndW1lbnRzWzJdO0E9YXJndW1lbnRzWzNdIT09ZmFsc2U7cz1hcmd1bWVudHNbNF07RT1hcmd1bWVudHNbNV19QT1BIT09ZmFsc2U7bD1PLl9jcmVhdGVVcmxQYXJhbXNBcnJheShtKTtpPU8uY3JlYXRlU29ydFBhcmFtcyhTKTtpZihpKXtsLnB1c2goaSl9O2lmKEYmJiF0aGlzLm9NZXRhZGF0YSl7cS5zYXAubG9nLmZhdGFsKCJUcmllZCB0byB1c2UgZmlsdGVycyBpbiByZWFkIG1ldGhvZCBiZWZvcmUgbWV0YWRhdGEgaXMgYXZhaWxhYmxlLiIpfWVsc2V7az10aGlzLl9ub3JtYWxpemVQYXRoKHAsbyk7aj10aGlzLm9NZXRhZGF0YSYmdGhpcy5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgoayk7aD1PLmNyZWF0ZUZpbHRlclBhcmFtcyhGLHRoaXMub01ldGFkYXRhLGopO2lmKGgpe2wucHVzaChoKX19dT10aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKHAsbyxsLHRoaXMuYlVzZUJhdGNoKTtyPXRoaXMuX2NyZWF0ZVJlcXVlc3QodSwiR0VUIixBKTtpZih0aGlzLmJVc2VCYXRjaCl7Qj10aGlzLl9jcmVhdGVCYXRjaFJlcXVlc3QoW3JdLEEpO1I9dGhpcy5fc3VibWl0UmVxdWVzdChCLHRoaXMuYlVzZUJhdGNoLHMsRSx0cnVlKX1lbHNle1I9dGhpcy5fc3VibWl0UmVxdWVzdChyLHRoaXMuYlVzZUJhdGNoLHMsRSl9cmV0dXJuIFJ9O2cucHJvdG90eXBlLmNyZWF0ZUJhdGNoT3BlcmF0aW9uPWZ1bmN0aW9uKHAsbSxELFApe3ZhciBvPXt9LEUscyxrLGg7cS5leHRlbmQobyx0aGlzLm1DdXN0b21IZWFkZXJzLHRoaXMub0hlYWRlcnMpO2lmKHEuc2FwLnN0YXJ0c1dpdGgocCwiLyIpKXtwPXAuc3Vic3RyKDEpfWlmKFApe0U9UC5zRVRhZ31pZihtIT0iR0VUIil7RT10aGlzLl9nZXRFVGFnKHAsRCxFKTtpZihFKXtvWyJJZi1NYXRjaCJdPUV9fWlmKHRoaXMuYkpTT04pe2lmKG0hPSJERUxFVEUiJiZtIT0iR0VUIiYmdGhpcy5zTWF4RGF0YVNlcnZpY2VWZXJzaW9uPT09IjIuMCIpe29bIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi9qc29uIn19ZWxzZXtvWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24vYXRvbSt4bWwifXZhciByPXtyZXF1ZXN0VXJpOnAsbWV0aG9kOm0udG9VcHBlckNhc2UoKSxoZWFkZXJzOm99O2lmKEQpe3IuZGF0YT1EfWlmKG0hPSJHRVQiJiZtIT0iUE9TVCIpe2lmKHAmJnAuaW5kZXhPZigiLyIpIT0wKXtwPScvJytwfXM9dGhpcy5fZ2V0T2JqZWN0KHApO2lmKHMpe2s9dGhpcy5fZ2V0S2V5KHMpO3Iua2V5cz17fTtyLmtleXNba109dHJ1ZX19ZWxzZSBpZihtPT0iUE9TVCIpe2g9dGhpcy5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgocCk7aWYoaCl7ci5lbnRpdHlUeXBlcz17fTtyLmVudGl0eVR5cGVzW2guZW50aXR5VHlwZV09dHJ1ZX19cmV0dXJuIHJ9O2cucHJvdG90eXBlLmFkZEJhdGNoUmVhZE9wZXJhdGlvbnM9ZnVuY3Rpb24ocil7aWYoIXEuaXNBcnJheShyKXx8ci5sZW5ndGg8PTApe3Euc2FwLmxvZy53YXJuaW5nKCJObyBhcnJheSB3aXRoIGJhdGNoIG9wZXJhdGlvbnMgcHJvdmlkZWQhIik7cmV0dXJuIGZhbHNlfXZhciB0PXRoaXM7cS5lYWNoKHIsZnVuY3Rpb24oaSxSKXtpZihSLm1ldGhvZCE9IkdFVCIpe3Euc2FwLmxvZy53YXJuaW5nKCJCYXRjaCBvcGVyYXRpb24gc2hvdWxkIGJlIGEgR0VUIG9wZXJhdGlvbiEiKTtyZXR1cm4gZmFsc2V9dC5hQmF0Y2hPcGVyYXRpb25zLnB1c2goUil9KX07Zy5wcm90b3R5cGUuYWRkQmF0Y2hDaGFuZ2VPcGVyYXRpb25zPWZ1bmN0aW9uKGgpe2lmKCFxLmlzQXJyYXkoaCl8fGgubGVuZ3RoPD0wKXtyZXR1cm4gZmFsc2V9cS5lYWNoKGgsZnVuY3Rpb24oaSxvKXtpZihvLm1ldGhvZCE9IlBPU1QiJiZvLm1ldGhvZCE9IlBVVCImJm8ubWV0aG9kIT0iTUVSR0UiJiZvLm1ldGhvZCE9IkRFTEVURSIpe3Euc2FwLmxvZy53YXJuaW5nKCJCYXRjaCBvcGVyYXRpb24gc2hvdWxkIGJlIGEgUE9TVC9QVVQvTUVSR0UvREVMRVRFIG9wZXJhdGlvbiEiKTtyZXR1cm4gZmFsc2V9fSk7dGhpcy5hQmF0Y2hPcGVyYXRpb25zLnB1c2goe19fY2hhbmdlUmVxdWVzdHM6aH0pfTtnLnByb3RvdHlwZS5jbGVhckJhdGNoPWZ1bmN0aW9uKCl7dGhpcy5hQmF0Y2hPcGVyYXRpb25zPVtdfTtnLnByb3RvdHlwZS5zdWJtaXRCYXRjaD1mdW5jdGlvbihzLEUsQSxpKXt2YXIgcix1LFIsdD10aGlzO2Z1bmN0aW9uIF8oRCxqKXtpZihzKXtzKEQsaix0Ll9nZXRCYXRjaEVycm9ycyhEKSl9fWlmKCEodHlwZW9mKHMpPT0iZnVuY3Rpb24iKSl7dmFyIG89QTt2YXIgaD1FO0E9cztzPWg7RT1vfUE9QSE9PWZhbHNlO2lmKHRoaXMuYUJhdGNoT3BlcmF0aW9ucy5sZW5ndGg8PTApe3Euc2FwLmxvZy53YXJuaW5nKCJObyBiYXRjaCBvcGVyYXRpb25zIGluIGJhdGNoLiBObyByZXF1ZXN0IHdpbGwgYmUgdHJpZ2dlcmVkISIpO3JldHVybiBmYWxzZX1yPXRoaXMuX2NyZWF0ZUJhdGNoUmVxdWVzdCh0aGlzLmFCYXRjaE9wZXJhdGlvbnMsQSk7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KHIsdHJ1ZSxfLEUsZmFsc2UsaSk7dGhpcy5jbGVhckJhdGNoKCk7cmV0dXJuIFJ9O2cucHJvdG90eXBlLmdldFNlcnZpY2VNZXRhZGF0YT1mdW5jdGlvbigpe2lmKHRoaXMub01ldGFkYXRhJiZ0aGlzLm9NZXRhZGF0YS5pc0xvYWRlZCgpKXtyZXR1cm4gdGhpcy5vTWV0YWRhdGEuZ2V0U2VydmljZU1ldGFkYXRhKCl9fTtnLnByb3RvdHlwZS5nZXRTZXJ2aWNlQW5ub3RhdGlvbnM9ZnVuY3Rpb24oKXtpZih0aGlzLm9Bbm5vdGF0aW9ucyYmdGhpcy5vQW5ub3RhdGlvbnMuZ2V0QW5ub3RhdGlvbnNEYXRhKXtyZXR1cm4gdGhpcy5vQW5ub3RhdGlvbnMuZ2V0QW5ub3RhdGlvbnNEYXRhKCl9fTtnLnByb3RvdHlwZS5zdWJtaXRDaGFuZ2VzPWZ1bmN0aW9uKHMsRSxwKXt2YXIgcixQLHQ9dGhpcyxoLGksVCxtLFMsaztpZih0aGlzLnNDaGFuZ2VLZXkpe2g9dGhpcy5zQ2hhbmdlS2V5LnJlcGxhY2UodGhpcy5zU2VydmljZVVybCwnJyk7Uz10aGlzLl9nZXRPYmplY3QoaCk7UD1TO2lmKHEuaXNQbGFpbk9iamVjdChTKSl7UD1xLmV4dGVuZCh0cnVlLHt9LFMpO2lmKFAuX19tZXRhZGF0YSl7VD1QLl9fbWV0YWRhdGEudHlwZTttPVAuX19tZXRhZGF0YS5ldGFnO2RlbGV0ZSBQLl9fbWV0YWRhdGE7aWYoVHx8bSl7UC5fX21ldGFkYXRhPXt9fWlmKFQpe1AuX19tZXRhZGF0YS50eXBlPVR9aWYoISFtKXtQLl9fbWV0YWRhdGEuZXRhZz1tfX1xLmVhY2goUCxmdW5jdGlvbihsLHUpe2lmKHUmJnUuX19kZWZlcnJlZCl7ZGVsZXRlIFBbbF19fSk7dmFyIG89dGhpcy5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgoaCk7aWYobyl7dmFyIG49dGhpcy5vTWV0YWRhdGEuX2dldE5hdmlnYXRpb25Qcm9wZXJ0eU5hbWVzKG8pO3EuZWFjaChuLGZ1bmN0aW9uKEksTil7ZGVsZXRlIFBbTl19KX1QPXRoaXMuX3JlbW92ZVJlZmVyZW5jZXMoUCl9aWYocCYmcC5zRVRhZyl7aT1wLnNFVGFnfXI9dGhpcy5fY3JlYXRlUmVxdWVzdCh0aGlzLnNDaGFuZ2VLZXksIk1FUkdFIix0cnVlLFAsaSk7aWYodGhpcy5zVXJsUGFyYW1zKXtyLnJlcXVlc3RVcmkrPSI/Iit0aGlzLnNVcmxQYXJhbXN9ci5rZXlzPXt9O2lmKFMpe2s9dGhpcy5fZ2V0S2V5KFMpO3Iua2V5c1trXT10cnVlfXRoaXMub1JlcXVlc3RRdWV1ZVt0aGlzLnNDaGFuZ2VLZXldPXJ9aWYocS5pc0VtcHR5T2JqZWN0KHRoaXMub1JlcXVlc3RRdWV1ZSkpe3JldHVybiB1bmRlZmluZWR9aWYodGhpcy5iVXNlQmF0Y2gpe3ZhciBqPVtdO3EuZWFjaCh0aGlzLm9SZXF1ZXN0UXVldWUsZnVuY3Rpb24oayxsKXtkZWxldGUgbC5fb1JlZjt2YXIgUj1xLmV4dGVuZCh0cnVlLHt9LGwpO2wuX29SZWY9UjtSLnJlcXVlc3RVcmk9Ui5yZXF1ZXN0VXJpLnJlcGxhY2UodC5zU2VydmljZVVybCsnLycsJycpO1IuZGF0YS5fYkNyZWF0ZT9kZWxldGUgUi5kYXRhLl9iQ3JlYXRlOmZhbHNlO2oucHVzaChSKX0pO3I9dGhpcy5fY3JlYXRlQmF0Y2hSZXF1ZXN0KFt7X19jaGFuZ2VSZXF1ZXN0czpqfV0sdHJ1ZSk7dGhpcy5fc3VibWl0UmVxdWVzdChyLHRoaXMuYlVzZUJhdGNoLHMsRSx0cnVlKX1lbHNle3EuZWFjaCh0aGlzLm9SZXF1ZXN0UXVldWUsZnVuY3Rpb24oayxsKXtkZWxldGUgbC5fb1JlZjt2YXIgUj1xLmV4dGVuZCh0cnVlLHt9LGwpO2wuX29SZWY9UjtpZihSLmRhdGEmJlIuZGF0YS5fYkNyZWF0ZSl7ZGVsZXRlIFIuZGF0YS5fYkNyZWF0ZX10Ll9zdWJtaXRSZXF1ZXN0KFIsdGhpcy5iVXNlQmF0Y2gscyxFLHRydWUpfSl9cmV0dXJuIHVuZGVmaW5lZH07Zy5wcm90b3R5cGUuX3VwZGF0ZVJlcXVlc3RRdWV1ZT1mdW5jdGlvbihyLEIpe3ZhciBoLGssbyx0PXRoaXM7aWYoQil7aD1yLmRhdGEuX19iYXRjaFJlcXVlc3RzO2lmKGgpe2Zvcih2YXIgaT0wO2k8aC5sZW5ndGg7aSsrKXtrPWhbaV0uX19jaGFuZ2VSZXF1ZXN0cztpZihrKXtmb3IodmFyIGo9MDtqPGsubGVuZ3RoO2orKyl7bz1rW2pdO3EuZWFjaCh0aGlzLm9SZXF1ZXN0UXVldWUsZnVuY3Rpb24oSyxsKXtpZihsLl9vUmVmPT09byYmSyE9PXQuc0NoYW5nZUtleSl7ZGVsZXRlIHQub1JlcXVlc3RRdWV1ZVtLXTtkZWxldGUgdC5vRGF0YVtLXTtkZWxldGUgdC5tQ29udGV4dHNbIi8iK0tdfWVsc2UgaWYodC5zQ2hhbmdlS2V5JiZLPT09dC5zQ2hhbmdlS2V5KXtkZWxldGUgdC5vUmVxdWVzdFF1ZXVlW0tdO3Quc0NoYW5nZUtleT1udWxsfX0pfX19fX1lbHNle3EuZWFjaCh0aGlzLm9SZXF1ZXN0UXVldWUsZnVuY3Rpb24oSyxsKXtpZihsLl9vUmVmPT09ciYmSyE9PXQuc0NoYW5nZUtleSl7ZGVsZXRlIHQub1JlcXVlc3RRdWV1ZVtLXTtkZWxldGUgdC5vRGF0YVtLXTtkZWxldGUgdC5tQ29udGV4dHNbIi8iK0tdfWVsc2UgaWYodC5zQ2hhbmdlS2V5JiZLPT09dC5zQ2hhbmdlS2V5KXtkZWxldGUgdC5vUmVxdWVzdFF1ZXVlW0tdO3Quc0NoYW5nZUtleT1udWxsfX0pfX07Zy5wcm90b3R5cGUucmVzZXRDaGFuZ2VzPWZ1bmN0aW9uKHMsRSl7dmFyIHA7aWYodGhpcy5zQ2hhbmdlS2V5KXtwPXRoaXMuc0NoYW5nZUtleS5yZXBsYWNlKHRoaXMuc1NlcnZpY2VVcmwsJycpO3RoaXMuX2xvYWREYXRhKHAsbnVsbCxzLEUpfX07Zy5wcm90b3R5cGUuc2V0UHJvcGVydHk9ZnVuY3Rpb24ocCx2LG8pe3ZhciBQLEU9e30sRD17fSxzPXRoaXMuX2NyZWF0ZVJlcXVlc3RVcmwocCxvKSxoPXAuc3Vic3RyaW5nKDAscC5sYXN0SW5kZXhPZigiLyIpKSxrLGosbT17fSxsPWZhbHNlO2lmKCF0aGlzLnJlc29sdmUocCxvKSl7cmV0dXJuIGZhbHNlfXM9cy5yZXBsYWNlKHRoaXMuc1NlcnZpY2VVcmwrJy8nLCcnKTtzPXMuc3Vic3RyaW5nKDAscy5pbmRleE9mKCIvIikpO3M9dGhpcy5zU2VydmljZVVybCsnLycrcztQPXAuc3Vic3RyKHAubGFzdEluZGV4T2YoIi8iKSsxKTtEPXRoaXMuX2dldE9iamVjdChoLG8pO2lmKCFEKXtyZXR1cm4gZmFsc2V9aj1oLnNwbGl0KCIvIik7Zm9yKHZhciBpPWoubGVuZ3RoLTE7aT49MDtpLS0pe0U9dGhpcy5fZ2V0T2JqZWN0KGouam9pbigiLyIpLG8pO2lmKEUpe2s9dGhpcy5fZ2V0S2V5KEUpO2lmKGspe2JyZWFrfX1qLnNwbGljZShpLTEsMSl9aWYoIWspe2s9dGhpcy5fZ2V0S2V5KG8pfWlmKGspe21ba109dHJ1ZX1pZihELl9iQ3JlYXRlKXtEW1BdPXY7bD10cnVlO3RoaXMuY2hlY2tVcGRhdGUoZmFsc2UsbSl9ZWxzZXtpZighdGhpcy5zQ2hhbmdlS2V5KXt0aGlzLnNDaGFuZ2VLZXk9c31pZih0aGlzLnNDaGFuZ2VLZXk9PXMpe0RbUF09djtsPXRydWU7dGhpcy5jaGVja1VwZGF0ZShmYWxzZSxtKX1lbHNle3RoaXMuZmlyZVJlamVjdENoYW5nZSh7cmVqZWN0ZWRWYWx1ZTp2LG9sZFZhbHVlOkRbUF19KX19cmV0dXJuIGx9O2cucHJvdG90eXBlLl9pc0hlYWRlclByaXZhdGU9ZnVuY3Rpb24oaCl7c3dpdGNoKGgudG9Mb3dlckNhc2UoKSl7Y2FzZSJhY2NlcHQiOmNhc2UiYWNjZXB0LWxhbmd1YWdlIjpjYXNlIm1heGRhdGFzZXJ2aWNldmVyc2lvbiI6Y2FzZSJkYXRhc2VydmljZXZlcnNpb24iOnJldHVybiB0cnVlO2JyZWFrO2Nhc2UieC1jc3JmLXRva2VuIjpyZXR1cm4gdGhpcy5iVG9rZW5IYW5kbGluZzticmVhaztkZWZhdWx0OnJldHVybiBmYWxzZX19O2cucHJvdG90eXBlLnNldEhlYWRlcnM9ZnVuY3Rpb24oaCl7dmFyIG09e30sdD10aGlzO2lmKGgpe3EuZWFjaChoLGZ1bmN0aW9uKEgscyl7aWYodC5faXNIZWFkZXJQcml2YXRlKEgpKXtxLnNhcC5sb2cud2FybmluZygiTm90IGFsbG93ZWQgdG8gbW9kaWZ5IHByaXZhdGUgaGVhZGVyOiAiK0gpfWVsc2V7bVtIXT1zfX0pO3RoaXMubUN1c3RvbUhlYWRlcnM9bX1lbHNle3RoaXMubUN1c3RvbUhlYWRlcnM9e319fTtnLnByb3RvdHlwZS5nZXRIZWFkZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHEuZXh0ZW5kKHt9LHRoaXMubUN1c3RvbUhlYWRlcnMsdGhpcy5vSGVhZGVycyl9O2cucHJvdG90eXBlLl9nZXRIZWFkZXI9ZnVuY3Rpb24oRixoKXt2YXIgSDtmb3IoSCBpbiBoKXtpZihILnRvTG93ZXJDYXNlKCk9PT1GLnRvTG93ZXJDYXNlKCkpe3JldHVybiBoW0hdfX1yZXR1cm4gbnVsbH07Zy5wcm90b3R5cGUuaGFzUGVuZGluZ0NoYW5nZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zQ2hhbmdlS2V5IT1udWxsfTtnLnByb3RvdHlwZS51cGRhdGVCaW5kaW5ncz1mdW5jdGlvbihGKXt0aGlzLmNoZWNrVXBkYXRlKEYpfTtnLnByb3RvdHlwZS5mb3JjZU5vQ2FjaGU9ZnVuY3Rpb24oRil7dGhpcy5iQ2FjaGU9IUZ9O2cucHJvdG90eXBlLnNldFRva2VuSGFuZGxpbmdFbmFibGVkPWZ1bmN0aW9uKHQpe3RoaXMuYlRva2VuSGFuZGxpbmc9dH07Zy5wcm90b3R5cGUuc2V0VXNlQmF0Y2g9ZnVuY3Rpb24odSl7dGhpcy5iVXNlQmF0Y2g9dX07Zy5wcm90b3R5cGUuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odix0KXtyZXR1cm4gTy5mb3JtYXRWYWx1ZSh2LHQpfTtnLnByb3RvdHlwZS5kZWxldGVDcmVhdGVkRW50cnk9ZnVuY3Rpb24obyl7aWYobyl7dmFyIHA9by5nZXRQYXRoKCk7ZGVsZXRlIHRoaXMubUNvbnRleHRzW3BdO2lmKHEuc2FwLnN0YXJ0c1dpdGgocCwiLyIpKXtwPXAuc3Vic3RyKDEpfWRlbGV0ZSB0aGlzLm9SZXF1ZXN0UXVldWVbcF07ZGVsZXRlIHRoaXMub0RhdGFbcF19fTtnLnByb3RvdHlwZS5jcmVhdGVFbnRyeT1mdW5jdGlvbihwLFApe3ZhciBFPXt9LGssdSxyO2lmKCFxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSl7cD0iLyIrcH12YXIgbz10aGlzLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChwKTtpZighbyl7cmV0dXJuIHVuZGVmaW5lZH1pZih0eXBlb2YgUD09PSJvYmplY3QiJiYhcS5pc0FycmF5KFApKXtFPVB9ZWxzZXtmb3IodmFyIGk9MDtpPG8ucHJvcGVydHkubGVuZ3RoO2krKyl7dmFyIGg9by5wcm9wZXJ0eVtpXTt2YXIgdD1oLnR5cGUuc3BsaXQoJy4nKTt2YXIgaj1xLmluQXJyYXkoaC5uYW1lLFApPi0xO2lmKCFQfHxqKXtFW2gubmFtZV09dGhpcy5fY3JlYXRlUHJvcGVydHlWYWx1ZSh0KTtpZihqKXtQLnNwbGljZShQLmluZGV4T2YoaC5uYW1lKSwxKX19fWlmKFApe319RS5fYkNyZWF0ZT10cnVlO2s9cC5zdWJzdHJpbmcoMSkrIignIitxLnNhcC51aWQoKSsiJykiO3RoaXMub0RhdGFba109RTtFLl9fbWV0YWRhdGE9e3R5cGU6IiIrby5lbnRpdHlUeXBlfTt1PXRoaXMuX2NyZWF0ZVJlcXVlc3RVcmwocCk7cj10aGlzLl9jcmVhdGVSZXF1ZXN0KHUsIlBPU1QiLHRydWUsRSk7ci5lbnRpdHlUeXBlcz17fTtyLmVudGl0eVR5cGVzW28uZW50aXR5VHlwZV09dHJ1ZTt0aGlzLm9SZXF1ZXN0UXVldWVba109cjtyZXR1cm4gdGhpcy5nZXRDb250ZXh0KCIvIitrKX07Zy5wcm90b3R5cGUuX2NyZWF0ZVByb3BlcnR5VmFsdWU9ZnVuY3Rpb24odCl7dmFyIG49dFswXTt2YXIgVD10WzFdO2lmKG4udG9VcHBlckNhc2UoKSE9PSdFRE0nKXt2YXIgbz17fTt2YXIgaD10aGlzLm9NZXRhZGF0YS5fZ2V0T2JqZWN0TWV0YWRhdGEoImNvbXBsZXhUeXBlIixULG4pO2Zvcih2YXIgaT0wO2k8aC5wcm9wZXJ0eS5sZW5ndGg7aSsrKXt2YXIgcD1oLnByb3BlcnR5W2ldO3ZhciB0PXAudHlwZS5zcGxpdCgnLicpO29bcC5uYW1lXT10aGlzLl9jcmVhdGVQcm9wZXJ0eVZhbHVlKHQpfXJldHVybiBvfWVsc2V7cmV0dXJuIHRoaXMuX2dldERlZmF1bHRQcm9wZXJ0eVZhbHVlKFQsbil9fTtnLnByb3RvdHlwZS5fZ2V0RGVmYXVsdFByb3BlcnR5VmFsdWU9ZnVuY3Rpb24odCxuKXtyZXR1cm4gdW5kZWZpbmVkfTtnLnByb3RvdHlwZS5fbm9ybWFsaXplUGF0aD1mdW5jdGlvbihwLG8pe2lmKHAmJnAuaW5kZXhPZignPycpIT0tMSl7cD1wLnN1YnN0cigwLHAuaW5kZXhPZignPycpKX1pZighbyYmIXEuc2FwLnN0YXJ0c1dpdGgocCwiLyIpKXtwPScvJytwO3Euc2FwLmxvZy53YXJuaW5nKCJzUGF0aCBzaG91bGQgYmUgYWJzb2x1dGUgaWYgbm8gQ29udGV4dCBpcyBzZXQiKX1yZXR1cm4gdGhpcy5yZXNvbHZlKHAsbyl9O2cucHJvdG90eXBlLnNldFJlZnJlc2hBZnRlckNoYW5nZT1mdW5jdGlvbihyKXt0aGlzLmJSZWZyZXNoQWZ0ZXJDaGFuZ2U9cn07Zy5wcm90b3R5cGUuaXNMaXN0PWZ1bmN0aW9uKHAsbyl7dmFyIHA9dGhpcy5yZXNvbHZlKHAsbyk7cmV0dXJuIHAmJnAuc3Vic3RyKHAubGFzdEluZGV4T2YoIi8iKSkuaW5kZXhPZigiKCIpPT09LTF9O2cucHJvdG90eXBlLl9yZXF1ZXN0PWZ1bmN0aW9uKHIscyxFLGgsSCxtKXtpZih0aGlzLmJEZXN0cm95ZWQpe3JldHVybnthYm9ydDpmdW5jdGlvbigpe319fXZhciB0PXRoaXM7ZnVuY3Rpb24gdyhpKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgST1xLmluQXJyYXkoUix0LmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMpO2lmKEk+LTEpe3QuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcy5zcGxpY2UoSSwxKX1pZighKFImJlIuYlN1cHByZXNzRXJyb3JIYW5kbGVyQ2FsbCkpe2kuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19dmFyIFI9T0RhdGEucmVxdWVzdChyLHcoc3x8T0RhdGEuZGVmYXVsdFN1Y2Nlc3MpLHcoRXx8T0RhdGEuZGVmYXVsdEVycm9yKSxoLEgsbSk7aWYoci5hc3luYyE9PWZhbHNlKXt0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMucHVzaChSKX1yZXR1cm4gUn07Zy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKHRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcyl7Zm9yKHZhciBpPXRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcy5sZW5ndGgtMTtpPj0wO2ktLSl7dmFyIHI9dGhpcy5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzW2ldO2lmKHImJnIuYWJvcnQpe3IuYlN1cHByZXNzRXJyb3JIYW5kbGVyQ2FsbD10cnVlO3IuYWJvcnQoKX19ZGVsZXRlIHRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlc31pZighIXRoaXMub01ldGFkYXRhTG9hZEV2ZW50KXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMub01ldGFkYXRhTG9hZEV2ZW50KX1pZighIXRoaXMub01ldGFkYXRhRmFpbGVkRXZlbnQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5vTWV0YWRhdGFGYWlsZWRFdmVudCl9aWYodGhpcy5vTWV0YWRhdGEpe3RoaXMub01ldGFkYXRhLmRlc3Ryb3koKTtkZWxldGUgdGhpcy5vTWV0YWRhdGF9aWYodGhpcy5vQW5ub3RhdGlvbnMpe3RoaXMub0Fubm90YXRpb25zLmRlc3Ryb3koKTtkZWxldGUgdGhpcy5vQW5ub3RhdGlvbnN9TS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBnfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlTW9kZWwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VNb2RlbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9yZXNvdXJjZS9SZXNvdXJjZU1vZGVsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL01vZGVsJywnLi9SZXNvdXJjZVByb3BlcnR5QmluZGluZyddLGZ1bmN0aW9uKHEsTSxSKXsidXNlIHN0cmljdCI7dmFyIGE9TS5leHRlbmQoInNhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZU1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZCl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zRGVmYXVsdEJpbmRpbmdNb2RlPXNhcC51aS5tb2RlbC5CaW5kaW5nTW9kZS5PbmVUaW1lO3RoaXMubVN1cHBvcnRlZEJpbmRpbmdNb2Rlcz17Ik9uZVdheSI6ZmFsc2UsIlR3b1dheSI6ZmFsc2UsIk9uZVRpbWUiOnRydWV9O3RoaXMub0RhdGE9ZDtpZihkJiYoZC5idW5kbGVVcmx8fGQuYnVuZGxlTmFtZSkpe3RoaXMuUmVzb3VyY2VCdW5kbGU9dGhpcy5sb2FkUmVzb3VyY2VCdW5kbGUoZCl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIk5laXRoZXIgYnVuZGxlVXJsIG5vciBidW5kbGVOYW1lIGFyZSBnaXZlbi4gT25lIG9mIHRoZXNlIGlzIG1hbmRhdG9yeS4iKX19LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiZ2V0UmVzb3VyY2VCdW5kbGUiXX19KTthLnByb3RvdHlwZS5sb2FkUmVzb3VyY2VCdW5kbGU9ZnVuY3Rpb24oZCl7dmFyIGM9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkscix1LGwsaTtsPWQuYnVuZGxlTG9jYWxlO2lmKCFsKXtsPWMuZ2V0TGFuZ3VhZ2UoKX1pPWMuZ2V0T3JpZ2luSW5mbygpO3U9ZC5idW5kbGVVcmw7aWYoZC5idW5kbGVOYW1lKXt1PXEuc2FwLmdldE1vZHVsZVBhdGgoZC5idW5kbGVOYW1lLCcucHJvcGVydGllcycpfXI9cS5zYXAucmVzb3VyY2VzKHt1cmw6dSxsb2NhbGU6bCxpbmNsdWRlSW5mbzppfSk7cmV0dXJuIHJ9O2EucHJvdG90eXBlLmVuaGFuY2U9ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcy5sb2FkUmVzb3VyY2VCdW5kbGUoZCk7aWYoYyl7dGhpcy5SZXNvdXJjZUJ1bmRsZS5fZW5oYW5jZShjKX19O2EucHJvdG90eXBlLmJpbmRQcm9wZXJ0eT1mdW5jdGlvbihwKXt2YXIgYj1uZXcgUih0aGlzLHApO3JldHVybiBifTthLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5SZXNvdXJjZUJ1bmRsZS5nZXRUZXh0KHApfTthLnByb3RvdHlwZS5nZXRSZXNvdXJjZUJ1bmRsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLlJlc291cmNlQnVuZGxlfTthLnByb3RvdHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7aWYodGhpcy5vRGF0YSYmKHRoaXMub0RhdGEuYnVuZGxlVXJsfHx0aGlzLm9EYXRhLmJ1bmRsZU5hbWUpKXt0aGlzLlJlc291cmNlQnVuZGxlPXRoaXMubG9hZFJlc291cmNlQnVuZGxlKHRoaXMub0RhdGEpfX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwueG1sLlhNTFByb3BlcnR5QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC54bWwuWE1MUHJvcGVydHlCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3htbC9YTUxQcm9wZXJ0eUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvQ2xpZW50UHJvcGVydHlCaW5kaW5nJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIFg9Qy5leHRlbmQoInNhcC51aS5tb2RlbC54bWwuWE1MUHJvcGVydHlCaW5kaW5nIik7WC5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5vVmFsdWUhPXYpe3RoaXMub01vZGVsLnNldFByb3BlcnR5KHRoaXMuc1BhdGgsdix0aGlzLm9Db250ZXh0KX19O1gucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe3ZhciB2PXRoaXMuX2dldFZhbHVlKCk7aWYoIXEuc2FwLmVxdWFsKHYsdGhpcy5vVmFsdWUpfHxmKXt0aGlzLm9WYWx1ZT12O3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNoYW5nZX0pfX07cmV0dXJuIFh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL01hbmFnZWRPYmplY3QiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0JpbmRpbmdQYXJzZXInLCcuL0RhdGFUeXBlJywnLi9FdmVudFByb3ZpZGVyJywnLi9NYW5hZ2VkT2JqZWN0TWV0YWRhdGEnLCdzYXAvdWkvbW9kZWwvQ29tcG9zaXRlQmluZGluZycsJ3NhcC91aS9tb2RlbC9Db250ZXh0QmluZGluZycsJ3NhcC91aS9tb2RlbC9Nb2RlbCcsJ3NhcC91aS9tb2RlbC9UeXBlJywnanF1ZXJ5LnNhcC5hY3QnLCdqcXVlcnkuc2FwLnNjcmlwdCcsJ2pxdWVyeS5zYXAuc3RyaW5ncyddLGZ1bmN0aW9uKHEsQixELEUsTSxDLGIsYyxUKXsidXNlIHN0cmljdCI7dmFyIGQ9RS5leHRlbmQoInNhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QiLHttZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJnZXRJZCIsImdldE1ldGFkYXRhIiwiZ2V0TW9kZWwiLCJzZXRNb2RlbCIsImhhc01vZGVsIiwiYmluZFByb3BlcnR5IiwidW5iaW5kUHJvcGVydHkiLCJiaW5kQWdncmVnYXRpb24iLCJ1bmJpbmRBZ2dyZWdhdGlvbiIsImJpbmRPYmplY3QiLCJ1bmJpbmRPYmplY3QiLCJnZXRPYmplY3RCaW5kaW5nIl0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6e30sYWdncmVnYXRpb25zOnt9LGFzc29jaWF0aW9uczp7fSxldmVudHM6eyJ2YWxpZGF0aW9uU3VjY2VzcyI6e2VuYWJsZUV2ZW50QnViYmxpbmc6dHJ1ZX0sInZhbGlkYXRpb25FcnJvciI6e2VuYWJsZUV2ZW50QnViYmxpbmc6dHJ1ZX0sInBhcnNlRXJyb3IiOntlbmFibGVFdmVudEJ1YmJsaW5nOnRydWV9LCJmb3JtYXRFcnJvciI6e2VuYWJsZUV2ZW50QnViYmxpbmc6dHJ1ZX19fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMsUyl7RS5hcHBseSh0aGlzKTtpZih0eXBlb2YoaSkhPSJzdHJpbmciJiZhcmd1bWVudHMubGVuZ3RoPjApe1M9cztzPWk7aWYocyYmcy5pZCl7aT1zWyJpZCJdfWVsc2V7aT1udWxsfX1pZighaSl7aT10aGlzLmdldE1ldGFkYXRhKCkudWlkKCl8fHEuc2FwLnVpZCgpfWVsc2V7dmFyIHA9ZC5fZm5JZFByZXByb2Nlc3NvcjtpPShwP3AuY2FsbCh0aGlzLGkpOmkpO3ZhciB0PUQuZ2V0VHlwZSgic2FwLnVpLmNvcmUuSUQiKTtpZighdC5pc1ZhbGlkKGkpKXt0aHJvdyBuZXcgRXJyb3IoIlwiIitpKyJcIiBpcyBub3QgYSB2YWxpZCBJRC4iKX19dGhpcy5zSWQ9aTt0aGlzLm1Qcm9wZXJ0aWVzPXRoaXMuZ2V0TWV0YWRhdGEoKS5jcmVhdGVQcm9wZXJ0eUJhZygpO3RoaXMubUFnZ3JlZ2F0aW9ucz17fTt0aGlzLm1Bc3NvY2lhdGlvbnM9e307dGhpcy5tTWV0aG9kcz17fTt0aGlzLm9QYXJlbnQ9bnVsbDt0aGlzLmFEZWxlZ2F0ZXM9W107dGhpcy5hQmVmb3JlRGVsZWdhdGVzPVtdO3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZT0wO3RoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzPXtvTW9kZWxzOnt9LG9CaW5kaW5nQ29udGV4dHM6e319O3RoaXMub01vZGVscz17fTt0aGlzLm9CaW5kaW5nQ29udGV4dHM9e307dGhpcy5tQmluZGluZ0luZm9zPXt9O3RoaXMuc0JpbmRpbmdQYXRoPW51bGw7dGhpcy5tQmluZGluZ1BhcmFtZXRlcnM9bnVsbDt0aGlzLm1Cb3VuZE9iamVjdHM9e307dGhpcy5fc093bmVySWQ9ZC5fc093bmVySWQ7dHJ5e2lmKHRoaXMucmVnaXN0ZXIpdGhpcy5yZWdpc3RlcigpO2lmKHRoaXMuX2luaXRDb21wb3NpdGVTdXBwb3J0KXt0aGlzLl9pbml0Q29tcG9zaXRlU3VwcG9ydChzKX1pZih0aGlzLmluaXQpe3RoaXMuaW5pdCgpfXRoaXMuYXBwbHlTZXR0aW5ncyhzLFMpfWNhdGNoKGUpe2lmKHRoaXMuZGVyZWdpc3Rlcil0aGlzLmRlcmVnaXN0ZXIoKTt0aHJvdyBlfX19LE0pO2QuY3JlYXRlPWZ1bmN0aW9uKHYsayl7aWYoIXZ8fHYgaW5zdGFuY2VvZiBkfHx0eXBlb2YgdiE9PSJvYmplY3QifHx2IGluc3RhbmNlb2YgU3RyaW5nKXtyZXR1cm4gdn1mdW5jdGlvbiBnKHQpe2lmKHR5cGVvZiB0PT09ImZ1bmN0aW9uIil7cmV0dXJuIHR9aWYodHlwZW9mIHQ9PT0ic3RyaW5nIil7cmV0dXJuIHEuc2FwLmdldE9iamVjdCh0KX19dmFyIGY9Zyh2LlR5cGUpfHxnKGsmJmsudHlwZSk7aWYodHlwZW9mIGY9PT0iZnVuY3Rpb24iKXtyZXR1cm4gbmV3IGYodil9dmFyIG09IkRvbid0IGtub3cgaG93IHRvIGNyZWF0ZSBhIE1hbmFnZWRPYmplY3QgZnJvbSAiK3YrIiAoIisodHlwZW9mIHYpKyIpIjtxLnNhcC5sb2cuZmF0YWwobSk7dGhyb3cgbmV3IEVycm9yKG0pfTtkLl9mbklkUHJlcHJvY2Vzc29yPW51bGw7ZC5fZm5TZXR0aW5nc1ByZXByb2Nlc3Nvcj1udWxsO2QucnVuV2l0aFByZXByb2Nlc3NvcnM9ZnVuY3Rpb24oZixwKXt2YXIgbz17aWQ6dGhpcy5fZm5JZFByZXByb2Nlc3NvcixzZXR0aW5nczp0aGlzLl9mblNldHRpbmdzUHJlcHJvY2Vzc29yfTtwPXB8fHt9O3RoaXMuX2ZuSWRQcmVwcm9jZXNzb3I9cC5pZDt0aGlzLl9mblNldHRpbmdzUHJlcHJvY2Vzc29yPXAuc2V0dGluZ3M7dHJ5e3ZhciByPWYuY2FsbCgpO3RoaXMuX2ZuSWRQcmVwcm9jZXNzb3I9by5pZDt0aGlzLl9mblNldHRpbmdzUHJlcHJvY2Vzc29yPW8uc2V0dGluZ3M7cmV0dXJuIHJ9Y2F0Y2goZSl7dGhpcy5fZm5JZFByZXByb2Nlc3Nvcj1vLmlkO3RoaXMuX2ZuU2V0dGluZ3NQcmVwcm9jZXNzb3I9by5zZXR0aW5nczt0aHJvdyBlfX07ZC5nZXRPd25lcklkRm9yPWZ1bmN0aW9uKG8pe3JldHVybiBvJiZvLl9zT3duZXJJZH07ZC5ydW5XaXRoT3duZXI9ZnVuY3Rpb24oZixvKXt2YXIgYT1kLl9zT3duZXJJZDt0cnl7ZC5fc093bmVySWQ9by5nZXRJZCgpO3ZhciByPWYuY2FsbCgpO2QuX3NPd25lcklkPWE7cmV0dXJuIHJ9Y2F0Y2goZSl7ZC5fc093bmVySWQ9YTt0aHJvdyBlfX07ZC5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncz1mdW5jdGlvbihzLFMpe2lmKCFzfHxxLmlzRW1wdHlPYmplY3Qocykpe3JldHVybiB0aGlzfXZhciBtPXRoaXMuZ2V0TWV0YWRhdGEoKSx2PW0uZ2V0SlNPTktleXMoKSxhPWQuY3JlYXRlLHA9ZC5fZm5TZXR0aW5nc1ByZXByb2Nlc3NvcixrLFYsSztwJiZwLmNhbGwodGhpcyxzKTtpZihzLm1vZGVscyl7aWYodHlwZW9mIHMubW9kZWxzIT09Im9iamVjdCIpe3Rocm93IG5ldyBFcnJvcigibW9kZWxzIG11c3QgYmUgYSBzaW1wbGUgb2JqZWN0Iil9aWYocy5tb2RlbHMgaW5zdGFuY2VvZiBjKXt0aGlzLnNldE1vZGVsKHMubW9kZWxzKX1lbHNle2ZvcihrIGluIHMubW9kZWxzKXt0aGlzLnNldE1vZGVsKHMubW9kZWxzW2tdLGs9PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6ayl9fWRlbGV0ZSBzLm1vZGVsc31pZihzLmJpbmRpbmdDb250ZXh0cyl7aWYodHlwZW9mIHMuYmluZGluZ0NvbnRleHRzIT09Im9iamVjdCIpe3Rocm93IG5ldyBFcnJvcigiYmluZGluZ0NvbnRleHRzIG11c3QgYmUgYSBzaW1wbGUgb2JqZWN0Iil9aWYocy5iaW5kaW5nQ29udGV4dHMgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuQ29udGV4dCl7dGhpcy5zZXRCaW5kaW5nQ29udGV4dChzLmJpbmRpbmdDb250ZXh0cyl9ZWxzZXtmb3IoayBpbiBzLmJpbmRpbmdDb250ZXh0cyl7dGhpcy5zZXRCaW5kaW5nQ29udGV4dChzLmJpbmRpbmdDb250ZXh0c1trXSxrPT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOmspfX1kZWxldGUgcy5iaW5kaW5nQ29udGV4dHN9aWYocy5vYmplY3RCaW5kaW5ncyl7aWYodHlwZW9mIHMub2JqZWN0QmluZGluZ3MhPT0ic3RyaW5nIiYmdHlwZW9mIHMub2JqZWN0QmluZGluZ3MhPT0ib2JqZWN0Iil7dGhyb3cgbmV3IEVycm9yKCJiaW5kaW5nIG11c3QgYmUgYSBzdHJpbmcgb3Igc2ltcGxlIG9iamVjdCIpfWlmKHR5cGVvZiBzLm9iamVjdEJpbmRpbmdzPT09InN0cmluZyJ8fHMub2JqZWN0QmluZGluZ3MucGF0aCl7dGhpcy5iaW5kT2JqZWN0KHMub2JqZWN0QmluZGluZ3MpfWVsc2V7Zm9yKHZhciBrIGluIHMub2JqZWN0QmluZGluZ3Mpe3Mub2JqZWN0QmluZGluZ3MubW9kZWw9azt0aGlzLmJpbmRPYmplY3Qocy5vYmplY3RCaW5kaW5nc1trXSl9fWRlbGV0ZSBzLm9iamVjdEJpbmRpbmdzfWZvcihrIGluIHMpe2lmKEs9dltrXSl7Vj1zW2tdO3N3aXRjaChLLl9pS2luZCl7Y2FzZSAwOnZhciBvPXRoaXMuZXh0cmFjdEJpbmRpbmdJbmZvKFYsUyk7aWYobyYmdHlwZW9mIG89PT0ib2JqZWN0Iil7dGhpcy5iaW5kUHJvcGVydHkoayxvKX1lbHNle3RoaXNbSy5fc011dGF0b3JdKG98fFYpfWJyZWFrO2Nhc2UgMTp2YXIgbz1LLmFsdFR5cGVzJiZ0aGlzLmV4dHJhY3RCaW5kaW5nSW5mbyhWLFMpO2lmKG8mJnR5cGVvZiBvPT09Im9iamVjdCIpe3RoaXMuYmluZFByb3BlcnR5KGssbyl9ZWxzZXt0aGlzW0suX3NNdXRhdG9yXShhKG98fFYsSykpfWJyZWFrO2Nhc2UgMjp2YXIgbz10aGlzLmV4dHJhY3RCaW5kaW5nSW5mbyhWLFMpO2lmKG8mJnR5cGVvZiBvPT09Im9iamVjdCIpe3RoaXMuYmluZEFnZ3JlZ2F0aW9uKGssbyl9ZWxzZXtWPW98fFY7aWYoViYmIXEuaXNBcnJheShWKSl7Vj1bVl19aWYoVil7Zm9yKHZhciBpPTAsbD1WLmxlbmd0aDtpPGw7aSsrKXt0aGlzW0suX3NNdXRhdG9yXShhKFZbaV0sSykpfX19YnJlYWs7Y2FzZSAzOnRoaXNbSy5fc011dGF0b3JdKFYpO2JyZWFrO2Nhc2UgNDppZihWJiYhcS5pc0FycmF5KFYpKXtWPVtWXX1pZihWKXtmb3IodmFyIGk9MCxsPVYubGVuZ3RoO2k8bDtpKyspe3RoaXNbSy5fc011dGF0b3JdKFZbaV0pfX1icmVhaztjYXNlIDU6aWYodHlwZW9mIFY9PSJmdW5jdGlvbiIpe3RoaXNbSy5fc011dGF0b3JdKFYpfWVsc2V7dGhpc1tLLl9zTXV0YXRvcl0oVlswXSxWWzFdLFZbMl0pfWJyZWFrO2RlZmF1bHQ6YnJlYWt9fX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iTWFuYWdlZE9iamVjdCAiK3RoaXMuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCkrIiMiK3RoaXMuZ2V0SWQoKX07ZC5wcm90b3R5cGUuZ2V0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zSWR9O2QucHJvdG90eXBlLnNldFByb3BlcnR5PWZ1bmN0aW9uKHAsdixzKXt2YXIgbz10aGlzLm1Qcm9wZXJ0aWVzW3BdO3Y9dGhpcy52YWxpZGF0ZVByb3BlcnR5KHAsdik7aWYocS5zYXAuZXF1YWwobyx2KSl7cmV0dXJuIHRoaXN9aWYocyl7cS5zYXAuYWN0LnJlZnJlc2goKTt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK310aGlzLm1Qcm9wZXJ0aWVzW3BdPXY7aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX10aGlzLnVwZGF0ZU1vZGVsUHJvcGVydHkocCx2LG8pO0UucHJvdG90eXBlLmZpcmVFdmVudC5hcHBseSh0aGlzLFsiX2NoYW5nZSIseyJpZCI6dGhpcy5nZXRJZCgpLCJuYW1lIjpwLCJvbGRWYWx1ZSI6bywibmV3VmFsdWUiOnZ9XSk7aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLmdldFByb3BlcnR5PWZ1bmN0aW9uKHApe3ZhciB2PXRoaXMubVByb3BlcnRpZXNbcF0sbT10aGlzLmdldE1ldGFkYXRhKCksUD1tLmdldEFsbFByb3BlcnRpZXMoKVtwXSx0O2lmKCFQKXt0aHJvdyBuZXcgRXJyb3IoIlByb3BlcnR5IFwiIitwKyJcIiBkb2VzIG5vdCBleGlzdCBpbiAiK3RoaXMpfXQ9RC5nZXRUeXBlKFAudHlwZSk7aWYodCBpbnN0YW5jZW9mIEQmJnQuaXNBcnJheVR5cGUoKSYmcS5pc0FycmF5KHYpKXt2PXYuc2xpY2UoMCl9aWYodiBpbnN0YW5jZW9mIFN0cmluZyl7dj12LnZhbHVlT2YoKX1yZXR1cm4gdn07ZC5wcm90b3R5cGUudmFsaWRhdGVQcm9wZXJ0eT1mdW5jdGlvbihwLHYpe3ZhciBtPXRoaXMuZ2V0TWV0YWRhdGEoKSxQPW0uZ2V0QWxsUHJvcGVydGllcygpW3BdLHQ7aWYoIVApe3Rocm93IG5ldyBFcnJvcigiUHJvcGVydHkgXCIiK3ArIlwiIGRvZXMgbm90IGV4aXN0IGluICIrdGhpcyl9dD1ELmdldFR5cGUoUC50eXBlKTtpZih0IGluc3RhbmNlb2YgRCYmdC5pc0FycmF5VHlwZSgpJiZxLmlzQXJyYXkodikpe3Y9di5zbGljZSgwKX1pZih2PT09bnVsbHx8dj09PXVuZGVmaW5lZCl7aWYoUC5kZWZhdWx0VmFsdWUhPT1udWxsKXt2PVAuZGVmYXVsdFZhbHVlfWVsc2V7dj10LmdldERlZmF1bHRWYWx1ZSgpfX1lbHNlIGlmKHQgaW5zdGFuY2VvZiBEKXtpZih0LmdldE5hbWUoKT09InN0cmluZyIpe2lmKCEodHlwZW9mIHY9PSJzdHJpbmcifHx2IGluc3RhbmNlb2YgU3RyaW5nKSl7dj0iIit2fX1lbHNlIGlmKHQuZ2V0TmFtZSgpPT0ic3RyaW5nW10iKXtmb3IodmFyIGk9MDtpPHYubGVuZ3RoO2krKyl7aWYoIXR5cGVvZiB2W2ldPT0ic3RyaW5nIil7dltpXT0iIit2W2ldfX19ZWxzZSBpZighdC5pc1ZhbGlkKHYpKXt0aHJvdyBuZXcgRXJyb3IoIlwiIit2KyJcIiBpcyBvZiB0eXBlICIrdHlwZW9mIHYrIiwgZXhwZWN0ZWQgIit0LmdldE5hbWUoKSsiIGZvciBwcm9wZXJ0eSBcIiIrcCsiXCIgb2YgIit0aGlzKX19ZWxzZSBpZighKHYgaW4gdCkpe3Rocm93IG5ldyBFcnJvcigiXCIiK3YrIlwiIGlzIG5vdCBhIHZhbGlkIGVudHJ5IG9mIHRoZSBlbnVtZXJhdGlvbiBmb3IgcHJvcGVydHkgXCIiK3ArIlwiIG9mICIrdGhpcyl9aWYodCYmdC5ub3JtYWxpemUmJnR5cGVvZiB0Lm5vcm1hbGl6ZT09PSJmdW5jdGlvbiIpe3Y9dC5ub3JtYWxpemUodil9cmV0dXJuIHZ9O2QucHJvdG90eXBlLmdldE9yaWdpbkluZm89ZnVuY3Rpb24ocCl7dmFyIHY9dGhpcy5tUHJvcGVydGllc1twXTtpZighKHYgaW5zdGFuY2VvZiBTdHJpbmcmJnYub3JpZ2luSW5mbykpe3JldHVybiBudWxsfXJldHVybiB2Lm9yaWdpbkluZm99O2QucHJvdG90eXBlLnNldEFzc29jaWF0aW9uPWZ1bmN0aW9uKGEsaSxzKXtpZihpIGluc3RhbmNlb2YgZCl7aT1pLmdldElkKCl9ZWxzZSBpZihpIT1udWxsJiZ0eXBlb2YgaSE9PSJzdHJpbmciKXtyZXR1cm4gdGhpc31pZih0aGlzLm1Bc3NvY2lhdGlvbnNbYV09PT1pKXtyZXR1cm4gdGhpc31pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK310aGlzLm1Bc3NvY2lhdGlvbnNbYV09aTtpZighdGhpcy5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCkpe3RoaXMuaW52YWxpZGF0ZSgpfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5nZXRBc3NvY2lhdGlvbj1mdW5jdGlvbihhLG8pe3ZhciByPXRoaXMubUFzc29jaWF0aW9uc1thXTtpZighcil7cj10aGlzLm1Bc3NvY2lhdGlvbnNbYV09b3x8bnVsbH1lbHNle2lmKHR5cGVvZiByLmxlbmd0aD09PSdudW1iZXInJiYhKHIucHJvcGVydHlJc0VudW1lcmFibGUoJ2xlbmd0aCcpKSl7cmV0dXJuIHIuc2xpY2UoKX1yZXR1cm4gcn1yZXR1cm4gcn07ZC5wcm90b3R5cGUuYWRkQXNzb2NpYXRpb249ZnVuY3Rpb24oYSxpLHMpe2lmKGkgaW5zdGFuY2VvZiBkKXtpPWkuZ2V0SWQoKX1lbHNlIGlmKHR5cGVvZiBpIT09InN0cmluZyIpe3JldHVybiB0aGlzfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfXZhciBJPXRoaXMubUFzc29jaWF0aW9uc1thXTtpZighSSl7ST10aGlzLm1Bc3NvY2lhdGlvbnNbYV09W2ldfWVsc2V7SS5wdXNoKGkpfWlmKCF0aGlzLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKSl7dGhpcy5pbnZhbGlkYXRlKCl9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLnJlbW92ZUFzc29jaWF0aW9uPWZ1bmN0aW9uKGEsbyxzKXt2YXIgST10aGlzLm1Bc3NvY2lhdGlvbnNbYV07dmFyIGU9bnVsbDtpZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK31pZih0eXBlb2Yobyk9PSJvYmplY3QiJiZvLmdldElkKXtvPW8uZ2V0SWQoKX1pZih0eXBlb2Yobyk9PSJzdHJpbmciKXtmb3IodmFyIGk9MDtpPEkubGVuZ3RoO2krKyl7aWYoSVtpXT09byl7bz1pO2JyZWFrfX19aWYodHlwZW9mKG8pPT0ibnVtYmVyIil7aWYobzwwfHxvPj1JLmxlbmd0aCl7cS5zYXAubG9nLndhcm5pbmcoIk1hbmFnZWRPYmplY3QucmVtb3ZlQXNzb2NpYXRpb24gY2FsbGVkIHdpdGggaW52YWxpZCBpbmRleDogIithKyIsICIrbyl9ZWxzZXtlPUlbb107SS5zcGxpY2UobywxKTtpZighdGhpcy5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCkpe3RoaXMuaW52YWxpZGF0ZSgpfX19aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIGV9O2QucHJvdG90eXBlLnJlbW92ZUFsbEFzc29jaWF0aW9uPWZ1bmN0aW9uKGEscyl7dmFyIGk9dGhpcy5tQXNzb2NpYXRpb25zW2FdO2lmKCFpKXtyZXR1cm5bXX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK31kZWxldGUgdGhpcy5tQXNzb2NpYXRpb25zW2FdO2lmKCF0aGlzLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKSl7dGhpcy5pbnZhbGlkYXRlKCl9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIGl9O2QucHJvdG90eXBlLnZhbGlkYXRlQWdncmVnYXRpb249ZnVuY3Rpb24oYSxvLG0pe3ZhciBlPXRoaXMuZ2V0TWV0YWRhdGEoKSxBPWUuZ2V0TWFuYWdlZEFnZ3JlZ2F0aW9uKGEpLGYsdCxpLGc7aWYoIUEpe2lmKGEmJmUuX21IaWRkZW5BZ2dyZWdhdGlvbnMmJmUuX21IaWRkZW5BZ2dyZWdhdGlvbnNbYV0pe0E9ZS5fbUhpZGRlbkFnZ3JlZ2F0aW9uc1thXTtxLnNhcC5sb2cuZXJyb3IoIlN1cHBvcnQgZm9yICdfbUhpZGRlbkFnZ3JlZ2F0aW9ucycgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZCAod2l0aCAxLjEyIGxhdGVzdCkuIEhpZGRlbiBhZ2dyZWdhdGlvbnMgbGlrZSAnIitlLmdldE5hbWUoKSsiLiIrYSsiJyBpbnN0ZWFkIGNhbiBiZSBkZWNsYXJlZCBsaWtlIG5vcm1hbCBhZ2dyZWdhdGlvbnMgYnV0IHdpdGggdmlzaWJpbGl0eTonaGlkZGVuJy4iKX1lbHNle2c9IkFnZ3JlZ2F0aW9uIFwiIithKyJcIiBkb2VzIG5vdCBleGlzdCBpbiAiK3RoaXM7aWYoL15zYXBcLih1aVwuY29yZXx1aVwuY29tbW9uc3x1aVwudGFibGV8dWlcLnV4M3xtfG1ha2l0fHZpenx1aWV4dFwuaW5ib3gpJC8udGVzdChlLmdldExpYnJhcnlOYW1lKCl8fCIiKSl7dGhyb3cgbmV3IEVycm9yKGcpfWVsc2V7cS5zYXAubG9nLmVycm9yKCJTdXBwb3J0IGZvciB1bmRlY2xhcmVkIGFnZ3JlZ2F0aW9ucyBpcyBhYm91dCB0byBiZSByZW1vdmVkICh3aXRoIDEuMTIgbGF0ZXN0KS4gSGlkZGVuIGFnZ3JlZ2F0aW9ucyBsaWtlICciK2UuZ2V0TmFtZSgpKyIuIithKyInIGNhbiBiZSBkZWNsYXJlZCBsaWtlIG5vcm1hbCBhZ2dyZWdhdGlvbnMgYnV0IHdpdGggdmlzaWJpbGl0eTonaGlkZGVuJy4iKTtyZXR1cm4gb319fWlmKEEubXVsdGlwbGUhPT1tKXt0aHJvdyBuZXcgRXJyb3IoIkFnZ3JlZ2F0aW9uICciK2ErIicgb2YgIit0aGlzKyIgdXNlZCB3aXRoIHdyb25nIGNhcmRpbmFsaXR5IChkZWNsYXJlZCBhcyAiKyhBLm11bHRpcGxlPyIwLi5uIjoiMC4uMSIpKyIpIil9aWYoIUEubXVsdGlwbGUmJiFvKXtyZXR1cm4gb310PXEuc2FwLmdldE9iamVjdChBLnR5cGUpO2lmKHR5cGVvZiB0PT09ImZ1bmN0aW9uIiYmbyBpbnN0YW5jZW9mIHQpe3JldHVybiBvfWlmKG8mJm8uZ2V0TWV0YWRhdGEmJm8uZ2V0TWV0YWRhdGEoKS5pc0luc3RhbmNlT2YoQS50eXBlKSl7cmV0dXJuIG99Zj1BLmFsdFR5cGVzO2lmKGYmJmYubGVuZ3RoKXtpZihvPT1udWxsKXtyZXR1cm4gb31mb3IoaT0wO2k8Zi5sZW5ndGg7aSsrKXt0PUQuZ2V0VHlwZShmW2ldKTtpZih0IGluc3RhbmNlb2YgRCl7aWYodC5pc1ZhbGlkKG8pKXtyZXR1cm4gb319ZWxzZSBpZihvIGluIHQpe3JldHVybiBvfX19Zz0iXCIiK28rIlwiIGlzIG5vdCB2YWxpZCBmb3IgYWdncmVnYXRpb24gXCIiK2ErIlwiIG9mICIrdGhpcztpZihELmlzSW50ZXJmYWNlVHlwZShBLnR5cGUpKXtyZXR1cm4gb31lbHNle3Rocm93IG5ldyBFcnJvcihnKX19O2QucHJvdG90eXBlLnNldEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEsbyxzKXt2YXIgTz10aGlzLm1BZ2dyZWdhdGlvbnNbYV07aWYoTz09PW8pe3JldHVybiB0aGlzfW89dGhpcy52YWxpZGF0ZUFnZ3JlZ2F0aW9uKGEsbyxmYWxzZSk7aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9aWYoTyBpbnN0YW5jZW9mIGQpe08uc2V0UGFyZW50KG51bGwpfXRoaXMubUFnZ3JlZ2F0aW9uc1thXT1vO2lmKG8gaW5zdGFuY2VvZiBkKXtvLnNldFBhcmVudCh0aGlzLGEscyl9ZWxzZXtpZighdGhpcy5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCkpe3RoaXMuaW52YWxpZGF0ZSgpfX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUuZ2V0QWdncmVnYXRpb249ZnVuY3Rpb24oYSxvKXt2YXIgZT10aGlzLm1BZ2dyZWdhdGlvbnNbYV07aWYoIWUpe2U9dGhpcy5tQWdncmVnYXRpb25zW2FdPW98fG51bGx9aWYoZSl7aWYodHlwZW9mIGUubGVuZ3RoPT09J251bWJlcicmJiEoZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgnbGVuZ3RoJykpKXtyZXR1cm4gZS5zbGljZSgpfXJldHVybiBlfWVsc2V7cmV0dXJuIG51bGx9fTtkLnByb3RvdHlwZS5pbmRleE9mQWdncmVnYXRpb249ZnVuY3Rpb24oYSxvKXt2YXIgZT10aGlzLm1BZ2dyZWdhdGlvbnNbYV07aWYoZSl7aWYoZS5sZW5ndGg9PXVuZGVmaW5lZCl7cmV0dXJuLTJ9Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe2lmKGVbaV09PW8pe3JldHVybiBpfX19cmV0dXJuLTF9O2QucHJvdG90eXBlLmluc2VydEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEsbyxJLHMpe2lmKCFvKXtyZXR1cm4gdGhpc31vPXRoaXMudmFsaWRhdGVBZ2dyZWdhdGlvbihhLG8sdHJ1ZSk7dmFyIGU9dGhpcy5tQWdncmVnYXRpb25zW2FdfHwodGhpcy5tQWdncmVnYXRpb25zW2FdPVtdKTt2YXIgaT1JPDA/MDooST5lLmxlbmd0aD9lLmxlbmd0aDpJKTtpZihpIT09SSl7cS5zYXAubG9nLndhcm5pbmcoIk1hbmFnZWRPYmplY3QuaW5zZXJ0QWdncmVnYXRpb246IGluZGV4ICciK0krIicgb3V0IG9mIHJhbmdlIFswLCIrZS5sZW5ndGgrIl0sIGZvcmNlZCB0byAiK2kpfWUuc3BsaWNlKGksMCxvKTtvLnNldFBhcmVudCh0aGlzLGEscyk7cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLmFkZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEsbyxzKXtpZighbyl7cmV0dXJuIHRoaXN9bz10aGlzLnZhbGlkYXRlQWdncmVnYXRpb24oYSxvLHRydWUpO3ZhciBlPXRoaXMubUFnZ3JlZ2F0aW9uc1thXTtpZighZSl7ZT10aGlzLm1BZ2dyZWdhdGlvbnNbYV09W29dfWVsc2V7ZS5wdXNoKG8pfW8uc2V0UGFyZW50KHRoaXMsYSxzKTtyZXR1cm4gdGhpc307ZC5wcm90b3R5cGUucmVtb3ZlQWdncmVnYXRpb249ZnVuY3Rpb24oYSxvLHMpe3ZhciBlPXRoaXMubUFnZ3JlZ2F0aW9uc1thXSxmPW51bGwsaTtpZighZSl7cmV0dXJuIG51bGx9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9aWYodHlwZW9mKG8pPT0ic3RyaW5nIil7Zm9yKGk9MDtpPGUubGVuZ3RoO2krKyl7aWYoZVtpXSYmZVtpXS5nZXRJZCgpPT09byl7bz1pO2JyZWFrfX19aWYodHlwZW9mKG8pPT0ib2JqZWN0Iil7Zm9yKGk9MDtpPGUubGVuZ3RoO2krKyl7aWYoZVtpXT09byl7bz1pO2JyZWFrfX19aWYodHlwZW9mKG8pPT0ibnVtYmVyIil7aWYobzwwfHxvPj1lLmxlbmd0aCl7cS5zYXAubG9nLndhcm5pbmcoIk1hbmFnZWRPYmplY3QucmVtb3ZlQWdncmVnYXRpb24gY2FsbGVkIHdpdGggaW52YWxpZCBpbmRleDogIithKyIsICIrbyl9ZWxzZXtmPWVbb107ZS5zcGxpY2UobywxKTtmLnNldFBhcmVudChudWxsKTtpZighdGhpcy5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCkpe3RoaXMuaW52YWxpZGF0ZSgpfX19aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIGZ9O2QucHJvdG90eXBlLnJlbW92ZUFsbEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEscyl7dmFyIGU9dGhpcy5tQWdncmVnYXRpb25zW2FdO2lmKCFlKXtyZXR1cm5bXX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK31kZWxldGUgdGhpcy5tQWdncmVnYXRpb25zW2FdO2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXtlW2ldLnNldFBhcmVudChudWxsKX1pZighdGhpcy5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCkpe3RoaXMuaW52YWxpZGF0ZSgpfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiBlfTtkLnByb3RvdHlwZS5kZXN0cm95QWdncmVnYXRpb249ZnVuY3Rpb24oYSxzKXt2YXIgZT10aGlzLm1BZ2dyZWdhdGlvbnNbYV0saSxmO2lmKCFlKXtyZXR1cm4gdGhpc31pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK31kZWxldGUgdGhpcy5tQWdncmVnYXRpb25zW2FdO2lmKGUgaW5zdGFuY2VvZiBkKXtlLmRlc3Ryb3kocyl9ZWxzZSBpZihxLmlzQXJyYXkoZSkpe2ZvcihpPWUubGVuZ3RoLTE7aT49MDtpLS0pe2Y9ZVtpXTtpZihmKXtmLmRlc3Ryb3kocyl9fX1pZighdGhpcy5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCkpe3RoaXMuaW52YWxpZGF0ZSgpfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5pbnZhbGlkYXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5vUGFyZW50KXt0aGlzLm9QYXJlbnQuaW52YWxpZGF0ZSh0aGlzKX19O2QucHJvdG90eXBlLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQ9ZnVuY3Rpb24oKXt2YXIgaT10aGlzLmlTdXBwcmVzc0ludmFsaWRhdGU+MDtpZih0aGlzLm9QYXJlbnQmJnRoaXMub1BhcmVudCBpbnN0YW5jZW9mIGQpe2k9aXx8dGhpcy5vUGFyZW50LmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKX1yZXR1cm4gaX07ZC5wcm90b3R5cGUuX3JlbW92ZUNoaWxkPWZ1bmN0aW9uKG8sYSxzKXtpZighYSl7cS5zYXAubG9nLmVycm9yKCJDYW5ub3QgcmVtb3ZlIGFnZ3JlZ2F0ZWQgY2hpbGQgd2l0aG91dCBhZ2dyZWdhdGlvbiBuYW1lLiIsbnVsbCx0aGlzKX1lbHNle2lmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfXZhciBpPXRoaXMuaW5kZXhPZkFnZ3JlZ2F0aW9uKGEsbyk7dmFyIEE9dGhpcy5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKClbYV07aWYoaT09LTIpe2lmKEEmJnRoaXNbQS5fc011dGF0b3JdKXt0aGlzW0EuX3NNdXRhdG9yXShudWxsKX1lbHNle3RoaXMuc2V0QWdncmVnYXRpb24oYSxudWxsLHMpfX1lbHNlIGlmKGk+LTEpe2lmKEEmJnRoaXNbQS5fc1JlbW92ZU11dGF0b3JdKXt0aGlzW0EuX3NSZW1vdmVNdXRhdG9yXShpKX1lbHNle3RoaXMucmVtb3ZlQWdncmVnYXRpb24oYSxpLHMpfX1lbHNle31pZighdGhpcy5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCkpe3RoaXMuaW52YWxpZGF0ZSgpfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfX19O2QucHJvdG90eXBlLnNldFBhcmVudD1mdW5jdGlvbihwLGEscyl7dmFyIHQ9dGhpcztpZighcCl7dGhpcy5vUGFyZW50PW51bGw7dGhpcy5zUGFyZW50QWdncmVnYXRpb25OYW1lPW51bGw7dGhpcy5vUHJvcGFnYXRlZFByb3BlcnRpZXM9e29Nb2RlbHM6e30sb0JpbmRpbmdDb250ZXh0czp7fX07cS5zYXAuYWN0LnJlZnJlc2goKTtyZXR1cm59aWYocyl7cS5zYXAuYWN0LnJlZnJlc2goKTt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK312YXIgbz10aGlzLmdldFBhcmVudCgpO2lmKG8pe28uX3JlbW92ZUNoaWxkKHRoaXMsdGhpcy5zUGFyZW50QWdncmVnYXRpb25OYW1lKX10aGlzLm9QYXJlbnQ9cDt0aGlzLnNQYXJlbnRBZ2dyZWdhdGlvbk5hbWU9YTt0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcz1wLl9nZXRQcm9wZXJ0aWVzVG9Qcm9wYWdhdGUoKTtpZih0aGlzLmhhc01vZGVsKCkpe3RoaXMudXBkYXRlQmluZGluZ0NvbnRleHQoZmFsc2UsdHJ1ZSx1bmRlZmluZWQsdHJ1ZSk7dGhpcy51cGRhdGVCaW5kaW5ncyh0cnVlLG51bGwpO3RoaXMucHJvcGFnYXRlUHJvcGVydGllcyh0cnVlKX1pZihwJiYhdGhpcy5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCkpe3AuaW52YWxpZGF0ZSh0aGlzKX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUuZ2V0UGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1BhcmVudH07ZC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbihzKXt2YXIgdD10aGlzO2lmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfWlmKHRoaXMuZXhpdCl7dGhpcy5leGl0KCl9aWYodGhpcy5fZXhpdENvbXBvc2l0ZVN1cHBvcnQpe3RoaXMuX2V4aXRDb21wb3NpdGVTdXBwb3J0KCl9Zm9yKHZhciBhIGluIHRoaXMubUFnZ3JlZ2F0aW9ucyl7dGhpcy5kZXN0cm95QWdncmVnYXRpb24oYSxzKX1pZih0aGlzLmRlcmVnaXN0ZXIpdGhpcy5kZXJlZ2lzdGVyKCk7aWYodGhpcy5vUGFyZW50JiZ0aGlzLnNQYXJlbnRBZ2dyZWdhdGlvbk5hbWUpe3RoaXMub1BhcmVudC5fcmVtb3ZlQ2hpbGQodGhpcyx0aGlzLnNQYXJlbnRBZ2dyZWdhdGlvbk5hbWUscyl9ZGVsZXRlIHRoaXMub1BhcmVudDtxLmVhY2godGhpcy5tQmluZGluZ0luZm9zLGZ1bmN0aW9uKG4sbyl7aWYoby5mYWN0b3J5KXt0LnVuYmluZEFnZ3JlZ2F0aW9uKG4sdHJ1ZSl9ZWxzZXt0LnVuYmluZFByb3BlcnR5KG4sdHJ1ZSl9fSk7aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19RS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zZXRQYXJlbnQ9ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcigiVGhlIG9iamVjdCB3aXRoIElEICIrdC5nZXRJZCgpKyIgd2FzIGRlc3Ryb3llZCBhbmQgY2Fubm90IGJlIHVzZWQgYW55bW9yZS4iKX07dGhpcy5iSXNEZXN0cm95ZWQ9dHJ1ZX07ZC5iaW5kaW5nUGFyc2VyPUIuc2ltcGxlUGFyc2VyO2QucHJvdG90eXBlLmlzQmluZGluZz1mdW5jdGlvbih2LGspe3JldHVybiJvYmplY3QiPT09dHlwZW9mIHRoaXMuZXh0cmFjdEJpbmRpbmdJbmZvKHYpfTtkLnByb3RvdHlwZS5leHRyYWN0QmluZGluZ0luZm89ZnVuY3Rpb24odixzKXtpZih2JiZ0eXBlb2Ygdj09PSJvYmplY3QiKXtpZih2LnVpNW9iamVjdCl7ZGVsZXRlIHYudWk1b2JqZWN0fWVsc2UgaWYodi5wYXRofHx2LnBhcnRzKXtpZih2LnRlbXBsYXRlKXt2LnRlbXBsYXRlPWQuY3JlYXRlKHYudGVtcGxhdGUpfXJldHVybiB2fX1pZih0eXBlb2Ygdj09PSJzdHJpbmciKXtyZXR1cm4gZC5iaW5kaW5nUGFyc2VyKHYscyx0cnVlKX19O2QucHJvdG90eXBlLmdldEJpbmRpbmdJbmZvPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLm1CaW5kaW5nSW5mb3Nbbl19O2QucHJvdG90eXBlLmJpbmRPYmplY3Q9ZnVuY3Rpb24ocCxQKXt2YXIgYT17fSxvLG0scztpZih0eXBlb2YgcD09Im9iamVjdCIpe3ZhciBlPXA7cD1lLnBhdGg7UD1lLnBhcmFtZXRlcnM7bT1lLm1vZGVsO2EuZXZlbnRzPWUuZXZlbnRzfXM9cC5pbmRleE9mKCI+Iik7YS5zQmluZGluZ1BhdGg9cDthLm1CaW5kaW5nUGFyYW1ldGVycz1QO2lmKHM+MCl7bT1wLnN1YnN0cigwLHMpO2Euc0JpbmRpbmdQYXRoPXAuc3Vic3RyKHMrMSl9bz10aGlzLm1Cb3VuZE9iamVjdHNbbV07aWYobyYmby5iaW5kaW5nKXtvLmJpbmRpbmcuZGV0YWNoQ2hhbmdlKG8uZkNoYW5nZUhhbmRsZXIpO28uYmluZGluZy5kZXRhY2hFdmVudHMoby5ldmVudHMpfXRoaXMubUJvdW5kT2JqZWN0c1ttXT1hO2lmKHRoaXMuZ2V0TW9kZWwobSkpe3RoaXMuX2JpbmRPYmplY3QobSxhKX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUuX2JpbmRPYmplY3Q9ZnVuY3Rpb24obSxvKXt2YXIgYSxwLGUsdD10aGlzO3ZhciBmPWZ1bmN0aW9uKGcpe3Quc2V0QmluZGluZ0NvbnRleHQoYS5nZXRCb3VuZENvbnRleHQoKSxtKX07ZT10aGlzLmdldE1vZGVsKG0pO2lmKHRoaXMub1BhcmVudCYmZT09dGhpcy5vUGFyZW50LmdldE1vZGVsKG0pKXtwPXRoaXMub1BhcmVudC5nZXRCaW5kaW5nQ29udGV4dChtKX1hPWUuYmluZENvbnRleHQoby5zQmluZGluZ1BhdGgscCxvLm1CaW5kaW5nUGFyYW1ldGVycyk7YS5hdHRhY2hDaGFuZ2UoZik7by5iaW5kaW5nPWE7by5mQ2hhbmdlSGFuZGxlcj1mO2EuYXR0YWNoRXZlbnRzKG8uZXZlbnRzKTthLmluaXRpYWxpemUoKX07ZC5wcm90b3R5cGUuYmluZENvbnRleHQ9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMuYmluZEVsZW1lbnQocCl9O2QucHJvdG90eXBlLnVuYmluZENvbnRleHQ9ZnVuY3Rpb24obSl7cmV0dXJuIHRoaXMudW5iaW5kRWxlbWVudChtKX07ZC5wcm90b3R5cGUudW5iaW5kT2JqZWN0PWZ1bmN0aW9uKG0pe3ZhciBvPXRoaXMubUJvdW5kT2JqZWN0c1ttXTtpZihvKXtpZihvLmJpbmRpbmcpe28uYmluZGluZy5kZXRhY2hDaGFuZ2Uoby5mQ2hhbmdlSGFuZGxlcik7by5iaW5kaW5nLmRldGFjaEV2ZW50cyhvLmV2ZW50cyl9ZGVsZXRlIHRoaXMubUJvdW5kT2JqZWN0c1ttXTtkZWxldGUgdGhpcy5vQmluZGluZ0NvbnRleHRzW21dO3RoaXMudXBkYXRlQmluZGluZ0NvbnRleHQoZmFsc2UsZmFsc2UsbSl9cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLmJpbmRQcm9wZXJ0eT1mdW5jdGlvbihuLG8pe3ZhciBwLGYsbSxzLEYsdCxTLGE9dHJ1ZSxlPXRoaXMsZz10aGlzLmdldE1ldGFkYXRhKCksUD1nLmdldEFsbFByb3BlcnRpZXMoKVtuXSxrPWcuZ2V0SlNPTktleXMoKVtuXTtpZighUCYmIShrJiZrLmFsdFR5cGVzKSl7dGhyb3cgbmV3IEVycm9yKCJQcm9wZXJ0eSBcIiIrbisiXCIgZG9lcyBub3QgZXhpc3QgaW4gIit0aGlzKX1pZih0eXBlb2Ygbz09InN0cmluZyIpe3A9YXJndW1lbnRzWzFdO2Y9YXJndW1lbnRzWzJdO209YXJndW1lbnRzWzNdO2lmKHR5cGVvZiBmPT0iZnVuY3Rpb24iKXtGPWZ9ZWxzZSBpZihmIGluc3RhbmNlb2YgVCl7dD1mfW89e2Zvcm1hdHRlcjpGLHBhcnRzOlt7cGF0aDpwLHR5cGU6dCxtb2RlOm19XX19aWYoIW8ucGFydHMpe28ucGFydHM9W107by5wYXJ0c1swXT17cGF0aDpvLnBhdGgsdHlwZTpvLnR5cGUsZm9ybWF0T3B0aW9uczpvLmZvcm1hdE9wdGlvbnMsY29uc3RyYWludHM6by5jb25zdHJhaW50cyxtb2RlbDpvLm1vZGVsLG1vZGU6by5tb2RlfTtkZWxldGUgby5wYXRoO2RlbGV0ZSBvLm1vZGU7ZGVsZXRlIG8ubW9kZWx9cS5lYWNoKG8ucGFydHMsZnVuY3Rpb24oaSxoKXtpZih0eXBlb2YgaD09InN0cmluZyIpe2g9e3BhdGg6aH07by5wYXJ0c1tpXT1ofVM9aC5wYXRoLmluZGV4T2YoIj4iKTtpZihTPjApe2gubW9kZWw9aC5wYXRoLnN1YnN0cigwLFMpO2gucGF0aD1oLnBhdGguc3Vic3RyKFMrMSl9aWYoby5mb3JtYXR0ZXJ8fG8ucGFydHMubGVuZ3RoPjEpe2gubW9kZT1zYXAudWkubW9kZWwuQmluZGluZ01vZGUuT25lV2F5fWlmKCFlLmdldE1vZGVsKGgubW9kZWwpKXthPWZhbHNlfX0pO2lmKHRoaXMuaXNCb3VuZChuKSl7dGhpcy51bmJpbmRQcm9wZXJ0eShuLHRydWUpfXRoaXMubUJpbmRpbmdJbmZvc1tuXT1vO2lmKGEpe3RoaXMuX2JpbmRQcm9wZXJ0eShuLG8pfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5fYmluZFByb3BlcnR5PWZ1bmN0aW9uKG4sbyl7dmFyIG0scyxhLGUsdCxmLHA9dGhpcy5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKClbbl0sZz10aGlzLGg9W10saj1mdW5jdGlvbihpKXtnLnVwZGF0ZVByb3BlcnR5KG4pfTthPXRoaXMuZ2V0QmluZGluZ0NvbnRleHQoby5tb2RlbCk7cS5lYWNoKG8ucGFydHMsZnVuY3Rpb24oaSxQKXthPWcuZ2V0QmluZGluZ0NvbnRleHQoUC5tb2RlbCk7bT1nLmdldE1vZGVsKFAubW9kZWwpO3Q9UC50eXBlO2lmKHR5cGVvZiB0PT0ic3RyaW5nIil7Zj1xLnNhcC5nZXRPYmplY3QodCk7dD1uZXcgZihQLmZvcm1hdE9wdGlvbnMsUC5jb25zdHJhaW50cyl9ZT1tLmJpbmRQcm9wZXJ0eShQLnBhdGgsYSxvLnBhcmFtZXRlcnMpO2Uuc2V0VHlwZSh0LHAudHlwZSk7ZS5zZXRGb3JtYXR0ZXIoUC5mb3JtYXR0ZXIpO3M9IVAubW9kZT9tLmdldERlZmF1bHRCaW5kaW5nTW9kZSgpOlAubW9kZTtlLnNldEJpbmRpbmdNb2RlKHMpO2gucHVzaChlKX0pO2lmKGgubGVuZ3RoPjF8fChvLmZvcm1hdHRlciYmby5mb3JtYXR0ZXIudGV4dEZyYWdtZW50cykpe3Q9by50eXBlO2lmKHR5cGVvZiB0PT0ic3RyaW5nIil7Zj1xLnNhcC5nZXRPYmplY3QodCk7dD1uZXcgZihvLmZvcm1hdE9wdGlvbnMsby5jb25zdHJhaW50cyl9ZT1uZXcgQyhoLG8udXNlUmF3VmFsdWVzKTtlLnNldFR5cGUodCxwLnR5cGUpO2Uuc2V0QmluZGluZ01vZGUoby5tb2RlKX1lbHNle2U9aFswXX1lLmF0dGFjaENoYW5nZShqKTtlLnNldEZvcm1hdHRlcihxLnByb3h5KG8uZm9ybWF0dGVyLHRoaXMpKTtvLmJpbmRpbmc9ZTtvLm1vZGVsQ2hhbmdlSGFuZGxlcj1qO2UuYXR0YWNoRXZlbnRzKG8uZXZlbnRzKTtlLmluaXRpYWxpemUoKTtpZihlLmdldEJpbmRpbmdNb2RlKCk9PT1zYXAudWkubW9kZWwuQmluZGluZ01vZGUuT25lVGltZSl7ZS5kZXRhY2hDaGFuZ2Uoaik7ZS5kZXRhY2hFdmVudHMoby5ldmVudHMpfX07ZC5wcm90b3R5cGUudW5iaW5kUHJvcGVydHk9ZnVuY3Rpb24obixzKXt2YXIgbz10aGlzLm1CaW5kaW5nSW5mb3Nbbl0scD10aGlzLmdldE1ldGFkYXRhKCkuZ2V0SlNPTktleXMoKVtuXTtpZihvKXtpZihvLmJpbmRpbmcpe28uYmluZGluZy5kZXRhY2hDaGFuZ2Uoby5tb2RlbENoYW5nZUhhbmRsZXIpO28uYmluZGluZy5kZXRhY2hFdmVudHMoby5ldmVudHMpfWRlbGV0ZSB0aGlzLm1CaW5kaW5nSW5mb3Nbbl07aWYoIXMpe3RoaXNbcC5fc011dGF0b3JdKG51bGwpfX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUudXBkYXRlUHJvcGVydHk9ZnVuY3Rpb24obil7dmFyIG89dGhpcy5tQmluZGluZ0luZm9zW25dLGE9by5iaW5kaW5nLHA9dGhpcy5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKClbbl07aWYoby5za2lwUHJvcGVydHlVcGRhdGUpcmV0dXJuO3RyeXt2YXIgdj1hLmdldEV4dGVybmFsVmFsdWUoKTtvLnNraXBNb2RlbFVwZGF0ZT10cnVlO3RoaXNbcC5fc011dGF0b3JdKHYpO28uc2tpcE1vZGVsVXBkYXRlPWZhbHNlfWNhdGNoKGUpe28uc2tpcE1vZGVsVXBkYXRlPWZhbHNlO2lmKGUgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKXt0aGlzLmZpcmVGb3JtYXRFcnJvcih7ZWxlbWVudDp0aGlzLHByb3BlcnR5Om4sdHlwZTphLmdldFR5cGUoKSxuZXdWYWx1ZTphLmdldFZhbHVlKCksb2xkVmFsdWU6dGhpcy5nZXRQcm9wZXJ0eShuKSxleGNlcHRpb246ZX0sZmFsc2UsdHJ1ZSl9ZWxzZXt0aHJvdyBlfX19O2QucHJvdG90eXBlLnVwZGF0ZU1vZGVsUHJvcGVydHk9ZnVuY3Rpb24obix2LG8pe2lmKHRoaXMuaXNCb3VuZChuKSl7dmFyIGE9dGhpcy5tQmluZGluZ0luZm9zW25dLGU9YS5iaW5kaW5nO2lmKGEuc2tpcE1vZGVsVXBkYXRlKXJldHVybjtpZihlJiZlLmdldEJpbmRpbmdNb2RlKCk9PXNhcC51aS5tb2RlbC5CaW5kaW5nTW9kZS5Ud29XYXkpe3RyeXthLnNraXBQcm9wZXJ0eVVwZGF0ZT10cnVlO2Uuc2V0RXh0ZXJuYWxWYWx1ZSh2KTthLnNraXBQcm9wZXJ0eVVwZGF0ZT1mYWxzZTt2YXIgZj1lLmdldEV4dGVybmFsVmFsdWUoKTtpZih2IT1mKXt0aGlzLnVwZGF0ZVByb3BlcnR5KG4pfWlmKGUuZ2V0VHlwZSgpKXt0aGlzLmZpcmVWYWxpZGF0aW9uU3VjY2Vzcyh7ZWxlbWVudDp0aGlzLHByb3BlcnR5Om4sdHlwZTplLmdldFR5cGUoKSxuZXdWYWx1ZTp2LG9sZFZhbHVlOm99LGZhbHNlLHRydWUpfX1jYXRjaChnKXthLnNraXBQcm9wZXJ0eVVwZGF0ZT1mYWxzZTtpZihnIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKXt0aGlzLmZpcmVQYXJzZUVycm9yKHtlbGVtZW50OnRoaXMscHJvcGVydHk6bix0eXBlOmUuZ2V0VHlwZSgpLG5ld1ZhbHVlOnYsb2xkVmFsdWU6byxleGNlcHRpb246Z30sZmFsc2UsdHJ1ZSl9ZWxzZSBpZihnIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLlZhbGlkYXRlRXhjZXB0aW9uKXt0aGlzLmZpcmVWYWxpZGF0aW9uRXJyb3Ioe2VsZW1lbnQ6dGhpcyxwcm9wZXJ0eTpuLHR5cGU6ZS5nZXRUeXBlKCksbmV3VmFsdWU6dixvbGRWYWx1ZTpvLGV4Y2VwdGlvbjpnfSxmYWxzZSx0cnVlKX1lbHNle3Rocm93IGd9fX19fTtkLnByb3RvdHlwZS5iaW5kQWdncmVnYXRpb249ZnVuY3Rpb24obixvKXt2YXIgcCx0LHMsZixtPXRoaXMuZ2V0TWV0YWRhdGEoKSxhPW0uZ2V0QWxsQWdncmVnYXRpb25zKClbbl07aWYoIWEpe3Rocm93IG5ldyBFcnJvcigiQWdncmVnYXRpb24gXCIiK24rIlwiIGRvZXMgbm90IGV4aXN0IGluICIrdGhpcyl9aWYodHlwZW9mIG89PSJzdHJpbmciKXtwPWFyZ3VtZW50c1sxXTt0PWFyZ3VtZW50c1syXTtzPWFyZ3VtZW50c1szXTtmPWFyZ3VtZW50c1s0XTtvPXtwYXRoOnAsc29ydGVyOnMsZmlsdGVyczpmfTtpZih0IGluc3RhbmNlb2YgZCl7by50ZW1wbGF0ZT10fWVsc2UgaWYodHlwZW9mIHQ9PT0iZnVuY3Rpb24iKXtvLmZhY3Rvcnk9dH19aWYodGhpcy5pc0JvdW5kKG4pKXt0aGlzLnVuYmluZEFnZ3JlZ2F0aW9uKG4sdHJ1ZSl9aWYoIShvLnRlbXBsYXRlfHxvLmZhY3RvcnkpKXtpZihhLl9kb2VzTm90UmVxdWlyZUZhY3Rvcnkpe28uZmFjdG9yeT1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiZHVtbXkgZmFjdG9yeSBjYWxsZWQgdW5leHBlY3RlZGx5ICIpfX1lbHNle3Rocm93IG5ldyBFcnJvcigiTWlzc2luZyB0ZW1wbGF0ZSBvciBmYWN0b3J5IGZ1bmN0aW9uIGZvciBhZ2dyZWdhdGlvbiAiK24rIiBvZiAiK3RoaXMrIiAhIil9fWlmKG8udGVtcGxhdGUpe28uZmFjdG9yeT1mdW5jdGlvbihpKXtyZXR1cm4gby50ZW1wbGF0ZS5jbG9uZShpKX19dmFyIFM9by5wYXRoLmluZGV4T2YoIj4iKTtpZihTPjApe28ubW9kZWw9by5wYXRoLnN1YnN0cigwLFMpO28ucGF0aD1vLnBhdGguc3Vic3RyKFMrMSl9dGhpcy5tQmluZGluZ0luZm9zW25dPW87aWYodGhpcy5nZXRNb2RlbChvLm1vZGVsKSl7dGhpcy5fYmluZEFnZ3JlZ2F0aW9uKG4sbyl9cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLl9iaW5kQWdncmVnYXRpb249ZnVuY3Rpb24obixvKXt2YXIgdD10aGlzLGEsbT1mdW5jdGlvbihnKXt2YXIgdT0idXBkYXRlIituLnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrbi5zdWJzdHIoMSk7aWYodFt1XSl7dmFyIHM9ZyYmZy5nZXRQYXJhbWV0ZXIoInJlYXNvbiIpO2lmKHMpe3RbdV0ocyl9ZWxzZXt0W3VdKCl9fWVsc2V7dC51cGRhdGVBZ2dyZWdhdGlvbihuKX19LGY9ZnVuY3Rpb24oZyl7dmFyIHI9InJlZnJlc2giK24uc3Vic3RyKDAsMSkudG9VcHBlckNhc2UoKStuLnN1YnN0cigxKTtpZih0W3JdKXt0W3JdKGcuZ2V0UGFyYW1ldGVyKCJyZWFzb24iKSl9ZWxzZXttKGcpfX07dmFyIGU9dGhpcy5nZXRNb2RlbChvLm1vZGVsKTtpZih0aGlzLmlzVHJlZUJpbmRpbmcobikpe2E9ZS5iaW5kVHJlZShvLnBhdGgsdGhpcy5nZXRCaW5kaW5nQ29udGV4dChvLm1vZGVsKSxvLmZpbHRlcnMsby5wYXJhbWV0ZXJzKX1lbHNle2E9ZS5iaW5kTGlzdChvLnBhdGgsdGhpcy5nZXRCaW5kaW5nQ29udGV4dChvLm1vZGVsKSxvLnNvcnRlcixvLmZpbHRlcnMsby5wYXJhbWV0ZXJzKX1pZih0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbj09PXRydWUpe2EuZW5hYmxlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb24oKX1vLmJpbmRpbmc9YTtvLm1vZGVsQ2hhbmdlSGFuZGxlcj1tO28ubW9kZWxSZWZyZXNoSGFuZGxlcj1mO2EuYXR0YWNoQ2hhbmdlKG0pO2EuYXR0YWNoUmVmcmVzaChmKTthLmF0dGFjaEV2ZW50cyhvLmV2ZW50cyk7YS5pbml0aWFsaXplKCl9O2QucHJvdG90eXBlLnVuYmluZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKG4scyl7dmFyIG89dGhpcy5tQmluZGluZ0luZm9zW25dLGE9dGhpcy5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKClbbl07aWYobyl7aWYoby5iaW5kaW5nKXtvLmJpbmRpbmcuZGV0YWNoQ2hhbmdlKG8ubW9kZWxDaGFuZ2VIYW5kbGVyKTtvLmJpbmRpbmcuZGV0YWNoUmVmcmVzaChvLm1vZGVsUmVmcmVzaEhhbmRsZXIpO28uYmluZGluZy5kZXRhY2hFdmVudHMoby5ldmVudHMpfWRlbGV0ZSB0aGlzLm1CaW5kaW5nSW5mb3Nbbl07aWYoIXMpe3RoaXNbYS5fc0Rlc3RydWN0b3JdKCl9fXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS51cGRhdGVBZ2dyZWdhdGlvbj1mdW5jdGlvbihuKXt2YXIgbz10aGlzLm1CaW5kaW5nSW5mb3Nbbl0sYT1vLmJpbmRpbmcsZj1vLmZhY3RvcnksQT10aGlzLmdldE1ldGFkYXRhKCkuZ2V0SlNPTktleXMoKVtuXSxlLE49bnVsbCxnPW51bGwsRz1udWxsLHM9bnVsbCx0PXRoaXM7dGhpc1tBLl9zRGVzdHJ1Y3Rvcl0oKTtpZih0aGlzLmlzVHJlZUJpbmRpbmcobikpe3ZhciBpPTAsdT1mdW5jdGlvbihoLGYsYSxwKXtxLmVhY2goaCxmdW5jdGlvbihJLGope3ZhciBrPXQuZ2V0SWQoKSsiLSIraSsrO2U9ZihrLGopO2Uuc2V0QmluZGluZ0NvbnRleHQoaixvLm1vZGVsKTtwW0EuX3NNdXRhdG9yXShlKTt1KGEuZ2V0Tm9kZUNvbnRleHRzKGopLGYsYSxlKX0pfTt1KGEuZ2V0Um9vdENvbnRleHRzKCksZixhLHRoaXMpfWVsc2V7Zz1BLl9zTXV0YXRvcisiR3JvdXAiO0c9YS5pc0dyb3VwZWQoKSYmdGhpc1tnXTtxLmVhY2goYS5nZXRDb250ZXh0cyhvLnN0YXJ0SW5kZXgsby5sZW5ndGgpLGZ1bmN0aW9uKEksaCl7aWYoRyYmYS5hU29ydGVycy5sZW5ndGg+MCl7Tj1hLmFTb3J0ZXJzWzBdLmZuR3JvdXAoaCk7aWYodHlwZW9mIE49PSJzdHJpbmciKXtOPXtrZXk6Tn19aWYoTi5rZXkhPT1zKXt2YXIgajtpZihvLmdyb3VwSGVhZGVyRmFjdG9yeSl7aj1vLmdyb3VwSGVhZGVyRmFjdG9yeShOKX10W2ddKE4saik7cz1OLmtleX19dmFyIGs9dC5nZXRJZCgpKyItIitJO2U9ZihrLGgpO2Uuc2V0QmluZGluZ0NvbnRleHQoaCxvLm1vZGVsKTt0W0EuX3NNdXRhdG9yXShlKX0pfX07ZC5wcm90b3R5cGUucmVmcmVzaEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKG4pe3ZhciBvPXRoaXMubUJpbmRpbmdJbmZvc1tuXSxhPW8uYmluZGluZzthLmdldENvbnRleHRzKG8uc3RhcnRJbmRleCxvLmxlbmd0aCl9O2QucHJvdG90eXBlLmlzVHJlZUJpbmRpbmc9ZnVuY3Rpb24obil7cmV0dXJuIGZhbHNlfTtkLnByb3RvdHlwZS51cGRhdGVCaW5kaW5ncz1mdW5jdGlvbih1LG0pe3ZhciB0PXRoaXM7ZnVuY3Rpb24gYShvKXt2YXIgcD1vLnBhcnRzLGk7aWYocCYmcC5sZW5ndGg+MSl7Zm9yKGk9MDtpPHAubGVuZ3RoO2krKyl7aWYoKHV8fHBbaV0ubW9kZWw9PW0pJiYhby5iaW5kaW5nLmFCaW5kaW5nc1tpXS51cGRhdGVSZXF1aXJlZCh0LmdldE1vZGVsKHBbaV0ubW9kZWwpKSl7cmV0dXJuIHRydWV9fX1lbHNlIGlmKG8uZmFjdG9yeSl7cmV0dXJuKHV8fG8ubW9kZWw9PW0pJiYhby5iaW5kaW5nLnVwZGF0ZVJlcXVpcmVkKHQuZ2V0TW9kZWwoby5tb2RlbCkpfWVsc2V7cmV0dXJuKHV8fHBbMF0ubW9kZWw9PW0pJiYhby5iaW5kaW5nLnVwZGF0ZVJlcXVpcmVkKHQuZ2V0TW9kZWwocFswXS5tb2RlbCkpfXJldHVybiBmYWxzZX1mdW5jdGlvbiBlKG8pe3ZhciBwPW8ucGFydHMsaTtpZihwKXtmb3IoaT0wO2k8cC5sZW5ndGg7aSsrKXtpZighdC5nZXRNb2RlbChwW2ldLm1vZGVsKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX1lbHNlIGlmKG8uZmFjdG9yeSl7cmV0dXJuISF0LmdldE1vZGVsKG8ubW9kZWwpfXJldHVybiBmYWxzZX1xLmVhY2godGhpcy5tQmluZGluZ0luZm9zLGZ1bmN0aW9uKG4sbyl7aWYoby5iaW5kaW5nJiZhKG8pKXtvLmJpbmRpbmcuZGV0YWNoQ2hhbmdlKG8ubW9kZWxDaGFuZ2VIYW5kbGVyKTtpZihvLm1vZGVsUmVmcmVzaEhhbmRsZXIpe28uYmluZGluZy5kZXRhY2hSZWZyZXNoKG8ubW9kZWxSZWZyZXNoSGFuZGxlcil9by5iaW5kaW5nLmRldGFjaEV2ZW50cyhvLmV2ZW50cyk7ZGVsZXRlIG8uYmluZGluZ31pZighby5iaW5kaW5nJiZlKG8pKXtpZihvLmZhY3Rvcnkpe3QuX2JpbmRBZ2dyZWdhdGlvbihuLG8pfWVsc2V7dC5fYmluZFByb3BlcnR5KG4sbyl9fX0pfTtkLnByb3RvdHlwZS5pc0JvdW5kPWZ1bmN0aW9uKG4pe3JldHVybihuIGluIHRoaXMubUJpbmRpbmdJbmZvcyl9O2QucHJvdG90eXBlLmdldE9iamVjdEJpbmRpbmc9ZnVuY3Rpb24obSl7cmV0dXJuIHRoaXMubUJvdW5kT2JqZWN0c1ttXSYmdGhpcy5tQm91bmRPYmplY3RzW21dLmJpbmRpbmd9O2QucHJvdG90eXBlLmdldEV2ZW50aW5nUGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1BhcmVudH07ZC5wcm90b3R5cGUuZ2V0QmluZGluZz1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5tQmluZGluZ0luZm9zW25dJiZ0aGlzLm1CaW5kaW5nSW5mb3Nbbl0uYmluZGluZ307ZC5wcm90b3R5cGUuZ2V0QmluZGluZ1BhdGg9ZnVuY3Rpb24obil7dmFyIGk9dGhpcy5tQmluZGluZ0luZm9zW25dO3JldHVybiBpJiYoaS5wYXRofHwoaS5wYXJ0cyYmaS5wYXJ0c1swXSYmaS5wYXJ0c1swXS5wYXRoKSl9O2QucHJvdG90eXBlLnNldEJpbmRpbmdDb250ZXh0PWZ1bmN0aW9uKG8sbSl7dmFyIE89dGhpcy5vQmluZGluZ0NvbnRleHRzW21dO2lmKE8hPT1vKXt0aGlzLm9CaW5kaW5nQ29udGV4dHNbbV09bzt0aGlzLnVwZGF0ZUJpbmRpbmdDb250ZXh0KHRydWUsdHJ1ZSxtKTt0aGlzLnByb3BhZ2F0ZVByb3BlcnRpZXMobSl9cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLnVwZGF0ZUJpbmRpbmdDb250ZXh0PWZ1bmN0aW9uKHMsUyxtLHUpe3ZhciBvLGE9e30scCxlLHQ9dGhpcztpZih1KXtmb3IobSBpbiB0aGlzLm9Nb2RlbHMpe2lmKHRoaXMub01vZGVscy5oYXNPd25Qcm9wZXJ0eShtKSl7YVttXT1tfX1mb3IobSBpbiB0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vTW9kZWxzKXtpZih0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vTW9kZWxzLmhhc093blByb3BlcnR5KG0pKXthW21dPW19fX1lbHNle2FbbV09bX1mb3IobSBpbiBhKXtpZihhLmhhc093blByb3BlcnR5KG0pKXttPW09PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6bTtvPXRoaXMuZ2V0TW9kZWwobSk7ZT10aGlzLm1Cb3VuZE9iamVjdHNbbV07aWYobyYmZSYmZS5zQmluZGluZ1BhdGgmJiFzKXtpZighZS5iaW5kaW5nKXt0aGlzLl9iaW5kT2JqZWN0KG0sZSl9ZWxzZXtwPW51bGw7aWYodGhpcy5vUGFyZW50JiZvPT10aGlzLm9QYXJlbnQuZ2V0TW9kZWwobSkpe3A9dGhpcy5vUGFyZW50LmdldEJpbmRpbmdDb250ZXh0KG0pfWlmKHAhPT1lLmJpbmRpbmcuZ2V0Q29udGV4dCgpKXtlLmJpbmRpbmcuc2V0Q29udGV4dChwKX19Y29udGludWV9cS5lYWNoKHRoaXMubUJpbmRpbmdJbmZvcyxmdW5jdGlvbihuLGcpe3ZhciBoPWcuYmluZGluZzt2YXIgUD1nLnBhcnRzLGk7aWYoIWgpe3JldHVybn1pZihQJiZQLmxlbmd0aD4xKXtmb3IoaT0wO2k8UC5sZW5ndGg7aSsrKXtpZihQW2ldLm1vZGVsPT1tKXtoLmFCaW5kaW5nc1tpXS5zZXRDb250ZXh0KHQuZ2V0QmluZGluZ0NvbnRleHQoUFtpXS5tb2RlbCkpfX19ZWxzZSBpZihnLmZhY3Rvcnkpe2lmKGcubW9kZWw9PW0pe2guc2V0Q29udGV4dCh0LmdldEJpbmRpbmdDb250ZXh0KGcubW9kZWwpKX19ZWxzZXtpZihQWzBdLm1vZGVsPT1tKXtoLnNldENvbnRleHQodC5nZXRCaW5kaW5nQ29udGV4dChQWzBdLm1vZGVsKSl9fX0pO2lmKCFTKXt2YXIgZj10aGlzLmdldEJpbmRpbmdDb250ZXh0KG0pO3EuZWFjaCh0aGlzLm1BZ2dyZWdhdGlvbnMsZnVuY3Rpb24obixBKXtpZihBIGluc3RhbmNlb2YgZCl7QS5vUHJvcGFnYXRlZFByb3BlcnRpZXMub0JpbmRpbmdDb250ZXh0c1ttXT1mO0EudXBkYXRlQmluZGluZ0NvbnRleHQoZmFsc2UsZmFsc2UsbSl9ZWxzZSBpZihBIGluc3RhbmNlb2YgQXJyYXkpe2Zvcih2YXIgaT0wO2k8QS5sZW5ndGg7aSsrKXtBW2ldLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vQmluZGluZ0NvbnRleHRzW21dPWY7QVtpXS51cGRhdGVCaW5kaW5nQ29udGV4dChmYWxzZSxmYWxzZSxtKX19fSl9fX19O2QucHJvdG90eXBlLmdldEJpbmRpbmdDb250ZXh0PWZ1bmN0aW9uKG0pe3ZhciBvPXRoaXMuZ2V0TW9kZWwobSk7aWYodGhpcy5vQmluZGluZ0NvbnRleHRzW21dKXtyZXR1cm4gdGhpcy5vQmluZGluZ0NvbnRleHRzW21dfWVsc2UgaWYobyYmdGhpcy5vUGFyZW50JiZ0aGlzLm9QYXJlbnQuZ2V0TW9kZWwobSkmJm8hPXRoaXMub1BhcmVudC5nZXRNb2RlbChtKSl7cmV0dXJuIHVuZGVmaW5lZH1lbHNle3JldHVybiB0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vQmluZGluZ0NvbnRleHRzW21dfX07ZC5wcm90b3R5cGUuc2V0TW9kZWw9ZnVuY3Rpb24obSxuKXtpZighbSYmdGhpcy5vTW9kZWxzW25dKXtkZWxldGUgdGhpcy5vTW9kZWxzW25dO3RoaXMucHJvcGFnYXRlUHJvcGVydGllcyhuKTt0aGlzLnVwZGF0ZUJpbmRpbmdzKGZhbHNlLG4pfWVsc2UgaWYobSYmbSE9PXRoaXMub01vZGVsc1tuXSl7dGhpcy5vTW9kZWxzW25dPW07dGhpcy5wcm9wYWdhdGVQcm9wZXJ0aWVzKG4pO3RoaXMudXBkYXRlQmluZGluZ0NvbnRleHQoZmFsc2UsdHJ1ZSxuKTt0aGlzLnVwZGF0ZUJpbmRpbmdzKGZhbHNlLG4pfWVsc2V7fXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5wcm9wYWdhdGVQcm9wZXJ0aWVzPWZ1bmN0aW9uKG4pe3ZhciBwPXRoaXMuX2dldFByb3BlcnRpZXNUb1Byb3BhZ2F0ZSgpLHU9bj09PXRydWUsTj11P3VuZGVmaW5lZDpuLHQ9dGhpcztxLmVhY2godGhpcy5tQWdncmVnYXRpb25zLGZ1bmN0aW9uKGEsQSl7aWYoQSBpbnN0YW5jZW9mIGQpe3QuX3Byb3BhZ2F0ZVByb3BlcnRpZXMobixBLHAsdSxOKX1lbHNlIGlmKEEgaW5zdGFuY2VvZiBBcnJheSl7Zm9yKHZhciBpPTA7aTxBLmxlbmd0aDtpKyspe2lmKEFbaV1pbnN0YW5jZW9mIGQpe3QuX3Byb3BhZ2F0ZVByb3BlcnRpZXMobixBW2ldLHAsdSxOKX19fX0pfTtkLnByb3RvdHlwZS5fcHJvcGFnYXRlUHJvcGVydGllcz1mdW5jdGlvbihuLG8scCx1LE4pe2lmKCFwKXtwPXRoaXMuX2dldFByb3BlcnRpZXNUb1Byb3BhZ2F0ZSgpLHU9bj09PXRydWUsTj11P3VuZGVmaW5lZDpufW8ub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzPXA7by51cGRhdGVCaW5kaW5ncyh1LE4pO28udXBkYXRlQmluZGluZ0NvbnRleHQoZmFsc2UsdHJ1ZSxOLHUpO28ucHJvcGFnYXRlUHJvcGVydGllcyhuKX07ZC5wcm90b3R5cGUuX2dldFByb3BlcnRpZXNUb1Byb3BhZ2F0ZT1mdW5jdGlvbigpe3ZhciBuPXEuaXNFbXB0eU9iamVjdCh0aGlzLm9Nb2RlbHMpLE49cS5pc0VtcHR5T2JqZWN0KHRoaXMub0JpbmRpbmdDb250ZXh0cyk7ZnVuY3Rpb24gbShlLG8sYSl7cmV0dXJuIGU/bzpxLmV4dGVuZCh7fSxvLGEpfWlmKE4mJm4pe3JldHVybiB0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllc31lbHNle3JldHVybntvTW9kZWxzOm0obix0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vTW9kZWxzLHRoaXMub01vZGVscyksb0JpbmRpbmdDb250ZXh0czptKE4sdGhpcy5vUHJvcGFnYXRlZFByb3BlcnRpZXMub0JpbmRpbmdDb250ZXh0cyx0aGlzLm9CaW5kaW5nQ29udGV4dHMpfX19O2QucHJvdG90eXBlLmdldE1vZGVsPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLm9Nb2RlbHNbbl18fHRoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9Nb2RlbHNbbl19O2QucHJvdG90eXBlLmhhc01vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuIShxLmlzRW1wdHlPYmplY3QodGhpcy5vTW9kZWxzKSYmcS5pc0VtcHR5T2JqZWN0KHRoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9Nb2RlbHMpKX07ZC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oSSxsLG8pe3ZhciB0PXRoaXMsYT10cnVlLGU9dHJ1ZTtpZihvKXthPSEhby5jbG9uZUNoaWxkcmVuO2U9ISFvLmNsb25lQmluZGluZ3N9aWYoIUkpe0k9TS51aWQoImNsb25lIil8fHEuc2FwLnVpZCgpfWlmKCFsJiZhKXtsPXEubWFwKHRoaXMuZmluZEFnZ3JlZ2F0ZWRPYmplY3RzKHRydWUpLGZ1bmN0aW9uKE8pe3JldHVybiBPLmdldElkKCl9KX12YXIgbT10aGlzLmdldE1ldGFkYXRhKCksZj1tLl9vQ2xhc3Mscz10aGlzLmdldElkKCkrIi0iK0ksUz17fSxwPXRoaXMubVByb3BlcnRpZXMsayxnLGg9ZC5iaW5kaW5nUGFyc2VyLmVzY2FwZTtmb3IoayBpbiBwKXtpZihwLmhhc093blByb3BlcnR5KGspJiYhKHRoaXMuaXNCb3VuZChrKSYmZSkpe2lmKHR5cGVvZiBwW2tdPT09InN0cmluZyIpe1Nba109aChwW2tdKX1lbHNle1Nba109cFtrXX19fVNbIm1vZGVscyJdPXRoaXMub01vZGVscztTWyJiaW5kaW5nQ29udGV4dHMiXT10aGlzLm9CaW5kaW5nQ29udGV4dHM7aWYoYSl7cS5lYWNoKHRoaXMubUFnZ3JlZ2F0aW9ucyxmdW5jdGlvbihuLEEpe2lmKG0uaGFzQWdncmVnYXRpb24obikmJiEodC5pc0JvdW5kKG4pJiZlKSl7aWYoQSBpbnN0YW5jZW9mIGQpe1Nbbl09QS5jbG9uZShJLGwpfWVsc2UgaWYocS5pc0FycmF5KEEpKXtTW25dPVtdO2Zvcih2YXIgaT0wO2k8QS5sZW5ndGg7aSsrKXtTW25dLnB1c2goQVtpXS5jbG9uZShJLGwpKX19ZWxzZXtTW25dPUF9fX0pO3EuZWFjaCh0aGlzLm1Bc3NvY2lhdGlvbnMsZnVuY3Rpb24obixBKXtpZihxLmlzQXJyYXkoQSkpe0E9QS5zbGljZSgwKTtmb3IodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7aWYocS5pbkFycmF5KEFbaV0sbCk+PTApe0FbaV0rPSItIitJfX19ZWxzZSBpZihxLmluQXJyYXkoQSxsKT49MCl7QSs9Ii0iK0l9U1tuXT1BfSl9Zz1uZXcgZihzLFMpO3EuZWFjaCh0aGlzLm1Cb3VuZE9iamVjdHMsZnVuY3Rpb24obixpKXtnLm1Cb3VuZE9iamVjdHNbbl09cS5leHRlbmQoe30saSl9KTtxLmVhY2godGhpcy5tRXZlbnRSZWdpc3RyeSxmdW5jdGlvbihuLEwpe2cubUV2ZW50UmVnaXN0cnlbbl09TC5zbGljZSgpfSk7aWYoZSl7cS5lYWNoKHRoaXMubUJpbmRpbmdJbmZvcyxmdW5jdGlvbihuLGkpe3ZhciBqPXEuZXh0ZW5kKHt9LGkpO2RlbGV0ZSBqLmJpbmRpbmc7aWYoaS5mYWN0b3J5KXtnLmJpbmRBZ2dyZWdhdGlvbihuLGopfWVsc2V7Zy5iaW5kUHJvcGVydHkobixqKX19KX1yZXR1cm4gZ307ZC5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlPWZ1bmN0aW9uKHApe3ZhciBpO2lmKHA9PT0xKXtxLmVhY2godGhpcy5vTW9kZWxzLGZ1bmN0aW9uKG4sbSl7aWYobSYmbS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlKXttLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2UoKX19KX1lbHNlIGlmKHA9PT0yKXtxLmVhY2godGhpcy5tQmluZGluZ0luZm9zLGZ1bmN0aW9uKG4sbyl7dmFyIFA9by5wYXJ0cztpZihQKXtmb3IoaT0wO2k8UC5sZW5ndGg7aSsrKXtpZihvLnR5cGUmJm8udHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlKXtvLnR5cGUuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSgpfX1pZihvLm1vZGVsQ2hhbmdlSGFuZGxlcil7by5tb2RlbENoYW5nZUhhbmRsZXIoKX19fSl9fTtkLl9tYXBBZ2dyZWdhdGlvbj1mdW5jdGlvbihwLG8sbil7dmFyIGs9cC5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKCk7dmFyIE89a1tvXTt2YXIgTj1rW25dO2lmKCFPfHwhTnx8Ty5faUtpbmQhPTJ8fE4uX2lLaW5kIT0yKXtyZXR1cm59dmFyIGY9eyJpbnNlcnQiOnRydWUsImFkZCI6dHJ1ZSwicmVtb3ZlIjp0cnVlLCJyZW1vdmVBbGwiOmZhbHNlLCJpbmRleE9mIjp0cnVlLCJkZXN0cm95IjpmYWxzZSwiZ2V0IjpmYWxzZX07ZnVuY3Rpb24gbShQLGcpe3JldHVybiBQK2cuc3Vic3RyaW5nKDAsMSkudG9VcHBlckNhc2UoKStnLnN1YnN0cmluZygxKX1mdW5jdGlvbiBhKEYpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW0ZdLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19Zm9yKHZhciBQIGluIGYpe3ZhciBzPW0oUCxmW1BdP08uc2luZ3VsYXJOYW1lOk8uX3NOYW1lKTt2YXIgZT1tKFAsZltQXT9OLnNpbmd1bGFyTmFtZTpOLl9zTmFtZSk7cFtzXT1hKGUpfX07ZC5wcm90b3R5cGUuZmluZEFnZ3JlZ2F0ZWRPYmplY3RzPWZ1bmN0aW9uKHIpe3ZhciBBPVtdO2Z1bmN0aW9uIGYobyl7Zm9yKHZhciBuIGluIG8ubUFnZ3JlZ2F0aW9ucyl7dmFyIGE9by5tQWdncmVnYXRpb25zW25dO2lmKHEuaXNBcnJheShhKSl7Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDtpKyspe0EucHVzaChhW2ldKTtpZihyKXtmKGFbaV0pfX19ZWxzZSBpZihhIGluc3RhbmNlb2YgZCl7QS5wdXNoKGEpO2lmKHIpe2YoYSl9fX19Zih0aGlzKTtyZXR1cm4gQX07cmV0dXJuIGR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5GcmFnbWVudCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkZyYWdtZW50Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvRnJhZ21lbnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0JywnLi9EZWNsYXJhdGl2ZVN1cHBvcnQnLCcuL1hNTFRlbXBsYXRlUHJvY2Vzc29yJ10sZnVuY3Rpb24ocSxNLEQsWCl7InVzZSBzdHJpY3QiO3ZhciByPXt9LHQ9e307dmFyIEY9TS5leHRlbmQoInNhcC51aS5jb3JlLkZyYWdtZW50Iix7bWV0YWRhdGE6e3Byb3BlcnRpZXM6e3R5cGU6InN0cmluZyJ9fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuX2FDb250ZW50JiZ0aGlzLl9hQ29udGVudC5sZW5ndGg9PTEpe3JldHVybiB0aGlzLl9hQ29udGVudFswXX1lbHNle3JldHVybiB0aGlzLl9hQ29udGVudH19fSk7Ri5yZWdpc3RlclR5cGU9ZnVuY3Rpb24oVCxmKXtpZighdHlwZW9mKFQpPT09InN0cmluZyIpe3Euc2FwLmxvZy5lcnJvcigiSWdub3Jpbmcgbm9uLXN0cmluZyBGcmFnbWVudCB0eXBlOiAiK1QpO3JldHVybn1pZih0W1RdKXtxLnNhcC5sb2cud2FybmluZygic2FwLnVpLmNvcmUuRnJhZ21lbnQucmVnaXN0ZXJUeXBlKCk6IEZyYWdtZW50IHR5cGUgJyIrVCsiJyBpcyBhbHJlYWR5IGRlZmluZWQuIE92ZXJyaWRpbmcgdGhpcyB0eXBlIG5vdyEiKX10W1RdPWZ9O0YucHJvdG90eXBlLl9pbml0Q29tcG9zaXRlU3VwcG9ydD1mdW5jdGlvbihzKXtpZighcyl7dGhyb3cgbmV3IEVycm9yKCJTZXR0aW5ncyBtdXN0IGJlIHNldCIpfWlmKCEocy5mcmFnbWVudE5hbWV8fHMuZnJhZ21lbnRDb250ZW50KSl7dGhyb3cgbmV3IEVycm9yKCJQbGVhc2UgcHJvdmlkZSBhIGZyYWdtZW50IG5hbWUiKX1pZihzLm9Db250cm9sbGVyKXt0aGlzLm9Db250cm9sbGVyPXMub0NvbnRyb2xsZXJ9dGhpcy5fc0V4cGxpY2l0SWQ9cy5zSWR8fHMuaWQ7dGhpcy5fc0ZyYWdtZW50TmFtZT1zLmZyYWdtZW50TmFtZTt2YXIgZj10W3MudHlwZV07aWYoZil7Zi5pbml0LmFwcGx5KHRoaXMsW3NdKX1lbHNle3Rocm93IG5ldyBFcnJvcigiTm8gdHlwZSBmb3IgdGhlIGZyYWdtZW50IGhhcyBiZWVuIHNwZWNpZmllZDogIitzLnR5cGUpfX07Ri5wcm90b3R5cGUuZ2V0Q29udHJvbGxlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db250cm9sbGVyfTtGLmJ5SWQ9ZnVuY3Rpb24oZixpKXtpZighKHR5cGVvZihmKT09PSJzdHJpbmciJiZ0eXBlb2YoaSk9PT0ic3RyaW5nIikpe3Euc2FwLmxvZy5lcnJvcigic2FwLnVpLmNvcmUuRnJhZ21lbnQuYnlJZDogdHdvIHN0cmluZ3MgbXVzdCBiZSBnaXZlbiBhcyBwYXJhbWV0ZXJzLCBidXQgYXJlOiAiK2YrIiBhbmQgIitpKTtyZXR1cm4gdW5kZWZpbmVkfXJldHVybiBzYXAudWkuZ2V0Q29yZSgpLmJ5SWQoZisiLS0iK2kpfTtGLmNyZWF0ZUlkPWZ1bmN0aW9uKGYsaSl7aWYoISh0eXBlb2YoZik9PT0ic3RyaW5nIiYmdHlwZW9mKGkpPT09InN0cmluZyIpKXtxLnNhcC5sb2cuZXJyb3IoInNhcC51aS5jb3JlLkZyYWdtZW50LmNyZWF0ZUlkOiB0d28gc3RyaW5ncyBtdXN0IGJlIGdpdmVuIGFzIHBhcmFtZXRlcnMsIGJ1dCBhcmU6ICIrZisiIGFuZCAiK2kpO3JldHVybiB1bmRlZmluZWR9cmV0dXJuIGYrIi0tIitpfTtGLnByb3RvdHlwZS5jcmVhdGVJZD1mdW5jdGlvbihpKXt2YXIgYT10aGlzLl9zRXhwbGljaXRJZD90aGlzLl9zRXhwbGljaXRJZCsiLS0iK2k6aTtpZih0aGlzLl9vQ29udGFpbmluZ1ZpZXcmJnRoaXMuX29Db250YWluaW5nVmlldyE9dGhpcyl7YT10aGlzLl9vQ29udGFpbmluZ1ZpZXcuY3JlYXRlSWQoYSl9cmV0dXJuIGF9O0YucHJvdG90eXBlLmlzU3ViVmlldz1mdW5jdGlvbigpe3JldHVybiB0cnVlfTtzYXAudWkuZnJhZ21lbnQ9ZnVuY3Rpb24obixULGMpe3ZhciBzPXt9O2lmKHR5cGVvZihuKT09PSJzdHJpbmciKXtzLmZyYWdtZW50TmFtZT1uO3Mub0NvbnRyb2xsZXI9YztzLnR5cGU9VH1lbHNlIGlmKHR5cGVvZihuKT09PSJvYmplY3QiKXtzPW47aWYoVCl7cy5vQ29udHJvbGxlcj1UfX1lbHNle3Euc2FwLmxvZy5lcnJvcigic2FwLnVpLmZyYWdtZW50KCkgbXVzdCBiZSBjYWxsZWQgd2l0aCBGcmFnbWVudCBuYW1lIG9yIGNvbmZpZyBvYmplY3QgYXMgZmlyc3QgcGFyYW1ldGVyLCBidXQgaXM6ICIrbil9cmV0dXJuIG5ldyBGKHMpfTtzYXAudWkueG1sZnJhZ21lbnQ9ZnVuY3Rpb24oaSxmLGMpe2lmKHR5cGVvZihpKT09PSJzdHJpbmciKXtpZih0eXBlb2YoZik9PT0ic3RyaW5nIil7cmV0dXJuIHNhcC51aS5mcmFnbWVudCh7ZnJhZ21lbnROYW1lOmYsc0lkOmksdHlwZToiWE1MIn0sYyl9ZWxzZXtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KGksIlhNTCIsZil9fWVsc2V7aS50eXBlPSJYTUwiO3JldHVybiBzYXAudWkuZnJhZ21lbnQoaSxmKX19O3NhcC51aS5qc2ZyYWdtZW50PWZ1bmN0aW9uKG4sZil7aWYodHlwZW9mKG4pPT09InN0cmluZyImJnR5cGVvZihmKT09PSJvYmplY3QiKXtpZihmLmNyZWF0ZUNvbnRlbnQpe3Jbbl09ZjtxLnNhcC5kZWNsYXJlKHttb2ROYW1lOm4sdHlwZToiZnJhZ21lbnQifSxmYWxzZSl9ZWxzZXtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KG4sIkpTIixmKX19ZWxzZSBpZih0eXBlb2Yobik9PT0ic3RyaW5nIiYmZj09PXVuZGVmaW5lZCl7cmV0dXJuIHNhcC51aS5mcmFnbWVudChuLCJKUyIpfWVsc2V7aWYodHlwZW9mKG4pPT09Im9iamVjdCIpe24udHlwZT0iSlMiO3JldHVybiBzYXAudWkuZnJhZ21lbnQobixmKX1lbHNlIGlmKGFyZ3VtZW50cyYmYXJndW1lbnRzLmxlbmd0aD49Myl7cmV0dXJuIHNhcC51aS5mcmFnbWVudCh7aWQ6bixmcmFnbWVudE5hbWU6Zix0eXBlOiJKUyJ9LGFyZ3VtZW50c1syXSl9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoInNhcC51aS5qc2ZyYWdtZW50KCkgd2FzIGNhbGxlZCB3aXRoIHdyb25nIHBhcmFtZXRlciBzZXQ6ICIrbisiICsgIitmKX19fTtzYXAudWkuaHRtbGZyYWdtZW50PWZ1bmN0aW9uKGksZixjKXtpZih0eXBlb2YoaSk9PT0ic3RyaW5nIil7aWYodHlwZW9mKGYpPT09InN0cmluZyIpe3JldHVybiBzYXAudWkuZnJhZ21lbnQoe2ZyYWdtZW50TmFtZTpmLHNJZDppLHR5cGU6IkhUTUwifSxjKX1lbHNle3JldHVybiBzYXAudWkuZnJhZ21lbnQoaSwiSFRNTCIsZil9fWVsc2V7aS50eXBlPSJIVE1MIjtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KGksZil9fTtGLnJlZ2lzdGVyVHlwZSgiWE1MIix7aW5pdDpmdW5jdGlvbihzKXt0aGlzLl94Q29udGVudD1zLmZyYWdtZW50Q29udGVudD8oKHR5cGVvZihzLmZyYWdtZW50Q29udGVudCk9PT0ic3RyaW5nIik/cS5wYXJzZVhNTChzLmZyYWdtZW50Q29udGVudCkuZG9jdW1lbnRFbGVtZW50OnMuZnJhZ21lbnRDb250ZW50KTpYLmxvYWRUZW1wbGF0ZShzLmZyYWdtZW50TmFtZSwiZnJhZ21lbnQiKTt0aGlzLl9vQ29udGFpbmluZ1ZpZXc9dGhpcy5fc0V4cGxpY2l0SWQ/dGhpczoocy5jb250YWluaW5nVmlld3x8dGhpcyk7aWYoKHRoaXMuX29Db250YWluaW5nVmlldz09PXRoaXMpKXt0aGlzLl9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXI9KHMuY29udGFpbmluZ1ZpZXcmJnMuY29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXIpfHxzLm9Db250cm9sbGVyfXZhciBhPXRoaXM7TS5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe3ZhciB4PWEuX3hDb250ZW50O2EuX2FDb250ZW50PVgucGFyc2VUZW1wbGF0ZShhLl94Q29udGVudCxhKX0pfX0pO0YucmVnaXN0ZXJUeXBlKCJKUyIse2luaXQ6ZnVuY3Rpb24ocyl7aWYoIXJbcy5mcmFnbWVudE5hbWVdKXtxLnNhcC5yZXF1aXJlKHttb2ROYW1lOnMuZnJhZ21lbnROYW1lLHR5cGU6ImZyYWdtZW50In0pfXEuZXh0ZW5kKHRoaXMscltzLmZyYWdtZW50TmFtZV0pO3RoaXMuX29Db250YWluaW5nVmlldz1zLmNvbnRhaW5pbmdWaWV3fHx0aGlzO3ZhciBhPXRoaXM7TS5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe3ZhciBjPWEuY3JlYXRlQ29udGVudChzLm9Db250cm9sbGVyfHxhLl9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXIpO2EuX2FDb250ZW50PVtdO2EuX2FDb250ZW50PWEuX2FDb250ZW50LmNvbmNhdChjKX0pfX0pOyhmdW5jdGlvbigpe3ZhciBfPXt9O3ZhciBhPWZ1bmN0aW9uKFQpe3ZhciB1PXEuc2FwLmdldE1vZHVsZVBhdGgoVCwiLmZyYWdtZW50Lmh0bWwiKTt2YXIgaD1fW3VdO3ZhciBSO2lmKCFoKXtSPXEuc2FwLmdldFJlc291cmNlTmFtZShULCIuZnJhZ21lbnQuaHRtbCIpO2g9cS5zYXAubG9hZFJlc291cmNlKFIpO19bdV09aH1yZXR1cm4gaH07Ri5yZWdpc3RlclR5cGUoIkhUTUwiLHtpbml0OmZ1bmN0aW9uKHMpe3RoaXMuX2FDb250ZW50PVtdO3RoaXMuZ2V0Q29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hQ29udGVudH07dGhpcy5hZGRDb250ZW50PWZ1bmN0aW9uKEMpe3RoaXMuX2FDb250ZW50LnB1c2goQyl9O3RoaXMuX29Db250YWluaW5nVmlldz1zLmNvbnRhaW5pbmdWaWV3fHx0aGlzO3ZhciBoPXMuZnJhZ21lbnRDb250ZW50fHxhKHMuZnJhZ21lbnROYW1lKTt0aGlzLl9vVGVtcGxhdGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIEg9c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5wcmVwYXJlSFRNTDUoaCk7aWYodHlwZW9mIEg9PT0ic3RyaW5nIil7dGhpcy5fb1RlbXBsYXRlLmlubmVySFRNTD1IfWVsc2V7dmFyIG49SDt2YXIgZj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe2YuYXBwZW5kQ2hpbGQobi5pdGVtKGkpKX10aGlzLl9vVGVtcGxhdGUuYXBwZW5kQ2hpbGQoZil9dmFyIG09dGhpcy5fb1RlbXBsYXRlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZW1wbGF0ZSIpWzBdO3ZhciBwPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQcm9wZXJ0aWVzKCk7aWYobSl7dmFyIGI9dGhpczt2YXIgYz1EO3EuZWFjaChtLmF0dHJpYnV0ZXMsZnVuY3Rpb24oSSxBKXt2YXIgTj1jLmNvbnZlcnRBdHRyaWJ1dGVUb1NldHRpbmdOYW1lKEEubmFtZSxiLmdldElkKCkpO3ZhciB2PUEudmFsdWU7dmFyIFA9cFtOXTtpZighc1tOXSl7aWYoUCl7c1tOXT1jLmNvbnZlcnRWYWx1ZVRvVHlwZShjLmdldFByb3BlcnR5RGF0YVR5cGUoUCksdil9ZWxzZSBpZihzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcuX21BbGxvd2VkU2V0dGluZ3NbTl0pe3NbTl09dn19fSk7dGhpcy5fb1RlbXBsYXRlPW19aWYodGhpcy5fb1RlbXBsYXRlLmNvbnRlbnQpe3ZhciBmPXRoaXMuX29UZW1wbGF0ZS5jb250ZW50O3RoaXMuX29UZW1wbGF0ZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLl9vVGVtcGxhdGUuYXBwZW5kQ2hpbGQoZil9dmFyIGI9dGhpcztNLnJ1bldpdGhQcmVwcm9jZXNzb3JzKGZ1bmN0aW9uKCl7RC5jb21waWxlKGIuX29UZW1wbGF0ZSxiKTt2YXIgZD1iLmdldENvbnRlbnQoKTtpZihkJiZkLmxlbmd0aD09PTEpe2IuX2FDb250ZW50PVtkWzBdXX1lbHNle319KX19KX0oKSk7cmV0dXJuIEZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5yb3V0aW5nLlJvdXRlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnJvdXRpbmcuUm91dGVyJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5jcm9zc3JvYWRzJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5zaWduYWxzJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvcm91dGluZy9Sb3V0ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJy4vSGFzaENoYW5nZXInLCcuL1JvdXRlJywnc2FwL3VpL3RoaXJkcGFydHkvY3Jvc3Nyb2FkcycsJ3NhcC91aS90aGlyZHBhcnR5L3NpZ25hbHMnXSxmdW5jdGlvbihxLEUsTSxILFIsYyxzKXsidXNlIHN0cmljdCI7dmFyIHI9e307dmFyIGE9RS5leHRlbmQoInNhcC51aS5jb3JlLnJvdXRpbmcuUm91dGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obyxDLE8pe0UuYXBwbHkodGhpcyk7dGhpcy5fb0NvbmZpZz1DO3RoaXMuX29Sb3V0ZXI9Y3Jvc3Nyb2Fkcy5jcmVhdGUoKTt0aGlzLl9vUm91dGVyLmlnbm9yZVN0YXRlPXRydWU7dGhpcy5fb1JvdXRlcz17fTt0aGlzLl9vVmlld3M9e307dGhpcy5fb093bmVyPU87dmFyIHQ9dGhpcztpZighbyl7bz17fX1pZihxLmlzQXJyYXkobykpe3ZhciBiPW87bz17fTtxLmVhY2goYixmdW5jdGlvbihpLGQpe29bZC5uYW1lXT1kfSl9cS5lYWNoKG8sZnVuY3Rpb24oZCxlKXtpZihlLm5hbWU9PXVuZGVmaW5lZCl7ZS5uYW1lPWR9dC5hZGRSb3V0ZShlKX0pfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImluaXRpYWxpemUiLCJnZXRVUkwiLCJyZWdpc3RlciJdfX0pO2EuTV9FVkVOVFM9e1JvdXRlTWF0Y2hlZDoicm91dGVNYXRjaGVkIixSb3V0ZVBhdHRlcm5NYXRjaGVkOiJyb3V0ZVBhdHRlcm5NYXRjaGVkIixWaWV3Q3JlYXRlZDoidmlld0NyZWF0ZWQifTthLnByb3RvdHlwZS5hZGRSb3V0ZT1mdW5jdGlvbihDLHApe2lmKCFDLm5hbWUpe3Euc2FwLmxvZy5lcnJvcigiQSBuYW1lIGhhcyB0byBiZSBzcGVjaWZpZWQgZm9yIGV2ZXJ5IHJvdXRlIil9aWYodGhpcy5fb1JvdXRlc1tDLm5hbWVdKXtxLnNhcC5sb2cuZXJyb3IoIlJvdXRlIHdpdGggbmFtZSAiK0MubmFtZSsiIGFscmVhZHkgZXhpc3RzIil9dGhpcy5fb1JvdXRlc1tDLm5hbWVdPW5ldyBSKHRoaXMsQyxwKX07YS5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24obixvKXt0aGlzLl9vUm91dGVyLnBhcnNlKG4pfTthLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxoPXRoaXMub0hhc2hDaGFuZ2VyPUguZ2V0SW5zdGFuY2UoKTtpZih0aGlzLl9iSXNJbml0aWFsaXplZCl7cS5zYXAubG9nLndhcm5pbmcoIlJvdXRlciBpcyBhbHJlYWR5IGluaXRpYWxpemVkLiIpO3JldHVybiB0aGlzfXRoaXMuX2JJc0luaXRpYWxpemVkPXRydWU7dGhpcy5mbkhhc2hDaGFuZ2VkPWZ1bmN0aW9uKGUpe3QucGFyc2UoZS5nZXRQYXJhbWV0ZXIoIm5ld0hhc2giKSxlLmdldFBhcmFtZXRlcigib2xkSGFzaCIpKX07aC5hdHRhY2hFdmVudCgiaGFzaENoYW5nZWQiLHRoaXMuZm5IYXNoQ2hhbmdlZCk7aWYoIWguaW5pdCgpKXt0aGlzLnBhcnNlKGguZ2V0SGFzaCgpKX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe2lmKCF0aGlzLl9iSXNJbml0aWFsaXplZCl7cS5zYXAubG9nLndhcm5pbmcoIlJvdXRlciBpcyBub3QgaW5pdGlhbGl6ZWQuIEJ1dCBpdCBnb3Qgc3RvcHBlZCIpfWlmKHRoaXMuZm5IYXNoQ2hhbmdlZCl7dGhpcy5vSGFzaENoYW5nZXIuZGV0YWNoRXZlbnQoImhhc2hDaGFuZ2VkIix0aGlzLmZuSGFzaENoYW5nZWQpfXRoaXMuX2JJc0luaXRpYWxpemVkPWZhbHNlO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7RS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKTtpZighdGhpcy5fYklzSW5pdGlhbGl6ZWQpe3Euc2FwLmxvZy5pbmZvKCJSb3V0ZXIgaXMgbm90IGluaXRpYWxpemVkLCBidXQgZ290IGRlc3Ryb3llZC4iKX1pZih0aGlzLmZuSGFzaENoYW5nZWQpe3RoaXMub0hhc2hDaGFuZ2VyLmRldGFjaEV2ZW50KCJoYXNoQ2hhbmdlZCIsdGhpcy5mbkhhc2hDaGFuZ2VkKX10aGlzLl9vT3duZXI9bnVsbDt0aGlzLl9vUm91dGVyLnJlbW92ZUFsbFJvdXRlcygpO3RoaXMuX29Sb3V0ZXI9bnVsbDtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZ2V0VVJMPWZ1bmN0aW9uKG4scCl7aWYocD09PXVuZGVmaW5lZCl7cD17fX12YXIgbz10aGlzLl9vUm91dGVzW25dO2lmKCFvKXtxLnNhcC5sb2cud2FybmluZygiUm91dGUgd2l0aCBuYW1lICIrbisiIGRvZXMgbm90IGV4aXN0Iik7cmV0dXJufXJldHVybiBvLmdldFVSTChwKX07YS5wcm90b3R5cGUuZ2V0Vmlldz1mdW5jdGlvbih2LFYsYil7aWYoIXYpe3Euc2FwLmxvZy5lcnJvcigiQSBuYW1lIGZvciB0aGUgdmlldyBoYXMgdG8gYmUgZGVmaW5lZCIpfWlmKCF0aGlzLl9vVmlld3Nbdl0pe3ZhciBDPWZ1bmN0aW9uKCl7dmFyIG89e3R5cGU6Vix2aWV3TmFtZTp2fTtpZihiKXtvLmlkPWJ9cmV0dXJuIHNhcC51aS52aWV3KG8pfTtpZih0aGlzLl9vT3duZXIpe3ZhciB0PXRoaXM7TS5ydW5XaXRoT3duZXIoZnVuY3Rpb24oKXt0Ll9vVmlld3Nbdl09QygpfSx0aGlzLl9vT3duZXIpfWVsc2V7dGhpcy5fb1ZpZXdzW3ZdPUMoKX10aGlzLmZpcmVWaWV3Q3JlYXRlZCh7dmlldzp0aGlzLl9vVmlld3Nbdl0sdmlld05hbWU6dix0eXBlOlZ9KX1yZXR1cm4gdGhpcy5fb1ZpZXdzW3ZdfTthLnByb3RvdHlwZS5zZXRWaWV3PWZ1bmN0aW9uKHYsVil7aWYoIXYpe3Euc2FwLmxvZy5lcnJvcigiQSBuYW1lIGZvciB0aGUgdmlldyBoYXMgdG8gYmUgZGVmaW5lZCIpfXRoaXMuX29WaWV3c1t2XT1WfTthLnByb3RvdHlwZS5uYXZUbz1mdW5jdGlvbihuLHAsYil7aWYoYil7dGhpcy5vSGFzaENoYW5nZXIucmVwbGFjZUhhc2godGhpcy5nZXRVUkwobixwKSl9ZWxzZXt0aGlzLm9IYXNoQ2hhbmdlci5zZXRIYXNoKHRoaXMuZ2V0VVJMKG4scCkpfX07YS5wcm90b3R5cGUuYXR0YWNoUm91dGVNYXRjaGVkPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJyb3V0ZU1hdGNoZWQiLGQsZixsKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZGV0YWNoUm91dGVNYXRjaGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgicm91dGVNYXRjaGVkIixmLGwpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5maXJlUm91dGVNYXRjaGVkPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJyb3V0ZU1hdGNoZWQiLEEpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5hdHRhY2hWaWV3Q3JlYXRlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgidmlld0NyZWF0ZWQiLGQsZixsKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZGV0YWNoVmlld0NyZWF0ZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJ2aWV3Q3JlYXRlZCIsZixsKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZmlyZVZpZXdDcmVhdGVkPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJ2aWV3Q3JlYXRlZCIsQSk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmF0dGFjaFJvdXRlUGF0dGVybk1hdGNoZWQ9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoInJvdXRlUGF0dGVybk1hdGNoZWQiLGQsZixsKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZGV0YWNoUm91dGVQYXR0ZXJuTWF0Y2hlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoInJvdXRlUGF0dGVybk1hdGNoZWQiLGYsbCk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmZpcmVSb3V0ZVBhdHRlcm5NYXRjaGVkPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJyb3V0ZVBhdHRlcm5NYXRjaGVkIixBKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24obil7cltuXT10aGlzO3JldHVybiB0aGlzfTthLmdldFJvdXRlcj1mdW5jdGlvbihuKXtyZXR1cm4gcltuXX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3RtcGwvVGVtcGxhdGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0J10sZnVuY3Rpb24ocSxNKXsidXNlIHN0cmljdCI7dmFyIFQ9TS5leHRlbmQoInNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxtZXRhZGF0YTp7c3RlcmVvdHlwZToidGVtcGxhdGUiLCJhYnN0cmFjdCI6dHJ1ZSxwcm9wZXJ0aWVzOnsiY29udGVudCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfX0scHVibGljTWV0aG9kczpbImRlY2xhcmVDb250cm9sIiwiY3JlYXRlQ29udHJvbCIsInBsYWNlQXQiLCJjcmVhdGVNZXRhZGF0YSIsImNyZWF0ZVJlbmRlcmVyIl0sbGlicmFyeToic2FwLnVpLmNvcmUifX0pO1QucHJvdG90eXBlLmdldEludGVyZmFjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtULl9tU3VwcG9ydGVkVHlwZXM9e307VC5yZWdpc3RlclR5cGU9ZnVuY3Rpb24odCxjKXtULl9tU3VwcG9ydGVkVHlwZXNbdF09Y307VC51bnJlZ2lzdGVyVHlwZT1mdW5jdGlvbih0KXtkZWxldGUgVC5fbVN1cHBvcnRlZFR5cGVzW3RdfTtULnBhcnNlUGF0aD1mdW5jdGlvbihwKXt2YXIgbT11bmRlZmluZWQscz1wLmluZGV4T2YoIj4iKTtpZihzPjApe209cC5zdWJzdHIoMCxzKTtwPXAuc3Vic3RyKHMrMSl9cmV0dXJue3BhdGg6cCxtb2RlbDptfX07VC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihzLFMpe2lmKHRoaXMuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCk9PT0ic2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZSIpe3Rocm93IG5ldyBFcnJvcigiVGhlIGNsYXNzICdzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlJyBpcyBhYnN0cmFjdCBhbmQgbXVzdCBub3QgYmUgaW5zdGFudGlhdGVkISIpfWlmKE0uYmluZGluZ1BhcnNlcj09PXNhcC51aS5iYXNlLkJpbmRpbmdQYXJzZXIuY29tcGxleFBhcnNlcil7VC5wcm90b3R5cGUuZXh0cmFjdEJpbmRpbmdJbmZvPWZ1bmN0aW9uKHYsaSxTKXtNLmJpbmRpbmdQYXJzZXI9c2FwLnVpLmJhc2UuQmluZGluZ1BhcnNlci5zaW1wbGVQYXJzZXI7dmFyIHI9c2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUuZXh0cmFjdEJpbmRpbmdJbmZvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtNLmJpbmRpbmdQYXJzZXI9c2FwLnVpLmJhc2UuQmluZGluZ1BhcnNlci5jb21wbGV4UGFyc2VyO3JldHVybiByfX19O1QucHJvdG90eXBlLmRlY2xhcmVDb250cm9sPWZ1bmN0aW9uKGMpe2lmKGMpe3ZhciBtPXRoaXMuY3JlYXRlTWV0YWRhdGEoKSxyPXRoaXMuY3JlYXRlUmVuZGVyZXIoKSx0PXRoaXM7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wiKTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5leHRlbmQoYyx7bWV0YWRhdGE6bSxpbml0OmZ1bmN0aW9uKCl7c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc2V0VGVtcGxhdGUodCl9LHJlbmRlcmVyOntyZW5kZXJUZW1wbGF0ZTpyfX0pO3JldHVybiBxLnNhcC5nZXRPYmplY3QoYyl9fTtULnByb3RvdHlwZS5jcmVhdGVDb250cm9sPWZ1bmN0aW9uKGksYyx2KXtxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbCIpO3ZhciBDPW5ldyBzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbCh7aWQ6aSx0ZW1wbGF0ZTp0aGlzLGNvbnRleHQ6Y30pO0Muc2V0VGVtcGxhdGVSZW5kZXJlcih0aGlzLmNyZWF0ZVJlbmRlcmVyKHYpKTtyZXR1cm4gQ307VC5wcm90b3R5cGUucGxhY2VBdD1mdW5jdGlvbihyLGMscCxpKXtpZih0eXBlb2YgYz09PSJzdHJpbmcifHx0eXBlb2YgYz09PSJudW1iZXIiKXtwPWM7Yz11bmRlZmluZWR9dmFyIEk7aWYoIShyIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuQ29udHJvbCkmJmkpe3ZhciAkPXR5cGVvZiByPT09InN0cmluZyI/cS5zYXAuYnlJZChyKTpxKHIpO2lmKCQubGVuZ3RoPjApe0k9JC5hdHRyKCJpZCIpO3I9JC5nZXQoMCk7dmFyIEM9JC5hdHRyKCJkYXRhLWNvbnRleHQiKTtjPWN8fEMmJnEucGFyc2VKU09OKEMpO3NhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIubWFya0lubGluZVRlbXBsYXRlKCQpfX12YXIgbz10aGlzLmNyZWF0ZUNvbnRyb2woSSxjKTtvLnBsYWNlQXQocixwKTtyZXR1cm4gb307VC5wcm90b3R5cGUuY3JlYXRlTWV0YWRhdGE9ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZXJyb3IoIlRoZSBmdW5jdGlvbiBjcmVhdGVNZXRhZGF0YSBpcyBhbiBhYnN0cmFjdCBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzc2VzLiIpfTtULnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlcj1mdW5jdGlvbigpe3Euc2FwLmxvZy5lcnJvcigiVGhlIGZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyIGlzIGFuIGFic3RyYWN0IGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNsYXNzZXMuIil9O3NhcC51aS50ZW1wbGF0ZT1mdW5jdGlvbih0KXtpZighdCl7dmFyIGE9W107cS5lYWNoKFQuX21TdXBwb3J0ZWRUeXBlcyxmdW5jdGlvbihzLGope3EoInNjcmlwdFt0eXBlPSciK3MrIiddLCBbZGF0YS10eXBlPSciK3MrIiddIikuZWFjaChmdW5jdGlvbihtLEUpe2EucHVzaChzYXAudWkudGVtcGxhdGUoe2lkOkUuaWQsZG9tcmVmOkUsdHlwZTpzLF9jbGFzczpqfSkpfSl9KTtyZXR1cm4gYX1lbHNle2lmKHR5cGVvZiB0PT09InN0cmluZyIpe3JldHVybiBzYXAudWkudGVtcGxhdGUoe2lkOnR9KX1lbHNlIGlmKHQmJnQudGFnTmFtZSYmdC5ub2RlTmFtZSYmdC5vd25lckRvY3VtZW50JiZ0Lm5vZGVUeXBlPT09MSl7cmV0dXJuIHNhcC51aS50ZW1wbGF0ZSh7aWQ6dC5pZCxkb21yZWY6dH0pfXQ9cS5leHRlbmQoe3R5cGU6VC5ERUZBVUxUX1RFTVBMQVRFfSx0KTt2YXIgaSxzLGMsQyxyLGI9ZmFsc2UsbD10eXBlb2YgdC5zcmM9PT0ic3RyaW5nIjtpZihsKXt2YXIgUj1xLnNhcC5zamF4KHt1cmw6dC5zcmMsZGF0YVR5cGU6InRleHQifSk7aWYoUi5zdWNjZXNzKXtpPXQuaWQscz10LnR5cGUsYz10LmNvbnRyb2wsQz1SLmRhdGE7dmFyIGQ9L148IS0tXHNVSTU6VGVtcGxhdGVcc3R5cGU9KFthLXpcL1wtXSopXHMoPzpjb250cm9sbGVyPShbQS1aYS16Ll0qKVxzKT8tLT4vLGU9Qy5tYXRjaChkKTtpZihlKXtzPWVbMV07aWYoZS5sZW5ndGg9PTMpe2I9ZVsyXX1DPUMuc3Vic3RyKGVbMF0ubGVuZ3RoKX19ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIlRoZSB0ZW1wbGF0ZSBjb3VsZCBub3QgYmUgbG9hZGVkIGZyb20gIit0LnNyYysiISIpfX1lbHNle3ZhciBFPXQuZG9tcmVmfHxxLnNhcC5kb21CeUlkKHQuaWQpLCQ9cShFKSxJPWZhbHNlO2k9dC5pZHx8RSYmRS5pZDtzPSQuYXR0cigidHlwZSIpfHx0LnR5cGUsYz0kLmF0dHIoImRhdGEtY29udHJvbCIpfHx0LmNvbnRyb2w7aWYoaSl7dmFyIGY9c2FwLnVpLmdldENvcmUoKS5nZXRUZW1wbGF0ZShpKTtpZighZiBpbnN0YW5jZW9mIFQpe3Rocm93IG5ldyBFcnJvcigiT2JqZWN0IGZvciBpZCBcIiIraSsiXCIgaXMgbm8gc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZSEiKX1lbHNle2lmKGYpe3JldHVybiBmfX19aWYoJC5sZW5ndGg9PT0wKXt0aHJvdyBuZXcgRXJyb3IoIkRPTSBlbGVtZW50IGZvciB0aGUgVGVtcGxhdGUgd2l0aCB0aGUgaWQgXCIiK2krIlwiIG5vdCBmb3VuZCEiKX1DPSQuaHRtbCgpO3ZhciBnPS9wYXRoPSIoXHd8XC98Jmd0OykrIi9pO2lmKGcudGVzdChDKSl7Qz1DLnJlcGxhY2UoIiZndDsiLCI+Iil9dmFyIGg9RS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7aWYoaCE9PSJzY3JpcHQiKXtJPSQucGFyZW50cygiYm9keSIpLmxlbmd0aD09PTF9fXZhciBqPXQuX2NsYXNzO2lmKCFqKXtqPVQuX21TdXBwb3J0ZWRUeXBlc1tzXTtpZighail7dGhyb3cgbmV3IEVycm9yKCJUaGUgdHlwZSBcIiIrcysiXCIgaXMgbm90IHN1cHBvcnRlZC4iKX19cS5zYXAucmVxdWlyZShqKTt2YXIgbz1xLnNhcC5nZXRPYmplY3Qoaik7dmFyIGs9bmV3IG8oe2lkOmksY29udGVudDpDfSk7aWYoYyl7ay5kZWNsYXJlQ29udHJvbChjKX1pZihiKXtrLl9zQ29udHJvbGxlck5hbWU9Yn1pZihJKXtrLnBsYWNlQXQoaSx0LmNvbnRleHQsdW5kZWZpbmVkLHRydWUpfXJldHVybiBrfX07VC5ERUZBVUxUX1RFTVBMQVRFPSJ0ZXh0L3gtaGFuZGxlYmFycy10ZW1wbGF0ZSI7VC5yZWdpc3RlclR5cGUoVC5ERUZBVUxUX1RFTVBMQVRFLCJzYXAudWkuY29yZS50bXBsLkhhbmRsZWJhcnNUZW1wbGF0ZSIpO3JldHVybiBUfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRUeXBlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRUeXBlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9FeHBvcnRUeXBlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCddLGZ1bmN0aW9uKHEsTSl7J3VzZSBzdHJpY3QnO3ZhciBFPU0uZXh0ZW5kKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydFR5cGUnLHttZXRhZGF0YTp7cHJvcGVydGllczp7ZmlsZUV4dGVuc2lvbjonc3RyaW5nJyxtaW1lVHlwZTonc3RyaW5nJyxjaGFyc2V0OidzdHJpbmcnfX19KTtFLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5fb0V4cG9ydD1udWxsfTtFLnByb3RvdHlwZS5fZ2VuZXJhdGU9ZnVuY3Rpb24oZSl7dGhpcy5fb0V4cG9ydD1lO3ZhciBjPXRoaXMuZ2VuZXJhdGUoKTt0aGlzLl9vRXhwb3J0PW51bGw7cmV0dXJuIGN9O0UucHJvdG90eXBlLmdlbmVyYXRlPWZ1bmN0aW9uKCl7cmV0dXJuJyd9O0UucHJvdG90eXBlLmdldENvbHVtbkNvdW50PWZ1bmN0aW9uKCl7aWYodGhpcy5fb0V4cG9ydCl7cmV0dXJuIHRoaXMuX29FeHBvcnQuZ2V0Q29sdW1ucygpLmxlbmd0aH1yZXR1cm4gMH07RS5wcm90b3R5cGUuZ2V0Um93Q291bnQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9vRXhwb3J0JiZ0aGlzLl9vRXhwb3J0LmdldEJpbmRpbmcoInJvd3MiKSl7cmV0dXJuIHRoaXMuX29FeHBvcnQuZ2V0QmluZGluZygicm93cyIpLmdldExlbmd0aCgpfXJldHVybiAwfTtFLnByb3RvdHlwZS5jb2x1bW5HZW5lcmF0b3I9ZnVuY3Rpb24oKXt2YXIgaT0wLGM9dGhpcy5fb0V4cG9ydC5nZXRDb2x1bW5zKCksQz1jLmxlbmd0aDtyZXR1cm57bmV4dDpmdW5jdGlvbigpe2lmKGk8Qyl7dmFyIEk9aTtpKys7cmV0dXJue3ZhbHVlOntpbmRleDpJLG5hbWU6Y1tJXS5nZXROYW1lKCl9LGRvbmU6ZmFsc2V9fWVsc2V7cmV0dXJue3ZhbHVlOnVuZGVmaW5lZCxkb25lOnRydWV9fX19fTtFLnByb3RvdHlwZS5jZWxsR2VuZXJhdG9yPWZ1bmN0aW9uKCl7dmFyIGk9MCxyPXRoaXMuX29FeHBvcnQuZ2V0QWdncmVnYXRpb24oJ190ZW1wbGF0ZScpLGM9ci5nZXRDZWxscygpLEM9Yy5sZW5ndGg7cmV0dXJue25leHQ6ZnVuY3Rpb24oKXtpZihpPEMpe3ZhciBJPWk7aSsrO3ZhciBtPXt9O3EuZWFjaChjW0ldLmdldEN1c3RvbURhdGEoKSxmdW5jdGlvbigpe21bdGhpcy5nZXRLZXkoKV09dGhpcy5nZXRWYWx1ZSgpfSk7cmV0dXJue3ZhbHVlOntpbmRleDpJLGNvbnRlbnQ6Y1tJXS5nZXRDb250ZW50KCksY3VzdG9tRGF0YTptfSxkb25lOmZhbHNlfX1lbHNle3JldHVybnt2YWx1ZTp1bmRlZmluZWQsZG9uZTp0cnVlfX19fX07RS5wcm90b3R5cGUucm93R2VuZXJhdG9yPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPTAsZT10aGlzLl9vRXhwb3J0LGI9ZS5nZXRCaW5kaW5nKCJyb3dzIiksQj1lLmdldEJpbmRpbmdJbmZvKCJyb3dzIiksYz1iLmdldENvbnRleHRzKDAsYi5nZXRMZW5ndGgoKSksQz1jLmxlbmd0aCxyPWUuZ2V0QWdncmVnYXRpb24oJ190ZW1wbGF0ZScpO3JldHVybntuZXh0OmZ1bmN0aW9uKCl7aWYoaTxDKXt2YXIgST1pO2krKztyLnNldEJpbmRpbmdDb250ZXh0KGNbSV0sQi5tb2RlbCk7cmV0dXJue3ZhbHVlOntpbmRleDpJLGNlbGxzOnQuY2VsbEdlbmVyYXRvcigpfSxkb25lOmZhbHNlfX1lbHNle3JldHVybnt2YWx1ZTp1bmRlZmluZWQsZG9uZTp0cnVlfX19fX07cmV0dXJuIEV9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydFR5cGVDU1YnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydFR5cGVDU1YnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL0V4cG9ydFR5cGVDU1YiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0V4cG9ydFR5cGUnXSxmdW5jdGlvbihxLEUpeyd1c2Ugc3RyaWN0Jzt2YXIgQz1FLmV4dGVuZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRUeXBlQ1NWJyx7bWV0YWRhdGE6e3Byb3BlcnRpZXM6e3NlcGFyYXRvckNoYXI6e3R5cGU6J3N0cmluZycsZGVmYXVsdFZhbHVlOicsJ319fX0pO0MucHJvdG90eXBlLnNldFNlcGFyYXRvckNoYXI9ZnVuY3Rpb24ocyl7dmFyIHM9dGhpcy52YWxpZGF0ZVByb3BlcnR5KCdzZXBhcmF0b3JDaGFyJyxzKTtpZihzLmxlbmd0aD4xKXt0aHJvdyBuZXcgRXJyb3IoIlZhbHVlIG9mIHByb3BlcnR5IFwic2VwYXJhdG9yQ2hhclwiIG5lZWRzIHRvIGJlIGV4YWN0bHkgb25lIGNoYXJhY3RlciBvciBlbXB0eS4gIisiXCIiK3MrIlwiIGlzICIrcy5sZW5ndGgrIiBjaGFyYWN0ZXJzIGxvbmcuIil9cmV0dXJuIHRoaXMuc2V0UHJvcGVydHkoJ3NlcGFyYXRvckNoYXInLHMpfTtDLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5zZXRQcm9wZXJ0eSgnZmlsZUV4dGVuc2lvbicsJ2NzdicsdHJ1ZSk7dGhpcy5zZXRQcm9wZXJ0eSgnbWltZVR5cGUnLCd0ZXh0L2NzdicsdHJ1ZSk7dGhpcy5zZXRQcm9wZXJ0eSgnY2hhcnNldCcsJ3V0Zi04Jyx0cnVlKX07Qy5wcm90b3R5cGUuZXNjYXBlQ29udGVudD1mdW5jdGlvbih2KXtpZih2JiYodi5pbmRleE9mKHRoaXMuZ2V0U2VwYXJhdG9yQ2hhcigpKT4tMXx8di5pbmRleE9mKCdcclxuJyk+LTEpKXt2PXYucmVwbGFjZSgvIi9nLCciIicpO3Y9JyInK3YrJyInfXJldHVybiB2fTtDLnByb3RvdHlwZS5nZW5lcmF0ZT1mdW5jdGlvbigpe3ZhciBiPVtdO3RoaXMuZ2VuZXJhdGVDb2x1bW5zKGIpO3RoaXMuZ2VuZXJhdGVSb3dzKGIpO3JldHVybiBiLmpvaW4oJ1xyXG4nKX07Qy5wcm90b3R5cGUuZ2VuZXJhdGVDb2x1bW5zPWZ1bmN0aW9uKGIpe3ZhciBjPVtdLG89dGhpcy5jb2x1bW5HZW5lcmF0b3IoKSxhO3doaWxlKCEoYT1vLm5leHQoKSkuZG9uZSl7Yy5wdXNoKHRoaXMuZXNjYXBlQ29udGVudChhLnZhbHVlLm5hbWUpKX1iLnB1c2goYy5qb2luKHRoaXMuZ2V0U2VwYXJhdG9yQ2hhcigpKSl9O0MucHJvdG90eXBlLmdlbmVyYXRlUm93cz1mdW5jdGlvbihiKXt2YXIgcj10aGlzLnJvd0dlbmVyYXRvcigpLFI7d2hpbGUoIShSPXIubmV4dCgpKS5kb25lKXt2YXIgYT1bXTt2YXIgYz1SLnZhbHVlLmNlbGxzLG87d2hpbGUoIShvPWMubmV4dCgpKS5kb25lKXthLnB1c2godGhpcy5lc2NhcGVDb250ZW50KG8udmFsdWUuY29udGVudCkpfWIucHVzaChhLmpvaW4odGhpcy5nZXRTZXBhcmF0b3JDaGFyKCkpKX19O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5Nb2NrU2VydmVyJykpewovKgogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5Nb2NrU2VydmVyJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5zaW5vbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvTW9ja1NlcnZlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9EZXZpY2UnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0Jywnc2FwL3VpL3RoaXJkcGFydHkvc2lub24nXSxmdW5jdGlvbihxLEQsTSxkKXsidXNlIHN0cmljdCI7aWYoISFELmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXIpe3Euc2FwLnJlcXVpcmUoInNhcC51aS50aGlyZHBhcnR5LnNpbm9uLWllIil9dmFyIGY9TS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuTW9ja1NlcnZlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyxTKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmLl9hU2VydmVycy5wdXNoKHRoaXMpfSxtZXRhZGF0YTp7cHJvcGVydGllczp7cm9vdFVyaToic3RyaW5nIixyZXF1ZXN0czp7dHlwZToib2JqZWN0W10iLGRlZmF1bHRWYWx1ZTpbXX19fSxfb1NlcnZlcjpudWxsLF9hRmlsdGVyOm51bGwsX29Nb2NrZGF0YTpudWxsLF9vTWV0YWRhdGE6bnVsbCxfc01ldGFkYXRhVXJsOm51bGwsX3NNb2NrZGF0YUJhc2VVcmw6bnVsbCxfbUVudGl0eVNldHM6bnVsbH0pO2YucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5fb1NlcnZlcj1mLl9nZXRJbnN0YW5jZSgpO3RoaXMuX2FGaWx0ZXJzPVtdO3ZhciByPXRoaXMuZ2V0UmVxdWVzdHMoKTt2YXIgbD1yLmxlbmd0aDtmb3IodmFyIGk9MDtpPGw7aSsrKXt2YXIgUj1yW2ldO3RoaXMuX2FkZFJlcXVlc3RIYW5kbGVyKFIubWV0aG9kLFIucGF0aCxSLnJlc3BvbnNlKX19O2YucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtpZih0aGlzLmlzU3RhcnRlZCgpKXt0aGlzLl9yZW1vdmVBbGxSZXF1ZXN0SGFuZGxlcnMoKTt0aGlzLl9yZW1vdmVBbGxGaWx0ZXJzKCk7dGhpcy5fb1NlcnZlcj1udWxsfX07Zi5wcm90b3R5cGUuaXNTdGFydGVkPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9vU2VydmVyfTtmLnByb3RvdHlwZS5fYXBwbHlRdWVyeU9uQ29sbGVjdGlvbj1mdW5jdGlvbihGLFEsZSl7dmFyIGE9US5zcGxpdCgnPScpO3ZhciBvPWFbMV07aWYobz09PSIiKXJldHVybjtpZihvLmxhc3RJbmRleE9mKCcsJyk9PT1vLmxlbmd0aCl7cS5zYXAubG9nLmVycm9yKCJUaGUgVVJJIGlzIHZpb2xhdGluZyB0aGUgY29uc3RydWN0aW9uIHJ1bGVzIGRlZmluZWQgaW4gdGhlIERhdGEgU2VydmljZXMgc3BlY2lmaWNhdGlvbiEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfXN3aXRjaChhWzBdKXtjYXNlIiR0b3AiOmlmKCEobmV3IFJlZ0V4cCgvXlxkKyQvKS50ZXN0KG8pKSl7cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkIHN5c3RlbSBxdWVyeSBvcHRpb25zIHZhbHVlISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9Ri5yZXN1bHRzPUYucmVzdWx0cy5zbGljZSgwLG8pO2JyZWFrO2Nhc2UiJHNraXAiOmlmKCEobmV3IFJlZ0V4cCgvXlxkKyQvKS50ZXN0KG8pKSl7cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkIHN5c3RlbSBxdWVyeSBvcHRpb25zIHZhbHVlISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9Ri5yZXN1bHRzPUYucmVzdWx0cy5zbGljZShvLEYucmVzdWx0cy5sZW5ndGgpO2JyZWFrO2Nhc2UiJG9yZGVyYnkiOkYucmVzdWx0cz10aGlzLl9nZXRPZGF0YVF1ZXJ5T3JkZXJieShGLnJlc3VsdHMsbyk7YnJlYWs7Y2FzZSIkZmlsdGVyIjpGLnJlc3VsdHM9dGhpcy5fcmVjdXJzaXZlT2RhdGFRdWVyeUZpbHRlcihGLnJlc3VsdHMsbyk7YnJlYWs7Y2FzZSIkc2VsZWN0IjpGLnJlc3VsdHM9dGhpcy5fZ2V0T2RhdGFRdWVyeVNlbGVjdChGLnJlc3VsdHMsbyk7YnJlYWs7Y2FzZSIkaW5saW5lY291bnQiOnZhciBjPXRoaXMuX2dldE9kYXRhSW5saW5lQ291bnQoRi5yZXN1bHRzLG8pO2lmKGMpe0YuX19jb3VudD1jfWJyZWFrO2Nhc2UiJGV4cGFuZCI6Ri5yZXN1bHRzPXRoaXMuX2dldE9kYXRhUXVlcnlFeHBhbmQoRi5yZXN1bHRzLG8sZSk7YnJlYWs7Y2FzZSIkZm9ybWF0IjpGLnJlc3VsdHM9dGhpcy5fZ2V0T2RhdGFRdWVyeUZvcm1hdChGLnJlc3VsdHMsbyk7YnJlYWs7ZGVmYXVsdDpxLnNhcC5sb2cuZXJyb3IoIkludmFsaWQgc3lzdGVtIHF1ZXJ5IG9wdGlvbnMgdmFsdWUhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX19O2YucHJvdG90eXBlLl9hcHBseVF1ZXJ5T25FbnRyeT1mdW5jdGlvbihlLFEsRSl7dmFyIGE9US5zcGxpdCgnPScpO3ZhciBvPWFbMV07aWYobz09PSIiKXJldHVybjtpZihvLmxhc3RJbmRleE9mKCcsJyk9PT1vLmxlbmd0aCl7cS5zYXAubG9nLmVycm9yKCJUaGUgVVJJIGlzIHZpb2xhdGluZyB0aGUgY29uc3RydWN0aW9uIHJ1bGVzIGRlZmluZWQgaW4gdGhlIERhdGEgU2VydmljZXMgc3BlY2lmaWNhdGlvbiEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfXN3aXRjaChhWzBdKXtjYXNlIiRmaWx0ZXIiOnJldHVybiB0aGlzLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyKFtlXSxvKVswXTtjYXNlIiRzZWxlY3QiOnJldHVybiB0aGlzLl9nZXRPZGF0YVF1ZXJ5U2VsZWN0KFtlXSxvKVswXTtjYXNlIiRleHBhbmQiOnJldHVybiB0aGlzLl9nZXRPZGF0YVF1ZXJ5RXhwYW5kKFtlXSxvLEUpWzBdO2Nhc2UiJGZvcm1hdCI6cmV0dXJuIHRoaXMuX2dldE9kYXRhUXVlcnlGb3JtYXQoW2VdLG8pO2RlZmF1bHQ6cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkIHN5c3RlbSBxdWVyeSBvcHRpb25zIHZhbHVlISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9fTtmLnByb3RvdHlwZS5fZ2V0T2RhdGFRdWVyeU9yZGVyYnk9ZnVuY3Rpb24oYyxvKXt2YXIgcD1vLnNwbGl0KCcsJyk7dmFyIHQ9dGhpcztxLmVhY2gocCxmdW5jdGlvbihpLFApe3BbaV09dC5fdHJpbShQKX0pO3ZhciBDPWZ1bmN0aW9uIGNvbXBhcmUoYSxiKXtmb3IodmFyIGk9MDtpPHAubGVuZ3RoO2krKyl7dmFyIHM9cFtpXS5zcGxpdCgnICcpO3ZhciBTPTE7aWYocy5sZW5ndGg+MSl7c3dpdGNoKHNbMV0pe2Nhc2UnYXNjJzpTPTE7YnJlYWs7Y2FzZSdkZXNjJzpTPS0xO2JyZWFrO2RlZmF1bHQ6cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkIHNvcnRvcmRlciAnIitzWzFdKyInIGRldGVjdGVkISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9fXZhciBQLGU7dmFyIGg9c1swXS5pbmRleE9mKCIvIik7aWYoaCE9PS0xKXtQPXNbMF0uc3Vic3RyaW5nKGgrMSk7ZT1zWzBdLnN1YnN0cmluZygwLGgpO2lmKCFhW2VdLmhhc093blByb3BlcnR5KFApKXtxLnNhcC5sb2cuZXJyb3IoIlByb3BlcnR5ICIrUCsiIG5vdCBmb3VuZCEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfWlmKGFbZV1bUF08YltlXVtQXSlyZXR1cm4tMSpTO2lmKGFbZV1bUF0+YltlXVtQXSlyZXR1cm4gMSpTfWVsc2V7UD1zWzBdO2lmKCFhLmhhc093blByb3BlcnR5KFApKXtxLnNhcC5sb2cuZXJyb3IoIlByb3BlcnR5ICIrUCsiIG5vdCBmb3VuZCEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfWlmKGFbUF08YltQXSlyZXR1cm4tMSpTO2lmKGFbUF0+YltQXSlyZXR1cm4gMSpTfX1yZXR1cm4gMH07cmV0dXJuIGMuc29ydChDKX07Zi5wcm90b3R5cGUuX2FycmF5VW5pcXVlPWZ1bmN0aW9uKGIpe3ZhciBhPWIuY29uY2F0KCk7Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDsrK2kpe2Zvcih2YXIgaj1pKzE7ajxhLmxlbmd0aDsrK2ope2lmKGFbaV09PT1hW2pdKWEuc3BsaWNlKGotLSwxKX19cmV0dXJuIGF9O2YucHJvdG90eXBlLl9nZXRCcmFja2V0SW5kaWNlcz1mdW5jdGlvbihzKXt2YXIgUz1bXTt2YXIgcj1mYWxzZTt2YXIgaSxlPTA7Zm9yKHZhciBjPTA7YzxzLmxlbmd0aDtjKyspe2lmKHNbY109PT0nKCcpe2lmKC9bc3Vic3RyaW5nb2Z8ZW5kc3dpdGh8c3RhcnRzd2l0aF0kLy50ZXN0KHMuc3Vic3RyaW5nKDAsYykpKXtyPXRydWV9ZWxzZXtTLnB1c2goc1tjXSk7aWYoaT09PXVuZGVmaW5lZCl7aT1jfX19ZWxzZSBpZihzW2NdPT09JyknKXtpZighcil7Uy5wb3AoKTtlPWM7aWYoUy5sZW5ndGg9PT0wKXJldHVybntzdGFydDppLGVuZDplfX1lbHNle3I9ZmFsc2V9fX1yZXR1cm57c3RhcnQ6aSxlbmQ6ZX19O2YucHJvdG90eXBlLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyPWZ1bmN0aW9uKGEsbyl7dmFyIEk9dGhpcy5fZ2V0QnJhY2tldEluZGljZXMobyk7aWYoSS5zdGFydD09PTAmJkkuZW5kPT09by5sZW5ndGgtMSl7bz10aGlzLl90cmltKG8uc3Vic3RyaW5nKEkuc3RhcnQrMSxJLmVuZCkpO3JldHVybiB0aGlzLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyKGEsbyl9dmFyIHI9LyhbXnN1YnN0cmluZ29mfGVuZHN3aXRofHN0YXJ0c3dpdGhdfF4pXCgoLiopXCkvO2lmKHIudGVzdChvKSl7dmFyIGI9by5zdWJzdHJpbmcoSS5zdGFydCxJLmVuZCsxKTt2YXIgYz1uZXcgUmVnRXhwKCIoLiopICsob3J8YW5kKSArKCIrdGhpcy5fdHJpbSh0aGlzLl9lc2NhcGVTdHJpbmdGb3JSZWdFeHAoYikpKyIuKikiKTtpZihJLnN0YXJ0PT09MCl7Yz1uZXcgUmVnRXhwKCIoIit0aGlzLl90cmltKHRoaXMuX2VzY2FwZVN0cmluZ0ZvclJlZ0V4cChiKSkrIikgKyhvcnxhbmQpICsoLiopIil9dmFyIGU9Yy5leGVjKG8pO3ZhciBFPWVbMV07dmFyIE89ZVsyXTt2YXIgcz1lWzNdO3ZhciBTPXRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoYSxFKTt2YXIgaCxwO2lmKE89PT0ib3IiKXtoPXRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoYSxzKTtyZXR1cm4gdGhpcy5fYXJyYXlVbmlxdWUoUy5jb25jYXQoaCkpfWlmKE89PT0iYW5kIil7cmV0dXJuIHRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoUyxzKX19ZWxzZXtwPW8uc3BsaXQoLyArYW5kfG9yICsvKTtpZihwLmxlbmd0aD09PTEpe2lmKG8ubWF0Y2goLyArYW5kfG9yICsvKSl7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1yZXR1cm4gdGhpcy5fZ2V0T2RhdGFRdWVyeUZpbHRlcihhLHRoaXMuX3RyaW0obykpfXZhciBSPXRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoYSxwWzBdKTt2YXIgajtmb3IodmFyIGk9MTtpPHAubGVuZ3RoO2krKyl7aj1uZXcgUmVnRXhwKHRoaXMuX3RyaW0odGhpcy5fZXNjYXBlU3RyaW5nRm9yUmVnRXhwKHBbaS0xXSkpKyIgKyhhbmR8b3IpICsiK3RoaXMuX3RyaW0odGhpcy5fZXNjYXBlU3RyaW5nRm9yUmVnRXhwKHBbaV0pKSk7Tz1qLmV4ZWMobylbMV07aWYoTz09PSJvciIpe2g9dGhpcy5fcmVjdXJzaXZlT2RhdGFRdWVyeUZpbHRlcihhLHBbaV0pO1I9dGhpcy5fYXJyYXlVbmlxdWUoUi5jb25jYXQoaCkpfWlmKE89PT0iYW5kIil7Uj10aGlzLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyKFIscFtpXSl9fXJldHVybiBSfX07Zi5wcm90b3R5cGUuX2dldE9kYXRhUXVlcnlGaWx0ZXI9ZnVuY3Rpb24oYSxvKXtpZihhLmxlbmd0aD09PTApcmV0dXJuIGE7dmFyIHI9bmV3IFJlZ0V4cCgiKC4qKSAoZXF8bmV8Z3R8bHR8bGV8Z2UpICguKikiKTt2YXIgYj1uZXcgUmVnRXhwKCIoZW5kc3dpdGh8c3RhcnRzd2l0aHxzdWJzdHJpbmdvZilcXCgoLiopIik7dmFyIE89bnVsbDt2YXIgYz1yLmV4ZWMobyk7aWYoYyl7Tz1jWzJdfWVsc2V7Yz1iLmV4ZWMobyk7aWYoYyl7Tz1jWzFdfWVsc2V7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX19dmFyIHQ9dGhpczt2YXIgRz1mdW5jdGlvbih2LFYscCxzKXt2YXIgYyxlO2lmKCF2KXtjPXIuZXhlYyhvKTtlPXQuX3RyaW0oY1tWKzFdKTt2YXIgUD10Ll90cmltKGNbcCsxXSl9ZWxzZXt2YXIgaD1uZXcgUmVnRXhwKCIoc3Vic3RyaW5nb2Z8c3RhcnRzd2l0aHxlbmRzd2l0aClcXCgoW14sXFwpXSopLCguKilcXCkiKTtjPWguZXhlYyhvKTtlPXQuX3RyaW0oY1tWKzJdKTtQPXQuX3RyaW0oY1twKzJdKX1pZihlLmluZGV4T2YoImRhdGV0aW1lIik9PT0wKXtlPXQuX2dldEpzb25EYXRlKGUpfWVsc2UgaWYoZT09PSJ0cnVlIil7ZT10cnVlfWVsc2UgaWYoZT09PSJmYWxzZSIpe2U9ZmFsc2V9ZWxzZSBpZih0Ll9pc1ZhbGlkTnVtYmVyKGUpKXtlPXBhcnNlRmxvYXQoZSl9ZWxzZSBpZigoZS5jaGFyQXQoMCk9PT0iJyIpJiYoZS5jaGFyQXQoZS5sZW5ndGgtMSk9PT0iJyIpKXtlPWUuc3Vic3RyKDEsZS5sZW5ndGgtMil9dmFyIEM9UC5pbmRleE9mKCIvIik7aWYoQyE9PS0xKXt2YXIgaT1QLnN1YnN0cmluZyhDKzEpO3ZhciBqPVAuc3Vic3RyaW5nKDAsQyk7aWYoIWFbMF1bal0uaGFzT3duUHJvcGVydHkoaSkpe3Euc2FwLmxvZy5lcnJvcigiUHJvcGVydHkgIitpKyIgbm90IGZvdW5kISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9cmV0dXJuIHMoUCxlLGosaSl9ZWxzZXtpZighYVswXS5oYXNPd25Qcm9wZXJ0eShQKSl7cS5zYXAubG9nLmVycm9yKCJQcm9wZXJ0eSAiK1ArIiBub3QgZm91bmQgZm9yICIrYVswXS5fX21ldGFkYXRhLnR5cGUrIiEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfXJldHVybiBzKFAsZSl9fTtzd2l0Y2goTyl7Y2FzZSJzdWJzdHJpbmdvZiI6cmV0dXJuIEcodHJ1ZSwwLDEsZnVuY3Rpb24ocCx2LEMsUCl7cmV0dXJuIHEuZ3JlcChhLGZ1bmN0aW9uKG0pe2lmKEMmJlApe3JldHVybihtW0NdW1BdLmluZGV4T2YodikhPT0tMSl9cmV0dXJuKG1bcF0uaW5kZXhPZih2KSE9PS0xKX0pfSk7Y2FzZSJzdGFydHN3aXRoIjpyZXR1cm4gRyh0cnVlLDEsMCxmdW5jdGlvbihwLHYsQyxQKXtyZXR1cm4gcS5ncmVwKGEsZnVuY3Rpb24obSl7aWYoQyYmUCl7cmV0dXJuKG1bQ11bUF0uaW5kZXhPZih2KT09PTApfXJldHVybihtW3BdLmluZGV4T2Yodik9PT0wKX0pfSk7Y2FzZSJlbmRzd2l0aCI6cmV0dXJuIEcodHJ1ZSwxLDAsZnVuY3Rpb24ocCx2LEMsUCl7cmV0dXJuIHEuZ3JlcChhLGZ1bmN0aW9uKG0pe2lmKEMmJlApe3JldHVybihtW0NdW1BdLmluZGV4T2Yodik9PT0obVtDXVtQXS5sZW5ndGgtdi5sZW5ndGgpKX1yZXR1cm4obVtwXS5pbmRleE9mKHYpPT09KG1bcF0ubGVuZ3RoLXYubGVuZ3RoKSl9KX0pO2Nhc2UiZXEiOnJldHVybiBHKGZhbHNlLDIsMCxmdW5jdGlvbihwLHYsQyxQKXtyZXR1cm4gcS5ncmVwKGEsZnVuY3Rpb24obSl7aWYoQyYmUCl7cmV0dXJuKG1bQ11bUF09PT12KX1yZXR1cm4obVtwXT09PXYpfSl9KTtjYXNlIm5lIjpyZXR1cm4gRyhmYWxzZSwyLDAsZnVuY3Rpb24ocCx2LEMsUCl7cmV0dXJuIHEuZ3JlcChhLGZ1bmN0aW9uKG0pe2lmKEMmJlApe3JldHVybihtW0NdW1BdIT09dil9cmV0dXJuKG1bcF0hPT12KX0pfSk7Y2FzZSJndCI6cmV0dXJuIEcoZmFsc2UsMiwwLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXT52KX1yZXR1cm4obVtwXT52KX0pfSk7Y2FzZSJsdCI6cmV0dXJuIEcoZmFsc2UsMiwwLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXTx2KX1yZXR1cm4obVtwXTx2KX0pfSk7Y2FzZSJnZSI6cmV0dXJuIEcoZmFsc2UsMiwwLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXT49dil9cmV0dXJuKG1bcF0+PXYpfSl9KTtjYXNlImxlIjpyZXR1cm4gRyhmYWxzZSwyLDAsZnVuY3Rpb24ocCx2LEMsUCl7cmV0dXJuIHEuZ3JlcChhLGZ1bmN0aW9uKG0pe2lmKEMmJlApe3JldHVybihtW0NdW1BdPD12KX1yZXR1cm4obVtwXTw9dil9KX0pO2RlZmF1bHQ6cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkICRmaWx0ZXIgb3BlcmF0b3IgJyIrTysiJyEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfX07Zi5wcm90b3R5cGUuX2dldE9kYXRhUXVlcnlTZWxlY3Q9ZnVuY3Rpb24oYSxvKXt2YXIgcD1vLnNwbGl0KCcsJyk7aWYocS5pbkFycmF5KCIqIixwKSE9PS0xKXtyZXR1cm4gYX12YXIgcz1bXTt2YXIgdD10aGlzO3EuZWFjaChwLGZ1bmN0aW9uKGksUCl7cFtpXT10Ll90cmltKFApfSk7cS5lYWNoKHAsZnVuY3Rpb24oaSxQKXtpZihhLmxlbmd0aD4wJiYhYVswXS5oYXNPd25Qcm9wZXJ0eShQKSl7cS5zYXAubG9nLmVycm9yKCJSZXNvdXJjZSBub3QgZm91bmQgZm9yIHRoZSBzZWxlY3Rpb24gY2xhdXNlICciK1ArIichIik7dGhyb3cgbmV3IEVycm9yKCI0MDQiKX19KTtxLmVhY2goYSxmdW5jdGlvbihpLGIpe3ZhciBQPXEuZXh0ZW5kKHRydWUse30sYik7Zm9yKHZhciBuIGluIFApe2lmKG4hPT0iX19tZXRhZGF0YSImJnEuaW5BcnJheShuLHApPT09LTEpe2RlbGV0ZSBQW25dfX1zLnB1c2goUCl9KTtyZXR1cm4gc307Zi5wcm90b3R5cGUuX2dldE9kYXRhSW5saW5lQ291bnQ9ZnVuY3Rpb24oYSxvKXt2YXIgcD1vLnNwbGl0KCcsJyk7aWYocC5sZW5ndGghPT0xfHwocFswXSE9PSdub25lJyYmcFswXSE9PSdhbGxwYWdlcycpKXtxLnNhcC5sb2cuZXJyb3IoIkludmFsaWQgc3lzdGVtIHF1ZXJ5IG9wdGlvbnMgdmFsdWUhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1pZihwWzBdPT09J25vbmUnKXtyZXR1cm59cmV0dXJuIGEubGVuZ3RofTtmLnByb3RvdHlwZS5fZ2V0T2RhdGFRdWVyeUZvcm1hdD1mdW5jdGlvbihhLG8pe2lmKG8hPT0nanNvbicpe3Euc2FwLmxvZy5lcnJvcigiVW5zdXBwb3J0ZWQgZm9ybWF0IHZhbHVlLiBPbmx5IGpzb24gZm9ybWF0IGlzIHN1cHBvcnRlZCEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfXJldHVybiBhfTtmLnByb3RvdHlwZS5fZ2V0T2RhdGFRdWVyeUV4cGFuZD1mdW5jdGlvbihhLG8sZSl7dmFyIHQ9dGhpczt2YXIgbj1vLnNwbGl0KCcsJyk7cS5lYWNoKG4sZnVuY3Rpb24oaSxwKXtuW2ldPXQuX3RyaW0ocCl9KTt2YXIgRT10Ll9tRW50aXR5U2V0c1tlXS5uYXZwcm9wcztxLmVhY2goYSxmdW5jdGlvbihpLHIpe3EuZWFjaChuLGZ1bmN0aW9uKGksTil7dmFyIGI9Ti5zcGxpdCgiLyIpO3ZhciBzPWJbMF07aWYoIXJbc10pe3Rocm93IG5ldyBFcnJvcigiNDA0Iil9dmFyIGM9cltzXS5yZXN1bHRzfHxyW3NdO2lmKCFjfHwhIWMuX19kZWZlcnJlZCl7Yz1xLmV4dGVuZCh0cnVlLFtdLHQuX3Jlc29sdmVOYXZpZ2F0aW9uKGUscixzKSl9aWYoISFjJiZiLmxlbmd0aD4xKXt2YXIgUj1iLnNwbGljZSgxLGIubGVuZ3RoKS5qb2luKCIvIik7Yz10Ll9nZXRPZGF0YVF1ZXJ5RXhwYW5kKGMsUixFW3NdLnRvLmVudGl0eVNldCl9aWYoRVtzXS50by5tdWx0aXBsaWNpdHk9PT0iKiIpe3Jbc109e3Jlc3VsdHM6Y319ZWxzZXtyW3NdPWNbMF0/Y1swXTp7fX19KX0pO3JldHVybiBhfTtmLnByb3RvdHlwZS5fcmVmcmVzaERhdGE9ZnVuY3Rpb24oKXt0aGlzLl9sb2FkTWV0YWRhdGEodGhpcy5fc01ldGFkYXRhVXJsKTt0aGlzLl9tRW50aXR5U2V0cz10aGlzLl9maW5kRW50aXR5U2V0cyh0aGlzLl9vTWV0YWRhdGEpO2lmKCF0aGlzLl9zTW9ja2RhdGFCYXNlVXJsKXt0aGlzLl9nZW5lcmF0ZU1vY2tkYXRhKHRoaXMuX21FbnRpdHlTZXRzLHRoaXMuX29NZXRhZGF0YSl9ZWxzZXtpZighcS5zYXAuZW5kc1dpdGgodGhpcy5fc01vY2tkYXRhQmFzZVVybCwiLyIpJiYhcS5zYXAuZW5kc1dpdGgodGhpcy5fc01vY2tkYXRhQmFzZVVybCwiLmpzb24iKSl7dGhpcy5fc01vY2tkYXRhQmFzZVVybCs9Ii8ifXRoaXMuX2xvYWRNb2NrZGF0YSh0aGlzLl9tRW50aXR5U2V0cyx0aGlzLl9zTW9ja2RhdGFCYXNlVXJsKX19O2YucHJvdG90eXBlLl9nZXRSb290VXJpPWZ1bmN0aW9uKCl7dmFyIHU9dGhpcy5nZXRSb290VXJpKCk7dT11JiYvKFtePyNdKikoWz8jXS4qKT8vLmV4ZWModSlbMV07cmV0dXJuIHV9O2YucHJvdG90eXBlLl9sb2FkTWV0YWRhdGE9ZnVuY3Rpb24obSl7dmFyIG89cS5zYXAuc2pheCh7dXJsOm0sZGF0YVR5cGU6InhtbCJ9KS5kYXRhO3RoaXMuX29NZXRhZGF0YT1vO3JldHVybiBvfTtmLnByb3RvdHlwZS5fZmluZEVudGl0eVNldHM9ZnVuY3Rpb24obSl7dmFyIGU9e307dmFyIHA9cShtKS5maW5kKCJQcmluY2lwYWwiKTt2YXIgbz1xKG0pLmZpbmQoIkRlcGVuZGVudCIpO3EobSkuZmluZCgiRW50aXR5U2V0IikuZWFjaChmdW5jdGlvbihpLEUpe3ZhciAkPXEoRSk7dmFyIGE9LygoLiopXC4pPyguKikvLmV4ZWMoJC5hdHRyKCJFbnRpdHlUeXBlIikpO2VbJC5hdHRyKCJOYW1lIildPXsibmFtZSI6JC5hdHRyKCJOYW1lIiksInNjaGVtYSI6YVsyXSwidHlwZSI6YVszXSwia2V5cyI6W10sImtleXNUeXBlIjp7fSwibmF2cHJvcHMiOnt9fX0pO3ZhciByPWZ1bmN0aW9uKFIsRil7dmFyIGE9cShtKS5maW5kKCJFbmRbUm9sZT0iK1IrIl0iKTt2YXIgRTt2YXIgcztxLmVhY2goYSxmdW5jdGlvbihpLHYpe2lmKCEhcSh2KS5hdHRyKCJFbnRpdHlTZXQiKSl7RT1xKHYpLmF0dHIoIkVudGl0eVNldCIpfWVsc2V7cz1xKHYpLmF0dHIoIk11bHRpcGxpY2l0eSIpfX0pO3ZhciBQPVtdO3ZhciBiPShGKT9wOm87cShiKS5lYWNoKGZ1bmN0aW9uKGksYyl7aWYoUj09PShxKGMpLmF0dHIoIlJvbGUiKSkpe3EoYykuY2hpbGRyZW4oIlByb3BlcnR5UmVmIikuZWFjaChmdW5jdGlvbihpLGgpe1AucHVzaChxKGgpLmF0dHIoIk5hbWUiKSl9KTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJueyJyb2xlIjpSLCJlbnRpdHlTZXQiOkUsInByb3BSZWYiOlAsIm11bHRpcGxpY2l0eSI6c319O3EuZWFjaChlLGZ1bmN0aW9uKEUsYSl7dmFyICQ9cShtKS5maW5kKCJFbnRpdHlUeXBlW05hbWU9IithLnR5cGUrIl0iKTt2YXIgaz1xKCQpLmZpbmQoIlByb3BlcnR5UmVmIik7cS5lYWNoKGssZnVuY3Rpb24oaSxQKXt2YXIgSz1xKFApLmF0dHIoIk5hbWUiKTthLmtleXMucHVzaChLKTthLmtleXNUeXBlW0tdPXEoJCkuZmluZCgiUHJvcGVydHlbTmFtZT0iK0srIl0iKS5hdHRyKCJUeXBlIil9KTt2YXIgbj1xKG0pLmZpbmQoIkVudGl0eVR5cGVbTmFtZT0iK2EudHlwZSsiXSBOYXZpZ2F0aW9uUHJvcGVydHkiKTtxLmVhY2gobixmdW5jdGlvbihpLE4pe3ZhciBiPXEoTik7YS5uYXZwcm9wc1tiLmF0dHIoIk5hbWUiKV09eyJuYW1lIjpiLmF0dHIoIk5hbWUiKSwiZnJvbSI6cihiLmF0dHIoIkZyb21Sb2xlIiksdHJ1ZSksInRvIjpyKGIuYXR0cigiVG9Sb2xlIiksZmFsc2UpfX0pfSk7cmV0dXJuIGV9O2YucHJvdG90eXBlLl9maW5kRW50aXR5VHlwZXM9ZnVuY3Rpb24obSl7dmFyIGU9e307cShtKS5maW5kKCJFbnRpdHlUeXBlIikuZWFjaChmdW5jdGlvbihpLEUpe3ZhciAkPXEoRSk7ZVskLmF0dHIoIk5hbWUiKV09eyJuYW1lIjokLmF0dHIoIk5hbWUiKSwicHJvcGVydGllcyI6W10sImtleXMiOltdfTskLmZpbmQoIlByb3BlcnR5IikuZWFjaChmdW5jdGlvbihpLHApe3ZhciBQPXEocCk7dmFyIHQ9UC5hdHRyKCJUeXBlIik7ZVskLmF0dHIoIk5hbWUiKV0ucHJvcGVydGllcy5wdXNoKHsic2NoZW1hIjp0LnN1YnN0cmluZygwLHQubGFzdEluZGV4T2YoIi4iKSksInR5cGUiOnQuc3Vic3RyaW5nKHQubGFzdEluZGV4T2YoIi4iKSsxKSwibmFtZSI6UC5hdHRyKCJOYW1lIiksInByZWNpc2lvbiI6UC5hdHRyKCJQcmVjaXNpb24iKSwic2NhbGUiOlAuYXR0cigiU2NhbGUiKX0pfSk7JC5maW5kKCJQcm9wZXJ0eVJlZiIpLmVhY2goZnVuY3Rpb24oaSxrKXt2YXIgSz1xKGspO3ZhciBwPUsuYXR0cigiTmFtZSIpO2VbJC5hdHRyKCJOYW1lIildLmtleXMucHVzaChwKX0pfSk7cmV0dXJuIGV9O2YucHJvdG90eXBlLl9maW5kQ29tcGxleFR5cGVzPWZ1bmN0aW9uKG0pe3ZhciBjPXt9O3EobSkuZmluZCgiQ29tcGxleFR5cGUiKS5lYWNoKGZ1bmN0aW9uKGksQyl7dmFyICQ9cShDKTtjWyQuYXR0cigiTmFtZSIpXT17Im5hbWUiOiQuYXR0cigiTmFtZSIpLCJwcm9wZXJ0aWVzIjpbXX07JC5maW5kKCJQcm9wZXJ0eSIpLmVhY2goZnVuY3Rpb24oaSxwKXt2YXIgUD1xKHApO3ZhciB0PVAuYXR0cigiVHlwZSIpO2NbJC5hdHRyKCJOYW1lIildLnByb3BlcnRpZXMucHVzaCh7InNjaGVtYSI6dC5zdWJzdHJpbmcoMCx0Lmxhc3RJbmRleE9mKCIuIikpLCJ0eXBlIjp0LnN1YnN0cmluZyh0Lmxhc3RJbmRleE9mKCIuIikrMSksIm5hbWUiOlAuYXR0cigiTmFtZSIpLCJwcmVjaXNpb24iOlAuYXR0cigiUHJlY2lzaW9uIiksInNjYWxlIjpQLmF0dHIoIlNjYWxlIil9KX0pfSk7cmV0dXJuIGN9O2YucHJvdG90eXBlLl9jcmVhdGVLZXlzU3RyaW5nPWZ1bmN0aW9uKGUsRSl7dmFyIHQ9dGhpczt2YXIgaz0iIjtpZihFKXtxLmVhY2goZS5rZXlzLGZ1bmN0aW9uKGksSyl7aWYoayl7ays9IiwifXZhciBvPUVbS107aWYoZS5rZXlzVHlwZVtLXT09PSJFZG0uU3RyaW5nIil7bz0iJyIrbysiJyJ9ZWxzZSBpZihlLmtleXNUeXBlW0tdPT09IkVkbS5EYXRlVGltZSIpe289dC5fZ2V0RGF0ZVRpbWUobyl9ZWxzZSBpZihlLmtleXNUeXBlW0tdPT09IkVkbS5HdWlkIil7bz0iZ3VpZCciK28rIicifWlmKGUua2V5cy5sZW5ndGg9PT0xKXtrKz1vO3JldHVybiBrfWsrPUsrIj0iK299KX1yZXR1cm4ga307Zi5wcm90b3R5cGUuX2xvYWRNb2NrZGF0YT1mdW5jdGlvbihlLGIpe3ZhciB0PXRoaXMsRT17fTt0aGlzLl9vTW9ja2RhdGE9e307aWYocS5zYXAuZW5kc1dpdGgoYiwiLmpzb24iKSl7dmFyIHI9cS5zYXAuc2pheCh7dXJsOmIsZGF0YVR5cGU6Impzb24ifSk7aWYoci5zdWNjZXNzKXtFPXIuZGF0YX1lbHNle3Euc2FwLmxvZy5lcnJvcigiVGhlIG1vY2tkYXRhIGZvciBhbGwgdGhlIGVudGl0eSB0eXBlcyBjb3VsZCBub3QgYmUgZm91bmQgYXQgXCIiK2IrIlwiISIpfX1lbHNle3EuZWFjaChlLGZ1bmN0aW9uKHMsbyl7aWYoIUVbby50eXBlXSl7dmFyIGE9YitvLnR5cGUrIi5qc29uIjt2YXIgcj1xLnNhcC5zamF4KHt1cmw6YSxkYXRhVHlwZToianNvbiJ9KTtpZihyLnN1Y2Nlc3Mpe2lmKCEhci5kYXRhLmQpe2lmKCEhci5kYXRhLmQucmVzdWx0cyl7RVtvLnR5cGVdPXIuZGF0YS5kLnJlc3VsdHN9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIlRoZSBtb2NrZGF0YSBmb3JtYXQgZm9yIGVudGl0eSB0eXBlIFwiIitvLnR5cGUrIlwiIGludmFsaWQiKX19ZWxzZXtFW28udHlwZV09ci5kYXRhfX1lbHNle2lmKHIuc3RhdHVzPT09InBhcnNlcmVycm9yIil7cS5zYXAubG9nLmVycm9yKCJUaGUgbW9ja2RhdGEgZm9yIGVudGl0eSB0eXBlIFwiIitvLnR5cGUrIlwiIGNvdWxkIG5vdCBiZSBsb2FkZWQgZHVlIHRvIGEgcGFyc2luZyBlcnJvciEiKX1lbHNle3Euc2FwLmxvZy5lcnJvcigiVGhlIG1vY2tkYXRhIGZvciBlbnRpdHkgdHlwZSBcIiIrby50eXBlKyJcIiBjb3VsZCBub3QgYmUgZm91bmQgYXQgXCIiK2IrIlwiISIpO2lmKCEhdC5fYkdlbmVyYXRlTWlzc2luZ01vY2tEYXRhKXt2YXIgbT17fTttW28ubmFtZV09bztFW28udHlwZV09dC5fZ2VuZXJhdGVPRGF0YU1vY2tkYXRhRm9yRW50aXR5U2V0KG0sdC5fb01ldGFkYXRhKVtvLm5hbWVdfX19fX0pfXEuZWFjaChlLGZ1bmN0aW9uKHMsbyl7dC5fb01vY2tkYXRhW3NdPVtdO2lmKEVbby50eXBlXSl7cS5lYWNoKEVbby50eXBlXSxmdW5jdGlvbihpLGEpe3QuX29Nb2NrZGF0YVtzXS5wdXNoKHEuZXh0ZW5kKHRydWUse30sYSkpfSl9aWYodC5fb01vY2tkYXRhW3NdLmxlbmd0aD4wKXt0Ll9lbmhhbmNlV2l0aE1ldGFkYXRhKG8sdC5fb01vY2tkYXRhW3NdKX19KTtyZXR1cm4gdGhpcy5fb01vY2tkYXRhfTtmLnByb3RvdHlwZS5fZW5oYW5jZVdpdGhNZXRhZGF0YT1mdW5jdGlvbihlLG0pe2lmKG0pe3ZhciB0PXRoaXMscj10aGlzLl9nZXRSb290VXJpKCksRT1lJiZlLm5hbWU7cS5lYWNoKG0sZnVuY3Rpb24oaSxvKXtvLl9fbWV0YWRhdGE9e2lkOnIrRSsiKCIrdC5fY3JlYXRlS2V5c1N0cmluZyhlLG8pKyIpIix0eXBlOmUuc2NoZW1hKyIuIitlLnR5cGUsdXJpOnIrRSsiKCIrdC5fY3JlYXRlS2V5c1N0cmluZyhlLG8pKyIpIn07cS5lYWNoKGUubmF2cHJvcHMsZnVuY3Rpb24oayxuKXtvW2tdPXtfX2RlZmVycmVkOnt1cmk6citFKyIoIit0Ll9jcmVhdGVLZXlzU3RyaW5nKGUsbykrIikvIitrfX19KX0pfX07Zi5wcm90b3R5cGUuX2lzUmVxdWVzdGVkS2V5c1ZhbGlkPWZ1bmN0aW9uKGUscil7aWYoci5sZW5ndGg9PT0xKXt2YXIgcz1yWzBdLnNwbGl0KCc9Jyk7aWYodGhpcy5fdHJpbShzWzBdKSE9PWUua2V5c1swXSl7cj1bZS5rZXlzWzBdKyI9IityWzBdXX19Zm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspe3ZhciBrPXRoaXMuX3RyaW0ocltpXS5zdWJzdHJpbmcoMCxyW2ldLmluZGV4T2YoJz0nKSkpO3ZhciBSPXRoaXMuX3RyaW0ocltpXS5zdWJzdHJpbmcocltpXS5pbmRleE9mKCc9JykrMSkpO3ZhciBGPVIuY2hhckF0KDApO3ZhciBsPVIuY2hhckF0KFIubGVuZ3RoLTEpO2lmKGUua2V5c1R5cGVba109PT0iRWRtLlN0cmluZyIpe2lmKEYhPT0iJyJ8fGwhPT0iJyIpe3JldHVybiBmYWxzZX19ZWxzZSBpZihlLmtleXNUeXBlW2tdPT09IkVkbS5EYXRlVGltZSIpe2lmKEY9PT0iJyJ8fGwhPT0iJyIpe3JldHVybiBmYWxzZX19ZWxzZSBpZihlLmtleXNUeXBlW2tdPT09IkVkbS5HdWlkIil7aWYoRj09PSInInx8bCE9PSInIil7cmV0dXJuIGZhbHNlfX1lbHNle2lmKEY9PT0iJyJ8fGw9PT0iJyIpe3JldHVybiBmYWxzZX19fXJldHVybiB0cnVlfTtmLnByb3RvdHlwZS5fcGFyc2VLZXlzPWZ1bmN0aW9uKGssZSl7dmFyIHI9e307dmFyIHA9ay5zcGxpdCgiLCIpO3ZhciBLLHMsUDtmb3IodmFyIGk9MDtpPHAubGVuZ3RoO2krKyl7UD1wW2ldLnNwbGl0KCI9Iik7aWYoUC5sZW5ndGg9PT0xJiZlLmtleXMubGVuZ3RoPT09MSl7Sz1lLmtleXNbMF07cz1QWzBdfWVsc2V7aWYoUC5sZW5ndGg9PT0yKXtLPVBbMF07cz1QWzFdfX1pZihzLmluZGV4T2YoJ1wnJyk9PT0wKXtyW0tdPXMuc2xpY2UoMSxzLmxlbmd0aC0xKX1lbHNle3JbS109c319cmV0dXJuIHJ9O2YucHJvdG90eXBlLl9nZW5lcmF0ZVByb3BlcnR5VmFsdWU9ZnVuY3Rpb24oayx0LEMsaSl7dmFyIEk9aTtpZighSSl7ST1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMDApKzEwMX1zd2l0Y2godCl7Y2FzZSJTdHJpbmciOnJldHVybiBrKyIgIitJO2Nhc2UiRGF0ZVRpbWUiOnZhciBhPW5ldyBEYXRlKCk7YS5zZXRGdWxsWWVhcigyMDAwK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoyMCkpO2Euc2V0RGF0ZShNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMzApKTthLnNldE1vbnRoKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMikpO2Euc2V0TWlsbGlzZWNvbmRzKDApO3JldHVybiIvRGF0ZSgiK2EuZ2V0VGltZSgpKyIpLyI7Y2FzZSJJbnQxNiI6Y2FzZSJJbnQzMiI6Y2FzZSJJbnQ2NCI6cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDAwMCk7Y2FzZSJEZWNpbWFsIjpyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMDAwMDApLzEwMDtjYXNlIkJvb2xlYW4iOnJldHVybiBNYXRoLnJhbmRvbSgpPC41O2Nhc2UiQnl0ZSI6cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMCk7Y2FzZSJEb3VibGUiOnJldHVybiBNYXRoLnJhbmRvbSgpKjEwO2Nhc2UiU2luZ2xlIjpyZXR1cm4gTWF0aC5yYW5kb20oKSoxMDAwMDAwMDAwO2Nhc2UiU0J5dGUiOnJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTApO2Nhc2UiVGltZSI6cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoyMykrIjoiK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo1OSkrIjoiK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo1OSk7Y2FzZSJHdWlkIjpyZXR1cm4neHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csZnVuY3Rpb24oYyl7dmFyIHI9TWF0aC5yYW5kb20oKSoxNnwwLHY9Yz09PSd4Jz9yOihyJjB4M3wweDgpO3JldHVybiB2LnRvU3RyaW5nKDE2KX0pO2Nhc2UiQmluYXJ5Ijp2YXIgbj1NYXRoLmZsb29yKC0yMTQ3NDgzNjQ4K01hdGgucmFuZG9tKCkqNDI5NDk2NzI5NSk7Zm9yKHZhciBiPTAsZT1uLG09IiI7YjwzMjtiKyssbSs9U3RyaW5nKGU+Pj4zMSksZTw8PTEpO3JldHVybiBtO2Nhc2UiRGF0ZVRpbWVPZmZzZXQiOmRlZmF1bHQ6cmV0dXJuIHRoaXMuX2dlbmVyYXRlRGF0YUZyb21FbnRpdHkoQ1t0XSxJKX19O2YucHJvdG90eXBlLl9jb21wbGV0ZUtleT1mdW5jdGlvbihlLGssRSl7aWYoRSl7Zm9yKHZhciBpPTA7aTxlLmtleXMubGVuZ3RoO2krKyl7dmFyIEs9ZS5rZXlzW2ldO2lmKGtbS10pe2lmKCFFW0tdKXtzd2l0Y2goZS5rZXlzVHlwZVtLXSl7Y2FzZSJFZG0uRGF0ZVRpbWUiOkVbS109dGhpcy5fZ2V0SnNvbkRhdGUoa1tLXSk7YnJlYWs7Y2FzZSJFZG0uR3VpZCI6RVtLXT1rW0tdLnN1YnN0cmluZyg1LGtbS10ubGVuZ3RoLTIpO2JyZWFrO2RlZmF1bHQ6RVtLXT1rW0tdfX19ZWxzZXtpZighRVtLXSl7RVtLXT10aGlzLl9nZW5lcmF0ZVByb3BlcnR5VmFsdWUoSyxlLmtleXNUeXBlW0tdLnN1YnN0cmluZyhlLmtleXNUeXBlW0tdLmxhc3RJbmRleE9mKCcuJykrMSkpfX19fX07Zi5wcm90b3R5cGUuX2dlbmVyYXRlRGF0YUZyb21FbnRpdHk9ZnVuY3Rpb24oZSxJLGMpe3ZhciBFPXt9O2lmKCFlKXtyZXR1cm4gRX1mb3IodmFyIGk9MDtpPGUucHJvcGVydGllcy5sZW5ndGg7aSsrKXt2YXIgcD1lLnByb3BlcnRpZXNbaV07dmFyIFA9IiI7RVtwLm5hbWVdPXRoaXMuX2dlbmVyYXRlUHJvcGVydHlWYWx1ZShwLm5hbWUscC50eXBlLGMsSSl9cmV0dXJuIEV9O2YucHJvdG90eXBlLl9nZW5lcmF0ZURhdGFGcm9tRW50aXR5U2V0PWZ1bmN0aW9uKGUsRSxjKXt2YXIgbz1FW2UudHlwZV07dmFyIG09W107Zm9yKHZhciBpPTA7aTwxMDA7aSsrKXttLnB1c2godGhpcy5fZ2VuZXJhdGVEYXRhRnJvbUVudGl0eShvLGkrMSxjKSl9cmV0dXJuIG19O2YucHJvdG90eXBlLl9nZW5lcmF0ZU1vY2tkYXRhPWZ1bmN0aW9uKGUsbSl7dmFyIHQ9dGhpczt2YXIgbz17fTtxLmVhY2goZSxmdW5jdGlvbihFLGEpe3ZhciBiPXt9O2JbYS5uYW1lXT1hO29bRV09dC5fZ2VuZXJhdGVPRGF0YU1vY2tkYXRhRm9yRW50aXR5U2V0KGIsbSlbRV19KTt0aGlzLl9vTW9ja2RhdGE9b307Zi5wcm90b3R5cGUuX2dlbmVyYXRlT0RhdGFNb2NrZGF0YUZvckVudGl0eVNldD1mdW5jdGlvbihlLG0pe3ZhciB0PXRoaXMscj10aGlzLl9nZXRSb290VXJpKCksbz17fTt2YXIgRT10aGlzLl9maW5kRW50aXR5VHlwZXMobSk7dmFyIGM9dGhpcy5fZmluZENvbXBsZXhUeXBlcyhtKTtxLmVhY2goZSxmdW5jdGlvbihzLGEpe29bc109dC5fZ2VuZXJhdGVEYXRhRnJvbUVudGl0eVNldChhLEUsYyk7cS5lYWNoKG9bc10sZnVuY3Rpb24oaSxiKXtiLl9fbWV0YWRhdGE9e3VyaTpyK3MrIigiK3QuX2NyZWF0ZUtleXNTdHJpbmcoYSxiKSsiKSIsdHlwZTphLnNjaGVtYSsiLiIrYS50eXBlfTtxLmVhY2goYS5uYXZwcm9wcyxmdW5jdGlvbihrLG4pe2Jba109e19fZGVmZXJyZWQ6e3VyaTpyK3MrIigiK3QuX2NyZWF0ZUtleXNTdHJpbmcoYSxiKSsiKS8iK2t9fX0pfSl9KTtyZXR1cm4gb307Zi5wcm90b3R5cGUuX3Jlc29sdmVOYXZpZ2F0aW9uPWZ1bmN0aW9uKGUsRixuKXt2YXIgRT10aGlzLl9tRW50aXR5U2V0c1tlXTt2YXIgTj1FLm5hdnByb3BzW25dO2lmKCFOKXt0aHJvdyBuZXcgRXJyb3IoIjQwNCIpfXZhciBhPVtdO3ZhciBwPU4uZnJvbS5wcm9wUmVmLmxlbmd0aDtpZihwPT09MCl7aWYoTi50by5tdWx0aXBsaWNpdHk9PT0iKiIpe3JldHVybiB0aGlzLl9vTW9ja2RhdGFbTi50by5lbnRpdHlTZXRdfWVsc2V7YS5wdXNoKHRoaXMuX29Nb2NrZGF0YVtOLnRvLmVudGl0eVNldF1bMF0pO3JldHVybiBhfX1xLmVhY2godGhpcy5fb01vY2tkYXRhW04udG8uZW50aXR5U2V0XSxmdW5jdGlvbihJLHQpe3ZhciBiPXRydWU7Zm9yKHZhciBpPTA7aTxwO2krKyl7aWYoRltOLmZyb20ucHJvcFJlZltpXV0hPT10W04udG8ucHJvcFJlZltpXV0pe2I9ZmFsc2U7YnJlYWt9fWlmKGIpe2EucHVzaCh0KX19KTtyZXR1cm4gYX07Zi5wcm90b3R5cGUuc2ltdWxhdGU9ZnVuY3Rpb24obSx2KXt2YXIgdD10aGlzO3RoaXMuX3NNZXRhZGF0YVVybD1tO2lmKCF2fHx0eXBlb2Ygdj09PSJzdHJpbmciKXt0aGlzLl9zTW9ja2RhdGFCYXNlVXJsPXZ9ZWxzZXt0aGlzLl9zTW9ja2RhdGFCYXNlVXJsPXYuc01vY2tkYXRhQmFzZVVybDt0aGlzLl9iR2VuZXJhdGVNaXNzaW5nTW9ja0RhdGE9di5iR2VuZXJhdGVNaXNzaW5nTW9ja0RhdGF9dGhpcy5fcmVmcmVzaERhdGEoKTt2YXIgaD1mdW5jdGlvbih4LEgpe2lmKHgucmVxdWVzdEhlYWRlcnNbIngtY3NyZi10b2tlbiJdPT09IkZldGNoIil7SFsiWC1DU1JGLVRva2VuIl09IjQyNDI0MjQyNDI0MjQyNDI0MjQyNDI0MjQyNDI0MjQyIn19O3ZhciBHPWZ1bmN0aW9uKGUsayl7dmFyIEY7dmFyIEU9dC5fbUVudGl0eVNldHNbZV07dmFyIEs9RS5rZXlzO3ZhciBiPWsuc3BsaXQoJywnKTtpZihiLmxlbmd0aCE9PUsubGVuZ3RofHwhdC5faXNSZXF1ZXN0ZWRLZXlzVmFsaWQoRSxiKSl7cmV0dXJuIEZ9aWYoYi5sZW5ndGg9PT0xJiYhYlswXS5zcGxpdCgnPScpWzFdKXtiPVtLWzBdKyI9IitiWzBdXX1xLmVhY2godC5fb01vY2tkYXRhW2VdLGZ1bmN0aW9uKEksbyl7Zm9yKHZhciBpPTA7aTxiLmxlbmd0aDtpKyspe3ZhciBjPWJbaV0uc3BsaXQoJz0nKTt2YXIgcz10Ll90cmltKGNbMF0pO2lmKHEuaW5BcnJheShzLEspPT09LTEpe3JldHVybiB0cnVlfXZhciBuPXQuX3RyaW0oY1sxXSk7dmFyIE89b1tzXTtzd2l0Y2goRS5rZXlzVHlwZVtzXSl7Y2FzZSJFZG0uU3RyaW5nIjpuPW4ucmVwbGFjZSgvXlwnfFwnJC9nLCcnKTticmVhaztjYXNlIkVkbS5UaW1lIjpjYXNlIkVkbS5EYXRlVGltZSI6Tz10Ll9nZXREYXRlVGltZShPKTticmVhaztjYXNlIkVkbS5JbnQxNiI6Y2FzZSJFZG0uSW50MzIiOmNhc2UiRWRtLkludDY0IjpjYXNlIkVkbS5EZWNpbWFsIjpjYXNlIkVkbS5CeXRlIjpjYXNlIkVkbS5Eb3VibGUiOmNhc2UiRWRtLlNpbmdsZSI6Y2FzZSJFZG0uU0J5dGUiOmlmKCF0Ll9pc1ZhbGlkTnVtYmVyKG4pKXtyZXR1cm4gZmFsc2V9bj1wYXJzZUZsb2F0KG4pO2JyZWFrO2Nhc2UiRWRtLkd1aWQiOm49bi5yZXBsYWNlKC9eZ3VpZFwnfFwnJC9nLCcnKTticmVhaztjYXNlIkVkbS5Cb29sZWFuIjpjYXNlIkVkbS5CaW5hcnkiOmNhc2UiRWRtLkRhdGVUaW1lT2Zmc2V0IjpkZWZhdWx0Om49bn1pZihPIT09bil7cmV0dXJuIHRydWV9fUY9e2luZGV4OkksZW50cnk6b307cmV0dXJuIGZhbHNlfSk7cmV0dXJuIEZ9O3ZhciByPWZ1bmN0aW9uKGUsayx1KXt2YXIgcz1lLm5hbWU7aWYodSl7dmFyIG49ZS5uYXZwcm9wc1t1XX1pZihuKXtzPW4udG8uZW50aXR5U2V0fXJldHVybiBzfTt2YXIgYT1mdW5jdGlvbih4LFQsayx1KXt2YXIgZT1KU09OLnBhcnNlKHgucmVxdWVzdEJvZHkpO2lmKGUpe3ZhciBLPXt9O2lmKGspe0s9dC5fcGFyc2VLZXlzKGssdC5fbUVudGl0eVNldHNbVF0pfXQuX2NvbXBsZXRlS2V5KHQuX21FbnRpdHlTZXRzW1RdLEssZSk7dC5fZW5oYW5jZVdpdGhNZXRhZGF0YSh0Ll9tRW50aXR5U2V0c1tUXSxbZV0pO3JldHVybiBlfXJldHVybiBudWxsfTt2YXIgUj1bXTtSLnB1c2goe21ldGhvZDoiR0VUIixwYXRoOm5ldyBSZWdFeHAoIlxcJG1ldGFkYXRhKFs/I10uKik/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCl7cS5zYXAucmVxdWlyZSgianF1ZXJ5LnNhcC54bWwiKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIHJlcXVlc3QgZm9yIHVybDogIit4LnVybCk7dmFyIEg9eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94bWw7Y2hhcnNldD11dGYtOCJ9O2goeCxIKTt4LnJlc3BvbmQoMjAwLEgscS5zYXAuc2VyaWFsaXplWE1MKHQuX29NZXRhZGF0YSkpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAyMDAsICIrcS5zYXAuc2VyaWFsaXplWE1MKHQuX29NZXRhZGF0YSkpfX0pO1IucHVzaCh7bWV0aG9kOiJQT1NUIixwYXRoOm5ldyBSZWdFeHAoIlxcJGJhdGNoKFs/I10uKik/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCl7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiBpbmNvbWluZyByZXF1ZXN0IGZvciB1cmw6ICIreC51cmwpO3ZhciBiPWZ1bmN0aW9uKFUpe3N3aXRjaChVKXtjYXNlIDIwMDpyZXR1cm4iMjAwIE9LIjtjYXNlIDIwNDpyZXR1cm4iMjA0IE5vIENvbnRlbnQiO2Nhc2UgMjAxOnJldHVybiIyMDEgQ3JlYXRlZCI7Y2FzZSA0MDA6cmV0dXJuIjQwMCBCYWQgUmVxdWVzdCI7Y2FzZSA0MDQ6cmV0dXJuIjQwNCBOb3QgRm91bmQiO2RlZmF1bHQ6YnJlYWt9fTt2YXIgQj1mdW5jdGlvbihBLFUpe3ZhciBWPUpTT04uc3RyaW5naWZ5KEEuZGF0YSl8fCIiO2lmKFUpe3JldHVybiJIVFRQLzEuMSAiK2IoQS5zdGF0dXNDb2RlKSsiXHJcbkNvbnRlbnQtVHlwZTogIitVKyJcclxuQ29udGVudC1MZW5ndGg6ICIrVi5sZW5ndGgrIlxyXG5kYXRhc2VydmljZXZlcnNpb246IDIuMFxyXG5cclxuIitWKyJcclxuIn1yZXR1cm4iSFRUUC8xLjEgIitiKEEuc3RhdHVzQ29kZSkrIlxyXG5Db250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cclxuQ29udGVudC1MZW5ndGg6ICIrVi5sZW5ndGgrIlxyXG5kYXRhc2VydmljZXZlcnNpb246IDIuMFxyXG5cclxuIitWKyJcclxuIn07dmFyIHM9eC5yZXF1ZXN0Qm9keTt2YXIgbz1uZXcgUmVnRXhwKCItLWJhdGNoX1thLXowLTktXSoiKTt2YXIgYz1vLmV4ZWMocylbMF07aWYoISFjKXt2YXIgZT1bXTt2YXIgbD1zLnNwbGl0KGMpO3ZhciBTPXgudXJsLnNwbGl0KCIkIilbMF07dmFyIG49bmV3IFJlZ0V4cCgiUFVUICguKikgSFRUUCIpO3ZhciBwPW5ldyBSZWdFeHAoIk1FUkdFICguKikgSFRUUCIpO3ZhciB1PW5ldyBSZWdFeHAoIlBPU1QgKC4qKSBIVFRQIik7dmFyIHc9bmV3IFJlZ0V4cCgiREVMRVRFICguKikgSFRUUCIpO3ZhciB5PW5ldyBSZWdFeHAoIkdFVCAoLiopIEhUVFAiKTtmb3IodmFyIGk9MTtpPGwubGVuZ3RoLTE7aSsrKXt2YXIgej1sW2ldO2lmKHkudGVzdCh6KSYmei5pbmRleE9mKCJtdWx0aXBhcnQvbWl4ZWQiKT09PS0xKXtpZihuLnRlc3Qoeil8fHUudGVzdCh6KXx8dy50ZXN0KHopKXt4LnJlc3BvbmQoNDAwLG51bGwsIlRoZSBEYXRhIFNlcnZpY2VzIFJlcXVlc3QgY291bGQgbm90IGJlIHVuZGVyc3Rvb2QgZHVlIHRvIG1hbGZvcm1lZCBzeW50YXgiKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogNDAwIik7cmV0dXJufXZhciBBPXEuc2FwLnNqYXgoe3VybDpTK3kuZXhlYyh6KVsxXSxkYXRhVHlwZToianNvbiJ9KTtpZih5LmV4ZWMoeilbMV0uaW5kZXhPZignJGNvdW50JykhPT0tMSl7dmFyIEM9QihBLCJ0ZXh0L3BsYWluIil9ZWxzZXtDPUIoQSl9ZS5wdXNoKCJcclxuQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9odHRwXHJcbiIrIkNvbnRlbnQtTGVuZ3RoOiAiK0MubGVuZ3RoKyJcclxuIisiY29udGVudC10cmFuc2Zlci1lbmNvZGluZzogYmluYXJ5XHJcblxyXG4iK0MpfWVsc2V7dmFyIEU9W107dmFyIEY9cS5leHRlbmQodHJ1ZSx7fSx0Ll9vTW9ja2RhdGEpO3ZhciBIPWZ1bmN0aW9uKFUsTCxWKXt2YXIgQT1xLnNhcC5zamF4KHt0eXBlOlYsdXJsOlMrVS5leGVjKEspWzFdLGRhdGFUeXBlOiJqc29uIixkYXRhOkx9KTtpZihBLnN0YXR1c0NvZGU9PT00MDB8fEEuc3RhdHVzQ29kZT09PTQwNCl7dmFyIFA9IlxyXG5IVFRQLzEuMSAiK2IoQS5zdGF0dXNDb2RlKSsiXHJcbkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxyXG5Db250ZW50LUxlbmd0aDogMFxyXG5cclxuIjt0aHJvdyBuZXcgRXJyb3IoUCl9RS5wdXNoKEIoQSkpfTt2YXIgST16LnN1YnN0cmluZyh6LmluZGV4T2YoImJvdW5kYXJ5PSIpKzksei5pbmRleE9mKCJcclxuXHJcbiIpKTt2YXIgSj16LnNwbGl0KCItLSIrSSk7dHJ5e2Zvcih2YXIgaj0xO2o8Si5sZW5ndGgtMTtqKyspe3ZhciBLPUpbal07aWYoeS50ZXN0KEspKXt0Ll9vTW9ja2RhdGE9Rjt4LnJlc3BvbmQoNDAwLG51bGwsIlRoZSBEYXRhIFNlcnZpY2VzIFJlcXVlc3QgY291bGQgbm90IGJlIHVuZGVyc3Rvb2QgZHVlIHRvIG1hbGZvcm1lZCBzeW50YXgiKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogNDAwIik7cmV0dXJufWVsc2UgaWYobi50ZXN0KEspKXt2YXIgTD1LLnN1YnN0cmluZyhLLmluZGV4T2YoInsiKSxLLmxhc3RJbmRleE9mKCJ9IikrMSkucmVwbGFjZSgvXFwvZywnJyk7SChuLEwsJ1BVVCcpfWVsc2UgaWYocC50ZXN0KEspKXtMPUsuc3Vic3RyaW5nKEsuaW5kZXhPZigieyIpLEsubGFzdEluZGV4T2YoIn0iKSsxKS5yZXBsYWNlKC9cXC9nLCcnKTtIKHAsTCwnUFVUJyl9ZWxzZSBpZih1LnRlc3QoSykpe0w9Sy5zdWJzdHJpbmcoSy5pbmRleE9mKCJ7IiksSy5sYXN0SW5kZXhPZigifSIpKzEpLnJlcGxhY2UoL1xcL2csJycpO0godSxMLCdQT1NUJyl9ZWxzZSBpZih3LnRlc3QoSykpe0godyxudWxsLCdERUxFVEUnKX19dmFyIE49IlxyXG5Db250ZW50LVR5cGU6IG11bHRpcGFydC9taXhlZDsgYm91bmRhcnk9ZWpqZWVmZmUxXHJcblxyXG4tLWVqamVlZmZlMSI7Zm9yKHZhciBrPTA7azxFLmxlbmd0aDtrKyspe04rPSJcclxuQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9odHRwXHJcbiIrIkNvbnRlbnQtTGVuZ3RoOiAiK0Vba10ubGVuZ3RoKyJcclxuIisiY29udGVudC10cmFuc2Zlci1lbmNvZGluZzogYmluYXJ5XHJcblxyXG4iK0Vba10rIi0tZWpqZWVmZmUxIn1OKz0iLS1cclxuIjtlLnB1c2goTil9Y2F0Y2goTyl7dC5fb01vY2tkYXRhPUY7dmFyIFA9IlxyXG5Db250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2h0dHBcclxuIisiQ29udGVudC1MZW5ndGg6ICIrTy5tZXNzYWdlLmxlbmd0aCsiXHJcbiIrImNvbnRlbnQtdHJhbnNmZXItZW5jb2Rpbmc6IGJpbmFyeVxyXG5cclxuIitPLm1lc3NhZ2U7ZS5wdXNoKFApfX19dmFyIFE9Ii0tZWpqZWVmZmUwIjtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7USs9ZVtpXSsiLS1lamplZWZmZTAifVErPSItLSI7dmFyIFQ9eydDb250ZW50LVR5cGUnOiJtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PWVqamVlZmZlMCJ9O2goeCxUKTt4LnJlc3BvbmQoMjAyLFQsUSk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDIwMiwgIitRKX1lbHNle3gucmVzcG9uZCgyMDIpfX19KTtxLmVhY2godGhpcy5fbUVudGl0eVNldHMsZnVuY3Rpb24oRSxvKXtSLnB1c2goe21ldGhvZDoiR0VUIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIikvXFwkY291bnQvPyguKik/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLHUpe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgSD17IkNvbnRlbnQtVHlwZSI6InRleHQvcGxhaW47Y2hhcnNldD11dGYtOCJ9O2goeCxIKTt4LnJlc3BvbmQoMjAwLEgsIiIrdC5fb01vY2tkYXRhW0VdLmxlbmd0aCk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDIwMCwgIit0Ll9vTW9ja2RhdGFbRV0ubGVuZ3RoKX19KTtSLnB1c2goe21ldGhvZDoiR0VUIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIikvPyhcXD8oLiopKT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsdSl7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiBpbmNvbWluZyByZXF1ZXN0IGZvciB1cmw6ICIreC51cmwpO3ZhciBIPXsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04In07aCh4LEgpO3ZhciBiPXQuX29Nb2NrZGF0YVtFXTtpZihiKXt2YXIgRj17cmVzdWx0czpxLmV4dGVuZCh0cnVlLFtdLGIpfTtpZih1KXt2YXIgVT1kZWNvZGVVUklDb21wb25lbnQodSkucmVwbGFjZSgiPyIsIiYiKS5zcGxpdCgiJiIpO3RyeXtpZihVLmxlbmd0aD4xKXtVPXQuX29yZGVyUXVlcnlPcHRpb25zKFUpfXEuZWFjaChVLGZ1bmN0aW9uKGksUSl7dC5fYXBwbHlRdWVyeU9uQ29sbGVjdGlvbihGLFEsRSl9KX1jYXRjaChlKXt4LnJlc3BvbmQocGFyc2VJbnQoZS5tZXNzYWdlfHxlLm51bWJlciwxMCkpO3JldHVybn19eC5yZXNwb25kKDIwMCxILEpTT04uc3RyaW5naWZ5KHtkOkZ9KSk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDIwMCwgIitKU09OLnN0cmluZ2lmeSh7ZDpGfSkpfWVsc2V7eC5yZXNwb25kKDQwNCk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDQwNCIpfX19KTtSLnB1c2goe21ldGhvZDoiR0VUIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIilcXCgoW14vXFw/I10rKVxcKS8/KFxcPyguKikpPyIpLHJlc3BvbnNlOmZ1bmN0aW9uKHgsRSxrLHUpe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgSD17IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCJ9O2goeCxIKTt2YXIgYj1xLmV4dGVuZCh0cnVlLHt9LEcoRSxrKSk7aWYoIXEuaXNFbXB0eU9iamVjdChiKSl7aWYodSl7dmFyIFU9ZGVjb2RlVVJJQ29tcG9uZW50KHUpLnJlcGxhY2UoIj8iLCImIikuc3BsaXQoIiYiKTt0cnl7aWYoVS5sZW5ndGg+MSl7VT10Ll9vcmRlclF1ZXJ5T3B0aW9ucyhVKX1xLmVhY2goVSxmdW5jdGlvbihpLFEpe2IuZW50cnk9dC5fYXBwbHlRdWVyeU9uRW50cnkoYi5lbnRyeSxRLEUpfSl9Y2F0Y2goZSl7eC5yZXNwb25kKHBhcnNlSW50KGUubWVzc2FnZXx8ZS5udW1iZXIsMTApKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogIitwYXJzZUludChlLm1lc3NhZ2V8fGUubnVtYmVyLDEwKSk7cmV0dXJufX14LnJlc3BvbmQoMjAwLEgsSlNPTi5zdHJpbmdpZnkoe2Q6Yi5lbnRyeX0pKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogMjAwLCAiK0pTT04uc3RyaW5naWZ5KHtkOmIuZW50cnl9KSl9ZWxzZXt4LnJlc3BvbmQoNDA0KTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogNDA0Iil9fX0pO3EuZWFjaChvLm5hdnByb3BzLGZ1bmN0aW9uKG4sTil7Ui5wdXNoKHttZXRob2Q6IkdFVCIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpXFwoKFteL1xcPyNdKylcXCkvKCIrbisiKS9cXCRjb3VudC8/KC4qKT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsayxzLHUpe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgSD17IkNvbnRlbnQtVHlwZSI6InRleHQvcGxhaW47Y2hhcnNldD11dGYtOCJ9O2goeCxIKTt2YXIgZT1HKEUsayk7aWYoZSl7dmFyIGI9dC5fcmVzb2x2ZU5hdmlnYXRpb24oRSxlLmVudHJ5LHMpO3gucmVzcG9uZCgyMDAsSCwiIitiLmxlbmd0aCk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDIwMCwgIitiLmxlbmd0aCl9ZWxzZXt4LnJlc3BvbmQoNDA0KTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogNDA0Iil9fX0pO1IucHVzaCh7bWV0aG9kOiJHRVQiLHBhdGg6bmV3IFJlZ0V4cCgiKCIrRSsiKVxcKChbXi9cXD8jXSspXFwpLygiK24rIikvPyhcXD8oLiopKT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsayxzLHUpe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgSD17IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCJ9O2goeCxIKTt2YXIgYj1HKEUsZGVjb2RlVVJJQ29tcG9uZW50KGspKTtpZihiKXt2YXIgYyxGPXt9O3RyeXtjPXQuX3Jlc29sdmVOYXZpZ2F0aW9uKEUsYi5lbnRyeSxzKTtpZihjJiZjLmxlbmd0aCE9PTApe3ZhciBpPXQuX21FbnRpdHlTZXRzW0VdLm5hdnByb3BzW3NdLnRvLm11bHRpcGxpY2l0eTtpZihpPT09IioiKXtGPXtyZXN1bHRzOnEuZXh0ZW5kKHRydWUsW10sYyl9fWVsc2V7Rj1xLmV4dGVuZCh0cnVlLHt9LGNbMF0pfWlmKHUpe3ZhciBVPWRlY29kZVVSSUNvbXBvbmVudCh1KS5yZXBsYWNlKCI/IiwiJiIpLnNwbGl0KCImIik7aWYoVS5sZW5ndGg+MSl7VT10Ll9vcmRlclF1ZXJ5T3B0aW9ucyhVKX1pZihpPT09IioiKXtxLmVhY2goVSxmdW5jdGlvbihJLFEpe3QuX2FwcGx5UXVlcnlPbkNvbGxlY3Rpb24oRixRLHQuX21FbnRpdHlTZXRzW0VdLm5hdnByb3BzW3NdLnRvLmVudGl0eVNldCl9KX1lbHNle3EuZWFjaChVLGZ1bmN0aW9uKEksUSl7Rj10Ll9hcHBseVF1ZXJ5T25FbnRyeShGLFEsdC5fbUVudGl0eVNldHNbRV0ubmF2cHJvcHNbc10udG8uZW50aXR5U2V0KX0pfX19eC5yZXNwb25kKDIwMCxILEpTT04uc3RyaW5naWZ5KHtkOkZ9KSk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDIwMCwgIitKU09OLnN0cmluZ2lmeSh7ZDpGfSkpO3JldHVybn1jYXRjaChlKXt4LnJlc3BvbmQocGFyc2VJbnQoZS5tZXNzYWdlfHxlLm51bWJlciwxMCkpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAiK3BhcnNlSW50KGUubWVzc2FnZXx8ZS5udW1iZXIsMTApKTtyZXR1cm59fXgucmVzcG9uZCg0MDQpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiA0MDQiKX19KX0pO1IucHVzaCh7bWV0aG9kOiJQT1NUIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIikoXFwoKFteL1xcPyNdKylcXCkvPyguKik/KT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsYixrLG4pe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgY3JlYXRlIHJlcXVlc3QgZm9yIHVybDogIit4LnVybCk7dmFyIHM9bnVsbDt2YXIgYz1udWxsO3ZhciBpPTQwNTt2YXIgVD1yKG8sZGVjb2RlVVJJQ29tcG9uZW50KGspLG4pO2lmKFQpe3ZhciBlPWEoeCxULGssbik7aWYoZSl7dmFyIHU9dC5fZ2V0Um9vdFVyaSgpK1QrIigiK3QuX2NyZWF0ZUtleXNTdHJpbmcodC5fbUVudGl0eVNldHNbVF0sZSkrIikiO3M9SlNPTi5zdHJpbmdpZnkoe2Q6ZSx1cmk6dX0pO2M9eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgifTt0Ll9vTW9ja2RhdGFbVF09dC5fb01vY2tkYXRhW1RdLmNvbmNhdChbZV0pO2k9MjAxfX14LnJlc3BvbmQoaSxjLHMpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAiK2krIiwgIitzKX19KTtSLnB1c2goe21ldGhvZDoiUFVUIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIilcXCgoW14vXFw/I10rKVxcKS8/KC4qKT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsayxuKXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIHVwZGF0ZSByZXF1ZXN0IGZvciB1cmw6ICIreC51cmwpO3ZhciBpPTQwNTt2YXIgcz1udWxsO3ZhciBiPW51bGw7dmFyIFQ9cihvLGRlY29kZVVSSUNvbXBvbmVudChrKSxuKTtpZihUKXt2YXIgZT1hKHgsVCxrLG4pO2lmKGUpe3ZhciB1PXQuX2dldFJvb3RVcmkoKStUKyIoIit0Ll9jcmVhdGVLZXlzU3RyaW5nKHQuX21FbnRpdHlTZXRzW1RdLGUpKyIpIjtiPXsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04In07dmFyIGM9RyhFLGspO2lmKGMpe3QuX29Nb2NrZGF0YVtFXVtjLmluZGV4XT1lfWk9MjA0fX14LnJlc3BvbmQoaSxiLHMpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAiK2krIiwgIitzKX19KTtSLnB1c2goe21ldGhvZDoiREVMRVRFIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIilcXCgoW14vXFw/I10rKVxcKS8/KC4qKT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsayx1KXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIGRlbGV0ZSByZXF1ZXN0IGZvciB1cmw6ICIreC51cmwpO3ZhciBpPTIwMDt2YXIgZT1HKEUsZGVjb2RlVVJJQ29tcG9uZW50KGspKTtpZihlKXt0Ll9vTW9ja2RhdGFbRV0uc3BsaWNlKGUuaW5kZXgsMSl9ZWxzZXtpPTQwMH14LnJlc3BvbmQoaSxudWxsLG51bGwpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAiK2kpfX0pfSk7dGhpcy5zZXRSZXF1ZXN0cyhSKX07Zi5wcm90b3R5cGUuX29yZGVyUXVlcnlPcHRpb25zPWZ1bmN0aW9uKHUpe3ZhciBGLGkscyx0LG8sUyxlLGEsTz1bXTtxLmVhY2godSxmdW5jdGlvbihJLFEpe3N3aXRjaChRLnNwbGl0KCc9JylbMF0pe2Nhc2UiJHRvcCI6dD1xLmluQXJyYXkoUSx1KTticmVhaztjYXNlIiRza2lwIjpzPXEuaW5BcnJheShRLHUpO2JyZWFrO2Nhc2UiJG9yZGVyYnkiOm89cS5pbkFycmF5KFEsdSk7YnJlYWs7Y2FzZSIkZmlsdGVyIjpGPXEuaW5BcnJheShRLHUpO2JyZWFrO2Nhc2UiJHNlbGVjdCI6Uz1xLmluQXJyYXkoUSx1KTticmVhaztjYXNlIiRpbmxpbmVjb3VudCI6aT1xLmluQXJyYXkoUSx1KTticmVhaztjYXNlIiRleHBhbmQiOmU9cS5pbkFycmF5KFEsdSk7YnJlYWs7Y2FzZSIkZm9ybWF0IjphPXEuaW5BcnJheShRLHUpO2JyZWFrO2RlZmF1bHQ6aWYoUS5zcGxpdCgnPScpWzBdLmluZGV4T2YoJyQnKT09PTApe3Euc2FwLmxvZy5lcnJvcigiSW52YWxpZCBzeXN0ZW0gcXVlcnkgb3B0aW9ucyB2YWx1ZSEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfX19KTtpZihGPj0wKU8ucHVzaCh1W0ZdKTtpZihpPj0wKU8ucHVzaCh1W2ldKTtpZihzPj0wKU8ucHVzaCh1W3NdKTtpZih0Pj0wKU8ucHVzaCh1W3RdKTtpZihTPj0wKU8ucHVzaCh1W1NdKTtpZihvPj0wKU8ucHVzaCh1W29dKTtpZihlPj0wKU8ucHVzaCh1W2VdKTtpZihhPj0wKU8ucHVzaCh1W2FdKTtyZXR1cm4gT307Zi5wcm90b3R5cGUuX3JlbW92ZUFsbFJlcXVlc3RIYW5kbGVycz1mdW5jdGlvbigpe3ZhciByPXRoaXMuZ2V0UmVxdWVzdHMoKTt2YXIgbD1yLmxlbmd0aDtmb3IodmFyIGk9MDtpPGw7aSsrKXtmLl9yZW1vdmVSZXNwb25zZShyW2ldLnJlc3BvbnNlKX19O2YucHJvdG90eXBlLl9yZW1vdmVBbGxGaWx0ZXJzPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTx0aGlzLl9hRmlsdGVycy5sZW5ndGg7aSsrKXtmLl9yZW1vdmVGaWx0ZXIodGhpcy5fYUZpbHRlcnNbaV0pfXRoaXMuX2FGaWx0ZXJzPW51bGx9O2YucHJvdG90eXBlLl9hZGRSZXF1ZXN0SGFuZGxlcj1mdW5jdGlvbihtLHAscil7bT1tP20udG9VcHBlckNhc2UoKTptO2lmKHR5cGVvZiBtIT09InN0cmluZyIpe3Rocm93IG5ldyBFcnJvcigiRXJyb3IgaW4gcmVxdWVzdCBjb25maWd1cmF0aW9uOiB2YWx1ZSBvZiAnbWV0aG9kJyBoYXMgdG8gYmUgYSBzdHJpbmciKX1pZighKHR5cGVvZiBwPT09InN0cmluZyJ8fHAgaW5zdGFuY2VvZiBSZWdFeHApKXt0aHJvdyBuZXcgRXJyb3IoIkVycm9yIGluIHJlcXVlc3QgY29uZmlndXJhdGlvbjogdmFsdWUgb2YgJ3BhdGgnIGhhcyB0byBiZSBhIHN0cmluZyBvciBhIHJlZ3VsYXIgZXhwcmVzc2lvbiIpfWlmKHR5cGVvZiByIT09ImZ1bmN0aW9uIil7dGhyb3cgbmV3IEVycm9yKCJFcnJvciBpbiByZXF1ZXN0IGNvbmZpZ3VyYXRpb246IHZhbHVlIG9mICdyZXNwb25zZScgaGFzIHRvIGJlIGEgZnVuY3Rpb24iKX12YXIgdT10aGlzLl9nZXRSb290VXJpKCk7dT11JiZuZXcgUmVnRXhwKHRoaXMuX2VzY2FwZVN0cmluZ0ZvclJlZ0V4cCh1KSk7aWYocCYmIShwIGluc3RhbmNlb2YgUmVnRXhwKSl7cD1uZXcgUmVnRXhwKHRoaXMuX2NyZWF0ZVJlZ0V4cFBhdHRlcm4ocCkpfXZhciBSPXRoaXMuX2NyZWF0ZVJlZ0V4cCh1P3Uuc291cmNlK3Auc291cmNlOnAuc291cmNlKTt0aGlzLl9hZGRGaWx0ZXIodGhpcy5fY3JlYXRlRmlsdGVyKG0sUikpO3RoaXMuX29TZXJ2ZXIucmVzcG9uZFdpdGgobSxSLHIpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogYWRkaW5nICIrbSsiIHJlcXVlc3QgaGFuZGxlciBmb3IgcGF0dGVybiAiK1IpfTtmLnByb3RvdHlwZS5fY3JlYXRlUmVnRXhwPWZ1bmN0aW9uKHApe3JldHVybiBuZXcgUmVnRXhwKCJeIitwKyIkIil9O2YucHJvdG90eXBlLl9jcmVhdGVSZWdFeHBQYXR0ZXJuPWZ1bmN0aW9uKHApe3JldHVybiBwLnJlcGxhY2UoLzooW1x3XGRdKykvZywiKFteXC9dKykiKX07Zi5wcm90b3R5cGUuX2VzY2FwZVN0cmluZ0ZvclJlZ0V4cD1mdW5jdGlvbihzKXtyZXR1cm4gcy5yZXBsYWNlKC9bXFxcL1xbXF1ce1x9XChcKVwtXCpcK1w/XC5cXlwkXHxdL2csIlxcJCYiKX07Zi5wcm90b3R5cGUuX3RyaW09ZnVuY3Rpb24ocyl7cmV0dXJuIHMmJnMucmVwbGFjZSgvXlxzK3xccyskL2csIiIpfTtmLnByb3RvdHlwZS5faXNWYWxpZE51bWJlcj1mdW5jdGlvbihzKXtyZXR1cm4haXNOYU4ocGFyc2VGbG9hdChzKSkmJmlzRmluaXRlKHMpfTtmLnByb3RvdHlwZS5fZ2V0RGF0ZVRpbWU9ZnVuY3Rpb24ocyl7aWYoIXMpcmV0dXJuO3JldHVybiJkYXRldGltZSciK25ldyBEYXRlKE51bWJlcihzLnJlcGxhY2UoIi9EYXRlKCIsJycpLnJlcGxhY2UoIikvIiwnJykpKS50b0pTT04oKS5zdWJzdHJpbmcoMCwxOSkrIicifTtmLnByb3RvdHlwZS5fZ2V0SnNvbkRhdGU9ZnVuY3Rpb24oUyl7aWYoIVMpcmV0dXJuO3ZhciBuPWZ1bmN0aW9uKHMpe3ZhciBhPXEubWFwKHMuc2xpY2UoMCwtNSkuc3BsaXQoL1xELyksZnVuY3Rpb24oaSl7cmV0dXJuIHBhcnNlSW50KGksMTApfHwwfSk7YVsxXS09MTthPW5ldyBEYXRlKERhdGUuVVRDLmFwcGx5KERhdGUsYSkpO3ZhciBvPXMuc2xpY2UoLTUpO3ZhciBiPXBhcnNlSW50KG8sMTApLzEwMDtpZihvLnNsaWNlKDAsMSk9PT0iKyIpe2IqPS0xfWEuc2V0SG91cnMoYS5nZXRIb3VycygpK2IpO3JldHVybiBhLmdldFRpbWUoKX07cmV0dXJuIi9EYXRlKCIrbihTLnN1YnN0cmluZygiZGF0ZXRpbWUnIi5sZW5ndGgsUy5sZW5ndGgtMSkpKyIpLyJ9O2YucHJvdG90eXBlLl9hZGRGaWx0ZXI9ZnVuY3Rpb24oRil7dGhpcy5fYUZpbHRlcnMucHVzaChGKTtmLl9hZGRGaWx0ZXIoRil9O2YucHJvdG90eXBlLl9jcmVhdGVGaWx0ZXI9ZnVuY3Rpb24ocixSKXtyZXR1cm4gZnVuY3Rpb24obSx1LGEsVSxwKXtyZXR1cm4gcj09PW0mJlIudGVzdCh1KX19O2YucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24ocyl7TS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zdG9wKCk7dmFyIFM9Zi5fYVNlcnZlcnM7dmFyIGk9cS5pbkFycmF5KHRoaXMsUyk7Uy5zcGxpY2UoaSwxKX07Zi5fYUZpbHRlcnM9W107Zi5fb1NlcnZlcj1udWxsO2YuX2FTZXJ2ZXJzPVtdO2YuX2dldEluc3RhbmNlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX29TZXJ2ZXIpe3RoaXMuX29TZXJ2ZXI9d2luZG93LnNpbm9uLmZha2VTZXJ2ZXIuY3JlYXRlKCk7dGhpcy5fb1NlcnZlci5hdXRvUmVzcG9uZD10cnVlfXJldHVybiB0aGlzLl9vU2VydmVyfTtmLmNvbmZpZz1mdW5jdGlvbihjKXt2YXIgcz10aGlzLl9nZXRJbnN0YW5jZSgpO3MuYXV0b1Jlc3BvbmQ9Yy5hdXRvUmVzcG9uZD09PWZhbHNlP2ZhbHNlOnRydWU7cy5hdXRvUmVzcG9uZEFmdGVyPWMuYXV0b1Jlc3BvbmRBZnRlcnx8MDtzLmZha2VIVFRQTWV0aG9kcz1jLmZha2VIVFRQTWV0aG9kc3x8ZmFsc2V9O2YucmVzcG9uZD1mdW5jdGlvbigpe3RoaXMuX2dldEluc3RhbmNlKCkucmVzcG9uZCgpfTtmLnN0YXJ0QWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTx0aGlzLl9hU2VydmVycy5sZW5ndGg7aSsrKXt0aGlzLl9hU2VydmVyc1tpXS5zdGFydCgpfX07Zi5zdG9wQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTx0aGlzLl9hU2VydmVycy5sZW5ndGg7aSsrKXt0aGlzLl9hU2VydmVyc1tpXS5zdG9wKCl9dGhpcy5fZ2V0SW5zdGFuY2UoKS5yZXN0b3JlKCk7dGhpcy5fb1NlcnZlcj1udWxsfTtmLmRlc3Ryb3lBbGw9ZnVuY3Rpb24oKXt0aGlzLnN0b3BBbGwoKTtmb3IodmFyIGk9MDtpPHRoaXMuX2FTZXJ2ZXJzLmxlbmd0aDtpKyspe3RoaXMuX2FTZXJ2ZXJzW2ldLmRlc3Ryb3koKX19O2YuX2FkZEZpbHRlcj1mdW5jdGlvbihGKXt0aGlzLl9hRmlsdGVycy5wdXNoKEYpfTtmLl9yZW1vdmVGaWx0ZXI9ZnVuY3Rpb24oRil7dmFyIGk9cS5pbkFycmF5KEYsdGhpcy5fYUZpbHRlcnMpO2lmKGkhPT0tMSl7dGhpcy5fYUZpbHRlcnMuc3BsaWNlKGksMSl9cmV0dXJuIGkhPT0tMX07Zi5fcmVtb3ZlUmVzcG9uc2U9ZnVuY3Rpb24ocil7dmFyIFI9dGhpcy5fb1NlcnZlci5yZXNwb25zZXM7dmFyIGw9Ui5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsO2krKyl7aWYoUltpXS5yZXNwb25zZT09PXIpe1Iuc3BsaWNlKGksMSk7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX07d2luZG93LnNpbm9uLkZha2VYTUxIdHRwUmVxdWVzdC51c2VGaWx0ZXJzPXRydWU7d2luZG93LnNpbm9uLkZha2VYTUxIdHRwUmVxdWVzdC5hZGRGaWx0ZXIoZnVuY3Rpb24obSx1LGEsVSxwKXt2YXIgRj1mLl9hRmlsdGVycztmb3IodmFyIGk9MDtpPEYubGVuZ3RoO2krKyl7dmFyIGI9RltpXTtpZihiKG0sdSxhLFUscCkpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9KTt2YXIgZz1mdW5jdGlvbihGKXtpZigvLipcLmpzb24kL2kudGVzdChGKSl7cmV0dXJuIkpTT04ifWlmKC8uKlwueG1sJC9pLnRlc3QoRikpe3JldHVybiJYTUwifWlmKC8uKm1ldGFkYXRhJC9pLnRlc3QoRikpe3JldHVybiJYTUwifXJldHVybiBudWxsfTt3aW5kb3cuc2lub24uRmFrZVhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5yZXNwb25kRmlsZT1mdW5jdGlvbihzLGgsRil7dmFyIHI9cS5zYXAuc2pheCh7dXJsOkYsZGF0YVR5cGU6InRleHQifSk7aWYoIXIuc3VjY2Vzcyl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBsb2FkIGZpbGUgZnJvbTogIitGKTt2YXIgbz1yLmRhdGE7dmFyIG09ZyhGKTtpZih0aGlzWyJyZXNwb25kIittXSl7dGhpc1sicmVzcG9uZCIrbV0ocyxoLG8pfWVsc2V7dGhpcy5yZXNwb25kKHMsaCxvKX19O3dpbmRvdy5zaW5vbi5GYWtlWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLnJlc3BvbmRKU09OPWZ1bmN0aW9uKHMsaCxqKXtoPWh8fHt9O2hbIkNvbnRlbnQtVHlwZSJdPWhbIkNvbnRlbnQtVHlwZSJdfHwiYXBwbGljYXRpb24vanNvbiI7dGhpcy5yZXNwb25kKHMsaCx0eXBlb2Ygaj09PSJzdHJpbmciP2o6SlNPTi5zdHJpbmdpZnkoaikpfTt3aW5kb3cuc2lub24uRmFrZVhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5yZXNwb25kWE1MPWZ1bmN0aW9uKHMsaCx4KXtoPWh8fHt9O2hbIkNvbnRlbnQtVHlwZSJdPWhbIkNvbnRlbnQtVHlwZSJdfHwiYXBwbGljYXRpb24veG1sIjt0aGlzLnJlc3BvbmQocyxoLHgpfTtyZXR1cm4gZn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5DbGllbnRNb2RlbCcpKXsKLyohCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ2xpZW50TW9kZWwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ2xpZW50TW9kZWwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0NsaWVudENvbnRleHRCaW5kaW5nJywnLi9DbGllbnRMaXN0QmluZGluZycsJy4vQ2xpZW50UHJvcGVydHlCaW5kaW5nJywnLi9DbGllbnRUcmVlQmluZGluZycsJy4vTW9kZWwnXSxmdW5jdGlvbihxLEMsYSxiLGMsTSl7InVzZSBzdHJpY3QiO3ZhciBkPU0uZXh0ZW5kKCJzYXAudWkubW9kZWwuQ2xpZW50TW9kZWwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihEKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmJDYWNoZT10cnVlO3RoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcz1bXTtpZih0eXBlb2YgRD09InN0cmluZyIpe3RoaXMubG9hZERhdGEoRCl9fSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImxvYWREYXRhIiwic2V0RGF0YSIsImdldERhdGEiLCJzZXRQcm9wZXJ0eSIsImZvcmNlTm9DYWNoZSJdfX0pO2QucHJvdG90eXBlLmdldERhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vRGF0YX07ZC5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7dmFyIEI9dGhpcy5hQmluZGluZ3Muc2xpY2UoMCk7cS5lYWNoKEIsZnVuY3Rpb24oaSxvKXtvLmNoZWNrVXBkYXRlKGYpfSl9O2QucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmdDb250ZXh0PWZ1bmN0aW9uKHAsbyxQLGYpe2lmKHR5cGVvZiBvPT0iZnVuY3Rpb24iKXtmPW87bz1udWxsfWlmKHR5cGVvZiBQPT0iZnVuY3Rpb24iKXtmPVA7UD1udWxsfXZhciBzPXRoaXMucmVzb2x2ZShwLG8pLG49KHM9PXVuZGVmaW5lZCk/dW5kZWZpbmVkOnRoaXMuZ2V0Q29udGV4dChzP3M6Ii8iKTtpZighbil7bj1udWxsfWYobil9O2QucHJvdG90eXBlLl9hamF4PWZ1bmN0aW9uKHApe3ZhciB0PXRoaXM7aWYodGhpcy5iRGVzdHJveWVkKXtyZXR1cm59ZnVuY3Rpb24gdyhmKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaT1xLmluQXJyYXkocix0LmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMpO2lmKGk+LTEpe3QuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcy5zcGxpY2UoaSwxKX1pZighKHImJnIuYlN1cHByZXNzRXJyb3JIYW5kbGVyQ2FsbCkpe2YuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19cC5zdWNjZXNzPXcocC5zdWNjZXNzKTtwLmVycm9yPXcocC5lcnJvcik7dmFyIHI9cS5hamF4KHApO2lmKHAuYXN5bmMpe3RoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcy5wdXNoKHIpfX07ZC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKHRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcyl7Zm9yKHZhciBpPXRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcy5sZW5ndGgtMTtpPj0wO2ktLSl7dmFyIHI9dGhpcy5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzW2ldO2lmKHImJnIuYWJvcnQpe3IuYlN1cHByZXNzRXJyb3JIYW5kbGVyQ2FsbD10cnVlO3IuYWJvcnQoKX19ZGVsZXRlIHRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlc31NLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07ZC5wcm90b3R5cGUuZGVzdHJveUJpbmRpbmdDb250ZXh0PWZ1bmN0aW9uKG8pe307ZC5wcm90b3R5cGUuYmluZENvbnRleHQ9ZnVuY3Rpb24ocCxvLFApe3ZhciBCPW5ldyBDKHRoaXMscCxvLFApO3JldHVybiBCfTtkLnByb3RvdHlwZS51cGRhdGVCaW5kaW5ncz1mdW5jdGlvbihmKXt0aGlzLmNoZWNrVXBkYXRlKGYpfTtkLnByb3RvdHlwZS5mb3JjZU5vQ2FjaGU9ZnVuY3Rpb24oZil7dGhpcy5iQ2FjaGU9IWZ9O3JldHVybiBkfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmFuYWx5dGljcy5PRGF0YU1vZGVsQWRhcHRlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5hbmFseXRpY3MuT0RhdGFNb2RlbEFkYXB0ZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvYW5hbHl0aWNzL09EYXRhTW9kZWxBZGFwdGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9BbmFseXRpY2FsQmluZGluZycsIi4vVHJlZUJpbmRpbmdBZGFwdGVyIiwnc2FwL3VpL21vZGVsL29kYXRhL09EYXRhTW9kZWwnLCcuL29kYXRhNGFuYWx5dGljcyddLGZ1bmN0aW9uKHEsQSxULE8sbyl7InVzZSBzdHJpY3QiO3ZhciBhPWZ1bmN0aW9uKCl7aWYoISh0aGlzIGluc3RhbmNlb2YgTyYmdGhpcy5nZXRBbmFseXRpY2FsRXh0ZW5zaW9ucz09PXVuZGVmaW5lZCkpe3JldHVybn1mb3IodmFyIGYgaW4gYS5wcm90b3R5cGUpe2lmKGEucHJvdG90eXBlLmhhc093blByb3BlcnR5KGYpKXt0aGlzW2ZdPWEucHJvdG90eXBlW2ZdfX1pZih0aGlzLmlzQ291bnRTdXBwb3J0ZWQoKSl7cS5zYXAubG9nLmluZm8oIk9EYXRhTW9kZWxBZGFwdGVyOiBzd2l0Y2hlZCBPRGF0YU1vZGVsIHRvIHVzZSBpbmxpbmVjb3VudCAobWFuZGF0b3J5IGZvciBhbmFseXRpY2FsIGJpbmRpbmdzKSIpO3RoaXMuc2V0Q291bnRTdXBwb3J0ZWQoZmFsc2UpfX07YS5wcm90b3R5cGUuYmluZExpc3Q9ZnVuY3Rpb24ocCxjLHMsZixQKXtpZihQJiZQLmFuYWx5dGljYWxJbmZvKXt2YXIgYj1uZXcgQSh0aGlzLHAsYyxzLGYsUCk7VC5hcHBseShiKTtyZXR1cm4gYn1lbHNle3JldHVybiBPLnByb3RvdHlwZS5iaW5kTGlzdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fTthLnByb3RvdHlwZS5iaW5kVHJlZT1mdW5jdGlvbihwLGMsZixQKXtpZihQJiZQLmFuYWx5dGljYWxJbmZvKXt2YXIgYj1uZXcgQSh0aGlzLHAsYyxbXSxmLFApO3JldHVybiBifWVsc2V7cmV0dXJuIE8ucHJvdG90eXBlLmJpbmRUcmVlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19O2EucHJvdG90eXBlLmdldEFuYWx5dGljYWxFeHRlbnNpb25zPWZ1bmN0aW9uKCl7aWYodGhpcy5vT0RhdGE0U0FQQW5hbHl0aWNzTW9kZWwhPXVuZGVmaW5lZCYmdGhpcy5vT0RhdGE0U0FQQW5hbHl0aWNzTW9kZWwhPW51bGwpcmV0dXJuIHRoaXMub09EYXRhNFNBUEFuYWx5dGljc01vZGVsO3ZhciBzPW51bGw7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7dmFyIGI9YXJndW1lbnRzWzBdO3ZhciByPXEuc2FwLnN5bmNHZXRUZXh0KGIpO2lmKHIuc3VjY2Vzcyl7cz1yLmRhdGF9fXRyeXt0aGlzLm9PRGF0YTRTQVBBbmFseXRpY3NNb2RlbD1uZXcgby5Nb2RlbChuZXcgby5Nb2RlbC5SZWZlcmVuY2VCeU1vZGVsKHRoaXMpLHMpfWNhdGNoKGUpe3Rocm93IkZhaWxlZCB0byBpbnN0YW50aWF0ZSBhbmFseXRpY2FsIGV4dGVuc2lvbnMgZm9yIGdpdmVuIE9EYXRhIG1vZGVsOiAiK2UubWVzc2FnZX1yZXR1cm4gdGhpcy5vT0RhdGE0U0FQQW5hbHl0aWNzTW9kZWx9O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmpzb24uSlNPTk1vZGVsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLmpzb24uSlNPTk1vZGVsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2pzb24vSlNPTk1vZGVsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL0NsaWVudE1vZGVsJywnLi9KU09OTGlzdEJpbmRpbmcnLCcuL0pTT05Qcm9wZXJ0eUJpbmRpbmcnLCcuL0pTT05UcmVlQmluZGluZyddLGZ1bmN0aW9uKHEsQyxKLGEsYil7InVzZSBzdHJpY3QiO3ZhciBjPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwuanNvbi5KU09OTW9kZWwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihkKXtDLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihkJiZ0eXBlb2YgZD09Im9iamVjdCIpe3RoaXMuc2V0RGF0YShkKX19LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsic2V0SlNPTiIsImdldEpTT04iXX19KTtjLnByb3RvdHlwZS5zZXREYXRhPWZ1bmN0aW9uKGQsbSl7aWYobSl7dGhpcy5vRGF0YT1xLmV4dGVuZCh0cnVlLHt9LHRoaXMub0RhdGEsZCl9ZWxzZXt0aGlzLm9EYXRhPWR9dGhpcy5jaGVja1VwZGF0ZSgpfTtjLnByb3RvdHlwZS5zZXRKU09OPWZ1bmN0aW9uKGosbSl7dmFyIG87dHJ5e289cS5wYXJzZUpTT04oaik7dGhpcy5zZXREYXRhKG8sbSl9Y2F0Y2goZSl7cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IEpTT04gcGFyc2UgRXJyb3I6ICIrZSk7dGhpcy5maXJlUGFyc2VFcnJvcih7dXJsOiIiLGVycm9yQ29kZTotMSxyZWFzb246IiIsc3JjVGV4dDplLGxpbmU6LTEsbGluZXBvczotMSxmaWxlcG9zOi0xfSl9fTtjLnByb3RvdHlwZS5nZXRKU09OPWZ1bmN0aW9uKCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMub0RhdGEpfTtjLnByb3RvdHlwZS5sb2FkRGF0YT1mdW5jdGlvbih1LHAsQSx0LG0sZCxoKXt2YXIgZT10aGlzO0E9KEEhPT1mYWxzZSk7dD10fHwiR0VUIjtkPWQ9PT11bmRlZmluZWQ/dGhpcy5iQ2FjaGU6ZDt0aGlzLmZpcmVSZXF1ZXN0U2VudCh7dXJsOnUsdHlwZTp0LGFzeW5jOkEsaGVhZGVyczpoLGluZm86ImNhY2hlPSIrZCsiO2JNZXJnZT0iK20saW5mb09iamVjdDp7Y2FjaGU6ZCxtZXJnZTptfX0pO3RoaXMuX2FqYXgoe3VybDp1LGFzeW5jOkEsZGF0YVR5cGU6J2pzb24nLGNhY2hlOmQsZGF0YTpwLGhlYWRlcnM6aCx0eXBlOnQsc3VjY2VzczpmdW5jdGlvbihEKXtpZighRCl7cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IE5vIGRhdGEgd2FzIHJldHJpZXZlZCBieSBzZXJ2aWNlOiAiK3UpfWUuc2V0RGF0YShELG0pO2UuZmlyZVJlcXVlc3RDb21wbGV0ZWQoe3VybDp1LHR5cGU6dCxhc3luYzpBLGhlYWRlcnM6aCxpbmZvOiJjYWNoZT0iK2QrIjtiTWVyZ2U9IittLGluZm9PYmplY3Q6e2NhY2hlOmQsbWVyZ2U6bX0sc3VjY2Vzczp0cnVlfSl9LGVycm9yOmZ1bmN0aW9uKFgsZixnKXt2YXIgRT17bWVzc2FnZTpmLHN0YXR1c0NvZGU6WC5zdGF0dXMsc3RhdHVzVGV4dDpYLnN0YXR1c1RleHQscmVzcG9uc2VUZXh0OlgucmVzcG9uc2VUZXh0fTtxLnNhcC5sb2cuZmF0YWwoIlRoZSBmb2xsb3dpbmcgcHJvYmxlbSBvY2N1cnJlZDogIitmLFgucmVzcG9uc2VUZXh0KyIsIitYLnN0YXR1cysiLCIrWC5zdGF0dXNUZXh0KTtlLmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6dSx0eXBlOnQsYXN5bmM6QSxoZWFkZXJzOmgsaW5mbzoiY2FjaGU9IitkKyI7Yk1lcmdlPSIrbSxpbmZvT2JqZWN0OntjYWNoZTpkLG1lcmdlOm19LHN1Y2Nlc3M6ZmFsc2UsZXJyb3JvYmplY3Q6RX0pO2UuZmlyZVJlcXVlc3RGYWlsZWQoRSl9fSl9O2MucHJvdG90eXBlLmJpbmRQcm9wZXJ0eT1mdW5jdGlvbihwLG8sUCl7dmFyIEI9bmV3IGEodGhpcyxwLG8sUCk7cmV0dXJuIEJ9O2MucHJvdG90eXBlLmJpbmRMaXN0PWZ1bmN0aW9uKHAsbyxzLGYsUCl7dmFyIEI9bmV3IEoodGhpcyxwLG8scyxmLFApO3JldHVybiBCfTtjLnByb3RvdHlwZS5iaW5kVHJlZT1mdW5jdGlvbihwLG8sZixQKXt2YXIgQj1uZXcgYih0aGlzLHAsbyxmLFApO3JldHVybiBCfTtjLnByb3RvdHlwZS5zZXRQcm9wZXJ0eT1mdW5jdGlvbihwLHYsbyl7dmFyIE89cC5zdWJzdHJpbmcoMCxwLmxhc3RJbmRleE9mKCIvIikpLFA9cC5zdWJzdHIocC5sYXN0SW5kZXhPZigiLyIpKzEpO2lmKCF0aGlzLnJlc29sdmUocCxvKSl7cmV0dXJufWlmKCFPJiYhbyl7bz10aGlzLm9EYXRhfXZhciBkPXRoaXMuX2dldE9iamVjdChPLG8pO2lmKGQpe2RbUF09djt0aGlzLmNoZWNrVXBkYXRlKCl9fTtjLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihwLG8pe3JldHVybiB0aGlzLl9nZXRPYmplY3QocCxvKX07Yy5wcm90b3R5cGUuX2dldE9iamVjdD1mdW5jdGlvbihwLG8pe3ZhciBuPXRoaXMuaXNMZWdhY3lTeW50YXgoKT90aGlzLm9EYXRhOm51bGw7aWYobyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Db250ZXh0KXtuPXRoaXMuX2dldE9iamVjdChvLmdldFBhdGgoKSl9ZWxzZSBpZihvKXtuPW99aWYoIXApe3JldHVybiBufXZhciBQPXAuc3BsaXQoIi8iKSxpPTA7aWYoIVBbMF0pe249dGhpcy5vRGF0YTtpKyt9d2hpbGUobiYmUFtpXSl7bj1uW1BbaV1dO2krK31yZXR1cm4gbn07Yy5wcm90b3R5cGUuaXNMaXN0PWZ1bmN0aW9uKHAsbyl7dmFyIEE9dGhpcy5yZXNvbHZlKHAsbyk7cmV0dXJuIHEuaXNBcnJheSh0aGlzLl9nZXRPYmplY3QoQSkpfTtyZXR1cm4gY30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC54bWwuWE1MTW9kZWwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwueG1sLlhNTE1vZGVsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3htbC9YTUxNb2RlbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9DbGllbnRNb2RlbCcsJy4vWE1MTGlzdEJpbmRpbmcnLCcuL1hNTFByb3BlcnR5QmluZGluZycsJy4vWE1MVHJlZUJpbmRpbmcnLCdqcXVlcnkuc2FwLnhtbCddLGZ1bmN0aW9uKHEsQyxYLGEsYil7InVzZSBzdHJpY3QiO3ZhciBjPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwueG1sLlhNTE1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZCl7Qy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vTmFtZVNwYWNlcz1udWxsO2lmKGQmJmQuZG9jdW1lbnRFbGVtZW50KXt0aGlzLnNldERhdGEoZCl9fSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbInNldFhNTCIsImdldFhNTCIsInNldE5hbWVTcGFjZSJdfX0pO2MucHJvdG90eXBlLnNldFhNTD1mdW5jdGlvbih4KXt2YXIgbz1xLnNhcC5wYXJzZVhNTCh4KTtpZihvLnBhcnNlRXJyb3IuZXJyb3JDb2RlIT0wKXt2YXIgcD1vLnBhcnNlRXJyb3I7cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IFhNTCBwYXJzZSBFcnJvciBmb3IgIitwLnVybCsiIGNvZGU6ICIrcC5lcnJvckNvZGUrIiByZWFzb246ICIrcC5yZWFzb24rIiBzcmM6ICIrcC5zcmNUZXh0KyIgbGluZTogIitwLmxpbmUrIiBsaW5lcG9zOiAiK3AubGluZXBvcysiIGZpbGVwb3M6ICIrcC5maWxlcG9zKTt0aGlzLmZpcmVQYXJzZUVycm9yKHt1cmw6cC51cmwsZXJyb3JDb2RlOnAuZXJyb3JDb2RlLHJlYXNvbjpwLnJlYXNvbixzcmNUZXh0OnAuc3JjVGV4dCxsaW5lOnAubGluZSxsaW5lcG9zOnAubGluZXBvcyxmaWxlcG9zOnAuZmlsZXBvc30pfXRoaXMuc2V0RGF0YShvKX07Yy5wcm90b3R5cGUuZ2V0WE1MPWZ1bmN0aW9uKCl7cmV0dXJuIHEuc2FwLnNlcmlhbGl6ZVhNTCh0aGlzLm9EYXRhKX07Yy5wcm90b3R5cGUuc2V0RGF0YT1mdW5jdGlvbihkKXt0aGlzLm9EYXRhPWQ7dGhpcy5jaGVja1VwZGF0ZSgpfTtjLnByb3RvdHlwZS5sb2FkRGF0YT1mdW5jdGlvbih1LHAsQSx0LGQsaCl7dmFyIGU9dGhpcztBPShBIT09ZmFsc2UpO3Q9dHx8IkdFVCI7ZD1kPT09dW5kZWZpbmVkP3RoaXMuYkNhY2hlOmQ7dGhpcy5maXJlUmVxdWVzdFNlbnQoe3VybDp1LHR5cGU6dCxhc3luYzpBLGhlYWRlcnM6aCxpbmZvOiJjYWNoZT0iK2QsaW5mb09iamVjdDp7Y2FjaGU6ZH19KTt0aGlzLl9hamF4KHt1cmw6dSxhc3luYzpBLGNhY2hlOmQsZGF0YVR5cGU6J3htbCcsZGF0YTpwLGhlYWRlcnM6aCx0eXBlOnQsc3VjY2VzczpmdW5jdGlvbihEKXtpZighRCl7cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IE5vIGRhdGEgd2FzIHJldHJpZXZlZCBieSBzZXJ2aWNlOiAiK3UpfWUuc2V0RGF0YShEKTtlLmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6dSx0eXBlOnQsYXN5bmM6QSxoZWFkZXJzOmgsaW5mbzoiY2FjaGU9IitkLGluZm9PYmplY3Q6e2NhY2hlOmR9LHN1Y2Nlc3M6dHJ1ZX0pfSxlcnJvcjpmdW5jdGlvbihmLGcsaSl7dmFyIEU9e21lc3NhZ2U6ZyxzdGF0dXNDb2RlOmYuc3RhdHVzLHN0YXR1c1RleHQ6Zi5zdGF0dXNUZXh0LHJlc3BvbnNlVGV4dDpmLnJlc3BvbnNlVGV4dH07cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6ICIrZyxmLnJlc3BvbnNlVGV4dCsiLCIrZi5zdGF0dXMrIiwiK2Yuc3RhdHVzVGV4dCk7ZS5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOnUsdHlwZTp0LGFzeW5jOkEsaGVhZGVyczpoLGluZm86ImNhY2hlPSIrZCxpbmZvT2JqZWN0OntjYWNoZTpkfSxzdWNjZXNzOmZhbHNlLGVycm9yb2JqZWN0OkV9KTtlLmZpcmVSZXF1ZXN0RmFpbGVkKEUpfX0pfTtjLnByb3RvdHlwZS5zZXROYW1lU3BhY2U9ZnVuY3Rpb24obixwKXtpZighcCl7cD0iIn1pZighdGhpcy5vTmFtZVNwYWNlcyl7dGhpcy5vTmFtZVNwYWNlcz17fX10aGlzLm9OYW1lU3BhY2VzW3BdPW59O2MucHJvdG90eXBlLmJpbmRQcm9wZXJ0eT1mdW5jdGlvbihwLG8sUCl7dmFyIEI9bmV3IGEodGhpcyxwLG8sUCk7cmV0dXJuIEJ9O2MucHJvdG90eXBlLmJpbmRMaXN0PWZ1bmN0aW9uKHAsbyxzLGYsUCl7dmFyIEI9bmV3IFgodGhpcyxwLG8scyxmLFApO3JldHVybiBCfTtjLnByb3RvdHlwZS5iaW5kVHJlZT1mdW5jdGlvbihwLG8sZixQKXt2YXIgQj1uZXcgYih0aGlzLHAsbyxmLFApO3JldHVybiBCfTtjLnByb3RvdHlwZS5zZXRQcm9wZXJ0eT1mdW5jdGlvbihwLHYsbyl7dmFyIE89cC5zdWJzdHJpbmcoMCxwLmxhc3RJbmRleE9mKCIvIikrMSksUD1wLnN1YnN0cihwLmxhc3RJbmRleE9mKCIvIikrMSk7aWYoIXRoaXMucmVzb2x2ZShwLG8pKXtyZXR1cm59aWYoIXRoaXMub0RhdGEuZG9jdW1lbnRFbGVtZW50KXtxLnNhcC5sb2cud2FybmluZygiVHJ5aW5nIHRvIHNldCBwcm9wZXJ0eSAiK3ArIiwgYnV0IG5vIGRvY3VtZW50IGV4aXN0cy4iKTtyZXR1cm59dmFyIGQ7aWYoUC5pbmRleE9mKCJAIik9PTApe2Q9dGhpcy5fZ2V0T2JqZWN0KE8sbyk7aWYoZFswXSl7ZFswXS5zZXRBdHRyaWJ1dGUoUC5zdWJzdHIoMSksdik7dGhpcy5jaGVja1VwZGF0ZSgpfX1lbHNle2Q9dGhpcy5fZ2V0T2JqZWN0KHAsbyk7aWYoZFswXSl7cShkWzBdKS50ZXh0KHYpO3RoaXMuY2hlY2tVcGRhdGUoKX19fTtjLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihwLG8pe3ZhciByPXRoaXMuX2dldE9iamVjdChwLG8pO2lmKHImJnR5cGVvZiByIT0ic3RyaW5nIil7cj1xKHJbMF0pLnRleHQoKX1yZXR1cm4gcn07Yy5wcm90b3R5cGUuZ2V0T2JqZWN0PWZ1bmN0aW9uKHAsbyl7dmFyIE89dGhpcy5fZ2V0T2JqZWN0KHAsbyk7aWYocS5pc0FycmF5KE8pKXtPPU9bMF19cmV0dXJuIE99O2MucHJvdG90eXBlLl9nZXRPYmplY3Q9ZnVuY3Rpb24ocCxvKXt2YXIgcj10aGlzLm9EYXRhLmRvY3VtZW50RWxlbWVudDtpZighcil7cmV0dXJuIG51bGx9dmFyIG49dGhpcy5pc0xlZ2FjeVN5bnRheCgpP1tyXTpbXTtpZihvIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkNvbnRleHQpe249dGhpcy5fZ2V0T2JqZWN0KG8uZ2V0UGF0aCgpKX1lbHNlIGlmKG8pe249W29dfWlmKCFwKXtyZXR1cm4gbn12YXIgUD1wLnNwbGl0KCIvIikscyxpPTA7aWYoIVBbMF0pe249cjtpKyt9bj1uLmxlbmd0aD09dW5kZWZpbmVkP1tuXTpuO249blswXT9uOm51bGw7d2hpbGUobiYmbi5sZW5ndGg+MCYmUFtpXSl7cz1QW2ldO2lmKHMuaW5kZXhPZigiQCIpPT0wKXtuPXRoaXMuX2dldEF0dHJpYnV0ZShuWzBdLHMuc3Vic3RyKDEpKX1lbHNlIGlmKHM9PSJ0ZXh0KCkiKXtuPXEoblswXSkudGV4dCgpfWVsc2UgaWYoaXNOYU4ocykpe249dGhpcy5fZ2V0Q2hpbGRFbGVtZW50c0J5VGFnTmFtZShuWzBdLHMpfWVsc2V7bj1bbltzXV19aSsrfXJldHVybiBufTtjLnByb3RvdHlwZS5fZ2V0QXR0cmlidXRlPWZ1bmN0aW9uKG4sTil7aWYoIXRoaXMub05hbWVTcGFjZXN8fE4uaW5kZXhPZigiOiIpPT0tMSl7cmV0dXJuIG4uZ2V0QXR0cmlidXRlKE4pfXZhciBzPXRoaXMuX2dldE5hbWVTcGFjZShOKSxsPXRoaXMuX2dldExvY2FsTmFtZShOKTtpZihuLmdldEF0dHJpYnV0ZU5TKXtyZXR1cm4gbi5nZXRBdHRyaWJ1dGVOUyhzLGwpfWVsc2V7aWYoIXRoaXMub0RvY05TUHJlZml4ZXMpe3RoaXMub0RvY05TUHJlZml4ZXM9dGhpcy5fZ2V0RG9jTlNQcmVmaXhlcygpfXZhciBwPXRoaXMub0RvY05TUHJlZml4ZXNbc107Tj0ocD9wKyI6IjoiIikrbDtyZXR1cm4gbi5nZXRBdHRyaWJ1dGUoTil9fTtjLnByb3RvdHlwZS5fZ2V0Q2hpbGRFbGVtZW50c0J5VGFnTmFtZT1mdW5jdGlvbihuLE4pe3ZhciBkPW4uY2hpbGROb2RlcyxyPVtdO2lmKHRoaXMub05hbWVTcGFjZXMpe3ZhciBzPXRoaXMuX2dldE5hbWVTcGFjZShOKSxsPXRoaXMuX2dldExvY2FsTmFtZShOKSxlO3EuZWFjaChkLGZ1bmN0aW9uKGksbyl7ZT1vLmxvY2FsTmFtZXx8by5iYXNlTmFtZTtpZihvLm5vZGVUeXBlPT0xJiZlPT1sJiZvLm5hbWVzcGFjZVVSST09cyl7ci5wdXNoKG8pfX0pfWVsc2V7cS5lYWNoKGQsZnVuY3Rpb24oaSxvKXtpZihvLm5vZGVUeXBlPT0xJiZvLm5vZGVOYW1lPT1OKXtyLnB1c2gobyl9fSl9cmV0dXJuIHJ9O2MucHJvdG90eXBlLl9nZXROYW1lU3BhY2U9ZnVuY3Rpb24obil7dmFyIGk9bi5pbmRleE9mKCI6IikscD0iIjtpZihpPjApe3A9bi5zdWJzdHIoMCxpKX1yZXR1cm4gdGhpcy5vTmFtZVNwYWNlc1twXX07Yy5wcm90b3R5cGUuX2dldExvY2FsTmFtZT1mdW5jdGlvbihuKXt2YXIgaT1uLmluZGV4T2YoIjoiKSxsPW47aWYoaT4wKXtsPW4uc3Vic3RyKGkrMSl9cmV0dXJuIGx9O2MucHJvdG90eXBlLl9nZXREb2NOU1ByZWZpeGVzPWZ1bmN0aW9uKCl7dmFyIHA9e30sZD10aGlzLm9EYXRhJiZ0aGlzLm9EYXRhLmRvY3VtZW50RWxlbWVudDtpZighZCl7cmV0dXJuIHB9dmFyIEE9ZC5hdHRyaWJ1dGVzO3EuZWFjaChBLGZ1bmN0aW9uKGksbyl7dmFyIG49by5uYW1lLHY9by52YWx1ZTtpZihuPT0ieG1sbnMiKXtwW3ZdPSIifWVsc2UgaWYobi5pbmRleE9mKCJ4bWxucyIpPT0wKXtwW3ZdPW4uc3Vic3RyKDYpfX0pO3JldHVybiBwfTtjLnByb3RvdHlwZS5fcmVzb2x2ZT1mdW5jdGlvbihwLG8pe3ZhciBpPSFxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSxyPXA7aWYoaSl7aWYobyl7cj1vLmdldFBhdGgoKSsiLyIrcH1lbHNle3I9dGhpcy5pc0xlZ2FjeVN5bnRheCgpPyIvIitwOnVuZGVmaW5lZH19cmV0dXJuIHJ9O2MucHJvdG90eXBlLmlzTGlzdD1mdW5jdGlvbihwLG8pe3JldHVybiBmYWxzZX07cmV0dXJuIGN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYXBwLk1vY2tTZXJ2ZXInKSl7Ci8qCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYXBwLk1vY2tTZXJ2ZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYXBwL01vY2tTZXJ2ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS91dGlsL01vY2tTZXJ2ZXInXSxmdW5jdGlvbihxLE0peyJ1c2Ugc3RyaWN0Ijt2YXIgYT1NO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudG1wbC5IYW5kbGViYXJzVGVtcGxhdGUnKSl7Ci8qIQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudG1wbC5IYW5kbGViYXJzVGVtcGxhdGUnKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LmhhbmRsZWJhcnMnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS90bXBsL0hhbmRsZWJhcnNUZW1wbGF0ZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vVGVtcGxhdGUnLCdzYXAvdWkvdGhpcmRwYXJ0eS9oYW5kbGViYXJzJ10sZnVuY3Rpb24ocSxULGgpeyJ1c2Ugc3RyaWN0Ijt2YXIgSD1ULmV4dGVuZCgic2FwLnVpLmNvcmUudG1wbC5IYW5kbGViYXJzVGVtcGxhdGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe1QuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pO1QucmVnaXN0ZXJUeXBlKCJ0ZXh0L3gtaGFuZGxlYmFycy10ZW1wbGF0ZSIsInNhcC51aS5jb3JlLnRtcGwuSGFuZGxlYmFyc1RlbXBsYXRlIik7SC5SRU5ERVJfSEVMUEVSUz0oZnVuY3Rpb24oKXt2YXIgZT1IYW5kbGViYXJzLmhlbHBlcnNbImVhY2giXSx3PUhhbmRsZWJhcnMuaGVscGVyc1sid2l0aCJdLEk9SGFuZGxlYmFycy5oZWxwZXJzWyJpZiJdLHU9SGFuZGxlYmFycy5oZWxwZXJzWyJ1bmxlc3MiXSxwPVQucGFyc2VQYXRoO3ZhciBvPXsiZWFjaCI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7aWYoIWEuaGFzaC5wYXRoKXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZWxzZXt2YXIgcj1hLmRhdGEucmVuZGVyTWFuYWdlcixSPWEuZGF0YS5yb290Q29udHJvbCxQPWEuZGF0YS5wYXRoLGI9YS5kYXRhLnBhcmVudENvbnRyb2wscz0ocS5zYXAuc3RhcnRzV2l0aChhLmhhc2gucGF0aCwiLyIpPyIiOihQfHwiIikpK2EuaGFzaC5wYXRoLGQ9Ui5iaW5kTGlzdChzKSxmPVtdLGc7aWYoYS5kYXRhKXtnPUhhbmRsZWJhcnMuY3JlYXRlRnJhbWUoYS5kYXRhKX1pZihkKXtxLmVhY2goZCxmdW5jdGlvbihrLHYpe2lmKGcpe2cucmVuZGVyTWFuYWdlcj1yO2cucm9vdENvbnRyb2w9UjtnLnBhdGg9cysiLyIraysiLyI7Zy5wYXJlbnRDb250cm9sPWJ9Zi5wdXNoKGEuZm4oe30se2RhdGE6Z30pKX0pfWlmKCFiKXtyZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhmLmpvaW4oIiIpKX19fSwid2l0aCI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7aWYoIWEuaGFzaC5wYXRoKXtyZXR1cm4gdy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZWxzZXt9fSwiaWYiOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO2lmKCFhLmhhc2gucGF0aCl7cmV0dXJuIEkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWVsc2V7fX0sInVubGVzcyI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7aWYoIWEuaGFzaC5wYXRoKXtyZXR1cm4gdS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZWxzZXt9fSwidGV4dCI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIHI9YS5kYXRhLnJvb3RDb250cm9sLFA9YS5kYXRhLnBhdGgscz0ocS5zYXAuc3RhcnRzV2l0aChhLmhhc2gucGF0aCwiLyIpPyIiOihQfHwiIikpK2EuaGFzaC5wYXRoO2lmKHMpe3ZhciB2PXIuYmluZFByb3Aocyk7cmV0dXJuIHYmJm5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcodil9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIlRoZSBleHByZXNzaW9uIFwidGV4dFwiIHJlcXVpcmVzIHRoZSBvcHRpb24gXCJwYXRoXCIhIil9fSwiZWxlbWVudCI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIHI9YS5kYXRhLnJlbmRlck1hbmFnZXIsUj1hLmRhdGEucm9vdENvbnRyb2wsRT1SLmNyZWF0ZURPTUVsZW1lbnQoYS5oYXNoLGEuZGF0YS5wYXRoKSxQPWEuZGF0YS5wYXJlbnRFbGVtZW50O2lmKGEuZm4pe3ZhciBDPWEuZm4oe30se2RhdGE6e3JlbmRlck1hbmFnZXI6cixyb290Q29udHJvbDpSLHBhcmVudEVsZW1lbnQ6RX19KX1pZihQKXtQLmFkZEVsZW1lbnQoRSk7cmV0dXJufXJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKHIuZ2V0SFRNTChFKSl9LCJjb250cm9sIjpmdW5jdGlvbihjLGEpe2E9YXx8Yzt2YXIgcj1hLmRhdGEucmVuZGVyTWFuYWdlcixDPWEuZGF0YS5jb250cm9sO2lmKEMpe3JldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKHIuZ2V0SFRNTChDKSl9dmFyIFI9YS5kYXRhLnJvb3RDb250cm9sLFA9YS5kYXRhLnBhdGgsbT1hLmRhdGEuY2hpbGRyZW4sdD1hLmhhc2hbInNhcC11aS10eXBlIl0sTT1xLnNhcC5nZXRPYmplY3QodCkuZ2V0TWV0YWRhdGEoKSxkPWEuaGFzaFsic2FwLXVpLWRlZmF1bHQtYWdncmVnYXRpb24iXXx8TS5nZXREZWZhdWx0QWdncmVnYXRpb25OYW1lKCksdj1hLmRhdGEudmlldzt2YXIgYj17fTtpZihhLmZuKXthLmZuKHt9LHtkYXRhOntyb290Q29udHJvbDpSLHBhdGg6UCxjaGlsZHJlbjpiLGRlZmF1bHRBZ2dyZWdhdGlvbjpkLHZpZXc6dn19KX12YXIgcz1xLmV4dGVuZCh7fSxhLmhhc2gpO3EuZWFjaChzLGZ1bmN0aW9uKGssVil7aWYoYltrXSl7ZGVsZXRlIHNba119fSk7dmFyIG49Ui5jcmVhdGVDb250cm9sKHMsYS5kYXRhLnBhdGgsISFtLHYpO2lmKCFxLmlzRW1wdHlPYmplY3QoYikpe3M9YS5oYXNoO3ZhciBBPU0uZ2V0QWxsQWdncmVnYXRpb25zKCk7cS5lYWNoKGIsZnVuY3Rpb24oZixnKXtmb3IodmFyIGk9MCxsPWcubGVuZ3RoO2k8bDtpKyspe3ZhciBqPWdbaV0saz1BW2ZdLHg9ayYmay5tdWx0aXBsZTtpZih0eXBlb2Ygc1tmXT09PSJzdHJpbmciKXt2YXIgQj1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXIoc1tmXSx2JiZ2LmdldENvbnRyb2xsZXIoKSk7Qi50ZW1wbGF0ZT1qO24uYmluZEFnZ3JlZ2F0aW9uKGYsQil9ZWxzZXtpZih4KXtuLmFkZEFnZ3JlZ2F0aW9uKGYsail9ZWxzZXtuLnNldEFnZ3JlZ2F0aW9uKGYsail9fX19KX1pZihtKXt2YXIgZj1hLmhhc2hbInNhcC11aS1hZ2dyZWdhdGlvbiJdfHxhLmRhdGEuZGVmYXVsdEFnZ3JlZ2F0aW9uO21bZl09bVtmXXx8W107bVtmXS5wdXNoKG4pO3JldHVybn1yZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhyLmdldEhUTUwobikpfSwicHJvcGVydHkiOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO3ZhciByPWEuZGF0YS5yb290Q29udHJvbCxtPXIuZ2V0TWV0YWRhdGEoKSxQPWEuaGFzaC5uYW1lLGc9bS5nZXRBbGxQcm9wZXJ0aWVzKClbUF0uX3NHZXR0ZXI7cmV0dXJuIHJbZ10oKX0sImFnZ3JlZ2F0aW9uIjpmdW5jdGlvbihjLGEpe2E9YXx8Yzt2YXIgcj1hLmRhdGEucmVuZGVyTWFuYWdlcixSPWEuZGF0YS5yb290Q29udHJvbCxtPVIuZ2V0TWV0YWRhdGEoKSxBPWEuaGFzaC5uYW1lLGc9bS5nZXRBbGxBZ2dyZWdhdGlvbnMoKVtBXS5fc0dldHRlcixiPVtdO3ZhciBDPVJbZ10oKTtpZihDKXtmb3IodmFyIGk9MCxsPUMubGVuZ3RoO2k8bDtpKyspe2lmKGEuZm4pe2IucHVzaChhLmZuKHt9LHtkYXRhOntyZW5kZXJNYW5hZ2VyOnIscm9vdENvbnRyb2w6Uixjb250cm9sOkNbaV19fSkpfWVsc2V7Yi5wdXNoKHIuZ2V0SFRNTChDW2ldKSl9fX1yZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhiLmpvaW4oIiIpKX0sImV2ZW50IjpmdW5jdGlvbihjLGEpe2E9YXx8Y319O3JldHVybiBvfSgpKTtILnByb3RvdHlwZS5jcmVhdGVNZXRhZGF0YT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0Q29udGVudCgpLGY9dGhpcy5fZm5UZW1wbGF0ZT10aGlzLl9mblRlbXBsYXRlfHxIYW5kbGViYXJzLmNvbXBpbGUodCk7dmFyIG09e30saj1zYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKCkscD1zYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5nZXRNZXRhZGF0YSgpLmdldEFsbFByaXZhdGVBZ2dyZWdhdGlvbnMoKTt2YXIgbz17InByb3BlcnR5IjpmdW5jdGlvbihjLGEpe2E9YXx8Yzt2YXIgbj1hLmhhc2gubmFtZTtpZihuJiZuIT09ImlkIiYmIWpbbl0pe20ucHJvcGVydGllcz1tLnByb3BlcnRpZXN8fHt9O20ucHJvcGVydGllc1tuXT1xLmV4dGVuZCh7fSx7dHlwZToic3RyaW5nIn0sYS5oYXNoKX1lbHNle3Rocm93IG5ldyBFcnJvcigiVGhlIHByb3BlcnR5IG5hbWUgXCIiK24rIlwiIGlzIHJlc2VydmVkLiIpfX0sImFnZ3JlZ2F0aW9uIjpmdW5jdGlvbihjLGEpe2E9YXx8Yzt2YXIgbj1hLmhhc2gubmFtZTtpZihuJiYhaltuXSYmIXBbbl0pe2EuaGFzaC5tdWx0aXBsZT1hLmhhc2gubXVsdGlwbGU9PSJ0cnVlIjttLmFnZ3JlZ2F0aW9ucz1tLmFnZ3JlZ2F0aW9uc3x8e307bS5hZ2dyZWdhdGlvbnNbbl09cS5leHRlbmQoe30sYS5oYXNoKX1lbHNle3Rocm93IG5ldyBFcnJvcigiVGhlIGFnZ3JlZ2F0aW9uIG5hbWUgXCIiK24rIlwiIGlzIHJlc2VydmVkLiIpfX0sImV2ZW50IjpmdW5jdGlvbihjLGEpe2E9YXx8Y319O3EuZWFjaChbImVhY2giLCJpZiIsInVubGVzcyIsIndpdGgiXSxmdW5jdGlvbihpLHYpe29bdl09ZnVuY3Rpb24oKXt9fSk7Zih7fSx7aGVscGVyczpvfSk7cmV0dXJuIG19O0gucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyPWZ1bmN0aW9uKHYpe3ZhciB0PXRoaXMuZ2V0Q29udGVudCgpLGY9dGhpcy5fZm5UZW1wbGF0ZT10aGlzLl9mblRlbXBsYXRlfHxIYW5kbGViYXJzLmNvbXBpbGUodCk7dmFyIHI9ZnVuY3Rpb24oYSxjKXt2YXIgcz1mKGMuZ2V0Q29udGV4dCgpfHx7fSx7ZGF0YTp7cmVuZGVyTWFuYWdlcjphLHJvb3RDb250cm9sOmMsdmlldzp2fSxoZWxwZXJzOkguUkVOREVSX0hFTFBFUlN9KTthLndyaXRlKHMpfTtyZXR1cm4gcn07cmV0dXJuIEh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Db3JlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ29yZScpO2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkNvbXBvbmVudCcpKXsKLyoKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkNvbXBvbmVudCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0NvbXBvbmVudCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnLCcuL0NvbXBvbmVudE1ldGFkYXRhJywnLi9Db3JlJ10sZnVuY3Rpb24ocSxNLEMsYSl7InVzZSBzdHJpY3QiO3ZhciBiPU0uZXh0ZW5kKCJzYXAudWkuY29yZS5Db21wb25lbnQiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxtZXRhZGF0YTp7c3RlcmVvdHlwZToiY29tcG9uZW50IiwiYWJzdHJhY3QiOnRydWUsdmVyc2lvbjoiMC4wIixpbmNsdWRlczpbXSxkZXBlbmRlbmNpZXM6e2xpYnM6W10sY29tcG9uZW50czpbXSx1aTV2ZXJzaW9uOiIifSxjb25maWc6e30sY3VzdG9taXppbmc6e30sbGlicmFyeToic2FwLnVpLmNvcmUifX0sQyk7Yi5hY3RpdmF0ZUN1c3RvbWl6aW5nPWZ1bmN0aW9uKGMpe307Yi5kZWFjdGl2YXRlQ3VzdG9taXppbmc9ZnVuY3Rpb24oYyl7fTtiLmdldE93bmVySWRGb3I9ZnVuY3Rpb24obyl7aWYobyYmKG8gaW5zdGFuY2VvZiBifHxvIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUubXZjLlZpZXcpKXtyZXR1cm4gTS5nZXRPd25lcklkRm9yKG8pfX07Yi5wcm90b3R5cGUuZ2V0SW50ZXJmYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O2IucHJvdG90eXBlLl9pbml0Q29tcG9zaXRlU3VwcG9ydD1mdW5jdGlvbihzKXt0aGlzLl9tTW9ja1NlcnZlcnM9e307dGhpcy5nZXRNZXRhZGF0YSgpLm9uSW5pdENvbXBvbmVudCgpO3RoaXMub0NvbXBvbmVudERhdGE9cyYmcy5jb21wb25lbnREYXRhO3RoaXMuZ2V0TWV0YWRhdGEoKS5pbml0KCk7dGhpcy5pbml0Q29tcG9uZW50TW9kZWxzKCk7aWYodGhpcy5vbldpbmRvd0Vycm9yKXt0aGlzLl9mbldpbmRvd0Vycm9ySGFuZGxlcj1xLnByb3h5KGZ1bmN0aW9uKGUpe3ZhciBFPWUub3JpZ2luYWxFdmVudDt0aGlzLm9uV2luZG93RXJyb3IoRS5tZXNzYWdlLEUuZmlsZW5hbWUsRS5saW5lbm8pfSx0aGlzKTtxKHdpbmRvdykuYmluZCgiZXJyb3IiLHRoaXMuX2ZuV2luZG93RXJyb3JIYW5kbGVyKX1pZih0aGlzLm9uV2luZG93QmVmb3JlVW5sb2FkKXt0aGlzLl9mbldpbmRvd0JlZm9yZVVubG9hZEhhbmRsZXI9cS5wcm94eSh0aGlzLm9uV2luZG93QmVmb3JlVW5sb2FkLHRoaXMpO3Eod2luZG93KS5iaW5kKCJiZWZvcmV1bmxvYWQiLHRoaXMuX2ZuV2luZG93QmVmb3JlVW5sb2FkSGFuZGxlcil9aWYodGhpcy5vbldpbmRvd1VubG9hZCl7dGhpcy5fZm5XaW5kb3dVbmxvYWRIYW5kbGVyPXEucHJveHkodGhpcy5vbldpbmRvd1VubG9hZCx0aGlzKTtxKHdpbmRvdykuYmluZCgidW5sb2FkIix0aGlzLl9mbldpbmRvd1VubG9hZEhhbmRsZXIpfX07Yi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKHRoaXMuX21Nb2NrU2VydmVycyl7cS5lYWNoKHRoaXMuX21Nb2NrU2VydmVycyxmdW5jdGlvbihuLG0pe20uc3RvcCgpfSk7ZGVsZXRlIHRoaXMuX21Nb2NrU2VydmVyc31pZih0aGlzLl9mbldpbmRvd0Vycm9ySGFuZGxlcil7cSh3aW5kb3cpLnVuYmluZCgiZXJyb3IiLHRoaXMuX2ZuV2luZG93RXJyb3JIYW5kbGVyKTtkZWxldGUgdGhpcy5fZm5XaW5kb3dFcnJvckhhbmRsZXJ9aWYodGhpcy5fZm5XaW5kb3dCZWZvcmVVbmxvYWRIYW5kbGVyKXtxKHdpbmRvdykudW5iaW5kKCJiZWZvcmV1bmxvYWQiLHRoaXMuX2ZuV2luZG93QmVmb3JlVW5sb2FkSGFuZGxlcik7ZGVsZXRlIHRoaXMuX2ZuV2luZG93QmVmb3JlVW5sb2FkSGFuZGxlcn1pZih0aGlzLl9mbldpbmRvd1VubG9hZEhhbmRsZXIpe3Eod2luZG93KS51bmJpbmQoInVubG9hZCIsdGhpcy5fZm5XaW5kb3dVbmxvYWRIYW5kbGVyKTtkZWxldGUgdGhpcy5fZm5XaW5kb3dVbmxvYWRIYW5kbGVyfWlmKHRoaXMuX29FdmVudEJ1cyl7dGhpcy5fb0V2ZW50QnVzLmRlc3Ryb3koKTtkZWxldGUgdGhpcy5fb0V2ZW50QnVzfU0ucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuZ2V0TWV0YWRhdGEoKS5vbkV4aXRDb21wb25lbnQoKX07Yi5wcm90b3R5cGUuZ2V0Q29tcG9uZW50RGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db21wb25lbnREYXRhfTtiLnByb3RvdHlwZS5nZXRFdmVudEJ1cz1mdW5jdGlvbigpe2lmKCF0aGlzLl9vRXZlbnRCdXMpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLkV2ZW50QnVzIik7dGhpcy5fb0V2ZW50QnVzPW5ldyBzYXAudWkuY29yZS5FdmVudEJ1cygpfXJldHVybiB0aGlzLl9vRXZlbnRCdXN9O2IucHJvdG90eXBlLmluaXRDb21wb25lbnRNb2RlbHM9ZnVuY3Rpb24obSxzKXt2YXIgbz10aGlzLmdldE1ldGFkYXRhKCk7dmFyIGM9bXx8by5nZXRNb2RlbHMoKSxTPXN8fG8uZ2V0U2VydmljZXMoKTtpZihjKXt2YXIgZj1mdW5jdGlvbihuLHUsZSxnKXtpZih0aGlzLl9tTW9ja1NlcnZlcnNbbl0pe3RoaXMuX21Nb2NrU2VydmVyc1tuXS5zdG9wKCl9cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUudXRpbC5Nb2NrU2VydmVyIik7dGhpcy5fbU1vY2tTZXJ2ZXJzW25dPW5ldyBzYXAudWkuY29yZS51dGlsLk1vY2tTZXJ2ZXIoe3Jvb3RVcmk6dX0pO3RoaXMuX21Nb2NrU2VydmVyc1tuXS5zaW11bGF0ZShlLGcpO3RoaXMuX21Nb2NrU2VydmVyc1tuXS5zdGFydCgpfTt2YXIgZD1mdW5jdGlvbihuLGUpe3ZhciB1PWUudXJpLFQ9ZS50eXBlO3Euc2FwLnJlcXVpcmUoVCk7dmFyIGc9cS5zYXAuZ2V0T2JqZWN0KFQpO3ZhciBoO2lmKFQ9PT0ic2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlTW9kZWwiKXtoPW5ldyBnKHtidW5kbGVVcmw6dX0pfWVsc2UgaWYoVD09PSJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNb2RlbCIpe2lmKGUubW9ja3NlcnZlcil7Zi5jYWxsKHRoaXMsbix1LGUubW9ja3NlcnZlci5tb2RlbCxlLm1vY2tzZXJ2ZXIuZGF0YSl9aD1uZXcgZyh1LGUuc2V0dGluZ3MpfWVsc2UgaWYoVD09PSJzYXAudWkubW9kZWwuanNvbi5KU09OTW9kZWwifHxUPT09InNhcC51aS5tb2RlbC54bWwuWE1MTW9kZWwiKXtoPW5ldyBnKCk7aWYodSl7aC5sb2FkRGF0YSh1KX19cmV0dXJuIGh9O3ZhciB0PXRoaXM7cS5lYWNoKGMsZnVuY3Rpb24oayxlKXt2YXIgZz1lLnNlcnZpY2UsaDtpZihnKXt2YXIgaT1TW2ddO2g9ZC5jYWxsKHQsayxpKX1lbHNlIGlmKGUudHlwZSl7aD1kLmNhbGwodCxrLGUpfWlmKGgpe3Quc2V0TW9kZWwoaCxrfHx1bmRlZmluZWQpfX0pfX07c2FwLnVpLmNvbXBvbmVudD1mdW5jdGlvbihjKXtpZighYyl7dGhyb3cgbmV3IEVycm9yKCJzYXAudWkuY29tcG9uZW50IGNhbm5vdCBiZSBjYWxsZWQgd2l0aG91dCBwYXJhbWV0ZXIhIil9aWYodHlwZW9mIGM9PT0ic3RyaW5nIil7cmV0dXJuIHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29tcG9uZW50KGMpfWVsc2V7dmFyIG49Yy5uYW1lLGk9Yy5pZCxvPWMuY29tcG9uZW50RGF0YSxzPW4rIi5Db21wb25lbnQiLFM9Yy5zZXR0aW5nczt2YXIgZD1zYXAudWkuY29tcG9uZW50LmxvYWQoYyx0cnVlKTt2YXIgST1uZXcgZChxLmV4dGVuZCh7fSxTLHtpZDppLGNvbXBvbmVudERhdGE6b30pKTtxLnNhcC5sb2cuaW5mbygiQ29tcG9uZW50IGluc3RhbmNlIElkID0gIitJLmdldElkKCkpO3JldHVybiBJfX07c2FwLnVpLmNvbXBvbmVudC5sb2FkPWZ1bmN0aW9uKGMsZil7dmFyIG49Yy5uYW1lLHU9Yy51cmwscz1uKyIuQ29tcG9uZW50IixwPXMrIi1wcmVsb2FkIixQPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldENvbXBvbmVudFByZWxvYWQoKTtpZighbil7dGhyb3cgbmV3IEVycm9yKCJUaGUgbmFtZSBvZiB0aGUgY29tcG9uZW50IGlzIHVuZGVmaW5lZC4iKX1pZih1KXtxLnNhcC5yZWdpc3Rlck1vZHVsZVBhdGgobix1KX1pZihQPT09InN5bmMifHxQPT09ImFzeW5jIil7dHJ5e2lmKCFxLnNhcC5pc0RlY2xhcmVkKHMsdHJ1ZSkpe3Euc2FwLnJlcXVpcmUocCl9fWNhdGNoKGUpe3Euc2FwLmxvZy53YXJuaW5nKCJjb3VsZG4ndCBwcmVsb2FkIGNvbXBvbmVudCBmcm9tICIrcCsiOiAiKygoZSYmZS5tZXNzYWdlKXx8ZSkpfX1xLnNhcC5yZXF1aXJlKHMpO3ZhciBvPXEuc2FwLmdldE9iamVjdChzKTtpZighbyl7aWYoZil7dGhyb3cgbmV3IEVycm9yKCJUaGUgc3BlY2lmaWVkIGNvbXBvbmVudCBjb250cm9sbGVyXCIiK3MrIlwiIGNvdWxkIG5vdCBiZSBmb3VuZCEiKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJUaGUgc3BlY2lmaWVkIGNvbXBvbmVudCBjb250cm9sbGVyIFwiIitzKyJcIiBjb3VsZCBub3QgYmUgZm91bmQhIil9fXJldHVybiBvfTtyZXR1cm4gYn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkNvbnRyb2wnKSl7Ci8qIQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ29udHJvbCcpO2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkN1c3RvbVN0eWxlQ2xhc3NTdXBwb3J0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ3VzdG9tU3R5bGVDbGFzc1N1cHBvcnQnKTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5FbGVtZW50Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuRWxlbWVudCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0VsZW1lbnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0JywnLi9Db3JlJywnLi9FbGVtZW50TWV0YWRhdGEnLCdzYXAvdWkvbW9kZWwvU2ltcGxlVHlwZScsJ2pxdWVyeS5zYXAuc3RyaW5ncyddLGZ1bmN0aW9uKHEsTSxDLEUsUyl7InVzZSBzdHJpY3QiO3ZhciBhPU0uZXh0ZW5kKCJzYXAudWkuY29yZS5FbGVtZW50Iix7bWV0YWRhdGE6e3N0ZXJlb3R5cGU6ImVsZW1lbnQiLCJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiZ2V0SWQiLCJnZXRNZXRhZGF0YSIsImdldFRvb2x0aXBfQXNTdHJpbmciLCJnZXRUb29sdGlwX1RleHQiLCJnZXRNb2RlbCIsInNldE1vZGVsIiwiaGFzTW9kZWwiLCJiaW5kRWxlbWVudCIsInVuYmluZEVsZW1lbnQiLCJnZXRFbGVtZW50QmluZGluZyIsInByb3AiLCJnZXRMYXlvdXREYXRhIiwic2V0TGF5b3V0RGF0YSJdLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnt9LGFnZ3JlZ2F0aW9uczp7dG9vbHRpcDp7bmFtZToidG9vbHRpcCIsdHlwZToic2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UiLGFsdFR5cGVzOlsic3RyaW5nIl0sbXVsdGlwbGU6ZmFsc2V9LGN1c3RvbURhdGE6e25hbWU6ImN1c3RvbURhdGEiLHR5cGU6InNhcC51aS5jb3JlLkN1c3RvbURhdGEiLG11bHRpcGxlOnRydWUsc2luZ3VsYXJOYW1lOiJjdXN0b21EYXRhIn0sbGF5b3V0RGF0YTp7bmFtZToibGF5b3V0RGF0YSIsdHlwZToic2FwLnVpLmNvcmUuTGF5b3V0RGF0YSIsbXVsdGlwbGU6ZmFsc2Usc2luZ3VsYXJOYW1lOiJsYXlvdXREYXRhIn0sZGVwZW5kZW50czp7bmFtZToiZGVwZW5kZW50cyIsdHlwZToic2FwLnVpLmNvcmUuQ29udHJvbCIsbXVsdGlwbGU6dHJ1ZX19LGFzc29jaWF0aW9uczp7fSxldmVudHM6e319LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlbmRlcmVyOm51bGx9LEUpO2EuZGVmaW5lQ2xhc3M9ZnVuY3Rpb24oYyxzLG0pe3JldHVybiBzYXAudWkuYmFzZS5PYmplY3QuZGVmaW5lQ2xhc3MoYyxzLG18fEUpfTthLnByb3RvdHlwZS5nZXRJbnRlcmZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuX2hhbmRsZUV2ZW50PWZ1bmN0aW9uKGUpe3ZhciBoPSJvbiIrZS50eXBlO3RoaXMuX2NhbGxFdmVudEhhbmRsZXModGhpcy5hQmVmb3JlRGVsZWdhdGVzLnNsaWNlKDApLGgsZSx0cnVlKTt0aGlzLl9jYWxsRXZlbnRIYW5kbGVzKFt0aGlzXSxoLGUpO3RoaXMuX2NhbGxFdmVudEhhbmRsZXModGhpcy5hRGVsZWdhdGVzLnNsaWNlKDApLGgsZSx0cnVlKX07YS5wcm90b3R5cGUuX2NhbGxFdmVudEhhbmRsZXM9ZnVuY3Rpb24oaCxILGUsZCl7aWYoaC5sZW5ndGg+MCl7Zm9yKHZhciBpPTA7aTxoLmxlbmd0aDtpKyspe2lmKGUuaXNJbW1lZGlhdGVIYW5kbGVyUHJvcGFnYXRpb25TdG9wcGVkKCkpe2JyZWFrfXZhciBvPWQ/aFtpXS5vRGVsZWdhdGU6aFtpXTt2YXIgdD0oZCYmaFtpXS52VGhpcyk/aFtpXS52VGhpczpvO2lmKHQ9PT10cnVlKXt0PXRoaXN9aWYob1tIXSl7b1tIXS5jYWxsKHQsZSl9fX19O2EuY3JlYXRlPWZ1bmN0aW9uKGQsayl7aWYoIWR8fGQgaW5zdGFuY2VvZiBhfHx0eXBlb2YgZCE9PSJvYmplY3QifHxkIGluc3RhbmNlb2YgU3RyaW5nKXtyZXR1cm4gZH1mdW5jdGlvbiBnKHQpe2lmKHR5cGVvZiB0PT09ImZ1bmN0aW9uIil7cmV0dXJuIHR9aWYodHlwZW9mIHQ9PT0ic3RyaW5nIil7cmV0dXJuIHEuc2FwLmdldE9iamVjdCh0KX19dmFyIGM9ZyhkLlR5cGUpfHxnKGsmJmsudHlwZSk7aWYodHlwZW9mIGM9PT0iZnVuY3Rpb24iKXtyZXR1cm4gbmV3IGMoZCl9dmFyIG09IkRvbid0IGtub3cgaG93IHRvIGNyZWF0ZSBhbiBFbGVtZW50IGZyb20gIitkKyIgKCIrKHR5cGVvZiBkKSsiKSI7cS5zYXAubG9nLmZhdGFsKG0pO3Rocm93IG5ldyBFcnJvcihtKX07YS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmdldE1ldGFkYXRhKXtyZXR1cm4iRWxlbWVudCAiK3RoaXMuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCkrIiMiK3RoaXMuc0lkfWVsc2V7cmV0dXJuIkVsZW1lbnQge3Vua25vd24gY2xhc3N9IyIrdGhpcy5zSWR9fTthLnByb3RvdHlwZS5nZXREb21SZWY9ZnVuY3Rpb24ocyl7cmV0dXJuIHEuc2FwLmRvbUJ5SWQocz90aGlzLmdldElkKCkrIi0iK3M6dGhpcy5nZXRJZCgpKX07YS5wcm90b3R5cGUuJD1mdW5jdGlvbihzKXtyZXR1cm4gcSh0aGlzLmdldERvbVJlZihzKSl9O2EucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1BhcmVudCYmdGhpcy5vUGFyZW50LmlzQWN0aXZlKCl9O2EucHJvdG90eXBlLnByb3A9ZnVuY3Rpb24ocCx2KXt2YXIgUD10aGlzLmdldE1ldGFkYXRhKCkuZ2V0SlNPTktleXMoKVtwXTtpZihQKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXtyZXR1cm4gdGhpc1tQLl9zR2V0dGVyXSgpfWVsc2V7dGhpc1tQLl9zTXV0YXRvcl0odik7cmV0dXJuIHRoaXN9fX07YS5wcm90b3R5cGUuaW5zZXJ0RGVwZW5kZW50PWZ1bmN0aW9uKGMsaSl7cmV0dXJuIHRoaXMuaW5zZXJ0QWdncmVnYXRpb24oImRlcGVuZGVudHMiLGMsaSx0cnVlKX07YS5wcm90b3R5cGUuYWRkRGVwZW5kZW50PWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmFkZEFnZ3JlZ2F0aW9uKCJkZXBlbmRlbnRzIixjLHRydWUpfTthLnByb3RvdHlwZS5yZW1vdmVEZXBlbmRlbnQ9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMucmVtb3ZlQWdncmVnYXRpb24oImRlcGVuZGVudHMiLGMsdHJ1ZSl9O2EucHJvdG90eXBlLnJlbW92ZUFsbERlcGVuZGVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdmVBbGxBZ2dyZWdhdGlvbigiZGVwZW5kZW50cyIsdHJ1ZSl9O2EucHJvdG90eXBlLmRlc3Ryb3lEZXBlbmRlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVzdHJveUFnZ3JlZ2F0aW9uKCJkZXBlbmRlbnRzIix0cnVlKX07YS5wcm90b3R5cGUucmVyZW5kZXI9ZnVuY3Rpb24oKXtpZih0aGlzLm9QYXJlbnQpe3RoaXMub1BhcmVudC5yZXJlbmRlcigpfX07YS5wcm90b3R5cGUuZ2V0VUlBcmVhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1BhcmVudD90aGlzLm9QYXJlbnQuZ2V0VUlBcmVhKCk6bnVsbH07YS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbihzKXtNLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyxzKTt0aGlzLiQoKS5yZW1vdmUoKX07YS5wcm90b3R5cGUuZmlyZUV2ZW50PWZ1bmN0aW9uKGUscCl7dmFyIEE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7QVsxXT1wPXB8fHt9O3AuaWQ9cC5pZHx8dGhpcy5nZXRJZCgpO3JldHVybiBzYXAudWkuYmFzZS5FdmVudFByb3ZpZGVyLnByb3RvdHlwZS5maXJlRXZlbnQuYXBwbHkodGhpcyxBKX07YS5wcm90b3R5cGUuYWRkRGVsZWdhdGU9ZnVuY3Rpb24oZCxjLHQsYil7dGhpcy5yZW1vdmVEZWxlZ2F0ZShkKTtpZih0eXBlb2YgYz09PSJvYmplY3QiKXtiPXQ7dD1jO2M9ZmFsc2V9aWYodHlwZW9mIHQ9PT0iYm9vbGVhbiIpe2I9dDt0PXVuZGVmaW5lZH0oYz90aGlzLmFCZWZvcmVEZWxlZ2F0ZXM6dGhpcy5hRGVsZWdhdGVzKS5wdXNoKHtvRGVsZWdhdGU6ZCxiQ2xvbmU6ISFiLHZUaGlzOigodD09PXRoaXMpP3RydWU6dCl9KTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUucmVtb3ZlRGVsZWdhdGU9ZnVuY3Rpb24oZCl7Zm9yKHZhciBpPTA7aTx0aGlzLmFEZWxlZ2F0ZXMubGVuZ3RoO2krKyl7aWYodGhpcy5hRGVsZWdhdGVzW2ldLm9EZWxlZ2F0ZT09ZCl7dGhpcy5hRGVsZWdhdGVzLnNwbGljZShpLDEpfX1mb3IodmFyIGk9MDtpPHRoaXMuYUJlZm9yZURlbGVnYXRlcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFCZWZvcmVEZWxlZ2F0ZXNbaV0ub0RlbGVnYXRlPT1kKXt0aGlzLmFCZWZvcmVEZWxlZ2F0ZXMuc3BsaWNlKGksMSl9fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5hZGRFdmVudERlbGVnYXRlPWZ1bmN0aW9uKGQsdCl7cmV0dXJuIHRoaXMuYWRkRGVsZWdhdGUoZCxmYWxzZSx0LHRydWUpfTthLnByb3RvdHlwZS5yZW1vdmVFdmVudERlbGVnYXRlPWZ1bmN0aW9uKGQpe3JldHVybiB0aGlzLnJlbW92ZURlbGVnYXRlKGQpfTthLnByb3RvdHlwZS5nZXRGb2N1c0RvbVJlZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldERvbVJlZigpfHxudWxsfTthLnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbigpe3ZhciBmPXRoaXMuZ2V0Rm9jdXNEb21SZWYoKTtpZihmKXt0cnl7Zi5mb2N1cygpfWNhdGNoKGUpe3ZhciBpPWYuaWQ/IiAoaWQ6ICIrZi5pZCsiKSI6IiAiO3Euc2FwLmxvZy53YXJuaW5nKCJET00gZWxlbWVudCIraSsiIGluICIrdGhpcy50b1N0cmluZygpKyIgd2hpY2ggc2hvdWxkIGJlIGZvY3VzZWQgY2Fubm90IGJlIGZvY3VzZWQ6ICIrZS5tZXNzYWdlKX19fTthLnByb3RvdHlwZS5nZXRGb2N1c0luZm89ZnVuY3Rpb24oKXtyZXR1cm57aWQ6dGhpcy5nZXRJZCgpfX07YS5wcm90b3R5cGUuYXBwbHlGb2N1c0luZm89ZnVuY3Rpb24oZil7dGhpcy5mb2N1cygpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5fcmVmcmVzaFRvb2x0aXBCYXNlRGVsZWdhdGU9ZnVuY3Rpb24odCl7dmFyIG89dGhpcy5nZXRUb29sdGlwKCk7aWYobyBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlKXt0aGlzLnJlbW92ZURlbGVnYXRlKG8pfWlmKHQgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Ub29sdGlwQmFzZSl7dC5fY3VycmVudENvbnRyb2w9dGhpczt0aGlzLmFkZERlbGVnYXRlKHQpfX07YS5wcm90b3R5cGUuc2V0VG9vbHRpcD1mdW5jdGlvbih0KXt0aGlzLl9yZWZyZXNoVG9vbHRpcEJhc2VEZWxlZ2F0ZSh0KTt0aGlzLnNldEFnZ3JlZ2F0aW9uKCJ0b29sdGlwIix0KTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZ2V0VG9vbHRpcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEFnZ3JlZ2F0aW9uKCJ0b29sdGlwIil9O2EucnVuV2l0aFByZXByb2Nlc3NvcnM9TS5ydW5XaXRoUHJlcHJvY2Vzc29yczthLnByb3RvdHlwZS5nZXRUb29sdGlwX0FzU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRUb29sdGlwKCk7aWYodHlwZW9mIHQ9PT0ic3RyaW5nInx8dCBpbnN0YW5jZW9mIFN0cmluZyl7cmV0dXJuIHR9cmV0dXJuIHVuZGVmaW5lZH07YS5wcm90b3R5cGUuZ2V0VG9vbHRpcF9UZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRUb29sdGlwKCk7aWYodCYmdHlwZW9mIHQuZ2V0VGV4dD09PSJmdW5jdGlvbiIpe3JldHVybiB0LmdldFRleHQoKX1yZXR1cm4gdH07KGZ1bmN0aW9uKCl7dmFyIGc9ZnVuY3Rpb24oZSxrKXt2YXIgZD1lLmdldEFnZ3JlZ2F0aW9uKCJjdXN0b21EYXRhIik7aWYoZCl7Zm9yKHZhciBpPTA7aTxkLmxlbmd0aDtpKyspe2lmKGRbaV0uZ2V0S2V5KCk9PWspe3JldHVybiBkW2ldfX19cmV0dXJuIG51bGx9O3ZhciBzPWZ1bmN0aW9uKGUsayx2LHcpe2lmKHY9PT1udWxsKXt2YXIgZD1nKGUsayk7aWYoIWQpe3JldHVybn12YXIgYj1lLmdldEFnZ3JlZ2F0aW9uKCJjdXN0b21EYXRhIikubGVuZ3RoO2lmKGI9PTEpe2UuZGVzdHJveUFnZ3JlZ2F0aW9uKCJjdXN0b21EYXRhIix0cnVlKX1lbHNle2UucmVtb3ZlQWdncmVnYXRpb24oImN1c3RvbURhdGEiLGQsdHJ1ZSk7ZC5kZXN0cm95KCl9fWVsc2V7dmFyIGQ9ZyhlLGspO2lmKGQpe2Quc2V0VmFsdWUodik7ZC5zZXRXcml0ZVRvRG9tKHcpfWVsc2V7dmFyIGQ9bmV3IHNhcC51aS5jb3JlLkN1c3RvbURhdGEoe2tleTprLHZhbHVlOnYsd3JpdGVUb0RvbTp3fSk7ZS5hZGRBZ2dyZWdhdGlvbigiY3VzdG9tRGF0YSIsZCx0cnVlKX19fTthLnByb3RvdHlwZS5kYXRhPWZ1bmN0aW9uKCl7dmFyIGI9YXJndW1lbnRzLmxlbmd0aDtpZihiPT0wKXt2YXIgZD10aGlzLmdldEFnZ3JlZ2F0aW9uKCJjdXN0b21EYXRhIikscj17fTtpZihkKXtmb3IodmFyIGk9MDtpPGQubGVuZ3RoO2krKyl7cltkW2ldLmdldEtleSgpXT1kW2ldLmdldFZhbHVlKCl9fXJldHVybiByfWVsc2UgaWYoYj09MSl7dmFyIGM9YXJndW1lbnRzWzBdO2lmKGM9PT1udWxsKXt0aGlzLmRlc3Ryb3lBZ2dyZWdhdGlvbigiY3VzdG9tRGF0YSIsdHJ1ZSk7cmV0dXJuIHRoaXN9ZWxzZSBpZih0eXBlb2YgYz09InN0cmluZyIpe3ZhciBlPWcodGhpcyxjKTtyZXR1cm4gZT9lLmdldFZhbHVlKCk6bnVsbH1lbHNlIGlmKHR5cGVvZiBjPT0ib2JqZWN0Iil7Zm9yKHZhciBrIGluIGMpe3ModGhpcyxrLGNba10pfXJldHVybiB0aGlzfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJXaGVuIGRhdGEoKSBpcyBjYWxsZWQgd2l0aCBvbmUgYXJndW1lbnQsIHRoaXMgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgYW4gb2JqZWN0IG9yIG51bGwsIGJ1dCBpcyAiKyh0eXBlb2YgYykrIjoiK2MrIiAob24gVUkgRWxlbWVudCB3aXRoIElEICciK3RoaXMuZ2V0SWQoKSsiJykiKX19ZWxzZSBpZihiPT0yKXtzKHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk7cmV0dXJuIHRoaXN9ZWxzZSBpZihiPT0zKXtzKHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pO3JldHVybiB0aGlzfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJkYXRhKCkgbWF5IG9ubHkgYmUgY2FsbGVkIHdpdGggMC0zIGFyZ3VtZW50cyAob24gVUkgRWxlbWVudCB3aXRoIElEICciK3RoaXMuZ2V0SWQoKSsiJykiKX19fSkoKTthLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihJLGwpe3ZhciBjPU0ucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmb3IodmFyIGk9MDtpPHRoaXMuYURlbGVnYXRlcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFEZWxlZ2F0ZXNbaV0uYkNsb25lKXtjLmFEZWxlZ2F0ZXMucHVzaCh0aGlzLmFEZWxlZ2F0ZXNbaV0pfX1mb3IodmFyIGk9MDtpPHRoaXMuYUJlZm9yZURlbGVnYXRlcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFCZWZvcmVEZWxlZ2F0ZXNbaV0uYkNsb25lKXtjLmFCZWZvcmVEZWxlZ2F0ZXMucHVzaCh0aGlzLmFCZWZvcmVEZWxlZ2F0ZXNbaV0pfX1yZXR1cm4gY307YS5wcm90b3R5cGUuZmluZEVsZW1lbnRzPWZ1bmN0aW9uKHIpe3ZhciBjPU0ucHJvdG90eXBlLmZpbmRBZ2dyZWdhdGVkT2JqZWN0cy5jYWxsKHRoaXMscik7cmV0dXJuIGN9O2EucHJvdG90eXBlLnNldExheW91dERhdGE9ZnVuY3Rpb24obCl7dGhpcy5zZXRBZ2dyZWdhdGlvbigibGF5b3V0RGF0YSIsbCx0cnVlKTt2YXIgTD10aGlzLmdldFBhcmVudCgpO2lmKEwpe3ZhciBlPXEuRXZlbnQoIkxheW91dERhdGFDaGFuZ2UiKTtlLnNyY0NvbnRyb2w9dGhpcztMLl9oYW5kbGVFdmVudChlKX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuYmluZEVsZW1lbnQ9ZnVuY3Rpb24ocCxQKXtyZXR1cm4gdGhpcy5iaW5kT2JqZWN0KHAsUCl9O2EucHJvdG90eXBlLnVuYmluZEVsZW1lbnQ9ZnVuY3Rpb24obSl7cmV0dXJuIHRoaXMudW5iaW5kT2JqZWN0KG0pfTthLnByb3RvdHlwZS5nZXRFbGVtZW50QmluZGluZz1mdW5jdGlvbihtKXtyZXR1cm4gdGhpcy5nZXRPYmplY3RCaW5kaW5nKG0pfTtyZXR1cm4gYX0sdHJ1ZSl9O3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0N1c3RvbVN0eWxlQ2xhc3NTdXBwb3J0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9FbGVtZW50J10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIEM9ZnVuY3Rpb24oKXtpZighKHRoaXMgaW5zdGFuY2VvZiBFKSl7cmV0dXJufXZhciBvPXRoaXMuY2xvbmU7dGhpcy5jbG9uZT1mdW5jdGlvbigpe3ZhciBjPW8uYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcyl7Yy5hQ3VzdG9tU3R5bGVDbGFzc2VzPXRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcy5zbGljZSgpfXJldHVybiBjfTt0aGlzLmFkZFN0eWxlQ2xhc3M9ZnVuY3Rpb24ocyxTKXtpZighdGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzKXt0aGlzLmFDdXN0b21TdHlsZUNsYXNzZXM9W119aWYocyl7aWYocy5pbmRleE9mKCJcIiIpPi0xKXtyZXR1cm4gdGhpc31pZihzLmluZGV4T2YoIiciKT4tMSl7cmV0dXJuIHRoaXN9Zm9yKHZhciBpPXRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcy5sZW5ndGgtMTtpPj0wO2ktLSl7aWYodGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzW2ldPT1zKXtyZXR1cm4gdGhpc319dGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzLnB1c2gocyk7dmFyIHI9dGhpcy5nZXREb21SZWYoKTtpZihyKXtxKHIpLmFkZENsYXNzKHMpfWVsc2UgaWYoUz09PWZhbHNlKXt0aGlzLmludmFsaWRhdGUoKX19cmV0dXJuIHRoaXN9O3RoaXMucmVtb3ZlU3R5bGVDbGFzcz1mdW5jdGlvbihzLFMpe2lmKHMmJnRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcyl7Zm9yKHZhciBpPXRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcy5sZW5ndGgtMTtpPj0wO2ktLSl7aWYodGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzW2ldPT1zKXt0aGlzLmFDdXN0b21TdHlsZUNsYXNzZXMuc3BsaWNlKGksMSk7dmFyIHI9dGhpcy5nZXREb21SZWYoKTtpZihyKXtxKHIpLnJlbW92ZUNsYXNzKHMpfWVsc2UgaWYoUz09PWZhbHNlKXt0aGlzLmludmFsaWRhdGUoKX19fX1yZXR1cm4gdGhpc307dGhpcy50b2dnbGVTdHlsZUNsYXNzPWZ1bmN0aW9uKHMsYSl7aWYocyYmdHlwZW9mIHM9PT0ic3RyaW5nIil7aWYoYT09PXRydWUpe3RoaXMuYWRkU3R5bGVDbGFzcyhzKX1lbHNlIGlmKGE9PT1mYWxzZSl7dGhpcy5yZW1vdmVTdHlsZUNsYXNzKHMpfWVsc2UgaWYoYT09PXVuZGVmaW5lZCl7dGhpcy5oYXNTdHlsZUNsYXNzKHMpP3RoaXMucmVtb3ZlU3R5bGVDbGFzcyhzKTp0aGlzLmFkZFN0eWxlQ2xhc3Mocyl9ZWxzZXtxLnNhcC5sb2cud2FybmluZyh0aGlzLnRvU3RyaW5nKCkrIi0gdG9nZ2xlU3R5bGVDbGFzcygpOiBiQWRkIHNob3VsZCBiZSBhIGJvb2xlYW4gb3IgdW5kZWZpbmVkLCBidXQgaXMgJyIrYSsiJyIpfX1yZXR1cm4gdGhpc307dGhpcy5oYXNTdHlsZUNsYXNzPWZ1bmN0aW9uKHMpe2lmKHMmJnRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcyl7Zm9yKHZhciBpPXRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcy5sZW5ndGgtMTtpPj0wO2ktLSl7aWYodGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzW2ldPT1zKXtyZXR1cm4gdHJ1ZX19fXJldHVybiBmYWxzZX07dGhpcy5nZXRNZXRhZGF0YSgpLmFkZFB1YmxpY01ldGhvZHMoWyJhZGRTdHlsZUNsYXNzIiwicmVtb3ZlU3R5bGVDbGFzcyIsInRvZ2dsZVN0eWxlQ2xhc3MiLCJoYXNTdHlsZUNsYXNzIl0pfTtyZXR1cm4gQ30sdHJ1ZSl9O3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0NvbnRyb2wiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0N1c3RvbVN0eWxlQ2xhc3NTdXBwb3J0JywnLi9FbGVtZW50J10sZnVuY3Rpb24ocSxDLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1FLmV4dGVuZCgic2FwLnVpLmNvcmUuQ29udHJvbCIse21ldGFkYXRhOntzdGVyZW90eXBlOiJjb250cm9sIiwiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbInBsYWNlQXQiLCJhdHRhY2hCcm93c2VyRXZlbnQiLCJkZXRhY2hCcm93c2VyRXZlbnQiXSxsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7ImJ1c3kiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJidXN5SW5kaWNhdG9yRGVsYXkiOnt0eXBlOiJpbnQiLGRlZmF1bHRWYWx1ZToxMDAwfX0sYWdncmVnYXRpb25zOnt9LGFzc29jaWF0aW9uczp7fSxldmVudHM6e319LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyl7dGhpcy5iQWxsb3dUZXh0U2VsZWN0aW9uPXRydWU7RS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5iT3V0cHV0PXRoaXMuZ2V0RG9tUmVmKCkhPW51bGw7aWYodGhpcy5fc2FwVWlDb3JlTG9jYWxCdXN5X2luaXRCdXN5SW5kaWNhdG9yKXt0aGlzLl9zYXBVaUNvcmVMb2NhbEJ1c3lfaW5pdEJ1c3lJbmRpY2F0b3IoKX19LHJlbmRlcmVyOm51bGx9KTthLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBjPUUucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLmFCaW5kUGFyYW1ldGVycyl7Zm9yKHZhciBpPTAsbD10aGlzLmFCaW5kUGFyYW1ldGVycy5sZW5ndGg7aTxsO2krKyl7dmFyIHA9dGhpcy5hQmluZFBhcmFtZXRlcnNbaV07Yy5hdHRhY2hCcm93c2VyRXZlbnQocC5zRXZlbnRUeXBlLHAuZm5IYW5kbGVyLHAub0xpc3RlbmVyIT09dGhpcz9wLm9MaXN0ZW5lcjp1bmRlZmluZWQpfX1jLmJBbGxvd1RleHRTZWxlY3Rpb249dGhpcy5iQWxsb3dUZXh0U2VsZWN0aW9uO3JldHVybiBjfTtDLmFwcGx5KGEucHJvdG90eXBlKTthLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBxLnNhcC5kb21CeUlkKHRoaXMuc0lkKSE9bnVsbH07YS5wcm90b3R5cGUuaW52YWxpZGF0ZT1mdW5jdGlvbihvKXt2YXIgdTtpZih0aGlzLmJPdXRwdXQmJih1PXRoaXMuZ2V0VUlBcmVhKCkpKXtpZighdGhpcy5fYklzQmVpbmdEZXN0cm95ZWQpe3UuYWRkSW52YWxpZGF0ZWRDb250cm9sKHRoaXMpfX1lbHNle3ZhciBwPXRoaXMuZ2V0UGFyZW50KCk7aWYocCYmKHRoaXMuYk91dHB1dHx8ISh0aGlzLmdldFZpc2libGUmJnRoaXMuZ2V0VmlzaWJsZSgpPT09ZmFsc2UpKSl7cC5pbnZhbGlkYXRlKHRoaXMpfX19O2EucHJvdG90eXBlLnJlcmVuZGVyPWZ1bmN0aW9uKCl7c2FwLnVpLmNvcmUuVUlBcmVhLnJlcmVuZGVyQ29udHJvbCh0aGlzKX07YS5wcm90b3R5cGUuYWxsb3dUZXh0U2VsZWN0aW9uPWZ1bmN0aW9uKEEpe3RoaXMuYkFsbG93VGV4dFNlbGVjdGlvbj1BO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5hdHRhY2hCcm93c2VyRXZlbnQ9ZnVuY3Rpb24oZSxoLGwpe2lmKGUmJih0eXBlb2YoZSk9PT0ic3RyaW5nIikpe2lmKGgmJnR5cGVvZihoKT09PSJmdW5jdGlvbiIpe2lmKCF0aGlzLmFCaW5kUGFyYW1ldGVycyl7dGhpcy5hQmluZFBhcmFtZXRlcnM9W119bD1sfHx0aGlzO3ZhciBwPWZ1bmN0aW9uKCl7aC5hcHBseShsLGFyZ3VtZW50cyl9O3RoaXMuYUJpbmRQYXJhbWV0ZXJzLnB1c2goe3NFdmVudFR5cGU6ZSxmbkhhbmRsZXI6aCxvTGlzdGVuZXI6bCxmblByb3h5OnB9KTt0aGlzLiQoKS5iaW5kKGUscCl9fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5kZXRhY2hCcm93c2VyRXZlbnQ9ZnVuY3Rpb24oZSxoLGwpe2lmKGUmJih0eXBlb2YoZSk9PT0ic3RyaW5nIikpe2lmKGgmJnR5cGVvZihoKT09PSJmdW5jdGlvbiIpe3ZhciAkPXRoaXMuJCgpLGkscDtsPWx8fHRoaXM7aWYodGhpcy5hQmluZFBhcmFtZXRlcnMpe2ZvcihpPXRoaXMuYUJpbmRQYXJhbWV0ZXJzLmxlbmd0aC0xO2k+PTA7aS0tKXtwPXRoaXMuYUJpbmRQYXJhbWV0ZXJzW2ldO2lmKHAuc0V2ZW50VHlwZT09PWUmJnAuZm5IYW5kbGVyPT09aCYmcC5vTGlzdGVuZXI9PT1sKXt0aGlzLmFCaW5kUGFyYW1ldGVycy5zcGxpY2UoaSwxKTskLnVuYmluZChlLHAuZm5Qcm94eSl9fX19fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5nZXRSZW5kZXJlcj1mdW5jdGlvbigpe3JldHVybiBzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLmdldFJlbmRlcmVyKHRoaXMpfTthLnByb3RvdHlwZS5wbGFjZUF0PWZ1bmN0aW9uKHIscCl7dmFyIGM9c2FwLnVpLmdldENvcmUoKTtpZihjLmlzSW5pdGlhbGl6ZWQoKSl7dmFyIG89cjtpZih0eXBlb2Ygbz09PSJzdHJpbmciKXtvPWMuYnlJZChyKX12YXIgaT1mYWxzZTtpZighKG8gaW5zdGFuY2VvZiBFKSl7bz1jLmNyZWF0ZVVJQXJlYShyKTtpPXRydWV9aWYoIW8pe3JldHVybn1pZighaSl7dmFyIGI9by5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpWyJjb250ZW50Il07dmFyIGQ9dHJ1ZTtpZihiKXtpZighYi5tdWx0aXBsZXx8Yi50eXBlIT0ic2FwLnVpLmNvcmUuQ29udHJvbCIpe2Q9ZmFsc2V9fWVsc2V7aWYoIW8uYWRkQ29udGVudHx8IW8uaW5zZXJ0Q29udGVudHx8IW8ucmVtb3ZlQWxsQ29udGVudCl7ZD1mYWxzZX19aWYoIWQpe3Euc2FwLmxvZy53YXJuaW5nKCJwbGFjZUF0IGNhbm5vdCBiZSBwcm9jZXNzZWQgYmVjYXVzZSBjb250YWluZXIgIitvKyIgZG9lcyBub3QgaGF2ZSBhbiBhZ2dyZWdhdGlvbiAnY29udGVudCcuIik7cmV0dXJufX1pZih0eXBlb2YgcD09PSJudW1iZXIiKXtvLmluc2VydENvbnRlbnQodGhpcyxwKX1lbHNle3A9cHx8Imxhc3QiO3N3aXRjaChwKXtjYXNlImxhc3QiOm8uYWRkQ29udGVudCh0aGlzKTticmVhaztjYXNlImZpcnN0IjpvLmluc2VydENvbnRlbnQodGhpcywwKTticmVhaztjYXNlIm9ubHkiOm8ucmVtb3ZlQWxsQ29udGVudCgpO28uYWRkQ29udGVudCh0aGlzKTticmVhaztkZWZhdWx0OnEuc2FwLmxvZy53YXJuaW5nKCJQb3NpdGlvbiAiK3ArIiBpcyBub3Qgc3VwcG9ydGVkIGZvciBmdW5jdGlvbiBwbGFjZUF0LiIpfX19ZWxzZXt2YXIgdD10aGlzO2MuYXR0YWNoSW5pdEV2ZW50KGZ1bmN0aW9uKCl7dC5wbGFjZUF0KHIscCl9KX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUub25zZWxlY3RzdGFydD1mdW5jdGlvbihiKXtpZighdGhpcy5iQWxsb3dUZXh0U2VsZWN0aW9uKXtiLnByZXZlbnREZWZhdWx0KCk7Yi5zdG9wUHJvcGFnYXRpb24oKX19O2EucHJvdG90eXBlLmdldElkRm9yTGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRJZCgpfTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKHMpe3RoaXMuX2JJc0JlaW5nRGVzdHJveWVkPXRydWU7dGhpcy5fY2xlYW51cEJ1c3lJbmRpY2F0b3IoKTtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXJBbGxGb3JDb250cm9sKHRoaXMuZ2V0SWQoKSk7RS5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMscyl9OyhmdW5jdGlvbigpe3ZhciBwPSJmb2N1c2luIGZvY3Vzb3V0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAiLGI9e29uQWZ0ZXJSZW5kZXJpbmc6ZnVuY3Rpb24oKXtpZih0aGlzLmdldFByb3BlcnR5KCJidXN5Iik9PT10cnVlJiZ0aGlzLiQoKSl7QS5hcHBseSh0aGlzKX19fSxBPWZ1bmN0aW9uKCl7dmFyICQ9dGhpcy4kKHRoaXMuX3NCdXN5U2VjdGlvbiksRj1bImFyZWEiLCJiYXNlIiwiYnIiLCJjb2wiLCJlbWJlZCIsImhyIiwiaW1nIiwiaW5wdXQiLCJrZXlnZW4iLCJsaW5rIiwibWVudWl0ZW0iLCJtZXRhIiwicGFyYW0iLCJzb3VyY2UiLCJ0cmFjayIsIndiciJdO2lmKHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkKTtkZWxldGUgdGhpcy5fYnVzeUluZGljYXRvckRlbGF5ZWRDYWxsSWR9dmFyIHQ9JC5nZXQoMCkmJiQuZ2V0KDApLnRhZ05hbWU7aWYodCYmcS5pbkFycmF5KHQudG9Mb3dlckNhc2UoKSxGKT49MCl7cS5zYXAubG9nLndhcm5pbmcoIkJ1c3kgSW5kaWNhdG9yIGNhbm5vdCBiZSBwbGFjZWQgaW4gZWxlbWVudHMgd2l0aCB0YWcgIit0KTtyZXR1cm59aWYoJC5jc3MoJ3Bvc2l0aW9uJyk9PSdzdGF0aWMnKXt0aGlzLl9idXN5U3RvcmVkUG9zaXRpb249J3N0YXRpYyc7JC5jc3MoJ3Bvc2l0aW9uJywncmVsYXRpdmUnKX12YXIgQj1xKCc8ZGl2IGNsYXNzPSJzYXBVaUxvY2FsQnVzeUluZGljYXRvciI+PGRpdiBjbGFzcz0ic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JBbmltYXRpb24iPjxkaXYgY2xhc3M9InNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQm94Ij48L2Rpdj48ZGl2IGNsYXNzPSJzYXBVaUxvY2FsQnVzeUluZGljYXRvckJveCI+PC9kaXY+PGRpdiBjbGFzcz0ic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JCb3giPjwvZGl2PjwvZGl2PjwvZGl2PicpO0IuYXR0cigiaWQiLHRoaXMuZ2V0SWQoKSsiLWJ1c3lJbmRpY2F0b3IiKTskLmFwcGVuZChCKTskLmFkZENsYXNzKCdzYXBVaUxvY2FsQnVzeScpO2lmKHRoaXMuX2J1c3lEZWxheWVkQ2FsbElkKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2J1c3lEZWxheWVkQ2FsbElkKX10aGlzLl9idXN5RGVsYXllZENhbGxJZD1xLnNhcC5kZWxheWVkQ2FsbCgxMjAwLHRoaXMsZik7aC5hcHBseSh0aGlzLFt0cnVlXSl9LGg9ZnVuY3Rpb24oQil7aWYoQil7dmFyICQ9dGhpcy4kKHRoaXMuX3NCdXN5U2VjdGlvbiksdD0kLmZpbmQoJ1t0YWJpbmRleF0nKSxjPXRoaXM7dGhpcy5fYnVzeVRhYkluZGljZXM9W107dC5lYWNoKGZ1bmN0aW9uKGksbyl7dmFyIHI9cShvKSxUPXIuYXR0cigndGFiaW5kZXgnKTtpZihUPDApcmV0dXJuIHRydWU7Yy5fYnVzeVRhYkluZGljZXMucHVzaCh7cmVmOnIsdGFiaW5kZXg6VH0pO3IuYXR0cigndGFiaW5kZXgnLC0xKTtyLmJpbmQocCxQKX0pfWVsc2V7aWYodGhpcy5fYnVzeVRhYkluZGljZXMpe3EuZWFjaCh0aGlzLl9idXN5VGFiSW5kaWNlcyxmdW5jdGlvbihpLG8pe28ucmVmLmF0dHIoJ3RhYmluZGV4JyxvLnRhYmluZGV4KTtvLnJlZi51bmJpbmQocCxQKX0pfXRoaXMuX2J1c3lUYWJJbmRpY2VzPVtdfX0sUD1mdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX0sZj1mdW5jdGlvbigpe3ZhciAkPXRoaXMuJCh0aGlzLl9zQnVzeVNlY3Rpb24pLmNoaWxkcmVuKCcuc2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3InKS5jaGlsZHJlbignLnNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQW5pbWF0aW9uJyk7dmFyIHQ9dGhpczt0Ll9idXN5QW5pbWF0aW9uVGltZXIxPXNldFRpbWVvdXQoZnVuY3Rpb24oKXskLmNoaWxkcmVuKCI6ZXEoMCkiKS5hZGRDbGFzcygnYWN0aXZlJyk7JC5jaGlsZHJlbigiOm5vdCg6ZXEoMCkpIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO3QuX2J1c3lBbmltYXRpb25UaW1lcjI9c2V0VGltZW91dChmdW5jdGlvbigpeyQuY2hpbGRyZW4oIjplcSgxKSIpLmFkZENsYXNzKCdhY3RpdmUnKTskLmNoaWxkcmVuKCI6bm90KDplcSgxKSkiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7dC5fYnVzeUFuaW1hdGlvblRpbWVyMz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JC5jaGlsZHJlbigiOmVxKDIpIikuYWRkQ2xhc3MoJ2FjdGl2ZScpOyQuY2hpbGRyZW4oIjpub3QoOmVxKDIpKSIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTt0Ll9idXN5QW5pbWF0aW9uVGltZXI0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXskLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpfSwxNTApfSwxNTApfSwxNTApfSwxNTApO3RoaXMuX2J1c3lEZWxheWVkQ2FsbElkPXEuc2FwLmRlbGF5ZWRDYWxsKDEyMDAsdGhpcyxmKX07YS5wcm90b3R5cGUuc2V0QnVzeT1mdW5jdGlvbihCLHMpe3RoaXMuX3NCdXN5U2VjdGlvbj1zO3ZhciAkPXRoaXMuJCh0aGlzLl9zQnVzeVNlY3Rpb24pO2lmKEI9PXRoaXMuZ2V0UHJvcGVydHkoImJ1c3kiKSl7cmV0dXJufXRoaXMuc2V0UHJvcGVydHkoImJ1c3kiLEIsdHJ1ZSk7aWYoQil7dGhpcy5hZGREZWxlZ2F0ZShiLGZhbHNlLHRoaXMpfWVsc2V7dGhpcy5yZW1vdmVEZWxlZ2F0ZShiKTtpZih0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZCk7ZGVsZXRlIHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkfX1pZighdGhpcy5nZXREb21SZWYoKSl7cmV0dXJufWlmKEIpe2lmKHRoaXMuZ2V0QnVzeUluZGljYXRvckRlbGF5KCk8PTApe0EuYXBwbHkodGhpcyl9ZWxzZXt0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZD1xLnNhcC5kZWxheWVkQ2FsbCh0aGlzLmdldEJ1c3lJbmRpY2F0b3JEZWxheSgpLHRoaXMsQSl9fWVsc2V7dGhpcy4kKCJidXN5SW5kaWNhdG9yIikucmVtb3ZlKCk7dGhpcy4kKCkucmVtb3ZlQ2xhc3MoJ3NhcFVpTG9jYWxCdXN5Jyk7aWYodGhpcy5fYnVzeVN0b3JlZFBvc2l0aW9uKXskLmNzcygncG9zaXRpb24nLHRoaXMuX2J1c3lTdG9yZWRQb3NpdGlvbik7ZGVsZXRlIHRoaXMuX2J1c3lTdG9yZWRQb3NpdGlvbn1oLmFwcGx5KHRoaXMsW2ZhbHNlXSk7aWYodGhpcy5fYnVzeURlbGF5ZWRDYWxsSWQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fYnVzeURlbGF5ZWRDYWxsSWQpO2RlbGV0ZSB0aGlzLl9idXN5RGVsYXllZENhbGxJZH19fTthLnByb3RvdHlwZS5pc0J1c3k9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eSgiYnVzeSIpfTthLnByb3RvdHlwZS5zZXRCdXN5SW5kaWNhdG9yRGVsYXk9ZnVuY3Rpb24oZCl7dGhpcy5zZXRQcm9wZXJ0eSgiYnVzeUluZGljYXRvckRlbGF5IixkLHRydWUpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5fY2xlYW51cEJ1c3lJbmRpY2F0b3I9ZnVuY3Rpb24oKXtpZih0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZCk7ZGVsZXRlIHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkfWlmKHRoaXMuX2J1c3lEZWxheWVkQ2FsbElkKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2J1c3lEZWxheWVkQ2FsbElkKTtkZWxldGUgdGhpcy5fYnVzeURlbGF5ZWRDYWxsSWR9aWYodGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyMSl7Y2xlYXJUaW1lb3V0KHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjEpO2RlbGV0ZSB0aGlzLl9idXN5QW5pbWF0aW9uVGltZXIxfWlmKHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjIpe2NsZWFyVGltZW91dCh0aGlzLl9idXN5QW5pbWF0aW9uVGltZXIyKTtkZWxldGUgdGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyMn1pZih0aGlzLl9idXN5QW5pbWF0aW9uVGltZXIzKXtjbGVhclRpbWVvdXQodGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyMyk7ZGVsZXRlIHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjN9aWYodGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyNCl7Y2xlYXJUaW1lb3V0KHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjQpO2RlbGV0ZSB0aGlzLl9idXN5QW5pbWF0aW9uVGltZXI0fX19KSgpO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVUlBcmVhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVUlBcmVhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVUlBcmVhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJy4vRWxlbWVudCcsJ2pxdWVyeS5zYXAuYWN0JywnanF1ZXJ5LnNhcC51aSddLGZ1bmN0aW9uKHEsTSxFKXsidXNlIHN0cmljdCI7dmFyIHI9cS5zYXAubG9nLmdldExvZ2dlcigic2FwLnVpLlJlbmRlcmluZyIsKCh3aW5kb3dbInNhcC11aS1jb25maWciXSYmd2luZG93WyJzYXAtdWktY29uZmlnIl1bInh4LWRlYnVnUmVuZGVyaW5nIl0pfHwvc2FwLXVpLXh4LWRlYnVnKFJ8LXIpZW5kZXJpbmc9KHRydWV8eHxYKS8udGVzdChkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpKT9xLnNhcC5sb2cuTGV2ZWwuREVCVUc6TWF0aC5taW4ocS5zYXAubG9nLkxldmVsLklORk8scS5zYXAubG9nLmdldExldmVsKCkpKSxkPWZ1bmN0aW9uKGMpe3JldHVybiBjfSxEPXEubm9vcCxmPXEubm9vcDtpZihyLmlzTG9nZ2FibGUoKSl7ZD1mdW5jdGlvbihjKXt2YXIgbDt0cnl7dGhyb3cgbmV3IEVycm9yKCl9Y2F0Y2goZSl7bD1lLnN0YWNrfHxlLnN0YWNrdHJhY2V8fChlLnNvdXJjZVVSTD9lLnNvdXJjZVVSTCsiOiIrZS5saW5lOm51bGwpO2w9bD9sLnNwbGl0KC9cblxzKi9nKS5zbGljZSgyKTp1bmRlZmluZWR9cmV0dXJue29iajpjLGxvY2F0aW9uOmx9fTtEPWZ1bmN0aW9uKHQsYyl7dmFyIEM9c2FwLnVpLmdldENvcmUoKSxSPXt9LG4sbztmb3IobiBpbiBjKXtvPUMuYnlJZChuKTtSW25dPXt0eXBlOm8/by5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKTooY1tuXS5vYmo9PT10PyJVSUFyZWEiOiIobm8gc3VjaCBjb250cm9sKSIpLGxvY2F0aW9uOmNbbl0ubG9jYXRpb24scmVhc29uOmNbbl0ucmVhc29ufX1yLmRlYnVnKCIgIFVJQXJlYSAnIit0LmdldElkKCkrIicsIHBlbmRpbmcgdXBkYXRlczogIitKU09OLnN0cmluZ2lmeShSLG51bGwsIlx0IikpfTtmPWZ1bmN0aW9uKGIsYSl7dmFyIG47Zm9yKG4gaW4gYSl7aWYoYltuXSE9bnVsbCl7aWYoYltuXS5vYmohPT1hW25dLm9iail7YVtuXS5yZWFzb249InJlcGxhY2VkIGR1cmluZyByZW5kZXJpbmcifWVsc2V7YVtuXS5yZWFzb249ImludmFsaWRhdGVkIGFnYWluIGR1cmluZyByZW5kZXJpbmcifX1lbHNle2Fbbl0ucmVhc29uPSJpbnZhbGlkYXRlZCBkdXJpbmcgcmVuZGVyaW5nIn19fX12YXIgVT1NLmV4dGVuZCgic2FwLnVpLmNvcmUuVUlBcmVhIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYyxSKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJufU0uYXBwbHkodGhpcyk7dGhpcy5vQ29yZT1jO3RoaXMuYkxvY2tlZD1mYWxzZTt0aGlzLmJJbml0aWFsPXRydWU7dGhpcy5hQ29udGVudFRvUmVtb3ZlPVtdO3RoaXMuYk5lZWRzUmVyZW5kZXJpbmc9ZmFsc2U7aWYoUiE9bnVsbCl7dGhpcy5zZXRSb290Tm9kZShSKTt0aGlzLmJOZWVkc1JlcmVuZGVyaW5nPXRoaXMuYk5lZWRzUmVyZW5kZXJpbmcmJiFxLnNhcC5kb21CeUlkKFIuaWQrIi1Jbml0Iil9dGhpcy5tSW52YWxpZGF0ZWRDb250cm9scz17fTtpZighdGhpcy5iTmVlZHNSZXJlbmRlcmluZyl7dGhpcy5iUmVuZGVyU2VsZj1mYWxzZX1lbHNle3RoaXMub0NvcmUuYWRkSW52YWxpZGF0ZWRVSUFyZWEodGhpcyl9fSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbInNldFJvb3ROb2RlIiwiZ2V0Um9vdE5vZGUiLCJzZXRSb290Q29udHJvbCIsImdldFJvb3RDb250cm9sIiwibG9jayIsInVubG9jayIsImlzTG9ja2VkIl0sYWdncmVnYXRpb25zOntjb250ZW50OntuYW1lOiJjb250ZW50Iix0eXBlOiJzYXAudWkuY29yZS5Db250cm9sIixtdWx0aXBsZTp0cnVlLHNpbmd1bGFyTmFtZToiY29udGVudCJ9LGRlcGVuZGVudHM6e25hbWU6ImRlcGVuZGVudHMiLHR5cGU6InNhcC51aS5jb3JlLkNvbnRyb2wiLG11bHRpcGxlOnRydWV9fX19KTtVLnByb3RvdHlwZS5pc0ludmFsaWRhdGVTdXBwcmVzc2VkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaVN1cHByZXNzSW52YWxpZGF0ZT4wfTtVLnByb3RvdHlwZS5nZXRJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Sb290Tm9kZT90aGlzLm9Sb290Tm9kZS5pZDpudWxsfTtVLnByb3RvdHlwZS5nZXRVSUFyZWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307VS5wcm90b3R5cGUuc2V0Um9vdE5vZGU9ZnVuY3Rpb24oUil7aWYodGhpcy5vUm9vdE5vZGU9PT1SKXtyZXR1cm59aWYodGhpcy5vUm9vdE5vZGUpe3RoaXMuX29uZGV0YWNoKCl9dGhpcy5vUm9vdE5vZGU9UjtpZih0aGlzLmdldENvbnRlbnQoKS5sZW5ndGg+MCl7dGhpcy5pbnZhbGlkYXRlKCl9aWYodGhpcy5vUm9vdE5vZGUpe3RoaXMuX29uYXR0YWNoKCl9fTtVLnByb3RvdHlwZS5nZXRSb290Tm9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Sb290Tm9kZX07VS5wcm90b3R5cGUuc2V0Um9vdENvbnRyb2w9ZnVuY3Rpb24oUil7dGhpcy5yZW1vdmVBbGxDb250ZW50KCk7dGhpcy5hZGRDb250ZW50KFIpfTtVLnByb3RvdHlwZS5nZXRSb290Q29udHJvbD1mdW5jdGlvbihpKXt2YXIgYz10aGlzLmdldENvbnRlbnQoKTtpZihjLmxlbmd0aD4wKXtpZihpPj0wJiZpPGMubGVuZ3RoKXtyZXR1cm4gY1tpXX1yZXR1cm4gY1swXX1yZXR1cm4gbnVsbH07VS5wcm90b3R5cGUuX2FkZFJlbW92ZWRDb250ZW50PWZ1bmN0aW9uKG8pe2lmKHRoaXMub1Jvb3ROb2RlJiZvKXt0aGlzLmFDb250ZW50VG9SZW1vdmUucHVzaChvKX19O1UucHJvdG90eXBlLmFkZENvbnRlbnQ9ZnVuY3Rpb24oYyxfKXt0aGlzLmFkZEFnZ3JlZ2F0aW9uKCJjb250ZW50IixjLF8pO2lmKF8hPT10cnVlKXt0aGlzLmludmFsaWRhdGUoKX1yZXR1cm4gdGhpc307VS5wcm90b3R5cGUucmVtb3ZlQ29udGVudD1mdW5jdGlvbihjLF8pe3ZhciBDPXRoaXMucmVtb3ZlQWdncmVnYXRpb24oImNvbnRlbnQiLGMsXyk7aWYoIV8pe3ZhciBvO2lmKEMmJkMuZ2V0RG9tUmVmKXtvPUMuZ2V0RG9tUmVmKCl9dGhpcy5fYWRkUmVtb3ZlZENvbnRlbnQobyl9cmV0dXJuIEN9O1UucHJvdG90eXBlLnJlbW92ZUFsbENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLnJlbW92ZUFsbEFnZ3JlZ2F0aW9uKCJjb250ZW50Iik7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe3ZhciBvO3ZhciBDPWNbaV07aWYoQyYmQy5nZXREb21SZWYpe289Qy5nZXREb21SZWYoKX10aGlzLl9hZGRSZW1vdmVkQ29udGVudChvKX1yZXR1cm4gY307VS5wcm90b3R5cGUuZGVzdHJveUNvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldENvbnRlbnQoKTtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKyl7dmFyIG87dmFyIEM9Y1tpXTtpZihDJiZDLmdldERvbVJlZil7bz1DLmdldERvbVJlZigpfXRoaXMuX2FkZFJlbW92ZWRDb250ZW50KG8pfXRoaXMuZGVzdHJveUFnZ3JlZ2F0aW9uKCJjb250ZW50Iik7cmV0dXJuIHRoaXN9O1UucHJvdG90eXBlLmxvY2s9ZnVuY3Rpb24oKXt0aGlzLmJMb2NrZWQ9dHJ1ZX07VS5wcm90b3R5cGUudW5sb2NrPWZ1bmN0aW9uKCl7aWYodGhpcy5iTG9ja2VkJiZ0aGlzLmJOZWVkc1JlcmVuZGVyaW5nKXt0aGlzLm9Db3JlLmFkZEludmFsaWRhdGVkVUlBcmVhKHRoaXMpfXRoaXMuYkxvY2tlZD1mYWxzZX07VS5wcm90b3R5cGUuaXNMb2NrZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iTG9ja2VkfTtVLnByb3RvdHlwZS5nZXRCaW5kaW5nQ29udGV4dD1mdW5jdGlvbigpe3JldHVybiBudWxsfTtVLnByb3RvdHlwZS5nZXRFdmVudGluZ1BhcmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db3JlfTtVLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBxLnNhcC5kb21CeUlkKHRoaXMuZ2V0SWQoKSkhPW51bGx9O1UucHJvdG90eXBlLmludmFsaWRhdGU9ZnVuY3Rpb24oKXt0aGlzLmFkZEludmFsaWRhdGVkQ29udHJvbCh0aGlzKX07VS5wcm90b3R5cGUuYWRkSW52YWxpZGF0ZWRDb250cm9sPWZ1bmN0aW9uKGMpe2lmKHRoaXMuYlJlbmRlclNlbGYpe3JldHVybn1pZighdGhpcy5iTmVlZHNSZXJlbmRlcmluZyl7dGhpcy5vQ29yZS5hZGRJbnZhbGlkYXRlZFVJQXJlYSh0aGlzKX12YXIgaT1jLmdldElkKCk7aWYoYz09PXRoaXMpe3RoaXMuYlJlbmRlclNlbGY9dHJ1ZTt0aGlzLmJOZWVkc1JlcmVuZGVyaW5nPXRydWU7dGhpcy5tSW52YWxpZGF0ZWRDb250cm9scz17fTt0aGlzLm1JbnZhbGlkYXRlZENvbnRyb2xzW2ldPWQodGhpcyk7cmV0dXJufWlmKHRoaXMubUludmFsaWRhdGVkQ29udHJvbHNbaV0pe3JldHVybn1pZighdGhpcy5iUmVuZGVyU2VsZil7dGhpcy5tSW52YWxpZGF0ZWRDb250cm9sc1tpXT1kKGMpO3RoaXMuYk5lZWRzUmVyZW5kZXJpbmc9dHJ1ZX19O1UucHJvdG90eXBlLnJlcmVuZGVyPWZ1bmN0aW9uKGEpe3ZhciB0PXRoaXM7ZnVuY3Rpb24gYygpe3QuYlJlbmRlclNlbGY9ZmFsc2U7dC5hQ29udGVudFRvUmVtb3ZlPVtdO3QubUludmFsaWRhdGVkQ29udHJvbHM9e307dC5iTmVlZHNSZXJlbmRlcmluZz1mYWxzZX1pZihhKXt0aGlzLmJOZWVkc1JlcmVuZGVyaW5nPXRydWV9aWYodGhpcy5iTG9ja2VkfHwhdGhpcy5iTmVlZHNSZXJlbmRlcmluZyl7cmV0dXJuIGZhbHNlfXZhciBSPXRoaXMuYlJlbmRlclNlbGYsQz10aGlzLmFDb250ZW50VG9SZW1vdmUsST10aGlzLm1JbnZhbGlkYXRlZENvbnRyb2xzLHU9ZmFsc2U7YygpO3Euc2FwLm1lYXN1cmUucGF1c2UoInJlbmRlclBlbmRpbmdVSVVwZGF0ZXMiKTtxLnNhcC5tZWFzdXJlLnN0YXJ0KHRoaXMuZ2V0SWQoKSsiLS0tcmVyZW5kZXIiLCJSZXJlbmRlcmluZyBvZiAiK3RoaXMuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCkpO0QodGhpcyxJKTtpZihSKXtpZih0aGlzLm9Sb290Tm9kZSl7ci5kZWJ1ZygiRnVsbCBSZW5kZXJpbmcgb2YgVUlBcmVhICciK3RoaXMuZ2V0SWQoKSsiJyIpO3NhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIucHJlc2VydmVDb250ZW50KHRoaXMub1Jvb3ROb2RlLGZhbHNlLHRoaXMuYkluaXRpYWwpO3RoaXMuYkluaXRpYWw9ZmFsc2U7dmFyIGI9ZnVuY3Rpb24oaCxqKXt2YXIgbD1oLmxlbmd0aDt2YXIgaztmb3IodmFyIGk9MDtpPGw7aSsrKXtrPWo/aFtpXS5nZXREb21SZWYoKTpoW2ldO2lmKGsmJiFzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLmlzUHJlc2VydmVkQ29udGVudChrKSYmdC5vUm9vdE5vZGU9PT1rLnBhcmVudE5vZGUpe3EoaykucmVtb3ZlKCl9fXJldHVybiBsfTtiKEMpO3ZhciBlPXRoaXMuZ2V0Q29udGVudCgpO3ZhciBsPWIoZSx0cnVlKTtmb3IodmFyIGk9MDtpPGw7aSsrKXt0aGlzLm9Db3JlLm9SZW5kZXJNYW5hZ2VyLnJlbmRlcihlW2ldLHRoaXMub1Jvb3ROb2RlLHRydWUpfXU9dHJ1ZX1lbHNle3IuZGVidWcoIkZ1bGwgUmVuZGVyaW5nIG9mIFVJQXJlYSAnIit0aGlzLmdldElkKCkrIicgcG9zdHBvbmVkLCBubyByb290IG5vZGUiKX19ZWxzZXt2YXIgZz1mdW5jdGlvbihBKXt3aGlsZShBJiZBIT09dCl7aWYoSS5oYXNPd25Qcm9wZXJ0eShBLmdldElkKCkpKXtyZXR1cm4gdHJ1ZX1pZihBJiZBLmdldE1ldGFkYXRhJiZBLmdldE1ldGFkYXRhKCkuaXNJbnN0YW5jZU9mKCJzYXAudWkuY29yZS5Qb3B1cEludGVyZmFjZSIpKXticmVha31BPUEuZ2V0UGFyZW50KCl9cmV0dXJuIGZhbHNlfTtmb3IodmFyIG4gaW4gSSl7dmFyIG89dGhpcy5vQ29yZS5ieUlkKG4pO2lmKG8mJiFnKG8uZ2V0UGFyZW50KCkpKXtvLnJlcmVuZGVyKCk7dT10cnVlfX19ZihJLHRoaXMubUludmFsaWRhdGVkQ29udHJvbHMpO3Euc2FwLm1lYXN1cmUuZW5kKHRoaXMuZ2V0SWQoKSsiLS0tcmVyZW5kZXIiKTtxLnNhcC5tZWFzdXJlLnJlc3VtZSgicmVuZGVyUGVuZGluZ1VJVXBkYXRlcyIpO3JldHVybiB1fTtVLnByb3RvdHlwZS5fb25Db250cm9sUmVuZGVyZWQ9ZnVuY3Rpb24oYyl7dmFyIGk9Yy5nZXRJZCgpO2lmKHRoaXMubUludmFsaWRhdGVkQ29udHJvbHNbaV0pe2RlbGV0ZSB0aGlzLm1JbnZhbGlkYXRlZENvbnRyb2xzW2ldfX07VS5yZXJlbmRlckNvbnRyb2w9ZnVuY3Rpb24oYyl7dmFyIG89Yz9jLmdldERvbVJlZigpOm51bGw7dmFyIHA9byYmby5wYXJlbnROb2RlO2lmKHApe3ZhciB1PWMuZ2V0VUlBcmVhKCk7dmFyIGE9dT91Lm9Db3JlLm9SZW5kZXJNYW5hZ2VyOnNhcC51aS5nZXRDb3JlKCkuY3JlYXRlUmVuZGVyTWFuYWdlcigpO3IuZGVidWcoIlJlcmVuZGVyIENvbnRyb2wgJyIrYy5nZXRJZCgpKyInIisodT8iIjoiICh1c2luZyBhIHRlbXAuIFJlbmRlck1hbmFnZXIpIikpO3NhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIucHJlc2VydmVDb250ZW50KG8sdHJ1ZSxmYWxzZSk7YS5yZW5kZXIoYyxwKX1lbHNle3ZhciB1PWMuZ2V0VUlBcmVhKCk7dSYmdS5fb25Db250cm9sUmVuZGVyZWQoYyk7ci53YXJuaW5nKCJDb3VsZG4ndCByZXJlbmRlciAnIitjLmdldElkKCkrIicsIGFzIGl0cyBET00gbG9jYXRpb24gY291bGRuJ3QgYmUgZGV0ZXJtaW5lZCIpfX07VS5wcm90b3R5cGUuX2hhbmRsZUV2ZW50PWZ1bmN0aW9uKGUpe3ZhciBvPW51bGw7bz1xKGUudGFyZ2V0KS5jb250cm9sKDApO3Euc2FwLmFjdC5yZWZyZXNoKCk7aWYobz09PW51bGwpe3JldHVybn1pZihlLmlzTWFya2VkKCJkZWxheWVkTW91c2VFdmVudCIpKXtyZXR1cm59aWYoZS5pc01hcmtlZCgiaGFuZGxlZEJ5VUlBcmVhIikpe2Uuc2V0TWFyaygiZmlyc3RVSUFyZWEiLGZhbHNlKTtyZXR1cm59ZS5zZXRNYXJrZWQoImZpcnN0VUlBcmVhIik7ZS5zcmNDb250cm9sPW87aWYoZS50eXBlPT09ImNvbnRleHRtZW51IiYmZS5zaGlmdEtleSYmZS5hbHRLZXkmJiEhKGUubWV0YUtleXx8ZS5jdHJsS2V5KSl7cS5zYXAubG9nLmluZm8oIlN1cHByZXNzZWQgZm9yd2FyZGluZyB0aGUgY29udGV4dG1lbnUgZXZlbnQgYXMgY29udHJvbCBldmVudCBiZWNhdXNlIENUUkwrU0hJRlQrQUxUIGlzIHByZXNzZWQhIik7cmV0dXJufXRoaXMub0NvcmUuX2hhbmRsZUNvbnRyb2xFdmVudChlLHRoaXMuZ2V0SWQoKSk7aWYodGhpcy5iTG9ja2VkfHx0aGlzLm9Db3JlLmlzTG9ja2VkKCkpe3JldHVybn12YXIgYT1bXTtpZihlLmdldFBzZXVkb1R5cGVzKXthPWUuZ2V0UHNldWRvVHlwZXMoKX1hLnB1c2goZS50eXBlKTt3aGlsZShvJiZvIGluc3RhbmNlb2YgRSYmby5pc0FjdGl2ZSgpJiYhZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtmb3IodmFyIGk9MCxiPWEubGVuZ3RoO2k8YjtpKyspe3ZhciB0PWFbaV07ZS50eXBlPXQ7ZS5jdXJyZW50VGFyZ2V0PW8uZ2V0RG9tUmVmKCk7by5faGFuZGxlRXZlbnQoZSk7aWYoZS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKXticmVha319aWYoZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXticmVha31pZihvLmJTdG9wRXZlbnRCdWJibGluZyl7YnJlYWt9dmFyIGM9by5nZXREb21SZWYoKTtpZighYyl7YnJlYWt9Yz1jLnBhcmVudE5vZGU7bz1udWxsO2lmKGUuaXNNYXJrZWQoImZyb21Nb3VzZW91dCIpJiZxLnNhcC5jb250YWluc09yRXF1YWxzKGMsZS5yZWxhdGVkVGFyZ2V0KSl7YnJlYWt9d2hpbGUoYyYmYyE9PXRoaXMuZ2V0Um9vdE5vZGUoKSl7aWYoYy5pZCl7bz1xKGMpLmNvbnRyb2woMCk7aWYobyl7YnJlYWt9fWM9Yy5wYXJlbnROb2RlfX1lLmN1cnJlbnRUYXJnZXQ9dGhpcy5nZXRSb290Tm9kZSgpOyhlLm9yaWdpbmFsRXZlbnR8fGUpLl9zYXB1aV9oYW5kbGVkQnlVSUFyZWE9dHJ1ZTtpZihlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe3Euc2FwLmxvZy5kZWJ1ZygiJyIrZS50eXBlKyInIHByb3BhZ2F0aW9uIGhhcyBiZWVuIHN0b3BwZWQiKX12YXIgbj1lLnR5cGU7aWYobiE9Im1vdXNlbW92ZSImJm4hPSJtb3VzZW92ZXIiJiZuIT0ic2Nyb2xsIiYmbiE9Im1vdXNlb3V0Iil7dmFyIGc9cShlLnRhcmdldCkuY29udHJvbCgwKTtpZihnKXtxLnNhcC5sb2cuZGVidWcoIkV2ZW50IGZpcmVkOiAnIitlLnR5cGUrIicgb24gIitnLCIiLCJzYXAudWkuY29yZS5VSUFyZWEiKX1lbHNle3Euc2FwLmxvZy5kZWJ1ZygiRXZlbnQgZmlyZWQ6ICciK2UudHlwZSsiJyIsIiIsInNhcC51aS5jb3JlLlVJQXJlYSIpfX19O1UucHJvdG90eXBlLl9vbmF0dGFjaD1mdW5jdGlvbigpe3ZhciBvPXRoaXMuZ2V0Um9vdE5vZGUoKTtpZihvPT1udWxsKXtyZXR1cm59cShvKS5hdHRyKCJkYXRhLXNhcC11aS1hcmVhIixvLmlkKS5iaW5kKHEuc2FwLkNvbnRyb2xFdmVudHMuam9pbigiICIpLHEucHJveHkodGhpcy5faGFuZGxlRXZlbnQsdGhpcykpfTtVLnByb3RvdHlwZS5fb25kZXRhY2g9ZnVuY3Rpb24oKXt2YXIgbz10aGlzLmdldFJvb3ROb2RlKCk7aWYobz09bnVsbCl7cmV0dXJufXEobykucmVtb3ZlQXR0cigiZGF0YS1zYXAtdWktYXJlYSIpLnVuYmluZCgpfTtVLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiVUlBcmVhIGNhbid0IGJlIGNsb25lZCIpfTtVLl9vUmVuZGVyTG9nPXI7cmV0dXJuIFV9LHRydWUpfTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Db3JlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZScsJ3NhcC91aS9HbG9iYWwnLCdzYXAvdWkvYmFzZS9EYXRhVHlwZScsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInLCcuL0NvbXBvbmVudCcsJy4vQ29uZmlndXJhdGlvbicsJy4vQ29udHJvbCcsJy4vRWxlbWVudCcsJy4vRWxlbWVudE1ldGFkYXRhJywnLi9Gb2N1c0hhbmRsZXInLCcuL1JlbmRlck1hbmFnZXInLCcuL1Jlc2l6ZUhhbmRsZXInLCcuL1RoZW1lQ2hlY2snLCcuL1VJQXJlYScsJy4vdG1wbC9UZW1wbGF0ZScsJ2pxdWVyeS5zYXAuYWN0JywnanF1ZXJ5LnNhcC5kb20nLCdqcXVlcnkuc2FwLmV2ZW50cycsJ2pxdWVyeS5zYXAubW9iaWxlJywnanF1ZXJ5LnNhcC5wcm9wZXJ0aWVzJywnanF1ZXJ5LnNhcC5yZXNvdXJjZXMnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEsRCxHLGEsRSxDLGMsZCxlLGcsRixSLGgsVCxVLGopeyJ1c2Ugc3RyaWN0Ijt2YXIgaz1FLmV4dGVuZCgic2FwLnVpLmNvcmUuQ29yZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7aWYoc2FwLnVpLmdldENvcmUmJnNhcC51aS5nZXRDb3JlKCkpe3JldHVybiBzYXAudWkuZ2V0Q29yZSgpfXZhciB0PXRoaXMsbD1xLnNhcC5sb2csTT0ic2FwLnVpLmNvcmUuQ29yZSI7RS5hcHBseSh0aGlzKTt0aGlzLmJCb290ZWQ9ZmFsc2U7dGhpcy5iSW5pdGlhbGl6ZWQ9ZmFsc2U7dGhpcy5iRG9tUmVhZHk9ZmFsc2U7dGhpcy5hUGx1Z2lucz1bXTt0aGlzLm1MaWJyYXJpZXM9e307dGhpcy5tUmVzb3VyY2VCdW5kbGVzPXt9O3RoaXMubVVJQXJlYXM9e307dGhpcy5vTW9kZWxzPXt9O3RoaXMub0V2ZW50QnVzPW51bGw7dGhpcy5tRWxlbWVudHM9e307dGhpcy5tT2JqZWN0cz17ImNvbXBvbmVudCI6e30sInRlbXBsYXRlIjp7fX07dGhpcy5vUm9vdENvbXBvbmVudD1udWxsO3RoaXMuYUluaXRMaXN0ZW5lcnM9W107dGhpcy5iSW5pdExlZ2FjeUxpYj1mYWxzZTtsLmluZm8oIkNyZWF0aW5nIENvcmUiLG51bGwsTSk7dGhpcy5vQ29uZmlndXJhdGlvbj1uZXcgYyh0aGlzKTtpZih0aGlzLm9Db25maWd1cmF0aW9uWyJ4eC1iaW5kaW5nU3ludGF4Il09PT0iY29tcGxleCIpe3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QuYmluZGluZ1BhcnNlcj1zYXAudWkuYmFzZS5CaW5kaW5nUGFyc2VyLmNvbXBsZXhQYXJzZXJ9aWYodGhpcy5vQ29uZmlndXJhdGlvblsieHgtZGVzaWduTW9kZSJdPT10cnVlKXtzYXAudWkuYmFzZS5CaW5kaW5nUGFyc2VyLl9rZWVwQmluZGluZ1N0cmluZ3M9dHJ1ZX1nLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbihLKXt0LnJlZ2lzdGVyRWxlbWVudENsYXNzKEspfTtlLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbigpe3QucmVnaXN0ZXJFbGVtZW50KHRoaXMpfTtlLnByb3RvdHlwZS5kZXJlZ2lzdGVyPWZ1bmN0aW9uKCl7dC5kZXJlZ2lzdGVyRWxlbWVudCh0aGlzKX07Qy5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oKXt0LnJlZ2lzdGVyT2JqZWN0KHRoaXMpfTtDLnByb3RvdHlwZS5kZXJlZ2lzdGVyPWZ1bmN0aW9uKCl7dC5kZXJlZ2lzdGVyT2JqZWN0KHRoaXMpfTtqLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbigpe3QucmVnaXN0ZXJPYmplY3QodGhpcyl9O2oucHJvdG90eXBlLmRlcmVnaXN0ZXI9ZnVuY3Rpb24oKXt0LmRlcmVnaXN0ZXJPYmplY3QodGhpcyl9O3ZhciBtPXRoaXMub0NvbmZpZ3VyYXRpb24ubW9kdWxlcztpZih0aGlzLm9Db25maWd1cmF0aW9uLmdldERlYnVnKCkpe20udW5zaGlmdCgic2FwLXVpLWRlYnVnIil9dmFyIGk9cS5pbkFycmF5KCJzYXAudWkuY29yZS5saWJyYXJ5IixtKTtpZihpIT0wKXtpZihpPjApe20uc3BsaWNlKGksMSl9bS51bnNoaWZ0KCJzYXAudWkuY29yZS5saWJyYXJ5Iil9bC5pbmZvKCJEZWNsYXJlZCBtb2R1bGVzOiAiK20sTSk7dmFyIG89d2luZG93WyJzYXAtdWktY29uZmlnIl07aWYodGhpcy5vQ29uZmlndXJhdGlvbi50aGVtZVJvb3Qpe289b3x8e307by50aGVtZXJvb3RzPW8udGhlbWVyb290c3x8e307by50aGVtZXJvb3RzW3RoaXMub0NvbmZpZ3VyYXRpb24uZ2V0VGhlbWUoKV09dGhpcy5vQ29uZmlndXJhdGlvbi50aGVtZVJvb3R9aWYobyl7aWYoby50aGVtZXJvb3RzKXtmb3IodmFyIGYgaW4gby50aGVtZXJvb3RzKXt2YXIgbj1vLnRoZW1lcm9vdHNbZl07aWYodHlwZW9mIG49PT0ic3RyaW5nIil7dGhpcy5zZXRUaGVtZVJvb3QoZixuKX1lbHNle2Zvcih2YXIgcCBpbiBuKXtpZihwLmxlbmd0aD4wKXt0aGlzLnNldFRoZW1lUm9vdChmLFtwXSxuW3BdKX1lbHNle3RoaXMuc2V0VGhlbWVSb290KGYsbltwXSl9fX19fX10aGlzLnNUaGVtZT10aGlzLm9Db25maWd1cmF0aW9uLmdldFRoZW1lKCk7cShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFkZENsYXNzKCJzYXBVaVRoZW1lLSIrdGhpcy5zVGhlbWUpO2wuaW5mbygiRGVjbGFyZWQgdGhlbWUgIit0aGlzLnNUaGVtZSxudWxsLE0pO2lmKHRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0UlRMKCkpe3EoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5hdHRyKCJkaXIiLCJydGwiKTtsLmluZm8oIlJUTCBtb2RlIGFjdGl2YXRlZCIsbnVsbCxNKX12YXIgJD1xKCJodG1sIik7dmFyIGI9RC5icm93c2VyO3ZhciBzPWIubmFtZTtpZihzPT09Yi5CUk9XU0VSLkNIUk9NRSl7cS5icm93c2VyLnNhZmFyaT1mYWxzZTtxLmJyb3dzZXIuY2hyb21lPXRydWV9ZWxzZSBpZihzPT09Yi5CUk9XU0VSLlNBRkFSSSl7cS5icm93c2VyLnNhZmFyaT10cnVlO3EuYnJvd3Nlci5jaHJvbWU9ZmFsc2U7aWYoYi5tb2JpbGUpe3M9Im0iK3N9fWlmKHMpe3EuYnJvd3Nlci5mVmVyc2lvbj1iLnZlcnNpb247cS5icm93c2VyLm1vYmlsZT1iLm1vYmlsZTtzPXMrTWF0aC5mbG9vcihiLnZlcnNpb24pOyQuYXR0cigiZGF0YS1zYXAtdWktYnJvd3NlciIscyk7bC5kZWJ1ZygiQnJvd3Nlci1JZDogIitzLG51bGwsTSl9JC5hdHRyKCJkYXRhLXNhcC11aS1vcyIsRC5vcy5uYW1lK0Qub3MudmVyc2lvblN0cik7dmFyIHU9bnVsbDtzd2l0Y2goRC5vcy5uYW1lKXtjYXNlIEQub3MuT1MuSU9TOnU9InNhcC1pb3MiO2JyZWFrO2Nhc2UgRC5vcy5PUy5BTkRST0lEOnU9InNhcC1hbmRyb2lkIjticmVhaztjYXNlIEQub3MuT1MuQkxBQ0tCRVJSWTp1PSJzYXAtYmIiO2JyZWFrO2Nhc2UgRC5vcy5PUy5XSU5ET1dTX1BIT05FOnU9InNhcC13aW5waG9uZSI7YnJlYWt9aWYodSl7JC5hZGRDbGFzcyh1KX1pZih0aGlzLm9Db25maWd1cmF0aW9uLmdldFdlaW5yZUlkKCkpe2wuaW5mbygiU3RhcnRpbmcgV0VJTlJFIFJlbW90ZSBXZWIgSW5zcGVjdG9yIik7dmFyIHc9IjxzY3JpcHQgc3JjPVwiIjt3Kz10aGlzLm9Db25maWd1cmF0aW9uLmdldFdlaW5yZVNlcnZlcigpO3crPSIvdGFyZ2V0L3RhcmdldC1zY3JpcHQtbWluLmpzIyI7dys9cS5zYXAuZW5jb2RlVVJMKHRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0V2VpbnJlSWQoKSk7dys9IlwiPjwvc2NyaXB0PiI7ZG9jdW1lbnQud3JpdGUodyl9c2FwLnVpLmdldENvcmU9cS5zYXAuZ2V0dGVyKHRoaXMuZ2V0SW50ZXJmYWNlKCkpO1IuaW5pdEhUTUw1U3VwcG9ydCgpO3RoaXMub1JlbmRlck1hbmFnZXI9bmV3IFIoKTt2YXIgUz1xLnNhcC5zeW5jUG9pbnQoIlVJNSBEb2N1bWVudCBSZWFkeSIsZnVuY3Rpb24oTyxLKXt0LmhhbmRsZUxvYWQoKX0pO3ZhciB2PVMuc3RhcnRUYXNrKCJkb2N1bWVudC5yZWFkeSIpO3ZhciB4PVMuc3RhcnRUYXNrKCJwcmVsb2FkIGFuZCBib290Iik7cShmdW5jdGlvbigpe2wudHJhY2UoImRvY3VtZW50IGlzIHJlYWR5Iik7Uy5maW5pc2hUYXNrKHYpfSk7dmFyIHk9cS5zYXAuc3luY1BvaW50KCJVSTUgQ29yZSBQcmVsb2FkcyBhbmQgQm9vdHN0cmFwIFNjcmlwdCIsZnVuY3Rpb24oTyxLKXtsLnRyYWNlKCJDb3JlIGxvYWRlZDogb3Blbj0iK08rIiwgZmFpbHVyZXM9IitLKTt0Ll9ib290KCk7Uy5maW5pc2hUYXNrKHgpfSk7dmFyIHo9dGhpcy5vQ29uZmlndXJhdGlvblsieHgtYm9vdFRhc2siXTtpZih6KXt2YXIgQT15LnN0YXJ0VGFzaygiY3VzdG9tIGJvb3QgdGFzayIpO3ooZnVuY3Rpb24oSyl7eS5maW5pc2hUYXNrKEEsdHlwZW9mIEs9PT0idW5kZWZpbmVkInx8Sz09PXRydWUpfSl9dmFyIEI9bmV3IHEuc2FwLlZlcnNpb24odGhpcy5vQ29uZmlndXJhdGlvbi5nZXRDb21wYXRpYmlsaXR5VmVyc2lvbigiZmxleEJveFBvbHlmaWxsIikpO2lmKEIuY29tcGFyZVRvKCIxLjE2Iik+PTApe3Euc3VwcG9ydC51c2VGbGV4Qm94UG9seWZpbGw9ZmFsc2V9ZWxzZSBpZighcS5zdXBwb3J0LmZsZXhCb3hMYXlvdXQmJiFxLnN1cHBvcnQubmV3RmxleEJveExheW91dCYmIXEuc3VwcG9ydC5pZTEwRmxleEJveExheW91dCl7cS5zdXBwb3J0LnVzZUZsZXhCb3hQb2x5ZmlsbD10cnVlfWVsc2V7cS5zdXBwb3J0LnVzZUZsZXhCb3hQb2x5ZmlsbD1mYWxzZX12YXIgSD15LnN0YXJ0VGFzaygiYm9vdHN0cmFwIHNjcmlwdCIpO3RoaXMuYm9vdD1mdW5jdGlvbigpe2lmKHRoaXMuYkJvb3RlZCl7cmV0dXJufXRoaXMuYkJvb3RlZD10cnVlO3kuZmluaXNoVGFzayhIKX07dmFyIFA9dGhpcy5vQ29uZmlndXJhdGlvbi5wcmVsb2FkO2lmKHdpbmRvd1sic2FwLXVpLWRlYnVnIl0pe1A9IiJ9aWYoUD09PSJhdXRvIil7UD0od2luZG93WyJzYXAtdWktb3B0aW1pemVkIl0mJiF0aGlzLm9Db25maWd1cmF0aW9uWyd4eC1sb2FkQWxsTW9kZSddKT8ic3luYyI6IiJ9dGhpcy5vQ29uZmlndXJhdGlvbi5wcmVsb2FkPVA7aWYoUD09PSJzeW5jInx8UD09PSJhc3luYyIpe3ZhciBJPVAhPT0ic3luYyI7cS5lYWNoKG0sZnVuY3Rpb24oaSxLKXtpZihLLm1hdGNoKC9cLmxpYnJhcnkkLykpe3Euc2FwLnByZWxvYWRNb2R1bGVzKEsrIi1wcmVsb2FkIixJLHkpfX0pfXZhciBKPXRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0QXBwQ2FjaGVCdXN0ZXIoKTtpZihKJiZKLmxlbmd0aD4wKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS5BcHBDYWNoZUJ1c3RlciIpO3NhcC51aS5jb3JlLkFwcENhY2hlQnVzdGVyLmJvb3QoeSl9fSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImJvb3QiLCJpc0luaXRpYWxpemVkIiwiaXNUaGVtZUFwcGxpZWQiLCJhdHRhY2hJbml0RXZlbnQiLCJhdHRhY2hJbml0IiwiZ2V0UmVuZGVyTWFuYWdlciIsImNyZWF0ZVJlbmRlck1hbmFnZXIiLCJnZXRDb25maWd1cmF0aW9uIiwic2V0Um9vdCIsImNyZWF0ZVVJQXJlYSIsImdldFVJQXJlYSIsImdldFVJRGlydHkiLCJnZXRFbGVtZW50QnlJZCIsImdldEN1cnJlbnRGb2N1c2VkQ29udHJvbElkIiwiZ2V0Q29udHJvbCIsImdldENvbXBvbmVudCIsImdldFRlbXBsYXRlIiwibG9jayIsInVubG9jayIsImlzTG9ja2VkIiwiYXR0YWNoRXZlbnQiLCJkZXRhY2hFdmVudCIsImFwcGx5Q2hhbmdlcyIsImdldEV2ZW50QnVzIiwiYXBwbHlUaGVtZSIsInNldFRoZW1lUm9vdCIsImF0dGFjaFRoZW1lQ2hhbmdlZCIsImRldGFjaFRoZW1lQ2hhbmdlZCIsImdldFN0YXRpY0FyZWFSZWYiLCJyZWdpc3RlclBsdWdpbiIsInVucmVnaXN0ZXJQbHVnaW4iLCJnZXRMaWJyYXJ5UmVzb3VyY2VCdW5kbGUiLCJieUlkIiwiZ2V0TG9hZGVkTGlicmFyaWVzIiwibG9hZExpYnJhcnkiLCJpbml0TGlicmFyeSIsImluY2x1ZGVMaWJyYXJ5VGhlbWUiLCJzZXRNb2RlbCIsImdldE1vZGVsIiwiaGFzTW9kZWwiLCJpc01vYmlsZSIsImF0dGFjaENvbnRyb2xFdmVudCIsImRldGFjaENvbnRyb2xFdmVudCIsImF0dGFjaEludGVydmFsVGltZXIiLCJkZXRhY2hJbnRlcnZhbFRpbWVyIiwiYXR0YWNoUGFyc2VFcnJvciIsImRldGFjaFBhcnNlRXJyb3IiLCJmaXJlUGFyc2VFcnJvciIsImF0dGFjaFZhbGlkYXRpb25FcnJvciIsImRldGFjaFZhbGlkYXRpb25FcnJvciIsImZpcmVWYWxpZGF0aW9uRXJyb3IiLCJhdHRhY2hGb3JtYXRFcnJvciIsImRldGFjaEZvcm1hdEVycm9yIiwiZmlyZUZvcm1hdEVycm9yIiwiYXR0YWNoVmFsaWRhdGlvblN1Y2Nlc3MiLCJkZXRhY2hWYWxpZGF0aW9uU3VjY2VzcyIsImZpcmVWYWxpZGF0aW9uU3VjY2VzcyIsImF0dGFjaExvY2FsaXphdGlvbkNoYW5nZWQiLCJkZXRhY2hMb2NhbGl6YXRpb25DaGFuZ2VkIiwiYXR0YWNoTGlicmFyeUNoYW5nZWQiLCJkZXRhY2hMaWJyYXJ5Q2hhbmdlZCIsImlzU3RhdGljQXJlYVJlZiIsImNyZWF0ZUNvbXBvbmVudCIsImdldFJvb3RDb21wb25lbnQiLCJnZXRBcHBsaWNhdGlvbiJdfX0pO2suTV9FVkVOVFM9e0NvbnRyb2xFdmVudDoiQ29udHJvbEV2ZW50IixVSVVwZGF0ZWQ6IlVJVXBkYXRlZCIsVGhlbWVDaGFuZ2VkOiJUaGVtZUNoYW5nZWQiLExvY2FsaXphdGlvbkNoYW5nZWQ6ImxvY2FsaXphdGlvbkNoYW5nZWQiLExpYnJhcnlDaGFuZ2VkOiJsaWJyYXJ5Q2hhbmdlZCIsVmFsaWRhdGlvbkVycm9yOiJ2YWxpZGF0aW9uRXJyb3IiLFBhcnNlRXJyb3I6InBhcnNlRXJyb3IiLEZvcm1hdEVycm9yOiJmb3JtYXRFcnJvciIsVmFsaWRhdGlvblN1Y2Nlc3M6InZhbGlkYXRpb25TdWNjZXNzIn07ay5wcm90b3R5cGUuX2Jvb3Q9ZnVuY3Rpb24oKXt0aGlzLmxvY2soKTt2YXIgYj10aGlzLm9Db25maWd1cmF0aW9uWyd4eC1wcmVsb2FkTGliQ3NzJ107aWYoYi5sZW5ndGg+MCl7dmFyIEE9YlswXS5zbGljZSgwLDEpPT09IiEiO2lmKEEpe2JbMF09YlswXS5zbGljZSgxKX1pZihiWzBdPT09IioiKXtiLnNwbGljZSgwLDEpO3ZhciBwPTA7cS5lYWNoKHRoaXMub0NvbmZpZ3VyYXRpb24ubW9kdWxlcyxmdW5jdGlvbihpLGYpe3ZhciBtPWYubWF0Y2goL14oLiopXC5saWJyYXJ5JC8pO2lmKG0pe2Iuc3BsaWNlKHAsMCxtWzFdKX19KX1pZighQSl7dGhpcy5pbmNsdWRlTGlicmFyeVRoZW1lKCJzYXAtdWktbWVyZ2VkIix1bmRlZmluZWQsIj9sPSIrYi5qb2luKCIsIikpfX12YXIgdD10aGlzO3EuZWFjaCh0aGlzLm9Db25maWd1cmF0aW9uLm1vZHVsZXMsZnVuY3Rpb24oaSxmKXt2YXIgbT1mLm1hdGNoKC9eKC4qKVwubGlicmFyeSQvKTtpZihtKXt0LmxvYWRMaWJyYXJ5KG1bMV0pfWVsc2V7cS5zYXAucmVxdWlyZShmKX19KTt0aGlzLnVubG9jaygpfTtrLnByb3RvdHlwZS5hcHBseVRoZW1lPWZ1bmN0aW9uKHQscyl7dD10aGlzLm9Db25maWd1cmF0aW9uLl9ub3JtYWxpemVUaGVtZSh0LHMpO2lmKHMpe3RoaXMuc2V0VGhlbWVSb290KHQscyl9aWYodCYmdGhpcy5zVGhlbWUhPXQpe3ZhciBiPXRoaXMuc1RoZW1lO3RoaXMuX3VwZGF0ZVRoZW1lVXJscyh0KTt0aGlzLnNUaGVtZT10O3RoaXMub0NvbmZpZ3VyYXRpb24uX3NldFRoZW1lKHQpO3EoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5yZW1vdmVDbGFzcygic2FwVWlUaGVtZS0iK2IpLmFkZENsYXNzKCJzYXBVaVRoZW1lLSIrdCk7aWYodGhpcy5vVGhlbWVDaGVjayl7dGhpcy5vVGhlbWVDaGVjay5maXJlVGhlbWVDaGFuZ2VkRXZlbnQoZmFsc2UsdHJ1ZSl9fX07ay5wcm90b3R5cGUuX3VwZGF0ZVRoZW1lVXJscz1mdW5jdGlvbih0KXt2YXIgYj10aGlzLHM9dGhpcy5vQ29uZmlndXJhdGlvbi5nZXRSVEwoKT8iLVJUTCI6IiI7cSgibGlua1tpZF49c2FwLXVpLXRoZW1lLV0iKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5pZC5zbGljZSgxMyksTD10aGlzLmhyZWYuc2xpY2UodGhpcy5ocmVmLmxhc3RJbmRleE9mKCIvIikrMSksUz0ibGlicmFyeSIsSCxwLCQ9cSh0aGlzKTtpZigocD1sLmluZGV4T2YoIi1bIikpPjApe1MrPWwuc2xpY2UocCsyLC0xKTtsPWwuc2xpY2UoMCxwKX1pZihMPT09KFMrIi5jc3MiKXx8TD09PShTKyItUlRMLmNzcyIpKXtMPVMrcysiLmNzcyJ9aWYoJC5hdHRyKCJzYXAtdWktY3NzLWNvdW50IikpeyQucmVtb3ZlKCl9SD1iLl9nZXRUaGVtZVBhdGgobCx0KStMO2lmKEghPXRoaXMuaHJlZil7dGhpcy5ocmVmPUg7JC5yZW1vdmVBdHRyKCJzYXAtdWktcmVhZHkiKX19KX07ay5wcm90b3R5cGUuX2dldFRoZW1lUGF0aD1mdW5jdGlvbihsLHQpe2lmKHRoaXMuX21UaGVtZVJvb3RzKXt2YXIgcD10aGlzLl9tVGhlbWVSb290c1t0KyIgIitsXXx8dGhpcy5fbVRoZW1lUm9vdHNbdF07aWYocCl7cD1wK2wucmVwbGFjZSgvXC4vZywiLyIpKyIvdGhlbWVzLyIrdCsiLyI7cS5zYXAucmVnaXN0ZXJNb2R1bGVQYXRoKGwrIi50aGVtZXMuIit0LHApO3JldHVybiBwfX1yZXR1cm4gcS5zYXAuZ2V0TW9kdWxlUGF0aChsKyIudGhlbWVzLiIrdCwiLyIpfTtrLnByb3RvdHlwZS5zZXRUaGVtZVJvb3Q9ZnVuY3Rpb24odCxsLHMpe2lmKCF0aGlzLl9tVGhlbWVSb290cyl7dGhpcy5fbVRoZW1lUm9vdHM9e319aWYocz09PXVuZGVmaW5lZCl7cz1sO2w9dW5kZWZpbmVkfXM9cysocy5zbGljZSgtMSk9PSIvIj8iIjoiLyIpO2lmKGwpe2Zvcih2YXIgaT0wO2k8bC5sZW5ndGg7aSsrKXt2YXIgYj1sW2ldO3RoaXMuX21UaGVtZVJvb3RzW3QrIiAiK2JdPXN9fWVsc2V7dGhpcy5fbVRoZW1lUm9vdHNbdF09c31yZXR1cm4gdGhpc307ay5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe2lmKHRoaXMuYkluaXRpYWxpemVkKXtyZXR1cm59dmFyIGI9cS5zYXAubG9nLE09InNhcC51aS5jb3JlLkNvcmUuaW5pdCgpIjt0aGlzLmJvb3QoKTtiLmluZm8oIkluaXRpYWxpemluZyIsbnVsbCxNKTt0aGlzLm9Gb2N1c0hhbmRsZXI9bmV3IEYoZG9jdW1lbnQuYm9keSx0aGlzKTt0aGlzLm9SZXNpemVIYW5kbGVyPW5ldyBoKHRoaXMpO3RoaXMub1RoZW1lQ2hlY2s9bmV3IFQodGhpcyk7Yi5pbmZvKCJJbml0aWFsaXplZCIsbnVsbCxNKTt0aGlzLmJJbml0aWFsaXplZD10cnVlO2IuaW5mbygiU3RhcnRpbmcgUGx1Z2lucyIsbnVsbCxNKTt0aGlzLnN0YXJ0UGx1Z2lucygpO2IuaW5mbygiUGx1Z2lucyBzdGFydGVkIixudWxsLE0pO3ZhciBvPXRoaXMub0NvbmZpZ3VyYXRpb247aWYoby5hcmVhcyl7Zm9yKHZhciBpPTAsbD1vLmFyZWFzLmxlbmd0aDtpPGw7aSsrKXt0aGlzLmNyZWF0ZVVJQXJlYShvLmFyZWFzW2ldKX1vLmFyZWFzPXVuZGVmaW5lZH1pZihvLm9uSW5pdCl7aWYodHlwZW9mIG8ub25Jbml0PT09ImZ1bmN0aW9uIil7by5vbkluaXQoKX1lbHNle3Euc2FwLmdsb2JhbEV2YWwoby5vbkluaXQpfW8ub25Jbml0PXVuZGVmaW5lZH10aGlzLm9UaGVtZUNoZWNrLmZpcmVUaGVtZUNoYW5nZWRFdmVudCh0cnVlKTt2YXIgcz1vLmdldFJvb3RDb21wb25lbnQoKTtpZihzKXtiLmluZm8oIkxvYWRpbmcgUm9vdCBDb21wb25lbnQ6ICIrcyxudWxsLE0pO3ZhciBtPXNhcC51aS5jb21wb25lbnQoe25hbWU6c30pO3RoaXMub1Jvb3RDb21wb25lbnQ9bTt2YXIgbj1vWyJ4eC1yb290Q29tcG9uZW50Tm9kZSJdO2lmKG4mJm0gaW5zdGFuY2VvZiBzYXAudWkuY29yZS5VSUNvbXBvbmVudCl7dmFyIHA9cS5zYXAuZG9tQnlJZChuKTtpZihwKXtiLmluZm8oIkNyZWF0aW5nIENvbXBvbmVudENvbnRhaW5lciBmb3IgUm9vdCBDb21wb25lbnQ6ICIrcyxudWxsLE0pO3ZhciB0PW5ldyBzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIoe2NvbXBvbmVudDptLHByb3BhZ2F0ZU1vZGVsOnRydWV9KTt0LnBsYWNlQXQocCl9fX1lbHNle3ZhciBBPW8uZ2V0QXBwbGljYXRpb24oKTtpZihBKXtiLndhcm5pbmcoIlRoZSBjb25maWd1cmF0aW9uICdhcHBsaWNhdGlvbicgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB0aGUgY29uZmlndXJhdGlvbiAnY29tcG9uZW50JyBpbnN0ZWFkISBQbGVhc2UgbWlncmF0ZSBmcm9tIHNhcC51aS5hcHAuQXBwbGljYXRpb24gdG8gc2FwLnVpLmNvcmUuQ29tcG9uZW50LiIpO2IuaW5mbygiTG9hZGluZyBBcHBsaWNhdGlvbjogIitBLG51bGwsTSk7cS5zYXAucmVxdWlyZShBKTt2YXIgdT1xLnNhcC5nZXRPYmplY3QoQSk7dmFyIHY9bmV3IHUoKTt9fXZhciB3PXRoaXMuYUluaXRMaXN0ZW5lcnM7dGhpcy5hSW5pdExpc3RlbmVycz11bmRlZmluZWQ7aWYodyYmdy5sZW5ndGg+MCl7Yi5pbmZvKCJGaXJlIExvYWRlZCBFdmVudCIsbnVsbCxNKTtxLmVhY2godyxmdW5jdGlvbihpLGYpe2YoKX0pfXRoaXMucmVuZGVyUGVuZGluZ1VJVXBkYXRlcygpfTtrLnByb3RvdHlwZS5oYW5kbGVMb2FkPWZ1bmN0aW9uKCl7dGhpcy5iRG9tUmVhZHk9dHJ1ZTt2YXIgdz10aGlzLmlzTG9ja2VkKCk7aWYoIXcpe3RoaXMubG9jaygpfXRoaXMuaW5pdCgpO2lmKCF3KXt0aGlzLnVubG9jaygpfX07ay5wcm90b3R5cGUuaXNJbml0aWFsaXplZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJJbml0aWFsaXplZH07ay5wcm90b3R5cGUuaXNUaGVtZUFwcGxpZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gVC50aGVtZUxvYWRlZH07ay5wcm90b3R5cGUuYXR0YWNoSW5pdEV2ZW50PWZ1bmN0aW9uKGYpe2lmKHRoaXMuYUluaXRMaXN0ZW5lcnMpe3RoaXMuYUluaXRMaXN0ZW5lcnMucHVzaChmKX19O2sucHJvdG90eXBlLmF0dGFjaEluaXQ9ZnVuY3Rpb24oZil7aWYodGhpcy5hSW5pdExpc3RlbmVycyl7dGhpcy5hSW5pdExpc3RlbmVycy5wdXNoKGYpfWVsc2V7ZigpfX07ay5wcm90b3R5cGUubG9jaz1mdW5jdGlvbigpe3RoaXMuYkxvY2tlZD10cnVlfTtrLnByb3RvdHlwZS51bmxvY2s9ZnVuY3Rpb24oKXt0aGlzLmJMb2NrZWQ9ZmFsc2V9O2sucHJvdG90eXBlLmlzTG9ja2VkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYkxvY2tlZH07ay5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db25maWd1cmF0aW9ufTtrLnByb3RvdHlwZS5nZXRSZW5kZXJNYW5hZ2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3JlYXRlUmVuZGVyTWFuYWdlcigpfTtrLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJNYW5hZ2VyPWZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBSKCkpLmdldEludGVyZmFjZSgpfTtrLnByb3RvdHlwZS5nZXRDdXJyZW50Rm9jdXNlZENvbnRyb2xJZD1mdW5jdGlvbigpe2lmKCF0aGlzLmlzSW5pdGlhbGl6ZWQoKSl7dGhyb3cgbmV3IEVycm9yKCJDb3JlIG11c3QgYmUgaW5pdGlhbGl6ZWQiKX1yZXR1cm4gdGhpcy5vRm9jdXNIYW5kbGVyLmdldEN1cnJlbnRGb2N1c2VkQ29udHJvbElkKCl9O2sucHJvdG90eXBlLmxvYWRMaWJyYXJ5PWZ1bmN0aW9uKGwsdSl7aWYoIXRoaXMubUxpYnJhcmllc1tsXSl7dmFyIG09bCsiLmxpYnJhcnkiLEE7aWYodSl7cS5zYXAucmVnaXN0ZXJNb2R1bGVQYXRoKGwsdSl9aWYodGhpcy5vQ29uZmlndXJhdGlvblsneHgtbG9hZEFsbE1vZGUnXSYmIXEuc2FwLmlzRGVjbGFyZWQobSkpe0E9bSsiLWFsbCI7cS5zYXAubG9nLmRlYnVnKCJsb2FkIGFsbC1pbi1vbmUgZmlsZSAiK0EpO3Euc2FwLnJlcXVpcmUoQSl9ZWxzZSBpZih0aGlzLm9Db25maWd1cmF0aW9uLnByZWxvYWQ9PT0nc3luYyd8fHRoaXMub0NvbmZpZ3VyYXRpb24ucHJlbG9hZD09PSdhc3luYycpe3Euc2FwLnByZWxvYWRNb2R1bGVzKG0rIi1wcmVsb2FkIixmYWxzZSl9cS5zYXAucmVxdWlyZShtKTtpZighdGhpcy5tTGlicmFyaWVzW2xdKXtxLnNhcC5sb2cud2FybmluZygibGlicmFyeSAiK2wrIiBkaWRuJ3QgaW5pdGlhbGl6ZSBpdHNlbGYiKTt0aGlzLmluaXRMaWJyYXJ5KGwpfWlmKHRoaXMub1RoZW1lQ2hlY2smJnRoaXMuaXNJbml0aWFsaXplZCgpKXt0aGlzLm9UaGVtZUNoZWNrLmZpcmVUaGVtZUNoYW5nZWRFdmVudCh0cnVlKX19cmV0dXJuIHRoaXMubUxpYnJhcmllc1tsXX07ay5wcm90b3R5cGUuY3JlYXRlQ29tcG9uZW50PWZ1bmN0aW9uKHYsdSxpLHMpe2lmKHR5cGVvZiB2PT09InN0cmluZyIpe3Y9e25hbWU6dix1cmw6dX07aWYodHlwZW9mIGk9PT0ib2JqZWN0Iil7di5zZXR0aW5ncz1pfWVsc2V7di5pZD1pO3Yuc2V0dGluZ3M9c319cmV0dXJuIHNhcC51aS5jb21wb25lbnQodil9O2sucHJvdG90eXBlLmdldFJvb3RDb21wb25lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vUm9vdENvbXBvbmVudH07ay5wcm90b3R5cGUuaW5pdExpYnJhcnk9ZnVuY3Rpb24obCl7dmFyIEw9dHlwZW9mIGw9PT0ic3RyaW5nIixvPUw/e25hbWU6bH06bCxzPW8ubmFtZSxiPXEuc2FwLmxvZyxNPSJzYXAudWkuY29yZS5Db3JlLmluaXRMaWJyYXJ5KCkiO2lmKEwpe2Iud2FybmluZygiW0RlcHJlY2F0ZWRdIGxpYnJhcnkgIitzKyIgdXNlcyBvbGQgZmFzaGlvbmVkIGluaXRMaWJyYXJ5KCkgY2FsbCAocmVidWlsZCB3aXRoIG5ld2VzdCBnZW5lcmF0b3IpIil9aWYoIXN8fHRoaXMubUxpYnJhcmllc1tzXSl7cmV0dXJufWIuZGVidWcoIkFuYWx5emluZyBMaWJyYXJ5ICIrcyxudWxsLE0pO3RoaXMubUxpYnJhcmllc1tzXT1vPXEuZXh0ZW5kKHtkZXBlbmRlbmNpZXM6W10sdHlwZXM6W10saW50ZXJmYWNlczpbXSxjb250cm9sczpbXSxlbGVtZW50czpbXX0sbyk7ZnVuY3Rpb24gZigpe3ZhciBwPXEuc2FwLnByb3BlcnRpZXMoe3VybDpzYXAudWkucmVzb3VyY2UocywibGlicmFyeS5wcm9wZXJ0aWVzIil9KTtvLnZlcnNpb249cC5nZXRQcm9wZXJ0eShzKyJbdmVyc2lvbl0iKTt2YXIgdD1wLmdldFByb3BlcnR5KHMrIltkZXBlbmRlbmNpZXNdIik7Yi5kZWJ1ZygiUmVxdWlyZWQgTGlicmFyaWVzOiAiK3QsbnVsbCxNKTtvLmRlcGVuZGVuY2llcz0odCYmdC5zcGxpdCgvWyw7fCBdLykpfHxbXTt2YXIgSz1wLmdldEtleXMoKSx1PS8oLispXC4odHlwZXxpbnRlcmZhY2V8Y29udHJvbHxlbGVtZW50KSQvLHY7Zm9yKHZhciBpPTA7aTxLLmxlbmd0aDtpKyspe3ZhciB3PXAuZ2V0UHJvcGVydHkoS1tpXSk7aWYodj13Lm1hdGNoKHUpKXtvW3ZbMl0rInMiXS5wdXNoKEtbaV0pfX19aWYoTCl7ZigpfWZvcih2YXIgaT0wO2k8by5kZXBlbmRlbmNpZXMubGVuZ3RoO2krKyl7dmFyIG09by5kZXBlbmRlbmNpZXNbaV07Yi5kZWJ1ZygicmVzb2x2ZSBEZXBlbmRlbmNpZXMgdG8gIittLG51bGwsTSk7aWYoIXRoaXMubUxpYnJhcmllc1ttXSl7Yi53YXJuaW5nKCJEZXBlbmRlbmN5IGZyb20gIitzKyIgdG8gIittKyIgaGFzIG5vdCBiZWVuIHJlc29sdmVkIGJ5IGxpYnJhcnkgaXRzZWxmIixudWxsLE0pO3RoaXMubG9hZExpYnJhcnkobSl9fWEucmVnaXN0ZXJJbnRlcmZhY2VUeXBlcyhvLmludGVyZmFjZXMpO3ZhciBuPW8uY29udHJvbHMuY29uY2F0KG8uZWxlbWVudHMpO2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXtzYXAudWkubGF6eVJlcXVpcmUobltpXSwibmV3IGV4dGVuZCBnZXRNZXRhZGF0YSIpfWlmKCFvLm5vTGlicmFyeUNTUyYmcS5pbkFycmF5KHMsdGhpcy5vQ29uZmlndXJhdGlvblsneHgtcHJlbG9hZExpYkNzcyddKTwwKXt0aGlzLmluY2x1ZGVMaWJyYXJ5VGhlbWUocyl9by5zTmFtZT1vLm5hbWU7by5hQ29udHJvbHM9by5jb250cm9scztpZighcS5zYXAuaXNEZWNsYXJlZChzKyIubGlicmFyeSIpKXtiLndhcm5pbmcoIkxpYnJhcnkgTW9kdWxlICIrcysiLmxpYnJhcnkiKyIgbm90IGxvYWRlZCBhdXRvbWF0aWNhbGx5IixudWxsLE0pO3Euc2FwLnJlcXVpcmUocysiLmxpYnJhcnkiKX10aGlzLmZpcmVMaWJyYXJ5Q2hhbmdlZCh7bmFtZTpzLHN0ZXJlb3R5cGU6ImxpYnJhcnkiLG9wZXJhdGlvbjoiYWRkIixtZXRhZGF0YTpvfSl9O2sucHJvdG90eXBlLmluY2x1ZGVMaWJyYXJ5VGhlbWU9ZnVuY3Rpb24obCx2LFEpe2lmKChsIT0ic2FwLnVpLmxlZ2FjeSIpJiYobCE9InNhcC51aS5jbGFzc2ljIikpe2lmKCF2KXt2PSIifXZhciBzPSh0aGlzLm9Db25maWd1cmF0aW9uLmdldFJUTCgpPyItUlRMIjoiIik7dmFyIEwsYj1sKyh2Lmxlbmd0aD4wPyItWyIrdisiXSI6dik7aWYobCYmbC5pbmRleE9mKCI6Iik9PS0xKXtMPSJsaWJyYXJ5Iit2K3N9ZWxzZXtMPWwuc3Vic3RyaW5nKGwuaW5kZXhPZigiOiIpKzEpK3Y7bD1sLnN1YnN0cmluZygwLGwuaW5kZXhPZigiOiIpKX12YXIgZj10aGlzLl9nZXRUaGVtZVBhdGgobCx0aGlzLnNUaGVtZSkrTCsiLmNzcyIrKFE/UToiIik7cS5zYXAubG9nLmluZm8oIkluY2x1ZGluZyAiK2YrIiAtICBzYXAudWkuY29yZS5Db3JlLmluY2x1ZGVMaWJyYXJ5VGhlbWUoKSIpO3Euc2FwLmluY2x1ZGVTdHlsZVNoZWV0KGYsInNhcC11aS10aGVtZS0iK2IpO2lmKHNhcC51aS5jb3JlLnRoZW1pbmcmJnNhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycyl7c2FwLnVpLmNvcmUudGhlbWluZy5QYXJhbWV0ZXJzLl9hZGRMaWJyYXJ5VGhlbWUoZil9fX07ay5wcm90b3R5cGUuZ2V0TG9hZGVkTGlicmFyaWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHEuZXh0ZW5kKHt9LHRoaXMubUxpYnJhcmllcyl9O2sucHJvdG90eXBlLmdldExpYnJhcnlSZXNvdXJjZUJ1bmRsZT1mdW5jdGlvbihsLEwpe2w9bHx8InNhcC51aS5jb3JlIjtMPUx8fHRoaXMuZ2V0Q29uZmlndXJhdGlvbigpLmdldExhbmd1YWdlKCk7dmFyIEs9bCsiLyIrTDtpZighdGhpcy5tUmVzb3VyY2VCdW5kbGVzW0tdKXt2YXIgdT1zYXAudWkucmVzb3VyY2UobCwnbWVzc2FnZWJ1bmRsZS5wcm9wZXJ0aWVzJyk7dGhpcy5tUmVzb3VyY2VCdW5kbGVzW0tdPXEuc2FwLnJlc291cmNlcyh7dXJsOnUsbG9jYWxlOkx9KX1yZXR1cm4gdGhpcy5tUmVzb3VyY2VCdW5kbGVzW0tdfTtrLnByb3RvdHlwZS5zZXRSb290PWZ1bmN0aW9uKG8sYil7aWYoYil7Yi5wbGFjZUF0KG8sIm9ubHkiKX19O2sucHJvdG90eXBlLmNyZWF0ZVVJQXJlYT1mdW5jdGlvbihvKXt2YXIgdD10aGlzO2lmKCFvKXt0aHJvdyBuZXcgRXJyb3IoIm9Eb21SZWYgbXVzdCBub3QgYmUgbnVsbCIpfWlmKHR5cGVvZihvKT09PSJzdHJpbmciKXt2YXIgaT1vO289cS5zYXAuZG9tQnlJZChvKTtpZighbyl7dGhyb3cgbmV3IEVycm9yKCJET00gZWxlbWVudCB3aXRoIElEICciK2krIicgbm90IGZvdW5kIGluIHBhZ2UsIGJ1dCBhcHBsaWNhdGlvbiB0cmllcyB0byBpbnNlcnQgY29udGVudC4iKX19aWYoIW8uaWR8fG8uaWQubGVuZ3RoPT0wKXtvLmlkPXEuc2FwLnVpZCgpfXZhciBJPW8uaWQ7aWYoIXRoaXMubVVJQXJlYXNbSV0pe3RoaXMubVVJQXJlYXNbSV09bmV3IFUodGhpcyxvKTtxLmVhY2godGhpcy5vTW9kZWxzLGZ1bmN0aW9uKG4sbSl7dC5tVUlBcmVhc1tJXS5vUHJvcGFnYXRlZFByb3BlcnRpZXMub01vZGVsc1tuXT1tfSk7dGhpcy5tVUlBcmVhc1tJXS5wcm9wYWdhdGVQcm9wZXJ0aWVzKHRydWUpfWVsc2V7dGhpcy5tVUlBcmVhc1tJXS5zZXRSb290Tm9kZShvKX1yZXR1cm4gdGhpcy5tVUlBcmVhc1tJXX07ay5wcm90b3R5cGUuZ2V0VUlBcmVhPWZ1bmN0aW9uKG8pe3ZhciBpPSIiO2lmKHR5cGVvZihvKT09InN0cmluZyIpe2k9b31lbHNle2k9by5pZH1pZihpKXtyZXR1cm4gdGhpcy5tVUlBcmVhc1tpXX1yZXR1cm4gbnVsbH07dmFyIHI9VS5fb1JlbmRlckxvZztrLnByb3RvdHlwZS5hZGRJbnZhbGlkYXRlZFVJQXJlYT1mdW5jdGlvbih1KXtpZighdGhpcy5fc1JlcmVuZGVyVGltZXIpe3IuZGVidWcoIlJlZ2lzdGVyaW5nIHRpbWVyIGZvciBkZWxheWVkIHJlLXJlbmRlcmluZyIpO3RoaXMuX3NSZXJlbmRlclRpbWVyPXEuc2FwLmRlbGF5ZWRDYWxsKDAsdGhpcywicmVuZGVyUGVuZGluZ1VJVXBkYXRlcyIpfX07ay5NQVhfUkVOREVSSU5HX0lURVJBVElPTlM9MjA7ay5wcm90b3R5cGUucmVuZGVyUGVuZGluZ1VJVXBkYXRlcz1mdW5jdGlvbigpe3IuZGVidWcoIlJlbmRlciBwZW5kaW5nIFVJIHVwZGF0ZXM6IHN0YXJ0Iik7cS5zYXAubWVhc3VyZS5zdGFydCgicmVuZGVyUGVuZGluZ1VJVXBkYXRlcyIsIlJlbmRlciBwZW5kaW5nIFVJIHVwZGF0ZXMgaW4gYWxsIFVJQXJlYXMiKTt2YXIgdT1mYWxzZSxsPWsuTUFYX1JFTkRFUklOR19JVEVSQVRJT05TPjAsTD0wO3RoaXMuX2JSZW5kZXJpbmc9dHJ1ZTtkb3tpZihsKXtMKys7aWYoTD5rLk1BWF9SRU5ERVJJTkdfSVRFUkFUSU9OUyl7dGhpcy5fYlJlbmRlcmluZz1mYWxzZTt0aHJvdyBuZXcgRXJyb3IoIlJlbmRlcmluZyBoYXMgYmVlbiByZS1zdGFydGVkIHRvbyBtYW55IHRpbWVzICgiK0wrIikuIEFkZCBVUkwgcGFyYW1ldGVyIHNhcC11aS14eC1kZWJ1Z1JlbmRlcmluZz10cnVlIGZvciBhIGRldGFpbGVkIGFuYWx5c2lzLiIpfWlmKEw+MSl7ci5kZWJ1ZygiUmVuZGVyIHBlbmRpbmcgVUkgdXBkYXRlczogaXRlcmF0aW9uICIrTCl9fWlmKHRoaXMuX3NSZXJlbmRlclRpbWVyKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX3NSZXJlbmRlclRpbWVyKTt0aGlzLl9zUmVyZW5kZXJUaW1lcj11bmRlZmluZWR9dmFyIG09dGhpcy5tVUlBcmVhcztmb3IodmFyIGkgaW4gbSl7dT1tW2ldLnJlcmVuZGVyKCl8fHV9fXdoaWxlKGwmJnRoaXMuX3NSZXJlbmRlclRpbWVyKTt0aGlzLl9iUmVuZGVyaW5nPWZhbHNlO2lmKHUpe3RoaXMuZmlyZVVJVXBkYXRlZCgpfXIuZGVidWcoIlJlbmRlciBwZW5kaW5nIFVJIHVwZGF0ZXM6IGZpbmlzaGVkIik7cS5zYXAubWVhc3VyZS5lbmQoInJlbmRlclBlbmRpbmdVSVVwZGF0ZXMiKX07ay5wcm90b3R5cGUuZ2V0VUlEaXJ0eT1mdW5jdGlvbigpe3JldHVybiEhKHRoaXMuX3NSZXJlbmRlclRpbWVyfHx0aGlzLl9iUmVuZGVyaW5nKX07ay5wcm90b3R5cGUuYXR0YWNoVUlVcGRhdGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChrLk1fRVZFTlRTLlVJVXBkYXRlZCxmLGwpfTtrLnByb3RvdHlwZS5kZXRhY2hVSVVwZGF0ZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KGsuTV9FVkVOVFMuVUlVcGRhdGVkLGYsbCl9O2sucHJvdG90eXBlLmZpcmVVSVVwZGF0ZWQ9ZnVuY3Rpb24ocCl7dGhpcy5maXJlRXZlbnQoay5NX0VWRU5UUy5VSVVwZGF0ZWQscCl9O2sucHJvdG90eXBlLmF0dGFjaFRoZW1lQ2hhbmdlZD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5UaGVtZUNoYW5nZWQsZixsKX07ay5wcm90b3R5cGUuZGV0YWNoVGhlbWVDaGFuZ2VkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChrLk1fRVZFTlRTLlRoZW1lQ2hhbmdlZCxmLGwpfTtrLnByb3RvdHlwZS5maXJlVGhlbWVDaGFuZ2VkPWZ1bmN0aW9uKHApe3Euc2FwLnNjcm9sbGJhclNpemUodHJ1ZSk7aWYoc2FwLnVpLmNvcmUudGhlbWluZyYmc2FwLnVpLmNvcmUudGhlbWluZy5QYXJhbWV0ZXJzKXtzYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMucmVzZXQodHJ1ZSl9dmFyIHM9ay5NX0VWRU5UUy5UaGVtZUNoYW5nZWQ7dmFyIG89cS5FdmVudChzKTtvLnRoZW1lPXA/cC50aGVtZTpudWxsO3EuZWFjaCh0aGlzLm1FbGVtZW50cyxmdW5jdGlvbihpLGIpe2IuX2hhbmRsZUV2ZW50KG8pfSk7cS5zYXAuYWN0LnJlZnJlc2goKTt0aGlzLmZpcmVFdmVudChzLHApfTtrLnByb3RvdHlwZS5hdHRhY2hMb2NhbGl6YXRpb25DaGFuZ2VkPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChrLk1fRVZFTlRTLkxvY2FsaXphdGlvbkNoYW5nZWQsZixsKX07ay5wcm90b3R5cGUuZGV0YWNoTG9jYWxpemF0aW9uQ2hhbmdlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5Mb2NhbGl6YXRpb25DaGFuZ2VkLGYsbCl9O2sucHJvdG90eXBlLmZpcmVMb2NhbGl6YXRpb25DaGFuZ2VkPWZ1bmN0aW9uKG0pe3ZhciB0PXRoaXMscz1rLk1fRVZFTlRTLkxvY2FsaXphdGlvbkNoYW5nZWQsYj1xLkV2ZW50KHMse2NoYW5nZXM6bX0pLEE9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlLGY9W107cS5lYWNoKG0sZnVuY3Rpb24oaSx2KXtmLnB1c2goaSl9KTtxLnNhcC5sb2cuaW5mbygibG9jYWxpemF0aW9uIHNldHRpbmdzIGNoYW5nZWQ6ICIrZi5qb2luKCIsIiksbnVsbCwic2FwLnVpLmNvcmUuQ29yZSIpO3EuZWFjaCh0aGlzLm9Nb2RlbHMsZnVuY3Rpb24oTixNKXtpZihNJiZNLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2Upe00uX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSgpfX0pO2Z1bmN0aW9uIG4ocCl7cS5lYWNoKHRoaXMubVVJQXJlYXMsZnVuY3Rpb24oKXtBLmNhbGwodGhpcyxwKX0pO3EuZWFjaCh0aGlzLm1PYmplY3RzWyJjb21wb25lbnQiXSxmdW5jdGlvbigpe0EuY2FsbCh0aGlzLHApfSk7cS5lYWNoKHRoaXMubUVsZW1lbnRzLGZ1bmN0aW9uKCl7QS5jYWxsKHRoaXMscCl9KX1uLmNhbGwodGhpcywxKTtuLmNhbGwodGhpcywyKTtpZihtLnJ0bCE9dW5kZWZpbmVkKXtxKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXR0cigiZGlyIixtLnJ0bD8icnRsIjoibHRyIik7dGhpcy5fdXBkYXRlVGhlbWVVcmxzKHRoaXMuc1RoZW1lKTtxLmVhY2godGhpcy5tVUlBcmVhcyxmdW5jdGlvbigpe3RoaXMuaW52YWxpZGF0ZSgpfSk7cS5zYXAubG9nLmluZm8oIlJUTCBtb2RlICIrbS5ydGw/ImFjdGl2YXRlZCI6ImRlYWN0aXZhdGVkIil9cS5lYWNoKHRoaXMubUVsZW1lbnRzLGZ1bmN0aW9uKGksbyl7dGhpcy5faGFuZGxlRXZlbnQoYil9KTt0aGlzLmZpcmVFdmVudChzLHtjaGFuZ2VzOm19KX07ay5wcm90b3R5cGUuYXR0YWNoTGlicmFyeUNoYW5nZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KGsuTV9FVkVOVFMuTGlicmFyeUNoYW5nZWQsZixsKX07ay5wcm90b3R5cGUuZGV0YWNoTGlicmFyeUNoYW5nZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KGsuTV9FVkVOVFMuTGlicmFyeUNoYW5nZWQsZixsKX07ay5wcm90b3R5cGUuZmlyZUxpYnJhcnlDaGFuZ2VkPWZ1bmN0aW9uKHApe3RoaXMuZmlyZUV2ZW50KGsuTV9FVkVOVFMuTGlicmFyeUNoYW5nZWQscCl9O2sucHJvdG90eXBlLmFwcGx5Q2hhbmdlcz1mdW5jdGlvbigpe3RoaXMucmVuZGVyUGVuZGluZ1VJVXBkYXRlcygpfTtrLnByb3RvdHlwZS5yZWdpc3RlckVsZW1lbnRDbGFzcz1mdW5jdGlvbihtKXt2YXIgbj1tLmdldE5hbWUoKSxsPW0uZ2V0TGlicmFyeU5hbWUoKXx8IiIsTD10aGlzLm1MaWJyYXJpZXNbbF0sYj1kLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKG0uZ2V0Q2xhc3MoKS5wcm90b3R5cGUpLGY9ZmFsc2U7aWYoIUwpe0w9dGhpcy5tTGlicmFyaWVzW2xdPXtkZXBlbmRlbmNpZXM6W10sdHlwZXM6W10saW50ZXJmYWNlczpbXSxjb250cm9sczpbXSxlbGVtZW50czpbXX19aWYoYil7aWYocS5pbkFycmF5KG4sTC5jb250cm9scyk8MCl7TC5jb250cm9scy5wdXNoKG4pO2Y9dHJ1ZX19ZWxzZXtpZihxLmluQXJyYXkobixMLmVsZW1lbnRzKTwwKXtMLmVsZW1lbnRzLnB1c2gobik7Zj10cnVlfX1pZihmKXtxLnNhcC5sb2cuZGVidWcoIkNsYXNzICIrbS5nZXROYW1lKCkrIiByZWdpc3RlcmVkIGZvciBsaWJyYXJ5ICIrbS5nZXRMaWJyYXJ5TmFtZSgpKTt0aGlzLmZpcmVMaWJyYXJ5Q2hhbmdlZCh7bmFtZTptLmdldE5hbWUoKSxzdGVyZW90eXBlOm0uZ2V0U3RlcmVvdHlwZSgpLG9wZXJhdGlvbjoiYWRkIixtZXRhZGF0YTptfSl9fTtrLnByb3RvdHlwZS5yZWdpc3RlckVsZW1lbnQ9ZnVuY3Rpb24obyl7dmFyIGI9dGhpcy5ieUlkKG8uZ2V0SWQoKSk7aWYoYiYmYiE9PW8pe2lmKHRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0Tm9EdXBsaWNhdGVJZHMoKSl7cS5zYXAubG9nLmVycm9yKCJhZGRpbmcgZWxlbWVudCB3aXRoIGR1cGxpY2F0ZSBpZCAnIitvLmdldElkKCkrIiciKTt0aHJvdyBuZXcgRXJyb3IoIkVycm9yOiBhZGRpbmcgZWxlbWVudCB3aXRoIGR1cGxpY2F0ZSBpZCAnIitvLmdldElkKCkrIiciKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJhZGRpbmcgZWxlbWVudCB3aXRoIGR1cGxpY2F0ZSBpZCAnIitvLmdldElkKCkrIiciKX19dGhpcy5tRWxlbWVudHNbby5nZXRJZCgpXT1vfTtrLnByb3RvdHlwZS5kZXJlZ2lzdGVyRWxlbWVudD1mdW5jdGlvbihvKXtkZWxldGUgdGhpcy5tRWxlbWVudHNbby5nZXRJZCgpXX07ay5wcm90b3R5cGUucmVnaXN0ZXJPYmplY3Q9ZnVuY3Rpb24obyl7dmFyIGk9by5nZXRJZCgpLHQ9by5nZXRNZXRhZGF0YSgpLmdldFN0ZXJlb3R5cGUoKSxiPXRoaXMuZ2V0T2JqZWN0KHQsaSk7aWYoYiYmYiE9PW8pe3Euc2FwLmxvZy5lcnJvcigiYWRkaW5nIG9iamVjdCBcIiIrdCsiXCIgd2l0aCBkdXBsaWNhdGUgaWQgJyIraSsiJyIpO3Rocm93IG5ldyBFcnJvcigiRXJyb3I6IGFkZGluZyBvYmplY3QgXCIiK3QrIlwiIHdpdGggZHVwbGljYXRlIGlkICciK2krIiciKX10aGlzLm1PYmplY3RzW3RdW2ldPW99O2sucHJvdG90eXBlLmRlcmVnaXN0ZXJPYmplY3Q9ZnVuY3Rpb24obyl7dmFyIGk9by5nZXRJZCgpLHQ9by5nZXRNZXRhZGF0YSgpLmdldFN0ZXJlb3R5cGUoKTtkZWxldGUgdGhpcy5tT2JqZWN0c1t0XVtpXX07ay5wcm90b3R5cGUuYnlJZD1mdW5jdGlvbihpKXtyZXR1cm4gaT09bnVsbD91bmRlZmluZWQ6dGhpcy5tRWxlbWVudHNbaV19O2sucHJvdG90eXBlLmdldENvbnRyb2w9ay5wcm90b3R5cGUuYnlJZDtrLnByb3RvdHlwZS5nZXRFbGVtZW50QnlJZD1rLnByb3RvdHlwZS5ieUlkO2sucHJvdG90eXBlLmdldE9iamVjdD1mdW5jdGlvbih0LGkpe3JldHVybiBpPT1udWxsP3VuZGVmaW5lZDp0aGlzLm1PYmplY3RzW3RdJiZ0aGlzLm1PYmplY3RzW3RdW2ldfTtrLnByb3RvdHlwZS5nZXRDb21wb25lbnQ9ZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0KCJjb21wb25lbnQiLGkpfTtrLnByb3RvdHlwZS5nZXRUZW1wbGF0ZT1mdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5nZXRPYmplY3QoInRlbXBsYXRlIixpKX07ay5wcm90b3R5cGUuZ2V0U3RhdGljQXJlYVJlZj1mdW5jdGlvbigpe3ZhciBzPSJzYXAtdWktc3RhdGljIjt2YXIgUz1xLnNhcC5kb21CeUlkKHMpO2lmKCFTKXtpZighdGhpcy5iRG9tUmVhZHkpe3Rocm93IG5ldyBFcnJvcigiRE9NIGlzIG5vdCByZWFkeSB5ZXQuIFN0YXRpYyBVSUFyZWEgY2Fubm90IGJlIGNyZWF0ZWQuIil9dmFyIGw9dGhpcy5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk/InJpZ2h0IjoibGVmdCI7Uz1xKCI8RElWLz4iLHtpZDpzfSkuY3NzKHsiaGVpZ2h0IjoiMCIsIndpZHRoIjoiMCIsIm92ZXJmbG93IjoiaGlkZGVuIiwiZmxvYXQiOmx9KS5wcmVwZW5kVG8oZG9jdW1lbnQuYm9keSlbMF07dGhpcy5jcmVhdGVVSUFyZWEoUykuYkluaXRpYWw9ZmFsc2V9cmV0dXJuIFN9O2sucHJvdG90eXBlLmlzU3RhdGljQXJlYVJlZj1mdW5jdGlvbihvKXtyZXR1cm4gbyYmKG8uaWQ9PT0ic2FwLXVpLXN0YXRpYyIpfTtrLl9JX0lOVEVSVkFMPTIwMDtoLnByb3RvdHlwZS5JX0lOVEVSVkFMPWsuX0lfSU5URVJWQUw7ay5wcm90b3R5cGUuYXR0YWNoSW50ZXJ2YWxUaW1lcj1mdW5jdGlvbihmLGwpe2lmKCF0aGlzLm9UaW1lZFRyaWdnZXIpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLkludGVydmFsVHJpZ2dlciIpO3RoaXMub1RpbWVkVHJpZ2dlcj1uZXcgc2FwLnVpLmNvcmUuSW50ZXJ2YWxUcmlnZ2VyKGsuX0lfSU5URVJWQUwpfXRoaXMub1RpbWVkVHJpZ2dlci5hZGRMaXN0ZW5lcihmLGwpfTtrLnByb3RvdHlwZS5kZXRhY2hJbnRlcnZhbFRpbWVyPWZ1bmN0aW9uKGYsbCl7aWYodGhpcy5vVGltZWRUcmlnZ2VyKXt0aGlzLm9UaW1lZFRyaWdnZXIucmVtb3ZlTGlzdGVuZXIoZixsKX19O2sucHJvdG90eXBlLmF0dGFjaENvbnRyb2xFdmVudD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5Db250cm9sRXZlbnQsZixsKX07ay5wcm90b3R5cGUuZGV0YWNoQ29udHJvbEV2ZW50PWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChrLk1fRVZFTlRTLkNvbnRyb2xFdmVudCxmLGwpfTtrLnByb3RvdHlwZS5maXJlQ29udHJvbEV2ZW50PWZ1bmN0aW9uKHApe3RoaXMuZmlyZUV2ZW50KGsuTV9FVkVOVFMuQ29udHJvbEV2ZW50LHApfTtrLnByb3RvdHlwZS5faGFuZGxlQ29udHJvbEV2ZW50PWZ1bmN0aW9uKG8sdSl7dmFyIGI9cS5FdmVudChvLnR5cGUpO3EuZXh0ZW5kKGIsbyk7Yi5vcmlnaW5hbEV2ZW50PXVuZGVmaW5lZDt0aGlzLmZpcmVDb250cm9sRXZlbnQoeyJicm93c2VyRXZlbnQiOmIsInVpQXJlYSI6dX0pfTtrLnByb3RvdHlwZS5nZXRBcHBsaWNhdGlvbj1mdW5jdGlvbigpe3JldHVybiBzYXAudWkuZ2V0QXBwbGljYXRpb24mJnNhcC51aS5nZXRBcHBsaWNhdGlvbigpfTtrLnByb3RvdHlwZS5yZWdpc3RlclBsdWdpbj1mdW5jdGlvbihwKXtpZighcCl7cmV0dXJufWZvcih2YXIgaT0wLGw9dGhpcy5hUGx1Z2lucy5sZW5ndGg7aTxsO2krKyl7aWYodGhpcy5hUGx1Z2luc1tpXT09PXApe3JldHVybn19dGhpcy5hUGx1Z2lucy5wdXNoKHApO2lmKHRoaXMuYkluaXRpYWxpemVkJiZwJiZwLnN0YXJ0UGx1Z2luKXtwLnN0YXJ0UGx1Z2luKHRoaXMpfX07ay5wcm90b3R5cGUudW5yZWdpc3RlclBsdWdpbj1mdW5jdGlvbihwKXtpZighcCl7cmV0dXJufXZhciBQPS0xO2Zvcih2YXIgaT10aGlzLmFQbHVnaW5zLmxlbmd0aDtpLS07aT49MCl7aWYodGhpcy5hUGx1Z2luc1tpXT09PXApe1A9aTticmVha319aWYoUD09LTEpe3JldHVybn1pZih0aGlzLmJJbml0aWFsaXplZCYmcCYmcC5zdG9wUGx1Z2luKXtwLnN0b3BQbHVnaW4odGhpcyl9dGhpcy5hUGx1Z2lucy5zcGxpY2UoUCwxKX07ay5wcm90b3R5cGUuc3RhcnRQbHVnaW5zPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTAsbD10aGlzLmFQbHVnaW5zLmxlbmd0aDtpPGw7aSsrKXt2YXIgcD10aGlzLmFQbHVnaW5zW2ldO2lmKHAmJnAuc3RhcnRQbHVnaW4pe3Auc3RhcnRQbHVnaW4odGhpcyx0cnVlKX19fTtrLnByb3RvdHlwZS5zdG9wUGx1Z2lucz1mdW5jdGlvbigpe2Zvcih2YXIgaT0wLGw9dGhpcy5hUGx1Z2lucy5sZW5ndGg7aTxsO2krKyl7dmFyIHA9dGhpcy5hUGx1Z2luc1tpXTtpZihwJiZwLnN0b3BQbHVnaW4pe3Auc3RvcFBsdWdpbih0aGlzKX19fTtrLnByb3RvdHlwZS5zZXRNb2RlbD1mdW5jdGlvbihtLG4pe2lmKCFtJiZ0aGlzLm9Nb2RlbHNbbl0pe2RlbGV0ZSB0aGlzLm9Nb2RlbHNbbl07cS5lYWNoKHRoaXMubVVJQXJlYXMsZnVuY3Rpb24oaSx1KXtkZWxldGUgdS5vUHJvcGFnYXRlZFByb3BlcnRpZXMub01vZGVsc1tuXTt1LnByb3BhZ2F0ZVByb3BlcnRpZXMobil9KX1lbHNlIGlmKG0mJm0hPT10aGlzLm9Nb2RlbHNbbl0pe3RoaXMub01vZGVsc1tuXT1tO3EuZWFjaCh0aGlzLm1VSUFyZWFzLGZ1bmN0aW9uKGksdSl7dS5vUHJvcGFnYXRlZFByb3BlcnRpZXMub01vZGVsc1tuXT1tO3UucHJvcGFnYXRlUHJvcGVydGllcyhuKX0pfWVsc2V7fXJldHVybiB0aGlzfTtrLnByb3RvdHlwZS5nZXRNb2RlbD1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5vTW9kZWxzW25dfTtrLnByb3RvdHlwZS5oYXNNb2RlbD1mdW5jdGlvbigpe3JldHVybiFxLmlzRW1wdHlPYmplY3QodGhpcy5vTW9kZWxzKX07ay5wcm90b3R5cGUuZ2V0RXZlbnRCdXM9ZnVuY3Rpb24oKXtpZighdGhpcy5vRXZlbnRCdXMpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLkV2ZW50QnVzIik7dGhpcy5vRXZlbnRCdXM9bmV3IHNhcC51aS5jb3JlLkV2ZW50QnVzKCl9cmV0dXJuIHRoaXMub0V2ZW50QnVzfTtrLnByb3RvdHlwZS5hdHRhY2hWYWxpZGF0aW9uRXJyb3I9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KGsuTV9FVkVOVFMuVmFsaWRhdGlvbkVycm9yLGYsbCk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmRldGFjaFZhbGlkYXRpb25FcnJvcj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5WYWxpZGF0aW9uRXJyb3IsZixsKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuYXR0YWNoUGFyc2VFcnJvcj1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5QYXJzZUVycm9yLGYsbCk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmRldGFjaFBhcnNlRXJyb3I9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KGsuTV9FVkVOVFMuUGFyc2VFcnJvcixmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5hdHRhY2hGb3JtYXRFcnJvcj1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5Gb3JtYXRFcnJvcixmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5kZXRhY2hGb3JtYXRFcnJvcj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5Gb3JtYXRFcnJvcixmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5hdHRhY2hWYWxpZGF0aW9uU3VjY2Vzcz1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5WYWxpZGF0aW9uU3VjY2VzcyxmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5kZXRhY2hWYWxpZGF0aW9uU3VjY2Vzcz1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5WYWxpZGF0aW9uU3VjY2VzcyxmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5maXJlUGFyc2VFcnJvcj1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudChrLk1fRVZFTlRTLlBhcnNlRXJyb3IsQSk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmZpcmVWYWxpZGF0aW9uRXJyb3I9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoay5NX0VWRU5UUy5WYWxpZGF0aW9uRXJyb3IsQSk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmZpcmVGb3JtYXRFcnJvcj1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudChrLk1fRVZFTlRTLkZvcm1hdEVycm9yLEEpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5maXJlVmFsaWRhdGlvblN1Y2Nlc3M9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoay5NX0VWRU5UUy5WYWxpZGF0aW9uU3VjY2VzcyxBKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuaXNNb2JpbGU9ZnVuY3Rpb24oKXtyZXR1cm4gRC5icm93c2VyLm1vYmlsZX07aWYoIXdpbmRvdy5zYXAudWkuZ2V0Q29yZSl7KGZ1bmN0aW9uKCl7bmV3IGsoKX0oKSl9c2FwLnVpLnNldFJvb3Q9ZnVuY3Rpb24obyxiKXtzYXAudWkuZ2V0Q29yZSgpLnNldFJvb3QobyxiKX07cmV0dXJuIGt9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYXBwLkFwcGxpY2F0aW9uJykpewovKgogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmFwcC5BcHBsaWNhdGlvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9hcHAvQXBwbGljYXRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0FwcGxpY2F0aW9uTWV0YWRhdGEnLCdzYXAvdWkvY29yZS9Db21wb25lbnQnXSxmdW5jdGlvbihxLEEsQyl7InVzZSBzdHJpY3QiO3ZhciBhPUMuZXh0ZW5kKCJzYXAudWkuYXBwLkFwcGxpY2F0aW9uIix7bWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwcm9wZXJ0aWVzOntyb290OiJzdHJpbmciLGNvbmZpZzoiYW55In0sYWdncmVnYXRpb25zOntyb290Q29tcG9uZW50Ont0eXBlOiJzYXAudWkuY29yZS5VSUNvbXBvbmVudCIsbXVsdGlwbGU6ZmFsc2V9fSxwdWJsaWNNZXRob2RzOlsiZ2V0VmlldyJdLGRlcHJlY2F0ZWQ6dHJ1ZX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzKXtpZih0aGlzLm9uRXJyb3Ipe3RoaXMub25XaW5kb3dFcnJvcj10aGlzLm9uRXJyb3J9aWYodGhpcy5vbkJlZm9yZUV4aXQpe3RoaXMub25XaW5kb3dCZWZvcmVVbmxvYWQ9dGhpcy5vbkJlZm9yZUV4aXR9aWYodGhpcy5vbkV4aXQpe3RoaXMub25XaW5kb3dVbmxvYWQ9dGhpcy5vbkV4aXR9Qy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoc2FwLnVpLmdldEFwcGxpY2F0aW9uKXt0aHJvdyBuZXcgRXJyb3IoIk9ubHkgb25lIGluc3RhbmNlIG9mIHNhcC51aS5hcHAuQXBwbGljYXRpb24gaXMgYWxsb3dlZCIpfXNhcC51aS5nZXRBcHBsaWNhdGlvbj1xLnByb3h5KHRoaXMuX2dldEluc3RhbmNlLHRoaXMpO3NhcC51aS5nZXRDb3JlKCkuYXR0YWNoSW5pdChxLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5faW5pdFJvb3RDb21wb25lbnQoKTt0aGlzLm1haW4oKX0sdGhpcykpfSxfaW5pdFJvb3RDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgcj10aGlzLmNyZWF0ZVJvb3RDb21wb25lbnQoKTtpZihyKXt0aGlzLnNldFJvb3RDb21wb25lbnQocik7dmFyIGM9bmV3IHNhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lcih7Y29tcG9uZW50OnJ9KTtjLnBsYWNlQXQodGhpcy5nZXRSb290KCl8fGRvY3VtZW50LmJvZHkpfX0sY3JlYXRlUm9vdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciByPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRSb290Q29tcG9uZW50KCk7dmFyIFI7aWYocil7Uj1zYXAudWkuY29tcG9uZW50KHtuYW1lOnJ9KX1yZXR1cm4gUn0sZ2V0VmlldzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFJvb3RDb21wb25lbnQoKX0sX2dldEluc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LG1haW46ZnVuY3Rpb24oKXt9LG9uQmVmb3JlRXhpdDpmdW5jdGlvbigpe30sb25FeGl0OmZ1bmN0aW9uKCl7fSxvbkVycm9yOm51bGwsc2V0Q29uZmlnOmZ1bmN0aW9uKGMpe2lmKHR5cGVvZiBjPT09InN0cmluZyIpe3ZhciB1PWM7dmFyIGM9bmV3IHNhcC51aS5tb2RlbC5qc29uLkpTT05Nb2RlbCgpO3ZhciByPXEuc2FwLnNqYXgoe3VybDp1LGRhdGFUeXBlOidqc29uJ30pO2lmKHIuc3VjY2Vzcyl7Yy5zZXREYXRhKHIuZGF0YSl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBsb2FkIGNvbmZpZyBmaWxlOiAiK3UpfX1pZih0eXBlb2YgYz09PSJvYmplY3QiJiYhYyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Nb2RlbCl7Yz1uZXcgc2FwLnVpLm1vZGVsLkpTT05Nb2RlbChjKX10aGlzLnNldFByb3BlcnR5KCJjb25maWciLGMpfSxkZXN0cm95OmZ1bmN0aW9uKHMpe2RlbGV0ZSBzYXAudWkuZ2V0QXBwbGljYXRpb247Qy5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxBKTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkFwcENhY2hlQnVzdGVyJykpewovKiEKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkFwcENhY2hlQnVzdGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQXBwQ2FjaGVCdXN0ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0NvcmUnLCdzYXAvdWkvdGhpcmRwYXJ0eS9VUkknXSxmdW5jdGlvbihxLEMsVSl7InVzZSBzdHJpY3QiO3ZhciBjPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpO3ZhciBsPWMuZ2V0TGFuZ3VhZ2UoKTt2YXIgcz1jLmdldEFwcENhY2hlQnVzdGVyTW9kZSgpPT09InN5bmMiO3ZhciBiPWMuZ2V0QXBwQ2FjaGVCdXN0ZXJNb2RlKCk9PT0iYmF0Y2giO3ZhciBpPXt9O3ZhciBhPXEuYWpheDt2YXIgST1xLnNhcC5pbmNsdWRlU2NyaXB0O3ZhciBmPXEuc2FwLmluY2x1ZGVTdHlsZVNoZWV0O3ZhciB2PXNhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QucHJvdG90eXBlLnZhbGlkYXRlUHJvcGVydHk7dmFyIEw9ZG9jdW1lbnQubG9jYXRpb24uaHJlZi5yZXBsYWNlKC9cPy4qfCMuKi9nLCIiKTt2YXIgQj1VUkkoIi4vIikuYWJzb2x1dGVUbyhMKTt2YXIgQT1CLnRvU3RyaW5nKCk7dmFyIHU9VVJJKHEuc2FwLmdldE1vZHVsZVBhdGgoIiIsIi8uLi8iKSk7dmFyIG89dS50b1N0cmluZygpO2lmKHUuaXMoInJlbGF0aXZlIikpe3U9dS5hYnNvbHV0ZVRvKEwpfXZhciBkPXUubm9ybWFsaXplKCkudG9TdHJpbmcoKTt2YXIgcj1VUkkoInJlc291cmNlcyIpLmFic29sdXRlVG8oZCkudG9TdHJpbmcoKTt2YXIgRj1uZXcgUmVnRXhwKCJeIitxLnNhcC5lc2NhcGVSZWdFeHAocikpO3ZhciBFPWZ1bmN0aW9uKGUpe2lmKGUubGVuZ3RoPjAmJmUuc2xpY2UoLTEpIT09Ii8iKXtlKz0iLyJ9cmV0dXJuIGV9O3ZhciBSPWZ1bmN0aW9uKGQsUyl7dmFyIGU7aWYocS5pc0FycmF5KGQpJiYhYil7cS5lYWNoKGQsZnVuY3Rpb24oeCx5KXtSKHksUyl9KX1lbHNlIGlmKHEuaXNBcnJheShkKSYmYil7dmFyIGg9RShkWzBdKTt2YXIgaj1bXTtxLnNhcC5sb2cuZGVidWcoInNhcC51aS5jb3JlLkFwcENhY2hlQnVzdGVyLnJlZ2lzdGVyKFwiIitoKyJcIik7IC8vIEJBVENIIE1PREUhIik7dmFyIGs9Zy5ub3JtYWxpemVVUkwoaCk7cS5zYXAubG9nLmRlYnVnKCIgIC0tPiBub3JtYWxpemVkIHRvOiBcIiIraysiXCIiKTtxLmVhY2goZCxmdW5jdGlvbih4LHkpe3ZhciBtPUUoeSk7dmFyIHo9Zy5ub3JtYWxpemVVUkwobSk7aWYoIWlbbl0pe2oucHVzaCh6KX19KTtpZihqLmxlbmd0aD4wKXt2YXIgbT1rKyJzYXAtdWktY2FjaGVidXN0ZXItaW5mby5qc29uP3NhcC11aS1sYW5ndWFnZT0iK2w7ZT17dXJsOm0sdHlwZToiUE9TVCIsYXN5bmM6IXMmJiEhUyxkYXRhVHlwZToianNvbiIsY29udGVudFR5cGU6InRleHQvcGxhaW4iLGRhdGE6ai5qb2luKCJcbiIpLHN1Y2Nlc3M6ZnVuY3Rpb24oeCl7cS5leHRlbmQoaSx4KX0sZXJyb3I6ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZXJyb3IoIkZhaWxlZCB0byBiYXRjaCBsb2FkIEFwcENhY2hlQnVzdGVyIGluZGV4IGZpbGUgZnJvbTogXCIiK20rIlwiLiIpfX19fWVsc2V7ZD1FKGQpO3Euc2FwLmxvZy5kZWJ1Zygic2FwLnVpLmNvcmUuQXBwQ2FjaGVCdXN0ZXIucmVnaXN0ZXIoXCIiK2QrIlwiKTsiKTt2YXIgbj1nLm5vcm1hbGl6ZVVSTChkKTtxLnNhcC5sb2cuZGVidWcoIiAgLS0+IG5vcm1hbGl6ZWQgdG86IFwiIituKyJcIiIpO2lmKCFpW25dKXt2YXIgbT1uKyJzYXAtdWktY2FjaGVidXN0ZXItaW5mby5qc29uP3NhcC11aS1sYW5ndWFnZT0iK2w7ZT17dXJsOm0sYXN5bmM6IXMmJiEhUyxkYXRhVHlwZToianNvbiIsc3VjY2VzczpmdW5jdGlvbih4KXtpW25dPXh9LGVycm9yOmZ1bmN0aW9uKCl7cS5zYXAubG9nLmVycm9yKCJGYWlsZWQgdG8gbG9hZCBBcHBDYWNoZUJ1c3RlciBpbmRleCBmaWxlIGZyb206IFwiIittKyJcIi4iKX19fX1pZihlKXtpZihlLmFzeW5jKXt2YXIgcD1TLnN0YXJ0VGFzaygibG9hZCAiK20pO3ZhciB0PWUuc3VjY2Vzcyx3PWUuZXJyb3I7cS5leHRlbmQoZSx7c3VjY2VzczpmdW5jdGlvbih4KXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtTLmZpbmlzaFRhc2socCl9LGVycm9yOmZ1bmN0aW9uKCl7dy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Uy5maW5pc2hUYXNrKHAsZmFsc2UpfX0pfXEuc2FwLmxvZy5pbmZvKCJMb2FkaW5nIEFwcENhY2hlQnVzdGVyIGluZGV4IGZpbGUgZnJvbTogXCIiK20rIlwiLiIpO3EuYWpheChlKX19O3ZhciBnPXtib290OmZ1bmN0aW9uKFMpe3ZhciBlPWMuZ2V0QXBwQ2FjaGVCdXN0ZXIoKTtpZihlJiZlLmxlbmd0aD4wKXtlPWUuc2xpY2UoKTt2YXIgaD10cnVlO3ZhciBWPVN0cmluZyhlWzBdKS50b0xvd2VyQ2FzZSgpO2lmKGUubGVuZ3RoPT09MSl7aWYoVj09PSJ0cnVlInx8Vj09PSJ4Iil7dmFyIHU9VVJJKG8pO2U9dS5pcygicmVsYXRpdmUiKT9bdS50b1N0cmluZygpXTpbXX1lbHNlIGlmKFY9PT0iZmFsc2UiKXtoPWZhbHNlfX1pZihoKXtnLmluaXQoKTtSKGUsUyl9fX0saW5pdDpmdW5jdGlvbigpe3ZhciBoPWcuY29udmVydFVSTDt2YXIgbj1nLm5vcm1hbGl6ZVVSTDt2YXIgaj1mdW5jdGlvbihlKXtpZihlJiZ0eXBlb2YoZSk9PT0ic3RyaW5nIil7ZT1uKGUpO3JldHVybiFlLm1hdGNoKEYpfXJldHVybiBmYWxzZX07cS5hamF4PWZ1bmN0aW9uKGUsayl7aWYoZSYmZS51cmwmJmooZS51cmwpKXtlLnVybD1oKGUudXJsKX1yZXR1cm4gYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3Euc2FwLmluY2x1ZGVTY3JpcHQ9ZnVuY3Rpb24oZSxrKXt2YXIgbT1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTtpZihqKG1bMF0pKXttWzBdPWgobVswXSl9cmV0dXJuIEkuYXBwbHkodGhpcyxtKX07cS5zYXAuaW5jbHVkZVN0eWxlU2hlZXQ9ZnVuY3Rpb24oZSxrKXt2YXIgbT1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTtpZihqKG1bMF0pKXttWzBdPWgobVswXSl9cmV0dXJuIGYuYXBwbHkodGhpcyxtKX07c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5wcm90b3R5cGUudmFsaWRhdGVQcm9wZXJ0eT1mdW5jdGlvbihwLFYpe3ZhciBtPXRoaXMuZ2V0TWV0YWRhdGEoKSxQPW0uZ2V0QWxsUHJvcGVydGllcygpW3BdLGs7aWYoUCYmUC50eXBlPT09InNhcC51aS5jb3JlLlVSSSIpe2s9QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7dHJ5e2lmKGooa1sxXSkpe2tbMV09aChrWzFdKX19Y2F0Y2goZSl7fX1yZXR1cm4gdi5hcHBseSh0aGlzLGt8fGFyZ3VtZW50cyl9fSxleGl0OmZ1bmN0aW9uKCl7cS5hamF4PWE7cS5zYXAuaW5jbHVkZVNjcmlwdD1JO3Euc2FwLmluY2x1ZGVTdHlsZVNoZWV0PWY7c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5wcm90b3R5cGUudmFsaWRhdGVQcm9wZXJ0eT12O2k9e319LHJlZ2lzdGVyOmZ1bmN0aW9uKGQpe1IoZCl9LGNvbnZlcnRVUkw6ZnVuY3Rpb24oZSl7cS5zYXAubG9nLmRlYnVnKCJzYXAudWkuY29yZS5BcHBDYWNoZUJ1c3Rlci5jb252ZXJ0VVJMKFwiIitlKyJcIik7Iik7aWYoaSYmZSl7dmFyIG49Zy5ub3JtYWxpemVVUkwoZSk7cS5zYXAubG9nLmRlYnVnKCIgIC0tPiBub3JtYWxpemVkIHRvOiBcIiIrbisiXCIiKTtpZihuJiZnLmhhbmRsZVVSTChuKSl7cS5lYWNoKGksZnVuY3Rpb24oZCxtKXt2YXIgaDtpZihkJiZuLmxlbmd0aD49ZC5sZW5ndGgmJm4uc2xpY2UoMCxkLmxlbmd0aCk9PT1kKXtoPW4uc2xpY2UoZC5sZW5ndGgpO2lmKG1baF0pe2U9ZCsifiIrbVtoXSsifi8iK2g7cS5zYXAubG9nLmRlYnVnKCIgID09PiByZXR1cm4gXCIiK2UrIlwiOyIpO3JldHVybiBmYWxzZX19fSl9fXJldHVybiBlfSxub3JtYWxpemVVUkw6ZnVuY3Rpb24oZSl7dmFyIHU9VVJJKGV8fCIuLyIpO2lmKHUuaXMoInJlbGF0aXZlIikpe3U9dS5hYnNvbHV0ZVRvKEwpfXJldHVybiB1Lm5vcm1hbGl6ZVByb3RvY29sKCkubm9ybWFsaXplSG9zdG5hbWUoKS5ub3JtYWxpemVQb3J0KCkubm9ybWFsaXplUGF0aCgpLnRvU3RyaW5nKCl9LGhhbmRsZVVSTDpmdW5jdGlvbihlKXtyZXR1cm4gdHJ1ZX19O3JldHVybiBnfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ3VzdG9taXppbmdDb25maWd1cmF0aW9uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Db3JlJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIGE9InNhcC51aS52aWV3UmVwbGFjZW1lbnRzIixiPSJzYXAudWkudmlld0V4dGVuc2lvbnMiLGM9InNhcC51aS52aWV3TW9kaWZpY2F0aW9ucyIsZD0ic2FwLnVpLmNvbnRyb2xsZXJFeHRlbnNpb25zIjt2YXIgbT17fTtmdW5jdGlvbiBmKHQsZyl7cS5lYWNoKG0sZnVuY3Rpb24obixvKXtpZihvJiZvW3RdKXtpZihnKG9bdF0pKXtyZXR1cm4gZmFsc2V9fX0pfTt2YXIgZT17bG9nOmZ1bmN0aW9uKCl7aWYod2luZG93LmNvbnNvbGUpe3dpbmRvdy5jb25zb2xlLmxvZyhtKX19LGFjdGl2YXRlRm9yQ29tcG9uZW50OmZ1bmN0aW9uKHMpe3Euc2FwLmxvZy5pbmZvKCJDdXN0b21pemluZ0NvbmZpZ3VyYXRpb246IGFjdGl2YXRlRm9yQ29tcG9uZW50KCciK3MrIicpIik7dmFyIEY9cysiLkNvbXBvbmVudCI7cS5zYXAucmVxdWlyZShGKTt2YXIgbz1xLnNhcC5nZXRPYmplY3QoRikuZ2V0TWV0YWRhdGEoKS5nZXRDdXN0b21pemluZygpO21bc109b30sZGVhY3RpdmF0ZUZvckNvbXBvbmVudDpmdW5jdGlvbihzKXtxLnNhcC5sb2cuaW5mbygiQ3VzdG9taXppbmdDb25maWd1cmF0aW9uOiBkZWFjdGl2YXRlRm9yQ29tcG9uZW50KCciK3MrIicpIik7ZGVsZXRlIG1bc119LGdldFZpZXdSZXBsYWNlbWVudDpmdW5jdGlvbih2KXt2YXIgcj11bmRlZmluZWQ7ZihhLGZ1bmN0aW9uKG8pe3I9b1t2XTtyZXR1cm4hIXJ9KTtyZXR1cm4gcn0sZ2V0Vmlld0V4dGVuc2lvbjpmdW5jdGlvbih2LEUpe3ZhciByPXVuZGVmaW5lZDtmKGIsZnVuY3Rpb24obyl7cj1vW3ZdJiZvW3ZdW0VdO3JldHVybiEhcn0pO3JldHVybiByfSxnZXRDb250cm9sbGVyRXh0ZW5zaW9uOmZ1bmN0aW9uKHMpe3ZhciByPXVuZGVmaW5lZDtmKGQsZnVuY3Rpb24obyl7cj1vW3NdO3JldHVybiEhcn0pO3JldHVybiByfSxnZXRDdXN0b21Qcm9wZXJ0aWVzOmZ1bmN0aW9uKHYscyl7dmFyIFM9e307ZihjLGZ1bmN0aW9uKG8pe3ZhciBnPW9bdl0mJm9bdl1bc107dmFyIHU9e307aWYoZyl7cS5lYWNoKGcsZnVuY3Rpb24obixWKXtpZihuPT09InZpc2libGUiKXt1W25dPVY7cS5zYXAubG9nLmluZm8oIkN1c3RvbWl6aW5nOiBjdXN0b20gdmFsdWUgZm9yIHByb3BlcnR5ICciK24rIicgb2YgY29udHJvbCAnIitzKyInIGluIFZpZXcgJyIrdisiJyBhcHBsaWVkOiAiK1YpfWVsc2V7cS5zYXAubG9nLndhcm5pbmcoIkN1c3RvbWl6aW5nOiBjdXN0b20gdmFsdWUgZm9yIHByb3BlcnR5ICciK24rIicgb2YgY29udHJvbCAnIitzKyInIGluIFZpZXcgJyIrdisiJyBpZ25vcmVkOiBvbmx5IHRoZSAndmlzaWJsZScgcHJvcGVydHkgY2FuIGJlIGN1c3RvbWl6ZWQuIil9fSk7cS5leHRlbmQoUyx1KX19KTtyZXR1cm4gU319O2lmKHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldERpc2FibGVDdXN0b21pemluZygpKXtxLnNhcC5sb2cuaW5mbygiQ3VzdG9taXppbmdDb25maWd1cmF0aW9uOiBkaXNhYmxpbmcgQ3VzdG9taXppbmcgbm93Iik7cS5lYWNoKGUsZnVuY3Rpb24obixBKXtpZih0eXBlb2YgQT09PSJmdW5jdGlvbiIpe2Vbbl09ZnVuY3Rpb24oKXt9fX0pfXJldHVybiBlfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yU3VwcG9ydCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvclN1cHBvcnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Mb2NhbEJ1c3lJbmRpY2F0b3JTdXBwb3J0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9FbGVtZW50J10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIEw9ZnVuY3Rpb24oKXtpZih0aGlzPT09c2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUpe3RoaXMuc2V0RGVsYXk9ZnVuY3Rpb24oZCl7dGhpcy5zZXRCdXN5SW5kaWNhdG9yRGVsYXkoZCl9fWVsc2V7cS5zYXAubG9nLmVycm9yKCJPbmx5IGNvbnRyb2xzIGNhbiB1c2UgdGhlIExvY2FsQnVzeUluZGljYXRvciIsdGhpcyl9fTtyZXR1cm4gTH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlBvcHVwU3VwcG9ydCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlBvcHVwU3VwcG9ydCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1BvcHVwU3VwcG9ydCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRWxlbWVudCddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBQPWZ1bmN0aW9uKCl7dGhpcy5nZXRNZXRhZGF0YSgpLmFkZFB1YmxpY01ldGhvZHMoWyJnZXRQYXJlbnRQb3B1cCIsImlzSW5Qb3B1cCIsImdldFBhcmVudFBvcHVwSWQiLCJhZGRUb1BvcHVwIiwicmVtb3ZlRnJvbVBvcHVwIl0pO3RoaXMuaXNJblBvcHVwPWZ1bmN0aW9uKHQpe3ZhciBwPXRoaXMuZ2V0UGFyZW50UG9wdXAodCk7cmV0dXJuIHAmJnAubGVuZ3RoPjB9O3RoaXMuZ2V0UGFyZW50UG9wdXA9ZnVuY3Rpb24odCl7dmFyIFQ9dD90OnRoaXM7dmFyICQ9cShUIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudD9ULmdldERvbVJlZigpOlQpO3JldHVybiAkLmNsb3Nlc3QoIltkYXRhLXNhcC11aS1wb3B1cF0iKX07dGhpcy5nZXRQYXJlbnRQb3B1cElkPWZ1bmN0aW9uKHQpe3ZhciBwPXRoaXMuZ2V0UGFyZW50UG9wdXAodCk7cmV0dXJuIHAuYXR0cigiZGF0YS1zYXAtdWktcG9wdXAiKX07dGhpcy5hZGRDaGlsZFRvUG9wdXA9ZnVuY3Rpb24ocCxjKXt2YXIgZT0ic2FwLnVpLmNvcmUuUG9wdXAuYWRkRm9jdXNhYmxlQ29udGVudC0iK3A7c2FwLnVpLmdldENvcmUoKS5nZXRFdmVudEJ1cygpLnB1Ymxpc2goInNhcC51aSIsZSx7aWQ6Y30pfTt0aGlzLnJlbW92ZUNoaWxkRnJvbVBvcHVwPWZ1bmN0aW9uKHApe2lmKCFwKXtwPXRoaXMuZ2V0UG9wdXBJZCgpfXZhciBlPSJzYXAudWkuY29yZS5Qb3B1cC5yZW1vdmVGb2N1c2FibGVDb250ZW50LSIrcDtzYXAudWkuZ2V0Q29yZSgpLmdldEV2ZW50QnVzKCkucHVibGlzaCgic2FwLnVpIixlLHtpZDp0aGlzLmdldElkKCl9KX07dGhpcy5jbG9zZVBvcHVwPWZ1bmN0aW9uKHApe3ZhciBlPSJzYXAudWkuY29yZS5Qb3B1cC5jbG9zZVBvcHVwLSIrcDtzYXAudWkuZ2V0Q29yZSgpLmdldEV2ZW50QnVzKCkucHVibGlzaCgic2FwLnVpIixlKX07dGhpcy5pbmNyZWFzZVpJbmRleD1mdW5jdGlvbihwLGkpe3ZhciBlPSJzYXAudWkuY29yZS5Qb3B1cC5pbmNyZWFzZVpJbmRleC0iK3A7c2FwLnVpLmdldENvcmUoKS5nZXRFdmVudEJ1cygpLnB1Ymxpc2goInNhcC51aSIsZSx7aXNGcm9tUGFyZW50UG9wdXA6aT9pOmZhbHNlfSl9fTtyZXR1cm4gUH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLmxpYnJhcnknKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5saWJyYXJ5Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbGlicmFyeSIsWycuL0NvcmUnXSxmdW5jdGlvbigpe3NhcC51aS5nZXRDb3JlKCkuaW5pdExpYnJhcnkoe25hbWU6InNhcC51aS5jb3JlIix0eXBlczpbInNhcC51aS5jb3JlLkFjY2Vzc2libGVSb2xlIiwic2FwLnVpLmNvcmUuQmFyQ29sb3IiLCJzYXAudWkuY29yZS5DU1NDb2xvciIsInNhcC51aS5jb3JlLkNTU1NpemUiLCJzYXAudWkuY29yZS5DU1NTaXplU2hvcnRIYW5kIiwic2FwLnVpLmNvcmUuQ29sbGlzaW9uIiwic2FwLnVpLmNvcmUuRGVzaWduIiwic2FwLnVpLmNvcmUuRG9jayIsInNhcC51aS5jb3JlLkhvcml6b250YWxBbGlnbiIsInNhcC51aS5jb3JlLklEIiwic2FwLnVpLmNvcmUuSWNvbkNvbG9yIiwic2FwLnVpLmNvcmUuSW1lTW9kZSIsInNhcC51aS5jb3JlLk1lc3NhZ2VUeXBlIiwic2FwLnVpLmNvcmUuT3BlblN0YXRlIiwic2FwLnVpLmNvcmUuT3JpZW50YXRpb24iLCJzYXAudWkuY29yZS5QZXJjZW50YWdlIiwic2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uIiwic2FwLnVpLmNvcmUuU2Nyb2xsaW5nIiwic2FwLnVpLmNvcmUuVGV4dEFsaWduIiwic2FwLnVpLmNvcmUuVGV4dERpcmVjdGlvbiIsInNhcC51aS5jb3JlLlRpdGxlTGV2ZWwiLCJzYXAudWkuY29yZS5VUkkiLCJzYXAudWkuY29yZS5WYWx1ZVN0YXRlIiwic2FwLnVpLmNvcmUuVmVydGljYWxBbGlnbiIsInNhcC51aS5jb3JlLldyYXBwaW5nIiwiYW55IiwiYm9vbGVhbiIsImZsb2F0IiwiaW50Iiwic2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlIiwib2JqZWN0Iiwic2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5RGlyZWN0aW9uIiwic3RyaW5nIiwidm9pZCJdLGludGVyZmFjZXM6WyJzYXAudWkuY29yZS5MYWJlbCIsInNhcC51aS5jb3JlLlBvcHVwSW50ZXJmYWNlIiwic2FwLnVpLmNvcmUuVG9vbGJhciJdLGNvbnRyb2xzOlsic2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyIiwic2FwLnVpLmNvcmUuQ29udHJvbCIsInNhcC51aS5jb3JlLkhUTUwiLCJzYXAudWkuY29yZS5JY29uIiwic2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yIiwic2FwLnVpLmNvcmUuU2Nyb2xsQmFyIiwic2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UiLCJzYXAudWkuY29yZS5VSUNvbXBvbmVudCIsInNhcC51aS5jb3JlLm12Yy5IVE1MVmlldyIsInNhcC51aS5jb3JlLm12Yy5KU09OVmlldyIsInNhcC51aS5jb3JlLm12Yy5KU1ZpZXciLCJzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3Iiwic2FwLnVpLmNvcmUubXZjLlZpZXciLCJzYXAudWkuY29yZS5tdmMuWE1MVmlldyIsInNhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudCIsInNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGUiLCJzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbCJdLGVsZW1lbnRzOlsic2FwLnVpLmNvcmUuQ3VzdG9tRGF0YSIsInNhcC51aS5jb3JlLkVsZW1lbnQiLCJzYXAudWkuY29yZS5JdGVtIiwic2FwLnVpLmNvcmUuTGF5b3V0RGF0YSIsInNhcC51aS5jb3JlLkxpc3RJdGVtIiwic2FwLnVpLmNvcmUuTWVzc2FnZSIsInNhcC51aS5jb3JlLlNlcGFyYXRvckl0ZW0iLCJzYXAudWkuY29yZS5UaXRsZSIsInNhcC51aS5jb3JlLlZhcmlhbnRMYXlvdXREYXRhIiwic2FwLnVpLmNvcmUuc2VhcmNoLk9wZW5TZWFyY2hQcm92aWRlciIsInNhcC51aS5jb3JlLnNlYXJjaC5TZWFyY2hQcm92aWRlciIsInNhcC51aS5jb3JlLnRtcGwuRE9NQXR0cmlidXRlIl0sdmVyc2lvbjoiMS4yMi4xMCJ9KTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9BY2Nlc3NpYmxlUm9sZSIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQWNjZXNzaWJsZVJvbGU9e05vbmU6Ik5vbmUiLEFsZXJ0OiJBbGVydCIsQWxlcnREaWFsb2c6IkFsZXJ0RGlhbG9nIixBcHBsaWNhdGlvbjoiQXBwbGljYXRpb24iLEJhbm5lcjoiQmFubmVyIixCdXR0b246IkJ1dHRvbiIsQ2hlY2tib3g6IkNoZWNrYm94IixDb2x1bW5IZWFkZXI6IkNvbHVtbkhlYWRlciIsQ29tYm9ib3g6IkNvbWJvYm94IiwKLyoqCgkgKiBJbmZvcm1hdGlvbiBhYm91dCB0aGUgY29udGVudCBvbiB0aGUgcGFnZS4gRXhhbXBsZXMgYXJlIGZvb3Rub3RlcywgY29weXJpZ2h0cywgb3IgbGlua3MgdG8gcHJpdmFjeSBzdGF0ZW1lbnRzLgoJICogCgkgKiBAcHVibGljCgkgKi8KQ29udGVudEluZm86IkNvbnRlbnRJbmZvIixEZWZpbml0aW9uOiJEZWZpbml0aW9uIixEZXNjcmlwdGlvbjoiRGVzY3JpcHRpb24iLERpYWxvZzoiRGlhbG9nIixEaXJlY3Rvcnk6IkRpcmVjdG9yeSIsRG9jdW1lbnQ6IkRvY3VtZW50IixHcmlkOiJHcmlkIixHcmlkQ2VsbDoiR3JpZENlbGwiLEdyb3VwOiJHcm91cCIsSGVhZGluZzoiSGVhZGluZyIsSW1nOiJJbWciLExpbms6IkxpbmsiLExpc3Q6Ikxpc3QiLExpc3Rib3g6Ikxpc3Rib3giLExpc3RJdGVtOiJMaXN0SXRlbSIsTG9nOiJMb2ciLE1haW46Ik1haW4iLE1hcnF1ZWU6Ik1hcnF1ZWUiLE1lbnU6Ik1lbnUiLE1lbnViYXI6Ik1lbnViYXIiLE1lbnVJdGVtOiJNZW51SXRlbSIsTWVudUl0ZW1DaGVja2JveDoiTWVudUl0ZW1DaGVja2JveCIsTWVudUl0ZW1SYWRpbzoiTWVudUl0ZW1SYWRpbyIsTmF2aWdhdGlvbjoiTmF2aWdhdGlvbiIsTm90ZToiTm90ZSIsT3B0aW9uOiJPcHRpb24iLFByZXNlbnRhdGlvbjoiUHJlc2VudGF0aW9uIixQcm9ncmVzc0JhcjoiUHJvZ3Jlc3NCYXIiLFJhZGlvOiJSYWRpbyIsUmFkaW9Hcm91cDoiUmFkaW9Hcm91cCIsUmVnaW9uOiJSZWdpb24iLFJvdzoiUm93IixSb3dIZWFkZXI6IlJvd0hlYWRlciIsU2VhcmNoOiJTZWFyY2giLFNlY29uZGFyeToiU2Vjb25kYXJ5IixTZWVBbHNvOiJTZWVBbHNvIixTZXBhcmF0b3I6IlNlcGFyYXRvciIsU2xpZGVyOiJTbGlkZXIiLFNwaW5CdXR0b246IlNwaW5CdXR0b24iLFN0YXR1czoiU3RhdHVzIixUYWI6IlRhYiIsVGFibGlzdDoiVGFibGlzdCIsVGFicGFuZWw6IlRhYnBhbmVsIixUZXh0Ym94OiJUZXh0Ym94IixUaW1lcjoiVGltZXIiLFRvb2xiYXI6IlRvb2xiYXIiLFRvb2x0aXA6IlRvb2x0aXAiLFRyZWU6IlRyZWUiLFRyZWVHcmlkOiJUcmVlR3JpZCIsVHJlZUl0ZW06IlRyZWVJdGVtIn07cmV0dXJuIHNhcC51aS5jb3JlLkFjY2Vzc2libGVSb2xlfSx0cnVlKTsKLyohCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBBRyBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIAogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0LgogKi8Kc2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQmFyQ29sb3IiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkJhckNvbG9yPXtORVVUUkFMOiJORVVUUkFMIixQT1NJVElWRToiUE9TSVRJVkUiLENSSVRJQ0FMOiJDUklUSUNBTCIsTkVHQVRJVkU6Ik5FR0FUSVZFIn07cmV0dXJuIHNhcC51aS5jb3JlLkJhckNvbG9yfSx0cnVlKTtzYXAudWkuZGVmaW5lKCdzYXAvdWkvY29yZS9DU1NDb2xvcicsWydzYXAvdWkvYmFzZS9EYXRhVHlwZSddLGZ1bmN0aW9uKEQpe3NhcC51aS5jb3JlLkNTU0NvbG9yPUQuY3JlYXRlVHlwZSgnc2FwLnVpLmNvcmUuQ1NTQ29sb3InLHtpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybi9eKCMoWzAtOWEtZkEtRl17M318WzAtOWEtZkEtRl17Nn0pfHJnYlwoXHMqKCgxP1swLTldP1swLTldfDIoWzAtNF1bMC05XXw1WzAtNV0pKXwoWzAtOV0/WzAtOV0oXC5bMC05XSspP3wxMDAoXC4wKyk/KSUpXHMqKCxccyooKDE/WzAtOV0/WzAtOV18MihbMC00XVswLTldfDVbMC01XSkpfChbMC05XT9bMC05XShcLlswLTldKyk/fDEwMChcLjArKT8pJSlccyopezJ9XCl8cmdiYVwoKFxzKigoMT9bMC05XT9bMC05XXwyKFswLTRdWzAtOV18NVswLTVdKSl8KFswLTldP1swLTldKFwuWzAtOV0rKT98MTAwKFwuMCspPyklKVxzKiwpezN9XHMqKDAoXC5bMC05XSspP3wxKFwuMCspPylccypcKXxoc2xcKFxzKihbMC0yXT9bMC05XT9bMC05XXwzKFswLTVdWzAtOV18NjApKVxzKigsXHMqKChbMC05XT9bMC05XShcLlswLTldKyk/fDEwMChcLjArKT8pJSlccyopezJ9XCl8aHNsYVwoXHMqKFswLTJdP1swLTldP1swLTldfDMoWzAtNV1bMC05XXw2MCkpXHMqLChccyooKFswLTldP1swLTldKFwuWzAtOV0rKT98MTAwKFwuMCspPyklKVxzKiwpezJ9XHMqKDAoXC5bMC05XSspP3wxKFwuMCspPylccypcKXxhbGljZWJsdWV8YW50aXF1ZXdoaXRlfGFxdWF8YXF1YW1hcmluZXxhenVyZXxiZWlnZXxiaXNxdWV8YmxhY2t8YmxhbmNoZWRhbG1vbmR8Ymx1ZXxibHVldmlvbGV0fGJyb3dufGJ1cmx5d29vZHxjYWRldGJsdWV8Y2hhcnRyZXVzZXxjaG9jb2xhdGV8Y29yYWxjb3JuZmxvd2VyYmx1ZXxjb3Juc2lsa3xjcmltc29ufGN5YW58ZGFya2JsdWV8ZGFya2N5YW58ZGFya2dvbGRlbnJvZHxkYXJrZ3JheXxkYXJrZ3JlZW58ZGFya2toYWtpfGRhcmttYWdlbnRhfGRhcmtvbGl2ZWdyZWVufGRhcmtvcmFuZ2V8ZGFya29yY2hpZHxkYXJrcmVkfGRhcmtzYWxtb258ZGFya3NlYWdyZWVufGRhcmtzbGF0ZWJsdWV8ZGFya3NsYXRlZ3JheXxkYXJrdHVycXVvaXNlfGRhcmt2aW9sZXR8ZGVlcHBpbmt8ZGVlcHNreWJsdWV8ZGltZ3JheXxkb2RnZXJibHVlfGZpcmVicmlja3xmbG9yYWx3aGl0ZXxmb3Jlc3RncmVlbnxmdWNoc2lhfGdhaW5zYm9yb3xnaG9zdHdoaXRlfGdvbGR8Z29sZGVucm9kfGdyYXl8Z3JlZW58Z3JlZW55ZWxsb3d8aG9uZXlkZXd8aG90cGlua3xpbmRpYW5yZWR8aW5kaWdvfGl2b3J5fGtoYWtpfGxhdmVuZGVyfGxhdmVuZGVyYmx1c2h8bGF3bmdyZWVufGxlbW9uY2hpZmZvbnxsaWdodGJsdWV8bGlnaHRjb3JhbHxsaWdodGN5YW58bGlnaHRnb2xkZW5yb2R5ZWxsb3d8bGlnaHRncmF5fGxpZ2h0Z3JlZW58bGlnaHRwaW5rfGxpZ2h0c2FsbW9ufGxpZ2h0c2VhZ3JlZW58bGlnaHRza3libHVlfGxpZ2h0c2xhdGVncmF5fGxpZ2h0c3RlZWxibHVlfGxpZ2h0eWVsbG93fGxpbWV8bGltZWdyZWVufGxpbmVufG1hZ2VudGF8bWFyb29ufG1lZGl1bWFxdWFtYXJpbmV8bWVkaXVtYmx1ZXxtZWRpdW1vcmNoaWR8bWVkaXVtcHVycGxlfG1lZGl1bXNlYWdyZWVufG1lZGl1bXNsYXRlYmx1ZXxtZWRpdW1zcHJpbmdncmVlbnxtZWRpdW10dXJxdW9pc2V8bWVkaXVtdmlvbGV0cmVkfG1pZG5pZ2h0Ymx1ZXxtaW50Y3JlYW18bWlzdHlyb3NlfG1vY2Nhc2lufG5hdmFqb3doaXRlfG5hdnl8b2xkbGFjZXxvbGl2ZXxvbGl2ZWRyYWJ8b3JhbmdlfG9yYW5nZXJlZHxvcmNoaWR8cGFsZWdvbGRlbnJvZHxwYWxlZ3JlZW58cGFsZXR1cnF1b2lzZXxwYWxldmlvbGV0cmVkfHBhcGF5YXdoaXB8cGVhY2hwdWZmfHBlcnV8cGlua3xwbHVtfHBvd2RlcmJsdWV8cHVycGxlfHJlZHxyb3N5YnJvd258cm95YWxibHVlfHNhZGRsZWJyb3dufHNhbG1vbnxzYW5keWJyb3dufHNlYWdyZWVufHNlYXNoZWxsfHNpZW5uYXxzaWx2ZXJza3libHVlfHNsYXRlYmx1ZXxzbGF0ZWdyYXl8c25vd3xzcHJpbmdncmVlbnxzdGVlbGJsdWV8dGFufHRlYWx8dGhpc3RsZXx0b21hdG98dHVycXVvaXNlfHZpb2xldHx3aGVhdHx3aGl0ZXx3aGl0ZXNtb2tlfHllbGxvd3x5ZWxsb3dncmVlbnx0cmFuc3BhcmVudHxpbmhlcml0fCkkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLkNTU0NvbG9yfSx0cnVlKTtzYXAudWkuZGVmaW5lKCdzYXAvdWkvY29yZS9DU1NTaXplJyxbJ3NhcC91aS9iYXNlL0RhdGFUeXBlJ10sZnVuY3Rpb24oRCl7c2FwLnVpLmNvcmUuQ1NTU2l6ZT1ELmNyZWF0ZVR5cGUoJ3NhcC51aS5jb3JlLkNTU1NpemUnLHtpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybi9eKGF1dG98aW5oZXJpdHxbLStdPygwKnwoWzAtOV0rfFswLTldKlwuWzAtOV0rKShbclJdW2VFXVttTV18W2VFXVttTV18W2VFXVt4WF18W3BQXVt4WF18W2NDXVttTV18W21NXVttTV18W2lJXVtuTl18W3BQXVt0VF18W3BQXVtjQ118JSkpKSQvLnRlc3Qodil9fSxELmdldFR5cGUoJ3N0cmluZycpKTtyZXR1cm4gc2FwLnVpLmNvcmUuQ1NTU2l6ZX0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvQ1NTU2l6ZVNob3J0SGFuZCcsWydzYXAvdWkvYmFzZS9EYXRhVHlwZSddLGZ1bmN0aW9uKEQpe3NhcC51aS5jb3JlLkNTU1NpemVTaG9ydEhhbmQ9RC5jcmVhdGVUeXBlKCdzYXAudWkuY29yZS5DU1NTaXplU2hvcnRIYW5kJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXihpbmhlcml0fChhdXRvfFstK10/KDAqfChcZCt8XGQqXC5cZCspKFtlRV1bbU1dfFtlRV1beFhdfFtwUF1beFhdfFtjQ11bbU1dfFttTV1bbU1dfFtpSV1bbk5dfFtwUF1bdFRdfFtwUF1bY0NdfCUpKSl7MX0oXHMoYXV0b3xbLStdPygwKnwoXGQrfFxkKlwuXGQrKShbZUVdW21NXXxbZUVdW3hYXXxbcFBdW3hYXXxbY0NdW21NXXxbbU1dW21NXXxbaUldW25OXXxbcFBdW3RUXXxbcFBdW2NDXXwlKSkpKXswLDN9KSQvLnRlc3Qodil9fSxELmdldFR5cGUoJ3N0cmluZycpKTtyZXR1cm4gc2FwLnVpLmNvcmUuQ1NTU2l6ZVNob3J0SGFuZH0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvQ29sbGlzaW9uJyxbJ3NhcC91aS9iYXNlL0RhdGFUeXBlJ10sZnVuY3Rpb24oRCl7c2FwLnVpLmNvcmUuQ29sbGlzaW9uPUQuY3JlYXRlVHlwZSgnc2FwLnVpLmNvcmUuQ29sbGlzaW9uJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXigoZmxpcHxmaXR8bm9uZSkoIChmbGlwfGZpdHxub25lKSk/KSQvLnRlc3Qodil9fSxELmdldFR5cGUoJ3N0cmluZycpKTtyZXR1cm4gc2FwLnVpLmNvcmUuQ29sbGlzaW9ufSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9EZXNpZ24iLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkRlc2lnbj17U3RhbmRhcmQ6IlN0YW5kYXJkIixNb25vc3BhY2U6Ik1vbm9zcGFjZSJ9O3JldHVybiBzYXAudWkuY29yZS5EZXNpZ259LHRydWUpO3NhcC51aS5kZWZpbmUoJ3NhcC91aS9jb3JlL0RvY2snLFsnc2FwL3VpL2Jhc2UvRGF0YVR5cGUnXSxmdW5jdGlvbihEKXtzYXAudWkuY29yZS5Eb2NrPUQuY3JlYXRlVHlwZSgnc2FwLnVpLmNvcmUuRG9jaycse2lzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuL14oKGJlZ2lufGxlZnR8Y2VudGVyfHJpZ2h0fGVuZCkgKHRvcHxjZW50ZXJ8Ym90dG9tKSkkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLkRvY2t9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0hvcml6b250YWxBbGlnbiIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuSG9yaXpvbnRhbEFsaWduPXtCZWdpbjoiQmVnaW4iLEVuZDoiRW5kIixMZWZ0OiJMZWZ0IixSaWdodDoiUmlnaHQiLENlbnRlcjoiQ2VudGVyIn07cmV0dXJuIHNhcC51aS5jb3JlLkhvcml6b250YWxBbGlnbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvSUQnLFsnc2FwL3VpL2Jhc2UvRGF0YVR5cGUnXSxmdW5jdGlvbihEKXtzYXAudWkuY29yZS5JRD1ELmNyZWF0ZVR5cGUoJ3NhcC51aS5jb3JlLklEJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXihbQS1aYS16X11bLUEtWmEtejAtOV8uOl0qKSQvLnRlc3Qodil9fSxELmdldFR5cGUoJ3N0cmluZycpKTtyZXR1cm4gc2FwLnVpLmNvcmUuSUR9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ljb25Db2xvciIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuSWNvbkNvbG9yPXtEZWZhdWx0OiJEZWZhdWx0IixQb3NpdGl2ZToiUG9zaXRpdmUiLE5lZ2F0aXZlOiJOZWdhdGl2ZSIsQ3JpdGljYWw6IkNyaXRpY2FsIixOZXV0cmFsOiJOZXV0cmFsIn07cmV0dXJuIHNhcC51aS5jb3JlLkljb25Db2xvcn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvSW1lTW9kZSIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuSW1lTW9kZT17QXV0bzoiQXV0byIsQWN0aXZlOiJBY3RpdmUiLEluYWN0aXZlOiJJbmFjdGl2ZSIsRGlzYWJsZWQ6IkRpc2FibGVkIn07cmV0dXJuIHNhcC51aS5jb3JlLkltZU1vZGV9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL01lc3NhZ2VUeXBlIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5NZXNzYWdlVHlwZT17SW5mb3JtYXRpb246IkluZm9ybWF0aW9uIixXYXJuaW5nOiJXYXJuaW5nIixFcnJvcjoiRXJyb3IiLE5vbmU6Ik5vbmUiLFN1Y2Nlc3M6IlN1Y2Nlc3MifTtyZXR1cm4gc2FwLnVpLmNvcmUuTWVzc2FnZVR5cGV9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL09wZW5TdGF0ZSIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuT3BlblN0YXRlPXtPUEVOOiJPUEVOIixDTE9TRUQ6IkNMT1NFRCIsT1BFTklORzoiT1BFTklORyIsQ0xPU0lORzoiQ0xPU0lORyJ9O3JldHVybiBzYXAudWkuY29yZS5PcGVuU3RhdGV9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL09yaWVudGF0aW9uIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5PcmllbnRhdGlvbj17SG9yaXpvbnRhbDoiSG9yaXpvbnRhbCIsVmVydGljYWw6IlZlcnRpY2FsIn07cmV0dXJuIHNhcC51aS5jb3JlLk9yaWVudGF0aW9ufSx0cnVlKTtzYXAudWkuZGVmaW5lKCdzYXAvdWkvY29yZS9QZXJjZW50YWdlJyxbJ3NhcC91aS9iYXNlL0RhdGFUeXBlJ10sZnVuY3Rpb24oRCl7c2FwLnVpLmNvcmUuUGVyY2VudGFnZT1ELmNyZWF0ZVR5cGUoJ3NhcC51aS5jb3JlLlBlcmNlbnRhZ2UnLHtpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybi9eKFswLTldWzAtOV0qKFwuWzAtOV0rKT8lKSQvLnRlc3Qodil9fSxELmdldFR5cGUoJ3N0cmluZycpKTtyZXR1cm4gc2FwLnVpLmNvcmUuUGVyY2VudGFnZX0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvU2Nyb2xsQmFyQWN0aW9uIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5TY3JvbGxCYXJBY3Rpb249e1N0ZXA6IlN0ZXAiLFBhZ2U6IlBhZ2UiLE1vdXNlV2hlZWw6Ik1vdXNlV2hlZWwiLERyYWc6IkRyYWcifTtyZXR1cm4gc2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9ufSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9TY3JvbGxpbmciLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLlNjcm9sbGluZz17Tm9uZToiTm9uZSIsQXV0bzoiQXV0byIsU2Nyb2xsOiJTY3JvbGwiLEhpZGRlbjoiSGlkZGVuIn07cmV0dXJuIHNhcC51aS5jb3JlLlNjcm9sbGluZ30sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVGV4dEFsaWduIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5UZXh0QWxpZ249e0JlZ2luOiJCZWdpbiIsRW5kOiJFbmQiLExlZnQ6IkxlZnQiLFJpZ2h0OiJSaWdodCIsQ2VudGVyOiJDZW50ZXIifTtyZXR1cm4gc2FwLnVpLmNvcmUuVGV4dEFsaWdufSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9UZXh0RGlyZWN0aW9uIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5UZXh0RGlyZWN0aW9uPXtMVFI6IkxUUiIsUlRMOiJSVEwiLEluaGVyaXQ6IkluaGVyaXQifTtyZXR1cm4gc2FwLnVpLmNvcmUuVGV4dERpcmVjdGlvbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVGl0bGVMZXZlbCIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuVGl0bGVMZXZlbD17QXV0bzoiQXV0byIsSDE6IkgxIixIMjoiSDIiLEgzOiJIMyIsSDQ6Ikg0IixINToiSDUiLEg2OiJINiJ9O3JldHVybiBzYXAudWkuY29yZS5UaXRsZUxldmVsfSx0cnVlKTtzYXAudWkuZGVmaW5lKCdzYXAvdWkvY29yZS9VUkknLFsnc2FwL3VpL2Jhc2UvRGF0YVR5cGUnXSxmdW5jdGlvbihEKXtzYXAudWkuY29yZS5VUkk9RC5jcmVhdGVUeXBlKCdzYXAudWkuY29yZS5VUkknLHtpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybi9eKCgoW146XC8/I10rKTopPyhcL1wvKFteXC8/I10qKSk/KFtePyNdKikoXD8oW14jXSopKT8oIyguKikpPykkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLlVSSX0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVmFsdWVTdGF0ZSIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuVmFsdWVTdGF0ZT17RXJyb3I6IkVycm9yIixXYXJuaW5nOiJXYXJuaW5nIixTdWNjZXNzOiJTdWNjZXNzIixOb25lOiJOb25lIn07cmV0dXJuIHNhcC51aS5jb3JlLlZhbHVlU3RhdGV9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1ZlcnRpY2FsQWxpZ24iLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLlZlcnRpY2FsQWxpZ249e0JvdHRvbToiQm90dG9tIixNaWRkbGU6Ik1pZGRsZSIsVG9wOiJUb3AiLEluaGVyaXQ6IkluaGVyaXQifTtyZXR1cm4gc2FwLnVpLmNvcmUuVmVydGljYWxBbGlnbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvV3JhcHBpbmciLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLldyYXBwaW5nPXtOb25lOiJOb25lIixTb2Z0OiJTb2Z0IixIYXJkOiJIYXJkIixPZmY6Ik9mZiJ9O3JldHVybiBzYXAudWkuY29yZS5XcmFwcGluZ30sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL1ZpZXdUeXBlIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5tdmMuVmlld1R5cGU9e0pTT046IkpTT04iLFhNTDoiWE1MIixIVE1MOiJIVE1MIixKUzoiSlMiLFRlbXBsYXRlOiJUZW1wbGF0ZSJ9O3JldHVybiBzYXAudWkuY29yZS5tdmMuVmlld1R5cGV9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3JvdXRpbmcvSGlzdG9yeURpcmVjdGlvbiIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5RGlyZWN0aW9uPXtGb3J3YXJkczoiRm9yd2FyZHMiLEJhY2t3YXJkczoiQmFja3dhcmRzIixOZXdFbnRyeToiTmV3RW50cnkiLFVua25vd246IlVua25vd24ifTtyZXR1cm4gc2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5RGlyZWN0aW9ufSx0cnVlKTsoZnVuY3Rpb24oKXt2YXIgbD1zYXAudWkubGF6eVJlcXVpcmU7ZnVuY3Rpb24gZShwLGMscyl7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe2lmKHMpe2wocyxjW2ldLnRvTG93ZXJDYXNlKCkscCtjW2ldKX1lbHNle2wocCtjW2ldLCJuZXcgZXh0ZW5kIGdldE1ldGFkYXRhIil9fX1sKCJzYXAudWkuY29yZS5CdXN5SW5kaWNhdG9yIiwic2hvdyBoaWRlIGF0dGFjaE9wZW4gZGV0YWNoT3BlbiBhdHRhY2hDbG9zZSBkZXRhY2hDbG9zZSIpO2woInNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGUiLCJyZWdpc3RlclR5cGUgdW5yZWdpc3RlclR5cGUiKTtsKCJzYXAudWkuY29yZS5GcmFnbWVudCIsInJlZ2lzdGVyVHlwZSIpO2woInNhcC51aSIsInhtbGZyYWdtZW50Iiwic2FwLnVpLmNvcmUuRnJhZ21lbnQiKTtsKCJzYXAudWkiLCJqc2ZyYWdtZW50Iiwic2FwLnVpLmNvcmUuRnJhZ21lbnQiKTtsKCJzYXAudWkiLCJodG1sZnJhZ21lbnQiLCJzYXAudWkuY29yZS5GcmFnbWVudCIpO2UoInNhcC51aS5tb2RlbC4iLFsiRmlsdGVyIiwiU29ydGVyIiwianNvbi5KU09OTW9kZWwiLCJyZXNvdXJjZS5SZXNvdXJjZU1vZGVsIiwib2RhdGEuT0RhdGFNb2RlbCIsInhtbC5YTUxNb2RlbCJdKTtlKCJzYXAudWkubW9kZWwudHlwZS4iLFsiQm9vbGVhbiIsIkludGVnZXIiLCJGbG9hdCIsIlN0cmluZyIsIkRhdGUiLCJUaW1lIiwiRGF0ZVRpbWUiXSk7ZSgic2FwLnVpLmNvcmUuIixbIkxvY2FsZSIsIkxvY2FsZURhdGEiLCJtdmMuQ29udHJvbGxlciJdKTtlKCJzYXAudWkuY29yZS5tdmMuIixbIkNvbnRyb2xsZXIiLCJWaWV3IiwiSlNWaWV3IiwiSlNPTlZpZXciLCJYTUxWaWV3IiwiSFRNTFZpZXciLCJUZW1wbGF0ZVZpZXciXSwic2FwLnVpIik7ZSgic2FwLnVpLmNvcmUuIixbIkNvbXBvbmVudCJdLCJzYXAudWkiKTtlKCJzYXAudWkuY29yZS50bXBsLiIsWyJUZW1wbGF0ZSJdLCJzYXAudWkiKX0oKSl9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUucGx1Z2luLlRlbXBsYXRpbmdTdXBwb3J0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUucGx1Z2luLlRlbXBsYXRpbmdTdXBwb3J0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvcGx1Z2luL1RlbXBsYXRpbmdTdXBwb3J0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvQ29yZScsJ3NhcC91aS9jb3JlL3RtcGwvVGVtcGxhdGUnXSxmdW5jdGlvbihxLEMsVCl7InVzZSBzdHJpY3QiO3ZhciBhPWZ1bmN0aW9uKCl7fTthLnByb3RvdHlwZS5zdGFydFBsdWdpbj1mdW5jdGlvbihjLG8pe3Euc2FwLmxvZy5pbmZvKCJTdGFydGluZyBUZW1wbGF0aW5nU3VwcG9ydCBwbHVnaW4uIik7dGhpcy5vQ29yZT1jO3NhcC51aS50ZW1wbGF0ZSgpfTthLnByb3RvdHlwZS5zdG9wUGx1Z2luPWZ1bmN0aW9uKCl7cS5zYXAubG9nLmluZm8oIlN0b3BwaW5nIFRlbXBsYXRpbmdTdXBwb3J0IHBsdWdpbi4iKTt0aGlzLm9Db3JlPW51bGx9OyhmdW5jdGlvbigpe3ZhciB0PW5ldyBhKCk7c2FwLnVpLmdldENvcmUoKS5yZWdpc3RlclBsdWdpbih0KX0oKSk7cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9zZWFyY2gvU2VhcmNoUHJvdmlkZXIiLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJ3NhcC91aS9jb3JlL0VsZW1lbnQnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5FbGVtZW50LmV4dGVuZCgic2FwLnVpLmNvcmUuc2VhcmNoLlNlYXJjaFByb3ZpZGVyIix7bWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJzdWdnZXN0Il0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJpY29uIjp7dHlwZToic3RyaW5nIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOm51bGx9fX19KTtzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXIucHJvdG90eXBlLnN1Z2dlc3Q9ZnVuY3Rpb24odixjKXtqUXVlcnkuc2FwLmxvZy53YXJuaW5nKCJzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXIgaXMgdGhlIGFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGFsbCBTZWFyY2hQcm92aWRlcnMuIERvIG5vdCBjcmVhdGUgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MsIGJ1dCB1c2UgYSBjb25jcmV0ZSBzdWIgY2xhc3MgaW5zdGVhZC4iKX07cmV0dXJuIHNhcC51aS5jb3JlLnNlYXJjaC5TZWFyY2hQcm92aWRlcn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3RoZW1pbmcvUGFyYW1ldGVycyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL0NvcmUnXSxmdW5jdGlvbihxLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgUD17fTt2YXIgcD1udWxsO3ZhciB0PW51bGw7ZnVuY3Rpb24gcigpe3A9bnVsbH1mdW5jdGlvbiBsKHUpe3ZhciBSLG87dT11LnJlcGxhY2UoL1wvbGlicmFyeShbXlwvLl0qKVwuKD86Y3NzfGxlc3MpKCR8Wz8jXSkvLGZ1bmN0aW9uKCQsYSxiKXtyZXR1cm4iL2xpYnJhcnktcGFyYW1ldGVycy5qc29uIisoYj9iOiIiKX0pO1I9cS5zYXAuc2pheCh7dXJsOnUsZGF0YVR5cGU6J2pzb24nfSk7aWYoUi5zdWNjZXNzKXtvPSh0eXBlb2YgUi5kYXRhPT0ic3RyaW5nIik/cS5wYXJzZUpTT04oUi5kYXRhKTpSLmRhdGE7aWYocS5pc0FycmF5KG8pKXtmb3IodmFyIGo9MDtqPG8ubGVuZ3RoO2orKyl7cD1xLmV4dGVuZChwLG9bal0pfX1lbHNle3A9cS5leHRlbmQocCxvKX19ZWxzZXtxLnNhcC5sb2cud2FybmluZygiQ291bGQgbm90IGxvYWQgdGhlbWUgcGFyYW1ldGVycyBmcm9tOiAiK3UpfX1mdW5jdGlvbiBnKCl7aWYoIXApe3A9e307dD1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRUaGVtZSgpO3EoImxpbmtbaWRePXNhcC11aS10aGVtZS1dIikuZWFjaChmdW5jdGlvbigpe2wodGhpcy5ocmVmKX0pfXJldHVybiBwfVAuX2FkZExpYnJhcnlUaGVtZT1mdW5jdGlvbih1KXtpZihwKXtsKHUpfX07UC5nZXQ9ZnVuY3Rpb24obil7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7cmV0dXJuIGcoKVtuXX1lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PTApe3ZhciBjPXt9O3JldHVybiBxLmV4dGVuZChjLGcoKSl9ZWxzZXtyZXR1cm4gdW5kZWZpbmVkfX07UC5yZXNldD1mdW5jdGlvbigpe3ZhciBvPWFyZ3VtZW50c1swXT09PXRydWU7aWYoIW98fHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFRoZW1lKCkhPT10KXtyKCl9fTtQLl9nZXRUaGVtZUltYWdlPWZ1bmN0aW9uKHMsZil7cz1zfHwic2FwVWlHbG9iYWxMb2dvIjt2YXIgYT1zYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMuZ2V0KHMpO2lmKGEpe3ZhciBtPS91cmxbXHNdKlwoJz8iPyhbXlwnIildKiknPyI/XCkvLmV4ZWMoYSk7aWYobSl7YT1tWzFdfWVsc2UgaWYoYT09PSInJyJ8fGE9PT0ibm9uZSIpe2E9bnVsbH19aWYoISFmJiYhYSl7cmV0dXJuIHNhcC51aS5yZXNvdXJjZSgnc2FwLnVpLmNvcmUnLCd0aGVtZXMvYmFzZS9pbWcvMXgxLmdpZicpfXJldHVybiBhfTtyZXR1cm4gUH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRtcGwuRE9NQXR0cmlidXRlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudG1wbC5ET01BdHRyaWJ1dGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS90bXBsL0RPTUF0dHJpYnV0ZSIsWydzYXAvdWkvY29yZS9saWJyYXJ5Jywnc2FwL3VpL2NvcmUvRWxlbWVudCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkVsZW1lbnQuZXh0ZW5kKCJzYXAudWkuY29yZS50bXBsLkRPTUF0dHJpYnV0ZSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7Im5hbWUiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJEYXRhIixkZWZhdWx0VmFsdWU6bnVsbH0sInZhbHVlIjp7dHlwZToic3RyaW5nIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9fX19KTtzYXAudWkuY29yZS50bXBsLkRPTUF0dHJpYnV0ZS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odil7dGhpcy5zZXRQcm9wZXJ0eSgidmFsdWUiLHYsdHJ1ZSk7dmFyIHA9dGhpcy5nZXRQYXJlbnQoKSwkPXAmJnAuJCgpO2lmKCQmJiQubGVuZ3RoPjApeyQuYXR0cih0aGlzLmdldE5hbWUoKSx0aGlzLmdldFByb3BlcnR5KCJ2YWx1ZSIpKX1yZXR1cm4gdGhpc307cmV0dXJuIHNhcC51aS5jb3JlLnRtcGwuRE9NQXR0cmlidXRlfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRDZWxsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRDZWxsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9FeHBvcnRDZWxsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvRWxlbWVudCddLGZ1bmN0aW9uKHEsRSl7J3VzZSBzdHJpY3QnO3ZhciBhPUUuZXh0ZW5kKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydENlbGwnLHttZXRhZGF0YTp7cHJvcGVydGllczp7Y29udGVudDonc3RyaW5nJ319fSk7cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydENvbHVtbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q29sdW1uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9FeHBvcnRDb2x1bW4iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0JywnLi9FeHBvcnRDZWxsJ10sZnVuY3Rpb24ocSxNLEUpeyd1c2Ugc3RyaWN0Jzt2YXIgYT1NLmV4dGVuZCgic2FwLnVpLmNvcmUudXRpbC5FeHBvcnRDb2x1bW4iLHttZXRhZGF0YTp7cHJvcGVydGllczp7bmFtZToic3RyaW5nIn0sYWdncmVnYXRpb25zOnt0ZW1wbGF0ZTp7dHlwZToic2FwLnVpLmNvcmUudXRpbC5FeHBvcnRDZWxsIixtdWx0aXBsZTpmYWxzZX19fX0pO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRSb3cnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydFJvdycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvRXhwb3J0Um93IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJy4vRXhwb3J0Q2VsbCddLGZ1bmN0aW9uKHEsTSxFKXsndXNlIHN0cmljdCc7dmFyIGE9TS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuRXhwb3J0Um93Iix7bWV0YWRhdGE6e2FnZ3JlZ2F0aW9uczp7Y2VsbHM6e3R5cGU6InNhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q2VsbCIsbXVsdGlwbGU6dHJ1ZX19fX0pO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ3VzdG9tRGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkN1c3RvbURhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9DdXN0b21EYXRhIixbJy4vbGlicmFyeScsJy4vRWxlbWVudCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkVsZW1lbnQuZXh0ZW5kKCJzYXAudWkuY29yZS5DdXN0b21EYXRhIix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsia2V5Ijp7dHlwZToic3RyaW5nIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9LCJ2YWx1ZSI6e3R5cGU6ImFueSIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfSwid3JpdGVUb0RvbSI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJEYXRhIixkZWZhdWx0VmFsdWU6ZmFsc2V9fX19KTtzYXAudWkuY29yZS5DdXN0b21EYXRhLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih2KXt0aGlzLnNldFByb3BlcnR5KCJ2YWx1ZSIsdix0cnVlKTt2YXIgYz10aGlzLmdldFBhcmVudCgpO2lmKGMmJmMuZ2V0RG9tUmVmKCkmJnRoaXMuZ2V0V3JpdGVUb0RvbSgpKXt2YXIgaz10aGlzLmdldEtleSgpO2lmKHR5cGVvZiB2PT09InN0cmluZyIpe2lmKChzYXAudWkuY29yZS5JRC5pc1ZhbGlkKGspKSYmKGsuaW5kZXhPZigiOiIpPT0tMSkmJihrLmluZGV4T2YoInNhcC11aSIpIT09MCkpe2MuJCgpLmF0dHIoImRhdGEtIitrLHYpfWVsc2V7alF1ZXJ5LnNhcC5sb2cuZXJyb3IoIkN1c3RvbURhdGEgd2l0aCBrZXkgIitrKyIgc2hvdWxkIGJlIHdyaXR0ZW4gdG8gSFRNTCBvZiAiK2MrIiBidXQgdGhlIGtleSBpcyBub3QgdmFsaWQgKG11c3QgYmUgYSB2YWxpZCBzYXAudWkuY29yZS5JRCB3aXRob3V0IGFueSBjb2xvbiBhbmQgbWF5IG5vdCBzdGFydCB3aXRoICdzYXAtdWknKS4iKX19ZWxzZXtqUXVlcnkuc2FwLmxvZy5lcnJvcigiQ3VzdG9tRGF0YSB3aXRoIGtleSAiK2srIiBzaG91bGQgYmUgd3JpdHRlbiB0byBIVE1MIG9mICIrYysiIGJ1dCB0aGUgdmFsdWUgaXMgbm90IGEgc3RyaW5nLiIpfX1yZXR1cm4gdGhpc307cmV0dXJuIHNhcC51aS5jb3JlLkN1c3RvbURhdGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5FbmFibGVkUHJvcGFnYXRvcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkVuYWJsZWRQcm9wYWdhdG9yJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvRW5hYmxlZFByb3BhZ2F0b3IiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0NvbnRyb2wnXSxmdW5jdGlvbihxLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgRT1mdW5jdGlvbihkLGwpe2lmKCEodGhpcyBpbnN0YW5jZW9mIEMpKXt0aHJvdyBuZXcgRXJyb3IoIkVuYWJsZWRQcm9wYWdhdG9yIG9ubHkgc3VwcG9ydHMgc3ViY2xhc3NlcyBvZiBDb250cm9sIil9aWYoZD09PXVuZGVmaW5lZCl7ZD10cnVlfWZ1bmN0aW9uIGYoYyl7dmFyIHA9Yy5nZXRQYXJlbnQoKTt3aGlsZShwJiYhcC5nZXRFbmFibGVkJiZwLmdldFBhcmVudCl7cD1wLmdldFBhcmVudCgpfXJldHVybiBwfWlmKHRoaXMuZ2V0RW5hYmxlZD09PXVuZGVmaW5lZCl7dGhpcy5nZXRFbmFibGVkPWZ1bmN0aW9uKCl7dmFyIHA9Zih0aGlzKTtyZXR1cm4ocCYmcC5nZXRFbmFibGVkJiYhcC5nZXRFbmFibGVkKCkpP2ZhbHNlOnRoaXMuZ2V0UHJvcGVydHkoImVuYWJsZWQiKX07aWYobCl7dGhpcy5nZXRNZXRhZGF0YSgpLmFkZFByb3BlcnR5KCJFbmFibGVkIix7dHlwZToiYm9vbGVhbiIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6ISFkfSl9dGhpcy5nZXRNZXRhZGF0YSgpLmFkZFByb3BlcnR5KCJlbmFibGVkIix7dHlwZToiYm9vbGVhbiIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6ISFkfSk7dGhpcy5nZXRNZXRhZGF0YSgpLmFkZFB1YmxpY01ldGhvZHMoJ2dldEVuYWJsZWQnKX1lbHNle3ZhciBvPXRoaXMuZ2V0RW5hYmxlZDt0aGlzLmdldEVuYWJsZWQ9ZnVuY3Rpb24oKXt2YXIgcD1mKHRoaXMpO3JldHVybihwJiZwLmdldEVuYWJsZWQmJiFwLmdldEVuYWJsZWQoKSk/ZmFsc2U6by5hcHBseSh0aGlzKX19aWYodGhpcy5zZXRFbmFibGVkPT09dW5kZWZpbmVkKXt0aGlzLnNldEVuYWJsZWQ9ZnVuY3Rpb24oZSl7dGhpcy5zZXRQcm9wZXJ0eSgiZW5hYmxlZCIsZSl9O3RoaXMuZ2V0TWV0YWRhdGEoKS5hZGRQdWJsaWNNZXRob2RzKCdzZXRFbmFibGVkJyl9fTtyZXR1cm4gRX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkhUTUwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5IVE1MJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvSFRNTCIsWycuL2xpYnJhcnknLCcuL0NvbnRyb2wnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUuSFRNTCIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7ImNvbnRlbnQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6bnVsbH0sInByZWZlckRPTSI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6dHJ1ZX0sInNhbml0aXplQ29udGVudCI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6ZmFsc2V9fSxldmVudHM6eyJhZnRlclJlbmRlcmluZyI6e319fX0pO3NhcC51aS5jb3JlLkhUTUwuTV9FVkVOVFM9eydhZnRlclJlbmRlcmluZyc6J2FmdGVyUmVuZGVyaW5nJ307c2FwLnVpLmNvcmUuSFRNTC5wcm90b3R5cGUuZ2V0RG9tUmVmPWZ1bmN0aW9uKHMpe3ZhciBpPXM/dGhpcy5nZXRJZCgpKyItIitzOnRoaXMuZ2V0SWQoKTtyZXR1cm4galF1ZXJ5LnNhcC5kb21CeUlkKCJzYXAtdWktZHVtbXktIitpKXx8alF1ZXJ5LnNhcC5kb21CeUlkKGkpfTtzYXAudWkuY29yZS5IVE1MLnByb3RvdHlwZS5zZXRDb250ZW50PWZ1bmN0aW9uKGMpe2Z1bmN0aW9uIHAocyl7aWYoalF1ZXJ5LnBhcnNlSFRNTCl7dmFyIGE9alF1ZXJ5LnBhcnNlSFRNTChzKTtpZihhKXt2YXIgYj0wLGU9YS5sZW5ndGg7d2hpbGUoYjxlJiZhW2JdLm5vZGVUeXBlIT0xKXtiKyt9d2hpbGUoYjxlJiZhW2UtMV0ubm9kZVR5cGUhPTEpe2UtLX1pZihiPjB8fGU8YS5sZW5ndGgpe2E9YS5zbGljZShiLGUpfXJldHVybiBqUXVlcnkoYSl9fXJldHVybiBqUXVlcnkocyl9aWYodGhpcy5nZXRTYW5pdGl6ZUNvbnRlbnQoKSl7Yz1qUXVlcnkuc2FwLl9zYW5pdGl6ZUhUTUwoYyl9dGhpcy5zZXRQcm9wZXJ0eSgiY29udGVudCIsYyx0cnVlKTtpZih0aGlzLmdldERvbVJlZigpKXt2YXIgJD1wKHRoaXMuZ2V0Q29udGVudCgpKTtqUXVlcnkodGhpcy5nZXREb21SZWYoKSkucmVwbGFjZVdpdGgoJCk7dGhpcy5fcG9zdHByb2Nlc3NOZXdDb250ZW50KCQpfWVsc2V7dGhpcy5pbnZhbGlkYXRlKCl9cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLkhUTUwucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXRQcmVmZXJET00oKSYmdGhpcy5nZXREb21SZWYoKSYmIXNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIuaXNQcmVzZXJ2ZWRDb250ZW50KHRoaXMuZ2V0RG9tUmVmKCkpKXtzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLnByZXNlcnZlQ29udGVudCh0aGlzLmdldERvbVJlZigpLHRydWUsZmFsc2UpfX07c2FwLnVpLmNvcmUuSFRNTC5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe3ZhciAkPWpRdWVyeShqUXVlcnkuc2FwLmRvbUJ5SWQoInNhcC11aS1kdW1teS0iK3RoaXMuZ2V0SWQoKSkpO3ZhciBhPXNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIuZmluZFByZXNlcnZlZENvbnRlbnQodGhpcy5nZXRJZCgpKTt2YXIgYj11bmRlZmluZWQ7dmFyIGk9ZmFsc2U7aWYoKCF0aGlzLmdldFByZWZlckRPTSgpfHxhLnNpemUoKT09MCkpe2EucmVtb3ZlKCk7Yj1uZXcgalF1ZXJ5KHRoaXMuZ2V0Q29udGVudCgpKTskLnJlcGxhY2VXaXRoKGIpfWVsc2UgaWYoYS5zaXplKCk+MCl7JC5yZXBsYWNlV2l0aChhKTtiPWE7aT10cnVlfWVsc2V7JC5yZW1vdmUoKX10aGlzLl9wb3N0cHJvY2Vzc05ld0NvbnRlbnQoYik7dGhpcy5maXJlQWZ0ZXJSZW5kZXJpbmcoe2lzUHJlc2VydmVkRE9NOml9KX07c2FwLnVpLmNvcmUuSFRNTC5wcm90b3R5cGUuX3Bvc3Rwcm9jZXNzTmV3Q29udGVudD1mdW5jdGlvbigkKXtpZigkJiYkLnNpemUoKT4wKXtpZigkLmxlbmd0aD4xKXtqUXVlcnkuc2FwLmxvZy53YXJuaW5nKCJbVW5zdXBwb3J0ZWQgRmVhdHVyZV06ICIrdGhpcysiIGhhcyByZW5kZXJlZCAiKyQubGVuZ3RoKyIgcm9vdCBub2RlcyEiKX1lbHNle3ZhciBjPSQuYXR0cigiaWQiKTtpZihjJiZjIT10aGlzLmdldElkKCkpe2pRdWVyeS5zYXAubG9nLndhcm5pbmcoIltVbnN1cHBvcnRlZCBGZWF0dXJlXTogSWQgb2YgSFRNTCBDb250cm9sICciK3RoaXMuZ2V0SWQoKSsiJyBkb2VzIG5vdCBtYXRjaCB3aXRoIGNvbnRlbnQgaWQgJyIrYysiJyEiKX19c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5tYXJrUHJlc2VydmFibGVDb250ZW50KCQsdGhpcy5nZXRJZCgpKTtpZigkLmZpbmQoIiMiK3RoaXMuZ2V0SWQoKS5yZXBsYWNlKC8oOnxcLikvZywnXFwkMScpKS5sZW5ndGg9PT0wKXskLmZpbHRlcigiOm5vdChbaWRdKSIpLmZpcnN0KCkuYXR0cigiaWQiLHRoaXMuZ2V0SWQoKSl9fWVsc2V7alF1ZXJ5LnNhcC5sb2cuZGVidWcoIiIrdGhpcysiIGlzIGVtcHR5IGFmdGVyIHJlbmRlcmluZywgc2V0dGluZyBiT3V0cHV0IHRvIGZhbHNlIik7dGhpcy5iT3V0cHV0PWZhbHNlfX07c2FwLnVpLmNvcmUuSFRNTC5wcm90b3R5cGUuc2V0RE9NQ29udGVudD1mdW5jdGlvbihkKXt2YXIgJD1qUXVlcnkoZCk7aWYodGhpcy5nZXREb21SZWYoKSl7alF1ZXJ5KHRoaXMuZ2V0RG9tUmVmKCkpLnJlcGxhY2VXaXRoKCQpO3RoaXMuX3Bvc3Rwcm9jZXNzTmV3Q29udGVudCgkKX1lbHNleyQuYXBwZW5kVG8oc2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5nZXRQcmVzZXJ2ZUFyZWFSZWYoKSk7aWYodGhpcy5nZXRVSUFyZWEoKSl7dGhpcy5nZXRVSUFyZWEoKS5pbnZhbGlkYXRlKCl9dGhpcy5fcG9zdHByb2Nlc3NOZXdDb250ZW50KCQpfXJldHVybiB0aGlzfTtzYXAudWkuY29yZS5IVE1MLnByb3RvdHlwZS5zZXRUb29sdGlwPWZ1bmN0aW9uKHQpe2pRdWVyeS5zYXAubG9nLndhcm5pbmcoIlRoZSBzYXAudWkuY29yZS5IVE1MIGNvbnRyb2wgZG9lc24ndCBzdXBwb3J0IHRvb2x0aXBzLiBBZGQgdGhlIHRvb2x0aXAgdG8gdGhlIEhUTUwgY29udGVudCBpbnN0ZWFkLiIpO3JldHVybiBzYXAudWkuY29yZS5Db250cm9sLnByb3RvdHlwZS5zZXRUb29sdGlwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIHNhcC51aS5jb3JlLkhUTUx9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5JY29uJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuSWNvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ljb24iLFsnLi9saWJyYXJ5JywnLi9Db250cm9sJywnLi9JY29uUG9vbCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkNvbnRyb2wuZXh0ZW5kKCJzYXAudWkuY29yZS5JY29uIix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsic3JjIjp7dHlwZToic2FwLnVpLmNvcmUuVVJJIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9LCJzaXplIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJjb2xvciI6e3R5cGU6InNhcC51aS5jb3JlLkNTU0NvbG9yIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJob3ZlckNvbG9yIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTQ29sb3IiLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sImFjdGl2ZUNvbG9yIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTQ29sb3IiLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sIndpZHRoIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJoZWlnaHQiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiRGltZW5zaW9uIixkZWZhdWx0VmFsdWU6bnVsbH0sImJhY2tncm91bmRDb2xvciI6e3R5cGU6InNhcC51aS5jb3JlLkNTU0NvbG9yIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJob3ZlckJhY2tncm91bmRDb2xvciI6e3R5cGU6InNhcC51aS5jb3JlLkNTU0NvbG9yIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJhY3RpdmVCYWNrZ3JvdW5kQ29sb3IiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NDb2xvciIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwidmlzaWJsZSI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6dHJ1ZX0sImRlY29yYXRpdmUiOnt0eXBlOiJib29sZWFuIixncm91cDoiQWNjZXNzaWJpbGl0eSIsZGVmYXVsdFZhbHVlOnRydWV9fSxldmVudHM6eyJwcmVzcyI6e319fX0pO3NhcC51aS5jb3JlLkljb24uTV9FVkVOVFM9eydwcmVzcyc6J3ByZXNzJ307c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe3ZhciBpPXRoaXMuJCgpO2lmKHRoaXMuaGFzTGlzdGVuZXJzKCJwcmVzcyIpKXtpLmNzcygiY3Vyc29yIiwicG9pbnRlciIpfWlmKGkuY3NzKCJjdXJzb3IiKT09PSJhdXRvIil7aS5jc3MoImN1cnNvciIsImRlZmF1bHQiKX19O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9ubW91c2Vkb3duPWZ1bmN0aW9uKGUpe3RoaXMuX2JQcmVzc0ZpcmVkPWZhbHNlO2lmKHRoaXMuaGFzTGlzdGVuZXJzKCJwcmVzcyIpfHx0aGlzLmhhc0xpc3RlbmVycygidGFwIikpe2Uuc2V0TWFya2VkKCl9dmFyIGE9dGhpcy5nZXRBY3RpdmVDb2xvcigpLEE9dGhpcy5nZXRBY3RpdmVCYWNrZ3JvdW5kQ29sb3IoKSxpO2lmKGF8fEEpe2lmKCFlLnRhcmdldFRvdWNoZXN8fChlLnRhcmdldFRvdWNoZXMmJmUudGFyZ2V0VG91Y2hlcy5sZW5ndGg9PT0xKSl7aT10aGlzLiQoKTtpLmFkZENsYXNzKCJzYXBVaUljb25BY3RpdmUiKTtpZihhKXtpLmNzcygiY29sb3IiLGEpfWlmKEEpe2kuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIixBKX19fX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub250b3VjaHN0YXJ0PXNhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9ubW91c2Vkb3duO3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9ubW91c2V1cD1mdW5jdGlvbihlKXtpZighZS50YXJnZXRUb3VjaGVzfHwoZS50YXJnZXRUb3VjaGVzJiZlLnRhcmdldFRvdWNoZXMubGVuZ3RoPT09MCkpe3RoaXMuJCgpLnJlbW92ZUNsYXNzKCJzYXBVaUljb25BY3RpdmUiKTt0aGlzLl9yZXN0b3JlQ29sb3JzKCl9fTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbnRvdWNoZW5kPXNhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9ubW91c2V1cDtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbnRvdWNoY2FuY2VsPXNhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9ubW91c2V1cDtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNlb3Zlcj1mdW5jdGlvbigpe3ZhciBoPXRoaXMuZ2V0SG92ZXJDb2xvcigpLEg9dGhpcy5nZXRIb3ZlckJhY2tncm91bmRDb2xvcigpLGk9dGhpcy4kKCk7aWYoaCl7aS5jc3MoImNvbG9yIixoKX1pZihIKXtpLmNzcygiYmFja2dyb3VuZC1jb2xvciIsSCl9fTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNlb3V0PWZ1bmN0aW9uKCl7dGhpcy5fcmVzdG9yZUNvbG9ycygpfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbmNsaWNrPWZ1bmN0aW9uKCl7aWYodGhpcy5fYlByZXNzRmlyZWQpe3JldHVybn10aGlzLmZpcmVQcmVzcyh7fSk7dGhpcy5fYlByZXNzRmlyZWQ9dHJ1ZX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub250YXA9c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub25jbGljaztzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbmtleWRvd249ZnVuY3Rpb24oZSl7aWYoZS53aGljaD09PWpRdWVyeS5zYXAuS2V5Q29kZXMuU1BBQ0V8fGUud2hpY2g9PT1qUXVlcnkuc2FwLktleUNvZGVzLkVOVEVSKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyIGk9dGhpcy4kKCksYT10aGlzLmdldEFjdGl2ZUNvbG9yKCksQT10aGlzLmdldEFjdGl2ZUJhY2tncm91bmRDb2xvcigpO2kuYWRkQ2xhc3MoInNhcFVpSWNvbkFjdGl2ZSIpO2lmKGEpe2kuY3NzKCJjb2xvciIsYSl9aWYoQSl7aS5jc3MoImJhY2tncm91bmQtY29sb3IiLEEpfX19O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9ua2V5dXA9ZnVuY3Rpb24oZSl7aWYoZS53aGljaD09PWpRdWVyeS5zYXAuS2V5Q29kZXMuU1BBQ0V8fGUud2hpY2g9PT1qUXVlcnkuc2FwLktleUNvZGVzLkVOVEVSKXt0aGlzLiQoKS5yZW1vdmVDbGFzcygic2FwVWlJY29uQWN0aXZlIik7dGhpcy5fcmVzdG9yZUNvbG9ycygpO3RoaXMuZmlyZVByZXNzKHt9KX19O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLl9yZXN0b3JlQ29sb3JzPWZ1bmN0aW9uKCl7dGhpcy4kKCkuY3NzKHsiY29sb3IiOnRoaXMuZ2V0Q29sb3IoKXx8IiIsImJhY2tncm91bmQtY29sb3IiOnRoaXMuZ2V0QmFja2dyb3VuZENvbG9yKCl8fCIifSl9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldFNyYz1mdW5jdGlvbihzKXt2YXIgaT1zYXAudWkuY29yZS5JY29uUG9vbC5nZXRJY29uSW5mbyhzKSx0PXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248OSxJPXRoaXMuJCgpO2lmKGkpe0kuY3NzKCJmb250LWZhbWlseSIsaS5mb250RmFtaWx5KTtpZih0KXtJLnRleHQoaS5jb250ZW50KX1lbHNle0kuYXR0cigiZGF0YS1zYXAtdWktaWNvbi1jb250ZW50IixpLmNvbnRlbnQpfUkudG9nZ2xlQ2xhc3MoInNhcFVpSWNvbk1pcnJvckluUlRMIiwhaS5zdXBwcmVzc01pcnJvcmluZyl9dGhpcy5zZXRQcm9wZXJ0eSgic3JjIixzLCEhaSk7cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldFdpZHRoPWZ1bmN0aW9uKHcpe3RoaXMuc2V0UHJvcGVydHkoIndpZHRoIix3LHRydWUpO3RoaXMuJCgpLmNzcygid2lkdGgiLHcpO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5zZXRIZWlnaHQ9ZnVuY3Rpb24oaCl7dGhpcy5zZXRQcm9wZXJ0eSgiaGVpZ2h0IixoLHRydWUpO3RoaXMuJCgpLmNzcyh7ImhlaWdodCI6aCwibGluZS1oZWlnaHQiOmh9KTtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0U2l6ZT1mdW5jdGlvbihzKXt0aGlzLnNldFByb3BlcnR5KCJzaXplIixzLHRydWUpO3RoaXMuJCgpLmNzcygiZm9udC1zaXplIixzKTtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0Q29sb3I9ZnVuY3Rpb24oYyl7dGhpcy5zZXRQcm9wZXJ0eSgiY29sb3IiLGMsdHJ1ZSk7dGhpcy4kKCkuY3NzKCJjb2xvciIsYyk7cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldEFjdGl2ZUNvbG9yPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLnNldFByb3BlcnR5KCJhY3RpdmVDb2xvciIsYyx0cnVlKX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0SG92ZXJDb2xvcj1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5zZXRQcm9wZXJ0eSgiaG92ZXJDb2xvciIsYyx0cnVlKX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0QmFja2dyb3VuZENvbG9yPWZ1bmN0aW9uKGMpe3RoaXMuc2V0UHJvcGVydHkoImJhY2tncm91bmRDb2xvciIsYyx0cnVlKTt0aGlzLiQoKS5jc3MoImJhY2tncm91bmQtY29sb3IiLGMpO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5zZXRBY3RpdmVCYWNrZ3JvdW5kQ29sb3I9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuc2V0UHJvcGVydHkoImFjdGl2ZUJhY2tncm91bmRDb2xvciIsYyx0cnVlKX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0SG92ZXJCYWNrZ3JvdW5kQ29sb3I9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuc2V0UHJvcGVydHkoImhvdmVyQmFja2dyb3VuZENvbG9yIixjLHRydWUpfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5hdHRhY2hQcmVzcz1mdW5jdGlvbigpe3ZhciBtPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpO20uc3BsaWNlKDAsMCwicHJlc3MiKTt0aGlzLiQoKS5jc3MoImN1cnNvciIsInBvaW50ZXIiKTtyZXR1cm4gc2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUuYXR0YWNoRXZlbnQuYXBwbHkodGhpcyxtKX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuZGV0YWNoUHJlc3M9ZnVuY3Rpb24oKXt2YXIgbT1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTttLnNwbGljZSgwLDAsInByZXNzIik7c2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUuZGV0YWNoRXZlbnQuYXBwbHkodGhpcyxtKTtpZighdGhpcy5oYXNMaXN0ZW5lcnMoInByZXNzIikpe3RoaXMuJCgpLmNzcygiY3Vyc29yIiwiZGVmYXVsdCIpfXJldHVybiB0aGlzfTtyZXR1cm4gc2FwLnVpLmNvcmUuSWNvbn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkl0ZW0nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5JdGVtJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvSXRlbSIsWycuL2xpYnJhcnknLCcuL0VsZW1lbnQnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5FbGVtZW50LmV4dGVuZCgic2FwLnVpLmNvcmUuSXRlbSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InRleHQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6IiJ9LCJlbmFibGVkIjp7dHlwZToiYm9vbGVhbiIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTp0cnVlfSwidGV4dERpcmVjdGlvbiI6e3R5cGU6InNhcC51aS5jb3JlLlRleHREaXJlY3Rpb24iLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6c2FwLnVpLmNvcmUuVGV4dERpcmVjdGlvbi5Jbmhlcml0fSwia2V5Ijp7dHlwZToic3RyaW5nIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9fX19KTtyZXR1cm4gc2FwLnVpLmNvcmUuSXRlbX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkxheW91dERhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5MYXlvdXREYXRhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvTGF5b3V0RGF0YSIsWycuL2xpYnJhcnknLCcuL0VsZW1lbnQnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5FbGVtZW50LmV4dGVuZCgic2FwLnVpLmNvcmUuTGF5b3V0RGF0YSIse21ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUsbGlicmFyeToic2FwLnVpLmNvcmUifX0pO3NhcC51aS5jb3JlLkxheW91dERhdGEucHJvdG90eXBlLmludmFsaWRhdGU9ZnVuY3Rpb24oKXt2YXIgcD10aGlzLmdldFBhcmVudCgpO2lmKHAmJnAuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCk9PSJzYXAudWkuY29yZS5WYXJpYW50TGF5b3V0RGF0YSIpe3A9cC5nZXRQYXJlbnQoKX1pZihwKXt2YXIgbD1wLmdldFBhcmVudCgpO2lmKGwpe3ZhciBlPWpRdWVyeS5FdmVudCgiTGF5b3V0RGF0YUNoYW5nZSIpO2Uuc3JjQ29udHJvbD1wO2wuX2hhbmRsZUV2ZW50KGUpfX19O3NhcC51aS5jb3JlLkxheW91dERhdGEucHJvdG90eXBlLnNldExheW91dERhdGE9ZnVuY3Rpb24obCl7cmV0dXJuIHRoaXN9O3JldHVybiBzYXAudWkuY29yZS5MYXlvdXREYXRhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuTGlzdEl0ZW0nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5MaXN0SXRlbScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0xpc3RJdGVtIixbJy4vbGlicmFyeScsJy4vSXRlbSddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkl0ZW0uZXh0ZW5kKCJzYXAudWkuY29yZS5MaXN0SXRlbSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7Imljb24iOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sImFkZGl0aW9uYWxUZXh0Ijp7dHlwZToic3RyaW5nIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9fX19KTtyZXR1cm4gc2FwLnVpLmNvcmUuTGlzdEl0ZW19LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3InKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3InKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Mb2NhbEJ1c3lJbmRpY2F0b3IiLFsnLi9saWJyYXJ5JywnLi9Db250cm9sJywnLi90aGVtaW5nL1BhcmFtZXRlcnMnLCcuL0xvY2FsQnVzeUluZGljYXRvclJlbmRlcmVyJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvciIse21ldGFkYXRhOntkZXByZWNhdGVkOnRydWUsbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJ3aWR0aCI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6JzEwMHB4J30sImhlaWdodCI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6JzEwMHB4J319fX0pOyhmdW5jdGlvbigpe3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvci5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciByPSJzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3I6Ijt2YXIgcD0ic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JCb3hTaXplIjtwPXNhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycy5nZXQocitwKTt0aGlzLl9pQm94U2l6ZT04O3A9InNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQm94Q29sb3IiO3RoaXMuX3NCb3hDb2xvcj1zYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMuZ2V0KHIrcCk7cD0ic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JCb3hDb2xvckFjdGl2ZSI7dGhpcy5fc0JveENvbG9yQWN0aXZlPXNhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycy5nZXQocitwKTt0aGlzLl9hbmltYXRlUHJveHk9alF1ZXJ5LnByb3h5KGEsdGhpcyl9O3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvci5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9kZWxheWVkQ2FsbElkKTtkZWxldGUgdGhpcy5fZGVsYXllZENhbGxJZH07c2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yLnByb3RvdHlwZS5vblRoZW1lQ2hhbmdlZD1mdW5jdGlvbihlKXtpZih0aGlzLmdldERvbVJlZigpKXt0aGlzLmludmFsaWRhdGUoKX19O3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvci5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe3ZhciB3PXBhcnNlSW50KHRoaXMuZ2V0V2lkdGgoKSwxMCk7dmFyIGg9cGFyc2VJbnQodGhpcy5nZXRIZWlnaHQoKSwxMCk7dmFyICQ9dGhpcy4kKCk7JC5jc3MoIndpZHRoIix3KyJweCIpOyQuY3NzKCJoZWlnaHQiLGgrInB4Iik7dmFyIGI9dGhpcy4kKCJhbmltYXRpb24iKTt2YXIgbD1NYXRoLmZsb29yKHcvMik7bC09TWF0aC5mbG9vcigoNSp0aGlzLl9pQm94U2l6ZSkvMik7dmFyIHQ9TWF0aC5mbG9vcihoLzIpLU1hdGguZmxvb3IodGhpcy5faUJveFNpemUvMik7Yi5jc3MoImxlZnQiLGwrInB4Iik7Yi5jc3MoInRvcCIsdCsicHgiKTtpZighdGhpcy5fJGxlZnQpe3RoaXMuXyRsZWZ0PXRoaXMuJCgibGVmdEJveCIpfWlmKCF0aGlzLl8kbWlkZGxlKXt0aGlzLl8kbWlkZGxlPXRoaXMuJCgibWlkZGxlQm94Iil9aWYoIXRoaXMuXyRyaWdodCl7dGhpcy5fJHJpZ2h0PXRoaXMuJCgicmlnaHRCb3giKX10aGlzLl9kZWxheWVkQ2FsbElkPWpRdWVyeS5zYXAuZGVsYXllZENhbGwoMCx0aGlzLHRoaXMuX2FuaW1hdGVQcm94eSl9O3ZhciBhPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXREb21SZWYoKSl7dmFyIHQ9dGhpczt2YXIgJCxiLGM7dmFyIGQ9IiIsZT0iIjtpZih0Ll8kbGVmdCl7JD10Ll8kbGVmdH1lbHNle3JldHVybn1pZih0Ll8kbWlkZGxlKXtiPXQuXyRtaWRkbGV9ZWxzZXtyZXR1cm59aWYodC5fJHJpZ2h0KXtjPXQuXyRyaWdodH1lbHNle3JldHVybn1pZih0Ll9zQm94Q29sb3Ipe2Q9dC5fc0JveENvbG9yfWVsc2V7cmV0dXJufWlmKHQuX3NCb3hDb2xvckFjdGl2ZSl7ZT10Ll9zQm94Q29sb3JBY3RpdmV9ZWxzZXtyZXR1cm59JC5jc3MoImJhY2tncm91bmQtY29sb3IiLGUpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXskLmNzcygiYmFja2dyb3VuZC1jb2xvciIsZCk7Yi5jc3MoImJhY2tncm91bmQtY29sb3IiLGUpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmNzcygiYmFja2dyb3VuZC1jb2xvciIsZCk7Yy5jc3MoImJhY2tncm91bmQtY29sb3IiLGUpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmNzcygiYmFja2dyb3VuZC1jb2xvciIsZCl9LDE1MCl9LDE1MCl9LDE1MCk7dGhpcy5fZGVsYXllZENhbGxJZD1qUXVlcnkuc2FwLmRlbGF5ZWRDYWxsKDEyMDAsdGhpcyx0aGlzLl9hbmltYXRlUHJveHkpfX19KCkpO3JldHVybiBzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3J9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5NZXNzYWdlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTWVzc2FnZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL01lc3NhZ2UiLFsnLi9saWJyYXJ5JywnLi9FbGVtZW50JywnLi90aGVtaW5nL1BhcmFtZXRlcnMnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5FbGVtZW50LmV4dGVuZCgic2FwLnVpLmNvcmUuTWVzc2FnZSIse21ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiZ2V0RGVmYXVsdEljb24iXSxsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InRleHQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6bnVsbH0sInRpbWVzdGFtcCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTpudWxsfSwiaWNvbiI6e3R5cGU6InNhcC51aS5jb3JlLlVSSSIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTpudWxsfSwibGV2ZWwiOnt0eXBlOiJzYXAudWkuY29yZS5NZXNzYWdlVHlwZSIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTpzYXAudWkuY29yZS5NZXNzYWdlVHlwZS5Ob25lfSwicmVhZE9ubHkiOnt0eXBlOiJib29sZWFuIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOmZhbHNlfX19fSk7c2FwLnVpLmNvcmUuTWVzc2FnZS5wcm90b3R5cGUuZ2V0RGVmYXVsdEljb249ZnVuY3Rpb24ocyl7dmFyIG09alF1ZXJ5LnNhcC5nZXRNb2R1bGVQYXRoKCJzYXAudWkuY29yZSIsJy8nKTt2YXIgdD0idGhlbWVzLyIrc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0VGhlbWUoKTt2YXIgaT0iL2ltZy9tZXNzYWdlLyI7aWYocyYmcz09IjMyeDMyIil7aSs9IjMyeDMyLyJ9ZWxzZXtpKz0iMTZ4MTYvIn12YXIgdT0iIjtzd2l0Y2godGhpcy5nZXRQcm9wZXJ0eSgibGV2ZWwiKSl7Y2FzZSBzYXAudWkuY29yZS5NZXNzYWdlVHlwZS5FcnJvcjp1PW0rdCtpKyJNZXNzYWdlX0ljb25fRXJyb3IucG5nIjticmVhaztjYXNlIHNhcC51aS5jb3JlLk1lc3NhZ2VUeXBlLkluZm9ybWF0aW9uOnU9bSt0K2krIk1lc3NhZ2VfSWNvbl9JbmZvcm1hdGlvbi5wbmciO2JyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUuV2FybmluZzp1PW0rdCtpKyJNZXNzYWdlX0ljb25fV2FybmluZy5wbmciO2JyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUuU3VjY2Vzczp1PW0rdCtpKyJNZXNzYWdlX0ljb25fU3VjY2Vzcy5wbmciO2JyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUuTm9uZTpkZWZhdWx0OnU9dGhpcy5nZXRQcm9wZXJ0eSgiaWNvbiIpO2JyZWFrfXJldHVybiB1fTtzYXAudWkuY29yZS5NZXNzYWdlLnByb3RvdHlwZS5jb21wYXJlQnlUeXBlPWZ1bmN0aW9uKG8pe3NhcC51aS5jb3JlLk1lc3NhZ2UuY29tcGFyZUJ5VHlwZSh0aGlzLG8pfTtzYXAudWkuY29yZS5NZXNzYWdlLmNvbXBhcmVCeVR5cGU9ZnVuY3Rpb24obSxNKXtpZighbSYmIU0pe3JldHVybiAwfWlmKG0mJiFNKXtyZXR1cm4gMX1pZighbSYmTSl7cmV0dXJuLTF9dmFyIGw9bS5nZXRMZXZlbCgpO3ZhciBMPU0uZ2V0TGV2ZWwoKTt2YXIgdD1zYXAudWkuY29yZS5NZXNzYWdlVHlwZTtpZihsPT09TCl7cmV0dXJuIDB9c3dpdGNoKGwpe2Nhc2UgdC5FcnJvcjpyZXR1cm4gMTtjYXNlIHQuV2FybmluZzpyZXR1cm4gTD09PXQuRXJyb3I/LTE6MTtjYXNlIHQuU3VjY2VzczpyZXR1cm4gTD09PXQuRXJyb3J8fEw9PT10Lldhcm5pbmc/LTE6MTtjYXNlIHQuSW5mb3JtYXRpb246cmV0dXJuIEw9PT10Lk5vbmU/MTotMTtjYXNlIHQuTm9uZTpyZXR1cm4tMTtkZWZhdWx0OmpRdWVyeS5zYXAubG9nLmVycm9yKCJDb21wYXJpc29uIGVycm9yIix0aGlzKTtyZXR1cm4gMH19O3JldHVybiBzYXAudWkuY29yZS5NZXNzYWdlfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuUG9wdXAnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Qb3B1cCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1BvcHVwIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJ3NhcC91aS9iYXNlL09iamVjdCcsJy4vQ29udHJvbCcsJy4vSW50ZXJ2YWxUcmlnZ2VyJywnLi9SZW5kZXJNYW5hZ2VyJywnLi9VSUFyZWEnLCcuL1BvcHVwU3VwcG9ydCcsJ2pxdWVyeS5zYXAuc2NyaXB0J10sZnVuY3Rpb24ocSxNLEIsQyxJLFIsVSxQKXsidXNlIHN0cmljdCI7dmFyIGE9TS5leHRlbmQoInNhcC51aS5jb3JlLlBvcHVwIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYyxtLHMsQSl7TS5hcHBseSh0aGlzKTtQLmFwcGx5KHRoaXMpO3RoaXMuX3BvcHVwVUlEPXEuc2FwLnVpZCgpO3RoaXMuYk9wZW49ZmFsc2U7dGhpcy5lT3BlblN0YXRlPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUQ7dGhpcy5fbUZvY3VzRXZlbnRzPXt9O3RoaXMuX21Gb2N1c0V2ZW50c1sic2FwLnVpLmNvcmUuUG9wdXAuYWRkRm9jdXNhYmxlQ29udGVudC0iK3RoaXMuX3BvcHVwVUlEXT10aGlzLl9hZGRGb2N1c2FibGVBcmVhO3RoaXMuX21Gb2N1c0V2ZW50c1sic2FwLnVpLmNvcmUuUG9wdXAucmVtb3ZlRm9jdXNhYmxlQ29udGVudC0iK3RoaXMuX3BvcHVwVUlEXT10aGlzLl9yZW1vdmVGb2N1c2FibGVBcmVhO3RoaXMuX21Gb2N1c0V2ZW50c1sic2FwLnVpLmNvcmUuUG9wdXAuY2xvc2VQb3B1cC0iK3RoaXMuX3BvcHVwVUlEXT10aGlzLl9jbG9zZVBvcHVwO3RoaXMuX21Gb2N1c0V2ZW50c1sic2FwLnVpLmNvcmUuUG9wdXAub25Gb2N1c0V2ZW50LSIrdGhpcy5fcG9wdXBVSURdPXRoaXMub25Gb2N1c0V2ZW50O3RoaXMuX21Gb2N1c0V2ZW50c1sic2FwLnVpLmNvcmUuUG9wdXAuaW5jcmVhc2VaSW5kZXgtIit0aGlzLl9wb3B1cFVJRF09dGhpcy5faW5jcmVhc2VNeVpJbmRleDtpZihjKXt0aGlzLnNldENvbnRlbnQoYyl9dGhpcy5fb0RlZmF1bHRQb3NpdGlvbj17bXk6YS5Eb2NrLkNlbnRlckNlbnRlcixhdDphLkRvY2suQ2VudGVyQ2VudGVyLG9mOmRvY3VtZW50LG9mZnNldDoiMCAwIixjb2xsaXNpb246ImZsaXAifTt0aGlzLl9vUG9zaXRpb249cS5leHRlbmQoe30sdGhpcy5fb0RlZmF1bHRQb3NpdGlvbik7dGhpcy5fYk1vZGFsPSEhbTt0aGlzLl9vUHJldmlvdXNGb2N1cz1udWxsO3RoaXMuX3NJbml0aWFsRm9jdXNJZD1udWxsO3RoaXMuX2JTaGFkb3c9dHlwZW9mKHMpPT09ImJvb2xlYW4iP3M6dHJ1ZTt0aGlzLl9iQXV0b0Nsb3NlPSEhQTt0aGlzLl9hbmltYXRpb25zPXtvcGVuOm51bGwsY2xvc2U6bnVsbH07dGhpcy5fZHVyYXRpb25zPXtvcGVuOiJmYXN0IixjbG9zZToiZmFzdCJ9O3RoaXMuX2laSW5kZXg9LTE7dGhpcy5fb0JsaW5kTGF5ZXI9bnVsbDtpZih0aGlzLnRvdWNoRW5hYmxlZCl7dGhpcy5fZkF1dG9DbG9zZUhhbmRsZXI9ZnVuY3Rpb24oZSl7aWYoZS5pc01hcmtlZCgiZGVsYXllZE1vdXNlRXZlbnQiKXx8ZS5pc01hcmtlZCgiY2FuY2VsQXV0b0Nsb3NlIikpe3JldHVybn1pZih0aGlzLmVPcGVuU3RhdGU9PT1zYXAudWkuY29yZS5PcGVuU3RhdGUuQ0xPU0lOR3x8dGhpcy5lT3BlblN0YXRlPT09c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NFRCl7cmV0dXJufXZhciBkPWUudGFyZ2V0LHA9dGhpcy5fJCgpLmdldCgwKSxiPXEuY29udGFpbnMocCxkKTtpZighYil7dmFyIGY9dGhpcy5nZXRDaGlsZFBvcHVwcygpO2Zvcih2YXIgaT0wLGw9Zi5sZW5ndGg7aTxsO2krKyl7dmFyIEQ9cS5zYXAuZG9tQnlJZChmW2ldKTtpZihxLnNhcC5jb250YWluc09yRXF1YWxzKEQsZCkpe2I9dHJ1ZTticmVha319fWlmKCFiKXt0aGlzLmNsb3NlKCl9fX19LG1ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHVibGljTWV0aG9kczpbIm9wZW4iLCJjbG9zZSIsInNldENvbnRlbnQiLCJnZXRDb250ZW50Iiwic2V0UG9zaXRpb24iLCJzZXRTaGFkb3ciLCJzZXRNb2RhbCIsImdldE1vZGFsIiwic2V0QXV0b0Nsb3NlIiwic2V0QXV0b0Nsb3NlQXJlYXMiLCJpc09wZW4iLCJnZXRBdXRvQ2xvc2UiLCJnZXRPcGVuU3RhdGUiLCJzZXRBbmltYXRpb25zIiwic2V0RHVyYXRpb25zIiwiYXR0YWNoT3BlbmVkIiwiYXR0YWNoQ2xvc2VkIiwiZGV0YWNoT3BlbmVkIiwiZGV0YWNoQ2xvc2VkIl0sYXNzb2NpYXRpb25zOnsiY2hpbGRQb3B1cHMiOnt0eXBlOiJzYXAudWkuY29yZS5Qb3B1cCIsbXVsdGlwbGU6dHJ1ZSx2aXNpYmlsaXR5OiJoaWRkZW4ifX0sZXZlbnRzOnsib3BlbmVkIjp7fSwiY2xvc2VkIjp7fX19fSk7YS5fYWN0aXZhdGVCbGluZExheWVyPXRydWU7YS5ibFN0YWNrPVtdO2EuRG9jaz17QmVnaW5Ub3A6ImJlZ2luIHRvcCIsQmVnaW5DZW50ZXI6ImJlZ2luIGNlbnRlciIsQmVnaW5Cb3R0b206ImJlZ2luIGJvdHRvbSIsTGVmdFRvcDoibGVmdCB0b3AiLExlZnRDZW50ZXI6ImxlZnQgY2VudGVyIixMZWZ0Qm90dG9tOiJsZWZ0IGJvdHRvbSIsQ2VudGVyVG9wOiJjZW50ZXIgdG9wIixDZW50ZXJDZW50ZXI6ImNlbnRlciBjZW50ZXIiLENlbnRlckJvdHRvbToiY2VudGVyIGJvdHRvbSIsUmlnaHRUb3A6InJpZ2h0IHRvcCIsUmlnaHRDZW50ZXI6InJpZ2h0IGNlbnRlciIsUmlnaHRCb3R0b206InJpZ2h0IGJvdHRvbSIsRW5kVG9wOiJlbmQgdG9wIixFbmRDZW50ZXI6ImVuZCBjZW50ZXIiLEVuZEJvdHRvbToiZW5kIGJvdHRvbSJ9O2EucHJvdG90eXBlLnRvdWNoRW5hYmxlZD1zYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2h8fHEuc2FwLnNpbXVsYXRlTW9iaWxlT25EZXNrdG9wO2EucHJvdG90eXBlLnJlc3RvcmVGb2N1cz0hc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoJiYhcS5zYXAuc2ltdWxhdGVNb2JpbGVPbkRlc2t0b3A7Qi5leHRlbmQoInNhcC51aS5jb3JlLlBvcHVwLkxheWVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmdldERvbVN0cmluZygpO3RoaXMuXyRSZWY9cShkKS5hcHBlbmRUbyhzYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKSl9fSk7YS5MYXllci5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihvLHope3RoaXMuXyRSZWYuY3NzKHsidmlzaWJpbGl0eSI6InZpc2libGUiLCJ6LWluZGV4Ijp6fSk7dGhpcy51cGRhdGUobyx6KTt0aGlzLl8kUmVmLmluc2VydEFmdGVyKG8pLnNob3coKX07YS5MYXllci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKG8seil7dmFyIGI9by5yZWN0KCk7dGhpcy5fJFJlZi5jc3MoeyJsZWZ0IjpiLmxlZnQsInRvcCI6Yi50b3B9KTtpZihvLmNzcygicmlnaHQiKSE9ImF1dG8iJiZvLmNzcygicmlnaHQiKSE9ImluaGVyaXQiKXt0aGlzLl8kUmVmLmNzcyh7InJpZ2h0IjpvLmNzcygicmlnaHQiKSwid2lkdGgiOiJhdXRvIn0pfWVsc2V7dGhpcy5fJFJlZi5jc3MoeyJ3aWR0aCI6Yi53aWR0aCwicmlnaHQiOiJhdXRvIn0pfWlmKG8uY3NzKCJib3R0b20iKSE9ImF1dG8iJiZvLmNzcygiYm90dG9tIikhPSJpbmhlcml0Iil7dGhpcy5fJFJlZi5jc3MoeyJib3R0b20iOm8uY3NzKCJib3R0b20iKSwiaGVpZ2h0IjoiYXV0byJ9KX1lbHNle3RoaXMuXyRSZWYuY3NzKHsiaGVpZ2h0IjpiLmhlaWdodCwiYm90dG9tIjoiYXV0byJ9KX1pZih0eXBlb2Yoeik9PT0ibnVtYmVyIil7dGhpcy5fJFJlZi5jc3MoInotaW5kZXgiLHopfX07YS5MYXllci5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl8kUmVmLmhpZGUoKS5jc3MoInZpc2liaWxpdHkiLCJoaWRkZW4iKS5hcHBlbmRUbyhzYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKSl9O2EuTGF5ZXIucHJvdG90eXBlLmdldERvbVN0cmluZz1mdW5jdGlvbigpe3Euc2FwLmxvZy5lcnJvcigic2FwLnVpLmNvcmUuUG9wdXAuTGF5ZXI6IGdldERvbVN0cmluZyBmdW5jdGlvbiBtdXN0IGJlIG92ZXJ3cml0dGVuISIpO3JldHVybiIifTthLkxheWVyLmV4dGVuZCgic2FwLnVpLmNvcmUuUG9wdXAuQmxpbmRMYXllciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7YS5MYXllci5hcHBseSh0aGlzKX19KTthLkJsaW5kTGF5ZXIucHJvdG90eXBlLmdldERvbVN0cmluZz1mdW5jdGlvbigpe3JldHVybiI8ZGl2IGNsYXNzPVwic2FwVWlCbGlMeVwiIGlkPVwic2FwLXVpLWJsaW5kbGF5ZXItIitxLnNhcC51aWQoKSsiXCI+PGlmcmFtZSBzY3JvbGxpbmc9XCJub1wiIHNyYz1cImphdmFzY3JpcHQ6JydcIgl0YWJJbmRleD1cIi0xXCI+PC9pZnJhbWU+PC9kaXY+In07YS5wcm90b3R5cGUub0JsaW5kTGF5ZXJQb29sPW5ldyBzYXAudWkuYmFzZS5PYmplY3RQb29sKGEuQmxpbmRMYXllcik7YS5MYXllci5leHRlbmQoInNhcC51aS5jb3JlLlBvcHVwLlNoaWVsZExheWVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXthLkxheWVyLmFwcGx5KHRoaXMpfX0pO2EuU2hpZWxkTGF5ZXIucHJvdG90eXBlLmdldERvbVN0cmluZz1mdW5jdGlvbigpe3JldHVybiI8ZGl2IGNsYXNzPVwic2FwVWlQb3B1cFNoaWVsZFwiIGlkPVwic2FwLXVpLXNoaWVsZGxheWVyLSIrcS5zYXAudWlkKCkrIlwiPjwvZGl2PiJ9O2EucHJvdG90eXBlLm9TaGllbGRMYXllclBvb2w9bmV3IHNhcC51aS5iYXNlLk9iamVjdFBvb2woYS5TaGllbGRMYXllcik7KGZ1bmN0aW9uKCl7dmFyIGw9MDthLmdldExhc3RaSW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gbH07YS5wcm90b3R5cGUuZ2V0TGFzdFpJbmRleD1mdW5jdGlvbigpe3JldHVybiBhLmdldExhc3RaSW5kZXgoKX07YS5nZXROZXh0WkluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuKGwrPTEwKX07YS5wcm90b3R5cGUuZ2V0TmV4dFpJbmRleD1mdW5jdGlvbigpe3JldHVybiBhLmdldE5leHRaSW5kZXgoKX19KCkpO2EucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oZCxtLGIsbyxjLGYsZyl7aWYodGhpcy5lT3BlblN0YXRlIT1zYXAudWkuY29yZS5PcGVuU3RhdGUuQ0xPU0VEKXtyZXR1cm59dGhpcy5lT3BlblN0YXRlPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5PUEVOSU5HO3ZhciBzO3RyeXtzPXNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpO3M9c2FwLnVpLmdldENvcmUoKS5nZXRVSUFyZWEocyl9Y2F0Y2goZSl7cS5zYXAubG9nLmVycm9yKGUpO3Rocm93IG5ldyBFcnJvcigiUG9wdXAgY2Fubm90IGJlIG9wZW5lZCBiZWNhdXNlIHN0YXRpYyBVSUFyZWEgY2Fubm90IGJlIGRldGVybWluZWQuIil9dGhpcy5fYkNvbnRlbnRBZGRlZFRvU3RhdGljPWZhbHNlO2lmKHRoaXMub0NvbnRlbnQgaW5zdGFuY2VvZiBDJiYhdGhpcy5vQ29udGVudC5nZXRQYXJlbnQoKSl7cy5hZGRDb250ZW50KHRoaXMub0NvbnRlbnQsdHJ1ZSk7dGhpcy5fYkNvbnRlbnRBZGRlZFRvU3RhdGljPXRydWV9aWYodGhpcy5vQ29udGVudC5nZXRVSUFyZWEpe3ZhciBBPXRoaXMub0NvbnRlbnQuZ2V0VUlBcmVhKCk7aWYoQT09PW51bGwpe3Euc2FwLmxvZy53YXJuaW5nKCJUaGUgUG9wdXAgY29udGVudCBpcyBOT1QgY29ubmVjdGVkIHdpdGggYW4gVUlBcmVhIGFuZCBtYXkgbm90IHdvcmsgcHJvcGVybHkhIil9ZWxzZSBpZihhLl9iRW5hYmxlVUlBcmVhQ2hlY2smJkEuZ2V0Um9vdE5vZGUoKS5pZCE9PXMuZ2V0Um9vdE5vZGUoKS5pZCl7cS5zYXAubG9nLndhcm5pbmcoIlRoZSBQb3B1cCBjb250ZW50IGlzIE5PVCBjb25uZWN0ZWQgd2l0aCB0aGUgc3RhdGljLVVJQXJlYSBhbmQgbWF5IG5vdCB3b3JrIHByb3Blcmx5ISIpfX1pZih0eXBlb2YoZCk9PSJzdHJpbmciKXtnPWY7Zj1jO2M9bztvPWI7Yj1tO209ZDtkPS0xfWlmKGQ9PT11bmRlZmluZWQpe2Q9LTF9aWYodGhpcy5yZXN0b3JlRm9jdXMpe3RoaXMuX29QcmV2aW91c0ZvY3VzPWEuZ2V0Q3VycmVudEZvY3VzSW5mbygpfXZhciAkPXRoaXMuXyQodHJ1ZSk7dmFyIGk9ImZhc3QiO2lmKChkPT09MCl8fChkPjApKXtpPWR9ZWxzZSBpZigodGhpcy5fZHVyYXRpb25zLm9wZW49PT0wKXx8KHRoaXMuX2R1cmF0aW9ucy5vcGVuPjApKXtpPXRoaXMuX2R1cmF0aW9ucy5vcGVufXZhciBfO2lmKG18fGJ8fG98fGN8fGYpe189dGhpcy5fY3JlYXRlUG9zaXRpb24obSxiLG8sYyxmKX1lbHNle189dGhpcy5fb1Bvc2l0aW9ufWlmKCFfLm9mKXtfLm9mPXRoaXMuX29Qb3NpdGlvbi5vZnx8ZG9jdW1lbnR9dGhpcy5faVpJbmRleD10aGlzLl9pWkluZGV4PT09dGhpcy5nZXRMYXN0WkluZGV4KCk/dGhpcy5faVpJbmRleDp0aGlzLmdldE5leHRaSW5kZXgoKTt2YXIgUz1zYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKTskLmNzcyh7InBvc2l0aW9uIjoiYWJzb2x1dGUiLCJ2aXNpYmlsaXR5IjoiaGlkZGVuIn0pO2lmKCEoJFswXS5wYXJlbnROb2RlPT1TKSl7JC5hcHBlbmRUbyhTKX0kLmNzcygiei1pbmRleCIsdGhpcy5faVpJbmRleCk7cS5zYXAubG9nLmRlYnVnKCJwb3NpdGlvbiBwb3B1cCBjb250ZW50ICIrJC5hdHRyKCJpZCIpKyIgYXQgIisod2luZG93LkpTT04/SlNPTi5zdHJpbmdpZnkoXy5hdCk6U3RyaW5nKF8uYXQpKSk7dGhpcy5fYXBwbHlQb3NpdGlvbihfKTtpZihnIT09dW5kZWZpbmVkKXt0aGlzLnNldEZvbGxvd09mKGcpfXZhciB0PXRoaXM7aWYoc2FwLnVpLkRldmljZS5vcy5pb3MmJnNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCl7aWYodGhpcy5fb1RvcFNoaWVsZExheWVyKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2lUb3BTaGllbGRSZW1vdmVUaW1lcik7dGhpcy5faVRvcFNoaWVsZFJlbW92ZVRpbWVyPW51bGx9ZWxzZXt0aGlzLl9vVG9wU2hpZWxkTGF5ZXI9dGhpcy5vU2hpZWxkTGF5ZXJQb29sLmJvcnJvd09iamVjdCgkLHRoaXMuX2laSW5kZXgrMSl9dGhpcy5faVRvcFNoaWVsZFJlbW92ZVRpbWVyPXEuc2FwLmRlbGF5ZWRDYWxsKDUwMCx0aGlzLGZ1bmN0aW9uKCl7dGhpcy5vU2hpZWxkTGF5ZXJQb29sLnJldHVybk9iamVjdCh0aGlzLl9vVG9wU2hpZWxkTGF5ZXIpO3RoaXMuX29Ub3BTaGllbGRMYXllcj1udWxsO3RoaXMuX2lUb3BTaGllbGRSZW1vdmVUaW1lcj1udWxsfSl9dmFyIE89ZnVuY3Rpb24oKXskLmNzcygiZGlzcGxheSIsImJsb2NrIik7aWYodC5fYk1vZGFsfHx0Ll9iQXV0b0Nsb3NlfHx0Ll9zSW5pdGlhbEZvY3VzSWQpe3ZhciBrPW51bGw7aWYodC5fc0luaXRpYWxGb2N1c0lkKXt2YXIgbD1zYXAudWkuZ2V0Q29yZSgpLmJ5SWQodC5fc0luaXRpYWxGb2N1c0lkKTtpZihsKXtrPWwuZ2V0Rm9jdXNEb21SZWYoKX1rPWt8fHEuc2FwLmRvbUJ5SWQodC5fc0luaXRpYWxGb2N1c0lkKX1xLnNhcC5mb2N1cyhrfHwkLmZpcnN0Rm9jdXNhYmxlRG9tUmVmKCkpfXQuZU9wZW5TdGF0ZT1zYXAudWkuY29yZS5PcGVuU3RhdGUuT1BFTjtpZih0LmdldEZvbGxvd09mKCkpe2EuRG9ja1RyaWdnZXIuYWRkTGlzdGVuZXIoYS5jaGVja0RvY2tpbmcsdCl9dC5fdXBkYXRlQmxpbmRMYXllcigpO2lmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbj09OSl7cS5zYXAuZGVsYXllZENhbGwoMCx0LGZ1bmN0aW9uKCl7dC5maXJlT3BlbmVkKCl9KX1lbHNle3QuZmlyZU9wZW5lZCgpfX07JC50b2dnbGVDbGFzcygic2FwVWlTaGQiLHRoaXMuX2JTaGFkb3cpLmhpZGUoKS5jc3MoInZpc2liaWxpdHkiLCJ2aXNpYmxlIik7aWYoaT09MCl7dGhpcy5iT3Blbj10cnVlO08uYXBwbHkoKX1lbHNle2lmKHRoaXMuX2FuaW1hdGlvbnMub3Blbil7dGhpcy5fYW5pbWF0aW9ucy5vcGVuLmNhbGwobnVsbCwkLGksTyl9ZWxzZXskLmZhZGVJbihpLE8pfX1pZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmYS5fYWN0aXZhdGVCbGluZExheWVyKXt0aGlzLl9vQmxpbmRMYXllcj10aGlzLm9CbGluZExheWVyUG9vbC5ib3Jyb3dPYmplY3QoJCx0aGlzLl9pWkluZGV4LTEpfWlmKHRoaXMuX2JNb2RhbCl7dGhpcy5fc2hvd0Jsb2NrTGF5ZXIoKX1pZih0aGlzLm9Db250ZW50IGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudCl7dGhpcy5vQ29udGVudC5hZGREZWxlZ2F0ZSh0aGlzKX10aGlzLmJPcGVuPXRydWU7aWYodGhpcy5pc0luUG9wdXAobyl8fHRoaXMuaXNJblBvcHVwKHRoaXMuX29Qb3NpdGlvbi5vZikpe3ZhciBwPXRoaXMuZ2V0UGFyZW50UG9wdXBJZChvKXx8dGhpcy5nZXRQYXJlbnRQb3B1cElkKHRoaXMuX29Qb3NpdGlvbi5vZik7dmFyIGg9IiI7dmFyIGo9dGhpcy5nZXRDb250ZW50KCk7aWYoaiBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkVsZW1lbnQpe2g9ai5nZXRJZCgpfWVsc2UgaWYodHlwZW9mIGo9PT0ib2JqZWN0Iil7aD1qLmlkfXRoaXMuYWRkQ2hpbGRUb1BvcHVwKHAsaCk7dGhpcy5hZGRDaGlsZFRvUG9wdXAocCx0aGlzLl9wb3B1cFVJRCl9aWYodGhpcy5fYk1vZGFsfHx0aGlzLl9iQXV0b0Nsb3NlKXt0aGlzLl9hZGRGb2N1c0V2ZW50TGlzdGVuZXJzKCl9aWYodGhpcy50b3VjaEVuYWJsZWQmJiF0aGlzLl9iTW9kYWwmJnRoaXMuX2JBdXRvQ2xvc2Upe3EoZG9jdW1lbnQpLm9uKCJ0b3VjaHN0YXJ0IG1vdXNlZG93biIscS5wcm94eSh0aGlzLl9mQXV0b0Nsb3NlSGFuZGxlcix0aGlzKSl9aWYodGhpcy5fb0JsaW5kTGF5ZXIpe3RoaXMuX3Jlc2l6ZUxpc3RlbmVySWQ9c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5yZWdpc3Rlcih0aGlzLl8kKCkuZ2V0KDApLHEucHJveHkodGhpcy5vbnJlc2l6ZSx0aGlzKSl9fTthLnByb3RvdHlwZS5vbkZvY3VzRXZlbnQ9ZnVuY3Rpb24oYil7dmFyIGU9cS5ldmVudC5maXgoYik7aWYoYXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV09PT0ic2FwLnVpLmNvcmUuUG9wdXAub25Gb2N1c0V2ZW50LSIrdGhpcy5fcG9wdXBVSUQpe2U9cS5ldmVudC5maXgoYXJndW1lbnRzWzJdKX12YXIgdD0oZS50eXBlPT0iZm9jdXMifHxlLnR5cGU9PSJhY3RpdmF0ZSIpPyJmb2N1cyI6ImJsdXIiO3ZhciBjPWZhbHNlO2lmKHQ9PSJmb2N1cyIpe3ZhciBkPXRoaXMuXyQoKS5nZXQoMCk7aWYoZCl7Yz1kPT1lLnRhcmdldHx8cS5jb250YWlucyhkLGUudGFyZ2V0KTt2YXIgZj10aGlzLmdldENoaWxkUG9wdXBzKCk7aWYoIWMpe2Zvcih2YXIgaT0wLGw9Zi5sZW5ndGg7aTxsO2krKyl7dmFyIG89cS5zYXAuZG9tQnlJZChmW2ldKTtpZihvKXtjPW89PWUudGFyZ2V0fHxxLmNvbnRhaW5zKG8sZS50YXJnZXQpO2lmKGMpe2JyZWFrfX19fXEuc2FwLmxvZy5kZWJ1ZygiZm9jdXMgZXZlbnQgb24gIitlLnRhcmdldC5pZCsiLCBjb250YWluczogIitjKTtpZih0aGlzLl9iTW9kYWwmJiFjKXt2YXIgVD0oYS5nZXRMYXN0WkluZGV4KCk9PXRoaXMuX2laSW5kZXgpO2lmKFQpe2lmKCFzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2h8fHEoZS50YXJnZXQpLmlzKCI6aW5wdXQiKSl7dmFyIEQ9dGhpcy5vTGFzdEJsdXJyZWRFbGVtZW50P3RoaXMub0xhc3RCbHVycmVkRWxlbWVudDpkO3Euc2FwLmZvY3VzKEQpfX19ZWxzZSBpZih0aGlzLl9iQXV0b0Nsb3NlJiZjJiZ0aGlzLl9zVGltZW91dElkKXtpZih0aGlzLl9zVGltZW91dElkKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX3NUaW1lb3V0SWQpO3RoaXMuX3NUaW1lb3V0SWQ9bnVsbH19fX1lbHNlIGlmKHQ9PSJibHVyIil7cS5zYXAubG9nLmRlYnVnKCJibHVyIGV2ZW50IG9uICIrZS50YXJnZXQuaWQpO2lmKHRoaXMuX2JNb2RhbCl7dGhpcy5vTGFzdEJsdXJyZWRFbGVtZW50PWUudGFyZ2V0fWVsc2UgaWYodGhpcy5fYkF1dG9DbG9zZSl7aWYoIXRoaXMudG91Y2hFbmFibGVkJiYhdGhpcy5fc1RpbWVvdXRJZCl7dGhpcy5fc1RpbWVvdXRJZD1xLnNhcC5kZWxheWVkQ2FsbCgwLHRoaXMsImNsb3NlIil9fX19O2EucHJvdG90eXBlLnNldEluaXRpYWxGb2N1c0lkPWZ1bmN0aW9uKGkpe3RoaXMuX3NJbml0aWFsRm9jdXNJZD1pfTthLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihkKXtpZih0aGlzLmVPcGVuU3RhdGU9PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUR8fHRoaXMuZU9wZW5TdGF0ZT09c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NJTkcpe3JldHVybn12YXIgaT0iZmFzdCI7aWYoKGQ9PT0wKXx8KGQ+MCkpe2k9ZH1lbHNlIGlmKCh0aGlzLl9kdXJhdGlvbnMuY2xvc2U9PT0wKXx8KHRoaXMuX2R1cmF0aW9ucy5jbG9zZT4wKSl7aT10aGlzLl9kdXJhdGlvbnMuY2xvc2V9aWYoaT09PTAmJnRoaXMuZU9wZW5TdGF0ZT09c2FwLnVpLmNvcmUuT3BlblN0YXRlLk9QRU5JTkcpe3JldHVybn10aGlzLmVPcGVuU3RhdGU9c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NJTkc7aWYodGhpcy5nZXRGb2xsb3dPZigpKXthLkRvY2tUcmlnZ2VyLnJlbW92ZUxpc3RlbmVyKGEuY2hlY2tEb2NraW5nLHRoaXMpfWlmKHRoaXMub0NvbnRlbnQmJnRoaXMuX2JDb250ZW50QWRkZWRUb1N0YXRpYyl7c2FwLnVpLmdldENvcmUoKS5nZXRFdmVudEJ1cygpLnB1Ymxpc2goInNhcC51aSIsIl9fYmVmb3JlUG9wdXBDbG9zZSIse2RvbU5vZGU6dGhpcy5fJCgpLmdldCgwKX0pO3ZhciBzPXNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpO3M9c2FwLnVpLmdldENvcmUoKS5nZXRVSUFyZWEocyk7cy5yZW1vdmVDb250ZW50KHMuaW5kZXhPZkNvbnRlbnQodGhpcy5vQ29udGVudCksdHJ1ZSl9dGhpcy5fYkNvbnRlbnRBZGRlZFRvU3RhdGljPWZhbHNlO3RoaXMuX3NUaW1lb3V0SWQ9bnVsbDtpZih0aGlzLmZFdmVudEhhbmRsZXIpe3RoaXMuX3JlbW92ZUZvY3VzRXZlbnRMaXN0ZW5lcnMoKX1pZih0aGlzLnRvdWNoRW5hYmxlZCl7aWYoIXRoaXMuX2JNb2RhbCYmdGhpcy5fYkF1dG9DbG9zZSl7cShkb2N1bWVudCkub2ZmKCJ0b3VjaHN0YXJ0IG1vdXNlZG93biIsdGhpcy5fZkF1dG9DbG9zZUhhbmRsZXIpfX1pZih0aGlzLm9Db250ZW50IGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudCl7dGhpcy5vQ29udGVudC5yZW1vdmVEZWxlZ2F0ZSh0aGlzKX12YXIgJD10aGlzLl8kKCk7aWYodGhpcy5fYkV2ZW50QnVzRXZlbnRzUmVnaXN0ZXJlZCl7dGhpcy5fdW5yZWdpc3RlckV2ZW50QnVzRXZlbnRzKCl9aWYodGhpcy5fb0JsaW5kTGF5ZXIpe3RoaXMub0JsaW5kTGF5ZXJQb29sLnJldHVybk9iamVjdCh0aGlzLl9vQmxpbmRMYXllcil9dGhpcy5fb0JsaW5kTGF5ZXI9bnVsbDt2YXIgdD10aGlzO2lmKHNhcC51aS5EZXZpY2Uub3MuaW9zJiZzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe2lmKHRoaXMuX29Cb3R0b21TaGllbGRMYXllcil7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9pQm90dG9tU2hpZWxkUmVtb3ZlVGltZXIpO3RoaXMuX2lCb3R0b21TaGllbGRSZW1vdmVUaW1lcj1udWxsfWVsc2V7dGhpcy5fb0JvdHRvbVNoaWVsZExheWVyPXRoaXMub1NoaWVsZExheWVyUG9vbC5ib3Jyb3dPYmplY3QoJCx0aGlzLl9pWkluZGV4LTMpfXRoaXMuX2lCb3R0b21TaGllbGRSZW1vdmVUaW1lcj1xLnNhcC5kZWxheWVkQ2FsbCg1MDAsdGhpcyxmdW5jdGlvbigpe3RoaXMub1NoaWVsZExheWVyUG9vbC5yZXR1cm5PYmplY3QodGhpcy5fb0JvdHRvbVNoaWVsZExheWVyKTt0aGlzLl9vQm90dG9tU2hpZWxkTGF5ZXI9bnVsbDt0aGlzLl9pQm90dG9tU2hpZWxkUmVtb3ZlVGltZXI9bnVsbH0pfXZhciBjPWZ1bmN0aW9uKCl7cSgkKS5oaWRlKCkuY3NzKHsidmlzaWJpbGl0eSI6ImhpZGRlbiIsImxlZnQiOiIwcHgiLCJ0b3AiOiIwcHgiLCJyaWdodCI6IiJ9KTtpZih0LnJlc3RvcmVGb2N1cyl7aWYodC5fYk1vZGFsKXthLmFwcGx5Rm9jdXNJbmZvKHQuX29QcmV2aW91c0ZvY3VzKTt0Ll9vUHJldmlvdXNGb2N1cz1udWxsO3Qub0xhc3RCbHVycmVkRWxlbWVudD1udWxsfX10LmJPcGVuPWZhbHNlO3QuZU9wZW5TdGF0ZT1zYXAudWkuY29yZS5PcGVuU3RhdGUuQ0xPU0VEO3QuZmlyZUNsb3NlZCgpO3ZhciBiPXQuZ2V0Q2hpbGRQb3B1cHMoKTtmb3IodmFyIGo9MCxsPWIubGVuZ3RoO2o8bDtqKyspe3QuY2xvc2VQb3B1cChiW2pdKX19O2lmKGk9PTApe2MuYXBwbHkoKX1lbHNle2lmKHRoaXMuX2FuaW1hdGlvbnMuY2xvc2Upe3RoaXMuX2FuaW1hdGlvbnMuY2xvc2UuY2FsbChudWxsLCQsaSxjKX1lbHNleyQuZmFkZU91dChpLGMpfX1pZih0aGlzLl9iTW9kYWwpe3RoaXMuX2hpZGVCbG9ja0xheWVyKCl9aWYodGhpcy5fcmVzaXplTGlzdGVuZXJJZCl7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3Jlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3Jlc2l6ZUxpc3RlbmVySWQ9bnVsbH19O2EuZ2V0Q3VycmVudEZvY3VzSW5mbz1mdW5jdGlvbigpe3ZhciBfPW51bGw7dmFyIGY9c2FwLnVpLmdldENvcmUoKS5nZXRDdXJyZW50Rm9jdXNlZENvbnRyb2xJZCgpO2lmKGYpe3ZhciBGPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29udHJvbChmKTtfPXsnc0ZvY3VzSWQnOmYsJ29Gb2N1c0luZm8nOkY/Ri5nZXRGb2N1c0luZm8oKTp7fX19ZWxzZXt0cnl7dmFyIGU9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtpZihlKXtfPXsnc0ZvY3VzSWQnOmUuaWQsJ29Gb2N1c2VkRWxlbWVudCc6ZSwnb0ZvY3VzSW5mbyc6e319fX1jYXRjaChiKXtfPW51bGx9fXJldHVybiBffTthLmFwcGx5Rm9jdXNJbmZvPWZ1bmN0aW9uKHApe2lmKHApe3ZhciBmPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29udHJvbChwLnNGb2N1c0lkKTtpZihmKXtmLmFwcGx5Rm9jdXNJbmZvKHAub0ZvY3VzSW5mbyl9ZWxzZXt2YXIgZT1xLnNhcC5kb21CeUlkKHAuc0ZvY3VzSWQpfHxwLm9Gb2N1c2VkRWxlbWVudDtxLnNhcC5mb2N1cyhlKX19fTthLnByb3RvdHlwZS5zZXRDb250ZW50PWZ1bmN0aW9uKGMpe3RoaXMub0NvbnRlbnQ9YztyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZ2V0Q29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db250ZW50fTthLnByb3RvdHlwZS5zZXRQb3NpdGlvbj1mdW5jdGlvbihtLGIsbyxjLGQpe3RoaXMuX29Qb3NpdGlvbj10aGlzLl9jcmVhdGVQb3NpdGlvbihtLGIsbyxjLGQpO2lmKHRoaXMuZU9wZW5TdGF0ZSE9c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NFRCl7dGhpcy5fYXBwbHlQb3NpdGlvbih0aGlzLl9vUG9zaXRpb24pO3RoaXMuX29CbGluZExheWVyJiZ0aGlzLl9vQmxpbmRMYXllci51cGRhdGUodGhpcy5fJCgpKX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuX2NyZWF0ZVBvc2l0aW9uPWZ1bmN0aW9uKG0sYixvLGMsZCl7dmFyIG49ZmFsc2U7aWYobSYmKG0uaW5kZXhPZigiKyIpPj0wfHxtLmluZGV4T2YoIi0iKT49MCkpe249dHJ1ZTtpZihjJiZjIT0iMCAwIil7cS5zYXAubG9nLndhcm5pbmcoIm9mZnNldCB1c2VkIGluIG15IGFuZCBpbiBvZmZzZXQsIHRoZSBvZmZzZXQgdmFsdWUgd2lsbCBiZSBpZ25vcmVkIiwic2FwLnVpLmNvcmUuUG9wdXAiLCJzZXRQb3NpdGlvbiIpfWM9bnVsbH12YXIgcD1xLmV4dGVuZCh7fSx0aGlzLl9vRGVmYXVsdFBvc2l0aW9uLHsibXkiOm18fHRoaXMuX29EZWZhdWx0UG9zaXRpb24ubXksImF0IjpifHx0aGlzLl9vRGVmYXVsdFBvc2l0aW9uLmF0LCJvZiI6bywib2Zmc2V0IjpjLCJjb2xsaXNpb24iOmR9KTtpZighcS51aS52ZXJzaW9uKXtpZihhLl9iTmV3T2Zmc2V0PT1udWxsKXthLl9iTmV3T2Zmc2V0PXRydWU7aWYoIShzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJnNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPT04JiZxLnNhcC5WZXJzaW9uKHEoKS5qcXVlcnkpLmNvbXBhcmVUbygiMS44LjEiKTwwKSl7dmFyIEQ9cShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSk7RC5wb3NpdGlvbih7b2Y6d2luZG93LHVzaW5nOmZ1bmN0aW9uKGYsZyl7YS5fYk5ld09mZnNldD0oZyE9PXVuZGVmaW5lZCl9fSl9fX1pZihhLl9iTmV3T2Zmc2V0fHxxLnNhcC5WZXJzaW9uKHEudWkudmVyc2lvbikuY29tcGFyZVRvKCIxLjguMjMiKT4wKXtpZihjJiZjIT0iMCAwIil7dmFyIGU9cC5teS5zcGxpdCgiICIpO3ZhciBPPWMuc3BsaXQoIiAiKTt2YXIgcz1bcGFyc2VJbnQoT1swXSk8MD8iIjoiKyIscGFyc2VJbnQoT1sxXSk8MD8iIjoiKyJdO3AubXk9ZVswXStzWzBdK09bMF0rIiAiK2VbMV0rc1sxXStPWzFdO3Aub2Zmc2V0PW51bGx9fWVsc2UgaWYobil7dmFyIGU9cC5teS5zcGxpdCgiICIpO3ZhciBPPVsiIiwiIl07dmFyIGk9ZVswXS5pbmRleE9mKCIrIik7aWYoaTwwKXtpPWVbMF0uaW5kZXhPZigiLSIpfWlmKGk+PTApe09bMF09ZVswXS5zbGljZShpKTtlWzBdPWVbMF0uc2xpY2UoMCxpKX1pPWVbMV0uaW5kZXhPZigiKyIpO2lmKGk8MCl7aT1lWzFdLmluZGV4T2YoIi0iKX1pZihpPj0wKXtPWzFdPWVbMV0uc2xpY2UoaSk7ZVsxXT1lWzFdLnNsaWNlKDAsaSl9cC5teT1lWzBdKyIgIitlWzFdO3Aub2Zmc2V0PU9bMF0rIiAiK09bMV19cmV0dXJuIHB9O2EucHJvdG90eXBlLl9nZXRQb3NpdGlvbk9mZnNldD1mdW5jdGlvbigpe3ZhciBvPVtdO2lmKHRoaXMuX29Qb3NpdGlvbi5teSYmKHRoaXMuX29Qb3NpdGlvbi5teS5pbmRleE9mKCIrIik+PTB8fHRoaXMuX29Qb3NpdGlvbi5teS5pbmRleE9mKCItIik+PTApKXt2YXIgbT10aGlzLl9vUG9zaXRpb24ubXkuc3BsaXQoIiAiKTt2YXIgaT1tWzBdLmluZGV4T2YoIisiKTtpZihpPDApe2k9bVswXS5pbmRleE9mKCItIil9aWYoaT49MCl7b1swXT1tWzBdLnNsaWNlKGkpfWk9bVsxXS5pbmRleE9mKCIrIik7aWYoaTwwKXtpPW1bMV0uaW5kZXhPZigiLSIpfWlmKGk+PTApe29bMV09bVsxXS5zbGljZShpKX19ZWxzZSBpZih0aGlzLl9vUG9zaXRpb24ub2Zmc2V0KXtvPXRoaXMuX29Qb3NpdGlvbi5vZmZzZXQuc3BsaXQoIiAiKX1yZXR1cm4gb307YS5wcm90b3R5cGUuX2FwcGx5UG9zaXRpb249ZnVuY3Rpb24ocCl7dmFyIGI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyICQ9dGhpcy5fJCgpO3ZhciBBPXAuYXQ7aWYodHlwZW9mKEEpPT09InN0cmluZyIpeyQuY3NzKCJkaXNwbGF5IiwiYmxvY2siKS5wb3NpdGlvbih0aGlzLl9yZXNvbHZlUmVmZXJlbmNlKHRoaXMuX2NvbnZlcnRQb3NpdGlvblJUTChwLGIpKSk7dGhpcy5fZml4UG9zaXRpb25pbmcocCxiKX1lbHNlIGlmKHNhcC51aS5jb3JlLkNTU1NpemUuaXNWYWxpZChBLmxlZnQpJiZzYXAudWkuY29yZS5DU1NTaXplLmlzVmFsaWQoQS50b3ApKXskLmNzcyh7ImxlZnQiOkEubGVmdCwidG9wIjpBLnRvcH0pfWVsc2UgaWYoc2FwLnVpLmNvcmUuQ1NTU2l6ZS5pc1ZhbGlkKEEucmlnaHQpJiZzYXAudWkuY29yZS5DU1NTaXplLmlzVmFsaWQoQS50b3ApKXskLmNzcyh7InJpZ2h0IjpBLnJpZ2h0LCJ0b3AiOkEudG9wfSl9ZWxzZSBpZih0eXBlb2YoQS5sZWZ0KT09PSJudW1iZXIiJiZ0eXBlb2YoQS50b3ApPT09Im51bWJlciIpe3ZhciBkPSRbMF07aWYoZCYmZC5zdHlsZS5yaWdodCl7dmFyIHc9JC5vdXRlcldpZHRoKCk7JC5jc3MoeyJyaWdodCI6KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aC0oQS5sZWZ0K3cpKSsicHgiLCJ0b3AiOkEudG9wKyJweCJ9KX1lbHNleyQuY3NzKHsibGVmdCI6QS5sZWZ0KyJweCIsInRvcCI6QS50b3ArInB4In0pfX10aGlzLl9vTGFzdFBvc2l0aW9uPXA7dGhpcy5fb0xhc3RPZlJlY3Q9dGhpcy5fY2FsY09mUmVjdChwLm9mKX07YS5wcm90b3R5cGUuX2NhbGNPZlJlY3Q9ZnVuY3Rpb24obyl7dmFyIE89dGhpcy5fZ2V0T2ZEb20obyk7aWYoTyl7cmV0dXJuIHEoTykucmVjdCgpfXJldHVybiBudWxsfTthLnByb3RvdHlwZS5fZ2V0T2ZEb209ZnVuY3Rpb24obyl7aWYoKG8gaW5zdGFuY2VvZiBFdmVudCl8fChvIGluc3RhbmNlb2YgcS5FdmVudCkpe3JldHVybiBudWxsfXZhciBPO2lmKHR5cGVvZihvKT09PSJzdHJpbmciKXtPPXEuc2FwLmJ5SWQobyl9ZWxzZSBpZihvIGluc3RhbmNlb2YgcSl7Tz1vfWVsc2V7Tz1xKG8gaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50P28uZ2V0RG9tUmVmKCk6byl9cmV0dXJuIE9bMF19O2EucHJvdG90eXBlLl9jb252ZXJ0UG9zaXRpb25SVEw9ZnVuY3Rpb24ocCxiKXt2YXIgZj1xLmV4dGVuZCh7fSxwKTtpZihiKXt2YXIgbj1mYWxzZTtpZihmLm15JiYoZi5teS5pbmRleE9mKCIrIik+PTB8fGYubXkuaW5kZXhPZigiLSIpPj0wKSl7bj10cnVlfWlmKChmLm9mZnNldHx8bikmJigoZi5teS5pbmRleE9mKCJiZWdpbiIpPi0xKXx8KGYubXkuaW5kZXhPZigiZW5kIik+LTEpKSYmKChmLmF0LmluZGV4T2YoImJlZ2luIik+LTEpfHwoZi5hdC5pbmRleE9mKCJlbmQiKT4tMSkpKXtpZihuKXt2YXIgbT1mLm15LnNwbGl0KCIgIik7aWYobS5sZW5ndGg9PTIpe2YubXk9IiI7aWYobVswXSl7aWYobVswXS5pbmRleE9mKCJiZWdpbiIpPi0xfHxtWzBdLmluZGV4T2YoImVuZCIpPi0xKXtpZihtWzBdLmluZGV4T2YoIisiKT4tMSl7bVswXT1tWzBdLnJlcGxhY2UoIisiLCItIil9ZWxzZSBpZihtWzBdLmluZGV4T2YoIi0iKT4tMSl7bVswXT1tWzBdLnJlcGxhY2UoIi0iLCIrIil9fWYubXk9bVswXX1pZihtWzFdKXtpZihtWzFdLmluZGV4T2YoImJlZ2luIik+LTF8fG1bMV0uaW5kZXhPZigiZW5kIik+LTEpe2lmKG1bMV0uaW5kZXhPZigiKyIpPi0xKXttWzFdPW1bMV0ucmVwbGFjZSgiKyIsIi0iKX1lbHNlIGlmKG1bMV0uaW5kZXhPZigiLSIpPi0xKXttWzFdPW1bMV0ucmVwbGFjZSgiLSIsIisiKX19aWYobVswXSl7Zi5teT1mLm15KyIgIn1mLm15PWYubXkrbVsxXX19fWVsc2V7Zi5vZmZzZXQ9dGhpcy5fbWlycm9yT2Zmc2V0KGYub2Zmc2V0KX19Zi5teT1mLm15LnJlcGxhY2UoImJlZ2luIiwicmlnaHQiKS5yZXBsYWNlKCJlbmQiLCJsZWZ0Iik7Zi5hdD1mLmF0LnJlcGxhY2UoImJlZ2luIiwicmlnaHQiKS5yZXBsYWNlKCJlbmQiLCJsZWZ0Iil9ZWxzZXtmLm15PWYubXkucmVwbGFjZSgiZW5kIiwicmlnaHQiKS5yZXBsYWNlKCJiZWdpbiIsImxlZnQiKTtmLmF0PWYuYXQucmVwbGFjZSgiZW5kIiwicmlnaHQiKS5yZXBsYWNlKCJiZWdpbiIsImxlZnQiKX1yZXR1cm4gZn07YS5wcm90b3R5cGUuX21pcnJvck9mZnNldD1mdW5jdGlvbihvKXt2YXIgTz1xLnRyaW0obykuc3BsaXQoL1xzLyk7dmFyIHA9cGFyc2VJbnQoT1swXSwxMCk7cmV0dXJuKC1wKSsiICIrT1tPLmxlbmd0aC0xXX07YS5wcm90b3R5cGUuX2ZpeFBvc2l0aW9uaW5nPWZ1bmN0aW9uKHAsYil7dmFyIG09cC5teTtpZih0eXBlb2YobSk9PT0ic3RyaW5nIil7aWYoYiYmKChtLmluZGV4T2YoInJpZ2h0Iik+LTEpfHwobS5pbmRleE9mKCJiZWdpbiIpPi0xKXx8KG0uaW5kZXhPZigiY2VudGVyIik+LTEpKSl7dmFyICQ9dGhpcy5fJCgpO3ZhciBjPXEod2luZG93KS53aWR0aCgpLSQub3V0ZXJXaWR0aCgpLSQub2Zmc2V0KCkubGVmdDskLmNzcyh7InJpZ2h0IjpjKyJweCIsImxlZnQiOiIifSl9ZWxzZSBpZigobS5pbmRleE9mKCJyaWdodCIpPi0xKXx8KG0uaW5kZXhPZigiZW5kIik+LTEpKXt2YXIgJD10aGlzLl8kKCk7dmFyIGM9cSh3aW5kb3cpLndpZHRoKCktJC5vdXRlcldpZHRoKCktJC5vZmZzZXQoKS5sZWZ0OyQuY3NzKHsicmlnaHQiOmMrInB4IiwibGVmdCI6IiJ9KX19fTthLnByb3RvdHlwZS5fcmVzb2x2ZVJlZmVyZW5jZT1mdW5jdGlvbihwKXt2YXIgbz1wO2lmKHAub2YgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50KXtvPXEuZXh0ZW5kKHt9LHAse29mOnAub2YuZ2V0RG9tUmVmKCl9KX1yZXR1cm4gb307YS5wcm90b3R5cGUuc2V0U2hhZG93PWZ1bmN0aW9uKHMpe3RoaXMuX2JTaGFkb3c9cztpZih0aGlzLmVPcGVuU3RhdGUhPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUQpe3RoaXMuXyQoKS50b2dnbGVDbGFzcygic2FwVWlTaGQiLHMpfXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5zZXRNb2RhbD1mdW5jdGlvbihtLHMpe3ZhciBvPXRoaXMuX2JNb2RhbDt0aGlzLl9iTW9kYWw9bTt0aGlzLl9zTW9kYWxDU1NDbGFzcz1zO2lmKHRoaXMuaXNPcGVuKCkpe2lmKG8hPT1tKXtpZihtKXt0aGlzLl9zaG93QmxvY2tMYXllcigpfWVsc2V7dGhpcy5faGlkZUJsb2NrTGF5ZXIoKX1pZih0aGlzLnRvdWNoRW5hYmxlZCYmdGhpcy5fYkF1dG9DbG9zZSl7aWYoIW0pe3EoZG9jdW1lbnQpLm9uKCJ0b3VjaHN0YXJ0IG1vdXNlZG93biIscS5wcm94eSh0aGlzLl9mQXV0b0Nsb3NlSGFuZGxlcix0aGlzKSl9ZWxzZXtxKGRvY3VtZW50KS5vZmYoInRvdWNoc3RhcnQgbW91c2Vkb3duIix0aGlzLl9mQXV0b0Nsb3NlSGFuZGxlcil9fX19cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmdldE1vZGFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JNb2RhbH07YS5wcm90b3R5cGUuc2V0QXV0b0Nsb3NlPWZ1bmN0aW9uKEEpe2lmKHRoaXMudG91Y2hFbmFibGVkJiZ0aGlzLmlzT3BlbigpJiZ0aGlzLl9iQXV0b0Nsb3NlIT09QSl7aWYoIXRoaXMuX2JNb2RhbCl7aWYoQSl7cShkb2N1bWVudCkub24oInRvdWNoc3RhcnQgbW91c2Vkb3duIixxLnByb3h5KHRoaXMuX2ZBdXRvQ2xvc2VIYW5kbGVyLHRoaXMpKX1lbHNle3EoZG9jdW1lbnQpLm9mZigidG91Y2hzdGFydCBtb3VzZWRvd24iLHRoaXMuX2ZBdXRvQ2xvc2VIYW5kbGVyKX19fXRoaXMuX2JBdXRvQ2xvc2U9QTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuc2V0QXV0b0Nsb3NlQXJlYXM9ZnVuY3Rpb24oQSl7Zm9yKHZhciBpPTAsbD1BLmxlbmd0aDtpPGw7aSsrKXt2YXIgcz0iIjtpZihBW2ldaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50KXtzPUFbaV0uZ2V0SWQoKX1lbHNlIGlmKHR5cGVvZiBBW2ldPT09Im9iamVjdCIpe3M9QVtpXS5pZH1lbHNlIGlmKHR5cGVvZiBBW2ldPT09InN0cmluZyIpe3M9QVtpXX1pZihxLmluQXJyYXkocyx0aGlzLmdldENoaWxkUG9wdXBzKCkpPT09LTEpe3RoaXMuYWRkQ2hpbGRQb3B1cChzKX19cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnNldEFuaW1hdGlvbnM9ZnVuY3Rpb24obyxjKXtpZihvJiYodHlwZW9mKG8pPT0iZnVuY3Rpb24iKSl7dGhpcy5fYW5pbWF0aW9ucy5vcGVuPW99aWYoYyYmKHR5cGVvZihjKT09ImZ1bmN0aW9uIikpe3RoaXMuX2FuaW1hdGlvbnMuY2xvc2U9Y31yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuc2V0RHVyYXRpb25zPWZ1bmN0aW9uKG8sYyl7aWYoKG8+MCl8fChvPT09MCkpe3RoaXMuX2R1cmF0aW9ucy5vcGVuPW99aWYoKGM+MCl8fChjPT09MCkpe3RoaXMuX2R1cmF0aW9ucy5jbG9zZT1jfXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5zZXRGb2xsb3dPZj1mdW5jdGlvbihmKXt2YXIgdT1mYWxzZTthLkRvY2tUcmlnZ2VyLnJlbW92ZUxpc3RlbmVyKGEuY2hlY2tEb2NraW5nLHRoaXMpO2lmKHR5cGVvZihmKT09PSJmdW5jdGlvbiIpe3RoaXMuX2JGb2xsb3dPZj10cnVlO3RoaXMuX2ZvbGxvd09mSGFuZGxlcj1mO3U9dHJ1ZX1lbHNlIGlmKHR5cGVvZihmKT09PSJib29sZWFuIil7dGhpcy5fYkZvbGxvd09mPWY7aWYoIXRoaXMuX2JGb2xsb3dPZil7dGhpcy5fZm9sbG93T2ZIYW5kbGVyPW51bGx9dT1mfWVsc2V7dGhpcy5fYkZvbGxvd09mPWZhbHNlO3RoaXMuX2ZvbGxvd09mSGFuZGxlcj1udWxsO2lmKGYhPW51bGwpe3Euc2FwLmxvZy5lcnJvcigiVHJ5aW5nIHRvIHNldCBhbiBpbnZhbGlkIHR5cGUgdG8gJ2ZvbGxvd09mOiAiK2YpfX1pZih1JiZ0aGlzLl9vTGFzdFBvc2l0aW9uKXt0aGlzLl9vTGFzdE9mUmVjdD10aGlzLl9jYWxjT2ZSZWN0KHRoaXMuX29MYXN0UG9zaXRpb24ub2YpfWlmKHRoaXMuX2JGb2xsb3dPZiYmdGhpcy5nZXRPcGVuU3RhdGUoKT09PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5PUEVOKXthLkRvY2tUcmlnZ2VyLmFkZExpc3RlbmVyKGEuY2hlY2tEb2NraW5nLHRoaXMpfX07YS5wcm90b3R5cGUuZ2V0QXV0b0Nsb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JBdXRvQ2xvc2V9O2EucHJvdG90eXBlLmdldEZvbGxvd09mPWZ1bmN0aW9uKCl7aWYodGhpcy5fYkZvbGxvd09mKXtyZXR1cm4gdHlwZW9mKHRoaXMuX2ZvbGxvd09mSGFuZGxlcik9PT0iZnVuY3Rpb24iP3RoaXMuX2ZvbGxvd09mSGFuZGxlcjp0cnVlfXJldHVybiBmYWxzZX07YS5wcm90b3R5cGUuaXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYk9wZW59O2EucHJvdG90eXBlLmdldE9wZW5TdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVPcGVuU3RhdGV9O2EucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLl9yZXNpemVMaXN0ZW5lcklkKXtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXIodGhpcy5fcmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fcmVzaXplTGlzdGVuZXJJZD1udWxsfXRoaXMuY2xvc2UoKTt0aGlzLm9Db250ZW50PW51bGw7aWYodGhpcy5fYkZvbGxvd09mKXt0aGlzLnNldEZvbGxvd09mKG51bGwpfWlmKHRoaXMuX2JFdmVudEJ1c0V2ZW50c1JlZ2lzdGVyZWQpe3RoaXMuX3VucmVnaXN0ZXJFdmVudEJ1c0V2ZW50cygpfX07YS5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLl9tRm9jdXNFdmVudHN9O2EucHJvdG90eXBlLl9hZGRGb2N1c0V2ZW50TGlzdGVuZXJzPWZ1bmN0aW9uKGMsZSxFKXtpZighdGhpcy5mRXZlbnRIYW5kbGVyKXt0aGlzLmZFdmVudEhhbmRsZXI9cS5wcm94eSh0aGlzLm9uRm9jdXNFdmVudCx0aGlzKX12YXIgcD10aGlzLl8kKCk7dmFyIGI9dGhpcy5nZXRDaGlsZFBvcHVwcygpO2lmKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXImJiFzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXIpe2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSk7cC5nZXQoMCkuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpO2Zvcih2YXIgaT0wLGw9Yi5sZW5ndGg7aTxsO2krKyl7dmFyIGQ9cS5zYXAuZG9tQnlJZChiW2ldKTtpZihkKXtkLmFkZEV2ZW50TGlzdGVuZXIoImJsdXIiLHRoaXMuZkV2ZW50SGFuZGxlcix0cnVlKX19fWVsc2V7cShkb2N1bWVudCkuYmluZCgiYWN0aXZhdGUuIit0aGlzLl9wb3B1cFVJRCx0aGlzLmZFdmVudEhhbmRsZXIpO3AuYmluZCgiZGVhY3RpdmF0ZS4iK3RoaXMuX3BvcHVwVUlELHRoaXMuZkV2ZW50SGFuZGxlcik7Zm9yKHZhciBpPTAsbD1iLmxlbmd0aDtpPGw7aSsrKXt2YXIgZD1xLnNhcC5kb21CeUlkKGJbaV0pO2lmKGQpe3EoZCkuYmluZCgiZGVhY3RpdmF0ZS4iK3RoaXMuX3BvcHVwVUlELHRoaXMuZkV2ZW50SGFuZGxlcil9fX19O2EucHJvdG90eXBlLl9yZW1vdmVGb2N1c0V2ZW50TGlzdGVuZXJzPWZ1bmN0aW9uKGMsZSxFKXt2YXIgcD10aGlzLl8kKGZhbHNlLHRydWUpO2lmKCFwLmxlbmd0aCl7cmV0dXJufXZhciBiPXRoaXMuZ2V0Q2hpbGRQb3B1cHMoKTtpZihkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyJiYhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpO3AuZ2V0KDApLnJlbW92ZUV2ZW50TGlzdGVuZXIoImJsdXIiLHRoaXMuZkV2ZW50SGFuZGxlcix0cnVlKTtmb3IodmFyIGk9MCxsPWIubGVuZ3RoO2k8bDtpKyspe3ZhciBkPXEuc2FwLmRvbUJ5SWQoYltpXSk7aWYoZCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSl9dGhpcy5jbG9zZVBvcHVwKGJbaV0pfX1lbHNle3EoZG9jdW1lbnQpLnVuYmluZCgiYWN0aXZhdGUuIit0aGlzLl9wb3B1cFVJRCx0aGlzLmZFdmVudEhhbmRsZXIpO3AudW5iaW5kKCJkZWFjdGl2YXRlLiIrdGhpcy5fcG9wdXBVSUQsdGhpcy5mRXZlbnRIYW5kbGVyKTtmb3IodmFyIGk9MCxsPWIubGVuZ3RoO2k8bDtpKyspe3ZhciBkPXEuc2FwLmRvbUJ5SWQoYltpXSk7aWYoZCl7cShkKS51bmJpbmQoImRlYWN0aXZhdGUuIit0aGlzLl9wb3B1cFVJRCx0aGlzLmZFdmVudEhhbmRsZXIpfX19dGhpcy5mRXZlbnRIYW5kbGVyPW51bGx9O2EucHJvdG90eXBlLl9yZWdpc3RlckV2ZW50QnVzRXZlbnRzPWZ1bmN0aW9uKGMsZSxFKXt2YXIgdD10aGlzO3EuZWFjaCh0Ll9tRm9jdXNFdmVudHMsZnVuY3Rpb24ocyxsKXtzYXAudWkuZ2V0Q29yZSgpLmdldEV2ZW50QnVzKCkuc3Vic2NyaWJlKCJzYXAudWkiLHMsbCx0KX0pO3RoaXMuX2JFdmVudEJ1c0V2ZW50c1JlZ2lzdGVyZWQ9dHJ1ZX07YS5wcm90b3R5cGUuX3VucmVnaXN0ZXJFdmVudEJ1c0V2ZW50cz1mdW5jdGlvbihjLGUsRSl7dmFyIHQ9dGhpcztxLmVhY2godC5fbUZvY3VzRXZlbnRzLGZ1bmN0aW9uKHMsbCl7c2FwLnVpLmdldENvcmUoKS5nZXRFdmVudEJ1cygpLnVuc3Vic2NyaWJlKCJzYXAudWkiLHMsbCx0KX0pO2RlbGV0ZSB0aGlzLl9iRXZlbnRCdXNFdmVudHNSZWdpc3RlcmVkfTthLnByb3RvdHlwZS5fYWRkRm9jdXNhYmxlQXJlYT1mdW5jdGlvbihjLGUsRSl7dmFyIHA9dGhpcy5fcG9wdXBVSUQ7aWYocS5pbkFycmF5KEUuaWQsdGhpcy5nZXRDaGlsZFBvcHVwcygpKT09PS0xKXt0aGlzLmFkZENoaWxkUG9wdXAoRS5pZCl9dmFyICQ9cSgnW2RhdGEtc2FwLXVpLXBvcHVwPSInK0UuaWQrJyJdJyk7aWYoJC5sZW5ndGg+MCl7dmFyIG89ZnVuY3Rpb24oYil7JC5vZmYoImJsdXIiLG8pO3ZhciBzPSJzYXAudWkuY29yZS5Qb3B1cC5vbkZvY3VzRXZlbnQtIitwO3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS5wdWJsaXNoKCJzYXAudWkiLHMsYil9OyQub24oImJsdXIiLG8pfX07YS5wcm90b3R5cGUuX3JlbW92ZUZvY3VzYWJsZUFyZWE9ZnVuY3Rpb24oYyxlLEUpe3RoaXMucmVtb3ZlQ2hpbGRQb3B1cChFLmlkKX07YS5wcm90b3R5cGUuX2Nsb3NlUG9wdXA9ZnVuY3Rpb24oYyxlLEUpe3RoaXMuY2xvc2UodHlwZW9mIHRoaXMuX2R1cmF0aW9ucy5jbG9zZT09PSJzdHJpbmciPzA6dGhpcy5fZHVyYXRpb25zLmNsb3NlKX07YS5wcm90b3R5cGUuX3NldElkZW50aXR5PWZ1bmN0aW9uKCQpe2lmKHR5cGVvZiAkPT09Im9iamVjdCIpeyQuYXR0cigiZGF0YS1zYXAtdWktcG9wdXAiLHRoaXMuX3BvcHVwVUlEKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJJbmNvcnJlY3QgRG9tUmVmLXR5cGUgZm9yICdzZXRJZGVudGl0eSc6ICIrJCx0aGlzKTtyZXR1cm59aWYoIXRoaXMuX2JFdmVudEJ1c0V2ZW50c1JlZ2lzdGVyZWQpe3RoaXMuX3JlZ2lzdGVyRXZlbnRCdXNFdmVudHMoKX19O2EucHJvdG90eXBlLl8kPWZ1bmN0aW9uKGYsZyl7dmFyIGM7aWYodGhpcy5vQ29udGVudCBpbnN0YW5jZW9mIEMpe2M9dGhpcy5vQ29udGVudC4kKCk7aWYoZnx8KGMubGVuZ3RoPT09MCYmIWcpKXtxLnNhcC5sb2cuaW5mbygiUmVuZGVyaW5nIG9mIHBvcHVwIGNvbnRlbnQ6ICIrdGhpcy5vQ29udGVudC5nZXRJZCgpKTtpZihjLmxlbmd0aD4wKXtSLnByZXNlcnZlQ29udGVudChjWzBdLHRydWUsZmFsc2UpfXNhcC51aS5nZXRDb3JlKCkuZ2V0UmVuZGVyTWFuYWdlcigpLnJlbmRlcih0aGlzLm9Db250ZW50LHNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpKTtjPXRoaXMub0NvbnRlbnQuJCgpfX1lbHNlIGlmKHRoaXMub0NvbnRlbnQgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50KXtjPXRoaXMub0NvbnRlbnQuJCgpfWVsc2V7Yz1xKHRoaXMub0NvbnRlbnQpfXRoaXMuX3NldElkZW50aXR5KGMpO3JldHVybiBjfTthLnByb3RvdHlwZS5fc2hvd0Jsb2NrTGF5ZXI9ZnVuY3Rpb24oKXt2YXIgYj1xKCIjc2FwLXVpLWJsb2NrbGF5ZXItcG9wdXAiKSxjPSJzYXBVaUJMeSIrKHRoaXMuX3NNb2RhbENTU0NsYXNzPyIgIit0aGlzLl9zTW9kYWxDU1NDbGFzczoiIik7aWYoYi5sZW5ndGg9PT0wKXtiPXEoJzxkaXYgaWQ9InNhcC11aS1ibG9ja2xheWVyLXBvcHVwIiB0YWJpbmRleD0iMCIgY2xhc3M9IicrYysnIj48L2Rpdj4nKTtiLmFwcGVuZFRvKHNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpKX1lbHNle2IucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcyhjKX1hLmJsU3RhY2sucHVzaCh0aGlzLl9pWkluZGV4LTIpO2IuY3NzKHsiei1pbmRleCI6dGhpcy5faVpJbmRleC0yLCJ2aXNpYmlsaXR5IjoidmlzaWJsZSJ9KS5zaG93KCk7cSgiaHRtbCIpLmFkZENsYXNzKCJzYXBVaUJMeUJhY2siKX07YS5wcm90b3R5cGUuX2hpZGVCbG9ja0xheWVyPWZ1bmN0aW9uKCl7YS5ibFN0YWNrLnBvcCgpO2lmKGEuYmxTdGFjay5sZW5ndGg+MCl7cSgiI3NhcC11aS1ibG9ja2xheWVyLXBvcHVwIikuY3NzKHsiei1pbmRleCI6YS5ibFN0YWNrW2EuYmxTdGFjay5sZW5ndGgtMV0sInZpc2liaWxpdHkiOiJ2aXNpYmxlIn0pLnNob3coKX1lbHNle3EoIiNzYXAtdWktYmxvY2tsYXllci1wb3B1cCIpLmNzcygidmlzaWJpbGl0eSIsImhpZGRlbiIpLmhpZGUoKTtxKCJodG1sIikucmVtb3ZlQ2xhc3MoInNhcFVpQkx5QmFjayIpfX07YS5Eb2NrVHJpZ2dlcj1uZXcgSSgyMDApO3ZhciByPWZ1bmN0aW9uKG8sYil7aWYoby5sZWZ0IT1iLmxlZnR8fG8udG9wIT1iLnRvcHx8by53aWR0aCE9Yi53aWR0aHx8by5oZWlnaHQhPWIuaGVpZ2h0KXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9O2EuY2hlY2tEb2NraW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXRPcGVuU3RhdGUoKT09PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5PUEVOKXt2YXIgYz10aGlzLl9nZXRPZkRvbSh0aGlzLl9vTGFzdFBvc2l0aW9uLm9mKSxvPXEoYykucmVjdCgpO2lmKCFvKXt0aGlzLmNsb3NlKCk7cmV0dXJufWlmKCFxLnNhcC5jb250YWluc09yRXF1YWxzKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxjKSl7aWYoYy5pZCYmYy5pZCE9PSIiKXt2YXIgbj1xLnNhcC5kb21CeUlkKGMuaWQpO3ZhciBOPXEobikucmVjdCgpO2lmKE4mJiFyKG8sTikpe289TjtkZWxldGUgdGhpcy5fb0xhc3RQb3NpdGlvbi5vZjt0aGlzLl9vTGFzdFBvc2l0aW9uLm9mPW59fX1pZih0aGlzLl9vTGFzdE9mUmVjdCl7aWYoIXIodGhpcy5fb0xhc3RPZlJlY3Qsbykpe2lmKHRoaXMuX2ZvbGxvd09mSGFuZGxlcil7dmFyIGw9cS5leHRlbmQodHJ1ZSx7fSx0aGlzLl9vTGFzdFBvc2l0aW9uKSxMPXEuZXh0ZW5kKHRydWUse30sdGhpcy5fb0xhc3RPZlJlY3QpO3RoaXMuX2ZvbGxvd09mSGFuZGxlcih7bGFzdFBvc2l0aW9uOmwsbGFzdE9mUmVjdDpMLGN1cnJlbnRPZlJlY3Q6b30pfWVsc2V7dGhpcy5fYXBwbHlQb3NpdGlvbih0aGlzLl9vTGFzdFBvc2l0aW9uKX19fX19O2EucHJvdG90eXBlLm9udG91Y2hzdGFydD1mdW5jdGlvbihlKXt0aGlzLm9ubW91c2Vkb3duKGUsdHJ1ZSk7dGhpcy5fYk1vdXNlZG93bkNhbGxlZD10cnVlfTthLnByb3RvdHlwZS5vbm1vdXNlZG93bj1mdW5jdGlvbihlLHMpe2lmKHRoaXMuX2JNb3VzZWRvd25DYWxsZWQmJiFzKXt0aGlzLl9iTW91c2Vkb3duQ2FsbGVkPWZhbHNlO3JldHVybn1pZih0aGlzLl9pWkluZGV4PT09dGhpcy5nZXRMYXN0WkluZGV4KCl8fHRoaXMuZ2V0TW9kYWwoKSl7cmV0dXJufXRoaXMuX2luY3JlYXNlTXlaSW5kZXgoIiIsIm1vdXNlZG93biIsZSl9O2EucHJvdG90eXBlLl9pbmNyZWFzZU15WkluZGV4PWZ1bmN0aW9uKGMsZSxFKXt2YXIgcD10aGlzLmdldFBhcmVudFBvcHVwKHRoaXMuX29MYXN0UG9zaXRpb24ub2YpO2lmKEUudHlwZSYmRS50eXBlPT09Im1vdXNlZG93biJ8fEUuaXNGcm9tUGFyZW50UG9wdXB8fHAubGVuZ3RoPT09MCl7dGhpcy5faVpJbmRleD10aGlzLmdldE5leHRaSW5kZXgoKTt2YXIgJD10aGlzLl8kKCk7JC5jc3MoInotaW5kZXgiLHRoaXMuX2laSW5kZXgpO2lmKHRoaXMuX29CbGluZExheWVyKXt0aGlzLl9vQmxpbmRMYXllci51cGRhdGUoJCx0aGlzLl9pWkluZGV4LTEpfWlmKCFFLnR5cGV8fEUudHlwZSE9Im1vdXNlZG93biIpe3ZhciBiPXRoaXMuZ2V0Q2hpbGRQb3B1cHMoKTtmb3IodmFyIGk9MCxsPWIubGVuZ3RoO2k8bDtpKyspe3RoaXMuaW5jcmVhc2VaSW5kZXgoYltpXSx0cnVlKX19fWVsc2UgaWYocC5sZW5ndGg+MCl7dGhpcy5pbmNyZWFzZVpJbmRleChxKHAuZ2V0KDApKS5hdHRyKCJkYXRhLXNhcC11aS1wb3B1cCIpLGZhbHNlKX19O2EucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oZSl7dmFyICQ9dGhpcy5nZXRDb250ZW50KCkuJCgpOyQudG9nZ2xlQ2xhc3MoInNhcFVpU2hkIix0aGlzLl9iU2hhZG93KTskLmNzcygicG9zaXRpb24iLCJhYnNvbHV0ZSIpO3RoaXMuX3NldElkZW50aXR5KCQpO3ZhciBiPSRbMF07dmFyIGw9Yi5zdHlsZS5sZWZ0O3ZhciBjPWIuc3R5bGUucmlnaHQ7dmFyIHQ9Yi5zdHlsZS50b3A7dmFyIGQ9Yi5zdHlsZS5ib3R0b207aWYoIShsJiZsIT0iYXV0byJ8fGMmJmMhPSJhdXRvInx8dCYmdCE9ImF1dG8ifHxkJiZkIT0iYXV0byIpKXtxLnNhcC5sb2cuZGVidWcoInJlcG9zaXRpb24gcG9wdXAgY29udGVudCAiKyQuYXR0cigiaWQiKSsiIGF0ICIrKHdpbmRvdy5KU09OP0pTT04uc3RyaW5naWZ5KHRoaXMuX29MYXN0UG9zaXRpb24uYXQpOlN0cmluZyh0aGlzLl9vTGFzdFBvc2l0aW9uLmF0KSkpO3RoaXMuX2FwcGx5UG9zaXRpb24odGhpcy5fb0xhc3RQb3NpdGlvbil9JC5zaG93KCkuY3NzKHsidmlzaWJpbGl0eSI6InZpc2libGUiLCJ6LWluZGV4Ijp0aGlzLl9pWkluZGV4fSk7aWYodGhpcy5fb0JsaW5kTGF5ZXIpe3RoaXMuX3Jlc2l6ZUxpc3RlbmVySWQ9c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5yZWdpc3Rlcih0aGlzLl8kKCkuZ2V0KDApLHEucHJveHkodGhpcy5vbnJlc2l6ZSx0aGlzKSl9aWYodGhpcy5pc09wZW4oKSYmKHRoaXMuZ2V0TW9kYWwoKXx8dGhpcy5nZXRBdXRvQ2xvc2UoKSkpe3RoaXMuX2FkZEZvY3VzRXZlbnRMaXN0ZW5lcnMoKX19O2EucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX3Jlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9yZXNpemVMaXN0ZW5lcklkKTt0aGlzLl9yZXNpemVMaXN0ZW5lcklkPW51bGx9aWYodGhpcy5pc09wZW4oKSYmKHRoaXMuZ2V0TW9kYWwoKXx8dGhpcy5nZXRBdXRvQ2xvc2UoKSkpe3RoaXMuX3JlbW92ZUZvY3VzRXZlbnRMaXN0ZW5lcnMoKX19O2EucHJvdG90eXBlLm9ucmVzaXplPWZ1bmN0aW9uKGUpe2lmKHRoaXMuZU9wZW5TdGF0ZSE9c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NFRCYmdGhpcy5fb0JsaW5kTGF5ZXIpe3ZhciB0PXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe3QuX3VwZGF0ZUJsaW5kTGF5ZXIoKX0sMCl9fTthLnByb3RvdHlwZS5fdXBkYXRlQmxpbmRMYXllcj1mdW5jdGlvbigpe2lmKHRoaXMuZU9wZW5TdGF0ZSE9c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NFRCYmdGhpcy5fb0JsaW5kTGF5ZXIpe3RoaXMuX29CbGluZExheWVyLnVwZGF0ZSh0aGlzLl8kKCkpfX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5TY3JvbGxCYXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5TY3JvbGxCYXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9TY3JvbGxCYXIiLFsnLi9saWJyYXJ5JywnLi9Db250cm9sJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLlNjcm9sbEJhciIse21ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiYmluZCIsInVuYmluZCIsInBhZ2VVcCIsInBhZ2VEb3duIl0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJ2ZXJ0aWNhbCI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOnRydWV9LCJzY3JvbGxQb3NpdGlvbiI6e3R5cGU6ImludCIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6bnVsbH0sInNpemUiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiRGltZW5zaW9uIixkZWZhdWx0VmFsdWU6bnVsbH0sImNvbnRlbnRTaXplIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJzdGVwcyI6e3R5cGU6ImludCIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9fSxldmVudHM6eyJzY3JvbGwiOnt9fX19KTtzYXAudWkuY29yZS5TY3JvbGxCYXIuTV9FVkVOVFM9eydzY3JvbGwnOidzY3JvbGwnfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLl8kU2Nyb2xsRG9tUmVmPW51bGw7dGhpcy5faU9sZFNjcm9sbFBvcz0wO3RoaXMuX2lPbGRTdGVwPTA7dGhpcy5fYlNjcm9sbFBvc0lzQ2hlY2tlZD1mYWxzZTt0aGlzLl9iUlRMPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3RoaXMuX2JTdXBwcmVzc1Njcm9sbD1mYWxzZTt0aGlzLl9pTWF4Q29udGVudERpdlNpemU9MTAwMDAwMDtpZihqUXVlcnkuc2FwLnRvdWNoRXZlbnRNb2RlPT09Ik9OIil7alF1ZXJ5LnNhcC5yZXF1aXJlKCJzYXAudWkudGhpcmRwYXJ0eS56eW5nYXNjcm9sbCIpO3RoaXMuX2lMYXN0VG91Y2hTY3JvbGxlclBvc2l0aW9uPW51bGw7dGhpcy5faVRvdWNoU3RlcFRyZXNob2xkPTI0O3RoaXMuX2JTa2lwVG91Y2hIYW5kbGluZz1mYWxzZTt0aGlzLl9vVG91Y2hTY3JvbGxlcj1uZXcgd2luZG93LlNjcm9sbGVyKGpRdWVyeS5wcm94eSh0aGlzLl9oYW5kbGVUb3VjaFNjcm9sbCx0aGlzKSx7Ym91bmNpbmc6ZmFsc2V9KX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUub25CZWZvcmVSZW5kZXJpbmc9ZnVuY3Rpb24oKXt0aGlzLiQoInNiIikudW5iaW5kKCJzY3JvbGwiLHRoaXMub25zY3JvbGwpfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt0aGlzLl9pU3RlcHM9dGhpcy5nZXRTdGVwcygpO3ZhciBjPXRoaXMuZ2V0Q29udGVudFNpemUoKTt0aGlzLl9iU3RlcE1vZGU9IWM7dmFyIHM9dGhpcy5nZXRTaXplKCk7aWYoalF1ZXJ5LnNhcC5lbmRzV2l0aChzLCJweCIpKXtzPXMuc3Vic3RyKDAscy5sZW5ndGgtMil9ZWxzZXtzPXRoaXMuZ2V0VmVydGljYWwoKT90aGlzLiQoKS5oZWlnaHQoKTp0aGlzLiQoKS53aWR0aCgpfXZhciBhPW51bGw7dmFyICQ9dGhpcy4kKCJmZnNpemUiKTtpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94KXthPSQub3V0ZXJIZWlnaHQoKX0kLnJlbW92ZSgpO2lmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLndlYmtpdCl7aWYoIWRvY3VtZW50LndpZHRoKXthPU1hdGgucm91bmQoNDAvKHdpbmRvdy5vdXRlcldpZHRoL2pRdWVyeShkb2N1bWVudCkud2lkdGgoKSkpfWVsc2V7YT1NYXRoLnJvdW5kKDQwLyhkb2N1bWVudC53aWR0aC9qUXVlcnkoZG9jdW1lbnQpLndpZHRoKCkpKX19aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXt0aGlzLl9pRmFjdG9yPSEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3g/YTohIXNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQ/YTpNYXRoLmZsb29yKHMqMC4xMjUpO3RoaXMuX2lGYWN0b3JQYWdlPSEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3g/cy1hOk1hdGguZmxvb3IocyowLjg3NSl9ZWxzZXt0aGlzLl9pRmFjdG9yPSEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3g/MTA6ISFzYXAudWkuRGV2aWNlLmJyb3dzZXIud2Via2l0P2E6Nzt0aGlzLl9pRmFjdG9yUGFnZT0hIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94P01hdGguZmxvb3IocyowLjgpOiEhc2FwLnVpLkRldmljZS5icm93c2VyLndlYmtpdD9NYXRoLmZsb29yKHMqMC44NzUpOnMtMTR9dGhpcy5fJFNjcm9sbERvbVJlZj10aGlzLiQoInNiIik7aWYodGhpcy5fYlN0ZXBNb2RlKXtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3ZhciBTPXRoaXMuX2lTdGVwcyp0aGlzLl9pRmFjdG9yO2lmKFM+dGhpcy5faU1heENvbnRlbnREaXZTaXplKXt0aGlzLl9pRmFjdG9yPU1hdGguY2VpbCh0aGlzLl9pRmFjdG9yL01hdGguY2VpbChTL3RoaXMuX2lNYXhDb250ZW50RGl2U2l6ZSkpfXZhciBDPXRoaXMuXyRTY3JvbGxEb21SZWYuaGVpZ2h0KCkrdGhpcy5faVN0ZXBzKnRoaXMuX2lGYWN0b3I7dGhpcy5fJFNjcm9sbERvbVJlZi5maW5kKCJkaXYiKS5oZWlnaHQoQyl9ZWxzZXt2YXIgQz10aGlzLl8kU2Nyb2xsRG9tUmVmLndpZHRoKCkrdGhpcy5faVN0ZXBzKnRoaXMuX2lGYWN0b3I7dGhpcy5fJFNjcm9sbERvbVJlZi5maW5kKCJkaXYiKS53aWR0aChDKX19dGhpcy5zZXRDaGVja2VkU2Nyb2xsUG9zaXRpb24odGhpcy5nZXRTY3JvbGxQb3NpdGlvbigpP3RoaXMuZ2V0U2Nyb2xsUG9zaXRpb24oKTowLHRydWUpO3RoaXMuXyRTY3JvbGxEb21SZWYuYmluZCgic2Nyb2xsIixqUXVlcnkucHJveHkodGhpcy5vbnNjcm9sbCx0aGlzKSk7aWYoalF1ZXJ5LnNhcC50b3VjaEV2ZW50TW9kZT09PSJPTiIpe3RoaXMuX2JTa2lwVG91Y2hIYW5kbGluZz10cnVlO3ZhciBvPXt3aWR0aDowLGhlaWdodDowfTtvW3RoaXMuZ2V0VmVydGljYWwoKT8iaGVpZ2h0Ijoid2lkdGgiXT10aGlzLl9iU3RlcE1vZGU/KHRoaXMuZ2V0U3RlcHMoKSp0aGlzLl9pVG91Y2hTdGVwVHJlc2hvbGQpOnBhcnNlSW50KHRoaXMuZ2V0Q29udGVudFNpemUoKSwxMCk7dGhpcy5fb1RvdWNoU2Nyb2xsZXIuc2V0RGltZW5zaW9ucygwLDAsby53aWR0aCxvLmhlaWdodCk7dmFyIGU9dGhpcy5fJFNjcm9sbERvbVJlZi5nZXQoMCk7dmFyIHI9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt0aGlzLl9vVG91Y2hTY3JvbGxlci5zZXRQb3NpdGlvbihyLmxlZnQrZS5jbGllbnRMZWZ0LHIudG9wK2UuY2xpZW50VG9wKTt0aGlzLl9iU2tpcFRvdWNoSGFuZGxpbmc9ZmFsc2V9fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLm9ubW91c2V3aGVlbD1mdW5jdGlvbihlKXtpZih0aGlzLiQoKS5pcygiOnZpc2libGUiKSl7dmFyIG89ZS5vcmlnaW5hbEV2ZW50O3ZhciB3PW8uZGV0YWlsP28uZGV0YWlsOm8ud2hlZWxEZWx0YSooLTEpLzQwO3ZhciBmPXc+MD90cnVlOmZhbHNlO2lmKGpRdWVyeS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLl8kU2Nyb2xsRG9tUmVmWzBdLGUudGFyZ2V0KSl7dGhpcy5fZG9TY3JvbGwoc2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uLk1vdXNlV2hlZWwsZil9ZWxzZXt0aGlzLl9iTW91c2VXaGVlbD10cnVlO3ZhciBwPW51bGw7aWYodGhpcy5fYlN0ZXBNb2RlKXtwPXcrdGhpcy5faU9sZFN0ZXB9ZWxzZXtwPXcqdGhpcy5faUZhY3Rvcit0aGlzLl9pT2xkU2Nyb2xsUG9zfXRoaXMuc2V0Q2hlY2tlZFNjcm9sbFBvc2l0aW9uKHAsdHJ1ZSl9ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCk7cmV0dXJuIGZhbHNlfX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5vbnRvdWNoc3RhcnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50b3VjaGVzO3ZhciBmPXRbMF07aWYoZiYmZi50YXJnZXQmJmYudGFyZ2V0LnRhZ05hbWUubWF0Y2goL2lucHV0fHRleHRhcmVhfHNlbGVjdC9pKSl7cmV0dXJufWlmKHRoaXMuX29Ub3VjaFNjcm9sbGVyKXt0aGlzLl9vVG91Y2hTY3JvbGxlci5kb1RvdWNoU3RhcnQodCxlLnRpbWVTdGFtcCl9aWYodC5sZW5ndGg9PTEpe2UucHJldmVudERlZmF1bHQoKX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUub250b3VjaG1vdmU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fb1RvdWNoU2Nyb2xsZXIpe3RoaXMuX29Ub3VjaFNjcm9sbGVyLmRvVG91Y2hNb3ZlKGUudG91Y2hlcyxlLnRpbWVTdGFtcCxlLnNjYWxlKX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUub250b3VjaGVuZD1mdW5jdGlvbihlKXtpZih0aGlzLl9vVG91Y2hTY3JvbGxlcil7dGhpcy5fb1RvdWNoU2Nyb2xsZXIuZG9Ub3VjaEVuZChlLnRpbWVTdGFtcCl9fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLm9udG91Y2hjYW5jZWw9ZnVuY3Rpb24oZSl7aWYodGhpcy5fb1RvdWNoU2Nyb2xsZXIpe3RoaXMuX29Ub3VjaFNjcm9sbGVyLmRvVG91Y2hFbmQoZS50aW1lU3RhbXApfX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5vbnNjcm9sbD1mdW5jdGlvbihlKXtpZih0aGlzLl9iU3VwcHJlc3NTY3JvbGwpe3RoaXMuX2JTdXBwcmVzc1Njcm9sbD1mYWxzZTtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKTtyZXR1cm4gZmFsc2V9dmFyIHM9bnVsbDtpZih0aGlzLl8kU2Nyb2xsRG9tUmVmKXtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3M9dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxUb3AoKX1lbHNle3M9dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxMZWZ0KCk7aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveCYmdGhpcy5fYlJUTCl7cz1NYXRoLmFicyhzKX1lbHNlIGlmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLndlYmtpdCYmdGhpcy5fYlJUTCl7dmFyIFM9dGhpcy5fJFNjcm9sbERvbVJlZi5nZXQoMCk7cz1TLnNjcm9sbFdpZHRoLVMuY2xpZW50V2lkdGgtUy5zY3JvbGxMZWZ0fX19dmFyIGQ9cy10aGlzLl9pT2xkU2Nyb2xsUG9zO3ZhciBmPWQ+MD90cnVlOmZhbHNlO2lmKGQ8MCl7ZD1kKigtMSl9dmFyIGE9c2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uLkRyYWc7aWYoZD09dGhpcy5faUZhY3Rvcil7YT1zYXAudWkuY29yZS5TY3JvbGxCYXJBY3Rpb24uU3RlcH1lbHNlIGlmKGQ9PXRoaXMuX2lGYWN0b3JQYWdlKXthPXNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbi5QYWdlfWVsc2UgaWYodGhpcy5fYk1vdXNlV2hlZWwpe2E9c2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uLk1vdXNlV2hlZWx9dGhpcy5fZG9TY3JvbGwoYSxmKTtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKTtyZXR1cm4gZmFsc2V9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuX2hhbmRsZVRvdWNoU2Nyb2xsPWZ1bmN0aW9uKGwsdCx6KXtpZih0aGlzLl9iU2tpcFRvdWNoSGFuZGxpbmcpe3JldHVybn12YXIgdj10aGlzLmdldFZlcnRpY2FsKCk/dDpsO2lmKHRoaXMuX2JTdGVwTW9kZSl7dmFyIHA9TWF0aC5tYXgoTWF0aC5yb3VuZCh2L3RoaXMuX2lUb3VjaFN0ZXBUcmVzaG9sZCksMCl9ZWxzZXt2YXIgcD1NYXRoLnJvdW5kKHYpfWlmKHRoaXMuX2lMYXN0VG91Y2hTY3JvbGxlclBvc2l0aW9uIT09cCl7dGhpcy5faUxhc3RUb3VjaFNjcm9sbGVyUG9zaXRpb249cDt0aGlzLnNldENoZWNrZWRTY3JvbGxQb3NpdGlvbihwLHRydWUpO3RoaXMuZmlyZVNjcm9sbCgpfX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS51bmJpbmQ9ZnVuY3Rpb24obyl7aWYobyl7dGhpcy5fJE93bmVyRG9tUmVmPWpRdWVyeShvKTtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3RoaXMuXyRPd25lckRvbVJlZi51bmJpbmQoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveD8iRE9NTW91c2VTY3JvbGwiOiJtb3VzZXdoZWVsIix0aGlzLm9ubW91c2V3aGVlbCl9aWYoalF1ZXJ5LnNhcC50b3VjaEV2ZW50TW9kZT09PSJPTiIpe3RoaXMuXyRPd25lckRvbVJlZi51bmJpbmQodGhpcy5fZ2V0VG91Y2hFdmVudFR5cGUoInRvdWNoc3RhcnQiKSxqUXVlcnkucHJveHkodGhpcy5vbnRvdWNoc3RhcnQsdGhpcykpO3RoaXMuXyRPd25lckRvbVJlZi51bmJpbmQodGhpcy5fZ2V0VG91Y2hFdmVudFR5cGUoInRvdWNobW92ZSIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2htb3ZlLHRoaXMpKTt0aGlzLl8kT3duZXJEb21SZWYudW5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaGVuZCIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2hlbmQsdGhpcykpO3RoaXMuXyRPd25lckRvbVJlZi51bmJpbmQodGhpcy5fZ2V0VG91Y2hFdmVudFR5cGUoInRvdWNoY2FuY2xlIiksalF1ZXJ5LnByb3h5KHRoaXMub250b3VjaGNhbmNsZSx0aGlzKSl9fX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKG8pe2lmKG8pe3RoaXMuXyRPd25lckRvbVJlZj1qUXVlcnkobyk7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXt0aGlzLl8kT3duZXJEb21SZWYuYmluZCghIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94PyJET01Nb3VzZVNjcm9sbCI6Im1vdXNld2hlZWwiLGpRdWVyeS5wcm94eSh0aGlzLm9ubW91c2V3aGVlbCx0aGlzKSl9aWYoalF1ZXJ5LnNhcC50b3VjaEV2ZW50TW9kZT09PSJPTiIpe3RoaXMuXyRPd25lckRvbVJlZi5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaHN0YXJ0IiksalF1ZXJ5LnByb3h5KHRoaXMub250b3VjaHN0YXJ0LHRoaXMpKTt0aGlzLl8kT3duZXJEb21SZWYuYmluZCh0aGlzLl9nZXRUb3VjaEV2ZW50VHlwZSgidG91Y2htb3ZlIiksalF1ZXJ5LnByb3h5KHRoaXMub250b3VjaG1vdmUsdGhpcykpO3RoaXMuXyRPd25lckRvbVJlZi5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaGVuZCIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2hlbmQsdGhpcykpO3RoaXMuXyRPd25lckRvbVJlZi5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaGNhbmNsZSIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2hjYW5jbGUsdGhpcykpfX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuX2dldFRvdWNoRXZlbnRUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBqUXVlcnkuc2FwLnRvdWNoRXZlbnRNb2RlPT09IlNJTSI/KCJzYXAiK3QpOnR9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUucGFnZVVwPWZ1bmN0aW9uKCl7dGhpcy5fZG9TY3JvbGwoc2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uLlBhZ2UsZmFsc2UpfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLnBhZ2VEb3duPWZ1bmN0aW9uKCl7dGhpcy5fZG9TY3JvbGwoc2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uLlBhZ2UsdHJ1ZSl9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuc2V0U2Nyb2xsUG9zaXRpb249ZnVuY3Rpb24ocyl7aWYodGhpcy5fJFNjcm9sbERvbVJlZil7dGhpcy5zZXRDaGVja2VkU2Nyb2xsUG9zaXRpb24ocyx0cnVlKX1lbHNle3RoaXMuc2V0UHJvcGVydHkoInNjcm9sbFBvc2l0aW9uIixzKX1yZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5zZXRDaGVja2VkU2Nyb2xsUG9zaXRpb249ZnVuY3Rpb24ocyxjKXt2YXIgQz1NYXRoLm1heChzLDApO2lmKHRoaXMuX2JTdGVwTW9kZT09PXVuZGVmaW5lZCl7dGhpcy5fYlN0ZXBNb2RlPSF0aGlzLmdldENvbnRlbnRTaXplKCl9dmFyIFM9QztpZih0aGlzLl9iU3RlcE1vZGUpe0M9TWF0aC5taW4oQyx0aGlzLmdldFN0ZXBzKCkpO1M9Qyp0aGlzLl9pRmFjdG9yfUM9TWF0aC5mbG9vcihDKTt0aGlzLl9iU3VwcHJlc3NTY3JvbGw9IWM7dGhpcy5zZXRQcm9wZXJ0eSgic2Nyb2xsUG9zaXRpb24iLEMsdHJ1ZSk7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXt0aGlzLl8kU2Nyb2xsRG9tUmVmLnNjcm9sbFRvcChTKX1lbHNle2lmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3gmJnRoaXMuX2JSVEwpe3RoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsTGVmdCgtUyl9ZWxzZSBpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQmJnRoaXMuX2JSVEwpe3ZhciBvPXRoaXMuXyRTY3JvbGxEb21SZWYuZ2V0KDApO3RoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsTGVmdChvLnNjcm9sbFdpZHRoLW8uY2xpZW50V2lkdGgtUyl9ZWxzZXt0aGlzLl8kU2Nyb2xsRG9tUmVmLnNjcm9sbExlZnQoUyl9fWlmKGpRdWVyeS5zYXAudG91Y2hFdmVudE1vZGU9PT0iT04iKXt2YXIgdj1DO2lmKHRoaXMuX2JTdGVwTW9kZSl7dj1NYXRoLnJvdW5kKEMqdGhpcy5faVRvdWNoU3RlcFRyZXNob2xkKX10aGlzLl9vVG91Y2hTY3JvbGxlci5fX3Njcm9sbFRvcD10aGlzLmdldFZlcnRpY2FsKCk/djowO3RoaXMuX29Ub3VjaFNjcm9sbGVyLl9fc2Nyb2xsTGVmdD10aGlzLmdldFZlcnRpY2FsKCk/MDp2fX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5zZXRDb250ZW50U2l6ZT1mdW5jdGlvbihjKXt0aGlzLnNldFByb3BlcnR5KCJjb250ZW50U2l6ZSIsYyk7dGhpcy5fYlN0ZXBNb2RlPWZhbHNlO3ZhciBzPXRoaXMuJCgic2JjbnQiKTtpZihzKXtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3MuaGVpZ2h0KGMpfWVsc2V7cy53aWR0aChjKX19cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuX2RvU2Nyb2xsPWZ1bmN0aW9uKGUsZil7dmFyIHM9bnVsbDtpZih0aGlzLl8kU2Nyb2xsRG9tUmVmKXtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3M9dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxUb3AoKX1lbHNle3M9dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxMZWZ0KCk7aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveCYmdGhpcy5fYlJUTCl7cz1NYXRoLmFicyhzKX1lbHNlIGlmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLndlYmtpdCYmdGhpcy5fYlJUTCl7dmFyIFM9dGhpcy5fJFNjcm9sbERvbVJlZi5nZXQoMCk7cz1TLnNjcm9sbFdpZHRoLVMuY2xpZW50V2lkdGgtUy5zY3JvbGxMZWZ0fX19aWYodGhpcy5fYlN0ZXBNb2RlKXt2YXIgaT1NYXRoLnJvdW5kKHMvdGhpcy5faUZhY3Rvcik7dmFyIG89dGhpcy5faU9sZFN0ZXA7aWYobyE9PWkpe3RoaXMuc2V0Q2hlY2tlZFNjcm9sbFBvc2l0aW9uKGksZmFsc2UpO2pRdWVyeS5zYXAubG9nLmRlYnVnKCItLS0tLVNURVBNT0RFLS0tLS06IE5ldyBTdGVwOiAiK2krIiAtLS0gT2xkIFN0ZXA6ICIrbysiIC0tLSBTY3JvbGwgUG9zIGluIHB4OiAiK3MrIiAtLS0gQWN0aW9uOiAiK2UrIiAtLS0gRGlyZWN0aW9uIGlzIGZvcndhcmQ6ICIrZik7dGhpcy5maXJlU2Nyb2xsKHthY3Rpb246ZSxmb3J3YXJkOmYsbmV3U2Nyb2xsUG9zOmksb2xkU2Nyb2xsUG9zOm99KTt0aGlzLl9pT2xkU3RlcD1pfX1lbHNle3RoaXMuc2V0UHJvcGVydHkoInNjcm9sbFBvc2l0aW9uIixzLHRydWUpO2pRdWVyeS5zYXAubG9nLmRlYnVnKCItLS0tLVBJWEVMTU9ERS0tLS0tOiBOZXcgU2Nyb2xsUG9zOiAiK3MrIiAtLS0gT2xkIFNjcm9sbFBvczogIit0aGlzLl9pT2xkU2Nyb2xsUG9zKyIgLS0tIEFjdGlvbjogIitlKyIgLS0tIERpcmVjdGlvbiBpcyBmb3J3YXJkOiAiK2YpO3RoaXMuZmlyZVNjcm9sbCh7YWN0aW9uOmUsZm9yd2FyZDpmLG5ld1Njcm9sbFBvczpzLG9sZFNjcm9sbFBvczp0aGlzLl9pT2xkU2Nyb2xsUG9zfSl9dGhpcy5fYlN1cHByZXNzU2Nyb2xsPWZhbHNlO3RoaXMuX2lPbGRTY3JvbGxQb3M9czt0aGlzLl9iTW91c2VXaGVlbD1mYWxzZX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5vblRoZW1lQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMucmVyZW5kZXIoKX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5nZXROYXRpdmVTY3JvbGxQb3NpdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuXyRTY3JvbGxEb21SZWYpe2lmKHRoaXMuZ2V0VmVydGljYWwoKSl7cmV0dXJuIHRoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsVG9wKCl9ZWxzZXtyZXR1cm4gdGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxMZWZ0KCl9fXJldHVybiAwfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLnNldE5hdGl2ZVNjcm9sbFBvc2l0aW9uPWZ1bmN0aW9uKG4pe2lmKHRoaXMuXyRTY3JvbGxEb21SZWYpe2lmKHRoaXMuZ2V0VmVydGljYWwoKSl7dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxUb3Aobil9ZWxzZXt0aGlzLl8kU2Nyb2xsRG9tUmVmLnNjcm9sbExlZnQobil9fX07cmV0dXJuIHNhcC51aS5jb3JlLlNjcm9sbEJhcn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlNlcGFyYXRvckl0ZW0nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5TZXBhcmF0b3JJdGVtJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvU2VwYXJhdG9ySXRlbSIsWycuL2xpYnJhcnknLCcuL0l0ZW0nXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5JdGVtLmV4dGVuZCgic2FwLnVpLmNvcmUuU2VwYXJhdG9ySXRlbSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSJ9fSk7cmV0dXJuIHNhcC51aS5jb3JlLlNlcGFyYXRvckl0ZW19LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5UaXRsZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlRpdGxlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVGl0bGUiLFsnLi9saWJyYXJ5JywnLi9FbGVtZW50J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuRWxlbWVudC5leHRlbmQoInNhcC51aS5jb3JlLlRpdGxlIix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsidGV4dCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwiaWNvbiI6e3R5cGU6InNhcC51aS5jb3JlLlVSSSIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwibGV2ZWwiOnt0eXBlOiJzYXAudWkuY29yZS5UaXRsZUxldmVsIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOnNhcC51aS5jb3JlLlRpdGxlTGV2ZWwuQXV0b30sImVtcGhhc2l6ZWQiOnt0eXBlOiJib29sZWFuIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOmZhbHNlfX19fSk7cmV0dXJuIHNhcC51aS5jb3JlLlRpdGxlfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Ub29sdGlwQmFzZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1Rvb2x0aXBCYXNlIixbJy4vbGlicmFyeScsJy4vQ29udHJvbCcsJy4vUG9wdXAnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UiLHttZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsidGV4dCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZToiIn0sIm9wZW5EdXJhdGlvbiI6e3R5cGU6ImludCIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6MjAwfSwiY2xvc2VEdXJhdGlvbiI6e3R5cGU6ImludCIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6MjAwfSwibXlQb3NpdGlvbiI6e3R5cGU6InNhcC51aS5jb3JlLkRvY2siLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOidiZWdpbiB0b3AnfSwiYXRQb3NpdGlvbiI6e3R5cGU6InNhcC51aS5jb3JlLkRvY2siLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOidiZWdpbiBib3R0b20nfSwib2Zmc2V0Ijp7dHlwZToic3RyaW5nIixncm91cDoiQmVoYXZpb3IiLGRlZmF1bHRWYWx1ZTonMTAgMyd9LCJjb2xsaXNpb24iOnt0eXBlOiJzYXAudWkuY29yZS5Db2xsaXNpb24iLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOidmbGlwJ30sIm9wZW5EZWxheSI6e3R5cGU6ImludCIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTo1MDB9LCJjbG9zZURlbGF5Ijp7dHlwZToiaW50Iixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOjEwMH19LGV2ZW50czp7ImNsb3NlZCI6e319fX0pO3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLk1fRVZFTlRTPXsnY2xvc2VkJzonY2xvc2VkJ307c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLl9nZXRQb3B1cD1qUXVlcnkuc2FwLmdldHRlcigoZnVuY3Rpb24oKXt2YXIgcD1uZXcgc2FwLnVpLmNvcmUuUG9wdXAoKTtwLnNldFNoYWRvdyh0cnVlKTtyZXR1cm4gcH0oKSkpO3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5vbmZvY3VzaW49ZnVuY3Rpb24oZSl7dmFyIHM9alF1ZXJ5KGUudGFyZ2V0KS5jb250cm9sKDApO2lmKHMhPW51bGwpe3ZhciBkPXMuZ2V0Rm9jdXNEb21SZWYoKTt0aGlzLnNTdG9yZWRUb29sdGlwPW51bGw7aWYoZC50aXRsZSYmZC50aXRsZSE9IiIpe3RoaXMuc1N0b3JlZFRvb2x0aXA9ZC50aXRsZTtkLnRpdGxlPSIifXZhciBwPXRoaXMuX2dldFBvcHVwKCk7aWYoIShwLmlzT3BlbigpJiZwLmdldENvbnRlbnQoKT09dGhpcykpe3NhcC51aS5nZXRDb3JlKCkuZ2V0UmVuZGVyTWFuYWdlcigpLnJlbmRlcih0aGlzLHNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpLHRydWUpfXZhciB2PWQuZ2V0QXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZGJ5Iik7dmFyIGk9dGhpcy5nZXRJZCgpKyItdGl0bGUgIit0aGlzLmdldElkKCkrIi10eHQiO2lmKHY9PW51bGx8fHY9PSIiKXtkLnNldEF0dHJpYnV0ZSgiYXJpYS1kZXNjcmliZWRieSIsaSl9ZWxzZSBpZih2LmluZGV4T2YoaSk9PS0xKXtkLnNldEF0dHJpYnV0ZSgiYXJpYS1kZXNjcmliZWRieSIsdisiICIraSl9fX07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLm9uZm9jdXNvdXQ9ZnVuY3Rpb24oZSl7dmFyIHM9alF1ZXJ5KGUudGFyZ2V0KS5jb250cm9sKDApO2lmKHMhPW51bGwpe3ZhciBkPXMuZ2V0Rm9jdXNEb21SZWYoKTtpZih0aGlzLnNTdG9yZWRUb29sdGlwKXtkLnRpdGxlPXRoaXMuc1N0b3JlZFRvb2x0aXB9dmFyIHY9ZC5nZXRBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkYnkiKTt2YXIgaT10aGlzLmdldElkKCkrIi10aXRsZSAiK3RoaXMuZ2V0SWQoKSsiLXR4dCI7aWYodiYmdi5pbmRleE9mKGkpPj0wKXtpZihqUXVlcnkudHJpbSh2KT09aSl7ZC5yZW1vdmVBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkYnkiKX1lbHNle3Y9di5yZXBsYWNlKGksIiIpO2Quc2V0QXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZGJ5Iix2KX19fWlmKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCk7c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0PXVuZGVmaW5lZH10aGlzLnNDbG9zZU5vd1RpbWVvdXQ9alF1ZXJ5LnNhcC5kZWxheWVkQ2FsbCh0aGlzLmdldENsb3NlRGVsYXkoKSx0aGlzLCJjbG9zZVBvcHVwIil9O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5pc1N0YW5kYXJkVG9vbHRpcD1mdW5jdGlvbih0KXtyZXR1cm4odHlwZW9mIHQ9PT0ic3RyaW5nIiYmKGpRdWVyeS50cmltKHQpKSE9PSIiKX07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLm9ubW91c2VvdmVyPWZ1bmN0aW9uKGUpe3ZhciBFPWpRdWVyeShlLnRhcmdldCkuY29udHJvbCgwKTtpZihFIT1udWxsKXtpZihFPT09dGhpcyl7aWYodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KXtqUXVlcnkuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KTt0aGlzLnNDbG9zZU5vd1RpbWVvdXQ9bnVsbH1lLnN0b3BQcm9wYWdhdGlvbigpO2UucHJldmVudERlZmF1bHQoKTtyZXR1cm59dmFyIGM9alF1ZXJ5KGUuY3VycmVudFRhcmdldCkuY29udHJvbCgwKTtpZihjIT09RSYmIXRoaXMuaXNTdGFuZGFyZFRvb2x0aXAoRS5nZXRUb29sdGlwKCkpKXtpZih0aGlzLnNDbG9zZU5vd1RpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLnNDbG9zZU5vd1RpbWVvdXQpO3RoaXMuc0Nsb3NlTm93VGltZW91dD1udWxsO2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpO3JldHVybn19dmFyIGw9alF1ZXJ5KGUucmVsYXRlZFRhcmdldCkuY29udHJvbCgwKTtpZihsKXtpZihsLmdldFBhcmVudCgpKXtpZihsLmdldFBhcmVudCgpPT09YyYmYz09PUUpe3ZhciBMPWwuZ2V0VG9vbHRpcCgpO2lmKCF0aGlzLmlzU3RhbmRhcmRUb29sdGlwKEwpJiYoIUx8fCEoTCBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlKSkpe2lmKHRoaXMuc0Nsb3NlTm93VGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuc0Nsb3NlTm93VGltZW91dCk7dGhpcy5zQ2xvc2VOb3dUaW1lb3V0PW51bGw7ZS5zdG9wUHJvcGFnYXRpb24oKTtlLnByZXZlbnREZWZhdWx0KCk7cmV0dXJufX19fX1pZih0aGlzLl9jdXJyZW50Q29udHJvbD09PUV8fCF0aGlzLmlzU3RhbmRhcmRUb29sdGlwKEUuZ2V0VG9vbHRpcCgpKSl7dGhpcy5yZW1vdmVTdGFuZGFyZFRvb2x0aXBzKEUpO2lmKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCl9c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0PWpRdWVyeS5zYXAuZGVsYXllZENhbGwodGhpcy5nZXRPcGVuRGVsYXkoKSx0aGlzLCJvcGVuUG9wdXAiLFt0aGlzLl9jdXJyZW50Q29udHJvbF0pO2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpfX19O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5vbm1vdXNlb3V0PWZ1bmN0aW9uKGUpe2lmKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCk7c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0PXVuZGVmaW5lZH1pZighdGhpcy5zQ2xvc2VOb3dUaW1lb3V0KXt0aGlzLnNDbG9zZU5vd1RpbWVvdXQ9alF1ZXJ5LnNhcC5kZWxheWVkQ2FsbCh0aGlzLmdldENsb3NlRGVsYXkoKSx0aGlzLCJjbG9zZVBvcHVwIil9dGhpcy5yZXN0b3JlU3RhbmRhcmRUb29sdGlwcygpO2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpfTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUuY2xvc2VQb3B1cD1mdW5jdGlvbigpe3ZhciBwPXRoaXMuX2dldFBvcHVwKCk7aWYodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KXtqUXVlcnkuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KX10aGlzLnNDbG9zZU5vd1RpbWVvdXQ9dW5kZWZpbmVkO3AuYXR0YWNoQ2xvc2VkKHRoaXMuaGFuZGxlQ2xvc2VkLHRoaXMpO3AuY2xvc2UoKTt0aGlzLnJlc3RvcmVTdGFuZGFyZFRvb2x0aXBzKCl9O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5oYW5kbGVDbG9zZWQ9ZnVuY3Rpb24oKXt0aGlzLl9nZXRQb3B1cCgpLmRldGFjaENsb3NlZChqUXVlcnkucHJveHkodGhpcy5oYW5kbGVDbG9zZWQsdGhpcykpO3RoaXMuZmlyZUNsb3NlZCgpfTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUub3BlblBvcHVwPWZ1bmN0aW9uKHMpe2lmKHMuZ2V0VG9vbHRpcCgpIT1udWxsKXtpZih0aGlzLnNDbG9zZU5vd1RpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLnNDbG9zZU5vd1RpbWVvdXQpO3RoaXMuc0Nsb3NlTm93VGltZW91dD1udWxsO3JldHVybn12YXIgcD10aGlzLl9nZXRQb3B1cCgpO2lmKHAuaXNPcGVuKCkmJnAuZ2V0Q29udGVudCgpPT10aGlzKXtyZXR1cm59c2FwLnVpLmdldENvcmUoKS5nZXRSZW5kZXJNYW5hZ2VyKCkucmVuZGVyKHRoaXMsc2FwLnVpLmdldENvcmUoKS5nZXRTdGF0aWNBcmVhUmVmKCksdHJ1ZSk7dmFyIGQ9cy5nZXREb21SZWYoKTtwLnNldENvbnRlbnQodGhpcyk7cC5zZXRQb3NpdGlvbih0aGlzLmdldE15UG9zaXRpb24oKSx0aGlzLmdldEF0UG9zaXRpb24oKSxkLHRoaXMuZ2V0T2Zmc2V0KCksdGhpcy5nZXRDb2xsaXNpb24oKSk7cC5zZXREdXJhdGlvbnModGhpcy5nZXRPcGVuRHVyYXRpb24oKSx0aGlzLmdldENsb3NlRHVyYXRpb24oKSk7cC5vcGVuKCk7dGhpcy5yZW1vdmVTdGFuZGFyZFRvb2x0aXBzKHRoaXMuX2N1cnJlbnRDb250cm9sKX19O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5yZW1vdmVTdGFuZGFyZFRvb2x0aXBzPWZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5fY3VycmVudENvbnRyb2wuZ2V0RG9tUmVmKCk7aWYoIXRoaXMuYVN0b3JlZFRvb2x0aXBzKXt0aGlzLmFTdG9yZWRUb29sdGlwcz1bXX1lbHNle3JldHVybn12YXIgdD0iIjt3aGlsZShkJiYhKGQ9PT1kb2N1bWVudCkpe3Q9ZC50aXRsZTtpZih0KXt0aGlzLmFTdG9yZWRUb29sdGlwcy5wdXNoKHtkb21yZWY6ZCx0b29sdGlwOnR9KTtkLnRpdGxlPSIifWQ9ZC5wYXJlbnROb2RlfWlmKHRoaXMuX2N1cnJlbnRDb250cm9sLmdldFRvb2x0aXBEb21SZWZzKXt2YXIgRD10aGlzLl9jdXJyZW50Q29udHJvbC5nZXRUb29sdGlwRG9tUmVmcygpO2Zvcih2YXIgaT0wO2k8RC5sZW5ndGg7aSsrKXtkPURbaV07aWYoZCl7dD1kLnRpdGxlO2lmKHQpe3RoaXMuYVN0b3JlZFRvb2x0aXBzLnB1c2goe2RvbXJlZjpkLHRvb2x0aXA6dH0pO2QudGl0bGU9IiJ9fX19fTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUucmVzdG9yZVN0YW5kYXJkVG9vbHRpcHM9ZnVuY3Rpb24oKXt2YXIgcD10aGlzLl9nZXRQb3B1cCgpO3ZhciBlPXAuZ2V0T3BlblN0YXRlKCk7aWYoZT09PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5PUEVOfHxlPT09c2FwLnVpLmNvcmUuT3BlblN0YXRlLk9QRU5JTkcpe3JldHVybn1pZihzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpe3JldHVybn1pZih0aGlzLmFTdG9yZWRUb29sdGlwcyl7Zm9yKHZhciBpPTA7aTx0aGlzLmFTdG9yZWRUb29sdGlwcy5sZW5ndGg7aSsrKXt2YXIgZD10aGlzLmFTdG9yZWRUb29sdGlwc1tpXS5kb21yZWY7ZC50aXRsZT10aGlzLmFTdG9yZWRUb29sdGlwc1tpXS50b29sdGlwfX10aGlzLmFTdG9yZWRUb29sdGlwcz1udWxsfTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUuX3NldFBhcmVudD1zYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUuc2V0UGFyZW50O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5zZXRQYXJlbnQ9ZnVuY3Rpb24ocCxhKXt2YXIgXz10aGlzLl9nZXRQb3B1cCgpO2lmKF8mJl8uaXNPcGVuKCkpe3RoaXMuY2xvc2VQb3B1cCgpfXRoaXMuX3NldFBhcmVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5vbmtleWRvd249ZnVuY3Rpb24oZSl7aWYoZS5jdHJsS2V5JiZlLndoaWNoPT1qUXVlcnkuc2FwLktleUNvZGVzLkkpe3ZhciBFPWpRdWVyeShlLnRhcmdldCkuY29udHJvbCgwKTtpZihFIT1udWxsKXtpZih0aGlzLl9jdXJyZW50Q29udHJvbD09PUV8fCF0aGlzLmlzU3RhbmRhcmRUb29sdGlwKEUuZ2V0VG9vbHRpcCgpKSl7dGhpcy5yZW1vdmVTdGFuZGFyZFRvb2x0aXBzKEUpO3RoaXMub3BlblBvcHVwKHRoaXMuX2N1cnJlbnRDb250cm9sKTtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX19fWVsc2UgaWYoZS53aGljaD09alF1ZXJ5LnNhcC5LZXlDb2Rlcy5FU0NBUEUpe2lmKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCk7c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0PXVuZGVmaW5lZH12YXIgdz10aGlzLm9Qb3B1cCYmdGhpcy5vUG9wdXAuaXNPcGVuKCk7dGhpcy5jbG9zZVBvcHVwKCk7aWYodyl7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9fX07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLl9jbG9zZU9yUHJldmVudE9wZW49ZnVuY3Rpb24oKXt2YXIgcD10aGlzLl9nZXRQb3B1cCgpO2lmKHAuaXNPcGVuKCkpe3RoaXMuY2xvc2VQb3B1cCgpfWVsc2UgaWYoc2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0KXtqUXVlcnkuc2FwLmNsZWFyRGVsYXllZENhbGwoc2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0KTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQ9dW5kZWZpbmVkfX07cmV0dXJuIHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVmFyaWFudExheW91dERhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5WYXJpYW50TGF5b3V0RGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1ZhcmlhbnRMYXlvdXREYXRhIixbJy4vbGlicmFyeScsJy4vTGF5b3V0RGF0YSddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkxheW91dERhdGEuZXh0ZW5kKCJzYXAudWkuY29yZS5WYXJpYW50TGF5b3V0RGF0YSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIsYWdncmVnYXRpb25zOnsibXVsdGlwbGVMYXlvdXREYXRhIjp7dHlwZToic2FwLnVpLmNvcmUuTGF5b3V0RGF0YSIsbXVsdGlwbGU6dHJ1ZSxzaW5ndWxhck5hbWU6Im11bHRpcGxlTGF5b3V0RGF0YSJ9fX19KTtyZXR1cm4gc2FwLnVpLmNvcmUuVmFyaWFudExheW91dERhdGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuVmlldycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5WaWV3Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL1ZpZXciLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJ3NhcC91aS9jb3JlL0NvbnRyb2wnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLlZpZXciLHttZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldENvbnRyb2xsZXIiXSxsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7IndpZHRoIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOicxMDAlJ30sImhlaWdodCI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTpudWxsfSwidmlld05hbWUiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6bnVsbH0sImRpc3BsYXlCbG9jayI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6ZmFsc2V9fSxhZ2dyZWdhdGlvbnM6eyJjb250ZW50Ijp7dHlwZToic2FwLnVpLmNvcmUuQ29udHJvbCIsbXVsdGlwbGU6dHJ1ZSxzaW5ndWxhck5hbWU6ImNvbnRlbnQifX0sZXZlbnRzOnsiYWZ0ZXJJbml0Ijp7fSwiYmVmb3JlRXhpdCI6e30sImFmdGVyUmVuZGVyaW5nIjp7fSwiYmVmb3JlUmVuZGVyaW5nIjp7fX19fSk7c2FwLnVpLmNvcmUubXZjLlZpZXcuTV9FVkVOVFM9eydhZnRlckluaXQnOidhZnRlckluaXQnLCdiZWZvcmVFeGl0JzonYmVmb3JlRXhpdCcsJ2FmdGVyUmVuZGVyaW5nJzonYWZ0ZXJSZW5kZXJpbmcnLCdiZWZvcmVSZW5kZXJpbmcnOidiZWZvcmVSZW5kZXJpbmcnfTsoZnVuY3Rpb24oKXtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuX2luaXRDb21wb3NpdGVTdXBwb3J0PWZ1bmN0aW9uKHMpe3RoaXMub1ZpZXdEYXRhPXMudmlld0RhdGE7dGhpcy5zVmlld05hbWU9cy52aWV3TmFtZTtpZih0aGlzLmluaXRWaWV3U2V0dGluZ3Mpe3RoaXMuaW5pdFZpZXdTZXR0aW5ncyhzKX1jKHRoaXMscyk7aWYodGhpcy5vbkNvbnRyb2xsZXJDb25uZWN0ZWQpe3RoaXMub25Db250cm9sbGVyQ29ubmVjdGVkKHRoaXMub0NvbnRyb2xsZXIpfXRoaXMuZmlyZUFmdGVySW5pdCgpfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuZ2V0Q29udHJvbGxlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db250cm9sbGVyfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuYnlJZD1mdW5jdGlvbihpKXtyZXR1cm4gc2FwLnVpLmdldENvcmUoKS5ieUlkKHRoaXMuY3JlYXRlSWQoaSkpfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuY3JlYXRlSWQ9ZnVuY3Rpb24oaSl7aWYoIXRoaXMuaXNQcmVmaXhlZElkKGkpKXtpPXRoaXMuZ2V0SWQoKSsiLS0iK2l9cmV0dXJuIGl9O3NhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5pc1ByZWZpeGVkSWQ9ZnVuY3Rpb24oaSl7cmV0dXJuKGkmJmkuaW5kZXhPZih0aGlzLmdldElkKCkrIi0tIik9PT0wKX07dmFyIGM9ZnVuY3Rpb24odCxzKXt2YXIgQz1zLmNvbnRyb2xsZXI7aWYoIUMmJnQuZ2V0Q29udHJvbGxlck5hbWUpe3ZhciBkPXQuZ2V0Q29udHJvbGxlck5hbWUoKTtpZihkKXtDPXNhcC51aS5jb250cm9sbGVyKGQpfX1pZihzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXREZXNpZ25Nb2RlKCkmJiFzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRTdXBwcmVzc0RlYWN0aXZhdGlvbk9mQ29udHJvbGxlckNvZGUoKSl7Zm9yKHZhciBtIGluIEMpe2lmKHR5cGVvZiBDW21dPT09ImZ1bmN0aW9uIiYmIXNhcC51aS5jb3JlLm12Yy5Db250cm9sbGVyLnByb3RvdHlwZVttXSl7Q1ttXT1mdW5jdGlvbigpe319fX1pZihDKXt0Lm9Db250cm9sbGVyPUM7Qy5jb25uZWN0VG9WaWV3KHQpfX07c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmdldFZpZXdEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1ZpZXdEYXRhfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe3RoaXMuZmlyZUJlZm9yZUV4aXQoKTt0aGlzLm9Db250cm9sbGVyPW51bGx9O3NhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5vbkFmdGVyUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dGhpcy5maXJlQWZ0ZXJSZW5kZXJpbmcoKX07c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dGhpcy5maXJlQmVmb3JlUmVuZGVyaW5nKCl9O3NhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihpLGwpe3ZhciBzPXt9LGssQztmb3IoayBpbiB0aGlzLm1Qcm9wZXJ0aWVzJiYhKHRoaXMuaXNCb3VuZCYmdGhpcy5pc0JvdW5kKGspKSl7aWYodGhpcy5tUHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrKSl7c1trXT10aGlzLm1Qcm9wZXJ0aWVzW2tdfX1DPXNhcC51aS5jb3JlLkNvbnRyb2wucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxpLGwse2Nsb25lQ2hpbGRyZW46ZmFsc2UsY2xvbmVCaW5kaW5nczp0cnVlfSk7Qy5hcHBseVNldHRpbmdzKHMpO3JldHVybiBDfTtzYXAudWkudmlldz1mdW5jdGlvbihpLHYsdCl7dmFyIGE9bnVsbCxWPXt9O2lmKHR5cGVvZiBpPT09Im9iamVjdCJ8fHR5cGVvZiBpPT09InN0cmluZyImJnY9PT11bmRlZmluZWQpe3Y9aTtpPXVuZGVmaW5lZH1pZih2KXtpZih0eXBlb2Ygdj09PSJzdHJpbmciKXtWLnZpZXdOYW1lPXZ9ZWxzZXtWPXZ9fWlmKGkpe1YuaWQ9aX1pZih0KXtWLnR5cGU9dH1pZihzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24pe3ZhciBiPXNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbi5nZXRWaWV3UmVwbGFjZW1lbnQoVi52aWV3TmFtZSk7aWYoYil7alF1ZXJ5LnNhcC5sb2cuaW5mbygiQ3VzdG9taXppbmc6IFZpZXcgcmVwbGFjZW1lbnQgZm9yIHZpZXcgJyIrVi52aWV3TmFtZSsiJyBmb3VuZCBhbmQgYXBwbGllZDogIitiLnZpZXdOYW1lKyIgKHR5cGU6ICIrYi50eXBlKyIpIik7alF1ZXJ5LmV4dGVuZChWLGIpfX1pZighVi50eXBlKXt0aHJvdyBuZXcgRXJyb3IoIk5vIHZpZXcgdHlwZSBzcGVjaWZpZWQuIil9ZWxzZSBpZihWLnR5cGU9PT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuSlMpe2E9bmV3IHNhcC51aS5jb3JlLm12Yy5KU1ZpZXcoVil9ZWxzZSBpZihWLnR5cGU9PT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuSlNPTil7YT1uZXcgc2FwLnVpLmNvcmUubXZjLkpTT05WaWV3KFYpfWVsc2UgaWYoVi50eXBlPT09c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlhNTCl7YT1uZXcgc2FwLnVpLmNvcmUubXZjLlhNTFZpZXcoVil9ZWxzZSBpZihWLnR5cGU9PT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuSFRNTCl7YT1uZXcgc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3KFYpfWVsc2UgaWYoVi50eXBlPT09c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlRlbXBsYXRlKXthPW5ldyBzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3KFYpfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHZpZXcgdHlwZSAiK1YudHlwZSsiIHNwZWNpZmllZC4iKX1yZXR1cm4gYX19KCkpO3JldHVybiBzYXAudWkuY29yZS5tdmMuVmlld30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLlhNTFZpZXcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvWE1MVmlldyIsWydzYXAvdWkvY29yZS9saWJyYXJ5JywnLi9WaWV3JywnanF1ZXJ5LnNhcC54bWwnLCdzYXAvdWkvYmFzZS9EYXRhVHlwZScsJ3NhcC91aS9tb2RlbC9yZXNvdXJjZS9SZXNvdXJjZU1vZGVsJywnc2FwL3VpL2NvcmUvWE1MVGVtcGxhdGVQcm9jZXNzb3InXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5tdmMuVmlldy5leHRlbmQoInNhcC51aS5jb3JlLm12Yy5YTUxWaWV3Iix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIn19KTtzYXAudWkueG1sdmlldz1mdW5jdGlvbihpLHYpe3JldHVybiBzYXAudWkudmlldyhpLHYsc2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlhNTCl9O3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3Ll9zVHlwZT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuWE1MO3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3LnByb3RvdHlwZS5pbml0Vmlld1NldHRpbmdzPWZ1bmN0aW9uKHMpe2lmKCFzKXt0aHJvdyBuZXcgRXJyb3IoIm1TZXR0aW5ncyBtdXN0IGJlIGdpdmVuIil9aWYocy52aWV3TmFtZSYmcy52aWV3Q29udGVudCl7dGhyb3cgbmV3IEVycm9yKCJWaWV3IG5hbWUgYW5kIHZpZXcgY29udGVudCBhcmUgZ2l2ZW4uIFRoZXJlIGlzIG5vIHBvaW50IGluIGRvaW5nIHRoaXMsIHNvIHBsZWFzZSBkZWNpZGUuIil9ZWxzZSBpZigocy52aWV3TmFtZXx8cy52aWV3Q29udGVudCkmJnMueG1sTm9kZSl7dGhyb3cgbmV3IEVycm9yKCJWaWV3IG5hbWUvY29udGVudCBBTkQgYW4gWE1MIG5vZGUgYXJlIGdpdmVuLiBUaGVyZSBpcyBubyBwb2ludCBpbiBkb2luZyB0aGlzLCBzbyBwbGVhc2UgZGVjaWRlLiIpfWVsc2UgaWYoIShzLnZpZXdOYW1lfHxzLnZpZXdDb250ZW50KSYmIXMueG1sTm9kZSl7dGhyb3cgbmV3IEVycm9yKCJOZWl0aGVyIHZpZXcgbmFtZS9jb250ZW50IG5vciBhbiBYTUwgbm9kZSBpcyBnaXZlbi4gT25lIG9mIHRoZW0gaXMgcmVxdWlyZWQuIil9aWYocy52aWV3TmFtZSl7dGhpcy5feENvbnRlbnQ9c2FwLnVpLmNvcmUuWE1MVGVtcGxhdGVQcm9jZXNzb3IubG9hZFRlbXBsYXRlKHMudmlld05hbWUpfWVsc2UgaWYocy52aWV3Q29udGVudCl7dGhpcy5tUHJvcGVydGllc1sidmlld0NvbnRlbnQiXT1zLnZpZXdDb250ZW50O3RoaXMuX3hDb250ZW50PWpRdWVyeS5zYXAucGFyc2VYTUwocy52aWV3Q29udGVudCk7aWYodGhpcy5feENvbnRlbnQucGFyc2VFcnJvci5lcnJvckNvZGUhPTApe3ZhciBwPXRoaXMuX3hDb250ZW50LnBhcnNlRXJyb3I7dGhyb3cgbmV3IEVycm9yKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IFhNTCBwYXJzZSBFcnJvciBmb3IgIitwLnVybCsiIGNvZGU6ICIrcC5lcnJvckNvZGUrIiByZWFzb246ICIrcC5yZWFzb24rIiBzcmM6ICIrcC5zcmNUZXh0KyIgbGluZTogIitwLmxpbmUrIiBsaW5lcG9zOiAiK3AubGluZXBvcysiIGZpbGVwb3M6ICIrcC5maWxlcG9zKX1lbHNle3RoaXMuX3hDb250ZW50PXRoaXMuX3hDb250ZW50LmRvY3VtZW50RWxlbWVudH19ZWxzZSBpZihzLnhtbE5vZGUpe3RoaXMuX3hDb250ZW50PXMueG1sTm9kZX1lbHNle310aGlzLl9vQ29udGFpbmluZ1ZpZXc9cy5jb250YWluaW5nVmlld3x8dGhpcztpZighdGhpcy5pc1N1YlZpZXcoKSl7c2FwLnVpLmNvcmUuWE1MVGVtcGxhdGVQcm9jZXNzb3IucGFyc2VWaWV3QXR0cmlidXRlcyh0aGlzLl94Q29udGVudCx0aGlzLHMpfWVsc2V7ZGVsZXRlIHMuY29udHJvbGxlcn1pZigodGhpcy5fcmVzb3VyY2VCdW5kbGVOYW1lfHx0aGlzLl9yZXNvdXJjZUJ1bmRsZVVybCkmJighcy5tb2RlbHN8fCFzLm1vZGVsc1t0aGlzLl9yZXNvdXJjZUJ1bmRsZUFsaWFzXSkpe3ZhciBtPW5ldyBzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VNb2RlbCh7YnVuZGxlTmFtZTp0aGlzLl9yZXNvdXJjZUJ1bmRsZU5hbWUsYnVuZGxlVXJsOnRoaXMuX3Jlc291cmNlQnVuZGxlVXJsLGJ1bmRsZUxvY2FsZTp0aGlzLl9yZXNvdXJjZUJ1bmRsZUxvY2FsZX0pO3RoaXMuc2V0TW9kZWwobSx0aGlzLl9yZXNvdXJjZUJ1bmRsZUFsaWFzKX12YXIgdD10aGlzO3RoaXMub0FmdGVyUmVuZGVyaW5nTm90aWZpZXI9bmV3IHNhcC51aS5jb3JlLm12Yy5YTUxBZnRlclJlbmRlcmluZ05vdGlmaWVyKCk7dGhpcy5vQWZ0ZXJSZW5kZXJpbmdOb3RpZmllci5hZGREZWxlZ2F0ZSh7b25BZnRlclJlbmRlcmluZzpmdW5jdGlvbigpe3Qub25BZnRlclJlbmRlcmluZ0JlZm9yZUNoaWxkcmVuKCl9fSl9O3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3LnByb3RvdHlwZS5leGl0PWZ1bmN0aW9uKCl7dGhpcy5vQWZ0ZXJSZW5kZXJpbmdOb3RpZmllci5kZXN0cm95KCk7c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmV4aXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtzYXAudWkuY29yZS5tdmMuWE1MVmlldy5wcm90b3R5cGUub25Db250cm9sbGVyQ29ubmVjdGVkPWZ1bmN0aW9uKGMpe3ZhciB0PXRoaXM7c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe3QuX2FQYXJzZWRDb250ZW50PXNhcC51aS5jb3JlLlhNTFRlbXBsYXRlUHJvY2Vzc29yLnBhcnNlVGVtcGxhdGUodC5feENvbnRlbnQsdCl9KX07c2FwLnVpLmNvcmUubXZjLlhNTFZpZXcucHJvdG90eXBlLmdldENvbnRyb2xsZXJOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRyb2xsZXJOYW1lfTtzYXAudWkuY29yZS5tdmMuWE1MVmlldy5wcm90b3R5cGUuaXNTdWJWaWV3PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Db250YWluaW5nVmlldyE9dGhpc307c2FwLnVpLmNvcmUubXZjLlhNTFZpZXcucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmdCZWZvcmVDaGlsZHJlbj1mdW5jdGlvbigpe2lmKHRoaXMuXyRvbGRDb250ZW50Lmxlbmd0aCE9PTApe3ZhciBjPXRoaXMuZ2V0QWdncmVnYXRpb24oImNvbnRlbnQiKTtpZihjKXtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKyl7aWYoY1tpXS5nZXREb21SZWYoKT09PW51bGwpe2NvbnRpbnVlfXZhciAkPWNbaV0uJCgpO2pRdWVyeS5zYXAuYnlJZCgic2FwLXVpLWR1bW15LSIrY1tpXS5nZXRJZCgpLHRoaXMuXyRvbGRDb250ZW50KS5yZXBsYWNlV2l0aCgkKX19alF1ZXJ5LnNhcC5ieUlkKCJzYXAtdWktZHVtbXktIit0aGlzLmdldElkKCkpLnJlcGxhY2VXaXRoKHRoaXMuXyRvbGRDb250ZW50KX10aGlzLl8kb2xkQ29udGVudD11bmRlZmluZWR9O3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3LnByb3RvdHlwZS5fb25DaGlsZFJlcmVuZGVyZWRFbXB0eT1mdW5jdGlvbihjLGUpe2pRdWVyeShlKS5yZXBsYWNlV2l0aCgnPGRpdiBpZD0ic2FwLXVpLWR1bW15LScrYy5nZXRJZCgpKyciIGNsYXNzPSJzYXBVaUhpZGRlbiIvPicpO3JldHVybiB0cnVlfTtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLlhNTEFmdGVyUmVuZGVyaW5nTm90aWZpZXIiLHtyZW5kZXJlcjpmdW5jdGlvbihyLGMpe3Iud3JpdGUoIiIpfX0pO3JldHVybiBzYXAudWkuY29yZS5tdmMuWE1MVmlld30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnNlYXJjaC5PcGVuU2VhcmNoUHJvdmlkZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5zZWFyY2guT3BlblNlYXJjaFByb3ZpZGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvc2VhcmNoL09wZW5TZWFyY2hQcm92aWRlciIsWydzYXAvdWkvY29yZS9saWJyYXJ5JywnLi9TZWFyY2hQcm92aWRlcicsJ2pxdWVyeS5zYXAuZW5jb2RlciddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLnNlYXJjaC5TZWFyY2hQcm92aWRlci5leHRlbmQoInNhcC51aS5jb3JlLnNlYXJjaC5PcGVuU2VhcmNoUHJvdmlkZXIiLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJzdWdnZXN0VXJsIjp7dHlwZToic2FwLnVpLmNvcmUuVVJJIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOm51bGx9LCJzdWdnZXN0VHlwZSI6e3R5cGU6InN0cmluZyIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTonanNvbid9fX19KTtzYXAudWkuY29yZS5zZWFyY2guT3BlblNlYXJjaFByb3ZpZGVyLnByb3RvdHlwZS5zdWdnZXN0PWZ1bmN0aW9uKHYsYyl7dmFyIHU9dGhpcy5nZXRTdWdnZXN0VXJsKCk7aWYoIXUpe3JldHVybn11PXUucmVwbGFjZSgie3NlYXJjaFRlcm1zfSIsalF1ZXJ5LnNhcC5lbmNvZGVVUkwodikpO3ZhciB0PXRoaXMuZ2V0U3VnZ2VzdFR5cGUoKTt2YXIgcztpZih0JiZ0LnRvTG93ZXJDYXNlKCk9PT0ieG1sIil7dD0ieG1sIjtzPWZ1bmN0aW9uKGQpe3ZhciB4PWpRdWVyeShkKTt2YXIgaT14LmZpbmQoIlRleHQiKTt2YXIgUz1bXTtpLmVhY2goZnVuY3Rpb24oKXtTLnB1c2goalF1ZXJ5KHRoaXMpLnRleHQoKSl9KTtjKHYsUyl9fWVsc2V7dD0ianNvbiI7cz1mdW5jdGlvbihkKXtjKHYsZFsxXSl9fWpRdWVyeS5hamF4KHt1cmw6dSxkYXRhVHlwZTp0LHN1Y2Nlc3M6cyxlcnJvcjpmdW5jdGlvbihYLGEsZSl7alF1ZXJ5LnNhcC5sb2cuZmF0YWwoIlRoZSBmb2xsb3dpbmcgcHJvYmxlbSBvY2N1cnJlZDogIithLFgucmVzcG9uc2VUZXh0KyIsIitYLnN0YXR1cyl9fSl9O3JldHVybiBzYXAudWkuY29yZS5zZWFyY2guT3BlblNlYXJjaFByb3ZpZGVyfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdG1wbC9ET01FbGVtZW50IixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCdzYXAvdWkvY29yZS9Db250cm9sJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudCIse21ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiYXR0ciIsInJlbW92ZUF0dHIiXSxsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InRleHQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sInRhZyI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6J3NwYW4nfX0sYWdncmVnYXRpb25zOnsiYXR0cmlidXRlcyI6e3R5cGU6InNhcC51aS5jb3JlLnRtcGwuRE9NQXR0cmlidXRlIixtdWx0aXBsZTp0cnVlLHNpbmd1bGFyTmFtZToiYXR0cmlidXRlIn0sImVsZW1lbnRzIjp7dHlwZToic2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50IixtdWx0aXBsZTp0cnVlLHNpbmd1bGFyTmFtZToiZWxlbWVudCJ9fX19KTtzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24ocyl7c2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9dGhpcyxtPXRoaXMuZ2V0TWV0YWRhdGEoKSxqPW0uZ2V0SlNPTktleXMoKTtqUXVlcnkuZWFjaChzLGZ1bmN0aW9uKGssdil7aWYoayE9PSJpZCImJmshPT0idGV4dCImJiFqW2tdJiZ0eXBlb2Ygdj09PSJzdHJpbmciKXt0LmF0dHIoayx2KX19KX07c2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50LnByb3RvdHlwZS5leGl0PXNhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudC5wcm90b3R5cGUub25CZWZvcmVSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFRhZygpLnRvTG93ZXJDYXNlKCk7aWYodD09PSJpbnB1dCJ8fHQ9PT0idGV4dGFyZWEifHx0PT09InNlbGVjdCIpe3RoaXMuJCgpLm9mZigiY2hhbmdlIil9fTtzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFRhZygpLnRvTG93ZXJDYXNlKCk7aWYodD09PSJpbnB1dCJ8fHQ9PT0idGV4dGFyZWEifHx0PT09InNlbGVjdCIpe3RoaXMuJCgpLm9uKCJjaGFuZ2UiLGpRdWVyeS5wcm94eSh0aGlzLm9uaW5wdXRjaGFuZ2UsdGhpcykpfX07c2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50LnByb3RvdHlwZS5vbmlucHV0Y2hhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0VGFnKCkudG9Mb3dlckNhc2UoKTtpZih0PT09ImlucHV0Iil7dmFyIHY9dGhpcy4kKCkudmFsKCk7alF1ZXJ5LmVhY2godGhpcy5nZXRBdHRyaWJ1dGVzKCksZnVuY3Rpb24oaSxhKXtpZihhLmdldE5hbWUoKS50b0xvd2VyQ2FzZSgpPT09InZhbHVlIil7YS5zZXRWYWx1ZSh2KX19KX1lbHNlIGlmKHQ9PT0idGV4dGFyZWEiKXt2YXIgVD10aGlzLiQoKS52YWwoKTt0aGlzLnNldFRleHQoVCl9ZWxzZSBpZih0PT09InNlbGVjdCIpe3ZhciBUPSIiO3RoaXMuJCgpLmZpbmQoInNlbGVjdCBvcHRpb246c2VsZWN0ZWQiKS5lYWNoKGZ1bmN0aW9uKCl7VCs9alF1ZXJ5KHRoaXMpLnRleHQoKSsiICJ9KTt0aGlzLnNldFRleHQoVCl9fTtzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQucHJvdG90eXBlLmF0dHI9ZnVuY3Rpb24oayx2KXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZXMoKSxBO2pRdWVyeS5lYWNoKGEsZnVuY3Rpb24oaSxWKXt2YXIgbj1WLmdldE5hbWUoKTtpZihuLnRvTG93ZXJDYXNlKCk9PT1rKXtBPVY7cmV0dXJuIGZhbHNlfX0pO2lmKHY9PT11bmRlZmluZWQpe3JldHVybiBBJiZBLmdldFZhbHVlKCl9ZWxzZXtpZihBKXtpZih2PT09bnVsbCl7dGhpcy5yZW1vdmVBdHRyaWJ1dGUoQSl9ZWxzZXtBLnNldFZhbHVlKHYpfX1lbHNle2lmKHYhPT1udWxsKXt0aGlzLmFkZEF0dHJpYnV0ZShuZXcgc2FwLnVpLmNvcmUudG1wbC5ET01BdHRyaWJ1dGUoe25hbWU6ayx2YWx1ZTp2fSkpfX1yZXR1cm4gdGhpc319O3NhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlQXR0cj1mdW5jdGlvbihrKXt0aGlzLmF0dHIoayxudWxsKTtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50LnByb3RvdHlwZS5zZXRUZXh0PWZ1bmN0aW9uKHQpe3RoaXMuc2V0UHJvcGVydHkoInRleHQiLHQsdHJ1ZSk7dmFyICQ9dGhpcy4kKCk7aWYoJC5sZW5ndGg+MCl7dmFyIFQ9dGhpcy5nZXRUYWcoKS50b0xvd2VyQ2FzZSgpO2lmKFQ9PT0idGV4dGFyZWEiKXskLnZhbCh0aGlzLmdldFByb3BlcnR5KCJ0ZXh0IikpfWVsc2V7JC50ZXh0KHRoaXMuZ2V0UHJvcGVydHkoInRleHQiKSl9fX07cmV0dXJuIHNhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS90bXBsL1RlbXBsYXRlQ29udHJvbCIsWydzYXAvdWkvY29yZS9saWJyYXJ5Jywnc2FwL3VpL2NvcmUvQ29udHJvbCcsJy4vRE9NRWxlbWVudCcsJy4vRE9NQXR0cmlidXRlJywnc2FwL3VpL2NvcmUvRGVjbGFyYXRpdmVTdXBwb3J0J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sIix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsiY29udGV4dCI6e3R5cGU6Im9iamVjdCIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfX0sYWdncmVnYXRpb25zOnsiY29udHJvbHMiOnt0eXBlOiJzYXAudWkuY29yZS5Db250cm9sIixtdWx0aXBsZTp0cnVlLHNpbmd1bGFyTmFtZToiY29udHJvbCIsdmlzaWJpbGl0eToiaGlkZGVuIn19LGFzc29jaWF0aW9uczp7InRlbXBsYXRlIjp7dHlwZToic2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZSIsbXVsdGlwbGU6ZmFsc2V9fSxldmVudHM6eyJhZnRlclJlbmRlcmluZyI6e30sImJlZm9yZVJlbmRlcmluZyI6e319fX0pO3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLk1fRVZFTlRTPXsnYWZ0ZXJSZW5kZXJpbmcnOidhZnRlclJlbmRlcmluZycsJ2JlZm9yZVJlbmRlcmluZyc6J2JlZm9yZVJlbmRlcmluZyd9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5fYUJpbmRpbmdJbmZvcz1bXX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmlzSW5saW5lPWZ1bmN0aW9uKCl7dmFyIGk9ZmFsc2U7aWYodGhpcy5nZXRQYXJlbnQoKWluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuVUlBcmVhJiZqUXVlcnkodGhpcy5nZXRQYXJlbnQoKS5nZXRSb290Tm9kZSgpKS5hdHRyKCJpZCIpPT09dGhpcy5nZXRJZCgpKXtpPXRydWV9cmV0dXJuIGl9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5wbGFjZUF0PWZ1bmN0aW9uKHIscCl7dmFyIGk9dGhpcy5pc0lubGluZSgpO3ZhciAkPXRoaXMuJCgpLHU9dGhpcy5nZXRVSUFyZWEoKTtzYXAudWkuY29yZS5Db250cm9sLnByb3RvdHlwZS5wbGFjZUF0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihpJiYkLmxlbmd0aD09PTEpeyQucmVtb3ZlKCk7dS5kZXN0cm95Q29udGVudCgpfX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmdldFRlbXBsYXRlUmVuZGVyZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mblJlbmRlcmVyfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuc2V0VGVtcGxhdGVSZW5kZXJlcj1mdW5jdGlvbihyKXt0aGlzLmZuUmVuZGVyZXI9cjtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLl9jbGVhbnVwPWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95QWdncmVnYXRpb24oImNvbnRyb2xzIik7aWYodGhpcy5fYUJpbmRpbmdJbmZvcyl7dmFyIHQ9dGhpcztqUXVlcnkuZWFjaCh0aGlzLl9hQmluZGluZ0luZm9zLGZ1bmN0aW9uKGksYil7dC5nZXRNb2RlbChiLm1vZGVsKS5yZW1vdmVCaW5kaW5nKGIuYmluZGluZyl9KTt0aGlzLl9hQmluZGluZ0luZm9zPVtdfX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLl9jb21waWxlPWZ1bmN0aW9uKCl7dmFyIHQ9c2FwLnVpLmdldENvcmUoKS5ieUlkKHRoaXMuZ2V0VGVtcGxhdGUoKSksZD10JiZ0LmdldERlY2xhcmF0aXZlU3VwcG9ydCgpO2lmKGQpe3ZhciBhPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe3NhcC51aS5jb3JlLkRlY2xhcmF0aXZlU3VwcG9ydC5jb21waWxlKGEuZ2V0RG9tUmVmKCkpfSl9fTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe3RoaXMuX2NsZWFudXAoKX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dGhpcy5maXJlQmVmb3JlUmVuZGVyaW5nKCk7dGhpcy5fY2xlYW51cCgpfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe3RoaXMuZmlyZUFmdGVyUmVuZGVyaW5nKCl9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS51cGRhdGVCaW5kaW5ncz1mdW5jdGlvbih1LG0pe3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QucHJvdG90eXBlLnVwZGF0ZUJpbmRpbmdzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLmdldERvbVJlZigpKXt0aGlzLmludmFsaWRhdGUoKX19O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKHAsdCl7dmFyIFA9c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZS5wYXJzZVBhdGgocCksbT10aGlzLmdldE1vZGVsKFAubW9kZWwpLHA9UC5wYXRoLE09dD8iYmluZCIralF1ZXJ5LnNhcC5jaGFyVG9VcHBlckNhc2UodCk6ImJpbmRQcm9wZXJ0eSIsYj1tJiZtW01dKHApLGE9dGhpcztpZihiKXtiLmF0dGFjaENoYW5nZShmdW5jdGlvbigpe2pRdWVyeS5zYXAubG9nLmRlYnVnKCJUZW1wbGF0ZUNvbnRyb2wjIithLmdldElkKCkrIjogIit0KyIgYmluZGluZyBjaGFuZ2VkIGZvciBwYXRoIFwiIitwKyJcIiIpO2EuaW52YWxpZGF0ZSgpfSl9dGhpcy5fYUJpbmRpbmdJbmZvcy5wdXNoKHtiaW5kaW5nOmIscGF0aDpQLnBhdGgsbW9kZWw6UC5tb2RlbH0pO3JldHVybiBifTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuYmluZFByb3A9ZnVuY3Rpb24ocCl7dmFyIGI9dGhpcy5iaW5kKHAsInByb3BlcnR5Iik7cmV0dXJuIGImJmIuZ2V0RXh0ZXJuYWxWYWx1ZSgpfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuYmluZExpc3Q9ZnVuY3Rpb24ocCl7dmFyIGI9dGhpcy5iaW5kKHAsImxpc3QiKSxtPWImJmIuZ2V0TW9kZWwoKSxwPWImJmIuZ2V0UGF0aCgpO3JldHVybiBiJiZtLmdldFByb3BlcnR5KHApfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuY3JlYXRlRE9NRWxlbWVudD1mdW5jdGlvbihzLHAsZCl7dmFyIGU9bmV3IHNhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudChzKTtpZihwKXtlLmJpbmRFbGVtZW50KHApfWlmKCFkKXt0aGlzLmFkZEFnZ3JlZ2F0aW9uKCJjb250cm9scyIsZSl9cmV0dXJuIGV9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5jcmVhdGVDb250cm9sPWZ1bmN0aW9uKHMscCxkLHYpe3ZhciBoPXt9O2pRdWVyeS5lYWNoKHMsZnVuY3Rpb24oayxWKXtoWyJkYXRhLSIralF1ZXJ5LnNhcC5oeXBoZW4oayldPVZ9KTt2YXIgJD1qUXVlcnkoIjxkaXYvPiIsaCk7dmFyIGM9c2FwLnVpLmNvcmUuRGVjbGFyYXRpdmVTdXBwb3J0Ll9jcmVhdGVDb250cm9sKCQuZ2V0KDApLHYpO2lmKHApe2MuYmluZEVsZW1lbnQocCl9aWYoIWQpe3RoaXMuYWRkQWdncmVnYXRpb24oImNvbnRyb2xzIixjKX1yZXR1cm4gY307cmV0dXJuIHNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvRXhwb3J0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvQ29udHJvbCcsJy4vRXhwb3J0Q29sdW1uJywnLi9FeHBvcnRSb3cnLCcuL0V4cG9ydFR5cGUnLCcuL0ZpbGUnXSxmdW5jdGlvbihxLEMsRSxhLGIsRil7J3VzZSBzdHJpY3QnO3ZhciBjPUMuZXh0ZW5kKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydCcse21ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiZ2VuZXJhdGUiLCJzYXZlRmlsZSJdLGxpYnJhcnk6InNhcC51aS5jb3JlIixhZ2dyZWdhdGlvbnM6e2V4cG9ydFR5cGU6e3R5cGU6J3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0VHlwZScsbXVsdGlwbGU6ZmFsc2V9LGNvbHVtbnM6e3R5cGU6J3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q29sdW1uJyxtdWx0aXBsZTp0cnVlLGJpbmRhYmxlOidiaW5kYWJsZSd9LHJvd3M6e3R5cGU6J3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Um93JyxtdWx0aXBsZTp0cnVlLGJpbmRhYmxlOidiaW5kYWJsZSd9LF90ZW1wbGF0ZTp7dHlwZTonc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRSb3cnLG11bHRpcGxlOmZhbHNlLHZpc2liaWxpdHk6J2hpZGRlbid9fX19KTtjLmdldE1ldGFkYXRhKCkuZ2V0QWxsQWdncmVnYXRpb25zKClbInJvd3MiXS5fZG9lc05vdFJlcXVpcmVGYWN0b3J5PXRydWU7Yy5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuX29EZWZlcnJlZD1udWxsO3RoaXMuX29Sb3dCaW5kaW5nSW5mbz1udWxsfTtjLnByb3RvdHlwZS5leGl0PWZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuX29EZWZlcnJlZDtkZWxldGUgdGhpcy5fb1Jvd0JpbmRpbmdJbmZvfTtjLnByb3RvdHlwZS5fY3JlYXRlUm93VGVtcGxhdGU9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgYSh0aGlzLmdldElkKCkrIi1yb3ciKSxkPXRoaXMuZ2V0Q29sdW1ucygpO2Zvcih2YXIgaT0wLGw9ZC5sZW5ndGg7aTxsO2krKyl7dmFyIG89ZFtpXS5nZXRUZW1wbGF0ZSgpO2lmKG8pe3QuYWRkQ2VsbChvLmNsb25lKCJjb2wiK2kpKX19cmV0dXJuIHR9O2MucHJvdG90eXBlLmJpbmRBZ2dyZWdhdGlvbj1mdW5jdGlvbihuLEIpe2lmKG49PT0ncm93cycpe3RoaXMuX29Sb3dCaW5kaW5nSW5mbz1CO3JldHVybiB0aGlzfXJldHVybiBDLnByb3RvdHlwZS5iaW5kQWdncmVnYXRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpfTtjLnByb3RvdHlwZS51cGRhdGVSb3dzPWZ1bmN0aW9uKHIpe2lmKHI9PT0nY2hhbmdlJyl7dmFyIHM9dGhpcy5nZXRFeHBvcnRUeXBlKCkuX2dlbmVyYXRlKHRoaXMpO3RoaXMuZGVzdHJveUFnZ3JlZ2F0aW9uKCdfdGVtcGxhdGUnKTt0aGlzLnVuYmluZEFnZ3JlZ2F0aW9uKCdyb3dzJyk7dGhpcy5fb0RlZmVycmVkLnJlc29sdmVXaXRoKHRoaXMsW3NdKTt0aGlzLl9vRGVmZXJyZWQ9bnVsbH19O2MucHJvdG90eXBlLmdlbmVyYXRlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX29EZWZlcnJlZCl7dGhpcy5fb0RlZmVycmVkPXEuRGVmZXJyZWQoKTt2YXIgcD10aGlzLl9vRGVmZXJyZWQucHJvbWlzZSgpO2lmKCF0aGlzLmhhc01vZGVsKCkpe3RoaXMuX29EZWZlcnJlZC5yZWplY3RXaXRoKHRoaXMsWyJHZW5lcmF0ZSBpcyBub3QgcG9zc2libGUgYmVhdXNlIG5vIG1vZGVsIHdhcyBzZXQuIl0pfWVsc2V7dmFyIHQ9dGhpcy5fY3JlYXRlUm93VGVtcGxhdGUoKTt0aGlzLnNldEFnZ3JlZ2F0aW9uKCdfdGVtcGxhdGUnLHQsdHJ1ZSk7Qy5wcm90b3R5cGUuYmluZEFnZ3JlZ2F0aW9uLmNhbGwodGhpcywncm93cycsdGhpcy5fb1Jvd0JpbmRpbmdJbmZvKTtpZih0aGlzLmdldEJpbmRpbmcoInJvd3MiKSl7dGhpcy5nZXRCaW5kaW5nKCJyb3dzIikuZ2V0Q29udGV4dHMoMCx0aGlzLmdldEJpbmRpbmcoInJvd3MiKS5nZXRMZW5ndGgoKSl9fXJldHVybiBwfXJldHVybiB0aGlzLl9vRGVmZXJyZWQucHJvbWlzZSgpfTtjLnByb3RvdHlwZS5zYXZlRmlsZT1mdW5jdGlvbihmKXtyZXR1cm4gdGhpcy5nZW5lcmF0ZSgpLnRoZW4oZnVuY3Rpb24ocyl7dmFyIGU9dGhpcy5nZXRFeHBvcnRUeXBlKCk7Ri5zYXZlKHMsZnx8ImRhdGEiLGUuZ2V0RmlsZUV4dGVuc2lvbigpLGUuZ2V0TWltZVR5cGUoKSxlLmdldENoYXJzZXQoKSl9KX07cmV0dXJuIGN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5CdXN5SW5kaWNhdG9yJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQnVzeUluZGljYXRvcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0J1c3lJbmRpY2F0b3IiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1BvcHVwJ10sZnVuY3Rpb24ocSxQKXsidXNlIHN0cmljdCI7dmFyIEI9cS5leHRlbmQocS5zYXAubmV3T2JqZWN0KHNhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIucHJvdG90eXBlKSx7b1BvcHVwOm51bGwsb0RvbVJlZjpudWxsLGJPcGVuUmVxdWVzdGVkOmZhbHNlLGlERUZBVUxUX0RFTEFZX01TOjEwMDAsc0RPTV9JRDoic2FwVWlCdXN5SW5kaWNhdG9yIn0pO3NhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIuYXBwbHkoQik7Qi5NX0VWRU5UUz17T3BlbjoiT3BlbiIsQ2xvc2U6IkNsb3NlIn07Qi5faW5pdD1mdW5jdGlvbigpe3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3IuaWQ9dGhpcy5zRE9NX0lEO3RoaXMuX29SZXNCdW5kbGU9c2FwLnVpLmdldENvcmUoKS5nZXRMaWJyYXJ5UmVzb3VyY2VCdW5kbGUoInNhcC51aS5jb3JlIik7dmFyIHQ9dGhpcy5fb1Jlc0J1bmRsZS5nZXRUZXh0KCJCVVNZX1RFWFQiKTtkZWxldGUgdGhpcy5fb1Jlc0J1bmRsZTt2YXIgaT1zYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKTtpLmFwcGVuZENoaWxkKHIpO3EocikuYWRkQ2xhc3MoInNhcFVpQnVzeSIpLmF0dHIoInRhYmluZGV4IiwwKS5hdHRyKCJyb2xlIiwicHJvZ3Jlc3NiYXIiKS5hdHRyKCJhbHQiLCIiKS5hdHRyKCJ0aXRsZSIsdCk7dGhpcy5vRG9tUmVmPXI7dGhpcy5vUG9wdXA9bmV3IFAocik7dGhpcy5vUG9wdXAuc2V0TW9kYWwodHJ1ZSwic2FwVWlCbHlCdXN5Iik7dGhpcy5vUG9wdXAuc2V0U2hhZG93KGZhbHNlKTtpZihzYXAudWkuRGV2aWNlLmJyb3dzZXIubXNpZSYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248PTkpe3RoaXMuX2lCdXN5UGFnZVdpZHRoPXEoZG9jdW1lbnQuYm9keSkud2lkdGgoKTt0aGlzLl9pQnVzeUxlZnQ9MDt0aGlzLl9pQnVzeURlbHRhPTYwO3RoaXMuX2lCdXN5VGltZVN0ZXA9NTA7dGhpcy5faUJ1c3lXaWR0aD01MDA7dGhpcy5hdHRhY2hPcGVuKHRoaXMuX0lFQW5pbWF0aW9uLHRoaXMpfX07Qi5fSUVBbmltYXRpb249ZnVuY3Rpb24oZSl7aWYoIXRoaXMuXyRCdXN5SW5kaWNhdG9yJiZlKXt0aGlzLl8kQnVzeUluZGljYXRvcj1lLmdldFBhcmFtZXRlcigiJEJ1c3kiKX1xLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2lBbmltYXRpb25UaW1lb3V0KTt0aGlzLl9pQnVzeUxlZnQrPXRoaXMuX2lCdXN5RGVsdGE7aWYodGhpcy5faUJ1c3lMZWZ0PnRoaXMuX2lCdXN5UGFnZVdpZHRoKXt0aGlzLl9pQnVzeUxlZnQ9LXRoaXMuX2lCdXN5V2lkdGh9aWYoIXRoaXMuXyRCdXN5SW5kaWNhdG9yKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2lBbmltYXRpb25UaW1lb3V0KX1lbHNle3RoaXMuXyRCdXN5SW5kaWNhdG9yLmNzcygiYmFja2dyb3VuZC1wb3NpdGlvbiIsdGhpcy5faUJ1c3lMZWZ0KyJweCAwcHgiKTt0aGlzLl9pQW5pbWF0aW9uVGltZW91dD1xLnNhcC5kZWxheWVkQ2FsbCh0aGlzLl9pQnVzeVRpbWVTdGVwLHRoaXMsdGhpcy5fSUVBbmltYXRpb24pfX07Qi5zaG93PWZ1bmN0aW9uKGQpe3Euc2FwLmxvZy5kZWJ1Zygic2FwLnVpLmNvcmUuQnVzeUluZGljYXRvci5zaG93IChkZWxheTogIitkKyIpIGF0ICIrbmV3IERhdGUoKS5nZXRUaW1lKCkpO2lmKChkPT09dW5kZWZpbmVkKXx8KChkIT0wKSYmKHBhcnNlSW50KGQsMTApPT0wKSl8fChwYXJzZUludChkLDEwKTwwKSl7ZD10aGlzLmlERUZBVUxUX0RFTEFZX01TfXRoaXMuYk9wZW5SZXF1ZXN0ZWQ9dHJ1ZTtpZihkPT09MCl7dGhpcy5fc2hvd05vd0lmUmVxdWVzdGVkKCl9ZWxzZXtxLnNhcC5kZWxheWVkQ2FsbChkLHRoaXMsIl9zaG93Tm93SWZSZXF1ZXN0ZWQiKX19O0IuX3Nob3dOb3dJZlJlcXVlc3RlZD1mdW5jdGlvbigpe3Euc2FwLmxvZy5kZWJ1Zygic2FwLnVpLmNvcmUuQnVzeUluZGljYXRvci5fc2hvd05vd0lmUmVxdWVzdGVkIChiT3BlblJlcXVlc3RlZDogIit0aGlzLmJPcGVuUmVxdWVzdGVkKyIpIGF0ICIrbmV3IERhdGUoKS5nZXRUaW1lKCkpO2lmKCF0aGlzLmJPcGVuUmVxdWVzdGVkKXtyZXR1cm59aWYoIWRvY3VtZW50LmJvZHl8fCFzYXAudWkuZ2V0Q29yZSgpLmlzSW5pdGlhbGl6ZWQoKSl7cS5zYXAuZGVsYXllZENhbGwoMTAwLHRoaXMsIl9zaG93Tm93SWZSZXF1ZXN0ZWQiKTtyZXR1cm59dGhpcy5iT3BlblJlcXVlc3RlZD1mYWxzZTtpZighdGhpcy5vRG9tUmVmKXt0aGlzLl9pbml0KCl9dGhpcy5vUG9wdXAub3BlbigwLFAuRG9jay5DZW50ZXJDZW50ZXIsUC5Eb2NrLkNlbnRlckNlbnRlcixkb2N1bWVudCk7dGhpcy5maXJlT3Blbih7JEJ1c3k6dGhpcy5vUG9wdXAuXyQoKX0pO3ZhciBkPXEuc2FwLmRvbUJ5SWQoQi5zRE9NX0lEKTtxLnNhcC5mb2N1cyhkKTtxKCJib2R5IikuYXR0cigiYXJpYS1idXN5Iix0cnVlKX07Qi5oaWRlPWZ1bmN0aW9uKCl7cS5zYXAubG9nLmRlYnVnKCJzYXAudWkuY29yZS5CdXN5SW5kaWNhdG9yLmhpZGUgYXQgIituZXcgRGF0ZSgpLmdldFRpbWUoKSk7dmFyIHQ9Qjt0LmJPcGVuUmVxdWVzdGVkPWZhbHNlO2lmKHQub0RvbVJlZil7cSgiYm9keSIpLnJlbW92ZUF0dHIoImFyaWEtYnVzeSIpO3RoaXMuZmlyZUNsb3NlKHskQnVzeTp0aGlzLm9Qb3B1cC5fJCgpfSk7dC5vUG9wdXAuY2xvc2UoMCl9ZGVsZXRlIHRoaXMuXyRCdXN5SW5kaWNhdG9yfTtCLmF0dGFjaE9wZW49ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KEIuTV9FVkVOVFMuT3BlbixmLGwpO3JldHVybiB0aGlzfTtCLmRldGFjaE9wZW49ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KEIuTV9FVkVOVFMuT3BlbixmLGwpO3JldHVybiB0aGlzfTtCLmF0dGFjaENsb3NlPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChCLk1fRVZFTlRTLkNsb3NlLGYsbCk7cmV0dXJuIHRoaXN9O0IuZGV0YWNoQ2xvc2U9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KEIuTV9FVkVOVFMuQ2xvc2UsZixsKTtyZXR1cm4gdGhpc307Qi5maXJlT3Blbj1mdW5jdGlvbihwKXt0aGlzLmZpcmVFdmVudChCLk1fRVZFTlRTLk9wZW4scCl9O0IuZmlyZUNsb3NlPWZ1bmN0aW9uKHApe3RoaXMuZmlyZUV2ZW50KEIuTV9FVkVOVFMuQ2xvc2UscCl9O3JldHVybiBCfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ29tcG9uZW50Q29udGFpbmVyIixbJy4vbGlicmFyeScsJy4vQ29udHJvbCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkNvbnRyb2wuZXh0ZW5kKCJzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIiLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJuYW1lIjp7dHlwZToic3RyaW5nIixncm91cDoiIixkZWZhdWx0VmFsdWU6bnVsbH0sInVybCI6e3R5cGU6InNhcC51aS5jb3JlLlVSSSIsZ3JvdXA6IiIsZGVmYXVsdFZhbHVlOm51bGx9LCJzZXR0aW5ncyI6e3R5cGU6Im9iamVjdCIsZ3JvdXA6IiIsZGVmYXVsdFZhbHVlOm51bGx9LCJwcm9wYWdhdGVNb2RlbCI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiIiLGRlZmF1bHRWYWx1ZTpmYWxzZX0sIndpZHRoIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJoZWlnaHQiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiRGltZW5zaW9uIixkZWZhdWx0VmFsdWU6bnVsbH19LGFzc29jaWF0aW9uczp7ImNvbXBvbmVudCI6e3R5cGU6InNhcC51aS5jb3JlLlVJQ29tcG9uZW50IixtdWx0aXBsZTpmYWxzZX19fX0pO3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuZ2V0Q29tcG9uZW50SW5zdGFuY2U9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldENvbXBvbmVudCgpO3JldHVybiBzYXAudWkuZ2V0Q29yZSgpLmdldENvbXBvbmVudChjKX07c2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5zZXRDb21wb25lbnQ9ZnVuY3Rpb24oYyxzKXt2YXIgbz10aGlzLmdldENvbXBvbmVudEluc3RhbmNlKCk7aWYobyl7by5zZXRDb250YWluZXIodW5kZWZpbmVkKX10aGlzLnNldEFzc29jaWF0aW9uKCJjb21wb25lbnQiLGMscyk7Yz10aGlzLmdldENvbXBvbmVudEluc3RhbmNlKCk7aWYoYyl7Yy5zZXRDb250YWluZXIodGhpcyk7dGhpcy5wcm9wYWdhdGVQcm9wZXJ0aWVzKCl9fTtzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRDb21wb25lbnRJbnN0YW5jZSgpO2lmKCFjKXt2YXIgbj10aGlzLmdldE5hbWUoKTtpZihuKXtjPXNhcC51aS5jb21wb25lbnQoe25hbWU6bix1cmw6dGhpcy5nZXRVcmwoKSxzZXR0aW5nczp0aGlzLmdldFNldHRpbmdzKCl9KTt0aGlzLnNldENvbXBvbmVudChjLHRydWUpfX1pZihjJiZjLm9uQmVmb3JlUmVuZGVyaW5nKXtjLm9uQmVmb3JlUmVuZGVyaW5nKCl9fTtzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldENvbXBvbmVudEluc3RhbmNlKCk7aWYoYyYmYy5vbkFmdGVyUmVuZGVyaW5nKXtjLm9uQWZ0ZXJSZW5kZXJpbmcoKX19O3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0Q29tcG9uZW50SW5zdGFuY2UoKTtpZihjKXtjLmRlc3Ryb3koKX19O3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUucHJvcGFnYXRlUHJvcGVydGllcz1mdW5jdGlvbihuKXt2YXIgYz10aGlzLmdldENvbXBvbmVudEluc3RhbmNlKCk7aWYoYyYmdGhpcy5nZXRQcm9wYWdhdGVNb2RlbCgpKXt0aGlzLl9wcm9wYWdhdGVQcm9wZXJ0aWVzKG4sYyk7c2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUucHJvcGFnYXRlUHJvcGVydGllcy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fTtyZXR1cm4gc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29tcG9zaXRlU3VwcG9ydCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkNvbXBvc2l0ZVN1cHBvcnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Db21wb3NpdGVTdXBwb3J0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Db250cm9sJywnc2FwL3VpL21vZGVsL2NvbnRyb2wvQ29udHJvbE1vZGVsJ10sZnVuY3Rpb24ocSxDLGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj17fTtiLm1peEludG89ZnVuY3Rpb24oYyxmLG0pe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTImJnR5cGVvZiBmPT09Im9iamVjdCIpe209ZjtmPSJDb21wb25lbnRGYWN0b3J5In1mdW5jdGlvbiBfKCl7dmFyIE09Yy5nZXRNZXRhZGF0YSgpO2Rve009TS5nZXRQYXJlbnQoKTtpZihNJiZNLmdldENvbXBvbmVudEZhY3RvcnlDbGFzcyl7cmV0dXJuIE0uZ2V0Q29tcG9uZW50RmFjdG9yeUNsYXNzKCl9fXdoaWxlKE0pO3JldHVybiBzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5fWNbZl09KF8oKSkuc3ViY2xhc3MobSk7Yy5nZXRNZXRhZGF0YSgpLmdldENvbXBvbmVudEZhY3RvcnlDbGFzcz1xLnNhcC5nZXR0ZXIoY1tmXSk7aWYoIWMucHJvdG90eXBlLl9pbml0Q29tcG9zaXRlU3VwcG9ydCl7Yy5wcm90b3R5cGUuX2luaXRDb21wb3NpdGVTdXBwb3J0PWZ1bmN0aW9uKHMpe3ZhciBGPW5ldyh0aGlzLmdldE1ldGFkYXRhKCkuZ2V0Q29tcG9uZW50RmFjdG9yeUNsYXNzKCkpKHRoaXMpO2lmKHMuY29tcG9uZW50RmFjdG9yeSl7Ri5jdXN0b21pemUocy5jb21wb25lbnRGYWN0b3J5KTtkZWxldGUgcy5jb21wb25lbnRGYWN0b3J5fXRoaXMuZ2V0Q29tcG9uZW50RmFjdG9yeT1xLnNhcC5nZXR0ZXIoRil9fWlmKCFjLnByb3RvdHlwZS5fZXhpdENvbXBvc2l0ZVN1cHBvcnQpe2MucHJvdG90eXBlLl9leGl0Q29tcG9zaXRlU3VwcG9ydD1mdW5jdGlvbigpe3RoaXMuZ2V0Q29tcG9uZW50RmFjdG9yeSgpLmRlc3Ryb3koKTtkZWxldGUgdGhpcy5nZXRDb21wb25lbnRGYWN0b3J5fX19O3NhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIuZXh0ZW5kKCJzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYyl7c2FwLnVpLmJhc2UuRXZlbnRQcm92aWRlci5hcHBseSh0aGlzKTt0aGlzLm9Db21wb3NpdGU9YztyZXR1cm4gdGhpc319KTtzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5LnByb3RvdHlwZS5hdHRhY2hDaGFuZ2U9ZnVuY3Rpb24oZixvKXt0aGlzLmdldE1vZGVsKCk7dGhpcy5hdHRhY2hFdmVudCgiY2hhbmdlIixmLG8pO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5LnByb3RvdHlwZS5kZXRhY2hDaGFuZ2U9ZnVuY3Rpb24oZixvKXt0aGlzLmdldE1vZGVsKCk7dGhpcy5kZXRhY2hFdmVudCgiY2hhbmdlIixmLG8pO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5LnByb3RvdHlwZS5nZXRNb2RlbD1mdW5jdGlvbigpe2lmKCF0aGlzLm9Nb2RlbCl7dmFyIHQ9dGhpczt0aGlzLm9Nb2RlbD1uZXcgYSh0aGlzLm9Db21wb3NpdGUpO3RoaXMub01vZGVsLl9vbmNoYW5nZT1mdW5jdGlvbihlKXt0LmZpcmVFdmVudCgiY2hhbmdlIixlLmdldFBhcmFtZXRlcnMmJmUuZ2V0UGFyYW1ldGVycygpKX19cmV0dXJuIHRoaXMub01vZGVsfTtzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5LnByb3RvdHlwZS5hZGRGYWNhZGVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7dGhpcy5nZXRNb2RlbCgpLmFkZChlKX07c2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeS5wcm90b3R5cGUucmVtb3ZlRmFjYWRlQ29tcG9uZW50PWZ1bmN0aW9uKGUpe3RoaXMuZ2V0TW9kZWwoKS5yZW1vdmUoZSl9OyhmdW5jdGlvbigpe2Z1bmN0aW9uIF8obyxtLGQpe3EuZWFjaChtLGZ1bmN0aW9uKG4sZil7aWYobi5pbmRleE9mKCJkZWZhdWx0IikhPTApe29bbl09Zn1pZihkJiZuLmluZGV4T2YoImNyZWF0ZSIpPT0wKXtvWyJkZWZhdWx0QyIrbi5zdWJzdHJpbmcoMSldPW9bbl19fSl9ZnVuY3Rpb24gYyhCKXtyZXR1cm4gZnVuY3Rpb24obSl7dmFyIGY9ZnVuY3Rpb24oKXtCLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07Zi5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KEIucHJvdG90eXBlKTtfKGYucHJvdG90eXBlLG0sdHJ1ZSk7Zi5jdXN0b21pemU9ZnVuY3Rpb24obSl7XyhmLnByb3RvdHlwZSxtKTtyZXR1cm4gdGhpc307Zi5zdWJjbGFzcz1jKGYpO3JldHVybiBmfX1zYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5LnN1YmNsYXNzPWMoc2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeSk7c2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeS5wcm90b3R5cGUuY3VzdG9taXplPWZ1bmN0aW9uKG0pe18odGhpcyxtKTtpZih0aGlzLm9Db21wb3NpdGUmJnRoaXMub0NvbXBvc2l0ZS5fb25Db21wb25lbnRGYWN0b3J5Q2hhbmdlZCl7dGhpcy5vQ29tcG9zaXRlLl9vbkNvbXBvbmVudEZhY3RvcnlDaGFuZ2VkKCl9cmV0dXJuIHRoaXN9fSgpKTtyZXR1cm4gYn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlVJQ29tcG9uZW50JykpewovKgogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgQUcgb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiAKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4KICovCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVUlDb21wb25lbnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9VSUNvbXBvbmVudCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQ29tcG9uZW50JywnLi9VSUNvbXBvbmVudE1ldGFkYXRhJywnLi9tdmMvVmlldyddLGZ1bmN0aW9uKHEsQyxVLFYpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1DLmV4dGVuZCgic2FwLnVpLmNvcmUuVUlDb21wb25lbnQiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe3RyeXtDLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1jYXRjaChlKXtpZih0aGlzLl9vUm91dGVyKXt0aGlzLl9vUm91dGVyLmRlc3Ryb3koKX10aHJvdyBlfX0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxyb290VmlldzpudWxsLHB1YmxpY01ldGhvZHM6WyJyZW5kZXIiXSxhZ2dyZWdhdGlvbnM6eyJyb290Q29udHJvbCI6e3R5cGU6InNhcC51aS5jb3JlLkNvbnRyb2wiLG11bHRpcGxlOmZhbHNlLHZpc2liaWxpdHk6ImhpZGRlbiJ9fSxyb3V0aW5nOnt9fX0sVSk7YS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dmFyIHA9e307aWYodGhpcy5nZXRBdXRvUHJlZml4SWQoKSl7cC5pZD1mdW5jdGlvbihpKXtyZXR1cm4gdC5jcmVhdGVJZChpKX19dmFyIG09dGhpcy5nZXRNZXRhZGF0YSgpO3ZhciByPXEuZXh0ZW5kKHt9LG0uZ2V0Um91dGluZ0NvbmZpZygpKTt2YXIgUj1tLmdldFJvdXRlcygpO2lmKFIpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLnJvdXRpbmcuUm91dGVyIik7dmFyIGY9ci5yb3V0ZXJDbGFzc3x8c2FwLnVpLmNvcmUucm91dGluZy5Sb3V0ZXI7dGhpcy5fb1JvdXRlcj1uZXcgZihSLHIsdGhpcyl9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5ydW5XaXRoT3duZXIoZnVuY3Rpb24oKXtzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LnJ1bldpdGhQcmVwcm9jZXNzb3JzKGZ1bmN0aW9uKCl7dC5zZXRBZ2dyZWdhdGlvbigicm9vdENvbnRyb2wiLHQuY3JlYXRlQ29udGVudCgpKX0scCl9LHRoaXMpO3ZhciBvPXRoaXMuZ2V0QWdncmVnYXRpb24oInJvb3RDb250cm9sIik7aWYobyBpbnN0YW5jZW9mIFYpe2lmKHIudGFyZ2V0UGFyZW50PT09dW5kZWZpbmVkKXtyLnRhcmdldFBhcmVudD1vLmdldElkKCl9fX07YS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKHRoaXMuX29Sb3V0ZXIpe3RoaXMuX29Sb3V0ZXIuZGVzdHJveSgpO2RlbGV0ZSB0aGlzLl9vUm91dGVyfUMucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfTthLmdldFJvdXRlckZvcj1mdW5jdGlvbihjKXt2YXIgdj1jO2lmKHYgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5tdmMuQ29udHJvbGxlcil7dj12LmdldFZpZXcoKX1pZih2IGluc3RhbmNlb2YgVil7dmFyIG89Qy5nZXRPd25lcklkRm9yKHYpLGI9c2FwLnVpLmNvbXBvbmVudChvKTtpZihiKXtyZXR1cm4gYi5nZXRSb3V0ZXIoKX1lbHNle3JldHVybiB1bmRlZmluZWR9fX07YS5wcm90b3R5cGUuZ2V0Um91dGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Sb3V0ZXJ9O2EucHJvdG90eXBlLmdldEF1dG9QcmVmaXhJZD1mdW5jdGlvbigpe3JldHVybiBmYWxzZX07YS5wcm90b3R5cGUuYnlJZD1mdW5jdGlvbihpKXtyZXR1cm4gc2FwLnVpLmdldENvcmUoKS5ieUlkKHRoaXMuY3JlYXRlSWQoaSkpfTthLnByb3RvdHlwZS5jcmVhdGVJZD1mdW5jdGlvbihpKXtpZighdGhpcy5pc1ByZWZpeGVkSWQoaSkpe2k9dGhpcy5nZXRJZCgpKyItLS0iK2l9cmV0dXJuIGl9O2EucHJvdG90eXBlLmlzUHJlZml4ZWRJZD1mdW5jdGlvbihpKXtyZXR1cm4oaSYmaS5pbmRleE9mKHRoaXMuZ2V0SWQoKSsiLS0tIik9PT0wKX07YS5wcm90b3R5cGUuY3JlYXRlQ29udGVudD1mdW5jdGlvbigpe3ZhciByPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRSb290VmlldygpO2lmKHIpe3JldHVybiBzYXAudWkudmlldyhyKX1yZXR1cm4gbnVsbH07YS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHIpe3ZhciBjPXRoaXMuZ2V0QWdncmVnYXRpb24oInJvb3RDb250cm9sIik7aWYoYyYmcil7ci5yZW5kZXJDb250cm9sKGMpfX07YS5wcm90b3R5cGUuZ2V0VUlBcmVhPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMub0NvbnRhaW5lcj90aGlzLm9Db250YWluZXIuZ2V0VUlBcmVhKCk6bnVsbCl9O2EucHJvdG90eXBlLmdldEV2ZW50aW5nUGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VUlBcmVhKCl9O2EucHJvdG90eXBlLnNldENvbnRhaW5lcj1mdW5jdGlvbihjKXt0aGlzLm9Db250YWluZXI9YztyZXR1cm4gdGhpc307YS5wcm90b3R5cGUub25CZWZvcmVSZW5kZXJpbmc9ZnVuY3Rpb24oKXt9O2EucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt9O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3JykpewovKiEKICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkKICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIEFHIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuCiAqLwpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9IVE1MVmlldyIsWydzYXAvdWkvY29yZS9saWJyYXJ5JywnLi9WaWV3Jywnc2FwL3VpL2NvcmUvRGVjbGFyYXRpdmVTdXBwb3J0Jywnc2FwL3VpL2NvcmUvUmVuZGVyTWFuYWdlciddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLm12Yy5WaWV3LmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Iix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIn19KTtzYXAudWkuaHRtbHZpZXc9ZnVuY3Rpb24oaSx2KXtyZXR1cm4gc2FwLnVpLnZpZXcoaSx2LHNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5IVE1MKX07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9zVHlwZT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuSFRNTDtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcuX21UZW1wbGF0ZXM9e307c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9tQWxsb3dlZFNldHRpbmdzPXsidmlld05hbWUiOnRydWUsImNvbnRyb2xsZXIiOnRydWUsInZpZXdDb250ZW50Ijp0cnVlLCJjb250cm9sbGVyTmFtZSI6dHJ1ZSwicmVzb3VyY2VCdW5kbGVOYW1lIjp0cnVlLCJyZXNvdXJjZUJ1bmRsZVVybCI6dHJ1ZSwicmVzb3VyY2VCdW5kbGVMb2NhbGUiOnRydWUsInJlc291cmNlQnVuZGxlQWxpYXMiOnRydWV9O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5fZ2V0VGVtcGxhdGU9ZnVuY3Rpb24odCl7dmFyIHU9dGhpcy5fZ2V0Vmlld1VybCh0KTt2YXIgaD10aGlzLl9tVGVtcGxhdGVzW3VdO2lmKCFoKXtoPXRoaXMuX2xvYWRUZW1wbGF0ZSh0KTt0aGlzLl9tVGVtcGxhdGVzW3VdPWh9cmV0dXJuIGh9O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5wcm90b3R5cGUuZ2V0Q29udHJvbGxlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udHJvbGxlck5hbWV9O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5fZ2V0Vmlld1VybD1mdW5jdGlvbih0KXtyZXR1cm4galF1ZXJ5LnNhcC5nZXRNb2R1bGVQYXRoKHQsIi52aWV3Lmh0bWwiKX07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9sb2FkVGVtcGxhdGU9ZnVuY3Rpb24odCl7dmFyIHI9alF1ZXJ5LnNhcC5nZXRSZXNvdXJjZU5hbWUodCwiLnZpZXcuaHRtbCIpO3JldHVybiBqUXVlcnkuc2FwLmxvYWRSZXNvdXJjZShyKX07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3LnByb3RvdHlwZS5pbml0Vmlld1NldHRpbmdzPWZ1bmN0aW9uKHMpe2lmKCFzKXt0aHJvdyBuZXcgRXJyb3IoIm1TZXR0aW5ncyBtdXN0IGJlIGdpdmVuIil9aWYocy52aWV3TmFtZSYmcy52aWV3Q29udGVudCl7dGhyb3cgbmV3IEVycm9yKCJWaWV3IG5hbWUgYW5kIHZpZXcgY29udGVudCBhcmUgZ2l2ZW4uIFRoZXJlIGlzIG5vIHBvaW50IGluIGRvaW5nIHRoaXMsIHNvIHBsZWFzZSBkZWNpZGUuIil9ZWxzZSBpZighcy52aWV3TmFtZSYmIXMudmlld0NvbnRlbnQpe3Rocm93IG5ldyBFcnJvcigiTmVpdGhlciB2aWV3IG5hbWUgbm9yIHZpZXcgY29udGVudCBpcyBnaXZlbi4gT25lIG9mIHRoZW0gaXMgcmVxdWlyZWQuIil9dmFyIGg9cy52aWV3Q29udGVudHx8c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9nZXRUZW1wbGF0ZShzLnZpZXdOYW1lKTt0aGlzLl9vVGVtcGxhdGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIGg9c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5wcmVwYXJlSFRNTDUoaCk7aWYodHlwZW9mIGg9PT0ic3RyaW5nIil7dGhpcy5fb1RlbXBsYXRlLmlubmVySFRNTD1ofWVsc2V7dmFyIG49aDt2YXIgZj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe2YuYXBwZW5kQ2hpbGQobi5pdGVtKGkpKX10aGlzLl9vVGVtcGxhdGUuYXBwZW5kQ2hpbGQoZil9dmFyIG09dGhpcy5fb1RlbXBsYXRlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZW1wbGF0ZSIpWzBdO3ZhciBwPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQcm9wZXJ0aWVzKCk7aWYobSl7dmFyIGE9dGhpczt2YXIgRD1zYXAudWkuY29yZS5EZWNsYXJhdGl2ZVN1cHBvcnQ7alF1ZXJ5LmVhY2gobS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKEksQSl7dmFyIE49RC5jb252ZXJ0QXR0cmlidXRlVG9TZXR0aW5nTmFtZShBLm5hbWUsYS5nZXRJZCgpKTt2YXIgdj1BLnZhbHVlO3ZhciBQPXBbTl07aWYoIXNbTl0pe2lmKFApe3NbTl09RC5jb252ZXJ0VmFsdWVUb1R5cGUoRC5nZXRQcm9wZXJ0eURhdGFUeXBlKFApLHYpfWVsc2UgaWYoc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9tQWxsb3dlZFNldHRpbmdzW05dKXtzW05dPXZ9fX0pO3RoaXMuX29UZW1wbGF0ZT1tfWlmKHRoaXMuX29UZW1wbGF0ZS5jb250ZW50KXt2YXIgZj10aGlzLl9vVGVtcGxhdGUuY29udGVudDt0aGlzLl9vVGVtcGxhdGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5fb1RlbXBsYXRlLmFwcGVuZENoaWxkKGYpfWlmKHMuY29udHJvbGxlck5hbWUpe3RoaXMuX2NvbnRyb2xsZXJOYW1lPXMuY29udHJvbGxlck5hbWV9aWYoKHMucmVzb3VyY2VCdW5kbGVOYW1lfHxzLnJlc291cmNlQnVuZGxlVXJsKSYmKCFzLm1vZGVsc3x8IXMubW9kZWxzW3MucmVzb3VyY2VCdW5kbGVBbGlhc10pKXt2YXIgYj1uZXcgc2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlTW9kZWwoe2J1bmRsZU5hbWU6cy5yZXNvdXJjZUJ1bmRsZU5hbWUsYnVuZGxlVXJsOnMucmVzb3VyY2VCdW5kbGVVcmwsYnVuZGxlTG9jYWxlOnMucmVzb3VyY2VCdW5kbGVMb2NhbGV9KTt0aGlzLnNldE1vZGVsKGIscy5yZXNvdXJjZUJ1bmRsZUFsaWFzKX19O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5wcm90b3R5cGUub25Db250cm9sbGVyQ29ubmVjdGVkPWZ1bmN0aW9uKGMpe3ZhciBzPXRoaXM7c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe3NhcC51aS5jb3JlLkRlY2xhcmF0aXZlU3VwcG9ydC5jb21waWxlKHMuX29UZW1wbGF0ZSxzKX0pfTtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcucHJvdG90eXBlLmV4aXQ9ZnVuY3Rpb24oKXt0aGlzLl9vVGVtcGxhdGU9bnVsbDtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuZXhpdC5jYWxsKHRoaXMpO2lmKHRoaXMuX2Nvbm5lY3RlZENvbnRyb2xzKXtmb3IodmFyIGk9MDtpPHRoaXMuX2Nvbm5lY3RlZENvbnRyb2xzLmxlbmd0aDtpKyspe3RoaXMuX2Nvbm5lY3RlZENvbnRyb2xzW2ldLmRlc3Ryb3koKX10aGlzLl9jb25uZWN0ZWRDb250cm9scz1udWxsfX07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3LnByb3RvdHlwZS5jb25uZWN0Q29udHJvbD1mdW5jdGlvbihjKXt0aGlzLl9jb25uZWN0ZWRDb250cm9scz10aGlzLl9jb25uZWN0ZWRDb250cm9sc3x8W107dGhpcy5fY29ubmVjdGVkQ29udHJvbHMucHVzaChjKX07cmV0dXJuIHNhcC51aS5jb3JlLm12Yy5IVE1MVmlld30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5KU09OVmlldycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5KU09OVmlldycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9KU09OVmlldyIsWydzYXAvdWkvY29yZS9saWJyYXJ5JywnLi9WaWV3J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUubXZjLlZpZXcuZXh0ZW5kKCJzYXAudWkuY29yZS5tdmMuSlNPTlZpZXciLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUifX0pOyhmdW5jdGlvbigpe3NhcC51aS5qc29udmlldz1mdW5jdGlvbihpLHYpe3JldHVybiBzYXAudWkudmlldyhpLHYsc2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLkpTT04pfTtzYXAudWkuY29yZS5tdmMuSlNPTlZpZXcuX3NUeXBlPXNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5KU09OO3NhcC51aS5jb3JlLm12Yy5KU09OVmlldy5wcm90b3R5cGUuaW5pdFZpZXdTZXR0aW5ncz1mdW5jdGlvbihzKXtpZighcyl7dGhyb3cgbmV3IEVycm9yKCJtU2V0dGluZ3MgbXVzdCBiZSBnaXZlbiIpfWlmKHMudmlld05hbWUmJnMudmlld0NvbnRlbnQpe3Rocm93IG5ldyBFcnJvcigiVmlldyBuYW1lIGFuZCB2aWV3IGNvbnRlbnQgYXJlIGdpdmVuLiBUaGVyZSBpcyBubyBwb2ludCBpbiBkb2luZyB0aGlzLCBzbyBwbGVhc2UgZGVjaWRlLiIpfWVsc2UgaWYoIXMudmlld05hbWUmJiFzLnZpZXdDb250ZW50KXt0aHJvdyBuZXcgRXJyb3IoIk5laXRoZXIgdmlldyBuYW1lIG5vciB2aWV3IGNvbnRlbnQgaXMgZ2l2ZW4uIE9uZSBvZiB0aGVtIGlzIHJlcXVpcmVkLiIpfWlmKHMudmlld05hbWUpe3RoaXMuX2xvYWRUZW1wbGF0ZShzLnZpZXdOYW1lKX1lbHNlIGlmKHMudmlld0NvbnRlbnQpe3RoaXMubVByb3BlcnRpZXNbInZpZXdDb250ZW50Il09cy52aWV3Q29udGVudDtpZih0eXBlb2Ygcy52aWV3Q29udGVudD09PSJzdHJpbmciKXt0aGlzLl9vSlNPTlZpZXc9alF1ZXJ5LnBhcnNlSlNPTihzLnZpZXdDb250ZW50KTtpZighdGhpcy5fb0pTT05WaWV3KXt0aHJvdyBuZXcgRXJyb3IoImVycm9yIHdoZW4gcGFyc2luZyB2aWV3Q29udGVudDogIitzLnZpZXdDb250ZW50KX19ZWxzZSBpZih0eXBlb2Ygcy52aWV3Q29udGVudD09PSJvYmplY3QiKXt0aGlzLl9vSlNPTlZpZXc9cy52aWV3Q29udGVudH1lbHNle3Rocm93IG5ldyBFcnJvcigidmlld0NvbnRlbnQgbXVzdCBiZSBhIEpTT04gc3RyaW5nIG9yIG9iamVjdCwgYnV0IGlzIGEgIisodHlwZW9mIHMudmlld0NvbnRlbnQpKX19ZWxzZXt9aWYoKHRoaXMuX29KU09OVmlldy5yZXNvdXJjZUJ1bmRsZU5hbWV8fHRoaXMuX29KU09OVmlldy5yZXNvdXJjZUJ1bmRsZVVybCkmJighcy5tb2RlbHN8fCFzLm1vZGVsc1t0aGlzLl9vSlNPTlZpZXcucmVzb3VyY2VCdW5kbGVBbGlhc10pKXt2YXIgbT1uZXcgc2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlTW9kZWwoe2J1bmRsZU5hbWU6dGhpcy5fb0pTT05WaWV3LnJlc291cmNlQnVuZGxlTmFtZSxidW5kbGVVcmw6dGhpcy5fb0pTT05WaWV3LnJlc291cmNlQnVuZGxlVXJsfSk7dGhpcy5zZXRNb2RlbChtLHRoaXMuX29KU09OVmlldy5yZXNvdXJjZUJ1bmRsZUFsaWFzKX19O3NhcC51aS5jb3JlLm12Yy5KU09OVmlldy5wcm90b3R5cGUub25Db250cm9sbGVyQ29ubmVjdGVkPWZ1bmN0aW9uKGMpe3ZhciB0PXRoaXM7c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe3QuYXBwbHlTZXR0aW5ncyh7Y29udGVudDp0Ll9vSlNPTlZpZXcuY29udGVudH0pfSx7aWQ6ZnVuY3Rpb24oaSl7cmV0dXJuIHQuY3JlYXRlSWQoaSl9LHNldHRpbmdzOmZ1bmN0aW9uKHMpe3ZhciBtPXRoaXMuZ2V0TWV0YWRhdGEoKSx2PW0uZ2V0SlNPTktleXMoKSxrLFYsSztmb3IoayBpbiBzKXtpZihLPXZba10pe1Y9c1trXTtzd2l0Y2goSy5faUtpbmQpe2Nhc2UgMzpzW2tdPXQuY3JlYXRlSWQoVik7YnJlYWs7Y2FzZSA1OmlmKHR5cGVvZiBzW2tdPT09InN0cmluZyIpe3Nba109W2Nbc1trXV0sY119YnJlYWt9fX19fSl9O3NhcC51aS5jb3JlLm12Yy5KU09OVmlldy5wcm90b3R5cGUuX2xvYWRUZW1wbGF0ZT1mdW5jdGlvbih0KXt2YXIgcj1qUXVlcnkuc2FwLmdldFJlc291cmNlTmFtZSh0LCIudmlldy5qc29uIik7dGhpcy5fb0pTT05WaWV3PWpRdWVyeS5zYXAubG9hZFJlc291cmNlKHIpfTtzYXAudWkuY29yZS5tdmMuSlNPTlZpZXcucHJvdG90eXBlLmdldENvbnRyb2xsZXJOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29KU09OVmlldy5jb250cm9sbGVyTmFtZX19KCkpO3JldHVybiBzYXAudWkuY29yZS5tdmMuSlNPTlZpZXd9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuSlNWaWV3Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLkpTVmlldycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9KU1ZpZXciLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJy4vVmlldyddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLm12Yy5WaWV3LmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLkpTVmlldyIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSJ9fSk7KGZ1bmN0aW9uKCl7dmFyIHI9e307c2FwLnVpLmpzdmlldz1mdW5jdGlvbihpLHYpe3ZhciBzPXt9O2lmKHYmJnR5cGVvZih2KT09InN0cmluZyIpe3Mudmlld05hbWU9djtzLmNvbnRyb2xsZXI9YXJndW1lbnRzWzJdO3ZhciBWPW5ldyBzYXAudWkuY29yZS5tdmMuSlNWaWV3KGkscyk7cmV0dXJuIFZ9ZWxzZSBpZih2JiZ0eXBlb2Yodik9PSJvYmplY3QiKXtyW2ldPXY7alF1ZXJ5LnNhcC5kZWNsYXJlKHttb2ROYW1lOmksdHlwZToidmlldyJ9LGZhbHNlKX1lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PTEmJnR5cGVvZihhcmd1bWVudHNbMF0pPT0ic3RyaW5nIil7cy52aWV3TmFtZT1pO3MuY29udHJvbGxlcj1hcmd1bWVudHNbMV07dmFyIFY9cy5pZD9uZXcgc2FwLnVpLmNvcmUubXZjLkpTVmlldyhzLmlkLHMpOm5ldyBzYXAudWkuY29yZS5tdmMuSlNWaWV3KHMpO3JldHVybiBWfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJXcm9uZyBhcmd1bWVudHMhIEVpdGhlciBjYWxsIHNhcC51aS5qc3ZpZXcoW3NJZCxdIHNWaWV3TmFtZSkgdG8gaW5zdGFudGlhdGUgYSBWaWV3IG9yIHNhcC51aS5qc3ZpZXcoc1ZpZXdOYW1lLCBvVmlld0ltcGwpIHRvIGRlZmluZSBhIFZpZXcgdHlwZS4iKX19O3NhcC51aS5jb3JlLm12Yy5KU1ZpZXcucHJvdG90eXBlLmluaXRWaWV3U2V0dGluZ3M9ZnVuY3Rpb24ocyl7aWYoIXJbcy52aWV3TmFtZV0pe2pRdWVyeS5zYXAucmVxdWlyZSh7bW9kTmFtZTpzLnZpZXdOYW1lLHR5cGU6InZpZXcifSl9alF1ZXJ5LmV4dGVuZCh0aGlzLHJbcy52aWV3TmFtZV0pfTtzYXAudWkuY29yZS5tdmMuSlNWaWV3LnByb3RvdHlwZS5vbkNvbnRyb2xsZXJDb25uZWN0ZWQ9ZnVuY3Rpb24oYyl7dmFyIHQ9dGhpczt2YXIgcD17fTtpZih0aGlzLmdldEF1dG9QcmVmaXhJZCgpKXtwLmlkPWZ1bmN0aW9uKGkpe3JldHVybiB0LmNyZWF0ZUlkKGkpfX1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LnJ1bldpdGhQcmVwcm9jZXNzb3JzKGZ1bmN0aW9uKCl7dC5hcHBseVNldHRpbmdzKHtjb250ZW50OnQuY3JlYXRlQ29udGVudChjKX0pfSxwKX07c2FwLnVpLmNvcmUubXZjLkpTVmlldy5wcm90b3R5cGUuZ2V0QXV0b1ByZWZpeElkPWZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlfX0oKSk7cmV0dXJuIHNhcC51aS5jb3JlLm12Yy5KU1ZpZXd9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9UZW1wbGF0ZVZpZXciLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJy4vVmlldyddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLm12Yy5WaWV3LmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldyIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSJ9fSk7KGZ1bmN0aW9uKCl7c2FwLnVpLnRlbXBsYXRldmlldz1mdW5jdGlvbihpLHYpe3JldHVybiBzYXAudWkudmlldyhpLHYsc2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlRlbXBsYXRlKX07c2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldy5fc1R5cGU9c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlRlbXBsYXRlO3NhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXcucHJvdG90eXBlLmdldENvbnRyb2xsZXJOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NDb250cm9sbGVyTmFtZX07c2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldy5fZ2V0Vmlld1VybD1mdW5jdGlvbih0KXtyZXR1cm4galF1ZXJ5LnNhcC5nZXRNb2R1bGVQYXRoKHQsIi52aWV3LnRtcGwiKX07c2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldy5wcm90b3R5cGUuaW5pdFZpZXdTZXR0aW5ncz1mdW5jdGlvbihzKXtpZighcyl7dGhyb3cgbmV3IEVycm9yKCJtU2V0dGluZ3MgbXVzdCBiZSBnaXZlbiIpfWlmKCFzLnZpZXdOYW1lKXt0aHJvdyBuZXcgRXJyb3IoIk5vIHZpZXcgbmFtZSBpcyBnaXZlbi4iKX10aGlzLl9vVGVtcGxhdGU9c2FwLnVpLnRlbXBsYXRlKHtpZDp0aGlzLmdldElkKCksc3JjOnNhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXcuX2dldFZpZXdVcmwocy52aWV3TmFtZSl9KTt0aGlzLl9zQ29udHJvbGxlck5hbWU9dGhpcy5fb1RlbXBsYXRlLl9zQ29udHJvbGxlck5hbWU7dGhpcy5fb1RlbXBsYXRlPXRoaXMuX29UZW1wbGF0ZS5jcmVhdGVDb250cm9sKHVuZGVmaW5lZCx1bmRlZmluZWQsdGhpcyk7dGhpcy5hZGRDb250ZW50KHRoaXMuX29UZW1wbGF0ZSl9fSgpKTtyZXR1cm4gc2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlld30sdHJ1ZSl9O3NhcC51aS5nZXRDb3JlKCkuYm9vdCYmc2FwLnVpLmdldENvcmUoKS5ib290KCk7Cn0gY2F0Y2gob0Vycm9yKSB7CmlmIChvRXJyb3IubmFtZSAhPSAiUmVzdGFydCIpIHsgdGhyb3cgb0Vycm9yOyB9Cn0K",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 21:27:21 GMT",
                    "Content-Length": "1064019",
                    "Date": "Fri, 07 Nov 2014 21:27:35 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}