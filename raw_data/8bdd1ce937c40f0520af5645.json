{
    "url": "http://localhost:9999/DimitarChristoff/StrongPass/test/lib/mootools-yui-compressed.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Open redirection (DOM-based)",
    "issueType": 5243152,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based open redirection vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the target of a redirection in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause a redirection to an arbitrary external domain. This behavior can be leveraged to facilitate phishing attacks against users of the application. The ability to use an authentic application URL, targeting the correct domain with a valid SSL certificate (if SSL is used) lends credibility to the phishing attack because many users, even if they verify these features, will not notice the subsequent redirection to a different domain.<br><br><b>Note:</b> If an attacker is able to control the start of the string that is passed to the redirection API, then it may be possible to escalate this vulnerability into a JavaScript injection attack, by using a URL with the javascript: pseudo-protocol to execute arbitrary script code when the URL is processed by the browser.",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based open redirection vulnerabilities is not to dynamically set redirection targets using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a redirection target. In general, this is best achieved by using a whitelist of URLs that are permitted redirection targets, and strictly validating the target against this list before performing the redirection.",
    "issueDetail": "The application may be vulnerable to DOM-based open redirection. Data is read from <b>document.location.pathname</b> and written to <b>the 'open()' function of an XMLHttpRequest object</b> via the following statements:<ul><li>f=document.location.pathname;</li><li>f=f.substr(0,i);</li><li>n.open(e.toUpperCase(),f,this.options.async,this.options.user,this.options.password);</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/DimitarChristoff/StrongPass/test/lib/mootools-yui-compressed.js",
                "path": "/DimitarChristoff/StrongPass/test/lib/mootools-yui-compressed.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9EaW1pdGFyQ2hyaXN0b2ZmL1N0cm9uZ1Bhc3MvdGVzdC9saWIvbW9vdG9vbHMteXVpLWNvbXByZXNzZWQuanMgSFRUUC8xLjENCkhvc3Q6IGxvY2FsaG9zdDo5OTk5DQoNCg==",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogOTYzNjINCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkRhdGU6IFNhdCwgMDggTm92IDIwMTQgMTQ6NTY6NTAgR01UDQpMYXN0LU1vZGlmaWVkOiBTYXQsIDA4IE5vdiAyMDE0IDE0OjU2OjUwIEdNVA0KDQovKgotLS0KTW9vVG9vbHM6IHRoZSBqYXZhc2NyaXB0IGZyYW1ld29yawoKd2ViIGJ1aWxkOgogLSBodHRwOi8vbW9vdG9vbHMubmV0L2NvcmUvNzZiZjQ3MDYyZDZjMTk4M2Q2NmNlNDdhZDY2YWEwZTAKCnBhY2thZ2VyIGJ1aWxkOgogLSBwYWNrYWdlciBidWlsZCBDb3JlL0NvcmUgQ29yZS9BcnJheSBDb3JlL1N0cmluZyBDb3JlL051bWJlciBDb3JlL0Z1bmN0aW9uIENvcmUvT2JqZWN0IENvcmUvRXZlbnQgQ29yZS9Ccm93c2VyIENvcmUvQ2xhc3MgQ29yZS9DbGFzcy5FeHRyYXMgQ29yZS9TbGljay5QYXJzZXIgQ29yZS9TbGljay5GaW5kZXIgQ29yZS9FbGVtZW50IENvcmUvRWxlbWVudC5TdHlsZSBDb3JlL0VsZW1lbnQuRXZlbnQgQ29yZS9FbGVtZW50LkRlbGVnYXRpb24gQ29yZS9FbGVtZW50LkRpbWVuc2lvbnMgQ29yZS9GeCBDb3JlL0Z4LkNTUyBDb3JlL0Z4LlR3ZWVuIENvcmUvRnguTW9ycGggQ29yZS9GeC5UcmFuc2l0aW9ucyBDb3JlL1JlcXVlc3QgQ29yZS9SZXF1ZXN0LkhUTUwgQ29yZS9SZXF1ZXN0LkpTT04gQ29yZS9Db29raWUgQ29yZS9KU09OIENvcmUvRE9NUmVhZHkgQ29yZS9Td2lmZgoKY29weXJpZ2h0czoKICAtIFtNb29Ub29sc10oaHR0cDovL21vb3Rvb2xzLm5ldCkKCmxpY2Vuc2VzOgogIC0gW01JVCBMaWNlbnNlXShodHRwOi8vbW9vdG9vbHMubmV0L2xpY2Vuc2UudHh0KQouLi4KKi8KCihmdW5jdGlvbigpe3RoaXMuTW9vVG9vbHM9e3ZlcnNpb246IjEuNC41IixidWlsZDoiYWI4ZWE4ODI0ZGMzYjI0YjY2NjY4NjdhMmM0ZWQ1OGViYjc2MmNmMCJ9O3ZhciBlPXRoaXMudHlwZU9mPWZ1bmN0aW9uKGkpe2lmKGk9PW51bGwpe3JldHVybiJudWxsIjt9aWYoaS4kZmFtaWx5IT1udWxsKXtyZXR1cm4gaS4kZmFtaWx5KCk7Cn1pZihpLm5vZGVOYW1lKXtpZihpLm5vZGVUeXBlPT0xKXtyZXR1cm4iZWxlbWVudCI7fWlmKGkubm9kZVR5cGU9PTMpe3JldHVybigvXFMvKS50ZXN0KGkubm9kZVZhbHVlKT8idGV4dG5vZGUiOiJ3aGl0ZXNwYWNlIjt9fWVsc2V7aWYodHlwZW9mIGkubGVuZ3RoPT0ibnVtYmVyIil7aWYoaS5jYWxsZWUpe3JldHVybiJhcmd1bWVudHMiOwp9aWYoIml0ZW0iIGluIGkpe3JldHVybiJjb2xsZWN0aW9uIjt9fX1yZXR1cm4gdHlwZW9mIGk7fTt2YXIgdT10aGlzLmluc3RhbmNlT2Y9ZnVuY3Rpb24odyxpKXtpZih3PT1udWxsKXtyZXR1cm4gZmFsc2U7fXZhciB2PXcuJGNvbnN0cnVjdG9yfHx3LmNvbnN0cnVjdG9yOwp3aGlsZSh2KXtpZih2PT09aSl7cmV0dXJuIHRydWU7fXY9di5wYXJlbnQ7fWlmKCF3Lmhhc093blByb3BlcnR5KXtyZXR1cm4gZmFsc2U7fXJldHVybiB3IGluc3RhbmNlb2YgaTt9O3ZhciBmPXRoaXMuRnVuY3Rpb247dmFyIHI9dHJ1ZTtmb3IodmFyIHEgaW4ge3RvU3RyaW5nOjF9KXtyPW51bGw7Cn1pZihyKXtyPVsiaGFzT3duUHJvcGVydHkiLCJ2YWx1ZU9mIiwiaXNQcm90b3R5cGVPZiIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwidG9Mb2NhbGVTdHJpbmciLCJ0b1N0cmluZyIsImNvbnN0cnVjdG9yIl07fWYucHJvdG90eXBlLm92ZXJsb2FkU2V0dGVyPWZ1bmN0aW9uKHYpe3ZhciBpPXRoaXM7CnJldHVybiBmdW5jdGlvbih4LHcpe2lmKHg9PW51bGwpe3JldHVybiB0aGlzO31pZih2fHx0eXBlb2YgeCE9InN0cmluZyIpe2Zvcih2YXIgeSBpbiB4KXtpLmNhbGwodGhpcyx5LHhbeV0pO31pZihyKXtmb3IodmFyIHo9ci5sZW5ndGg7ei0tOyl7eT1yW3pdO2lmKHguaGFzT3duUHJvcGVydHkoeSkpe2kuY2FsbCh0aGlzLHkseFt5XSk7Cn19fX1lbHNle2kuY2FsbCh0aGlzLHgsdyk7fXJldHVybiB0aGlzO307fTtmLnByb3RvdHlwZS5vdmVybG9hZEdldHRlcj1mdW5jdGlvbih2KXt2YXIgaT10aGlzO3JldHVybiBmdW5jdGlvbih4KXt2YXIgeSx3O2lmKHR5cGVvZiB4IT0ic3RyaW5nIil7eT14O31lbHNle2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7eT1hcmd1bWVudHM7Cn1lbHNle2lmKHYpe3k9W3hdO319fWlmKHkpe3c9e307Zm9yKHZhciB6PTA7ejx5Lmxlbmd0aDt6Kyspe3dbeVt6XV09aS5jYWxsKHRoaXMseVt6XSk7fX1lbHNle3c9aS5jYWxsKHRoaXMseCk7fXJldHVybiB3O307fTtmLnByb3RvdHlwZS5leHRlbmQ9ZnVuY3Rpb24oaSx2KXt0aGlzW2ldPXY7Cn0ub3ZlcmxvYWRTZXR0ZXIoKTtmLnByb3RvdHlwZS5pbXBsZW1lbnQ9ZnVuY3Rpb24oaSx2KXt0aGlzLnByb3RvdHlwZVtpXT12O30ub3ZlcmxvYWRTZXR0ZXIoKTt2YXIgbz1BcnJheS5wcm90b3R5cGUuc2xpY2U7Zi5mcm9tPWZ1bmN0aW9uKGkpe3JldHVybihlKGkpPT0iZnVuY3Rpb24iKT9pOmZ1bmN0aW9uKCl7cmV0dXJuIGk7Cn07fTtBcnJheS5mcm9tPWZ1bmN0aW9uKGkpe2lmKGk9PW51bGwpe3JldHVybltdO31yZXR1cm4oay5pc0VudW1lcmFibGUoaSkmJnR5cGVvZiBpIT0ic3RyaW5nIik/KGUoaSk9PSJhcnJheSIpP2k6by5jYWxsKGkpOltpXTt9O051bWJlci5mcm9tPWZ1bmN0aW9uKHYpe3ZhciBpPXBhcnNlRmxvYXQodik7CnJldHVybiBpc0Zpbml0ZShpKT9pOm51bGw7fTtTdHJpbmcuZnJvbT1mdW5jdGlvbihpKXtyZXR1cm4gaSsiIjt9O2YuaW1wbGVtZW50KHtoaWRlOmZ1bmN0aW9uKCl7dGhpcy4kaGlkZGVuPXRydWU7cmV0dXJuIHRoaXM7fSxwcm90ZWN0OmZ1bmN0aW9uKCl7dGhpcy4kcHJvdGVjdGVkPXRydWU7CnJldHVybiB0aGlzO319KTt2YXIgaz10aGlzLlR5cGU9ZnVuY3Rpb24oeCx3KXtpZih4KXt2YXIgdj14LnRvTG93ZXJDYXNlKCk7dmFyIGk9ZnVuY3Rpb24oeSl7cmV0dXJuKGUoeSk9PXYpO307a1siaXMiK3hdPWk7aWYodyE9bnVsbCl7dy5wcm90b3R5cGUuJGZhbWlseT0oZnVuY3Rpb24oKXtyZXR1cm4gdjsKfSkuaGlkZSgpO3cudHlwZT1pO319aWYodz09bnVsbCl7cmV0dXJuIG51bGw7fXcuZXh0ZW5kKHRoaXMpO3cuJGNvbnN0cnVjdG9yPWs7dy5wcm90b3R5cGUuJGNvbnN0cnVjdG9yPXc7cmV0dXJuIHc7fTt2YXIgcD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2suaXNFbnVtZXJhYmxlPWZ1bmN0aW9uKGkpe3JldHVybihpIT1udWxsJiZ0eXBlb2YgaS5sZW5ndGg9PSJudW1iZXIiJiZwLmNhbGwoaSkhPSJbb2JqZWN0IEZ1bmN0aW9uXSIpOwp9O3ZhciBiPXt9O3ZhciBkPWZ1bmN0aW9uKGkpe3ZhciB2PWUoaS5wcm90b3R5cGUpO3JldHVybiBiW3ZdfHwoYlt2XT1bXSk7fTt2YXIgaD1mdW5jdGlvbih3LEEpe2lmKEEmJkEuJGhpZGRlbil7cmV0dXJuO312YXIgdj1kKHRoaXMpO2Zvcih2YXIgeD0wO3g8di5sZW5ndGg7CngrKyl7dmFyIHo9dlt4XTtpZihlKHopPT0idHlwZSIpe2guY2FsbCh6LHcsQSk7fWVsc2V7ei5jYWxsKHRoaXMsdyxBKTt9fXZhciB5PXRoaXMucHJvdG90eXBlW3ddO2lmKHk9PW51bGx8fCF5LiRwcm90ZWN0ZWQpe3RoaXMucHJvdG90eXBlW3ddPUE7fWlmKHRoaXNbd109PW51bGwmJmUoQSk9PSJmdW5jdGlvbiIpe3QuY2FsbCh0aGlzLHcsZnVuY3Rpb24oaSl7cmV0dXJuIEEuYXBwbHkoaSxvLmNhbGwoYXJndW1lbnRzLDEpKTsKfSk7fX07dmFyIHQ9ZnVuY3Rpb24oaSx3KXtpZih3JiZ3LiRoaWRkZW4pe3JldHVybjt9dmFyIHY9dGhpc1tpXTtpZih2PT1udWxsfHwhdi4kcHJvdGVjdGVkKXt0aGlzW2ldPXc7fX07ay5pbXBsZW1lbnQoe2ltcGxlbWVudDpoLm92ZXJsb2FkU2V0dGVyKCksZXh0ZW5kOnQub3ZlcmxvYWRTZXR0ZXIoKSxhbGlhczpmdW5jdGlvbihpLHYpe2guY2FsbCh0aGlzLGksdGhpcy5wcm90b3R5cGVbdl0pOwp9Lm92ZXJsb2FkU2V0dGVyKCksbWlycm9yOmZ1bmN0aW9uKGkpe2QodGhpcykucHVzaChpKTtyZXR1cm4gdGhpczt9fSk7bmV3IGsoIlR5cGUiLGspO3ZhciBjPWZ1bmN0aW9uKHYsQSx5KXt2YXIgeD0oQSE9T2JqZWN0KSxFPUEucHJvdG90eXBlO2lmKHgpe0E9bmV3IGsodixBKTsKfWZvcih2YXIgQj0wLHo9eS5sZW5ndGg7Qjx6O0IrKyl7dmFyIEY9eVtCXSxEPUFbRl0sQz1FW0ZdO2lmKEQpe0QucHJvdGVjdCgpO31pZih4JiZDKXtBLmltcGxlbWVudChGLEMucHJvdGVjdCgpKTt9fWlmKHgpe3ZhciB3PUUucHJvcGVydHlJc0VudW1lcmFibGUoeVswXSk7CkEuZm9yRWFjaE1ldGhvZD1mdW5jdGlvbihKKXtpZighdyl7Zm9yKHZhciBJPTAsRz15Lmxlbmd0aDtJPEc7SSsrKXtKLmNhbGwoRSxFW3lbSV1dLHlbSV0pO319Zm9yKHZhciBIIGluIEUpe0ouY2FsbChFLEVbSF0sSCk7fX07fXJldHVybiBjO307YygiU3RyaW5nIixTdHJpbmcsWyJjaGFyQXQiLCJjaGFyQ29kZUF0IiwiY29uY2F0IiwiaW5kZXhPZiIsImxhc3RJbmRleE9mIiwibWF0Y2giLCJxdW90ZSIsInJlcGxhY2UiLCJzZWFyY2giLCJzbGljZSIsInNwbGl0Iiwic3Vic3RyIiwic3Vic3RyaW5nIiwidHJpbSIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiXSkoIkFycmF5IixBcnJheSxbInBvcCIsInB1c2giLCJyZXZlcnNlIiwic2hpZnQiLCJzb3J0Iiwic3BsaWNlIiwidW5zaGlmdCIsImNvbmNhdCIsImpvaW4iLCJzbGljZSIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsImZpbHRlciIsImZvckVhY2giLCJldmVyeSIsIm1hcCIsInNvbWUiLCJyZWR1Y2UiLCJyZWR1Y2VSaWdodCJdKSgiTnVtYmVyIixOdW1iZXIsWyJ0b0V4cG9uZW50aWFsIiwidG9GaXhlZCIsInRvTG9jYWxlU3RyaW5nIiwidG9QcmVjaXNpb24iXSkoIkZ1bmN0aW9uIixmLFsiYXBwbHkiLCJjYWxsIiwiYmluZCJdKSgiUmVnRXhwIixSZWdFeHAsWyJleGVjIiwidGVzdCJdKSgiT2JqZWN0IixPYmplY3QsWyJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsImRlZmluZVByb3BlcnRpZXMiLCJrZXlzIiwiZ2V0UHJvdG90eXBlT2YiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwicHJldmVudEV4dGVuc2lvbnMiLCJpc0V4dGVuc2libGUiLCJzZWFsIiwiaXNTZWFsZWQiLCJmcmVlemUiLCJpc0Zyb3plbiJdKSgiRGF0ZSIsRGF0ZSxbIm5vdyJdKTsKT2JqZWN0LmV4dGVuZD10Lm92ZXJsb2FkU2V0dGVyKCk7RGF0ZS5leHRlbmQoIm5vdyIsZnVuY3Rpb24oKXtyZXR1cm4gKyhuZXcgRGF0ZSk7fSk7bmV3IGsoIkJvb2xlYW4iLEJvb2xlYW4pO051bWJlci5wcm90b3R5cGUuJGZhbWlseT1mdW5jdGlvbigpe3JldHVybiBpc0Zpbml0ZSh0aGlzKT8ibnVtYmVyIjoibnVsbCI7Cn0uaGlkZSgpO051bWJlci5leHRlbmQoInJhbmRvbSIsZnVuY3Rpb24odixpKXtyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihpLXYrMSkrdik7fSk7dmFyIGw9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtPYmplY3QuZXh0ZW5kKCJmb3JFYWNoIixmdW5jdGlvbihpLHcseCl7Zm9yKHZhciB2IGluIGkpe2lmKGwuY2FsbChpLHYpKXt3LmNhbGwoeCxpW3ZdLHYsaSk7Cn19fSk7T2JqZWN0LmVhY2g9T2JqZWN0LmZvckVhY2g7QXJyYXkuaW1wbGVtZW50KHtmb3JFYWNoOmZ1bmN0aW9uKHgseSl7Zm9yKHZhciB3PTAsdj10aGlzLmxlbmd0aDt3PHY7dysrKXtpZih3IGluIHRoaXMpe3guY2FsbCh5LHRoaXNbd10sdyx0aGlzKTt9fX0sZWFjaDpmdW5jdGlvbihpLHYpe0FycmF5LmZvckVhY2godGhpcyxpLHYpOwpyZXR1cm4gdGhpczt9fSk7dmFyIHM9ZnVuY3Rpb24oaSl7c3dpdGNoKGUoaSkpe2Nhc2UiYXJyYXkiOnJldHVybiBpLmNsb25lKCk7Y2FzZSJvYmplY3QiOnJldHVybiBPYmplY3QuY2xvbmUoaSk7ZGVmYXVsdDpyZXR1cm4gaTt9fTtBcnJheS5pbXBsZW1lbnQoImNsb25lIixmdW5jdGlvbigpe3ZhciB2PXRoaXMubGVuZ3RoLHc9bmV3IEFycmF5KHYpOwp3aGlsZSh2LS0pe3dbdl09cyh0aGlzW3ZdKTt9cmV0dXJuIHc7fSk7dmFyIGE9ZnVuY3Rpb24odixpLHcpe3N3aXRjaChlKHcpKXtjYXNlIm9iamVjdCI6aWYoZSh2W2ldKT09Im9iamVjdCIpe09iamVjdC5tZXJnZSh2W2ldLHcpO31lbHNle3ZbaV09T2JqZWN0LmNsb25lKHcpOwp9YnJlYWs7Y2FzZSJhcnJheSI6dltpXT13LmNsb25lKCk7YnJlYWs7ZGVmYXVsdDp2W2ldPXc7fXJldHVybiB2O307T2JqZWN0LmV4dGVuZCh7bWVyZ2U6ZnVuY3Rpb24oQyx5LHgpe2lmKGUoeSk9PSJzdHJpbmciKXtyZXR1cm4gYShDLHkseCk7fWZvcih2YXIgQj0xLHc9YXJndW1lbnRzLmxlbmd0aDsKQjx3O0IrKyl7dmFyIHo9YXJndW1lbnRzW0JdO2Zvcih2YXIgQSBpbiB6KXthKEMsQSx6W0FdKTt9fXJldHVybiBDO30sY2xvbmU6ZnVuY3Rpb24oaSl7dmFyIHc9e307Zm9yKHZhciB2IGluIGkpe3dbdl09cyhpW3ZdKTt9cmV0dXJuIHc7fSxhcHBlbmQ6ZnVuY3Rpb24oeil7Zm9yKHZhciB5PTEsdz1hcmd1bWVudHMubGVuZ3RoOwp5PHc7eSsrKXt2YXIgdj1hcmd1bWVudHNbeV18fHt9O2Zvcih2YXIgeCBpbiB2KXt6W3hdPXZbeF07fX1yZXR1cm4gejt9fSk7WyJPYmplY3QiLCJXaGl0ZVNwYWNlIiwiVGV4dE5vZGUiLCJDb2xsZWN0aW9uIiwiQXJndW1lbnRzIl0uZWFjaChmdW5jdGlvbihpKXtuZXcgayhpKTsKfSk7dmFyIGo9RGF0ZS5ub3coKTtTdHJpbmcuZXh0ZW5kKCJ1bmlxdWVJRCIsZnVuY3Rpb24oKXtyZXR1cm4oaisrKS50b1N0cmluZygzNik7fSk7dmFyIGc9dGhpcy5IYXNoPW5ldyBrKCJIYXNoIixmdW5jdGlvbihpKXtpZihlKGkpPT0iaGFzaCIpe2k9T2JqZWN0LmNsb25lKGkuZ2V0Q2xlYW4oKSk7Cn1mb3IodmFyIHYgaW4gaSl7dGhpc1t2XT1pW3ZdO31yZXR1cm4gdGhpczt9KTtnLmltcGxlbWVudCh7Zm9yRWFjaDpmdW5jdGlvbihpLHYpe09iamVjdC5mb3JFYWNoKHRoaXMsaSx2KTt9LGdldENsZWFuOmZ1bmN0aW9uKCl7dmFyIHY9e307Zm9yKHZhciBpIGluIHRoaXMpe2lmKHRoaXMuaGFzT3duUHJvcGVydHkoaSkpe3ZbaV09dGhpc1tpXTsKfX1yZXR1cm4gdjt9LGdldExlbmd0aDpmdW5jdGlvbigpe3ZhciB2PTA7Zm9yKHZhciBpIGluIHRoaXMpe2lmKHRoaXMuaGFzT3duUHJvcGVydHkoaSkpe3YrKzt9fXJldHVybiB2O319KTtnLmFsaWFzKCJlYWNoIiwiZm9yRWFjaCIpO09iamVjdC50eXBlPWsuaXNPYmplY3Q7CnZhciBuPXRoaXMuTmF0aXZlPWZ1bmN0aW9uKGkpe3JldHVybiBuZXcgayhpLm5hbWUsaS5pbml0aWFsaXplKTt9O24udHlwZT1rLnR5cGU7bi5pbXBsZW1lbnQ9ZnVuY3Rpb24oeCx2KXtmb3IodmFyIHc9MDt3PHgubGVuZ3RoO3crKyl7eFt3XS5pbXBsZW1lbnQodik7Cn1yZXR1cm4gbjt9O3ZhciBtPUFycmF5LnR5cGU7QXJyYXkudHlwZT1mdW5jdGlvbihpKXtyZXR1cm4gdShpLEFycmF5KXx8bShpKTt9O3RoaXMuJEE9ZnVuY3Rpb24oaSl7cmV0dXJuIEFycmF5LmZyb20oaSkuc2xpY2UoKTt9O3RoaXMuJGFyZ3VtZW50cz1mdW5jdGlvbih2KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzW3ZdOwp9O307dGhpcy4kY2hrPWZ1bmN0aW9uKGkpe3JldHVybiAhIShpfHxpPT09MCk7fTt0aGlzLiRjbGVhcj1mdW5jdGlvbihpKXtjbGVhclRpbWVvdXQoaSk7Y2xlYXJJbnRlcnZhbChpKTtyZXR1cm4gbnVsbDt9O3RoaXMuJGRlZmluZWQ9ZnVuY3Rpb24oaSl7cmV0dXJuKGkhPW51bGwpOwp9O3RoaXMuJGVhY2g9ZnVuY3Rpb24odyx2LHgpe3ZhciBpPWUodyk7KChpPT0iYXJndW1lbnRzInx8aT09ImNvbGxlY3Rpb24ifHxpPT0iYXJyYXkifHxpPT0iZWxlbWVudHMiKT9BcnJheTpPYmplY3QpLmVhY2godyx2LHgpO307dGhpcy4kZW1wdHk9ZnVuY3Rpb24oKXt9Owp0aGlzLiRleHRlbmQ9ZnVuY3Rpb24odixpKXtyZXR1cm4gT2JqZWN0LmFwcGVuZCh2LGkpO307dGhpcy4kSD1mdW5jdGlvbihpKXtyZXR1cm4gbmV3IGcoaSk7fTt0aGlzLiRtZXJnZT1mdW5jdGlvbigpe3ZhciBpPUFycmF5LnNsaWNlKGFyZ3VtZW50cyk7aS51bnNoaWZ0KHt9KTsKcmV0dXJuIE9iamVjdC5tZXJnZS5hcHBseShudWxsLGkpO307dGhpcy4kbGFtYmRhPWYuZnJvbTt0aGlzLiRtaXhpbj1PYmplY3QubWVyZ2U7dGhpcy4kcmFuZG9tPU51bWJlci5yYW5kb207dGhpcy4kc3BsYXQ9QXJyYXkuZnJvbTt0aGlzLiR0aW1lPURhdGUubm93Owp0aGlzLiR0eXBlPWZ1bmN0aW9uKGkpe3ZhciB2PWUoaSk7aWYodj09ImVsZW1lbnRzIil7cmV0dXJuImFycmF5Ijt9cmV0dXJuKHY9PSJudWxsIik/ZmFsc2U6djt9O3RoaXMuJHVubGluaz1mdW5jdGlvbihpKXtzd2l0Y2goZShpKSl7Y2FzZSJvYmplY3QiOnJldHVybiBPYmplY3QuY2xvbmUoaSk7CmNhc2UiYXJyYXkiOnJldHVybiBBcnJheS5jbG9uZShpKTtjYXNlImhhc2giOnJldHVybiBuZXcgZyhpKTtkZWZhdWx0OnJldHVybiBpO319O30pKCk7QXJyYXkuaW1wbGVtZW50KHtldmVyeTpmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg+Pj4wOwpiPGE7YisrKXtpZigoYiBpbiB0aGlzKSYmIWMuY2FsbChkLHRoaXNbYl0sYix0aGlzKSl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fSxmaWx0ZXI6ZnVuY3Rpb24oZCxmKXt2YXIgYz1bXTtmb3IodmFyIGUsYj0wLGE9dGhpcy5sZW5ndGg+Pj4wO2I8YTtiKyspe2lmKGIgaW4gdGhpcyl7ZT10aGlzW2JdOwppZihkLmNhbGwoZixlLGIsdGhpcykpe2MucHVzaChlKTt9fX1yZXR1cm4gYzt9LGluZGV4T2Y6ZnVuY3Rpb24oYyxkKXt2YXIgYj10aGlzLmxlbmd0aD4+PjA7Zm9yKHZhciBhPShkPDApP01hdGgubWF4KDAsYitkKTpkfHwwO2E8YjthKyspe2lmKHRoaXNbYV09PT1jKXtyZXR1cm4gYTsKfX1yZXR1cm4gLTE7fSxtYXA6ZnVuY3Rpb24oYyxlKXt2YXIgZD10aGlzLmxlbmd0aD4+PjAsYj1BcnJheShkKTtmb3IodmFyIGE9MDthPGQ7YSsrKXtpZihhIGluIHRoaXMpe2JbYV09Yy5jYWxsKGUsdGhpc1thXSxhLHRoaXMpO319cmV0dXJuIGI7fSxzb21lOmZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aD4+PjA7CmI8YTtiKyspe2lmKChiIGluIHRoaXMpJiZjLmNhbGwoZCx0aGlzW2JdLGIsdGhpcykpe3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO30sY2xlYW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEhPW51bGw7fSk7fSxpbnZva2U6ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkuc2xpY2UoYXJndW1lbnRzLDEpOwpyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oYyl7cmV0dXJuIGNbYV0uYXBwbHkoYyxiKTt9KTt9LGFzc29jaWF0ZTpmdW5jdGlvbihjKXt2YXIgZD17fSxiPU1hdGgubWluKHRoaXMubGVuZ3RoLGMubGVuZ3RoKTtmb3IodmFyIGE9MDthPGI7YSsrKXtkW2NbYV1dPXRoaXNbYV07Cn1yZXR1cm4gZDt9LGxpbms6ZnVuY3Rpb24oYyl7dmFyIGE9e307Zm9yKHZhciBlPTAsYj10aGlzLmxlbmd0aDtlPGI7ZSsrKXtmb3IodmFyIGQgaW4gYyl7aWYoY1tkXSh0aGlzW2VdKSl7YVtkXT10aGlzW2VdO2RlbGV0ZSBjW2RdO2JyZWFrO319fXJldHVybiBhO30sY29udGFpbnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbmRleE9mKGEsYikhPS0xOwp9LGFwcGVuZDpmdW5jdGlvbihhKXt0aGlzLnB1c2guYXBwbHkodGhpcyxhKTtyZXR1cm4gdGhpczt9LGdldExhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5sZW5ndGgpP3RoaXNbdGhpcy5sZW5ndGgtMV06bnVsbDt9LGdldFJhbmRvbTpmdW5jdGlvbigpe3JldHVybih0aGlzLmxlbmd0aCk/dGhpc1tOdW1iZXIucmFuZG9tKDAsdGhpcy5sZW5ndGgtMSldOm51bGw7Cn0saW5jbHVkZTpmdW5jdGlvbihhKXtpZighdGhpcy5jb250YWlucyhhKSl7dGhpcy5wdXNoKGEpO31yZXR1cm4gdGhpczt9LGNvbWJpbmU6ZnVuY3Rpb24oYyl7Zm9yKHZhciBiPTAsYT1jLmxlbmd0aDtiPGE7YisrKXt0aGlzLmluY2x1ZGUoY1tiXSk7fXJldHVybiB0aGlzOwp9LGVyYXNlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYT10aGlzLmxlbmd0aDthLS07KXtpZih0aGlzW2FdPT09Yil7dGhpcy5zcGxpY2UoYSwxKTt9fXJldHVybiB0aGlzO30sZW1wdHk6ZnVuY3Rpb24oKXt0aGlzLmxlbmd0aD0wO3JldHVybiB0aGlzO30sZmxhdHRlbjpmdW5jdGlvbigpe3ZhciBkPVtdOwpmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoO2I8YTtiKyspe3ZhciBjPXR5cGVPZih0aGlzW2JdKTtpZihjPT0ibnVsbCIpe2NvbnRpbnVlO31kPWQuY29uY2F0KChjPT0iYXJyYXkifHxjPT0iY29sbGVjdGlvbiJ8fGM9PSJhcmd1bWVudHMifHxpbnN0YW5jZU9mKHRoaXNbYl0sQXJyYXkpKT9BcnJheS5mbGF0dGVuKHRoaXNbYl0pOnRoaXNbYl0pOwp9cmV0dXJuIGQ7fSxwaWNrOmZ1bmN0aW9uKCl7Zm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDtiPGE7YisrKXtpZih0aGlzW2JdIT1udWxsKXtyZXR1cm4gdGhpc1tiXTt9fXJldHVybiBudWxsO30saGV4VG9SZ2I6ZnVuY3Rpb24oYil7aWYodGhpcy5sZW5ndGghPTMpe3JldHVybiBudWxsOwp9dmFyIGE9dGhpcy5tYXAoZnVuY3Rpb24oYyl7aWYoYy5sZW5ndGg9PTEpe2MrPWM7fXJldHVybiBjLnRvSW50KDE2KTt9KTtyZXR1cm4oYik/YToicmdiKCIrYSsiKSI7fSxyZ2JUb0hleDpmdW5jdGlvbihkKXtpZih0aGlzLmxlbmd0aDwzKXtyZXR1cm4gbnVsbDt9aWYodGhpcy5sZW5ndGg9PTQmJnRoaXNbM109PTAmJiFkKXtyZXR1cm4idHJhbnNwYXJlbnQiOwp9dmFyIGI9W107Zm9yKHZhciBhPTA7YTwzO2ErKyl7dmFyIGM9KHRoaXNbYV0tMCkudG9TdHJpbmcoMTYpO2IucHVzaCgoYy5sZW5ndGg9PTEpPyIwIitjOmMpO31yZXR1cm4oZCk/YjoiIyIrYi5qb2luKCIiKTt9fSk7QXJyYXkuYWxpYXMoImV4dGVuZCIsImFwcGVuZCIpOwp2YXIgJHBpY2s9ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkuZnJvbShhcmd1bWVudHMpLnBpY2soKTt9O1N0cmluZy5pbXBsZW1lbnQoe3Rlc3Q6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oKHR5cGVPZihhKT09InJlZ2V4cCIpP2E6bmV3IFJlZ0V4cCgiIithLGIpKS50ZXN0KHRoaXMpOwp9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsYil7cmV0dXJuKGIpPyhiK3RoaXMrYikuaW5kZXhPZihiK2ErYik+LTE6U3RyaW5nKHRoaXMpLmluZGV4T2YoYSk+LTE7fSx0cmltOmZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZyh0aGlzKS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIik7Cn0sY2xlYW46ZnVuY3Rpb24oKXtyZXR1cm4gU3RyaW5nKHRoaXMpLnJlcGxhY2UoL1xzKy9nLCIgIikudHJpbSgpO30sY2FtZWxDYXNlOmZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZyh0aGlzKS5yZXBsYWNlKC8tXEQvZyxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGFyQXQoMSkudG9VcHBlckNhc2UoKTsKfSk7fSxoeXBoZW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gU3RyaW5nKHRoaXMpLnJlcGxhY2UoL1tBLVpdL2csZnVuY3Rpb24oYSl7cmV0dXJuKCItIithLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpKTt9KTt9LGNhcGl0YWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gU3RyaW5nKHRoaXMpLnJlcGxhY2UoL1xiW2Etel0vZyxmdW5jdGlvbihhKXtyZXR1cm4gYS50b1VwcGVyQ2FzZSgpOwp9KTt9LGVzY2FwZVJlZ0V4cDpmdW5jdGlvbigpe3JldHVybiBTdHJpbmcodGhpcykucmVwbGFjZSgvKFstLiorP14ke30oKXxbXF1cL1xcXSkvZywiXFwkMSIpO30sdG9JbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlSW50KHRoaXMsYXx8MTApO30sdG9GbG9hdDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUZsb2F0KHRoaXMpOwp9LGhleFRvUmdiOmZ1bmN0aW9uKGIpe3ZhciBhPVN0cmluZyh0aGlzKS5tYXRjaCgvXiM/KFx3ezEsMn0pKFx3ezEsMn0pKFx3ezEsMn0pJC8pO3JldHVybihhKT9hLnNsaWNlKDEpLmhleFRvUmdiKGIpOm51bGw7fSxyZ2JUb0hleDpmdW5jdGlvbihiKXt2YXIgYT1TdHJpbmcodGhpcykubWF0Y2goL1xkezEsM30vZyk7CnJldHVybihhKT9hLnJnYlRvSGV4KGIpOm51bGw7fSxzdWJzdGl0dXRlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFN0cmluZyh0aGlzKS5yZXBsYWNlKGJ8fCgvXFw/XHsoW157fV0rKVx9L2cpLGZ1bmN0aW9uKGQsYyl7aWYoZC5jaGFyQXQoMCk9PSJcXCIpe3JldHVybiBkLnNsaWNlKDEpOwp9cmV0dXJuKGFbY10hPW51bGwpP2FbY106IiI7fSk7fX0pO051bWJlci5pbXBsZW1lbnQoe2xpbWl0OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIE1hdGgubWluKGEsTWF0aC5tYXgoYix0aGlzKSk7fSxyb3VuZDpmdW5jdGlvbihhKXthPU1hdGgucG93KDEwLGF8fDApLnRvRml4ZWQoYTwwPy1hOjApOwpyZXR1cm4gTWF0aC5yb3VuZCh0aGlzKmEpL2E7fSx0aW1lczpmdW5jdGlvbihiLGMpe2Zvcih2YXIgYT0wO2E8dGhpczthKyspe2IuY2FsbChjLGEsdGhpcyk7fX0sdG9GbG9hdDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUZsb2F0KHRoaXMpO30sdG9JbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlSW50KHRoaXMsYXx8MTApOwp9fSk7TnVtYmVyLmFsaWFzKCJlYWNoIiwidGltZXMiKTsoZnVuY3Rpb24oYil7dmFyIGE9e307Yi5lYWNoKGZ1bmN0aW9uKGMpe2lmKCFOdW1iZXJbY10pe2FbY109ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aFtjXS5hcHBseShudWxsLFt0aGlzXS5jb25jYXQoQXJyYXkuZnJvbShhcmd1bWVudHMpKSk7Cn07fX0pO051bWJlci5pbXBsZW1lbnQoYSk7fSkoWyJhYnMiLCJhY29zIiwiYXNpbiIsImF0YW4iLCJhdGFuMiIsImNlaWwiLCJjb3MiLCJleHAiLCJmbG9vciIsImxvZyIsIm1heCIsIm1pbiIsInBvdyIsInNpbiIsInNxcnQiLCJ0YW4iXSk7RnVuY3Rpb24uZXh0ZW5kKHthdHRlbXB0OmZ1bmN0aW9uKCl7Zm9yKHZhciBiPTAsYT1hcmd1bWVudHMubGVuZ3RoOwpiPGE7YisrKXt0cnl7cmV0dXJuIGFyZ3VtZW50c1tiXSgpO31jYXRjaChjKXt9fXJldHVybiBudWxsO319KTtGdW5jdGlvbi5pbXBsZW1lbnQoe2F0dGVtcHQ6ZnVuY3Rpb24oYSxjKXt0cnl7cmV0dXJuIHRoaXMuYXBwbHkoYyxBcnJheS5mcm9tKGEpKTt9Y2F0Y2goYil7fXJldHVybiBudWxsOwp9LGJpbmQ6ZnVuY3Rpb24oZSl7dmFyIGE9dGhpcyxiPWFyZ3VtZW50cy5sZW5ndGg+MT9BcnJheS5zbGljZShhcmd1bWVudHMsMSk6bnVsbCxkPWZ1bmN0aW9uKCl7fTt2YXIgYz1mdW5jdGlvbigpe3ZhciBnPWUsaD1hcmd1bWVudHMubGVuZ3RoO2lmKHRoaXMgaW5zdGFuY2VvZiBjKXtkLnByb3RvdHlwZT1hLnByb3RvdHlwZTsKZz1uZXcgZDt9dmFyIGY9KCFiJiYhaCk/YS5jYWxsKGcpOmEuYXBwbHkoZyxiJiZoP2IuY29uY2F0KEFycmF5LnNsaWNlKGFyZ3VtZW50cykpOmJ8fGFyZ3VtZW50cyk7cmV0dXJuIGc9PWU/ZjpnO307cmV0dXJuIGM7fSxwYXNzOmZ1bmN0aW9uKGIsYyl7dmFyIGE9dGhpczsKaWYoYiE9bnVsbCl7Yj1BcnJheS5mcm9tKGIpO31yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShjLGJ8fGFyZ3VtZW50cyk7fTt9LGRlbGF5OmZ1bmN0aW9uKGIsYyxhKXtyZXR1cm4gc2V0VGltZW91dCh0aGlzLnBhc3MoKGE9PW51bGw/W106YSksYyksYik7Cn0scGVyaW9kaWNhbDpmdW5jdGlvbihjLGIsYSl7cmV0dXJuIHNldEludGVydmFsKHRoaXMucGFzcygoYT09bnVsbD9bXTphKSxiKSxjKTt9fSk7ZGVsZXRlIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kO0Z1bmN0aW9uLmltcGxlbWVudCh7Y3JlYXRlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7CmI9Ynx8e307cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBjPWIuYXJndW1lbnRzO2M9KGMhPW51bGwpP0FycmF5LmZyb20oYyk6QXJyYXkuc2xpY2UoYXJndW1lbnRzLChiLmV2ZW50KT8xOjApO2lmKGIuZXZlbnQpe2M9W2R8fHdpbmRvdy5ldmVudF0uZXh0ZW5kKGMpO312YXIgZT1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIuYmluZHx8bnVsbCxjKTsKfTtpZihiLmRlbGF5KXtyZXR1cm4gc2V0VGltZW91dChlLGIuZGVsYXkpO31pZihiLnBlcmlvZGljYWwpe3JldHVybiBzZXRJbnRlcnZhbChlLGIucGVyaW9kaWNhbCk7fWlmKGIuYXR0ZW1wdCl7cmV0dXJuIEZ1bmN0aW9uLmF0dGVtcHQoZSk7fXJldHVybiBlKCk7fTsKfSxiaW5kOmZ1bmN0aW9uKGMsYil7dmFyIGE9dGhpcztpZihiIT1udWxsKXtiPUFycmF5LmZyb20oYik7fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGMsYnx8YXJndW1lbnRzKTt9O30sYmluZFdpdGhFdmVudDpmdW5jdGlvbihjLGIpe3ZhciBhPXRoaXM7CmlmKGIhPW51bGwpe2I9QXJyYXkuZnJvbShiKTt9cmV0dXJuIGZ1bmN0aW9uKGQpe3JldHVybiBhLmFwcGx5KGMsKGI9PW51bGwpP2FyZ3VtZW50czpbZF0uY29uY2F0KGIpKTt9O30scnVuOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuYXBwbHkoYixBcnJheS5mcm9tKGEpKTsKfX0pO2lmKE9iamVjdC5jcmVhdGU9PUZ1bmN0aW9uLnByb3RvdHlwZS5jcmVhdGUpe09iamVjdC5jcmVhdGU9bnVsbDt9dmFyICR0cnk9RnVuY3Rpb24uYXR0ZW1wdDsoZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O09iamVjdC5leHRlbmQoe3N1YnNldDpmdW5jdGlvbihkLGcpe3ZhciBmPXt9Owpmb3IodmFyIGU9MCxiPWcubGVuZ3RoO2U8YjtlKyspe3ZhciBjPWdbZV07aWYoYyBpbiBkKXtmW2NdPWRbY107fX1yZXR1cm4gZjt9LG1hcDpmdW5jdGlvbihiLGUsZil7dmFyIGQ9e307Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpKXtkW2NdPWUuY2FsbChmLGJbY10sYyxiKTsKfX1yZXR1cm4gZDt9LGZpbHRlcjpmdW5jdGlvbihiLGUsZyl7dmFyIGQ9e307Zm9yKHZhciBjIGluIGIpe3ZhciBmPWJbY107aWYoYS5jYWxsKGIsYykmJmUuY2FsbChnLGYsYyxiKSl7ZFtjXT1mO319cmV0dXJuIGQ7fSxldmVyeTpmdW5jdGlvbihiLGQsZSl7Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpJiYhZC5jYWxsKGUsYltjXSxjKSl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sc29tZTpmdW5jdGlvbihiLGQsZSl7Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpJiZkLmNhbGwoZSxiW2NdLGMpKXtyZXR1cm4gdHJ1ZTt9fXJldHVybiBmYWxzZTt9LGtleXM6ZnVuY3Rpb24oYil7dmFyIGQ9W107Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpKXtkLnB1c2goYyk7Cn19cmV0dXJuIGQ7fSx2YWx1ZXM6ZnVuY3Rpb24oYyl7dmFyIGI9W107Zm9yKHZhciBkIGluIGMpe2lmKGEuY2FsbChjLGQpKXtiLnB1c2goY1tkXSk7fX1yZXR1cm4gYjt9LGdldExlbmd0aDpmdW5jdGlvbihiKXtyZXR1cm4gT2JqZWN0LmtleXMoYikubGVuZ3RoO30sa2V5T2Y6ZnVuY3Rpb24oYixkKXtmb3IodmFyIGMgaW4gYil7aWYoYS5jYWxsKGIsYykmJmJbY109PT1kKXtyZXR1cm4gYzsKfX1yZXR1cm4gbnVsbDt9LGNvbnRhaW5zOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIE9iamVjdC5rZXlPZihiLGMpIT1udWxsO30sdG9RdWVyeVN0cmluZzpmdW5jdGlvbihiLGMpe3ZhciBkPVtdO09iamVjdC5lYWNoKGIsZnVuY3Rpb24oaCxnKXtpZihjKXtnPWMrIlsiK2crIl0iOwp9dmFyIGY7c3dpdGNoKHR5cGVPZihoKSl7Y2FzZSJvYmplY3QiOmY9T2JqZWN0LnRvUXVlcnlTdHJpbmcoaCxnKTticmVhaztjYXNlImFycmF5Ijp2YXIgZT17fTtoLmVhY2goZnVuY3Rpb24oayxqKXtlW2pdPWs7fSk7Zj1PYmplY3QudG9RdWVyeVN0cmluZyhlLGcpOwpicmVhaztkZWZhdWx0OmY9ZysiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGgpO31pZihoIT1udWxsKXtkLnB1c2goZik7fX0pO3JldHVybiBkLmpvaW4oIiYiKTt9fSk7fSkoKTtIYXNoLmltcGxlbWVudCh7aGFzOk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksa2V5T2Y6ZnVuY3Rpb24oYSl7cmV0dXJuIE9iamVjdC5rZXlPZih0aGlzLGEpOwp9LGhhc1ZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBPYmplY3QuY29udGFpbnModGhpcyxhKTt9LGV4dGVuZDpmdW5jdGlvbihhKXtIYXNoLmVhY2goYXx8e30sZnVuY3Rpb24oYyxiKXtIYXNoLnNldCh0aGlzLGIsYyk7fSx0aGlzKTtyZXR1cm4gdGhpczt9LGNvbWJpbmU6ZnVuY3Rpb24oYSl7SGFzaC5lYWNoKGF8fHt9LGZ1bmN0aW9uKGMsYil7SGFzaC5pbmNsdWRlKHRoaXMsYixjKTsKfSx0aGlzKTtyZXR1cm4gdGhpczt9LGVyYXNlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaGFzT3duUHJvcGVydHkoYSkpe2RlbGV0ZSB0aGlzW2FdO31yZXR1cm4gdGhpczt9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4odGhpcy5oYXNPd25Qcm9wZXJ0eShhKSk/dGhpc1thXTpudWxsOwp9LHNldDpmdW5jdGlvbihhLGIpe2lmKCF0aGlzW2FdfHx0aGlzLmhhc093blByb3BlcnR5KGEpKXt0aGlzW2FdPWI7fXJldHVybiB0aGlzO30sZW1wdHk6ZnVuY3Rpb24oKXtIYXNoLmVhY2godGhpcyxmdW5jdGlvbihiLGEpe2RlbGV0ZSB0aGlzW2FdO30sdGhpcyk7CnJldHVybiB0aGlzO30saW5jbHVkZTpmdW5jdGlvbihhLGIpe2lmKHRoaXNbYV09PW51bGwpe3RoaXNbYV09Yjt9cmV0dXJuIHRoaXM7fSxtYXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEhhc2goT2JqZWN0Lm1hcCh0aGlzLGEsYikpO30sZmlsdGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBIYXNoKE9iamVjdC5maWx0ZXIodGhpcyxhLGIpKTsKfSxldmVyeTpmdW5jdGlvbihhLGIpe3JldHVybiBPYmplY3QuZXZlcnkodGhpcyxhLGIpO30sc29tZTpmdW5jdGlvbihhLGIpe3JldHVybiBPYmplY3Quc29tZSh0aGlzLGEsYik7fSxnZXRLZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMpO30sZ2V0VmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC52YWx1ZXModGhpcyk7Cn0sdG9RdWVyeVN0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gT2JqZWN0LnRvUXVlcnlTdHJpbmcodGhpcyxhKTt9fSk7SGFzaC5leHRlbmQ9T2JqZWN0LmFwcGVuZDtIYXNoLmFsaWFzKHtpbmRleE9mOiJrZXlPZiIsY29udGFpbnM6Imhhc1ZhbHVlIn0pOyhmdW5jdGlvbigpe3ZhciBrPXRoaXMuZG9jdW1lbnQ7CnZhciBoPWsud2luZG93PXRoaXM7dmFyIGE9bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLGI9bmF2aWdhdG9yLnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksaT1hLm1hdGNoKC8ob3BlcmF8aWV8ZmlyZWZveHxjaHJvbWV8dmVyc2lvbilbXHNcLzpdKFtcd1xkXC5dKyk/Lio/KHNhZmFyaXx2ZXJzaW9uW1xzXC86XShbXHdcZFwuXSspfCQpLyl8fFtudWxsLCJ1bmtub3duIiwwXSxmPWlbMV09PSJpZSImJmsuZG9jdW1lbnRNb2RlOwp2YXIgbz10aGlzLkJyb3dzZXI9e2V4dGVuZDpGdW5jdGlvbi5wcm90b3R5cGUuZXh0ZW5kLG5hbWU6KGlbMV09PSJ2ZXJzaW9uIik/aVszXTppWzFdLHZlcnNpb246Znx8cGFyc2VGbG9hdCgoaVsxXT09Im9wZXJhIiYmaVs0XSk/aVs0XTppWzJdKSxQbGF0Zm9ybTp7bmFtZTphLm1hdGNoKC9pcCg/OmFkfG9kfGhvbmUpLyk/ImlvcyI6KGEubWF0Y2goLyg/OndlYm9zfGFuZHJvaWQpLyl8fGIubWF0Y2goL21hY3x3aW58bGludXgvKXx8WyJvdGhlciJdKVswXX0sRmVhdHVyZXM6e3hwYXRoOiEhKGsuZXZhbHVhdGUpLGFpcjohIShoLnJ1bnRpbWUpLHF1ZXJ5OiEhKGsucXVlcnlTZWxlY3RvciksanNvbjohIShoLkpTT04pfSxQbHVnaW5zOnt9fTsKb1tvLm5hbWVdPXRydWU7b1tvLm5hbWUrcGFyc2VJbnQoby52ZXJzaW9uLDEwKV09dHJ1ZTtvLlBsYXRmb3JtW28uUGxhdGZvcm0ubmFtZV09dHJ1ZTtvLlJlcXVlc3Q9KGZ1bmN0aW9uKCl7dmFyIHE9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7Cn07dmFyIHA9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1TWE1MMi5YTUxIVFRQIik7fTt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKTt9O3JldHVybiBGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7cSgpOwpyZXR1cm4gcTt9LGZ1bmN0aW9uKCl7cCgpO3JldHVybiBwO30sZnVuY3Rpb24oKXtlKCk7cmV0dXJuIGU7fSk7fSkoKTtvLkZlYXR1cmVzLnhocj0hIShvLlJlcXVlc3QpO3ZhciBqPShGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7cmV0dXJuIG5hdmlnYXRvci5wbHVnaW5zWyJTaG9ja3dhdmUgRmxhc2giXS5kZXNjcmlwdGlvbjsKfSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2giKS5HZXRWYXJpYWJsZSgiJHZlcnNpb24iKTt9KXx8IjAgcjAiKS5tYXRjaCgvXGQrL2cpO28uUGx1Z2lucy5GbGFzaD17dmVyc2lvbjpOdW1iZXIoalswXXx8IjAuIitqWzFdKXx8MCxidWlsZDpOdW1iZXIoalsyXSl8fDB9OwpvLmV4ZWM9ZnVuY3Rpb24ocCl7aWYoIXApe3JldHVybiBwO31pZihoLmV4ZWNTY3JpcHQpe2guZXhlY1NjcmlwdChwKTt9ZWxzZXt2YXIgZT1rLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2Uuc2V0QXR0cmlidXRlKCJ0eXBlIiwidGV4dC9qYXZhc2NyaXB0Iik7ZS50ZXh0PXA7CmsuaGVhZC5hcHBlbmRDaGlsZChlKTtrLmhlYWQucmVtb3ZlQ2hpbGQoZSk7fXJldHVybiBwO307U3RyaW5nLmltcGxlbWVudCgic3RyaXBTY3JpcHRzIixmdW5jdGlvbihwKXt2YXIgZT0iIjt2YXIgcT10aGlzLnJlcGxhY2UoLzxzY3JpcHRbXj5dKj4oW1xzXFNdKj8pPFwvc2NyaXB0Pi9naSxmdW5jdGlvbihyLHMpe2UrPXMrIlxuIjsKcmV0dXJuIiI7fSk7aWYocD09PXRydWUpe28uZXhlYyhlKTt9ZWxzZXtpZih0eXBlT2YocCk9PSJmdW5jdGlvbiIpe3AoZSxxKTt9fXJldHVybiBxO30pO28uZXh0ZW5kKHtEb2N1bWVudDp0aGlzLkRvY3VtZW50LFdpbmRvdzp0aGlzLldpbmRvdyxFbGVtZW50OnRoaXMuRWxlbWVudCxFdmVudDp0aGlzLkV2ZW50fSk7CnRoaXMuV2luZG93PXRoaXMuJGNvbnN0cnVjdG9yPW5ldyBUeXBlKCJXaW5kb3ciLGZ1bmN0aW9uKCl7fSk7dGhpcy4kZmFtaWx5PUZ1bmN0aW9uLmZyb20oIndpbmRvdyIpLmhpZGUoKTtXaW5kb3cubWlycm9yKGZ1bmN0aW9uKGUscCl7aFtlXT1wO30pO3RoaXMuRG9jdW1lbnQ9ay4kY29uc3RydWN0b3I9bmV3IFR5cGUoIkRvY3VtZW50IixmdW5jdGlvbigpe30pOwprLiRmYW1pbHk9RnVuY3Rpb24uZnJvbSgiZG9jdW1lbnQiKS5oaWRlKCk7RG9jdW1lbnQubWlycm9yKGZ1bmN0aW9uKGUscCl7a1tlXT1wO30pO2suaHRtbD1rLmRvY3VtZW50RWxlbWVudDtpZighay5oZWFkKXtrLmhlYWQ9ay5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdOwp9aWYoay5leGVjQ29tbWFuZCl7dHJ5e2suZXhlY0NvbW1hbmQoIkJhY2tncm91bmRJbWFnZUNhY2hlIixmYWxzZSx0cnVlKTt9Y2F0Y2goZyl7fX1pZih0aGlzLmF0dGFjaEV2ZW50JiYhdGhpcy5hZGRFdmVudExpc3RlbmVyKXt2YXIgYz1mdW5jdGlvbigpe3RoaXMuZGV0YWNoRXZlbnQoIm9udW5sb2FkIixjKTsKay5oZWFkPWsuaHRtbD1rLndpbmRvdz1udWxsO307dGhpcy5hdHRhY2hFdmVudCgib251bmxvYWQiLGMpO312YXIgbT1BcnJheS5mcm9tO3RyeXttKGsuaHRtbC5jaGlsZE5vZGVzKTt9Y2F0Y2goZyl7QXJyYXkuZnJvbT1mdW5jdGlvbihwKXtpZih0eXBlb2YgcCE9InN0cmluZyImJlR5cGUuaXNFbnVtZXJhYmxlKHApJiZ0eXBlT2YocCkhPSJhcnJheSIpe3ZhciBlPXAubGVuZ3RoLHE9bmV3IEFycmF5KGUpOwp3aGlsZShlLS0pe3FbZV09cFtlXTt9cmV0dXJuIHE7fXJldHVybiBtKHApO307dmFyIGw9QXJyYXkucHJvdG90eXBlLG49bC5zbGljZTtbInBvcCIsInB1c2giLCJyZXZlcnNlIiwic2hpZnQiLCJzb3J0Iiwic3BsaWNlIiwidW5zaGlmdCIsImNvbmNhdCIsImpvaW4iLCJzbGljZSJdLmVhY2goZnVuY3Rpb24oZSl7dmFyIHA9bFtlXTsKQXJyYXlbZV09ZnVuY3Rpb24ocSl7cmV0dXJuIHAuYXBwbHkoQXJyYXkuZnJvbShxKSxuLmNhbGwoYXJndW1lbnRzLDEpKTt9O30pO31pZihvLlBsYXRmb3JtLmlvcyl7by5QbGF0Zm9ybS5pcG9kPXRydWU7fW8uRW5naW5lPXt9O3ZhciBkPWZ1bmN0aW9uKHAsZSl7by5FbmdpbmUubmFtZT1wOwpvLkVuZ2luZVtwK2VdPXRydWU7by5FbmdpbmUudmVyc2lvbj1lO307aWYoby5pZSl7by5FbmdpbmUudHJpZGVudD10cnVlO3N3aXRjaChvLnZlcnNpb24pe2Nhc2UgNjpkKCJ0cmlkZW50Iiw0KTticmVhaztjYXNlIDc6ZCgidHJpZGVudCIsNSk7YnJlYWs7Y2FzZSA4OmQoInRyaWRlbnQiLDYpOwp9fWlmKG8uZmlyZWZveCl7by5FbmdpbmUuZ2Vja289dHJ1ZTtpZihvLnZlcnNpb24+PTMpe2QoImdlY2tvIiwxOSk7fWVsc2V7ZCgiZ2Vja28iLDE4KTt9fWlmKG8uc2FmYXJpfHxvLmNocm9tZSl7by5FbmdpbmUud2Via2l0PXRydWU7c3dpdGNoKG8udmVyc2lvbil7Y2FzZSAyOmQoIndlYmtpdCIsNDE5KTsKYnJlYWs7Y2FzZSAzOmQoIndlYmtpdCIsNDIwKTticmVhaztjYXNlIDQ6ZCgid2Via2l0Iiw1MjUpO319aWYoby5vcGVyYSl7by5FbmdpbmUucHJlc3RvPXRydWU7aWYoby52ZXJzaW9uPj05LjYpe2QoInByZXN0byIsOTYwKTt9ZWxzZXtpZihvLnZlcnNpb24+PTkuNSl7ZCgicHJlc3RvIiw5NTApOwp9ZWxzZXtkKCJwcmVzdG8iLDkyNSk7fX19aWYoby5uYW1lPT0idW5rbm93biIpe3N3aXRjaCgoYS5tYXRjaCgvKD86d2Via2l0fGtodG1sfGdlY2tvKS8pfHxbXSlbMF0pe2Nhc2Uid2Via2l0IjpjYXNlImtodG1sIjpvLkVuZ2luZS53ZWJraXQ9dHJ1ZTticmVhaztjYXNlImdlY2tvIjpvLkVuZ2luZS5nZWNrbz10cnVlOwp9fXRoaXMuJGV4ZWM9by5leGVjO30pKCk7KGZ1bmN0aW9uKCl7dmFyIGI9e307dmFyIGE9dGhpcy5ET01FdmVudD1uZXcgVHlwZSgiRE9NRXZlbnQiLGZ1bmN0aW9uKGMsZyl7aWYoIWcpe2c9d2luZG93O31jPWN8fGcuZXZlbnQ7aWYoYy4kZXh0ZW5kZWQpe3JldHVybiBjOwp9dGhpcy5ldmVudD1jO3RoaXMuJGV4dGVuZGVkPXRydWU7dGhpcy5zaGlmdD1jLnNoaWZ0S2V5O3RoaXMuY29udHJvbD1jLmN0cmxLZXk7dGhpcy5hbHQ9Yy5hbHRLZXk7dGhpcy5tZXRhPWMubWV0YUtleTt2YXIgaT10aGlzLnR5cGU9Yy50eXBlO3ZhciBoPWMudGFyZ2V0fHxjLnNyY0VsZW1lbnQ7CndoaWxlKGgmJmgubm9kZVR5cGU9PTMpe2g9aC5wYXJlbnROb2RlO310aGlzLnRhcmdldD1kb2N1bWVudC5pZChoKTtpZihpLmluZGV4T2YoImtleSIpPT0wKXt2YXIgZD10aGlzLmNvZGU9KGMud2hpY2h8fGMua2V5Q29kZSk7dGhpcy5rZXk9YltkXXx8T2JqZWN0LmtleU9mKEV2ZW50LktleXMsZCk7CmlmKGk9PSJrZXlkb3duIil7aWYoZD4xMTEmJmQ8MTI0KXt0aGlzLmtleT0iZiIrKGQtMTExKTt9ZWxzZXtpZihkPjk1JiZkPDEwNil7dGhpcy5rZXk9ZC05Njt9fX1pZih0aGlzLmtleT09bnVsbCl7dGhpcy5rZXk9U3RyaW5nLmZyb21DaGFyQ29kZShkKS50b0xvd2VyQ2FzZSgpOwp9fWVsc2V7aWYoaT09ImNsaWNrInx8aT09ImRibGNsaWNrInx8aT09ImNvbnRleHRtZW51Inx8aT09IkRPTU1vdXNlU2Nyb2xsInx8aS5pbmRleE9mKCJtb3VzZSIpPT0wKXt2YXIgaj1nLmRvY3VtZW50O2o9KCFqLmNvbXBhdE1vZGV8fGouY29tcGF0TW9kZT09IkNTUzFDb21wYXQiKT9qLmh0bWw6ai5ib2R5Owp0aGlzLnBhZ2U9e3g6KGMucGFnZVghPW51bGwpP2MucGFnZVg6Yy5jbGllbnRYK2ouc2Nyb2xsTGVmdCx5OihjLnBhZ2VZIT1udWxsKT9jLnBhZ2VZOmMuY2xpZW50WStqLnNjcm9sbFRvcH07dGhpcy5jbGllbnQ9e3g6KGMucGFnZVghPW51bGwpP2MucGFnZVgtZy5wYWdlWE9mZnNldDpjLmNsaWVudFgseTooYy5wYWdlWSE9bnVsbCk/Yy5wYWdlWS1nLnBhZ2VZT2Zmc2V0OmMuY2xpZW50WX07CmlmKGk9PSJET01Nb3VzZVNjcm9sbCJ8fGk9PSJtb3VzZXdoZWVsIil7dGhpcy53aGVlbD0oYy53aGVlbERlbHRhKT9jLndoZWVsRGVsdGEvMTIwOi0oYy5kZXRhaWx8fDApLzM7fXRoaXMucmlnaHRDbGljaz0oYy53aGljaD09M3x8Yy5idXR0b249PTIpO2lmKGk9PSJtb3VzZW92ZXIifHxpPT0ibW91c2VvdXQiKXt2YXIgaz1jLnJlbGF0ZWRUYXJnZXR8fGNbKGk9PSJtb3VzZW92ZXIiPyJmcm9tIjoidG8iKSsiRWxlbWVudCJdOwp3aGlsZShrJiZrLm5vZGVUeXBlPT0zKXtrPWsucGFyZW50Tm9kZTt9dGhpcy5yZWxhdGVkVGFyZ2V0PWRvY3VtZW50LmlkKGspO319ZWxzZXtpZihpLmluZGV4T2YoInRvdWNoIik9PTB8fGkuaW5kZXhPZigiZ2VzdHVyZSIpPT0wKXt0aGlzLnJvdGF0aW9uPWMucm90YXRpb247CnRoaXMuc2NhbGU9Yy5zY2FsZTt0aGlzLnRhcmdldFRvdWNoZXM9Yy50YXJnZXRUb3VjaGVzO3RoaXMuY2hhbmdlZFRvdWNoZXM9Yy5jaGFuZ2VkVG91Y2hlczt2YXIgZj10aGlzLnRvdWNoZXM9Yy50b3VjaGVzO2lmKGYmJmZbMF0pe3ZhciBlPWZbMF07dGhpcy5wYWdlPXt4OmUucGFnZVgseTplLnBhZ2VZfTsKdGhpcy5jbGllbnQ9e3g6ZS5jbGllbnRYLHk6ZS5jbGllbnRZfTt9fX19aWYoIXRoaXMuY2xpZW50KXt0aGlzLmNsaWVudD17fTt9aWYoIXRoaXMucGFnZSl7dGhpcy5wYWdlPXt9O319KTthLmltcGxlbWVudCh7c3RvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZlbnREZWZhdWx0KCkuc3RvcFByb3BhZ2F0aW9uKCk7Cn0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5ldmVudC5zdG9wUHJvcGFnYXRpb24pe3RoaXMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7fWVsc2V7dGhpcy5ldmVudC5jYW5jZWxCdWJibGU9dHJ1ZTt9cmV0dXJuIHRoaXM7fSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2lmKHRoaXMuZXZlbnQucHJldmVudERlZmF1bHQpe3RoaXMuZXZlbnQucHJldmVudERlZmF1bHQoKTsKfWVsc2V7dGhpcy5ldmVudC5yZXR1cm5WYWx1ZT1mYWxzZTt9cmV0dXJuIHRoaXM7fX0pO2EuZGVmaW5lS2V5PWZ1bmN0aW9uKGQsYyl7YltkXT1jO3JldHVybiB0aGlzO307YS5kZWZpbmVLZXlzPWEuZGVmaW5lS2V5Lm92ZXJsb2FkU2V0dGVyKHRydWUpO2EuZGVmaW5lS2V5cyh7IjM4IjoidXAiLCI0MCI6ImRvd24iLCIzNyI6ImxlZnQiLCIzOSI6InJpZ2h0IiwiMjciOiJlc2MiLCIzMiI6InNwYWNlIiwiOCI6ImJhY2tzcGFjZSIsIjkiOiJ0YWIiLCI0NiI6ImRlbGV0ZSIsIjEzIjoiZW50ZXIifSk7Cn0pKCk7dmFyIEV2ZW50PURPTUV2ZW50O0V2ZW50LktleXM9e307RXZlbnQuS2V5cz1uZXcgSGFzaChFdmVudC5LZXlzKTsoZnVuY3Rpb24oKXt2YXIgYT10aGlzLkNsYXNzPW5ldyBUeXBlKCJDbGFzcyIsZnVuY3Rpb24oaCl7aWYoaW5zdGFuY2VPZihoLEZ1bmN0aW9uKSl7aD17aW5pdGlhbGl6ZTpofTsKfXZhciBnPWZ1bmN0aW9uKCl7ZSh0aGlzKTtpZihnLiRwcm90b3R5cGluZyl7cmV0dXJuIHRoaXM7fXRoaXMuJGNhbGxlcj1udWxsO3ZhciBpPSh0aGlzLmluaXRpYWxpemUpP3RoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpczt0aGlzLiRjYWxsZXI9dGhpcy5jYWxsZXI9bnVsbDsKcmV0dXJuIGk7fS5leHRlbmQodGhpcykuaW1wbGVtZW50KGgpO2cuJGNvbnN0cnVjdG9yPWE7Zy5wcm90b3R5cGUuJGNvbnN0cnVjdG9yPWc7Zy5wcm90b3R5cGUucGFyZW50PWM7cmV0dXJuIGc7fSk7dmFyIGM9ZnVuY3Rpb24oKXtpZighdGhpcy4kY2FsbGVyKXt0aHJvdyBuZXcgRXJyb3IoJ1RoZSBtZXRob2QgInBhcmVudCIgY2Fubm90IGJlIGNhbGxlZC4nKTsKfXZhciBnPXRoaXMuJGNhbGxlci4kbmFtZSxoPXRoaXMuJGNhbGxlci4kb3duZXIucGFyZW50LGk9KGgpP2gucHJvdG90eXBlW2ddOm51bGw7aWYoIWkpe3Rocm93IG5ldyBFcnJvcignVGhlIG1ldGhvZCAiJytnKyciIGhhcyBubyBwYXJlbnQuJyk7fXJldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsKfTt2YXIgZT1mdW5jdGlvbihnKXtmb3IodmFyIGggaW4gZyl7dmFyIGo9Z1toXTtzd2l0Y2godHlwZU9mKGopKXtjYXNlIm9iamVjdCI6dmFyIGk9ZnVuY3Rpb24oKXt9O2kucHJvdG90eXBlPWo7Z1toXT1lKG5ldyBpKTticmVhaztjYXNlImFycmF5IjpnW2hdPWouY2xvbmUoKTsKYnJlYWs7fX1yZXR1cm4gZzt9O3ZhciBiPWZ1bmN0aW9uKGcsaCxqKXtpZihqLiRvcmlnaW4pe2o9ai4kb3JpZ2luO312YXIgaT1mdW5jdGlvbigpe2lmKGouJHByb3RlY3RlZCYmdGhpcy4kY2FsbGVyPT1udWxsKXt0aHJvdyBuZXcgRXJyb3IoJ1RoZSBtZXRob2QgIicraCsnIiBjYW5ub3QgYmUgY2FsbGVkLicpOwp9dmFyIGw9dGhpcy5jYWxsZXIsbT10aGlzLiRjYWxsZXI7dGhpcy5jYWxsZXI9bTt0aGlzLiRjYWxsZXI9aTt2YXIgaz1qLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLiRjYWxsZXI9bTt0aGlzLmNhbGxlcj1sO3JldHVybiBrO30uZXh0ZW5kKHskb3duZXI6Zywkb3JpZ2luOmosJG5hbWU6aH0pOwpyZXR1cm4gaTt9O3ZhciBmPWZ1bmN0aW9uKGgsaSxnKXtpZihhLk11dGF0b3JzLmhhc093blByb3BlcnR5KGgpKXtpPWEuTXV0YXRvcnNbaF0uY2FsbCh0aGlzLGkpO2lmKGk9PW51bGwpe3JldHVybiB0aGlzO319aWYodHlwZU9mKGkpPT0iZnVuY3Rpb24iKXtpZihpLiRoaWRkZW4pe3JldHVybiB0aGlzOwp9dGhpcy5wcm90b3R5cGVbaF09KGcpP2k6Yih0aGlzLGgsaSk7fWVsc2V7T2JqZWN0Lm1lcmdlKHRoaXMucHJvdG90eXBlLGgsaSk7fXJldHVybiB0aGlzO307dmFyIGQ9ZnVuY3Rpb24oZyl7Zy4kcHJvdG90eXBpbmc9dHJ1ZTt2YXIgaD1uZXcgZztkZWxldGUgZy4kcHJvdG90eXBpbmc7CnJldHVybiBoO307YS5pbXBsZW1lbnQoImltcGxlbWVudCIsZi5vdmVybG9hZFNldHRlcigpKTthLk11dGF0b3JzPXtFeHRlbmRzOmZ1bmN0aW9uKGcpe3RoaXMucGFyZW50PWc7dGhpcy5wcm90b3R5cGU9ZChnKTt9LEltcGxlbWVudHM6ZnVuY3Rpb24oZyl7QXJyYXkuZnJvbShnKS5lYWNoKGZ1bmN0aW9uKGope3ZhciBoPW5ldyBqOwpmb3IodmFyIGkgaW4gaCl7Zi5jYWxsKHRoaXMsaSxoW2ldLHRydWUpO319LHRoaXMpO319O30pKCk7KGZ1bmN0aW9uKCl7dGhpcy5DaGFpbj1uZXcgQ2xhc3MoeyRjaGFpbjpbXSxjaGFpbjpmdW5jdGlvbigpe3RoaXMuJGNoYWluLmFwcGVuZChBcnJheS5mbGF0dGVuKGFyZ3VtZW50cykpOwpyZXR1cm4gdGhpczt9LGNhbGxDaGFpbjpmdW5jdGlvbigpe3JldHVybih0aGlzLiRjaGFpbi5sZW5ndGgpP3RoaXMuJGNoYWluLnNoaWZ0KCkuYXBwbHkodGhpcyxhcmd1bWVudHMpOmZhbHNlO30sY2xlYXJDaGFpbjpmdW5jdGlvbigpe3RoaXMuJGNoYWluLmVtcHR5KCk7CnJldHVybiB0aGlzO319KTt2YXIgYT1mdW5jdGlvbihiKXtyZXR1cm4gYi5yZXBsYWNlKC9eb24oW0EtWl0pLyxmdW5jdGlvbihjLGQpe3JldHVybiBkLnRvTG93ZXJDYXNlKCk7fSk7fTt0aGlzLkV2ZW50cz1uZXcgQ2xhc3MoeyRldmVudHM6e30sYWRkRXZlbnQ6ZnVuY3Rpb24oZCxjLGIpe2Q9YShkKTsKaWYoYz09JGVtcHR5KXtyZXR1cm4gdGhpczt9dGhpcy4kZXZlbnRzW2RdPSh0aGlzLiRldmVudHNbZF18fFtdKS5pbmNsdWRlKGMpO2lmKGIpe2MuaW50ZXJuYWw9dHJ1ZTt9cmV0dXJuIHRoaXM7fSxhZGRFdmVudHM6ZnVuY3Rpb24oYil7Zm9yKHZhciBjIGluIGIpe3RoaXMuYWRkRXZlbnQoYyxiW2NdKTsKfXJldHVybiB0aGlzO30sZmlyZUV2ZW50OmZ1bmN0aW9uKGUsYyxiKXtlPWEoZSk7dmFyIGQ9dGhpcy4kZXZlbnRzW2VdO2lmKCFkKXtyZXR1cm4gdGhpczt9Yz1BcnJheS5mcm9tKGMpO2QuZWFjaChmdW5jdGlvbihmKXtpZihiKXtmLmRlbGF5KGIsdGhpcyxjKTt9ZWxzZXtmLmFwcGx5KHRoaXMsYyk7Cn19LHRoaXMpO3JldHVybiB0aGlzO30scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oZSxkKXtlPWEoZSk7dmFyIGM9dGhpcy4kZXZlbnRzW2VdO2lmKGMmJiFkLmludGVybmFsKXt2YXIgYj1jLmluZGV4T2YoZCk7aWYoYiE9LTEpe2RlbGV0ZSBjW2JdO319cmV0dXJuIHRoaXM7Cn0scmVtb3ZlRXZlbnRzOmZ1bmN0aW9uKGQpe3ZhciBlO2lmKHR5cGVPZihkKT09Im9iamVjdCIpe2ZvcihlIGluIGQpe3RoaXMucmVtb3ZlRXZlbnQoZSxkW2VdKTt9cmV0dXJuIHRoaXM7fWlmKGQpe2Q9YShkKTt9Zm9yKGUgaW4gdGhpcy4kZXZlbnRzKXtpZihkJiZkIT1lKXtjb250aW51ZTsKfXZhciBjPXRoaXMuJGV2ZW50c1tlXTtmb3IodmFyIGI9Yy5sZW5ndGg7Yi0tOyl7aWYoYiBpbiBjKXt0aGlzLnJlbW92ZUV2ZW50KGUsY1tiXSk7fX19cmV0dXJuIHRoaXM7fX0pO3RoaXMuT3B0aW9ucz1uZXcgQ2xhc3Moe3NldE9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLm9wdGlvbnM9T2JqZWN0Lm1lcmdlLmFwcGx5KG51bGwsW3t9LHRoaXMub3B0aW9uc10uYXBwZW5kKGFyZ3VtZW50cykpOwppZih0aGlzLmFkZEV2ZW50KXtmb3IodmFyIGMgaW4gYil7aWYodHlwZU9mKGJbY10pIT0iZnVuY3Rpb24ifHwhKC9eb25bQS1aXS8pLnRlc3QoYykpe2NvbnRpbnVlO310aGlzLmFkZEV2ZW50KGMsYltjXSk7ZGVsZXRlIGJbY107fX1yZXR1cm4gdGhpczt9fSk7fSkoKTsKKGZ1bmN0aW9uKCl7dmFyIGssbixsLGcsYT17fSxjPXt9LG09L1xcL2c7dmFyIGU9ZnVuY3Rpb24ocSxwKXtpZihxPT1udWxsKXtyZXR1cm4gbnVsbDt9aWYocS5TbGljaz09PXRydWUpe3JldHVybiBxO31xPSgiIitxKS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIik7Zz0hIXA7CnZhciBvPShnKT9jOmE7aWYob1txXSl7cmV0dXJuIG9bcV07fWs9e1NsaWNrOnRydWUsZXhwcmVzc2lvbnM6W10scmF3OnEscmV2ZXJzZTpmdW5jdGlvbigpe3JldHVybiBlKHRoaXMucmF3LHRydWUpO319O249LTE7d2hpbGUocSE9KHE9cS5yZXBsYWNlKGosYikpKXt9ay5sZW5ndGg9ay5leHByZXNzaW9ucy5sZW5ndGg7CnJldHVybiBvW2sucmF3XT0oZyk/aChrKTprO307dmFyIGk9ZnVuY3Rpb24obyl7aWYobz09PSIhIil7cmV0dXJuIiAiO31lbHNle2lmKG89PT0iICIpe3JldHVybiIhIjt9ZWxzZXtpZigoL14hLykudGVzdChvKSl7cmV0dXJuIG8ucmVwbGFjZSgvXiEvLCIiKTt9ZWxzZXtyZXR1cm4iISIrbzsKfX19fTt2YXIgaD1mdW5jdGlvbih1KXt2YXIgcj11LmV4cHJlc3Npb25zO2Zvcih2YXIgcD0wO3A8ci5sZW5ndGg7cCsrKXt2YXIgdD1yW3BdO3ZhciBxPXtwYXJ0czpbXSx0YWc6IioiLGNvbWJpbmF0b3I6aSh0WzBdLmNvbWJpbmF0b3IpfTtmb3IodmFyIG89MDtvPHQubGVuZ3RoOwpvKyspe3ZhciBzPXRbb107aWYoIXMucmV2ZXJzZUNvbWJpbmF0b3Ipe3MucmV2ZXJzZUNvbWJpbmF0b3I9IiAiO31zLmNvbWJpbmF0b3I9cy5yZXZlcnNlQ29tYmluYXRvcjtkZWxldGUgcy5yZXZlcnNlQ29tYmluYXRvcjt9dC5yZXZlcnNlKCkucHVzaChxKTt9cmV0dXJuIHU7Cn07dmFyIGY9ZnVuY3Rpb24obyl7cmV0dXJuIG8ucmVwbGFjZSgvWy1bXF17fSgpKis/LlxcXiR8LCNcc10vZyxmdW5jdGlvbihwKXtyZXR1cm4iXFwiK3A7fSk7fTt2YXIgaj1uZXcgUmVnRXhwKCJeKD86XFxzKigsKVxccyp8XFxzKig8Y29tYmluYXRvcj4rKVxccyp8KFxccyspfCg8dW5pY29kZT4rfFxcKil8XFwjKDx1bmljb2RlPispfFxcLig8dW5pY29kZT4rKXxcXFtcXHMqKDx1bmljb2RlMT4rKSg/OlxccyooWypeJCF+fF0/PSkoPzpcXHMqKD86KFtcIiddPykoLio/KVxcOSkpKT9cXHMqXFxdKD8hXFxdKXwoOispKDx1bmljb2RlPispKD86XFwoKD86KD86KFtcIiddKShbXlxcMTNdKilcXDEzKXwoKD86XFwoW14pXStcXCl8W14oKV0qKSspKVxcKSk/KSIucmVwbGFjZSgvPGNvbWJpbmF0b3I+LywiWyIrZigiPit+YCFAJCVeJj17fVxcOzwvIikrIl0iKS5yZXBsYWNlKC88dW5pY29kZT4vZywiKD86W1xcd1xcdTAwYTEtXFx1RkZGRi1dfFxcXFxbXlxcczAtOWEtZl0pIikucmVwbGFjZSgvPHVuaWNvZGUxPi9nLCIoPzpbOlxcd1xcdTAwYTEtXFx1RkZGRi1dfFxcXFxbXlxcczAtOWEtZl0pIikpOwpmdW5jdGlvbiBiKHgscyxELHoscixDLHEsQixBLHksdSxGLEcsdixwLHcpe2lmKHN8fG49PT0tMSl7ay5leHByZXNzaW9uc1srK25dPVtdO2w9LTE7aWYocyl7cmV0dXJuIiI7fX1pZihEfHx6fHxsPT09LTEpe0Q9RHx8IiAiO3ZhciB0PWsuZXhwcmVzc2lvbnNbbl07CmlmKGcmJnRbbF0pe3RbbF0ucmV2ZXJzZUNvbWJpbmF0b3I9aShEKTt9dFsrK2xdPXtjb21iaW5hdG9yOkQsdGFnOiIqIn07fXZhciBvPWsuZXhwcmVzc2lvbnNbbl1bbF07aWYocil7by50YWc9ci5yZXBsYWNlKG0sIiIpO31lbHNle2lmKEMpe28uaWQ9Qy5yZXBsYWNlKG0sIiIpOwp9ZWxzZXtpZihxKXtxPXEucmVwbGFjZShtLCIiKTtpZighby5jbGFzc0xpc3Qpe28uY2xhc3NMaXN0PVtdO31pZighby5jbGFzc2VzKXtvLmNsYXNzZXM9W107fW8uY2xhc3NMaXN0LnB1c2gocSk7by5jbGFzc2VzLnB1c2goe3ZhbHVlOnEscmVnZXhwOm5ldyBSZWdFeHAoIihefFxccykiK2YocSkrIihcXHN8JCkiKX0pOwp9ZWxzZXtpZihHKXt3PXd8fHA7dz13P3cucmVwbGFjZShtLCIiKTpudWxsO2lmKCFvLnBzZXVkb3Mpe28ucHNldWRvcz1bXTt9by5wc2V1ZG9zLnB1c2goe2tleTpHLnJlcGxhY2UobSwiIiksdmFsdWU6dyx0eXBlOkYubGVuZ3RoPT0xPyJjbGFzcyI6ImVsZW1lbnQifSk7Cn1lbHNle2lmKEIpe0I9Qi5yZXBsYWNlKG0sIiIpO3U9KHV8fCIiKS5yZXBsYWNlKG0sIiIpO3ZhciBFLEg7c3dpdGNoKEEpe2Nhc2UiXj0iOkg9bmV3IFJlZ0V4cCgiXiIrZih1KSk7YnJlYWs7Y2FzZSIkPSI6SD1uZXcgUmVnRXhwKGYodSkrIiQiKTticmVhaztjYXNlIn49IjpIPW5ldyBSZWdFeHAoIihefFxccykiK2YodSkrIihcXHN8JCkiKTsKYnJlYWs7Y2FzZSJ8PSI6SD1uZXcgUmVnRXhwKCJeIitmKHUpKyIoLXwkKSIpO2JyZWFrO2Nhc2UiPSI6RT1mdW5jdGlvbihJKXtyZXR1cm4gdT09STt9O2JyZWFrO2Nhc2UiKj0iOkU9ZnVuY3Rpb24oSSl7cmV0dXJuIEkmJkkuaW5kZXhPZih1KT4tMTt9O2JyZWFrOwpjYXNlIiE9IjpFPWZ1bmN0aW9uKEkpe3JldHVybiB1IT1JO307YnJlYWs7ZGVmYXVsdDpFPWZ1bmN0aW9uKEkpe3JldHVybiAhIUk7fTt9aWYodT09IiImJigvXlsqJF5dPSQvKS50ZXN0KEEpKXtFPWZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlO307fWlmKCFFKXtFPWZ1bmN0aW9uKEkpe3JldHVybiBJJiZILnRlc3QoSSk7Cn07fWlmKCFvLmF0dHJpYnV0ZXMpe28uYXR0cmlidXRlcz1bXTt9by5hdHRyaWJ1dGVzLnB1c2goe2tleTpCLG9wZXJhdG9yOkEsdmFsdWU6dSx0ZXN0OkV9KTt9fX19fXJldHVybiIiO312YXIgZD0odGhpcy5TbGlja3x8e30pO2QucGFyc2U9ZnVuY3Rpb24obyl7cmV0dXJuIGUobyk7Cn07ZC5lc2NhcGVSZWdFeHA9ZjtpZighdGhpcy5TbGljayl7dGhpcy5TbGljaz1kO319KS5hcHBseSgodHlwZW9mIGV4cG9ydHMhPSJ1bmRlZmluZWQiKT9leHBvcnRzOnRoaXMpOyhmdW5jdGlvbigpe3ZhciBrPXt9LG09e30sZD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwprLmlzTmF0aXZlQ29kZT1mdW5jdGlvbihjKXtyZXR1cm4oL1x7XHMqXFtuYXRpdmUgY29kZVxdXHMqXH0vKS50ZXN0KCIiK2MpO307ay5pc1hNTD1mdW5jdGlvbihjKXtyZXR1cm4oISFjLnhtbFZlcnNpb24pfHwoISFjLnhtbCl8fChkLmNhbGwoYyk9PSJbb2JqZWN0IFhNTERvY3VtZW50XSIpfHwoYy5ub2RlVHlwZT09OSYmYy5kb2N1bWVudEVsZW1lbnQubm9kZU5hbWUhPSJIVE1MIik7Cn07ay5zZXREb2N1bWVudD1mdW5jdGlvbih3KXt2YXIgcD13Lm5vZGVUeXBlO2lmKHA9PTkpe31lbHNle2lmKHApe3c9dy5vd25lckRvY3VtZW50O31lbHNle2lmKHcubmF2aWdhdG9yKXt3PXcuZG9jdW1lbnQ7fWVsc2V7cmV0dXJuO319fWlmKHRoaXMuZG9jdW1lbnQ9PT13KXtyZXR1cm47Cn10aGlzLmRvY3VtZW50PXc7dmFyIEE9dy5kb2N1bWVudEVsZW1lbnQsbz10aGlzLmdldFVJRFhNTChBKSxzPW1bb10scjtpZihzKXtmb3IociBpbiBzKXt0aGlzW3JdPXNbcl07fXJldHVybjt9cz1tW29dPXt9O3Mucm9vdD1BO3MuaXNYTUxEb2N1bWVudD10aGlzLmlzWE1MKHcpOwpzLmJyb2tlblN0YXJHRUJUTj1zLnN0YXJTZWxlY3RzQ2xvc2VkUVNBPXMuaWRHZXRzTmFtZT1zLmJyb2tlbk1peGVkQ2FzZVFTQT1zLmJyb2tlbkdFQkNOPXMuYnJva2VuQ2hlY2tlZFFTQT1zLmJyb2tlbkVtcHR5QXR0cmlidXRlUVNBPXMuaXNIVE1MRG9jdW1lbnQ9cy5uYXRpdmVNYXRjaGVzU2VsZWN0b3I9ZmFsc2U7CnZhciBxLHUseSx6LHQ7dmFyIHgsdj0ic2xpY2tfdW5pcXVlaWQiO3ZhciBjPXcuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIG49dy5ib2R5fHx3LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF18fEE7bi5hcHBlbmRDaGlsZChjKTt0cnl7Yy5pbm5lckhUTUw9JzxhIGlkPSInK3YrJyI+PC9hPic7CnMuaXNIVE1MRG9jdW1lbnQ9ISF3LmdldEVsZW1lbnRCeUlkKHYpO31jYXRjaChDKXt9aWYocy5pc0hUTUxEb2N1bWVudCl7Yy5zdHlsZS5kaXNwbGF5PSJub25lIjtjLmFwcGVuZENoaWxkKHcuY3JlYXRlQ29tbWVudCgiIikpO3U9KGMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGg+MSk7CnRyeXtjLmlubmVySFRNTD0iZm9vPC9mb28+Ijt4PWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTtxPSh4JiYhIXgubGVuZ3RoJiZ4WzBdLm5vZGVOYW1lLmNoYXJBdCgwKT09Ii8iKTt9Y2F0Y2goQyl7fXMuYnJva2VuU3RhckdFQlROPXV8fHE7dHJ5e2MuaW5uZXJIVE1MPSc8YSBuYW1lPSInK3YrJyI+PC9hPjxiIGlkPSInK3YrJyI+PC9iPic7CnMuaWRHZXRzTmFtZT13LmdldEVsZW1lbnRCeUlkKHYpPT09Yy5maXJzdENoaWxkO31jYXRjaChDKXt9aWYoYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXt0cnl7Yy5pbm5lckhUTUw9JzxhIGNsYXNzPSJmIj48L2E+PGEgY2xhc3M9ImIiPjwvYT4nO2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYiIpLmxlbmd0aDsKYy5maXJzdENoaWxkLmNsYXNzTmFtZT0iYiI7ej0oYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJiIikubGVuZ3RoIT0yKTt9Y2F0Y2goQyl7fXRyeXtjLmlubmVySFRNTD0nPGEgY2xhc3M9ImEiPjwvYT48YSBjbGFzcz0iZiBiIGEiPjwvYT4nO3k9KGMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYSIpLmxlbmd0aCE9Mik7Cn1jYXRjaChDKXt9cy5icm9rZW5HRUJDTj16fHx5O31pZihjLnF1ZXJ5U2VsZWN0b3JBbGwpe3RyeXtjLmlubmVySFRNTD0iZm9vPC9mb28+Ijt4PWMucXVlcnlTZWxlY3RvckFsbCgiKiIpO3Muc3RhclNlbGVjdHNDbG9zZWRRU0E9KHgmJiEheC5sZW5ndGgmJnhbMF0ubm9kZU5hbWUuY2hhckF0KDApPT0iLyIpOwp9Y2F0Y2goQyl7fXRyeXtjLmlubmVySFRNTD0nPGEgY2xhc3M9Ik1pWCI+PC9hPic7cy5icm9rZW5NaXhlZENhc2VRU0E9IWMucXVlcnlTZWxlY3RvckFsbCgiLk1pWCIpLmxlbmd0aDt9Y2F0Y2goQyl7fXRyeXtjLmlubmVySFRNTD0nPHNlbGVjdD48b3B0aW9uIHNlbGVjdGVkPSJzZWxlY3RlZCI+YTwvb3B0aW9uPjwvc2VsZWN0Pic7CnMuYnJva2VuQ2hlY2tlZFFTQT0oYy5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aD09MCk7fWNhdGNoKEMpe310cnl7Yy5pbm5lckhUTUw9JzxhIGNsYXNzPSIiPjwvYT4nO3MuYnJva2VuRW1wdHlBdHRyaWJ1dGVRU0E9KGMucXVlcnlTZWxlY3RvckFsbCgnW2NsYXNzKj0iIl0nKS5sZW5ndGghPTApOwp9Y2F0Y2goQyl7fX10cnl7Yy5pbm5lckhUTUw9Jzxmb3JtIGFjdGlvbj0icyI+PGlucHV0IGlkPSJhY3Rpb24iLz48L2Zvcm0+Jzt0PShjLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJhY3Rpb24iKSE9InMiKTt9Y2F0Y2goQyl7fXMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yPUEubWF0Y2hlc1NlbGVjdG9yfHxBLm1vek1hdGNoZXNTZWxlY3Rvcnx8QS53ZWJraXRNYXRjaGVzU2VsZWN0b3I7CmlmKHMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yKXt0cnl7cy5uYXRpdmVNYXRjaGVzU2VsZWN0b3IuY2FsbChBLCI6c2xpY2siKTtzLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcj1udWxsO31jYXRjaChDKXt9fX10cnl7QS5zbGlja19leHBhbmRvPTE7ZGVsZXRlIEEuc2xpY2tfZXhwYW5kbzsKcy5nZXRVSUQ9dGhpcy5nZXRVSURIVE1MO31jYXRjaChDKXtzLmdldFVJRD10aGlzLmdldFVJRFhNTDt9bi5yZW1vdmVDaGlsZChjKTtjPXg9bj1udWxsO3MuZ2V0QXR0cmlidXRlPShzLmlzSFRNTERvY3VtZW50JiZ0KT9mdW5jdGlvbihHLEUpe3ZhciBIPXRoaXMuYXR0cmlidXRlR2V0dGVyc1tFXTsKaWYoSCl7cmV0dXJuIEguY2FsbChHKTt9dmFyIEY9Ry5nZXRBdHRyaWJ1dGVOb2RlKEUpO3JldHVybihGKT9GLm5vZGVWYWx1ZTpudWxsO306ZnVuY3Rpb24oRixFKXt2YXIgRz10aGlzLmF0dHJpYnV0ZUdldHRlcnNbRV07cmV0dXJuKEcpP0cuY2FsbChGKTpGLmdldEF0dHJpYnV0ZShFKTsKfTtzLmhhc0F0dHJpYnV0ZT0oQSYmdGhpcy5pc05hdGl2ZUNvZGUoQS5oYXNBdHRyaWJ1dGUpKT9mdW5jdGlvbihGLEUpe3JldHVybiBGLmhhc0F0dHJpYnV0ZShFKTt9OmZ1bmN0aW9uKEYsRSl7Rj1GLmdldEF0dHJpYnV0ZU5vZGUoRSk7cmV0dXJuICEhKEYmJihGLnNwZWNpZmllZHx8Ri5ub2RlVmFsdWUpKTsKfTt2YXIgRD1BJiZ0aGlzLmlzTmF0aXZlQ29kZShBLmNvbnRhaW5zKSxCPXcmJnRoaXMuaXNOYXRpdmVDb2RlKHcuY29udGFpbnMpO3MuY29udGFpbnM9KEQmJkIpP2Z1bmN0aW9uKEUsRil7cmV0dXJuIEUuY29udGFpbnMoRik7fTooRCYmIUIpP2Z1bmN0aW9uKEUsRil7cmV0dXJuIEU9PT1GfHwoKEU9PT13KT93LmRvY3VtZW50RWxlbWVudDpFKS5jb250YWlucyhGKTsKfTooQSYmQS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbik/ZnVuY3Rpb24oRSxGKXtyZXR1cm4gRT09PUZ8fCEhKEUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oRikmMTYpO306ZnVuY3Rpb24oRSxGKXtpZihGKXtkb3tpZihGPT09RSl7cmV0dXJuIHRydWU7fX13aGlsZSgoRj1GLnBhcmVudE5vZGUpKTsKfXJldHVybiBmYWxzZTt9O3MuZG9jdW1lbnRTb3J0ZXI9KEEuY29tcGFyZURvY3VtZW50UG9zaXRpb24pP2Z1bmN0aW9uKEYsRSl7aWYoIUYuY29tcGFyZURvY3VtZW50UG9zaXRpb258fCFFLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKXtyZXR1cm4gMDt9cmV0dXJuIEYuY29tcGFyZURvY3VtZW50UG9zaXRpb24oRSkmND8tMTpGPT09RT8wOjE7Cn06KCJzb3VyY2VJbmRleCIgaW4gQSk/ZnVuY3Rpb24oRixFKXtpZighRi5zb3VyY2VJbmRleHx8IUUuc291cmNlSW5kZXgpe3JldHVybiAwO31yZXR1cm4gRi5zb3VyY2VJbmRleC1FLnNvdXJjZUluZGV4O306KHcuY3JlYXRlUmFuZ2UpP2Z1bmN0aW9uKEgsRil7aWYoIUgub3duZXJEb2N1bWVudHx8IUYub3duZXJEb2N1bWVudCl7cmV0dXJuIDA7Cn12YXIgRz1ILm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxFPUYub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpO0cuc2V0U3RhcnQoSCwwKTtHLnNldEVuZChILDApO0Uuc2V0U3RhcnQoRiwwKTtFLnNldEVuZChGLDApO3JldHVybiBHLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhSYW5nZS5TVEFSVF9UT19FTkQsRSk7Cn06bnVsbDtBPW51bGw7Zm9yKHIgaW4gcyl7dGhpc1tyXT1zW3JdO319O3ZhciBmPS9eKFsjLl0/KSgoPzpbXHctXSt8XCopKSQvLGg9L1xbLitbKiReXT0oPzoiInwnJyk/XF0vLGc9e307ay5zZWFyY2g9ZnVuY3Rpb24oVSx6LEgscyl7dmFyIHA9dGhpcy5mb3VuZD0ocyk/bnVsbDooSHx8W10pOwppZighVSl7cmV0dXJuIHA7fWVsc2V7aWYoVS5uYXZpZ2F0b3Ipe1U9VS5kb2N1bWVudDt9ZWxzZXtpZighVS5ub2RlVHlwZSl7cmV0dXJuIHA7fX19dmFyIEYsTyxWPXRoaXMudW5pcXVlcz17fSxJPSEhKEgmJkgubGVuZ3RoKSx5PShVLm5vZGVUeXBlPT05KTtpZih0aGlzLmRvY3VtZW50IT09KHk/VTpVLm93bmVyRG9jdW1lbnQpKXt0aGlzLnNldERvY3VtZW50KFUpOwp9aWYoSSl7Zm9yKE89cC5sZW5ndGg7Ty0tOyl7Vlt0aGlzLmdldFVJRChwW09dKV09dHJ1ZTt9fWlmKHR5cGVvZiB6PT0ic3RyaW5nIil7dmFyIHI9ei5tYXRjaChmKTtzaW1wbGVTZWxlY3RvcnM6aWYocil7dmFyIHU9clsxXSx2PXJbMl0sQSxFO2lmKCF1KXtpZih2PT0iKiImJnRoaXMuYnJva2VuU3RhckdFQlROKXticmVhayBzaW1wbGVTZWxlY3RvcnM7Cn1FPVUuZ2V0RWxlbWVudHNCeVRhZ05hbWUodik7aWYocyl7cmV0dXJuIEVbMF18fG51bGw7fWZvcihPPTA7QT1FW08rK107KXtpZighKEkmJlZbdGhpcy5nZXRVSUQoQSldKSl7cC5wdXNoKEEpO319fWVsc2V7aWYodT09IiMiKXtpZighdGhpcy5pc0hUTUxEb2N1bWVudHx8IXkpe2JyZWFrIHNpbXBsZVNlbGVjdG9yczsKfUE9VS5nZXRFbGVtZW50QnlJZCh2KTtpZighQSl7cmV0dXJuIHA7fWlmKHRoaXMuaWRHZXRzTmFtZSYmQS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpLm5vZGVWYWx1ZSE9dil7YnJlYWsgc2ltcGxlU2VsZWN0b3JzO31pZihzKXtyZXR1cm4gQXx8bnVsbDt9aWYoIShJJiZWW3RoaXMuZ2V0VUlEKEEpXSkpe3AucHVzaChBKTsKfX1lbHNle2lmKHU9PSIuIil7aWYoIXRoaXMuaXNIVE1MRG9jdW1lbnR8fCgoIVUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZXx8dGhpcy5icm9rZW5HRUJDTikmJlUucXVlcnlTZWxlY3RvckFsbCkpe2JyZWFrIHNpbXBsZVNlbGVjdG9yczt9aWYoVS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiYhdGhpcy5icm9rZW5HRUJDTil7RT1VLmdldEVsZW1lbnRzQnlDbGFzc05hbWUodik7CmlmKHMpe3JldHVybiBFWzBdfHxudWxsO31mb3IoTz0wO0E9RVtPKytdOyl7aWYoIShJJiZWW3RoaXMuZ2V0VUlEKEEpXSkpe3AucHVzaChBKTt9fX1lbHNle3ZhciBUPW5ldyBSZWdFeHAoIihefFxccykiK2UuZXNjYXBlUmVnRXhwKHYpKyIoXFxzfCQpIik7RT1VLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7CmZvcihPPTA7QT1FW08rK107KXtjbGFzc05hbWU9QS5jbGFzc05hbWU7aWYoIShjbGFzc05hbWUmJlQudGVzdChjbGFzc05hbWUpKSl7Y29udGludWU7fWlmKHMpe3JldHVybiBBO31pZighKEkmJlZbdGhpcy5nZXRVSUQoQSldKSl7cC5wdXNoKEEpO319fX19fWlmKEkpe3RoaXMuc29ydChwKTsKfXJldHVybihzKT9udWxsOnA7fXF1ZXJ5U2VsZWN0b3I6aWYoVS5xdWVyeVNlbGVjdG9yQWxsKXtpZighdGhpcy5pc0hUTUxEb2N1bWVudHx8Z1t6XXx8dGhpcy5icm9rZW5NaXhlZENhc2VRU0F8fCh0aGlzLmJyb2tlbkNoZWNrZWRRU0EmJnouaW5kZXhPZigiOmNoZWNrZWQiKT4tMSl8fCh0aGlzLmJyb2tlbkVtcHR5QXR0cmlidXRlUVNBJiZoLnRlc3QoeikpfHwoIXkmJnouaW5kZXhPZigiLCIpPi0xKXx8ZS5kaXNhYmxlUVNBKXticmVhayBxdWVyeVNlbGVjdG9yOwp9dmFyIFM9eix4PVU7aWYoIXkpe3ZhciBDPXguZ2V0QXR0cmlidXRlKCJpZCIpLHQ9InNsaWNraWRfXyI7eC5zZXRBdHRyaWJ1dGUoImlkIix0KTtTPSIjIit0KyIgIitTO1U9eC5wYXJlbnROb2RlO310cnl7aWYocyl7cmV0dXJuIFUucXVlcnlTZWxlY3RvcihTKXx8bnVsbDsKfWVsc2V7RT1VLnF1ZXJ5U2VsZWN0b3JBbGwoUyk7fX1jYXRjaChRKXtnW3pdPTE7YnJlYWsgcXVlcnlTZWxlY3Rvcjt9ZmluYWxseXtpZigheSl7aWYoQyl7eC5zZXRBdHRyaWJ1dGUoImlkIixDKTt9ZWxzZXt4LnJlbW92ZUF0dHJpYnV0ZSgiaWQiKTt9VT14O319aWYodGhpcy5zdGFyU2VsZWN0c0Nsb3NlZFFTQSl7Zm9yKE89MDsKQT1FW08rK107KXtpZihBLm5vZGVOYW1lPiJAIiYmIShJJiZWW3RoaXMuZ2V0VUlEKEEpXSkpe3AucHVzaChBKTt9fX1lbHNle2ZvcihPPTA7QT1FW08rK107KXtpZighKEkmJlZbdGhpcy5nZXRVSUQoQSldKSl7cC5wdXNoKEEpO319fWlmKEkpe3RoaXMuc29ydChwKTsKfXJldHVybiBwO31GPXRoaXMuU2xpY2sucGFyc2Uoeik7aWYoIUYubGVuZ3RoKXtyZXR1cm4gcDt9fWVsc2V7aWYoej09bnVsbCl7cmV0dXJuIHA7fWVsc2V7aWYoei5TbGljayl7Rj16O31lbHNle2lmKHRoaXMuY29udGFpbnMoVS5kb2N1bWVudEVsZW1lbnR8fFUseikpeyhwKT9wLnB1c2goeik6cD16OwpyZXR1cm4gcDt9ZWxzZXtyZXR1cm4gcDt9fX19dGhpcy5wb3NOVEg9e307dGhpcy5wb3NOVEhMYXN0PXt9O3RoaXMucG9zTlRIVHlwZT17fTt0aGlzLnBvc05USFR5cGVMYXN0PXt9O3RoaXMucHVzaD0oIUkmJihzfHwoRi5sZW5ndGg9PTEmJkYuZXhwcmVzc2lvbnNbMF0ubGVuZ3RoPT0xKSkpP3RoaXMucHVzaEFycmF5OnRoaXMucHVzaFVJRDsKaWYocD09bnVsbCl7cD1bXTt9dmFyIE0sTCxLO3ZhciBCLEosRCxjLHEsRyxXO3ZhciBOLFAsbyx3LFI9Ri5leHByZXNzaW9ucztzZWFyY2g6Zm9yKE89MDsoUD1SW09dKTtPKyspe2ZvcihNPTA7KG89UFtNXSk7TSsrKXtCPSJjb21iaW5hdG9yOiIrby5jb21iaW5hdG9yOwppZighdGhpc1tCXSl7Y29udGludWUgc2VhcmNoO31KPSh0aGlzLmlzWE1MRG9jdW1lbnQpP28udGFnOm8udGFnLnRvVXBwZXJDYXNlKCk7RD1vLmlkO2M9by5jbGFzc0xpc3Q7cT1vLmNsYXNzZXM7Rz1vLmF0dHJpYnV0ZXM7Vz1vLnBzZXVkb3M7dz0oTT09PShQLmxlbmd0aC0xKSk7CnRoaXMuYml0VW5pcXVlcz17fTtpZih3KXt0aGlzLnVuaXF1ZXM9Vjt0aGlzLmZvdW5kPXA7fWVsc2V7dGhpcy51bmlxdWVzPXt9O3RoaXMuZm91bmQ9W107fWlmKE09PT0wKXt0aGlzW0JdKFUsSixELHEsRyxXLGMpO2lmKHMmJncmJnAubGVuZ3RoKXticmVhayBzZWFyY2g7Cn19ZWxzZXtpZihzJiZ3KXtmb3IoTD0wLEs9Ti5sZW5ndGg7TDxLO0wrKyl7dGhpc1tCXShOW0xdLEosRCxxLEcsVyxjKTtpZihwLmxlbmd0aCl7YnJlYWsgc2VhcmNoO319fWVsc2V7Zm9yKEw9MCxLPU4ubGVuZ3RoO0w8SztMKyspe3RoaXNbQl0oTltMXSxKLEQscSxHLFcsYyk7Cn19fU49dGhpcy5mb3VuZDt9fWlmKEl8fChGLmV4cHJlc3Npb25zLmxlbmd0aD4xKSl7dGhpcy5zb3J0KHApO31yZXR1cm4ocyk/KHBbMF18fG51bGwpOnA7fTtrLnVpZHg9MTtrLnVpZGs9InNsaWNrLXVuaXF1ZWlkIjtrLmdldFVJRFhNTD1mdW5jdGlvbihuKXt2YXIgYz1uLmdldEF0dHJpYnV0ZSh0aGlzLnVpZGspOwppZighYyl7Yz10aGlzLnVpZHgrKztuLnNldEF0dHJpYnV0ZSh0aGlzLnVpZGssYyk7fXJldHVybiBjO307ay5nZXRVSURIVE1MPWZ1bmN0aW9uKGMpe3JldHVybiBjLnVuaXF1ZU51bWJlcnx8KGMudW5pcXVlTnVtYmVyPXRoaXMudWlkeCsrKTt9O2suc29ydD1mdW5jdGlvbihjKXtpZighdGhpcy5kb2N1bWVudFNvcnRlcil7cmV0dXJuIGM7Cn1jLnNvcnQodGhpcy5kb2N1bWVudFNvcnRlcik7cmV0dXJuIGM7fTtrLmNhY2hlTlRIPXt9O2subWF0Y2hOVEg9L14oWystXT9cZCopPyhbYS16XSspPyhbKy1dXGQrKT8kLztrLnBhcnNlTlRIQXJndW1lbnQ9ZnVuY3Rpb24ocSl7dmFyIG89cS5tYXRjaCh0aGlzLm1hdGNoTlRIKTsKaWYoIW8pe3JldHVybiBmYWxzZTt9dmFyIHA9b1syXXx8ZmFsc2U7dmFyIG49b1sxXXx8MTtpZihuPT0iLSIpe249LTE7fXZhciBjPStvWzNdfHwwO289KHA9PSJuIik/e2E6bixiOmN9OihwPT0ib2RkIik/e2E6MixiOjF9OihwPT0iZXZlbiIpP3thOjIsYjowfTp7YTowLGI6bn07CnJldHVybih0aGlzLmNhY2hlTlRIW3FdPW8pO307ay5jcmVhdGVOVEhQc2V1ZG89ZnVuY3Rpb24ocCxuLGMsbyl7cmV0dXJuIGZ1bmN0aW9uKHMscSl7dmFyIHU9dGhpcy5nZXRVSUQocyk7aWYoIXRoaXNbY11bdV0pe3ZhciBBPXMucGFyZW50Tm9kZTtpZighQSl7cmV0dXJuIGZhbHNlOwp9dmFyIHI9QVtwXSx0PTE7aWYobyl7dmFyIHo9cy5ub2RlTmFtZTtkb3tpZihyLm5vZGVOYW1lIT16KXtjb250aW51ZTt9dGhpc1tjXVt0aGlzLmdldFVJRChyKV09dCsrO313aGlsZSgocj1yW25dKSk7fWVsc2V7ZG97aWYoci5ub2RlVHlwZSE9MSl7Y29udGludWU7Cn10aGlzW2NdW3RoaXMuZ2V0VUlEKHIpXT10Kys7fXdoaWxlKChyPXJbbl0pKTt9fXE9cXx8Im4iO3ZhciB2PXRoaXMuY2FjaGVOVEhbcV18fHRoaXMucGFyc2VOVEhBcmd1bWVudChxKTtpZighdil7cmV0dXJuIGZhbHNlO312YXIgeT12LmEseD12LmIsdz10aGlzW2NdW3VdOwppZih5PT0wKXtyZXR1cm4geD09dzt9aWYoeT4wKXtpZih3PHgpe3JldHVybiBmYWxzZTt9fWVsc2V7aWYoeDx3KXtyZXR1cm4gZmFsc2U7fX1yZXR1cm4oKHcteCkleSk9PTA7fTt9O2sucHVzaEFycmF5PWZ1bmN0aW9uKHAsYyxyLG8sbixxKXtpZih0aGlzLm1hdGNoU2VsZWN0b3IocCxjLHIsbyxuLHEpKXt0aGlzLmZvdW5kLnB1c2gocCk7Cn19O2sucHVzaFVJRD1mdW5jdGlvbihxLGMscyxwLG4scil7dmFyIG89dGhpcy5nZXRVSUQocSk7aWYoIXRoaXMudW5pcXVlc1tvXSYmdGhpcy5tYXRjaFNlbGVjdG9yKHEsYyxzLHAsbixyKSl7dGhpcy51bmlxdWVzW29dPXRydWU7dGhpcy5mb3VuZC5wdXNoKHEpO319OwprLm1hdGNoTm9kZT1mdW5jdGlvbihuLG8pe2lmKHRoaXMuaXNIVE1MRG9jdW1lbnQmJnRoaXMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yKXt0cnl7cmV0dXJuIHRoaXMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yLmNhbGwobixvLnJlcGxhY2UoL1xbKFtePV0rKT1ccyooW14nIlxdXSs/KVxzKlxdL2csJ1skMT0iJDIiXScpKTsKfWNhdGNoKHUpe319dmFyIHQ9dGhpcy5TbGljay5wYXJzZShvKTtpZighdCl7cmV0dXJuIHRydWU7fXZhciByPXQuZXhwcmVzc2lvbnMscz0wLHE7Zm9yKHE9MDsoY3VycmVudEV4cHJlc3Npb249cltxXSk7cSsrKXtpZihjdXJyZW50RXhwcmVzc2lvbi5sZW5ndGg9PTEpe3ZhciBwPWN1cnJlbnRFeHByZXNzaW9uWzBdOwppZih0aGlzLm1hdGNoU2VsZWN0b3IobiwodGhpcy5pc1hNTERvY3VtZW50KT9wLnRhZzpwLnRhZy50b1VwcGVyQ2FzZSgpLHAuaWQscC5jbGFzc2VzLHAuYXR0cmlidXRlcyxwLnBzZXVkb3MpKXtyZXR1cm4gdHJ1ZTt9cysrO319aWYocz09dC5sZW5ndGgpe3JldHVybiBmYWxzZTsKfXZhciBjPXRoaXMuc2VhcmNoKHRoaXMuZG9jdW1lbnQsdCksdjtmb3IocT0wO3Y9Y1txKytdOyl7aWYodj09PW4pe3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO307ay5tYXRjaFBzZXVkbz1mdW5jdGlvbihxLGMscCl7dmFyIG49InBzZXVkbzoiK2M7aWYodGhpc1tuXSl7cmV0dXJuIHRoaXNbbl0ocSxwKTsKfXZhciBvPXRoaXMuZ2V0QXR0cmlidXRlKHEsYyk7cmV0dXJuKHApP3A9PW86ISFvO307ay5tYXRjaFNlbGVjdG9yPWZ1bmN0aW9uKG8sdixjLHAscSxzKXtpZih2KXt2YXIgdD0odGhpcy5pc1hNTERvY3VtZW50KT9vLm5vZGVOYW1lOm8ubm9kZU5hbWUudG9VcHBlckNhc2UoKTsKaWYodj09IioiKXtpZih0PCJAIil7cmV0dXJuIGZhbHNlO319ZWxzZXtpZih0IT12KXtyZXR1cm4gZmFsc2U7fX19aWYoYyYmby5nZXRBdHRyaWJ1dGUoImlkIikhPWMpe3JldHVybiBmYWxzZTt9dmFyIHIsbix1O2lmKHApe2ZvcihyPXAubGVuZ3RoO3ItLTspe3U9dGhpcy5nZXRBdHRyaWJ1dGUobywiY2xhc3MiKTsKaWYoISh1JiZwW3JdLnJlZ2V4cC50ZXN0KHUpKSl7cmV0dXJuIGZhbHNlO319fWlmKHEpe2ZvcihyPXEubGVuZ3RoO3ItLTspe249cVtyXTtpZihuLm9wZXJhdG9yPyFuLnRlc3QodGhpcy5nZXRBdHRyaWJ1dGUobyxuLmtleSkpOiF0aGlzLmhhc0F0dHJpYnV0ZShvLG4ua2V5KSl7cmV0dXJuIGZhbHNlOwp9fX1pZihzKXtmb3Iocj1zLmxlbmd0aDtyLS07KXtuPXNbcl07aWYoIXRoaXMubWF0Y2hQc2V1ZG8obyxuLmtleSxuLnZhbHVlKSl7cmV0dXJuIGZhbHNlO319fXJldHVybiB0cnVlO307dmFyIGo9eyIgIjpmdW5jdGlvbihxLHcsbixyLHMsdSxwKXt2YXIgdCx2LG87CmlmKHRoaXMuaXNIVE1MRG9jdW1lbnQpe2dldEJ5SWQ6aWYobil7dj10aGlzLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG4pO2lmKCghdiYmcS5hbGwpfHwodGhpcy5pZEdldHNOYW1lJiZ2JiZ2LmdldEF0dHJpYnV0ZU5vZGUoImlkIikubm9kZVZhbHVlIT1uKSl7bz1xLmFsbFtuXTsKaWYoIW8pe3JldHVybjt9aWYoIW9bMF0pe289W29dO31mb3IodD0wO3Y9b1t0KytdOyl7dmFyIGM9di5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO2lmKGMmJmMubm9kZVZhbHVlPT1uKXt0aGlzLnB1c2godix3LG51bGwscixzLHUpO2JyZWFrO319cmV0dXJuO31pZighdil7aWYodGhpcy5jb250YWlucyh0aGlzLnJvb3QscSkpe3JldHVybjsKfWVsc2V7YnJlYWsgZ2V0QnlJZDt9fWVsc2V7aWYodGhpcy5kb2N1bWVudCE9PXEmJiF0aGlzLmNvbnRhaW5zKHEsdikpe3JldHVybjt9fXRoaXMucHVzaCh2LHcsbnVsbCxyLHMsdSk7cmV0dXJuO31nZXRCeUNsYXNzOmlmKHImJnEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmIXRoaXMuYnJva2VuR0VCQ04pe289cS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHAuam9pbigiICIpKTsKaWYoIShvJiZvLmxlbmd0aCkpe2JyZWFrIGdldEJ5Q2xhc3M7fWZvcih0PTA7dj1vW3QrK107KXt0aGlzLnB1c2godix3LG4sbnVsbCxzLHUpO31yZXR1cm47fX1nZXRCeVRhZzp7bz1xLmdldEVsZW1lbnRzQnlUYWdOYW1lKHcpO2lmKCEobyYmby5sZW5ndGgpKXticmVhayBnZXRCeVRhZzsKfWlmKCF0aGlzLmJyb2tlblN0YXJHRUJUTil7dz1udWxsO31mb3IodD0wO3Y9b1t0KytdOyl7dGhpcy5wdXNoKHYsdyxuLHIscyx1KTt9fX0sIj4iOmZ1bmN0aW9uKHAsYyxyLG8sbixxKXtpZigocD1wLmZpcnN0Q2hpbGQpKXtkb3tpZihwLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gocCxjLHIsbyxuLHEpOwp9fXdoaWxlKChwPXAubmV4dFNpYmxpbmcpKTt9fSwiKyI6ZnVuY3Rpb24ocCxjLHIsbyxuLHEpe3doaWxlKChwPXAubmV4dFNpYmxpbmcpKXtpZihwLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gocCxjLHIsbyxuLHEpO2JyZWFrO319fSwiXiI6ZnVuY3Rpb24ocCxjLHIsbyxuLHEpe3A9cC5maXJzdENoaWxkOwppZihwKXtpZihwLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gocCxjLHIsbyxuLHEpO31lbHNle3RoaXNbImNvbWJpbmF0b3I6KyJdKHAsYyxyLG8sbixxKTt9fX0sIn4iOmZ1bmN0aW9uKHEsYyxzLHAsbixyKXt3aGlsZSgocT1xLm5leHRTaWJsaW5nKSl7aWYocS5ub2RlVHlwZSE9MSl7Y29udGludWU7Cn12YXIgbz10aGlzLmdldFVJRChxKTtpZih0aGlzLmJpdFVuaXF1ZXNbb10pe2JyZWFrO310aGlzLmJpdFVuaXF1ZXNbb109dHJ1ZTt0aGlzLnB1c2gocSxjLHMscCxuLHIpO319LCIrKyI6ZnVuY3Rpb24ocCxjLHIsbyxuLHEpe3RoaXNbImNvbWJpbmF0b3I6KyJdKHAsYyxyLG8sbixxKTsKdGhpc1siY29tYmluYXRvcjohKyJdKHAsYyxyLG8sbixxKTt9LCJ+fiI6ZnVuY3Rpb24ocCxjLHIsbyxuLHEpe3RoaXNbImNvbWJpbmF0b3I6fiJdKHAsYyxyLG8sbixxKTt0aGlzWyJjb21iaW5hdG9yOiF+Il0ocCxjLHIsbyxuLHEpO30sIiEiOmZ1bmN0aW9uKHAsYyxyLG8sbixxKXt3aGlsZSgocD1wLnBhcmVudE5vZGUpKXtpZihwIT09dGhpcy5kb2N1bWVudCl7dGhpcy5wdXNoKHAsYyxyLG8sbixxKTsKfX19LCIhPiI6ZnVuY3Rpb24ocCxjLHIsbyxuLHEpe3A9cC5wYXJlbnROb2RlO2lmKHAhPT10aGlzLmRvY3VtZW50KXt0aGlzLnB1c2gocCxjLHIsbyxuLHEpO319LCIhKyI6ZnVuY3Rpb24ocCxjLHIsbyxuLHEpe3doaWxlKChwPXAucHJldmlvdXNTaWJsaW5nKSl7aWYocC5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKHAsYyxyLG8sbixxKTsKYnJlYWs7fX19LCIhXiI6ZnVuY3Rpb24ocCxjLHIsbyxuLHEpe3A9cC5sYXN0Q2hpbGQ7aWYocCl7aWYocC5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKHAsYyxyLG8sbixxKTt9ZWxzZXt0aGlzWyJjb21iaW5hdG9yOiErIl0ocCxjLHIsbyxuLHEpO319fSwiIX4iOmZ1bmN0aW9uKHEsYyxzLHAsbixyKXt3aGlsZSgocT1xLnByZXZpb3VzU2libGluZykpe2lmKHEubm9kZVR5cGUhPTEpe2NvbnRpbnVlOwp9dmFyIG89dGhpcy5nZXRVSUQocSk7aWYodGhpcy5iaXRVbmlxdWVzW29dKXticmVhazt9dGhpcy5iaXRVbmlxdWVzW29dPXRydWU7dGhpcy5wdXNoKHEsYyxzLHAsbixyKTt9fX07Zm9yKHZhciBpIGluIGope2tbImNvbWJpbmF0b3I6IitpXT1qW2ldO312YXIgbD17ZW1wdHk6ZnVuY3Rpb24oYyl7dmFyIG49Yy5maXJzdENoaWxkOwpyZXR1cm4gIShuJiZuLm5vZGVUeXBlPT0xKSYmIShjLmlubmVyVGV4dHx8Yy50ZXh0Q29udGVudHx8IiIpLmxlbmd0aDt9LG5vdDpmdW5jdGlvbihjLG4pe3JldHVybiAhdGhpcy5tYXRjaE5vZGUoYyxuKTt9LGNvbnRhaW5zOmZ1bmN0aW9uKGMsbil7cmV0dXJuKGMuaW5uZXJUZXh0fHxjLnRleHRDb250ZW50fHwiIikuaW5kZXhPZihuKT4tMTsKfSwiZmlyc3QtY2hpbGQiOmZ1bmN0aW9uKGMpe3doaWxlKChjPWMucHJldmlvdXNTaWJsaW5nKSl7aWYoYy5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fSwibGFzdC1jaGlsZCI6ZnVuY3Rpb24oYyl7d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LCJvbmx5LWNoaWxkIjpmdW5jdGlvbihvKXt2YXIgbj1vO3doaWxlKChuPW4ucHJldmlvdXNTaWJsaW5nKSl7aWYobi5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlO319dmFyIGM9bzt3aGlsZSgoYz1jLm5leHRTaWJsaW5nKSl7aWYoYy5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sIm50aC1jaGlsZCI6ay5jcmVhdGVOVEhQc2V1ZG8oImZpcnN0Q2hpbGQiLCJuZXh0U2libGluZyIsInBvc05USCIpLCJudGgtbGFzdC1jaGlsZCI6ay5jcmVhdGVOVEhQc2V1ZG8oImxhc3RDaGlsZCIsInByZXZpb3VzU2libGluZyIsInBvc05USExhc3QiKSwibnRoLW9mLXR5cGUiOmsuY3JlYXRlTlRIUHNldWRvKCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJwb3NOVEhUeXBlIix0cnVlKSwibnRoLWxhc3Qtb2YtdHlwZSI6ay5jcmVhdGVOVEhQc2V1ZG8oImxhc3RDaGlsZCIsInByZXZpb3VzU2libGluZyIsInBvc05USFR5cGVMYXN0Iix0cnVlKSxpbmRleDpmdW5jdGlvbihuLGMpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0obiwiIisoYysxKSk7Cn0sZXZlbjpmdW5jdGlvbihjKXtyZXR1cm4gdGhpc1sicHNldWRvOm50aC1jaGlsZCJdKGMsIjJuIik7fSxvZGQ6ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXNbInBzZXVkbzpudGgtY2hpbGQiXShjLCIybisxIik7fSwiZmlyc3Qtb2YtdHlwZSI6ZnVuY3Rpb24oYyl7dmFyIG49Yy5ub2RlTmFtZTsKd2hpbGUoKGM9Yy5wcmV2aW91c1NpYmxpbmcpKXtpZihjLm5vZGVOYW1lPT1uKXtyZXR1cm4gZmFsc2U7fX1yZXR1cm4gdHJ1ZTt9LCJsYXN0LW9mLXR5cGUiOmZ1bmN0aW9uKGMpe3ZhciBuPWMubm9kZU5hbWU7d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZU5hbWU9PW4pe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LCJvbmx5LW9mLXR5cGUiOmZ1bmN0aW9uKG8pe3ZhciBuPW8scD1vLm5vZGVOYW1lO3doaWxlKChuPW4ucHJldmlvdXNTaWJsaW5nKSl7aWYobi5ub2RlTmFtZT09cCl7cmV0dXJuIGZhbHNlO319dmFyIGM9bzt3aGlsZSgoYz1jLm5leHRTaWJsaW5nKSl7aWYoYy5ub2RlTmFtZT09cCl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sZW5hYmxlZDpmdW5jdGlvbihjKXtyZXR1cm4gIWMuZGlzYWJsZWQ7fSxkaXNhYmxlZDpmdW5jdGlvbihjKXtyZXR1cm4gYy5kaXNhYmxlZDt9LGNoZWNrZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuIGMuY2hlY2tlZHx8Yy5zZWxlY3RlZDt9LGZvY3VzOmZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmlzSFRNTERvY3VtZW50JiZ0aGlzLmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ9PT1jJiYoYy5ocmVmfHxjLnR5cGV8fHRoaXMuaGFzQXR0cmlidXRlKGMsInRhYmluZGV4IikpOwp9LHJvb3Q6ZnVuY3Rpb24oYyl7cmV0dXJuKGM9PT10aGlzLnJvb3QpO30sc2VsZWN0ZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuIGMuc2VsZWN0ZWQ7fX07Zm9yKHZhciBiIGluIGwpe2tbInBzZXVkbzoiK2JdPWxbYl07fXZhciBhPWsuYXR0cmlidXRlR2V0dGVycz17ImZvciI6ZnVuY3Rpb24oKXtyZXR1cm4oImh0bWxGb3IiIGluIHRoaXMpP3RoaXMuaHRtbEZvcjp0aGlzLmdldEF0dHJpYnV0ZSgiZm9yIik7Cn0saHJlZjpmdW5jdGlvbigpe3JldHVybigiaHJlZiIgaW4gdGhpcyk/dGhpcy5nZXRBdHRyaWJ1dGUoImhyZWYiLDIpOnRoaXMuZ2V0QXR0cmlidXRlKCJocmVmIik7fSxzdHlsZTpmdW5jdGlvbigpe3JldHVybih0aGlzLnN0eWxlKT90aGlzLnN0eWxlLmNzc1RleHQ6dGhpcy5nZXRBdHRyaWJ1dGUoInN0eWxlIik7Cn0sdGFiaW5kZXg6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldEF0dHJpYnV0ZU5vZGUoInRhYmluZGV4Iik7cmV0dXJuKGMmJmMuc3BlY2lmaWVkKT9jLm5vZGVWYWx1ZTpudWxsO30sdHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgidHlwZSIpOwp9LG1heGxlbmd0aDpmdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0QXR0cmlidXRlTm9kZSgibWF4TGVuZ3RoIik7cmV0dXJuKGMmJmMuc3BlY2lmaWVkKT9jLm5vZGVWYWx1ZTpudWxsO319O2EuTUFYTEVOR1RIPWEubWF4TGVuZ3RoPWEubWF4bGVuZ3RoO3ZhciBlPWsuU2xpY2s9KHRoaXMuU2xpY2t8fHt9KTsKZS52ZXJzaW9uPSIxLjEuNyI7ZS5zZWFyY2g9ZnVuY3Rpb24obixvLGMpe3JldHVybiBrLnNlYXJjaChuLG8sYyk7fTtlLmZpbmQ9ZnVuY3Rpb24oYyxuKXtyZXR1cm4gay5zZWFyY2goYyxuLG51bGwsdHJ1ZSk7fTtlLmNvbnRhaW5zPWZ1bmN0aW9uKGMsbil7ay5zZXREb2N1bWVudChjKTsKcmV0dXJuIGsuY29udGFpbnMoYyxuKTt9O2UuZ2V0QXR0cmlidXRlPWZ1bmN0aW9uKG4sYyl7ay5zZXREb2N1bWVudChuKTtyZXR1cm4gay5nZXRBdHRyaWJ1dGUobixjKTt9O2UuaGFzQXR0cmlidXRlPWZ1bmN0aW9uKG4sYyl7ay5zZXREb2N1bWVudChuKTtyZXR1cm4gay5oYXNBdHRyaWJ1dGUobixjKTsKfTtlLm1hdGNoPWZ1bmN0aW9uKG4sYyl7aWYoIShuJiZjKSl7cmV0dXJuIGZhbHNlO31pZighY3x8Yz09PW4pe3JldHVybiB0cnVlO31rLnNldERvY3VtZW50KG4pO3JldHVybiBrLm1hdGNoTm9kZShuLGMpO307ZS5kZWZpbmVBdHRyaWJ1dGVHZXR0ZXI9ZnVuY3Rpb24oYyxuKXtrLmF0dHJpYnV0ZUdldHRlcnNbY109bjsKcmV0dXJuIHRoaXM7fTtlLmxvb2t1cEF0dHJpYnV0ZUdldHRlcj1mdW5jdGlvbihjKXtyZXR1cm4gay5hdHRyaWJ1dGVHZXR0ZXJzW2NdO307ZS5kZWZpbmVQc2V1ZG89ZnVuY3Rpb24oYyxuKXtrWyJwc2V1ZG86IitjXT1mdW5jdGlvbihwLG8pe3JldHVybiBuLmNhbGwocCxvKTsKfTtyZXR1cm4gdGhpczt9O2UubG9va3VwUHNldWRvPWZ1bmN0aW9uKGMpe3ZhciBuPWtbInBzZXVkbzoiK2NdO2lmKG4pe3JldHVybiBmdW5jdGlvbihvKXtyZXR1cm4gbi5jYWxsKHRoaXMsbyk7fTt9cmV0dXJuIG51bGw7fTtlLm92ZXJyaWRlPWZ1bmN0aW9uKG4sYyl7ay5vdmVycmlkZShuLGMpOwpyZXR1cm4gdGhpczt9O2UuaXNYTUw9ay5pc1hNTDtlLnVpZE9mPWZ1bmN0aW9uKGMpe3JldHVybiBrLmdldFVJREhUTUwoYyk7fTtpZighdGhpcy5TbGljayl7dGhpcy5TbGljaz1lO319KS5hcHBseSgodHlwZW9mIGV4cG9ydHMhPSJ1bmRlZmluZWQiKT9leHBvcnRzOnRoaXMpOwp2YXIgRWxlbWVudD1mdW5jdGlvbihiLGcpe3ZhciBoPUVsZW1lbnQuQ29uc3RydWN0b3JzW2JdO2lmKGgpe3JldHVybiBoKGcpO31pZih0eXBlb2YgYiE9InN0cmluZyIpe3JldHVybiBkb2N1bWVudC5pZChiKS5zZXQoZyk7fWlmKCFnKXtnPXt9O31pZighKC9eW1x3LV0rJC8pLnRlc3QoYikpe3ZhciBlPVNsaWNrLnBhcnNlKGIpLmV4cHJlc3Npb25zWzBdWzBdOwpiPShlLnRhZz09IioiKT8iZGl2IjplLnRhZztpZihlLmlkJiZnLmlkPT1udWxsKXtnLmlkPWUuaWQ7fXZhciBkPWUuYXR0cmlidXRlcztpZihkKXtmb3IodmFyIGEsZj0wLGM9ZC5sZW5ndGg7ZjxjO2YrKyl7YT1kW2ZdO2lmKGdbYS5rZXldIT1udWxsKXtjb250aW51ZTsKfWlmKGEudmFsdWUhPW51bGwmJmEub3BlcmF0b3I9PSI9Iil7Z1thLmtleV09YS52YWx1ZTt9ZWxzZXtpZighYS52YWx1ZSYmIWEub3BlcmF0b3Ipe2dbYS5rZXldPXRydWU7fX19fWlmKGUuY2xhc3NMaXN0JiZnWyJjbGFzcyJdPT1udWxsKXtnWyJjbGFzcyJdPWUuY2xhc3NMaXN0LmpvaW4oIiAiKTsKfX1yZXR1cm4gZG9jdW1lbnQubmV3RWxlbWVudChiLGcpO307aWYoQnJvd3Nlci5FbGVtZW50KXtFbGVtZW50LnByb3RvdHlwZT1Ccm93c2VyLkVsZW1lbnQucHJvdG90eXBlO0VsZW1lbnQucHJvdG90eXBlLl9maXJlRXZlbnQ9KGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwodGhpcyxiLGMpOwp9O30pKEVsZW1lbnQucHJvdG90eXBlLmZpcmVFdmVudCk7fW5ldyBUeXBlKCJFbGVtZW50IixFbGVtZW50KS5taXJyb3IoZnVuY3Rpb24oYSl7aWYoQXJyYXkucHJvdG90eXBlW2FdKXtyZXR1cm47fXZhciBiPXt9O2JbYV09ZnVuY3Rpb24oKXt2YXIgaD1bXSxlPWFyZ3VtZW50cyxqPXRydWU7CmZvcih2YXIgZz0wLGQ9dGhpcy5sZW5ndGg7ZzxkO2crKyl7dmFyIGY9dGhpc1tnXSxjPWhbZ109ZlthXS5hcHBseShmLGUpO2o9KGomJnR5cGVPZihjKT09ImVsZW1lbnQiKTt9cmV0dXJuKGopP25ldyBFbGVtZW50cyhoKTpoO307RWxlbWVudHMuaW1wbGVtZW50KGIpOwp9KTtpZighQnJvd3Nlci5FbGVtZW50KXtFbGVtZW50LnBhcmVudD1PYmplY3Q7RWxlbWVudC5Qcm90b3R5cGU9eyIkY29uc3RydWN0b3IiOkVsZW1lbnQsIiRmYW1pbHkiOkZ1bmN0aW9uLmZyb20oImVsZW1lbnQiKS5oaWRlKCl9O0VsZW1lbnQubWlycm9yKGZ1bmN0aW9uKGEsYil7RWxlbWVudC5Qcm90b3R5cGVbYV09YjsKfSk7fUVsZW1lbnQuQ29uc3RydWN0b3JzPXt9O0VsZW1lbnQuQ29uc3RydWN0b3JzPW5ldyBIYXNoO3ZhciBJRnJhbWU9bmV3IFR5cGUoIklGcmFtZSIsZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5saW5rKGFyZ3VtZW50cyx7cHJvcGVydGllczpUeXBlLmlzT2JqZWN0LGlmcmFtZTpmdW5jdGlvbihmKXtyZXR1cm4oZiE9bnVsbCk7Cn19KTt2YXIgYz1lLnByb3BlcnRpZXN8fHt9LGI7aWYoZS5pZnJhbWUpe2I9ZG9jdW1lbnQuaWQoZS5pZnJhbWUpO312YXIgZD1jLm9ubG9hZHx8ZnVuY3Rpb24oKXt9O2RlbGV0ZSBjLm9ubG9hZDtjLmlkPWMubmFtZT1bYy5pZCxjLm5hbWUsYj8oYi5pZHx8Yi5uYW1lKToiSUZyYW1lXyIrU3RyaW5nLnVuaXF1ZUlEKCldLnBpY2soKTsKYj1uZXcgRWxlbWVudChifHwiaWZyYW1lIixjKTt2YXIgYT1mdW5jdGlvbigpe2QuY2FsbChiLmNvbnRlbnRXaW5kb3cpO307aWYod2luZG93LmZyYW1lc1tjLmlkXSl7YSgpO31lbHNle2IuYWRkTGlzdGVuZXIoImxvYWQiLGEpO31yZXR1cm4gYjt9KTt2YXIgRWxlbWVudHM9dGhpcy5FbGVtZW50cz1mdW5jdGlvbihhKXtpZihhJiZhLmxlbmd0aCl7dmFyIGU9e30sZDsKZm9yKHZhciBjPTA7ZD1hW2MrK107KXt2YXIgYj1TbGljay51aWRPZihkKTtpZighZVtiXSl7ZVtiXT10cnVlO3RoaXMucHVzaChkKTt9fX19O0VsZW1lbnRzLnByb3RvdHlwZT17bGVuZ3RoOjB9O0VsZW1lbnRzLnBhcmVudD1BcnJheTtuZXcgVHlwZSgiRWxlbWVudHMiLEVsZW1lbnRzKS5pbXBsZW1lbnQoe2ZpbHRlcjpmdW5jdGlvbihhLGIpe2lmKCFhKXtyZXR1cm4gdGhpczsKfXJldHVybiBuZXcgRWxlbWVudHMoQXJyYXkuZmlsdGVyKHRoaXMsKHR5cGVPZihhKT09InN0cmluZyIpP2Z1bmN0aW9uKGMpe3JldHVybiBjLm1hdGNoKGEpO306YSxiKSk7fS5wcm90ZWN0KCkscHVzaDpmdW5jdGlvbigpe3ZhciBkPXRoaXMubGVuZ3RoO2Zvcih2YXIgYj0wLGE9YXJndW1lbnRzLmxlbmd0aDsKYjxhO2IrKyl7dmFyIGM9ZG9jdW1lbnQuaWQoYXJndW1lbnRzW2JdKTtpZihjKXt0aGlzW2QrK109Yzt9fXJldHVybih0aGlzLmxlbmd0aD1kKTt9LnByb3RlY3QoKSx1bnNoaWZ0OmZ1bmN0aW9uKCl7dmFyIGI9W107Zm9yKHZhciBjPTAsYT1hcmd1bWVudHMubGVuZ3RoOwpjPGE7YysrKXt2YXIgZD1kb2N1bWVudC5pZChhcmd1bWVudHNbY10pO2lmKGQpe2IucHVzaChkKTt9fXJldHVybiBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseSh0aGlzLGIpO30ucHJvdGVjdCgpLGNvbmNhdDpmdW5jdGlvbigpe3ZhciBiPW5ldyBFbGVtZW50cyh0aGlzKTsKZm9yKHZhciBjPTAsYT1hcmd1bWVudHMubGVuZ3RoO2M8YTtjKyspe3ZhciBkPWFyZ3VtZW50c1tjXTtpZihUeXBlLmlzRW51bWVyYWJsZShkKSl7Yi5hcHBlbmQoZCk7fWVsc2V7Yi5wdXNoKGQpO319cmV0dXJuIGI7fS5wcm90ZWN0KCksYXBwZW5kOmZ1bmN0aW9uKGMpe2Zvcih2YXIgYj0wLGE9Yy5sZW5ndGg7CmI8YTtiKyspe3RoaXMucHVzaChjW2JdKTt9cmV0dXJuIHRoaXM7fS5wcm90ZWN0KCksZW1wdHk6ZnVuY3Rpb24oKXt3aGlsZSh0aGlzLmxlbmd0aCl7ZGVsZXRlIHRoaXNbLS10aGlzLmxlbmd0aF07fXJldHVybiB0aGlzO30ucHJvdGVjdCgpfSk7RWxlbWVudHMuYWxpYXMoImV4dGVuZCIsImFwcGVuZCIpOwooZnVuY3Rpb24oKXt2YXIgZj1BcnJheS5wcm90b3R5cGUuc3BsaWNlLGE9eyIwIjowLCIxIjoxLGxlbmd0aDoyfTtmLmNhbGwoYSwxLDEpO2lmKGFbMV09PTEpe0VsZW1lbnRzLmltcGxlbWVudCgic3BsaWNlIixmdW5jdGlvbigpe3ZhciBnPXRoaXMubGVuZ3RoO3ZhciBlPWYuYXBwbHkodGhpcyxhcmd1bWVudHMpOwp3aGlsZShnPj10aGlzLmxlbmd0aCl7ZGVsZXRlIHRoaXNbZy0tXTt9cmV0dXJuIGU7fS5wcm90ZWN0KCkpO31BcnJheS5mb3JFYWNoTWV0aG9kKGZ1bmN0aW9uKGcsZSl7RWxlbWVudHMuaW1wbGVtZW50KGUsZyk7fSk7QXJyYXkubWlycm9yKEVsZW1lbnRzKTt2YXIgZDsKdHJ5e2Q9KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIjxpbnB1dCBuYW1lPXg+IikubmFtZT09IngiKTt9Y2F0Y2goYil7fXZhciBjPWZ1bmN0aW9uKGUpe3JldHVybigiIitlKS5yZXBsYWNlKC8mL2csIiZhbXA7IikucmVwbGFjZSgvIi9nLCImcXVvdDsiKTt9O0RvY3VtZW50LmltcGxlbWVudCh7bmV3RWxlbWVudDpmdW5jdGlvbihlLGcpe2lmKGcmJmcuY2hlY2tlZCE9bnVsbCl7Zy5kZWZhdWx0Q2hlY2tlZD1nLmNoZWNrZWQ7Cn1pZihkJiZnKXtlPSI8IitlO2lmKGcubmFtZSl7ZSs9JyBuYW1lPSInK2MoZy5uYW1lKSsnIic7fWlmKGcudHlwZSl7ZSs9JyB0eXBlPSInK2MoZy50eXBlKSsnIic7fWUrPSI+IjtkZWxldGUgZy5uYW1lO2RlbGV0ZSBnLnR5cGU7fXJldHVybiB0aGlzLmlkKHRoaXMuY3JlYXRlRWxlbWVudChlKSkuc2V0KGcpOwp9fSk7fSkoKTsoZnVuY3Rpb24oKXtTbGljay51aWRPZih3aW5kb3cpO1NsaWNrLnVpZE9mKGRvY3VtZW50KTtEb2N1bWVudC5pbXBsZW1lbnQoe25ld1RleHROb2RlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNyZWF0ZVRleHROb2RlKGUpO30sZ2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpczsKfSxnZXRXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aW5kb3c7fSxpZDooZnVuY3Rpb24oKXt2YXIgZT17c3RyaW5nOmZ1bmN0aW9uKEUsRCxsKXtFPVNsaWNrLmZpbmQobCwiIyIrRS5yZXBsYWNlKC8oXFcpL2csIlxcJDEiKSk7cmV0dXJuKEUpP2UuZWxlbWVudChFLEQpOm51bGw7Cn0sZWxlbWVudDpmdW5jdGlvbihELEUpe1NsaWNrLnVpZE9mKEQpO2lmKCFFJiYhRC4kZmFtaWx5JiYhKC9eKD86b2JqZWN0fGVtYmVkKSQvaSkudGVzdChELnRhZ05hbWUpKXt2YXIgbD1ELmZpcmVFdmVudDtELl9maXJlRXZlbnQ9ZnVuY3Rpb24oRixHKXtyZXR1cm4gbChGLEcpOwp9O09iamVjdC5hcHBlbmQoRCxFbGVtZW50LlByb3RvdHlwZSk7fXJldHVybiBEO30sb2JqZWN0OmZ1bmN0aW9uKEQsRSxsKXtpZihELnRvRWxlbWVudCl7cmV0dXJuIGUuZWxlbWVudChELnRvRWxlbWVudChsKSxFKTt9cmV0dXJuIG51bGw7fX07ZS50ZXh0bm9kZT1lLndoaXRlc3BhY2U9ZS53aW5kb3c9ZS5kb2N1bWVudD1mdW5jdGlvbihsKXtyZXR1cm4gbDsKfTtyZXR1cm4gZnVuY3Rpb24oRCxGLEUpe2lmKEQmJkQuJGZhbWlseSYmRC51bmlxdWVOdW1iZXIpe3JldHVybiBEO312YXIgbD10eXBlT2YoRCk7cmV0dXJuKGVbbF0pP2VbbF0oRCxGLEV8fGRvY3VtZW50KTpudWxsO307fSkoKX0pO2lmKHdpbmRvdy4kPT1udWxsKXtXaW5kb3cuaW1wbGVtZW50KCIkIixmdW5jdGlvbihlLGwpe3JldHVybiBkb2N1bWVudC5pZChlLGwsdGhpcy5kb2N1bWVudCk7Cn0pO31XaW5kb3cuaW1wbGVtZW50KHtnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvY3VtZW50O30sZ2V0V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM7fX0pO1tEb2N1bWVudCxFbGVtZW50XS5pbnZva2UoImltcGxlbWVudCIse2dldEVsZW1lbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBTbGljay5zZWFyY2godGhpcyxlLG5ldyBFbGVtZW50cyk7Cn0sZ2V0RWxlbWVudDpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLGUpKTt9fSk7dmFyIG09e2NvbnRhaW5zOmZ1bmN0aW9uKGUpe3JldHVybiBTbGljay5jb250YWlucyh0aGlzLGUpO319O2lmKCFkb2N1bWVudC5jb250YWlucyl7RG9jdW1lbnQuaW1wbGVtZW50KG0pOwp9aWYoIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLmNvbnRhaW5zKXtFbGVtZW50LmltcGxlbWVudChtKTt9RWxlbWVudC5pbXBsZW1lbnQoImhhc0NoaWxkIixmdW5jdGlvbihlKXtyZXR1cm4gdGhpcyE9PWUmJnRoaXMuY29udGFpbnMoZSk7fSk7KGZ1bmN0aW9uKGwsRSxlKXt0aGlzLlNlbGVjdG9ycz17fTsKdmFyIEY9dGhpcy5TZWxlY3RvcnMuUHNldWRvPW5ldyBIYXNoKCk7dmFyIEQ9ZnVuY3Rpb24oKXtmb3IodmFyIEcgaW4gRil7aWYoRi5oYXNPd25Qcm9wZXJ0eShHKSl7U2xpY2suZGVmaW5lUHNldWRvKEcsRltHXSk7ZGVsZXRlIEZbR107fX19O1NsaWNrLnNlYXJjaD1mdW5jdGlvbihILEksRyl7RCgpOwpyZXR1cm4gbC5jYWxsKHRoaXMsSCxJLEcpO307U2xpY2suZmluZD1mdW5jdGlvbihHLEgpe0QoKTtyZXR1cm4gRS5jYWxsKHRoaXMsRyxIKTt9O1NsaWNrLm1hdGNoPWZ1bmN0aW9uKEgsRyl7RCgpO3JldHVybiBlLmNhbGwodGhpcyxILEcpO307fSkoU2xpY2suc2VhcmNoLFNsaWNrLmZpbmQsU2xpY2subWF0Y2gpOwp2YXIgcj1mdW5jdGlvbihFLEQpe2lmKCFFKXtyZXR1cm4gRDt9RT1PYmplY3QuY2xvbmUoU2xpY2sucGFyc2UoRSkpO3ZhciBsPUUuZXhwcmVzc2lvbnM7Zm9yKHZhciBlPWwubGVuZ3RoO2UtLTspe2xbZV1bMF0uY29tYmluYXRvcj1EO31yZXR1cm4gRTt9O09iamVjdC5mb3JFYWNoKHtnZXROZXh0OiJ+IixnZXRQcmV2aW91czoiIX4iLGdldFBhcmVudDoiISJ9LGZ1bmN0aW9uKGUsbCl7RWxlbWVudC5pbXBsZW1lbnQobCxmdW5jdGlvbihEKXtyZXR1cm4gdGhpcy5nZXRFbGVtZW50KHIoRCxlKSk7Cn0pO30pO09iamVjdC5mb3JFYWNoKHtnZXRBbGxOZXh0OiJ+IixnZXRBbGxQcmV2aW91czoiIX4iLGdldFNpYmxpbmdzOiJ+fiIsZ2V0Q2hpbGRyZW46Ij4iLGdldFBhcmVudHM6IiEifSxmdW5jdGlvbihlLGwpe0VsZW1lbnQuaW1wbGVtZW50KGwsZnVuY3Rpb24oRCl7cmV0dXJuIHRoaXMuZ2V0RWxlbWVudHMocihELGUpKTsKfSk7fSk7RWxlbWVudC5pbXBsZW1lbnQoe2dldEZpcnN0OmZ1bmN0aW9uKGUpe3JldHVybiBkb2N1bWVudC5pZChTbGljay5zZWFyY2godGhpcyxyKGUsIj4iKSlbMF0pO30sZ2V0TGFzdDpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suc2VhcmNoKHRoaXMscihlLCI+IikpLmdldExhc3QoKSk7Cn0sZ2V0V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC53aW5kb3c7fSxnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnQ7fSxnZXRFbGVtZW50QnlJZDpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLCIjIisoIiIrZSkucmVwbGFjZSgvKFxXKS9nLCJcXCQxIikpKTsKfSxtYXRjaDpmdW5jdGlvbihlKXtyZXR1cm4gIWV8fFNsaWNrLm1hdGNoKHRoaXMsZSk7fX0pO2lmKHdpbmRvdy4kJD09bnVsbCl7V2luZG93LmltcGxlbWVudCgiJCQiLGZ1bmN0aW9uKGUpe3ZhciBIPW5ldyBFbGVtZW50cztpZihhcmd1bWVudHMubGVuZ3RoPT0xJiZ0eXBlb2YgZT09InN0cmluZyIpe3JldHVybiBTbGljay5zZWFyY2godGhpcy5kb2N1bWVudCxlLEgpOwp9dmFyIEU9QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpO2Zvcih2YXIgRj0wLEQ9RS5sZW5ndGg7RjxEO0YrKyl7dmFyIEc9RVtGXTtzd2l0Y2godHlwZU9mKEcpKXtjYXNlImVsZW1lbnQiOkgucHVzaChHKTticmVhaztjYXNlInN0cmluZyI6U2xpY2suc2VhcmNoKHRoaXMuZG9jdW1lbnQsRyxIKTsKfX1yZXR1cm4gSDt9KTt9aWYod2luZG93LiQkPT1udWxsKXtXaW5kb3cuaW1wbGVtZW50KCIkJCIsZnVuY3Rpb24oZSl7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7aWYodHlwZW9mIGU9PSJzdHJpbmciKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMuZG9jdW1lbnQsZSxuZXcgRWxlbWVudHMpOwp9ZWxzZXtpZihUeXBlLmlzRW51bWVyYWJsZShlKSl7cmV0dXJuIG5ldyBFbGVtZW50cyhlKTt9fX1yZXR1cm4gbmV3IEVsZW1lbnRzKGFyZ3VtZW50cyk7fSk7fXZhciB3PXtiZWZvcmU6ZnVuY3Rpb24obCxlKXt2YXIgRD1lLnBhcmVudE5vZGU7aWYoRCl7RC5pbnNlcnRCZWZvcmUobCxlKTsKfX0sYWZ0ZXI6ZnVuY3Rpb24obCxlKXt2YXIgRD1lLnBhcmVudE5vZGU7aWYoRCl7RC5pbnNlcnRCZWZvcmUobCxlLm5leHRTaWJsaW5nKTt9fSxib3R0b206ZnVuY3Rpb24obCxlKXtlLmFwcGVuZENoaWxkKGwpO30sdG9wOmZ1bmN0aW9uKGwsZSl7ZS5pbnNlcnRCZWZvcmUobCxlLmZpcnN0Q2hpbGQpOwp9fTt3Lmluc2lkZT13LmJvdHRvbTtPYmplY3QuZWFjaCh3LGZ1bmN0aW9uKGwsRCl7RD1ELmNhcGl0YWxpemUoKTt2YXIgZT17fTtlWyJpbmplY3QiK0RdPWZ1bmN0aW9uKEUpe2wodGhpcyxkb2N1bWVudC5pZChFLHRydWUpKTtyZXR1cm4gdGhpczt9O2VbImdyYWIiK0RdPWZ1bmN0aW9uKEUpe2woZG9jdW1lbnQuaWQoRSx0cnVlKSx0aGlzKTsKcmV0dXJuIHRoaXM7fTtFbGVtZW50LmltcGxlbWVudChlKTt9KTt2YXIgaj17fSxkPXt9O3ZhciBrPXt9O0FycmF5LmZvckVhY2goWyJ0eXBlIiwidmFsdWUiLCJkZWZhdWx0VmFsdWUiLCJhY2Nlc3NLZXkiLCJjZWxsUGFkZGluZyIsImNlbGxTcGFjaW5nIiwiY29sU3BhbiIsImZyYW1lQm9yZGVyIiwicm93U3BhbiIsInRhYkluZGV4IiwidXNlTWFwIl0sZnVuY3Rpb24oZSl7a1tlLnRvTG93ZXJDYXNlKCldPWU7Cn0pO2suaHRtbD0iaW5uZXJIVE1MIjtrLnRleHQ9KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnRleHRDb250ZW50PT1udWxsKT8iaW5uZXJUZXh0IjoidGV4dENvbnRlbnQiO09iamVjdC5mb3JFYWNoKGssZnVuY3Rpb24obCxlKXtkW2VdPWZ1bmN0aW9uKEQsRSl7RFtsXT1FOwp9O2pbZV09ZnVuY3Rpb24oRCl7cmV0dXJuIERbbF07fTt9KTt2YXIgeD1bImNvbXBhY3QiLCJub3dyYXAiLCJpc21hcCIsImRlY2xhcmUiLCJub3NoYWRlIiwiY2hlY2tlZCIsImRpc2FibGVkIiwicmVhZE9ubHkiLCJtdWx0aXBsZSIsInNlbGVjdGVkIiwibm9yZXNpemUiLCJkZWZlciIsImRlZmF1bHRDaGVja2VkIiwiYXV0b2ZvY3VzIiwiY29udHJvbHMiLCJhdXRvcGxheSIsImxvb3AiXTsKdmFyIGg9e307QXJyYXkuZm9yRWFjaCh4LGZ1bmN0aW9uKGUpe3ZhciBsPWUudG9Mb3dlckNhc2UoKTtoW2xdPWU7ZFtsXT1mdW5jdGlvbihELEUpe0RbZV09ISFFO307altsXT1mdW5jdGlvbihEKXtyZXR1cm4gISFEW2VdO307fSk7T2JqZWN0LmFwcGVuZChkLHsiY2xhc3MiOmZ1bmN0aW9uKGUsbCl7KCJjbGFzc05hbWUiIGluIGUpP2UuY2xhc3NOYW1lPShsfHwiIik6ZS5zZXRBdHRyaWJ1dGUoImNsYXNzIixsKTsKfSwiZm9yIjpmdW5jdGlvbihlLGwpeygiaHRtbEZvciIgaW4gZSk/ZS5odG1sRm9yPWw6ZS5zZXRBdHRyaWJ1dGUoImZvciIsbCk7fSxzdHlsZTpmdW5jdGlvbihlLGwpeyhlLnN0eWxlKT9lLnN0eWxlLmNzc1RleHQ9bDplLnNldEF0dHJpYnV0ZSgic3R5bGUiLGwpOwp9LHZhbHVlOmZ1bmN0aW9uKGUsbCl7ZS52YWx1ZT0obCE9bnVsbCk/bDoiIjt9fSk7alsiY2xhc3MiXT1mdW5jdGlvbihlKXtyZXR1cm4oImNsYXNzTmFtZSIgaW4gZSk/ZS5jbGFzc05hbWV8fG51bGw6ZS5nZXRBdHRyaWJ1dGUoImNsYXNzIik7fTt2YXIgZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKdHJ5e2YudHlwZT0iYnV0dG9uIjt9Y2F0Y2goeil7fWlmKGYudHlwZSE9ImJ1dHRvbiIpe2QudHlwZT1mdW5jdGlvbihlLGwpe2Uuc2V0QXR0cmlidXRlKCJ0eXBlIixsKTt9O31mPW51bGw7dmFyIHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtwLnZhbHVlPSJ0IjsKcC50eXBlPSJzdWJtaXQiO2lmKHAudmFsdWUhPSJ0Iil7ZC50eXBlPWZ1bmN0aW9uKGwsZSl7dmFyIEQ9bC52YWx1ZTtsLnR5cGU9ZTtsLnZhbHVlPUQ7fTt9cD1udWxsO3ZhciBxPShmdW5jdGlvbihlKXtlLnJhbmRvbT0iYXR0cmlidXRlIjtyZXR1cm4oZS5nZXRBdHRyaWJ1dGUoInJhbmRvbSIpPT0iYXR0cmlidXRlIik7Cn0pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtFbGVtZW50LmltcGxlbWVudCh7c2V0UHJvcGVydHk6ZnVuY3Rpb24obCxEKXt2YXIgRT1kW2wudG9Mb3dlckNhc2UoKV07aWYoRSl7RSh0aGlzLEQpO31lbHNle2lmKHEpe3ZhciBlPXRoaXMucmV0cmlldmUoIiRhdHRyaWJ1dGVXaGl0ZUxpc3QiLHt9KTsKfWlmKEQ9PW51bGwpe3RoaXMucmVtb3ZlQXR0cmlidXRlKGwpO2lmKHEpe2RlbGV0ZSBlW2xdO319ZWxzZXt0aGlzLnNldEF0dHJpYnV0ZShsLCIiK0QpO2lmKHEpe2VbbF09dHJ1ZTt9fX1yZXR1cm4gdGhpczt9LHNldFByb3BlcnRpZXM6ZnVuY3Rpb24oZSl7Zm9yKHZhciBsIGluIGUpe3RoaXMuc2V0UHJvcGVydHkobCxlW2xdKTsKfXJldHVybiB0aGlzO30sZ2V0UHJvcGVydHk6ZnVuY3Rpb24oRil7dmFyIEQ9altGLnRvTG93ZXJDYXNlKCldO2lmKEQpe3JldHVybiBEKHRoaXMpO31pZihxKXt2YXIgbD10aGlzLmdldEF0dHJpYnV0ZU5vZGUoRiksRT10aGlzLnJldHJpZXZlKCIkYXR0cmlidXRlV2hpdGVMaXN0Iix7fSk7CmlmKCFsKXtyZXR1cm4gbnVsbDt9aWYobC5leHBhbmRvJiYhRVtGXSl7dmFyIEc9dGhpcy5vdXRlckhUTUw7aWYoRy5zdWJzdHIoMCxHLnNlYXJjaCgvXC8/WyciXT8+KD8hW148XSo8WyciXSkvKSkuaW5kZXhPZihGKTwwKXtyZXR1cm4gbnVsbDt9RVtGXT10cnVlO319dmFyIGU9U2xpY2suZ2V0QXR0cmlidXRlKHRoaXMsRik7CnJldHVybighZSYmIVNsaWNrLmhhc0F0dHJpYnV0ZSh0aGlzLEYpKT9udWxsOmU7fSxnZXRQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkuZnJvbShhcmd1bWVudHMpO3JldHVybiBlLm1hcCh0aGlzLmdldFByb3BlcnR5LHRoaXMpLmFzc29jaWF0ZShlKTsKfSxyZW1vdmVQcm9wZXJ0eTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZXRQcm9wZXJ0eShlLG51bGwpO30scmVtb3ZlUHJvcGVydGllczpmdW5jdGlvbigpe0FycmF5LmVhY2goYXJndW1lbnRzLHRoaXMucmVtb3ZlUHJvcGVydHksdGhpcyk7cmV0dXJuIHRoaXM7fSxzZXQ6ZnVuY3Rpb24oRCxsKXt2YXIgZT1FbGVtZW50LlByb3BlcnRpZXNbRF07CihlJiZlLnNldCk/ZS5zZXQuY2FsbCh0aGlzLGwpOnRoaXMuc2V0UHJvcGVydHkoRCxsKTt9Lm92ZXJsb2FkU2V0dGVyKCksZ2V0OmZ1bmN0aW9uKGwpe3ZhciBlPUVsZW1lbnQuUHJvcGVydGllc1tsXTtyZXR1cm4oZSYmZS5nZXQpP2UuZ2V0LmFwcGx5KHRoaXMpOnRoaXMuZ2V0UHJvcGVydHkobCk7Cn0ub3ZlcmxvYWRHZXR0ZXIoKSxlcmFzZTpmdW5jdGlvbihsKXt2YXIgZT1FbGVtZW50LlByb3BlcnRpZXNbbF07KGUmJmUuZXJhc2UpP2UuZXJhc2UuYXBwbHkodGhpcyk6dGhpcy5yZW1vdmVQcm9wZXJ0eShsKTtyZXR1cm4gdGhpczt9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNsYXNzTmFtZS5jbGVhbigpLmNvbnRhaW5zKGUsIiAiKTsKfSxhZGRDbGFzczpmdW5jdGlvbihlKXtpZighdGhpcy5oYXNDbGFzcyhlKSl7dGhpcy5jbGFzc05hbWU9KHRoaXMuY2xhc3NOYW1lKyIgIitlKS5jbGVhbigpO31yZXR1cm4gdGhpczt9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUpe3RoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgiKF58XFxzKSIrZSsiKD86XFxzfCQpIiksIiQxIik7CnJldHVybiB0aGlzO30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSxsKXtpZihsPT1udWxsKXtsPSF0aGlzLmhhc0NsYXNzKGUpO31yZXR1cm4obCk/dGhpcy5hZGRDbGFzcyhlKTp0aGlzLnJlbW92ZUNsYXNzKGUpO30sYWRvcHQ6ZnVuY3Rpb24oKXt2YXIgRT10aGlzLGUsRz1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cyksRj1HLmxlbmd0aDsKaWYoRj4xKXtFPWU9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO31mb3IodmFyIEQ9MDtEPEY7RCsrKXt2YXIgbD1kb2N1bWVudC5pZChHW0RdLHRydWUpO2lmKGwpe0UuYXBwZW5kQ2hpbGQobCk7fX1pZihlKXt0aGlzLmFwcGVuZENoaWxkKGUpO31yZXR1cm4gdGhpczsKfSxhcHBlbmRUZXh0OmZ1bmN0aW9uKGwsZSl7cmV0dXJuIHRoaXMuZ3JhYih0aGlzLmdldERvY3VtZW50KCkubmV3VGV4dE5vZGUobCksZSk7fSxncmFiOmZ1bmN0aW9uKGwsZSl7d1tlfHwiYm90dG9tIl0oZG9jdW1lbnQuaWQobCx0cnVlKSx0aGlzKTtyZXR1cm4gdGhpczsKfSxpbmplY3Q6ZnVuY3Rpb24obCxlKXt3W2V8fCJib3R0b20iXSh0aGlzLGRvY3VtZW50LmlkKGwsdHJ1ZSkpO3JldHVybiB0aGlzO30scmVwbGFjZXM6ZnVuY3Rpb24oZSl7ZT1kb2N1bWVudC5pZChlLHRydWUpO2UucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcyxlKTsKcmV0dXJuIHRoaXM7fSx3cmFwczpmdW5jdGlvbihsLGUpe2w9ZG9jdW1lbnQuaWQobCx0cnVlKTtyZXR1cm4gdGhpcy5yZXBsYWNlcyhsKS5ncmFiKGwsZSk7fSxnZXRTZWxlY3RlZDpmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWRJbmRleDtyZXR1cm4gbmV3IEVsZW1lbnRzKEFycmF5LmZyb20odGhpcy5vcHRpb25zKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VsZWN0ZWQ7Cn0pKTt9LHRvUXVlcnlTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT1bXTt0aGlzLmdldEVsZW1lbnRzKCJpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSIpLmVhY2goZnVuY3Rpb24oRCl7dmFyIGw9RC50eXBlO2lmKCFELm5hbWV8fEQuZGlzYWJsZWR8fGw9PSJzdWJtaXQifHxsPT0icmVzZXQifHxsPT0iZmlsZSJ8fGw9PSJpbWFnZSIpe3JldHVybjsKfXZhciBFPShELmdldCgidGFnIik9PSJzZWxlY3QiKT9ELmdldFNlbGVjdGVkKCkubWFwKGZ1bmN0aW9uKEYpe3JldHVybiBkb2N1bWVudC5pZChGKS5nZXQoInZhbHVlIik7fSk6KChsPT0icmFkaW8ifHxsPT0iY2hlY2tib3giKSYmIUQuY2hlY2tlZCk/bnVsbDpELmdldCgidmFsdWUiKTsKQXJyYXkuZnJvbShFKS5lYWNoKGZ1bmN0aW9uKEYpe2lmKHR5cGVvZiBGIT0idW5kZWZpbmVkIil7ZS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChELm5hbWUpKyI9IitlbmNvZGVVUklDb21wb25lbnQoRikpO319KTt9KTtyZXR1cm4gZS5qb2luKCImIik7fX0pO3ZhciBpPXt9LEE9e307CnZhciBCPWZ1bmN0aW9uKGUpe3JldHVybihBW2VdfHwoQVtlXT17fSkpO307dmFyIHY9ZnVuY3Rpb24obCl7dmFyIGU9bC51bmlxdWVOdW1iZXI7aWYobC5yZW1vdmVFdmVudHMpe2wucmVtb3ZlRXZlbnRzKCk7fWlmKGwuY2xlYXJBdHRyaWJ1dGVzKXtsLmNsZWFyQXR0cmlidXRlcygpOwp9aWYoZSE9bnVsbCl7ZGVsZXRlIGlbZV07ZGVsZXRlIEFbZV07fXJldHVybiBsO307dmFyIEM9e2lucHV0OiJjaGVja2VkIixvcHRpb246InNlbGVjdGVkIix0ZXh0YXJlYToidmFsdWUifTtFbGVtZW50LmltcGxlbWVudCh7ZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXYodGhpcykuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTsKQXJyYXkuZWFjaChlLHYpO0VsZW1lbnQuZGlzcG9zZSh0aGlzKTtyZXR1cm4gbnVsbDt9LGVtcHR5OmZ1bmN0aW9uKCl7QXJyYXkuZnJvbSh0aGlzLmNoaWxkTm9kZXMpLmVhY2goRWxlbWVudC5kaXNwb3NlKTtyZXR1cm4gdGhpczt9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5wYXJlbnROb2RlKT90aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk6dGhpczsKfSxjbG9uZTpmdW5jdGlvbihHLEUpe0c9RyE9PWZhbHNlO3ZhciBMPXRoaXMuY2xvbmVOb2RlKEcpLEQ9W0xdLEY9W3RoaXNdLEo7aWYoRyl7RC5hcHBlbmQoQXJyYXkuZnJvbShMLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpKTtGLmFwcGVuZChBcnJheS5mcm9tKHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSkpOwp9Zm9yKEo9RC5sZW5ndGg7Si0tOyl7dmFyIEg9RFtKXSxLPUZbSl07aWYoIUUpe0gucmVtb3ZlQXR0cmlidXRlKCJpZCIpO31pZihILmNsZWFyQXR0cmlidXRlcyl7SC5jbGVhckF0dHJpYnV0ZXMoKTtILm1lcmdlQXR0cmlidXRlcyhLKTtILnJlbW92ZUF0dHJpYnV0ZSgidW5pcXVlTnVtYmVyIik7CmlmKEgub3B0aW9ucyl7dmFyIE89SC5vcHRpb25zLGU9Sy5vcHRpb25zO2Zvcih2YXIgST1PLmxlbmd0aDtJLS07KXtPW0ldLnNlbGVjdGVkPWVbSV0uc2VsZWN0ZWQ7fX19dmFyIGw9Q1tLLnRhZ05hbWUudG9Mb3dlckNhc2UoKV07aWYobCYmS1tsXSl7SFtsXT1LW2xdOwp9fWlmKEJyb3dzZXIuaWUpe3ZhciBNPUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm9iamVjdCIpLE49dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZSgib2JqZWN0Iik7Zm9yKEo9TS5sZW5ndGg7Si0tOyl7TVtKXS5vdXRlckhUTUw9TltKXS5vdXRlckhUTUw7fX1yZXR1cm4gZG9jdW1lbnQuaWQoTCk7Cn19KTtbRWxlbWVudCxXaW5kb3csRG9jdW1lbnRdLmludm9rZSgiaW1wbGVtZW50Iix7YWRkTGlzdGVuZXI6ZnVuY3Rpb24oRSxEKXtpZihFPT0idW5sb2FkIil7dmFyIGU9RCxsPXRoaXM7RD1mdW5jdGlvbigpe2wucmVtb3ZlTGlzdGVuZXIoInVubG9hZCIsRCk7ZSgpOwp9O31lbHNle2lbU2xpY2sudWlkT2YodGhpcyldPXRoaXM7fWlmKHRoaXMuYWRkRXZlbnRMaXN0ZW5lcil7dGhpcy5hZGRFdmVudExpc3RlbmVyKEUsRCwhIWFyZ3VtZW50c1syXSk7fWVsc2V7dGhpcy5hdHRhY2hFdmVudCgib24iK0UsRCk7fXJldHVybiB0aGlzO30scmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24obCxlKXtpZih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIpe3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihsLGUsISFhcmd1bWVudHNbMl0pOwp9ZWxzZXt0aGlzLmRldGFjaEV2ZW50KCJvbiIrbCxlKTt9cmV0dXJuIHRoaXM7fSxyZXRyaWV2ZTpmdW5jdGlvbihsLGUpe3ZhciBFPUIoU2xpY2sudWlkT2YodGhpcykpLEQ9RVtsXTtpZihlIT1udWxsJiZEPT1udWxsKXtEPUVbbF09ZTt9cmV0dXJuIEQhPW51bGw/RDpudWxsOwp9LHN0b3JlOmZ1bmN0aW9uKGwsZSl7dmFyIEQ9QihTbGljay51aWRPZih0aGlzKSk7RFtsXT1lO3JldHVybiB0aGlzO30sZWxpbWluYXRlOmZ1bmN0aW9uKGUpe3ZhciBsPUIoU2xpY2sudWlkT2YodGhpcykpO2RlbGV0ZSBsW2VdO3JldHVybiB0aGlzO319KTtpZih3aW5kb3cuYXR0YWNoRXZlbnQmJiF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7d2luZG93LmFkZExpc3RlbmVyKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7T2JqZWN0LmVhY2goaSx2KTsKaWYod2luZG93LkNvbGxlY3RHYXJiYWdlKXtDb2xsZWN0R2FyYmFnZSgpO319KTt9RWxlbWVudC5Qcm9wZXJ0aWVzPXt9O0VsZW1lbnQuUHJvcGVydGllcz1uZXcgSGFzaDtFbGVtZW50LlByb3BlcnRpZXMuc3R5bGU9e3NldDpmdW5jdGlvbihlKXt0aGlzLnN0eWxlLmNzc1RleHQ9ZTsKfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHlsZS5jc3NUZXh0O30sZXJhc2U6ZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmNzc1RleHQ9IiI7fX07RWxlbWVudC5Qcm9wZXJ0aWVzLnRhZz17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFnTmFtZS50b0xvd2VyQ2FzZSgpOwp9fTtFbGVtZW50LlByb3BlcnRpZXMuaHRtbD17c2V0OmZ1bmN0aW9uKGUpe2lmKGU9PW51bGwpe2U9IiI7fWVsc2V7aWYodHlwZU9mKGUpPT0iYXJyYXkiKXtlPWUuam9pbigiIik7fX10aGlzLmlubmVySFRNTD1lO30sZXJhc2U6ZnVuY3Rpb24oKXt0aGlzLmlubmVySFRNTD0iIjsKfX07dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dC5pbm5lckhUTUw9IjxuYXY+PC9uYXY+Ijt2YXIgYT0odC5jaGlsZE5vZGVzLmxlbmd0aD09MSk7aWYoIWEpe3ZhciBzPSJhYmJyIGFydGljbGUgYXNpZGUgYXVkaW8gY2FudmFzIGRhdGFsaXN0IGRldGFpbHMgZmlnY2FwdGlvbiBmaWd1cmUgZm9vdGVyIGhlYWRlciBoZ3JvdXAgbWFyayBtZXRlciBuYXYgb3V0cHV0IHByb2dyZXNzIHNlY3Rpb24gc3VtbWFyeSB0aW1lIHZpZGVvIi5zcGxpdCgiICIpLGI9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLHU9cy5sZW5ndGg7CndoaWxlKHUtLSl7Yi5jcmVhdGVFbGVtZW50KHNbdV0pO319dD1udWxsO3ZhciBnPUZ1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpO2UuaW5uZXJIVE1MPSI8dHI+PHRkPjwvdGQ+PC90cj4iO3JldHVybiB0cnVlOwp9KTt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpLG89Ijx0ZD48L3RkPiI7Yy5pbm5lckhUTUw9bzt2YXIgeT0oYy5pbm5lckhUTUw9PW8pO2M9bnVsbDtpZighZ3x8IXl8fCFhKXtFbGVtZW50LlByb3BlcnRpZXMuaHRtbC5zZXQ9KGZ1bmN0aW9uKGwpe3ZhciBlPXt0YWJsZTpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sc2VsZWN0OlsxLCI8c2VsZWN0PiIsIjwvc2VsZWN0PiJdLHRib2R5OlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0cjpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il19OwplLnRoZWFkPWUudGZvb3Q9ZS50Ym9keTtyZXR1cm4gZnVuY3Rpb24oRCl7dmFyIEU9ZVt0aGlzLmdldCgidGFnIildO2lmKCFFJiYhYSl7RT1bMCwiIiwiIl07fWlmKCFFKXtyZXR1cm4gbC5jYWxsKHRoaXMsRCk7fXZhciBIPUVbMF0sRz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxGPUc7CmlmKCFhKXtiLmFwcGVuZENoaWxkKEcpO31HLmlubmVySFRNTD1bRVsxXSxELEVbMl1dLmZsYXR0ZW4oKS5qb2luKCIiKTt3aGlsZShILS0pe0Y9Ri5maXJzdENoaWxkO310aGlzLmVtcHR5KCkuYWRvcHQoRi5jaGlsZE5vZGVzKTtpZighYSl7Yi5yZW1vdmVDaGlsZChHKTsKfUc9bnVsbDt9O30pKEVsZW1lbnQuUHJvcGVydGllcy5odG1sLnNldCk7fXZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTtuLmlubmVySFRNTD0iPHNlbGVjdD48b3B0aW9uPnM8L29wdGlvbj48L3NlbGVjdD4iO2lmKG4uZmlyc3RDaGlsZC52YWx1ZSE9InMiKXtFbGVtZW50LlByb3BlcnRpZXMudmFsdWU9e3NldDpmdW5jdGlvbihHKXt2YXIgbD10aGlzLmdldCgidGFnIik7CmlmKGwhPSJzZWxlY3QiKXtyZXR1cm4gdGhpcy5zZXRQcm9wZXJ0eSgidmFsdWUiLEcpO312YXIgRD10aGlzLmdldEVsZW1lbnRzKCJvcHRpb24iKTtmb3IodmFyIEU9MDtFPEQubGVuZ3RoO0UrKyl7dmFyIEY9RFtFXSxlPUYuZ2V0QXR0cmlidXRlTm9kZSgidmFsdWUiKSxIPShlJiZlLnNwZWNpZmllZCk/Ri52YWx1ZTpGLmdldCgidGV4dCIpOwppZihIPT1HKXtyZXR1cm4gRi5zZWxlY3RlZD10cnVlO319fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgRD10aGlzLGw9RC5nZXQoInRhZyIpO2lmKGwhPSJzZWxlY3QiJiZsIT0ib3B0aW9uIil7cmV0dXJuIHRoaXMuZ2V0UHJvcGVydHkoInZhbHVlIik7fWlmKGw9PSJzZWxlY3QiJiYhKEQ9RC5nZXRTZWxlY3RlZCgpWzBdKSl7cmV0dXJuIiI7Cn12YXIgZT1ELmdldEF0dHJpYnV0ZU5vZGUoInZhbHVlIik7cmV0dXJuKGUmJmUuc3BlY2lmaWVkKT9ELnZhbHVlOkQuZ2V0KCJ0ZXh0Iik7fX07fW49bnVsbDtpZihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpKXtFbGVtZW50LlByb3BlcnRpZXMuaWQ9e3NldDpmdW5jdGlvbihlKXt0aGlzLmlkPXRoaXMuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS52YWx1ZT1lOwp9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkfHxudWxsO30sZXJhc2U6ZnVuY3Rpb24oKXt0aGlzLmlkPXRoaXMuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS52YWx1ZT0iIjt9fTt9fSkoKTsoZnVuY3Rpb24oKXt2YXIgaT1kb2N1bWVudC5odG1sO3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpkLnN0eWxlLmNvbG9yPSJyZWQiO2Quc3R5bGUuY29sb3I9bnVsbDt2YXIgYz1kLnN0eWxlLmNvbG9yPT0icmVkIjtkPW51bGw7RWxlbWVudC5Qcm9wZXJ0aWVzLnN0eWxlcz17c2V0OmZ1bmN0aW9uKGspe3RoaXMuc2V0U3R5bGVzKGspO319O3ZhciBoPShpLnN0eWxlLm9wYWNpdHkhPW51bGwpLGU9KGkuc3R5bGUuZmlsdGVyIT1udWxsKSxqPS9hbHBoYVwob3BhY2l0eT0oW1xkLl0rKVwpL2k7CnZhciBhPWZ1bmN0aW9uKGwsayl7bC5zdG9yZSgiJG9wYWNpdHkiLGspO2wuc3R5bGUudmlzaWJpbGl0eT1rPjB8fGs9PW51bGw/InZpc2libGUiOiJoaWRkZW4iO307dmFyIGY9KGg/ZnVuY3Rpb24obCxrKXtsLnN0eWxlLm9wYWNpdHk9azt9OihlP2Z1bmN0aW9uKGwsayl7dmFyIG49bC5zdHlsZTsKaWYoIWwuY3VycmVudFN0eWxlfHwhbC5jdXJyZW50U3R5bGUuaGFzTGF5b3V0KXtuLnpvb209MTt9aWYoaz09bnVsbHx8az09MSl7az0iIjt9ZWxzZXtrPSJhbHBoYShvcGFjaXR5PSIrKGsqMTAwKS5saW1pdCgwLDEwMCkucm91bmQoKSsiKSI7fXZhciBtPW4uZmlsdGVyfHxsLmdldENvbXB1dGVkU3R5bGUoImZpbHRlciIpfHwiIjsKbi5maWx0ZXI9ai50ZXN0KG0pP20ucmVwbGFjZShqLGspOm0raztpZighbi5maWx0ZXIpe24ucmVtb3ZlQXR0cmlidXRlKCJmaWx0ZXIiKTt9fTphKSk7dmFyIGc9KGg/ZnVuY3Rpb24obCl7dmFyIGs9bC5zdHlsZS5vcGFjaXR5fHxsLmdldENvbXB1dGVkU3R5bGUoIm9wYWNpdHkiKTsKcmV0dXJuKGs9PSIiKT8xOmsudG9GbG9hdCgpO306KGU/ZnVuY3Rpb24obCl7dmFyIG09KGwuc3R5bGUuZmlsdGVyfHxsLmdldENvbXB1dGVkU3R5bGUoImZpbHRlciIpKSxrO2lmKG0pe2s9bS5tYXRjaChqKTt9cmV0dXJuKGs9PW51bGx8fG09PW51bGwpPzE6KGtbMV0vMTAwKTsKfTpmdW5jdGlvbihsKXt2YXIgaz1sLnJldHJpZXZlKCIkb3BhY2l0eSIpO2lmKGs9PW51bGwpe2s9KGwuc3R5bGUudmlzaWJpbGl0eT09ImhpZGRlbiI/MDoxKTt9cmV0dXJuIGs7fSkpO3ZhciBiPShpLnN0eWxlLmNzc0Zsb2F0PT1udWxsKT8ic3R5bGVGbG9hdCI6ImNzc0Zsb2F0IjsKRWxlbWVudC5pbXBsZW1lbnQoe2dldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24obSl7aWYodGhpcy5jdXJyZW50U3R5bGUpe3JldHVybiB0aGlzLmN1cnJlbnRTdHlsZVttLmNhbWVsQ2FzZSgpXTt9dmFyIGw9RWxlbWVudC5nZXREb2N1bWVudCh0aGlzKS5kZWZhdWx0VmlldyxrPWw/bC5nZXRDb21wdXRlZFN0eWxlKHRoaXMsbnVsbCk6bnVsbDsKcmV0dXJuKGspP2suZ2V0UHJvcGVydHlWYWx1ZSgobT09Yik/ImZsb2F0IjptLmh5cGhlbmF0ZSgpKTpudWxsO30sc2V0U3R5bGU6ZnVuY3Rpb24obCxrKXtpZihsPT0ib3BhY2l0eSIpe2lmKGshPW51bGwpe2s9cGFyc2VGbG9hdChrKTt9Zih0aGlzLGspO3JldHVybiB0aGlzOwp9bD0obD09ImZsb2F0Ij9iOmwpLmNhbWVsQ2FzZSgpO2lmKHR5cGVPZihrKSE9InN0cmluZyIpe3ZhciBtPShFbGVtZW50LlN0eWxlc1tsXXx8IkAiKS5zcGxpdCgiICIpO2s9QXJyYXkuZnJvbShrKS5tYXAoZnVuY3Rpb24obyxuKXtpZighbVtuXSl7cmV0dXJuIiI7Cn1yZXR1cm4odHlwZU9mKG8pPT0ibnVtYmVyIik/bVtuXS5yZXBsYWNlKCJAIixNYXRoLnJvdW5kKG8pKTpvO30pLmpvaW4oIiAiKTt9ZWxzZXtpZihrPT1TdHJpbmcoTnVtYmVyKGspKSl7az1NYXRoLnJvdW5kKGspO319dGhpcy5zdHlsZVtsXT1rO2lmKChrPT0iInx8az09bnVsbCkmJmMmJnRoaXMuc3R5bGUucmVtb3ZlQXR0cmlidXRlKXt0aGlzLnN0eWxlLnJlbW92ZUF0dHJpYnV0ZShsKTsKfXJldHVybiB0aGlzO30sZ2V0U3R5bGU6ZnVuY3Rpb24ocSl7aWYocT09Im9wYWNpdHkiKXtyZXR1cm4gZyh0aGlzKTt9cT0ocT09ImZsb2F0Ij9iOnEpLmNhbWVsQ2FzZSgpO3ZhciBrPXRoaXMuc3R5bGVbcV07aWYoIWt8fHE9PSJ6SW5kZXgiKXtrPVtdO2Zvcih2YXIgcCBpbiBFbGVtZW50LlNob3J0U3R5bGVzKXtpZihxIT1wKXtjb250aW51ZTsKfWZvcih2YXIgbyBpbiBFbGVtZW50LlNob3J0U3R5bGVzW3BdKXtrLnB1c2godGhpcy5nZXRTdHlsZShvKSk7fXJldHVybiBrLmpvaW4oIiAiKTt9az10aGlzLmdldENvbXB1dGVkU3R5bGUocSk7fWlmKGspe2s9U3RyaW5nKGspO3ZhciBtPWsubWF0Y2goL3JnYmE/XChbXGRccyxdK1wpLyk7CmlmKG0pe2s9ay5yZXBsYWNlKG1bMF0sbVswXS5yZ2JUb0hleCgpKTt9fWlmKEJyb3dzZXIub3BlcmF8fEJyb3dzZXIuaWUpe2lmKCgvXihoZWlnaHR8d2lkdGgpJC8pLnRlc3QocSkmJiEoL3B4JC8udGVzdChrKSkpe3ZhciBsPShxPT0id2lkdGgiKT9bImxlZnQiLCJyaWdodCJdOlsidG9wIiwiYm90dG9tIl0sbj0wOwpsLmVhY2goZnVuY3Rpb24ocil7bis9dGhpcy5nZXRTdHlsZSgiYm9yZGVyLSIrcisiLXdpZHRoIikudG9JbnQoKSt0aGlzLmdldFN0eWxlKCJwYWRkaW5nLSIrcikudG9JbnQoKTt9LHRoaXMpO3JldHVybiB0aGlzWyJvZmZzZXQiK3EuY2FwaXRhbGl6ZSgpXS1uKyJweCI7Cn1pZihCcm93c2VyLmllJiYoL15ib3JkZXIoLispV2lkdGh8bWFyZ2lufHBhZGRpbmcvKS50ZXN0KHEpJiZpc05hTihwYXJzZUZsb2F0KGspKSl7cmV0dXJuIjBweCI7fX1yZXR1cm4gazt9LHNldFN0eWxlczpmdW5jdGlvbihsKXtmb3IodmFyIGsgaW4gbCl7dGhpcy5zZXRTdHlsZShrLGxba10pOwp9cmV0dXJuIHRoaXM7fSxnZXRTdHlsZXM6ZnVuY3Rpb24oKXt2YXIgaz17fTtBcnJheS5mbGF0dGVuKGFyZ3VtZW50cykuZWFjaChmdW5jdGlvbihsKXtrW2xdPXRoaXMuZ2V0U3R5bGUobCk7fSx0aGlzKTtyZXR1cm4gazt9fSk7RWxlbWVudC5TdHlsZXM9e2xlZnQ6IkBweCIsdG9wOiJAcHgiLGJvdHRvbToiQHB4IixyaWdodDoiQHB4Iix3aWR0aDoiQHB4IixoZWlnaHQ6IkBweCIsbWF4V2lkdGg6IkBweCIsbWF4SGVpZ2h0OiJAcHgiLG1pbldpZHRoOiJAcHgiLG1pbkhlaWdodDoiQHB4IixiYWNrZ3JvdW5kQ29sb3I6InJnYihALCBALCBAKSIsYmFja2dyb3VuZFBvc2l0aW9uOiJAcHggQHB4Iixjb2xvcjoicmdiKEAsIEAsIEApIixmb250U2l6ZToiQHB4IixsZXR0ZXJTcGFjaW5nOiJAcHgiLGxpbmVIZWlnaHQ6IkBweCIsY2xpcDoicmVjdChAcHggQHB4IEBweCBAcHgpIixtYXJnaW46IkBweCBAcHggQHB4IEBweCIscGFkZGluZzoiQHB4IEBweCBAcHggQHB4Iixib3JkZXI6IkBweCBAIHJnYihALCBALCBAKSBAcHggQCByZ2IoQCwgQCwgQCkgQHB4IEAgcmdiKEAsIEAsIEApIixib3JkZXJXaWR0aDoiQHB4IEBweCBAcHggQHB4Iixib3JkZXJTdHlsZToiQCBAIEAgQCIsYm9yZGVyQ29sb3I6InJnYihALCBALCBAKSByZ2IoQCwgQCwgQCkgcmdiKEAsIEAsIEApIHJnYihALCBALCBAKSIsekluZGV4OiJAIix6b29tOiJAIixmb250V2VpZ2h0OiJAIix0ZXh0SW5kZW50OiJAcHgiLG9wYWNpdHk6IkAifTsKRWxlbWVudC5pbXBsZW1lbnQoe3NldE9wYWNpdHk6ZnVuY3Rpb24oayl7Zih0aGlzLGspO3JldHVybiB0aGlzO30sZ2V0T3BhY2l0eTpmdW5jdGlvbigpe3JldHVybiBnKHRoaXMpO319KTtFbGVtZW50LlByb3BlcnRpZXMub3BhY2l0eT17c2V0OmZ1bmN0aW9uKGspe2YodGhpcyxrKTsKYSh0aGlzLGspO30sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGcodGhpcyk7fX07RWxlbWVudC5TdHlsZXM9bmV3IEhhc2goRWxlbWVudC5TdHlsZXMpO0VsZW1lbnQuU2hvcnRTdHlsZXM9e21hcmdpbjp7fSxwYWRkaW5nOnt9LGJvcmRlcjp7fSxib3JkZXJXaWR0aDp7fSxib3JkZXJTdHlsZTp7fSxib3JkZXJDb2xvcjp7fX07ClsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0uZWFjaChmdW5jdGlvbihxKXt2YXIgcD1FbGVtZW50LlNob3J0U3R5bGVzO3ZhciBsPUVsZW1lbnQuU3R5bGVzO1sibWFyZ2luIiwicGFkZGluZyJdLmVhY2goZnVuY3Rpb24ocil7dmFyIHM9citxO3Bbcl1bc109bFtzXT0iQHB4IjsKfSk7dmFyIG89ImJvcmRlciIrcTtwLmJvcmRlcltvXT1sW29dPSJAcHggQCByZ2IoQCwgQCwgQCkiO3ZhciBuPW8rIldpZHRoIixrPW8rIlN0eWxlIixtPW8rIkNvbG9yIjtwW29dPXt9O3AuYm9yZGVyV2lkdGhbbl09cFtvXVtuXT1sW25dPSJAcHgiO3AuYm9yZGVyU3R5bGVba109cFtvXVtrXT1sW2tdPSJAIjsKcC5ib3JkZXJDb2xvclttXT1wW29dW21dPWxbbV09InJnYihALCBALCBAKSI7fSk7fSkoKTsoZnVuY3Rpb24oKXtFbGVtZW50LlByb3BlcnRpZXMuZXZlbnRzPXtzZXQ6ZnVuY3Rpb24oYil7dGhpcy5hZGRFdmVudHMoYik7fX07W0VsZW1lbnQsV2luZG93LERvY3VtZW50XS5pbnZva2UoImltcGxlbWVudCIse2FkZEV2ZW50OmZ1bmN0aW9uKGYsaCl7dmFyIGk9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIix7fSk7CmlmKCFpW2ZdKXtpW2ZdPXtrZXlzOltdLHZhbHVlczpbXX07fWlmKGlbZl0ua2V5cy5jb250YWlucyhoKSl7cmV0dXJuIHRoaXM7fWlbZl0ua2V5cy5wdXNoKGgpO3ZhciBnPWYsYj1FbGVtZW50LkV2ZW50c1tmXSxkPWgsaj10aGlzO2lmKGIpe2lmKGIub25BZGQpe2Iub25BZGQuY2FsbCh0aGlzLGgsZik7Cn1pZihiLmNvbmRpdGlvbil7ZD1mdW5jdGlvbihrKXtpZihiLmNvbmRpdGlvbi5jYWxsKHRoaXMsayxmKSl7cmV0dXJuIGguY2FsbCh0aGlzLGspO31yZXR1cm4gdHJ1ZTt9O31pZihiLmJhc2Upe2c9RnVuY3Rpb24uZnJvbShiLmJhc2UpLmNhbGwodGhpcyxmKTt9fXZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIGguY2FsbChqKTsKfTt2YXIgYz1FbGVtZW50Lk5hdGl2ZUV2ZW50c1tnXTtpZihjKXtpZihjPT0yKXtlPWZ1bmN0aW9uKGspe2s9bmV3IERPTUV2ZW50KGssai5nZXRXaW5kb3coKSk7aWYoZC5jYWxsKGosayk9PT1mYWxzZSl7ay5zdG9wKCk7fX07fXRoaXMuYWRkTGlzdGVuZXIoZyxlLGFyZ3VtZW50c1syXSk7Cn1pW2ZdLnZhbHVlcy5wdXNoKGUpO3JldHVybiB0aGlzO30scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oZSxkKXt2YXIgYz10aGlzLnJldHJpZXZlKCJldmVudHMiKTtpZighY3x8IWNbZV0pe3JldHVybiB0aGlzO312YXIgaD1jW2VdO3ZhciBiPWgua2V5cy5pbmRleE9mKGQpOwppZihiPT0tMSl7cmV0dXJuIHRoaXM7fXZhciBnPWgudmFsdWVzW2JdO2RlbGV0ZSBoLmtleXNbYl07ZGVsZXRlIGgudmFsdWVzW2JdO3ZhciBmPUVsZW1lbnQuRXZlbnRzW2VdO2lmKGYpe2lmKGYub25SZW1vdmUpe2Yub25SZW1vdmUuY2FsbCh0aGlzLGQsZSk7fWlmKGYuYmFzZSl7ZT1GdW5jdGlvbi5mcm9tKGYuYmFzZSkuY2FsbCh0aGlzLGUpOwp9fXJldHVybihFbGVtZW50Lk5hdGl2ZUV2ZW50c1tlXSk/dGhpcy5yZW1vdmVMaXN0ZW5lcihlLGcsYXJndW1lbnRzWzJdKTp0aGlzO30sYWRkRXZlbnRzOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYyBpbiBiKXt0aGlzLmFkZEV2ZW50KGMsYltjXSk7fXJldHVybiB0aGlzOwp9LHJlbW92ZUV2ZW50czpmdW5jdGlvbihiKXt2YXIgZDtpZih0eXBlT2YoYik9PSJvYmplY3QiKXtmb3IoZCBpbiBiKXt0aGlzLnJlbW92ZUV2ZW50KGQsYltkXSk7fXJldHVybiB0aGlzO312YXIgYz10aGlzLnJldHJpZXZlKCJldmVudHMiKTtpZighYyl7cmV0dXJuIHRoaXM7Cn1pZighYil7Zm9yKGQgaW4gYyl7dGhpcy5yZW1vdmVFdmVudHMoZCk7fXRoaXMuZWxpbWluYXRlKCJldmVudHMiKTt9ZWxzZXtpZihjW2JdKXtjW2JdLmtleXMuZWFjaChmdW5jdGlvbihlKXt0aGlzLnJlbW92ZUV2ZW50KGIsZSk7fSx0aGlzKTtkZWxldGUgY1tiXTsKfX1yZXR1cm4gdGhpczt9LGZpcmVFdmVudDpmdW5jdGlvbihlLGMsYil7dmFyIGQ9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIik7aWYoIWR8fCFkW2VdKXtyZXR1cm4gdGhpczt9Yz1BcnJheS5mcm9tKGMpO2RbZV0ua2V5cy5lYWNoKGZ1bmN0aW9uKGYpe2lmKGIpe2YuZGVsYXkoYix0aGlzLGMpOwp9ZWxzZXtmLmFwcGx5KHRoaXMsYyk7fX0sdGhpcyk7cmV0dXJuIHRoaXM7fSxjbG9uZUV2ZW50czpmdW5jdGlvbihlLGQpe2U9ZG9jdW1lbnQuaWQoZSk7dmFyIGM9ZS5yZXRyaWV2ZSgiZXZlbnRzIik7aWYoIWMpe3JldHVybiB0aGlzO31pZighZCl7Zm9yKHZhciBiIGluIGMpe3RoaXMuY2xvbmVFdmVudHMoZSxiKTsKfX1lbHNle2lmKGNbZF0pe2NbZF0ua2V5cy5lYWNoKGZ1bmN0aW9uKGYpe3RoaXMuYWRkRXZlbnQoZCxmKTt9LHRoaXMpO319cmV0dXJuIHRoaXM7fX0pO0VsZW1lbnQuTmF0aXZlRXZlbnRzPXtjbGljazoyLGRibGNsaWNrOjIsbW91c2V1cDoyLG1vdXNlZG93bjoyLGNvbnRleHRtZW51OjIsbW91c2V3aGVlbDoyLERPTU1vdXNlU2Nyb2xsOjIsbW91c2VvdmVyOjIsbW91c2VvdXQ6Mixtb3VzZW1vdmU6MixzZWxlY3RzdGFydDoyLHNlbGVjdGVuZDoyLGtleWRvd246MixrZXlwcmVzczoyLGtleXVwOjIsb3JpZW50YXRpb25jaGFuZ2U6Mix0b3VjaHN0YXJ0OjIsdG91Y2htb3ZlOjIsdG91Y2hlbmQ6Mix0b3VjaGNhbmNlbDoyLGdlc3R1cmVzdGFydDoyLGdlc3R1cmVjaGFuZ2U6MixnZXN0dXJlZW5kOjIsZm9jdXM6MixibHVyOjIsY2hhbmdlOjIscmVzZXQ6MixzZWxlY3Q6MixzdWJtaXQ6MixwYXN0ZToyLGlucHV0OjIsbG9hZDoyLHVubG9hZDoxLGJlZm9yZXVubG9hZDoyLHJlc2l6ZToxLG1vdmU6MSxET01Db250ZW50TG9hZGVkOjEscmVhZHlzdGF0ZWNoYW5nZToxLGVycm9yOjEsYWJvcnQ6MSxzY3JvbGw6MX07CkVsZW1lbnQuRXZlbnRzPXttb3VzZXdoZWVsOntiYXNlOihCcm93c2VyLmZpcmVmb3gpPyJET01Nb3VzZVNjcm9sbCI6Im1vdXNld2hlZWwifX07aWYoIm9ubW91c2VlbnRlciIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KXtFbGVtZW50Lk5hdGl2ZUV2ZW50cy5tb3VzZWVudGVyPUVsZW1lbnQuTmF0aXZlRXZlbnRzLm1vdXNlbGVhdmU9MjsKfWVsc2V7dmFyIGE9ZnVuY3Rpb24oYil7dmFyIGM9Yi5yZWxhdGVkVGFyZ2V0O2lmKGM9PW51bGwpe3JldHVybiB0cnVlO31pZighYyl7cmV0dXJuIGZhbHNlO31yZXR1cm4oYyE9dGhpcyYmYy5wcmVmaXghPSJ4dWwiJiZ0eXBlT2YodGhpcykhPSJkb2N1bWVudCImJiF0aGlzLmNvbnRhaW5zKGMpKTsKfTtFbGVtZW50LkV2ZW50cy5tb3VzZWVudGVyPXtiYXNlOiJtb3VzZW92ZXIiLGNvbmRpdGlvbjphfTtFbGVtZW50LkV2ZW50cy5tb3VzZWxlYXZlPXtiYXNlOiJtb3VzZW91dCIsY29uZGl0aW9uOmF9O31pZighd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe0VsZW1lbnQuTmF0aXZlRXZlbnRzLnByb3BlcnR5Y2hhbmdlPTI7CkVsZW1lbnQuRXZlbnRzLmNoYW5nZT17YmFzZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMudHlwZTtyZXR1cm4odGhpcy5nZXQoInRhZyIpPT0iaW5wdXQiJiYoYj09InJhZGlvInx8Yj09ImNoZWNrYm94IikpPyJwcm9wZXJ0eWNoYW5nZSI6ImNoYW5nZSI7fSxjb25kaXRpb246ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMudHlwZSE9InJhZGlvInx8KGIuZXZlbnQucHJvcGVydHlOYW1lPT0iY2hlY2tlZCImJnRoaXMuY2hlY2tlZCk7Cn19O31FbGVtZW50LkV2ZW50cz1uZXcgSGFzaChFbGVtZW50LkV2ZW50cyk7fSkoKTsoZnVuY3Rpb24oKXt2YXIgYz0hIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyO0VsZW1lbnQuTmF0aXZlRXZlbnRzLmZvY3VzaW49RWxlbWVudC5OYXRpdmVFdmVudHMuZm9jdXNvdXQ9MjsKdmFyIGs9ZnVuY3Rpb24obCxtLG4sbyxwKXt3aGlsZShwJiZwIT1sKXtpZihtKHAsbykpe3JldHVybiBuLmNhbGwocCxvLHApO31wPWRvY3VtZW50LmlkKHAucGFyZW50Tm9kZSk7fX07dmFyIGE9e21vdXNlZW50ZXI6e2Jhc2U6Im1vdXNlb3ZlciJ9LG1vdXNlbGVhdmU6e2Jhc2U6Im1vdXNlb3V0In0sZm9jdXM6e2Jhc2U6ImZvY3VzIisoYz8iIjoiaW4iKSxjYXB0dXJlOnRydWV9LGJsdXI6e2Jhc2U6Yz8iYmx1ciI6ImZvY3Vzb3V0IixjYXB0dXJlOnRydWV9fTsKdmFyIGI9IiRkZWxlZ2F0aW9uOiI7dmFyIGk9ZnVuY3Rpb24obCl7cmV0dXJue2Jhc2U6ImZvY3VzaW4iLHJlbW92ZTpmdW5jdGlvbihtLG8pe3ZhciBwPW0ucmV0cmlldmUoYitsKyJsaXN0ZW5lcnMiLHt9KVtvXTtpZihwJiZwLmZvcm1zKXtmb3IodmFyIG49cC5mb3Jtcy5sZW5ndGg7Cm4tLTspe3AuZm9ybXNbbl0ucmVtb3ZlRXZlbnQobCxwLmZuc1tuXSk7fX19LGxpc3RlbjpmdW5jdGlvbih4LHIsdixuLHQscyl7dmFyIG89KHQuZ2V0KCJ0YWciKT09ImZvcm0iKT90Om4udGFyZ2V0LmdldFBhcmVudCgiZm9ybSIpO2lmKCFvKXtyZXR1cm47fXZhciB1PXgucmV0cmlldmUoYitsKyJsaXN0ZW5lcnMiLHt9KSxwPXVbc118fHtmb3JtczpbXSxmbnM6W119LG09cC5mb3Jtcyx3PXAuZm5zOwppZihtLmluZGV4T2YobykhPS0xKXtyZXR1cm47fW0ucHVzaChvKTt2YXIgcT1mdW5jdGlvbih5KXtrKHgscix2LHksdCk7fTtvLmFkZEV2ZW50KGwscSk7dy5wdXNoKHEpO3Vbc109cDt4LnN0b3JlKGIrbCsibGlzdGVuZXJzIix1KTt9fTt9O3ZhciBkPWZ1bmN0aW9uKGwpe3JldHVybntiYXNlOiJmb2N1c2luIixsaXN0ZW46ZnVuY3Rpb24obSxuLHAscSxyKXt2YXIgbz17Ymx1cjpmdW5jdGlvbigpe3RoaXMucmVtb3ZlRXZlbnRzKG8pOwp9fTtvW2xdPWZ1bmN0aW9uKHMpe2sobSxuLHAscyxyKTt9O3EudGFyZ2V0LmFkZEV2ZW50cyhvKTt9fTt9O2lmKCFjKXtPYmplY3QuYXBwZW5kKGEse3N1Ym1pdDppKCJzdWJtaXQiKSxyZXNldDppKCJyZXNldCIpLGNoYW5nZTpkKCJjaGFuZ2UiKSxzZWxlY3Q6ZCgic2VsZWN0Iil9KTsKfXZhciBoPUVsZW1lbnQucHJvdG90eXBlLGY9aC5hZGRFdmVudCxqPWgucmVtb3ZlRXZlbnQ7dmFyIGU9ZnVuY3Rpb24obCxtKXtyZXR1cm4gZnVuY3Rpb24ocixxLG4pe2lmKHIuaW5kZXhPZigiOnJlbGF5Iik9PS0xKXtyZXR1cm4gbC5jYWxsKHRoaXMscixxLG4pOwp9dmFyIG89U2xpY2sucGFyc2UocikuZXhwcmVzc2lvbnNbMF1bMF07aWYoby5wc2V1ZG9zWzBdLmtleSE9InJlbGF5Iil7cmV0dXJuIGwuY2FsbCh0aGlzLHIscSxuKTt9dmFyIHA9by50YWc7by5wc2V1ZG9zLnNsaWNlKDEpLmVhY2goZnVuY3Rpb24ocyl7cCs9IjoiK3Mua2V5KyhzLnZhbHVlPyIoIitzLnZhbHVlKyIpIjoiIik7Cn0pO2wuY2FsbCh0aGlzLHIscSk7cmV0dXJuIG0uY2FsbCh0aGlzLHAsby5wc2V1ZG9zWzBdLnZhbHVlLHEpO307fTt2YXIgZz17YWRkRXZlbnQ6ZnVuY3Rpb24odixxLHgpe3ZhciB0PXRoaXMucmV0cmlldmUoIiRkZWxlZ2F0ZXMiLHt9KSxyPXRbdl07aWYocil7Zm9yKHZhciB5IGluIHIpe2lmKHJbeV0uZm49PXgmJnJbeV0ubWF0Y2g9PXEpe3JldHVybiB0aGlzOwp9fX12YXIgcD12LHU9cSxvPXgsbj1hW3ZdfHx7fTt2PW4uYmFzZXx8cDtxPWZ1bmN0aW9uKEIpe3JldHVybiBTbGljay5tYXRjaChCLHUpO307dmFyIHc9RWxlbWVudC5FdmVudHNbcF07aWYodyYmdy5jb25kaXRpb24pe3ZhciBsPXEsbT13LmNvbmRpdGlvbjtxPWZ1bmN0aW9uKEMsQil7cmV0dXJuIGwoQyxCKSYmbS5jYWxsKEMsQix2KTsKfTt9dmFyIHo9dGhpcyxzPVN0cmluZy51bmlxdWVJRCgpO3ZhciBBPW4ubGlzdGVuP2Z1bmN0aW9uKEIsQyl7aWYoIUMmJkImJkIudGFyZ2V0KXtDPUIudGFyZ2V0O31pZihDKXtuLmxpc3Rlbih6LHEseCxCLEMscyk7fX06ZnVuY3Rpb24oQixDKXtpZighQyYmQiYmQi50YXJnZXQpe0M9Qi50YXJnZXQ7Cn1pZihDKXtrKHoscSx4LEIsQyk7fX07aWYoIXIpe3I9e307fXJbc109e21hdGNoOnUsZm46byxkZWxlZ2F0b3I6QX07dFtwXT1yO3JldHVybiBmLmNhbGwodGhpcyx2LEEsbi5jYXB0dXJlKTt9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKHIsbix0LHUpe3ZhciBxPXRoaXMucmV0cmlldmUoIiRkZWxlZ2F0ZXMiLHt9KSxwPXFbcl07CmlmKCFwKXtyZXR1cm4gdGhpczt9aWYodSl7dmFyIG09cix3PXBbdV0uZGVsZWdhdG9yLGw9YVtyXXx8e307cj1sLmJhc2V8fG07aWYobC5yZW1vdmUpe2wucmVtb3ZlKHRoaXMsdSk7fWRlbGV0ZSBwW3VdO3FbbV09cDtyZXR1cm4gai5jYWxsKHRoaXMscix3KTt9dmFyIG8sdjsKaWYodCl7Zm9yKG8gaW4gcCl7dj1wW29dO2lmKHYubWF0Y2g9PW4mJnYuZm49PXQpe3JldHVybiBnLnJlbW92ZUV2ZW50LmNhbGwodGhpcyxyLG4sdCxvKTt9fX1lbHNle2ZvcihvIGluIHApe3Y9cFtvXTtpZih2Lm1hdGNoPT1uKXtnLnJlbW92ZUV2ZW50LmNhbGwodGhpcyxyLG4sdi5mbixvKTsKfX19cmV0dXJuIHRoaXM7fX07W0VsZW1lbnQsV2luZG93LERvY3VtZW50XS5pbnZva2UoImltcGxlbWVudCIse2FkZEV2ZW50OmUoZixnLmFkZEV2ZW50KSxyZW1vdmVFdmVudDplKGosZy5yZW1vdmVFdmVudCl9KTt9KSgpOyhmdW5jdGlvbigpe3ZhciBoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Cmguc3R5bGUuaGVpZ2h0PSIwIjtoLmFwcGVuZENoaWxkKGUpO3ZhciBkPShlLm9mZnNldFBhcmVudD09PWgpO2g9ZT1udWxsO3ZhciBsPWZ1bmN0aW9uKG0pe3JldHVybiBrKG0sInBvc2l0aW9uIikhPSJzdGF0aWMifHxhKG0pO307dmFyIGk9ZnVuY3Rpb24obSl7cmV0dXJuIGwobSl8fCgvXig/OnRhYmxlfHRkfHRoKSQvaSkudGVzdChtLnRhZ05hbWUpOwp9O0VsZW1lbnQuaW1wbGVtZW50KHtzY3JvbGxUbzpmdW5jdGlvbihtLG4pe2lmKGEodGhpcykpe3RoaXMuZ2V0V2luZG93KCkuc2Nyb2xsVG8obSxuKTt9ZWxzZXt0aGlzLnNjcm9sbExlZnQ9bTt0aGlzLnNjcm9sbFRvcD1uO31yZXR1cm4gdGhpczt9LGdldFNpemU6ZnVuY3Rpb24oKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRTaXplKCk7Cn1yZXR1cm57eDp0aGlzLm9mZnNldFdpZHRoLHk6dGhpcy5vZmZzZXRIZWlnaHR9O30sZ2V0U2Nyb2xsU2l6ZTpmdW5jdGlvbigpe2lmKGEodGhpcykpe3JldHVybiB0aGlzLmdldFdpbmRvdygpLmdldFNjcm9sbFNpemUoKTt9cmV0dXJue3g6dGhpcy5zY3JvbGxXaWR0aCx5OnRoaXMuc2Nyb2xsSGVpZ2h0fTsKfSxnZXRTY3JvbGw6ZnVuY3Rpb24oKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRTY3JvbGwoKTt9cmV0dXJue3g6dGhpcy5zY3JvbGxMZWZ0LHk6dGhpcy5zY3JvbGxUb3B9O30sZ2V0U2Nyb2xsczpmdW5jdGlvbigpe3ZhciBuPXRoaXMucGFyZW50Tm9kZSxtPXt4OjAseTowfTsKd2hpbGUobiYmIWEobikpe20ueCs9bi5zY3JvbGxMZWZ0O20ueSs9bi5zY3JvbGxUb3A7bj1uLnBhcmVudE5vZGU7fXJldHVybiBtO30sZ2V0T2Zmc2V0UGFyZW50OmQ/ZnVuY3Rpb24oKXt2YXIgbT10aGlzO2lmKGEobSl8fGsobSwicG9zaXRpb24iKT09ImZpeGVkIil7cmV0dXJuIG51bGw7Cn12YXIgbj0oayhtLCJwb3NpdGlvbiIpPT0ic3RhdGljIik/aTpsO3doaWxlKChtPW0ucGFyZW50Tm9kZSkpe2lmKG4obSkpe3JldHVybiBtO319cmV0dXJuIG51bGw7fTpmdW5jdGlvbigpe3ZhciBtPXRoaXM7aWYoYShtKXx8ayhtLCJwb3NpdGlvbiIpPT0iZml4ZWQiKXtyZXR1cm4gbnVsbDsKfXRyeXtyZXR1cm4gbS5vZmZzZXRQYXJlbnQ7fWNhdGNoKG4pe31yZXR1cm4gbnVsbDt9LGdldE9mZnNldHM6ZnVuY3Rpb24oKXtpZih0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmIUJyb3dzZXIuUGxhdGZvcm0uaW9zKXt2YXIgcj10aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG89ZG9jdW1lbnQuaWQodGhpcy5nZXREb2N1bWVudCgpLmRvY3VtZW50RWxlbWVudCkscT1vLmdldFNjcm9sbCgpLHQ9dGhpcy5nZXRTY3JvbGxzKCkscz0oayh0aGlzLCJwb3NpdGlvbiIpPT0iZml4ZWQiKTsKcmV0dXJue3g6ci5sZWZ0LnRvSW50KCkrdC54Kygocyk/MDpxLngpLW8uY2xpZW50TGVmdCx5OnIudG9wLnRvSW50KCkrdC55Kygocyk/MDpxLnkpLW8uY2xpZW50VG9wfTt9dmFyIG49dGhpcyxtPXt4OjAseTowfTtpZihhKHRoaXMpKXtyZXR1cm4gbTt9d2hpbGUobiYmIWEobikpe20ueCs9bi5vZmZzZXRMZWZ0OwptLnkrPW4ub2Zmc2V0VG9wO2lmKEJyb3dzZXIuZmlyZWZveCl7aWYoIWMobikpe20ueCs9YihuKTttLnkrPWcobik7fXZhciBwPW4ucGFyZW50Tm9kZTtpZihwJiZrKHAsIm92ZXJmbG93IikhPSJ2aXNpYmxlIil7bS54Kz1iKHApO20ueSs9ZyhwKTt9fWVsc2V7aWYobiE9dGhpcyYmQnJvd3Nlci5zYWZhcmkpe20ueCs9YihuKTsKbS55Kz1nKG4pO319bj1uLm9mZnNldFBhcmVudDt9aWYoQnJvd3Nlci5maXJlZm94JiYhYyh0aGlzKSl7bS54LT1iKHRoaXMpO20ueS09Zyh0aGlzKTt9cmV0dXJuIG07fSxnZXRQb3NpdGlvbjpmdW5jdGlvbihwKXt2YXIgcT10aGlzLmdldE9mZnNldHMoKSxuPXRoaXMuZ2V0U2Nyb2xscygpOwp2YXIgbT17eDpxLngtbi54LHk6cS55LW4ueX07aWYocCYmKHA9ZG9jdW1lbnQuaWQocCkpKXt2YXIgbz1wLmdldFBvc2l0aW9uKCk7cmV0dXJue3g6bS54LW8ueC1iKHApLHk6bS55LW8ueS1nKHApfTt9cmV0dXJuIG07fSxnZXRDb29yZGluYXRlczpmdW5jdGlvbihvKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRDb29yZGluYXRlcygpOwp9dmFyIG09dGhpcy5nZXRQb3NpdGlvbihvKSxuPXRoaXMuZ2V0U2l6ZSgpO3ZhciBwPXtsZWZ0Om0ueCx0b3A6bS55LHdpZHRoOm4ueCxoZWlnaHQ6bi55fTtwLnJpZ2h0PXAubGVmdCtwLndpZHRoO3AuYm90dG9tPXAudG9wK3AuaGVpZ2h0O3JldHVybiBwO30sY29tcHV0ZVBvc2l0aW9uOmZ1bmN0aW9uKG0pe3JldHVybntsZWZ0Om0ueC1qKHRoaXMsIm1hcmdpbi1sZWZ0IiksdG9wOm0ueS1qKHRoaXMsIm1hcmdpbi10b3AiKX07Cn0sc2V0UG9zaXRpb246ZnVuY3Rpb24obSl7cmV0dXJuIHRoaXMuc2V0U3R5bGVzKHRoaXMuY29tcHV0ZVBvc2l0aW9uKG0pKTt9fSk7W0RvY3VtZW50LFdpbmRvd10uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIG09Zih0aGlzKTtyZXR1cm57eDptLmNsaWVudFdpZHRoLHk6bS5jbGllbnRIZWlnaHR9Owp9LGdldFNjcm9sbDpmdW5jdGlvbigpe3ZhciBuPXRoaXMuZ2V0V2luZG93KCksbT1mKHRoaXMpO3JldHVybnt4Om4ucGFnZVhPZmZzZXR8fG0uc2Nyb2xsTGVmdCx5Om4ucGFnZVlPZmZzZXR8fG0uc2Nyb2xsVG9wfTt9LGdldFNjcm9sbFNpemU6ZnVuY3Rpb24oKXt2YXIgbz1mKHRoaXMpLG49dGhpcy5nZXRTaXplKCksbT10aGlzLmdldERvY3VtZW50KCkuYm9keTsKcmV0dXJue3g6TWF0aC5tYXgoby5zY3JvbGxXaWR0aCxtLnNjcm9sbFdpZHRoLG4ueCkseTpNYXRoLm1heChvLnNjcm9sbEhlaWdodCxtLnNjcm9sbEhlaWdodCxuLnkpfTt9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJue3g6MCx5OjB9O30sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXt2YXIgbT10aGlzLmdldFNpemUoKTsKcmV0dXJue3RvcDowLGxlZnQ6MCxib3R0b206bS55LHJpZ2h0Om0ueCxoZWlnaHQ6bS55LHdpZHRoOm0ueH07fX0pO3ZhciBrPUVsZW1lbnQuZ2V0Q29tcHV0ZWRTdHlsZTtmdW5jdGlvbiBqKG0sbil7cmV0dXJuIGsobSxuKS50b0ludCgpfHwwO31mdW5jdGlvbiBjKG0pe3JldHVybiBrKG0sIi1tb3otYm94LXNpemluZyIpPT0iYm9yZGVyLWJveCI7Cn1mdW5jdGlvbiBnKG0pe3JldHVybiBqKG0sImJvcmRlci10b3Atd2lkdGgiKTt9ZnVuY3Rpb24gYihtKXtyZXR1cm4gaihtLCJib3JkZXItbGVmdC13aWR0aCIpO31mdW5jdGlvbiBhKG0pe3JldHVybigvXig/OmJvZHl8aHRtbCkkL2kpLnRlc3QobS50YWdOYW1lKTsKfWZ1bmN0aW9uIGYobSl7dmFyIG49bS5nZXREb2N1bWVudCgpO3JldHVybighbi5jb21wYXRNb2RlfHxuLmNvbXBhdE1vZGU9PSJDU1MxQ29tcGF0Iik/bi5odG1sOm4uYm9keTt9fSkoKTtFbGVtZW50LmFsaWFzKHtwb3NpdGlvbjoic2V0UG9zaXRpb24ifSk7W1dpbmRvdyxEb2N1bWVudCxFbGVtZW50XS5pbnZva2UoImltcGxlbWVudCIse2dldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNpemUoKS55Owp9LGdldFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2l6ZSgpLng7fSxnZXRTY3JvbGxUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGwoKS55O30sZ2V0U2Nyb2xsTGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbCgpLng7Cn0sZ2V0U2Nyb2xsSGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsU2l6ZSgpLnk7fSxnZXRTY3JvbGxXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbFNpemUoKS54O30sZ2V0VG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UG9zaXRpb24oKS55Owp9LGdldExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQb3NpdGlvbigpLng7fX0pOyhmdW5jdGlvbigpe3ZhciBmPXRoaXMuRng9bmV3IENsYXNzKHtJbXBsZW1lbnRzOltDaGFpbixFdmVudHMsT3B0aW9uc10sb3B0aW9uczp7ZnBzOjYwLHVuaXQ6ZmFsc2UsZHVyYXRpb246NTAwLGZyYW1lczpudWxsLGZyYW1lU2tpcDp0cnVlLGxpbms6Imlnbm9yZSJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oZyl7dGhpcy5zdWJqZWN0PXRoaXMuc3ViamVjdHx8dGhpczsKdGhpcy5zZXRPcHRpb25zKGcpO30sZ2V0VHJhbnNpdGlvbjpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihnKXtyZXR1cm4gLShNYXRoLmNvcyhNYXRoLlBJKmcpLTEpLzI7fTt9LHN0ZXA6ZnVuY3Rpb24oZyl7aWYodGhpcy5vcHRpb25zLmZyYW1lU2tpcCl7dmFyIGg9KHRoaXMudGltZSE9bnVsbCk/KGctdGhpcy50aW1lKTowLGk9aC90aGlzLmZyYW1lSW50ZXJ2YWw7CnRoaXMudGltZT1nO3RoaXMuZnJhbWUrPWk7fWVsc2V7dGhpcy5mcmFtZSsrO31pZih0aGlzLmZyYW1lPHRoaXMuZnJhbWVzKXt2YXIgaj10aGlzLnRyYW5zaXRpb24odGhpcy5mcmFtZS90aGlzLmZyYW1lcyk7dGhpcy5zZXQodGhpcy5jb21wdXRlKHRoaXMuZnJvbSx0aGlzLnRvLGopKTsKfWVsc2V7dGhpcy5mcmFtZT10aGlzLmZyYW1lczt0aGlzLnNldCh0aGlzLmNvbXB1dGUodGhpcy5mcm9tLHRoaXMudG8sMSkpO3RoaXMuc3RvcCgpO319LHNldDpmdW5jdGlvbihnKXtyZXR1cm4gZzt9LGNvbXB1dGU6ZnVuY3Rpb24oaSxoLGcpe3JldHVybiBmLmNvbXB1dGUoaSxoLGcpOwp9LGNoZWNrOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNSdW5uaW5nKCkpe3JldHVybiB0cnVlO31zd2l0Y2godGhpcy5vcHRpb25zLmxpbmspe2Nhc2UiY2FuY2VsIjp0aGlzLmNhbmNlbCgpO3JldHVybiB0cnVlO2Nhc2UiY2hhaW4iOnRoaXMuY2hhaW4odGhpcy5jYWxsZXIucGFzcyhhcmd1bWVudHMsdGhpcykpOwpyZXR1cm4gZmFsc2U7fXJldHVybiBmYWxzZTt9LHN0YXJ0OmZ1bmN0aW9uKGssail7aWYoIXRoaXMuY2hlY2soayxqKSl7cmV0dXJuIHRoaXM7fXRoaXMuZnJvbT1rO3RoaXMudG89ajt0aGlzLmZyYW1lPSh0aGlzLm9wdGlvbnMuZnJhbWVTa2lwKT8wOi0xO3RoaXMudGltZT1udWxsOwp0aGlzLnRyYW5zaXRpb249dGhpcy5nZXRUcmFuc2l0aW9uKCk7dmFyIGk9dGhpcy5vcHRpb25zLmZyYW1lcyxoPXRoaXMub3B0aW9ucy5mcHMsZz10aGlzLm9wdGlvbnMuZHVyYXRpb247dGhpcy5kdXJhdGlvbj1mLkR1cmF0aW9uc1tnXXx8Zy50b0ludCgpO3RoaXMuZnJhbWVJbnRlcnZhbD0xMDAwL2g7CnRoaXMuZnJhbWVzPWl8fE1hdGgucm91bmQodGhpcy5kdXJhdGlvbi90aGlzLmZyYW1lSW50ZXJ2YWwpO3RoaXMuZmlyZUV2ZW50KCJzdGFydCIsdGhpcy5zdWJqZWN0KTtiLmNhbGwodGhpcyxoKTtyZXR1cm4gdGhpczt9LHN0b3A6ZnVuY3Rpb24oKXtpZih0aGlzLmlzUnVubmluZygpKXt0aGlzLnRpbWU9bnVsbDsKZC5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7aWYodGhpcy5mcmFtZXM9PXRoaXMuZnJhbWUpe3RoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIsdGhpcy5zdWJqZWN0KTtpZighdGhpcy5jYWxsQ2hhaW4oKSl7dGhpcy5maXJlRXZlbnQoImNoYWluQ29tcGxldGUiLHRoaXMuc3ViamVjdCk7Cn19ZWxzZXt0aGlzLmZpcmVFdmVudCgic3RvcCIsdGhpcy5zdWJqZWN0KTt9fXJldHVybiB0aGlzO30sY2FuY2VsOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1J1bm5pbmcoKSl7dGhpcy50aW1lPW51bGw7ZC5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7dGhpcy5mcmFtZT10aGlzLmZyYW1lczsKdGhpcy5maXJlRXZlbnQoImNhbmNlbCIsdGhpcy5zdWJqZWN0KS5jbGVhckNoYWluKCk7fXJldHVybiB0aGlzO30scGF1c2U6ZnVuY3Rpb24oKXtpZih0aGlzLmlzUnVubmluZygpKXt0aGlzLnRpbWU9bnVsbDtkLmNhbGwodGhpcyx0aGlzLm9wdGlvbnMuZnBzKTt9cmV0dXJuIHRoaXM7Cn0scmVzdW1lOmZ1bmN0aW9uKCl7aWYoKHRoaXMuZnJhbWU8dGhpcy5mcmFtZXMpJiYhdGhpcy5pc1J1bm5pbmcoKSl7Yi5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7fXJldHVybiB0aGlzO30saXNSdW5uaW5nOmZ1bmN0aW9uKCl7dmFyIGc9ZVt0aGlzLm9wdGlvbnMuZnBzXTsKcmV0dXJuIGcmJmcuY29udGFpbnModGhpcyk7fX0pO2YuY29tcHV0ZT1mdW5jdGlvbihpLGgsZyl7cmV0dXJuKGgtaSkqZytpO307Zi5EdXJhdGlvbnM9eyJzaG9ydCI6MjUwLG5vcm1hbDo1MDAsImxvbmciOjEwMDB9O3ZhciBlPXt9LGM9e307dmFyIGE9ZnVuY3Rpb24oKXt2YXIgaD1EYXRlLm5vdygpOwpmb3IodmFyIGo9dGhpcy5sZW5ndGg7ai0tOyl7dmFyIGc9dGhpc1tqXTtpZihnKXtnLnN0ZXAoaCk7fX19O3ZhciBiPWZ1bmN0aW9uKGgpe3ZhciBnPWVbaF18fChlW2hdPVtdKTtnLnB1c2godGhpcyk7aWYoIWNbaF0pe2NbaF09YS5wZXJpb2RpY2FsKE1hdGgucm91bmQoMTAwMC9oKSxnKTsKfX07dmFyIGQ9ZnVuY3Rpb24oaCl7dmFyIGc9ZVtoXTtpZihnKXtnLmVyYXNlKHRoaXMpO2lmKCFnLmxlbmd0aCYmY1toXSl7ZGVsZXRlIGVbaF07Y1toXT1jbGVhckludGVydmFsKGNbaF0pO319fTt9KSgpO0Z4LkNTUz1uZXcgQ2xhc3Moe0V4dGVuZHM6RngscHJlcGFyZTpmdW5jdGlvbihiLGUsYSl7YT1BcnJheS5mcm9tKGEpOwp2YXIgaD1hWzBdLGc9YVsxXTtpZihnPT1udWxsKXtnPWg7aD1iLmdldFN0eWxlKGUpO3ZhciBjPXRoaXMub3B0aW9ucy51bml0O2lmKGMmJmguc2xpY2UoLWMubGVuZ3RoKSE9YyYmcGFyc2VGbG9hdChoKSE9MCl7Yi5zZXRTdHlsZShlLGcrYyk7dmFyIGQ9Yi5nZXRDb21wdXRlZFN0eWxlKGUpOwppZighKC9weCQvLnRlc3QoZCkpKXtkPWIuc3R5bGVbKCJwaXhlbC0iK2UpLmNhbWVsQ2FzZSgpXTtpZihkPT1udWxsKXt2YXIgZj1iLnN0eWxlLmxlZnQ7Yi5zdHlsZS5sZWZ0PWcrYztkPWIuc3R5bGUucGl4ZWxMZWZ0O2Iuc3R5bGUubGVmdD1mO319aD0oZ3x8MSkvKHBhcnNlRmxvYXQoZCl8fDEpKihwYXJzZUZsb2F0KGgpfHwwKTsKYi5zZXRTdHlsZShlLGgrYyk7fX1yZXR1cm57ZnJvbTp0aGlzLnBhcnNlKGgpLHRvOnRoaXMucGFyc2UoZyl9O30scGFyc2U6ZnVuY3Rpb24oYSl7YT1GdW5jdGlvbi5mcm9tKGEpKCk7YT0odHlwZW9mIGE9PSJzdHJpbmciKT9hLnNwbGl0KCIgIik6QXJyYXkuZnJvbShhKTsKcmV0dXJuIGEubWFwKGZ1bmN0aW9uKGMpe2M9U3RyaW5nKGMpO3ZhciBiPWZhbHNlO09iamVjdC5lYWNoKEZ4LkNTUy5QYXJzZXJzLGZ1bmN0aW9uKGYsZSl7aWYoYil7cmV0dXJuO312YXIgZD1mLnBhcnNlKGMpO2lmKGR8fGQ9PT0wKXtiPXt2YWx1ZTpkLHBhcnNlcjpmfTsKfX0pO2I9Ynx8e3ZhbHVlOmMscGFyc2VyOkZ4LkNTUy5QYXJzZXJzLlN0cmluZ307cmV0dXJuIGI7fSk7fSxjb21wdXRlOmZ1bmN0aW9uKGQsYyxiKXt2YXIgYT1bXTsoTWF0aC5taW4oZC5sZW5ndGgsYy5sZW5ndGgpKS50aW1lcyhmdW5jdGlvbihlKXthLnB1c2goe3ZhbHVlOmRbZV0ucGFyc2VyLmNvbXB1dGUoZFtlXS52YWx1ZSxjW2VdLnZhbHVlLGIpLHBhcnNlcjpkW2VdLnBhcnNlcn0pOwp9KTthLiRmYW1pbHk9RnVuY3Rpb24uZnJvbSgiZng6Y3NzOnZhbHVlIik7cmV0dXJuIGE7fSxzZXJ2ZTpmdW5jdGlvbihjLGIpe2lmKHR5cGVPZihjKSE9ImZ4OmNzczp2YWx1ZSIpe2M9dGhpcy5wYXJzZShjKTt9dmFyIGE9W107Yy5lYWNoKGZ1bmN0aW9uKGQpe2E9YS5jb25jYXQoZC5wYXJzZXIuc2VydmUoZC52YWx1ZSxiKSk7Cn0pO3JldHVybiBhO30scmVuZGVyOmZ1bmN0aW9uKGEsZCxjLGIpe2Euc2V0U3R5bGUoZCx0aGlzLnNlcnZlKGMsYikpO30sc2VhcmNoOmZ1bmN0aW9uKGEpe2lmKEZ4LkNTUy5DYWNoZVthXSl7cmV0dXJuIEZ4LkNTUy5DYWNoZVthXTt9dmFyIGM9e30sYj1uZXcgUmVnRXhwKCJeIithLmVzY2FwZVJlZ0V4cCgpKyIkIik7CkFycmF5LmVhY2goZG9jdW1lbnQuc3R5bGVTaGVldHMsZnVuY3Rpb24oZixlKXt2YXIgZD1mLmhyZWY7aWYoZCYmZC5jb250YWlucygiOi8vIikmJiFkLmNvbnRhaW5zKGRvY3VtZW50LmRvbWFpbikpe3JldHVybjt9dmFyIGc9Zi5ydWxlc3x8Zi5jc3NSdWxlcztBcnJheS5lYWNoKGcsZnVuY3Rpb24oayxoKXtpZighay5zdHlsZSl7cmV0dXJuOwp9dmFyIGo9KGsuc2VsZWN0b3JUZXh0KT9rLnNlbGVjdG9yVGV4dC5yZXBsYWNlKC9eXHcrLyxmdW5jdGlvbihpKXtyZXR1cm4gaS50b0xvd2VyQ2FzZSgpO30pOm51bGw7aWYoIWp8fCFiLnRlc3Qoaikpe3JldHVybjt9T2JqZWN0LmVhY2goRWxlbWVudC5TdHlsZXMsZnVuY3Rpb24obCxpKXtpZighay5zdHlsZVtpXXx8RWxlbWVudC5TaG9ydFN0eWxlc1tpXSl7cmV0dXJuOwp9bD1TdHJpbmcoay5zdHlsZVtpXSk7Y1tpXT0oKC9ecmdiLykudGVzdChsKSk/bC5yZ2JUb0hleCgpOmw7fSk7fSk7fSk7cmV0dXJuIEZ4LkNTUy5DYWNoZVthXT1jO319KTtGeC5DU1MuQ2FjaGU9e307RnguQ1NTLlBhcnNlcnM9e0NvbG9yOntwYXJzZTpmdW5jdGlvbihhKXtpZihhLm1hdGNoKC9eI1swLTlhLWZdezMsNn0kL2kpKXtyZXR1cm4gYS5oZXhUb1JnYih0cnVlKTsKfXJldHVybigoYT1hLm1hdGNoKC8oXGQrKSxccyooXGQrKSxccyooXGQrKS8pKSk/W2FbMV0sYVsyXSxhWzNdXTpmYWxzZTt9LGNvbXB1dGU6ZnVuY3Rpb24oYyxiLGEpe3JldHVybiBjLm1hcChmdW5jdGlvbihlLGQpe3JldHVybiBNYXRoLnJvdW5kKEZ4LmNvbXB1dGUoY1tkXSxiW2RdLGEpKTsKfSk7fSxzZXJ2ZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5tYXAoTnVtYmVyKTt9fSxOdW1iZXI6e3BhcnNlOnBhcnNlRmxvYXQsY29tcHV0ZTpGeC5jb21wdXRlLHNlcnZlOmZ1bmN0aW9uKGIsYSl7cmV0dXJuKGEpP2IrYTpiO319LFN0cmluZzp7cGFyc2U6RnVuY3Rpb24uZnJvbShmYWxzZSksY29tcHV0ZTpmdW5jdGlvbihiLGEpe3JldHVybiBhOwp9LHNlcnZlOmZ1bmN0aW9uKGEpe3JldHVybiBhO319fTtGeC5DU1MuUGFyc2Vycz1uZXcgSGFzaChGeC5DU1MuUGFyc2Vycyk7RnguVHdlZW49bmV3IENsYXNzKHtFeHRlbmRzOkZ4LkNTUyxpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5lbGVtZW50PXRoaXMuc3ViamVjdD1kb2N1bWVudC5pZChiKTsKdGhpcy5wYXJlbnQoYSk7fSxzZXQ6ZnVuY3Rpb24oYixhKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXthPWI7Yj10aGlzLnByb3BlcnR5fHx0aGlzLm9wdGlvbnMucHJvcGVydHk7fXRoaXMucmVuZGVyKHRoaXMuZWxlbWVudCxiLGEsdGhpcy5vcHRpb25zLnVuaXQpOwpyZXR1cm4gdGhpczt9LHN0YXJ0OmZ1bmN0aW9uKGMsZSxkKXtpZighdGhpcy5jaGVjayhjLGUsZCkpe3JldHVybiB0aGlzO312YXIgYj1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cyk7dGhpcy5wcm9wZXJ0eT10aGlzLm9wdGlvbnMucHJvcGVydHl8fGIuc2hpZnQoKTt2YXIgYT10aGlzLnByZXBhcmUodGhpcy5lbGVtZW50LHRoaXMucHJvcGVydHksYik7CnJldHVybiB0aGlzLnBhcmVudChhLmZyb20sYS50byk7fX0pO0VsZW1lbnQuUHJvcGVydGllcy50d2Vlbj17c2V0OmZ1bmN0aW9uKGEpe3RoaXMuZ2V0KCJ0d2VlbiIpLmNhbmNlbCgpLnNldE9wdGlvbnMoYSk7cmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJldHJpZXZlKCJ0d2VlbiIpOwppZighYSl7YT1uZXcgRnguVHdlZW4odGhpcyx7bGluazoiY2FuY2VsIn0pO3RoaXMuc3RvcmUoInR3ZWVuIixhKTt9cmV0dXJuIGE7fX07RWxlbWVudC5pbXBsZW1lbnQoe3R3ZWVuOmZ1bmN0aW9uKGEsYyxiKXt0aGlzLmdldCgidHdlZW4iKS5zdGFydChhLGMsYik7CnJldHVybiB0aGlzO30sZmFkZTpmdW5jdGlvbihkKXt2YXIgZT10aGlzLmdldCgidHdlZW4iKSxnLGM9WyJvcGFjaXR5Il0uYXBwZW5kKGFyZ3VtZW50cyksYTtpZihjWzFdPT1udWxsKXtjWzFdPSJ0b2dnbGUiO31zd2l0Y2goY1sxXSl7Y2FzZSJpbiI6Zz0ic3RhcnQiOwpjWzFdPTE7YnJlYWs7Y2FzZSJvdXQiOmc9InN0YXJ0IjtjWzFdPTA7YnJlYWs7Y2FzZSJzaG93IjpnPSJzZXQiO2NbMV09MTticmVhaztjYXNlImhpZGUiOmc9InNldCI7Y1sxXT0wO2JyZWFrO2Nhc2UidG9nZ2xlIjp2YXIgYj10aGlzLnJldHJpZXZlKCJmYWRlOmZsYWciLHRoaXMuZ2V0U3R5bGUoIm9wYWNpdHkiKT09MSk7Cmc9InN0YXJ0IjtjWzFdPWI/MDoxO3RoaXMuc3RvcmUoImZhZGU6ZmxhZyIsIWIpO2E9dHJ1ZTticmVhaztkZWZhdWx0Omc9InN0YXJ0Ijt9aWYoIWEpe3RoaXMuZWxpbWluYXRlKCJmYWRlOmZsYWciKTt9ZVtnXS5hcHBseShlLGMpO3ZhciBmPWNbYy5sZW5ndGgtMV07CmlmKGc9PSJzZXQifHxmIT0wKXt0aGlzLnNldFN0eWxlKCJ2aXNpYmlsaXR5IixmPT0wPyJoaWRkZW4iOiJ2aXNpYmxlIik7fWVsc2V7ZS5jaGFpbihmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5zZXRTdHlsZSgidmlzaWJpbGl0eSIsImhpZGRlbiIpO3RoaXMuY2FsbENoYWluKCk7Cn0pO31yZXR1cm4gdGhpczt9LGhpZ2hsaWdodDpmdW5jdGlvbihjLGEpe2lmKCFhKXthPXRoaXMucmV0cmlldmUoImhpZ2hsaWdodDpvcmlnaW5hbCIsdGhpcy5nZXRTdHlsZSgiYmFja2dyb3VuZC1jb2xvciIpKTthPShhPT0idHJhbnNwYXJlbnQiKT8iI2ZmZiI6YTsKfXZhciBiPXRoaXMuZ2V0KCJ0d2VlbiIpO2Iuc3RhcnQoImJhY2tncm91bmQtY29sb3IiLGN8fCIjZmZmZjg4IixhKS5jaGFpbihmdW5jdGlvbigpe3RoaXMuc2V0U3R5bGUoImJhY2tncm91bmQtY29sb3IiLHRoaXMucmV0cmlldmUoImhpZ2hsaWdodDpvcmlnaW5hbCIpKTsKYi5jYWxsQ2hhaW4oKTt9LmJpbmQodGhpcykpO3JldHVybiB0aGlzO319KTtGeC5Nb3JwaD1uZXcgQ2xhc3Moe0V4dGVuZHM6RnguQ1NTLGluaXRpYWxpemU6ZnVuY3Rpb24oYixhKXt0aGlzLmVsZW1lbnQ9dGhpcy5zdWJqZWN0PWRvY3VtZW50LmlkKGIpO3RoaXMucGFyZW50KGEpOwp9LHNldDpmdW5jdGlvbihhKXtpZih0eXBlb2YgYT09InN0cmluZyIpe2E9dGhpcy5zZWFyY2goYSk7fWZvcih2YXIgYiBpbiBhKXt0aGlzLnJlbmRlcih0aGlzLmVsZW1lbnQsYixhW2JdLHRoaXMub3B0aW9ucy51bml0KTt9cmV0dXJuIHRoaXM7fSxjb21wdXRlOmZ1bmN0aW9uKGUsZCxjKXt2YXIgYT17fTsKZm9yKHZhciBiIGluIGUpe2FbYl09dGhpcy5wYXJlbnQoZVtiXSxkW2JdLGMpO31yZXR1cm4gYTt9LHN0YXJ0OmZ1bmN0aW9uKGIpe2lmKCF0aGlzLmNoZWNrKGIpKXtyZXR1cm4gdGhpczt9aWYodHlwZW9mIGI9PSJzdHJpbmciKXtiPXRoaXMuc2VhcmNoKGIpO312YXIgZT17fSxkPXt9Owpmb3IodmFyIGMgaW4gYil7dmFyIGE9dGhpcy5wcmVwYXJlKHRoaXMuZWxlbWVudCxjLGJbY10pO2VbY109YS5mcm9tO2RbY109YS50bzt9cmV0dXJuIHRoaXMucGFyZW50KGUsZCk7fX0pO0VsZW1lbnQuUHJvcGVydGllcy5tb3JwaD17c2V0OmZ1bmN0aW9uKGEpe3RoaXMuZ2V0KCJtb3JwaCIpLmNhbmNlbCgpLnNldE9wdGlvbnMoYSk7CnJldHVybiB0aGlzO30sZ2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZXRyaWV2ZSgibW9ycGgiKTtpZighYSl7YT1uZXcgRnguTW9ycGgodGhpcyx7bGluazoiY2FuY2VsIn0pO3RoaXMuc3RvcmUoIm1vcnBoIixhKTt9cmV0dXJuIGE7fX07RWxlbWVudC5pbXBsZW1lbnQoe21vcnBoOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0KCJtb3JwaCIpLnN0YXJ0KGEpOwpyZXR1cm4gdGhpczt9fSk7RnguaW1wbGVtZW50KHtnZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLnRyYW5zaXRpb258fEZ4LlRyYW5zaXRpb25zLlNpbmUuZWFzZUluT3V0O2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7dmFyIGI9YS5zcGxpdCgiOiIpOwphPUZ4LlRyYW5zaXRpb25zO2E9YVtiWzBdXXx8YVtiWzBdLmNhcGl0YWxpemUoKV07aWYoYlsxXSl7YT1hWyJlYXNlIitiWzFdLmNhcGl0YWxpemUoKSsoYlsyXT9iWzJdLmNhcGl0YWxpemUoKToiIildO319cmV0dXJuIGE7fX0pO0Z4LlRyYW5zaXRpb249ZnVuY3Rpb24oYyxiKXtiPUFycmF5LmZyb20oYik7CnZhciBhPWZ1bmN0aW9uKGQpe3JldHVybiBjKGQsYik7fTtyZXR1cm4gT2JqZWN0LmFwcGVuZChhLHtlYXNlSW46YSxlYXNlT3V0OmZ1bmN0aW9uKGQpe3JldHVybiAxLWMoMS1kLGIpO30sZWFzZUluT3V0OmZ1bmN0aW9uKGQpe3JldHVybihkPD0wLjU/YygyKmQsYik6KDItYygyKigxLWQpLGIpKSkvMjsKfX0pO307RnguVHJhbnNpdGlvbnM9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYTt9fTtGeC5UcmFuc2l0aW9ucz1uZXcgSGFzaChGeC5UcmFuc2l0aW9ucyk7RnguVHJhbnNpdGlvbnMuZXh0ZW5kPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKXtGeC5UcmFuc2l0aW9uc1tiXT1uZXcgRnguVHJhbnNpdGlvbihhW2JdKTsKfX07RnguVHJhbnNpdGlvbnMuZXh0ZW5kKHtQb3c6ZnVuY3Rpb24oYixhKXtyZXR1cm4gTWF0aC5wb3coYixhJiZhWzBdfHw2KTt9LEV4cG86ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KDIsOCooYS0xKSk7fSxDaXJjOmZ1bmN0aW9uKGEpe3JldHVybiAxLU1hdGguc2luKE1hdGguYWNvcyhhKSk7Cn0sU2luZTpmdW5jdGlvbihhKXtyZXR1cm4gMS1NYXRoLmNvcyhhKk1hdGguUEkvMik7fSxCYWNrOmZ1bmN0aW9uKGIsYSl7YT1hJiZhWzBdfHwxLjYxODtyZXR1cm4gTWF0aC5wb3coYiwyKSooKGErMSkqYi1hKTt9LEJvdW5jZTpmdW5jdGlvbihmKXt2YXIgZTtmb3IodmFyIGQ9MCxjPTE7CjE7ZCs9YyxjLz0yKXtpZihmPj0oNy00KmQpLzExKXtlPWMqYy1NYXRoLnBvdygoMTEtNipkLTExKmYpLzQsMik7YnJlYWs7fX1yZXR1cm4gZTt9LEVsYXN0aWM6ZnVuY3Rpb24oYixhKXtyZXR1cm4gTWF0aC5wb3coMiwxMCotLWIpKk1hdGguY29zKDIwKmIqTWF0aC5QSSooYSYmYVswXXx8MSkvMyk7Cn19KTtbIlF1YWQiLCJDdWJpYyIsIlF1YXJ0IiwiUXVpbnQiXS5lYWNoKGZ1bmN0aW9uKGIsYSl7RnguVHJhbnNpdGlvbnNbYl09bmV3IEZ4LlRyYW5zaXRpb24oZnVuY3Rpb24oYyl7cmV0dXJuIE1hdGgucG93KGMsYSsyKTt9KTt9KTsoZnVuY3Rpb24oKXt2YXIgZD1mdW5jdGlvbigpe30sYT0oIm9ucHJvZ3Jlc3MiIGluIG5ldyBCcm93c2VyLlJlcXVlc3QpOwp2YXIgYz10aGlzLlJlcXVlc3Q9bmV3IENsYXNzKHtJbXBsZW1lbnRzOltDaGFpbixFdmVudHMsT3B0aW9uc10sb3B0aW9uczp7dXJsOiIiLGRhdGE6IiIsaGVhZGVyczp7IlgtUmVxdWVzdGVkLVdpdGgiOiJYTUxIdHRwUmVxdWVzdCIsQWNjZXB0OiJ0ZXh0L2phdmFzY3JpcHQsIHRleHQvaHRtbCwgYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCwgKi8qIn0sYXN5bmM6dHJ1ZSxmb3JtYXQ6ZmFsc2UsbWV0aG9kOiJwb3N0IixsaW5rOiJpZ25vcmUiLGlzU3VjY2VzczpudWxsLGVtdWxhdGlvbjp0cnVlLHVybEVuY29kZWQ6dHJ1ZSxlbmNvZGluZzoidXRmLTgiLGV2YWxTY3JpcHRzOmZhbHNlLGV2YWxSZXNwb25zZTpmYWxzZSx0aW1lb3V0OjAsbm9DYWNoZTpmYWxzZX0saW5pdGlhbGl6ZTpmdW5jdGlvbihlKXt0aGlzLnhocj1uZXcgQnJvd3Nlci5SZXF1ZXN0KCk7CnRoaXMuc2V0T3B0aW9ucyhlKTt0aGlzLmhlYWRlcnM9dGhpcy5vcHRpb25zLmhlYWRlcnM7fSxvblN0YXRlQ2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy54aHI7aWYoZS5yZWFkeVN0YXRlIT00fHwhdGhpcy5ydW5uaW5nKXtyZXR1cm47fXRoaXMucnVubmluZz1mYWxzZTsKdGhpcy5zdGF0dXM9MDtGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7dmFyIGY9ZS5zdGF0dXM7dGhpcy5zdGF0dXM9KGY9PTEyMjMpPzIwNDpmO30uYmluZCh0aGlzKSk7ZS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZDtpZihhKXtlLm9ucHJvZ3Jlc3M9ZS5vbmxvYWRzdGFydD1kOwp9Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO3RoaXMucmVzcG9uc2U9e3RleHQ6dGhpcy54aHIucmVzcG9uc2VUZXh0fHwiIix4bWw6dGhpcy54aHIucmVzcG9uc2VYTUx9O2lmKHRoaXMub3B0aW9ucy5pc1N1Y2Nlc3MuY2FsbCh0aGlzLHRoaXMuc3RhdHVzKSl7dGhpcy5zdWNjZXNzKHRoaXMucmVzcG9uc2UudGV4dCx0aGlzLnJlc3BvbnNlLnhtbCk7Cn1lbHNle3RoaXMuZmFpbHVyZSgpO319LGlzU3VjY2VzczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3RhdHVzO3JldHVybihlPj0yMDAmJmU8MzAwKTt9LGlzUnVubmluZzpmdW5jdGlvbigpe3JldHVybiAhIXRoaXMucnVubmluZzt9LHByb2Nlc3NTY3JpcHRzOmZ1bmN0aW9uKGUpe2lmKHRoaXMub3B0aW9ucy5ldmFsUmVzcG9uc2V8fCgvKGVjbWF8amF2YSlzY3JpcHQvKS50ZXN0KHRoaXMuZ2V0SGVhZGVyKCJDb250ZW50LXR5cGUiKSkpe3JldHVybiBCcm93c2VyLmV4ZWMoZSk7Cn1yZXR1cm4gZS5zdHJpcFNjcmlwdHModGhpcy5vcHRpb25zLmV2YWxTY3JpcHRzKTt9LHN1Y2Nlc3M6ZnVuY3Rpb24oZixlKXt0aGlzLm9uU3VjY2Vzcyh0aGlzLnByb2Nlc3NTY3JpcHRzKGYpLGUpO30sb25TdWNjZXNzOmZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoImNvbXBsZXRlIixhcmd1bWVudHMpLmZpcmVFdmVudCgic3VjY2VzcyIsYXJndW1lbnRzKS5jYWxsQ2hhaW4oKTsKfSxmYWlsdXJlOmZ1bmN0aW9uKCl7dGhpcy5vbkZhaWx1cmUoKTt9LG9uRmFpbHVyZTpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIpLmZpcmVFdmVudCgiZmFpbHVyZSIsdGhpcy54aHIpO30sbG9hZHN0YXJ0OmZ1bmN0aW9uKGUpe3RoaXMuZmlyZUV2ZW50KCJsb2Fkc3RhcnQiLFtlLHRoaXMueGhyXSk7Cn0scHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7dGhpcy5maXJlRXZlbnQoInByb2dyZXNzIixbZSx0aGlzLnhocl0pO30sdGltZW91dDpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJ0aW1lb3V0Iix0aGlzLnhocik7fSxzZXRIZWFkZXI6ZnVuY3Rpb24oZSxmKXt0aGlzLmhlYWRlcnNbZV09ZjsKcmV0dXJuIHRoaXM7fSxnZXRIZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIEZ1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54aHIuZ2V0UmVzcG9uc2VIZWFkZXIoZSk7fS5iaW5kKHRoaXMpKTt9LGNoZWNrOmZ1bmN0aW9uKCl7aWYoIXRoaXMucnVubmluZyl7cmV0dXJuIHRydWU7Cn1zd2l0Y2godGhpcy5vcHRpb25zLmxpbmspe2Nhc2UiY2FuY2VsIjp0aGlzLmNhbmNlbCgpO3JldHVybiB0cnVlO2Nhc2UiY2hhaW4iOnRoaXMuY2hhaW4odGhpcy5jYWxsZXIucGFzcyhhcmd1bWVudHMsdGhpcykpO3JldHVybiBmYWxzZTt9cmV0dXJuIGZhbHNlO30sc2VuZDpmdW5jdGlvbihvKXtpZighdGhpcy5jaGVjayhvKSl7cmV0dXJuIHRoaXM7Cn10aGlzLm9wdGlvbnMuaXNTdWNjZXNzPXRoaXMub3B0aW9ucy5pc1N1Y2Nlc3N8fHRoaXMuaXNTdWNjZXNzO3RoaXMucnVubmluZz10cnVlO3ZhciBsPXR5cGVPZihvKTtpZihsPT0ic3RyaW5nInx8bD09ImVsZW1lbnQiKXtvPXtkYXRhOm99O312YXIgaD10aGlzLm9wdGlvbnM7Cm89T2JqZWN0LmFwcGVuZCh7ZGF0YTpoLmRhdGEsdXJsOmgudXJsLG1ldGhvZDpoLm1ldGhvZH0sbyk7dmFyIGo9by5kYXRhLGY9U3RyaW5nKG8udXJsKSxlPW8ubWV0aG9kLnRvTG93ZXJDYXNlKCk7c3dpdGNoKHR5cGVPZihqKSl7Y2FzZSJlbGVtZW50IjpqPWRvY3VtZW50LmlkKGopLnRvUXVlcnlTdHJpbmcoKTsKYnJlYWs7Y2FzZSJvYmplY3QiOmNhc2UiaGFzaCI6aj1PYmplY3QudG9RdWVyeVN0cmluZyhqKTt9aWYodGhpcy5vcHRpb25zLmZvcm1hdCl7dmFyIG09ImZvcm1hdD0iK3RoaXMub3B0aW9ucy5mb3JtYXQ7aj0oaik/bSsiJiIrajptO31pZih0aGlzLm9wdGlvbnMuZW11bGF0aW9uJiYhWyJnZXQiLCJwb3N0Il0uY29udGFpbnMoZSkpe3ZhciBrPSJfbWV0aG9kPSIrZTsKaj0oaik/aysiJiIrajprO2U9InBvc3QiO31pZih0aGlzLm9wdGlvbnMudXJsRW5jb2RlZCYmWyJwb3N0IiwicHV0Il0uY29udGFpbnMoZSkpe3ZhciBnPSh0aGlzLm9wdGlvbnMuZW5jb2RpbmcpPyI7IGNoYXJzZXQ9Iit0aGlzLm9wdGlvbnMuZW5jb2Rpbmc6IiI7dGhpcy5oZWFkZXJzWyJDb250ZW50LXR5cGUiXT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIitnOwp9aWYoIWYpe2Y9ZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWU7fXZhciBpPWYubGFzdEluZGV4T2YoIi8iKTtpZihpPi0xJiYoaT1mLmluZGV4T2YoIiMiKSk+LTEpe2Y9Zi5zdWJzdHIoMCxpKTt9aWYodGhpcy5vcHRpb25zLm5vQ2FjaGUpe2YrPShmLmNvbnRhaW5zKCI/Iik/IiYiOiI/IikrU3RyaW5nLnVuaXF1ZUlEKCk7Cn1pZihqJiZlPT0iZ2V0Iil7Zis9KGYuY29udGFpbnMoIj8iKT8iJiI6Ij8iKStqO2o9bnVsbDt9dmFyIG49dGhpcy54aHI7aWYoYSl7bi5vbmxvYWRzdGFydD10aGlzLmxvYWRzdGFydC5iaW5kKHRoaXMpO24ub25wcm9ncmVzcz10aGlzLnByb2dyZXNzLmJpbmQodGhpcyk7Cn1uLm9wZW4oZS50b1VwcGVyQ2FzZSgpLGYsdGhpcy5vcHRpb25zLmFzeW5jLHRoaXMub3B0aW9ucy51c2VyLHRoaXMub3B0aW9ucy5wYXNzd29yZCk7aWYodGhpcy5vcHRpb25zLnVzZXImJiJ3aXRoQ3JlZGVudGlhbHMiIGluIG4pe24ud2l0aENyZWRlbnRpYWxzPXRydWU7Cn1uLm9ucmVhZHlzdGF0ZWNoYW5nZT10aGlzLm9uU3RhdGVDaGFuZ2UuYmluZCh0aGlzKTtPYmplY3QuZWFjaCh0aGlzLmhlYWRlcnMsZnVuY3Rpb24ocSxwKXt0cnl7bi5zZXRSZXF1ZXN0SGVhZGVyKHAscSk7fWNhdGNoKHIpe3RoaXMuZmlyZUV2ZW50KCJleGNlcHRpb24iLFtwLHFdKTsKfX0sdGhpcyk7dGhpcy5maXJlRXZlbnQoInJlcXVlc3QiKTtuLnNlbmQoaik7aWYoIXRoaXMub3B0aW9ucy5hc3luYyl7dGhpcy5vblN0YXRlQ2hhbmdlKCk7fWVsc2V7aWYodGhpcy5vcHRpb25zLnRpbWVvdXQpe3RoaXMudGltZXI9dGhpcy50aW1lb3V0LmRlbGF5KHRoaXMub3B0aW9ucy50aW1lb3V0LHRoaXMpOwp9fXJldHVybiB0aGlzO30sY2FuY2VsOmZ1bmN0aW9uKCl7aWYoIXRoaXMucnVubmluZyl7cmV0dXJuIHRoaXM7fXRoaXMucnVubmluZz1mYWxzZTt2YXIgZT10aGlzLnhocjtlLmFib3J0KCk7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO2Uub25yZWFkeXN0YXRlY2hhbmdlPWQ7CmlmKGEpe2Uub25wcm9ncmVzcz1lLm9ubG9hZHN0YXJ0PWQ7fXRoaXMueGhyPW5ldyBCcm93c2VyLlJlcXVlc3QoKTt0aGlzLmZpcmVFdmVudCgiY2FuY2VsIik7cmV0dXJuIHRoaXM7fX0pO3ZhciBiPXt9O1siZ2V0IiwicG9zdCIsInB1dCIsImRlbGV0ZSIsIkdFVCIsIlBPU1QiLCJQVVQiLCJERUxFVEUiXS5lYWNoKGZ1bmN0aW9uKGUpe2JbZV09ZnVuY3Rpb24oZyl7dmFyIGY9e21ldGhvZDplfTsKaWYoZyE9bnVsbCl7Zi5kYXRhPWc7fXJldHVybiB0aGlzLnNlbmQoZik7fTt9KTtjLmltcGxlbWVudChiKTtFbGVtZW50LlByb3BlcnRpZXMuc2VuZD17c2V0OmZ1bmN0aW9uKGUpe3ZhciBmPXRoaXMuZ2V0KCJzZW5kIikuY2FuY2VsKCk7Zi5zZXRPcHRpb25zKGUpOwpyZXR1cm4gdGhpczt9LGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmV0cmlldmUoInNlbmQiKTtpZighZSl7ZT1uZXcgYyh7ZGF0YTp0aGlzLGxpbms6ImNhbmNlbCIsbWV0aG9kOnRoaXMuZ2V0KCJtZXRob2QiKXx8InBvc3QiLHVybDp0aGlzLmdldCgiYWN0aW9uIil9KTsKdGhpcy5zdG9yZSgic2VuZCIsZSk7fXJldHVybiBlO319O0VsZW1lbnQuaW1wbGVtZW50KHtzZW5kOmZ1bmN0aW9uKGUpe3ZhciBmPXRoaXMuZ2V0KCJzZW5kIik7Zi5zZW5kKHtkYXRhOnRoaXMsdXJsOmV8fGYub3B0aW9ucy51cmx9KTtyZXR1cm4gdGhpczt9fSk7fSkoKTsKUmVxdWVzdC5IVE1MPW5ldyBDbGFzcyh7RXh0ZW5kczpSZXF1ZXN0LG9wdGlvbnM6e3VwZGF0ZTpmYWxzZSxhcHBlbmQ6ZmFsc2UsZXZhbFNjcmlwdHM6dHJ1ZSxmaWx0ZXI6ZmFsc2UsaGVhZGVyczp7QWNjZXB0OiJ0ZXh0L2h0bWwsIGFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwsICovKiJ9fSxzdWNjZXNzOmZ1bmN0aW9uKGYpe3ZhciBlPXRoaXMub3B0aW9ucyxjPXRoaXMucmVzcG9uc2U7CmMuaHRtbD1mLnN0cmlwU2NyaXB0cyhmdW5jdGlvbihoKXtjLmphdmFzY3JpcHQ9aDt9KTt2YXIgZD1jLmh0bWwubWF0Y2goLzxib2R5W14+XSo+KFtcc1xTXSo/KTxcL2JvZHk+L2kpO2lmKGQpe2MuaHRtbD1kWzFdO312YXIgYj1uZXcgRWxlbWVudCgiZGl2Iikuc2V0KCJodG1sIixjLmh0bWwpOwpjLnRyZWU9Yi5jaGlsZE5vZGVzO2MuZWxlbWVudHM9Yi5nZXRFbGVtZW50cyhlLmZpbHRlcnx8IioiKTtpZihlLmZpbHRlcil7Yy50cmVlPWMuZWxlbWVudHM7fWlmKGUudXBkYXRlKXt2YXIgZz1kb2N1bWVudC5pZChlLnVwZGF0ZSkuZW1wdHkoKTtpZihlLmZpbHRlcil7Zy5hZG9wdChjLmVsZW1lbnRzKTsKfWVsc2V7Zy5zZXQoImh0bWwiLGMuaHRtbCk7fX1lbHNle2lmKGUuYXBwZW5kKXt2YXIgYT1kb2N1bWVudC5pZChlLmFwcGVuZCk7aWYoZS5maWx0ZXIpe2MuZWxlbWVudHMucmV2ZXJzZSgpLmluamVjdChhKTt9ZWxzZXthLmFkb3B0KGIuZ2V0Q2hpbGRyZW4oKSk7fX19aWYoZS5ldmFsU2NyaXB0cyl7QnJvd3Nlci5leGVjKGMuamF2YXNjcmlwdCk7Cn10aGlzLm9uU3VjY2VzcyhjLnRyZWUsYy5lbGVtZW50cyxjLmh0bWwsYy5qYXZhc2NyaXB0KTt9fSk7RWxlbWVudC5Qcm9wZXJ0aWVzLmxvYWQ9e3NldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldCgibG9hZCIpLmNhbmNlbCgpO2Iuc2V0T3B0aW9ucyhhKTtyZXR1cm4gdGhpczsKfSxnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJldHJpZXZlKCJsb2FkIik7aWYoIWEpe2E9bmV3IFJlcXVlc3QuSFRNTCh7ZGF0YTp0aGlzLGxpbms6ImNhbmNlbCIsdXBkYXRlOnRoaXMsbWV0aG9kOiJnZXQifSk7dGhpcy5zdG9yZSgibG9hZCIsYSk7fXJldHVybiBhOwp9fTtFbGVtZW50LmltcGxlbWVudCh7bG9hZDpmdW5jdGlvbigpe3RoaXMuZ2V0KCJsb2FkIikuc2VuZChBcnJheS5saW5rKGFyZ3VtZW50cyx7ZGF0YTpUeXBlLmlzT2JqZWN0LHVybDpUeXBlLmlzU3RyaW5nfSkpO3JldHVybiB0aGlzO319KTtpZih0eXBlb2YgSlNPTj09InVuZGVmaW5lZCIpe3RoaXMuSlNPTj17fTsKfUpTT049bmV3IEhhc2goe3N0cmluZ2lmeTpKU09OLnN0cmluZ2lmeSxwYXJzZTpKU09OLnBhcnNlfSk7KGZ1bmN0aW9uKCl7dmFyIHNwZWNpYWw9eyJcYiI6IlxcYiIsIlx0IjoiXFx0IiwiXG4iOiJcXG4iLCJcZiI6IlxcZiIsIlxyIjoiXFxyIiwnIic6J1xcIicsIlxcIjoiXFxcXCJ9Owp2YXIgZXNjYXBlPWZ1bmN0aW9uKGNocil7cmV0dXJuIHNwZWNpYWxbY2hyXXx8IlxcdSIrKCIwMDAwIitjaHIuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KTt9O0pTT04udmFsaWRhdGU9ZnVuY3Rpb24oc3RyaW5nKXtzdHJpbmc9c3RyaW5nLnJlcGxhY2UoL1xcKD86WyJcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZywiQCIpLnJlcGxhY2UoLyJbXiJcXFxuXHJdKiJ8dHJ1ZXxmYWxzZXxudWxsfC0/XGQrKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPy9nLCJdIikucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCIiKTsKcmV0dXJuKC9eW1xdLDp7fVxzXSokLykudGVzdChzdHJpbmcpO307SlNPTi5lbmNvZGU9SlNPTi5zdHJpbmdpZnk/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTt9OmZ1bmN0aW9uKG9iail7aWYob2JqJiZvYmoudG9KU09OKXtvYmo9b2JqLnRvSlNPTigpOwp9c3dpdGNoKHR5cGVPZihvYmopKXtjYXNlInN0cmluZyI6cmV0dXJuJyInK29iai5yZXBsYWNlKC9bXHgwMC1ceDFmXFwiXS9nLGVzY2FwZSkrJyInO2Nhc2UiYXJyYXkiOnJldHVybiJbIitvYmoubWFwKEpTT04uZW5jb2RlKS5jbGVhbigpKyJdIjtjYXNlIm9iamVjdCI6Y2FzZSJoYXNoIjp2YXIgc3RyaW5nPVtdOwpPYmplY3QuZWFjaChvYmosZnVuY3Rpb24odmFsdWUsa2V5KXt2YXIganNvbj1KU09OLmVuY29kZSh2YWx1ZSk7aWYoanNvbil7c3RyaW5nLnB1c2goSlNPTi5lbmNvZGUoa2V5KSsiOiIranNvbik7fX0pO3JldHVybiJ7IitzdHJpbmcrIn0iO2Nhc2UibnVtYmVyIjpjYXNlImJvb2xlYW4iOnJldHVybiIiK29iajsKY2FzZSJudWxsIjpyZXR1cm4ibnVsbCI7fXJldHVybiBudWxsO307SlNPTi5kZWNvZGU9ZnVuY3Rpb24oc3RyaW5nLHNlY3VyZSl7aWYoIXN0cmluZ3x8dHlwZU9mKHN0cmluZykhPSJzdHJpbmciKXtyZXR1cm4gbnVsbDt9aWYoc2VjdXJlfHxKU09OLnNlY3VyZSl7aWYoSlNPTi5wYXJzZSl7cmV0dXJuIEpTT04ucGFyc2Uoc3RyaW5nKTsKfWlmKCFKU09OLnZhbGlkYXRlKHN0cmluZykpe3Rocm93IG5ldyBFcnJvcigiSlNPTiBjb3VsZCBub3QgZGVjb2RlIHRoZSBpbnB1dDsgc2VjdXJpdHkgaXMgZW5hYmxlZCBhbmQgdGhlIHZhbHVlIGlzIG5vdCBzZWN1cmUuIik7fX1yZXR1cm4gZXZhbCgiKCIrc3RyaW5nKyIpIik7Cn07fSkoKTtSZXF1ZXN0LkpTT049bmV3IENsYXNzKHtFeHRlbmRzOlJlcXVlc3Qsb3B0aW9uczp7c2VjdXJlOnRydWV9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnQoYSk7T2JqZWN0LmFwcGVuZCh0aGlzLmhlYWRlcnMse0FjY2VwdDoiYXBwbGljYXRpb24vanNvbiIsIlgtUmVxdWVzdCI6IkpTT04ifSk7Cn0sc3VjY2VzczpmdW5jdGlvbihjKXt2YXIgYjt0cnl7Yj10aGlzLnJlc3BvbnNlLmpzb249SlNPTi5kZWNvZGUoYyx0aGlzLm9wdGlvbnMuc2VjdXJlKTt9Y2F0Y2goYSl7dGhpcy5maXJlRXZlbnQoImVycm9yIixbYyxhXSk7cmV0dXJuO31pZihiPT1udWxsKXt0aGlzLm9uRmFpbHVyZSgpOwp9ZWxzZXt0aGlzLm9uU3VjY2VzcyhiLGMpO319fSk7dmFyIENvb2tpZT1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6T3B0aW9ucyxvcHRpb25zOntwYXRoOiIvIixkb21haW46ZmFsc2UsZHVyYXRpb246ZmFsc2Usc2VjdXJlOmZhbHNlLGRvY3VtZW50OmRvY3VtZW50LGVuY29kZTp0cnVlfSxpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5rZXk9YjsKdGhpcy5zZXRPcHRpb25zKGEpO30sd3JpdGU6ZnVuY3Rpb24oYil7aWYodGhpcy5vcHRpb25zLmVuY29kZSl7Yj1lbmNvZGVVUklDb21wb25lbnQoYik7fWlmKHRoaXMub3B0aW9ucy5kb21haW4pe2IrPSI7IGRvbWFpbj0iK3RoaXMub3B0aW9ucy5kb21haW47fWlmKHRoaXMub3B0aW9ucy5wYXRoKXtiKz0iOyBwYXRoPSIrdGhpcy5vcHRpb25zLnBhdGg7Cn1pZih0aGlzLm9wdGlvbnMuZHVyYXRpb24pe3ZhciBhPW5ldyBEYXRlKCk7YS5zZXRUaW1lKGEuZ2V0VGltZSgpK3RoaXMub3B0aW9ucy5kdXJhdGlvbioyNCo2MCo2MCoxMDAwKTtiKz0iOyBleHBpcmVzPSIrYS50b0dNVFN0cmluZygpO31pZih0aGlzLm9wdGlvbnMuc2VjdXJlKXtiKz0iOyBzZWN1cmUiOwp9dGhpcy5vcHRpb25zLmRvY3VtZW50LmNvb2tpZT10aGlzLmtleSsiPSIrYjtyZXR1cm4gdGhpczt9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuZG9jdW1lbnQuY29va2llLm1hdGNoKCIoPzpefDspXFxzKiIrdGhpcy5rZXkuZXNjYXBlUmVnRXhwKCkrIj0oW147XSopIik7CnJldHVybihhKT9kZWNvZGVVUklDb21wb25lbnQoYVsxXSk6bnVsbDt9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtuZXcgQ29va2llKHRoaXMua2V5LE9iamVjdC5tZXJnZSh7fSx0aGlzLm9wdGlvbnMse2R1cmF0aW9uOi0xfSkpLndyaXRlKCIiKTtyZXR1cm4gdGhpczt9fSk7CkNvb2tpZS53cml0ZT1mdW5jdGlvbihiLGMsYSl7cmV0dXJuIG5ldyBDb29raWUoYixhKS53cml0ZShjKTt9O0Nvb2tpZS5yZWFkPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQ29va2llKGEpLnJlYWQoKTt9O0Nvb2tpZS5kaXNwb3NlPWZ1bmN0aW9uKGIsYSl7cmV0dXJuIG5ldyBDb29raWUoYixhKS5kaXNwb3NlKCk7Cn07KGZ1bmN0aW9uKGksayl7dmFyIGwsZixlPVtdLGMsYixkPWsuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIGc9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYik7aWYobCl7cmV0dXJuO31Ccm93c2VyLmxvYWRlZD1sPXRydWU7ay5yZW1vdmVMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZykucmVtb3ZlTGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGEpOwprLmZpcmVFdmVudCgiZG9tcmVhZHkiKTtpLmZpcmVFdmVudCgiZG9tcmVhZHkiKTt9O3ZhciBhPWZ1bmN0aW9uKCl7Zm9yKHZhciBtPWUubGVuZ3RoO20tLTspe2lmKGVbbV0oKSl7ZygpO3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO307dmFyIGo9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYik7CmlmKCFhKCkpe2I9c2V0VGltZW91dChqLDEwKTt9fTtrLmFkZExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixnKTt2YXIgaD1mdW5jdGlvbigpe3RyeXtkLmRvU2Nyb2xsKCk7cmV0dXJuIHRydWU7fWNhdGNoKG0pe31yZXR1cm4gZmFsc2U7fTtpZihkLmRvU2Nyb2xsJiYhaCgpKXtlLnB1c2goaCk7CmM9dHJ1ZTt9aWYoay5yZWFkeVN0YXRlKXtlLnB1c2goZnVuY3Rpb24oKXt2YXIgbT1rLnJlYWR5U3RhdGU7cmV0dXJuKG09PSJsb2FkZWQifHxtPT0iY29tcGxldGUiKTt9KTt9aWYoIm9ucmVhZHlzdGF0ZWNoYW5nZSIgaW4gayl7ay5hZGRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsYSk7Cn1lbHNle2M9dHJ1ZTt9aWYoYyl7aigpO31FbGVtZW50LkV2ZW50cy5kb21yZWFkeT17b25BZGQ6ZnVuY3Rpb24obSl7aWYobCl7bS5jYWxsKHRoaXMpO319fTtFbGVtZW50LkV2ZW50cy5sb2FkPXtiYXNlOiJsb2FkIixvbkFkZDpmdW5jdGlvbihtKXtpZihmJiZ0aGlzPT1pKXttLmNhbGwodGhpcyk7Cn19LGNvbmRpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXM9PWkpe2coKTtkZWxldGUgRWxlbWVudC5FdmVudHMubG9hZDt9cmV0dXJuIHRydWU7fX07aS5hZGRFdmVudCgibG9hZCIsZnVuY3Rpb24oKXtmPXRydWU7fSk7fSkod2luZG93LGRvY3VtZW50KTsoZnVuY3Rpb24oKXt2YXIgU3dpZmY9dGhpcy5Td2lmZj1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6T3B0aW9ucyxvcHRpb25zOntpZDpudWxsLGhlaWdodDoxLHdpZHRoOjEsY29udGFpbmVyOm51bGwscHJvcGVydGllczp7fSxwYXJhbXM6e3F1YWxpdHk6ImhpZ2giLGFsbG93U2NyaXB0QWNjZXNzOiJhbHdheXMiLHdNb2RlOiJ3aW5kb3ciLHN3TGl2ZUNvbm5lY3Q6dHJ1ZX0sY2FsbEJhY2tzOnt9LHZhcnM6e319LHRvRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9iamVjdDsKfSxpbml0aWFsaXplOmZ1bmN0aW9uKHBhdGgsb3B0aW9ucyl7dGhpcy5pbnN0YW5jZT0iU3dpZmZfIitTdHJpbmcudW5pcXVlSUQoKTt0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7b3B0aW9ucz10aGlzLm9wdGlvbnM7dmFyIGlkPXRoaXMuaWQ9b3B0aW9ucy5pZHx8dGhpcy5pbnN0YW5jZTsKdmFyIGNvbnRhaW5lcj1kb2N1bWVudC5pZChvcHRpb25zLmNvbnRhaW5lcik7U3dpZmYuQ2FsbEJhY2tzW3RoaXMuaW5zdGFuY2VdPXt9O3ZhciBwYXJhbXM9b3B0aW9ucy5wYXJhbXMsdmFycz1vcHRpb25zLnZhcnMsY2FsbEJhY2tzPW9wdGlvbnMuY2FsbEJhY2tzOwp2YXIgcHJvcGVydGllcz1PYmplY3QuYXBwZW5kKHtoZWlnaHQ6b3B0aW9ucy5oZWlnaHQsd2lkdGg6b3B0aW9ucy53aWR0aH0sb3B0aW9ucy5wcm9wZXJ0aWVzKTt2YXIgc2VsZj10aGlzO2Zvcih2YXIgY2FsbEJhY2sgaW4gY2FsbEJhY2tzKXtTd2lmZi5DYWxsQmFja3NbdGhpcy5pbnN0YW5jZV1bY2FsbEJhY2tdPShmdW5jdGlvbihvcHRpb24pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBvcHRpb24uYXBwbHkoc2VsZi5vYmplY3QsYXJndW1lbnRzKTsKfTt9KShjYWxsQmFja3NbY2FsbEJhY2tdKTt2YXJzW2NhbGxCYWNrXT0iU3dpZmYuQ2FsbEJhY2tzLiIrdGhpcy5pbnN0YW5jZSsiLiIrY2FsbEJhY2s7fXBhcmFtcy5mbGFzaFZhcnM9T2JqZWN0LnRvUXVlcnlTdHJpbmcodmFycyk7aWYoQnJvd3Nlci5pZSl7cHJvcGVydGllcy5jbGFzc2lkPSJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiOwpwYXJhbXMubW92aWU9cGF0aDt9ZWxzZXtwcm9wZXJ0aWVzLnR5cGU9ImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoIjt9cHJvcGVydGllcy5kYXRhPXBhdGg7dmFyIGJ1aWxkPSc8b2JqZWN0IGlkPSInK2lkKyciJztmb3IodmFyIHByb3BlcnR5IGluIHByb3BlcnRpZXMpe2J1aWxkKz0iICIrcHJvcGVydHkrJz0iJytwcm9wZXJ0aWVzW3Byb3BlcnR5XSsnIic7Cn1idWlsZCs9Ij4iO2Zvcih2YXIgcGFyYW0gaW4gcGFyYW1zKXtpZihwYXJhbXNbcGFyYW1dKXtidWlsZCs9JzxwYXJhbSBuYW1lPSInK3BhcmFtKyciIHZhbHVlPSInK3BhcmFtc1twYXJhbV0rJyIgLz4nO319YnVpbGQrPSI8L29iamVjdD4iO3RoaXMub2JqZWN0PSgoY29udGFpbmVyKT9jb250YWluZXIuZW1wdHkoKTpuZXcgRWxlbWVudCgiZGl2IikpLnNldCgiaHRtbCIsYnVpbGQpLmZpcnN0Q2hpbGQ7Cn0scmVwbGFjZXM6ZnVuY3Rpb24oZWxlbWVudCl7ZWxlbWVudD1kb2N1bWVudC5pZChlbGVtZW50LHRydWUpO2VsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcy50b0VsZW1lbnQoKSxlbGVtZW50KTtyZXR1cm4gdGhpczt9LGluamVjdDpmdW5jdGlvbihlbGVtZW50KXtkb2N1bWVudC5pZChlbGVtZW50LHRydWUpLmFwcGVuZENoaWxkKHRoaXMudG9FbGVtZW50KCkpOwpyZXR1cm4gdGhpczt9LHJlbW90ZTpmdW5jdGlvbigpe3JldHVybiBTd2lmZi5yZW1vdGUuYXBwbHkoU3dpZmYsW3RoaXMudG9FbGVtZW50KCldLmFwcGVuZChhcmd1bWVudHMpKTt9fSk7U3dpZmYuQ2FsbEJhY2tzPXt9O1N3aWZmLnJlbW90ZT1mdW5jdGlvbihvYmosZm4pe3ZhciBycz1vYmouQ2FsbEZ1bmN0aW9uKCc8aW52b2tlIG5hbWU9IicrZm4rJyIgcmV0dXJudHlwZT0iamF2YXNjcmlwdCI+JytfX2ZsYXNoX19hcmd1bWVudHNUb1hNTChhcmd1bWVudHMsMikrIjwvaW52b2tlPiIpOwpyZXR1cm4gZXZhbChycyk7fTt9KSgpOw==",
                "body": "LyoKLS0tCk1vb1Rvb2xzOiB0aGUgamF2YXNjcmlwdCBmcmFtZXdvcmsKCndlYiBidWlsZDoKIC0gaHR0cDovL21vb3Rvb2xzLm5ldC9jb3JlLzc2YmY0NzA2MmQ2YzE5ODNkNjZjZTQ3YWQ2NmFhMGUwCgpwYWNrYWdlciBidWlsZDoKIC0gcGFja2FnZXIgYnVpbGQgQ29yZS9Db3JlIENvcmUvQXJyYXkgQ29yZS9TdHJpbmcgQ29yZS9OdW1iZXIgQ29yZS9GdW5jdGlvbiBDb3JlL09iamVjdCBDb3JlL0V2ZW50IENvcmUvQnJvd3NlciBDb3JlL0NsYXNzIENvcmUvQ2xhc3MuRXh0cmFzIENvcmUvU2xpY2suUGFyc2VyIENvcmUvU2xpY2suRmluZGVyIENvcmUvRWxlbWVudCBDb3JlL0VsZW1lbnQuU3R5bGUgQ29yZS9FbGVtZW50LkV2ZW50IENvcmUvRWxlbWVudC5EZWxlZ2F0aW9uIENvcmUvRWxlbWVudC5EaW1lbnNpb25zIENvcmUvRnggQ29yZS9GeC5DU1MgQ29yZS9GeC5Ud2VlbiBDb3JlL0Z4Lk1vcnBoIENvcmUvRnguVHJhbnNpdGlvbnMgQ29yZS9SZXF1ZXN0IENvcmUvUmVxdWVzdC5IVE1MIENvcmUvUmVxdWVzdC5KU09OIENvcmUvQ29va2llIENvcmUvSlNPTiBDb3JlL0RPTVJlYWR5IENvcmUvU3dpZmYKCmNvcHlyaWdodHM6CiAgLSBbTW9vVG9vbHNdKGh0dHA6Ly9tb290b29scy5uZXQpCgpsaWNlbnNlczoKICAtIFtNSVQgTGljZW5zZV0oaHR0cDovL21vb3Rvb2xzLm5ldC9saWNlbnNlLnR4dCkKLi4uCiovCgooZnVuY3Rpb24oKXt0aGlzLk1vb1Rvb2xzPXt2ZXJzaW9uOiIxLjQuNSIsYnVpbGQ6ImFiOGVhODgyNGRjM2IyNGI2NjY2ODY3YTJjNGVkNThlYmI3NjJjZjAifTt2YXIgZT10aGlzLnR5cGVPZj1mdW5jdGlvbihpKXtpZihpPT1udWxsKXtyZXR1cm4ibnVsbCI7fWlmKGkuJGZhbWlseSE9bnVsbCl7cmV0dXJuIGkuJGZhbWlseSgpOwp9aWYoaS5ub2RlTmFtZSl7aWYoaS5ub2RlVHlwZT09MSl7cmV0dXJuImVsZW1lbnQiO31pZihpLm5vZGVUeXBlPT0zKXtyZXR1cm4oL1xTLykudGVzdChpLm5vZGVWYWx1ZSk/InRleHRub2RlIjoid2hpdGVzcGFjZSI7fX1lbHNle2lmKHR5cGVvZiBpLmxlbmd0aD09Im51bWJlciIpe2lmKGkuY2FsbGVlKXtyZXR1cm4iYXJndW1lbnRzIjsKfWlmKCJpdGVtIiBpbiBpKXtyZXR1cm4iY29sbGVjdGlvbiI7fX19cmV0dXJuIHR5cGVvZiBpO307dmFyIHU9dGhpcy5pbnN0YW5jZU9mPWZ1bmN0aW9uKHcsaSl7aWYodz09bnVsbCl7cmV0dXJuIGZhbHNlO312YXIgdj13LiRjb25zdHJ1Y3Rvcnx8dy5jb25zdHJ1Y3RvcjsKd2hpbGUodil7aWYodj09PWkpe3JldHVybiB0cnVlO312PXYucGFyZW50O31pZighdy5oYXNPd25Qcm9wZXJ0eSl7cmV0dXJuIGZhbHNlO31yZXR1cm4gdyBpbnN0YW5jZW9mIGk7fTt2YXIgZj10aGlzLkZ1bmN0aW9uO3ZhciByPXRydWU7Zm9yKHZhciBxIGluIHt0b1N0cmluZzoxfSl7cj1udWxsOwp9aWYocil7cj1bImhhc093blByb3BlcnR5IiwidmFsdWVPZiIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInRvTG9jYWxlU3RyaW5nIiwidG9TdHJpbmciLCJjb25zdHJ1Y3RvciJdO31mLnByb3RvdHlwZS5vdmVybG9hZFNldHRlcj1mdW5jdGlvbih2KXt2YXIgaT10aGlzOwpyZXR1cm4gZnVuY3Rpb24oeCx3KXtpZih4PT1udWxsKXtyZXR1cm4gdGhpczt9aWYodnx8dHlwZW9mIHghPSJzdHJpbmciKXtmb3IodmFyIHkgaW4geCl7aS5jYWxsKHRoaXMseSx4W3ldKTt9aWYocil7Zm9yKHZhciB6PXIubGVuZ3RoO3otLTspe3k9clt6XTtpZih4Lmhhc093blByb3BlcnR5KHkpKXtpLmNhbGwodGhpcyx5LHhbeV0pOwp9fX19ZWxzZXtpLmNhbGwodGhpcyx4LHcpO31yZXR1cm4gdGhpczt9O307Zi5wcm90b3R5cGUub3ZlcmxvYWRHZXR0ZXI9ZnVuY3Rpb24odil7dmFyIGk9dGhpcztyZXR1cm4gZnVuY3Rpb24oeCl7dmFyIHksdztpZih0eXBlb2YgeCE9InN0cmluZyIpe3k9eDt9ZWxzZXtpZihhcmd1bWVudHMubGVuZ3RoPjEpe3k9YXJndW1lbnRzOwp9ZWxzZXtpZih2KXt5PVt4XTt9fX1pZih5KXt3PXt9O2Zvcih2YXIgej0wO3o8eS5sZW5ndGg7eisrKXt3W3lbel1dPWkuY2FsbCh0aGlzLHlbel0pO319ZWxzZXt3PWkuY2FsbCh0aGlzLHgpO31yZXR1cm4gdzt9O307Zi5wcm90b3R5cGUuZXh0ZW5kPWZ1bmN0aW9uKGksdil7dGhpc1tpXT12Owp9Lm92ZXJsb2FkU2V0dGVyKCk7Zi5wcm90b3R5cGUuaW1wbGVtZW50PWZ1bmN0aW9uKGksdil7dGhpcy5wcm90b3R5cGVbaV09djt9Lm92ZXJsb2FkU2V0dGVyKCk7dmFyIG89QXJyYXkucHJvdG90eXBlLnNsaWNlO2YuZnJvbT1mdW5jdGlvbihpKXtyZXR1cm4oZShpKT09ImZ1bmN0aW9uIik/aTpmdW5jdGlvbigpe3JldHVybiBpOwp9O307QXJyYXkuZnJvbT1mdW5jdGlvbihpKXtpZihpPT1udWxsKXtyZXR1cm5bXTt9cmV0dXJuKGsuaXNFbnVtZXJhYmxlKGkpJiZ0eXBlb2YgaSE9InN0cmluZyIpPyhlKGkpPT0iYXJyYXkiKT9pOm8uY2FsbChpKTpbaV07fTtOdW1iZXIuZnJvbT1mdW5jdGlvbih2KXt2YXIgaT1wYXJzZUZsb2F0KHYpOwpyZXR1cm4gaXNGaW5pdGUoaSk/aTpudWxsO307U3RyaW5nLmZyb209ZnVuY3Rpb24oaSl7cmV0dXJuIGkrIiI7fTtmLmltcGxlbWVudCh7aGlkZTpmdW5jdGlvbigpe3RoaXMuJGhpZGRlbj10cnVlO3JldHVybiB0aGlzO30scHJvdGVjdDpmdW5jdGlvbigpe3RoaXMuJHByb3RlY3RlZD10cnVlOwpyZXR1cm4gdGhpczt9fSk7dmFyIGs9dGhpcy5UeXBlPWZ1bmN0aW9uKHgsdyl7aWYoeCl7dmFyIHY9eC50b0xvd2VyQ2FzZSgpO3ZhciBpPWZ1bmN0aW9uKHkpe3JldHVybihlKHkpPT12KTt9O2tbImlzIit4XT1pO2lmKHchPW51bGwpe3cucHJvdG90eXBlLiRmYW1pbHk9KGZ1bmN0aW9uKCl7cmV0dXJuIHY7Cn0pLmhpZGUoKTt3LnR5cGU9aTt9fWlmKHc9PW51bGwpe3JldHVybiBudWxsO313LmV4dGVuZCh0aGlzKTt3LiRjb25zdHJ1Y3Rvcj1rO3cucHJvdG90eXBlLiRjb25zdHJ1Y3Rvcj13O3JldHVybiB3O307dmFyIHA9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztrLmlzRW51bWVyYWJsZT1mdW5jdGlvbihpKXtyZXR1cm4oaSE9bnVsbCYmdHlwZW9mIGkubGVuZ3RoPT0ibnVtYmVyIiYmcC5jYWxsKGkpIT0iW29iamVjdCBGdW5jdGlvbl0iKTsKfTt2YXIgYj17fTt2YXIgZD1mdW5jdGlvbihpKXt2YXIgdj1lKGkucHJvdG90eXBlKTtyZXR1cm4gYlt2XXx8KGJbdl09W10pO307dmFyIGg9ZnVuY3Rpb24odyxBKXtpZihBJiZBLiRoaWRkZW4pe3JldHVybjt9dmFyIHY9ZCh0aGlzKTtmb3IodmFyIHg9MDt4PHYubGVuZ3RoOwp4Kyspe3ZhciB6PXZbeF07aWYoZSh6KT09InR5cGUiKXtoLmNhbGwoeix3LEEpO31lbHNle3ouY2FsbCh0aGlzLHcsQSk7fX12YXIgeT10aGlzLnByb3RvdHlwZVt3XTtpZih5PT1udWxsfHwheS4kcHJvdGVjdGVkKXt0aGlzLnByb3RvdHlwZVt3XT1BO31pZih0aGlzW3ddPT1udWxsJiZlKEEpPT0iZnVuY3Rpb24iKXt0LmNhbGwodGhpcyx3LGZ1bmN0aW9uKGkpe3JldHVybiBBLmFwcGx5KGksby5jYWxsKGFyZ3VtZW50cywxKSk7Cn0pO319O3ZhciB0PWZ1bmN0aW9uKGksdyl7aWYodyYmdy4kaGlkZGVuKXtyZXR1cm47fXZhciB2PXRoaXNbaV07aWYodj09bnVsbHx8IXYuJHByb3RlY3RlZCl7dGhpc1tpXT13O319O2suaW1wbGVtZW50KHtpbXBsZW1lbnQ6aC5vdmVybG9hZFNldHRlcigpLGV4dGVuZDp0Lm92ZXJsb2FkU2V0dGVyKCksYWxpYXM6ZnVuY3Rpb24oaSx2KXtoLmNhbGwodGhpcyxpLHRoaXMucHJvdG90eXBlW3ZdKTsKfS5vdmVybG9hZFNldHRlcigpLG1pcnJvcjpmdW5jdGlvbihpKXtkKHRoaXMpLnB1c2goaSk7cmV0dXJuIHRoaXM7fX0pO25ldyBrKCJUeXBlIixrKTt2YXIgYz1mdW5jdGlvbih2LEEseSl7dmFyIHg9KEEhPU9iamVjdCksRT1BLnByb3RvdHlwZTtpZih4KXtBPW5ldyBrKHYsQSk7Cn1mb3IodmFyIEI9MCx6PXkubGVuZ3RoO0I8ejtCKyspe3ZhciBGPXlbQl0sRD1BW0ZdLEM9RVtGXTtpZihEKXtELnByb3RlY3QoKTt9aWYoeCYmQyl7QS5pbXBsZW1lbnQoRixDLnByb3RlY3QoKSk7fX1pZih4KXt2YXIgdz1FLnByb3BlcnR5SXNFbnVtZXJhYmxlKHlbMF0pOwpBLmZvckVhY2hNZXRob2Q9ZnVuY3Rpb24oSil7aWYoIXcpe2Zvcih2YXIgST0wLEc9eS5sZW5ndGg7STxHO0krKyl7Si5jYWxsKEUsRVt5W0ldXSx5W0ldKTt9fWZvcih2YXIgSCBpbiBFKXtKLmNhbGwoRSxFW0hdLEgpO319O31yZXR1cm4gYzt9O2MoIlN0cmluZyIsU3RyaW5nLFsiY2hhckF0IiwiY2hhckNvZGVBdCIsImNvbmNhdCIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsIm1hdGNoIiwicXVvdGUiLCJyZXBsYWNlIiwic2VhcmNoIiwic2xpY2UiLCJzcGxpdCIsInN1YnN0ciIsInN1YnN0cmluZyIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsInRvVXBwZXJDYXNlIl0pKCJBcnJheSIsQXJyYXksWyJwb3AiLCJwdXNoIiwicmV2ZXJzZSIsInNoaWZ0Iiwic29ydCIsInNwbGljZSIsInVuc2hpZnQiLCJjb25jYXQiLCJqb2luIiwic2xpY2UiLCJpbmRleE9mIiwibGFzdEluZGV4T2YiLCJmaWx0ZXIiLCJmb3JFYWNoIiwiZXZlcnkiLCJtYXAiLCJzb21lIiwicmVkdWNlIiwicmVkdWNlUmlnaHQiXSkoIk51bWJlciIsTnVtYmVyLFsidG9FeHBvbmVudGlhbCIsInRvRml4ZWQiLCJ0b0xvY2FsZVN0cmluZyIsInRvUHJlY2lzaW9uIl0pKCJGdW5jdGlvbiIsZixbImFwcGx5IiwiY2FsbCIsImJpbmQiXSkoIlJlZ0V4cCIsUmVnRXhwLFsiZXhlYyIsInRlc3QiXSkoIk9iamVjdCIsT2JqZWN0LFsiY3JlYXRlIiwiZGVmaW5lUHJvcGVydHkiLCJkZWZpbmVQcm9wZXJ0aWVzIiwia2V5cyIsImdldFByb3RvdHlwZU9mIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsInByZXZlbnRFeHRlbnNpb25zIiwiaXNFeHRlbnNpYmxlIiwic2VhbCIsImlzU2VhbGVkIiwiZnJlZXplIiwiaXNGcm96ZW4iXSkoIkRhdGUiLERhdGUsWyJub3ciXSk7Ck9iamVjdC5leHRlbmQ9dC5vdmVybG9hZFNldHRlcigpO0RhdGUuZXh0ZW5kKCJub3ciLGZ1bmN0aW9uKCl7cmV0dXJuICsobmV3IERhdGUpO30pO25ldyBrKCJCb29sZWFuIixCb29sZWFuKTtOdW1iZXIucHJvdG90eXBlLiRmYW1pbHk9ZnVuY3Rpb24oKXtyZXR1cm4gaXNGaW5pdGUodGhpcyk/Im51bWJlciI6Im51bGwiOwp9LmhpZGUoKTtOdW1iZXIuZXh0ZW5kKCJyYW5kb20iLGZ1bmN0aW9uKHYsaSl7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooaS12KzEpK3YpO30pO3ZhciBsPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7T2JqZWN0LmV4dGVuZCgiZm9yRWFjaCIsZnVuY3Rpb24oaSx3LHgpe2Zvcih2YXIgdiBpbiBpKXtpZihsLmNhbGwoaSx2KSl7dy5jYWxsKHgsaVt2XSx2LGkpOwp9fX0pO09iamVjdC5lYWNoPU9iamVjdC5mb3JFYWNoO0FycmF5LmltcGxlbWVudCh7Zm9yRWFjaDpmdW5jdGlvbih4LHkpe2Zvcih2YXIgdz0wLHY9dGhpcy5sZW5ndGg7dzx2O3crKyl7aWYodyBpbiB0aGlzKXt4LmNhbGwoeSx0aGlzW3ddLHcsdGhpcyk7fX19LGVhY2g6ZnVuY3Rpb24oaSx2KXtBcnJheS5mb3JFYWNoKHRoaXMsaSx2KTsKcmV0dXJuIHRoaXM7fX0pO3ZhciBzPWZ1bmN0aW9uKGkpe3N3aXRjaChlKGkpKXtjYXNlImFycmF5IjpyZXR1cm4gaS5jbG9uZSgpO2Nhc2Uib2JqZWN0IjpyZXR1cm4gT2JqZWN0LmNsb25lKGkpO2RlZmF1bHQ6cmV0dXJuIGk7fX07QXJyYXkuaW1wbGVtZW50KCJjbG9uZSIsZnVuY3Rpb24oKXt2YXIgdj10aGlzLmxlbmd0aCx3PW5ldyBBcnJheSh2KTsKd2hpbGUodi0tKXt3W3ZdPXModGhpc1t2XSk7fXJldHVybiB3O30pO3ZhciBhPWZ1bmN0aW9uKHYsaSx3KXtzd2l0Y2goZSh3KSl7Y2FzZSJvYmplY3QiOmlmKGUodltpXSk9PSJvYmplY3QiKXtPYmplY3QubWVyZ2UodltpXSx3KTt9ZWxzZXt2W2ldPU9iamVjdC5jbG9uZSh3KTsKfWJyZWFrO2Nhc2UiYXJyYXkiOnZbaV09dy5jbG9uZSgpO2JyZWFrO2RlZmF1bHQ6dltpXT13O31yZXR1cm4gdjt9O09iamVjdC5leHRlbmQoe21lcmdlOmZ1bmN0aW9uKEMseSx4KXtpZihlKHkpPT0ic3RyaW5nIil7cmV0dXJuIGEoQyx5LHgpO31mb3IodmFyIEI9MSx3PWFyZ3VtZW50cy5sZW5ndGg7CkI8dztCKyspe3ZhciB6PWFyZ3VtZW50c1tCXTtmb3IodmFyIEEgaW4geil7YShDLEEseltBXSk7fX1yZXR1cm4gQzt9LGNsb25lOmZ1bmN0aW9uKGkpe3ZhciB3PXt9O2Zvcih2YXIgdiBpbiBpKXt3W3ZdPXMoaVt2XSk7fXJldHVybiB3O30sYXBwZW5kOmZ1bmN0aW9uKHope2Zvcih2YXIgeT0xLHc9YXJndW1lbnRzLmxlbmd0aDsKeTx3O3krKyl7dmFyIHY9YXJndW1lbnRzW3ldfHx7fTtmb3IodmFyIHggaW4gdil7elt4XT12W3hdO319cmV0dXJuIHo7fX0pO1siT2JqZWN0IiwiV2hpdGVTcGFjZSIsIlRleHROb2RlIiwiQ29sbGVjdGlvbiIsIkFyZ3VtZW50cyJdLmVhY2goZnVuY3Rpb24oaSl7bmV3IGsoaSk7Cn0pO3ZhciBqPURhdGUubm93KCk7U3RyaW5nLmV4dGVuZCgidW5pcXVlSUQiLGZ1bmN0aW9uKCl7cmV0dXJuKGorKykudG9TdHJpbmcoMzYpO30pO3ZhciBnPXRoaXMuSGFzaD1uZXcgaygiSGFzaCIsZnVuY3Rpb24oaSl7aWYoZShpKT09Imhhc2giKXtpPU9iamVjdC5jbG9uZShpLmdldENsZWFuKCkpOwp9Zm9yKHZhciB2IGluIGkpe3RoaXNbdl09aVt2XTt9cmV0dXJuIHRoaXM7fSk7Zy5pbXBsZW1lbnQoe2ZvckVhY2g6ZnVuY3Rpb24oaSx2KXtPYmplY3QuZm9yRWFjaCh0aGlzLGksdik7fSxnZXRDbGVhbjpmdW5jdGlvbigpe3ZhciB2PXt9O2Zvcih2YXIgaSBpbiB0aGlzKXtpZih0aGlzLmhhc093blByb3BlcnR5KGkpKXt2W2ldPXRoaXNbaV07Cn19cmV0dXJuIHY7fSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgdj0wO2Zvcih2YXIgaSBpbiB0aGlzKXtpZih0aGlzLmhhc093blByb3BlcnR5KGkpKXt2Kys7fX1yZXR1cm4gdjt9fSk7Zy5hbGlhcygiZWFjaCIsImZvckVhY2giKTtPYmplY3QudHlwZT1rLmlzT2JqZWN0Owp2YXIgbj10aGlzLk5hdGl2ZT1mdW5jdGlvbihpKXtyZXR1cm4gbmV3IGsoaS5uYW1lLGkuaW5pdGlhbGl6ZSk7fTtuLnR5cGU9ay50eXBlO24uaW1wbGVtZW50PWZ1bmN0aW9uKHgsdil7Zm9yKHZhciB3PTA7dzx4Lmxlbmd0aDt3Kyspe3hbd10uaW1wbGVtZW50KHYpOwp9cmV0dXJuIG47fTt2YXIgbT1BcnJheS50eXBlO0FycmF5LnR5cGU9ZnVuY3Rpb24oaSl7cmV0dXJuIHUoaSxBcnJheSl8fG0oaSk7fTt0aGlzLiRBPWZ1bmN0aW9uKGkpe3JldHVybiBBcnJheS5mcm9tKGkpLnNsaWNlKCk7fTt0aGlzLiRhcmd1bWVudHM9ZnVuY3Rpb24odil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1t2XTsKfTt9O3RoaXMuJGNoaz1mdW5jdGlvbihpKXtyZXR1cm4gISEoaXx8aT09PTApO307dGhpcy4kY2xlYXI9ZnVuY3Rpb24oaSl7Y2xlYXJUaW1lb3V0KGkpO2NsZWFySW50ZXJ2YWwoaSk7cmV0dXJuIG51bGw7fTt0aGlzLiRkZWZpbmVkPWZ1bmN0aW9uKGkpe3JldHVybihpIT1udWxsKTsKfTt0aGlzLiRlYWNoPWZ1bmN0aW9uKHcsdix4KXt2YXIgaT1lKHcpOygoaT09ImFyZ3VtZW50cyJ8fGk9PSJjb2xsZWN0aW9uInx8aT09ImFycmF5Inx8aT09ImVsZW1lbnRzIik/QXJyYXk6T2JqZWN0KS5lYWNoKHcsdix4KTt9O3RoaXMuJGVtcHR5PWZ1bmN0aW9uKCl7fTsKdGhpcy4kZXh0ZW5kPWZ1bmN0aW9uKHYsaSl7cmV0dXJuIE9iamVjdC5hcHBlbmQodixpKTt9O3RoaXMuJEg9ZnVuY3Rpb24oaSl7cmV0dXJuIG5ldyBnKGkpO307dGhpcy4kbWVyZ2U9ZnVuY3Rpb24oKXt2YXIgaT1BcnJheS5zbGljZShhcmd1bWVudHMpO2kudW5zaGlmdCh7fSk7CnJldHVybiBPYmplY3QubWVyZ2UuYXBwbHkobnVsbCxpKTt9O3RoaXMuJGxhbWJkYT1mLmZyb207dGhpcy4kbWl4aW49T2JqZWN0Lm1lcmdlO3RoaXMuJHJhbmRvbT1OdW1iZXIucmFuZG9tO3RoaXMuJHNwbGF0PUFycmF5LmZyb207dGhpcy4kdGltZT1EYXRlLm5vdzsKdGhpcy4kdHlwZT1mdW5jdGlvbihpKXt2YXIgdj1lKGkpO2lmKHY9PSJlbGVtZW50cyIpe3JldHVybiJhcnJheSI7fXJldHVybih2PT0ibnVsbCIpP2ZhbHNlOnY7fTt0aGlzLiR1bmxpbms9ZnVuY3Rpb24oaSl7c3dpdGNoKGUoaSkpe2Nhc2Uib2JqZWN0IjpyZXR1cm4gT2JqZWN0LmNsb25lKGkpOwpjYXNlImFycmF5IjpyZXR1cm4gQXJyYXkuY2xvbmUoaSk7Y2FzZSJoYXNoIjpyZXR1cm4gbmV3IGcoaSk7ZGVmYXVsdDpyZXR1cm4gaTt9fTt9KSgpO0FycmF5LmltcGxlbWVudCh7ZXZlcnk6ZnVuY3Rpb24oYyxkKXtmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoPj4+MDsKYjxhO2IrKyl7aWYoKGIgaW4gdGhpcykmJiFjLmNhbGwoZCx0aGlzW2JdLGIsdGhpcykpe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO30sZmlsdGVyOmZ1bmN0aW9uKGQsZil7dmFyIGM9W107Zm9yKHZhciBlLGI9MCxhPXRoaXMubGVuZ3RoPj4+MDtiPGE7YisrKXtpZihiIGluIHRoaXMpe2U9dGhpc1tiXTsKaWYoZC5jYWxsKGYsZSxiLHRoaXMpKXtjLnB1c2goZSk7fX19cmV0dXJuIGM7fSxpbmRleE9mOmZ1bmN0aW9uKGMsZCl7dmFyIGI9dGhpcy5sZW5ndGg+Pj4wO2Zvcih2YXIgYT0oZDwwKT9NYXRoLm1heCgwLGIrZCk6ZHx8MDthPGI7YSsrKXtpZih0aGlzW2FdPT09Yyl7cmV0dXJuIGE7Cn19cmV0dXJuIC0xO30sbWFwOmZ1bmN0aW9uKGMsZSl7dmFyIGQ9dGhpcy5sZW5ndGg+Pj4wLGI9QXJyYXkoZCk7Zm9yKHZhciBhPTA7YTxkO2ErKyl7aWYoYSBpbiB0aGlzKXtiW2FdPWMuY2FsbChlLHRoaXNbYV0sYSx0aGlzKTt9fXJldHVybiBiO30sc29tZTpmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg+Pj4wOwpiPGE7YisrKXtpZigoYiBpbiB0aGlzKSYmYy5jYWxsKGQsdGhpc1tiXSxiLHRoaXMpKXtyZXR1cm4gdHJ1ZTt9fXJldHVybiBmYWxzZTt9LGNsZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhIT1udWxsO30pO30saW52b2tlOmZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LnNsaWNlKGFyZ3VtZW50cywxKTsKcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGMpe3JldHVybiBjW2FdLmFwcGx5KGMsYik7fSk7fSxhc3NvY2lhdGU6ZnVuY3Rpb24oYyl7dmFyIGQ9e30sYj1NYXRoLm1pbih0aGlzLmxlbmd0aCxjLmxlbmd0aCk7Zm9yKHZhciBhPTA7YTxiO2ErKyl7ZFtjW2FdXT10aGlzW2FdOwp9cmV0dXJuIGQ7fSxsaW5rOmZ1bmN0aW9uKGMpe3ZhciBhPXt9O2Zvcih2YXIgZT0wLGI9dGhpcy5sZW5ndGg7ZTxiO2UrKyl7Zm9yKHZhciBkIGluIGMpe2lmKGNbZF0odGhpc1tlXSkpe2FbZF09dGhpc1tlXTtkZWxldGUgY1tkXTticmVhazt9fX1yZXR1cm4gYTt9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW5kZXhPZihhLGIpIT0tMTsKfSxhcHBlbmQ6ZnVuY3Rpb24oYSl7dGhpcy5wdXNoLmFwcGx5KHRoaXMsYSk7cmV0dXJuIHRoaXM7fSxnZXRMYXN0OmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMubGVuZ3RoKT90aGlzW3RoaXMubGVuZ3RoLTFdOm51bGw7fSxnZXRSYW5kb206ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5sZW5ndGgpP3RoaXNbTnVtYmVyLnJhbmRvbSgwLHRoaXMubGVuZ3RoLTEpXTpudWxsOwp9LGluY2x1ZGU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuY29udGFpbnMoYSkpe3RoaXMucHVzaChhKTt9cmV0dXJuIHRoaXM7fSxjb21iaW5lOmZ1bmN0aW9uKGMpe2Zvcih2YXIgYj0wLGE9Yy5sZW5ndGg7YjxhO2IrKyl7dGhpcy5pbmNsdWRlKGNbYl0pO31yZXR1cm4gdGhpczsKfSxlcmFzZTpmdW5jdGlvbihiKXtmb3IodmFyIGE9dGhpcy5sZW5ndGg7YS0tOyl7aWYodGhpc1thXT09PWIpe3RoaXMuc3BsaWNlKGEsMSk7fX1yZXR1cm4gdGhpczt9LGVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5sZW5ndGg9MDtyZXR1cm4gdGhpczt9LGZsYXR0ZW46ZnVuY3Rpb24oKXt2YXIgZD1bXTsKZm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDtiPGE7YisrKXt2YXIgYz10eXBlT2YodGhpc1tiXSk7aWYoYz09Im51bGwiKXtjb250aW51ZTt9ZD1kLmNvbmNhdCgoYz09ImFycmF5Inx8Yz09ImNvbGxlY3Rpb24ifHxjPT0iYXJndW1lbnRzInx8aW5zdGFuY2VPZih0aGlzW2JdLEFycmF5KSk/QXJyYXkuZmxhdHRlbih0aGlzW2JdKTp0aGlzW2JdKTsKfXJldHVybiBkO30scGljazpmdW5jdGlvbigpe2Zvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7aWYodGhpc1tiXSE9bnVsbCl7cmV0dXJuIHRoaXNbYl07fX1yZXR1cm4gbnVsbDt9LGhleFRvUmdiOmZ1bmN0aW9uKGIpe2lmKHRoaXMubGVuZ3RoIT0zKXtyZXR1cm4gbnVsbDsKfXZhciBhPXRoaXMubWFwKGZ1bmN0aW9uKGMpe2lmKGMubGVuZ3RoPT0xKXtjKz1jO31yZXR1cm4gYy50b0ludCgxNik7fSk7cmV0dXJuKGIpP2E6InJnYigiK2ErIikiO30scmdiVG9IZXg6ZnVuY3Rpb24oZCl7aWYodGhpcy5sZW5ndGg8Myl7cmV0dXJuIG51bGw7fWlmKHRoaXMubGVuZ3RoPT00JiZ0aGlzWzNdPT0wJiYhZCl7cmV0dXJuInRyYW5zcGFyZW50IjsKfXZhciBiPVtdO2Zvcih2YXIgYT0wO2E8MzthKyspe3ZhciBjPSh0aGlzW2FdLTApLnRvU3RyaW5nKDE2KTtiLnB1c2goKGMubGVuZ3RoPT0xKT8iMCIrYzpjKTt9cmV0dXJuKGQpP2I6IiMiK2Iuam9pbigiIik7fX0pO0FycmF5LmFsaWFzKCJleHRlbmQiLCJhcHBlbmQiKTsKdmFyICRwaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LmZyb20oYXJndW1lbnRzKS5waWNrKCk7fTtTdHJpbmcuaW1wbGVtZW50KHt0ZXN0OmZ1bmN0aW9uKGEsYil7cmV0dXJuKCh0eXBlT2YoYSk9PSJyZWdleHAiKT9hOm5ldyBSZWdFeHAoIiIrYSxiKSkudGVzdCh0aGlzKTsKfSxjb250YWluczpmdW5jdGlvbihhLGIpe3JldHVybihiKT8oYit0aGlzK2IpLmluZGV4T2YoYithK2IpPi0xOlN0cmluZyh0aGlzKS5pbmRleE9mKGEpPi0xO30sdHJpbTpmdW5jdGlvbigpe3JldHVybiBTdHJpbmcodGhpcykucmVwbGFjZSgvXlxzK3xccyskL2csIiIpOwp9LGNsZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZyh0aGlzKS5yZXBsYWNlKC9ccysvZywiICIpLnRyaW0oKTt9LGNhbWVsQ2FzZTpmdW5jdGlvbigpe3JldHVybiBTdHJpbmcodGhpcykucmVwbGFjZSgvLVxEL2csZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhckF0KDEpLnRvVXBwZXJDYXNlKCk7Cn0pO30saHlwaGVuYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZyh0aGlzKS5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybigiLSIrYS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSk7fSk7fSxjYXBpdGFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZyh0aGlzKS5yZXBsYWNlKC9cYlthLXpdL2csZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9VcHBlckNhc2UoKTsKfSk7fSxlc2NhcGVSZWdFeHA6ZnVuY3Rpb24oKXtyZXR1cm4gU3RyaW5nKHRoaXMpLnJlcGxhY2UoLyhbLS4qKz9eJHt9KCl8W1xdXC9cXF0pL2csIlxcJDEiKTt9LHRvSW50OmZ1bmN0aW9uKGEpe3JldHVybiBwYXJzZUludCh0aGlzLGF8fDEwKTt9LHRvRmxvYXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VGbG9hdCh0aGlzKTsKfSxoZXhUb1JnYjpmdW5jdGlvbihiKXt2YXIgYT1TdHJpbmcodGhpcykubWF0Y2goL14jPyhcd3sxLDJ9KShcd3sxLDJ9KShcd3sxLDJ9KSQvKTtyZXR1cm4oYSk/YS5zbGljZSgxKS5oZXhUb1JnYihiKTpudWxsO30scmdiVG9IZXg6ZnVuY3Rpb24oYil7dmFyIGE9U3RyaW5nKHRoaXMpLm1hdGNoKC9cZHsxLDN9L2cpOwpyZXR1cm4oYSk/YS5yZ2JUb0hleChiKTpudWxsO30sc3Vic3RpdHV0ZTpmdW5jdGlvbihhLGIpe3JldHVybiBTdHJpbmcodGhpcykucmVwbGFjZShifHwoL1xcP1x7KFtee31dKylcfS9nKSxmdW5jdGlvbihkLGMpe2lmKGQuY2hhckF0KDApPT0iXFwiKXtyZXR1cm4gZC5zbGljZSgxKTsKfXJldHVybihhW2NdIT1udWxsKT9hW2NdOiIiO30pO319KTtOdW1iZXIuaW1wbGVtZW50KHtsaW1pdDpmdW5jdGlvbihiLGEpe3JldHVybiBNYXRoLm1pbihhLE1hdGgubWF4KGIsdGhpcykpO30scm91bmQ6ZnVuY3Rpb24oYSl7YT1NYXRoLnBvdygxMCxhfHwwKS50b0ZpeGVkKGE8MD8tYTowKTsKcmV0dXJuIE1hdGgucm91bmQodGhpcyphKS9hO30sdGltZXM6ZnVuY3Rpb24oYixjKXtmb3IodmFyIGE9MDthPHRoaXM7YSsrKXtiLmNhbGwoYyxhLHRoaXMpO319LHRvRmxvYXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VGbG9hdCh0aGlzKTt9LHRvSW50OmZ1bmN0aW9uKGEpe3JldHVybiBwYXJzZUludCh0aGlzLGF8fDEwKTsKfX0pO051bWJlci5hbGlhcygiZWFjaCIsInRpbWVzIik7KGZ1bmN0aW9uKGIpe3ZhciBhPXt9O2IuZWFjaChmdW5jdGlvbihjKXtpZighTnVtYmVyW2NdKXthW2NdPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGhbY10uYXBwbHkobnVsbCxbdGhpc10uY29uY2F0KEFycmF5LmZyb20oYXJndW1lbnRzKSkpOwp9O319KTtOdW1iZXIuaW1wbGVtZW50KGEpO30pKFsiYWJzIiwiYWNvcyIsImFzaW4iLCJhdGFuIiwiYXRhbjIiLCJjZWlsIiwiY29zIiwiZXhwIiwiZmxvb3IiLCJsb2ciLCJtYXgiLCJtaW4iLCJwb3ciLCJzaW4iLCJzcXJ0IiwidGFuIl0pO0Z1bmN0aW9uLmV4dGVuZCh7YXR0ZW1wdDpmdW5jdGlvbigpe2Zvcih2YXIgYj0wLGE9YXJndW1lbnRzLmxlbmd0aDsKYjxhO2IrKyl7dHJ5e3JldHVybiBhcmd1bWVudHNbYl0oKTt9Y2F0Y2goYyl7fX1yZXR1cm4gbnVsbDt9fSk7RnVuY3Rpb24uaW1wbGVtZW50KHthdHRlbXB0OmZ1bmN0aW9uKGEsYyl7dHJ5e3JldHVybiB0aGlzLmFwcGx5KGMsQXJyYXkuZnJvbShhKSk7fWNhdGNoKGIpe31yZXR1cm4gbnVsbDsKfSxiaW5kOmZ1bmN0aW9uKGUpe3ZhciBhPXRoaXMsYj1hcmd1bWVudHMubGVuZ3RoPjE/QXJyYXkuc2xpY2UoYXJndW1lbnRzLDEpOm51bGwsZD1mdW5jdGlvbigpe307dmFyIGM9ZnVuY3Rpb24oKXt2YXIgZz1lLGg9YXJndW1lbnRzLmxlbmd0aDtpZih0aGlzIGluc3RhbmNlb2YgYyl7ZC5wcm90b3R5cGU9YS5wcm90b3R5cGU7Cmc9bmV3IGQ7fXZhciBmPSghYiYmIWgpP2EuY2FsbChnKTphLmFwcGx5KGcsYiYmaD9iLmNvbmNhdChBcnJheS5zbGljZShhcmd1bWVudHMpKTpifHxhcmd1bWVudHMpO3JldHVybiBnPT1lP2Y6Zzt9O3JldHVybiBjO30scGFzczpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXM7CmlmKGIhPW51bGwpe2I9QXJyYXkuZnJvbShiKTt9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYyxifHxhcmd1bWVudHMpO307fSxkZWxheTpmdW5jdGlvbihiLGMsYSl7cmV0dXJuIHNldFRpbWVvdXQodGhpcy5wYXNzKChhPT1udWxsP1tdOmEpLGMpLGIpOwp9LHBlcmlvZGljYWw6ZnVuY3Rpb24oYyxiLGEpe3JldHVybiBzZXRJbnRlcnZhbCh0aGlzLnBhc3MoKGE9PW51bGw/W106YSksYiksYyk7fX0pO2RlbGV0ZSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZDtGdW5jdGlvbi5pbXBsZW1lbnQoe2NyZWF0ZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzOwpiPWJ8fHt9O3JldHVybiBmdW5jdGlvbihkKXt2YXIgYz1iLmFyZ3VtZW50cztjPShjIT1udWxsKT9BcnJheS5mcm9tKGMpOkFycmF5LnNsaWNlKGFyZ3VtZW50cywoYi5ldmVudCk/MTowKTtpZihiLmV2ZW50KXtjPVtkfHx3aW5kb3cuZXZlbnRdLmV4dGVuZChjKTt9dmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLmJpbmR8fG51bGwsYyk7Cn07aWYoYi5kZWxheSl7cmV0dXJuIHNldFRpbWVvdXQoZSxiLmRlbGF5KTt9aWYoYi5wZXJpb2RpY2FsKXtyZXR1cm4gc2V0SW50ZXJ2YWwoZSxiLnBlcmlvZGljYWwpO31pZihiLmF0dGVtcHQpe3JldHVybiBGdW5jdGlvbi5hdHRlbXB0KGUpO31yZXR1cm4gZSgpO307Cn0sYmluZDpmdW5jdGlvbihjLGIpe3ZhciBhPXRoaXM7aWYoYiE9bnVsbCl7Yj1BcnJheS5mcm9tKGIpO31yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShjLGJ8fGFyZ3VtZW50cyk7fTt9LGJpbmRXaXRoRXZlbnQ6ZnVuY3Rpb24oYyxiKXt2YXIgYT10aGlzOwppZihiIT1udWxsKXtiPUFycmF5LmZyb20oYik7fXJldHVybiBmdW5jdGlvbihkKXtyZXR1cm4gYS5hcHBseShjLChiPT1udWxsKT9hcmd1bWVudHM6W2RdLmNvbmNhdChiKSk7fTt9LHJ1bjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmFwcGx5KGIsQXJyYXkuZnJvbShhKSk7Cn19KTtpZihPYmplY3QuY3JlYXRlPT1GdW5jdGlvbi5wcm90b3R5cGUuY3JlYXRlKXtPYmplY3QuY3JlYXRlPW51bGw7fXZhciAkdHJ5PUZ1bmN0aW9uLmF0dGVtcHQ7KGZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtPYmplY3QuZXh0ZW5kKHtzdWJzZXQ6ZnVuY3Rpb24oZCxnKXt2YXIgZj17fTsKZm9yKHZhciBlPTAsYj1nLmxlbmd0aDtlPGI7ZSsrKXt2YXIgYz1nW2VdO2lmKGMgaW4gZCl7ZltjXT1kW2NdO319cmV0dXJuIGY7fSxtYXA6ZnVuY3Rpb24oYixlLGYpe3ZhciBkPXt9O2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSl7ZFtjXT1lLmNhbGwoZixiW2NdLGMsYik7Cn19cmV0dXJuIGQ7fSxmaWx0ZXI6ZnVuY3Rpb24oYixlLGcpe3ZhciBkPXt9O2Zvcih2YXIgYyBpbiBiKXt2YXIgZj1iW2NdO2lmKGEuY2FsbChiLGMpJiZlLmNhbGwoZyxmLGMsYikpe2RbY109Zjt9fXJldHVybiBkO30sZXZlcnk6ZnVuY3Rpb24oYixkLGUpe2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSYmIWQuY2FsbChlLGJbY10sYykpe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LHNvbWU6ZnVuY3Rpb24oYixkLGUpe2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSYmZC5jYWxsKGUsYltjXSxjKSl7cmV0dXJuIHRydWU7fX1yZXR1cm4gZmFsc2U7fSxrZXlzOmZ1bmN0aW9uKGIpe3ZhciBkPVtdO2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSl7ZC5wdXNoKGMpOwp9fXJldHVybiBkO30sdmFsdWVzOmZ1bmN0aW9uKGMpe3ZhciBiPVtdO2Zvcih2YXIgZCBpbiBjKXtpZihhLmNhbGwoYyxkKSl7Yi5wdXNoKGNbZF0pO319cmV0dXJuIGI7fSxnZXRMZW5ndGg6ZnVuY3Rpb24oYil7cmV0dXJuIE9iamVjdC5rZXlzKGIpLmxlbmd0aDt9LGtleU9mOmZ1bmN0aW9uKGIsZCl7Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpJiZiW2NdPT09ZCl7cmV0dXJuIGM7Cn19cmV0dXJuIG51bGw7fSxjb250YWluczpmdW5jdGlvbihiLGMpe3JldHVybiBPYmplY3Qua2V5T2YoYixjKSE9bnVsbDt9LHRvUXVlcnlTdHJpbmc6ZnVuY3Rpb24oYixjKXt2YXIgZD1bXTtPYmplY3QuZWFjaChiLGZ1bmN0aW9uKGgsZyl7aWYoYyl7Zz1jKyJbIitnKyJdIjsKfXZhciBmO3N3aXRjaCh0eXBlT2YoaCkpe2Nhc2Uib2JqZWN0IjpmPU9iamVjdC50b1F1ZXJ5U3RyaW5nKGgsZyk7YnJlYWs7Y2FzZSJhcnJheSI6dmFyIGU9e307aC5lYWNoKGZ1bmN0aW9uKGssail7ZVtqXT1rO30pO2Y9T2JqZWN0LnRvUXVlcnlTdHJpbmcoZSxnKTsKYnJlYWs7ZGVmYXVsdDpmPWcrIj0iK2VuY29kZVVSSUNvbXBvbmVudChoKTt9aWYoaCE9bnVsbCl7ZC5wdXNoKGYpO319KTtyZXR1cm4gZC5qb2luKCImIik7fX0pO30pKCk7SGFzaC5pbXBsZW1lbnQoe2hhczpPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGtleU9mOmZ1bmN0aW9uKGEpe3JldHVybiBPYmplY3Qua2V5T2YodGhpcyxhKTsKfSxoYXNWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gT2JqZWN0LmNvbnRhaW5zKHRoaXMsYSk7fSxleHRlbmQ6ZnVuY3Rpb24oYSl7SGFzaC5lYWNoKGF8fHt9LGZ1bmN0aW9uKGMsYil7SGFzaC5zZXQodGhpcyxiLGMpO30sdGhpcyk7cmV0dXJuIHRoaXM7fSxjb21iaW5lOmZ1bmN0aW9uKGEpe0hhc2guZWFjaChhfHx7fSxmdW5jdGlvbihjLGIpe0hhc2guaW5jbHVkZSh0aGlzLGIsYyk7Cn0sdGhpcyk7cmV0dXJuIHRoaXM7fSxlcmFzZTpmdW5jdGlvbihhKXtpZih0aGlzLmhhc093blByb3BlcnR5KGEpKXtkZWxldGUgdGhpc1thXTt9cmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuKHRoaXMuaGFzT3duUHJvcGVydHkoYSkpP3RoaXNbYV06bnVsbDsKfSxzZXQ6ZnVuY3Rpb24oYSxiKXtpZighdGhpc1thXXx8dGhpcy5oYXNPd25Qcm9wZXJ0eShhKSl7dGhpc1thXT1iO31yZXR1cm4gdGhpczt9LGVtcHR5OmZ1bmN0aW9uKCl7SGFzaC5lYWNoKHRoaXMsZnVuY3Rpb24oYixhKXtkZWxldGUgdGhpc1thXTt9LHRoaXMpOwpyZXR1cm4gdGhpczt9LGluY2x1ZGU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzW2FdPT1udWxsKXt0aGlzW2FdPWI7fXJldHVybiB0aGlzO30sbWFwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBIYXNoKE9iamVjdC5tYXAodGhpcyxhLGIpKTt9LGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgSGFzaChPYmplY3QuZmlsdGVyKHRoaXMsYSxiKSk7Cn0sZXZlcnk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gT2JqZWN0LmV2ZXJ5KHRoaXMsYSxiKTt9LHNvbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gT2JqZWN0LnNvbWUodGhpcyxhLGIpO30sZ2V0S2V5czpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzKTt9LGdldFZhbHVlczpmdW5jdGlvbigpe3JldHVybiBPYmplY3QudmFsdWVzKHRoaXMpOwp9LHRvUXVlcnlTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIE9iamVjdC50b1F1ZXJ5U3RyaW5nKHRoaXMsYSk7fX0pO0hhc2guZXh0ZW5kPU9iamVjdC5hcHBlbmQ7SGFzaC5hbGlhcyh7aW5kZXhPZjoia2V5T2YiLGNvbnRhaW5zOiJoYXNWYWx1ZSJ9KTsoZnVuY3Rpb24oKXt2YXIgaz10aGlzLmRvY3VtZW50Owp2YXIgaD1rLndpbmRvdz10aGlzO3ZhciBhPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxiPW5hdmlnYXRvci5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpLGk9YS5tYXRjaCgvKG9wZXJhfGllfGZpcmVmb3h8Y2hyb21lfHZlcnNpb24pW1xzXC86XShbXHdcZFwuXSspPy4qPyhzYWZhcml8dmVyc2lvbltcc1wvOl0oW1x3XGRcLl0rKXwkKS8pfHxbbnVsbCwidW5rbm93biIsMF0sZj1pWzFdPT0iaWUiJiZrLmRvY3VtZW50TW9kZTsKdmFyIG89dGhpcy5Ccm93c2VyPXtleHRlbmQ6RnVuY3Rpb24ucHJvdG90eXBlLmV4dGVuZCxuYW1lOihpWzFdPT0idmVyc2lvbiIpP2lbM106aVsxXSx2ZXJzaW9uOmZ8fHBhcnNlRmxvYXQoKGlbMV09PSJvcGVyYSImJmlbNF0pP2lbNF06aVsyXSksUGxhdGZvcm06e25hbWU6YS5tYXRjaCgvaXAoPzphZHxvZHxob25lKS8pPyJpb3MiOihhLm1hdGNoKC8oPzp3ZWJvc3xhbmRyb2lkKS8pfHxiLm1hdGNoKC9tYWN8d2lufGxpbnV4Lyl8fFsib3RoZXIiXSlbMF19LEZlYXR1cmVzOnt4cGF0aDohIShrLmV2YWx1YXRlKSxhaXI6ISEoaC5ydW50aW1lKSxxdWVyeTohIShrLnF1ZXJ5U2VsZWN0b3IpLGpzb246ISEoaC5KU09OKX0sUGx1Z2luczp7fX07Cm9bby5uYW1lXT10cnVlO29bby5uYW1lK3BhcnNlSW50KG8udmVyc2lvbiwxMCldPXRydWU7by5QbGF0Zm9ybVtvLlBsYXRmb3JtLm5hbWVdPXRydWU7by5SZXF1ZXN0PShmdW5jdGlvbigpe3ZhciBxPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpOwp9O3ZhciBwPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJNU1hNTDIuWE1MSFRUUCIpO307dmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7fTtyZXR1cm4gRnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3EoKTsKcmV0dXJuIHE7fSxmdW5jdGlvbigpe3AoKTtyZXR1cm4gcDt9LGZ1bmN0aW9uKCl7ZSgpO3JldHVybiBlO30pO30pKCk7by5GZWF0dXJlcy54aHI9ISEoby5SZXF1ZXN0KTt2YXIgaj0oRnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3JldHVybiBuYXZpZ2F0b3IucGx1Z2luc1siU2hvY2t3YXZlIEZsYXNoIl0uZGVzY3JpcHRpb247Cn0sZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoIikuR2V0VmFyaWFibGUoIiR2ZXJzaW9uIik7fSl8fCIwIHIwIikubWF0Y2goL1xkKy9nKTtvLlBsdWdpbnMuRmxhc2g9e3ZlcnNpb246TnVtYmVyKGpbMF18fCIwLiIralsxXSl8fDAsYnVpbGQ6TnVtYmVyKGpbMl0pfHwwfTsKby5leGVjPWZ1bmN0aW9uKHApe2lmKCFwKXtyZXR1cm4gcDt9aWYoaC5leGVjU2NyaXB0KXtoLmV4ZWNTY3JpcHQocCk7fWVsc2V7dmFyIGU9ay5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtlLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvamF2YXNjcmlwdCIpO2UudGV4dD1wOwprLmhlYWQuYXBwZW5kQ2hpbGQoZSk7ay5oZWFkLnJlbW92ZUNoaWxkKGUpO31yZXR1cm4gcDt9O1N0cmluZy5pbXBsZW1lbnQoInN0cmlwU2NyaXB0cyIsZnVuY3Rpb24ocCl7dmFyIGU9IiI7dmFyIHE9dGhpcy5yZXBsYWNlKC88c2NyaXB0W14+XSo+KFtcc1xTXSo/KTxcL3NjcmlwdD4vZ2ksZnVuY3Rpb24ocixzKXtlKz1zKyJcbiI7CnJldHVybiIiO30pO2lmKHA9PT10cnVlKXtvLmV4ZWMoZSk7fWVsc2V7aWYodHlwZU9mKHApPT0iZnVuY3Rpb24iKXtwKGUscSk7fX1yZXR1cm4gcTt9KTtvLmV4dGVuZCh7RG9jdW1lbnQ6dGhpcy5Eb2N1bWVudCxXaW5kb3c6dGhpcy5XaW5kb3csRWxlbWVudDp0aGlzLkVsZW1lbnQsRXZlbnQ6dGhpcy5FdmVudH0pOwp0aGlzLldpbmRvdz10aGlzLiRjb25zdHJ1Y3Rvcj1uZXcgVHlwZSgiV2luZG93IixmdW5jdGlvbigpe30pO3RoaXMuJGZhbWlseT1GdW5jdGlvbi5mcm9tKCJ3aW5kb3ciKS5oaWRlKCk7V2luZG93Lm1pcnJvcihmdW5jdGlvbihlLHApe2hbZV09cDt9KTt0aGlzLkRvY3VtZW50PWsuJGNvbnN0cnVjdG9yPW5ldyBUeXBlKCJEb2N1bWVudCIsZnVuY3Rpb24oKXt9KTsKay4kZmFtaWx5PUZ1bmN0aW9uLmZyb20oImRvY3VtZW50IikuaGlkZSgpO0RvY3VtZW50Lm1pcnJvcihmdW5jdGlvbihlLHApe2tbZV09cDt9KTtrLmh0bWw9ay5kb2N1bWVudEVsZW1lbnQ7aWYoIWsuaGVhZCl7ay5oZWFkPWsuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXTsKfWlmKGsuZXhlY0NvbW1hbmQpe3RyeXtrLmV4ZWNDb21tYW5kKCJCYWNrZ3JvdW5kSW1hZ2VDYWNoZSIsZmFsc2UsdHJ1ZSk7fWNhdGNoKGcpe319aWYodGhpcy5hdHRhY2hFdmVudCYmIXRoaXMuYWRkRXZlbnRMaXN0ZW5lcil7dmFyIGM9ZnVuY3Rpb24oKXt0aGlzLmRldGFjaEV2ZW50KCJvbnVubG9hZCIsYyk7CmsuaGVhZD1rLmh0bWw9ay53aW5kb3c9bnVsbDt9O3RoaXMuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixjKTt9dmFyIG09QXJyYXkuZnJvbTt0cnl7bShrLmh0bWwuY2hpbGROb2Rlcyk7fWNhdGNoKGcpe0FycmF5LmZyb209ZnVuY3Rpb24ocCl7aWYodHlwZW9mIHAhPSJzdHJpbmciJiZUeXBlLmlzRW51bWVyYWJsZShwKSYmdHlwZU9mKHApIT0iYXJyYXkiKXt2YXIgZT1wLmxlbmd0aCxxPW5ldyBBcnJheShlKTsKd2hpbGUoZS0tKXtxW2VdPXBbZV07fXJldHVybiBxO31yZXR1cm4gbShwKTt9O3ZhciBsPUFycmF5LnByb3RvdHlwZSxuPWwuc2xpY2U7WyJwb3AiLCJwdXNoIiwicmV2ZXJzZSIsInNoaWZ0Iiwic29ydCIsInNwbGljZSIsInVuc2hpZnQiLCJjb25jYXQiLCJqb2luIiwic2xpY2UiXS5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBwPWxbZV07CkFycmF5W2VdPWZ1bmN0aW9uKHEpe3JldHVybiBwLmFwcGx5KEFycmF5LmZyb20ocSksbi5jYWxsKGFyZ3VtZW50cywxKSk7fTt9KTt9aWYoby5QbGF0Zm9ybS5pb3Mpe28uUGxhdGZvcm0uaXBvZD10cnVlO31vLkVuZ2luZT17fTt2YXIgZD1mdW5jdGlvbihwLGUpe28uRW5naW5lLm5hbWU9cDsKby5FbmdpbmVbcCtlXT10cnVlO28uRW5naW5lLnZlcnNpb249ZTt9O2lmKG8uaWUpe28uRW5naW5lLnRyaWRlbnQ9dHJ1ZTtzd2l0Y2goby52ZXJzaW9uKXtjYXNlIDY6ZCgidHJpZGVudCIsNCk7YnJlYWs7Y2FzZSA3OmQoInRyaWRlbnQiLDUpO2JyZWFrO2Nhc2UgODpkKCJ0cmlkZW50Iiw2KTsKfX1pZihvLmZpcmVmb3gpe28uRW5naW5lLmdlY2tvPXRydWU7aWYoby52ZXJzaW9uPj0zKXtkKCJnZWNrbyIsMTkpO31lbHNle2QoImdlY2tvIiwxOCk7fX1pZihvLnNhZmFyaXx8by5jaHJvbWUpe28uRW5naW5lLndlYmtpdD10cnVlO3N3aXRjaChvLnZlcnNpb24pe2Nhc2UgMjpkKCJ3ZWJraXQiLDQxOSk7CmJyZWFrO2Nhc2UgMzpkKCJ3ZWJraXQiLDQyMCk7YnJlYWs7Y2FzZSA0OmQoIndlYmtpdCIsNTI1KTt9fWlmKG8ub3BlcmEpe28uRW5naW5lLnByZXN0bz10cnVlO2lmKG8udmVyc2lvbj49OS42KXtkKCJwcmVzdG8iLDk2MCk7fWVsc2V7aWYoby52ZXJzaW9uPj05LjUpe2QoInByZXN0byIsOTUwKTsKfWVsc2V7ZCgicHJlc3RvIiw5MjUpO319fWlmKG8ubmFtZT09InVua25vd24iKXtzd2l0Y2goKGEubWF0Y2goLyg/OndlYmtpdHxraHRtbHxnZWNrbykvKXx8W10pWzBdKXtjYXNlIndlYmtpdCI6Y2FzZSJraHRtbCI6by5FbmdpbmUud2Via2l0PXRydWU7YnJlYWs7Y2FzZSJnZWNrbyI6by5FbmdpbmUuZ2Vja289dHJ1ZTsKfX10aGlzLiRleGVjPW8uZXhlYzt9KSgpOyhmdW5jdGlvbigpe3ZhciBiPXt9O3ZhciBhPXRoaXMuRE9NRXZlbnQ9bmV3IFR5cGUoIkRPTUV2ZW50IixmdW5jdGlvbihjLGcpe2lmKCFnKXtnPXdpbmRvdzt9Yz1jfHxnLmV2ZW50O2lmKGMuJGV4dGVuZGVkKXtyZXR1cm4gYzsKfXRoaXMuZXZlbnQ9Yzt0aGlzLiRleHRlbmRlZD10cnVlO3RoaXMuc2hpZnQ9Yy5zaGlmdEtleTt0aGlzLmNvbnRyb2w9Yy5jdHJsS2V5O3RoaXMuYWx0PWMuYWx0S2V5O3RoaXMubWV0YT1jLm1ldGFLZXk7dmFyIGk9dGhpcy50eXBlPWMudHlwZTt2YXIgaD1jLnRhcmdldHx8Yy5zcmNFbGVtZW50Owp3aGlsZShoJiZoLm5vZGVUeXBlPT0zKXtoPWgucGFyZW50Tm9kZTt9dGhpcy50YXJnZXQ9ZG9jdW1lbnQuaWQoaCk7aWYoaS5pbmRleE9mKCJrZXkiKT09MCl7dmFyIGQ9dGhpcy5jb2RlPShjLndoaWNofHxjLmtleUNvZGUpO3RoaXMua2V5PWJbZF18fE9iamVjdC5rZXlPZihFdmVudC5LZXlzLGQpOwppZihpPT0ia2V5ZG93biIpe2lmKGQ+MTExJiZkPDEyNCl7dGhpcy5rZXk9ImYiKyhkLTExMSk7fWVsc2V7aWYoZD45NSYmZDwxMDYpe3RoaXMua2V5PWQtOTY7fX19aWYodGhpcy5rZXk9PW51bGwpe3RoaXMua2V5PVN0cmluZy5mcm9tQ2hhckNvZGUoZCkudG9Mb3dlckNhc2UoKTsKfX1lbHNle2lmKGk9PSJjbGljayJ8fGk9PSJkYmxjbGljayJ8fGk9PSJjb250ZXh0bWVudSJ8fGk9PSJET01Nb3VzZVNjcm9sbCJ8fGkuaW5kZXhPZigibW91c2UiKT09MCl7dmFyIGo9Zy5kb2N1bWVudDtqPSghai5jb21wYXRNb2RlfHxqLmNvbXBhdE1vZGU9PSJDU1MxQ29tcGF0Iik/ai5odG1sOmouYm9keTsKdGhpcy5wYWdlPXt4OihjLnBhZ2VYIT1udWxsKT9jLnBhZ2VYOmMuY2xpZW50WCtqLnNjcm9sbExlZnQseTooYy5wYWdlWSE9bnVsbCk/Yy5wYWdlWTpjLmNsaWVudFkrai5zY3JvbGxUb3B9O3RoaXMuY2xpZW50PXt4OihjLnBhZ2VYIT1udWxsKT9jLnBhZ2VYLWcucGFnZVhPZmZzZXQ6Yy5jbGllbnRYLHk6KGMucGFnZVkhPW51bGwpP2MucGFnZVktZy5wYWdlWU9mZnNldDpjLmNsaWVudFl9OwppZihpPT0iRE9NTW91c2VTY3JvbGwifHxpPT0ibW91c2V3aGVlbCIpe3RoaXMud2hlZWw9KGMud2hlZWxEZWx0YSk/Yy53aGVlbERlbHRhLzEyMDotKGMuZGV0YWlsfHwwKS8zO310aGlzLnJpZ2h0Q2xpY2s9KGMud2hpY2g9PTN8fGMuYnV0dG9uPT0yKTtpZihpPT0ibW91c2VvdmVyInx8aT09Im1vdXNlb3V0Iil7dmFyIGs9Yy5yZWxhdGVkVGFyZ2V0fHxjWyhpPT0ibW91c2VvdmVyIj8iZnJvbSI6InRvIikrIkVsZW1lbnQiXTsKd2hpbGUoayYmay5ub2RlVHlwZT09Myl7az1rLnBhcmVudE5vZGU7fXRoaXMucmVsYXRlZFRhcmdldD1kb2N1bWVudC5pZChrKTt9fWVsc2V7aWYoaS5pbmRleE9mKCJ0b3VjaCIpPT0wfHxpLmluZGV4T2YoImdlc3R1cmUiKT09MCl7dGhpcy5yb3RhdGlvbj1jLnJvdGF0aW9uOwp0aGlzLnNjYWxlPWMuc2NhbGU7dGhpcy50YXJnZXRUb3VjaGVzPWMudGFyZ2V0VG91Y2hlczt0aGlzLmNoYW5nZWRUb3VjaGVzPWMuY2hhbmdlZFRvdWNoZXM7dmFyIGY9dGhpcy50b3VjaGVzPWMudG91Y2hlcztpZihmJiZmWzBdKXt2YXIgZT1mWzBdO3RoaXMucGFnZT17eDplLnBhZ2VYLHk6ZS5wYWdlWX07CnRoaXMuY2xpZW50PXt4OmUuY2xpZW50WCx5OmUuY2xpZW50WX07fX19fWlmKCF0aGlzLmNsaWVudCl7dGhpcy5jbGllbnQ9e307fWlmKCF0aGlzLnBhZ2Upe3RoaXMucGFnZT17fTt9fSk7YS5pbXBsZW1lbnQoe3N0b3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2ZW50RGVmYXVsdCgpLnN0b3BQcm9wYWdhdGlvbigpOwp9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe2lmKHRoaXMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKXt0aGlzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO31lbHNle3RoaXMuZXZlbnQuY2FuY2VsQnViYmxlPXRydWU7fXJldHVybiB0aGlzO30scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtpZih0aGlzLmV2ZW50LnByZXZlbnREZWZhdWx0KXt0aGlzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7Cn1lbHNle3RoaXMuZXZlbnQucmV0dXJuVmFsdWU9ZmFsc2U7fXJldHVybiB0aGlzO319KTthLmRlZmluZUtleT1mdW5jdGlvbihkLGMpe2JbZF09YztyZXR1cm4gdGhpczt9O2EuZGVmaW5lS2V5cz1hLmRlZmluZUtleS5vdmVybG9hZFNldHRlcih0cnVlKTthLmRlZmluZUtleXMoeyIzOCI6InVwIiwiNDAiOiJkb3duIiwiMzciOiJsZWZ0IiwiMzkiOiJyaWdodCIsIjI3IjoiZXNjIiwiMzIiOiJzcGFjZSIsIjgiOiJiYWNrc3BhY2UiLCI5IjoidGFiIiwiNDYiOiJkZWxldGUiLCIxMyI6ImVudGVyIn0pOwp9KSgpO3ZhciBFdmVudD1ET01FdmVudDtFdmVudC5LZXlzPXt9O0V2ZW50LktleXM9bmV3IEhhc2goRXZlbnQuS2V5cyk7KGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5DbGFzcz1uZXcgVHlwZSgiQ2xhc3MiLGZ1bmN0aW9uKGgpe2lmKGluc3RhbmNlT2YoaCxGdW5jdGlvbikpe2g9e2luaXRpYWxpemU6aH07Cn12YXIgZz1mdW5jdGlvbigpe2UodGhpcyk7aWYoZy4kcHJvdG90eXBpbmcpe3JldHVybiB0aGlzO310aGlzLiRjYWxsZXI9bnVsbDt2YXIgaT0odGhpcy5pbml0aWFsaXplKT90aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXM7dGhpcy4kY2FsbGVyPXRoaXMuY2FsbGVyPW51bGw7CnJldHVybiBpO30uZXh0ZW5kKHRoaXMpLmltcGxlbWVudChoKTtnLiRjb25zdHJ1Y3Rvcj1hO2cucHJvdG90eXBlLiRjb25zdHJ1Y3Rvcj1nO2cucHJvdG90eXBlLnBhcmVudD1jO3JldHVybiBnO30pO3ZhciBjPWZ1bmN0aW9uKCl7aWYoIXRoaXMuJGNhbGxlcil7dGhyb3cgbmV3IEVycm9yKCdUaGUgbWV0aG9kICJwYXJlbnQiIGNhbm5vdCBiZSBjYWxsZWQuJyk7Cn12YXIgZz10aGlzLiRjYWxsZXIuJG5hbWUsaD10aGlzLiRjYWxsZXIuJG93bmVyLnBhcmVudCxpPShoKT9oLnByb3RvdHlwZVtnXTpudWxsO2lmKCFpKXt0aHJvdyBuZXcgRXJyb3IoJ1RoZSBtZXRob2QgIicrZysnIiBoYXMgbm8gcGFyZW50LicpO31yZXR1cm4gaS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Cn07dmFyIGU9ZnVuY3Rpb24oZyl7Zm9yKHZhciBoIGluIGcpe3ZhciBqPWdbaF07c3dpdGNoKHR5cGVPZihqKSl7Y2FzZSJvYmplY3QiOnZhciBpPWZ1bmN0aW9uKCl7fTtpLnByb3RvdHlwZT1qO2dbaF09ZShuZXcgaSk7YnJlYWs7Y2FzZSJhcnJheSI6Z1toXT1qLmNsb25lKCk7CmJyZWFrO319cmV0dXJuIGc7fTt2YXIgYj1mdW5jdGlvbihnLGgsail7aWYoai4kb3JpZ2luKXtqPWouJG9yaWdpbjt9dmFyIGk9ZnVuY3Rpb24oKXtpZihqLiRwcm90ZWN0ZWQmJnRoaXMuJGNhbGxlcj09bnVsbCl7dGhyb3cgbmV3IEVycm9yKCdUaGUgbWV0aG9kICInK2grJyIgY2Fubm90IGJlIGNhbGxlZC4nKTsKfXZhciBsPXRoaXMuY2FsbGVyLG09dGhpcy4kY2FsbGVyO3RoaXMuY2FsbGVyPW07dGhpcy4kY2FsbGVyPWk7dmFyIGs9ai5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy4kY2FsbGVyPW07dGhpcy5jYWxsZXI9bDtyZXR1cm4gazt9LmV4dGVuZCh7JG93bmVyOmcsJG9yaWdpbjpqLCRuYW1lOmh9KTsKcmV0dXJuIGk7fTt2YXIgZj1mdW5jdGlvbihoLGksZyl7aWYoYS5NdXRhdG9ycy5oYXNPd25Qcm9wZXJ0eShoKSl7aT1hLk11dGF0b3JzW2hdLmNhbGwodGhpcyxpKTtpZihpPT1udWxsKXtyZXR1cm4gdGhpczt9fWlmKHR5cGVPZihpKT09ImZ1bmN0aW9uIil7aWYoaS4kaGlkZGVuKXtyZXR1cm4gdGhpczsKfXRoaXMucHJvdG90eXBlW2hdPShnKT9pOmIodGhpcyxoLGkpO31lbHNle09iamVjdC5tZXJnZSh0aGlzLnByb3RvdHlwZSxoLGkpO31yZXR1cm4gdGhpczt9O3ZhciBkPWZ1bmN0aW9uKGcpe2cuJHByb3RvdHlwaW5nPXRydWU7dmFyIGg9bmV3IGc7ZGVsZXRlIGcuJHByb3RvdHlwaW5nOwpyZXR1cm4gaDt9O2EuaW1wbGVtZW50KCJpbXBsZW1lbnQiLGYub3ZlcmxvYWRTZXR0ZXIoKSk7YS5NdXRhdG9ycz17RXh0ZW5kczpmdW5jdGlvbihnKXt0aGlzLnBhcmVudD1nO3RoaXMucHJvdG90eXBlPWQoZyk7fSxJbXBsZW1lbnRzOmZ1bmN0aW9uKGcpe0FycmF5LmZyb20oZykuZWFjaChmdW5jdGlvbihqKXt2YXIgaD1uZXcgajsKZm9yKHZhciBpIGluIGgpe2YuY2FsbCh0aGlzLGksaFtpXSx0cnVlKTt9fSx0aGlzKTt9fTt9KSgpOyhmdW5jdGlvbigpe3RoaXMuQ2hhaW49bmV3IENsYXNzKHskY2hhaW46W10sY2hhaW46ZnVuY3Rpb24oKXt0aGlzLiRjaGFpbi5hcHBlbmQoQXJyYXkuZmxhdHRlbihhcmd1bWVudHMpKTsKcmV0dXJuIHRoaXM7fSxjYWxsQ2hhaW46ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy4kY2hhaW4ubGVuZ3RoKT90aGlzLiRjaGFpbi5zaGlmdCgpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTpmYWxzZTt9LGNsZWFyQ2hhaW46ZnVuY3Rpb24oKXt0aGlzLiRjaGFpbi5lbXB0eSgpOwpyZXR1cm4gdGhpczt9fSk7dmFyIGE9ZnVuY3Rpb24oYil7cmV0dXJuIGIucmVwbGFjZSgvXm9uKFtBLVpdKS8sZnVuY3Rpb24oYyxkKXtyZXR1cm4gZC50b0xvd2VyQ2FzZSgpO30pO307dGhpcy5FdmVudHM9bmV3IENsYXNzKHskZXZlbnRzOnt9LGFkZEV2ZW50OmZ1bmN0aW9uKGQsYyxiKXtkPWEoZCk7CmlmKGM9PSRlbXB0eSl7cmV0dXJuIHRoaXM7fXRoaXMuJGV2ZW50c1tkXT0odGhpcy4kZXZlbnRzW2RdfHxbXSkuaW5jbHVkZShjKTtpZihiKXtjLmludGVybmFsPXRydWU7fXJldHVybiB0aGlzO30sYWRkRXZlbnRzOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYyBpbiBiKXt0aGlzLmFkZEV2ZW50KGMsYltjXSk7Cn1yZXR1cm4gdGhpczt9LGZpcmVFdmVudDpmdW5jdGlvbihlLGMsYil7ZT1hKGUpO3ZhciBkPXRoaXMuJGV2ZW50c1tlXTtpZighZCl7cmV0dXJuIHRoaXM7fWM9QXJyYXkuZnJvbShjKTtkLmVhY2goZnVuY3Rpb24oZil7aWYoYil7Zi5kZWxheShiLHRoaXMsYyk7fWVsc2V7Zi5hcHBseSh0aGlzLGMpOwp9fSx0aGlzKTtyZXR1cm4gdGhpczt9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGUsZCl7ZT1hKGUpO3ZhciBjPXRoaXMuJGV2ZW50c1tlXTtpZihjJiYhZC5pbnRlcm5hbCl7dmFyIGI9Yy5pbmRleE9mKGQpO2lmKGIhPS0xKXtkZWxldGUgY1tiXTt9fXJldHVybiB0aGlzOwp9LHJlbW92ZUV2ZW50czpmdW5jdGlvbihkKXt2YXIgZTtpZih0eXBlT2YoZCk9PSJvYmplY3QiKXtmb3IoZSBpbiBkKXt0aGlzLnJlbW92ZUV2ZW50KGUsZFtlXSk7fXJldHVybiB0aGlzO31pZihkKXtkPWEoZCk7fWZvcihlIGluIHRoaXMuJGV2ZW50cyl7aWYoZCYmZCE9ZSl7Y29udGludWU7Cn12YXIgYz10aGlzLiRldmVudHNbZV07Zm9yKHZhciBiPWMubGVuZ3RoO2ItLTspe2lmKGIgaW4gYyl7dGhpcy5yZW1vdmVFdmVudChlLGNbYl0pO319fXJldHVybiB0aGlzO319KTt0aGlzLk9wdGlvbnM9bmV3IENsYXNzKHtzZXRPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5vcHRpb25zPU9iamVjdC5tZXJnZS5hcHBseShudWxsLFt7fSx0aGlzLm9wdGlvbnNdLmFwcGVuZChhcmd1bWVudHMpKTsKaWYodGhpcy5hZGRFdmVudCl7Zm9yKHZhciBjIGluIGIpe2lmKHR5cGVPZihiW2NdKSE9ImZ1bmN0aW9uInx8ISgvXm9uW0EtWl0vKS50ZXN0KGMpKXtjb250aW51ZTt9dGhpcy5hZGRFdmVudChjLGJbY10pO2RlbGV0ZSBiW2NdO319cmV0dXJuIHRoaXM7fX0pO30pKCk7CihmdW5jdGlvbigpe3ZhciBrLG4sbCxnLGE9e30sYz17fSxtPS9cXC9nO3ZhciBlPWZ1bmN0aW9uKHEscCl7aWYocT09bnVsbCl7cmV0dXJuIG51bGw7fWlmKHEuU2xpY2s9PT10cnVlKXtyZXR1cm4gcTt9cT0oIiIrcSkucmVwbGFjZSgvXlxzK3xccyskL2csIiIpO2c9ISFwOwp2YXIgbz0oZyk/YzphO2lmKG9bcV0pe3JldHVybiBvW3FdO31rPXtTbGljazp0cnVlLGV4cHJlc3Npb25zOltdLHJhdzpxLHJldmVyc2U6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLnJhdyx0cnVlKTt9fTtuPS0xO3doaWxlKHEhPShxPXEucmVwbGFjZShqLGIpKSl7fWsubGVuZ3RoPWsuZXhwcmVzc2lvbnMubGVuZ3RoOwpyZXR1cm4gb1trLnJhd109KGcpP2goayk6azt9O3ZhciBpPWZ1bmN0aW9uKG8pe2lmKG89PT0iISIpe3JldHVybiIgIjt9ZWxzZXtpZihvPT09IiAiKXtyZXR1cm4iISI7fWVsc2V7aWYoKC9eIS8pLnRlc3Qobykpe3JldHVybiBvLnJlcGxhY2UoL14hLywiIik7fWVsc2V7cmV0dXJuIiEiK287Cn19fX07dmFyIGg9ZnVuY3Rpb24odSl7dmFyIHI9dS5leHByZXNzaW9ucztmb3IodmFyIHA9MDtwPHIubGVuZ3RoO3ArKyl7dmFyIHQ9cltwXTt2YXIgcT17cGFydHM6W10sdGFnOiIqIixjb21iaW5hdG9yOmkodFswXS5jb21iaW5hdG9yKX07Zm9yKHZhciBvPTA7bzx0Lmxlbmd0aDsKbysrKXt2YXIgcz10W29dO2lmKCFzLnJldmVyc2VDb21iaW5hdG9yKXtzLnJldmVyc2VDb21iaW5hdG9yPSIgIjt9cy5jb21iaW5hdG9yPXMucmV2ZXJzZUNvbWJpbmF0b3I7ZGVsZXRlIHMucmV2ZXJzZUNvbWJpbmF0b3I7fXQucmV2ZXJzZSgpLnB1c2gocSk7fXJldHVybiB1Owp9O3ZhciBmPWZ1bmN0aW9uKG8pe3JldHVybiBvLnJlcGxhY2UoL1stW1xde30oKSorPy5cXF4kfCwjXHNdL2csZnVuY3Rpb24ocCl7cmV0dXJuIlxcIitwO30pO307dmFyIGo9bmV3IFJlZ0V4cCgiXig/OlxccyooLClcXHMqfFxccyooPGNvbWJpbmF0b3I+KylcXHMqfChcXHMrKXwoPHVuaWNvZGU+K3xcXCopfFxcIyg8dW5pY29kZT4rKXxcXC4oPHVuaWNvZGU+Kyl8XFxbXFxzKig8dW5pY29kZTE+KykoPzpcXHMqKFsqXiQhfnxdPz0pKD86XFxzKig/OihbXCInXT8pKC4qPylcXDkpKSk/XFxzKlxcXSg/IVxcXSl8KDorKSg8dW5pY29kZT4rKSg/OlxcKCg/Oig/OihbXCInXSkoW15cXDEzXSopXFwxMyl8KCg/OlxcKFteKV0rXFwpfFteKCldKikrKSlcXCkpPykiLnJlcGxhY2UoLzxjb21iaW5hdG9yPi8sIlsiK2YoIj4rfmAhQCQlXiY9e31cXDs8LyIpKyJdIikucmVwbGFjZSgvPHVuaWNvZGU+L2csIig/OltcXHdcXHUwMGExLVxcdUZGRkYtXXxcXFxcW15cXHMwLTlhLWZdKSIpLnJlcGxhY2UoLzx1bmljb2RlMT4vZywiKD86WzpcXHdcXHUwMGExLVxcdUZGRkYtXXxcXFxcW15cXHMwLTlhLWZdKSIpKTsKZnVuY3Rpb24gYih4LHMsRCx6LHIsQyxxLEIsQSx5LHUsRixHLHYscCx3KXtpZihzfHxuPT09LTEpe2suZXhwcmVzc2lvbnNbKytuXT1bXTtsPS0xO2lmKHMpe3JldHVybiIiO319aWYoRHx8enx8bD09PS0xKXtEPUR8fCIgIjt2YXIgdD1rLmV4cHJlc3Npb25zW25dOwppZihnJiZ0W2xdKXt0W2xdLnJldmVyc2VDb21iaW5hdG9yPWkoRCk7fXRbKytsXT17Y29tYmluYXRvcjpELHRhZzoiKiJ9O312YXIgbz1rLmV4cHJlc3Npb25zW25dW2xdO2lmKHIpe28udGFnPXIucmVwbGFjZShtLCIiKTt9ZWxzZXtpZihDKXtvLmlkPUMucmVwbGFjZShtLCIiKTsKfWVsc2V7aWYocSl7cT1xLnJlcGxhY2UobSwiIik7aWYoIW8uY2xhc3NMaXN0KXtvLmNsYXNzTGlzdD1bXTt9aWYoIW8uY2xhc3Nlcyl7by5jbGFzc2VzPVtdO31vLmNsYXNzTGlzdC5wdXNoKHEpO28uY2xhc3Nlcy5wdXNoKHt2YWx1ZTpxLHJlZ2V4cDpuZXcgUmVnRXhwKCIoXnxcXHMpIitmKHEpKyIoXFxzfCQpIil9KTsKfWVsc2V7aWYoRyl7dz13fHxwO3c9dz93LnJlcGxhY2UobSwiIik6bnVsbDtpZighby5wc2V1ZG9zKXtvLnBzZXVkb3M9W107fW8ucHNldWRvcy5wdXNoKHtrZXk6Ry5yZXBsYWNlKG0sIiIpLHZhbHVlOncsdHlwZTpGLmxlbmd0aD09MT8iY2xhc3MiOiJlbGVtZW50In0pOwp9ZWxzZXtpZihCKXtCPUIucmVwbGFjZShtLCIiKTt1PSh1fHwiIikucmVwbGFjZShtLCIiKTt2YXIgRSxIO3N3aXRjaChBKXtjYXNlIl49IjpIPW5ldyBSZWdFeHAoIl4iK2YodSkpO2JyZWFrO2Nhc2UiJD0iOkg9bmV3IFJlZ0V4cChmKHUpKyIkIik7YnJlYWs7Y2FzZSJ+PSI6SD1uZXcgUmVnRXhwKCIoXnxcXHMpIitmKHUpKyIoXFxzfCQpIik7CmJyZWFrO2Nhc2UifD0iOkg9bmV3IFJlZ0V4cCgiXiIrZih1KSsiKC18JCkiKTticmVhaztjYXNlIj0iOkU9ZnVuY3Rpb24oSSl7cmV0dXJuIHU9PUk7fTticmVhaztjYXNlIio9IjpFPWZ1bmN0aW9uKEkpe3JldHVybiBJJiZJLmluZGV4T2YodSk+LTE7fTticmVhazsKY2FzZSIhPSI6RT1mdW5jdGlvbihJKXtyZXR1cm4gdSE9STt9O2JyZWFrO2RlZmF1bHQ6RT1mdW5jdGlvbihJKXtyZXR1cm4gISFJO307fWlmKHU9PSIiJiYoL15bKiReXT0kLykudGVzdChBKSl7RT1mdW5jdGlvbigpe3JldHVybiBmYWxzZTt9O31pZighRSl7RT1mdW5jdGlvbihJKXtyZXR1cm4gSSYmSC50ZXN0KEkpOwp9O31pZighby5hdHRyaWJ1dGVzKXtvLmF0dHJpYnV0ZXM9W107fW8uYXR0cmlidXRlcy5wdXNoKHtrZXk6QixvcGVyYXRvcjpBLHZhbHVlOnUsdGVzdDpFfSk7fX19fX1yZXR1cm4iIjt9dmFyIGQ9KHRoaXMuU2xpY2t8fHt9KTtkLnBhcnNlPWZ1bmN0aW9uKG8pe3JldHVybiBlKG8pOwp9O2QuZXNjYXBlUmVnRXhwPWY7aWYoIXRoaXMuU2xpY2spe3RoaXMuU2xpY2s9ZDt9fSkuYXBwbHkoKHR5cGVvZiBleHBvcnRzIT0idW5kZWZpbmVkIik/ZXhwb3J0czp0aGlzKTsoZnVuY3Rpb24oKXt2YXIgaz17fSxtPXt9LGQ9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKay5pc05hdGl2ZUNvZGU9ZnVuY3Rpb24oYyl7cmV0dXJuKC9ce1xzKlxbbmF0aXZlIGNvZGVcXVxzKlx9LykudGVzdCgiIitjKTt9O2suaXNYTUw9ZnVuY3Rpb24oYyl7cmV0dXJuKCEhYy54bWxWZXJzaW9uKXx8KCEhYy54bWwpfHwoZC5jYWxsKGMpPT0iW29iamVjdCBYTUxEb2N1bWVudF0iKXx8KGMubm9kZVR5cGU9PTkmJmMuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lIT0iSFRNTCIpOwp9O2suc2V0RG9jdW1lbnQ9ZnVuY3Rpb24odyl7dmFyIHA9dy5ub2RlVHlwZTtpZihwPT05KXt9ZWxzZXtpZihwKXt3PXcub3duZXJEb2N1bWVudDt9ZWxzZXtpZih3Lm5hdmlnYXRvcil7dz13LmRvY3VtZW50O31lbHNle3JldHVybjt9fX1pZih0aGlzLmRvY3VtZW50PT09dyl7cmV0dXJuOwp9dGhpcy5kb2N1bWVudD13O3ZhciBBPXcuZG9jdW1lbnRFbGVtZW50LG89dGhpcy5nZXRVSURYTUwoQSkscz1tW29dLHI7aWYocyl7Zm9yKHIgaW4gcyl7dGhpc1tyXT1zW3JdO31yZXR1cm47fXM9bVtvXT17fTtzLnJvb3Q9QTtzLmlzWE1MRG9jdW1lbnQ9dGhpcy5pc1hNTCh3KTsKcy5icm9rZW5TdGFyR0VCVE49cy5zdGFyU2VsZWN0c0Nsb3NlZFFTQT1zLmlkR2V0c05hbWU9cy5icm9rZW5NaXhlZENhc2VRU0E9cy5icm9rZW5HRUJDTj1zLmJyb2tlbkNoZWNrZWRRU0E9cy5icm9rZW5FbXB0eUF0dHJpYnV0ZVFTQT1zLmlzSFRNTERvY3VtZW50PXMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yPWZhbHNlOwp2YXIgcSx1LHkseix0O3ZhciB4LHY9InNsaWNrX3VuaXF1ZWlkIjt2YXIgYz13LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3ZhciBuPXcuYm9keXx8dy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdfHxBO24uYXBwZW5kQ2hpbGQoYyk7dHJ5e2MuaW5uZXJIVE1MPSc8YSBpZD0iJyt2KyciPjwvYT4nOwpzLmlzSFRNTERvY3VtZW50PSEhdy5nZXRFbGVtZW50QnlJZCh2KTt9Y2F0Y2goQyl7fWlmKHMuaXNIVE1MRG9jdW1lbnQpe2Muc3R5bGUuZGlzcGxheT0ibm9uZSI7Yy5hcHBlbmRDaGlsZCh3LmNyZWF0ZUNvbW1lbnQoIiIpKTt1PShjLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RoPjEpOwp0cnl7Yy5pbm5lckhUTUw9ImZvbzwvZm9vPiI7eD1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7cT0oeCYmISF4Lmxlbmd0aCYmeFswXS5ub2RlTmFtZS5jaGFyQXQoMCk9PSIvIik7fWNhdGNoKEMpe31zLmJyb2tlblN0YXJHRUJUTj11fHxxO3RyeXtjLmlubmVySFRNTD0nPGEgbmFtZT0iJyt2KyciPjwvYT48YiBpZD0iJyt2KyciPjwvYj4nOwpzLmlkR2V0c05hbWU9dy5nZXRFbGVtZW50QnlJZCh2KT09PWMuZmlyc3RDaGlsZDt9Y2F0Y2goQyl7fWlmKGMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSl7dHJ5e2MuaW5uZXJIVE1MPSc8YSBjbGFzcz0iZiI+PC9hPjxhIGNsYXNzPSJiIj48L2E+JztjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImIiKS5sZW5ndGg7CmMuZmlyc3RDaGlsZC5jbGFzc05hbWU9ImIiO3o9KGMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYiIpLmxlbmd0aCE9Mik7fWNhdGNoKEMpe310cnl7Yy5pbm5lckhUTUw9JzxhIGNsYXNzPSJhIj48L2E+PGEgY2xhc3M9ImYgYiBhIj48L2E+Jzt5PShjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImEiKS5sZW5ndGghPTIpOwp9Y2F0Y2goQyl7fXMuYnJva2VuR0VCQ049enx8eTt9aWYoYy5xdWVyeVNlbGVjdG9yQWxsKXt0cnl7Yy5pbm5lckhUTUw9ImZvbzwvZm9vPiI7eD1jLnF1ZXJ5U2VsZWN0b3JBbGwoIioiKTtzLnN0YXJTZWxlY3RzQ2xvc2VkUVNBPSh4JiYhIXgubGVuZ3RoJiZ4WzBdLm5vZGVOYW1lLmNoYXJBdCgwKT09Ii8iKTsKfWNhdGNoKEMpe310cnl7Yy5pbm5lckhUTUw9JzxhIGNsYXNzPSJNaVgiPjwvYT4nO3MuYnJva2VuTWl4ZWRDYXNlUVNBPSFjLnF1ZXJ5U2VsZWN0b3JBbGwoIi5NaVgiKS5sZW5ndGg7fWNhdGNoKEMpe310cnl7Yy5pbm5lckhUTUw9JzxzZWxlY3Q+PG9wdGlvbiBzZWxlY3RlZD0ic2VsZWN0ZWQiPmE8L29wdGlvbj48L3NlbGVjdD4nOwpzLmJyb2tlbkNoZWNrZWRRU0E9KGMucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGg9PTApO31jYXRjaChDKXt9dHJ5e2MuaW5uZXJIVE1MPSc8YSBjbGFzcz0iIj48L2E+JztzLmJyb2tlbkVtcHR5QXR0cmlidXRlUVNBPShjLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjbGFzcyo9IiJdJykubGVuZ3RoIT0wKTsKfWNhdGNoKEMpe319dHJ5e2MuaW5uZXJIVE1MPSc8Zm9ybSBhY3Rpb249InMiPjxpbnB1dCBpZD0iYWN0aW9uIi8+PC9mb3JtPic7dD0oYy5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiYWN0aW9uIikhPSJzIik7fWNhdGNoKEMpe31zLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcj1BLm1hdGNoZXNTZWxlY3Rvcnx8QS5tb3pNYXRjaGVzU2VsZWN0b3J8fEEud2Via2l0TWF0Y2hlc1NlbGVjdG9yOwppZihzLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcil7dHJ5e3MubmF0aXZlTWF0Y2hlc1NlbGVjdG9yLmNhbGwoQSwiOnNsaWNrIik7cy5uYXRpdmVNYXRjaGVzU2VsZWN0b3I9bnVsbDt9Y2F0Y2goQyl7fX19dHJ5e0Euc2xpY2tfZXhwYW5kbz0xO2RlbGV0ZSBBLnNsaWNrX2V4cGFuZG87CnMuZ2V0VUlEPXRoaXMuZ2V0VUlESFRNTDt9Y2F0Y2goQyl7cy5nZXRVSUQ9dGhpcy5nZXRVSURYTUw7fW4ucmVtb3ZlQ2hpbGQoYyk7Yz14PW49bnVsbDtzLmdldEF0dHJpYnV0ZT0ocy5pc0hUTUxEb2N1bWVudCYmdCk/ZnVuY3Rpb24oRyxFKXt2YXIgSD10aGlzLmF0dHJpYnV0ZUdldHRlcnNbRV07CmlmKEgpe3JldHVybiBILmNhbGwoRyk7fXZhciBGPUcuZ2V0QXR0cmlidXRlTm9kZShFKTtyZXR1cm4oRik/Ri5ub2RlVmFsdWU6bnVsbDt9OmZ1bmN0aW9uKEYsRSl7dmFyIEc9dGhpcy5hdHRyaWJ1dGVHZXR0ZXJzW0VdO3JldHVybihHKT9HLmNhbGwoRik6Ri5nZXRBdHRyaWJ1dGUoRSk7Cn07cy5oYXNBdHRyaWJ1dGU9KEEmJnRoaXMuaXNOYXRpdmVDb2RlKEEuaGFzQXR0cmlidXRlKSk/ZnVuY3Rpb24oRixFKXtyZXR1cm4gRi5oYXNBdHRyaWJ1dGUoRSk7fTpmdW5jdGlvbihGLEUpe0Y9Ri5nZXRBdHRyaWJ1dGVOb2RlKEUpO3JldHVybiAhIShGJiYoRi5zcGVjaWZpZWR8fEYubm9kZVZhbHVlKSk7Cn07dmFyIEQ9QSYmdGhpcy5pc05hdGl2ZUNvZGUoQS5jb250YWlucyksQj13JiZ0aGlzLmlzTmF0aXZlQ29kZSh3LmNvbnRhaW5zKTtzLmNvbnRhaW5zPShEJiZCKT9mdW5jdGlvbihFLEYpe3JldHVybiBFLmNvbnRhaW5zKEYpO306KEQmJiFCKT9mdW5jdGlvbihFLEYpe3JldHVybiBFPT09Rnx8KChFPT09dyk/dy5kb2N1bWVudEVsZW1lbnQ6RSkuY29udGFpbnMoRik7Cn06KEEmJkEuY29tcGFyZURvY3VtZW50UG9zaXRpb24pP2Z1bmN0aW9uKEUsRil7cmV0dXJuIEU9PT1GfHwhIShFLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKEYpJjE2KTt9OmZ1bmN0aW9uKEUsRil7aWYoRil7ZG97aWYoRj09PUUpe3JldHVybiB0cnVlO319d2hpbGUoKEY9Ri5wYXJlbnROb2RlKSk7Cn1yZXR1cm4gZmFsc2U7fTtzLmRvY3VtZW50U29ydGVyPShBLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKT9mdW5jdGlvbihGLEUpe2lmKCFGLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9ufHwhRS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbil7cmV0dXJuIDA7fXJldHVybiBGLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKEUpJjQ/LTE6Rj09PUU/MDoxOwp9Oigic291cmNlSW5kZXgiIGluIEEpP2Z1bmN0aW9uKEYsRSl7aWYoIUYuc291cmNlSW5kZXh8fCFFLnNvdXJjZUluZGV4KXtyZXR1cm4gMDt9cmV0dXJuIEYuc291cmNlSW5kZXgtRS5zb3VyY2VJbmRleDt9Oih3LmNyZWF0ZVJhbmdlKT9mdW5jdGlvbihILEYpe2lmKCFILm93bmVyRG9jdW1lbnR8fCFGLm93bmVyRG9jdW1lbnQpe3JldHVybiAwOwp9dmFyIEc9SC5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCksRT1GLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtHLnNldFN0YXJ0KEgsMCk7Ry5zZXRFbmQoSCwwKTtFLnNldFN0YXJ0KEYsMCk7RS5zZXRFbmQoRiwwKTtyZXR1cm4gRy5jb21wYXJlQm91bmRhcnlQb2ludHMoUmFuZ2UuU1RBUlRfVE9fRU5ELEUpOwp9Om51bGw7QT1udWxsO2ZvcihyIGluIHMpe3RoaXNbcl09c1tyXTt9fTt2YXIgZj0vXihbIy5dPykoKD86W1x3LV0rfFwqKSkkLyxoPS9cWy4rWyokXl09KD86IiJ8JycpP1xdLyxnPXt9O2suc2VhcmNoPWZ1bmN0aW9uKFUseixILHMpe3ZhciBwPXRoaXMuZm91bmQ9KHMpP251bGw6KEh8fFtdKTsKaWYoIVUpe3JldHVybiBwO31lbHNle2lmKFUubmF2aWdhdG9yKXtVPVUuZG9jdW1lbnQ7fWVsc2V7aWYoIVUubm9kZVR5cGUpe3JldHVybiBwO319fXZhciBGLE8sVj10aGlzLnVuaXF1ZXM9e30sST0hIShIJiZILmxlbmd0aCkseT0oVS5ub2RlVHlwZT09OSk7aWYodGhpcy5kb2N1bWVudCE9PSh5P1U6VS5vd25lckRvY3VtZW50KSl7dGhpcy5zZXREb2N1bWVudChVKTsKfWlmKEkpe2ZvcihPPXAubGVuZ3RoO08tLTspe1ZbdGhpcy5nZXRVSUQocFtPXSldPXRydWU7fX1pZih0eXBlb2Ygej09InN0cmluZyIpe3ZhciByPXoubWF0Y2goZik7c2ltcGxlU2VsZWN0b3JzOmlmKHIpe3ZhciB1PXJbMV0sdj1yWzJdLEEsRTtpZighdSl7aWYodj09IioiJiZ0aGlzLmJyb2tlblN0YXJHRUJUTil7YnJlYWsgc2ltcGxlU2VsZWN0b3JzOwp9RT1VLmdldEVsZW1lbnRzQnlUYWdOYW1lKHYpO2lmKHMpe3JldHVybiBFWzBdfHxudWxsO31mb3IoTz0wO0E9RVtPKytdOyl7aWYoIShJJiZWW3RoaXMuZ2V0VUlEKEEpXSkpe3AucHVzaChBKTt9fX1lbHNle2lmKHU9PSIjIil7aWYoIXRoaXMuaXNIVE1MRG9jdW1lbnR8fCF5KXticmVhayBzaW1wbGVTZWxlY3RvcnM7Cn1BPVUuZ2V0RWxlbWVudEJ5SWQodik7aWYoIUEpe3JldHVybiBwO31pZih0aGlzLmlkR2V0c05hbWUmJkEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS5ub2RlVmFsdWUhPXYpe2JyZWFrIHNpbXBsZVNlbGVjdG9yczt9aWYocyl7cmV0dXJuIEF8fG51bGw7fWlmKCEoSSYmVlt0aGlzLmdldFVJRChBKV0pKXtwLnB1c2goQSk7Cn19ZWxzZXtpZih1PT0iLiIpe2lmKCF0aGlzLmlzSFRNTERvY3VtZW50fHwoKCFVLmdldEVsZW1lbnRzQnlDbGFzc05hbWV8fHRoaXMuYnJva2VuR0VCQ04pJiZVLnF1ZXJ5U2VsZWN0b3JBbGwpKXticmVhayBzaW1wbGVTZWxlY3RvcnM7fWlmKFUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmIXRoaXMuYnJva2VuR0VCQ04pe0U9VS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHYpOwppZihzKXtyZXR1cm4gRVswXXx8bnVsbDt9Zm9yKE89MDtBPUVbTysrXTspe2lmKCEoSSYmVlt0aGlzLmdldFVJRChBKV0pKXtwLnB1c2goQSk7fX19ZWxzZXt2YXIgVD1uZXcgUmVnRXhwKCIoXnxcXHMpIitlLmVzY2FwZVJlZ0V4cCh2KSsiKFxcc3wkKSIpO0U9VS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOwpmb3IoTz0wO0E9RVtPKytdOyl7Y2xhc3NOYW1lPUEuY2xhc3NOYW1lO2lmKCEoY2xhc3NOYW1lJiZULnRlc3QoY2xhc3NOYW1lKSkpe2NvbnRpbnVlO31pZihzKXtyZXR1cm4gQTt9aWYoIShJJiZWW3RoaXMuZ2V0VUlEKEEpXSkpe3AucHVzaChBKTt9fX19fX1pZihJKXt0aGlzLnNvcnQocCk7Cn1yZXR1cm4ocyk/bnVsbDpwO31xdWVyeVNlbGVjdG9yOmlmKFUucXVlcnlTZWxlY3RvckFsbCl7aWYoIXRoaXMuaXNIVE1MRG9jdW1lbnR8fGdbel18fHRoaXMuYnJva2VuTWl4ZWRDYXNlUVNBfHwodGhpcy5icm9rZW5DaGVja2VkUVNBJiZ6LmluZGV4T2YoIjpjaGVja2VkIik+LTEpfHwodGhpcy5icm9rZW5FbXB0eUF0dHJpYnV0ZVFTQSYmaC50ZXN0KHopKXx8KCF5JiZ6LmluZGV4T2YoIiwiKT4tMSl8fGUuZGlzYWJsZVFTQSl7YnJlYWsgcXVlcnlTZWxlY3RvcjsKfXZhciBTPXoseD1VO2lmKCF5KXt2YXIgQz14LmdldEF0dHJpYnV0ZSgiaWQiKSx0PSJzbGlja2lkX18iO3guc2V0QXR0cmlidXRlKCJpZCIsdCk7Uz0iIyIrdCsiICIrUztVPXgucGFyZW50Tm9kZTt9dHJ5e2lmKHMpe3JldHVybiBVLnF1ZXJ5U2VsZWN0b3IoUyl8fG51bGw7Cn1lbHNle0U9VS5xdWVyeVNlbGVjdG9yQWxsKFMpO319Y2F0Y2goUSl7Z1t6XT0xO2JyZWFrIHF1ZXJ5U2VsZWN0b3I7fWZpbmFsbHl7aWYoIXkpe2lmKEMpe3guc2V0QXR0cmlidXRlKCJpZCIsQyk7fWVsc2V7eC5yZW1vdmVBdHRyaWJ1dGUoImlkIik7fVU9eDt9fWlmKHRoaXMuc3RhclNlbGVjdHNDbG9zZWRRU0Epe2ZvcihPPTA7CkE9RVtPKytdOyl7aWYoQS5ub2RlTmFtZT4iQCImJiEoSSYmVlt0aGlzLmdldFVJRChBKV0pKXtwLnB1c2goQSk7fX19ZWxzZXtmb3IoTz0wO0E9RVtPKytdOyl7aWYoIShJJiZWW3RoaXMuZ2V0VUlEKEEpXSkpe3AucHVzaChBKTt9fX1pZihJKXt0aGlzLnNvcnQocCk7Cn1yZXR1cm4gcDt9Rj10aGlzLlNsaWNrLnBhcnNlKHopO2lmKCFGLmxlbmd0aCl7cmV0dXJuIHA7fX1lbHNle2lmKHo9PW51bGwpe3JldHVybiBwO31lbHNle2lmKHouU2xpY2spe0Y9ejt9ZWxzZXtpZih0aGlzLmNvbnRhaW5zKFUuZG9jdW1lbnRFbGVtZW50fHxVLHopKXsocCk/cC5wdXNoKHopOnA9ejsKcmV0dXJuIHA7fWVsc2V7cmV0dXJuIHA7fX19fXRoaXMucG9zTlRIPXt9O3RoaXMucG9zTlRITGFzdD17fTt0aGlzLnBvc05USFR5cGU9e307dGhpcy5wb3NOVEhUeXBlTGFzdD17fTt0aGlzLnB1c2g9KCFJJiYoc3x8KEYubGVuZ3RoPT0xJiZGLmV4cHJlc3Npb25zWzBdLmxlbmd0aD09MSkpKT90aGlzLnB1c2hBcnJheTp0aGlzLnB1c2hVSUQ7CmlmKHA9PW51bGwpe3A9W107fXZhciBNLEwsSzt2YXIgQixKLEQsYyxxLEcsVzt2YXIgTixQLG8sdyxSPUYuZXhwcmVzc2lvbnM7c2VhcmNoOmZvcihPPTA7KFA9UltPXSk7TysrKXtmb3IoTT0wOyhvPVBbTV0pO00rKyl7Qj0iY29tYmluYXRvcjoiK28uY29tYmluYXRvcjsKaWYoIXRoaXNbQl0pe2NvbnRpbnVlIHNlYXJjaDt9Sj0odGhpcy5pc1hNTERvY3VtZW50KT9vLnRhZzpvLnRhZy50b1VwcGVyQ2FzZSgpO0Q9by5pZDtjPW8uY2xhc3NMaXN0O3E9by5jbGFzc2VzO0c9by5hdHRyaWJ1dGVzO1c9by5wc2V1ZG9zO3c9KE09PT0oUC5sZW5ndGgtMSkpOwp0aGlzLmJpdFVuaXF1ZXM9e307aWYodyl7dGhpcy51bmlxdWVzPVY7dGhpcy5mb3VuZD1wO31lbHNle3RoaXMudW5pcXVlcz17fTt0aGlzLmZvdW5kPVtdO31pZihNPT09MCl7dGhpc1tCXShVLEosRCxxLEcsVyxjKTtpZihzJiZ3JiZwLmxlbmd0aCl7YnJlYWsgc2VhcmNoOwp9fWVsc2V7aWYocyYmdyl7Zm9yKEw9MCxLPU4ubGVuZ3RoO0w8SztMKyspe3RoaXNbQl0oTltMXSxKLEQscSxHLFcsYyk7aWYocC5sZW5ndGgpe2JyZWFrIHNlYXJjaDt9fX1lbHNle2ZvcihMPTAsSz1OLmxlbmd0aDtMPEs7TCsrKXt0aGlzW0JdKE5bTF0sSixELHEsRyxXLGMpOwp9fX1OPXRoaXMuZm91bmQ7fX1pZihJfHwoRi5leHByZXNzaW9ucy5sZW5ndGg+MSkpe3RoaXMuc29ydChwKTt9cmV0dXJuKHMpPyhwWzBdfHxudWxsKTpwO307ay51aWR4PTE7ay51aWRrPSJzbGljay11bmlxdWVpZCI7ay5nZXRVSURYTUw9ZnVuY3Rpb24obil7dmFyIGM9bi5nZXRBdHRyaWJ1dGUodGhpcy51aWRrKTsKaWYoIWMpe2M9dGhpcy51aWR4Kys7bi5zZXRBdHRyaWJ1dGUodGhpcy51aWRrLGMpO31yZXR1cm4gYzt9O2suZ2V0VUlESFRNTD1mdW5jdGlvbihjKXtyZXR1cm4gYy51bmlxdWVOdW1iZXJ8fChjLnVuaXF1ZU51bWJlcj10aGlzLnVpZHgrKyk7fTtrLnNvcnQ9ZnVuY3Rpb24oYyl7aWYoIXRoaXMuZG9jdW1lbnRTb3J0ZXIpe3JldHVybiBjOwp9Yy5zb3J0KHRoaXMuZG9jdW1lbnRTb3J0ZXIpO3JldHVybiBjO307ay5jYWNoZU5USD17fTtrLm1hdGNoTlRIPS9eKFsrLV0/XGQqKT8oW2Etel0rKT8oWystXVxkKyk/JC87ay5wYXJzZU5USEFyZ3VtZW50PWZ1bmN0aW9uKHEpe3ZhciBvPXEubWF0Y2godGhpcy5tYXRjaE5USCk7CmlmKCFvKXtyZXR1cm4gZmFsc2U7fXZhciBwPW9bMl18fGZhbHNlO3ZhciBuPW9bMV18fDE7aWYobj09Ii0iKXtuPS0xO312YXIgYz0rb1szXXx8MDtvPShwPT0ibiIpP3thOm4sYjpjfToocD09Im9kZCIpP3thOjIsYjoxfToocD09ImV2ZW4iKT97YToyLGI6MH06e2E6MCxiOm59OwpyZXR1cm4odGhpcy5jYWNoZU5USFtxXT1vKTt9O2suY3JlYXRlTlRIUHNldWRvPWZ1bmN0aW9uKHAsbixjLG8pe3JldHVybiBmdW5jdGlvbihzLHEpe3ZhciB1PXRoaXMuZ2V0VUlEKHMpO2lmKCF0aGlzW2NdW3VdKXt2YXIgQT1zLnBhcmVudE5vZGU7aWYoIUEpe3JldHVybiBmYWxzZTsKfXZhciByPUFbcF0sdD0xO2lmKG8pe3ZhciB6PXMubm9kZU5hbWU7ZG97aWYoci5ub2RlTmFtZSE9eil7Y29udGludWU7fXRoaXNbY11bdGhpcy5nZXRVSUQocildPXQrKzt9d2hpbGUoKHI9cltuXSkpO31lbHNle2Rve2lmKHIubm9kZVR5cGUhPTEpe2NvbnRpbnVlOwp9dGhpc1tjXVt0aGlzLmdldFVJRChyKV09dCsrO313aGlsZSgocj1yW25dKSk7fX1xPXF8fCJuIjt2YXIgdj10aGlzLmNhY2hlTlRIW3FdfHx0aGlzLnBhcnNlTlRIQXJndW1lbnQocSk7aWYoIXYpe3JldHVybiBmYWxzZTt9dmFyIHk9di5hLHg9di5iLHc9dGhpc1tjXVt1XTsKaWYoeT09MCl7cmV0dXJuIHg9PXc7fWlmKHk+MCl7aWYodzx4KXtyZXR1cm4gZmFsc2U7fX1lbHNle2lmKHg8dyl7cmV0dXJuIGZhbHNlO319cmV0dXJuKCh3LXgpJXkpPT0wO307fTtrLnB1c2hBcnJheT1mdW5jdGlvbihwLGMscixvLG4scSl7aWYodGhpcy5tYXRjaFNlbGVjdG9yKHAsYyxyLG8sbixxKSl7dGhpcy5mb3VuZC5wdXNoKHApOwp9fTtrLnB1c2hVSUQ9ZnVuY3Rpb24ocSxjLHMscCxuLHIpe3ZhciBvPXRoaXMuZ2V0VUlEKHEpO2lmKCF0aGlzLnVuaXF1ZXNbb10mJnRoaXMubWF0Y2hTZWxlY3RvcihxLGMscyxwLG4scikpe3RoaXMudW5pcXVlc1tvXT10cnVlO3RoaXMuZm91bmQucHVzaChxKTt9fTsKay5tYXRjaE5vZGU9ZnVuY3Rpb24obixvKXtpZih0aGlzLmlzSFRNTERvY3VtZW50JiZ0aGlzLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcil7dHJ5e3JldHVybiB0aGlzLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvci5jYWxsKG4sby5yZXBsYWNlKC9cWyhbXj1dKyk9XHMqKFteJyJcXV0rPylccypcXS9nLCdbJDE9IiQyIl0nKSk7Cn1jYXRjaCh1KXt9fXZhciB0PXRoaXMuU2xpY2sucGFyc2Uobyk7aWYoIXQpe3JldHVybiB0cnVlO312YXIgcj10LmV4cHJlc3Npb25zLHM9MCxxO2ZvcihxPTA7KGN1cnJlbnRFeHByZXNzaW9uPXJbcV0pO3ErKyl7aWYoY3VycmVudEV4cHJlc3Npb24ubGVuZ3RoPT0xKXt2YXIgcD1jdXJyZW50RXhwcmVzc2lvblswXTsKaWYodGhpcy5tYXRjaFNlbGVjdG9yKG4sKHRoaXMuaXNYTUxEb2N1bWVudCk/cC50YWc6cC50YWcudG9VcHBlckNhc2UoKSxwLmlkLHAuY2xhc3NlcyxwLmF0dHJpYnV0ZXMscC5wc2V1ZG9zKSl7cmV0dXJuIHRydWU7fXMrKzt9fWlmKHM9PXQubGVuZ3RoKXtyZXR1cm4gZmFsc2U7Cn12YXIgYz10aGlzLnNlYXJjaCh0aGlzLmRvY3VtZW50LHQpLHY7Zm9yKHE9MDt2PWNbcSsrXTspe2lmKHY9PT1uKXtyZXR1cm4gdHJ1ZTt9fXJldHVybiBmYWxzZTt9O2subWF0Y2hQc2V1ZG89ZnVuY3Rpb24ocSxjLHApe3ZhciBuPSJwc2V1ZG86IitjO2lmKHRoaXNbbl0pe3JldHVybiB0aGlzW25dKHEscCk7Cn12YXIgbz10aGlzLmdldEF0dHJpYnV0ZShxLGMpO3JldHVybihwKT9wPT1vOiEhbzt9O2subWF0Y2hTZWxlY3Rvcj1mdW5jdGlvbihvLHYsYyxwLHEscyl7aWYodil7dmFyIHQ9KHRoaXMuaXNYTUxEb2N1bWVudCk/by5ub2RlTmFtZTpvLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7CmlmKHY9PSIqIil7aWYodDwiQCIpe3JldHVybiBmYWxzZTt9fWVsc2V7aWYodCE9dil7cmV0dXJuIGZhbHNlO319fWlmKGMmJm8uZ2V0QXR0cmlidXRlKCJpZCIpIT1jKXtyZXR1cm4gZmFsc2U7fXZhciByLG4sdTtpZihwKXtmb3Iocj1wLmxlbmd0aDtyLS07KXt1PXRoaXMuZ2V0QXR0cmlidXRlKG8sImNsYXNzIik7CmlmKCEodSYmcFtyXS5yZWdleHAudGVzdCh1KSkpe3JldHVybiBmYWxzZTt9fX1pZihxKXtmb3Iocj1xLmxlbmd0aDtyLS07KXtuPXFbcl07aWYobi5vcGVyYXRvcj8hbi50ZXN0KHRoaXMuZ2V0QXR0cmlidXRlKG8sbi5rZXkpKTohdGhpcy5oYXNBdHRyaWJ1dGUobyxuLmtleSkpe3JldHVybiBmYWxzZTsKfX19aWYocyl7Zm9yKHI9cy5sZW5ndGg7ci0tOyl7bj1zW3JdO2lmKCF0aGlzLm1hdGNoUHNldWRvKG8sbi5rZXksbi52YWx1ZSkpe3JldHVybiBmYWxzZTt9fX1yZXR1cm4gdHJ1ZTt9O3ZhciBqPXsiICI6ZnVuY3Rpb24ocSx3LG4scixzLHUscCl7dmFyIHQsdixvOwppZih0aGlzLmlzSFRNTERvY3VtZW50KXtnZXRCeUlkOmlmKG4pe3Y9dGhpcy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChuKTtpZigoIXYmJnEuYWxsKXx8KHRoaXMuaWRHZXRzTmFtZSYmdiYmdi5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpLm5vZGVWYWx1ZSE9bikpe289cS5hbGxbbl07CmlmKCFvKXtyZXR1cm47fWlmKCFvWzBdKXtvPVtvXTt9Zm9yKHQ9MDt2PW9bdCsrXTspe3ZhciBjPXYuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtpZihjJiZjLm5vZGVWYWx1ZT09bil7dGhpcy5wdXNoKHYsdyxudWxsLHIscyx1KTticmVhazt9fXJldHVybjt9aWYoIXYpe2lmKHRoaXMuY29udGFpbnModGhpcy5yb290LHEpKXtyZXR1cm47Cn1lbHNle2JyZWFrIGdldEJ5SWQ7fX1lbHNle2lmKHRoaXMuZG9jdW1lbnQhPT1xJiYhdGhpcy5jb250YWlucyhxLHYpKXtyZXR1cm47fX10aGlzLnB1c2godix3LG51bGwscixzLHUpO3JldHVybjt9Z2V0QnlDbGFzczppZihyJiZxLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJiF0aGlzLmJyb2tlbkdFQkNOKXtvPXEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShwLmpvaW4oIiAiKSk7CmlmKCEobyYmby5sZW5ndGgpKXticmVhayBnZXRCeUNsYXNzO31mb3IodD0wO3Y9b1t0KytdOyl7dGhpcy5wdXNoKHYsdyxuLG51bGwscyx1KTt9cmV0dXJuO319Z2V0QnlUYWc6e289cS5nZXRFbGVtZW50c0J5VGFnTmFtZSh3KTtpZighKG8mJm8ubGVuZ3RoKSl7YnJlYWsgZ2V0QnlUYWc7Cn1pZighdGhpcy5icm9rZW5TdGFyR0VCVE4pe3c9bnVsbDt9Zm9yKHQ9MDt2PW9bdCsrXTspe3RoaXMucHVzaCh2LHcsbixyLHMsdSk7fX19LCI+IjpmdW5jdGlvbihwLGMscixvLG4scSl7aWYoKHA9cC5maXJzdENoaWxkKSl7ZG97aWYocC5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKHAsYyxyLG8sbixxKTsKfX13aGlsZSgocD1wLm5leHRTaWJsaW5nKSk7fX0sIisiOmZ1bmN0aW9uKHAsYyxyLG8sbixxKXt3aGlsZSgocD1wLm5leHRTaWJsaW5nKSl7aWYocC5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKHAsYyxyLG8sbixxKTticmVhazt9fX0sIl4iOmZ1bmN0aW9uKHAsYyxyLG8sbixxKXtwPXAuZmlyc3RDaGlsZDsKaWYocCl7aWYocC5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKHAsYyxyLG8sbixxKTt9ZWxzZXt0aGlzWyJjb21iaW5hdG9yOisiXShwLGMscixvLG4scSk7fX19LCJ+IjpmdW5jdGlvbihxLGMscyxwLG4scil7d2hpbGUoKHE9cS5uZXh0U2libGluZykpe2lmKHEubm9kZVR5cGUhPTEpe2NvbnRpbnVlOwp9dmFyIG89dGhpcy5nZXRVSUQocSk7aWYodGhpcy5iaXRVbmlxdWVzW29dKXticmVhazt9dGhpcy5iaXRVbmlxdWVzW29dPXRydWU7dGhpcy5wdXNoKHEsYyxzLHAsbixyKTt9fSwiKysiOmZ1bmN0aW9uKHAsYyxyLG8sbixxKXt0aGlzWyJjb21iaW5hdG9yOisiXShwLGMscixvLG4scSk7CnRoaXNbImNvbWJpbmF0b3I6ISsiXShwLGMscixvLG4scSk7fSwifn4iOmZ1bmN0aW9uKHAsYyxyLG8sbixxKXt0aGlzWyJjb21iaW5hdG9yOn4iXShwLGMscixvLG4scSk7dGhpc1siY29tYmluYXRvcjohfiJdKHAsYyxyLG8sbixxKTt9LCIhIjpmdW5jdGlvbihwLGMscixvLG4scSl7d2hpbGUoKHA9cC5wYXJlbnROb2RlKSl7aWYocCE9PXRoaXMuZG9jdW1lbnQpe3RoaXMucHVzaChwLGMscixvLG4scSk7Cn19fSwiIT4iOmZ1bmN0aW9uKHAsYyxyLG8sbixxKXtwPXAucGFyZW50Tm9kZTtpZihwIT09dGhpcy5kb2N1bWVudCl7dGhpcy5wdXNoKHAsYyxyLG8sbixxKTt9fSwiISsiOmZ1bmN0aW9uKHAsYyxyLG8sbixxKXt3aGlsZSgocD1wLnByZXZpb3VzU2libGluZykpe2lmKHAubm9kZVR5cGU9PTEpe3RoaXMucHVzaChwLGMscixvLG4scSk7CmJyZWFrO319fSwiIV4iOmZ1bmN0aW9uKHAsYyxyLG8sbixxKXtwPXAubGFzdENoaWxkO2lmKHApe2lmKHAubm9kZVR5cGU9PTEpe3RoaXMucHVzaChwLGMscixvLG4scSk7fWVsc2V7dGhpc1siY29tYmluYXRvcjohKyJdKHAsYyxyLG8sbixxKTt9fX0sIiF+IjpmdW5jdGlvbihxLGMscyxwLG4scil7d2hpbGUoKHE9cS5wcmV2aW91c1NpYmxpbmcpKXtpZihxLm5vZGVUeXBlIT0xKXtjb250aW51ZTsKfXZhciBvPXRoaXMuZ2V0VUlEKHEpO2lmKHRoaXMuYml0VW5pcXVlc1tvXSl7YnJlYWs7fXRoaXMuYml0VW5pcXVlc1tvXT10cnVlO3RoaXMucHVzaChxLGMscyxwLG4scik7fX19O2Zvcih2YXIgaSBpbiBqKXtrWyJjb21iaW5hdG9yOiIraV09altpXTt9dmFyIGw9e2VtcHR5OmZ1bmN0aW9uKGMpe3ZhciBuPWMuZmlyc3RDaGlsZDsKcmV0dXJuICEobiYmbi5ub2RlVHlwZT09MSkmJiEoYy5pbm5lclRleHR8fGMudGV4dENvbnRlbnR8fCIiKS5sZW5ndGg7fSxub3Q6ZnVuY3Rpb24oYyxuKXtyZXR1cm4gIXRoaXMubWF0Y2hOb2RlKGMsbik7fSxjb250YWluczpmdW5jdGlvbihjLG4pe3JldHVybihjLmlubmVyVGV4dHx8Yy50ZXh0Q29udGVudHx8IiIpLmluZGV4T2Yobik+LTE7Cn0sImZpcnN0LWNoaWxkIjpmdW5jdGlvbihjKXt3aGlsZSgoYz1jLnByZXZpb3VzU2libGluZykpe2lmKGMubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO30sImxhc3QtY2hpbGQiOmZ1bmN0aW9uKGMpe3doaWxlKChjPWMubmV4dFNpYmxpbmcpKXtpZihjLm5vZGVUeXBlPT0xKXtyZXR1cm4gZmFsc2U7Cn19cmV0dXJuIHRydWU7fSwib25seS1jaGlsZCI6ZnVuY3Rpb24obyl7dmFyIG49bzt3aGlsZSgobj1uLnByZXZpb3VzU2libGluZykpe2lmKG4ubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTt9fXZhciBjPW87d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LCJudGgtY2hpbGQiOmsuY3JlYXRlTlRIUHNldWRvKCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJwb3NOVEgiKSwibnRoLWxhc3QtY2hpbGQiOmsuY3JlYXRlTlRIUHNldWRvKCJsYXN0Q2hpbGQiLCJwcmV2aW91c1NpYmxpbmciLCJwb3NOVEhMYXN0IiksIm50aC1vZi10eXBlIjprLmNyZWF0ZU5USFBzZXVkbygiZmlyc3RDaGlsZCIsIm5leHRTaWJsaW5nIiwicG9zTlRIVHlwZSIsdHJ1ZSksIm50aC1sYXN0LW9mLXR5cGUiOmsuY3JlYXRlTlRIUHNldWRvKCJsYXN0Q2hpbGQiLCJwcmV2aW91c1NpYmxpbmciLCJwb3NOVEhUeXBlTGFzdCIsdHJ1ZSksaW5kZXg6ZnVuY3Rpb24obixjKXtyZXR1cm4gdGhpc1sicHNldWRvOm50aC1jaGlsZCJdKG4sIiIrKGMrMSkpOwp9LGV2ZW46ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXNbInBzZXVkbzpudGgtY2hpbGQiXShjLCIybiIpO30sb2RkOmZ1bmN0aW9uKGMpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0oYywiMm4rMSIpO30sImZpcnN0LW9mLXR5cGUiOmZ1bmN0aW9uKGMpe3ZhciBuPWMubm9kZU5hbWU7CndoaWxlKChjPWMucHJldmlvdXNTaWJsaW5nKSl7aWYoYy5ub2RlTmFtZT09bil7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fSwibGFzdC1vZi10eXBlIjpmdW5jdGlvbihjKXt2YXIgbj1jLm5vZGVOYW1lO3doaWxlKChjPWMubmV4dFNpYmxpbmcpKXtpZihjLm5vZGVOYW1lPT1uKXtyZXR1cm4gZmFsc2U7Cn19cmV0dXJuIHRydWU7fSwib25seS1vZi10eXBlIjpmdW5jdGlvbihvKXt2YXIgbj1vLHA9by5ub2RlTmFtZTt3aGlsZSgobj1uLnByZXZpb3VzU2libGluZykpe2lmKG4ubm9kZU5hbWU9PXApe3JldHVybiBmYWxzZTt9fXZhciBjPW87d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZU5hbWU9PXApe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LGVuYWJsZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuICFjLmRpc2FibGVkO30sZGlzYWJsZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuIGMuZGlzYWJsZWQ7fSxjaGVja2VkOmZ1bmN0aW9uKGMpe3JldHVybiBjLmNoZWNrZWR8fGMuc2VsZWN0ZWQ7fSxmb2N1czpmdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5pc0hUTUxEb2N1bWVudCYmdGhpcy5kb2N1bWVudC5hY3RpdmVFbGVtZW50PT09YyYmKGMuaHJlZnx8Yy50eXBlfHx0aGlzLmhhc0F0dHJpYnV0ZShjLCJ0YWJpbmRleCIpKTsKfSxyb290OmZ1bmN0aW9uKGMpe3JldHVybihjPT09dGhpcy5yb290KTt9LHNlbGVjdGVkOmZ1bmN0aW9uKGMpe3JldHVybiBjLnNlbGVjdGVkO319O2Zvcih2YXIgYiBpbiBsKXtrWyJwc2V1ZG86IitiXT1sW2JdO312YXIgYT1rLmF0dHJpYnV0ZUdldHRlcnM9eyJmb3IiOmZ1bmN0aW9uKCl7cmV0dXJuKCJodG1sRm9yIiBpbiB0aGlzKT90aGlzLmh0bWxGb3I6dGhpcy5nZXRBdHRyaWJ1dGUoImZvciIpOwp9LGhyZWY6ZnVuY3Rpb24oKXtyZXR1cm4oImhyZWYiIGluIHRoaXMpP3RoaXMuZ2V0QXR0cmlidXRlKCJocmVmIiwyKTp0aGlzLmdldEF0dHJpYnV0ZSgiaHJlZiIpO30sc3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5zdHlsZSk/dGhpcy5zdHlsZS5jc3NUZXh0OnRoaXMuZ2V0QXR0cmlidXRlKCJzdHlsZSIpOwp9LHRhYmluZGV4OmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRBdHRyaWJ1dGVOb2RlKCJ0YWJpbmRleCIpO3JldHVybihjJiZjLnNwZWNpZmllZCk/Yy5ub2RlVmFsdWU6bnVsbDt9LHR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInR5cGUiKTsKfSxtYXhsZW5ndGg6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldEF0dHJpYnV0ZU5vZGUoIm1heExlbmd0aCIpO3JldHVybihjJiZjLnNwZWNpZmllZCk/Yy5ub2RlVmFsdWU6bnVsbDt9fTthLk1BWExFTkdUSD1hLm1heExlbmd0aD1hLm1heGxlbmd0aDt2YXIgZT1rLlNsaWNrPSh0aGlzLlNsaWNrfHx7fSk7CmUudmVyc2lvbj0iMS4xLjciO2Uuc2VhcmNoPWZ1bmN0aW9uKG4sbyxjKXtyZXR1cm4gay5zZWFyY2gobixvLGMpO307ZS5maW5kPWZ1bmN0aW9uKGMsbil7cmV0dXJuIGsuc2VhcmNoKGMsbixudWxsLHRydWUpO307ZS5jb250YWlucz1mdW5jdGlvbihjLG4pe2suc2V0RG9jdW1lbnQoYyk7CnJldHVybiBrLmNvbnRhaW5zKGMsbik7fTtlLmdldEF0dHJpYnV0ZT1mdW5jdGlvbihuLGMpe2suc2V0RG9jdW1lbnQobik7cmV0dXJuIGsuZ2V0QXR0cmlidXRlKG4sYyk7fTtlLmhhc0F0dHJpYnV0ZT1mdW5jdGlvbihuLGMpe2suc2V0RG9jdW1lbnQobik7cmV0dXJuIGsuaGFzQXR0cmlidXRlKG4sYyk7Cn07ZS5tYXRjaD1mdW5jdGlvbihuLGMpe2lmKCEobiYmYykpe3JldHVybiBmYWxzZTt9aWYoIWN8fGM9PT1uKXtyZXR1cm4gdHJ1ZTt9ay5zZXREb2N1bWVudChuKTtyZXR1cm4gay5tYXRjaE5vZGUobixjKTt9O2UuZGVmaW5lQXR0cmlidXRlR2V0dGVyPWZ1bmN0aW9uKGMsbil7ay5hdHRyaWJ1dGVHZXR0ZXJzW2NdPW47CnJldHVybiB0aGlzO307ZS5sb29rdXBBdHRyaWJ1dGVHZXR0ZXI9ZnVuY3Rpb24oYyl7cmV0dXJuIGsuYXR0cmlidXRlR2V0dGVyc1tjXTt9O2UuZGVmaW5lUHNldWRvPWZ1bmN0aW9uKGMsbil7a1sicHNldWRvOiIrY109ZnVuY3Rpb24ocCxvKXtyZXR1cm4gbi5jYWxsKHAsbyk7Cn07cmV0dXJuIHRoaXM7fTtlLmxvb2t1cFBzZXVkbz1mdW5jdGlvbihjKXt2YXIgbj1rWyJwc2V1ZG86IitjXTtpZihuKXtyZXR1cm4gZnVuY3Rpb24obyl7cmV0dXJuIG4uY2FsbCh0aGlzLG8pO307fXJldHVybiBudWxsO307ZS5vdmVycmlkZT1mdW5jdGlvbihuLGMpe2sub3ZlcnJpZGUobixjKTsKcmV0dXJuIHRoaXM7fTtlLmlzWE1MPWsuaXNYTUw7ZS51aWRPZj1mdW5jdGlvbihjKXtyZXR1cm4gay5nZXRVSURIVE1MKGMpO307aWYoIXRoaXMuU2xpY2spe3RoaXMuU2xpY2s9ZTt9fSkuYXBwbHkoKHR5cGVvZiBleHBvcnRzIT0idW5kZWZpbmVkIik/ZXhwb3J0czp0aGlzKTsKdmFyIEVsZW1lbnQ9ZnVuY3Rpb24oYixnKXt2YXIgaD1FbGVtZW50LkNvbnN0cnVjdG9yc1tiXTtpZihoKXtyZXR1cm4gaChnKTt9aWYodHlwZW9mIGIhPSJzdHJpbmciKXtyZXR1cm4gZG9jdW1lbnQuaWQoYikuc2V0KGcpO31pZighZyl7Zz17fTt9aWYoISgvXltcdy1dKyQvKS50ZXN0KGIpKXt2YXIgZT1TbGljay5wYXJzZShiKS5leHByZXNzaW9uc1swXVswXTsKYj0oZS50YWc9PSIqIik/ImRpdiI6ZS50YWc7aWYoZS5pZCYmZy5pZD09bnVsbCl7Zy5pZD1lLmlkO312YXIgZD1lLmF0dHJpYnV0ZXM7aWYoZCl7Zm9yKHZhciBhLGY9MCxjPWQubGVuZ3RoO2Y8YztmKyspe2E9ZFtmXTtpZihnW2Eua2V5XSE9bnVsbCl7Y29udGludWU7Cn1pZihhLnZhbHVlIT1udWxsJiZhLm9wZXJhdG9yPT0iPSIpe2dbYS5rZXldPWEudmFsdWU7fWVsc2V7aWYoIWEudmFsdWUmJiFhLm9wZXJhdG9yKXtnW2Eua2V5XT10cnVlO319fX1pZihlLmNsYXNzTGlzdCYmZ1siY2xhc3MiXT09bnVsbCl7Z1siY2xhc3MiXT1lLmNsYXNzTGlzdC5qb2luKCIgIik7Cn19cmV0dXJuIGRvY3VtZW50Lm5ld0VsZW1lbnQoYixnKTt9O2lmKEJyb3dzZXIuRWxlbWVudCl7RWxlbWVudC5wcm90b3R5cGU9QnJvd3Nlci5FbGVtZW50LnByb3RvdHlwZTtFbGVtZW50LnByb3RvdHlwZS5fZmlyZUV2ZW50PShmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKHRoaXMsYixjKTsKfTt9KShFbGVtZW50LnByb3RvdHlwZS5maXJlRXZlbnQpO31uZXcgVHlwZSgiRWxlbWVudCIsRWxlbWVudCkubWlycm9yKGZ1bmN0aW9uKGEpe2lmKEFycmF5LnByb3RvdHlwZVthXSl7cmV0dXJuO312YXIgYj17fTtiW2FdPWZ1bmN0aW9uKCl7dmFyIGg9W10sZT1hcmd1bWVudHMsaj10cnVlOwpmb3IodmFyIGc9MCxkPXRoaXMubGVuZ3RoO2c8ZDtnKyspe3ZhciBmPXRoaXNbZ10sYz1oW2ddPWZbYV0uYXBwbHkoZixlKTtqPShqJiZ0eXBlT2YoYyk9PSJlbGVtZW50Iik7fXJldHVybihqKT9uZXcgRWxlbWVudHMoaCk6aDt9O0VsZW1lbnRzLmltcGxlbWVudChiKTsKfSk7aWYoIUJyb3dzZXIuRWxlbWVudCl7RWxlbWVudC5wYXJlbnQ9T2JqZWN0O0VsZW1lbnQuUHJvdG90eXBlPXsiJGNvbnN0cnVjdG9yIjpFbGVtZW50LCIkZmFtaWx5IjpGdW5jdGlvbi5mcm9tKCJlbGVtZW50IikuaGlkZSgpfTtFbGVtZW50Lm1pcnJvcihmdW5jdGlvbihhLGIpe0VsZW1lbnQuUHJvdG90eXBlW2FdPWI7Cn0pO31FbGVtZW50LkNvbnN0cnVjdG9ycz17fTtFbGVtZW50LkNvbnN0cnVjdG9ycz1uZXcgSGFzaDt2YXIgSUZyYW1lPW5ldyBUeXBlKCJJRnJhbWUiLGZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkubGluayhhcmd1bWVudHMse3Byb3BlcnRpZXM6VHlwZS5pc09iamVjdCxpZnJhbWU6ZnVuY3Rpb24oZil7cmV0dXJuKGYhPW51bGwpOwp9fSk7dmFyIGM9ZS5wcm9wZXJ0aWVzfHx7fSxiO2lmKGUuaWZyYW1lKXtiPWRvY3VtZW50LmlkKGUuaWZyYW1lKTt9dmFyIGQ9Yy5vbmxvYWR8fGZ1bmN0aW9uKCl7fTtkZWxldGUgYy5vbmxvYWQ7Yy5pZD1jLm5hbWU9W2MuaWQsYy5uYW1lLGI/KGIuaWR8fGIubmFtZSk6IklGcmFtZV8iK1N0cmluZy51bmlxdWVJRCgpXS5waWNrKCk7CmI9bmV3IEVsZW1lbnQoYnx8ImlmcmFtZSIsYyk7dmFyIGE9ZnVuY3Rpb24oKXtkLmNhbGwoYi5jb250ZW50V2luZG93KTt9O2lmKHdpbmRvdy5mcmFtZXNbYy5pZF0pe2EoKTt9ZWxzZXtiLmFkZExpc3RlbmVyKCJsb2FkIixhKTt9cmV0dXJuIGI7fSk7dmFyIEVsZW1lbnRzPXRoaXMuRWxlbWVudHM9ZnVuY3Rpb24oYSl7aWYoYSYmYS5sZW5ndGgpe3ZhciBlPXt9LGQ7CmZvcih2YXIgYz0wO2Q9YVtjKytdOyl7dmFyIGI9U2xpY2sudWlkT2YoZCk7aWYoIWVbYl0pe2VbYl09dHJ1ZTt0aGlzLnB1c2goZCk7fX19fTtFbGVtZW50cy5wcm90b3R5cGU9e2xlbmd0aDowfTtFbGVtZW50cy5wYXJlbnQ9QXJyYXk7bmV3IFR5cGUoIkVsZW1lbnRzIixFbGVtZW50cykuaW1wbGVtZW50KHtmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtpZighYSl7cmV0dXJuIHRoaXM7Cn1yZXR1cm4gbmV3IEVsZW1lbnRzKEFycmF5LmZpbHRlcih0aGlzLCh0eXBlT2YoYSk9PSJzdHJpbmciKT9mdW5jdGlvbihjKXtyZXR1cm4gYy5tYXRjaChhKTt9OmEsYikpO30ucHJvdGVjdCgpLHB1c2g6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmxlbmd0aDtmb3IodmFyIGI9MCxhPWFyZ3VtZW50cy5sZW5ndGg7CmI8YTtiKyspe3ZhciBjPWRvY3VtZW50LmlkKGFyZ3VtZW50c1tiXSk7aWYoYyl7dGhpc1tkKytdPWM7fX1yZXR1cm4odGhpcy5sZW5ndGg9ZCk7fS5wcm90ZWN0KCksdW5zaGlmdDpmdW5jdGlvbigpe3ZhciBiPVtdO2Zvcih2YXIgYz0wLGE9YXJndW1lbnRzLmxlbmd0aDsKYzxhO2MrKyl7dmFyIGQ9ZG9jdW1lbnQuaWQoYXJndW1lbnRzW2NdKTtpZihkKXtiLnB1c2goZCk7fX1yZXR1cm4gQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkodGhpcyxiKTt9LnByb3RlY3QoKSxjb25jYXQ6ZnVuY3Rpb24oKXt2YXIgYj1uZXcgRWxlbWVudHModGhpcyk7CmZvcih2YXIgYz0wLGE9YXJndW1lbnRzLmxlbmd0aDtjPGE7YysrKXt2YXIgZD1hcmd1bWVudHNbY107aWYoVHlwZS5pc0VudW1lcmFibGUoZCkpe2IuYXBwZW5kKGQpO31lbHNle2IucHVzaChkKTt9fXJldHVybiBiO30ucHJvdGVjdCgpLGFwcGVuZDpmdW5jdGlvbihjKXtmb3IodmFyIGI9MCxhPWMubGVuZ3RoOwpiPGE7YisrKXt0aGlzLnB1c2goY1tiXSk7fXJldHVybiB0aGlzO30ucHJvdGVjdCgpLGVtcHR5OmZ1bmN0aW9uKCl7d2hpbGUodGhpcy5sZW5ndGgpe2RlbGV0ZSB0aGlzWy0tdGhpcy5sZW5ndGhdO31yZXR1cm4gdGhpczt9LnByb3RlY3QoKX0pO0VsZW1lbnRzLmFsaWFzKCJleHRlbmQiLCJhcHBlbmQiKTsKKGZ1bmN0aW9uKCl7dmFyIGY9QXJyYXkucHJvdG90eXBlLnNwbGljZSxhPXsiMCI6MCwiMSI6MSxsZW5ndGg6Mn07Zi5jYWxsKGEsMSwxKTtpZihhWzFdPT0xKXtFbGVtZW50cy5pbXBsZW1lbnQoInNwbGljZSIsZnVuY3Rpb24oKXt2YXIgZz10aGlzLmxlbmd0aDt2YXIgZT1mLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsKd2hpbGUoZz49dGhpcy5sZW5ndGgpe2RlbGV0ZSB0aGlzW2ctLV07fXJldHVybiBlO30ucHJvdGVjdCgpKTt9QXJyYXkuZm9yRWFjaE1ldGhvZChmdW5jdGlvbihnLGUpe0VsZW1lbnRzLmltcGxlbWVudChlLGcpO30pO0FycmF5Lm1pcnJvcihFbGVtZW50cyk7dmFyIGQ7CnRyeXtkPShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCI8aW5wdXQgbmFtZT14PiIpLm5hbWU9PSJ4Iik7fWNhdGNoKGIpe312YXIgYz1mdW5jdGlvbihlKXtyZXR1cm4oIiIrZSkucmVwbGFjZSgvJi9nLCImYW1wOyIpLnJlcGxhY2UoLyIvZywiJnF1b3Q7Iik7fTtEb2N1bWVudC5pbXBsZW1lbnQoe25ld0VsZW1lbnQ6ZnVuY3Rpb24oZSxnKXtpZihnJiZnLmNoZWNrZWQhPW51bGwpe2cuZGVmYXVsdENoZWNrZWQ9Zy5jaGVja2VkOwp9aWYoZCYmZyl7ZT0iPCIrZTtpZihnLm5hbWUpe2UrPScgbmFtZT0iJytjKGcubmFtZSkrJyInO31pZihnLnR5cGUpe2UrPScgdHlwZT0iJytjKGcudHlwZSkrJyInO31lKz0iPiI7ZGVsZXRlIGcubmFtZTtkZWxldGUgZy50eXBlO31yZXR1cm4gdGhpcy5pZCh0aGlzLmNyZWF0ZUVsZW1lbnQoZSkpLnNldChnKTsKfX0pO30pKCk7KGZ1bmN0aW9uKCl7U2xpY2sudWlkT2Yod2luZG93KTtTbGljay51aWRPZihkb2N1bWVudCk7RG9jdW1lbnQuaW1wbGVtZW50KHtuZXdUZXh0Tm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jcmVhdGVUZXh0Tm9kZShlKTt9LGdldERvY3VtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM7Cn0sZ2V0V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2luZG93O30saWQ6KGZ1bmN0aW9uKCl7dmFyIGU9e3N0cmluZzpmdW5jdGlvbihFLEQsbCl7RT1TbGljay5maW5kKGwsIiMiK0UucmVwbGFjZSgvKFxXKS9nLCJcXCQxIikpO3JldHVybihFKT9lLmVsZW1lbnQoRSxEKTpudWxsOwp9LGVsZW1lbnQ6ZnVuY3Rpb24oRCxFKXtTbGljay51aWRPZihEKTtpZighRSYmIUQuJGZhbWlseSYmISgvXig/Om9iamVjdHxlbWJlZCkkL2kpLnRlc3QoRC50YWdOYW1lKSl7dmFyIGw9RC5maXJlRXZlbnQ7RC5fZmlyZUV2ZW50PWZ1bmN0aW9uKEYsRyl7cmV0dXJuIGwoRixHKTsKfTtPYmplY3QuYXBwZW5kKEQsRWxlbWVudC5Qcm90b3R5cGUpO31yZXR1cm4gRDt9LG9iamVjdDpmdW5jdGlvbihELEUsbCl7aWYoRC50b0VsZW1lbnQpe3JldHVybiBlLmVsZW1lbnQoRC50b0VsZW1lbnQobCksRSk7fXJldHVybiBudWxsO319O2UudGV4dG5vZGU9ZS53aGl0ZXNwYWNlPWUud2luZG93PWUuZG9jdW1lbnQ9ZnVuY3Rpb24obCl7cmV0dXJuIGw7Cn07cmV0dXJuIGZ1bmN0aW9uKEQsRixFKXtpZihEJiZELiRmYW1pbHkmJkQudW5pcXVlTnVtYmVyKXtyZXR1cm4gRDt9dmFyIGw9dHlwZU9mKEQpO3JldHVybihlW2xdKT9lW2xdKEQsRixFfHxkb2N1bWVudCk6bnVsbDt9O30pKCl9KTtpZih3aW5kb3cuJD09bnVsbCl7V2luZG93LmltcGxlbWVudCgiJCIsZnVuY3Rpb24oZSxsKXtyZXR1cm4gZG9jdW1lbnQuaWQoZSxsLHRoaXMuZG9jdW1lbnQpOwp9KTt9V2luZG93LmltcGxlbWVudCh7Z2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb2N1bWVudDt9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzO319KTtbRG9jdW1lbnQsRWxlbWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRFbGVtZW50czpmdW5jdGlvbihlKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsZSxuZXcgRWxlbWVudHMpOwp9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLmZpbmQodGhpcyxlKSk7fX0pO3ZhciBtPXtjb250YWluczpmdW5jdGlvbihlKXtyZXR1cm4gU2xpY2suY29udGFpbnModGhpcyxlKTt9fTtpZighZG9jdW1lbnQuY29udGFpbnMpe0RvY3VtZW50LmltcGxlbWVudChtKTsKfWlmKCFkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5jb250YWlucyl7RWxlbWVudC5pbXBsZW1lbnQobSk7fUVsZW1lbnQuaW1wbGVtZW50KCJoYXNDaGlsZCIsZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMhPT1lJiZ0aGlzLmNvbnRhaW5zKGUpO30pOyhmdW5jdGlvbihsLEUsZSl7dGhpcy5TZWxlY3RvcnM9e307CnZhciBGPXRoaXMuU2VsZWN0b3JzLlBzZXVkbz1uZXcgSGFzaCgpO3ZhciBEPWZ1bmN0aW9uKCl7Zm9yKHZhciBHIGluIEYpe2lmKEYuaGFzT3duUHJvcGVydHkoRykpe1NsaWNrLmRlZmluZVBzZXVkbyhHLEZbR10pO2RlbGV0ZSBGW0ddO319fTtTbGljay5zZWFyY2g9ZnVuY3Rpb24oSCxJLEcpe0QoKTsKcmV0dXJuIGwuY2FsbCh0aGlzLEgsSSxHKTt9O1NsaWNrLmZpbmQ9ZnVuY3Rpb24oRyxIKXtEKCk7cmV0dXJuIEUuY2FsbCh0aGlzLEcsSCk7fTtTbGljay5tYXRjaD1mdW5jdGlvbihILEcpe0QoKTtyZXR1cm4gZS5jYWxsKHRoaXMsSCxHKTt9O30pKFNsaWNrLnNlYXJjaCxTbGljay5maW5kLFNsaWNrLm1hdGNoKTsKdmFyIHI9ZnVuY3Rpb24oRSxEKXtpZighRSl7cmV0dXJuIEQ7fUU9T2JqZWN0LmNsb25lKFNsaWNrLnBhcnNlKEUpKTt2YXIgbD1FLmV4cHJlc3Npb25zO2Zvcih2YXIgZT1sLmxlbmd0aDtlLS07KXtsW2VdWzBdLmNvbWJpbmF0b3I9RDt9cmV0dXJuIEU7fTtPYmplY3QuZm9yRWFjaCh7Z2V0TmV4dDoifiIsZ2V0UHJldmlvdXM6IiF+IixnZXRQYXJlbnQ6IiEifSxmdW5jdGlvbihlLGwpe0VsZW1lbnQuaW1wbGVtZW50KGwsZnVuY3Rpb24oRCl7cmV0dXJuIHRoaXMuZ2V0RWxlbWVudChyKEQsZSkpOwp9KTt9KTtPYmplY3QuZm9yRWFjaCh7Z2V0QWxsTmV4dDoifiIsZ2V0QWxsUHJldmlvdXM6IiF+IixnZXRTaWJsaW5nczoifn4iLGdldENoaWxkcmVuOiI+IixnZXRQYXJlbnRzOiIhIn0sZnVuY3Rpb24oZSxsKXtFbGVtZW50LmltcGxlbWVudChsLGZ1bmN0aW9uKEQpe3JldHVybiB0aGlzLmdldEVsZW1lbnRzKHIoRCxlKSk7Cn0pO30pO0VsZW1lbnQuaW1wbGVtZW50KHtnZXRGaXJzdDpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suc2VhcmNoKHRoaXMscihlLCI+IikpWzBdKTt9LGdldExhc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLnNlYXJjaCh0aGlzLHIoZSwiPiIpKS5nZXRMYXN0KCkpOwp9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnQud2luZG93O30sZ2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lckRvY3VtZW50O30sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLmZpbmQodGhpcywiIyIrKCIiK2UpLnJlcGxhY2UoLyhcVykvZywiXFwkMSIpKSk7Cn0sbWF0Y2g6ZnVuY3Rpb24oZSl7cmV0dXJuICFlfHxTbGljay5tYXRjaCh0aGlzLGUpO319KTtpZih3aW5kb3cuJCQ9PW51bGwpe1dpbmRvdy5pbXBsZW1lbnQoIiQkIixmdW5jdGlvbihlKXt2YXIgSD1uZXcgRWxlbWVudHM7aWYoYXJndW1lbnRzLmxlbmd0aD09MSYmdHlwZW9mIGU9PSJzdHJpbmciKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMuZG9jdW1lbnQsZSxIKTsKfXZhciBFPUFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKTtmb3IodmFyIEY9MCxEPUUubGVuZ3RoO0Y8RDtGKyspe3ZhciBHPUVbRl07c3dpdGNoKHR5cGVPZihHKSl7Y2FzZSJlbGVtZW50IjpILnB1c2goRyk7YnJlYWs7Y2FzZSJzdHJpbmciOlNsaWNrLnNlYXJjaCh0aGlzLmRvY3VtZW50LEcsSCk7Cn19cmV0dXJuIEg7fSk7fWlmKHdpbmRvdy4kJD09bnVsbCl7V2luZG93LmltcGxlbWVudCgiJCQiLGZ1bmN0aW9uKGUpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe2lmKHR5cGVvZiBlPT0ic3RyaW5nIil7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLmRvY3VtZW50LGUsbmV3IEVsZW1lbnRzKTsKfWVsc2V7aWYoVHlwZS5pc0VudW1lcmFibGUoZSkpe3JldHVybiBuZXcgRWxlbWVudHMoZSk7fX19cmV0dXJuIG5ldyBFbGVtZW50cyhhcmd1bWVudHMpO30pO312YXIgdz17YmVmb3JlOmZ1bmN0aW9uKGwsZSl7dmFyIEQ9ZS5wYXJlbnROb2RlO2lmKEQpe0QuaW5zZXJ0QmVmb3JlKGwsZSk7Cn19LGFmdGVyOmZ1bmN0aW9uKGwsZSl7dmFyIEQ9ZS5wYXJlbnROb2RlO2lmKEQpe0QuaW5zZXJ0QmVmb3JlKGwsZS5uZXh0U2libGluZyk7fX0sYm90dG9tOmZ1bmN0aW9uKGwsZSl7ZS5hcHBlbmRDaGlsZChsKTt9LHRvcDpmdW5jdGlvbihsLGUpe2UuaW5zZXJ0QmVmb3JlKGwsZS5maXJzdENoaWxkKTsKfX07dy5pbnNpZGU9dy5ib3R0b207T2JqZWN0LmVhY2godyxmdW5jdGlvbihsLEQpe0Q9RC5jYXBpdGFsaXplKCk7dmFyIGU9e307ZVsiaW5qZWN0IitEXT1mdW5jdGlvbihFKXtsKHRoaXMsZG9jdW1lbnQuaWQoRSx0cnVlKSk7cmV0dXJuIHRoaXM7fTtlWyJncmFiIitEXT1mdW5jdGlvbihFKXtsKGRvY3VtZW50LmlkKEUsdHJ1ZSksdGhpcyk7CnJldHVybiB0aGlzO307RWxlbWVudC5pbXBsZW1lbnQoZSk7fSk7dmFyIGo9e30sZD17fTt2YXIgaz17fTtBcnJheS5mb3JFYWNoKFsidHlwZSIsInZhbHVlIiwiZGVmYXVsdFZhbHVlIiwiYWNjZXNzS2V5IiwiY2VsbFBhZGRpbmciLCJjZWxsU3BhY2luZyIsImNvbFNwYW4iLCJmcmFtZUJvcmRlciIsInJvd1NwYW4iLCJ0YWJJbmRleCIsInVzZU1hcCJdLGZ1bmN0aW9uKGUpe2tbZS50b0xvd2VyQ2FzZSgpXT1lOwp9KTtrLmh0bWw9ImlubmVySFRNTCI7ay50ZXh0PShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS50ZXh0Q29udGVudD09bnVsbCk/ImlubmVyVGV4dCI6InRleHRDb250ZW50IjtPYmplY3QuZm9yRWFjaChrLGZ1bmN0aW9uKGwsZSl7ZFtlXT1mdW5jdGlvbihELEUpe0RbbF09RTsKfTtqW2VdPWZ1bmN0aW9uKEQpe3JldHVybiBEW2xdO307fSk7dmFyIHg9WyJjb21wYWN0Iiwibm93cmFwIiwiaXNtYXAiLCJkZWNsYXJlIiwibm9zaGFkZSIsImNoZWNrZWQiLCJkaXNhYmxlZCIsInJlYWRPbmx5IiwibXVsdGlwbGUiLCJzZWxlY3RlZCIsIm5vcmVzaXplIiwiZGVmZXIiLCJkZWZhdWx0Q2hlY2tlZCIsImF1dG9mb2N1cyIsImNvbnRyb2xzIiwiYXV0b3BsYXkiLCJsb29wIl07CnZhciBoPXt9O0FycmF5LmZvckVhY2goeCxmdW5jdGlvbihlKXt2YXIgbD1lLnRvTG93ZXJDYXNlKCk7aFtsXT1lO2RbbF09ZnVuY3Rpb24oRCxFKXtEW2VdPSEhRTt9O2pbbF09ZnVuY3Rpb24oRCl7cmV0dXJuICEhRFtlXTt9O30pO09iamVjdC5hcHBlbmQoZCx7ImNsYXNzIjpmdW5jdGlvbihlLGwpeygiY2xhc3NOYW1lIiBpbiBlKT9lLmNsYXNzTmFtZT0obHx8IiIpOmUuc2V0QXR0cmlidXRlKCJjbGFzcyIsbCk7Cn0sImZvciI6ZnVuY3Rpb24oZSxsKXsoImh0bWxGb3IiIGluIGUpP2UuaHRtbEZvcj1sOmUuc2V0QXR0cmlidXRlKCJmb3IiLGwpO30sc3R5bGU6ZnVuY3Rpb24oZSxsKXsoZS5zdHlsZSk/ZS5zdHlsZS5jc3NUZXh0PWw6ZS5zZXRBdHRyaWJ1dGUoInN0eWxlIixsKTsKfSx2YWx1ZTpmdW5jdGlvbihlLGwpe2UudmFsdWU9KGwhPW51bGwpP2w6IiI7fX0pO2pbImNsYXNzIl09ZnVuY3Rpb24oZSl7cmV0dXJuKCJjbGFzc05hbWUiIGluIGUpP2UuY2xhc3NOYW1lfHxudWxsOmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpO307dmFyIGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CnRyeXtmLnR5cGU9ImJ1dHRvbiI7fWNhdGNoKHope31pZihmLnR5cGUhPSJidXR0b24iKXtkLnR5cGU9ZnVuY3Rpb24oZSxsKXtlLnNldEF0dHJpYnV0ZSgidHlwZSIsbCk7fTt9Zj1udWxsO3ZhciBwPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7cC52YWx1ZT0idCI7CnAudHlwZT0ic3VibWl0IjtpZihwLnZhbHVlIT0idCIpe2QudHlwZT1mdW5jdGlvbihsLGUpe3ZhciBEPWwudmFsdWU7bC50eXBlPWU7bC52YWx1ZT1EO307fXA9bnVsbDt2YXIgcT0oZnVuY3Rpb24oZSl7ZS5yYW5kb209ImF0dHJpYnV0ZSI7cmV0dXJuKGUuZ2V0QXR0cmlidXRlKCJyYW5kb20iKT09ImF0dHJpYnV0ZSIpOwp9KShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSk7RWxlbWVudC5pbXBsZW1lbnQoe3NldFByb3BlcnR5OmZ1bmN0aW9uKGwsRCl7dmFyIEU9ZFtsLnRvTG93ZXJDYXNlKCldO2lmKEUpe0UodGhpcyxEKTt9ZWxzZXtpZihxKXt2YXIgZT10aGlzLnJldHJpZXZlKCIkYXR0cmlidXRlV2hpdGVMaXN0Iix7fSk7Cn1pZihEPT1udWxsKXt0aGlzLnJlbW92ZUF0dHJpYnV0ZShsKTtpZihxKXtkZWxldGUgZVtsXTt9fWVsc2V7dGhpcy5zZXRBdHRyaWJ1dGUobCwiIitEKTtpZihxKXtlW2xdPXRydWU7fX19cmV0dXJuIHRoaXM7fSxzZXRQcm9wZXJ0aWVzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgbCBpbiBlKXt0aGlzLnNldFByb3BlcnR5KGwsZVtsXSk7Cn1yZXR1cm4gdGhpczt9LGdldFByb3BlcnR5OmZ1bmN0aW9uKEYpe3ZhciBEPWpbRi50b0xvd2VyQ2FzZSgpXTtpZihEKXtyZXR1cm4gRCh0aGlzKTt9aWYocSl7dmFyIGw9dGhpcy5nZXRBdHRyaWJ1dGVOb2RlKEYpLEU9dGhpcy5yZXRyaWV2ZSgiJGF0dHJpYnV0ZVdoaXRlTGlzdCIse30pOwppZighbCl7cmV0dXJuIG51bGw7fWlmKGwuZXhwYW5kbyYmIUVbRl0pe3ZhciBHPXRoaXMub3V0ZXJIVE1MO2lmKEcuc3Vic3RyKDAsRy5zZWFyY2goL1wvP1snIl0/Pig/IVtePF0qPFsnIl0pLykpLmluZGV4T2YoRik8MCl7cmV0dXJuIG51bGw7fUVbRl09dHJ1ZTt9fXZhciBlPVNsaWNrLmdldEF0dHJpYnV0ZSh0aGlzLEYpOwpyZXR1cm4oIWUmJiFTbGljay5oYXNBdHRyaWJ1dGUodGhpcyxGKSk/bnVsbDplO30sZ2V0UHJvcGVydGllczpmdW5jdGlvbigpe3ZhciBlPUFycmF5LmZyb20oYXJndW1lbnRzKTtyZXR1cm4gZS5tYXAodGhpcy5nZXRQcm9wZXJ0eSx0aGlzKS5hc3NvY2lhdGUoZSk7Cn0scmVtb3ZlUHJvcGVydHk6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2V0UHJvcGVydHkoZSxudWxsKTt9LHJlbW92ZVByb3BlcnRpZXM6ZnVuY3Rpb24oKXtBcnJheS5lYWNoKGFyZ3VtZW50cyx0aGlzLnJlbW92ZVByb3BlcnR5LHRoaXMpO3JldHVybiB0aGlzO30sc2V0OmZ1bmN0aW9uKEQsbCl7dmFyIGU9RWxlbWVudC5Qcm9wZXJ0aWVzW0RdOwooZSYmZS5zZXQpP2Uuc2V0LmNhbGwodGhpcyxsKTp0aGlzLnNldFByb3BlcnR5KEQsbCk7fS5vdmVybG9hZFNldHRlcigpLGdldDpmdW5jdGlvbihsKXt2YXIgZT1FbGVtZW50LlByb3BlcnRpZXNbbF07cmV0dXJuKGUmJmUuZ2V0KT9lLmdldC5hcHBseSh0aGlzKTp0aGlzLmdldFByb3BlcnR5KGwpOwp9Lm92ZXJsb2FkR2V0dGVyKCksZXJhc2U6ZnVuY3Rpb24obCl7dmFyIGU9RWxlbWVudC5Qcm9wZXJ0aWVzW2xdOyhlJiZlLmVyYXNlKT9lLmVyYXNlLmFwcGx5KHRoaXMpOnRoaXMucmVtb3ZlUHJvcGVydHkobCk7cmV0dXJuIHRoaXM7fSxoYXNDbGFzczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jbGFzc05hbWUuY2xlYW4oKS5jb250YWlucyhlLCIgIik7Cn0sYWRkQ2xhc3M6ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaGFzQ2xhc3MoZSkpe3RoaXMuY2xhc3NOYW1lPSh0aGlzLmNsYXNzTmFtZSsiICIrZSkuY2xlYW4oKTt9cmV0dXJuIHRoaXM7fSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXt0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoIihefFxccykiK2UrIig/Olxcc3wkKSIpLCIkMSIpOwpyZXR1cm4gdGhpczt9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGUsbCl7aWYobD09bnVsbCl7bD0hdGhpcy5oYXNDbGFzcyhlKTt9cmV0dXJuKGwpP3RoaXMuYWRkQ2xhc3MoZSk6dGhpcy5yZW1vdmVDbGFzcyhlKTt9LGFkb3B0OmZ1bmN0aW9uKCl7dmFyIEU9dGhpcyxlLEc9QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpLEY9Ry5sZW5ndGg7CmlmKEY+MSl7RT1lPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTt9Zm9yKHZhciBEPTA7RDxGO0QrKyl7dmFyIGw9ZG9jdW1lbnQuaWQoR1tEXSx0cnVlKTtpZihsKXtFLmFwcGVuZENoaWxkKGwpO319aWYoZSl7dGhpcy5hcHBlbmRDaGlsZChlKTt9cmV0dXJuIHRoaXM7Cn0sYXBwZW5kVGV4dDpmdW5jdGlvbihsLGUpe3JldHVybiB0aGlzLmdyYWIodGhpcy5nZXREb2N1bWVudCgpLm5ld1RleHROb2RlKGwpLGUpO30sZ3JhYjpmdW5jdGlvbihsLGUpe3dbZXx8ImJvdHRvbSJdKGRvY3VtZW50LmlkKGwsdHJ1ZSksdGhpcyk7cmV0dXJuIHRoaXM7Cn0saW5qZWN0OmZ1bmN0aW9uKGwsZSl7d1tlfHwiYm90dG9tIl0odGhpcyxkb2N1bWVudC5pZChsLHRydWUpKTtyZXR1cm4gdGhpczt9LHJlcGxhY2VzOmZ1bmN0aW9uKGUpe2U9ZG9jdW1lbnQuaWQoZSx0cnVlKTtlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMsZSk7CnJldHVybiB0aGlzO30sd3JhcHM6ZnVuY3Rpb24obCxlKXtsPWRvY3VtZW50LmlkKGwsdHJ1ZSk7cmV0dXJuIHRoaXMucmVwbGFjZXMobCkuZ3JhYihsLGUpO30sZ2V0U2VsZWN0ZWQ6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkSW5kZXg7cmV0dXJuIG5ldyBFbGVtZW50cyhBcnJheS5mcm9tKHRoaXMub3B0aW9ucykuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnNlbGVjdGVkOwp9KSk7fSx0b1F1ZXJ5U3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGU9W107dGhpcy5nZXRFbGVtZW50cygiaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEiKS5lYWNoKGZ1bmN0aW9uKEQpe3ZhciBsPUQudHlwZTtpZighRC5uYW1lfHxELmRpc2FibGVkfHxsPT0ic3VibWl0Inx8bD09InJlc2V0Inx8bD09ImZpbGUifHxsPT0iaW1hZ2UiKXtyZXR1cm47Cn12YXIgRT0oRC5nZXQoInRhZyIpPT0ic2VsZWN0Iik/RC5nZXRTZWxlY3RlZCgpLm1hcChmdW5jdGlvbihGKXtyZXR1cm4gZG9jdW1lbnQuaWQoRikuZ2V0KCJ2YWx1ZSIpO30pOigobD09InJhZGlvInx8bD09ImNoZWNrYm94IikmJiFELmNoZWNrZWQpP251bGw6RC5nZXQoInZhbHVlIik7CkFycmF5LmZyb20oRSkuZWFjaChmdW5jdGlvbihGKXtpZih0eXBlb2YgRiE9InVuZGVmaW5lZCIpe2UucHVzaChlbmNvZGVVUklDb21wb25lbnQoRC5uYW1lKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KEYpKTt9fSk7fSk7cmV0dXJuIGUuam9pbigiJiIpO319KTt2YXIgaT17fSxBPXt9Owp2YXIgQj1mdW5jdGlvbihlKXtyZXR1cm4oQVtlXXx8KEFbZV09e30pKTt9O3ZhciB2PWZ1bmN0aW9uKGwpe3ZhciBlPWwudW5pcXVlTnVtYmVyO2lmKGwucmVtb3ZlRXZlbnRzKXtsLnJlbW92ZUV2ZW50cygpO31pZihsLmNsZWFyQXR0cmlidXRlcyl7bC5jbGVhckF0dHJpYnV0ZXMoKTsKfWlmKGUhPW51bGwpe2RlbGV0ZSBpW2VdO2RlbGV0ZSBBW2VdO31yZXR1cm4gbDt9O3ZhciBDPXtpbnB1dDoiY2hlY2tlZCIsb3B0aW9uOiJzZWxlY3RlZCIsdGV4dGFyZWE6InZhbHVlIn07RWxlbWVudC5pbXBsZW1lbnQoe2Rlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT12KHRoaXMpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7CkFycmF5LmVhY2goZSx2KTtFbGVtZW50LmRpc3Bvc2UodGhpcyk7cmV0dXJuIG51bGw7fSxlbXB0eTpmdW5jdGlvbigpe0FycmF5LmZyb20odGhpcy5jaGlsZE5vZGVzKS5lYWNoKEVsZW1lbnQuZGlzcG9zZSk7cmV0dXJuIHRoaXM7fSxkaXNwb3NlOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMucGFyZW50Tm9kZSk/dGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpOnRoaXM7Cn0sY2xvbmU6ZnVuY3Rpb24oRyxFKXtHPUchPT1mYWxzZTt2YXIgTD10aGlzLmNsb25lTm9kZShHKSxEPVtMXSxGPVt0aGlzXSxKO2lmKEcpe0QuYXBwZW5kKEFycmF5LmZyb20oTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpKSk7Ri5hcHBlbmQoQXJyYXkuZnJvbSh0aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpKTsKfWZvcihKPUQubGVuZ3RoO0otLTspe3ZhciBIPURbSl0sSz1GW0pdO2lmKCFFKXtILnJlbW92ZUF0dHJpYnV0ZSgiaWQiKTt9aWYoSC5jbGVhckF0dHJpYnV0ZXMpe0guY2xlYXJBdHRyaWJ1dGVzKCk7SC5tZXJnZUF0dHJpYnV0ZXMoSyk7SC5yZW1vdmVBdHRyaWJ1dGUoInVuaXF1ZU51bWJlciIpOwppZihILm9wdGlvbnMpe3ZhciBPPUgub3B0aW9ucyxlPUsub3B0aW9ucztmb3IodmFyIEk9Ty5sZW5ndGg7SS0tOyl7T1tJXS5zZWxlY3RlZD1lW0ldLnNlbGVjdGVkO319fXZhciBsPUNbSy50YWdOYW1lLnRvTG93ZXJDYXNlKCldO2lmKGwmJktbbF0pe0hbbF09S1tsXTsKfX1pZihCcm93c2VyLmllKXt2YXIgTT1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJvYmplY3QiKSxOPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm9iamVjdCIpO2ZvcihKPU0ubGVuZ3RoO0otLTspe01bSl0ub3V0ZXJIVE1MPU5bSl0ub3V0ZXJIVE1MO319cmV0dXJuIGRvY3VtZW50LmlkKEwpOwp9fSk7W0VsZW1lbnQsV2luZG93LERvY3VtZW50XS5pbnZva2UoImltcGxlbWVudCIse2FkZExpc3RlbmVyOmZ1bmN0aW9uKEUsRCl7aWYoRT09InVubG9hZCIpe3ZhciBlPUQsbD10aGlzO0Q9ZnVuY3Rpb24oKXtsLnJlbW92ZUxpc3RlbmVyKCJ1bmxvYWQiLEQpO2UoKTsKfTt9ZWxzZXtpW1NsaWNrLnVpZE9mKHRoaXMpXT10aGlzO31pZih0aGlzLmFkZEV2ZW50TGlzdGVuZXIpe3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihFLEQsISFhcmd1bWVudHNbMl0pO31lbHNle3RoaXMuYXR0YWNoRXZlbnQoIm9uIitFLEQpO31yZXR1cm4gdGhpczt9LHJlbW92ZUxpc3RlbmVyOmZ1bmN0aW9uKGwsZSl7aWYodGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKXt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIobCxlLCEhYXJndW1lbnRzWzJdKTsKfWVsc2V7dGhpcy5kZXRhY2hFdmVudCgib24iK2wsZSk7fXJldHVybiB0aGlzO30scmV0cmlldmU6ZnVuY3Rpb24obCxlKXt2YXIgRT1CKFNsaWNrLnVpZE9mKHRoaXMpKSxEPUVbbF07aWYoZSE9bnVsbCYmRD09bnVsbCl7RD1FW2xdPWU7fXJldHVybiBEIT1udWxsP0Q6bnVsbDsKfSxzdG9yZTpmdW5jdGlvbihsLGUpe3ZhciBEPUIoU2xpY2sudWlkT2YodGhpcykpO0RbbF09ZTtyZXR1cm4gdGhpczt9LGVsaW1pbmF0ZTpmdW5jdGlvbihlKXt2YXIgbD1CKFNsaWNrLnVpZE9mKHRoaXMpKTtkZWxldGUgbFtlXTtyZXR1cm4gdGhpczt9fSk7aWYod2luZG93LmF0dGFjaEV2ZW50JiYhd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe3dpbmRvdy5hZGRMaXN0ZW5lcigidW5sb2FkIixmdW5jdGlvbigpe09iamVjdC5lYWNoKGksdik7CmlmKHdpbmRvdy5Db2xsZWN0R2FyYmFnZSl7Q29sbGVjdEdhcmJhZ2UoKTt9fSk7fUVsZW1lbnQuUHJvcGVydGllcz17fTtFbGVtZW50LlByb3BlcnRpZXM9bmV3IEhhc2g7RWxlbWVudC5Qcm9wZXJ0aWVzLnN0eWxlPXtzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5zdHlsZS5jc3NUZXh0PWU7Cn0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3R5bGUuY3NzVGV4dDt9LGVyYXNlOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5jc3NUZXh0PSIiO319O0VsZW1lbnQuUHJvcGVydGllcy50YWc9e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKfX07RWxlbWVudC5Qcm9wZXJ0aWVzLmh0bWw9e3NldDpmdW5jdGlvbihlKXtpZihlPT1udWxsKXtlPSIiO31lbHNle2lmKHR5cGVPZihlKT09ImFycmF5Iil7ZT1lLmpvaW4oIiIpO319dGhpcy5pbm5lckhUTUw9ZTt9LGVyYXNlOmZ1bmN0aW9uKCl7dGhpcy5pbm5lckhUTUw9IiI7Cn19O3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3QuaW5uZXJIVE1MPSI8bmF2PjwvbmF2PiI7dmFyIGE9KHQuY2hpbGROb2Rlcy5sZW5ndGg9PTEpO2lmKCFhKXt2YXIgcz0iYWJiciBhcnRpY2xlIGFzaWRlIGF1ZGlvIGNhbnZhcyBkYXRhbGlzdCBkZXRhaWxzIGZpZ2NhcHRpb24gZmlndXJlIGZvb3RlciBoZWFkZXIgaGdyb3VwIG1hcmsgbWV0ZXIgbmF2IG91dHB1dCBwcm9ncmVzcyBzZWN0aW9uIHN1bW1hcnkgdGltZSB2aWRlbyIuc3BsaXQoIiAiKSxiPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSx1PXMubGVuZ3RoOwp3aGlsZSh1LS0pe2IuY3JlYXRlRWxlbWVudChzW3VdKTt9fXQ9bnVsbDt2YXIgZz1GdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKTtlLmlubmVySFRNTD0iPHRyPjx0ZD48L3RkPjwvdHI+IjtyZXR1cm4gdHJ1ZTsKfSk7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKSxvPSI8dGQ+PC90ZD4iO2MuaW5uZXJIVE1MPW87dmFyIHk9KGMuaW5uZXJIVE1MPT1vKTtjPW51bGw7aWYoIWd8fCF5fHwhYSl7RWxlbWVudC5Qcm9wZXJ0aWVzLmh0bWwuc2V0PShmdW5jdGlvbihsKXt2YXIgZT17dGFibGU6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLHNlbGVjdDpbMSwiPHNlbGVjdD4iLCI8L3NlbGVjdD4iXSx0Ym9keTpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdHI6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdfTsKZS50aGVhZD1lLnRmb290PWUudGJvZHk7cmV0dXJuIGZ1bmN0aW9uKEQpe3ZhciBFPWVbdGhpcy5nZXQoInRhZyIpXTtpZighRSYmIWEpe0U9WzAsIiIsIiJdO31pZighRSl7cmV0dXJuIGwuY2FsbCh0aGlzLEQpO312YXIgSD1FWzBdLEc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksRj1HOwppZighYSl7Yi5hcHBlbmRDaGlsZChHKTt9Ry5pbm5lckhUTUw9W0VbMV0sRCxFWzJdXS5mbGF0dGVuKCkuam9pbigiIik7d2hpbGUoSC0tKXtGPUYuZmlyc3RDaGlsZDt9dGhpcy5lbXB0eSgpLmFkb3B0KEYuY2hpbGROb2Rlcyk7aWYoIWEpe2IucmVtb3ZlQ2hpbGQoRyk7Cn1HPW51bGw7fTt9KShFbGVtZW50LlByb3BlcnRpZXMuaHRtbC5zZXQpO312YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIik7bi5pbm5lckhUTUw9IjxzZWxlY3Q+PG9wdGlvbj5zPC9vcHRpb24+PC9zZWxlY3Q+IjtpZihuLmZpcnN0Q2hpbGQudmFsdWUhPSJzIil7RWxlbWVudC5Qcm9wZXJ0aWVzLnZhbHVlPXtzZXQ6ZnVuY3Rpb24oRyl7dmFyIGw9dGhpcy5nZXQoInRhZyIpOwppZihsIT0ic2VsZWN0Iil7cmV0dXJuIHRoaXMuc2V0UHJvcGVydHkoInZhbHVlIixHKTt9dmFyIEQ9dGhpcy5nZXRFbGVtZW50cygib3B0aW9uIik7Zm9yKHZhciBFPTA7RTxELmxlbmd0aDtFKyspe3ZhciBGPURbRV0sZT1GLmdldEF0dHJpYnV0ZU5vZGUoInZhbHVlIiksSD0oZSYmZS5zcGVjaWZpZWQpP0YudmFsdWU6Ri5nZXQoInRleHQiKTsKaWYoSD09Ryl7cmV0dXJuIEYuc2VsZWN0ZWQ9dHJ1ZTt9fX0sZ2V0OmZ1bmN0aW9uKCl7dmFyIEQ9dGhpcyxsPUQuZ2V0KCJ0YWciKTtpZihsIT0ic2VsZWN0IiYmbCE9Im9wdGlvbiIpe3JldHVybiB0aGlzLmdldFByb3BlcnR5KCJ2YWx1ZSIpO31pZihsPT0ic2VsZWN0IiYmIShEPUQuZ2V0U2VsZWN0ZWQoKVswXSkpe3JldHVybiIiOwp9dmFyIGU9RC5nZXRBdHRyaWJ1dGVOb2RlKCJ2YWx1ZSIpO3JldHVybihlJiZlLnNwZWNpZmllZCk/RC52YWx1ZTpELmdldCgidGV4dCIpO319O31uPW51bGw7aWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKSl7RWxlbWVudC5Qcm9wZXJ0aWVzLmlkPXtzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5pZD10aGlzLmdldEF0dHJpYnV0ZU5vZGUoImlkIikudmFsdWU9ZTsKfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZHx8bnVsbDt9LGVyYXNlOmZ1bmN0aW9uKCl7dGhpcy5pZD10aGlzLmdldEF0dHJpYnV0ZU5vZGUoImlkIikudmFsdWU9IiI7fX07fX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGk9ZG9jdW1lbnQuaHRtbDt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKZC5zdHlsZS5jb2xvcj0icmVkIjtkLnN0eWxlLmNvbG9yPW51bGw7dmFyIGM9ZC5zdHlsZS5jb2xvcj09InJlZCI7ZD1udWxsO0VsZW1lbnQuUHJvcGVydGllcy5zdHlsZXM9e3NldDpmdW5jdGlvbihrKXt0aGlzLnNldFN0eWxlcyhrKTt9fTt2YXIgaD0oaS5zdHlsZS5vcGFjaXR5IT1udWxsKSxlPShpLnN0eWxlLmZpbHRlciE9bnVsbCksaj0vYWxwaGFcKG9wYWNpdHk9KFtcZC5dKylcKS9pOwp2YXIgYT1mdW5jdGlvbihsLGspe2wuc3RvcmUoIiRvcGFjaXR5IixrKTtsLnN0eWxlLnZpc2liaWxpdHk9az4wfHxrPT1udWxsPyJ2aXNpYmxlIjoiaGlkZGVuIjt9O3ZhciBmPShoP2Z1bmN0aW9uKGwsayl7bC5zdHlsZS5vcGFjaXR5PWs7fTooZT9mdW5jdGlvbihsLGspe3ZhciBuPWwuc3R5bGU7CmlmKCFsLmN1cnJlbnRTdHlsZXx8IWwuY3VycmVudFN0eWxlLmhhc0xheW91dCl7bi56b29tPTE7fWlmKGs9PW51bGx8fGs9PTEpe2s9IiI7fWVsc2V7az0iYWxwaGEob3BhY2l0eT0iKyhrKjEwMCkubGltaXQoMCwxMDApLnJvdW5kKCkrIikiO312YXIgbT1uLmZpbHRlcnx8bC5nZXRDb21wdXRlZFN0eWxlKCJmaWx0ZXIiKXx8IiI7Cm4uZmlsdGVyPWoudGVzdChtKT9tLnJlcGxhY2UoaixrKTptK2s7aWYoIW4uZmlsdGVyKXtuLnJlbW92ZUF0dHJpYnV0ZSgiZmlsdGVyIik7fX06YSkpO3ZhciBnPShoP2Z1bmN0aW9uKGwpe3ZhciBrPWwuc3R5bGUub3BhY2l0eXx8bC5nZXRDb21wdXRlZFN0eWxlKCJvcGFjaXR5Iik7CnJldHVybihrPT0iIik/MTprLnRvRmxvYXQoKTt9OihlP2Z1bmN0aW9uKGwpe3ZhciBtPShsLnN0eWxlLmZpbHRlcnx8bC5nZXRDb21wdXRlZFN0eWxlKCJmaWx0ZXIiKSksaztpZihtKXtrPW0ubWF0Y2goaik7fXJldHVybihrPT1udWxsfHxtPT1udWxsKT8xOihrWzFdLzEwMCk7Cn06ZnVuY3Rpb24obCl7dmFyIGs9bC5yZXRyaWV2ZSgiJG9wYWNpdHkiKTtpZihrPT1udWxsKXtrPShsLnN0eWxlLnZpc2liaWxpdHk9PSJoaWRkZW4iPzA6MSk7fXJldHVybiBrO30pKTt2YXIgYj0oaS5zdHlsZS5jc3NGbG9hdD09bnVsbCk/InN0eWxlRmxvYXQiOiJjc3NGbG9hdCI7CkVsZW1lbnQuaW1wbGVtZW50KHtnZXRDb21wdXRlZFN0eWxlOmZ1bmN0aW9uKG0pe2lmKHRoaXMuY3VycmVudFN0eWxlKXtyZXR1cm4gdGhpcy5jdXJyZW50U3R5bGVbbS5jYW1lbENhc2UoKV07fXZhciBsPUVsZW1lbnQuZ2V0RG9jdW1lbnQodGhpcykuZGVmYXVsdFZpZXcsaz1sP2wuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLG51bGwpOm51bGw7CnJldHVybihrKT9rLmdldFByb3BlcnR5VmFsdWUoKG09PWIpPyJmbG9hdCI6bS5oeXBoZW5hdGUoKSk6bnVsbDt9LHNldFN0eWxlOmZ1bmN0aW9uKGwsayl7aWYobD09Im9wYWNpdHkiKXtpZihrIT1udWxsKXtrPXBhcnNlRmxvYXQoayk7fWYodGhpcyxrKTtyZXR1cm4gdGhpczsKfWw9KGw9PSJmbG9hdCI/YjpsKS5jYW1lbENhc2UoKTtpZih0eXBlT2YoaykhPSJzdHJpbmciKXt2YXIgbT0oRWxlbWVudC5TdHlsZXNbbF18fCJAIikuc3BsaXQoIiAiKTtrPUFycmF5LmZyb20oaykubWFwKGZ1bmN0aW9uKG8sbil7aWYoIW1bbl0pe3JldHVybiIiOwp9cmV0dXJuKHR5cGVPZihvKT09Im51bWJlciIpP21bbl0ucmVwbGFjZSgiQCIsTWF0aC5yb3VuZChvKSk6bzt9KS5qb2luKCIgIik7fWVsc2V7aWYoaz09U3RyaW5nKE51bWJlcihrKSkpe2s9TWF0aC5yb3VuZChrKTt9fXRoaXMuc3R5bGVbbF09aztpZigoaz09IiJ8fGs9PW51bGwpJiZjJiZ0aGlzLnN0eWxlLnJlbW92ZUF0dHJpYnV0ZSl7dGhpcy5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUobCk7Cn1yZXR1cm4gdGhpczt9LGdldFN0eWxlOmZ1bmN0aW9uKHEpe2lmKHE9PSJvcGFjaXR5Iil7cmV0dXJuIGcodGhpcyk7fXE9KHE9PSJmbG9hdCI/YjpxKS5jYW1lbENhc2UoKTt2YXIgaz10aGlzLnN0eWxlW3FdO2lmKCFrfHxxPT0iekluZGV4Iil7az1bXTtmb3IodmFyIHAgaW4gRWxlbWVudC5TaG9ydFN0eWxlcyl7aWYocSE9cCl7Y29udGludWU7Cn1mb3IodmFyIG8gaW4gRWxlbWVudC5TaG9ydFN0eWxlc1twXSl7ay5wdXNoKHRoaXMuZ2V0U3R5bGUobykpO31yZXR1cm4gay5qb2luKCIgIik7fWs9dGhpcy5nZXRDb21wdXRlZFN0eWxlKHEpO31pZihrKXtrPVN0cmluZyhrKTt2YXIgbT1rLm1hdGNoKC9yZ2JhP1woW1xkXHMsXStcKS8pOwppZihtKXtrPWsucmVwbGFjZShtWzBdLG1bMF0ucmdiVG9IZXgoKSk7fX1pZihCcm93c2VyLm9wZXJhfHxCcm93c2VyLmllKXtpZigoL14oaGVpZ2h0fHdpZHRoKSQvKS50ZXN0KHEpJiYhKC9weCQvLnRlc3QoaykpKXt2YXIgbD0ocT09IndpZHRoIik/WyJsZWZ0IiwicmlnaHQiXTpbInRvcCIsImJvdHRvbSJdLG49MDsKbC5lYWNoKGZ1bmN0aW9uKHIpe24rPXRoaXMuZ2V0U3R5bGUoImJvcmRlci0iK3IrIi13aWR0aCIpLnRvSW50KCkrdGhpcy5nZXRTdHlsZSgicGFkZGluZy0iK3IpLnRvSW50KCk7fSx0aGlzKTtyZXR1cm4gdGhpc1sib2Zmc2V0IitxLmNhcGl0YWxpemUoKV0tbisicHgiOwp9aWYoQnJvd3Nlci5pZSYmKC9eYm9yZGVyKC4rKVdpZHRofG1hcmdpbnxwYWRkaW5nLykudGVzdChxKSYmaXNOYU4ocGFyc2VGbG9hdChrKSkpe3JldHVybiIwcHgiO319cmV0dXJuIGs7fSxzZXRTdHlsZXM6ZnVuY3Rpb24obCl7Zm9yKHZhciBrIGluIGwpe3RoaXMuc2V0U3R5bGUoayxsW2tdKTsKfXJldHVybiB0aGlzO30sZ2V0U3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGs9e307QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpLmVhY2goZnVuY3Rpb24obCl7a1tsXT10aGlzLmdldFN0eWxlKGwpO30sdGhpcyk7cmV0dXJuIGs7fX0pO0VsZW1lbnQuU3R5bGVzPXtsZWZ0OiJAcHgiLHRvcDoiQHB4Iixib3R0b206IkBweCIscmlnaHQ6IkBweCIsd2lkdGg6IkBweCIsaGVpZ2h0OiJAcHgiLG1heFdpZHRoOiJAcHgiLG1heEhlaWdodDoiQHB4IixtaW5XaWR0aDoiQHB4IixtaW5IZWlnaHQ6IkBweCIsYmFja2dyb3VuZENvbG9yOiJyZ2IoQCwgQCwgQCkiLGJhY2tncm91bmRQb3NpdGlvbjoiQHB4IEBweCIsY29sb3I6InJnYihALCBALCBAKSIsZm9udFNpemU6IkBweCIsbGV0dGVyU3BhY2luZzoiQHB4IixsaW5lSGVpZ2h0OiJAcHgiLGNsaXA6InJlY3QoQHB4IEBweCBAcHggQHB4KSIsbWFyZ2luOiJAcHggQHB4IEBweCBAcHgiLHBhZGRpbmc6IkBweCBAcHggQHB4IEBweCIsYm9yZGVyOiJAcHggQCByZ2IoQCwgQCwgQCkgQHB4IEAgcmdiKEAsIEAsIEApIEBweCBAIHJnYihALCBALCBAKSIsYm9yZGVyV2lkdGg6IkBweCBAcHggQHB4IEBweCIsYm9yZGVyU3R5bGU6IkAgQCBAIEAiLGJvcmRlckNvbG9yOiJyZ2IoQCwgQCwgQCkgcmdiKEAsIEAsIEApIHJnYihALCBALCBAKSByZ2IoQCwgQCwgQCkiLHpJbmRleDoiQCIsem9vbToiQCIsZm9udFdlaWdodDoiQCIsdGV4dEluZGVudDoiQHB4IixvcGFjaXR5OiJAIn07CkVsZW1lbnQuaW1wbGVtZW50KHtzZXRPcGFjaXR5OmZ1bmN0aW9uKGspe2YodGhpcyxrKTtyZXR1cm4gdGhpczt9LGdldE9wYWNpdHk6ZnVuY3Rpb24oKXtyZXR1cm4gZyh0aGlzKTt9fSk7RWxlbWVudC5Qcm9wZXJ0aWVzLm9wYWNpdHk9e3NldDpmdW5jdGlvbihrKXtmKHRoaXMsayk7CmEodGhpcyxrKTt9LGdldDpmdW5jdGlvbigpe3JldHVybiBnKHRoaXMpO319O0VsZW1lbnQuU3R5bGVzPW5ldyBIYXNoKEVsZW1lbnQuU3R5bGVzKTtFbGVtZW50LlNob3J0U3R5bGVzPXttYXJnaW46e30scGFkZGluZzp7fSxib3JkZXI6e30sYm9yZGVyV2lkdGg6e30sYm9yZGVyU3R5bGU6e30sYm9yZGVyQ29sb3I6e319OwpbIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLmVhY2goZnVuY3Rpb24ocSl7dmFyIHA9RWxlbWVudC5TaG9ydFN0eWxlczt2YXIgbD1FbGVtZW50LlN0eWxlcztbIm1hcmdpbiIsInBhZGRpbmciXS5lYWNoKGZ1bmN0aW9uKHIpe3ZhciBzPXIrcTtwW3JdW3NdPWxbc109IkBweCI7Cn0pO3ZhciBvPSJib3JkZXIiK3E7cC5ib3JkZXJbb109bFtvXT0iQHB4IEAgcmdiKEAsIEAsIEApIjt2YXIgbj1vKyJXaWR0aCIsaz1vKyJTdHlsZSIsbT1vKyJDb2xvciI7cFtvXT17fTtwLmJvcmRlcldpZHRoW25dPXBbb11bbl09bFtuXT0iQHB4IjtwLmJvcmRlclN0eWxlW2tdPXBbb11ba109bFtrXT0iQCI7CnAuYm9yZGVyQ29sb3JbbV09cFtvXVttXT1sW21dPSJyZ2IoQCwgQCwgQCkiO30pO30pKCk7KGZ1bmN0aW9uKCl7RWxlbWVudC5Qcm9wZXJ0aWVzLmV2ZW50cz17c2V0OmZ1bmN0aW9uKGIpe3RoaXMuYWRkRXZlbnRzKGIpO319O1tFbGVtZW50LFdpbmRvdyxEb2N1bWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHthZGRFdmVudDpmdW5jdGlvbihmLGgpe3ZhciBpPXRoaXMucmV0cmlldmUoImV2ZW50cyIse30pOwppZighaVtmXSl7aVtmXT17a2V5czpbXSx2YWx1ZXM6W119O31pZihpW2ZdLmtleXMuY29udGFpbnMoaCkpe3JldHVybiB0aGlzO31pW2ZdLmtleXMucHVzaChoKTt2YXIgZz1mLGI9RWxlbWVudC5FdmVudHNbZl0sZD1oLGo9dGhpcztpZihiKXtpZihiLm9uQWRkKXtiLm9uQWRkLmNhbGwodGhpcyxoLGYpOwp9aWYoYi5jb25kaXRpb24pe2Q9ZnVuY3Rpb24oayl7aWYoYi5jb25kaXRpb24uY2FsbCh0aGlzLGssZikpe3JldHVybiBoLmNhbGwodGhpcyxrKTt9cmV0dXJuIHRydWU7fTt9aWYoYi5iYXNlKXtnPUZ1bmN0aW9uLmZyb20oYi5iYXNlKS5jYWxsKHRoaXMsZik7fX12YXIgZT1mdW5jdGlvbigpe3JldHVybiBoLmNhbGwoaik7Cn07dmFyIGM9RWxlbWVudC5OYXRpdmVFdmVudHNbZ107aWYoYyl7aWYoYz09Mil7ZT1mdW5jdGlvbihrKXtrPW5ldyBET01FdmVudChrLGouZ2V0V2luZG93KCkpO2lmKGQuY2FsbChqLGspPT09ZmFsc2Upe2suc3RvcCgpO319O310aGlzLmFkZExpc3RlbmVyKGcsZSxhcmd1bWVudHNbMl0pOwp9aVtmXS52YWx1ZXMucHVzaChlKTtyZXR1cm4gdGhpczt9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGUsZCl7dmFyIGM9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIik7aWYoIWN8fCFjW2VdKXtyZXR1cm4gdGhpczt9dmFyIGg9Y1tlXTt2YXIgYj1oLmtleXMuaW5kZXhPZihkKTsKaWYoYj09LTEpe3JldHVybiB0aGlzO312YXIgZz1oLnZhbHVlc1tiXTtkZWxldGUgaC5rZXlzW2JdO2RlbGV0ZSBoLnZhbHVlc1tiXTt2YXIgZj1FbGVtZW50LkV2ZW50c1tlXTtpZihmKXtpZihmLm9uUmVtb3ZlKXtmLm9uUmVtb3ZlLmNhbGwodGhpcyxkLGUpO31pZihmLmJhc2Upe2U9RnVuY3Rpb24uZnJvbShmLmJhc2UpLmNhbGwodGhpcyxlKTsKfX1yZXR1cm4oRWxlbWVudC5OYXRpdmVFdmVudHNbZV0pP3RoaXMucmVtb3ZlTGlzdGVuZXIoZSxnLGFyZ3VtZW50c1syXSk6dGhpczt9LGFkZEV2ZW50czpmdW5jdGlvbihiKXtmb3IodmFyIGMgaW4gYil7dGhpcy5hZGRFdmVudChjLGJbY10pO31yZXR1cm4gdGhpczsKfSxyZW1vdmVFdmVudHM6ZnVuY3Rpb24oYil7dmFyIGQ7aWYodHlwZU9mKGIpPT0ib2JqZWN0Iil7Zm9yKGQgaW4gYil7dGhpcy5yZW1vdmVFdmVudChkLGJbZF0pO31yZXR1cm4gdGhpczt9dmFyIGM9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIik7aWYoIWMpe3JldHVybiB0aGlzOwp9aWYoIWIpe2ZvcihkIGluIGMpe3RoaXMucmVtb3ZlRXZlbnRzKGQpO310aGlzLmVsaW1pbmF0ZSgiZXZlbnRzIik7fWVsc2V7aWYoY1tiXSl7Y1tiXS5rZXlzLmVhY2goZnVuY3Rpb24oZSl7dGhpcy5yZW1vdmVFdmVudChiLGUpO30sdGhpcyk7ZGVsZXRlIGNbYl07Cn19cmV0dXJuIHRoaXM7fSxmaXJlRXZlbnQ6ZnVuY3Rpb24oZSxjLGIpe3ZhciBkPXRoaXMucmV0cmlldmUoImV2ZW50cyIpO2lmKCFkfHwhZFtlXSl7cmV0dXJuIHRoaXM7fWM9QXJyYXkuZnJvbShjKTtkW2VdLmtleXMuZWFjaChmdW5jdGlvbihmKXtpZihiKXtmLmRlbGF5KGIsdGhpcyxjKTsKfWVsc2V7Zi5hcHBseSh0aGlzLGMpO319LHRoaXMpO3JldHVybiB0aGlzO30sY2xvbmVFdmVudHM6ZnVuY3Rpb24oZSxkKXtlPWRvY3VtZW50LmlkKGUpO3ZhciBjPWUucmV0cmlldmUoImV2ZW50cyIpO2lmKCFjKXtyZXR1cm4gdGhpczt9aWYoIWQpe2Zvcih2YXIgYiBpbiBjKXt0aGlzLmNsb25lRXZlbnRzKGUsYik7Cn19ZWxzZXtpZihjW2RdKXtjW2RdLmtleXMuZWFjaChmdW5jdGlvbihmKXt0aGlzLmFkZEV2ZW50KGQsZik7fSx0aGlzKTt9fXJldHVybiB0aGlzO319KTtFbGVtZW50Lk5hdGl2ZUV2ZW50cz17Y2xpY2s6MixkYmxjbGljazoyLG1vdXNldXA6Mixtb3VzZWRvd246Mixjb250ZXh0bWVudToyLG1vdXNld2hlZWw6MixET01Nb3VzZVNjcm9sbDoyLG1vdXNlb3ZlcjoyLG1vdXNlb3V0OjIsbW91c2Vtb3ZlOjIsc2VsZWN0c3RhcnQ6MixzZWxlY3RlbmQ6MixrZXlkb3duOjIsa2V5cHJlc3M6MixrZXl1cDoyLG9yaWVudGF0aW9uY2hhbmdlOjIsdG91Y2hzdGFydDoyLHRvdWNobW92ZToyLHRvdWNoZW5kOjIsdG91Y2hjYW5jZWw6MixnZXN0dXJlc3RhcnQ6MixnZXN0dXJlY2hhbmdlOjIsZ2VzdHVyZWVuZDoyLGZvY3VzOjIsYmx1cjoyLGNoYW5nZToyLHJlc2V0OjIsc2VsZWN0OjIsc3VibWl0OjIscGFzdGU6MixpbnB1dDoyLGxvYWQ6Mix1bmxvYWQ6MSxiZWZvcmV1bmxvYWQ6MixyZXNpemU6MSxtb3ZlOjEsRE9NQ29udGVudExvYWRlZDoxLHJlYWR5c3RhdGVjaGFuZ2U6MSxlcnJvcjoxLGFib3J0OjEsc2Nyb2xsOjF9OwpFbGVtZW50LkV2ZW50cz17bW91c2V3aGVlbDp7YmFzZTooQnJvd3Nlci5maXJlZm94KT8iRE9NTW91c2VTY3JvbGwiOiJtb3VzZXdoZWVsIn19O2lmKCJvbm1vdXNlZW50ZXIiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCl7RWxlbWVudC5OYXRpdmVFdmVudHMubW91c2VlbnRlcj1FbGVtZW50Lk5hdGl2ZUV2ZW50cy5tb3VzZWxlYXZlPTI7Cn1lbHNle3ZhciBhPWZ1bmN0aW9uKGIpe3ZhciBjPWIucmVsYXRlZFRhcmdldDtpZihjPT1udWxsKXtyZXR1cm4gdHJ1ZTt9aWYoIWMpe3JldHVybiBmYWxzZTt9cmV0dXJuKGMhPXRoaXMmJmMucHJlZml4IT0ieHVsIiYmdHlwZU9mKHRoaXMpIT0iZG9jdW1lbnQiJiYhdGhpcy5jb250YWlucyhjKSk7Cn07RWxlbWVudC5FdmVudHMubW91c2VlbnRlcj17YmFzZToibW91c2VvdmVyIixjb25kaXRpb246YX07RWxlbWVudC5FdmVudHMubW91c2VsZWF2ZT17YmFzZToibW91c2VvdXQiLGNvbmRpdGlvbjphfTt9aWYoIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKXtFbGVtZW50Lk5hdGl2ZUV2ZW50cy5wcm9wZXJ0eWNoYW5nZT0yOwpFbGVtZW50LkV2ZW50cy5jaGFuZ2U9e2Jhc2U6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLnR5cGU7cmV0dXJuKHRoaXMuZ2V0KCJ0YWciKT09ImlucHV0IiYmKGI9PSJyYWRpbyJ8fGI9PSJjaGVja2JveCIpKT8icHJvcGVydHljaGFuZ2UiOiJjaGFuZ2UiO30sY29uZGl0aW9uOmZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnR5cGUhPSJyYWRpbyJ8fChiLmV2ZW50LnByb3BlcnR5TmFtZT09ImNoZWNrZWQiJiZ0aGlzLmNoZWNrZWQpOwp9fTt9RWxlbWVudC5FdmVudHM9bmV3IEhhc2goRWxlbWVudC5FdmVudHMpO30pKCk7KGZ1bmN0aW9uKCl7dmFyIGM9ISF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcjtFbGVtZW50Lk5hdGl2ZUV2ZW50cy5mb2N1c2luPUVsZW1lbnQuTmF0aXZlRXZlbnRzLmZvY3Vzb3V0PTI7CnZhciBrPWZ1bmN0aW9uKGwsbSxuLG8scCl7d2hpbGUocCYmcCE9bCl7aWYobShwLG8pKXtyZXR1cm4gbi5jYWxsKHAsbyxwKTt9cD1kb2N1bWVudC5pZChwLnBhcmVudE5vZGUpO319O3ZhciBhPXttb3VzZWVudGVyOntiYXNlOiJtb3VzZW92ZXIifSxtb3VzZWxlYXZlOntiYXNlOiJtb3VzZW91dCJ9LGZvY3VzOntiYXNlOiJmb2N1cyIrKGM/IiI6ImluIiksY2FwdHVyZTp0cnVlfSxibHVyOntiYXNlOmM/ImJsdXIiOiJmb2N1c291dCIsY2FwdHVyZTp0cnVlfX07CnZhciBiPSIkZGVsZWdhdGlvbjoiO3ZhciBpPWZ1bmN0aW9uKGwpe3JldHVybntiYXNlOiJmb2N1c2luIixyZW1vdmU6ZnVuY3Rpb24obSxvKXt2YXIgcD1tLnJldHJpZXZlKGIrbCsibGlzdGVuZXJzIix7fSlbb107aWYocCYmcC5mb3Jtcyl7Zm9yKHZhciBuPXAuZm9ybXMubGVuZ3RoOwpuLS07KXtwLmZvcm1zW25dLnJlbW92ZUV2ZW50KGwscC5mbnNbbl0pO319fSxsaXN0ZW46ZnVuY3Rpb24oeCxyLHYsbix0LHMpe3ZhciBvPSh0LmdldCgidGFnIik9PSJmb3JtIik/dDpuLnRhcmdldC5nZXRQYXJlbnQoImZvcm0iKTtpZighbyl7cmV0dXJuO312YXIgdT14LnJldHJpZXZlKGIrbCsibGlzdGVuZXJzIix7fSkscD11W3NdfHx7Zm9ybXM6W10sZm5zOltdfSxtPXAuZm9ybXMsdz1wLmZuczsKaWYobS5pbmRleE9mKG8pIT0tMSl7cmV0dXJuO31tLnB1c2gobyk7dmFyIHE9ZnVuY3Rpb24oeSl7ayh4LHIsdix5LHQpO307by5hZGRFdmVudChsLHEpO3cucHVzaChxKTt1W3NdPXA7eC5zdG9yZShiK2wrImxpc3RlbmVycyIsdSk7fX07fTt2YXIgZD1mdW5jdGlvbihsKXtyZXR1cm57YmFzZToiZm9jdXNpbiIsbGlzdGVuOmZ1bmN0aW9uKG0sbixwLHEscil7dmFyIG89e2JsdXI6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUV2ZW50cyhvKTsKfX07b1tsXT1mdW5jdGlvbihzKXtrKG0sbixwLHMscik7fTtxLnRhcmdldC5hZGRFdmVudHMobyk7fX07fTtpZighYyl7T2JqZWN0LmFwcGVuZChhLHtzdWJtaXQ6aSgic3VibWl0IikscmVzZXQ6aSgicmVzZXQiKSxjaGFuZ2U6ZCgiY2hhbmdlIiksc2VsZWN0OmQoInNlbGVjdCIpfSk7Cn12YXIgaD1FbGVtZW50LnByb3RvdHlwZSxmPWguYWRkRXZlbnQsaj1oLnJlbW92ZUV2ZW50O3ZhciBlPWZ1bmN0aW9uKGwsbSl7cmV0dXJuIGZ1bmN0aW9uKHIscSxuKXtpZihyLmluZGV4T2YoIjpyZWxheSIpPT0tMSl7cmV0dXJuIGwuY2FsbCh0aGlzLHIscSxuKTsKfXZhciBvPVNsaWNrLnBhcnNlKHIpLmV4cHJlc3Npb25zWzBdWzBdO2lmKG8ucHNldWRvc1swXS5rZXkhPSJyZWxheSIpe3JldHVybiBsLmNhbGwodGhpcyxyLHEsbik7fXZhciBwPW8udGFnO28ucHNldWRvcy5zbGljZSgxKS5lYWNoKGZ1bmN0aW9uKHMpe3ArPSI6IitzLmtleSsocy52YWx1ZT8iKCIrcy52YWx1ZSsiKSI6IiIpOwp9KTtsLmNhbGwodGhpcyxyLHEpO3JldHVybiBtLmNhbGwodGhpcyxwLG8ucHNldWRvc1swXS52YWx1ZSxxKTt9O307dmFyIGc9e2FkZEV2ZW50OmZ1bmN0aW9uKHYscSx4KXt2YXIgdD10aGlzLnJldHJpZXZlKCIkZGVsZWdhdGVzIix7fSkscj10W3ZdO2lmKHIpe2Zvcih2YXIgeSBpbiByKXtpZihyW3ldLmZuPT14JiZyW3ldLm1hdGNoPT1xKXtyZXR1cm4gdGhpczsKfX19dmFyIHA9dix1PXEsbz14LG49YVt2XXx8e307dj1uLmJhc2V8fHA7cT1mdW5jdGlvbihCKXtyZXR1cm4gU2xpY2subWF0Y2goQix1KTt9O3ZhciB3PUVsZW1lbnQuRXZlbnRzW3BdO2lmKHcmJncuY29uZGl0aW9uKXt2YXIgbD1xLG09dy5jb25kaXRpb247cT1mdW5jdGlvbihDLEIpe3JldHVybiBsKEMsQikmJm0uY2FsbChDLEIsdik7Cn07fXZhciB6PXRoaXMscz1TdHJpbmcudW5pcXVlSUQoKTt2YXIgQT1uLmxpc3Rlbj9mdW5jdGlvbihCLEMpe2lmKCFDJiZCJiZCLnRhcmdldCl7Qz1CLnRhcmdldDt9aWYoQyl7bi5saXN0ZW4oeixxLHgsQixDLHMpO319OmZ1bmN0aW9uKEIsQyl7aWYoIUMmJkImJkIudGFyZ2V0KXtDPUIudGFyZ2V0Owp9aWYoQyl7ayh6LHEseCxCLEMpO319O2lmKCFyKXtyPXt9O31yW3NdPXttYXRjaDp1LGZuOm8sZGVsZWdhdG9yOkF9O3RbcF09cjtyZXR1cm4gZi5jYWxsKHRoaXMsdixBLG4uY2FwdHVyZSk7fSxyZW1vdmVFdmVudDpmdW5jdGlvbihyLG4sdCx1KXt2YXIgcT10aGlzLnJldHJpZXZlKCIkZGVsZWdhdGVzIix7fSkscD1xW3JdOwppZighcCl7cmV0dXJuIHRoaXM7fWlmKHUpe3ZhciBtPXIsdz1wW3VdLmRlbGVnYXRvcixsPWFbcl18fHt9O3I9bC5iYXNlfHxtO2lmKGwucmVtb3ZlKXtsLnJlbW92ZSh0aGlzLHUpO31kZWxldGUgcFt1XTtxW21dPXA7cmV0dXJuIGouY2FsbCh0aGlzLHIsdyk7fXZhciBvLHY7CmlmKHQpe2ZvcihvIGluIHApe3Y9cFtvXTtpZih2Lm1hdGNoPT1uJiZ2LmZuPT10KXtyZXR1cm4gZy5yZW1vdmVFdmVudC5jYWxsKHRoaXMscixuLHQsbyk7fX19ZWxzZXtmb3IobyBpbiBwKXt2PXBbb107aWYodi5tYXRjaD09bil7Zy5yZW1vdmVFdmVudC5jYWxsKHRoaXMscixuLHYuZm4sbyk7Cn19fXJldHVybiB0aGlzO319O1tFbGVtZW50LFdpbmRvdyxEb2N1bWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHthZGRFdmVudDplKGYsZy5hZGRFdmVudCkscmVtb3ZlRXZlbnQ6ZShqLGcucmVtb3ZlRXZlbnQpfSk7fSkoKTsoZnVuY3Rpb24oKXt2YXIgaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpoLnN0eWxlLmhlaWdodD0iMCI7aC5hcHBlbmRDaGlsZChlKTt2YXIgZD0oZS5vZmZzZXRQYXJlbnQ9PT1oKTtoPWU9bnVsbDt2YXIgbD1mdW5jdGlvbihtKXtyZXR1cm4gayhtLCJwb3NpdGlvbiIpIT0ic3RhdGljInx8YShtKTt9O3ZhciBpPWZ1bmN0aW9uKG0pe3JldHVybiBsKG0pfHwoL14oPzp0YWJsZXx0ZHx0aCkkL2kpLnRlc3QobS50YWdOYW1lKTsKfTtFbGVtZW50LmltcGxlbWVudCh7c2Nyb2xsVG86ZnVuY3Rpb24obSxuKXtpZihhKHRoaXMpKXt0aGlzLmdldFdpbmRvdygpLnNjcm9sbFRvKG0sbik7fWVsc2V7dGhpcy5zY3JvbGxMZWZ0PW07dGhpcy5zY3JvbGxUb3A9bjt9cmV0dXJuIHRoaXM7fSxnZXRTaXplOmZ1bmN0aW9uKCl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0U2l6ZSgpOwp9cmV0dXJue3g6dGhpcy5vZmZzZXRXaWR0aCx5OnRoaXMub2Zmc2V0SGVpZ2h0fTt9LGdldFNjcm9sbFNpemU6ZnVuY3Rpb24oKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRTY3JvbGxTaXplKCk7fXJldHVybnt4OnRoaXMuc2Nyb2xsV2lkdGgseTp0aGlzLnNjcm9sbEhlaWdodH07Cn0sZ2V0U2Nyb2xsOmZ1bmN0aW9uKCl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0U2Nyb2xsKCk7fXJldHVybnt4OnRoaXMuc2Nyb2xsTGVmdCx5OnRoaXMuc2Nyb2xsVG9wfTt9LGdldFNjcm9sbHM6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLnBhcmVudE5vZGUsbT17eDowLHk6MH07CndoaWxlKG4mJiFhKG4pKXttLngrPW4uc2Nyb2xsTGVmdDttLnkrPW4uc2Nyb2xsVG9wO249bi5wYXJlbnROb2RlO31yZXR1cm4gbTt9LGdldE9mZnNldFBhcmVudDpkP2Z1bmN0aW9uKCl7dmFyIG09dGhpcztpZihhKG0pfHxrKG0sInBvc2l0aW9uIik9PSJmaXhlZCIpe3JldHVybiBudWxsOwp9dmFyIG49KGsobSwicG9zaXRpb24iKT09InN0YXRpYyIpP2k6bDt3aGlsZSgobT1tLnBhcmVudE5vZGUpKXtpZihuKG0pKXtyZXR1cm4gbTt9fXJldHVybiBudWxsO306ZnVuY3Rpb24oKXt2YXIgbT10aGlzO2lmKGEobSl8fGsobSwicG9zaXRpb24iKT09ImZpeGVkIil7cmV0dXJuIG51bGw7Cn10cnl7cmV0dXJuIG0ub2Zmc2V0UGFyZW50O31jYXRjaChuKXt9cmV0dXJuIG51bGw7fSxnZXRPZmZzZXRzOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QmJiFCcm93c2VyLlBsYXRmb3JtLmlvcyl7dmFyIHI9dGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPWRvY3VtZW50LmlkKHRoaXMuZ2V0RG9jdW1lbnQoKS5kb2N1bWVudEVsZW1lbnQpLHE9by5nZXRTY3JvbGwoKSx0PXRoaXMuZ2V0U2Nyb2xscygpLHM9KGsodGhpcywicG9zaXRpb24iKT09ImZpeGVkIik7CnJldHVybnt4OnIubGVmdC50b0ludCgpK3QueCsoKHMpPzA6cS54KS1vLmNsaWVudExlZnQseTpyLnRvcC50b0ludCgpK3QueSsoKHMpPzA6cS55KS1vLmNsaWVudFRvcH07fXZhciBuPXRoaXMsbT17eDowLHk6MH07aWYoYSh0aGlzKSl7cmV0dXJuIG07fXdoaWxlKG4mJiFhKG4pKXttLngrPW4ub2Zmc2V0TGVmdDsKbS55Kz1uLm9mZnNldFRvcDtpZihCcm93c2VyLmZpcmVmb3gpe2lmKCFjKG4pKXttLngrPWIobik7bS55Kz1nKG4pO312YXIgcD1uLnBhcmVudE5vZGU7aWYocCYmayhwLCJvdmVyZmxvdyIpIT0idmlzaWJsZSIpe20ueCs9YihwKTttLnkrPWcocCk7fX1lbHNle2lmKG4hPXRoaXMmJkJyb3dzZXIuc2FmYXJpKXttLngrPWIobik7Cm0ueSs9ZyhuKTt9fW49bi5vZmZzZXRQYXJlbnQ7fWlmKEJyb3dzZXIuZmlyZWZveCYmIWModGhpcykpe20ueC09Yih0aGlzKTttLnktPWcodGhpcyk7fXJldHVybiBtO30sZ2V0UG9zaXRpb246ZnVuY3Rpb24ocCl7dmFyIHE9dGhpcy5nZXRPZmZzZXRzKCksbj10aGlzLmdldFNjcm9sbHMoKTsKdmFyIG09e3g6cS54LW4ueCx5OnEueS1uLnl9O2lmKHAmJihwPWRvY3VtZW50LmlkKHApKSl7dmFyIG89cC5nZXRQb3NpdGlvbigpO3JldHVybnt4Om0ueC1vLngtYihwKSx5Om0ueS1vLnktZyhwKX07fXJldHVybiBtO30sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24obyl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0Q29vcmRpbmF0ZXMoKTsKfXZhciBtPXRoaXMuZ2V0UG9zaXRpb24obyksbj10aGlzLmdldFNpemUoKTt2YXIgcD17bGVmdDptLngsdG9wOm0ueSx3aWR0aDpuLngsaGVpZ2h0Om4ueX07cC5yaWdodD1wLmxlZnQrcC53aWR0aDtwLmJvdHRvbT1wLnRvcCtwLmhlaWdodDtyZXR1cm4gcDt9LGNvbXB1dGVQb3NpdGlvbjpmdW5jdGlvbihtKXtyZXR1cm57bGVmdDptLngtaih0aGlzLCJtYXJnaW4tbGVmdCIpLHRvcDptLnktaih0aGlzLCJtYXJnaW4tdG9wIil9Owp9LHNldFBvc2l0aW9uOmZ1bmN0aW9uKG0pe3JldHVybiB0aGlzLnNldFN0eWxlcyh0aGlzLmNvbXB1dGVQb3NpdGlvbihtKSk7fX0pO1tEb2N1bWVudCxXaW5kb3ddLmludm9rZSgiaW1wbGVtZW50Iix7Z2V0U2l6ZTpmdW5jdGlvbigpe3ZhciBtPWYodGhpcyk7cmV0dXJue3g6bS5jbGllbnRXaWR0aCx5Om0uY2xpZW50SGVpZ2h0fTsKfSxnZXRTY3JvbGw6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLmdldFdpbmRvdygpLG09Zih0aGlzKTtyZXR1cm57eDpuLnBhZ2VYT2Zmc2V0fHxtLnNjcm9sbExlZnQseTpuLnBhZ2VZT2Zmc2V0fHxtLnNjcm9sbFRvcH07fSxnZXRTY3JvbGxTaXplOmZ1bmN0aW9uKCl7dmFyIG89Zih0aGlzKSxuPXRoaXMuZ2V0U2l6ZSgpLG09dGhpcy5nZXREb2N1bWVudCgpLmJvZHk7CnJldHVybnt4Ok1hdGgubWF4KG8uc2Nyb2xsV2lkdGgsbS5zY3JvbGxXaWR0aCxuLngpLHk6TWF0aC5tYXgoby5zY3JvbGxIZWlnaHQsbS5zY3JvbGxIZWlnaHQsbi55KX07fSxnZXRQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybnt4OjAseTowfTt9LGdldENvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7dmFyIG09dGhpcy5nZXRTaXplKCk7CnJldHVybnt0b3A6MCxsZWZ0OjAsYm90dG9tOm0ueSxyaWdodDptLngsaGVpZ2h0Om0ueSx3aWR0aDptLnh9O319KTt2YXIgaz1FbGVtZW50LmdldENvbXB1dGVkU3R5bGU7ZnVuY3Rpb24gaihtLG4pe3JldHVybiBrKG0sbikudG9JbnQoKXx8MDt9ZnVuY3Rpb24gYyhtKXtyZXR1cm4gayhtLCItbW96LWJveC1zaXppbmciKT09ImJvcmRlci1ib3giOwp9ZnVuY3Rpb24gZyhtKXtyZXR1cm4gaihtLCJib3JkZXItdG9wLXdpZHRoIik7fWZ1bmN0aW9uIGIobSl7cmV0dXJuIGoobSwiYm9yZGVyLWxlZnQtd2lkdGgiKTt9ZnVuY3Rpb24gYShtKXtyZXR1cm4oL14oPzpib2R5fGh0bWwpJC9pKS50ZXN0KG0udGFnTmFtZSk7Cn1mdW5jdGlvbiBmKG0pe3ZhciBuPW0uZ2V0RG9jdW1lbnQoKTtyZXR1cm4oIW4uY29tcGF0TW9kZXx8bi5jb21wYXRNb2RlPT0iQ1NTMUNvbXBhdCIpP24uaHRtbDpuLmJvZHk7fX0pKCk7RWxlbWVudC5hbGlhcyh7cG9zaXRpb246InNldFBvc2l0aW9uIn0pO1tXaW5kb3csRG9jdW1lbnQsRWxlbWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTaXplKCkueTsKfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNpemUoKS54O30sZ2V0U2Nyb2xsVG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsKCkueTt9LGdldFNjcm9sbExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGwoKS54Owp9LGdldFNjcm9sbEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbFNpemUoKS55O30sZ2V0U2Nyb2xsV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGxTaXplKCkueDt9LGdldFRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBvc2l0aW9uKCkueTsKfSxnZXRMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UG9zaXRpb24oKS54O319KTsoZnVuY3Rpb24oKXt2YXIgZj10aGlzLkZ4PW5ldyBDbGFzcyh7SW1wbGVtZW50czpbQ2hhaW4sRXZlbnRzLE9wdGlvbnNdLG9wdGlvbnM6e2Zwczo2MCx1bml0OmZhbHNlLGR1cmF0aW9uOjUwMCxmcmFtZXM6bnVsbCxmcmFtZVNraXA6dHJ1ZSxsaW5rOiJpZ25vcmUifSxpbml0aWFsaXplOmZ1bmN0aW9uKGcpe3RoaXMuc3ViamVjdD10aGlzLnN1YmplY3R8fHRoaXM7CnRoaXMuc2V0T3B0aW9ucyhnKTt9LGdldFRyYW5zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZyl7cmV0dXJuIC0oTWF0aC5jb3MoTWF0aC5QSSpnKS0xKS8yO307fSxzdGVwOmZ1bmN0aW9uKGcpe2lmKHRoaXMub3B0aW9ucy5mcmFtZVNraXApe3ZhciBoPSh0aGlzLnRpbWUhPW51bGwpPyhnLXRoaXMudGltZSk6MCxpPWgvdGhpcy5mcmFtZUludGVydmFsOwp0aGlzLnRpbWU9Zzt0aGlzLmZyYW1lKz1pO31lbHNle3RoaXMuZnJhbWUrKzt9aWYodGhpcy5mcmFtZTx0aGlzLmZyYW1lcyl7dmFyIGo9dGhpcy50cmFuc2l0aW9uKHRoaXMuZnJhbWUvdGhpcy5mcmFtZXMpO3RoaXMuc2V0KHRoaXMuY29tcHV0ZSh0aGlzLmZyb20sdGhpcy50byxqKSk7Cn1lbHNle3RoaXMuZnJhbWU9dGhpcy5mcmFtZXM7dGhpcy5zZXQodGhpcy5jb21wdXRlKHRoaXMuZnJvbSx0aGlzLnRvLDEpKTt0aGlzLnN0b3AoKTt9fSxzZXQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGc7fSxjb21wdXRlOmZ1bmN0aW9uKGksaCxnKXtyZXR1cm4gZi5jb21wdXRlKGksaCxnKTsKfSxjaGVjazpmdW5jdGlvbigpe2lmKCF0aGlzLmlzUnVubmluZygpKXtyZXR1cm4gdHJ1ZTt9c3dpdGNoKHRoaXMub3B0aW9ucy5saW5rKXtjYXNlImNhbmNlbCI6dGhpcy5jYW5jZWwoKTtyZXR1cm4gdHJ1ZTtjYXNlImNoYWluIjp0aGlzLmNoYWluKHRoaXMuY2FsbGVyLnBhc3MoYXJndW1lbnRzLHRoaXMpKTsKcmV0dXJuIGZhbHNlO31yZXR1cm4gZmFsc2U7fSxzdGFydDpmdW5jdGlvbihrLGope2lmKCF0aGlzLmNoZWNrKGssaikpe3JldHVybiB0aGlzO310aGlzLmZyb209azt0aGlzLnRvPWo7dGhpcy5mcmFtZT0odGhpcy5vcHRpb25zLmZyYW1lU2tpcCk/MDotMTt0aGlzLnRpbWU9bnVsbDsKdGhpcy50cmFuc2l0aW9uPXRoaXMuZ2V0VHJhbnNpdGlvbigpO3ZhciBpPXRoaXMub3B0aW9ucy5mcmFtZXMsaD10aGlzLm9wdGlvbnMuZnBzLGc9dGhpcy5vcHRpb25zLmR1cmF0aW9uO3RoaXMuZHVyYXRpb249Zi5EdXJhdGlvbnNbZ118fGcudG9JbnQoKTt0aGlzLmZyYW1lSW50ZXJ2YWw9MTAwMC9oOwp0aGlzLmZyYW1lcz1pfHxNYXRoLnJvdW5kKHRoaXMuZHVyYXRpb24vdGhpcy5mcmFtZUludGVydmFsKTt0aGlzLmZpcmVFdmVudCgic3RhcnQiLHRoaXMuc3ViamVjdCk7Yi5jYWxsKHRoaXMsaCk7cmV0dXJuIHRoaXM7fSxzdG9wOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1J1bm5pbmcoKSl7dGhpcy50aW1lPW51bGw7CmQuY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpO2lmKHRoaXMuZnJhbWVzPT10aGlzLmZyYW1lKXt0aGlzLmZpcmVFdmVudCgiY29tcGxldGUiLHRoaXMuc3ViamVjdCk7aWYoIXRoaXMuY2FsbENoYWluKCkpe3RoaXMuZmlyZUV2ZW50KCJjaGFpbkNvbXBsZXRlIix0aGlzLnN1YmplY3QpOwp9fWVsc2V7dGhpcy5maXJlRXZlbnQoInN0b3AiLHRoaXMuc3ViamVjdCk7fX1yZXR1cm4gdGhpczt9LGNhbmNlbDpmdW5jdGlvbigpe2lmKHRoaXMuaXNSdW5uaW5nKCkpe3RoaXMudGltZT1udWxsO2QuY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpO3RoaXMuZnJhbWU9dGhpcy5mcmFtZXM7CnRoaXMuZmlyZUV2ZW50KCJjYW5jZWwiLHRoaXMuc3ViamVjdCkuY2xlYXJDaGFpbigpO31yZXR1cm4gdGhpczt9LHBhdXNlOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1J1bm5pbmcoKSl7dGhpcy50aW1lPW51bGw7ZC5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7fXJldHVybiB0aGlzOwp9LHJlc3VtZTpmdW5jdGlvbigpe2lmKCh0aGlzLmZyYW1lPHRoaXMuZnJhbWVzKSYmIXRoaXMuaXNSdW5uaW5nKCkpe2IuY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpO31yZXR1cm4gdGhpczt9LGlzUnVubmluZzpmdW5jdGlvbigpe3ZhciBnPWVbdGhpcy5vcHRpb25zLmZwc107CnJldHVybiBnJiZnLmNvbnRhaW5zKHRoaXMpO319KTtmLmNvbXB1dGU9ZnVuY3Rpb24oaSxoLGcpe3JldHVybihoLWkpKmcraTt9O2YuRHVyYXRpb25zPXsic2hvcnQiOjI1MCxub3JtYWw6NTAwLCJsb25nIjoxMDAwfTt2YXIgZT17fSxjPXt9O3ZhciBhPWZ1bmN0aW9uKCl7dmFyIGg9RGF0ZS5ub3coKTsKZm9yKHZhciBqPXRoaXMubGVuZ3RoO2otLTspe3ZhciBnPXRoaXNbal07aWYoZyl7Zy5zdGVwKGgpO319fTt2YXIgYj1mdW5jdGlvbihoKXt2YXIgZz1lW2hdfHwoZVtoXT1bXSk7Zy5wdXNoKHRoaXMpO2lmKCFjW2hdKXtjW2hdPWEucGVyaW9kaWNhbChNYXRoLnJvdW5kKDEwMDAvaCksZyk7Cn19O3ZhciBkPWZ1bmN0aW9uKGgpe3ZhciBnPWVbaF07aWYoZyl7Zy5lcmFzZSh0aGlzKTtpZighZy5sZW5ndGgmJmNbaF0pe2RlbGV0ZSBlW2hdO2NbaF09Y2xlYXJJbnRlcnZhbChjW2hdKTt9fX07fSkoKTtGeC5DU1M9bmV3IENsYXNzKHtFeHRlbmRzOkZ4LHByZXBhcmU6ZnVuY3Rpb24oYixlLGEpe2E9QXJyYXkuZnJvbShhKTsKdmFyIGg9YVswXSxnPWFbMV07aWYoZz09bnVsbCl7Zz1oO2g9Yi5nZXRTdHlsZShlKTt2YXIgYz10aGlzLm9wdGlvbnMudW5pdDtpZihjJiZoLnNsaWNlKC1jLmxlbmd0aCkhPWMmJnBhcnNlRmxvYXQoaCkhPTApe2Iuc2V0U3R5bGUoZSxnK2MpO3ZhciBkPWIuZ2V0Q29tcHV0ZWRTdHlsZShlKTsKaWYoISgvcHgkLy50ZXN0KGQpKSl7ZD1iLnN0eWxlWygicGl4ZWwtIitlKS5jYW1lbENhc2UoKV07aWYoZD09bnVsbCl7dmFyIGY9Yi5zdHlsZS5sZWZ0O2Iuc3R5bGUubGVmdD1nK2M7ZD1iLnN0eWxlLnBpeGVsTGVmdDtiLnN0eWxlLmxlZnQ9Zjt9fWg9KGd8fDEpLyhwYXJzZUZsb2F0KGQpfHwxKSoocGFyc2VGbG9hdChoKXx8MCk7CmIuc2V0U3R5bGUoZSxoK2MpO319cmV0dXJue2Zyb206dGhpcy5wYXJzZShoKSx0bzp0aGlzLnBhcnNlKGcpfTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2E9RnVuY3Rpb24uZnJvbShhKSgpO2E9KHR5cGVvZiBhPT0ic3RyaW5nIik/YS5zcGxpdCgiICIpOkFycmF5LmZyb20oYSk7CnJldHVybiBhLm1hcChmdW5jdGlvbihjKXtjPVN0cmluZyhjKTt2YXIgYj1mYWxzZTtPYmplY3QuZWFjaChGeC5DU1MuUGFyc2VycyxmdW5jdGlvbihmLGUpe2lmKGIpe3JldHVybjt9dmFyIGQ9Zi5wYXJzZShjKTtpZihkfHxkPT09MCl7Yj17dmFsdWU6ZCxwYXJzZXI6Zn07Cn19KTtiPWJ8fHt2YWx1ZTpjLHBhcnNlcjpGeC5DU1MuUGFyc2Vycy5TdHJpbmd9O3JldHVybiBiO30pO30sY29tcHV0ZTpmdW5jdGlvbihkLGMsYil7dmFyIGE9W107KE1hdGgubWluKGQubGVuZ3RoLGMubGVuZ3RoKSkudGltZXMoZnVuY3Rpb24oZSl7YS5wdXNoKHt2YWx1ZTpkW2VdLnBhcnNlci5jb21wdXRlKGRbZV0udmFsdWUsY1tlXS52YWx1ZSxiKSxwYXJzZXI6ZFtlXS5wYXJzZXJ9KTsKfSk7YS4kZmFtaWx5PUZ1bmN0aW9uLmZyb20oImZ4OmNzczp2YWx1ZSIpO3JldHVybiBhO30sc2VydmU6ZnVuY3Rpb24oYyxiKXtpZih0eXBlT2YoYykhPSJmeDpjc3M6dmFsdWUiKXtjPXRoaXMucGFyc2UoYyk7fXZhciBhPVtdO2MuZWFjaChmdW5jdGlvbihkKXthPWEuY29uY2F0KGQucGFyc2VyLnNlcnZlKGQudmFsdWUsYikpOwp9KTtyZXR1cm4gYTt9LHJlbmRlcjpmdW5jdGlvbihhLGQsYyxiKXthLnNldFN0eWxlKGQsdGhpcy5zZXJ2ZShjLGIpKTt9LHNlYXJjaDpmdW5jdGlvbihhKXtpZihGeC5DU1MuQ2FjaGVbYV0pe3JldHVybiBGeC5DU1MuQ2FjaGVbYV07fXZhciBjPXt9LGI9bmV3IFJlZ0V4cCgiXiIrYS5lc2NhcGVSZWdFeHAoKSsiJCIpOwpBcnJheS5lYWNoKGRvY3VtZW50LnN0eWxlU2hlZXRzLGZ1bmN0aW9uKGYsZSl7dmFyIGQ9Zi5ocmVmO2lmKGQmJmQuY29udGFpbnMoIjovLyIpJiYhZC5jb250YWlucyhkb2N1bWVudC5kb21haW4pKXtyZXR1cm47fXZhciBnPWYucnVsZXN8fGYuY3NzUnVsZXM7QXJyYXkuZWFjaChnLGZ1bmN0aW9uKGssaCl7aWYoIWsuc3R5bGUpe3JldHVybjsKfXZhciBqPShrLnNlbGVjdG9yVGV4dCk/ay5zZWxlY3RvclRleHQucmVwbGFjZSgvXlx3Ky8sZnVuY3Rpb24oaSl7cmV0dXJuIGkudG9Mb3dlckNhc2UoKTt9KTpudWxsO2lmKCFqfHwhYi50ZXN0KGopKXtyZXR1cm47fU9iamVjdC5lYWNoKEVsZW1lbnQuU3R5bGVzLGZ1bmN0aW9uKGwsaSl7aWYoIWsuc3R5bGVbaV18fEVsZW1lbnQuU2hvcnRTdHlsZXNbaV0pe3JldHVybjsKfWw9U3RyaW5nKGsuc3R5bGVbaV0pO2NbaV09KCgvXnJnYi8pLnRlc3QobCkpP2wucmdiVG9IZXgoKTpsO30pO30pO30pO3JldHVybiBGeC5DU1MuQ2FjaGVbYV09Yzt9fSk7RnguQ1NTLkNhY2hlPXt9O0Z4LkNTUy5QYXJzZXJzPXtDb2xvcjp7cGFyc2U6ZnVuY3Rpb24oYSl7aWYoYS5tYXRjaCgvXiNbMC05YS1mXXszLDZ9JC9pKSl7cmV0dXJuIGEuaGV4VG9SZ2IodHJ1ZSk7Cn1yZXR1cm4oKGE9YS5tYXRjaCgvKFxkKyksXHMqKFxkKyksXHMqKFxkKykvKSkpP1thWzFdLGFbMl0sYVszXV06ZmFsc2U7fSxjb21wdXRlOmZ1bmN0aW9uKGMsYixhKXtyZXR1cm4gYy5tYXAoZnVuY3Rpb24oZSxkKXtyZXR1cm4gTWF0aC5yb3VuZChGeC5jb21wdXRlKGNbZF0sYltkXSxhKSk7Cn0pO30sc2VydmU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWFwKE51bWJlcik7fX0sTnVtYmVyOntwYXJzZTpwYXJzZUZsb2F0LGNvbXB1dGU6RnguY29tcHV0ZSxzZXJ2ZTpmdW5jdGlvbihiLGEpe3JldHVybihhKT9iK2E6Yjt9fSxTdHJpbmc6e3BhcnNlOkZ1bmN0aW9uLmZyb20oZmFsc2UpLGNvbXB1dGU6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYTsKfSxzZXJ2ZTpmdW5jdGlvbihhKXtyZXR1cm4gYTt9fX07RnguQ1NTLlBhcnNlcnM9bmV3IEhhc2goRnguQ1NTLlBhcnNlcnMpO0Z4LlR3ZWVuPW5ldyBDbGFzcyh7RXh0ZW5kczpGeC5DU1MsaW5pdGlhbGl6ZTpmdW5jdGlvbihiLGEpe3RoaXMuZWxlbWVudD10aGlzLnN1YmplY3Q9ZG9jdW1lbnQuaWQoYik7CnRoaXMucGFyZW50KGEpO30sc2V0OmZ1bmN0aW9uKGIsYSl7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7YT1iO2I9dGhpcy5wcm9wZXJ0eXx8dGhpcy5vcHRpb25zLnByb3BlcnR5O310aGlzLnJlbmRlcih0aGlzLmVsZW1lbnQsYixhLHRoaXMub3B0aW9ucy51bml0KTsKcmV0dXJuIHRoaXM7fSxzdGFydDpmdW5jdGlvbihjLGUsZCl7aWYoIXRoaXMuY2hlY2soYyxlLGQpKXtyZXR1cm4gdGhpczt9dmFyIGI9QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpO3RoaXMucHJvcGVydHk9dGhpcy5vcHRpb25zLnByb3BlcnR5fHxiLnNoaWZ0KCk7dmFyIGE9dGhpcy5wcmVwYXJlKHRoaXMuZWxlbWVudCx0aGlzLnByb3BlcnR5LGIpOwpyZXR1cm4gdGhpcy5wYXJlbnQoYS5mcm9tLGEudG8pO319KTtFbGVtZW50LlByb3BlcnRpZXMudHdlZW49e3NldDpmdW5jdGlvbihhKXt0aGlzLmdldCgidHdlZW4iKS5jYW5jZWwoKS5zZXRPcHRpb25zKGEpO3JldHVybiB0aGlzO30sZ2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZXRyaWV2ZSgidHdlZW4iKTsKaWYoIWEpe2E9bmV3IEZ4LlR3ZWVuKHRoaXMse2xpbms6ImNhbmNlbCJ9KTt0aGlzLnN0b3JlKCJ0d2VlbiIsYSk7fXJldHVybiBhO319O0VsZW1lbnQuaW1wbGVtZW50KHt0d2VlbjpmdW5jdGlvbihhLGMsYil7dGhpcy5nZXQoInR3ZWVuIikuc3RhcnQoYSxjLGIpOwpyZXR1cm4gdGhpczt9LGZhZGU6ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5nZXQoInR3ZWVuIiksZyxjPVsib3BhY2l0eSJdLmFwcGVuZChhcmd1bWVudHMpLGE7aWYoY1sxXT09bnVsbCl7Y1sxXT0idG9nZ2xlIjt9c3dpdGNoKGNbMV0pe2Nhc2UiaW4iOmc9InN0YXJ0IjsKY1sxXT0xO2JyZWFrO2Nhc2Uib3V0IjpnPSJzdGFydCI7Y1sxXT0wO2JyZWFrO2Nhc2Uic2hvdyI6Zz0ic2V0IjtjWzFdPTE7YnJlYWs7Y2FzZSJoaWRlIjpnPSJzZXQiO2NbMV09MDticmVhaztjYXNlInRvZ2dsZSI6dmFyIGI9dGhpcy5yZXRyaWV2ZSgiZmFkZTpmbGFnIix0aGlzLmdldFN0eWxlKCJvcGFjaXR5Iik9PTEpOwpnPSJzdGFydCI7Y1sxXT1iPzA6MTt0aGlzLnN0b3JlKCJmYWRlOmZsYWciLCFiKTthPXRydWU7YnJlYWs7ZGVmYXVsdDpnPSJzdGFydCI7fWlmKCFhKXt0aGlzLmVsaW1pbmF0ZSgiZmFkZTpmbGFnIik7fWVbZ10uYXBwbHkoZSxjKTt2YXIgZj1jW2MubGVuZ3RoLTFdOwppZihnPT0ic2V0Inx8ZiE9MCl7dGhpcy5zZXRTdHlsZSgidmlzaWJpbGl0eSIsZj09MD8iaGlkZGVuIjoidmlzaWJsZSIpO31lbHNle2UuY2hhaW4oZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc2V0U3R5bGUoInZpc2liaWxpdHkiLCJoaWRkZW4iKTt0aGlzLmNhbGxDaGFpbigpOwp9KTt9cmV0dXJuIHRoaXM7fSxoaWdobGlnaHQ6ZnVuY3Rpb24oYyxhKXtpZighYSl7YT10aGlzLnJldHJpZXZlKCJoaWdobGlnaHQ6b3JpZ2luYWwiLHRoaXMuZ2V0U3R5bGUoImJhY2tncm91bmQtY29sb3IiKSk7YT0oYT09InRyYW5zcGFyZW50Iik/IiNmZmYiOmE7Cn12YXIgYj10aGlzLmdldCgidHdlZW4iKTtiLnN0YXJ0KCJiYWNrZ3JvdW5kLWNvbG9yIixjfHwiI2ZmZmY4OCIsYSkuY2hhaW4oZnVuY3Rpb24oKXt0aGlzLnNldFN0eWxlKCJiYWNrZ3JvdW5kLWNvbG9yIix0aGlzLnJldHJpZXZlKCJoaWdobGlnaHQ6b3JpZ2luYWwiKSk7CmIuY2FsbENoYWluKCk7fS5iaW5kKHRoaXMpKTtyZXR1cm4gdGhpczt9fSk7RnguTW9ycGg9bmV3IENsYXNzKHtFeHRlbmRzOkZ4LkNTUyxpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5lbGVtZW50PXRoaXMuc3ViamVjdD1kb2N1bWVudC5pZChiKTt0aGlzLnBhcmVudChhKTsKfSxzZXQ6ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGE9PSJzdHJpbmciKXthPXRoaXMuc2VhcmNoKGEpO31mb3IodmFyIGIgaW4gYSl7dGhpcy5yZW5kZXIodGhpcy5lbGVtZW50LGIsYVtiXSx0aGlzLm9wdGlvbnMudW5pdCk7fXJldHVybiB0aGlzO30sY29tcHV0ZTpmdW5jdGlvbihlLGQsYyl7dmFyIGE9e307CmZvcih2YXIgYiBpbiBlKXthW2JdPXRoaXMucGFyZW50KGVbYl0sZFtiXSxjKTt9cmV0dXJuIGE7fSxzdGFydDpmdW5jdGlvbihiKXtpZighdGhpcy5jaGVjayhiKSl7cmV0dXJuIHRoaXM7fWlmKHR5cGVvZiBiPT0ic3RyaW5nIil7Yj10aGlzLnNlYXJjaChiKTt9dmFyIGU9e30sZD17fTsKZm9yKHZhciBjIGluIGIpe3ZhciBhPXRoaXMucHJlcGFyZSh0aGlzLmVsZW1lbnQsYyxiW2NdKTtlW2NdPWEuZnJvbTtkW2NdPWEudG87fXJldHVybiB0aGlzLnBhcmVudChlLGQpO319KTtFbGVtZW50LlByb3BlcnRpZXMubW9ycGg9e3NldDpmdW5jdGlvbihhKXt0aGlzLmdldCgibW9ycGgiKS5jYW5jZWwoKS5zZXRPcHRpb25zKGEpOwpyZXR1cm4gdGhpczt9LGdldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmV0cmlldmUoIm1vcnBoIik7aWYoIWEpe2E9bmV3IEZ4Lk1vcnBoKHRoaXMse2xpbms6ImNhbmNlbCJ9KTt0aGlzLnN0b3JlKCJtb3JwaCIsYSk7fXJldHVybiBhO319O0VsZW1lbnQuaW1wbGVtZW50KHttb3JwaDpmdW5jdGlvbihhKXt0aGlzLmdldCgibW9ycGgiKS5zdGFydChhKTsKcmV0dXJuIHRoaXM7fX0pO0Z4LmltcGxlbWVudCh7Z2V0VHJhbnNpdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucy50cmFuc2l0aW9ufHxGeC5UcmFuc2l0aW9ucy5TaW5lLmVhc2VJbk91dDtpZih0eXBlb2YgYT09InN0cmluZyIpe3ZhciBiPWEuc3BsaXQoIjoiKTsKYT1GeC5UcmFuc2l0aW9uczthPWFbYlswXV18fGFbYlswXS5jYXBpdGFsaXplKCldO2lmKGJbMV0pe2E9YVsiZWFzZSIrYlsxXS5jYXBpdGFsaXplKCkrKGJbMl0/YlsyXS5jYXBpdGFsaXplKCk6IiIpXTt9fXJldHVybiBhO319KTtGeC5UcmFuc2l0aW9uPWZ1bmN0aW9uKGMsYil7Yj1BcnJheS5mcm9tKGIpOwp2YXIgYT1mdW5jdGlvbihkKXtyZXR1cm4gYyhkLGIpO307cmV0dXJuIE9iamVjdC5hcHBlbmQoYSx7ZWFzZUluOmEsZWFzZU91dDpmdW5jdGlvbihkKXtyZXR1cm4gMS1jKDEtZCxiKTt9LGVhc2VJbk91dDpmdW5jdGlvbihkKXtyZXR1cm4oZDw9MC41P2MoMipkLGIpOigyLWMoMiooMS1kKSxiKSkpLzI7Cn19KTt9O0Z4LlRyYW5zaXRpb25zPXtsaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE7fX07RnguVHJhbnNpdGlvbnM9bmV3IEhhc2goRnguVHJhbnNpdGlvbnMpO0Z4LlRyYW5zaXRpb25zLmV4dGVuZD1mdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSl7RnguVHJhbnNpdGlvbnNbYl09bmV3IEZ4LlRyYW5zaXRpb24oYVtiXSk7Cn19O0Z4LlRyYW5zaXRpb25zLmV4dGVuZCh7UG93OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIE1hdGgucG93KGIsYSYmYVswXXx8Nik7fSxFeHBvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnBvdygyLDgqKGEtMSkpO30sQ2lyYzpmdW5jdGlvbihhKXtyZXR1cm4gMS1NYXRoLnNpbihNYXRoLmFjb3MoYSkpOwp9LFNpbmU6ZnVuY3Rpb24oYSl7cmV0dXJuIDEtTWF0aC5jb3MoYSpNYXRoLlBJLzIpO30sQmFjazpmdW5jdGlvbihiLGEpe2E9YSYmYVswXXx8MS42MTg7cmV0dXJuIE1hdGgucG93KGIsMikqKChhKzEpKmItYSk7fSxCb3VuY2U6ZnVuY3Rpb24oZil7dmFyIGU7Zm9yKHZhciBkPTAsYz0xOwoxO2QrPWMsYy89Mil7aWYoZj49KDctNCpkKS8xMSl7ZT1jKmMtTWF0aC5wb3coKDExLTYqZC0xMSpmKS80LDIpO2JyZWFrO319cmV0dXJuIGU7fSxFbGFzdGljOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIE1hdGgucG93KDIsMTAqLS1iKSpNYXRoLmNvcygyMCpiKk1hdGguUEkqKGEmJmFbMF18fDEpLzMpOwp9fSk7WyJRdWFkIiwiQ3ViaWMiLCJRdWFydCIsIlF1aW50Il0uZWFjaChmdW5jdGlvbihiLGEpe0Z4LlRyYW5zaXRpb25zW2JdPW5ldyBGeC5UcmFuc2l0aW9uKGZ1bmN0aW9uKGMpe3JldHVybiBNYXRoLnBvdyhjLGErMik7fSk7fSk7KGZ1bmN0aW9uKCl7dmFyIGQ9ZnVuY3Rpb24oKXt9LGE9KCJvbnByb2dyZXNzIiBpbiBuZXcgQnJvd3Nlci5SZXF1ZXN0KTsKdmFyIGM9dGhpcy5SZXF1ZXN0PW5ldyBDbGFzcyh7SW1wbGVtZW50czpbQ2hhaW4sRXZlbnRzLE9wdGlvbnNdLG9wdGlvbnM6e3VybDoiIixkYXRhOiIiLGhlYWRlcnM6eyJYLVJlcXVlc3RlZC1XaXRoIjoiWE1MSHR0cFJlcXVlc3QiLEFjY2VwdDoidGV4dC9qYXZhc2NyaXB0LCB0ZXh0L2h0bWwsIGFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwsICovKiJ9LGFzeW5jOnRydWUsZm9ybWF0OmZhbHNlLG1ldGhvZDoicG9zdCIsbGluazoiaWdub3JlIixpc1N1Y2Nlc3M6bnVsbCxlbXVsYXRpb246dHJ1ZSx1cmxFbmNvZGVkOnRydWUsZW5jb2Rpbmc6InV0Zi04IixldmFsU2NyaXB0czpmYWxzZSxldmFsUmVzcG9uc2U6ZmFsc2UsdGltZW91dDowLG5vQ2FjaGU6ZmFsc2V9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSl7dGhpcy54aHI9bmV3IEJyb3dzZXIuUmVxdWVzdCgpOwp0aGlzLnNldE9wdGlvbnMoZSk7dGhpcy5oZWFkZXJzPXRoaXMub3B0aW9ucy5oZWFkZXJzO30sb25TdGF0ZUNoYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMueGhyO2lmKGUucmVhZHlTdGF0ZSE9NHx8IXRoaXMucnVubmluZyl7cmV0dXJuO310aGlzLnJ1bm5pbmc9ZmFsc2U7CnRoaXMuc3RhdHVzPTA7RnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3ZhciBmPWUuc3RhdHVzO3RoaXMuc3RhdHVzPShmPT0xMjIzKT8yMDQ6Zjt9LmJpbmQodGhpcykpO2Uub25yZWFkeXN0YXRlY2hhbmdlPWQ7aWYoYSl7ZS5vbnByb2dyZXNzPWUub25sb2Fkc3RhcnQ9ZDsKfWNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTt0aGlzLnJlc3BvbnNlPXt0ZXh0OnRoaXMueGhyLnJlc3BvbnNlVGV4dHx8IiIseG1sOnRoaXMueGhyLnJlc3BvbnNlWE1MfTtpZih0aGlzLm9wdGlvbnMuaXNTdWNjZXNzLmNhbGwodGhpcyx0aGlzLnN0YXR1cykpe3RoaXMuc3VjY2Vzcyh0aGlzLnJlc3BvbnNlLnRleHQsdGhpcy5yZXNwb25zZS54bWwpOwp9ZWxzZXt0aGlzLmZhaWx1cmUoKTt9fSxpc1N1Y2Nlc3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnN0YXR1cztyZXR1cm4oZT49MjAwJiZlPDMwMCk7fSxpc1J1bm5pbmc6ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLnJ1bm5pbmc7fSxwcm9jZXNzU2NyaXB0czpmdW5jdGlvbihlKXtpZih0aGlzLm9wdGlvbnMuZXZhbFJlc3BvbnNlfHwoLyhlY21hfGphdmEpc2NyaXB0LykudGVzdCh0aGlzLmdldEhlYWRlcigiQ29udGVudC10eXBlIikpKXtyZXR1cm4gQnJvd3Nlci5leGVjKGUpOwp9cmV0dXJuIGUuc3RyaXBTY3JpcHRzKHRoaXMub3B0aW9ucy5ldmFsU2NyaXB0cyk7fSxzdWNjZXNzOmZ1bmN0aW9uKGYsZSl7dGhpcy5vblN1Y2Nlc3ModGhpcy5wcm9jZXNzU2NyaXB0cyhmKSxlKTt9LG9uU3VjY2VzczpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIsYXJndW1lbnRzKS5maXJlRXZlbnQoInN1Y2Nlc3MiLGFyZ3VtZW50cykuY2FsbENoYWluKCk7Cn0sZmFpbHVyZTpmdW5jdGlvbigpe3RoaXMub25GYWlsdXJlKCk7fSxvbkZhaWx1cmU6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgiY29tcGxldGUiKS5maXJlRXZlbnQoImZhaWx1cmUiLHRoaXMueGhyKTt9LGxvYWRzdGFydDpmdW5jdGlvbihlKXt0aGlzLmZpcmVFdmVudCgibG9hZHN0YXJ0IixbZSx0aGlzLnhocl0pOwp9LHByb2dyZXNzOmZ1bmN0aW9uKGUpe3RoaXMuZmlyZUV2ZW50KCJwcm9ncmVzcyIsW2UsdGhpcy54aHJdKTt9LHRpbWVvdXQ6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgidGltZW91dCIsdGhpcy54aHIpO30sc2V0SGVhZGVyOmZ1bmN0aW9uKGUsZil7dGhpcy5oZWFkZXJzW2VdPWY7CnJldHVybiB0aGlzO30sZ2V0SGVhZGVyOmZ1bmN0aW9uKGUpe3JldHVybiBGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueGhyLmdldFJlc3BvbnNlSGVhZGVyKGUpO30uYmluZCh0aGlzKSk7fSxjaGVjazpmdW5jdGlvbigpe2lmKCF0aGlzLnJ1bm5pbmcpe3JldHVybiB0cnVlOwp9c3dpdGNoKHRoaXMub3B0aW9ucy5saW5rKXtjYXNlImNhbmNlbCI6dGhpcy5jYW5jZWwoKTtyZXR1cm4gdHJ1ZTtjYXNlImNoYWluIjp0aGlzLmNoYWluKHRoaXMuY2FsbGVyLnBhc3MoYXJndW1lbnRzLHRoaXMpKTtyZXR1cm4gZmFsc2U7fXJldHVybiBmYWxzZTt9LHNlbmQ6ZnVuY3Rpb24obyl7aWYoIXRoaXMuY2hlY2sobykpe3JldHVybiB0aGlzOwp9dGhpcy5vcHRpb25zLmlzU3VjY2Vzcz10aGlzLm9wdGlvbnMuaXNTdWNjZXNzfHx0aGlzLmlzU3VjY2Vzczt0aGlzLnJ1bm5pbmc9dHJ1ZTt2YXIgbD10eXBlT2Yobyk7aWYobD09InN0cmluZyJ8fGw9PSJlbGVtZW50Iil7bz17ZGF0YTpvfTt9dmFyIGg9dGhpcy5vcHRpb25zOwpvPU9iamVjdC5hcHBlbmQoe2RhdGE6aC5kYXRhLHVybDpoLnVybCxtZXRob2Q6aC5tZXRob2R9LG8pO3ZhciBqPW8uZGF0YSxmPVN0cmluZyhvLnVybCksZT1vLm1ldGhvZC50b0xvd2VyQ2FzZSgpO3N3aXRjaCh0eXBlT2Yoaikpe2Nhc2UiZWxlbWVudCI6aj1kb2N1bWVudC5pZChqKS50b1F1ZXJ5U3RyaW5nKCk7CmJyZWFrO2Nhc2Uib2JqZWN0IjpjYXNlImhhc2giOmo9T2JqZWN0LnRvUXVlcnlTdHJpbmcoaik7fWlmKHRoaXMub3B0aW9ucy5mb3JtYXQpe3ZhciBtPSJmb3JtYXQ9Iit0aGlzLm9wdGlvbnMuZm9ybWF0O2o9KGopP20rIiYiK2o6bTt9aWYodGhpcy5vcHRpb25zLmVtdWxhdGlvbiYmIVsiZ2V0IiwicG9zdCJdLmNvbnRhaW5zKGUpKXt2YXIgaz0iX21ldGhvZD0iK2U7Cmo9KGopP2srIiYiK2o6aztlPSJwb3N0Ijt9aWYodGhpcy5vcHRpb25zLnVybEVuY29kZWQmJlsicG9zdCIsInB1dCJdLmNvbnRhaW5zKGUpKXt2YXIgZz0odGhpcy5vcHRpb25zLmVuY29kaW5nKT8iOyBjaGFyc2V0PSIrdGhpcy5vcHRpb25zLmVuY29kaW5nOiIiO3RoaXMuaGVhZGVyc1siQ29udGVudC10eXBlIl09ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIrZzsKfWlmKCFmKXtmPWRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lO312YXIgaT1mLmxhc3RJbmRleE9mKCIvIik7aWYoaT4tMSYmKGk9Zi5pbmRleE9mKCIjIikpPi0xKXtmPWYuc3Vic3RyKDAsaSk7fWlmKHRoaXMub3B0aW9ucy5ub0NhY2hlKXtmKz0oZi5jb250YWlucygiPyIpPyImIjoiPyIpK1N0cmluZy51bmlxdWVJRCgpOwp9aWYoaiYmZT09ImdldCIpe2YrPShmLmNvbnRhaW5zKCI/Iik/IiYiOiI/IikrajtqPW51bGw7fXZhciBuPXRoaXMueGhyO2lmKGEpe24ub25sb2Fkc3RhcnQ9dGhpcy5sb2Fkc3RhcnQuYmluZCh0aGlzKTtuLm9ucHJvZ3Jlc3M9dGhpcy5wcm9ncmVzcy5iaW5kKHRoaXMpOwp9bi5vcGVuKGUudG9VcHBlckNhc2UoKSxmLHRoaXMub3B0aW9ucy5hc3luYyx0aGlzLm9wdGlvbnMudXNlcix0aGlzLm9wdGlvbnMucGFzc3dvcmQpO2lmKHRoaXMub3B0aW9ucy51c2VyJiYid2l0aENyZWRlbnRpYWxzIiBpbiBuKXtuLndpdGhDcmVkZW50aWFscz10cnVlOwp9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9dGhpcy5vblN0YXRlQ2hhbmdlLmJpbmQodGhpcyk7T2JqZWN0LmVhY2godGhpcy5oZWFkZXJzLGZ1bmN0aW9uKHEscCl7dHJ5e24uc2V0UmVxdWVzdEhlYWRlcihwLHEpO31jYXRjaChyKXt0aGlzLmZpcmVFdmVudCgiZXhjZXB0aW9uIixbcCxxXSk7Cn19LHRoaXMpO3RoaXMuZmlyZUV2ZW50KCJyZXF1ZXN0Iik7bi5zZW5kKGopO2lmKCF0aGlzLm9wdGlvbnMuYXN5bmMpe3RoaXMub25TdGF0ZUNoYW5nZSgpO31lbHNle2lmKHRoaXMub3B0aW9ucy50aW1lb3V0KXt0aGlzLnRpbWVyPXRoaXMudGltZW91dC5kZWxheSh0aGlzLm9wdGlvbnMudGltZW91dCx0aGlzKTsKfX1yZXR1cm4gdGhpczt9LGNhbmNlbDpmdW5jdGlvbigpe2lmKCF0aGlzLnJ1bm5pbmcpe3JldHVybiB0aGlzO310aGlzLnJ1bm5pbmc9ZmFsc2U7dmFyIGU9dGhpcy54aHI7ZS5hYm9ydCgpO2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtlLm9ucmVhZHlzdGF0ZWNoYW5nZT1kOwppZihhKXtlLm9ucHJvZ3Jlc3M9ZS5vbmxvYWRzdGFydD1kO310aGlzLnhocj1uZXcgQnJvd3Nlci5SZXF1ZXN0KCk7dGhpcy5maXJlRXZlbnQoImNhbmNlbCIpO3JldHVybiB0aGlzO319KTt2YXIgYj17fTtbImdldCIsInBvc3QiLCJwdXQiLCJkZWxldGUiLCJHRVQiLCJQT1NUIiwiUFVUIiwiREVMRVRFIl0uZWFjaChmdW5jdGlvbihlKXtiW2VdPWZ1bmN0aW9uKGcpe3ZhciBmPXttZXRob2Q6ZX07CmlmKGchPW51bGwpe2YuZGF0YT1nO31yZXR1cm4gdGhpcy5zZW5kKGYpO307fSk7Yy5pbXBsZW1lbnQoYik7RWxlbWVudC5Qcm9wZXJ0aWVzLnNlbmQ9e3NldDpmdW5jdGlvbihlKXt2YXIgZj10aGlzLmdldCgic2VuZCIpLmNhbmNlbCgpO2Yuc2V0T3B0aW9ucyhlKTsKcmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJldHJpZXZlKCJzZW5kIik7aWYoIWUpe2U9bmV3IGMoe2RhdGE6dGhpcyxsaW5rOiJjYW5jZWwiLG1ldGhvZDp0aGlzLmdldCgibWV0aG9kIil8fCJwb3N0Iix1cmw6dGhpcy5nZXQoImFjdGlvbiIpfSk7CnRoaXMuc3RvcmUoInNlbmQiLGUpO31yZXR1cm4gZTt9fTtFbGVtZW50LmltcGxlbWVudCh7c2VuZDpmdW5jdGlvbihlKXt2YXIgZj10aGlzLmdldCgic2VuZCIpO2Yuc2VuZCh7ZGF0YTp0aGlzLHVybDplfHxmLm9wdGlvbnMudXJsfSk7cmV0dXJuIHRoaXM7fX0pO30pKCk7ClJlcXVlc3QuSFRNTD1uZXcgQ2xhc3Moe0V4dGVuZHM6UmVxdWVzdCxvcHRpb25zOnt1cGRhdGU6ZmFsc2UsYXBwZW5kOmZhbHNlLGV2YWxTY3JpcHRzOnRydWUsZmlsdGVyOmZhbHNlLGhlYWRlcnM6e0FjY2VwdDoidGV4dC9odG1sLCBhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sLCAqLyoifX0sc3VjY2VzczpmdW5jdGlvbihmKXt2YXIgZT10aGlzLm9wdGlvbnMsYz10aGlzLnJlc3BvbnNlOwpjLmh0bWw9Zi5zdHJpcFNjcmlwdHMoZnVuY3Rpb24oaCl7Yy5qYXZhc2NyaXB0PWg7fSk7dmFyIGQ9Yy5odG1sLm1hdGNoKC88Ym9keVtePl0qPihbXHNcU10qPyk8XC9ib2R5Pi9pKTtpZihkKXtjLmh0bWw9ZFsxXTt9dmFyIGI9bmV3IEVsZW1lbnQoImRpdiIpLnNldCgiaHRtbCIsYy5odG1sKTsKYy50cmVlPWIuY2hpbGROb2RlcztjLmVsZW1lbnRzPWIuZ2V0RWxlbWVudHMoZS5maWx0ZXJ8fCIqIik7aWYoZS5maWx0ZXIpe2MudHJlZT1jLmVsZW1lbnRzO31pZihlLnVwZGF0ZSl7dmFyIGc9ZG9jdW1lbnQuaWQoZS51cGRhdGUpLmVtcHR5KCk7aWYoZS5maWx0ZXIpe2cuYWRvcHQoYy5lbGVtZW50cyk7Cn1lbHNle2cuc2V0KCJodG1sIixjLmh0bWwpO319ZWxzZXtpZihlLmFwcGVuZCl7dmFyIGE9ZG9jdW1lbnQuaWQoZS5hcHBlbmQpO2lmKGUuZmlsdGVyKXtjLmVsZW1lbnRzLnJldmVyc2UoKS5pbmplY3QoYSk7fWVsc2V7YS5hZG9wdChiLmdldENoaWxkcmVuKCkpO319fWlmKGUuZXZhbFNjcmlwdHMpe0Jyb3dzZXIuZXhlYyhjLmphdmFzY3JpcHQpOwp9dGhpcy5vblN1Y2Nlc3MoYy50cmVlLGMuZWxlbWVudHMsYy5odG1sLGMuamF2YXNjcmlwdCk7fX0pO0VsZW1lbnQuUHJvcGVydGllcy5sb2FkPXtzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXQoImxvYWQiKS5jYW5jZWwoKTtiLnNldE9wdGlvbnMoYSk7cmV0dXJuIHRoaXM7Cn0sZ2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZXRyaWV2ZSgibG9hZCIpO2lmKCFhKXthPW5ldyBSZXF1ZXN0LkhUTUwoe2RhdGE6dGhpcyxsaW5rOiJjYW5jZWwiLHVwZGF0ZTp0aGlzLG1ldGhvZDoiZ2V0In0pO3RoaXMuc3RvcmUoImxvYWQiLGEpO31yZXR1cm4gYTsKfX07RWxlbWVudC5pbXBsZW1lbnQoe2xvYWQ6ZnVuY3Rpb24oKXt0aGlzLmdldCgibG9hZCIpLnNlbmQoQXJyYXkubGluayhhcmd1bWVudHMse2RhdGE6VHlwZS5pc09iamVjdCx1cmw6VHlwZS5pc1N0cmluZ30pKTtyZXR1cm4gdGhpczt9fSk7aWYodHlwZW9mIEpTT049PSJ1bmRlZmluZWQiKXt0aGlzLkpTT049e307Cn1KU09OPW5ldyBIYXNoKHtzdHJpbmdpZnk6SlNPTi5zdHJpbmdpZnkscGFyc2U6SlNPTi5wYXJzZX0pOyhmdW5jdGlvbigpe3ZhciBzcGVjaWFsPXsiXGIiOiJcXGIiLCJcdCI6IlxcdCIsIlxuIjoiXFxuIiwiXGYiOiJcXGYiLCJcciI6IlxcciIsJyInOidcXCInLCJcXCI6IlxcXFwifTsKdmFyIGVzY2FwZT1mdW5jdGlvbihjaHIpe3JldHVybiBzcGVjaWFsW2Nocl18fCJcXHUiKygiMDAwMCIrY2hyLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7fTtKU09OLnZhbGlkYXRlPWZ1bmN0aW9uKHN0cmluZyl7c3RyaW5nPXN0cmluZy5yZXBsYWNlKC9cXCg/OlsiXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2csIkAiKS5yZXBsYWNlKC8iW14iXFxcblxyXSoifHRydWV8ZmFsc2V8bnVsbHwtP1xkKyg/OlwuXGQqKT8oPzpbZUVdWytcLV0/XGQrKT8vZywiXSIpLnJlcGxhY2UoLyg/Ol58OnwsKSg/OlxzKlxbKSsvZywiIik7CnJldHVybigvXltcXSw6e31cc10qJC8pLnRlc3Qoc3RyaW5nKTt9O0pTT04uZW5jb2RlPUpTT04uc3RyaW5naWZ5P2Z1bmN0aW9uKG9iail7cmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7fTpmdW5jdGlvbihvYmope2lmKG9iaiYmb2JqLnRvSlNPTil7b2JqPW9iai50b0pTT04oKTsKfXN3aXRjaCh0eXBlT2Yob2JqKSl7Y2FzZSJzdHJpbmciOnJldHVybiciJytvYmoucmVwbGFjZSgvW1x4MDAtXHgxZlxcIl0vZyxlc2NhcGUpKyciJztjYXNlImFycmF5IjpyZXR1cm4iWyIrb2JqLm1hcChKU09OLmVuY29kZSkuY2xlYW4oKSsiXSI7Y2FzZSJvYmplY3QiOmNhc2UiaGFzaCI6dmFyIHN0cmluZz1bXTsKT2JqZWN0LmVhY2gob2JqLGZ1bmN0aW9uKHZhbHVlLGtleSl7dmFyIGpzb249SlNPTi5lbmNvZGUodmFsdWUpO2lmKGpzb24pe3N0cmluZy5wdXNoKEpTT04uZW5jb2RlKGtleSkrIjoiK2pzb24pO319KTtyZXR1cm4ieyIrc3RyaW5nKyJ9IjtjYXNlIm51bWJlciI6Y2FzZSJib29sZWFuIjpyZXR1cm4iIitvYmo7CmNhc2UibnVsbCI6cmV0dXJuIm51bGwiO31yZXR1cm4gbnVsbDt9O0pTT04uZGVjb2RlPWZ1bmN0aW9uKHN0cmluZyxzZWN1cmUpe2lmKCFzdHJpbmd8fHR5cGVPZihzdHJpbmcpIT0ic3RyaW5nIil7cmV0dXJuIG51bGw7fWlmKHNlY3VyZXx8SlNPTi5zZWN1cmUpe2lmKEpTT04ucGFyc2Upe3JldHVybiBKU09OLnBhcnNlKHN0cmluZyk7Cn1pZighSlNPTi52YWxpZGF0ZShzdHJpbmcpKXt0aHJvdyBuZXcgRXJyb3IoIkpTT04gY291bGQgbm90IGRlY29kZSB0aGUgaW5wdXQ7IHNlY3VyaXR5IGlzIGVuYWJsZWQgYW5kIHRoZSB2YWx1ZSBpcyBub3Qgc2VjdXJlLiIpO319cmV0dXJuIGV2YWwoIigiK3N0cmluZysiKSIpOwp9O30pKCk7UmVxdWVzdC5KU09OPW5ldyBDbGFzcyh7RXh0ZW5kczpSZXF1ZXN0LG9wdGlvbnM6e3NlY3VyZTp0cnVlfSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMucGFyZW50KGEpO09iamVjdC5hcHBlbmQodGhpcy5oZWFkZXJzLHtBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24iLCJYLVJlcXVlc3QiOiJKU09OIn0pOwp9LHN1Y2Nlc3M6ZnVuY3Rpb24oYyl7dmFyIGI7dHJ5e2I9dGhpcy5yZXNwb25zZS5qc29uPUpTT04uZGVjb2RlKGMsdGhpcy5vcHRpb25zLnNlY3VyZSk7fWNhdGNoKGEpe3RoaXMuZmlyZUV2ZW50KCJlcnJvciIsW2MsYV0pO3JldHVybjt9aWYoYj09bnVsbCl7dGhpcy5vbkZhaWx1cmUoKTsKfWVsc2V7dGhpcy5vblN1Y2Nlc3MoYixjKTt9fX0pO3ZhciBDb29raWU9bmV3IENsYXNzKHtJbXBsZW1lbnRzOk9wdGlvbnMsb3B0aW9uczp7cGF0aDoiLyIsZG9tYWluOmZhbHNlLGR1cmF0aW9uOmZhbHNlLHNlY3VyZTpmYWxzZSxkb2N1bWVudDpkb2N1bWVudCxlbmNvZGU6dHJ1ZX0saW5pdGlhbGl6ZTpmdW5jdGlvbihiLGEpe3RoaXMua2V5PWI7CnRoaXMuc2V0T3B0aW9ucyhhKTt9LHdyaXRlOmZ1bmN0aW9uKGIpe2lmKHRoaXMub3B0aW9ucy5lbmNvZGUpe2I9ZW5jb2RlVVJJQ29tcG9uZW50KGIpO31pZih0aGlzLm9wdGlvbnMuZG9tYWluKXtiKz0iOyBkb21haW49Iit0aGlzLm9wdGlvbnMuZG9tYWluO31pZih0aGlzLm9wdGlvbnMucGF0aCl7Yis9IjsgcGF0aD0iK3RoaXMub3B0aW9ucy5wYXRoOwp9aWYodGhpcy5vcHRpb25zLmR1cmF0aW9uKXt2YXIgYT1uZXcgRGF0ZSgpO2Euc2V0VGltZShhLmdldFRpbWUoKSt0aGlzLm9wdGlvbnMuZHVyYXRpb24qMjQqNjAqNjAqMTAwMCk7Yis9IjsgZXhwaXJlcz0iK2EudG9HTVRTdHJpbmcoKTt9aWYodGhpcy5vcHRpb25zLnNlY3VyZSl7Yis9Ijsgc2VjdXJlIjsKfXRoaXMub3B0aW9ucy5kb2N1bWVudC5jb29raWU9dGhpcy5rZXkrIj0iK2I7cmV0dXJuIHRoaXM7fSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLmRvY3VtZW50LmNvb2tpZS5tYXRjaCgiKD86Xnw7KVxccyoiK3RoaXMua2V5LmVzY2FwZVJlZ0V4cCgpKyI9KFteO10qKSIpOwpyZXR1cm4oYSk/ZGVjb2RlVVJJQ29tcG9uZW50KGFbMV0pOm51bGw7fSxkaXNwb3NlOmZ1bmN0aW9uKCl7bmV3IENvb2tpZSh0aGlzLmtleSxPYmplY3QubWVyZ2Uoe30sdGhpcy5vcHRpb25zLHtkdXJhdGlvbjotMX0pKS53cml0ZSgiIik7cmV0dXJuIHRoaXM7fX0pOwpDb29raWUud3JpdGU9ZnVuY3Rpb24oYixjLGEpe3JldHVybiBuZXcgQ29va2llKGIsYSkud3JpdGUoYyk7fTtDb29raWUucmVhZD1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IENvb2tpZShhKS5yZWFkKCk7fTtDb29raWUuZGlzcG9zZT1mdW5jdGlvbihiLGEpe3JldHVybiBuZXcgQ29va2llKGIsYSkuZGlzcG9zZSgpOwp9OyhmdW5jdGlvbihpLGspe3ZhciBsLGYsZT1bXSxjLGIsZD1rLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3ZhciBnPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGIpO2lmKGwpe3JldHVybjt9QnJvd3Nlci5sb2FkZWQ9bD10cnVlO2sucmVtb3ZlTGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGcpLnJlbW92ZUxpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixhKTsKay5maXJlRXZlbnQoImRvbXJlYWR5Iik7aS5maXJlRXZlbnQoImRvbXJlYWR5Iik7fTt2YXIgYT1mdW5jdGlvbigpe2Zvcih2YXIgbT1lLmxlbmd0aDttLS07KXtpZihlW21dKCkpe2coKTtyZXR1cm4gdHJ1ZTt9fXJldHVybiBmYWxzZTt9O3ZhciBqPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGIpOwppZighYSgpKXtiPXNldFRpbWVvdXQoaiwxMCk7fX07ay5hZGRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZyk7dmFyIGg9ZnVuY3Rpb24oKXt0cnl7ZC5kb1Njcm9sbCgpO3JldHVybiB0cnVlO31jYXRjaChtKXt9cmV0dXJuIGZhbHNlO307aWYoZC5kb1Njcm9sbCYmIWgoKSl7ZS5wdXNoKGgpOwpjPXRydWU7fWlmKGsucmVhZHlTdGF0ZSl7ZS5wdXNoKGZ1bmN0aW9uKCl7dmFyIG09ay5yZWFkeVN0YXRlO3JldHVybihtPT0ibG9hZGVkInx8bT09ImNvbXBsZXRlIik7fSk7fWlmKCJvbnJlYWR5c3RhdGVjaGFuZ2UiIGluIGspe2suYWRkTGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGEpOwp9ZWxzZXtjPXRydWU7fWlmKGMpe2ooKTt9RWxlbWVudC5FdmVudHMuZG9tcmVhZHk9e29uQWRkOmZ1bmN0aW9uKG0pe2lmKGwpe20uY2FsbCh0aGlzKTt9fX07RWxlbWVudC5FdmVudHMubG9hZD17YmFzZToibG9hZCIsb25BZGQ6ZnVuY3Rpb24obSl7aWYoZiYmdGhpcz09aSl7bS5jYWxsKHRoaXMpOwp9fSxjb25kaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzPT1pKXtnKCk7ZGVsZXRlIEVsZW1lbnQuRXZlbnRzLmxvYWQ7fXJldHVybiB0cnVlO319O2kuYWRkRXZlbnQoImxvYWQiLGZ1bmN0aW9uKCl7Zj10cnVlO30pO30pKHdpbmRvdyxkb2N1bWVudCk7KGZ1bmN0aW9uKCl7dmFyIFN3aWZmPXRoaXMuU3dpZmY9bmV3IENsYXNzKHtJbXBsZW1lbnRzOk9wdGlvbnMsb3B0aW9uczp7aWQ6bnVsbCxoZWlnaHQ6MSx3aWR0aDoxLGNvbnRhaW5lcjpudWxsLHByb3BlcnRpZXM6e30scGFyYW1zOntxdWFsaXR5OiJoaWdoIixhbGxvd1NjcmlwdEFjY2VzczoiYWx3YXlzIix3TW9kZToid2luZG93Iixzd0xpdmVDb25uZWN0OnRydWV9LGNhbGxCYWNrczp7fSx2YXJzOnt9fSx0b0VsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYmplY3Q7Cn0saW5pdGlhbGl6ZTpmdW5jdGlvbihwYXRoLG9wdGlvbnMpe3RoaXMuaW5zdGFuY2U9IlN3aWZmXyIrU3RyaW5nLnVuaXF1ZUlEKCk7dGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO29wdGlvbnM9dGhpcy5vcHRpb25zO3ZhciBpZD10aGlzLmlkPW9wdGlvbnMuaWR8fHRoaXMuaW5zdGFuY2U7CnZhciBjb250YWluZXI9ZG9jdW1lbnQuaWQob3B0aW9ucy5jb250YWluZXIpO1N3aWZmLkNhbGxCYWNrc1t0aGlzLmluc3RhbmNlXT17fTt2YXIgcGFyYW1zPW9wdGlvbnMucGFyYW1zLHZhcnM9b3B0aW9ucy52YXJzLGNhbGxCYWNrcz1vcHRpb25zLmNhbGxCYWNrczsKdmFyIHByb3BlcnRpZXM9T2JqZWN0LmFwcGVuZCh7aGVpZ2h0Om9wdGlvbnMuaGVpZ2h0LHdpZHRoOm9wdGlvbnMud2lkdGh9LG9wdGlvbnMucHJvcGVydGllcyk7dmFyIHNlbGY9dGhpcztmb3IodmFyIGNhbGxCYWNrIGluIGNhbGxCYWNrcyl7U3dpZmYuQ2FsbEJhY2tzW3RoaXMuaW5zdGFuY2VdW2NhbGxCYWNrXT0oZnVuY3Rpb24ob3B0aW9uKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gb3B0aW9uLmFwcGx5KHNlbGYub2JqZWN0LGFyZ3VtZW50cyk7Cn07fSkoY2FsbEJhY2tzW2NhbGxCYWNrXSk7dmFyc1tjYWxsQmFja109IlN3aWZmLkNhbGxCYWNrcy4iK3RoaXMuaW5zdGFuY2UrIi4iK2NhbGxCYWNrO31wYXJhbXMuZmxhc2hWYXJzPU9iamVjdC50b1F1ZXJ5U3RyaW5nKHZhcnMpO2lmKEJyb3dzZXIuaWUpe3Byb3BlcnRpZXMuY2xhc3NpZD0iY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIjsKcGFyYW1zLm1vdmllPXBhdGg7fWVsc2V7cHJvcGVydGllcy50eXBlPSJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCI7fXByb3BlcnRpZXMuZGF0YT1wYXRoO3ZhciBidWlsZD0nPG9iamVjdCBpZD0iJytpZCsnIic7Zm9yKHZhciBwcm9wZXJ0eSBpbiBwcm9wZXJ0aWVzKXtidWlsZCs9IiAiK3Byb3BlcnR5Kyc9IicrcHJvcGVydGllc1twcm9wZXJ0eV0rJyInOwp9YnVpbGQrPSI+Ijtmb3IodmFyIHBhcmFtIGluIHBhcmFtcyl7aWYocGFyYW1zW3BhcmFtXSl7YnVpbGQrPSc8cGFyYW0gbmFtZT0iJytwYXJhbSsnIiB2YWx1ZT0iJytwYXJhbXNbcGFyYW1dKyciIC8+Jzt9fWJ1aWxkKz0iPC9vYmplY3Q+Ijt0aGlzLm9iamVjdD0oKGNvbnRhaW5lcik/Y29udGFpbmVyLmVtcHR5KCk6bmV3IEVsZW1lbnQoImRpdiIpKS5zZXQoImh0bWwiLGJ1aWxkKS5maXJzdENoaWxkOwp9LHJlcGxhY2VzOmZ1bmN0aW9uKGVsZW1lbnQpe2VsZW1lbnQ9ZG9jdW1lbnQuaWQoZWxlbWVudCx0cnVlKTtlbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMudG9FbGVtZW50KCksZWxlbWVudCk7cmV0dXJuIHRoaXM7fSxpbmplY3Q6ZnVuY3Rpb24oZWxlbWVudCl7ZG9jdW1lbnQuaWQoZWxlbWVudCx0cnVlKS5hcHBlbmRDaGlsZCh0aGlzLnRvRWxlbWVudCgpKTsKcmV0dXJuIHRoaXM7fSxyZW1vdGU6ZnVuY3Rpb24oKXtyZXR1cm4gU3dpZmYucmVtb3RlLmFwcGx5KFN3aWZmLFt0aGlzLnRvRWxlbWVudCgpXS5hcHBlbmQoYXJndW1lbnRzKSk7fX0pO1N3aWZmLkNhbGxCYWNrcz17fTtTd2lmZi5yZW1vdGU9ZnVuY3Rpb24ob2JqLGZuKXt2YXIgcnM9b2JqLkNhbGxGdW5jdGlvbignPGludm9rZSBuYW1lPSInK2ZuKyciIHJldHVybnR5cGU9ImphdmFzY3JpcHQiPicrX19mbGFzaF9fYXJndW1lbnRzVG9YTUwoYXJndW1lbnRzLDIpKyI8L2ludm9rZT4iKTsKcmV0dXJuIGV2YWwocnMpO307fSkoKTs=",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Sat, 08 Nov 2014 14:56:50 GMT",
                    "Content-Length": "96362",
                    "Date": "Sat, 08 Nov 2014 14:56:50 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}