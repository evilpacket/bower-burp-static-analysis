{
    "url": "http://localhost:9999/expectlabs/mindmeld-js-sdk/example/widgets/voiceNavigator/rotten-tomatoes_files/a.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Cross-site scripting (DOM-based)",
    "issueType": 2097936,
    "severity": "High",
    "confidence": "Firm",
    "issueBackground": "DOM-based cross-site scripting vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the HTML document in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause JavaScript code supplied by the attacker to execute within the user's browser in the context of that user's session with the application.<br><br>The attacker-supplied code can perform a wide variety of actions, such as stealing the victim's session token or login credentials, performing arbitrary actions on the victim's behalf, and logging their keystrokes.<br><br>Users can be induced to visit the attacker's crafted URL in various ways, similar to the usual attack delivery vectors for reflected cross-site scripting vulnerabilities. ",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based cross-site scripting vulnerabilities is not to dynamically write data into the HTML document that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing script code into the document. In many cases, the relevant data can be validated on a whitelist basis, to allow only content that is known to be safe. In other cases, it will be necessary to sanitize or encode the data. This can be a complex task, and depending on the context that the data is to be inserted may need to involve a combination of JavaScript escaping, HTML encoding, and URL encoding, in the appropriate sequence.",
    "issueDetail": "The application may be vulnerable to DOM-based cross-site scripting. Data is read from <b>location</b> and written to <b>$()</b> via the following statement:<ul><li>F[C?\"movie\":\"tv_show\"]=$(location).attr(\"href\");</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/expectlabs/mindmeld-js-sdk/example/widgets/voiceNavigator/rotten-tomatoes_files/a.js",
                "path": "/expectlabs/mindmeld-js-sdk/example/widgets/voiceNavigator/rotten-tomatoes_files/a.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9leHBlY3RsYWJzL21pbmRtZWxkLWpzLXNkay9leGFtcGxlL3dpZGdldHMvdm9pY2VOYXZpZ2F0b3Ivcm90dGVuLXRvbWF0b2VzX2ZpbGVzL2EuanMgSFRUUC8xLjENCkhvc3Q6IGxvY2FsaG9zdDo5OTk5DQoNCg==",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMjAwMjUNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkRhdGU6IEZyaSwgMDcgTm92IDIwMTQgMDk6NTI6MjkgR01UDQpMYXN0LU1vZGlmaWVkOiBGcmksIDA3IE5vdiAyMDE0IDA5OjUyOjIwIEdNVA0KDQooZnVuY3Rpb24oRCl7RC5mbi5qQ2Fyb3VzZWxMaXRlPWZ1bmN0aW9uKEUpe0U9RC5leHRlbmQoe2J0blByZXY6bnVsbCxidG5OZXh0Om51bGwsYnRuR286bnVsbCxtb3VzZVdoZWVsOmZhbHNlLGF1dG86bnVsbCxzcGVlZDoyMDAsZWFzaW5nOm51bGwsdmVydGljYWw6ZmFsc2UsY2lyY3VsYXI6dHJ1ZSx2aXNpYmxlOjMsc3RhcnQ6MCxzY3JvbGw6MSxiZWZvcmVTdGFydDpudWxsLGFmdGVyRW5kOm51bGx9LEV8fHt9KTsKcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBOPWZhbHNlLEw9RS52ZXJ0aWNhbD8idG9wIjoibGVmdCIsRz1FLnZlcnRpY2FsPyJoZWlnaHQiOiJ3aWR0aCI7CnZhciBGPUQodGhpcyksUD1EKCJ1bCIsRiksST1EKCJsaSIsUCksVD1JLnNpemUoKSxTPUUudmlzaWJsZTsKaWYoRS5jaXJjdWxhcil7UC5wcmVwZW5kKEkuc2xpY2UoVC1TLTErMSkuY2xvbmUoKSkuYXBwZW5kKEkuc2xpY2UoMCxTKS5jbG9uZSgpKTsKRS5zdGFydCs9UzsKfXZhciBSPUQoImxpIixQKSxPPVIuc2l6ZSgpLFU9RS5zdGFydDsKRi5jc3MoInZpc2liaWxpdHkiLCJ2aXNpYmxlIik7ClIuY3NzKHsib3ZlcmZsb3ciOiJoaWRkZW4iLCJmbG9hdCI6KEUudmVydGljYWw/Im5vbmUiOiJsZWZ0Iil9KTsKUC5jc3MoeyJtYXJnaW4iOiIwIiwicGFkZGluZyI6IjAiLCJwb3NpdGlvbiI6InJlbGF0aXZlIiwibGlzdC1zdHlsZS10eXBlIjoibm9uZSIsInotaW5kZXgiOiIxIn0pOwpGLmNzcyh7Im92ZXJmbG93IjoiaGlkZGVuIiwicG9zaXRpb24iOiJyZWxhdGl2ZSIsInotaW5kZXgiOiIxIiwibGVmdCI6IjBweCJ9KTsKdmFyIEs9RS52ZXJ0aWNhbD9BKFIpOkMoUik7CnZhciBRPUsqTzsKdmFyIE09SypTOwpSLmNzcyh7d2lkdGg6Ui53aWR0aCgpLGhlaWdodDpSLmhlaWdodCgpfSk7ClAuY3NzKEcsUSsicHgiKS5jc3MoTCwtKFUqSykpOwpGLmNzcyhHLE0rInB4Iik7CmlmKEUuYnRuUHJldil7RChFLmJ0blByZXYpLmNsaWNrKGZ1bmN0aW9uKCl7cmV0dXJuIEooVS1FLnNjcm9sbCk7Cn0pOwp9aWYoRS5idG5OZXh0KXtEKEUuYnRuTmV4dCkuY2xpY2soZnVuY3Rpb24oKXtyZXR1cm4gSihVK0Uuc2Nyb2xsKTsKfSk7Cn1pZihFLmJ0bkdvKXtELmVhY2goRS5idG5HbyxmdW5jdGlvbihWLFcpe0QoVykuY2xpY2soZnVuY3Rpb24oKXtyZXR1cm4gSihFLmNpcmN1bGFyP0UudmlzaWJsZStWOlYpOwp9KTsKfSk7Cn1pZihFLm1vdXNlV2hlZWwmJkYubW91c2V3aGVlbCl7Ri5tb3VzZXdoZWVsKGZ1bmN0aW9uKFYsVyl7cmV0dXJuIFc+MD9KKFUtRS5zY3JvbGwpOkooVStFLnNjcm9sbCk7Cn0pOwp9aWYoRS5hdXRvKXtzZXRJbnRlcnZhbChmdW5jdGlvbigpe0ooVStFLnNjcm9sbCk7Cn0sRS5hdXRvK0Uuc3BlZWQpOwp9ZnVuY3Rpb24gSCgpe3JldHVybiBSLnNsaWNlKFUpLnNsaWNlKDAsUyk7Cn1mdW5jdGlvbiBKKFYpe2lmKCFOKXtpZihFLmJlZm9yZVN0YXJ0KXtFLmJlZm9yZVN0YXJ0LmNhbGwodGhpcyxIKCkpOwp9aWYoRS5jaXJjdWxhcil7aWYoVjw9RS5zdGFydC1TLTEpe1AuY3NzKEwsLSgoTy0oUyoyKSkqSykrInB4Iik7ClU9Vj09RS5zdGFydC1TLTE/Ty0oUyoyKS0xOk8tKFMqMiktRS5zY3JvbGw7Cn1lbHNle2lmKFY+PU8tUysxKXtQLmNzcyhMLC0oKFMpKkspKyJweCIpOwpVPVY9PU8tUysxP1MrMTpTK0Uuc2Nyb2xsOwp9ZWxzZXtVPVY7Cn19fWVsc2V7aWYoVjwwfHxWPk8tUyl7cmV0dXJuIDsKfWVsc2V7VT1WOwp9fU49dHJ1ZTsKUC5hbmltYXRlKEw9PSJsZWZ0Ij97bGVmdDotKFUqSyl9Ont0b3A6LShVKkspfSxFLnNwZWVkLEUuZWFzaW5nLGZ1bmN0aW9uKCl7aWYoRS5hZnRlckVuZCl7RS5hZnRlckVuZC5jYWxsKHRoaXMsSCgpKTsKfU49ZmFsc2U7Cn0pOwppZighRS5jaXJjdWxhcil7RChFLmJ0blByZXYrIiwiK0UuYnRuTmV4dCkucmVtb3ZlQ2xhc3MoImRpc2FibGVkIik7CkQoKFUtRS5zY3JvbGw8MCYmRS5idG5QcmV2KXx8KFUrRS5zY3JvbGw+Ty1TJiZFLmJ0bk5leHQpfHxbXSkuYWRkQ2xhc3MoImRpc2FibGVkIik7Cn19cmV0dXJuIGZhbHNlOwp9fSk7Cn07CmZ1bmN0aW9uIEIoRSxGKXtyZXR1cm4gcGFyc2VJbnQoRC5jc3MoRVswXSxGKSl8fDA7Cn1mdW5jdGlvbiBDKEUpe3JldHVybiBFWzBdLm9mZnNldFdpZHRoK0IoRSwibWFyZ2luTGVmdCIpK0IoRSwibWFyZ2luUmlnaHQiKTsKfWZ1bmN0aW9uIEEoRSl7cmV0dXJuIEVbMF0ub2Zmc2V0SGVpZ2h0K0IoRSwibWFyZ2luVG9wIikrQihFLCJtYXJnaW5Cb3R0b20iKTsKfX0pKGpRdWVyeSk7CgoKCgpMaWdodGJveD1CYWNrYm9uZS5WaWV3LmV4dGVuZCh7ZXZlbnRzOnsiY2xpY2sgYVtiYXhcXDpzdWI9Y2xvc2VdIjoiY2xvc2UiLCJjbGljayAubGlnaHRib3giOiJtYXliZUNsb3NlIn0saW5pdGlhbGl6ZTpmdW5jdGlvbihBKXtfLmJpbmRBbGwodGhpcyk7CnRoaXMuX2NvdW50ZXI9MDsKJChkb2N1bWVudCkuYmluZCgiYmF4OmxpZ2h0Ym94Iix0aGlzLnNob3dMaWdodGJveCk7Cn0sbWF5YmVDbG9zZTpmdW5jdGlvbihBKXtpZihBLnRhcmdldD09PXRoaXMuZWxbMF0pe3RoaXMuY2xvc2UoQSk7Cn19LGNsb3NlOmZ1bmN0aW9uKEEpe3RoaXMuX2NvbnRhaW5lZD1udWxsOwp0aGlzLl9jb250ZW50LmVtcHR5KCk7CnRoaXMuZWwuaGlkZSgpOwp0aGlzLl9jb250ZW50LmhpZGUoKTsKdGhpcy5fY2xvc2VDb250YWluZXIuaGlkZSgpOwokKGRvY3VtZW50LmJvZHkpLmNzcyh7Im92ZXJmbG93LXkiOnRoaXMuX29yaWdPdmVyZmxvd30pOwokKGRvY3VtZW50KS51bmJpbmQoImtleWRvd24iLHRoaXMuX2JvdW5kS2V5ZG93bikudW5iaW5kKCJtb3VzZW1vdmUiLHRoaXMuX2JvdW5kTW91c2Vtb3ZlKTsKd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWxUaW1lcik7CiQodGhpcy5fdHJpZ2dlclRhcmdldCkudHJpZ2dlcigiYmF4OmNsb3NlIik7Cn0sb25JbnRlcnZhbDpmdW5jdGlvbigpe3RoaXMuX2NvdW50ZXI9KHRoaXMuX2NvdW50ZXIrMSklODsKaWYoMD09PXRoaXMuX2NvdW50ZXIpe3RoaXMuX2Nsb3NlLmFkZENsYXNzKCJpZGxlIik7Cn19LG9uTW91c2VNb3ZlOmZ1bmN0aW9uKEEpe3RoaXMuX2NvdW50ZXI9MDsKdGhpcy5fY2xvc2UucmVtb3ZlQ2xhc3MoImlkbGUiKTsKfSxzaG93TGlnaHRib3g6ZnVuY3Rpb24oQyxCKXt0aGlzLl90cmlnZ2VyVGFyZ2V0PUMudGFyZ2V0Owp2YXIgQT0kKGRvY3VtZW50LmJvZHkpOwp0aGlzLl9vcmlnT3ZlcmZsb3c9QS5jc3MoIm92ZXJmbG93LXkiKTsKQS5jc3MoeyJvdmVyZmxvdy15IjoiaGlkZGVuIn0pOwppZighdGhpcy5fY29udGVudCl7dGhpcy5pbml0TGlnaHRib3goKTsKfXRoaXMuX2NvbnRlbnQuc2hvdygpOwp0aGlzLl9jbG9zZUNvbnRhaW5lci5zaG93KCk7CnRoaXMuX2NvbnRlbnQuZW1wdHkoKS5odG1sKHRoaXMuX2NvbnRhaW5lZD1CKTsKdGhpcy5fYm91bmRLZXlkb3duPSQucHJveHkodGhpcy5rZXlib2FyZCx0aGlzKTsKdGhpcy5fYm91bmRNb3VzZW1vdmU9JC5wcm94eSh0aGlzLm9uTW91c2VNb3ZlLHRoaXMpOwokKGRvY3VtZW50KS5iaW5kKCJrZXlkb3duIix0aGlzLl9ib3VuZEtleWRvd24pLmJpbmQoIm1vdXNlbW92ZSIsdGhpcy5fYm91bmRNb3VzZW1vdmUpOwp0aGlzLl9pbnRlcnZhbFRpbWVyPXdpbmRvdy5zZXRJbnRlcnZhbCgkLnByb3h5KHRoaXMub25JbnRlcnZhbCx0aGlzKSwyNTApOwp0aGlzLmVsLnNob3coKTsKfSxpbml0TGlnaHRib3g6ZnVuY3Rpb24oKXt2YXIgQT10aGlzOwp0aGlzLl9jb250ZW50PSQoIjxkaXY+PC9kaXY+IikuYWRkQ2xhc3MoImNvbnRlbnQiKTsKdGhpcy5fY2xvc2U9JCgiPGE+PC9hPiIpLmFkZENsYXNzKCJidXR0b24gY2xvc2UgYW5pbWF0ZWQgZmFzdCIpLmF0dHIoImJheDpzdWIiLCJjbG9zZSIpOwp0aGlzLl9jbG9zZUNvbnRhaW5lcj0kKCI8ZGl2PjwvZGl2PiIpLmFkZENsYXNzKCJjb250ZW50IGNsb3NlQ29udGFpbmVyIHJpZ2h0IikuYXBwZW5kKHRoaXMuX2Nsb3NlKTsKdGhpcy5lbD1uZXcgU2NyZWVuT3ZlcmxheSgpLmVsLmFwcGVuZCh0aGlzLl9jbG9zZUNvbnRhaW5lcikuYXBwZW5kKHRoaXMuX2NvbnRlbnQpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpOwp9LGtleWJvYXJkOmZ1bmN0aW9uKEIpe2lmKCEkKHRoaXMuZWwpLmhhc0NsYXNzKCJoaWRkZW4iKSl7aWYoMjc9PT1CLmtleUNvZGUpe0IucHJldmVudERlZmF1bHQoKTsKdGhpcy5jbG9zZShCKTsKfWVsc2V7aWYodGhpcy5fY29udGFpbmVkKXt2YXIgQT1uZXcgalF1ZXJ5LkV2ZW50KCJiYXg6a2V5Iix7a2V5Q29kZTpCLmtleUNvZGV9KTsKJCh0aGlzLl9jb250YWluZWQpLnRyaWdnZXIoQSk7Cn19fX19KTsKU2NyZWVuT3ZlcmxheT1CYWNrYm9uZS5WaWV3LmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbihBKXtfLmJpbmRBbGwodGhpcyk7CnRoaXMuZWw9U2NyZWVuT3ZlcmxheS5pbnN0YW5jZTsKaWYoIXRoaXMuZWwpe3RoaXMuaW5pdChBKTsKfWVsc2V7dGhpcy5lbC5zaG93KCk7Cn19LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLmVsPVNjcmVlbk92ZXJsYXkuaW5zdGFuY2U9JCgiPGRpdj48L2Rpdj4iKS5hZGRDbGFzcygibGlnaHRib3giKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTsKfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5lbC5zaG93KCk7Cn0saGlkZTpmdW5jdGlvbigpe3RoaXMuZWwuaGlkZSgpOwp9fSk7CihmdW5jdGlvbigpe3ZhciBBPXt9OwokKGRvY3VtZW50KS5iaW5kKCJiYXg6bW9kYWwiLGZ1bmN0aW9uKEMsQil7Qi5ldmVudENhbGxlcj0kKEMudGFyZ2V0KTsKaWYoQVtDLnRhcmdldC5pZF09PXVuZGVmaW5lZCl7QVtDLnRhcmdldC5pZF09bmV3IE1vZGFsKEIpOwp9QVtDLnRhcmdldC5pZF0uc2hvd01vZGFsKEIpOwp9KTsKfSkoKTsKTW9kYWw9QmFja2JvbmUuVmlldy5leHRlbmQoe2V2ZW50czp7ImNsaWNrIGFbYmF4XFw6c3Vifj1jbG9zZV0iOiJjbG9zZSIsImJheDptb2RhbENsb3NlIjoiY2xvc2UiLCJiYXg6cmVjZW50ZXIiOiJvbnJlY2VudGVyIn0sb25yZWNlbnRlcjpmdW5jdGlvbihCLEEpe3ZhciBDPXt9OwppZihBLndpZHRoKXtDLm92ZXJyaWRlV2lkdGg9QS53aWR0aDsKfWlmKEEuaGVpZ2h0KXtDLm92ZXJyaWRlSGVpZ2h0PUEuaGVpZ2h0Owp9dGhpcy5jZW50ZXIodGhpcy5tb2RhbCxDKTsKfSxpbml0aWFsaXplOmZ1bmN0aW9uKEEpe18uYmluZEFsbCh0aGlzKTsKdGhpcy5ldmVudENhbGxlcj1BLmV2ZW50Q2FsbGVyOwp0aGlzLm9wdGlvbnM9QTsKfSxzaG93TW9kYWw6ZnVuY3Rpb24oRCl7dmFyIEI9dGhpczsKaWYoIXRoaXMub3ZlcmxheSl7dGhpcy5vdmVybGF5PW5ldyBTY3JlZW5PdmVybGF5KCk7Cn12YXIgQz10aGlzLm92ZXJsYXk7CmlmKCF0aGlzLm1vZGFsKXt0aGlzLm1vZGFsPSQoIjxkaXY+PC9kaXY+IikuYWRkQ2xhc3MoIm1vZGFsQ29udGFpbmVyIikuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSkuY3NzKHt3aWR0aDpELndpZHRofHwiYXV0byIsaGVpZ2h0OkQuaGVpZ2h0fHwiYXV0byIsekluZGV4OnBhcnNlSW50KHRoaXMub3ZlcmxheS5lbC5jc3MoInpJbmRleCIpLDEwKSsxfSk7Cn10aGlzLm1vZGFsLmh0bWwodGhpcy5lbCk7CnZhciBFPXRoaXMubW9kYWw7CmlmKHVuZGVmaW5lZD09PUQuY2xvc2VCdXR0b258fCEhRC5jbG9zZUJ1dHRvbil7aWYoIXRoaXMubW9kYWxDbG9zZSl7dGhpcy5tb2RhbENsb3NlPSQoJzxhIGhyZWY9IiMiPjxpIGNsYXNzPSJpY29uIG1vZGFsIGNsb3NlIHRvcFJpZ2h0Ij48L2k+PC9hPicpLmF0dHIoInJvbGUiLCJidXR0b24iKS5wcmVwZW5kVG8odGhpcy5lbCk7Cn10aGlzLm1vZGFsQ2xvc2UuY2xpY2sodGhpcy5jbG9zZSk7Cn1lbHNle3RoaXMubW9kYWxDbG9zZT1udWxsOwp9aWYodW5kZWZpbmVkPT09RC5jbG9zZU9uQ2xpY2t8fCEhRC5jbG9zZU9uQ2xpY2spe0MuZWwuY2xpY2sodGhpcy5jbG9zZSk7Cn12YXIgQT0kKGRvY3VtZW50LmJvZHkpOwp0aGlzLl9vcmlnUG9zPUEuY3NzKCJwb3NpdGlvbiIpOwpBLmNzcyh7InBvc2l0aW9uIjoic3RhdGljIn0pOwp0aGlzLmNlbnRlcihFKTsKdGhpcy5vdmVybGF5LnNob3coKTsKdGhpcy5tb2RhbC5zaG93KCk7CmlmKHRoaXMubW9kYWxDbG9zZSl7dGhpcy5tb2RhbENsb3NlLnNob3coKTsKfX0sY2xvc2U6ZnVuY3Rpb24oQSl7dGhpcy5vdmVybGF5LmhpZGUoKTsKdGhpcy5tb2RhbC5oaWRlKCk7CiQoZG9jdW1lbnQuYm9keSkuY3NzKHsicG9zaXRpb24iOnRoaXMuX29yaWdQb3N9KTsKaWYodGhpcy5ldmVudENhbGxlcil7dmFyIEI9e307CmlmKEEpe0IudGFyZ2V0PUEudGFyZ2V0Owp9JCh0aGlzLmV2ZW50Q2FsbGVyKS50cmlnZ2VyKCJiYXg6Y2xvc2UiLEIpOwp9cmV0dXJuIGZhbHNlOwp9LGNsb3NlQ2hyb21lOmZ1bmN0aW9uKEEpe3RoaXMubW9kYWwuaGlkZSgpOwp9LG9wZW46ZnVuY3Rpb24oKXt0aGlzLnNob3dNb2RhbCh0aGlzLm9wdGlvbnMpOwp0aGlzLm92ZXJsYXkuc2hvdygpOwp0aGlzLm1vZGFsLnNob3coKTsKfSxjZW50ZXI6ZnVuY3Rpb24oQyxFKXt2YXIgQT1DLmlzKCI6dmlzaWJsZSIpOwppZighQSl7Qy5zaG93KCk7Cn10aGlzLm1vZGFsLmNzcyh7dG9wOiI1MCUiLGxlZnQ6IjUwJSJ9KTsKdmFyIEQ9TWF0aC5taW4odGhpcy4kZWwud2lkdGgoKSwkKHdpbmRvdykud2lkdGgoKSk7CnZhciBCPU1hdGgubWluKHRoaXMuJGVsLmhlaWdodCgpLCQod2luZG93KS5oZWlnaHQoKSk7CkQ9KEQvMikqLTE7CkI9KEIvMikqLTE7CnRoaXMuJGVsLmNzcyh7InBvc2l0aW9uIjoicmVsYXRpdmUiLCJsZWZ0IjpEKyJweCIsInRvcCI6QisicHgifSk7Cn19KTsKCgoKClJULkJhY2tib25lLlZpZXdzLkhvdmVyQnViYmxlPUJhY2tib25lLlZpZXcuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKCl7Xy5iaW5kQWxsKHRoaXMpOwpfLnRlbXBsYXRlU2V0dGluZ3M9e2ludGVycG9sYXRlOi9ce1x7KFtcc1xTXSs/KVx9XH0vZyxldmFsdWF0ZTovXHslKFtcc1xTXSs/KSVcfS9nfTsKdGhpcy5ob3ZlckJ1YmJsZVRtcGw9JCh0aGlzLiRlbCkuZmluZCgiLmhvdmVyQnViYmxlVG1wbCIpLmh0bWwoKTsKdGhpcy5yZW1vdmVUaW1lb3V0PW51bGw7Cn0sZXZlbnRzOnsibW91c2VlbnRlciAubW92aWVfbGlzdCB0ciI6Im9ubW91c2VlbnRlclJvdyIsIm1vdXNlbGVhdmUgLm1vdmllX2xpc3QgdHIiOiJvbm1vdXNlbGVhdmVSb3ciLCJtb3VzZWVudGVyIC5ob3ZlckJ1YmJsZSI6Im9ubW91c2VlbnRlckJ1YmJsZSIsIm1vdXNlbGVhdmUgLmhvdmVyQnViYmxlIjoib25tb3VzZWxlYXZlQnViYmxlIiwiY2xpY2sgLm1vdmllX2xpc3QgdHIiOiJjbGlja1JvdyJ9LG9ubW91c2VlbnRlclJvdzpmdW5jdGlvbihCKXt2YXIgQT10aGlzOwp2YXIgQz0kKEIuY3VycmVudFRhcmdldCk7CmlmKEMuZGF0YSgiYnViYmxlIikpe3RoaXMuY2FuY2VsUmVtb3ZlSG92ZXJCdWJibGUoQy5kYXRhKCJidWJibGUiKSk7Cn1lbHNle3RoaXMucmVuZGVySG92ZXJCdWJibGUoQyk7Cn19LG9ubW91c2VsZWF2ZVJvdzpmdW5jdGlvbihBKXt0aGlzLnJlbW92ZUhvdmVyQnViYmxlKCQoQS5jdXJyZW50VGFyZ2V0KS5kYXRhKCJidWJibGUiKSx0cnVlKTsKfSxjbGlja1JvdzpmdW5jdGlvbihBKXt0aGlzLnJlbW92ZUhvdmVyQnViYmxlKCQoQS5jdXJyZW50VGFyZ2V0KS5kYXRhKCJidWJibGUiKSx0cnVlKTsKfSxvbm1vdXNlZW50ZXJCdWJibGU6ZnVuY3Rpb24oQSl7dGhpcy5jYW5jZWxSZW1vdmVIb3ZlckJ1YmJsZSgkKEEuY3VycmVudFRhcmdldCkpOwp9LG9ubW91c2VsZWF2ZUJ1YmJsZTpmdW5jdGlvbihBKXt0aGlzLnJlbW92ZUhvdmVyQnViYmxlKCQoQS5jdXJyZW50VGFyZ2V0KSk7Cn0scmVuZGVySG92ZXJCdWJibGU6ZnVuY3Rpb24oSil7dmFyIEM9MjIwOwp2YXIgST0xNzA7CnZhciBGPUoucG9zaXRpb24oKTsKdW5pdD10aGlzLiRlbGU7CnZhciBHLEI7CmlmKEoucG9zaXRpb24oKS50b3A8SSl7Qj1KLnBvc2l0aW9uKCkudG9wOwpHPTA7Cn1lbHNle2lmKEoub2Zmc2V0KCkudG9wKyhDLUkpPiQod2luZG93KS5zY3JvbGxUb3AoKSskKHdpbmRvdykuaGVpZ2h0KCkpe0I9KEoub2Zmc2V0KCkudG9wLSQod2luZG93KS5zY3JvbGxUb3AoKSktJCh3aW5kb3cpLmhlaWdodCgpK0M7Ckc9Ri50b3AtQjsKfWVsc2V7Rz1GLnRvcC1JOwpCPUk7Cn19dmFyIEg9Si5kYXRhKCJtb3ZpZS1pZCIpOwp2YXIgQT1KLmRhdGEoInNlYXNvbi1pZCIpOwp2YXIgRD0kKCc8ZGl2IGNsYXNzPSJob3ZlckJ1YmJsZSBmYWRlIGluIj48L2Rpdj4nKTsKRC5jc3MoInRvcCIsRyk7CkQuZGF0YSgicm93IixKKTsKRC5wcmVwZW5kKCI8c3R5bGU+LmhvdmVyQnViYmxlIC5idWJibGVDb250ZW50OmJlZm9yZSB7IHRvcDoiK0IrInB4OyB9IC5ob3ZlckJ1YmJsZSAuYnViYmxlQ29udGVudDphZnRlciB7IHRvcDoiKyhCKzEpKyJweDsgfTwvc3R5bGU+Iik7CnRoaXMuJGVsLmFwcGVuZChEKTsKSi5kYXRhKCJidWJibGUiLEQpOwp2YXIgRT10aGlzOwppZihIKXtSVC5vcmQubW92aWVzLmdldEN1cnJlbnRVc2VyUmF0aW5nKEgpLmRlZmVycmVkLmRvbmUoZnVuY3Rpb24oSyl7dmFyIEw9JChfLnRlbXBsYXRlKEUuaG92ZXJCdWJibGVUbXBsLEsubWVkaWEpKTsKRC5hcHBlbmQoTCk7CkUuaW5pdFJhdGluZ1dpZGdldChEKTsKfSk7Cn1lbHNle1JULm9yZC50dlNlYXNvbnMuZ2V0Q3VycmVudFVzZXJSYXRpbmcoQSkuZGVmZXJyZWQuZG9uZShmdW5jdGlvbihLKXt2YXIgTD0kKF8udGVtcGxhdGUoRS5ob3ZlckJ1YmJsZVRtcGwsSy5tZWRpYSkpOwpELmFwcGVuZChMKTsKRS5pbml0UmF0aW5nV2lkZ2V0KEQpOwp9KTsKfX0saW5pdFJhdGluZ1dpZGdldDpmdW5jdGlvbihBKXt2YXIgQj1BLmZpbmQoIi5yYXRpbmdfd2lkZ2V0Iik7CkIuZGF0YSgicmF0aW5nVmlldyIsbmV3IFJULkJhY2tib25lLlZpZXdzLlJhdGluZ1dpZGdldCh7ZWw6Qn0pKTsKQi5kYXRhKCJmYlZpZXciLG5ldyBSVC5CYWNrYm9uZS5WaWV3cy5GYWNlYm9va01hbmFnZXIoe2VsOkJ9KSk7Cn0scmVtb3ZlSG92ZXJCdWJibGU6ZnVuY3Rpb24oQSxCKXtpZihBIT11bmRlZmluZWQpe2lmKEIpe0EuaGlkZSgpOwp9ZWxzZXtBLnJlbW92ZUNsYXNzKCJpbiIpOwp9QS5kYXRhKCJyZW1vdmVUaW1lb3V0IixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoQS5kYXRhKCJyb3ciKSE9dW5kZWZpbmVkKXtBLmRhdGEoInJvdyIpLnJlbW92ZURhdGEoImJ1YmJsZSIpOwp9dmFyIEM9QS5maW5kKCIucmF0aW5nX3dpZGdldCIpOwppZihDLmRhdGEoInJhdGluZ1ZpZXciKSl7Qy5kYXRhKCJyYXRpbmdWaWV3IikucmVtb3ZlKCk7Cn1pZihDLmRhdGEoImZiVmlldyIpKXtDLmRhdGEoImZiVmlldyIpLnJlbW92ZSgpOwp9QS5yZW1vdmUoKTsKfSw1MDApKTsKfX0sY2FuY2VsUmVtb3ZlSG92ZXJCdWJibGU6ZnVuY3Rpb24oQSl7Y2xlYXJUaW1lb3V0KEEuZGF0YSgicmVtb3ZlVGltZW91dCIpKTsKQS5yZW1vdmVEYXRhKCJyZW1vdmVUaW1lb3V0Iik7CkEuc2hvdygpLmFkZENsYXNzKCJpbiIpOwp9fSk7CgoKCgpSVC5CYWNrYm9uZS5Nb2RlbHMuTWVkaWE9QmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtzdGFyQ2xhc3Nlczoic2NvcmUwMCBzY29yZTA1IHNjb3JlMTAgc2NvcmUxNSBzY29yZTIwIHNjb3JlMjUgc2NvcmUzMCBzY29yZTM1IHNjb3JlNDAgc2NvcmU0NSBzY29yZTUwIixzeW5jOmZ1bmN0aW9uKEQsQyxCKXtpZihEPT0icGF0Y2gifHxEPT0idXBkYXRlInx8RD09ImNyZWF0ZSIpe3ZhciBBPVJULnNvY2lhbF9pbml0LnBpcGUoZnVuY3Rpb24oKXt2YXIgRT1CLnhocj1CYWNrYm9uZS5hamF4KHt0eXBlOiJQT1NUIix1cmw6Xy5yZXN1bHQoQywidXJsIil8fHVybEVycm9yKCksZGF0YTp7cmV2aWV3OkMuZ2V0KCJyZXZpZXciKSxzY29yZTpDLmdldCgic2NvcmUiKSxzb3VyY2U6Qy5nZXQoInNvdXJjZSIpfX0pOwpDLnRyaWdnZXIoInJlcXVlc3QiLEMsRSxCKTsKcmV0dXJuIEU7Cn0pOwpyZXR1cm4gQTsKfWVsc2V7cmV0dXJuIEJhY2tib25lLnN5bmMuY2FsbCh0aGlzLEQsQyxCKTsKfX0sbG9naW5JZk5lY2Vzc2FyeTpmdW5jdGlvbigpe2lmKFJULkxvZ2luU3RhdHVzTW9kZWwuZ2V0KCJsb2dpblBsYXRmb3JtQ29kZSIpPT11bmRlZmluZWR8fFJULkxvZ2luU3RhdHVzTW9kZWwuZ2V0KCJsb2dpblBsYXRmb3JtQ29kZSIpPT0iVW5rbm93biIpe3ZhciBCPSQodGhpcyk7CnZhciBBPUIuYXR0cigic2NvcGUiKTsKaWYoQT09dW5kZWZpbmVkKXtBPSJlbWFpbCxwdWJsaXNoX2FjdGlvbnMiOwp9RkIubG9naW4oZnVuY3Rpb24oQyl7ZmJfY29ubmVjdGVkLmRvbmUoZnVuY3Rpb24oKXtpZihCLmRhdGEoInJlZGlyZWN0IikhPXVuZGVmaW5lZCl7d2luZG93LmxvY2F0aW9uLmhyZWY9Qi5kYXRhKCJyZWRpcmVjdCIpOwp9fSk7CmlmKCFDLmF1dGhSZXNwb25zZSl7Y29uc29sZS5sb2coIlVzZXIgY2FuY2VsbGVkIEZhY2Vib29rIGxvZ2luIG9yIGRpZCBub3QgZnVsbHkgYXV0aG9yaXplLiIpOwokKCIud3RzIix0aGlzLmVsKS5yZW1vdmVDbGFzcygib24iKTsKJCgiLm5pIix0aGlzLmVsKS5yZW1vdmVDbGFzcygib24iKTsKJCgiLnN0YXJzIix0aGlzLmVsKS5yZW1vdmVDbGFzcyh0aGlzLnN0YXJDbGFzc2VzKS5hZGRDbGFzcygic3RhcnMgY2xlYXIgZmwiKTsKJCgiI3Jldmlld190ZXh0IikudmFsKCIiKTsKfX0se3Njb3BlOkF9KTsKfX19KTsKUlQuQmFja2JvbmUuTW9kZWxzLk1vdmllPVJULkJhY2tib25lLk1vZGVscy5NZWRpYS5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oKXt9LHBhcnNlOmZ1bmN0aW9uKEIsQSl7Qi5pZD1CLm1lZGlhLmlkOwpyZXR1cm4gQjsKfSxsb2dpbkFuZFNhdmU6ZnVuY3Rpb24oQyxBLEIpe3RoaXMubG9naW5JZk5lY2Vzc2FyeSgpOwp0aGlzLnNhdmUoKTsKaWYoQyE9PSIiKXtkYXRhTGF5ZXIucHVzaCh7ImV2ZW50IjoiUmF0aW5nV2lkZ2V0IiwibWVkaWFUeXBlIjoiTW92aWUiLCJ0YXJnZXQiOkIsImFjdGlvbiI6Q30pOwp9aWYoQSE9PSIiKXtkYXRhTGF5ZXIucHVzaCh7ImV2ZW50IjoiUmF0aW5nV2lkZ2V0IiwibWVkaWFUeXBlIjoiTW92aWUiLCJ0YXJnZXQiOkIsImFjdGlvbiI6IlJldmlldyJ9KTsKfX19KTsKUlQuQmFja2JvbmUuTW9kZWxzLlR2U2Vhc29uPVJULkJhY2tib25lLk1vZGVscy5NZWRpYS5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oKXt9LHBhcnNlOmZ1bmN0aW9uKEIsQSl7Qi5pZD1CLm1lZGlhLmlkOwpyZXR1cm4gQjsKfSxsb2dpbkFuZFNhdmU6ZnVuY3Rpb24oQyxBLEIpe3RoaXMubG9naW5JZk5lY2Vzc2FyeSgpOwp0aGlzLnNhdmUoKTsKaWYoQyE9PSIiKXtkYXRhTGF5ZXIucHVzaCh7ImV2ZW50IjoiUmF0aW5nV2lkZ2V0IiwibWVkaWFUeXBlIjoiVFYiLCJ0YXJnZXQiOkIsImFjdGlvbiI6Q30pOwp9aWYoQSE9PSIiKXtkYXRhTGF5ZXIucHVzaCh7ImV2ZW50IjoiUmF0aW5nV2lkZ2V0IiwibWVkaWFUeXBlIjoiVFYiLCJ0YXJnZXQiOkIsImFjdGlvbiI6IlJldmlldyJ9KTsKfX19KTsKUlQuQmFja2JvbmUuQ29sbGVjdGlvbnMuTW92aWVDb2xsZWN0aW9uPUJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHttb2RlbDpSVC5CYWNrYm9uZS5Nb2RlbHMuTW92aWUsdXJsOiIvYXBpL3ByaXZhdGUvdjEuMC91c2Vycy9jdXJyZW50L3JhdGluZ3MvIixnZXRDdXJyZW50VXNlclJhdGluZzpmdW5jdGlvbihCKXt2YXIgQTsKaWYodGhpcy5nZXQoQik9PW51bGwpe0E9bmV3IFJULkJhY2tib25lLk1vZGVscy5Nb3ZpZSh7aWQ6Qn0se2NvbGxlY3Rpb246dGhpc30pOwpBLmRlZmVycmVkPUEuZmV0Y2goKTsKdGhpcy5hZGQoQSk7Cn1lbHNle0E9dGhpcy5nZXQoQik7Cn1yZXR1cm4gQTsKfX0pOwpSVC5CYWNrYm9uZS5Db2xsZWN0aW9ucy5UdlNlYXNvbkNvbGxlY3Rpb249QmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoe21vZGVsOlJULkJhY2tib25lLk1vZGVscy5UdlNlYXNvbix1cmw6Ii9hcGkvcHJpdmF0ZS92MS4wL3VzZXJzL2N1cnJlbnQvdHZyYXRpbmdzLyIsZ2V0Q3VycmVudFVzZXJSYXRpbmc6ZnVuY3Rpb24oQil7dmFyIEE7CmlmKHRoaXMuZ2V0KEIpPT1udWxsKXtBPW5ldyBSVC5CYWNrYm9uZS5Nb2RlbHMuVHZTZWFzb24oe2lkOkJ9LHtjb2xsZWN0aW9uOnRoaXN9KTsKQS5kZWZlcnJlZD1BLmZldGNoKCk7CnRoaXMuYWRkKEEpOwp9ZWxzZXtBPXRoaXMuZ2V0KEIpOwp9cmV0dXJuIEE7Cn19KTsKUlQuQmFja2JvbmUuVmlld3MuUmF0aW5nV2lkZ2V0PUJhY2tib25lLlZpZXcuZXh0ZW5kKHtzdGFyQ2xhc3Nlczoic2NvcmUwMCBzY29yZTA1IHNjb3JlMTAgc2NvcmUxNSBzY29yZTIwIHNjb3JlMjUgc2NvcmUzMCBzY29yZTM1IHNjb3JlNDAgc2NvcmU0NSBzY29yZTUwIixpbml0aWFsaXplOmZ1bmN0aW9uKCl7Xy5iaW5kQWxsKHRoaXMsInJlbmRlciIsImluaXRpYWxSZW5kZXIiLCJjaGFuZ2VSYXRpbmciLCJwb3N0UmV2aWV3Iik7CnRoaXMubG9jYXRpb249dGhpcy4kZWwuZGF0YSgibG9jYXRpb24iKXx8Ik1PQiI7CnZhciBCPXRoaXMuJGVsLmRhdGEoIm1lZGlhLWlkIik7CnZhciBBPXRoaXMuJGVsLmRhdGEoInR5cGUiKTsKaWYoQT09Im1vdmllIil7dGhpcy5tb2RlbD1SVC5vcmQubW92aWVzLmdldEN1cnJlbnRVc2VyUmF0aW5nKEIpOwp9ZWxzZXtpZihBPT0ic2Vhc29uIil7dGhpcy5tb2RlbD1SVC5vcmQudHZTZWFzb25zLmdldEN1cnJlbnRVc2VyUmF0aW5nKEIpOwp9ZWxzZXtjb25zb2xlLmVycm9yKCJSYXRpbmcgd2lkZ2V0IC0gaW52YWxpZCBtZWRpYSB0eXBlIik7Cn19dGhpcy5tb2RlbC5kZWZlcnJlZC5kb25lKHRoaXMuaW5pdGlhbFJlbmRlcik7Cn0sZXZlbnRzOnsiY2xpY2sgLnJhdGluZ19idXR0b25zIGlucHV0IjoiY2hhbmdlUmF0aW5nIiwibW91c2Vtb3ZlIC5zdGFycyI6InN0YXJNb3VzZW1vdmUiLCJtb3VzZW91dCAuc3RhcnMiOiJzdGFyTW91c2VvdXQiLCJjbGljayAucG9zdF9idXR0b24iOiJwb3N0UmV2aWV3IiwiY2xpY2sgLmVkaXRfYnV0dG9uIjoiZWRpdFJldmlldyJ9LGNoYW5nZVJhdGluZzpmdW5jdGlvbihFKXt2YXIgRD10aGlzLiRlbC5kYXRhKCJzb3VyY2UiKTsKdmFyIEY9JChFLmN1cnJlbnRUYXJnZXQpLnZhbCgpOwppZighRil7dmFyIEE9JCgiLnN0YXJzIix0aGlzLmVsKTsKdmFyIEM9JChFLmN1cnJlbnRUYXJnZXQpLndpZHRoKCk7CnZhciBCPUUucGFnZVgtQS5vZmZzZXQoKS5sZWZ0OwpGPXRoaXMuY29tcHV0ZVNjb3JlKEMsQik7Cn1pZighRCl7RD0iUlRNIjsKfXRoaXMubW9kZWwuc2V0KCJzb3VyY2UiLEQpOwp0aGlzLm1vZGVsLnNldCgic2NvcmUiLEYpOwp0aGlzLm1vZGVsLmxvZ2luQW5kU2F2ZShGLCIiLHRoaXMubG9jYXRpb24pOwp9LHN0YXJNb3VzZW1vdmU6ZnVuY3Rpb24oRCl7dmFyIEE9JCgiLnN0YXJzIix0aGlzLmVsKTsKdmFyIEM9JChELmN1cnJlbnRUYXJnZXQpLndpZHRoKCk7CnZhciBCPUQucGFnZVgtQS5vZmZzZXQoKS5sZWZ0Owp2YXIgRT10aGlzLmNvbXB1dGVTY29yZShDLEIpOwpBLnJlbW92ZUNsYXNzKHRoaXMuc3RhckNsYXNzZXMpLmFkZENsYXNzKCJzY29yZSIrRS5yZXBsYWNlKCIuIiwiIikpOwp9LHN0YXJNb3VzZW91dDpmdW5jdGlvbigpe3ZhciBBPSQoIi5zdGFycyIsdGhpcy5lbCk7CkEucmVtb3ZlQ2xhc3ModGhpcy5zdGFyQ2xhc3Nlcyk7CnZhciBCPXRoaXMubW9kZWwuZ2V0KCJzY29yZSIpOwppZigkLmlzTnVtZXJpYyhCKSl7QS5hZGRDbGFzcygic2NvcmUiK0IucmVwbGFjZSgiLiIsIiIpKTsKfX0scG9zdFJldmlldzpmdW5jdGlvbigpe3ZhciBBPSQoIi5yZXZpZXciLHRoaXMuZWwpOwp2YXIgQz10aGlzLiRlbC5kYXRhKCJzb3VyY2UiKTsKaWYoQSE9dW5kZWZpbmVkJiZBLnZhbCgpLmxlbmd0aD4wKXskKCIucG9zdF9idXR0b24iLHRoaXMuZWwpLmhpZGUoKTsKQS5hZGRDbGFzcygiZGlzYWJsZWQiKTsKfXZhciBCPSQoIi5lZGl0X2J1dHRvbiIsdGhpcy5lbCk7CiQoIi5zdGF0dXMiKS5hZGRDbGFzcygid2FpdCIpOwpCLmh0bWwoIlNhdmVkIikuc2hvdygpLmRlbGF5KDMwMDApLmZhZGVPdXQoInNsb3ciLGZ1bmN0aW9uKCl7Qi5odG1sKCJFZGl0Iik7CmlmKEEhPXVuZGVmaW5lZCYmQS52YWwoKS5sZW5ndGg+MCl7Qi5zaG93KCk7Cn0kKCIuc3RhdHVzIikucmVtb3ZlQ2xhc3MoIndhaXQiKTsKfSk7CmlmKCFDKXtDPSJSVE0iOwp9dGhpcy5tb2RlbC5zZXQoInNvdXJjZSIsQyk7CnRoaXMubW9kZWwuc2V0KCJyZXZpZXciLEEudmFsKCkpOwp0aGlzLm1vZGVsLmxvZ2luQW5kU2F2ZSgiIixBLnZhbCgpLHRoaXMubG9jYXRpb24pOwp9LGVkaXRSZXZpZXc6ZnVuY3Rpb24oKXskKCIucmV2aWV3Iix0aGlzLmVsKS5yZW1vdmVDbGFzcygiZGlzYWJsZWQiKTsKJCgiLmVkaXRfYnV0dG9uIix0aGlzLmVsKS5oaWRlKCk7Cn0sY29tcHV0ZVNjb3JlOmZ1bmN0aW9uKEIsQSl7dmFyIEM9OTAqKEEvQik7CnZhciBEPSIwLjAiOwppZig5MDxDKXtEPSI1LjAiOwp9ZWxzZXtpZig4MDxDKXtEPSI0LjUiOwp9ZWxzZXtpZig3MDxDKXtEPSI0LjAiOwp9ZWxzZXtpZig2MDxDKXtEPSIzLjUiOwp9ZWxzZXtpZig1MDxDKXtEPSIzLjAiOwp9ZWxzZXtpZig0MDxDKXtEPSIyLjUiOwp9ZWxzZXtpZigzMDxDKXtEPSIyLjAiOwp9ZWxzZXtpZigyMDxDKXtEPSIxLjUiOwp9ZWxzZXtpZigxMDxDKXtEPSIxLjAiOwp9ZWxzZXtpZig1PEMpe0Q9IjAuNSI7Cn19fX19fX19fX1yZXR1cm4gRDsKfSxpbml0aWFsUmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoKTsKdGhpcy5yZW5kZXJGYWNlcGlsZSgpOwp0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImNoYW5nZSIsdGhpcy5yZW5kZXIpOwp9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciBHPXRoaXMubW9kZWwuZ2V0KCJzY29yZSIpOwp2YXIgRD10aGlzLm1vZGVsLmdldCgicmV2aWV3Iik7CnZhciBFPSQoIi53dHMiLHRoaXMuZWwpOwp2YXIgRj0kKCIubmkiLHRoaXMuZWwpOwp2YXIgQj0kKCIuc3RhcnMiLHRoaXMuZWwpOwpFLnJlbW92ZUNsYXNzKCJvbiIpOwpGLnJlbW92ZUNsYXNzKCJvbiIpOwpCLnJlbW92ZUNsYXNzKHRoaXMuc3RhckNsYXNzZXMpOwppZihHIT11bmRlZmluZWQpe2lmKEc9PSIrIil7RS5hZGRDbGFzcygib24iKS5zaG93KCk7Cn1lbHNle2lmKEc9PSItIil7Ri5hZGRDbGFzcygib24iKS5zaG93KCk7Cn1lbHNle0IuYWRkQ2xhc3MoInNjb3JlIitHLnJlcGxhY2UoIi4iLCIiKSk7CmlmKHRoaXMuJGVsLmRhdGEoImhpZGUtd3RzbmkiKSl7RS5oaWRlKCk7CkYuaGlkZSgpOwp9fX19dmFyIEE9JCgiLnJldmlldyIsdGhpcy5lbCk7CnZhciBDPSQoIi5lZGl0X2J1dHRvbiIsdGhpcy5lbCk7CmlmKEE9PXVuZGVmaW5lZHx8QS52YWwoKT09dW5kZWZpbmVkfHxBLnZhbCgpLmxlbmd0aD09MCl7QS52YWwoRCk7CiQoIi5wb3N0X2J1dHRvbiIsdGhpcy5lbCkuaGlkZSgpOwppZihEIT11bmRlZmluZWQmJkQubGVuZ3RoPjApe0EuYWRkQ2xhc3MoImRpc2FibGVkIik7CkMuc2hvdygpOwppZihBWzBdIT11bmRlZmluZWQpe0EuaGVpZ2h0KEFbMF0uc2Nyb2xsSGVpZ2h0KTsKfX1lbHNle0MuaGlkZSgpOwp9fX0scmVuZGVyRmFjZXBpbGU6ZnVuY3Rpb24oKXt2YXIgQj10aGlzLm1vZGVsLmdldCgiZnJpZW5kc19yYXRpbmdzIik7CmlmKEIpe3ZhciBDPTA7CnZhciBBPXRoaXMuJGVsLmZpbmQoIi5mYWNlcGlsZSIpOwokLmVhY2goQixmdW5jdGlvbihELEUpe2lmKEUudHlwZT09ImZibGlrZSJ8fCgkLmlzTnVtZXJpYyhFLnJhdGluZykmJnBhcnNlRmxvYXQoRS5yYXRpbmcpPj0zKXx8RS5yYXRpbmc9PSJ3dHMiKXtBLmFwcGVuZCgiPGltZyBzcmM9JyIrRS51c2VyLnBpY3R1cmUrIicgLz4iKTsKQysrOwp9fSk7CmlmKEM+MCl7QS5hcHBlbmQoIjxzcGFuIGNsYXNzPSdmYWNlcGlsZS1jYXB0aW9uJz4iK0MrKEM9PTE/IiBmcmllbmQgbGlrZXMgaXQiOiIgZnJpZW5kcyBsaWtlIGl0IikpOwp9fX19KTsKUlQuQmFja2JvbmUuVmlld3MuRmFjZWJvb2tNYW5hZ2VyPUJhY2tib25lLlZpZXcuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKCl7Xy5iaW5kQWxsKHRoaXMsInJlbmRlciIsImluaXRpYWxSZW5kZXIiLCJ0b2dnbGUiLCJwb3N0UmV2aWV3Iik7CnZhciBBPSQodGhpcy5lbCkuZGF0YSgidHlwZSIpOwp2YXIgQj0kKHRoaXMuZWwpLmRhdGEoIm1lZGlhLWlkIik7CmlmKEE9PSJtb3ZpZSIpe3RoaXMubW9kZWw9UlQub3JkLm1vdmllcy5nZXRDdXJyZW50VXNlclJhdGluZyhCKTsKfWVsc2V7aWYoQT09InNlYXNvbiIpe3RoaXMubW9kZWw9UlQub3JkLnR2U2Vhc29ucy5nZXRDdXJyZW50VXNlclJhdGluZyhCKTsKfWVsc2V7Y29uc29sZS5lcnJvcigiRmFjZWJvb2tNYW5hZ2VyOiBpbnZhbGlkIG1lZGlhIHR5cGUiKTsKfX10aGlzLm1vZGVsLmRlZmVycmVkLmRvbmUodGhpcy5pbml0aWFsUmVuZGVyKTsKfSxpbml0aWFsUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIEE9JCgiLmZiX2J1dHRvbiIsdGhpcy5lbCk7CmlmKEEuaGFzQ2xhc3MoInRydWUiKSYmUlQuTG9naW5TdGF0dXNNb2RlbC5nZXQoImxvZ2luUGxhdGZvcm1Db2RlIik9PSJGQksiKXtBLmFkZENsYXNzKCJvbiIpOwp9dGhpcy5yZW5kZXIoKTsKdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJjaGFuZ2UiLHRoaXMucmVuZGVyKTsKfSxldmVudHM6eyJjbGljayAucmF0aW5nX2J1dHRvbnMgaW5wdXQiOiJwb3N0UmV2aWV3IiwiY2xpY2sgLmZiX2J1dHRvbiI6InRvZ2dsZSIsImNsaWNrIC5lZGl0X2J1dHRvbiI6ImVkaXRSZXZpZXciLCJjbGljayAucG9zdF9idXR0b24iOiJwb3N0UmV2aWV3Iix9LHRvZ2dsZTpmdW5jdGlvbigpe3ZhciBBPSQoIi5mYl9idXR0b24iLHRoaXMuZWwpOwp2YXIgQz1SVC5Mb2dpblN0YXR1c01vZGVsLmdldCgiZmFjZWJvb2tJZCIpOwppZihSVC5Mb2dpblN0YXR1c01vZGVsLmdldCgibG9naW5QbGF0Zm9ybUNvZGUiKT09dW5kZWZpbmVkfHxSVC5Mb2dpblN0YXR1c01vZGVsLmdldCgibG9naW5QbGF0Zm9ybUNvZGUiKT09IlVua25vd24iKXt0aGlzLmxvZ2luSWZOZWNlc3NhcnkoKTsKfWlmKEEuaGFzQ2xhc3MoIm9uIikpe0EucmVtb3ZlQ2xhc3MoIm9uIik7Cn1lbHNle2lmKCFBLmhhc0NsYXNzKCJ0cnVlIikpe3ZhciBCPWNvbmZpcm0oIkFsd2F5cyBzaGFyZSByYXRpbmdzIG9uIEZhY2Vib29rPyIpOwppZihCKXskLnBvc3QoIi91c2VyL2FjY291bnQvZmFjZWJvb2stc2hhcmUtcmF0aW5nLXNldHRpbmcvIix7ZmFjZWJvb2tJZDpDLHNoYXJpbmdFbmFibGVkOnRydWV9LCJqc29uIikuY29tcGxldGUoJC5wcm94eSh0aGlzLm9uUmVzcG9uc2VSZWFkUmV2aWV3cyx0aGlzKSk7Cn19QS5hZGRDbGFzcygib24iKTsKfX0sbG9naW5JZk5lY2Vzc2FyeTpmdW5jdGlvbigpe3ZhciBCPSQodGhpcyk7CnZhciBBPUIuYXR0cigic2NvcGUiKTsKaWYoQT09dW5kZWZpbmVkKXtBPSJlbWFpbCxwdWJsaXNoX2FjdGlvbnMiOwp9RkIubG9naW4oZnVuY3Rpb24oQyl7ZmJfY29ubmVjdGVkLmRvbmUoZnVuY3Rpb24oKXtpZihCLmRhdGEoInJlZGlyZWN0IikhPXVuZGVmaW5lZCl7d2luZG93LmxvY2F0aW9uLmhyZWY9Qi5kYXRhKCJyZWRpcmVjdCIpOwp9fSk7Cn0se3Njb3BlOkF9KTsKfSxlZGl0UmV2aWV3OmZ1bmN0aW9uKCl7aWYoUlQuTG9naW5TdGF0dXNNb2RlbC5nZXQoImxvZ2luUGxhdGZvcm1Db2RlIik9PSJGQksiKXskKCIuZmJfYnV0dG9uIix0aGlzLmVsKS5zaG93KCk7Cn19LHBvc3RSZXZpZXc6ZnVuY3Rpb24oKXt2YXIgQj10aGlzLm1vZGVsLmdldCgic2NvcmUiKTsKdmFyIEE9dGhpcy5tb2RlbC5nZXQoInJldmlldyIpOwppZihSVC5Mb2dpblN0YXR1c01vZGVsLmdldCgibG9naW5QbGF0Zm9ybUNvZGUiKT09IkZCSyImJiQoIi5mYl9idXR0b24iLHRoaXMuZWwpLmhhc0NsYXNzKCJvbiIpJiZCIT11bmRlZmluZWQpe3RoaXMucG9zdFRvRmFjZWJvb2soQixBKTsKfX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIEI9dGhpcy5tb2RlbC5nZXQoInJldmlldyIpOwp2YXIgQT0kKCIuZmJfYnV0dG9uIix0aGlzLmVsKTsKaWYoKEIhPXVuZGVmaW5lZCYmQi5sZW5ndGg+MCl8fFJULkxvZ2luU3RhdHVzTW9kZWwuZ2V0KCJsb2dpblBsYXRmb3JtQ29kZSIpIT0iRkJLIil7QS5oaWRlKCk7Cn1lbHNle0Euc2hvdygpOwp9fSxwb3N0VG9GYWNlYm9vazpmdW5jdGlvbihFLEIpe2lmKCQoIi5mYl9idXR0b24iKS5oYXNDbGFzcygib24iKSl7Y29uc29sZS5sb2coIlBvc3RpbmcgdG8gRmFjZWJvb2suIik7CnZhciBEPUIhPXVuZGVmaW5lZCYmQi5sZW5ndGg+MDsKdmFyIEM9dGhpcy5tb2RlbC51cmwoKS5pbmRleE9mKCJ0dnJhdGluZ3MiKT09LTE7CkZCLmFwaSgiL21lL3ZpZGVvLndhbnRzX3RvX3dhdGNoIix7b2JqZWN0OiQobG9jYXRpb24pLmF0dHIoImhyZWYiKX0sZnVuY3Rpb24oRyl7aWYoRy5kYXRhJiZHLmRhdGEubGVuZ3RoPjApe3ZhciBGPUcuZGF0YVswXTsKY29uc29sZS5sb2coIlByZXYgYWN0aW9uIGZvdW5kIChpZD0iK0YuaWQrIiB0eXBlPSIrRi50eXBlKyIpLiBEZWxldGluZy4iKTsKRkIuYXBpKCIvIitGLmlkLCJkZWxldGUiLGZ1bmN0aW9uKCl7Y29uc29sZS5sb2coRi50eXBlKyIgZGVsZXRlZCIpOwp9KTsKfWVsc2V7Y29uc29sZS5sb2coIk5vIHByZXZpb3VzIHZpZGVvOndhbnRzX3RvX3dhdGNoIGFjdGlvbnMgZm91bmQiKTsKfX0pOwpGQi5hcGkoIi9tZS92aWRlby5yYXRlcyIse29iamVjdDokKGxvY2F0aW9uKS5hdHRyKCJocmVmIil9LGZ1bmN0aW9uKEcpe2lmKEcuZGF0YSYmRy5kYXRhLmxlbmd0aD4wKXt2YXIgRj1HLmRhdGFbMF07CmNvbnNvbGUubG9nKCJQcmV2IGFjdGlvbiBmb3VuZCAoaWQ9IitGLmlkKyIgdHlwZT0iK0YudHlwZSsiKS4gRGVsZXRpbmcuIik7CkZCLmFwaSgiLyIrRi5pZCwiZGVsZXRlIixmdW5jdGlvbigpe2NvbnNvbGUubG9nKEYudHlwZSsiIGRlbGV0ZWQiKTsKfSk7Cn1lbHNle2NvbnNvbGUubG9nKCJObyBwcmV2aW91cyB2aWRlbzpyYXRlcyBhY3Rpb25zIGZvdW5kIik7Cn19KTsKdmFyIEE9JCgiLnNvY2lhbE1zZyIsdGhpcy5lbCk7CmlmKCJ3dHMiPT09RXx8IisiPT09RSl7QS5odG1sKCJQb3N0aW5nIHdhbnQgdG8gc2VlIikuc2hvdygpLmRlbGF5KDMwMDApLmZhZGVPdXQoInNsb3ciLGZ1bmN0aW9uKCl7QS5odG1sKCJBZGRlZCB0byB5b3VyIHRpbWVsaW5lIikuc2hvdygpOwp2YXIgRj17ImZiOmV4cGxpY2l0bHlfc2hhcmVkIjp0cnVlLCJleHBpcmVzX2luIjoxNTc2ODAwMH07CkZbQz8ibW92aWUiOiJ0dl9zaG93Il09JChsb2NhdGlvbikuYXR0cigiaHJlZiIpOwpGQi5hcGkoIi9tZS92aWRlby53YW50c190b193YXRjaCIsInBvc3QiLEYsZnVuY3Rpb24oRyl7aWYoIUd8fEcuZXJyb3Ipe2NvbnNvbGUubG9nKEcuZXJyb3IuY29kZSsiOiIrRy5lcnJvci5tZXNzYWdlKTsKfWVsc2V7Y29uc29sZS5sb2coRy5pZCsiIDogIisiQWN0aW9uIHdhcyBzdWNjZXNzZnVsIik7Cn19KTsKfSk7Cn1lbHNle2lmKCItIj09PUV8fCJuaSI9PT1FfHwiIj09PUV8fChFIT11bmRlZmluZWQmJnBhcnNlSW50KEUpPT0wKSl7QS5odG1sKCJSZW1vdmluZyBGYWNlYm9vayBhY3Rpb24iKS5zaG93KCkuZGVsYXkoMzAwMCkuZmFkZU91dCgic2xvdyIsZnVuY3Rpb24oKXtBLmh0bWwoIlJlbW92ZWQgZnJvbSB5b3VyIHRpbWVsaW5lIikuc2hvdygpOwp9KTsKfWVsc2V7aWYoIWlzTmFOKEUpJiZpc0Zpbml0ZShFKSl7QS5odG1sKCJQb3N0aW5nICIrRSsiIHN0YXIgcmF0aW5nIikuc2hvdygpLmRlbGF5KDMwMDApLmZhZGVPdXQoInNsb3ciLGZ1bmN0aW9uKCl7QS5odG1sKCJBZGRlZCB0byB5b3VyIHRpbWVsaW5lIikuc2hvdygpOwp2YXIgRj17InJhdGluZzp2YWx1ZSI6RSwicmF0aW5nOnNjYWxlIjo1LCJyYXRpbmc6bm9ybWFsaXplZF92YWx1ZSI6RS81LCJyZXZpZXdfdGV4dCI6QiwiZmI6ZXhwbGljaXRseV9zaGFyZWQiOnRydWUsImV4cGlyZXNfaW4iOjJ9OwpGW0M/Im1vdmllIjoidHZfc2hvdyJdPSQobG9jYXRpb24pLmF0dHIoImhyZWYiKTsKRkIuYXBpKCIvbWUvdmlkZW8ucmF0ZXMiLCJwb3N0IixGLGZ1bmN0aW9uKEcpe2lmKCFHfHxHLmVycm9yKXtjb25zb2xlLmxvZyhHLmVycm9yLmNvZGUrIjoiK0cuZXJyb3IubWVzc2FnZSk7Cn1lbHNle2NvbnNvbGUubG9nKEcuaWQrIiA6ICIrIkFjdGlvbiB3YXMgc3VjY2Vzc2Z1bCIpOwp9fSk7Cn0pOwp9fX19fX0pOwpSVC5vcmQ9e21vdmllczpuZXcgUlQuQmFja2JvbmUuQ29sbGVjdGlvbnMuTW92aWVDb2xsZWN0aW9uKCksdHZTZWFzb25zOm5ldyBSVC5CYWNrYm9uZS5Db2xsZWN0aW9ucy5UdlNlYXNvbkNvbGxlY3Rpb24oKX07CgoKCgo=",
                "body": "KGZ1bmN0aW9uKEQpe0QuZm4uakNhcm91c2VsTGl0ZT1mdW5jdGlvbihFKXtFPUQuZXh0ZW5kKHtidG5QcmV2Om51bGwsYnRuTmV4dDpudWxsLGJ0bkdvOm51bGwsbW91c2VXaGVlbDpmYWxzZSxhdXRvOm51bGwsc3BlZWQ6MjAwLGVhc2luZzpudWxsLHZlcnRpY2FsOmZhbHNlLGNpcmN1bGFyOnRydWUsdmlzaWJsZTozLHN0YXJ0OjAsc2Nyb2xsOjEsYmVmb3JlU3RhcnQ6bnVsbCxhZnRlckVuZDpudWxsfSxFfHx7fSk7CnJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgTj1mYWxzZSxMPUUudmVydGljYWw/InRvcCI6ImxlZnQiLEc9RS52ZXJ0aWNhbD8iaGVpZ2h0Ijoid2lkdGgiOwp2YXIgRj1EKHRoaXMpLFA9RCgidWwiLEYpLEk9RCgibGkiLFApLFQ9SS5zaXplKCksUz1FLnZpc2libGU7CmlmKEUuY2lyY3VsYXIpe1AucHJlcGVuZChJLnNsaWNlKFQtUy0xKzEpLmNsb25lKCkpLmFwcGVuZChJLnNsaWNlKDAsUykuY2xvbmUoKSk7CkUuc3RhcnQrPVM7Cn12YXIgUj1EKCJsaSIsUCksTz1SLnNpemUoKSxVPUUuc3RhcnQ7CkYuY3NzKCJ2aXNpYmlsaXR5IiwidmlzaWJsZSIpOwpSLmNzcyh7Im92ZXJmbG93IjoiaGlkZGVuIiwiZmxvYXQiOihFLnZlcnRpY2FsPyJub25lIjoibGVmdCIpfSk7ClAuY3NzKHsibWFyZ2luIjoiMCIsInBhZGRpbmciOiIwIiwicG9zaXRpb24iOiJyZWxhdGl2ZSIsImxpc3Qtc3R5bGUtdHlwZSI6Im5vbmUiLCJ6LWluZGV4IjoiMSJ9KTsKRi5jc3MoeyJvdmVyZmxvdyI6ImhpZGRlbiIsInBvc2l0aW9uIjoicmVsYXRpdmUiLCJ6LWluZGV4IjoiMSIsImxlZnQiOiIwcHgifSk7CnZhciBLPUUudmVydGljYWw/QShSKTpDKFIpOwp2YXIgUT1LKk87CnZhciBNPUsqUzsKUi5jc3Moe3dpZHRoOlIud2lkdGgoKSxoZWlnaHQ6Ui5oZWlnaHQoKX0pOwpQLmNzcyhHLFErInB4IikuY3NzKEwsLShVKkspKTsKRi5jc3MoRyxNKyJweCIpOwppZihFLmJ0blByZXYpe0QoRS5idG5QcmV2KS5jbGljayhmdW5jdGlvbigpe3JldHVybiBKKFUtRS5zY3JvbGwpOwp9KTsKfWlmKEUuYnRuTmV4dCl7RChFLmJ0bk5leHQpLmNsaWNrKGZ1bmN0aW9uKCl7cmV0dXJuIEooVStFLnNjcm9sbCk7Cn0pOwp9aWYoRS5idG5Hbyl7RC5lYWNoKEUuYnRuR28sZnVuY3Rpb24oVixXKXtEKFcpLmNsaWNrKGZ1bmN0aW9uKCl7cmV0dXJuIEooRS5jaXJjdWxhcj9FLnZpc2libGUrVjpWKTsKfSk7Cn0pOwp9aWYoRS5tb3VzZVdoZWVsJiZGLm1vdXNld2hlZWwpe0YubW91c2V3aGVlbChmdW5jdGlvbihWLFcpe3JldHVybiBXPjA/SihVLUUuc2Nyb2xsKTpKKFUrRS5zY3JvbGwpOwp9KTsKfWlmKEUuYXV0byl7c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtKKFUrRS5zY3JvbGwpOwp9LEUuYXV0bytFLnNwZWVkKTsKfWZ1bmN0aW9uIEgoKXtyZXR1cm4gUi5zbGljZShVKS5zbGljZSgwLFMpOwp9ZnVuY3Rpb24gSihWKXtpZighTil7aWYoRS5iZWZvcmVTdGFydCl7RS5iZWZvcmVTdGFydC5jYWxsKHRoaXMsSCgpKTsKfWlmKEUuY2lyY3VsYXIpe2lmKFY8PUUuc3RhcnQtUy0xKXtQLmNzcyhMLC0oKE8tKFMqMikpKkspKyJweCIpOwpVPVY9PUUuc3RhcnQtUy0xP08tKFMqMiktMTpPLShTKjIpLUUuc2Nyb2xsOwp9ZWxzZXtpZihWPj1PLVMrMSl7UC5jc3MoTCwtKChTKSpLKSsicHgiKTsKVT1WPT1PLVMrMT9TKzE6UytFLnNjcm9sbDsKfWVsc2V7VT1WOwp9fX1lbHNle2lmKFY8MHx8Vj5PLVMpe3JldHVybiA7Cn1lbHNle1U9VjsKfX1OPXRydWU7ClAuYW5pbWF0ZShMPT0ibGVmdCI/e2xlZnQ6LShVKkspfTp7dG9wOi0oVSpLKX0sRS5zcGVlZCxFLmVhc2luZyxmdW5jdGlvbigpe2lmKEUuYWZ0ZXJFbmQpe0UuYWZ0ZXJFbmQuY2FsbCh0aGlzLEgoKSk7Cn1OPWZhbHNlOwp9KTsKaWYoIUUuY2lyY3VsYXIpe0QoRS5idG5QcmV2KyIsIitFLmJ0bk5leHQpLnJlbW92ZUNsYXNzKCJkaXNhYmxlZCIpOwpEKChVLUUuc2Nyb2xsPDAmJkUuYnRuUHJldil8fChVK0Uuc2Nyb2xsPk8tUyYmRS5idG5OZXh0KXx8W10pLmFkZENsYXNzKCJkaXNhYmxlZCIpOwp9fXJldHVybiBmYWxzZTsKfX0pOwp9OwpmdW5jdGlvbiBCKEUsRil7cmV0dXJuIHBhcnNlSW50KEQuY3NzKEVbMF0sRikpfHwwOwp9ZnVuY3Rpb24gQyhFKXtyZXR1cm4gRVswXS5vZmZzZXRXaWR0aCtCKEUsIm1hcmdpbkxlZnQiKStCKEUsIm1hcmdpblJpZ2h0Iik7Cn1mdW5jdGlvbiBBKEUpe3JldHVybiBFWzBdLm9mZnNldEhlaWdodCtCKEUsIm1hcmdpblRvcCIpK0IoRSwibWFyZ2luQm90dG9tIik7Cn19KShqUXVlcnkpOwoKCgoKTGlnaHRib3g9QmFja2JvbmUuVmlldy5leHRlbmQoe2V2ZW50czp7ImNsaWNrIGFbYmF4XFw6c3ViPWNsb3NlXSI6ImNsb3NlIiwiY2xpY2sgLmxpZ2h0Ym94IjoibWF5YmVDbG9zZSJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oQSl7Xy5iaW5kQWxsKHRoaXMpOwp0aGlzLl9jb3VudGVyPTA7CiQoZG9jdW1lbnQpLmJpbmQoImJheDpsaWdodGJveCIsdGhpcy5zaG93TGlnaHRib3gpOwp9LG1heWJlQ2xvc2U6ZnVuY3Rpb24oQSl7aWYoQS50YXJnZXQ9PT10aGlzLmVsWzBdKXt0aGlzLmNsb3NlKEEpOwp9fSxjbG9zZTpmdW5jdGlvbihBKXt0aGlzLl9jb250YWluZWQ9bnVsbDsKdGhpcy5fY29udGVudC5lbXB0eSgpOwp0aGlzLmVsLmhpZGUoKTsKdGhpcy5fY29udGVudC5oaWRlKCk7CnRoaXMuX2Nsb3NlQ29udGFpbmVyLmhpZGUoKTsKJChkb2N1bWVudC5ib2R5KS5jc3MoeyJvdmVyZmxvdy15Ijp0aGlzLl9vcmlnT3ZlcmZsb3d9KTsKJChkb2N1bWVudCkudW5iaW5kKCJrZXlkb3duIix0aGlzLl9ib3VuZEtleWRvd24pLnVuYmluZCgibW91c2Vtb3ZlIix0aGlzLl9ib3VuZE1vdXNlbW92ZSk7CndpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsVGltZXIpOwokKHRoaXMuX3RyaWdnZXJUYXJnZXQpLnRyaWdnZXIoImJheDpjbG9zZSIpOwp9LG9uSW50ZXJ2YWw6ZnVuY3Rpb24oKXt0aGlzLl9jb3VudGVyPSh0aGlzLl9jb3VudGVyKzEpJTg7CmlmKDA9PT10aGlzLl9jb3VudGVyKXt0aGlzLl9jbG9zZS5hZGRDbGFzcygiaWRsZSIpOwp9fSxvbk1vdXNlTW92ZTpmdW5jdGlvbihBKXt0aGlzLl9jb3VudGVyPTA7CnRoaXMuX2Nsb3NlLnJlbW92ZUNsYXNzKCJpZGxlIik7Cn0sc2hvd0xpZ2h0Ym94OmZ1bmN0aW9uKEMsQil7dGhpcy5fdHJpZ2dlclRhcmdldD1DLnRhcmdldDsKdmFyIEE9JChkb2N1bWVudC5ib2R5KTsKdGhpcy5fb3JpZ092ZXJmbG93PUEuY3NzKCJvdmVyZmxvdy15Iik7CkEuY3NzKHsib3ZlcmZsb3cteSI6ImhpZGRlbiJ9KTsKaWYoIXRoaXMuX2NvbnRlbnQpe3RoaXMuaW5pdExpZ2h0Ym94KCk7Cn10aGlzLl9jb250ZW50LnNob3coKTsKdGhpcy5fY2xvc2VDb250YWluZXIuc2hvdygpOwp0aGlzLl9jb250ZW50LmVtcHR5KCkuaHRtbCh0aGlzLl9jb250YWluZWQ9Qik7CnRoaXMuX2JvdW5kS2V5ZG93bj0kLnByb3h5KHRoaXMua2V5Ym9hcmQsdGhpcyk7CnRoaXMuX2JvdW5kTW91c2Vtb3ZlPSQucHJveHkodGhpcy5vbk1vdXNlTW92ZSx0aGlzKTsKJChkb2N1bWVudCkuYmluZCgia2V5ZG93biIsdGhpcy5fYm91bmRLZXlkb3duKS5iaW5kKCJtb3VzZW1vdmUiLHRoaXMuX2JvdW5kTW91c2Vtb3ZlKTsKdGhpcy5faW50ZXJ2YWxUaW1lcj13aW5kb3cuc2V0SW50ZXJ2YWwoJC5wcm94eSh0aGlzLm9uSW50ZXJ2YWwsdGhpcyksMjUwKTsKdGhpcy5lbC5zaG93KCk7Cn0saW5pdExpZ2h0Ym94OmZ1bmN0aW9uKCl7dmFyIEE9dGhpczsKdGhpcy5fY29udGVudD0kKCI8ZGl2PjwvZGl2PiIpLmFkZENsYXNzKCJjb250ZW50Iik7CnRoaXMuX2Nsb3NlPSQoIjxhPjwvYT4iKS5hZGRDbGFzcygiYnV0dG9uIGNsb3NlIGFuaW1hdGVkIGZhc3QiKS5hdHRyKCJiYXg6c3ViIiwiY2xvc2UiKTsKdGhpcy5fY2xvc2VDb250YWluZXI9JCgiPGRpdj48L2Rpdj4iKS5hZGRDbGFzcygiY29udGVudCBjbG9zZUNvbnRhaW5lciByaWdodCIpLmFwcGVuZCh0aGlzLl9jbG9zZSk7CnRoaXMuZWw9bmV3IFNjcmVlbk92ZXJsYXkoKS5lbC5hcHBlbmQodGhpcy5fY2xvc2VDb250YWluZXIpLmFwcGVuZCh0aGlzLl9jb250ZW50KS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTsKfSxrZXlib2FyZDpmdW5jdGlvbihCKXtpZighJCh0aGlzLmVsKS5oYXNDbGFzcygiaGlkZGVuIikpe2lmKDI3PT09Qi5rZXlDb2RlKXtCLnByZXZlbnREZWZhdWx0KCk7CnRoaXMuY2xvc2UoQik7Cn1lbHNle2lmKHRoaXMuX2NvbnRhaW5lZCl7dmFyIEE9bmV3IGpRdWVyeS5FdmVudCgiYmF4OmtleSIse2tleUNvZGU6Qi5rZXlDb2RlfSk7CiQodGhpcy5fY29udGFpbmVkKS50cmlnZ2VyKEEpOwp9fX19fSk7ClNjcmVlbk92ZXJsYXk9QmFja2JvbmUuVmlldy5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oQSl7Xy5iaW5kQWxsKHRoaXMpOwp0aGlzLmVsPVNjcmVlbk92ZXJsYXkuaW5zdGFuY2U7CmlmKCF0aGlzLmVsKXt0aGlzLmluaXQoQSk7Cn1lbHNle3RoaXMuZWwuc2hvdygpOwp9fSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5lbD1TY3JlZW5PdmVybGF5Lmluc3RhbmNlPSQoIjxkaXY+PC9kaXY+IikuYWRkQ2xhc3MoImxpZ2h0Ym94IikuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7Cn0sc2hvdzpmdW5jdGlvbigpe3RoaXMuZWwuc2hvdygpOwp9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLmVsLmhpZGUoKTsKfX0pOwooZnVuY3Rpb24oKXt2YXIgQT17fTsKJChkb2N1bWVudCkuYmluZCgiYmF4Om1vZGFsIixmdW5jdGlvbihDLEIpe0IuZXZlbnRDYWxsZXI9JChDLnRhcmdldCk7CmlmKEFbQy50YXJnZXQuaWRdPT11bmRlZmluZWQpe0FbQy50YXJnZXQuaWRdPW5ldyBNb2RhbChCKTsKfUFbQy50YXJnZXQuaWRdLnNob3dNb2RhbChCKTsKfSk7Cn0pKCk7Ck1vZGFsPUJhY2tib25lLlZpZXcuZXh0ZW5kKHtldmVudHM6eyJjbGljayBhW2JheFxcOnN1Yn49Y2xvc2VdIjoiY2xvc2UiLCJiYXg6bW9kYWxDbG9zZSI6ImNsb3NlIiwiYmF4OnJlY2VudGVyIjoib25yZWNlbnRlciJ9LG9ucmVjZW50ZXI6ZnVuY3Rpb24oQixBKXt2YXIgQz17fTsKaWYoQS53aWR0aCl7Qy5vdmVycmlkZVdpZHRoPUEud2lkdGg7Cn1pZihBLmhlaWdodCl7Qy5vdmVycmlkZUhlaWdodD1BLmhlaWdodDsKfXRoaXMuY2VudGVyKHRoaXMubW9kYWwsQyk7Cn0saW5pdGlhbGl6ZTpmdW5jdGlvbihBKXtfLmJpbmRBbGwodGhpcyk7CnRoaXMuZXZlbnRDYWxsZXI9QS5ldmVudENhbGxlcjsKdGhpcy5vcHRpb25zPUE7Cn0sc2hvd01vZGFsOmZ1bmN0aW9uKEQpe3ZhciBCPXRoaXM7CmlmKCF0aGlzLm92ZXJsYXkpe3RoaXMub3ZlcmxheT1uZXcgU2NyZWVuT3ZlcmxheSgpOwp9dmFyIEM9dGhpcy5vdmVybGF5OwppZighdGhpcy5tb2RhbCl7dGhpcy5tb2RhbD0kKCI8ZGl2PjwvZGl2PiIpLmFkZENsYXNzKCJtb2RhbENvbnRhaW5lciIpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLmNzcyh7d2lkdGg6RC53aWR0aHx8ImF1dG8iLGhlaWdodDpELmhlaWdodHx8ImF1dG8iLHpJbmRleDpwYXJzZUludCh0aGlzLm92ZXJsYXkuZWwuY3NzKCJ6SW5kZXgiKSwxMCkrMX0pOwp9dGhpcy5tb2RhbC5odG1sKHRoaXMuZWwpOwp2YXIgRT10aGlzLm1vZGFsOwppZih1bmRlZmluZWQ9PT1ELmNsb3NlQnV0dG9ufHwhIUQuY2xvc2VCdXR0b24pe2lmKCF0aGlzLm1vZGFsQ2xvc2Upe3RoaXMubW9kYWxDbG9zZT0kKCc8YSBocmVmPSIjIj48aSBjbGFzcz0iaWNvbiBtb2RhbCBjbG9zZSB0b3BSaWdodCI+PC9pPjwvYT4nKS5hdHRyKCJyb2xlIiwiYnV0dG9uIikucHJlcGVuZFRvKHRoaXMuZWwpOwp9dGhpcy5tb2RhbENsb3NlLmNsaWNrKHRoaXMuY2xvc2UpOwp9ZWxzZXt0aGlzLm1vZGFsQ2xvc2U9bnVsbDsKfWlmKHVuZGVmaW5lZD09PUQuY2xvc2VPbkNsaWNrfHwhIUQuY2xvc2VPbkNsaWNrKXtDLmVsLmNsaWNrKHRoaXMuY2xvc2UpOwp9dmFyIEE9JChkb2N1bWVudC5ib2R5KTsKdGhpcy5fb3JpZ1Bvcz1BLmNzcygicG9zaXRpb24iKTsKQS5jc3MoeyJwb3NpdGlvbiI6InN0YXRpYyJ9KTsKdGhpcy5jZW50ZXIoRSk7CnRoaXMub3ZlcmxheS5zaG93KCk7CnRoaXMubW9kYWwuc2hvdygpOwppZih0aGlzLm1vZGFsQ2xvc2Upe3RoaXMubW9kYWxDbG9zZS5zaG93KCk7Cn19LGNsb3NlOmZ1bmN0aW9uKEEpe3RoaXMub3ZlcmxheS5oaWRlKCk7CnRoaXMubW9kYWwuaGlkZSgpOwokKGRvY3VtZW50LmJvZHkpLmNzcyh7InBvc2l0aW9uIjp0aGlzLl9vcmlnUG9zfSk7CmlmKHRoaXMuZXZlbnRDYWxsZXIpe3ZhciBCPXt9OwppZihBKXtCLnRhcmdldD1BLnRhcmdldDsKfSQodGhpcy5ldmVudENhbGxlcikudHJpZ2dlcigiYmF4OmNsb3NlIixCKTsKfXJldHVybiBmYWxzZTsKfSxjbG9zZUNocm9tZTpmdW5jdGlvbihBKXt0aGlzLm1vZGFsLmhpZGUoKTsKfSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy5zaG93TW9kYWwodGhpcy5vcHRpb25zKTsKdGhpcy5vdmVybGF5LnNob3coKTsKdGhpcy5tb2RhbC5zaG93KCk7Cn0sY2VudGVyOmZ1bmN0aW9uKEMsRSl7dmFyIEE9Qy5pcygiOnZpc2libGUiKTsKaWYoIUEpe0Muc2hvdygpOwp9dGhpcy5tb2RhbC5jc3Moe3RvcDoiNTAlIixsZWZ0OiI1MCUifSk7CnZhciBEPU1hdGgubWluKHRoaXMuJGVsLndpZHRoKCksJCh3aW5kb3cpLndpZHRoKCkpOwp2YXIgQj1NYXRoLm1pbih0aGlzLiRlbC5oZWlnaHQoKSwkKHdpbmRvdykuaGVpZ2h0KCkpOwpEPShELzIpKi0xOwpCPShCLzIpKi0xOwp0aGlzLiRlbC5jc3MoeyJwb3NpdGlvbiI6InJlbGF0aXZlIiwibGVmdCI6RCsicHgiLCJ0b3AiOkIrInB4In0pOwp9fSk7CgoKCgpSVC5CYWNrYm9uZS5WaWV3cy5Ib3ZlckJ1YmJsZT1CYWNrYm9uZS5WaWV3LmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe18uYmluZEFsbCh0aGlzKTsKXy50ZW1wbGF0ZVNldHRpbmdzPXtpbnRlcnBvbGF0ZTovXHtceyhbXHNcU10rPylcfVx9L2csZXZhbHVhdGU6L1x7JShbXHNcU10rPyklXH0vZ307CnRoaXMuaG92ZXJCdWJibGVUbXBsPSQodGhpcy4kZWwpLmZpbmQoIi5ob3ZlckJ1YmJsZVRtcGwiKS5odG1sKCk7CnRoaXMucmVtb3ZlVGltZW91dD1udWxsOwp9LGV2ZW50czp7Im1vdXNlZW50ZXIgLm1vdmllX2xpc3QgdHIiOiJvbm1vdXNlZW50ZXJSb3ciLCJtb3VzZWxlYXZlIC5tb3ZpZV9saXN0IHRyIjoib25tb3VzZWxlYXZlUm93IiwibW91c2VlbnRlciAuaG92ZXJCdWJibGUiOiJvbm1vdXNlZW50ZXJCdWJibGUiLCJtb3VzZWxlYXZlIC5ob3ZlckJ1YmJsZSI6Im9ubW91c2VsZWF2ZUJ1YmJsZSIsImNsaWNrIC5tb3ZpZV9saXN0IHRyIjoiY2xpY2tSb3cifSxvbm1vdXNlZW50ZXJSb3c6ZnVuY3Rpb24oQil7dmFyIEE9dGhpczsKdmFyIEM9JChCLmN1cnJlbnRUYXJnZXQpOwppZihDLmRhdGEoImJ1YmJsZSIpKXt0aGlzLmNhbmNlbFJlbW92ZUhvdmVyQnViYmxlKEMuZGF0YSgiYnViYmxlIikpOwp9ZWxzZXt0aGlzLnJlbmRlckhvdmVyQnViYmxlKEMpOwp9fSxvbm1vdXNlbGVhdmVSb3c6ZnVuY3Rpb24oQSl7dGhpcy5yZW1vdmVIb3ZlckJ1YmJsZSgkKEEuY3VycmVudFRhcmdldCkuZGF0YSgiYnViYmxlIiksdHJ1ZSk7Cn0sY2xpY2tSb3c6ZnVuY3Rpb24oQSl7dGhpcy5yZW1vdmVIb3ZlckJ1YmJsZSgkKEEuY3VycmVudFRhcmdldCkuZGF0YSgiYnViYmxlIiksdHJ1ZSk7Cn0sb25tb3VzZWVudGVyQnViYmxlOmZ1bmN0aW9uKEEpe3RoaXMuY2FuY2VsUmVtb3ZlSG92ZXJCdWJibGUoJChBLmN1cnJlbnRUYXJnZXQpKTsKfSxvbm1vdXNlbGVhdmVCdWJibGU6ZnVuY3Rpb24oQSl7dGhpcy5yZW1vdmVIb3ZlckJ1YmJsZSgkKEEuY3VycmVudFRhcmdldCkpOwp9LHJlbmRlckhvdmVyQnViYmxlOmZ1bmN0aW9uKEope3ZhciBDPTIyMDsKdmFyIEk9MTcwOwp2YXIgRj1KLnBvc2l0aW9uKCk7CnVuaXQ9dGhpcy4kZWxlOwp2YXIgRyxCOwppZihKLnBvc2l0aW9uKCkudG9wPEkpe0I9Si5wb3NpdGlvbigpLnRvcDsKRz0wOwp9ZWxzZXtpZihKLm9mZnNldCgpLnRvcCsoQy1JKT4kKHdpbmRvdykuc2Nyb2xsVG9wKCkrJCh3aW5kb3cpLmhlaWdodCgpKXtCPShKLm9mZnNldCgpLnRvcC0kKHdpbmRvdykuc2Nyb2xsVG9wKCkpLSQod2luZG93KS5oZWlnaHQoKStDOwpHPUYudG9wLUI7Cn1lbHNle0c9Ri50b3AtSTsKQj1JOwp9fXZhciBIPUouZGF0YSgibW92aWUtaWQiKTsKdmFyIEE9Si5kYXRhKCJzZWFzb24taWQiKTsKdmFyIEQ9JCgnPGRpdiBjbGFzcz0iaG92ZXJCdWJibGUgZmFkZSBpbiI+PC9kaXY+Jyk7CkQuY3NzKCJ0b3AiLEcpOwpELmRhdGEoInJvdyIsSik7CkQucHJlcGVuZCgiPHN0eWxlPi5ob3ZlckJ1YmJsZSAuYnViYmxlQ29udGVudDpiZWZvcmUgeyB0b3A6IitCKyJweDsgfSAuaG92ZXJCdWJibGUgLmJ1YmJsZUNvbnRlbnQ6YWZ0ZXIgeyB0b3A6IisoQisxKSsicHg7IH08L3N0eWxlPiIpOwp0aGlzLiRlbC5hcHBlbmQoRCk7CkouZGF0YSgiYnViYmxlIixEKTsKdmFyIEU9dGhpczsKaWYoSCl7UlQub3JkLm1vdmllcy5nZXRDdXJyZW50VXNlclJhdGluZyhIKS5kZWZlcnJlZC5kb25lKGZ1bmN0aW9uKEspe3ZhciBMPSQoXy50ZW1wbGF0ZShFLmhvdmVyQnViYmxlVG1wbCxLLm1lZGlhKSk7CkQuYXBwZW5kKEwpOwpFLmluaXRSYXRpbmdXaWRnZXQoRCk7Cn0pOwp9ZWxzZXtSVC5vcmQudHZTZWFzb25zLmdldEN1cnJlbnRVc2VyUmF0aW5nKEEpLmRlZmVycmVkLmRvbmUoZnVuY3Rpb24oSyl7dmFyIEw9JChfLnRlbXBsYXRlKEUuaG92ZXJCdWJibGVUbXBsLEsubWVkaWEpKTsKRC5hcHBlbmQoTCk7CkUuaW5pdFJhdGluZ1dpZGdldChEKTsKfSk7Cn19LGluaXRSYXRpbmdXaWRnZXQ6ZnVuY3Rpb24oQSl7dmFyIEI9QS5maW5kKCIucmF0aW5nX3dpZGdldCIpOwpCLmRhdGEoInJhdGluZ1ZpZXciLG5ldyBSVC5CYWNrYm9uZS5WaWV3cy5SYXRpbmdXaWRnZXQoe2VsOkJ9KSk7CkIuZGF0YSgiZmJWaWV3IixuZXcgUlQuQmFja2JvbmUuVmlld3MuRmFjZWJvb2tNYW5hZ2VyKHtlbDpCfSkpOwp9LHJlbW92ZUhvdmVyQnViYmxlOmZ1bmN0aW9uKEEsQil7aWYoQSE9dW5kZWZpbmVkKXtpZihCKXtBLmhpZGUoKTsKfWVsc2V7QS5yZW1vdmVDbGFzcygiaW4iKTsKfUEuZGF0YSgicmVtb3ZlVGltZW91dCIsc2V0VGltZW91dChmdW5jdGlvbigpe2lmKEEuZGF0YSgicm93IikhPXVuZGVmaW5lZCl7QS5kYXRhKCJyb3ciKS5yZW1vdmVEYXRhKCJidWJibGUiKTsKfXZhciBDPUEuZmluZCgiLnJhdGluZ193aWRnZXQiKTsKaWYoQy5kYXRhKCJyYXRpbmdWaWV3Iikpe0MuZGF0YSgicmF0aW5nVmlldyIpLnJlbW92ZSgpOwp9aWYoQy5kYXRhKCJmYlZpZXciKSl7Qy5kYXRhKCJmYlZpZXciKS5yZW1vdmUoKTsKfUEucmVtb3ZlKCk7Cn0sNTAwKSk7Cn19LGNhbmNlbFJlbW92ZUhvdmVyQnViYmxlOmZ1bmN0aW9uKEEpe2NsZWFyVGltZW91dChBLmRhdGEoInJlbW92ZVRpbWVvdXQiKSk7CkEucmVtb3ZlRGF0YSgicmVtb3ZlVGltZW91dCIpOwpBLnNob3coKS5hZGRDbGFzcygiaW4iKTsKfX0pOwoKCgoKUlQuQmFja2JvbmUuTW9kZWxzLk1lZGlhPUJhY2tib25lLk1vZGVsLmV4dGVuZCh7c3RhckNsYXNzZXM6InNjb3JlMDAgc2NvcmUwNSBzY29yZTEwIHNjb3JlMTUgc2NvcmUyMCBzY29yZTI1IHNjb3JlMzAgc2NvcmUzNSBzY29yZTQwIHNjb3JlNDUgc2NvcmU1MCIsc3luYzpmdW5jdGlvbihELEMsQil7aWYoRD09InBhdGNoInx8RD09InVwZGF0ZSJ8fEQ9PSJjcmVhdGUiKXt2YXIgQT1SVC5zb2NpYWxfaW5pdC5waXBlKGZ1bmN0aW9uKCl7dmFyIEU9Qi54aHI9QmFja2JvbmUuYWpheCh7dHlwZToiUE9TVCIsdXJsOl8ucmVzdWx0KEMsInVybCIpfHx1cmxFcnJvcigpLGRhdGE6e3JldmlldzpDLmdldCgicmV2aWV3Iiksc2NvcmU6Qy5nZXQoInNjb3JlIiksc291cmNlOkMuZ2V0KCJzb3VyY2UiKX19KTsKQy50cmlnZ2VyKCJyZXF1ZXN0IixDLEUsQik7CnJldHVybiBFOwp9KTsKcmV0dXJuIEE7Cn1lbHNle3JldHVybiBCYWNrYm9uZS5zeW5jLmNhbGwodGhpcyxELEMsQik7Cn19LGxvZ2luSWZOZWNlc3Nhcnk6ZnVuY3Rpb24oKXtpZihSVC5Mb2dpblN0YXR1c01vZGVsLmdldCgibG9naW5QbGF0Zm9ybUNvZGUiKT09dW5kZWZpbmVkfHxSVC5Mb2dpblN0YXR1c01vZGVsLmdldCgibG9naW5QbGF0Zm9ybUNvZGUiKT09IlVua25vd24iKXt2YXIgQj0kKHRoaXMpOwp2YXIgQT1CLmF0dHIoInNjb3BlIik7CmlmKEE9PXVuZGVmaW5lZCl7QT0iZW1haWwscHVibGlzaF9hY3Rpb25zIjsKfUZCLmxvZ2luKGZ1bmN0aW9uKEMpe2ZiX2Nvbm5lY3RlZC5kb25lKGZ1bmN0aW9uKCl7aWYoQi5kYXRhKCJyZWRpcmVjdCIpIT11bmRlZmluZWQpe3dpbmRvdy5sb2NhdGlvbi5ocmVmPUIuZGF0YSgicmVkaXJlY3QiKTsKfX0pOwppZighQy5hdXRoUmVzcG9uc2Upe2NvbnNvbGUubG9nKCJVc2VyIGNhbmNlbGxlZCBGYWNlYm9vayBsb2dpbiBvciBkaWQgbm90IGZ1bGx5IGF1dGhvcml6ZS4iKTsKJCgiLnd0cyIsdGhpcy5lbCkucmVtb3ZlQ2xhc3MoIm9uIik7CiQoIi5uaSIsdGhpcy5lbCkucmVtb3ZlQ2xhc3MoIm9uIik7CiQoIi5zdGFycyIsdGhpcy5lbCkucmVtb3ZlQ2xhc3ModGhpcy5zdGFyQ2xhc3NlcykuYWRkQ2xhc3MoInN0YXJzIGNsZWFyIGZsIik7CiQoIiNyZXZpZXdfdGV4dCIpLnZhbCgiIik7Cn19LHtzY29wZTpBfSk7Cn19fSk7ClJULkJhY2tib25lLk1vZGVscy5Nb3ZpZT1SVC5CYWNrYm9uZS5Nb2RlbHMuTWVkaWEuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKCl7fSxwYXJzZTpmdW5jdGlvbihCLEEpe0IuaWQ9Qi5tZWRpYS5pZDsKcmV0dXJuIEI7Cn0sbG9naW5BbmRTYXZlOmZ1bmN0aW9uKEMsQSxCKXt0aGlzLmxvZ2luSWZOZWNlc3NhcnkoKTsKdGhpcy5zYXZlKCk7CmlmKEMhPT0iIil7ZGF0YUxheWVyLnB1c2goeyJldmVudCI6IlJhdGluZ1dpZGdldCIsIm1lZGlhVHlwZSI6Ik1vdmllIiwidGFyZ2V0IjpCLCJhY3Rpb24iOkN9KTsKfWlmKEEhPT0iIil7ZGF0YUxheWVyLnB1c2goeyJldmVudCI6IlJhdGluZ1dpZGdldCIsIm1lZGlhVHlwZSI6Ik1vdmllIiwidGFyZ2V0IjpCLCJhY3Rpb24iOiJSZXZpZXcifSk7Cn19fSk7ClJULkJhY2tib25lLk1vZGVscy5UdlNlYXNvbj1SVC5CYWNrYm9uZS5Nb2RlbHMuTWVkaWEuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKCl7fSxwYXJzZTpmdW5jdGlvbihCLEEpe0IuaWQ9Qi5tZWRpYS5pZDsKcmV0dXJuIEI7Cn0sbG9naW5BbmRTYXZlOmZ1bmN0aW9uKEMsQSxCKXt0aGlzLmxvZ2luSWZOZWNlc3NhcnkoKTsKdGhpcy5zYXZlKCk7CmlmKEMhPT0iIil7ZGF0YUxheWVyLnB1c2goeyJldmVudCI6IlJhdGluZ1dpZGdldCIsIm1lZGlhVHlwZSI6IlRWIiwidGFyZ2V0IjpCLCJhY3Rpb24iOkN9KTsKfWlmKEEhPT0iIil7ZGF0YUxheWVyLnB1c2goeyJldmVudCI6IlJhdGluZ1dpZGdldCIsIm1lZGlhVHlwZSI6IlRWIiwidGFyZ2V0IjpCLCJhY3Rpb24iOiJSZXZpZXcifSk7Cn19fSk7ClJULkJhY2tib25lLkNvbGxlY3Rpb25zLk1vdmllQ29sbGVjdGlvbj1CYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7bW9kZWw6UlQuQmFja2JvbmUuTW9kZWxzLk1vdmllLHVybDoiL2FwaS9wcml2YXRlL3YxLjAvdXNlcnMvY3VycmVudC9yYXRpbmdzLyIsZ2V0Q3VycmVudFVzZXJSYXRpbmc6ZnVuY3Rpb24oQil7dmFyIEE7CmlmKHRoaXMuZ2V0KEIpPT1udWxsKXtBPW5ldyBSVC5CYWNrYm9uZS5Nb2RlbHMuTW92aWUoe2lkOkJ9LHtjb2xsZWN0aW9uOnRoaXN9KTsKQS5kZWZlcnJlZD1BLmZldGNoKCk7CnRoaXMuYWRkKEEpOwp9ZWxzZXtBPXRoaXMuZ2V0KEIpOwp9cmV0dXJuIEE7Cn19KTsKUlQuQmFja2JvbmUuQ29sbGVjdGlvbnMuVHZTZWFzb25Db2xsZWN0aW9uPUJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHttb2RlbDpSVC5CYWNrYm9uZS5Nb2RlbHMuVHZTZWFzb24sdXJsOiIvYXBpL3ByaXZhdGUvdjEuMC91c2Vycy9jdXJyZW50L3R2cmF0aW5ncy8iLGdldEN1cnJlbnRVc2VyUmF0aW5nOmZ1bmN0aW9uKEIpe3ZhciBBOwppZih0aGlzLmdldChCKT09bnVsbCl7QT1uZXcgUlQuQmFja2JvbmUuTW9kZWxzLlR2U2Vhc29uKHtpZDpCfSx7Y29sbGVjdGlvbjp0aGlzfSk7CkEuZGVmZXJyZWQ9QS5mZXRjaCgpOwp0aGlzLmFkZChBKTsKfWVsc2V7QT10aGlzLmdldChCKTsKfXJldHVybiBBOwp9fSk7ClJULkJhY2tib25lLlZpZXdzLlJhdGluZ1dpZGdldD1CYWNrYm9uZS5WaWV3LmV4dGVuZCh7c3RhckNsYXNzZXM6InNjb3JlMDAgc2NvcmUwNSBzY29yZTEwIHNjb3JlMTUgc2NvcmUyMCBzY29yZTI1IHNjb3JlMzAgc2NvcmUzNSBzY29yZTQwIHNjb3JlNDUgc2NvcmU1MCIsaW5pdGlhbGl6ZTpmdW5jdGlvbigpe18uYmluZEFsbCh0aGlzLCJyZW5kZXIiLCJpbml0aWFsUmVuZGVyIiwiY2hhbmdlUmF0aW5nIiwicG9zdFJldmlldyIpOwp0aGlzLmxvY2F0aW9uPXRoaXMuJGVsLmRhdGEoImxvY2F0aW9uIil8fCJNT0IiOwp2YXIgQj10aGlzLiRlbC5kYXRhKCJtZWRpYS1pZCIpOwp2YXIgQT10aGlzLiRlbC5kYXRhKCJ0eXBlIik7CmlmKEE9PSJtb3ZpZSIpe3RoaXMubW9kZWw9UlQub3JkLm1vdmllcy5nZXRDdXJyZW50VXNlclJhdGluZyhCKTsKfWVsc2V7aWYoQT09InNlYXNvbiIpe3RoaXMubW9kZWw9UlQub3JkLnR2U2Vhc29ucy5nZXRDdXJyZW50VXNlclJhdGluZyhCKTsKfWVsc2V7Y29uc29sZS5lcnJvcigiUmF0aW5nIHdpZGdldCAtIGludmFsaWQgbWVkaWEgdHlwZSIpOwp9fXRoaXMubW9kZWwuZGVmZXJyZWQuZG9uZSh0aGlzLmluaXRpYWxSZW5kZXIpOwp9LGV2ZW50czp7ImNsaWNrIC5yYXRpbmdfYnV0dG9ucyBpbnB1dCI6ImNoYW5nZVJhdGluZyIsIm1vdXNlbW92ZSAuc3RhcnMiOiJzdGFyTW91c2Vtb3ZlIiwibW91c2VvdXQgLnN0YXJzIjoic3Rhck1vdXNlb3V0IiwiY2xpY2sgLnBvc3RfYnV0dG9uIjoicG9zdFJldmlldyIsImNsaWNrIC5lZGl0X2J1dHRvbiI6ImVkaXRSZXZpZXcifSxjaGFuZ2VSYXRpbmc6ZnVuY3Rpb24oRSl7dmFyIEQ9dGhpcy4kZWwuZGF0YSgic291cmNlIik7CnZhciBGPSQoRS5jdXJyZW50VGFyZ2V0KS52YWwoKTsKaWYoIUYpe3ZhciBBPSQoIi5zdGFycyIsdGhpcy5lbCk7CnZhciBDPSQoRS5jdXJyZW50VGFyZ2V0KS53aWR0aCgpOwp2YXIgQj1FLnBhZ2VYLUEub2Zmc2V0KCkubGVmdDsKRj10aGlzLmNvbXB1dGVTY29yZShDLEIpOwp9aWYoIUQpe0Q9IlJUTSI7Cn10aGlzLm1vZGVsLnNldCgic291cmNlIixEKTsKdGhpcy5tb2RlbC5zZXQoInNjb3JlIixGKTsKdGhpcy5tb2RlbC5sb2dpbkFuZFNhdmUoRiwiIix0aGlzLmxvY2F0aW9uKTsKfSxzdGFyTW91c2Vtb3ZlOmZ1bmN0aW9uKEQpe3ZhciBBPSQoIi5zdGFycyIsdGhpcy5lbCk7CnZhciBDPSQoRC5jdXJyZW50VGFyZ2V0KS53aWR0aCgpOwp2YXIgQj1ELnBhZ2VYLUEub2Zmc2V0KCkubGVmdDsKdmFyIEU9dGhpcy5jb21wdXRlU2NvcmUoQyxCKTsKQS5yZW1vdmVDbGFzcyh0aGlzLnN0YXJDbGFzc2VzKS5hZGRDbGFzcygic2NvcmUiK0UucmVwbGFjZSgiLiIsIiIpKTsKfSxzdGFyTW91c2VvdXQ6ZnVuY3Rpb24oKXt2YXIgQT0kKCIuc3RhcnMiLHRoaXMuZWwpOwpBLnJlbW92ZUNsYXNzKHRoaXMuc3RhckNsYXNzZXMpOwp2YXIgQj10aGlzLm1vZGVsLmdldCgic2NvcmUiKTsKaWYoJC5pc051bWVyaWMoQikpe0EuYWRkQ2xhc3MoInNjb3JlIitCLnJlcGxhY2UoIi4iLCIiKSk7Cn19LHBvc3RSZXZpZXc6ZnVuY3Rpb24oKXt2YXIgQT0kKCIucmV2aWV3Iix0aGlzLmVsKTsKdmFyIEM9dGhpcy4kZWwuZGF0YSgic291cmNlIik7CmlmKEEhPXVuZGVmaW5lZCYmQS52YWwoKS5sZW5ndGg+MCl7JCgiLnBvc3RfYnV0dG9uIix0aGlzLmVsKS5oaWRlKCk7CkEuYWRkQ2xhc3MoImRpc2FibGVkIik7Cn12YXIgQj0kKCIuZWRpdF9idXR0b24iLHRoaXMuZWwpOwokKCIuc3RhdHVzIikuYWRkQ2xhc3MoIndhaXQiKTsKQi5odG1sKCJTYXZlZCIpLnNob3coKS5kZWxheSgzMDAwKS5mYWRlT3V0KCJzbG93IixmdW5jdGlvbigpe0IuaHRtbCgiRWRpdCIpOwppZihBIT11bmRlZmluZWQmJkEudmFsKCkubGVuZ3RoPjApe0Iuc2hvdygpOwp9JCgiLnN0YXR1cyIpLnJlbW92ZUNsYXNzKCJ3YWl0Iik7Cn0pOwppZighQyl7Qz0iUlRNIjsKfXRoaXMubW9kZWwuc2V0KCJzb3VyY2UiLEMpOwp0aGlzLm1vZGVsLnNldCgicmV2aWV3IixBLnZhbCgpKTsKdGhpcy5tb2RlbC5sb2dpbkFuZFNhdmUoIiIsQS52YWwoKSx0aGlzLmxvY2F0aW9uKTsKfSxlZGl0UmV2aWV3OmZ1bmN0aW9uKCl7JCgiLnJldmlldyIsdGhpcy5lbCkucmVtb3ZlQ2xhc3MoImRpc2FibGVkIik7CiQoIi5lZGl0X2J1dHRvbiIsdGhpcy5lbCkuaGlkZSgpOwp9LGNvbXB1dGVTY29yZTpmdW5jdGlvbihCLEEpe3ZhciBDPTkwKihBL0IpOwp2YXIgRD0iMC4wIjsKaWYoOTA8Qyl7RD0iNS4wIjsKfWVsc2V7aWYoODA8Qyl7RD0iNC41IjsKfWVsc2V7aWYoNzA8Qyl7RD0iNC4wIjsKfWVsc2V7aWYoNjA8Qyl7RD0iMy41IjsKfWVsc2V7aWYoNTA8Qyl7RD0iMy4wIjsKfWVsc2V7aWYoNDA8Qyl7RD0iMi41IjsKfWVsc2V7aWYoMzA8Qyl7RD0iMi4wIjsKfWVsc2V7aWYoMjA8Qyl7RD0iMS41IjsKfWVsc2V7aWYoMTA8Qyl7RD0iMS4wIjsKfWVsc2V7aWYoNTxDKXtEPSIwLjUiOwp9fX19fX19fX19cmV0dXJuIEQ7Cn0saW5pdGlhbFJlbmRlcjpmdW5jdGlvbigpe3RoaXMucmVuZGVyKCk7CnRoaXMucmVuZGVyRmFjZXBpbGUoKTsKdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJjaGFuZ2UiLHRoaXMucmVuZGVyKTsKfSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgRz10aGlzLm1vZGVsLmdldCgic2NvcmUiKTsKdmFyIEQ9dGhpcy5tb2RlbC5nZXQoInJldmlldyIpOwp2YXIgRT0kKCIud3RzIix0aGlzLmVsKTsKdmFyIEY9JCgiLm5pIix0aGlzLmVsKTsKdmFyIEI9JCgiLnN0YXJzIix0aGlzLmVsKTsKRS5yZW1vdmVDbGFzcygib24iKTsKRi5yZW1vdmVDbGFzcygib24iKTsKQi5yZW1vdmVDbGFzcyh0aGlzLnN0YXJDbGFzc2VzKTsKaWYoRyE9dW5kZWZpbmVkKXtpZihHPT0iKyIpe0UuYWRkQ2xhc3MoIm9uIikuc2hvdygpOwp9ZWxzZXtpZihHPT0iLSIpe0YuYWRkQ2xhc3MoIm9uIikuc2hvdygpOwp9ZWxzZXtCLmFkZENsYXNzKCJzY29yZSIrRy5yZXBsYWNlKCIuIiwiIikpOwppZih0aGlzLiRlbC5kYXRhKCJoaWRlLXd0c25pIikpe0UuaGlkZSgpOwpGLmhpZGUoKTsKfX19fXZhciBBPSQoIi5yZXZpZXciLHRoaXMuZWwpOwp2YXIgQz0kKCIuZWRpdF9idXR0b24iLHRoaXMuZWwpOwppZihBPT11bmRlZmluZWR8fEEudmFsKCk9PXVuZGVmaW5lZHx8QS52YWwoKS5sZW5ndGg9PTApe0EudmFsKEQpOwokKCIucG9zdF9idXR0b24iLHRoaXMuZWwpLmhpZGUoKTsKaWYoRCE9dW5kZWZpbmVkJiZELmxlbmd0aD4wKXtBLmFkZENsYXNzKCJkaXNhYmxlZCIpOwpDLnNob3coKTsKaWYoQVswXSE9dW5kZWZpbmVkKXtBLmhlaWdodChBWzBdLnNjcm9sbEhlaWdodCk7Cn19ZWxzZXtDLmhpZGUoKTsKfX19LHJlbmRlckZhY2VwaWxlOmZ1bmN0aW9uKCl7dmFyIEI9dGhpcy5tb2RlbC5nZXQoImZyaWVuZHNfcmF0aW5ncyIpOwppZihCKXt2YXIgQz0wOwp2YXIgQT10aGlzLiRlbC5maW5kKCIuZmFjZXBpbGUiKTsKJC5lYWNoKEIsZnVuY3Rpb24oRCxFKXtpZihFLnR5cGU9PSJmYmxpa2UifHwoJC5pc051bWVyaWMoRS5yYXRpbmcpJiZwYXJzZUZsb2F0KEUucmF0aW5nKT49Myl8fEUucmF0aW5nPT0id3RzIil7QS5hcHBlbmQoIjxpbWcgc3JjPSciK0UudXNlci5waWN0dXJlKyInIC8+Iik7CkMrKzsKfX0pOwppZihDPjApe0EuYXBwZW5kKCI8c3BhbiBjbGFzcz0nZmFjZXBpbGUtY2FwdGlvbic+IitDKyhDPT0xPyIgZnJpZW5kIGxpa2VzIGl0IjoiIGZyaWVuZHMgbGlrZSBpdCIpKTsKfX19fSk7ClJULkJhY2tib25lLlZpZXdzLkZhY2Vib29rTWFuYWdlcj1CYWNrYm9uZS5WaWV3LmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe18uYmluZEFsbCh0aGlzLCJyZW5kZXIiLCJpbml0aWFsUmVuZGVyIiwidG9nZ2xlIiwicG9zdFJldmlldyIpOwp2YXIgQT0kKHRoaXMuZWwpLmRhdGEoInR5cGUiKTsKdmFyIEI9JCh0aGlzLmVsKS5kYXRhKCJtZWRpYS1pZCIpOwppZihBPT0ibW92aWUiKXt0aGlzLm1vZGVsPVJULm9yZC5tb3ZpZXMuZ2V0Q3VycmVudFVzZXJSYXRpbmcoQik7Cn1lbHNle2lmKEE9PSJzZWFzb24iKXt0aGlzLm1vZGVsPVJULm9yZC50dlNlYXNvbnMuZ2V0Q3VycmVudFVzZXJSYXRpbmcoQik7Cn1lbHNle2NvbnNvbGUuZXJyb3IoIkZhY2Vib29rTWFuYWdlcjogaW52YWxpZCBtZWRpYSB0eXBlIik7Cn19dGhpcy5tb2RlbC5kZWZlcnJlZC5kb25lKHRoaXMuaW5pdGlhbFJlbmRlcik7Cn0saW5pdGlhbFJlbmRlcjpmdW5jdGlvbigpe3ZhciBBPSQoIi5mYl9idXR0b24iLHRoaXMuZWwpOwppZihBLmhhc0NsYXNzKCJ0cnVlIikmJlJULkxvZ2luU3RhdHVzTW9kZWwuZ2V0KCJsb2dpblBsYXRmb3JtQ29kZSIpPT0iRkJLIil7QS5hZGRDbGFzcygib24iKTsKfXRoaXMucmVuZGVyKCk7CnRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiY2hhbmdlIix0aGlzLnJlbmRlcik7Cn0sZXZlbnRzOnsiY2xpY2sgLnJhdGluZ19idXR0b25zIGlucHV0IjoicG9zdFJldmlldyIsImNsaWNrIC5mYl9idXR0b24iOiJ0b2dnbGUiLCJjbGljayAuZWRpdF9idXR0b24iOiJlZGl0UmV2aWV3IiwiY2xpY2sgLnBvc3RfYnV0dG9uIjoicG9zdFJldmlldyIsfSx0b2dnbGU6ZnVuY3Rpb24oKXt2YXIgQT0kKCIuZmJfYnV0dG9uIix0aGlzLmVsKTsKdmFyIEM9UlQuTG9naW5TdGF0dXNNb2RlbC5nZXQoImZhY2Vib29rSWQiKTsKaWYoUlQuTG9naW5TdGF0dXNNb2RlbC5nZXQoImxvZ2luUGxhdGZvcm1Db2RlIik9PXVuZGVmaW5lZHx8UlQuTG9naW5TdGF0dXNNb2RlbC5nZXQoImxvZ2luUGxhdGZvcm1Db2RlIik9PSJVbmtub3duIil7dGhpcy5sb2dpbklmTmVjZXNzYXJ5KCk7Cn1pZihBLmhhc0NsYXNzKCJvbiIpKXtBLnJlbW92ZUNsYXNzKCJvbiIpOwp9ZWxzZXtpZighQS5oYXNDbGFzcygidHJ1ZSIpKXt2YXIgQj1jb25maXJtKCJBbHdheXMgc2hhcmUgcmF0aW5ncyBvbiBGYWNlYm9vaz8iKTsKaWYoQil7JC5wb3N0KCIvdXNlci9hY2NvdW50L2ZhY2Vib29rLXNoYXJlLXJhdGluZy1zZXR0aW5nLyIse2ZhY2Vib29rSWQ6QyxzaGFyaW5nRW5hYmxlZDp0cnVlfSwianNvbiIpLmNvbXBsZXRlKCQucHJveHkodGhpcy5vblJlc3BvbnNlUmVhZFJldmlld3MsdGhpcykpOwp9fUEuYWRkQ2xhc3MoIm9uIik7Cn19LGxvZ2luSWZOZWNlc3Nhcnk6ZnVuY3Rpb24oKXt2YXIgQj0kKHRoaXMpOwp2YXIgQT1CLmF0dHIoInNjb3BlIik7CmlmKEE9PXVuZGVmaW5lZCl7QT0iZW1haWwscHVibGlzaF9hY3Rpb25zIjsKfUZCLmxvZ2luKGZ1bmN0aW9uKEMpe2ZiX2Nvbm5lY3RlZC5kb25lKGZ1bmN0aW9uKCl7aWYoQi5kYXRhKCJyZWRpcmVjdCIpIT11bmRlZmluZWQpe3dpbmRvdy5sb2NhdGlvbi5ocmVmPUIuZGF0YSgicmVkaXJlY3QiKTsKfX0pOwp9LHtzY29wZTpBfSk7Cn0sZWRpdFJldmlldzpmdW5jdGlvbigpe2lmKFJULkxvZ2luU3RhdHVzTW9kZWwuZ2V0KCJsb2dpblBsYXRmb3JtQ29kZSIpPT0iRkJLIil7JCgiLmZiX2J1dHRvbiIsdGhpcy5lbCkuc2hvdygpOwp9fSxwb3N0UmV2aWV3OmZ1bmN0aW9uKCl7dmFyIEI9dGhpcy5tb2RlbC5nZXQoInNjb3JlIik7CnZhciBBPXRoaXMubW9kZWwuZ2V0KCJyZXZpZXciKTsKaWYoUlQuTG9naW5TdGF0dXNNb2RlbC5nZXQoImxvZ2luUGxhdGZvcm1Db2RlIik9PSJGQksiJiYkKCIuZmJfYnV0dG9uIix0aGlzLmVsKS5oYXNDbGFzcygib24iKSYmQiE9dW5kZWZpbmVkKXt0aGlzLnBvc3RUb0ZhY2Vib29rKEIsQSk7Cn19LHJlbmRlcjpmdW5jdGlvbigpe3ZhciBCPXRoaXMubW9kZWwuZ2V0KCJyZXZpZXciKTsKdmFyIEE9JCgiLmZiX2J1dHRvbiIsdGhpcy5lbCk7CmlmKChCIT11bmRlZmluZWQmJkIubGVuZ3RoPjApfHxSVC5Mb2dpblN0YXR1c01vZGVsLmdldCgibG9naW5QbGF0Zm9ybUNvZGUiKSE9IkZCSyIpe0EuaGlkZSgpOwp9ZWxzZXtBLnNob3coKTsKfX0scG9zdFRvRmFjZWJvb2s6ZnVuY3Rpb24oRSxCKXtpZigkKCIuZmJfYnV0dG9uIikuaGFzQ2xhc3MoIm9uIikpe2NvbnNvbGUubG9nKCJQb3N0aW5nIHRvIEZhY2Vib29rLiIpOwp2YXIgRD1CIT11bmRlZmluZWQmJkIubGVuZ3RoPjA7CnZhciBDPXRoaXMubW9kZWwudXJsKCkuaW5kZXhPZigidHZyYXRpbmdzIik9PS0xOwpGQi5hcGkoIi9tZS92aWRlby53YW50c190b193YXRjaCIse29iamVjdDokKGxvY2F0aW9uKS5hdHRyKCJocmVmIil9LGZ1bmN0aW9uKEcpe2lmKEcuZGF0YSYmRy5kYXRhLmxlbmd0aD4wKXt2YXIgRj1HLmRhdGFbMF07CmNvbnNvbGUubG9nKCJQcmV2IGFjdGlvbiBmb3VuZCAoaWQ9IitGLmlkKyIgdHlwZT0iK0YudHlwZSsiKS4gRGVsZXRpbmcuIik7CkZCLmFwaSgiLyIrRi5pZCwiZGVsZXRlIixmdW5jdGlvbigpe2NvbnNvbGUubG9nKEYudHlwZSsiIGRlbGV0ZWQiKTsKfSk7Cn1lbHNle2NvbnNvbGUubG9nKCJObyBwcmV2aW91cyB2aWRlbzp3YW50c190b193YXRjaCBhY3Rpb25zIGZvdW5kIik7Cn19KTsKRkIuYXBpKCIvbWUvdmlkZW8ucmF0ZXMiLHtvYmplY3Q6JChsb2NhdGlvbikuYXR0cigiaHJlZiIpfSxmdW5jdGlvbihHKXtpZihHLmRhdGEmJkcuZGF0YS5sZW5ndGg+MCl7dmFyIEY9Ry5kYXRhWzBdOwpjb25zb2xlLmxvZygiUHJldiBhY3Rpb24gZm91bmQgKGlkPSIrRi5pZCsiIHR5cGU9IitGLnR5cGUrIikuIERlbGV0aW5nLiIpOwpGQi5hcGkoIi8iK0YuaWQsImRlbGV0ZSIsZnVuY3Rpb24oKXtjb25zb2xlLmxvZyhGLnR5cGUrIiBkZWxldGVkIik7Cn0pOwp9ZWxzZXtjb25zb2xlLmxvZygiTm8gcHJldmlvdXMgdmlkZW86cmF0ZXMgYWN0aW9ucyBmb3VuZCIpOwp9fSk7CnZhciBBPSQoIi5zb2NpYWxNc2ciLHRoaXMuZWwpOwppZigid3RzIj09PUV8fCIrIj09PUUpe0EuaHRtbCgiUG9zdGluZyB3YW50IHRvIHNlZSIpLnNob3coKS5kZWxheSgzMDAwKS5mYWRlT3V0KCJzbG93IixmdW5jdGlvbigpe0EuaHRtbCgiQWRkZWQgdG8geW91ciB0aW1lbGluZSIpLnNob3coKTsKdmFyIEY9eyJmYjpleHBsaWNpdGx5X3NoYXJlZCI6dHJ1ZSwiZXhwaXJlc19pbiI6MTU3NjgwMDB9OwpGW0M/Im1vdmllIjoidHZfc2hvdyJdPSQobG9jYXRpb24pLmF0dHIoImhyZWYiKTsKRkIuYXBpKCIvbWUvdmlkZW8ud2FudHNfdG9fd2F0Y2giLCJwb3N0IixGLGZ1bmN0aW9uKEcpe2lmKCFHfHxHLmVycm9yKXtjb25zb2xlLmxvZyhHLmVycm9yLmNvZGUrIjoiK0cuZXJyb3IubWVzc2FnZSk7Cn1lbHNle2NvbnNvbGUubG9nKEcuaWQrIiA6ICIrIkFjdGlvbiB3YXMgc3VjY2Vzc2Z1bCIpOwp9fSk7Cn0pOwp9ZWxzZXtpZigiLSI9PT1FfHwibmkiPT09RXx8IiI9PT1FfHwoRSE9dW5kZWZpbmVkJiZwYXJzZUludChFKT09MCkpe0EuaHRtbCgiUmVtb3ZpbmcgRmFjZWJvb2sgYWN0aW9uIikuc2hvdygpLmRlbGF5KDMwMDApLmZhZGVPdXQoInNsb3ciLGZ1bmN0aW9uKCl7QS5odG1sKCJSZW1vdmVkIGZyb20geW91ciB0aW1lbGluZSIpLnNob3coKTsKfSk7Cn1lbHNle2lmKCFpc05hTihFKSYmaXNGaW5pdGUoRSkpe0EuaHRtbCgiUG9zdGluZyAiK0UrIiBzdGFyIHJhdGluZyIpLnNob3coKS5kZWxheSgzMDAwKS5mYWRlT3V0KCJzbG93IixmdW5jdGlvbigpe0EuaHRtbCgiQWRkZWQgdG8geW91ciB0aW1lbGluZSIpLnNob3coKTsKdmFyIEY9eyJyYXRpbmc6dmFsdWUiOkUsInJhdGluZzpzY2FsZSI6NSwicmF0aW5nOm5vcm1hbGl6ZWRfdmFsdWUiOkUvNSwicmV2aWV3X3RleHQiOkIsImZiOmV4cGxpY2l0bHlfc2hhcmVkIjp0cnVlLCJleHBpcmVzX2luIjoyfTsKRltDPyJtb3ZpZSI6InR2X3Nob3ciXT0kKGxvY2F0aW9uKS5hdHRyKCJocmVmIik7CkZCLmFwaSgiL21lL3ZpZGVvLnJhdGVzIiwicG9zdCIsRixmdW5jdGlvbihHKXtpZighR3x8Ry5lcnJvcil7Y29uc29sZS5sb2coRy5lcnJvci5jb2RlKyI6IitHLmVycm9yLm1lc3NhZ2UpOwp9ZWxzZXtjb25zb2xlLmxvZyhHLmlkKyIgOiAiKyJBY3Rpb24gd2FzIHN1Y2Nlc3NmdWwiKTsKfX0pOwp9KTsKfX19fX19KTsKUlQub3JkPXttb3ZpZXM6bmV3IFJULkJhY2tib25lLkNvbGxlY3Rpb25zLk1vdmllQ29sbGVjdGlvbigpLHR2U2Vhc29uczpuZXcgUlQuQmFja2JvbmUuQ29sbGVjdGlvbnMuVHZTZWFzb25Db2xsZWN0aW9uKCl9OwoKCgoK",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 09:52:20 GMT",
                    "Content-Length": "20025",
                    "Date": "Fri, 07 Nov 2014 09:52:29 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}