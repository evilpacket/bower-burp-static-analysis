{
    "url": "http://localhost:9999/futurepress/epub.js/libs/polymer/polymer.min.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Cross-site scripting (DOM-based)",
    "issueType": 2097936,
    "severity": "High",
    "confidence": "Firm",
    "issueBackground": "DOM-based cross-site scripting vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the HTML document in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause JavaScript code supplied by the attacker to execute within the user's browser in the context of that user's session with the application.<br><br>The attacker-supplied code can perform a wide variety of actions, such as stealing the victim's session token or login credentials, performing arbitrary actions on the victim's behalf, and logging their keystrokes.<br><br>Users can be induced to visit the attacker's crafted URL in various ways, similar to the usual attack delivery vectors for reflected cross-site scripting vulnerabilities. ",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based cross-site scripting vulnerabilities is not to dynamically write data into the HTML document that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing script code into the document. In many cases, the relevant data can be validated on a whitelist basis, to allow only content that is known to be safe. In other cases, it will be necessary to sanitize or encode the data. This can be a complex task, and depending on the context that the data is to be inserted may need to involve a combination of JavaScript escaping, HTML encoding, and URL encoding, in the appropriate sequence.",
    "issueDetail": "The application may be vulnerable to DOM-based cross-site scripting. Data is read from <b>the 'baseURI' property of a DOM element</b> and written to <b>the 'setAttribute()' function of a DOM element</b> via the following statement:<ul><li>d.setAttribu...(\"href\" , document.baseURI) </li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/futurepress/epub.js/libs/polymer/polymer.min.js",
                "path": "/futurepress/epub.js/libs/polymer/polymer.min.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9mdXR1cmVwcmVzcy9lcHViLmpzL2xpYnMvcG9seW1lci9wb2x5bWVyLm1pbi5qcyBIVFRQLzEuMQ0KSG9zdDogbG9jYWxob3N0Ojk5OTkNCg0K",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTU5MDgwDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBUaHUsIDA2IE5vdiAyMDE0IDIzOjIyOjEzIEdNVA0KTGFzdC1Nb2RpZmllZDogVGh1LCAwNiBOb3YgMjAxNCAyMzoyMjoxMiBHTVQNCg0KLy8gQ29weXJpZ2h0IChjKSAyMDEyIFRoZSBQb2x5bWVyIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCi8vCi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAovLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlCi8vIG1ldDoKLy8KLy8gICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAovLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCi8vICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZQovLyBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyCi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUKLy8gZGlzdHJpYnV0aW9uLgovLyAgICAqIE5laXRoZXIgdGhlIG5hbWUgb2YgR29vZ2xlIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMKLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20KLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KLy8KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUwovLyAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVAovLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IKLy8gQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQKLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsCi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QKLy8gTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsCi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWQovLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUCi8vIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRQovLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgpmdW5jdGlvbiBQb2ludGVyR2VzdHVyZUV2ZW50KGEsYil7dmFyIGM9Ynx8e30sZD1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSxlPXtidWJibGVzOiEwLGNhbmNlbGFibGU6ITB9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EgaW4gYyYmKGVbYV09Y1thXSl9KSxkLmluaXRFdmVudChhLGUuYnViYmxlcyxlLmNhbmNlbGFibGUpLE9iamVjdC5rZXlzKGMpLmZvckVhY2goZnVuY3Rpb24oYSl7ZFthXT1iW2FdfSksZC5wcmV2ZW50VGFwPXRoaXMucHJldmVudFRhcCxkfWlmKHdpbmRvdy5QbGF0Zm9ybT13aW5kb3cuUGxhdGZvcm18fHt9LHdpbmRvdy5sb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LGZ1bmN0aW9uKGEpe3ZhciBiPWEuZmxhZ3N8fHt9O2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9IiksYVswXSYmKGJbYVswXV09YVsxXXx8ITApfSksYi5zaGFkb3c9KGIuc2hhZG93ZG9tfHxiLnNoYWRvd3x8Yi5wb2x5ZmlsbHx8IUhUTUxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290KSYmInBvbHlmaWxsIixhLmZsYWdzPWJ9KFBsYXRmb3JtKSwicG9seWZpbGwiPT09UGxhdGZvcm0uZmxhZ3Muc2hhZG93KXt2YXIgU2lkZVRhYmxlOyJ1bmRlZmluZWQiIT10eXBlb2YgV2Vha01hcCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94LyIpPDA/U2lkZVRhYmxlPVdlYWtNYXA6ZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1PYmplY3QuaGFzT3duUHJvcGVydHksYz0obmV3IERhdGUpLmdldFRpbWUoKSUxZTk7U2lkZVRhYmxlPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYysrICsiX18iKX0sU2lkZVRhYmxlLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7YShiLHRoaXMubmFtZSx7dmFsdWU6Yyx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGIuY2FsbChhLHRoaXMubmFtZSk/YVt0aGlzLm5hbWVdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX19KCk7dmFyIFNoYWRvd0RPTVBvbHlmaWxsPXt9OyFmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSksYX1mdW5jdGlvbiBkKGEsYil7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7c3dpdGNoKGMpe2Nhc2UiYXJndW1lbnRzIjpjYXNlImNhbGxlciI6Y2FzZSJsZW5ndGgiOmNhc2UibmFtZSI6Y2FzZSJwcm90b3R5cGUiOmNhc2UidG9TdHJpbmciOnJldHVybn1PYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKSl9KSxhfWZ1bmN0aW9uIGUoYSl7dmFyIGI9YS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxjPXouZ2V0KGIpO2lmKGMpcmV0dXJuIGM7dmFyIGQ9ZShiKSxmPW4oZCk7cmV0dXJuIGsoYixmLGEpLGZ9ZnVuY3Rpb24gZihhLGIpe2koYSxiLCEwKX1mdW5jdGlvbiBnKGEsYil7aShiLGEsITEpfWZ1bmN0aW9uIGgoYSl7cmV0dXJuL15vblthLXpdKyQvLnRlc3QoYSl9ZnVuY3Rpb24gaShiLGMsZCl7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihlKXtpZighKGUgaW4gYykpe0ImJmIuX19sb29rdXBHZXR0ZXJfXyhlKTt2YXIgZjt0cnl7Zj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsZSl9Y2F0Y2goZyl7Zj1DfXZhciBpLGo7aWYoZCYmImZ1bmN0aW9uIj09dHlwZW9mIGYudmFsdWUpcmV0dXJuIGNbZV09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2VdLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSx2b2lkIDA7dmFyIGs9aChlKTtpPWs/YS5nZXRFdmVudEhhbmRsZXJHZXR0ZXIoZSk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2VdfSwoZi53cml0YWJsZXx8Zi5zZXQpJiYoaj1rP2EuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyKGUpOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbFtlXT1hfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGMsZSx7Z2V0Omksc2V0OmosY29uZmlndXJhYmxlOmYuY29uZmlndXJhYmxlLGVudW1lcmFibGU6Zi5lbnVtZXJhYmxlfSl9fSl9ZnVuY3Rpb24gaihhLGIsYyl7dmFyIGU9YS5wcm90b3R5cGU7ayhlLGIsYyksZChiLGEpfWZ1bmN0aW9uIGsoYSxjLGQpe3ZhciBlPWMucHJvdG90eXBlO2Iodm9pZCAwPT09ei5nZXQoYSkpLHouc2V0KGEsYyksZihhLGUpLGQmJmcoZSxkKX1mdW5jdGlvbiBsKGEsYil7cmV0dXJuIHouZ2V0KGIucHJvdG90eXBlKT09PWF9ZnVuY3Rpb24gbShhKXt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYz1lKGIpLGQ9bihjKTtyZXR1cm4gayhiLGQsYSksZH1mdW5jdGlvbiBuKGEpe2Z1bmN0aW9uIGIoYil7YS5jYWxsKHRoaXMsYil9cmV0dXJuIGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpLGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWIsYn1mdW5jdGlvbiBvKGEpe3JldHVybiBhIGluc3RhbmNlb2YgQS5FdmVudFRhcmdldHx8YSBpbnN0YW5jZW9mIEEuRXZlbnR8fGEgaW5zdGFuY2VvZiBBLkRPTUltcGxlbWVudGF0aW9ufWZ1bmN0aW9uIHAoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBGfHxhIGluc3RhbmNlb2YgRXx8YSBpbnN0YW5jZW9mIEd8fGEgaW5zdGFuY2VvZiBEfWZ1bmN0aW9uIHEoYSl7aWYobnVsbD09PWEpcmV0dXJuIG51bGw7YihwKGEpKTt2YXIgYz15LmdldChhKTtpZighYyl7dmFyIGQ9ZShhKTtjPW5ldyBkKGEpLHkuc2V0KGEsYyl9cmV0dXJuIGN9ZnVuY3Rpb24gcihhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYihvKGEpKSxhLmltcGwpfWZ1bmN0aW9uIHMoYSl7cmV0dXJuIGEmJm8oYSk/cihhKTphfWZ1bmN0aW9uIHQoYSl7cmV0dXJuIGEmJiFvKGEpP3EoYSk6YX1mdW5jdGlvbiB1KGEsYyl7bnVsbCE9PWMmJihiKHAoYSkpLGIodm9pZCAwPT09Y3x8byhjKSkseS5zZXQoYSxjKSl9ZnVuY3Rpb24gdihhLGIsYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEucHJvdG90eXBlLGIse2dldDpjLGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9ZnVuY3Rpb24gdyhhLGIpe3YoYSxiLGZ1bmN0aW9uKCl7cmV0dXJuIHEodGhpcy5pbXBsW2JdKX0pfWZ1bmN0aW9uIHgoYSxiKXthLmZvckVhY2goZnVuY3Rpb24oYSl7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7dmFyIGE9cSh0aGlzKTtyZXR1cm4gYVtiXS5hcHBseShhLGFyZ3VtZW50cyl9fSl9KX12YXIgeT1uZXcgU2lkZVRhYmxlLHo9bmV3IFNpZGVUYWJsZSxBPU9iamVjdC5jcmVhdGUobnVsbCk7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTt2YXIgQj0vRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxDPXtnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5jdGlvbigpe30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9LEQ9RE9NSW1wbGVtZW50YXRpb24sRT1FdmVudCxGPU5vZGUsRz1XaW5kb3c7YS5hc3NlcnQ9YixhLmRlZmluZUdldHRlcj12LGEuZGVmaW5lV3JhcEdldHRlcj13LGEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXI9eCxhLmlzV3JhcHBlckZvcj1sLGEubWl4aW49YyxhLnJlZ2lzdGVyT2JqZWN0PW0sYS5yZWdpc3RlcldyYXBwZXI9aixhLnJld3JhcD11LGEudW53cmFwPXIsYS51bndyYXBJZk5lZWRlZD1zLGEud3JhcD1xLGEud3JhcElmTmVlZGVkPXQsYS53cmFwcGVycz1BfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIE4uU2hhZG93Um9vdH1mdW5jdGlvbiBjKGEpe3ZhciBiPWEubG9jYWxOYW1lO3JldHVybiJjb250ZW50Ij09PWJ8fCJzaGFkb3ciPT09Yn1mdW5jdGlvbiBkKGEpe3JldHVybiEhYS5zaGFkb3dSb290fWZ1bmN0aW9uIGUoYSl7dmFyIGI7cmV0dXJuIGEucGFyZW50Tm9kZXx8KGI9YS5kZWZhdWx0VmlldykmJk0oYil8fG51bGx9ZnVuY3Rpb24gZihmLGcsaCl7aWYoaC5sZW5ndGgpcmV0dXJuIGguc2hpZnQoKTtpZihiKGYpKXJldHVybiBqKGYpfHxhLmdldEhvc3RGb3JTaGFkb3dSb290KGYpO3ZhciBpPWEuZXZlbnRQYXJlbnRzVGFibGUuZ2V0KGYpO2lmKGkpe2Zvcih2YXIgaz0xO2s8aS5sZW5ndGg7aysrKWhbay0xXT1pW2tdO3JldHVybiBpWzBdfWlmKGcmJmMoZikpe3ZhciBsPWYucGFyZW50Tm9kZTtpZihsJiZkKGwpKWZvcih2YXIgbT1hLmdldFNoYWRvd1RyZWVzKGwpLG49aihnKSxrPTA7azxtLmxlbmd0aDtrKyspaWYobVtrXS5jb250YWlucyhuKSlyZXR1cm4gbn1yZXR1cm4gZShmKX1mdW5jdGlvbiBnKGEpe2Zvcih2YXIgZD1bXSxlPWEsZz1bXSxpPVtdO2U7KXt2YXIgaj1udWxsO2lmKGMoZSkpe2o9aChkKTt2YXIgaz1kW2QubGVuZ3RoLTFdfHxlO2QucHVzaChrKX1lbHNlIGQubGVuZ3RofHxkLnB1c2goZSk7dmFyIGw9ZFtkLmxlbmd0aC0xXTtnLnB1c2goe3RhcmdldDpsLGN1cnJlbnRUYXJnZXQ6ZX0pLGIoZSkmJmQucG9wKCksZT1mKGUsaixpKX1yZXR1cm4gZ31mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xO2I+PTA7Yi0tKWlmKCFjKGFbYl0pKXJldHVybiBhW2JdO3JldHVybiBudWxsfWZ1bmN0aW9uIGkoZCxlKXtmb3IodmFyIGc9W107ZDspe2Zvcih2YXIgaT1bXSxqPWUsbD12b2lkIDA7ajspe3ZhciBuPW51bGw7aWYoaS5sZW5ndGgpe2lmKGMoaikmJihuPWgoaSksayhsKSkpe3ZhciBvPWlbaS5sZW5ndGgtMV07aS5wdXNoKG8pfX1lbHNlIGkucHVzaChqKTtpZihtKGosZCkpcmV0dXJuIGlbaS5sZW5ndGgtMV07YihqKSYmaS5wb3AoKSxsPWosaj1mKGosbixnKX1kPWIoZCk/YS5nZXRIb3N0Rm9yU2hhZG93Um9vdChkKTpkLnBhcmVudE5vZGV9fWZ1bmN0aW9uIGooYil7cmV0dXJuIGEuaW5zZXJ0aW9uUGFyZW50VGFibGUuZ2V0KGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIGooYSl9ZnVuY3Rpb24gbChhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBtKGEsYil7cmV0dXJuIGwoYSk9PT1sKGIpfWZ1bmN0aW9uIG4oYixjKXtpZihiPT09YylyZXR1cm4hMDtpZihiIGluc3RhbmNlb2YgTi5TaGFkb3dSb290KXt2YXIgZD1hLmdldEhvc3RGb3JTaGFkb3dSb290KGIpO3JldHVybiBkP24obChkKSxjKTohMX1yZXR1cm4hMX1mdW5jdGlvbiBvKGEpe3N3aXRjaChhKXtjYXNlIkRPTUF0dHJNb2RpZmllZCI6Y2FzZSJET01BdHRyaWJ1dGVOYW1lQ2hhbmdlZCI6Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOmNhc2UiRE9NRWxlbWVudE5hbWVDaGFuZ2VkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZCI6Y2FzZSJET01Ob2RlSW5zZXJ0ZWRJbnRvRG9jdW1lbnQiOmNhc2UiRE9NTm9kZVJlbW92ZWQiOmNhc2UiRE9NTm9kZVJlbW92ZWRGcm9tRG9jdW1lbnQiOmNhc2UiRE9NU3VidHJlZU1vZGlmaWVkIjpyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBwKGIpe2lmKCFQLmdldChiKSl7UC5zZXQoYiwhMCksbyhiLnR5cGUpfHxhLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgYz1NKGIudGFyZ2V0KSxkPU0oYik7cmV0dXJuIHEoZCxjKX19ZnVuY3Rpb24gcShhLGIpe3ZhciBjPWcoYik7cmV0dXJuImxvYWQiPT09YS50eXBlJiYyPT09Yy5sZW5ndGgmJmNbMF0udGFyZ2V0IGluc3RhbmNlb2YgTi5Eb2N1bWVudCYmYy5zaGlmdCgpLFguc2V0KGEsYykscihhLGMpJiZzKGEsYykmJnQoYSxjKSxULnNldChhLHcuTk9ORSksUi5zZXQoYSxudWxsKSxhLmRlZmF1bHRQcmV2ZW50ZWR9ZnVuY3Rpb24gcihhLGIpe2Zvcih2YXIgYyxkPWIubGVuZ3RoLTE7ZD4wO2QtLSl7dmFyIGU9YltkXS50YXJnZXQsZj1iW2RdLmN1cnJlbnRUYXJnZXQ7aWYoZSE9PWYmJihjPXcuQ0FQVFVSSU5HX1BIQVNFLCF1KGJbZF0sYSxjKSkpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gcyhhLGIpe3ZhciBjPXcuQVRfVEFSR0VUO3JldHVybiB1KGJbMF0sYSxjKX1mdW5jdGlvbiB0KGEsYil7Zm9yKHZhciBjLGQ9YS5idWJibGVzLGU9MTtlPGIubGVuZ3RoO2UrKyl7dmFyIGY9YltlXS50YXJnZXQsZz1iW2VdLmN1cnJlbnRUYXJnZXQ7aWYoZj09PWcpYz13LkFUX1RBUkdFVDtlbHNle2lmKCFkfHxWLmdldChhKSljb250aW51ZTtjPXcuQlVCQkxJTkdfUEhBU0V9aWYoIXUoYltlXSxhLGMpKXJldHVybn19ZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQ9YS50YXJnZXQsZT1hLmN1cnJlbnRUYXJnZXQsZj1PLmdldChlKTtpZighZilyZXR1cm4hMDtpZigicmVsYXRlZFRhcmdldCJpbiBiKXt2YXIgZz1MKGIpLGg9TShnLnJlbGF0ZWRUYXJnZXQpLGo9aShlLGgpO2lmKGo9PT1kKXJldHVybiEwO1Muc2V0KGIsail9VC5zZXQoYixjKTt2YXIgaz1iLnR5cGUsbD0hMTtRLnNldChiLGQpLFIuc2V0KGIsZSk7Zm9yKHZhciBtPTA7bTxmLmxlbmd0aDttKyspe3ZhciBuPWZbbV07aWYobi5yZW1vdmVkKWw9ITA7ZWxzZSBpZighKG4udHlwZSE9PWt8fCFuLmNhcHR1cmUmJmM9PT13LkNBUFRVUklOR19QSEFTRXx8bi5jYXB0dXJlJiZjPT09dy5CVUJCTElOR19QSEFTRSkpdHJ5e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuLmhhbmRsZXI/bi5oYW5kbGVyLmNhbGwoZSxiKTpuLmhhbmRsZXIuaGFuZGxlRXZlbnQoYiksVi5nZXQoYikpcmV0dXJuITF9Y2F0Y2gobyl7d2luZG93Lm9uZXJyb3I/d2luZG93Lm9uZXJyb3Ioby5tZXNzYWdlKTpjb25zb2xlLmVycm9yKG8pfX1pZihsKXt2YXIgcD1mLnNsaWNlKCk7Zi5sZW5ndGg9MDtmb3IodmFyIG09MDttPHAubGVuZ3RoO20rKylwW21dLnJlbW92ZWR8fGYucHVzaChwW21dKX1yZXR1cm4hVS5nZXQoYil9ZnVuY3Rpb24gdihhLGIsYyl7dGhpcy50eXBlPWEsdGhpcy5oYW5kbGVyPWIsdGhpcy5jYXB0dXJlPUJvb2xlYW4oYyl9ZnVuY3Rpb24gdyhhLGIpe3JldHVybiBhIGluc3RhbmNlb2YgWT8odGhpcy5pbXBsPWEsdm9pZCAwKTpNKEEoWSwiRXZlbnQiLGEsYikpfWZ1bmN0aW9uIHgoYSl7cmV0dXJuIGEmJmEucmVsYXRlZFRhcmdldD9PYmplY3QuY3JlYXRlKGEse3JlbGF0ZWRUYXJnZXQ6e3ZhbHVlOkwoYS5yZWxhdGVkVGFyZ2V0KX19KTphfWZ1bmN0aW9uIHkoYSxiLGMpe3ZhciBkPXdpbmRvd1thXSxlPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGIgaW5zdGFuY2VvZiBkPyh0aGlzLmltcGw9Yix2b2lkIDApOk0oQShkLGEsYixjKSl9O3JldHVybiBlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxjJiZKKGUucHJvdG90eXBlLGMpLGQmJihkLnByb3RvdHlwZVsiaW5pdCIrYV0/SyhkLGUsZG9jdW1lbnQuY3JlYXRlRXZlbnQoYSkpOksoZCxlLG5ldyBkKCJ0ZW1wIikpKSxlfWZ1bmN0aW9uIHooYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXthcmd1bWVudHNbYl09TChhcmd1bWVudHNbYl0pO3ZhciBjPUwodGhpcyk7Y1thXS5hcHBseShjLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIEEoYSxiLGMsZCl7aWYoZ2IpcmV0dXJuIG5ldyBhKGMseChkKSk7dmFyIGU9TChkb2N1bWVudC5jcmVhdGVFdmVudChiKSksZj1mYltiXSxnPVtjXTtyZXR1cm4gT2JqZWN0LmtleXMoZikuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1udWxsIT1kJiZhIGluIGQ/ZFthXTpmW2FdOyJyZWxhdGVkVGFyZ2V0Ij09PWEmJihiPUwoYikpLGcucHVzaChiKX0pLGVbImluaXQiK2JdLmFwcGx5KGUsZyksZX1mdW5jdGlvbiBCKGEpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhPyEwOmEmJmEuaGFuZGxlRXZlbnR9ZnVuY3Rpb24gQyhhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBEKGIpe3JldHVybiBiIGluc3RhbmNlb2YgTi5TaGFkb3dSb290JiYoYj1hLmdldEhvc3RGb3JTaGFkb3dSb290KGIpKSxMKGIpfWZ1bmN0aW9uIEUoYSl7SShhLGpiKX1mdW5jdGlvbiBGKGIsYyxkLGUpe2EucmVuZGVyQWxsUGVuZGluZygpO2Zvcih2YXIgZj1NKGtiLmNhbGwoYy5pbXBsLGQsZSkpLGg9ZyhmLHRoaXMpLGk9MDtpPGgubGVuZ3RoO2krKyl7dmFyIGo9aFtpXTtpZihqLmN1cnJlbnRUYXJnZXQ9PT1iKXJldHVybiBqLnRhcmdldH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBHKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPVcuZ2V0KHRoaXMpO3JldHVybiBiJiZiW2FdJiZiW2FdLnZhbHVlfHxudWxsfX1mdW5jdGlvbiBIKGEpe3ZhciBiPWEuc2xpY2UoMik7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPVcuZ2V0KHRoaXMpO2R8fChkPU9iamVjdC5jcmVhdGUobnVsbCksVy5zZXQodGhpcyxkKSk7dmFyIGU9ZFthXTtpZihlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixlLndyYXBwZWQsITEpLCJmdW5jdGlvbiI9PXR5cGVvZiBjKXt2YXIgZj1mdW5jdGlvbihiKXt2YXIgZD1jLmNhbGwodGhpcyxiKTtkPT09ITE/Yi5wcmV2ZW50RGVmYXVsdCgpOiJvbmJlZm9yZXVubG9hZCI9PT1hJiYic3RyaW5nIj09dHlwZW9mIGQmJihiLnJldHVyblZhbHVlPWQpfTt0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYixmLCExKSxkW2FdPXt2YWx1ZTpjLHdyYXBwZWQ6Zn19fX12YXIgST1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLEo9YS5taXhpbixLPWEucmVnaXN0ZXJXcmFwcGVyLEw9YS51bndyYXAsTT1hLndyYXAsTj1hLndyYXBwZXJzO25ldyBTaWRlVGFibGU7dmFyIE89bmV3IFNpZGVUYWJsZSxQPW5ldyBTaWRlVGFibGUsUT1uZXcgU2lkZVRhYmxlLFI9bmV3IFNpZGVUYWJsZSxTPW5ldyBTaWRlVGFibGUsVD1uZXcgU2lkZVRhYmxlLFU9bmV3IFNpZGVUYWJsZSxWPW5ldyBTaWRlVGFibGUsVz1uZXcgU2lkZVRhYmxlLFg9bmV3IFNpZGVUYWJsZTt2LnByb3RvdHlwZT17ZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmhhbmRsZXI9PT1hLmhhbmRsZXImJnRoaXMudHlwZT09PWEudHlwZSYmdGhpcy5jYXB0dXJlPT09YS5jYXB0dXJlfSxnZXQgcmVtb3ZlZCgpe3JldHVybiBudWxsPT09dGhpcy5oYW5kbGVyfSxyZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXI9bnVsbH19O3ZhciBZPXdpbmRvdy5FdmVudDt3LnByb3RvdHlwZT17Z2V0IHRhcmdldCgpe3JldHVybiBRLmdldCh0aGlzKX0sZ2V0IGN1cnJlbnRUYXJnZXQoKXtyZXR1cm4gUi5nZXQodGhpcyl9LGdldCBldmVudFBoYXNlKCl7cmV0dXJuIFQuZ2V0KHRoaXMpfSxnZXQgcGF0aCgpe3ZhciBhPW5ldyBOLk5vZGVMaXN0LGI9WC5nZXQodGhpcyk7aWYoYil7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aC0xLGU9bChSLmdldCh0aGlzKSksZj0wO2Q+PWY7ZisrKXt2YXIgZz1iW2ZdLmN1cnJlbnRUYXJnZXQsaD1sKGcpO24oZSxoKSYmKGYhPT1kfHxnIGluc3RhbmNlb2YgTi5Ob2RlKSYmKGFbYysrXT1nKX1hLmxlbmd0aD1jfXJldHVybiBhfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtVLnNldCh0aGlzLCEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7VS5zZXQodGhpcywhMCksVi5zZXQodGhpcywhMCl9fSxLKFksdyxkb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSk7dmFyIFo9eSgiVUlFdmVudCIsdyksJD15KCJDdXN0b21FdmVudCIsdyksXz17Z2V0IHJlbGF0ZWRUYXJnZXQoKXtyZXR1cm4gUy5nZXQodGhpcyl8fE0oTCh0aGlzKS5yZWxhdGVkVGFyZ2V0KX19LGFiPUooe2luaXRNb3VzZUV2ZW50OnooImluaXRNb3VzZUV2ZW50IiwxNCl9LF8pLGJiPUooe2luaXRGb2N1c0V2ZW50OnooImluaXRGb2N1c0V2ZW50Iiw1KX0sXyksY2I9eSgiTW91c2VFdmVudCIsWixhYiksZGI9eSgiRm9jdXNFdmVudCIsWixiYiksZWI9eSgiTXV0YXRpb25FdmVudCIsdyx7aW5pdE11dGF0aW9uRXZlbnQ6eigiaW5pdE11dGF0aW9uRXZlbnQiLDMpLGdldCByZWxhdGVkTm9kZSgpe3JldHVybiBNKHRoaXMuaW1wbC5yZWxhdGVkTm9kZSl9fSksZmI9T2JqZWN0LmNyZWF0ZShudWxsKSxnYj1mdW5jdGlvbigpe3RyeXtuZXcgd2luZG93Lk1vdXNlRXZlbnQoImNsaWNrIil9Y2F0Y2goYSl7cmV0dXJuITF9cmV0dXJuITB9KCk7aWYoIWdiKXt2YXIgaGI9ZnVuY3Rpb24oYSxiLGMpe2lmKGMpe3ZhciBkPWZiW2NdO2I9SihKKHt9LGQpLGIpfWZiW2FdPWJ9O2hiKCJFdmVudCIse2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMX0pLGhiKCJDdXN0b21FdmVudCIse2RldGFpbDpudWxsfSwiRXZlbnQiKSxoYigiVUlFdmVudCIse3ZpZXc6bnVsbCxkZXRhaWw6MH0sIkV2ZW50IiksaGIoIk1vdXNlRXZlbnQiLHtzY3JlZW5YOjAsc2NyZWVuWTowLGNsaWVudFg6MCxjbGllbnRZOjAsY3RybEtleTohMSxhbHRLZXk6ITEsc2hpZnRLZXk6ITEsbWV0YUtleTohMSxidXR0b246MCxyZWxhdGVkVGFyZ2V0Om51bGx9LCJVSUV2ZW50IiksaGIoIkZvY3VzRXZlbnQiLHtyZWxhdGVkVGFyZ2V0Om51bGx9LCJVSUV2ZW50Iil9dmFyIGliPXdpbmRvdy5FdmVudFRhcmdldCxqYj1bImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdO1tOb2RlLFdpbmRvd10uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnByb3RvdHlwZTtqYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLGErIl8iLHt2YWx1ZTpiW2FdfSl9KX0pLEMucHJvdG90eXBlPXthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtpZihCKGIpKXt2YXIgZD1uZXcgdihhLGIsYyksZT1PLmdldCh0aGlzKTtpZihlKXtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKylpZihkLmVxdWFscyhlW2ZdKSlyZXR1cm59ZWxzZSBlPVtdLE8uc2V0KHRoaXMsZSk7ZS5wdXNoKGQpO3ZhciBnPUQodGhpcyk7Zy5hZGRFdmVudExpc3RlbmVyXyhhLHAsITApfX0scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7Yz1Cb29sZWFuKGMpO3ZhciBkPU8uZ2V0KHRoaXMpO2lmKGQpe2Zvcih2YXIgZT0wLGY9ITEsZz0wO2c8ZC5sZW5ndGg7ZysrKWRbZ10udHlwZT09PWEmJmRbZ10uY2FwdHVyZT09PWMmJihlKyssZFtnXS5oYW5kbGVyPT09YiYmKGY9ITAsZFtnXS5yZW1vdmUoKSkpO2lmKGYmJjE9PT1lKXt2YXIgaD1EKHRoaXMpO2gucmVtb3ZlRXZlbnRMaXN0ZW5lcl8oYSxwLCEwKX19fSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPUQodGhpcyk7cmV0dXJuIGIuZGlzcGF0Y2hFdmVudF8oTChhKSl9fSxpYiYmSyhpYixDKTt2YXIga2I9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludDthLmFkanVzdFJlbGF0ZWRUYXJnZXQ9aSxhLmVsZW1lbnRGcm9tUG9pbnQ9RixhLmdldEV2ZW50SGFuZGxlckdldHRlcj1HLGEuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyPUgsYS53cmFwRXZlbnRUYXJnZXRNZXRob2RzPUUsYS53cmFwcGVycy5DdXN0b21FdmVudD0kLGEud3JhcHBlcnMuRXZlbnQ9dyxhLndyYXBwZXJzLkV2ZW50VGFyZ2V0PUMsYS53cmFwcGVycy5Gb2N1c0V2ZW50PWRiLGEud3JhcHBlcnMuTW91c2VFdmVudD1jYixhLndyYXBwZXJzLk11dGF0aW9uRXZlbnQ9ZWIsYS53cmFwcGVycy5VSUV2ZW50PVp9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7ZW51bWVyYWJsZTohMX0pfWZ1bmN0aW9uIGMoKXt0aGlzLmxlbmd0aD0wLGIodGhpcywibGVuZ3RoIil9ZnVuY3Rpb24gZChhKXtpZihudWxsPT1hKXJldHVybiBhO2Zvcih2YXIgYj1uZXcgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWJbZF09ZihhW2RdKTtyZXR1cm4gYi5sZW5ndGg9ZSxifWZ1bmN0aW9uIGUoYSxiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBkKHRoaXMuaW1wbFtiXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fXZhciBmPWEud3JhcDtjLnByb3RvdHlwZT17aXRlbTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thXX19LGIoYy5wcm90b3R5cGUsIml0ZW0iKSxhLndyYXBwZXJzLk5vZGVMaXN0PWMsYS5hZGRXcmFwTm9kZUxpc3RNZXRob2Q9ZSxhLndyYXBOb2RlTGlzdD1kfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtqKGEgaW5zdGFuY2VvZiBmKX1mdW5jdGlvbiBjKGEsYixjLGQpe2lmKGEubm9kZVR5cGUhPT1mLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUpcmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpLGEucGFyZW50Tm9kZV89YixhLnByZXZpb3VzU2libGluZ189YyxhLm5leHRTaWJsaW5nXz1kLGMmJihjLm5leHRTaWJsaW5nXz1hKSxkJiYoZC5wcmV2aW91c1NpYmxpbmdfPWEpLFthXTtmb3IodmFyIGUsZz1bXTtlPWEuZmlyc3RDaGlsZDspYS5yZW1vdmVDaGlsZChlKSxnLnB1c2goZSksZS5wYXJlbnROb2RlXz1iO2Zvcih2YXIgaD0wO2g8Zy5sZW5ndGg7aCsrKWdbaF0ucHJldmlvdXNTaWJsaW5nXz1nW2gtMV18fGMsZ1toXS5uZXh0U2libGluZ189Z1toKzFdfHxkO3JldHVybiBjJiYoYy5uZXh0U2libGluZ189Z1swXSksZCYmKGQucHJldmlvdXNTaWJsaW5nXz1nW2cubGVuZ3RoLTFdKSxnfWZ1bmN0aW9uIGQoYSxiKXt2YXIgYz1iLmxlbmd0aDtpZigxPT09YylyZXR1cm4gbShiWzBdKTtmb3IodmFyIGQ9bShhLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKSxlPTA7Yz5lO2UrKylkLmFwcGVuZENoaWxkKG0oYltlXSkpO3JldHVybiBkfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPWEuZmlyc3RDaGlsZDtiOyl7aihiLnBhcmVudE5vZGU9PT1hKTt2YXIgYz1iLm5leHRTaWJsaW5nLGQ9bShiKSxlPWQucGFyZW50Tm9kZTtlJiZzLmNhbGwoZSxkKSxiLnByZXZpb3VzU2libGluZ189Yi5uZXh0U2libGluZ189Yi5wYXJlbnROb2RlXz1udWxsLGI9Y31hLmZpcnN0Q2hpbGRfPWEubGFzdENoaWxkXz1udWxsfWZ1bmN0aW9uIGYoYSl7aihhIGluc3RhbmNlb2YgbyksZy5jYWxsKHRoaXMsYSksdGhpcy5wYXJlbnROb2RlXz12b2lkIDAsdGhpcy5maXJzdENoaWxkXz12b2lkIDAsdGhpcy5sYXN0Q2hpbGRfPXZvaWQgMCx0aGlzLm5leHRTaWJsaW5nXz12b2lkIDAsdGhpcy5wcmV2aW91c1NpYmxpbmdfPXZvaWQgMH12YXIgZz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGg9YS53cmFwcGVycy5Ob2RlTGlzdCxpPWEuZGVmaW5lV3JhcEdldHRlcixqPWEuYXNzZXJ0LGs9YS5taXhpbixsPWEucmVnaXN0ZXJXcmFwcGVyLG09YS51bndyYXAsbj1hLndyYXAsbz13aW5kb3cuTm9kZSxwPW8ucHJvdG90eXBlLmFwcGVuZENoaWxkLHE9by5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLHI9by5wcm90b3R5cGUucmVwbGFjZUNoaWxkLHM9by5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsdD1vLnByb3RvdHlwZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGcucHJvdG90eXBlKSxrKGYucHJvdG90eXBlLHthcHBlbmRDaGlsZDpmdW5jdGlvbihhKXtiKGEpLHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGU9dGhpcy5sYXN0Q2hpbGQsZj1udWxsLGc9YyhhLHRoaXMsZSxmKTtyZXR1cm4gdGhpcy5sYXN0Q2hpbGRfPWdbZy5sZW5ndGgtMV0sZXx8KHRoaXMuZmlyc3RDaGlsZF89Z1swXSkscC5jYWxsKHRoaXMuaW1wbCxkKHRoaXMsZykpLGF9LGluc2VydEJlZm9yZTpmdW5jdGlvbihhLGUpe2lmKCFlKXJldHVybiB0aGlzLmFwcGVuZENoaWxkKGEpO2IoYSksYihlKSxqKGUucGFyZW50Tm9kZT09PXRoaXMpLHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGY9ZS5wcmV2aW91c1NpYmxpbmcsZz1lLGg9YyhhLHRoaXMsZixnKTt0aGlzLmZpcnN0Q2hpbGQ9PT1lJiYodGhpcy5maXJzdENoaWxkXz1oWzBdKTt2YXIgaT1tKGUpLGs9aS5wYXJlbnROb2RlO3JldHVybiBrJiZxLmNhbGwoayxkKHRoaXMsaCksaSksYX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSl7aWYoYihhKSxhLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGM9dGhpcy5maXJzdENoaWxkLGQ9dGhpcy5sYXN0Q2hpbGQsZT1hLm5leHRTaWJsaW5nLGY9YS5wcmV2aW91c1NpYmxpbmcsZz1tKGEpLGg9Zy5wYXJlbnROb2RlO3JldHVybiBoJiZzLmNhbGwoaCxnKSxjPT09YSYmKHRoaXMuZmlyc3RDaGlsZF89ZSksZD09PWEmJih0aGlzLmxhc3RDaGlsZF89ZiksZiYmKGYubmV4dFNpYmxpbmdfPWUpLGUmJihlLnByZXZpb3VzU2libGluZ189ZiksYS5wcmV2aW91c1NpYmxpbmdfPWEubmV4dFNpYmxpbmdfPWEucGFyZW50Tm9kZV89bnVsbCxhfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxlKXtpZihiKGEpLGIoZSksZS5wYXJlbnROb2RlIT09dGhpcyl0aHJvdyBuZXcgRXJyb3IoIk5vdEZvdW5kRXJyb3IiKTt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBmPWUucHJldmlvdXNTaWJsaW5nLGc9ZS5uZXh0U2libGluZztnPT09YSYmKGc9YS5uZXh0U2libGluZyk7dmFyIGg9YyhhLHRoaXMsZixnKTt0aGlzLmZpcnN0Q2hpbGQ9PT1lJiYodGhpcy5maXJzdENoaWxkXz1oWzBdKSx0aGlzLmxhc3RDaGlsZD09PWUmJih0aGlzLmxhc3RDaGlsZF89aFtoLmxlbmd0aC0xXSksZS5wcmV2aW91c1NpYmxpbmdfPW51bGwsZS5uZXh0U2libGluZ189bnVsbCxlLnBhcmVudE5vZGVfPW51bGw7dmFyIGk9bShlKTtyZXR1cm4gaS5wYXJlbnROb2RlJiZyLmNhbGwoaS5wYXJlbnROb2RlLGQodGhpcyxoKSxpKSxlfSxoYXNDaGlsZE5vZGVzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLmZpcnN0Q2hpbGR9LGdldCBwYXJlbnROb2RlKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMucGFyZW50Tm9kZV8/dGhpcy5wYXJlbnROb2RlXzpuKHRoaXMuaW1wbC5wYXJlbnROb2RlKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5maXJzdENoaWxkXz90aGlzLmZpcnN0Q2hpbGRfOm4odGhpcy5pbXBsLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubGFzdENoaWxkXz90aGlzLmxhc3RDaGlsZF86bih0aGlzLmltcGwubGFzdENoaWxkKX0sZ2V0IG5leHRTaWJsaW5nKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubmV4dFNpYmxpbmdfP3RoaXMubmV4dFNpYmxpbmdfOm4odGhpcy5pbXBsLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzU2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLnByZXZpb3VzU2libGluZ18/dGhpcy5wcmV2aW91c1NpYmxpbmdfOm4odGhpcy5pbXBsLnByZXZpb3VzU2libGluZyl9LGdldCBwYXJlbnRFbGVtZW50KCl7Zm9yKHZhciBhPXRoaXMucGFyZW50Tm9kZTthJiZhLm5vZGVUeXBlIT09Zi5FTEVNRU5UX05PREU7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxnZXQgdGV4dENvbnRlbnQoKXtmb3IodmFyIGE9IiIsYj10aGlzLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpYSs9Yi50ZXh0Q29udGVudDtyZXR1cm4gYX0sc2V0IHRleHRDb250ZW50KGEpe2lmKGUodGhpcyksdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSwiIiE9PWEpe3ZhciBiPXRoaXMuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpO3RoaXMuYXBwZW5kQ2hpbGQoYil9fSxnZXQgY2hpbGROb2Rlcygpe2Zvcih2YXIgYT1uZXcgaCxiPTAsYz10aGlzLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpYVtiKytdPWM7cmV0dXJuIGEubGVuZ3RoPWIsYX0sY2xvbmVOb2RlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXJldHVybiBuKHRoaXMuaW1wbC5jbG9uZU5vZGUoYSkpO3ZhciBiPW4odGhpcy5pbXBsLmNsb25lTm9kZSghMSkpO2lmKGEpZm9yKHZhciBjPXRoaXMuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyliLmFwcGVuZENoaWxkKGMuY2xvbmVOb2RlKCEwKSk7cmV0dXJuIGJ9LGNvbnRhaW5zOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiExO2lmKGE9PT10aGlzKXJldHVybiEwO3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYj90aGlzLmNvbnRhaW5zKGIpOiExfSxjb21wYXJlRG9jdW1lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gdC5jYWxsKHRoaXMuaW1wbCxtKGEpKX19KSxpKGYsIm93bmVyRG9jdW1lbnQiKSxsKG8sZixkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGRlbGV0ZSBmLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yLGRlbGV0ZSBmLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLGYucHJvdG90eXBlPWsoT2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSksZi5wcm90b3R5cGUpLGEud3JhcHBlcnMuTm9kZT1mfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGMpe2Zvcih2YXIgZCxlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7ZTspe2lmKGUubWF0Y2hlcyhjKSlyZXR1cm4gZTtpZihkPWIoZSxjKSlyZXR1cm4gZDtlPWUubmV4dEVsZW1lbnRTaWJsaW5nfXJldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiLGQpe2Zvcih2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KWUubWF0Y2hlcyhiKSYmKGRbZC5sZW5ndGgrK109ZSksYyhlLGIsZCksZT1lLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gZH12YXIgZD17cXVlcnlTZWxlY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gYih0aGlzLGEpfSxxdWVyeVNlbGVjdG9yQWxsOmZ1bmN0aW9uKGEpe3JldHVybiBjKHRoaXMsYSxuZXcgTm9kZUxpc3QpfX0sZT17Z2V0RWxlbWVudHNCeVRhZ05hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbChhKX0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCIuIithKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWVOUzpmdW5jdGlvbihhLGIpe2lmKCIqIj09PWEpcmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYik7Zm9yKHZhciBjPW5ldyBOb2RlTGlzdCxkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYiksZT0wLGY9MDtlPGQubGVuZ3RoO2UrKylkW2VdLm5hbWVzcGFjZVVSST09PWEmJihjW2YrK109ZFtlXSk7cmV0dXJuIGMubGVuZ3RoPWYsY319O2EuR2V0RWxlbWVudHNCeUludGVyZmFjZT1lLGEuU2VsZWN0b3JzSW50ZXJmYWNlPWR9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLnByZXZpb3VzU2libGluZztyZXR1cm4gYX12YXIgZD1hLndyYXBwZXJzLk5vZGVMaXN0LGU9e2dldCBmaXJzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBiKHRoaXMuZmlyc3RDaGlsZCl9LGdldCBsYXN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGModGhpcy5sYXN0Q2hpbGQpfSxnZXQgY2hpbGRFbGVtZW50Q291bnQoKXtmb3IodmFyIGE9MCxiPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YjtiPWIubmV4dEVsZW1lbnRTaWJsaW5nKWErKztyZXR1cm4gYX0sZ2V0IGNoaWxkcmVuKCl7Zm9yKHZhciBhPW5ldyBkLGI9MCxjPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YztjPWMubmV4dEVsZW1lbnRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9fSxmPXtnZXQgbmV4dEVsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGIodGhpcy5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c0VsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGModGhpcy5uZXh0U2libGluZyl9fTthLkNoaWxkTm9kZUludGVyZmFjZT1mLGEuUGFyZW50Tm9kZUludGVyZmFjZT1lfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtkLmNhbGwodGhpcyxhKX12YXIgYz1hLkNoaWxkTm9kZUludGVyZmFjZSxkPWEud3JhcHBlcnMuTm9kZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPXdpbmRvdy5DaGFyYWN0ZXJEYXRhO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoYi5wcm90b3R5cGUse2dldCB0ZXh0Q29udGVudCgpe3JldHVybiB0aGlzLmRhdGF9LHNldCB0ZXh0Q29udGVudChhKXt0aGlzLmRhdGE9YX19KSxlKGIucHJvdG90eXBlLGMpLGYoZyxiLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhPWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2UuY2FsbCh0aGlzLGEpfXZhciBjPWEuQ2hpbGROb2RlSW50ZXJmYWNlLGQ9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGU9YS53cmFwcGVycy5Ob2RlLGY9YS5QYXJlbnROb2RlSW50ZXJmYWNlLGc9YS5TZWxlY3RvcnNJbnRlcmZhY2U7YS5hZGRXcmFwTm9kZUxpc3RNZXRob2Q7dmFyIGg9YS5taXhpbixpPWEucmVnaXN0ZXJXcmFwcGVyLGo9YS53cmFwcGVycyxrPW5ldyBTaWRlVGFibGUsbD13aW5kb3cuRWxlbWVudCxtPWwucHJvdG90eXBlLm1hdGNoZXN8fGwucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3Rvcnx8bC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3J8fGwucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSxoKGIucHJvdG90eXBlLHtjcmVhdGVTaGFkb3dSb290OmZ1bmN0aW9uKCl7dmFyIGI9bmV3IGouU2hhZG93Um9vdCh0aGlzKTtyZXR1cm4gay5zZXQodGhpcyxiKSxhLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcighMCksYn0sZ2V0IHNoYWRvd1Jvb3QoKXtyZXR1cm4gay5nZXQodGhpcyl8fG51bGx9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5zZXRBdHRyaWJ1dGUoYSxiKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxtYXRjaGVzOmZ1bmN0aW9uKGEpe3JldHVybiBtLmNhbGwodGhpcy5pbXBsLGEpfX0pLGwucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QmJihiLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PWIucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QpLGgoYi5wcm90b3R5cGUsYyksaChiLnByb3RvdHlwZSxkKSxoKGIucHJvdG90eXBlLGYpLGgoYi5wcm90b3R5cGUsZyksaShsLGIpLGEud3JhcHBlcnMuRWxlbWVudD1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYSl7Y2FzZSImIjpyZXR1cm4iJmFtcDsiO2Nhc2UiPCI6cmV0dXJuIiZsdDsiO2Nhc2UnIic6cmV0dXJuIiZxdW90OyJ9fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucmVwbGFjZShwLGIpfWZ1bmN0aW9uIGQoYSl7c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgTm9kZS5FTEVNRU5UX05PREU6Zm9yKHZhciBiLGQ9YS50YWdOYW1lLnRvTG93ZXJDYXNlKCksZj0iPCIrZCxnPWEuYXR0cmlidXRlcyxoPTA7Yj1nW2hdO2grKylmKz0iICIrYi5uYW1lKyc9IicrYyhiLnZhbHVlKSsnIic7cmV0dXJuIGYrPSI+IixxW2RdP2Y6ZitlKGEpKyI8LyIrZCsiPiI7Y2FzZSBOb2RlLlRFWFRfTk9ERTpyZXR1cm4gYyhhLm5vZGVWYWx1ZSk7Y2FzZSBOb2RlLkNPTU1FTlRfTk9ERTpyZXR1cm4iPCEtLSIrYyhhLm5vZGVWYWx1ZSkrIi0tPiI7ZGVmYXVsdDp0aHJvdyBjb25zb2xlLmVycm9yKGEpLG5ldyBFcnJvcigibm90IGltcGxlbWVudGVkIil9fWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPSIiLGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWIrPWQoYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIsYyl7dmFyIGQ9Y3x8ImRpdiI7YS50ZXh0Q29udGVudD0iIjt2YXIgZT1uKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KGQpKTtlLmlubmVySFRNTD1iO2Zvcih2YXIgZjtmPWUuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZChvKGYpKX1mdW5jdGlvbiBnKGEpe2ouY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGgoYil7ayhnLGIsZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdfSl9ZnVuY3Rpb24gaShiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZy5wcm90b3R5cGUsYix7dmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfXZhciBqPWEud3JhcHBlcnMuRWxlbWVudCxrPWEuZGVmaW5lR2V0dGVyLGw9YS5taXhpbixtPWEucmVnaXN0ZXJXcmFwcGVyLG49YS51bndyYXAsbz1hLndyYXAscD0vJnw8fCIvZyxxPXthcmVhOiEwLGJhc2U6ITAsYnI6ITAsY29sOiEwLGNvbW1hbmQ6ITAsZW1iZWQ6ITAsaHI6ITAsaW1nOiEwLGlucHV0OiEwLGtleWdlbjohMCxsaW5rOiEwLG1ldGE6ITAscGFyYW06ITAsc291cmNlOiEwLHRyYWNrOiEwLHdicjohMH0scj13aW5kb3cuSFRNTEVsZW1lbnQ7Zy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShqLnByb3RvdHlwZSksbChnLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBlKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2YodGhpcyxhLHRoaXMudGFnTmFtZSl9LGdldCBvdXRlckhUTUwoKXtyZXR1cm4gZCh0aGlzKX0sc2V0IG91dGVySFRNTChhKXtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXRocm93IG5ldyBFcnJvcigibm90IGltcGxlbWVudGVkIik7dGhpcy5pbXBsLm91dGVySFRNTD1hfX0pLFsiY2xpZW50SGVpZ2h0IiwiY2xpZW50TGVmdCIsImNsaWVudFRvcCIsImNsaWVudFdpZHRoIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFdpZHRoIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCIsInNjcm9sbFdpZHRoIl0uZm9yRWFjaChoKSxbImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdldENsaWVudFJlY3RzIiwic2Nyb2xsSW50b1ZpZXciXS5mb3JFYWNoKGkpLG0ocixnLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImIiKSksYS53cmFwcGVycy5IVE1MRWxlbWVudD1nLGEuZ2V0SW5uZXJIVE1MPWUsYS5zZXRJbm5lckhUTUw9Zn0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPXdpbmRvdy5IVE1MQ29udGVudEVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IHNlbGVjdCgpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgic2VsZWN0Iil9LHNldCBzZWxlY3QoYSl7dGhpcy5zZXRBdHRyaWJ1dGUoInNlbGVjdCIsYSl9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbihhLGIpe2MucHJvdG90eXBlLnNldEF0dHJpYnV0ZS5jYWxsKHRoaXMsYSxiKSwic2VsZWN0Ij09PVN0cmluZyhhKS50b0xvd2VyQ2FzZSgpJiZ0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcighMCl9fSksZiYmZShmLGIpLGEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpLHRoaXMub2xkZXJTaGFkb3dSb290Xz1udWxsfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj13aW5kb3cuSFRNTFNoYWRvd0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IG9sZGVyU2hhZG93Um9vdCgpe3JldHVybiB0aGlzLm9sZGVyU2hhZG93Um9vdF99LGludmFsaWRhdGVTaGFkb3dSZW5kZXJlcjpmdW5jdGlvbigpe2MucHJvdG90eXBlLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlci5jYWxsKHRoaXMsITApfX0pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhLmRlZmF1bHRWaWV3KXJldHVybiBhO3ZhciBiPWwuZ2V0KGEpO2lmKCFiKXtmb3IoYj1hLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yi5sYXN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5sYXN0Q2hpbGQpO2wuc2V0KGEsYil9cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGMsZD1iKGEub3duZXJEb2N1bWVudCksZT1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtjPWEuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChjKTtyZXR1cm4gZX1mdW5jdGlvbiBkKGEpe2UuY2FsbCh0aGlzLGEpfXZhciBlPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZj1hLmdldElubmVySFRNTCxnPWEubWl4aW4saD1hLnJlZ2lzdGVyV3JhcHBlcixpPWEuc2V0SW5uZXJIVE1MLGo9YS53cmFwLGs9bmV3IFNpZGVUYWJsZSxsPW5ldyBTaWRlVGFibGUsbT13aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudDtkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSxnKGQucHJvdG90eXBlLHtnZXQgY29udGVudCgpe2lmKG0pcmV0dXJuIGoodGhpcy5pbXBsLmNvbnRlbnQpO3ZhciBhPWsuZ2V0KHRoaXMpO3JldHVybiBhfHwoYT1jKHRoaXMpLGsuc2V0KHRoaXMsYSkpLGF9LGdldCBpbm5lckhUTUwoKXtyZXR1cm4gZih0aGlzLmNvbnRlbnQpfSxzZXQgaW5uZXJIVE1MKGEpe2kodGhpcy5jb250ZW50LGEpLHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9fSksbSYmaChtLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYS5sb2NhbE5hbWUpe2Nhc2UiY29udGVudCI6cmV0dXJuIG5ldyBjKGEpO2Nhc2Uic2hhZG93IjpyZXR1cm4gbmV3IGUoYSk7Y2FzZSJ0ZW1wbGF0ZSI6cmV0dXJuIG5ldyBmKGEpfWQuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsZj1hLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQ7YS5taXhpbjt2YXIgZz1hLnJlZ2lzdGVyV3JhcHBlcixoPXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZyhoLGIpLGEud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYz1hLlBhcmVudE5vZGVJbnRlcmZhY2UsZD1hLlNlbGVjdG9yc0ludGVyZmFjZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyT2JqZWN0LGc9Zihkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2UoZy5wcm90b3R5cGUsYyksZShnLnByb3RvdHlwZSxkKSxlKGcucHJvdG90eXBlLGIpO3ZhciBoPWYoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpKSxpPWYoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikpO2Eud3JhcHBlcnMuQ29tbWVudD1pLGEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudD1nLGEud3JhcHBlcnMuVGV4dD1ofSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXt2YXIgZD1pKGIuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Yy5jYWxsKHRoaXMsZCksZyhkLHRoaXMpO3ZhciBlPWIuc2hhZG93Um9vdDthLm5leHRPbGRlclNoYWRvd1RyZWVUYWJsZS5zZXQodGhpcyxlKSxqLnNldCh0aGlzLGIpfXZhciBjPWEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudCxkPWEuZWxlbWVudEZyb21Qb2ludCxlPWEuZ2V0SW5uZXJIVE1MLGY9YS5taXhpbixnPWEucmV3cmFwLGg9YS5zZXRJbm5lckhUTUwsaT1hLnVud3JhcCxqPW5ldyBTaWRlVGFibGU7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZihiLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBlKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2godGhpcyxhKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxpbnZhbGlkYXRlU2hhZG93UmVuZGVyZXI6ZnVuY3Rpb24oKXtyZXR1cm4gai5nZXQodGhpcykuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9LGVsZW1lbnRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZCh0aGlzLHRoaXMub3duZXJEb2N1bWVudCxhLGIpfSxnZXRFbGVtZW50QnlJZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKCIjIithKX19KSxhLndyYXBwZXJzLlNoYWRvd1Jvb3Q9YixhLmdldEhvc3RGb3JTaGFkb3dSb290PWZ1bmN0aW9uKGEpe3JldHVybiBqLmdldChhKX19KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2EucHJldmlvdXNTaWJsaW5nXz1hLnByZXZpb3VzU2libGluZyxhLm5leHRTaWJsaW5nXz1hLm5leHRTaWJsaW5nLGEucGFyZW50Tm9kZV89YS5wYXJlbnROb2RlfWZ1bmN0aW9uIGMoYSl7YS5maXJzdENoaWxkXz1hLmZpcnN0Q2hpbGQsYS5sYXN0Q2hpbGRfPWEubGFzdENoaWxkfWZ1bmN0aW9uIGQoYSl7RShhIGluc3RhbmNlb2YgRCk7Zm9yKHZhciBkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliKGQpO2MoYSl9ZnVuY3Rpb24gZShhKXt2YXIgYj1HKGEpO2QoYSksYi50ZXh0Q29udGVudD0iIn1mdW5jdGlvbiBmKGEsYyl7dmFyIGU9RyhhKSxmPUcoYyk7Zi5ub2RlVHlwZT09PUQuRE9DVU1FTlRfRlJBR01FTlRfTk9ERT9kKGMpOihoKGMpLGIoYykpLGEubGFzdENoaWxkXz1hLmxhc3RDaGlsZCxhLmxhc3RDaGlsZD09PWEuZmlyc3RDaGlsZCYmKGEuZmlyc3RDaGlsZF89YS5maXJzdENoaWxkKTt2YXIgZz1IKGUubGFzdENoaWxkKTtnJiYoZy5uZXh0U2libGluZ189Zy5uZXh0U2libGluZyksZS5hcHBlbmRDaGlsZChmKX1mdW5jdGlvbiBnKGEsYyl7dmFyIGQ9RyhhKSxlPUcoYyk7YihjKSxjLnByZXZpb3VzU2libGluZyYmKGMucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1jKSxjLm5leHRTaWJsaW5nJiYoYy5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPWMpLGEubGFzdENoaWxkPT09YyYmKGEubGFzdENoaWxkXz1jKSxhLmZpcnN0Q2hpbGQ9PT1jJiYoYS5maXJzdENoaWxkXz1jKSxkLnJlbW92ZUNoaWxkKGUpfWZ1bmN0aW9uIGgoYSl7dmFyIGI9RyhhKSxjPWIucGFyZW50Tm9kZTtjJiZnKEgoYyksYSl9ZnVuY3Rpb24gaShhLGIpe2soYikucHVzaChhKSxBKGEsYik7dmFyIGM9Si5nZXQoYSk7Y3x8Si5zZXQoYSxjPVtdKSxjLnB1c2goYil9ZnVuY3Rpb24gaihhKXtJLnNldChhLFtdKX1mdW5jdGlvbiBrKGEpe3JldHVybiBJLmdldChhKX1mdW5jdGlvbiBsKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYltjKytdPWQ7cmV0dXJuIGJ9ZnVuY3Rpb24gbShhLGIsYyl7Zm9yKHZhciBkPWwoYSksZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2lmKGIoZikpe2lmKGMoZik9PT0hMSlyZXR1cm59ZWxzZSBtKGYsYixjKX19ZnVuY3Rpb24gbihhLGIpe3ZhciBjPSExO3JldHVybiBtKGEsdSxmdW5jdGlvbihhKXtqKGEpO2Zvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdO3ZvaWQgMCE9PWUmJnAoZSxhKSYmKGkoZSxhKSxiW2RdPXZvaWQgMCxjPSEwKX19KSxjP2IuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDAhPT1hfSk6Yn1mdW5jdGlvbiBvKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXWluIGEpcmV0dXJuIGJbY119ZnVuY3Rpb24gcChhLGIpe3ZhciBjPWIuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKTtpZighYylyZXR1cm4hMDtpZihjPWMudHJpbSgpLCFjKXJldHVybiEwO2lmKGEubm9kZVR5cGUhPT1ELkVMRU1FTlRfTk9ERSlyZXR1cm4hMTtpZighTy50ZXN0KGMpKXJldHVybiExO2lmKCI6Ij09PWNbMF0mJiFQLnRlc3QoYykpcmV0dXJuITE7dHJ5e3JldHVybiBhLm1hdGNoZXMoYyl9Y2F0Y2goZCl7cmV0dXJuITF9fWZ1bmN0aW9uIHEoKXtGPW51bGwsUi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVuZGVyKCl9KSxSPVtdfWZ1bmN0aW9uIHIoYSl7dGhpcy5ob3N0PWEsdGhpcy5kaXJ0eT0hMSx0aGlzLmFzc29jaWF0ZU5vZGUoYSl9ZnVuY3Rpb24gcyhhKXt2YXIgYj1NLmdldChhKTtyZXR1cm4gYnx8KGI9bmV3IHIoYSksTS5zZXQoYSxiKSksYn1mdW5jdGlvbiB0KGEpe3JldHVybiJjb250ZW50Ij09PWEubG9jYWxOYW1lfWZ1bmN0aW9uIHUoYSl7cmV0dXJuImNvbnRlbnQiPT09YS5sb2NhbE5hbWV9ZnVuY3Rpb24gdihhKXtyZXR1cm4ic2hhZG93Ij09PWEubG9jYWxOYW1lfWZ1bmN0aW9uIHcoYSl7cmV0dXJuInNoYWRvdyI9PT1hLmxvY2FsTmFtZX1mdW5jdGlvbiB4KGEpe3JldHVybiEhYS5zaGFkb3dSb290fWZ1bmN0aW9uIHkoYSl7cmV0dXJuIEwuZ2V0KGEpfWZ1bmN0aW9uIHooYSl7Zm9yKHZhciBiPVtdLGM9YS5zaGFkb3dSb290O2M7Yz1MLmdldChjKSliLnB1c2goYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gQShhLGIpe0suc2V0KGEsYil9ZnVuY3Rpb24gQihhKXtuZXcgcihhKS5yZW5kZXIoKX12YXIgQz1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxEPWEud3JhcHBlcnMuTm9kZSxFPWEuYXNzZXJ0O2EubWl4aW47dmFyIEYsRz1hLnVud3JhcCxIPWEud3JhcCxJPW5ldyBTaWRlVGFibGUsSj1uZXcgU2lkZVRhYmxlLEs9bmV3IFNpZGVUYWJsZSxMPW5ldyBTaWRlVGFibGUsTT1uZXcgU2lkZVRhYmxlLE49bmV3IFNpZGVUYWJsZSxPPS9eWyouOiNbYS16QS1aX3xdLyxQPW5ldyBSZWdFeHAoIl46KCIrWyJsaW5rIiwidmlzaXRlZCIsInRhcmdldCIsImVuYWJsZWQiLCJkaXNhYmxlZCIsImNoZWNrZWQiLCJpbmRldGVybWluYXRlIiwibnRoLWNoaWxkIiwibnRoLWxhc3QtY2hpbGQiLCJudGgtb2YtdHlwZSIsIm50aC1sYXN0LW9mLXR5cGUiLCJmaXJzdC1jaGlsZCIsImxhc3QtY2hpbGQiLCJmaXJzdC1vZi10eXBlIiwibGFzdC1vZi10eXBlIiwib25seS1vZi10eXBlIl0uam9pbigifCIpKyIpIiksUT1vKHdpbmRvdyxbInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNldFRpbWVvdXQiXSksUj1bXTtyLnByb3RvdHlwZT17cmVuZGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXJ0eSl7dmFyIGE9dGhpcy5ob3N0O3RoaXMudHJlZUNvbXBvc2l0aW9uKCk7dmFyIGI9YS5zaGFkb3dSb290O2lmKGIpe3RoaXMucmVtb3ZlQWxsQ2hpbGROb2Rlcyh0aGlzLmhvc3QpO3ZhciBjPWwoYik7Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe3RoaXMucmVuZGVyTm9kZShhLGIsYywhMSl9LHRoaXMpLHRoaXMuZGlydHk9ITF9fX0saW52YWxpZGF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmRpcnR5KXtpZih0aGlzLmRpcnR5PSEwLFIucHVzaCh0aGlzKSxGKXJldHVybjtGPXdpbmRvd1tRXShxLDApfX0scmVuZGVyTm9kZTpmdW5jdGlvbihhLGIsYyxkKXtpZih4KGMpKXt0aGlzLmFwcGVuZENoaWxkKGEsYyk7dmFyIGU9cyhjKTtlLmRpcnR5PSEwLGUucmVuZGVyKCl9ZWxzZSB0KGMpP3RoaXMucmVuZGVySW5zZXJ0aW9uUG9pbnQoYSxiLGMsZCk6dihjKT90aGlzLnJlbmRlclNoYWRvd0luc2VydGlvblBvaW50KGEsYixjKTp0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsYyxkKX0scmVuZGVyQXNBbnlEb21UcmVlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuYXBwZW5kQ2hpbGQoYSxjKSx4KGMpKUIoYyk7ZWxzZXt2YXIgZT1jLGY9bChlKTtmLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5yZW5kZXJOb2RlKGUsYixhLGQpfSx0aGlzKX19LHJlbmRlckluc2VydGlvblBvaW50OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWsoYyk7ZS5sZW5ndGg/KHRoaXMucmVtb3ZlQWxsQ2hpbGROb2RlcyhjKSxlLmZvckVhY2goZnVuY3Rpb24oYyl7dChjKSYmZD90aGlzLnJlbmRlckluc2VydGlvblBvaW50KGEsYixjLGQpOnRoaXMucmVuZGVyQXNBbnlEb21UcmVlKGEsYixjLGQpfSx0aGlzKSk6dGhpcy5yZW5kZXJGYWxsYmFja0NvbnRlbnQoYSxjKSx0aGlzLnJlbW92ZShjKX0scmVuZGVyU2hhZG93SW5zZXJ0aW9uUG9pbnQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXkoYik7aWYoZCl7QShkLGMpLGMub2xkZXJTaGFkb3dSb290Xz1kLHRoaXMucmVtb3ZlKGMpO3ZhciBlPWwoZCk7ZS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3RoaXMucmVuZGVyTm9kZShhLGQsYiwhMCl9LHRoaXMpfWVsc2UgdGhpcy5yZW5kZXJGYWxsYmFja0NvbnRlbnQoYSxjKX0scmVuZGVyRmFsbGJhY2tDb250ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9bChiKTtjLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5hcHBlbmRDaGlsZChhLGIpfSx0aGlzKX0sdHJlZUNvbXBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5ob3N0LGI9YS5zaGFkb3dSb290LGM9W10sZD1sKGEpO2QuZm9yRWFjaChmdW5jdGlvbihhKXtpZih0KGEpKXt2YXIgYj1rKGEpO2ImJmIubGVuZ3RofHwoYj1sKGEpKSxjLnB1c2guYXBwbHkoYyxiKX1lbHNlIGMucHVzaChhKX0pO2Zvcih2YXIgZSxmO2I7KXtpZihlPXZvaWQgMCxtKGIsdyxmdW5jdGlvbihhKXtyZXR1cm4gZT1hLCExfSksZj1lLGM9bihiLGMpLGYpe3ZhciBnPXkoYik7aWYoZyl7Yj1nLEEoYixmKTtjb250aW51ZX1icmVha31icmVha319LGFwcGVuZENoaWxkOmZ1bmN0aW9uKGEsYil7ZihhLGIpLHRoaXMuYXNzb2NpYXRlTm9kZShiKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2goYSksdGhpcy5hc3NvY2lhdGVOb2RlKGEpfSxyZW1vdmVBbGxDaGlsZE5vZGVzOmZ1bmN0aW9uKGEpe2UoYSl9LGFzc29jaWF0ZU5vZGU6ZnVuY3Rpb24oYSl7Ti5zZXQoYSx0aGlzKX19LEQucHJvdG90eXBlLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcj1mdW5jdGlvbihhKXt2YXIgYj1OLmdldCh0aGlzKTtpZighYilyZXR1cm4hMTt2YXIgYztyZXR1cm4oYXx8dGhpcy5zaGFkb3dSb290fHwoYz10aGlzLnBhcmVudE5vZGUpJiYoYy5zaGFkb3dSb290fHxjIGluc3RhbmNlb2YgU2hhZG93Um9vdCkpJiZiLmludmFsaWRhdGUoKSwhMH0sQy5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1mdW5jdGlvbigpe3JldHVybiBxKCksayh0aGlzKX0sYS5ldmVudFBhcmVudHNUYWJsZT1KLGEuZ2V0UmVuZGVyZXJGb3JIb3N0PXMsYS5nZXRTaGFkb3dUcmVlcz16LGEubmV4dE9sZGVyU2hhZG93VHJlZVRhYmxlPUwsYS5yZW5kZXJBbGxQZW5kaW5nPXEsYS5pbnNlcnRpb25QYXJlbnRUYWJsZT1LLGEudmlzdWFsPXtyZW1vdmVBbGxDaGlsZE5vZGVzOmUsYXBwZW5kQ2hpbGQ6ZixyZW1vdmVDaGlsZDpnfX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ai5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1kb2N1bWVudFthXTtiLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiB0KGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7YS5zaGFkb3dSb290JiZiLmFkb3B0Tm9kZShhLnNoYWRvd1Jvb3QpLGEgaW5zdGFuY2VvZiBtJiZlKGEsYik7Zm9yKHZhciBjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZylkKGMsYil9ZnVuY3Rpb24gZShiLGMpe3ZhciBkPWEubmV4dE9sZGVyU2hhZG93VHJlZVRhYmxlLmdldChiKTtkJiZjLmFkb3B0Tm9kZShkKX1mdW5jdGlvbiBmKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGcoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiB0KGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBoKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19dmFyIGk9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGo9YS53cmFwcGVycy5Ob2RlLGs9YS5QYXJlbnROb2RlSW50ZXJmYWNlLGw9YS5TZWxlY3RvcnNJbnRlcmZhY2UsbT1hLndyYXBwZXJzLlNoYWRvd1Jvb3Qsbj1hLmRlZmluZVdyYXBHZXR0ZXIsbz1hLmVsZW1lbnRGcm9tUG9pbnQscD1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLHE9YS5taXhpbixyPWEucmVnaXN0ZXJXcmFwcGVyLHM9YS51bndyYXAsdD1hLndyYXAsdT1hLndyYXBFdmVudFRhcmdldE1ldGhvZHM7YS53cmFwTm9kZUxpc3Q7dmFyIHY9bmV3IFNpZGVUYWJsZTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGoucHJvdG90eXBlKSxuKGIsImRvY3VtZW50RWxlbWVudCIpLG4oYiwiYm9keSIpLG4oYiwiaGVhZCIpLFsiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlVGV4dE5vZGUiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIl0uZm9yRWFjaChjKTt2YXIgdz1kb2N1bWVudC5hZG9wdE5vZGUseD1kb2N1bWVudC53cml0ZTtxKGIucHJvdG90eXBlLHthZG9wdE5vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpLHcuY2FsbCh0aGlzLmltcGwscyhhKSksZChhLHRoaXMpLGF9LGVsZW1lbnRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbyh0aGlzLHRoaXMsYSxiKX0sd3JpdGU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucXVlcnlTZWxlY3RvckFsbCgiKiIpLGM9YltiLmxlbmd0aC0xXTtjLm5leHRTaWJsaW5nOyljPWMubmV4dFNpYmxpbmc7dmFyIGQ9Yy5wYXJlbnROb2RlO2QubGFzdENoaWxkXz12b2lkIDAsYy5uZXh0U2libGluZ189dm9pZCAwLHguY2FsbCh0aGlzLmltcGwsYSl9fSkscChbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudF0sWyJhcHBlbmRDaGlsZCIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyIsImluc2VydEJlZm9yZSIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlQ2hpbGQiLCJyZXBsYWNlQ2hpbGQiXSkscChbd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50XSxbImFkb3B0Tm9kZSIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlVGV4dE5vZGUiLCJlbGVtZW50RnJvbVBvaW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ3cml0ZSJdKSxxKGIucHJvdG90eXBlLGkpLHEoYi5wcm90b3R5cGUsaykscShiLnByb3RvdHlwZSxsKSxxKGIucHJvdG90eXBlLHtnZXQgaW1wbGVtZW50YXRpb24oKXt2YXIgYT12LmdldCh0aGlzKTtyZXR1cm4gYT9hOihhPW5ldyBmKHModGhpcykuaW1wbGVtZW50YXRpb24pLHYuc2V0KHRoaXMsYSksYSl9fSkscih3aW5kb3cuRG9jdW1lbnQsYixkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpKSx3aW5kb3cuSFRNTERvY3VtZW50JiZyKHdpbmRvdy5IVE1MRG9jdW1lbnQsYiksdShbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudF0pLGcoZiwiY3JlYXRlRG9jdW1lbnRUeXBlIiksZyhmLCJjcmVhdGVEb2N1bWVudCIpLGcoZiwiY3JlYXRlSFRNTERvY3VtZW50IiksaChmLCJoYXNGZWF0dXJlIikscih3aW5kb3cuRE9NSW1wbGVtZW50YXRpb24sZikscChbd2luZG93LkRPTUltcGxlbWVudGF0aW9uXSxbImNyZWF0ZURvY3VtZW50VHlwZSIsImNyZWF0ZURvY3VtZW50IiwiY3JlYXRlSFRNTERvY3VtZW50IiwiaGFzRmVhdHVyZSJdKSxhLndyYXBwZXJzLkRvY3VtZW50PWIsYS53cmFwcGVycy5ET01JbXBsZW1lbnRhdGlvbj1mCn0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5FdmVudFRhcmdldCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS51bndyYXBJZk5lZWRlZCxoPWEud3JhcCxpPXdpbmRvdy5XaW5kb3c7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSk7dmFyIGo9d2luZG93LmdldENvbXB1dGVkU3R5bGU7aS5wcm90b3R5cGUuZ2V0Q29tcHV0ZWRTdHlsZT1mdW5jdGlvbihhLGIpe3JldHVybiBqLmNhbGwodGhpc3x8d2luZG93LGcoYSksYil9LFsiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50Il0uZm9yRWFjaChmdW5jdGlvbihhKXtpLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3ZhciBiPWgodGhpc3x8d2luZG93KTtyZXR1cm4gYlthXS5hcHBseShiLGFyZ3VtZW50cyl9fSksZChiLnByb3RvdHlwZSx7Z2V0Q29tcHV0ZWRTdHlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBqLmNhbGwoZih0aGlzKSxnKGEpLGIpfX0pLGUoaSxiKSxhLndyYXBwZXJzLldpbmRvdz1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBjKGEpe3JldHVybiBuZXcgYihhKX1mdW5jdGlvbiBkKGEpe3JldHVybiBhLm1hcChjKX1mdW5jdGlvbiBlKGEpe3ZhciBiPXRoaXM7dGhpcy5pbXBsPW5ldyBrKGZ1bmN0aW9uKGMpe2EuY2FsbChiLGQoYyksYil9KX12YXIgZj1hLmRlZmluZUdldHRlcixnPWEuZGVmaW5lV3JhcEdldHRlcixoPWEucmVnaXN0ZXJXcmFwcGVyLGk9YS51bndyYXBJZk5lZWRlZCxqPWEud3JhcE5vZGVMaXN0O2Eud3JhcHBlcnM7dmFyIGs9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO2lmKGspe3ZhciBsPXdpbmRvdy5NdXRhdGlvblJlY29yZDtiLnByb3RvdHlwZT17Z2V0IGFkZGVkTm9kZXMoKXtyZXR1cm4gaih0aGlzLmltcGwuYWRkZWROb2Rlcyl9LGdldCByZW1vdmVkTm9kZXMoKXtyZXR1cm4gaih0aGlzLmltcGwucmVtb3ZlZE5vZGVzKX19LFsidGFyZ2V0IiwicHJldmlvdXNTaWJsaW5nIiwibmV4dFNpYmxpbmciXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2coYixhKX0pLFsidHlwZSIsImF0dHJpYnV0ZU5hbWUiLCJhdHRyaWJ1dGVOYW1lc3BhY2UiLCJvbGRWYWx1ZSJdLmZvckVhY2goZnVuY3Rpb24oYSl7ZihiLGEsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdfSl9KSxsJiZoKGwsYiksd2luZG93Lk5vZGUsZS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwub2JzZXJ2ZShpKGEpLGIpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5pbXBsLmRpc2Nvbm5lY3QoKX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLmltcGwudGFrZVJlY29yZHMoKSl9fSxhLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9ZSxhLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPWJ9fSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt2YXIgYj1jW2FdLGQ9d2luZG93W2JdO2lmKGQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSksZj1lLmNvbnN0cnVjdG9yO3dpbmRvd1tiXT1mfX1hLmlzV3JhcHBlckZvcjt2YXIgYz17YToiSFRNTEFuY2hvckVsZW1lbnQiLGFwcGxldDoiSFRNTEFwcGxldEVsZW1lbnQiLGFyZWE6IkhUTUxBcmVhRWxlbWVudCIsYXVkaW86IkhUTUxBdWRpb0VsZW1lbnQiLGJyOiJIVE1MQlJFbGVtZW50IixiYXNlOiJIVE1MQmFzZUVsZW1lbnQiLGJvZHk6IkhUTUxCb2R5RWxlbWVudCIsYnV0dG9uOiJIVE1MQnV0dG9uRWxlbWVudCIsY2FudmFzOiJIVE1MQ2FudmFzRWxlbWVudCIsZGw6IkhUTUxETGlzdEVsZW1lbnQiLGRhdGFsaXN0OiJIVE1MRGF0YUxpc3RFbGVtZW50IixkaXI6IkhUTUxEaXJlY3RvcnlFbGVtZW50IixkaXY6IkhUTUxEaXZFbGVtZW50IixlbWJlZDoiSFRNTEVtYmVkRWxlbWVudCIsZmllbGRzZXQ6IkhUTUxGaWVsZFNldEVsZW1lbnQiLGZvbnQ6IkhUTUxGb250RWxlbWVudCIsZm9ybToiSFRNTEZvcm1FbGVtZW50IixmcmFtZToiSFRNTEZyYW1lRWxlbWVudCIsZnJhbWVzZXQ6IkhUTUxGcmFtZVNldEVsZW1lbnQiLGhyOiJIVE1MSFJFbGVtZW50IixoZWFkOiJIVE1MSGVhZEVsZW1lbnQiLGgxOiJIVE1MSGVhZGluZ0VsZW1lbnQiLGh0bWw6IkhUTUxIdG1sRWxlbWVudCIsaWZyYW1lOiJIVE1MSUZyYW1lRWxlbWVudCIsaW5wdXQ6IkhUTUxJbnB1dEVsZW1lbnQiLGxpOiJIVE1MTElFbGVtZW50IixsYWJlbDoiSFRNTExhYmVsRWxlbWVudCIsbGVnZW5kOiJIVE1MTGVnZW5kRWxlbWVudCIsbGluazoiSFRNTExpbmtFbGVtZW50IixtYXA6IkhUTUxNYXBFbGVtZW50IixtZW51OiJIVE1MTWVudUVsZW1lbnQiLG1lbnVpdGVtOiJIVE1MTWVudUl0ZW1FbGVtZW50IixtZXRhOiJIVE1MTWV0YUVsZW1lbnQiLG1ldGVyOiJIVE1MTWV0ZXJFbGVtZW50IixkZWw6IkhUTUxNb2RFbGVtZW50IixvbDoiSFRNTE9MaXN0RWxlbWVudCIsb2JqZWN0OiJIVE1MT2JqZWN0RWxlbWVudCIsb3B0Z3JvdXA6IkhUTUxPcHRHcm91cEVsZW1lbnQiLG9wdGlvbjoiSFRNTE9wdGlvbkVsZW1lbnQiLG91dHB1dDoiSFRNTE91dHB1dEVsZW1lbnQiLHA6IkhUTUxQYXJhZ3JhcGhFbGVtZW50IixwYXJhbToiSFRNTFBhcmFtRWxlbWVudCIscHJlOiJIVE1MUHJlRWxlbWVudCIscHJvZ3Jlc3M6IkhUTUxQcm9ncmVzc0VsZW1lbnQiLHE6IkhUTUxRdW90ZUVsZW1lbnQiLHNjcmlwdDoiSFRNTFNjcmlwdEVsZW1lbnQiLHNlbGVjdDoiSFRNTFNlbGVjdEVsZW1lbnQiLHNvdXJjZToiSFRNTFNvdXJjZUVsZW1lbnQiLHNwYW46IkhUTUxTcGFuRWxlbWVudCIsc3R5bGU6IkhUTUxTdHlsZUVsZW1lbnQiLGNhcHRpb246IkhUTUxUYWJsZUNhcHRpb25FbGVtZW50Iixjb2w6IkhUTUxUYWJsZUNvbEVsZW1lbnQiLHRhYmxlOiJIVE1MVGFibGVFbGVtZW50Iix0cjoiSFRNTFRhYmxlUm93RWxlbWVudCIsdGhlYWQ6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0Ym9keToiSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQiLHRleHRhcmVhOiJIVE1MVGV4dEFyZWFFbGVtZW50Iix0aXRsZToiSFRNTFRpdGxlRWxlbWVudCIsdWw6IkhUTUxVTGlzdEVsZW1lbnQiLHZpZGVvOiJIVE1MVmlkZW9FbGVtZW50In07T2JqZWN0LmtleXMoYykuZm9yRWFjaChiKSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhLndyYXBwZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3dpbmRvd1tiXT1hLndyYXBwZXJzW2JdfSksYS5rbm93bkVsZW1lbnRzPWN9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKCl7d2luZG93LndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW1wbD9hOlNoYWRvd0RPTVBvbHlmaWxsLndyYXAoYSl9LHdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW1wbD9TaGFkb3dET01Qb2x5ZmlsbC51bndyYXAoYSk6YX07dmFyIGE9d2luZG93LmdldENvbXB1dGVkU3R5bGU7d2luZG93LmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKHdpbmRvdyx3cmFwKGIpLGMpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhIVE1MRWxlbWVudC5wcm90b3R5cGUse3dlYmtpdFNoYWRvd1Jvb3Q6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoYWRvd1Jvb3R9fX0pLEhUTUxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PUhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz0iIjtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2MrPWEudGV4dENvbnRlbnQrIlxuXG4ifSksYnx8KGM9Yy5yZXBsYWNlKG0sIiIpKSxjfWZ1bmN0aW9uIGMoYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtiLnRleHRDb250ZW50PWEsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChiKTt2YXIgYz1iLnNoZWV0LmNzc1J1bGVzO3JldHVybiBiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksY31mdW5jdGlvbiBkKGEpe2Zvcih2YXIgYj0wLGM9W107YjxhLmxlbmd0aDtiKyspYy5wdXNoKGFbYl0uY3NzVGV4dCk7cmV0dXJuIGMuam9pbigiXG5cbiIpfWZ1bmN0aW9uIGUoYSl7YSYmZigpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpKX1mdW5jdGlvbiBmKCl7cmV0dXJuIGd8fChnPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksZy5zZXRBdHRyaWJ1dGUoIlNoYWRvd0NTU1NoaW0iLCIiKSksZ312YXIgZyxoPXtzdHJpY3RTdHlsaW5nOiExLHJlZ2lzdHJ5Ont9LHNoaW1TdHlsaW5nOmZ1bmN0aW9uKGEsYixjKXtpZihhKXt2YXIgZD10aGlzLnJlZ2lzdGVyRGVmaW5pdGlvbihhLGIsYyk7dGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYSxiKSx0aGlzLnNoaW1Qb2x5ZmlsbERpcmVjdGl2ZXMoZC5yb290U3R5bGVzLGIpLHRoaXMuYXBwbHlTaGltbWluZyhkLnNjb3BlU3R5bGVzLGIpfX0sc2hpbVNoYWRvd0RPTVN0eWxpbmc6ZnVuY3Rpb24oYSxiKXt0aGlzLnNoaW1Qb2x5ZmlsbERpcmVjdGl2ZXMoYSxiKSx0aGlzLmFwcGx5U2hpbW1pbmcoYSxiKX0scmVnaXN0ZXJEZWZpbml0aW9uOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlZ2lzdHJ5W2JdPXtyb290OmEsbmFtZTpiLGV4dGVuZHNOYW1lOmN9LGU9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO2U9ZT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLDApOltdLGQucm9vdFN0eWxlcz1lLGQuc2NvcGVTdHlsZXM9ZC5yb290U3R5bGVzO3ZhciBmPXRoaXMucmVnaXN0cnlbZC5leHRlbmRzTmFtZV07cmV0dXJuIGYmJihkLnNjb3BlU3R5bGVzPWQuc2NvcGVTdHlsZXMuY29uY2F0KGYuc2NvcGVTdHlsZXMpKSxkfSxhcHBseVNjb3BlVG9Db250ZW50OmZ1bmN0aW9uKGEsYil7YSYmKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYS5xdWVyeVNlbGVjdG9yQWxsKCIqIiksZnVuY3Rpb24oYSl7YS5zZXRBdHRyaWJ1dGUoYiwiIil9KSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKSxmdW5jdGlvbihhKXt0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYS5jb250ZW50LGIpfSx0aGlzKSl9LHNoaW1Qb2x5ZmlsbERpcmVjdGl2ZXM6ZnVuY3Rpb24oYSxiKXthJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD10aGlzLmNvbnZlcnRQb2x5ZmlsbERpcmVjdGl2ZXMoYS50ZXh0Q29udGVudCxiKX0sdGhpcyl9LGNvbnZlcnRQb2x5ZmlsbERpcmVjdGl2ZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPSIiLGY9MDtjPW4uZXhlYyhhKTspZSs9YS5zdWJzdHJpbmcoZixjLmluZGV4KSxkPWNbMV0uc2xpY2UoMCwtMikucmVwbGFjZShxLGIpLGUrPXRoaXMuc2NvcGVTZWxlY3RvcihkLGIpKyJ7IixmPW4ubGFzdEluZGV4O3JldHVybiBlKz1hLnN1YnN0cmluZyhmLGEubGVuZ3RoKX0sYXBwbHlTaGltbWluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2hpbUF0SG9zdChhLGIpO2MrPXRoaXMuc2hpbVNjb3BpbmcoYSxiKSxlKGMpfSxzaGltQXRIb3N0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/dGhpcy5jb252ZXJ0QXRIb3N0U3R5bGVzKGEsYik6dm9pZCAwfSxjb252ZXJ0QXRIb3N0U3R5bGVzOmZ1bmN0aW9uKGEsZSl7Zm9yKHZhciBmLGc9YihhKSxoPSIiLGo9MDtmPWkuZXhlYyhnKTspaCs9Zy5zdWJzdHJpbmcoaixmLmluZGV4KSxoKz10aGlzLnNjb3BlSG9zdENzcyhmWzFdLGUpLGo9aS5sYXN0SW5kZXg7aCs9Zy5zdWJzdHJpbmcoaixnLmxlbmd0aCk7dmFyIGs9bmV3IFJlZ0V4cCgiXiIrZStwLCJtIiksZz1kKHRoaXMuZmluZEF0SG9zdFJ1bGVzKGMoaCksaykpO3JldHVybiBnfSxzY29wZUhvc3RDc3M6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0iIjtjPWouZXhlYyhhKTspZCs9dGhpcy5zY29wZUhvc3RTZWxlY3RvcihjWzFdLGIpKyIgIitjWzJdKyJcbgkiO3JldHVybiBkfSxzY29wZUhvc3RTZWxlY3RvcjpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9YS5zcGxpdCgiLCIpLGU9Iltpcz0iK2IrIl0iO3JldHVybiBkLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnRyaW0oKSxhLm1hdGNoKGspP2E9YS5yZXBsYWNlKGssYisiJDEkMywgIitlKyIkMSQzIik6YS5tYXRjaChsKSYmKGE9YithKyIsICIrZSthKSxjLnB1c2goYSl9LHRoaXMpLGMuam9pbigiLCAiKX0sZmluZEF0SG9zdFJ1bGVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChhLHRoaXMuaXNIb3N0UnVsZS5iaW5kKHRoaXMsYikpfSxpc0hvc3RSdWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuc2VsZWN0b3JUZXh0JiZiLnNlbGVjdG9yVGV4dC5tYXRjaChhKXx8Yi5jc3NSdWxlcyYmdGhpcy5maW5kQXRIb3N0UnVsZXMoYi5jc3NSdWxlcyxhKS5sZW5ndGh8fGIudHlwZT09Q1NTUnVsZS5XRUJLSVRfS0VZRlJBTUVTX1JVTEV9LHNoaW1TY29waW5nOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/dGhpcy5jb252ZXJ0U2NvcGVkU3R5bGVzKGEsYik6dm9pZCAwfSxjb252ZXJ0U2NvcGVkU3R5bGVzOmZ1bmN0aW9uKGEsZCl7QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSk7dmFyIGU9YihhKS5yZXBsYWNlKGksIiIpO2U9dGhpcy5jb252ZXJ0UHNldWRvcyhlKTt2YXIgZj1jKGUpO3JldHVybiBlPXRoaXMuc2NvcGVSdWxlcyhmLGQpfSxjb252ZXJ0UHNldWRvczpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKG8sIiBbcHNldWRvPSQxXSIpfSxzY29wZVJ1bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9IiI7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXthLnNlbGVjdG9yVGV4dCYmYS5zdHlsZSYmYS5zdHlsZS5jc3NUZXh0PyhjKz10aGlzLnNjb3BlU2VsZWN0b3IoYS5zZWxlY3RvclRleHQsYix0aGlzLnN0cmljdFN0eWxpbmcpKyIge1xuCSIsYys9dGhpcy5wcm9wZXJ0aWVzRnJvbVJ1bGUoYSkrIlxufVxuXG4iKTphLm1lZGlhPyhjKz0iQG1lZGlhICIrYS5tZWRpYS5tZWRpYVRleHQrIiB7XG4iLGMrPXRoaXMuc2NvcGVSdWxlcyhhLmNzc1J1bGVzLGIpLGMrPSJcbn1cblxuIik6YS5jc3NUZXh0JiYoYys9YS5jc3NUZXh0KyJcblxuIil9LHRoaXMpLGN9LHNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9YS5zcGxpdCgiLCIpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnRyaW0oKSx0aGlzLnNlbGVjdG9yTmVlZHNTY29waW5nKGEsYikmJihhPWM/dGhpcy5hcHBseVN0cmljdFNlbGVjdG9yU2NvcGUoYSxiKTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGIpKSxkLnB1c2goYSl9LHRoaXMpLGQuam9pbigiLCAiKX0sc2VsZWN0b3JOZWVkc1Njb3Bpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz0iKCIrYisifFxcW2lzPSIrYisiXFxdKSIsZD1uZXcgUmVnRXhwKCJeIitjK3AsIm0iKTtyZXR1cm4hYS5tYXRjaChkKX0sYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIrIiAiK2ErIiwgIisiW2lzPSIrYisiXSAiK2F9LGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3ZhciBjPVsiICIsIj4iLCIrIiwifiJdLGQ9YSxlPSJbIitiKyJdIjtyZXR1cm4gYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWQuc3BsaXQoYSk7ZD1iLm1hcChmdW5jdGlvbihhKXt2YXIgYj1hLnRyaW0oKTtyZXR1cm4gYiYmYy5pbmRleE9mKGIpPDAmJmIuaW5kZXhPZihlKTwwJiYoYT1iLnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sIiQxIitlKyIkMiQzIikpLGF9KS5qb2luKGEpfSksZH0scHJvcGVydGllc0Zyb21SdWxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc3R5bGUuY3NzVGV4dDtyZXR1cm4gYS5zdHlsZS5jb250ZW50JiYhYS5zdHlsZS5jb250ZW50Lm1hdGNoKC9bJyJdKy8pJiYoYj0iY29udGVudDogJyIrYS5zdHlsZS5jb250ZW50KyInO1xuIithLnN0eWxlLmNzc1RleHQucmVwbGFjZSgvY29udGVudDpbXjtdKjsvZywiIikpLGJ9fSxpPS9AaG9zdFtee10qeygoW159XSo/e1tee10qP31bXHNcU10qPykrKX0vZ2ltLGo9LyhbXntdKikoe1tcc1xTXSo/fSkvZ2ltLGs9LyguKikoKD86XCopfCg/Olw6c2NvcGUpKSguKikvLGw9L15bLlxbOl0vLG09L1wvXCpbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLy9naW0sbj0vXC9cKlxzKkBwb2x5ZmlsbCAoW14qXSpcKisoW14vKl1bXipdKlwqKykqXC8pKFtee10qPyl7L2dpbSxvPS86Oih4LVteXHN7LChdKikvZ2ltLHA9IihbPlxcc34rWy4sezpdW1xcc1xcU10qKT8kIixxPS9AaG9zdC9naW07aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXtlKCJzdHlsZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxuIik7dmFyIHI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO3IuaW5zZXJ0QmVmb3JlKGYoKSxyLmNoaWxkTm9kZXNbMF0pfWEuU2hhZG93Q1NTPWh9KHdpbmRvdy5QbGF0Zm9ybSl9ZWxzZXt2YXIgU2lkZVRhYmxlOyJ1bmRlZmluZWQiIT10eXBlb2YgV2Vha01hcCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94LyIpPDA/U2lkZVRhYmxlPVdlYWtNYXA6ZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1PYmplY3QuaGFzT3duUHJvcGVydHksYz0obmV3IERhdGUpLmdldFRpbWUoKSUxZTk7U2lkZVRhYmxlPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYysrICsiX18iKX0sU2lkZVRhYmxlLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7YShiLHRoaXMubmFtZSx7dmFsdWU6Yyx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGIuY2FsbChhLHRoaXMubmFtZSk/YVt0aGlzLm5hbWVdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX19KCksZnVuY3Rpb24oKXt3aW5kb3cudGVtcGxhdGVDb250ZW50PXdpbmRvdy50ZW1wbGF0ZUNvbnRlbnR8fGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnR9LHdpbmRvdy53cmFwPXdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEhUTUxFbGVtZW50LnByb3RvdHlwZSx7c2hhZG93Um9vdDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Via2l0U2hhZG93Um9vdH19LGNyZWF0ZVNoYWRvd1Jvb3Q6e3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Via2l0Q3JlYXRlU2hhZG93Um9vdCgpfX19KSx3aW5kb3cudGVtcGxhdGVDb250ZW50PWZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYSksIWEuY29udGVudCYmIWEuX2NvbnRlbnQpe2Zvcih2YXIgYj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5maXJzdENoaWxkOyliLmFwcGVuZENoaWxkKGEuZmlyc3RDaGlsZCk7YS5fY29udGVudD1ifXJldHVybiBhLmNvbnRlbnR8fGEuX2NvbnRlbnR9fSgpfWlmKGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zm9yKHZhciBiPWF8fHt9LGQ9MTtkPGFyZ3VtZW50cy5sZW5ndGg7ZCsrKXt2YXIgZT1hcmd1bWVudHNbZF07dHJ5e2Zvcih2YXIgZiBpbiBlKWMoZixlLGIpfWNhdGNoKGcpe319cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGU9ZChiLGEpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGEsZSl9ZnVuY3Rpb24gZChhLGIpe2lmKGEpe3ZhciBjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKTtyZXR1cm4gY3x8ZChPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYil9fUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7cmV0dXJuIGQucHVzaC5hcHBseShkLGFyZ3VtZW50cyksYi5hcHBseShhLGQpfX0pLGEubWl4aW49Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIsYyl7dmFyIGQ9InN0cmluZyI9PXR5cGVvZiBhP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk6YS5jbG9uZU5vZGUoITApO2lmKGQuaW5uZXJIVE1MPWIsYylmb3IodmFyIGUgaW4gYylkLnNldEF0dHJpYnV0ZShlLGNbZV0pO3JldHVybiBkfXZhciBjPURPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkLGQ9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWMuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylkLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGIpezE9PWFyZ3VtZW50cy5sZW5ndGgmJihiPSF0aGlzLmNvbnRhaW5zKGEpKSxiP3RoaXMuYWRkKGEpOnRoaXMucmVtb3ZlKGEpfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnN3aXRjaD1mdW5jdGlvbihhLGIpe2EmJnRoaXMucmVtb3ZlKGEpLGImJnRoaXMuYWRkKGIpfTt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzKX0sZj13aW5kb3cuTmFtZWROb2RlTWFwfHx3aW5kb3cuTW96TmFtZWRBdHRyTWFwfHx7fTtOb2RlTGlzdC5wcm90b3R5cGUuYXJyYXk9ZSxmLnByb3RvdHlwZS5hcnJheT1lLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5hcnJheT1lO3ZhciBnPWZ1bmN0aW9uKGEsYil7ZS5jYWxsKHRoaXMpLmZvckVhY2goYSxiKX07aWYoTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2g9ZyxmLnByb3RvdHlwZS5mb3JFYWNoPWcsSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmZvckVhY2g9Zywhd2luZG93LnBlcmZvcm1hbmNlKXt2YXIgaD1EYXRlLm5vdygpO3dpbmRvdy5wZXJmb3JtYW5jZT17bm93OmZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCktaH19fXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7dmFyIGE9d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTtyZXR1cm4gYT9mdW5jdGlvbihiKXtyZXR1cm4gYShmdW5jdGlvbigpe2IocGVyZm9ybWFuY2Uubm93KCkpfSl9OmZ1bmN0aW9uKGEpe3JldHVybiB3aW5kb3cuc2V0VGltZW91dChhLDFlMy82MCl9fSgpKSx3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGEpe2NsZWFyVGltZW91dChhKX19KCkpLGEuY3JlYXRlRE9NPWJ9KHdpbmRvdy5QbGF0Zm9ybSksd2luZG93LnRlbXBsYXRlQ29udGVudD13aW5kb3cudGVtcGxhdGVDb250ZW50fHxmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50fSxmdW5jdGlvbihhKXthPWF8fCh3aW5kb3cuSW5zcGVjdG9yPXt9KTt2YXIgYjt3aW5kb3cuc2luc3BlY3Q9ZnVuY3Rpb24oYSxkKXtifHwoYj13aW5kb3cub3BlbigiIiwiU2hhZG93RE9NIEluc3BlY3RvciIsbnVsbCwhMCksYi5kb2N1bWVudC53cml0ZShjKSxiLmFwaT17c2hhZG93aXplOnNoYWRvd2l6ZX0pLGYoYXx8d3JhcChkb2N1bWVudC5ib2R5KSxkKX07dmFyIGM9WyI8IURPQ1RZUEUgaHRtbD4iLCI8aHRtbD4iLCIgIDxoZWFkPiIsIiAgICA8dGl0bGU+U2hhZG93RE9NIEluc3BlY3RvcjwvdGl0bGU+IiwiICAgIDxzdHlsZT4iLCIgICAgICBib2R5IHsiLCIgICAgICB9IiwiICAgICAgcHJlIHsiLCcgICAgICAgIGZvbnQ6IDlwdCAiQ291cmllciBOZXciLCBtb25vc3BhY2U7JywiICAgICAgICBsaW5lLWhlaWdodDogMS41ZW07IiwiICAgICAgfSIsIiAgICAgIHRhZyB7IiwiICAgICAgICBjb2xvcjogcHVycGxlOyIsIiAgICAgIH0iLCIgICAgICB1bCB7IiwiICAgICAgICAgbWFyZ2luOiAwOyIsIiAgICAgICAgIHBhZGRpbmc6IDA7IiwiICAgICAgICAgbGlzdC1zdHlsZTogbm9uZTsiLCIgICAgICB9IiwiICAgICAgbGkgeyIsIiAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsiLCIgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFmMWYxOyIsIiAgICAgICAgIHBhZGRpbmc6IDRweCA2cHg7IiwiICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OyIsIiAgICAgICAgIG1hcmdpbi1yaWdodDogNHB4OyIsIiAgICAgIH0iLCIgICAgPC9zdHlsZT4iLCIgIDwvaGVhZD4iLCIgIDxib2R5PiIsJyAgICA8dWwgaWQ9ImNydW1icyI+JywiICAgIDwvdWw+IiwnICAgIDxkaXYgaWQ9InRyZWUiPjwvZGl2PicsIiAgPC9ib2R5PiIsIjwvaHRtbD4iXS5qb2luKCJcbiIpLGQ9W10sZT1mdW5jdGlvbigpe3ZhciBhPWIuZG9jdW1lbnQsYz1hLnF1ZXJ5U2VsZWN0b3IoIiNjcnVtYnMiKTtjLnRleHRDb250ZW50PSIiO2Zvcih2YXIgZSxnPTA7ZT1kW2ddO2crKyl7dmFyIGg9YS5jcmVhdGVFbGVtZW50KCJhIik7aC5ocmVmPSIjIixoLnRleHRDb250ZW50PWUubG9jYWxOYW1lLGguaWR4PWcsaC5vbmNsaWNrPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYjtkLmxlbmd0aD50aGlzLmlkeDspYj1kLnBvcCgpO2YoYi5zaGFkb3d8fGIsYiksYS5wcmV2ZW50RGVmYXVsdCgpfSxjLmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudCgibGkiKSkuYXBwZW5kQ2hpbGQoaCl9fSxmPWZ1bmN0aW9uKGEsYyl7dmFyIGY9Yi5kb2N1bWVudDtrPVtdO3ZhciBnPWN8fGE7ZC5wdXNoKGcpLGUoKSxmLmJvZHkucXVlcnlTZWxlY3RvcigiI3RyZWUiKS5pbm5lckhUTUw9IjxwcmU+IitqKGEsYS5jaGlsZE5vZGVzKSsiPC9wcmU+In0sZz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGg9e1NUWUxFOjEsU0NSSVBUOjEsIiNjb21tZW50IjoxLFRFTVBMQVRFOjF9LGk9ZnVuY3Rpb24oYSl7cmV0dXJuIGhbYS5ub2RlTmFtZV19LGo9ZnVuY3Rpb24oYSxiLGMpe2lmKGkoYSkpcmV0dXJuIiI7dmFyIGQ9Y3x8IiI7aWYoYS5sb2NhbE5hbWV8fDExPT1hLm5vZGVUeXBlKXt2YXIgZT1hLmxvY2FsTmFtZXx8InNoYWRvdy1yb290IixmPWQrbChhKTsiY29udGVudCI9PWUmJihiPWEuZ2V0RGlzdHJpYnV0ZWROb2RlcygpKSxmKz0iPGJyLz4iO3ZhciBoPWQrIiZuYnNwOyZuYnNwOyI7ZyhiLGZ1bmN0aW9uKGEpe2YrPWooYSxhLmNoaWxkTm9kZXMsaCl9KSxmKz1kLHticjoxfVtlXXx8KGYrPSI8dGFnPiZsdDsvIitlKyImZ3Q7PC90YWc+IixmKz0iPGJyLz4iKX1lbHNle3ZhciBrPWEudGV4dENvbnRlbnQudHJpbSgpO2Y9az9kKyciJytrKyciJysiPGJyLz4iOiIifXJldHVybiBmfSxrPVtdLGw9ZnVuY3Rpb24oYSl7dmFyIGI9Ijx0YWc+Jmx0OyIsYz1hLmxvY2FsTmFtZXx8InNoYWRvdy1yb290IjtyZXR1cm4gYS53ZWJraXRTaGFkb3dSb290fHxhLnNoYWRvd1Jvb3Q/KGIrPScgPGJ1dHRvbiBpZHg9Iicray5sZW5ndGgrJyIgb25jbGljaz0iYXBpLnNoYWRvd2l6ZS5jYWxsKHRoaXMpIj4nK2MrIjwvYnV0dG9uPiIsay5wdXNoKGEpKTpiKz1jfHwic2hhZG93LXJvb3QiLGEuYXR0cmlidXRlcyYmZyhhLmF0dHJpYnV0ZXMsZnVuY3Rpb24oYSl7Yis9IiAiK2EubmFtZSsoYS52YWx1ZT8nPSInK2EudmFsdWUrJyInOiIiKX0pLGIrPSImZ3Q7PC90YWc+In07c2hhZG93aXplPWZ1bmN0aW9uKCl7dmFyIGE9TnVtYmVyKHRoaXMuYXR0cmlidXRlcy5pZHgudmFsdWUpLGI9a1thXTtiP2YoYi53ZWJraXRTaGFkb3dSb290fHxiLnNoYWRvd1Jvb3QsYik6KGNvbnNvbGUubG9nKCJiYWQgc2hhZG93aXplIG5vZGUiKSxjb25zb2xlLmRpcih0aGlzKSl9LGEub3V0cHV0PWp9KHdpbmRvdy5JbnNwZWN0b3IpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKCl7ZnVuY3Rpb24gYShhKXsic3BsaWNlIj09PWFbMF0udHlwZSYmInNwbGljZSI9PT1hWzFdLnR5cGUmJihiPSEwKX1pZigiZnVuY3Rpb24iIT10eXBlb2YgT2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBBcnJheS5vYnNlcnZlKXJldHVybiExO3ZhciBiPSExLGM9WzBdO3JldHVybiBBcnJheS5vYnNlcnZlKGMsYSksY1sxXT0xLGMubGVuZ3RoPTAsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGJ9ZnVuY3Rpb24gYyhhKXtyZXR1cm4rYT09PWE+Pj4wfWZ1bmN0aW9uIGQoYSl7cmV0dXJuK2F9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYT09PU9iamVjdChhKX1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIGE9PT1iPzAhPT1hfHwxL2E9PT0xL2I6SyhhKSYmSyhiKT8hMDphIT09YSYmYiE9PWJ9ZnVuY3Rpb24gZyhhKXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGE/ITE6KGE9YS5yZXBsYWNlKC9ccy9nLCIiKSwiIj09YT8hMDoiLiI9PWFbMF0/ITE6Uy50ZXN0KGEpKX1mdW5jdGlvbiBoKGEpe3ZhciBiPVRbYV07aWYoYilyZXR1cm4gYjtpZihnKGEpKXt2YXIgYj1uZXcgaShhKTtyZXR1cm4gVFthXT1iLGJ9fWZ1bmN0aW9uIGkoYSl7cmV0dXJuIiI9PWEudHJpbSgpP3RoaXM6YyhhKT8odGhpcy5wdXNoKFN0cmluZyhhKSksdGhpcyk6KGEuc3BsaXQoL1wuLykuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhfSkuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnB1c2goYSl9LHRoaXMpLEgmJnRoaXMubGVuZ3RoJiYodGhpcy5nZXRWYWx1ZUZyb209dGhpcy5jb21waWxlZEdldFZhbHVlRnJvbUZuKCkpLHZvaWQgMCl9ZnVuY3Rpb24gaihhKXtmb3IodmFyIGI9MDtVPmImJmEuY2hlY2soKTspYS5yZXBvcnQoKSxiKyt9ZnVuY3Rpb24gayhhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBsKGEpe3JldHVybiBrKGEuYWRkZWQpJiZrKGEucmVtb3ZlZCkmJmsoYS5jaGFuZ2VkKX1mdW5jdGlvbiBtKGEsYil7dmFyIGM9e30sZD17fSxlPXt9O2Zvcih2YXIgZiBpbiBiKXt2YXIgZz1hW2ZdOyh2b2lkIDA9PT1nfHxnIT09YltmXSkmJihmIGluIGE/ZyE9PWJbZl0mJihlW2ZdPWcpOmRbZl09dm9pZCAwKX1mb3IodmFyIGYgaW4gYSlmIGluIGJ8fChjW2ZdPWFbZl0pO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiZhLmxlbmd0aCE9PWIubGVuZ3RoJiYoZS5sZW5ndGg9YS5sZW5ndGgpLHthZGRlZDpjLHJlbW92ZWQ6ZCxjaGFuZ2VkOmV9fWZ1bmN0aW9uIG4oYSxiKXt2YXIgYz1ifHwoQXJyYXkuaXNBcnJheShhKT9bXTp7fSk7Zm9yKHZhciBkIGluIGEpY1tkXT1hW2RdO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiYoYy5sZW5ndGg9YS5sZW5ndGgpLGN9ZnVuY3Rpb24gbyhhLGIsYyxkKXt0aGlzLm9iamVjdD1hLHRoaXMuY2FsbGJhY2s9Yix0aGlzLnRhcmdldD1jLHRoaXMudG9rZW49ZCx0aGlzLnJlcG9ydGluZz0hMCxHJiYodGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2s9dGhpcy5pbnRlcm5hbENhbGxiYWNrLmJpbmQodGhpcykpLHRoaXMudmFsaWQ9ITAscCh0aGlzKSx0aGlzLmNvbm5lY3QoKSx0aGlzLnN5bmMoITApfWZ1bmN0aW9uIHAoYSl7VyYmKFYucHVzaChhKSxvLl9hbGxPYnNlcnZlcnNDb3VudCsrKX1mdW5jdGlvbiBxKGEsYixjLGQpe28uY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIHIoYSxiLGMsZCl7aWYoIUFycmF5LmlzQXJyYXkoYSkpdGhyb3cgRXJyb3IoIlByb3ZpZGVkIG9iamVjdCBpcyBub3QgYW4gQXJyYXkiKTtvLmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBzKGEpe3RoaXMuYXJyPVtdLHRoaXMuY2FsbGJhY2s9YSx0aGlzLmlzT2JzZXJ2ZWQ9ITB9ZnVuY3Rpb24gdChhLGIsYyxkLGYpe3RoaXMudmFsdWU9dm9pZCAwO3ZhciBnPWgoYik7cmV0dXJuIGc/Zy5sZW5ndGg/KGUoYSkmJih0aGlzLnBhdGg9ZyxvLmNhbGwodGhpcyxhLGMsZCxmKSksdm9pZCAwKToodGhpcy52YWx1ZT1hLHZvaWQgMCk6dm9pZCAwfWZ1bmN0aW9uIHUoYSxiKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0Lm9ic2VydmUpe3ZhciBjPU9iamVjdC5nZXROb3RpZmllcihhKTtyZXR1cm4gZnVuY3Rpb24oZCxlKXt2YXIgZj17b2JqZWN0OmEsdHlwZTpkLG5hbWU6Yn07Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihmLm9sZFZhbHVlPWUpLGMubm90aWZ5KGYpfX19ZnVuY3Rpb24gdihhLGIsYyl7Zm9yKHZhciBkPXt9LGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO19bZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZWQiIT1nLnR5cGUmJigibmV3IiE9Zy50eXBlP2cubmFtZSBpbiBkPyhkZWxldGUgZFtnLm5hbWVdLGRlbGV0ZSBjW2cubmFtZV0pOmVbZy5uYW1lXT0hMDpnLm5hbWUgaW4gZT9kZWxldGUgZVtnLm5hbWVdOmRbZy5uYW1lXT0hMCkpOihjb25zb2xlLmVycm9yKCJVbmtub3duIGNoYW5nZVJlY29yZCB0eXBlOiAiK2cudHlwZSksY29uc29sZS5lcnJvcihnKSl9Zm9yKHZhciBoIGluIGQpZFtoXT1hW2hdO2Zvcih2YXIgaCBpbiBlKWVbaF09dm9pZCAwO3ZhciBpPXt9O2Zvcih2YXIgaCBpbiBjKWlmKCEoaCBpbiBkfHxoIGluIGUpKXt2YXIgaj1hW2hdO2NbaF0hPT1qJiYoaVtoXT1qKX1yZXR1cm57YWRkZWQ6ZCxyZW1vdmVkOmUsY2hhbmdlZDppfX1mdW5jdGlvbiB3KGEsYixjLGQsZSxmKXtmb3IodmFyIGc9Zi1lKzEsaD1jLWIrMSxpPW5ldyBBcnJheShnKSxqPTA7Zz5qO2orKylpW2pdPW5ldyBBcnJheShoKSxpW2pdWzBdPWo7Zm9yKHZhciBrPTA7aD5rO2srKylpWzBdW2tdPWs7Zm9yKHZhciBqPTE7Zz5qO2orKylmb3IodmFyIGs9MTtoPms7aysrKWlmKGRbZStqLTFdPT09YVtiK2stMV0paVtqXVtrXT1pW2otMV1bay0xXTtlbHNle3ZhciBsPWlbai0xXVtrXSsxLG09aVtqXVtrLTFdKzE7aVtqXVtrXT1tPmw/bDptfXJldHVybiBpfWZ1bmN0aW9uIHgoYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTEsYz1hWzBdLmxlbmd0aC0xLGQ9YVtiXVtjXSxlPVtdO2I+MHx8Yz4wOylpZigwIT1iKWlmKDAhPWMpe3ZhciBmLGc9YVtiLTFdW2MtMV0saD1hW2ItMV1bY10saT1hW2JdW2MtMV07Zj1pPmg/Zz5oP2g6ZzpnPmk/aTpnLGY9PWc/KGc9PWQ/ZS5wdXNoKGFiKTooZS5wdXNoKGJiKSxkPWcpLGItLSxjLS0pOmY9PWg/KGUucHVzaChkYiksYi0tLGQ9aCk6KGUucHVzaChjYiksYy0tLGQ9aSl9ZWxzZSBlLnB1c2goZGIpLGItLTtlbHNlIGUucHVzaChjYiksYy0tO3JldHVybiBlLnJldmVyc2UoKSxlfWZ1bmN0aW9uIHkoYSxiLGMpe2Zvcih2YXIgZD0wO2M+ZDtkKyspaWYoYVtkXSE9PWJbZF0pcmV0dXJuIGQ7cmV0dXJuIGN9ZnVuY3Rpb24geihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsZj0wO2M+ZiYmYVstLWRdPT09YlstLWVdOylmKys7cmV0dXJuIGZ9ZnVuY3Rpb24gQShhLGIsYyl7cmV0dXJue2luZGV4OmEscmVtb3ZlZDpiLGFkZGVkQ291bnQ6Y319ZnVuY3Rpb24gQihhLGIsYyxkLGUsZil7dmFyIGc9MCxoPTAsaT1NYXRoLm1pbihjLWIsZi1lKTtpZigwPT1iJiYwPT1lJiYoZz15KGEsZCxpKSksYz09YS5sZW5ndGgmJmY9PWQubGVuZ3RoJiYoaD16KGEsZCxpLWcpKSxiKz1nLGUrPWcsYy09aCxmLT1oLDA9PWMtYiYmMD09Zi1lKXJldHVybltdO2lmKGI9PWMpe2Zvcih2YXIgaj1BKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltBKGIsW10sYy1iKV07Zm9yKHZhciBrPXgodyhhLGIsYyxkLGUsZikpLGo9dm9pZCAwLGw9W10sbT1iLG49ZSxvPTA7bzxrLmxlbmd0aDtvKyspc3dpdGNoKGtbb10pe2Nhc2UgYWI6aiYmKGwucHVzaChqKSxqPXZvaWQgMCksbSsrLG4rKzticmVhaztjYXNlIGJiOmp8fChqPUEobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrLGoucmVtb3ZlZC5wdXNoKGRbbl0pLG4rKzticmVhaztjYXNlIGNiOmp8fChqPUEobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrO2JyZWFrO2Nhc2UgZGI6anx8KGo9QShtLFtdLDApKSxqLnJlbW92ZWQucHVzaChkW25dKSxuKyt9cmV0dXJuIGomJmwucHVzaChqKSxsfWZ1bmN0aW9uIEMoYSxiLGMsZCl7cmV0dXJuIGM+Ynx8YT5kPy0xOmI9PWN8fGQ9PWE/MDpjPmE/ZD5iP2ItYzpkLWM6Yj5kP2QtYTpiLWF9ZnVuY3Rpb24gRChhLGIsYyxkKXtmb3IodmFyIGU9QShiLGMsZCksZj0hMSxnPTAsaD0wO2g8YS5sZW5ndGg7aCsrKXt2YXIgaT1hW2hdO2lmKGkuaW5kZXgrPWcsIWYpe3ZhciBqPUMoZS5pbmRleCxlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGgsaS5pbmRleCxpLmluZGV4K2kuYWRkZWRDb3VudCk7aWYoaj49MCl7YS5zcGxpY2UoaCwxKSxoLS0sZy09aS5hZGRlZENvdW50LWkucmVtb3ZlZC5sZW5ndGgsZS5hZGRlZENvdW50Kz1pLmFkZGVkQ291bnQtajt2YXIgaz1lLnJlbW92ZWQubGVuZ3RoK2kucmVtb3ZlZC5sZW5ndGgtajtpZihlLmFkZGVkQ291bnR8fGspe3ZhciBjPWkucmVtb3ZlZDtpZihlLmluZGV4PGkuaW5kZXgpe3ZhciBsPWUucmVtb3ZlZC5zbGljZSgwLGkuaW5kZXgtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobCxjKSxjPWx9aWYoZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoPmkuaW5kZXgraS5hZGRlZENvdW50KXt2YXIgbT1lLnJlbW92ZWQuc2xpY2UoaS5pbmRleCtpLmFkZGVkQ291bnQtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYyxtKX1lLnJlbW92ZWQ9YyxpLmluZGV4PGUuaW5kZXgmJihlLmluZGV4PWkuaW5kZXgpfWVsc2UgZj0hMH1lbHNlIGlmKGUuaW5kZXg8aS5pbmRleCl7Zj0hMCxhLnNwbGljZShoLDAsZSksaCsrO3ZhciBuPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RoO2kuaW5kZXgrPW4sZys9bn19fWZ8fGEucHVzaChlKX1mdW5jdGlvbiBFKGEsYil7Zm9yKHZhciBlPVtdLGY9MDtmPGIubGVuZ3RoO2YrKyl7dmFyIGc9YltmXTtzd2l0Y2goZy50eXBlKXtjYXNlInNwbGljZSI6RChlLGcuaW5kZXgsZy5yZW1vdmVkLnNsaWNlKCksZy5hZGRlZENvdW50KTticmVhaztjYXNlIm5ldyI6Y2FzZSJ1cGRhdGVkIjpjYXNlImRlbGV0ZWQiOmlmKCFjKGcubmFtZSkpY29udGludWU7dmFyIGg9ZChnLm5hbWUpO2lmKDA+aCljb250aW51ZTtEKGUsaCxbZy5vbGRWYWx1ZV0sMSk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKCJVbmV4cGVjdGVkIHJlY29yZCB0eXBlOiAiK0pTT04uc3RyaW5naWZ5KGcpKX19cmV0dXJuIGV9ZnVuY3Rpb24gRihhLGIpe3ZhciBjPVtdO3JldHVybiBFKGEsYikuZm9yRWFjaChmdW5jdGlvbihiKXtyZXR1cm4gMT09Yi5hZGRlZENvdW50JiYxPT1iLnJlbW92ZWQubGVuZ3RoPyhiLnJlbW92ZWRbMF0hPT1hW2IuaW5kZXhdJiZjLnB1c2goYiksdm9pZCAwKTooYz1jLmNvbmNhdChCKGEsYi5pbmRleCxiLmluZGV4K2IuYWRkZWRDb3VudCxiLnJlbW92ZWQsMCxiLnJlbW92ZWQubGVuZ3RoKSksdm9pZCAwKX0pLGN9dmFyIEc9YigpLEg9ITE7dHJ5e3ZhciBJPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7SD1JKCl9Y2F0Y2goSil7fXZhciBLPWEuTnVtYmVyLmlzTmFOfHxmdW5jdGlvbihiKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGImJmEuaXNOYU4oYil9LEw9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LE09IlskX2EtekEtWl0iLE49IlskX2EtekEtWjAtOV0iLE89TSsiKyIrTisiKiIsUD0iKD86WzAtOV18WzEtOV0rWzAtOV0rKSIsUT0iKD86IitPKyJ8IitQKyIpIixSPSIoPzoiK1ErIikoPzpcXC4iK1ErIikqIixTPW5ldyBSZWdFeHAoIl4iK1IrIiQiKSxUPXt9O2kucHJvdG90eXBlPUwoe19fcHJvdG9fXzpbXSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmpvaW4oIi4iKX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZih2b2lkIDA9PT1hfHxudWxsPT09YSlyZXR1cm47YT1hW3RoaXNbYl1dfXJldHVybiBhfSxnZXRWYWx1ZUZyb21PYnNlcnZlZDpmdW5jdGlvbihhLGIpe2IucmVzZXQoKTtmb3IodmFyIGM9MDtjPHRoaXMubGVuZ3RoO2MrKyl7aWYodm9pZCAwPT09YXx8bnVsbD09PWEpcmV0dXJuIGIuY2xlYW51cCgpLHZvaWQgMDtiLm9ic2VydmUoYSksYT1hW3RoaXNbY11dfXJldHVybiBhfSxjb21waWxlZEdldFZhbHVlRnJvbUZuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSk/J1siJythKyciXSc6Ii4iK2F9KSxiPSIiLGQ9Im9iaiI7Yis9ImlmIChvYmogIT09IG51bGwgJiYgb2JqICE9PSB1bmRlZmluZWQiO2Zvcih2YXIgZT0wO2U8dGhpcy5sZW5ndGgtMTtlKyspdGhpc1tlXSxkKz1hW2VdLGIrPSIgJiZcbiAgICAgIitkKyIgIT09IG51bGwgJiYgIitkKyIgIT09IHVuZGVmaW5lZCI7cmV0dXJuIGIrPSIpXG4iLGQrPWFbZV0sYis9IiAgcmV0dXJuICIrZCsiO1xuZWxzZVxuICByZXR1cm4gdW5kZWZpbmVkOyIsbmV3IEZ1bmN0aW9uKCJvYmoiLGIpfSxzZXRWYWx1ZUZyb206ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aC0xO2MrKyl7aWYodm9pZCAwPT09YXx8bnVsbD09PWEpcmV0dXJuITE7YT1hW3RoaXNbY11dfXJldHVybiB2b2lkIDA9PT1hfHxudWxsPT09YT8hMTooYVt0aGlzW3RoaXMubGVuZ3RoLTFdXT1iLCEwKX19KTt2YXIgVT0xZTM7by5wcm90b3R5cGU9e3ZhbGlkOiExLGludGVybmFsQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dGhpcy52YWxpZCYmdGhpcy5yZXBvcnRpbmcmJnRoaXMuY2hlY2soYSkmJih0aGlzLnJlcG9ydCgpLHRoaXMudGVzdGluZ1Jlc3VsdHMmJih0aGlzLnRlc3RpbmdSZXN1bHRzLmFueUNoYW5nZWQ9ITApKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnZhbGlkJiYoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMub2JqZWN0LnVub2JzZXJ2ZWQmJnRoaXMub2JqZWN0LnVub2JzZXJ2ZWQoKSx0aGlzLmRpc2Nvbm5lY3QoKSx0aGlzLm9iamVjdD12b2lkIDAsdGhpcy52YWxpZD0hMSl9LGRlbGl2ZXI6ZnVuY3Rpb24oYSl7dGhpcy52YWxpZCYmKEc/KHRoaXMudGVzdGluZ1Jlc3VsdHM9YSxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHModGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spLHRoaXMudGVzdGluZ1Jlc3VsdHM9dm9pZCAwKTpqKHRoaXMpKX0scmVwb3J0OmZ1bmN0aW9uKCl7aWYodGhpcy5yZXBvcnRpbmcpe3RoaXMuc3luYyghMSksdGhpcy5yZXBvcnRBcmdzLnB1c2godGhpcy50b2tlbik7dHJ5e3RoaXMuY2FsbGJhY2suYXBwbHkodGhpcy50YXJnZXQsdGhpcy5yZXBvcnRBcmdzKX1jYXRjaChhKXtvLl9lcnJvclRocm93bkR1cmluZ0NhbGxiYWNrPSEwLGNvbnNvbGUuZXJyb3IoIkV4Y2VwdGlvbiBjYXVnaHQgZHVyaW5nIG9ic2VydmVyIGNhbGxiYWNrOiAiK2EpfXRoaXMucmVwb3J0QXJncz12b2lkIDB9fSxyZXNldDpmdW5jdGlvbigpe3RoaXMudmFsaWQmJihHJiYodGhpcy5yZXBvcnRpbmc9ITEsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKSx0aGlzLnJlcG9ydGluZz0hMCksdGhpcy5zeW5jKCEwKSl9fTt2YXIgVixXPSFHfHxhLmZvcmNlQ29sbGVjdE9ic2VydmVycztvLl9hbGxPYnNlcnZlcnNDb3VudD0wLFcmJihWPVtdKTt2YXIgWD0hMSxZPSJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZGVsaXZlckFsbENoYW5nZVJlY29yZHM7YS5QbGF0Zm9ybT1hLlBsYXRmb3JtfHx7fSxhLlBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50PWZ1bmN0aW9uKCl7aWYoIVgpe2lmKFkpcmV0dXJuIE9iamVjdC5kZWxpdmVyQWxsQ2hhbmdlUmVjb3JkcygpLHZvaWQgMDtpZihXKXtYPSEwO3ZhciBhPTAsYj17fTtkb3thKys7dmFyIGM9VjtWPVtdLGIuYW55Q2hhbmdlZD0hMTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtlLnZhbGlkJiYoRz9lLmRlbGl2ZXIoYik6ZS5jaGVjaygpJiYoYi5hbnlDaGFuZ2VkPSEwLGUucmVwb3J0KCkpLFYucHVzaChlKSl9fXdoaWxlKFU+YSYmYi5hbnlDaGFuZ2VkKTtvLl9hbGxPYnNlcnZlcnNDb3VudD1WLmxlbmd0aCxYPSExfX19LFcmJihhLlBsYXRmb3JtLmNsZWFyT2JzZXJ2ZXJzPWZ1bmN0aW9uKCl7Vj1bXX0pLHEucHJvdG90eXBlPUwoe19fcHJvdG9fXzpvLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RyYmT2JqZWN0Lm9ic2VydmUodGhpcy5vYmplY3QsdGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spfSxzeW5jOmZ1bmN0aW9uKCl7R3x8KHRoaXMub2xkT2JqZWN0PW4odGhpcy5vYmplY3QpKX0sY2hlY2s6ZnVuY3Rpb24oYSl7dmFyIGIsYztpZihHKXtpZighYSlyZXR1cm4hMTtjPXt9LGI9dih0aGlzLm9iamVjdCxhLGMpfWVsc2UgYz10aGlzLm9sZE9iamVjdCxiPW0odGhpcy5vYmplY3QsdGhpcy5vbGRPYmplY3QpO3JldHVybiBsKGIpPyExOih0aGlzLnJlcG9ydEFyZ3M9W2IuYWRkZWR8fHt9LGIucmVtb3ZlZHx8e30sYi5jaGFuZ2VkfHx7fV0sdGhpcy5yZXBvcnRBcmdzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV19KSwhMCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXtHP3RoaXMub2JqZWN0JiZPYmplY3QudW5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKTp0aGlzLm9sZE9iamVjdD12b2lkIDB9fSksci5wcm90b3R5cGU9TCh7X19wcm90b19fOnEucHJvdG90eXBlLGNvbm5lY3Q6ZnVuY3Rpb24oKXtHJiZBcnJheS5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKX0sc3luYzpmdW5jdGlvbigpe0d8fCh0aGlzLm9sZE9iamVjdD10aGlzLm9iamVjdC5zbGljZSgpKX0sY2hlY2s6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoRyl7aWYoIWEpcmV0dXJuITE7Yj1GKHRoaXMub2JqZWN0LGEpfWVsc2UgYj1CKHRoaXMub2JqZWN0LDAsdGhpcy5vYmplY3QubGVuZ3RoLHRoaXMub2xkT2JqZWN0LDAsdGhpcy5vbGRPYmplY3QubGVuZ3RoKTtyZXR1cm4gYiYmYi5sZW5ndGg/KHRoaXMucmVwb3J0QXJncz1bYl0sITApOiExfX0pLHIuYXBwbHlTcGxpY2VzPWZ1bmN0aW9uKGEsYixjKXtjLmZvckVhY2goZnVuY3Rpb24oYyl7Zm9yKHZhciBkPVtjLmluZGV4LGMucmVtb3ZlZC5sZW5ndGhdLGU9Yy5pbmRleDtlPGMuaW5kZXgrYy5hZGRlZENvdW50OylkLnB1c2goYltlXSksZSsrO0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoYSxkKX0pfTt2YXIgWj1PYmplY3QuZ2V0UHJvdG90eXBlT2Yoe30pLCQ9T2JqZWN0LmdldFByb3RvdHlwZU9mKFtdKTtzLnByb3RvdHlwZT17cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmlzT2JzZXJ2ZWQ9IXRoaXMuaXNPYnNlcnZlZH0sb2JzZXJ2ZTpmdW5jdGlvbihhKXtpZihlKGEpJiZhIT09WiYmYSE9PSQpe3ZhciBiPXRoaXMuYXJyLmluZGV4T2YoYSk7Yj49MCYmdGhpcy5hcnJbYisxXT09PXRoaXMuaXNPYnNlcnZlZHx8KDA+YiYmKGI9dGhpcy5hcnIubGVuZ3RoLHRoaXMuYXJyW2JdPWEsT2JqZWN0Lm9ic2VydmUoYSx0aGlzLmNhbGxiYWNrKSksdGhpcy5hcnJbYisxXT10aGlzLmlzT2JzZXJ2ZWQsdGhpcy5vYnNlcnZlKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSkpfX0sY2xlYW51cDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPXRoaXMuaXNPYnNlcnZlZDtiPHRoaXMuYXJyLmxlbmd0aDspe3ZhciBkPXRoaXMuYXJyW2JdO3RoaXMuYXJyW2IrMV09PWM/KGI+YSYmKHRoaXMuYXJyW2FdPWQsdGhpcy5hcnJbYSsxXT1jKSxhKz0yKTpPYmplY3QudW5vYnNlcnZlKGQsdGhpcy5jYWxsYmFjayksYis9Mn10aGlzLmFyci5sZW5ndGg9YX19LHQucHJvdG90eXBlPUwoe19fcHJvdG9fXzpvLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RyYmKHRoaXMub2JzZXJ2ZWRTZXQ9bmV3IHModGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMudmFsdWU9dm9pZCAwLEcmJih0aGlzLm9ic2VydmVkU2V0LnJlc2V0KCksdGhpcy5vYnNlcnZlZFNldC5jbGVhbnVwKCksdGhpcy5vYnNlcnZlZFNldD12b2lkIDApfSxjaGVjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlPUc/dGhpcy5wYXRoLmdldFZhbHVlRnJvbU9ic2VydmVkKHRoaXMub2JqZWN0LHRoaXMub2JzZXJ2ZWRTZXQpOnRoaXMucGF0aC5nZXRWYWx1ZUZyb20odGhpcy5vYmplY3QpLGYodGhpcy52YWx1ZSx0aGlzLm9sZFZhbHVlKT8hMToodGhpcy5yZXBvcnRBcmdzPVt0aGlzLnZhbHVlLHRoaXMub2xkVmFsdWVdLCEwKX0sc3luYzpmdW5jdGlvbihhKXthJiYodGhpcy52YWx1ZT1HP3RoaXMucGF0aC5nZXRWYWx1ZUZyb21PYnNlcnZlZCh0aGlzLm9iamVjdCx0aGlzLm9ic2VydmVkU2V0KTp0aGlzLnBhdGguZ2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0KSksdGhpcy5vbGRWYWx1ZT10aGlzLnZhbHVlfX0pLHQuZ2V0VmFsdWVBdFBhdGg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1oKGIpO3JldHVybiBjP2MuZ2V0VmFsdWVGcm9tKGEpOnZvaWQgMH0sdC5zZXRWYWx1ZUF0UGF0aD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9aChiKTtkJiZkLnNldFZhbHVlRnJvbShhLGMpfTt2YXIgXz17Im5ldyI6ITAsdXBkYXRlZDohMCxkZWxldGVkOiEwfTt0LmRlZmluZVByb3BlcnR5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jLm9iamVjdCxlPWgoYy5wYXRoKSxmPXUoYSxiKSxnPW5ldyB0KGQsYy5wYXRoLGZ1bmN0aW9uKGEsYil7ZiYmZigidXBkYXRlZCIsYil9KTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0VmFsdWVGcm9tKGQpfSxzZXQ6ZnVuY3Rpb24oYSl7ZS5zZXRWYWx1ZUZyb20oZCxhKX0sY29uZmlndXJhYmxlOiEwfSkse2Nsb3NlOmZ1bmN0aW9uKCl7dmFyIGM9ZS5nZXRWYWx1ZUZyb20oZCk7ZiYmZy5kZWxpdmVyKCksZy5jbG9zZSgpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse3ZhbHVlOmMsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9fX07dmFyIGFiPTAsYmI9MSxjYj0yLGRiPTM7YS5PYnNlcnZlcj1vLGEuT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZT1HLGEuQXJyYXlPYnNlcnZlcj1yLGEuQXJyYXlPYnNlcnZlci5jYWxjdWxhdGVTcGxpY2VzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEIoYSwwLGEubGVuZ3RoLGIsMCxiLmxlbmd0aCl9LGEuT2JqZWN0T2JzZXJ2ZXI9cSxhLlBhdGhPYnNlcnZlcj10LGEuUGF0aD1pfSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBjKGEpe2Zvcig7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYS5nZXRFbGVtZW50QnlJZD9hOm51bGx9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50LmNvbnRhaW5zKGEpfWZ1bmN0aW9uIGUoYSxiLGMsZCl7dGhpcy5jbG9zZWQ9ITEsdGhpcy5ub2RlPWEsdGhpcy5wcm9wZXJ0eT1iLHRoaXMubW9kZWw9Yyx0aGlzLnBhdGg9ZCx0aGlzLm9ic2VydmVyPW5ldyBQYXRoT2JzZXJ2ZXIoYyxkLHRoaXMuYm91bmRWYWx1ZUNoYW5nZWQsdGhpcyksdGhpcy5ib3VuZFZhbHVlQ2hhbmdlZCh0aGlzLnZhbHVlKX1mdW5jdGlvbiBmKGEsYixjLGQpe3RoaXMuY29uZGl0aW9uYWw9Ij8iPT1iW2IubGVuZ3RoLTFdLHRoaXMuY29uZGl0aW9uYWwmJihhLnJlbW92ZUF0dHJpYnV0ZShiKSxiPWIuc2xpY2UoMCwtMSkpLGUuY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIGcoYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIFQ7Y2FzZSJyYWRpbyI6Y2FzZSJzZWxlY3QtbXVsdGlwbGUiOmNhc2Uic2VsZWN0LW9uZSI6cmV0dXJuImNoYW5nZSI7ZGVmYXVsdDpyZXR1cm4iaW5wdXQifX1mdW5jdGlvbiBoKGEsYixjLGQpe2UuY2FsbCh0aGlzLGEsYixjLGQpLHRoaXMuZXZlbnRUeXBlPWcodGhpcy5ub2RlKSx0aGlzLmJvdW5kTm9kZVZhbHVlVG9Nb2RlbD10aGlzLm5vZGVWYWx1ZUNoYW5nZWQuYmluZCh0aGlzKSx0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50VHlwZSx0aGlzLmJvdW5kTm9kZVZhbHVlVG9Nb2RlbCwhMCl9ZnVuY3Rpb24gaShhKXtpZighZChhKSlyZXR1cm5bXTtpZihhLmZvcm0pcmV0dXJuIFEoYS5mb3JtLmVsZW1lbnRzLGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hJiYiSU5QVVQiPT1iLnRhZ05hbWUmJiJyYWRpbyI9PWIudHlwZSYmYi5uYW1lPT1hLm5hbWV9KTt2YXIgYj1hLm93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSInK2EubmFtZSsnIl0nKTtyZXR1cm4gUShiLGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hJiYhYi5mb3JtfSl9ZnVuY3Rpb24gaihhLGIsYyl7aC5jYWxsKHRoaXMsYSwiY2hlY2tlZCIsYixjKX1mdW5jdGlvbiBrKGEsYixjKXtoLmNhbGwodGhpcyxhLCJzZWxlY3RlZEluZGV4IixiLGMpfWZ1bmN0aW9uIGwoYSl7cmV0dXJuICRbYS50YWdOYW1lXSYmYS5oYXNBdHRyaWJ1dGUoInRlbXBsYXRlIil9ZnVuY3Rpb24gbShhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGwoYSl9ZnVuY3Rpb24gbihhKXtyZXR1cm4gXyYmIlRFTVBMQVRFIj09YS50YWdOYW1lfWZ1bmN0aW9uIG8oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoYWIpO20oYSkmJmIoYSksUChjLGIpfWZ1bmN0aW9uIHAoYSl7ZnVuY3Rpb24gYihhKXtIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlKGEpfHxwKGEuY29udGVudCl9byhhLGIpfWZ1bmN0aW9uIHEoYSxiKXtPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLGMpKX0pfWZ1bmN0aW9uIHIoYSl7aWYoIWEuZGVmYXVsdFZpZXcpcmV0dXJuIGE7dmFyIGI9ZWIuZ2V0KGEpO2lmKCFiKXtmb3IoYj1hLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yi5sYXN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5sYXN0Q2hpbGQpO2ViLnNldChhLGIpfXJldHVybiBifWZ1bmN0aW9uIHMoYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD1jLmxlbmd0aDtkLS0+MDspe3ZhciBlPWNbZF07WltlLm5hbWVdJiYoInRlbXBsYXRlIiE9PWUubmFtZSYmYi5zZXRBdHRyaWJ1dGUoZS5uYW1lLGUudmFsdWUpLGEucmVtb3ZlQXR0cmlidXRlKGUubmFtZSkpfXJldHVybiBifWZ1bmN0aW9uIHQoYSxiLGMpe3ZhciBkPWEuY29udGVudDtpZihjKXJldHVybiBkLmFwcGVuZENoaWxkKGIpLHZvaWQgMDtmb3IodmFyIGU7ZT1iLmZpcnN0Q2hpbGQ7KWQuYXBwZW5kQ2hpbGQoZSl9ZnVuY3Rpb24gdShhKXsiVEVNUExBVEUiPT09YS50YWdOYW1lP198fChjYj9hLl9fcHJvdG9fXz1IVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZTpxKGEsSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUpKToocShhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiY29udGVudCIsaWIpKX1mdW5jdGlvbiB2KGEpe3ZhciBiPWxiLmdldChhKTtifHwoYj1mdW5jdGlvbigpe0goYSxhLm1vZGVsLGEuYmluZGluZ0RlbGVnYXRlKX0sbGIuc2V0KGEsYikpLGJiKGIpfWZ1bmN0aW9uIHcoYSxiLGMsZCl7dGhpcy5jbG9zZWQ9ITEsdGhpcy5ub2RlPWEsdGhpcy5wcm9wZXJ0eT1iLHRoaXMubW9kZWw9Yyx0aGlzLnBhdGg9ZCx0aGlzLm5vZGUuaW5wdXRzLmJpbmQodGhpcy5wcm9wZXJ0eSxjLGR8fCIiKX1mdW5jdGlvbiB4KGEpe3JldHVybiAzPT1hLmxlbmd0aCYmMD09YVswXS5sZW5ndGgmJjA9PWFbMl0ubGVuZ3RofWZ1bmN0aW9uIHkoYSl7aWYoYSYmYS5sZW5ndGgpe2Zvcih2YXIgYixjPWEubGVuZ3RoLGQ9MCxlPTAsZj0wO2M+ZTspe2lmKGQ9YS5pbmRleE9mKCJ7eyIsZSksZj0wPmQ/LTE6YS5pbmRleE9mKCJ9fSIsZCsyKSwwPmYpe2lmKCFiKXJldHVybjtiLnB1c2goYS5zbGljZShlKSk7YnJlYWt9Yj1ifHxbXSxiLnB1c2goYS5zbGljZShlLGQpKSxiLnB1c2goYS5zbGljZShkKzIsZikudHJpbSgpKSxlPWYrMn1yZXR1cm4gZT09PWMmJmIucHVzaCgiIiksYn19ZnVuY3Rpb24geihhLGIsYyxkLGUpe3ZhciBmLGc9ZSYmZVtYXTtyZXR1cm4gZyYmImZ1bmN0aW9uIj09dHlwZW9mIGcmJihmPWcoYyxkLGIsYSksZiYmKGM9ZixkPSJ2YWx1ZSIpKSxhLmJpbmQoYixjLGQpfWZ1bmN0aW9uIEEoYSxiLGMsZCxlKXtmb3IodmFyIGY9MDtmPGEubGVuZ3RoO2YrPTIpe3ZhciBnPUMoYixhW2ZdLGFbZisxXSxjLGQpO2UmJmUucHVzaChnKX19ZnVuY3Rpb24gQihhKXtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPSIiLGQ9MCxlPSEwO2Q8YS5sZW5ndGg7ZCsrLGU9IWUpaWYoZSljKz1hW2RdO2Vsc2V7dmFyIGY9YltkXTt2b2lkIDAhPT1mJiYoYys9Zil9cmV0dXJuIGN9fWZ1bmN0aW9uIEMoYSxiLGMsZCxlKXtpZih4KGMpKXJldHVybiB6KGEsYixkLGNbMV0sZSk7Yy5jb21iaW5hdG9yPWMuY29tYmluYXRvcnx8QihjKTt2YXIgZj1uZXcgTShjLmNvbWJpbmF0b3IpO2Yuc2NoZWR1bGVkPSEwO2Zvcih2YXIgZz0xO2c8Yy5sZW5ndGg7Zys9Mil6KGYsZyxkLGNbZ10sZSk7cmV0dXJuIGYucmVzb2x2ZSgpLGEuYmluZChiLGYsInZhbHVlIil9ZnVuY3Rpb24gRChhKXtiKGEpO2Zvcih2YXIgYyxkPW0oYSksZT0hMSxmPSExLGc9MDtnPGEuYXR0cmlidXRlcy5sZW5ndGg7ZysrKXt2YXIgaD1hLmF0dHJpYnV0ZXNbZ10saT1oLm5hbWUsaj1oLnZhbHVlO2QmJihpPT09Vz9lPSEwOihpPT09VXx8aT09PVYpJiYoZj0hMCxqPWp8fCJ7e319IikpO3ZhciBrPXkoaik7ayYmKGM9Y3x8W10sYy5wdXNoKGksaykpfXJldHVybiBlJiYhZiYmKGM9Y3x8W10sYy5wdXNoKFUseSgie3t9fSIpKSksY31mdW5jdGlvbiBFKGEpe2lmKGEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSlyZXR1cm4gRChhKTtpZihhLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUpe3ZhciBiPXkoYS5kYXRhKTtpZihiKXJldHVyblsidGV4dENvbnRlbnQiLGJdfX1mdW5jdGlvbiBGKGEpe3RoaXMubm9kZT1hfWZ1bmN0aW9uIEcoYSxiLGMsZCxlKXtpZihiJiYoYi50ZW1wbGF0ZVJlZiYmKEhUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSxiLnRlbXBsYXRlUmVmKSxkJiZrYi5zZXQoYSxkKSxlJiZlLnB1c2gobmV3IEYoYSkpKSxiLmxlbmd0aCYmQShiLGEsYyxkLGUpLGIuY2hpbGRyZW4pKWZvcih2YXIgZj0wLGc9YS5maXJzdENoaWxkO2c7Zz1nLm5leHRTaWJsaW5nKUcoZyxiLmNoaWxkcmVuW2YrK10sYyxkLGUpfWZ1bmN0aW9uIEgoYSxjLGQpe2IoYSk7dmFyIGU9RShhKTtlJiZBKGUsYSxjLGQpO2Zvcih2YXIgZj1hLmZpcnN0Q2hpbGQ7ZjtmPWYubmV4dFNpYmxpbmcpSChmLGMsZCl9ZnVuY3Rpb24gSShhLGIpe3ZhciBjPWEuY2xvbmVOb2RlKCExKTtpZihtKGMpKXJldHVybiBjO2Zvcih2YXIgZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYy5hcHBlbmRDaGlsZChJKGQsYikpO3JldHVybiBjfWZ1bmN0aW9uIEooYSl7dmFyIGI9RShhKTttKGEpJiYoYj1ifHxbXSxiLnRlbXBsYXRlUmVmPWEsYi5oYXNTdWJUZW1wbGF0ZT0hMCk7Zm9yKHZhciBjPWEuZmlyc3RDaGlsZCxkPTA7YztjPWMubmV4dFNpYmxpbmcsZCsrKXt2YXIgZT1KKGMpO2UmJihiPWJ8fFtdLGIuY2hpbGRyZW49Yi5jaGlsZHJlbnx8W10sYi5jaGlsZHJlbltkXT1lLGUuaGFzU3ViVGVtcGxhdGUmJihiLmhhc1N1YlRlbXBsYXRlPSEwKSl9cmV0dXJuIGJ9ZnVuY3Rpb24gSyhhLGIsYyl7dGhpcy5maXJzdE5vZGU9YSx0aGlzLmxhc3ROb2RlPWIsdGhpcy5tb2RlbD1jfWZ1bmN0aW9uIEwoYSxiKXtpZihhLmZpcnN0Q2hpbGQpZm9yKHZhciBjPW5ldyBLKGEuZmlyc3RDaGlsZCxhLmxhc3RDaGlsZCxiKSxkPWMuZmlyc3ROb2RlO2Q7KW1iLnNldChkLGMpLGQ9ZC5uZXh0U2libGluZ31mdW5jdGlvbiBNKGEpe3RoaXMub2JzZXJ2ZXJzPXt9LHRoaXMudmFsdWVzPXt9LHRoaXMudmFsdWU9dm9pZCAwLHRoaXMuc2l6ZT0wLHRoaXMuY29tYmluYXRvcl89YSx0aGlzLmNsb3NlZD0hMSx0aGlzLnNjaGVkdWxlZD0hMX1mdW5jdGlvbiBOKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMudGVybWluYXRvcnM9W10sdGhpcy5pdGVyYXRlZFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwLHRoaXMuaW5wdXRzPW5ldyBNKHRoaXMucmVzb2x2ZUlucHV0cy5iaW5kKHRoaXMpKX12YXIgTyxQPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCksUT1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZmlsdGVyKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP089YS5NYXA6KE89ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LE8ucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iP3ZvaWQgMDp0aGlzLnZhbHVlc1tiXX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5rZXlzLmluZGV4T2YoYSk7cmV0dXJuIDA+Yj8hMToodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpLCEwKX0sZm9yRWFjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8dGhpcy5rZXlzLmxlbmd0aDtjKyspYS5jYWxsKGJ8fHRoaXMsdGhpcy52YWx1ZXNbY10sdGhpcy5rZXlzW2NdLHRoaXMpfX0pO3ZhciBSPSJfX3Byb3RvX18iaW57fT9mdW5jdGlvbihhKXtyZXR1cm4gYX06ZnVuY3Rpb24oYSl7dmFyIGI9YS5fX3Byb3RvX187aWYoIWIpcmV0dXJuIGE7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSkuZm9yRWFjaChmdW5jdGlvbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKSl9KSxjfTsiZnVuY3Rpb24iIT10eXBlb2YgZG9jdW1lbnQuY29udGFpbnMmJihEb2N1bWVudC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT10aGlzfHxhLnBhcmVudE5vZGU9PT10aGlzPyEwOnRoaXMuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGEpfSk7dmFyIFM7InVuZGVmaW5lZCIhPXR5cGVvZiBXZWFrTWFwJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3gvIik8MD9TPVdlYWtNYXA6ZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1PYmplY3QuaGFzT3duUHJvcGVydHksYz0obmV3IERhdGUpLmdldFRpbWUoKSUxZTk7ClM9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhjKysgKyJfXyIpfSxTLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7YShiLHRoaXMubmFtZSx7dmFsdWU6Yyx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGIuY2FsbChhLHRoaXMubmFtZSk/YVt0aGlzLm5hbWVdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX19KCksTm9kZS5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7dGhpcy5iaW5kaW5ncz10aGlzLmJpbmRpbmdzfHx7fTt2YXIgZD10aGlzLmJpbmRpbmdzW2FdO3JldHVybiBkJiZkLmNsb3NlKCksZD10aGlzLmNyZWF0ZUJpbmRpbmcoYSxiLGMpLHRoaXMuYmluZGluZ3NbYV09ZCxkP2Q6KGNvbnNvbGUuZXJyb3IoIlVuaGFuZGxlZCBiaW5kaW5nIHRvIE5vZGU6ICIsdGhpcyxhLGIsYyksdm9pZCAwKX0sTm9kZS5wcm90b3R5cGUuY3JlYXRlQmluZGluZz1mdW5jdGlvbigpe30sTm9kZS5wcm90b3R5cGUudW5iaW5kPWZ1bmN0aW9uKGEpe2lmKHRoaXMuYmluZGluZ3Mpe3ZhciBiPXRoaXMuYmluZGluZ3NbYV07YiYmKGIuY2xvc2UoKSxkZWxldGUgdGhpcy5iaW5kaW5nc1thXSl9fSxOb2RlLnByb3RvdHlwZS51bmJpbmRBbGw9ZnVuY3Rpb24oKXtpZih0aGlzLmJpbmRpbmdzKXtmb3IodmFyIGE9T2JqZWN0LmtleXModGhpcy5iaW5kaW5ncyksYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz10aGlzLmJpbmRpbmdzW2FbYl1dO2MmJmMuY2xvc2UoKX10aGlzLmJpbmRpbmdzPXt9fX0sZS5wcm90b3R5cGU9e2JvdW5kVmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe3RoaXMubm9kZVt0aGlzLnByb3BlcnR5XT10aGlzLnNhbml0aXplQm91bmRWYWx1ZShhKX0sc2FuaXRpemVCb3VuZFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PWE/IiI6U3RyaW5nKGEpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwodGhpcy5vYnNlcnZlci5jbG9zZSgpLHRoaXMub2JzZXJ2ZXI9dm9pZCAwLHRoaXMubm9kZT12b2lkIDAsdGhpcy5tb2RlbD12b2lkIDAsdGhpcy5jbG9zZWQ9ITApfSxnZXQgdmFsdWUoKXtyZXR1cm4gdGhpcy5vYnNlcnZlci52YWx1ZX0sc2V0IHZhbHVlKGEpe1BhdGhPYnNlcnZlci5zZXRWYWx1ZUF0UGF0aCh0aGlzLm1vZGVsLHRoaXMucGF0aCxhKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmVyLnJlc2V0KCl9fSxUZXh0LnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4idGV4dENvbnRlbnQiPT09YT9uZXcgZSh0aGlzLCJkYXRhIixiLGMpOk5vZGUucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcuY2FsbCh0aGlzLGEsYixjKX0sZi5wcm90b3R5cGU9Uih7X19wcm90b19fOmUucHJvdG90eXBlLGJvdW5kVmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbmRpdGlvbmFsPyhhP3RoaXMubm9kZS5zZXRBdHRyaWJ1dGUodGhpcy5wcm9wZXJ0eSwiIik6dGhpcy5ub2RlLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLnByb3BlcnR5KSx2b2lkIDApOih0aGlzLm5vZGUuc2V0QXR0cmlidXRlKHRoaXMucHJvcGVydHksdGhpcy5zYW5pdGl6ZUJvdW5kVmFsdWUoYSkpLHZvaWQgMCl9fSksRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIG5ldyBmKHRoaXMsYSxiLGMpfTt2YXIgVDshZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiPWEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSk7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJjaGVja2JveCIpO3ZhciBjLGQ9MDtiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjbGljayJ9KSxiLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24oKXtkKyssYz1jfHwiY2hhbmdlIn0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7ZS5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCEwLHdpbmRvdywwLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsKSxiLmRpc3BhdGNoRXZlbnQoZSksVD0xPT1kPyJjaGFuZ2UiOmN9KCksaC5wcm90b3R5cGU9Uih7X19wcm90b19fOmUucHJvdG90eXBlLG5vZGVWYWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oKXt0aGlzLnZhbHVlPXRoaXMubm9kZVt0aGlzLnByb3BlcnR5XSx0aGlzLnJlc2V0KCksdGhpcy5wb3N0VXBkYXRlQmluZGluZygpLFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCl9LHBvc3RVcGRhdGVCaW5kaW5nOmZ1bmN0aW9uKCl7fSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwodGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5ldmVudFR5cGUsdGhpcy5ib3VuZE5vZGVWYWx1ZVRvTW9kZWwsITApLGUucHJvdG90eXBlLmNsb3NlLmNhbGwodGhpcykpfX0pLGoucHJvdG90eXBlPVIoe19fcHJvdG9fXzpoLnByb3RvdHlwZSxzYW5pdGl6ZUJvdW5kVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIEJvb2xlYW4oYSl9LHBvc3RVcGRhdGVCaW5kaW5nOmZ1bmN0aW9uKCl7IklOUFVUIj09PXRoaXMubm9kZS50YWdOYW1lJiYicmFkaW8iPT09dGhpcy5ub2RlLnR5cGUmJmkodGhpcy5ub2RlKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWEuYmluZGluZ3MuY2hlY2tlZDtiJiYoYi52YWx1ZT0hMSl9KX19KSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4idmFsdWUiPT09YT8odGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksbmV3IGgodGhpcywidmFsdWUiLGIsYykpOiJjaGVja2VkIj09PWE/KHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLG5ldyBqKHRoaXMsYixjKSk6SFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcuY2FsbCh0aGlzLGEsYixjKX0sSFRNTFRleHRBcmVhRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuInZhbHVlIj09PWE/KHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLG5ldyBoKHRoaXMsYSxiLGMpKTpIVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZy5jYWxsKHRoaXMsYSxiLGMpfSxrLnByb3RvdHlwZT1SKHtfX3Byb3RvX186aC5wcm90b3R5cGUsYm91bmRWYWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2M+ZS5ub2RlLmxlbmd0aCYmZC0tP2JiKGIpOmUubm9kZVtlLnByb3BlcnR5XT1jfXZhciBjPU51bWJlcihhKTtpZihjPD10aGlzLm5vZGUubGVuZ3RoKXJldHVybiB0aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eV09Yyx2b2lkIDA7dmFyIGQ9MixlPXRoaXM7YmIoYil9fSksSFRNTFNlbGVjdEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmc9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiJzZWxlY3RlZGluZGV4Ij09PWEudG9Mb3dlckNhc2UoKT8odGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksbmV3IGsodGhpcyxiLGMpKTpIVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZy5jYWxsKHRoaXMsYSxiLGMpfTt2YXIgVT0iYmluZCIsVj0icmVwZWF0IixXPSJpZiIsWD0iZ2V0QmluZGluZyIsWT0iZ2V0SW5zdGFuY2VNb2RlbCIsWj17dGVtcGxhdGU6ITAscmVwZWF0OiEwLGJpbmQ6ITAscmVmOiEwfSwkPXtUSEVBRDohMCxUQk9EWTohMCxURk9PVDohMCxUSDohMCxUUjohMCxURDohMCxDT0xHUk9VUDohMCxDT0w6ITAsQ0FQVElPTjohMCxPUFRJT046ITAsT1BUR1JPVVA6ITB9LF89InVuZGVmaW5lZCIhPXR5cGVvZiBIVE1MVGVtcGxhdGVFbGVtZW50LGFiPSJ0ZW1wbGF0ZSwgIitPYmplY3Qua2V5cygkKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9Mb3dlckNhc2UoKSsiW3RlbXBsYXRlXSJ9KS5qb2luKCIsICIpLGJiPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt0aGlzLm5leHRSdW5uZXI9YSx0aGlzLnZhbHVlPSExLHRoaXMubGFzdFZhbHVlPXRoaXMudmFsdWUsdGhpcy5zY2hlZHVsZWQ9W10sdGhpcy5zY2hlZHVsZWRJZHM9W10sdGhpcy5ydW5uaW5nPSExLHRoaXMub2JzZXJ2ZXI9bmV3IFBhdGhPYnNlcnZlcih0aGlzLCJ2YWx1ZSIsdGhpcy5ydW4sdGhpcyl9ZnVuY3Rpb24gYihhKXt2YXIgYj1hW2VdO2FbZV18fChiPWQrKyxhW2VdPWIpLGMuc2NoZWR1bGUoYSxiKX1hLnByb3RvdHlwZT17c2NoZWR1bGU6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5zY2hlZHVsZWRJZHNbYl0pe2lmKHRoaXMucnVubmluZylyZXR1cm4gdGhpcy5uZXh0UnVubmVyLnNjaGVkdWxlKGEsYik7dGhpcy5zY2hlZHVsZWRJZHNbYl09ITAsdGhpcy5zY2hlZHVsZWQucHVzaChhKSx0aGlzLmxhc3RWYWx1ZT09PXRoaXMudmFsdWUmJih0aGlzLnZhbHVlPSF0aGlzLnZhbHVlKX19LHJ1bjpmdW5jdGlvbigpe3RoaXMucnVubmluZz0hMDtmb3IodmFyIGE9MDthPHRoaXMuc2NoZWR1bGVkLmxlbmd0aDthKyspe3ZhciBiPXRoaXMuc2NoZWR1bGVkW2FdLGM9YltlXTt0aGlzLnNjaGVkdWxlZElkc1tjXT0hMSwiZnVuY3Rpb24iPT10eXBlb2YgYj9iKCk6Yi5yZXNvbHZlKCl9dGhpcy5zY2hlZHVsZWQ9W10sdGhpcy5zY2hlZHVsZWRJZHM9W10sdGhpcy5sYXN0VmFsdWU9dGhpcy52YWx1ZSx0aGlzLnJ1bm5pbmc9ITF9fTt2YXIgYz1uZXcgYShuZXcgYSksZD0xLGU9Il9fc2NoZWR1bGVkSWRfXyI7cmV0dXJuIGJ9KCk7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtwKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksX3x8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIGNiPSJfX3Byb3RvX18iaW57fSxkYj1uZXcgUyxlYj1uZXcgUyxmYj1uZXcgUyxnYj1uZXcgUztIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlPWZ1bmN0aW9uKGEsYyl7aWYoYS50ZW1wbGF0ZUlzRGVjb3JhdGVkXylyZXR1cm4hMTt2YXIgZD1hO2QudGVtcGxhdGVJc0RlY29yYXRlZF89ITA7dmFyIGU9bihkKSxmPWUsZz0hZSxoPSExO2lmKCFlJiZsKGQpJiYoYighYyksZD1zKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsZT1uKGQpLGg9ITApLCFlKXt1KGQpO3ZhciBpPXIoZC5vd25lckRvY3VtZW50KTtkYi5zZXQoZCxpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSl9cmV0dXJuIGM/ZmIuc2V0KGQsYyk6Zz90KGQsYSxoKTpmJiZwKGQuY29udGVudCksITB9LEhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwPXA7dmFyIGhiPWEuSFRNTFVua25vd25FbGVtZW50fHxIVE1MRWxlbWVudCxpYj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGRiLmdldCh0aGlzKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9O198fChIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGhiLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixpYikpO3ZhciBqYj1uZXcgUyxrYj1uZXcgUyxsYj1uZXcgUzt3LnByb3RvdHlwZT1SKHtfX3Byb3RvX186ZS5wcm90b3R5cGUsZ2V0IHZhbHVlKCl7fSxib3VuZFZhbHVlQ2hhbmdlZDpmdW5jdGlvbigpe30sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZHx8KHRoaXMubm9kZS5pbnB1dHMudW5iaW5kKHRoaXMucHJvcGVydHkpLHRoaXMubm9kZT12b2lkIDAsdGhpcy5tb2RlbD12b2lkIDAsdGhpcy5jbG9zZWQ9ITApfX0pLHEoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUse2NyZWF0ZUJpbmRpbmc6ZnVuY3Rpb24oYSxiLGMpe2lmKGE9PT1VfHxhPT09Vnx8YT09PVcpe3ZhciBkPW5iLmdldCh0aGlzKTtyZXR1cm4gZHx8KGQ9bmV3IE4odGhpcyksbmIuc2V0KHRoaXMsZCkpLG5ldyB3KGQsYSxiLGN8fCIiKX1yZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcuY2FsbCh0aGlzLGEsYixjKX0sY3JlYXRlSW5zdGFuY2U6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVmLmNvbnRlbnQsZT1nYi5nZXQoZCk7ZXx8KGU9SihkKXx8W10sZ2Iuc2V0KGQsZSkpO3ZhciBmPWUuaGFzU3ViVGVtcGxhdGU/SShkKTpkLmNsb25lTm9kZSghMCk7cmV0dXJuIEcoZixlLGEsYixjKSxMKGYsYSksZn0sZ2V0IG1vZGVsKCl7cmV0dXJuIGpiLmdldCh0aGlzKX0sc2V0IG1vZGVsKGEpe2piLnNldCh0aGlzLGEpLHYodGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4ga2IuZ2V0KHRoaXMpfSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe2tiLnNldCh0aGlzLGEpLHYodGhpcyl9LGdldCByZWYoKXt2YXIgYSxiPXRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKTtpZihiKXt2YXIgZD1jKHRoaXMpO2QmJihhPWQuZ2V0RWxlbWVudEJ5SWQoYikpfWlmKGF8fChhPWZiLmdldCh0aGlzKSksIWEpcmV0dXJuIHRoaXM7dmFyIGU9YS5yZWY7cmV0dXJuIGU/ZTphfX0pLEYucHJvdG90eXBlPXtjbG9zZTpmdW5jdGlvbigpe3ZhciBhPW5iLmdldCh0aGlzLm5vZGUpO2EmJmEuY2xvc2UoKX19O3ZhciBtYj1uZXcgUztPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT1tYi5nZXQodGhpcyk7cmV0dXJuIGE/YTp0aGlzLnBhcmVudE5vZGU/dGhpcy5wYXJlbnROb2RlLnRlbXBsYXRlSW5zdGFuY2U6dm9pZCAwfX0pLE0ucHJvdG90eXBlPXtzZXQgY29tYmluYXRvcihhKXt0aGlzLmNvbWJpbmF0b3JfPWEsdGhpcy5zY2hlZHVsZVJlc29sdmUoKX0scGF0aFZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIsYyl7dGhpcy52YWx1ZXNbY109YSx0aGlzLnNjaGVkdWxlUmVzb2x2ZSgpfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnVuYmluZChhKSx0aGlzLnNpemUrKzt2YXIgZD1uZXcgUGF0aE9ic2VydmVyKGIsYyx0aGlzLnBhdGhWYWx1ZUNoYW5nZWQsdGhpcyxhKTt0aGlzLm9ic2VydmVyc1thXT1kLHRoaXMucGF0aFZhbHVlQ2hhbmdlZChkLnZhbHVlLHZvaWQgMCxhKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7dGhpcy5vYnNlcnZlcnNbYV0mJih0aGlzLnNpemUtLSx0aGlzLm9ic2VydmVyc1thXS5jbG9zZSgpLGRlbGV0ZSB0aGlzLm9ic2VydmVyc1thXSxkZWxldGUgdGhpcy52YWx1ZXNbYV0sYnx8dGhpcy5zY2hlZHVsZVJlc29sdmUoKSl9LHNjaGVkdWxlUmVzb2x2ZTpmdW5jdGlvbigpe3RoaXMuc2NoZWR1bGVkfHwodGhpcy5zY2hlZHVsZWQ9ITAsYmIodGhpcykpfSxyZXNvbHZlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXtpZighdGhpcy5jb21iaW5hdG9yXyl0aHJvdyBFcnJvcigiQ29tcG91bmRCaW5kaW5nIGF0dGVtcHRlZCB0byByZXNvbHZlIHdpdGhvdXQgYSBjb21iaW5hdG9yIik7dGhpcy52YWx1ZT10aGlzLmNvbWJpbmF0b3JfKHRoaXMudmFsdWVzKSx0aGlzLnNjaGVkdWxlZD0hMX19LHVub2JzZXJ2ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlKCl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZWR8fChPYmplY3Qua2V5cyh0aGlzLm9ic2VydmVycykuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnVuYmluZChhLCEwKX0sdGhpcyksdGhpcy5jbG9zZWQ9ITAsdGhpcy52YWx1ZT12b2lkIDApfX0sTi5wcm90b3R5cGU9e3Jlc29sdmVJbnB1dHM6ZnVuY3Rpb24oYSl7dGhpcy5jbG9zZWR8fChXIGluIGEmJiFhW1ddP3RoaXMudmFsdWVDaGFuZ2VkKHZvaWQgMCk6ViBpbiBhP3RoaXMudmFsdWVDaGFuZ2VkKGFbVl0pOlUgaW4gYXx8VyBpbiBhP3RoaXMudmFsdWVDaGFuZ2VkKFthW1VdXSk6dGhpcy52YWx1ZUNoYW5nZWQodm9pZCAwKSl9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhKXtBcnJheS5pc0FycmF5KGEpfHwoYT12b2lkIDApO3ZhciBiPXRoaXMuaXRlcmF0ZWRWYWx1ZTt0aGlzLnVub2JzZXJ2ZSgpLHRoaXMuaXRlcmF0ZWRWYWx1ZT1hLHRoaXMuaXRlcmF0ZWRWYWx1ZSYmKHRoaXMuYXJyYXlPYnNlcnZlcj1uZXcgQXJyYXlPYnNlcnZlcih0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5oYW5kbGVTcGxpY2VzLHRoaXMpKTt2YXIgYz1BcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXModGhpcy5pdGVyYXRlZFZhbHVlfHxbXSxifHxbXSk7Yy5sZW5ndGgmJnRoaXMuaGFuZGxlU3BsaWNlcyhjKSx0aGlzLmlucHV0cy5zaXplfHwobmIuZGVsZXRlKHRoaXMpLHRoaXMuY2xvc2UoKSl9LGdldFRlcm1pbmF0b3JBdDpmdW5jdGlvbihhKXtpZigtMT09YSlyZXR1cm4gdGhpcy50ZW1wbGF0ZUVsZW1lbnRfO3ZhciBiPXRoaXMudGVybWluYXRvcnNbMiphXTtpZihiLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fHRoaXMudGVtcGxhdGVFbGVtZW50Xz09PWIpcmV0dXJuIGI7dmFyIGM9bmIuZ2V0KGIpO3JldHVybiBjP2MuZ2V0VGVybWluYXRvckF0KGMudGVybWluYXRvcnMubGVuZ3RoLzItMSk6Yn0saW5zZXJ0SW5zdGFuY2VBdDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmdldFRlcm1pbmF0b3JBdChhLTEpLGY9Yj9iLmxhc3RDaGlsZHx8ZTpjW2MubGVuZ3RoLTFdfHxlO3RoaXMudGVybWluYXRvcnMuc3BsaWNlKDIqYSwwLGYsZCk7dmFyIGc9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGUsaD1lLm5leHRTaWJsaW5nO2lmKGIpcmV0dXJuIGcuaW5zZXJ0QmVmb3JlKGIsaCksdm9pZCAwO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKWcuaW5zZXJ0QmVmb3JlKGNbaV0saCl9LGV4dHJhY3RJbnN0YW5jZUF0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9dGhpcy5nZXRUZXJtaW5hdG9yQXQoYS0xKSxkPXRoaXMuZ2V0VGVybWluYXRvckF0KGEpO2IuYm91bmQ9dGhpcy50ZXJtaW5hdG9yc1syKmErMV0sdGhpcy50ZXJtaW5hdG9ycy5zcGxpY2UoMiphLDIpO2Zvcih2YXIgZT10aGlzLnRlbXBsYXRlRWxlbWVudF8ucGFyZW50Tm9kZTtkIT09Yzspe3ZhciBmPWMubmV4dFNpYmxpbmc7Zj09ZCYmKGQ9YyksZS5yZW1vdmVDaGlsZChmKSxiLnB1c2goZil9cmV0dXJuIGJ9LGdldEluc3RhbmNlTW9kZWw6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMmJmNbWV07cmV0dXJuIGQmJiJmdW5jdGlvbiI9PXR5cGVvZiBkP2QoYSxiKTpifSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCl7dmFyIGI9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfO2lmKCFiLnBhcmVudE5vZGV8fCFiLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpcmV0dXJuIHRoaXMuY2xvc2UoKSxuYi5kZWxldGUodGhpcyksdm9pZCAwO3ZhciBjPWIuYmluZGluZ0RlbGVnYXRlLGQ9bmV3IE8sZT0wO2EuZm9yRWFjaChmdW5jdGlvbihhKXthLnJlbW92ZWQuZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz10aGlzLmV4dHJhY3RJbnN0YW5jZUF0KGEuaW5kZXgrZSk7ZC5zZXQoYixjKX0sdGhpcyksZS09YS5hZGRlZENvdW50fSx0aGlzKSxhLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBlPWEuaW5kZXg7ZTxhLmluZGV4K2EuYWRkZWRDb3VudDtlKyspe3ZhciBmLGc9dGhpcy5pdGVyYXRlZFZhbHVlW2VdLGg9dm9pZCAwLGk9ZC5nZXQoZyk7aWYoaSlkLmRlbGV0ZShnKSxmPWkuYm91bmQ7ZWxzZXtmPVtdO3ZhciBqPXRoaXMuZ2V0SW5zdGFuY2VNb2RlbChiLGcsYyk7aD10aGlzLnRlbXBsYXRlRWxlbWVudF8uY3JlYXRlSW5zdGFuY2UoaixjLGYpfXRoaXMuaW5zZXJ0SW5zdGFuY2VBdChlLGgsaSxmKX19LHRoaXMpLGQuZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5ib3VuZCxjPTA7YzxiLmxlbmd0aDtjKyspYltjXS5jbG9zZSgpfSl9fSx1bm9ic2VydmU6ZnVuY3Rpb24oKXt0aGlzLmFycmF5T2JzZXJ2ZXImJih0aGlzLmFycmF5T2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwKX0sY2xvc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5jbG9zZWQpe3RoaXMudW5vYnNlcnZlKCk7Zm9yKHZhciBhPTE7YTx0aGlzLnRlcm1pbmF0b3JzLmxlbmd0aDthKz0yKWZvcih2YXIgYj10aGlzLnRlcm1pbmF0b3JzW2FdLGM9MDtjPGIubGVuZ3RoO2MrKyliW2NdLmNsb3NlKCk7dGhpcy50ZXJtaW5hdG9ycy5sZW5ndGg9MCx0aGlzLmlucHV0cy5jbG9zZSgpLHRoaXMuY2xvc2VkPSEwfX19O3ZhciBuYj1uZXcgUzthLkNvbXBvdW5kQmluZGluZz1NLEhUTUxUZW1wbGF0ZUVsZW1lbnQuZm9yQWxsVGVtcGxhdGVzRnJvbV89b30odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFTU0VSVDogIitiKX1mdW5jdGlvbiBjKGEpe3JldHVybiBhPj00OCYmNTc+PWF9ZnVuY3Rpb24gZChhKXtyZXR1cm4gMzI9PT1hfHw5PT09YXx8MTE9PT1hfHwxMj09PWF8fDE2MD09PWF8fGE+PTU3NjAmJiLhmoDhoI7igIDigIHigILigIPigITigIXigIbigIfigIjigInigIrigK/igZ/jgIAiLmluZGV4T2YoU3RyaW5nLmZyb21DaGFyQ29kZShhKSk+MH1mdW5jdGlvbiBlKGEpe3JldHVybiAxMD09PWF8fDEzPT09YXx8ODIzMj09PWF8fDgyMzM9PT1hfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIDM2PT09YXx8OTU9PT1hfHxhPj02NSYmOTA+PWF8fGE+PTk3JiYxMjI+PWF9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YXx8YT49NDgmJjU3Pj1hfWZ1bmN0aW9uIGgoYSl7cmV0dXJuInRoaXMiPT09YX1mdW5jdGlvbiBpKCl7Zm9yKDtiYj5hYiYmZChfLmNoYXJDb2RlQXQoYWIpKTspKythYn1mdW5jdGlvbiBqKCl7dmFyIGEsYjtmb3IoYT1hYisrO2JiPmFiJiYoYj1fLmNoYXJDb2RlQXQoYWIpLGcoYikpOykrK2FiO3JldHVybiBfLnNsaWNlKGEsYWIpfWZ1bmN0aW9uIGsoKXt2YXIgYSxiLGM7cmV0dXJuIGE9YWIsYj1qKCksYz0xPT09Yi5sZW5ndGg/WC5JZGVudGlmaWVyOmgoYik/WC5LZXl3b3JkOiJudWxsIj09PWI/WC5OdWxsTGl0ZXJhbDoidHJ1ZSI9PT1ifHwiZmFsc2UiPT09Yj9YLkJvb2xlYW5MaXRlcmFsOlguSWRlbnRpZmllcix7dHlwZTpjLHZhbHVlOmIscmFuZ2U6W2EsYWJdfX1mdW5jdGlvbiBsKCl7dmFyIGEsYixjLGQsZT1hYixmPV8uY2hhckNvZGVBdChhYiksZz1fW2FiXTtzd2l0Y2goZil7Y2FzZSA0NjpjYXNlIDQwOmNhc2UgNDE6Y2FzZSA1OTpjYXNlIDQ0OmNhc2UgMTIzOmNhc2UgMTI1OmNhc2UgOTE6Y2FzZSA5MzpjYXNlIDU4OmNhc2UgNjM6Y2FzZSAxMjY6cmV0dXJuKythYix7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShmKSxyYW5nZTpbZSxhYl19O2RlZmF1bHQ6aWYoYT1fLmNoYXJDb2RlQXQoYWIrMSksNjE9PT1hKXN3aXRjaChmKXtjYXNlIDM3OmNhc2UgMzg6Y2FzZSA0MjpjYXNlIDQzOmNhc2UgNDU6Y2FzZSA0NzpjYXNlIDYwOmNhc2UgNjI6Y2FzZSA5NDpjYXNlIDEyNDpyZXR1cm4gYWIrPTIse3R5cGU6WC5QdW5jdHVhdG9yLHZhbHVlOlN0cmluZy5mcm9tQ2hhckNvZGUoZikrU3RyaW5nLmZyb21DaGFyQ29kZShhKSxyYW5nZTpbZSxhYl19O2Nhc2UgMzM6Y2FzZSA2MTpyZXR1cm4gYWIrPTIsNjE9PT1fLmNoYXJDb2RlQXQoYWIpJiYrK2FiLHt0eXBlOlguUHVuY3R1YXRvcix2YWx1ZTpfLnNsaWNlKGUsYWIpLHJhbmdlOltlLGFiXX19fXJldHVybiBiPV9bYWIrMV0sYz1fW2FiKzJdLGQ9X1thYiszXSwiPiI9PT1nJiYiPiI9PT1iJiYiPiI9PT1jJiYiPSI9PT1kPyhhYis9NCx7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6Ij4+Pj0iLHJhbmdlOltlLGFiXX0pOiI+Ij09PWcmJiI+Ij09PWImJiI+Ij09PWM/KGFiKz0zLHt0eXBlOlguUHVuY3R1YXRvcix2YWx1ZToiPj4+IixyYW5nZTpbZSxhYl19KToiPCI9PT1nJiYiPCI9PT1iJiYiPSI9PT1jPyhhYis9Myx7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6Ijw8PSIscmFuZ2U6W2UsYWJdfSk6Ij4iPT09ZyYmIj4iPT09YiYmIj0iPT09Yz8oYWIrPTMse3R5cGU6WC5QdW5jdHVhdG9yLHZhbHVlOiI+Pj0iLHJhbmdlOltlLGFiXX0pOmc9PT1iJiYiKy08PiZ8Ii5pbmRleE9mKGcpPj0wPyhhYis9Mix7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6ZytiLHJhbmdlOltlLGFiXX0pOiI8Pj0hKy0qJSZ8Xi8iLmluZGV4T2YoZyk+PTA/KCsrYWIse3R5cGU6WC5QdW5jdHVhdG9yLHZhbHVlOmcscmFuZ2U6W2UsYWJdfSk6KHMoe30sJC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx2b2lkIDApfWZ1bmN0aW9uIG0oKXt2YXIgYSxkLGU7aWYoZT1fW2FiXSxiKGMoZS5jaGFyQ29kZUF0KDApKXx8Ii4iPT09ZSwiTnVtZXJpYyBsaXRlcmFsIG11c3Qgc3RhcnQgd2l0aCBhIGRlY2ltYWwgZGlnaXQgb3IgYSBkZWNpbWFsIHBvaW50IiksZD1hYixhPSIiLCIuIiE9PWUpe2ZvcihhPV9bYWIrK10sZT1fW2FiXSwiMCI9PT1hJiZlJiZjKGUuY2hhckNvZGVBdCgwKSkmJnMoe30sJC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKTtjKF8uY2hhckNvZGVBdChhYikpOylhKz1fW2FiKytdO2U9X1thYl19aWYoIi4iPT09ZSl7Zm9yKGErPV9bYWIrK107YyhfLmNoYXJDb2RlQXQoYWIpKTspYSs9X1thYisrXTtlPV9bYWJdfWlmKCJlIj09PWV8fCJFIj09PWUpaWYoYSs9X1thYisrXSxlPV9bYWJdLCgiKyI9PT1lfHwiLSI9PT1lKSYmKGErPV9bYWIrK10pLGMoXy5jaGFyQ29kZUF0KGFiKSkpZm9yKDtjKF8uY2hhckNvZGVBdChhYikpOylhKz1fW2FiKytdO2Vsc2Ugcyh7fSwkLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpO3JldHVybiBmKF8uY2hhckNvZGVBdChhYikpJiZzKHt9LCQuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIikse3R5cGU6WC5OdW1lcmljTGl0ZXJhbCx2YWx1ZTpwYXJzZUZsb2F0KGEpLHJhbmdlOltkLGFiXX19ZnVuY3Rpb24gbigpe3ZhciBhLGMsZCxmPSIiLGc9ITE7Zm9yKGE9X1thYl0sYigiJyI9PT1hfHwnIic9PT1hLCJTdHJpbmcgbGl0ZXJhbCBtdXN0IHN0YXJ0cyB3aXRoIGEgcXVvdGUiKSxjPWFiLCsrYWI7YmI+YWI7KXtpZihkPV9bYWIrK10sZD09PWEpe2E9IiI7YnJlYWt9aWYoIlxcIj09PWQpaWYoZD1fW2FiKytdLGQmJmUoZC5jaGFyQ29kZUF0KDApKSkiXHIiPT09ZCYmIlxuIj09PV9bYWJdJiYrK2FiO2Vsc2Ugc3dpdGNoKGQpe2Nhc2UibiI6Zis9IlxuIjticmVhaztjYXNlInIiOmYrPSJcciI7YnJlYWs7Y2FzZSJ0IjpmKz0iCSI7YnJlYWs7Y2FzZSJiIjpmKz0iXGIiO2JyZWFrO2Nhc2UiZiI6Zis9IlxmIjticmVhaztjYXNlInYiOmYrPSILIjticmVhaztkZWZhdWx0OmYrPWR9ZWxzZXtpZihlKGQuY2hhckNvZGVBdCgwKSkpYnJlYWs7Zis9ZH19cmV0dXJuIiIhPT1hJiZzKHt9LCQuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIikse3R5cGU6WC5TdHJpbmdMaXRlcmFsLHZhbHVlOmYsb2N0YWw6ZyxyYW5nZTpbYyxhYl19fWZ1bmN0aW9uIG8oYSl7cmV0dXJuIGEudHlwZT09PVguSWRlbnRpZmllcnx8YS50eXBlPT09WC5LZXl3b3JkfHxhLnR5cGU9PT1YLkJvb2xlYW5MaXRlcmFsfHxhLnR5cGU9PT1YLk51bGxMaXRlcmFsfWZ1bmN0aW9uIHAoKXt2YXIgYTtyZXR1cm4gaSgpLGFiPj1iYj97dHlwZTpYLkVPRixyYW5nZTpbYWIsYWJdfTooYT1fLmNoYXJDb2RlQXQoYWIpLDQwPT09YXx8NDE9PT1hfHw1OD09PWE/bCgpOjM5PT09YXx8MzQ9PT1hP24oKTpmKGEpP2soKTo0Nj09PWE/YyhfLmNoYXJDb2RlQXQoYWIrMSkpP20oKTpsKCk6YyhhKT9tKCk6bCgpKX1mdW5jdGlvbiBxKCl7dmFyIGE7cmV0dXJuIGE9ZGIsYWI9YS5yYW5nZVsxXSxkYj1wKCksYWI9YS5yYW5nZVsxXSxhfWZ1bmN0aW9uIHIoKXt2YXIgYTthPWFiLGRiPXAoKSxhYj1hfWZ1bmN0aW9uIHMoYSxjKXt2YXIgZCxlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSxmPWMucmVwbGFjZSgvJShcZCkvZyxmdW5jdGlvbihhLGMpe3JldHVybiBiKGM8ZS5sZW5ndGgsIk1lc3NhZ2UgcmVmZXJlbmNlIG11c3QgYmUgaW4gcmFuZ2UiKSxlW2NdfSk7dGhyb3cgZD1uZXcgRXJyb3IoZiksZC5pbmRleD1hYixkLmRlc2NyaXB0aW9uPWYsZH1mdW5jdGlvbiB0KGEpe3MoYSwkLlVuZXhwZWN0ZWRUb2tlbixhLnZhbHVlKX1mdW5jdGlvbiB1KGEpe3ZhciBiPXEoKTsoYi50eXBlIT09WC5QdW5jdHVhdG9yfHxiLnZhbHVlIT09YSkmJnQoYil9ZnVuY3Rpb24gdihhKXtyZXR1cm4gZGIudHlwZT09PVguUHVuY3R1YXRvciYmZGIudmFsdWU9PT1hfWZ1bmN0aW9uIHcoYSl7cmV0dXJuIGRiLnR5cGU9PT1YLktleXdvcmQmJmRiLnZhbHVlPT09YX1mdW5jdGlvbiB4KCl7cmV0dXJuIDU5PT09Xy5jaGFyQ29kZUF0KGFiKT8ocSgpLHZvaWQgMCk6KGkoKSx2KCI7Iik/KHEoKSx2b2lkIDApOihkYi50eXBlPT09WC5FT0Z8fHYoIn0iKXx8dChkYiksdm9pZCAwKSl9ZnVuY3Rpb24geSgpe3ZhciBhPVtdO2Zvcih1KCJbIik7IXYoIl0iKTspdigiLCIpPyhxKCksYS5wdXNoKG51bGwpKTooYS5wdXNoKE8oKSksdigiXSIpfHx1KCIsIikpO3JldHVybiB1KCJdIiksY2IuY3JlYXRlQXJyYXlFeHByZXNzaW9uKGEpfWZ1bmN0aW9uIHooKXt2YXIgYTtyZXR1cm4gaSgpLGE9cSgpLGEudHlwZT09PVguU3RyaW5nTGl0ZXJhbHx8YS50eXBlPT09WC5OdW1lcmljTGl0ZXJhbD9jYi5jcmVhdGVMaXRlcmFsKGEpOmNiLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24gQSgpe3ZhciBhLGI7cmV0dXJuIGE9ZGIsaSgpLChhLnR5cGU9PT1YLkVPRnx8YS50eXBlPT09WC5QdW5jdHVhdG9yKSYmdChhKSxiPXooKSx1KCI6IiksY2IuY3JlYXRlUHJvcGVydHkoImluaXQiLGIsTygpKX1mdW5jdGlvbiBCKCl7dmFyIGE9W107Zm9yKHUoInsiKTshdigifSIpOylhLnB1c2goQSgpKSx2KCJ9Iil8fHUoIiwiKTtyZXR1cm4gdSgifSIpLGNiLmNyZWF0ZU9iamVjdEV4cHJlc3Npb24oYSl9ZnVuY3Rpb24gQygpe3ZhciBhO3JldHVybiB1KCIoIiksYT1QKCksdSgiKSIpLGF9ZnVuY3Rpb24gRCgpe3ZhciBhLGIsYztyZXR1cm4gdigiKCIpP0MoKTooYT1kYi50eXBlLGE9PT1YLklkZW50aWZpZXI/Yz1jYi5jcmVhdGVJZGVudGlmaWVyKHEoKS52YWx1ZSk6YT09PVguU3RyaW5nTGl0ZXJhbHx8YT09PVguTnVtZXJpY0xpdGVyYWw/Yz1jYi5jcmVhdGVMaXRlcmFsKHEoKSk6YT09PVguS2V5d29yZD93KCJ0aGlzIikmJihxKCksYz1jYi5jcmVhdGVUaGlzRXhwcmVzc2lvbigpKTphPT09WC5Cb29sZWFuTGl0ZXJhbD8oYj1xKCksYi52YWx1ZT0idHJ1ZSI9PT1iLnZhbHVlLGM9Y2IuY3JlYXRlTGl0ZXJhbChiKSk6YT09PVguTnVsbExpdGVyYWw/KGI9cSgpLGIudmFsdWU9bnVsbCxjPWNiLmNyZWF0ZUxpdGVyYWwoYikpOnYoIlsiKT9jPXkoKTp2KCJ7IikmJihjPUIoKSksYz9jOih0KHEoKSksdm9pZCAwKSl9ZnVuY3Rpb24gRSgpe3ZhciBhPVtdO2lmKHUoIigiKSwhdigiKSIpKWZvcig7YmI+YWImJihhLnB1c2goTygpKSwhdigiKSIpKTspdSgiLCIpO3JldHVybiB1KCIpIiksYX1mdW5jdGlvbiBGKCl7dmFyIGE7cmV0dXJuIGE9cSgpLG8oYSl8fHQoYSksY2IuY3JlYXRlSWRlbnRpZmllcihhLnZhbHVlKX1mdW5jdGlvbiBHKCl7cmV0dXJuIHUoIi4iKSxGKCl9ZnVuY3Rpb24gSCgpe3ZhciBhO3JldHVybiB1KCJbIiksYT1QKCksdSgiXSIpLGF9ZnVuY3Rpb24gSSgpe3ZhciBhLGIsYztmb3IoYT1EKCk7digiLiIpfHx2KCJbIil8fHYoIigiKTspdigiKCIpPyhiPUUoKSxhPWNiLmNyZWF0ZUNhbGxFeHByZXNzaW9uKGEsYikpOnYoIlsiKT8oYz1IKCksYT1jYi5jcmVhdGVNZW1iZXJFeHByZXNzaW9uKCJbIixhLGMpKTooYz1HKCksYT1jYi5jcmVhdGVNZW1iZXJFeHByZXNzaW9uKCIuIixhLGMpKTtyZXR1cm4gYX1mdW5jdGlvbiBKKCl7dmFyIGE7cmV0dXJuIGE9SSgpLGRiLnR5cGU9PT1YLlB1bmN0dWF0b3ImJih2KCIrKyIpfHx2KCItLSIpKSYmcyh7fSwkLlVuZXhwZWN0ZWRUb2tlbiksYX1mdW5jdGlvbiBLKCl7dmFyIGEsYjtyZXR1cm4gZGIudHlwZSE9PVguUHVuY3R1YXRvciYmZGIudHlwZSE9PVguS2V5d29yZD9iPUooKTp2KCIrKyIpfHx2KCItLSIpP3Moe30sJC5VbmV4cGVjdGVkVG9rZW4pOnYoIisiKXx8digiLSIpfHx2KCJ+Iil8fHYoIiEiKT8oYT1xKCksYj1LKCksYj1jYi5jcmVhdGVVbmFyeUV4cHJlc3Npb24oYS52YWx1ZSxiKSk6dygiZGVsZXRlIil8fHcoInZvaWQiKXx8dygidHlwZW9mIik/cyh7fSwkLlVuZXhwZWN0ZWRUb2tlbik6Yj1KKCksYn1mdW5jdGlvbiBMKGEsYil7dmFyIGM9MDtpZihhLnR5cGUhPT1YLlB1bmN0dWF0b3ImJmEudHlwZSE9PVguS2V5d29yZClyZXR1cm4gMDtzd2l0Y2goYS52YWx1ZSl7Y2FzZSJ8fCI6Yz0xO2JyZWFrO2Nhc2UiJiYiOmM9MjticmVhaztjYXNlInwiOmM9MzticmVhaztjYXNlIl4iOmM9NDticmVhaztjYXNlIiYiOmM9NTticmVhaztjYXNlIj09IjpjYXNlIiE9IjpjYXNlIj09PSI6Y2FzZSIhPT0iOmM9NjticmVhaztjYXNlIjwiOmNhc2UiPiI6Y2FzZSI8PSI6Y2FzZSI+PSI6Y2FzZSJpbnN0YW5jZW9mIjpjPTc7YnJlYWs7Y2FzZSJpbiI6Yz1iPzc6MDticmVhaztjYXNlIjw8IjpjYXNlIj4+IjpjYXNlIj4+PiI6Yz04O2JyZWFrO2Nhc2UiKyI6Y2FzZSItIjpjPTk7YnJlYWs7Y2FzZSIqIjpjYXNlIi8iOmNhc2UiJSI6Yz0xMX1yZXR1cm4gY31mdW5jdGlvbiBNKCl7dmFyIGEsYixjLGQsZSxmLGcsaCxpO2lmKGQ9ZWIuYWxsb3dJbixlYi5hbGxvd0luPSEwLGg9SygpLGI9ZGIsYz1MKGIsZCksMD09PWMpcmV0dXJuIGg7Zm9yKGIucHJlYz1jLHEoKSxmPUsoKSxlPVtoLGIsZl07KGM9TChkYixkKSk+MDspe2Zvcig7ZS5sZW5ndGg+MiYmYzw9ZVtlLmxlbmd0aC0yXS5wcmVjOylmPWUucG9wKCksZz1lLnBvcCgpLnZhbHVlLGg9ZS5wb3AoKSxhPWNiLmNyZWF0ZUJpbmFyeUV4cHJlc3Npb24oZyxoLGYpLGUucHVzaChhKTtiPXEoKSxiLnByZWM9YyxlLnB1c2goYiksYT1LKCksZS5wdXNoKGEpfWZvcihlYi5hbGxvd0luPWQsaT1lLmxlbmd0aC0xLGE9ZVtpXTtpPjE7KWE9Y2IuY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihlW2ktMV0udmFsdWUsZVtpLTJdLGEpLGktPTI7cmV0dXJuIGF9ZnVuY3Rpb24gTigpe3ZhciBhLGIsYyxkO3JldHVybiBhPU0oKSx2KCI/IikmJihxKCksYj1lYi5hbGxvd0luLGViLmFsbG93SW49ITAsYz1PKCksZWIuYWxsb3dJbj1iLHUoIjoiKSxkPU8oKSxhPWNiLmNyZWF0ZUNvbmRpdGlvbmFsRXhwcmVzc2lvbihhLGMsZCkpLGF9ZnVuY3Rpb24gTygpe3ZhciBhLGIsYztyZXR1cm4gYT1kYixjPWI9TigpfWZ1bmN0aW9uIFAoKXt2YXIgYTtyZXR1cm4gYT1PKCl9ZnVuY3Rpb24gUSgpe3JldHVybiB1KCI7IiksY2IuY3JlYXRlRW1wdHlTdGF0ZW1lbnQoKX1mdW5jdGlvbiBSKCl7dmFyIGE9UCgpO3JldHVybiB4KCksY2IuY3JlYXRlRXhwcmVzc2lvblN0YXRlbWVudChhKX1mdW5jdGlvbiBTKCl7dmFyIGEsYixjLGQ9ZGIudHlwZTtpZihkPT09WC5FT0YmJnQoZGIpLGkoKSxkPT09WC5QdW5jdHVhdG9yKXN3aXRjaChkYi52YWx1ZSl7Y2FzZSI7IjpyZXR1cm4gUSgpO2Nhc2UiKCI6cmV0dXJuIFIoKX1yZXR1cm4gYT1QKCksYS50eXBlPT09Wi5JZGVudGlmaWVyJiZ2KCI6Iik/KHEoKSxjPSIkIithLm5hbWUsT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGViLmxhYmVsU2V0LGMpJiZzKHt9LCQuUmVkZWNsYXJhdGlvbiwiTGFiZWwiLGEubmFtZSksZWIubGFiZWxTZXRbY109ITAsYj1TKCksZGVsZXRlIGViLmxhYmVsU2V0W2NdLGNiLmNyZWF0ZUxhYmVsZWRTdGF0ZW1lbnQoYSxiKSk6KHgoKSxjYi5jcmVhdGVFeHByZXNzaW9uU3RhdGVtZW50KGEpKX1mdW5jdGlvbiBUKCl7cmV0dXJuIGRiLnR5cGU9PT1YLktleXdvcmQ/UygpOmRiLnR5cGUhPT1YLkVPRj9TKCk6dm9pZCAwfWZ1bmN0aW9uIFUoKXtmb3IodmFyIGEsYj1bXTtiYj5hYiYmKGE9VCgpLCJ1bmRlZmluZWQiIT10eXBlb2YgYSk7KWIucHVzaChhKTtyZXR1cm4gYn1mdW5jdGlvbiBWKCl7dmFyIGE7cmV0dXJuIGkoKSxyKCksYT1VKCksY2IuY3JlYXRlUHJvZ3JhbShhKX1mdW5jdGlvbiBXKGEsYil7dmFyIGM7cmV0dXJuIGM9U3RyaW5nLCJzdHJpbmciPT10eXBlb2YgYXx8YSBpbnN0YW5jZW9mIFN0cmluZ3x8KGE9YyhhKSksY2I9YixfPWEsYWI9MCxiYj1fLmxlbmd0aCxkYj1udWxsLGViPXthbGxvd0luOiEwLGxhYmVsU2V0Ont9fSxiYj4wJiYidW5kZWZpbmVkIj09dHlwZW9mIF9bMF0mJmEgaW5zdGFuY2VvZiBTdHJpbmcmJihfPWEudmFsdWVPZigpKSxWKCl9dmFyIFgsWSxaLCQsXyxhYixiYixjYixkYixlYjtYPXtCb29sZWFuTGl0ZXJhbDoxLEVPRjoyLElkZW50aWZpZXI6MyxLZXl3b3JkOjQsTnVsbExpdGVyYWw6NSxOdW1lcmljTGl0ZXJhbDo2LFB1bmN0dWF0b3I6NyxTdHJpbmdMaXRlcmFsOjh9LFk9e30sWVtYLkJvb2xlYW5MaXRlcmFsXT0iQm9vbGVhbiIsWVtYLkVPRl09IjxlbmQ+IixZW1guSWRlbnRpZmllcl09IklkZW50aWZpZXIiLFlbWC5LZXl3b3JkXT0iS2V5d29yZCIsWVtYLk51bGxMaXRlcmFsXT0iTnVsbCIsWVtYLk51bWVyaWNMaXRlcmFsXT0iTnVtZXJpYyIsWVtYLlB1bmN0dWF0b3JdPSJQdW5jdHVhdG9yIixZW1guU3RyaW5nTGl0ZXJhbF09IlN0cmluZyIsWj17QXJyYXlFeHByZXNzaW9uOiJBcnJheUV4cHJlc3Npb24iLEJpbmFyeUV4cHJlc3Npb246IkJpbmFyeUV4cHJlc3Npb24iLENhbGxFeHByZXNzaW9uOiJDYWxsRXhwcmVzc2lvbiIsQ29uZGl0aW9uYWxFeHByZXNzaW9uOiJDb25kaXRpb25hbEV4cHJlc3Npb24iLEVtcHR5U3RhdGVtZW50OiJFbXB0eVN0YXRlbWVudCIsRXhwcmVzc2lvblN0YXRlbWVudDoiRXhwcmVzc2lvblN0YXRlbWVudCIsSWRlbnRpZmllcjoiSWRlbnRpZmllciIsTGl0ZXJhbDoiTGl0ZXJhbCIsTGFiZWxlZFN0YXRlbWVudDoiTGFiZWxlZFN0YXRlbWVudCIsTG9naWNhbEV4cHJlc3Npb246IkxvZ2ljYWxFeHByZXNzaW9uIixNZW1iZXJFeHByZXNzaW9uOiJNZW1iZXJFeHByZXNzaW9uIixPYmplY3RFeHByZXNzaW9uOiJPYmplY3RFeHByZXNzaW9uIixQcm9ncmFtOiJQcm9ncmFtIixQcm9wZXJ0eToiUHJvcGVydHkiLFRoaXNFeHByZXNzaW9uOiJUaGlzRXhwcmVzc2lvbiIsVW5hcnlFeHByZXNzaW9uOiJVbmFyeUV4cHJlc3Npb24ifSwkPXtVbmV4cGVjdGVkVG9rZW46IlVuZXhwZWN0ZWQgdG9rZW4gJTAiLFVua25vd25MYWJlbDoiVW5kZWZpbmVkIGxhYmVsICclMCciLFJlZGVjbGFyYXRpb246IiUwICclMScgaGFzIGFscmVhZHkgYmVlbiBkZWNsYXJlZCJ9LGEuZXNwcmltYT17cGFyc2U6V319KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixkLGUpe2lmKGUubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSYmIlRFTVBMQVRFIj09PWUudGFnTmFtZSYmKCJiaW5kIj09PWR8fCJyZXBlYXQiPT09ZCkpe3ZhciBmLGcsaD1iLm1hdGNoKHIpO2lmKGg/KGY9aFsxXSxnPWhbMl0pOihoPWIubWF0Y2gocyksaCYmKGY9aFsyXSxnPWhbMV0pKSxoKXt2YXIgaTtpZihnPWcudHJpbSgpLGcubWF0Y2gocSkpaT1uZXcgQ29tcG91bmRCaW5kaW5nKGZ1bmN0aW9uKGEpe3JldHVybiBhLnBhdGh9KSxpLmJpbmQoInBhdGgiLGEsZyk7ZWxzZSB0cnl7aT1jKGEsZyl9Y2F0Y2goail7Y29uc29sZS5lcnJvcigiSW52YWxpZCBleHByZXNzaW9uIHN5bnRheDogIitnLGopfWlmKGkpcmV0dXJuIHQuc2V0KGUsZiksaX19fWZ1bmN0aW9uIGMoYSxiKXt0cnl7dmFyIGM9bmV3IGY7aWYoZXNwcmltYS5wYXJzZShiLGMpLCFjLnN0YXRlbWVudHMubGVuZ3RoJiYhYy5sYWJlbGVkU3RhdGVtZW50cy5sZW5ndGgpcmV0dXJuO2lmKCFjLmxhYmVsZWRTdGF0ZW1lbnRzLmxlbmd0aCYmYy5zdGF0ZW1lbnRzLmxlbmd0aD4xKXRocm93IEVycm9yKCJNdWx0aXBsZSB1bmxhYmVsbGVkIHN0YXRlbWVudHMgYXJlIG5vdCBhbGxvd2VkLiIpO3ZhciBlPWMubGFiZWxlZFN0YXRlbWVudHMubGVuZ3RoP2QoYy5sYWJlbGVkU3RhdGVtZW50cyk6ZT1jLnN0YXRlbWVudHNbMF0sZz1bXTtmb3IodmFyIGggaW4gYy5kZXBzKWcucHVzaChoKTtpZighZy5sZW5ndGgpcmV0dXJue3ZhbHVlOmUoe30pfTtmb3IodmFyIGk9bmV3IENvbXBvdW5kQmluZGluZyhlKSxqPTA7ajxnLmxlbmd0aDtqKyspaS5iaW5kKGdbal0sYSxnW2pdKTtyZXR1cm4gaX1jYXRjaChrKXtjb25zb2xlLmVycm9yKCJJbnZhbGlkIGV4cHJlc3Npb24gc3ludGF4OiAiK2Isayl9fWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxhLmxlbmd0aDtkKyspYVtkXS5ib2R5KGIpJiZjLnB1c2goYVtkXS5sYWJlbCk7cmV0dXJuIGMuam9pbigiICIpfX1mdW5jdGlvbiBlKGEsYixjKXt0aGlzLmRlcHM9YSx0aGlzLm5hbWU9Yix0aGlzLmxhc3Q9Y31mdW5jdGlvbiBmKCl7dGhpcy5zdGF0ZW1lbnRzPVtdLHRoaXMubGFiZWxlZFN0YXRlbWVudHM9W10sdGhpcy5kZXBzPXt9LHRoaXMuY3VycmVudFBhdGg9dm9pZCAwfWZ1bmN0aW9uIGcoKXt0aHJvdyBFcnJvcigiTm90IEltcGxlbWVudGVkIil9ZnVuY3Rpb24gaCgpe312YXIgaTsidW5kZWZpbmVkIiE9dHlwZW9mIFdlYWtNYXAmJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRmlyZWZveC8iKTwwP2k9V2Vha01hcDpmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxiPU9iamVjdC5oYXNPd25Qcm9wZXJ0eSxjPShuZXcgRGF0ZSkuZ2V0VGltZSgpJTFlOTtpPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYysrICsiX18iKX0saS5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihiLGMpe2EoYix0aGlzLm5hbWUse3ZhbHVlOmMsd3JpdGFibGU6ITB9KX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBiLmNhbGwoYSx0aGlzLm5hbWUpP2FbdGhpcy5uYW1lXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19fSgpO3ZhciBqPSJbJF9hLXpBLVpdIixrPSJbJF9hLXpBLVowLTldIixsPWorIisiK2srIioiLG09IigiK2wrIikiLG49Iig/OlswLTldfFsxLTldK1swLTldKykiLG89Iig/OiIrbCsifCIrbisiKSIscD0iKD86IitvKyIpKD86XFwuIitvKyIpKiIscT1uZXcgUmVnRXhwKCJeIitwKyIkIikscj1uZXcgUmVnRXhwKCJeIittKyJcXHMqIGluICguKikkIikscz1uZXcgUmVnRXhwKCJeKC4qKSBhcyBcXHMqIittKyIkIiksdD1uZXcgaTtlLnByb3RvdHlwZT17Z2V0UGF0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhc3Q/dGhpcy5sYXN0LmdldFBhdGgoKSsiLiIrdGhpcy5uYW1lOnRoaXMubmFtZX0sdmFsdWVGbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0UGF0aCgpO3JldHVybiB0aGlzLmRlcHNbYV09ITAsZnVuY3Rpb24oYil7cmV0dXJuIGJbYV19fX07dmFyIHU9eyIrIjpmdW5jdGlvbihhKXtyZXR1cm4rYX0sIi0iOmZ1bmN0aW9uKGEpe3JldHVybi1hfSwiISI6ZnVuY3Rpb24oYSl7cmV0dXJuIWF9fSx2PXsiKyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStifSwiLSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS1ifSwiKiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSpifSwiLyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS9ifSwiJSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSVifSwiPCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj5hfSwiPiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT5ifSwiPD0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI+PWF9LCI+PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT49Yn0sIj09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPT1ifSwiIT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPWJ9LCI9PT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifSwiIT09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhIT09Yn0sIiYmIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJiZifSwifHwiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGF8fGJ9fTtmLnByb3RvdHlwZT17Z2V0Rm46ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBlP2EudmFsdWVGbigpOmF9LGNyZWF0ZVByb2dyYW06ZnVuY3Rpb24oKXt9LGNyZWF0ZUV4cHJlc3Npb25TdGF0ZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhdGVtZW50cy5wdXNoKGEpLGF9LGNyZWF0ZUxhYmVsZWRTdGF0ZW1lbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5sYWJlbGVkU3RhdGVtZW50cy5wdXNoKHtsYWJlbDphLmdldFBhdGgoKSxib2R5OmIgaW5zdGFuY2VvZiBlP2IudmFsdWVGbigpOmJ9KSxifSxjcmVhdGVVbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXtpZighdVthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj10aGlzLmdldEZuKGIpLGZ1bmN0aW9uKGMpe3JldHVybiB1W2FdKGIoYykpfX0sY3JlYXRlQmluYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7aWYoIXZbYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7cmV0dXJuIGI9dGhpcy5nZXRGbihiKSxjPXRoaXMuZ2V0Rm4oYyksZnVuY3Rpb24oZCl7cmV0dXJuIHZbYV0oYihkKSxjKGQpKX19LGNyZWF0ZUNvbmRpdGlvbmFsRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGE9dGhpcy5nZXRGbihhKSxiPXRoaXMuZ2V0Rm4oYiksYz10aGlzLmdldEZuKGMpLGZ1bmN0aW9uKGQpe3JldHVybiBhKGQpP2IoZCk6YyhkKX19LGNyZWF0ZUlkZW50aWZpZXI6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGUodGhpcy5kZXBzLGEpO3JldHVybiBiLnR5cGU9IklkZW50aWZpZXIiLGJ9LGNyZWF0ZU1lbWJlckV4cHJlc3Npb246ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuZXcgZSh0aGlzLmRlcHMsYy5uYW1lLGIpfSxjcmVhdGVMaXRlcmFsOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLnZhbHVlfX0sY3JlYXRlQXJyYXlFeHByZXNzaW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl09dGhpcy5nZXRGbihhW2JdKTtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKyljLnB1c2goYVtkXShiKSk7cmV0dXJuIGN9fSxjcmVhdGVQcm9wZXJ0eTpmdW5jdGlvbihhLGIsYyl7cmV0dXJue2tleTpiIGluc3RhbmNlb2YgZT9iLmdldFBhdGgoKTpiKCksdmFsdWU6Y319LGNyZWF0ZU9iamVjdEV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXS52YWx1ZT10aGlzLmdldEZuKGFbYl0udmFsdWUpO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9e30sZD0wO2Q8YS5sZW5ndGg7ZCsrKWNbYVtkXS5rZXldPWFbZF0udmFsdWUoYik7cmV0dXJuIGN9fSxjcmVhdGVDYWxsRXhwcmVzc2lvbjpnLGNyZWF0ZUVtcHR5U3RhdGVtZW50OmcsY3JlYXRlVGhpc0V4cHJlc3Npb246Z30saC5wcm90b3R5cGU9e2dldEJpbmRpbmc6ZnVuY3Rpb24oYSxkLGUsZil7cmV0dXJuIGQ9ZC50cmltKCksZCYmIWQubWF0Y2gocSk/YihhLGQsZSxmKXx8YyhhLGQsZSxmKTp2b2lkIDB9LGdldEluc3RhbmNlTW9kZWw6ZnVuY3Rpb24oYSxiKXt2YXIgYz10LmdldChhKTtpZighYylyZXR1cm4gYjt2YXIgZD1hLnRlbXBsYXRlSW5zdGFuY2U/YS50ZW1wbGF0ZUluc3RhbmNlLm1vZGVsOmEubW9kZWwsZT1PYmplY3QuY3JlYXRlKGQpO3JldHVybiBlW2NdPWIsZX19LGEuRXhwcmVzc2lvblN5bnRheD1ofSh0aGlzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7bG9nRmxhZ3MuZGF0YSYmY29uc29sZS5ncm91cCgiTW9kZWwuZGlydHlDaGVjaygpIiksYygpLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXBFbmQoKX1mdW5jdGlvbiBjKCl7UGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX12YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2QudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2UuaW5zZXJ0QmVmb3JlKGQsZS5maXJzdENoaWxkKSxIVE1MVGVtcGxhdGVFbGVtZW50Ll9faW5zdGFuY2VDcmVhdGVkPWZ1bmN0aW9uKGEpe2RvY3VtZW50LmFkb3B0Tm9kZShhKSxDdXN0b21FbGVtZW50cy51cGdyYWRlQWxsKGEpfTt2YXIgZj0xMjU7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIldlYkNvbXBvbmVudHNSZWFkeSIsZnVuY3Rpb24oKXtiKCksT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZXx8c2V0SW50ZXJ2YWwoYyxmKX0pLGEuZmx1c2g9Yix3aW5kb3cuZGlydHlDaGVjaz1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGQoYSxpKX1mdW5jdGlvbiBjKGEpe3JldHVybiBkKGEsail9ZnVuY3Rpb24gZChhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGUoYSl7cmV0dXJuInNjcmlwdCI9PT1hLmxvY2FsTmFtZX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9YTtjIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChpKSxjLmJvZHkuaW5uZXJIVE1MPWEpLGMuX1VSTD1iO3ZhciBkPWMuY3JlYXRlRWxlbWVudCgiYmFzZSIpO3JldHVybiBkLnNldEF0dHJpYnV0ZSgiaHJlZiIsZG9jdW1lbnQuYmFzZVVSSSksYy5oZWFkLmFwcGVuZENoaWxkKGQpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31hfHwoYT13aW5kb3cuSFRNTEltcG9ydHM9e2ZsYWdzOnt9fSk7dmFyIGcsaD1hLnhocixpPSJpbXBvcnQiLGo9InN0eWxlc2hlZXQiLGs9e2RvY3VtZW50czp7fSxjYWNoZTp7fSxwcmVsb2FkU2VsZWN0b3JzOlsibGlua1tyZWw9IitpKyJdIiwiZWxlbWVudCBsaW5rW3JlbD0iK2orIl0iLCJ0ZW1wbGF0ZSIsInNjcmlwdFtzcmNdOm5vdChbdHlwZV0pIiwnc2NyaXB0W3NyY11bdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXS5qb2luKCIsIiksbG9hZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBnPW5ldyBsKGsubG9hZGVkLGEpLGcuY2FjaGU9ay5jYWNoZSxnfSxsb2FkOmZ1bmN0aW9uKGEsYil7Zz1rLmxvYWRlcihiKSxrLnByZWxvYWQoYSl9LHByZWxvYWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGsucHJlbG9hZFNlbGVjdG9ycyk7Yj10aGlzLmZpbHRlck1haW5Eb2N1bWVudE5vZGVzKGEsYiksYj10aGlzLmV4dHJhY3RUZW1wbGF0ZU5vZGVzKGIpLGcuYWRkTm9kZXMoYil9LGZpbHRlck1haW5Eb2N1bWVudE5vZGVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1kb2N1bWVudCYmKGI9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGIsZnVuY3Rpb24oYSl7cmV0dXJuIWUoYSl9KSksYn0sZXh0cmFjdFRlbXBsYXRlTm9kZXM6ZnVuY3Rpb24oYSl7dmFyIGI9W107cmV0dXJuIGE9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoInRlbXBsYXRlIj09PWEubG9jYWxOYW1lKXtpZihhLmNvbnRlbnQpe3ZhciBjPWEuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK2orIl0iKTtjLmxlbmd0aCYmKGI9Yi5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYywwKSkpfXJldHVybiExfXJldHVybiEwfSksYi5sZW5ndGgmJihhPWEuY29uY2F0KGIpKSxhfSxsb2FkZWQ6ZnVuY3Rpb24oYSxkLGUpe2lmKGIoZCkpe3ZhciBnPWsuZG9jdW1lbnRzW2FdO2d8fChnPWYoZSxhKSxwLnJlc29sdmVQYXRoc0luSFRNTChnKSxrLmRvY3VtZW50c1thXT1nLGsucHJlbG9hZChnKSksZC5pbXBvcnQ9e2hyZWY6YSxvd25lck5vZGU6ZCxjb250ZW50Omd9LGQuY29udGVudD1lPWd9ZC5fX3Jlc291cmNlPWUsYyhkKSYmcC5yZXNvbHZlUGF0aHNJblN0eWxlc2hlZXQoZCl9fSxsPWZ1bmN0aW9uKGEsYil7dGhpcy5vbmxvYWQ9YSx0aGlzLm9uY29tcGxldGU9Yix0aGlzLmluZmxpZ2h0PTAsdGhpcy5wZW5kaW5nPXt9LHRoaXMuY2FjaGU9e319O2wucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0Kz1hLmxlbmd0aCxxKGEsdGhpcy5yZXF1aXJlLHRoaXMpLHRoaXMuY2hlY2tEb25lKCl9LHJlcXVpcmU6ZnVuY3Rpb24oYSl7dmFyIGI9cC5ub2RlVXJsKGEpO2EuX19ub2RlVXJsPWIsdGhpcy5kZWR1cGUoYixhKXx8dGhpcy5mZXRjaChiLGEpfSxkZWR1cGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wZW5kaW5nW2FdPyh0aGlzLnBlbmRpbmdbYV0ucHVzaChiKSwhMCk6dGhpcy5jYWNoZVthXT8odGhpcy5vbmxvYWQoYSxiLGcuY2FjaGVbYV0pLHRoaXMudGFpbCgpLCEwKToodGhpcy5wZW5kaW5nW2FdPVtiXSwhMSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYyxkKXt0aGlzLnJlY2VpdmUoYSxiLGMsZCl9LmJpbmQodGhpcyk7aC5sb2FkKGEsYyl9LHJlY2VpdmU6ZnVuY3Rpb24oYSxiLGMsZCl7Y3x8KGcuY2FjaGVbYV09ZCksZy5wZW5kaW5nW2FdLmZvckVhY2goZnVuY3Rpb24oYil7Y3x8dGhpcy5vbmxvYWQoYSxiLGQpLHRoaXMudGFpbCgpfSx0aGlzKSxnLnBlbmRpbmdbYV09bnVsbH0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19O3ZhciBtPVsiaHJlZiIsInNyYyIsImFjdGlvbiJdLG49IlsiK20uam9pbigiXSxbIikrIl0iLG89Int7Lip9fSIscD17bm9kZVVybDpmdW5jdGlvbihhKXtyZXR1cm4gcC5yZXNvbHZlVXJsKHAuZ2V0RG9jdW1lbnRVcmwoZG9jdW1lbnQpLHAuaHJlZk9yU3JjKGEpKX0saHJlZk9yU3JjOmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgiaHJlZiIpfHxhLmdldEF0dHJpYnV0ZSgic3JjIil9LGRvY3VtZW50VXJsRnJvbU5vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHAuZ2V0RG9jdW1lbnRVcmwoYS5vd25lckRvY3VtZW50fHxhKX0sZ2V0RG9jdW1lbnRVcmw6ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEuX1VSTHx8YS5pbXBsJiZhLmltcGwuX1VSTHx8YS5iYXNlVVJJfHxhLlVSTCl8fCIiO3JldHVybiBiLnNwbGl0KCIjIilbMF19LHJlc29sdmVVcmw6ZnVuY3Rpb24oYSxiLGMpe2lmKHRoaXMuaXNBYnNVcmwoYikpcmV0dXJuIGI7dmFyIGQ9dGhpcy5jb21wcmVzc1VybCh0aGlzLnVybFRvUGF0aChhKStiKTtyZXR1cm4gYyYmKGQ9cC5tYWtlUmVsUGF0aChwLmdldERvY3VtZW50VXJsKGRvY3VtZW50KSxkKSksZH0saXNBYnNVcmw6ZnVuY3Rpb24oYSl7cmV0dXJuLyheZGF0YTopfCheaHR0cFtzXT86KXwoXlwvKS8udGVzdChhKX0sdXJsVG9QYXRoOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc3BsaXQoIi8iKTtyZXR1cm4gYi5wb3AoKSxiLnB1c2goIiIpLGIuam9pbigiLyIpfSxjb21wcmVzc1VybDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz1hLnNwbGl0KCIvIiksZD0wO2Q8Yy5sZW5ndGg7ZCsrKWI9Y1tkXSwiLi4iPT09YiYmKGMuc3BsaWNlKGQtMSwyKSxkLT0yKTtyZXR1cm4gYy5qb2luKCIvIil9LG1ha2VSZWxQYXRoOmZ1bmN0aW9uKGEsYil7dmFyIGMsZDtmb3IoYz10aGlzLmNvbXByZXNzVXJsKGEpLnNwbGl0KCIvIiksZD10aGlzLmNvbXByZXNzVXJsKGIpLnNwbGl0KCIvIik7Yy5sZW5ndGgmJmNbMF09PT1kWzBdOyljLnNoaWZ0KCksZC5zaGlmdCgpO2Zvcih2YXIgZT0wLGY9Yy5sZW5ndGgtMTtmPmU7ZSsrKWQudW5zaGlmdCgiLi4iKTt2YXIgZz1kLmpvaW4oIi8iKTtyZXR1cm4gZ30scmVzb2x2ZVBhdGhzSW5IVE1MOmZ1bmN0aW9uKGEsYil7Yj1ifHxwLmRvY3VtZW50VXJsRnJvbU5vZGUoYSkscC5yZXNvbHZlQXR0cmlidXRlcyhhLGIpLHAucmVzb2x2ZVN0eWxlRWx0cyhhLGIpO3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKTtjJiZxKGMsZnVuY3Rpb24oYSl7YS5jb250ZW50JiZwLnJlc29sdmVQYXRoc0luSFRNTChhLmNvbnRlbnQsYil9KX0scmVzb2x2ZVBhdGhzSW5TdHlsZXNoZWV0OmZ1bmN0aW9uKGEpe3ZhciBiPXAubm9kZVVybChhKTthLl9fcmVzb3VyY2U9cC5yZXNvbHZlQ3NzVGV4dChhLl9fcmVzb3VyY2UsYil9LHJlc29sdmVTdHlsZUVsdHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7YyYmcShjLGZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9cC5yZXNvbHZlQ3NzVGV4dChhLnRleHRDb250ZW50LGIpfSl9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEucmVwbGFjZSgvdXJsXChbXildKlwpL2csZnVuY3Rpb24oYSl7dmFyIGM9YS5yZXBsYWNlKC9bIiddL2csIiIpLnNsaWNlKDQsLTEpO3JldHVybiBjPXAucmVzb2x2ZVVybChiLGMsITApLCJ1cmwoIitjKyIpIn0pfSxyZXNvbHZlQXR0cmlidXRlczpmdW5jdGlvbihhLGIpe3ZhciBjPWEmJmEucXVlcnlTZWxlY3RvckFsbChuKTtjJiZxKGMsZnVuY3Rpb24oYSl7dGhpcy5yZXNvbHZlTm9kZUF0dHJpYnV0ZXMoYSxiKX0sdGhpcyl9LHJlc29sdmVOb2RlQXR0cmlidXRlczpmdW5jdGlvbihhLGIpe20uZm9yRWFjaChmdW5jdGlvbihjKXt2YXIgZD1hLmF0dHJpYnV0ZXNbY107aWYoZCYmZC52YWx1ZSYmZC52YWx1ZS5zZWFyY2gobyk8MCl7dmFyIGU9cC5yZXNvbHZlVXJsKGIsZC52YWx1ZSwhMCk7ZC52YWx1ZT1lfX0pfX07aD1ofHx7YXN5bmM6ITAsb2s6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RhdHVzPj0yMDAmJmEuc3RhdHVzPDMwMHx8MzA0PT09YS5zdGF0dXN8fDA9PT1hLnN0YXR1c30sbG9hZDpmdW5jdGlvbihiLGMsZCl7dmFyIGU9bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybihhLmZsYWdzLmRlYnVnfHxhLmZsYWdzLmJ1c3QpJiYoYis9Ij8iK01hdGgucmFuZG9tKCkpLGUub3BlbigiR0VUIixiLGguYXN5bmMpLGUuYWRkRXZlbnRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsZnVuY3Rpb24oKXs0PT09ZS5yZWFkeVN0YXRlJiZjLmNhbGwoZCwhaC5vayhlKSYmZSxlLnJlc3BvbnNlLGIpfSksZS5zZW5kKCksZX0sbG9hZERvY3VtZW50OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmxvYWQoYSxiLGMpLnJlc3BvbnNlVHlwZT0iZG9jdW1lbnQifX07dmFyIHE9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLnBhdGg9cCxhLnhocj1oLGEuaW1wb3J0ZXI9ayxhLmdldERvY3VtZW50VXJsPXAuZ2V0RG9jdW1lbnRVcmwsYS5JTVBPUlRfTElOS19UWVBFPWl9KHdpbmRvdy5IVE1MSW1wb3J0cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmYS5nZXRBdHRyaWJ1dGUoInJlbCIpPT09Zn1mdW5jdGlvbiBjKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJiFkKGEpJiYhZShhKX1mdW5jdGlvbiBkKGEpe3JldHVybiBhLm93bmVyRG9jdW1lbnQ9PT1kb2N1bWVudHx8YS5vd25lckRvY3VtZW50LmltcGw9PT1kb2N1bWVudH1mdW5jdGlvbiBlKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJiJlbGVtZW50Ij09PWEucGFyZW50Tm9kZS5sb2NhbE5hbWV9dmFyIGY9ImltcG9ydCIsZz17c2VsZWN0b3JzOlsibGlua1tyZWw9IitmKyJdIiwibGlua1tyZWw9c3R5bGVzaGVldF0iLCJzdHlsZSIsInNjcmlwdDpub3QoW3R5cGVdKSIsJ3NjcmlwdFt0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiXSddLG1hcDp7bGluazoicGFyc2VMaW5rIixzY3JpcHQ6InBhcnNlU2NyaXB0IixzdHlsZToicGFyc2VHZW5lcmljIn0scGFyc2U6ZnVuY3Rpb24oYSl7aWYoIWEuX19pbXBvcnRQYXJzZWQpe2EuX19pbXBvcnRQYXJzZWQ9ITA7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGcuc2VsZWN0b3JzKTtoKGIsZnVuY3Rpb24oYSl7Z1tnLm1hcFthLmxvY2FsTmFtZV1dKGEpfSl9fSxwYXJzZUxpbms6ZnVuY3Rpb24oYSl7YihhKT9hLmNvbnRlbnQmJmcucGFyc2UoYS5jb250ZW50KTp0aGlzLnBhcnNlR2VuZXJpYyhhKX0scGFyc2VHZW5lcmljOmZ1bmN0aW9uKGEpe2MoYSkmJmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYSl9LHBhcnNlU2NyaXB0OmZ1bmN0aW9uKGIpe2lmKGMoYikpe3ZhciBkPShiLl9fcmVzb3VyY2V8fGIudGV4dENvbnRlbnQpLnRyaW0oKTtpZihkKXt2YXIgZT1iLl9fbm9kZVVybDtpZighZSl7dmFyIGU9YS5wYXRoLmRvY3VtZW50VXJsRnJvbU5vZGUoYiksZj0iWyIrTWF0aC5mbG9vcigxZTMqKE1hdGgucmFuZG9tKCkrMSkpKyJdIixnPWQubWF0Y2goL1BvbHltZXJcKFsnIl0oW14nIl0qKS8pO2Y9ZyYmZ1sxXXx8ZixlKz0iLyIrZisiLmpzIn1kKz0iXG4vLyMgc291cmNlVVJMPSIrZSsiXG4iLGV2YWwuY2FsbCh3aW5kb3csZCl9fX19LGg9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLnBhcnNlcj1nfShIVE1MSW1wb3J0cyksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7SFRNTEltcG9ydHMuaW1wb3J0ZXIubG9hZChkb2N1bWVudCxmdW5jdGlvbigpe0hUTUxJbXBvcnRzLnBhcnNlci5wYXJzZShkb2N1bWVudCksSFRNTEltcG9ydHMucmVhZHlUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJIVE1MSW1wb3J0c0xvYWRlZCIse2J1YmJsZXM6ITB9KSl9KX0iZnVuY3Rpb24iIT10eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50JiYod2luZG93LkN1c3RvbUV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGIuaW5pdEV2ZW50KGEsITAsITApLGJ9KSwiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZT9hKCk6d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEpfSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dS5wdXNoKGEpLHR8fCh0PSEwLHEoZCkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKXx8YX1mdW5jdGlvbiBkKCl7dD0hMTt2YXIgYT11O3U9W10sYS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEudWlkXy1iLnVpZF99KTt2YXIgYj0hMTthLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGM9YS50YWtlUmVjb3JkcygpO2UoYSksYy5sZW5ndGgmJihhLmNhbGxiYWNrXyhjLGEpLGI9ITApfSksYiYmZCgpfWZ1bmN0aW9uIGUoYSl7YS5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz1wLmdldChiKTtjJiZjLmZvckVhY2goZnVuY3Rpb24oYil7Yi5vYnNlcnZlcj09PWEmJmIucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9KX0pfWZ1bmN0aW9uIGYoYSxiKXtmb3IodmFyIGM9YTtjO2M9Yy5wYXJlbnROb2RlKXt2YXIgZD1wLmdldChjKTtpZihkKWZvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdLGc9Zi5vcHRpb25zO2lmKGM9PT1hfHxnLnN1YnRyZWUpe3ZhciBoPWIoZyk7aCYmZi5lbnF1ZXVlKGgpfX19fWZ1bmN0aW9uIGcoYSl7dGhpcy5jYWxsYmFja189YSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3Z9ZnVuY3Rpb24gaChhLGIpe3RoaXMudHlwZT1hLHRoaXMudGFyZ2V0PWIsdGhpcy5hZGRlZE5vZGVzPVtdLHRoaXMucmVtb3ZlZE5vZGVzPVtdLHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGkoYSl7dmFyIGI9bmV3IGgoYS50eXBlLGEudGFyZ2V0KTtyZXR1cm4gYi5hZGRlZE5vZGVzPWEuYWRkZWROb2Rlcy5zbGljZSgpLGIucmVtb3ZlZE5vZGVzPWEucmVtb3ZlZE5vZGVzLnNsaWNlKCksYi5wcmV2aW91c1NpYmxpbmc9YS5wcmV2aW91c1NpYmxpbmcsYi5uZXh0U2libGluZz1hLm5leHRTaWJsaW5nLGIuYXR0cmlidXRlTmFtZT1hLmF0dHJpYnV0ZU5hbWUsYi5hdHRyaWJ1dGVOYW1lc3BhY2U9YS5hdHRyaWJ1dGVOYW1lc3BhY2UsYi5vbGRWYWx1ZT1hLm9sZFZhbHVlLGJ9ZnVuY3Rpb24gaihhLGIpe3JldHVybiB3PW5ldyBoKGEsYil9ZnVuY3Rpb24gayhhKXtyZXR1cm4geD94Oih4PWkodykseC5vbGRWYWx1ZT1hLHgpfWZ1bmN0aW9uIGwoKXt3PXg9dm9pZCAwfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIGE9PT14fHxhPT09dwp9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgU2lkZVRhYmxlLHE9d2luZG93Lm1zU2V0SW1tZWRpYXRlO2lmKCFxKXt2YXIgcj1bXSxzPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYSl7aWYoYS5kYXRhPT09cyl7dmFyIGI9cjtyPVtdLGIuZm9yRWFjaChmdW5jdGlvbihhKXthKCl9KX19KSxxPWZ1bmN0aW9uKGEpe3IucHVzaChhKSx3aW5kb3cucG9zdE1lc3NhZ2UocywiKiIpfX12YXIgdD0hMSx1PVtdLHY9MDtnLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2lmKGE9YyhhKSwhYi5jaGlsZExpc3QmJiFiLmF0dHJpYnV0ZXMmJiFiLmNoYXJhY3RlckRhdGF8fGIuYXR0cmlidXRlT2xkVmFsdWUmJiFiLmF0dHJpYnV0ZXN8fGIuYXR0cmlidXRlRmlsdGVyJiZiLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFiLmF0dHJpYnV0ZXN8fGIuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhYi5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgZD1wLmdldChhKTtkfHxwLnNldChhLGQ9W10pO2Zvcih2YXIgZSxmPTA7ZjxkLmxlbmd0aDtmKyspaWYoZFtmXS5vYnNlcnZlcj09PXRoaXMpe2U9ZFtmXSxlLnJlbW92ZUxpc3RlbmVycygpLGUub3B0aW9ucz1iO2JyZWFrfWV8fChlPW5ldyBvKHRoaXMsYSxiKSxkLnB1c2goZSksdGhpcy5ub2Rlc18ucHVzaChhKSksZS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7ZC5yZW1vdmVMaXN0ZW5lcnMoKSxiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX07dmFyIHcseDtvLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLm9ic2VydmVyLnJlY29yZHNfLGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+MCl7dmFyIGU9Y1tkLTFdLGY9bihlLGEpO2lmKGYpcmV0dXJuIGNbZC0xXT1mLHZvaWQgMH1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWd9KHRoaXMpLCF3aW5kb3cuTXV0YXRpb25PYnNlcnZlciYmKHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyPXdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyLCFNdXRhdGlvbk9ic2VydmVyKSl0aHJvdyBuZXcgRXJyb3IoIm5vIG11dGF0aW9uIG9ic2VydmVyIHN1cHBvcnQiKTshZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiLGYpe3ZhciBnPWZ8fHt9O2lmKCFiKXRocm93IG5ldyBFcnJvcigiTmFtZSBhcmd1bWVudCBtdXN0IG5vdCBiZSBlbXB0eSIpO2lmKGcubmFtZT1iLCFnLnByb3RvdHlwZSl0aHJvdyBuZXcgRXJyb3IoIk9wdGlvbnMgbWlzc2luZyByZXF1aXJlZCBwcm90b3R5cGUgcHJvcGVydHkiKTtyZXR1cm4gZy5saWZlY3ljbGU9Zy5saWZlY3ljbGV8fHt9LGcuYW5jZXN0cnk9YyhnLmV4dGVuZHMpLGQoZyksZShnKSxrKGcucHJvdG90eXBlKSxtKGIsZyksZy5jdG9yPW4oZyksZy5jdG9yLnByb3RvdHlwZT1nLnByb3RvdHlwZSxnLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1nLmN0b3IsYS5yZWFkeSYmYS51cGdyYWRlQWxsKGRvY3VtZW50KSxnLmN0b3J9ZnVuY3Rpb24gYyhhKXt2YXIgYj1zW2FdO3JldHVybiBiP2MoYi5leHRlbmRzKS5jb25jYXQoW2JdKTpbXX1mdW5jdGlvbiBkKGEpe2Zvcih2YXIgYixjPWEuZXh0ZW5kcyxkPTA7Yj1hLmFuY2VzdHJ5W2RdO2QrKyljPWIuaXMmJmIudGFnO2EudGFnPWN8fGEubmFtZSxjJiYoYS5pcz1hLm5hbWUpfWZ1bmN0aW9uIGUoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKTtiPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKX19YS5uYXRpdmU9Yn1mdW5jdGlvbiBmKGEpe3JldHVybiBnKHQoYS50YWcpLGEpfWZ1bmN0aW9uIGcoYixjKXtyZXR1cm4gYy5pcyYmYi5zZXRBdHRyaWJ1dGUoImlzIixjLmlzKSxoKGIsYyksYi5fX3VwZ3JhZGVkX189ITAsYS51cGdyYWRlU3VidHJlZShiKSxqKGIpLGJ9ZnVuY3Rpb24gaChhLGIpe09iamVjdC5fX3Byb3RvX18/YS5fX3Byb3RvX189Yi5wcm90b3R5cGU6KGkoYSxiLnByb3RvdHlwZSxiLm5hdGl2ZSksYS5fX3Byb3RvX189Yi5wcm90b3R5cGUpfWZ1bmN0aW9uIGkoYSxiLGMpe2Zvcih2YXIgZD17fSxlPWI7ZSE9PWMmJmUhPT1IVE1MVW5rbm93bkVsZW1lbnQucHJvdG90eXBlOyl7Zm9yKHZhciBmLGc9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSksaD0wO2Y9Z1toXTtoKyspZFtmXXx8KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGYsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGYpKSxkW2ZdPTEpO2U9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfX1mdW5jdGlvbiBqKGEpe2EucmVhZHlDYWxsYmFjayYmYS5yZWFkeUNhbGxiYWNrKCl9ZnVuY3Rpb24gayhhKXt2YXIgYj1hLnNldEF0dHJpYnV0ZTthLnNldEF0dHJpYnV0ZT1mdW5jdGlvbihhLGMpe2wuY2FsbCh0aGlzLGEsYyxiKX07dmFyIGM9YS5yZW1vdmVBdHRyaWJ1dGU7YS5yZW1vdmVBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtsLmNhbGwodGhpcyxhLGIsYyl9fWZ1bmN0aW9uIGwoYSxiLGMpe3ZhciBkPXRoaXMuZ2V0QXR0cmlidXRlKGEpO2MuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrJiZ0aGlzLmdldEF0dHJpYnV0ZShhKSE9PWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGEsZCl9ZnVuY3Rpb24gbShhLGIpe3NbYV09Yn1mdW5jdGlvbiBuKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBmKGEpfX1mdW5jdGlvbiBvKGEpe3ZhciBiPXNbYV07cmV0dXJuIGI/bmV3IGIuY3Rvcjp0KGEpfWZ1bmN0aW9uIHAoYSl7aWYoIWEuX191cGdyYWRlZF9fJiZhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKCJpcyIpfHxhLmxvY2FsTmFtZSxjPXNbYl07cmV0dXJuIGMmJmcoYSxjKX19ZnVuY3Rpb24gcShiKXt2YXIgYz11LmNhbGwodGhpcyxiKTtyZXR1cm4gYS51cGdyYWRlQWxsKGMpLGN9aWYoYXx8KGE9d2luZG93LkN1c3RvbUVsZW1lbnRzPXtmbGFnczp7fX0pLGEuaGFzTmF0aXZlPShkb2N1bWVudC53ZWJraXRSZWdpc3Rlcnx8ZG9jdW1lbnQucmVnaXN0ZXIpJiYibmF0aXZlIj09PWEuZmxhZ3MucmVnaXN0ZXIsYS5oYXNOYXRpdmUpe2RvY3VtZW50LnJlZ2lzdGVyPWRvY3VtZW50LnJlZ2lzdGVyfHxkb2N1bWVudC53ZWJraXRSZWdpc3Rlcjt2YXIgcj1mdW5jdGlvbigpe307YS5yZWdpc3RyeT17fSxhLnVwZ3JhZGVFbGVtZW50PXJ9ZWxzZXt2YXIgcz17fSx0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYmluZChkb2N1bWVudCksdT1Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGU7ZG9jdW1lbnQucmVnaXN0ZXI9Yixkb2N1bWVudC5jcmVhdGVFbGVtZW50PW8sTm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlPXEsYS5yZWdpc3RyeT1zLGEudXBncmFkZT1wfX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyxkKXt2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2lmKCFlKWZvcihlPWEuZmlyc3RDaGlsZDtlJiZlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWU9ZS5uZXh0U2libGluZztmb3IoO2U7KWMoZSxkKSE9PSEwJiZiKGUsYyxkKSxlPWUubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxkKXtiKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSk/ITA6KGEud2Via2l0U2hhZG93Um9vdCYmYyhhLndlYmtpdFNoYWRvd1Jvb3QsZCksdm9pZCAwKX0pLGEud2Via2l0U2hhZG93Um9vdCYmYyhhLndlYmtpdFNoYWRvd1Jvb3QsZCl9ZnVuY3Rpb24gZChhKXtyZXR1cm4gZyhhKT8oaChhKSwhMCk6KGkoYSksdm9pZCAwKX1mdW5jdGlvbiBlKGEpe2MoYSxmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8hMDp2b2lkIDB9KX1mdW5jdGlvbiBmKGEpe3JldHVybiBkKGEpfHxlKGEpfWZ1bmN0aW9uIGcoYil7aWYoIWIuX191cGdyYWRlZF9fJiZiLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBjPWIuZ2V0QXR0cmlidXRlKCJpcyIpfHxiLmxvY2FsTmFtZSxkPWEucmVnaXN0cnlbY107aWYoZClyZXR1cm4gbG9nRmxhZ3MuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSxsb2dGbGFncy5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSwhMH19ZnVuY3Rpb24gaChhKXtpKGEpLGwoYSkmJmMoYSxmdW5jdGlvbihhKXtpKGEpfSl9ZnVuY3Rpb24gaShhKXsoYS5pbnNlcnRlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmbG9nRmxhZ3MuZG9tKSYmKGxvZ0ZsYWdzLmRvbSYmY29uc29sZS5ncm91cCgiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSksbChhKSYmKGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKSsxLGEuX19pbnNlcnRlZDwxJiYoYS5fX2luc2VydGVkPTEpLGEuX19pbnNlcnRlZD4xP2xvZ0ZsYWdzLmRvbSYmY29uc29sZS53YXJuKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLmluc2VydGVkQ2FsbGJhY2smJihsb2dGbGFncy5kb20mJmNvbnNvbGUubG9nKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lKSxhLmluc2VydGVkQ2FsbGJhY2soKSkpLGxvZ0ZsYWdzLmRvbSYmY29uc29sZS5ncm91cEVuZCgpKX1mdW5jdGlvbiBqKGEpe2soYSksYyhhLGZ1bmN0aW9uKGEpe2soYSl9KX1mdW5jdGlvbiBrKGEpeyhhLnJlbW92ZWRDYWxsYmFja3x8YS5fX3VwZ3JhZGVkX18mJmxvZ0ZsYWdzLmRvbSkmJihsb2dGbGFncy5kb20mJmNvbnNvbGUubG9nKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUpLGwoYSl8fChhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCktMSxhLl9faW5zZXJ0ZWQ+MCYmKGEuX19pbnNlcnRlZD0wKSxhLl9faW5zZXJ0ZWQ8MD9sb2dGbGFncy5kb20mJmNvbnNvbGUud2FybigicmVtb3ZlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLnJlbW92ZWRDYWxsYmFjayYmYS5yZW1vdmVkQ2FsbGJhY2soKSkpfWZ1bmN0aW9uIGwoYSl7Zm9yKHZhciBiPWE7Yjspe2lmKGI9PWEub3duZXJEb2N1bWVudClyZXR1cm4hMDtiPWIucGFyZW50Tm9kZXx8Yi5ob3N0fX1mdW5jdGlvbiBtKGEpe2Eud2Via2l0U2hhZG93Um9vdCYmIWEud2Via2l0U2hhZG93Um9vdC5fX3dhdGNoZWQmJihsb2dGbGFncy5kb20mJmNvbnNvbGUubG9nKCJ3YXRjaGluZyBzaGFkb3ctcm9vdCBmb3I6ICIsYS5sb2NhbE5hbWUpLHIoYS53ZWJraXRTaGFkb3dSb290KSxhLndlYmtpdFNoYWRvd1Jvb3QuX193YXRjaGVkPSEwKX1mdW5jdGlvbiBuKGEpe20oYSksYyhhLGZ1bmN0aW9uKCl7bShhKX0pfWZ1bmN0aW9uIG8oYSl7c3dpdGNoKGEubG9jYWxOYW1lKXtjYXNlInN0eWxlIjpjYXNlInNjcmlwdCI6Y2FzZSJ0ZW1wbGF0ZSI6Y2FzZSB2b2lkIDA6cmV0dXJuITB9fWZ1bmN0aW9uIHAoYSl7aWYobG9nRmxhZ3MuZG9tKXt2YXIgYj1hWzBdO2lmKGImJiJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMmJmIuYWRkZWROb2Rlcyl7Zm9yKHZhciBjPWIuYWRkZWROb2Rlc1swXTtjJiZjIT09ZG9jdW1lbnQmJiFjLmhvc3Q7KWM9Yy5wYXJlbnROb2RlO3ZhciBkPWMmJihjLlVSTHx8Yy5fVVJMfHxjLmhvc3QmJmMuaG9zdC5sb2NhbE5hbWUpfHwiIjtkPWQuc3BsaXQoIi8/Iikuc2hpZnQoKS5zcGxpdCgiLyIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoIm11dGF0aW9ucyAoJWQpIFslc10iLGEubGVuZ3RoLGR8fCIiKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7ImNoaWxkTGlzdCI9PT1hLnR5cGUmJih2KGEuYWRkZWROb2RlcyxmdW5jdGlvbihhKXtvKGEpfHxmKGEpfSksdihhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXtvKGEpfHxqKGEpfSkpfSksbG9nRmxhZ3MuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gcSgpe3AodS50YWtlUmVjb3JkcygpKX1mdW5jdGlvbiByKGEpe3Uub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfWZ1bmN0aW9uIHMoYSl7cihhKX1mdW5jdGlvbiB0KGEpe2xvZ0ZsYWdzLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZURvY3VtZW50OiAiLChhLlVSTHx8YS5fVVJMfHwiIikuc3BsaXQoIi8iKS5wb3AoKSksZihhKSxsb2dGbGFncy5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKX12YXIgdT1uZXcgTXV0YXRpb25PYnNlcnZlcihwKSx2PUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS53YXRjaFNoYWRvdz1tLGEud2F0Y2hBbGxTaGFkb3dzPW4sYS51cGdyYWRlQWxsPWYsYS51cGdyYWRlU3VidHJlZT1lLGEub2JzZXJ2ZURvY3VtZW50PXMsYS51cGdyYWRlRG9jdW1lbnQ9dCxhLnRha2VSZWNvcmRzPXF9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oKXtmdW5jdGlvbiBwYXJzZUVsZW1lbnRFbGVtZW50KGEpe3ZhciBiPXtuYW1lOiIiLCJleHRlbmRzIjpudWxsfTt0YWtlQXR0cmlidXRlcyhhLGIpO3ZhciBjPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihiLmV4dGVuZHMpe3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYi5leHRlbmRzKTtjPWQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZCl9Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjKSxhLm9wdGlvbnM9Yjt2YXIgZT1hLnF1ZXJ5U2VsZWN0b3IoJ3NjcmlwdDpub3QoW3R5cGVdKSxzY3JpcHRbdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0sc2NyaXB0cycpO2UmJmV4ZWN1dGVDb21wb25lbnRTY3JpcHQoZS50ZXh0Q29udGVudCxhLGIubmFtZSk7dmFyIGY9ZG9jdW1lbnQucmVnaXN0ZXIoYi5uYW1lLGIpO2EuY3Rvcj1mO3ZhciBnPWEuZ2V0QXR0cmlidXRlKCJjb25zdHJ1Y3RvciIpO2cmJih3aW5kb3dbZ109Zil9ZnVuY3Rpb24gdGFrZUF0dHJpYnV0ZXMoYSxiKXtmb3IodmFyIGMgaW4gYil7dmFyIGQ9YS5hdHRyaWJ1dGVzW2NdO2QmJihiW2NdPWQudmFsdWUpfX1mdW5jdGlvbiBleGVjdXRlQ29tcG9uZW50U2NyaXB0KGluU2NyaXB0LGluQ29udGV4dCxpbk5hbWUpe2NvbnRleHQ9aW5Db250ZXh0O3ZhciBvd25lcj1jb250ZXh0Lm93bmVyRG9jdW1lbnQsdXJsPW93bmVyLl9VUkx8fG93bmVyLlVSTHx8b3duZXIuaW1wbCYmKG93bmVyLmltcGwuX1VSTHx8b3duZXIuaW1wbC5VUkwpLG1hdGNoPXVybC5tYXRjaCgvLipcLyhbXi5dKilbLl0/LiokLyk7aWYobWF0Y2gpe3ZhciBuYW1lPW1hdGNoWzFdO3VybCs9bmFtZSE9aW5OYW1lPyI6Iitpbk5hbWU6IiJ9dmFyIGNvZGU9Il9fY29tcG9uZW50U2NyaXB0KCciK2luTmFtZSsiJywgZnVuY3Rpb24oKXsiK2luU2NyaXB0KyJ9KTsiKyJcbi8vIyBzb3VyY2VVUkw9Iit1cmwrIlxuIjtldmFsKGNvZGUpfWZ1bmN0aW9uIG1peGluKGEsYil7YT1hfHx7fTt0cnl7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXt2YXIgZD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYyk7ZCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxkKX0pfWNhdGNoKGMpe31yZXR1cm4gYX12YXIgSFRNTEVsZW1lbnRFbGVtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlZ2lzdGVyPUhUTUxFbGVtZW50RWxlbWVudC5wcm90b3R5cGUucmVnaXN0ZXIscGFyc2VFbGVtZW50RWxlbWVudChhKSxhfTtIVE1MRWxlbWVudEVsZW1lbnQucHJvdG90eXBlPXtyZWdpc3RlcjpmdW5jdGlvbihhKXthJiYodGhpcy5vcHRpb25zLmxpZmVjeWNsZT1hLmxpZmVjeWNsZSxhLnByb3RvdHlwZSYmbWl4aW4odGhpcy5vcHRpb25zLnByb3RvdHlwZSxhLnByb3RvdHlwZSkpfX07dmFyIGNvbnRleHQ7d2luZG93Ll9fY29tcG9uZW50U2NyaXB0PWZ1bmN0aW9uKGEsYil7Yi5jYWxsKGNvbnRleHQpfSx3aW5kb3cuSFRNTEVsZW1lbnRFbGVtZW50PUhUTUxFbGVtZW50RWxlbWVudH0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWJ9dmFyIGI9d2luZG93LkhUTUxJbXBvcnRzP0hUTUxJbXBvcnRzLklNUE9SVF9MSU5LX1RZUEU6Im5vbmUiLGM9e3NlbGVjdG9yczpbImxpbmtbcmVsPSIrYisiXSIsImVsZW1lbnQiXSxtYXA6e2xpbms6InBhcnNlTGluayIsZWxlbWVudDoicGFyc2VFbGVtZW50In0scGFyc2U6ZnVuY3Rpb24oYSl7aWYoIWEuX19wYXJzZWQpe2EuX19wYXJzZWQ9ITA7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGMuc2VsZWN0b3JzKTtkKGIsZnVuY3Rpb24oYSl7Y1tjLm1hcFthLmxvY2FsTmFtZV1dKGEpfSksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGEpLEN1c3RvbUVsZW1lbnRzLm9ic2VydmVEb2N1bWVudChhKX19LHBhcnNlTGluazpmdW5jdGlvbihiKXthKGIpJiZ0aGlzLnBhcnNlSW1wb3J0KGIpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXthLmNvbnRlbnQmJmMucGFyc2UoYS5jb250ZW50KX0scGFyc2VFbGVtZW50OmZ1bmN0aW9uKGEpe25ldyBIVE1MRWxlbWVudEVsZW1lbnQoYSl9fSxkPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7Q3VzdG9tRWxlbWVudHMucGFyc2VyPWN9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7c2V0VGltZW91dChmdW5jdGlvbigpe0N1c3RvbUVsZW1lbnRzLnBhcnNlci5wYXJzZShkb2N1bWVudCksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy5yZWFkeT0hMCxDdXN0b21FbGVtZW50cy5yZWFkeVRpbWU9RGF0ZS5ub3coKSx3aW5kb3cuSFRNTEltcG9ydHMmJihDdXN0b21FbGVtZW50cy5lbGFwc2VkPUN1c3RvbUVsZW1lbnRzLnJlYWR5VGltZS1IVE1MSW1wb3J0cy5yZWFkeVRpbWUpLGRvY3VtZW50LmJvZHkuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoIldlYkNvbXBvbmVudHNSZWFkeSIse2J1YmJsZXM6ITB9KSl9LDApfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYi5pbml0RXZlbnQoYSwhMCwhMCksYn0pLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlKWEoKTtlbHNle3ZhciBiPXdpbmRvdy5IVE1MSW1wb3J0cz8iSFRNTEltcG9ydHNMb2FkZWQiOiJET01Db250ZW50TG9hZGVkIjt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihiLGEpfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtiLnRleHRDb250ZW50PSJlbGVtZW50IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2lmKGMuaW5zZXJ0QmVmb3JlKGIsYy5maXJzdENoaWxkKSx3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe0N1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93PWEsQ3VzdG9tRWxlbWVudHMud2F0Y2hBbGxTaGFkb3dzPWE7dmFyIGQ9WyJ1cGdyYWRlQWxsIiwidXBncmFkZVN1YnRyZWUiLCJvYnNlcnZlRG9jdW1lbnQiLCJ1cGdyYWRlRG9jdW1lbnQiXSxlPXt9O2QuZm9yRWFjaChmdW5jdGlvbihhKXtlW2FdPUN1c3RvbUVsZW1lbnRzW2FdfSksZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe0N1c3RvbUVsZW1lbnRzW2FdPWZ1bmN0aW9uKGIpe3JldHVybiBlW2FdKHdyYXAoYikpfX0pfX0oKSxmdW5jdGlvbihhKXthPWF8fHt9O3ZhciBiPXtzaGFkb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS5zaGFkb3dSb290fHxhLndlYmtpdFNoYWRvd1Jvb3Q6dm9pZCAwfSxjYW5UYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJkJvb2xlYW4oYS5lbGVtZW50RnJvbVBvaW50KX0sdGFyZ2V0aW5nU2hhZG93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2hhZG93KGEpO3JldHVybiB0aGlzLmNhblRhcmdldChiKT9iOnZvaWQgMH0sb2xkZXJTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoIWIpe3ZhciBjPWEucXVlcnlTZWxlY3Rvcigic2hhZG93Iik7YyYmKGI9Yy5vbGRlclNoYWRvd1Jvb3QpfXJldHVybiBifSxhbGxTaGFkb3dzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPXRoaXMuc2hhZG93KGEpO2M7KWIucHVzaChjKSxjPXRoaXMub2xkZXJTaGFkb3coYyk7cmV0dXJuIGJ9LHNlYXJjaFJvb3Q6ZnVuY3Rpb24oYSxiLGMpe2lmKGEpe3ZhciBkLGUsZj1hLmVsZW1lbnRGcm9tUG9pbnQoYixjKTtmb3IoZT10aGlzLnRhcmdldGluZ1NoYWRvdyhmKTtlOyl7aWYoZD1lLmVsZW1lbnRGcm9tUG9pbnQoYixjKSl7dmFyIGc9dGhpcy50YXJnZXRpbmdTaGFkb3coZCk7cmV0dXJuIHRoaXMuc2VhcmNoUm9vdChnLGIsYyl8fGR9ZT10aGlzLm9sZGVyU2hhZG93KGUpfXJldHVybiBmfX0sb3duZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWE7Yi5wYXJlbnROb2RlOyliPWIucGFyZW50Tm9kZTtyZXR1cm4gYn0sZmluZFRhcmdldDpmdW5jdGlvbihhKXt2YXIgYj1hLmNsaWVudFgsYz1hLmNsaWVudFksZD10aGlzLm93bmVyKGEudGFyZ2V0KTtyZXR1cm4gZC5lbGVtZW50RnJvbVBvaW50KGIsYyl8fChkPWRvY3VtZW50KSx0aGlzLnNlYXJjaFJvb3QoZG9jdW1lbnQsYixjKX19O2EudGFyZ2V0RmluZGluZz1iLGEuZmluZFRhcmdldD1iLmZpbmRUYXJnZXQuYmluZChiKSx3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsPWF9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4nW3RvdWNoLWFjdGlvbj0iJythKyciXSd9ZnVuY3Rpb24gYihhKXtyZXR1cm4ieyAtbXMtdG91Y2gtYWN0aW9uOiAiK2ErIjsgdG91Y2gtYWN0aW9uOiAiK2ErIjsgfSJ9dmFyIGM9WyJub25lIiwiYXV0byIsInBhbi14IiwicGFuLXkiLHtydWxlOiJwYW4teCBwYW4teSIsc2VsZWN0b3JzOlsicGFuLXggcGFuLXkiLCJwYW4teSBwYW4teCJdfV0sZD0iIjtjLmZvckVhY2goZnVuY3Rpb24oYyl7ZCs9U3RyaW5nKGMpPT09Yz9hKGMpK2IoYyk6Yy5zZWxlY3RvcnMubWFwKGEpK2IoYy5ydWxlKX0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7ZS50ZXh0Q29udGVudD1kO3ZhciBmPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtmLmluc2VydEJlZm9yZShlLGYuZmlyc3RDaGlsZCl9KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBiPWJ8fHt9LGU9Yi5idXR0b25zO2lmKHZvaWQgMD09PWUpc3dpdGNoKGIud2hpY2gpe2Nhc2UgMTplPTE7YnJlYWs7Y2FzZSAyOmU9NDticmVhaztjYXNlIDM6ZT0yO2JyZWFrO2RlZmF1bHQ6ZT0wfXZhciBmO2lmKGMpZj1uZXcgTW91c2VFdmVudChhLGIpO2Vsc2V7Zj1kb2N1bWVudC5jcmVhdGVFdmVudCgiTW91c2VFdmVudCIpO3ZhciBnPXtidWJibGVzOiExLGNhbmNlbGFibGU6ITEsdmlldzpudWxsLGRldGFpbDpudWxsLHNjcmVlblg6MCxzY3JlZW5ZOjAsY2xpZW50WDowLGNsaWVudFk6MCxjdHJsS2V5OiExLGFsdEtleTohMSxzaGlmdEtleTohMSxtZXRhS2V5OiExLGJ1dHRvbjowLHJlbGF0ZWRUYXJnZXQ6bnVsbH07T2JqZWN0LmtleXMoZykuZm9yRWFjaChmdW5jdGlvbihhKXthIGluIGImJihnW2FdPWJbYV0pfSksZi5pbml0TW91c2VFdmVudChhLGcuYnViYmxlcyxnLmNhbmNlbGFibGUsZy52aWV3LGcuZGV0YWlsLGcuc2NyZWVuWCxnLnNjcmVlblksZy5jbGllbnRYLGcuY2xpZW50WSxnLmN0cmxLZXksZy5hbHRLZXksZy5zaGlmdEtleSxnLm1ldGFLZXksZy5idXR0b24sZy5yZWxhdGVkVGFyZ2V0KX1kfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZiwiYnV0dG9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiBlfSxlbnVtZXJhYmxlOiEwfSk7dmFyIGg9MDtyZXR1cm4gaD1iLnByZXNzdXJlP2IucHJlc3N1cmU6ZT8uNTowLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGYse3BvaW50ZXJJZDp7dmFsdWU6Yi5wb2ludGVySWR8fDAsZW51bWVyYWJsZTohMH0sd2lkdGg6e3ZhbHVlOmIud2lkdGh8fDAsZW51bWVyYWJsZTohMH0saGVpZ2h0Ont2YWx1ZTpiLmhlaWdodHx8MCxlbnVtZXJhYmxlOiEwfSxwcmVzc3VyZTp7dmFsdWU6aCxlbnVtZXJhYmxlOiEwfSx0aWx0WDp7dmFsdWU6Yi50aWx0WHx8MCxlbnVtZXJhYmxlOiEwfSx0aWx0WTp7dmFsdWU6Yi50aWx0WXx8MCxlbnVtZXJhYmxlOiEwfSxwb2ludGVyVHlwZTp7dmFsdWU6Yi5wb2ludGVyVHlwZXx8IiIsZW51bWVyYWJsZTohMH0saHdUaW1lc3RhbXA6e3ZhbHVlOmIuaHdUaW1lc3RhbXB8fDAsZW51bWVyYWJsZTohMH0saXNQcmltYXJ5Ont2YWx1ZTpiLmlzUHJpbWFyeXx8ITEsZW51bWVyYWJsZTohMH19KSxmfXZhciBjPSExLGQ9ITE7dHJ5e3ZhciBlPW5ldyBNb3VzZUV2ZW50KCJjbGljayIse2J1dHRvbnM6MX0pO2M9ITAsZD0xPT09ZS5idXR0b25zfWNhdGNoKGYpe31hLlBvaW50ZXJFdmVudHx8KGEuUG9pbnRlckV2ZW50PWIpfSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLmlkcz1bXSx0aGlzLnBvaW50ZXJzPVtdfWIucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmlkcy5pbmRleE9mKGEpO2M+LTE/dGhpcy5wb2ludGVyc1tjXT1iOih0aGlzLmlkcy5wdXNoKGEpLHRoaXMucG9pbnRlcnMucHVzaChiKSl9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pZHMuaW5kZXhPZihhKT4tMX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pZHMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5pZHMuc3BsaWNlKGIsMSksdGhpcy5wb2ludGVycy5zcGxpY2UoYiwxKSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmlkcy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnBvaW50ZXJzW2JdfSxnZXQgc2l6ZSgpe3JldHVybiB0aGlzLnBvaW50ZXJzLmxlbmd0aH0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmlkcy5sZW5ndGg9MCx0aGlzLnBvaW50ZXJzLmxlbmd0aD0wfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7dGhpcy5pZHMuZm9yRWFjaChmdW5jdGlvbihjLGQpe2EuY2FsbChiLGMsdGhpcy5wb2ludGVyc1tkXSx0aGlzKX0sdGhpcyl9fSxhLlBvaW50ZXJNYXA9d2luZG93Lk1hcCYmTWFwLnByb3RvdHlwZS5mb3JFYWNoP01hcDpifSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIFdlYWtNYXAmJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRmlyZWZveC8iKTwwKWI9V2Vha01hcDtlbHNle3ZhciBjPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxkPU9iamVjdC5oYXNPd25Qcm9wZXJ0eSxlPShuZXcgRGF0ZSkuZ2V0VGltZSgpJTFlOTtiPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoZSsrICsiX18iKX0sYi5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhLGIpe2MoYSx0aGlzLm5hbWUse3ZhbHVlOmIsd3JpdGFibGU6ITB9KX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBkLmNhbGwoYSx0aGlzLm5hbWUpP2FbdGhpcy5uYW1lXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19fWEuU2lkZVRhYmxlPWJ9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPXt0YXJnZXRzOm5ldyBhLlNpZGVUYWJsZSxoYW5kbGVkRXZlbnRzOm5ldyBhLlNpZGVUYWJsZSxwb2ludGVybWFwOm5ldyBhLlBvaW50ZXJNYXAsZXZlbnRNYXA6e30sZXZlbnRTb3VyY2VzOnt9LGV2ZW50U291cmNlTGlzdDpbXSxyZWdpc3RlclNvdXJjZTpmdW5jdGlvbihhLGIpe3ZhciBjPWIsZD1jLmV2ZW50cztkJiYoZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2NbYV0mJih0aGlzLmV2ZW50TWFwW2FdPWNbYV0uYmluZChjKSl9LHRoaXMpLHRoaXMuZXZlbnRTb3VyY2VzW2FdPWMsdGhpcy5ldmVudFNvdXJjZUxpc3QucHVzaChjKSl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMuZXZlbnRTb3VyY2VMaXN0Lmxlbmd0aCxkPTA7Yz5kJiYoYj10aGlzLmV2ZW50U291cmNlTGlzdFtkXSk7ZCsrKWIucmVnaXN0ZXIuY2FsbChiLGEpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMuZXZlbnRTb3VyY2VMaXN0Lmxlbmd0aCxkPTA7Yz5kJiYoYj10aGlzLmV2ZW50U291cmNlTGlzdFtkXSk7ZCsrKWIudW5yZWdpc3Rlci5jYWxsKGIsYSl9LGRvd246ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJkb3duIixhKX0sbW92ZTpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcm1vdmUiLGEpfSx1cDpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcnVwIixhKX0sZW50ZXI6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSExLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyZW50ZXIiLGEpfSxsZWF2ZTpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITEsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJsZWF2ZSIsYSl9LG92ZXI6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSEwLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyb3ZlciIsYSl9LG91dDpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITAsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJvdXQiLGEpfSxjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJjYW5jZWwiLGEpfSxsZWF2ZU91dDpmdW5jdGlvbihhKXthLnRhcmdldC5jb250YWlucyhhLnJlbGF0ZWRUYXJnZXQpfHx0aGlzLmxlYXZlKGEpLHRoaXMub3V0KGEpfSxlbnRlck92ZXI6ZnVuY3Rpb24oYSl7YS50YXJnZXQuY29udGFpbnMoYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5lbnRlcihhKSx0aGlzLm92ZXIoYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGI9YS50eXBlLGM9dGhpcy5ldmVudE1hcCYmdGhpcy5ldmVudE1hcFtiXTtjJiZjKGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxsaXN0ZW46ZnVuY3Rpb24oYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5hZGRFdmVudChhLGIpfSx0aGlzKX0sdW5saXN0ZW46ZnVuY3Rpb24oYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5yZW1vdmVFdmVudChhLGIpfSx0aGlzKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYSxiKXthLmFkZEV2ZW50TGlzdGVuZXIoYix0aGlzLmJvdW5kSGFuZGxlcil9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGEsYil7YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxtYWtlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgUG9pbnRlckV2ZW50KGEsYik7cmV0dXJuIHRoaXMudGFyZ2V0cy5zZXQoYyx0aGlzLnRhcmdldHMuZ2V0KGIpfHxiLnRhcmdldCksY30sZmlyZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tYWtlRXZlbnQoYSxiKTtyZXR1cm4gdGhpcy5kaXNwYXRjaEV2ZW50KGMpfSxjbG9uZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gYn0sZ2V0VGFyZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNhcHR1cmVJbmZvJiZ0aGlzLmNhcHR1cmVJbmZvLmlkPT09YS5wb2ludGVySWQ/dGhpcy5jYXB0dXJlSW5mby50YXJnZXQ6dGhpcy50YXJnZXRzLmdldChhKX0sc2V0Q2FwdHVyZTpmdW5jdGlvbihhLGIpe3RoaXMuY2FwdHVyZUluZm8mJnRoaXMucmVsZWFzZUNhcHR1cmUodGhpcy5jYXB0dXJlSW5mby5pZCksdGhpcy5jYXB0dXJlSW5mbz17aWQ6YSx0YXJnZXQ6Yn07dmFyIGM9bmV3IFBvaW50ZXJFdmVudCgiZ290cG9pbnRlcmNhcHR1cmUiLHtidWJibGVzOiEwfSk7dGhpcy5pbXBsaWNpdFJlbGVhc2U9dGhpcy5yZWxlYXNlQ2FwdHVyZS5iaW5kKHRoaXMsYSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIix0aGlzLmltcGxpY2l0UmVsZWFzZSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmNhbmNlbCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLHRoaXMudGFyZ2V0cy5zZXQoYyxiKSx0aGlzLmFzeW5jRGlzcGF0Y2hFdmVudChjKX0scmVsZWFzZUNhcHR1cmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5jYXB0dXJlSW5mbyYmdGhpcy5jYXB0dXJlSW5mby5pZD09PWEpe3ZhciBiPW5ldyBQb2ludGVyRXZlbnQoImxvc3Rwb2ludGVyY2FwdHVyZSIse2J1YmJsZXM6ITB9KSxjPXRoaXMuY2FwdHVyZUluZm8udGFyZ2V0O3RoaXMuY2FwdHVyZUluZm89bnVsbCxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyY2FuY2VsIix0aGlzLmltcGxpY2l0UmVsZWFzZSksdGhpcy50YXJnZXRzLnNldChiLGMpLHRoaXMuYXN5bmNEaXNwYXRjaEV2ZW50KGIpfX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFRhcmdldChhKTtyZXR1cm4gYj9iLmRpc3BhdGNoRXZlbnQoYSk6dm9pZCAwfSxhc3luY0Rpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSl7c2V0VGltZW91dCh0aGlzLmRpc3BhdGNoRXZlbnQuYmluZCh0aGlzLGEpLDApfX07Yi5ib3VuZEhhbmRsZXI9Yi5ldmVudEhhbmRsZXIuYmluZChiKSxhLmRpc3BhdGNoZXI9YixhLnJlZ2lzdGVyPWIucmVnaXN0ZXIuYmluZChiKSxhLnVucmVnaXN0ZXI9Yi51bnJlZ2lzdGVyLmJpbmQoYil9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGMsZCl7dGhpcy5hZGRDYWxsYmFjaz1hLmJpbmQoZCksdGhpcy5yZW1vdmVDYWxsYmFjaz1iLmJpbmQoZCksdGhpcy5jaGFuZ2VkQ2FsbGJhY2s9Yy5iaW5kKGQpLGcmJih0aGlzLm9ic2VydmVyPW5ldyBnKHRoaXMubXV0YXRpb25XYXRjaGVyLmJpbmQodGhpcykpKX12YXIgYz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGQ9QXJyYXkucHJvdG90eXBlLm1hcC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLm1hcCksZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5zbGljZSksZj1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZmlsdGVyKSxnPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixoPSJbdG91Y2gtYWN0aW9uXSIsaT17c3VidHJlZTohMCxjaGlsZExpc3Q6ITAsYXR0cmlidXRlczohMCxhdHRyaWJ1dGVPbGRWYWx1ZTohMCxhdHRyaWJ1dGVGaWx0ZXI6WyJ0b3VjaC1hY3Rpb24iXX07Yi5wcm90b3R5cGU9e3dhdGNoU3VidHJlZTpmdW5jdGlvbihiKXthLnRhcmdldEZpbmRpbmcuY2FuVGFyZ2V0KGIpJiZ0aGlzLm9ic2VydmVyLm9ic2VydmUoYixpKX0sZW5hYmxlT25TdWJ0cmVlOmZ1bmN0aW9uKGEpe3RoaXMud2F0Y2hTdWJ0cmVlKGEpLGE9PT1kb2N1bWVudCYmImNvbXBsZXRlIiE9PWRvY3VtZW50LnJlYWR5U3RhdGU/dGhpcy5pbnN0YWxsT25Mb2FkKCk6dGhpcy5pbnN0YWxsTmV3U3VidHJlZShhKX0saW5zdGFsbE5ld1N1YnRyZWU6ZnVuY3Rpb24oYSl7Yyh0aGlzLmZpbmRFbGVtZW50cyhhKSx0aGlzLmFkZEVsZW1lbnQsdGhpcyl9LGZpbmRFbGVtZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChoKTpbXX0scmVtb3ZlRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUNhbGxiYWNrKGEpfSxhZGRFbGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMuYWRkQ2FsbGJhY2soYSl9LGVsZW1lbnRDaGFuZ2VkOmZ1bmN0aW9uKGEsYil7dGhpcy5jaGFuZ2VkQ2FsbGJhY2soYSxiKX0sY29uY2F0TGlzdHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5jb25jYXQoZShiKSl9LGluc3RhbGxPbkxvYWQ6ZnVuY3Rpb24oKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIix0aGlzLmluc3RhbGxOZXdTdWJ0cmVlLmJpbmQodGhpcyxkb2N1bWVudCkpfSxpc0VsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERX0sZmxhdHRlbk11dGF0aW9uVHJlZTpmdW5jdGlvbihhKXt2YXIgYj1kKGEsdGhpcy5maW5kRWxlbWVudHMsdGhpcyk7cmV0dXJuIGIucHVzaChmKGEsdGhpcy5pc0VsZW1lbnQpKSxiLnJlZHVjZSh0aGlzLmNvbmNhdExpc3RzLFtdKX0sbXV0YXRpb25XYXRjaGVyOmZ1bmN0aW9uKGEpe2EuZm9yRWFjaCh0aGlzLm11dGF0aW9uSGFuZGxlcix0aGlzKX0sbXV0YXRpb25IYW5kbGVyOmZ1bmN0aW9uKGEpe2lmKCJjaGlsZExpc3QiPT09YS50eXBlKXt2YXIgYj10aGlzLmZsYXR0ZW5NdXRhdGlvblRyZWUoYS5hZGRlZE5vZGVzKTtiLmZvckVhY2godGhpcy5hZGRFbGVtZW50LHRoaXMpO3ZhciBjPXRoaXMuZmxhdHRlbk11dGF0aW9uVHJlZShhLnJlbW92ZWROb2Rlcyk7Yy5mb3JFYWNoKHRoaXMucmVtb3ZlRWxlbWVudCx0aGlzKX1lbHNlImF0dHJpYnV0ZXMiPT09YS50eXBlJiZ0aGlzLmVsZW1lbnRDaGFuZ2VkKGEudGFyZ2V0LGEub2xkVmFsdWUpfX0sZ3x8KGIucHJvdG90eXBlLndhdGNoU3VidHJlZT1mdW5jdGlvbigpe2NvbnNvbGUud2FybigiUG9pbnRlckV2ZW50c1BvbHlmaWxsOiBNdXRhdGlvbk9ic2VydmVycyBub3QgZm91bmQsIHRvdWNoLWFjdGlvbiB3aWxsIG5vdCBiZSBkeW5hbWljYWxseSBkZXRlY3RlZCIpfSksYS5JbnN0YWxsZXI9Yn0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9MjUsZT17UE9JTlRFUl9JRDoxLFBPSU5URVJfVFlQRToibW91c2UiLGV2ZW50czpbIm1vdXNlZG93biIsIm1vdXNlbW92ZSIsIm1vdXNldXAiLCJtb3VzZW92ZXIiLCJtb3VzZW91dCJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LGxhc3RUb3VjaGVzOltdLGlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2g6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5sYXN0VG91Y2hlcyxlPWEuY2xpZW50WCxmPWEuY2xpZW50WSxnPTAsaD1jLmxlbmd0aDtoPmcmJihiPWNbZ10pO2crKyl7dmFyIGk9TWF0aC5hYnMoZS1iLngpLGo9TWF0aC5hYnMoZi1iLnkpO2lmKGQ+PWkmJmQ+PWopcmV0dXJuITB9fSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5jbG9uZUV2ZW50KGEpO3JldHVybiBjLnBvaW50ZXJJZD10aGlzLlBPSU5URVJfSUQsYy5pc1ByaW1hcnk9ITAsYy5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRSxjfSxtb3VzZWRvd246ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGQ9Yy5oYXModGhpcy5QT0lOVEVSX0lEKTtkJiZ0aGlzLmNhbmNlbChhKTt2YXIgZT10aGlzLnByZXBhcmVFdmVudChhKTtjLnNldCh0aGlzLlBPSU5URVJfSUQsYSksYi5kb3duKGUpfX0sbW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubW92ZShjKX19LG1vdXNldXA6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGQ9Yy5nZXQodGhpcy5QT0lOVEVSX0lEKTtpZihkJiZkLmJ1dHRvbj09PWEuYnV0dG9uKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChhKTtiLnVwKGUpLHRoaXMuY2xlYW51cE1vdXNlKCl9fX0sbW91c2VvdmVyOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZW50ZXJPdmVyKGMpfX0sbW91c2VvdXQ6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5sZWF2ZU91dChjKX19LGNhbmNlbDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmNhbmNlbChjKSx0aGlzLmNsZWFudXBNb3VzZSgpfSxjbGVhbnVwTW91c2U6ZnVuY3Rpb24oKXtjLmRlbGV0ZSh0aGlzLlBPSU5URVJfSUQpfX07YS5tb3VzZUV2ZW50cz1lfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYixjPWEuZGlzcGF0Y2hlcixkPWEuZmluZFRhcmdldCxlPWEudGFyZ2V0RmluZGluZy5hbGxTaGFkb3dzLmJpbmQoYS50YXJnZXRGaW5kaW5nKSxmPWMucG9pbnRlcm1hcCxnPUFycmF5LnByb3RvdHlwZS5tYXAuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5tYXApLGg9MjUwMCxpPSJ0b3VjaC1hY3Rpb24iLGo9InN0cmluZyI9PXR5cGVvZiBkb2N1bWVudC5oZWFkLnN0eWxlLnRvdWNoQWN0aW9uLGs9e3Njcm9sbFR5cGU6bmV3IGEuU2lkZVRhYmxlLGV2ZW50czpbInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIl0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7aj9jLmxpc3RlbihhLHRoaXMuZXZlbnRzKTpiLmVuYWJsZU9uU3VidHJlZShhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtqJiZjLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxlbGVtZW50QWRkZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoaSksZD10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGIpO2QmJih0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksYy5saXN0ZW4oYSx0aGlzLmV2ZW50cyksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKSxjLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcykpfSxlbGVtZW50UmVtb3ZlZDpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbFR5cGUuZGVsZXRlKGEpLGMudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5kZWxldGUoYSksYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcyl9LGVsZW1lbnRDaGFuZ2VkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoaSksZD10aGlzLnRvdWNoQWN0aW9udG9TY3JvbGxUeXBlKGMpLGY9dGhpcy50b3VjaEFjdGlvblRvU2Nyb2xsVHlwZShiKTtkJiZmPyh0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKX0sdGhpcykpOmY/dGhpcy5lbGVtZW50UmVtb3ZlZChhKTpkJiZ0aGlzLmVsZW1lbnRBZGRlZChhKX0sc2Nyb2xsVHlwZXM6e0VNSVRURVI6Im5vbmUiLFhTQ1JPTExFUjoicGFuLXgiLFlTQ1JPTExFUjoicGFuLXkiLFNDUk9MTEVSOi9eKD86cGFuLXggcGFuLXkpfCg/OnBhbi15IHBhbi14KXxhdXRvJC99LHRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWEsYz10aGlzLnNjcm9sbFR5cGVzO3JldHVybiJub25lIj09PWI/Im5vbmUiOmI9PT1jLlhTQ1JPTExFUj8iWCI6Yj09PWMuWVNDUk9MTEVSPyJZIjpjLlNDUk9MTEVSLmV4ZWMoYik/IlhZIjp2b2lkIDB9LFBPSU5URVJfVFlQRToidG91Y2giLGZpcnN0VG91Y2g6bnVsbCxpc1ByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5maXJzdFRvdWNoPT09YS5pZGVudGlmaWVyfSxzZXRQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7bnVsbD09PXRoaXMuZmlyc3RUb3VjaCYmKHRoaXMuZmlyc3RUb3VjaD1hLmlkZW50aWZpZXIsdGhpcy5maXJzdFhZPXtYOmEuY2xpZW50WCxZOmEuY2xpZW50WX0sdGhpcy5zY3JvbGxpbmc9ITEpfSxyZW1vdmVQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7dGhpcy5pc1ByaW1hcnlUb3VjaChhKSYmKHRoaXMuZmlyc3RUb3VjaD1udWxsLHRoaXMuZmlyc3RYWT1udWxsKX0sdG91Y2hUb1BvaW50ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5jbG9uZUV2ZW50KGEpO3JldHVybiBiLnBvaW50ZXJJZD1hLmlkZW50aWZpZXIrMixiLnRhcmdldD1kKGIpLGIuYnViYmxlcz0hMCxiLmNhbmNlbGFibGU9ITAsYi5idXR0b249MCxiLmJ1dHRvbnM9MSxiLndpZHRoPWEud2Via2l0UmFkaXVzWHx8YS5yYWRpdXNYfHwwLGIuaGVpZ2h0PWEud2Via2l0UmFkaXVzWXx8YS5yYWRpdXNZfHwwLGIucHJlc3N1cmU9YS53ZWJraXRGb3JjZXx8YS5mb3JjZXx8LjUsYi5pc1ByaW1hcnk9dGhpcy5pc1ByaW1hcnlUb3VjaChhKSxiLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFLGJ9LHByb2Nlc3NUb3VjaGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5jaGFuZ2VkVG91Y2hlcyxkPWcoYyx0aGlzLnRvdWNoVG9Qb2ludGVyLHRoaXMpO2QuZm9yRWFjaChiLHRoaXMpfSxzaG91bGRTY3JvbGw6ZnVuY3Rpb24oYSl7aWYodGhpcy5maXJzdFhZKXt2YXIgYixjPXRoaXMuc2Nyb2xsVHlwZS5nZXQoYS5jdXJyZW50VGFyZ2V0KTtpZigibm9uZSI9PT1jKWI9ITE7ZWxzZSBpZigiWFkiPT09YyliPSEwO2Vsc2V7dmFyIGQ9YS5jaGFuZ2VkVG91Y2hlc1swXSxlPWMsZj0iWSI9PT1jPyJYIjoiWSIsZz1NYXRoLmFicyhkWyJjbGllbnQiK2VdLXRoaXMuZmlyc3RYWVtlXSksaD1NYXRoLmFicyhkWyJjbGllbnQiK2ZdLXRoaXMuZmlyc3RYWVtmXSk7Yj1nPj1ofXJldHVybiB0aGlzLmZpcnN0WFk9bnVsbCxifX0sZmluZFRvdWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGM9YVtkXSk7ZCsrKWlmKGMuaWRlbnRpZmllcj09PWIpcmV0dXJuITB9LHZhY3V1bVRvdWNoZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YS50b3VjaGVzO2lmKGYuc2l6ZT49Yi5sZW5ndGgpe3ZhciBjPVtdO2YuZm9yRWFjaChmdW5jdGlvbihhLGQpe2lmKDEhPT1hJiYhdGhpcy5maW5kVG91Y2goYixhLTIpKXt2YXIgZT1kLm91dDtjLnB1c2godGhpcy50b3VjaFRvUG9pbnRlcihlKSl9fSx0aGlzKSxjLmZvckVhY2godGhpcy5jYW5jZWxPdXQsdGhpcyl9fSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMudmFjdXVtVG91Y2hlcyhhKSx0aGlzLnNldFByaW1hcnlUb3VjaChhLmNoYW5nZWRUb3VjaGVzWzBdKSx0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnNjcm9sbGluZ3x8dGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMub3ZlckRvd24pfSxvdmVyRG93bjpmdW5jdGlvbihhKXtmLnNldChhLnBvaW50ZXJJZCx7dGFyZ2V0OmEudGFyZ2V0LG91dDphLG91dFRhcmdldDphLnRhcmdldH0pLGMub3ZlcihhKSxjLmRvd24oYSl9LHRvdWNobW92ZTpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbGluZ3x8KHRoaXMuc2hvdWxkU2Nyb2xsKGEpPyh0aGlzLnNjcm9sbGluZz0hMCx0aGlzLnRvdWNoY2FuY2VsKGEpKTooYS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLm1vdmVPdmVyT3V0KSkpfSxtb3ZlT3Zlck91dDpmdW5jdGlvbihhKXt2YXIgYj1hLGQ9Zi5nZXQoYi5wb2ludGVySWQpO2lmKGQpe3ZhciBlPWQub3V0LGc9ZC5vdXRUYXJnZXQ7Yy5tb3ZlKGIpLGUmJmchPT1iLnRhcmdldCYmKGUucmVsYXRlZFRhcmdldD1iLnRhcmdldCxiLnJlbGF0ZWRUYXJnZXQ9ZyxlLnRhcmdldD1nLGIudGFyZ2V0PyhjLmxlYXZlT3V0KGUpLGMuZW50ZXJPdmVyKGIpKTooYi50YXJnZXQ9ZyxiLnJlbGF0ZWRUYXJnZXQ9bnVsbCx0aGlzLmNhbmNlbE91dChiKSkpLGQub3V0PWIsZC5vdXRUYXJnZXQ9Yi50YXJnZXR9fSx0b3VjaGVuZDpmdW5jdGlvbihhKXt0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy51cE91dCl9LHVwT3V0OmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsaW5nfHwoYy51cChhKSxjLm91dChhKSksdGhpcy5jbGVhblVwUG9pbnRlcihhKX0sdG91Y2hjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMuY2FuY2VsT3V0KX0sY2FuY2VsT3V0OmZ1bmN0aW9uKGEpe2MuY2FuY2VsKGEpLGMub3V0KGEpLHRoaXMuY2xlYW5VcFBvaW50ZXIoYSl9LGNsZWFuVXBQb2ludGVyOmZ1bmN0aW9uKGEpe2YuZGVsZXRlKGEucG9pbnRlcklkKSx0aGlzLnJlbW92ZVByaW1hcnlUb3VjaChhKX0sZGVkdXBTeW50aE1vdXNlOmZ1bmN0aW9uKGIpe3ZhciBjPWEubW91c2VFdmVudHMubGFzdFRvdWNoZXMsZD1iLmNoYW5nZWRUb3VjaGVzWzBdO2lmKHRoaXMuaXNQcmltYXJ5VG91Y2goZCkpe3ZhciBlPXt4OmQuY2xpZW50WCx5OmQuY2xpZW50WX07Yy5wdXNoKGUpO3ZhciBmPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5pbmRleE9mKGIpO2M+LTEmJmEuc3BsaWNlKGMsMSl9LmJpbmQobnVsbCxjLGUpO3NldFRpbWVvdXQoZixoKX19fTtqfHwoYj1uZXcgYS5JbnN0YWxsZXIoay5lbGVtZW50QWRkZWQsay5lbGVtZW50UmVtb3ZlZCxrLmVsZW1lbnRDaGFuZ2VkLGspKSxhLnRvdWNoRXZlbnRzPWt9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPWIucG9pbnRlcm1hcCxkPXdpbmRvdy5NU1BvaW50ZXJFdmVudCYmIm51bWJlciI9PXR5cGVvZiB3aW5kb3cuTVNQb2ludGVyRXZlbnQuTVNQT0lOVEVSX1RZUEVfTU9VU0UsZT17ZXZlbnRzOlsiTVNQb2ludGVyRG93biIsIk1TUG9pbnRlck1vdmUiLCJNU1BvaW50ZXJVcCIsIk1TUG9pbnRlck91dCIsIk1TUG9pbnRlck92ZXIiLCJNU1BvaW50ZXJDYW5jZWwiLCJNU0dvdFBvaW50ZXJDYXB0dXJlIiwiTVNMb3N0UG9pbnRlckNhcHR1cmUiXSxyZWdpc3RlcjpmdW5jdGlvbihhKXtiLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtiLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxQT0lOVEVSX1RZUEVTOlsiIiwidW5hdmFpbGFibGUiLCJ0b3VjaCIsInBlbiIsIm1vdXNlIl0scHJlcGFyZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBjPWE7cmV0dXJuIGQmJihjPWIuY2xvbmVFdmVudChhKSxjLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFU1thLnBvaW50ZXJUeXBlXSksY30sY2xlYW51cDpmdW5jdGlvbihhKXtjLmRlbGV0ZShhKX0sTVNQb2ludGVyRG93bjpmdW5jdGlvbihhKXtjLnNldChhLnBvaW50ZXJJZCxhKTt2YXIgZD10aGlzLnByZXBhcmVFdmVudChhKTtiLmRvd24oZCl9LE1TUG9pbnRlck1vdmU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5tb3ZlKGMpfSxNU1BvaW50ZXJVcDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLnVwKGMpLHRoaXMuY2xlYW51cChhLnBvaW50ZXJJZCl9LE1TUG9pbnRlck91dDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmxlYXZlT3V0KGMpfSxNU1BvaW50ZXJPdmVyOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZW50ZXJPdmVyKGMpfSxNU1BvaW50ZXJDYW5jZWw6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5jYW5jZWwoYyksdGhpcy5jbGVhbnVwKGEucG9pbnRlcklkKX0sTVNMb3N0UG9pbnRlckNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5tYWtlRXZlbnQoImxvc3Rwb2ludGVyY2FwdHVyZSIsYSk7Yi5kaXNwYXRjaEV2ZW50KGMpfSxNU0dvdFBvaW50ZXJDYXB0dXJlOmZ1bmN0aW9uKGEpe3ZhciBjPWIubWFrZUV2ZW50KCJnb3Rwb2ludGVyY2FwdHVyZSIsYSk7Yi5kaXNwYXRjaEV2ZW50KGMpfX07YS5tc0V2ZW50cz1lfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXI7aWYodm9pZCAwPT09d2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCl7aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5uYXZpZ2F0b3IsInBvaW50ZXJFbmFibGVkIix7dmFsdWU6ITAsZW51bWVyYWJsZTohMH0pLHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCl7dmFyIGM9d2luZG93Lm5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cubmF2aWdhdG9yLCJtYXhUb3VjaFBvaW50cyIse3ZhbHVlOmMsZW51bWVyYWJsZTohMH0pLGIucmVnaXN0ZXJTb3VyY2UoIm1zIixhLm1zRXZlbnRzKX1lbHNlIGIucmVnaXN0ZXJTb3VyY2UoIm1vdXNlIixhLm1vdXNlRXZlbnRzKSx2b2lkIDAhPT13aW5kb3cub250b3VjaHN0YXJ0JiZiLnJlZ2lzdGVyU291cmNlKCJ0b3VjaCIsYS50b3VjaEV2ZW50cyk7Yi5yZWdpc3Rlcihkb2N1bWVudCl9fSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2lmKCFlLnBvaW50ZXJtYXAuaGFzKGEpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZFBvaW50ZXJJZCIpfXZhciBjLGQsZT1hLmRpc3BhdGNoZXIsZj13aW5kb3cubmF2aWdhdG9yO2YubXNQb2ludGVyRW5hYmxlZD8oYz1mdW5jdGlvbihhKXtiKGEpLHRoaXMubXNTZXRQb2ludGVyQ2FwdHVyZShhKX0sZD1mdW5jdGlvbihhKXtiKGEpLHRoaXMubXNSZWxlYXNlUG9pbnRlckNhcHR1cmUoYSl9KTooYz1mdW5jdGlvbihhKXtiKGEpLGUuc2V0Q2FwdHVyZShhLHRoaXMpfSxkPWZ1bmN0aW9uKGEpe2IoYSksZS5yZWxlYXNlQ2FwdHVyZShhLHRoaXMpfSksRWxlbWVudC5wcm90b3R5cGUuc2V0UG9pbnRlckNhcHR1cmV8fE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEVsZW1lbnQucHJvdG90eXBlLHtzZXRQb2ludGVyQ2FwdHVyZTp7dmFsdWU6Y30scmVsZWFzZVBvaW50ZXJDYXB0dXJlOnt2YWx1ZTpkfX0pfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxQb2ludGVyR2VzdHVyZUV2ZW50LnByb3RvdHlwZS5wcmV2ZW50VGFwPWZ1bmN0aW9uKCl7dGhpcy50YXBQcmV2ZW50ZWQ9ITB9LGZ1bmN0aW9uKGEpe2E9YXx8e30sYS51dGlscz17TENBOntmaW5kOmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGE7aWYoYS5jb250YWlucyl7aWYoYS5jb250YWlucyhiKSlyZXR1cm4gYTtpZihiLmNvbnRhaW5zKGEpKXJldHVybiBifXZhciBjPXRoaXMuZGVwdGgoYSksZD10aGlzLmRlcHRoKGIpLGU9Yy1kO2ZvcihlPjA/YT10aGlzLndhbGsoYSxlKTpiPXRoaXMud2FsayhiLC1lKTthJiZiJiZhIT09YjspYT10aGlzLndhbGsoYSwxKSxiPXRoaXMud2FsayhiLDEpO3JldHVybiBhfSx3YWxrOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrKylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX0sZGVwdGg6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YTspYisrLGE9YS5wYXJlbnROb2RlO3JldHVybiBifX19LGEuZmluZExDQT1mdW5jdGlvbihiLGMpe3JldHVybiBhLnV0aWxzLkxDQS5maW5kKGIsYyl9LHdpbmRvdy5Qb2ludGVyR2VzdHVyZXM9YX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBXZWFrTWFwJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3gvIik8MCliPVdlYWtNYXA7ZWxzZXt2YXIgYz1PYmplY3QuZGVmaW5lUHJvcGVydHksZD1PYmplY3QuaGFzT3duUHJvcGVydHksZT0obmV3IERhdGUpLmdldFRpbWUoKSUxZTk7Yj1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGUrKyArIl9fIil9LGIucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXtjKGEsdGhpcy5uYW1lLHt2YWx1ZTpiLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gZC5jYWxsKGEsdGhpcy5uYW1lKT9hW3RoaXMubmFtZV06dm9pZCAwfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt0aGlzLnNldChhLHZvaWQgMCl9fX1hLlNpZGVUYWJsZT1ifSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dGhpcy5pZHM9W10sdGhpcy5wb2ludGVycz1bXX1iLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5pZHMuaW5kZXhPZihhKTtjPi0xP3RoaXMucG9pbnRlcnNbY109YjoodGhpcy5pZHMucHVzaChhKSx0aGlzLnBvaW50ZXJzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaWRzLmluZGV4T2YoYSk+LTF9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaWRzLmluZGV4T2YoYSk7Yj4tMSYmKHRoaXMuaWRzLnNwbGljZShiLDEpLHRoaXMucG9pbnRlcnMuc3BsaWNlKGIsMSkpfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pZHMuaW5kZXhPZihhKTtyZXR1cm4gdGhpcy5wb2ludGVyc1tiXX0sZ2V0IHNpemUoKXtyZXR1cm4gdGhpcy5wb2ludGVycy5sZW5ndGh9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5pZHMubGVuZ3RoPTAsdGhpcy5wb2ludGVycy5sZW5ndGg9MH19LHdpbmRvdy5NYXAmJihiPXdpbmRvdy5NYXApLGEuUG9pbnRlck1hcD1ifSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj17aGFuZGxlZEV2ZW50czpuZXcgYS5TaWRlVGFibGUsdGFyZ2V0czpuZXcgYS5TaWRlVGFibGUsaGFuZGxlcnM6e30scmVjb2duaXplcnM6e30sZXZlbnRzOlsicG9pbnRlcmRvd24iLCJwb2ludGVybW92ZSIsInBvaW50ZXJ1cCIsInBvaW50ZXJvdmVyIiwicG9pbnRlcm91dCIsInBvaW50ZXJjYW5jZWwiXSxyZWdpc3RlclJlY29nbml6ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iO3RoaXMucmVjb2duaXplcnNbYV09Yyx0aGlzLmV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKGNbYV0pe3ZhciBiPWNbYV0uYmluZChjKTt0aGlzLmFkZEhhbmRsZXIoYSxiKX19LHRoaXMpfSxhZGRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTt0aGlzLmhhbmRsZXJzW2NdfHwodGhpcy5oYW5kbGVyc1tjXT1bXSksdGhpcy5oYW5kbGVyc1tjXS5wdXNoKGIpfSxyZWdpc3RlclRhcmdldDpmdW5jdGlvbihhKXt0aGlzLmxpc3Rlbih0aGlzLmV2ZW50cyxhKX0sdW5yZWdpc3RlclRhcmdldDpmdW5jdGlvbihhKXt0aGlzLnVubGlzdGVuKHRoaXMuZXZlbnRzLGEpfSxldmVudEhhbmRsZXI6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaGFuZGxlZEV2ZW50cy5nZXQoYSkpe3ZhciBiLGM9YS50eXBlOyhiPXRoaXMuaGFuZGxlcnNbY10pJiZ0aGlzLm1ha2VRdWV1ZShiLGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxtYWtlUXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNsb25lRXZlbnQoYik7c2V0VGltZW91dCh0aGlzLnJ1blF1ZXVlLmJpbmQodGhpcyxhLGMpLDApfSxydW5RdWV1ZTpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBvaW50ZXJJZD1iLnBvaW50ZXJJZDtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspYyhiKTt0aGlzLmN1cnJlbnRQb2ludGVySWQ9MH0sbGlzdGVuOmZ1bmN0aW9uKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuYWRkRXZlbnQoYSx0aGlzLmJvdW5kSGFuZGxlciwhMSxiKX0sdGhpcyl9LHVubGlzdGVuOmZ1bmN0aW9uKGEpe2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUV2ZW50KGEsdGhpcy5ib3VuZEhhbmRsZXIsITEsaW5UYXJnZXQpfSx0aGlzKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRFdmVudExpc3RlbmVyKGEsYixjKX0scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYixjKQp9LG1ha2VFdmVudDpmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgUG9pbnRlckdlc3R1cmVFdmVudChhLGIpfSxjbG9uZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gYn0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fHRoaXMudGFyZ2V0cy5nZXQoYSk7YyYmKGMuZGlzcGF0Y2hFdmVudChhKSxhLnRhcFByZXZlbnRlZCYmdGhpcy5wcmV2ZW50VGFwKHRoaXMuY3VycmVudFBvaW50ZXJJZCkpfSxhc3luY0Rpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudChhLGIpfS5iaW5kKHRoaXMpO3NldFRpbWVvdXQoYywwKX0scHJldmVudFRhcDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJlY29nbml6ZXJzLnRhcDtiJiZiLnByZXZlbnRUYXAoYSl9fTtiLmJvdW5kSGFuZGxlcj1iLmV2ZW50SGFuZGxlci5iaW5kKGIpLGEuZGlzcGF0Y2hlcj1iLGEucmVnaXN0ZXI9ZnVuY3Rpb24oYil7dmFyIGM9d2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbDtjJiZjLnJlZ2lzdGVyKGIpLGEuZGlzcGF0Y2hlci5yZWdpc3RlclRhcmdldChiKX0sYi5yZWdpc3RlclRhcmdldChkb2N1bWVudCl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPXtIT0xEX0RFTEFZOjIwMCxXSUdHTEVfVEhSRVNIT0xEOjE2LGV2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0saGVsZFBvaW50ZXI6bnVsbCxob2xkSm9iOm51bGwscHVsc2U6ZnVuY3Rpb24oKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMuaGVsZFBvaW50ZXIudGltZVN0YW1wLGI9dGhpcy5oZWxkPyJob2xkcHVsc2UiOiJob2xkIjt0aGlzLmZpcmVIb2xkKGIsYSksdGhpcy5oZWxkPSEwfSxjYW5jZWw6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuaG9sZEpvYiksdGhpcy5oZWxkJiZ0aGlzLmZpcmVIb2xkKCJyZWxlYXNlIiksdGhpcy5oZWxkPSExLHRoaXMuaGVsZFBvaW50ZXI9bnVsbCx0aGlzLnRhcmdldD1udWxsLHRoaXMuaG9sZEpvYj1udWxsfSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIXRoaXMuaGVsZFBvaW50ZXImJih0aGlzLmhlbGRQb2ludGVyPWEsdGhpcy50YXJnZXQ9YS50YXJnZXQsdGhpcy5ob2xkSm9iPXNldEludGVydmFsKHRoaXMucHVsc2UuYmluZCh0aGlzKSx0aGlzLkhPTERfREVMQVkpKX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe3RoaXMuaGVsZFBvaW50ZXImJnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkPT09YS5wb2ludGVySWQmJnRoaXMuY2FuY2VsKCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbCgpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkKXt2YXIgYj1hLmNsaWVudFgtdGhpcy5oZWxkUG9pbnRlci5jbGllbnRYLGM9YS5jbGllbnRZLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WTtiKmIrYypjPnRoaXMuV0lHR0xFX1RIUkVTSE9MRCYmdGhpcy5jYW5jZWwoKX19LGZpcmVIb2xkOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9e3BvaW50ZXJUeXBlOnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlclR5cGV9O2MmJihkLmhvbGRUaW1lPWMpO3ZhciBlPWIubWFrZUV2ZW50KGEsZCk7Yi5kaXNwYXRjaEV2ZW50KGUsdGhpcy50YXJnZXQpLGUudGFwUHJldmVudGVkJiZiLnByZXZlbnRUYXAodGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoImhvbGQiLGMpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1uZXcgYS5Qb2ludGVyTWFwLGQ9e2V2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0sV0lHR0xFX1RIUkVTSE9MRDo0LGNsYW1wRGlyOmZ1bmN0aW9uKGEpe3JldHVybiBhPjA/MTotMX0sY2FsY1Bvc2l0aW9uRGVsdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYz0wLGQ9MDtyZXR1cm4gYSYmYiYmKGM9Yi5wYWdlWC1hLnBhZ2VYLGQ9Yi5wYWdlWS1hLnBhZ2VZKSx7eDpjLHk6ZH19LGZpcmVUcmFjazpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCxmPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoZS5kb3duRXZlbnQsYyksZz10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUubGFzdE1vdmVFdmVudCxjKTtnLngmJihlLnhEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLngpKSxnLnkmJihlLnlEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLnkpKTt2YXIgaD17ZHg6Zi54LGR5OmYueSxkZHg6Zy54LGRkeTpnLnksY2xpZW50WDpjLmNsaWVudFgsY2xpZW50WTpjLmNsaWVudFkscGFnZVg6Yy5wYWdlWCxwYWdlWTpjLnBhZ2VZLHNjcmVlblg6Yy5zY3JlZW5YLHNjcmVlblk6Yy5zY3JlZW5ZLHhEaXJlY3Rpb246ZS54RGlyZWN0aW9uLHlEaXJlY3Rpb246ZS55RGlyZWN0aW9uLHRyYWNrSW5mbzplLnRyYWNrSW5mbyxwb2ludGVyVHlwZTpjLnBvaW50ZXJUeXBlfTsidHJhY2tlbmQiPT09YSYmKGguX3JlbGVhc2VUYXJnZXQ9Yy50YXJnZXQpO3ZhciBpPWIubWFrZUV2ZW50KGEsaCk7ZS5sYXN0TW92ZUV2ZW50PWMsYi5kaXNwYXRjaEV2ZW50KGksZS5kb3duVGFyZ2V0KX0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7aWYoYS5pc1ByaW1hcnkmJigibW91c2UiPT09YS5wb2ludGVyVHlwZT8xPT09YS5idXR0b25zOiEwKSl7dmFyIGI9e2Rvd25FdmVudDphLGRvd25UYXJnZXQ6YS50YXJnZXQsdHJhY2tJbmZvOnt9LGxhc3RNb3ZlRXZlbnQ6bnVsbCx4RGlyZWN0aW9uOjAseURpcmVjdGlvbjowLHRyYWNraW5nOiExfTtjLnNldChhLnBvaW50ZXJJZCxiKX19LHBvaW50ZXJtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBiPWMuZ2V0KGEucG9pbnRlcklkKTtpZihiKWlmKGIudHJhY2tpbmcpdGhpcy5maXJlVHJhY2soInRyYWNrIixhLGIpO2Vsc2V7dmFyIGQ9dGhpcy5jYWxjUG9zaXRpb25EZWx0YShiLmRvd25FdmVudCxhKSxlPWQueCpkLngrZC55KmQueTtlPnRoaXMuV0lHR0xFX1RIUkVTSE9MRCYmKGIudHJhY2tpbmc9ITAsdGhpcy5maXJlVHJhY2soInRyYWNrc3RhcnQiLGIuZG93bkV2ZW50LGIpLHRoaXMuZmlyZVRyYWNrKCJ0cmFjayIsYSxiKSl9fSxwb2ludGVydXA6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2ImJihiLnRyYWNraW5nJiZ0aGlzLmZpcmVUcmFjaygidHJhY2tlbmQiLGEsYiksYy5kZWxldGUoYS5wb2ludGVySWQpKX0scG9pbnRlcmNhbmNlbDpmdW5jdGlvbihhKXt0aGlzLnBvaW50ZXJ1cChhKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJ0cmFjayIsZCl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPXtNSU5fVkVMT0NJVFk6LjUsTUFYX1FVRVVFOjQsbW92ZVF1ZXVlOltdLHRhcmdldDpudWxsLHBvaW50ZXJJZDpudWxsLGV2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiF0aGlzLnBvaW50ZXJJZCYmKHRoaXMucG9pbnRlcklkPWEucG9pbnRlcklkLHRoaXMudGFyZ2V0PWEudGFyZ2V0LHRoaXMuYWRkTW92ZShhKSl9LHBvaW50ZXJtb3ZlOmZ1bmN0aW9uKGEpe2EucG9pbnRlcklkPT09dGhpcy5wb2ludGVySWQmJnRoaXMuYWRkTW92ZShhKX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe2EucG9pbnRlcklkPT09dGhpcy5wb2ludGVySWQmJnRoaXMuZmlyZUZsaWNrKGEpLHRoaXMuY2xlYW51cCgpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jbGVhbnVwKCl9LGNsZWFudXA6ZnVuY3Rpb24oKXt0aGlzLm1vdmVRdWV1ZT1bXSx0aGlzLnRhcmdldD1udWxsLHRoaXMucG9pbnRlcklkPW51bGx9LGFkZE1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5tb3ZlUXVldWUubGVuZ3RoPj10aGlzLk1BWF9RVUVVRSYmdGhpcy5tb3ZlUXVldWUuc2hpZnQoKSx0aGlzLm1vdmVRdWV1ZS5wdXNoKGEpfSxmaXJlRmxpY2s6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQsZSxmLGcsaCxpLGo9YSxrPXRoaXMubW92ZVF1ZXVlLmxlbmd0aCxsPTAsbT0wLG49MCxvPTA7az5vJiYoaT10aGlzLm1vdmVRdWV1ZVtvXSk7bysrKWM9ai50aW1lU3RhbXAtaS50aW1lU3RhbXAsZD1qLmNsaWVudFgtaS5jbGllbnRYLGU9ai5jbGllbnRZLWkuY2xpZW50WSxmPWQvYyxnPWUvYyxoPU1hdGguc3FydChmKmYrZypnKSxoPm4mJihsPWYsbT1nLG49aCk7dmFyIHA9TWF0aC5hYnMobCk+TWF0aC5hYnMobSk/IngiOiJ5IixxPXRoaXMuY2FsY0FuZ2xlKGwsbSk7aWYoTWF0aC5hYnMobik+PXRoaXMuTUlOX1ZFTE9DSVRZKXt2YXIgcj1iLm1ha2VFdmVudCgiZmxpY2siLHt4VmVsb2NpdHk6bCx5VmVsb2NpdHk6bSx2ZWxvY2l0eTpuLGFuZ2xlOnEsbWFqb3JBeGlzOnAscG9pbnRlclR5cGU6YS5wb2ludGVyVHlwZX0pO2IuZGlzcGF0Y2hFdmVudChyLHRoaXMudGFyZ2V0KX19LGNhbGNBbmdsZTpmdW5jdGlvbihhLGIpe3JldHVybiAxODAqTWF0aC5hdGFuMihiLGEpL01hdGguUEl9fTtiLnJlZ2lzdGVyUmVjb2duaXplcigiZmxpY2siLGMpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1uZXcgYS5Qb2ludGVyTWFwLGQ9e2V2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiFhLnRhcFByZXZlbnRlZCYmYy5zZXQoYS5wb2ludGVySWQse3RhcmdldDphLnRhcmdldCx4OmEuY2xpZW50WCx5OmEuY2xpZW50WX0pfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2ImJmEudGFwUHJldmVudGVkJiZjLmRlbGV0ZShhLnBvaW50ZXJJZCl9fSxwb2ludGVydXA6ZnVuY3Rpb24oZCl7dmFyIGU9Yy5nZXQoZC5wb2ludGVySWQpO2lmKGUmJiFkLnRhcFByZXZlbnRlZCl7dmFyIGY9YS5maW5kTENBKGUudGFyZ2V0LGQudGFyZ2V0KTtpZihmKXt2YXIgZz1iLm1ha2VFdmVudCgidGFwIix7eDpkLmNsaWVudFgseTpkLmNsaWVudFkscG9pbnRlclR5cGU6ZC5wb2ludGVyVHlwZX0pO2IuZGlzcGF0Y2hFdmVudChnLGYpfX1jLmRlbGV0ZShkLnBvaW50ZXJJZCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oYSl7Yy5kZWxldGUoYS5wb2ludGVySWQpfSxwcmV2ZW50VGFwOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoInRhcCIsZCl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLFBvbHltZXI9e30sZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2EudGV4dENvbnRlbnQ9ImJvZHkge29wYWNpdHk6IDA7fSI7dmFyIGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiV2ViQ29tcG9uZW50c1JlYWR5IixmdW5jdGlvbigpe2RvY3VtZW50LmJvZHkuc3R5bGUud2Via2l0VHJhbnNpdGlvbj0ib3BhY2l0eSAwLjNzIixkb2N1bWVudC5ib2R5LnN0eWxlLm9wYWNpdHk9MX0pfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGM9QXJyYXkucHJvdG90eXBlLmNvbmNhdC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmNvbmNhdCksZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5zbGljZSksZT17aG9zdFJ1bGVSZTovQGhvc3RbXntdKnsoKFtefV0qP3tbXntdKj99W1xzXFNdKj8pKyl9L2dpbSxzZWxlY3RvclJlOi8oW157XSopKHtbXHNcU10qP30pL2dpbSxob3N0RWxlbWVudFJlOi8oLiopKCg/OlwqKXwoPzpcOnNjb3BlKSkoLiopLyxob3N0Rml4YWJsZVJlOi9eWy5cWzpdLyxjc3NDb21tZW50UmU6L1wvXCpbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLy9naW0sY3NzUG9seWZpbGxDb21tZW50UmU6L1wvXCpccypAcG9seWZpbGwgKFteKl0qXCorKFteLypdW14qXSpcKispKlwvKShbXntdKj8pey9naW0sY3NzUHNldWRvUmU6Lzo6KHgtW15cc3ssKF0qKS9naW0sc2VsZWN0b3JSZVN1ZmZpeDoiKFs+XFxzfitbLix7Ol1bXFxzXFxTXSopPyQiLGhvc3RSZTovQGhvc3QvZ2ltLGNhY2hlOnt9LHNoaW1TdHlsaW5nOmZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmYSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTtlLmNhY2hlRGVmaW5pdGlvbihhKSxlLnNoaW1Qb2x5ZmlsbERpcmVjdGl2ZXMoYS5zdHlsZXMsYiksUG9seW1lci5zdHJpY3RQb2x5ZmlsbFN0eWxpbmcmJmUuYXBwbHlTY29wZVRvQ29udGVudChhLnRlbXBsYXRlQ29udGVudCgpLGIpLGUuYXBwbHlTaGltbWluZyhlLnN0eWxlc0ZvckVsZW1lbnQoYSksYil9fSxzaGltU2hhZG93RE9NU3R5bGluZzpmdW5jdGlvbihhLGIpe3dpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmKGUuc2hpbVBvbHlmaWxsRGlyZWN0aXZlcyhhLGIpLGUuYXBwbHlTaGltbWluZyhhLGIpKX0sYXBwbHlTaGltbWluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2hpbUF0SG9zdChhLGIpO2MrPXRoaXMuc2hpbVNjb3BpbmcoYSxiKSx0aGlzLmFkZENzc1RvRG9jdW1lbnQoYyl9LGNhY2hlRGVmaW5pdGlvbjpmdW5jdGlvbihhKXt2YXIgYj1hLmdldEF0dHJpYnV0ZSgibmFtZSIpLGM9YS50ZW1wbGF0ZUNvbnRlbnQoKSxmPWMmJmMucXVlcnlTZWxlY3RvckFsbCgic3R5bGUiKTthLnN0eWxlcz1mP2QoZik6W10sZS5jYWNoZVtiXT1hfSxhcHBseVNjb3BlVG9Db250ZW50OmZ1bmN0aW9uKGEsYyl7YSYmKGIoYS5xdWVyeVNlbGVjdG9yQWxsKCIqIiksZnVuY3Rpb24oYSl7YS5zZXRBdHRyaWJ1dGUoYywiIil9KSxiKGEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKSxmdW5jdGlvbihhKXt0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQodGVtcGxhdGVDb250ZW50KGEpLGMpfSx0aGlzKSl9LHN0eWxlc0ZvckVsZW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdHlsZXMsZT1hLnRlbXBsYXRlQ29udGVudCgpLGY9ZSYmZS5xdWVyeVNlbGVjdG9yKCJzaGFkb3ciKTtpZihmfHxudWxsPT09ZSl7dmFyIGc9dGhpcy5maW5kRXh0ZW5kZWUoYS5nZXRBdHRyaWJ1dGUoIm5hbWUiKSk7aWYoZyl7dmFyIGg9dGhpcy5zdHlsZXNGb3JFbGVtZW50KGcpO2I9YyhkKGgpLGQoYikpfX1yZXR1cm4gYn0sZmluZEV4dGVuZGVlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2FjaGVbYV07cmV0dXJuIGImJnRoaXMuY2FjaGVbYi5nZXRBdHRyaWJ1dGUoImV4dGVuZHMiKV19LHNoaW1Qb2x5ZmlsbERpcmVjdGl2ZXM6ZnVuY3Rpb24oYSxjKXt3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJmEmJmIoYSxmdW5jdGlvbihhKXthLnRleHRDb250ZW50PXRoaXMuY29udmVydFBvbHlmaWxsRGlyZWN0aXZlcyhhLnRleHRDb250ZW50LGMpfSx0aGlzKX0sc2hpbUF0SG9zdDpmdW5jdGlvbihhLGIpe3JldHVybiBhP3RoaXMuY29udmVydEF0SG9zdFN0eWxlcyhhLGIpOnZvaWQgMH0sc2hpbVNjb3Bpbmc6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT90aGlzLmNvbnZlcnRTY29wZWRTdHlsZXMoYSxiKTp2b2lkIDB9LGNvbnZlcnRQb2x5ZmlsbERpcmVjdGl2ZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPSIiLGY9MDtjPXRoaXMuY3NzUG9seWZpbGxDb21tZW50UmUuZXhlYyhhKTspZSs9YS5zdWJzdHJpbmcoZixjLmluZGV4KSxkPWNbMV0uc2xpY2UoMCwtMikucmVwbGFjZSh0aGlzLmhvc3RSZSxiKSxlKz10aGlzLnNjb3BlU2VsZWN0b3IoZCxiKSsieyIsZj10aGlzLmNzc1BvbHlmaWxsQ29tbWVudFJlLmxhc3RJbmRleDtyZXR1cm4gZSs9YS5zdWJzdHJpbmcoZixhLmxlbmd0aCl9LGZpbmRBdEhvc3RSdWxlczpmdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYSx0aGlzLmlzSG9zdFJ1bGUuYmluZCh0aGlzLGIpKX0saXNIb3N0UnVsZTpmdW5jdGlvbihhLGIpe3JldHVybiBiLnNlbGVjdG9yVGV4dCYmYi5zZWxlY3RvclRleHQubWF0Y2goYSl8fGIuY3NzUnVsZXMmJnRoaXMuZmluZEF0SG9zdFJ1bGVzKGIuY3NzUnVsZXMsYSkubGVuZ3RofHxiLnR5cGU9PUNTU1J1bGUuV0VCS0lUX0tFWUZSQU1FU19SVUxFfSxjb252ZXJ0QXRIb3N0U3R5bGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9dGhpcy5zdHlsZXNUb0Nzc1RleHQoYSksZT0iIixmPTA7Yz10aGlzLmhvc3RSdWxlUmUuZXhlYyhkKTspZSs9ZC5zdWJzdHJpbmcoZixjLmluZGV4KSxlKz10aGlzLnNjb3BlSG9zdENzcyhjWzFdLGIpLGY9dGhpcy5ob3N0UnVsZVJlLmxhc3RJbmRleDtlKz1kLnN1YnN0cmluZyhmLGQubGVuZ3RoKTt2YXIgZz1uZXcgUmVnRXhwKCJeIitiK3RoaXMuc2VsZWN0b3JSZVN1ZmZpeCwibSIpLGQ9dGhpcy5ydWxlc1RvQ3NzKHRoaXMuZmluZEF0SG9zdFJ1bGVzKHRoaXMuY3NzVG9SdWxlcyhlKSxnKSk7cmV0dXJuIGR9LHNjb3BlSG9zdENzczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPSIiO2M9dGhpcy5zZWxlY3RvclJlLmV4ZWMoYSk7KWQrPXRoaXMuc2NvcGVIb3N0U2VsZWN0b3IoY1sxXSxiKSsiICIrY1syXSsiXG4JIjtyZXR1cm4gZH0sc2NvcGVIb3N0U2VsZWN0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWEuc3BsaXQoIiwiKSxlPSJbaXM9IitiKyJdIjtyZXR1cm4gZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksYS5tYXRjaCh0aGlzLmhvc3RFbGVtZW50UmUpP2E9YS5yZXBsYWNlKHRoaXMuaG9zdEVsZW1lbnRSZSxiKyIkMSQzLCAiK2UrIiQxJDMiKTphLm1hdGNoKHRoaXMuaG9zdEZpeGFibGVSZSkmJihhPWIrYSsiLCAiK2UrYSksYy5wdXNoKGEpfSx0aGlzKSxjLmpvaW4oIiwgIil9LGNvbnZlcnRTY29wZWRTdHlsZXM6ZnVuY3Rpb24oYSxjKXtiKGEsZnVuY3Rpb24oYSl7YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9KTt2YXIgZD10aGlzLnN0eWxlc1RvQ3NzVGV4dChhKS5yZXBsYWNlKHRoaXMuaG9zdFJ1bGVSZSwiIik7ZD10aGlzLmNvbnZlcnRQc2V1ZG9zKGQpO3ZhciBlPXRoaXMuY3NzVG9SdWxlcyhkKTtyZXR1cm4gZD10aGlzLnNjb3BlUnVsZXMoZSxjKX0sY29udmVydFBzZXVkb3M6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSh0aGlzLmNzc1BzZXVkb1JlLCIgW3BzZXVkbz0kMV0iKX0sc2NvcGVSdWxlczpmdW5jdGlvbihhLGMpe3ZhciBkPSIiO3JldHVybiBiKGEsZnVuY3Rpb24oYSl7YS5zZWxlY3RvclRleHQmJmEuc3R5bGUmJmEuc3R5bGUuY3NzVGV4dD8oZCs9dGhpcy5zY29wZVNlbGVjdG9yKGEuc2VsZWN0b3JUZXh0LGMsUG9seW1lci5zdHJpY3RQb2x5ZmlsbFN0eWxpbmcpKyIge1xuCSIsZCs9dGhpcy5wcm9wZXJ0aWVzRnJvbVJ1bGUoYSkrIlxufVxuXG4iKTphLm1lZGlhPyhkKz0iQG1lZGlhICIrYS5tZWRpYS5tZWRpYVRleHQrIiB7XG4iLGQrPXRoaXMuc2NvcGVSdWxlcyhhLmNzc1J1bGVzLGMpLGQrPSJcbn1cblxuIik6YS5jc3NUZXh0JiYoZCs9YS5jc3NUZXh0KyJcblxuIil9LHRoaXMpLGR9LHByb3BlcnRpZXNGcm9tUnVsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnN0eWxlLmNzc1RleHQ7cmV0dXJuIGEuc3R5bGUuY29udGVudCYmIWEuc3R5bGUuY29udGVudC5tYXRjaCgvWyciXSsvKSYmKGI9ImNvbnRlbnQ6ICciK2Euc3R5bGUuY29udGVudCsiJztcbiIrYS5zdHlsZS5jc3NUZXh0LnJlcGxhY2UoL2NvbnRlbnQ6W147XSo7L2csIiIpKSxifSxzZWxlY3Rvck5lZWRzU2NvcGluZzpmdW5jdGlvbihhLGIpe3ZhciBjPSIoIitiKyJ8XFxbaXM9IitiKyJcXF0pIixkPW5ldyBSZWdFeHAoIl4iK2MrdGhpcy5zZWxlY3RvclJlU3VmZml4LCJtIik7cmV0dXJuIWEubWF0Y2goZCl9LHNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9YS5zcGxpdCgiLCIpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnRyaW0oKSx0aGlzLnNlbGVjdG9yTmVlZHNTY29waW5nKGEsYikmJihhPWM/dGhpcy5hcHBseVN0cmljdFNlbGVjdG9yU2NvcGUoYSxiKTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGIpKSxkLnB1c2goYSl9LHRoaXMpLGQuam9pbigiLCAiKX0sYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIrIiAiK2ErIiwgIisiW2lzPSIrYisiXSAiK2F9LGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3ZhciBjPVsiICIsIj4iLCIrIiwifiJdLGQ9YSxlPSJbIitiKyJdIjtyZXR1cm4gYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWQuc3BsaXQoYSk7ZD1iLm1hcChmdW5jdGlvbihhKXt2YXIgYj1hLnRyaW0oKTtyZXR1cm4gYiYmYy5pbmRleE9mKGIpPDAmJmIuaW5kZXhPZihlKTwwJiYoYT1iLnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sIiQxIitlKyIkMiQzIikpLGF9KS5qb2luKGEpfSksZH0sc3R5bGVzVG9Dc3NUZXh0OmZ1bmN0aW9uKGEsYyl7dmFyIGQ9IiI7cmV0dXJuIGIoYSxmdW5jdGlvbihhKXtkKz1hLnRleHRDb250ZW50KyJcblxuIn0pLGN8fChkPXRoaXMuc3RyaXBDc3NDb21tZW50cyhkKSksZH0sc3RyaXBDc3NDb21tZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHRoaXMuY3NzQ29tbWVudFJlLCIiKX0sY3NzVG9SdWxlczpmdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2IudGV4dENvbnRlbnQ9YSxkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGIpO3ZhciBjPWIuc2hlZXQuY3NzUnVsZXM7cmV0dXJuIGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxjfSxydWxlc1RvQ3NzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9W107YjxhLmxlbmd0aDtiKyspYy5wdXNoKGFbYl0uY3NzVGV4dCk7cmV0dXJuIGMuam9pbigiXG5cbiIpfSxhZGRDc3NUb0RvY3VtZW50OmZ1bmN0aW9uKGEpe2EmJnRoaXMuZ2V0U2hlZXQoKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9LGdldFNoZWV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hlZXR8fCh0aGlzLnNoZWV0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksdGhpcy5zaGVldC5zZXRBdHRyaWJ1dGUoInBvbHltZXItcG9seWZpbGwiLCIiKSksdGhpcy5zaGVldH0sYWRkU2hlZXRUb0RvY3VtZW50OmZ1bmN0aW9uKCl7dGhpcy5hZGRDc3NUb0RvY3VtZW50KCJzdHlsZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxuIik7dmFyIGE9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2EuaW5zZXJ0QmVmb3JlKHRoaXMuZ2V0U2hlZXQoKSxhLmNoaWxkTm9kZXNbMF0pfX07d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZlLmFkZFNoZWV0VG9Eb2N1bWVudCgpLGEuc2hpbVN0eWxpbmc9ZS5zaGltU3R5bGluZyxhLnNoaW1TaGFkb3dET01TdHlsaW5nPWUuc2hpbVNoYWRvd0RPTVN0eWxpbmcsYS5zaGltUG9seWZpbGxEaXJlY3RpdmVzPWUuc2hpbVBvbHlmaWxsRGlyZWN0aXZlcy5iaW5kKGUpLGEuc3RyaWN0UG9seWZpbGxTdHlsaW5nPSExfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7cmV0dXJuIGEmJmImJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLGMpO2QmJihPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLGQpLCJmdW5jdGlvbiI9PXR5cGVvZiBkLnZhbHVlJiYoYVtjXS5ub209YykpfSksYX1hLmV4dGVuZD1ifShQb2x5bWVyKSxmdW5jdGlvbigpe3ZhciBhPXt9O0hUTUxFbGVtZW50LnJlZ2lzdGVyPWZ1bmN0aW9uKGIsYyl7YVtiXT1jfSxIVE1MRWxlbWVudC5nZXRQcm90b3R5cGVGb3JUYWc9ZnVuY3Rpb24oYil7dmFyIGM9Yj9hW2JdOkhUTUxFbGVtZW50LnByb3RvdHlwZTtyZXR1cm4gY3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYikpfTt2YXIgYj1FdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uO0V2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbEJ1YmJsZT0hMCxiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sSFRNTEltcG9ydHMuaW1wb3J0ZXIucHJlbG9hZFNlbGVjdG9ycys9IiwgcG9seW1lci1lbGVtZW50IGxpbmtbcmVsPXN0eWxlc2hlZXRdIn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBkPXR5cGVvZiBiO3JldHVybiBiIGluc3RhbmNlb2YgRGF0ZSYmKGQ9ImRhdGUiKSxjW2RdKGEsYil9dmFyIGM9e3N0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gYX0sZGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZShhKXx8RGF0ZS5ub3coKSl9LCJib29sZWFuIjpmdW5jdGlvbihhKXtyZXR1cm4iIj09PWE/ITA6ImZhbHNlIj09PWE/ITE6ISFhfSxudW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9cGFyc2VGbG9hdChhKTtyZXR1cm4gU3RyaW5nKGIpPT09YT9iOmF9LG9iamVjdDpmdW5jdGlvbihhLGIpe2lmKCFiKXJldHVybiBhO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShhLnJlcGxhY2UoLycvZywnIicpKX1jYXRjaChjKXtyZXR1cm4gYX19fTthLmRlc2VyaWFsaXplVmFsdWU9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCl7cmV0dXJuIGE/YS5zdG9wKCk6YT1uZXcgYyh0aGlzKSxhLmdvKGIsZCksYX12YXIgYz1mdW5jdGlvbihhKXt0aGlzLmNvbnRleHQ9YX07Yy5wcm90b3R5cGU9e2dvOmZ1bmN0aW9uKGEsYil7dGhpcy5jYWxsYmFjaz1hLHRoaXMuaGFuZGxlPXNldFRpbWVvdXQodGhpcy5jb21wbGV0ZS5iaW5kKHRoaXMpLGIpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGUmJihjbGVhclRpbWVvdXQodGhpcy5oYW5kbGUpLHRoaXMuaGFuZGxlPW51bGwpfSxjb21wbGV0ZTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlJiYodGhpcy5zdG9wKCksdGhpcy5jYWxsYmFjay5jYWxsKHRoaXMuY29udGV4dCkpfX0sYS5qb2I9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt2YXIgYz1iLmNhbGxlcixmPWMubm9tOyJfc3VwZXIiaW4gY3x8KGZ8fChmPWUuY2FsbCh0aGlzLGMpKSxmfHxjb25zb2xlLndhcm4oImNhbGxlZCBzdXBlcigpIG9uIGEgbWV0aG9kIG5vdCBpbnN0YWxsZWQgZGVjbGFyYXRpdmVseSAoaGFzIG5vIC5ub20gcHJvcGVydHkpIiksZChjLGYsT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpKSk7dmFyIGc9Yy5fc3VwZXI7aWYoZyl7dmFyIGg9Z1tmXTtyZXR1cm4iX3N1cGVyImluIGh8fGQoaCxmLGcpLGguYXBwbHkodGhpcyxhfHxbXSl9fWZ1bmN0aW9uIGMoYSxiLGMpe2Zvcig7YSYmKCFhLmhhc093blByb3BlcnR5KGIpfHxhW2JdPT09Yyk7KWE9T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpO3JldHVybiBhfWZ1bmN0aW9uIGQoYSxiLGQpe3JldHVybiBhLl9zdXBlcj1jKGQsYixhKSxhLl9zdXBlciYmKGEuX3N1cGVyW2JdLm5vbT1iKSxhLl9zdXBlcn1mdW5jdGlvbiBlKGEpe2NvbnNvbGUud2FybigibmFtZUluVGhpcyBjYWxsZWQiKTtmb3IodmFyIGI9dGhpcztiJiZiIT09SFRNTEVsZW1lbnQucHJvdG90eXBlOyl7Zm9yKHZhciBjLGQ9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYiksZT0wLGY9ZC5sZW5ndGg7Zj5lJiYoYz1kW2VdKTtlKyspe3ZhciBnPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKTtpZihnLnZhbHVlPT1hKXJldHVybiBjfWI9Yi5fX3Byb3RvX199fWEuc3VwZXI9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9e307Yi5kZWNsYXJhdGlvbj17fSxiLmluc3RhbmNlPXt9LGEuYXBpPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXthc3luYzpmdW5jdGlvbihhLGIsYyl7UGxhdGZvcm0uZmx1c2goKSxiPWImJmIubGVuZ3RoP2I6W2JdO3ZhciBkPWZ1bmN0aW9uKCl7KHRoaXNbYV18fGEpLmFwcGx5KHRoaXMsYil9LmJpbmQodGhpcyk7cmV0dXJuIGM/c2V0VGltZW91dChkLGMpOnJlcXVlc3RBbmltYXRpb25GcmFtZShkKX0sZmlyZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jfHx0aGlzO3JldHVybiBlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGEse2J1YmJsZXM6dm9pZCAwIT09ZD8hMTohMCxkZXRhaWw6Yn0pKSxifSxhc3luY0ZpcmU6ZnVuY3Rpb24oKXt0aGlzLmFzeW5jTWV0aG9kKCJmaXJlIixhcmd1bWVudHMpfSxjbGFzc0ZvbGxvd3M6ZnVuY3Rpb24oYSxiLGMpe2ImJmIuY2xhc3NMaXN0LnJlbW92ZShjKSxhJiZhLmNsYXNzTGlzdC5hZGQoYyl9fTtiLmFzeW5jTWV0aG9kPWIuYXN5bmMsYS5hcGkuaW5zdGFuY2UudXRpbHM9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2IuY2FuY2VsQnViYmxlfHwoYi5vbj1pK2IudHlwZSxoLmV2ZW50cyYmY29uc29sZS5ncm91cCgiWyVzXTogbGlzdGVuTG9jYWwgWyVzXSIsYS5sb2NhbE5hbWUsYi5vbiksIWIucGF0aHx8d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP2QoYSxiKTpjKGEsYiksaC5ldmVudHMmJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPW51bGw7QXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChiLnBhdGgsZnVuY3Rpb24oZCl7cmV0dXJuIGQ9PT1hPyEwOihjPWM9PT1hP2M6ZShkKSxjJiZmKGMsZCxiKT8hMDp2b2lkIDApfSx0aGlzKX1mdW5jdGlvbiBkKGEsYil7aC5ldmVudHMmJmNvbnNvbGUubG9nKCJldmVudC5wYXRoKCkgbm90IHN1cHBvcnRlZCBmb3IiLGIudHlwZSk7Zm9yKHZhciBjPWIudGFyZ2V0LGQ9bnVsbDtjJiZjIT1hOyl7aWYoZD1kPT09YT9kOmUoYyksZCYmZihkLGMsYikpcmV0dXJuITA7Yz1jLnBhcmVudE5vZGV9fWZ1bmN0aW9uIGUoYSl7Zm9yKDthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhLmhvc3R9ZnVuY3Rpb24gZihhLGIsYyl7dmFyIGQ9Yi5nZXRBdHRyaWJ1dGUmJmIuZ2V0QXR0cmlidXRlKGMub24pO3JldHVybiBkJiZnKGIsYykmJihoLmV2ZW50cyYmY29uc29sZS5sb2coIlslc10gZm91bmQgaGFuZGxlciBuYW1lIFslc10iLGEubG9jYWxOYW1lLGQpLGEuZGlzcGF0Y2hNZXRob2QoYixkLFtjLGMuZGV0YWlsLGJdKSksYy5jYW5jZWxCdWJibGV9ZnVuY3Rpb24gZyhhLGIpe3ZhciBjPWwuZ2V0KGIpO3JldHVybiBjfHxsLnNldChiLGM9W10pLGMuaW5kZXhPZihhKTwwPyhjLnB1c2goYSksITApOnZvaWQgMH12YXIgaD13aW5kb3cubG9nRmxhZ3N8fHt9LGk9Im9uLSIsaj0iZXZlbnREZWxlZ2F0ZXMiLGs9e0VWRU5UX1BSRUZJWDppLERFTEVHQVRFUzpqLGFkZEhvc3RMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzW2pdO2guZXZlbnRzJiZPYmplY3Qua2V5cyhhKS5sZW5ndGg+MCYmY29uc29sZS5sb2coIlslc10gYWRkSG9zdExpc3RlbmVyczoiLHRoaXMubG9jYWxOYW1lLGEpLHRoaXMuYWRkTm9kZUxpc3RlbmVycyh0aGlzLGEsdGhpcy5ob3N0RXZlbnRMaXN0ZW5lcil9LGFkZEluc3RhbmNlTGlzdGVuZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5kZWxlZ2F0ZXM7YyYmKGguZXZlbnRzJiZPYmplY3Qua2V5cyhjKS5sZW5ndGg+MCYmY29uc29sZS5sb2coIlslczpyb290XSBhZGRJbnN0YW5jZUxpc3RlbmVyczoiLHRoaXMubG9jYWxOYW1lLGMpLHRoaXMuYWRkTm9kZUxpc3RlbmVycyhhLGMsdGhpcy5pbnN0YW5jZUV2ZW50TGlzdGVuZXIpKX0sYWRkTm9kZUxpc3RlbmVyczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7Zm9yKHZhciBlIGluIGIpZHx8KGQ9Yy5iaW5kKHRoaXMpKSxhLmFkZEV2ZW50TGlzdGVuZXIoZSxkKX0saG9zdEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSl7aWYoIWEuY2FuY2VsQnViYmxlKXtoLmV2ZW50cyYmY29uc29sZS5ncm91cCgiWyVzXTogaG9zdEV2ZW50TGlzdGVuZXIoJXMpIix0aGlzLmxvY2FsTmFtZSxhLnR5cGUpO3ZhciBiPXRoaXMuZmluZEV2ZW50RGVsZWdhdGUoYSk7YiYmKGguZXZlbnRzJiZjb25zb2xlLmxvZygiWyVzXSBmb3VuZCBob3N0IGhhbmRsZXIgbmFtZSBbJXNdIix0aGlzLmxvY2FsTmFtZSxiKSx0aGlzLmRpc3BhdGNoTWV0aG9kKHRoaXMsYixbYSxhLmRldGFpbCx0aGlzXSkpLGguZXZlbnRzJiZjb25zb2xlLmdyb3VwRW5kKCl9fSxmaW5kRXZlbnREZWxlZ2F0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1tqXVthLnR5cGVdfSxkaXNwYXRjaE1ldGhvZDpmdW5jdGlvbihhLGIsYyl7aWYoYSl7aC5ldmVudHMmJmNvbnNvbGUuZ3JvdXAoIlslc10gZGlzcGF0Y2ggWyVzXSIsYS5sb2NhbE5hbWUsYik7dmFyIGQ9dGhpc1tiXTtkJiZkW2M/ImFwcGx5IjoiY2FsbCJdKHRoaXMsYyksaC5ldmVudHMmJmNvbnNvbGUuZ3JvdXBFbmQoKX19LGluc3RhbmNlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhKXtiKHRoaXMsYSl9fSxsPW5ldyBTaWRlVGFibGUoImhhbmRsZWRMaXN0Iik7YS5hcGkuaW5zdGFuY2UuZXZlbnRzPWt9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz10aGlzW2FdfHxhOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFwcGx5KHRoaXMsYil9ZnVuY3Rpb24gYyhhLGIsYyxkKXtoLmJpbmQmJmNvbnNvbGUubG9nKG4sYy5sb2NhbE5hbWV8fCJvYmplY3QiLGQsYS5sb2NhbE5hbWUsYik7dmFyIGU9UGF0aE9ic2VydmVyLmdldFZhbHVlQXRQYXRoKGMsZCk7cmV0dXJuKG51bGw9PT1lfHx2b2lkIDA9PT1lKSYmUGF0aE9ic2VydmVyLnNldFZhbHVlQXRQYXRoKGMsZCxhW2JdKSxQYXRoT2JzZXJ2ZXIuZGVmaW5lUHJvcGVydHkoYSxiLHtvYmplY3Q6YyxwYXRoOmR9KX1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD1nKGEpO2RbYl09Y31mdW5jdGlvbiBlKGEsYil7dmFyIGM9ZyhhKTtyZXR1cm4gYyYmY1tiXT8oY1tiXS5jbG9zZSgpLGNbYl09bnVsbCwhMCk6dm9pZCAwfWZ1bmN0aW9uIGYoYSl7dmFyIGI9ZyhhKTtPYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2JbYV0uY2xvc2UoKSxiW2FdPW51bGx9KX1mdW5jdGlvbiBnKGEpe3ZhciBiPWsuZ2V0KGEpO3JldHVybiBifHxrLnNldChhLGI9e30pLGJ9dmFyIGg9d2luZG93LmxvZ0ZsYWdzfHx7fSxpPSJDaGFuZ2VkIixqPXtvYnNlcnZlUHJvcGVydGllczpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPXRoaXMuZ2V0Q3VzdG9tUHJvcGVydHlOYW1lcygpLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKXRoaXMub2JzZXJ2ZVByb3BlcnR5KGEpfSxnZXRDdXN0b21Qcm9wZXJ0eU5hbWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VzdG9tUHJvcGVydHlOYW1lc30sb2JzZXJ2ZVByb3BlcnR5OmZ1bmN0aW9uKGEpe2lmKHRoaXMuc2hvdWxkT2JzZXJ2ZVByb3BlcnR5KGEpKXtoLndhdGNoJiZjb25zb2xlLmxvZyhsLHRoaXMubG9jYWxOYW1lLGEpO3ZhciBiPWZ1bmN0aW9uKGIsYyl7aC53YXRjaCYmY29uc29sZS5sb2cobSx0aGlzLmxvY2FsTmFtZSx0aGlzLmlkfHwiIixhLHRoaXNbYV0sYyksdGhpcy5kaXNwYXRjaFByb3BlcnR5Q2hhbmdlKGEsYyl9LmJpbmQodGhpcyksYz1uZXcgUGF0aE9ic2VydmVyKHRoaXMsYSxiKTtkKHRoaXMsYSxjKX19LGJpbmRQcm9wZXJ0eTpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGModGhpcyxhLGIsZCl9LHVuYmluZFByb3BlcnR5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUodGhpcyxhLGIpfSx1bmJpbmRBbGxQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7Zih0aGlzKX0sc2hvdWxkT2JzZXJ2ZVByb3BlcnR5OmZ1bmN0aW9uKGEpe3JldHVybiBCb29sZWFuKHRoaXNbYStpXSl9LGRpc3BhdGNoUHJvcGVydHlDaGFuZ2U6ZnVuY3Rpb24oYSxjKXtiLmNhbGwodGhpcyxhK2ksW2NdKX19LGs9bmV3IFNpZGVUYWJsZSxsPSJbJXNdIHdhdGNoaW5nIFslc10iLG09IlslcyMlc10gd2F0Y2g6IFslc10gbm93IFslc10gd2FzIFslc10iLG49Ilslc106IGJpbmRQcm9wZXJ0aWVzOiBbJXNdIHRvIFslc10uWyVzXSI7YS5hcGkuaW5zdGFuY2UucHJvcGVydGllcz1qfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj0iX19wdWJsaXNoZWQiLGM9Il9faW5zdGFuY2VfYXR0cmlidXRlcyIsZD17UFVCTElTSEVEOmIsSU5TVEFOQ0VfQVRUUklCVVRFUzpjLGNvcHlJbnN0YW5jZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzW2NdO2Zvcih2YXIgYiBpbiBhKXRoaXMuc2V0QXR0cmlidXRlKGIsYVtiXSl9LHRha2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MCxjPXRoaXMuYXR0cmlidXRlcyxkPWMubGVuZ3RoOyhhPWNbYl0pJiZkPmI7YisrKXRoaXMuYXR0cmlidXRlVG9Qcm9wZXJ0eShhLm5hbWUsYS52YWx1ZSl9LGF0dHJpYnV0ZVRvUHJvcGVydHk6ZnVuY3Rpb24oYixjKXt2YXIgYj10aGlzLnByb3BlcnR5Rm9yQXR0cmlidXRlKGIpO2lmKGIpe2lmKGMuc2VhcmNoKGEuYmluZFBhdHRlcm4pPj0wKXJldHVybjt2YXIgZD10aGlzW2JdLGM9dGhpcy5kZXNlcmlhbGl6ZVZhbHVlKGMsZCk7YyE9PWQmJih0aGlzW2JdPWMpfX0scHJvcGVydHlGb3JBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7dmFyIGM9T2JqZWN0LmtleXModGhpc1tiXSk7cmV0dXJuIGNbYy5tYXAoZSkuaW5kZXhPZihhLnRvTG93ZXJDYXNlKCkpXX0sZGVzZXJpYWxpemVWYWx1ZTpmdW5jdGlvbihiLGMpe3JldHVybiBhLmRlc2VyaWFsaXplVmFsdWUoYixjKX19LGU9U3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZS5jYWxsLmJpbmQoU3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZSk7YS5hcGkuaW5zdGFuY2UuYXR0cmlidXRlcz1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2QoYSxjKX1mdW5jdGlvbiBjKGEpe2EudW5iaW5kQWxsKCl9ZnVuY3Rpb24gZChhLGIpe2lmKGEpe2IoYSk7Zm9yKHZhciBjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZylkKGMsYil9fXZhciBlPXdpbmRvdy5sb2dGbGFnc3x8MCxmPW5ldyBFeHByZXNzaW9uU3ludGF4LGc9e2luc3RhbmNlVGVtcGxhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY3JlYXRlSW5zdGFuY2UodGhpcyxmKX0sY3JlYXRlQmluZGluZzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5wcm9wZXJ0eUZvckF0dHJpYnV0ZShhKTtpZihkKXt2YXIgZT10aGlzLmJpbmRQcm9wZXJ0eShkLGIsYyk7cmV0dXJuIGUucGF0aD1jLGV9cmV0dXJuIHRoaXMuc3VwZXIoYXJndW1lbnRzKX0sYXN5bmNVbmJpbmRBbGw6ZnVuY3Rpb24oKXt0aGlzLl91bmJvdW5kfHwoZS51bmJpbmQmJmNvbnNvbGUubG9nKCJbJXNdIGFzeW5jVW5iaW5kQWxsIix0aGlzLmxvY2FsTmFtZSksdGhpcy5fdW5iaW5kQWxsSm9iPXRoaXMuam9iKHRoaXMuX3VuYmluZEFsbEpvYix0aGlzLnVuYmluZEFsbCwwKSl9LHVuYmluZEFsbDpmdW5jdGlvbigpe3RoaXMuX3VuYm91bmR8fCh0aGlzLnVuYmluZEFsbFByb3BlcnRpZXMoKSx0aGlzLnN1cGVyKCksYih0aGlzLnNoYWRvd1Jvb3QpLHRoaXMuX3VuYm91bmQ9ITApfSxjYW5jZWxVbmJpbmRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3VuYm91bmQ/KGUudW5iaW5kJiZjb25zb2xlLndhcm4oIlslc10gYWxyZWFkeSB1bmJvdW5kLCBjYW5ub3QgY2FuY2VsIHVuYmluZEFsbCIsdGhpcy5sb2NhbE5hbWUpLHZvaWQgMCk6KGUudW5iaW5kJiZjb25zb2xlLmxvZygiWyVzXSBjYW5jZWxVbmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSx0aGlzLl91bmJpbmRBbGxKb2ImJih0aGlzLl91bmJpbmRBbGxKb2I9dGhpcy5fdW5iaW5kQWxsSm9iLnN0b3AoKSksYXx8ZCh0aGlzLnNoYWRvd1Jvb3QsZnVuY3Rpb24oYSl7YS5jYW5jZWxVbmJpbmRBbGwmJmEuY2FuY2VsVW5iaW5kQWxsKCl9KSx2b2lkIDApfSxpbnNlcnRlZENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxVbmJpbmRBbGwoITApLHRoaXMuaW5zZXJ0ZWQmJnRoaXMuaW5zZXJ0ZWQoKX0scmVtb3ZlZENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hc3luY1VuYmluZEFsbCgpLHRoaXMucmVtb3ZlZCYmdGhpcy5yZW1vdmVkKCl9fSxoPS9ce1x7KFtee31dKil9fS87YS5iaW5kUGF0dGVybj1oLGEuYXBpLmluc3RhbmNlLm1kdj1nfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBhLmhhc093blByb3BlcnR5KCJQb2x5bWVyQmFzZSIpfWZ1bmN0aW9uIGMoKXt9dmFyIGQ9e1BvbHltZXJCYXNlOiEwLGpvYjpQb2x5bWVyLmpvYiwic3VwZXIiOlBvbHltZXIuc3VwZXIscmVhZHk6ZnVuY3Rpb24oKXt9LHJlYWR5Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmVQcm9wZXJ0aWVzKCksdGhpcy5jb3B5SW5zdGFuY2VBdHRyaWJ1dGVzKCksdGhpcy50YWtlQXR0cmlidXRlcygpLHRoaXMuYWRkSG9zdExpc3RlbmVycygpLHRoaXMucGFyc2VFbGVtZW50cyh0aGlzLl9fcHJvdG9fXyksdGhpcy5hc3luY1VuYmluZEFsbCgpLHRoaXMucmVhZHkoKX0scGFyc2VFbGVtZW50czpmdW5jdGlvbihhKXthJiZhLmVsZW1lbnQmJih0aGlzLnBhcnNlRWxlbWVudHMoYS5fX3Byb3RvX18pLGEucGFyc2VFbGVtZW50LmNhbGwodGhpcyxhLmVsZW1lbnQpKX0scGFyc2VFbGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMuc2hhZG93RnJvbVRlbXBsYXRlKHRoaXMuZmV0Y2hUZW1wbGF0ZShhKSl9LGZldGNoVGVtcGxhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvcigidGVtcGxhdGUiKX0sc2hhZG93RnJvbVRlbXBsYXRlOmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXRoaXMuc2hhZG93Um9vdCxjPXRoaXMuY3JlYXRlU2hhZG93Um9vdCgpO2Mub2xkZXJTaGFkb3dSb290PWIsYy5hcHBseUF1dGhvclN0eWxlcz10aGlzLmFwcGx5QXV0aG9yU3R5bGVzLGMucmVzZXRTdHlsZUluaGVyaXRhbmNlPXRoaXMucmVzZXRTdHlsZUluaGVyaXRhbmNlLGMuaG9zdD10aGlzO3ZhciBkPXRoaXMuaW5zdGFuY2VUZW1wbGF0ZShhKTtyZXR1cm4gYy5hcHBlbmRDaGlsZChkKSx0aGlzLnNoYWRvd1Jvb3RSZWFkeShjLGEpLEN1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93KHRoaXMpLGN9fSxzaGFkb3dSb290UmVhZHk6ZnVuY3Rpb24oYSxiKXt0aGlzLm1hcnNoYWxOb2RlUmVmZXJlbmNlcyhhKSx0aGlzLmFkZEluc3RhbmNlTGlzdGVuZXJzKGEsYiksUG9pbnRlckdlc3R1cmVzLnJlZ2lzdGVyKGEpfSxtYXJzaGFsTm9kZVJlZmVyZW5jZXM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy4kPXRoaXMuJHx8e307aWYoYSlmb3IodmFyIGMsZD1hLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZF0iKSxlPTAsZj1kLmxlbmd0aDtmPmUmJihjPWRbZV0pO2UrKyliW2MuaWRdPWN9LGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuYXR0cmlidXRlQ2hhbmdlZCYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19O2MucHJvdG90eXBlPWQsZC5jb25zdHJ1Y3Rvcj1jLGEuQmFzZT1jLGEuaXNCYXNlPWIsYS5hcGkuaW5zdGFuY2UuYmFzZT1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXt3aW5kb3cubG9nRmxhZ3N8fHt9O3ZhciBiPSJlbGVtZW50IixjPSJjb250cm9sbGVyIixkPXtTVFlMRV9TQ09QRV9BVFRSSUJVVEU6YixpbnN0YWxsQ29udHJvbGxlclN0eWxlczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZmluZFN0eWxlQ29udHJvbGxlcigpO2lmKGEmJiF0aGlzLnNjb3BlSGFzRWxlbWVudFN0eWxlKGEsYykpe2Zvcih2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcyksZD0iIjtiJiZiLmVsZW1lbnQ7KWQrPWIuZWxlbWVudC5jc3NUZXh0Rm9yU2NvcGUoYyksYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYik7aWYoZCl7dmFyIGU9dGhpcy5lbGVtZW50LmNzc1RleHRUb1Njb3BlU3R5bGUoZCxjKTt3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJlBsYXRmb3JtLlNoYWRvd0NTUy5zaGltUG9seWZpbGxEaXJlY3RpdmVzKFtlXSx0aGlzLmxvY2FsTmFtZSksUG9seW1lci5hcHBseVN0eWxlVG9TY29wZShlLGEpfX19LHNjb3BlSGFzRWxlbWVudFN0eWxlOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YisiPSIrdGhpcy5sb2NhbE5hbWUrIi0iK2M7cmV0dXJuIGEucXVlcnlTZWxlY3Rvcigic3R5bGVbIitkKyJdIil9LGZpbmRTdHlsZUNvbnRyb2xsZXI6ZnVuY3Rpb24oKXtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpcmV0dXJuIHdyYXAoZG9jdW1lbnQuaGVhZCk7Zm9yKHZhciBhPXRoaXM7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYT09PWRvY3VtZW50P2RvY3VtZW50LmhlYWQ6YX19O2EuYXBpLmluc3RhbmNlLnN0eWxlcz1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17YWRkUmVzb2x2ZVBhdGhBcGk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRQYXRoKCk7dGhpcy5wcm90b3R5cGUucmVzb2x2ZVBhdGg9ZnVuY3Rpb24oYil7cmV0dXJuIGErYn19LGVsZW1lbnRQYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXJsVG9QYXRoKEhUTUxJbXBvcnRzLmdldERvY3VtZW50VXJsKHRoaXMub3duZXJEb2N1bWVudCkpfSx1cmxUb1BhdGg6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9YS5zcGxpdCgiLyIpO3JldHVybiBiLnBvcCgpLGIucHVzaCgiIiksYi5qb2luKCIvIil9cmV0dXJuIiJ9fTthLmFwaS5kZWNsYXJhdGlvbi5wYXRoPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtpZihhKXt2YXIgZD1jKGEudGV4dENvbnRlbnQpLGU9YS5nZXRBdHRyaWJ1dGUoZyk7ZSYmZC5zZXRBdHRyaWJ1dGUoZyxlKSxiLmFwcGVuZENoaWxkKGQpfX1mdW5jdGlvbiBjKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGIudGV4dENvbnRlbnQ9YSxifWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19yZXNvdXJjZXx8IiJ9ZnVuY3Rpb24gZShhLGIpe3JldHVybiBuP24uY2FsbChhLGIpOnZvaWQgMH13aW5kb3cubG9nRmxhZ3N8fHt9O3ZhciBmPWEuYXBpLmluc3RhbmNlLnN0eWxlcyxnPWYuU1RZTEVfU0NPUEVfQVRUUklCVVRFLGg9InN0eWxlIixpPSJbcmVsPXN0eWxlc2hlZXRdIixqPSJnbG9iYWwiLGs9InBvbHltZXItc2NvcGUiLGw9e2luc3RhbGxTaGVldHM6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlU2hlZXRzKCksdGhpcy5pbnN0YWxsTG9jYWxTaGVldHMoKSx0aGlzLmluc3RhbGxHbG9iYWxTdHlsZXMoKX0sY2FjaGVTaGVldHM6ZnVuY3Rpb24oKXt0aGlzLnNoZWV0cz10aGlzLmZpbmROb2RlcyhpKSx0aGlzLnNoZWV0cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSl9LGluc3RhbGxMb2NhbFNoZWV0czpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2hlZXRzLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4hYS5oYXNBdHRyaWJ1dGUoayl9KSxiPXRoaXMudGVtcGxhdGVDb250ZW50KCk7aWYoYil7dmFyIGU9IiI7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2UrPWQoYSkrIlxuIn0pLGUmJmIuaW5zZXJ0QmVmb3JlKGMoZSksYi5maXJzdENoaWxkKX19LGZpbmROb2RlczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucXVlcnlTZWxlY3RvckFsbChhKS5hcnJheSgpLGQ9dGhpcy50ZW1wbGF0ZUNvbnRlbnQoKTtpZihkKXt2YXIgZT1kLnF1ZXJ5U2VsZWN0b3JBbGwoYSkuYXJyYXkoKTtjPWMuY29uY2F0KGUpfXJldHVybiBiP2MuZmlsdGVyKGIpOmN9LHRlbXBsYXRlQ29udGVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucXVlcnlTZWxlY3RvcigidGVtcGxhdGUiKTtyZXR1cm4gYSYmdGVtcGxhdGVDb250ZW50KGEpfSxpbnN0YWxsR2xvYmFsU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zdHlsZUZvclNjb3BlKGopO2IoYSxkb2N1bWVudC5oZWFkKX0sY3NzVGV4dEZvclNjb3BlOmZ1bmN0aW9uKGEpe3ZhciBiPSIiLGM9IlsiK2srIj0iK2ErIl0iLGY9ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSxjKX0sZz10aGlzLnNoZWV0cy5maWx0ZXIoZik7Zy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IrPWQoYSkrIlxuXG4ifSk7dmFyIGk9dGhpcy5maW5kTm9kZXMoaCxmKTtyZXR1cm4gaS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxiKz1hLnRleHRDb250ZW50KyJcblxuIn0pLGJ9LHN0eWxlRm9yU2NvcGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jc3NUZXh0Rm9yU2NvcGUoYSk7cmV0dXJuIHRoaXMuY3NzVGV4dFRvU2NvcGVTdHlsZShiLGEpfSxjc3NUZXh0VG9TY29wZVN0eWxlOmZ1bmN0aW9uKGEsYil7aWYoYSl7dmFyIGQ9YyhhKTtyZXR1cm4gZC5zZXRBdHRyaWJ1dGUoZyx0aGlzLmdldEF0dHJpYnV0ZSgibmFtZSIpKyItIitiKSxkfX19LG09SFRNTEVsZW1lbnQucHJvdG90eXBlLG49bS5tYXRjaGVzfHxtLm1hdGNoZXNTZWxlY3Rvcnx8bS53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG0ubW96TWF0Y2hlc1NlbGVjdG9yO2EuYXBpLmRlY2xhcmF0aW9uLnN0eWxlcz1sLGEuYXBwbHlTdHlsZVRvU2NvcGU9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYS5zbGljZSgwLGspPT1nfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEuc2xpY2Uoayl9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5yZWY/YS5yZWYuY29udGVudDphLmNvbnRlbnR9dmFyIGU9YS5hcGkuaW5zdGFuY2UuZXZlbnRzLGY9ZS5ERUxFR0FURVMsZz1lLkVWRU5UX1BSRUZJWCxoPXdpbmRvdy5sb2dGbGFnc3x8e30saT17aW5oZXJpdERlbGVnYXRlczpmdW5jdGlvbihhKXt0aGlzLmluaGVyaXRPYmplY3QoYSxmKX0scGFyc2VIb3N0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wcm90b3R5cGVbZl07dGhpcy5hZGRBdHRyaWJ1dGVEZWxlZ2F0ZXMoYSl9LGFkZEF0dHJpYnV0ZURlbGVnYXRlczpmdW5jdGlvbihhKXtmb3IodmFyIGQsZT0wO2Q9dGhpcy5hdHRyaWJ1dGVzW2VdO2UrKyliKGQubmFtZSkmJihhW2MoZC5uYW1lKV09ZC52YWx1ZSl9LHBhcnNlTG9jYWxFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIikuZm9yRWFjaChmdW5jdGlvbihhKXthLmRlbGVnYXRlcz17fSx0aGlzLmFjY3VtdWxhdGVUZW1wbGF0ZWRFdmVudHMoYSxhLmRlbGVnYXRlcyksaC5ldmVudHMmJmNvbnNvbGUubG9nKCJbJXNdIHBhcnNlTG9jYWxFdmVudHM6Iix0aGlzLmF0dHJpYnV0ZXMubmFtZS52YWx1ZSxhLmRlbGVnYXRlcyl9LHRoaXMpfSxhY2N1bXVsYXRlVGVtcGxhdGVkRXZlbnRzOmZ1bmN0aW9uKGEsYil7aWYoInRlbXBsYXRlIj09PWEubG9jYWxOYW1lKXt2YXIgYz1kKGEpO2MmJnRoaXMuYWNjdW11bGF0ZUNoaWxkRXZlbnRzKGMsYil9fSxhY2N1bXVsYXRlQ2hpbGRFdmVudHM6ZnVuY3Rpb24oYSxiKXthLmNoaWxkTm9kZXMuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLmFjY3VtdWxhdGVFdmVudHMoYSxiKX0sdGhpcyl9LGFjY3VtdWxhdGVFdmVudHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hY2N1bXVsYXRlQXR0cmlidXRlRXZlbnRzKGEsYiksdGhpcy5hY2N1bXVsYXRlQ2hpbGRFdmVudHMoYSxiKSx0aGlzLmFjY3VtdWxhdGVUZW1wbGF0ZWRFdmVudHMoYSxiKSxifSxhY2N1bXVsYXRlQXR0cmlidXRlRXZlbnRzOmZ1bmN0aW9uKGEsZCl7YS5hdHRyaWJ1dGVzJiZhLmF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihhKXtiKGEubmFtZSkmJnRoaXMuYWNjdW11bGF0ZUV2ZW50KGMoYS5uYW1lKSxkKX0sdGhpcyl9LGFjY3VtdWxhdGVFdmVudDpmdW5jdGlvbihhLGIpe2E9althXXx8YSxiW2FdPWJbYV18fDF9fSxqPXt3ZWJraXRhbmltYXRpb25zdGFydDoid2Via2l0QW5pbWF0aW9uU3RhcnQiLHdlYmtpdGFuaW1hdGlvbmVuZDoid2Via2l0QW5pbWF0aW9uRW5kIix3ZWJraXR0cmFuc2l0aW9uZW5kOiJ3ZWJraXRUcmFuc2l0aW9uRW5kIixkb21mb2N1c291dDoiRE9NRm9jdXNPdXQiLGRvbWZvY3VzaW46IkRPTUZvY3VzSW4ifSxrPWcubGVuZ3RoO2kuZXZlbnRfdHJhbnNsYXRpb25zPWosYS5hcGkuZGVjbGFyYXRpb24uZXZlbnRzPWl9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9e2NhY2hlUHJvcGVydGllczpmdW5jdGlvbigpe3RoaXMucHJvdG90eXBlLmN1c3RvbVByb3BlcnR5TmFtZXM9dGhpcy5nZXRDdXN0b21Qcm9wZXJ0eU5hbWVzKHRoaXMucHJvdG90eXBlKX0sZ2V0Q3VzdG9tUHJvcGVydHlOYW1lczpmdW5jdGlvbihjKXtmb3IodmFyIGQsZT17fTtjJiYhYS5pc0Jhc2UoYyk7KXtmb3IodmFyIGYsZz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjKSxoPTAsaT1nLmxlbmd0aDtpPmgmJihmPWdbaF0pO2grKyllW2ZdPSEwLGQ9ITA7Yz1jLl9fcHJvdG9fX31yZXR1cm4gZD9PYmplY3Qua2V5cyhlKTpifX07YS5hcGkuZGVjbGFyYXRpb24ucHJvcGVydGllcz1jfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj1hLmFwaS5pbnN0YW5jZS5hdHRyaWJ1dGVzLGM9Yi5QVUJMSVNIRUQsZD1iLklOU1RBTkNFX0FUVFJJQlVURVMsZT0icHVibGlzaCIsZj0iYXR0cmlidXRlcyIsZz17aW5oZXJpdEF0dHJpYnV0ZXNPYmplY3RzOmZ1bmN0aW9uKGEpe3RoaXMuaW5oZXJpdE9iamVjdChhLGMpLHRoaXMuaW5oZXJpdE9iamVjdChhLGQpfSxwYXJzZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt0aGlzLnB1Ymxpc2hBdHRyaWJ1dGVzKHRoaXMucHJvdG90eXBlKSx0aGlzLnB1Ymxpc2hQcm9wZXJ0aWVzKHRoaXMucHJvdG90eXBlKSx0aGlzLmFjY3VtdWxhdGVJbnN0YW5jZUF0dHJpYnV0ZXMoKX0scHVibGlzaEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YVtjXSxkPXRoaXMuZ2V0QXR0cmlidXRlKGYpO2lmKGQpe3ZhciBlPWQuc3BsaXQoZC5pbmRleE9mKCIsIik+PTA/IiwiOiIgIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksIWF8fGEgaW4gYnx8KGJbYV09bnVsbCl9KX1PYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2MgaW4gYXx8KGFbY109YltjXSl9KX0scHVibGlzaFByb3BlcnRpZXM6ZnVuY3Rpb24oYSl7dGhpcy5wdWJsaXNoUHVibGlzaChhKX0scHVibGlzaFB1Ymxpc2g6ZnVuY3Rpb24oYSl7aWYoYS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIGI9YVtlXTtiJiYoT2JqZWN0LmtleXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXthW2NdPWJbY119KSxQbGF0Zm9ybS5taXhpbihhW2NdLGIpKX19LGFjY3VtdWxhdGVJbnN0YW5jZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb3RvdHlwZVtkXTt0aGlzLmF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihiKXt0aGlzLmlzSW5zdGFuY2VBdHRyaWJ1dGUoYi5uYW1lKSYmKGFbYi5uYW1lXT1iLnZhbHVlKX0sdGhpcyl9LGlzSW5zdGFuY2VBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIXRoaXMuYmxhY2tMaXN0W2FdJiYib24tIiE9PWEuc2xpY2UoMCwzKX0sYmxhY2tMaXN0OntuYW1lOjEsImV4dGVuZHMiOjEsY29uc3RydWN0b3I6MX19O2cuYmxhY2tMaXN0W2ZdPTEsYS5hcGkuZGVjbGFyYXRpb24uYXR0cmlidXRlcz1nfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7ZlthXT1ifWZ1bmN0aW9uIGMoYSl7cmV0dXJuIE9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQuZ2V0UHJvdG90eXBlRm9yVGFnKGEpKX12YXIgZD1Qb2x5bWVyLmV4dGVuZCxlPWEuYXBpLmRlY2xhcmF0aW9uLGY9e30sZz1jKCk7ZChnLHtyZWFkeUNhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSxiPXRoaXMuZ2V0QXR0cmlidXRlKCJleHRlbmRzIik7dGhpcy5wcm90b3R5cGU9dGhpcy5nZW5lcmF0ZUN1c3RvbVByb3RvdHlwZShhLGIpLHRoaXMucHJvdG90eXBlLmVsZW1lbnQ9dGhpcyx0aGlzLmFkZFJlc29sdmVQYXRoQXBpKCksdGhpcy5kZXN1Z2FyKCksd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZQbGF0Zm9ybS5TaGFkb3dDU1Muc2hpbVN0eWxpbmcodGhpcy50ZW1wbGF0ZUNvbnRlbnQoKSxhLGIpLHRoaXMucmVnaXN0ZXIoYSksdGhpcy5wdWJsaXNoQ29uc3RydWN0b3IoKX0sZGVzdWdhcjpmdW5jdGlvbigpe3RoaXMucGFyc2VBdHRyaWJ1dGVzKCksdGhpcy5wYXJzZUhvc3RFdmVudHMoKSx0aGlzLnBhcnNlTG9jYWxFdmVudHMoKSx0aGlzLmluc3RhbGxTaGVldHMoKSx0aGlzLnByb3RvdHlwZS5yZWdpc3RlckNhbGxiYWNrJiZ0aGlzLnByb3RvdHlwZS5yZWdpc3RlckNhbGxiYWNrKHRoaXMpLHRoaXMuY2FjaGVQcm9wZXJ0aWVzKCl9LGdlbmVyYXRlQ3VzdG9tUHJvdG90eXBlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZW5lcmF0ZUJhc2VQcm90b3R5cGUoYik7cmV0dXJuIHRoaXMuYWRkTmFtZWRBcGkoYyxhKX0sZ2VuZXJhdGVCYXNlUHJvdG90eXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWMoYSk7cmV0dXJuIHRoaXMuZW5zdXJlQmFzZUFwaShiKX0sZW5zdXJlQmFzZUFwaTpmdW5jdGlvbihiKXtyZXR1cm4gYi5Qb2x5bWVyQmFzZXx8KE9iamVjdC5rZXlzKGEuYXBpLmluc3RhbmNlKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2QoYixhLmFwaS5pbnN0YW5jZVtjXSl9KSxiPU9iamVjdC5jcmVhdGUoYikpLHRoaXMuaW5oZXJpdEF0dHJpYnV0ZXNPYmplY3RzKGIpLHRoaXMuaW5oZXJpdERlbGVnYXRlcyhiKSxifSxhZGROYW1lZEFwaTpmdW5jdGlvbihhLGIpe3JldHVybiBkKGEsZltiXSl9LGluaGVyaXRPYmplY3Q6ZnVuY3Rpb24oYSxiKXthW2JdPWQoe30sYS5fX3Byb3RvX19bYl0pfSxyZWdpc3RlcjpmdW5jdGlvbihhKXt0aGlzLmN0b3I9ZG9jdW1lbnQucmVnaXN0ZXIoYSx7cHJvdG90eXBlOnRoaXMucHJvdG90eXBlfSksdGhpcy5wcm90b3R5cGUuY29uc3RydWN0b3I9dGhpcy5jdG9yLEhUTUxFbGVtZW50LnJlZ2lzdGVyKGEsdGhpcy5wcm90b3R5cGUpfSxwdWJsaXNoQ29uc3RydWN0b3I6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZSgiY29uc3RydWN0b3IiKTthJiYod2luZG93W2FdPXRoaXMuY3Rvcil9fSksT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihhKXtkKGcsZVthXSl9KSxkb2N1bWVudC5yZWdpc3RlcigicG9seW1lci1lbGVtZW50Iix7cHJvdG90eXBlOmd9KSxkKGIsd2luZG93LlBvbHltZXIpLHdpbmRvdy5Qb2x5bWVyPWJ9KFBvbHltZXIpOwovKgovL0Agc291cmNlTWFwcGluZ1VSTD1wb2x5bWVyLm1pbi5qcy5tYXAKKi8=",
                "body": "Ly8gQ29weXJpZ2h0IChjKSAyMDEyIFRoZSBQb2x5bWVyIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCi8vCi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAovLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlCi8vIG1ldDoKLy8KLy8gICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAovLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCi8vICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZQovLyBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyCi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUKLy8gZGlzdHJpYnV0aW9uLgovLyAgICAqIE5laXRoZXIgdGhlIG5hbWUgb2YgR29vZ2xlIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMKLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20KLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KLy8KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUwovLyAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVAovLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IKLy8gQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQKLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsCi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QKLy8gTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsCi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWQovLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUCi8vIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRQovLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgpmdW5jdGlvbiBQb2ludGVyR2VzdHVyZUV2ZW50KGEsYil7dmFyIGM9Ynx8e30sZD1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSxlPXtidWJibGVzOiEwLGNhbmNlbGFibGU6ITB9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EgaW4gYyYmKGVbYV09Y1thXSl9KSxkLmluaXRFdmVudChhLGUuYnViYmxlcyxlLmNhbmNlbGFibGUpLE9iamVjdC5rZXlzKGMpLmZvckVhY2goZnVuY3Rpb24oYSl7ZFthXT1iW2FdfSksZC5wcmV2ZW50VGFwPXRoaXMucHJldmVudFRhcCxkfWlmKHdpbmRvdy5QbGF0Zm9ybT13aW5kb3cuUGxhdGZvcm18fHt9LHdpbmRvdy5sb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LGZ1bmN0aW9uKGEpe3ZhciBiPWEuZmxhZ3N8fHt9O2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9IiksYVswXSYmKGJbYVswXV09YVsxXXx8ITApfSksYi5zaGFkb3c9KGIuc2hhZG93ZG9tfHxiLnNoYWRvd3x8Yi5wb2x5ZmlsbHx8IUhUTUxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290KSYmInBvbHlmaWxsIixhLmZsYWdzPWJ9KFBsYXRmb3JtKSwicG9seWZpbGwiPT09UGxhdGZvcm0uZmxhZ3Muc2hhZG93KXt2YXIgU2lkZVRhYmxlOyJ1bmRlZmluZWQiIT10eXBlb2YgV2Vha01hcCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94LyIpPDA/U2lkZVRhYmxlPVdlYWtNYXA6ZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1PYmplY3QuaGFzT3duUHJvcGVydHksYz0obmV3IERhdGUpLmdldFRpbWUoKSUxZTk7U2lkZVRhYmxlPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYysrICsiX18iKX0sU2lkZVRhYmxlLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7YShiLHRoaXMubmFtZSx7dmFsdWU6Yyx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGIuY2FsbChhLHRoaXMubmFtZSk/YVt0aGlzLm5hbWVdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX19KCk7dmFyIFNoYWRvd0RPTVBvbHlmaWxsPXt9OyFmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSksYX1mdW5jdGlvbiBkKGEsYil7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7c3dpdGNoKGMpe2Nhc2UiYXJndW1lbnRzIjpjYXNlImNhbGxlciI6Y2FzZSJsZW5ndGgiOmNhc2UibmFtZSI6Y2FzZSJwcm90b3R5cGUiOmNhc2UidG9TdHJpbmciOnJldHVybn1PYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKSl9KSxhfWZ1bmN0aW9uIGUoYSl7dmFyIGI9YS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxjPXouZ2V0KGIpO2lmKGMpcmV0dXJuIGM7dmFyIGQ9ZShiKSxmPW4oZCk7cmV0dXJuIGsoYixmLGEpLGZ9ZnVuY3Rpb24gZihhLGIpe2koYSxiLCEwKX1mdW5jdGlvbiBnKGEsYil7aShiLGEsITEpfWZ1bmN0aW9uIGgoYSl7cmV0dXJuL15vblthLXpdKyQvLnRlc3QoYSl9ZnVuY3Rpb24gaShiLGMsZCl7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihlKXtpZighKGUgaW4gYykpe0ImJmIuX19sb29rdXBHZXR0ZXJfXyhlKTt2YXIgZjt0cnl7Zj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsZSl9Y2F0Y2goZyl7Zj1DfXZhciBpLGo7aWYoZCYmImZ1bmN0aW9uIj09dHlwZW9mIGYudmFsdWUpcmV0dXJuIGNbZV09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2VdLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSx2b2lkIDA7dmFyIGs9aChlKTtpPWs/YS5nZXRFdmVudEhhbmRsZXJHZXR0ZXIoZSk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2VdfSwoZi53cml0YWJsZXx8Zi5zZXQpJiYoaj1rP2EuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyKGUpOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbFtlXT1hfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGMsZSx7Z2V0Omksc2V0OmosY29uZmlndXJhYmxlOmYuY29uZmlndXJhYmxlLGVudW1lcmFibGU6Zi5lbnVtZXJhYmxlfSl9fSl9ZnVuY3Rpb24gaihhLGIsYyl7dmFyIGU9YS5wcm90b3R5cGU7ayhlLGIsYyksZChiLGEpfWZ1bmN0aW9uIGsoYSxjLGQpe3ZhciBlPWMucHJvdG90eXBlO2Iodm9pZCAwPT09ei5nZXQoYSkpLHouc2V0KGEsYyksZihhLGUpLGQmJmcoZSxkKX1mdW5jdGlvbiBsKGEsYil7cmV0dXJuIHouZ2V0KGIucHJvdG90eXBlKT09PWF9ZnVuY3Rpb24gbShhKXt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYz1lKGIpLGQ9bihjKTtyZXR1cm4gayhiLGQsYSksZH1mdW5jdGlvbiBuKGEpe2Z1bmN0aW9uIGIoYil7YS5jYWxsKHRoaXMsYil9cmV0dXJuIGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpLGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWIsYn1mdW5jdGlvbiBvKGEpe3JldHVybiBhIGluc3RhbmNlb2YgQS5FdmVudFRhcmdldHx8YSBpbnN0YW5jZW9mIEEuRXZlbnR8fGEgaW5zdGFuY2VvZiBBLkRPTUltcGxlbWVudGF0aW9ufWZ1bmN0aW9uIHAoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBGfHxhIGluc3RhbmNlb2YgRXx8YSBpbnN0YW5jZW9mIEd8fGEgaW5zdGFuY2VvZiBEfWZ1bmN0aW9uIHEoYSl7aWYobnVsbD09PWEpcmV0dXJuIG51bGw7YihwKGEpKTt2YXIgYz15LmdldChhKTtpZighYyl7dmFyIGQ9ZShhKTtjPW5ldyBkKGEpLHkuc2V0KGEsYyl9cmV0dXJuIGN9ZnVuY3Rpb24gcihhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYihvKGEpKSxhLmltcGwpfWZ1bmN0aW9uIHMoYSl7cmV0dXJuIGEmJm8oYSk/cihhKTphfWZ1bmN0aW9uIHQoYSl7cmV0dXJuIGEmJiFvKGEpP3EoYSk6YX1mdW5jdGlvbiB1KGEsYyl7bnVsbCE9PWMmJihiKHAoYSkpLGIodm9pZCAwPT09Y3x8byhjKSkseS5zZXQoYSxjKSl9ZnVuY3Rpb24gdihhLGIsYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEucHJvdG90eXBlLGIse2dldDpjLGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9ZnVuY3Rpb24gdyhhLGIpe3YoYSxiLGZ1bmN0aW9uKCl7cmV0dXJuIHEodGhpcy5pbXBsW2JdKX0pfWZ1bmN0aW9uIHgoYSxiKXthLmZvckVhY2goZnVuY3Rpb24oYSl7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7dmFyIGE9cSh0aGlzKTtyZXR1cm4gYVtiXS5hcHBseShhLGFyZ3VtZW50cyl9fSl9KX12YXIgeT1uZXcgU2lkZVRhYmxlLHo9bmV3IFNpZGVUYWJsZSxBPU9iamVjdC5jcmVhdGUobnVsbCk7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTt2YXIgQj0vRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxDPXtnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5jdGlvbigpe30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9LEQ9RE9NSW1wbGVtZW50YXRpb24sRT1FdmVudCxGPU5vZGUsRz1XaW5kb3c7YS5hc3NlcnQ9YixhLmRlZmluZUdldHRlcj12LGEuZGVmaW5lV3JhcEdldHRlcj13LGEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXI9eCxhLmlzV3JhcHBlckZvcj1sLGEubWl4aW49YyxhLnJlZ2lzdGVyT2JqZWN0PW0sYS5yZWdpc3RlcldyYXBwZXI9aixhLnJld3JhcD11LGEudW53cmFwPXIsYS51bndyYXBJZk5lZWRlZD1zLGEud3JhcD1xLGEud3JhcElmTmVlZGVkPXQsYS53cmFwcGVycz1BfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIE4uU2hhZG93Um9vdH1mdW5jdGlvbiBjKGEpe3ZhciBiPWEubG9jYWxOYW1lO3JldHVybiJjb250ZW50Ij09PWJ8fCJzaGFkb3ciPT09Yn1mdW5jdGlvbiBkKGEpe3JldHVybiEhYS5zaGFkb3dSb290fWZ1bmN0aW9uIGUoYSl7dmFyIGI7cmV0dXJuIGEucGFyZW50Tm9kZXx8KGI9YS5kZWZhdWx0VmlldykmJk0oYil8fG51bGx9ZnVuY3Rpb24gZihmLGcsaCl7aWYoaC5sZW5ndGgpcmV0dXJuIGguc2hpZnQoKTtpZihiKGYpKXJldHVybiBqKGYpfHxhLmdldEhvc3RGb3JTaGFkb3dSb290KGYpO3ZhciBpPWEuZXZlbnRQYXJlbnRzVGFibGUuZ2V0KGYpO2lmKGkpe2Zvcih2YXIgaz0xO2s8aS5sZW5ndGg7aysrKWhbay0xXT1pW2tdO3JldHVybiBpWzBdfWlmKGcmJmMoZikpe3ZhciBsPWYucGFyZW50Tm9kZTtpZihsJiZkKGwpKWZvcih2YXIgbT1hLmdldFNoYWRvd1RyZWVzKGwpLG49aihnKSxrPTA7azxtLmxlbmd0aDtrKyspaWYobVtrXS5jb250YWlucyhuKSlyZXR1cm4gbn1yZXR1cm4gZShmKX1mdW5jdGlvbiBnKGEpe2Zvcih2YXIgZD1bXSxlPWEsZz1bXSxpPVtdO2U7KXt2YXIgaj1udWxsO2lmKGMoZSkpe2o9aChkKTt2YXIgaz1kW2QubGVuZ3RoLTFdfHxlO2QucHVzaChrKX1lbHNlIGQubGVuZ3RofHxkLnB1c2goZSk7dmFyIGw9ZFtkLmxlbmd0aC0xXTtnLnB1c2goe3RhcmdldDpsLGN1cnJlbnRUYXJnZXQ6ZX0pLGIoZSkmJmQucG9wKCksZT1mKGUsaixpKX1yZXR1cm4gZ31mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xO2I+PTA7Yi0tKWlmKCFjKGFbYl0pKXJldHVybiBhW2JdO3JldHVybiBudWxsfWZ1bmN0aW9uIGkoZCxlKXtmb3IodmFyIGc9W107ZDspe2Zvcih2YXIgaT1bXSxqPWUsbD12b2lkIDA7ajspe3ZhciBuPW51bGw7aWYoaS5sZW5ndGgpe2lmKGMoaikmJihuPWgoaSksayhsKSkpe3ZhciBvPWlbaS5sZW5ndGgtMV07aS5wdXNoKG8pfX1lbHNlIGkucHVzaChqKTtpZihtKGosZCkpcmV0dXJuIGlbaS5sZW5ndGgtMV07YihqKSYmaS5wb3AoKSxsPWosaj1mKGosbixnKX1kPWIoZCk/YS5nZXRIb3N0Rm9yU2hhZG93Um9vdChkKTpkLnBhcmVudE5vZGV9fWZ1bmN0aW9uIGooYil7cmV0dXJuIGEuaW5zZXJ0aW9uUGFyZW50VGFibGUuZ2V0KGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIGooYSl9ZnVuY3Rpb24gbChhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBtKGEsYil7cmV0dXJuIGwoYSk9PT1sKGIpfWZ1bmN0aW9uIG4oYixjKXtpZihiPT09YylyZXR1cm4hMDtpZihiIGluc3RhbmNlb2YgTi5TaGFkb3dSb290KXt2YXIgZD1hLmdldEhvc3RGb3JTaGFkb3dSb290KGIpO3JldHVybiBkP24obChkKSxjKTohMX1yZXR1cm4hMX1mdW5jdGlvbiBvKGEpe3N3aXRjaChhKXtjYXNlIkRPTUF0dHJNb2RpZmllZCI6Y2FzZSJET01BdHRyaWJ1dGVOYW1lQ2hhbmdlZCI6Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOmNhc2UiRE9NRWxlbWVudE5hbWVDaGFuZ2VkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZCI6Y2FzZSJET01Ob2RlSW5zZXJ0ZWRJbnRvRG9jdW1lbnQiOmNhc2UiRE9NTm9kZVJlbW92ZWQiOmNhc2UiRE9NTm9kZVJlbW92ZWRGcm9tRG9jdW1lbnQiOmNhc2UiRE9NU3VidHJlZU1vZGlmaWVkIjpyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBwKGIpe2lmKCFQLmdldChiKSl7UC5zZXQoYiwhMCksbyhiLnR5cGUpfHxhLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgYz1NKGIudGFyZ2V0KSxkPU0oYik7cmV0dXJuIHEoZCxjKX19ZnVuY3Rpb24gcShhLGIpe3ZhciBjPWcoYik7cmV0dXJuImxvYWQiPT09YS50eXBlJiYyPT09Yy5sZW5ndGgmJmNbMF0udGFyZ2V0IGluc3RhbmNlb2YgTi5Eb2N1bWVudCYmYy5zaGlmdCgpLFguc2V0KGEsYykscihhLGMpJiZzKGEsYykmJnQoYSxjKSxULnNldChhLHcuTk9ORSksUi5zZXQoYSxudWxsKSxhLmRlZmF1bHRQcmV2ZW50ZWR9ZnVuY3Rpb24gcihhLGIpe2Zvcih2YXIgYyxkPWIubGVuZ3RoLTE7ZD4wO2QtLSl7dmFyIGU9YltkXS50YXJnZXQsZj1iW2RdLmN1cnJlbnRUYXJnZXQ7aWYoZSE9PWYmJihjPXcuQ0FQVFVSSU5HX1BIQVNFLCF1KGJbZF0sYSxjKSkpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gcyhhLGIpe3ZhciBjPXcuQVRfVEFSR0VUO3JldHVybiB1KGJbMF0sYSxjKX1mdW5jdGlvbiB0KGEsYil7Zm9yKHZhciBjLGQ9YS5idWJibGVzLGU9MTtlPGIubGVuZ3RoO2UrKyl7dmFyIGY9YltlXS50YXJnZXQsZz1iW2VdLmN1cnJlbnRUYXJnZXQ7aWYoZj09PWcpYz13LkFUX1RBUkdFVDtlbHNle2lmKCFkfHxWLmdldChhKSljb250aW51ZTtjPXcuQlVCQkxJTkdfUEhBU0V9aWYoIXUoYltlXSxhLGMpKXJldHVybn19ZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQ9YS50YXJnZXQsZT1hLmN1cnJlbnRUYXJnZXQsZj1PLmdldChlKTtpZighZilyZXR1cm4hMDtpZigicmVsYXRlZFRhcmdldCJpbiBiKXt2YXIgZz1MKGIpLGg9TShnLnJlbGF0ZWRUYXJnZXQpLGo9aShlLGgpO2lmKGo9PT1kKXJldHVybiEwO1Muc2V0KGIsail9VC5zZXQoYixjKTt2YXIgaz1iLnR5cGUsbD0hMTtRLnNldChiLGQpLFIuc2V0KGIsZSk7Zm9yKHZhciBtPTA7bTxmLmxlbmd0aDttKyspe3ZhciBuPWZbbV07aWYobi5yZW1vdmVkKWw9ITA7ZWxzZSBpZighKG4udHlwZSE9PWt8fCFuLmNhcHR1cmUmJmM9PT13LkNBUFRVUklOR19QSEFTRXx8bi5jYXB0dXJlJiZjPT09dy5CVUJCTElOR19QSEFTRSkpdHJ5e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuLmhhbmRsZXI/bi5oYW5kbGVyLmNhbGwoZSxiKTpuLmhhbmRsZXIuaGFuZGxlRXZlbnQoYiksVi5nZXQoYikpcmV0dXJuITF9Y2F0Y2gobyl7d2luZG93Lm9uZXJyb3I/d2luZG93Lm9uZXJyb3Ioby5tZXNzYWdlKTpjb25zb2xlLmVycm9yKG8pfX1pZihsKXt2YXIgcD1mLnNsaWNlKCk7Zi5sZW5ndGg9MDtmb3IodmFyIG09MDttPHAubGVuZ3RoO20rKylwW21dLnJlbW92ZWR8fGYucHVzaChwW21dKX1yZXR1cm4hVS5nZXQoYil9ZnVuY3Rpb24gdihhLGIsYyl7dGhpcy50eXBlPWEsdGhpcy5oYW5kbGVyPWIsdGhpcy5jYXB0dXJlPUJvb2xlYW4oYyl9ZnVuY3Rpb24gdyhhLGIpe3JldHVybiBhIGluc3RhbmNlb2YgWT8odGhpcy5pbXBsPWEsdm9pZCAwKTpNKEEoWSwiRXZlbnQiLGEsYikpfWZ1bmN0aW9uIHgoYSl7cmV0dXJuIGEmJmEucmVsYXRlZFRhcmdldD9PYmplY3QuY3JlYXRlKGEse3JlbGF0ZWRUYXJnZXQ6e3ZhbHVlOkwoYS5yZWxhdGVkVGFyZ2V0KX19KTphfWZ1bmN0aW9uIHkoYSxiLGMpe3ZhciBkPXdpbmRvd1thXSxlPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGIgaW5zdGFuY2VvZiBkPyh0aGlzLmltcGw9Yix2b2lkIDApOk0oQShkLGEsYixjKSl9O3JldHVybiBlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxjJiZKKGUucHJvdG90eXBlLGMpLGQmJihkLnByb3RvdHlwZVsiaW5pdCIrYV0/SyhkLGUsZG9jdW1lbnQuY3JlYXRlRXZlbnQoYSkpOksoZCxlLG5ldyBkKCJ0ZW1wIikpKSxlfWZ1bmN0aW9uIHooYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXthcmd1bWVudHNbYl09TChhcmd1bWVudHNbYl0pO3ZhciBjPUwodGhpcyk7Y1thXS5hcHBseShjLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIEEoYSxiLGMsZCl7aWYoZ2IpcmV0dXJuIG5ldyBhKGMseChkKSk7dmFyIGU9TChkb2N1bWVudC5jcmVhdGVFdmVudChiKSksZj1mYltiXSxnPVtjXTtyZXR1cm4gT2JqZWN0LmtleXMoZikuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1udWxsIT1kJiZhIGluIGQ/ZFthXTpmW2FdOyJyZWxhdGVkVGFyZ2V0Ij09PWEmJihiPUwoYikpLGcucHVzaChiKX0pLGVbImluaXQiK2JdLmFwcGx5KGUsZyksZX1mdW5jdGlvbiBCKGEpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhPyEwOmEmJmEuaGFuZGxlRXZlbnR9ZnVuY3Rpb24gQyhhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBEKGIpe3JldHVybiBiIGluc3RhbmNlb2YgTi5TaGFkb3dSb290JiYoYj1hLmdldEhvc3RGb3JTaGFkb3dSb290KGIpKSxMKGIpfWZ1bmN0aW9uIEUoYSl7SShhLGpiKX1mdW5jdGlvbiBGKGIsYyxkLGUpe2EucmVuZGVyQWxsUGVuZGluZygpO2Zvcih2YXIgZj1NKGtiLmNhbGwoYy5pbXBsLGQsZSkpLGg9ZyhmLHRoaXMpLGk9MDtpPGgubGVuZ3RoO2krKyl7dmFyIGo9aFtpXTtpZihqLmN1cnJlbnRUYXJnZXQ9PT1iKXJldHVybiBqLnRhcmdldH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBHKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPVcuZ2V0KHRoaXMpO3JldHVybiBiJiZiW2FdJiZiW2FdLnZhbHVlfHxudWxsfX1mdW5jdGlvbiBIKGEpe3ZhciBiPWEuc2xpY2UoMik7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPVcuZ2V0KHRoaXMpO2R8fChkPU9iamVjdC5jcmVhdGUobnVsbCksVy5zZXQodGhpcyxkKSk7dmFyIGU9ZFthXTtpZihlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixlLndyYXBwZWQsITEpLCJmdW5jdGlvbiI9PXR5cGVvZiBjKXt2YXIgZj1mdW5jdGlvbihiKXt2YXIgZD1jLmNhbGwodGhpcyxiKTtkPT09ITE/Yi5wcmV2ZW50RGVmYXVsdCgpOiJvbmJlZm9yZXVubG9hZCI9PT1hJiYic3RyaW5nIj09dHlwZW9mIGQmJihiLnJldHVyblZhbHVlPWQpfTt0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYixmLCExKSxkW2FdPXt2YWx1ZTpjLHdyYXBwZWQ6Zn19fX12YXIgST1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLEo9YS5taXhpbixLPWEucmVnaXN0ZXJXcmFwcGVyLEw9YS51bndyYXAsTT1hLndyYXAsTj1hLndyYXBwZXJzO25ldyBTaWRlVGFibGU7dmFyIE89bmV3IFNpZGVUYWJsZSxQPW5ldyBTaWRlVGFibGUsUT1uZXcgU2lkZVRhYmxlLFI9bmV3IFNpZGVUYWJsZSxTPW5ldyBTaWRlVGFibGUsVD1uZXcgU2lkZVRhYmxlLFU9bmV3IFNpZGVUYWJsZSxWPW5ldyBTaWRlVGFibGUsVz1uZXcgU2lkZVRhYmxlLFg9bmV3IFNpZGVUYWJsZTt2LnByb3RvdHlwZT17ZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmhhbmRsZXI9PT1hLmhhbmRsZXImJnRoaXMudHlwZT09PWEudHlwZSYmdGhpcy5jYXB0dXJlPT09YS5jYXB0dXJlfSxnZXQgcmVtb3ZlZCgpe3JldHVybiBudWxsPT09dGhpcy5oYW5kbGVyfSxyZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXI9bnVsbH19O3ZhciBZPXdpbmRvdy5FdmVudDt3LnByb3RvdHlwZT17Z2V0IHRhcmdldCgpe3JldHVybiBRLmdldCh0aGlzKX0sZ2V0IGN1cnJlbnRUYXJnZXQoKXtyZXR1cm4gUi5nZXQodGhpcyl9LGdldCBldmVudFBoYXNlKCl7cmV0dXJuIFQuZ2V0KHRoaXMpfSxnZXQgcGF0aCgpe3ZhciBhPW5ldyBOLk5vZGVMaXN0LGI9WC5nZXQodGhpcyk7aWYoYil7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aC0xLGU9bChSLmdldCh0aGlzKSksZj0wO2Q+PWY7ZisrKXt2YXIgZz1iW2ZdLmN1cnJlbnRUYXJnZXQsaD1sKGcpO24oZSxoKSYmKGYhPT1kfHxnIGluc3RhbmNlb2YgTi5Ob2RlKSYmKGFbYysrXT1nKX1hLmxlbmd0aD1jfXJldHVybiBhfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtVLnNldCh0aGlzLCEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7VS5zZXQodGhpcywhMCksVi5zZXQodGhpcywhMCl9fSxLKFksdyxkb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSk7dmFyIFo9eSgiVUlFdmVudCIsdyksJD15KCJDdXN0b21FdmVudCIsdyksXz17Z2V0IHJlbGF0ZWRUYXJnZXQoKXtyZXR1cm4gUy5nZXQodGhpcyl8fE0oTCh0aGlzKS5yZWxhdGVkVGFyZ2V0KX19LGFiPUooe2luaXRNb3VzZUV2ZW50OnooImluaXRNb3VzZUV2ZW50IiwxNCl9LF8pLGJiPUooe2luaXRGb2N1c0V2ZW50OnooImluaXRGb2N1c0V2ZW50Iiw1KX0sXyksY2I9eSgiTW91c2VFdmVudCIsWixhYiksZGI9eSgiRm9jdXNFdmVudCIsWixiYiksZWI9eSgiTXV0YXRpb25FdmVudCIsdyx7aW5pdE11dGF0aW9uRXZlbnQ6eigiaW5pdE11dGF0aW9uRXZlbnQiLDMpLGdldCByZWxhdGVkTm9kZSgpe3JldHVybiBNKHRoaXMuaW1wbC5yZWxhdGVkTm9kZSl9fSksZmI9T2JqZWN0LmNyZWF0ZShudWxsKSxnYj1mdW5jdGlvbigpe3RyeXtuZXcgd2luZG93Lk1vdXNlRXZlbnQoImNsaWNrIil9Y2F0Y2goYSl7cmV0dXJuITF9cmV0dXJuITB9KCk7aWYoIWdiKXt2YXIgaGI9ZnVuY3Rpb24oYSxiLGMpe2lmKGMpe3ZhciBkPWZiW2NdO2I9SihKKHt9LGQpLGIpfWZiW2FdPWJ9O2hiKCJFdmVudCIse2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMX0pLGhiKCJDdXN0b21FdmVudCIse2RldGFpbDpudWxsfSwiRXZlbnQiKSxoYigiVUlFdmVudCIse3ZpZXc6bnVsbCxkZXRhaWw6MH0sIkV2ZW50IiksaGIoIk1vdXNlRXZlbnQiLHtzY3JlZW5YOjAsc2NyZWVuWTowLGNsaWVudFg6MCxjbGllbnRZOjAsY3RybEtleTohMSxhbHRLZXk6ITEsc2hpZnRLZXk6ITEsbWV0YUtleTohMSxidXR0b246MCxyZWxhdGVkVGFyZ2V0Om51bGx9LCJVSUV2ZW50IiksaGIoIkZvY3VzRXZlbnQiLHtyZWxhdGVkVGFyZ2V0Om51bGx9LCJVSUV2ZW50Iil9dmFyIGliPXdpbmRvdy5FdmVudFRhcmdldCxqYj1bImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdO1tOb2RlLFdpbmRvd10uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnByb3RvdHlwZTtqYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLGErIl8iLHt2YWx1ZTpiW2FdfSl9KX0pLEMucHJvdG90eXBlPXthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtpZihCKGIpKXt2YXIgZD1uZXcgdihhLGIsYyksZT1PLmdldCh0aGlzKTtpZihlKXtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKylpZihkLmVxdWFscyhlW2ZdKSlyZXR1cm59ZWxzZSBlPVtdLE8uc2V0KHRoaXMsZSk7ZS5wdXNoKGQpO3ZhciBnPUQodGhpcyk7Zy5hZGRFdmVudExpc3RlbmVyXyhhLHAsITApfX0scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7Yz1Cb29sZWFuKGMpO3ZhciBkPU8uZ2V0KHRoaXMpO2lmKGQpe2Zvcih2YXIgZT0wLGY9ITEsZz0wO2c8ZC5sZW5ndGg7ZysrKWRbZ10udHlwZT09PWEmJmRbZ10uY2FwdHVyZT09PWMmJihlKyssZFtnXS5oYW5kbGVyPT09YiYmKGY9ITAsZFtnXS5yZW1vdmUoKSkpO2lmKGYmJjE9PT1lKXt2YXIgaD1EKHRoaXMpO2gucmVtb3ZlRXZlbnRMaXN0ZW5lcl8oYSxwLCEwKX19fSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPUQodGhpcyk7cmV0dXJuIGIuZGlzcGF0Y2hFdmVudF8oTChhKSl9fSxpYiYmSyhpYixDKTt2YXIga2I9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludDthLmFkanVzdFJlbGF0ZWRUYXJnZXQ9aSxhLmVsZW1lbnRGcm9tUG9pbnQ9RixhLmdldEV2ZW50SGFuZGxlckdldHRlcj1HLGEuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyPUgsYS53cmFwRXZlbnRUYXJnZXRNZXRob2RzPUUsYS53cmFwcGVycy5DdXN0b21FdmVudD0kLGEud3JhcHBlcnMuRXZlbnQ9dyxhLndyYXBwZXJzLkV2ZW50VGFyZ2V0PUMsYS53cmFwcGVycy5Gb2N1c0V2ZW50PWRiLGEud3JhcHBlcnMuTW91c2VFdmVudD1jYixhLndyYXBwZXJzLk11dGF0aW9uRXZlbnQ9ZWIsYS53cmFwcGVycy5VSUV2ZW50PVp9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7ZW51bWVyYWJsZTohMX0pfWZ1bmN0aW9uIGMoKXt0aGlzLmxlbmd0aD0wLGIodGhpcywibGVuZ3RoIil9ZnVuY3Rpb24gZChhKXtpZihudWxsPT1hKXJldHVybiBhO2Zvcih2YXIgYj1uZXcgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWJbZF09ZihhW2RdKTtyZXR1cm4gYi5sZW5ndGg9ZSxifWZ1bmN0aW9uIGUoYSxiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBkKHRoaXMuaW1wbFtiXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fXZhciBmPWEud3JhcDtjLnByb3RvdHlwZT17aXRlbTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thXX19LGIoYy5wcm90b3R5cGUsIml0ZW0iKSxhLndyYXBwZXJzLk5vZGVMaXN0PWMsYS5hZGRXcmFwTm9kZUxpc3RNZXRob2Q9ZSxhLndyYXBOb2RlTGlzdD1kfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtqKGEgaW5zdGFuY2VvZiBmKX1mdW5jdGlvbiBjKGEsYixjLGQpe2lmKGEubm9kZVR5cGUhPT1mLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUpcmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpLGEucGFyZW50Tm9kZV89YixhLnByZXZpb3VzU2libGluZ189YyxhLm5leHRTaWJsaW5nXz1kLGMmJihjLm5leHRTaWJsaW5nXz1hKSxkJiYoZC5wcmV2aW91c1NpYmxpbmdfPWEpLFthXTtmb3IodmFyIGUsZz1bXTtlPWEuZmlyc3RDaGlsZDspYS5yZW1vdmVDaGlsZChlKSxnLnB1c2goZSksZS5wYXJlbnROb2RlXz1iO2Zvcih2YXIgaD0wO2g8Zy5sZW5ndGg7aCsrKWdbaF0ucHJldmlvdXNTaWJsaW5nXz1nW2gtMV18fGMsZ1toXS5uZXh0U2libGluZ189Z1toKzFdfHxkO3JldHVybiBjJiYoYy5uZXh0U2libGluZ189Z1swXSksZCYmKGQucHJldmlvdXNTaWJsaW5nXz1nW2cubGVuZ3RoLTFdKSxnfWZ1bmN0aW9uIGQoYSxiKXt2YXIgYz1iLmxlbmd0aDtpZigxPT09YylyZXR1cm4gbShiWzBdKTtmb3IodmFyIGQ9bShhLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKSxlPTA7Yz5lO2UrKylkLmFwcGVuZENoaWxkKG0oYltlXSkpO3JldHVybiBkfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPWEuZmlyc3RDaGlsZDtiOyl7aihiLnBhcmVudE5vZGU9PT1hKTt2YXIgYz1iLm5leHRTaWJsaW5nLGQ9bShiKSxlPWQucGFyZW50Tm9kZTtlJiZzLmNhbGwoZSxkKSxiLnByZXZpb3VzU2libGluZ189Yi5uZXh0U2libGluZ189Yi5wYXJlbnROb2RlXz1udWxsLGI9Y31hLmZpcnN0Q2hpbGRfPWEubGFzdENoaWxkXz1udWxsfWZ1bmN0aW9uIGYoYSl7aihhIGluc3RhbmNlb2YgbyksZy5jYWxsKHRoaXMsYSksdGhpcy5wYXJlbnROb2RlXz12b2lkIDAsdGhpcy5maXJzdENoaWxkXz12b2lkIDAsdGhpcy5sYXN0Q2hpbGRfPXZvaWQgMCx0aGlzLm5leHRTaWJsaW5nXz12b2lkIDAsdGhpcy5wcmV2aW91c1NpYmxpbmdfPXZvaWQgMH12YXIgZz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGg9YS53cmFwcGVycy5Ob2RlTGlzdCxpPWEuZGVmaW5lV3JhcEdldHRlcixqPWEuYXNzZXJ0LGs9YS5taXhpbixsPWEucmVnaXN0ZXJXcmFwcGVyLG09YS51bndyYXAsbj1hLndyYXAsbz13aW5kb3cuTm9kZSxwPW8ucHJvdG90eXBlLmFwcGVuZENoaWxkLHE9by5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLHI9by5wcm90b3R5cGUucmVwbGFjZUNoaWxkLHM9by5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsdD1vLnByb3RvdHlwZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGcucHJvdG90eXBlKSxrKGYucHJvdG90eXBlLHthcHBlbmRDaGlsZDpmdW5jdGlvbihhKXtiKGEpLHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGU9dGhpcy5sYXN0Q2hpbGQsZj1udWxsLGc9YyhhLHRoaXMsZSxmKTtyZXR1cm4gdGhpcy5sYXN0Q2hpbGRfPWdbZy5sZW5ndGgtMV0sZXx8KHRoaXMuZmlyc3RDaGlsZF89Z1swXSkscC5jYWxsKHRoaXMuaW1wbCxkKHRoaXMsZykpLGF9LGluc2VydEJlZm9yZTpmdW5jdGlvbihhLGUpe2lmKCFlKXJldHVybiB0aGlzLmFwcGVuZENoaWxkKGEpO2IoYSksYihlKSxqKGUucGFyZW50Tm9kZT09PXRoaXMpLHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGY9ZS5wcmV2aW91c1NpYmxpbmcsZz1lLGg9YyhhLHRoaXMsZixnKTt0aGlzLmZpcnN0Q2hpbGQ9PT1lJiYodGhpcy5maXJzdENoaWxkXz1oWzBdKTt2YXIgaT1tKGUpLGs9aS5wYXJlbnROb2RlO3JldHVybiBrJiZxLmNhbGwoayxkKHRoaXMsaCksaSksYX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSl7aWYoYihhKSxhLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGM9dGhpcy5maXJzdENoaWxkLGQ9dGhpcy5sYXN0Q2hpbGQsZT1hLm5leHRTaWJsaW5nLGY9YS5wcmV2aW91c1NpYmxpbmcsZz1tKGEpLGg9Zy5wYXJlbnROb2RlO3JldHVybiBoJiZzLmNhbGwoaCxnKSxjPT09YSYmKHRoaXMuZmlyc3RDaGlsZF89ZSksZD09PWEmJih0aGlzLmxhc3RDaGlsZF89ZiksZiYmKGYubmV4dFNpYmxpbmdfPWUpLGUmJihlLnByZXZpb3VzU2libGluZ189ZiksYS5wcmV2aW91c1NpYmxpbmdfPWEubmV4dFNpYmxpbmdfPWEucGFyZW50Tm9kZV89bnVsbCxhfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxlKXtpZihiKGEpLGIoZSksZS5wYXJlbnROb2RlIT09dGhpcyl0aHJvdyBuZXcgRXJyb3IoIk5vdEZvdW5kRXJyb3IiKTt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBmPWUucHJldmlvdXNTaWJsaW5nLGc9ZS5uZXh0U2libGluZztnPT09YSYmKGc9YS5uZXh0U2libGluZyk7dmFyIGg9YyhhLHRoaXMsZixnKTt0aGlzLmZpcnN0Q2hpbGQ9PT1lJiYodGhpcy5maXJzdENoaWxkXz1oWzBdKSx0aGlzLmxhc3RDaGlsZD09PWUmJih0aGlzLmxhc3RDaGlsZF89aFtoLmxlbmd0aC0xXSksZS5wcmV2aW91c1NpYmxpbmdfPW51bGwsZS5uZXh0U2libGluZ189bnVsbCxlLnBhcmVudE5vZGVfPW51bGw7dmFyIGk9bShlKTtyZXR1cm4gaS5wYXJlbnROb2RlJiZyLmNhbGwoaS5wYXJlbnROb2RlLGQodGhpcyxoKSxpKSxlfSxoYXNDaGlsZE5vZGVzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLmZpcnN0Q2hpbGR9LGdldCBwYXJlbnROb2RlKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMucGFyZW50Tm9kZV8/dGhpcy5wYXJlbnROb2RlXzpuKHRoaXMuaW1wbC5wYXJlbnROb2RlKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5maXJzdENoaWxkXz90aGlzLmZpcnN0Q2hpbGRfOm4odGhpcy5pbXBsLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubGFzdENoaWxkXz90aGlzLmxhc3RDaGlsZF86bih0aGlzLmltcGwubGFzdENoaWxkKX0sZ2V0IG5leHRTaWJsaW5nKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubmV4dFNpYmxpbmdfP3RoaXMubmV4dFNpYmxpbmdfOm4odGhpcy5pbXBsLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzU2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLnByZXZpb3VzU2libGluZ18/dGhpcy5wcmV2aW91c1NpYmxpbmdfOm4odGhpcy5pbXBsLnByZXZpb3VzU2libGluZyl9LGdldCBwYXJlbnRFbGVtZW50KCl7Zm9yKHZhciBhPXRoaXMucGFyZW50Tm9kZTthJiZhLm5vZGVUeXBlIT09Zi5FTEVNRU5UX05PREU7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxnZXQgdGV4dENvbnRlbnQoKXtmb3IodmFyIGE9IiIsYj10aGlzLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpYSs9Yi50ZXh0Q29udGVudDtyZXR1cm4gYX0sc2V0IHRleHRDb250ZW50KGEpe2lmKGUodGhpcyksdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSwiIiE9PWEpe3ZhciBiPXRoaXMuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpO3RoaXMuYXBwZW5kQ2hpbGQoYil9fSxnZXQgY2hpbGROb2Rlcygpe2Zvcih2YXIgYT1uZXcgaCxiPTAsYz10aGlzLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpYVtiKytdPWM7cmV0dXJuIGEubGVuZ3RoPWIsYX0sY2xvbmVOb2RlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXJldHVybiBuKHRoaXMuaW1wbC5jbG9uZU5vZGUoYSkpO3ZhciBiPW4odGhpcy5pbXBsLmNsb25lTm9kZSghMSkpO2lmKGEpZm9yKHZhciBjPXRoaXMuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyliLmFwcGVuZENoaWxkKGMuY2xvbmVOb2RlKCEwKSk7cmV0dXJuIGJ9LGNvbnRhaW5zOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiExO2lmKGE9PT10aGlzKXJldHVybiEwO3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYj90aGlzLmNvbnRhaW5zKGIpOiExfSxjb21wYXJlRG9jdW1lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gdC5jYWxsKHRoaXMuaW1wbCxtKGEpKX19KSxpKGYsIm93bmVyRG9jdW1lbnQiKSxsKG8sZixkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGRlbGV0ZSBmLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yLGRlbGV0ZSBmLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLGYucHJvdG90eXBlPWsoT2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSksZi5wcm90b3R5cGUpLGEud3JhcHBlcnMuTm9kZT1mfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGMpe2Zvcih2YXIgZCxlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7ZTspe2lmKGUubWF0Y2hlcyhjKSlyZXR1cm4gZTtpZihkPWIoZSxjKSlyZXR1cm4gZDtlPWUubmV4dEVsZW1lbnRTaWJsaW5nfXJldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiLGQpe2Zvcih2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KWUubWF0Y2hlcyhiKSYmKGRbZC5sZW5ndGgrK109ZSksYyhlLGIsZCksZT1lLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gZH12YXIgZD17cXVlcnlTZWxlY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gYih0aGlzLGEpfSxxdWVyeVNlbGVjdG9yQWxsOmZ1bmN0aW9uKGEpe3JldHVybiBjKHRoaXMsYSxuZXcgTm9kZUxpc3QpfX0sZT17Z2V0RWxlbWVudHNCeVRhZ05hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbChhKX0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCIuIithKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWVOUzpmdW5jdGlvbihhLGIpe2lmKCIqIj09PWEpcmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYik7Zm9yKHZhciBjPW5ldyBOb2RlTGlzdCxkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYiksZT0wLGY9MDtlPGQubGVuZ3RoO2UrKylkW2VdLm5hbWVzcGFjZVVSST09PWEmJihjW2YrK109ZFtlXSk7cmV0dXJuIGMubGVuZ3RoPWYsY319O2EuR2V0RWxlbWVudHNCeUludGVyZmFjZT1lLGEuU2VsZWN0b3JzSW50ZXJmYWNlPWR9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLnByZXZpb3VzU2libGluZztyZXR1cm4gYX12YXIgZD1hLndyYXBwZXJzLk5vZGVMaXN0LGU9e2dldCBmaXJzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBiKHRoaXMuZmlyc3RDaGlsZCl9LGdldCBsYXN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGModGhpcy5sYXN0Q2hpbGQpfSxnZXQgY2hpbGRFbGVtZW50Q291bnQoKXtmb3IodmFyIGE9MCxiPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YjtiPWIubmV4dEVsZW1lbnRTaWJsaW5nKWErKztyZXR1cm4gYX0sZ2V0IGNoaWxkcmVuKCl7Zm9yKHZhciBhPW5ldyBkLGI9MCxjPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YztjPWMubmV4dEVsZW1lbnRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9fSxmPXtnZXQgbmV4dEVsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGIodGhpcy5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c0VsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGModGhpcy5uZXh0U2libGluZyl9fTthLkNoaWxkTm9kZUludGVyZmFjZT1mLGEuUGFyZW50Tm9kZUludGVyZmFjZT1lfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtkLmNhbGwodGhpcyxhKX12YXIgYz1hLkNoaWxkTm9kZUludGVyZmFjZSxkPWEud3JhcHBlcnMuTm9kZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPXdpbmRvdy5DaGFyYWN0ZXJEYXRhO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoYi5wcm90b3R5cGUse2dldCB0ZXh0Q29udGVudCgpe3JldHVybiB0aGlzLmRhdGF9LHNldCB0ZXh0Q29udGVudChhKXt0aGlzLmRhdGE9YX19KSxlKGIucHJvdG90eXBlLGMpLGYoZyxiLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhPWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2UuY2FsbCh0aGlzLGEpfXZhciBjPWEuQ2hpbGROb2RlSW50ZXJmYWNlLGQ9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGU9YS53cmFwcGVycy5Ob2RlLGY9YS5QYXJlbnROb2RlSW50ZXJmYWNlLGc9YS5TZWxlY3RvcnNJbnRlcmZhY2U7YS5hZGRXcmFwTm9kZUxpc3RNZXRob2Q7dmFyIGg9YS5taXhpbixpPWEucmVnaXN0ZXJXcmFwcGVyLGo9YS53cmFwcGVycyxrPW5ldyBTaWRlVGFibGUsbD13aW5kb3cuRWxlbWVudCxtPWwucHJvdG90eXBlLm1hdGNoZXN8fGwucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3Rvcnx8bC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3J8fGwucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSxoKGIucHJvdG90eXBlLHtjcmVhdGVTaGFkb3dSb290OmZ1bmN0aW9uKCl7dmFyIGI9bmV3IGouU2hhZG93Um9vdCh0aGlzKTtyZXR1cm4gay5zZXQodGhpcyxiKSxhLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcighMCksYn0sZ2V0IHNoYWRvd1Jvb3QoKXtyZXR1cm4gay5nZXQodGhpcyl8fG51bGx9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5zZXRBdHRyaWJ1dGUoYSxiKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxtYXRjaGVzOmZ1bmN0aW9uKGEpe3JldHVybiBtLmNhbGwodGhpcy5pbXBsLGEpfX0pLGwucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QmJihiLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PWIucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QpLGgoYi5wcm90b3R5cGUsYyksaChiLnByb3RvdHlwZSxkKSxoKGIucHJvdG90eXBlLGYpLGgoYi5wcm90b3R5cGUsZyksaShsLGIpLGEud3JhcHBlcnMuRWxlbWVudD1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYSl7Y2FzZSImIjpyZXR1cm4iJmFtcDsiO2Nhc2UiPCI6cmV0dXJuIiZsdDsiO2Nhc2UnIic6cmV0dXJuIiZxdW90OyJ9fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucmVwbGFjZShwLGIpfWZ1bmN0aW9uIGQoYSl7c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgTm9kZS5FTEVNRU5UX05PREU6Zm9yKHZhciBiLGQ9YS50YWdOYW1lLnRvTG93ZXJDYXNlKCksZj0iPCIrZCxnPWEuYXR0cmlidXRlcyxoPTA7Yj1nW2hdO2grKylmKz0iICIrYi5uYW1lKyc9IicrYyhiLnZhbHVlKSsnIic7cmV0dXJuIGYrPSI+IixxW2RdP2Y6ZitlKGEpKyI8LyIrZCsiPiI7Y2FzZSBOb2RlLlRFWFRfTk9ERTpyZXR1cm4gYyhhLm5vZGVWYWx1ZSk7Y2FzZSBOb2RlLkNPTU1FTlRfTk9ERTpyZXR1cm4iPCEtLSIrYyhhLm5vZGVWYWx1ZSkrIi0tPiI7ZGVmYXVsdDp0aHJvdyBjb25zb2xlLmVycm9yKGEpLG5ldyBFcnJvcigibm90IGltcGxlbWVudGVkIil9fWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPSIiLGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWIrPWQoYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIsYyl7dmFyIGQ9Y3x8ImRpdiI7YS50ZXh0Q29udGVudD0iIjt2YXIgZT1uKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KGQpKTtlLmlubmVySFRNTD1iO2Zvcih2YXIgZjtmPWUuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZChvKGYpKX1mdW5jdGlvbiBnKGEpe2ouY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGgoYil7ayhnLGIsZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdfSl9ZnVuY3Rpb24gaShiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZy5wcm90b3R5cGUsYix7dmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfXZhciBqPWEud3JhcHBlcnMuRWxlbWVudCxrPWEuZGVmaW5lR2V0dGVyLGw9YS5taXhpbixtPWEucmVnaXN0ZXJXcmFwcGVyLG49YS51bndyYXAsbz1hLndyYXAscD0vJnw8fCIvZyxxPXthcmVhOiEwLGJhc2U6ITAsYnI6ITAsY29sOiEwLGNvbW1hbmQ6ITAsZW1iZWQ6ITAsaHI6ITAsaW1nOiEwLGlucHV0OiEwLGtleWdlbjohMCxsaW5rOiEwLG1ldGE6ITAscGFyYW06ITAsc291cmNlOiEwLHRyYWNrOiEwLHdicjohMH0scj13aW5kb3cuSFRNTEVsZW1lbnQ7Zy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShqLnByb3RvdHlwZSksbChnLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBlKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2YodGhpcyxhLHRoaXMudGFnTmFtZSl9LGdldCBvdXRlckhUTUwoKXtyZXR1cm4gZCh0aGlzKX0sc2V0IG91dGVySFRNTChhKXtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXRocm93IG5ldyBFcnJvcigibm90IGltcGxlbWVudGVkIik7dGhpcy5pbXBsLm91dGVySFRNTD1hfX0pLFsiY2xpZW50SGVpZ2h0IiwiY2xpZW50TGVmdCIsImNsaWVudFRvcCIsImNsaWVudFdpZHRoIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFdpZHRoIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCIsInNjcm9sbFdpZHRoIl0uZm9yRWFjaChoKSxbImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdldENsaWVudFJlY3RzIiwic2Nyb2xsSW50b1ZpZXciXS5mb3JFYWNoKGkpLG0ocixnLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImIiKSksYS53cmFwcGVycy5IVE1MRWxlbWVudD1nLGEuZ2V0SW5uZXJIVE1MPWUsYS5zZXRJbm5lckhUTUw9Zn0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPXdpbmRvdy5IVE1MQ29udGVudEVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IHNlbGVjdCgpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgic2VsZWN0Iil9LHNldCBzZWxlY3QoYSl7dGhpcy5zZXRBdHRyaWJ1dGUoInNlbGVjdCIsYSl9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbihhLGIpe2MucHJvdG90eXBlLnNldEF0dHJpYnV0ZS5jYWxsKHRoaXMsYSxiKSwic2VsZWN0Ij09PVN0cmluZyhhKS50b0xvd2VyQ2FzZSgpJiZ0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcighMCl9fSksZiYmZShmLGIpLGEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpLHRoaXMub2xkZXJTaGFkb3dSb290Xz1udWxsfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj13aW5kb3cuSFRNTFNoYWRvd0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IG9sZGVyU2hhZG93Um9vdCgpe3JldHVybiB0aGlzLm9sZGVyU2hhZG93Um9vdF99LGludmFsaWRhdGVTaGFkb3dSZW5kZXJlcjpmdW5jdGlvbigpe2MucHJvdG90eXBlLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlci5jYWxsKHRoaXMsITApfX0pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhLmRlZmF1bHRWaWV3KXJldHVybiBhO3ZhciBiPWwuZ2V0KGEpO2lmKCFiKXtmb3IoYj1hLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yi5sYXN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5sYXN0Q2hpbGQpO2wuc2V0KGEsYil9cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGMsZD1iKGEub3duZXJEb2N1bWVudCksZT1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtjPWEuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChjKTtyZXR1cm4gZX1mdW5jdGlvbiBkKGEpe2UuY2FsbCh0aGlzLGEpfXZhciBlPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZj1hLmdldElubmVySFRNTCxnPWEubWl4aW4saD1hLnJlZ2lzdGVyV3JhcHBlcixpPWEuc2V0SW5uZXJIVE1MLGo9YS53cmFwLGs9bmV3IFNpZGVUYWJsZSxsPW5ldyBTaWRlVGFibGUsbT13aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudDtkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSxnKGQucHJvdG90eXBlLHtnZXQgY29udGVudCgpe2lmKG0pcmV0dXJuIGoodGhpcy5pbXBsLmNvbnRlbnQpO3ZhciBhPWsuZ2V0KHRoaXMpO3JldHVybiBhfHwoYT1jKHRoaXMpLGsuc2V0KHRoaXMsYSkpLGF9LGdldCBpbm5lckhUTUwoKXtyZXR1cm4gZih0aGlzLmNvbnRlbnQpfSxzZXQgaW5uZXJIVE1MKGEpe2kodGhpcy5jb250ZW50LGEpLHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9fSksbSYmaChtLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYS5sb2NhbE5hbWUpe2Nhc2UiY29udGVudCI6cmV0dXJuIG5ldyBjKGEpO2Nhc2Uic2hhZG93IjpyZXR1cm4gbmV3IGUoYSk7Y2FzZSJ0ZW1wbGF0ZSI6cmV0dXJuIG5ldyBmKGEpfWQuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsZj1hLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQ7YS5taXhpbjt2YXIgZz1hLnJlZ2lzdGVyV3JhcHBlcixoPXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZyhoLGIpLGEud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYz1hLlBhcmVudE5vZGVJbnRlcmZhY2UsZD1hLlNlbGVjdG9yc0ludGVyZmFjZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyT2JqZWN0LGc9Zihkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2UoZy5wcm90b3R5cGUsYyksZShnLnByb3RvdHlwZSxkKSxlKGcucHJvdG90eXBlLGIpO3ZhciBoPWYoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpKSxpPWYoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikpO2Eud3JhcHBlcnMuQ29tbWVudD1pLGEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudD1nLGEud3JhcHBlcnMuVGV4dD1ofSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXt2YXIgZD1pKGIuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Yy5jYWxsKHRoaXMsZCksZyhkLHRoaXMpO3ZhciBlPWIuc2hhZG93Um9vdDthLm5leHRPbGRlclNoYWRvd1RyZWVUYWJsZS5zZXQodGhpcyxlKSxqLnNldCh0aGlzLGIpfXZhciBjPWEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudCxkPWEuZWxlbWVudEZyb21Qb2ludCxlPWEuZ2V0SW5uZXJIVE1MLGY9YS5taXhpbixnPWEucmV3cmFwLGg9YS5zZXRJbm5lckhUTUwsaT1hLnVud3JhcCxqPW5ldyBTaWRlVGFibGU7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZihiLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBlKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2godGhpcyxhKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxpbnZhbGlkYXRlU2hhZG93UmVuZGVyZXI6ZnVuY3Rpb24oKXtyZXR1cm4gai5nZXQodGhpcykuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9LGVsZW1lbnRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZCh0aGlzLHRoaXMub3duZXJEb2N1bWVudCxhLGIpfSxnZXRFbGVtZW50QnlJZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKCIjIithKX19KSxhLndyYXBwZXJzLlNoYWRvd1Jvb3Q9YixhLmdldEhvc3RGb3JTaGFkb3dSb290PWZ1bmN0aW9uKGEpe3JldHVybiBqLmdldChhKX19KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2EucHJldmlvdXNTaWJsaW5nXz1hLnByZXZpb3VzU2libGluZyxhLm5leHRTaWJsaW5nXz1hLm5leHRTaWJsaW5nLGEucGFyZW50Tm9kZV89YS5wYXJlbnROb2RlfWZ1bmN0aW9uIGMoYSl7YS5maXJzdENoaWxkXz1hLmZpcnN0Q2hpbGQsYS5sYXN0Q2hpbGRfPWEubGFzdENoaWxkfWZ1bmN0aW9uIGQoYSl7RShhIGluc3RhbmNlb2YgRCk7Zm9yKHZhciBkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliKGQpO2MoYSl9ZnVuY3Rpb24gZShhKXt2YXIgYj1HKGEpO2QoYSksYi50ZXh0Q29udGVudD0iIn1mdW5jdGlvbiBmKGEsYyl7dmFyIGU9RyhhKSxmPUcoYyk7Zi5ub2RlVHlwZT09PUQuRE9DVU1FTlRfRlJBR01FTlRfTk9ERT9kKGMpOihoKGMpLGIoYykpLGEubGFzdENoaWxkXz1hLmxhc3RDaGlsZCxhLmxhc3RDaGlsZD09PWEuZmlyc3RDaGlsZCYmKGEuZmlyc3RDaGlsZF89YS5maXJzdENoaWxkKTt2YXIgZz1IKGUubGFzdENoaWxkKTtnJiYoZy5uZXh0U2libGluZ189Zy5uZXh0U2libGluZyksZS5hcHBlbmRDaGlsZChmKX1mdW5jdGlvbiBnKGEsYyl7dmFyIGQ9RyhhKSxlPUcoYyk7YihjKSxjLnByZXZpb3VzU2libGluZyYmKGMucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1jKSxjLm5leHRTaWJsaW5nJiYoYy5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPWMpLGEubGFzdENoaWxkPT09YyYmKGEubGFzdENoaWxkXz1jKSxhLmZpcnN0Q2hpbGQ9PT1jJiYoYS5maXJzdENoaWxkXz1jKSxkLnJlbW92ZUNoaWxkKGUpfWZ1bmN0aW9uIGgoYSl7dmFyIGI9RyhhKSxjPWIucGFyZW50Tm9kZTtjJiZnKEgoYyksYSl9ZnVuY3Rpb24gaShhLGIpe2soYikucHVzaChhKSxBKGEsYik7dmFyIGM9Si5nZXQoYSk7Y3x8Si5zZXQoYSxjPVtdKSxjLnB1c2goYil9ZnVuY3Rpb24gaihhKXtJLnNldChhLFtdKX1mdW5jdGlvbiBrKGEpe3JldHVybiBJLmdldChhKX1mdW5jdGlvbiBsKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYltjKytdPWQ7cmV0dXJuIGJ9ZnVuY3Rpb24gbShhLGIsYyl7Zm9yKHZhciBkPWwoYSksZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2lmKGIoZikpe2lmKGMoZik9PT0hMSlyZXR1cm59ZWxzZSBtKGYsYixjKX19ZnVuY3Rpb24gbihhLGIpe3ZhciBjPSExO3JldHVybiBtKGEsdSxmdW5jdGlvbihhKXtqKGEpO2Zvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdO3ZvaWQgMCE9PWUmJnAoZSxhKSYmKGkoZSxhKSxiW2RdPXZvaWQgMCxjPSEwKX19KSxjP2IuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDAhPT1hfSk6Yn1mdW5jdGlvbiBvKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXWluIGEpcmV0dXJuIGJbY119ZnVuY3Rpb24gcChhLGIpe3ZhciBjPWIuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKTtpZighYylyZXR1cm4hMDtpZihjPWMudHJpbSgpLCFjKXJldHVybiEwO2lmKGEubm9kZVR5cGUhPT1ELkVMRU1FTlRfTk9ERSlyZXR1cm4hMTtpZighTy50ZXN0KGMpKXJldHVybiExO2lmKCI6Ij09PWNbMF0mJiFQLnRlc3QoYykpcmV0dXJuITE7dHJ5e3JldHVybiBhLm1hdGNoZXMoYyl9Y2F0Y2goZCl7cmV0dXJuITF9fWZ1bmN0aW9uIHEoKXtGPW51bGwsUi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVuZGVyKCl9KSxSPVtdfWZ1bmN0aW9uIHIoYSl7dGhpcy5ob3N0PWEsdGhpcy5kaXJ0eT0hMSx0aGlzLmFzc29jaWF0ZU5vZGUoYSl9ZnVuY3Rpb24gcyhhKXt2YXIgYj1NLmdldChhKTtyZXR1cm4gYnx8KGI9bmV3IHIoYSksTS5zZXQoYSxiKSksYn1mdW5jdGlvbiB0KGEpe3JldHVybiJjb250ZW50Ij09PWEubG9jYWxOYW1lfWZ1bmN0aW9uIHUoYSl7cmV0dXJuImNvbnRlbnQiPT09YS5sb2NhbE5hbWV9ZnVuY3Rpb24gdihhKXtyZXR1cm4ic2hhZG93Ij09PWEubG9jYWxOYW1lfWZ1bmN0aW9uIHcoYSl7cmV0dXJuInNoYWRvdyI9PT1hLmxvY2FsTmFtZX1mdW5jdGlvbiB4KGEpe3JldHVybiEhYS5zaGFkb3dSb290fWZ1bmN0aW9uIHkoYSl7cmV0dXJuIEwuZ2V0KGEpfWZ1bmN0aW9uIHooYSl7Zm9yKHZhciBiPVtdLGM9YS5zaGFkb3dSb290O2M7Yz1MLmdldChjKSliLnB1c2goYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gQShhLGIpe0suc2V0KGEsYil9ZnVuY3Rpb24gQihhKXtuZXcgcihhKS5yZW5kZXIoKX12YXIgQz1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxEPWEud3JhcHBlcnMuTm9kZSxFPWEuYXNzZXJ0O2EubWl4aW47dmFyIEYsRz1hLnVud3JhcCxIPWEud3JhcCxJPW5ldyBTaWRlVGFibGUsSj1uZXcgU2lkZVRhYmxlLEs9bmV3IFNpZGVUYWJsZSxMPW5ldyBTaWRlVGFibGUsTT1uZXcgU2lkZVRhYmxlLE49bmV3IFNpZGVUYWJsZSxPPS9eWyouOiNbYS16QS1aX3xdLyxQPW5ldyBSZWdFeHAoIl46KCIrWyJsaW5rIiwidmlzaXRlZCIsInRhcmdldCIsImVuYWJsZWQiLCJkaXNhYmxlZCIsImNoZWNrZWQiLCJpbmRldGVybWluYXRlIiwibnRoLWNoaWxkIiwibnRoLWxhc3QtY2hpbGQiLCJudGgtb2YtdHlwZSIsIm50aC1sYXN0LW9mLXR5cGUiLCJmaXJzdC1jaGlsZCIsImxhc3QtY2hpbGQiLCJmaXJzdC1vZi10eXBlIiwibGFzdC1vZi10eXBlIiwib25seS1vZi10eXBlIl0uam9pbigifCIpKyIpIiksUT1vKHdpbmRvdyxbInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNldFRpbWVvdXQiXSksUj1bXTtyLnByb3RvdHlwZT17cmVuZGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXJ0eSl7dmFyIGE9dGhpcy5ob3N0O3RoaXMudHJlZUNvbXBvc2l0aW9uKCk7dmFyIGI9YS5zaGFkb3dSb290O2lmKGIpe3RoaXMucmVtb3ZlQWxsQ2hpbGROb2Rlcyh0aGlzLmhvc3QpO3ZhciBjPWwoYik7Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe3RoaXMucmVuZGVyTm9kZShhLGIsYywhMSl9LHRoaXMpLHRoaXMuZGlydHk9ITF9fX0saW52YWxpZGF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmRpcnR5KXtpZih0aGlzLmRpcnR5PSEwLFIucHVzaCh0aGlzKSxGKXJldHVybjtGPXdpbmRvd1tRXShxLDApfX0scmVuZGVyTm9kZTpmdW5jdGlvbihhLGIsYyxkKXtpZih4KGMpKXt0aGlzLmFwcGVuZENoaWxkKGEsYyk7dmFyIGU9cyhjKTtlLmRpcnR5PSEwLGUucmVuZGVyKCl9ZWxzZSB0KGMpP3RoaXMucmVuZGVySW5zZXJ0aW9uUG9pbnQoYSxiLGMsZCk6dihjKT90aGlzLnJlbmRlclNoYWRvd0luc2VydGlvblBvaW50KGEsYixjKTp0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsYyxkKX0scmVuZGVyQXNBbnlEb21UcmVlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuYXBwZW5kQ2hpbGQoYSxjKSx4KGMpKUIoYyk7ZWxzZXt2YXIgZT1jLGY9bChlKTtmLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5yZW5kZXJOb2RlKGUsYixhLGQpfSx0aGlzKX19LHJlbmRlckluc2VydGlvblBvaW50OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWsoYyk7ZS5sZW5ndGg/KHRoaXMucmVtb3ZlQWxsQ2hpbGROb2RlcyhjKSxlLmZvckVhY2goZnVuY3Rpb24oYyl7dChjKSYmZD90aGlzLnJlbmRlckluc2VydGlvblBvaW50KGEsYixjLGQpOnRoaXMucmVuZGVyQXNBbnlEb21UcmVlKGEsYixjLGQpfSx0aGlzKSk6dGhpcy5yZW5kZXJGYWxsYmFja0NvbnRlbnQoYSxjKSx0aGlzLnJlbW92ZShjKX0scmVuZGVyU2hhZG93SW5zZXJ0aW9uUG9pbnQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXkoYik7aWYoZCl7QShkLGMpLGMub2xkZXJTaGFkb3dSb290Xz1kLHRoaXMucmVtb3ZlKGMpO3ZhciBlPWwoZCk7ZS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3RoaXMucmVuZGVyTm9kZShhLGQsYiwhMCl9LHRoaXMpfWVsc2UgdGhpcy5yZW5kZXJGYWxsYmFja0NvbnRlbnQoYSxjKX0scmVuZGVyRmFsbGJhY2tDb250ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9bChiKTtjLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5hcHBlbmRDaGlsZChhLGIpfSx0aGlzKX0sdHJlZUNvbXBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5ob3N0LGI9YS5zaGFkb3dSb290LGM9W10sZD1sKGEpO2QuZm9yRWFjaChmdW5jdGlvbihhKXtpZih0KGEpKXt2YXIgYj1rKGEpO2ImJmIubGVuZ3RofHwoYj1sKGEpKSxjLnB1c2guYXBwbHkoYyxiKX1lbHNlIGMucHVzaChhKX0pO2Zvcih2YXIgZSxmO2I7KXtpZihlPXZvaWQgMCxtKGIsdyxmdW5jdGlvbihhKXtyZXR1cm4gZT1hLCExfSksZj1lLGM9bihiLGMpLGYpe3ZhciBnPXkoYik7aWYoZyl7Yj1nLEEoYixmKTtjb250aW51ZX1icmVha31icmVha319LGFwcGVuZENoaWxkOmZ1bmN0aW9uKGEsYil7ZihhLGIpLHRoaXMuYXNzb2NpYXRlTm9kZShiKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2goYSksdGhpcy5hc3NvY2lhdGVOb2RlKGEpfSxyZW1vdmVBbGxDaGlsZE5vZGVzOmZ1bmN0aW9uKGEpe2UoYSl9LGFzc29jaWF0ZU5vZGU6ZnVuY3Rpb24oYSl7Ti5zZXQoYSx0aGlzKX19LEQucHJvdG90eXBlLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcj1mdW5jdGlvbihhKXt2YXIgYj1OLmdldCh0aGlzKTtpZighYilyZXR1cm4hMTt2YXIgYztyZXR1cm4oYXx8dGhpcy5zaGFkb3dSb290fHwoYz10aGlzLnBhcmVudE5vZGUpJiYoYy5zaGFkb3dSb290fHxjIGluc3RhbmNlb2YgU2hhZG93Um9vdCkpJiZiLmludmFsaWRhdGUoKSwhMH0sQy5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1mdW5jdGlvbigpe3JldHVybiBxKCksayh0aGlzKX0sYS5ldmVudFBhcmVudHNUYWJsZT1KLGEuZ2V0UmVuZGVyZXJGb3JIb3N0PXMsYS5nZXRTaGFkb3dUcmVlcz16LGEubmV4dE9sZGVyU2hhZG93VHJlZVRhYmxlPUwsYS5yZW5kZXJBbGxQZW5kaW5nPXEsYS5pbnNlcnRpb25QYXJlbnRUYWJsZT1LLGEudmlzdWFsPXtyZW1vdmVBbGxDaGlsZE5vZGVzOmUsYXBwZW5kQ2hpbGQ6ZixyZW1vdmVDaGlsZDpnfX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ai5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1kb2N1bWVudFthXTtiLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiB0KGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7YS5zaGFkb3dSb290JiZiLmFkb3B0Tm9kZShhLnNoYWRvd1Jvb3QpLGEgaW5zdGFuY2VvZiBtJiZlKGEsYik7Zm9yKHZhciBjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZylkKGMsYil9ZnVuY3Rpb24gZShiLGMpe3ZhciBkPWEubmV4dE9sZGVyU2hhZG93VHJlZVRhYmxlLmdldChiKTtkJiZjLmFkb3B0Tm9kZShkKX1mdW5jdGlvbiBmKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGcoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiB0KGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBoKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19dmFyIGk9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGo9YS53cmFwcGVycy5Ob2RlLGs9YS5QYXJlbnROb2RlSW50ZXJmYWNlLGw9YS5TZWxlY3RvcnNJbnRlcmZhY2UsbT1hLndyYXBwZXJzLlNoYWRvd1Jvb3Qsbj1hLmRlZmluZVdyYXBHZXR0ZXIsbz1hLmVsZW1lbnRGcm9tUG9pbnQscD1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLHE9YS5taXhpbixyPWEucmVnaXN0ZXJXcmFwcGVyLHM9YS51bndyYXAsdD1hLndyYXAsdT1hLndyYXBFdmVudFRhcmdldE1ldGhvZHM7YS53cmFwTm9kZUxpc3Q7dmFyIHY9bmV3IFNpZGVUYWJsZTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGoucHJvdG90eXBlKSxuKGIsImRvY3VtZW50RWxlbWVudCIpLG4oYiwiYm9keSIpLG4oYiwiaGVhZCIpLFsiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlVGV4dE5vZGUiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIl0uZm9yRWFjaChjKTt2YXIgdz1kb2N1bWVudC5hZG9wdE5vZGUseD1kb2N1bWVudC53cml0ZTtxKGIucHJvdG90eXBlLHthZG9wdE5vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpLHcuY2FsbCh0aGlzLmltcGwscyhhKSksZChhLHRoaXMpLGF9LGVsZW1lbnRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbyh0aGlzLHRoaXMsYSxiKX0sd3JpdGU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucXVlcnlTZWxlY3RvckFsbCgiKiIpLGM9YltiLmxlbmd0aC0xXTtjLm5leHRTaWJsaW5nOyljPWMubmV4dFNpYmxpbmc7dmFyIGQ9Yy5wYXJlbnROb2RlO2QubGFzdENoaWxkXz12b2lkIDAsYy5uZXh0U2libGluZ189dm9pZCAwLHguY2FsbCh0aGlzLmltcGwsYSl9fSkscChbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudF0sWyJhcHBlbmRDaGlsZCIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyIsImluc2VydEJlZm9yZSIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlQ2hpbGQiLCJyZXBsYWNlQ2hpbGQiXSkscChbd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50XSxbImFkb3B0Tm9kZSIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlVGV4dE5vZGUiLCJlbGVtZW50RnJvbVBvaW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ3cml0ZSJdKSxxKGIucHJvdG90eXBlLGkpLHEoYi5wcm90b3R5cGUsaykscShiLnByb3RvdHlwZSxsKSxxKGIucHJvdG90eXBlLHtnZXQgaW1wbGVtZW50YXRpb24oKXt2YXIgYT12LmdldCh0aGlzKTtyZXR1cm4gYT9hOihhPW5ldyBmKHModGhpcykuaW1wbGVtZW50YXRpb24pLHYuc2V0KHRoaXMsYSksYSl9fSkscih3aW5kb3cuRG9jdW1lbnQsYixkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpKSx3aW5kb3cuSFRNTERvY3VtZW50JiZyKHdpbmRvdy5IVE1MRG9jdW1lbnQsYiksdShbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudF0pLGcoZiwiY3JlYXRlRG9jdW1lbnRUeXBlIiksZyhmLCJjcmVhdGVEb2N1bWVudCIpLGcoZiwiY3JlYXRlSFRNTERvY3VtZW50IiksaChmLCJoYXNGZWF0dXJlIikscih3aW5kb3cuRE9NSW1wbGVtZW50YXRpb24sZikscChbd2luZG93LkRPTUltcGxlbWVudGF0aW9uXSxbImNyZWF0ZURvY3VtZW50VHlwZSIsImNyZWF0ZURvY3VtZW50IiwiY3JlYXRlSFRNTERvY3VtZW50IiwiaGFzRmVhdHVyZSJdKSxhLndyYXBwZXJzLkRvY3VtZW50PWIsYS53cmFwcGVycy5ET01JbXBsZW1lbnRhdGlvbj1mCn0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5FdmVudFRhcmdldCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS51bndyYXBJZk5lZWRlZCxoPWEud3JhcCxpPXdpbmRvdy5XaW5kb3c7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSk7dmFyIGo9d2luZG93LmdldENvbXB1dGVkU3R5bGU7aS5wcm90b3R5cGUuZ2V0Q29tcHV0ZWRTdHlsZT1mdW5jdGlvbihhLGIpe3JldHVybiBqLmNhbGwodGhpc3x8d2luZG93LGcoYSksYil9LFsiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50Il0uZm9yRWFjaChmdW5jdGlvbihhKXtpLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3ZhciBiPWgodGhpc3x8d2luZG93KTtyZXR1cm4gYlthXS5hcHBseShiLGFyZ3VtZW50cyl9fSksZChiLnByb3RvdHlwZSx7Z2V0Q29tcHV0ZWRTdHlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBqLmNhbGwoZih0aGlzKSxnKGEpLGIpfX0pLGUoaSxiKSxhLndyYXBwZXJzLldpbmRvdz1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBjKGEpe3JldHVybiBuZXcgYihhKX1mdW5jdGlvbiBkKGEpe3JldHVybiBhLm1hcChjKX1mdW5jdGlvbiBlKGEpe3ZhciBiPXRoaXM7dGhpcy5pbXBsPW5ldyBrKGZ1bmN0aW9uKGMpe2EuY2FsbChiLGQoYyksYil9KX12YXIgZj1hLmRlZmluZUdldHRlcixnPWEuZGVmaW5lV3JhcEdldHRlcixoPWEucmVnaXN0ZXJXcmFwcGVyLGk9YS51bndyYXBJZk5lZWRlZCxqPWEud3JhcE5vZGVMaXN0O2Eud3JhcHBlcnM7dmFyIGs9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO2lmKGspe3ZhciBsPXdpbmRvdy5NdXRhdGlvblJlY29yZDtiLnByb3RvdHlwZT17Z2V0IGFkZGVkTm9kZXMoKXtyZXR1cm4gaih0aGlzLmltcGwuYWRkZWROb2Rlcyl9LGdldCByZW1vdmVkTm9kZXMoKXtyZXR1cm4gaih0aGlzLmltcGwucmVtb3ZlZE5vZGVzKX19LFsidGFyZ2V0IiwicHJldmlvdXNTaWJsaW5nIiwibmV4dFNpYmxpbmciXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2coYixhKX0pLFsidHlwZSIsImF0dHJpYnV0ZU5hbWUiLCJhdHRyaWJ1dGVOYW1lc3BhY2UiLCJvbGRWYWx1ZSJdLmZvckVhY2goZnVuY3Rpb24oYSl7ZihiLGEsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdfSl9KSxsJiZoKGwsYiksd2luZG93Lk5vZGUsZS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwub2JzZXJ2ZShpKGEpLGIpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5pbXBsLmRpc2Nvbm5lY3QoKX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLmltcGwudGFrZVJlY29yZHMoKSl9fSxhLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9ZSxhLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPWJ9fSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt2YXIgYj1jW2FdLGQ9d2luZG93W2JdO2lmKGQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSksZj1lLmNvbnN0cnVjdG9yO3dpbmRvd1tiXT1mfX1hLmlzV3JhcHBlckZvcjt2YXIgYz17YToiSFRNTEFuY2hvckVsZW1lbnQiLGFwcGxldDoiSFRNTEFwcGxldEVsZW1lbnQiLGFyZWE6IkhUTUxBcmVhRWxlbWVudCIsYXVkaW86IkhUTUxBdWRpb0VsZW1lbnQiLGJyOiJIVE1MQlJFbGVtZW50IixiYXNlOiJIVE1MQmFzZUVsZW1lbnQiLGJvZHk6IkhUTUxCb2R5RWxlbWVudCIsYnV0dG9uOiJIVE1MQnV0dG9uRWxlbWVudCIsY2FudmFzOiJIVE1MQ2FudmFzRWxlbWVudCIsZGw6IkhUTUxETGlzdEVsZW1lbnQiLGRhdGFsaXN0OiJIVE1MRGF0YUxpc3RFbGVtZW50IixkaXI6IkhUTUxEaXJlY3RvcnlFbGVtZW50IixkaXY6IkhUTUxEaXZFbGVtZW50IixlbWJlZDoiSFRNTEVtYmVkRWxlbWVudCIsZmllbGRzZXQ6IkhUTUxGaWVsZFNldEVsZW1lbnQiLGZvbnQ6IkhUTUxGb250RWxlbWVudCIsZm9ybToiSFRNTEZvcm1FbGVtZW50IixmcmFtZToiSFRNTEZyYW1lRWxlbWVudCIsZnJhbWVzZXQ6IkhUTUxGcmFtZVNldEVsZW1lbnQiLGhyOiJIVE1MSFJFbGVtZW50IixoZWFkOiJIVE1MSGVhZEVsZW1lbnQiLGgxOiJIVE1MSGVhZGluZ0VsZW1lbnQiLGh0bWw6IkhUTUxIdG1sRWxlbWVudCIsaWZyYW1lOiJIVE1MSUZyYW1lRWxlbWVudCIsaW5wdXQ6IkhUTUxJbnB1dEVsZW1lbnQiLGxpOiJIVE1MTElFbGVtZW50IixsYWJlbDoiSFRNTExhYmVsRWxlbWVudCIsbGVnZW5kOiJIVE1MTGVnZW5kRWxlbWVudCIsbGluazoiSFRNTExpbmtFbGVtZW50IixtYXA6IkhUTUxNYXBFbGVtZW50IixtZW51OiJIVE1MTWVudUVsZW1lbnQiLG1lbnVpdGVtOiJIVE1MTWVudUl0ZW1FbGVtZW50IixtZXRhOiJIVE1MTWV0YUVsZW1lbnQiLG1ldGVyOiJIVE1MTWV0ZXJFbGVtZW50IixkZWw6IkhUTUxNb2RFbGVtZW50IixvbDoiSFRNTE9MaXN0RWxlbWVudCIsb2JqZWN0OiJIVE1MT2JqZWN0RWxlbWVudCIsb3B0Z3JvdXA6IkhUTUxPcHRHcm91cEVsZW1lbnQiLG9wdGlvbjoiSFRNTE9wdGlvbkVsZW1lbnQiLG91dHB1dDoiSFRNTE91dHB1dEVsZW1lbnQiLHA6IkhUTUxQYXJhZ3JhcGhFbGVtZW50IixwYXJhbToiSFRNTFBhcmFtRWxlbWVudCIscHJlOiJIVE1MUHJlRWxlbWVudCIscHJvZ3Jlc3M6IkhUTUxQcm9ncmVzc0VsZW1lbnQiLHE6IkhUTUxRdW90ZUVsZW1lbnQiLHNjcmlwdDoiSFRNTFNjcmlwdEVsZW1lbnQiLHNlbGVjdDoiSFRNTFNlbGVjdEVsZW1lbnQiLHNvdXJjZToiSFRNTFNvdXJjZUVsZW1lbnQiLHNwYW46IkhUTUxTcGFuRWxlbWVudCIsc3R5bGU6IkhUTUxTdHlsZUVsZW1lbnQiLGNhcHRpb246IkhUTUxUYWJsZUNhcHRpb25FbGVtZW50Iixjb2w6IkhUTUxUYWJsZUNvbEVsZW1lbnQiLHRhYmxlOiJIVE1MVGFibGVFbGVtZW50Iix0cjoiSFRNTFRhYmxlUm93RWxlbWVudCIsdGhlYWQ6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0Ym9keToiSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQiLHRleHRhcmVhOiJIVE1MVGV4dEFyZWFFbGVtZW50Iix0aXRsZToiSFRNTFRpdGxlRWxlbWVudCIsdWw6IkhUTUxVTGlzdEVsZW1lbnQiLHZpZGVvOiJIVE1MVmlkZW9FbGVtZW50In07T2JqZWN0LmtleXMoYykuZm9yRWFjaChiKSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhLndyYXBwZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3dpbmRvd1tiXT1hLndyYXBwZXJzW2JdfSksYS5rbm93bkVsZW1lbnRzPWN9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKCl7d2luZG93LndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW1wbD9hOlNoYWRvd0RPTVBvbHlmaWxsLndyYXAoYSl9LHdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW1wbD9TaGFkb3dET01Qb2x5ZmlsbC51bndyYXAoYSk6YX07dmFyIGE9d2luZG93LmdldENvbXB1dGVkU3R5bGU7d2luZG93LmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKHdpbmRvdyx3cmFwKGIpLGMpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhIVE1MRWxlbWVudC5wcm90b3R5cGUse3dlYmtpdFNoYWRvd1Jvb3Q6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoYWRvd1Jvb3R9fX0pLEhUTUxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PUhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz0iIjtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2MrPWEudGV4dENvbnRlbnQrIlxuXG4ifSksYnx8KGM9Yy5yZXBsYWNlKG0sIiIpKSxjfWZ1bmN0aW9uIGMoYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtiLnRleHRDb250ZW50PWEsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChiKTt2YXIgYz1iLnNoZWV0LmNzc1J1bGVzO3JldHVybiBiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksY31mdW5jdGlvbiBkKGEpe2Zvcih2YXIgYj0wLGM9W107YjxhLmxlbmd0aDtiKyspYy5wdXNoKGFbYl0uY3NzVGV4dCk7cmV0dXJuIGMuam9pbigiXG5cbiIpfWZ1bmN0aW9uIGUoYSl7YSYmZigpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpKX1mdW5jdGlvbiBmKCl7cmV0dXJuIGd8fChnPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksZy5zZXRBdHRyaWJ1dGUoIlNoYWRvd0NTU1NoaW0iLCIiKSksZ312YXIgZyxoPXtzdHJpY3RTdHlsaW5nOiExLHJlZ2lzdHJ5Ont9LHNoaW1TdHlsaW5nOmZ1bmN0aW9uKGEsYixjKXtpZihhKXt2YXIgZD10aGlzLnJlZ2lzdGVyRGVmaW5pdGlvbihhLGIsYyk7dGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYSxiKSx0aGlzLnNoaW1Qb2x5ZmlsbERpcmVjdGl2ZXMoZC5yb290U3R5bGVzLGIpLHRoaXMuYXBwbHlTaGltbWluZyhkLnNjb3BlU3R5bGVzLGIpfX0sc2hpbVNoYWRvd0RPTVN0eWxpbmc6ZnVuY3Rpb24oYSxiKXt0aGlzLnNoaW1Qb2x5ZmlsbERpcmVjdGl2ZXMoYSxiKSx0aGlzLmFwcGx5U2hpbW1pbmcoYSxiKX0scmVnaXN0ZXJEZWZpbml0aW9uOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlZ2lzdHJ5W2JdPXtyb290OmEsbmFtZTpiLGV4dGVuZHNOYW1lOmN9LGU9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO2U9ZT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLDApOltdLGQucm9vdFN0eWxlcz1lLGQuc2NvcGVTdHlsZXM9ZC5yb290U3R5bGVzO3ZhciBmPXRoaXMucmVnaXN0cnlbZC5leHRlbmRzTmFtZV07cmV0dXJuIGYmJihkLnNjb3BlU3R5bGVzPWQuc2NvcGVTdHlsZXMuY29uY2F0KGYuc2NvcGVTdHlsZXMpKSxkfSxhcHBseVNjb3BlVG9Db250ZW50OmZ1bmN0aW9uKGEsYil7YSYmKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYS5xdWVyeVNlbGVjdG9yQWxsKCIqIiksZnVuY3Rpb24oYSl7YS5zZXRBdHRyaWJ1dGUoYiwiIil9KSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKSxmdW5jdGlvbihhKXt0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYS5jb250ZW50LGIpfSx0aGlzKSl9LHNoaW1Qb2x5ZmlsbERpcmVjdGl2ZXM6ZnVuY3Rpb24oYSxiKXthJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD10aGlzLmNvbnZlcnRQb2x5ZmlsbERpcmVjdGl2ZXMoYS50ZXh0Q29udGVudCxiKX0sdGhpcyl9LGNvbnZlcnRQb2x5ZmlsbERpcmVjdGl2ZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPSIiLGY9MDtjPW4uZXhlYyhhKTspZSs9YS5zdWJzdHJpbmcoZixjLmluZGV4KSxkPWNbMV0uc2xpY2UoMCwtMikucmVwbGFjZShxLGIpLGUrPXRoaXMuc2NvcGVTZWxlY3RvcihkLGIpKyJ7IixmPW4ubGFzdEluZGV4O3JldHVybiBlKz1hLnN1YnN0cmluZyhmLGEubGVuZ3RoKX0sYXBwbHlTaGltbWluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2hpbUF0SG9zdChhLGIpO2MrPXRoaXMuc2hpbVNjb3BpbmcoYSxiKSxlKGMpfSxzaGltQXRIb3N0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/dGhpcy5jb252ZXJ0QXRIb3N0U3R5bGVzKGEsYik6dm9pZCAwfSxjb252ZXJ0QXRIb3N0U3R5bGVzOmZ1bmN0aW9uKGEsZSl7Zm9yKHZhciBmLGc9YihhKSxoPSIiLGo9MDtmPWkuZXhlYyhnKTspaCs9Zy5zdWJzdHJpbmcoaixmLmluZGV4KSxoKz10aGlzLnNjb3BlSG9zdENzcyhmWzFdLGUpLGo9aS5sYXN0SW5kZXg7aCs9Zy5zdWJzdHJpbmcoaixnLmxlbmd0aCk7dmFyIGs9bmV3IFJlZ0V4cCgiXiIrZStwLCJtIiksZz1kKHRoaXMuZmluZEF0SG9zdFJ1bGVzKGMoaCksaykpO3JldHVybiBnfSxzY29wZUhvc3RDc3M6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0iIjtjPWouZXhlYyhhKTspZCs9dGhpcy5zY29wZUhvc3RTZWxlY3RvcihjWzFdLGIpKyIgIitjWzJdKyJcbgkiO3JldHVybiBkfSxzY29wZUhvc3RTZWxlY3RvcjpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9YS5zcGxpdCgiLCIpLGU9Iltpcz0iK2IrIl0iO3JldHVybiBkLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnRyaW0oKSxhLm1hdGNoKGspP2E9YS5yZXBsYWNlKGssYisiJDEkMywgIitlKyIkMSQzIik6YS5tYXRjaChsKSYmKGE9YithKyIsICIrZSthKSxjLnB1c2goYSl9LHRoaXMpLGMuam9pbigiLCAiKX0sZmluZEF0SG9zdFJ1bGVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChhLHRoaXMuaXNIb3N0UnVsZS5iaW5kKHRoaXMsYikpfSxpc0hvc3RSdWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuc2VsZWN0b3JUZXh0JiZiLnNlbGVjdG9yVGV4dC5tYXRjaChhKXx8Yi5jc3NSdWxlcyYmdGhpcy5maW5kQXRIb3N0UnVsZXMoYi5jc3NSdWxlcyxhKS5sZW5ndGh8fGIudHlwZT09Q1NTUnVsZS5XRUJLSVRfS0VZRlJBTUVTX1JVTEV9LHNoaW1TY29waW5nOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/dGhpcy5jb252ZXJ0U2NvcGVkU3R5bGVzKGEsYik6dm9pZCAwfSxjb252ZXJ0U2NvcGVkU3R5bGVzOmZ1bmN0aW9uKGEsZCl7QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSk7dmFyIGU9YihhKS5yZXBsYWNlKGksIiIpO2U9dGhpcy5jb252ZXJ0UHNldWRvcyhlKTt2YXIgZj1jKGUpO3JldHVybiBlPXRoaXMuc2NvcGVSdWxlcyhmLGQpfSxjb252ZXJ0UHNldWRvczpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKG8sIiBbcHNldWRvPSQxXSIpfSxzY29wZVJ1bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9IiI7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXthLnNlbGVjdG9yVGV4dCYmYS5zdHlsZSYmYS5zdHlsZS5jc3NUZXh0PyhjKz10aGlzLnNjb3BlU2VsZWN0b3IoYS5zZWxlY3RvclRleHQsYix0aGlzLnN0cmljdFN0eWxpbmcpKyIge1xuCSIsYys9dGhpcy5wcm9wZXJ0aWVzRnJvbVJ1bGUoYSkrIlxufVxuXG4iKTphLm1lZGlhPyhjKz0iQG1lZGlhICIrYS5tZWRpYS5tZWRpYVRleHQrIiB7XG4iLGMrPXRoaXMuc2NvcGVSdWxlcyhhLmNzc1J1bGVzLGIpLGMrPSJcbn1cblxuIik6YS5jc3NUZXh0JiYoYys9YS5jc3NUZXh0KyJcblxuIil9LHRoaXMpLGN9LHNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9YS5zcGxpdCgiLCIpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnRyaW0oKSx0aGlzLnNlbGVjdG9yTmVlZHNTY29waW5nKGEsYikmJihhPWM/dGhpcy5hcHBseVN0cmljdFNlbGVjdG9yU2NvcGUoYSxiKTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGIpKSxkLnB1c2goYSl9LHRoaXMpLGQuam9pbigiLCAiKX0sc2VsZWN0b3JOZWVkc1Njb3Bpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz0iKCIrYisifFxcW2lzPSIrYisiXFxdKSIsZD1uZXcgUmVnRXhwKCJeIitjK3AsIm0iKTtyZXR1cm4hYS5tYXRjaChkKX0sYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIrIiAiK2ErIiwgIisiW2lzPSIrYisiXSAiK2F9LGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3ZhciBjPVsiICIsIj4iLCIrIiwifiJdLGQ9YSxlPSJbIitiKyJdIjtyZXR1cm4gYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWQuc3BsaXQoYSk7ZD1iLm1hcChmdW5jdGlvbihhKXt2YXIgYj1hLnRyaW0oKTtyZXR1cm4gYiYmYy5pbmRleE9mKGIpPDAmJmIuaW5kZXhPZihlKTwwJiYoYT1iLnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sIiQxIitlKyIkMiQzIikpLGF9KS5qb2luKGEpfSksZH0scHJvcGVydGllc0Zyb21SdWxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc3R5bGUuY3NzVGV4dDtyZXR1cm4gYS5zdHlsZS5jb250ZW50JiYhYS5zdHlsZS5jb250ZW50Lm1hdGNoKC9bJyJdKy8pJiYoYj0iY29udGVudDogJyIrYS5zdHlsZS5jb250ZW50KyInO1xuIithLnN0eWxlLmNzc1RleHQucmVwbGFjZSgvY29udGVudDpbXjtdKjsvZywiIikpLGJ9fSxpPS9AaG9zdFtee10qeygoW159XSo/e1tee10qP31bXHNcU10qPykrKX0vZ2ltLGo9LyhbXntdKikoe1tcc1xTXSo/fSkvZ2ltLGs9LyguKikoKD86XCopfCg/Olw6c2NvcGUpKSguKikvLGw9L15bLlxbOl0vLG09L1wvXCpbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLy9naW0sbj0vXC9cKlxzKkBwb2x5ZmlsbCAoW14qXSpcKisoW14vKl1bXipdKlwqKykqXC8pKFtee10qPyl7L2dpbSxvPS86Oih4LVteXHN7LChdKikvZ2ltLHA9IihbPlxcc34rWy4sezpdW1xcc1xcU10qKT8kIixxPS9AaG9zdC9naW07aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXtlKCJzdHlsZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxuIik7dmFyIHI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO3IuaW5zZXJ0QmVmb3JlKGYoKSxyLmNoaWxkTm9kZXNbMF0pfWEuU2hhZG93Q1NTPWh9KHdpbmRvdy5QbGF0Zm9ybSl9ZWxzZXt2YXIgU2lkZVRhYmxlOyJ1bmRlZmluZWQiIT10eXBlb2YgV2Vha01hcCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94LyIpPDA/U2lkZVRhYmxlPVdlYWtNYXA6ZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1PYmplY3QuaGFzT3duUHJvcGVydHksYz0obmV3IERhdGUpLmdldFRpbWUoKSUxZTk7U2lkZVRhYmxlPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYysrICsiX18iKX0sU2lkZVRhYmxlLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7YShiLHRoaXMubmFtZSx7dmFsdWU6Yyx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGIuY2FsbChhLHRoaXMubmFtZSk/YVt0aGlzLm5hbWVdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX19KCksZnVuY3Rpb24oKXt3aW5kb3cudGVtcGxhdGVDb250ZW50PXdpbmRvdy50ZW1wbGF0ZUNvbnRlbnR8fGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnR9LHdpbmRvdy53cmFwPXdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEhUTUxFbGVtZW50LnByb3RvdHlwZSx7c2hhZG93Um9vdDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Via2l0U2hhZG93Um9vdH19LGNyZWF0ZVNoYWRvd1Jvb3Q6e3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Via2l0Q3JlYXRlU2hhZG93Um9vdCgpfX19KSx3aW5kb3cudGVtcGxhdGVDb250ZW50PWZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYSksIWEuY29udGVudCYmIWEuX2NvbnRlbnQpe2Zvcih2YXIgYj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5maXJzdENoaWxkOyliLmFwcGVuZENoaWxkKGEuZmlyc3RDaGlsZCk7YS5fY29udGVudD1ifXJldHVybiBhLmNvbnRlbnR8fGEuX2NvbnRlbnR9fSgpfWlmKGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zm9yKHZhciBiPWF8fHt9LGQ9MTtkPGFyZ3VtZW50cy5sZW5ndGg7ZCsrKXt2YXIgZT1hcmd1bWVudHNbZF07dHJ5e2Zvcih2YXIgZiBpbiBlKWMoZixlLGIpfWNhdGNoKGcpe319cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGU9ZChiLGEpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGEsZSl9ZnVuY3Rpb24gZChhLGIpe2lmKGEpe3ZhciBjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKTtyZXR1cm4gY3x8ZChPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYil9fUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7cmV0dXJuIGQucHVzaC5hcHBseShkLGFyZ3VtZW50cyksYi5hcHBseShhLGQpfX0pLGEubWl4aW49Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIsYyl7dmFyIGQ9InN0cmluZyI9PXR5cGVvZiBhP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk6YS5jbG9uZU5vZGUoITApO2lmKGQuaW5uZXJIVE1MPWIsYylmb3IodmFyIGUgaW4gYylkLnNldEF0dHJpYnV0ZShlLGNbZV0pO3JldHVybiBkfXZhciBjPURPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkLGQ9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWMuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylkLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGIpezE9PWFyZ3VtZW50cy5sZW5ndGgmJihiPSF0aGlzLmNvbnRhaW5zKGEpKSxiP3RoaXMuYWRkKGEpOnRoaXMucmVtb3ZlKGEpfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnN3aXRjaD1mdW5jdGlvbihhLGIpe2EmJnRoaXMucmVtb3ZlKGEpLGImJnRoaXMuYWRkKGIpfTt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzKX0sZj13aW5kb3cuTmFtZWROb2RlTWFwfHx3aW5kb3cuTW96TmFtZWRBdHRyTWFwfHx7fTtOb2RlTGlzdC5wcm90b3R5cGUuYXJyYXk9ZSxmLnByb3RvdHlwZS5hcnJheT1lLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5hcnJheT1lO3ZhciBnPWZ1bmN0aW9uKGEsYil7ZS5jYWxsKHRoaXMpLmZvckVhY2goYSxiKX07aWYoTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2g9ZyxmLnByb3RvdHlwZS5mb3JFYWNoPWcsSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmZvckVhY2g9Zywhd2luZG93LnBlcmZvcm1hbmNlKXt2YXIgaD1EYXRlLm5vdygpO3dpbmRvdy5wZXJmb3JtYW5jZT17bm93OmZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCktaH19fXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7dmFyIGE9d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTtyZXR1cm4gYT9mdW5jdGlvbihiKXtyZXR1cm4gYShmdW5jdGlvbigpe2IocGVyZm9ybWFuY2Uubm93KCkpfSl9OmZ1bmN0aW9uKGEpe3JldHVybiB3aW5kb3cuc2V0VGltZW91dChhLDFlMy82MCl9fSgpKSx3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGEpe2NsZWFyVGltZW91dChhKX19KCkpLGEuY3JlYXRlRE9NPWJ9KHdpbmRvdy5QbGF0Zm9ybSksd2luZG93LnRlbXBsYXRlQ29udGVudD13aW5kb3cudGVtcGxhdGVDb250ZW50fHxmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50fSxmdW5jdGlvbihhKXthPWF8fCh3aW5kb3cuSW5zcGVjdG9yPXt9KTt2YXIgYjt3aW5kb3cuc2luc3BlY3Q9ZnVuY3Rpb24oYSxkKXtifHwoYj13aW5kb3cub3BlbigiIiwiU2hhZG93RE9NIEluc3BlY3RvciIsbnVsbCwhMCksYi5kb2N1bWVudC53cml0ZShjKSxiLmFwaT17c2hhZG93aXplOnNoYWRvd2l6ZX0pLGYoYXx8d3JhcChkb2N1bWVudC5ib2R5KSxkKX07dmFyIGM9WyI8IURPQ1RZUEUgaHRtbD4iLCI8aHRtbD4iLCIgIDxoZWFkPiIsIiAgICA8dGl0bGU+U2hhZG93RE9NIEluc3BlY3RvcjwvdGl0bGU+IiwiICAgIDxzdHlsZT4iLCIgICAgICBib2R5IHsiLCIgICAgICB9IiwiICAgICAgcHJlIHsiLCcgICAgICAgIGZvbnQ6IDlwdCAiQ291cmllciBOZXciLCBtb25vc3BhY2U7JywiICAgICAgICBsaW5lLWhlaWdodDogMS41ZW07IiwiICAgICAgfSIsIiAgICAgIHRhZyB7IiwiICAgICAgICBjb2xvcjogcHVycGxlOyIsIiAgICAgIH0iLCIgICAgICB1bCB7IiwiICAgICAgICAgbWFyZ2luOiAwOyIsIiAgICAgICAgIHBhZGRpbmc6IDA7IiwiICAgICAgICAgbGlzdC1zdHlsZTogbm9uZTsiLCIgICAgICB9IiwiICAgICAgbGkgeyIsIiAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsiLCIgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFmMWYxOyIsIiAgICAgICAgIHBhZGRpbmc6IDRweCA2cHg7IiwiICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OyIsIiAgICAgICAgIG1hcmdpbi1yaWdodDogNHB4OyIsIiAgICAgIH0iLCIgICAgPC9zdHlsZT4iLCIgIDwvaGVhZD4iLCIgIDxib2R5PiIsJyAgICA8dWwgaWQ9ImNydW1icyI+JywiICAgIDwvdWw+IiwnICAgIDxkaXYgaWQ9InRyZWUiPjwvZGl2PicsIiAgPC9ib2R5PiIsIjwvaHRtbD4iXS5qb2luKCJcbiIpLGQ9W10sZT1mdW5jdGlvbigpe3ZhciBhPWIuZG9jdW1lbnQsYz1hLnF1ZXJ5U2VsZWN0b3IoIiNjcnVtYnMiKTtjLnRleHRDb250ZW50PSIiO2Zvcih2YXIgZSxnPTA7ZT1kW2ddO2crKyl7dmFyIGg9YS5jcmVhdGVFbGVtZW50KCJhIik7aC5ocmVmPSIjIixoLnRleHRDb250ZW50PWUubG9jYWxOYW1lLGguaWR4PWcsaC5vbmNsaWNrPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYjtkLmxlbmd0aD50aGlzLmlkeDspYj1kLnBvcCgpO2YoYi5zaGFkb3d8fGIsYiksYS5wcmV2ZW50RGVmYXVsdCgpfSxjLmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudCgibGkiKSkuYXBwZW5kQ2hpbGQoaCl9fSxmPWZ1bmN0aW9uKGEsYyl7dmFyIGY9Yi5kb2N1bWVudDtrPVtdO3ZhciBnPWN8fGE7ZC5wdXNoKGcpLGUoKSxmLmJvZHkucXVlcnlTZWxlY3RvcigiI3RyZWUiKS5pbm5lckhUTUw9IjxwcmU+IitqKGEsYS5jaGlsZE5vZGVzKSsiPC9wcmU+In0sZz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGg9e1NUWUxFOjEsU0NSSVBUOjEsIiNjb21tZW50IjoxLFRFTVBMQVRFOjF9LGk9ZnVuY3Rpb24oYSl7cmV0dXJuIGhbYS5ub2RlTmFtZV19LGo9ZnVuY3Rpb24oYSxiLGMpe2lmKGkoYSkpcmV0dXJuIiI7dmFyIGQ9Y3x8IiI7aWYoYS5sb2NhbE5hbWV8fDExPT1hLm5vZGVUeXBlKXt2YXIgZT1hLmxvY2FsTmFtZXx8InNoYWRvdy1yb290IixmPWQrbChhKTsiY29udGVudCI9PWUmJihiPWEuZ2V0RGlzdHJpYnV0ZWROb2RlcygpKSxmKz0iPGJyLz4iO3ZhciBoPWQrIiZuYnNwOyZuYnNwOyI7ZyhiLGZ1bmN0aW9uKGEpe2YrPWooYSxhLmNoaWxkTm9kZXMsaCl9KSxmKz1kLHticjoxfVtlXXx8KGYrPSI8dGFnPiZsdDsvIitlKyImZ3Q7PC90YWc+IixmKz0iPGJyLz4iKX1lbHNle3ZhciBrPWEudGV4dENvbnRlbnQudHJpbSgpO2Y9az9kKyciJytrKyciJysiPGJyLz4iOiIifXJldHVybiBmfSxrPVtdLGw9ZnVuY3Rpb24oYSl7dmFyIGI9Ijx0YWc+Jmx0OyIsYz1hLmxvY2FsTmFtZXx8InNoYWRvdy1yb290IjtyZXR1cm4gYS53ZWJraXRTaGFkb3dSb290fHxhLnNoYWRvd1Jvb3Q/KGIrPScgPGJ1dHRvbiBpZHg9Iicray5sZW5ndGgrJyIgb25jbGljaz0iYXBpLnNoYWRvd2l6ZS5jYWxsKHRoaXMpIj4nK2MrIjwvYnV0dG9uPiIsay5wdXNoKGEpKTpiKz1jfHwic2hhZG93LXJvb3QiLGEuYXR0cmlidXRlcyYmZyhhLmF0dHJpYnV0ZXMsZnVuY3Rpb24oYSl7Yis9IiAiK2EubmFtZSsoYS52YWx1ZT8nPSInK2EudmFsdWUrJyInOiIiKX0pLGIrPSImZ3Q7PC90YWc+In07c2hhZG93aXplPWZ1bmN0aW9uKCl7dmFyIGE9TnVtYmVyKHRoaXMuYXR0cmlidXRlcy5pZHgudmFsdWUpLGI9a1thXTtiP2YoYi53ZWJraXRTaGFkb3dSb290fHxiLnNoYWRvd1Jvb3QsYik6KGNvbnNvbGUubG9nKCJiYWQgc2hhZG93aXplIG5vZGUiKSxjb25zb2xlLmRpcih0aGlzKSl9LGEub3V0cHV0PWp9KHdpbmRvdy5JbnNwZWN0b3IpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKCl7ZnVuY3Rpb24gYShhKXsic3BsaWNlIj09PWFbMF0udHlwZSYmInNwbGljZSI9PT1hWzFdLnR5cGUmJihiPSEwKX1pZigiZnVuY3Rpb24iIT10eXBlb2YgT2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBBcnJheS5vYnNlcnZlKXJldHVybiExO3ZhciBiPSExLGM9WzBdO3JldHVybiBBcnJheS5vYnNlcnZlKGMsYSksY1sxXT0xLGMubGVuZ3RoPTAsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGJ9ZnVuY3Rpb24gYyhhKXtyZXR1cm4rYT09PWE+Pj4wfWZ1bmN0aW9uIGQoYSl7cmV0dXJuK2F9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYT09PU9iamVjdChhKX1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIGE9PT1iPzAhPT1hfHwxL2E9PT0xL2I6SyhhKSYmSyhiKT8hMDphIT09YSYmYiE9PWJ9ZnVuY3Rpb24gZyhhKXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGE/ITE6KGE9YS5yZXBsYWNlKC9ccy9nLCIiKSwiIj09YT8hMDoiLiI9PWFbMF0/ITE6Uy50ZXN0KGEpKX1mdW5jdGlvbiBoKGEpe3ZhciBiPVRbYV07aWYoYilyZXR1cm4gYjtpZihnKGEpKXt2YXIgYj1uZXcgaShhKTtyZXR1cm4gVFthXT1iLGJ9fWZ1bmN0aW9uIGkoYSl7cmV0dXJuIiI9PWEudHJpbSgpP3RoaXM6YyhhKT8odGhpcy5wdXNoKFN0cmluZyhhKSksdGhpcyk6KGEuc3BsaXQoL1wuLykuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhfSkuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnB1c2goYSl9LHRoaXMpLEgmJnRoaXMubGVuZ3RoJiYodGhpcy5nZXRWYWx1ZUZyb209dGhpcy5jb21waWxlZEdldFZhbHVlRnJvbUZuKCkpLHZvaWQgMCl9ZnVuY3Rpb24gaihhKXtmb3IodmFyIGI9MDtVPmImJmEuY2hlY2soKTspYS5yZXBvcnQoKSxiKyt9ZnVuY3Rpb24gayhhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBsKGEpe3JldHVybiBrKGEuYWRkZWQpJiZrKGEucmVtb3ZlZCkmJmsoYS5jaGFuZ2VkKX1mdW5jdGlvbiBtKGEsYil7dmFyIGM9e30sZD17fSxlPXt9O2Zvcih2YXIgZiBpbiBiKXt2YXIgZz1hW2ZdOyh2b2lkIDA9PT1nfHxnIT09YltmXSkmJihmIGluIGE/ZyE9PWJbZl0mJihlW2ZdPWcpOmRbZl09dm9pZCAwKX1mb3IodmFyIGYgaW4gYSlmIGluIGJ8fChjW2ZdPWFbZl0pO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiZhLmxlbmd0aCE9PWIubGVuZ3RoJiYoZS5sZW5ndGg9YS5sZW5ndGgpLHthZGRlZDpjLHJlbW92ZWQ6ZCxjaGFuZ2VkOmV9fWZ1bmN0aW9uIG4oYSxiKXt2YXIgYz1ifHwoQXJyYXkuaXNBcnJheShhKT9bXTp7fSk7Zm9yKHZhciBkIGluIGEpY1tkXT1hW2RdO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiYoYy5sZW5ndGg9YS5sZW5ndGgpLGN9ZnVuY3Rpb24gbyhhLGIsYyxkKXt0aGlzLm9iamVjdD1hLHRoaXMuY2FsbGJhY2s9Yix0aGlzLnRhcmdldD1jLHRoaXMudG9rZW49ZCx0aGlzLnJlcG9ydGluZz0hMCxHJiYodGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2s9dGhpcy5pbnRlcm5hbENhbGxiYWNrLmJpbmQodGhpcykpLHRoaXMudmFsaWQ9ITAscCh0aGlzKSx0aGlzLmNvbm5lY3QoKSx0aGlzLnN5bmMoITApfWZ1bmN0aW9uIHAoYSl7VyYmKFYucHVzaChhKSxvLl9hbGxPYnNlcnZlcnNDb3VudCsrKX1mdW5jdGlvbiBxKGEsYixjLGQpe28uY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIHIoYSxiLGMsZCl7aWYoIUFycmF5LmlzQXJyYXkoYSkpdGhyb3cgRXJyb3IoIlByb3ZpZGVkIG9iamVjdCBpcyBub3QgYW4gQXJyYXkiKTtvLmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBzKGEpe3RoaXMuYXJyPVtdLHRoaXMuY2FsbGJhY2s9YSx0aGlzLmlzT2JzZXJ2ZWQ9ITB9ZnVuY3Rpb24gdChhLGIsYyxkLGYpe3RoaXMudmFsdWU9dm9pZCAwO3ZhciBnPWgoYik7cmV0dXJuIGc/Zy5sZW5ndGg/KGUoYSkmJih0aGlzLnBhdGg9ZyxvLmNhbGwodGhpcyxhLGMsZCxmKSksdm9pZCAwKToodGhpcy52YWx1ZT1hLHZvaWQgMCk6dm9pZCAwfWZ1bmN0aW9uIHUoYSxiKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0Lm9ic2VydmUpe3ZhciBjPU9iamVjdC5nZXROb3RpZmllcihhKTtyZXR1cm4gZnVuY3Rpb24oZCxlKXt2YXIgZj17b2JqZWN0OmEsdHlwZTpkLG5hbWU6Yn07Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihmLm9sZFZhbHVlPWUpLGMubm90aWZ5KGYpfX19ZnVuY3Rpb24gdihhLGIsYyl7Zm9yKHZhciBkPXt9LGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO19bZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZWQiIT1nLnR5cGUmJigibmV3IiE9Zy50eXBlP2cubmFtZSBpbiBkPyhkZWxldGUgZFtnLm5hbWVdLGRlbGV0ZSBjW2cubmFtZV0pOmVbZy5uYW1lXT0hMDpnLm5hbWUgaW4gZT9kZWxldGUgZVtnLm5hbWVdOmRbZy5uYW1lXT0hMCkpOihjb25zb2xlLmVycm9yKCJVbmtub3duIGNoYW5nZVJlY29yZCB0eXBlOiAiK2cudHlwZSksY29uc29sZS5lcnJvcihnKSl9Zm9yKHZhciBoIGluIGQpZFtoXT1hW2hdO2Zvcih2YXIgaCBpbiBlKWVbaF09dm9pZCAwO3ZhciBpPXt9O2Zvcih2YXIgaCBpbiBjKWlmKCEoaCBpbiBkfHxoIGluIGUpKXt2YXIgaj1hW2hdO2NbaF0hPT1qJiYoaVtoXT1qKX1yZXR1cm57YWRkZWQ6ZCxyZW1vdmVkOmUsY2hhbmdlZDppfX1mdW5jdGlvbiB3KGEsYixjLGQsZSxmKXtmb3IodmFyIGc9Zi1lKzEsaD1jLWIrMSxpPW5ldyBBcnJheShnKSxqPTA7Zz5qO2orKylpW2pdPW5ldyBBcnJheShoKSxpW2pdWzBdPWo7Zm9yKHZhciBrPTA7aD5rO2srKylpWzBdW2tdPWs7Zm9yKHZhciBqPTE7Zz5qO2orKylmb3IodmFyIGs9MTtoPms7aysrKWlmKGRbZStqLTFdPT09YVtiK2stMV0paVtqXVtrXT1pW2otMV1bay0xXTtlbHNle3ZhciBsPWlbai0xXVtrXSsxLG09aVtqXVtrLTFdKzE7aVtqXVtrXT1tPmw/bDptfXJldHVybiBpfWZ1bmN0aW9uIHgoYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTEsYz1hWzBdLmxlbmd0aC0xLGQ9YVtiXVtjXSxlPVtdO2I+MHx8Yz4wOylpZigwIT1iKWlmKDAhPWMpe3ZhciBmLGc9YVtiLTFdW2MtMV0saD1hW2ItMV1bY10saT1hW2JdW2MtMV07Zj1pPmg/Zz5oP2g6ZzpnPmk/aTpnLGY9PWc/KGc9PWQ/ZS5wdXNoKGFiKTooZS5wdXNoKGJiKSxkPWcpLGItLSxjLS0pOmY9PWg/KGUucHVzaChkYiksYi0tLGQ9aCk6KGUucHVzaChjYiksYy0tLGQ9aSl9ZWxzZSBlLnB1c2goZGIpLGItLTtlbHNlIGUucHVzaChjYiksYy0tO3JldHVybiBlLnJldmVyc2UoKSxlfWZ1bmN0aW9uIHkoYSxiLGMpe2Zvcih2YXIgZD0wO2M+ZDtkKyspaWYoYVtkXSE9PWJbZF0pcmV0dXJuIGQ7cmV0dXJuIGN9ZnVuY3Rpb24geihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsZj0wO2M+ZiYmYVstLWRdPT09YlstLWVdOylmKys7cmV0dXJuIGZ9ZnVuY3Rpb24gQShhLGIsYyl7cmV0dXJue2luZGV4OmEscmVtb3ZlZDpiLGFkZGVkQ291bnQ6Y319ZnVuY3Rpb24gQihhLGIsYyxkLGUsZil7dmFyIGc9MCxoPTAsaT1NYXRoLm1pbihjLWIsZi1lKTtpZigwPT1iJiYwPT1lJiYoZz15KGEsZCxpKSksYz09YS5sZW5ndGgmJmY9PWQubGVuZ3RoJiYoaD16KGEsZCxpLWcpKSxiKz1nLGUrPWcsYy09aCxmLT1oLDA9PWMtYiYmMD09Zi1lKXJldHVybltdO2lmKGI9PWMpe2Zvcih2YXIgaj1BKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltBKGIsW10sYy1iKV07Zm9yKHZhciBrPXgodyhhLGIsYyxkLGUsZikpLGo9dm9pZCAwLGw9W10sbT1iLG49ZSxvPTA7bzxrLmxlbmd0aDtvKyspc3dpdGNoKGtbb10pe2Nhc2UgYWI6aiYmKGwucHVzaChqKSxqPXZvaWQgMCksbSsrLG4rKzticmVhaztjYXNlIGJiOmp8fChqPUEobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrLGoucmVtb3ZlZC5wdXNoKGRbbl0pLG4rKzticmVhaztjYXNlIGNiOmp8fChqPUEobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrO2JyZWFrO2Nhc2UgZGI6anx8KGo9QShtLFtdLDApKSxqLnJlbW92ZWQucHVzaChkW25dKSxuKyt9cmV0dXJuIGomJmwucHVzaChqKSxsfWZ1bmN0aW9uIEMoYSxiLGMsZCl7cmV0dXJuIGM+Ynx8YT5kPy0xOmI9PWN8fGQ9PWE/MDpjPmE/ZD5iP2ItYzpkLWM6Yj5kP2QtYTpiLWF9ZnVuY3Rpb24gRChhLGIsYyxkKXtmb3IodmFyIGU9QShiLGMsZCksZj0hMSxnPTAsaD0wO2g8YS5sZW5ndGg7aCsrKXt2YXIgaT1hW2hdO2lmKGkuaW5kZXgrPWcsIWYpe3ZhciBqPUMoZS5pbmRleCxlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGgsaS5pbmRleCxpLmluZGV4K2kuYWRkZWRDb3VudCk7aWYoaj49MCl7YS5zcGxpY2UoaCwxKSxoLS0sZy09aS5hZGRlZENvdW50LWkucmVtb3ZlZC5sZW5ndGgsZS5hZGRlZENvdW50Kz1pLmFkZGVkQ291bnQtajt2YXIgaz1lLnJlbW92ZWQubGVuZ3RoK2kucmVtb3ZlZC5sZW5ndGgtajtpZihlLmFkZGVkQ291bnR8fGspe3ZhciBjPWkucmVtb3ZlZDtpZihlLmluZGV4PGkuaW5kZXgpe3ZhciBsPWUucmVtb3ZlZC5zbGljZSgwLGkuaW5kZXgtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobCxjKSxjPWx9aWYoZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoPmkuaW5kZXgraS5hZGRlZENvdW50KXt2YXIgbT1lLnJlbW92ZWQuc2xpY2UoaS5pbmRleCtpLmFkZGVkQ291bnQtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYyxtKX1lLnJlbW92ZWQ9YyxpLmluZGV4PGUuaW5kZXgmJihlLmluZGV4PWkuaW5kZXgpfWVsc2UgZj0hMH1lbHNlIGlmKGUuaW5kZXg8aS5pbmRleCl7Zj0hMCxhLnNwbGljZShoLDAsZSksaCsrO3ZhciBuPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RoO2kuaW5kZXgrPW4sZys9bn19fWZ8fGEucHVzaChlKX1mdW5jdGlvbiBFKGEsYil7Zm9yKHZhciBlPVtdLGY9MDtmPGIubGVuZ3RoO2YrKyl7dmFyIGc9YltmXTtzd2l0Y2goZy50eXBlKXtjYXNlInNwbGljZSI6RChlLGcuaW5kZXgsZy5yZW1vdmVkLnNsaWNlKCksZy5hZGRlZENvdW50KTticmVhaztjYXNlIm5ldyI6Y2FzZSJ1cGRhdGVkIjpjYXNlImRlbGV0ZWQiOmlmKCFjKGcubmFtZSkpY29udGludWU7dmFyIGg9ZChnLm5hbWUpO2lmKDA+aCljb250aW51ZTtEKGUsaCxbZy5vbGRWYWx1ZV0sMSk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKCJVbmV4cGVjdGVkIHJlY29yZCB0eXBlOiAiK0pTT04uc3RyaW5naWZ5KGcpKX19cmV0dXJuIGV9ZnVuY3Rpb24gRihhLGIpe3ZhciBjPVtdO3JldHVybiBFKGEsYikuZm9yRWFjaChmdW5jdGlvbihiKXtyZXR1cm4gMT09Yi5hZGRlZENvdW50JiYxPT1iLnJlbW92ZWQubGVuZ3RoPyhiLnJlbW92ZWRbMF0hPT1hW2IuaW5kZXhdJiZjLnB1c2goYiksdm9pZCAwKTooYz1jLmNvbmNhdChCKGEsYi5pbmRleCxiLmluZGV4K2IuYWRkZWRDb3VudCxiLnJlbW92ZWQsMCxiLnJlbW92ZWQubGVuZ3RoKSksdm9pZCAwKX0pLGN9dmFyIEc9YigpLEg9ITE7dHJ5e3ZhciBJPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7SD1JKCl9Y2F0Y2goSil7fXZhciBLPWEuTnVtYmVyLmlzTmFOfHxmdW5jdGlvbihiKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGImJmEuaXNOYU4oYil9LEw9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LE09IlskX2EtekEtWl0iLE49IlskX2EtekEtWjAtOV0iLE89TSsiKyIrTisiKiIsUD0iKD86WzAtOV18WzEtOV0rWzAtOV0rKSIsUT0iKD86IitPKyJ8IitQKyIpIixSPSIoPzoiK1ErIikoPzpcXC4iK1ErIikqIixTPW5ldyBSZWdFeHAoIl4iK1IrIiQiKSxUPXt9O2kucHJvdG90eXBlPUwoe19fcHJvdG9fXzpbXSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmpvaW4oIi4iKX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZih2b2lkIDA9PT1hfHxudWxsPT09YSlyZXR1cm47YT1hW3RoaXNbYl1dfXJldHVybiBhfSxnZXRWYWx1ZUZyb21PYnNlcnZlZDpmdW5jdGlvbihhLGIpe2IucmVzZXQoKTtmb3IodmFyIGM9MDtjPHRoaXMubGVuZ3RoO2MrKyl7aWYodm9pZCAwPT09YXx8bnVsbD09PWEpcmV0dXJuIGIuY2xlYW51cCgpLHZvaWQgMDtiLm9ic2VydmUoYSksYT1hW3RoaXNbY11dfXJldHVybiBhfSxjb21waWxlZEdldFZhbHVlRnJvbUZuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSk/J1siJythKyciXSc6Ii4iK2F9KSxiPSIiLGQ9Im9iaiI7Yis9ImlmIChvYmogIT09IG51bGwgJiYgb2JqICE9PSB1bmRlZmluZWQiO2Zvcih2YXIgZT0wO2U8dGhpcy5sZW5ndGgtMTtlKyspdGhpc1tlXSxkKz1hW2VdLGIrPSIgJiZcbiAgICAgIitkKyIgIT09IG51bGwgJiYgIitkKyIgIT09IHVuZGVmaW5lZCI7cmV0dXJuIGIrPSIpXG4iLGQrPWFbZV0sYis9IiAgcmV0dXJuICIrZCsiO1xuZWxzZVxuICByZXR1cm4gdW5kZWZpbmVkOyIsbmV3IEZ1bmN0aW9uKCJvYmoiLGIpfSxzZXRWYWx1ZUZyb206ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aC0xO2MrKyl7aWYodm9pZCAwPT09YXx8bnVsbD09PWEpcmV0dXJuITE7YT1hW3RoaXNbY11dfXJldHVybiB2b2lkIDA9PT1hfHxudWxsPT09YT8hMTooYVt0aGlzW3RoaXMubGVuZ3RoLTFdXT1iLCEwKX19KTt2YXIgVT0xZTM7by5wcm90b3R5cGU9e3ZhbGlkOiExLGludGVybmFsQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dGhpcy52YWxpZCYmdGhpcy5yZXBvcnRpbmcmJnRoaXMuY2hlY2soYSkmJih0aGlzLnJlcG9ydCgpLHRoaXMudGVzdGluZ1Jlc3VsdHMmJih0aGlzLnRlc3RpbmdSZXN1bHRzLmFueUNoYW5nZWQ9ITApKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnZhbGlkJiYoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMub2JqZWN0LnVub2JzZXJ2ZWQmJnRoaXMub2JqZWN0LnVub2JzZXJ2ZWQoKSx0aGlzLmRpc2Nvbm5lY3QoKSx0aGlzLm9iamVjdD12b2lkIDAsdGhpcy52YWxpZD0hMSl9LGRlbGl2ZXI6ZnVuY3Rpb24oYSl7dGhpcy52YWxpZCYmKEc/KHRoaXMudGVzdGluZ1Jlc3VsdHM9YSxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHModGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spLHRoaXMudGVzdGluZ1Jlc3VsdHM9dm9pZCAwKTpqKHRoaXMpKX0scmVwb3J0OmZ1bmN0aW9uKCl7aWYodGhpcy5yZXBvcnRpbmcpe3RoaXMuc3luYyghMSksdGhpcy5yZXBvcnRBcmdzLnB1c2godGhpcy50b2tlbik7dHJ5e3RoaXMuY2FsbGJhY2suYXBwbHkodGhpcy50YXJnZXQsdGhpcy5yZXBvcnRBcmdzKX1jYXRjaChhKXtvLl9lcnJvclRocm93bkR1cmluZ0NhbGxiYWNrPSEwLGNvbnNvbGUuZXJyb3IoIkV4Y2VwdGlvbiBjYXVnaHQgZHVyaW5nIG9ic2VydmVyIGNhbGxiYWNrOiAiK2EpfXRoaXMucmVwb3J0QXJncz12b2lkIDB9fSxyZXNldDpmdW5jdGlvbigpe3RoaXMudmFsaWQmJihHJiYodGhpcy5yZXBvcnRpbmc9ITEsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKSx0aGlzLnJlcG9ydGluZz0hMCksdGhpcy5zeW5jKCEwKSl9fTt2YXIgVixXPSFHfHxhLmZvcmNlQ29sbGVjdE9ic2VydmVycztvLl9hbGxPYnNlcnZlcnNDb3VudD0wLFcmJihWPVtdKTt2YXIgWD0hMSxZPSJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZGVsaXZlckFsbENoYW5nZVJlY29yZHM7YS5QbGF0Zm9ybT1hLlBsYXRmb3JtfHx7fSxhLlBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50PWZ1bmN0aW9uKCl7aWYoIVgpe2lmKFkpcmV0dXJuIE9iamVjdC5kZWxpdmVyQWxsQ2hhbmdlUmVjb3JkcygpLHZvaWQgMDtpZihXKXtYPSEwO3ZhciBhPTAsYj17fTtkb3thKys7dmFyIGM9VjtWPVtdLGIuYW55Q2hhbmdlZD0hMTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtlLnZhbGlkJiYoRz9lLmRlbGl2ZXIoYik6ZS5jaGVjaygpJiYoYi5hbnlDaGFuZ2VkPSEwLGUucmVwb3J0KCkpLFYucHVzaChlKSl9fXdoaWxlKFU+YSYmYi5hbnlDaGFuZ2VkKTtvLl9hbGxPYnNlcnZlcnNDb3VudD1WLmxlbmd0aCxYPSExfX19LFcmJihhLlBsYXRmb3JtLmNsZWFyT2JzZXJ2ZXJzPWZ1bmN0aW9uKCl7Vj1bXX0pLHEucHJvdG90eXBlPUwoe19fcHJvdG9fXzpvLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RyYmT2JqZWN0Lm9ic2VydmUodGhpcy5vYmplY3QsdGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spfSxzeW5jOmZ1bmN0aW9uKCl7R3x8KHRoaXMub2xkT2JqZWN0PW4odGhpcy5vYmplY3QpKX0sY2hlY2s6ZnVuY3Rpb24oYSl7dmFyIGIsYztpZihHKXtpZighYSlyZXR1cm4hMTtjPXt9LGI9dih0aGlzLm9iamVjdCxhLGMpfWVsc2UgYz10aGlzLm9sZE9iamVjdCxiPW0odGhpcy5vYmplY3QsdGhpcy5vbGRPYmplY3QpO3JldHVybiBsKGIpPyExOih0aGlzLnJlcG9ydEFyZ3M9W2IuYWRkZWR8fHt9LGIucmVtb3ZlZHx8e30sYi5jaGFuZ2VkfHx7fV0sdGhpcy5yZXBvcnRBcmdzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV19KSwhMCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXtHP3RoaXMub2JqZWN0JiZPYmplY3QudW5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKTp0aGlzLm9sZE9iamVjdD12b2lkIDB9fSksci5wcm90b3R5cGU9TCh7X19wcm90b19fOnEucHJvdG90eXBlLGNvbm5lY3Q6ZnVuY3Rpb24oKXtHJiZBcnJheS5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKX0sc3luYzpmdW5jdGlvbigpe0d8fCh0aGlzLm9sZE9iamVjdD10aGlzLm9iamVjdC5zbGljZSgpKX0sY2hlY2s6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoRyl7aWYoIWEpcmV0dXJuITE7Yj1GKHRoaXMub2JqZWN0LGEpfWVsc2UgYj1CKHRoaXMub2JqZWN0LDAsdGhpcy5vYmplY3QubGVuZ3RoLHRoaXMub2xkT2JqZWN0LDAsdGhpcy5vbGRPYmplY3QubGVuZ3RoKTtyZXR1cm4gYiYmYi5sZW5ndGg/KHRoaXMucmVwb3J0QXJncz1bYl0sITApOiExfX0pLHIuYXBwbHlTcGxpY2VzPWZ1bmN0aW9uKGEsYixjKXtjLmZvckVhY2goZnVuY3Rpb24oYyl7Zm9yKHZhciBkPVtjLmluZGV4LGMucmVtb3ZlZC5sZW5ndGhdLGU9Yy5pbmRleDtlPGMuaW5kZXgrYy5hZGRlZENvdW50OylkLnB1c2goYltlXSksZSsrO0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoYSxkKX0pfTt2YXIgWj1PYmplY3QuZ2V0UHJvdG90eXBlT2Yoe30pLCQ9T2JqZWN0LmdldFByb3RvdHlwZU9mKFtdKTtzLnByb3RvdHlwZT17cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmlzT2JzZXJ2ZWQ9IXRoaXMuaXNPYnNlcnZlZH0sb2JzZXJ2ZTpmdW5jdGlvbihhKXtpZihlKGEpJiZhIT09WiYmYSE9PSQpe3ZhciBiPXRoaXMuYXJyLmluZGV4T2YoYSk7Yj49MCYmdGhpcy5hcnJbYisxXT09PXRoaXMuaXNPYnNlcnZlZHx8KDA+YiYmKGI9dGhpcy5hcnIubGVuZ3RoLHRoaXMuYXJyW2JdPWEsT2JqZWN0Lm9ic2VydmUoYSx0aGlzLmNhbGxiYWNrKSksdGhpcy5hcnJbYisxXT10aGlzLmlzT2JzZXJ2ZWQsdGhpcy5vYnNlcnZlKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSkpfX0sY2xlYW51cDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPXRoaXMuaXNPYnNlcnZlZDtiPHRoaXMuYXJyLmxlbmd0aDspe3ZhciBkPXRoaXMuYXJyW2JdO3RoaXMuYXJyW2IrMV09PWM/KGI+YSYmKHRoaXMuYXJyW2FdPWQsdGhpcy5hcnJbYSsxXT1jKSxhKz0yKTpPYmplY3QudW5vYnNlcnZlKGQsdGhpcy5jYWxsYmFjayksYis9Mn10aGlzLmFyci5sZW5ndGg9YX19LHQucHJvdG90eXBlPUwoe19fcHJvdG9fXzpvLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RyYmKHRoaXMub2JzZXJ2ZWRTZXQ9bmV3IHModGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMudmFsdWU9dm9pZCAwLEcmJih0aGlzLm9ic2VydmVkU2V0LnJlc2V0KCksdGhpcy5vYnNlcnZlZFNldC5jbGVhbnVwKCksdGhpcy5vYnNlcnZlZFNldD12b2lkIDApfSxjaGVjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlPUc/dGhpcy5wYXRoLmdldFZhbHVlRnJvbU9ic2VydmVkKHRoaXMub2JqZWN0LHRoaXMub2JzZXJ2ZWRTZXQpOnRoaXMucGF0aC5nZXRWYWx1ZUZyb20odGhpcy5vYmplY3QpLGYodGhpcy52YWx1ZSx0aGlzLm9sZFZhbHVlKT8hMToodGhpcy5yZXBvcnRBcmdzPVt0aGlzLnZhbHVlLHRoaXMub2xkVmFsdWVdLCEwKX0sc3luYzpmdW5jdGlvbihhKXthJiYodGhpcy52YWx1ZT1HP3RoaXMucGF0aC5nZXRWYWx1ZUZyb21PYnNlcnZlZCh0aGlzLm9iamVjdCx0aGlzLm9ic2VydmVkU2V0KTp0aGlzLnBhdGguZ2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0KSksdGhpcy5vbGRWYWx1ZT10aGlzLnZhbHVlfX0pLHQuZ2V0VmFsdWVBdFBhdGg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1oKGIpO3JldHVybiBjP2MuZ2V0VmFsdWVGcm9tKGEpOnZvaWQgMH0sdC5zZXRWYWx1ZUF0UGF0aD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9aChiKTtkJiZkLnNldFZhbHVlRnJvbShhLGMpfTt2YXIgXz17Im5ldyI6ITAsdXBkYXRlZDohMCxkZWxldGVkOiEwfTt0LmRlZmluZVByb3BlcnR5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jLm9iamVjdCxlPWgoYy5wYXRoKSxmPXUoYSxiKSxnPW5ldyB0KGQsYy5wYXRoLGZ1bmN0aW9uKGEsYil7ZiYmZigidXBkYXRlZCIsYil9KTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0VmFsdWVGcm9tKGQpfSxzZXQ6ZnVuY3Rpb24oYSl7ZS5zZXRWYWx1ZUZyb20oZCxhKX0sY29uZmlndXJhYmxlOiEwfSkse2Nsb3NlOmZ1bmN0aW9uKCl7dmFyIGM9ZS5nZXRWYWx1ZUZyb20oZCk7ZiYmZy5kZWxpdmVyKCksZy5jbG9zZSgpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse3ZhbHVlOmMsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9fX07dmFyIGFiPTAsYmI9MSxjYj0yLGRiPTM7YS5PYnNlcnZlcj1vLGEuT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZT1HLGEuQXJyYXlPYnNlcnZlcj1yLGEuQXJyYXlPYnNlcnZlci5jYWxjdWxhdGVTcGxpY2VzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEIoYSwwLGEubGVuZ3RoLGIsMCxiLmxlbmd0aCl9LGEuT2JqZWN0T2JzZXJ2ZXI9cSxhLlBhdGhPYnNlcnZlcj10LGEuUGF0aD1pfSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBjKGEpe2Zvcig7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYS5nZXRFbGVtZW50QnlJZD9hOm51bGx9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50LmNvbnRhaW5zKGEpfWZ1bmN0aW9uIGUoYSxiLGMsZCl7dGhpcy5jbG9zZWQ9ITEsdGhpcy5ub2RlPWEsdGhpcy5wcm9wZXJ0eT1iLHRoaXMubW9kZWw9Yyx0aGlzLnBhdGg9ZCx0aGlzLm9ic2VydmVyPW5ldyBQYXRoT2JzZXJ2ZXIoYyxkLHRoaXMuYm91bmRWYWx1ZUNoYW5nZWQsdGhpcyksdGhpcy5ib3VuZFZhbHVlQ2hhbmdlZCh0aGlzLnZhbHVlKX1mdW5jdGlvbiBmKGEsYixjLGQpe3RoaXMuY29uZGl0aW9uYWw9Ij8iPT1iW2IubGVuZ3RoLTFdLHRoaXMuY29uZGl0aW9uYWwmJihhLnJlbW92ZUF0dHJpYnV0ZShiKSxiPWIuc2xpY2UoMCwtMSkpLGUuY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIGcoYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIFQ7Y2FzZSJyYWRpbyI6Y2FzZSJzZWxlY3QtbXVsdGlwbGUiOmNhc2Uic2VsZWN0LW9uZSI6cmV0dXJuImNoYW5nZSI7ZGVmYXVsdDpyZXR1cm4iaW5wdXQifX1mdW5jdGlvbiBoKGEsYixjLGQpe2UuY2FsbCh0aGlzLGEsYixjLGQpLHRoaXMuZXZlbnRUeXBlPWcodGhpcy5ub2RlKSx0aGlzLmJvdW5kTm9kZVZhbHVlVG9Nb2RlbD10aGlzLm5vZGVWYWx1ZUNoYW5nZWQuYmluZCh0aGlzKSx0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50VHlwZSx0aGlzLmJvdW5kTm9kZVZhbHVlVG9Nb2RlbCwhMCl9ZnVuY3Rpb24gaShhKXtpZighZChhKSlyZXR1cm5bXTtpZihhLmZvcm0pcmV0dXJuIFEoYS5mb3JtLmVsZW1lbnRzLGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hJiYiSU5QVVQiPT1iLnRhZ05hbWUmJiJyYWRpbyI9PWIudHlwZSYmYi5uYW1lPT1hLm5hbWV9KTt2YXIgYj1hLm93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSInK2EubmFtZSsnIl0nKTtyZXR1cm4gUShiLGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hJiYhYi5mb3JtfSl9ZnVuY3Rpb24gaihhLGIsYyl7aC5jYWxsKHRoaXMsYSwiY2hlY2tlZCIsYixjKX1mdW5jdGlvbiBrKGEsYixjKXtoLmNhbGwodGhpcyxhLCJzZWxlY3RlZEluZGV4IixiLGMpfWZ1bmN0aW9uIGwoYSl7cmV0dXJuICRbYS50YWdOYW1lXSYmYS5oYXNBdHRyaWJ1dGUoInRlbXBsYXRlIil9ZnVuY3Rpb24gbShhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGwoYSl9ZnVuY3Rpb24gbihhKXtyZXR1cm4gXyYmIlRFTVBMQVRFIj09YS50YWdOYW1lfWZ1bmN0aW9uIG8oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoYWIpO20oYSkmJmIoYSksUChjLGIpfWZ1bmN0aW9uIHAoYSl7ZnVuY3Rpb24gYihhKXtIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlKGEpfHxwKGEuY29udGVudCl9byhhLGIpfWZ1bmN0aW9uIHEoYSxiKXtPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLGMpKX0pfWZ1bmN0aW9uIHIoYSl7aWYoIWEuZGVmYXVsdFZpZXcpcmV0dXJuIGE7dmFyIGI9ZWIuZ2V0KGEpO2lmKCFiKXtmb3IoYj1hLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yi5sYXN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5sYXN0Q2hpbGQpO2ViLnNldChhLGIpfXJldHVybiBifWZ1bmN0aW9uIHMoYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD1jLmxlbmd0aDtkLS0+MDspe3ZhciBlPWNbZF07WltlLm5hbWVdJiYoInRlbXBsYXRlIiE9PWUubmFtZSYmYi5zZXRBdHRyaWJ1dGUoZS5uYW1lLGUudmFsdWUpLGEucmVtb3ZlQXR0cmlidXRlKGUubmFtZSkpfXJldHVybiBifWZ1bmN0aW9uIHQoYSxiLGMpe3ZhciBkPWEuY29udGVudDtpZihjKXJldHVybiBkLmFwcGVuZENoaWxkKGIpLHZvaWQgMDtmb3IodmFyIGU7ZT1iLmZpcnN0Q2hpbGQ7KWQuYXBwZW5kQ2hpbGQoZSl9ZnVuY3Rpb24gdShhKXsiVEVNUExBVEUiPT09YS50YWdOYW1lP198fChjYj9hLl9fcHJvdG9fXz1IVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZTpxKGEsSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUpKToocShhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiY29udGVudCIsaWIpKX1mdW5jdGlvbiB2KGEpe3ZhciBiPWxiLmdldChhKTtifHwoYj1mdW5jdGlvbigpe0goYSxhLm1vZGVsLGEuYmluZGluZ0RlbGVnYXRlKX0sbGIuc2V0KGEsYikpLGJiKGIpfWZ1bmN0aW9uIHcoYSxiLGMsZCl7dGhpcy5jbG9zZWQ9ITEsdGhpcy5ub2RlPWEsdGhpcy5wcm9wZXJ0eT1iLHRoaXMubW9kZWw9Yyx0aGlzLnBhdGg9ZCx0aGlzLm5vZGUuaW5wdXRzLmJpbmQodGhpcy5wcm9wZXJ0eSxjLGR8fCIiKX1mdW5jdGlvbiB4KGEpe3JldHVybiAzPT1hLmxlbmd0aCYmMD09YVswXS5sZW5ndGgmJjA9PWFbMl0ubGVuZ3RofWZ1bmN0aW9uIHkoYSl7aWYoYSYmYS5sZW5ndGgpe2Zvcih2YXIgYixjPWEubGVuZ3RoLGQ9MCxlPTAsZj0wO2M+ZTspe2lmKGQ9YS5pbmRleE9mKCJ7eyIsZSksZj0wPmQ/LTE6YS5pbmRleE9mKCJ9fSIsZCsyKSwwPmYpe2lmKCFiKXJldHVybjtiLnB1c2goYS5zbGljZShlKSk7YnJlYWt9Yj1ifHxbXSxiLnB1c2goYS5zbGljZShlLGQpKSxiLnB1c2goYS5zbGljZShkKzIsZikudHJpbSgpKSxlPWYrMn1yZXR1cm4gZT09PWMmJmIucHVzaCgiIiksYn19ZnVuY3Rpb24geihhLGIsYyxkLGUpe3ZhciBmLGc9ZSYmZVtYXTtyZXR1cm4gZyYmImZ1bmN0aW9uIj09dHlwZW9mIGcmJihmPWcoYyxkLGIsYSksZiYmKGM9ZixkPSJ2YWx1ZSIpKSxhLmJpbmQoYixjLGQpfWZ1bmN0aW9uIEEoYSxiLGMsZCxlKXtmb3IodmFyIGY9MDtmPGEubGVuZ3RoO2YrPTIpe3ZhciBnPUMoYixhW2ZdLGFbZisxXSxjLGQpO2UmJmUucHVzaChnKX19ZnVuY3Rpb24gQihhKXtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPSIiLGQ9MCxlPSEwO2Q8YS5sZW5ndGg7ZCsrLGU9IWUpaWYoZSljKz1hW2RdO2Vsc2V7dmFyIGY9YltkXTt2b2lkIDAhPT1mJiYoYys9Zil9cmV0dXJuIGN9fWZ1bmN0aW9uIEMoYSxiLGMsZCxlKXtpZih4KGMpKXJldHVybiB6KGEsYixkLGNbMV0sZSk7Yy5jb21iaW5hdG9yPWMuY29tYmluYXRvcnx8QihjKTt2YXIgZj1uZXcgTShjLmNvbWJpbmF0b3IpO2Yuc2NoZWR1bGVkPSEwO2Zvcih2YXIgZz0xO2c8Yy5sZW5ndGg7Zys9Mil6KGYsZyxkLGNbZ10sZSk7cmV0dXJuIGYucmVzb2x2ZSgpLGEuYmluZChiLGYsInZhbHVlIil9ZnVuY3Rpb24gRChhKXtiKGEpO2Zvcih2YXIgYyxkPW0oYSksZT0hMSxmPSExLGc9MDtnPGEuYXR0cmlidXRlcy5sZW5ndGg7ZysrKXt2YXIgaD1hLmF0dHJpYnV0ZXNbZ10saT1oLm5hbWUsaj1oLnZhbHVlO2QmJihpPT09Vz9lPSEwOihpPT09VXx8aT09PVYpJiYoZj0hMCxqPWp8fCJ7e319IikpO3ZhciBrPXkoaik7ayYmKGM9Y3x8W10sYy5wdXNoKGksaykpfXJldHVybiBlJiYhZiYmKGM9Y3x8W10sYy5wdXNoKFUseSgie3t9fSIpKSksY31mdW5jdGlvbiBFKGEpe2lmKGEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSlyZXR1cm4gRChhKTtpZihhLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUpe3ZhciBiPXkoYS5kYXRhKTtpZihiKXJldHVyblsidGV4dENvbnRlbnQiLGJdfX1mdW5jdGlvbiBGKGEpe3RoaXMubm9kZT1hfWZ1bmN0aW9uIEcoYSxiLGMsZCxlKXtpZihiJiYoYi50ZW1wbGF0ZVJlZiYmKEhUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSxiLnRlbXBsYXRlUmVmKSxkJiZrYi5zZXQoYSxkKSxlJiZlLnB1c2gobmV3IEYoYSkpKSxiLmxlbmd0aCYmQShiLGEsYyxkLGUpLGIuY2hpbGRyZW4pKWZvcih2YXIgZj0wLGc9YS5maXJzdENoaWxkO2c7Zz1nLm5leHRTaWJsaW5nKUcoZyxiLmNoaWxkcmVuW2YrK10sYyxkLGUpfWZ1bmN0aW9uIEgoYSxjLGQpe2IoYSk7dmFyIGU9RShhKTtlJiZBKGUsYSxjLGQpO2Zvcih2YXIgZj1hLmZpcnN0Q2hpbGQ7ZjtmPWYubmV4dFNpYmxpbmcpSChmLGMsZCl9ZnVuY3Rpb24gSShhLGIpe3ZhciBjPWEuY2xvbmVOb2RlKCExKTtpZihtKGMpKXJldHVybiBjO2Zvcih2YXIgZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYy5hcHBlbmRDaGlsZChJKGQsYikpO3JldHVybiBjfWZ1bmN0aW9uIEooYSl7dmFyIGI9RShhKTttKGEpJiYoYj1ifHxbXSxiLnRlbXBsYXRlUmVmPWEsYi5oYXNTdWJUZW1wbGF0ZT0hMCk7Zm9yKHZhciBjPWEuZmlyc3RDaGlsZCxkPTA7YztjPWMubmV4dFNpYmxpbmcsZCsrKXt2YXIgZT1KKGMpO2UmJihiPWJ8fFtdLGIuY2hpbGRyZW49Yi5jaGlsZHJlbnx8W10sYi5jaGlsZHJlbltkXT1lLGUuaGFzU3ViVGVtcGxhdGUmJihiLmhhc1N1YlRlbXBsYXRlPSEwKSl9cmV0dXJuIGJ9ZnVuY3Rpb24gSyhhLGIsYyl7dGhpcy5maXJzdE5vZGU9YSx0aGlzLmxhc3ROb2RlPWIsdGhpcy5tb2RlbD1jfWZ1bmN0aW9uIEwoYSxiKXtpZihhLmZpcnN0Q2hpbGQpZm9yKHZhciBjPW5ldyBLKGEuZmlyc3RDaGlsZCxhLmxhc3RDaGlsZCxiKSxkPWMuZmlyc3ROb2RlO2Q7KW1iLnNldChkLGMpLGQ9ZC5uZXh0U2libGluZ31mdW5jdGlvbiBNKGEpe3RoaXMub2JzZXJ2ZXJzPXt9LHRoaXMudmFsdWVzPXt9LHRoaXMudmFsdWU9dm9pZCAwLHRoaXMuc2l6ZT0wLHRoaXMuY29tYmluYXRvcl89YSx0aGlzLmNsb3NlZD0hMSx0aGlzLnNjaGVkdWxlZD0hMX1mdW5jdGlvbiBOKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMudGVybWluYXRvcnM9W10sdGhpcy5pdGVyYXRlZFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwLHRoaXMuaW5wdXRzPW5ldyBNKHRoaXMucmVzb2x2ZUlucHV0cy5iaW5kKHRoaXMpKX12YXIgTyxQPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCksUT1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZmlsdGVyKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP089YS5NYXA6KE89ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LE8ucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iP3ZvaWQgMDp0aGlzLnZhbHVlc1tiXX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5rZXlzLmluZGV4T2YoYSk7cmV0dXJuIDA+Yj8hMToodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpLCEwKX0sZm9yRWFjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8dGhpcy5rZXlzLmxlbmd0aDtjKyspYS5jYWxsKGJ8fHRoaXMsdGhpcy52YWx1ZXNbY10sdGhpcy5rZXlzW2NdLHRoaXMpfX0pO3ZhciBSPSJfX3Byb3RvX18iaW57fT9mdW5jdGlvbihhKXtyZXR1cm4gYX06ZnVuY3Rpb24oYSl7dmFyIGI9YS5fX3Byb3RvX187aWYoIWIpcmV0dXJuIGE7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSkuZm9yRWFjaChmdW5jdGlvbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKSl9KSxjfTsiZnVuY3Rpb24iIT10eXBlb2YgZG9jdW1lbnQuY29udGFpbnMmJihEb2N1bWVudC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT10aGlzfHxhLnBhcmVudE5vZGU9PT10aGlzPyEwOnRoaXMuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGEpfSk7dmFyIFM7InVuZGVmaW5lZCIhPXR5cGVvZiBXZWFrTWFwJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3gvIik8MD9TPVdlYWtNYXA6ZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1PYmplY3QuaGFzT3duUHJvcGVydHksYz0obmV3IERhdGUpLmdldFRpbWUoKSUxZTk7ClM9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhjKysgKyJfXyIpfSxTLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7YShiLHRoaXMubmFtZSx7dmFsdWU6Yyx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGIuY2FsbChhLHRoaXMubmFtZSk/YVt0aGlzLm5hbWVdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX19KCksTm9kZS5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7dGhpcy5iaW5kaW5ncz10aGlzLmJpbmRpbmdzfHx7fTt2YXIgZD10aGlzLmJpbmRpbmdzW2FdO3JldHVybiBkJiZkLmNsb3NlKCksZD10aGlzLmNyZWF0ZUJpbmRpbmcoYSxiLGMpLHRoaXMuYmluZGluZ3NbYV09ZCxkP2Q6KGNvbnNvbGUuZXJyb3IoIlVuaGFuZGxlZCBiaW5kaW5nIHRvIE5vZGU6ICIsdGhpcyxhLGIsYyksdm9pZCAwKX0sTm9kZS5wcm90b3R5cGUuY3JlYXRlQmluZGluZz1mdW5jdGlvbigpe30sTm9kZS5wcm90b3R5cGUudW5iaW5kPWZ1bmN0aW9uKGEpe2lmKHRoaXMuYmluZGluZ3Mpe3ZhciBiPXRoaXMuYmluZGluZ3NbYV07YiYmKGIuY2xvc2UoKSxkZWxldGUgdGhpcy5iaW5kaW5nc1thXSl9fSxOb2RlLnByb3RvdHlwZS51bmJpbmRBbGw9ZnVuY3Rpb24oKXtpZih0aGlzLmJpbmRpbmdzKXtmb3IodmFyIGE9T2JqZWN0LmtleXModGhpcy5iaW5kaW5ncyksYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz10aGlzLmJpbmRpbmdzW2FbYl1dO2MmJmMuY2xvc2UoKX10aGlzLmJpbmRpbmdzPXt9fX0sZS5wcm90b3R5cGU9e2JvdW5kVmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe3RoaXMubm9kZVt0aGlzLnByb3BlcnR5XT10aGlzLnNhbml0aXplQm91bmRWYWx1ZShhKX0sc2FuaXRpemVCb3VuZFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PWE/IiI6U3RyaW5nKGEpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwodGhpcy5vYnNlcnZlci5jbG9zZSgpLHRoaXMub2JzZXJ2ZXI9dm9pZCAwLHRoaXMubm9kZT12b2lkIDAsdGhpcy5tb2RlbD12b2lkIDAsdGhpcy5jbG9zZWQ9ITApfSxnZXQgdmFsdWUoKXtyZXR1cm4gdGhpcy5vYnNlcnZlci52YWx1ZX0sc2V0IHZhbHVlKGEpe1BhdGhPYnNlcnZlci5zZXRWYWx1ZUF0UGF0aCh0aGlzLm1vZGVsLHRoaXMucGF0aCxhKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmVyLnJlc2V0KCl9fSxUZXh0LnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4idGV4dENvbnRlbnQiPT09YT9uZXcgZSh0aGlzLCJkYXRhIixiLGMpOk5vZGUucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcuY2FsbCh0aGlzLGEsYixjKX0sZi5wcm90b3R5cGU9Uih7X19wcm90b19fOmUucHJvdG90eXBlLGJvdW5kVmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbmRpdGlvbmFsPyhhP3RoaXMubm9kZS5zZXRBdHRyaWJ1dGUodGhpcy5wcm9wZXJ0eSwiIik6dGhpcy5ub2RlLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLnByb3BlcnR5KSx2b2lkIDApOih0aGlzLm5vZGUuc2V0QXR0cmlidXRlKHRoaXMucHJvcGVydHksdGhpcy5zYW5pdGl6ZUJvdW5kVmFsdWUoYSkpLHZvaWQgMCl9fSksRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIG5ldyBmKHRoaXMsYSxiLGMpfTt2YXIgVDshZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiPWEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSk7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJjaGVja2JveCIpO3ZhciBjLGQ9MDtiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjbGljayJ9KSxiLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24oKXtkKyssYz1jfHwiY2hhbmdlIn0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7ZS5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCEwLHdpbmRvdywwLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsKSxiLmRpc3BhdGNoRXZlbnQoZSksVD0xPT1kPyJjaGFuZ2UiOmN9KCksaC5wcm90b3R5cGU9Uih7X19wcm90b19fOmUucHJvdG90eXBlLG5vZGVWYWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oKXt0aGlzLnZhbHVlPXRoaXMubm9kZVt0aGlzLnByb3BlcnR5XSx0aGlzLnJlc2V0KCksdGhpcy5wb3N0VXBkYXRlQmluZGluZygpLFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCl9LHBvc3RVcGRhdGVCaW5kaW5nOmZ1bmN0aW9uKCl7fSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwodGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5ldmVudFR5cGUsdGhpcy5ib3VuZE5vZGVWYWx1ZVRvTW9kZWwsITApLGUucHJvdG90eXBlLmNsb3NlLmNhbGwodGhpcykpfX0pLGoucHJvdG90eXBlPVIoe19fcHJvdG9fXzpoLnByb3RvdHlwZSxzYW5pdGl6ZUJvdW5kVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIEJvb2xlYW4oYSl9LHBvc3RVcGRhdGVCaW5kaW5nOmZ1bmN0aW9uKCl7IklOUFVUIj09PXRoaXMubm9kZS50YWdOYW1lJiYicmFkaW8iPT09dGhpcy5ub2RlLnR5cGUmJmkodGhpcy5ub2RlKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWEuYmluZGluZ3MuY2hlY2tlZDtiJiYoYi52YWx1ZT0hMSl9KX19KSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4idmFsdWUiPT09YT8odGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksbmV3IGgodGhpcywidmFsdWUiLGIsYykpOiJjaGVja2VkIj09PWE/KHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLG5ldyBqKHRoaXMsYixjKSk6SFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcuY2FsbCh0aGlzLGEsYixjKX0sSFRNTFRleHRBcmVhRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuInZhbHVlIj09PWE/KHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLG5ldyBoKHRoaXMsYSxiLGMpKTpIVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZy5jYWxsKHRoaXMsYSxiLGMpfSxrLnByb3RvdHlwZT1SKHtfX3Byb3RvX186aC5wcm90b3R5cGUsYm91bmRWYWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2M+ZS5ub2RlLmxlbmd0aCYmZC0tP2JiKGIpOmUubm9kZVtlLnByb3BlcnR5XT1jfXZhciBjPU51bWJlcihhKTtpZihjPD10aGlzLm5vZGUubGVuZ3RoKXJldHVybiB0aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eV09Yyx2b2lkIDA7dmFyIGQ9MixlPXRoaXM7YmIoYil9fSksSFRNTFNlbGVjdEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmc9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiJzZWxlY3RlZGluZGV4Ij09PWEudG9Mb3dlckNhc2UoKT8odGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksbmV3IGsodGhpcyxiLGMpKTpIVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZy5jYWxsKHRoaXMsYSxiLGMpfTt2YXIgVT0iYmluZCIsVj0icmVwZWF0IixXPSJpZiIsWD0iZ2V0QmluZGluZyIsWT0iZ2V0SW5zdGFuY2VNb2RlbCIsWj17dGVtcGxhdGU6ITAscmVwZWF0OiEwLGJpbmQ6ITAscmVmOiEwfSwkPXtUSEVBRDohMCxUQk9EWTohMCxURk9PVDohMCxUSDohMCxUUjohMCxURDohMCxDT0xHUk9VUDohMCxDT0w6ITAsQ0FQVElPTjohMCxPUFRJT046ITAsT1BUR1JPVVA6ITB9LF89InVuZGVmaW5lZCIhPXR5cGVvZiBIVE1MVGVtcGxhdGVFbGVtZW50LGFiPSJ0ZW1wbGF0ZSwgIitPYmplY3Qua2V5cygkKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9Mb3dlckNhc2UoKSsiW3RlbXBsYXRlXSJ9KS5qb2luKCIsICIpLGJiPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt0aGlzLm5leHRSdW5uZXI9YSx0aGlzLnZhbHVlPSExLHRoaXMubGFzdFZhbHVlPXRoaXMudmFsdWUsdGhpcy5zY2hlZHVsZWQ9W10sdGhpcy5zY2hlZHVsZWRJZHM9W10sdGhpcy5ydW5uaW5nPSExLHRoaXMub2JzZXJ2ZXI9bmV3IFBhdGhPYnNlcnZlcih0aGlzLCJ2YWx1ZSIsdGhpcy5ydW4sdGhpcyl9ZnVuY3Rpb24gYihhKXt2YXIgYj1hW2VdO2FbZV18fChiPWQrKyxhW2VdPWIpLGMuc2NoZWR1bGUoYSxiKX1hLnByb3RvdHlwZT17c2NoZWR1bGU6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5zY2hlZHVsZWRJZHNbYl0pe2lmKHRoaXMucnVubmluZylyZXR1cm4gdGhpcy5uZXh0UnVubmVyLnNjaGVkdWxlKGEsYik7dGhpcy5zY2hlZHVsZWRJZHNbYl09ITAsdGhpcy5zY2hlZHVsZWQucHVzaChhKSx0aGlzLmxhc3RWYWx1ZT09PXRoaXMudmFsdWUmJih0aGlzLnZhbHVlPSF0aGlzLnZhbHVlKX19LHJ1bjpmdW5jdGlvbigpe3RoaXMucnVubmluZz0hMDtmb3IodmFyIGE9MDthPHRoaXMuc2NoZWR1bGVkLmxlbmd0aDthKyspe3ZhciBiPXRoaXMuc2NoZWR1bGVkW2FdLGM9YltlXTt0aGlzLnNjaGVkdWxlZElkc1tjXT0hMSwiZnVuY3Rpb24iPT10eXBlb2YgYj9iKCk6Yi5yZXNvbHZlKCl9dGhpcy5zY2hlZHVsZWQ9W10sdGhpcy5zY2hlZHVsZWRJZHM9W10sdGhpcy5sYXN0VmFsdWU9dGhpcy52YWx1ZSx0aGlzLnJ1bm5pbmc9ITF9fTt2YXIgYz1uZXcgYShuZXcgYSksZD0xLGU9Il9fc2NoZWR1bGVkSWRfXyI7cmV0dXJuIGJ9KCk7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtwKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksX3x8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIGNiPSJfX3Byb3RvX18iaW57fSxkYj1uZXcgUyxlYj1uZXcgUyxmYj1uZXcgUyxnYj1uZXcgUztIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlPWZ1bmN0aW9uKGEsYyl7aWYoYS50ZW1wbGF0ZUlzRGVjb3JhdGVkXylyZXR1cm4hMTt2YXIgZD1hO2QudGVtcGxhdGVJc0RlY29yYXRlZF89ITA7dmFyIGU9bihkKSxmPWUsZz0hZSxoPSExO2lmKCFlJiZsKGQpJiYoYighYyksZD1zKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsZT1uKGQpLGg9ITApLCFlKXt1KGQpO3ZhciBpPXIoZC5vd25lckRvY3VtZW50KTtkYi5zZXQoZCxpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSl9cmV0dXJuIGM/ZmIuc2V0KGQsYyk6Zz90KGQsYSxoKTpmJiZwKGQuY29udGVudCksITB9LEhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwPXA7dmFyIGhiPWEuSFRNTFVua25vd25FbGVtZW50fHxIVE1MRWxlbWVudCxpYj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGRiLmdldCh0aGlzKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9O198fChIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGhiLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixpYikpO3ZhciBqYj1uZXcgUyxrYj1uZXcgUyxsYj1uZXcgUzt3LnByb3RvdHlwZT1SKHtfX3Byb3RvX186ZS5wcm90b3R5cGUsZ2V0IHZhbHVlKCl7fSxib3VuZFZhbHVlQ2hhbmdlZDpmdW5jdGlvbigpe30sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZHx8KHRoaXMubm9kZS5pbnB1dHMudW5iaW5kKHRoaXMucHJvcGVydHkpLHRoaXMubm9kZT12b2lkIDAsdGhpcy5tb2RlbD12b2lkIDAsdGhpcy5jbG9zZWQ9ITApfX0pLHEoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUse2NyZWF0ZUJpbmRpbmc6ZnVuY3Rpb24oYSxiLGMpe2lmKGE9PT1VfHxhPT09Vnx8YT09PVcpe3ZhciBkPW5iLmdldCh0aGlzKTtyZXR1cm4gZHx8KGQ9bmV3IE4odGhpcyksbmIuc2V0KHRoaXMsZCkpLG5ldyB3KGQsYSxiLGN8fCIiKX1yZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcuY2FsbCh0aGlzLGEsYixjKX0sY3JlYXRlSW5zdGFuY2U6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVmLmNvbnRlbnQsZT1nYi5nZXQoZCk7ZXx8KGU9SihkKXx8W10sZ2Iuc2V0KGQsZSkpO3ZhciBmPWUuaGFzU3ViVGVtcGxhdGU/SShkKTpkLmNsb25lTm9kZSghMCk7cmV0dXJuIEcoZixlLGEsYixjKSxMKGYsYSksZn0sZ2V0IG1vZGVsKCl7cmV0dXJuIGpiLmdldCh0aGlzKX0sc2V0IG1vZGVsKGEpe2piLnNldCh0aGlzLGEpLHYodGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4ga2IuZ2V0KHRoaXMpfSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe2tiLnNldCh0aGlzLGEpLHYodGhpcyl9LGdldCByZWYoKXt2YXIgYSxiPXRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKTtpZihiKXt2YXIgZD1jKHRoaXMpO2QmJihhPWQuZ2V0RWxlbWVudEJ5SWQoYikpfWlmKGF8fChhPWZiLmdldCh0aGlzKSksIWEpcmV0dXJuIHRoaXM7dmFyIGU9YS5yZWY7cmV0dXJuIGU/ZTphfX0pLEYucHJvdG90eXBlPXtjbG9zZTpmdW5jdGlvbigpe3ZhciBhPW5iLmdldCh0aGlzLm5vZGUpO2EmJmEuY2xvc2UoKX19O3ZhciBtYj1uZXcgUztPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT1tYi5nZXQodGhpcyk7cmV0dXJuIGE/YTp0aGlzLnBhcmVudE5vZGU/dGhpcy5wYXJlbnROb2RlLnRlbXBsYXRlSW5zdGFuY2U6dm9pZCAwfX0pLE0ucHJvdG90eXBlPXtzZXQgY29tYmluYXRvcihhKXt0aGlzLmNvbWJpbmF0b3JfPWEsdGhpcy5zY2hlZHVsZVJlc29sdmUoKX0scGF0aFZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIsYyl7dGhpcy52YWx1ZXNbY109YSx0aGlzLnNjaGVkdWxlUmVzb2x2ZSgpfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnVuYmluZChhKSx0aGlzLnNpemUrKzt2YXIgZD1uZXcgUGF0aE9ic2VydmVyKGIsYyx0aGlzLnBhdGhWYWx1ZUNoYW5nZWQsdGhpcyxhKTt0aGlzLm9ic2VydmVyc1thXT1kLHRoaXMucGF0aFZhbHVlQ2hhbmdlZChkLnZhbHVlLHZvaWQgMCxhKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7dGhpcy5vYnNlcnZlcnNbYV0mJih0aGlzLnNpemUtLSx0aGlzLm9ic2VydmVyc1thXS5jbG9zZSgpLGRlbGV0ZSB0aGlzLm9ic2VydmVyc1thXSxkZWxldGUgdGhpcy52YWx1ZXNbYV0sYnx8dGhpcy5zY2hlZHVsZVJlc29sdmUoKSl9LHNjaGVkdWxlUmVzb2x2ZTpmdW5jdGlvbigpe3RoaXMuc2NoZWR1bGVkfHwodGhpcy5zY2hlZHVsZWQ9ITAsYmIodGhpcykpfSxyZXNvbHZlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXtpZighdGhpcy5jb21iaW5hdG9yXyl0aHJvdyBFcnJvcigiQ29tcG91bmRCaW5kaW5nIGF0dGVtcHRlZCB0byByZXNvbHZlIHdpdGhvdXQgYSBjb21iaW5hdG9yIik7dGhpcy52YWx1ZT10aGlzLmNvbWJpbmF0b3JfKHRoaXMudmFsdWVzKSx0aGlzLnNjaGVkdWxlZD0hMX19LHVub2JzZXJ2ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlKCl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZWR8fChPYmplY3Qua2V5cyh0aGlzLm9ic2VydmVycykuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnVuYmluZChhLCEwKX0sdGhpcyksdGhpcy5jbG9zZWQ9ITAsdGhpcy52YWx1ZT12b2lkIDApfX0sTi5wcm90b3R5cGU9e3Jlc29sdmVJbnB1dHM6ZnVuY3Rpb24oYSl7dGhpcy5jbG9zZWR8fChXIGluIGEmJiFhW1ddP3RoaXMudmFsdWVDaGFuZ2VkKHZvaWQgMCk6ViBpbiBhP3RoaXMudmFsdWVDaGFuZ2VkKGFbVl0pOlUgaW4gYXx8VyBpbiBhP3RoaXMudmFsdWVDaGFuZ2VkKFthW1VdXSk6dGhpcy52YWx1ZUNoYW5nZWQodm9pZCAwKSl9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhKXtBcnJheS5pc0FycmF5KGEpfHwoYT12b2lkIDApO3ZhciBiPXRoaXMuaXRlcmF0ZWRWYWx1ZTt0aGlzLnVub2JzZXJ2ZSgpLHRoaXMuaXRlcmF0ZWRWYWx1ZT1hLHRoaXMuaXRlcmF0ZWRWYWx1ZSYmKHRoaXMuYXJyYXlPYnNlcnZlcj1uZXcgQXJyYXlPYnNlcnZlcih0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5oYW5kbGVTcGxpY2VzLHRoaXMpKTt2YXIgYz1BcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXModGhpcy5pdGVyYXRlZFZhbHVlfHxbXSxifHxbXSk7Yy5sZW5ndGgmJnRoaXMuaGFuZGxlU3BsaWNlcyhjKSx0aGlzLmlucHV0cy5zaXplfHwobmIuZGVsZXRlKHRoaXMpLHRoaXMuY2xvc2UoKSl9LGdldFRlcm1pbmF0b3JBdDpmdW5jdGlvbihhKXtpZigtMT09YSlyZXR1cm4gdGhpcy50ZW1wbGF0ZUVsZW1lbnRfO3ZhciBiPXRoaXMudGVybWluYXRvcnNbMiphXTtpZihiLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fHRoaXMudGVtcGxhdGVFbGVtZW50Xz09PWIpcmV0dXJuIGI7dmFyIGM9bmIuZ2V0KGIpO3JldHVybiBjP2MuZ2V0VGVybWluYXRvckF0KGMudGVybWluYXRvcnMubGVuZ3RoLzItMSk6Yn0saW5zZXJ0SW5zdGFuY2VBdDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmdldFRlcm1pbmF0b3JBdChhLTEpLGY9Yj9iLmxhc3RDaGlsZHx8ZTpjW2MubGVuZ3RoLTFdfHxlO3RoaXMudGVybWluYXRvcnMuc3BsaWNlKDIqYSwwLGYsZCk7dmFyIGc9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGUsaD1lLm5leHRTaWJsaW5nO2lmKGIpcmV0dXJuIGcuaW5zZXJ0QmVmb3JlKGIsaCksdm9pZCAwO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKWcuaW5zZXJ0QmVmb3JlKGNbaV0saCl9LGV4dHJhY3RJbnN0YW5jZUF0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9dGhpcy5nZXRUZXJtaW5hdG9yQXQoYS0xKSxkPXRoaXMuZ2V0VGVybWluYXRvckF0KGEpO2IuYm91bmQ9dGhpcy50ZXJtaW5hdG9yc1syKmErMV0sdGhpcy50ZXJtaW5hdG9ycy5zcGxpY2UoMiphLDIpO2Zvcih2YXIgZT10aGlzLnRlbXBsYXRlRWxlbWVudF8ucGFyZW50Tm9kZTtkIT09Yzspe3ZhciBmPWMubmV4dFNpYmxpbmc7Zj09ZCYmKGQ9YyksZS5yZW1vdmVDaGlsZChmKSxiLnB1c2goZil9cmV0dXJuIGJ9LGdldEluc3RhbmNlTW9kZWw6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMmJmNbWV07cmV0dXJuIGQmJiJmdW5jdGlvbiI9PXR5cGVvZiBkP2QoYSxiKTpifSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCl7dmFyIGI9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfO2lmKCFiLnBhcmVudE5vZGV8fCFiLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpcmV0dXJuIHRoaXMuY2xvc2UoKSxuYi5kZWxldGUodGhpcyksdm9pZCAwO3ZhciBjPWIuYmluZGluZ0RlbGVnYXRlLGQ9bmV3IE8sZT0wO2EuZm9yRWFjaChmdW5jdGlvbihhKXthLnJlbW92ZWQuZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz10aGlzLmV4dHJhY3RJbnN0YW5jZUF0KGEuaW5kZXgrZSk7ZC5zZXQoYixjKX0sdGhpcyksZS09YS5hZGRlZENvdW50fSx0aGlzKSxhLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBlPWEuaW5kZXg7ZTxhLmluZGV4K2EuYWRkZWRDb3VudDtlKyspe3ZhciBmLGc9dGhpcy5pdGVyYXRlZFZhbHVlW2VdLGg9dm9pZCAwLGk9ZC5nZXQoZyk7aWYoaSlkLmRlbGV0ZShnKSxmPWkuYm91bmQ7ZWxzZXtmPVtdO3ZhciBqPXRoaXMuZ2V0SW5zdGFuY2VNb2RlbChiLGcsYyk7aD10aGlzLnRlbXBsYXRlRWxlbWVudF8uY3JlYXRlSW5zdGFuY2UoaixjLGYpfXRoaXMuaW5zZXJ0SW5zdGFuY2VBdChlLGgsaSxmKX19LHRoaXMpLGQuZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5ib3VuZCxjPTA7YzxiLmxlbmd0aDtjKyspYltjXS5jbG9zZSgpfSl9fSx1bm9ic2VydmU6ZnVuY3Rpb24oKXt0aGlzLmFycmF5T2JzZXJ2ZXImJih0aGlzLmFycmF5T2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwKX0sY2xvc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5jbG9zZWQpe3RoaXMudW5vYnNlcnZlKCk7Zm9yKHZhciBhPTE7YTx0aGlzLnRlcm1pbmF0b3JzLmxlbmd0aDthKz0yKWZvcih2YXIgYj10aGlzLnRlcm1pbmF0b3JzW2FdLGM9MDtjPGIubGVuZ3RoO2MrKyliW2NdLmNsb3NlKCk7dGhpcy50ZXJtaW5hdG9ycy5sZW5ndGg9MCx0aGlzLmlucHV0cy5jbG9zZSgpLHRoaXMuY2xvc2VkPSEwfX19O3ZhciBuYj1uZXcgUzthLkNvbXBvdW5kQmluZGluZz1NLEhUTUxUZW1wbGF0ZUVsZW1lbnQuZm9yQWxsVGVtcGxhdGVzRnJvbV89b30odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFTU0VSVDogIitiKX1mdW5jdGlvbiBjKGEpe3JldHVybiBhPj00OCYmNTc+PWF9ZnVuY3Rpb24gZChhKXtyZXR1cm4gMzI9PT1hfHw5PT09YXx8MTE9PT1hfHwxMj09PWF8fDE2MD09PWF8fGE+PTU3NjAmJiLhmoDhoI7igIDigIHigILigIPigITigIXigIbigIfigIjigInigIrigK/igZ/jgIAiLmluZGV4T2YoU3RyaW5nLmZyb21DaGFyQ29kZShhKSk+MH1mdW5jdGlvbiBlKGEpe3JldHVybiAxMD09PWF8fDEzPT09YXx8ODIzMj09PWF8fDgyMzM9PT1hfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIDM2PT09YXx8OTU9PT1hfHxhPj02NSYmOTA+PWF8fGE+PTk3JiYxMjI+PWF9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YXx8YT49NDgmJjU3Pj1hfWZ1bmN0aW9uIGgoYSl7cmV0dXJuInRoaXMiPT09YX1mdW5jdGlvbiBpKCl7Zm9yKDtiYj5hYiYmZChfLmNoYXJDb2RlQXQoYWIpKTspKythYn1mdW5jdGlvbiBqKCl7dmFyIGEsYjtmb3IoYT1hYisrO2JiPmFiJiYoYj1fLmNoYXJDb2RlQXQoYWIpLGcoYikpOykrK2FiO3JldHVybiBfLnNsaWNlKGEsYWIpfWZ1bmN0aW9uIGsoKXt2YXIgYSxiLGM7cmV0dXJuIGE9YWIsYj1qKCksYz0xPT09Yi5sZW5ndGg/WC5JZGVudGlmaWVyOmgoYik/WC5LZXl3b3JkOiJudWxsIj09PWI/WC5OdWxsTGl0ZXJhbDoidHJ1ZSI9PT1ifHwiZmFsc2UiPT09Yj9YLkJvb2xlYW5MaXRlcmFsOlguSWRlbnRpZmllcix7dHlwZTpjLHZhbHVlOmIscmFuZ2U6W2EsYWJdfX1mdW5jdGlvbiBsKCl7dmFyIGEsYixjLGQsZT1hYixmPV8uY2hhckNvZGVBdChhYiksZz1fW2FiXTtzd2l0Y2goZil7Y2FzZSA0NjpjYXNlIDQwOmNhc2UgNDE6Y2FzZSA1OTpjYXNlIDQ0OmNhc2UgMTIzOmNhc2UgMTI1OmNhc2UgOTE6Y2FzZSA5MzpjYXNlIDU4OmNhc2UgNjM6Y2FzZSAxMjY6cmV0dXJuKythYix7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShmKSxyYW5nZTpbZSxhYl19O2RlZmF1bHQ6aWYoYT1fLmNoYXJDb2RlQXQoYWIrMSksNjE9PT1hKXN3aXRjaChmKXtjYXNlIDM3OmNhc2UgMzg6Y2FzZSA0MjpjYXNlIDQzOmNhc2UgNDU6Y2FzZSA0NzpjYXNlIDYwOmNhc2UgNjI6Y2FzZSA5NDpjYXNlIDEyNDpyZXR1cm4gYWIrPTIse3R5cGU6WC5QdW5jdHVhdG9yLHZhbHVlOlN0cmluZy5mcm9tQ2hhckNvZGUoZikrU3RyaW5nLmZyb21DaGFyQ29kZShhKSxyYW5nZTpbZSxhYl19O2Nhc2UgMzM6Y2FzZSA2MTpyZXR1cm4gYWIrPTIsNjE9PT1fLmNoYXJDb2RlQXQoYWIpJiYrK2FiLHt0eXBlOlguUHVuY3R1YXRvcix2YWx1ZTpfLnNsaWNlKGUsYWIpLHJhbmdlOltlLGFiXX19fXJldHVybiBiPV9bYWIrMV0sYz1fW2FiKzJdLGQ9X1thYiszXSwiPiI9PT1nJiYiPiI9PT1iJiYiPiI9PT1jJiYiPSI9PT1kPyhhYis9NCx7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6Ij4+Pj0iLHJhbmdlOltlLGFiXX0pOiI+Ij09PWcmJiI+Ij09PWImJiI+Ij09PWM/KGFiKz0zLHt0eXBlOlguUHVuY3R1YXRvcix2YWx1ZToiPj4+IixyYW5nZTpbZSxhYl19KToiPCI9PT1nJiYiPCI9PT1iJiYiPSI9PT1jPyhhYis9Myx7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6Ijw8PSIscmFuZ2U6W2UsYWJdfSk6Ij4iPT09ZyYmIj4iPT09YiYmIj0iPT09Yz8oYWIrPTMse3R5cGU6WC5QdW5jdHVhdG9yLHZhbHVlOiI+Pj0iLHJhbmdlOltlLGFiXX0pOmc9PT1iJiYiKy08PiZ8Ii5pbmRleE9mKGcpPj0wPyhhYis9Mix7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6ZytiLHJhbmdlOltlLGFiXX0pOiI8Pj0hKy0qJSZ8Xi8iLmluZGV4T2YoZyk+PTA/KCsrYWIse3R5cGU6WC5QdW5jdHVhdG9yLHZhbHVlOmcscmFuZ2U6W2UsYWJdfSk6KHMoe30sJC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx2b2lkIDApfWZ1bmN0aW9uIG0oKXt2YXIgYSxkLGU7aWYoZT1fW2FiXSxiKGMoZS5jaGFyQ29kZUF0KDApKXx8Ii4iPT09ZSwiTnVtZXJpYyBsaXRlcmFsIG11c3Qgc3RhcnQgd2l0aCBhIGRlY2ltYWwgZGlnaXQgb3IgYSBkZWNpbWFsIHBvaW50IiksZD1hYixhPSIiLCIuIiE9PWUpe2ZvcihhPV9bYWIrK10sZT1fW2FiXSwiMCI9PT1hJiZlJiZjKGUuY2hhckNvZGVBdCgwKSkmJnMoe30sJC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKTtjKF8uY2hhckNvZGVBdChhYikpOylhKz1fW2FiKytdO2U9X1thYl19aWYoIi4iPT09ZSl7Zm9yKGErPV9bYWIrK107YyhfLmNoYXJDb2RlQXQoYWIpKTspYSs9X1thYisrXTtlPV9bYWJdfWlmKCJlIj09PWV8fCJFIj09PWUpaWYoYSs9X1thYisrXSxlPV9bYWJdLCgiKyI9PT1lfHwiLSI9PT1lKSYmKGErPV9bYWIrK10pLGMoXy5jaGFyQ29kZUF0KGFiKSkpZm9yKDtjKF8uY2hhckNvZGVBdChhYikpOylhKz1fW2FiKytdO2Vsc2Ugcyh7fSwkLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpO3JldHVybiBmKF8uY2hhckNvZGVBdChhYikpJiZzKHt9LCQuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIikse3R5cGU6WC5OdW1lcmljTGl0ZXJhbCx2YWx1ZTpwYXJzZUZsb2F0KGEpLHJhbmdlOltkLGFiXX19ZnVuY3Rpb24gbigpe3ZhciBhLGMsZCxmPSIiLGc9ITE7Zm9yKGE9X1thYl0sYigiJyI9PT1hfHwnIic9PT1hLCJTdHJpbmcgbGl0ZXJhbCBtdXN0IHN0YXJ0cyB3aXRoIGEgcXVvdGUiKSxjPWFiLCsrYWI7YmI+YWI7KXtpZihkPV9bYWIrK10sZD09PWEpe2E9IiI7YnJlYWt9aWYoIlxcIj09PWQpaWYoZD1fW2FiKytdLGQmJmUoZC5jaGFyQ29kZUF0KDApKSkiXHIiPT09ZCYmIlxuIj09PV9bYWJdJiYrK2FiO2Vsc2Ugc3dpdGNoKGQpe2Nhc2UibiI6Zis9IlxuIjticmVhaztjYXNlInIiOmYrPSJcciI7YnJlYWs7Y2FzZSJ0IjpmKz0iCSI7YnJlYWs7Y2FzZSJiIjpmKz0iXGIiO2JyZWFrO2Nhc2UiZiI6Zis9IlxmIjticmVhaztjYXNlInYiOmYrPSILIjticmVhaztkZWZhdWx0OmYrPWR9ZWxzZXtpZihlKGQuY2hhckNvZGVBdCgwKSkpYnJlYWs7Zis9ZH19cmV0dXJuIiIhPT1hJiZzKHt9LCQuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIikse3R5cGU6WC5TdHJpbmdMaXRlcmFsLHZhbHVlOmYsb2N0YWw6ZyxyYW5nZTpbYyxhYl19fWZ1bmN0aW9uIG8oYSl7cmV0dXJuIGEudHlwZT09PVguSWRlbnRpZmllcnx8YS50eXBlPT09WC5LZXl3b3JkfHxhLnR5cGU9PT1YLkJvb2xlYW5MaXRlcmFsfHxhLnR5cGU9PT1YLk51bGxMaXRlcmFsfWZ1bmN0aW9uIHAoKXt2YXIgYTtyZXR1cm4gaSgpLGFiPj1iYj97dHlwZTpYLkVPRixyYW5nZTpbYWIsYWJdfTooYT1fLmNoYXJDb2RlQXQoYWIpLDQwPT09YXx8NDE9PT1hfHw1OD09PWE/bCgpOjM5PT09YXx8MzQ9PT1hP24oKTpmKGEpP2soKTo0Nj09PWE/YyhfLmNoYXJDb2RlQXQoYWIrMSkpP20oKTpsKCk6YyhhKT9tKCk6bCgpKX1mdW5jdGlvbiBxKCl7dmFyIGE7cmV0dXJuIGE9ZGIsYWI9YS5yYW5nZVsxXSxkYj1wKCksYWI9YS5yYW5nZVsxXSxhfWZ1bmN0aW9uIHIoKXt2YXIgYTthPWFiLGRiPXAoKSxhYj1hfWZ1bmN0aW9uIHMoYSxjKXt2YXIgZCxlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSxmPWMucmVwbGFjZSgvJShcZCkvZyxmdW5jdGlvbihhLGMpe3JldHVybiBiKGM8ZS5sZW5ndGgsIk1lc3NhZ2UgcmVmZXJlbmNlIG11c3QgYmUgaW4gcmFuZ2UiKSxlW2NdfSk7dGhyb3cgZD1uZXcgRXJyb3IoZiksZC5pbmRleD1hYixkLmRlc2NyaXB0aW9uPWYsZH1mdW5jdGlvbiB0KGEpe3MoYSwkLlVuZXhwZWN0ZWRUb2tlbixhLnZhbHVlKX1mdW5jdGlvbiB1KGEpe3ZhciBiPXEoKTsoYi50eXBlIT09WC5QdW5jdHVhdG9yfHxiLnZhbHVlIT09YSkmJnQoYil9ZnVuY3Rpb24gdihhKXtyZXR1cm4gZGIudHlwZT09PVguUHVuY3R1YXRvciYmZGIudmFsdWU9PT1hfWZ1bmN0aW9uIHcoYSl7cmV0dXJuIGRiLnR5cGU9PT1YLktleXdvcmQmJmRiLnZhbHVlPT09YX1mdW5jdGlvbiB4KCl7cmV0dXJuIDU5PT09Xy5jaGFyQ29kZUF0KGFiKT8ocSgpLHZvaWQgMCk6KGkoKSx2KCI7Iik/KHEoKSx2b2lkIDApOihkYi50eXBlPT09WC5FT0Z8fHYoIn0iKXx8dChkYiksdm9pZCAwKSl9ZnVuY3Rpb24geSgpe3ZhciBhPVtdO2Zvcih1KCJbIik7IXYoIl0iKTspdigiLCIpPyhxKCksYS5wdXNoKG51bGwpKTooYS5wdXNoKE8oKSksdigiXSIpfHx1KCIsIikpO3JldHVybiB1KCJdIiksY2IuY3JlYXRlQXJyYXlFeHByZXNzaW9uKGEpfWZ1bmN0aW9uIHooKXt2YXIgYTtyZXR1cm4gaSgpLGE9cSgpLGEudHlwZT09PVguU3RyaW5nTGl0ZXJhbHx8YS50eXBlPT09WC5OdW1lcmljTGl0ZXJhbD9jYi5jcmVhdGVMaXRlcmFsKGEpOmNiLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24gQSgpe3ZhciBhLGI7cmV0dXJuIGE9ZGIsaSgpLChhLnR5cGU9PT1YLkVPRnx8YS50eXBlPT09WC5QdW5jdHVhdG9yKSYmdChhKSxiPXooKSx1KCI6IiksY2IuY3JlYXRlUHJvcGVydHkoImluaXQiLGIsTygpKX1mdW5jdGlvbiBCKCl7dmFyIGE9W107Zm9yKHUoInsiKTshdigifSIpOylhLnB1c2goQSgpKSx2KCJ9Iil8fHUoIiwiKTtyZXR1cm4gdSgifSIpLGNiLmNyZWF0ZU9iamVjdEV4cHJlc3Npb24oYSl9ZnVuY3Rpb24gQygpe3ZhciBhO3JldHVybiB1KCIoIiksYT1QKCksdSgiKSIpLGF9ZnVuY3Rpb24gRCgpe3ZhciBhLGIsYztyZXR1cm4gdigiKCIpP0MoKTooYT1kYi50eXBlLGE9PT1YLklkZW50aWZpZXI/Yz1jYi5jcmVhdGVJZGVudGlmaWVyKHEoKS52YWx1ZSk6YT09PVguU3RyaW5nTGl0ZXJhbHx8YT09PVguTnVtZXJpY0xpdGVyYWw/Yz1jYi5jcmVhdGVMaXRlcmFsKHEoKSk6YT09PVguS2V5d29yZD93KCJ0aGlzIikmJihxKCksYz1jYi5jcmVhdGVUaGlzRXhwcmVzc2lvbigpKTphPT09WC5Cb29sZWFuTGl0ZXJhbD8oYj1xKCksYi52YWx1ZT0idHJ1ZSI9PT1iLnZhbHVlLGM9Y2IuY3JlYXRlTGl0ZXJhbChiKSk6YT09PVguTnVsbExpdGVyYWw/KGI9cSgpLGIudmFsdWU9bnVsbCxjPWNiLmNyZWF0ZUxpdGVyYWwoYikpOnYoIlsiKT9jPXkoKTp2KCJ7IikmJihjPUIoKSksYz9jOih0KHEoKSksdm9pZCAwKSl9ZnVuY3Rpb24gRSgpe3ZhciBhPVtdO2lmKHUoIigiKSwhdigiKSIpKWZvcig7YmI+YWImJihhLnB1c2goTygpKSwhdigiKSIpKTspdSgiLCIpO3JldHVybiB1KCIpIiksYX1mdW5jdGlvbiBGKCl7dmFyIGE7cmV0dXJuIGE9cSgpLG8oYSl8fHQoYSksY2IuY3JlYXRlSWRlbnRpZmllcihhLnZhbHVlKX1mdW5jdGlvbiBHKCl7cmV0dXJuIHUoIi4iKSxGKCl9ZnVuY3Rpb24gSCgpe3ZhciBhO3JldHVybiB1KCJbIiksYT1QKCksdSgiXSIpLGF9ZnVuY3Rpb24gSSgpe3ZhciBhLGIsYztmb3IoYT1EKCk7digiLiIpfHx2KCJbIil8fHYoIigiKTspdigiKCIpPyhiPUUoKSxhPWNiLmNyZWF0ZUNhbGxFeHByZXNzaW9uKGEsYikpOnYoIlsiKT8oYz1IKCksYT1jYi5jcmVhdGVNZW1iZXJFeHByZXNzaW9uKCJbIixhLGMpKTooYz1HKCksYT1jYi5jcmVhdGVNZW1iZXJFeHByZXNzaW9uKCIuIixhLGMpKTtyZXR1cm4gYX1mdW5jdGlvbiBKKCl7dmFyIGE7cmV0dXJuIGE9SSgpLGRiLnR5cGU9PT1YLlB1bmN0dWF0b3ImJih2KCIrKyIpfHx2KCItLSIpKSYmcyh7fSwkLlVuZXhwZWN0ZWRUb2tlbiksYX1mdW5jdGlvbiBLKCl7dmFyIGEsYjtyZXR1cm4gZGIudHlwZSE9PVguUHVuY3R1YXRvciYmZGIudHlwZSE9PVguS2V5d29yZD9iPUooKTp2KCIrKyIpfHx2KCItLSIpP3Moe30sJC5VbmV4cGVjdGVkVG9rZW4pOnYoIisiKXx8digiLSIpfHx2KCJ+Iil8fHYoIiEiKT8oYT1xKCksYj1LKCksYj1jYi5jcmVhdGVVbmFyeUV4cHJlc3Npb24oYS52YWx1ZSxiKSk6dygiZGVsZXRlIil8fHcoInZvaWQiKXx8dygidHlwZW9mIik/cyh7fSwkLlVuZXhwZWN0ZWRUb2tlbik6Yj1KKCksYn1mdW5jdGlvbiBMKGEsYil7dmFyIGM9MDtpZihhLnR5cGUhPT1YLlB1bmN0dWF0b3ImJmEudHlwZSE9PVguS2V5d29yZClyZXR1cm4gMDtzd2l0Y2goYS52YWx1ZSl7Y2FzZSJ8fCI6Yz0xO2JyZWFrO2Nhc2UiJiYiOmM9MjticmVhaztjYXNlInwiOmM9MzticmVhaztjYXNlIl4iOmM9NDticmVhaztjYXNlIiYiOmM9NTticmVhaztjYXNlIj09IjpjYXNlIiE9IjpjYXNlIj09PSI6Y2FzZSIhPT0iOmM9NjticmVhaztjYXNlIjwiOmNhc2UiPiI6Y2FzZSI8PSI6Y2FzZSI+PSI6Y2FzZSJpbnN0YW5jZW9mIjpjPTc7YnJlYWs7Y2FzZSJpbiI6Yz1iPzc6MDticmVhaztjYXNlIjw8IjpjYXNlIj4+IjpjYXNlIj4+PiI6Yz04O2JyZWFrO2Nhc2UiKyI6Y2FzZSItIjpjPTk7YnJlYWs7Y2FzZSIqIjpjYXNlIi8iOmNhc2UiJSI6Yz0xMX1yZXR1cm4gY31mdW5jdGlvbiBNKCl7dmFyIGEsYixjLGQsZSxmLGcsaCxpO2lmKGQ9ZWIuYWxsb3dJbixlYi5hbGxvd0luPSEwLGg9SygpLGI9ZGIsYz1MKGIsZCksMD09PWMpcmV0dXJuIGg7Zm9yKGIucHJlYz1jLHEoKSxmPUsoKSxlPVtoLGIsZl07KGM9TChkYixkKSk+MDspe2Zvcig7ZS5sZW5ndGg+MiYmYzw9ZVtlLmxlbmd0aC0yXS5wcmVjOylmPWUucG9wKCksZz1lLnBvcCgpLnZhbHVlLGg9ZS5wb3AoKSxhPWNiLmNyZWF0ZUJpbmFyeUV4cHJlc3Npb24oZyxoLGYpLGUucHVzaChhKTtiPXEoKSxiLnByZWM9YyxlLnB1c2goYiksYT1LKCksZS5wdXNoKGEpfWZvcihlYi5hbGxvd0luPWQsaT1lLmxlbmd0aC0xLGE9ZVtpXTtpPjE7KWE9Y2IuY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihlW2ktMV0udmFsdWUsZVtpLTJdLGEpLGktPTI7cmV0dXJuIGF9ZnVuY3Rpb24gTigpe3ZhciBhLGIsYyxkO3JldHVybiBhPU0oKSx2KCI/IikmJihxKCksYj1lYi5hbGxvd0luLGViLmFsbG93SW49ITAsYz1PKCksZWIuYWxsb3dJbj1iLHUoIjoiKSxkPU8oKSxhPWNiLmNyZWF0ZUNvbmRpdGlvbmFsRXhwcmVzc2lvbihhLGMsZCkpLGF9ZnVuY3Rpb24gTygpe3ZhciBhLGIsYztyZXR1cm4gYT1kYixjPWI9TigpfWZ1bmN0aW9uIFAoKXt2YXIgYTtyZXR1cm4gYT1PKCl9ZnVuY3Rpb24gUSgpe3JldHVybiB1KCI7IiksY2IuY3JlYXRlRW1wdHlTdGF0ZW1lbnQoKX1mdW5jdGlvbiBSKCl7dmFyIGE9UCgpO3JldHVybiB4KCksY2IuY3JlYXRlRXhwcmVzc2lvblN0YXRlbWVudChhKX1mdW5jdGlvbiBTKCl7dmFyIGEsYixjLGQ9ZGIudHlwZTtpZihkPT09WC5FT0YmJnQoZGIpLGkoKSxkPT09WC5QdW5jdHVhdG9yKXN3aXRjaChkYi52YWx1ZSl7Y2FzZSI7IjpyZXR1cm4gUSgpO2Nhc2UiKCI6cmV0dXJuIFIoKX1yZXR1cm4gYT1QKCksYS50eXBlPT09Wi5JZGVudGlmaWVyJiZ2KCI6Iik/KHEoKSxjPSIkIithLm5hbWUsT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGViLmxhYmVsU2V0LGMpJiZzKHt9LCQuUmVkZWNsYXJhdGlvbiwiTGFiZWwiLGEubmFtZSksZWIubGFiZWxTZXRbY109ITAsYj1TKCksZGVsZXRlIGViLmxhYmVsU2V0W2NdLGNiLmNyZWF0ZUxhYmVsZWRTdGF0ZW1lbnQoYSxiKSk6KHgoKSxjYi5jcmVhdGVFeHByZXNzaW9uU3RhdGVtZW50KGEpKX1mdW5jdGlvbiBUKCl7cmV0dXJuIGRiLnR5cGU9PT1YLktleXdvcmQ/UygpOmRiLnR5cGUhPT1YLkVPRj9TKCk6dm9pZCAwfWZ1bmN0aW9uIFUoKXtmb3IodmFyIGEsYj1bXTtiYj5hYiYmKGE9VCgpLCJ1bmRlZmluZWQiIT10eXBlb2YgYSk7KWIucHVzaChhKTtyZXR1cm4gYn1mdW5jdGlvbiBWKCl7dmFyIGE7cmV0dXJuIGkoKSxyKCksYT1VKCksY2IuY3JlYXRlUHJvZ3JhbShhKX1mdW5jdGlvbiBXKGEsYil7dmFyIGM7cmV0dXJuIGM9U3RyaW5nLCJzdHJpbmciPT10eXBlb2YgYXx8YSBpbnN0YW5jZW9mIFN0cmluZ3x8KGE9YyhhKSksY2I9YixfPWEsYWI9MCxiYj1fLmxlbmd0aCxkYj1udWxsLGViPXthbGxvd0luOiEwLGxhYmVsU2V0Ont9fSxiYj4wJiYidW5kZWZpbmVkIj09dHlwZW9mIF9bMF0mJmEgaW5zdGFuY2VvZiBTdHJpbmcmJihfPWEudmFsdWVPZigpKSxWKCl9dmFyIFgsWSxaLCQsXyxhYixiYixjYixkYixlYjtYPXtCb29sZWFuTGl0ZXJhbDoxLEVPRjoyLElkZW50aWZpZXI6MyxLZXl3b3JkOjQsTnVsbExpdGVyYWw6NSxOdW1lcmljTGl0ZXJhbDo2LFB1bmN0dWF0b3I6NyxTdHJpbmdMaXRlcmFsOjh9LFk9e30sWVtYLkJvb2xlYW5MaXRlcmFsXT0iQm9vbGVhbiIsWVtYLkVPRl09IjxlbmQ+IixZW1guSWRlbnRpZmllcl09IklkZW50aWZpZXIiLFlbWC5LZXl3b3JkXT0iS2V5d29yZCIsWVtYLk51bGxMaXRlcmFsXT0iTnVsbCIsWVtYLk51bWVyaWNMaXRlcmFsXT0iTnVtZXJpYyIsWVtYLlB1bmN0dWF0b3JdPSJQdW5jdHVhdG9yIixZW1guU3RyaW5nTGl0ZXJhbF09IlN0cmluZyIsWj17QXJyYXlFeHByZXNzaW9uOiJBcnJheUV4cHJlc3Npb24iLEJpbmFyeUV4cHJlc3Npb246IkJpbmFyeUV4cHJlc3Npb24iLENhbGxFeHByZXNzaW9uOiJDYWxsRXhwcmVzc2lvbiIsQ29uZGl0aW9uYWxFeHByZXNzaW9uOiJDb25kaXRpb25hbEV4cHJlc3Npb24iLEVtcHR5U3RhdGVtZW50OiJFbXB0eVN0YXRlbWVudCIsRXhwcmVzc2lvblN0YXRlbWVudDoiRXhwcmVzc2lvblN0YXRlbWVudCIsSWRlbnRpZmllcjoiSWRlbnRpZmllciIsTGl0ZXJhbDoiTGl0ZXJhbCIsTGFiZWxlZFN0YXRlbWVudDoiTGFiZWxlZFN0YXRlbWVudCIsTG9naWNhbEV4cHJlc3Npb246IkxvZ2ljYWxFeHByZXNzaW9uIixNZW1iZXJFeHByZXNzaW9uOiJNZW1iZXJFeHByZXNzaW9uIixPYmplY3RFeHByZXNzaW9uOiJPYmplY3RFeHByZXNzaW9uIixQcm9ncmFtOiJQcm9ncmFtIixQcm9wZXJ0eToiUHJvcGVydHkiLFRoaXNFeHByZXNzaW9uOiJUaGlzRXhwcmVzc2lvbiIsVW5hcnlFeHByZXNzaW9uOiJVbmFyeUV4cHJlc3Npb24ifSwkPXtVbmV4cGVjdGVkVG9rZW46IlVuZXhwZWN0ZWQgdG9rZW4gJTAiLFVua25vd25MYWJlbDoiVW5kZWZpbmVkIGxhYmVsICclMCciLFJlZGVjbGFyYXRpb246IiUwICclMScgaGFzIGFscmVhZHkgYmVlbiBkZWNsYXJlZCJ9LGEuZXNwcmltYT17cGFyc2U6V319KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixkLGUpe2lmKGUubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSYmIlRFTVBMQVRFIj09PWUudGFnTmFtZSYmKCJiaW5kIj09PWR8fCJyZXBlYXQiPT09ZCkpe3ZhciBmLGcsaD1iLm1hdGNoKHIpO2lmKGg/KGY9aFsxXSxnPWhbMl0pOihoPWIubWF0Y2gocyksaCYmKGY9aFsyXSxnPWhbMV0pKSxoKXt2YXIgaTtpZihnPWcudHJpbSgpLGcubWF0Y2gocSkpaT1uZXcgQ29tcG91bmRCaW5kaW5nKGZ1bmN0aW9uKGEpe3JldHVybiBhLnBhdGh9KSxpLmJpbmQoInBhdGgiLGEsZyk7ZWxzZSB0cnl7aT1jKGEsZyl9Y2F0Y2goail7Y29uc29sZS5lcnJvcigiSW52YWxpZCBleHByZXNzaW9uIHN5bnRheDogIitnLGopfWlmKGkpcmV0dXJuIHQuc2V0KGUsZiksaX19fWZ1bmN0aW9uIGMoYSxiKXt0cnl7dmFyIGM9bmV3IGY7aWYoZXNwcmltYS5wYXJzZShiLGMpLCFjLnN0YXRlbWVudHMubGVuZ3RoJiYhYy5sYWJlbGVkU3RhdGVtZW50cy5sZW5ndGgpcmV0dXJuO2lmKCFjLmxhYmVsZWRTdGF0ZW1lbnRzLmxlbmd0aCYmYy5zdGF0ZW1lbnRzLmxlbmd0aD4xKXRocm93IEVycm9yKCJNdWx0aXBsZSB1bmxhYmVsbGVkIHN0YXRlbWVudHMgYXJlIG5vdCBhbGxvd2VkLiIpO3ZhciBlPWMubGFiZWxlZFN0YXRlbWVudHMubGVuZ3RoP2QoYy5sYWJlbGVkU3RhdGVtZW50cyk6ZT1jLnN0YXRlbWVudHNbMF0sZz1bXTtmb3IodmFyIGggaW4gYy5kZXBzKWcucHVzaChoKTtpZighZy5sZW5ndGgpcmV0dXJue3ZhbHVlOmUoe30pfTtmb3IodmFyIGk9bmV3IENvbXBvdW5kQmluZGluZyhlKSxqPTA7ajxnLmxlbmd0aDtqKyspaS5iaW5kKGdbal0sYSxnW2pdKTtyZXR1cm4gaX1jYXRjaChrKXtjb25zb2xlLmVycm9yKCJJbnZhbGlkIGV4cHJlc3Npb24gc3ludGF4OiAiK2Isayl9fWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxhLmxlbmd0aDtkKyspYVtkXS5ib2R5KGIpJiZjLnB1c2goYVtkXS5sYWJlbCk7cmV0dXJuIGMuam9pbigiICIpfX1mdW5jdGlvbiBlKGEsYixjKXt0aGlzLmRlcHM9YSx0aGlzLm5hbWU9Yix0aGlzLmxhc3Q9Y31mdW5jdGlvbiBmKCl7dGhpcy5zdGF0ZW1lbnRzPVtdLHRoaXMubGFiZWxlZFN0YXRlbWVudHM9W10sdGhpcy5kZXBzPXt9LHRoaXMuY3VycmVudFBhdGg9dm9pZCAwfWZ1bmN0aW9uIGcoKXt0aHJvdyBFcnJvcigiTm90IEltcGxlbWVudGVkIil9ZnVuY3Rpb24gaCgpe312YXIgaTsidW5kZWZpbmVkIiE9dHlwZW9mIFdlYWtNYXAmJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRmlyZWZveC8iKTwwP2k9V2Vha01hcDpmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxiPU9iamVjdC5oYXNPd25Qcm9wZXJ0eSxjPShuZXcgRGF0ZSkuZ2V0VGltZSgpJTFlOTtpPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYysrICsiX18iKX0saS5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihiLGMpe2EoYix0aGlzLm5hbWUse3ZhbHVlOmMsd3JpdGFibGU6ITB9KX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBiLmNhbGwoYSx0aGlzLm5hbWUpP2FbdGhpcy5uYW1lXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19fSgpO3ZhciBqPSJbJF9hLXpBLVpdIixrPSJbJF9hLXpBLVowLTldIixsPWorIisiK2srIioiLG09IigiK2wrIikiLG49Iig/OlswLTldfFsxLTldK1swLTldKykiLG89Iig/OiIrbCsifCIrbisiKSIscD0iKD86IitvKyIpKD86XFwuIitvKyIpKiIscT1uZXcgUmVnRXhwKCJeIitwKyIkIikscj1uZXcgUmVnRXhwKCJeIittKyJcXHMqIGluICguKikkIikscz1uZXcgUmVnRXhwKCJeKC4qKSBhcyBcXHMqIittKyIkIiksdD1uZXcgaTtlLnByb3RvdHlwZT17Z2V0UGF0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhc3Q/dGhpcy5sYXN0LmdldFBhdGgoKSsiLiIrdGhpcy5uYW1lOnRoaXMubmFtZX0sdmFsdWVGbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0UGF0aCgpO3JldHVybiB0aGlzLmRlcHNbYV09ITAsZnVuY3Rpb24oYil7cmV0dXJuIGJbYV19fX07dmFyIHU9eyIrIjpmdW5jdGlvbihhKXtyZXR1cm4rYX0sIi0iOmZ1bmN0aW9uKGEpe3JldHVybi1hfSwiISI6ZnVuY3Rpb24oYSl7cmV0dXJuIWF9fSx2PXsiKyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStifSwiLSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS1ifSwiKiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSpifSwiLyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS9ifSwiJSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSVifSwiPCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj5hfSwiPiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT5ifSwiPD0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI+PWF9LCI+PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT49Yn0sIj09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPT1ifSwiIT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPWJ9LCI9PT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifSwiIT09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhIT09Yn0sIiYmIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJiZifSwifHwiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGF8fGJ9fTtmLnByb3RvdHlwZT17Z2V0Rm46ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBlP2EudmFsdWVGbigpOmF9LGNyZWF0ZVByb2dyYW06ZnVuY3Rpb24oKXt9LGNyZWF0ZUV4cHJlc3Npb25TdGF0ZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhdGVtZW50cy5wdXNoKGEpLGF9LGNyZWF0ZUxhYmVsZWRTdGF0ZW1lbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5sYWJlbGVkU3RhdGVtZW50cy5wdXNoKHtsYWJlbDphLmdldFBhdGgoKSxib2R5OmIgaW5zdGFuY2VvZiBlP2IudmFsdWVGbigpOmJ9KSxifSxjcmVhdGVVbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXtpZighdVthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj10aGlzLmdldEZuKGIpLGZ1bmN0aW9uKGMpe3JldHVybiB1W2FdKGIoYykpfX0sY3JlYXRlQmluYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7aWYoIXZbYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7cmV0dXJuIGI9dGhpcy5nZXRGbihiKSxjPXRoaXMuZ2V0Rm4oYyksZnVuY3Rpb24oZCl7cmV0dXJuIHZbYV0oYihkKSxjKGQpKX19LGNyZWF0ZUNvbmRpdGlvbmFsRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGE9dGhpcy5nZXRGbihhKSxiPXRoaXMuZ2V0Rm4oYiksYz10aGlzLmdldEZuKGMpLGZ1bmN0aW9uKGQpe3JldHVybiBhKGQpP2IoZCk6YyhkKX19LGNyZWF0ZUlkZW50aWZpZXI6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGUodGhpcy5kZXBzLGEpO3JldHVybiBiLnR5cGU9IklkZW50aWZpZXIiLGJ9LGNyZWF0ZU1lbWJlckV4cHJlc3Npb246ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuZXcgZSh0aGlzLmRlcHMsYy5uYW1lLGIpfSxjcmVhdGVMaXRlcmFsOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLnZhbHVlfX0sY3JlYXRlQXJyYXlFeHByZXNzaW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl09dGhpcy5nZXRGbihhW2JdKTtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKyljLnB1c2goYVtkXShiKSk7cmV0dXJuIGN9fSxjcmVhdGVQcm9wZXJ0eTpmdW5jdGlvbihhLGIsYyl7cmV0dXJue2tleTpiIGluc3RhbmNlb2YgZT9iLmdldFBhdGgoKTpiKCksdmFsdWU6Y319LGNyZWF0ZU9iamVjdEV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXS52YWx1ZT10aGlzLmdldEZuKGFbYl0udmFsdWUpO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9e30sZD0wO2Q8YS5sZW5ndGg7ZCsrKWNbYVtkXS5rZXldPWFbZF0udmFsdWUoYik7cmV0dXJuIGN9fSxjcmVhdGVDYWxsRXhwcmVzc2lvbjpnLGNyZWF0ZUVtcHR5U3RhdGVtZW50OmcsY3JlYXRlVGhpc0V4cHJlc3Npb246Z30saC5wcm90b3R5cGU9e2dldEJpbmRpbmc6ZnVuY3Rpb24oYSxkLGUsZil7cmV0dXJuIGQ9ZC50cmltKCksZCYmIWQubWF0Y2gocSk/YihhLGQsZSxmKXx8YyhhLGQsZSxmKTp2b2lkIDB9LGdldEluc3RhbmNlTW9kZWw6ZnVuY3Rpb24oYSxiKXt2YXIgYz10LmdldChhKTtpZighYylyZXR1cm4gYjt2YXIgZD1hLnRlbXBsYXRlSW5zdGFuY2U/YS50ZW1wbGF0ZUluc3RhbmNlLm1vZGVsOmEubW9kZWwsZT1PYmplY3QuY3JlYXRlKGQpO3JldHVybiBlW2NdPWIsZX19LGEuRXhwcmVzc2lvblN5bnRheD1ofSh0aGlzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7bG9nRmxhZ3MuZGF0YSYmY29uc29sZS5ncm91cCgiTW9kZWwuZGlydHlDaGVjaygpIiksYygpLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXBFbmQoKX1mdW5jdGlvbiBjKCl7UGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX12YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2QudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2UuaW5zZXJ0QmVmb3JlKGQsZS5maXJzdENoaWxkKSxIVE1MVGVtcGxhdGVFbGVtZW50Ll9faW5zdGFuY2VDcmVhdGVkPWZ1bmN0aW9uKGEpe2RvY3VtZW50LmFkb3B0Tm9kZShhKSxDdXN0b21FbGVtZW50cy51cGdyYWRlQWxsKGEpfTt2YXIgZj0xMjU7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIldlYkNvbXBvbmVudHNSZWFkeSIsZnVuY3Rpb24oKXtiKCksT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZXx8c2V0SW50ZXJ2YWwoYyxmKX0pLGEuZmx1c2g9Yix3aW5kb3cuZGlydHlDaGVjaz1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGQoYSxpKX1mdW5jdGlvbiBjKGEpe3JldHVybiBkKGEsail9ZnVuY3Rpb24gZChhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGUoYSl7cmV0dXJuInNjcmlwdCI9PT1hLmxvY2FsTmFtZX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9YTtjIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChpKSxjLmJvZHkuaW5uZXJIVE1MPWEpLGMuX1VSTD1iO3ZhciBkPWMuY3JlYXRlRWxlbWVudCgiYmFzZSIpO3JldHVybiBkLnNldEF0dHJpYnV0ZSgiaHJlZiIsZG9jdW1lbnQuYmFzZVVSSSksYy5oZWFkLmFwcGVuZENoaWxkKGQpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31hfHwoYT13aW5kb3cuSFRNTEltcG9ydHM9e2ZsYWdzOnt9fSk7dmFyIGcsaD1hLnhocixpPSJpbXBvcnQiLGo9InN0eWxlc2hlZXQiLGs9e2RvY3VtZW50czp7fSxjYWNoZTp7fSxwcmVsb2FkU2VsZWN0b3JzOlsibGlua1tyZWw9IitpKyJdIiwiZWxlbWVudCBsaW5rW3JlbD0iK2orIl0iLCJ0ZW1wbGF0ZSIsInNjcmlwdFtzcmNdOm5vdChbdHlwZV0pIiwnc2NyaXB0W3NyY11bdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXS5qb2luKCIsIiksbG9hZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBnPW5ldyBsKGsubG9hZGVkLGEpLGcuY2FjaGU9ay5jYWNoZSxnfSxsb2FkOmZ1bmN0aW9uKGEsYil7Zz1rLmxvYWRlcihiKSxrLnByZWxvYWQoYSl9LHByZWxvYWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGsucHJlbG9hZFNlbGVjdG9ycyk7Yj10aGlzLmZpbHRlck1haW5Eb2N1bWVudE5vZGVzKGEsYiksYj10aGlzLmV4dHJhY3RUZW1wbGF0ZU5vZGVzKGIpLGcuYWRkTm9kZXMoYil9LGZpbHRlck1haW5Eb2N1bWVudE5vZGVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1kb2N1bWVudCYmKGI9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGIsZnVuY3Rpb24oYSl7cmV0dXJuIWUoYSl9KSksYn0sZXh0cmFjdFRlbXBsYXRlTm9kZXM6ZnVuY3Rpb24oYSl7dmFyIGI9W107cmV0dXJuIGE9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoInRlbXBsYXRlIj09PWEubG9jYWxOYW1lKXtpZihhLmNvbnRlbnQpe3ZhciBjPWEuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK2orIl0iKTtjLmxlbmd0aCYmKGI9Yi5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYywwKSkpfXJldHVybiExfXJldHVybiEwfSksYi5sZW5ndGgmJihhPWEuY29uY2F0KGIpKSxhfSxsb2FkZWQ6ZnVuY3Rpb24oYSxkLGUpe2lmKGIoZCkpe3ZhciBnPWsuZG9jdW1lbnRzW2FdO2d8fChnPWYoZSxhKSxwLnJlc29sdmVQYXRoc0luSFRNTChnKSxrLmRvY3VtZW50c1thXT1nLGsucHJlbG9hZChnKSksZC5pbXBvcnQ9e2hyZWY6YSxvd25lck5vZGU6ZCxjb250ZW50Omd9LGQuY29udGVudD1lPWd9ZC5fX3Jlc291cmNlPWUsYyhkKSYmcC5yZXNvbHZlUGF0aHNJblN0eWxlc2hlZXQoZCl9fSxsPWZ1bmN0aW9uKGEsYil7dGhpcy5vbmxvYWQ9YSx0aGlzLm9uY29tcGxldGU9Yix0aGlzLmluZmxpZ2h0PTAsdGhpcy5wZW5kaW5nPXt9LHRoaXMuY2FjaGU9e319O2wucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0Kz1hLmxlbmd0aCxxKGEsdGhpcy5yZXF1aXJlLHRoaXMpLHRoaXMuY2hlY2tEb25lKCl9LHJlcXVpcmU6ZnVuY3Rpb24oYSl7dmFyIGI9cC5ub2RlVXJsKGEpO2EuX19ub2RlVXJsPWIsdGhpcy5kZWR1cGUoYixhKXx8dGhpcy5mZXRjaChiLGEpfSxkZWR1cGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wZW5kaW5nW2FdPyh0aGlzLnBlbmRpbmdbYV0ucHVzaChiKSwhMCk6dGhpcy5jYWNoZVthXT8odGhpcy5vbmxvYWQoYSxiLGcuY2FjaGVbYV0pLHRoaXMudGFpbCgpLCEwKToodGhpcy5wZW5kaW5nW2FdPVtiXSwhMSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYyxkKXt0aGlzLnJlY2VpdmUoYSxiLGMsZCl9LmJpbmQodGhpcyk7aC5sb2FkKGEsYyl9LHJlY2VpdmU6ZnVuY3Rpb24oYSxiLGMsZCl7Y3x8KGcuY2FjaGVbYV09ZCksZy5wZW5kaW5nW2FdLmZvckVhY2goZnVuY3Rpb24oYil7Y3x8dGhpcy5vbmxvYWQoYSxiLGQpLHRoaXMudGFpbCgpfSx0aGlzKSxnLnBlbmRpbmdbYV09bnVsbH0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19O3ZhciBtPVsiaHJlZiIsInNyYyIsImFjdGlvbiJdLG49IlsiK20uam9pbigiXSxbIikrIl0iLG89Int7Lip9fSIscD17bm9kZVVybDpmdW5jdGlvbihhKXtyZXR1cm4gcC5yZXNvbHZlVXJsKHAuZ2V0RG9jdW1lbnRVcmwoZG9jdW1lbnQpLHAuaHJlZk9yU3JjKGEpKX0saHJlZk9yU3JjOmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgiaHJlZiIpfHxhLmdldEF0dHJpYnV0ZSgic3JjIil9LGRvY3VtZW50VXJsRnJvbU5vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHAuZ2V0RG9jdW1lbnRVcmwoYS5vd25lckRvY3VtZW50fHxhKX0sZ2V0RG9jdW1lbnRVcmw6ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEuX1VSTHx8YS5pbXBsJiZhLmltcGwuX1VSTHx8YS5iYXNlVVJJfHxhLlVSTCl8fCIiO3JldHVybiBiLnNwbGl0KCIjIilbMF19LHJlc29sdmVVcmw6ZnVuY3Rpb24oYSxiLGMpe2lmKHRoaXMuaXNBYnNVcmwoYikpcmV0dXJuIGI7dmFyIGQ9dGhpcy5jb21wcmVzc1VybCh0aGlzLnVybFRvUGF0aChhKStiKTtyZXR1cm4gYyYmKGQ9cC5tYWtlUmVsUGF0aChwLmdldERvY3VtZW50VXJsKGRvY3VtZW50KSxkKSksZH0saXNBYnNVcmw6ZnVuY3Rpb24oYSl7cmV0dXJuLyheZGF0YTopfCheaHR0cFtzXT86KXwoXlwvKS8udGVzdChhKX0sdXJsVG9QYXRoOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc3BsaXQoIi8iKTtyZXR1cm4gYi5wb3AoKSxiLnB1c2goIiIpLGIuam9pbigiLyIpfSxjb21wcmVzc1VybDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz1hLnNwbGl0KCIvIiksZD0wO2Q8Yy5sZW5ndGg7ZCsrKWI9Y1tkXSwiLi4iPT09YiYmKGMuc3BsaWNlKGQtMSwyKSxkLT0yKTtyZXR1cm4gYy5qb2luKCIvIil9LG1ha2VSZWxQYXRoOmZ1bmN0aW9uKGEsYil7dmFyIGMsZDtmb3IoYz10aGlzLmNvbXByZXNzVXJsKGEpLnNwbGl0KCIvIiksZD10aGlzLmNvbXByZXNzVXJsKGIpLnNwbGl0KCIvIik7Yy5sZW5ndGgmJmNbMF09PT1kWzBdOyljLnNoaWZ0KCksZC5zaGlmdCgpO2Zvcih2YXIgZT0wLGY9Yy5sZW5ndGgtMTtmPmU7ZSsrKWQudW5zaGlmdCgiLi4iKTt2YXIgZz1kLmpvaW4oIi8iKTtyZXR1cm4gZ30scmVzb2x2ZVBhdGhzSW5IVE1MOmZ1bmN0aW9uKGEsYil7Yj1ifHxwLmRvY3VtZW50VXJsRnJvbU5vZGUoYSkscC5yZXNvbHZlQXR0cmlidXRlcyhhLGIpLHAucmVzb2x2ZVN0eWxlRWx0cyhhLGIpO3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKTtjJiZxKGMsZnVuY3Rpb24oYSl7YS5jb250ZW50JiZwLnJlc29sdmVQYXRoc0luSFRNTChhLmNvbnRlbnQsYil9KX0scmVzb2x2ZVBhdGhzSW5TdHlsZXNoZWV0OmZ1bmN0aW9uKGEpe3ZhciBiPXAubm9kZVVybChhKTthLl9fcmVzb3VyY2U9cC5yZXNvbHZlQ3NzVGV4dChhLl9fcmVzb3VyY2UsYil9LHJlc29sdmVTdHlsZUVsdHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7YyYmcShjLGZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9cC5yZXNvbHZlQ3NzVGV4dChhLnRleHRDb250ZW50LGIpfSl9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEucmVwbGFjZSgvdXJsXChbXildKlwpL2csZnVuY3Rpb24oYSl7dmFyIGM9YS5yZXBsYWNlKC9bIiddL2csIiIpLnNsaWNlKDQsLTEpO3JldHVybiBjPXAucmVzb2x2ZVVybChiLGMsITApLCJ1cmwoIitjKyIpIn0pfSxyZXNvbHZlQXR0cmlidXRlczpmdW5jdGlvbihhLGIpe3ZhciBjPWEmJmEucXVlcnlTZWxlY3RvckFsbChuKTtjJiZxKGMsZnVuY3Rpb24oYSl7dGhpcy5yZXNvbHZlTm9kZUF0dHJpYnV0ZXMoYSxiKX0sdGhpcyl9LHJlc29sdmVOb2RlQXR0cmlidXRlczpmdW5jdGlvbihhLGIpe20uZm9yRWFjaChmdW5jdGlvbihjKXt2YXIgZD1hLmF0dHJpYnV0ZXNbY107aWYoZCYmZC52YWx1ZSYmZC52YWx1ZS5zZWFyY2gobyk8MCl7dmFyIGU9cC5yZXNvbHZlVXJsKGIsZC52YWx1ZSwhMCk7ZC52YWx1ZT1lfX0pfX07aD1ofHx7YXN5bmM6ITAsb2s6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RhdHVzPj0yMDAmJmEuc3RhdHVzPDMwMHx8MzA0PT09YS5zdGF0dXN8fDA9PT1hLnN0YXR1c30sbG9hZDpmdW5jdGlvbihiLGMsZCl7dmFyIGU9bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybihhLmZsYWdzLmRlYnVnfHxhLmZsYWdzLmJ1c3QpJiYoYis9Ij8iK01hdGgucmFuZG9tKCkpLGUub3BlbigiR0VUIixiLGguYXN5bmMpLGUuYWRkRXZlbnRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsZnVuY3Rpb24oKXs0PT09ZS5yZWFkeVN0YXRlJiZjLmNhbGwoZCwhaC5vayhlKSYmZSxlLnJlc3BvbnNlLGIpfSksZS5zZW5kKCksZX0sbG9hZERvY3VtZW50OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmxvYWQoYSxiLGMpLnJlc3BvbnNlVHlwZT0iZG9jdW1lbnQifX07dmFyIHE9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLnBhdGg9cCxhLnhocj1oLGEuaW1wb3J0ZXI9ayxhLmdldERvY3VtZW50VXJsPXAuZ2V0RG9jdW1lbnRVcmwsYS5JTVBPUlRfTElOS19UWVBFPWl9KHdpbmRvdy5IVE1MSW1wb3J0cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmYS5nZXRBdHRyaWJ1dGUoInJlbCIpPT09Zn1mdW5jdGlvbiBjKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJiFkKGEpJiYhZShhKX1mdW5jdGlvbiBkKGEpe3JldHVybiBhLm93bmVyRG9jdW1lbnQ9PT1kb2N1bWVudHx8YS5vd25lckRvY3VtZW50LmltcGw9PT1kb2N1bWVudH1mdW5jdGlvbiBlKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJiJlbGVtZW50Ij09PWEucGFyZW50Tm9kZS5sb2NhbE5hbWV9dmFyIGY9ImltcG9ydCIsZz17c2VsZWN0b3JzOlsibGlua1tyZWw9IitmKyJdIiwibGlua1tyZWw9c3R5bGVzaGVldF0iLCJzdHlsZSIsInNjcmlwdDpub3QoW3R5cGVdKSIsJ3NjcmlwdFt0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiXSddLG1hcDp7bGluazoicGFyc2VMaW5rIixzY3JpcHQ6InBhcnNlU2NyaXB0IixzdHlsZToicGFyc2VHZW5lcmljIn0scGFyc2U6ZnVuY3Rpb24oYSl7aWYoIWEuX19pbXBvcnRQYXJzZWQpe2EuX19pbXBvcnRQYXJzZWQ9ITA7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGcuc2VsZWN0b3JzKTtoKGIsZnVuY3Rpb24oYSl7Z1tnLm1hcFthLmxvY2FsTmFtZV1dKGEpfSl9fSxwYXJzZUxpbms6ZnVuY3Rpb24oYSl7YihhKT9hLmNvbnRlbnQmJmcucGFyc2UoYS5jb250ZW50KTp0aGlzLnBhcnNlR2VuZXJpYyhhKX0scGFyc2VHZW5lcmljOmZ1bmN0aW9uKGEpe2MoYSkmJmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYSl9LHBhcnNlU2NyaXB0OmZ1bmN0aW9uKGIpe2lmKGMoYikpe3ZhciBkPShiLl9fcmVzb3VyY2V8fGIudGV4dENvbnRlbnQpLnRyaW0oKTtpZihkKXt2YXIgZT1iLl9fbm9kZVVybDtpZighZSl7dmFyIGU9YS5wYXRoLmRvY3VtZW50VXJsRnJvbU5vZGUoYiksZj0iWyIrTWF0aC5mbG9vcigxZTMqKE1hdGgucmFuZG9tKCkrMSkpKyJdIixnPWQubWF0Y2goL1BvbHltZXJcKFsnIl0oW14nIl0qKS8pO2Y9ZyYmZ1sxXXx8ZixlKz0iLyIrZisiLmpzIn1kKz0iXG4vLyMgc291cmNlVVJMPSIrZSsiXG4iLGV2YWwuY2FsbCh3aW5kb3csZCl9fX19LGg9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLnBhcnNlcj1nfShIVE1MSW1wb3J0cyksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7SFRNTEltcG9ydHMuaW1wb3J0ZXIubG9hZChkb2N1bWVudCxmdW5jdGlvbigpe0hUTUxJbXBvcnRzLnBhcnNlci5wYXJzZShkb2N1bWVudCksSFRNTEltcG9ydHMucmVhZHlUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJIVE1MSW1wb3J0c0xvYWRlZCIse2J1YmJsZXM6ITB9KSl9KX0iZnVuY3Rpb24iIT10eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50JiYod2luZG93LkN1c3RvbUV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGIuaW5pdEV2ZW50KGEsITAsITApLGJ9KSwiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZT9hKCk6d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEpfSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dS5wdXNoKGEpLHR8fCh0PSEwLHEoZCkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKXx8YX1mdW5jdGlvbiBkKCl7dD0hMTt2YXIgYT11O3U9W10sYS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEudWlkXy1iLnVpZF99KTt2YXIgYj0hMTthLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGM9YS50YWtlUmVjb3JkcygpO2UoYSksYy5sZW5ndGgmJihhLmNhbGxiYWNrXyhjLGEpLGI9ITApfSksYiYmZCgpfWZ1bmN0aW9uIGUoYSl7YS5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz1wLmdldChiKTtjJiZjLmZvckVhY2goZnVuY3Rpb24oYil7Yi5vYnNlcnZlcj09PWEmJmIucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9KX0pfWZ1bmN0aW9uIGYoYSxiKXtmb3IodmFyIGM9YTtjO2M9Yy5wYXJlbnROb2RlKXt2YXIgZD1wLmdldChjKTtpZihkKWZvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdLGc9Zi5vcHRpb25zO2lmKGM9PT1hfHxnLnN1YnRyZWUpe3ZhciBoPWIoZyk7aCYmZi5lbnF1ZXVlKGgpfX19fWZ1bmN0aW9uIGcoYSl7dGhpcy5jYWxsYmFja189YSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3Z9ZnVuY3Rpb24gaChhLGIpe3RoaXMudHlwZT1hLHRoaXMudGFyZ2V0PWIsdGhpcy5hZGRlZE5vZGVzPVtdLHRoaXMucmVtb3ZlZE5vZGVzPVtdLHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGkoYSl7dmFyIGI9bmV3IGgoYS50eXBlLGEudGFyZ2V0KTtyZXR1cm4gYi5hZGRlZE5vZGVzPWEuYWRkZWROb2Rlcy5zbGljZSgpLGIucmVtb3ZlZE5vZGVzPWEucmVtb3ZlZE5vZGVzLnNsaWNlKCksYi5wcmV2aW91c1NpYmxpbmc9YS5wcmV2aW91c1NpYmxpbmcsYi5uZXh0U2libGluZz1hLm5leHRTaWJsaW5nLGIuYXR0cmlidXRlTmFtZT1hLmF0dHJpYnV0ZU5hbWUsYi5hdHRyaWJ1dGVOYW1lc3BhY2U9YS5hdHRyaWJ1dGVOYW1lc3BhY2UsYi5vbGRWYWx1ZT1hLm9sZFZhbHVlLGJ9ZnVuY3Rpb24gaihhLGIpe3JldHVybiB3PW5ldyBoKGEsYil9ZnVuY3Rpb24gayhhKXtyZXR1cm4geD94Oih4PWkodykseC5vbGRWYWx1ZT1hLHgpfWZ1bmN0aW9uIGwoKXt3PXg9dm9pZCAwfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIGE9PT14fHxhPT09dwp9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgU2lkZVRhYmxlLHE9d2luZG93Lm1zU2V0SW1tZWRpYXRlO2lmKCFxKXt2YXIgcj1bXSxzPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYSl7aWYoYS5kYXRhPT09cyl7dmFyIGI9cjtyPVtdLGIuZm9yRWFjaChmdW5jdGlvbihhKXthKCl9KX19KSxxPWZ1bmN0aW9uKGEpe3IucHVzaChhKSx3aW5kb3cucG9zdE1lc3NhZ2UocywiKiIpfX12YXIgdD0hMSx1PVtdLHY9MDtnLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2lmKGE9YyhhKSwhYi5jaGlsZExpc3QmJiFiLmF0dHJpYnV0ZXMmJiFiLmNoYXJhY3RlckRhdGF8fGIuYXR0cmlidXRlT2xkVmFsdWUmJiFiLmF0dHJpYnV0ZXN8fGIuYXR0cmlidXRlRmlsdGVyJiZiLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFiLmF0dHJpYnV0ZXN8fGIuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhYi5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgZD1wLmdldChhKTtkfHxwLnNldChhLGQ9W10pO2Zvcih2YXIgZSxmPTA7ZjxkLmxlbmd0aDtmKyspaWYoZFtmXS5vYnNlcnZlcj09PXRoaXMpe2U9ZFtmXSxlLnJlbW92ZUxpc3RlbmVycygpLGUub3B0aW9ucz1iO2JyZWFrfWV8fChlPW5ldyBvKHRoaXMsYSxiKSxkLnB1c2goZSksdGhpcy5ub2Rlc18ucHVzaChhKSksZS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7ZC5yZW1vdmVMaXN0ZW5lcnMoKSxiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX07dmFyIHcseDtvLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLm9ic2VydmVyLnJlY29yZHNfLGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+MCl7dmFyIGU9Y1tkLTFdLGY9bihlLGEpO2lmKGYpcmV0dXJuIGNbZC0xXT1mLHZvaWQgMH1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWd9KHRoaXMpLCF3aW5kb3cuTXV0YXRpb25PYnNlcnZlciYmKHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyPXdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyLCFNdXRhdGlvbk9ic2VydmVyKSl0aHJvdyBuZXcgRXJyb3IoIm5vIG11dGF0aW9uIG9ic2VydmVyIHN1cHBvcnQiKTshZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiLGYpe3ZhciBnPWZ8fHt9O2lmKCFiKXRocm93IG5ldyBFcnJvcigiTmFtZSBhcmd1bWVudCBtdXN0IG5vdCBiZSBlbXB0eSIpO2lmKGcubmFtZT1iLCFnLnByb3RvdHlwZSl0aHJvdyBuZXcgRXJyb3IoIk9wdGlvbnMgbWlzc2luZyByZXF1aXJlZCBwcm90b3R5cGUgcHJvcGVydHkiKTtyZXR1cm4gZy5saWZlY3ljbGU9Zy5saWZlY3ljbGV8fHt9LGcuYW5jZXN0cnk9YyhnLmV4dGVuZHMpLGQoZyksZShnKSxrKGcucHJvdG90eXBlKSxtKGIsZyksZy5jdG9yPW4oZyksZy5jdG9yLnByb3RvdHlwZT1nLnByb3RvdHlwZSxnLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1nLmN0b3IsYS5yZWFkeSYmYS51cGdyYWRlQWxsKGRvY3VtZW50KSxnLmN0b3J9ZnVuY3Rpb24gYyhhKXt2YXIgYj1zW2FdO3JldHVybiBiP2MoYi5leHRlbmRzKS5jb25jYXQoW2JdKTpbXX1mdW5jdGlvbiBkKGEpe2Zvcih2YXIgYixjPWEuZXh0ZW5kcyxkPTA7Yj1hLmFuY2VzdHJ5W2RdO2QrKyljPWIuaXMmJmIudGFnO2EudGFnPWN8fGEubmFtZSxjJiYoYS5pcz1hLm5hbWUpfWZ1bmN0aW9uIGUoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKTtiPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKX19YS5uYXRpdmU9Yn1mdW5jdGlvbiBmKGEpe3JldHVybiBnKHQoYS50YWcpLGEpfWZ1bmN0aW9uIGcoYixjKXtyZXR1cm4gYy5pcyYmYi5zZXRBdHRyaWJ1dGUoImlzIixjLmlzKSxoKGIsYyksYi5fX3VwZ3JhZGVkX189ITAsYS51cGdyYWRlU3VidHJlZShiKSxqKGIpLGJ9ZnVuY3Rpb24gaChhLGIpe09iamVjdC5fX3Byb3RvX18/YS5fX3Byb3RvX189Yi5wcm90b3R5cGU6KGkoYSxiLnByb3RvdHlwZSxiLm5hdGl2ZSksYS5fX3Byb3RvX189Yi5wcm90b3R5cGUpfWZ1bmN0aW9uIGkoYSxiLGMpe2Zvcih2YXIgZD17fSxlPWI7ZSE9PWMmJmUhPT1IVE1MVW5rbm93bkVsZW1lbnQucHJvdG90eXBlOyl7Zm9yKHZhciBmLGc9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSksaD0wO2Y9Z1toXTtoKyspZFtmXXx8KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGYsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGYpKSxkW2ZdPTEpO2U9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfX1mdW5jdGlvbiBqKGEpe2EucmVhZHlDYWxsYmFjayYmYS5yZWFkeUNhbGxiYWNrKCl9ZnVuY3Rpb24gayhhKXt2YXIgYj1hLnNldEF0dHJpYnV0ZTthLnNldEF0dHJpYnV0ZT1mdW5jdGlvbihhLGMpe2wuY2FsbCh0aGlzLGEsYyxiKX07dmFyIGM9YS5yZW1vdmVBdHRyaWJ1dGU7YS5yZW1vdmVBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtsLmNhbGwodGhpcyxhLGIsYyl9fWZ1bmN0aW9uIGwoYSxiLGMpe3ZhciBkPXRoaXMuZ2V0QXR0cmlidXRlKGEpO2MuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrJiZ0aGlzLmdldEF0dHJpYnV0ZShhKSE9PWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGEsZCl9ZnVuY3Rpb24gbShhLGIpe3NbYV09Yn1mdW5jdGlvbiBuKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBmKGEpfX1mdW5jdGlvbiBvKGEpe3ZhciBiPXNbYV07cmV0dXJuIGI/bmV3IGIuY3Rvcjp0KGEpfWZ1bmN0aW9uIHAoYSl7aWYoIWEuX191cGdyYWRlZF9fJiZhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKCJpcyIpfHxhLmxvY2FsTmFtZSxjPXNbYl07cmV0dXJuIGMmJmcoYSxjKX19ZnVuY3Rpb24gcShiKXt2YXIgYz11LmNhbGwodGhpcyxiKTtyZXR1cm4gYS51cGdyYWRlQWxsKGMpLGN9aWYoYXx8KGE9d2luZG93LkN1c3RvbUVsZW1lbnRzPXtmbGFnczp7fX0pLGEuaGFzTmF0aXZlPShkb2N1bWVudC53ZWJraXRSZWdpc3Rlcnx8ZG9jdW1lbnQucmVnaXN0ZXIpJiYibmF0aXZlIj09PWEuZmxhZ3MucmVnaXN0ZXIsYS5oYXNOYXRpdmUpe2RvY3VtZW50LnJlZ2lzdGVyPWRvY3VtZW50LnJlZ2lzdGVyfHxkb2N1bWVudC53ZWJraXRSZWdpc3Rlcjt2YXIgcj1mdW5jdGlvbigpe307YS5yZWdpc3RyeT17fSxhLnVwZ3JhZGVFbGVtZW50PXJ9ZWxzZXt2YXIgcz17fSx0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYmluZChkb2N1bWVudCksdT1Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGU7ZG9jdW1lbnQucmVnaXN0ZXI9Yixkb2N1bWVudC5jcmVhdGVFbGVtZW50PW8sTm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlPXEsYS5yZWdpc3RyeT1zLGEudXBncmFkZT1wfX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyxkKXt2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2lmKCFlKWZvcihlPWEuZmlyc3RDaGlsZDtlJiZlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWU9ZS5uZXh0U2libGluZztmb3IoO2U7KWMoZSxkKSE9PSEwJiZiKGUsYyxkKSxlPWUubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxkKXtiKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSk/ITA6KGEud2Via2l0U2hhZG93Um9vdCYmYyhhLndlYmtpdFNoYWRvd1Jvb3QsZCksdm9pZCAwKX0pLGEud2Via2l0U2hhZG93Um9vdCYmYyhhLndlYmtpdFNoYWRvd1Jvb3QsZCl9ZnVuY3Rpb24gZChhKXtyZXR1cm4gZyhhKT8oaChhKSwhMCk6KGkoYSksdm9pZCAwKX1mdW5jdGlvbiBlKGEpe2MoYSxmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8hMDp2b2lkIDB9KX1mdW5jdGlvbiBmKGEpe3JldHVybiBkKGEpfHxlKGEpfWZ1bmN0aW9uIGcoYil7aWYoIWIuX191cGdyYWRlZF9fJiZiLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBjPWIuZ2V0QXR0cmlidXRlKCJpcyIpfHxiLmxvY2FsTmFtZSxkPWEucmVnaXN0cnlbY107aWYoZClyZXR1cm4gbG9nRmxhZ3MuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSxsb2dGbGFncy5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSwhMH19ZnVuY3Rpb24gaChhKXtpKGEpLGwoYSkmJmMoYSxmdW5jdGlvbihhKXtpKGEpfSl9ZnVuY3Rpb24gaShhKXsoYS5pbnNlcnRlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmbG9nRmxhZ3MuZG9tKSYmKGxvZ0ZsYWdzLmRvbSYmY29uc29sZS5ncm91cCgiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSksbChhKSYmKGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKSsxLGEuX19pbnNlcnRlZDwxJiYoYS5fX2luc2VydGVkPTEpLGEuX19pbnNlcnRlZD4xP2xvZ0ZsYWdzLmRvbSYmY29uc29sZS53YXJuKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLmluc2VydGVkQ2FsbGJhY2smJihsb2dGbGFncy5kb20mJmNvbnNvbGUubG9nKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lKSxhLmluc2VydGVkQ2FsbGJhY2soKSkpLGxvZ0ZsYWdzLmRvbSYmY29uc29sZS5ncm91cEVuZCgpKX1mdW5jdGlvbiBqKGEpe2soYSksYyhhLGZ1bmN0aW9uKGEpe2soYSl9KX1mdW5jdGlvbiBrKGEpeyhhLnJlbW92ZWRDYWxsYmFja3x8YS5fX3VwZ3JhZGVkX18mJmxvZ0ZsYWdzLmRvbSkmJihsb2dGbGFncy5kb20mJmNvbnNvbGUubG9nKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUpLGwoYSl8fChhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCktMSxhLl9faW5zZXJ0ZWQ+MCYmKGEuX19pbnNlcnRlZD0wKSxhLl9faW5zZXJ0ZWQ8MD9sb2dGbGFncy5kb20mJmNvbnNvbGUud2FybigicmVtb3ZlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLnJlbW92ZWRDYWxsYmFjayYmYS5yZW1vdmVkQ2FsbGJhY2soKSkpfWZ1bmN0aW9uIGwoYSl7Zm9yKHZhciBiPWE7Yjspe2lmKGI9PWEub3duZXJEb2N1bWVudClyZXR1cm4hMDtiPWIucGFyZW50Tm9kZXx8Yi5ob3N0fX1mdW5jdGlvbiBtKGEpe2Eud2Via2l0U2hhZG93Um9vdCYmIWEud2Via2l0U2hhZG93Um9vdC5fX3dhdGNoZWQmJihsb2dGbGFncy5kb20mJmNvbnNvbGUubG9nKCJ3YXRjaGluZyBzaGFkb3ctcm9vdCBmb3I6ICIsYS5sb2NhbE5hbWUpLHIoYS53ZWJraXRTaGFkb3dSb290KSxhLndlYmtpdFNoYWRvd1Jvb3QuX193YXRjaGVkPSEwKX1mdW5jdGlvbiBuKGEpe20oYSksYyhhLGZ1bmN0aW9uKCl7bShhKX0pfWZ1bmN0aW9uIG8oYSl7c3dpdGNoKGEubG9jYWxOYW1lKXtjYXNlInN0eWxlIjpjYXNlInNjcmlwdCI6Y2FzZSJ0ZW1wbGF0ZSI6Y2FzZSB2b2lkIDA6cmV0dXJuITB9fWZ1bmN0aW9uIHAoYSl7aWYobG9nRmxhZ3MuZG9tKXt2YXIgYj1hWzBdO2lmKGImJiJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMmJmIuYWRkZWROb2Rlcyl7Zm9yKHZhciBjPWIuYWRkZWROb2Rlc1swXTtjJiZjIT09ZG9jdW1lbnQmJiFjLmhvc3Q7KWM9Yy5wYXJlbnROb2RlO3ZhciBkPWMmJihjLlVSTHx8Yy5fVVJMfHxjLmhvc3QmJmMuaG9zdC5sb2NhbE5hbWUpfHwiIjtkPWQuc3BsaXQoIi8/Iikuc2hpZnQoKS5zcGxpdCgiLyIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoIm11dGF0aW9ucyAoJWQpIFslc10iLGEubGVuZ3RoLGR8fCIiKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7ImNoaWxkTGlzdCI9PT1hLnR5cGUmJih2KGEuYWRkZWROb2RlcyxmdW5jdGlvbihhKXtvKGEpfHxmKGEpfSksdihhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXtvKGEpfHxqKGEpfSkpfSksbG9nRmxhZ3MuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gcSgpe3AodS50YWtlUmVjb3JkcygpKX1mdW5jdGlvbiByKGEpe3Uub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfWZ1bmN0aW9uIHMoYSl7cihhKX1mdW5jdGlvbiB0KGEpe2xvZ0ZsYWdzLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZURvY3VtZW50OiAiLChhLlVSTHx8YS5fVVJMfHwiIikuc3BsaXQoIi8iKS5wb3AoKSksZihhKSxsb2dGbGFncy5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKX12YXIgdT1uZXcgTXV0YXRpb25PYnNlcnZlcihwKSx2PUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS53YXRjaFNoYWRvdz1tLGEud2F0Y2hBbGxTaGFkb3dzPW4sYS51cGdyYWRlQWxsPWYsYS51cGdyYWRlU3VidHJlZT1lLGEub2JzZXJ2ZURvY3VtZW50PXMsYS51cGdyYWRlRG9jdW1lbnQ9dCxhLnRha2VSZWNvcmRzPXF9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oKXtmdW5jdGlvbiBwYXJzZUVsZW1lbnRFbGVtZW50KGEpe3ZhciBiPXtuYW1lOiIiLCJleHRlbmRzIjpudWxsfTt0YWtlQXR0cmlidXRlcyhhLGIpO3ZhciBjPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihiLmV4dGVuZHMpe3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYi5leHRlbmRzKTtjPWQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZCl9Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjKSxhLm9wdGlvbnM9Yjt2YXIgZT1hLnF1ZXJ5U2VsZWN0b3IoJ3NjcmlwdDpub3QoW3R5cGVdKSxzY3JpcHRbdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0sc2NyaXB0cycpO2UmJmV4ZWN1dGVDb21wb25lbnRTY3JpcHQoZS50ZXh0Q29udGVudCxhLGIubmFtZSk7dmFyIGY9ZG9jdW1lbnQucmVnaXN0ZXIoYi5uYW1lLGIpO2EuY3Rvcj1mO3ZhciBnPWEuZ2V0QXR0cmlidXRlKCJjb25zdHJ1Y3RvciIpO2cmJih3aW5kb3dbZ109Zil9ZnVuY3Rpb24gdGFrZUF0dHJpYnV0ZXMoYSxiKXtmb3IodmFyIGMgaW4gYil7dmFyIGQ9YS5hdHRyaWJ1dGVzW2NdO2QmJihiW2NdPWQudmFsdWUpfX1mdW5jdGlvbiBleGVjdXRlQ29tcG9uZW50U2NyaXB0KGluU2NyaXB0LGluQ29udGV4dCxpbk5hbWUpe2NvbnRleHQ9aW5Db250ZXh0O3ZhciBvd25lcj1jb250ZXh0Lm93bmVyRG9jdW1lbnQsdXJsPW93bmVyLl9VUkx8fG93bmVyLlVSTHx8b3duZXIuaW1wbCYmKG93bmVyLmltcGwuX1VSTHx8b3duZXIuaW1wbC5VUkwpLG1hdGNoPXVybC5tYXRjaCgvLipcLyhbXi5dKilbLl0/LiokLyk7aWYobWF0Y2gpe3ZhciBuYW1lPW1hdGNoWzFdO3VybCs9bmFtZSE9aW5OYW1lPyI6Iitpbk5hbWU6IiJ9dmFyIGNvZGU9Il9fY29tcG9uZW50U2NyaXB0KCciK2luTmFtZSsiJywgZnVuY3Rpb24oKXsiK2luU2NyaXB0KyJ9KTsiKyJcbi8vIyBzb3VyY2VVUkw9Iit1cmwrIlxuIjtldmFsKGNvZGUpfWZ1bmN0aW9uIG1peGluKGEsYil7YT1hfHx7fTt0cnl7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXt2YXIgZD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYyk7ZCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxkKX0pfWNhdGNoKGMpe31yZXR1cm4gYX12YXIgSFRNTEVsZW1lbnRFbGVtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlZ2lzdGVyPUhUTUxFbGVtZW50RWxlbWVudC5wcm90b3R5cGUucmVnaXN0ZXIscGFyc2VFbGVtZW50RWxlbWVudChhKSxhfTtIVE1MRWxlbWVudEVsZW1lbnQucHJvdG90eXBlPXtyZWdpc3RlcjpmdW5jdGlvbihhKXthJiYodGhpcy5vcHRpb25zLmxpZmVjeWNsZT1hLmxpZmVjeWNsZSxhLnByb3RvdHlwZSYmbWl4aW4odGhpcy5vcHRpb25zLnByb3RvdHlwZSxhLnByb3RvdHlwZSkpfX07dmFyIGNvbnRleHQ7d2luZG93Ll9fY29tcG9uZW50U2NyaXB0PWZ1bmN0aW9uKGEsYil7Yi5jYWxsKGNvbnRleHQpfSx3aW5kb3cuSFRNTEVsZW1lbnRFbGVtZW50PUhUTUxFbGVtZW50RWxlbWVudH0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWJ9dmFyIGI9d2luZG93LkhUTUxJbXBvcnRzP0hUTUxJbXBvcnRzLklNUE9SVF9MSU5LX1RZUEU6Im5vbmUiLGM9e3NlbGVjdG9yczpbImxpbmtbcmVsPSIrYisiXSIsImVsZW1lbnQiXSxtYXA6e2xpbms6InBhcnNlTGluayIsZWxlbWVudDoicGFyc2VFbGVtZW50In0scGFyc2U6ZnVuY3Rpb24oYSl7aWYoIWEuX19wYXJzZWQpe2EuX19wYXJzZWQ9ITA7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGMuc2VsZWN0b3JzKTtkKGIsZnVuY3Rpb24oYSl7Y1tjLm1hcFthLmxvY2FsTmFtZV1dKGEpfSksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGEpLEN1c3RvbUVsZW1lbnRzLm9ic2VydmVEb2N1bWVudChhKX19LHBhcnNlTGluazpmdW5jdGlvbihiKXthKGIpJiZ0aGlzLnBhcnNlSW1wb3J0KGIpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXthLmNvbnRlbnQmJmMucGFyc2UoYS5jb250ZW50KX0scGFyc2VFbGVtZW50OmZ1bmN0aW9uKGEpe25ldyBIVE1MRWxlbWVudEVsZW1lbnQoYSl9fSxkPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7Q3VzdG9tRWxlbWVudHMucGFyc2VyPWN9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7c2V0VGltZW91dChmdW5jdGlvbigpe0N1c3RvbUVsZW1lbnRzLnBhcnNlci5wYXJzZShkb2N1bWVudCksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy5yZWFkeT0hMCxDdXN0b21FbGVtZW50cy5yZWFkeVRpbWU9RGF0ZS5ub3coKSx3aW5kb3cuSFRNTEltcG9ydHMmJihDdXN0b21FbGVtZW50cy5lbGFwc2VkPUN1c3RvbUVsZW1lbnRzLnJlYWR5VGltZS1IVE1MSW1wb3J0cy5yZWFkeVRpbWUpLGRvY3VtZW50LmJvZHkuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoIldlYkNvbXBvbmVudHNSZWFkeSIse2J1YmJsZXM6ITB9KSl9LDApfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYi5pbml0RXZlbnQoYSwhMCwhMCksYn0pLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlKWEoKTtlbHNle3ZhciBiPXdpbmRvdy5IVE1MSW1wb3J0cz8iSFRNTEltcG9ydHNMb2FkZWQiOiJET01Db250ZW50TG9hZGVkIjt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihiLGEpfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtiLnRleHRDb250ZW50PSJlbGVtZW50IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2lmKGMuaW5zZXJ0QmVmb3JlKGIsYy5maXJzdENoaWxkKSx3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe0N1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93PWEsQ3VzdG9tRWxlbWVudHMud2F0Y2hBbGxTaGFkb3dzPWE7dmFyIGQ9WyJ1cGdyYWRlQWxsIiwidXBncmFkZVN1YnRyZWUiLCJvYnNlcnZlRG9jdW1lbnQiLCJ1cGdyYWRlRG9jdW1lbnQiXSxlPXt9O2QuZm9yRWFjaChmdW5jdGlvbihhKXtlW2FdPUN1c3RvbUVsZW1lbnRzW2FdfSksZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe0N1c3RvbUVsZW1lbnRzW2FdPWZ1bmN0aW9uKGIpe3JldHVybiBlW2FdKHdyYXAoYikpfX0pfX0oKSxmdW5jdGlvbihhKXthPWF8fHt9O3ZhciBiPXtzaGFkb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS5zaGFkb3dSb290fHxhLndlYmtpdFNoYWRvd1Jvb3Q6dm9pZCAwfSxjYW5UYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJkJvb2xlYW4oYS5lbGVtZW50RnJvbVBvaW50KX0sdGFyZ2V0aW5nU2hhZG93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2hhZG93KGEpO3JldHVybiB0aGlzLmNhblRhcmdldChiKT9iOnZvaWQgMH0sb2xkZXJTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoIWIpe3ZhciBjPWEucXVlcnlTZWxlY3Rvcigic2hhZG93Iik7YyYmKGI9Yy5vbGRlclNoYWRvd1Jvb3QpfXJldHVybiBifSxhbGxTaGFkb3dzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPXRoaXMuc2hhZG93KGEpO2M7KWIucHVzaChjKSxjPXRoaXMub2xkZXJTaGFkb3coYyk7cmV0dXJuIGJ9LHNlYXJjaFJvb3Q6ZnVuY3Rpb24oYSxiLGMpe2lmKGEpe3ZhciBkLGUsZj1hLmVsZW1lbnRGcm9tUG9pbnQoYixjKTtmb3IoZT10aGlzLnRhcmdldGluZ1NoYWRvdyhmKTtlOyl7aWYoZD1lLmVsZW1lbnRGcm9tUG9pbnQoYixjKSl7dmFyIGc9dGhpcy50YXJnZXRpbmdTaGFkb3coZCk7cmV0dXJuIHRoaXMuc2VhcmNoUm9vdChnLGIsYyl8fGR9ZT10aGlzLm9sZGVyU2hhZG93KGUpfXJldHVybiBmfX0sb3duZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWE7Yi5wYXJlbnROb2RlOyliPWIucGFyZW50Tm9kZTtyZXR1cm4gYn0sZmluZFRhcmdldDpmdW5jdGlvbihhKXt2YXIgYj1hLmNsaWVudFgsYz1hLmNsaWVudFksZD10aGlzLm93bmVyKGEudGFyZ2V0KTtyZXR1cm4gZC5lbGVtZW50RnJvbVBvaW50KGIsYyl8fChkPWRvY3VtZW50KSx0aGlzLnNlYXJjaFJvb3QoZG9jdW1lbnQsYixjKX19O2EudGFyZ2V0RmluZGluZz1iLGEuZmluZFRhcmdldD1iLmZpbmRUYXJnZXQuYmluZChiKSx3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsPWF9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4nW3RvdWNoLWFjdGlvbj0iJythKyciXSd9ZnVuY3Rpb24gYihhKXtyZXR1cm4ieyAtbXMtdG91Y2gtYWN0aW9uOiAiK2ErIjsgdG91Y2gtYWN0aW9uOiAiK2ErIjsgfSJ9dmFyIGM9WyJub25lIiwiYXV0byIsInBhbi14IiwicGFuLXkiLHtydWxlOiJwYW4teCBwYW4teSIsc2VsZWN0b3JzOlsicGFuLXggcGFuLXkiLCJwYW4teSBwYW4teCJdfV0sZD0iIjtjLmZvckVhY2goZnVuY3Rpb24oYyl7ZCs9U3RyaW5nKGMpPT09Yz9hKGMpK2IoYyk6Yy5zZWxlY3RvcnMubWFwKGEpK2IoYy5ydWxlKX0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7ZS50ZXh0Q29udGVudD1kO3ZhciBmPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtmLmluc2VydEJlZm9yZShlLGYuZmlyc3RDaGlsZCl9KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBiPWJ8fHt9LGU9Yi5idXR0b25zO2lmKHZvaWQgMD09PWUpc3dpdGNoKGIud2hpY2gpe2Nhc2UgMTplPTE7YnJlYWs7Y2FzZSAyOmU9NDticmVhaztjYXNlIDM6ZT0yO2JyZWFrO2RlZmF1bHQ6ZT0wfXZhciBmO2lmKGMpZj1uZXcgTW91c2VFdmVudChhLGIpO2Vsc2V7Zj1kb2N1bWVudC5jcmVhdGVFdmVudCgiTW91c2VFdmVudCIpO3ZhciBnPXtidWJibGVzOiExLGNhbmNlbGFibGU6ITEsdmlldzpudWxsLGRldGFpbDpudWxsLHNjcmVlblg6MCxzY3JlZW5ZOjAsY2xpZW50WDowLGNsaWVudFk6MCxjdHJsS2V5OiExLGFsdEtleTohMSxzaGlmdEtleTohMSxtZXRhS2V5OiExLGJ1dHRvbjowLHJlbGF0ZWRUYXJnZXQ6bnVsbH07T2JqZWN0LmtleXMoZykuZm9yRWFjaChmdW5jdGlvbihhKXthIGluIGImJihnW2FdPWJbYV0pfSksZi5pbml0TW91c2VFdmVudChhLGcuYnViYmxlcyxnLmNhbmNlbGFibGUsZy52aWV3LGcuZGV0YWlsLGcuc2NyZWVuWCxnLnNjcmVlblksZy5jbGllbnRYLGcuY2xpZW50WSxnLmN0cmxLZXksZy5hbHRLZXksZy5zaGlmdEtleSxnLm1ldGFLZXksZy5idXR0b24sZy5yZWxhdGVkVGFyZ2V0KX1kfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZiwiYnV0dG9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiBlfSxlbnVtZXJhYmxlOiEwfSk7dmFyIGg9MDtyZXR1cm4gaD1iLnByZXNzdXJlP2IucHJlc3N1cmU6ZT8uNTowLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGYse3BvaW50ZXJJZDp7dmFsdWU6Yi5wb2ludGVySWR8fDAsZW51bWVyYWJsZTohMH0sd2lkdGg6e3ZhbHVlOmIud2lkdGh8fDAsZW51bWVyYWJsZTohMH0saGVpZ2h0Ont2YWx1ZTpiLmhlaWdodHx8MCxlbnVtZXJhYmxlOiEwfSxwcmVzc3VyZTp7dmFsdWU6aCxlbnVtZXJhYmxlOiEwfSx0aWx0WDp7dmFsdWU6Yi50aWx0WHx8MCxlbnVtZXJhYmxlOiEwfSx0aWx0WTp7dmFsdWU6Yi50aWx0WXx8MCxlbnVtZXJhYmxlOiEwfSxwb2ludGVyVHlwZTp7dmFsdWU6Yi5wb2ludGVyVHlwZXx8IiIsZW51bWVyYWJsZTohMH0saHdUaW1lc3RhbXA6e3ZhbHVlOmIuaHdUaW1lc3RhbXB8fDAsZW51bWVyYWJsZTohMH0saXNQcmltYXJ5Ont2YWx1ZTpiLmlzUHJpbWFyeXx8ITEsZW51bWVyYWJsZTohMH19KSxmfXZhciBjPSExLGQ9ITE7dHJ5e3ZhciBlPW5ldyBNb3VzZUV2ZW50KCJjbGljayIse2J1dHRvbnM6MX0pO2M9ITAsZD0xPT09ZS5idXR0b25zfWNhdGNoKGYpe31hLlBvaW50ZXJFdmVudHx8KGEuUG9pbnRlckV2ZW50PWIpfSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLmlkcz1bXSx0aGlzLnBvaW50ZXJzPVtdfWIucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmlkcy5pbmRleE9mKGEpO2M+LTE/dGhpcy5wb2ludGVyc1tjXT1iOih0aGlzLmlkcy5wdXNoKGEpLHRoaXMucG9pbnRlcnMucHVzaChiKSl9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pZHMuaW5kZXhPZihhKT4tMX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pZHMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5pZHMuc3BsaWNlKGIsMSksdGhpcy5wb2ludGVycy5zcGxpY2UoYiwxKSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmlkcy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnBvaW50ZXJzW2JdfSxnZXQgc2l6ZSgpe3JldHVybiB0aGlzLnBvaW50ZXJzLmxlbmd0aH0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmlkcy5sZW5ndGg9MCx0aGlzLnBvaW50ZXJzLmxlbmd0aD0wfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7dGhpcy5pZHMuZm9yRWFjaChmdW5jdGlvbihjLGQpe2EuY2FsbChiLGMsdGhpcy5wb2ludGVyc1tkXSx0aGlzKX0sdGhpcyl9fSxhLlBvaW50ZXJNYXA9d2luZG93Lk1hcCYmTWFwLnByb3RvdHlwZS5mb3JFYWNoP01hcDpifSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIFdlYWtNYXAmJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRmlyZWZveC8iKTwwKWI9V2Vha01hcDtlbHNle3ZhciBjPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxkPU9iamVjdC5oYXNPd25Qcm9wZXJ0eSxlPShuZXcgRGF0ZSkuZ2V0VGltZSgpJTFlOTtiPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoZSsrICsiX18iKX0sYi5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhLGIpe2MoYSx0aGlzLm5hbWUse3ZhbHVlOmIsd3JpdGFibGU6ITB9KX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBkLmNhbGwoYSx0aGlzLm5hbWUpP2FbdGhpcy5uYW1lXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19fWEuU2lkZVRhYmxlPWJ9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPXt0YXJnZXRzOm5ldyBhLlNpZGVUYWJsZSxoYW5kbGVkRXZlbnRzOm5ldyBhLlNpZGVUYWJsZSxwb2ludGVybWFwOm5ldyBhLlBvaW50ZXJNYXAsZXZlbnRNYXA6e30sZXZlbnRTb3VyY2VzOnt9LGV2ZW50U291cmNlTGlzdDpbXSxyZWdpc3RlclNvdXJjZTpmdW5jdGlvbihhLGIpe3ZhciBjPWIsZD1jLmV2ZW50cztkJiYoZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2NbYV0mJih0aGlzLmV2ZW50TWFwW2FdPWNbYV0uYmluZChjKSl9LHRoaXMpLHRoaXMuZXZlbnRTb3VyY2VzW2FdPWMsdGhpcy5ldmVudFNvdXJjZUxpc3QucHVzaChjKSl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMuZXZlbnRTb3VyY2VMaXN0Lmxlbmd0aCxkPTA7Yz5kJiYoYj10aGlzLmV2ZW50U291cmNlTGlzdFtkXSk7ZCsrKWIucmVnaXN0ZXIuY2FsbChiLGEpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMuZXZlbnRTb3VyY2VMaXN0Lmxlbmd0aCxkPTA7Yz5kJiYoYj10aGlzLmV2ZW50U291cmNlTGlzdFtkXSk7ZCsrKWIudW5yZWdpc3Rlci5jYWxsKGIsYSl9LGRvd246ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJkb3duIixhKX0sbW92ZTpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcm1vdmUiLGEpfSx1cDpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcnVwIixhKX0sZW50ZXI6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSExLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyZW50ZXIiLGEpfSxsZWF2ZTpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITEsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJsZWF2ZSIsYSl9LG92ZXI6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSEwLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyb3ZlciIsYSl9LG91dDpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITAsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJvdXQiLGEpfSxjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJjYW5jZWwiLGEpfSxsZWF2ZU91dDpmdW5jdGlvbihhKXthLnRhcmdldC5jb250YWlucyhhLnJlbGF0ZWRUYXJnZXQpfHx0aGlzLmxlYXZlKGEpLHRoaXMub3V0KGEpfSxlbnRlck92ZXI6ZnVuY3Rpb24oYSl7YS50YXJnZXQuY29udGFpbnMoYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5lbnRlcihhKSx0aGlzLm92ZXIoYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGI9YS50eXBlLGM9dGhpcy5ldmVudE1hcCYmdGhpcy5ldmVudE1hcFtiXTtjJiZjKGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxsaXN0ZW46ZnVuY3Rpb24oYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5hZGRFdmVudChhLGIpfSx0aGlzKX0sdW5saXN0ZW46ZnVuY3Rpb24oYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5yZW1vdmVFdmVudChhLGIpfSx0aGlzKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYSxiKXthLmFkZEV2ZW50TGlzdGVuZXIoYix0aGlzLmJvdW5kSGFuZGxlcil9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGEsYil7YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxtYWtlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgUG9pbnRlckV2ZW50KGEsYik7cmV0dXJuIHRoaXMudGFyZ2V0cy5zZXQoYyx0aGlzLnRhcmdldHMuZ2V0KGIpfHxiLnRhcmdldCksY30sZmlyZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tYWtlRXZlbnQoYSxiKTtyZXR1cm4gdGhpcy5kaXNwYXRjaEV2ZW50KGMpfSxjbG9uZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gYn0sZ2V0VGFyZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNhcHR1cmVJbmZvJiZ0aGlzLmNhcHR1cmVJbmZvLmlkPT09YS5wb2ludGVySWQ/dGhpcy5jYXB0dXJlSW5mby50YXJnZXQ6dGhpcy50YXJnZXRzLmdldChhKX0sc2V0Q2FwdHVyZTpmdW5jdGlvbihhLGIpe3RoaXMuY2FwdHVyZUluZm8mJnRoaXMucmVsZWFzZUNhcHR1cmUodGhpcy5jYXB0dXJlSW5mby5pZCksdGhpcy5jYXB0dXJlSW5mbz17aWQ6YSx0YXJnZXQ6Yn07dmFyIGM9bmV3IFBvaW50ZXJFdmVudCgiZ290cG9pbnRlcmNhcHR1cmUiLHtidWJibGVzOiEwfSk7dGhpcy5pbXBsaWNpdFJlbGVhc2U9dGhpcy5yZWxlYXNlQ2FwdHVyZS5iaW5kKHRoaXMsYSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIix0aGlzLmltcGxpY2l0UmVsZWFzZSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmNhbmNlbCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLHRoaXMudGFyZ2V0cy5zZXQoYyxiKSx0aGlzLmFzeW5jRGlzcGF0Y2hFdmVudChjKX0scmVsZWFzZUNhcHR1cmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5jYXB0dXJlSW5mbyYmdGhpcy5jYXB0dXJlSW5mby5pZD09PWEpe3ZhciBiPW5ldyBQb2ludGVyRXZlbnQoImxvc3Rwb2ludGVyY2FwdHVyZSIse2J1YmJsZXM6ITB9KSxjPXRoaXMuY2FwdHVyZUluZm8udGFyZ2V0O3RoaXMuY2FwdHVyZUluZm89bnVsbCxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyY2FuY2VsIix0aGlzLmltcGxpY2l0UmVsZWFzZSksdGhpcy50YXJnZXRzLnNldChiLGMpLHRoaXMuYXN5bmNEaXNwYXRjaEV2ZW50KGIpfX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFRhcmdldChhKTtyZXR1cm4gYj9iLmRpc3BhdGNoRXZlbnQoYSk6dm9pZCAwfSxhc3luY0Rpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSl7c2V0VGltZW91dCh0aGlzLmRpc3BhdGNoRXZlbnQuYmluZCh0aGlzLGEpLDApfX07Yi5ib3VuZEhhbmRsZXI9Yi5ldmVudEhhbmRsZXIuYmluZChiKSxhLmRpc3BhdGNoZXI9YixhLnJlZ2lzdGVyPWIucmVnaXN0ZXIuYmluZChiKSxhLnVucmVnaXN0ZXI9Yi51bnJlZ2lzdGVyLmJpbmQoYil9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGMsZCl7dGhpcy5hZGRDYWxsYmFjaz1hLmJpbmQoZCksdGhpcy5yZW1vdmVDYWxsYmFjaz1iLmJpbmQoZCksdGhpcy5jaGFuZ2VkQ2FsbGJhY2s9Yy5iaW5kKGQpLGcmJih0aGlzLm9ic2VydmVyPW5ldyBnKHRoaXMubXV0YXRpb25XYXRjaGVyLmJpbmQodGhpcykpKX12YXIgYz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGQ9QXJyYXkucHJvdG90eXBlLm1hcC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLm1hcCksZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5zbGljZSksZj1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZmlsdGVyKSxnPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixoPSJbdG91Y2gtYWN0aW9uXSIsaT17c3VidHJlZTohMCxjaGlsZExpc3Q6ITAsYXR0cmlidXRlczohMCxhdHRyaWJ1dGVPbGRWYWx1ZTohMCxhdHRyaWJ1dGVGaWx0ZXI6WyJ0b3VjaC1hY3Rpb24iXX07Yi5wcm90b3R5cGU9e3dhdGNoU3VidHJlZTpmdW5jdGlvbihiKXthLnRhcmdldEZpbmRpbmcuY2FuVGFyZ2V0KGIpJiZ0aGlzLm9ic2VydmVyLm9ic2VydmUoYixpKX0sZW5hYmxlT25TdWJ0cmVlOmZ1bmN0aW9uKGEpe3RoaXMud2F0Y2hTdWJ0cmVlKGEpLGE9PT1kb2N1bWVudCYmImNvbXBsZXRlIiE9PWRvY3VtZW50LnJlYWR5U3RhdGU/dGhpcy5pbnN0YWxsT25Mb2FkKCk6dGhpcy5pbnN0YWxsTmV3U3VidHJlZShhKX0saW5zdGFsbE5ld1N1YnRyZWU6ZnVuY3Rpb24oYSl7Yyh0aGlzLmZpbmRFbGVtZW50cyhhKSx0aGlzLmFkZEVsZW1lbnQsdGhpcyl9LGZpbmRFbGVtZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChoKTpbXX0scmVtb3ZlRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUNhbGxiYWNrKGEpfSxhZGRFbGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMuYWRkQ2FsbGJhY2soYSl9LGVsZW1lbnRDaGFuZ2VkOmZ1bmN0aW9uKGEsYil7dGhpcy5jaGFuZ2VkQ2FsbGJhY2soYSxiKX0sY29uY2F0TGlzdHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5jb25jYXQoZShiKSl9LGluc3RhbGxPbkxvYWQ6ZnVuY3Rpb24oKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIix0aGlzLmluc3RhbGxOZXdTdWJ0cmVlLmJpbmQodGhpcyxkb2N1bWVudCkpfSxpc0VsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERX0sZmxhdHRlbk11dGF0aW9uVHJlZTpmdW5jdGlvbihhKXt2YXIgYj1kKGEsdGhpcy5maW5kRWxlbWVudHMsdGhpcyk7cmV0dXJuIGIucHVzaChmKGEsdGhpcy5pc0VsZW1lbnQpKSxiLnJlZHVjZSh0aGlzLmNvbmNhdExpc3RzLFtdKX0sbXV0YXRpb25XYXRjaGVyOmZ1bmN0aW9uKGEpe2EuZm9yRWFjaCh0aGlzLm11dGF0aW9uSGFuZGxlcix0aGlzKX0sbXV0YXRpb25IYW5kbGVyOmZ1bmN0aW9uKGEpe2lmKCJjaGlsZExpc3QiPT09YS50eXBlKXt2YXIgYj10aGlzLmZsYXR0ZW5NdXRhdGlvblRyZWUoYS5hZGRlZE5vZGVzKTtiLmZvckVhY2godGhpcy5hZGRFbGVtZW50LHRoaXMpO3ZhciBjPXRoaXMuZmxhdHRlbk11dGF0aW9uVHJlZShhLnJlbW92ZWROb2Rlcyk7Yy5mb3JFYWNoKHRoaXMucmVtb3ZlRWxlbWVudCx0aGlzKX1lbHNlImF0dHJpYnV0ZXMiPT09YS50eXBlJiZ0aGlzLmVsZW1lbnRDaGFuZ2VkKGEudGFyZ2V0LGEub2xkVmFsdWUpfX0sZ3x8KGIucHJvdG90eXBlLndhdGNoU3VidHJlZT1mdW5jdGlvbigpe2NvbnNvbGUud2FybigiUG9pbnRlckV2ZW50c1BvbHlmaWxsOiBNdXRhdGlvbk9ic2VydmVycyBub3QgZm91bmQsIHRvdWNoLWFjdGlvbiB3aWxsIG5vdCBiZSBkeW5hbWljYWxseSBkZXRlY3RlZCIpfSksYS5JbnN0YWxsZXI9Yn0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9MjUsZT17UE9JTlRFUl9JRDoxLFBPSU5URVJfVFlQRToibW91c2UiLGV2ZW50czpbIm1vdXNlZG93biIsIm1vdXNlbW92ZSIsIm1vdXNldXAiLCJtb3VzZW92ZXIiLCJtb3VzZW91dCJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LGxhc3RUb3VjaGVzOltdLGlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2g6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5sYXN0VG91Y2hlcyxlPWEuY2xpZW50WCxmPWEuY2xpZW50WSxnPTAsaD1jLmxlbmd0aDtoPmcmJihiPWNbZ10pO2crKyl7dmFyIGk9TWF0aC5hYnMoZS1iLngpLGo9TWF0aC5hYnMoZi1iLnkpO2lmKGQ+PWkmJmQ+PWopcmV0dXJuITB9fSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5jbG9uZUV2ZW50KGEpO3JldHVybiBjLnBvaW50ZXJJZD10aGlzLlBPSU5URVJfSUQsYy5pc1ByaW1hcnk9ITAsYy5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRSxjfSxtb3VzZWRvd246ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGQ9Yy5oYXModGhpcy5QT0lOVEVSX0lEKTtkJiZ0aGlzLmNhbmNlbChhKTt2YXIgZT10aGlzLnByZXBhcmVFdmVudChhKTtjLnNldCh0aGlzLlBPSU5URVJfSUQsYSksYi5kb3duKGUpfX0sbW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubW92ZShjKX19LG1vdXNldXA6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGQ9Yy5nZXQodGhpcy5QT0lOVEVSX0lEKTtpZihkJiZkLmJ1dHRvbj09PWEuYnV0dG9uKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChhKTtiLnVwKGUpLHRoaXMuY2xlYW51cE1vdXNlKCl9fX0sbW91c2VvdmVyOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZW50ZXJPdmVyKGMpfX0sbW91c2VvdXQ6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5sZWF2ZU91dChjKX19LGNhbmNlbDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmNhbmNlbChjKSx0aGlzLmNsZWFudXBNb3VzZSgpfSxjbGVhbnVwTW91c2U6ZnVuY3Rpb24oKXtjLmRlbGV0ZSh0aGlzLlBPSU5URVJfSUQpfX07YS5tb3VzZUV2ZW50cz1lfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYixjPWEuZGlzcGF0Y2hlcixkPWEuZmluZFRhcmdldCxlPWEudGFyZ2V0RmluZGluZy5hbGxTaGFkb3dzLmJpbmQoYS50YXJnZXRGaW5kaW5nKSxmPWMucG9pbnRlcm1hcCxnPUFycmF5LnByb3RvdHlwZS5tYXAuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5tYXApLGg9MjUwMCxpPSJ0b3VjaC1hY3Rpb24iLGo9InN0cmluZyI9PXR5cGVvZiBkb2N1bWVudC5oZWFkLnN0eWxlLnRvdWNoQWN0aW9uLGs9e3Njcm9sbFR5cGU6bmV3IGEuU2lkZVRhYmxlLGV2ZW50czpbInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIl0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7aj9jLmxpc3RlbihhLHRoaXMuZXZlbnRzKTpiLmVuYWJsZU9uU3VidHJlZShhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtqJiZjLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxlbGVtZW50QWRkZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoaSksZD10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGIpO2QmJih0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksYy5saXN0ZW4oYSx0aGlzLmV2ZW50cyksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKSxjLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcykpfSxlbGVtZW50UmVtb3ZlZDpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbFR5cGUuZGVsZXRlKGEpLGMudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5kZWxldGUoYSksYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcyl9LGVsZW1lbnRDaGFuZ2VkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoaSksZD10aGlzLnRvdWNoQWN0aW9udG9TY3JvbGxUeXBlKGMpLGY9dGhpcy50b3VjaEFjdGlvblRvU2Nyb2xsVHlwZShiKTtkJiZmPyh0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKX0sdGhpcykpOmY/dGhpcy5lbGVtZW50UmVtb3ZlZChhKTpkJiZ0aGlzLmVsZW1lbnRBZGRlZChhKX0sc2Nyb2xsVHlwZXM6e0VNSVRURVI6Im5vbmUiLFhTQ1JPTExFUjoicGFuLXgiLFlTQ1JPTExFUjoicGFuLXkiLFNDUk9MTEVSOi9eKD86cGFuLXggcGFuLXkpfCg/OnBhbi15IHBhbi14KXxhdXRvJC99LHRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWEsYz10aGlzLnNjcm9sbFR5cGVzO3JldHVybiJub25lIj09PWI/Im5vbmUiOmI9PT1jLlhTQ1JPTExFUj8iWCI6Yj09PWMuWVNDUk9MTEVSPyJZIjpjLlNDUk9MTEVSLmV4ZWMoYik/IlhZIjp2b2lkIDB9LFBPSU5URVJfVFlQRToidG91Y2giLGZpcnN0VG91Y2g6bnVsbCxpc1ByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5maXJzdFRvdWNoPT09YS5pZGVudGlmaWVyfSxzZXRQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7bnVsbD09PXRoaXMuZmlyc3RUb3VjaCYmKHRoaXMuZmlyc3RUb3VjaD1hLmlkZW50aWZpZXIsdGhpcy5maXJzdFhZPXtYOmEuY2xpZW50WCxZOmEuY2xpZW50WX0sdGhpcy5zY3JvbGxpbmc9ITEpfSxyZW1vdmVQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7dGhpcy5pc1ByaW1hcnlUb3VjaChhKSYmKHRoaXMuZmlyc3RUb3VjaD1udWxsLHRoaXMuZmlyc3RYWT1udWxsKX0sdG91Y2hUb1BvaW50ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5jbG9uZUV2ZW50KGEpO3JldHVybiBiLnBvaW50ZXJJZD1hLmlkZW50aWZpZXIrMixiLnRhcmdldD1kKGIpLGIuYnViYmxlcz0hMCxiLmNhbmNlbGFibGU9ITAsYi5idXR0b249MCxiLmJ1dHRvbnM9MSxiLndpZHRoPWEud2Via2l0UmFkaXVzWHx8YS5yYWRpdXNYfHwwLGIuaGVpZ2h0PWEud2Via2l0UmFkaXVzWXx8YS5yYWRpdXNZfHwwLGIucHJlc3N1cmU9YS53ZWJraXRGb3JjZXx8YS5mb3JjZXx8LjUsYi5pc1ByaW1hcnk9dGhpcy5pc1ByaW1hcnlUb3VjaChhKSxiLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFLGJ9LHByb2Nlc3NUb3VjaGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5jaGFuZ2VkVG91Y2hlcyxkPWcoYyx0aGlzLnRvdWNoVG9Qb2ludGVyLHRoaXMpO2QuZm9yRWFjaChiLHRoaXMpfSxzaG91bGRTY3JvbGw6ZnVuY3Rpb24oYSl7aWYodGhpcy5maXJzdFhZKXt2YXIgYixjPXRoaXMuc2Nyb2xsVHlwZS5nZXQoYS5jdXJyZW50VGFyZ2V0KTtpZigibm9uZSI9PT1jKWI9ITE7ZWxzZSBpZigiWFkiPT09YyliPSEwO2Vsc2V7dmFyIGQ9YS5jaGFuZ2VkVG91Y2hlc1swXSxlPWMsZj0iWSI9PT1jPyJYIjoiWSIsZz1NYXRoLmFicyhkWyJjbGllbnQiK2VdLXRoaXMuZmlyc3RYWVtlXSksaD1NYXRoLmFicyhkWyJjbGllbnQiK2ZdLXRoaXMuZmlyc3RYWVtmXSk7Yj1nPj1ofXJldHVybiB0aGlzLmZpcnN0WFk9bnVsbCxifX0sZmluZFRvdWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGM9YVtkXSk7ZCsrKWlmKGMuaWRlbnRpZmllcj09PWIpcmV0dXJuITB9LHZhY3V1bVRvdWNoZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YS50b3VjaGVzO2lmKGYuc2l6ZT49Yi5sZW5ndGgpe3ZhciBjPVtdO2YuZm9yRWFjaChmdW5jdGlvbihhLGQpe2lmKDEhPT1hJiYhdGhpcy5maW5kVG91Y2goYixhLTIpKXt2YXIgZT1kLm91dDtjLnB1c2godGhpcy50b3VjaFRvUG9pbnRlcihlKSl9fSx0aGlzKSxjLmZvckVhY2godGhpcy5jYW5jZWxPdXQsdGhpcyl9fSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMudmFjdXVtVG91Y2hlcyhhKSx0aGlzLnNldFByaW1hcnlUb3VjaChhLmNoYW5nZWRUb3VjaGVzWzBdKSx0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnNjcm9sbGluZ3x8dGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMub3ZlckRvd24pfSxvdmVyRG93bjpmdW5jdGlvbihhKXtmLnNldChhLnBvaW50ZXJJZCx7dGFyZ2V0OmEudGFyZ2V0LG91dDphLG91dFRhcmdldDphLnRhcmdldH0pLGMub3ZlcihhKSxjLmRvd24oYSl9LHRvdWNobW92ZTpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbGluZ3x8KHRoaXMuc2hvdWxkU2Nyb2xsKGEpPyh0aGlzLnNjcm9sbGluZz0hMCx0aGlzLnRvdWNoY2FuY2VsKGEpKTooYS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLm1vdmVPdmVyT3V0KSkpfSxtb3ZlT3Zlck91dDpmdW5jdGlvbihhKXt2YXIgYj1hLGQ9Zi5nZXQoYi5wb2ludGVySWQpO2lmKGQpe3ZhciBlPWQub3V0LGc9ZC5vdXRUYXJnZXQ7Yy5tb3ZlKGIpLGUmJmchPT1iLnRhcmdldCYmKGUucmVsYXRlZFRhcmdldD1iLnRhcmdldCxiLnJlbGF0ZWRUYXJnZXQ9ZyxlLnRhcmdldD1nLGIudGFyZ2V0PyhjLmxlYXZlT3V0KGUpLGMuZW50ZXJPdmVyKGIpKTooYi50YXJnZXQ9ZyxiLnJlbGF0ZWRUYXJnZXQ9bnVsbCx0aGlzLmNhbmNlbE91dChiKSkpLGQub3V0PWIsZC5vdXRUYXJnZXQ9Yi50YXJnZXR9fSx0b3VjaGVuZDpmdW5jdGlvbihhKXt0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy51cE91dCl9LHVwT3V0OmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsaW5nfHwoYy51cChhKSxjLm91dChhKSksdGhpcy5jbGVhblVwUG9pbnRlcihhKX0sdG91Y2hjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMuY2FuY2VsT3V0KX0sY2FuY2VsT3V0OmZ1bmN0aW9uKGEpe2MuY2FuY2VsKGEpLGMub3V0KGEpLHRoaXMuY2xlYW5VcFBvaW50ZXIoYSl9LGNsZWFuVXBQb2ludGVyOmZ1bmN0aW9uKGEpe2YuZGVsZXRlKGEucG9pbnRlcklkKSx0aGlzLnJlbW92ZVByaW1hcnlUb3VjaChhKX0sZGVkdXBTeW50aE1vdXNlOmZ1bmN0aW9uKGIpe3ZhciBjPWEubW91c2VFdmVudHMubGFzdFRvdWNoZXMsZD1iLmNoYW5nZWRUb3VjaGVzWzBdO2lmKHRoaXMuaXNQcmltYXJ5VG91Y2goZCkpe3ZhciBlPXt4OmQuY2xpZW50WCx5OmQuY2xpZW50WX07Yy5wdXNoKGUpO3ZhciBmPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5pbmRleE9mKGIpO2M+LTEmJmEuc3BsaWNlKGMsMSl9LmJpbmQobnVsbCxjLGUpO3NldFRpbWVvdXQoZixoKX19fTtqfHwoYj1uZXcgYS5JbnN0YWxsZXIoay5lbGVtZW50QWRkZWQsay5lbGVtZW50UmVtb3ZlZCxrLmVsZW1lbnRDaGFuZ2VkLGspKSxhLnRvdWNoRXZlbnRzPWt9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPWIucG9pbnRlcm1hcCxkPXdpbmRvdy5NU1BvaW50ZXJFdmVudCYmIm51bWJlciI9PXR5cGVvZiB3aW5kb3cuTVNQb2ludGVyRXZlbnQuTVNQT0lOVEVSX1RZUEVfTU9VU0UsZT17ZXZlbnRzOlsiTVNQb2ludGVyRG93biIsIk1TUG9pbnRlck1vdmUiLCJNU1BvaW50ZXJVcCIsIk1TUG9pbnRlck91dCIsIk1TUG9pbnRlck92ZXIiLCJNU1BvaW50ZXJDYW5jZWwiLCJNU0dvdFBvaW50ZXJDYXB0dXJlIiwiTVNMb3N0UG9pbnRlckNhcHR1cmUiXSxyZWdpc3RlcjpmdW5jdGlvbihhKXtiLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtiLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxQT0lOVEVSX1RZUEVTOlsiIiwidW5hdmFpbGFibGUiLCJ0b3VjaCIsInBlbiIsIm1vdXNlIl0scHJlcGFyZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBjPWE7cmV0dXJuIGQmJihjPWIuY2xvbmVFdmVudChhKSxjLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFU1thLnBvaW50ZXJUeXBlXSksY30sY2xlYW51cDpmdW5jdGlvbihhKXtjLmRlbGV0ZShhKX0sTVNQb2ludGVyRG93bjpmdW5jdGlvbihhKXtjLnNldChhLnBvaW50ZXJJZCxhKTt2YXIgZD10aGlzLnByZXBhcmVFdmVudChhKTtiLmRvd24oZCl9LE1TUG9pbnRlck1vdmU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5tb3ZlKGMpfSxNU1BvaW50ZXJVcDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLnVwKGMpLHRoaXMuY2xlYW51cChhLnBvaW50ZXJJZCl9LE1TUG9pbnRlck91dDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmxlYXZlT3V0KGMpfSxNU1BvaW50ZXJPdmVyOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZW50ZXJPdmVyKGMpfSxNU1BvaW50ZXJDYW5jZWw6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5jYW5jZWwoYyksdGhpcy5jbGVhbnVwKGEucG9pbnRlcklkKX0sTVNMb3N0UG9pbnRlckNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5tYWtlRXZlbnQoImxvc3Rwb2ludGVyY2FwdHVyZSIsYSk7Yi5kaXNwYXRjaEV2ZW50KGMpfSxNU0dvdFBvaW50ZXJDYXB0dXJlOmZ1bmN0aW9uKGEpe3ZhciBjPWIubWFrZUV2ZW50KCJnb3Rwb2ludGVyY2FwdHVyZSIsYSk7Yi5kaXNwYXRjaEV2ZW50KGMpfX07YS5tc0V2ZW50cz1lfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXI7aWYodm9pZCAwPT09d2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCl7aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5uYXZpZ2F0b3IsInBvaW50ZXJFbmFibGVkIix7dmFsdWU6ITAsZW51bWVyYWJsZTohMH0pLHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCl7dmFyIGM9d2luZG93Lm5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cubmF2aWdhdG9yLCJtYXhUb3VjaFBvaW50cyIse3ZhbHVlOmMsZW51bWVyYWJsZTohMH0pLGIucmVnaXN0ZXJTb3VyY2UoIm1zIixhLm1zRXZlbnRzKX1lbHNlIGIucmVnaXN0ZXJTb3VyY2UoIm1vdXNlIixhLm1vdXNlRXZlbnRzKSx2b2lkIDAhPT13aW5kb3cub250b3VjaHN0YXJ0JiZiLnJlZ2lzdGVyU291cmNlKCJ0b3VjaCIsYS50b3VjaEV2ZW50cyk7Yi5yZWdpc3Rlcihkb2N1bWVudCl9fSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2lmKCFlLnBvaW50ZXJtYXAuaGFzKGEpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZFBvaW50ZXJJZCIpfXZhciBjLGQsZT1hLmRpc3BhdGNoZXIsZj13aW5kb3cubmF2aWdhdG9yO2YubXNQb2ludGVyRW5hYmxlZD8oYz1mdW5jdGlvbihhKXtiKGEpLHRoaXMubXNTZXRQb2ludGVyQ2FwdHVyZShhKX0sZD1mdW5jdGlvbihhKXtiKGEpLHRoaXMubXNSZWxlYXNlUG9pbnRlckNhcHR1cmUoYSl9KTooYz1mdW5jdGlvbihhKXtiKGEpLGUuc2V0Q2FwdHVyZShhLHRoaXMpfSxkPWZ1bmN0aW9uKGEpe2IoYSksZS5yZWxlYXNlQ2FwdHVyZShhLHRoaXMpfSksRWxlbWVudC5wcm90b3R5cGUuc2V0UG9pbnRlckNhcHR1cmV8fE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEVsZW1lbnQucHJvdG90eXBlLHtzZXRQb2ludGVyQ2FwdHVyZTp7dmFsdWU6Y30scmVsZWFzZVBvaW50ZXJDYXB0dXJlOnt2YWx1ZTpkfX0pfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxQb2ludGVyR2VzdHVyZUV2ZW50LnByb3RvdHlwZS5wcmV2ZW50VGFwPWZ1bmN0aW9uKCl7dGhpcy50YXBQcmV2ZW50ZWQ9ITB9LGZ1bmN0aW9uKGEpe2E9YXx8e30sYS51dGlscz17TENBOntmaW5kOmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGE7aWYoYS5jb250YWlucyl7aWYoYS5jb250YWlucyhiKSlyZXR1cm4gYTtpZihiLmNvbnRhaW5zKGEpKXJldHVybiBifXZhciBjPXRoaXMuZGVwdGgoYSksZD10aGlzLmRlcHRoKGIpLGU9Yy1kO2ZvcihlPjA/YT10aGlzLndhbGsoYSxlKTpiPXRoaXMud2FsayhiLC1lKTthJiZiJiZhIT09YjspYT10aGlzLndhbGsoYSwxKSxiPXRoaXMud2FsayhiLDEpO3JldHVybiBhfSx3YWxrOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrKylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX0sZGVwdGg6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YTspYisrLGE9YS5wYXJlbnROb2RlO3JldHVybiBifX19LGEuZmluZExDQT1mdW5jdGlvbihiLGMpe3JldHVybiBhLnV0aWxzLkxDQS5maW5kKGIsYyl9LHdpbmRvdy5Qb2ludGVyR2VzdHVyZXM9YX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBXZWFrTWFwJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3gvIik8MCliPVdlYWtNYXA7ZWxzZXt2YXIgYz1PYmplY3QuZGVmaW5lUHJvcGVydHksZD1PYmplY3QuaGFzT3duUHJvcGVydHksZT0obmV3IERhdGUpLmdldFRpbWUoKSUxZTk7Yj1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGUrKyArIl9fIil9LGIucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXtjKGEsdGhpcy5uYW1lLHt2YWx1ZTpiLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gZC5jYWxsKGEsdGhpcy5uYW1lKT9hW3RoaXMubmFtZV06dm9pZCAwfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt0aGlzLnNldChhLHZvaWQgMCl9fX1hLlNpZGVUYWJsZT1ifSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dGhpcy5pZHM9W10sdGhpcy5wb2ludGVycz1bXX1iLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5pZHMuaW5kZXhPZihhKTtjPi0xP3RoaXMucG9pbnRlcnNbY109YjoodGhpcy5pZHMucHVzaChhKSx0aGlzLnBvaW50ZXJzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaWRzLmluZGV4T2YoYSk+LTF9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaWRzLmluZGV4T2YoYSk7Yj4tMSYmKHRoaXMuaWRzLnNwbGljZShiLDEpLHRoaXMucG9pbnRlcnMuc3BsaWNlKGIsMSkpfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pZHMuaW5kZXhPZihhKTtyZXR1cm4gdGhpcy5wb2ludGVyc1tiXX0sZ2V0IHNpemUoKXtyZXR1cm4gdGhpcy5wb2ludGVycy5sZW5ndGh9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5pZHMubGVuZ3RoPTAsdGhpcy5wb2ludGVycy5sZW5ndGg9MH19LHdpbmRvdy5NYXAmJihiPXdpbmRvdy5NYXApLGEuUG9pbnRlck1hcD1ifSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj17aGFuZGxlZEV2ZW50czpuZXcgYS5TaWRlVGFibGUsdGFyZ2V0czpuZXcgYS5TaWRlVGFibGUsaGFuZGxlcnM6e30scmVjb2duaXplcnM6e30sZXZlbnRzOlsicG9pbnRlcmRvd24iLCJwb2ludGVybW92ZSIsInBvaW50ZXJ1cCIsInBvaW50ZXJvdmVyIiwicG9pbnRlcm91dCIsInBvaW50ZXJjYW5jZWwiXSxyZWdpc3RlclJlY29nbml6ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iO3RoaXMucmVjb2duaXplcnNbYV09Yyx0aGlzLmV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKGNbYV0pe3ZhciBiPWNbYV0uYmluZChjKTt0aGlzLmFkZEhhbmRsZXIoYSxiKX19LHRoaXMpfSxhZGRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTt0aGlzLmhhbmRsZXJzW2NdfHwodGhpcy5oYW5kbGVyc1tjXT1bXSksdGhpcy5oYW5kbGVyc1tjXS5wdXNoKGIpfSxyZWdpc3RlclRhcmdldDpmdW5jdGlvbihhKXt0aGlzLmxpc3Rlbih0aGlzLmV2ZW50cyxhKX0sdW5yZWdpc3RlclRhcmdldDpmdW5jdGlvbihhKXt0aGlzLnVubGlzdGVuKHRoaXMuZXZlbnRzLGEpfSxldmVudEhhbmRsZXI6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaGFuZGxlZEV2ZW50cy5nZXQoYSkpe3ZhciBiLGM9YS50eXBlOyhiPXRoaXMuaGFuZGxlcnNbY10pJiZ0aGlzLm1ha2VRdWV1ZShiLGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxtYWtlUXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNsb25lRXZlbnQoYik7c2V0VGltZW91dCh0aGlzLnJ1blF1ZXVlLmJpbmQodGhpcyxhLGMpLDApfSxydW5RdWV1ZTpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBvaW50ZXJJZD1iLnBvaW50ZXJJZDtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspYyhiKTt0aGlzLmN1cnJlbnRQb2ludGVySWQ9MH0sbGlzdGVuOmZ1bmN0aW9uKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuYWRkRXZlbnQoYSx0aGlzLmJvdW5kSGFuZGxlciwhMSxiKX0sdGhpcyl9LHVubGlzdGVuOmZ1bmN0aW9uKGEpe2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUV2ZW50KGEsdGhpcy5ib3VuZEhhbmRsZXIsITEsaW5UYXJnZXQpfSx0aGlzKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRFdmVudExpc3RlbmVyKGEsYixjKX0scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYixjKQp9LG1ha2VFdmVudDpmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgUG9pbnRlckdlc3R1cmVFdmVudChhLGIpfSxjbG9uZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gYn0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fHRoaXMudGFyZ2V0cy5nZXQoYSk7YyYmKGMuZGlzcGF0Y2hFdmVudChhKSxhLnRhcFByZXZlbnRlZCYmdGhpcy5wcmV2ZW50VGFwKHRoaXMuY3VycmVudFBvaW50ZXJJZCkpfSxhc3luY0Rpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudChhLGIpfS5iaW5kKHRoaXMpO3NldFRpbWVvdXQoYywwKX0scHJldmVudFRhcDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJlY29nbml6ZXJzLnRhcDtiJiZiLnByZXZlbnRUYXAoYSl9fTtiLmJvdW5kSGFuZGxlcj1iLmV2ZW50SGFuZGxlci5iaW5kKGIpLGEuZGlzcGF0Y2hlcj1iLGEucmVnaXN0ZXI9ZnVuY3Rpb24oYil7dmFyIGM9d2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbDtjJiZjLnJlZ2lzdGVyKGIpLGEuZGlzcGF0Y2hlci5yZWdpc3RlclRhcmdldChiKX0sYi5yZWdpc3RlclRhcmdldChkb2N1bWVudCl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPXtIT0xEX0RFTEFZOjIwMCxXSUdHTEVfVEhSRVNIT0xEOjE2LGV2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0saGVsZFBvaW50ZXI6bnVsbCxob2xkSm9iOm51bGwscHVsc2U6ZnVuY3Rpb24oKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMuaGVsZFBvaW50ZXIudGltZVN0YW1wLGI9dGhpcy5oZWxkPyJob2xkcHVsc2UiOiJob2xkIjt0aGlzLmZpcmVIb2xkKGIsYSksdGhpcy5oZWxkPSEwfSxjYW5jZWw6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuaG9sZEpvYiksdGhpcy5oZWxkJiZ0aGlzLmZpcmVIb2xkKCJyZWxlYXNlIiksdGhpcy5oZWxkPSExLHRoaXMuaGVsZFBvaW50ZXI9bnVsbCx0aGlzLnRhcmdldD1udWxsLHRoaXMuaG9sZEpvYj1udWxsfSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIXRoaXMuaGVsZFBvaW50ZXImJih0aGlzLmhlbGRQb2ludGVyPWEsdGhpcy50YXJnZXQ9YS50YXJnZXQsdGhpcy5ob2xkSm9iPXNldEludGVydmFsKHRoaXMucHVsc2UuYmluZCh0aGlzKSx0aGlzLkhPTERfREVMQVkpKX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe3RoaXMuaGVsZFBvaW50ZXImJnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkPT09YS5wb2ludGVySWQmJnRoaXMuY2FuY2VsKCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbCgpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkKXt2YXIgYj1hLmNsaWVudFgtdGhpcy5oZWxkUG9pbnRlci5jbGllbnRYLGM9YS5jbGllbnRZLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WTtiKmIrYypjPnRoaXMuV0lHR0xFX1RIUkVTSE9MRCYmdGhpcy5jYW5jZWwoKX19LGZpcmVIb2xkOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9e3BvaW50ZXJUeXBlOnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlclR5cGV9O2MmJihkLmhvbGRUaW1lPWMpO3ZhciBlPWIubWFrZUV2ZW50KGEsZCk7Yi5kaXNwYXRjaEV2ZW50KGUsdGhpcy50YXJnZXQpLGUudGFwUHJldmVudGVkJiZiLnByZXZlbnRUYXAodGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoImhvbGQiLGMpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1uZXcgYS5Qb2ludGVyTWFwLGQ9e2V2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0sV0lHR0xFX1RIUkVTSE9MRDo0LGNsYW1wRGlyOmZ1bmN0aW9uKGEpe3JldHVybiBhPjA/MTotMX0sY2FsY1Bvc2l0aW9uRGVsdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYz0wLGQ9MDtyZXR1cm4gYSYmYiYmKGM9Yi5wYWdlWC1hLnBhZ2VYLGQ9Yi5wYWdlWS1hLnBhZ2VZKSx7eDpjLHk6ZH19LGZpcmVUcmFjazpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCxmPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoZS5kb3duRXZlbnQsYyksZz10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUubGFzdE1vdmVFdmVudCxjKTtnLngmJihlLnhEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLngpKSxnLnkmJihlLnlEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLnkpKTt2YXIgaD17ZHg6Zi54LGR5OmYueSxkZHg6Zy54LGRkeTpnLnksY2xpZW50WDpjLmNsaWVudFgsY2xpZW50WTpjLmNsaWVudFkscGFnZVg6Yy5wYWdlWCxwYWdlWTpjLnBhZ2VZLHNjcmVlblg6Yy5zY3JlZW5YLHNjcmVlblk6Yy5zY3JlZW5ZLHhEaXJlY3Rpb246ZS54RGlyZWN0aW9uLHlEaXJlY3Rpb246ZS55RGlyZWN0aW9uLHRyYWNrSW5mbzplLnRyYWNrSW5mbyxwb2ludGVyVHlwZTpjLnBvaW50ZXJUeXBlfTsidHJhY2tlbmQiPT09YSYmKGguX3JlbGVhc2VUYXJnZXQ9Yy50YXJnZXQpO3ZhciBpPWIubWFrZUV2ZW50KGEsaCk7ZS5sYXN0TW92ZUV2ZW50PWMsYi5kaXNwYXRjaEV2ZW50KGksZS5kb3duVGFyZ2V0KX0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7aWYoYS5pc1ByaW1hcnkmJigibW91c2UiPT09YS5wb2ludGVyVHlwZT8xPT09YS5idXR0b25zOiEwKSl7dmFyIGI9e2Rvd25FdmVudDphLGRvd25UYXJnZXQ6YS50YXJnZXQsdHJhY2tJbmZvOnt9LGxhc3RNb3ZlRXZlbnQ6bnVsbCx4RGlyZWN0aW9uOjAseURpcmVjdGlvbjowLHRyYWNraW5nOiExfTtjLnNldChhLnBvaW50ZXJJZCxiKX19LHBvaW50ZXJtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBiPWMuZ2V0KGEucG9pbnRlcklkKTtpZihiKWlmKGIudHJhY2tpbmcpdGhpcy5maXJlVHJhY2soInRyYWNrIixhLGIpO2Vsc2V7dmFyIGQ9dGhpcy5jYWxjUG9zaXRpb25EZWx0YShiLmRvd25FdmVudCxhKSxlPWQueCpkLngrZC55KmQueTtlPnRoaXMuV0lHR0xFX1RIUkVTSE9MRCYmKGIudHJhY2tpbmc9ITAsdGhpcy5maXJlVHJhY2soInRyYWNrc3RhcnQiLGIuZG93bkV2ZW50LGIpLHRoaXMuZmlyZVRyYWNrKCJ0cmFjayIsYSxiKSl9fSxwb2ludGVydXA6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2ImJihiLnRyYWNraW5nJiZ0aGlzLmZpcmVUcmFjaygidHJhY2tlbmQiLGEsYiksYy5kZWxldGUoYS5wb2ludGVySWQpKX0scG9pbnRlcmNhbmNlbDpmdW5jdGlvbihhKXt0aGlzLnBvaW50ZXJ1cChhKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJ0cmFjayIsZCl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPXtNSU5fVkVMT0NJVFk6LjUsTUFYX1FVRVVFOjQsbW92ZVF1ZXVlOltdLHRhcmdldDpudWxsLHBvaW50ZXJJZDpudWxsLGV2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiF0aGlzLnBvaW50ZXJJZCYmKHRoaXMucG9pbnRlcklkPWEucG9pbnRlcklkLHRoaXMudGFyZ2V0PWEudGFyZ2V0LHRoaXMuYWRkTW92ZShhKSl9LHBvaW50ZXJtb3ZlOmZ1bmN0aW9uKGEpe2EucG9pbnRlcklkPT09dGhpcy5wb2ludGVySWQmJnRoaXMuYWRkTW92ZShhKX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe2EucG9pbnRlcklkPT09dGhpcy5wb2ludGVySWQmJnRoaXMuZmlyZUZsaWNrKGEpLHRoaXMuY2xlYW51cCgpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jbGVhbnVwKCl9LGNsZWFudXA6ZnVuY3Rpb24oKXt0aGlzLm1vdmVRdWV1ZT1bXSx0aGlzLnRhcmdldD1udWxsLHRoaXMucG9pbnRlcklkPW51bGx9LGFkZE1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5tb3ZlUXVldWUubGVuZ3RoPj10aGlzLk1BWF9RVUVVRSYmdGhpcy5tb3ZlUXVldWUuc2hpZnQoKSx0aGlzLm1vdmVRdWV1ZS5wdXNoKGEpfSxmaXJlRmxpY2s6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQsZSxmLGcsaCxpLGo9YSxrPXRoaXMubW92ZVF1ZXVlLmxlbmd0aCxsPTAsbT0wLG49MCxvPTA7az5vJiYoaT10aGlzLm1vdmVRdWV1ZVtvXSk7bysrKWM9ai50aW1lU3RhbXAtaS50aW1lU3RhbXAsZD1qLmNsaWVudFgtaS5jbGllbnRYLGU9ai5jbGllbnRZLWkuY2xpZW50WSxmPWQvYyxnPWUvYyxoPU1hdGguc3FydChmKmYrZypnKSxoPm4mJihsPWYsbT1nLG49aCk7dmFyIHA9TWF0aC5hYnMobCk+TWF0aC5hYnMobSk/IngiOiJ5IixxPXRoaXMuY2FsY0FuZ2xlKGwsbSk7aWYoTWF0aC5hYnMobik+PXRoaXMuTUlOX1ZFTE9DSVRZKXt2YXIgcj1iLm1ha2VFdmVudCgiZmxpY2siLHt4VmVsb2NpdHk6bCx5VmVsb2NpdHk6bSx2ZWxvY2l0eTpuLGFuZ2xlOnEsbWFqb3JBeGlzOnAscG9pbnRlclR5cGU6YS5wb2ludGVyVHlwZX0pO2IuZGlzcGF0Y2hFdmVudChyLHRoaXMudGFyZ2V0KX19LGNhbGNBbmdsZTpmdW5jdGlvbihhLGIpe3JldHVybiAxODAqTWF0aC5hdGFuMihiLGEpL01hdGguUEl9fTtiLnJlZ2lzdGVyUmVjb2duaXplcigiZmxpY2siLGMpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1uZXcgYS5Qb2ludGVyTWFwLGQ9e2V2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiFhLnRhcFByZXZlbnRlZCYmYy5zZXQoYS5wb2ludGVySWQse3RhcmdldDphLnRhcmdldCx4OmEuY2xpZW50WCx5OmEuY2xpZW50WX0pfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2ImJmEudGFwUHJldmVudGVkJiZjLmRlbGV0ZShhLnBvaW50ZXJJZCl9fSxwb2ludGVydXA6ZnVuY3Rpb24oZCl7dmFyIGU9Yy5nZXQoZC5wb2ludGVySWQpO2lmKGUmJiFkLnRhcFByZXZlbnRlZCl7dmFyIGY9YS5maW5kTENBKGUudGFyZ2V0LGQudGFyZ2V0KTtpZihmKXt2YXIgZz1iLm1ha2VFdmVudCgidGFwIix7eDpkLmNsaWVudFgseTpkLmNsaWVudFkscG9pbnRlclR5cGU6ZC5wb2ludGVyVHlwZX0pO2IuZGlzcGF0Y2hFdmVudChnLGYpfX1jLmRlbGV0ZShkLnBvaW50ZXJJZCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oYSl7Yy5kZWxldGUoYS5wb2ludGVySWQpfSxwcmV2ZW50VGFwOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoInRhcCIsZCl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLFBvbHltZXI9e30sZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2EudGV4dENvbnRlbnQ9ImJvZHkge29wYWNpdHk6IDA7fSI7dmFyIGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiV2ViQ29tcG9uZW50c1JlYWR5IixmdW5jdGlvbigpe2RvY3VtZW50LmJvZHkuc3R5bGUud2Via2l0VHJhbnNpdGlvbj0ib3BhY2l0eSAwLjNzIixkb2N1bWVudC5ib2R5LnN0eWxlLm9wYWNpdHk9MX0pfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGM9QXJyYXkucHJvdG90eXBlLmNvbmNhdC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmNvbmNhdCksZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5zbGljZSksZT17aG9zdFJ1bGVSZTovQGhvc3RbXntdKnsoKFtefV0qP3tbXntdKj99W1xzXFNdKj8pKyl9L2dpbSxzZWxlY3RvclJlOi8oW157XSopKHtbXHNcU10qP30pL2dpbSxob3N0RWxlbWVudFJlOi8oLiopKCg/OlwqKXwoPzpcOnNjb3BlKSkoLiopLyxob3N0Rml4YWJsZVJlOi9eWy5cWzpdLyxjc3NDb21tZW50UmU6L1wvXCpbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLy9naW0sY3NzUG9seWZpbGxDb21tZW50UmU6L1wvXCpccypAcG9seWZpbGwgKFteKl0qXCorKFteLypdW14qXSpcKispKlwvKShbXntdKj8pey9naW0sY3NzUHNldWRvUmU6Lzo6KHgtW15cc3ssKF0qKS9naW0sc2VsZWN0b3JSZVN1ZmZpeDoiKFs+XFxzfitbLix7Ol1bXFxzXFxTXSopPyQiLGhvc3RSZTovQGhvc3QvZ2ltLGNhY2hlOnt9LHNoaW1TdHlsaW5nOmZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmYSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTtlLmNhY2hlRGVmaW5pdGlvbihhKSxlLnNoaW1Qb2x5ZmlsbERpcmVjdGl2ZXMoYS5zdHlsZXMsYiksUG9seW1lci5zdHJpY3RQb2x5ZmlsbFN0eWxpbmcmJmUuYXBwbHlTY29wZVRvQ29udGVudChhLnRlbXBsYXRlQ29udGVudCgpLGIpLGUuYXBwbHlTaGltbWluZyhlLnN0eWxlc0ZvckVsZW1lbnQoYSksYil9fSxzaGltU2hhZG93RE9NU3R5bGluZzpmdW5jdGlvbihhLGIpe3dpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmKGUuc2hpbVBvbHlmaWxsRGlyZWN0aXZlcyhhLGIpLGUuYXBwbHlTaGltbWluZyhhLGIpKX0sYXBwbHlTaGltbWluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2hpbUF0SG9zdChhLGIpO2MrPXRoaXMuc2hpbVNjb3BpbmcoYSxiKSx0aGlzLmFkZENzc1RvRG9jdW1lbnQoYyl9LGNhY2hlRGVmaW5pdGlvbjpmdW5jdGlvbihhKXt2YXIgYj1hLmdldEF0dHJpYnV0ZSgibmFtZSIpLGM9YS50ZW1wbGF0ZUNvbnRlbnQoKSxmPWMmJmMucXVlcnlTZWxlY3RvckFsbCgic3R5bGUiKTthLnN0eWxlcz1mP2QoZik6W10sZS5jYWNoZVtiXT1hfSxhcHBseVNjb3BlVG9Db250ZW50OmZ1bmN0aW9uKGEsYyl7YSYmKGIoYS5xdWVyeVNlbGVjdG9yQWxsKCIqIiksZnVuY3Rpb24oYSl7YS5zZXRBdHRyaWJ1dGUoYywiIil9KSxiKGEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKSxmdW5jdGlvbihhKXt0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQodGVtcGxhdGVDb250ZW50KGEpLGMpfSx0aGlzKSl9LHN0eWxlc0ZvckVsZW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdHlsZXMsZT1hLnRlbXBsYXRlQ29udGVudCgpLGY9ZSYmZS5xdWVyeVNlbGVjdG9yKCJzaGFkb3ciKTtpZihmfHxudWxsPT09ZSl7dmFyIGc9dGhpcy5maW5kRXh0ZW5kZWUoYS5nZXRBdHRyaWJ1dGUoIm5hbWUiKSk7aWYoZyl7dmFyIGg9dGhpcy5zdHlsZXNGb3JFbGVtZW50KGcpO2I9YyhkKGgpLGQoYikpfX1yZXR1cm4gYn0sZmluZEV4dGVuZGVlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2FjaGVbYV07cmV0dXJuIGImJnRoaXMuY2FjaGVbYi5nZXRBdHRyaWJ1dGUoImV4dGVuZHMiKV19LHNoaW1Qb2x5ZmlsbERpcmVjdGl2ZXM6ZnVuY3Rpb24oYSxjKXt3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJmEmJmIoYSxmdW5jdGlvbihhKXthLnRleHRDb250ZW50PXRoaXMuY29udmVydFBvbHlmaWxsRGlyZWN0aXZlcyhhLnRleHRDb250ZW50LGMpfSx0aGlzKX0sc2hpbUF0SG9zdDpmdW5jdGlvbihhLGIpe3JldHVybiBhP3RoaXMuY29udmVydEF0SG9zdFN0eWxlcyhhLGIpOnZvaWQgMH0sc2hpbVNjb3Bpbmc6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT90aGlzLmNvbnZlcnRTY29wZWRTdHlsZXMoYSxiKTp2b2lkIDB9LGNvbnZlcnRQb2x5ZmlsbERpcmVjdGl2ZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPSIiLGY9MDtjPXRoaXMuY3NzUG9seWZpbGxDb21tZW50UmUuZXhlYyhhKTspZSs9YS5zdWJzdHJpbmcoZixjLmluZGV4KSxkPWNbMV0uc2xpY2UoMCwtMikucmVwbGFjZSh0aGlzLmhvc3RSZSxiKSxlKz10aGlzLnNjb3BlU2VsZWN0b3IoZCxiKSsieyIsZj10aGlzLmNzc1BvbHlmaWxsQ29tbWVudFJlLmxhc3RJbmRleDtyZXR1cm4gZSs9YS5zdWJzdHJpbmcoZixhLmxlbmd0aCl9LGZpbmRBdEhvc3RSdWxlczpmdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYSx0aGlzLmlzSG9zdFJ1bGUuYmluZCh0aGlzLGIpKX0saXNIb3N0UnVsZTpmdW5jdGlvbihhLGIpe3JldHVybiBiLnNlbGVjdG9yVGV4dCYmYi5zZWxlY3RvclRleHQubWF0Y2goYSl8fGIuY3NzUnVsZXMmJnRoaXMuZmluZEF0SG9zdFJ1bGVzKGIuY3NzUnVsZXMsYSkubGVuZ3RofHxiLnR5cGU9PUNTU1J1bGUuV0VCS0lUX0tFWUZSQU1FU19SVUxFfSxjb252ZXJ0QXRIb3N0U3R5bGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9dGhpcy5zdHlsZXNUb0Nzc1RleHQoYSksZT0iIixmPTA7Yz10aGlzLmhvc3RSdWxlUmUuZXhlYyhkKTspZSs9ZC5zdWJzdHJpbmcoZixjLmluZGV4KSxlKz10aGlzLnNjb3BlSG9zdENzcyhjWzFdLGIpLGY9dGhpcy5ob3N0UnVsZVJlLmxhc3RJbmRleDtlKz1kLnN1YnN0cmluZyhmLGQubGVuZ3RoKTt2YXIgZz1uZXcgUmVnRXhwKCJeIitiK3RoaXMuc2VsZWN0b3JSZVN1ZmZpeCwibSIpLGQ9dGhpcy5ydWxlc1RvQ3NzKHRoaXMuZmluZEF0SG9zdFJ1bGVzKHRoaXMuY3NzVG9SdWxlcyhlKSxnKSk7cmV0dXJuIGR9LHNjb3BlSG9zdENzczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPSIiO2M9dGhpcy5zZWxlY3RvclJlLmV4ZWMoYSk7KWQrPXRoaXMuc2NvcGVIb3N0U2VsZWN0b3IoY1sxXSxiKSsiICIrY1syXSsiXG4JIjtyZXR1cm4gZH0sc2NvcGVIb3N0U2VsZWN0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWEuc3BsaXQoIiwiKSxlPSJbaXM9IitiKyJdIjtyZXR1cm4gZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksYS5tYXRjaCh0aGlzLmhvc3RFbGVtZW50UmUpP2E9YS5yZXBsYWNlKHRoaXMuaG9zdEVsZW1lbnRSZSxiKyIkMSQzLCAiK2UrIiQxJDMiKTphLm1hdGNoKHRoaXMuaG9zdEZpeGFibGVSZSkmJihhPWIrYSsiLCAiK2UrYSksYy5wdXNoKGEpfSx0aGlzKSxjLmpvaW4oIiwgIil9LGNvbnZlcnRTY29wZWRTdHlsZXM6ZnVuY3Rpb24oYSxjKXtiKGEsZnVuY3Rpb24oYSl7YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9KTt2YXIgZD10aGlzLnN0eWxlc1RvQ3NzVGV4dChhKS5yZXBsYWNlKHRoaXMuaG9zdFJ1bGVSZSwiIik7ZD10aGlzLmNvbnZlcnRQc2V1ZG9zKGQpO3ZhciBlPXRoaXMuY3NzVG9SdWxlcyhkKTtyZXR1cm4gZD10aGlzLnNjb3BlUnVsZXMoZSxjKX0sY29udmVydFBzZXVkb3M6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSh0aGlzLmNzc1BzZXVkb1JlLCIgW3BzZXVkbz0kMV0iKX0sc2NvcGVSdWxlczpmdW5jdGlvbihhLGMpe3ZhciBkPSIiO3JldHVybiBiKGEsZnVuY3Rpb24oYSl7YS5zZWxlY3RvclRleHQmJmEuc3R5bGUmJmEuc3R5bGUuY3NzVGV4dD8oZCs9dGhpcy5zY29wZVNlbGVjdG9yKGEuc2VsZWN0b3JUZXh0LGMsUG9seW1lci5zdHJpY3RQb2x5ZmlsbFN0eWxpbmcpKyIge1xuCSIsZCs9dGhpcy5wcm9wZXJ0aWVzRnJvbVJ1bGUoYSkrIlxufVxuXG4iKTphLm1lZGlhPyhkKz0iQG1lZGlhICIrYS5tZWRpYS5tZWRpYVRleHQrIiB7XG4iLGQrPXRoaXMuc2NvcGVSdWxlcyhhLmNzc1J1bGVzLGMpLGQrPSJcbn1cblxuIik6YS5jc3NUZXh0JiYoZCs9YS5jc3NUZXh0KyJcblxuIil9LHRoaXMpLGR9LHByb3BlcnRpZXNGcm9tUnVsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnN0eWxlLmNzc1RleHQ7cmV0dXJuIGEuc3R5bGUuY29udGVudCYmIWEuc3R5bGUuY29udGVudC5tYXRjaCgvWyciXSsvKSYmKGI9ImNvbnRlbnQ6ICciK2Euc3R5bGUuY29udGVudCsiJztcbiIrYS5zdHlsZS5jc3NUZXh0LnJlcGxhY2UoL2NvbnRlbnQ6W147XSo7L2csIiIpKSxifSxzZWxlY3Rvck5lZWRzU2NvcGluZzpmdW5jdGlvbihhLGIpe3ZhciBjPSIoIitiKyJ8XFxbaXM9IitiKyJcXF0pIixkPW5ldyBSZWdFeHAoIl4iK2MrdGhpcy5zZWxlY3RvclJlU3VmZml4LCJtIik7cmV0dXJuIWEubWF0Y2goZCl9LHNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9YS5zcGxpdCgiLCIpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnRyaW0oKSx0aGlzLnNlbGVjdG9yTmVlZHNTY29waW5nKGEsYikmJihhPWM/dGhpcy5hcHBseVN0cmljdFNlbGVjdG9yU2NvcGUoYSxiKTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGIpKSxkLnB1c2goYSl9LHRoaXMpLGQuam9pbigiLCAiKX0sYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIrIiAiK2ErIiwgIisiW2lzPSIrYisiXSAiK2F9LGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3ZhciBjPVsiICIsIj4iLCIrIiwifiJdLGQ9YSxlPSJbIitiKyJdIjtyZXR1cm4gYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWQuc3BsaXQoYSk7ZD1iLm1hcChmdW5jdGlvbihhKXt2YXIgYj1hLnRyaW0oKTtyZXR1cm4gYiYmYy5pbmRleE9mKGIpPDAmJmIuaW5kZXhPZihlKTwwJiYoYT1iLnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sIiQxIitlKyIkMiQzIikpLGF9KS5qb2luKGEpfSksZH0sc3R5bGVzVG9Dc3NUZXh0OmZ1bmN0aW9uKGEsYyl7dmFyIGQ9IiI7cmV0dXJuIGIoYSxmdW5jdGlvbihhKXtkKz1hLnRleHRDb250ZW50KyJcblxuIn0pLGN8fChkPXRoaXMuc3RyaXBDc3NDb21tZW50cyhkKSksZH0sc3RyaXBDc3NDb21tZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHRoaXMuY3NzQ29tbWVudFJlLCIiKX0sY3NzVG9SdWxlczpmdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2IudGV4dENvbnRlbnQ9YSxkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGIpO3ZhciBjPWIuc2hlZXQuY3NzUnVsZXM7cmV0dXJuIGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxjfSxydWxlc1RvQ3NzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9W107YjxhLmxlbmd0aDtiKyspYy5wdXNoKGFbYl0uY3NzVGV4dCk7cmV0dXJuIGMuam9pbigiXG5cbiIpfSxhZGRDc3NUb0RvY3VtZW50OmZ1bmN0aW9uKGEpe2EmJnRoaXMuZ2V0U2hlZXQoKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9LGdldFNoZWV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hlZXR8fCh0aGlzLnNoZWV0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksdGhpcy5zaGVldC5zZXRBdHRyaWJ1dGUoInBvbHltZXItcG9seWZpbGwiLCIiKSksdGhpcy5zaGVldH0sYWRkU2hlZXRUb0RvY3VtZW50OmZ1bmN0aW9uKCl7dGhpcy5hZGRDc3NUb0RvY3VtZW50KCJzdHlsZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxuIik7dmFyIGE9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2EuaW5zZXJ0QmVmb3JlKHRoaXMuZ2V0U2hlZXQoKSxhLmNoaWxkTm9kZXNbMF0pfX07d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZlLmFkZFNoZWV0VG9Eb2N1bWVudCgpLGEuc2hpbVN0eWxpbmc9ZS5zaGltU3R5bGluZyxhLnNoaW1TaGFkb3dET01TdHlsaW5nPWUuc2hpbVNoYWRvd0RPTVN0eWxpbmcsYS5zaGltUG9seWZpbGxEaXJlY3RpdmVzPWUuc2hpbVBvbHlmaWxsRGlyZWN0aXZlcy5iaW5kKGUpLGEuc3RyaWN0UG9seWZpbGxTdHlsaW5nPSExfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7cmV0dXJuIGEmJmImJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLGMpO2QmJihPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLGQpLCJmdW5jdGlvbiI9PXR5cGVvZiBkLnZhbHVlJiYoYVtjXS5ub209YykpfSksYX1hLmV4dGVuZD1ifShQb2x5bWVyKSxmdW5jdGlvbigpe3ZhciBhPXt9O0hUTUxFbGVtZW50LnJlZ2lzdGVyPWZ1bmN0aW9uKGIsYyl7YVtiXT1jfSxIVE1MRWxlbWVudC5nZXRQcm90b3R5cGVGb3JUYWc9ZnVuY3Rpb24oYil7dmFyIGM9Yj9hW2JdOkhUTUxFbGVtZW50LnByb3RvdHlwZTtyZXR1cm4gY3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYikpfTt2YXIgYj1FdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uO0V2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbEJ1YmJsZT0hMCxiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sSFRNTEltcG9ydHMuaW1wb3J0ZXIucHJlbG9hZFNlbGVjdG9ycys9IiwgcG9seW1lci1lbGVtZW50IGxpbmtbcmVsPXN0eWxlc2hlZXRdIn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBkPXR5cGVvZiBiO3JldHVybiBiIGluc3RhbmNlb2YgRGF0ZSYmKGQ9ImRhdGUiKSxjW2RdKGEsYil9dmFyIGM9e3N0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gYX0sZGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZShhKXx8RGF0ZS5ub3coKSl9LCJib29sZWFuIjpmdW5jdGlvbihhKXtyZXR1cm4iIj09PWE/ITA6ImZhbHNlIj09PWE/ITE6ISFhfSxudW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9cGFyc2VGbG9hdChhKTtyZXR1cm4gU3RyaW5nKGIpPT09YT9iOmF9LG9iamVjdDpmdW5jdGlvbihhLGIpe2lmKCFiKXJldHVybiBhO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShhLnJlcGxhY2UoLycvZywnIicpKX1jYXRjaChjKXtyZXR1cm4gYX19fTthLmRlc2VyaWFsaXplVmFsdWU9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCl7cmV0dXJuIGE/YS5zdG9wKCk6YT1uZXcgYyh0aGlzKSxhLmdvKGIsZCksYX12YXIgYz1mdW5jdGlvbihhKXt0aGlzLmNvbnRleHQ9YX07Yy5wcm90b3R5cGU9e2dvOmZ1bmN0aW9uKGEsYil7dGhpcy5jYWxsYmFjaz1hLHRoaXMuaGFuZGxlPXNldFRpbWVvdXQodGhpcy5jb21wbGV0ZS5iaW5kKHRoaXMpLGIpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGUmJihjbGVhclRpbWVvdXQodGhpcy5oYW5kbGUpLHRoaXMuaGFuZGxlPW51bGwpfSxjb21wbGV0ZTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlJiYodGhpcy5zdG9wKCksdGhpcy5jYWxsYmFjay5jYWxsKHRoaXMuY29udGV4dCkpfX0sYS5qb2I9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt2YXIgYz1iLmNhbGxlcixmPWMubm9tOyJfc3VwZXIiaW4gY3x8KGZ8fChmPWUuY2FsbCh0aGlzLGMpKSxmfHxjb25zb2xlLndhcm4oImNhbGxlZCBzdXBlcigpIG9uIGEgbWV0aG9kIG5vdCBpbnN0YWxsZWQgZGVjbGFyYXRpdmVseSAoaGFzIG5vIC5ub20gcHJvcGVydHkpIiksZChjLGYsT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpKSk7dmFyIGc9Yy5fc3VwZXI7aWYoZyl7dmFyIGg9Z1tmXTtyZXR1cm4iX3N1cGVyImluIGh8fGQoaCxmLGcpLGguYXBwbHkodGhpcyxhfHxbXSl9fWZ1bmN0aW9uIGMoYSxiLGMpe2Zvcig7YSYmKCFhLmhhc093blByb3BlcnR5KGIpfHxhW2JdPT09Yyk7KWE9T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpO3JldHVybiBhfWZ1bmN0aW9uIGQoYSxiLGQpe3JldHVybiBhLl9zdXBlcj1jKGQsYixhKSxhLl9zdXBlciYmKGEuX3N1cGVyW2JdLm5vbT1iKSxhLl9zdXBlcn1mdW5jdGlvbiBlKGEpe2NvbnNvbGUud2FybigibmFtZUluVGhpcyBjYWxsZWQiKTtmb3IodmFyIGI9dGhpcztiJiZiIT09SFRNTEVsZW1lbnQucHJvdG90eXBlOyl7Zm9yKHZhciBjLGQ9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYiksZT0wLGY9ZC5sZW5ndGg7Zj5lJiYoYz1kW2VdKTtlKyspe3ZhciBnPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKTtpZihnLnZhbHVlPT1hKXJldHVybiBjfWI9Yi5fX3Byb3RvX199fWEuc3VwZXI9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9e307Yi5kZWNsYXJhdGlvbj17fSxiLmluc3RhbmNlPXt9LGEuYXBpPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXthc3luYzpmdW5jdGlvbihhLGIsYyl7UGxhdGZvcm0uZmx1c2goKSxiPWImJmIubGVuZ3RoP2I6W2JdO3ZhciBkPWZ1bmN0aW9uKCl7KHRoaXNbYV18fGEpLmFwcGx5KHRoaXMsYil9LmJpbmQodGhpcyk7cmV0dXJuIGM/c2V0VGltZW91dChkLGMpOnJlcXVlc3RBbmltYXRpb25GcmFtZShkKX0sZmlyZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jfHx0aGlzO3JldHVybiBlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGEse2J1YmJsZXM6dm9pZCAwIT09ZD8hMTohMCxkZXRhaWw6Yn0pKSxifSxhc3luY0ZpcmU6ZnVuY3Rpb24oKXt0aGlzLmFzeW5jTWV0aG9kKCJmaXJlIixhcmd1bWVudHMpfSxjbGFzc0ZvbGxvd3M6ZnVuY3Rpb24oYSxiLGMpe2ImJmIuY2xhc3NMaXN0LnJlbW92ZShjKSxhJiZhLmNsYXNzTGlzdC5hZGQoYyl9fTtiLmFzeW5jTWV0aG9kPWIuYXN5bmMsYS5hcGkuaW5zdGFuY2UudXRpbHM9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2IuY2FuY2VsQnViYmxlfHwoYi5vbj1pK2IudHlwZSxoLmV2ZW50cyYmY29uc29sZS5ncm91cCgiWyVzXTogbGlzdGVuTG9jYWwgWyVzXSIsYS5sb2NhbE5hbWUsYi5vbiksIWIucGF0aHx8d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP2QoYSxiKTpjKGEsYiksaC5ldmVudHMmJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPW51bGw7QXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChiLnBhdGgsZnVuY3Rpb24oZCl7cmV0dXJuIGQ9PT1hPyEwOihjPWM9PT1hP2M6ZShkKSxjJiZmKGMsZCxiKT8hMDp2b2lkIDApfSx0aGlzKX1mdW5jdGlvbiBkKGEsYil7aC5ldmVudHMmJmNvbnNvbGUubG9nKCJldmVudC5wYXRoKCkgbm90IHN1cHBvcnRlZCBmb3IiLGIudHlwZSk7Zm9yKHZhciBjPWIudGFyZ2V0LGQ9bnVsbDtjJiZjIT1hOyl7aWYoZD1kPT09YT9kOmUoYyksZCYmZihkLGMsYikpcmV0dXJuITA7Yz1jLnBhcmVudE5vZGV9fWZ1bmN0aW9uIGUoYSl7Zm9yKDthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhLmhvc3R9ZnVuY3Rpb24gZihhLGIsYyl7dmFyIGQ9Yi5nZXRBdHRyaWJ1dGUmJmIuZ2V0QXR0cmlidXRlKGMub24pO3JldHVybiBkJiZnKGIsYykmJihoLmV2ZW50cyYmY29uc29sZS5sb2coIlslc10gZm91bmQgaGFuZGxlciBuYW1lIFslc10iLGEubG9jYWxOYW1lLGQpLGEuZGlzcGF0Y2hNZXRob2QoYixkLFtjLGMuZGV0YWlsLGJdKSksYy5jYW5jZWxCdWJibGV9ZnVuY3Rpb24gZyhhLGIpe3ZhciBjPWwuZ2V0KGIpO3JldHVybiBjfHxsLnNldChiLGM9W10pLGMuaW5kZXhPZihhKTwwPyhjLnB1c2goYSksITApOnZvaWQgMH12YXIgaD13aW5kb3cubG9nRmxhZ3N8fHt9LGk9Im9uLSIsaj0iZXZlbnREZWxlZ2F0ZXMiLGs9e0VWRU5UX1BSRUZJWDppLERFTEVHQVRFUzpqLGFkZEhvc3RMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzW2pdO2guZXZlbnRzJiZPYmplY3Qua2V5cyhhKS5sZW5ndGg+MCYmY29uc29sZS5sb2coIlslc10gYWRkSG9zdExpc3RlbmVyczoiLHRoaXMubG9jYWxOYW1lLGEpLHRoaXMuYWRkTm9kZUxpc3RlbmVycyh0aGlzLGEsdGhpcy5ob3N0RXZlbnRMaXN0ZW5lcil9LGFkZEluc3RhbmNlTGlzdGVuZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5kZWxlZ2F0ZXM7YyYmKGguZXZlbnRzJiZPYmplY3Qua2V5cyhjKS5sZW5ndGg+MCYmY29uc29sZS5sb2coIlslczpyb290XSBhZGRJbnN0YW5jZUxpc3RlbmVyczoiLHRoaXMubG9jYWxOYW1lLGMpLHRoaXMuYWRkTm9kZUxpc3RlbmVycyhhLGMsdGhpcy5pbnN0YW5jZUV2ZW50TGlzdGVuZXIpKX0sYWRkTm9kZUxpc3RlbmVyczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7Zm9yKHZhciBlIGluIGIpZHx8KGQ9Yy5iaW5kKHRoaXMpKSxhLmFkZEV2ZW50TGlzdGVuZXIoZSxkKX0saG9zdEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSl7aWYoIWEuY2FuY2VsQnViYmxlKXtoLmV2ZW50cyYmY29uc29sZS5ncm91cCgiWyVzXTogaG9zdEV2ZW50TGlzdGVuZXIoJXMpIix0aGlzLmxvY2FsTmFtZSxhLnR5cGUpO3ZhciBiPXRoaXMuZmluZEV2ZW50RGVsZWdhdGUoYSk7YiYmKGguZXZlbnRzJiZjb25zb2xlLmxvZygiWyVzXSBmb3VuZCBob3N0IGhhbmRsZXIgbmFtZSBbJXNdIix0aGlzLmxvY2FsTmFtZSxiKSx0aGlzLmRpc3BhdGNoTWV0aG9kKHRoaXMsYixbYSxhLmRldGFpbCx0aGlzXSkpLGguZXZlbnRzJiZjb25zb2xlLmdyb3VwRW5kKCl9fSxmaW5kRXZlbnREZWxlZ2F0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1tqXVthLnR5cGVdfSxkaXNwYXRjaE1ldGhvZDpmdW5jdGlvbihhLGIsYyl7aWYoYSl7aC5ldmVudHMmJmNvbnNvbGUuZ3JvdXAoIlslc10gZGlzcGF0Y2ggWyVzXSIsYS5sb2NhbE5hbWUsYik7dmFyIGQ9dGhpc1tiXTtkJiZkW2M/ImFwcGx5IjoiY2FsbCJdKHRoaXMsYyksaC5ldmVudHMmJmNvbnNvbGUuZ3JvdXBFbmQoKX19LGluc3RhbmNlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhKXtiKHRoaXMsYSl9fSxsPW5ldyBTaWRlVGFibGUoImhhbmRsZWRMaXN0Iik7YS5hcGkuaW5zdGFuY2UuZXZlbnRzPWt9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz10aGlzW2FdfHxhOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFwcGx5KHRoaXMsYil9ZnVuY3Rpb24gYyhhLGIsYyxkKXtoLmJpbmQmJmNvbnNvbGUubG9nKG4sYy5sb2NhbE5hbWV8fCJvYmplY3QiLGQsYS5sb2NhbE5hbWUsYik7dmFyIGU9UGF0aE9ic2VydmVyLmdldFZhbHVlQXRQYXRoKGMsZCk7cmV0dXJuKG51bGw9PT1lfHx2b2lkIDA9PT1lKSYmUGF0aE9ic2VydmVyLnNldFZhbHVlQXRQYXRoKGMsZCxhW2JdKSxQYXRoT2JzZXJ2ZXIuZGVmaW5lUHJvcGVydHkoYSxiLHtvYmplY3Q6YyxwYXRoOmR9KX1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD1nKGEpO2RbYl09Y31mdW5jdGlvbiBlKGEsYil7dmFyIGM9ZyhhKTtyZXR1cm4gYyYmY1tiXT8oY1tiXS5jbG9zZSgpLGNbYl09bnVsbCwhMCk6dm9pZCAwfWZ1bmN0aW9uIGYoYSl7dmFyIGI9ZyhhKTtPYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2JbYV0uY2xvc2UoKSxiW2FdPW51bGx9KX1mdW5jdGlvbiBnKGEpe3ZhciBiPWsuZ2V0KGEpO3JldHVybiBifHxrLnNldChhLGI9e30pLGJ9dmFyIGg9d2luZG93LmxvZ0ZsYWdzfHx7fSxpPSJDaGFuZ2VkIixqPXtvYnNlcnZlUHJvcGVydGllczpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPXRoaXMuZ2V0Q3VzdG9tUHJvcGVydHlOYW1lcygpLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKXRoaXMub2JzZXJ2ZVByb3BlcnR5KGEpfSxnZXRDdXN0b21Qcm9wZXJ0eU5hbWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VzdG9tUHJvcGVydHlOYW1lc30sb2JzZXJ2ZVByb3BlcnR5OmZ1bmN0aW9uKGEpe2lmKHRoaXMuc2hvdWxkT2JzZXJ2ZVByb3BlcnR5KGEpKXtoLndhdGNoJiZjb25zb2xlLmxvZyhsLHRoaXMubG9jYWxOYW1lLGEpO3ZhciBiPWZ1bmN0aW9uKGIsYyl7aC53YXRjaCYmY29uc29sZS5sb2cobSx0aGlzLmxvY2FsTmFtZSx0aGlzLmlkfHwiIixhLHRoaXNbYV0sYyksdGhpcy5kaXNwYXRjaFByb3BlcnR5Q2hhbmdlKGEsYyl9LmJpbmQodGhpcyksYz1uZXcgUGF0aE9ic2VydmVyKHRoaXMsYSxiKTtkKHRoaXMsYSxjKX19LGJpbmRQcm9wZXJ0eTpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGModGhpcyxhLGIsZCl9LHVuYmluZFByb3BlcnR5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUodGhpcyxhLGIpfSx1bmJpbmRBbGxQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7Zih0aGlzKX0sc2hvdWxkT2JzZXJ2ZVByb3BlcnR5OmZ1bmN0aW9uKGEpe3JldHVybiBCb29sZWFuKHRoaXNbYStpXSl9LGRpc3BhdGNoUHJvcGVydHlDaGFuZ2U6ZnVuY3Rpb24oYSxjKXtiLmNhbGwodGhpcyxhK2ksW2NdKX19LGs9bmV3IFNpZGVUYWJsZSxsPSJbJXNdIHdhdGNoaW5nIFslc10iLG09IlslcyMlc10gd2F0Y2g6IFslc10gbm93IFslc10gd2FzIFslc10iLG49Ilslc106IGJpbmRQcm9wZXJ0aWVzOiBbJXNdIHRvIFslc10uWyVzXSI7YS5hcGkuaW5zdGFuY2UucHJvcGVydGllcz1qfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj0iX19wdWJsaXNoZWQiLGM9Il9faW5zdGFuY2VfYXR0cmlidXRlcyIsZD17UFVCTElTSEVEOmIsSU5TVEFOQ0VfQVRUUklCVVRFUzpjLGNvcHlJbnN0YW5jZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzW2NdO2Zvcih2YXIgYiBpbiBhKXRoaXMuc2V0QXR0cmlidXRlKGIsYVtiXSl9LHRha2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MCxjPXRoaXMuYXR0cmlidXRlcyxkPWMubGVuZ3RoOyhhPWNbYl0pJiZkPmI7YisrKXRoaXMuYXR0cmlidXRlVG9Qcm9wZXJ0eShhLm5hbWUsYS52YWx1ZSl9LGF0dHJpYnV0ZVRvUHJvcGVydHk6ZnVuY3Rpb24oYixjKXt2YXIgYj10aGlzLnByb3BlcnR5Rm9yQXR0cmlidXRlKGIpO2lmKGIpe2lmKGMuc2VhcmNoKGEuYmluZFBhdHRlcm4pPj0wKXJldHVybjt2YXIgZD10aGlzW2JdLGM9dGhpcy5kZXNlcmlhbGl6ZVZhbHVlKGMsZCk7YyE9PWQmJih0aGlzW2JdPWMpfX0scHJvcGVydHlGb3JBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7dmFyIGM9T2JqZWN0LmtleXModGhpc1tiXSk7cmV0dXJuIGNbYy5tYXAoZSkuaW5kZXhPZihhLnRvTG93ZXJDYXNlKCkpXX0sZGVzZXJpYWxpemVWYWx1ZTpmdW5jdGlvbihiLGMpe3JldHVybiBhLmRlc2VyaWFsaXplVmFsdWUoYixjKX19LGU9U3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZS5jYWxsLmJpbmQoU3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZSk7YS5hcGkuaW5zdGFuY2UuYXR0cmlidXRlcz1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2QoYSxjKX1mdW5jdGlvbiBjKGEpe2EudW5iaW5kQWxsKCl9ZnVuY3Rpb24gZChhLGIpe2lmKGEpe2IoYSk7Zm9yKHZhciBjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZylkKGMsYil9fXZhciBlPXdpbmRvdy5sb2dGbGFnc3x8MCxmPW5ldyBFeHByZXNzaW9uU3ludGF4LGc9e2luc3RhbmNlVGVtcGxhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY3JlYXRlSW5zdGFuY2UodGhpcyxmKX0sY3JlYXRlQmluZGluZzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5wcm9wZXJ0eUZvckF0dHJpYnV0ZShhKTtpZihkKXt2YXIgZT10aGlzLmJpbmRQcm9wZXJ0eShkLGIsYyk7cmV0dXJuIGUucGF0aD1jLGV9cmV0dXJuIHRoaXMuc3VwZXIoYXJndW1lbnRzKX0sYXN5bmNVbmJpbmRBbGw6ZnVuY3Rpb24oKXt0aGlzLl91bmJvdW5kfHwoZS51bmJpbmQmJmNvbnNvbGUubG9nKCJbJXNdIGFzeW5jVW5iaW5kQWxsIix0aGlzLmxvY2FsTmFtZSksdGhpcy5fdW5iaW5kQWxsSm9iPXRoaXMuam9iKHRoaXMuX3VuYmluZEFsbEpvYix0aGlzLnVuYmluZEFsbCwwKSl9LHVuYmluZEFsbDpmdW5jdGlvbigpe3RoaXMuX3VuYm91bmR8fCh0aGlzLnVuYmluZEFsbFByb3BlcnRpZXMoKSx0aGlzLnN1cGVyKCksYih0aGlzLnNoYWRvd1Jvb3QpLHRoaXMuX3VuYm91bmQ9ITApfSxjYW5jZWxVbmJpbmRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3VuYm91bmQ/KGUudW5iaW5kJiZjb25zb2xlLndhcm4oIlslc10gYWxyZWFkeSB1bmJvdW5kLCBjYW5ub3QgY2FuY2VsIHVuYmluZEFsbCIsdGhpcy5sb2NhbE5hbWUpLHZvaWQgMCk6KGUudW5iaW5kJiZjb25zb2xlLmxvZygiWyVzXSBjYW5jZWxVbmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSx0aGlzLl91bmJpbmRBbGxKb2ImJih0aGlzLl91bmJpbmRBbGxKb2I9dGhpcy5fdW5iaW5kQWxsSm9iLnN0b3AoKSksYXx8ZCh0aGlzLnNoYWRvd1Jvb3QsZnVuY3Rpb24oYSl7YS5jYW5jZWxVbmJpbmRBbGwmJmEuY2FuY2VsVW5iaW5kQWxsKCl9KSx2b2lkIDApfSxpbnNlcnRlZENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxVbmJpbmRBbGwoITApLHRoaXMuaW5zZXJ0ZWQmJnRoaXMuaW5zZXJ0ZWQoKX0scmVtb3ZlZENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hc3luY1VuYmluZEFsbCgpLHRoaXMucmVtb3ZlZCYmdGhpcy5yZW1vdmVkKCl9fSxoPS9ce1x7KFtee31dKil9fS87YS5iaW5kUGF0dGVybj1oLGEuYXBpLmluc3RhbmNlLm1kdj1nfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBhLmhhc093blByb3BlcnR5KCJQb2x5bWVyQmFzZSIpfWZ1bmN0aW9uIGMoKXt9dmFyIGQ9e1BvbHltZXJCYXNlOiEwLGpvYjpQb2x5bWVyLmpvYiwic3VwZXIiOlBvbHltZXIuc3VwZXIscmVhZHk6ZnVuY3Rpb24oKXt9LHJlYWR5Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmVQcm9wZXJ0aWVzKCksdGhpcy5jb3B5SW5zdGFuY2VBdHRyaWJ1dGVzKCksdGhpcy50YWtlQXR0cmlidXRlcygpLHRoaXMuYWRkSG9zdExpc3RlbmVycygpLHRoaXMucGFyc2VFbGVtZW50cyh0aGlzLl9fcHJvdG9fXyksdGhpcy5hc3luY1VuYmluZEFsbCgpLHRoaXMucmVhZHkoKX0scGFyc2VFbGVtZW50czpmdW5jdGlvbihhKXthJiZhLmVsZW1lbnQmJih0aGlzLnBhcnNlRWxlbWVudHMoYS5fX3Byb3RvX18pLGEucGFyc2VFbGVtZW50LmNhbGwodGhpcyxhLmVsZW1lbnQpKX0scGFyc2VFbGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMuc2hhZG93RnJvbVRlbXBsYXRlKHRoaXMuZmV0Y2hUZW1wbGF0ZShhKSl9LGZldGNoVGVtcGxhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvcigidGVtcGxhdGUiKX0sc2hhZG93RnJvbVRlbXBsYXRlOmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXRoaXMuc2hhZG93Um9vdCxjPXRoaXMuY3JlYXRlU2hhZG93Um9vdCgpO2Mub2xkZXJTaGFkb3dSb290PWIsYy5hcHBseUF1dGhvclN0eWxlcz10aGlzLmFwcGx5QXV0aG9yU3R5bGVzLGMucmVzZXRTdHlsZUluaGVyaXRhbmNlPXRoaXMucmVzZXRTdHlsZUluaGVyaXRhbmNlLGMuaG9zdD10aGlzO3ZhciBkPXRoaXMuaW5zdGFuY2VUZW1wbGF0ZShhKTtyZXR1cm4gYy5hcHBlbmRDaGlsZChkKSx0aGlzLnNoYWRvd1Jvb3RSZWFkeShjLGEpLEN1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93KHRoaXMpLGN9fSxzaGFkb3dSb290UmVhZHk6ZnVuY3Rpb24oYSxiKXt0aGlzLm1hcnNoYWxOb2RlUmVmZXJlbmNlcyhhKSx0aGlzLmFkZEluc3RhbmNlTGlzdGVuZXJzKGEsYiksUG9pbnRlckdlc3R1cmVzLnJlZ2lzdGVyKGEpfSxtYXJzaGFsTm9kZVJlZmVyZW5jZXM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy4kPXRoaXMuJHx8e307aWYoYSlmb3IodmFyIGMsZD1hLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZF0iKSxlPTAsZj1kLmxlbmd0aDtmPmUmJihjPWRbZV0pO2UrKyliW2MuaWRdPWN9LGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuYXR0cmlidXRlQ2hhbmdlZCYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19O2MucHJvdG90eXBlPWQsZC5jb25zdHJ1Y3Rvcj1jLGEuQmFzZT1jLGEuaXNCYXNlPWIsYS5hcGkuaW5zdGFuY2UuYmFzZT1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXt3aW5kb3cubG9nRmxhZ3N8fHt9O3ZhciBiPSJlbGVtZW50IixjPSJjb250cm9sbGVyIixkPXtTVFlMRV9TQ09QRV9BVFRSSUJVVEU6YixpbnN0YWxsQ29udHJvbGxlclN0eWxlczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZmluZFN0eWxlQ29udHJvbGxlcigpO2lmKGEmJiF0aGlzLnNjb3BlSGFzRWxlbWVudFN0eWxlKGEsYykpe2Zvcih2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcyksZD0iIjtiJiZiLmVsZW1lbnQ7KWQrPWIuZWxlbWVudC5jc3NUZXh0Rm9yU2NvcGUoYyksYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYik7aWYoZCl7dmFyIGU9dGhpcy5lbGVtZW50LmNzc1RleHRUb1Njb3BlU3R5bGUoZCxjKTt3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJlBsYXRmb3JtLlNoYWRvd0NTUy5zaGltUG9seWZpbGxEaXJlY3RpdmVzKFtlXSx0aGlzLmxvY2FsTmFtZSksUG9seW1lci5hcHBseVN0eWxlVG9TY29wZShlLGEpfX19LHNjb3BlSGFzRWxlbWVudFN0eWxlOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YisiPSIrdGhpcy5sb2NhbE5hbWUrIi0iK2M7cmV0dXJuIGEucXVlcnlTZWxlY3Rvcigic3R5bGVbIitkKyJdIil9LGZpbmRTdHlsZUNvbnRyb2xsZXI6ZnVuY3Rpb24oKXtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpcmV0dXJuIHdyYXAoZG9jdW1lbnQuaGVhZCk7Zm9yKHZhciBhPXRoaXM7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYT09PWRvY3VtZW50P2RvY3VtZW50LmhlYWQ6YX19O2EuYXBpLmluc3RhbmNlLnN0eWxlcz1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17YWRkUmVzb2x2ZVBhdGhBcGk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRQYXRoKCk7dGhpcy5wcm90b3R5cGUucmVzb2x2ZVBhdGg9ZnVuY3Rpb24oYil7cmV0dXJuIGErYn19LGVsZW1lbnRQYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXJsVG9QYXRoKEhUTUxJbXBvcnRzLmdldERvY3VtZW50VXJsKHRoaXMub3duZXJEb2N1bWVudCkpfSx1cmxUb1BhdGg6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9YS5zcGxpdCgiLyIpO3JldHVybiBiLnBvcCgpLGIucHVzaCgiIiksYi5qb2luKCIvIil9cmV0dXJuIiJ9fTthLmFwaS5kZWNsYXJhdGlvbi5wYXRoPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtpZihhKXt2YXIgZD1jKGEudGV4dENvbnRlbnQpLGU9YS5nZXRBdHRyaWJ1dGUoZyk7ZSYmZC5zZXRBdHRyaWJ1dGUoZyxlKSxiLmFwcGVuZENoaWxkKGQpfX1mdW5jdGlvbiBjKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGIudGV4dENvbnRlbnQ9YSxifWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19yZXNvdXJjZXx8IiJ9ZnVuY3Rpb24gZShhLGIpe3JldHVybiBuP24uY2FsbChhLGIpOnZvaWQgMH13aW5kb3cubG9nRmxhZ3N8fHt9O3ZhciBmPWEuYXBpLmluc3RhbmNlLnN0eWxlcyxnPWYuU1RZTEVfU0NPUEVfQVRUUklCVVRFLGg9InN0eWxlIixpPSJbcmVsPXN0eWxlc2hlZXRdIixqPSJnbG9iYWwiLGs9InBvbHltZXItc2NvcGUiLGw9e2luc3RhbGxTaGVldHM6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlU2hlZXRzKCksdGhpcy5pbnN0YWxsTG9jYWxTaGVldHMoKSx0aGlzLmluc3RhbGxHbG9iYWxTdHlsZXMoKX0sY2FjaGVTaGVldHM6ZnVuY3Rpb24oKXt0aGlzLnNoZWV0cz10aGlzLmZpbmROb2RlcyhpKSx0aGlzLnNoZWV0cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSl9LGluc3RhbGxMb2NhbFNoZWV0czpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2hlZXRzLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4hYS5oYXNBdHRyaWJ1dGUoayl9KSxiPXRoaXMudGVtcGxhdGVDb250ZW50KCk7aWYoYil7dmFyIGU9IiI7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2UrPWQoYSkrIlxuIn0pLGUmJmIuaW5zZXJ0QmVmb3JlKGMoZSksYi5maXJzdENoaWxkKX19LGZpbmROb2RlczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucXVlcnlTZWxlY3RvckFsbChhKS5hcnJheSgpLGQ9dGhpcy50ZW1wbGF0ZUNvbnRlbnQoKTtpZihkKXt2YXIgZT1kLnF1ZXJ5U2VsZWN0b3JBbGwoYSkuYXJyYXkoKTtjPWMuY29uY2F0KGUpfXJldHVybiBiP2MuZmlsdGVyKGIpOmN9LHRlbXBsYXRlQ29udGVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucXVlcnlTZWxlY3RvcigidGVtcGxhdGUiKTtyZXR1cm4gYSYmdGVtcGxhdGVDb250ZW50KGEpfSxpbnN0YWxsR2xvYmFsU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zdHlsZUZvclNjb3BlKGopO2IoYSxkb2N1bWVudC5oZWFkKX0sY3NzVGV4dEZvclNjb3BlOmZ1bmN0aW9uKGEpe3ZhciBiPSIiLGM9IlsiK2srIj0iK2ErIl0iLGY9ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSxjKX0sZz10aGlzLnNoZWV0cy5maWx0ZXIoZik7Zy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IrPWQoYSkrIlxuXG4ifSk7dmFyIGk9dGhpcy5maW5kTm9kZXMoaCxmKTtyZXR1cm4gaS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxiKz1hLnRleHRDb250ZW50KyJcblxuIn0pLGJ9LHN0eWxlRm9yU2NvcGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jc3NUZXh0Rm9yU2NvcGUoYSk7cmV0dXJuIHRoaXMuY3NzVGV4dFRvU2NvcGVTdHlsZShiLGEpfSxjc3NUZXh0VG9TY29wZVN0eWxlOmZ1bmN0aW9uKGEsYil7aWYoYSl7dmFyIGQ9YyhhKTtyZXR1cm4gZC5zZXRBdHRyaWJ1dGUoZyx0aGlzLmdldEF0dHJpYnV0ZSgibmFtZSIpKyItIitiKSxkfX19LG09SFRNTEVsZW1lbnQucHJvdG90eXBlLG49bS5tYXRjaGVzfHxtLm1hdGNoZXNTZWxlY3Rvcnx8bS53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG0ubW96TWF0Y2hlc1NlbGVjdG9yO2EuYXBpLmRlY2xhcmF0aW9uLnN0eWxlcz1sLGEuYXBwbHlTdHlsZVRvU2NvcGU9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYS5zbGljZSgwLGspPT1nfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEuc2xpY2Uoayl9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5yZWY/YS5yZWYuY29udGVudDphLmNvbnRlbnR9dmFyIGU9YS5hcGkuaW5zdGFuY2UuZXZlbnRzLGY9ZS5ERUxFR0FURVMsZz1lLkVWRU5UX1BSRUZJWCxoPXdpbmRvdy5sb2dGbGFnc3x8e30saT17aW5oZXJpdERlbGVnYXRlczpmdW5jdGlvbihhKXt0aGlzLmluaGVyaXRPYmplY3QoYSxmKX0scGFyc2VIb3N0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wcm90b3R5cGVbZl07dGhpcy5hZGRBdHRyaWJ1dGVEZWxlZ2F0ZXMoYSl9LGFkZEF0dHJpYnV0ZURlbGVnYXRlczpmdW5jdGlvbihhKXtmb3IodmFyIGQsZT0wO2Q9dGhpcy5hdHRyaWJ1dGVzW2VdO2UrKyliKGQubmFtZSkmJihhW2MoZC5uYW1lKV09ZC52YWx1ZSl9LHBhcnNlTG9jYWxFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIikuZm9yRWFjaChmdW5jdGlvbihhKXthLmRlbGVnYXRlcz17fSx0aGlzLmFjY3VtdWxhdGVUZW1wbGF0ZWRFdmVudHMoYSxhLmRlbGVnYXRlcyksaC5ldmVudHMmJmNvbnNvbGUubG9nKCJbJXNdIHBhcnNlTG9jYWxFdmVudHM6Iix0aGlzLmF0dHJpYnV0ZXMubmFtZS52YWx1ZSxhLmRlbGVnYXRlcyl9LHRoaXMpfSxhY2N1bXVsYXRlVGVtcGxhdGVkRXZlbnRzOmZ1bmN0aW9uKGEsYil7aWYoInRlbXBsYXRlIj09PWEubG9jYWxOYW1lKXt2YXIgYz1kKGEpO2MmJnRoaXMuYWNjdW11bGF0ZUNoaWxkRXZlbnRzKGMsYil9fSxhY2N1bXVsYXRlQ2hpbGRFdmVudHM6ZnVuY3Rpb24oYSxiKXthLmNoaWxkTm9kZXMuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLmFjY3VtdWxhdGVFdmVudHMoYSxiKX0sdGhpcyl9LGFjY3VtdWxhdGVFdmVudHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hY2N1bXVsYXRlQXR0cmlidXRlRXZlbnRzKGEsYiksdGhpcy5hY2N1bXVsYXRlQ2hpbGRFdmVudHMoYSxiKSx0aGlzLmFjY3VtdWxhdGVUZW1wbGF0ZWRFdmVudHMoYSxiKSxifSxhY2N1bXVsYXRlQXR0cmlidXRlRXZlbnRzOmZ1bmN0aW9uKGEsZCl7YS5hdHRyaWJ1dGVzJiZhLmF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihhKXtiKGEubmFtZSkmJnRoaXMuYWNjdW11bGF0ZUV2ZW50KGMoYS5uYW1lKSxkKX0sdGhpcyl9LGFjY3VtdWxhdGVFdmVudDpmdW5jdGlvbihhLGIpe2E9althXXx8YSxiW2FdPWJbYV18fDF9fSxqPXt3ZWJraXRhbmltYXRpb25zdGFydDoid2Via2l0QW5pbWF0aW9uU3RhcnQiLHdlYmtpdGFuaW1hdGlvbmVuZDoid2Via2l0QW5pbWF0aW9uRW5kIix3ZWJraXR0cmFuc2l0aW9uZW5kOiJ3ZWJraXRUcmFuc2l0aW9uRW5kIixkb21mb2N1c291dDoiRE9NRm9jdXNPdXQiLGRvbWZvY3VzaW46IkRPTUZvY3VzSW4ifSxrPWcubGVuZ3RoO2kuZXZlbnRfdHJhbnNsYXRpb25zPWosYS5hcGkuZGVjbGFyYXRpb24uZXZlbnRzPWl9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9e2NhY2hlUHJvcGVydGllczpmdW5jdGlvbigpe3RoaXMucHJvdG90eXBlLmN1c3RvbVByb3BlcnR5TmFtZXM9dGhpcy5nZXRDdXN0b21Qcm9wZXJ0eU5hbWVzKHRoaXMucHJvdG90eXBlKX0sZ2V0Q3VzdG9tUHJvcGVydHlOYW1lczpmdW5jdGlvbihjKXtmb3IodmFyIGQsZT17fTtjJiYhYS5pc0Jhc2UoYyk7KXtmb3IodmFyIGYsZz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjKSxoPTAsaT1nLmxlbmd0aDtpPmgmJihmPWdbaF0pO2grKyllW2ZdPSEwLGQ9ITA7Yz1jLl9fcHJvdG9fX31yZXR1cm4gZD9PYmplY3Qua2V5cyhlKTpifX07YS5hcGkuZGVjbGFyYXRpb24ucHJvcGVydGllcz1jfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj1hLmFwaS5pbnN0YW5jZS5hdHRyaWJ1dGVzLGM9Yi5QVUJMSVNIRUQsZD1iLklOU1RBTkNFX0FUVFJJQlVURVMsZT0icHVibGlzaCIsZj0iYXR0cmlidXRlcyIsZz17aW5oZXJpdEF0dHJpYnV0ZXNPYmplY3RzOmZ1bmN0aW9uKGEpe3RoaXMuaW5oZXJpdE9iamVjdChhLGMpLHRoaXMuaW5oZXJpdE9iamVjdChhLGQpfSxwYXJzZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt0aGlzLnB1Ymxpc2hBdHRyaWJ1dGVzKHRoaXMucHJvdG90eXBlKSx0aGlzLnB1Ymxpc2hQcm9wZXJ0aWVzKHRoaXMucHJvdG90eXBlKSx0aGlzLmFjY3VtdWxhdGVJbnN0YW5jZUF0dHJpYnV0ZXMoKX0scHVibGlzaEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YVtjXSxkPXRoaXMuZ2V0QXR0cmlidXRlKGYpO2lmKGQpe3ZhciBlPWQuc3BsaXQoZC5pbmRleE9mKCIsIik+PTA/IiwiOiIgIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksIWF8fGEgaW4gYnx8KGJbYV09bnVsbCl9KX1PYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2MgaW4gYXx8KGFbY109YltjXSl9KX0scHVibGlzaFByb3BlcnRpZXM6ZnVuY3Rpb24oYSl7dGhpcy5wdWJsaXNoUHVibGlzaChhKX0scHVibGlzaFB1Ymxpc2g6ZnVuY3Rpb24oYSl7aWYoYS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIGI9YVtlXTtiJiYoT2JqZWN0LmtleXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXthW2NdPWJbY119KSxQbGF0Zm9ybS5taXhpbihhW2NdLGIpKX19LGFjY3VtdWxhdGVJbnN0YW5jZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb3RvdHlwZVtkXTt0aGlzLmF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihiKXt0aGlzLmlzSW5zdGFuY2VBdHRyaWJ1dGUoYi5uYW1lKSYmKGFbYi5uYW1lXT1iLnZhbHVlKX0sdGhpcyl9LGlzSW5zdGFuY2VBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIXRoaXMuYmxhY2tMaXN0W2FdJiYib24tIiE9PWEuc2xpY2UoMCwzKX0sYmxhY2tMaXN0OntuYW1lOjEsImV4dGVuZHMiOjEsY29uc3RydWN0b3I6MX19O2cuYmxhY2tMaXN0W2ZdPTEsYS5hcGkuZGVjbGFyYXRpb24uYXR0cmlidXRlcz1nfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7ZlthXT1ifWZ1bmN0aW9uIGMoYSl7cmV0dXJuIE9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQuZ2V0UHJvdG90eXBlRm9yVGFnKGEpKX12YXIgZD1Qb2x5bWVyLmV4dGVuZCxlPWEuYXBpLmRlY2xhcmF0aW9uLGY9e30sZz1jKCk7ZChnLHtyZWFkeUNhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSxiPXRoaXMuZ2V0QXR0cmlidXRlKCJleHRlbmRzIik7dGhpcy5wcm90b3R5cGU9dGhpcy5nZW5lcmF0ZUN1c3RvbVByb3RvdHlwZShhLGIpLHRoaXMucHJvdG90eXBlLmVsZW1lbnQ9dGhpcyx0aGlzLmFkZFJlc29sdmVQYXRoQXBpKCksdGhpcy5kZXN1Z2FyKCksd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZQbGF0Zm9ybS5TaGFkb3dDU1Muc2hpbVN0eWxpbmcodGhpcy50ZW1wbGF0ZUNvbnRlbnQoKSxhLGIpLHRoaXMucmVnaXN0ZXIoYSksdGhpcy5wdWJsaXNoQ29uc3RydWN0b3IoKX0sZGVzdWdhcjpmdW5jdGlvbigpe3RoaXMucGFyc2VBdHRyaWJ1dGVzKCksdGhpcy5wYXJzZUhvc3RFdmVudHMoKSx0aGlzLnBhcnNlTG9jYWxFdmVudHMoKSx0aGlzLmluc3RhbGxTaGVldHMoKSx0aGlzLnByb3RvdHlwZS5yZWdpc3RlckNhbGxiYWNrJiZ0aGlzLnByb3RvdHlwZS5yZWdpc3RlckNhbGxiYWNrKHRoaXMpLHRoaXMuY2FjaGVQcm9wZXJ0aWVzKCl9LGdlbmVyYXRlQ3VzdG9tUHJvdG90eXBlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZW5lcmF0ZUJhc2VQcm90b3R5cGUoYik7cmV0dXJuIHRoaXMuYWRkTmFtZWRBcGkoYyxhKX0sZ2VuZXJhdGVCYXNlUHJvdG90eXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWMoYSk7cmV0dXJuIHRoaXMuZW5zdXJlQmFzZUFwaShiKX0sZW5zdXJlQmFzZUFwaTpmdW5jdGlvbihiKXtyZXR1cm4gYi5Qb2x5bWVyQmFzZXx8KE9iamVjdC5rZXlzKGEuYXBpLmluc3RhbmNlKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2QoYixhLmFwaS5pbnN0YW5jZVtjXSl9KSxiPU9iamVjdC5jcmVhdGUoYikpLHRoaXMuaW5oZXJpdEF0dHJpYnV0ZXNPYmplY3RzKGIpLHRoaXMuaW5oZXJpdERlbGVnYXRlcyhiKSxifSxhZGROYW1lZEFwaTpmdW5jdGlvbihhLGIpe3JldHVybiBkKGEsZltiXSl9LGluaGVyaXRPYmplY3Q6ZnVuY3Rpb24oYSxiKXthW2JdPWQoe30sYS5fX3Byb3RvX19bYl0pfSxyZWdpc3RlcjpmdW5jdGlvbihhKXt0aGlzLmN0b3I9ZG9jdW1lbnQucmVnaXN0ZXIoYSx7cHJvdG90eXBlOnRoaXMucHJvdG90eXBlfSksdGhpcy5wcm90b3R5cGUuY29uc3RydWN0b3I9dGhpcy5jdG9yLEhUTUxFbGVtZW50LnJlZ2lzdGVyKGEsdGhpcy5wcm90b3R5cGUpfSxwdWJsaXNoQ29uc3RydWN0b3I6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZSgiY29uc3RydWN0b3IiKTthJiYod2luZG93W2FdPXRoaXMuY3Rvcil9fSksT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihhKXtkKGcsZVthXSl9KSxkb2N1bWVudC5yZWdpc3RlcigicG9seW1lci1lbGVtZW50Iix7cHJvdG90eXBlOmd9KSxkKGIsd2luZG93LlBvbHltZXIpLHdpbmRvdy5Qb2x5bWVyPWJ9KFBvbHltZXIpOwovKgovL0Agc291cmNlTWFwcGluZ1VSTD1wb2x5bWVyLm1pbi5qcy5tYXAKKi8=",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Thu, 06 Nov 2014 23:22:12 GMT",
                    "Content-Length": "159080",
                    "Date": "Thu, 06 Nov 2014 23:22:13 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}