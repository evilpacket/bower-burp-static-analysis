{
    "url": "http://localhost:9999/the-grid/the-behavior/browser/the-behavior.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Open redirection (DOM-based)",
    "issueType": 5243152,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based open redirection vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the target of a redirection in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause a redirection to an arbitrary external domain. This behavior can be leveraged to facilitate phishing attacks against users of the application. The ability to use an authentic application URL, targeting the correct domain with a valid SSL certificate (if SSL is used) lends credibility to the phishing attack because many users, even if they verify these features, will not notice the subsequent redirection to a different domain.<br><br><b>Note:</b> If an attacker is able to control the start of the string that is passed to the redirection API, then it may be possible to escalate this vulnerability into a JavaScript injection attack, by using a URL with the javascript: pseudo-protocol to execute arbitrary script code when the URL is processed by the browser.",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based open redirection vulnerabilities is not to dynamically set redirection targets using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a redirection target. In general, this is best achieved by using a whitelist of URLs that are permitted redirection targets, and strictly validating the target against this list before performing the redirection.",
    "issueDetail": "The application may be vulnerable to DOM-based open redirection. Data is read from <b>window.location.hash</b> and written to <b>the 'send()' function of an XMLHttpRequest object</b> via the following statements:<ul><li>initialHash = window.location.hash.substr(1);</li><li>this.outPorts.initial.send(initialHash);</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/the-grid/the-behavior/browser/the-behavior.js",
                "path": "/the-grid/the-behavior/browser/the-behavior.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC90aGUtZ3JpZC90aGUtYmVoYXZpb3IvYnJvd3Nlci90aGUtYmVoYXZpb3IuanMgSFRUUC8xLjENCkhvc3Q6IGxvY2FsaG9zdDo5OTk5DQoNCg==",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogNTc2OTc5DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBTYXQsIDA4IE5vdiAyMDE0IDE1OjMxOjE1IEdNVA0KTGFzdC1Nb2RpZmllZDogU2F0LCAwOCBOb3YgMjAxNCAxNTozMToxNSBHTVQNCg0KOyhmdW5jdGlvbigpewoKLyoqCiAqIFJlcXVpcmUgdGhlIGdpdmVuIHBhdGguCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAqIEByZXR1cm4ge09iamVjdH0gZXhwb3J0cwogKiBAYXBpIHB1YmxpYwogKi8KCmZ1bmN0aW9uIHJlcXVpcmUocGF0aCwgcGFyZW50LCBvcmlnKSB7CiAgdmFyIHJlc29sdmVkID0gcmVxdWlyZS5yZXNvbHZlKHBhdGgpOwoKICAvLyBsb29rdXAgZmFpbGVkCiAgaWYgKG51bGwgPT0gcmVzb2x2ZWQpIHsKICAgIG9yaWcgPSBvcmlnIHx8IHBhdGg7CiAgICBwYXJlbnQgPSBwYXJlbnQgfHwgJ3Jvb3QnOwogICAgdmFyIGVyciA9IG5ldyBFcnJvcignRmFpbGVkIHRvIHJlcXVpcmUgIicgKyBvcmlnICsgJyIgZnJvbSAiJyArIHBhcmVudCArICciJyk7CiAgICBlcnIucGF0aCA9IG9yaWc7CiAgICBlcnIucGFyZW50ID0gcGFyZW50OwogICAgZXJyLnJlcXVpcmUgPSB0cnVlOwogICAgdGhyb3cgZXJyOwogIH0KCiAgdmFyIG1vZHVsZSA9IHJlcXVpcmUubW9kdWxlc1tyZXNvbHZlZF07CgogIC8vIHBlcmZvcm0gcmVhbCByZXF1aXJlKCkKICAvLyBieSBpbnZva2luZyB0aGUgbW9kdWxlJ3MKICAvLyByZWdpc3RlcmVkIGZ1bmN0aW9uCiAgaWYgKCFtb2R1bGUuX3Jlc29sdmluZyAmJiAhbW9kdWxlLmV4cG9ydHMpIHsKICAgIHZhciBtb2QgPSB7fTsKICAgIG1vZC5leHBvcnRzID0ge307CiAgICBtb2QuY2xpZW50ID0gbW9kLmNvbXBvbmVudCA9IHRydWU7CiAgICBtb2R1bGUuX3Jlc29sdmluZyA9IHRydWU7CiAgICBtb2R1bGUuY2FsbCh0aGlzLCBtb2QuZXhwb3J0cywgcmVxdWlyZS5yZWxhdGl2ZShyZXNvbHZlZCksIG1vZCk7CiAgICBkZWxldGUgbW9kdWxlLl9yZXNvbHZpbmc7CiAgICBtb2R1bGUuZXhwb3J0cyA9IG1vZC5leHBvcnRzOwogIH0KCiAgcmV0dXJuIG1vZHVsZS5leHBvcnRzOwp9CgovKioKICogUmVnaXN0ZXJlZCBtb2R1bGVzLgogKi8KCnJlcXVpcmUubW9kdWxlcyA9IHt9OwoKLyoqCiAqIFJlZ2lzdGVyZWQgYWxpYXNlcy4KICovCgpyZXF1aXJlLmFsaWFzZXMgPSB7fTsKCi8qKgogKiBSZXNvbHZlIGBwYXRoYC4KICoKICogTG9va3VwOgogKgogKiAgIC0gUEFUSC9pbmRleC5qcwogKiAgIC0gUEFUSC5qcwogKiAgIC0gUEFUSAogKgogKiBAcGFyYW0ge1N0cmluZ30gcGF0aAogKiBAcmV0dXJuIHtTdHJpbmd9IHBhdGggb3IgbnVsbAogKiBAYXBpIHByaXZhdGUKICovCgpyZXF1aXJlLnJlc29sdmUgPSBmdW5jdGlvbihwYXRoKSB7CiAgaWYgKHBhdGguY2hhckF0KDApID09PSAnLycpIHBhdGggPSBwYXRoLnNsaWNlKDEpOwoKICB2YXIgcGF0aHMgPSBbCiAgICBwYXRoLAogICAgcGF0aCArICcuanMnLAogICAgcGF0aCArICcuanNvbicsCiAgICBwYXRoICsgJy9pbmRleC5qcycsCiAgICBwYXRoICsgJy9pbmRleC5qc29uJwogIF07CgogIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBwYXRoID0gcGF0aHNbaV07CiAgICBpZiAocmVxdWlyZS5tb2R1bGVzLmhhc093blByb3BlcnR5KHBhdGgpKSByZXR1cm4gcGF0aDsKICAgIGlmIChyZXF1aXJlLmFsaWFzZXMuaGFzT3duUHJvcGVydHkocGF0aCkpIHJldHVybiByZXF1aXJlLmFsaWFzZXNbcGF0aF07CiAgfQp9OwoKLyoqCiAqIE5vcm1hbGl6ZSBgcGF0aGAgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgcGF0aC4KICoKICogQHBhcmFtIHtTdHJpbmd9IGN1cnIKICogQHBhcmFtIHtTdHJpbmd9IHBhdGgKICogQHJldHVybiB7U3RyaW5nfQogKiBAYXBpIHByaXZhdGUKICovCgpyZXF1aXJlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKGN1cnIsIHBhdGgpIHsKICB2YXIgc2VncyA9IFtdOwoKICBpZiAoJy4nICE9IHBhdGguY2hhckF0KDApKSByZXR1cm4gcGF0aDsKCiAgY3VyciA9IGN1cnIuc3BsaXQoJy8nKTsKICBwYXRoID0gcGF0aC5zcGxpdCgnLycpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyArK2kpIHsKICAgIGlmICgnLi4nID09IHBhdGhbaV0pIHsKICAgICAgY3Vyci5wb3AoKTsKICAgIH0gZWxzZSBpZiAoJy4nICE9IHBhdGhbaV0gJiYgJycgIT0gcGF0aFtpXSkgewogICAgICBzZWdzLnB1c2gocGF0aFtpXSk7CiAgICB9CiAgfQoKICByZXR1cm4gY3Vyci5jb25jYXQoc2Vncykuam9pbignLycpOwp9OwoKLyoqCiAqIFJlZ2lzdGVyIG1vZHVsZSBhdCBgcGF0aGAgd2l0aCBjYWxsYmFjayBgZGVmaW5pdGlvbmAuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAqIEBwYXJhbSB7RnVuY3Rpb259IGRlZmluaXRpb24KICogQGFwaSBwcml2YXRlCiAqLwoKcmVxdWlyZS5yZWdpc3RlciA9IGZ1bmN0aW9uKHBhdGgsIGRlZmluaXRpb24pIHsKICByZXF1aXJlLm1vZHVsZXNbcGF0aF0gPSBkZWZpbml0aW9uOwp9OwoKLyoqCiAqIEFsaWFzIGEgbW9kdWxlIGRlZmluaXRpb24uCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBmcm9tCiAqIEBwYXJhbSB7U3RyaW5nfSB0bwogKiBAYXBpIHByaXZhdGUKICovCgpyZXF1aXJlLmFsaWFzID0gZnVuY3Rpb24oZnJvbSwgdG8pIHsKICBpZiAoIXJlcXVpcmUubW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShmcm9tKSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gYWxpYXMgIicgKyBmcm9tICsgJyIsIGl0IGRvZXMgbm90IGV4aXN0Jyk7CiAgfQogIHJlcXVpcmUuYWxpYXNlc1t0b10gPSBmcm9tOwp9OwoKLyoqCiAqIFJldHVybiBhIHJlcXVpcmUgZnVuY3Rpb24gcmVsYXRpdmUgdG8gdGhlIGBwYXJlbnRgIHBhdGguCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBwYXJlbnQKICogQHJldHVybiB7RnVuY3Rpb259CiAqIEBhcGkgcHJpdmF0ZQogKi8KCnJlcXVpcmUucmVsYXRpdmUgPSBmdW5jdGlvbihwYXJlbnQpIHsKICB2YXIgcCA9IHJlcXVpcmUubm9ybWFsaXplKHBhcmVudCwgJy4uJyk7CgogIC8qKgogICAqIGxhc3RJbmRleE9mIGhlbHBlci4KICAgKi8KCiAgZnVuY3Rpb24gbGFzdEluZGV4T2YoYXJyLCBvYmopIHsKICAgIHZhciBpID0gYXJyLmxlbmd0aDsKICAgIHdoaWxlIChpLS0pIHsKICAgICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTsKICAgIH0KICAgIHJldHVybiAtMTsKICB9CgogIC8qKgogICAqIFRoZSByZWxhdGl2ZSByZXF1aXJlKCkgaXRzZWxmLgogICAqLwoKICBmdW5jdGlvbiBsb2NhbFJlcXVpcmUocGF0aCkgewogICAgdmFyIHJlc29sdmVkID0gbG9jYWxSZXF1aXJlLnJlc29sdmUocGF0aCk7CiAgICByZXR1cm4gcmVxdWlyZShyZXNvbHZlZCwgcGFyZW50LCBwYXRoKTsKICB9CgogIC8qKgogICAqIFJlc29sdmUgcmVsYXRpdmUgdG8gdGhlIHBhcmVudC4KICAgKi8KCiAgbG9jYWxSZXF1aXJlLnJlc29sdmUgPSBmdW5jdGlvbihwYXRoKSB7CiAgICB2YXIgYyA9IHBhdGguY2hhckF0KDApOwogICAgaWYgKCcvJyA9PSBjKSByZXR1cm4gcGF0aC5zbGljZSgxKTsKICAgIGlmICgnLicgPT0gYykgcmV0dXJuIHJlcXVpcmUubm9ybWFsaXplKHAsIHBhdGgpOwoKICAgIC8vIHJlc29sdmUgZGVwcyBieSByZXR1cm5pbmcKICAgIC8vIHRoZSBkZXAgaW4gdGhlIG5lYXJlc3QgImRlcHMiCiAgICAvLyBkaXJlY3RvcnkKICAgIHZhciBzZWdzID0gcGFyZW50LnNwbGl0KCcvJyk7CiAgICB2YXIgaSA9IGxhc3RJbmRleE9mKHNlZ3MsICdkZXBzJykgKyAxOwogICAgaWYgKCFpKSBpID0gMDsKICAgIHBhdGggPSBzZWdzLnNsaWNlKDAsIGkgKyAxKS5qb2luKCcvJykgKyAnL2RlcHMvJyArIHBhdGg7CiAgICByZXR1cm4gcGF0aDsKICB9OwoKICAvKioKICAgKiBDaGVjayBpZiBtb2R1bGUgaXMgZGVmaW5lZCBhdCBgcGF0aGAuCiAgICovCgogIGxvY2FsUmVxdWlyZS5leGlzdHMgPSBmdW5jdGlvbihwYXRoKSB7CiAgICByZXR1cm4gcmVxdWlyZS5tb2R1bGVzLmhhc093blByb3BlcnR5KGxvY2FsUmVxdWlyZS5yZXNvbHZlKHBhdGgpKTsKICB9OwoKICByZXR1cm4gbG9jYWxSZXF1aXJlOwp9OwpyZXF1aXJlLnJlZ2lzdGVyKCJjb21wb25lbnQtaW5kZXhvZi9pbmRleC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXJyLCBvYmopewogIGlmIChhcnIuaW5kZXhPZikgcmV0dXJuIGFyci5pbmRleE9mKG9iaik7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHsKICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGk7CiAgfQogIHJldHVybiAtMTsKfTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoImNvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKCi8qKgogKiBNb2R1bGUgZGVwZW5kZW5jaWVzLgogKi8KCnZhciBpbmRleCA9IHJlcXVpcmUoJ2luZGV4b2YnKTsKCi8qKgogKiBFeHBvc2UgYEVtaXR0ZXJgLgogKi8KCm1vZHVsZS5leHBvcnRzID0gRW1pdHRlcjsKCi8qKgogKiBJbml0aWFsaXplIGEgbmV3IGBFbWl0dGVyYC4KICoKICogQGFwaSBwdWJsaWMKICovCgpmdW5jdGlvbiBFbWl0dGVyKG9iaikgewogIGlmIChvYmopIHJldHVybiBtaXhpbihvYmopOwp9OwoKLyoqCiAqIE1peGluIHRoZSBlbWl0dGVyIHByb3BlcnRpZXMuCiAqCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmoKICogQHJldHVybiB7T2JqZWN0fQogKiBAYXBpIHByaXZhdGUKICovCgpmdW5jdGlvbiBtaXhpbihvYmopIHsKICBmb3IgKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHsKICAgIG9ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTsKICB9CiAgcmV0dXJuIG9iajsKfQoKLyoqCiAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudAogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbgogKiBAcmV0dXJuIHtFbWl0dGVyfQogKiBAYXBpIHB1YmxpYwogKi8KCkVtaXR0ZXIucHJvdG90eXBlLm9uID0KRW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7CiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9OwogICh0aGlzLl9jYWxsYmFja3NbZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XSB8fCBbXSkKICAgIC5wdXNoKGZuKTsKICByZXR1cm4gdGhpczsKfTsKCi8qKgogKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGUKICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC4KICoKICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50CiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuCiAqIEByZXR1cm4ge0VtaXR0ZXJ9CiAqIEBhcGkgcHVibGljCiAqLwoKRW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7CiAgdmFyIHNlbGYgPSB0aGlzOwogIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTsKCiAgZnVuY3Rpb24gb24oKSB7CiAgICBzZWxmLm9mZihldmVudCwgb24pOwogICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIGZuLl9vZmYgPSBvbjsKICB0aGlzLm9uKGV2ZW50LCBvbik7CiAgcmV0dXJuIHRoaXM7Cn07CgovKioKICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGwKICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudAogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbgogKiBAcmV0dXJuIHtFbWl0dGVyfQogKiBAYXBpIHB1YmxpYwogKi8KCkVtaXR0ZXIucHJvdG90eXBlLm9mZiA9CkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0KRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0KRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7CiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9OwoKICAvLyBhbGwKICBpZiAoMCA9PSBhcmd1bWVudHMubGVuZ3RoKSB7CiAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLy8gc3BlY2lmaWMgZXZlbnQKICB2YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTsKICBpZiAoIWNhbGxiYWNrcykgcmV0dXJuIHRoaXM7CgogIC8vIHJlbW92ZSBhbGwgaGFuZGxlcnMKICBpZiAoMSA9PSBhcmd1bWVudHMubGVuZ3RoKSB7CiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLy8gcmVtb3ZlIHNwZWNpZmljIGhhbmRsZXIKICB2YXIgaSA9IGluZGV4KGNhbGxiYWNrcywgZm4uX29mZiB8fCBmbik7CiAgaWYgKH5pKSBjYWxsYmFja3Muc3BsaWNlKGksIDEpOwogIHJldHVybiB0aGlzOwp9OwoKLyoqCiAqIEVtaXQgYGV2ZW50YCB3aXRoIHRoZSBnaXZlbiBhcmdzLgogKgogKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQKICogQHBhcmFtIHtNaXhlZH0gLi4uCiAqIEByZXR1cm4ge0VtaXR0ZXJ9CiAqLwoKRW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50KXsKICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307CiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkKICAgICwgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTsKCiAgaWYgKGNhbGxiYWNrcykgewogICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzLnNsaWNlKDApOwogICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsZW47ICsraSkgewogICAgICBjYWxsYmFja3NbaV0uYXBwbHkodGhpcywgYXJncyk7CiAgICB9CiAgfQoKICByZXR1cm4gdGhpczsKfTsKCi8qKgogKiBSZXR1cm4gYXJyYXkgb2YgY2FsbGJhY2tzIGZvciBgZXZlbnRgLgogKgogKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQKICogQHJldHVybiB7QXJyYXl9CiAqIEBhcGkgcHVibGljCiAqLwoKRW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24oZXZlbnQpewogIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTsKICByZXR1cm4gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XSB8fCBbXTsKfTsKCi8qKgogKiBDaGVjayBpZiB0aGlzIGVtaXR0ZXIgaGFzIGBldmVudGAgaGFuZGxlcnMuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudAogKiBAcmV0dXJuIHtCb29sZWFufQogKiBAYXBpIHB1YmxpYwogKi8KCkVtaXR0ZXIucHJvdG90eXBlLmhhc0xpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXsKICByZXR1cm4gISEgdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Ci8vICAgICBVbmRlcnNjb3JlLmpzIDEuMy4zCi8vICAgICAoYykgMjAwOS0yMDEyIEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBJbmMuCi8vICAgICBVbmRlcnNjb3JlIGlzIGZyZWVseSBkaXN0cmlidXRhYmxlIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KLy8gICAgIFBvcnRpb25zIG9mIFVuZGVyc2NvcmUgYXJlIGluc3BpcmVkIG9yIGJvcnJvd2VkIGZyb20gUHJvdG90eXBlLAovLyAgICAgT2xpdmVyIFN0ZWVsZSdzIEZ1bmN0aW9uYWwsIGFuZCBKb2huIFJlc2lnJ3MgTWljcm8tVGVtcGxhdGluZy4KLy8gICAgIEZvciBhbGwgZGV0YWlscyBhbmQgZG9jdW1lbnRhdGlvbjoKLy8gICAgIGh0dHA6Ly9kb2N1bWVudGNsb3VkLmdpdGh1Yi5jb20vdW5kZXJzY29yZQoKKGZ1bmN0aW9uKCkgewoKICAvLyBCYXNlbGluZSBzZXR1cAogIC8vIC0tLS0tLS0tLS0tLS0tCgogIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIGluIHRoZSBicm93c2VyLCBvciBgZ2xvYmFsYCBvbiB0aGUgc2VydmVyLgogIHZhciByb290ID0gdGhpczsKCiAgLy8gU2F2ZSB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGBfYCB2YXJpYWJsZS4KICB2YXIgcHJldmlvdXNVbmRlcnNjb3JlID0gcm9vdC5fOwoKICAvLyBFc3RhYmxpc2ggdGhlIG9iamVjdCB0aGF0IGdldHMgcmV0dXJuZWQgdG8gYnJlYWsgb3V0IG9mIGEgbG9vcCBpdGVyYXRpb24uCiAgdmFyIGJyZWFrZXIgPSB7fTsKCiAgLy8gU2F2ZSBieXRlcyBpbiB0aGUgbWluaWZpZWQgKGJ1dCBub3QgZ3ppcHBlZCkgdmVyc2lvbjoKICB2YXIgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSwgT2JqUHJvdG8gPSBPYmplY3QucHJvdG90eXBlLCBGdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGU7CgogIC8vIENyZWF0ZSBxdWljayByZWZlcmVuY2UgdmFyaWFibGVzIGZvciBzcGVlZCBhY2Nlc3MgdG8gY29yZSBwcm90b3R5cGVzLgogIHZhciBwdXNoICAgICAgICAgICAgID0gQXJyYXlQcm90by5wdXNoLAogICAgICBzbGljZSAgICAgICAgICAgID0gQXJyYXlQcm90by5zbGljZSwKICAgICAgdW5zaGlmdCAgICAgICAgICA9IEFycmF5UHJvdG8udW5zaGlmdCwKICAgICAgdG9TdHJpbmcgICAgICAgICA9IE9ialByb3RvLnRvU3RyaW5nLAogICAgICBoYXNPd25Qcm9wZXJ0eSAgID0gT2JqUHJvdG8uaGFzT3duUHJvcGVydHk7CgogIC8vIEFsbCAqKkVDTUFTY3JpcHQgNSoqIG5hdGl2ZSBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbnMgdGhhdCB3ZSBob3BlIHRvIHVzZQogIC8vIGFyZSBkZWNsYXJlZCBoZXJlLgogIHZhcgogICAgbmF0aXZlRm9yRWFjaCAgICAgID0gQXJyYXlQcm90by5mb3JFYWNoLAogICAgbmF0aXZlTWFwICAgICAgICAgID0gQXJyYXlQcm90by5tYXAsCiAgICBuYXRpdmVSZWR1Y2UgICAgICAgPSBBcnJheVByb3RvLnJlZHVjZSwKICAgIG5hdGl2ZVJlZHVjZVJpZ2h0ICA9IEFycmF5UHJvdG8ucmVkdWNlUmlnaHQsCiAgICBuYXRpdmVGaWx0ZXIgICAgICAgPSBBcnJheVByb3RvLmZpbHRlciwKICAgIG5hdGl2ZUV2ZXJ5ICAgICAgICA9IEFycmF5UHJvdG8uZXZlcnksCiAgICBuYXRpdmVTb21lICAgICAgICAgPSBBcnJheVByb3RvLnNvbWUsCiAgICBuYXRpdmVJbmRleE9mICAgICAgPSBBcnJheVByb3RvLmluZGV4T2YsCiAgICBuYXRpdmVMYXN0SW5kZXhPZiAgPSBBcnJheVByb3RvLmxhc3RJbmRleE9mLAogICAgbmF0aXZlSXNBcnJheSAgICAgID0gQXJyYXkuaXNBcnJheSwKICAgIG5hdGl2ZUtleXMgICAgICAgICA9IE9iamVjdC5rZXlzLAogICAgbmF0aXZlQmluZCAgICAgICAgID0gRnVuY1Byb3RvLmJpbmQ7CgogIC8vIENyZWF0ZSBhIHNhZmUgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgdXNlIGJlbG93LgogIHZhciBfID0gZnVuY3Rpb24ob2JqKSB7IHJldHVybiBuZXcgd3JhcHBlcihvYmopOyB9OwoKICAvLyBFeHBvcnQgdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciAqKk5vZGUuanMqKiwgd2l0aAogIC8vIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGZvciB0aGUgb2xkIGByZXF1aXJlKClgIEFQSS4gSWYgd2UncmUgaW4KICAvLyB0aGUgYnJvd3NlciwgYWRkIGBfYCBhcyBhIGdsb2JhbCBvYmplY3QgdmlhIGEgc3RyaW5nIGlkZW50aWZpZXIsCiAgLy8gZm9yIENsb3N1cmUgQ29tcGlsZXIgImFkdmFuY2VkIiBtb2RlLgogIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykgewogICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfOwogICAgfQogICAgZXhwb3J0cy5fID0gXzsKICB9IGVsc2UgewogICAgcm9vdFsnXyddID0gXzsKICB9CgogIC8vIEN1cnJlbnQgdmVyc2lvbi4KICBfLlZFUlNJT04gPSAnMS4zLjMnOwoKICAvLyBDb2xsZWN0aW9uIEZ1bmN0aW9ucwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8vIFRoZSBjb3JuZXJzdG9uZSwgYW4gYGVhY2hgIGltcGxlbWVudGF0aW9uLCBha2EgYGZvckVhY2hgLgogIC8vIEhhbmRsZXMgb2JqZWN0cyB3aXRoIHRoZSBidWlsdC1pbiBgZm9yRWFjaGAsIGFycmF5cywgYW5kIHJhdyBvYmplY3RzLgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBmb3JFYWNoYCBpZiBhdmFpbGFibGUuCiAgdmFyIGVhY2ggPSBfLmVhY2ggPSBfLmZvckVhY2ggPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICBpZiAob2JqID09IG51bGwpIHJldHVybjsKICAgIGlmIChuYXRpdmVGb3JFYWNoICYmIG9iai5mb3JFYWNoID09PSBuYXRpdmVGb3JFYWNoKSB7CiAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCBjb250ZXh0KTsKICAgIH0gZWxzZSBpZiAob2JqLmxlbmd0aCA9PT0gK29iai5sZW5ndGgpIHsKICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopID09PSBicmVha2VyKSByZXR1cm47CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoXy5oYXMob2JqLCBrZXkpKSB7CiAgICAgICAgICBpZiAoaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopID09PSBicmVha2VyKSByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gUmV0dXJuIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRvciB0byBlYWNoIGVsZW1lbnQuCiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYG1hcGAgaWYgYXZhaWxhYmxlLgogIF8ubWFwID0gXy5jb2xsZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgY29udGV4dCkgewogICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdHM7CiAgICBpZiAobmF0aXZlTWFwICYmIG9iai5tYXAgPT09IG5hdGl2ZU1hcCkgcmV0dXJuIG9iai5tYXAoaXRlcmF0b3IsIGNvbnRleHQpOwogICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkgewogICAgICByZXN1bHRzW3Jlc3VsdHMubGVuZ3RoXSA9IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBsaXN0KTsKICAgIH0pOwogICAgcmV0dXJuIHJlc3VsdHM7CiAgfTsKCiAgLy8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLAogIC8vIG9yIGBmb2xkbGAuIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGByZWR1Y2VgIGlmIGF2YWlsYWJsZS4KICBfLnJlZHVjZSA9IF8uZm9sZGwgPSBfLmluamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIG1lbW8sIGNvbnRleHQpIHsKICAgIHZhciBpbml0aWFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDI7CiAgICBpZiAob2JqID09IG51bGwpIG9iaiA9IFtdOwogICAgaWYgKG5hdGl2ZVJlZHVjZSAmJiBvYmoucmVkdWNlID09PSBuYXRpdmVSZWR1Y2UpIHsKICAgICAgaWYgKGNvbnRleHQpIGl0ZXJhdG9yID0gXy5iaW5kKGl0ZXJhdG9yLCBjb250ZXh0KTsKICAgICAgcmV0dXJuIGluaXRpYWwgPyBvYmoucmVkdWNlKGl0ZXJhdG9yLCBtZW1vKSA6IG9iai5yZWR1Y2UoaXRlcmF0b3IpOwogICAgfQogICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkgewogICAgICBpZiAoIWluaXRpYWwpIHsKICAgICAgICBtZW1vID0gdmFsdWU7CiAgICAgICAgaW5pdGlhbCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWVtbyA9IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgbWVtbywgdmFsdWUsIGluZGV4LCBsaXN0KTsKICAgICAgfQogICAgfSk7CiAgICBpZiAoIWluaXRpYWwpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1JlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUnKTsKICAgIHJldHVybiBtZW1vOwogIH07CgogIC8vIFRoZSByaWdodC1hc3NvY2lhdGl2ZSB2ZXJzaW9uIG9mIHJlZHVjZSwgYWxzbyBrbm93biBhcyBgZm9sZHJgLgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGByZWR1Y2VSaWdodGAgaWYgYXZhaWxhYmxlLgogIF8ucmVkdWNlUmlnaHQgPSBfLmZvbGRyID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgbWVtbywgY29udGV4dCkgewogICAgdmFyIGluaXRpYWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMjsKICAgIGlmIChvYmogPT0gbnVsbCkgb2JqID0gW107CiAgICBpZiAobmF0aXZlUmVkdWNlUmlnaHQgJiYgb2JqLnJlZHVjZVJpZ2h0ID09PSBuYXRpdmVSZWR1Y2VSaWdodCkgewogICAgICBpZiAoY29udGV4dCkgaXRlcmF0b3IgPSBfLmJpbmQoaXRlcmF0b3IsIGNvbnRleHQpOwogICAgICByZXR1cm4gaW5pdGlhbCA/IG9iai5yZWR1Y2VSaWdodChpdGVyYXRvciwgbWVtbykgOiBvYmoucmVkdWNlUmlnaHQoaXRlcmF0b3IpOwogICAgfQogICAgdmFyIHJldmVyc2VkID0gXy50b0FycmF5KG9iaikucmV2ZXJzZSgpOwogICAgaWYgKGNvbnRleHQgJiYgIWluaXRpYWwpIGl0ZXJhdG9yID0gXy5iaW5kKGl0ZXJhdG9yLCBjb250ZXh0KTsKICAgIHJldHVybiBpbml0aWFsID8gXy5yZWR1Y2UocmV2ZXJzZWQsIGl0ZXJhdG9yLCBtZW1vLCBjb250ZXh0KSA6IF8ucmVkdWNlKHJldmVyc2VkLCBpdGVyYXRvcik7CiAgfTsKCiAgLy8gUmV0dXJuIHRoZSBmaXJzdCB2YWx1ZSB3aGljaCBwYXNzZXMgYSB0cnV0aCB0ZXN0LiBBbGlhc2VkIGFzIGBkZXRlY3RgLgogIF8uZmluZCA9IF8uZGV0ZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgY29udGV4dCkgewogICAgdmFyIHJlc3VsdDsKICAgIGFueShvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkgewogICAgICBpZiAoaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGxpc3QpKSB7CiAgICAgICAgcmVzdWx0ID0gdmFsdWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBmaWx0ZXJgIGlmIGF2YWlsYWJsZS4KICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLgogIF8uZmlsdGVyID0gXy5zZWxlY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0czsKICAgIGlmIChuYXRpdmVGaWx0ZXIgJiYgb2JqLmZpbHRlciA9PT0gbmF0aXZlRmlsdGVyKSByZXR1cm4gb2JqLmZpbHRlcihpdGVyYXRvciwgY29udGV4dCk7CiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7CiAgICAgIGlmIChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHNbcmVzdWx0cy5sZW5ndGhdID0gdmFsdWU7CiAgICB9KTsKICAgIHJldHVybiByZXN1bHRzOwogIH07CgogIC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIGZvciB3aGljaCBhIHRydXRoIHRlc3QgZmFpbHMuCiAgXy5yZWplY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0czsKICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHsKICAgICAgaWYgKCFpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHNbcmVzdWx0cy5sZW5ndGhdID0gdmFsdWU7CiAgICB9KTsKICAgIHJldHVybiByZXN1bHRzOwogIH07CgogIC8vIERldGVybWluZSB3aGV0aGVyIGFsbCBvZiB0aGUgZWxlbWVudHMgbWF0Y2ggYSB0cnV0aCB0ZXN0LgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBldmVyeWAgaWYgYXZhaWxhYmxlLgogIC8vIEFsaWFzZWQgYXMgYGFsbGAuCiAgXy5ldmVyeSA9IF8uYWxsID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgY29udGV4dCkgewogICAgdmFyIHJlc3VsdCA9IHRydWU7CiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiByZXN1bHQ7CiAgICBpZiAobmF0aXZlRXZlcnkgJiYgb2JqLmV2ZXJ5ID09PSBuYXRpdmVFdmVyeSkgcmV0dXJuIG9iai5ldmVyeShpdGVyYXRvciwgY29udGV4dCk7CiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7CiAgICAgIGlmICghKHJlc3VsdCA9IHJlc3VsdCAmJiBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpKSByZXR1cm4gYnJlYWtlcjsKICAgIH0pOwogICAgcmV0dXJuICEhcmVzdWx0OwogIH07CgogIC8vIERldGVybWluZSBpZiBhdCBsZWFzdCBvbmUgZWxlbWVudCBpbiB0aGUgb2JqZWN0IG1hdGNoZXMgYSB0cnV0aCB0ZXN0LgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBzb21lYCBpZiBhdmFpbGFibGUuCiAgLy8gQWxpYXNlZCBhcyBgYW55YC4KICB2YXIgYW55ID0gXy5zb21lID0gXy5hbnkgPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICBpdGVyYXRvciB8fCAoaXRlcmF0b3IgPSBfLmlkZW50aXR5KTsKICAgIHZhciByZXN1bHQgPSBmYWxzZTsKICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdDsKICAgIGlmIChuYXRpdmVTb21lICYmIG9iai5zb21lID09PSBuYXRpdmVTb21lKSByZXR1cm4gb2JqLnNvbWUoaXRlcmF0b3IsIGNvbnRleHQpOwogICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkgewogICAgICBpZiAocmVzdWx0IHx8IChyZXN1bHQgPSBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpKSByZXR1cm4gYnJlYWtlcjsKICAgIH0pOwogICAgcmV0dXJuICEhcmVzdWx0OwogIH07CgogIC8vIERldGVybWluZSBpZiBhIGdpdmVuIHZhbHVlIGlzIGluY2x1ZGVkIGluIHRoZSBhcnJheSBvciBvYmplY3QgdXNpbmcgYD09PWAuCiAgLy8gQWxpYXNlZCBhcyBgY29udGFpbnNgLgogIF8uaW5jbHVkZSA9IF8uY29udGFpbnMgPSBmdW5jdGlvbihvYmosIHRhcmdldCkgewogICAgdmFyIGZvdW5kID0gZmFsc2U7CiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiBmb3VuZDsKICAgIGlmIChuYXRpdmVJbmRleE9mICYmIG9iai5pbmRleE9mID09PSBuYXRpdmVJbmRleE9mKSByZXR1cm4gb2JqLmluZGV4T2YodGFyZ2V0KSAhPSAtMTsKICAgIGZvdW5kID0gYW55KG9iaiwgZnVuY3Rpb24odmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlID09PSB0YXJnZXQ7CiAgICB9KTsKICAgIHJldHVybiBmb3VuZDsKICB9OwoKICAvLyBJbnZva2UgYSBtZXRob2QgKHdpdGggYXJndW1lbnRzKSBvbiBldmVyeSBpdGVtIGluIGEgY29sbGVjdGlvbi4KICBfLmludm9rZSA9IGZ1bmN0aW9uKG9iaiwgbWV0aG9kKSB7CiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTsKICAgIHJldHVybiBfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIHJldHVybiAoXy5pc0Z1bmN0aW9uKG1ldGhvZCkgPyBtZXRob2QgOiB2YWx1ZVttZXRob2RdKS5hcHBseSh2YWx1ZSwgYXJncyk7CiAgICB9KTsKICB9OwoKICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBtYXBgOiBmZXRjaGluZyBhIHByb3BlcnR5LgogIF8ucGx1Y2sgPSBmdW5jdGlvbihvYmosIGtleSkgewogICAgcmV0dXJuIF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUpeyByZXR1cm4gdmFsdWVba2V5XTsgfSk7CiAgfTsKCiAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgb3IgKGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLgogIC8vIENhbid0IG9wdGltaXplIGFycmF5cyBvZiBpbnRlZ2VycyBsb25nZXIgdGhhbiA2NSw1MzUgZWxlbWVudHMuCiAgLy8gU2VlOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9ODA3OTcKICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIGlmICghaXRlcmF0b3IgJiYgXy5pc0FycmF5KG9iaikgJiYgb2JqWzBdID09PSArb2JqWzBdICYmIG9iai5sZW5ndGggPCA2NTUzNSkgewogICAgICByZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCwgb2JqKTsKICAgIH0KICAgIGlmICghaXRlcmF0b3IgJiYgXy5pc0VtcHR5KG9iaikpIHJldHVybiAtSW5maW5pdHk7CiAgICB2YXIgcmVzdWx0ID0ge2NvbXB1dGVkIDogLUluZmluaXR5fTsKICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHsKICAgICAgdmFyIGNvbXB1dGVkID0gaXRlcmF0b3IgPyBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkgOiB2YWx1ZTsKICAgICAgY29tcHV0ZWQgPj0gcmVzdWx0LmNvbXB1dGVkICYmIChyZXN1bHQgPSB7dmFsdWUgOiB2YWx1ZSwgY29tcHV0ZWQgOiBjb21wdXRlZH0pOwogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0LnZhbHVlOwogIH07CgogIC8vIFJldHVybiB0aGUgbWluaW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS4KICBfLm1pbiA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIGlmICghaXRlcmF0b3IgJiYgXy5pc0FycmF5KG9iaikgJiYgb2JqWzBdID09PSArb2JqWzBdICYmIG9iai5sZW5ndGggPCA2NTUzNSkgewogICAgICByZXR1cm4gTWF0aC5taW4uYXBwbHkoTWF0aCwgb2JqKTsKICAgIH0KICAgIGlmICghaXRlcmF0b3IgJiYgXy5pc0VtcHR5KG9iaikpIHJldHVybiBJbmZpbml0eTsKICAgIHZhciByZXN1bHQgPSB7Y29tcHV0ZWQgOiBJbmZpbml0eX07CiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7CiAgICAgIHZhciBjb21wdXRlZCA9IGl0ZXJhdG9yID8gaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGxpc3QpIDogdmFsdWU7CiAgICAgIGNvbXB1dGVkIDwgcmVzdWx0LmNvbXB1dGVkICYmIChyZXN1bHQgPSB7dmFsdWUgOiB2YWx1ZSwgY29tcHV0ZWQgOiBjb21wdXRlZH0pOwogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0LnZhbHVlOwogIH07CgogIC8vIFNodWZmbGUgYW4gYXJyYXkuCiAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgcmFuZDsKICAgIHZhciBpbmRleCA9IDA7CiAgICB2YXIgc2h1ZmZsZWQgPSBbXTsKICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICByYW5kID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKytpbmRleCk7CiAgICAgIHNodWZmbGVkW2luZGV4IC0gMV0gPSBzaHVmZmxlZFtyYW5kXTsKICAgICAgc2h1ZmZsZWRbcmFuZF0gPSB2YWx1ZTsKICAgIH0pOwogICAgcmV0dXJuIHNodWZmbGVkOwogIH07CgogIC8vIFNvcnQgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiBwcm9kdWNlZCBieSBhbiBpdGVyYXRvci4KICBfLnNvcnRCeSA9IGZ1bmN0aW9uKG9iaiwgdmFsLCBjb250ZXh0KSB7CiAgICB2YXIgaXRlcmF0b3IgPSBsb29rdXBJdGVyYXRvcihvYmosIHZhbCk7CiAgICByZXR1cm4gXy5wbHVjayhfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkgewogICAgICByZXR1cm4gewogICAgICAgIHZhbHVlIDogdmFsdWUsCiAgICAgICAgY3JpdGVyaWEgOiBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkKICAgICAgfTsKICAgIH0pLnNvcnQoZnVuY3Rpb24obGVmdCwgcmlnaHQpIHsKICAgICAgdmFyIGEgPSBsZWZ0LmNyaXRlcmlhLCBiID0gcmlnaHQuY3JpdGVyaWE7CiAgICAgIGlmIChhID09PSB2b2lkIDApIHJldHVybiAxOwogICAgICBpZiAoYiA9PT0gdm9pZCAwKSByZXR1cm4gLTE7CiAgICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMDsKICAgIH0pLCAndmFsdWUnKTsKICB9OwoKICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiB0byBnZW5lcmF0ZSBsb29rdXAgaXRlcmF0b3JzLgogIHZhciBsb29rdXBJdGVyYXRvciA9IGZ1bmN0aW9uKG9iaiwgdmFsKSB7CiAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKHZhbCkgPyB2YWwgOiBmdW5jdGlvbihvYmopIHsgcmV0dXJuIG9ialt2YWxdOyB9OwogIH07CgogIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHVzZWQgZm9yIGFnZ3JlZ2F0ZSAiZ3JvdXAgYnkiIG9wZXJhdGlvbnMuCiAgdmFyIGdyb3VwID0gZnVuY3Rpb24ob2JqLCB2YWwsIGJlaGF2aW9yKSB7CiAgICB2YXIgcmVzdWx0ID0ge307CiAgICB2YXIgaXRlcmF0b3IgPSBsb29rdXBJdGVyYXRvcihvYmosIHZhbCk7CiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CiAgICAgIHZhciBrZXkgPSBpdGVyYXRvcih2YWx1ZSwgaW5kZXgpOwogICAgICBiZWhhdmlvcihyZXN1bHQsIGtleSwgdmFsdWUpOwogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIC8vIEdyb3VwcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLiBQYXNzIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGUKICAvLyB0byBncm91cCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGNyaXRlcmlvbi4KICBfLmdyb3VwQnkgPSBmdW5jdGlvbihvYmosIHZhbCkgewogICAgcmV0dXJuIGdyb3VwKG9iaiwgdmFsLCBmdW5jdGlvbihyZXN1bHQsIGtleSwgdmFsdWUpIHsKICAgICAgKHJlc3VsdFtrZXldIHx8IChyZXN1bHRba2V5XSA9IFtdKSkucHVzaCh2YWx1ZSk7CiAgICB9KTsKICB9OwoKICAvLyBDb3VudHMgaW5zdGFuY2VzIG9mIGFuIG9iamVjdCB0aGF0IGdyb3VwIGJ5IGEgY2VydGFpbiBjcml0ZXJpb24uIFBhc3MKICAvLyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlIHRvIGNvdW50IGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUKICAvLyBjcml0ZXJpb24uCiAgXy5jb3VudEJ5ID0gZnVuY3Rpb24ob2JqLCB2YWwpIHsKICAgIHJldHVybiBncm91cChvYmosIHZhbCwgZnVuY3Rpb24ocmVzdWx0LCBrZXksIHZhbHVlKSB7CiAgICAgIHJlc3VsdFtrZXldIHx8IChyZXN1bHRba2V5XSA9IDApOwogICAgICByZXN1bHRba2V5XSsrOwogICAgfSk7CiAgfTsKCiAgLy8gVXNlIGEgY29tcGFyYXRvciBmdW5jdGlvbiB0byBmaWd1cmUgb3V0IHRoZSBzbWFsbGVzdCBpbmRleCBhdCB3aGljaAogIC8vIGFuIG9iamVjdCBzaG91bGQgYmUgaW5zZXJ0ZWQgc28gYXMgdG8gbWFpbnRhaW4gb3JkZXIuIFVzZXMgYmluYXJ5IHNlYXJjaC4KICBfLnNvcnRlZEluZGV4ID0gZnVuY3Rpb24oYXJyYXksIG9iaiwgaXRlcmF0b3IpIHsKICAgIGl0ZXJhdG9yIHx8IChpdGVyYXRvciA9IF8uaWRlbnRpdHkpOwogICAgdmFyIHZhbHVlID0gaXRlcmF0b3Iob2JqKTsKICAgIHZhciBsb3cgPSAwLCBoaWdoID0gYXJyYXkubGVuZ3RoOwogICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHsKICAgICAgdmFyIG1pZCA9IChsb3cgKyBoaWdoKSA+PiAxOwogICAgICBpdGVyYXRvcihhcnJheVttaWRdKSA8IHZhbHVlID8gbG93ID0gbWlkICsgMSA6IGhpZ2ggPSBtaWQ7CiAgICB9CiAgICByZXR1cm4gbG93OwogIH07CgogIC8vIFNhZmVseSBjb252ZXJ0IGFueXRoaW5nIGl0ZXJhYmxlIGludG8gYSByZWFsLCBsaXZlIGFycmF5LgogIF8udG9BcnJheSA9IGZ1bmN0aW9uKG9iaikgewogICAgaWYgKCFvYmopICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTsKICAgIGlmIChfLmlzQXJyYXkob2JqKSkgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2xpY2UuY2FsbChvYmopOwogICAgaWYgKF8uaXNBcmd1bWVudHMob2JqKSkgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzbGljZS5jYWxsKG9iaik7CiAgICBpZiAob2JqLnRvQXJyYXkgJiYgXy5pc0Z1bmN0aW9uKG9iai50b0FycmF5KSkgcmV0dXJuIG9iai50b0FycmF5KCk7CiAgICByZXR1cm4gXy52YWx1ZXMob2JqKTsKICB9OwoKICAvLyBSZXR1cm4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBvYmplY3QuCiAgXy5zaXplID0gZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gXy5pc0FycmF5KG9iaikgPyBvYmoubGVuZ3RoIDogXy5rZXlzKG9iaikubGVuZ3RoOwogIH07CgogIC8vIEFycmF5IEZ1bmN0aW9ucwogIC8vIC0tLS0tLS0tLS0tLS0tLQoKICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE4KICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LiBBbGlhc2VkIGFzIGBoZWFkYCBhbmQgYHRha2VgLiBUaGUgKipndWFyZCoqIGNoZWNrCiAgLy8gYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgXy5tYXBgLgogIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHsKICAgIHJldHVybiAobiAhPSBudWxsKSAmJiAhZ3VhcmQgPyBzbGljZS5jYWxsKGFycmF5LCAwLCBuKSA6IGFycmF5WzBdOwogIH07CgogIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGxhc3QgZW50cnkgb2YgdGhlIGFycmF5LiBFc3BlY2lhbGx5IHVzZWZ1bCBvbgogIC8vIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIGFsbCB0aGUgdmFsdWVzIGluCiAgLy8gdGhlIGFycmF5LCBleGNsdWRpbmcgdGhlIGxhc3QgTi4gVGhlICoqZ3VhcmQqKiBjaGVjayBhbGxvd3MgaXQgdG8gd29yayB3aXRoCiAgLy8gYF8ubWFwYC4KICBfLmluaXRpYWwgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHsKICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCAwLCBhcnJheS5sZW5ndGggLSAoKG4gPT0gbnVsbCkgfHwgZ3VhcmQgPyAxIDogbikpOwogIH07CgogIC8vIEdldCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBsYXN0IE4KICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LiBUaGUgKipndWFyZCoqIGNoZWNrIGFsbG93cyBpdCB0byB3b3JrIHdpdGggYF8ubWFwYC4KICBfLmxhc3QgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHsKICAgIGlmICgobiAhPSBudWxsKSAmJiAhZ3VhcmQpIHsKICAgICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIE1hdGgubWF4KGFycmF5Lmxlbmd0aCAtIG4sIDApKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAxXTsKICAgIH0KICB9OwoKICAvLyBSZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBmaXJzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEFsaWFzZWQgYXMgYHRhaWxgLgogIC8vIEVzcGVjaWFsbHkgdXNlZnVsIG9uIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nIGFuICoqaW5kZXgqKiB3aWxsIHJldHVybgogIC8vIHRoZSByZXN0IG9mIHRoZSB2YWx1ZXMgaW4gdGhlIGFycmF5IGZyb20gdGhhdCBpbmRleCBvbndhcmQuIFRoZSAqKmd1YXJkKioKICAvLyBjaGVjayBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuCiAgXy5yZXN0ID0gXy50YWlsID0gZnVuY3Rpb24oYXJyYXksIGluZGV4LCBndWFyZCkgewogICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIChpbmRleCA9PSBudWxsKSB8fCBndWFyZCA/IDEgOiBpbmRleCk7CiAgfTsKCiAgLy8gVHJpbSBvdXQgYWxsIGZhbHN5IHZhbHVlcyBmcm9tIGFuIGFycmF5LgogIF8uY29tcGFjdCA9IGZ1bmN0aW9uKGFycmF5KSB7CiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKXsgcmV0dXJuICEhdmFsdWU7IH0pOwogIH07CgogIC8vIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGEgcmVjdXJzaXZlIGBmbGF0dGVuYCBmdW5jdGlvbi4KICB2YXIgZmxhdHRlbiA9IGZ1bmN0aW9uKGlucHV0LCBzaGFsbG93LCBvdXRwdXQpIHsKICAgIGVhY2goaW5wdXQsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIGlmIChfLmlzQXJyYXkodmFsdWUpKSB7CiAgICAgICAgc2hhbGxvdyA/IHB1c2guYXBwbHkob3V0cHV0LCB2YWx1ZSkgOiBmbGF0dGVuKHZhbHVlLCBzaGFsbG93LCBvdXRwdXQpOwogICAgICB9IGVsc2UgewogICAgICAgIG91dHB1dC5wdXNoKHZhbHVlKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gb3V0cHV0OwogIH07CgogIC8vIFJldHVybiBhIGNvbXBsZXRlbHkgZmxhdHRlbmVkIHZlcnNpb24gb2YgYW4gYXJyYXkuCiAgXy5mbGF0dGVuID0gZnVuY3Rpb24oYXJyYXksIHNoYWxsb3cpIHsKICAgIHJldHVybiBmbGF0dGVuKGFycmF5LCBzaGFsbG93LCBbXSk7CiAgfTsKCiAgLy8gUmV0dXJuIGEgdmVyc2lvbiBvZiB0aGUgYXJyYXkgdGhhdCBkb2VzIG5vdCBjb250YWluIHRoZSBzcGVjaWZpZWQgdmFsdWUocykuCiAgXy53aXRob3V0ID0gZnVuY3Rpb24oYXJyYXkpIHsKICAgIHJldHVybiBfLmRpZmZlcmVuY2UoYXJyYXksIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7CiAgfTsKCiAgLy8gUHJvZHVjZSBhIGR1cGxpY2F0ZS1mcmVlIHZlcnNpb24gb2YgdGhlIGFycmF5LiBJZiB0aGUgYXJyYXkgaGFzIGFscmVhZHkKICAvLyBiZWVuIHNvcnRlZCwgeW91IGhhdmUgdGhlIG9wdGlvbiBvZiB1c2luZyBhIGZhc3RlciBhbGdvcml0aG0uCiAgLy8gQWxpYXNlZCBhcyBgdW5pcXVlYC4KICBfLnVuaXEgPSBfLnVuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5LCBpc1NvcnRlZCwgaXRlcmF0b3IpIHsKICAgIHZhciBpbml0aWFsID0gaXRlcmF0b3IgPyBfLm1hcChhcnJheSwgaXRlcmF0b3IpIDogYXJyYXk7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgXy5yZWR1Y2UoaW5pdGlhbCwgZnVuY3Rpb24obWVtbywgdmFsdWUsIGluZGV4KSB7CiAgICAgIGlmIChpc1NvcnRlZCA/IChfLmxhc3QobWVtbykgIT09IHZhbHVlIHx8ICFtZW1vLmxlbmd0aCkgOiAhXy5pbmNsdWRlKG1lbW8sIHZhbHVlKSkgewogICAgICAgIG1lbW8ucHVzaCh2YWx1ZSk7CiAgICAgICAgcmVzdWx0cy5wdXNoKGFycmF5W2luZGV4XSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG1lbW87CiAgICB9LCBbXSk7CiAgICByZXR1cm4gcmVzdWx0czsKICB9OwoKICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIHVuaW9uOiBlYWNoIGRpc3RpbmN0IGVsZW1lbnQgZnJvbSBhbGwgb2YKICAvLyB0aGUgcGFzc2VkLWluIGFycmF5cy4KICBfLnVuaW9uID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gXy51bmlxKGZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCBbXSkpOwogIH07CgogIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyBldmVyeSBpdGVtIHNoYXJlZCBiZXR3ZWVuIGFsbCB0aGUKICAvLyBwYXNzZWQtaW4gYXJyYXlzLgogIF8uaW50ZXJzZWN0aW9uID0gZnVuY3Rpb24oYXJyYXkpIHsKICAgIHZhciByZXN0ID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgcmV0dXJuIF8uZmlsdGVyKF8udW5pcShhcnJheSksIGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgcmV0dXJuIF8uZXZlcnkocmVzdCwgZnVuY3Rpb24ob3RoZXIpIHsKICAgICAgICByZXR1cm4gXy5pbmRleE9mKG90aGVyLCBpdGVtKSA+PSAwOwogICAgICB9KTsKICAgIH0pOwogIH07CgogIC8vIFRha2UgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBvbmUgYXJyYXkgYW5kIGEgbnVtYmVyIG9mIG90aGVyIGFycmF5cy4KICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLgogIF8uZGlmZmVyZW5jZSA9IGZ1bmN0aW9uKGFycmF5KSB7CiAgICB2YXIgcmVzdCA9IGZsYXR0ZW4oc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCB0cnVlLCBbXSk7CiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKXsgcmV0dXJuICFfLmluY2x1ZGUocmVzdCwgdmFsdWUpOyB9KTsKICB9OwoKICAvLyBaaXAgdG9nZXRoZXIgbXVsdGlwbGUgbGlzdHMgaW50byBhIHNpbmdsZSBhcnJheSAtLSBlbGVtZW50cyB0aGF0IHNoYXJlCiAgLy8gYW4gaW5kZXggZ28gdG9nZXRoZXIuCiAgXy56aXAgPSBmdW5jdGlvbigpIHsKICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgdmFyIGxlbmd0aCA9IF8ubWF4KF8ucGx1Y2soYXJncywgJ2xlbmd0aCcpKTsKICAgIHZhciByZXN1bHRzID0gbmV3IEFycmF5KGxlbmd0aCk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIHJlc3VsdHNbaV0gPSBfLnBsdWNrKGFyZ3MsICIiICsgaSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9OwoKICAvLyBaaXAgdG9nZXRoZXIgdHdvIGFycmF5cyAtLSBhbiBhcnJheSBvZiBrZXlzIGFuZCBhbiBhcnJheSBvZiB2YWx1ZXMgLS0gaW50bwogIC8vIGEgc2luZ2xlIG9iamVjdC4KICBfLnppcE9iamVjdCA9IGZ1bmN0aW9uKGtleXMsIHZhbHVlcykgewogICAgdmFyIHJlc3VsdCA9IHt9OwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICByZXN1bHRba2V5c1tpXV0gPSB2YWx1ZXNbaV07CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIC8vIElmIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcGx5IHVzIHdpdGggaW5kZXhPZiAoSSdtIGxvb2tpbmcgYXQgeW91LCAqKk1TSUUqKiksCiAgLy8gd2UgbmVlZCB0aGlzIGZ1bmN0aW9uLiBSZXR1cm4gdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuCiAgLy8gaXRlbSBpbiBhbiBhcnJheSwgb3IgLTEgaWYgdGhlIGl0ZW0gaXMgbm90IGluY2x1ZGVkIGluIHRoZSBhcnJheS4KICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgaW5kZXhPZmAgaWYgYXZhaWxhYmxlLgogIC8vIElmIHRoZSBhcnJheSBpcyBsYXJnZSBhbmQgYWxyZWFkeSBpbiBzb3J0IG9yZGVyLCBwYXNzIGB0cnVlYAogIC8vIGZvciAqKmlzU29ydGVkKiogdG8gdXNlIGJpbmFyeSBzZWFyY2guCiAgXy5pbmRleE9mID0gZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGlzU29ydGVkKSB7CiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIC0xOwogICAgdmFyIGksIGw7CiAgICBpZiAoaXNTb3J0ZWQpIHsKICAgICAgaSA9IF8uc29ydGVkSW5kZXgoYXJyYXksIGl0ZW0pOwogICAgICByZXR1cm4gYXJyYXlbaV0gPT09IGl0ZW0gPyBpIDogLTE7CiAgICB9CiAgICBpZiAobmF0aXZlSW5kZXhPZiAmJiBhcnJheS5pbmRleE9mID09PSBuYXRpdmVJbmRleE9mKSByZXR1cm4gYXJyYXkuaW5kZXhPZihpdGVtKTsKICAgIGZvciAoaSA9IDAsIGwgPSBhcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIGlmIChhcnJheVtpXSA9PT0gaXRlbSkgcmV0dXJuIGk7CiAgICByZXR1cm4gLTE7CiAgfTsKCiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYGxhc3RJbmRleE9mYCBpZiBhdmFpbGFibGUuCiAgXy5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uKGFycmF5LCBpdGVtKSB7CiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIC0xOwogICAgaWYgKG5hdGl2ZUxhc3RJbmRleE9mICYmIGFycmF5Lmxhc3RJbmRleE9mID09PSBuYXRpdmVMYXN0SW5kZXhPZikgcmV0dXJuIGFycmF5Lmxhc3RJbmRleE9mKGl0ZW0pOwogICAgdmFyIGkgPSBhcnJheS5sZW5ndGg7CiAgICB3aGlsZSAoaS0tKSBpZiAoYXJyYXlbaV0gPT09IGl0ZW0pIHJldHVybiBpOwogICAgcmV0dXJuIC0xOwogIH07CgogIC8vIEdlbmVyYXRlIGFuIGludGVnZXIgQXJyYXkgY29udGFpbmluZyBhbiBhcml0aG1ldGljIHByb2dyZXNzaW9uLiBBIHBvcnQgb2YKICAvLyB0aGUgbmF0aXZlIFB5dGhvbiBgcmFuZ2UoKWAgZnVuY3Rpb24uIFNlZQogIC8vIFt0aGUgUHl0aG9uIGRvY3VtZW50YXRpb25dKGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS9mdW5jdGlvbnMuaHRtbCNyYW5nZSkuCiAgXy5yYW5nZSA9IGZ1bmN0aW9uKHN0YXJ0LCBzdG9wLCBzdGVwKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8PSAxKSB7CiAgICAgIHN0b3AgPSBzdGFydCB8fCAwOwogICAgICBzdGFydCA9IDA7CiAgICB9CiAgICBzdGVwID0gYXJndW1lbnRzWzJdIHx8IDE7CgogICAgdmFyIGxlbiA9IE1hdGgubWF4KE1hdGguY2VpbCgoc3RvcCAtIHN0YXJ0KSAvIHN0ZXApLCAwKTsKICAgIHZhciBpZHggPSAwOwogICAgdmFyIHJhbmdlID0gbmV3IEFycmF5KGxlbik7CgogICAgd2hpbGUoaWR4IDwgbGVuKSB7CiAgICAgIHJhbmdlW2lkeCsrXSA9IHN0YXJ0OwogICAgICBzdGFydCArPSBzdGVwOwogICAgfQoKICAgIHJldHVybiByYW5nZTsKICB9OwoKICAvLyBGdW5jdGlvbiAoYWhlbSkgRnVuY3Rpb25zCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8vIFJldXNhYmxlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGZvciBwcm90b3R5cGUgc2V0dGluZy4KICB2YXIgY3RvciA9IGZ1bmN0aW9uKCl7fTsKCiAgLy8gQ3JlYXRlIGEgZnVuY3Rpb24gYm91bmQgdG8gYSBnaXZlbiBvYmplY3QgKGFzc2lnbmluZyBgdGhpc2AsIGFuZCBhcmd1bWVudHMsCiAgLy8gb3B0aW9uYWxseSkuIEJpbmRpbmcgd2l0aCBhcmd1bWVudHMgaXMgYWxzbyBrbm93biBhcyBgY3VycnlgLgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBGdW5jdGlvbi5iaW5kYCBpZiBhdmFpbGFibGUuCiAgLy8gV2UgY2hlY2sgZm9yIGBmdW5jLmJpbmRgIGZpcnN0LCB0byBmYWlsIGZhc3Qgd2hlbiBgZnVuY2AgaXMgdW5kZWZpbmVkLgogIF8uYmluZCA9IGZ1bmN0aW9uIGJpbmQoZnVuYywgY29udGV4dCkgewogICAgdmFyIGJvdW5kLCBhcmdzOwogICAgaWYgKGZ1bmMuYmluZCA9PT0gbmF0aXZlQmluZCAmJiBuYXRpdmVCaW5kKSByZXR1cm4gbmF0aXZlQmluZC5hcHBseShmdW5jLCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpOwogICAgaWYgKCFfLmlzRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBUeXBlRXJyb3I7CiAgICBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpOwogICAgcmV0dXJuIGJvdW5kID0gZnVuY3Rpb24oKSB7CiAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBib3VuZCkpIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpOwogICAgICBjdG9yLnByb3RvdHlwZSA9IGZ1bmMucHJvdG90eXBlOwogICAgICB2YXIgc2VsZiA9IG5ldyBjdG9yOwogICAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseShzZWxmLCBhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTsKICAgICAgaWYgKE9iamVjdChyZXN1bHQpID09PSByZXN1bHQpIHJldHVybiByZXN1bHQ7CiAgICAgIHJldHVybiBzZWxmOwogICAgfTsKICB9OwoKICAvLyBCaW5kIGFsbCBvZiBhbiBvYmplY3QncyBtZXRob2RzIHRvIHRoYXQgb2JqZWN0LiBVc2VmdWwgZm9yIGVuc3VyaW5nIHRoYXQKICAvLyBhbGwgY2FsbGJhY2tzIGRlZmluZWQgb24gYW4gb2JqZWN0IGJlbG9uZyB0byBpdC4KICBfLmJpbmRBbGwgPSBmdW5jdGlvbihvYmopIHsKICAgIHZhciBmdW5jcyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgIGlmIChmdW5jcy5sZW5ndGggPT0gMCkgZnVuY3MgPSBfLmZ1bmN0aW9ucyhvYmopOwogICAgZWFjaChmdW5jcywgZnVuY3Rpb24oZikgeyBvYmpbZl0gPSBfLmJpbmQob2JqW2ZdLCBvYmopOyB9KTsKICAgIHJldHVybiBvYmo7CiAgfTsKCiAgLy8gTWVtb2l6ZSBhbiBleHBlbnNpdmUgZnVuY3Rpb24gYnkgc3RvcmluZyBpdHMgcmVzdWx0cy4KICBfLm1lbW9pemUgPSBmdW5jdGlvbihmdW5jLCBoYXNoZXIpIHsKICAgIHZhciBtZW1vID0ge307CiAgICBoYXNoZXIgfHwgKGhhc2hlciA9IF8uaWRlbnRpdHkpOwogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICB2YXIga2V5ID0gaGFzaGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIHJldHVybiBfLmhhcyhtZW1vLCBrZXkpID8gbWVtb1trZXldIDogKG1lbW9ba2V5XSA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgICB9OwogIH07CgogIC8vIERlbGF5cyBhIGZ1bmN0aW9uIGZvciB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgYW5kIHRoZW4gY2FsbHMKICAvLyBpdCB3aXRoIHRoZSBhcmd1bWVudHMgc3VwcGxpZWQuCiAgXy5kZWxheSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHsKICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpOwogICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgcmV0dXJuIGZ1bmMuYXBwbHkobnVsbCwgYXJncyk7IH0sIHdhaXQpOwogIH07CgogIC8vIERlZmVycyBhIGZ1bmN0aW9uLCBzY2hlZHVsaW5nIGl0IHRvIHJ1biBhZnRlciB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhcwogIC8vIGNsZWFyZWQuCiAgXy5kZWZlciA9IGZ1bmN0aW9uKGZ1bmMpIHsKICAgIHJldHVybiBfLmRlbGF5LmFwcGx5KF8sIFtmdW5jLCAxXS5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKSk7CiAgfTsKCiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlCiAgLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuCiAgXy50aHJvdHRsZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHsKICAgIHZhciBjb250ZXh0LCBhcmdzLCB0aW1lb3V0LCB0aHJvdHRsaW5nLCBtb3JlLCByZXN1bHQ7CiAgICB2YXIgd2hlbkRvbmUgPSBfLmRlYm91bmNlKGZ1bmN0aW9uKCl7IG1vcmUgPSB0aHJvdHRsaW5nID0gZmFsc2U7IH0sIHdhaXQpOwogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICBjb250ZXh0ID0gdGhpczsgYXJncyA9IGFyZ3VtZW50czsKICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGltZW91dCA9IG51bGw7CiAgICAgICAgaWYgKG1vcmUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7CiAgICAgICAgd2hlbkRvbmUoKTsKICAgICAgfTsKICAgICAgaWYgKCF0aW1lb3V0KSB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7CiAgICAgIGlmICh0aHJvdHRsaW5nKSB7CiAgICAgICAgbW9yZSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3R0bGluZyA9IHRydWU7CiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTsKICAgICAgfQogICAgICB3aGVuRG9uZSgpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfTsKICB9OwoKICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90CiAgLy8gYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvcgogIC8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZQogIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuCiAgXy5kZWJvdW5jZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkgewogICAgdmFyIHRpbWVvdXQ7CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsKICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGltZW91dCA9IG51bGw7CiAgICAgICAgaWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7CiAgICAgIH07CiAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0OwogICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTsKICAgICAgaWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7CiAgICB9OwogIH07CgogIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgYXQgbW9zdCBvbmUgdGltZSwgbm8gbWF0dGVyIGhvdwogIC8vIG9mdGVuIHlvdSBjYWxsIGl0LiBVc2VmdWwgZm9yIGxhenkgaW5pdGlhbGl6YXRpb24uCiAgXy5vbmNlID0gZnVuY3Rpb24oZnVuYykgewogICAgdmFyIHJhbiA9IGZhbHNlLCBtZW1vOwogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICBpZiAocmFuKSByZXR1cm4gbWVtbzsKICAgICAgcmFuID0gdHJ1ZTsKICAgICAgcmV0dXJuIG1lbW8gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH07CgogIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLAogIC8vIGFsbG93aW5nIHlvdSB0byBhZGp1c3QgYXJndW1lbnRzLCBydW4gY29kZSBiZWZvcmUgYW5kIGFmdGVyLCBhbmQKICAvLyBjb25kaXRpb25hbGx5IGV4ZWN1dGUgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLgogIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGFyZ3MgPSBbZnVuY10uY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7CiAgICAgIHJldHVybiB3cmFwcGVyLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgfTsKICB9OwoKICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgYSBsaXN0IG9mIGZ1bmN0aW9ucywgZWFjaAogIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuCiAgXy5jb21wb3NlID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZnVuY3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzOwogICAgICBmb3IgKHZhciBpID0gZnVuY3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICBhcmdzID0gW2Z1bmNzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpXTsKICAgICAgfQogICAgICByZXR1cm4gYXJnc1swXTsKICAgIH07CiAgfTsKCiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIGFmdGVyIGJlaW5nIGNhbGxlZCBOIHRpbWVzLgogIF8uYWZ0ZXIgPSBmdW5jdGlvbih0aW1lcywgZnVuYykgewogICAgaWYgKHRpbWVzIDw9IDApIHJldHVybiBmdW5jKCk7CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgIGlmICgtLXRpbWVzIDwgMSkgewogICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgLy8gT2JqZWN0IEZ1bmN0aW9ucwogIC8vIC0tLS0tLS0tLS0tLS0tLS0KCiAgLy8gUmV0cmlldmUgdGhlIG5hbWVzIG9mIGFuIG9iamVjdCdzIHByb3BlcnRpZXMuCiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYE9iamVjdC5rZXlzYAogIF8ua2V5cyA9IG5hdGl2ZUtleXMgfHwgZnVuY3Rpb24ob2JqKSB7CiAgICBpZiAob2JqICE9PSBPYmplY3Qob2JqKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBvYmplY3QnKTsKICAgIHZhciBrZXlzID0gW107CiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSBpZiAoXy5oYXMob2JqLCBrZXkpKSBrZXlzW2tleXMubGVuZ3RoXSA9IGtleTsKICAgIHJldHVybiBrZXlzOwogIH07CgogIC8vIFJldHJpZXZlIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0J3MgcHJvcGVydGllcy4KICBfLnZhbHVlcyA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIF8ubWFwKG9iaiwgXy5pZGVudGl0eSk7CiAgfTsKCiAgLy8gUmV0dXJuIGEgc29ydGVkIGxpc3Qgb2YgdGhlIGZ1bmN0aW9uIG5hbWVzIGF2YWlsYWJsZSBvbiB0aGUgb2JqZWN0LgogIC8vIEFsaWFzZWQgYXMgYG1ldGhvZHNgCiAgXy5mdW5jdGlvbnMgPSBfLm1ldGhvZHMgPSBmdW5jdGlvbihvYmopIHsKICAgIHZhciBuYW1lcyA9IFtdOwogICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICBpZiAoXy5pc0Z1bmN0aW9uKG9ialtrZXldKSkgbmFtZXMucHVzaChrZXkpOwogICAgfQogICAgcmV0dXJuIG5hbWVzLnNvcnQoKTsKICB9OwoKICAvLyBFeHRlbmQgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIHByb3BlcnRpZXMgaW4gcGFzc2VkLWluIG9iamVjdChzKS4KICBfLmV4dGVuZCA9IGZ1bmN0aW9uKG9iaikgewogICAgZWFjaChzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIGZ1bmN0aW9uKHNvdXJjZSkgewogICAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkgewogICAgICAgIG9ialtwcm9wXSA9IHNvdXJjZVtwcm9wXTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gb2JqOwogIH07CgogIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbmx5IGNvbnRhaW5pbmcgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnRpZXMuCiAgXy5waWNrID0gZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgcmVzdWx0ID0ge307CiAgICBlYWNoKGZsYXR0ZW4oc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCB0cnVlLCBbXSksIGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAoa2V5IGluIG9iaikgcmVzdWx0W2tleV0gPSBvYmpba2V5XTsKICAgIH0pOwogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICAvLyBGaWxsIGluIGEgZ2l2ZW4gb2JqZWN0IHdpdGggZGVmYXVsdCBwcm9wZXJ0aWVzLgogIF8uZGVmYXVsdHMgPSBmdW5jdGlvbihvYmopIHsKICAgIGVhY2goc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCBmdW5jdGlvbihzb3VyY2UpIHsKICAgICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHsKICAgICAgICBpZiAob2JqW3Byb3BdID09IG51bGwpIG9ialtwcm9wXSA9IHNvdXJjZVtwcm9wXTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gb2JqOwogIH07CgogIC8vIENyZWF0ZSBhIChzaGFsbG93LWNsb25lZCkgZHVwbGljYXRlIG9mIGFuIG9iamVjdC4KICBfLmNsb25lID0gZnVuY3Rpb24ob2JqKSB7CiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIG9iajsKICAgIHJldHVybiBfLmlzQXJyYXkob2JqKSA/IG9iai5zbGljZSgpIDogXy5leHRlbmQoe30sIG9iaik7CiAgfTsKCiAgLy8gSW52b2tlcyBpbnRlcmNlcHRvciB3aXRoIHRoZSBvYmosIGFuZCB0aGVuIHJldHVybnMgb2JqLgogIC8vIFRoZSBwcmltYXJ5IHB1cnBvc2Ugb2YgdGhpcyBtZXRob2QgaXMgdG8gInRhcCBpbnRvIiBhIG1ldGhvZCBjaGFpbiwgaW4KICAvLyBvcmRlciB0byBwZXJmb3JtIG9wZXJhdGlvbnMgb24gaW50ZXJtZWRpYXRlIHJlc3VsdHMgd2l0aGluIHRoZSBjaGFpbi4KICBfLnRhcCA9IGZ1bmN0aW9uKG9iaiwgaW50ZXJjZXB0b3IpIHsKICAgIGludGVyY2VwdG9yKG9iaik7CiAgICByZXR1cm4gb2JqOwogIH07CgogIC8vIEludGVybmFsIHJlY3Vyc2l2ZSBjb21wYXJpc29uIGZ1bmN0aW9uIGZvciBgaXNFcXVhbGAuCiAgdmFyIGVxID0gZnVuY3Rpb24oYSwgYiwgc3RhY2spIHsKICAgIC8vIElkZW50aWNhbCBvYmplY3RzIGFyZSBlcXVhbC4gYDAgPT09IC0wYCwgYnV0IHRoZXkgYXJlbid0IGlkZW50aWNhbC4KICAgIC8vIFNlZSB0aGUgSGFybW9ueSBgZWdhbGAgcHJvcG9zYWw6IGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWhhcm1vbnk6ZWdhbC4KICAgIGlmIChhID09PSBiKSByZXR1cm4gYSAhPT0gMCB8fCAxIC8gYSA9PSAxIC8gYjsKICAgIC8vIEEgc3RyaWN0IGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYG51bGwgPT0gdW5kZWZpbmVkYC4KICAgIGlmIChhID09IG51bGwgfHwgYiA9PSBudWxsKSByZXR1cm4gYSA9PT0gYjsKICAgIC8vIFVud3JhcCBhbnkgd3JhcHBlZCBvYmplY3RzLgogICAgaWYgKGEuX2NoYWluKSBhID0gYS5fd3JhcHBlZDsKICAgIGlmIChiLl9jaGFpbikgYiA9IGIuX3dyYXBwZWQ7CiAgICAvLyBJbnZva2UgYSBjdXN0b20gYGlzRXF1YWxgIG1ldGhvZCBpZiBvbmUgaXMgcHJvdmlkZWQuCiAgICBpZiAoYS5pc0VxdWFsICYmIF8uaXNGdW5jdGlvbihhLmlzRXF1YWwpKSByZXR1cm4gYS5pc0VxdWFsKGIpOwogICAgaWYgKGIuaXNFcXVhbCAmJiBfLmlzRnVuY3Rpb24oYi5pc0VxdWFsKSkgcmV0dXJuIGIuaXNFcXVhbChhKTsKICAgIC8vIENvbXBhcmUgYFtbQ2xhc3NdXWAgbmFtZXMuCiAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbChhKTsKICAgIGlmIChjbGFzc05hbWUgIT0gdG9TdHJpbmcuY2FsbChiKSkgcmV0dXJuIGZhbHNlOwogICAgc3dpdGNoIChjbGFzc05hbWUpIHsKICAgICAgLy8gU3RyaW5ncywgbnVtYmVycywgZGF0ZXMsIGFuZCBib29sZWFucyBhcmUgY29tcGFyZWQgYnkgdmFsdWUuCiAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6CiAgICAgICAgLy8gUHJpbWl0aXZlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBvYmplY3Qgd3JhcHBlcnMgYXJlIGVxdWl2YWxlbnQ7IHRodXMsIGAiNSJgIGlzCiAgICAgICAgLy8gZXF1aXZhbGVudCB0byBgbmV3IFN0cmluZygiNSIpYC4KICAgICAgICByZXR1cm4gYSA9PSBTdHJpbmcoYik7CiAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6CiAgICAgICAgLy8gYE5hTmBzIGFyZSBlcXVpdmFsZW50LCBidXQgbm9uLXJlZmxleGl2ZS4gQW4gYGVnYWxgIGNvbXBhcmlzb24gaXMgcGVyZm9ybWVkIGZvcgogICAgICAgIC8vIG90aGVyIG51bWVyaWMgdmFsdWVzLgogICAgICAgIHJldHVybiBhICE9ICthID8gYiAhPSArYiA6IChhID09IDAgPyAxIC8gYSA9PSAxIC8gYiA6IGEgPT0gK2IpOwogICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzoKICAgICAgY2FzZSAnW29iamVjdCBCb29sZWFuXSc6CiAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1lcmljIHByaW1pdGl2ZSB2YWx1ZXMuIERhdGVzIGFyZSBjb21wYXJlZCBieSB0aGVpcgogICAgICAgIC8vIG1pbGxpc2Vjb25kIHJlcHJlc2VudGF0aW9ucy4gTm90ZSB0aGF0IGludmFsaWQgZGF0ZXMgd2l0aCBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMKICAgICAgICAvLyBvZiBgTmFOYCBhcmUgbm90IGVxdWl2YWxlbnQuCiAgICAgICAgcmV0dXJuICthID09ICtiOwogICAgICAvLyBSZWdFeHBzIGFyZSBjb21wYXJlZCBieSB0aGVpciBzb3VyY2UgcGF0dGVybnMgYW5kIGZsYWdzLgogICAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOgogICAgICAgIHJldHVybiBhLnNvdXJjZSA9PSBiLnNvdXJjZSAmJgogICAgICAgICAgICAgICBhLmdsb2JhbCA9PSBiLmdsb2JhbCAmJgogICAgICAgICAgICAgICBhLm11bHRpbGluZSA9PSBiLm11bHRpbGluZSAmJgogICAgICAgICAgICAgICBhLmlnbm9yZUNhc2UgPT0gYi5pZ25vcmVDYXNlOwogICAgfQogICAgaWYgKHR5cGVvZiBhICE9ICdvYmplY3QnIHx8IHR5cGVvZiBiICE9ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7CiAgICAvLyBBc3N1bWUgZXF1YWxpdHkgZm9yIGN5Y2xpYyBzdHJ1Y3R1cmVzLiBUaGUgYWxnb3JpdGhtIGZvciBkZXRlY3RpbmcgY3ljbGljCiAgICAvLyBzdHJ1Y3R1cmVzIGlzIGFkYXB0ZWQgZnJvbSBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zLCBhYnN0cmFjdCBvcGVyYXRpb24gYEpPYC4KICAgIHZhciBsZW5ndGggPSBzdGFjay5sZW5ndGg7CiAgICB3aGlsZSAobGVuZ3RoLS0pIHsKICAgICAgLy8gTGluZWFyIHNlYXJjaC4gUGVyZm9ybWFuY2UgaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mCiAgICAgIC8vIHVuaXF1ZSBuZXN0ZWQgc3RydWN0dXJlcy4KICAgICAgaWYgKHN0YWNrW2xlbmd0aF0gPT0gYSkgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuCiAgICBzdGFjay5wdXNoKGEpOwogICAgdmFyIHNpemUgPSAwLCByZXN1bHQgPSB0cnVlOwogICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIGFuZCBhcnJheXMuCiAgICBpZiAoY2xhc3NOYW1lID09ICdbb2JqZWN0IEFycmF5XScpIHsKICAgICAgLy8gQ29tcGFyZSBhcnJheSBsZW5ndGhzIHRvIGRldGVybWluZSBpZiBhIGRlZXAgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnkuCiAgICAgIHNpemUgPSBhLmxlbmd0aDsKICAgICAgcmVzdWx0ID0gc2l6ZSA9PSBiLmxlbmd0aDsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIC8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuCiAgICAgICAgd2hpbGUgKHNpemUtLSkgewogICAgICAgICAgLy8gRW5zdXJlIGNvbW11dGF0aXZlIGVxdWFsaXR5IGZvciBzcGFyc2UgYXJyYXlzLgogICAgICAgICAgaWYgKCEocmVzdWx0ID0gc2l6ZSBpbiBhID09IHNpemUgaW4gYiAmJiBlcShhW3NpemVdLCBiW3NpemVdLCBzdGFjaykpKSBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIE9iamVjdHMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1aXZhbGVudC4KICAgICAgaWYgKCdjb25zdHJ1Y3RvcicgaW4gYSAhPSAnY29uc3RydWN0b3InIGluIGIgfHwgYS5jb25zdHJ1Y3RvciAhPSBiLmNvbnN0cnVjdG9yKSByZXR1cm4gZmFsc2U7CiAgICAgIC8vIERlZXAgY29tcGFyZSBvYmplY3RzLgogICAgICBmb3IgKHZhciBrZXkgaW4gYSkgewogICAgICAgIGlmIChfLmhhcyhhLCBrZXkpKSB7CiAgICAgICAgICAvLyBDb3VudCB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHByb3BlcnRpZXMuCiAgICAgICAgICBzaXplKys7CiAgICAgICAgICAvLyBEZWVwIGNvbXBhcmUgZWFjaCBtZW1iZXIuCiAgICAgICAgICBpZiAoIShyZXN1bHQgPSBfLmhhcyhiLCBrZXkpICYmIGVxKGFba2V5XSwgYltrZXldLCBzdGFjaykpKSBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gRW5zdXJlIHRoYXQgYm90aCBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXMuCiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICBmb3IgKGtleSBpbiBiKSB7CiAgICAgICAgICBpZiAoXy5oYXMoYiwga2V5KSAmJiAhKHNpemUtLSkpIGJyZWFrOwogICAgICAgIH0KICAgICAgICByZXN1bHQgPSAhc2l6ZTsKICAgICAgfQogICAgfQogICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBvYmplY3QgZnJvbSB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuCiAgICBzdGFjay5wb3AoKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgLy8gUGVyZm9ybSBhIGRlZXAgY29tcGFyaXNvbiB0byBjaGVjayBpZiB0d28gb2JqZWN0cyBhcmUgZXF1YWwuCiAgXy5pc0VxdWFsID0gZnVuY3Rpb24oYSwgYikgewogICAgcmV0dXJuIGVxKGEsIGIsIFtdKTsKICB9OwoKICAvLyBJcyBhIGdpdmVuIGFycmF5LCBzdHJpbmcsIG9yIG9iamVjdCBlbXB0eT8KICAvLyBBbiAiZW1wdHkiIG9iamVjdCBoYXMgbm8gZW51bWVyYWJsZSBvd24tcHJvcGVydGllcy4KICBfLmlzRW1wdHkgPSBmdW5jdGlvbihvYmopIHsKICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHRydWU7CiAgICBpZiAoXy5pc0FycmF5KG9iaikgfHwgXy5pc1N0cmluZyhvYmopKSByZXR1cm4gb2JqLmxlbmd0aCA9PT0gMDsKICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChfLmhhcyhvYmosIGtleSkpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiB0cnVlOwogIH07CgogIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBET00gZWxlbWVudD8KICBfLmlzRWxlbWVudCA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuICEhKG9iaiAmJiBvYmoubm9kZVR5cGUgPT0gMSk7CiAgfTsKCiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhbiBhcnJheT8KICAvLyBEZWxlZ2F0ZXMgdG8gRUNNQTUncyBuYXRpdmUgQXJyYXkuaXNBcnJheQogIF8uaXNBcnJheSA9IG5hdGl2ZUlzQXJyYXkgfHwgZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09ICdbb2JqZWN0IEFycmF5XSc7CiAgfTsKCiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/CiAgXy5pc09iamVjdCA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIG9iaiA9PT0gT2JqZWN0KG9iaik7CiAgfTsKCiAgLy8gQWRkIHNvbWUgaXNUeXBlIG1ldGhvZHM6IGlzQXJndW1lbnRzLCBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNOdW1iZXIsIGlzRGF0ZSwgaXNSZWdFeHAuCiAgZWFjaChbJ0FyZ3VtZW50cycsICdGdW5jdGlvbicsICdTdHJpbmcnLCAnTnVtYmVyJywgJ0RhdGUnLCAnUmVnRXhwJ10sIGZ1bmN0aW9uKG5hbWUpIHsKICAgIF9bJ2lzJyArIG5hbWVdID0gZnVuY3Rpb24ob2JqKSB7CiAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT0gJ1tvYmplY3QgJyArIG5hbWUgKyAnXSc7CiAgICB9OwogIH0pOwoKICAvLyBEZWZpbmUgYSBmYWxsYmFjayB2ZXJzaW9uIG9mIHRoZSBtZXRob2QgaW4gYnJvd3NlcnMgKGFoZW0sIElFKSwgd2hlcmUKICAvLyB0aGVyZSBpc24ndCBhbnkgaW5zcGVjdGFibGUgIkFyZ3VtZW50cyIgdHlwZS4KICBpZiAoIV8uaXNBcmd1bWVudHMoYXJndW1lbnRzKSkgewogICAgXy5pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKG9iaikgewogICAgICByZXR1cm4gISEob2JqICYmIF8uaGFzKG9iaiwgJ2NhbGxlZScpKTsKICAgIH07CiAgfQoKICAvLyBJcyBhIGdpdmVuIG9iamVjdCBhIGZpbml0ZSBudW1iZXI/CiAgXy5pc0Zpbml0ZSA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIF8uaXNOdW1iZXIob2JqKSAmJiBpc0Zpbml0ZShvYmopOwogIH07CgogIC8vIElzIHRoZSBnaXZlbiB2YWx1ZSBgTmFOYD8KICBfLmlzTmFOID0gZnVuY3Rpb24ob2JqKSB7CiAgICAvLyBgTmFOYCBpcyB0aGUgb25seSB2YWx1ZSBmb3Igd2hpY2ggYD09PWAgaXMgbm90IHJlZmxleGl2ZS4KICAgIHJldHVybiBvYmogIT09IG9iajsKICB9OwoKICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgYm9vbGVhbj8KICBfLmlzQm9vbGVhbiA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIG9iaiA9PT0gdHJ1ZSB8fCBvYmogPT09IGZhbHNlIHx8IHRvU3RyaW5nLmNhbGwob2JqKSA9PSAnW29iamVjdCBCb29sZWFuXSc7CiAgfTsKCiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBlcXVhbCB0byBudWxsPwogIF8uaXNOdWxsID0gZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gb2JqID09PSBudWxsOwogIH07CgogIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgdW5kZWZpbmVkPwogIF8uaXNVbmRlZmluZWQgPSBmdW5jdGlvbihvYmopIHsKICAgIHJldHVybiBvYmogPT09IHZvaWQgMDsKICB9OwoKICAvLyBTaG9ydGN1dCBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHByb3BlcnR5IGRpcmVjdGx5CiAgLy8gb24gaXRzZWxmIChpbiBvdGhlciB3b3Jkcywgbm90IG9uIGEgcHJvdG90eXBlKS4KICBfLmhhcyA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7CiAgICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7CiAgfTsKCiAgLy8gVXRpbGl0eSBGdW5jdGlvbnMKICAvLyAtLS0tLS0tLS0tLS0tLS0tLQoKICAvLyBSdW4gVW5kZXJzY29yZS5qcyBpbiAqbm9Db25mbGljdCogbW9kZSwgcmV0dXJuaW5nIHRoZSBgX2AgdmFyaWFibGUgdG8gaXRzCiAgLy8gcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LgogIF8ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkgewogICAgcm9vdC5fID0gcHJldmlvdXNVbmRlcnNjb3JlOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgLy8gS2VlcCB0aGUgaWRlbnRpdHkgZnVuY3Rpb24gYXJvdW5kIGZvciBkZWZhdWx0IGl0ZXJhdG9ycy4KICBfLmlkZW50aXR5ID0gZnVuY3Rpb24odmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZTsKICB9OwoKICAvLyBSdW4gYSBmdW5jdGlvbiAqKm4qKiB0aW1lcy4KICBfLnRpbWVzID0gZnVuY3Rpb24obiwgaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSBpdGVyYXRvci5jYWxsKGNvbnRleHQsIGkpOwogIH07CgogIC8vIExpc3Qgb2YgSFRNTCBlbnRpdGllcyBmb3IgZXNjYXBpbmcuCiAgdmFyIGh0bWxFc2NhcGVzID0gewogICAgJyYnOiAnJmFtcDsnLAogICAgJzwnOiAnJmx0OycsCiAgICAnPic6ICcmZ3Q7JywKICAgICciJzogJyZxdW90OycsCiAgICAiJyI6ICcmI3gyNzsnLAogICAgJy8nOiAnJiN4MkY7JwogIH07CgogIC8vIFJlZ2V4IGNvbnRhaW5pbmcgdGhlIGtleXMgbGlzdGVkIGltbWVkaWF0ZWx5IGFib3ZlLgogIHZhciBodG1sRXNjYXBlciA9IC9bJjw+IidcL10vZzsKCiAgLy8gRXNjYXBlIGEgc3RyaW5nIGZvciBIVE1MIGludGVycG9sYXRpb24uCiAgXy5lc2NhcGUgPSBmdW5jdGlvbihzdHJpbmcpIHsKICAgIHJldHVybiAoJycgKyBzdHJpbmcpLnJlcGxhY2UoaHRtbEVzY2FwZXIsIGZ1bmN0aW9uKG1hdGNoKSB7CiAgICAgIHJldHVybiBodG1sRXNjYXBlc1ttYXRjaF07CiAgICB9KTsKICB9OwoKICAvLyBJZiB0aGUgdmFsdWUgb2YgdGhlIG5hbWVkIHByb3BlcnR5IGlzIGEgZnVuY3Rpb24gdGhlbiBpbnZva2UgaXQ7CiAgLy8gb3RoZXJ3aXNlLCByZXR1cm4gaXQuCiAgXy5yZXN1bHQgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7CiAgICBpZiAob2JqZWN0ID09IG51bGwpIHJldHVybiBudWxsOwogICAgdmFyIHZhbHVlID0gb2JqZWN0W3Byb3BlcnR5XTsKICAgIHJldHVybiBfLmlzRnVuY3Rpb24odmFsdWUpID8gdmFsdWUuY2FsbChvYmplY3QpIDogdmFsdWU7CiAgfTsKCiAgLy8gQWRkIHlvdXIgb3duIGN1c3RvbSBmdW5jdGlvbnMgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LCBlbnN1cmluZyB0aGF0CiAgLy8gdGhleSdyZSBjb3JyZWN0bHkgYWRkZWQgdG8gdGhlIE9PUCB3cmFwcGVyIGFzIHdlbGwuCiAgXy5taXhpbiA9IGZ1bmN0aW9uKG9iaikgewogICAgZWFjaChfLmZ1bmN0aW9ucyhvYmopLCBmdW5jdGlvbihuYW1lKXsKICAgICAgYWRkVG9XcmFwcGVyKG5hbWUsIF9bbmFtZV0gPSBvYmpbbmFtZV0pOwogICAgfSk7CiAgfTsKCiAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgaW50ZWdlciBpZCAodW5pcXVlIHdpdGhpbiB0aGUgZW50aXJlIGNsaWVudCBzZXNzaW9uKS4KICAvLyBVc2VmdWwgZm9yIHRlbXBvcmFyeSBET00gaWRzLgogIHZhciBpZENvdW50ZXIgPSAwOwogIF8udW5pcXVlSWQgPSBmdW5jdGlvbihwcmVmaXgpIHsKICAgIHZhciBpZCA9IGlkQ291bnRlcisrOwogICAgcmV0dXJuIHByZWZpeCA/IHByZWZpeCArIGlkIDogaWQ7CiAgfTsKCiAgLy8gQnkgZGVmYXVsdCwgVW5kZXJzY29yZSB1c2VzIEVSQi1zdHlsZSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLCBjaGFuZ2UgdGhlCiAgLy8gZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZSBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLgogIF8udGVtcGxhdGVTZXR0aW5ncyA9IHsKICAgIGV2YWx1YXRlICAgIDogLzwlKFtcc1xTXSs/KSU+L2csCiAgICBpbnRlcnBvbGF0ZSA6IC88JT0oW1xzXFNdKz8pJT4vZywKICAgIGVzY2FwZSAgICAgIDogLzwlLShbXHNcU10rPyklPi9nCiAgfTsKCiAgLy8gV2hlbiBjdXN0b21pemluZyBgdGVtcGxhdGVTZXR0aW5nc2AsIGlmIHlvdSBkb24ndCB3YW50IHRvIGRlZmluZSBhbgogIC8vIGludGVycG9sYXRpb24sIGV2YWx1YXRpb24gb3IgZXNjYXBpbmcgcmVnZXgsIHdlIG5lZWQgb25lIHRoYXQgaXMKICAvLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC4KICB2YXIgbm9NYXRjaCA9IC8uXi87CgogIC8vIENlcnRhaW4gY2hhcmFjdGVycyBuZWVkIHRvIGJlIGVzY2FwZWQgc28gdGhhdCB0aGV5IGNhbiBiZSBwdXQgaW50byBhCiAgLy8gc3RyaW5nIGxpdGVyYWwuCiAgdmFyIGVzY2FwZXMgPSB7CiAgICAnXFwnOiAgICdcXCcsCiAgICAiJyI6ICAgICInIiwKICAgIHI6ICAgICAgJ1xyJywKICAgIG46ICAgICAgJ1xuJywKICAgIHQ6ICAgICAgJ1x0JywKICAgIHUyMDI4OiAgJ1x1MjAyOCcsCiAgICB1MjAyOTogICdcdTIwMjknCiAgfTsKCiAgZm9yICh2YXIga2V5IGluIGVzY2FwZXMpIGVzY2FwZXNbZXNjYXBlc1trZXldXSA9IGtleTsKICB2YXIgZXNjYXBlciA9IC9cXHwnfFxyfFxufFx0fFx1MjAyOHxcdTIwMjkvZzsKICB2YXIgdW5lc2NhcGVyID0gL1xcKFxcfCd8cnxufHR8dTIwMjh8dTIwMjkpL2c7CgogIC8vIFdpdGhpbiBhbiBpbnRlcnBvbGF0aW9uLCBldmFsdWF0aW9uLCBvciBlc2NhcGluZywgcmVtb3ZlIEhUTUwgZXNjYXBpbmcKICAvLyB0aGF0IGhhZCBiZWVuIHByZXZpb3VzbHkgYWRkZWQuCiAgdmFyIHVuZXNjYXBlID0gZnVuY3Rpb24oY29kZSkgewogICAgcmV0dXJuIGNvZGUucmVwbGFjZSh1bmVzY2FwZXIsIGZ1bmN0aW9uKG1hdGNoLCBlc2NhcGUpIHsKICAgICAgcmV0dXJuIGVzY2FwZXNbZXNjYXBlXTsKICAgIH0pOwogIH07CgogIC8vIEphdmFTY3JpcHQgbWljcm8tdGVtcGxhdGluZywgc2ltaWxhciB0byBKb2huIFJlc2lnJ3MgaW1wbGVtZW50YXRpb24uCiAgLy8gVW5kZXJzY29yZSB0ZW1wbGF0aW5nIGhhbmRsZXMgYXJiaXRyYXJ5IGRlbGltaXRlcnMsIHByZXNlcnZlcyB3aGl0ZXNwYWNlLAogIC8vIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLgogIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBkYXRhLCBzZXR0aW5ncykgewogICAgc2V0dGluZ3MgPSBfLmRlZmF1bHRzKHNldHRpbmdzIHx8IHt9LCBfLnRlbXBsYXRlU2V0dGluZ3MpOwoKICAgIC8vIENvbXBpbGUgdGhlIHRlbXBsYXRlIHNvdXJjZSwgdGFraW5nIGNhcmUgdG8gZXNjYXBlIGNoYXJhY3RlcnMgdGhhdAogICAgLy8gY2Fubm90IGJlIGluY2x1ZGVkIGluIGEgc3RyaW5nIGxpdGVyYWwgYW5kIHRoZW4gdW5lc2NhcGUgdGhlbSBpbiBjb2RlCiAgICAvLyBibG9ja3MuCiAgICB2YXIgc291cmNlID0gIl9fcCs9JyIgKyB0ZXh0CiAgICAgIC5yZXBsYWNlKGVzY2FwZXIsIGZ1bmN0aW9uKG1hdGNoKSB7CiAgICAgICAgcmV0dXJuICdcXCcgKyBlc2NhcGVzW21hdGNoXTsKICAgICAgfSkKICAgICAgLnJlcGxhY2Uoc2V0dGluZ3MuZXNjYXBlIHx8IG5vTWF0Y2gsIGZ1bmN0aW9uKG1hdGNoLCBjb2RlKSB7CiAgICAgICAgcmV0dXJuICInK1xuKChfX3Q9KCIgKyB1bmVzY2FwZShjb2RlKSArICIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcbiciOwogICAgICB9KQogICAgICAucmVwbGFjZShzZXR0aW5ncy5pbnRlcnBvbGF0ZSB8fCBub01hdGNoLCBmdW5jdGlvbihtYXRjaCwgY29kZSkgewogICAgICAgIHJldHVybiAiJytcbigoX190PSgiICsgdW5lc2NhcGUoY29kZSkgKyAiKSk9PW51bGw/Jyc6X190KStcbiciOwogICAgICB9KQogICAgICAucmVwbGFjZShzZXR0aW5ncy5ldmFsdWF0ZSB8fCBub01hdGNoLCBmdW5jdGlvbihtYXRjaCwgY29kZSkgewogICAgICAgIHJldHVybiAiJztcbiIgKyB1bmVzY2FwZShjb2RlKSArICJcbl9fcCs9JyI7CiAgICAgIH0pICsgIic7XG4iOwoKICAgIC8vIElmIGEgdmFyaWFibGUgaXMgbm90IHNwZWNpZmllZCwgcGxhY2UgZGF0YSB2YWx1ZXMgaW4gbG9jYWwgc2NvcGUuCiAgICBpZiAoIXNldHRpbmdzLnZhcmlhYmxlKSBzb3VyY2UgPSAnd2l0aChvYmp8fHt9KXtcbicgKyBzb3VyY2UgKyAnfVxuJzsKCiAgICBzb3VyY2UgPSAidmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLCIgKwogICAgICAicHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyl9O1xuIiArCiAgICAgIHNvdXJjZSArICJyZXR1cm4gX19wO1xuIjsKCiAgICB2YXIgcmVuZGVyID0gbmV3IEZ1bmN0aW9uKHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonLCAnXycsIHNvdXJjZSk7CiAgICBpZiAoZGF0YSkgcmV0dXJuIHJlbmRlcihkYXRhLCBfKTsKICAgIHZhciB0ZW1wbGF0ZSA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pOwogICAgfTsKCiAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBmdW5jdGlvbiBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgcHJlY29tcGlsYXRpb24uCiAgICB0ZW1wbGF0ZS5zb3VyY2UgPSAnZnVuY3Rpb24oJyArIChzZXR0aW5ncy52YXJpYWJsZSB8fCAnb2JqJykgKyAnKXtcbicgKyBzb3VyY2UgKyAnfSc7CgogICAgcmV0dXJuIHRlbXBsYXRlOwogIH07CgogIC8vIEFkZCBhICJjaGFpbiIgZnVuY3Rpb24sIHdoaWNoIHdpbGwgZGVsZWdhdGUgdG8gdGhlIHdyYXBwZXIuCiAgXy5jaGFpbiA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIF8ob2JqKS5jaGFpbigpOwogIH07CgogIC8vIFRoZSBPT1AgV3JhcHBlcgogIC8vIC0tLS0tLS0tLS0tLS0tLQoKICAvLyBJZiBVbmRlcnNjb3JlIGlzIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLCBpdCByZXR1cm5zIGEgd3JhcHBlZCBvYmplY3QgdGhhdAogIC8vIGNhbiBiZSB1c2VkIE9PLXN0eWxlLiBUaGlzIHdyYXBwZXIgaG9sZHMgYWx0ZXJlZCB2ZXJzaW9ucyBvZiBhbGwgdGhlCiAgLy8gdW5kZXJzY29yZSBmdW5jdGlvbnMuIFdyYXBwZWQgb2JqZWN0cyBtYXkgYmUgY2hhaW5lZC4KICB2YXIgd3JhcHBlciA9IGZ1bmN0aW9uKG9iaikgeyB0aGlzLl93cmFwcGVkID0gb2JqOyB9OwoKICAvLyBFeHBvc2UgYHdyYXBwZXIucHJvdG90eXBlYCBhcyBgXy5wcm90b3R5cGVgCiAgXy5wcm90b3R5cGUgPSB3cmFwcGVyLnByb3RvdHlwZTsKCiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnRpbnVlIGNoYWluaW5nIGludGVybWVkaWF0ZSByZXN1bHRzLgogIHZhciByZXN1bHQgPSBmdW5jdGlvbihvYmosIGNoYWluKSB7CiAgICByZXR1cm4gY2hhaW4gPyBfKG9iaikuY2hhaW4oKSA6IG9iajsKICB9OwoKICAvLyBBIG1ldGhvZCB0byBlYXNpbHkgYWRkIGZ1bmN0aW9ucyB0byB0aGUgT09QIHdyYXBwZXIuCiAgdmFyIGFkZFRvV3JhcHBlciA9IGZ1bmN0aW9uKG5hbWUsIGZ1bmMpIHsKICAgIHdyYXBwZXIucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgICB1bnNoaWZ0LmNhbGwoYXJncywgdGhpcy5fd3JhcHBlZCk7CiAgICAgIHJldHVybiByZXN1bHQoZnVuYy5hcHBseShfLCBhcmdzKSwgdGhpcy5fY2hhaW4pOwogICAgfTsKICB9OwoKICAvLyBBZGQgYWxsIG9mIHRoZSBVbmRlcnNjb3JlIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlciBvYmplY3QuCiAgXy5taXhpbihfKTsKCiAgLy8gQWRkIGFsbCBtdXRhdG9yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci4KICBlYWNoKFsncG9wJywgJ3B1c2gnLCAncmV2ZXJzZScsICdzaGlmdCcsICdzb3J0JywgJ3NwbGljZScsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG5hbWUpIHsKICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdOwogICAgd3JhcHBlci5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIG9iaiA9IHRoaXMuX3dyYXBwZWQ7CiAgICAgIG1ldGhvZC5hcHBseShvYmosIGFyZ3VtZW50cyk7CiAgICAgIGlmICgobmFtZSA9PSAnc2hpZnQnIHx8IG5hbWUgPT0gJ3NwbGljZScpICYmIG9iai5sZW5ndGggPT09IDApIGRlbGV0ZSBvYmpbMF07CiAgICAgIHJldHVybiByZXN1bHQob2JqLCB0aGlzLl9jaGFpbik7CiAgICB9OwogIH0pOwoKICAvLyBBZGQgYWxsIGFjY2Vzc29yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci4KICBlYWNoKFsnY29uY2F0JywgJ2pvaW4nLCAnc2xpY2UnXSwgZnVuY3Rpb24obmFtZSkgewogICAgdmFyIG1ldGhvZCA9IEFycmF5UHJvdG9bbmFtZV07CiAgICB3cmFwcGVyLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gcmVzdWx0KG1ldGhvZC5hcHBseSh0aGlzLl93cmFwcGVkLCBhcmd1bWVudHMpLCB0aGlzLl9jaGFpbik7CiAgICB9OwogIH0pOwoKICAvLyBTdGFydCBjaGFpbmluZyBhIHdyYXBwZWQgVW5kZXJzY29yZSBvYmplY3QuCiAgd3JhcHBlci5wcm90b3R5cGUuY2hhaW4gPSBmdW5jdGlvbigpIHsKICAgIHRoaXMuX2NoYWluID0gdHJ1ZTsKICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIEV4dHJhY3RzIHRoZSByZXN1bHQgZnJvbSBhIHdyYXBwZWQgYW5kIGNoYWluZWQgb2JqZWN0LgogIHdyYXBwZXIucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5fd3JhcHBlZDsKICB9OwoKfSkuY2FsbCh0aGlzKTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7CiAgLyoKICAgKiBHZW5lcmF0ZWQgYnkgUEVHLmpzIDAuNy4wLgogICAqCiAgICogaHR0cDovL3BlZ2pzLm1hamRhLmN6LwogICAqLwogIAogIGZ1bmN0aW9uIHF1b3RlKHMpIHsKICAgIC8qCiAgICAgKiBFQ01BLTI2MiwgNXRoIGVkLiwgNy44LjQ6IEFsbCBjaGFyYWN0ZXJzIG1heSBhcHBlYXIgbGl0ZXJhbGx5IGluIGEKICAgICAqIHN0cmluZyBsaXRlcmFsIGV4Y2VwdCBmb3IgdGhlIGNsb3NpbmcgcXVvdGUgY2hhcmFjdGVyLCBiYWNrc2xhc2gsCiAgICAgKiBjYXJyaWFnZSByZXR1cm4sIGxpbmUgc2VwYXJhdG9yLCBwYXJhZ3JhcGggc2VwYXJhdG9yLCBhbmQgbGluZSBmZWVkLgogICAgICogQW55IGNoYXJhY3RlciBtYXkgYXBwZWFyIGluIHRoZSBmb3JtIG9mIGFuIGVzY2FwZSBzZXF1ZW5jZS4KICAgICAqCiAgICAgKiBGb3IgcG9ydGFiaWxpdHksIHdlIGFsc28gZXNjYXBlIGVzY2FwZSBhbGwgY29udHJvbCBhbmQgbm9uLUFTQ0lJCiAgICAgKiBjaGFyYWN0ZXJzLiBOb3RlIHRoYXQgIlwwIiBhbmQgIlx2IiBlc2NhcGUgc2VxdWVuY2VzIGFyZSBub3QgdXNlZAogICAgICogYmVjYXVzZSBKU0hpbnQgZG9lcyBub3QgbGlrZSB0aGUgZmlyc3QgYW5kIElFIHRoZSBzZWNvbmQuCiAgICAgKi8KICAgICByZXR1cm4gJyInICsgcwogICAgICAucmVwbGFjZSgvXFwvZywgJ1xcXFwnKSAgLy8gYmFja3NsYXNoCiAgICAgIC5yZXBsYWNlKC8iL2csICdcXCInKSAgICAvLyBjbG9zaW5nIHF1b3RlIGNoYXJhY3RlcgogICAgICAucmVwbGFjZSgvXHgwOC9nLCAnXFxiJykgLy8gYmFja3NwYWNlCiAgICAgIC5yZXBsYWNlKC9cdC9nLCAnXFx0JykgICAvLyBob3Jpem9udGFsIHRhYgogICAgICAucmVwbGFjZSgvXG4vZywgJ1xcbicpICAgLy8gbGluZSBmZWVkCiAgICAgIC5yZXBsYWNlKC9cZi9nLCAnXFxmJykgICAvLyBmb3JtIGZlZWQKICAgICAgLnJlcGxhY2UoL1xyL2csICdcXHInKSAgIC8vIGNhcnJpYWdlIHJldHVybgogICAgICAucmVwbGFjZSgvW1x4MDAtXHgwN1x4MEJceDBFLVx4MUZceDgwLVx1RkZGRl0vZywgZXNjYXBlKQogICAgICArICciJzsKICB9CiAgCiAgdmFyIHJlc3VsdCA9IHsKICAgIC8qCiAgICAgKiBQYXJzZXMgdGhlIGlucHV0IHdpdGggYSBnZW5lcmF0ZWQgcGFyc2VyLiBJZiB0aGUgcGFyc2luZyBpcyBzdWNjZXNzZnVsbCwKICAgICAqIHJldHVybnMgYSB2YWx1ZSBleHBsaWNpdGx5IG9yIGltcGxpY2l0bHkgc3BlY2lmaWVkIGJ5IHRoZSBncmFtbWFyIGZyb20KICAgICAqIHdoaWNoIHRoZSBwYXJzZXIgd2FzIGdlbmVyYXRlZCAoc2VlIHxQRUcuYnVpbGRQYXJzZXJ8KS4gSWYgdGhlIHBhcnNpbmcgaXMKICAgICAqIHVuc3VjY2Vzc2Z1bCwgdGhyb3dzIHxQRUcucGFyc2VyLlN5bnRheEVycm9yfCBkZXNjcmliaW5nIHRoZSBlcnJvci4KICAgICAqLwogICAgcGFyc2U6IGZ1bmN0aW9uKGlucHV0LCBzdGFydFJ1bGUpIHsKICAgICAgdmFyIHBhcnNlRnVuY3Rpb25zID0gewogICAgICAgICJzdGFydCI6IHBhcnNlX3N0YXJ0LAogICAgICAgICJsaW5lIjogcGFyc2VfbGluZSwKICAgICAgICAiTGluZVRlcm1pbmF0b3IiOiBwYXJzZV9MaW5lVGVybWluYXRvciwKICAgICAgICAiY29tbWVudCI6IHBhcnNlX2NvbW1lbnQsCiAgICAgICAgImNvbm5lY3Rpb24iOiBwYXJzZV9jb25uZWN0aW9uLAogICAgICAgICJicmlkZ2UiOiBwYXJzZV9icmlkZ2UsCiAgICAgICAgImxlZnRsZXQiOiBwYXJzZV9sZWZ0bGV0LAogICAgICAgICJpaXAiOiBwYXJzZV9paXAsCiAgICAgICAgInJpZ2h0bGV0IjogcGFyc2VfcmlnaHRsZXQsCiAgICAgICAgIm5vZGUiOiBwYXJzZV9ub2RlLAogICAgICAgICJjb21wb25lbnQiOiBwYXJzZV9jb21wb25lbnQsCiAgICAgICAgImNvbXBNZXRhIjogcGFyc2VfY29tcE1ldGEsCiAgICAgICAgInBvcnQiOiBwYXJzZV9wb3J0LAogICAgICAgICJhbnljaGFyIjogcGFyc2VfYW55Y2hhciwKICAgICAgICAiaWlwY2hhciI6IHBhcnNlX2lpcGNoYXIsCiAgICAgICAgIl8iOiBwYXJzZV9fLAogICAgICAgICJfXyI6IHBhcnNlX19fCiAgICAgIH07CiAgICAgIAogICAgICBpZiAoc3RhcnRSdWxlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBpZiAocGFyc2VGdW5jdGlvbnNbc3RhcnRSdWxlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcnVsZSBuYW1lOiAiICsgcXVvdGUoc3RhcnRSdWxlKSArICIuIik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHN0YXJ0UnVsZSA9ICJzdGFydCI7CiAgICAgIH0KICAgICAgCiAgICAgIHZhciBwb3MgPSAwOwogICAgICB2YXIgcmVwb3J0RmFpbHVyZXMgPSAwOwogICAgICB2YXIgcmlnaHRtb3N0RmFpbHVyZXNQb3MgPSAwOwogICAgICB2YXIgcmlnaHRtb3N0RmFpbHVyZXNFeHBlY3RlZCA9IFtdOwogICAgICAKICAgICAgZnVuY3Rpb24gcGFkTGVmdChpbnB1dCwgcGFkZGluZywgbGVuZ3RoKSB7CiAgICAgICAgdmFyIHJlc3VsdCA9IGlucHV0OwogICAgICAgIAogICAgICAgIHZhciBwYWRMZW5ndGggPSBsZW5ndGggLSBpbnB1dC5sZW5ndGg7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWRMZW5ndGg7IGkrKykgewogICAgICAgICAgcmVzdWx0ID0gcGFkZGluZyArIHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gZXNjYXBlKGNoKSB7CiAgICAgICAgdmFyIGNoYXJDb2RlID0gY2guY2hhckNvZGVBdCgwKTsKICAgICAgICB2YXIgZXNjYXBlQ2hhcjsKICAgICAgICB2YXIgbGVuZ3RoOwogICAgICAgIAogICAgICAgIGlmIChjaGFyQ29kZSA8PSAweEZGKSB7CiAgICAgICAgICBlc2NhcGVDaGFyID0gJ3gnOwogICAgICAgICAgbGVuZ3RoID0gMjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZXNjYXBlQ2hhciA9ICd1JzsKICAgICAgICAgIGxlbmd0aCA9IDQ7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiAnXFwnICsgZXNjYXBlQ2hhciArIHBhZExlZnQoY2hhckNvZGUudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCksICcwJywgbGVuZ3RoKTsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gbWF0Y2hGYWlsZWQoZmFpbHVyZSkgewogICAgICAgIGlmIChwb3MgPCByaWdodG1vc3RGYWlsdXJlc1BvcykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAocG9zID4gcmlnaHRtb3N0RmFpbHVyZXNQb3MpIHsKICAgICAgICAgIHJpZ2h0bW9zdEZhaWx1cmVzUG9zID0gcG9zOwogICAgICAgICAgcmlnaHRtb3N0RmFpbHVyZXNFeHBlY3RlZCA9IFtdOwogICAgICAgIH0KICAgICAgICAKICAgICAgICByaWdodG1vc3RGYWlsdXJlc0V4cGVjdGVkLnB1c2goZmFpbHVyZSk7CiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIHBhcnNlX3N0YXJ0KCkgewogICAgICAgIHZhciByZXN1bHQwLCByZXN1bHQxOwogICAgICAgIHZhciBwb3MwOwogICAgICAgIAogICAgICAgIHBvczAgPSBwb3M7CiAgICAgICAgcmVzdWx0MCA9IFtdOwogICAgICAgIHJlc3VsdDEgPSBwYXJzZV9saW5lKCk7CiAgICAgICAgd2hpbGUgKHJlc3VsdDEgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAucHVzaChyZXN1bHQxKTsKICAgICAgICAgIHJlc3VsdDEgPSBwYXJzZV9saW5lKCk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gKGZ1bmN0aW9uKG9mZnNldCkgeyByZXR1cm4gcGFyc2VyLmdldFJlc3VsdCgpOyAgfSkocG9zMCk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfbGluZSgpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0MywgcmVzdWx0NCwgcmVzdWx0NSwgcmVzdWx0NjsKICAgICAgICB2YXIgcG9zMCwgcG9zMTsKICAgICAgICAKICAgICAgICBwb3MwID0gcG9zOwogICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgcmVzdWx0MCA9IHBhcnNlX18oKTsKICAgICAgICBpZiAocmVzdWx0MCAhPT0gbnVsbCkgewogICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwb3MsIDcpID09PSAiRVhQT1JUPSIpIHsKICAgICAgICAgICAgcmVzdWx0MSA9ICJFWFBPUlQ9IjsKICAgICAgICAgICAgcG9zICs9IDc7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQxID0gbnVsbDsKICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlwiRVhQT1JUPVwiIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICAgIGlmICgvXltBLVouMC05X10vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgICAgcmVzdWx0MyA9IGlucHV0LmNoYXJBdChwb3MpOwogICAgICAgICAgICAgIHBvcysrOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdDMgPSBudWxsOwogICAgICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIltBLVouMC05X10iKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlc3VsdDMgIT09IG51bGwpIHsKICAgICAgICAgICAgICByZXN1bHQyID0gW107CiAgICAgICAgICAgICAgd2hpbGUgKHJlc3VsdDMgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJlc3VsdDIucHVzaChyZXN1bHQzKTsKICAgICAgICAgICAgICAgIGlmICgvXltBLVouMC05X10vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgICAgICAgIHJlc3VsdDMgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZXN1bHQzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIltBLVouMC05X10iKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQyID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocmVzdWx0MiAhPT0gbnVsbCkgewogICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBvcykgPT09IDU4KSB7CiAgICAgICAgICAgICAgICByZXN1bHQzID0gIjoiOwogICAgICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdDMgPSBudWxsOwogICAgICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJcIjpcIiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAocmVzdWx0MyAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgaWYgKC9eW0EtWjAtOV9dLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgICAgICAgICByZXN1bHQ1ID0gaW5wdXQuY2hhckF0KHBvcyk7CiAgICAgICAgICAgICAgICAgIHBvcysrOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0NSA9IG51bGw7CiAgICAgICAgICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbQS1aMC05X10iKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHJlc3VsdDUgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0NCA9IFtdOwogICAgICAgICAgICAgICAgICB3aGlsZSAocmVzdWx0NSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdDQucHVzaChyZXN1bHQ1KTsKICAgICAgICAgICAgICAgICAgICBpZiAoL15bQS1aMC05X10vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ1ID0gaW5wdXQuY2hhckF0KHBvcyk7CiAgICAgICAgICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgcmVzdWx0NSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIltBLVowLTlfXSIpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0NCA9IG51bGw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0NCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICByZXN1bHQ1ID0gcGFyc2VfXygpOwogICAgICAgICAgICAgICAgICBpZiAocmVzdWx0NSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdDYgPSBwYXJzZV9MaW5lVGVybWluYXRvcigpOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdDYgPSByZXN1bHQ2ICE9PSBudWxsID8gcmVzdWx0NiA6ICIiOwogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQ2ICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDIsIHJlc3VsdDMsIHJlc3VsdDQsIHJlc3VsdDUsIHJlc3VsdDZdOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gKGZ1bmN0aW9uKG9mZnNldCwgcHJpdiwgcHViKSB7cmV0dXJuIHBhcnNlci5yZWdpc3RlckV4cG9ydHMocHJpdi5qb2luKCIiKSxwdWIuam9pbigiIikpfSkocG9zMCwgcmVzdWx0MFsyXSwgcmVzdWx0MFs0XSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCA9PT0gbnVsbCkgewogICAgICAgICAgcG9zMCA9IHBvczsKICAgICAgICAgIHJlc3VsdDAgPSBwYXJzZV9jb21tZW50KCk7CiAgICAgICAgICBpZiAocmVzdWx0MCAhPT0gbnVsbCkgewogICAgICAgICAgICBpZiAoL15bXG5cclx1MjAyOFx1MjAyOV0vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgICAgcmVzdWx0MSA9IGlucHV0LmNoYXJBdChwb3MpOwogICAgICAgICAgICAgIHBvcysrOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIltcXG5cXHJcXHUyMDI4XFx1MjAyOV0iKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzdWx0MSA9IHJlc3VsdDEgIT09IG51bGwgPyByZXN1bHQxIDogIiI7CiAgICAgICAgICAgIGlmIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IFtyZXN1bHQwLCByZXN1bHQxXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICAgIHBvczAgPSBwb3M7CiAgICAgICAgICAgIHJlc3VsdDAgPSBwYXJzZV9fKCk7CiAgICAgICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgaWYgKC9eW1xuXHJcdTIwMjhcdTIwMjldLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgICAgICAgcmVzdWx0MSA9IGlucHV0LmNoYXJBdChwb3MpOwogICAgICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbXFxuXFxyXFx1MjAyOFxcdTIwMjldIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDFdOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICAgIHBvcyA9IHBvczA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgIHBvcyA9IHBvczA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlc3VsdDAgPT09IG51bGwpIHsKICAgICAgICAgICAgICBwb3MwID0gcG9zOwogICAgICAgICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IHBhcnNlX18oKTsKICAgICAgICAgICAgICBpZiAocmVzdWx0MCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgcmVzdWx0MSA9IHBhcnNlX2Nvbm5lY3Rpb24oKTsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIHJlc3VsdDIgPSBwYXJzZV9fKCk7CiAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQyICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0MyA9IHBhcnNlX0xpbmVUZXJtaW5hdG9yKCk7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0MyA9IHJlc3VsdDMgIT09IG51bGwgPyByZXN1bHQzIDogIiI7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdDMgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBbcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0M107CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJlc3VsdDAgPSAoZnVuY3Rpb24ob2Zmc2V0LCBlZGdlcykge3JldHVybiBwYXJzZXIucmVnaXN0ZXJFZGdlcyhlZGdlcyk7fSkocG9zMCwgcmVzdWx0MFsxXSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfTGluZVRlcm1pbmF0b3IoKSB7CiAgICAgICAgdmFyIHJlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDIsIHJlc3VsdDM7CiAgICAgICAgdmFyIHBvczA7CiAgICAgICAgCiAgICAgICAgcG9zMCA9IHBvczsKICAgICAgICByZXN1bHQwID0gcGFyc2VfXygpOwogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwb3MpID09PSA0NCkgewogICAgICAgICAgICByZXN1bHQxID0gIiwiOwogICAgICAgICAgICBwb3MrKzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCIsXCIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmVzdWx0MSA9IHJlc3VsdDEgIT09IG51bGwgPyByZXN1bHQxIDogIiI7CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQyID0gcGFyc2VfY29tbWVudCgpOwogICAgICAgICAgICByZXN1bHQyID0gcmVzdWx0MiAhPT0gbnVsbCA/IHJlc3VsdDIgOiAiIjsKICAgICAgICAgICAgaWYgKHJlc3VsdDIgIT09IG51bGwpIHsKICAgICAgICAgICAgICBpZiAoL15bXG5cclx1MjAyOFx1MjAyOV0vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgICAgICByZXN1bHQzID0gaW5wdXQuY2hhckF0KHBvcyk7CiAgICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVzdWx0MyA9IG51bGw7CiAgICAgICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIltcXG5cXHJcXHUyMDI4XFx1MjAyOV0iKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmVzdWx0MyA9IHJlc3VsdDMgIT09IG51bGwgPyByZXN1bHQzIDogIiI7CiAgICAgICAgICAgICAgaWYgKHJlc3VsdDMgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBbcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0M107CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgIHBvcyA9IHBvczA7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDA7CiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIHBhcnNlX2NvbW1lbnQoKSB7CiAgICAgICAgdmFyIHJlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDIsIHJlc3VsdDM7CiAgICAgICAgdmFyIHBvczA7CiAgICAgICAgCiAgICAgICAgcG9zMCA9IHBvczsKICAgICAgICByZXN1bHQwID0gcGFyc2VfXygpOwogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwb3MpID09PSAzNSkgewogICAgICAgICAgICByZXN1bHQxID0gIiMiOwogICAgICAgICAgICBwb3MrKzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCIjXCIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKHJlc3VsdDEgIT09IG51bGwpIHsKICAgICAgICAgICAgcmVzdWx0MiA9IFtdOwogICAgICAgICAgICByZXN1bHQzID0gcGFyc2VfYW55Y2hhcigpOwogICAgICAgICAgICB3aGlsZSAocmVzdWx0MyAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHJlc3VsdDIucHVzaChyZXN1bHQzKTsKICAgICAgICAgICAgICByZXN1bHQzID0gcGFyc2VfYW55Y2hhcigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyZXN1bHQyICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IFtyZXN1bHQwLCByZXN1bHQxLCByZXN1bHQyXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfY29ubmVjdGlvbigpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0MywgcmVzdWx0NDsKICAgICAgICB2YXIgcG9zMCwgcG9zMTsKICAgICAgICAKICAgICAgICBwb3MwID0gcG9zOwogICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgcmVzdWx0MCA9IHBhcnNlX2JyaWRnZSgpOwogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQxID0gcGFyc2VfXygpOwogICAgICAgICAgaWYgKHJlc3VsdDEgIT09IG51bGwpIHsKICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwb3MsIDIpID09PSAiLT4iKSB7CiAgICAgICAgICAgICAgcmVzdWx0MiA9ICItPiI7CiAgICAgICAgICAgICAgcG9zICs9IDI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0MiA9IG51bGw7CiAgICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCItPlwiIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyZXN1bHQyICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmVzdWx0MyA9IHBhcnNlX18oKTsKICAgICAgICAgICAgICBpZiAocmVzdWx0MyAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgcmVzdWx0NCA9IHBhcnNlX2Nvbm5lY3Rpb24oKTsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQ0ICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBbcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0MywgcmVzdWx0NF07CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCAhPT0gbnVsbCkgewogICAgICAgICAgcmVzdWx0MCA9IChmdW5jdGlvbihvZmZzZXQsIHgsIHkpIHsgcmV0dXJuIFt4LHldOyB9KShwb3MwLCByZXN1bHQwWzBdLCByZXN1bHQwWzRdKTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgPT09IG51bGwpIHsKICAgICAgICAgIHBvcyA9IHBvczA7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gcGFyc2VfYnJpZGdlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQwOwogICAgICB9CiAgICAgIAogICAgICBmdW5jdGlvbiBwYXJzZV9icmlkZ2UoKSB7CiAgICAgICAgdmFyIHJlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDIsIHJlc3VsdDMsIHJlc3VsdDQ7CiAgICAgICAgdmFyIHBvczAsIHBvczE7CiAgICAgICAgCiAgICAgICAgcG9zMCA9IHBvczsKICAgICAgICBwb3MxID0gcG9zOwogICAgICAgIHJlc3VsdDAgPSBwYXJzZV9wb3J0KCk7CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDEgPSBwYXJzZV9fKCk7CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQyID0gcGFyc2Vfbm9kZSgpOwogICAgICAgICAgICBpZiAocmVzdWx0MiAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHJlc3VsdDMgPSBwYXJzZV9fKCk7CiAgICAgICAgICAgICAgaWYgKHJlc3VsdDMgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJlc3VsdDQgPSBwYXJzZV9wb3J0KCk7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0NCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDIsIHJlc3VsdDMsIHJlc3VsdDRdOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSAoZnVuY3Rpb24ob2Zmc2V0LCB4LCBwcm9jLCB5KSB7IHJldHVybiBbeyJ0Z3QiOntwcm9jZXNzOnByb2MsIHBvcnQ6eH19LHsic3JjIjp7cHJvY2Vzczpwcm9jLCBwb3J0Onl9fV07IH0pKHBvczAsIHJlc3VsdDBbMF0sIHJlc3VsdDBbMl0sIHJlc3VsdDBbNF0pOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCA9PT0gbnVsbCkgewogICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgPT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSBwYXJzZV9paXAoKTsKICAgICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBwYXJzZV9yaWdodGxldCgpOwogICAgICAgICAgICBpZiAocmVzdWx0MCA9PT0gbnVsbCkgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBwYXJzZV9sZWZ0bGV0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDA7CiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIHBhcnNlX2xlZnRsZXQoKSB7CiAgICAgICAgdmFyIHJlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDI7CiAgICAgICAgdmFyIHBvczAsIHBvczE7CiAgICAgICAgCiAgICAgICAgcG9zMCA9IHBvczsKICAgICAgICBwb3MxID0gcG9zOwogICAgICAgIHJlc3VsdDAgPSBwYXJzZV9ub2RlKCk7CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDEgPSBwYXJzZV9fKCk7CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQyID0gcGFyc2VfcG9ydCgpOwogICAgICAgICAgICBpZiAocmVzdWx0MiAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBbcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0Ml07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSAoZnVuY3Rpb24ob2Zmc2V0LCBwcm9jLCBwb3J0KSB7IHJldHVybiB7InNyYyI6e3Byb2Nlc3M6cHJvYywgcG9ydDpwb3J0fX0gfSkocG9zMCwgcmVzdWx0MFswXSwgcmVzdWx0MFsyXSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfaWlwKCkgewogICAgICAgIHZhciByZXN1bHQwLCByZXN1bHQxLCByZXN1bHQyOwogICAgICAgIHZhciBwb3MwLCBwb3MxOwogICAgICAgIAogICAgICAgIHBvczAgPSBwb3M7CiAgICAgICAgcG9zMSA9IHBvczsKICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwb3MpID09PSAzOSkgewogICAgICAgICAgcmVzdWx0MCA9ICInIjsKICAgICAgICAgIHBvcysrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCInXCIiKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDEgPSBbXTsKICAgICAgICAgIHJlc3VsdDIgPSBwYXJzZV9paXBjaGFyKCk7CiAgICAgICAgICB3aGlsZSAocmVzdWx0MiAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQxLnB1c2gocmVzdWx0Mik7CiAgICAgICAgICAgIHJlc3VsdDIgPSBwYXJzZV9paXBjaGFyKCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwb3MpID09PSAzOSkgewogICAgICAgICAgICAgIHJlc3VsdDIgPSAiJyI7CiAgICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0MiA9IG51bGw7CiAgICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCInXCIiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlc3VsdDIgIT09IG51bGwpIHsKICAgICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDJdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gKGZ1bmN0aW9uKG9mZnNldCwgaWlwKSB7IHJldHVybiB7ImRhdGEiOmlpcC5qb2luKCIiKX0gfSkocG9zMCwgcmVzdWx0MFsxXSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfcmlnaHRsZXQoKSB7CiAgICAgICAgdmFyIHJlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDI7CiAgICAgICAgdmFyIHBvczAsIHBvczE7CiAgICAgICAgCiAgICAgICAgcG9zMCA9IHBvczsKICAgICAgICBwb3MxID0gcG9zOwogICAgICAgIHJlc3VsdDAgPSBwYXJzZV9wb3J0KCk7CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDEgPSBwYXJzZV9fKCk7CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQyID0gcGFyc2Vfbm9kZSgpOwogICAgICAgICAgICBpZiAocmVzdWx0MiAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBbcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0Ml07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSAoZnVuY3Rpb24ob2Zmc2V0LCBwb3J0LCBwcm9jKSB7IHJldHVybiB7InRndCI6e3Byb2Nlc3M6cHJvYywgcG9ydDpwb3J0fX0gfSkocG9zMCwgcmVzdWx0MFswXSwgcmVzdWx0MFsyXSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2Vfbm9kZSgpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MTsKICAgICAgICB2YXIgcG9zMCwgcG9zMTsKICAgICAgICAKICAgICAgICBwb3MwID0gcG9zOwogICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgaWYgKC9eW2EtekEtWjAtOV9dLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgcmVzdWx0MSA9IGlucHV0LmNoYXJBdChwb3MpOwogICAgICAgICAgcG9zKys7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbYS16QS1aMC05X10iKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDEgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSBbXTsKICAgICAgICAgIHdoaWxlIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICAgIHJlc3VsdDAucHVzaChyZXN1bHQxKTsKICAgICAgICAgICAgaWYgKC9eW2EtekEtWjAtOV9dLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgICAgIHJlc3VsdDEgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQxID0gbnVsbDsKICAgICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbYS16QS1aMC05X10iKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQxID0gcGFyc2VfY29tcG9uZW50KCk7CiAgICAgICAgICByZXN1bHQxID0gcmVzdWx0MSAhPT0gbnVsbCA/IHJlc3VsdDEgOiAiIjsKICAgICAgICAgIGlmIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBbcmVzdWx0MCwgcmVzdWx0MV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCAhPT0gbnVsbCkgewogICAgICAgICAgcmVzdWx0MCA9IChmdW5jdGlvbihvZmZzZXQsIG5vZGUsIGNvbXApIHsgaWYoY29tcCl7cGFyc2VyLmFkZE5vZGUobm9kZS5qb2luKCIiKSxjb21wKTt9OyByZXR1cm4gbm9kZS5qb2luKCIiKX0pKHBvczAsIHJlc3VsdDBbMF0sIHJlc3VsdDBbMV0pOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCA9PT0gbnVsbCkgewogICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDA7CiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIHBhcnNlX2NvbXBvbmVudCgpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0MzsKICAgICAgICB2YXIgcG9zMCwgcG9zMTsKICAgICAgICAKICAgICAgICBwb3MwID0gcG9zOwogICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocG9zKSA9PT0gNDApIHsKICAgICAgICAgIHJlc3VsdDAgPSAiKCI7CiAgICAgICAgICBwb3MrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlwiKFwiIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICBpZiAoL15bYS16QS1aXC9cLTAtOV9dLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgICByZXN1bHQyID0gaW5wdXQuY2hhckF0KHBvcyk7CiAgICAgICAgICAgIHBvcysrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MiA9IG51bGw7CiAgICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbYS16QS1aXFwvXFwtMC05X10iKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKHJlc3VsdDIgIT09IG51bGwpIHsKICAgICAgICAgICAgcmVzdWx0MSA9IFtdOwogICAgICAgICAgICB3aGlsZSAocmVzdWx0MiAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHJlc3VsdDEucHVzaChyZXN1bHQyKTsKICAgICAgICAgICAgICBpZiAoL15bYS16QS1aXC9cLTAtOV9dLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgICAgICAgcmVzdWx0MiA9IGlucHV0LmNoYXJBdChwb3MpOwogICAgICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdDIgPSBudWxsOwogICAgICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbYS16QS1aXFwvXFwtMC05X10iKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgfQogICAgICAgICAgcmVzdWx0MSA9IHJlc3VsdDEgIT09IG51bGwgPyByZXN1bHQxIDogIiI7CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQyID0gcGFyc2VfY29tcE1ldGEoKTsKICAgICAgICAgICAgcmVzdWx0MiA9IHJlc3VsdDIgIT09IG51bGwgPyByZXN1bHQyIDogIiI7CiAgICAgICAgICAgIGlmIChyZXN1bHQyICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocG9zKSA9PT0gNDEpIHsKICAgICAgICAgICAgICAgIHJlc3VsdDMgPSAiKSI7CiAgICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVzdWx0MyA9IG51bGw7CiAgICAgICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlwiKVwiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChyZXN1bHQzICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDIsIHJlc3VsdDNdOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gKGZ1bmN0aW9uKG9mZnNldCwgY29tcCwgbWV0YSkgeyB2YXIgbyA9IHt9OyBjb21wID8gby5jb21wID0gY29tcC5qb2luKCIiKSA6IG8uY29tcCA9ICcnOyBtZXRhID8gby5tZXRhID0gbWV0YS5qb2luKCIiKS5zcGxpdCgnLCcpIDogbnVsbDsgcmV0dXJuIG87IH0pKHBvczAsIHJlc3VsdDBbMV0sIHJlc3VsdDBbMl0pOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCA9PT0gbnVsbCkgewogICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDA7CiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIHBhcnNlX2NvbXBNZXRhKCkgewogICAgICAgIHZhciByZXN1bHQwLCByZXN1bHQxLCByZXN1bHQyOwogICAgICAgIHZhciBwb3MwLCBwb3MxOwogICAgICAgIAogICAgICAgIHBvczAgPSBwb3M7CiAgICAgICAgcG9zMSA9IHBvczsKICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwb3MpID09PSA1OCkgewogICAgICAgICAgcmVzdWx0MCA9ICI6IjsKICAgICAgICAgIHBvcysrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCI6XCIiKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIGlmICgvXlthLXpBLVpcL10vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgIHJlc3VsdDIgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQyID0gbnVsbDsKICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlthLXpBLVpcXC9dIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXN1bHQyICE9PSBudWxsKSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBbXTsKICAgICAgICAgICAgd2hpbGUgKHJlc3VsdDIgIT09IG51bGwpIHsKICAgICAgICAgICAgICByZXN1bHQxLnB1c2gocmVzdWx0Mik7CiAgICAgICAgICAgICAgaWYgKC9eW2EtekEtWlwvXS8udGVzdChpbnB1dC5jaGFyQXQocG9zKSkpIHsKICAgICAgICAgICAgICAgIHJlc3VsdDIgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgICAgIHBvcysrOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHQyID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICAgICAgICBtYXRjaEZhaWxlZCgiW2EtekEtWlxcL10iKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHJlc3VsdDEgIT09IG51bGwpIHsKICAgICAgICAgICAgcmVzdWx0MCA9IFtyZXN1bHQwLCByZXN1bHQxXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gKGZ1bmN0aW9uKG9mZnNldCwgbWV0YSkge3JldHVybiBtZXRhfSkocG9zMCwgcmVzdWx0MFsxXSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfcG9ydCgpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MTsKICAgICAgICB2YXIgcG9zMCwgcG9zMTsKICAgICAgICAKICAgICAgICBwb3MwID0gcG9zOwogICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgaWYgKC9eW0EtWi4wLTlfXS8udGVzdChpbnB1dC5jaGFyQXQocG9zKSkpIHsKICAgICAgICAgIHJlc3VsdDEgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgIHBvcysrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQxID0gbnVsbDsKICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICBtYXRjaEZhaWxlZCgiW0EtWi4wLTlfXSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgcmVzdWx0MCA9IFtdOwogICAgICAgICAgd2hpbGUgKHJlc3VsdDEgIT09IG51bGwpIHsKICAgICAgICAgICAgcmVzdWx0MC5wdXNoKHJlc3VsdDEpOwogICAgICAgICAgICBpZiAoL15bQS1aLjAtOV9dLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgICAgIHJlc3VsdDEgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQxID0gbnVsbDsKICAgICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbQS1aLjAtOV9dIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCAhPT0gbnVsbCkgewogICAgICAgICAgcmVzdWx0MSA9IHBhcnNlX19fKCk7CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDFdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSAoZnVuY3Rpb24ob2Zmc2V0LCBwb3J0bmFtZSkge3JldHVybiBwb3J0bmFtZS5qb2luKCIiKS50b0xvd2VyQ2FzZSgpfSkocG9zMCwgcmVzdWx0MFswXSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfYW55Y2hhcigpIHsKICAgICAgICB2YXIgcmVzdWx0MDsKICAgICAgICAKICAgICAgICBpZiAoL15bXlxuXHJcdTIwMjhcdTIwMjldLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgcmVzdWx0MCA9IGlucHV0LmNoYXJBdChwb3MpOwogICAgICAgICAgcG9zKys7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbXlxcblxcclxcdTIwMjhcXHUyMDI5XSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfaWlwY2hhcigpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MTsKICAgICAgICB2YXIgcG9zMCwgcG9zMTsKICAgICAgICAKICAgICAgICBwb3MwID0gcG9zOwogICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgaWYgKC9eW1xcXS8udGVzdChpbnB1dC5jaGFyQXQocG9zKSkpIHsKICAgICAgICAgIHJlc3VsdDAgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgIHBvcysrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICBtYXRjaEZhaWxlZCgiW1xcXFxdIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICBpZiAoL15bJ10vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQxID0gbnVsbDsKICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlsnXSIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDFdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSAoZnVuY3Rpb24ob2Zmc2V0KSB7IHJldHVybiAiJyI7IH0pKHBvczApOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCA9PT0gbnVsbCkgewogICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgPT09IG51bGwpIHsKICAgICAgICAgIGlmICgvXlteJ10vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlteJ10iKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfXygpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MTsKICAgICAgICAKICAgICAgICByZXN1bHQwID0gW107CiAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocG9zKSA9PT0gMzIpIHsKICAgICAgICAgIHJlc3VsdDEgPSAiICI7CiAgICAgICAgICBwb3MrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MSA9IG51bGw7CiAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlwiIFwiIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHdoaWxlIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwLnB1c2gocmVzdWx0MSk7CiAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwb3MpID09PSAzMikgewogICAgICAgICAgICByZXN1bHQxID0gIiAiOwogICAgICAgICAgICBwb3MrKzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCIgXCIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXN1bHQwID0gcmVzdWx0MCAhPT0gbnVsbCA/IHJlc3VsdDAgOiAiIjsKICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfX18oKSB7CiAgICAgICAgdmFyIHJlc3VsdDAsIHJlc3VsdDE7CiAgICAgICAgCiAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocG9zKSA9PT0gMzIpIHsKICAgICAgICAgIHJlc3VsdDEgPSAiICI7CiAgICAgICAgICBwb3MrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MSA9IG51bGw7CiAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlwiIFwiIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gW107CiAgICAgICAgICB3aGlsZSAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQwLnB1c2gocmVzdWx0MSk7CiAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBvcykgPT09IDMyKSB7CiAgICAgICAgICAgICAgcmVzdWx0MSA9ICIgIjsKICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQxID0gbnVsbDsKICAgICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJcIiBcIiIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDA7CiAgICAgIH0KICAgICAgCiAgICAgIAogICAgICBmdW5jdGlvbiBjbGVhbnVwRXhwZWN0ZWQoZXhwZWN0ZWQpIHsKICAgICAgICBleHBlY3RlZC5zb3J0KCk7CiAgICAgICAgCiAgICAgICAgdmFyIGxhc3RFeHBlY3RlZCA9IG51bGw7CiAgICAgICAgdmFyIGNsZWFuRXhwZWN0ZWQgPSBbXTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4cGVjdGVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoZXhwZWN0ZWRbaV0gIT09IGxhc3RFeHBlY3RlZCkgewogICAgICAgICAgICBjbGVhbkV4cGVjdGVkLnB1c2goZXhwZWN0ZWRbaV0pOwogICAgICAgICAgICBsYXN0RXhwZWN0ZWQgPSBleHBlY3RlZFtpXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNsZWFuRXhwZWN0ZWQ7CiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIGNvbXB1dGVFcnJvclBvc2l0aW9uKCkgewogICAgICAgIC8qCiAgICAgICAgICogVGhlIGZpcnN0IGlkZWEgd2FzIHRvIHVzZSB8U3RyaW5nLnNwbGl0fCB0byBicmVhayB0aGUgaW5wdXQgdXAgdG8gdGhlCiAgICAgICAgICogZXJyb3IgcG9zaXRpb24gYWxvbmcgbmV3bGluZXMgYW5kIGRlcml2ZSB0aGUgbGluZSBhbmQgY29sdW1uIGZyb20KICAgICAgICAgKiB0aGVyZS4gSG93ZXZlciBJRSdzIHxzcGxpdHwgaW1wbGVtZW50YXRpb24gaXMgc28gYnJva2VuIHRoYXQgaXQgd2FzCiAgICAgICAgICogZW5vdWdoIHRvIHByZXZlbnQgaXQuCiAgICAgICAgICovCiAgICAgICAgCiAgICAgICAgdmFyIGxpbmUgPSAxOwogICAgICAgIHZhciBjb2x1bW4gPSAxOwogICAgICAgIHZhciBzZWVuQ1IgPSBmYWxzZTsKICAgICAgICAKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE1hdGgubWF4KHBvcywgcmlnaHRtb3N0RmFpbHVyZXNQb3MpOyBpKyspIHsKICAgICAgICAgIHZhciBjaCA9IGlucHV0LmNoYXJBdChpKTsKICAgICAgICAgIGlmIChjaCA9PT0gIlxuIikgewogICAgICAgICAgICBpZiAoIXNlZW5DUikgeyBsaW5lKys7IH0KICAgICAgICAgICAgY29sdW1uID0gMTsKICAgICAgICAgICAgc2VlbkNSID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAiXHIiIHx8IGNoID09PSAiXHUyMDI4IiB8fCBjaCA9PT0gIlx1MjAyOSIpIHsKICAgICAgICAgICAgbGluZSsrOwogICAgICAgICAgICBjb2x1bW4gPSAxOwogICAgICAgICAgICBzZWVuQ1IgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29sdW1uKys7CiAgICAgICAgICAgIHNlZW5DUiA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4geyBsaW5lOiBsaW5lLCBjb2x1bW46IGNvbHVtbiB9OwogICAgICB9CiAgICAgIAogICAgICAKICAgICAgICB2YXIgcGFyc2VyLCBlZGdlcywgbm9kZXM7IAogICAgICAKICAgICAgICBwYXJzZXIgPSB0aGlzOwogICAgICAKICAgICAgICBlZGdlcyA9IHBhcnNlci5lZGdlcyA9IFtdOwogICAgICAgIAogICAgICAgIHBhcnNlci5leHBvcnRzID0gW10KICAgICAgCiAgICAgICAgbm9kZXMgPSB7fTsKICAgICAgCiAgICAgICAgcGFyc2VyLmFkZE5vZGUgPSBmdW5jdGlvbiAobm9kZU5hbWUsIGNvbXApIHsKICAgICAgICAgIGlmICghbm9kZXNbbm9kZU5hbWVdKSB7CiAgICAgICAgICAgIG5vZGVzW25vZGVOYW1lXSA9IHt9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoISFjb21wLmNvbXApIHsKICAgICAgICAgICAgbm9kZXNbbm9kZU5hbWVdLmNvbXBvbmVudCA9IGNvbXAuY29tcDsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghIWNvbXAubWV0YSkgewogICAgICAgICAgICBub2Rlc1tub2RlTmFtZV0ubWV0YWRhdGE9e3JvdXRlczpjb21wLm1ldGF9OwogICAgICAgICAgfQogICAgICAgICAKICAgICAgICB9CiAgICAgIAogICAgICAgIHBhcnNlci5nZXRSZXN1bHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4ge3Byb2Nlc3Nlczpub2RlcywgY29ubmVjdGlvbnM6cGFyc2VyLnByb2Nlc3NFZGdlcygpLCBleHBvcnRzOnBhcnNlci5leHBvcnRzfTsKICAgICAgICB9ICAKICAgICAgCiAgICAgICAgdmFyIGZsYXR0ZW4gPSBmdW5jdGlvbiAoYXJyYXksIGlzU2hhbGxvdykgewogICAgICAgICAgdmFyIGluZGV4ID0gLTEsCiAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCwKICAgICAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIAogICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgICAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdOwogICAgICAKICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIGlzU2hhbGxvdyA/IHZhbHVlIDogZmxhdHRlbih2YWx1ZSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcGFyc2VyLnJlZ2lzdGVyRXhwb3J0cyA9IGZ1bmN0aW9uIChwcml2LCBwdWIpIHsKICAgICAgICAgIHBhcnNlci5leHBvcnRzLnB1c2goe3ByaXZhdGU6cHJpdi50b0xvd2VyQ2FzZSgpLCBwdWJsaWM6cHViLnRvTG93ZXJDYXNlKCl9KQogICAgICAgIH0KICAgICAgCiAgICAgICAgcGFyc2VyLnJlZ2lzdGVyRWRnZXMgPSBmdW5jdGlvbiAoZWRnZXMpIHsKICAgICAgCiAgICAgICAgICBlZGdlcy5mb3JFYWNoKGZ1bmN0aW9uIChvLCBpKSB7CiAgICAgICAgICAgIHBhcnNlci5lZGdlcy5wdXNoKG8pOwogICAgICAgICAgfSk7CiAgICAgICAgfSAgCiAgICAgIAogICAgICAgIHBhcnNlci5wcm9jZXNzRWRnZXMgPSBmdW5jdGlvbiAoKSB7ICAgCiAgICAgICAgICB2YXIgZmxhdHMsIGdyb3VwZWQ7CiAgICAgICAgICBmbGF0cyA9IGZsYXR0ZW4ocGFyc2VyLmVkZ2VzKTsKICAgICAgICAgIGdyb3VwZWQgPSBbXTsKICAgICAgICAgIHZhciBjdXJyZW50ID0ge307CiAgICAgICAgICBmbGF0cy5mb3JFYWNoKGZ1bmN0aW9uIChvLCBpKSB7CiAgICAgICAgICAgIGlmIChpICUgMiAhPT0gMCkgeyAKICAgICAgICAgICAgICB2YXIgcGFpciA9IGdyb3VwZWRbZ3JvdXBlZC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICBwYWlyLnRndCA9IG8udGd0OwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBncm91cGVkLnB1c2gobyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBncm91cGVkOwogICAgICAgIH0KICAgICAgCiAgICAgIAogICAgICB2YXIgcmVzdWx0ID0gcGFyc2VGdW5jdGlvbnNbc3RhcnRSdWxlXSgpOwogICAgICAKICAgICAgLyoKICAgICAgICogVGhlIHBhcnNlciBpcyBub3cgaW4gb25lIG9mIHRoZSBmb2xsb3dpbmcgdGhyZWUgc3RhdGVzOgogICAgICAgKgogICAgICAgKiAxLiBUaGUgcGFyc2VyIHN1Y2Nlc3NmdWxseSBwYXJzZWQgdGhlIHdob2xlIGlucHV0LgogICAgICAgKgogICAgICAgKiAgICAtIHxyZXN1bHQgIT09IG51bGx8CiAgICAgICAqICAgIC0gfHBvcyA9PT0gaW5wdXQubGVuZ3RofAogICAgICAgKiAgICAtIHxyaWdodG1vc3RGYWlsdXJlc0V4cGVjdGVkfCBtYXkgb3IgbWF5IG5vdCBjb250YWluIHNvbWV0aGluZwogICAgICAgKgogICAgICAgKiAyLiBUaGUgcGFyc2VyIHN1Y2Nlc3NmdWxseSBwYXJzZWQgb25seSBhIHBhcnQgb2YgdGhlIGlucHV0LgogICAgICAgKgogICAgICAgKiAgICAtIHxyZXN1bHQgIT09IG51bGx8CiAgICAgICAqICAgIC0gfHBvcyA8IGlucHV0Lmxlbmd0aHwKICAgICAgICogICAgLSB8cmlnaHRtb3N0RmFpbHVyZXNFeHBlY3RlZHwgbWF5IG9yIG1heSBub3QgY29udGFpbiBzb21ldGhpbmcKICAgICAgICoKICAgICAgICogMy4gVGhlIHBhcnNlciBkaWQgbm90IHN1Y2Nlc3NmdWxseSBwYXJzZSBhbnkgcGFydCBvZiB0aGUgaW5wdXQuCiAgICAgICAqCiAgICAgICAqICAgLSB8cmVzdWx0ID09PSBudWxsfAogICAgICAgKiAgIC0gfHBvcyA9PT0gMHwKICAgICAgICogICAtIHxyaWdodG1vc3RGYWlsdXJlc0V4cGVjdGVkfCBjb250YWlucyBhdCBsZWFzdCBvbmUgZmFpbHVyZQogICAgICAgKgogICAgICAgKiBBbGwgY29kZSBmb2xsb3dpbmcgdGhpcyBjb21tZW50IChpbmNsdWRpbmcgY2FsbGVkIGZ1bmN0aW9ucykgbXVzdAogICAgICAgKiBoYW5kbGUgdGhlc2Ugc3RhdGVzLgogICAgICAgKi8KICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCBwb3MgIT09IGlucHV0Lmxlbmd0aCkgewogICAgICAgIHZhciBvZmZzZXQgPSBNYXRoLm1heChwb3MsIHJpZ2h0bW9zdEZhaWx1cmVzUG9zKTsKICAgICAgICB2YXIgZm91bmQgPSBvZmZzZXQgPCBpbnB1dC5sZW5ndGggPyBpbnB1dC5jaGFyQXQob2Zmc2V0KSA6IG51bGw7CiAgICAgICAgdmFyIGVycm9yUG9zaXRpb24gPSBjb21wdXRlRXJyb3JQb3NpdGlvbigpOwogICAgICAgIAogICAgICAgIHRocm93IG5ldyB0aGlzLlN5bnRheEVycm9yKAogICAgICAgICAgY2xlYW51cEV4cGVjdGVkKHJpZ2h0bW9zdEZhaWx1cmVzRXhwZWN0ZWQpLAogICAgICAgICAgZm91bmQsCiAgICAgICAgICBvZmZzZXQsCiAgICAgICAgICBlcnJvclBvc2l0aW9uLmxpbmUsCiAgICAgICAgICBlcnJvclBvc2l0aW9uLmNvbHVtbgogICAgICAgICk7CiAgICAgIH0KICAgICAgCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgCiAgICAvKiBSZXR1cm5zIHRoZSBwYXJzZXIgc291cmNlIGNvZGUuICovCiAgICB0b1NvdXJjZTogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl9zb3VyY2U7IH0KICB9OwogIAogIC8qIFRocm93biB3aGVuIGEgcGFyc2VyIGVuY291bnRlcnMgYSBzeW50YXggZXJyb3IuICovCiAgCiAgcmVzdWx0LlN5bnRheEVycm9yID0gZnVuY3Rpb24oZXhwZWN0ZWQsIGZvdW5kLCBvZmZzZXQsIGxpbmUsIGNvbHVtbikgewogICAgZnVuY3Rpb24gYnVpbGRNZXNzYWdlKGV4cGVjdGVkLCBmb3VuZCkgewogICAgICB2YXIgZXhwZWN0ZWRIdW1hbml6ZWQsIGZvdW5kSHVtYW5pemVkOwogICAgICAKICAgICAgc3dpdGNoIChleHBlY3RlZC5sZW5ndGgpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBleHBlY3RlZEh1bWFuaXplZCA9ICJlbmQgb2YgaW5wdXQiOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgZXhwZWN0ZWRIdW1hbml6ZWQgPSBleHBlY3RlZFswXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBleHBlY3RlZEh1bWFuaXplZCA9IGV4cGVjdGVkLnNsaWNlKDAsIGV4cGVjdGVkLmxlbmd0aCAtIDEpLmpvaW4oIiwgIikKICAgICAgICAgICAgKyAiIG9yICIKICAgICAgICAgICAgKyBleHBlY3RlZFtleHBlY3RlZC5sZW5ndGggLSAxXTsKICAgICAgfQogICAgICAKICAgICAgZm91bmRIdW1hbml6ZWQgPSBmb3VuZCA/IHF1b3RlKGZvdW5kKSA6ICJlbmQgb2YgaW5wdXQiOwogICAgICAKICAgICAgcmV0dXJuICJFeHBlY3RlZCAiICsgZXhwZWN0ZWRIdW1hbml6ZWQgKyAiIGJ1dCAiICsgZm91bmRIdW1hbml6ZWQgKyAiIGZvdW5kLiI7CiAgICB9CiAgICAKICAgIHRoaXMubmFtZSA9ICJTeW50YXhFcnJvciI7CiAgICB0aGlzLmV4cGVjdGVkID0gZXhwZWN0ZWQ7CiAgICB0aGlzLmZvdW5kID0gZm91bmQ7CiAgICB0aGlzLm1lc3NhZ2UgPSBidWlsZE1lc3NhZ2UoZXhwZWN0ZWQsIGZvdW5kKTsKICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0OwogICAgdGhpcy5saW5lID0gbGluZTsKICAgIHRoaXMuY29sdW1uID0gY29sdW1uOwogIH07CiAgCiAgcmVzdWx0LlN5bnRheEVycm9yLnByb3RvdHlwZSA9IEVycm9yLnByb3RvdHlwZTsKICAKICByZXR1cm4gcmVzdWx0Owp9KSgpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvIiwiZGVzY3JpcHRpb24iOiJGbG93LUJhc2VkIFByb2dyYW1taW5nIGVudmlyb25tZW50IGZvciBKYXZhU2NyaXB0Iiwia2V5d29yZHMiOlsiZmJwIiwid29ya2Zsb3ciLCJmbG93Il0sInJlcG8iOiJub2Zsby9ub2ZsbyIsInZlcnNpb24iOiIwLjQuMSIsImRlcGVuZGVuY2llcyI6eyJjb21wb25lbnQvZW1pdHRlciI6IioiLCJjb21wb25lbnQvdW5kZXJzY29yZSI6IioiLCJub2Zsby9mYnAiOiIqIn0sImRldmVsb3BtZW50Ijp7fSwibGljZW5zZSI6Ik1JVCIsIm1haW4iOiJzcmMvbGliL05vRmxvLmpzIiwic2NyaXB0cyI6WyJzcmMvbGliL0dyYXBoLmNvZmZlZSIsInNyYy9saWIvSW50ZXJuYWxTb2NrZXQuY29mZmVlIiwic3JjL2xpYi9Qb3J0LmNvZmZlZSIsInNyYy9saWIvQXJyYXlQb3J0LmNvZmZlZSIsInNyYy9saWIvQ29tcG9uZW50LmNvZmZlZSIsInNyYy9saWIvQXN5bmNDb21wb25lbnQuY29mZmVlIiwic3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmNvZmZlZSIsInNyYy9saWIvQ29tcG9uZW50TG9hZGVyLmNvZmZlZSIsInNyYy9saWIvTm9GbG8uY29mZmVlIiwic3JjL2xpYi9OZXR3b3JrLmNvZmZlZSIsInNyYy9jb21wb25lbnRzL0dyYXBoLmNvZmZlZSJdLCJqc29uIjpbImNvbXBvbmVudC5qc29uIl0sIm5vZmxvIjp7ImNvbXBvbmVudHMiOnsiR3JhcGgiOiJzcmMvY29tcG9uZW50cy9HcmFwaC5qcyJ9fX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvL3NyYy9saWIvR3JhcGguanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRXZlbnRFbWl0dGVyLCBHcmFwaCwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCmlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5leGVjUGF0aCAmJiBwcm9jZXNzLmV4ZWNQYXRoLmluZGV4T2YoJ25vZGUnKSAhPT0gLTEpIHsKICBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7Cn0gZWxzZSB7CiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpOwp9CgpHcmFwaCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR3JhcGgsIF9zdXBlcik7CgogIEdyYXBoLnByb3RvdHlwZS5uYW1lID0gJyc7CgogIEdyYXBoLnByb3RvdHlwZS5wcm9wZXJ0aWVzID0ge307CgogIEdyYXBoLnByb3RvdHlwZS5ub2RlcyA9IFtdOwoKICBHcmFwaC5wcm90b3R5cGUuZWRnZXMgPSBbXTsKCiAgR3JhcGgucHJvdG90eXBlLmluaXRpYWxpemVycyA9IFtdOwoKICBHcmFwaC5wcm90b3R5cGUuZXhwb3J0cyA9IFtdOwoKICBmdW5jdGlvbiBHcmFwaChuYW1lKSB7CiAgICB0aGlzLm5hbWUgPSBuYW1lICE9IG51bGwgPyBuYW1lIDogJyc7CiAgICB0aGlzLnByb3BlcnRpZXMgPSB7fTsKICAgIHRoaXMubm9kZXMgPSBbXTsKICAgIHRoaXMuZWRnZXMgPSBbXTsKICAgIHRoaXMuaW5pdGlhbGl6ZXJzID0gW107CiAgICB0aGlzLmV4cG9ydHMgPSBbXTsKICB9CgogIEdyYXBoLnByb3RvdHlwZS5hZGRFeHBvcnQgPSBmdW5jdGlvbihwcml2YXRlUG9ydCwgcHVibGljUG9ydCwgbWV0YWRhdGEpIHsKICAgIHJldHVybiB0aGlzLmV4cG9ydHMucHVzaCh7CiAgICAgICJwcml2YXRlIjogcHJpdmF0ZVBvcnQudG9Mb3dlckNhc2UoKSwKICAgICAgInB1YmxpYyI6IHB1YmxpY1BvcnQudG9Mb3dlckNhc2UoKSwKICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhCiAgICB9KTsKICB9OwoKICBHcmFwaC5wcm90b3R5cGUuYWRkTm9kZSA9IGZ1bmN0aW9uKGlkLCBjb21wb25lbnQsIG1ldGFkYXRhKSB7CiAgICB2YXIgbm9kZTsKICAgIGlmICghbWV0YWRhdGEpIHsKICAgICAgbWV0YWRhdGEgPSB7fTsKICAgIH0KICAgIG5vZGUgPSB7CiAgICAgIGlkOiBpZCwKICAgICAgY29tcG9uZW50OiBjb21wb25lbnQsCiAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YQogICAgfTsKICAgIHRoaXMubm9kZXMucHVzaChub2RlKTsKICAgIHRoaXMuZW1pdCgnYWRkTm9kZScsIG5vZGUpOwogICAgcmV0dXJuIG5vZGU7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLnJlbW92ZU5vZGUgPSBmdW5jdGlvbihpZCkgewogICAgdmFyIGVkZ2UsIGluaXRpYWxpemVyLCBub2RlLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVmMTsKICAgIG5vZGUgPSB0aGlzLmdldE5vZGUoaWQpOwogICAgX3JlZiA9IHRoaXMuZWRnZXM7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgZWRnZSA9IF9yZWZbX2ldOwogICAgICBpZiAoIWVkZ2UpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoZWRnZS5mcm9tLm5vZGUgPT09IG5vZGUuaWQpIHsKICAgICAgICB0aGlzLnJlbW92ZUVkZ2UoZWRnZS5mcm9tLm5vZGUsIGVkZ2UuZnJvbS5wb3J0KTsKICAgICAgfQogICAgICBpZiAoZWRnZS50by5ub2RlID09PSBub2RlLmlkKSB7CiAgICAgICAgdGhpcy5yZW1vdmVFZGdlKGVkZ2UudG8ubm9kZSwgZWRnZS50by5wb3J0KTsKICAgICAgfQogICAgfQogICAgX3JlZjEgPSB0aGlzLmluaXRpYWxpemVyczsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICBpbml0aWFsaXplciA9IF9yZWYxW19qXTsKICAgICAgaWYgKCFpbml0aWFsaXplcikgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmIChpbml0aWFsaXplci50by5ub2RlID09PSBub2RlLmlkKSB7CiAgICAgICAgdGhpcy5yZW1vdmVJbml0aWFsKGluaXRpYWxpemVyLnRvLm5vZGUsIGluaXRpYWxpemVyLnRvLnBvcnQpOwogICAgICB9CiAgICB9CiAgICBpZiAoLTEgIT09IHRoaXMubm9kZXMuaW5kZXhPZihub2RlKSkgewogICAgICB0aGlzLm5vZGVzLnNwbGljZSh0aGlzLm5vZGVzLmluZGV4T2Yobm9kZSksIDEpOwogICAgfQogICAgcmV0dXJuIHRoaXMuZW1pdCgncmVtb3ZlTm9kZScsIG5vZGUpOwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5nZXROb2RlID0gZnVuY3Rpb24oaWQpIHsKICAgIHZhciBub2RlLCBfaSwgX2xlbiwgX3JlZjsKICAgIF9yZWYgPSB0aGlzLm5vZGVzOwogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgIG5vZGUgPSBfcmVmW19pXTsKICAgICAgaWYgKCFub2RlKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKG5vZGUuaWQgPT09IGlkKSB7CiAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5yZW5hbWVOb2RlID0gZnVuY3Rpb24ob2xkSWQsIG5ld0lkKSB7CiAgICB2YXIgZWRnZSwgaWlwLCBub2RlLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVmMTsKICAgIG5vZGUgPSB0aGlzLmdldE5vZGUob2xkSWQpOwogICAgaWYgKCFub2RlKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIG5vZGUuaWQgPSBuZXdJZDsKICAgIF9yZWYgPSB0aGlzLmVkZ2VzOwogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgIGVkZ2UgPSBfcmVmW19pXTsKICAgICAgaWYgKCFlZGdlKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKGVkZ2UuZnJvbS5ub2RlID09PSBvbGRJZCkgewogICAgICAgIGVkZ2UuZnJvbS5ub2RlID0gbmV3SWQ7CiAgICAgIH0KICAgICAgaWYgKGVkZ2UudG8ubm9kZSA9PT0gb2xkSWQpIHsKICAgICAgICBlZGdlLnRvLm5vZGUgPSBuZXdJZDsKICAgICAgfQogICAgfQogICAgX3JlZjEgPSB0aGlzLmluaXRpYWxpemVyczsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICBpaXAgPSBfcmVmMVtfal07CiAgICAgIGlmICghaWlwKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKGlpcC50by5ub2RlID09PSBvbGRJZCkgewogICAgICAgIGlpcC50by5ub2RlID0gbmV3SWQ7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0aGlzLmVtaXQoJ3JlbmFtZU5vZGUnLCBvbGRJZCwgbmV3SWQpOwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5hZGRFZGdlID0gZnVuY3Rpb24ob3V0Tm9kZSwgb3V0UG9ydCwgaW5Ob2RlLCBpblBvcnQsIG1ldGFkYXRhKSB7CiAgICB2YXIgZWRnZTsKICAgIGlmICghdGhpcy5nZXROb2RlKG91dE5vZGUpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICghdGhpcy5nZXROb2RlKGluTm9kZSkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCFtZXRhZGF0YSkgewogICAgICBtZXRhZGF0YSA9IHt9OwogICAgfQogICAgZWRnZSA9IHsKICAgICAgZnJvbTogewogICAgICAgIG5vZGU6IG91dE5vZGUsCiAgICAgICAgcG9ydDogb3V0UG9ydAogICAgICB9LAogICAgICB0bzogewogICAgICAgIG5vZGU6IGluTm9kZSwKICAgICAgICBwb3J0OiBpblBvcnQKICAgICAgfSwKICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhCiAgICB9OwogICAgdGhpcy5lZGdlcy5wdXNoKGVkZ2UpOwogICAgdGhpcy5lbWl0KCdhZGRFZGdlJywgZWRnZSk7CiAgICByZXR1cm4gZWRnZTsKICB9OwoKICBHcmFwaC5wcm90b3R5cGUucmVtb3ZlRWRnZSA9IGZ1bmN0aW9uKG5vZGUsIHBvcnQsIG5vZGUyLCBwb3J0MikgewogICAgdmFyIGVkZ2UsIGluZGV4LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICBfcmVmID0gdGhpcy5lZGdlczsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKGluZGV4ID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgaW5kZXggPSArK19pKSB7CiAgICAgIGVkZ2UgPSBfcmVmW2luZGV4XTsKICAgICAgaWYgKCFlZGdlKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKGVkZ2UuZnJvbS5ub2RlID09PSBub2RlICYmIGVkZ2UuZnJvbS5wb3J0ID09PSBwb3J0KSB7CiAgICAgICAgaWYgKG5vZGUyICYmIHBvcnQyKSB7CiAgICAgICAgICBpZiAoIShlZGdlLnRvLm5vZGUgPT09IG5vZGUyICYmIGVkZ2UudG8ucG9ydCA9PT0gcG9ydDIpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUVkZ2UnLCBlZGdlKTsKICAgICAgICB0aGlzLmVkZ2VzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgICAgaWYgKGVkZ2UudG8ubm9kZSA9PT0gbm9kZSAmJiBlZGdlLnRvLnBvcnQgPT09IHBvcnQpIHsKICAgICAgICBpZiAobm9kZTIgJiYgcG9ydDIpIHsKICAgICAgICAgIGlmICghKGVkZ2UuZnJvbS5ub2RlID09PSBub2RlMiAmJiBlZGdlLmZyb20ucG9ydCA9PT0gcG9ydDIpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUVkZ2UnLCBlZGdlKTsKICAgICAgICBfcmVzdWx0cy5wdXNoKHRoaXMuZWRnZXMuc3BsaWNlKGluZGV4LCAxKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3Jlc3VsdHMucHVzaCh2b2lkIDApOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHM7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLmFkZEluaXRpYWwgPSBmdW5jdGlvbihkYXRhLCBub2RlLCBwb3J0LCBtZXRhZGF0YSkgewogICAgdmFyIGluaXRpYWxpemVyOwogICAgaWYgKCF0aGlzLmdldE5vZGUobm9kZSkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaW5pdGlhbGl6ZXIgPSB7CiAgICAgIGZyb206IHsKICAgICAgICBkYXRhOiBkYXRhCiAgICAgIH0sCiAgICAgIHRvOiB7CiAgICAgICAgbm9kZTogbm9kZSwKICAgICAgICBwb3J0OiBwb3J0CiAgICAgIH0sCiAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YQogICAgfTsKICAgIHRoaXMuaW5pdGlhbGl6ZXJzLnB1c2goaW5pdGlhbGl6ZXIpOwogICAgdGhpcy5lbWl0KCdhZGRJbml0aWFsJywgaW5pdGlhbGl6ZXIpOwogICAgcmV0dXJuIGluaXRpYWxpemVyOwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5yZW1vdmVJbml0aWFsID0gZnVuY3Rpb24obm9kZSwgcG9ydCkgewogICAgdmFyIGVkZ2UsIGluZGV4LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICBfcmVmID0gdGhpcy5pbml0aWFsaXplcnM7CiAgICBfcmVzdWx0cyA9IFtdOwogICAgZm9yIChpbmRleCA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGluZGV4ID0gKytfaSkgewogICAgICBlZGdlID0gX3JlZltpbmRleF07CiAgICAgIGlmICghZWRnZSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmIChlZGdlLnRvLm5vZGUgPT09IG5vZGUgJiYgZWRnZS50by5wb3J0ID09PSBwb3J0KSB7CiAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVJbml0aWFsJywgZWRnZSk7CiAgICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLmluaXRpYWxpemVycy5zcGxpY2UoaW5kZXgsIDEpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfcmVzdWx0cy5wdXNoKHZvaWQgMCk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICBHcmFwaC5wcm90b3R5cGUudG9ET1QgPSBmdW5jdGlvbigpIHsKICAgIHZhciBjbGVhbklELCBjbGVhblBvcnQsIGRhdGEsIGRvdCwgZWRnZSwgaWQsIGluaXRpYWxpemVyLCBub2RlLCBfaSwgX2osIF9rLCBfbGVuLCBfbGVuMSwgX2xlbjIsIF9yZWYsIF9yZWYxLCBfcmVmMjsKICAgIGNsZWFuSUQgPSBmdW5jdGlvbihpZCkgewogICAgICByZXR1cm4gaWQucmVwbGFjZSgvXHMqL2csICIiKTsKICAgIH07CiAgICBjbGVhblBvcnQgPSBmdW5jdGlvbihwb3J0KSB7CiAgICAgIHJldHVybiBwb3J0LnJlcGxhY2UoL1wuL2csICIiKTsKICAgIH07CiAgICBkb3QgPSAiZGlncmFwaCB7XG4iOwogICAgX3JlZiA9IHRoaXMubm9kZXM7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgbm9kZSA9IF9yZWZbX2ldOwogICAgICBkb3QgKz0gIiAgICAiICsgKGNsZWFuSUQobm9kZS5pZCkpICsgIiBbbGFiZWw9IiArIG5vZGUuaWQgKyAiIHNoYXBlPWJveF1cbiI7CiAgICB9CiAgICBfcmVmMSA9IHRoaXMuaW5pdGlhbGl6ZXJzOwogICAgZm9yIChpZCA9IF9qID0gMCwgX2xlbjEgPSBfcmVmMS5sZW5ndGg7IF9qIDwgX2xlbjE7IGlkID0gKytfaikgewogICAgICBpbml0aWFsaXplciA9IF9yZWYxW2lkXTsKICAgICAgaWYgKHR5cGVvZiBpbml0aWFsaXplci5mcm9tLmRhdGEgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBkYXRhID0gJ0Z1bmN0aW9uJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBkYXRhID0gaW5pdGlhbGl6ZXIuZnJvbS5kYXRhOwogICAgICB9CiAgICAgIGRvdCArPSAiICAgIGRhdGEiICsgaWQgKyAiIFtsYWJlbD1cIiciICsgZGF0YSArICInXCIgc2hhcGU9cGxhaW50ZXh0XVxuIjsKICAgICAgZG90ICs9ICIgICAgZGF0YSIgKyBpZCArICIgLT4gIiArIChjbGVhbklEKGluaXRpYWxpemVyLnRvLm5vZGUpKSArICJbaGVhZGxhYmVsPSIgKyAoY2xlYW5Qb3J0KGluaXRpYWxpemVyLnRvLnBvcnQpKSArICIgbGFiZWxmb250Y29sb3I9Ymx1ZSBsYWJlbGZvbnRzaXplPTguMF1cbiI7CiAgICB9CiAgICBfcmVmMiA9IHRoaXMuZWRnZXM7CiAgICBmb3IgKF9rID0gMCwgX2xlbjIgPSBfcmVmMi5sZW5ndGg7IF9rIDwgX2xlbjI7IF9rKyspIHsKICAgICAgZWRnZSA9IF9yZWYyW19rXTsKICAgICAgZG90ICs9ICIgICAgIiArIChjbGVhbklEKGVkZ2UuZnJvbS5ub2RlKSkgKyAiIC0+ICIgKyAoY2xlYW5JRChlZGdlLnRvLm5vZGUpKSArICJbdGFpbGxhYmVsPSIgKyAoY2xlYW5Qb3J0KGVkZ2UuZnJvbS5wb3J0KSkgKyAiIGhlYWRsYWJlbD0iICsgKGNsZWFuUG9ydChlZGdlLnRvLnBvcnQpKSArICIgbGFiZWxmb250Y29sb3I9Ymx1ZSBsYWJlbGZvbnRzaXplPTguMF1cbiI7CiAgICB9CiAgICBkb3QgKz0gIn0iOwogICAgcmV0dXJuIGRvdDsKICB9OwoKICBHcmFwaC5wcm90b3R5cGUudG9ZVU1MID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZWRnZSwgaW5pdGlhbGl6ZXIsIHl1bWwsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYsIF9yZWYxOwogICAgeXVtbCA9IFtdOwogICAgX3JlZiA9IHRoaXMuaW5pdGlhbGl6ZXJzOwogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgIGluaXRpYWxpemVyID0gX3JlZltfaV07CiAgICAgIHl1bWwucHVzaCgiKHN0YXJ0KVsiICsgaW5pdGlhbGl6ZXIudG8ucG9ydCArICJdLT4oIiArIGluaXRpYWxpemVyLnRvLm5vZGUgKyAiKSIpOwogICAgfQogICAgX3JlZjEgPSB0aGlzLmVkZ2VzOwogICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjEubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgIGVkZ2UgPSBfcmVmMVtfal07CiAgICAgIHl1bWwucHVzaCgiKCIgKyBlZGdlLmZyb20ubm9kZSArICIpWyIgKyBlZGdlLmZyb20ucG9ydCArICJdLT4oIiArIGVkZ2UudG8ubm9kZSArICIpIik7CiAgICB9CiAgICByZXR1cm4geXVtbC5qb2luKCIsIik7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbm5lY3Rpb24sIGVkZ2UsIGV4cG9ydGVkLCBleHBvcnRlZERhdGEsIGluaXRpYWxpemVyLCBqc29uLCBub2RlLCBwcm9wZXJ0eSwgdmFsdWUsIF9pLCBfaiwgX2ssIF9sLCBfbGVuLCBfbGVuMSwgX2xlbjIsIF9sZW4zLCBfcmVmLCBfcmVmMSwgX3JlZjIsIF9yZWYzLCBfcmVmNDsKICAgIGpzb24gPSB7CiAgICAgIHByb3BlcnRpZXM6IHt9LAogICAgICBleHBvcnRzOiBbXSwKICAgICAgcHJvY2Vzc2VzOiB7fSwKICAgICAgY29ubmVjdGlvbnM6IFtdCiAgICB9OwogICAgX3JlZiA9IHRoaXMucHJvcGVydGllczsKICAgIGZvciAocHJvcGVydHkgaW4gX3JlZikgewogICAgICB2YWx1ZSA9IF9yZWZbcHJvcGVydHldOwogICAgICBqc29uLnByb3BlcnRpZXNbcHJvcGVydHldID0gdmFsdWU7CiAgICB9CiAgICBpZiAodGhpcy5uYW1lKSB7CiAgICAgIGpzb24ucHJvcGVydGllcy5uYW1lID0gdGhpcy5uYW1lOwogICAgfQogICAgX3JlZjEgPSB0aGlzLmV4cG9ydHM7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYxLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgIGV4cG9ydGVkID0gX3JlZjFbX2ldOwogICAgICBleHBvcnRlZERhdGEgPSB7CiAgICAgICAgInByaXZhdGUiOiBleHBvcnRlZFsicHJpdmF0ZSJdLAogICAgICAgICJwdWJsaWMiOiBleHBvcnRlZFsicHVibGljIl0KICAgICAgfTsKICAgICAgaWYgKGV4cG9ydGVkLm1ldGFkYXRhKSB7CiAgICAgICAgZXhwb3J0ZWREYXRhLm1ldGFkYXRhID0gZXhwb3J0ZWQubWV0YWRhdGE7CiAgICAgIH0KICAgICAganNvbi5leHBvcnRzLnB1c2goZXhwb3J0ZWREYXRhKTsKICAgIH0KICAgIF9yZWYyID0gdGhpcy5ub2RlczsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYyLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICBub2RlID0gX3JlZjJbX2pdOwogICAgICBqc29uLnByb2Nlc3Nlc1tub2RlLmlkXSA9IHsKICAgICAgICBjb21wb25lbnQ6IG5vZGUuY29tcG9uZW50CiAgICAgIH07CiAgICAgIGlmIChub2RlLm1ldGFkYXRhKSB7CiAgICAgICAganNvbi5wcm9jZXNzZXNbbm9kZS5pZF0ubWV0YWRhdGEgPSBub2RlLm1ldGFkYXRhOwogICAgICB9CiAgICB9CiAgICBfcmVmMyA9IHRoaXMuZWRnZXM7CiAgICBmb3IgKF9rID0gMCwgX2xlbjIgPSBfcmVmMy5sZW5ndGg7IF9rIDwgX2xlbjI7IF9rKyspIHsKICAgICAgZWRnZSA9IF9yZWYzW19rXTsKICAgICAgY29ubmVjdGlvbiA9IHsKICAgICAgICBzcmM6IHsKICAgICAgICAgIHByb2Nlc3M6IGVkZ2UuZnJvbS5ub2RlLAogICAgICAgICAgcG9ydDogZWRnZS5mcm9tLnBvcnQKICAgICAgICB9LAogICAgICAgIHRndDogewogICAgICAgICAgcHJvY2VzczogZWRnZS50by5ub2RlLAogICAgICAgICAgcG9ydDogZWRnZS50by5wb3J0CiAgICAgICAgfQogICAgICB9OwogICAgICBpZiAoT2JqZWN0LmtleXMoZWRnZS5tZXRhZGF0YSkubGVuZ3RoKSB7CiAgICAgICAgY29ubmVjdGlvbi5tZXRhZGF0YSA9IGVkZ2UubWV0YWRhdGE7CiAgICAgIH0KICAgICAganNvbi5jb25uZWN0aW9ucy5wdXNoKGNvbm5lY3Rpb24pOwogICAgfQogICAgX3JlZjQgPSB0aGlzLmluaXRpYWxpemVyczsKICAgIGZvciAoX2wgPSAwLCBfbGVuMyA9IF9yZWY0Lmxlbmd0aDsgX2wgPCBfbGVuMzsgX2wrKykgewogICAgICBpbml0aWFsaXplciA9IF9yZWY0W19sXTsKICAgICAganNvbi5jb25uZWN0aW9ucy5wdXNoKHsKICAgICAgICBkYXRhOiBpbml0aWFsaXplci5mcm9tLmRhdGEsCiAgICAgICAgdGd0OiB7CiAgICAgICAgICBwcm9jZXNzOiBpbml0aWFsaXplci50by5ub2RlLAogICAgICAgICAgcG9ydDogaW5pdGlhbGl6ZXIudG8ucG9ydAogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4ganNvbjsKICB9OwoKICBHcmFwaC5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uKGZpbGUsIHN1Y2Nlc3MpIHsKICAgIHZhciBqc29uOwogICAganNvbiA9IEpTT04uc3RyaW5naWZ5KHRoaXMudG9KU09OKCksIG51bGwsIDQpOwogICAgcmV0dXJuIHJlcXVpcmUoJ2ZzJykud3JpdGVGaWxlKCIiICsgZmlsZSArICIuanNvbiIsIGpzb24sICJ1dGYtOCIsIGZ1bmN0aW9uKGVyciwgZGF0YSkgewogICAgICBpZiAoZXJyKSB7CiAgICAgICAgdGhyb3cgZXJyOwogICAgICB9CiAgICAgIHJldHVybiBzdWNjZXNzKGZpbGUpOwogICAgfSk7CiAgfTsKCiAgcmV0dXJuIEdyYXBoOwoKfSkoRXZlbnRFbWl0dGVyKTsKCmV4cG9ydHMuR3JhcGggPSBHcmFwaDsKCmV4cG9ydHMuY3JlYXRlR3JhcGggPSBmdW5jdGlvbihuYW1lKSB7CiAgcmV0dXJuIG5ldyBHcmFwaChuYW1lKTsKfTsKCmV4cG9ydHMubG9hZEpTT04gPSBmdW5jdGlvbihkZWZpbml0aW9uLCBzdWNjZXNzKSB7CiAgdmFyIGNvbm4sIGRlZiwgZXhwb3J0ZWQsIGdyYXBoLCBpZCwgbWV0YWRhdGEsIHByb3BlcnR5LCB2YWx1ZSwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZiwgX3JlZjEsIF9yZWYyLCBfcmVmMzsKICBpZiAoIWRlZmluaXRpb24ucHJvcGVydGllcykgewogICAgZGVmaW5pdGlvbi5wcm9wZXJ0aWVzID0ge307CiAgfQogIGlmICghZGVmaW5pdGlvbi5wcm9jZXNzZXMpIHsKICAgIGRlZmluaXRpb24ucHJvY2Vzc2VzID0ge307CiAgfQogIGlmICghZGVmaW5pdGlvbi5jb25uZWN0aW9ucykgewogICAgZGVmaW5pdGlvbi5jb25uZWN0aW9ucyA9IFtdOwogIH0KICBncmFwaCA9IG5ldyBHcmFwaChkZWZpbml0aW9uLnByb3BlcnRpZXMubmFtZSk7CiAgX3JlZiA9IGRlZmluaXRpb24ucHJvcGVydGllczsKICBmb3IgKHByb3BlcnR5IGluIF9yZWYpIHsKICAgIHZhbHVlID0gX3JlZltwcm9wZXJ0eV07CiAgICBpZiAocHJvcGVydHkgPT09ICduYW1lJykgewogICAgICBjb250aW51ZTsKICAgIH0KICAgIGdyYXBoLnByb3BlcnRpZXNbcHJvcGVydHldID0gdmFsdWU7CiAgfQogIF9yZWYxID0gZGVmaW5pdGlvbi5wcm9jZXNzZXM7CiAgZm9yIChpZCBpbiBfcmVmMSkgewogICAgZGVmID0gX3JlZjFbaWRdOwogICAgaWYgKCFkZWYubWV0YWRhdGEpIHsKICAgICAgZGVmLm1ldGFkYXRhID0ge307CiAgICB9CiAgICBncmFwaC5hZGROb2RlKGlkLCBkZWYuY29tcG9uZW50LCBkZWYubWV0YWRhdGEpOwogIH0KICBfcmVmMiA9IGRlZmluaXRpb24uY29ubmVjdGlvbnM7CiAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgY29ubiA9IF9yZWYyW19pXTsKICAgIGlmIChjb25uLmRhdGEgIT09IHZvaWQgMCkgewogICAgICBncmFwaC5hZGRJbml0aWFsKGNvbm4uZGF0YSwgY29ubi50Z3QucHJvY2VzcywgY29ubi50Z3QucG9ydC50b0xvd2VyQ2FzZSgpKTsKICAgICAgY29udGludWU7CiAgICB9CiAgICBtZXRhZGF0YSA9IGNvbm4ubWV0YWRhdGEgPyBjb25uLm1ldGFkYXRhIDoge307CiAgICBncmFwaC5hZGRFZGdlKGNvbm4uc3JjLnByb2Nlc3MsIGNvbm4uc3JjLnBvcnQudG9Mb3dlckNhc2UoKSwgY29ubi50Z3QucHJvY2VzcywgY29ubi50Z3QucG9ydC50b0xvd2VyQ2FzZSgpLCBtZXRhZGF0YSk7CiAgfQogIGlmIChkZWZpbml0aW9uLmV4cG9ydHMpIHsKICAgIF9yZWYzID0gZGVmaW5pdGlvbi5leHBvcnRzOwogICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjMubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgIGV4cG9ydGVkID0gX3JlZjNbX2pdOwogICAgICBncmFwaC5hZGRFeHBvcnQoZXhwb3J0ZWRbInByaXZhdGUiXSwgZXhwb3J0ZWRbInB1YmxpYyJdLCBleHBvcnRlZC5tZXRhZGF0YSk7CiAgICB9CiAgfQogIHJldHVybiBzdWNjZXNzKGdyYXBoKTsKfTsKCmV4cG9ydHMubG9hZEZCUCA9IGZ1bmN0aW9uKGZicERhdGEsIHN1Y2Nlc3MpIHsKICB2YXIgZGVmaW5pdGlvbjsKICBkZWZpbml0aW9uID0gcmVxdWlyZSgnZmJwJykucGFyc2UoZmJwRGF0YSk7CiAgcmV0dXJuIGV4cG9ydHMubG9hZEpTT04oZGVmaW5pdGlvbiwgc3VjY2Vzcyk7Cn07CgpleHBvcnRzLmxvYWRGaWxlID0gZnVuY3Rpb24oZmlsZSwgc3VjY2VzcykgewogIHZhciBkZWZpbml0aW9uLCBlOwogIGlmICghKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmV4ZWNQYXRoICYmIHByb2Nlc3MuZXhlY1BhdGguaW5kZXhPZignbm9kZScpICE9PSAtMSkpIHsKICAgIHRyeSB7CiAgICAgIGRlZmluaXRpb24gPSByZXF1aXJlKGZpbGUpOwogICAgICBleHBvcnRzLmxvYWRKU09OKGRlZmluaXRpb24sIHN1Y2Nlc3MpOwogICAgfSBjYXRjaCAoX2Vycm9yKSB7CiAgICAgIGUgPSBfZXJyb3I7CiAgICAgIHRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGxvYWQgZ3JhcGggIiArIGZpbGUgKyAiOiAiICsgZS5tZXNzYWdlKTsKICAgIH0KICAgIHJldHVybjsKICB9CiAgcmV0dXJuIHJlcXVpcmUoJ2ZzJykucmVhZEZpbGUoZmlsZSwgInV0Zi04IiwgZnVuY3Rpb24oZXJyLCBkYXRhKSB7CiAgICBpZiAoZXJyKSB7CiAgICAgIHRocm93IGVycjsKICAgIH0KICAgIGlmIChmaWxlLnNwbGl0KCcuJykucG9wKCkgPT09ICdmYnAnKSB7CiAgICAgIHJldHVybiBleHBvcnRzLmxvYWRGQlAoZGF0YSwgc3VjY2Vzcyk7CiAgICB9CiAgICBkZWZpbml0aW9uID0gSlNPTi5wYXJzZShkYXRhKTsKICAgIHJldHVybiBleHBvcnRzLmxvYWRKU09OKGRlZmluaXRpb24sIHN1Y2Nlc3MpOwogIH0pOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRXZlbnRFbWl0dGVyLCBJbnRlcm5hbFNvY2tldCwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCmlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5leGVjUGF0aCAmJiBwcm9jZXNzLmV4ZWNQYXRoLmluZGV4T2YoJ25vZGUnKSAhPT0gLTEpIHsKICBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7Cn0gZWxzZSB7CiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpOwp9CgpJbnRlcm5hbFNvY2tldCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoSW50ZXJuYWxTb2NrZXQsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEludGVybmFsU29ja2V0KCkgewogICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgIHRoaXMuZ3JvdXBzID0gW107CiAgfQoKICBJbnRlcm5hbFNvY2tldC5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMuY29ubmVjdGVkID0gdHJ1ZTsKICAgIHJldHVybiB0aGlzLmVtaXQoJ2Nvbm5lY3QnLCB0aGlzKTsKICB9OwoKICBJbnRlcm5hbFNvY2tldC5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uKCkgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlOwogICAgcmV0dXJuIHRoaXMuZW1pdCgnZGlzY29ubmVjdCcsIHRoaXMpOwogIH07CgogIEludGVybmFsU29ja2V0LnByb3RvdHlwZS5pc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuY29ubmVjdGVkOwogIH07CgogIEludGVybmFsU29ja2V0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkgewogICAgICB0aGlzLmNvbm5lY3QoKTsKICAgIH0KICAgIHJldHVybiB0aGlzLmVtaXQoJ2RhdGEnLCBkYXRhKTsKICB9OwoKICBJbnRlcm5hbFNvY2tldC5wcm90b3R5cGUuYmVnaW5Hcm91cCA9IGZ1bmN0aW9uKGdyb3VwKSB7CiAgICB0aGlzLmdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgIHJldHVybiB0aGlzLmVtaXQoJ2JlZ2luZ3JvdXAnLCBncm91cCk7CiAgfTsKCiAgSW50ZXJuYWxTb2NrZXQucHJvdG90eXBlLmVuZEdyb3VwID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5lbWl0KCdlbmRncm91cCcsIHRoaXMuZ3JvdXBzLnBvcCgpKTsKICB9OwoKICBJbnRlcm5hbFNvY2tldC5wcm90b3R5cGUuZ2V0SWQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBmcm9tU3RyLCB0b1N0cjsKICAgIGZyb21TdHIgPSBmdW5jdGlvbihmcm9tKSB7CiAgICAgIHJldHVybiAiIiArIGZyb20ucHJvY2Vzcy5pZCArICIoKSAiICsgKGZyb20ucG9ydC50b1VwcGVyQ2FzZSgpKTsKICAgIH07CiAgICB0b1N0ciA9IGZ1bmN0aW9uKHRvKSB7CiAgICAgIHJldHVybiAiIiArICh0by5wb3J0LnRvVXBwZXJDYXNlKCkpICsgIiAiICsgdG8ucHJvY2Vzcy5pZCArICIoKSI7CiAgICB9OwogICAgaWYgKCEodGhpcy5mcm9tIHx8IHRoaXMudG8pKSB7CiAgICAgIHJldHVybiAiVU5ERUZJTkVEIjsKICAgIH0KICAgIGlmICh0aGlzLmZyb20gJiYgIXRoaXMudG8pIHsKICAgICAgcmV0dXJuICIiICsgKGZyb21TdHIodGhpcy5mcm9tKSkgKyAiIC0+IEFOT04iOwogICAgfQogICAgaWYgKCF0aGlzLmZyb20pIHsKICAgICAgcmV0dXJuICJEQVRBIC0+ICIgKyAodG9TdHIodGhpcy50bykpOwogICAgfQogICAgcmV0dXJuICIiICsgKGZyb21TdHIodGhpcy5mcm9tKSkgKyAiIC0+ICIgKyAodG9TdHIodGhpcy50bykpOwogIH07CgogIHJldHVybiBJbnRlcm5hbFNvY2tldDsKCn0pKEV2ZW50RW1pdHRlcik7CgpleHBvcnRzLkludGVybmFsU29ja2V0ID0gSW50ZXJuYWxTb2NrZXQ7CgpleHBvcnRzLmNyZWF0ZVNvY2tldCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgSW50ZXJuYWxTb2NrZXQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEV2ZW50RW1pdHRlciwgUG9ydCwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCmlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5leGVjUGF0aCAmJiBwcm9jZXNzLmV4ZWNQYXRoLmluZGV4T2YoJ25vZGUnKSAhPT0gLTEpIHsKICBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7Cn0gZWxzZSB7CiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpOwp9CgpQb3J0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhQb3J0LCBfc3VwZXIpOwoKICBmdW5jdGlvbiBQb3J0KHR5cGUpIHsKICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICBpZiAoIXRoaXMudHlwZSkgewogICAgICB0aGlzLnR5cGUgPSAnYWxsJzsKICAgIH0KICAgIHRoaXMuc29ja2V0ID0gbnVsbDsKICAgIHRoaXMuZnJvbSA9IG51bGw7CiAgICB0aGlzLm5vZGUgPSBudWxsOwogICAgdGhpcy5uYW1lID0gbnVsbDsKICB9CgogIFBvcnQucHJvdG90eXBlLmdldElkID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoISh0aGlzLm5vZGUgJiYgdGhpcy5uYW1lKSkgewogICAgICByZXR1cm4gJ1BvcnQnOwogICAgfQogICAgcmV0dXJuICIiICsgdGhpcy5ub2RlICsgIiAiICsgKHRoaXMubmFtZS50b1VwcGVyQ2FzZSgpKTsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5hdHRhY2ggPSBmdW5jdGlvbihzb2NrZXQpIHsKICAgIGlmICh0aGlzLmlzQXR0YWNoZWQoKSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIiIgKyAodGhpcy5nZXRJZCgpKSArICI6IFNvY2tldCBhbHJlYWR5IGF0dGFjaGVkICIgKyAodGhpcy5zb2NrZXQuZ2V0SWQoKSkgKyAiIC0gIiArIChzb2NrZXQuZ2V0SWQoKSkpOwogICAgfQogICAgdGhpcy5zb2NrZXQgPSBzb2NrZXQ7CiAgICByZXR1cm4gdGhpcy5hdHRhY2hTb2NrZXQoc29ja2V0KTsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5hdHRhY2hTb2NrZXQgPSBmdW5jdGlvbihzb2NrZXQsIGxvY2FsSWQpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBpZiAobG9jYWxJZCA9PSBudWxsKSB7CiAgICAgIGxvY2FsSWQgPSBudWxsOwogICAgfQogICAgdGhpcy5lbWl0KCJhdHRhY2giLCBzb2NrZXQpOwogICAgdGhpcy5mcm9tID0gc29ja2V0LmZyb207CiAgICBpZiAoc29ja2V0LnNldE1heExpc3RlbmVycykgewogICAgICBzb2NrZXQuc2V0TWF4TGlzdGVuZXJzKDApOwogICAgfQogICAgc29ja2V0Lm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5lbWl0KCJjb25uZWN0Iiwgc29ja2V0LCBsb2NhbElkKTsKICAgIH0pOwogICAgc29ja2V0Lm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmVtaXQoImJlZ2luZ3JvdXAiLCBncm91cCwgbG9jYWxJZCk7CiAgICB9KTsKICAgIHNvY2tldC5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmVtaXQoImRhdGEiLCBkYXRhLCBsb2NhbElkKTsKICAgIH0pOwogICAgc29ja2V0Lm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5lbWl0KCJlbmRncm91cCIsIGdyb3VwLCBsb2NhbElkKTsKICAgIH0pOwogICAgcmV0dXJuIHNvY2tldC5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZW1pdCgiZGlzY29ubmVjdCIsIHNvY2tldCwgbG9jYWxJZCk7CiAgICB9KTsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMuc29ja2V0KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiIiArICh0aGlzLmdldElkKCkpICsgIjogTm8gY29ubmVjdGlvbiBhdmFpbGFibGUiKTsKICAgIH0KICAgIHJldHVybiB0aGlzLnNvY2tldC5jb25uZWN0KCk7CiAgfTsKCiAgUG9ydC5wcm90b3R5cGUuYmVnaW5Hcm91cCA9IGZ1bmN0aW9uKGdyb3VwKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgaWYgKCF0aGlzLnNvY2tldCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIiIgKyAodGhpcy5nZXRJZCgpKSArICI6IE5vIGNvbm5lY3Rpb24gYXZhaWxhYmxlIik7CiAgICB9CiAgICBpZiAodGhpcy5pc0Nvbm5lY3RlZCgpKSB7CiAgICAgIHJldHVybiB0aGlzLnNvY2tldC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0KICAgIHRoaXMuc29ja2V0Lm9uY2UoImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLnNvY2tldC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgcmV0dXJuIHRoaXMuc29ja2V0LmNvbm5lY3QoKTsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIGlmICghdGhpcy5zb2NrZXQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCIiICsgKHRoaXMuZ2V0SWQoKSkgKyAiOiBObyBjb25uZWN0aW9uIGF2YWlsYWJsZSIpOwogICAgfQogICAgaWYgKHRoaXMuaXNDb25uZWN0ZWQoKSkgewogICAgICByZXR1cm4gdGhpcy5zb2NrZXQuc2VuZChkYXRhKTsKICAgIH0KICAgIHRoaXMuc29ja2V0Lm9uY2UoImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLnNvY2tldC5zZW5kKGRhdGEpOwogICAgfSk7CiAgICByZXR1cm4gdGhpcy5zb2NrZXQuY29ubmVjdCgpOwogIH07CgogIFBvcnQucHJvdG90eXBlLmVuZEdyb3VwID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMuc29ja2V0KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiIiArICh0aGlzLmdldElkKCkpICsgIjogTm8gY29ubmVjdGlvbiBhdmFpbGFibGUiKTsKICAgIH0KICAgIHJldHVybiB0aGlzLnNvY2tldC5lbmRHcm91cCgpOwogIH07CgogIFBvcnQucHJvdG90eXBlLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5zb2NrZXQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCIiICsgKHRoaXMuZ2V0SWQoKSkgKyAiOiBObyBjb25uZWN0aW9uIGF2YWlsYWJsZSIpOwogICAgfQogICAgcmV0dXJuIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoKTsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5kZXRhY2ggPSBmdW5jdGlvbihzb2NrZXQpIHsKICAgIGlmICghdGhpcy5pc0F0dGFjaGVkKHNvY2tldCkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5lbWl0KCJkZXRhY2giLCB0aGlzLnNvY2tldCk7CiAgICB0aGlzLmZyb20gPSBudWxsOwogICAgcmV0dXJuIHRoaXMuc29ja2V0ID0gbnVsbDsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5pc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKCkgewogICAgaWYgKCF0aGlzLnNvY2tldCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gdGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKTsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5pc0F0dGFjaGVkID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5zb2NrZXQgIT09IG51bGw7CiAgfTsKCiAgUG9ydC5wcm90b3R5cGUuY2FuQXR0YWNoID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5pc0F0dGFjaGVkKCkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgcmV0dXJuIFBvcnQ7Cgp9KShFdmVudEVtaXR0ZXIpOwoKZXhwb3J0cy5Qb3J0ID0gUG9ydDsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBBcnJheVBvcnQsIHBvcnQsCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpwb3J0ID0gcmVxdWlyZSgiLi9Qb3J0Iik7CgpBcnJheVBvcnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEFycmF5UG9ydCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gQXJyYXlQb3J0KHR5cGUpIHsKICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICBpZiAoIXRoaXMudHlwZSkgewogICAgICB0aGlzLnR5cGUgPSAnYWxsJzsKICAgIH0KICAgIHRoaXMuc29ja2V0cyA9IFtdOwogIH0KCiAgQXJyYXlQb3J0LnByb3RvdHlwZS5hdHRhY2ggPSBmdW5jdGlvbihzb2NrZXQpIHsKICAgIHRoaXMuc29ja2V0cy5wdXNoKHNvY2tldCk7CiAgICByZXR1cm4gdGhpcy5hdHRhY2hTb2NrZXQoc29ja2V0LCB0aGlzLnNvY2tldHMubGVuZ3RoIC0gMSk7CiAgfTsKCiAgQXJyYXlQb3J0LnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24oc29ja2V0SWQpIHsKICAgIGlmIChzb2NrZXRJZCA9PSBudWxsKSB7CiAgICAgIHNvY2tldElkID0gbnVsbDsKICAgIH0KICAgIGlmIChzb2NrZXRJZCA9PT0gbnVsbCkgewogICAgICBpZiAoIXRoaXMuc29ja2V0cy5sZW5ndGgpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIiIgKyAodGhpcy5nZXRJZCgpKSArICI6IE5vIGNvbm5lY3Rpb25zIGF2YWlsYWJsZSIpOwogICAgICB9CiAgICAgIHRoaXMuc29ja2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHNvY2tldCkgewogICAgICAgIHJldHVybiBzb2NrZXQuY29ubmVjdCgpOwogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCF0aGlzLnNvY2tldHNbc29ja2V0SWRdKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiIiArICh0aGlzLmdldElkKCkpICsgIjogTm8gY29ubmVjdGlvbiAnIiArIHNvY2tldElkICsgIicgYXZhaWxhYmxlIik7CiAgICB9CiAgICByZXR1cm4gdGhpcy5zb2NrZXRzW3NvY2tldElkXS5jb25uZWN0KCk7CiAgfTsKCiAgQXJyYXlQb3J0LnByb3RvdHlwZS5iZWdpbkdyb3VwID0gZnVuY3Rpb24oZ3JvdXAsIHNvY2tldElkKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgaWYgKHNvY2tldElkID09IG51bGwpIHsKICAgICAgc29ja2V0SWQgPSBudWxsOwogICAgfQogICAgaWYgKHNvY2tldElkID09PSBudWxsKSB7CiAgICAgIGlmICghdGhpcy5zb2NrZXRzLmxlbmd0aCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiIiArICh0aGlzLmdldElkKCkpICsgIjogTm8gY29ubmVjdGlvbnMgYXZhaWxhYmxlIik7CiAgICAgIH0KICAgICAgdGhpcy5zb2NrZXRzLmZvckVhY2goZnVuY3Rpb24oc29ja2V0LCBpbmRleCkgewogICAgICAgIHJldHVybiBfdGhpcy5iZWdpbkdyb3VwKGdyb3VwLCBpbmRleCk7CiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoIXRoaXMuc29ja2V0c1tzb2NrZXRJZF0pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCIiICsgKHRoaXMuZ2V0SWQoKSkgKyAiOiBObyBjb25uZWN0aW9uICciICsgc29ja2V0SWQgKyAiJyBhdmFpbGFibGUiKTsKICAgIH0KICAgIGlmICh0aGlzLmlzQ29ubmVjdGVkKHNvY2tldElkKSkgewogICAgICByZXR1cm4gdGhpcy5zb2NrZXRzW3NvY2tldElkXS5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0KICAgIHRoaXMuc29ja2V0c1tzb2NrZXRJZF0ub25jZSgiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuc29ja2V0c1tzb2NrZXRJZF0uYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHJldHVybiB0aGlzLnNvY2tldHNbc29ja2V0SWRdLmNvbm5lY3QoKTsKICB9OwoKICBBcnJheVBvcnQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihkYXRhLCBzb2NrZXRJZCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIGlmIChzb2NrZXRJZCA9PSBudWxsKSB7CiAgICAgIHNvY2tldElkID0gbnVsbDsKICAgIH0KICAgIGlmIChzb2NrZXRJZCA9PT0gbnVsbCkgewogICAgICBpZiAoIXRoaXMuc29ja2V0cy5sZW5ndGgpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIiIgKyAodGhpcy5nZXRJZCgpKSArICI6IE5vIGNvbm5lY3Rpb25zIGF2YWlsYWJsZSIpOwogICAgICB9CiAgICAgIHRoaXMuc29ja2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHNvY2tldCwgaW5kZXgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuc2VuZChkYXRhLCBpbmRleCk7CiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoIXRoaXMuc29ja2V0c1tzb2NrZXRJZF0pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCIiICsgKHRoaXMuZ2V0SWQoKSkgKyAiOiBObyBjb25uZWN0aW9uICciICsgc29ja2V0SWQgKyAiJyBhdmFpbGFibGUiKTsKICAgIH0KICAgIGlmICh0aGlzLmlzQ29ubmVjdGVkKHNvY2tldElkKSkgewogICAgICByZXR1cm4gdGhpcy5zb2NrZXRzW3NvY2tldElkXS5zZW5kKGRhdGEpOwogICAgfQogICAgdGhpcy5zb2NrZXRzW3NvY2tldElkXS5vbmNlKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5zb2NrZXRzW3NvY2tldElkXS5zZW5kKGRhdGEpOwogICAgfSk7CiAgICByZXR1cm4gdGhpcy5zb2NrZXRzW3NvY2tldElkXS5jb25uZWN0KCk7CiAgfTsKCiAgQXJyYXlQb3J0LnByb3RvdHlwZS5lbmRHcm91cCA9IGZ1bmN0aW9uKHNvY2tldElkKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgaWYgKHNvY2tldElkID09IG51bGwpIHsKICAgICAgc29ja2V0SWQgPSBudWxsOwogICAgfQogICAgaWYgKHNvY2tldElkID09PSBudWxsKSB7CiAgICAgIGlmICghdGhpcy5zb2NrZXRzLmxlbmd0aCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiIiArICh0aGlzLmdldElkKCkpICsgIjogTm8gY29ubmVjdGlvbnMgYXZhaWxhYmxlIik7CiAgICAgIH0KICAgICAgdGhpcy5zb2NrZXRzLmZvckVhY2goZnVuY3Rpb24oc29ja2V0LCBpbmRleCkgewogICAgICAgIHJldHVybiBfdGhpcy5lbmRHcm91cChpbmRleCk7CiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoIXRoaXMuc29ja2V0c1tzb2NrZXRJZF0pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCIiICsgKHRoaXMuZ2V0SWQoKSkgKyAiOiBObyBjb25uZWN0aW9uICciICsgc29ja2V0SWQgKyAiJyBhdmFpbGFibGUiKTsKICAgIH0KICAgIHJldHVybiB0aGlzLnNvY2tldHNbc29ja2V0SWRdLmVuZEdyb3VwKCk7CiAgfTsKCiAgQXJyYXlQb3J0LnByb3RvdHlwZS5kaXNjb25uZWN0ID0gZnVuY3Rpb24oc29ja2V0SWQpIHsKICAgIHZhciBzb2NrZXQsIF9pLCBfbGVuLCBfcmVmOwogICAgaWYgKHNvY2tldElkID09IG51bGwpIHsKICAgICAgc29ja2V0SWQgPSBudWxsOwogICAgfQogICAgaWYgKHNvY2tldElkID09PSBudWxsKSB7CiAgICAgIGlmICghdGhpcy5zb2NrZXRzLmxlbmd0aCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiIiArICh0aGlzLmdldElkKCkpICsgIjogTm8gY29ubmVjdGlvbnMgYXZhaWxhYmxlIik7CiAgICAgIH0KICAgICAgX3JlZiA9IHRoaXMuc29ja2V0czsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgc29ja2V0ID0gX3JlZltfaV07CiAgICAgICAgc29ja2V0LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoIXRoaXMuc29ja2V0c1tzb2NrZXRJZF0pIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgcmV0dXJuIHRoaXMuc29ja2V0c1tzb2NrZXRJZF0uZGlzY29ubmVjdCgpOwogIH07CgogIEFycmF5UG9ydC5wcm90b3R5cGUuZGV0YWNoID0gZnVuY3Rpb24oc29ja2V0KSB7CiAgICBpZiAodGhpcy5zb2NrZXRzLmluZGV4T2Yoc29ja2V0KSA9PT0gLTEpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5zb2NrZXRzLnNwbGljZSh0aGlzLnNvY2tldHMuaW5kZXhPZihzb2NrZXQpLCAxKTsKICAgIHJldHVybiB0aGlzLmVtaXQoImRldGFjaCIsIHNvY2tldCk7CiAgfTsKCiAgQXJyYXlQb3J0LnByb3RvdHlwZS5pc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKHNvY2tldElkKSB7CiAgICB2YXIgY29ubmVjdGVkLAogICAgICBfdGhpcyA9IHRoaXM7CiAgICBpZiAoc29ja2V0SWQgPT0gbnVsbCkgewogICAgICBzb2NrZXRJZCA9IG51bGw7CiAgICB9CiAgICBpZiAoc29ja2V0SWQgPT09IG51bGwpIHsKICAgICAgY29ubmVjdGVkID0gZmFsc2U7CiAgICAgIHRoaXMuc29ja2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHNvY2tldCkgewogICAgICAgIGlmIChzb2NrZXQuaXNDb25uZWN0ZWQoKSkgewogICAgICAgICAgcmV0dXJuIGNvbm5lY3RlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGNvbm5lY3RlZDsKICAgIH0KICAgIGlmICghdGhpcy5zb2NrZXRzW3NvY2tldElkXSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gdGhpcy5zb2NrZXRzW3NvY2tldElkXS5pc0Nvbm5lY3RlZCgpOwogIH07CgogIEFycmF5UG9ydC5wcm90b3R5cGUuaXNBdHRhY2hlZCA9IGZ1bmN0aW9uKHNvY2tldElkKSB7CiAgICBpZiAoc29ja2V0SWQgPT09IHZvaWQgMCkgewogICAgICBpZiAodGhpcy5zb2NrZXRzLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAodGhpcy5zb2NrZXRzW3NvY2tldElkXSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9OwoKICBBcnJheVBvcnQucHJvdG90eXBlLmNhbkF0dGFjaCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgcmV0dXJuIEFycmF5UG9ydDsKCn0pKHBvcnQuUG9ydCk7CgpleHBvcnRzLkFycmF5UG9ydCA9IEFycmF5UG9ydDsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgX3JlZiwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCmlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5leGVjUGF0aCAmJiBwcm9jZXNzLmV4ZWNQYXRoLmluZGV4T2YoJ25vZGUnKSAhPT0gLTEpIHsKICBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7Cn0gZWxzZSB7CiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpOwp9CgpDb21wb25lbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENvbXBvbmVudCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gQ29tcG9uZW50KCkgewogICAgX3JlZiA9IENvbXBvbmVudC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIHJldHVybiBfcmVmOwogIH0KCiAgQ29tcG9uZW50LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICcnOwoKICBDb21wb25lbnQucHJvdG90eXBlLmljb24gPSBudWxsOwoKICBDb21wb25lbnQucHJvdG90eXBlLmdldERlc2NyaXB0aW9uID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvbjsKICB9OwoKICBDb21wb25lbnQucHJvdG90eXBlLmlzUmVhZHkgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0cnVlOwogIH07CgogIENvbXBvbmVudC5wcm90b3R5cGUuaXNTdWJncmFwaCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGZhbHNlOwogIH07CgogIENvbXBvbmVudC5wcm90b3R5cGUuc2V0SWNvbiA9IGZ1bmN0aW9uKGljb24pIHsKICAgIHRoaXMuaWNvbiA9IGljb247CiAgICByZXR1cm4gdGhpcy5lbWl0KCdpY29uJywgdGhpcy5pY29uKTsKICB9OwoKICBDb21wb25lbnQucHJvdG90eXBlLmdldEljb24gPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmljb247CiAgfTsKCiAgQ29tcG9uZW50LnByb3RvdHlwZS5zaHV0ZG93biA9IGZ1bmN0aW9uKCkge307CgogIHJldHVybiBDb21wb25lbnQ7Cgp9KShFdmVudEVtaXR0ZXIpOwoKZXhwb3J0cy5Db21wb25lbnQgPSBDb21wb25lbnQ7Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBBc3luY0NvbXBvbmVudCwgY29tcG9uZW50LCBwb3J0LAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKcG9ydCA9IHJlcXVpcmUoIi4vUG9ydCIpOwoKY29tcG9uZW50ID0gcmVxdWlyZSgiLi9Db21wb25lbnQiKTsKCkFzeW5jQ29tcG9uZW50ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhBc3luY0NvbXBvbmVudCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gQXN5bmNDb21wb25lbnQoaW5Qb3J0TmFtZSwgb3V0UG9ydE5hbWUsIGVyclBvcnROYW1lKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnROYW1lID0gaW5Qb3J0TmFtZSAhPSBudWxsID8gaW5Qb3J0TmFtZSA6ICJpbiI7CiAgICB0aGlzLm91dFBvcnROYW1lID0gb3V0UG9ydE5hbWUgIT0gbnVsbCA/IG91dFBvcnROYW1lIDogIm91dCI7CiAgICB0aGlzLmVyclBvcnROYW1lID0gZXJyUG9ydE5hbWUgIT0gbnVsbCA/IGVyclBvcnROYW1lIDogImVycm9yIjsKICAgIGlmICghdGhpcy5pblBvcnRzW3RoaXMuaW5Qb3J0TmFtZV0pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJubyBpblBvcnQgbmFtZWQgJyIgKyB0aGlzLmluUG9ydE5hbWUgKyAiJyIpOwogICAgfQogICAgaWYgKCF0aGlzLm91dFBvcnRzW3RoaXMub3V0UG9ydE5hbWVdKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigibm8gb3V0UG9ydCBuYW1lZCAnIiArIHRoaXMub3V0UG9ydE5hbWUgKyAiJyIpOwogICAgfQogICAgdGhpcy5sb2FkID0gMDsKICAgIHRoaXMucSA9IFtdOwogICAgdGhpcy5vdXRQb3J0cy5sb2FkID0gbmV3IHBvcnQuUG9ydCgpOwogICAgdGhpcy5pblBvcnRzW3RoaXMuaW5Qb3J0TmFtZV0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICBpZiAoX3RoaXMubG9hZCA+IDApIHsKICAgICAgICByZXR1cm4gX3RoaXMucS5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJiZWdpbmdyb3VwIiwKICAgICAgICAgIGRhdGE6IGdyb3VwCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzW190aGlzLm91dFBvcnROYW1lXS5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzW3RoaXMuaW5Qb3J0TmFtZV0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oKSB7CiAgICAgIGlmIChfdGhpcy5sb2FkID4gMCkgewogICAgICAgIHJldHVybiBfdGhpcy5xLnB1c2goewogICAgICAgICAgbmFtZTogImVuZGdyb3VwIgogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0c1tfdGhpcy5vdXRQb3J0TmFtZV0uZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzW3RoaXMuaW5Qb3J0TmFtZV0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF90aGlzLmxvYWQgPiAwKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnEucHVzaCh7CiAgICAgICAgICBuYW1lOiAiZGlzY29ubmVjdCIKICAgICAgICB9KTsKICAgICAgfQogICAgICBfdGhpcy5vdXRQb3J0c1tfdGhpcy5vdXRQb3J0TmFtZV0uZGlzY29ubmVjdCgpOwogICAgICBpZiAoX3RoaXMub3V0UG9ydHMubG9hZC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMubG9hZC5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzW3RoaXMuaW5Qb3J0TmFtZV0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChfdGhpcy5xLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gX3RoaXMucS5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJkYXRhIiwKICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMucHJvY2Vzc0RhdGEoZGF0YSk7CiAgICB9KTsKICB9CgogIEFzeW5jQ29tcG9uZW50LnByb3RvdHlwZS5wcm9jZXNzRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluY3JlbWVudExvYWQoKTsKICAgIHJldHVybiB0aGlzLmRvQXN5bmMoZGF0YSwgZnVuY3Rpb24oZXJyKSB7CiAgICAgIGlmIChlcnIpIHsKICAgICAgICBpZiAoX3RoaXMub3V0UG9ydHNbX3RoaXMuZXJyUG9ydE5hbWVdICYmIF90aGlzLm91dFBvcnRzW190aGlzLmVyclBvcnROYW1lXS5pc0F0dGFjaGVkKCkpIHsKICAgICAgICAgIF90aGlzLm91dFBvcnRzW190aGlzLmVyclBvcnROYW1lXS5zZW5kKGVycik7CiAgICAgICAgICBfdGhpcy5vdXRQb3J0c1tfdGhpcy5lcnJQb3J0TmFtZV0uZGlzY29ubmVjdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5kZWNyZW1lbnRMb2FkKCk7CiAgICB9KTsKICB9OwoKICBBc3luY0NvbXBvbmVudC5wcm90b3R5cGUuaW5jcmVtZW50TG9hZCA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5sb2FkKys7CiAgICBpZiAodGhpcy5vdXRQb3J0cy5sb2FkLmlzQXR0YWNoZWQoKSkgewogICAgICB0aGlzLm91dFBvcnRzLmxvYWQuc2VuZCh0aGlzLmxvYWQpOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMubG9hZC5pc0F0dGFjaGVkKCkpIHsKICAgICAgcmV0dXJuIHRoaXMub3V0UG9ydHMubG9hZC5kaXNjb25uZWN0KCk7CiAgICB9CiAgfTsKCiAgQXN5bmNDb21wb25lbnQucHJvdG90eXBlLmRvQXN5bmMgPSBmdW5jdGlvbihkYXRhLCBjYWxsYmFjaykgewogICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigiQXN5bmNDb21wb25lbnRzIG11c3QgaW1wbGVtZW50IGRvQXN5bmMiKSk7CiAgfTsKCiAgQXN5bmNDb21wb25lbnQucHJvdG90eXBlLmRlY3JlbWVudExvYWQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBpZiAodGhpcy5sb2FkID09PSAwKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigibG9hZCBjYW5ub3QgYmUgbmVnYXRpdmUiKTsKICAgIH0KICAgIHRoaXMubG9hZC0tOwogICAgaWYgKHRoaXMub3V0UG9ydHMubG9hZC5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5sb2FkLnNlbmQodGhpcy5sb2FkKTsKICAgIH0KICAgIGlmICh0aGlzLm91dFBvcnRzLmxvYWQuaXNBdHRhY2hlZCgpKSB7CiAgICAgIHRoaXMub3V0UG9ydHMubG9hZC5kaXNjb25uZWN0KCk7CiAgICB9CiAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZXhlY1BhdGggJiYgcHJvY2Vzcy5leGVjUGF0aC5pbmRleE9mKCdub2RlJykgIT09IC0xKSB7CiAgICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBfdGhpcy5wcm9jZXNzUXVldWUoKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gX3RoaXMucHJvY2Vzc1F1ZXVlKCk7CiAgICAgIH0sIDApOwogICAgfQogIH07CgogIEFzeW5jQ29tcG9uZW50LnByb3RvdHlwZS5wcm9jZXNzUXVldWUgPSBmdW5jdGlvbigpIHsKICAgIHZhciBldmVudCwgcHJvY2Vzc2VkRGF0YTsKICAgIGlmICh0aGlzLmxvYWQgPiAwKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHByb2Nlc3NlZERhdGEgPSBmYWxzZTsKICAgIHdoaWxlICh0aGlzLnEubGVuZ3RoID4gMCkgewogICAgICBldmVudCA9IHRoaXMucVswXTsKICAgICAgc3dpdGNoIChldmVudC5uYW1lKSB7CiAgICAgICAgY2FzZSAiYmVnaW5ncm91cCI6CiAgICAgICAgICBpZiAocHJvY2Vzc2VkRGF0YSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLm91dFBvcnRzW3RoaXMub3V0UG9ydE5hbWVdLmJlZ2luR3JvdXAoZXZlbnQuZGF0YSk7CiAgICAgICAgICB0aGlzLnEuc2hpZnQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImVuZGdyb3VwIjoKICAgICAgICAgIGlmIChwcm9jZXNzZWREYXRhKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMub3V0UG9ydHNbdGhpcy5vdXRQb3J0TmFtZV0uZW5kR3JvdXAoKTsKICAgICAgICAgIHRoaXMucS5zaGlmdCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiZGlzY29ubmVjdCI6CiAgICAgICAgICBpZiAocHJvY2Vzc2VkRGF0YSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLm91dFBvcnRzW3RoaXMub3V0UG9ydE5hbWVdLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgIGlmICh0aGlzLm91dFBvcnRzLmxvYWQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgICAgIHRoaXMub3V0UG9ydHMubG9hZC5kaXNjb25uZWN0KCk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnEuc2hpZnQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImRhdGEiOgogICAgICAgICAgdGhpcy5wcm9jZXNzRGF0YShldmVudC5kYXRhKTsKICAgICAgICAgIHRoaXMucS5zaGlmdCgpOwogICAgICAgICAgcHJvY2Vzc2VkRGF0YSA9IHRydWU7CiAgICAgIH0KICAgIH0KICB9OwoKICByZXR1cm4gQXN5bmNDb21wb25lbnQ7Cgp9KShjb21wb25lbnQuQ29tcG9uZW50KTsKCmV4cG9ydHMuQXN5bmNDb21wb25lbnQgPSBBc3luY0NvbXBvbmVudDsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ29tcG9uZW50LCBQb3J0LCB1dGlsLAogIF9fYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgpDb21wb25lbnQgPSByZXF1aXJlKCIuL0NvbXBvbmVudCIpLkNvbXBvbmVudDsKClBvcnQgPSByZXF1aXJlKCIuL1BvcnQiKS5Qb3J0OwoKaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmV4ZWNQYXRoICYmIHByb2Nlc3MuZXhlY1BhdGguaW5kZXhPZignbm9kZScpICE9PSAtMSkgewogIHV0aWwgPSByZXF1aXJlKCJ1dGlsIik7Cn0gZWxzZSB7CiAgdXRpbCA9IHsKICAgIGluc3BlY3Q6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CiAgfTsKfQoKZXhwb3J0cy5Mb2dnaW5nQ29tcG9uZW50ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhMb2dnaW5nQ29tcG9uZW50LCBfc3VwZXIpOwoKICBmdW5jdGlvbiBMb2dnaW5nQ29tcG9uZW50KCkgewogICAgdGhpcy5zZW5kTG9nID0gX19iaW5kKHRoaXMuc2VuZExvZywgdGhpcyk7CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBsb2c6IG5ldyBQb3J0KCkKICAgIH07CiAgfQoKICBMb2dnaW5nQ29tcG9uZW50LnByb3RvdHlwZS5zZW5kTG9nID0gZnVuY3Rpb24obWVzc2FnZSkgewogICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAib2JqZWN0IikgewogICAgICBtZXNzYWdlLndoZW4gPSBuZXcgRGF0ZTsKICAgICAgbWVzc2FnZS5zb3VyY2UgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgIGlmICh0aGlzLm5vZGVJZCAhPSBudWxsKSB7CiAgICAgICAgbWVzc2FnZS5ub2RlSUQgPSB0aGlzLm5vZGVJZDsKICAgICAgfQogICAgfQogICAgaWYgKCh0aGlzLm91dFBvcnRzLmxvZyAhPSBudWxsKSAmJiB0aGlzLm91dFBvcnRzLmxvZy5pc0F0dGFjaGVkKCkpIHsKICAgICAgcmV0dXJuIHRoaXMub3V0UG9ydHMubG9nLnNlbmQobWVzc2FnZSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gY29uc29sZS5sb2codXRpbC5pbnNwZWN0KG1lc3NhZ2UsIDQsIHRydWUsIHRydWUpKTsKICAgIH0KICB9OwoKICByZXR1cm4gTG9nZ2luZ0NvbXBvbmVudDsKCn0pKENvbXBvbmVudCk7Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ29tcG9uZW50TG9hZGVyLCBpbnRlcm5hbFNvY2tldDsKCmludGVybmFsU29ja2V0ID0gcmVxdWlyZSgnLi9JbnRlcm5hbFNvY2tldCcpOwoKQ29tcG9uZW50TG9hZGVyID0gKGZ1bmN0aW9uKCkgewogIGZ1bmN0aW9uIENvbXBvbmVudExvYWRlcihiYXNlRGlyKSB7CiAgICB0aGlzLmJhc2VEaXIgPSBiYXNlRGlyOwogICAgdGhpcy5jb21wb25lbnRzID0gbnVsbDsKICAgIHRoaXMuY2hlY2tlZCA9IFtdOwogICAgdGhpcy5yZXZhbGlkYXRlID0gZmFsc2U7CiAgICB0aGlzLmxpYnJhcnlJY29ucyA9IHt9OwogIH0KCiAgQ29tcG9uZW50TG9hZGVyLnByb3RvdHlwZS5nZXRNb2R1bGVQcmVmaXggPSBmdW5jdGlvbihuYW1lKSB7CiAgICBpZiAoIW5hbWUpIHsKICAgICAgcmV0dXJuICcnOwogICAgfQogICAgaWYgKG5hbWUgPT09ICdub2ZsbycpIHsKICAgICAgcmV0dXJuICcnOwogICAgfQogICAgcmV0dXJuIG5hbWUucmVwbGFjZSgnbm9mbG8tJywgJycpOwogIH07CgogIENvbXBvbmVudExvYWRlci5wcm90b3R5cGUuZ2V0TW9kdWxlQ29tcG9uZW50cyA9IGZ1bmN0aW9uKG1vZHVsZU5hbWUpIHsKICAgIHZhciBjUGF0aCwgZGVmaW5pdGlvbiwgZGVwZW5kZW5jeSwgZSwgbG9hZGVyLCBuYW1lLCBwcmVmaXgsIF9yZWYsIF9yZWYxLCBfcmVzdWx0czsKICAgIGlmICh0aGlzLmNoZWNrZWQuaW5kZXhPZihtb2R1bGVOYW1lKSAhPT0gLTEpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5jaGVja2VkLnB1c2gobW9kdWxlTmFtZSk7CiAgICB0cnkgewogICAgICBkZWZpbml0aW9uID0gcmVxdWlyZSgiLyIgKyBtb2R1bGVOYW1lICsgIi9jb21wb25lbnQuanNvbiIpOwogICAgfSBjYXRjaCAoX2Vycm9yKSB7CiAgICAgIGUgPSBfZXJyb3I7CiAgICAgIGlmIChtb2R1bGVOYW1lLnN1YnN0cigwLCAxKSA9PT0gJy8nKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9kdWxlQ29tcG9uZW50cygibm9mbG8tIiArIChtb2R1bGVOYW1lLnN1YnN0cigxKSkpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGZvciAoZGVwZW5kZW5jeSBpbiBkZWZpbml0aW9uLmRlcGVuZGVuY2llcykgewogICAgICB0aGlzLmdldE1vZHVsZUNvbXBvbmVudHMoZGVwZW5kZW5jeS5yZXBsYWNlKCcvJywgJy0nKSk7CiAgICB9CiAgICBpZiAoIWRlZmluaXRpb24ubm9mbG8pIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgcHJlZml4ID0gdGhpcy5nZXRNb2R1bGVQcmVmaXgoZGVmaW5pdGlvbi5uYW1lKTsKICAgIGlmIChkZWZpbml0aW9uLm5vZmxvLmljb24pIHsKICAgICAgdGhpcy5saWJyYXJ5SWNvbnNbcHJlZml4XSA9IGRlZmluaXRpb24ubm9mbG8uaWNvbjsKICAgIH0KICAgIGlmIChtb2R1bGVOYW1lWzBdID09PSAnLycpIHsKICAgICAgbW9kdWxlTmFtZSA9IG1vZHVsZU5hbWUuc3Vic3RyKDEpOwogICAgfQogICAgaWYgKGRlZmluaXRpb24ubm9mbG8ubG9hZGVyKSB7CiAgICAgIGxvYWRlciA9IHJlcXVpcmUoZGVmaW5pdGlvbi5ub2Zsby5sb2FkZXIpOwogICAgICBsb2FkZXIodGhpcyk7CiAgICB9CiAgICBpZiAoZGVmaW5pdGlvbi5ub2Zsby5jb21wb25lbnRzKSB7CiAgICAgIF9yZWYgPSBkZWZpbml0aW9uLm5vZmxvLmNvbXBvbmVudHM7CiAgICAgIGZvciAobmFtZSBpbiBfcmVmKSB7CiAgICAgICAgY1BhdGggPSBfcmVmW25hbWVdOwogICAgICAgIGlmIChjUGF0aC5pbmRleE9mKCcuY29mZmVlJykgIT09IC0xKSB7CiAgICAgICAgICBjUGF0aCA9IGNQYXRoLnJlcGxhY2UoJy5jb2ZmZWUnLCAnLmpzJyk7CiAgICAgICAgfQogICAgICAgIHRoaXMucmVnaXN0ZXJDb21wb25lbnQocHJlZml4LCBuYW1lLCAiLyIgKyBtb2R1bGVOYW1lICsgIi8iICsgY1BhdGgpOwogICAgICB9CiAgICB9CiAgICBpZiAoZGVmaW5pdGlvbi5ub2Zsby5ncmFwaHMpIHsKICAgICAgX3JlZjEgPSBkZWZpbml0aW9uLm5vZmxvLmdyYXBoczsKICAgICAgX3Jlc3VsdHMgPSBbXTsKICAgICAgZm9yIChuYW1lIGluIF9yZWYxKSB7CiAgICAgICAgY1BhdGggPSBfcmVmMVtuYW1lXTsKICAgICAgICBfcmVzdWx0cy5wdXNoKHRoaXMucmVnaXN0ZXJDb21wb25lbnQocHJlZml4LCBuYW1lLCAiLyIgKyBtb2R1bGVOYW1lICsgIi8iICsgY1BhdGgpKTsKICAgICAgfQogICAgICByZXR1cm4gX3Jlc3VsdHM7CiAgICB9CiAgfTsKCiAgQ29tcG9uZW50TG9hZGVyLnByb3RvdHlwZS5saXN0Q29tcG9uZW50cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICBpZiAodGhpcy5jb21wb25lbnRzICE9PSBudWxsKSB7CiAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzLmNvbXBvbmVudHMpOwogICAgfQogICAgdGhpcy5jb21wb25lbnRzID0ge307CiAgICB0aGlzLmdldE1vZHVsZUNvbXBvbmVudHModGhpcy5iYXNlRGlyKTsKICAgIHJldHVybiBjYWxsYmFjayh0aGlzLmNvbXBvbmVudHMpOwogIH07CgogIENvbXBvbmVudExvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrKSB7CiAgICB2YXIgY29tcG9uZW50LCBjb21wb25lbnROYW1lLCBpbXBsZW1lbnRhdGlvbiwgaW5zdGFuY2UsCiAgICAgIF90aGlzID0gdGhpczsKICAgIGlmICghdGhpcy5jb21wb25lbnRzKSB7CiAgICAgIHRoaXMubGlzdENvbXBvbmVudHMoZnVuY3Rpb24oY29tcG9uZW50cykgewogICAgICAgIHJldHVybiBfdGhpcy5sb2FkKG5hbWUsIGNhbGxiYWNrKTsKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbXBvbmVudCA9IHRoaXMuY29tcG9uZW50c1tuYW1lXTsKICAgIGlmICghY29tcG9uZW50KSB7CiAgICAgIGZvciAoY29tcG9uZW50TmFtZSBpbiB0aGlzLmNvbXBvbmVudHMpIHsKICAgICAgICBpZiAoY29tcG9uZW50TmFtZS5zcGxpdCgnLycpWzFdID09PSBuYW1lKSB7CiAgICAgICAgICBjb21wb25lbnQgPSB0aGlzLmNvbXBvbmVudHNbY29tcG9uZW50TmFtZV07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKCFjb21wb25lbnQpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNvbXBvbmVudCAiICsgbmFtZSArICIgbm90IGF2YWlsYWJsZSB3aXRoIGJhc2UgIiArIHRoaXMuYmFzZURpcik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CiAgICBpZiAodGhpcy5pc0dyYXBoKGNvbXBvbmVudCkpIHsKICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmV4ZWNQYXRoICYmIHByb2Nlc3MuZXhlY1BhdGguaW5kZXhPZignbm9kZScpICE9PSAtMSkgewogICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMubG9hZEdyYXBoKG5hbWUsIGNvbXBvbmVudCwgY2FsbGJhY2spOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMubG9hZEdyYXBoKG5hbWUsIGNvbXBvbmVudCwgY2FsbGJhY2spOwogICAgICAgIH0sIDApOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlb2YgY29tcG9uZW50ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIGltcGxlbWVudGF0aW9uID0gY29tcG9uZW50OwogICAgICBpbnN0YW5jZSA9IG5ldyBjb21wb25lbnQ7CiAgICB9IGVsc2UgewogICAgICBpbXBsZW1lbnRhdGlvbiA9IHJlcXVpcmUoY29tcG9uZW50KTsKICAgICAgaW5zdGFuY2UgPSBpbXBsZW1lbnRhdGlvbi5nZXRDb21wb25lbnQoKTsKICAgIH0KICAgIGlmIChuYW1lID09PSAnR3JhcGgnKSB7CiAgICAgIGluc3RhbmNlLmJhc2VEaXIgPSB0aGlzLmJhc2VEaXI7CiAgICB9CiAgICB0aGlzLnNldEljb24obmFtZSwgaW5zdGFuY2UpOwogICAgcmV0dXJuIGNhbGxiYWNrKGluc3RhbmNlKTsKICB9OwoKICBDb21wb25lbnRMb2FkZXIucHJvdG90eXBlLmlzR3JhcGggPSBmdW5jdGlvbihjUGF0aCkgewogICAgaWYgKHR5cGVvZiBjUGF0aCAhPT0gJ3N0cmluZycpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIGNQYXRoLmluZGV4T2YoJy5mYnAnKSAhPT0gLTEgfHwgY1BhdGguaW5kZXhPZignLmpzb24nKSAhPT0gLTE7CiAgfTsKCiAgQ29tcG9uZW50TG9hZGVyLnByb3RvdHlwZS5sb2FkR3JhcGggPSBmdW5jdGlvbihuYW1lLCBjb21wb25lbnQsIGNhbGxiYWNrKSB7CiAgICB2YXIgZ3JhcGgsIGdyYXBoSW1wbGVtZW50YXRpb24sIGdyYXBoU29ja2V0OwogICAgZ3JhcGhJbXBsZW1lbnRhdGlvbiA9IHJlcXVpcmUodGhpcy5jb21wb25lbnRzWydHcmFwaCddKTsKICAgIGdyYXBoU29ja2V0ID0gaW50ZXJuYWxTb2NrZXQuY3JlYXRlU29ja2V0KCk7CiAgICBncmFwaCA9IGdyYXBoSW1wbGVtZW50YXRpb24uZ2V0Q29tcG9uZW50KCk7CiAgICBncmFwaC5iYXNlRGlyID0gdGhpcy5iYXNlRGlyOwogICAgZ3JhcGguaW5Qb3J0cy5ncmFwaC5hdHRhY2goZ3JhcGhTb2NrZXQpOwogICAgZ3JhcGhTb2NrZXQuc2VuZChjb21wb25lbnQpOwogICAgZ3JhcGhTb2NrZXQuZGlzY29ubmVjdCgpOwogICAgZGVsZXRlIGdyYXBoLmluUG9ydHMuZ3JhcGg7CiAgICBkZWxldGUgZ3JhcGguaW5Qb3J0cy5zdGFydDsKICAgIHRoaXMuc2V0SWNvbihuYW1lLCBncmFwaCk7CiAgICByZXR1cm4gY2FsbGJhY2soZ3JhcGgpOwogIH07CgogIENvbXBvbmVudExvYWRlci5wcm90b3R5cGUuc2V0SWNvbiA9IGZ1bmN0aW9uKG5hbWUsIGluc3RhbmNlKSB7CiAgICB2YXIgY29tcG9uZW50TmFtZSwgbGlicmFyeSwgX3JlZjsKICAgIGlmIChpbnN0YW5jZS5nZXRJY29uKCkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgX3JlZiA9IG5hbWUuc3BsaXQoJy8nKSwgbGlicmFyeSA9IF9yZWZbMF0sIGNvbXBvbmVudE5hbWUgPSBfcmVmWzFdOwogICAgaWYgKGNvbXBvbmVudE5hbWUgJiYgdGhpcy5nZXRMaWJyYXJ5SWNvbihsaWJyYXJ5KSkgewogICAgICBpbnN0YW5jZS5zZXRJY29uKHRoaXMuZ2V0TGlicmFyeUljb24obGlicmFyeSkpOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoaW5zdGFuY2UuaXNTdWJncmFwaCgpKSB7CiAgICAgIGluc3RhbmNlLnNldEljb24oJ3NpdGVtYXAnKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaW5zdGFuY2Uuc2V0SWNvbignYmxhbmsnKTsKICB9OwoKICBDb21wb25lbnRMb2FkZXIucHJvdG90eXBlLmdldExpYnJhcnlJY29uID0gZnVuY3Rpb24ocHJlZml4KSB7CiAgICBpZiAodGhpcy5saWJyYXJ5SWNvbnNbcHJlZml4XSkgewogICAgICByZXR1cm4gdGhpcy5saWJyYXJ5SWNvbnNbcHJlZml4XTsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH07CgogIENvbXBvbmVudExvYWRlci5wcm90b3R5cGUucmVnaXN0ZXJDb21wb25lbnQgPSBmdW5jdGlvbihwYWNrYWdlSWQsIG5hbWUsIGNQYXRoLCBjYWxsYmFjaykgewogICAgdmFyIGZ1bGxOYW1lLCBwcmVmaXg7CiAgICBwcmVmaXggPSB0aGlzLmdldE1vZHVsZVByZWZpeChwYWNrYWdlSWQpOwogICAgZnVsbE5hbWUgPSAiIiArIHByZWZpeCArICIvIiArIG5hbWU7CiAgICBpZiAoIXBhY2thZ2VJZCkgewogICAgICBmdWxsTmFtZSA9IG5hbWU7CiAgICB9CiAgICB0aGlzLmNvbXBvbmVudHNbZnVsbE5hbWVdID0gY1BhdGg7CiAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgICB9CiAgfTsKCiAgQ29tcG9uZW50TG9hZGVyLnByb3RvdHlwZS5yZWdpc3RlckdyYXBoID0gZnVuY3Rpb24ocGFja2FnZUlkLCBuYW1lLCBnUGF0aCwgY2FsbGJhY2spIHsKICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyQ29tcG9uZW50KHBhY2thZ2VJZCwgbmFtZSwgZ1BhdGgsIGNhbGxiYWNrKTsKICB9OwoKICBDb21wb25lbnRMb2FkZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLmNvbXBvbmVudHMgPSBudWxsOwogICAgdGhpcy5jaGVja2VkID0gW107CiAgICByZXR1cm4gdGhpcy5yZXZhbGlkYXRlID0gdHJ1ZTsKICB9OwoKICByZXR1cm4gQ29tcG9uZW50TG9hZGVyOwoKfSkoKTsKCmV4cG9ydHMuQ29tcG9uZW50TG9hZGVyID0gQ29tcG9uZW50TG9hZGVyOwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewpleHBvcnRzLmdyYXBoID0gcmVxdWlyZSgnLi9HcmFwaCcpOwoKZXhwb3J0cy5HcmFwaCA9IGV4cG9ydHMuZ3JhcGguR3JhcGg7CgpleHBvcnRzLk5ldHdvcmsgPSByZXF1aXJlKCcuL05ldHdvcmsnKS5OZXR3b3JrOwoKZXhwb3J0cy5pc0Jyb3dzZXIgPSBmdW5jdGlvbigpIHsKICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZXhlY1BhdGggJiYgcHJvY2Vzcy5leGVjUGF0aC5pbmRleE9mKCdub2RlJykgIT09IC0xKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHJldHVybiB0cnVlOwp9OwoKaWYgKCFleHBvcnRzLmlzQnJvd3NlcigpKSB7CiAgZXhwb3J0cy5Db21wb25lbnRMb2FkZXIgPSByZXF1aXJlKCcuL25vZGVqcy9Db21wb25lbnRMb2FkZXInKS5Db21wb25lbnRMb2FkZXI7Cn0gZWxzZSB7CiAgZXhwb3J0cy5Db21wb25lbnRMb2FkZXIgPSByZXF1aXJlKCcuL0NvbXBvbmVudExvYWRlcicpLkNvbXBvbmVudExvYWRlcjsKfQoKZXhwb3J0cy5Db21wb25lbnQgPSByZXF1aXJlKCcuL0NvbXBvbmVudCcpLkNvbXBvbmVudDsKCmV4cG9ydHMuQXN5bmNDb21wb25lbnQgPSByZXF1aXJlKCcuL0FzeW5jQ29tcG9uZW50JykuQXN5bmNDb21wb25lbnQ7CgpleHBvcnRzLkxvZ2dpbmdDb21wb25lbnQgPSByZXF1aXJlKCcuL0xvZ2dpbmdDb21wb25lbnQnKS5Mb2dnaW5nQ29tcG9uZW50OwoKZXhwb3J0cy5Qb3J0ID0gcmVxdWlyZSgnLi9Qb3J0JykuUG9ydDsKCmV4cG9ydHMuQXJyYXlQb3J0ID0gcmVxdWlyZSgnLi9BcnJheVBvcnQnKS5BcnJheVBvcnQ7CgpleHBvcnRzLmludGVybmFsU29ja2V0ID0gcmVxdWlyZSgnLi9JbnRlcm5hbFNvY2tldCcpOwoKZXhwb3J0cy5jcmVhdGVOZXR3b3JrID0gZnVuY3Rpb24oZ3JhcGgsIGNhbGxiYWNrLCBkZWxheSkgewogIHZhciBuZXR3b3JrLCBuZXR3b3JrUmVhZHk7CiAgbmV0d29yayA9IG5ldyBleHBvcnRzLk5ldHdvcmsoZ3JhcGgpOwogIG5ldHdvcmtSZWFkeSA9IGZ1bmN0aW9uKG5ldHdvcmspIHsKICAgIGlmIChjYWxsYmFjayAhPSBudWxsKSB7CiAgICAgIGNhbGxiYWNrKG5ldHdvcmspOwogICAgfQogICAgcmV0dXJuIG5ldHdvcmsuc3RhcnQoKTsKICB9OwogIGlmIChncmFwaC5ub2Rlcy5sZW5ndGggPT09IDApIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBuZXR3b3JrUmVhZHkobmV0d29yayk7CiAgICB9LCAwKTsKICAgIHJldHVybiBuZXR3b3JrOwogIH0KICBuZXR3b3JrLmxvYWRlci5saXN0Q29tcG9uZW50cyhmdW5jdGlvbigpIHsKICAgIGlmIChkZWxheSkgewogICAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCkgewogICAgICAgIGNhbGxiYWNrKG5ldHdvcmspOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiBuZXR3b3JrLmNvbm5lY3QoZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBuZXR3b3JrUmVhZHkobmV0d29yayk7CiAgICB9KTsKICB9KTsKICByZXR1cm4gbmV0d29yazsKfTsKCmV4cG9ydHMubG9hZEZpbGUgPSBmdW5jdGlvbihmaWxlLCBjYWxsYmFjaykgewogIHJldHVybiBleHBvcnRzLmdyYXBoLmxvYWRGaWxlKGZpbGUsIGZ1bmN0aW9uKG5ldCkgewogICAgcmV0dXJuIGV4cG9ydHMuY3JlYXRlTmV0d29yayhuZXQsIGNhbGxiYWNrKTsKICB9KTsKfTsKCmV4cG9ydHMuc2F2ZUZpbGUgPSBmdW5jdGlvbihncmFwaCwgZmlsZSwgY2FsbGJhY2spIHsKICByZXR1cm4gZXhwb3J0cy5ncmFwaC5zYXZlKGZpbGUsIGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGNhbGxiYWNrKGZpbGUpOwogIH0pOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvL3NyYy9saWIvTmV0d29yay5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBFdmVudEVtaXR0ZXIsIE5ldHdvcmssIGNvbXBvbmVudExvYWRlciwgZ3JhcGgsIGludGVybmFsU29ja2V0LCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKCmludGVybmFsU29ja2V0ID0gcmVxdWlyZSgiLi9JbnRlcm5hbFNvY2tldCIpOwoKZ3JhcGggPSByZXF1aXJlKCIuL0dyYXBoIik7CgppZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZXhlY1BhdGggJiYgcHJvY2Vzcy5leGVjUGF0aC5pbmRleE9mKCdub2RlJykgIT09IC0xKSB7CiAgY29tcG9uZW50TG9hZGVyID0gcmVxdWlyZSgiLi9ub2RlanMvQ29tcG9uZW50TG9hZGVyIik7CiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyOwp9IGVsc2UgewogIGNvbXBvbmVudExvYWRlciA9IHJlcXVpcmUoJy4vQ29tcG9uZW50TG9hZGVyJyk7CiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpOwp9CgpOZXR3b3JrID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhOZXR3b3JrLCBfc3VwZXIpOwoKICBOZXR3b3JrLnByb3RvdHlwZS5wcm9jZXNzZXMgPSB7fTsKCiAgTmV0d29yay5wcm90b3R5cGUuY29ubmVjdGlvbnMgPSBbXTsKCiAgTmV0d29yay5wcm90b3R5cGUuaW5pdGlhbHMgPSBbXTsKCiAgTmV0d29yay5wcm90b3R5cGUuZ3JhcGggPSBudWxsOwoKICBOZXR3b3JrLnByb3RvdHlwZS5zdGFydHVwRGF0ZSA9IG51bGw7CgogIE5ldHdvcmsucHJvdG90eXBlLnBvcnRCdWZmZXIgPSB7fTsKCiAgZnVuY3Rpb24gTmV0d29yayhncmFwaCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucHJvY2Vzc2VzID0ge307CiAgICB0aGlzLmNvbm5lY3Rpb25zID0gW107CiAgICB0aGlzLmluaXRpYWxzID0gW107CiAgICB0aGlzLmdyYXBoID0gZ3JhcGg7CiAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZXhlY1BhdGggJiYgcHJvY2Vzcy5leGVjUGF0aC5pbmRleE9mKCdub2RlJykgIT09IC0xKSB7CiAgICAgIHRoaXMuYmFzZURpciA9IGdyYXBoLmJhc2VEaXIgfHwgcHJvY2Vzcy5jd2QoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuYmFzZURpciA9IGdyYXBoLmJhc2VEaXIgfHwgJy8nOwogICAgfQogICAgdGhpcy5zdGFydHVwRGF0ZSA9IG5ldyBEYXRlKCk7CiAgICB0aGlzLmdyYXBoLm9uKCdhZGROb2RlJywgZnVuY3Rpb24obm9kZSkgewogICAgICByZXR1cm4gX3RoaXMuYWRkTm9kZShub2RlKTsKICAgIH0pOwogICAgdGhpcy5ncmFwaC5vbigncmVtb3ZlTm9kZScsIGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZU5vZGUobm9kZSk7CiAgICB9KTsKICAgIHRoaXMuZ3JhcGgub24oJ3JlbmFtZU5vZGUnLCBmdW5jdGlvbihvbGRJZCwgbmV3SWQpIHsKICAgICAgcmV0dXJuIF90aGlzLnJlbmFtZU5vZGUob2xkSWQsIG5ld0lkKTsKICAgIH0pOwogICAgdGhpcy5ncmFwaC5vbignYWRkRWRnZScsIGZ1bmN0aW9uKGVkZ2UpIHsKICAgICAgcmV0dXJuIF90aGlzLmFkZEVkZ2UoZWRnZSk7CiAgICB9KTsKICAgIHRoaXMuZ3JhcGgub24oJ3JlbW92ZUVkZ2UnLCBmdW5jdGlvbihlZGdlKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVFZGdlKGVkZ2UpOwogICAgfSk7CiAgICB0aGlzLmdyYXBoLm9uKCdhZGRJbml0aWFsJywgZnVuY3Rpb24oaWlwKSB7CiAgICAgIHJldHVybiBfdGhpcy5hZGRJbml0aWFsKGlpcCk7CiAgICB9KTsKICAgIHRoaXMuZ3JhcGgub24oJ3JlbW92ZUluaXRpYWwnLCBmdW5jdGlvbihpaXApIHsKICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZUluaXRpYWwoaWlwKTsKICAgIH0pOwogICAgdGhpcy5sb2FkZXIgPSBuZXcgY29tcG9uZW50TG9hZGVyLkNvbXBvbmVudExvYWRlcih0aGlzLmJhc2VEaXIpOwogIH0KCiAgTmV0d29yay5wcm90b3R5cGUudXB0aW1lID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gbmV3IERhdGUoKSAtIHRoaXMuc3RhcnR1cERhdGU7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuY29ubmVjdGlvbkNvdW50ID0gMDsKCiAgTmV0d29yay5wcm90b3R5cGUuaW5jcmVhc2VDb25uZWN0aW9ucyA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGlvbkNvdW50ID09PSAwKSB7CiAgICAgIHRoaXMuZW1pdCgnc3RhcnQnLCB7CiAgICAgICAgc3RhcnQ6IHRoaXMuc3RhcnR1cERhdGUKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uQ291bnQrKzsKICB9OwoKICBOZXR3b3JrLnByb3RvdHlwZS5kZWNyZWFzZUNvbm5lY3Rpb25zID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZW5kZXIsCiAgICAgIF90aGlzID0gdGhpczsKICAgIHRoaXMuY29ubmVjdGlvbkNvdW50LS07CiAgICBpZiAodGhpcy5jb25uZWN0aW9uQ291bnQgPT09IDApIHsKICAgICAgZW5kZXIgPSBfLmRlYm91bmNlKGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChfdGhpcy5jb25uZWN0aW9uQ291bnQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF90aGlzLmVtaXQoJ2VuZCcsIHsKICAgICAgICAgIHN0YXJ0OiBfdGhpcy5zdGFydHVwRGF0ZSwKICAgICAgICAgIGVuZDogbmV3IERhdGUsCiAgICAgICAgICB1cHRpbWU6IF90aGlzLnVwdGltZSgpCiAgICAgICAgfSk7CiAgICAgIH0sIDEwKTsKICAgICAgcmV0dXJuIGVuZGVyKCk7CiAgICB9CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKGNvbXBvbmVudCwgY2FsbGJhY2spIHsKICAgIGlmICh0eXBlb2YgY29tcG9uZW50ID09PSAnb2JqZWN0JykgewogICAgICByZXR1cm4gY2FsbGJhY2soY29tcG9uZW50KTsKICAgIH0KICAgIHJldHVybiB0aGlzLmxvYWRlci5sb2FkKGNvbXBvbmVudCwgY2FsbGJhY2spOwogIH07CgogIE5ldHdvcmsucHJvdG90eXBlLmFkZE5vZGUgPSBmdW5jdGlvbihub2RlLCBjYWxsYmFjaykgewogICAgdmFyIHByb2Nlc3MsCiAgICAgIF90aGlzID0gdGhpczsKICAgIGlmICh0aGlzLnByb2Nlc3Nlc1tub2RlLmlkXSkgewogICAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgICBjYWxsYmFjayh0aGlzLnByb2Nlc3Nlc1tub2RlLmlkXSk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQogICAgcHJvY2VzcyA9IHsKICAgICAgaWQ6IG5vZGUuaWQKICAgIH07CiAgICBpZiAoIW5vZGUuY29tcG9uZW50KSB7CiAgICAgIHRoaXMucHJvY2Vzc2VzW3Byb2Nlc3MuaWRdID0gcHJvY2VzczsKICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgY2FsbGJhY2socHJvY2Vzcyk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQogICAgcmV0dXJuIHRoaXMubG9hZChub2RlLmNvbXBvbmVudCwgZnVuY3Rpb24oaW5zdGFuY2UpIHsKICAgICAgdmFyIG5hbWUsIHBvcnQsIF9yZWYsIF9yZWYxOwogICAgICBpbnN0YW5jZS5ub2RlSWQgPSBub2RlLmlkOwogICAgICBwcm9jZXNzLmNvbXBvbmVudCA9IGluc3RhbmNlOwogICAgICBfcmVmID0gcHJvY2Vzcy5jb21wb25lbnQuaW5Qb3J0czsKICAgICAgZm9yIChuYW1lIGluIF9yZWYpIHsKICAgICAgICBwb3J0ID0gX3JlZltuYW1lXTsKICAgICAgICBwb3J0Lm5vZGUgPSBub2RlLmlkOwogICAgICAgIHBvcnQubmFtZSA9IG5hbWU7CiAgICAgIH0KICAgICAgX3JlZjEgPSBwcm9jZXNzLmNvbXBvbmVudC5vdXRQb3J0czsKICAgICAgZm9yIChuYW1lIGluIF9yZWYxKSB7CiAgICAgICAgcG9ydCA9IF9yZWYxW25hbWVdOwogICAgICAgIHBvcnQubm9kZSA9IG5vZGUuaWQ7CiAgICAgICAgcG9ydC5uYW1lID0gbmFtZTsKICAgICAgfQogICAgICBpZiAoaW5zdGFuY2UuaXNTdWJncmFwaCgpKSB7CiAgICAgICAgX3RoaXMuc3Vic2NyaWJlU3ViZ3JhcGgobm9kZS5pZCwgaW5zdGFuY2UpOwogICAgICB9CiAgICAgIF90aGlzLnByb2Nlc3Nlc1twcm9jZXNzLmlkXSA9IHByb2Nlc3M7CiAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgIHJldHVybiBjYWxsYmFjayhwcm9jZXNzKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUucmVtb3ZlTm9kZSA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIGlmICghdGhpcy5wcm9jZXNzZXNbbm9kZS5pZF0pIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5wcm9jZXNzZXNbbm9kZS5pZF0uY29tcG9uZW50LnNodXRkb3duKCk7CiAgICByZXR1cm4gZGVsZXRlIHRoaXMucHJvY2Vzc2VzW25vZGUuaWRdOwogIH07CgogIE5ldHdvcmsucHJvdG90eXBlLnJlbmFtZU5vZGUgPSBmdW5jdGlvbihvbGRJZCwgbmV3SWQpIHsKICAgIHZhciBuYW1lLCBwb3J0LCBwcm9jZXNzLCBfcmVmLCBfcmVmMTsKICAgIHByb2Nlc3MgPSB0aGlzLmdldE5vZGUob2xkSWQpOwogICAgaWYgKCFwcm9jZXNzKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHByb2Nlc3MuaWQgPSBuZXdJZDsKICAgIF9yZWYgPSBwcm9jZXNzLmNvbXBvbmVudC5pblBvcnRzOwogICAgZm9yIChuYW1lIGluIF9yZWYpIHsKICAgICAgcG9ydCA9IF9yZWZbbmFtZV07CiAgICAgIHBvcnQubm9kZSA9IG5ld0lkOwogICAgfQogICAgX3JlZjEgPSBwcm9jZXNzLmNvbXBvbmVudC5vdXRQb3J0czsKICAgIGZvciAobmFtZSBpbiBfcmVmMSkgewogICAgICBwb3J0ID0gX3JlZjFbbmFtZV07CiAgICAgIHBvcnQubm9kZSA9IG5ld0lkOwogICAgfQogICAgdGhpcy5wcm9jZXNzZXNbbmV3SWRdID0gcHJvY2VzczsKICAgIHJldHVybiBkZWxldGUgdGhpcy5wcm9jZXNzZXNbb2xkSWRdOwogIH07CgogIE5ldHdvcmsucHJvdG90eXBlLmdldE5vZGUgPSBmdW5jdGlvbihpZCkgewogICAgcmV0dXJuIHRoaXMucHJvY2Vzc2VzW2lkXTsKICB9OwoKICBOZXR3b3JrLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24oZG9uZSkgewogICAgdmFyIGVkZ2VzLCBpbml0aWFsaXplcnMsIG5vZGVzLCBzZXJpYWxpemUsCiAgICAgIF90aGlzID0gdGhpczsKICAgIGlmIChkb25lID09IG51bGwpIHsKICAgICAgZG9uZSA9IGZ1bmN0aW9uKCkge307CiAgICB9CiAgICBzZXJpYWxpemUgPSBmdW5jdGlvbihuZXh0LCBhZGQpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKHR5cGUpIHsKICAgICAgICByZXR1cm4gX3RoaXNbImFkZCIgKyB0eXBlXShhZGQsIGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIG5leHQodHlwZSk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9OwogICAgaW5pdGlhbGl6ZXJzID0gXy5yZWR1Y2VSaWdodCh0aGlzLmdyYXBoLmluaXRpYWxpemVycywgc2VyaWFsaXplLCBkb25lKTsKICAgIGVkZ2VzID0gXy5yZWR1Y2VSaWdodCh0aGlzLmdyYXBoLmVkZ2VzLCBzZXJpYWxpemUsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gaW5pdGlhbGl6ZXJzKCJJbml0aWFsIik7CiAgICB9KTsKICAgIG5vZGVzID0gXy5yZWR1Y2VSaWdodCh0aGlzLmdyYXBoLm5vZGVzLCBzZXJpYWxpemUsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gZWRnZXMoIkVkZ2UiKTsKICAgIH0pOwogICAgcmV0dXJuIG5vZGVzKCJOb2RlIik7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuY29ubmVjdFBvcnQgPSBmdW5jdGlvbihzb2NrZXQsIHByb2Nlc3MsIHBvcnQsIGluYm91bmQpIHsKICAgIGlmIChpbmJvdW5kKSB7CiAgICAgIHNvY2tldC50byA9IHsKICAgICAgICBwcm9jZXNzOiBwcm9jZXNzLAogICAgICAgIHBvcnQ6IHBvcnQKICAgICAgfTsKICAgICAgaWYgKCEocHJvY2Vzcy5jb21wb25lbnQuaW5Qb3J0cyAmJiBwcm9jZXNzLmNvbXBvbmVudC5pblBvcnRzW3BvcnRdKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiTm8gaW5wb3J0ICciICsgcG9ydCArICInIGRlZmluZWQgaW4gcHJvY2VzcyAiICsgcHJvY2Vzcy5pZCArICIgKCIgKyAoc29ja2V0LmdldElkKCkpICsgIikiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIHByb2Nlc3MuY29tcG9uZW50LmluUG9ydHNbcG9ydF0uYXR0YWNoKHNvY2tldCk7CiAgICB9CiAgICBzb2NrZXQuZnJvbSA9IHsKICAgICAgcHJvY2VzczogcHJvY2VzcywKICAgICAgcG9ydDogcG9ydAogICAgfTsKICAgIGlmICghKHByb2Nlc3MuY29tcG9uZW50Lm91dFBvcnRzICYmIHByb2Nlc3MuY29tcG9uZW50Lm91dFBvcnRzW3BvcnRdKSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIG91dHBvcnQgJyIgKyBwb3J0ICsgIicgZGVmaW5lZCBpbiBwcm9jZXNzICIgKyBwcm9jZXNzLmlkICsgIiAoIiArIChzb2NrZXQuZ2V0SWQoKSkgKyAiKSIpOwogICAgICByZXR1cm47CiAgICB9CiAgICByZXR1cm4gcHJvY2Vzcy5jb21wb25lbnQub3V0UG9ydHNbcG9ydF0uYXR0YWNoKHNvY2tldCk7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuc3Vic2NyaWJlU3ViZ3JhcGggPSBmdW5jdGlvbihub2RlTmFtZSwgcHJvY2VzcykgewogICAgdmFyIGVtaXRTdWIsCiAgICAgIF90aGlzID0gdGhpczsKICAgIGlmICghcHJvY2Vzcy5pc1JlYWR5KCkpIHsKICAgICAgcHJvY2Vzcy5vbmNlKCdyZWFkeScsIGZ1bmN0aW9uKCkgewogICAgICAgIF90aGlzLnN1YnNjcmliZVN1YmdyYXBoKG5vZGVOYW1lLCBwcm9jZXNzKTsKICAgICAgfSk7CiAgICB9CiAgICBpZiAoIXByb2Nlc3MubmV0d29yaykgewogICAgICByZXR1cm47CiAgICB9CiAgICBlbWl0U3ViID0gZnVuY3Rpb24odHlwZSwgZGF0YSkgewogICAgICBpZiAodHlwZSA9PT0gJ2Nvbm5lY3QnKSB7CiAgICAgICAgX3RoaXMuaW5jcmVhc2VDb25uZWN0aW9ucygpOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAnZGlzY29ubmVjdCcpIHsKICAgICAgICBfdGhpcy5kZWNyZWFzZUNvbm5lY3Rpb25zKCk7CiAgICAgIH0KICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgZGF0YSA9IHt9OwogICAgICB9CiAgICAgIGlmIChkYXRhLnN1YmdyYXBoKSB7CiAgICAgICAgZGF0YS5zdWJncmFwaCA9ICIiICsgbm9kZU5hbWUgKyAiOiIgKyBkYXRhLnN1YmdyYXBoOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGEuc3ViZ3JhcGggPSBub2RlTmFtZTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuZW1pdCh0eXBlLCBkYXRhKTsKICAgIH07CiAgICBwcm9jZXNzLm5ldHdvcmsub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBlbWl0U3ViKCdjb25uZWN0JywgZGF0YSk7CiAgICB9KTsKICAgIHByb2Nlc3MubmV0d29yay5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIGVtaXRTdWIoJ2JlZ2luZ3JvdXAnLCBkYXRhKTsKICAgIH0pOwogICAgcHJvY2Vzcy5uZXR3b3JrLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gZW1pdFN1YignZGF0YScsIGRhdGEpOwogICAgfSk7CiAgICBwcm9jZXNzLm5ldHdvcmsub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gZW1pdFN1YignZW5kZ3JvdXAnLCBkYXRhKTsKICAgIH0pOwogICAgcmV0dXJuIHByb2Nlc3MubmV0d29yay5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIGVtaXRTdWIoJ2Rpc2Nvbm5lY3QnLCBkYXRhKTsKICAgIH0pOwogIH07CgogIE5ldHdvcmsucHJvdG90eXBlLnN1YnNjcmliZVNvY2tldCA9IGZ1bmN0aW9uKHNvY2tldCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHNvY2tldC5vbignY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5pbmNyZWFzZUNvbm5lY3Rpb25zKCk7CiAgICAgIHJldHVybiBfdGhpcy5lbWl0KCdjb25uZWN0JywgewogICAgICAgIGlkOiBzb2NrZXQuZ2V0SWQoKSwKICAgICAgICBzb2NrZXQ6IHNvY2tldAogICAgICB9KTsKICAgIH0pOwogICAgc29ja2V0Lm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmVtaXQoJ2JlZ2luZ3JvdXAnLCB7CiAgICAgICAgaWQ6IHNvY2tldC5nZXRJZCgpLAogICAgICAgIHNvY2tldDogc29ja2V0LAogICAgICAgIGdyb3VwOiBncm91cAogICAgICB9KTsKICAgIH0pOwogICAgc29ja2V0Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZW1pdCgnZGF0YScsIHsKICAgICAgICBpZDogc29ja2V0LmdldElkKCksCiAgICAgICAgc29ja2V0OiBzb2NrZXQsCiAgICAgICAgZGF0YTogZGF0YQogICAgICB9KTsKICAgIH0pOwogICAgc29ja2V0Lm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5lbWl0KCdlbmRncm91cCcsIHsKICAgICAgICBpZDogc29ja2V0LmdldElkKCksCiAgICAgICAgc29ja2V0OiBzb2NrZXQsCiAgICAgICAgZ3JvdXA6IGdyb3VwCiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLmRlY3JlYXNlQ29ubmVjdGlvbnMoKTsKICAgICAgcmV0dXJuIF90aGlzLmVtaXQoJ2Rpc2Nvbm5lY3QnLCB7CiAgICAgICAgaWQ6IHNvY2tldC5nZXRJZCgpLAogICAgICAgIHNvY2tldDogc29ja2V0CiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuYWRkRWRnZSA9IGZ1bmN0aW9uKGVkZ2UsIGNhbGxiYWNrKSB7CiAgICB2YXIgZnJvbSwgc29ja2V0LCB0bywKICAgICAgX3RoaXMgPSB0aGlzOwogICAgc29ja2V0ID0gaW50ZXJuYWxTb2NrZXQuY3JlYXRlU29ja2V0KCk7CiAgICBmcm9tID0gdGhpcy5nZXROb2RlKGVkZ2UuZnJvbS5ub2RlKTsKICAgIGlmICghZnJvbSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIHByb2Nlc3MgZGVmaW5lZCBmb3Igb3V0Ym91bmQgbm9kZSAiICsgZWRnZS5mcm9tLm5vZGUpOwogICAgfQogICAgaWYgKCFmcm9tLmNvbXBvbmVudCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIGNvbXBvbmVudCBkZWZpbmVkIGZvciBvdXRib3VuZCBub2RlICIgKyBlZGdlLmZyb20ubm9kZSk7CiAgICB9CiAgICBpZiAoIWZyb20uY29tcG9uZW50LmlzUmVhZHkoKSkgewogICAgICBmcm9tLmNvbXBvbmVudC5vbmNlKCJyZWFkeSIsIGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBfdGhpcy5hZGRFZGdlKGVkZ2UsIGNhbGxiYWNrKTsKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRvID0gdGhpcy5nZXROb2RlKGVkZ2UudG8ubm9kZSk7CiAgICBpZiAoIXRvKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiTm8gcHJvY2VzcyBkZWZpbmVkIGZvciBpbmJvdW5kIG5vZGUgIiArIGVkZ2UudG8ubm9kZSk7CiAgICB9CiAgICBpZiAoIXRvLmNvbXBvbmVudCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIGNvbXBvbmVudCBkZWZpbmVkIGZvciBpbmJvdW5kIG5vZGUgIiArIGVkZ2UudG8ubm9kZSk7CiAgICB9CiAgICBpZiAoIXRvLmNvbXBvbmVudC5pc1JlYWR5KCkpIHsKICAgICAgdG8uY29tcG9uZW50Lm9uY2UoInJlYWR5IiwgZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmFkZEVkZ2UoZWRnZSwgY2FsbGJhY2spOwogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5jb25uZWN0UG9ydChzb2NrZXQsIHRvLCBlZGdlLnRvLnBvcnQsIHRydWUpOwogICAgdGhpcy5jb25uZWN0UG9ydChzb2NrZXQsIGZyb20sIGVkZ2UuZnJvbS5wb3J0LCBmYWxzZSk7CiAgICB0aGlzLnN1YnNjcmliZVNvY2tldChzb2NrZXQpOwogICAgdGhpcy5jb25uZWN0aW9ucy5wdXNoKHNvY2tldCk7CiAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgICB9CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUucmVtb3ZlRWRnZSA9IGZ1bmN0aW9uKGVkZ2UpIHsKICAgIHZhciBjb25uZWN0aW9uLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICBfcmVmID0gdGhpcy5jb25uZWN0aW9uczsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgY29ubmVjdGlvbiA9IF9yZWZbX2ldOwogICAgICBpZiAoIWNvbm5lY3Rpb24pIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoIShlZGdlLnRvLm5vZGUgPT09IGNvbm5lY3Rpb24udG8ucHJvY2Vzcy5pZCAmJiBlZGdlLnRvLnBvcnQgPT09IGNvbm5lY3Rpb24udG8ucG9ydCkpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBjb25uZWN0aW9uLnRvLnByb2Nlc3MuY29tcG9uZW50LmluUG9ydHNbY29ubmVjdGlvbi50by5wb3J0XS5kZXRhY2goY29ubmVjdGlvbik7CiAgICAgIGlmIChlZGdlLmZyb20ubm9kZSkgewogICAgICAgIGlmIChjb25uZWN0aW9uLmZyb20gJiYgZWRnZS5mcm9tLm5vZGUgPT09IGNvbm5lY3Rpb24uZnJvbS5wcm9jZXNzLmlkICYmIGVkZ2UuZnJvbS5wb3J0ID09PSBjb25uZWN0aW9uLmZyb20ucG9ydCkgewogICAgICAgICAgY29ubmVjdGlvbi5mcm9tLnByb2Nlc3MuY29tcG9uZW50Lm91dFBvcnRzW2Nvbm5lY3Rpb24uZnJvbS5wb3J0XS5kZXRhY2goY29ubmVjdGlvbik7CiAgICAgICAgfQogICAgICB9CiAgICAgIF9yZXN1bHRzLnB1c2godGhpcy5jb25uZWN0aW9ucy5zcGxpY2UodGhpcy5jb25uZWN0aW9ucy5pbmRleE9mKGNvbm5lY3Rpb24pLCAxKSk7CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHM7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuYWRkSW5pdGlhbCA9IGZ1bmN0aW9uKGluaXRpYWxpemVyLCBjYWxsYmFjaykgewogICAgdmFyIHNvY2tldCwgdG8sCiAgICAgIF90aGlzID0gdGhpczsKICAgIHNvY2tldCA9IGludGVybmFsU29ja2V0LmNyZWF0ZVNvY2tldCgpOwogICAgdGhpcy5zdWJzY3JpYmVTb2NrZXQoc29ja2V0KTsKICAgIHRvID0gdGhpcy5nZXROb2RlKGluaXRpYWxpemVyLnRvLm5vZGUpOwogICAgaWYgKCF0bykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIHByb2Nlc3MgZGVmaW5lZCBmb3IgaW5ib3VuZCBub2RlICIgKyBpbml0aWFsaXplci50by5ub2RlKTsKICAgIH0KICAgIGlmICghKHRvLmNvbXBvbmVudC5pc1JlYWR5KCkgfHwgdG8uY29tcG9uZW50LmluUG9ydHNbaW5pdGlhbGl6ZXIudG8ucG9ydF0pKSB7CiAgICAgIHRvLmNvbXBvbmVudC5zZXRNYXhMaXN0ZW5lcnMoMCk7CiAgICAgIHRvLmNvbXBvbmVudC5vbmNlKCJyZWFkeSIsIGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBfdGhpcy5hZGRJbml0aWFsKGluaXRpYWxpemVyLCBjYWxsYmFjayk7CiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICB0aGlzLmNvbm5lY3RQb3J0KHNvY2tldCwgdG8sIGluaXRpYWxpemVyLnRvLnBvcnQsIHRydWUpOwogICAgdGhpcy5jb25uZWN0aW9ucy5wdXNoKHNvY2tldCk7CiAgICB0aGlzLmluaXRpYWxzLnB1c2goewogICAgICBzb2NrZXQ6IHNvY2tldCwKICAgICAgZGF0YTogaW5pdGlhbGl6ZXIuZnJvbS5kYXRhCiAgICB9KTsKICAgIGlmIChjYWxsYmFjaykgewogICAgICByZXR1cm4gY2FsbGJhY2soKTsKICAgIH0KICB9OwoKICBOZXR3b3JrLnByb3RvdHlwZS5yZW1vdmVJbml0aWFsID0gZnVuY3Rpb24oaW5pdGlhbGl6ZXIpIHsKICAgIHZhciBjb25uZWN0aW9uLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICBfcmVmID0gdGhpcy5jb25uZWN0aW9uczsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgY29ubmVjdGlvbiA9IF9yZWZbX2ldOwogICAgICBpZiAoIWNvbm5lY3Rpb24pIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoIShpbml0aWFsaXplci50by5ub2RlID09PSBjb25uZWN0aW9uLnRvLnByb2Nlc3MuaWQgJiYgaW5pdGlhbGl6ZXIudG8ucG9ydCA9PT0gY29ubmVjdGlvbi50by5wb3J0KSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGNvbm5lY3Rpb24udG8ucHJvY2Vzcy5jb21wb25lbnQuaW5Qb3J0c1tjb25uZWN0aW9uLnRvLnBvcnRdLmRldGFjaChjb25uZWN0aW9uKTsKICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLmNvbm5lY3Rpb25zLnNwbGljZSh0aGlzLmNvbm5lY3Rpb25zLmluZGV4T2YoY29ubmVjdGlvbiksIDEpKTsKICAgIH0KICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICBOZXR3b3JrLnByb3RvdHlwZS5zZW5kSW5pdGlhbCA9IGZ1bmN0aW9uKGluaXRpYWwpIHsKICAgIGluaXRpYWwuc29ja2V0LmNvbm5lY3QoKTsKICAgIGluaXRpYWwuc29ja2V0LnNlbmQoaW5pdGlhbC5kYXRhKTsKICAgIHJldHVybiBpbml0aWFsLnNvY2tldC5kaXNjb25uZWN0KCk7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuc2VuZEluaXRpYWxzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgc2VuZCwKICAgICAgX3RoaXMgPSB0aGlzOwogICAgc2VuZCA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgaW5pdGlhbCwgX2ksIF9sZW4sIF9yZWY7CiAgICAgIF9yZWYgPSBfdGhpcy5pbml0aWFsczsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgaW5pdGlhbCA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLnNlbmRJbml0aWFsKGluaXRpYWwpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5pbml0aWFscyA9IFtdOwogICAgfTsKICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5leGVjUGF0aCAmJiBwcm9jZXNzLmV4ZWNQYXRoLmluZGV4T2YoJ25vZGUnKSAhPT0gLTEpIHsKICAgICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soc2VuZCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc2V0VGltZW91dChzZW5kLCAwKTsKICAgIH0KICB9OwoKICBOZXR3b3JrLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuc2VuZEluaXRpYWxzKCk7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbm5lY3Rpb24sIGlkLCBwcm9jZXNzLCBfaSwgX2xlbiwgX3JlZiwgX3JlZjEsIF9yZXN1bHRzOwogICAgX3JlZiA9IHRoaXMuY29ubmVjdGlvbnM7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgY29ubmVjdGlvbiA9IF9yZWZbX2ldOwogICAgICBpZiAoIWNvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGNvbm5lY3Rpb24uZGlzY29ubmVjdCgpOwogICAgfQogICAgX3JlZjEgPSB0aGlzLnByb2Nlc3NlczsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKGlkIGluIF9yZWYxKSB7CiAgICAgIHByb2Nlc3MgPSBfcmVmMVtpZF07CiAgICAgIF9yZXN1bHRzLnB1c2gocHJvY2Vzcy5jb21wb25lbnQuc2h1dGRvd24oKSk7CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHM7CiAgfTsKCiAgcmV0dXJuIE5ldHdvcms7Cgp9KShFdmVudEVtaXR0ZXIpOwoKZXhwb3J0cy5OZXR3b3JrID0gTmV0d29yazsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBHcmFwaCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgppZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZXhlY1BhdGggJiYgcHJvY2Vzcy5leGVjUGF0aC5pbmRleE9mKCdub2RlJykgIT09IC0xKSB7CiAgbm9mbG8gPSByZXF1aXJlKCIuLi8uLi9saWIvTm9GbG8iKTsKfSBlbHNlIHsKICBub2ZsbyA9IHJlcXVpcmUoJy4uL2xpYi9Ob0ZsbycpOwp9CgpHcmFwaCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR3JhcGgsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEdyYXBoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMubmV0d29yayA9IG51bGw7CiAgICB0aGlzLnJlYWR5ID0gdHJ1ZTsKICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlOwogICAgdGhpcy5iYXNlRGlyID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZ3JhcGg6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKSwKICAgICAgc3RhcnQ6IG5ldyBub2Zsby5Qb3J0KCdiYW5nJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0ge307CiAgICB0aGlzLmluUG9ydHMuZ3JhcGgub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXRHcmFwaChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnN0YXJ0Lm9uKCJkYXRhIiwgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLnN0YXJ0ZWQgPSB0cnVlOwogICAgICBpZiAoIV90aGlzLm5ldHdvcmspIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm5ldHdvcmsuY29ubmVjdChmdW5jdGlvbigpIHsKICAgICAgICB2YXIgbmFtZSwgbm90UmVhZHksIHByb2Nlc3MsIF9yZWY7CiAgICAgICAgX3RoaXMubmV0d29yay5zZW5kSW5pdGlhbHMoKTsKICAgICAgICBub3RSZWFkeSA9IGZhbHNlOwogICAgICAgIF9yZWYgPSBfdGhpcy5uZXR3b3JrLnByb2Nlc3NlczsKICAgICAgICBmb3IgKG5hbWUgaW4gX3JlZikgewogICAgICAgICAgcHJvY2VzcyA9IF9yZWZbbmFtZV07CiAgICAgICAgICBpZiAoIV90aGlzLmNoZWNrQ29tcG9uZW50KG5hbWUsIHByb2Nlc3MpKSB7CiAgICAgICAgICAgIG5vdFJlYWR5ID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFub3RSZWFkeSkgewogICAgICAgICAgcmV0dXJuIF90aGlzLnNldFRvUmVhZHkoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICBHcmFwaC5wcm90b3R5cGUuc2V0R3JhcGggPSBmdW5jdGlvbihncmFwaCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucmVhZHkgPSBmYWxzZTsKICAgIGlmICh0eXBlb2YgZ3JhcGggPT09ICdvYmplY3QnKSB7CiAgICAgIGlmICh0eXBlb2YgZ3JhcGguYWRkTm9kZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZU5ldHdvcmsoZ3JhcGgpOwogICAgICB9CiAgICAgIG5vZmxvLmdyYXBoLmxvYWRKU09OKGdyYXBoLCBmdW5jdGlvbihpbnN0YW5jZSkgewogICAgICAgIGluc3RhbmNlLmJhc2VEaXIgPSBfdGhpcy5iYXNlRGlyOwogICAgICAgIHJldHVybiBfdGhpcy5jcmVhdGVOZXR3b3JrKGluc3RhbmNlKTsKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChncmFwaC5zdWJzdHIoMCwgMSkgIT09ICIvIikgewogICAgICBncmFwaCA9ICIiICsgKHByb2Nlc3MuY3dkKCkpICsgIi8iICsgZ3JhcGg7CiAgICB9CiAgICByZXR1cm4gZ3JhcGggPSBub2Zsby5ncmFwaC5sb2FkRmlsZShncmFwaCwgZnVuY3Rpb24oaW5zdGFuY2UpIHsKICAgICAgaW5zdGFuY2UuYmFzZURpciA9IF90aGlzLmJhc2VEaXI7CiAgICAgIHJldHVybiBfdGhpcy5jcmVhdGVOZXR3b3JrKGluc3RhbmNlKTsKICAgIH0pOwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5jcmVhdGVOZXR3b3JrID0gZnVuY3Rpb24oZ3JhcGgpIHsKICAgIHZhciBfcmVmLAogICAgICBfdGhpcyA9IHRoaXM7CiAgICBpZiAoKChfcmVmID0gdGhpcy5pblBvcnRzLnN0YXJ0KSAhPSBudWxsID8gX3JlZi5pc0F0dGFjaGVkKCkgOiB2b2lkIDApICYmICF0aGlzLnN0YXJ0ZWQpIHsKICAgICAgbm9mbG8uY3JlYXRlTmV0d29yayhncmFwaCwgZnVuY3Rpb24obmV0d29yaykgewogICAgICAgIF90aGlzLm5ldHdvcmsgPSBuZXR3b3JrOwogICAgICAgIHJldHVybiBfdGhpcy5lbWl0KCduZXR3b3JrJywgX3RoaXMubmV0d29yayk7CiAgICAgIH0sIHRydWUpOwogICAgICByZXR1cm47CiAgICB9CiAgICByZXR1cm4gbm9mbG8uY3JlYXRlTmV0d29yayhncmFwaCwgZnVuY3Rpb24obmV0d29yaykgewogICAgICB2YXIgbmFtZSwgbm90UmVhZHksIHByb2Nlc3MsIF9yZWYxOwogICAgICBfdGhpcy5uZXR3b3JrID0gbmV0d29yazsKICAgICAgX3RoaXMuZW1pdCgnbmV0d29yaycsIF90aGlzLm5ldHdvcmspOwogICAgICBub3RSZWFkeSA9IGZhbHNlOwogICAgICBfcmVmMSA9IF90aGlzLm5ldHdvcmsucHJvY2Vzc2VzOwogICAgICBmb3IgKG5hbWUgaW4gX3JlZjEpIHsKICAgICAgICBwcm9jZXNzID0gX3JlZjFbbmFtZV07CiAgICAgICAgaWYgKCFfdGhpcy5jaGVja0NvbXBvbmVudChuYW1lLCBwcm9jZXNzKSkgewogICAgICAgICAgbm90UmVhZHkgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIW5vdFJlYWR5KSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnNldFRvUmVhZHkoKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLmNoZWNrQ29tcG9uZW50ID0gZnVuY3Rpb24obmFtZSwgcHJvY2VzcykgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIGlmICghcHJvY2Vzcy5jb21wb25lbnQuaXNSZWFkeSgpKSB7CiAgICAgIHByb2Nlc3MuY29tcG9uZW50Lm9uY2UoInJlYWR5IiwgZnVuY3Rpb24oKSB7CiAgICAgICAgX3RoaXMuY2hlY2tDb21wb25lbnQobmFtZSwgcHJvY2Vzcyk7CiAgICAgICAgcmV0dXJuIF90aGlzLnNldFRvUmVhZHkoKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHRoaXMuZmluZEVkZ2VQb3J0cyhuYW1lLCBwcm9jZXNzKTsKICAgIHJldHVybiB0cnVlOwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5wb3J0TmFtZSA9IGZ1bmN0aW9uKG5vZGVOYW1lLCBwb3J0TmFtZSkgewogICAgcmV0dXJuICIiICsgKG5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpICsgIi4iICsgcG9ydE5hbWU7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLmlzRXhwb3J0ZWQgPSBmdW5jdGlvbihwb3J0LCBub2RlTmFtZSwgcG9ydE5hbWUpIHsKICAgIHZhciBleHBvcnRlZCwgbmV3UG9ydCwgX2ksIF9sZW4sIF9yZWY7CiAgICBuZXdQb3J0ID0gdGhpcy5wb3J0TmFtZShub2RlTmFtZSwgcG9ydE5hbWUpOwogICAgaWYgKCFwb3J0LmNhbkF0dGFjaCgpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmICh0aGlzLm5ldHdvcmsuZ3JhcGguZXhwb3J0cy5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIG5ld1BvcnQ7CiAgICB9CiAgICBfcmVmID0gdGhpcy5uZXR3b3JrLmdyYXBoLmV4cG9ydHM7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgZXhwb3J0ZWQgPSBfcmVmW19pXTsKICAgICAgaWYgKGV4cG9ydGVkWyJwcml2YXRlIl0gPT09IG5ld1BvcnQpIHsKICAgICAgICByZXR1cm4gZXhwb3J0ZWRbInB1YmxpYyJdOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLnNldFRvUmVhZHkgPSBmdW5jdGlvbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZXhlY1BhdGggJiYgcHJvY2Vzcy5leGVjUGF0aC5pbmRleE9mKCdub2RlJykgIT09IC0xKSB7CiAgICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgIF90aGlzLnJlYWR5ID0gdHJ1ZTsKICAgICAgICByZXR1cm4gX3RoaXMuZW1pdCgncmVhZHknKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBfdGhpcy5yZWFkeSA9IHRydWU7CiAgICAgICAgcmV0dXJuIF90aGlzLmVtaXQoJ3JlYWR5Jyk7CiAgICAgIH0sIDApOwogICAgfQogIH07CgogIEdyYXBoLnByb3RvdHlwZS5maW5kRWRnZVBvcnRzID0gZnVuY3Rpb24obmFtZSwgcHJvY2VzcykgewogICAgdmFyIHBvcnQsIHBvcnROYW1lLCB0YXJnZXRQb3J0TmFtZSwgX3JlZiwgX3JlZjE7CiAgICBfcmVmID0gcHJvY2Vzcy5jb21wb25lbnQuaW5Qb3J0czsKICAgIGZvciAocG9ydE5hbWUgaW4gX3JlZikgewogICAgICBwb3J0ID0gX3JlZltwb3J0TmFtZV07CiAgICAgIHRhcmdldFBvcnROYW1lID0gdGhpcy5pc0V4cG9ydGVkKHBvcnQsIG5hbWUsIHBvcnROYW1lKTsKICAgICAgaWYgKHRhcmdldFBvcnROYW1lID09PSBmYWxzZSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIHRoaXMuaW5Qb3J0c1t0YXJnZXRQb3J0TmFtZV0gPSBwb3J0OwogICAgfQogICAgX3JlZjEgPSBwcm9jZXNzLmNvbXBvbmVudC5vdXRQb3J0czsKICAgIGZvciAocG9ydE5hbWUgaW4gX3JlZjEpIHsKICAgICAgcG9ydCA9IF9yZWYxW3BvcnROYW1lXTsKICAgICAgdGFyZ2V0UG9ydE5hbWUgPSB0aGlzLmlzRXhwb3J0ZWQocG9ydCwgbmFtZSwgcG9ydE5hbWUpOwogICAgICBpZiAodGFyZ2V0UG9ydE5hbWUgPT09IGZhbHNlKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgdGhpcy5vdXRQb3J0c1t0YXJnZXRQb3J0TmFtZV0gPSBwb3J0OwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLmlzUmVhZHkgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLnJlYWR5OwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5pc1N1YmdyYXBoID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKICBHcmFwaC5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5uZXR3b3JrKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiB0aGlzLm5ldHdvcmsuc3RvcCgpOwogIH07CgogIHJldHVybiBHcmFwaDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgR3JhcGg7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vaW5kZXguanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewovKgogKiBUaGlzIGZpbGUgY2FuIGJlIHVzZWQgZm9yIGdlbmVyYWwgbGlicmFyeSBmZWF0dXJlcyB0aGF0IGFyZSBleHBvc2VkIGFzIENvbW1vbkpTIG1vZHVsZXMKICogdGhhdCB0aGUgY29tcG9uZW50cyB0aGVuIHV0aWxpemUKICovCgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvLWludGVyYWN0aW9uIiwiZGVzY3JpcHRpb24iOiJVc2VyIGludGVyYWN0aW9uIGNvbXBvbmVudHMgZm9yIE5vRmxvIiwiYXV0aG9yIjoiSGVucmkgQmVyZ2l1cyA8aGVucmkuYmVyZ2l1c0Bpa2kuZmk+IiwicmVwbyI6Im5vZmxvL25vZmxvLWludGVyYWN0aW9uIiwidmVyc2lvbiI6IjAuMC4xIiwia2V5d29yZHMiOltdLCJkZXBlbmRlbmNpZXMiOnsibm9mbG8vbm9mbG8iOiIqIn0sInNjcmlwdHMiOlsiY29tcG9uZW50cy9MaXN0ZW5EcmFnLmNvZmZlZSIsImNvbXBvbmVudHMvTGlzdGVuSGFzaC5jb2ZmZWUiLCJjb21wb25lbnRzL0xpc3RlbktleWJvYXJkLmNvZmZlZSIsImNvbXBvbmVudHMvTGlzdGVuTW91c2UuY29mZmVlIiwiY29tcG9uZW50cy9MaXN0ZW5Qb2ludGVyLmNvZmZlZSIsImNvbXBvbmVudHMvTGlzdGVuU2Nyb2xsLmNvZmZlZSIsImNvbXBvbmVudHMvTGlzdGVuU3BlZWNoLmNvZmZlZSIsImNvbXBvbmVudHMvTGlzdGVuVG91Y2guY29mZmVlIiwiY29tcG9uZW50cy9TZXRIYXNoLmNvZmZlZSIsImNvbXBvbmVudHMvUmVhZENvb3JkaW5hdGVzLmNvZmZlZSIsImluZGV4LmpzIl0sImpzb24iOlsiY29tcG9uZW50Lmpzb24iXSwibm9mbG8iOnsiaWNvbiI6InVzZXIiLCJjb21wb25lbnRzIjp7Ikxpc3RlbkRyYWciOiJjb21wb25lbnRzL0xpc3RlbkRyYWcuY29mZmVlIiwiTGlzdGVuSGFzaCI6ImNvbXBvbmVudHMvTGlzdGVuSGFzaC5jb2ZmZWUiLCJMaXN0ZW5LZXlib2FyZCI6ImNvbXBvbmVudHMvTGlzdGVuS2V5Ym9hcmQuY29mZmVlIiwiTGlzdGVuTW91c2UiOiJjb21wb25lbnRzL0xpc3Rlbk1vdXNlLmNvZmZlZSIsIkxpc3RlblBvaW50ZXIiOiJjb21wb25lbnRzL0xpc3RlblBvaW50ZXIuY29mZmVlIiwiTGlzdGVuU2Nyb2xsIjoiY29tcG9uZW50cy9MaXN0ZW5TY3JvbGwuY29mZmVlIiwiTGlzdGVuU3BlZWNoIjoiY29tcG9uZW50cy9MaXN0ZW5TcGVlY2guY29mZmVlIiwiTGlzdGVuVG91Y2giOiJjb21wb25lbnRzL0xpc3RlblRvdWNoLmNvZmZlZSIsIlJlYWRDb29yZGluYXRlcyI6ImNvbXBvbmVudHMvUmVhZENvb3JkaW5hdGVzLmNvZmZlZSIsIlNldEhhc2giOiJjb21wb25lbnRzL1NldEhhc2guY29mZmVlIn19fScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5EcmFnLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIExpc3RlbkRyYWcsIG5vZmxvLAogIF9fYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpMaXN0ZW5EcmFnID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhMaXN0ZW5EcmFnLCBfc3VwZXIpOwoKICBMaXN0ZW5EcmFnLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdMaXN0ZW4gdG8gZHJhZyBldmVudHMgb24gYSBET00gZWxlbWVudCc7CgogIGZ1bmN0aW9uIExpc3RlbkRyYWcoKSB7CiAgICB0aGlzLmRyYWdlbmQgPSBfX2JpbmQodGhpcy5kcmFnZW5kLCB0aGlzKTsKICAgIHRoaXMuZHJhZ21vdmUgPSBfX2JpbmQodGhpcy5kcmFnbW92ZSwgdGhpcyk7CiAgICB0aGlzLmRyYWdzdGFydCA9IF9fYmluZCh0aGlzLmRyYWdzdGFydCwgdGhpcyk7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBzdGFydDogbmV3IG5vZmxvLkFycmF5UG9ydCgnb2JqZWN0JyksCiAgICAgIG1vdmV4OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdudW1iZXInKSwKICAgICAgbW92ZXk6IG5ldyBub2Zsby5BcnJheVBvcnQoJ251bWJlcicpLAogICAgICBlbmQ6IG5ldyBub2Zsby5BcnJheVBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmVsZW1lbnQub24oJ2RhdGEnLCBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIHJldHVybiBfdGhpcy5zdWJzY3JpYmUoZWxlbWVudCk7CiAgICB9KTsKICB9CgogIExpc3RlbkRyYWcucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnc3RhcnQsIGZhbHNlKTsKICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZycsIHRoaXMuZHJhZ21vdmUsIGZhbHNlKTsKICAgIHJldHVybiBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLmRyYWdlbmQsIGZhbHNlKTsKICB9OwoKICBMaXN0ZW5EcmFnLnByb3RvdHlwZS5kcmFnc3RhcnQgPSBmdW5jdGlvbihldmVudCkgewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgdGhpcy5vdXRQb3J0cy5zdGFydC5zZW5kKGV2ZW50KTsKICAgIHJldHVybiB0aGlzLm91dFBvcnRzLnN0YXJ0LmRpc2Nvbm5lY3QoKTsKICB9OwoKICBMaXN0ZW5EcmFnLnByb3RvdHlwZS5kcmFnbW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB0aGlzLm91dFBvcnRzLm1vdmV4LnNlbmQoZXZlbnQuY2xpZW50WCk7CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5tb3ZleS5zZW5kKGV2ZW50LmNsaWVudFkpOwogIH07CgogIExpc3RlbkRyYWcucHJvdG90eXBlLmRyYWdlbmQgPSBmdW5jdGlvbihldmVudCkgewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgaWYgKHRoaXMub3V0UG9ydHMubW92ZXguaXNDb25uZWN0ZWQoKSkgewogICAgICB0aGlzLm91dFBvcnRzLm1vdmV4LmRpc2Nvbm5lY3QoKTsKICAgIH0KICAgIGlmICh0aGlzLm91dFBvcnRzLm1vdmV5LmlzQ29ubmVjdGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5tb3ZleS5kaXNjb25uZWN0KCk7CiAgICB9CiAgICB0aGlzLm91dFBvcnRzLmVuZC5zZW5kKGV2ZW50KTsKICAgIHJldHVybiB0aGlzLm91dFBvcnRzLmVuZC5kaXNjb25uZWN0KCk7CiAgfTsKCiAgcmV0dXJuIExpc3RlbkRyYWc7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IExpc3RlbkRyYWc7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5IYXNoLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIExpc3Rlbkhhc2gsIG5vZmxvLAogIF9fYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpMaXN0ZW5IYXNoID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhMaXN0ZW5IYXNoLCBfc3VwZXIpOwoKICBMaXN0ZW5IYXNoLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdMaXN0ZW4gZm9yIGhhc2ggY2hhbmdlcyBpbiBicm93c2VyXCdzIFVSTCBiYXInOwoKICBmdW5jdGlvbiBMaXN0ZW5IYXNoKCkgewogICAgdGhpcy5oYXNoQ2hhbmdlID0gX19iaW5kKHRoaXMuaGFzaENoYW5nZSwgdGhpcyk7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBzdGFydDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKSwKICAgICAgc3RvcDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIGluaXRpYWw6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKSwKICAgICAgY2hhbmdlOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLmluUG9ydHMuc3RhcnQub24oJ2RhdGEnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLnN1YnNjcmliZSgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc3RvcC5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMudW5zdWJzY3JpYmUoKTsKICAgIH0pOwogIH0KCiAgTGlzdGVuSGFzaC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgaW5pdGlhbEhhc2g7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuaGFzaENoYW5nZSwgZmFsc2UpOwogICAgaWYgKHRoaXMub3V0UG9ydHMuaW5pdGlhbC5pc0F0dGFjaGVkKCkpIHsKICAgICAgaW5pdGlhbEhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHIoMSk7CiAgICAgIHRoaXMub3V0UG9ydHMuaW5pdGlhbC5zZW5kKGluaXRpYWxIYXNoKTsKICAgICAgcmV0dXJuIHRoaXMub3V0UG9ydHMuaW5pdGlhbC5kaXNjb25uZWN0KCk7CiAgICB9CiAgfTsKCiAgTGlzdGVuSGFzaC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbigpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5oYXNoQ2hhbmdlLCBmYWxzZSk7CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5jaGFuZ2UuZGlzY29ubmVjdCgpOwogIH07CgogIExpc3Rlbkhhc2gucHJvdG90eXBlLmhhc2hDaGFuZ2UgPSBmdW5jdGlvbihldmVudCkgewogICAgdmFyIG5ld0hhc2gsIG9sZEhhc2g7CiAgICBvbGRIYXNoID0gZXZlbnQub2xkVVJMLnNwbGl0KCcjJylbMV07CiAgICBuZXdIYXNoID0gZXZlbnQubmV3VVJMLnNwbGl0KCcjJylbMV07CiAgICBpZiAoIW5ld0hhc2gpIHsKICAgICAgbmV3SGFzaCA9ICcnOwogICAgfQogICAgaWYgKG9sZEhhc2gpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5jaGFuZ2UuYmVnaW5Hcm91cChvbGRIYXNoKTsKICAgIH0KICAgIHRoaXMub3V0UG9ydHMuY2hhbmdlLnNlbmQobmV3SGFzaCk7CiAgICBpZiAob2xkSGFzaCkgewogICAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5jaGFuZ2UuZW5kR3JvdXAob2xkSGFzaCk7CiAgICB9CiAgfTsKCiAgTGlzdGVuSGFzaC5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLnVuc3Vic2NyaWJlKCk7CiAgfTsKCiAgcmV0dXJuIExpc3Rlbkhhc2g7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IExpc3Rlbkhhc2g7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5LZXlib2FyZC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBMaXN0ZW5LZXlib2FyZCwgbm9mbG8sCiAgX19iaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkxpc3RlbktleWJvYXJkID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhMaXN0ZW5LZXlib2FyZCwgX3N1cGVyKTsKCiAgTGlzdGVuS2V5Ym9hcmQucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0xpc3RlbiBmb3Iga2V5IHByZXNzZXMgb24gYSBnaXZlbiBET00gZWxlbWVudCc7CgogIExpc3RlbktleWJvYXJkLnByb3RvdHlwZS5pY29uID0gJ2tleWJvYXJkJzsKCiAgZnVuY3Rpb24gTGlzdGVuS2V5Ym9hcmQoKSB7CiAgICB0aGlzLmtleXByZXNzID0gX19iaW5kKHRoaXMua2V5cHJlc3MsIHRoaXMpOwogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuZWxlbWVudHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBzdG9wOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBrZXlwcmVzczogbmV3IG5vZmxvLlBvcnQoJ2ludGVnZXInKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGVsZW1lbnQpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc3RvcC5vbignZGF0YScsIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgcmV0dXJuIF90aGlzLnVuc3Vic2NyaWJlKGVsZW1lbnQpOwogICAgfSk7CiAgfQoKICBMaXN0ZW5LZXlib2FyZC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIHRoaXMua2V5cHJlc3MsIGZhbHNlKTsKICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLnB1c2goZWxlbWVudCk7CiAgfTsKCiAgTGlzdGVuS2V5Ym9hcmQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgaWYgKC0xID09PSB0aGlzLmVsZW1lbnRzLmluZGV4T2YoZWxlbWVudCkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIHRoaXMua2V5cHJlc3MsIGZhbHNlKTsKICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLnNwbGljZSh0aGlzLmVsZW1lbnRzLmluZGV4T2YoZWxlbWVudCksIDEpOwogIH07CgogIExpc3RlbktleWJvYXJkLnByb3RvdHlwZS5rZXlwcmVzcyA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBpZiAoIXRoaXMub3V0UG9ydHMua2V5cHJlc3MuaXNBdHRhY2hlZCgpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMub3V0UG9ydHMua2V5cHJlc3Muc2VuZChldmVudC5rZXlDb2RlKTsKICAgIHJldHVybiB0aGlzLm91dFBvcnRzLmtleXByZXNzLmRpc2Nvbm5lY3QoKTsKICB9OwoKICBMaXN0ZW5LZXlib2FyZC5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbigpIHsKICAgIHZhciBlbGVtZW50LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICBfcmVmID0gdGhpcy5lbGVtZW50czsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgZWxlbWVudCA9IF9yZWZbX2ldOwogICAgICBfcmVzdWx0cy5wdXNoKHRoaXMudW5zdWJzY3JpYmUoZWxlbWVudCkpOwogICAgfQogICAgcmV0dXJuIF9yZXN1bHRzOwogIH07CgogIHJldHVybiBMaXN0ZW5LZXlib2FyZDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgTGlzdGVuS2V5Ym9hcmQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5Nb3VzZS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBMaXN0ZW5Nb3VzZSwgbm9mbG8sCiAgX19iaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkxpc3Rlbk1vdXNlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhMaXN0ZW5Nb3VzZSwgX3N1cGVyKTsKCiAgTGlzdGVuTW91c2UucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0xpc3RlbiB0byBtb3VzZSBldmVudHMgb24gYSBET00gZWxlbWVudCc7CgogIGZ1bmN0aW9uIExpc3Rlbk1vdXNlKCkgewogICAgdGhpcy5kYmxjbGljayA9IF9fYmluZCh0aGlzLmRibGNsaWNrLCB0aGlzKTsKICAgIHRoaXMuY2xpY2sgPSBfX2JpbmQodGhpcy5jbGljaywgdGhpcyk7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBjbGljazogbmV3IG5vZmxvLkFycmF5UG9ydCgnb2JqZWN0JyksCiAgICAgIGRibGNsaWNrOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGVsZW1lbnQpOwogICAgfSk7CiAgfQoKICBMaXN0ZW5Nb3VzZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2ssIGZhbHNlKTsKICAgIHJldHVybiBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgdGhpcy5kYmxjbGljaywgZmFsc2UpOwogIH07CgogIExpc3Rlbk1vdXNlLnByb3RvdHlwZS5jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBpZiAoIXRoaXMub3V0UG9ydHMuY2xpY2suc29ja2V0cy5sZW5ndGgpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgdGhpcy5vdXRQb3J0cy5jbGljay5zZW5kKGV2ZW50KTsKICAgIHJldHVybiB0aGlzLm91dFBvcnRzLmNsaWNrLmRpc2Nvbm5lY3QoKTsKICB9OwoKICBMaXN0ZW5Nb3VzZS5wcm90b3R5cGUuZGJsY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewogICAgaWYgKCF0aGlzLm91dFBvcnRzLmRibGNsaWNrLnNvY2tldHMubGVuZ3RoKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgIHRoaXMub3V0UG9ydHMuZGJsY2xpY2suc2VuZChldmVudCk7CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5kYmxjbGljay5kaXNjb25uZWN0KCk7CiAgfTsKCiAgcmV0dXJuIExpc3Rlbk1vdXNlOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBMaXN0ZW5Nb3VzZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblBvaW50ZXIuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgTGlzdGVuUG9pbnRlciwgbm9mbG8sCiAgX19iaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkxpc3RlblBvaW50ZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKExpc3RlblBvaW50ZXIsIF9zdXBlcik7CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0xpc3RlbiB0byBwb2ludGVyIGV2ZW50cyBvbiBhIERPTSBlbGVtZW50JzsKCiAgZnVuY3Rpb24gTGlzdGVuUG9pbnRlcigpIHsKICAgIHRoaXMucG9pbnRlckxlYXZlID0gX19iaW5kKHRoaXMucG9pbnRlckxlYXZlLCB0aGlzKTsKICAgIHRoaXMucG9pbnRlckVudGVyID0gX19iaW5kKHRoaXMucG9pbnRlckVudGVyLCB0aGlzKTsKICAgIHRoaXMucG9pbnRlck91dCA9IF9fYmluZCh0aGlzLnBvaW50ZXJPdXQsIHRoaXMpOwogICAgdGhpcy5wb2ludGVyT3ZlciA9IF9fYmluZCh0aGlzLnBvaW50ZXJPdmVyLCB0aGlzKTsKICAgIHRoaXMucG9pbnRlck1vdmUgPSBfX2JpbmQodGhpcy5wb2ludGVyTW92ZSwgdGhpcyk7CiAgICB0aGlzLnBvaW50ZXJDYW5jZWwgPSBfX2JpbmQodGhpcy5wb2ludGVyQ2FuY2VsLCB0aGlzKTsKICAgIHRoaXMucG9pbnRlclVwID0gX19iaW5kKHRoaXMucG9pbnRlclVwLCB0aGlzKTsKICAgIHRoaXMucG9pbnRlckRvd24gPSBfX2JpbmQodGhpcy5wb2ludGVyRG93biwgdGhpcyk7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5hY3Rpb24gPSAnbm9uZSc7CiAgICB0aGlzLmNhcHR1cmUgPSBmYWxzZTsKICAgIHRoaXMucHJvcGFnYXRlID0gZmFsc2U7CiAgICB0aGlzLmVsZW1lbnRzID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIGVsZW1lbnQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgYWN0aW9uOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJyksCiAgICAgIGNhcHR1cmU6IG5ldyBub2Zsby5Qb3J0KCdib29sZWFuJyksCiAgICAgIHByb3BhZ2F0ZTogbmV3IG5vZmxvLlBvcnQoJ2Jvb2xlYW4nKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIGRvd246IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgdXA6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgY2FuY2VsOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIG1vdmU6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgb3ZlcjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgZW50ZXI6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgbGVhdmU6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGVsZW1lbnQpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuYWN0aW9uLm9uKCdkYXRhJywgZnVuY3Rpb24oYWN0aW9uKSB7CiAgICAgIF90aGlzLmFjdGlvbiA9IGFjdGlvbjsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmNhcHR1cmUub24oJ2RhdGEnLCBmdW5jdGlvbihjYXB0dXJlKSB7CiAgICAgIF90aGlzLmNhcHR1cmUgPSBjYXB0dXJlOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucHJvcGFnYXRlLm9uKCdkYXRhJywgZnVuY3Rpb24ocHJvcGFnYXRlKSB7CiAgICAgIF90aGlzLnByb3BhZ2F0ZSA9IHByb3BhZ2F0ZTsKICAgIH0pOwogIH0KCiAgTGlzdGVuUG9pbnRlci5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgaWYgKGVsZW1lbnQuc2V0QXR0cmlidXRlKSB7CiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0b3VjaC1hY3Rpb24nLCB0aGlzLmFjdGlvbik7CiAgICB9CiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgdGhpcy5wb2ludGVyRG93biwgdGhpcy5jYXB0dXJlKTsKICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgdGhpcy5wb2ludGVyVXAsIHRoaXMuY2FwdHVyZSk7CiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJjYW5jZWwnLCB0aGlzLnBvaW50ZXJDYW5jZWwsIHRoaXMuY2FwdHVyZSk7CiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgdGhpcy5wb2ludGVyTW92ZSwgdGhpcy5jYXB0dXJlKTsKICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm92ZXInLCB0aGlzLnBvaW50ZXJPdmVyLCB0aGlzLmNhcHR1cmUpOwogICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyb3V0JywgdGhpcy5wb2ludGVyT3V0LCB0aGlzLmNhcHR1cmUpOwogICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZW50ZXInLCB0aGlzLnBvaW50ZXJFbnRlciwgdGhpcy5jYXB0dXJlKTsKICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxlYXZlJywgdGhpcy5wb2ludGVyTGVhdmUsIHRoaXMuY2FwdHVyZSk7CiAgICByZXR1cm4gdGhpcy5lbGVtZW50cy5wdXNoKGVsZW1lbnQpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgdmFyIG5hbWUsIHBvcnQsIF9yZWYsIF9yZXN1bHRzOwogICAgaWYgKGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKSB7CiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCd0b3VjaC1hY3Rpb24nKTsKICAgIH0KICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCB0aGlzLnBvaW50ZXJEb3duLCB0aGlzLmNhcHR1cmUpOwogICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCB0aGlzLnBvaW50ZXJVcCwgdGhpcy5jYXB0dXJlKTsKICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmNhbmNlbCcsIHRoaXMucG9pbnRlckNhbmNlbCwgdGhpcy5jYXB0dXJlKTsKICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCB0aGlzLnBvaW50ZXJNb3ZlLCB0aGlzLmNhcHR1cmUpOwogICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVyb3ZlcicsIHRoaXMucG9pbnRlck92ZXIsIHRoaXMuY2FwdHVyZSk7CiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJvdXQnLCB0aGlzLnBvaW50ZXJPdXQsIHRoaXMuY2FwdHVyZSk7CiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJlbnRlcicsIHRoaXMucG9pbnRlckVudGVyLCB0aGlzLmNhcHR1cmUpOwogICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybGVhdmUnLCB0aGlzLnBvaW50ZXJMZWF2ZSwgdGhpcy5jYXB0dXJlKTsKICAgIF9yZWYgPSB0aGlzLm91dFBvcnRzOwogICAgX3Jlc3VsdHMgPSBbXTsKICAgIGZvciAobmFtZSBpbiBfcmVmKSB7CiAgICAgIHBvcnQgPSBfcmVmW25hbWVdOwogICAgICBpZiAoIXBvcnQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgX3Jlc3VsdHMucHVzaChwb3J0LmRpc2Nvbm5lY3QoKSk7CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHM7CiAgfTsKCiAgTGlzdGVuUG9pbnRlci5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbigpIHsKICAgIHZhciBlbGVtZW50LCBfaSwgX2xlbiwgX3JlZjsKICAgIF9yZWYgPSB0aGlzLmVsZW1lbnRzOwogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgIGVsZW1lbnQgPSBfcmVmW19pXTsKICAgICAgdGhpcy51bnN1YnNjcmliZShlbGVtZW50KTsKICAgIH0KICAgIHJldHVybiB0aGlzLmVsZW1lbnRzID0gW107CiAgfTsKCiAgTGlzdGVuUG9pbnRlci5wcm90b3R5cGUucG9pbnRlckRvd24gPSBmdW5jdGlvbihldmVudCkgewogICAgcmV0dXJuIHRoaXMuaGFuZGxlKGV2ZW50LCAnZG93bicpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLnBvaW50ZXJVcCA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICByZXR1cm4gdGhpcy5oYW5kbGUoZXZlbnQsICd1cCcpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLnBvaW50ZXJDYW5jZWwgPSBmdW5jdGlvbihldmVudCkgewogICAgcmV0dXJuIHRoaXMuaGFuZGxlKGV2ZW50LCAnY2FuY2VsJyk7CiAgfTsKCiAgTGlzdGVuUG9pbnRlci5wcm90b3R5cGUucG9pbnRlck1vdmUgPSBmdW5jdGlvbihldmVudCkgewogICAgcmV0dXJuIHRoaXMuaGFuZGxlKGV2ZW50LCAnbW92ZScpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLnBvaW50ZXJPdmVyID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgIHJldHVybiB0aGlzLmhhbmRsZShldmVudCwgJ292ZXInKTsKICB9OwoKICBMaXN0ZW5Qb2ludGVyLnByb3RvdHlwZS5wb2ludGVyT3V0ID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgIHJldHVybiB0aGlzLmhhbmRsZShldmVudCwgJ291dCcpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLnBvaW50ZXJFbnRlciA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICByZXR1cm4gdGhpcy5oYW5kbGUoZXZlbnQsICdlbnRlcicpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLnBvaW50ZXJMZWF2ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICByZXR1cm4gdGhpcy5oYW5kbGUoZXZlbnQsICdsZWF2ZScpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLmhhbmRsZSA9IGZ1bmN0aW9uKGV2ZW50LCB0eXBlKSB7CiAgICB2YXIgbmFtZSwgcG9ydCwgX3JlZiwgX3Jlc3VsdHM7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgaWYgKCF0aGlzLnByb3BhZ2F0ZSkgewogICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0KICAgIGlmICghdGhpcy5vdXRQb3J0c1t0eXBlXS5pc0F0dGFjaGVkKCkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5vdXRQb3J0c1t0eXBlXS5iZWdpbkdyb3VwKGV2ZW50LnBvaW50ZXJJZCk7CiAgICB0aGlzLm91dFBvcnRzW3R5cGVdLnNlbmQoZXZlbnQpOwogICAgdGhpcy5vdXRQb3J0c1t0eXBlXS5lbmRHcm91cCgpOwogICAgaWYgKHR5cGUgPT09ICd1cCcgfHwgdHlwZSA9PT0gJ2NhbmNlbCcgfHwgdHlwZSA9PT0gJ2xlYXZlJykgewogICAgICBfcmVmID0gdGhpcy5vdXRQb3J0czsKICAgICAgX3Jlc3VsdHMgPSBbXTsKICAgICAgZm9yIChuYW1lIGluIF9yZWYpIHsKICAgICAgICBwb3J0ID0gX3JlZltuYW1lXTsKICAgICAgICBpZiAoIXBvcnQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgX3Jlc3VsdHMucHVzaChwb3J0LmRpc2Nvbm5lY3QoKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF9yZXN1bHRzOwogICAgfQogIH07CgogIHJldHVybiBMaXN0ZW5Qb2ludGVyOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBMaXN0ZW5Qb2ludGVyOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuU2Nyb2xsLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIExpc3RlblNjcm9sbCwgbm9mbG8sCiAgX19iaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkxpc3RlblNjcm9sbCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoTGlzdGVuU2Nyb2xsLCBfc3VwZXIpOwoKICBMaXN0ZW5TY3JvbGwucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0xpc3RlbiB0byBzY3JvbGwgZXZlbnRzIG9uIHRoZSBicm93c2VyIHdpbmRvdyc7CgogIGZ1bmN0aW9uIExpc3RlblNjcm9sbCgpIHsKICAgIHRoaXMuc2Nyb2xsID0gX19iaW5kKHRoaXMuc2Nyb2xsLCB0aGlzKTsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIHN0YXJ0OiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpLAogICAgICBzdG9wOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgdG9wOiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyksCiAgICAgIGJvdHRvbTogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpLAogICAgICBsZWZ0OiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyksCiAgICAgIHJpZ2h0OiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJykKICAgIH07CiAgICB0aGlzLmluUG9ydHMuc3RhcnQub24oJ2RhdGEnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLnN1YnNjcmliZSgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc3RvcC5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMudW5zdWJzY3JpYmUoKTsKICAgIH0pOwogIH0KCiAgTGlzdGVuU2Nyb2xsLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGwsIGZhbHNlKTsKICB9OwoKICBMaXN0ZW5TY3JvbGwucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVucignc2Nyb2xsJywgdGhpcy5zY3JvbGwsIGZhbHNlKTsKICB9OwoKICBMaXN0ZW5TY3JvbGwucHJvdG90eXBlLnNjcm9sbCA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICB2YXIgYm90dG9tLCBsZWZ0LCByaWdodCwgdG9wOwogICAgdG9wID0gd2luZG93LnNjcm9sbFk7CiAgICBsZWZ0ID0gd2luZG93LnNjcm9sbFg7CiAgICBpZiAodGhpcy5vdXRQb3J0cy50b3AuaXNBdHRhY2hlZCgpKSB7CiAgICAgIHRoaXMub3V0UG9ydHMudG9wLnNlbmQodG9wKTsKICAgICAgdGhpcy5vdXRQb3J0cy50b3AuZGlzY29ubmVjdCgpOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMuYm90dG9tLmlzQXR0YWNoZWQoKSkgewogICAgICBib3R0b20gPSB0b3AgKyB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICAgIHRoaXMub3V0UG9ydHMuYm90dG9tLnNlbmQoYm90dG9tKTsKICAgICAgdGhpcy5vdXRQb3J0cy5ib3R0b20uZGlzY29ubmVjdCgpOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMubGVmdC5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5sZWZ0LnNlbmQobGVmdCk7CiAgICAgIHRoaXMub3V0UG9ydHMubGVmdC5kaXNjb25uZWN0KCk7CiAgICB9CiAgICBpZiAodGhpcy5vdXRQb3J0cy5yaWdodC5pc0F0dGFjaGVkKCkpIHsKICAgICAgcmlnaHQgPSBsZWZ0ICsgd2luZG93LmlubmVyV2lkdGg7CiAgICAgIHRoaXMub3V0UG9ydHMucmlnaHQuc2VuZChyaWdodCk7CiAgICAgIHJldHVybiB0aGlzLm91dFBvcnRzLnJpZ2h0LmRpc2Nvbm5lY3QoKTsKICAgIH0KICB9OwoKICBMaXN0ZW5TY3JvbGwucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy51bnN1YnNjcmliZSgpOwogIH07CgogIHJldHVybiBMaXN0ZW5TY3JvbGw7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IExpc3RlblNjcm9sbDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNwZWVjaC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBMaXN0ZW5TcGVlY2gsIG5vZmxvLAogIF9fYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpMaXN0ZW5TcGVlY2ggPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKExpc3RlblNwZWVjaCwgX3N1cGVyKTsKCiAgTGlzdGVuU3BlZWNoLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdMaXN0ZW4gZm9yIHVzZXJcJ3MgbWljcm9waG9uZSBhbmQgcmVjb2duaXplIHBocmFzZXMnOwoKICBmdW5jdGlvbiBMaXN0ZW5TcGVlY2goKSB7CiAgICB0aGlzLmhhbmRsZUVycm9yID0gX19iaW5kKHRoaXMuaGFuZGxlRXJyb3IsIHRoaXMpOwogICAgdGhpcy5oYW5kbGVSZXN1bHQgPSBfX2JpbmQodGhpcy5oYW5kbGVSZXN1bHQsIHRoaXMpOwogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucmVjb2duaXRpb24gPSBmYWxzZTsKICAgIHRoaXMuc2VudCA9IFtdOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBzdGFydDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKSwKICAgICAgc3RvcDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIHJlc3VsdDogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpLAogICAgICBlcnJvcjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLnN0YXJ0Lm9uKCdkYXRhJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5zdGFydExpc3RlbmluZygpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc3RvcC5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuc3RvcExpc3RlbmluZygpOwogICAgfSk7CiAgfQoKICBMaXN0ZW5TcGVlY2gucHJvdG90eXBlLnN0YXJ0TGlzdGVuaW5nID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoIXdpbmRvdy53ZWJraXRTcGVlY2hSZWNvZ25pdGlvbikgewogICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcignU3BlZWNoIHJlY29nbml0aW9uIHN1cHBvcnQgbm90IGF2YWlsYWJsZScpKTsKICAgIH0KICAgIHRoaXMucmVjb2duaXRpb24gPSBuZXcgd2luZG93LndlYmtpdFNwZWVjaFJlY29nbml0aW9uOwogICAgdGhpcy5yZWNvZ25pdGlvbi5jb250aW51b3VzID0gdHJ1ZTsKICAgIHRoaXMucmVjb2duaXRpb24uc3RhcnQoKTsKICAgIHRoaXMub3V0UG9ydHMucmVzdWx0LmNvbm5lY3QoKTsKICAgIHRoaXMucmVjb2duaXRpb24ub25yZXN1bHQgPSB0aGlzLmhhbmRsZVJlc3VsdDsKICAgIHJldHVybiB0aGlzLnJlY29nbml0aW9uLm9uZXJyb3IgPSB0aGlzLmhhbmRsZUVycm9yOwogIH07CgogIExpc3RlblNwZWVjaC5wcm90b3R5cGUuaGFuZGxlUmVzdWx0ID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgIHZhciBpZHgsIHJlc3VsdCwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzOwogICAgX3JlZiA9IGV2ZW50LnJlc3VsdHM7CiAgICBfcmVzdWx0cyA9IFtdOwogICAgZm9yIChpZHggPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpZHggPSArK19pKSB7CiAgICAgIHJlc3VsdCA9IF9yZWZbaWR4XTsKICAgICAgaWYgKCFyZXN1bHQuaXNGaW5hbCkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmICh0aGlzLnNlbnQuaW5kZXhPZihpZHgpICE9PSAtMSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIHRoaXMub3V0UG9ydHMucmVzdWx0LnNlbmQocmVzdWx0WzBdLnRyYW5zY3JpcHQpOwogICAgICBfcmVzdWx0cy5wdXNoKHRoaXMuc2VudC5wdXNoKGlkeCkpOwogICAgfQogICAgcmV0dXJuIF9yZXN1bHRzOwogIH07CgogIExpc3RlblNwZWVjaC5wcm90b3R5cGUuaGFuZGxlRXJyb3IgPSBmdW5jdGlvbihlcnJvcikgewogICAgaWYgKHRoaXMub3V0UG9ydHMuZXJyb3IuaXNBdHRhY2hlZCgpKSB7CiAgICAgIHRoaXMub3V0UG9ydHMuZXJyb3Iuc2VuZChlcnJvcik7CiAgICAgIHRoaXMub3V0UG9ydHMuZXJyb3IuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm47CiAgICB9CiAgICB0aHJvdyBlcnJvcjsKICB9OwoKICBMaXN0ZW5TcGVlY2gucHJvdG90eXBlLnN0b3BMaXN0ZW5pbmcgPSBmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5yZWNvZ25pdGlvbikgewogICAgICByZXR1cm47CiAgICB9CiAgICB0aGlzLm91dFBvcnRzLnJlc3VsdC5kaXNjb25uZWN0KCk7CiAgICB0aGlzLnJlY29nbml0aW9uLnN0b3AoKTsKICAgIHRoaXMucmVjb2duaXRpb24gPSBudWxsOwogICAgcmV0dXJuIHRoaXMuc2VudCA9IFtdOwogIH07CgogIExpc3RlblNwZWVjaC5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLnN0b3BMaXN0ZW5pbmcoKTsKICB9OwoKICByZXR1cm4gTGlzdGVuU3BlZWNoOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBMaXN0ZW5TcGVlY2g7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5Ub3VjaC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBMaXN0ZW5Ub3VjaCwgbm9mbG8sCiAgX19iaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkxpc3RlblRvdWNoID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhMaXN0ZW5Ub3VjaCwgX3N1cGVyKTsKCiAgTGlzdGVuVG91Y2gucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0xpc3RlbiB0byB0b3VjaCBldmVudHMgb24gYSBET00gZWxlbWVudCc7CgogIGZ1bmN0aW9uIExpc3RlblRvdWNoKCkgewogICAgdGhpcy50b3VjaGVuZCA9IF9fYmluZCh0aGlzLnRvdWNoZW5kLCB0aGlzKTsKICAgIHRoaXMudG91Y2htb3ZlID0gX19iaW5kKHRoaXMudG91Y2htb3ZlLCB0aGlzKTsKICAgIHRoaXMudG91Y2hzdGFydCA9IF9fYmluZCh0aGlzLnRvdWNoc3RhcnQsIHRoaXMpOwogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgc3RhcnQ6IG5ldyBub2Zsby5BcnJheVBvcnQoJ29iamVjdCcpLAogICAgICBtb3ZleDogbmV3IG5vZmxvLkFycmF5UG9ydCgnbnVtYmVyJyksCiAgICAgIG1vdmV5OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdudW1iZXInKSwKICAgICAgZW5kOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGVsZW1lbnQpOwogICAgfSk7CiAgfQoKICBMaXN0ZW5Ub3VjaC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy50b3VjaHN0YXJ0LCBmYWxzZSk7CiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMudG91Y2htb3ZlLCBmYWxzZSk7CiAgICByZXR1cm4gZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMudG91Y2hlbmQsIGZhbHNlKTsKICB9OwoKICBMaXN0ZW5Ub3VjaC5wcm90b3R5cGUudG91Y2hzdGFydCA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICB2YXIgaWR4LCB0b3VjaCwgX2ksIF9sZW4sIF9yZWY7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBpZiAoIWV2ZW50LmNoYW5nZWRUb3VjaGVzKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICghZXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIF9yZWYgPSBldmVudC5jaGFuZ2VkVG91Y2hlczsKICAgIGZvciAoaWR4ID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgaWR4ID0gKytfaSkgewogICAgICB0b3VjaCA9IF9yZWZbaWR4XTsKICAgICAgdGhpcy5vdXRQb3J0cy5zdGFydC5iZWdpbkdyb3VwKGlkeCk7CiAgICAgIHRoaXMub3V0UG9ydHMuc3RhcnQuc2VuZChldmVudCk7CiAgICAgIHRoaXMub3V0UG9ydHMuc3RhcnQuZW5kR3JvdXAoKTsKICAgIH0KICAgIHJldHVybiB0aGlzLm91dFBvcnRzLnN0YXJ0LmRpc2Nvbm5lY3QoKTsKICB9OwoKICBMaXN0ZW5Ub3VjaC5wcm90b3R5cGUudG91Y2htb3ZlID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgIHZhciBpZHgsIHRvdWNoLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBpZiAoIWV2ZW50LmNoYW5nZWRUb3VjaGVzKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICghZXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIF9yZWYgPSBldmVudC5jaGFuZ2VkVG91Y2hlczsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKGlkeCA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGlkeCA9ICsrX2kpIHsKICAgICAgdG91Y2ggPSBfcmVmW2lkeF07CiAgICAgIHRoaXMub3V0UG9ydHMubW92ZXguYmVnaW5Hcm91cChpZHgpOwogICAgICB0aGlzLm91dFBvcnRzLm1vdmV4LnNlbmQodG91Y2gucGFnZVgpOwogICAgICB0aGlzLm91dFBvcnRzLm1vdmV4LmVuZEdyb3VwKCk7CiAgICAgIHRoaXMub3V0UG9ydHMubW92ZXkuYmVnaW5Hcm91cChpZHgpOwogICAgICB0aGlzLm91dFBvcnRzLm1vdmV5LnNlbmQodG91Y2gucGFnZVkpOwogICAgICBfcmVzdWx0cy5wdXNoKHRoaXMub3V0UG9ydHMubW92ZXkuZW5kR3JvdXAoKSk7CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHM7CiAgfTsKCiAgTGlzdGVuVG91Y2gucHJvdG90eXBlLnRvdWNoZW5kID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgIHZhciBpZHgsIHRvdWNoLCBfaSwgX2xlbiwgX3JlZjsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgIGlmICghZXZlbnQuY2hhbmdlZFRvdWNoZXMpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCFldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMubW92ZXguaXNDb25uZWN0ZWQoKSkgewogICAgICB0aGlzLm91dFBvcnRzLm1vdmV4LmRpc2Nvbm5lY3QoKTsKICAgIH0KICAgIGlmICh0aGlzLm91dFBvcnRzLm1vdmV5LmlzQ29ubmVjdGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5tb3ZleS5kaXNjb25uZWN0KCk7CiAgICB9CiAgICBfcmVmID0gZXZlbnQuY2hhbmdlZFRvdWNoZXM7CiAgICBmb3IgKGlkeCA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGlkeCA9ICsrX2kpIHsKICAgICAgdG91Y2ggPSBfcmVmW2lkeF07CiAgICAgIHRoaXMub3V0UG9ydHMuZW5kLmJlZ2luR3JvdXAoaWR4KTsKICAgICAgdGhpcy5vdXRQb3J0cy5lbmQuc2VuZChldmVudCk7CiAgICAgIHRoaXMub3V0UG9ydHMuZW5kLmVuZEdyb3VwKCk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5lbmQuZGlzY29ubmVjdCgpOwogIH07CgogIHJldHVybiBMaXN0ZW5Ub3VjaDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgTGlzdGVuVG91Y2g7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9TZXRIYXNoLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFNldEhhc2gsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKU2V0SGFzaCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoU2V0SGFzaCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gU2V0SGFzaCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIGhhc2g6IG5ldyBub2Zsby5BcnJheVBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLmluUG9ydHMuaGFzaC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAiIyIgKyBkYXRhOwogICAgICBpZiAoX3RoaXMub3V0UG9ydHMub3V0LmlzQXR0YWNoZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuaGFzaC5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoX3RoaXMub3V0UG9ydHMub3V0LmlzQXR0YWNoZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgICB9CiAgICB9KTsKICB9CgogIHJldHVybiBTZXRIYXNoOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBTZXRIYXNoOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvUmVhZENvb3JkaW5hdGVzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlYWRDb29yZGluYXRlcywgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpSZWFkQ29vcmRpbmF0ZXMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFJlYWRDb29yZGluYXRlcywgX3N1cGVyKTsKCiAgUmVhZENvb3JkaW5hdGVzLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdSZWFkIHRoZSBjb29yZGluYXRlcyBmcm9tIGEgRE9NIGV2ZW50JzsKCiAgZnVuY3Rpb24gUmVhZENvb3JkaW5hdGVzKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZXZlbnQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIHNjcmVlbjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBjbGllbnQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgcGFnZTogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmV2ZW50Lm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnNjcmVlbi5pc0F0dGFjaGVkKCkpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5zY3JlZW4uYmVnaW5Hcm91cChncm91cCk7CiAgICAgIH0KICAgICAgaWYgKF90aGlzLm91dFBvcnRzLmNsaWVudC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5jbGllbnQuYmVnaW5Hcm91cChncm91cCk7CiAgICAgIH0KICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnBhZ2UuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLnBhZ2UuYmVnaW5Hcm91cChncm91cCk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmV2ZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucmVhZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmV2ZW50Lm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoX3RoaXMub3V0UG9ydHMuc2NyZWVuLmlzQXR0YWNoZWQoKSkgewogICAgICAgIF90aGlzLm91dFBvcnRzLnNjcmVlbi5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5jbGllbnQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMuY2xpZW50LmVuZEdyb3VwKCk7CiAgICAgIH0KICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnBhZ2UuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLnBhZ2UuZW5kR3JvdXAoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZXZlbnQub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnNjcmVlbi5pc0F0dGFjaGVkKCkpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5zY3JlZW4uZGlzY29ubmVjdCgpOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5jbGllbnQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMuY2xpZW50LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgICBpZiAoX3RoaXMub3V0UG9ydHMucGFnZS5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMucGFnZS5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgUmVhZENvb3JkaW5hdGVzLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgIGlmICghZXZlbnQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMuc2NyZWVuLmlzQXR0YWNoZWQoKSAmJiBldmVudC5zY3JlZW5YICE9PSB2b2lkIDApIHsKICAgICAgdGhpcy5vdXRQb3J0cy5zY3JlZW4uc2VuZCh7CiAgICAgICAgeDogZXZlbnQuc2NyZWVuWCwKICAgICAgICB5OiBldmVudC5zY3JlZW5ZCiAgICAgIH0pOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMuY2xpZW50LmlzQXR0YWNoZWQoKSAmJiBldmVudC5jbGllbnRYICE9PSB2b2lkIDApIHsKICAgICAgdGhpcy5vdXRQb3J0cy5jbGllbnQuc2VuZCh7CiAgICAgICAgeDogZXZlbnQuY2xpZW50WCwKICAgICAgICB5OiBldmVudC5jbGllbnRZCiAgICAgIH0pOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMucGFnZS5pc0F0dGFjaGVkKCkgJiYgZXZlbnQucGFnZVggIT09IHZvaWQgMCkgewogICAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5wYWdlLnNlbmQoewogICAgICAgIHg6IGV2ZW50LnBhZ2VYLAogICAgICAgIHk6IGV2ZW50LnBhZ2VZCiAgICAgIH0pOwogICAgfQogIH07CgogIHJldHVybiBSZWFkQ29vcmRpbmF0ZXM7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFJlYWRDb29yZGluYXRlczsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvaW5kZXguanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewovKgogKiBUaGlzIGZpbGUgY2FuIGJlIHVzZWQgZm9yIGdlbmVyYWwgbGlicmFyeSBmZWF0dXJlcyBvZiBncm91cHMuCiAqCiAqIFRoZSBsaWJyYXJ5IGZlYXR1cmVzIGNhbiBiZSBtYWRlIGF2YWlsYWJsZSBhcyBDb21tb25KUyBtb2R1bGVzIHRoYXQgdGhlCiAqIGNvbXBvbmVudHMgaW4gdGhpcyBwcm9qZWN0IHV0aWxpemUuCiAqLwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnQuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJuYW1lIjoibm9mbG8tZ3JvdXBzIiwiZGVzY3JpcHRpb24iOiJHcm91cCBVdGlsaXRpZXMgZm9yIE5vRmxvIiwia2V5d29yZHMiOlsibm9mbG8iLCJncm91cHMiLCJ1dGlsaXRpZXMiXSwiYXV0aG9yIjoiS2VubmV0aCBLYW4gPGtlbmhrYW5AZ21haWwuY29tPiIsInZlcnNpb24iOiIwLjEuMCIsInJlcG8iOiJrZW5oa2FuL2dyb3VwcyIsImRlcGVuZGVuY2llcyI6eyJjb21wb25lbnQvdW5kZXJzY29yZSI6IioiLCJub2Zsby9ub2ZsbyI6IioifSwic2NyaXB0cyI6WyJjb21wb25lbnRzL1JlYWRHcm91cHMuY29mZmVlIiwiY29tcG9uZW50cy9SZW1vdmVHcm91cHMuY29mZmVlIiwiY29tcG9uZW50cy9SZWdyb3VwLmNvZmZlZSIsImNvbXBvbmVudHMvR3JvdXAuY29mZmVlIiwiY29tcG9uZW50cy9Hcm91cFppcC5jb2ZmZWUiLCJjb21wb25lbnRzL0ZpbHRlckJ5R3JvdXAuY29mZmVlIiwiY29tcG9uZW50cy9PYmplY3RpZnkuY29mZmVlIiwiY29tcG9uZW50cy9SZWFkR3JvdXAuY29mZmVlIiwiY29tcG9uZW50cy9TZW5kQnlHcm91cC5jb2ZmZWUiLCJjb21wb25lbnRzL0NvbGxlY3RHcm91cHMuY29mZmVlIiwiY29tcG9uZW50cy9Db2xsZWN0T2JqZWN0LmNvZmZlZSIsImNvbXBvbmVudHMvRmlyc3RHcm91cC5jb2ZmZWUiLCJjb21wb25lbnRzL01hcEdyb3VwLmNvZmZlZSIsImNvbXBvbmVudHMvTWVyZ2VHcm91cHMuY29mZmVlIiwiY29tcG9uZW50cy9Hcm91cEJ5T2JqZWN0S2V5LmNvZmZlZSIsImluZGV4LmpzIl0sImpzb24iOlsiY29tcG9uZW50Lmpzb24iXSwibm9mbG8iOnsiaWNvbiI6InRhZ3MiLCJjb21wb25lbnRzIjp7IlJlYWRHcm91cHMiOiJjb21wb25lbnRzL1JlYWRHcm91cHMuY29mZmVlIiwiUmVtb3ZlR3JvdXBzIjoiY29tcG9uZW50cy9SZW1vdmVHcm91cHMuY29mZmVlIiwiUmVncm91cCI6ImNvbXBvbmVudHMvUmVncm91cC5jb2ZmZWUiLCJHcm91cCI6ImNvbXBvbmVudHMvR3JvdXAuY29mZmVlIiwiR3JvdXBaaXAiOiJjb21wb25lbnRzL0dyb3VwWmlwLmNvZmZlZSIsIkZpbHRlckJ5R3JvdXAiOiJjb21wb25lbnRzL0ZpbHRlckJ5R3JvdXAuY29mZmVlIiwiT2JqZWN0aWZ5IjoiY29tcG9uZW50cy9PYmplY3RpZnkuY29mZmVlIiwiUmVhZEdyb3VwIjoiY29tcG9uZW50cy9SZWFkR3JvdXAuY29mZmVlIiwiU2VuZEJ5R3JvdXAiOiJjb21wb25lbnRzL1NlbmRCeUdyb3VwLmNvZmZlZSIsIkNvbGxlY3RHcm91cHMiOiJjb21wb25lbnRzL0NvbGxlY3RHcm91cHMuY29mZmVlIiwiQ29sbGVjdE9iamVjdCI6ImNvbXBvbmVudHMvQ29sbGVjdE9iamVjdC5jb2ZmZWUiLCJGaXJzdEdyb3VwIjoiY29tcG9uZW50cy9GaXJzdEdyb3VwLmNvZmZlZSIsIk1hcEdyb3VwIjoiY29tcG9uZW50cy9NYXBHcm91cC5jb2ZmZWUiLCJNZXJnZUdyb3VwcyI6ImNvbXBvbmVudHMvTWVyZ2VHcm91cHMuY29mZmVlIiwiR3JvdXBCeU9iamVjdEtleSI6ImNvbXBvbmVudHMvR3JvdXBCeU9iamVjdEtleS5jb2ZmZWUifX19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9SZWFkR3JvdXBzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlYWRHcm91cHMsIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKXyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUnKTsKClJlYWRHcm91cHMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFJlYWRHcm91cHMsIF9zdXBlcik7CgogIGZ1bmN0aW9uIFJlYWRHcm91cHMoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5zdHJpcCA9IGZhbHNlOwogICAgdGhpcy50aHJlc2hvbGQgPSBJbmZpbml0eTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLkFycmF5UG9ydCwKICAgICAgc3RyaXA6IG5ldyBub2Zsby5Qb3J0LAogICAgICB0aHJlc2hvbGQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCwKICAgICAgZ3JvdXA6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLnRocmVzaG9sZC5vbignZGF0YScsIGZ1bmN0aW9uKHRocmVzaG9sZCkgewogICAgICByZXR1cm4gX3RoaXMudGhyZXNob2xkID0gcGFyc2VJbnQodGhyZXNob2xkKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnN0cmlwLm9uKCdkYXRhJywgZnVuY3Rpb24oc3RyaXApIHsKICAgICAgcmV0dXJuIF90aGlzLnN0cmlwID0gc3RyaXAgPT09ICd0cnVlJzsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLmNvdW50ID0gMDsKICAgICAgcmV0dXJuIF90aGlzLmdyb3VwcyA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICB2YXIgYmVnaW5Hcm91cDsKICAgICAgYmVnaW5Hcm91cCA9IGZ1bmN0aW9uKCkgewogICAgICAgIF90aGlzLmdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgICAgICBpZiAoX3RoaXMub3V0UG9ydHMub3V0LmlzQXR0YWNoZWQoKSkgewogICAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGlmIChfdGhpcy5jb3VudCA+PSBfdGhpcy50aHJlc2hvbGQpIHsKICAgICAgICByZXR1cm4gYmVnaW5Hcm91cChncm91cCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMuZ3JvdXAuc2VuZChncm91cCk7CiAgICAgICAgaWYgKCFfdGhpcy5zdHJpcCkgewogICAgICAgICAgYmVnaW5Hcm91cChncm91cCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfdGhpcy5jb3VudCsrOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICBpZiAoZ3JvdXAgPT09IF8ubGFzdChfdGhpcy5ncm91cHMpKSB7CiAgICAgICAgX3RoaXMuZ3JvdXBzLnBvcCgpOwogICAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5vdXQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLm91dC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5vdXQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuZ3JvdXAuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gUmVhZEdyb3VwczsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVhZEdyb3VwczsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9SZW1vdmVHcm91cHMuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUmVtb3ZlR3JvdXBzLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKClJlbW92ZUdyb3VwcyA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoUmVtb3ZlR3JvdXBzLCBfc3VwZXIpOwoKICBSZW1vdmVHcm91cHMucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gIlJlbW92ZSBhIGdyb3VwIGdpdmVuIGEgc3RyaW5nIG9yIGEgcmVnZXggc3RyaW5nIjsKCiAgZnVuY3Rpb24gUmVtb3ZlR3JvdXBzKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucmVnZXhwID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIHJlZ2V4cDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLnJlZ2V4cC5vbigiZGF0YSIsIGZ1bmN0aW9uKHJlZ2V4cCkgewogICAgICByZXR1cm4gX3RoaXMucmVnZXhwID0gbmV3IFJlZ0V4cChyZWdleHApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICBpZiAoKF90aGlzLnJlZ2V4cCAhPSBudWxsKSAmJiAoZ3JvdXAubWF0Y2goX3RoaXMucmVnZXhwKSA9PSBudWxsKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICBpZiAoKF90aGlzLnJlZ2V4cCAhPSBudWxsKSAmJiAoZ3JvdXAubWF0Y2goX3RoaXMucmVnZXhwKSA9PSBudWxsKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBSZW1vdmVHcm91cHM7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFJlbW92ZUdyb3VwczsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9SZWdyb3VwLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlZ3JvdXAsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKUmVncm91cCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoUmVncm91cCwgX3N1cGVyKTsKCiAgUmVncm91cC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiRm9yd2FyZCBhbGwgdGhlIGRhdGEgSVBzLCBzdHJpcCBhbGwgZ3JvdXBzLCBhbmQgcmVwbGFjZSAgdGhlbSB3aXRoIGdyb3VwcyBmcm9tIGFub3RoZXIgY29ubmVjdGlvbiI7CgogIGZ1bmN0aW9uIFJlZ3JvdXAoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5ncm91cHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGdyb3VwOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHMuZ3JvdXAub24oImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3VwcyA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZ3JvdXAub24oImRhdGEiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGdyb3VwLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICAgIF9yZWYgPSBfdGhpcy5ncm91cHM7CiAgICAgIF9yZXN1bHRzID0gW107CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGdyb3VwID0gX3JlZltfaV07CiAgICAgICAgX3Jlc3VsdHMucHVzaChfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgZ3JvdXAsIF9pLCBfbGVuLCBfcmVmOwogICAgICBfcmVmID0gX3RoaXMuZ3JvdXBzOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gUmVncm91cDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVncm91cDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Hcm91cC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBHcm91cCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpHcm91cCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR3JvdXAsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEdyb3VwKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMubmV3R3JvdXBzID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0LAogICAgICBncm91cDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBncm91cCwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzOwogICAgICBfcmVmID0gX3RoaXMubmV3R3JvdXBzOwogICAgICBfcmVzdWx0cyA9IFtdOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICAgIF9yZXN1bHRzLnB1c2goX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApKTsKICAgICAgfQogICAgICByZXR1cm4gX3Jlc3VsdHM7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGdyb3VwLCBfaSwgX2xlbiwgX3JlZjsKICAgICAgX3JlZiA9IF90aGlzLm5ld0dyb3VwczsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgZ3JvdXAgPSBfcmVmW19pXTsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmdyb3VwLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5uZXdHcm91cHMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmdyb3VwLm9uKCJkYXRhIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm5ld0dyb3Vwcy5wdXNoKGdyb3VwKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIEdyb3VwOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBHcm91cDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Hcm91cFppcC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBHcm91cFppcCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpHcm91cFppcCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR3JvdXBaaXAsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEdyb3VwWmlwKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMubmV3R3JvdXBzID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0LAogICAgICBncm91cDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5jb3VudCA9IDA7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoX3RoaXMubmV3R3JvdXBzW190aGlzLmNvdW50KytdKTsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZ3JvdXAub24oImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm5ld0dyb3VwcyA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZ3JvdXAub24oImRhdGEiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMubmV3R3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgfQoKICByZXR1cm4gR3JvdXBaaXA7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEdyb3VwWmlwOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0ZpbHRlckJ5R3JvdXAuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRmlsdGVyQnlHcm91cCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpGaWx0ZXJCeUdyb3VwID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhGaWx0ZXJCeUdyb3VwLCBfc3VwZXIpOwoKICBGaWx0ZXJCeUdyb3VwLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJHaXZlbiBhIFJlZ0V4cCBzdHJpbmcsIGZpbHRlciBvdXQgZ3JvdXBzIHRoYXQgZG8gbm90ICBtYXRjaCBhbmQgdGhlaXIgY2hpbGRyZW4gZGF0YSBwYWNrZXRzL2dyb3Vwcy4gRm9yd2FyZCBvbmx5IHRoZSBjb250ZW50ICBvZiB0aGUgbWF0Y2hpbmcgZ3JvdXAuIjsKCiAgZnVuY3Rpb24gRmlsdGVyQnlHcm91cCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnJlZ2V4cCA9IG51bGw7CiAgICB0aGlzLm1hdGNoZWRMZXZlbCA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0LAogICAgICByZWdleHA6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCwKICAgICAgZ3JvdXA6IG5ldyBub2Zsby5Qb3J0LAogICAgICBlbXB0eTogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHMucmVnZXhwLm9uKCJkYXRhIiwgZnVuY3Rpb24ocmVnZXhwKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZWdleHAgPSBuZXcgUmVnRXhwKHJlZ2V4cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5sZXZlbCA9IDA7CiAgICAgIHJldHVybiBfdGhpcy5oYXNDb250ZW50ID0gZmFsc2U7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIGlmIChfdGhpcy5tYXRjaGVkTGV2ZWwgIT0gbnVsbCkgewogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgICAgfQogICAgICBfdGhpcy5sZXZlbCsrOwogICAgICBpZiAoKF90aGlzLm1hdGNoZWRMZXZlbCA9PSBudWxsKSAmJiAoX3RoaXMucmVnZXhwICE9IG51bGwpICYmIChncm91cC5tYXRjaChfdGhpcy5yZWdleHApICE9IG51bGwpKSB7CiAgICAgICAgX3RoaXMubWF0Y2hlZExldmVsID0gX3RoaXMubGV2ZWw7CiAgICAgICAgaWYgKF90aGlzLm91dFBvcnRzLmdyb3VwLmlzQXR0YWNoZWQoKSkgewogICAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmdyb3VwLnNlbmQoZ3JvdXApOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChfdGhpcy5tYXRjaGVkTGV2ZWwgIT0gbnVsbCkgewogICAgICAgIF90aGlzLmhhc0NvbnRlbnQgPSB0cnVlOwogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgaWYgKF90aGlzLm1hdGNoZWRMZXZlbCA9PT0gX3RoaXMubGV2ZWwpIHsKICAgICAgICBfdGhpcy5tYXRjaGVkTGV2ZWwgPSBudWxsOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5tYXRjaGVkTGV2ZWwgIT0gbnVsbCkgewogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5sZXZlbC0tOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKCFfdGhpcy5oYXNDb250ZW50ICYmIF90aGlzLm91dFBvcnRzLmVtcHR5LmlzQXR0YWNoZWQoKSkgewogICAgICAgIF90aGlzLm91dFBvcnRzLmVtcHR5LnNlbmQobnVsbCk7CiAgICAgICAgX3RoaXMub3V0UG9ydHMuZW1wdHkuZGlzY29ubmVjdCgpOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5ncm91cC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5ncm91cC5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBGaWx0ZXJCeUdyb3VwOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBGaWx0ZXJCeUdyb3VwOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL09iamVjdGlmeS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBPYmplY3RpZnksIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKCk9iamVjdGlmeSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoT2JqZWN0aWZ5LCBfc3VwZXIpOwoKICBPYmplY3RpZnkucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gInNwZWNpZnkgYSByZWdleHAgc3RyaW5nLCB1c2UgdGhlIGZpcnN0IG1hdGNoIGFzIHRoZSBrZXkgIG9mIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBkYXRhIjsKCiAgZnVuY3Rpb24gT2JqZWN0aWZ5KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucmVnZXhwID0gbnVsbDsKICAgIHRoaXMubWF0Y2ggPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCwKICAgICAgcmVnZXhwOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHMucmVnZXhwLm9uKCJkYXRhIiwgZnVuY3Rpb24ocmVnZXhwKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZWdleHAgPSBuZXcgUmVnRXhwKHJlZ2V4cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIGlmICgoX3RoaXMucmVnZXhwICE9IG51bGwpICYmIChncm91cC5tYXRjaChfdGhpcy5yZWdleHApICE9IG51bGwpKSB7CiAgICAgICAgX3RoaXMubWF0Y2ggPSBfLmZpcnN0KGdyb3VwLm1hdGNoKF90aGlzLnJlZ2V4cCkpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGQ7CiAgICAgIGlmIChfdGhpcy5tYXRjaCAhPSBudWxsKSB7CiAgICAgICAgZCA9IGRhdGE7CiAgICAgICAgZGF0YSA9IHt9OwogICAgICAgIGRhdGFbX3RoaXMubWF0Y2hdID0gZDsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIE9iamVjdGlmeTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgT2JqZWN0aWZ5Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1JlYWRHcm91cC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBSZWFkR3JvdXAsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKUmVhZEdyb3VwID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSZWFkR3JvdXAsIF9zdXBlcik7CgogIGZ1bmN0aW9uIFJlYWRHcm91cCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmdyb3VwcyA9IFtdOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uQXJyYXlQb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCwKICAgICAgZ3JvdXA6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgICBfdGhpcy5vdXRQb3J0cy5ncm91cC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLm91dC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLm91dC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgfQogICAgICBpZiAoIV90aGlzLmdyb3Vwcy5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmdyb3VwLnNlbmQoX3RoaXMuZ3JvdXBzLmpvaW4oJzonKSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMuZ3JvdXBzLnBvcCgpOwogICAgICBfdGhpcy5vdXRQb3J0cy5ncm91cC5lbmRHcm91cCgpOwogICAgICBpZiAoX3RoaXMub3V0UG9ydHMub3V0LmlzQXR0YWNoZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmdyb3VwLmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFJlYWRHcm91cDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVhZEdyb3VwOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1NlbmRCeUdyb3VwLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFNlbmRCeUdyb3VwLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClNlbmRCeUdyb3VwID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTZW5kQnlHcm91cCwgX3N1cGVyKTsKCiAgU2VuZEJ5R3JvdXAucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1NlbmQgcGFja2V0IGhlbGQgaW4gImRhdGEiIHdoZW4gcmVjZWl2aW5nXAogIG1hdGNoaW5nIHNldCBvZiBncm91cHMgaW4gImluIic7CgogIFNlbmRCeUdyb3VwLnByb3RvdHlwZS5pY29uID0gJ3NoYXJlLXNpZ24nOwoKICBmdW5jdGlvbiBTZW5kQnlHcm91cCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRhdGEgPSB7fTsKICAgIHRoaXMudW5ncm91cGVkID0gbnVsbDsKICAgIHRoaXMuZGF0YUdyb3VwcyA9IFtdOwogICAgdGhpcy5pbkdyb3VwcyA9IFtdOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpLAogICAgICBkYXRhOiBuZXcgbm9mbG8uUG9ydCgnYWxsJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5BcnJheVBvcnQoJ2FsbCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmRhdGEub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMuZGF0YUdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmRhdGEub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmICghX3RoaXMuZGF0YUdyb3Vwcy5sZW5ndGgpIHsKICAgICAgICBfdGhpcy51bmdyb3VwZWQgPSBkYXRhOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuZGF0YVtfdGhpcy5ncm91cElkKF90aGlzLmRhdGFHcm91cHMpXSA9IGRhdGE7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5kYXRhLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZGF0YUdyb3Vwcy5wb3AoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmluR3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBpZDsKICAgICAgaWYgKCFfdGhpcy5pbkdyb3Vwcy5sZW5ndGgpIHsKICAgICAgICBpZiAoX3RoaXMudW5ncm91cGVkICE9PSBudWxsKSB7CiAgICAgICAgICBfdGhpcy5zZW5kKF90aGlzLnVuZ3JvdXBlZCk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZCA9IF90aGlzLmdyb3VwSWQoX3RoaXMuaW5Hcm91cHMpOwogICAgICBpZiAoIV90aGlzLmRhdGFbaWRdKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5zZW5kKF90aGlzLmRhdGFbaWRdKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuaW5Hcm91cHMucG9wKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgU2VuZEJ5R3JvdXAucHJvdG90eXBlLmdyb3VwSWQgPSBmdW5jdGlvbihncm91cHMpIHsKICAgIHJldHVybiBncm91cHMuam9pbignOicpOwogIH07CgogIFNlbmRCeUdyb3VwLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIGdyb3VwLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVmMSwgX3Jlc3VsdHM7CiAgICBfcmVmID0gdGhpcy5pbkdyb3VwczsKICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICB0aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0KICAgIHRoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICBfcmVmMSA9IHRoaXMuaW5Hcm91cHM7CiAgICBfcmVzdWx0cyA9IFtdOwogICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjEubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgIGdyb3VwID0gX3JlZjFbX2pdOwogICAgICBfcmVzdWx0cy5wdXNoKHRoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCkpOwogICAgfQogICAgcmV0dXJuIF9yZXN1bHRzOwogIH07CgogIHJldHVybiBTZW5kQnlHcm91cDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU2VuZEJ5R3JvdXA7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvQ29sbGVjdEdyb3Vwcy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb2xsZWN0R3JvdXBzLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkNvbGxlY3RHcm91cHMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENvbGxlY3RHcm91cHMsIF9zdXBlcik7CgogIENvbGxlY3RHcm91cHMucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NvbGxlY3QgcGFja2V0cyBpbnRvIG9iamVjdCBrZXllZCBieSBpdHMgZ3JvdXBzJzsKCiAgZnVuY3Rpb24gQ29sbGVjdEdyb3VwcygpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRhdGEgPSB7fTsKICAgIHRoaXMuZ3JvdXBzID0gW107CiAgICB0aGlzLnBhcmVudHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIGVycm9yOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLmRhdGEgPSB7fTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgaWYgKGdyb3VwID09PSAnJGRhdGEnKSB7CiAgICAgICAgX3RoaXMuZXJyb3IoJ2dyb3VwcyBjYW5ub3QgYmUgbmFtZWQgXCckZGF0YVwnJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIF90aGlzLnBhcmVudHMucHVzaChfdGhpcy5kYXRhKTsKICAgICAgX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgICByZXR1cm4gX3RoaXMuZGF0YSA9IHt9OwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXREYXRhKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBkYXRhOwogICAgICBkYXRhID0gX3RoaXMuZGF0YTsKICAgICAgX3RoaXMuZGF0YSA9IF90aGlzLnBhcmVudHMucG9wKCk7CiAgICAgIHJldHVybiBfdGhpcy5hZGRDaGlsZChfdGhpcy5kYXRhLCBfdGhpcy5ncm91cHMucG9wKCksIGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoX3RoaXMuZGF0YSk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBDb2xsZWN0R3JvdXBzLnByb3RvdHlwZS5hZGRDaGlsZCA9IGZ1bmN0aW9uKHBhcmVudCwgY2hpbGQsIGRhdGEpIHsKICAgIGlmICghKGNoaWxkIGluIHBhcmVudCkpIHsKICAgICAgcmV0dXJuIHBhcmVudFtjaGlsZF0gPSBkYXRhOwogICAgfQogICAgaWYgKEFycmF5LmlzQXJyYXkocGFyZW50W2NoaWxkXSkpIHsKICAgICAgcmV0dXJuIHBhcmVudFtjaGlsZF0ucHVzaChkYXRhKTsKICAgIH0KICAgIHJldHVybiBwYXJlbnRbY2hpbGRdID0gW3BhcmVudFtjaGlsZF0sIGRhdGFdOwogIH07CgogIENvbGxlY3RHcm91cHMucHJvdG90eXBlLnNldERhdGEgPSBmdW5jdGlvbihkYXRhKSB7CiAgICB2YXIgX2Jhc2U7CiAgICBpZiAoKF9iYXNlID0gdGhpcy5kYXRhKS4kZGF0YSA9PSBudWxsKSB7CiAgICAgIF9iYXNlLiRkYXRhID0gW107CiAgICB9CiAgICByZXR1cm4gdGhpcy5kYXRhLiRkYXRhLnB1c2goZGF0YSk7CiAgfTsKCiAgQ29sbGVjdEdyb3Vwcy5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihtc2cpIHsKICAgIGlmICh0aGlzLm91dFBvcnRzLmVycm9yLmlzQXR0YWNoZWQoKSkgewogICAgICB0aGlzLm91dFBvcnRzLmVycm9yLnNlbmQobmV3IEVycm9yKG1zZykpOwogICAgICB0aGlzLm91dFBvcnRzLmVycm9yLmRpc2Nvbm5lY3QoKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7CiAgfTsKCiAgcmV0dXJuIENvbGxlY3RHcm91cHM7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENvbGxlY3RHcm91cHM7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvQ29sbGVjdE9iamVjdC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb2xsZWN0T2JqZWN0LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkNvbGxlY3RPYmplY3QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENvbGxlY3RPYmplY3QsIF9zdXBlcik7CgogIENvbGxlY3RPYmplY3QucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NvbGxlY3QgcGFja2V0cyB0byBhbiBvYmplY3QgaWRlbnRpZmllZCBieSBrZXlzIG9yZ2FuaXplZFwKICBieSBjb25uZWN0aW9uJzsKCiAgZnVuY3Rpb24gQ29sbGVjdE9iamVjdCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmtleXMgPSBbXTsKICAgIHRoaXMuYWxscGFja2V0cyA9IFtdOwogICAgdGhpcy5kYXRhID0ge307CiAgICB0aGlzLmdyb3VwcyA9IHt9OwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBrZXlzOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdzdHJpbmcnKSwKICAgICAgYWxscGFja2V0czogbmV3IG5vZmxvLkFycmF5UG9ydCgnc3RyaW5nJyksCiAgICAgIGNvbGxlY3Q6IG5ldyBub2Zsby5BcnJheVBvcnQoJ2FsbCcpLAogICAgICByZWxlYXNlOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpLAogICAgICBjbGVhcjogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmtleXMub24oJ2RhdGEnLCBmdW5jdGlvbihrZXkpIHsKICAgICAgdmFyIGtleXMsIF9pLCBfbGVuLCBfcmVzdWx0czsKICAgICAga2V5cyA9IGtleS5zcGxpdCgnLCcpOwogICAgICBpZiAoa2V5cy5sZW5ndGggPiAxKSB7CiAgICAgICAgX3RoaXMua2V5cyA9IFtdOwogICAgICB9CiAgICAgIF9yZXN1bHRzID0gW107CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0ga2V5cy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGtleSA9IGtleXNbX2ldOwogICAgICAgIF9yZXN1bHRzLnB1c2goX3RoaXMua2V5cy5wdXNoKGtleSkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmFsbHBhY2tldHMub24oJ2RhdGEnLCBmdW5jdGlvbihrZXkpIHsKICAgICAgdmFyIGFsbHBhY2tldHMsIF9pLCBfbGVuLCBfcmVzdWx0czsKICAgICAgYWxscGFja2V0cyA9IGtleS5zcGxpdCgnLCcpOwogICAgICBpZiAoYWxscGFja2V0cy5sZW5ndGggPiAxKSB7CiAgICAgICAgX3RoaXMua2V5cyA9IFtdOwogICAgICB9CiAgICAgIF9yZXN1bHRzID0gW107CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gYWxscGFja2V0cy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGtleSA9IGFsbHBhY2tldHNbX2ldOwogICAgICAgIF9yZXN1bHRzLnB1c2goX3RoaXMuYWxscGFja2V0cy5wdXNoKGtleSkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmNvbGxlY3Qub25jZSgnY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlU29ja2V0cygpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucmVsZWFzZS5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMucmVsZWFzZSgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucmVsZWFzZS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmNsZWFyLm9uKCdkYXRhJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5jbGVhcigpOwogICAgfSk7CiAgfQoKICBDb2xsZWN0T2JqZWN0LnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLm91dFBvcnRzLm91dC5zZW5kKHRoaXMuZGF0YSk7CiAgICByZXR1cm4gdGhpcy5kYXRhID0gdGhpcy5jbG9uZSh0aGlzLmRhdGEpOwogIH07CgogIENvbGxlY3RPYmplY3QucHJvdG90eXBlLnN1YnNjcmliZVNvY2tldHMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gdGhpcy5pblBvcnRzLmNvbGxlY3Quc29ja2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHNvY2tldCwgaWR4KSB7CiAgICAgIHJldHVybiBfdGhpcy5zdWJzY3JpYmVTb2NrZXQoc29ja2V0LCBpZHgpOwogICAgfSk7CiAgfTsKCiAgQ29sbGVjdE9iamVjdC5wcm90b3R5cGUuc3Vic2NyaWJlU29ja2V0ID0gZnVuY3Rpb24oc29ja2V0LCBpZCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHNvY2tldC5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIGlmICghX3RoaXMuZ3JvdXBzW2lkXSkgewogICAgICAgIF90aGlzLmdyb3Vwc1tpZF0gPSBbXTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzW2lkXS5wdXNoKGdyb3VwKTsKICAgIH0pOwogICAgc29ja2V0Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgZ3JvdXBJZDsKICAgICAgaWYgKCFfdGhpcy5rZXlzW2lkXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBncm91cElkID0gX3RoaXMuZ3JvdXBJZChfdGhpcy5ncm91cHNbaWRdKTsKICAgICAgaWYgKCFfdGhpcy5kYXRhW2dyb3VwSWRdKSB7CiAgICAgICAgX3RoaXMuZGF0YVtncm91cElkXSA9IHt9OwogICAgICB9CiAgICAgIGlmIChfdGhpcy5hbGxwYWNrZXRzLmluZGV4T2YoX3RoaXMua2V5c1tpZF0pICE9PSAtMSkgewogICAgICAgIGlmICghX3RoaXMuZGF0YVtncm91cElkXVtfdGhpcy5rZXlzW2lkXV0pIHsKICAgICAgICAgIF90aGlzLmRhdGFbZ3JvdXBJZF1bX3RoaXMua2V5c1tpZF1dID0gW107CiAgICAgICAgfQogICAgICAgIF90aGlzLmRhdGFbZ3JvdXBJZF1bX3RoaXMua2V5c1tpZF1dLnB1c2goZGF0YSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5kYXRhW2dyb3VwSWRdW190aGlzLmtleXNbaWRdXSA9IGRhdGE7CiAgICB9KTsKICAgIHJldHVybiBzb2NrZXQub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIGlmICghX3RoaXMuZ3JvdXBzW2lkXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzW2lkXS5wb3AoKTsKICAgIH0pOwogIH07CgogIENvbGxlY3RPYmplY3QucHJvdG90eXBlLmdyb3VwSWQgPSBmdW5jdGlvbihncm91cHMpIHsKICAgIGlmICghZ3JvdXBzLmxlbmd0aCkgewogICAgICByZXR1cm4gJ3VuZ3JvdXBlZCc7CiAgICB9CiAgICByZXR1cm4gZ3JvdXBzWzBdOwogIH07CgogIENvbGxlY3RPYmplY3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIGdyb3VwTmFtZSwgZ3JvdXBlZERhdGEsIG5hbWUsIG5ld0RhdGEsIHZhbHVlOwogICAgbmV3RGF0YSA9IHt9OwogICAgZm9yIChncm91cE5hbWUgaW4gZGF0YSkgewogICAgICBncm91cGVkRGF0YSA9IGRhdGFbZ3JvdXBOYW1lXTsKICAgICAgbmV3RGF0YVtncm91cE5hbWVdID0ge307CiAgICAgIGZvciAobmFtZSBpbiBncm91cGVkRGF0YSkgewogICAgICAgIHZhbHVlID0gZ3JvdXBlZERhdGFbbmFtZV07CiAgICAgICAgaWYgKCFncm91cGVkRGF0YS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIG5ld0RhdGFbZ3JvdXBOYW1lXVtuYW1lXSA9IHZhbHVlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbmV3RGF0YTsKICB9OwoKICBDb2xsZWN0T2JqZWN0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5kYXRhID0ge307CiAgICByZXR1cm4gdGhpcy5ncm91cHMgPSB7fTsKICB9OwoKICByZXR1cm4gQ29sbGVjdE9iamVjdDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgQ29sbGVjdE9iamVjdDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9GaXJzdEdyb3VwLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEZpcnN0R3JvdXAsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKRmlyc3RHcm91cCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoRmlyc3RHcm91cCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gRmlyc3RHcm91cCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRlcHRoID0gMDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgaWYgKF90aGlzLmRlcHRoID09PSAwKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5kZXB0aCsrOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIF90aGlzLmRlcHRoLS07CiAgICAgIGlmIChfdGhpcy5kZXB0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMuZGVwdGggPSAwOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIEZpcnN0R3JvdXA7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEZpcnN0R3JvdXA7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvTWFwR3JvdXAuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgTWFwR3JvdXAsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKTWFwR3JvdXAgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKE1hcEdyb3VwLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBNYXBHcm91cCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLm1hcCA9IHt9OwogICAgdGhpcy5yZWdleHBzID0ge307CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIG1hcDogbmV3IG5vZmxvLkFycmF5UG9ydCgpLAogICAgICByZWdleHA6IG5ldyBub2Zsby5BcnJheVBvcnQoKSwKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5tYXAub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcmVwYXJlTWFwKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucmVnZXhwLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucHJlcGFyZVJlZ0V4cChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm1hcEdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIE1hcEdyb3VwLnByb3RvdHlwZS5wcmVwYXJlTWFwID0gZnVuY3Rpb24obWFwKSB7CiAgICB2YXIgbWFwUGFydHM7CiAgICBpZiAodHlwZW9mIG1hcCA9PT0gJ29iamVjdCcpIHsKICAgICAgdGhpcy5tYXAgPSBtYXA7CiAgICAgIHJldHVybjsKICAgIH0KICAgIG1hcFBhcnRzID0gbWFwLnNwbGl0KCc9Jyk7CiAgICByZXR1cm4gdGhpcy5tYXBbbWFwUGFydHNbMF1dID0gbWFwUGFydHNbMV07CiAgfTsKCiAgTWFwR3JvdXAucHJvdG90eXBlLnByZXBhcmVSZWdFeHAgPSBmdW5jdGlvbihtYXApIHsKICAgIHZhciBtYXBQYXJ0czsKICAgIG1hcFBhcnRzID0gbWFwLnNwbGl0KCc9Jyk7CiAgICByZXR1cm4gdGhpcy5yZWdleHBzW21hcFBhcnRzWzBdXSA9IG1hcFBhcnRzWzFdOwogIH07CgogIE1hcEdyb3VwLnByb3RvdHlwZS5tYXBHcm91cCA9IGZ1bmN0aW9uKGdyb3VwKSB7CiAgICB2YXIgZXhwcmVzc2lvbiwgbWF0Y2hlZCwgcmVnZXhwLCByZXBsYWNlbWVudCwgX3JlZjsKICAgIGlmICh0aGlzLm1hcFtncm91cF0pIHsKICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cCh0aGlzLm1hcFtncm91cF0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBfcmVmID0gdGhpcy5yZWdleHBzOwogICAgZm9yIChleHByZXNzaW9uIGluIF9yZWYpIHsKICAgICAgcmVwbGFjZW1lbnQgPSBfcmVmW2V4cHJlc3Npb25dOwogICAgICByZWdleHAgPSBuZXcgUmVnRXhwKGV4cHJlc3Npb24pOwogICAgICBtYXRjaGVkID0gcmVnZXhwLmV4ZWMoZ3JvdXApOwogICAgICBpZiAoIW1hdGNoZWQpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBncm91cCA9IGdyb3VwLnJlcGxhY2UocmVnZXhwLCByZXBsYWNlbWVudCk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgfTsKCiAgcmV0dXJuIE1hcEdyb3VwOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBNYXBHcm91cDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9NZXJnZUdyb3Vwcy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBNZXJnZUdyb3Vwcywgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpfID0gcmVxdWlyZSgndW5kZXJzY29yZScpLl87CgpNZXJnZUdyb3VwcyA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoTWVyZ2VHcm91cHMsIF9zdXBlcik7CgogIGZ1bmN0aW9uIE1lcmdlR3JvdXBzKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuZ3JvdXBzID0ge307CiAgICB0aGlzLmRhdGEgPSB7fTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLkFycmF5UG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLkFycmF5UG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwLCBzb2NrZXQpIHsKICAgICAgcmV0dXJuIF90aGlzLmFkZEdyb3VwKHNvY2tldCwgZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhLCBzb2NrZXQpIHsKICAgICAgX3RoaXMucmVnaXN0ZXJEYXRhKHNvY2tldCwgZGF0YSk7CiAgICAgIHJldHVybiBfdGhpcy5jaGVja0J1ZmZlcihzb2NrZXQpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oZ3JvdXAsIHNvY2tldCkgewogICAgICBfdGhpcy5jaGVja0J1ZmZlcihzb2NrZXQpOwogICAgICByZXR1cm4gX3RoaXMucmVtb3ZlR3JvdXAoc29ja2V0KTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oc29ja2V0LCBzb2NrZXRJZCkgewogICAgICByZXR1cm4gX3RoaXMuY2hlY2tCdWZmZXIoc29ja2V0SWQpOwogICAgfSk7CiAgfQoKICBNZXJnZUdyb3Vwcy5wcm90b3R5cGUuYWRkR3JvdXAgPSBmdW5jdGlvbihzb2NrZXQsIGdyb3VwKSB7CiAgICBpZiAoIXRoaXMuZ3JvdXBzW3NvY2tldF0pIHsKICAgICAgdGhpcy5ncm91cHNbc29ja2V0XSA9IFtdOwogICAgfQogICAgcmV0dXJuIHRoaXMuZ3JvdXBzW3NvY2tldF0ucHVzaChncm91cCk7CiAgfTsKCiAgTWVyZ2VHcm91cHMucHJvdG90eXBlLnJlbW92ZUdyb3VwID0gZnVuY3Rpb24oc29ja2V0KSB7CiAgICByZXR1cm4gdGhpcy5ncm91cHNbc29ja2V0XS5wb3AoKTsKICB9OwoKICBNZXJnZUdyb3Vwcy5wcm90b3R5cGUuZ3JvdXBJZCA9IGZ1bmN0aW9uKHNvY2tldCkgewogICAgaWYgKCF0aGlzLmdyb3Vwc1tzb2NrZXRdKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgcmV0dXJuIHRoaXMuZ3JvdXBzW3NvY2tldF0uam9pbignOicpOwogIH07CgogIE1lcmdlR3JvdXBzLnByb3RvdHlwZS5yZWdpc3RlckRhdGEgPSBmdW5jdGlvbihzb2NrZXQsIGRhdGEpIHsKICAgIHZhciBpZDsKICAgIGlkID0gdGhpcy5ncm91cElkKHNvY2tldCk7CiAgICBpZiAoIWlkKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICghdGhpcy5kYXRhW2lkXSkgewogICAgICB0aGlzLmRhdGFbaWRdID0ge307CiAgICB9CiAgICByZXR1cm4gdGhpcy5kYXRhW2lkXVtzb2NrZXRdID0gZGF0YTsKICB9OwoKICBNZXJnZUdyb3Vwcy5wcm90b3R5cGUuY2hlY2tCdWZmZXIgPSBmdW5jdGlvbihzb2NrZXQpIHsKICAgIHZhciBpZCwgc29ja2V0SWQsIF9pLCBfbGVuLCBfcmVmOwogICAgaWQgPSB0aGlzLmdyb3VwSWQoc29ja2V0KTsKICAgIGlmICghaWQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCF0aGlzLmRhdGFbaWRdKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIF9yZWYgPSB0aGlzLmluUG9ydHNbImluIl0uc29ja2V0czsKICAgIGZvciAoc29ja2V0SWQgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBzb2NrZXRJZCA9ICsrX2kpIHsKICAgICAgc29ja2V0ID0gX3JlZltzb2NrZXRJZF07CiAgICAgIGlmICghdGhpcy5kYXRhW2lkXVtzb2NrZXRJZF0pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0KICAgIHRoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoaWQpOwogICAgdGhpcy5vdXRQb3J0cy5vdXQuc2VuZCh0aGlzLmRhdGFbaWRdKTsKICAgIHRoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB0aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICByZXR1cm4gZGVsZXRlIHRoaXMuZGF0YVtpZF07CiAgfTsKCiAgcmV0dXJuIE1lcmdlR3JvdXBzOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBNZXJnZUdyb3VwczsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Hcm91cEJ5T2JqZWN0S2V5LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEdyb3VwQnlPYmplY3RLZXksIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKR3JvdXBCeU9iamVjdEtleSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR3JvdXBCeU9iamVjdEtleSwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gR3JvdXBCeU9iamVjdEtleSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRhdGEgPSBbXTsKICAgIHRoaXMua2V5ID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoKSwKICAgICAga2V5OiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5kYXRhID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLmtleSkgewogICAgICAgIHJldHVybiBfdGhpcy5nZXRLZXkoZGF0YSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLmRhdGEucHVzaChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgZGF0YSwgX2ksIF9sZW4sIF9yZWY7CiAgICAgIGlmICghX3RoaXMuZGF0YS5sZW5ndGgpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIV90aGlzLmtleSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfcmVmID0gX3RoaXMuZGF0YTsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgZGF0YSA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLmdldEtleShkYXRhKTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmtleS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmtleSA9IGRhdGE7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5rZXkub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGRhdGEsIF9pLCBfbGVuLCBfcmVmOwogICAgICBpZiAoIV90aGlzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIF9yZWYgPSBfdGhpcy5kYXRhOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBkYXRhID0gX3JlZltfaV07CiAgICAgICAgX3RoaXMuZ2V0S2V5KGRhdGEpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBHcm91cEJ5T2JqZWN0S2V5LnByb3RvdHlwZS5nZXRLZXkgPSBmdW5jdGlvbihkYXRhKSB7CiAgICB2YXIgZ3JvdXA7CiAgICBpZiAoIXRoaXMua2V5KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignS2V5IG5vdCBkZWZpbmVkJyk7CiAgICB9CiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YSBpcyBub3QgYW4gb2JqZWN0Jyk7CiAgICB9CiAgICBncm91cCA9IGRhdGFbdGhpcy5rZXldOwogICAgaWYgKHR5cGVvZiBkYXRhW3RoaXMua2V5XSAhPT0gJ3N0cmluZycpIHsKICAgICAgZ3JvdXAgPSAndW5kZWZpbmVkJzsKICAgIH0KICAgIGlmICh0eXBlb2YgZGF0YVt0aGlzLmtleV0gPT09ICdib29sZWFuJykgewogICAgICBpZiAoZGF0YVt0aGlzLmtleV0pIHsKICAgICAgICBncm91cCA9IHRoaXMua2V5OwogICAgICB9CiAgICB9CiAgICB0aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIHRoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICB9OwoKICByZXR1cm4gR3JvdXBCeU9iamVjdEtleTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgR3JvdXBCeU9iamVjdEtleTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2luZGV4LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKLyoKICogVGhpcyBmaWxlIGNhbiBiZSB1c2VkIGZvciBnZW5lcmFsIGxpYnJhcnkgZmVhdHVyZXMgb2YgcGFja2V0cy4KICoKICogVGhlIGxpYnJhcnkgZmVhdHVyZXMgY2FuIGJlIG1hZGUgYXZhaWxhYmxlIGFzIENvbW1vbkpTIG1vZHVsZXMgdGhhdCB0aGUKICogY29tcG9uZW50cyBpbiB0aGlzIHByb2plY3QgdXRpbGl6ZS4KICovCgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnQuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJuYW1lIjoibm9mbG8tcGFja2V0cyIsImRlc2NyaXB0aW9uIjoiVGhlIGJlc3QgcHJvamVjdCBldmVyLiIsInZlcnNpb24iOiIwLjAuOCIsImF1dGhvciI6Iktlbm5ldGggS2FuIDxrZW5oa2FuQGdtYWlsLmNvbT4iLCJyZXBvIjoia2VuaGthbi9wYWNrZXRzIiwia2V5d29yZHMiOltdLCJkZXBlbmRlbmNpZXMiOnsibm9mbG8vbm9mbG8iOiIqIiwiY29tcG9uZW50L3VuZGVyc2NvcmUiOiIqIn0sInNjcmlwdHMiOlsiY29tcG9uZW50cy9Db3VudFBhY2tldHMuY29mZmVlIiwiY29tcG9uZW50cy9VbnppcC5jb2ZmZWUiLCJjb21wb25lbnRzL0RlZmF1bHRzLmNvZmZlZSIsImNvbXBvbmVudHMvRG9Ob3REaXNjb25uZWN0LmNvZmZlZSIsImNvbXBvbmVudHMvT25seURpc2Nvbm5lY3QuY29mZmVlIiwiY29tcG9uZW50cy9TcGxpdFBhY2tldC5jb2ZmZWUiLCJjb21wb25lbnRzL1JhbmdlLmNvZmZlZSIsImNvbXBvbmVudHMvRmxhdHRlbi5jb2ZmZWUiLCJjb21wb25lbnRzL0NvbXBhY3QuY29mZmVlIiwiY29tcG9uZW50cy9aaXAuY29mZmVlIiwiY29tcG9uZW50cy9TZW5kV2l0aC5jb2ZmZWUiLCJjb21wb25lbnRzL0ZpbHRlclBhY2tldHMuY29mZmVlIiwiY29tcG9uZW50cy9GaWx0ZXJCeVZhbHVlLmNvZmZlZSIsImNvbXBvbmVudHMvRmlsdGVyQnlQb3NpdGlvbi5jb2ZmZWUiLCJjb21wb25lbnRzL0ZpbHRlclBhY2tldC5jb2ZmZWUiLCJjb21wb25lbnRzL1VuaXF1ZVBhY2tldC5jb2ZmZWUiLCJjb21wb25lbnRzL0dyb3VwQnlQYWNrZXQuY29mZmVlIiwiY29tcG9uZW50cy9MYXN0UGFja2V0LmNvZmZlZSIsImNvbXBvbmVudHMvQ291bnRlci5jb2ZmZWUiLCJpbmRleC5qcyJdLCJqc29uIjpbImNvbXBvbmVudC5qc29uIl0sIm5vZmxvIjp7ImNvbXBvbmVudHMiOnsiQ291bnRQYWNrZXRzIjoiY29tcG9uZW50cy9Db3VudFBhY2tldHMuY29mZmVlIiwiVW56aXAiOiJjb21wb25lbnRzL1VuemlwLmNvZmZlZSIsIkRlZmF1bHRzIjoiY29tcG9uZW50cy9EZWZhdWx0cy5jb2ZmZWUiLCJEb05vdERpc2Nvbm5lY3QiOiJjb21wb25lbnRzL0RvTm90RGlzY29ubmVjdC5jb2ZmZWUiLCJPbmx5RGlzY29ubmVjdCI6ImNvbXBvbmVudHMvT25seURpc2Nvbm5lY3QuY29mZmVlIiwiU3BsaXRQYWNrZXQiOiJjb21wb25lbnRzL1NwbGl0UGFja2V0LmNvZmZlZSIsIlJhbmdlIjoiY29tcG9uZW50cy9SYW5nZS5jb2ZmZWUiLCJGbGF0dGVuIjoiY29tcG9uZW50cy9GbGF0dGVuLmNvZmZlZSIsIkNvbXBhY3QiOiJjb21wb25lbnRzL0NvbXBhY3QuY29mZmVlIiwiWmlwIjoiY29tcG9uZW50cy9aaXAuY29mZmVlIiwiU2VuZFdpdGgiOiJjb21wb25lbnRzL1NlbmRXaXRoLmNvZmZlZSIsIkZpbHRlclBhY2tldHMiOiJjb21wb25lbnRzL0ZpbHRlclBhY2tldHMuY29mZmVlIiwiRmlsdGVyQnlWYWx1ZSI6ImNvbXBvbmVudHMvRmlsdGVyQnlWYWx1ZS5jb2ZmZWUiLCJGaWx0ZXJCeVBvc2l0aW9uIjoiY29tcG9uZW50cy9GaWx0ZXJCeVBvc2l0aW9uLmNvZmZlZSIsIkZpbHRlclBhY2tldCI6ImNvbXBvbmVudHMvRmlsdGVyUGFja2V0LmNvZmZlZSIsIlVuaXF1ZVBhY2tldCI6ImNvbXBvbmVudHMvVW5pcXVlUGFja2V0LmNvZmZlZSIsIkdyb3VwQnlQYWNrZXQiOiJjb21wb25lbnRzL0dyb3VwQnlQYWNrZXQuY29mZmVlIiwiTGFzdFBhY2tldCI6ImNvbXBvbmVudHMvTGFzdFBhY2tldC5jb2ZmZWUiLCJDb3VudGVyIjoiY29tcG9uZW50cy9Db3VudGVyLmNvZmZlZSJ9fX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Db3VudFBhY2tldHMuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ291bnRQYWNrZXRzLCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpDb3VudFBhY2tldHMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENvdW50UGFja2V0cywgX3N1cGVyKTsKCiAgQ291bnRQYWNrZXRzLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJjb3VudCBudW1iZXIgb2YgZGF0YSBJUHMiOwoKICBmdW5jdGlvbiBDb3VudFBhY2tldHMoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGNvdW50OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgY291bnQ7CiAgICAgIF90aGlzLmNvdW50cyA9IFswXTsKICAgICAgcmV0dXJuIGNvdW50ID0gXy5sYXN0KF90aGlzLmNvdW50cyk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIF90aGlzLmNvdW50cy5wdXNoKDApOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBjb3VudDsKICAgICAgX3RoaXMuY291bnRzW190aGlzLmNvdW50cy5sZW5ndGggLSAxXSsrOwogICAgICBjb3VudCA9IF8ubGFzdChfdGhpcy5jb3VudHMpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICB2YXIgY291bnQ7CiAgICAgIGNvdW50ID0gXy5sYXN0KF90aGlzLmNvdW50cyk7CiAgICAgIF90aGlzLm91dFBvcnRzLmNvdW50LnNlbmQoY291bnQpOwogICAgICBfdGhpcy5jb3VudHMucG9wKCk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGNvdW50OwogICAgICBjb3VudCA9IF8ubGFzdChfdGhpcy5jb3VudHMpOwogICAgICBfdGhpcy5vdXRQb3J0cy5jb3VudC5zZW5kKGNvdW50KTsKICAgICAgX3RoaXMub3V0UG9ydHMuY291bnQuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIENvdW50UGFja2V0czsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgQ291bnRQYWNrZXRzOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9VbnppcC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBVbnppcCwgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgpfID0gcmVxdWlyZSgidW5kZXJzY29yZSIpOwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKVW56aXAgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFVuemlwLCBfc3VwZXIpOwoKICBVbnppcC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiU2VuZCBwYWNrZXRzIHdob3NlIHBvc2l0aW9uIHVwb24gcmVjZWlwdCBpcyBldmVuIHRvIHRoZSAgRVZFTiBwb3J0LCBvdGhlcndpc2UgdGhlIE9ERCBwb3J0LiI7CgogIGZ1bmN0aW9uIFVuemlwKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvZGQ6IG5ldyBub2Zsby5Qb3J0LAogICAgICBldmVuOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5jb3VudCA9IDA7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIHBvcnQ7CiAgICAgIF90aGlzLmNvdW50Kys7CiAgICAgIHBvcnQgPSBfdGhpcy5jb3VudCAlIDIgPT09IDAgPyAiZXZlbiIgOiAib2RkIjsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzW3BvcnRdLnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5vZGQuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuZXZlbi5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBVbnppcDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgVW56aXA7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0RlZmF1bHRzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIERlZmF1bHRzLCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpEZWZhdWx0cyA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoRGVmYXVsdHMsIF9zdXBlcik7CgogIERlZmF1bHRzLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJpZiBpbmNvbWluZyBpcyBzaG9ydCBvZiB0aGUgbGVuZ3RoIG9mIHRoZSBkZWZhdWx0ICBwYWNrZXRzLCBzZW5kIHRoZSBkZWZhdWx0IHBhY2tldHMuIjsKCiAgZnVuY3Rpb24gRGVmYXVsdHMoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5kZWZhdWx0cyA9IFtdOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCwKICAgICAgImRlZmF1bHQiOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImRlZmF1bHQiXS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZGVmYXVsdHMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJkZWZhdWx0Il0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5kZWZhdWx0cy5wdXNoKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLmNvdW50cyA9IFswXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgX3RoaXMuY291bnRzLnB1c2goMCk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGNvdW50OwogICAgICBjb3VudCA9IF8ubGFzdChfdGhpcy5jb3VudHMpOwogICAgICBpZiAoZGF0YSA9PSBudWxsKSB7CiAgICAgICAgZGF0YSA9IF90aGlzLmRlZmF1bHRzW2NvdW50XTsKICAgICAgfQogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgcmV0dXJuIF90aGlzLmNvdW50c1tfdGhpcy5jb3VudHMubGVuZ3RoIC0gMV0rKzsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIF90aGlzLnBhZFBhY2tldHMoXy5sYXN0KF90aGlzLmNvdW50cykpOwogICAgICBfdGhpcy5jb3VudHMucG9wKCk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLnBhZFBhY2tldHMoX3RoaXMuY291bnRzWzBdKTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIERlZmF1bHRzLnByb3RvdHlwZS5wYWRQYWNrZXRzID0gZnVuY3Rpb24oY291bnQpIHsKICAgIHZhciBfcmVzdWx0czsKICAgIF9yZXN1bHRzID0gW107CiAgICB3aGlsZSAoY291bnQgPCB0aGlzLmRlZmF1bHRzLmxlbmd0aCkgewogICAgICB0aGlzLm91dFBvcnRzLm91dC5zZW5kKHRoaXMuZGVmYXVsdHNbY291bnRdKTsKICAgICAgX3Jlc3VsdHMucHVzaChjb3VudCsrKTsKICAgIH0KICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICByZXR1cm4gRGVmYXVsdHM7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IERlZmF1bHRzOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Eb05vdERpc2Nvbm5lY3QuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRG9Ob3REaXNjb25uZWN0LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCkRvTm90RGlzY29ubmVjdCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoRG9Ob3REaXNjb25uZWN0LCBfc3VwZXIpOwoKICBEb05vdERpc2Nvbm5lY3QucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gImZvcndhcmRzIGV2ZXJ5dGhpbmcgYnV0IG5ldmVyIGRpc2Nvbm5lY3QiOwoKICBmdW5jdGlvbiBEb05vdERpc2Nvbm5lY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIERvTm90RGlzY29ubmVjdDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRG9Ob3REaXNjb25uZWN0Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Pbmx5RGlzY29ubmVjdC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBPbmx5RGlzY29ubmVjdCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpPbmx5RGlzY29ubmVjdCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoT25seURpc2Nvbm5lY3QsIF9zdXBlcik7CgogIE9ubHlEaXNjb25uZWN0LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJ0aGUgaW52ZXJzZSBvZiBEb05vdERpc2Nvbm5lY3QiOwoKICBmdW5jdGlvbiBPbmx5RGlzY29ubmVjdCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuY29ubmVjdCgpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIE9ubHlEaXNjb25uZWN0OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBPbmx5RGlzY29ubmVjdDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvU3BsaXRQYWNrZXQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgU3BsaXRQYWNrZXQsIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKClNwbGl0UGFja2V0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTcGxpdFBhY2tldCwgX3N1cGVyKTsKCiAgU3BsaXRQYWNrZXQucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gInNwbGl0cyBlYWNoIGluY29taW5nIHBhY2tldCBpbnRvIGl0cyBvd24gY29ubmVjdGlvbiI7CgogIGZ1bmN0aW9uIFNwbGl0UGFja2V0KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgZ3JvdXAsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYsIF9yZWYxOwogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuY29ubmVjdCgpOwogICAgICBfcmVmID0gX3RoaXMuZ3JvdXBzOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgICAgfQogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgX3JlZjEgPSBfdGhpcy5ncm91cHM7CiAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICAgIGdyb3VwID0gX3JlZjFbX2pdOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3Vwcy5wb3AoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFNwbGl0UGFja2V0OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBTcGxpdFBhY2tldDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvUmFuZ2UuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUmFuZ2UsIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKClJhbmdlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSYW5nZSwgX3N1cGVyKTsKCiAgUmFuZ2UucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gIm9ubHkgZm9yd2FyZCBhIHNwZWNpZmllZCBudW1iZXIgb2YgcGFja2V0cyBpbiBhICBjb25uZWN0aW9uIjsKCiAgZnVuY3Rpb24gUmFuZ2UoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5zdGFydCA9IC1JbmZpbml0eTsKICAgIHRoaXMuZW5kID0gK0luZmluaXR5OwogICAgdGhpcy5sZW5ndGggPSArSW5maW5pdHk7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0LAogICAgICBzdGFydDogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGVuZDogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGxlbmd0aDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLnN0YXJ0Lm9uKCJkYXRhIiwgZnVuY3Rpb24oc3RhcnQpIHsKICAgICAgcmV0dXJuIF90aGlzLnN0YXJ0ID0gcGFyc2VJbnQoc3RhcnQpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZW5kLm9uKCJkYXRhIiwgZnVuY3Rpb24oZW5kKSB7CiAgICAgIHJldHVybiBfdGhpcy5lbmQgPSBwYXJzZUludChlbmQpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMubGVuZ3RoLm9uKCJkYXRhIiwgZnVuY3Rpb24obGVuZ3RoKSB7CiAgICAgIHJldHVybiBfdGhpcy5sZW5ndGggPSBwYXJzZUludChsZW5ndGgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMudG90YWxDb3VudCA9IDA7CiAgICAgIHJldHVybiBfdGhpcy5zZW50Q291bnQgPSAwOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLnRvdGFsQ291bnQrKzsKICAgICAgaWYgKF90aGlzLnRvdGFsQ291bnQgPiBfdGhpcy5zdGFydCAmJiBfdGhpcy50b3RhbENvdW50IDwgX3RoaXMuZW5kICYmIF90aGlzLnNlbnRDb3VudCA8IF90aGlzLmxlbmd0aCkgewogICAgICAgIF90aGlzLnNlbnRDb3VudCsrOwogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBSYW5nZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmFuZ2U7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0ZsYXR0ZW4uanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRmxhdHRlbiwgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpfID0gcmVxdWlyZSgidW5kZXJzY29yZSIpOwoKRmxhdHRlbiA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoRmxhdHRlbiwgX3N1cGVyKTsKCiAgRmxhdHRlbi5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiRmxhdHRlbiB0aGUgSVAgc3RydWN0dXJlIGJ1dCBwcmVzZXJ2ZSBhbGwgZ3JvdXBzIChpLmUuICAgIGFsbCBncm91cHMgYXJlIGF0IHRoZSB0b3AgbGV2ZWwpIjsKCiAgZnVuY3Rpb24gRmxhdHRlbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5ncm91cHMgPSBbXTsKICAgICAgcmV0dXJuIF90aGlzLmNhY2hlID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHZhciBsb2M7CiAgICAgIGxvYyA9IF90aGlzLmxvY2F0ZSgpOwogICAgICBsb2NbZ3JvdXBdID0gW107CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMucHVzaChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGxvYzsKICAgICAgbG9jID0gX3RoaXMubG9jYXRlKCk7CiAgICAgIHJldHVybiBsb2MucHVzaChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMucG9wKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgbm9kZXMsIHBhY2tldHMsIF9yZWY7CiAgICAgIF9yZWYgPSBfdGhpcy5mbGF0dGVuKF90aGlzLmNhY2hlKSwgcGFja2V0cyA9IF9yZWYucGFja2V0cywgbm9kZXMgPSBfcmVmLm5vZGVzOwogICAgICBfdGhpcy5mbHVzaChfLmV4dGVuZChwYWNrZXRzLCBub2RlcykpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgRmxhdHRlbi5wcm90b3R5cGUubG9jYXRlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gXy5yZWR1Y2UodGhpcy5ncm91cHMsIChmdW5jdGlvbihsb2MsIGdyb3VwKSB7CiAgICAgIHJldHVybiBsb2NbZ3JvdXBdOwogICAgfSksIHRoaXMuY2FjaGUpOwogIH07CgogIEZsYXR0ZW4ucHJvdG90eXBlLmZsYXR0ZW4gPSBmdW5jdGlvbihub2RlKSB7CiAgICB2YXIgZ3JvdXAsIGdyb3Vwcywgbm9kZXMsIHBhY2tldHMsIHN1Ym5vZGVzLCBfaSwgX2xlbiwgX3JlZjsKICAgIGdyb3VwcyA9IHRoaXMuZ2V0Tm9uQXJyYXlLZXlzKG5vZGUpOwogICAgaWYgKGdyb3Vwcy5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwYWNrZXRzOiBub2RlLAogICAgICAgIG5vZGVzOiB7fQogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgc3Vibm9kZXMgPSB7fTsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBncm91cHMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBncm91cCA9IGdyb3Vwc1tfaV07CiAgICAgICAgX3JlZiA9IHRoaXMuZmxhdHRlbihub2RlW2dyb3VwXSksIHBhY2tldHMgPSBfcmVmLnBhY2tldHMsIG5vZGVzID0gX3JlZi5ub2RlczsKICAgICAgICBkZWxldGUgbm9kZVtncm91cF07CiAgICAgICAgc3Vibm9kZXNbZ3JvdXBdID0gcGFja2V0czsKICAgICAgICBfLmV4dGVuZChzdWJub2Rlcywgbm9kZXMpOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgcGFja2V0czogbm9kZSwKICAgICAgICBub2Rlczogc3Vibm9kZXMKICAgICAgfTsKICAgIH0KICB9OwoKICBGbGF0dGVuLnByb3RvdHlwZS5nZXROb25BcnJheUtleXMgPSBmdW5jdGlvbihub2RlKSB7CiAgICByZXR1cm4gXy5jb21wYWN0KF8uZmlsdGVyKF8ua2V5cyhub2RlKSwgZnVuY3Rpb24oa2V5KSB7CiAgICAgIHJldHVybiBpc05hTihwYXJzZUludChrZXkpKTsKICAgIH0pKTsKICB9OwoKICBGbGF0dGVuLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHZhciBncm91cCwgcGFja2V0LCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVzdWx0czsKICAgIGZvciAoX2kgPSAwLCBfbGVuID0gbm9kZS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBwYWNrZXQgPSBub2RlW19pXTsKICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChwYWNrZXQpOwogICAgfQogICAgX3JlZiA9IHRoaXMuZ2V0Tm9uQXJyYXlLZXlzKG5vZGUpOwogICAgX3Jlc3VsdHMgPSBbXTsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgIGdyb3VwID0gX3JlZltfal07CiAgICAgIHRoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgICB0aGlzLmZsdXNoKG5vZGVbZ3JvdXBdKTsKICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpKTsKICAgIH0KICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICByZXR1cm4gRmxhdHRlbjsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRmxhdHRlbjsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvQ29tcGFjdC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb21wYWN0LCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpDb21wYWN0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhDb21wYWN0LCBfc3VwZXIpOwoKICBDb21wYWN0LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJSZW1vdmUgbnVsbCI7CgogIGZ1bmN0aW9uIENvbXBhY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChkYXRhID09IG51bGwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChfLmlzT2JqZWN0KGRhdGEpICYmIF8uaXNFbXB0eShkYXRhKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIENvbXBhY3Q7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENvbXBhY3Q7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1ppcC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBaaXAsIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKClppcCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoWmlwLCBfc3VwZXIpOwoKICBaaXAucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gInppcCB0aHJvdWdoIG11bHRpcGxlIElQcyBhbmQgb3V0cHV0IGEgc2VyaWVzIG9mIHppcHBlZCAgSVBzIGp1c3QgbGlrZSBob3cgXy56aXAoKSB3b3JrcyBpbiBVbmRlcnNjb3JlLmpzIjsKCiAgZnVuY3Rpb24gWmlwKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLnBhY2tldHMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICBpZiAoXy5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnBhY2tldHMucHVzaChkYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF8uaXNFbXB0eShfdGhpcy5wYWNrZXRzKSkgewogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKFtdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChfLnppcC5hcHBseShfLCBfdGhpcy5wYWNrZXRzKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBaaXA7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFppcDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvU2VuZFdpdGguanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgU2VuZFdpdGgsIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKClNlbmRXaXRoID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTZW5kV2l0aCwgX3N1cGVyKTsKCiAgU2VuZFdpdGgucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gIkFsd2F5cyBzZW5kIHRoZSBzcGVjaWZpZWQgcGFja2V0cyB3aXRoIGluY29taW5nIHBhY2tldHMuIjsKCiAgZnVuY3Rpb24gU2VuZFdpdGgoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpc1sid2l0aCJdID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0LAogICAgICAid2l0aCI6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1sid2l0aCJdLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpc1sid2l0aCJdID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1sid2l0aCJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXNbIndpdGgiXS5wdXNoKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBwYWNrZXQsIF9pLCBfbGVuLCBfcmVmOwogICAgICBfcmVmID0gX3RoaXNbIndpdGgiXTsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgcGFja2V0ID0gX3JlZltfaV07CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQocGFja2V0KTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFNlbmRXaXRoOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBTZW5kV2l0aDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRmlsdGVyUGFja2V0cy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBGaWx0ZXJQYWNrZXRzLCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpGaWx0ZXJQYWNrZXRzID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhGaWx0ZXJQYWNrZXRzLCBfc3VwZXIpOwoKICBGaWx0ZXJQYWNrZXRzLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJGaWx0ZXIgcGFja2V0cyBtYXRjaGluZyBzb21lIFJlZ0V4cCBzdHJpbmdzIjsKCiAgZnVuY3Rpb24gRmlsdGVyUGFja2V0cygpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnJlZ2V4cHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIHJlZ2V4cDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0LAogICAgICBtaXNzZWQ6IG5ldyBub2Zsby5Qb3J0LAogICAgICBwYXNzdGhydTogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHMucmVnZXhwLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZWdleHBzID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5yZWdleHAub24oImRhdGEiLCBmdW5jdGlvbihyZWdleHApIHsKICAgICAgcmV0dXJuIF90aGlzLnJlZ2V4cHMucHVzaChuZXcgUmVnRXhwKHJlZ2V4cCkpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChfLmFueShfdGhpcy5yZWdleHBzLCAoZnVuY3Rpb24ocmVnZXhwKSB7CiAgICAgICAgcmV0dXJuIGRhdGEubWF0Y2gocmVnZXhwKTsKICAgICAgfSkpKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMubWlzc2VkLnNlbmQoZGF0YSk7CiAgICAgIH0KICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnBhc3N0aHJ1LmlzQXR0YWNoZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5wYXNzdGhydS5zZW5kKGRhdGEpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgICBfdGhpcy5vdXRQb3J0cy5taXNzZWQuZGlzY29ubmVjdCgpOwogICAgICBpZiAoX3RoaXMub3V0UG9ydHMucGFzc3RocnUuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLnBhc3N0aHJ1LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgfSk7CiAgfQoKICByZXR1cm4gRmlsdGVyUGFja2V0czsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRmlsdGVyUGFja2V0czsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRmlsdGVyQnlWYWx1ZS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBGaWx0ZXJCeVZhbHVlLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCkZpbHRlckJ5VmFsdWUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEZpbHRlckJ5VmFsdWUsIF9zdXBlcik7CgogIEZpbHRlckJ5VmFsdWUucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gIkZpbHRlciBwYWNrZXRzIGJhc2VkIG9uIHRoZWlyIHZhbHVlIjsKCiAgZnVuY3Rpb24gRmlsdGVyQnlWYWx1ZSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmZpbHRlclZhbHVlID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGZpbHRlcnZhbHVlOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIGxvd2VyOiBuZXcgbm9mbG8uUG9ydCwKICAgICAgaGlnaGVyOiBuZXcgbm9mbG8uUG9ydCwKICAgICAgZXF1YWw6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLmZpbHRlcnZhbHVlLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZmlsdGVyVmFsdWUgPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChkYXRhIDwgX3RoaXMuZmlsdGVyVmFsdWUpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMubG93ZXIuc2VuZChkYXRhKTsKICAgICAgfSBlbHNlIGlmIChkYXRhID4gX3RoaXMuZmlsdGVyVmFsdWUpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuaGlnaGVyLnNlbmQoZGF0YSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gX3RoaXMuZmlsdGVyVmFsdWUpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuZXF1YWwuc2VuZChkYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLmxvd2VyLmlzQ29ubmVjdGVkKCkpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5sb3dlci5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgICAgaWYgKF90aGlzLm91dFBvcnRzLmhpZ2hlci5pc0Nvbm5lY3RlZCgpKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMuaGlnaGVyLmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgICBpZiAoX3RoaXMub3V0UG9ydHMuZXF1YWwuaXNDb25uZWN0ZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5lcXVhbC5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgcmV0dXJuIEZpbHRlckJ5VmFsdWU7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEZpbHRlckJ5VmFsdWU7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0ZpbHRlckJ5UG9zaXRpb24uanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRmlsdGVyQnlQb3NpdGlvbiwgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpfID0gcmVxdWlyZSgidW5kZXJzY29yZSIpOwoKRmlsdGVyQnlQb3NpdGlvbiA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoRmlsdGVyQnlQb3NpdGlvbiwgX3N1cGVyKTsKCiAgRmlsdGVyQnlQb3NpdGlvbi5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiRmlsdGVyIHBhY2tldHMgYmFzZWQgb24gdGhlaXIgcG9zaXRpb25zIjsKCiAgZnVuY3Rpb24gRmlsdGVyQnlQb3NpdGlvbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmZpbHRlcnMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGZpbHRlcjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLmZpbHRlci5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZmlsdGVycyA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZmlsdGVyLm9uKCJkYXRhIiwgZnVuY3Rpb24oZmlsdGVyKSB7CiAgICAgIHJldHVybiBfdGhpcy5maWx0ZXJzLnB1c2goZmlsdGVyKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5jb3VudCA9IDA7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLmZpbHRlcnNbX3RoaXMuY291bnRdKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLmNvdW50Kys7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIEZpbHRlckJ5UG9zaXRpb247Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEZpbHRlckJ5UG9zaXRpb247Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0ZpbHRlclBhY2tldC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBGaWx0ZXJQYWNrZXQsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKRmlsdGVyUGFja2V0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhGaWx0ZXJQYWNrZXQsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEZpbHRlclBhY2tldCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnJlZ2V4cHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgcmVnZXhwOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCksCiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIG1pc3NlZDogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5yZWdleHAub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZWdleHBzLnB1c2goZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLnJlZ2V4cHMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmZpbHRlckRhdGEoZGF0YSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5taXNzZWQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBGaWx0ZXJQYWNrZXQucHJvdG90eXBlLmZpbHRlckRhdGEgPSBmdW5jdGlvbihkYXRhKSB7CiAgICB2YXIgZXhwcmVzc2lvbiwgbWF0Y2gsIHJlZ2V4cCwgX2ksIF9sZW4sIF9yZWY7CiAgICBtYXRjaCA9IGZhbHNlOwogICAgX3JlZiA9IHRoaXMucmVnZXhwczsKICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBleHByZXNzaW9uID0gX3JlZltfaV07CiAgICAgIHJlZ2V4cCA9IG5ldyBSZWdFeHAoZXhwcmVzc2lvbik7CiAgICAgIGlmICghcmVnZXhwLmV4ZWMoZGF0YSkpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBtYXRjaCA9IHRydWU7CiAgICB9CiAgICBpZiAoIW1hdGNoKSB7CiAgICAgIGlmICh0aGlzLm91dFBvcnRzLm1pc3NlZC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICB0aGlzLm91dFBvcnRzLm1pc3NlZC5zZW5kKGRhdGEpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiB0aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogIH07CgogIHJldHVybiBGaWx0ZXJQYWNrZXQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEZpbHRlclBhY2tldDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvVW5pcXVlUGFja2V0LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFVuaXF1ZVBhY2tldCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpVbmlxdWVQYWNrZXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFVuaXF1ZVBhY2tldCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gVW5pcXVlUGFja2V0KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuc2VlbiA9IFtdOwogICAgdGhpcy5ncm91cHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpLAogICAgICBjbGVhcjogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpLAogICAgICBkdXBsaWNhdGU6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMucHVzaChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGdyb3VwLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVmMSwgX3Jlc3VsdHM7CiAgICAgIGlmICghX3RoaXMudW5pcXVlKGRhdGEpKSB7CiAgICAgICAgaWYgKCFfdGhpcy5vdXRQb3J0cy5kdXBsaWNhdGUuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIF90aGlzLm91dFBvcnRzLmR1cGxpY2F0ZS5zZW5kKGRhdGEpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfcmVmID0gX3RoaXMuZ3JvdXBzOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgICAgfQogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgX3JlZjEgPSBfdGhpcy5ncm91cHM7CiAgICAgIF9yZXN1bHRzID0gW107CiAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICAgIGdyb3VwID0gX3JlZjFbX2pdOwogICAgICAgIF9yZXN1bHRzLnB1c2goX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnBvcCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgaWYgKCFfdGhpcy5vdXRQb3J0cy5kdXBsaWNhdGUuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5kdXBsaWNhdGUuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuY2xlYXIub24oJ2RhdGEnLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMuc2VlbiA9IFtdOwogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzID0gW107CiAgICB9KTsKICB9CgogIFVuaXF1ZVBhY2tldC5wcm90b3R5cGUudW5pcXVlID0gZnVuY3Rpb24ocGFja2V0KSB7CiAgICBpZiAodGhpcy5zZWVuLmluZGV4T2YocGFja2V0KSAhPT0gLTEpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdGhpcy5zZWVuLnB1c2gocGFja2V0KTsKICAgIHJldHVybiB0cnVlOwogIH07CgogIHJldHVybiBVbmlxdWVQYWNrZXQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFVuaXF1ZVBhY2tldDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvR3JvdXBCeVBhY2tldC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBHcm91cEJ5UGFja2V0LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkdyb3VwQnlQYWNrZXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEdyb3VwQnlQYWNrZXQsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEdyb3VwQnlQYWNrZXQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5wYWNrZXRzID0gMDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgICByZXR1cm4gX3RoaXMucGFja2V0cyA9IDA7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoX3RoaXMucGFja2V0cyk7CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgICAgcmV0dXJuIF90aGlzLnBhY2tldHMrKzsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5wYWNrZXRzID0gMDsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBHcm91cEJ5UGFja2V0OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBHcm91cEJ5UGFja2V0Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9MYXN0UGFja2V0LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIExhc3RQYWNrZXQsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKTGFzdFBhY2tldCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoTGFzdFBhY2tldCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gTGFzdFBhY2tldCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnBhY2tldHMgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5wYWNrZXRzID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnBhY2tldHMucHVzaChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIGlmIChfdGhpcy5wYWNrZXRzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChfdGhpcy5wYWNrZXRzLnBvcCgpKTsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgcmV0dXJuIF90aGlzLnBhY2tldHMgPSBudWxsOwogICAgfSk7CiAgfQoKICByZXR1cm4gTGFzdFBhY2tldDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgTGFzdFBhY2tldDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvQ291bnRlci5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb3VudGVyLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkNvdW50ZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENvdW50ZXIsIF9zdXBlcik7CgogIENvdW50ZXIucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1RoZSBjb3VudCBjb21wb25lbnQgcmVjZWl2ZXMgaW5wdXQgb24gYSBzaW5nbGUgaW5wdXQgcG9ydCxcCiAgICBhbmQgc2VuZHMgdGhlIG51bWJlciBvZiBkYXRhIHBhY2tldHMgcmVjZWl2ZWQgdG8gdGhlIG91dHB1dCBwb3J0IHdoZW5cCiAgICB0aGUgaW5wdXQgZGlzY29ubmVjdHMnOwoKICBmdW5jdGlvbiBDb3VudGVyKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuY291bnQgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIGNvdW50OiBuZXcgbm9mbG8uUG9ydCwKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLmNvdW50ID09PSBudWxsKSB7CiAgICAgICAgX3RoaXMuY291bnQgPSAwOwogICAgICB9CiAgICAgIF90aGlzLmNvdW50Kys7CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5vdXQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5jb3VudC5zZW5kKF90aGlzLmNvdW50KTsKICAgICAgX3RoaXMub3V0UG9ydHMuY291bnQuZGlzY29ubmVjdCgpOwogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm4gX3RoaXMuY291bnQgPSBudWxsOwogICAgfSk7CiAgfQoKICByZXR1cm4gQ291bnRlcjsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgQ291bnRlcjsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1zdHJpbmdzL2luZGV4LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKLyoKICogVGhpcyBmaWxlIGNhbiBiZSB1c2VkIGZvciBnZW5lcmFsIGxpYnJhcnkgZmVhdHVyZXMgdGhhdCBhcmUgZXhwb3NlZCBhcyBDb21tb25KUyBtb2R1bGVzCiAqIHRoYXQgdGhlIGNvbXBvbmVudHMgdGhlbiB1dGlsaXplCiAqLwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXN0cmluZ3MvY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvLXN0cmluZ3MiLCJkZXNjcmlwdGlvbiI6IlN0cmluZyBVdGlsaXRpZXMgZm9yIE5vRmxvIiwiYXV0aG9yIjoiSGVucmkgQmVyZ2l1cyA8aGVucmkuYmVyZ2l1c0Bpa2kuZmk+IiwicmVwbyI6Im5vZmxvL25vZmxvLXN0cmluZ3MiLCJ2ZXJzaW9uIjoiMC4wLjEiLCJrZXl3b3JkcyI6W10sImRlcGVuZGVuY2llcyI6eyJub2Zsby9ub2ZsbyI6IioiLCJjb21wb25lbnQvdW5kZXJzY29yZSI6IioifSwic2NyaXB0cyI6WyJjb21wb25lbnRzL0NvbXBpbGVTdHJpbmcuY29mZmVlIiwiY29tcG9uZW50cy9GaWx0ZXIuY29mZmVlIiwiY29tcG9uZW50cy9TZW5kU3RyaW5nLmNvZmZlZSIsImNvbXBvbmVudHMvU3BsaXRTdHIuY29mZmVlIiwiY29tcG9uZW50cy9TdHJpbmdUZW1wbGF0ZS5jb2ZmZWUiLCJjb21wb25lbnRzL1JlcGxhY2UuY29mZmVlIiwiY29tcG9uZW50cy9Kc29uaWZ5LmNvZmZlZSIsImNvbXBvbmVudHMvUGFyc2VKc29uLmNvZmZlZSIsImluZGV4LmpzIl0sImpzb24iOlsiY29tcG9uZW50Lmpzb24iXSwibm9mbG8iOnsiaWNvbiI6ImZvbnQiLCJjb21wb25lbnRzIjp7IkNvbXBpbGVTdHJpbmciOiJjb21wb25lbnRzL0NvbXBpbGVTdHJpbmcuY29mZmVlIiwiRmlsdGVyIjoiY29tcG9uZW50cy9GaWx0ZXIuY29mZmVlIiwiU2VuZFN0cmluZyI6ImNvbXBvbmVudHMvU2VuZFN0cmluZy5jb2ZmZWUiLCJTcGxpdFN0ciI6ImNvbXBvbmVudHMvU3BsaXRTdHIuY29mZmVlIiwiU3RyaW5nVGVtcGxhdGUiOiJjb21wb25lbnRzL1N0cmluZ1RlbXBsYXRlLmNvZmZlZSIsIlJlcGxhY2UiOiJjb21wb25lbnRzL1JlcGxhY2UuY29mZmVlIiwiSnNvbmlmeSI6ImNvbXBvbmVudHMvSnNvbmlmeS5jb2ZmZWUiLCJQYXJzZUpzb24iOiJjb21wb25lbnRzL1BhcnNlSnNvbi5jb2ZmZWUifX19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvQ29tcGlsZVN0cmluZy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb21waWxlU3RyaW5nLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkNvbXBpbGVTdHJpbmcgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENvbXBpbGVTdHJpbmcsIF9zdXBlcik7CgogIGZ1bmN0aW9uIENvbXBpbGVTdHJpbmcoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5kZWxpbWl0ZXIgPSAiXG4iOwogICAgdGhpcy5kYXRhID0gW107CiAgICB0aGlzLm9uR3JvdXBFbmQgPSB0cnVlOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBkZWxpbWl0ZXI6IG5ldyBub2Zsby5Qb3J0LAogICAgICAiaW4iOiBuZXcgbm9mbG8uQXJyYXlQb3J0LAogICAgICBvbmdyb3VwOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHMuZGVsaW1pdGVyLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZGVsaW1pdGVyID0gZGF0YTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZGF0YS5wdXNoKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIGlmIChfdGhpcy5kYXRhLmxlbmd0aCAmJiBfdGhpcy5vbkdyb3VwRW5kKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoX3RoaXMuZGF0YS5qb2luKF90aGlzLmRlbGltaXRlcikpOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICByZXR1cm4gX3RoaXMuZGF0YSA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF90aGlzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoX3RoaXMuZGF0YS5qb2luKF90aGlzLmRlbGltaXRlcikpOwogICAgICB9CiAgICAgIF90aGlzLmRhdGEgPSBbXTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5vbmdyb3VwLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYgKGRhdGEudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJykgewogICAgICAgICAgX3RoaXMub25Hcm91cEVuZCA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBfdGhpcy5vbkdyb3VwRW5kID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm9uR3JvdXBFbmQgPSBkYXRhOwogICAgfSk7CiAgfQoKICByZXR1cm4gQ29tcGlsZVN0cmluZzsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgQ29tcGlsZVN0cmluZzsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvRmlsdGVyLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEZpbHRlciwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpGaWx0ZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEZpbHRlciwgX3N1cGVyKTsKCiAgRmlsdGVyLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJmaWx0ZXJzIGFuIElQIHdoaWNoIGlzIGEgc3RyaW5nIHVzaW5nIGEgcmVnZXgiOwoKICBmdW5jdGlvbiBGaWx0ZXIoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5yZWdleCA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKSwKICAgICAgcGF0dGVybjogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJyksCiAgICAgIG1pc3NlZDogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLnBhdHRlcm4ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZWdleCA9IG5ldyBSZWdFeHAoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJykgewogICAgICAgIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgIH0KICAgICAgaWYgKChfdGhpcy5yZWdleCAhPSBudWxsKSAmJiAoKGRhdGEgIT0gbnVsbCA/IHR5cGVvZiBkYXRhLm1hdGNoID09PSAiZnVuY3Rpb24iID8gZGF0YS5tYXRjaChfdGhpcy5yZWdleCkgOiB2b2lkIDAgOiB2b2lkIDApICE9IG51bGwpKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5taXNzZWQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm1pc3NlZC5zZW5kKGRhdGEpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgICBpZiAoX3RoaXMub3V0UG9ydHMubWlzc2VkLmlzQXR0YWNoZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5taXNzZWQuZGlzY29ubmVjdCgpOwogICAgICB9CiAgICB9KTsKICB9CgogIHJldHVybiBGaWx0ZXI7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEZpbHRlcjsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvU2VuZFN0cmluZy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBTZW5kU3RyaW5nLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClNlbmRTdHJpbmcgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFNlbmRTdHJpbmcsIF9zdXBlcik7CgogIGZ1bmN0aW9uIFNlbmRTdHJpbmcoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5kYXRhID0gewogICAgICBzdHJpbmc6IG51bGwsCiAgICAgIGdyb3VwOiBbXQogICAgfTsKICAgIHRoaXMuZ3JvdXBzID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIHN0cmluZzogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpLAogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLmluUG9ydHMuc3RyaW5nLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZGF0YS5zdHJpbmcgPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLmRhdGEuZ3JvdXAgPSBfdGhpcy5ncm91cHMuc2xpY2UoMCk7CiAgICAgIHJldHVybiBfdGhpcy5zZW5kU3RyaW5nKF90aGlzLmRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3Vwcy5wb3AoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBTZW5kU3RyaW5nLnByb3RvdHlwZS5zZW5kU3RyaW5nID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIGdyb3VwLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVmMSwgX3Jlc3VsdHM7CiAgICBfcmVmID0gZGF0YS5ncm91cDsKICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICB0aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0KICAgIHRoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YS5zdHJpbmcpOwogICAgX3JlZjEgPSBkYXRhLmdyb3VwOwogICAgX3Jlc3VsdHMgPSBbXTsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICBncm91cCA9IF9yZWYxW19qXTsKICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpKTsKICAgIH0KICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICByZXR1cm4gU2VuZFN0cmluZzsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU2VuZFN0cmluZzsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvU3BsaXRTdHIuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgU3BsaXRTdHIsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKU3BsaXRTdHIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFNwbGl0U3RyLCBfc3VwZXIpOwoKICBTcGxpdFN0ci5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnIFRoZSBTcGxpdFN0ciBjb21wb25lbnQgcmVjZWl2ZXMgYSBzdHJpbmcgaW4gdGhlIGluIHBvcnQsXAogICAgc3BsaXRzIGl0IGJ5IHN0cmluZyBzcGVjaWZpZWQgaW4gdGhlIGRlbGltaXRlciBwb3J0LCBhbmQgc2VuZCBlYWNoIHBhcnQgYXNcCiAgICBhIHNlcGFyYXRlIHBhY2tldCB0byB0aGUgb3V0IHBvcnQnOwoKICBmdW5jdGlvbiBTcGxpdFN0cigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRlbGltaXRlclN0cmluZyA9ICJcbiI7CiAgICB0aGlzLnN0cmluZ3MgPSBbXTsKICAgIHRoaXMuZ3JvdXBzID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIGRlbGltaXRlcjogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5kZWxpbWl0ZXIub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBmaXJzdCwgbGFzdDsKICAgICAgZmlyc3QgPSBkYXRhLnN1YnN0cigwLCAxKTsKICAgICAgbGFzdCA9IGRhdGEuc3Vic3RyKGRhdGEubGVuZ3RoIC0gMSwgMSk7CiAgICAgIGlmIChmaXJzdCA9PT0gJy8nICYmIGxhc3QgPT09ICcvJyAmJiBkYXRhLmxlbmd0aCA+IDEpIHsKICAgICAgICBkYXRhID0gbmV3IFJlZ0V4cChkYXRhLnN1YnN0cigxLCBkYXRhLmxlbmd0aCAtIDIpKTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuZGVsaW1pdGVyU3RyaW5nID0gZGF0YTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuc3RyaW5ncy5wdXNoKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBncm91cCwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZiwgX3JlZjE7CiAgICAgIGlmIChfdGhpcy5zdHJpbmdzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgICB9CiAgICAgIF9yZWYgPSBfdGhpcy5ncm91cHM7CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGdyb3VwID0gX3JlZltfaV07CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgICB9CiAgICAgIF90aGlzLnN0cmluZ3Muam9pbihfdGhpcy5kZWxpbWl0ZXJTdHJpbmcpLnNwbGl0KF90aGlzLmRlbGltaXRlclN0cmluZykuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGxpbmUpOwogICAgICB9KTsKICAgICAgX3JlZjEgPSBfdGhpcy5ncm91cHM7CiAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICAgIGdyb3VwID0gX3JlZjFbX2pdOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICAgIF90aGlzLnN0cmluZ3MgPSBbXTsKICAgICAgcmV0dXJuIF90aGlzLmdyb3VwcyA9IFtdOwogICAgfSk7CiAgfQoKICByZXR1cm4gU3BsaXRTdHI7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFNwbGl0U3RyKCk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1N0cmluZ1RlbXBsYXRlLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFN0cmluZ1RlbXBsYXRlLCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCl8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7CgpTdHJpbmdUZW1wbGF0ZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoU3RyaW5nVGVtcGxhdGUsIF9zdXBlcik7CgogIGZ1bmN0aW9uIFN0cmluZ1RlbXBsYXRlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMudGVtcGxhdGUgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICB0ZW1wbGF0ZTogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpLAogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy50ZW1wbGF0ZS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnRlbXBsYXRlID0gXy50ZW1wbGF0ZShkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoX3RoaXMudGVtcGxhdGUoZGF0YSkpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBTdHJpbmdUZW1wbGF0ZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU3RyaW5nVGVtcGxhdGU7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1JlcGxhY2UuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUmVwbGFjZSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpSZXBsYWNlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSZXBsYWNlLCBfc3VwZXIpOwoKICBSZXBsYWNlLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdHaXZlbiBhIGZpeGVkIHBhdHRlcm4gYW5kIGl0cyByZXBsYWNlbWVudCwgcmVwbGFjZSBhbGxcCiAgb2NjdXJyZW5jZXMgaW4gdGhlIGluY29taW5nIHRlbXBsYXRlLic7CgogIGZ1bmN0aW9uIFJlcGxhY2UoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5wYXR0ZXJuID0gbnVsbDsKICAgIHRoaXMucmVwbGFjZW1lbnQgPSAnJzsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpLAogICAgICBwYXR0ZXJuOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJyksCiAgICAgIHJlcGxhY2VtZW50OiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5wYXR0ZXJuLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucGF0dGVybiA9IG5ldyBSZWdFeHAoZGF0YSwgJ2cnKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnJlcGxhY2VtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucmVwbGFjZW1lbnQgPSBkYXRhLnJlcGxhY2UoJ1xcXFxuJywgIlxuIik7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIHN0cmluZzsKICAgICAgc3RyaW5nID0gZGF0YTsKICAgICAgaWYgKF90aGlzLnBhdHRlcm4gIT0gbnVsbCkgewogICAgICAgIHN0cmluZyA9ICgiIiArIGRhdGEpLnJlcGxhY2UoX3RoaXMucGF0dGVybiwgX3RoaXMucmVwbGFjZW1lbnQpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChzdHJpbmcpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gUmVwbGFjZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVwbGFjZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvSnNvbmlmeS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBKc29uaWZ5LCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCl8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7CgpKc29uaWZ5ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhKc29uaWZ5LCBfc3VwZXIpOwoKICBKc29uaWZ5LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJKU09OaWZ5IGFsbCBpbmNvbWluZywgdW5sZXNzIGEgcmF3IGZsYWcgaXMgc2V0IHRvICBleGNsdWRlIGRhdGEgcGFja2V0cyB0aGF0IGFyZSBwdXJlIHN0cmluZ3MiOwoKICBmdW5jdGlvbiBKc29uaWZ5KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucmF3ID0gZmFsc2U7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIHJhdzogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5yYXcub24oJ2RhdGEnLCBmdW5jdGlvbihyYXcpIHsKICAgICAgcmV0dXJuIF90aGlzLnJhdyA9IHJhdyA9PT0gJ3RydWUnOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChfdGhpcy5yYXcgJiYgXy5pc1N0cmluZyhkYXRhKSkgewogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBKc29uaWZ5OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBKc29uaWZ5Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXN0cmluZ3MvY29tcG9uZW50cy9QYXJzZUpzb24uanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUGFyc2VKc29uLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKClBhcnNlSnNvbiA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoUGFyc2VKc29uLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBQYXJzZUpzb24oKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpc1sidHJ5Il0gPSBmYWxzZTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoKSwKICAgICAgInRyeSI6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHNbInRyeSJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICBpZiAoZGF0YSA9PT0gInRydWUiKSB7CiAgICAgICAgcmV0dXJuIF90aGlzWyJ0cnkiXSA9IHRydWU7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgZTsKICAgICAgdHJ5IHsKICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTsKICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7CiAgICAgICAgZSA9IF9lcnJvcjsKICAgICAgICBpZiAoIV90aGlzWyJ0cnkiXSkgewogICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFBhcnNlSnNvbjsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUGFyc2VKc29uOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3REcmFnLmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sicHJvcGVydGllcyI6eyJlbnZpcm9ubWVudCI6eyJydW50aW1lIjoiaHRtbCIsInNyYyI6Ii4vcHJldmlldy9pZnJhbWUuaHRtbCIsIndpZHRoIjoiMzAwIiwiaGVpZ2h0IjoiMzAwIiwiY29udGVudCI6IiJ9LCJuYW1lIjoiRGV0ZWN0RHJhZyJ9LCJleHBvcnRzIjpbeyJwcml2YXRlIjoicmVjZWl2ZWdlc3R1cmVfM2J3eW8uaW4iLCJwdWJsaWMiOiJpbiJ9LHsicHJpdmF0ZSI6ImNoZWNrbWluZGlzdGFuY2VfenN5aHEuY29tcGFyaXNvbiIsInB1YmxpYyI6ImRpc3RhbmNlIn0seyJwcml2YXRlIjoic2VuZHBhc3NfbHNreHEub3V0IiwicHVibGljIjoicGFzcyJ9LHsicHJpdmF0ZSI6InNlbmRmYWlsXzY0bW0yLm91dCIsInB1YmxpYyI6ImZhaWwifSx7InByaXZhdGUiOiJjaGVja21heHNwZWVkX3NvanRpLmNvbXBhcmlzb24iLCJwdWJsaWMiOiJtYXhzcGVlZCJ9XSwicHJvY2Vzc2VzIjp7IlJlY2VpdmVHZXN0dXJlXzNid3lvIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6LTYwNSwieSI6ODIsImxhYmVsIjoiUmVjZWl2ZUdlc3R1cmUifX0sImNvcmUvU3BsaXRfcWZob20iOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOi02MDUsInkiOjE1OSwibGFiZWwiOiJjb3JlL1NwbGl0In19LCJTZW5kUGFzc19sc2t4cSI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4IjoxMTQzLCJ5IjoyOCwibGFiZWwiOiJTZW5kUGFzcyJ9fSwiU2VuZEZhaWxfNjRtbTIiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTE0NSwieSI6MzA1LCJsYWJlbCI6IlNlbmRGYWlsIn19LCJGYWlsdXJlc18xM3E4cyI6eyJjb21wb25lbnQiOiJjb3JlL01lcmdlIiwibWV0YWRhdGEiOnsieCI6OTQxLCJ5IjozMTEsImxhYmVsIjoiRmFpbHVyZXMifX0sIkdldERpc3RhbmNlX2JqeDBzIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6NTI2LCJ5IjoxNjEsImxhYmVsIjoiR2V0RGlzdGFuY2UifX0sIkNoZWNrTWluRGlzdGFuY2VfenN5aHEiOnsiY29tcG9uZW50IjoibWF0aC9Db21wYXJlIiwibWV0YWRhdGEiOnsieCI6OTAwLCJ5IjoxNjAsImxhYmVsIjoiQ2hlY2tNaW5EaXN0YW5jZSJ9fSwiR2V0SW5kaXZpZHVhbFBvaW50ZXJfaHY5M3QiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9TcGxpdE9iamVjdCIsIm1ldGFkYXRhIjp7IngiOi00MTAsInkiOjE1OSwibGFiZWwiOiJHZXRJbmRpdmlkdWFsUG9pbnRlciJ9fSwiU3BsaXREaXN0YW5jZV92cmV5ZiI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6NzExLjk5OTk5OTk5OTk5OTgsInkiOjE2MCwibGFiZWwiOiJTcGxpdERpc3RhbmNlIn19LCJTcGxpdFBvaW50ZXJfOHJuOXEiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOi0yMjMuNTAwMDAwMDAwMDAwOCwieSI6MTU5LjE2NjY2NjY2NjY2NjY2LCJsYWJlbCI6IlNwbGl0UG9pbnRlciJ9fSwiU2VuZFBvaW50ZXJfYjR1bnYiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MzQwLjMzMzMzMzMzMzMzMjgsInkiOjE2MC4xNjY2NjY2NjY2NjY2OSwibGFiZWwiOiJTZW5kUG9pbnRlciJ9fSwiR2V0U3BlZWRfbzU2ZnAiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9HZXRPYmplY3RLZXkiLCJtZXRhZGF0YSI6eyJ4IjotNDAuNDk5OTk5OTk5OTk5NzcsInkiOjE1OSwibGFiZWwiOiJHZXRTcGVlZCJ9fSwiQ2hlY2tNYXhTcGVlZF9zb2p0aSI6eyJjb21wb25lbnQiOiJtYXRoL0NvbXBhcmUiLCJtZXRhZGF0YSI6eyJ4IjoxNTAuNTAwMDAwMDAwMDAwMjMsInkiOjE2MSwibGFiZWwiOiJDaGVja01heFNwZWVkIn19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoiUmVjZWl2ZUdlc3R1cmVfM2J3eW8iLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9xZmhvbSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3FmaG9tIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRGYWlsXzY0bW0yIiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3FmaG9tIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRQYXNzX2xza3hxIiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJGYWlsdXJlc18xM3E4cyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kRmFpbF82NG1tMiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9iangwcyIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsdXJlc18xM3E4cyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja01pbkRpc3RhbmNlX3pzeWhxIiwicG9ydCI6ImZhaWwifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsdXJlc18xM3E4cyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3FmaG9tIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEluZGl2aWR1YWxQb2ludGVyX2h2OTN0IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX2JqeDBzIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0RGlzdGFuY2VfdnJleWYiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXREaXN0YW5jZV92cmV5ZiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJDaGVja01pbkRpc3RhbmNlX3pzeWhxIiwicG9ydCI6InZhbHVlIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldEluZGl2aWR1YWxQb2ludGVyX2h2OTN0IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0UG9pbnRlcl84cm45cSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OH19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja01pbkRpc3RhbmNlX3pzeWhxIiwicG9ydCI6InBhc3MifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUGFzc19sc2t4cSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTZW5kUG9pbnRlcl9iNHVudiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9iangwcyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdFBvaW50ZXJfOHJuOXEiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFBvaW50ZXJfYjR1bnYiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IkNoZWNrTWF4U3BlZWRfc29qdGkiLCJwb3J0IjoicGFzcyJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRQb2ludGVyX2I0dW52IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldFNwZWVkX281NmZwIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrTWF4U3BlZWRfc29qdGkiLCJwb3J0IjoidmFsdWUifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRQb2ludGVyXzhybjlxIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldFNwZWVkX281NmZwIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo4fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldFNwZWVkX281NmZwIiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkZhaWx1cmVzXzEzcThzIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkNoZWNrTWF4U3BlZWRfc29qdGkiLCJwb3J0IjoiZmFpbCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkZhaWx1cmVzXzEzcThzIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJkYXRhIjoiZGlzdGFuY2UiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX2JqeDBzIiwicG9ydCI6ImtleSJ9fSx7ImRhdGEiOiI+PSIsInRndCI6eyJwcm9jZXNzIjoiQ2hlY2tNaW5EaXN0YW5jZV96c3locSIsInBvcnQiOiJvcGVyYXRvciJ9fSx7ImRhdGEiOiI8PSIsInRndCI6eyJwcm9jZXNzIjoiQ2hlY2tNYXhTcGVlZF9zb2p0aSIsInBvcnQiOiJvcGVyYXRvciJ9fSx7ImRhdGEiOiJzcGVlZCIsInRndCI6eyJwcm9jZXNzIjoiR2V0U3BlZWRfbzU2ZnAiLCJwb3J0Ijoia2V5In19XX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RTd2lwZS5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsiZW52aXJvbm1lbnQiOnsicnVudGltZSI6Imh0bWwiLCJzcmMiOiIuL3ByZXZpZXcvaWZyYW1lLmh0bWwiLCJ3aWR0aCI6IjMwMCIsImhlaWdodCI6IjMwMCIsImNvbnRlbnQiOiIifSwibmFtZSI6IkRldGVjdFN3aXBlIn0sImV4cG9ydHMiOlt7InByaXZhdGUiOiJyZWNlaXZlZ2VzdHVyZV83ZnhjMy5pbiIsInB1YmxpYyI6ImluIn0seyJwcml2YXRlIjoic2VuZHBhc3NfaXVjMjEub3V0IiwicHVibGljIjoicGFzcyJ9LHsicHJpdmF0ZSI6InNlbmRmYWlsX245aWF5Lm91dCIsInB1YmxpYyI6ImZhaWwifSx7InByaXZhdGUiOiJjaGVja3NwZWVkX2NydTIxLmNvbXBhcmlzb24iLCJwdWJsaWMiOiJzcGVlZCJ9LHsicHJpdmF0ZSI6ImNoZWNrZGlzdGFuY2VfNzg2Y2MuY29tcGFyaXNvbiIsInB1YmxpYyI6ImRpc3RhbmNlIn1dLCJwcm9jZXNzZXMiOnsiUmVjZWl2ZUdlc3R1cmVfN2Z4YzMiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoyNzcsInkiOjEyNCwibGFiZWwiOiJSZWNlaXZlR2VzdHVyZSJ9fSwiR2V0SW5kaXZpZHVhbFBvaW50ZXJfOW84NzgiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9TcGxpdE9iamVjdCIsIm1ldGFkYXRhIjp7IngiOjQ3MywieSI6MjE3LCJsYWJlbCI6IkdldEluZGl2aWR1YWxQb2ludGVyIn19LCJTZW5kUGFzc19pdWMyMSI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4IjoyMDYwLCJ5IjoxMTMsImxhYmVsIjoiU2VuZFBhc3MifX0sIkdldFNwZWVkXzI2bjZoIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6ODYzLCJ5IjoyMTYsImxhYmVsIjoiR2V0U3BlZWQifX0sIkRldGVjdGlvbkZhaWxlZF91ajdvaCI6eyJjb21wb25lbnQiOiJjb3JlL01lcmdlIiwibWV0YWRhdGEiOnsieCI6MTg1MCwieSI6MzM3LCJsYWJlbCI6IkRldGVjdGlvbkZhaWxlZCJ9fSwiY29yZS9TcGxpdF9jYmp5eSI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6MjczLCJ5IjoyMTYsImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiU2VuZEZhaWxfbjlpYXkiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MjA2MiwieSI6MzM3LjE2NjY2NjY2NjY2NjYzLCJsYWJlbCI6IlNlbmRGYWlsIn19LCJDaGVja1NwZWVkX2NydTIxIjp7ImNvbXBvbmVudCI6Im1hdGgvQ29tcGFyZSIsIm1ldGFkYXRhIjp7IngiOjEwNTUuNjY2NjY2NjY2NjY2NSwieSI6MjE1LjY2NjY2NjY2NjY2NjY2LCJsYWJlbCI6IkNoZWNrU3BlZWQifX0sInN0cmluZ3MvU2VuZFN0cmluZ183NXNlNiI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4IjoxMjUwLjY2NjY2NjY2NjY2NjUsInkiOjIxNi42NjY2NjY2NjY2NjY2NiwibGFiZWwiOiJzdHJpbmdzL1NlbmRTdHJpbmcifX0sIkdldERpc3RhbmNlX3pkanlmIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6MTQ0NS42NjY2NjY2NjY2NjY1LCJ5IjoyMTUuNjY2NjY2NjY2NjY2NjYsImxhYmVsIjoiR2V0RGlzdGFuY2UifX0sIkNoZWNrRGlzdGFuY2VfNzg2Y2MiOnsiY29tcG9uZW50IjoibWF0aC9Db21wYXJlIiwibWV0YWRhdGEiOnsieCI6MTY0OCwieSI6MjE2LCJsYWJlbCI6IkNoZWNrRGlzdGFuY2UifX0sImNvcmUvU3BsaXRfeDZwOTMiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjY2Ny45OTk5OTk5OTk5OTg2LCJ5IjoyMTUuNjY2NjY2NjY2NjY2NjMsImxhYmVsIjoiY29yZS9TcGxpdCJ9fX0sImNvbm5lY3Rpb25zIjpbeyJzcmMiOnsicHJvY2VzcyI6IkdldFNwZWVkXzI2bjZoIiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkRldGVjdGlvbkZhaWxlZF91ajdvaCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja1NwZWVkX2NydTIxIiwicG9ydCI6InBhc3MifSwidGd0Ijp7InByb2Nlc3MiOiJzdHJpbmdzL1NlbmRTdHJpbmdfNzVzZTYiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0U3BlZWRfMjZuNmgiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQ2hlY2tTcGVlZF9jcnUyMSIsInBvcnQiOiJ2YWx1ZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja1NwZWVkX2NydTIxIiwicG9ydCI6ImZhaWwifSwidGd0Ijp7InByb2Nlc3MiOiJEZXRlY3Rpb25GYWlsZWRfdWo3b2giLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoic3RyaW5ncy9TZW5kU3RyaW5nXzc1c2U2IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX3pkanlmIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX3pkanlmIiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkRldGVjdGlvbkZhaWxlZF91ajdvaCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja0Rpc3RhbmNlXzc4NmNjIiwicG9ydCI6ImZhaWwifSwidGd0Ijp7InByb2Nlc3MiOiJEZXRlY3Rpb25GYWlsZWRfdWo3b2giLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0RGlzdGFuY2VfemRqeWYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQ2hlY2tEaXN0YW5jZV83ODZjYyIsInBvcnQiOiJ2YWx1ZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja0Rpc3RhbmNlXzc4NmNjIiwicG9ydCI6InBhc3MifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUGFzc19pdWMyMSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJEZXRlY3Rpb25GYWlsZWRfdWo3b2giLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZEZhaWxfbjlpYXkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiUmVjZWl2ZUdlc3R1cmVfN2Z4YzMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9jYmp5eSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2Nianl5IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRQYXNzX2l1YzIxIiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2Nianl5IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRGYWlsX245aWF5IiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2Nianl5IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEluZGl2aWR1YWxQb2ludGVyXzlvODc4IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldEluZGl2aWR1YWxQb2ludGVyXzlvODc4IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfeDZwOTMiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF94NnA5MyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJzdHJpbmdzL1NlbmRTdHJpbmdfNzVzZTYiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfeDZwOTMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0U3BlZWRfMjZuNmgiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7ImRhdGEiOiJzcGVlZCIsInRndCI6eyJwcm9jZXNzIjoiR2V0U3BlZWRfMjZuNmgiLCJwb3J0Ijoia2V5In19LHsiZGF0YSI6ImRpc3RhbmNlIiwidGd0Ijp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV96ZGp5ZiIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoiPj0iLCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrU3BlZWRfY3J1MjEiLCJwb3J0Ijoib3BlcmF0b3IifX0seyJkYXRhIjoiPj0iLCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrRGlzdGFuY2VfNzg2Y2MiLCJwb3J0Ijoib3BlcmF0b3IifX1dfScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdFBpbmNoLmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sicHJvcGVydGllcyI6eyJlbnZpcm9ubWVudCI6eyJydW50aW1lIjoiaHRtbCIsInNyYyI6Ii4vcHJldmlldy9pZnJhbWUuaHRtbCIsIndpZHRoIjoiMzAwIiwiaGVpZ2h0IjoiMzAwIiwiY29udGVudCI6IiJ9LCJuYW1lIjoiRGV0ZWN0UGluY2gifSwiZXhwb3J0cyI6W3sicHJpdmF0ZSI6ImNvcmUvc3BsaXRfZXdicmUuaW4iLCJwdWJsaWMiOiJpbiJ9LHsicHJpdmF0ZSI6InNlbmRwYXNzX2NmMHB1Lm91dCIsInB1YmxpYyI6InBhc3MifSx7InByaXZhdGUiOiJzZW5kZmFpbF92bWk1bi5vdXQiLCJwdWJsaWMiOiJmYWlsIn1dLCJwcm9jZXNzZXMiOnsiY29yZS9TcGxpdF9ld2JyZSI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6NzQwLCJ5IjoxNTEsImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiU2VuZEZhaWxfdm1pNW4iOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTQyMywieSI6MjU5LCJsYWJlbCI6IlNlbmRGYWlsIn19LCJTZW5kUGFzc19jZjBwdSI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4IjoxNDIxLCJ5Ijo2NSwibGFiZWwiOiJTZW5kUGFzcyJ9fSwib2JqZWN0cy9TaXplX2pqbW1nIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvU2l6ZSIsIm1ldGFkYXRhIjp7IngiOjkzOSwieSI6MTUwLCJsYWJlbCI6Im9iamVjdHMvU2l6ZSJ9fSwibWF0aC9Db21wYXJlX2hrM3N1Ijp7ImNvbXBvbmVudCI6Im1hdGgvQ29tcGFyZSIsIm1ldGFkYXRhIjp7IngiOjExNDYsInkiOjE0NywibGFiZWwiOiJtYXRoL0NvbXBhcmUifX19LCJjb25uZWN0aW9ucyI6W3sic3JjIjp7InByb2Nlc3MiOiJvYmplY3RzL1NpemVfamptbWciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoibWF0aC9Db21wYXJlX2hrM3N1IiwicG9ydCI6InZhbHVlIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6Im1hdGgvQ29tcGFyZV9oazNzdSIsInBvcnQiOiJwYXNzIn0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFBhc3NfY2YwcHUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoibWF0aC9Db21wYXJlX2hrM3N1IiwicG9ydCI6ImZhaWwifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kRmFpbF92bWk1biIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2V3YnJlIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRGYWlsX3ZtaTVuIiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2V3YnJlIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRQYXNzX2NmMHB1IiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2V3YnJlIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Im9iamVjdHMvU2l6ZV9qam1tZyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsiZGF0YSI6MSwidGd0Ijp7InByb2Nlc3MiOiJtYXRoL0NvbXBhcmVfaGszc3UiLCJwb3J0IjoiY29tcGFyaXNvbiJ9fSx7ImRhdGEiOiI+IiwidGd0Ijp7InByb2Nlc3MiOiJtYXRoL0NvbXBhcmVfaGszc3UiLCJwb3J0Ijoib3BlcmF0b3IifX1dfScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0ZpbHRlckJ5VGFyZ2V0Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sicHJvcGVydGllcyI6eyJuYW1lIjoiRmlsdGVyQnlUYXJnZXQifSwiZXhwb3J0cyI6W3sicHJpdmF0ZSI6IlN0YXJ0RXZlbnRfcmpnMjQuaW4iLCJwdWJsaWMiOiJzdGFydGVkIn0seyJwcml2YXRlIjoiR2V0VGFyZ2V0XzdjZmltLm9iamVjdCIsInB1YmxpYyI6InN0YXJ0ZXZlbnQifSx7InByaXZhdGUiOiJNb3ZlRXZlbnRfcmV1aGwuaW4iLCJwdWJsaWMiOiJtb3ZlIn0seyJwcml2YXRlIjoiVmVyaWZ5VGFyZ2V0X3R5M3A1LmFjY2VwdCIsInB1YmxpYyI6ImFjY2VwdCJ9LHsicHJpdmF0ZSI6IlRhcmdldEVsZW1lbnRfOXR2ODcub3V0IiwicHVibGljIjoidGFyZ2V0In0seyJwcml2YXRlIjoiT25UYXJnZXRfbDg1eDkub3V0IiwicHVibGljIjoib250YXJnZXQifSx7InByaXZhdGUiOiJBbGxvd2VkTW92ZXNfeTZ1bHYub3V0IiwicHVibGljIjoibW92ZSJ9XSwicHJvY2Vzc2VzIjp7IkdldFRhcmdldF83Y2ZpbSI6eyJjb21wb25lbnQiOiJvYmplY3RzL0dldE9iamVjdEtleSIsIm1ldGFkYXRhIjp7IngiOjYzNCwieSI6MjEwLCJsYWJlbCI6IkdldFRhcmdldCJ9fSwiTW92ZUV2ZW50X3JldWhsIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6NDI1LCJ5IjozNjIsImxhYmVsIjoiTW92ZUV2ZW50In19LCJTcGxpdFRhcmdldF9zcWxnMCI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6ODM2LCJ5IjoyMTIsImxhYmVsIjoiU3BsaXRUYXJnZXQifX0sIlN0YXJ0RXZlbnRfcmpnMjQiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4Ijo0MjYuMDAwMDAwMDAwMDAwMDYsInkiOjIxMywibGFiZWwiOiJTdGFydEV2ZW50In19LCJWZXJpZnlUYXJnZXRfdHkzcDUiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9GaWx0ZXJQcm9wZXJ0eVZhbHVlIiwibWV0YWRhdGEiOnsieCI6MTA1MS4zMzMzMzMzMzMzMzM1LCJ5IjoyMTEuMzMzMzMzMzMzMzMzMzEsImxhYmVsIjoiVmVyaWZ5VGFyZ2V0In19LCJBbGxvd2VkTW92ZXNfeTZ1bHYiOnsiY29tcG9uZW50IjoiZmxvdy9HYXRlIiwibWV0YWRhdGEiOnsieCI6MTUwOC42NjY2NjY2NjY2NjY1LCJ5IjoyMTIuNSwibGFiZWwiOiJBbGxvd2VkTW92ZXMifX0sIlNwbGl0T25UYXJnZXRfeG1pNjciOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjEyNzUuODMzMzMzMzMzMzM0LCJ5IjoyMDkuNjY2NjY2NjY2NjY2NjksImxhYmVsIjoiU3BsaXRPblRhcmdldCJ9fSwiT25UYXJnZXRfbDg1eDkiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoxNTA5LjgzMzMzMzMzMzMzNCwieSI6MTE4LjY2NjY2NjY2NjY2NjY5LCJsYWJlbCI6Ik9uVGFyZ2V0In19LCJUYXJnZXRFbGVtZW50Xzl0djg3Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTUwNy44MzMzMzMzMzMzMzQsInkiOjI2LjY2NjY2NjY2NjY2NjY4NiwibGFiZWwiOiJUYXJnZXRFbGVtZW50In19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoiR2V0VGFyZ2V0XzdjZmltIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0VGFyZ2V0X3NxbGcwIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlN0YXJ0RXZlbnRfcmpnMjQiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0VGFyZ2V0XzdjZmltIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0VGFyZ2V0X3NxbGcwIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlZlcmlmeVRhcmdldF90eTNwNSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJNb3ZlRXZlbnRfcmV1aGwiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQWxsb3dlZE1vdmVzX3k2dWx2IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoyfX0seyJzcmMiOnsicHJvY2VzcyI6IlZlcmlmeVRhcmdldF90eTNwNSIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJBbGxvd2VkTW92ZXNfeTZ1bHYiLCJwb3J0IjoiY2xvc2UifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiVmVyaWZ5VGFyZ2V0X3R5M3A1IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0T25UYXJnZXRfeG1pNjciLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRPblRhcmdldF94bWk2NyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJBbGxvd2VkTW92ZXNfeTZ1bHYiLCJwb3J0Ijoib3BlbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdE9uVGFyZ2V0X3htaTY3IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ik9uVGFyZ2V0X2w4NXg5IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0VGFyZ2V0X3NxbGcwIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlRhcmdldEVsZW1lbnRfOXR2ODciLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7ImRhdGEiOiJ0YXJnZXQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldFRhcmdldF83Y2ZpbSIsInBvcnQiOiJrZXkifX1dfScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0dlc3R1cmVUb09iamVjdC5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsiZW52aXJvbm1lbnQiOnsicnVudGltZSI6Imh0bWwiLCJzcmMiOiIuL3ByZXZpZXcvaWZyYW1lLmh0bWwiLCJ3aWR0aCI6IjMwMCIsImhlaWdodCI6IjMwMCIsImNvbnRlbnQiOiIifSwibmFtZSI6IkJlaGF2aW9yIn0sImV4cG9ydHMiOlt7InByaXZhdGUiOiJsaXN0ZW5nZXN0dXJlc19uczhsaS5lbGVtZW50IiwicHVibGljIjoiZWxlbWVudCJ9LHsicHJpdmF0ZSI6Imdlc3R1cmVkYXRhdG9vYmplY3RfeWgzeXEub3V0IiwicHVibGljIjoib3V0In1dLCJwcm9jZXNzZXMiOnsiTGlzdGVuR2VzdHVyZXNfbnM4bGkiOnsiY29tcG9uZW50IjoiZ2VzdHVyZXMvTGlzdGVuR2VzdHVyZXMiLCJtZXRhZGF0YSI6eyJ4Ijo2MDksInkiOjEzOSwibGFiZWwiOiJMaXN0ZW5HZXN0dXJlcyJ9fSwiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSI6eyJjb21wb25lbnQiOiJncm91cHMvQ29sbGVjdE9iamVjdCIsIm1ldGFkYXRhIjp7IngiOjEyNTIsInkiOjE1OSwibGFiZWwiOiJHZXN0dXJlRGF0YVRvT2JqZWN0In19LCJTcGxpdEVuZF9ha2RxMSI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6ODQ3LjE2NjY2NjY2NjY2NjcsInkiOjg1LjY2NjY2NjY2NjY2NjY2LCJsYWJlbCI6IlNwbGl0RW5kIn19LCJDbGVhck9uRW5kXzl3OW8iOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXRBc3luYyIsIm1ldGFkYXRhIjp7IngiOjEwNTEuMTY2NjY2NjY2NjY2NywieSI6ODguNjY2NjY2NjY2NjY2NjYsImxhYmVsIjoiQ2xlYXJPbkVuZCJ9fSwiU3BsaXRTcGVlZF8yam5rbSI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6ODQ5LjUsInkiOjE0Ny41LCJsYWJlbCI6IlNwbGl0U3BlZWQifX0sIlNwbGl0U3RhcnRfaHIycngiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjg0NS44MzMzMzMzMzMzMzMsInkiOjIzLjUwMDAwMDAwMDAwMDAzLCJsYWJlbCI6IlNwbGl0U3RhcnQifX0sIlJlbGVhc2VNb3ZlT3JFbmRfYWhjczUiOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjEwNTAuMzMzMzMzMzMzMzMyNiwieSI6MTU3LjgzMzMzMzMzMzMzMzMxLCJsYWJlbCI6IlJlbGVhc2VNb3ZlT3JFbmQifX19LCJjb25uZWN0aW9ucyI6W3sic3JjIjp7InByb2Nlc3MiOiJTcGxpdEVuZF9ha2RxMSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJDbGVhck9uRW5kXzl3OW8iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2xlYXJPbkVuZF85dzlvIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0IjoiY2xlYXIifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0IjoiZW5kIn0sInRndCI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfYWtkcTEiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0Ijoic3RhcnQifSwidGd0Ijp7InByb2Nlc3MiOiJTcGxpdFN0YXJ0X2hyMnJ4IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0U3RhcnRfaHIycngiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6InN0YXJ0cG9pbnQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0IjoiZWxlbWVudHMifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjd9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0IjoiYW5nbGUifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0IjoiZGlzdGFuY2UifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRTcGVlZF8yam5rbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0IjoibW92ZXBvaW50In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImN1cnJlbnQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0IjoiZHVyYXRpb24ifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfYWtkcTEiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImVuZHBvaW50In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6InNwZWVkIn0sInRndCI6eyJwcm9jZXNzIjoiU3BsaXRTcGVlZF8yam5rbSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OH19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdFNwZWVkXzJqbmttIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlJlbGVhc2VNb3ZlT3JFbmRfYWhjczUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjh9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfYWtkcTEiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiUmVsZWFzZU1vdmVPckVuZF9haGNzNSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJSZWxlYXNlTW92ZU9yRW5kX2FoY3M1IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0IjoicmVsZWFzZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OH19LHsiZGF0YSI6ImVsZW1lbnRzIiwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImFsbHBhY2tldHMifX0seyJkYXRhIjoic3RhcnRlbGVtZW50LHN0YXJ0cG9pbnQsZWxlbWVudHMsYW5nbGUsZGlzdGFuY2Usc3BlZWQsbW92ZXBvaW50LGN1cnJlbnQsZHVyYXRpb24sZW5kZWxlbWVudCxlbmRwb2ludCIsInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJrZXlzIn19XX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9MaXN0ZW5HZXN0dXJlcy5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsiZW52aXJvbm1lbnQiOnsicnVudGltZSI6Imh0bWwiLCJzcmMiOiIuL3ByZXZpZXcvaWZyYW1lLmh0bWwiLCJ3aWR0aCI6IjMwMCIsImhlaWdodCI6IjMwMCIsImNvbnRlbnQiOiIifSwibmFtZSI6Ikxpc3Rlbkdlc3R1cmVzIn0sImV4cG9ydHMiOlt7InByaXZhdGUiOiJnZXN0dXJlcy9saXN0ZW5wb2ludGVyXzhmdGQxLmVsZW1lbnQiLCJwdWJsaWMiOiJlbGVtZW50In0seyJwcml2YXRlIjoibW92ZXBvaW50X2ZqbHVyLm91dCIsInB1YmxpYyI6Im1vdmVwb2ludCJ9LHsicHJpdmF0ZSI6ImRpc3RhbmNlX2t3azM5Lm91dCIsInB1YmxpYyI6ImRpc3RhbmNlIn0seyJwcml2YXRlIjoiZ2VzdHVyZWVsZW1lbnRzX3l2bTltLm91dCIsInB1YmxpYyI6ImVsZW1lbnRzIn0seyJwcml2YXRlIjoiYW5nbGVfNDNxcG8ub3V0IiwicHVibGljIjoiYW5nbGUifSx7InByaXZhdGUiOiJzcGVlZF9lOTlqcS5vdXQiLCJwdWJsaWMiOiJzcGVlZCJ9LHsicHJpdmF0ZSI6ImdldHN0YXJ0ZWxlbWVudF93N202NC5vdXQiLCJwdWJsaWMiOiJzdGFydCJ9LHsicHJpdmF0ZSI6InN0YXJ0cG9pbnRfdThpbnQub3V0IiwicHVibGljIjoic3RhcnRwb2ludCJ9LHsicHJpdmF0ZSI6ImdldGVuZGVsZW1lbnRfc2xicDkub3V0IiwicHVibGljIjoiZW5kIn0seyJwcml2YXRlIjoiZ2V0ZW5kaW5ncG9pbnRfZGV0dGIuY2xpZW50IiwicHVibGljIjoiZW5kcG9pbnQifSx7InByaXZhdGUiOiJjdXJyZW50ZWxlbWVudF9jdTBxNS5vdXQiLCJwdWJsaWMiOiJjdXJyZW50In0seyJwcml2YXRlIjoiZHVyYXRpb25fcXlldnYub3V0IiwicHVibGljIjoiZHVyYXRpb24ifV0sInByb2Nlc3NlcyI6eyJHZXN0dXJlU3RhcnRfcjh2cjUiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjQ2NiwieSI6LTMxLCJsYWJlbCI6Ikdlc3R1cmVTdGFydCJ9fSwiR2V0U3RhcnRpbmdQb2ludF9waWRmcyI6eyJjb21wb25lbnQiOiJpbnRlcmFjdGlvbi9SZWFkQ29vcmRpbmF0ZXMiLCJtZXRhZGF0YSI6eyJ4Ijo3NjUsInkiOi0xOTEsImxhYmVsIjoiR2V0U3RhcnRpbmdQb2ludCJ9fSwiR2V0TW92ZVBvaW50XzlkaWE5Ijp7ImNvbXBvbmVudCI6ImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlcyIsIm1ldGFkYXRhIjp7IngiOjEzNjgsInkiOjEzNiwibGFiZWwiOiJHZXRNb3ZlUG9pbnQifX0sImNvcmUvU3BsaXRfYmFlZWIiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjE1NjMsInkiOjEzNywibGFiZWwiOiJjb3JlL1NwbGl0In19LCJjb3JlL1NwbGl0XzRkczFoIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4Ijo5NzMsInkiOi0xOTEsImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiR2VzdHVyZUFuZ2xlX2R3amoiOnsiY29tcG9uZW50IjoibWF0aC9DYWxjdWxhdGVBbmdsZSIsIm1ldGFkYXRhIjp7IngiOjE5MzksInkiOi0xMjcsImxhYmVsIjoiR2VzdHVyZUFuZ2xlIn19LCJHZXN0dXJlRGlzdGFuY2VfZXNxa2MiOnsiY29tcG9uZW50IjoibWF0aC9DYWxjdWxhdGVEaXN0YW5jZSIsIm1ldGFkYXRhIjp7IngiOjE5MzQsInkiOjIwLCJsYWJlbCI6Ikdlc3R1cmVEaXN0YW5jZSJ9fSwiTGFzdE1vdmVfcDV5ajciOnsiY29tcG9uZW50IjoiY29yZS9LaWNrIiwibWV0YWRhdGEiOnsieCI6MTA2MiwieSI6MTc2LCJsYWJlbCI6Ikxhc3RNb3ZlIn19LCJHZXN0dXJlRW5kX3FxeDhvIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4Ijo0NjAsInkiOjE2MiwibGFiZWwiOiJHZXN0dXJlRW5kIn19LCJHZXN0dXJlTW92ZV9oeTQ2cyI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6NDYzLCJ5Ijo2NSwibGFiZWwiOiJHZXN0dXJlTW92ZSJ9fSwiQWxsVG91Y2hlZEVsZW1lbnRzX2kzeDc0Ijp7ImNvbXBvbmVudCI6InBhY2tldHMvVW5pcXVlUGFja2V0IiwibWV0YWRhdGEiOnsieCI6MTQ0NSwieSI6NiwibGFiZWwiOiJBbGxUb3VjaGVkRWxlbWVudHMifX0sIkdldE1vdmVFbGVtZW50X2lhZXhtIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6MTA1OSwieSI6NiwibGFiZWwiOiJHZXRNb3ZlRWxlbWVudCJ9fSwiR2V0U3RhcnRFbGVtZW50X3c3bTY0Ijp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6OTY4LCJ5IjotNDA0LjY2NjY2NjY2NjY2NjYzLCJsYWJlbCI6IkdldFN0YXJ0RWxlbWVudCJ9fSwiTW92ZURhdGVfNmJqbmwiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9DcmVhdGVEYXRlIiwibWV0YWRhdGEiOnsieCI6MjE0NSwieSI6MTY0LCJsYWJlbCI6Ik1vdmVEYXRlIn19LCJTdGFydERhdGVfc3did3UiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9DcmVhdGVEYXRlIiwibWV0YWRhdGEiOnsieCI6OTY4LCJ5IjotMjgxLCJsYWJlbCI6IlN0YXJ0RGF0ZSJ9fSwibWF0aC9TdWJ0cmFjdF9qNXYyMCI6eyJjb21wb25lbnQiOiJtYXRoL1N1YnRyYWN0IiwibWV0YWRhdGEiOnsieCI6MjUxNiwieSI6LTE5MywibGFiZWwiOiJtYXRoL1N1YnRyYWN0In19LCJTZXRTdGFydF9xbDUxYyI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4Ijo3NjUsInkiOi0yODQsImxhYmVsIjoiU2V0U3RhcnQifX0sIm1hdGgvRGl2aWRlX3g0Z2M4Ijp7ImNvbXBvbmVudCI6Im1hdGgvRGl2aWRlIiwibWV0YWRhdGEiOnsieCI6MjkzOSwieSI6LTE5OSwibGFiZWwiOiJtYXRoL0RpdmlkZSJ9fSwiY29yZS9TcGxpdF94MGExMiI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6MjE1MSwieSI6MjMsImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwib2JqZWN0cy9DYWxsTWV0aG9kX2l1N2syIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvQ2FsbE1ldGhvZCIsIm1ldGFkYXRhIjp7IngiOjIzNDgsInkiOjE2NywibGFiZWwiOiJvYmplY3RzL0NhbGxNZXRob2QifX0sIm9iamVjdHMvQ2FsbE1ldGhvZF9ydGZkMiI6eyJjb21wb25lbnQiOiJvYmplY3RzL0NhbGxNZXRob2QiLCJtZXRhZGF0YSI6eyJ4IjoyMTM5LCJ5IjotMjc0LCJsYWJlbCI6Im9iamVjdHMvQ2FsbE1ldGhvZCJ9fSwiRGlzdGFuY2Vfa3drMzkiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoyNTgwLCJ5IjoyMCwibGFiZWwiOiJEaXN0YW5jZSJ9fSwiR2VzdHVyZUVsZW1lbnRzX3l2bTltIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTYzOSwieSI6NCwibGFiZWwiOiJHZXN0dXJlRWxlbWVudHMifX0sIkFuZ2xlXzQzcXBvIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MjMxMiwieSI6LTEyMSwibGFiZWwiOiJBbmdsZSJ9fSwiU3BlZWRfZTk5anEiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjozMzYyLCJ5IjotMTcxLCJsYWJlbCI6IlNwZWVkIn19LCJNb3ZlUG9pbnRfZmpsdXIiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoxOTM5LCJ5IjoyNjIsImxhYmVsIjoiTW92ZVBvaW50In19LCJTdGFydFBvaW50X3U4aW50Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTM4MiwieSI6LTE4OSwibGFiZWwiOiJTdGFydFBvaW50In19LCJnZXN0dXJlcy9MaXN0ZW5Qb2ludGVyXzhmdGQxIjp7ImNvbXBvbmVudCI6Imdlc3R1cmVzL0xpc3RlblBvaW50ZXIiLCJtZXRhZGF0YSI6eyJ4IjoyMTMsInkiOi0xLCJsYWJlbCI6Imdlc3R1cmVzL0xpc3RlblBvaW50ZXIifX0sIkdldEVuZEVsZW1lbnRfc2xicDkiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9HZXRPYmplY3RLZXkiLCJtZXRhZGF0YSI6eyJ4IjoxMzY3LjMzMzMzMzMzMzMzMzUsInkiOjI4My4zMzMzMzMzMzMzMzM1LCJsYWJlbCI6IkdldEVuZEVsZW1lbnQifX0sImNvcmUvUmVwZWF0QXN5bmNfYzU2dGoiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXRBc3luYyIsIm1ldGFkYXRhIjp7IngiOjEwNTguNjY2NjY2NjY2NjY3LCJ5IjozMTIuMzMzMzMzMzMzMzMzMjYsImxhYmVsIjoiY29yZS9SZXBlYXRBc3luYyJ9fSwic3RyaW5ncy9TZW5kU3RyaW5nX3Q2Z2J5Ijp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjE5MzUsInkiOjE2Ni4zMzMzMzMzMzMzMzMzNywibGFiZWwiOiJzdHJpbmdzL1NlbmRTdHJpbmcifX0sImdyb3Vwcy9TZW5kQnlHcm91cF96MDZrayI6eyJjb21wb25lbnQiOiJncm91cHMvU2VuZEJ5R3JvdXAiLCJtZXRhZGF0YSI6eyJ4Ijo1NTYsInkiOi0xNTEuNjY2NjY2NjY2NjY2NjksImxhYmVsIjoiZ3JvdXBzL1NlbmRCeUdyb3VwIn19LCJjb3JlL1NwbGl0X2VreGlqIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjozMTU4LjUsInkiOi0xNjYuMzMzMzMzMzMzMzMzNDMsImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiY29yZS9TcGxpdF9lcGgzZCI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6MjEyMy4zMzMzMzMzMzMzMzQsInkiOi0xMjIuNjY2NjY2NjY2NjY2NjksImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiY29yZS9TcGxpdF8zZWxlcCI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6MjczMS4xNjY2NjY2NjY2Njk3LCJ5IjotMTcxLjgzMzMzMzMzMzMzMjU4LCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sImNvcmUvU3BsaXRfOGwzeXUiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjEyNTEuMzMzMzMzMzMzMzMzMywieSI6Ny4xNjY2NjY2NjY2NjY2MjksImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiQ3VycmVudEVsZW1lbnRfY3UwcTUiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoxNTk5LjgzMzMzMzMzMzMzMywieSI6LTE5Mi4wMDAwMDAwMDAwMDAwNiwibGFiZWwiOiJDdXJyZW50RWxlbWVudCJ9fSwiRHVyYXRpb25fcXlldnYiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoyOTM3LjgzMzMzMzMzMzMzMywieSI6LTI5NS44MzMzMzMzMzMzMzMyNiwibGFiZWwiOiJEdXJhdGlvbiJ9fSwiR2V0RW5kaW5nUG9pbnRfZGV0dGIiOnsiY29tcG9uZW50IjoiaW50ZXJhY3Rpb24vUmVhZENvb3JkaW5hdGVzIiwibWV0YWRhdGEiOnsieCI6NzI3LjgzMzMzMzMzMzMzMzEsInkiOjMzNS4zMzMzMzMzMzMzMzMzLCJsYWJlbCI6IkdldEVuZGluZ1BvaW50In19LCJjb3JlL01lcmdlXzZzbyI6eyJjb21wb25lbnQiOiJjb3JlL01lcmdlIiwibWV0YWRhdGEiOnsieCI6MTE5Ni42NjY2NjY2NjY2NjcsInkiOi0xODguOTk5OTk5OTk5OTk5ODMsImxhYmVsIjoiY29yZS9NZXJnZSJ9fSwiaW50ZXJhY3Rpb24vUmVhZENvb3JkaW5hdGVzXzgyY2IxIjp7ImNvbXBvbmVudCI6ImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlcyIsIm1ldGFkYXRhIjp7IngiOjc2Ny4zMzMzMzMzMzMzMzM5LCJ5IjotODUuODMzMzMzMzMzMzMzMTQsImxhYmVsIjoiaW50ZXJhY3Rpb24vUmVhZENvb3JkaW5hdGVzIn19LCJjb3JlL0Ryb3Bfc2E4ejUiOnsiY29tcG9uZW50IjoiY29yZS9Ecm9wIiwibWV0YWRhdGEiOnsieCI6MTU5Ni44MzMzMzMzMzMzMzMsInkiOjMyNi4wMDAwMDAwMDAwMDAxLCJsYWJlbCI6ImNvcmUvRHJvcCJ9fSwiY29yZS9NZXJnZV9scXhsbCI6eyJjb21wb25lbnQiOiJjb3JlL01lcmdlIiwibWV0YWRhdGEiOnsieCI6NzY4Ljk5OTk5OTk5OTk5OTUsInkiOi00MDMuNjY2NjY2NjY2NjY2NjMsImxhYmVsIjoiY29yZS9NZXJnZSJ9fSwiZ3JvdXBzL1NlbmRCeUdyb3VwXzh5YWoiOnsiY29tcG9uZW50IjoiZ3JvdXBzL1NlbmRCeUdyb3VwIiwibWV0YWRhdGEiOnsieCI6MTE2Ni45OTk5OTk5OTk5OTksInkiOi0yODYuODMzMzMzMzMzMzMzMjYsImxhYmVsIjoiZ3JvdXBzL1NlbmRCeUdyb3VwIn19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF80ZHMxaCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlQW5nbGVfZHdqaiIsInBvcnQiOiJvcmlnaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9iYWVlYiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlQW5nbGVfZHdqaiIsInBvcnQiOiJkZXN0aW5hdGlvbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0XzRkczFoIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEaXN0YW5jZV9lc3FrYyIsInBvcnQiOiJvcmlnaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9iYWVlYiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGlzdGFuY2VfZXNxa2MiLCJwb3J0IjoiZGVzdGluYXRpb24ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0TW92ZVBvaW50XzlkaWE5IiwicG9ydCI6ImNsaWVudCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfYmFlZWIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0U3RhcnRpbmdQb2ludF9waWRmcyIsInBvcnQiOiJjbGllbnQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0XzRkczFoIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlNldFN0YXJ0X3FsNTFjIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlN0YXJ0RGF0ZV9zd2J3dSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlRGlzdGFuY2VfZXNxa2MiLCJwb3J0IjoiZGlzdGFuY2UifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3gwYTEyIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfeDBhMTIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoibWF0aC9EaXZpZGVfeDRnYzgiLCJwb3J0IjoiZGl2aWRlbmQifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoib2JqZWN0cy9DYWxsTWV0aG9kX2l1N2syIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Im1hdGgvU3VidHJhY3RfajV2MjAiLCJwb3J0IjoibWludWVuZCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJNb3ZlRGF0ZV82YmpubCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJvYmplY3RzL0NhbGxNZXRob2RfaXU3azIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF94MGExMiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJEaXN0YW5jZV9rd2szOSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJBbGxUb3VjaGVkRWxlbWVudHNfaTN4NzQiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZUVsZW1lbnRzX3l2bTltIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfYmFlZWIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiTW92ZVBvaW50X2ZqbHVyIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6Imdlc3R1cmVzL0xpc3RlblBvaW50ZXJfOGZ0ZDEiLCJwb3J0IjoiZW5kIn0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZUVuZF9xcXg4byIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJnZXN0dXJlcy9MaXN0ZW5Qb2ludGVyXzhmdGQxIiwicG9ydCI6Im1vdmUifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlTW92ZV9oeTQ2cyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJnZXN0dXJlcy9MaXN0ZW5Qb2ludGVyXzhmdGQxIiwicG9ydCI6InN0YXJ0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZVN0YXJ0X3I4dnI1IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Ikxhc3RNb3ZlX3A1eWo3IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEVuZEVsZW1lbnRfc2xicDkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZUVuZF9xcXg4byIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJMYXN0TW92ZV9wNXlqNyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlRW5kX3FxeDhvIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvUmVwZWF0QXN5bmNfYzU2dGoiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9iYWVlYiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJzdHJpbmdzL1NlbmRTdHJpbmdfdDZnYnkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoic3RyaW5ncy9TZW5kU3RyaW5nX3Q2Z2J5IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ik1vdmVEYXRlXzZiam5sIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo0fX0seyJzcmMiOnsicHJvY2VzcyI6Imdyb3Vwcy9TZW5kQnlHcm91cF96MDZrayIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRTdGFydGluZ1BvaW50X3BpZGZzIiwicG9ydCI6ImV2ZW50In0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Ikdlc3R1cmVTdGFydF9yOHZyNSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJncm91cHMvU2VuZEJ5R3JvdXBfejA2a2siLCJwb3J0IjoiZGF0YSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlTW92ZV9oeTQ2cyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJncm91cHMvU2VuZEJ5R3JvdXBfejA2a2siLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZU1vdmVfaHk0NnMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiTGFzdE1vdmVfcDV5ajciLCJwb3J0IjoiZGF0YSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlTW92ZV9oeTQ2cyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRNb3ZlRWxlbWVudF9pYWV4bSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlTW92ZV9oeTQ2cyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRNb3ZlUG9pbnRfOWRpYTkiLCJwb3J0IjoiZXZlbnQifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF94MGExMiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGlzdGFuY2VfZXNxa2MiLCJwb3J0IjoiY2xlYXIifSwibWV0YWRhdGEiOnsicm91dGUiOjB9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9la3hpaiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTcGVlZF9lOTlqcSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OH19LHsic3JjIjp7InByb2Nlc3MiOiJtYXRoL0RpdmlkZV94NGdjOCIsInBvcnQiOiJxdW90aWVudCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfZWt4aWoiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9la3hpaiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJtYXRoL0RpdmlkZV94NGdjOCIsInBvcnQiOiJjbGVhciJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MH19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1JlcGVhdEFzeW5jX2M1NnRqIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkFsbFRvdWNoZWRFbGVtZW50c19pM3g3NCIsInBvcnQiOiJjbGVhciJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlQW5nbGVfZHdqaiIsInBvcnQiOiJhbmdsZSJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfZXBoM2QiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9lcGgzZCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJBbmdsZV80M3FwbyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2VwaDNkIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVBbmdsZV9kd2pqIiwicG9ydCI6ImNsZWFyIn0sIm1ldGFkYXRhIjp7InJvdXRlIjowfX0seyJzcmMiOnsicHJvY2VzcyI6Im1hdGgvU3VidHJhY3RfajV2MjAiLCJwb3J0IjoiZGlmZmVyZW5jZSJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfM2VsZXAiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF8zZWxlcCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJtYXRoL0RpdmlkZV94NGdjOCIsInBvcnQiOiJkaXZpc29yIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldE1vdmVFbGVtZW50X2lhZXhtIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfOGwzeXUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF84bDN5dSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJBbGxUb3VjaGVkRWxlbWVudHNfaTN4NzQiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF84bDN5dSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJDdXJyZW50RWxlbWVudF9jdTBxNSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0XzNlbGVwIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkR1cmF0aW9uX3F5ZXZ2IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfM2VsZXAiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoibWF0aC9TdWJ0cmFjdF9qNXYyMCIsInBvcnQiOiJjbGVhciJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MH19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlRW5kX3FxeDhvIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEVuZGluZ1BvaW50X2RldHRiIiwicG9ydCI6ImV2ZW50In0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Im9iamVjdHMvQ2FsbE1ldGhvZF9ydGZkMiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJtYXRoL1N1YnRyYWN0X2o1djIwIiwicG9ydCI6InN1YnRyYWhlbmQifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF80ZHMxaCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL01lcmdlXzZzbyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL01lcmdlXzZzbyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTdGFydFBvaW50X3U4aW50IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6ImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlc184MmNiMSIsInBvcnQiOiJjbGllbnQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL01lcmdlXzZzbyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlU3RhcnRfcjh2cjUiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiaW50ZXJhY3Rpb24vUmVhZENvb3JkaW5hdGVzXzgyY2IxIiwicG9ydCI6ImV2ZW50In0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldEVuZEVsZW1lbnRfc2xicDkiLCJwb3J0IjoibWlzc2VkIn0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9Ecm9wX3NhOHo1IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikdlc3R1cmVTdGFydF9yOHZyNSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL01lcmdlX2xxeGxsIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvTWVyZ2VfbHF4bGwiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0U3RhcnRFbGVtZW50X3c3bTY0IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Imdyb3Vwcy9TZW5kQnlHcm91cF96MDZrayIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL01lcmdlX2xxeGxsIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Imdyb3Vwcy9TZW5kQnlHcm91cF84eWFqIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Im9iamVjdHMvQ2FsbE1ldGhvZF9ydGZkMiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTdGFydERhdGVfc3did3UiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiZ3JvdXBzL1NlbmRCeUdyb3VwXzh5YWoiLCJwb3J0IjoiZGF0YSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlU3RhcnRfcjh2cjUiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2V0U3RhcnRfcWw1MWMiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZU1vdmVfaHk0NnMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiZ3JvdXBzL1NlbmRCeUdyb3VwXzh5YWoiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7ImRhdGEiOiJ0YXJnZXQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldE1vdmVFbGVtZW50X2lhZXhtIiwicG9ydCI6ImtleSJ9fSx7ImRhdGEiOiJ0YXJnZXQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldFN0YXJ0RWxlbWVudF93N202NCIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoibm93IiwidGd0Ijp7InByb2Nlc3MiOiJTZXRTdGFydF9xbDUxYyIsInBvcnQiOiJzdHJpbmcifX0seyJkYXRhIjoiZ2V0VGltZSIsInRndCI6eyJwcm9jZXNzIjoib2JqZWN0cy9DYWxsTWV0aG9kX2l1N2syIiwicG9ydCI6Im1ldGhvZCJ9fSx7ImRhdGEiOiJnZXRUaW1lIiwidGd0Ijp7InByb2Nlc3MiOiJvYmplY3RzL0NhbGxNZXRob2RfcnRmZDIiLCJwb3J0IjoibWV0aG9kIn19LHsiZGF0YSI6InRhcmdldCIsInRndCI6eyJwcm9jZXNzIjoiR2V0RW5kRWxlbWVudF9zbGJwOSIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoibm93IiwidGd0Ijp7InByb2Nlc3MiOiJzdHJpbmdzL1NlbmRTdHJpbmdfdDZnYnkiLCJwb3J0Ijoic3RyaW5nIn19XX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9MaXN0ZW5Qb2ludGVyLmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sicHJvcGVydGllcyI6eyJuYW1lIjoiTGlzdGVuUG9pbnRlciJ9LCJleHBvcnRzIjpbeyJwcml2YXRlIjoiTGlzdGVuXzEwMjVnLmVsZW1lbnQiLCJwdWJsaWMiOiJlbGVtZW50In0seyJwcml2YXRlIjoiTGlzdGVuXzEwMjVnLmNhcHR1cmUiLCJwdWJsaWMiOiJjYXB0dXJlIn0seyJwcml2YXRlIjoiU3RhcnRFdmVudF94OGl0di5vdXQiLCJwdWJsaWMiOiJzdGFydCJ9LHsicHJpdmF0ZSI6Ik1vdmVFdmVudF9xYTNwcC5vdXQiLCJwdWJsaWMiOiJtb3ZlIn0seyJwcml2YXRlIjoiRW5kRXZlbnRfaG13cDkub3V0IiwicHVibGljIjoiZW5kIn1dLCJwcm9jZXNzZXMiOnsiTGlzdGVuXzEwMjVnIjp7ImNvbXBvbmVudCI6ImludGVyYWN0aW9uL0xpc3RlblBvaW50ZXIiLCJtZXRhZGF0YSI6eyJ4Ijo1MDAsInkiOi02NSwibGFiZWwiOiJMaXN0ZW4ifX0sIkVuZF92b20yMiI6eyJjb21wb25lbnQiOiJjb3JlL01lcmdlIiwibWV0YWRhdGEiOnsieCI6ODQzLCJ5Ijo5NiwibGFiZWwiOiJFbmQifX0sIlN0YXJ0Xzg2dTNnIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4Ijo4NDgsInkiOi0xNTcsImxhYmVsIjoiU3RhcnQifX0sIk1vdmVPbmx5RHVyaW5nR2VzdHVyZV85ODZ6dCI6eyJjb21wb25lbnQiOiJmbG93L0dhdGUiLCJtZXRhZGF0YSI6eyJ4IjoxMTA2LCJ5IjotNDAsImxhYmVsIjoiTW92ZU9ubHlEdXJpbmdHZXN0dXJlIn19LCJFbmRPbmx5T25jZV92ZXhmbiI6eyJjb21wb25lbnQiOiJmbG93L0dhdGUiLCJtZXRhZGF0YSI6eyJ4IjoxMTA3LCJ5Ijo3NSwibGFiZWwiOiJFbmRPbmx5T25jZSJ9fSwiU3BsaXRFbmRfY25meTYiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjE0MDcsInkiOjc5LCJsYWJlbCI6IlNwbGl0RW5kIn19LCJBc3luY2hyb25pemVfeDBocW0iOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXRBc3luYyIsIm1ldGFkYXRhIjp7IngiOjE0MDQsInkiOjE3MS4zMzMzMzMzMzMzMzMzMSwibGFiZWwiOiJBc3luY2hyb25pemUifX0sIlN0YXJ0RXZlbnRfeDhpdHYiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoxNjYyLCJ5IjotMTYyLCJsYWJlbCI6IlN0YXJ0RXZlbnQifX0sIk1vdmVFdmVudF9xYTNwcCI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjE2NjIsInkiOi0zNSwibGFiZWwiOiJNb3ZlRXZlbnQifX0sIkVuZEV2ZW50X2htd3A5Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTY1OSwieSI6NzUsImxhYmVsIjoiRW5kRXZlbnQifX19LCJjb25uZWN0aW9ucyI6W3sic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5fMTAyNWciLCJwb3J0IjoibGVhdmUifSwidGd0Ijp7InByb2Nlc3MiOiJFbmRfdm9tMjIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuXzEwMjVnIiwicG9ydCI6ImNhbmNlbCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkVuZF92b20yMiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5fMTAyNWciLCJwb3J0IjoidXAifSwidGd0Ijp7InByb2Nlc3MiOiJFbmRfdm9tMjIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuXzEwMjVnIiwicG9ydCI6ImRvd24ifSwidGd0Ijp7InByb2Nlc3MiOiJTdGFydF84NnUzZyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5fMTAyNWciLCJwb3J0IjoibW92ZSJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ik1vdmVPbmx5RHVyaW5nR2VzdHVyZV85ODZ6dCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJFbmRfdm9tMjIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiRW5kT25seU9uY2VfdmV4Zm4iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiRW5kT25seU9uY2VfdmV4Zm4iLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfY25meTYiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3RhcnRfODZ1M2ciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiRW5kT25seU9uY2VfdmV4Zm4iLCJwb3J0Ijoib3BlbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdEVuZF9jbmZ5NiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJBc3luY2hyb25pemVfeDBocW0iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiQXN5bmNocm9uaXplX3gwaHFtIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkVuZE9ubHlPbmNlX3ZleGZuIiwicG9ydCI6ImNsb3NlIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IlN0YXJ0Xzg2dTNnIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ik1vdmVPbmx5RHVyaW5nR2VzdHVyZV85ODZ6dCIsInBvcnQiOiJvcGVuIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0RW5kX2NuZnk2IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ik1vdmVPbmx5RHVyaW5nR2VzdHVyZV85ODZ6dCIsInBvcnQiOiJjbG9zZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJTdGFydF84NnUzZyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTdGFydEV2ZW50X3g4aXR2IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Ik1vdmVPbmx5RHVyaW5nR2VzdHVyZV85ODZ6dCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJNb3ZlRXZlbnRfcWEzcHAiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfY25meTYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiRW5kRXZlbnRfaG13cDkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fV19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvRGV0ZWN0Q2FyZGluYWxEaXJlY3Rpb24uanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJwcm9wZXJ0aWVzIjp7ImVudmlyb25tZW50Ijp7InJ1bnRpbWUiOiJodG1sIiwic3JjIjoiLi9wcmV2aWV3L2lmcmFtZS5odG1sIiwid2lkdGgiOiIzMDAiLCJoZWlnaHQiOiIzMDAiLCJjb250ZW50IjoiIn0sIm5hbWUiOiJEZXRlY3RDYXJkaW5hbERpcmVjdGlvbiJ9LCJleHBvcnRzIjpbeyJwcml2YXRlIjoicmVjZWl2ZWdlc3R1cmVfdGhibXcuaW4iLCJwdWJsaWMiOiJpbiJ9LHsicHJpdmF0ZSI6InNlbmRlYXN0XzIxOHF4Lm91dCIsInB1YmxpYyI6ImVhc3QifSx7InByaXZhdGUiOiJzZW5kc291dGhfd3gyYjUub3V0IiwicHVibGljIjoic291dGgifSx7InByaXZhdGUiOiJzZW5kd2VzdF9ya2R6OS5vdXQiLCJwdWJsaWMiOiJ3ZXN0In0seyJwcml2YXRlIjoic2VuZG5vcnRoX2M1NjJrLm91dCIsInB1YmxpYyI6Im5vcnRoIn0seyJwcml2YXRlIjoiZmFpbF81YjBxby5vdXQiLCJwdWJsaWMiOiJmYWlsIn0seyJwcml2YXRlIjoiY2hlY2ttYXhkaXN0YW5jZV9jZWJxNS5jb21wYXJpc29uIiwicHVibGljIjoibWF4ZGlzdGFuY2UifV0sInByb2Nlc3NlcyI6eyJSZWNlaXZlR2VzdHVyZV90aGJtdyI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOi0yOTQsInkiOjEzNCwibGFiZWwiOiJSZWNlaXZlR2VzdHVyZSJ9fSwiU3BsaXRHZXN0dXJlX2Rrazg3Ijp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjotMjk2LCJ5IjoyMTQsImxhYmVsIjoiU3BsaXRHZXN0dXJlIn19LCJTZW5kTm9ydGhfYzU2MmsiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTczMywieSI6NDQ3LCJsYWJlbCI6IlNlbmROb3J0aCJ9fSwiU2VuZEVhc3RfMjE4cXgiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTcyMSwieSI6LTUsImxhYmVsIjoiU2VuZEVhc3QifX0sIlJvdXRlRGlyZWN0aW9uX2FwZ3NwIjp7ImNvbXBvbmVudCI6Imdlc3R1cmVzL0NhcmRpbmFsUm91dGVyIiwibWV0YWRhdGEiOnsieCI6MTQ2OSwieSI6MTk1LCJsYWJlbCI6IlJvdXRlRGlyZWN0aW9uIn19LCJHZXRJbmRpdmlkdWFsUG9pbnRlcl9vempmYSI6eyJjb21wb25lbnQiOiJvYmplY3RzL1NwbGl0T2JqZWN0IiwibWV0YWRhdGEiOnsieCI6LTg2LCJ5IjoyMTQsImxhYmVsIjoiR2V0SW5kaXZpZHVhbFBvaW50ZXIifX0sIkdldFN0YXJ0UG9pbnRfYmhybDIiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9HZXRPYmplY3RLZXkiLCJtZXRhZGF0YSI6eyJ4Ijo4NzksInkiOjE1NywibGFiZWwiOiJHZXRTdGFydFBvaW50In19LCJHZXRDdXJyZW50UG9pbnRfcnd3dDAiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9HZXRPYmplY3RLZXkiLCJtZXRhZGF0YSI6eyJ4Ijo4NzcsInkiOjI1OSwibGFiZWwiOiJHZXRDdXJyZW50UG9pbnQifX0sIkdldEdlc3R1cmVBbmdsZV9kanByNiI6eyJjb21wb25lbnQiOiJtYXRoL0NhbGN1bGF0ZUFuZ2xlIiwibWV0YWRhdGEiOnsieCI6MTA4MywieSI6MTkzLCJsYWJlbCI6IkdldEdlc3R1cmVBbmdsZSJ9fSwiU2VuZFdlc3RfcmtkejkiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTczMC44MzMzMzMzMzMzMzMzLCJ5IjozNDguMzMzMzMzMzMzMzMzMzcsImxhYmVsIjoiU2VuZFdlc3QifX0sIlNlbmRTb3V0aF93eDJiNSI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4IjoxNzIxLjgzMzMzMzMzMzMzMzMsInkiOjEwNy4zMzMzMzMzMzMzMzMzNywibGFiZWwiOiJTZW5kU291dGgifX0sIkZhaWxfNWIwcW8iOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjE3MzguMTY2NjY2NjY2NjY2NSwieSI6NTY0LCJsYWJlbCI6IkZhaWwifX0sImNvcmUvU3BsaXRfbjNxaWYiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjEyNzYuOTk5OTk5OTk5OTk5LCJ5IjoxOTMuNjY2NjY2NjY2NjY2NjksImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiR2V0RGlzdGFuY2Vfb3d5eWIiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9HZXRPYmplY3RLZXkiLCJtZXRhZGF0YSI6eyJ4IjozMDQsInkiOjIxNiwibGFiZWwiOiJHZXREaXN0YW5jZSJ9fSwiQ2hlY2tNYXhEaXN0YW5jZV9jZWJxNSI6eyJjb21wb25lbnQiOiJtYXRoL0NvbXBhcmUiLCJtZXRhZGF0YSI6eyJ4Ijo0OTksInkiOjIxNCwibGFiZWwiOiJDaGVja01heERpc3RhbmNlIn19LCJTZW5kUG9pbnRlcl92MGVxdiI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4Ijo2ODgsInkiOjIxNCwibGFiZWwiOiJTZW5kUG9pbnRlciJ9fSwiU3BsaXRQb2ludGVyX3YwdThrIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjoxMDkuMDAwMDAwMDAwMDAwMDYsInkiOjIxNS4zMzMzMzMzMzMzMzMzMSwibGFiZWwiOiJTcGxpdFBvaW50ZXIifX19LCJjb25uZWN0aW9ucyI6W3sic3JjIjp7InByb2Nlc3MiOiJHZXRTdGFydFBvaW50X2JocmwyIiwicG9ydCI6Im9iamVjdCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEN1cnJlbnRQb2ludF9yd3d0MCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRTdGFydFBvaW50X2JocmwyIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEdlc3R1cmVBbmdsZV9kanByNiIsInBvcnQiOiJvcmlnaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0Q3VycmVudFBvaW50X3J3d3QwIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEdlc3R1cmVBbmdsZV9kanByNiIsInBvcnQiOiJkZXN0aW5hdGlvbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdEdlc3R1cmVfZGtrODciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZEVhc3RfMjE4cXgiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0R2VzdHVyZV9ka2s4NyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kV2VzdF9ya2R6OSIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRHZXN0dXJlX2Rrazg3IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmROb3J0aF9jNTYyayIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRHZXN0dXJlX2Rrazg3IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRTb3V0aF93eDJiNSIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiUm91dGVEaXJlY3Rpb25fYXBnc3AiLCJwb3J0IjoibiJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmROb3J0aF9jNTYyayIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NH19LHsic3JjIjp7InByb2Nlc3MiOiJSb3V0ZURpcmVjdGlvbl9hcGdzcCIsInBvcnQiOiJ3In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFdlc3RfcmtkejkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiUm91dGVEaXJlY3Rpb25fYXBnc3AiLCJwb3J0IjoicyJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRTb3V0aF93eDJiNSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6Nn19LHsic3JjIjp7InByb2Nlc3MiOiJSb3V0ZURpcmVjdGlvbl9hcGdzcCIsInBvcnQiOiJlIn0sInRndCI6eyJwcm9jZXNzIjoiU2VuZEVhc3RfMjE4cXgiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjd9fSx7InNyYyI6eyJwcm9jZXNzIjoiUmVjZWl2ZUdlc3R1cmVfdGhibXciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU3BsaXRHZXN0dXJlX2Rrazg3IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0R2VzdHVyZV9ka2s4NyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRJbmRpdmlkdWFsUG9pbnRlcl9vempmYSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRDdXJyZW50UG9pbnRfcnd3dDAiLCJwb3J0IjoibWlzc2VkIn0sInRndCI6eyJwcm9jZXNzIjoiRmFpbF81YjBxbyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRTdGFydFBvaW50X2JocmwyIiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkZhaWxfNWIwcW8iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0R2VzdHVyZUFuZ2xlX2RqcHI2IiwicG9ydCI6ImFuZ2xlIn0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9uM3FpZiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X24zcWlmIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlJvdXRlRGlyZWN0aW9uX2FwZ3NwIiwicG9ydCI6ImRlZ3JlZXMifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9uM3FpZiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRHZXN0dXJlQW5nbGVfZGpwcjYiLCJwb3J0IjoiY2xlYXIifSwibWV0YWRhdGEiOnsicm91dGUiOjB9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0SW5kaXZpZHVhbFBvaW50ZXJfb3pqZmEiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU3BsaXRQb2ludGVyX3YwdThrIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0UG9pbnRlcl92MHU4ayIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUG9pbnRlcl92MGVxdiIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU2VuZFBvaW50ZXJfdjBlcXYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0U3RhcnRQb2ludF9iaHJsMiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja01heERpc3RhbmNlX2NlYnE1IiwicG9ydCI6InBhc3MifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUG9pbnRlcl92MGVxdiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja01heERpc3RhbmNlX2NlYnE1IiwicG9ydCI6ImZhaWwifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsXzViMHFvIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX293eXliIiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkZhaWxfNWIwcW8iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRQb2ludGVyX3YwdThrIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX293eXliIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjowfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX293eXliIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrTWF4RGlzdGFuY2VfY2VicTUiLCJwb3J0IjoidmFsdWUifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7ImRhdGEiOiJzdGFydHBvaW50IiwidGd0Ijp7InByb2Nlc3MiOiJHZXRTdGFydFBvaW50X2JocmwyIiwicG9ydCI6ImtleSJ9fSx7ImRhdGEiOiJtb3ZlcG9pbnQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldEN1cnJlbnRQb2ludF9yd3d0MCIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoiZGlzdGFuY2UiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX293eXliIiwicG9ydCI6ImtleSJ9fSx7ImRhdGEiOiI8PSIsInRndCI6eyJwcm9jZXNzIjoiQ2hlY2tNYXhEaXN0YW5jZV9jZWJxNSIsInBvcnQiOiJvcGVyYXRvciJ9fV19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9pbmRleC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Ci8qCiAqIFRoaXMgZmlsZSBjYW4gYmUgdXNlZCBmb3IgZ2VuZXJhbCBsaWJyYXJ5IGZlYXR1cmVzIG9mIG5vZmxvLWdlc3R1cmVzLgogKgogKiBUaGUgbGlicmFyeSBmZWF0dXJlcyBjYW4gYmUgbWFkZSBhdmFpbGFibGUgYXMgQ29tbW9uSlMgbW9kdWxlcyB0aGF0IHRoZQogKiBjb21wb25lbnRzIGluIHRoaXMgcHJvamVjdCB1dGlsaXplLgogKi8KCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvRGV0ZWN0RHJhZy5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsiZW52aXJvbm1lbnQiOnsicnVudGltZSI6Imh0bWwiLCJzcmMiOiIuL3ByZXZpZXcvaWZyYW1lLmh0bWwiLCJ3aWR0aCI6IjMwMCIsImhlaWdodCI6IjMwMCIsImNvbnRlbnQiOiIifSwibmFtZSI6IkRldGVjdERyYWcifSwiZXhwb3J0cyI6W3sicHJpdmF0ZSI6InJlY2VpdmVnZXN0dXJlXzNid3lvLmluIiwicHVibGljIjoiaW4ifSx7InByaXZhdGUiOiJjaGVja21pbmRpc3RhbmNlX3pzeWhxLmNvbXBhcmlzb24iLCJwdWJsaWMiOiJkaXN0YW5jZSJ9LHsicHJpdmF0ZSI6InNlbmRwYXNzX2xza3hxLm91dCIsInB1YmxpYyI6InBhc3MifSx7InByaXZhdGUiOiJzZW5kZmFpbF82NG1tMi5vdXQiLCJwdWJsaWMiOiJmYWlsIn0seyJwcml2YXRlIjoiY2hlY2ttYXhzcGVlZF9zb2p0aS5jb21wYXJpc29uIiwicHVibGljIjoibWF4c3BlZWQifV0sInByb2Nlc3NlcyI6eyJSZWNlaXZlR2VzdHVyZV8zYnd5byI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOi02MDUsInkiOjgyLCJsYWJlbCI6IlJlY2VpdmVHZXN0dXJlIn19LCJjb3JlL1NwbGl0X3FmaG9tIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjotNjA1LCJ5IjoxNTksImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiU2VuZFBhc3NfbHNreHEiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTE0MywieSI6MjgsImxhYmVsIjoiU2VuZFBhc3MifX0sIlNlbmRGYWlsXzY0bW0yIjp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjExNDUsInkiOjMwNSwibGFiZWwiOiJTZW5kRmFpbCJ9fSwiRmFpbHVyZXNfMTNxOHMiOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjk0MSwieSI6MzExLCJsYWJlbCI6IkZhaWx1cmVzIn19LCJHZXREaXN0YW5jZV9iangwcyI6eyJjb21wb25lbnQiOiJvYmplY3RzL0dldE9iamVjdEtleSIsIm1ldGFkYXRhIjp7IngiOjUyNiwieSI6MTYxLCJsYWJlbCI6IkdldERpc3RhbmNlIn19LCJDaGVja01pbkRpc3RhbmNlX3pzeWhxIjp7ImNvbXBvbmVudCI6Im1hdGgvQ29tcGFyZSIsIm1ldGFkYXRhIjp7IngiOjkwMCwieSI6MTYwLCJsYWJlbCI6IkNoZWNrTWluRGlzdGFuY2UifX0sIkdldEluZGl2aWR1YWxQb2ludGVyX2h2OTN0Ijp7ImNvbXBvbmVudCI6Im9iamVjdHMvU3BsaXRPYmplY3QiLCJtZXRhZGF0YSI6eyJ4IjotNDEwLCJ5IjoxNTksImxhYmVsIjoiR2V0SW5kaXZpZHVhbFBvaW50ZXIifX0sIlNwbGl0RGlzdGFuY2VfdnJleWYiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjcxMS45OTk5OTk5OTk5OTk4LCJ5IjoxNjAsImxhYmVsIjoiU3BsaXREaXN0YW5jZSJ9fSwiU3BsaXRQb2ludGVyXzhybjlxIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjotMjIzLjUwMDAwMDAwMDAwMDgsInkiOjE1OS4xNjY2NjY2NjY2NjY2NiwibGFiZWwiOiJTcGxpdFBvaW50ZXIifX0sIlNlbmRQb2ludGVyX2I0dW52Ijp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjM0MC4zMzMzMzMzMzMzMzI4LCJ5IjoxNjAuMTY2NjY2NjY2NjY2NjksImxhYmVsIjoiU2VuZFBvaW50ZXIifX0sIkdldFNwZWVkX281NmZwIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6LTQwLjQ5OTk5OTk5OTk5OTc3LCJ5IjoxNTksImxhYmVsIjoiR2V0U3BlZWQifX0sIkNoZWNrTWF4U3BlZWRfc29qdGkiOnsiY29tcG9uZW50IjoibWF0aC9Db21wYXJlIiwibWV0YWRhdGEiOnsieCI6MTUwLjUwMDAwMDAwMDAwMDIzLCJ5IjoxNjEsImxhYmVsIjoiQ2hlY2tNYXhTcGVlZCJ9fX0sImNvbm5lY3Rpb25zIjpbeyJzcmMiOnsicHJvY2VzcyI6IlJlY2VpdmVHZXN0dXJlXzNid3lvIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfcWZob20iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9xZmhvbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kRmFpbF82NG1tMiIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9xZmhvbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUGFzc19sc2t4cSIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiRmFpbHVyZXNfMTNxOHMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZEZhaWxfNjRtbTIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0RGlzdGFuY2VfYmp4MHMiLCJwb3J0IjoibWlzc2VkIn0sInRndCI6eyJwcm9jZXNzIjoiRmFpbHVyZXNfMTNxOHMiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tNaW5EaXN0YW5jZV96c3locSIsInBvcnQiOiJmYWlsIn0sInRndCI6eyJwcm9jZXNzIjoiRmFpbHVyZXNfMTNxOHMiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9xZmhvbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRJbmRpdmlkdWFsUG9pbnRlcl9odjkzdCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9iangwcyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTcGxpdERpc3RhbmNlX3ZyZXlmIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0RGlzdGFuY2VfdnJleWYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQ2hlY2tNaW5EaXN0YW5jZV96c3locSIsInBvcnQiOiJ2YWx1ZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRJbmRpdmlkdWFsUG9pbnRlcl9odjkzdCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTcGxpdFBvaW50ZXJfOHJuOXEiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjh9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tNaW5EaXN0YW5jZV96c3locSIsInBvcnQiOiJwYXNzIn0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFBhc3NfbHNreHEiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiU2VuZFBvaW50ZXJfYjR1bnYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0RGlzdGFuY2VfYmp4MHMiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRQb2ludGVyXzhybjlxIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRQb2ludGVyX2I0dW52IiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja01heFNwZWVkX3NvanRpIiwicG9ydCI6InBhc3MifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUG9pbnRlcl9iNHVudiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRTcGVlZF9vNTZmcCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJDaGVja01heFNwZWVkX3NvanRpIiwicG9ydCI6InZhbHVlIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0UG9pbnRlcl84cm45cSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRTcGVlZF9vNTZmcCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OH19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRTcGVlZF9vNTZmcCIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsdXJlc18xM3E4cyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja01heFNwZWVkX3NvanRpIiwicG9ydCI6ImZhaWwifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsdXJlc18xM3E4cyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsiZGF0YSI6ImRpc3RhbmNlIiwidGd0Ijp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9iangwcyIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoiPj0iLCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrTWluRGlzdGFuY2VfenN5aHEiLCJwb3J0Ijoib3BlcmF0b3IifX0seyJkYXRhIjoiPD0iLCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrTWF4U3BlZWRfc29qdGkiLCJwb3J0Ijoib3BlcmF0b3IifX0seyJkYXRhIjoic3BlZWQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldFNwZWVkX281NmZwIiwicG9ydCI6ImtleSJ9fV19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvRGV0ZWN0U3dpcGUuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJwcm9wZXJ0aWVzIjp7ImVudmlyb25tZW50Ijp7InJ1bnRpbWUiOiJodG1sIiwic3JjIjoiLi9wcmV2aWV3L2lmcmFtZS5odG1sIiwid2lkdGgiOiIzMDAiLCJoZWlnaHQiOiIzMDAiLCJjb250ZW50IjoiIn0sIm5hbWUiOiJEZXRlY3RTd2lwZSJ9LCJleHBvcnRzIjpbeyJwcml2YXRlIjoicmVjZWl2ZWdlc3R1cmVfN2Z4YzMuaW4iLCJwdWJsaWMiOiJpbiJ9LHsicHJpdmF0ZSI6InNlbmRwYXNzX2l1YzIxLm91dCIsInB1YmxpYyI6InBhc3MifSx7InByaXZhdGUiOiJzZW5kZmFpbF9uOWlheS5vdXQiLCJwdWJsaWMiOiJmYWlsIn0seyJwcml2YXRlIjoiY2hlY2tzcGVlZF9jcnUyMS5jb21wYXJpc29uIiwicHVibGljIjoic3BlZWQifSx7InByaXZhdGUiOiJjaGVja2Rpc3RhbmNlXzc4NmNjLmNvbXBhcmlzb24iLCJwdWJsaWMiOiJkaXN0YW5jZSJ9XSwicHJvY2Vzc2VzIjp7IlJlY2VpdmVHZXN0dXJlXzdmeGMzIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6Mjc3LCJ5IjoxMjQsImxhYmVsIjoiUmVjZWl2ZUdlc3R1cmUifX0sIkdldEluZGl2aWR1YWxQb2ludGVyXzlvODc4Ijp7ImNvbXBvbmVudCI6Im9iamVjdHMvU3BsaXRPYmplY3QiLCJtZXRhZGF0YSI6eyJ4Ijo0NzMsInkiOjIxNywibGFiZWwiOiJHZXRJbmRpdmlkdWFsUG9pbnRlciJ9fSwiU2VuZFBhc3NfaXVjMjEiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MjA2MCwieSI6MTEzLCJsYWJlbCI6IlNlbmRQYXNzIn19LCJHZXRTcGVlZF8yNm42aCI6eyJjb21wb25lbnQiOiJvYmplY3RzL0dldE9iamVjdEtleSIsIm1ldGFkYXRhIjp7IngiOjg2MywieSI6MjE2LCJsYWJlbCI6IkdldFNwZWVkIn19LCJEZXRlY3Rpb25GYWlsZWRfdWo3b2giOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjE4NTAsInkiOjMzNywibGFiZWwiOiJEZXRlY3Rpb25GYWlsZWQifX0sImNvcmUvU3BsaXRfY2JqeXkiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjI3MywieSI6MjE2LCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sIlNlbmRGYWlsX245aWF5Ijp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjIwNjIsInkiOjMzNy4xNjY2NjY2NjY2NjY2MywibGFiZWwiOiJTZW5kRmFpbCJ9fSwiQ2hlY2tTcGVlZF9jcnUyMSI6eyJjb21wb25lbnQiOiJtYXRoL0NvbXBhcmUiLCJtZXRhZGF0YSI6eyJ4IjoxMDU1LjY2NjY2NjY2NjY2NjUsInkiOjIxNS42NjY2NjY2NjY2NjY2NiwibGFiZWwiOiJDaGVja1NwZWVkIn19LCJzdHJpbmdzL1NlbmRTdHJpbmdfNzVzZTYiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTI1MC42NjY2NjY2NjY2NjY1LCJ5IjoyMTYuNjY2NjY2NjY2NjY2NjYsImxhYmVsIjoic3RyaW5ncy9TZW5kU3RyaW5nIn19LCJHZXREaXN0YW5jZV96ZGp5ZiI6eyJjb21wb25lbnQiOiJvYmplY3RzL0dldE9iamVjdEtleSIsIm1ldGFkYXRhIjp7IngiOjE0NDUuNjY2NjY2NjY2NjY2NSwieSI6MjE1LjY2NjY2NjY2NjY2NjY2LCJsYWJlbCI6IkdldERpc3RhbmNlIn19LCJDaGVja0Rpc3RhbmNlXzc4NmNjIjp7ImNvbXBvbmVudCI6Im1hdGgvQ29tcGFyZSIsIm1ldGFkYXRhIjp7IngiOjE2NDgsInkiOjIxNiwibGFiZWwiOiJDaGVja0Rpc3RhbmNlIn19LCJjb3JlL1NwbGl0X3g2cDkzIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4Ijo2NjcuOTk5OTk5OTk5OTk4NiwieSI6MjE1LjY2NjY2NjY2NjY2NjYzLCJsYWJlbCI6ImNvcmUvU3BsaXQifX19LCJjb25uZWN0aW9ucyI6W3sic3JjIjp7InByb2Nlc3MiOiJHZXRTcGVlZF8yNm42aCIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJEZXRlY3Rpb25GYWlsZWRfdWo3b2giLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tTcGVlZF9jcnUyMSIsInBvcnQiOiJwYXNzIn0sInRndCI6eyJwcm9jZXNzIjoic3RyaW5ncy9TZW5kU3RyaW5nXzc1c2U2IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldFNwZWVkXzI2bjZoIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrU3BlZWRfY3J1MjEiLCJwb3J0IjoidmFsdWUifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tTcGVlZF9jcnUyMSIsInBvcnQiOiJmYWlsIn0sInRndCI6eyJwcm9jZXNzIjoiRGV0ZWN0aW9uRmFpbGVkX3VqN29oIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6InN0cmluZ3MvU2VuZFN0cmluZ183NXNlNiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV96ZGp5ZiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV96ZGp5ZiIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJEZXRlY3Rpb25GYWlsZWRfdWo3b2giLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tEaXN0YW5jZV83ODZjYyIsInBvcnQiOiJmYWlsIn0sInRndCI6eyJwcm9jZXNzIjoiRGV0ZWN0aW9uRmFpbGVkX3VqN29oIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX3pkanlmIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrRGlzdGFuY2VfNzg2Y2MiLCJwb3J0IjoidmFsdWUifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tEaXN0YW5jZV83ODZjYyIsInBvcnQiOiJwYXNzIn0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFBhc3NfaXVjMjEiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiRGV0ZWN0aW9uRmFpbGVkX3VqN29oIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRGYWlsX245aWF5IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IlJlY2VpdmVHZXN0dXJlXzdmeGMzIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfY2JqeXkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9jYmp5eSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUGFzc19pdWMyMSIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9jYmp5eSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kRmFpbF9uOWlheSIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9jYmp5eSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRJbmRpdmlkdWFsUG9pbnRlcl85bzg3OCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRJbmRpdmlkdWFsUG9pbnRlcl85bzg3OCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3g2cDkzIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfeDZwOTMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoic3RyaW5ncy9TZW5kU3RyaW5nXzc1c2U2IiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3g2cDkzIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldFNwZWVkXzI2bjZoIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJkYXRhIjoic3BlZWQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldFNwZWVkXzI2bjZoIiwicG9ydCI6ImtleSJ9fSx7ImRhdGEiOiJkaXN0YW5jZSIsInRndCI6eyJwcm9jZXNzIjoiR2V0RGlzdGFuY2VfemRqeWYiLCJwb3J0Ijoia2V5In19LHsiZGF0YSI6Ij49IiwidGd0Ijp7InByb2Nlc3MiOiJDaGVja1NwZWVkX2NydTIxIiwicG9ydCI6Im9wZXJhdG9yIn19LHsiZGF0YSI6Ij49IiwidGd0Ijp7InByb2Nlc3MiOiJDaGVja0Rpc3RhbmNlXzc4NmNjIiwicG9ydCI6Im9wZXJhdG9yIn19XX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RQaW5jaC5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsiZW52aXJvbm1lbnQiOnsicnVudGltZSI6Imh0bWwiLCJzcmMiOiIuL3ByZXZpZXcvaWZyYW1lLmh0bWwiLCJ3aWR0aCI6IjMwMCIsImhlaWdodCI6IjMwMCIsImNvbnRlbnQiOiIifSwibmFtZSI6IkRldGVjdFBpbmNoIn0sImV4cG9ydHMiOlt7InByaXZhdGUiOiJjb3JlL3NwbGl0X2V3YnJlLmluIiwicHVibGljIjoiaW4ifSx7InByaXZhdGUiOiJzZW5kcGFzc19jZjBwdS5vdXQiLCJwdWJsaWMiOiJwYXNzIn0seyJwcml2YXRlIjoic2VuZGZhaWxfdm1pNW4ub3V0IiwicHVibGljIjoiZmFpbCJ9XSwicHJvY2Vzc2VzIjp7ImNvcmUvU3BsaXRfZXdicmUiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjc0MCwieSI6MTUxLCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sIlNlbmRGYWlsX3ZtaTVuIjp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjE0MjMsInkiOjI1OSwibGFiZWwiOiJTZW5kRmFpbCJ9fSwiU2VuZFBhc3NfY2YwcHUiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTQyMSwieSI6NjUsImxhYmVsIjoiU2VuZFBhc3MifX0sIm9iamVjdHMvU2l6ZV9qam1tZyI6eyJjb21wb25lbnQiOiJvYmplY3RzL1NpemUiLCJtZXRhZGF0YSI6eyJ4Ijo5MzksInkiOjE1MCwibGFiZWwiOiJvYmplY3RzL1NpemUifX0sIm1hdGgvQ29tcGFyZV9oazNzdSI6eyJjb21wb25lbnQiOiJtYXRoL0NvbXBhcmUiLCJtZXRhZGF0YSI6eyJ4IjoxMTQ2LCJ5IjoxNDcsImxhYmVsIjoibWF0aC9Db21wYXJlIn19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoib2JqZWN0cy9TaXplX2pqbW1nIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Im1hdGgvQ29tcGFyZV9oazNzdSIsInBvcnQiOiJ2YWx1ZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJtYXRoL0NvbXBhcmVfaGszc3UiLCJwb3J0IjoicGFzcyJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRQYXNzX2NmMHB1IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Im1hdGgvQ29tcGFyZV9oazNzdSIsInBvcnQiOiJmYWlsIn0sInRndCI6eyJwcm9jZXNzIjoiU2VuZEZhaWxfdm1pNW4iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9ld2JyZSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kRmFpbF92bWk1biIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9ld2JyZSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUGFzc19jZjBwdSIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9ld2JyZSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJvYmplY3RzL1NpemVfamptbWciLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7ImRhdGEiOjEsInRndCI6eyJwcm9jZXNzIjoibWF0aC9Db21wYXJlX2hrM3N1IiwicG9ydCI6ImNvbXBhcmlzb24ifX0seyJkYXRhIjoiPiIsInRndCI6eyJwcm9jZXNzIjoibWF0aC9Db21wYXJlX2hrM3N1IiwicG9ydCI6Im9wZXJhdG9yIn19XX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9GaWx0ZXJCeVRhcmdldC5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsibmFtZSI6IkZpbHRlckJ5VGFyZ2V0In0sImV4cG9ydHMiOlt7InByaXZhdGUiOiJTdGFydEV2ZW50X3JqZzI0LmluIiwicHVibGljIjoic3RhcnRlZCJ9LHsicHJpdmF0ZSI6IkdldFRhcmdldF83Y2ZpbS5vYmplY3QiLCJwdWJsaWMiOiJzdGFydGV2ZW50In0seyJwcml2YXRlIjoiTW92ZUV2ZW50X3JldWhsLmluIiwicHVibGljIjoibW92ZSJ9LHsicHJpdmF0ZSI6IlZlcmlmeVRhcmdldF90eTNwNS5hY2NlcHQiLCJwdWJsaWMiOiJhY2NlcHQifSx7InByaXZhdGUiOiJUYXJnZXRFbGVtZW50Xzl0djg3Lm91dCIsInB1YmxpYyI6InRhcmdldCJ9LHsicHJpdmF0ZSI6Ik9uVGFyZ2V0X2w4NXg5Lm91dCIsInB1YmxpYyI6Im9udGFyZ2V0In0seyJwcml2YXRlIjoiQWxsb3dlZE1vdmVzX3k2dWx2Lm91dCIsInB1YmxpYyI6Im1vdmUifV0sInByb2Nlc3NlcyI6eyJHZXRUYXJnZXRfN2NmaW0iOnsiY29tcG9uZW50Ijoib2JqZWN0cy9HZXRPYmplY3RLZXkiLCJtZXRhZGF0YSI6eyJ4Ijo2MzQsInkiOjIxMCwibGFiZWwiOiJHZXRUYXJnZXQifX0sIk1vdmVFdmVudF9yZXVobCI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjQyNSwieSI6MzYyLCJsYWJlbCI6Ik1vdmVFdmVudCJ9fSwiU3BsaXRUYXJnZXRfc3FsZzAiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjgzNiwieSI6MjEyLCJsYWJlbCI6IlNwbGl0VGFyZ2V0In19LCJTdGFydEV2ZW50X3JqZzI0Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6NDI2LjAwMDAwMDAwMDAwMDA2LCJ5IjoyMTMsImxhYmVsIjoiU3RhcnRFdmVudCJ9fSwiVmVyaWZ5VGFyZ2V0X3R5M3A1Ijp7ImNvbXBvbmVudCI6Im9iamVjdHMvRmlsdGVyUHJvcGVydHlWYWx1ZSIsIm1ldGFkYXRhIjp7IngiOjEwNTEuMzMzMzMzMzMzMzMzNSwieSI6MjExLjMzMzMzMzMzMzMzMzMxLCJsYWJlbCI6IlZlcmlmeVRhcmdldCJ9fSwiQWxsb3dlZE1vdmVzX3k2dWx2Ijp7ImNvbXBvbmVudCI6ImZsb3cvR2F0ZSIsIm1ldGFkYXRhIjp7IngiOjE1MDguNjY2NjY2NjY2NjY2NSwieSI6MjEyLjUsImxhYmVsIjoiQWxsb3dlZE1vdmVzIn19LCJTcGxpdE9uVGFyZ2V0X3htaTY3Ijp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjoxMjc1LjgzMzMzMzMzMzMzNCwieSI6MjA5LjY2NjY2NjY2NjY2NjY5LCJsYWJlbCI6IlNwbGl0T25UYXJnZXQifX0sIk9uVGFyZ2V0X2w4NXg5Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTUwOS44MzMzMzMzMzMzMzQsInkiOjExOC42NjY2NjY2NjY2NjY2OSwibGFiZWwiOiJPblRhcmdldCJ9fSwiVGFyZ2V0RWxlbWVudF85dHY4NyI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjE1MDcuODMzMzMzMzMzMzM0LCJ5IjoyNi42NjY2NjY2NjY2NjY2ODYsImxhYmVsIjoiVGFyZ2V0RWxlbWVudCJ9fX0sImNvbm5lY3Rpb25zIjpbeyJzcmMiOnsicHJvY2VzcyI6IkdldFRhcmdldF83Y2ZpbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTcGxpdFRhcmdldF9zcWxnMCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTdGFydEV2ZW50X3JqZzI0IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldFRhcmdldF83Y2ZpbSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdFRhcmdldF9zcWxnMCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJWZXJpZnlUYXJnZXRfdHkzcDUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiTW92ZUV2ZW50X3JldWhsIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkFsbG93ZWRNb3Zlc195NnVsdiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6Mn19LHsic3JjIjp7InByb2Nlc3MiOiJWZXJpZnlUYXJnZXRfdHkzcDUiLCJwb3J0IjoibWlzc2VkIn0sInRndCI6eyJwcm9jZXNzIjoiQWxsb3dlZE1vdmVzX3k2dWx2IiwicG9ydCI6ImNsb3NlIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IlZlcmlmeVRhcmdldF90eTNwNSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTcGxpdE9uVGFyZ2V0X3htaTY3IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0T25UYXJnZXRfeG1pNjciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQWxsb3dlZE1vdmVzX3k2dWx2IiwicG9ydCI6Im9wZW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRPblRhcmdldF94bWk2NyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJPblRhcmdldF9sODV4OSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdFRhcmdldF9zcWxnMCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJUYXJnZXRFbGVtZW50Xzl0djg3IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJkYXRhIjoidGFyZ2V0IiwidGd0Ijp7InByb2Nlc3MiOiJHZXRUYXJnZXRfN2NmaW0iLCJwb3J0Ijoia2V5In19XX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9HZXN0dXJlVG9PYmplY3QuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJwcm9wZXJ0aWVzIjp7ImVudmlyb25tZW50Ijp7InJ1bnRpbWUiOiJodG1sIiwic3JjIjoiLi9wcmV2aWV3L2lmcmFtZS5odG1sIiwid2lkdGgiOiIzMDAiLCJoZWlnaHQiOiIzMDAiLCJjb250ZW50IjoiIn0sIm5hbWUiOiJCZWhhdmlvciJ9LCJleHBvcnRzIjpbeyJwcml2YXRlIjoibGlzdGVuZ2VzdHVyZXNfbnM4bGkuZWxlbWVudCIsInB1YmxpYyI6ImVsZW1lbnQifSx7InByaXZhdGUiOiJnZXN0dXJlZGF0YXRvb2JqZWN0X3loM3lxLm91dCIsInB1YmxpYyI6Im91dCJ9XSwicHJvY2Vzc2VzIjp7Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIjp7ImNvbXBvbmVudCI6Imdlc3R1cmVzL0xpc3Rlbkdlc3R1cmVzIiwibWV0YWRhdGEiOnsieCI6NjA5LCJ5IjoxMzksImxhYmVsIjoiTGlzdGVuR2VzdHVyZXMifX0sIkdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiOnsiY29tcG9uZW50IjoiZ3JvdXBzL0NvbGxlY3RPYmplY3QiLCJtZXRhZGF0YSI6eyJ4IjoxMjUyLCJ5IjoxNTksImxhYmVsIjoiR2VzdHVyZURhdGFUb09iamVjdCJ9fSwiU3BsaXRFbmRfYWtkcTEiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjg0Ny4xNjY2NjY2NjY2NjY3LCJ5Ijo4NS42NjY2NjY2NjY2NjY2NiwibGFiZWwiOiJTcGxpdEVuZCJ9fSwiQ2xlYXJPbkVuZF85dzlvIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0QXN5bmMiLCJtZXRhZGF0YSI6eyJ4IjoxMDUxLjE2NjY2NjY2NjY2NjcsInkiOjg4LjY2NjY2NjY2NjY2NjY2LCJsYWJlbCI6IkNsZWFyT25FbmQifX0sIlNwbGl0U3BlZWRfMmpua20iOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjg0OS41LCJ5IjoxNDcuNSwibGFiZWwiOiJTcGxpdFNwZWVkIn19LCJTcGxpdFN0YXJ0X2hyMnJ4Ijp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4Ijo4NDUuODMzMzMzMzMzMzMzLCJ5IjoyMy41MDAwMDAwMDAwMDAwMywibGFiZWwiOiJTcGxpdFN0YXJ0In19LCJSZWxlYXNlTW92ZU9yRW5kX2FoY3M1Ijp7ImNvbXBvbmVudCI6ImNvcmUvTWVyZ2UiLCJtZXRhZGF0YSI6eyJ4IjoxMDUwLjMzMzMzMzMzMzMzMjYsInkiOjE1Ny44MzMzMzMzMzMzMzMzMSwibGFiZWwiOiJSZWxlYXNlTW92ZU9yRW5kIn19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfYWtkcTEiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQ2xlYXJPbkVuZF85dzlvIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkNsZWFyT25FbmRfOXc5byIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNsZWFyIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImVuZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0RW5kX2FrZHExIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6InN0YXJ0In0sInRndCI6eyJwcm9jZXNzIjoiU3BsaXRTdGFydF9ocjJyeCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdFN0YXJ0X2hyMnJ4IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0IjoiY29sbGVjdCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5HZXN0dXJlc19uczhsaSIsInBvcnQiOiJzdGFydHBvaW50In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImVsZW1lbnRzIn0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo3fX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImFuZ2xlIn0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImRpc3RhbmNlIn0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0U3BlZWRfMmpua20iLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6Im1vdmVwb2ludCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0IjoiY29sbGVjdCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5HZXN0dXJlc19uczhsaSIsInBvcnQiOiJjdXJyZW50In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImR1cmF0aW9uIn0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0RW5kX2FrZHExIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0IjoiY29sbGVjdCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5HZXN0dXJlc19uczhsaSIsInBvcnQiOiJlbmRwb2ludCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0IjoiY29sbGVjdCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5HZXN0dXJlc19uczhsaSIsInBvcnQiOiJzcGVlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0U3BlZWRfMmpua20iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjh9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRTcGVlZF8yam5rbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJSZWxlYXNlTW92ZU9yRW5kX2FoY3M1IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo4fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0RW5kX2FrZHExIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlJlbGVhc2VNb3ZlT3JFbmRfYWhjczUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiUmVsZWFzZU1vdmVPckVuZF9haGNzNSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6InJlbGVhc2UifSwibWV0YWRhdGEiOnsicm91dGUiOjh9fSx7ImRhdGEiOiJlbGVtZW50cyIsInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJhbGxwYWNrZXRzIn19LHsiZGF0YSI6InN0YXJ0ZWxlbWVudCxzdGFydHBvaW50LGVsZW1lbnRzLGFuZ2xlLGRpc3RhbmNlLHNwZWVkLG1vdmVwb2ludCxjdXJyZW50LGR1cmF0aW9uLGVuZGVsZW1lbnQsZW5kcG9pbnQiLCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0Ijoia2V5cyJ9fV19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvTGlzdGVuR2VzdHVyZXMuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJwcm9wZXJ0aWVzIjp7ImVudmlyb25tZW50Ijp7InJ1bnRpbWUiOiJodG1sIiwic3JjIjoiLi9wcmV2aWV3L2lmcmFtZS5odG1sIiwid2lkdGgiOiIzMDAiLCJoZWlnaHQiOiIzMDAiLCJjb250ZW50IjoiIn0sIm5hbWUiOiJMaXN0ZW5HZXN0dXJlcyJ9LCJleHBvcnRzIjpbeyJwcml2YXRlIjoiZ2VzdHVyZXMvbGlzdGVucG9pbnRlcl84ZnRkMS5lbGVtZW50IiwicHVibGljIjoiZWxlbWVudCJ9LHsicHJpdmF0ZSI6Im1vdmVwb2ludF9mamx1ci5vdXQiLCJwdWJsaWMiOiJtb3ZlcG9pbnQifSx7InByaXZhdGUiOiJkaXN0YW5jZV9rd2szOS5vdXQiLCJwdWJsaWMiOiJkaXN0YW5jZSJ9LHsicHJpdmF0ZSI6Imdlc3R1cmVlbGVtZW50c195dm05bS5vdXQiLCJwdWJsaWMiOiJlbGVtZW50cyJ9LHsicHJpdmF0ZSI6ImFuZ2xlXzQzcXBvLm91dCIsInB1YmxpYyI6ImFuZ2xlIn0seyJwcml2YXRlIjoic3BlZWRfZTk5anEub3V0IiwicHVibGljIjoic3BlZWQifSx7InByaXZhdGUiOiJnZXRzdGFydGVsZW1lbnRfdzdtNjQub3V0IiwicHVibGljIjoic3RhcnQifSx7InByaXZhdGUiOiJzdGFydHBvaW50X3U4aW50Lm91dCIsInB1YmxpYyI6InN0YXJ0cG9pbnQifSx7InByaXZhdGUiOiJnZXRlbmRlbGVtZW50X3NsYnA5Lm91dCIsInB1YmxpYyI6ImVuZCJ9LHsicHJpdmF0ZSI6ImdldGVuZGluZ3BvaW50X2RldHRiLmNsaWVudCIsInB1YmxpYyI6ImVuZHBvaW50In0seyJwcml2YXRlIjoiY3VycmVudGVsZW1lbnRfY3UwcTUub3V0IiwicHVibGljIjoiY3VycmVudCJ9LHsicHJpdmF0ZSI6ImR1cmF0aW9uX3F5ZXZ2Lm91dCIsInB1YmxpYyI6ImR1cmF0aW9uIn1dLCJwcm9jZXNzZXMiOnsiR2VzdHVyZVN0YXJ0X3I4dnI1Ijp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4Ijo0NjYsInkiOi0zMSwibGFiZWwiOiJHZXN0dXJlU3RhcnQifX0sIkdldFN0YXJ0aW5nUG9pbnRfcGlkZnMiOnsiY29tcG9uZW50IjoiaW50ZXJhY3Rpb24vUmVhZENvb3JkaW5hdGVzIiwibWV0YWRhdGEiOnsieCI6NzY1LCJ5IjotMTkxLCJsYWJlbCI6IkdldFN0YXJ0aW5nUG9pbnQifX0sIkdldE1vdmVQb2ludF85ZGlhOSI6eyJjb21wb25lbnQiOiJpbnRlcmFjdGlvbi9SZWFkQ29vcmRpbmF0ZXMiLCJtZXRhZGF0YSI6eyJ4IjoxMzY4LCJ5IjoxMzYsImxhYmVsIjoiR2V0TW92ZVBvaW50In19LCJjb3JlL1NwbGl0X2JhZWViIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjoxNTYzLCJ5IjoxMzcsImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiY29yZS9TcGxpdF80ZHMxaCI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6OTczLCJ5IjotMTkxLCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sIkdlc3R1cmVBbmdsZV9kd2pqIjp7ImNvbXBvbmVudCI6Im1hdGgvQ2FsY3VsYXRlQW5nbGUiLCJtZXRhZGF0YSI6eyJ4IjoxOTM5LCJ5IjotMTI3LCJsYWJlbCI6Ikdlc3R1cmVBbmdsZSJ9fSwiR2VzdHVyZURpc3RhbmNlX2VzcWtjIjp7ImNvbXBvbmVudCI6Im1hdGgvQ2FsY3VsYXRlRGlzdGFuY2UiLCJtZXRhZGF0YSI6eyJ4IjoxOTM0LCJ5IjoyMCwibGFiZWwiOiJHZXN0dXJlRGlzdGFuY2UifX0sIkxhc3RNb3ZlX3A1eWo3Ijp7ImNvbXBvbmVudCI6ImNvcmUvS2ljayIsIm1ldGFkYXRhIjp7IngiOjEwNjIsInkiOjE3NiwibGFiZWwiOiJMYXN0TW92ZSJ9fSwiR2VzdHVyZUVuZF9xcXg4byI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6NDYwLCJ5IjoxNjIsImxhYmVsIjoiR2VzdHVyZUVuZCJ9fSwiR2VzdHVyZU1vdmVfaHk0NnMiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjQ2MywieSI6NjUsImxhYmVsIjoiR2VzdHVyZU1vdmUifX0sIkFsbFRvdWNoZWRFbGVtZW50c19pM3g3NCI6eyJjb21wb25lbnQiOiJwYWNrZXRzL1VuaXF1ZVBhY2tldCIsIm1ldGFkYXRhIjp7IngiOjE0NDUsInkiOjYsImxhYmVsIjoiQWxsVG91Y2hlZEVsZW1lbnRzIn19LCJHZXRNb3ZlRWxlbWVudF9pYWV4bSI6eyJjb21wb25lbnQiOiJvYmplY3RzL0dldE9iamVjdEtleSIsIm1ldGFkYXRhIjp7IngiOjEwNTksInkiOjYsImxhYmVsIjoiR2V0TW92ZUVsZW1lbnQifX0sIkdldFN0YXJ0RWxlbWVudF93N202NCI6eyJjb21wb25lbnQiOiJvYmplY3RzL0dldE9iamVjdEtleSIsIm1ldGFkYXRhIjp7IngiOjk2OCwieSI6LTQwNC42NjY2NjY2NjY2NjY2MywibGFiZWwiOiJHZXRTdGFydEVsZW1lbnQifX0sIk1vdmVEYXRlXzZiam5sIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvQ3JlYXRlRGF0ZSIsIm1ldGFkYXRhIjp7IngiOjIxNDUsInkiOjE2NCwibGFiZWwiOiJNb3ZlRGF0ZSJ9fSwiU3RhcnREYXRlX3N3Ynd1Ijp7ImNvbXBvbmVudCI6Im9iamVjdHMvQ3JlYXRlRGF0ZSIsIm1ldGFkYXRhIjp7IngiOjk2OCwieSI6LTI4MSwibGFiZWwiOiJTdGFydERhdGUifX0sIm1hdGgvU3VidHJhY3RfajV2MjAiOnsiY29tcG9uZW50IjoibWF0aC9TdWJ0cmFjdCIsIm1ldGFkYXRhIjp7IngiOjI1MTYsInkiOi0xOTMsImxhYmVsIjoibWF0aC9TdWJ0cmFjdCJ9fSwiU2V0U3RhcnRfcWw1MWMiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6NzY1LCJ5IjotMjg0LCJsYWJlbCI6IlNldFN0YXJ0In19LCJtYXRoL0RpdmlkZV94NGdjOCI6eyJjb21wb25lbnQiOiJtYXRoL0RpdmlkZSIsIm1ldGFkYXRhIjp7IngiOjI5MzksInkiOi0xOTksImxhYmVsIjoibWF0aC9EaXZpZGUifX0sImNvcmUvU3BsaXRfeDBhMTIiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjIxNTEsInkiOjIzLCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sIm9iamVjdHMvQ2FsbE1ldGhvZF9pdTdrMiI6eyJjb21wb25lbnQiOiJvYmplY3RzL0NhbGxNZXRob2QiLCJtZXRhZGF0YSI6eyJ4IjoyMzQ4LCJ5IjoxNjcsImxhYmVsIjoib2JqZWN0cy9DYWxsTWV0aG9kIn19LCJvYmplY3RzL0NhbGxNZXRob2RfcnRmZDIiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9DYWxsTWV0aG9kIiwibWV0YWRhdGEiOnsieCI6MjEzOSwieSI6LTI3NCwibGFiZWwiOiJvYmplY3RzL0NhbGxNZXRob2QifX0sIkRpc3RhbmNlX2t3azM5Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MjU4MCwieSI6MjAsImxhYmVsIjoiRGlzdGFuY2UifX0sIkdlc3R1cmVFbGVtZW50c195dm05bSI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjE2MzksInkiOjQsImxhYmVsIjoiR2VzdHVyZUVsZW1lbnRzIn19LCJBbmdsZV80M3FwbyI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjIzMTIsInkiOi0xMjEsImxhYmVsIjoiQW5nbGUifX0sIlNwZWVkX2U5OWpxIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MzM2MiwieSI6LTE3MSwibGFiZWwiOiJTcGVlZCJ9fSwiTW92ZVBvaW50X2ZqbHVyIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTkzOSwieSI6MjYyLCJsYWJlbCI6Ik1vdmVQb2ludCJ9fSwiU3RhcnRQb2ludF91OGludCI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjEzODIsInkiOi0xODksImxhYmVsIjoiU3RhcnRQb2ludCJ9fSwiZ2VzdHVyZXMvTGlzdGVuUG9pbnRlcl84ZnRkMSI6eyJjb21wb25lbnQiOiJnZXN0dXJlcy9MaXN0ZW5Qb2ludGVyIiwibWV0YWRhdGEiOnsieCI6MjEzLCJ5IjotMSwibGFiZWwiOiJnZXN0dXJlcy9MaXN0ZW5Qb2ludGVyIn19LCJHZXRFbmRFbGVtZW50X3NsYnA5Ijp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6MTM2Ny4zMzMzMzMzMzMzMzM1LCJ5IjoyODMuMzMzMzMzMzMzMzMzNSwibGFiZWwiOiJHZXRFbmRFbGVtZW50In19LCJjb3JlL1JlcGVhdEFzeW5jX2M1NnRqIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0QXN5bmMiLCJtZXRhZGF0YSI6eyJ4IjoxMDU4LjY2NjY2NjY2NjY2NywieSI6MzEyLjMzMzMzMzMzMzMzMzI2LCJsYWJlbCI6ImNvcmUvUmVwZWF0QXN5bmMifX0sInN0cmluZ3MvU2VuZFN0cmluZ190NmdieSI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4IjoxOTM1LCJ5IjoxNjYuMzMzMzMzMzMzMzMzMzcsImxhYmVsIjoic3RyaW5ncy9TZW5kU3RyaW5nIn19LCJncm91cHMvU2VuZEJ5R3JvdXBfejA2a2siOnsiY29tcG9uZW50IjoiZ3JvdXBzL1NlbmRCeUdyb3VwIiwibWV0YWRhdGEiOnsieCI6NTU2LCJ5IjotMTUxLjY2NjY2NjY2NjY2NjY5LCJsYWJlbCI6Imdyb3Vwcy9TZW5kQnlHcm91cCJ9fSwiY29yZS9TcGxpdF9la3hpaiI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6MzE1OC41LCJ5IjotMTY2LjMzMzMzMzMzMzMzMzQzLCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sImNvcmUvU3BsaXRfZXBoM2QiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjIxMjMuMzMzMzMzMzMzMzM0LCJ5IjotMTIyLjY2NjY2NjY2NjY2NjY5LCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sImNvcmUvU3BsaXRfM2VsZXAiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjI3MzEuMTY2NjY2NjY2NjY5NywieSI6LTE3MS44MzMzMzMzMzMzMzI1OCwibGFiZWwiOiJjb3JlL1NwbGl0In19LCJjb3JlL1NwbGl0XzhsM3l1Ijp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjoxMjUxLjMzMzMzMzMzMzMzMzMsInkiOjcuMTY2NjY2NjY2NjY2NjI5LCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sIkN1cnJlbnRFbGVtZW50X2N1MHE1Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTU5OS44MzMzMzMzMzMzMzMsInkiOi0xOTIuMDAwMDAwMDAwMDAwMDYsImxhYmVsIjoiQ3VycmVudEVsZW1lbnQifX0sIkR1cmF0aW9uX3F5ZXZ2Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MjkzNy44MzMzMzMzMzMzMzMsInkiOi0yOTUuODMzMzMzMzMzMzMzMjYsImxhYmVsIjoiRHVyYXRpb24ifX0sIkdldEVuZGluZ1BvaW50X2RldHRiIjp7ImNvbXBvbmVudCI6ImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlcyIsIm1ldGFkYXRhIjp7IngiOjcyNy44MzMzMzMzMzMzMzMxLCJ5IjozMzUuMzMzMzMzMzMzMzMzMywibGFiZWwiOiJHZXRFbmRpbmdQb2ludCJ9fSwiY29yZS9NZXJnZV82c28iOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjExOTYuNjY2NjY2NjY2NjY3LCJ5IjotMTg4Ljk5OTk5OTk5OTk5OTgzLCJsYWJlbCI6ImNvcmUvTWVyZ2UifX0sImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlc184MmNiMSI6eyJjb21wb25lbnQiOiJpbnRlcmFjdGlvbi9SZWFkQ29vcmRpbmF0ZXMiLCJtZXRhZGF0YSI6eyJ4Ijo3NjcuMzMzMzMzMzMzMzMzOSwieSI6LTg1LjgzMzMzMzMzMzMzMzE0LCJsYWJlbCI6ImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlcyJ9fSwiY29yZS9Ecm9wX3NhOHo1Ijp7ImNvbXBvbmVudCI6ImNvcmUvRHJvcCIsIm1ldGFkYXRhIjp7IngiOjE1OTYuODMzMzMzMzMzMzMzLCJ5IjozMjYuMDAwMDAwMDAwMDAwMSwibGFiZWwiOiJjb3JlL0Ryb3AifX0sImNvcmUvTWVyZ2VfbHF4bGwiOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjc2OC45OTk5OTk5OTk5OTk1LCJ5IjotNDAzLjY2NjY2NjY2NjY2NjYzLCJsYWJlbCI6ImNvcmUvTWVyZ2UifX0sImdyb3Vwcy9TZW5kQnlHcm91cF84eWFqIjp7ImNvbXBvbmVudCI6Imdyb3Vwcy9TZW5kQnlHcm91cCIsIm1ldGFkYXRhIjp7IngiOjExNjYuOTk5OTk5OTk5OTk5LCJ5IjotMjg2LjgzMzMzMzMzMzMzMzI2LCJsYWJlbCI6Imdyb3Vwcy9TZW5kQnlHcm91cCJ9fX0sImNvbm5lY3Rpb25zIjpbeyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfNGRzMWgiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZUFuZ2xlX2R3amoiLCJwb3J0Ijoib3JpZ2luIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfYmFlZWIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZUFuZ2xlX2R3amoiLCJwb3J0IjoiZGVzdGluYXRpb24ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF80ZHMxaCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGlzdGFuY2VfZXNxa2MiLCJwb3J0Ijoib3JpZ2luIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfYmFlZWIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURpc3RhbmNlX2VzcWtjIiwicG9ydCI6ImRlc3RpbmF0aW9uIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldE1vdmVQb2ludF85ZGlhOSIsInBvcnQiOiJjbGllbnQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2JhZWViIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldFN0YXJ0aW5nUG9pbnRfcGlkZnMiLCJwb3J0IjoiY2xpZW50In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF80ZHMxaCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTZXRTdGFydF9xbDUxYyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTdGFydERhdGVfc3did3UiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZURpc3RhbmNlX2VzcWtjIiwicG9ydCI6ImRpc3RhbmNlIn0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF94MGExMiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3gwYTEyIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Im1hdGgvRGl2aWRlX3g0Z2M4IiwicG9ydCI6ImRpdmlkZW5kIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6Im9iamVjdHMvQ2FsbE1ldGhvZF9pdTdrMiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJtYXRoL1N1YnRyYWN0X2o1djIwIiwicG9ydCI6Im1pbnVlbmQifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiTW92ZURhdGVfNmJqbmwiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoib2JqZWN0cy9DYWxsTWV0aG9kX2l1N2syIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfeDBhMTIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiRGlzdGFuY2Vfa3drMzkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiQWxsVG91Y2hlZEVsZW1lbnRzX2kzeDc0IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVFbGVtZW50c195dm05bSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2JhZWViIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ik1vdmVQb2ludF9mamx1ciIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJnZXN0dXJlcy9MaXN0ZW5Qb2ludGVyXzhmdGQxIiwicG9ydCI6ImVuZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVFbmRfcXF4OG8iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiZ2VzdHVyZXMvTGlzdGVuUG9pbnRlcl84ZnRkMSIsInBvcnQiOiJtb3ZlIn0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZU1vdmVfaHk0NnMiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiZ2VzdHVyZXMvTGlzdGVuUG9pbnRlcl84ZnRkMSIsInBvcnQiOiJzdGFydCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVTdGFydF9yOHZyNSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJMYXN0TW92ZV9wNXlqNyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRFbmRFbGVtZW50X3NsYnA5IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikdlc3R1cmVFbmRfcXF4OG8iLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiTGFzdE1vdmVfcDV5ajciLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZUVuZF9xcXg4byIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1JlcGVhdEFzeW5jX2M1NnRqIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfYmFlZWIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoic3RyaW5ncy9TZW5kU3RyaW5nX3Q2Z2J5IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6InN0cmluZ3MvU2VuZFN0cmluZ190NmdieSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJNb3ZlRGF0ZV82YmpubCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NH19LHsic3JjIjp7InByb2Nlc3MiOiJncm91cHMvU2VuZEJ5R3JvdXBfejA2a2siLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0U3RhcnRpbmdQb2ludF9waWRmcyIsInBvcnQiOiJldmVudCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlU3RhcnRfcjh2cjUiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiZ3JvdXBzL1NlbmRCeUdyb3VwX3owNmtrIiwicG9ydCI6ImRhdGEifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZU1vdmVfaHk0NnMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiZ3JvdXBzL1NlbmRCeUdyb3VwX3owNmtrIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6Ikdlc3R1cmVNb3ZlX2h5NDZzIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikxhc3RNb3ZlX3A1eWo3IiwicG9ydCI6ImRhdGEifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZU1vdmVfaHk0NnMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0TW92ZUVsZW1lbnRfaWFleG0iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZU1vdmVfaHk0NnMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0TW92ZVBvaW50XzlkaWE5IiwicG9ydCI6ImV2ZW50In0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfeDBhMTIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURpc3RhbmNlX2VzcWtjIiwicG9ydCI6ImNsZWFyIn0sIm1ldGFkYXRhIjp7InJvdXRlIjowfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfZWt4aWoiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU3BlZWRfZTk5anEiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjh9fSx7InNyYyI6eyJwcm9jZXNzIjoibWF0aC9EaXZpZGVfeDRnYzgiLCJwb3J0IjoicXVvdGllbnQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2VreGlqIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfZWt4aWoiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoibWF0aC9EaXZpZGVfeDRnYzgiLCJwb3J0IjoiY2xlYXIifSwibWV0YWRhdGEiOnsicm91dGUiOjB9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9SZXBlYXRBc3luY19jNTZ0aiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJBbGxUb3VjaGVkRWxlbWVudHNfaTN4NzQiLCJwb3J0IjoiY2xlYXIifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZUFuZ2xlX2R3amoiLCJwb3J0IjoiYW5nbGUifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2VwaDNkIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfZXBoM2QiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQW5nbGVfNDNxcG8iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9lcGgzZCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlQW5nbGVfZHdqaiIsInBvcnQiOiJjbGVhciJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MH19LHsic3JjIjp7InByb2Nlc3MiOiJtYXRoL1N1YnRyYWN0X2o1djIwIiwicG9ydCI6ImRpZmZlcmVuY2UifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0XzNlbGVwIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfM2VsZXAiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoibWF0aC9EaXZpZGVfeDRnYzgiLCJwb3J0IjoiZGl2aXNvciJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRNb3ZlRWxlbWVudF9pYWV4bSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0XzhsM3l1IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfOGwzeXUiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQWxsVG91Y2hlZEVsZW1lbnRzX2kzeDc0IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfOGwzeXUiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQ3VycmVudEVsZW1lbnRfY3UwcTUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF8zZWxlcCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJEdXJhdGlvbl9xeWV2diIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0XzNlbGVwIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Im1hdGgvU3VidHJhY3RfajV2MjAiLCJwb3J0IjoiY2xlYXIifSwibWV0YWRhdGEiOnsicm91dGUiOjB9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZUVuZF9xcXg4byIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRFbmRpbmdQb2ludF9kZXR0YiIsInBvcnQiOiJldmVudCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJvYmplY3RzL0NhbGxNZXRob2RfcnRmZDIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoibWF0aC9TdWJ0cmFjdF9qNXYyMCIsInBvcnQiOiJzdWJ0cmFoZW5kIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfNGRzMWgiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9NZXJnZV82c28iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9NZXJnZV82c28iLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU3RhcnRQb2ludF91OGludCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJpbnRlcmFjdGlvbi9SZWFkQ29vcmRpbmF0ZXNfODJjYjEiLCJwb3J0IjoiY2xpZW50In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9NZXJnZV82c28iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZVN0YXJ0X3I4dnI1IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlc184MmNiMSIsInBvcnQiOiJldmVudCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRFbmRFbGVtZW50X3NsYnA5IiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvRHJvcF9zYTh6NSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlU3RhcnRfcjh2cjUiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9NZXJnZV9scXhsbCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL01lcmdlX2xxeGxsIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldFN0YXJ0RWxlbWVudF93N202NCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJncm91cHMvU2VuZEJ5R3JvdXBfejA2a2siLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9NZXJnZV9scXhsbCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJncm91cHMvU2VuZEJ5R3JvdXBfOHlhaiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJvYmplY3RzL0NhbGxNZXRob2RfcnRmZDIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3RhcnREYXRlX3N3Ynd1IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Imdyb3Vwcy9TZW5kQnlHcm91cF84eWFqIiwicG9ydCI6ImRhdGEifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZVN0YXJ0X3I4dnI1IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNldFN0YXJ0X3FsNTFjIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Ikdlc3R1cmVNb3ZlX2h5NDZzIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Imdyb3Vwcy9TZW5kQnlHcm91cF84eWFqIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJkYXRhIjoidGFyZ2V0IiwidGd0Ijp7InByb2Nlc3MiOiJHZXRNb3ZlRWxlbWVudF9pYWV4bSIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoidGFyZ2V0IiwidGd0Ijp7InByb2Nlc3MiOiJHZXRTdGFydEVsZW1lbnRfdzdtNjQiLCJwb3J0Ijoia2V5In19LHsiZGF0YSI6Im5vdyIsInRndCI6eyJwcm9jZXNzIjoiU2V0U3RhcnRfcWw1MWMiLCJwb3J0Ijoic3RyaW5nIn19LHsiZGF0YSI6ImdldFRpbWUiLCJ0Z3QiOnsicHJvY2VzcyI6Im9iamVjdHMvQ2FsbE1ldGhvZF9pdTdrMiIsInBvcnQiOiJtZXRob2QifX0seyJkYXRhIjoiZ2V0VGltZSIsInRndCI6eyJwcm9jZXNzIjoib2JqZWN0cy9DYWxsTWV0aG9kX3J0ZmQyIiwicG9ydCI6Im1ldGhvZCJ9fSx7ImRhdGEiOiJ0YXJnZXQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldEVuZEVsZW1lbnRfc2xicDkiLCJwb3J0Ijoia2V5In19LHsiZGF0YSI6Im5vdyIsInRndCI6eyJwcm9jZXNzIjoic3RyaW5ncy9TZW5kU3RyaW5nX3Q2Z2J5IiwicG9ydCI6InN0cmluZyJ9fV19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvTGlzdGVuUG9pbnRlci5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsibmFtZSI6Ikxpc3RlblBvaW50ZXIifSwiZXhwb3J0cyI6W3sicHJpdmF0ZSI6Ikxpc3Rlbl8xMDI1Zy5lbGVtZW50IiwicHVibGljIjoiZWxlbWVudCJ9LHsicHJpdmF0ZSI6Ikxpc3Rlbl8xMDI1Zy5jYXB0dXJlIiwicHVibGljIjoiY2FwdHVyZSJ9LHsicHJpdmF0ZSI6IlN0YXJ0RXZlbnRfeDhpdHYub3V0IiwicHVibGljIjoic3RhcnQifSx7InByaXZhdGUiOiJNb3ZlRXZlbnRfcWEzcHAub3V0IiwicHVibGljIjoibW92ZSJ9LHsicHJpdmF0ZSI6IkVuZEV2ZW50X2htd3A5Lm91dCIsInB1YmxpYyI6ImVuZCJ9XSwicHJvY2Vzc2VzIjp7Ikxpc3Rlbl8xMDI1ZyI6eyJjb21wb25lbnQiOiJpbnRlcmFjdGlvbi9MaXN0ZW5Qb2ludGVyIiwibWV0YWRhdGEiOnsieCI6NTAwLCJ5IjotNjUsImxhYmVsIjoiTGlzdGVuIn19LCJFbmRfdm9tMjIiOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjg0MywieSI6OTYsImxhYmVsIjoiRW5kIn19LCJTdGFydF84NnUzZyI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6ODQ4LCJ5IjotMTU3LCJsYWJlbCI6IlN0YXJ0In19LCJNb3ZlT25seUR1cmluZ0dlc3R1cmVfOTg2enQiOnsiY29tcG9uZW50IjoiZmxvdy9HYXRlIiwibWV0YWRhdGEiOnsieCI6MTEwNiwieSI6LTQwLCJsYWJlbCI6Ik1vdmVPbmx5RHVyaW5nR2VzdHVyZSJ9fSwiRW5kT25seU9uY2VfdmV4Zm4iOnsiY29tcG9uZW50IjoiZmxvdy9HYXRlIiwibWV0YWRhdGEiOnsieCI6MTEwNywieSI6NzUsImxhYmVsIjoiRW5kT25seU9uY2UifX0sIlNwbGl0RW5kX2NuZnk2Ijp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjoxNDA3LCJ5Ijo3OSwibGFiZWwiOiJTcGxpdEVuZCJ9fSwiQXN5bmNocm9uaXplX3gwaHFtIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0QXN5bmMiLCJtZXRhZGF0YSI6eyJ4IjoxNDA0LCJ5IjoxNzEuMzMzMzMzMzMzMzMzMzEsImxhYmVsIjoiQXN5bmNocm9uaXplIn19LCJTdGFydEV2ZW50X3g4aXR2Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTY2MiwieSI6LTE2MiwibGFiZWwiOiJTdGFydEV2ZW50In19LCJNb3ZlRXZlbnRfcWEzcHAiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoxNjYyLCJ5IjotMzUsImxhYmVsIjoiTW92ZUV2ZW50In19LCJFbmRFdmVudF9obXdwOSI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjE2NTksInkiOjc1LCJsYWJlbCI6IkVuZEV2ZW50In19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuXzEwMjVnIiwicG9ydCI6ImxlYXZlIn0sInRndCI6eyJwcm9jZXNzIjoiRW5kX3ZvbTIyIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbl8xMDI1ZyIsInBvcnQiOiJjYW5jZWwifSwidGd0Ijp7InByb2Nlc3MiOiJFbmRfdm9tMjIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuXzEwMjVnIiwicG9ydCI6InVwIn0sInRndCI6eyJwcm9jZXNzIjoiRW5kX3ZvbTIyIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbl8xMDI1ZyIsInBvcnQiOiJkb3duIn0sInRndCI6eyJwcm9jZXNzIjoiU3RhcnRfODZ1M2ciLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuXzEwMjVnIiwicG9ydCI6Im1vdmUifSwidGd0Ijp7InByb2Nlc3MiOiJNb3ZlT25seUR1cmluZ0dlc3R1cmVfOTg2enQiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiRW5kX3ZvbTIyIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkVuZE9ubHlPbmNlX3ZleGZuIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkVuZE9ubHlPbmNlX3ZleGZuIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0RW5kX2NuZnk2IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IlN0YXJ0Xzg2dTNnIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkVuZE9ubHlPbmNlX3ZleGZuIiwicG9ydCI6Im9wZW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfY25meTYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQXN5bmNocm9uaXplX3gwaHFtIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkFzeW5jaHJvbml6ZV94MGhxbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJFbmRPbmx5T25jZV92ZXhmbiIsInBvcnQiOiJjbG9zZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJTdGFydF84NnUzZyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJNb3ZlT25seUR1cmluZ0dlc3R1cmVfOTg2enQiLCJwb3J0Ijoib3BlbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdEVuZF9jbmZ5NiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJNb3ZlT25seUR1cmluZ0dlc3R1cmVfOTg2enQiLCJwb3J0IjoiY2xvc2UifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3RhcnRfODZ1M2ciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU3RhcnRFdmVudF94OGl0diIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJNb3ZlT25seUR1cmluZ0dlc3R1cmVfOTg2enQiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiTW92ZUV2ZW50X3FhM3BwIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0RW5kX2NuZnk2IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkVuZEV2ZW50X2htd3A5IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX1dfScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdENhcmRpbmFsRGlyZWN0aW9uLmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sicHJvcGVydGllcyI6eyJlbnZpcm9ubWVudCI6eyJydW50aW1lIjoiaHRtbCIsInNyYyI6Ii4vcHJldmlldy9pZnJhbWUuaHRtbCIsIndpZHRoIjoiMzAwIiwiaGVpZ2h0IjoiMzAwIiwiY29udGVudCI6IiJ9LCJuYW1lIjoiRGV0ZWN0Q2FyZGluYWxEaXJlY3Rpb24ifSwiZXhwb3J0cyI6W3sicHJpdmF0ZSI6InJlY2VpdmVnZXN0dXJlX3RoYm13LmluIiwicHVibGljIjoiaW4ifSx7InByaXZhdGUiOiJzZW5kZWFzdF8yMThxeC5vdXQiLCJwdWJsaWMiOiJlYXN0In0seyJwcml2YXRlIjoic2VuZHNvdXRoX3d4MmI1Lm91dCIsInB1YmxpYyI6InNvdXRoIn0seyJwcml2YXRlIjoic2VuZHdlc3Rfcmtkejkub3V0IiwicHVibGljIjoid2VzdCJ9LHsicHJpdmF0ZSI6InNlbmRub3J0aF9jNTYyay5vdXQiLCJwdWJsaWMiOiJub3J0aCJ9LHsicHJpdmF0ZSI6ImZhaWxfNWIwcW8ub3V0IiwicHVibGljIjoiZmFpbCJ9LHsicHJpdmF0ZSI6ImNoZWNrbWF4ZGlzdGFuY2VfY2VicTUuY29tcGFyaXNvbiIsInB1YmxpYyI6Im1heGRpc3RhbmNlIn1dLCJwcm9jZXNzZXMiOnsiUmVjZWl2ZUdlc3R1cmVfdGhibXciOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjotMjk0LCJ5IjoxMzQsImxhYmVsIjoiUmVjZWl2ZUdlc3R1cmUifX0sIlNwbGl0R2VzdHVyZV9ka2s4NyI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6LTI5NiwieSI6MjE0LCJsYWJlbCI6IlNwbGl0R2VzdHVyZSJ9fSwiU2VuZE5vcnRoX2M1NjJrIjp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjE3MzMsInkiOjQ0NywibGFiZWwiOiJTZW5kTm9ydGgifX0sIlNlbmRFYXN0XzIxOHF4Ijp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjE3MjEsInkiOi01LCJsYWJlbCI6IlNlbmRFYXN0In19LCJSb3V0ZURpcmVjdGlvbl9hcGdzcCI6eyJjb21wb25lbnQiOiJnZXN0dXJlcy9DYXJkaW5hbFJvdXRlciIsIm1ldGFkYXRhIjp7IngiOjE0NjksInkiOjE5NSwibGFiZWwiOiJSb3V0ZURpcmVjdGlvbiJ9fSwiR2V0SW5kaXZpZHVhbFBvaW50ZXJfb3pqZmEiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9TcGxpdE9iamVjdCIsIm1ldGFkYXRhIjp7IngiOi04NiwieSI6MjE0LCJsYWJlbCI6IkdldEluZGl2aWR1YWxQb2ludGVyIn19LCJHZXRTdGFydFBvaW50X2JocmwyIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6ODc5LCJ5IjoxNTcsImxhYmVsIjoiR2V0U3RhcnRQb2ludCJ9fSwiR2V0Q3VycmVudFBvaW50X3J3d3QwIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6ODc3LCJ5IjoyNTksImxhYmVsIjoiR2V0Q3VycmVudFBvaW50In19LCJHZXRHZXN0dXJlQW5nbGVfZGpwcjYiOnsiY29tcG9uZW50IjoibWF0aC9DYWxjdWxhdGVBbmdsZSIsIm1ldGFkYXRhIjp7IngiOjEwODMsInkiOjE5MywibGFiZWwiOiJHZXRHZXN0dXJlQW5nbGUifX0sIlNlbmRXZXN0X3JrZHo5Ijp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjE3MzAuODMzMzMzMzMzMzMzMywieSI6MzQ4LjMzMzMzMzMzMzMzMzM3LCJsYWJlbCI6IlNlbmRXZXN0In19LCJTZW5kU291dGhfd3gyYjUiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTcyMS44MzMzMzMzMzMzMzMzLCJ5IjoxMDcuMzMzMzMzMzMzMzMzMzcsImxhYmVsIjoiU2VuZFNvdXRoIn19LCJGYWlsXzViMHFvIjp7ImNvbXBvbmVudCI6ImNvcmUvTWVyZ2UiLCJtZXRhZGF0YSI6eyJ4IjoxNzM4LjE2NjY2NjY2NjY2NjUsInkiOjU2NCwibGFiZWwiOiJGYWlsIn19LCJjb3JlL1NwbGl0X24zcWlmIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjoxMjc2Ljk5OTk5OTk5OTk5OSwieSI6MTkzLjY2NjY2NjY2NjY2NjY5LCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sIkdldERpc3RhbmNlX293eXliIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6MzA0LCJ5IjoyMTYsImxhYmVsIjoiR2V0RGlzdGFuY2UifX0sIkNoZWNrTWF4RGlzdGFuY2VfY2VicTUiOnsiY29tcG9uZW50IjoibWF0aC9Db21wYXJlIiwibWV0YWRhdGEiOnsieCI6NDk5LCJ5IjoyMTQsImxhYmVsIjoiQ2hlY2tNYXhEaXN0YW5jZSJ9fSwiU2VuZFBvaW50ZXJfdjBlcXYiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6Njg4LCJ5IjoyMTQsImxhYmVsIjoiU2VuZFBvaW50ZXIifX0sIlNwbGl0UG9pbnRlcl92MHU4ayI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6MTA5LjAwMDAwMDAwMDAwMDA2LCJ5IjoyMTUuMzMzMzMzMzMzMzMzMzEsImxhYmVsIjoiU3BsaXRQb2ludGVyIn19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoiR2V0U3RhcnRQb2ludF9iaHJsMiIsInBvcnQiOiJvYmplY3QifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRDdXJyZW50UG9pbnRfcnd3dDAiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0U3RhcnRQb2ludF9iaHJsMiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRHZXN0dXJlQW5nbGVfZGpwcjYiLCJwb3J0Ijoib3JpZ2luIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldEN1cnJlbnRQb2ludF9yd3d0MCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRHZXN0dXJlQW5nbGVfZGpwcjYiLCJwb3J0IjoiZGVzdGluYXRpb24ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRHZXN0dXJlX2Rrazg3IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRFYXN0XzIxOHF4IiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdEdlc3R1cmVfZGtrODciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFdlc3RfcmtkejkiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0R2VzdHVyZV9ka2s4NyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kTm9ydGhfYzU2MmsiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0R2VzdHVyZV9ka2s4NyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kU291dGhfd3gyYjUiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlJvdXRlRGlyZWN0aW9uX2FwZ3NwIiwicG9ydCI6Im4ifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kTm9ydGhfYzU2MmsiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjR9fSx7InNyYyI6eyJwcm9jZXNzIjoiUm91dGVEaXJlY3Rpb25fYXBnc3AiLCJwb3J0IjoidyJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRXZXN0X3JrZHo5IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlJvdXRlRGlyZWN0aW9uX2FwZ3NwIiwicG9ydCI6InMifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kU291dGhfd3gyYjUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjZ9fSx7InNyYyI6eyJwcm9jZXNzIjoiUm91dGVEaXJlY3Rpb25fYXBnc3AiLCJwb3J0IjoiZSJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRFYXN0XzIxOHF4IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo3fX0seyJzcmMiOnsicHJvY2VzcyI6IlJlY2VpdmVHZXN0dXJlX3RoYm13IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0R2VzdHVyZV9ka2s4NyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdEdlc3R1cmVfZGtrODciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0SW5kaXZpZHVhbFBvaW50ZXJfb3pqZmEiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0Q3VycmVudFBvaW50X3J3d3QwIiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkZhaWxfNWIwcW8iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0U3RhcnRQb2ludF9iaHJsMiIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsXzViMHFvIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldEdlc3R1cmVBbmdsZV9kanByNiIsInBvcnQiOiJhbmdsZSJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfbjNxaWYiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9uM3FpZiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJSb3V0ZURpcmVjdGlvbl9hcGdzcCIsInBvcnQiOiJkZWdyZWVzIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfbjNxaWYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0R2VzdHVyZUFuZ2xlX2RqcHI2IiwicG9ydCI6ImNsZWFyIn0sIm1ldGFkYXRhIjp7InJvdXRlIjowfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldEluZGl2aWR1YWxQb2ludGVyX296amZhIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0UG9pbnRlcl92MHU4ayIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdFBvaW50ZXJfdjB1OGsiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFBvaW50ZXJfdjBlcXYiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNlbmRQb2ludGVyX3YwZXF2IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldFN0YXJ0UG9pbnRfYmhybDIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tNYXhEaXN0YW5jZV9jZWJxNSIsInBvcnQiOiJwYXNzIn0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFBvaW50ZXJfdjBlcXYiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tNYXhEaXN0YW5jZV9jZWJxNSIsInBvcnQiOiJmYWlsIn0sInRndCI6eyJwcm9jZXNzIjoiRmFpbF81YjBxbyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9vd3l5YiIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsXzViMHFvIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0UG9pbnRlcl92MHU4ayIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9vd3l5YiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MH19LHsic3JjIjp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9vd3l5YiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJDaGVja01heERpc3RhbmNlX2NlYnE1IiwicG9ydCI6InZhbHVlIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJkYXRhIjoic3RhcnRwb2ludCIsInRndCI6eyJwcm9jZXNzIjoiR2V0U3RhcnRQb2ludF9iaHJsMiIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoibW92ZXBvaW50IiwidGd0Ijp7InByb2Nlc3MiOiJHZXRDdXJyZW50UG9pbnRfcnd3dDAiLCJwb3J0Ijoia2V5In19LHsiZGF0YSI6ImRpc3RhbmNlIiwidGd0Ijp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9vd3l5YiIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoiPD0iLCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrTWF4RGlzdGFuY2VfY2VicTUiLCJwb3J0Ijoib3BlcmF0b3IifX1dfScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ2VzdHVyZXMvY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvLWdlc3R1cmVzIiwiZGVzY3JpcHRpb24iOiJHZXN0dXJlIHJlY29nbml0aW9uIGNvbXBvbmVudHMgZm9yIE5vRmxvIiwiYXV0aG9yIjoiSGVucmkgQmVyZ2l1cyA8aGVucmkuYmVyZ2l1c0Bpa2kuZmk+IiwicmVwbyI6Im5vZmxvL25vZmxvLWdlc3R1cmVzIiwidmVyc2lvbiI6IjAuMS4wIiwia2V5d29yZHMiOltdLCJkZXBlbmRlbmNpZXMiOnsibm9mbG8vbm9mbG8iOiIqIiwibm9mbG8vbm9mbG8taW50ZXJhY3Rpb24iOiIqIiwibm9mbG8vbm9mbG8tbWF0aCI6IioiLCJub2Zsby9ub2Zsby1mbG93IjoiKiIsIm5vZmxvL25vZmxvLWdyb3VwcyI6IioiLCJub2Zsby9ub2Zsby1wYWNrZXRzIjoiKiIsIm5vZmxvL25vZmxvLW9iamVjdHMiOiIqIiwibm9mbG8vbm9mbG8tZG9tIjoiKiIsIm5vZmxvL25vZmxvLXN0cmluZ3MiOiIqIiwibm9mbG8vbm9mbG8tY29yZSI6IioifSwic2NyaXB0cyI6WyJjb21wb25lbnRzL0NhbGN1bGF0ZUNlbnRlci5jb2ZmZWUiLCJjb21wb25lbnRzL0NhbGN1bGF0ZVNjYWxlLmNvZmZlZSIsImNvbXBvbmVudHMvQ2FyZGluYWxSb3V0ZXIuY29mZmVlIiwiY29tcG9uZW50cy9EZWdyZWVzVG9DYXJkaW5hbC5jb2ZmZWUiLCJjb21wb25lbnRzL0RlZ3JlZXNUb0NvbXBhc3MuY29mZmVlIiwiY29tcG9uZW50cy9EZXRlY3RTY3JhdGNoLmNvZmZlZSIsImNvbXBvbmVudHMvRGV0ZWN0VGFyZ2V0LmNvZmZlZSIsImdyYXBocy9EZXRlY3REcmFnLmpzb24iLCJncmFwaHMvRGV0ZWN0U3dpcGUuanNvbiIsImdyYXBocy9EZXRlY3RQaW5jaC5qc29uIiwiZ3JhcGhzL0ZpbHRlckJ5VGFyZ2V0Lmpzb24iLCJncmFwaHMvR2VzdHVyZVRvT2JqZWN0Lmpzb24iLCJncmFwaHMvTGlzdGVuR2VzdHVyZXMuanNvbiIsImdyYXBocy9MaXN0ZW5Qb2ludGVyLmpzb24iLCJncmFwaHMvRGV0ZWN0Q2FyZGluYWxEaXJlY3Rpb24uanNvbiIsImluZGV4LmpzIl0sImpzb24iOlsiZ3JhcGhzL0RldGVjdERyYWcuanNvbiIsImdyYXBocy9EZXRlY3RTd2lwZS5qc29uIiwiZ3JhcGhzL0RldGVjdFBpbmNoLmpzb24iLCJncmFwaHMvRmlsdGVyQnlUYXJnZXQuanNvbiIsImdyYXBocy9HZXN0dXJlVG9PYmplY3QuanNvbiIsImdyYXBocy9MaXN0ZW5HZXN0dXJlcy5qc29uIiwiZ3JhcGhzL0xpc3RlblBvaW50ZXIuanNvbiIsImdyYXBocy9EZXRlY3RDYXJkaW5hbERpcmVjdGlvbi5qc29uIiwiY29tcG9uZW50Lmpzb24iXSwibm9mbG8iOnsiaWNvbiI6ImhhbmQtcmlnaHQiLCJjb21wb25lbnRzIjp7IkNhbGN1bGF0ZUNlbnRlciI6ImNvbXBvbmVudHMvQ2FsY3VsYXRlQ2VudGVyLmNvZmZlZSIsIkNhbGN1bGF0ZVNjYWxlIjoiY29tcG9uZW50cy9DYWxjdWxhdGVTY2FsZS5jb2ZmZWUiLCJDYXJkaW5hbFJvdXRlciI6ImNvbXBvbmVudHMvQ2FyZGluYWxSb3V0ZXIuY29mZmVlIiwiRGVncmVlc1RvQ2FyZGluYWwiOiJjb21wb25lbnRzL0RlZ3JlZXNUb0NhcmRpbmFsLmNvZmZlZSIsIkRlZ3JlZXNUb0NvbXBhc3MiOiJjb21wb25lbnRzL0RlZ3JlZXNUb0NvbXBhc3MuY29mZmVlIiwiRGV0ZWN0U2NyYXRjaCI6ImNvbXBvbmVudHMvRGV0ZWN0U2NyYXRjaC5jb2ZmZWUiLCJEZXRlY3RUYXJnZXQiOiJjb21wb25lbnRzL0RldGVjdFRhcmdldC5jb2ZmZWUifSwiZ3JhcGhzIjp7IkRldGVjdERyYWciOiJncmFwaHMvRGV0ZWN0RHJhZy5qc29uIiwiRGV0ZWN0U3dpcGUiOiJncmFwaHMvRGV0ZWN0U3dpcGUuanNvbiIsIkRldGVjdFBpbmNoIjoiZ3JhcGhzL0RldGVjdFBpbmNoLmpzb24iLCJGaWx0ZXJCeVRhcmdldCI6ImdyYXBocy9GaWx0ZXJCeVRhcmdldC5qc29uIiwiR2VzdHVyZVRvT2JqZWN0IjoiZ3JhcGhzL0dlc3R1cmVUb09iamVjdC5qc29uIiwiTGlzdGVuR2VzdHVyZXMiOiJncmFwaHMvTGlzdGVuR2VzdHVyZXMuanNvbiIsIkxpc3RlblBvaW50ZXIiOiJncmFwaHMvTGlzdGVuUG9pbnRlci5qc29uIiwiRGV0ZWN0Q2FyZGluYWxEaXJlY3Rpb24iOiJncmFwaHMvRGV0ZWN0Q2FyZGluYWxEaXJlY3Rpb24uanNvbiJ9fX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvQ2FsY3VsYXRlQ2VudGVyLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIENhbGN1bGF0ZUNlbnRlciwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpDYWxjdWxhdGVDZW50ZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENhbGN1bGF0ZUNlbnRlciwgX3N1cGVyKTsKCiAgQ2FsY3VsYXRlQ2VudGVyLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdDYWxjdWxhdGUgdGhlIGNlbnRlciBwb2ludCBmb3IgYSBnZXN0dXJlJzsKCiAgZnVuY3Rpb24gQ2FsY3VsYXRlQ2VudGVyKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgY2VudGVyOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihnZXN0dXJlKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5jZW50ZXIuc2VuZChfdGhpcy5jYWxjdWxhdGVDZW50ZXIoZ2VzdHVyZSkpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmNlbnRlci5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIENhbGN1bGF0ZUNlbnRlci5wcm90b3R5cGUuY2FsY3VsYXRlQ2VudGVyID0gZnVuY3Rpb24oZ2VzdHVyZSkgewogICAgdmFyIGNlbnRlciwgaWQsIHN0YXJ0WCwgc3RhcnRZLCB0b3VjaDsKICAgIGlmIChPYmplY3Qua2V5cyhnZXN0dXJlKS5sZW5ndGggPT09IDEpIHsKICAgICAgcmV0dXJuIGdlc3R1cmUuc3RhcnRwb2ludDsKICAgIH0KICAgIHN0YXJ0WCA9IFtdOwogICAgc3RhcnRZID0gW107CiAgICBmb3IgKGlkIGluIGdlc3R1cmUpIHsKICAgICAgdG91Y2ggPSBnZXN0dXJlW2lkXTsKICAgICAgaWYgKCF0b3VjaCkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmICghdG91Y2guc3RhcnRwb2ludCkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIHN0YXJ0WC5wdXNoKHRvdWNoLnN0YXJ0cG9pbnQueCk7CiAgICAgIHN0YXJ0WS5wdXNoKHRvdWNoLnN0YXJ0cG9pbnQueSk7CiAgICB9CiAgICByZXR1cm4gY2VudGVyID0gewogICAgICB4OiBNYXRoLm1pbi5hcHBseShNYXRoLCBzdGFydFgpICsgTWF0aC5tYXguYXBwbHkoTWF0aCwgc3RhcnRYKSAvIDIsCiAgICAgIHk6IE1hdGgubWluLmFwcGx5KE1hdGgsIHN0YXJ0WSkgKyBNYXRoLm1heC5hcHBseShNYXRoLCBzdGFydFkpIC8gMgogICAgfTsKICB9OwoKICByZXR1cm4gQ2FsY3VsYXRlQ2VudGVyOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDYWxjdWxhdGVDZW50ZXI7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ2VzdHVyZXMvY29tcG9uZW50cy9DYWxjdWxhdGVTY2FsZS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDYWxjdWxhdGVTY2FsZSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpDYWxjdWxhdGVTY2FsZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQ2FsY3VsYXRlU2NhbGUsIF9zdXBlcik7CgogIENhbGN1bGF0ZVNjYWxlLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdDYWxjdWxhdGUgdGhlIHNjYWxlIGJhc2VkIG9uIGdlc3R1cmFsIG1vdmVtZW50JzsKCiAgZnVuY3Rpb24gQ2FsY3VsYXRlU2NhbGUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBzY2FsZTogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZ2VzdHVyZSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuc2NhbGUuc2VuZChfdGhpcy5jYWxjdWxhdGVTY2FsZShnZXN0dXJlKSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuc2NhbGUuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBDYWxjdWxhdGVTY2FsZS5wcm90b3R5cGUuY2FsY3VsYXRlU2NhbGUgPSBmdW5jdGlvbihnZXN0dXJlKSB7CiAgICB2YXIgaWQsIG1vdmVQb2ludHMsIHNjYWxlLCBzdGFydFBvaW50cywgdG91Y2g7CiAgICBpZiAoT2JqZWN0LmtleXMoZ2VzdHVyZSkubGVuZ3RoID09PSAxKSB7CiAgICAgIHJldHVybiAxOwogICAgfQogICAgc3RhcnRQb2ludHMgPSBbXTsKICAgIG1vdmVQb2ludHMgPSBbXTsKICAgIGZvciAoaWQgaW4gZ2VzdHVyZSkgewogICAgICB0b3VjaCA9IGdlc3R1cmVbaWRdOwogICAgICBpZiAodG91Y2guc3RhcnRwb2ludCkgewogICAgICAgIHN0YXJ0UG9pbnRzLnB1c2godG91Y2guc3RhcnRwb2ludCk7CiAgICAgIH0KICAgICAgaWYgKHRvdWNoLm1vdmVwb2ludCkgewogICAgICAgIG1vdmVQb2ludHMucHVzaCh0b3VjaC5tb3ZlcG9pbnQpOwogICAgICB9CiAgICB9CiAgICBpZiAoc3RhcnRQb2ludHMubGVuZ3RoIDwgMiB8fCBtb3ZlUG9pbnRzLmxlbmd0aCA8IDIpIHsKICAgICAgcmV0dXJuIDE7CiAgICB9CiAgICBzY2FsZSA9IHRoaXMuY2FsY3VsYXRlRGlzdGFuY2UobW92ZVBvaW50c1swXSwgbW92ZVBvaW50c1sxXSkgLyB0aGlzLmNhbGN1bGF0ZURpc3RhbmNlKHN0YXJ0UG9pbnRzWzBdLCBzdGFydFBvaW50c1sxXSk7CiAgICByZXR1cm4gc2NhbGU7CiAgfTsKCiAgQ2FsY3VsYXRlU2NhbGUucHJvdG90eXBlLmNhbGN1bGF0ZURpc3RhbmNlID0gZnVuY3Rpb24ob3JpZ2luLCBkZXN0aW5hdGlvbikgewogICAgdmFyIGRlbHRhWCwgZGVsdGFZLCBkaXN0YW5jZTsKICAgIGRlbHRhWCA9IGRlc3RpbmF0aW9uLnggLSBvcmlnaW4ueDsKICAgIGRlbHRhWSA9IGRlc3RpbmF0aW9uLnkgLSBvcmlnaW4ueTsKICAgIG9yaWdpbiA9IG51bGw7CiAgICBkZXN0aW5hdGlvbiA9IG51bGw7CiAgICBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhkZWx0YVgsIDIpICsgTWF0aC5wb3coZGVsdGFZLCAyKSk7CiAgICByZXR1cm4gZGlzdGFuY2U7CiAgfTsKCiAgcmV0dXJuIENhbGN1bGF0ZVNjYWxlOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDYWxjdWxhdGVTY2FsZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0NhcmRpbmFsUm91dGVyLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIENhcmRpbmFsUm91dGVyLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkNhcmRpbmFsUm91dGVyID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhDYXJkaW5hbFJvdXRlciwgX3N1cGVyKTsKCiAgQ2FyZGluYWxSb3V0ZXIucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1JvdXRlIHZhbHVlcyBiYXNlZCBvbiB0aGVpciBjYXJkaW5hbCBkaXJlY3Rpb25zJzsKCiAgQ2FyZGluYWxSb3V0ZXIucHJvdG90eXBlLmljb24gPSAnY29tcGFzcyc7CgogIGZ1bmN0aW9uIENhcmRpbmFsUm91dGVyKCkgewogICAgdmFyIGhlYWRpbmdzLAogICAgICBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIGRlZ3JlZXM6IG5ldyBub2Zsby5Qb3J0KCdudW1iZXInKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIGU6IG5ldyBub2Zsby5Qb3J0KCdudW1iZXInKSwKICAgICAgczogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpLAogICAgICB3OiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyksCiAgICAgIG46IG5ldyBub2Zsby5Qb3J0KCdudW1iZXInKQogICAgfTsKICAgIGhlYWRpbmdzID0gWydlJywgJ3MnLCAndycsICduJ107CiAgICB0aGlzLmluUG9ydHMuZGVncmVlcy5vbignZGF0YScsIGZ1bmN0aW9uKGRlZ3JlZXMpIHsKICAgICAgdmFyIGhlYWRpbmcsIGluZGV4OwogICAgICBpbmRleCA9IGRlZ3JlZXMgLSA0NTsKICAgICAgaWYgKGluZGV4IDwgMCkgewogICAgICAgIGluZGV4ID0gaW5kZXggKyAzNjA7CiAgICAgIH0KICAgICAgaW5kZXggPSBwYXJzZUludChpbmRleCAvIDkwKTsKICAgICAgaGVhZGluZyA9IGhlYWRpbmdzW2luZGV4XTsKICAgICAgaWYgKCFfdGhpcy5vdXRQb3J0c1toZWFkaW5nXS5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgX3RoaXMub3V0UG9ydHNbaGVhZGluZ10uc2VuZChkZWdyZWVzKTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzW2hlYWRpbmddLmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIENhcmRpbmFsUm91dGVyOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDYXJkaW5hbFJvdXRlcjsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RlZ3JlZXNUb0NhcmRpbmFsLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIERlZ3JlZXNUb0NhcmRpbmFsLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkRlZ3JlZXNUb0NhcmRpbmFsID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhEZWdyZWVzVG9DYXJkaW5hbCwgX3N1cGVyKTsKCiAgRGVncmVlc1RvQ2FyZGluYWwucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NvbnZlcnQgYSBoZWFkaW5nIGluIGRlZ3JlZXMgdG8gYSBjYXJkaW5hbCBkaXJlY3Rpb24sIGUuZy4gTiwgUyc7CgogIERlZ3JlZXNUb0NhcmRpbmFsLnByb3RvdHlwZS5pY29uID0gJ2NvbXBhc3MnOwoKICBmdW5jdGlvbiBEZWdyZWVzVG9DYXJkaW5hbCgpIHsKICAgIHZhciBoZWFkaW5ncywKICAgICAgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBkZWdyZWVzOiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBoZWFkaW5nOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICBoZWFkaW5ncyA9IFsnRScsICdTJywgJ1cnLCAnTiddOwogICAgdGhpcy5pblBvcnRzLmRlZ3JlZXMub24oJ2RhdGEnLCBmdW5jdGlvbihkZWdyZWVzKSB7CiAgICAgIHZhciBpbmRleDsKICAgICAgaW5kZXggPSBkZWdyZWVzIC0gNDU7CiAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICBpbmRleCA9IGluZGV4ICsgMzYwOwogICAgICB9CiAgICAgIGluZGV4ID0gcGFyc2VJbnQoaW5kZXggLyA5MCk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5oZWFkaW5nLnNlbmQoaGVhZGluZ3NbaW5kZXhdKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmRlZ3JlZXMub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmhlYWRpbmcuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gRGVncmVlc1RvQ2FyZGluYWw7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IERlZ3JlZXNUb0NhcmRpbmFsOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvRGVncmVlc1RvQ29tcGFzcy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBEZWdyZWVzVG9Db21wYXNzLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkRlZ3JlZXNUb0NvbXBhc3MgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKERlZ3JlZXNUb0NvbXBhc3MsIF9zdXBlcik7CgogIERlZ3JlZXNUb0NvbXBhc3MucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NvbnZlcnQgYSBoZWFkaW5nIGluIGRlZ3JlZXMgdG8gYSBjb21wYXNzIGRpcmVjdGlvbiwgZS5nLiBOLCBTVyc7CgogIERlZ3JlZXNUb0NvbXBhc3MucHJvdG90eXBlLmljb24gPSAnY29tcGFzcyc7CgogIGZ1bmN0aW9uIERlZ3JlZXNUb0NvbXBhc3MoKSB7CiAgICB2YXIgaGVhZGluZ3MsCiAgICAgIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZGVncmVlczogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgaGVhZGluZzogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgaGVhZGluZ3MgPSBbJ05FJywgJ0UnLCAnU0UnLCAnUycsICdTVycsICdXJywgJ05XJywgJ04nXTsKICAgIHRoaXMuaW5Qb3J0cy5kZWdyZWVzLm9uKCdkYXRhJywgZnVuY3Rpb24oZGVncmVlcykgewogICAgICB2YXIgaW5kZXg7CiAgICAgIGluZGV4ID0gZGVncmVlcyAtIDIyLjU7CiAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICBpbmRleCA9IGluZGV4ICsgMzYwOwogICAgICB9CiAgICAgIGluZGV4ID0gcGFyc2VJbnQoaW5kZXggLyA0NSk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5oZWFkaW5nLnNlbmQoaGVhZGluZ3NbaW5kZXhdKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmRlZ3JlZXMub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmhlYWRpbmcuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gRGVncmVlc1RvQ29tcGFzczsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRGVncmVlc1RvQ29tcGFzczsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RldGVjdFNjcmF0Y2guanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRGV0ZWN0U2NyYXRjaCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpEZXRlY3RTY3JhdGNoID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhEZXRlY3RTY3JhdGNoLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBEZXRlY3RTY3JhdGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMubWludHVybnMgPSAzOwogICAgdGhpcy5kaXN0YW5jZSA9IDIwOwogICAgdGhpcy5taW5TcGVlZCA9IDA7CiAgICB0aGlzLnByZXZQb2ludCA9IG51bGw7CiAgICB0aGlzLnByZXZBbmdsZSA9IG51bGw7CiAgICB0aGlzLnByZXZUaW1lID0gbnVsbDsKICAgIHRoaXMuc3BlZWRDaGVja2VkID0gZmFsc2U7CiAgICB0aGlzLnR1cm5zID0gMDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBkaXN0YW5jZTogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpLAogICAgICBzcGVlZDogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgcGFzczogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBmYWlsOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPiAxKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMuZmFpbC5zZW5kKGRhdGEpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuZGV0ZWN0KGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLm91dFBvcnRzLnBhc3MuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuZmFpbC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5kaXN0YW5jZS5vbignZGF0YScsIGZ1bmN0aW9uKGRpc3RhbmNlKSB7CiAgICAgIF90aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5zcGVlZC5vbignZGF0YScsIGZ1bmN0aW9uKG1pblNwZWVkKSB7CiAgICAgIF90aGlzLm1pblNwZWVkID0gbWluU3BlZWQ7CiAgICB9KTsKICB9CgogIERldGVjdFNjcmF0Y2gucHJvdG90eXBlLmRldGVjdCA9IGZ1bmN0aW9uKGdlc3R1cmUpIHsKICAgIHZhciBhbmdsZSwgZGlzdGFuY2UsIGVsYXBzZWQsIHNwZWVkLCB0aW1lLCB0b3VjaCwgdHVybjsKICAgIHRvdWNoID0gZ2VzdHVyZVtPYmplY3Qua2V5cyhnZXN0dXJlKVswXV07CiAgICBpZiAodG91Y2guZW5kcG9pbnQpIHsKICAgICAgdGhpcy5yZXNldCgpOwogICAgICB0aGlzLm91dFBvcnRzLmZhaWwuc2VuZChnZXN0dXJlKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCF0aGlzLnByZXZQb2ludCkgewogICAgICB0aGlzLnByZXZQb2ludCA9IHRvdWNoLnN0YXJ0cG9pbnQ7CiAgICAgIHRoaXMucHJldlRpbWUgPSBuZXcgRGF0ZTsKICAgICAgcmV0dXJuOwogICAgfQogICAgZGlzdGFuY2UgPSB0aGlzLmNhbGN1bGF0ZURpc3RhbmNlKHRoaXMucHJldlBvaW50LCB0b3VjaC5tb3ZlcG9pbnQpOwogICAgaWYgKGRpc3RhbmNlIDwgdGhpcy5kaXN0YW5jZSkgewogICAgICByZXR1cm47CiAgICB9CiAgICB0aW1lID0gbmV3IERhdGU7CiAgICBpZiAoIXRoaXMuc3BlZWRDaGVja2VkKSB7CiAgICAgIGVsYXBzZWQgPSB0aW1lLmdldFRpbWUoKSAtIHRoaXMucHJldlRpbWUuZ2V0VGltZSgpOwogICAgICBzcGVlZCA9IGRpc3RhbmNlIC8gZWxhcHNlZDsKICAgICAgaWYgKHNwZWVkIDwgdGhpcy5taW5TcGVlZCkgewogICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICB0aGlzLm91dFBvcnRzLmZhaWwuc2VuZChnZXN0dXJlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5zcGVlZENoZWNrZWQgPSB0cnVlOwogICAgfQogICAgYW5nbGUgPSB0aGlzLmNhbGN1bGF0ZUFuZ2xlKHRoaXMucHJldlBvaW50LCB0b3VjaC5tb3ZlcG9pbnQpOwogICAgaWYgKCF0aGlzLnByZXZBbmdsZSkgewogICAgICB0aGlzLnByZXZBbmdsZSA9IGFuZ2xlOwogICAgICByZXR1cm47CiAgICB9CiAgICB0dXJuID0gTWF0aC5hYnModGhpcy5hbmdsZUNoYW5nZSh0aGlzLnByZXZBbmdsZSwgYW5nbGUpKTsKICAgIHRoaXMucHJldlBvaW50ID0gdG91Y2gubW92ZXBvaW50OwogICAgdGhpcy5wcmV2QW5nbGUgPSBhbmdsZTsKICAgIGlmICghKHR1cm4gPiAxMzApKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMucHJldlRpbWUgPSB0aW1lOwogICAgdGhpcy50dXJucysrOwogICAgaWYgKHRoaXMudHVybnMgPj0gdGhpcy5taW50dXJucykgewogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHJldHVybiB0aGlzLm91dFBvcnRzLnBhc3Muc2VuZChnZXN0dXJlKTsKICAgIH0KICB9OwoKICBEZXRlY3RTY3JhdGNoLnByb3RvdHlwZS5jYWxjdWxhdGVEaXN0YW5jZSA9IGZ1bmN0aW9uKG9yaWdpbiwgZGVzdGluYXRpb24pIHsKICAgIHZhciBkZWx0YVgsIGRlbHRhWSwgZGlzdGFuY2U7CiAgICBkZWx0YVggPSBkZXN0aW5hdGlvbi54IC0gb3JpZ2luLng7CiAgICBkZWx0YVkgPSBkZXN0aW5hdGlvbi55IC0gb3JpZ2luLnk7CiAgICBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhkZWx0YVgsIDIpICsgTWF0aC5wb3coZGVsdGFZLCAyKSk7CiAgICByZXR1cm4gZGlzdGFuY2U7CiAgfTsKCiAgRGV0ZWN0U2NyYXRjaC5wcm90b3R5cGUuY2FsY3VsYXRlQW5nbGUgPSBmdW5jdGlvbihvcmlnaW4sIGRlc3RpbmF0aW9uKSB7CiAgICB2YXIgYW5nbGUsIGRlbHRhWCwgZGVsdGFZOwogICAgZGVsdGFYID0gZGVzdGluYXRpb24ueCAtIG9yaWdpbi54OwogICAgZGVsdGFZID0gZGVzdGluYXRpb24ueSAtIG9yaWdpbi55OwogICAgYW5nbGUgPSAoTWF0aC5hdGFuMihkZWx0YVksIGRlbHRhWCkgKiAxODAgLyBNYXRoLlBJKSArIDkwOwogICAgaWYgKGFuZ2xlIDwgMCkgewogICAgICBhbmdsZSA9IGFuZ2xlICsgMzYwOwogICAgfQogICAgcmV0dXJuIGFuZ2xlOwogIH07CgogIERldGVjdFNjcmF0Y2gucHJvdG90eXBlLmFuZ2xlQ2hhbmdlID0gZnVuY3Rpb24ocHJldmlvdXMsIGN1cnJlbnQpIHsKICAgIHZhciBkaWZmZXJlbmNlOwogICAgZGlmZmVyZW5jZSA9IGN1cnJlbnQgLSBwcmV2aW91czsKICAgIHdoaWxlIChkaWZmZXJlbmNlIDwgLTE4MCkgewogICAgICBkaWZmZXJlbmNlICs9IDM2MDsKICAgIH0KICAgIHdoaWxlIChkaWZmZXJlbmNlID4gMTgwKSB7CiAgICAgIGRpZmZlcmVuY2UgLT0gMzYwOwogICAgfQogICAgcmV0dXJuIGRpZmZlcmVuY2U7CiAgfTsKCiAgRGV0ZWN0U2NyYXRjaC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHsKICAgIHRoaXMudHVybnMgPSAwOwogICAgdGhpcy5wcmV2UG9pbnQgPSBudWxsOwogICAgdGhpcy5wcmV2QW5nbGUgPSBudWxsOwogICAgdGhpcy5wcmV2VGltZSA9IG51bGw7CiAgICByZXR1cm4gdGhpcy5zcGVlZENoZWNrZWQgPSBmYWxzZTsKICB9OwoKICByZXR1cm4gRGV0ZWN0U2NyYXRjaDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRGV0ZWN0U2NyYXRjaDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RldGVjdFRhcmdldC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBEZXRlY3RUYXJnZXQsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKRGV0ZWN0VGFyZ2V0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhEZXRlY3RUYXJnZXQsIF9zdXBlcik7CgogIERldGVjdFRhcmdldC5wcm90b3R5cGUuZGVzY3JpYmUgPSAnVmVyaWZ5IHRoYXQgdGhlIGdlc3R1cmUgdGFyZ2V0IGhhcyB0aGUgcmlnaHQgcHJvcGVydGllcyc7CgogIGZ1bmN0aW9uIERldGVjdFRhcmdldCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnRhcmdldCA9IG51bGw7CiAgICB0aGlzLmtleSA9ICdjdXJyZW50JzsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBrZXk6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKSwKICAgICAgdGFyZ2V0OiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJyksCiAgICAgIGNsZWFyOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgcGFzczogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBmYWlsOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIHRhcmdldDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLnRhcmdldC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIHBhcnRzOwogICAgICBwYXJ0cyA9IGRhdGEuc3BsaXQoJz0nKTsKICAgICAgaWYgKCFfdGhpcy50YXJnZXQpIHsKICAgICAgICBfdGhpcy50YXJnZXQgPSB7fTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMudGFyZ2V0W3BhcnRzWzBdXSA9IHBhcnRzWzFdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMua2V5Lm9uKCdkYXRhJywgZnVuY3Rpb24oa2V5KSB7CiAgICAgIF90aGlzLmtleSA9IGtleTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmNsZWFyLm9uKCdkYXRhJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy50YXJnZXQgPSBudWxsOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBlbGVtZW50LCBwYXNzZWQsIHRvdWNoOwogICAgICBpZiAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID4gMSkgewogICAgICAgIHBhc3NlZCA9IHRydWU7CiAgICAgICAgZm9yICh0b3VjaCBpbiBkYXRhKSB7CiAgICAgICAgICBlbGVtZW50ID0gZGF0YVt0b3VjaF07CiAgICAgICAgICBpZiAoIV90aGlzLmRldGVjdFRhcmdldChlbGVtZW50KSkgewogICAgICAgICAgICBwYXNzZWQgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHBhc3NlZCkgewogICAgICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnRhcmdldC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICAgICAgX3RoaXMub3V0UG9ydHMudGFyZ2V0LnNlbmQoZGF0YVtPYmplY3Qua2V5cyhkYXRhKVswXV1bX3RoaXMua2V5XSk7CiAgICAgICAgICB9CiAgICAgICAgICBfdGhpcy5vdXRQb3J0cy5wYXNzLnNlbmQoZGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLm91dFBvcnRzLmZhaWwuc2VuZChkYXRhKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5kZXRlY3RUYXJnZXQoZGF0YVtPYmplY3Qua2V5cyhkYXRhKVswXV0pKSB7CiAgICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnRhcmdldC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICAgIF90aGlzLm91dFBvcnRzLnRhcmdldC5zZW5kKGRhdGFbT2JqZWN0LmtleXMoZGF0YSlbMF1dW190aGlzLmtleV0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMucGFzcy5zZW5kKGRhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5mYWlsLnNlbmQoZGF0YSk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLm91dFBvcnRzLnBhc3MuZGlzY29ubmVjdCgpOwogICAgICBfdGhpcy5vdXRQb3J0cy5mYWlsLmRpc2Nvbm5lY3QoKTsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnRhcmdldC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMudGFyZ2V0LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgfSk7CiAgfQoKICBEZXRlY3RUYXJnZXQucHJvdG90eXBlLmRldGVjdFRhcmdldCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgIHZhciBrZXksIHZhbHVlLCBfcmVmOwogICAgaWYgKCFlbGVtZW50W3RoaXMua2V5XSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBfcmVmID0gdGhpcy50YXJnZXQ7CiAgICBmb3IgKGtleSBpbiBfcmVmKSB7CiAgICAgIHZhbHVlID0gX3JlZltrZXldOwogICAgICBpZiAoZWxlbWVudFt0aGlzLmtleV1ba2V5XSAhPT0gdmFsdWUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0cnVlOwogIH07CgogIHJldHVybiBEZXRlY3RUYXJnZXQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IERldGVjdFRhcmdldDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2luZGV4LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKLyoKICogVGhpcyBmaWxlIGNhbiBiZSB1c2VkIGZvciBnZW5lcmFsIGxpYnJhcnkgZmVhdHVyZXMgb2Ygb2JqZWN0cy4KICoKICogVGhlIGxpYnJhcnkgZmVhdHVyZXMgY2FuIGJlIG1hZGUgYXZhaWxhYmxlIGFzIENvbW1vbkpTIG1vZHVsZXMgdGhhdCB0aGUKICogY29tcG9uZW50cyBpbiB0aGlzIHByb2plY3QgdXRpbGl6ZS4KICovCgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnQuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJuYW1lIjoibm9mbG8tb2JqZWN0cyIsImRlc2NyaXB0aW9uIjoiT2JqZWN0IFV0aWxpdGllcyBmb3IgTm9GbG8iLCJ2ZXJzaW9uIjoiMC4xLjAiLCJrZXl3b3JkcyI6WyJub2ZsbyIsIm9iamVjdHMiLCJ1dGlsaXRpZXMiXSwiYXV0aG9yIjoiS2VubmV0aCBLYW4gPGtlbmhrYW5AZ21haWwuY29tPiIsInJlcG8iOiJub2Zsby9vYmplY3RzIiwiZGVwZW5kZW5jaWVzIjp7Im5vZmxvL25vZmxvIjoiKiIsImNvbXBvbmVudC91bmRlcnNjb3JlIjoiKiJ9LCJzY3JpcHRzIjpbImNvbXBvbmVudHMvRXh0ZW5kLmNvZmZlZSIsImNvbXBvbmVudHMvTWVyZ2VPYmplY3RzLmNvZmZlZSIsImNvbXBvbmVudHMvU3BsaXRPYmplY3QuY29mZmVlIiwiY29tcG9uZW50cy9SZXBsYWNlS2V5LmNvZmZlZSIsImNvbXBvbmVudHMvS2V5cy5jb2ZmZWUiLCJjb21wb25lbnRzL1NpemUuY29mZmVlIiwiY29tcG9uZW50cy9WYWx1ZXMuY29mZmVlIiwiY29tcG9uZW50cy9Kb2luLmNvZmZlZSIsImNvbXBvbmVudHMvRXh0cmFjdFByb3BlcnR5LmNvZmZlZSIsImNvbXBvbmVudHMvSW5zZXJ0UHJvcGVydHkuY29mZmVlIiwiY29tcG9uZW50cy9TbGljZUFycmF5LmNvZmZlZSIsImNvbXBvbmVudHMvU3BsaXRBcnJheS5jb2ZmZWUiLCJjb21wb25lbnRzL0ZpbHRlclByb3BlcnR5VmFsdWUuY29mZmVlIiwiY29tcG9uZW50cy9GbGF0dGVuT2JqZWN0LmNvZmZlZSIsImNvbXBvbmVudHMvTWFwUHJvcGVydHkuY29mZmVlIiwiY29tcG9uZW50cy9SZW1vdmVQcm9wZXJ0eS5jb2ZmZWUiLCJjb21wb25lbnRzL01hcFByb3BlcnR5VmFsdWUuY29mZmVlIiwiY29tcG9uZW50cy9HZXRPYmplY3RLZXkuY29mZmVlIiwiY29tcG9uZW50cy9VbmlxdWVBcnJheS5jb2ZmZWUiLCJjb21wb25lbnRzL1NldFByb3BlcnR5LmNvZmZlZSIsImNvbXBvbmVudHMvU2ltcGxpZnlPYmplY3QuY29mZmVlIiwiY29tcG9uZW50cy9EdXBsaWNhdGVQcm9wZXJ0eS5jb2ZmZWUiLCJjb21wb25lbnRzL0NyZWF0ZU9iamVjdC5jb2ZmZWUiLCJjb21wb25lbnRzL0NyZWF0ZURhdGUuY29mZmVlIiwiY29tcG9uZW50cy9TZXRQcm9wZXJ0eVZhbHVlLmNvZmZlZSIsImNvbXBvbmVudHMvQ2FsbE1ldGhvZC5jb2ZmZWUiLCJpbmRleC5qcyJdLCJqc29uIjpbImNvbXBvbmVudC5qc29uIl0sIm5vZmxvIjp7Imljb24iOiJsaXN0IiwiY29tcG9uZW50cyI6eyJFeHRlbmQiOiJjb21wb25lbnRzL0V4dGVuZC5jb2ZmZWUiLCJNZXJnZU9iamVjdHMiOiJjb21wb25lbnRzL01lcmdlT2JqZWN0cy5jb2ZmZWUiLCJTcGxpdE9iamVjdCI6ImNvbXBvbmVudHMvU3BsaXRPYmplY3QuY29mZmVlIiwiUmVwbGFjZUtleSI6ImNvbXBvbmVudHMvUmVwbGFjZUtleS5jb2ZmZWUiLCJLZXlzIjoiY29tcG9uZW50cy9LZXlzLmNvZmZlZSIsIlNpemUiOiJjb21wb25lbnRzL1NpemUuY29mZmVlIiwiVmFsdWVzIjoiY29tcG9uZW50cy9WYWx1ZXMuY29mZmVlIiwiSm9pbiI6ImNvbXBvbmVudHMvSm9pbi5jb2ZmZWUiLCJFeHRyYWN0UHJvcGVydHkiOiJjb21wb25lbnRzL0V4dHJhY3RQcm9wZXJ0eS5jb2ZmZWUiLCJJbnNlcnRQcm9wZXJ0eSI6ImNvbXBvbmVudHMvSW5zZXJ0UHJvcGVydHkuY29mZmVlIiwiU2xpY2VBcnJheSI6ImNvbXBvbmVudHMvU2xpY2VBcnJheS5jb2ZmZWUiLCJTcGxpdEFycmF5IjoiY29tcG9uZW50cy9TcGxpdEFycmF5LmNvZmZlZSIsIkZpbHRlclByb3BlcnR5VmFsdWUiOiJjb21wb25lbnRzL0ZpbHRlclByb3BlcnR5VmFsdWUuY29mZmVlIiwiRmxhdHRlbk9iamVjdCI6ImNvbXBvbmVudHMvRmxhdHRlbk9iamVjdC5jb2ZmZWUiLCJNYXBQcm9wZXJ0eSI6ImNvbXBvbmVudHMvTWFwUHJvcGVydHkuY29mZmVlIiwiUmVtb3ZlUHJvcGVydHkiOiJjb21wb25lbnRzL1JlbW92ZVByb3BlcnR5LmNvZmZlZSIsIk1hcFByb3BlcnR5VmFsdWUiOiJjb21wb25lbnRzL01hcFByb3BlcnR5VmFsdWUuY29mZmVlIiwiR2V0T2JqZWN0S2V5IjoiY29tcG9uZW50cy9HZXRPYmplY3RLZXkuY29mZmVlIiwiVW5pcXVlQXJyYXkiOiJjb21wb25lbnRzL1VuaXF1ZUFycmF5LmNvZmZlZSIsIlNldFByb3BlcnR5IjoiY29tcG9uZW50cy9TZXRQcm9wZXJ0eS5jb2ZmZWUiLCJTaW1wbGlmeU9iamVjdCI6ImNvbXBvbmVudHMvU2ltcGxpZnlPYmplY3QuY29mZmVlIiwiRHVwbGljYXRlUHJvcGVydHkiOiJjb21wb25lbnRzL0R1cGxpY2F0ZVByb3BlcnR5LmNvZmZlZSIsIkNyZWF0ZU9iamVjdCI6ImNvbXBvbmVudHMvQ3JlYXRlT2JqZWN0LmNvZmZlZSIsIkNyZWF0ZURhdGUiOiJjb21wb25lbnRzL0NyZWF0ZURhdGUuY29mZmVlIiwiU2V0UHJvcGVydHlWYWx1ZSI6ImNvbXBvbmVudHMvU2V0UHJvcGVydHlWYWx1ZS5jb2ZmZWUiLCJDYWxsTWV0aG9kIjoiY29tcG9uZW50cy9DYWxsTWV0aG9kLmNvZmZlZSJ9fX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9FeHRlbmQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRXh0ZW5kLCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpFeHRlbmQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEV4dGVuZCwgX3N1cGVyKTsKCiAgRXh0ZW5kLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJFeHRlbmQgYW4gaW5jb21pbmcgb2JqZWN0IHRvIHNvbWUgcHJlZGVmaW5lZCAgb2JqZWN0cywgb3B0aW9uYWxseSBieSBhIGNlcnRhaW4gcHJvcGVydHkiOwoKICBmdW5jdGlvbiBFeHRlbmQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5iYXNlcyA9IFtdOwogICAgdGhpcy5tZXJnZWRCYXNlID0ge307CiAgICB0aGlzLmtleSA9IG51bGw7CiAgICB0aGlzLnJldmVyc2UgPSBmYWxzZTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGJhc2U6IG5ldyBub2Zsby5Qb3J0LAogICAgICBrZXk6IG5ldyBub2Zsby5Qb3J0LAogICAgICByZXZlcnNlOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHMuYmFzZS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuYmFzZXMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmJhc2Uub24oImRhdGEiLCBmdW5jdGlvbihiYXNlKSB7CiAgICAgIGlmIChiYXNlICE9IG51bGwpIHsKICAgICAgICByZXR1cm4gX3RoaXMuYmFzZXMucHVzaChiYXNlKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMua2V5Lm9uKCJkYXRhIiwgZnVuY3Rpb24oa2V5KSB7CiAgICAgIF90aGlzLmtleSA9IGtleTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnJldmVyc2Uub24oImRhdGEiLCBmdW5jdGlvbihyZXZlcnNlKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZXZlcnNlID0gcmV2ZXJzZSA9PT0gJ3RydWUnOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImNvbm5lY3QiLCBmdW5jdGlvbihncm91cCkge30pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oaW5jb21pbmcpIHsKICAgICAgdmFyIGJhc2UsIG91dCwgX2ksIF9sZW4sIF9yZWY7CiAgICAgIG91dCA9IHt9OwogICAgICBfcmVmID0gX3RoaXMuYmFzZXM7CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGJhc2UgPSBfcmVmW19pXTsKICAgICAgICBpZiAoKF90aGlzLmtleSA9PSBudWxsKSB8fCAoaW5jb21pbmdbX3RoaXMua2V5XSAhPSBudWxsKSAmJiBpbmNvbWluZ1tfdGhpcy5rZXldID09PSBiYXNlW190aGlzLmtleV0pIHsKICAgICAgICAgIF8uZXh0ZW5kKG91dCwgYmFzZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChfdGhpcy5yZXZlcnNlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF8uZXh0ZW5kKHt9LCBpbmNvbWluZywgb3V0KSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF8uZXh0ZW5kKG91dCwgaW5jb21pbmcpKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBFeHRlbmQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEV4dGVuZDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWVyZ2VPYmplY3RzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIE1lcmdlT2JqZWN0cywgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgpfID0gcmVxdWlyZSgidW5kZXJzY29yZSIpOwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKTWVyZ2VPYmplY3RzID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhNZXJnZU9iamVjdHMsIF9zdXBlcik7CgogIE1lcmdlT2JqZWN0cy5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAibWVyZ2VzIGFsbCBpbmNvbWluZyBvYmplY3RzIGludG8gb25lIjsKCiAgZnVuY3Rpb24gTWVyZ2VPYmplY3RzKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMubWVyZ2UgPSBfLmJpbmQodGhpcy5tZXJnZSwgdGhpcyk7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5ncm91cHMgPSBbXTsKICAgICAgcmV0dXJuIF90aGlzLm9iamVjdHMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24ob2JqZWN0KSB7CiAgICAgIHJldHVybiBfdGhpcy5vYmplY3RzLnB1c2gob2JqZWN0KTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMucG9wKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChfLnJlZHVjZShfdGhpcy5vYmplY3RzLCBfdGhpcy5tZXJnZSwge30pKTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIE1lcmdlT2JqZWN0cy5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbihvcmlnaW4sIG9iamVjdCkgewogICAgdmFyIGtleSwgb1ZhbHVlLCB2YWx1ZTsKICAgIGZvciAoa2V5IGluIG9iamVjdCkgewogICAgICB2YWx1ZSA9IG9iamVjdFtrZXldOwogICAgICBvVmFsdWUgPSBvcmlnaW5ba2V5XTsKICAgICAgaWYgKG9WYWx1ZSAhPSBudWxsKSB7CiAgICAgICAgc3dpdGNoICh0b1N0cmluZy5jYWxsKG9WYWx1ZSkpIHsKICAgICAgICAgIGNhc2UgIltvYmplY3QgQXJyYXldIjoKICAgICAgICAgICAgb3JpZ2luW2tleV0ucHVzaC5hcHBseShvcmlnaW5ba2V5XSwgdmFsdWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIltvYmplY3QgT2JqZWN0XSI6CiAgICAgICAgICAgIG9yaWdpbltrZXldID0gdGhpcy5tZXJnZShvVmFsdWUsIHZhbHVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBvcmlnaW5ba2V5XSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBvcmlnaW5ba2V5XSA9IHZhbHVlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gb3JpZ2luOwogIH07CgogIHJldHVybiBNZXJnZU9iamVjdHM7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IE1lcmdlT2JqZWN0czsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU3BsaXRPYmplY3QuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgU3BsaXRPYmplY3QsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKU3BsaXRPYmplY3QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFNwbGl0T2JqZWN0LCBfc3VwZXIpOwoKICBTcGxpdE9iamVjdC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAic3BsaXRzIGEgc2luZ2xlIG9iamVjdCBpbnRvIG11bHRpcGxlIElQcywgICAgd3JhcHBlZCB3aXRoIHRoZSBrZXkgYXMgdGhlIGdyb3VwIjsKCiAgZnVuY3Rpb24gU3BsaXRPYmplY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBrZXksIHZhbHVlLCBfcmVzdWx0czsKICAgICAgX3Jlc3VsdHMgPSBbXTsKICAgICAgZm9yIChrZXkgaW4gZGF0YSkgewogICAgICAgIHZhbHVlID0gZGF0YVtrZXldOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGtleSk7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQodmFsdWUpOwogICAgICAgIF9yZXN1bHRzLnB1c2goX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gU3BsaXRPYmplY3Q7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFNwbGl0T2JqZWN0Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9SZXBsYWNlS2V5LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlcGxhY2VLZXksIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKUmVwbGFjZUtleSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoUmVwbGFjZUtleSwgX3N1cGVyKTsKCiAgUmVwbGFjZUtleS5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiZ2l2ZW4gYSByZWdleHAgbWF0Y2hpbmcgYW55IGtleSBvZiBhbiBpbmNvbWluZyAgb2JqZWN0IGFzIGEgZGF0YSBJUCwgcmVwbGFjZSB0aGUga2V5IHdpdGggdGhlIHByb3ZpZGVkIHN0cmluZyI7CgogIGZ1bmN0aW9uIFJlcGxhY2VLZXkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5wYXR0ZXJucyA9IHt9OwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCwKICAgICAgcGF0dGVybjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLnBhdHRlcm4ub24oImRhdGEiLCBmdW5jdGlvbihwYXR0ZXJucykgewogICAgICBfdGhpcy5wYXR0ZXJucyA9IHBhdHRlcm5zOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBrZXksIG5ld0tleSwgcGF0dGVybiwgcmVwbGFjZSwgdmFsdWUsIF9yZWY7CiAgICAgIG5ld0tleSA9IG51bGw7CiAgICAgIGZvciAoa2V5IGluIGRhdGEpIHsKICAgICAgICB2YWx1ZSA9IGRhdGFba2V5XTsKICAgICAgICBfcmVmID0gX3RoaXMucGF0dGVybnM7CiAgICAgICAgZm9yIChwYXR0ZXJuIGluIF9yZWYpIHsKICAgICAgICAgIHJlcGxhY2UgPSBfcmVmW3BhdHRlcm5dOwogICAgICAgICAgcGF0dGVybiA9IG5ldyBSZWdFeHAocGF0dGVybik7CiAgICAgICAgICBpZiAoa2V5Lm1hdGNoKHBhdHRlcm4pICE9IG51bGwpIHsKICAgICAgICAgICAgbmV3S2V5ID0ga2V5LnJlcGxhY2UocGF0dGVybiwgcmVwbGFjZSk7CiAgICAgICAgICAgIGRhdGFbbmV3S2V5XSA9IHZhbHVlOwogICAgICAgICAgICBkZWxldGUgZGF0YVtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5wYXR0ZXJuID0gbnVsbDsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBSZXBsYWNlS2V5OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBSZXBsYWNlS2V5Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9LZXlzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEtleXMsIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKCktleXMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEtleXMsIF9zdXBlcik7CgogIEtleXMucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gImdldHMgb25seSB0aGUga2V5cyBvZiBhbiBvYmplY3QgYW5kIGZvcndhcmQgdGhlbSBhcyBhbiBhcnJheSI7CgogIGZ1bmN0aW9uIEtleXMoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGtleSwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzOwogICAgICBfcmVmID0gXy5rZXlzKGRhdGEpOwogICAgICBfcmVzdWx0cyA9IFtdOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBrZXkgPSBfcmVmW19pXTsKICAgICAgICBfcmVzdWx0cy5wdXNoKF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGtleSkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gS2V5czsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgS2V5czsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2l6ZS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBTaXplLCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpTaXplID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTaXplLCBfc3VwZXIpOwoKICBTaXplLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJnZXRzIHRoZSBzaXplIG9mIGFuIG9iamVjdCBhbmQgc2VuZHMgdGhhdCBvdXQgYXMgYSBudW1iZXIiOwoKICBmdW5jdGlvbiBTaXplKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnaW50ZWdlcicpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoXy5zaXplKGRhdGEpKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gU2l6ZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU2l6ZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvVmFsdWVzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFZhbHVlcywgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpfID0gcmVxdWlyZSgidW5kZXJzY29yZSIpOwoKVmFsdWVzID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhWYWx1ZXMsIF9zdXBlcik7CgogIFZhbHVlcy5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiZ2V0cyBvbmx5IHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0IGFuZCBmb3J3YXJkIHRoZW0gYXMgYW4gYXJyYXkiOwoKICBmdW5jdGlvbiBWYWx1ZXMoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciB2YWx1ZSwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzOwogICAgICBfcmVmID0gXy52YWx1ZXMoZGF0YSk7CiAgICAgIF9yZXN1bHRzID0gW107CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIHZhbHVlID0gX3JlZltfaV07CiAgICAgICAgX3Jlc3VsdHMucHVzaChfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZCh2YWx1ZSkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gVmFsdWVzOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBWYWx1ZXM7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0pvaW4uanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgSm9pbiwgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgpfID0gcmVxdWlyZSgidW5kZXJzY29yZSIpOwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKSm9pbiA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoSm9pbiwgX3N1cGVyKTsKCiAgSm9pbi5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiSm9pbiBhbGwgdmFsdWVzIG9mIGEgcGFzc2VkIHBhY2tldCB0b2dldGhlciBhcyBhICBzdHJpbmcgd2l0aCBhIHByZWRlZmluZWQgZGVsaW1pdGVyIjsKCiAgZnVuY3Rpb24gSm9pbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRlbGltaXRlciA9ICIsIjsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGRlbGltaXRlcjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLmRlbGltaXRlci5vbigiZGF0YSIsIGZ1bmN0aW9uKGRlbGltaXRlcikgewogICAgICBfdGhpcy5kZWxpbWl0ZXIgPSBkZWxpbWl0ZXI7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKG9iamVjdCkgewogICAgICBpZiAoXy5pc09iamVjdChvYmplY3QpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF8udmFsdWVzKG9iamVjdCkuam9pbihfdGhpcy5kZWxpbWl0ZXIpKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBKb2luOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBKb2luOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9FeHRyYWN0UHJvcGVydHkuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRXh0cmFjdFByb3BlcnR5LCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpFeHRyYWN0UHJvcGVydHkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEV4dHJhY3RQcm9wZXJ0eSwgX3N1cGVyKTsKCiAgRXh0cmFjdFByb3BlcnR5LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJHaXZlbiBhIGtleSwgcmV0dXJuIG9ubHkgdGhlIHZhbHVlIG1hdGNoaW5nIHRoYXQga2V5ICBpbiB0aGUgaW5jb21pbmcgb2JqZWN0IjsKCiAgZnVuY3Rpb24gRXh0cmFjdFByb3BlcnR5KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGtleTogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLmtleS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMua2V5cyA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMua2V5Lm9uKCJkYXRhIiwgZnVuY3Rpb24oa2V5KSB7CiAgICAgIHJldHVybiBfdGhpcy5rZXlzLnB1c2goa2V5KTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIga2V5LCB2YWx1ZSwgX2ksIF9sZW4sIF9yZWY7CiAgICAgIGlmICgoX3RoaXMua2V5cyAhPSBudWxsKSAmJiBfLmlzT2JqZWN0KGRhdGEpKSB7CiAgICAgICAgdmFsdWUgPSBkYXRhOwogICAgICAgIF9yZWYgPSBfdGhpcy5rZXlzOwogICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgICAga2V5ID0gX3JlZltfaV07CiAgICAgICAgICB2YWx1ZSA9IHZhbHVlW2tleV07CiAgICAgICAgfQogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZCh2YWx1ZSk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gRXh0cmFjdFByb3BlcnR5OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBFeHRyYWN0UHJvcGVydHk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0luc2VydFByb3BlcnR5LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEluc2VydFByb3BlcnR5LCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpJbnNlcnRQcm9wZXJ0eSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoSW5zZXJ0UHJvcGVydHksIF9zdXBlcik7CgogIEluc2VydFByb3BlcnR5LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJJbnNlcnQgYSBwcm9wZXJ0eSBpbnRvIGluY29taW5nIG9iamVjdHMuIjsKCiAgZnVuY3Rpb24gSW5zZXJ0UHJvcGVydHkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5wcm9wZXJ0aWVzID0ge307CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0LAogICAgICBwcm9wZXJ0eTogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLnByb3BlcnR5Lm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcm9wZXJ0aWVzID0ge307CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5wcm9wZXJ0eS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGtleSkgewogICAgICBfdGhpcy5rZXkgPSBrZXk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5wcm9wZXJ0eS5vbigiZGF0YSIsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIGlmIChfdGhpcy5rZXkgIT0gbnVsbCkgewogICAgICAgIHJldHVybiBfdGhpcy5wcm9wZXJ0aWVzW190aGlzLmtleV0gPSB2YWx1ZTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucHJvcGVydHkub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5rZXkgPSBudWxsOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBrZXksIHZhbHVlLCBfcmVmOwogICAgICBpZiAoIV8uaXNPYmplY3QoZGF0YSkpIHsKICAgICAgICBkYXRhID0ge307CiAgICAgIH0KICAgICAgX3JlZiA9IF90aGlzLnByb3BlcnRpZXM7CiAgICAgIGZvciAoa2V5IGluIF9yZWYpIHsKICAgICAgICB2YWx1ZSA9IF9yZWZba2V5XTsKICAgICAgICBkYXRhW2tleV0gPSB2YWx1ZTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIEluc2VydFByb3BlcnR5OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBJbnNlcnRQcm9wZXJ0eTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2xpY2VBcnJheS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBTbGljZUFycmF5LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClNsaWNlQXJyYXkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFNsaWNlQXJyYXksIF9zdXBlcik7CgogIGZ1bmN0aW9uIFNsaWNlQXJyYXkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5iZWdpbiA9IDA7CiAgICB0aGlzLmVuZCA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIGJlZ2luOiBuZXcgbm9mbG8uUG9ydCgpLAogICAgICBlbmQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIGVycm9yOiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmJlZ2luLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuYmVnaW4gPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZW5kLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZW5kID0gZGF0YTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuc2xpY2VEYXRhKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBTbGljZUFycmF5LnByb3RvdHlwZS5zbGljZURhdGEgPSBmdW5jdGlvbihkYXRhKSB7CiAgICB2YXIgc2xpY2VkOwogICAgaWYgKCFkYXRhLnNsaWNlKSB7CiAgICAgIHJldHVybiB0aGlzLm91dFBvcnRzLmVycm9yLnNlbmQoIkRhdGEgIiArICh0eXBlb2YgZGF0YSkgKyAiIGNhbm5vdCBiZSBzbGljZWQiKTsKICAgIH0KICAgIGlmICh0aGlzLmVuZCAhPT0gbnVsbCkgewogICAgICBzbGljZWQgPSBkYXRhLnNsaWNlKHRoaXMuYmVnaW4sIHRoaXMuZW5kKTsKICAgIH0KICAgIGlmICh0aGlzLmVuZCA9PT0gbnVsbCkgewogICAgICBzbGljZWQgPSBkYXRhLnNsaWNlKHRoaXMuYmVnaW4pOwogICAgfQogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMub3V0LnNlbmQoc2xpY2VkKTsKICB9OwoKICByZXR1cm4gU2xpY2VBcnJheTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU2xpY2VBcnJheTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU3BsaXRBcnJheS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBTcGxpdEFycmF5LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClNwbGl0QXJyYXkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFNwbGl0QXJyYXksIF9zdXBlcik7CgogIGZ1bmN0aW9uIFNwbGl0QXJyYXkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBpdGVtLCBrZXksIF9pLCBfbGVuLCBfcmVzdWx0czsKICAgICAgaWYgKHRvU3RyaW5nLmNhbGwoZGF0YSkgIT09ICdbb2JqZWN0IEFycmF5XScpIHsKICAgICAgICBmb3IgKGtleSBpbiBkYXRhKSB7CiAgICAgICAgICBpdGVtID0gZGF0YVtrZXldOwogICAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoa2V5KTsKICAgICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGl0ZW0pOwogICAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfcmVzdWx0cyA9IFtdOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGRhdGEubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBpdGVtID0gZGF0YVtfaV07CiAgICAgICAgX3Jlc3VsdHMucHVzaChfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChpdGVtKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF9yZXN1bHRzOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFNwbGl0QXJyYXk7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFNwbGl0QXJyYXk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0ZpbHRlclByb3BlcnR5VmFsdWUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRmlsdGVyUHJvcGVydHlWYWx1ZSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpGaWx0ZXJQcm9wZXJ0eVZhbHVlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhGaWx0ZXJQcm9wZXJ0eVZhbHVlLCBfc3VwZXIpOwoKICBGaWx0ZXJQcm9wZXJ0eVZhbHVlLnByb3RvdHlwZS5pY29uID0gJ2ZpbHRlcic7CgogIGZ1bmN0aW9uIEZpbHRlclByb3BlcnR5VmFsdWUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5hY2NlcHRzID0ge307CiAgICB0aGlzLnJlZ2V4cHMgPSB7fTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgYWNjZXB0OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdhbGwnKSwKICAgICAgcmVnZXhwOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdzdHJpbmcnKSwKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIG1pc3NlZDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmFjY2VwdC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnByZXBhcmVBY2NlcHQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5yZWdleHAub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcmVwYXJlUmVnRXhwKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChfdGhpcy5maWx0ZXJpbmcoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5maWx0ZXJEYXRhKGRhdGEpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgRmlsdGVyUHJvcGVydHlWYWx1ZS5wcm90b3R5cGUuZmlsdGVyaW5nID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gKE9iamVjdC5rZXlzKHRoaXMuYWNjZXB0cykpLmxlbmd0aCA+IDAgfHwgKE9iamVjdC5rZXlzKHRoaXMucmVnZXhwcykpLmxlbmd0aCA+IDA7CiAgfTsKCiAgRmlsdGVyUHJvcGVydHlWYWx1ZS5wcm90b3R5cGUucHJlcGFyZUFjY2VwdCA9IGZ1bmN0aW9uKG1hcCkgewogICAgdmFyIGUsIG1hcFBhcnRzOwogICAgaWYgKHR5cGVvZiBtYXAgPT09ICdvYmplY3QnKSB7CiAgICAgIHRoaXMuYWNjZXB0cyA9IG1hcDsKICAgICAgcmV0dXJuOwogICAgfQogICAgbWFwUGFydHMgPSBtYXAuc3BsaXQoJz0nKTsKICAgIHRyeSB7CiAgICAgIHJldHVybiB0aGlzLmFjY2VwdHNbbWFwUGFydHNbMF1dID0gZXZhbChtYXBQYXJ0c1sxXSk7CiAgICB9IGNhdGNoIChfZXJyb3IpIHsKICAgICAgZSA9IF9lcnJvcjsKICAgICAgaWYgKGUgaW5zdGFuY2VvZiBSZWZlcmVuY2VFcnJvcikgewogICAgICAgIHJldHVybiB0aGlzLmFjY2VwdHNbbWFwUGFydHNbMF1dID0gbWFwUGFydHNbMV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgZTsKICAgICAgfQogICAgfQogIH07CgogIEZpbHRlclByb3BlcnR5VmFsdWUucHJvdG90eXBlLnByZXBhcmVSZWdFeHAgPSBmdW5jdGlvbihtYXApIHsKICAgIHZhciBtYXBQYXJ0czsKICAgIG1hcFBhcnRzID0gbWFwLnNwbGl0KCc9Jyk7CiAgICByZXR1cm4gdGhpcy5yZWdleHBzW21hcFBhcnRzWzBdXSA9IG1hcFBhcnRzWzFdOwogIH07CgogIEZpbHRlclByb3BlcnR5VmFsdWUucHJvdG90eXBlLmZpbHRlckRhdGEgPSBmdW5jdGlvbihvYmplY3QpIHsKICAgIHZhciBtYXRjaCwgbmV3RGF0YSwgcHJvcGVydHksIHJlZ2V4cCwgdmFsdWU7CiAgICBuZXdEYXRhID0ge307CiAgICBtYXRjaCA9IGZhbHNlOwogICAgZm9yIChwcm9wZXJ0eSBpbiBvYmplY3QpIHsKICAgICAgdmFsdWUgPSBvYmplY3RbcHJvcGVydHldOwogICAgICBpZiAodGhpcy5hY2NlcHRzW3Byb3BlcnR5XSkgewogICAgICAgIGlmICh0aGlzLmFjY2VwdHNbcHJvcGVydHldICE9PSB2YWx1ZSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIG1hdGNoID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAodGhpcy5yZWdleHBzW3Byb3BlcnR5XSkgewogICAgICAgIHJlZ2V4cCA9IG5ldyBSZWdFeHAodGhpcy5yZWdleHBzW3Byb3BlcnR5XSk7CiAgICAgICAgaWYgKCFyZWdleHAuZXhlYyh2YWx1ZSkpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICBtYXRjaCA9IHRydWU7CiAgICAgIH0KICAgICAgbmV3RGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgY29udGludWU7CiAgICB9CiAgICBpZiAoIW1hdGNoKSB7CiAgICAgIGlmICghdGhpcy5vdXRQb3J0cy5taXNzZWQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMub3V0UG9ydHMubWlzc2VkLnNlbmQob2JqZWN0KTsKICAgICAgdGhpcy5vdXRQb3J0cy5taXNzZWQuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm47CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChuZXdEYXRhKTsKICB9OwoKICByZXR1cm4gRmlsdGVyUHJvcGVydHlWYWx1ZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRmlsdGVyUHJvcGVydHlWYWx1ZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRmxhdHRlbk9iamVjdC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBGbGF0dGVuT2JqZWN0LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkZsYXR0ZW5PYmplY3QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEZsYXR0ZW5PYmplY3QsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEZsYXR0ZW5PYmplY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5tYXAgPSB7fTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgbWFwOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCksCiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHMubWFwLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucHJlcGFyZU1hcChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgb2JqZWN0LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICAgIF9yZWYgPSBfdGhpcy5mbGF0dGVuT2JqZWN0KGRhdGEpOwogICAgICBfcmVzdWx0cyA9IFtdOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBvYmplY3QgPSBfcmVmW19pXTsKICAgICAgICBfcmVzdWx0cy5wdXNoKF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF90aGlzLm1hcEtleXMob2JqZWN0KSkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgRmxhdHRlbk9iamVjdC5wcm90b3R5cGUucHJlcGFyZU1hcCA9IGZ1bmN0aW9uKG1hcCkgewogICAgdmFyIG1hcFBhcnRzOwogICAgaWYgKHR5cGVvZiBtYXAgPT09ICdvYmplY3QnKSB7CiAgICAgIHRoaXMubWFwID0gbWFwOwogICAgICByZXR1cm47CiAgICB9CiAgICBtYXBQYXJ0cyA9IG1hcC5zcGxpdCgnPScpOwogICAgcmV0dXJuIHRoaXMubWFwW21hcFBhcnRzWzBdXSA9IG1hcFBhcnRzWzFdOwogIH07CgogIEZsYXR0ZW5PYmplY3QucHJvdG90eXBlLm1hcEtleXMgPSBmdW5jdGlvbihvYmplY3QpIHsKICAgIHZhciBrZXksIG1hcCwgX3JlZjsKICAgIF9yZWYgPSB0aGlzLm1hcDsKICAgIGZvciAoa2V5IGluIF9yZWYpIHsKICAgICAgbWFwID0gX3JlZltrZXldOwogICAgICBvYmplY3RbbWFwXSA9IG9iamVjdC5mbGF0dGVuZWRLZXlzW2tleV07CiAgICB9CiAgICBkZWxldGUgb2JqZWN0LmZsYXR0ZW5lZEtleXM7CiAgICByZXR1cm4gb2JqZWN0OwogIH07CgogIEZsYXR0ZW5PYmplY3QucHJvdG90eXBlLmZsYXR0ZW5PYmplY3QgPSBmdW5jdGlvbihvYmplY3QpIHsKICAgIHZhciBmbGF0dGVuZWQsIGZsYXR0ZW5lZFZhbHVlLCBrZXksIHZhbCwgdmFsdWUsIF9pLCBfbGVuOwogICAgZmxhdHRlbmVkID0gW107CiAgICBmb3IgKGtleSBpbiBvYmplY3QpIHsKICAgICAgdmFsdWUgPSBvYmplY3Rba2V5XTsKICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHsKICAgICAgICBmbGF0dGVuZWRWYWx1ZSA9IHRoaXMuZmxhdHRlbk9iamVjdCh2YWx1ZSk7CiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBmbGF0dGVuZWRWYWx1ZS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgICAgdmFsID0gZmxhdHRlbmVkVmFsdWVbX2ldOwogICAgICAgICAgdmFsLmZsYXR0ZW5lZEtleXMucHVzaChrZXkpOwogICAgICAgICAgZmxhdHRlbmVkLnB1c2godmFsKTsKICAgICAgICB9CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgZmxhdHRlbmVkLnB1c2goewogICAgICAgIGZsYXR0ZW5lZEtleXM6IFtrZXldLAogICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBmbGF0dGVuZWQ7CiAgfTsKCiAgcmV0dXJuIEZsYXR0ZW5PYmplY3Q7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEZsYXR0ZW5PYmplY3Q7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL01hcFByb3BlcnR5LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIE1hcFByb3BlcnR5LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCk1hcFByb3BlcnR5ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhNYXBQcm9wZXJ0eSwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gTWFwUHJvcGVydHkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5tYXAgPSB7fTsKICAgIHRoaXMucmVnZXhwcyA9IHt9OwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBtYXA6IG5ldyBub2Zsby5BcnJheVBvcnQoKSwKICAgICAgcmVnZXhwOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCksCiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHMubWFwLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucHJlcGFyZU1hcChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnJlZ2V4cC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnByZXBhcmVSZWdFeHAoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm1hcERhdGEoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIE1hcFByb3BlcnR5LnByb3RvdHlwZS5wcmVwYXJlTWFwID0gZnVuY3Rpb24obWFwKSB7CiAgICB2YXIgbWFwUGFydHM7CiAgICBpZiAodHlwZW9mIG1hcCA9PT0gJ29iamVjdCcpIHsKICAgICAgdGhpcy5tYXAgPSBtYXA7CiAgICAgIHJldHVybjsKICAgIH0KICAgIG1hcFBhcnRzID0gbWFwLnNwbGl0KCc9Jyk7CiAgICByZXR1cm4gdGhpcy5tYXBbbWFwUGFydHNbMF1dID0gbWFwUGFydHNbMV07CiAgfTsKCiAgTWFwUHJvcGVydHkucHJvdG90eXBlLnByZXBhcmVSZWdFeHAgPSBmdW5jdGlvbihtYXApIHsKICAgIHZhciBtYXBQYXJ0czsKICAgIG1hcFBhcnRzID0gbWFwLnNwbGl0KCc9Jyk7CiAgICByZXR1cm4gdGhpcy5yZWdleHBzW21hcFBhcnRzWzBdXSA9IG1hcFBhcnRzWzFdOwogIH07CgogIE1hcFByb3BlcnR5LnByb3RvdHlwZS5tYXBEYXRhID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIGV4cHJlc3Npb24sIG1hdGNoZWQsIG5ld0RhdGEsIHByb3BlcnR5LCByZWdleHAsIHJlcGxhY2VtZW50LCB2YWx1ZSwgX3JlZjsKICAgIG5ld0RhdGEgPSB7fTsKICAgIGZvciAocHJvcGVydHkgaW4gZGF0YSkgewogICAgICB2YWx1ZSA9IGRhdGFbcHJvcGVydHldOwogICAgICBpZiAocHJvcGVydHkgaW4gdGhpcy5tYXApIHsKICAgICAgICBwcm9wZXJ0eSA9IHRoaXMubWFwW3Byb3BlcnR5XTsKICAgICAgfQogICAgICBfcmVmID0gdGhpcy5yZWdleHBzOwogICAgICBmb3IgKGV4cHJlc3Npb24gaW4gX3JlZikgewogICAgICAgIHJlcGxhY2VtZW50ID0gX3JlZltleHByZXNzaW9uXTsKICAgICAgICByZWdleHAgPSBuZXcgUmVnRXhwKGV4cHJlc3Npb24pOwogICAgICAgIG1hdGNoZWQgPSByZWdleHAuZXhlYyhwcm9wZXJ0eSk7CiAgICAgICAgaWYgKCFtYXRjaGVkKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgcHJvcGVydHkgPSBwcm9wZXJ0eS5yZXBsYWNlKHJlZ2V4cCwgcmVwbGFjZW1lbnQpOwogICAgICB9CiAgICAgIGlmIChwcm9wZXJ0eSBpbiBuZXdEYXRhKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobmV3RGF0YVtwcm9wZXJ0eV0pKSB7CiAgICAgICAgICBuZXdEYXRhW3Byb3BlcnR5XS5wdXNoKHZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbmV3RGF0YVtwcm9wZXJ0eV0gPSBbbmV3RGF0YVtwcm9wZXJ0eV0sIHZhbHVlXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV3RGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMub3V0LnNlbmQobmV3RGF0YSk7CiAgfTsKCiAgcmV0dXJuIE1hcFByb3BlcnR5OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBNYXBQcm9wZXJ0eTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvUmVtb3ZlUHJvcGVydHkuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUmVtb3ZlUHJvcGVydHksIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKXyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUnKTsKClJlbW92ZVByb3BlcnR5ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSZW1vdmVQcm9wZXJ0eSwgX3N1cGVyKTsKCiAgUmVtb3ZlUHJvcGVydHkucHJvdG90eXBlLmljb24gPSAncmVtb3ZlJzsKCiAgZnVuY3Rpb24gUmVtb3ZlUHJvcGVydHkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5wcm9wZXJ0aWVzID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIHByb3BlcnR5OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHMucHJvcGVydHkub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcm9wZXJ0aWVzLnB1c2goZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF90aGlzLnJlbW92ZVByb3BlcnRpZXMoZGF0YSkpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBSZW1vdmVQcm9wZXJ0eS5wcm90b3R5cGUucmVtb3ZlUHJvcGVydGllcyA9IGZ1bmN0aW9uKG9iamVjdCkgewogICAgdmFyIHByb3BlcnR5LCBfaSwgX2xlbiwgX3JlZjsKICAgIG9iamVjdCA9IF8uY2xvbmUob2JqZWN0KTsKICAgIF9yZWYgPSB0aGlzLnByb3BlcnRpZXM7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgcHJvcGVydHkgPSBfcmVmW19pXTsKICAgICAgZGVsZXRlIG9iamVjdFtwcm9wZXJ0eV07CiAgICB9CiAgICByZXR1cm4gb2JqZWN0OwogIH07CgogIHJldHVybiBSZW1vdmVQcm9wZXJ0eTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVtb3ZlUHJvcGVydHk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL01hcFByb3BlcnR5VmFsdWUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgTWFwUHJvcGVydHlWYWx1ZSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpNYXBQcm9wZXJ0eVZhbHVlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhNYXBQcm9wZXJ0eVZhbHVlLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBNYXBQcm9wZXJ0eVZhbHVlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMubWFwQW55ID0ge307CiAgICB0aGlzLm1hcCA9IHt9OwogICAgdGhpcy5yZWdleHBBbnkgPSB7fTsKICAgIHRoaXMucmVnZXhwID0ge307CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIG1hcDogbmV3IG5vZmxvLkFycmF5UG9ydCgpLAogICAgICByZWdleHA6IG5ldyBub2Zsby5BcnJheVBvcnQoKSwKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5tYXAub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcmVwYXJlTWFwKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucmVnZXhwLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucHJlcGFyZVJlZ0V4cChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMubWFwRGF0YShkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgTWFwUHJvcGVydHlWYWx1ZS5wcm90b3R5cGUucHJlcGFyZU1hcCA9IGZ1bmN0aW9uKG1hcCkgewogICAgdmFyIG1hcFBhcnRzOwogICAgaWYgKHR5cGVvZiBtYXAgPT09ICdvYmplY3QnKSB7CiAgICAgIHRoaXMubWFwQW55ID0gbWFwOwogICAgICByZXR1cm47CiAgICB9CiAgICBtYXBQYXJ0cyA9IG1hcC5zcGxpdCgnPScpOwogICAgaWYgKG1hcFBhcnRzLmxlbmd0aCA9PT0gMykgewogICAgICB0aGlzLm1hcFttYXBQYXJ0c1swXV0gPSB7CiAgICAgICAgZnJvbTogbWFwUGFydHNbMV0sCiAgICAgICAgdG86IG1hcFBhcnRzWzJdCiAgICAgIH07CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiB0aGlzLm1hcEFueVttYXBQYXJ0c1swXV0gPSBtYXBQYXJ0c1sxXTsKICB9OwoKICBNYXBQcm9wZXJ0eVZhbHVlLnByb3RvdHlwZS5wcmVwYXJlUmVnRXhwID0gZnVuY3Rpb24obWFwKSB7CiAgICB2YXIgbWFwUGFydHM7CiAgICBtYXBQYXJ0cyA9IG1hcC5zcGxpdCgnPScpOwogICAgaWYgKG1hcFBhcnRzLmxlbmd0aCA9PT0gMykgewogICAgICB0aGlzLnJlZ2V4cFttYXBQYXJ0c1swXV0gPSB7CiAgICAgICAgZnJvbTogbWFwUGFydHNbMV0sCiAgICAgICAgdG86IG1hcFBhcnRzWzJdCiAgICAgIH07CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiB0aGlzLnJlZ2V4cEFueVttYXBQYXJ0c1swXV0gPSBtYXBQYXJ0c1sxXTsKICB9OwoKICBNYXBQcm9wZXJ0eVZhbHVlLnByb3RvdHlwZS5tYXBEYXRhID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIGV4cHJlc3Npb24sIG1hdGNoZWQsIHByb3BlcnR5LCByZWdleHAsIHJlcGxhY2VtZW50LCB2YWx1ZSwgX3JlZjsKICAgIGZvciAocHJvcGVydHkgaW4gZGF0YSkgewogICAgICB2YWx1ZSA9IGRhdGFbcHJvcGVydHldOwogICAgICBpZiAodGhpcy5tYXBbcHJvcGVydHldICYmIHRoaXMubWFwW3Byb3BlcnR5XS5mcm9tID09PSB2YWx1ZSkgewogICAgICAgIGRhdGFbcHJvcGVydHldID0gdGhpcy5tYXBbcHJvcGVydHldLnRvOwogICAgICB9CiAgICAgIGlmICh0aGlzLm1hcEFueVt2YWx1ZV0pIHsKICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IHRoaXMubWFwQW55W3ZhbHVlXTsKICAgICAgfQogICAgICBpZiAodGhpcy5yZWdleHBbcHJvcGVydHldKSB7CiAgICAgICAgcmVnZXhwID0gbmV3IFJlZ0V4cCh0aGlzLnJlZ2V4cFtwcm9wZXJ0eV0uZnJvbSk7CiAgICAgICAgbWF0Y2hlZCA9IHJlZ2V4cC5leGVjKHZhbHVlKTsKICAgICAgICBpZiAobWF0Y2hlZCkgewogICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZS5yZXBsYWNlKHJlZ2V4cCwgdGhpcy5yZWdleHBbcHJvcGVydHldLnRvKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgX3JlZiA9IHRoaXMucmVnZXhwQW55OwogICAgICBmb3IgKGV4cHJlc3Npb24gaW4gX3JlZikgewogICAgICAgIHJlcGxhY2VtZW50ID0gX3JlZltleHByZXNzaW9uXTsKICAgICAgICByZWdleHAgPSBuZXcgUmVnRXhwKGV4cHJlc3Npb24pOwogICAgICAgIG1hdGNoZWQgPSByZWdleHAuZXhlYyh2YWx1ZSk7CiAgICAgICAgaWYgKCFtYXRjaGVkKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZS5yZXBsYWNlKHJlZ2V4cCwgcmVwbGFjZW1lbnQpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICB9OwoKICByZXR1cm4gTWFwUHJvcGVydHlWYWx1ZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgTWFwUHJvcGVydHlWYWx1ZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvR2V0T2JqZWN0S2V5LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEdldE9iamVjdEtleSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpHZXRPYmplY3RLZXkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEdldE9iamVjdEtleSwgX3N1cGVyKTsKCiAgR2V0T2JqZWN0S2V5LnByb3RvdHlwZS5pY29uID0gJ2luZGVudC1yaWdodCc7CgogIGZ1bmN0aW9uIEdldE9iamVjdEtleSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnNlbmRHcm91cCA9IHRydWU7CiAgICB0aGlzLmRhdGEgPSBbXTsKICAgIHRoaXMua2V5ID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIGtleTogbmV3IG5vZmxvLkFycmF5UG9ydCgpLAogICAgICBzZW5kZ3JvdXA6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIG9iamVjdDogbmV3IG5vZmxvLlBvcnQoKSwKICAgICAgbWlzc2VkOiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5kYXRhID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLmtleS5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuZ2V0S2V5KGRhdGEpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5kYXRhLnB1c2goZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGRhdGEsIF9pLCBfbGVuLCBfcmVmOwogICAgICBpZiAoIV90aGlzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCFfdGhpcy5rZXkubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIF9yZWYgPSBfdGhpcy5kYXRhOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBkYXRhID0gX3JlZltfaV07CiAgICAgICAgX3RoaXMuZ2V0S2V5KGRhdGEpOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5vYmplY3QuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm9iamVjdC5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmtleS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmtleS5wdXNoKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMua2V5Lm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBkYXRhLCBfaSwgX2xlbiwgX3JlZjsKICAgICAgaWYgKCFfdGhpcy5kYXRhLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfcmVmID0gX3RoaXMuZGF0YTsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgZGF0YSA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLmdldEtleShkYXRhKTsKICAgICAgfQogICAgICBfdGhpcy5kYXRhID0gW107CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc2VuZGdyb3VwLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYgKGRhdGEudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJykgewogICAgICAgICAgX3RoaXMuc2VuZEdyb3VwID0gZmFsc2U7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIF90aGlzLnNlbmRHcm91cCA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5zZW5kR3JvdXAgPSBkYXRhOwogICAgfSk7CiAgfQoKICBHZXRPYmplY3RLZXkucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24oZGF0YSwgZXJyb3IpIHsKICAgIGlmICh0aGlzLm91dFBvcnRzLm1pc3NlZC5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5taXNzZWQuc2VuZChkYXRhKTsKICAgICAgdGhpcy5vdXRQb3J0cy5taXNzZWQuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm47CiAgICB9CiAgICB0aHJvdyBlcnJvcjsKICB9OwoKICBHZXRPYmplY3RLZXkucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgIHZhciBrZXksIF9pLCBfbGVuLCBfcmVmOwogICAgaWYgKCF0aGlzLmtleS5sZW5ndGgpIHsKICAgICAgdGhpcy5lcnJvcihkYXRhLCBuZXcgRXJyb3IoJ0tleSBub3QgZGVmaW5lZCcpKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgewogICAgICB0aGlzLmVycm9yKGRhdGEsIG5ldyBFcnJvcignRGF0YSBpcyBub3QgYW4gb2JqZWN0JykpOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICB0aGlzLmVycm9yKGRhdGEsIG5ldyBFcnJvcignRGF0YSBpcyBOVUxMJykpOwogICAgICByZXR1cm47CiAgICB9CiAgICBfcmVmID0gdGhpcy5rZXk7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAga2V5ID0gX3JlZltfaV07CiAgICAgIGlmIChkYXRhW2tleV0gPT09IHZvaWQgMCkgewogICAgICAgIHRoaXMuZXJyb3IoZGF0YSwgbmV3IEVycm9yKCJPYmplY3QgaGFzIG5vIGtleSAiICsga2V5KSk7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc2VuZEdyb3VwKSB7CiAgICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChrZXkpOwogICAgICB9CiAgICAgIHRoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YVtrZXldKTsKICAgICAgaWYgKHRoaXMuc2VuZEdyb3VwKSB7CiAgICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgICAgfQogICAgfQogICAgaWYgKCF0aGlzLm91dFBvcnRzLm9iamVjdC5pc0F0dGFjaGVkKCkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMub2JqZWN0LnNlbmQoZGF0YSk7CiAgfTsKCiAgcmV0dXJuIEdldE9iamVjdEtleTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgR2V0T2JqZWN0S2V5Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9VbmlxdWVBcnJheS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBVbmlxdWVBcnJheSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpVbmlxdWVBcnJheSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoVW5pcXVlQXJyYXksIF9zdXBlcik7CgogIGZ1bmN0aW9uIFVuaXF1ZUFycmF5KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF90aGlzLnVuaXF1ZShkYXRhKSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgVW5pcXVlQXJyYXkucHJvdG90eXBlLnVuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5KSB7CiAgICB2YXIgbWVtYmVyLCBuZXdBcnJheSwgc2VlbiwgX2ksIF9sZW47CiAgICBzZWVuID0ge307CiAgICBuZXdBcnJheSA9IFtdOwogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBhcnJheS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBtZW1iZXIgPSBhcnJheVtfaV07CiAgICAgIHNlZW5bbWVtYmVyXSA9IG1lbWJlcjsKICAgIH0KICAgIGZvciAobWVtYmVyIGluIHNlZW4pIHsKICAgICAgbmV3QXJyYXkucHVzaChtZW1iZXIpOwogICAgfQogICAgcmV0dXJuIG5ld0FycmF5OwogIH07CgogIHJldHVybiBVbmlxdWVBcnJheTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgVW5pcXVlQXJyYXk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFNldFByb3BlcnR5LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClNldFByb3BlcnR5ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTZXRQcm9wZXJ0eSwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gU2V0UHJvcGVydHkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5wcm9wZXJ0aWVzID0ge307CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIHByb3BlcnR5OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCksCiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHMucHJvcGVydHkub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXRQcm9wZXJ0eShkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuYWRkUHJvcGVydGllcyhkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgU2V0UHJvcGVydHkucHJvdG90eXBlLnNldFByb3BlcnR5ID0gZnVuY3Rpb24ocHJvcCkgewogICAgdmFyIHByb3BQYXJ0czsKICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ29iamVjdCcpIHsKICAgICAgdGhpcy5wcm9wID0gcHJvcDsKICAgICAgcmV0dXJuOwogICAgfQogICAgcHJvcFBhcnRzID0gcHJvcC5zcGxpdCgnPScpOwogICAgcmV0dXJuIHRoaXMucHJvcGVydGllc1twcm9wUGFydHNbMF1dID0gcHJvcFBhcnRzWzFdOwogIH07CgogIFNldFByb3BlcnR5LnByb3RvdHlwZS5hZGRQcm9wZXJ0aWVzID0gZnVuY3Rpb24ob2JqZWN0KSB7CiAgICB2YXIgcHJvcGVydHksIHZhbHVlLCBfcmVmOwogICAgX3JlZiA9IHRoaXMucHJvcGVydGllczsKICAgIGZvciAocHJvcGVydHkgaW4gX3JlZikgewogICAgICB2YWx1ZSA9IF9yZWZbcHJvcGVydHldOwogICAgICBvYmplY3RbcHJvcGVydHldID0gdmFsdWU7CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChvYmplY3QpOwogIH07CgogIHJldHVybiBTZXRQcm9wZXJ0eTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU2V0UHJvcGVydHk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NpbXBsaWZ5T2JqZWN0LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFNpbXBsaWZ5T2JqZWN0LCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCl8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJykuXzsKClNpbXBsaWZ5T2JqZWN0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTaW1wbGlmeU9iamVjdCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gU2ltcGxpZnlPYmplY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luR3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChfdGhpcy5zaW1wbGlmeShkYXRhKSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIFNpbXBsaWZ5T2JqZWN0LnByb3RvdHlwZS5zaW1wbGlmeSA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgIGlmIChfLmlzQXJyYXkoZGF0YSkpIHsKICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAxKSB7CiAgICAgICAgcmV0dXJuIGRhdGFbMF07CiAgICAgIH0KICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CiAgICBpZiAoIV8uaXNPYmplY3QoZGF0YSkpIHsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CiAgICByZXR1cm4gdGhpcy5zaW1wbGlmeU9iamVjdChkYXRhKTsKICB9OwoKICBTaW1wbGlmeU9iamVjdC5wcm90b3R5cGUuc2ltcGxpZnlPYmplY3QgPSBmdW5jdGlvbihkYXRhKSB7CiAgICB2YXIga2V5cywgc2ltcGxpZmllZCwKICAgICAgX3RoaXMgPSB0aGlzOwogICAga2V5cyA9IF8ua2V5cyhkYXRhKTsKICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMSAmJiBrZXlzWzBdID09PSAnJGRhdGEnKSB7CiAgICAgIHJldHVybiB0aGlzLnNpbXBsaWZ5KGRhdGFbJyRkYXRhJ10pOwogICAgfQogICAgc2ltcGxpZmllZCA9IHt9OwogICAgXy5lYWNoKGRhdGEsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHsKICAgICAgcmV0dXJuIHNpbXBsaWZpZWRba2V5XSA9IF90aGlzLnNpbXBsaWZ5KHZhbHVlKTsKICAgIH0pOwogICAgcmV0dXJuIHNpbXBsaWZpZWQ7CiAgfTsKCiAgcmV0dXJuIFNpbXBsaWZ5T2JqZWN0OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBTaW1wbGlmeU9iamVjdDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRHVwbGljYXRlUHJvcGVydHkuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRHVwbGljYXRlUHJvcGVydHksIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKRHVwbGljYXRlUHJvcGVydHkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKER1cGxpY2F0ZVByb3BlcnR5LCBfc3VwZXIpOwoKICBmdW5jdGlvbiBEdXBsaWNhdGVQcm9wZXJ0eSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnByb3BlcnRpZXMgPSB7fTsKICAgIHRoaXMuc2VwYXJhdG9yID0gJy8nOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBwcm9wZXJ0eTogbmV3IG5vZmxvLkFycmF5UG9ydCgpLAogICAgICBzZXBhcmF0b3I6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHMucHJvcGVydHkub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXRQcm9wZXJ0eShkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnNlcGFyYXRvci5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnNlcGFyYXRvciA9IGRhdGE7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmFkZFByb3BlcnRpZXMoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIER1cGxpY2F0ZVByb3BlcnR5LnByb3RvdHlwZS5zZXRQcm9wZXJ0eSA9IGZ1bmN0aW9uKHByb3ApIHsKICAgIHZhciBwcm9wUGFydHM7CiAgICBpZiAodHlwZW9mIHByb3AgPT09ICdvYmplY3QnKSB7CiAgICAgIHRoaXMucHJvcCA9IHByb3A7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHByb3BQYXJ0cyA9IHByb3Auc3BsaXQoJz0nKTsKICAgIGlmIChwcm9wUGFydHMubGVuZ3RoID4gMikgewogICAgICB0aGlzLnByb3BlcnRpZXNbcHJvcFBhcnRzLnBvcCgpXSA9IHByb3BQYXJ0czsKICAgICAgcmV0dXJuOwogICAgfQogICAgcmV0dXJuIHRoaXMucHJvcGVydGllc1twcm9wUGFydHNbMV1dID0gcHJvcFBhcnRzWzBdOwogIH07CgogIER1cGxpY2F0ZVByb3BlcnR5LnByb3RvdHlwZS5hZGRQcm9wZXJ0aWVzID0gZnVuY3Rpb24ob2JqZWN0KSB7CiAgICB2YXIgbmV3VmFsdWVzLCBuZXdwcm9wLCBvcmlnaW5hbCwgb3JpZ2luYWxQcm9wLCBfaSwgX2xlbiwgX3JlZjsKICAgIF9yZWYgPSB0aGlzLnByb3BlcnRpZXM7CiAgICBmb3IgKG5ld3Byb3AgaW4gX3JlZikgewogICAgICBvcmlnaW5hbCA9IF9yZWZbbmV3cHJvcF07CiAgICAgIGlmICh0eXBlb2Ygb3JpZ2luYWwgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgb2JqZWN0W25ld3Byb3BdID0gb2JqZWN0W29yaWdpbmFsXTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBuZXdWYWx1ZXMgPSBbXTsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBvcmlnaW5hbC5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIG9yaWdpbmFsUHJvcCA9IG9yaWdpbmFsW19pXTsKICAgICAgICBuZXdWYWx1ZXMucHVzaChvYmplY3Rbb3JpZ2luYWxQcm9wXSk7CiAgICAgIH0KICAgICAgb2JqZWN0W25ld3Byb3BdID0gbmV3VmFsdWVzLmpvaW4odGhpcy5zZXBhcmF0b3IpOwogICAgfQogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMub3V0LnNlbmQob2JqZWN0KTsKICB9OwoKICByZXR1cm4gRHVwbGljYXRlUHJvcGVydHk7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IER1cGxpY2F0ZVByb3BlcnR5Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9DcmVhdGVPYmplY3QuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ3JlYXRlT2JqZWN0LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkNyZWF0ZU9iamVjdCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQ3JlYXRlT2JqZWN0LCBfc3VwZXIpOwoKICBmdW5jdGlvbiBDcmVhdGVPYmplY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBzdGFydDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLnN0YXJ0Lm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnN0YXJ0Lm9uKCJkYXRhIiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZCh7fSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5zdGFydC5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc3RhcnQub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBDcmVhdGVPYmplY3Q7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENyZWF0ZU9iamVjdDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvQ3JlYXRlRGF0ZS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDcmVhdGVEYXRlLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCkNyZWF0ZURhdGUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENyZWF0ZURhdGUsIF9zdXBlcik7CgogIENyZWF0ZURhdGUucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NyZWF0ZSBhIG5ldyBEYXRlIG9iamVjdCBmcm9tIHN0cmluZyc7CgogIENyZWF0ZURhdGUucHJvdG90eXBlLmljb24gPSAndGltZSc7CgogIGZ1bmN0aW9uIENyZWF0ZURhdGUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGRhdGU7CiAgICAgIGlmIChkYXRhID09PSAibm93IiB8fCBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHRydWUpIHsKICAgICAgICBkYXRlID0gbmV3IERhdGU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGEpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRlKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIENyZWF0ZURhdGU7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENyZWF0ZURhdGU7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5VmFsdWUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgU2V0UHJvcGVydHlWYWx1ZSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpTZXRQcm9wZXJ0eVZhbHVlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTZXRQcm9wZXJ0eVZhbHVlLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBTZXRQcm9wZXJ0eVZhbHVlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucHJvcGVydHkgPSBudWxsOwogICAgdGhpcy52YWx1ZSA9IG51bGw7CiAgICB0aGlzLmRhdGEgPSBbXTsKICAgIHRoaXMuZ3JvdXBzID0gW107CiAgICB0aGlzLmtlZXAgPSBmYWxzZTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgcHJvcGVydHk6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIHZhbHVlOiBuZXcgbm9mbG8uUG9ydCgpLAogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgpLAogICAgICBrZWVwOiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmtlZXAub24oJ2RhdGEnLCBmdW5jdGlvbihrZWVwKSB7CiAgICAgIHJldHVybiBfdGhpcy5rZWVwID0ga2VlcCA9PT0gJ3RydWUnOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucHJvcGVydHkub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLnByb3BlcnR5ID0gZGF0YTsKICAgICAgaWYgKF90aGlzLnZhbHVlICYmIF90aGlzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmFkZFByb3BlcnRpZXMoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMudmFsdWUub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLnZhbHVlID0gZGF0YTsKICAgICAgaWYgKF90aGlzLnByb3BlcnR5ICYmIF90aGlzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmFkZFByb3BlcnRpZXMoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChfdGhpcy5wcm9wZXJ0eSAmJiBfdGhpcy52YWx1ZSkgewogICAgICAgIF90aGlzLmFkZFByb3BlcnR5KHsKICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICBncm91cDogX3RoaXMuZ3JvdXBzLnNsaWNlKDApCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5kYXRhLnB1c2goewogICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgZ3JvdXA6IF90aGlzLmdyb3Vwcy5zbGljZSgwKQogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnBvcCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF90aGlzLnByb3BlcnR5ICYmIF90aGlzLnZhbHVlKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgICBpZiAoIV90aGlzLmtlZXApIHsKICAgICAgICByZXR1cm4gX3RoaXMudmFsdWUgPSBudWxsOwogICAgICB9CiAgICB9KTsKICB9CgogIFNldFByb3BlcnR5VmFsdWUucHJvdG90eXBlLmFkZFByb3BlcnR5ID0gZnVuY3Rpb24ob2JqZWN0KSB7CiAgICB2YXIgZ3JvdXAsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYsIF9yZWYxLCBfcmVzdWx0czsKICAgIG9iamVjdC5kYXRhW3RoaXMucHJvcGVydHldID0gdGhpcy52YWx1ZTsKICAgIF9yZWYgPSBvYmplY3QuZ3JvdXA7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgZ3JvdXAgPSBfcmVmW19pXTsKICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9CiAgICB0aGlzLm91dFBvcnRzLm91dC5zZW5kKG9iamVjdC5kYXRhKTsKICAgIF9yZWYxID0gb2JqZWN0Lmdyb3VwOwogICAgX3Jlc3VsdHMgPSBbXTsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICBncm91cCA9IF9yZWYxW19qXTsKICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpKTsKICAgIH0KICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICBTZXRQcm9wZXJ0eVZhbHVlLnByb3RvdHlwZS5hZGRQcm9wZXJ0aWVzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgb2JqZWN0LCBfaSwgX2xlbiwgX3JlZjsKICAgIF9yZWYgPSB0aGlzLmRhdGE7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgb2JqZWN0ID0gX3JlZltfaV07CiAgICAgIHRoaXMuYWRkUHJvcGVydHkob2JqZWN0KTsKICAgIH0KICAgIHRoaXMuZGF0YSA9IFtdOwogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICB9OwoKICByZXR1cm4gU2V0UHJvcGVydHlWYWx1ZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU2V0UHJvcGVydHlWYWx1ZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvQ2FsbE1ldGhvZC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDYWxsTWV0aG9kLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCkNhbGxNZXRob2QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENhbGxNZXRob2QsIF9zdXBlcik7CgogIENhbGxNZXRob2QucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gImNhbGwgYSBtZXRob2Qgb24gYW4gb2JqZWN0IjsKCiAgQ2FsbE1ldGhvZC5wcm90b3R5cGUuaWNvbiA9ICdnZWFyJzsKCiAgZnVuY3Rpb24gQ2FsbE1ldGhvZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLm1ldGhvZCA9IG51bGw7CiAgICB0aGlzLmFyZ3MgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBtZXRob2Q6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKSwKICAgICAgImFyZ3VtZW50cyI6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpLAogICAgICBlcnJvcjogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgbXNnOwogICAgICBpZiAoIV90aGlzLm1ldGhvZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIWRhdGFbX3RoaXMubWV0aG9kXSkgewogICAgICAgIG1zZyA9ICJNZXRob2QgJyIgKyBfdGhpcy5tZXRob2QgKyAiJyBub3QgYXZhaWxhYmxlIjsKICAgICAgICBpZiAoX3RoaXMub3V0UG9ydHMuZXJyb3IuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgICBfdGhpcy5vdXRQb3J0cy5lcnJvci5zZW5kKG1zZyk7CiAgICAgICAgICBfdGhpcy5vdXRQb3J0cy5lcnJvci5kaXNjb25uZWN0KCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGFbX3RoaXMubWV0aG9kXS5hcHBseShkYXRhLCBfdGhpcy5hcmdzKSk7CiAgICAgIHJldHVybiBfdGhpcy5hcmdzID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5tZXRob2Qub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5tZXRob2QgPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImFyZ3VtZW50cyJdLm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5hcmdzID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siYXJndW1lbnRzIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5hcmdzLnB1c2goZGF0YSk7CiAgICB9KTsKICB9CgogIHJldHVybiBDYWxsTWV0aG9kOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDYWxsTWV0aG9kOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWZsb3cvaW5kZXguanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewovKgogKiBUaGlzIGZpbGUgY2FuIGJlIHVzZWQgZm9yIGdlbmVyYWwgbGlicmFyeSBmZWF0dXJlcyBvZiBmbG93LgogKgogKiBUaGUgbGlicmFyeSBmZWF0dXJlcyBjYW4gYmUgbWFkZSBhdmFpbGFibGUgYXMgQ29tbW9uSlMgbW9kdWxlcyB0aGF0IHRoZQogKiBjb21wb25lbnRzIGluIHRoaXMgcHJvamVjdCB1dGlsaXplLgogKi8KCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1mbG93L2NvbXBvbmVudC5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7Im5hbWUiOiJub2Zsby1mbG93IiwiZGVzY3JpcHRpb24iOiJGbG93IENvbnRyb2wgZm9yIE5vRmxvIiwiYXV0aG9yIjoiSGVucmkgQmVyZ2l1cyA8aGVucmkuYmVyZ2l1c0Bpa2kuZmk+IiwicmVwbyI6Im5vZmxvL25vZmxvLWRvbSIsInZlcnNpb24iOiIwLjIuMCIsImtleXdvcmRzIjpbXSwiZGVwZW5kZW5jaWVzIjp7Im5vZmxvL25vZmxvIjoiKiJ9LCJzY3JpcHRzIjpbImNvbXBvbmVudHMvQ29uY2F0LmNvZmZlZSIsImNvbXBvbmVudHMvR2F0ZS5jb2ZmZWUiLCJpbmRleC5qcyJdLCJqc29uIjpbImNvbXBvbmVudC5qc29uIl0sIm5vZmxvIjp7Imljb24iOiJyYW5kb20iLCJjb21wb25lbnRzIjp7IkNvbmNhdCI6ImNvbXBvbmVudHMvQ29uY2F0LmNvZmZlZSIsIkdhdGUiOiJjb21wb25lbnRzL0dhdGUuY29mZmVlIn19fScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZmxvdy9jb21wb25lbnRzL0NvbmNhdC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb25jYXQsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKQ29uY2F0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhDb25jYXQsIF9zdXBlcik7CgogIENvbmNhdC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnR2F0aGVycyBkYXRhIGZyb20gYWxsIGluY29taW5nIGNvbm5lY3Rpb25zIGFuZCBzZW5kc1wKICB0aGVtIHRvZ2V0aGVyIGluIG9yZGVyIG9mIGNvbm5lY3Rpb24nOwoKICBmdW5jdGlvbiBDb25jYXQoKSB7CiAgICB2YXIgc3Vic2NyaWJlZCwKICAgICAgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5idWZmZXJzID0ge307CiAgICB0aGlzLmhhc0Nvbm5lY3RlZCA9IHt9OwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uQXJyYXlQb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHN1YnNjcmliZWQgPSBmYWxzZTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignY29ubmVjdCcsIGZ1bmN0aW9uKHNvY2tldCkgewogICAgICB2YXIgaWQsIF9pLCBfbGVuLCBfcmVmOwogICAgICBfdGhpcy5oYXNDb25uZWN0ZWRbX3RoaXMuaW5Qb3J0c1siaW4iXS5zb2NrZXRzLmluZGV4T2Yoc29ja2V0KV0gPSB0cnVlOwogICAgICBpZiAoIXN1YnNjcmliZWQpIHsKICAgICAgICBfcmVmID0gX3RoaXMuaW5Qb3J0c1siaW4iXS5zb2NrZXRzOwogICAgICAgIGZvciAoaWQgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpZCA9ICsrX2kpIHsKICAgICAgICAgIHNvY2tldCA9IF9yZWZbaWRdOwogICAgICAgICAgX3RoaXMuc3Vic2NyaWJlU29ja2V0KGlkKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN1YnNjcmliZWQgPSB0cnVlOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNvY2tldCwgX2ksIF9sZW4sIF9yZWY7CiAgICAgIF9yZWYgPSBfdGhpcy5pblBvcnRzWyJpbiJdLnNvY2tldHM7CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIHNvY2tldCA9IF9yZWZbX2ldOwogICAgICAgIGlmIChzb2NrZXQuaXNDb25uZWN0ZWQoKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgICBfdGhpcy5jbGVhckJ1ZmZlcnMoKTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIENvbmNhdC5wcm90b3R5cGUuY2xlYXJCdWZmZXJzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZGF0YSwgaWQsIF9yZWY7CiAgICBfcmVmID0gdGhpcy5idWZmZXJzOwogICAgZm9yIChpZCBpbiBfcmVmKSB7CiAgICAgIGRhdGEgPSBfcmVmW2lkXTsKICAgICAgaWYgKCF0aGlzLmhhc0Nvbm5lY3RlZFtpZF0pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0KICAgIHRoaXMuYnVmZmVycyA9IHt9OwogICAgcmV0dXJuIHRoaXMuaGFzQ29ubmVjdGVkID0ge307CiAgfTsKCiAgQ29uY2F0LnByb3RvdHlwZS5zdWJzY3JpYmVTb2NrZXQgPSBmdW5jdGlvbihpZCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuYnVmZmVyc1tpZF0gPSBbXTsKICAgIHJldHVybiB0aGlzLmluUG9ydHNbImluIl0uc29ja2V0c1tpZF0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmICh0eXBlb2YgX3RoaXMuYnVmZmVyc1tpZF0gIT09ICdvYmplY3QnKSB7CiAgICAgICAgX3RoaXMuYnVmZmVyc1tpZF0gPSBbXTsKICAgICAgfQogICAgICBfdGhpcy5idWZmZXJzW2lkXS5wdXNoKGRhdGEpOwogICAgICByZXR1cm4gX3RoaXMuY2hlY2tTZW5kKCk7CiAgICB9KTsKICB9OwoKICBDb25jYXQucHJvdG90eXBlLmNoZWNrU2VuZCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGJ1ZmZlciwgaWQsIHNvY2tldCwgX2ksIF9sZW4sIF9yZWYsIF9yZWYxLCBfcmVzdWx0czsKICAgIF9yZWYgPSB0aGlzLmluUG9ydHNbImluIl0uc29ja2V0czsKICAgIGZvciAoaWQgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpZCA9ICsrX2kpIHsKICAgICAgc29ja2V0ID0gX3JlZltpZF07CiAgICAgIGlmICghdGhpcy5idWZmZXJzW2lkXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIXRoaXMuYnVmZmVyc1tpZF0ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CiAgICBfcmVmMSA9IHRoaXMuYnVmZmVyczsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKGlkIGluIF9yZWYxKSB7CiAgICAgIGJ1ZmZlciA9IF9yZWYxW2lkXTsKICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLm91dFBvcnRzLm91dC5zZW5kKGJ1ZmZlci5zaGlmdCgpKSk7CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHM7CiAgfTsKCiAgcmV0dXJuIENvbmNhdDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgQ29uY2F0Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWZsb3cvY29tcG9uZW50cy9HYXRlLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEdhdGUsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKR2F0ZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR2F0ZSwgX3N1cGVyKTsKCiAgR2F0ZS5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnVGhpcyBjb21wb25lbnQgZm9yd2FyZHMgcmVjZWl2ZWQgcGFja2V0cyB3aGVuIHRoZSBnYXRlIGlzIG9wZW4nOwoKICBmdW5jdGlvbiBHYXRlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnYWxsJyksCiAgICAgIG9wZW46IG5ldyBub2Zsby5Qb3J0KCdiYW5nJyksCiAgICAgIGNsb3NlOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnYWxsJykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKCFfdGhpcy5vcGVuKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICBpZiAoIV90aGlzLm9wZW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBpZiAoIV90aGlzLm9wZW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIGlmICghX3RoaXMub3BlbikgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoIV90aGlzLm9wZW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5vcGVuLm9uKCdkYXRhJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vcGVuID0gdHJ1ZTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmNsb3NlLm9uKCdkYXRhJywgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBHYXRlOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBHYXRlOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWRvbS9pbmRleC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Ci8qCiAqIFRoaXMgZmlsZSBjYW4gYmUgdXNlZCBmb3IgZ2VuZXJhbCBsaWJyYXJ5IGZlYXR1cmVzIHRoYXQgYXJlIGV4cG9zZWQgYXMgQ29tbW9uSlMgbW9kdWxlcwogKiB0aGF0IHRoZSBjb21wb25lbnRzIHRoZW4gdXRpbGl6ZQogKi8KCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvLWRvbSIsImRlc2NyaXB0aW9uIjoiRG9jdW1lbnQgT2JqZWN0IE1vZGVsIGNvbXBvbmVudHMgZm9yIE5vRmxvIiwiYXV0aG9yIjoiSGVucmkgQmVyZ2l1cyA8aGVucmkuYmVyZ2l1c0Bpa2kuZmk+IiwicmVwbyI6Im5vZmxvL25vZmxvLWRvbSIsInZlcnNpb24iOiIwLjAuMSIsImtleXdvcmRzIjpbXSwiZGVwZW5kZW5jaWVzIjp7Im5vZmxvL25vZmxvIjoiKiJ9LCJzY3JpcHRzIjpbImNvbXBvbmVudHMvQWRkQ2xhc3MuY29mZmVlIiwiY29tcG9uZW50cy9BcHBlbmRDaGlsZC5jb2ZmZWUiLCJjb21wb25lbnRzL0NyZWF0ZUVsZW1lbnQuY29mZmVlIiwiY29tcG9uZW50cy9DcmVhdGVGcmFnbWVudC5jb2ZmZWUiLCJjb21wb25lbnRzL0dldEF0dHJpYnV0ZS5jb2ZmZWUiLCJjb21wb25lbnRzL0dldEVsZW1lbnQuY29mZmVlIiwiY29tcG9uZW50cy9IYXNDbGFzcy5jb2ZmZWUiLCJjb21wb25lbnRzL1JlYWRIdG1sLmNvZmZlZSIsImNvbXBvbmVudHMvUmVtb3ZlRWxlbWVudC5jb2ZmZWUiLCJjb21wb25lbnRzL1NldEF0dHJpYnV0ZS5jb2ZmZWUiLCJjb21wb25lbnRzL1dyaXRlSHRtbC5jb2ZmZWUiLCJjb21wb25lbnRzL1JlbW92ZUNsYXNzLmNvZmZlZSIsImNvbXBvbmVudHMvUmVxdWVzdEFuaW1hdGlvbkZyYW1lLmNvZmZlZSIsImluZGV4LmpzIl0sImpzb24iOlsiY29tcG9uZW50Lmpzb24iXSwibm9mbG8iOnsiaWNvbiI6Imh0bWw1IiwiY29tcG9uZW50cyI6eyJBZGRDbGFzcyI6ImNvbXBvbmVudHMvQWRkQ2xhc3MuY29mZmVlIiwiQXBwZW5kQ2hpbGQiOiJjb21wb25lbnRzL0FwcGVuZENoaWxkLmNvZmZlZSIsIkNyZWF0ZUVsZW1lbnQiOiJjb21wb25lbnRzL0NyZWF0ZUVsZW1lbnQuY29mZmVlIiwiQ3JlYXRlRnJhZ21lbnQiOiJjb21wb25lbnRzL0NyZWF0ZUZyYWdtZW50LmNvZmZlZSIsIkdldEF0dHJpYnV0ZSI6ImNvbXBvbmVudHMvR2V0QXR0cmlidXRlLmNvZmZlZSIsIkdldEVsZW1lbnQiOiJjb21wb25lbnRzL0dldEVsZW1lbnQuY29mZmVlIiwiSGFzQ2xhc3MiOiJjb21wb25lbnRzL0hhc0NsYXNzLmNvZmZlZSIsIldyaXRlSHRtbCI6ImNvbXBvbmVudHMvV3JpdGVIdG1sLmNvZmZlZSIsIlJlYWRIdG1sIjoiY29tcG9uZW50cy9SZWFkSHRtbC5jb2ZmZWUiLCJSZW1vdmVFbGVtZW50IjoiY29tcG9uZW50cy9SZW1vdmVFbGVtZW50LmNvZmZlZSIsIlNldEF0dHJpYnV0ZSI6ImNvbXBvbmVudHMvU2V0QXR0cmlidXRlLmNvZmZlZSIsIlJlbW92ZUNsYXNzIjoiY29tcG9uZW50cy9SZW1vdmVDbGFzcy5jb2ZmZWUiLCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiOiJjb21wb25lbnRzL1JlcXVlc3RBbmltYXRpb25GcmFtZS5jb2ZmZWUifX19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9BZGRDbGFzcy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBBZGRDbGFzcywgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpBZGRDbGFzcyA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQWRkQ2xhc3MsIF9zdXBlcik7CgogIEFkZENsYXNzLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdBZGQgYSBjbGFzcyB0byBhbiBlbGVtZW50JzsKCiAgZnVuY3Rpb24gQWRkQ2xhc3MoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5lbGVtZW50ID0gbnVsbDsKICAgIHRoaXNbImNsYXNzIl0gPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgICJjbGFzcyI6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7fTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5lbGVtZW50ID0gZGF0YTsKICAgICAgaWYgKF90aGlzWyJjbGFzcyJdKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmFkZENsYXNzKCk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJjbGFzcyJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpc1siY2xhc3MiXSA9IGRhdGE7CiAgICAgIGlmIChfdGhpcy5lbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmFkZENsYXNzKCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgQWRkQ2xhc3MucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpc1siY2xhc3MiXSk7CiAgfTsKCiAgcmV0dXJuIEFkZENsYXNzOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBBZGRDbGFzczsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9BcHBlbmRDaGlsZC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBBcHBlbmRDaGlsZCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpBcHBlbmRDaGlsZCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQXBwZW5kQ2hpbGQsIF9zdXBlcik7CgogIEFwcGVuZENoaWxkLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdBcHBlbmQgZWxlbWVudHMgYXMgY2hpbGRyZW4gb2YgYSBwYXJlbnQgZWxlbWVudCc7CgogIGZ1bmN0aW9uIEFwcGVuZENoaWxkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucGFyZW50ID0gbnVsbDsKICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgcGFyZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIGNoaWxkOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0ge307CiAgICB0aGlzLmluUG9ydHMucGFyZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5wYXJlbnQgPSBkYXRhOwogICAgICBpZiAoX3RoaXMuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmFwcGVuZCgpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5jaGlsZC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKCFfdGhpcy5wYXJlbnQpIHsKICAgICAgICBfdGhpcy5jaGlsZHJlbi5wdXNoKGRhdGEpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMucGFyZW50LmFwcGVuZENoaWxkKGRhdGEpOwogICAgfSk7CiAgfQoKICBBcHBlbmRDaGlsZC5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgY2hpbGQsIF9pLCBfbGVuLCBfcmVmOwogICAgX3JlZiA9IHRoaXMuY2hpbGRyZW47CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgY2hpbGQgPSBfcmVmW19pXTsKICAgICAgdGhpcy5wYXJlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpOwogICAgfQogICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4gPSBbXTsKICB9OwoKICByZXR1cm4gQXBwZW5kQ2hpbGQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEFwcGVuZENoaWxkOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL0NyZWF0ZUVsZW1lbnQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ3JlYXRlRWxlbWVudCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpDcmVhdGVFbGVtZW50ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhDcmVhdGVFbGVtZW50LCBfc3VwZXIpOwoKICBDcmVhdGVFbGVtZW50LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdDcmVhdGUgYSBuZXcgRE9NIEVsZW1lbnQnOwoKICBmdW5jdGlvbiBDcmVhdGVFbGVtZW50KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgdGFnbmFtZTogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLnRhZ25hbWUub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5lbGVtZW50LnNlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkYXRhKSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy50YWduYW1lLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5lbGVtZW50LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIENyZWF0ZUVsZW1lbnQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENyZWF0ZUVsZW1lbnQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvQ3JlYXRlRnJhZ21lbnQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ3JlYXRlRnJhZ21lbnQsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKQ3JlYXRlRnJhZ21lbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENyZWF0ZUZyYWdtZW50LCBfc3VwZXIpOwoKICBDcmVhdGVGcmFnbWVudC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnQ3JlYXRlIGEgbmV3IERPTSBEb2N1bWVudEZyYWdtZW50JzsKCiAgZnVuY3Rpb24gQ3JlYXRlRnJhZ21lbnQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgZnJhZ21lbnQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuZnJhZ21lbnQuc2VuZChkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmZyYWdtZW50LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIENyZWF0ZUZyYWdtZW50OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDcmVhdGVGcmFnbWVudDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9HZXRBdHRyaWJ1dGUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgR2V0QXR0cmlidXRlLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkdldEF0dHJpYnV0ZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR2V0QXR0cmlidXRlLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBHZXRBdHRyaWJ1dGUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5hdHRyaWJ1dGUgPSBudWxsOwogICAgdGhpcy5lbGVtZW50ID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBhdHRyaWJ1dGU6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmVsZW1lbnQub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLmVsZW1lbnQgPSBkYXRhOwogICAgICBpZiAoX3RoaXMuYXR0cmlidXRlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmdldEF0dHJpYnV0ZSgpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5hdHRyaWJ1dGUub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLmF0dHJpYnV0ZSA9IGRhdGE7CiAgICAgIGlmIChfdGhpcy5lbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmdldEF0dHJpYnV0ZSgpOwogICAgICB9CiAgICB9KTsKICB9CgogIEdldEF0dHJpYnV0ZS5wcm90b3R5cGUuZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgdmFsdWU7CiAgICB2YWx1ZSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGUpOwogICAgdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cCh0aGlzLmF0dHJpYnV0ZSk7CiAgICB0aGlzLm91dFBvcnRzLm91dC5zZW5kKHZhbHVlKTsKICAgIHRoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogIH07CgogIHJldHVybiBHZXRBdHRyaWJ1dGU7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEdldEF0dHJpYnV0ZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9HZXRFbGVtZW50LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEdldEVsZW1lbnQsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKR2V0RWxlbWVudCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR2V0RWxlbWVudCwgX3N1cGVyKTsKCiAgR2V0RWxlbWVudC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnR2V0IGEgRE9NIGVsZW1lbnQgbWF0Y2hpbmcgYSBxdWVyeSc7CgogIGZ1bmN0aW9uIEdldEVsZW1lbnQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5jb250YWluZXIgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIHNlbGVjdG9yOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIGVycm9yOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmICh0eXBlb2YgZGF0YS5xdWVyeVNlbGVjdG9yICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgX3RoaXMuZXJyb3IoJ0dpdmVuIGNvbnRhaW5lciBkb2VzblwndCBzdXBwb3J0IHF1ZXJ5U2VsZWN0b3JzJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5jb250YWluZXIgPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc2VsZWN0b3Iub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5zZWxlY3QoZGF0YSk7CiAgICB9KTsKICB9CgogIEdldEVsZW1lbnQucHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7CiAgICB2YXIgZWwsIGVsZW1lbnQsIF9pLCBfbGVuOwogICAgaWYgKHRoaXMuY29udGFpbmVyKSB7CiAgICAgIGVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB9IGVsc2UgewogICAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOwogICAgfQogICAgaWYgKCFlbC5sZW5ndGgpIHsKICAgICAgdGhpcy5lcnJvcigiTm8gZWxlbWVudCBtYXRjaGluZyAnIiArIHNlbGVjdG9yICsgIicgZm91bmQiKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBlbC5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBlbGVtZW50ID0gZWxbX2ldOwogICAgICB0aGlzLm91dFBvcnRzLmVsZW1lbnQuc2VuZChlbGVtZW50KTsKICAgIH0KICAgIHJldHVybiB0aGlzLm91dFBvcnRzLmVsZW1lbnQuZGlzY29ubmVjdCgpOwogIH07CgogIEdldEVsZW1lbnQucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24obXNnKSB7CiAgICBpZiAodGhpcy5vdXRQb3J0cy5lcnJvci5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5lcnJvci5zZW5kKG5ldyBFcnJvcihtc2cpKTsKICAgICAgdGhpcy5vdXRQb3J0cy5lcnJvci5kaXNjb25uZWN0KCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRocm93IG5ldyBFcnJvcihtc2cpOwogIH07CgogIHJldHVybiBHZXRFbGVtZW50OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBHZXRFbGVtZW50Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL0hhc0NsYXNzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEhhc0NsYXNzLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkhhc0NsYXNzID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhIYXNDbGFzcywgX3N1cGVyKTsKCiAgSGFzQ2xhc3MucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NoZWNrIGlmIGFuIGVsZW1lbnQgaGFzIGEgZ2l2ZW4gY2xhc3MnOwoKICBmdW5jdGlvbiBIYXNDbGFzcygpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmVsZW1lbnQgPSBudWxsOwogICAgdGhpc1siY2xhc3MiXSA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIGVsZW1lbnQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgImNsYXNzIjogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBtaXNzZWQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5lbGVtZW50ID0gZGF0YTsKICAgICAgaWYgKF90aGlzWyJjbGFzcyJdKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmNoZWNrQ2xhc3MoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZWxlbWVudC5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5lbGVtZW50LmRpc2Nvbm5lY3QoKTsKICAgICAgaWYgKCFfdGhpcy5vdXRQb3J0cy5taXNzZWQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5taXNzZWQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImNsYXNzIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzWyJjbGFzcyJdID0gZGF0YTsKICAgICAgaWYgKF90aGlzLmVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gX3RoaXMuY2hlY2tDbGFzcygpOwogICAgICB9CiAgICB9KTsKICB9CgogIEhhc0NsYXNzLnByb3RvdHlwZS5jaGVja0NsYXNzID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyh0aGlzWyJjbGFzcyJdKSkgewogICAgICB0aGlzLm91dFBvcnRzLmVsZW1lbnQuc2VuZCh0aGlzLmVsZW1lbnQpOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoIXRoaXMub3V0UG9ydHMubWlzc2VkLmlzQXR0YWNoZWQoKSkgewogICAgICByZXR1cm47CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5taXNzZWQuc2VuZCh0aGlzLmVsZW1lbnQpOwogIH07CgogIHJldHVybiBIYXNDbGFzczsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgSGFzQ2xhc3M7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVhZEh0bWwuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUmVhZEh0bWwsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKUmVhZEh0bWwgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFJlYWRIdG1sLCBfc3VwZXIpOwoKICBSZWFkSHRtbC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnUmVhZCBIVE1MIGZyb20gYW4gZXhpc3RpbmcgZWxlbWVudCc7CgogIGZ1bmN0aW9uIFJlYWRIdG1sKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgY29udGFpbmVyOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBodG1sOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLmluUG9ydHMuY29udGFpbmVyLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5vdXRQb3J0cy5odG1sLnNlbmQoZGF0YS5pbm5lckhUTUwpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuaHRtbC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBSZWFkSHRtbDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVhZEh0bWw7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVtb3ZlRWxlbWVudC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBSZW1vdmVFbGVtZW50LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClJlbW92ZUVsZW1lbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFJlbW92ZUVsZW1lbnQsIF9zdXBlcik7CgogIFJlbW92ZUVsZW1lbnQucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1JlbW92ZSBhbiBlbGVtZW50IGZyb20gRE9NJzsKCiAgZnVuY3Rpb24gUmVtb3ZlRWxlbWVudCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIGVsZW1lbnQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICBpZiAoIWVsZW1lbnQucGFyZW50Tm9kZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW1lbnQpOwogICAgfSk7CiAgfQoKICByZXR1cm4gUmVtb3ZlRWxlbWVudDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVtb3ZlRWxlbWVudDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9TZXRBdHRyaWJ1dGUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgU2V0QXR0cmlidXRlLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClNldEF0dHJpYnV0ZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoU2V0QXR0cmlidXRlLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBTZXRBdHRyaWJ1dGUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5hdHRyaWJ1dGUgPSBudWxsOwogICAgdGhpcy52YWx1ZSA9IG51bGw7CiAgICB0aGlzLmVsZW1lbnQgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIGF0dHJpYnV0ZTogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpLAogICAgICB2YWx1ZTogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmVsZW1lbnQub24oJ2RhdGEnLCBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIF90aGlzLmVsZW1lbnQgPSBlbGVtZW50OwogICAgICBpZiAoX3RoaXMuYXR0cmlidXRlICYmIF90aGlzLnZhbHVlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnNldEF0dHJpYnV0ZSgpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5hdHRyaWJ1dGUub24oJ2RhdGEnLCBmdW5jdGlvbihhdHRyaWJ1dGUpIHsKICAgICAgX3RoaXMuYXR0cmlidXRlID0gYXR0cmlidXRlOwogICAgICBpZiAoX3RoaXMuZWxlbWVudCAmJiBfdGhpcy52YWx1ZSkgewogICAgICAgIHJldHVybiBfdGhpcy5zZXRBdHRyaWJ1dGUoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMudmFsdWUub24oJ2RhdGEnLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICBfdGhpcy52YWx1ZSA9IF90aGlzLm5vcm1hbGl6ZVZhbHVlKHZhbHVlKTsKICAgICAgaWYgKF90aGlzLmF0dHJpYnV0ZSAmJiBfdGhpcy5lbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnNldEF0dHJpYnV0ZSgpOwogICAgICB9CiAgICB9KTsKICB9CgogIFNldEF0dHJpYnV0ZS5wcm90b3R5cGUuc2V0QXR0cmlidXRlID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKHRoaXMuYXR0cmlidXRlLCB0aGlzLnZhbHVlKTsKICAgIHRoaXMudmFsdWUgPSBudWxsOwogICAgaWYgKHRoaXMub3V0UG9ydHMuZWxlbWVudC5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5lbGVtZW50LnNlbmQodGhpcy5lbGVtZW50KTsKICAgICAgcmV0dXJuIHRoaXMub3V0UG9ydHMuZWxlbWVudC5kaXNjb25uZWN0KCk7CiAgICB9CiAgfTsKCiAgU2V0QXR0cmlidXRlLnByb3RvdHlwZS5ub3JtYWxpemVWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICB2YXIga2V5LCBuZXdWYWwsIHZhbDsKICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7CiAgICAgIGlmICh0b1N0cmluZy5jYWxsKHZhbHVlKSAhPT0gJ1tvYmplY3QgQXJyYXldJykgewogICAgICAgIG5ld1ZhbCA9IFtdOwogICAgICAgIGZvciAoa2V5IGluIHZhbHVlKSB7CiAgICAgICAgICB2YWwgPSB2YWx1ZVtrZXldOwogICAgICAgICAgbmV3VmFsLnB1c2godmFsKTsKICAgICAgICB9CiAgICAgICAgdmFsdWUgPSBuZXdWYWw7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlLmpvaW4oJyAnKTsKICAgIH0KICAgIHJldHVybiB2YWx1ZTsKICB9OwoKICByZXR1cm4gU2V0QXR0cmlidXRlOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBTZXRBdHRyaWJ1dGU7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvV3JpdGVIdG1sLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFdyaXRlSHRtbCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpXcml0ZUh0bWwgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFdyaXRlSHRtbCwgX3N1cGVyKTsKCiAgV3JpdGVIdG1sLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdXcml0ZSBIVE1MIGluc2lkZSBhbiBleGlzdGluZyBlbGVtZW50JzsKCiAgZnVuY3Rpb24gV3JpdGVIdG1sKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDsKICAgIHRoaXMuaHRtbCA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIGh0bWw6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKSwKICAgICAgY29udGFpbmVyOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBjb250YWluZXI6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5odG1sLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5odG1sID0gZGF0YTsKICAgICAgaWYgKF90aGlzLmNvbnRhaW5lcikgewogICAgICAgIHJldHVybiBfdGhpcy53cml0ZUh0bWwoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuY29udGFpbmVyLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5jb250YWluZXIgPSBkYXRhOwogICAgICBpZiAoX3RoaXMuaHRtbCAhPT0gbnVsbCkgewogICAgICAgIHJldHVybiBfdGhpcy53cml0ZUh0bWwoKTsKICAgICAgfQogICAgfSk7CiAgfQoKICBXcml0ZUh0bWwucHJvdG90eXBlLndyaXRlSHRtbCA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5odG1sOwogICAgdGhpcy5odG1sID0gbnVsbDsKICAgIGlmICh0aGlzLm91dFBvcnRzLmNvbnRhaW5lci5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5jb250YWluZXIuc2VuZCh0aGlzLmNvbnRhaW5lcik7CiAgICAgIHJldHVybiB0aGlzLm91dFBvcnRzLmNvbnRhaW5lci5kaXNjb25uZWN0KCk7CiAgICB9CiAgfTsKCiAgcmV0dXJuIFdyaXRlSHRtbDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgV3JpdGVIdG1sOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL1JlbW92ZUNsYXNzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlbW92ZUNsYXNzLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClJlbW92ZUNsYXNzID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSZW1vdmVDbGFzcywgX3N1cGVyKTsKCiAgUmVtb3ZlQ2xhc3MucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1JlbW92ZSBhIGNsYXNzIGZyb20gYW4gZWxlbWVudCc7CgogIGZ1bmN0aW9uIFJlbW92ZUNsYXNzKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuZWxlbWVudCA9IG51bGw7CiAgICB0aGlzWyJjbGFzcyJdID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICAiY2xhc3MiOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0ge307CiAgICB0aGlzLmluUG9ydHMuZWxlbWVudC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgX3RoaXMuZWxlbWVudCA9IGRhdGE7CiAgICAgIGlmIChfdGhpc1siY2xhc3MiXSkgewogICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVDbGFzcygpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siY2xhc3MiXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgX3RoaXNbImNsYXNzIl0gPSBkYXRhOwogICAgICBpZiAoX3RoaXMuZWxlbWVudCkgewogICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVDbGFzcygpOwogICAgICB9CiAgICB9KTsKICB9CgogIFJlbW92ZUNsYXNzLnByb3RvdHlwZS5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXNbImNsYXNzIl0pOwogIH07CgogIHJldHVybiBSZW1vdmVDbGFzczsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVtb3ZlQ2xhc3M7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlcXVlc3RBbmltYXRpb25GcmFtZSwgbm9mbG8sIHJlcXVlc3RBbmltYXRpb25GcmFtZSwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBmdW5jdGlvbihjYWxsYmFjaywgZWxlbWVudCkgewogIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgIHJldHVybiBjYWxsYmFjaygrbmV3IERhdGUoKSk7CiAgfSwgMTAwMCAvIDYwKTsKfTsKClJlcXVlc3RBbmltYXRpb25GcmFtZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoUmVxdWVzdEFuaW1hdGlvbkZyYW1lLCBfc3VwZXIpOwoKICBSZXF1ZXN0QW5pbWF0aW9uRnJhbWUucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1NlbmRzIGJhbmdzIHRoYXQgY29ycmVzcG9uZCB3aXRoIHNjcmVlbiByZWZyZXNoIHJhdGUuJzsKCiAgUmVxdWVzdEFuaW1hdGlvbkZyYW1lLnByb3RvdHlwZS5pY29uID0gJ2ZpbG0nOwoKICBmdW5jdGlvbiBSZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIHN0YXJ0OiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpLAogICAgICBzdG9wOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLnN0YXJ0Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5ydW5uaW5nID0gdHJ1ZTsKICAgICAgcmV0dXJuIF90aGlzLmFuaW1hdGUoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnN0b3Aub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgICB9KTsKICB9CgogIFJlcXVlc3RBbmltYXRpb25GcmFtZS5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMucnVubmluZykgewogICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRlLmJpbmQodGhpcykpOwogICAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuc2VuZCh0cnVlKTsKICAgIH0KICB9OwoKICBSZXF1ZXN0QW5pbWF0aW9uRnJhbWUucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgfTsKCiAgcmV0dXJuIFJlcXVlc3RBbmltYXRpb25GcmFtZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVxdWVzdEFuaW1hdGlvbkZyYW1lOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWNzcy9pbmRleC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Ci8qCiAqIFRoaXMgZmlsZSBjYW4gYmUgdXNlZCBmb3IgZ2VuZXJhbCBsaWJyYXJ5IGZlYXR1cmVzIHRoYXQgYXJlIGV4cG9zZWQgYXMgQ29tbW9uSlMgbW9kdWxlcwogKiB0aGF0IHRoZSBjb21wb25lbnRzIHRoZW4gdXRpbGl6ZQogKi8KCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jc3MvY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvLWNzcyIsImRlc2NyaXB0aW9uIjoiQ2FzY2FkaW5nIFN0eWxlIFNoZWV0cyBjb21wb25lbnRzIGZvciBOb0ZsbyIsImF1dGhvciI6IkhlbnJpIEJlcmdpdXMgPGhlbnJpLmJlcmdpdXNAaWtpLmZpPiIsInJlcG8iOiJub2Zsby9ub2Zsby1jc3MiLCJ2ZXJzaW9uIjoiMC4wLjEiLCJrZXl3b3JkcyI6W10sImRlcGVuZGVuY2llcyI6eyJub2Zsby9ub2ZsbyI6IioifSwic2NyaXB0cyI6WyJjb21wb25lbnRzL01vdmVFbGVtZW50LmNvZmZlZSIsImNvbXBvbmVudHMvUm90YXRlRWxlbWVudC5jb2ZmZWUiLCJjb21wb25lbnRzL1NldEVsZW1lbnRUb3AuY29mZmVlIiwiaW5kZXguanMiXSwianNvbiI6WyJjb21wb25lbnQuanNvbiJdLCJub2ZsbyI6eyJpY29uIjoiY3NzMyIsImNvbXBvbmVudHMiOnsiTW92ZUVsZW1lbnQiOiJjb21wb25lbnRzL01vdmVFbGVtZW50LmNvZmZlZSIsIlJvdGF0ZUVsZW1lbnQiOiJjb21wb25lbnRzL1JvdGF0ZUVsZW1lbnQuY29mZmVlIiwiU2V0RWxlbWVudFRvcCI6ImNvbXBvbmVudHMvU2V0RWxlbWVudFRvcC5jb2ZmZWUifX19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jc3MvY29tcG9uZW50cy9Nb3ZlRWxlbWVudC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBNb3ZlRWxlbWVudCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpNb3ZlRWxlbWVudCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoTW92ZUVsZW1lbnQsIF9zdXBlcik7CgogIE1vdmVFbGVtZW50LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdDaGFuZ2UgdGhlIGNvb3JkaW5hdGVzIG9mIGEgRE9NIGVsZW1lbnQnOwoKICBNb3ZlRWxlbWVudC5wcm90b3R5cGUuaWNvbiA9ICdtb3ZlJzsKCiAgZnVuY3Rpb24gTW92ZUVsZW1lbnQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5lbGVtZW50ID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBwb2ludDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICB4OiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyksCiAgICAgIHk6IG5ldyBub2Zsby5Qb3J0KCdudW1iZXInKSwKICAgICAgejogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmVsZW1lbnQub24oJ2RhdGEnLCBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIHJldHVybiBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnBvaW50Lm9uKCdkYXRhJywgZnVuY3Rpb24ocG9pbnQpIHsKICAgICAgX3RoaXMuc2V0UG9zaXRpb24oJ2xlZnQnLCAiIiArIHBvaW50LnggKyAicHgiKTsKICAgICAgcmV0dXJuIF90aGlzLnNldFBvc2l0aW9uKCd0b3AnLCAiIiArIHBvaW50LnkgKyAicHgiKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLngub24oJ2RhdGEnLCBmdW5jdGlvbih4KSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXRQb3NpdGlvbignbGVmdCcsICIiICsgeCArICJweCIpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMueS5vbignZGF0YScsIGZ1bmN0aW9uKHkpIHsKICAgICAgcmV0dXJuIF90aGlzLnNldFBvc2l0aW9uKCd0b3AnLCAiIiArIHkgKyAicHgiKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnoub24oJ2RhdGEnLCBmdW5jdGlvbih6KSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXRQb3NpdGlvbignekluZGV4Jywgeik7CiAgICB9KTsKICB9CgogIE1vdmVFbGVtZW50LnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKGF0dHIsIHZhbHVlKSB7CiAgICB0aGlzLmVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnOwogICAgcmV0dXJuIHRoaXMuZWxlbWVudC5zdHlsZVthdHRyXSA9IHZhbHVlOwogIH07CgogIHJldHVybiBNb3ZlRWxlbWVudDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgTW92ZUVsZW1lbnQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tY3NzL2NvbXBvbmVudHMvUm90YXRlRWxlbWVudC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBSb3RhdGVFbGVtZW50LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClJvdGF0ZUVsZW1lbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFJvdGF0ZUVsZW1lbnQsIF9zdXBlcik7CgogIFJvdGF0ZUVsZW1lbnQucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NoYW5nZSB0aGUgY29vcmRpbmF0ZXMgb2YgYSBET00gZWxlbWVudCc7CgogIFJvdGF0ZUVsZW1lbnQucHJvdG90eXBlLmljb24gPSAncm90YXRlLXJpZ2h0JzsKCiAgZnVuY3Rpb24gUm90YXRlRWxlbWVudCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmVsZW1lbnQgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIHBlcmNlbnQ6IG5ldyBub2Zsby5Qb3J0KCdudW1iZXInKSwKICAgICAgZGVncmVlczogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmVsZW1lbnQub24oJ2RhdGEnLCBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIHJldHVybiBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnBlcmNlbnQub24oJ2RhdGEnLCBmdW5jdGlvbihwZXJjZW50KSB7CiAgICAgIHZhciBkZWdyZWVzOwogICAgICBpZiAoIV90aGlzLmVsZW1lbnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZGVncmVlcyA9IDM2MCAqIHBlcmNlbnQgJSAzNjA7CiAgICAgIHJldHVybiBfdGhpcy5zZXRSb3RhdGlvbihfdGhpcy5lbGVtZW50LCBkZWdyZWVzKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmRlZ3JlZXMub24oJ2RhdGEnLCBmdW5jdGlvbihkZWdyZWVzKSB7CiAgICAgIGlmICghX3RoaXMuZWxlbWVudCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuc2V0Um90YXRpb24oX3RoaXMuZWxlbWVudCwgZGVncmVlcyk7CiAgICB9KTsKICB9CgogIFJvdGF0ZUVsZW1lbnQucHJvdG90eXBlLnNldFJvdGF0aW9uID0gZnVuY3Rpb24oZWxlbWVudCwgZGVncmVlcykgewogICAgcmV0dXJuIHRoaXMuc2V0VmVuZG9yKGVsZW1lbnQsICJ0cmFuc2Zvcm0iLCAicm90YXRlKCIgKyBkZWdyZWVzICsgImRlZykiKTsKICB9OwoKICBSb3RhdGVFbGVtZW50LnByb3RvdHlwZS5zZXRWZW5kb3IgPSBmdW5jdGlvbihlbGVtZW50LCBwcm9wZXJ0eSwgdmFsdWUpIHsKICAgIHZhciBwcm9wZXJ0eUNhcDsKICAgIHByb3BlcnR5Q2FwID0gcHJvcGVydHkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wZXJ0eS5zdWJzdHIoMSk7CiAgICBlbGVtZW50LnN0eWxlWyJ3ZWJraXQiICsgcHJvcGVydHlDYXBdID0gdmFsdWU7CiAgICBlbGVtZW50LnN0eWxlWyJtb3oiICsgcHJvcGVydHlDYXBdID0gdmFsdWU7CiAgICBlbGVtZW50LnN0eWxlWyJtcyIgKyBwcm9wZXJ0eUNhcF0gPSB2YWx1ZTsKICAgIGVsZW1lbnQuc3R5bGVbIm8iICsgcHJvcGVydHlDYXBdID0gdmFsdWU7CiAgICByZXR1cm4gZWxlbWVudC5zdHlsZVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICB9OwoKICByZXR1cm4gUm90YXRlRWxlbWVudDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUm90YXRlRWxlbWVudDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jc3MvY29tcG9uZW50cy9TZXRFbGVtZW50VG9wLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFNldEVsZW1lbnRUb3AsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKU2V0RWxlbWVudFRvcCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoU2V0RWxlbWVudFRvcCwgX3N1cGVyKTsKCiAgU2V0RWxlbWVudFRvcC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnU2V0IGVsZW1lbnRcJ3MgQ1NTIHRvcCc7CgogIFNldEVsZW1lbnRUb3AucHJvdG90eXBlLmljb24gPSAncmVzaXplLXZlcnRpY2FsJzsKCiAgZnVuY3Rpb24gU2V0RWxlbWVudFRvcCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmVsZW1lbnQgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIHRvcDogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmVsZW1lbnQub24oJ2RhdGEnLCBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIHJldHVybiBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnRvcC5vbignZGF0YScsIGZ1bmN0aW9uKHRvcCkgewogICAgICBpZiAoIV90aGlzLmVsZW1lbnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgX3RoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CiAgICAgIHJldHVybiBfdGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9ICIiICsgdG9wICsgInB4IjsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFNldEVsZW1lbnRUb3A7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFNldEVsZW1lbnRUb3A7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tbWF0aC9pbmRleC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Ci8qCiAqIFRoaXMgZmlsZSBjYW4gYmUgdXNlZCBmb3IgZ2VuZXJhbCBsaWJyYXJ5IGZlYXR1cmVzIG9mIG5vZmxvLW1hdGguCiAqCiAqIFRoZSBsaWJyYXJ5IGZlYXR1cmVzIGNhbiBiZSBtYWRlIGF2YWlsYWJsZSBhcyBDb21tb25KUyBtb2R1bGVzIHRoYXQgdGhlCiAqIGNvbXBvbmVudHMgaW4gdGhpcyBwcm9qZWN0IHV0aWxpemUuCiAqLwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvLW1hdGgiLCJkZXNjcmlwdGlvbiI6Ik1hdGhlbWF0aWNhbCBjb21wb25lbnRzIGZvciBOb0ZsbyIsImF1dGhvciI6IkhlbnJpIEJlcmdpdXMgPGhlbnJpLmJlcmdpdXNAaWtpLmZpPiIsInJlcG8iOiJub2Zsby9ub2Zsby1tYXRoIiwidmVyc2lvbiI6IjAuMC4xIiwia2V5d29yZHMiOltdLCJkZXBlbmRlbmNpZXMiOnsibm9mbG8vbm9mbG8iOiIqIn0sInNjcmlwdHMiOlsiY29tcG9uZW50cy9BZGQuY29mZmVlIiwiY29tcG9uZW50cy9TdWJ0cmFjdC5jb2ZmZWUiLCJjb21wb25lbnRzL011bHRpcGx5LmNvZmZlZSIsImNvbXBvbmVudHMvRGl2aWRlLmNvZmZlZSIsImNvbXBvbmVudHMvQ2FsY3VsYXRlQW5nbGUuY29mZmVlIiwiY29tcG9uZW50cy9DYWxjdWxhdGVEaXN0YW5jZS5jb2ZmZWUiLCJjb21wb25lbnRzL0NvbXBhcmUuY29mZmVlIiwiY29tcG9uZW50cy9Db3VudFN1bS5jb2ZmZWUiLCJsaWIvTWF0aENvbXBvbmVudC5jb2ZmZWUiLCJpbmRleC5qcyJdLCJqc29uIjpbImNvbXBvbmVudC5qc29uIl0sIm5vZmxvIjp7Imljb24iOiJwbHVzLXNpZ24iLCJjb21wb25lbnRzIjp7IkFkZCI6ImNvbXBvbmVudHMvQWRkLmNvZmZlZSIsIlN1YnRyYWN0IjoiY29tcG9uZW50cy9TdWJ0cmFjdC5jb2ZmZWUiLCJNdWx0aXBseSI6ImNvbXBvbmVudHMvTXVsdGlwbHkuY29mZmVlIiwiRGl2aWRlIjoiY29tcG9uZW50cy9EaXZpZGUuY29mZmVlIiwiQ2FsY3VsYXRlQW5nbGUiOiJjb21wb25lbnRzL0NhbGN1bGF0ZUFuZ2xlLmNvZmZlZSIsIkNhbGN1bGF0ZURpc3RhbmNlIjoiY29tcG9uZW50cy9DYWxjdWxhdGVEaXN0YW5jZS5jb2ZmZWUiLCJDb21wYXJlIjoiY29tcG9uZW50cy9Db21wYXJlLmNvZmZlZSIsIkNvdW50U3VtIjoiY29tcG9uZW50cy9Db3VudFN1bS5jb2ZmZWUifX19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvQWRkLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEFkZCwgTWF0aENvbXBvbmVudCwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCk1hdGhDb21wb25lbnQgPSByZXF1aXJlKCcuLi9saWIvTWF0aENvbXBvbmVudCcpLk1hdGhDb21wb25lbnQ7CgpBZGQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEFkZCwgX3N1cGVyKTsKCiAgQWRkLnByb3RvdHlwZS5pY29uID0gJ3BsdXMnOwoKICBmdW5jdGlvbiBBZGQoKSB7CiAgICBBZGQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgJ2F1Z2VuZCcsICdhZGRlbmQnLCAnc3VtJyk7CiAgfQoKICBBZGQucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKGF1Z2VuZCwgYWRkZW5kKSB7CiAgICByZXR1cm4gYXVnZW5kICsgYWRkZW5kOwogIH07CgogIHJldHVybiBBZGQ7Cgp9KShNYXRoQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBBZGQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tbWF0aC9jb21wb25lbnRzL1N1YnRyYWN0LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIE1hdGhDb21wb25lbnQsIFN1YnRyYWN0LAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKTWF0aENvbXBvbmVudCA9IHJlcXVpcmUoJy4uL2xpYi9NYXRoQ29tcG9uZW50JykuTWF0aENvbXBvbmVudDsKClN1YnRyYWN0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTdWJ0cmFjdCwgX3N1cGVyKTsKCiAgU3VidHJhY3QucHJvdG90eXBlLmljb24gPSAnbWludXMnOwoKICBmdW5jdGlvbiBTdWJ0cmFjdCgpIHsKICAgIFN1YnRyYWN0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsICdtaW51ZW5kJywgJ3N1YnRyYWhlbmQnLCAnZGlmZmVyZW5jZScpOwogIH0KCiAgU3VidHJhY3QucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKG1pbnVlbmQsIHN1YnRyYWhlbmQpIHsKICAgIHJldHVybiBtaW51ZW5kIC0gc3VidHJhaGVuZDsKICB9OwoKICByZXR1cm4gU3VidHJhY3Q7Cgp9KShNYXRoQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBTdWJ0cmFjdDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvTXVsdGlwbHkuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgTWF0aENvbXBvbmVudCwgTXVsdGlwbHksCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgpNYXRoQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vbGliL01hdGhDb21wb25lbnQnKS5NYXRoQ29tcG9uZW50OwoKTXVsdGlwbHkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKE11bHRpcGx5LCBfc3VwZXIpOwoKICBNdWx0aXBseS5wcm90b3R5cGUuaWNvbiA9ICdhc3Rlcmlzayc7CgogIGZ1bmN0aW9uIE11bHRpcGx5KCkgewogICAgTXVsdGlwbHkuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgJ211bHRpcGxpY2FuZCcsICdtdWx0aXBsaWVyJywgJ3Byb2R1Y3QnKTsKICB9CgogIE11bHRpcGx5LnByb3RvdHlwZS5jYWxjdWxhdGUgPSBmdW5jdGlvbihtdWx0aXBsaWNhbmQsIG11bHRpcGxpZXIpIHsKICAgIHJldHVybiBtdWx0aXBsaWNhbmQgKiBtdWx0aXBsaWVyOwogIH07CgogIHJldHVybiBNdWx0aXBseTsKCn0pKE1hdGhDb21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IE11bHRpcGx5Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9EaXZpZGUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRGl2aWRlLCBNYXRoQ29tcG9uZW50LAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKTWF0aENvbXBvbmVudCA9IHJlcXVpcmUoJy4uL2xpYi9NYXRoQ29tcG9uZW50JykuTWF0aENvbXBvbmVudDsKCkRpdmlkZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoRGl2aWRlLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBEaXZpZGUoKSB7CiAgICBEaXZpZGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgJ2RpdmlkZW5kJywgJ2Rpdmlzb3InLCAncXVvdGllbnQnKTsKICB9CgogIERpdmlkZS5wcm90b3R5cGUuY2FsY3VsYXRlID0gZnVuY3Rpb24oZGl2aWRlbmQsIGRpdmlzb3IpIHsKICAgIHJldHVybiBkaXZpZGVuZCAvIGRpdmlzb3I7CiAgfTsKCiAgcmV0dXJuIERpdmlkZTsKCn0pKE1hdGhDb21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IERpdmlkZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvQ2FsY3VsYXRlQW5nbGUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ2FsY3VsYXRlQW5nbGUsIE1hdGhDb21wb25lbnQsCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgpNYXRoQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vbGliL01hdGhDb21wb25lbnQnKS5NYXRoQ29tcG9uZW50OwoKQ2FsY3VsYXRlQW5nbGUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENhbGN1bGF0ZUFuZ2xlLCBfc3VwZXIpOwoKICBDYWxjdWxhdGVBbmdsZS5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnQ2FsY3VsYXRlIHRoZSBhbmdsZSBiZXR3ZWVuIHR3byBwb2ludHMnOwoKICBDYWxjdWxhdGVBbmdsZS5wcm90b3R5cGUuaWNvbiA9ICdjb21wYXNzJzsKCiAgZnVuY3Rpb24gQ2FsY3VsYXRlQW5nbGUoKSB7CiAgICBDYWxjdWxhdGVBbmdsZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCAnb3JpZ2luJywgJ2Rlc3RpbmF0aW9uJywgJ2FuZ2xlJywgJ29iamVjdCcpOwogIH0KCiAgQ2FsY3VsYXRlQW5nbGUucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKG9yaWdpbiwgZGVzdGluYXRpb24pIHsKICAgIHZhciBhbmdsZSwgZGVsdGFYLCBkZWx0YVk7CiAgICBkZWx0YVggPSBkZXN0aW5hdGlvbi54IC0gb3JpZ2luLng7CiAgICBkZWx0YVkgPSBkZXN0aW5hdGlvbi55IC0gb3JpZ2luLnk7CiAgICBvcmlnaW4gPSBudWxsOwogICAgZGVzdGluYXRpb24gPSBudWxsOwogICAgYW5nbGUgPSAoTWF0aC5hdGFuMihkZWx0YVksIGRlbHRhWCkgKiAxODAgLyBNYXRoLlBJKSArIDkwOwogICAgaWYgKGFuZ2xlIDwgMCkgewogICAgICBhbmdsZSA9IGFuZ2xlICsgMzYwOwogICAgfQogICAgcmV0dXJuIGFuZ2xlOwogIH07CgogIHJldHVybiBDYWxjdWxhdGVBbmdsZTsKCn0pKE1hdGhDb21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENhbGN1bGF0ZUFuZ2xlOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9DYWxjdWxhdGVEaXN0YW5jZS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDYWxjdWxhdGVEaXN0YW5jZSwgTWF0aENvbXBvbmVudCwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCk1hdGhDb21wb25lbnQgPSByZXF1aXJlKCcuLi9saWIvTWF0aENvbXBvbmVudCcpLk1hdGhDb21wb25lbnQ7CgpDYWxjdWxhdGVEaXN0YW5jZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQ2FsY3VsYXRlRGlzdGFuY2UsIF9zdXBlcik7CgogIENhbGN1bGF0ZURpc3RhbmNlLnByb3RvdHlwZS5pY29uID0gJ2Fycm93LXJpZ2h0JzsKCiAgQ2FsY3VsYXRlRGlzdGFuY2UucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NhbGN1bGF0ZSB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0d28gcG9pbnRzJzsKCiAgZnVuY3Rpb24gQ2FsY3VsYXRlRGlzdGFuY2UoKSB7CiAgICBDYWxjdWxhdGVEaXN0YW5jZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCAnb3JpZ2luJywgJ2Rlc3RpbmF0aW9uJywgJ2Rpc3RhbmNlJywgJ29iamVjdCcpOwogIH0KCiAgQ2FsY3VsYXRlRGlzdGFuY2UucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKG9yaWdpbiwgZGVzdGluYXRpb24pIHsKICAgIHZhciBkZWx0YVgsIGRlbHRhWSwgZGlzdGFuY2U7CiAgICBkZWx0YVggPSBkZXN0aW5hdGlvbi54IC0gb3JpZ2luLng7CiAgICBkZWx0YVkgPSBkZXN0aW5hdGlvbi55IC0gb3JpZ2luLnk7CiAgICBvcmlnaW4gPSBudWxsOwogICAgZGVzdGluYXRpb24gPSBudWxsOwogICAgZGlzdGFuY2UgPSBNYXRoLnNxcnQoTWF0aC5wb3coZGVsdGFYLCAyKSArIE1hdGgucG93KGRlbHRhWSwgMikpOwogICAgcmV0dXJuIGRpc3RhbmNlOwogIH07CgogIHJldHVybiBDYWxjdWxhdGVEaXN0YW5jZTsKCn0pKE1hdGhDb21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENhbGN1bGF0ZURpc3RhbmNlOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9Db21wYXJlLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIENvbXBhcmUsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKQ29tcGFyZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQ29tcGFyZSwgX3N1cGVyKTsKCiAgQ29tcGFyZS5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnQ29tcGFyZSB0d28gbnVtYmVycyc7CgogIENvbXBhcmUucHJvdG90eXBlLmljb24gPSAnY2hlY2snOwoKICBmdW5jdGlvbiBDb21wYXJlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMub3BlcmF0b3IgPSAnPT0nOwogICAgdGhpcy52YWx1ZSA9IG51bGw7CiAgICB0aGlzLmNvbXBhcmlzb24gPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICB2YWx1ZTogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpLAogICAgICBjb21wYXJpc29uOiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyksCiAgICAgIG9wZXJhdG9yOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBwYXNzOiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyksCiAgICAgIGZhaWw6IG5ldyBub2Zsby5Qb3J0KCdudW1iZXInKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5vcGVyYXRvci5vbignZGF0YScsIGZ1bmN0aW9uKG9wZXJhdG9yKSB7CiAgICAgIF90aGlzLm9wZXJhdG9yID0gb3BlcmF0b3I7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy52YWx1ZS5vbignZGF0YScsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7CiAgICAgIGlmIChfdGhpcy5jb21wYXJpc29uKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmUoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMudmFsdWUub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLnBhc3MuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuY29tcGFyaXNvbi5vbignZGF0YScsIGZ1bmN0aW9uKGNvbXBhcmlzb24pIHsKICAgICAgX3RoaXMuY29tcGFyaXNvbiA9IGNvbXBhcmlzb247CiAgICAgIGlmIChfdGhpcy52YWx1ZSkgewogICAgICAgIHJldHVybiBfdGhpcy5jb21wYXJlKCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgQ29tcGFyZS5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uKCkgewogICAgc3dpdGNoICh0aGlzLm9wZXJhdG9yKSB7CiAgICAgIGNhc2UgJ2VxJzoKICAgICAgY2FzZSAnPT0nOgogICAgICAgIGlmICh0aGlzLnZhbHVlID09PSB0aGlzLmNvbXBhcmlzb24pIHsKICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQodGhpcy52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlICduZSc6CiAgICAgIGNhc2UgJyE9JzoKICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gdGhpcy5jb21wYXJpc29uKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kKHRoaXMudmFsdWUpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZ3QnOgogICAgICBjYXNlICc+JzoKICAgICAgICBpZiAodGhpcy52YWx1ZSA+IHRoaXMuY29tcGFyaXNvbikgewogICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZCh0aGlzLnZhbHVlKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2x0JzoKICAgICAgY2FzZSAnPCc6CiAgICAgICAgaWYgKHRoaXMudmFsdWUgPCB0aGlzLmNvbXBhcmlzb24pIHsKICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQodGhpcy52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdnZSc6CiAgICAgIGNhc2UgJz49JzoKICAgICAgICBpZiAodGhpcy52YWx1ZSA+PSB0aGlzLmNvbXBhcmlzb24pIHsKICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQodGhpcy52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdsZSc6CiAgICAgIGNhc2UgJzw9JzoKICAgICAgICBpZiAodGhpcy52YWx1ZSA8PSB0aGlzLmNvbXBhcmlzb24pIHsKICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQodGhpcy52YWx1ZSk7CiAgICAgICAgfQogICAgfQogICAgaWYgKCF0aGlzLm91dFBvcnRzLmZhaWwuaXNBdHRhY2hlZCgpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMub3V0UG9ydHMuZmFpbC5zZW5kKHRoaXMudmFsdWUpOwogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMuZmFpbC5kaXNjb25uZWN0KCk7CiAgfTsKCiAgQ29tcGFyZS5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKHZhbCkgewogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMucGFzcy5zZW5kKHRoaXMudmFsdWUpOwogIH07CgogIHJldHVybiBDb21wYXJlOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDb21wYXJlOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9Db3VudFN1bS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb3VudFN1bSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpDb3VudFN1bSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQ291bnRTdW0sIF9zdXBlcik7CgogIGZ1bmN0aW9uIENvdW50U3VtKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucG9ydENvdW50cyA9IHt9OwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdudW1iZXInKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLkFycmF5UG9ydCgnbnVtYmVyJykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhLCBwb3J0SWQpIHsKICAgICAgcmV0dXJuIF90aGlzLmNvdW50KHBvcnRJZCwgZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKHNvY2tldCwgcG9ydElkKSB7CiAgICAgIHZhciBfaSwgX2xlbiwgX3JlZjsKICAgICAgX3JlZiA9IF90aGlzLmluUG9ydHNbImluIl0uc29ja2V0czsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgc29ja2V0ID0gX3JlZltfaV07CiAgICAgICAgaWYgKHNvY2tldC5pc0Nvbm5lY3RlZCgpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBDb3VudFN1bS5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbihwb3J0LCBkYXRhKSB7CiAgICB2YXIgaWQsIHNvY2tldCwgc3VtLCBfaSwgX2xlbiwgX3JlZjsKICAgIHN1bSA9IDA7CiAgICB0aGlzLnBvcnRDb3VudHNbcG9ydF0gPSBkYXRhOwogICAgX3JlZiA9IHRoaXMuaW5Qb3J0c1siaW4iXS5zb2NrZXRzOwogICAgZm9yIChpZCA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGlkID0gKytfaSkgewogICAgICBzb2NrZXQgPSBfcmVmW2lkXTsKICAgICAgaWYgKHR5cGVvZiB0aGlzLnBvcnRDb3VudHNbaWRdID09PSAndW5kZWZpbmVkJykgewogICAgICAgIHRoaXMucG9ydENvdW50c1tpZF0gPSAwOwogICAgICB9CiAgICAgIHN1bSArPSB0aGlzLnBvcnRDb3VudHNbaWRdOwogICAgfQogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMub3V0LnNlbmQoc3VtKTsKICB9OwoKICByZXR1cm4gQ291bnRTdW07Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENvdW50U3VtOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW1hdGgvbGliL01hdGhDb21wb25lbnQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgTWF0aENvbXBvbmVudCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpNYXRoQ29tcG9uZW50ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhNYXRoQ29tcG9uZW50LCBfc3VwZXIpOwoKICBmdW5jdGlvbiBNYXRoQ29tcG9uZW50KHByaW1hcnksIHNlY29uZGFyeSwgcmVzLCBpbnB1dFR5cGUpIHsKICAgIHZhciBjYWxjdWxhdGUsCiAgICAgIF90aGlzID0gdGhpczsKICAgIGlmIChpbnB1dFR5cGUgPT0gbnVsbCkgewogICAgICBpbnB1dFR5cGUgPSAnbnVtYmVyJzsKICAgIH0KICAgIHRoaXMuaW5Qb3J0cyA9IHt9OwogICAgdGhpcy5vdXRQb3J0cyA9IHt9OwogICAgdGhpcy5pblBvcnRzW3ByaW1hcnldID0gbmV3IG5vZmxvLlBvcnQoaW5wdXRUeXBlKTsKICAgIHRoaXMuaW5Qb3J0c1tzZWNvbmRhcnldID0gbmV3IG5vZmxvLlBvcnQoaW5wdXRUeXBlKTsKICAgIHRoaXMuaW5Qb3J0cy5jbGVhciA9IG5ldyBub2Zsby5Qb3J0KCdiYW5nJyk7CiAgICB0aGlzLm91dFBvcnRzW3Jlc10gPSBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyk7CiAgICB0aGlzLnByaW1hcnkgPSB7CiAgICAgIHZhbHVlOiBudWxsLAogICAgICBncm91cDogW10sCiAgICAgIGRpc2Nvbm5lY3Q6IGZhbHNlCiAgICB9OwogICAgdGhpcy5zZWNvbmRhcnkgPSBudWxsOwogICAgdGhpcy5ncm91cHMgPSBbXTsKICAgIGNhbGN1bGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgZ3JvdXAsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYsIF9yZWYxOwogICAgICBfcmVmID0gX3RoaXMucHJpbWFyeS5ncm91cDsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgZ3JvdXAgPSBfcmVmW19pXTsKICAgICAgICBfdGhpcy5vdXRQb3J0c1tyZXNdLmJlZ2luR3JvdXAoZ3JvdXApOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzW3Jlc10uc2VuZChfdGhpcy5jYWxjdWxhdGUoX3RoaXMucHJpbWFyeS52YWx1ZSwgX3RoaXMuc2Vjb25kYXJ5KSk7CiAgICAgIF9yZWYxID0gX3RoaXMucHJpbWFyeS5ncm91cDsKICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjEubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgICAgZ3JvdXAgPSBfcmVmMVtfal07CiAgICAgICAgX3RoaXMub3V0UG9ydHNbcmVzXS5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5wcmltYXJ5LmRpc2Nvbm5lY3QpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHNbcmVzXS5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgIH07CiAgICB0aGlzLmluUG9ydHNbcHJpbWFyeV0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbcHJpbWFyeV0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLnByaW1hcnkgPSB7CiAgICAgICAgdmFsdWU6IGRhdGEsCiAgICAgICAgZ3JvdXA6IF90aGlzLmdyb3Vwcy5zbGljZSgwKSwKICAgICAgICBkaXNjb25uZWN0OiBmYWxzZQogICAgICB9OwogICAgICBpZiAoX3RoaXMuc2Vjb25kYXJ5ICE9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZSgpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1twcmltYXJ5XS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3Vwcy5wb3AoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzW3ByaW1hcnldLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLnByaW1hcnkuZGlzY29ubmVjdCA9IHRydWU7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0c1tyZXNdLmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzW3NlY29uZGFyeV0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLnNlY29uZGFyeSA9IGRhdGE7CiAgICAgIGlmIChfdGhpcy5wcmltYXJ5LnZhbHVlICE9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZSgpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5jbGVhci5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGdyb3VwLCBfaSwgX2xlbiwgX3JlZjsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzW3Jlc10uaXNDb25uZWN0ZWQoKSkgewogICAgICAgIF9yZWYgPSBfdGhpcy5wcmltYXJ5Lmdyb3VwOwogICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgICAgZ3JvdXAgPSBfcmVmW19pXTsKICAgICAgICAgIF90aGlzLm91dFBvcnRzW3Jlc10uZW5kR3JvdXAoKTsKICAgICAgICB9CiAgICAgICAgaWYgKF90aGlzLnByaW1hcnkuZGlzY29ubmVjdCkgewogICAgICAgICAgX3RoaXMub3V0UG9ydHNbcmVzXS5kaXNjb25uZWN0KCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIF90aGlzLnByaW1hcnkgPSB7CiAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgZ3JvdXA6IFtdLAogICAgICAgIGRpc2Nvbm5lY3Q6IGZhbHNlCiAgICAgIH07CiAgICAgIF90aGlzLnNlY29uZGFyeSA9IG51bGw7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMgPSBbXTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIE1hdGhDb21wb25lbnQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5NYXRoQ29tcG9uZW50ID0gTWF0aENvbXBvbmVudDsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jb3JlL2luZGV4LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKLyoKICogVGhpcyBmaWxlIGNhbiBiZSB1c2VkIGZvciBnZW5lcmFsIGxpYnJhcnkgZmVhdHVyZXMgb2YgY29yZS4KICoKICogVGhlIGxpYnJhcnkgZmVhdHVyZXMgY2FuIGJlIG1hZGUgYXZhaWxhYmxlIGFzIENvbW1vbkpTIG1vZHVsZXMgdGhhdCB0aGUKICogY29tcG9uZW50cyBpbiB0aGlzIHByb2plY3QgdXRpbGl6ZS4KICovCgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnQuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJuYW1lIjoibm9mbG8tY29yZSIsImRlc2NyaXB0aW9uIjoiTm9GbG8gRXNzZW50aWFscyIsInJlcG8iOiJub2Zsby9ub2Zsby1jb3JlIiwidmVyc2lvbiI6IjAuMS4wIiwiYXV0aG9yIjp7Im5hbWUiOiJIZW5yaSBCZXJnaXVzIiwiZW1haWwiOiJoZW5yaS5iZXJnaXVzQGlraS5maSJ9LCJjb250cmlidXRvcnMiOlt7Im5hbWUiOiJLZW5uZXRoIEthbiIsImVtYWlsIjoia2VuaGthbkBnbWFpbC5jb20ifSx7Im5hbWUiOiJSeWFuIFNoYXciLCJlbWFpbCI6InJ5YW5zaGF3QHVuYy5lZHUifV0sImtleXdvcmRzIjpbXSwiZGVwZW5kZW5jaWVzIjp7Im5vZmxvL25vZmxvIjoiKiIsImNvbXBvbmVudC91bmRlcnNjb3JlIjoiKiJ9LCJzY3JpcHRzIjpbImNvbXBvbmVudHMvQ2FsbGJhY2suY29mZmVlIiwiY29tcG9uZW50cy9EaXNjb25uZWN0QWZ0ZXJQYWNrZXQuY29mZmVlIiwiY29tcG9uZW50cy9Ecm9wLmNvZmZlZSIsImNvbXBvbmVudHMvR3JvdXAuY29mZmVlIiwiY29tcG9uZW50cy9LaWNrLmNvZmZlZSIsImNvbXBvbmVudHMvTWVyZ2UuY29mZmVlIiwiY29tcG9uZW50cy9PdXRwdXQuY29mZmVlIiwiY29tcG9uZW50cy9SZXBlYXQuY29mZmVlIiwiY29tcG9uZW50cy9SZXBlYXRBc3luYy5jb2ZmZWUiLCJjb21wb25lbnRzL1NwbGl0LmNvZmZlZSIsImNvbXBvbmVudHMvUnVuSW50ZXJ2YWwuY29mZmVlIiwiY29tcG9uZW50cy9NYWtlRnVuY3Rpb24uY29mZmVlIiwiaW5kZXguanMiXSwianNvbiI6WyJjb21wb25lbnQuanNvbiJdLCJub2ZsbyI6eyJjb21wb25lbnRzIjp7IkNhbGxiYWNrIjoiY29tcG9uZW50cy9DYWxsYmFjay5jb2ZmZWUiLCJEaXNjb25uZWN0QWZ0ZXJQYWNrZXQiOiJjb21wb25lbnRzL0Rpc2Nvbm5lY3RBZnRlclBhY2tldC5jb2ZmZWUiLCJEcm9wIjoiY29tcG9uZW50cy9Ecm9wLmNvZmZlZSIsIkdyb3VwIjoiY29tcG9uZW50cy9Hcm91cC5jb2ZmZWUiLCJLaWNrIjoiY29tcG9uZW50cy9LaWNrLmNvZmZlZSIsIk1lcmdlIjoiY29tcG9uZW50cy9NZXJnZS5jb2ZmZWUiLCJPdXRwdXQiOiJjb21wb25lbnRzL091dHB1dC5jb2ZmZWUiLCJSZXBlYXQiOiJjb21wb25lbnRzL1JlcGVhdC5jb2ZmZWUiLCJSZXBlYXRBc3luYyI6ImNvbXBvbmVudHMvUmVwZWF0QXN5bmMuY29mZmVlIiwiU3BsaXQiOiJjb21wb25lbnRzL1NwbGl0LmNvZmZlZSIsIlJ1bkludGVydmFsIjoiY29tcG9uZW50cy9SdW5JbnRlcnZhbC5jb2ZmZWUiLCJNYWtlRnVuY3Rpb24iOiJjb21wb25lbnRzL01ha2VGdW5jdGlvbi5jb2ZmZWUifX19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvQ2FsbGJhY2suanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ2FsbGJhY2ssIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKXyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUnKS5fOwoKQ2FsbGJhY2sgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENhbGxiYWNrLCBfc3VwZXIpOwoKICBDYWxsYmFjay5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnVGhpcyBjb21wb25lbnQgY2FsbHMgYSBnaXZlbiBjYWxsYmFjayBmdW5jdGlvbiBmb3IgZWFjaFwKICBJUCBpdCByZWNlaXZlcy4gIFRoZSBDYWxsYmFjayBjb21wb25lbnQgaXMgdHlwaWNhbGx5IHVzZWQgdG8gY29ubmVjdFwKICBOb0ZsbyB3aXRoIGV4dGVybmFsIE5vZGUuanMgY29kZS4nOwoKICBDYWxsYmFjay5wcm90b3R5cGUuaWNvbiA9ICdzaWdub3V0JzsKCiAgZnVuY3Rpb24gQ2FsbGJhY2soKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5jYWxsYmFjayA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKSwKICAgICAgY2FsbGJhY2s6IG5ldyBub2Zsby5Qb3J0KCdmdW5jdGlvbicpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgZXJyb3I6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5jYWxsYmFjay5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKCFfLmlzRnVuY3Rpb24oZGF0YSkpIHsKICAgICAgICBfdGhpcy5lcnJvcignVGhlIHByb3ZpZGVkIGNhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbicpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuY2FsbGJhY2sgPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmICghX3RoaXMuY2FsbGJhY2spIHsKICAgICAgICBfdGhpcy5lcnJvcignTm8gY2FsbGJhY2sgcHJvdmlkZWQnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLmNhbGxiYWNrKGRhdGEpOwogICAgfSk7CiAgfQoKICBDYWxsYmFjay5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihtc2cpIHsKICAgIGlmICh0aGlzLm91dFBvcnRzLmVycm9yLmlzQXR0YWNoZWQoKSkgewogICAgICB0aGlzLm91dFBvcnRzLmVycm9yLnNlbmQobmV3IEVycm9yKG1zZykpOwogICAgICB0aGlzLm91dFBvcnRzLmVycm9yLmRpc2Nvbm5lY3QoKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7CiAgfTsKCiAgcmV0dXJuIENhbGxiYWNrOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDYWxsYmFjazsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvRGlzY29ubmVjdEFmdGVyUGFja2V0LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIERpc2Nvbm5lY3RBZnRlclBhY2tldCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpEaXNjb25uZWN0QWZ0ZXJQYWNrZXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKERpc2Nvbm5lY3RBZnRlclBhY2tldCwgX3N1cGVyKTsKCiAgRGlzY29ubmVjdEFmdGVyUGFja2V0LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdGb3J3YXJkcyBhbnkgcGFja2V0cywgYnV0IGFsc28gc2VuZHMgYSBkaXNjb25uZWN0IGFmdGVyIGVhY2ggb2YgdGhlbSc7CgogIERpc2Nvbm5lY3RBZnRlclBhY2tldC5wcm90b3R5cGUuaWNvbiA9ICdwYXVzZSc7CgogIGZ1bmN0aW9uIERpc2Nvbm5lY3RBZnRlclBhY2tldCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gRGlzY29ubmVjdEFmdGVyUGFja2V0OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBEaXNjb25uZWN0QWZ0ZXJQYWNrZXQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0Ryb3AuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRHJvcCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpEcm9wID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhEcm9wLCBfc3VwZXIpOwoKICBEcm9wLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdUaGlzIGNvbXBvbmVudCBkcm9wcyBldmVyeSBwYWNrZXQgaXQgcmVjZWl2ZXMgd2l0aCBub1wKICBhY3Rpb24nOwoKICBEcm9wLnByb3RvdHlwZS5pY29uID0gJ3RyYXNoJzsKCiAgZnVuY3Rpb24gRHJvcCgpIHsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLkFycmF5UG9ydCgnYWxsJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0ge307CiAgfQoKICByZXR1cm4gRHJvcDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRHJvcDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvR3JvdXAuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgR3JvdXAsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKR3JvdXAgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEdyb3VwLCBfc3VwZXIpOwoKICBHcm91cC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnQWRkcyBhIHNldCBvZiBncm91cHMgYXJvdW5kIHRoZSBwYWNrZXRzIHJlY2VpdmVkIGF0IGVhY2ggY29ubmVjdGlvbic7CgogIEdyb3VwLnByb3RvdHlwZS5pY29uID0gJ3RhZ3MnOwoKICBmdW5jdGlvbiBHcm91cCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmdyb3VwcyA9IFtdOwogICAgdGhpcy5uZXdHcm91cHMgPSBbXTsKICAgIHRoaXMudGhyZXNob2xkID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLkFycmF5UG9ydCgnYWxsJyksCiAgICAgIGdyb3VwOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdzdHJpbmcnKSwKICAgICAgdGhyZXNob2xkOiBuZXcgbm9mbG8uUG9ydCgnaW50ZWdlcicpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnYWxsJykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGdyb3VwLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICAgIF9yZWYgPSBfdGhpcy5uZXdHcm91cHM7CiAgICAgIF9yZXN1bHRzID0gW107CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGdyb3VwID0gX3JlZltfaV07CiAgICAgICAgX3Jlc3VsdHMucHVzaChfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgZ3JvdXAsIF9pLCBfbGVuLCBfcmVmOwogICAgICBfcmVmID0gX3RoaXMubmV3R3JvdXBzOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmdyb3VwLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgZGlmZjsKICAgICAgaWYgKF90aGlzLnRocmVzaG9sZCkgewogICAgICAgIGRpZmYgPSBfdGhpcy5uZXdHcm91cHMubGVuZ3RoIC0gX3RoaXMudGhyZXNob2xkICsgMTsKICAgICAgICBpZiAoZGlmZiA+IDApIHsKICAgICAgICAgIF90aGlzLm5ld0dyb3VwcyA9IF90aGlzLm5ld0dyb3Vwcy5zbGljZShkaWZmKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm5ld0dyb3Vwcy5wdXNoKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMudGhyZXNob2xkLm9uKCdkYXRhJywgZnVuY3Rpb24odGhyZXNob2xkKSB7CiAgICAgIF90aGlzLnRocmVzaG9sZCA9IHRocmVzaG9sZDsKICAgIH0pOwogIH0KCiAgcmV0dXJuIEdyb3VwOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBHcm91cDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvS2ljay5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBLaWNrLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCktpY2sgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEtpY2ssIF9zdXBlcik7CgogIEtpY2sucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1RoaXMgY29tcG9uZW50IGdlbmVyYXRlcyBhIHNpbmdsZSBwYWNrZXQgYW5kIHNlbmRzIGl0IHRvXAogIHRoZSBvdXRwdXQgcG9ydC4gTW9zdGx5IHVzYWJsZSBmb3IgZGVidWdnaW5nLCBidXQgY2FuIGFsc28gYmUgdXNlZnVsXAogIGZvciBzdGFydGluZyB1cCBuZXR3b3Jrcy4nOwoKICBLaWNrLnByb3RvdHlwZS5pY29uID0gJ3NoYXJlJzsKCiAgZnVuY3Rpb24gS2ljaygpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRhdGEgPSB7CiAgICAgIHBhY2tldDogbnVsbCwKICAgICAgZ3JvdXA6IFtdCiAgICB9OwogICAgdGhpcy5ncm91cHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKSwKICAgICAgZGF0YTogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMucHVzaChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZGF0YS5ncm91cCA9IF90aGlzLmdyb3Vwcy5zbGljZSgwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMucG9wKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5zZW5kS2ljayhfdGhpcy5kYXRhKTsKICAgICAgcmV0dXJuIF90aGlzLmdyb3VwcyA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZGF0YS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmRhdGEucGFja2V0ID0gZGF0YTsKICAgIH0pOwogIH0KCiAgS2ljay5wcm90b3R5cGUuc2VuZEtpY2sgPSBmdW5jdGlvbihraWNrKSB7CiAgICB2YXIgZ3JvdXAsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYsIF9yZWYxOwogICAgX3JlZiA9IGtpY2suZ3JvdXA7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgZ3JvdXAgPSBfcmVmW19pXTsKICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9CiAgICB0aGlzLm91dFBvcnRzLm91dC5zZW5kKGtpY2sucGFja2V0KTsKICAgIF9yZWYxID0ga2ljay5ncm91cDsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICBncm91cCA9IF9yZWYxW19qXTsKICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0KICAgIHJldHVybiB0aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgfTsKCiAgcmV0dXJuIEtpY2s7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEtpY2s7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL01lcmdlLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIE1lcmdlLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCk1lcmdlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhNZXJnZSwgX3N1cGVyKTsKCiAgTWVyZ2UucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1RoaXMgY29tcG9uZW50IHJlY2VpdmVzIGRhdGEgb24gbXVsdGlwbGUgaW5wdXQgcG9ydHMgYW5kXAogICAgc2VuZHMgdGhlIHNhbWUgZGF0YSBvdXQgdG8gdGhlIGNvbm5lY3RlZCBvdXRwdXQgcG9ydCc7CgogIE1lcmdlLnByb3RvdHlwZS5pY29uID0gJ3Jlc2l6ZS1zbWFsbCc7CgogIGZ1bmN0aW9uIE1lcmdlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLkFycmF5UG9ydCgnYWxsJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmNvbm5lY3QoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNvY2tldCwgX2ksIF9sZW4sIF9yZWY7CiAgICAgIF9yZWYgPSBfdGhpcy5pblBvcnRzWyJpbiJdLnNvY2tldHM7CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIHNvY2tldCA9IF9yZWZbX2ldOwogICAgICAgIGlmIChzb2NrZXQuY29ubmVjdGVkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gTWVyZ2U7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IE1lcmdlOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWNvcmUvY29tcG9uZW50cy9PdXRwdXQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgT3V0cHV0LCBub2ZsbywgdXRpbCwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCmlmICghbm9mbG8uaXNCcm93c2VyKCkpIHsKICB1dGlsID0gcmVxdWlyZSgndXRpbCcpOwp9IGVsc2UgewogIHV0aWwgPSB7CiAgICBpbnNwZWN0OiBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBkYXRhOwogICAgfQogIH07Cn0KCk91dHB1dCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoT3V0cHV0LCBfc3VwZXIpOwoKICBPdXRwdXQucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1RoaXMgY29tcG9uZW50IHJlY2VpdmVzIGlucHV0IG9uIGEgc2luZ2xlIGlucG9ydCwgYW5kXAogICAgc2VuZHMgdGhlIGRhdGEgaXRlbXMgZGlyZWN0bHkgdG8gY29uc29sZS5sb2cnOwoKICBPdXRwdXQucHJvdG90eXBlLmljb24gPSAnYnVnJzsKCiAgZnVuY3Rpb24gT3V0cHV0KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMub3B0aW9ucyA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5BcnJheVBvcnQoJ2FsbCcpLAogICAgICBvcHRpb25zOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgX3RoaXMubG9nKGRhdGEpOwogICAgICBpZiAoX3RoaXMub3V0UG9ydHMub3V0LmlzQXR0YWNoZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLm91dC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMub3B0aW9ucy5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnNldE9wdGlvbnMoZGF0YSk7CiAgICB9KTsKICB9CgogIE91dHB1dC5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgIHZhciBrZXksIHZhbHVlLCBfcmVzdWx0czsKICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdPcHRpb25zIGlzIG5vdCBhbiBvYmplY3QnKTsKICAgIH0KICAgIGlmICh0aGlzLm9wdGlvbnMgPT0gbnVsbCkgewogICAgICB0aGlzLm9wdGlvbnMgPSB7fTsKICAgIH0KICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKGtleSBpbiBvcHRpb25zKSB7CiAgICAgIGlmICghX19oYXNQcm9wLmNhbGwob3B0aW9ucywga2V5KSkgY29udGludWU7CiAgICAgIHZhbHVlID0gb3B0aW9uc1trZXldOwogICAgICBfcmVzdWx0cy5wdXNoKHRoaXMub3B0aW9uc1trZXldID0gdmFsdWUpOwogICAgfQogICAgcmV0dXJuIF9yZXN1bHRzOwogIH07CgogIE91dHB1dC5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24oZGF0YSkgewogICAgaWYgKHRoaXMub3B0aW9ucyAhPSBudWxsKSB7CiAgICAgIHJldHVybiBjb25zb2xlLmxvZyh1dGlsLmluc3BlY3QoZGF0YSwgdGhpcy5vcHRpb25zLnNob3dIaWRkZW4sIHRoaXMub3B0aW9ucy5kZXB0aCwgdGhpcy5vcHRpb25zLmNvbG9ycykpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGRhdGEpOwogICAgfQogIH07CgogIHJldHVybiBPdXRwdXQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IE91dHB1dCgpOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWNvcmUvY29tcG9uZW50cy9SZXBlYXQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUmVwZWF0LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClJlcGVhdCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoUmVwZWF0LCBfc3VwZXIpOwoKICBSZXBlYXQucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0ZvcndhcmRzIHBhY2tldHMgYW5kIG1ldGFkYXRhIGluIHRoZSBzYW1lIHdheSBpdCByZWNlaXZlcyB0aGVtJzsKCiAgUmVwZWF0LnByb3RvdHlwZS5pY29uID0gJ2ZvcndhcmQnOwoKICBmdW5jdGlvbiBSZXBlYXQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFJlcGVhdDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVwZWF0KCk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL1JlcGVhdEFzeW5jLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlcGVhdEFzeW5jLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClJlcGVhdEFzeW5jID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSZXBlYXRBc3luYywgX3N1cGVyKTsKCiAgUmVwZWF0QXN5bmMucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gIkxpa2UgJ1JlcGVhdCcsIGV4Y2VwdCByZXBlYXQgb24gbmV4dCB0aWNrIjsKCiAgUmVwZWF0QXN5bmMucHJvdG90eXBlLmljb24gPSAnc3RlcC1mb3J3YXJkJzsKCiAgZnVuY3Rpb24gUmVwZWF0QXN5bmMoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5ncm91cHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnYWxsJykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBncm91cHMsIGxhdGVyOwogICAgICBncm91cHMgPSBfdGhpcy5ncm91cHM7CiAgICAgIGxhdGVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGdyb3VwLCBfaSwgX2osIF9sZW4sIF9sZW4xOwogICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gZ3JvdXBzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgICBncm91cCA9IGdyb3Vwc1tfaV07CiAgICAgICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICAgICAgfQogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IGdyb3Vwcy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHsKICAgICAgICAgIGdyb3VwID0gZ3JvdXBzW19qXTsKICAgICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgfTsKICAgICAgcmV0dXJuIHNldFRpbWVvdXQobGF0ZXIsIDApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3VwcyA9IFtdOwogICAgfSk7CiAgfQoKICByZXR1cm4gUmVwZWF0QXN5bmM7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFJlcGVhdEFzeW5jOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWNvcmUvY29tcG9uZW50cy9TcGxpdC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBTcGxpdCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpTcGxpdCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoU3BsaXQsIF9zdXBlcik7CgogIFNwbGl0LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdUaGlzIGNvbXBvbmVudCByZWNlaXZlcyBkYXRhIG9uIGEgc2luZ2xlIGlucHV0IHBvcnQgYW5kXAogICAgc2VuZHMgdGhlIHNhbWUgZGF0YSBvdXQgdG8gYWxsIGNvbm5lY3RlZCBvdXRwdXQgcG9ydHMnOwoKICBTcGxpdC5wcm90b3R5cGUuaWNvbiA9ICdyZXNpemUtZnVsbCc7CgogIGZ1bmN0aW9uIFNwbGl0KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmNvbm5lY3QoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBTcGxpdDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU3BsaXQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL1J1bkludGVydmFsLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJ1bkludGVydmFsLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClJ1bkludGVydmFsID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSdW5JbnRlcnZhbCwgX3N1cGVyKTsKCiAgUnVuSW50ZXJ2YWwucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1NlbmQgYSBwYWNrZXQgYXQgdGhlIGdpdmVuIGludGVydmFsJzsKCiAgUnVuSW50ZXJ2YWwucHJvdG90eXBlLmljb24gPSAnY2xvY2snOwoKICBmdW5jdGlvbiBSdW5JbnRlcnZhbCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnRpbWVyID0gbnVsbDsKICAgIHRoaXMuaW50ZXJ2YWwgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBpbnRlcnZhbDogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpLAogICAgICBzdGFydDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKSwKICAgICAgc3RvcDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5pbnRlcnZhbC5vbignZGF0YScsIGZ1bmN0aW9uKGludGVydmFsKSB7CiAgICAgIF90aGlzLmludGVydmFsID0gaW50ZXJ2YWw7CiAgICAgIGlmIChfdGhpcy50aW1lciAhPSBudWxsKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbChfdGhpcy50aW1lcik7CiAgICAgICAgcmV0dXJuIF90aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQodHJ1ZSk7CiAgICAgICAgfSwgX3RoaXMuaW50ZXJ2YWwpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5zdGFydC5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoX3RoaXMudGltZXIgIT0gbnVsbCkgewogICAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMudGltZXIpOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5jb25uZWN0KCk7CiAgICAgIHJldHVybiBfdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZCh0cnVlKTsKICAgICAgfSwgX3RoaXMuaW50ZXJ2YWwpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc3RvcC5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoIV90aGlzLnRpbWVyKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMudGltZXIpOwogICAgICBfdGhpcy50aW1lciA9IG51bGw7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBSdW5JbnRlcnZhbC5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLnRpbWVyICE9IG51bGwpIHsKICAgICAgcmV0dXJuIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICB9CiAgfTsKCiAgcmV0dXJuIFJ1bkludGVydmFsOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBSdW5JbnRlcnZhbDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvTWFrZUZ1bmN0aW9uLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIE1ha2VGdW5jdGlvbiwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpNYWtlRnVuY3Rpb24gPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKE1ha2VGdW5jdGlvbiwgX3N1cGVyKTsKCiAgTWFrZUZ1bmN0aW9uLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdFdmFsdWF0ZXMgYSBmdW5jdGlvbiBlYWNoIHRpbWUgZGF0YSBoaXRzIHRoZSAiaW4iIHBvcnRcCiAgYW5kIHNlbmRzIHRoZSByZXR1cm4gdmFsdWUgdG8gIm91dCIuIFdpdGhpbiB0aGUgZnVuY3Rpb24gIngiIHdpbGxcCiAgYmUgdGhlIHZhcmlhYmxlIGZyb20gdGhlIGluIHBvcnQuIEZvciBleGFtcGxlLCB0byBtYWtlIGEgXjIgZnVuY3Rpb25cCiAgaW5wdXQgInJldHVybiB4Kng7IiB0byB0aGUgZnVuY3Rpb24gcG9ydC4nOwoKICBNYWtlRnVuY3Rpb24ucHJvdG90eXBlLmljb24gPSAnY29kZSc7CgogIGZ1bmN0aW9uIE1ha2VGdW5jdGlvbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmYgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnYWxsJyksCiAgICAgICJmdW5jdGlvbiI6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpLAogICAgICAiZnVuY3Rpb24iOiBuZXcgbm9mbG8uUG9ydCgnZnVuY3Rpb24nKSwKICAgICAgZXJyb3I6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siZnVuY3Rpb24iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGVycm9yOwogICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICBfdGhpcy5mID0gZGF0YTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0cnkgewogICAgICAgICAgX3RoaXMuZiA9IEZ1bmN0aW9uKCJ4IiwgZGF0YSk7CiAgICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7CiAgICAgICAgICBlcnJvciA9IF9lcnJvcjsKICAgICAgICAgIF90aGlzLmVycm9yKCdFcnJvciBjcmVhdGluZyBmdW5jdGlvbjogJyArIGRhdGEpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoX3RoaXMuZikgewogICAgICAgIHRyeSB7CiAgICAgICAgICBfdGhpcy5mKHRydWUpOwogICAgICAgICAgaWYgKF90aGlzLm91dFBvcnRzWyJmdW5jdGlvbiJdLmlzQXR0YWNoZWQoKSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHNbImZ1bmN0aW9uIl0uc2VuZChfdGhpcy5mKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHsKICAgICAgICAgIGVycm9yID0gX2Vycm9yOwogICAgICAgICAgcmV0dXJuIF90aGlzLmVycm9yKCdFcnJvciBldmFsdWF0aW5nIGZ1bmN0aW9uOiAnICsgZGF0YSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKCFfdGhpcy5mKSB7CiAgICAgICAgX3RoaXMuZXJyb3IoJ05vIGZ1bmN0aW9uIGRlZmluZWQnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF90aGlzLmYoZGF0YSkpOwogICAgfSk7CiAgfQoKICBNYWtlRnVuY3Rpb24ucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24obXNnKSB7CiAgICBpZiAodGhpcy5vdXRQb3J0cy5lcnJvci5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5lcnJvci5zZW5kKG5ldyBFcnJvcihtc2cpKTsKICAgICAgdGhpcy5vdXRQb3J0cy5lcnJvci5kaXNjb25uZWN0KCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRocm93IG5ldyBFcnJvcihtc2cpOwogIH07CgogIHJldHVybiBNYWtlRnVuY3Rpb247Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IE1ha2VGdW5jdGlvbjsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJ0aGUtYmVoYXZpb3IvaW5kZXguanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgbm9mbG8gPSByZXF1aXJlKCcvbm9mbG8tbm9mbG8nKTsKCmV4cG9ydHMucnVuR3JhcGggPSBmdW5jdGlvbiAoZ3JhcGgsIGNhbGxiYWNrKSB7CiAgZ3JhcGguYmFzZURpciA9ICd0aGUtYmVoYXZpb3InOwogIG5vZmxvLmNyZWF0ZU5ldHdvcmsoZ3JhcGgsIGNhbGxiYWNrKTsKfTsKCmV4cG9ydHMucHJlcGFyZUdyYXBoID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7CiAgdmFyIGdyYXBoID0gbmV3IG5vZmxvLkdyYXBoKCd0aGUtYmVoYXZpb3JzJyk7CiAgdmFyIGJlaGF2aW9ycyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGluc3RhbmNlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0aGUtYmVoYXZpb3InKSk7CgogIC8vIFdlIHVzZSBhIHNpbmdsZSBsaXN0ZW5lciBmb3IgYWxsIGJlaGF2aW9ycwogIHByZXZOb2RlID0gZXhwb3J0cy5wcmVwYXJlTGlzdGVuZXIoZ3JhcGgsIGluc3RhbmNlKTsKCiAgdmFyIGNvbXBvbmVudExvYWRlciA9IHJlcXVpcmUoJy9ub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlcicpOwogIHZhciBsb2FkZXIgPSBuZXcgY29tcG9uZW50TG9hZGVyLkNvbXBvbmVudExvYWRlcigndGhlLWJlaGF2aW9yJyk7CiAgbG9hZGVyLmxpc3RDb21wb25lbnRzKGZ1bmN0aW9uICgpIHt9KTsKCiAgLy8gQ29udHJvbCBkZXRlY3Rpb24gd2l0aCBhIGdhdGUuIFdoZW4gYW55IGJlaGF2aW9yIGhhcyBiZWVuIHJlY29nbml6ZWQgd2Ugc3RvcAogIC8vIGRldGVjdGlvbgogIGdyYXBoLmFkZE5vZGUoJ0RldGVjdCcsICdmbG93L0dhdGUnKTsKICBncmFwaC5hZGROb2RlKCdBbGxvd0RldGVjdCcsICdjb3JlL01lcmdlJyk7CiAgZ3JhcGguYWRkRWRnZSgnQWxsb3dEZXRlY3QnLCAnb3V0JywgJ0RldGVjdCcsICdvcGVuJyk7CiAgZ3JhcGguYWRkTm9kZSgnU3RvcERldGVjdCcsICdjb3JlL01lcmdlJyk7CiAgZ3JhcGguYWRkRWRnZSgnU3RvcERldGVjdCcsICdvdXQnLCAnRGV0ZWN0JywgJ2Nsb3NlJyk7CiAgZ3JhcGguYWRkTm9kZSgnU3BsaXRHZXN0dXJlJywgJ2NvcmUvU3BsaXQnKTsKICBncmFwaC5hZGRFZGdlKCdMaXN0ZW4nLCAnb3V0JywgJ1NwbGl0R2VzdHVyZScsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ1NwbGl0R2VzdHVyZScsICdvdXQnLCAnRGV0ZWN0JywgJ2luJyk7CiAgLy8gd2hlbiB0aGF0IGdlc3R1cmUgZW5kcyB3ZSByZW9wZW4gaXQKICBncmFwaC5hZGROb2RlKCdBZnRlckdlc3R1cmVSZWFsbG93RGV0ZWN0JywgJ2NvcmUvS2ljaycpOwogIGdyYXBoLmFkZEVkZ2UoJ1NwbGl0R2VzdHVyZScsICdvdXQnLCAnQWZ0ZXJHZXN0dXJlUmVhbGxvd0RldGVjdCcsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ0FmdGVyR2VzdHVyZVJlYWxsb3dEZXRlY3QnLCAnb3V0JywgJ0FsbG93RGV0ZWN0JywgJ2luJyk7CgogIC8vIEluaXRpYWxseSBkZXRlY3Rpb24gaXMgZW5hYmxlZAogIGdyYXBoLmFkZEluaXRpYWwodHJ1ZSwgJ0FsbG93RGV0ZWN0JywgJ2luJyk7CgogIC8vIENvbm5lY3QgbGlzdGVuZXIgdG8gZGV0ZWN0aW9uCgogIHByZXZOb2RlID0gWydEZXRlY3QnLCAnb3V0J107CiAgYmVoYXZpb3JzLmZvckVhY2goZnVuY3Rpb24gKGJlaGF2aW9yLCBpZHgpIHsKICAgIC8vIEJ1aWxkIGEgc3ViZ3JhcGggZm9yIHRoZSBiZWhhdmlvcgogICAgdmFyIGlkID0gYmVoYXZpb3IudHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGJlaGF2aW9yLnR5cGUuc2xpY2UoMSkgKyBpZHg7CiAgICBiZWhhdmlvci5jb250YWluZXIgPSBpbnN0YW5jZS5jb250YWluZXI7CiAgICB2YXIgc3ViZ3JhcGggPSBleHBvcnRzLnByZXBhcmVEZXRlY3Rpb25HcmFwaChiZWhhdmlvcik7CiAgICAvL2NvbnNvbGUubG9nKHN1YmdyYXBoLnRvRE9UKCkpOwogICAgc3ViZ3JhcGguYmFzZURpciA9ICd0aGUtYmVoYXZpb3InOwogICAgbG9hZGVyLmxvYWRHcmFwaChpZCwgc3ViZ3JhcGgsIGZ1bmN0aW9uIChpbnN0YW5jZSkgewogICAgICB2YXIgZ3JhcGhOb2RlID0gZ3JhcGguYWRkTm9kZShpZCwgaW5zdGFuY2UpOwoKICAgICAgLy8gQ29ubmVjdCBpdCB3aXRoIG91ciBsaXN0ZW5lcgogICAgICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgaWQsICdkZXRlY3QnKTsKICAgICAgZ3JhcGguYWRkRWRnZSgnU3BsaXRHZXN0dXJlJywgJ291dCcsIGlkLCAnaW4nKTsKCiAgICAgIC8vIElmIHRoZSBiZWhhdmlvciBwYXNzZXMgd2UgY2FuIHN0b3AgZGV0ZWN0aW9uCiAgICAgIGdyYXBoLmFkZEVkZ2UoaWQsICdwYXNzJywgJ1N0b3BEZXRlY3QnLCAnaW4nKTsKICAgIH0pOwoKICAgIC8vIElmIHRoaXMgYmVoYXZpb3IgZmFpbHMsIHRyeSBuZXh0IG9uZQogICAgcHJldk5vZGUgPSBbaWQsICdmYWlsJ107CiAgfSk7CgogIC8vIElmIGFsbCBkZXRlY3Rpb24gZmFpbGVkLCBjbG9zZSBkZXRlY3Rpb24KICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgJ1N0b3BEZXRlY3QnLCAnaW4nKTsKCiAgcmV0dXJuIGdyYXBoOwp9CgpleHBvcnRzLnByZXBhcmVEZXRlY3Rpb25HcmFwaCA9IGZ1bmN0aW9uIChpbnN0YW5jZSkgewogIHZhciBwcmV2Tm9kZTsKCiAgLy8gSW5pdGlhbGl6ZSBzdWJncmFwaAogIHZhciBncmFwaCA9IG5ldyBub2Zsby5HcmFwaChpbnN0YW5jZS50eXBlKTsKCiAgLy8gRW50cnkgcG9pbnQKICBncmFwaC5hZGROb2RlKCdHZXN0dXJlJywgJ2NvcmUvUmVwZWF0Jyk7CiAgZ3JhcGguYWRkRXhwb3J0KCdnZXN0dXJlLmluJywgJ2RldGVjdCcpOwogIGdyYXBoLmFkZE5vZGUoJ1NwbGl0R2VzdHVyZScsICdjb3JlL1NwbGl0Jyk7CiAgZ3JhcGguYWRkRXhwb3J0KCdzcGxpdGdlc3R1cmUuaW4nLCAnaW4nKTsKICBwcmV2Tm9kZSA9IFsnR2VzdHVyZScsICdvdXQnXTsKCiAgZ3JhcGguYWRkTm9kZSgnUGFzc2VkJywgJ2NvcmUvTWVyZ2UnKTsKICBncmFwaC5hZGROb2RlKCdUYXJnZXQnLCAnY29yZS9SZXBlYXQnKTsKICBncmFwaC5hZGROb2RlKCdBbGxvd0RldGVjdCcsICdjb3JlL1JlcGVhdCcpOwoKICAvLyBHbyB0byBhY3Rpb24KICBncmFwaC5hZGROb2RlKCdEb0FjdGlvbicsICdjb3JlL01lcmdlJyk7CgogIC8vIFdoZW4gbm8gZ2VzdHVyZSBoYXMgYmVlbiByZWNvZ25pemVkIHdlIGlnbm9yZSB0aGUgc2l0dWF0aW9uCiAgZ3JhcGguYWRkTm9kZSgnTm90WWV0JywgJ2NvcmUvRHJvcCcpOwoKICAvLyBIYW5kbGUgcGFzcy10aHJ1CiAgZXhwb3J0cy5wcmVwYXJlUGFzc1Rocm91Z2goZ3JhcGgsIGluc3RhbmNlKTsKCiAgLy8gVmFsaWRhdGUgdGFyZ2V0IG5vZGUKICBwcmV2Tm9kZSA9IGV4cG9ydHMucHJlcGFyZUFjY2VwdChncmFwaCwgaW5zdGFuY2UsIHByZXZOb2RlKTsKICAvLyBDaGVjayB0aGUgZ2VzdHVyZQogIHN3aXRjaCAoaW5zdGFuY2UudHlwZSkgewogICAgY2FzZSAncGluY2gnOgogICAgICBwcmV2Tm9kZSA9IGV4cG9ydHMucHJlcGFyZVBpbmNoKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpOwogICAgICBicmVhazsKICAgIGNhc2UgJ2RyYWcnOgogICAgICBwcmV2Tm9kZSA9IGV4cG9ydHMucHJlcGFyZURyYWcoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnc2NyYXRjaCc6CiAgICAgIHByZXZOb2RlID0gZXhwb3J0cy5wcmVwYXJlU2NyYXRjaChncmFwaCwgaW5zdGFuY2UsIHByZXZOb2RlKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdzd2lwZSc6CiAgICAgIHByZXZOb2RlID0gZXhwb3J0cy5wcmVwYXJlU3dpcGUoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSk7CiAgICAgIGJyZWFrOwogIH0KICAvLyBDaGVjayBnZXN0dXJlIGRpcmVjdGlvbgogIHByZXZOb2RlID0gZXhwb3J0cy5wcmVwYXJlRGlyZWN0aW9uKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpOwoKICAvLyBHZXN0dXJlIGhhcyBiZWVuIGFjY2VwdGVkLCBwYXNzIGRhdGEgdG8gYWN0aW9uCiAgZ3JhcGguYWRkRWRnZShwcmV2Tm9kZVswXSwgcHJldk5vZGVbMV0sICdQYXNzZWQnLCAnaW4nKTsKCiAgcHJldk5vZGUgPSBbJ0RvQWN0aW9uJywgJ291dCddOwoKICAvLyBIYW5kbGUgYWN0aW9uCiAgaWYgKGluc3RhbmNlLmFjdGlvbiAmJiBpbnN0YW5jZS5hY3Rpb24uaW5kZXhPZignLycpKSB7CiAgICBpbnN0YW5jZS5hY3Rpb24gPSBpbnN0YW5jZS5hY3Rpb24uc3BsaXQoJy8nKS5wb3AoKTsKICB9CiAgc3dpdGNoIChpbnN0YW5jZS5hY3Rpb24pIHsKICAgIGNhc2UgJ21vdmUnOgogICAgICBleHBvcnRzLnByZXBhcmVNb3ZlKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpOwogICAgICBicmVhazsKICAgIGNhc2UgJ3JlbW92ZSc6CiAgICAgIGV4cG9ydHMucHJlcGFyZVJlbW92ZShncmFwaCwgaW5zdGFuY2UsIHByZXZOb2RlKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdhdHRyaWJ1dGUnOgogICAgICBleHBvcnRzLnByZXBhcmVBdHRyaWJ1dGUoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSk7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgLy8gTm8gYnVpbHQtaW4gYWN0aW9uLCB0cmlnZ2VyIGV2ZW50CiAgICAgIGV4cG9ydHMucHJlcGFyZUNhbGxiYWNrKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpOwogICAgICBicmVhazsKICB9CgogIC8vIEhhbmRsZSBnZXN0dXJlIGVuZAogIGdyYXBoLmFkZE5vZGUoJ0FmdGVyR2VzdHVyZUNsb3NlUGFzc3RocnUnLCAnY29yZS9LaWNrJyk7CiAgZ3JhcGguYWRkRWRnZSgnU3BsaXRHZXN0dXJlJywgJ291dCcsICdBZnRlckdlc3R1cmVDbG9zZVBhc3N0aHJ1JywgJ2luJyk7CiAgZ3JhcGguYWRkRWRnZSgnQWZ0ZXJHZXN0dXJlQ2xvc2VQYXNzdGhydScsICdvdXQnLCAnUGFzc1RocnUnLCAnY2xvc2UnKTsKCiAgLy8gRW1pdCBlbmQgZXZlbnQKICBncmFwaC5hZGROb2RlKCdFbmRDYWxsYmFjaycsICdjb3JlL0NhbGxiYWNrJyk7CiAgZ3JhcGguYWRkTm9kZSgnQWZ0ZXJHZXN0dXJlQ2FsbCcsICdjb3JlL0tpY2snKTsKICBncmFwaC5hZGRFZGdlKCdTcGxpdEdlc3R1cmUnLCAnb3V0JywgJ0FmdGVyR2VzdHVyZUNhbGwnLCAnZGF0YScpOwogIGdyYXBoLmFkZEVkZ2UoJ0FmdGVyR2VzdHVyZUNhbGwnLCAnb3V0JywgJ0VuZENhbGxiYWNrJywgJ2luJyk7CiAgdmFyIGVuZENhbGxiYWNrID0gZnVuY3Rpb24gKGdlc3R1cmUpIHsKICAgIGluc3RhbmNlLmZpcmUoJ2dlc3R1cmVlbmQnLCBnZXN0dXJlKTsKICB9OwogIGdyYXBoLmFkZEluaXRpYWwoZW5kQ2FsbGJhY2ssICdFbmRDYWxsYmFjaycsICdjYWxsYmFjaycpOwogIC8vIE9ubHkgYWZ0ZXIgYSByZWNvZ25pemVkIHJlc3R1cmUKICBncmFwaC5hZGROb2RlKCdBbGxvd0VuZCcsICdmbG93L0dhdGUnKTsKICBncmFwaC5hZGRFZGdlKCdTcGxpdFBhc3NlZCcsICdvdXQnLCAnQWxsb3dFbmQnLCAnb3BlbicpOwogIGdyYXBoLmFkZEVkZ2UoJ1NwbGl0UGFzc2VkJywgJ291dCcsICdQYXNzVGhydScsICdvcGVuJyk7CiAgZ3JhcGguYWRkRWRnZSgnU3BsaXRHZXN0dXJlJywgJ291dCcsICdBbGxvd0VuZCcsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ0FsbG93RW5kJywgJ291dCcsICdBZnRlckdlc3R1cmVDYWxsJywgJ2luJyk7CiAgZ3JhcGguYWRkTm9kZSgnQWZ0ZXJHZXN0dXJlQ2xvc2VDYWxsYmFjaycsICdjb3JlL0tpY2snKTsKICBncmFwaC5hZGRFZGdlKCdTcGxpdEdlc3R1cmUnLCAnb3V0JywgJ0FmdGVyR2VzdHVyZUNsb3NlQ2FsbGJhY2snLCAnaW4nKTsKICBncmFwaC5hZGRFZGdlKCdBZnRlckdlc3R1cmVDbG9zZUNhbGxiYWNrJywgJ291dCcsICdBbGxvd0VuZCcsICdjbG9zZScpOwoKICByZXR1cm4gZ3JhcGg7Cn0KCmV4cG9ydHMucHJlcGFyZUxpc3RlbmVyID0gZnVuY3Rpb24gKGdyYXBoLCBpbnN0YW5jZSkgewogIGdyYXBoLmFkZE5vZGUoJ0xpc3RlbicsICdnZXN0dXJlcy9HZXN0dXJlVG9PYmplY3QnKTsKCiAgc3dpdGNoIChpbnN0YW5jZS5saXN0ZW50bykgewogICAgY2FzZSAnaHRtbCc6CiAgICAgIGdyYXBoLmFkZEluaXRpYWwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXSwgJ0xpc3RlbicsICdlbGVtZW50Jyk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnZG9jdW1lbnQnOgogICAgICBncmFwaC5hZGRJbml0aWFsKGRvY3VtZW50LCAnTGlzdGVuJywgJ2VsZW1lbnQnKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdjb250YWluZXInOgogICAgZGVmYXVsdDoKICAgICAgZ3JhcGguYWRkSW5pdGlhbChpbnN0YW5jZS5jb250YWluZXIsICdMaXN0ZW4nLCAnZWxlbWVudCcpOwogICAgICBicmVhazsKICB9CiAgcmV0dXJuIFsnTGlzdGVuJywgJ291dCddOwp9OwoKZXhwb3J0cy5wcmVwYXJlUGFzc1Rocm91Z2ggPSBmdW5jdGlvbiAoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSkgewogIC8vIFJlcG9ydCBmYWlsdXJlcyB1cHN0cmVhZAogIGdyYXBoLmFkZE5vZGUoJ0ZhaWxlZCcsICdjb3JlL01lcmdlJyk7CiAgZ3JhcGguYWRkRXhwb3J0KCdmYWlsZWQub3V0JywgJ2ZhaWwnKTsKCiAgLy8gV2UgdXNlIGEgZ2F0ZSBmb3IgcGFzc2luZyB0aGluZ3MgYWZ0ZXIgcmVjb2duaXRpb24gc3RyYWlnaHQgdG8gYWN0aW9uCiAgZ3JhcGguYWRkTm9kZSgnUGFzc1RocnUnLCAnZmxvdy9HYXRlJyk7CiAgZ3JhcGguYWRkRWRnZSgnU3BsaXRHZXN0dXJlJywgJ291dCcsICdQYXNzVGhydScsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ1Bhc3NUaHJ1JywgJ291dCcsICdEb0FjdGlvbicsICdpbicpOwoKICAvLyBPcGVuIG9uIGRldGVjdGVkIGdlc3R1cmUKICBncmFwaC5hZGRFZGdlKCdTcGxpdFBhc3NlZCcsICdvdXQnLCAnUGFzc1RocnUnLCAnb3BlbicpOwoKICAvLyBDbG9zZSB0aGUgZ2F0ZSBhZnRlciBkZXRlY3Rpb24KICBncmFwaC5hZGROb2RlKCdTcGxpdFBhc3NlZCcsICdjb3JlL1NwbGl0Jyk7CiAgZ3JhcGguYWRkRWRnZSgnUGFzc2VkJywgJ291dCcsICdTcGxpdFBhc3NlZCcsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ1NwbGl0UGFzc2VkJywgJ291dCcsICdEb0FjdGlvbicsICdpbicpOwoKICAvLyBSZXBvcnQgcGFzc2VzIHVwc3RyZWFtCiAgZ3JhcGguYWRkRXhwb3J0KCdzcGxpdHBhc3NlZC5vdXQnLCAncGFzcycpOwp9OwoKZXhwb3J0cy5wcmVwYXJlQWNjZXB0ID0gZnVuY3Rpb24gKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpIHsKICBpZiAoIWluc3RhbmNlLmFjY2VwdCkgewogICAgZ3JhcGguYWRkSW5pdGlhbChpbnN0YW5jZS5jb250YWluZXIsICdUYXJnZXQnLCAnaW4nKTsKICAgIHJldHVybiBwcmV2Tm9kZTsKICB9CgogIGdyYXBoLmFkZE5vZGUoJ0RldGVjdFRhcmdldCcsICdnZXN0dXJlcy9EZXRlY3RUYXJnZXQnKTsKICBncmFwaC5hZGRJbml0aWFsKCdzdGFydGVsZW1lbnQnLCAnRGV0ZWN0VGFyZ2V0JywgJ2tleScpOwogIGdyYXBoLmFkZEVkZ2UocHJldk5vZGVbMF0sIHByZXZOb2RlWzFdLCAnRGV0ZWN0VGFyZ2V0JywgJ2luJyk7CiAgZ3JhcGguYWRkRWRnZSgnRGV0ZWN0VGFyZ2V0JywgJ3RhcmdldCcsICdUYXJnZXQnLCAnaW4nKTsKICBncmFwaC5hZGRJbml0aWFsKGluc3RhbmNlLmFjY2VwdCwgJ0RldGVjdFRhcmdldCcsICd0YXJnZXQnKTsKICBncmFwaC5hZGRFZGdlKCdEZXRlY3RUYXJnZXQnLCAnZmFpbCcsICdGYWlsZWQnLCAnaW4nKTsKICByZXR1cm4gWydEZXRlY3RUYXJnZXQnLCAncGFzcyddOwp9OwoKZXhwb3J0cy5wcmVwYXJlUGluY2ggPSBmdW5jdGlvbiAoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSkgewogIGdyYXBoLmFkZE5vZGUoJ0RldGVjdFBpbmNoJywgJ2dlc3R1cmVzL0RldGVjdFBpbmNoJyk7CiAgZ3JhcGguYWRkRWRnZShwcmV2Tm9kZVswXSwgcHJldk5vZGVbMV0sICdEZXRlY3RQaW5jaCcsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ0RldGVjdFBpbmNoJywgJ2ZhaWwnLCAnRmFpbGVkJywgJ2luJyk7CiAgcmV0dXJuIFsnRGV0ZWN0UGluY2gnLCAncGFzcyddOwp9OwoKZXhwb3J0cy5wcmVwYXJlRHJhZyA9IGZ1bmN0aW9uIChncmFwaCwgaW5zdGFuY2UsIHByZXZOb2RlKSB7CiAgdmFyIG1pbkRpc3RhbmNlID0gMjA7CiAgaWYgKGluc3RhbmNlLm1pbmRpc3RhbmNlKSB7CiAgICBtaW5EaXN0YW5jZSA9IHBhcnNlSW50KGluc3RhbmNlLm1pbmRpc3RhbmNlKTsKICB9CiAgdmFyIG1heFNwZWVkID0gSW5maW5pdHk7CiAgaWYgKGluc3RhbmNlLm1heHNwZWVkKSB7CiAgICBtYXhTcGVlZCA9IHBhcnNlSW50KGluc3RhbmNlLm1heHNwZWVkKTsKICB9CiAgZ3JhcGguYWRkTm9kZSgnRGV0ZWN0RHJhZycsICdnZXN0dXJlcy9EZXRlY3REcmFnJyk7CiAgZ3JhcGguYWRkRWRnZShwcmV2Tm9kZVswXSwgcHJldk5vZGVbMV0sICdEZXRlY3REcmFnJywgJ2luJyk7CiAgZ3JhcGguYWRkSW5pdGlhbChtaW5EaXN0YW5jZSwgJ0RldGVjdERyYWcnLCAnZGlzdGFuY2UnKTsKICBncmFwaC5hZGRJbml0aWFsKG1heFNwZWVkLCAnRGV0ZWN0RHJhZycsICdtYXhzcGVlZCcpOwogIGlmIChpbnN0YW5jZS50eXBlID09PSAnZHJhZycpIHsKICAgIGdyYXBoLmFkZEVkZ2UoJ0RldGVjdERyYWcnLCAnZmFpbCcsICdOb3RZZXQnLCAnaW4nKTsKICB9IGVsc2UgewogICAgZ3JhcGguYWRkRWRnZSgnRGV0ZWN0RHJhZycsICdmYWlsJywgJ0ZhaWxlZCcsICdpbicpOwogIH0KICByZXR1cm4gWydEZXRlY3REcmFnJywgJ3Bhc3MnXTsKfTsKCmV4cG9ydHMucHJlcGFyZVNjcmF0Y2ggPSBmdW5jdGlvbiAoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSkgewogIHZhciBtaW5EaXN0YW5jZSA9IDIwOwogIGlmIChpbnN0YW5jZS5taW5kaXN0YW5jZSkgewogICAgbWluRGlzdGFuY2UgPSBwYXJzZUludChpbnN0YW5jZS5taW5kaXN0YW5jZSk7CiAgfQogIHZhciBtaW5TcGVlZCA9IDE7CiAgaWYgKGluc3RhbmNlLm1pbnNwZWVkKSB7CiAgICBtaW5TcGVlZCA9IHBhcnNlRmxvYXQoaW5zdGFuY2UubWluc3BlZWQpOwogIH0KICBncmFwaC5hZGROb2RlKCdEZXRlY3RTY3JhdGNoJywgJ2dlc3R1cmVzL0RldGVjdFNjcmF0Y2gnKTsKICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgJ0RldGVjdFNjcmF0Y2gnLCAnaW4nKTsKICBncmFwaC5hZGRJbml0aWFsKG1pbkRpc3RhbmNlLCAnRGV0ZWN0U2NyYXRjaCcsICdkaXN0YW5jZScpOwogIGdyYXBoLmFkZEluaXRpYWwobWluU3BlZWQsICdEZXRlY3RTY3JhdGNoJywgJ3NwZWVkJyk7CiAgZ3JhcGguYWRkRWRnZSgnRGV0ZWN0U2NyYXRjaCcsICdmYWlsJywgJ0ZhaWxlZCcsICdpbicpOwogIHJldHVybiBbJ0RldGVjdFNjcmF0Y2gnLCAncGFzcyddOwp9OwoKZXhwb3J0cy5wcmVwYXJlU3dpcGUgPSBmdW5jdGlvbiAoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSkgewogIHZhciBtaW5EaXN0YW5jZSA9IDUwOwogIGlmIChpbnN0YW5jZS5taW5kaXN0YW5jZSkgewogICAgbWluRGlzdGFuY2UgPSBwYXJzZUludChpbnN0YW5jZS5taW5kaXN0YW5jZSk7CiAgfQogIHZhciBtaW5TcGVlZCA9IDEuNTsKICBpZiAoaW5zdGFuY2UubWluc3BlZWQpIHsKICAgIG1pblNwZWVkID0gcGFyc2VGbG9hdChpbnN0YW5jZS5taW5zcGVlZCk7CiAgfQogIGdyYXBoLmFkZE5vZGUoJ0RldGVjdFN3aXBlJywgJ2dlc3R1cmVzL0RldGVjdFN3aXBlJyk7CiAgZ3JhcGguYWRkRWRnZShwcmV2Tm9kZVswXSwgcHJldk5vZGVbMV0sICdEZXRlY3RTd2lwZScsICdpbicpOwogIGdyYXBoLmFkZEluaXRpYWwobWluRGlzdGFuY2UsICdEZXRlY3RTd2lwZScsICdkaXN0YW5jZScpOwogIGdyYXBoLmFkZEluaXRpYWwobWluU3BlZWQsICdEZXRlY3RTd2lwZScsICdzcGVlZCcpOwogIGdyYXBoLmFkZEVkZ2UoJ0RldGVjdFN3aXBlJywgJ2ZhaWwnLCAnRmFpbGVkJywgJ2luJyk7CiAgcmV0dXJuIFsnRGV0ZWN0U3dpcGUnLCAncGFzcyddOwp9OwoKZXhwb3J0cy5wcmVwYXJlRGlyZWN0aW9uID0gZnVuY3Rpb24gKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpIHsKICBpZiAoIWluc3RhbmNlLmRpcmVjdGlvbikgewogICAgcmV0dXJuIHByZXZOb2RlOwogIH0KICB2YXIgZGlyZWN0aW9ucyA9IGluc3RhbmNlLmRpcmVjdGlvbi5zcGxpdCgnICcpOwogIGlmIChkaXJlY3Rpb25zLmxlbmd0aCA9PT0gNCkgewogICAgcmV0dXJuIHByZXZOb2RlOwogIH0KICB2YXIgbWF4RGlzdGFuY2UgPSBJbmZpbml0eTsKICBpZiAoaW5zdGFuY2UubWF4ZGlzdGFuY2UpIHsKICAgIG1heERpc3RhbmNlID0gcGFyc2VJbnQoaW5zdGFuY2UubWF4ZGlzdGFuY2UpOwogIH0KICB2YXIgY2FyZGluYWxzID0gWydlYXN0JywgJ3NvdXRoJywgJ25vcnRoJywgJ3dlc3QnXTsKICBncmFwaC5hZGROb2RlKCdEZXRlY3REaXJlY3Rpb24nLCAnZ2VzdHVyZXMvRGV0ZWN0Q2FyZGluYWxEaXJlY3Rpb24nKTsKICBncmFwaC5hZGRJbml0aWFsKG1heERpc3RhbmNlLCAnRGV0ZWN0RGlyZWN0aW9uJywgJ21heGRpc3RhbmNlJyk7CiAgZ3JhcGguYWRkRWRnZShwcmV2Tm9kZVswXSwgcHJldk5vZGVbMV0sICdEZXRlY3REaXJlY3Rpb24nLCAnaW4nKTsKICBncmFwaC5hZGROb2RlKCdEaXJlY3Rpb25QYXNzZWQnLCAnY29yZS9NZXJnZScpOwogIGNhcmRpbmFscy5mb3JFYWNoKGZ1bmN0aW9uIChkaXIpIHsKICAgIGlmIChkaXJlY3Rpb25zLmluZGV4T2YoZGlyKSAhPT0gLTEpIHsKICAgICAgLy8gQWxsb3dlZCBkaXJlY3Rpb24KICAgICAgZ3JhcGguYWRkRWRnZSgnRGV0ZWN0RGlyZWN0aW9uJywgZGlyLCAnRGlyZWN0aW9uUGFzc2VkJywgJ2luJyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGdyYXBoLmFkZEVkZ2UoJ0RldGVjdERpcmVjdGlvbicsIGRpciwgJ0ZhaWxlZCcsICdpbicpOwogIH0pOwogIGdyYXBoLmFkZEVkZ2UoJ0RldGVjdERpcmVjdGlvbicsICdmYWlsJywgJ0ZhaWxlZCcsICdpbicpOwogIHJldHVybiBbJ0RpcmVjdGlvblBhc3NlZCcsICdvdXQnXTsKfTsKCmV4cG9ydHMucHJlcGFyZU1vdmUgPSBmdW5jdGlvbiAoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSkgewogIGdyYXBoLmFkZE5vZGUoJ0VhY2hUb3VjaCcsICdvYmplY3RzL1NwbGl0T2JqZWN0Jyk7CiAgZ3JhcGguYWRkRWRnZSgnRG9BY3Rpb24nLCAnb3V0JywgJ0VhY2hUb3VjaCcsICdpbicpOwogIGdyYXBoLmFkZE5vZGUoJ0dldFBvaW50JywgJ29iamVjdHMvR2V0T2JqZWN0S2V5Jyk7CiAgZ3JhcGguYWRkRWRnZSgnRWFjaFRvdWNoJywgJ291dCcsICdHZXRQb2ludCcsICdpbicpOwogIGdyYXBoLmFkZEluaXRpYWwoJ21vdmVwb2ludCcsICdHZXRQb2ludCcsICdrZXknKTsKICBncmFwaC5hZGRFZGdlKCdHZXRQb2ludCcsICdtaXNzZWQnLCAnTm90WWV0JywgJ2luJyk7CiAgZ3JhcGguYWRkTm9kZSgnTW92ZScsICdjc3MvTW92ZUVsZW1lbnQnKTsKICBncmFwaC5hZGRFZGdlKCdUYXJnZXQnLCAnb3V0JywgJ01vdmUnLCAnZWxlbWVudCcpOwogIGdyYXBoLmFkZEVkZ2UoJ0dldFBvaW50JywgJ291dCcsICdNb3ZlJywgJ3BvaW50Jyk7Cn07CgpleHBvcnRzLnByZXBhcmVSZW1vdmUgPSBmdW5jdGlvbiAoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSkgewogIGdyYXBoLmFkZE5vZGUoJ1NlbmROb2RlJywgJ3N0cmluZ3MvU2VuZFN0cmluZycpOwogIGdyYXBoLmFkZEVkZ2UoJ1RhcmdldCcsICdvdXQnLCAnU2VuZE5vZGUnLCAnc3RyaW5nJyk7CiAgZ3JhcGguYWRkRWRnZSgnRG9BY3Rpb24nLCAnb3V0JywgJ1NlbmROb2RlJywgJ2luJyk7CiAgZ3JhcGguYWRkTm9kZSgnUmVtb3ZlTm9kZScsICdkb20vUmVtb3ZlRWxlbWVudCcpOwogIGdyYXBoLmFkZEVkZ2UoJ1NlbmROb2RlJywgJ291dCcsICdSZW1vdmVOb2RlJywgJ2VsZW1lbnQnKTsKfTsKCmV4cG9ydHMucHJlcGFyZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChncmFwaCwgaW5zdGFuY2UsIHByZXZOb2RlKSB7CiAgZ3JhcGguYWRkTm9kZSgnRWFjaFRvdWNoJywgJ29iamVjdHMvU3BsaXRPYmplY3QnKTsKICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgJ0VhY2hUb3VjaCcsICdpbicpOwogIGdyYXBoLmFkZE5vZGUoJ0dldFBvaW50JywgJ29iamVjdHMvR2V0T2JqZWN0S2V5Jyk7CiAgZ3JhcGguYWRkRWRnZSgnRWFjaFRvdWNoJywgJ291dCcsICdHZXRQb2ludCcsICdpbicpOwogIGdyYXBoLmFkZEluaXRpYWwoJ21vdmVwb2ludCcsICdHZXRQb2ludCcsICdrZXknKTsKICBncmFwaC5hZGRFZGdlKCdHZXRQb2ludCcsICdtaXNzZWQnLCAnRmFpbGVkJywgJ2luJyk7CiAgZ3JhcGguYWRkTm9kZSgnU2V0JywgJ2RvbS9TZXRBdHRyaWJ1dGUnKTsKICBncmFwaC5hZGRFZGdlKCdUYXJnZXQnLCAnb3V0JywgJ1NldCcsICdlbGVtZW50Jyk7CiAgZ3JhcGguYWRkSW5pdGlhbChpbnN0YW5jZS50eXBlLCAnU2V0JywgJ2F0dHJpYnV0ZScpOwogIGdyYXBoLmFkZEVkZ2UoJ0dldFBvaW50JywgJ291dCcsICdTZXQnLCAndmFsdWUnKTsKfTsKCmV4cG9ydHMuZ2V0Q2VudGVyID0gZnVuY3Rpb24gKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpIHsKICAvLyBDYWxjdWxhdGUgY2VudGVyCiAgZ3JhcGguYWRkTm9kZSgnQWRkQ2VudGVyJywgJ29iamVjdHMvU2V0UHJvcGVydHlWYWx1ZScpOwogIGdyYXBoLmFkZEluaXRpYWwoJ2NlbnRlcicsICdBZGRDZW50ZXInLCAncHJvcGVydHknKTsKICBncmFwaC5hZGROb2RlKCdTcGxpdFBpbmNoJywgJ2NvcmUvU3BsaXQnKTsKICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgJ1NwbGl0UGluY2gnLCAnaW4nKTsKICBncmFwaC5hZGRFZGdlKCdTcGxpdFBpbmNoJywgJ291dCcsICdBZGRDZW50ZXInLCAnaW4nKTsKICBncmFwaC5hZGROb2RlKCdDYWxjdWxhdGVDZW50ZXInLCAnZ2VzdHVyZXMvQ2FsY3VsYXRlQ2VudGVyJyk7CiAgZ3JhcGguYWRkRWRnZSgnU3BsaXRQaW5jaCcsICdvdXQnLCAnQ2FsY3VsYXRlQ2VudGVyJywgJ2luJyk7CiAgZ3JhcGguYWRkRWRnZSgnQ2FsY3VsYXRlQ2VudGVyJywgJ2NlbnRlcicsICdBZGRDZW50ZXInLCAndmFsdWUnKTsKICByZXR1cm4gWydBZGRDZW50ZXInLCAnb3V0J107Cn07CgpleHBvcnRzLmdldFNjYWxlID0gZnVuY3Rpb24gKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpIHsKICAvLyBDYWxjdWxhdGUgc2NhbGUKICBncmFwaC5hZGROb2RlKCdTcGxpdEFmdGVyQWRkJywgJ2NvcmUvU3BsaXQnKTsKICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgJ1NwbGl0QWZ0ZXJBZGQnLCAnaW4nKTsKICBncmFwaC5hZGROb2RlKCdBZGRTY2FsZScsICdvYmplY3RzL1NldFByb3BlcnR5VmFsdWUnKTsKICBncmFwaC5hZGRJbml0aWFsKCdzY2FsZScsICdBZGRTY2FsZScsICdwcm9wZXJ0eScpOwogIGdyYXBoLmFkZEVkZ2UoJ1NwbGl0QWZ0ZXJBZGQnLCAnb3V0JywgJ0FkZFNjYWxlJywgJ2luJyk7CiAgZ3JhcGguYWRkTm9kZSgnQ2FsY3VsYXRlU2NhbGUnLCAnZ2VzdHVyZXMvQ2FsY3VsYXRlU2NhbGUnKTsKICBncmFwaC5hZGRFZGdlKCdTcGxpdEFmdGVyQWRkJywgJ291dCcsICdDYWxjdWxhdGVTY2FsZScsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ0NhbGN1bGF0ZVNjYWxlJywgJ3NjYWxlJywgJ0FkZFNjYWxlJywgJ3ZhbHVlJyk7CiAgcmV0dXJuIFsnQWRkU2NhbGUnLCAnb3V0J107Cn07CmV4cG9ydHMucHJlcGFyZUNhbGxiYWNrID0gZnVuY3Rpb24gKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpIHsKICBwcmV2Tm9kZSA9IGV4cG9ydHMuZ2V0Q2VudGVyKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpOwogIGlmIChpbnN0YW5jZS50eXBlID09PSAncGluY2gnKSB7CiAgICBwcmV2Tm9kZSA9IGV4cG9ydHMuZ2V0U2NhbGUoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSk7CiAgfQogIGdyYXBoLmFkZE5vZGUoJ0NhbGxiYWNrJywgJ2NvcmUvQ2FsbGJhY2snKTsKICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgJ0NhbGxiYWNrJywgJ2luJyk7CiAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKGdlc3R1cmUpIHsKICAgIGluc3RhbmNlLmZpcmUoJ2dlc3R1cmUnLCBnZXN0dXJlKTsKICB9OwogIGdyYXBoLmFkZEluaXRpYWwoY2FsbGJhY2ssICdDYWxsYmFjaycsICdjYWxsYmFjaycpOwogIGdyYXBoLmFkZE5vZGUoJ0Ryb3BUYXJnZXQnLCAnY29yZS9Ecm9wJyk7CiAgZ3JhcGguYWRkRWRnZSgnVGFyZ2V0JywgJ291dCcsICdEcm9wVGFyZ2V0JywgJ2luJyk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3RlcigidGhlLWJlaGF2aW9yL2NvbXBvbmVudC5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7Im5hbWUiOiJ0aGUtYmVoYXZpb3IiLCJkZXNjcmlwdGlvbiI6IlBvbHltZXIgZWxlbWVudHMgZm9yIGdlc3R1cmFsIGJlaGF2aW9yIiwiYXV0aG9yIjoiSGVucmkgQmVyZ2l1cyA8aGVucmkuYmVyZ2l1c0Bpa2kuZmk+IiwicmVwbyI6Im5vZmxvL25vZmxvLXVpIiwidmVyc2lvbiI6IjAuMS4wIiwia2V5d29yZHMiOltdLCJkZXBlbmRlbmNpZXMiOnsibm9mbG8vbm9mbG8iOiIqIiwibm9mbG8vbm9mbG8taW50ZXJhY3Rpb24iOiIqIiwibm9mbG8vbm9mbG8tZ2VzdHVyZXMiOiIqIiwibm9mbG8vbm9mbG8tb2JqZWN0cyI6IioiLCJub2Zsby9ub2Zsby1mbG93IjoiKiIsIm5vZmxvL25vZmxvLWRvbSI6IioiLCJub2Zsby9ub2Zsby1jc3MiOiIqIiwibm9mbG8vbm9mbG8tbWF0aCI6IioiLCJub2Zsby9ub2Zsby1jb3JlIjoiKiJ9LCJub2ZsbyI6eyJjb21wb25lbnRzIjp7fSwiZ3JhcGhzIjp7fX0sIm1haW4iOiJpbmRleC5qcyIsInNjcmlwdHMiOlsiaW5kZXguanMiXSwianNvbiI6WyJjb21wb25lbnQuanNvbiJdLCJmaWxlcyI6W119Jyk7Cn0pOwoKCgoKCgoKCgoKCgoKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtZW1pdHRlci9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2VtaXR0ZXIvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWluZGV4b2YvaW5kZXguanMiLCAiY29tcG9uZW50LWVtaXR0ZXIvZGVwcy9pbmRleG9mL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL3VuZGVyc2NvcmUvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2xpYi9mYnAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vaW5kZXguanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50Lmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5EcmFnLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuRHJhZy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3Rlbkhhc2guanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5IYXNoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuS2V5Ym9hcmQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5LZXlib2FyZC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3Rlbk1vdXNlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuTW91c2UuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5Qb2ludGVyLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuUG9pbnRlci5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNjcm9sbC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNjcm9sbC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNwZWVjaC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNwZWVjaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblRvdWNoLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuVG91Y2guanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9TZXRIYXNoLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvU2V0SGFzaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL1JlYWRDb29yZGluYXRlcy5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL1JlYWRDb29yZGluYXRlcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9pbmRleC5qcyIsICJub2Zsby1pbnRlcmFjdGlvbi9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvR3JhcGguanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL3NyYy9saWIvUG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL3NyYy9saWIvTm9GbG8uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZW1pdHRlci9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtaW5kZXhvZi9pbmRleC5qcyIsICJjb21wb25lbnQtZW1pdHRlci9kZXBzL2luZGV4b2YvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvbGliL2ZicC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvRGV0ZWN0RHJhZy5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3REcmFnLmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdFN3aXBlLmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdFN3aXBlLmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdFBpbmNoLmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdFBpbmNoLmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0ZpbHRlckJ5VGFyZ2V0Lmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0ZpbHRlckJ5VGFyZ2V0Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0dlc3R1cmVUb09iamVjdC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9HZXN0dXJlVG9PYmplY3QuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvTGlzdGVuR2VzdHVyZXMuanNvbiIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9ncmFwaHMvTGlzdGVuR2VzdHVyZXMuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvTGlzdGVuUG9pbnRlci5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9MaXN0ZW5Qb2ludGVyLmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdENhcmRpbmFsRGlyZWN0aW9uLmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdENhcmRpbmFsRGlyZWN0aW9uLmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvaW5kZXguanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdERyYWcuanNvbiIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9ncmFwaHMvRGV0ZWN0RHJhZy5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RTd2lwZS5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RTd2lwZS5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RQaW5jaC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RQaW5jaC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9GaWx0ZXJCeVRhcmdldC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9GaWx0ZXJCeVRhcmdldC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9HZXN0dXJlVG9PYmplY3QuanNvbiIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9ncmFwaHMvR2VzdHVyZVRvT2JqZWN0Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0xpc3Rlbkdlc3R1cmVzLmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0xpc3Rlbkdlc3R1cmVzLmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0xpc3RlblBvaW50ZXIuanNvbiIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9ncmFwaHMvTGlzdGVuUG9pbnRlci5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RDYXJkaW5hbERpcmVjdGlvbi5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RDYXJkaW5hbERpcmVjdGlvbi5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2NvbXBvbmVudC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvQ2FsY3VsYXRlQ2VudGVyLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvQ2FsY3VsYXRlQ2VudGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvQ2FsY3VsYXRlU2NhbGUuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvY29tcG9uZW50cy9DYWxjdWxhdGVTY2FsZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0NhcmRpbmFsUm91dGVyLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvQ2FyZGluYWxSb3V0ZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvY29tcG9uZW50cy9EZWdyZWVzVG9DYXJkaW5hbC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RlZ3JlZXNUb0NhcmRpbmFsLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvRGVncmVlc1RvQ29tcGFzcy5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RlZ3JlZXNUb0NvbXBhc3MuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvY29tcG9uZW50cy9EZXRlY3RTY3JhdGNoLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvRGV0ZWN0U2NyYXRjaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RldGVjdFRhcmdldC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RldGVjdFRhcmdldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9pbmRleC5qcyIsICJub2Zsby1nZXN0dXJlcy9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvL3NyYy9saWIvUG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvL3NyYy9saWIvTm9GbG8uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZW1pdHRlci9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtaW5kZXhvZi9pbmRleC5qcyIsICJjb21wb25lbnQtZW1pdHRlci9kZXBzL2luZGV4b2YvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvbGliL2ZicC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9pbmRleC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWludGVyYWN0aW9uL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudC5qc29uIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5EcmFnLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5EcmFnLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuSGFzaC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuSGFzaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlbktleWJvYXJkLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5LZXlib2FyZC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3Rlbk1vdXNlLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5Nb3VzZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblBvaW50ZXIuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblBvaW50ZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5TY3JvbGwuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNjcm9sbC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNwZWVjaC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuU3BlZWNoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuVG91Y2guanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblRvdWNoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvU2V0SGFzaC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvU2V0SGFzaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL1JlYWRDb29yZGluYXRlcy5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvUmVhZENvb3JkaW5hdGVzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL2NvbXBvbmVudC5qc29uIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL3NyYy9saWIvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FzeW5jQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1tYXRoL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1tYXRoL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9BZGQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1tYXRoL2NvbXBvbmVudHMvQWRkLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9TdWJ0cmFjdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9TdWJ0cmFjdC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvTXVsdGlwbHkuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1tYXRoL2NvbXBvbmVudHMvTXVsdGlwbHkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tbWF0aC9jb21wb25lbnRzL0RpdmlkZS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9EaXZpZGUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tbWF0aC9jb21wb25lbnRzL0NhbGN1bGF0ZUFuZ2xlLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tbWF0aC9jb21wb25lbnRzL0NhbGN1bGF0ZUFuZ2xlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9DYWxjdWxhdGVEaXN0YW5jZS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9DYWxjdWxhdGVEaXN0YW5jZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvQ29tcGFyZS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9Db21wYXJlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9Db3VudFN1bS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9Db3VudFN1bS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1tYXRoL2xpYi9NYXRoQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tbWF0aC9saWIvTWF0aENvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIiwgIm5vZmxvLW5vZmxvLW1hdGgvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLW1hdGgvZGVwcy9ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tbWF0aC9kZXBzL25vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tbWF0aC9kZXBzL25vZmxvL3NyYy9saWIvTmV0d29yay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1mbG93L2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1mbG93L2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvY29tcG9uZW50cy9Db25jYXQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1mbG93L2NvbXBvbmVudHMvQ29uY2F0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvY29tcG9uZW50cy9HYXRlLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZmxvdy9jb21wb25lbnRzL0dhdGUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvUG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWZsb3cvZGVwcy9ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvTm9GbG8uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIiwgIm5vZmxvLW5vZmxvLWZsb3cvZGVwcy9ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZW1pdHRlci9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtaW5kZXhvZi9pbmRleC5qcyIsICJjb21wb25lbnQtZW1pdHRlci9kZXBzL2luZGV4b2YvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvbGliL2ZicC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1ncm91cHMvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1ncm91cHMvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudC5qc29uIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZ3JvdXBzL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1JlYWRHcm91cHMuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1ncm91cHMvY29tcG9uZW50cy9SZWFkR3JvdXBzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1JlbW92ZUdyb3Vwcy5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1JlbW92ZUdyb3Vwcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9SZWdyb3VwLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvUmVncm91cC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Hcm91cC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0dyb3VwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0dyb3VwWmlwLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvR3JvdXBaaXAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvRmlsdGVyQnlHcm91cC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0ZpbHRlckJ5R3JvdXAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvT2JqZWN0aWZ5LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvT2JqZWN0aWZ5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1JlYWRHcm91cC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1JlYWRHcm91cC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9TZW5kQnlHcm91cC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1NlbmRCeUdyb3VwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0NvbGxlY3RHcm91cHMuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Db2xsZWN0R3JvdXBzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0NvbGxlY3RPYmplY3QuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Db2xsZWN0T2JqZWN0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0ZpcnN0R3JvdXAuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1ncm91cHMvY29tcG9uZW50cy9GaXJzdEdyb3VwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL01hcEdyb3VwLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvTWFwR3JvdXAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvTWVyZ2VHcm91cHMuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1ncm91cHMvY29tcG9uZW50cy9NZXJnZUdyb3Vwcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Hcm91cEJ5T2JqZWN0S2V5LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvR3JvdXBCeU9iamVjdEtleS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLWdyb3Vwcy9kZXBzL25vZmxvL3NyYy9saWIvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9zcmMvbGliL1BvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiLCAibm9mbG8tbm9mbG8tZ3JvdXBzL2RlcHMvbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZ3JvdXBzL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9zcmMvbGliL0FzeW5jQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiLCAibm9mbG8tbm9mbG8tZ3JvdXBzL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9zcmMvbGliL05vRmxvLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTmV0d29yay5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tZ3JvdXBzL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtZW1pdHRlci9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2VtaXR0ZXIvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWluZGV4b2YvaW5kZXguanMiLCAiY29tcG9uZW50LWVtaXR0ZXIvZGVwcy9pbmRleG9mL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL3VuZGVyc2NvcmUvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2xpYi9mYnAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9pbmRleC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0NvdW50UGFja2V0cy5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Db3VudFBhY2tldHMuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1VuemlwLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1VuemlwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9EZWZhdWx0cy5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9EZWZhdWx0cy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRG9Ob3REaXNjb25uZWN0LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0RvTm90RGlzY29ubmVjdC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvT25seURpc2Nvbm5lY3QuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvT25seURpc2Nvbm5lY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1NwbGl0UGFja2V0LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1NwbGl0UGFja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9SYW5nZS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9SYW5nZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRmxhdHRlbi5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9GbGF0dGVuLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Db21wYWN0LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0NvbXBhY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1ppcC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9aaXAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1NlbmRXaXRoLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1NlbmRXaXRoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9GaWx0ZXJQYWNrZXRzLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0ZpbHRlclBhY2tldHMuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0ZpbHRlckJ5VmFsdWUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRmlsdGVyQnlWYWx1ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRmlsdGVyQnlQb3NpdGlvbi5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9GaWx0ZXJCeVBvc2l0aW9uLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9GaWx0ZXJQYWNrZXQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRmlsdGVyUGFja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9VbmlxdWVQYWNrZXQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvVW5pcXVlUGFja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Hcm91cEJ5UGFja2V0LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0dyb3VwQnlQYWNrZXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0xhc3RQYWNrZXQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvTGFzdFBhY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvQ291bnRlci5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Db3VudGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL2NvbXBvbmVudC5qc29uIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8tcGFja2V0cy9kZXBzL25vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvbGliL1BvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiLCAibm9mbG8tbm9mbG8tcGFja2V0cy9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FzeW5jQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvbGliL0FzeW5jQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1wYWNrZXRzL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvbGliL05vRmxvLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTmV0d29yay5qcyIsICJub2Zsby1ub2Zsby1wYWNrZXRzL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtZW1pdHRlci9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2VtaXR0ZXIvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWluZGV4b2YvaW5kZXguanMiLCAiY29tcG9uZW50LWVtaXR0ZXIvZGVwcy9pbmRleG9mL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL3VuZGVyc2NvcmUvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2xpYi9mYnAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tcGFja2V0cy9kZXBzL3VuZGVyc2NvcmUvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9FeHRlbmQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRXh0ZW5kLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9NZXJnZU9iamVjdHMuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWVyZ2VPYmplY3RzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TcGxpdE9iamVjdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TcGxpdE9iamVjdC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvUmVwbGFjZUtleS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9SZXBsYWNlS2V5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9LZXlzLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0tleXMuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NpemUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2l6ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvVmFsdWVzLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1ZhbHVlcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvSm9pbi5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9Kb2luLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9FeHRyYWN0UHJvcGVydHkuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRXh0cmFjdFByb3BlcnR5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9JbnNlcnRQcm9wZXJ0eS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9JbnNlcnRQcm9wZXJ0eS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2xpY2VBcnJheS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TbGljZUFycmF5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TcGxpdEFycmF5LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NwbGl0QXJyYXkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0ZpbHRlclByb3BlcnR5VmFsdWUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRmlsdGVyUHJvcGVydHlWYWx1ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRmxhdHRlbk9iamVjdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9GbGF0dGVuT2JqZWN0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9NYXBQcm9wZXJ0eS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9NYXBQcm9wZXJ0eS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvUmVtb3ZlUHJvcGVydHkuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvUmVtb3ZlUHJvcGVydHkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL01hcFByb3BlcnR5VmFsdWUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWFwUHJvcGVydHlWYWx1ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvR2V0T2JqZWN0S2V5LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0dldE9iamVjdEtleS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvVW5pcXVlQXJyYXkuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvVW5pcXVlQXJyYXkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TaW1wbGlmeU9iamVjdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TaW1wbGlmeU9iamVjdC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRHVwbGljYXRlUHJvcGVydHkuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRHVwbGljYXRlUHJvcGVydHkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NyZWF0ZU9iamVjdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9DcmVhdGVPYmplY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NyZWF0ZURhdGUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvQ3JlYXRlRGF0ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2V0UHJvcGVydHlWYWx1ZS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TZXRQcm9wZXJ0eVZhbHVlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9DYWxsTWV0aG9kLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NhbGxNZXRob2QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIsICJub2Zsby1ub2Zsby1vYmplY3RzL2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvUG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIsICJub2Zsby1ub2Zsby1vYmplY3RzL2RlcHMvbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvTm9GbG8uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZW1pdHRlci9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtaW5kZXhvZi9pbmRleC5qcyIsICJjb21wb25lbnQtZW1pdHRlci9kZXBzL2luZGV4b2YvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvbGliL2ZicC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby1vYmplY3RzL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZG9tL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWRvbS9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9BZGRDbGFzcy5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL0FkZENsYXNzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL0FwcGVuZENoaWxkLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZG9tL2NvbXBvbmVudHMvQXBwZW5kQ2hpbGQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvQ3JlYXRlRWxlbWVudC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL0NyZWF0ZUVsZW1lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvQ3JlYXRlRnJhZ21lbnQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9DcmVhdGVGcmFnbWVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9HZXRBdHRyaWJ1dGUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9HZXRBdHRyaWJ1dGUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvR2V0RWxlbWVudC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL0dldEVsZW1lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvSGFzQ2xhc3MuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9IYXNDbGFzcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9SZWFkSHRtbC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL1JlYWRIdG1sLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL1JlbW92ZUVsZW1lbnQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9SZW1vdmVFbGVtZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL1NldEF0dHJpYnV0ZS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL1NldEF0dHJpYnV0ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9Xcml0ZUh0bWwuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9Xcml0ZUh0bWwuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVtb3ZlQ2xhc3MuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9SZW1vdmVDbGFzcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1kb20vZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXN0cmluZ3MvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1zdHJpbmdzL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXN0cmluZ3MvY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1zdHJpbmdzL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXN0cmluZ3MvY29tcG9uZW50cy9Db21waWxlU3RyaW5nLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL0NvbXBpbGVTdHJpbmcuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL0ZpbHRlci5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXN0cmluZ3MvY29tcG9uZW50cy9GaWx0ZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1NlbmRTdHJpbmcuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvU2VuZFN0cmluZy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvU3BsaXRTdHIuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvU3BsaXRTdHIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1N0cmluZ1RlbXBsYXRlLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1N0cmluZ1RlbXBsYXRlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXN0cmluZ3MvY29tcG9uZW50cy9SZXBsYWNlLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1JlcGxhY2UuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL0pzb25pZnkuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvSnNvbmlmeS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvUGFyc2VKc29uLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1BhcnNlSnNvbi5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIiwgIm5vZmxvLW5vZmxvLXN0cmluZ3MvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLXN0cmluZ3MvZGVwcy9ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tc3RyaW5ncy9kZXBzL25vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tc3RyaW5ncy9kZXBzL25vZmxvL3NyYy9saWIvTmV0d29yay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvLXN0cmluZ3MvZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tY29yZS9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudC5qc29uIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tY29yZS9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvQ2FsbGJhY2suanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvQ2FsbGJhY2suanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0Rpc2Nvbm5lY3RBZnRlclBhY2tldC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9EaXNjb25uZWN0QWZ0ZXJQYWNrZXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0Ryb3AuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvRHJvcC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvR3JvdXAuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvR3JvdXAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0tpY2suanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvS2ljay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvTWVyZ2UuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvTWVyZ2UuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL091dHB1dC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9PdXRwdXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL1JlcGVhdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9SZXBlYXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL1JlcGVhdEFzeW5jLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tY29yZS9jb21wb25lbnRzL1JlcGVhdEFzeW5jLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNvcmUvY29tcG9uZW50cy9TcGxpdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9TcGxpdC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvUnVuSW50ZXJ2YWwuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvUnVuSW50ZXJ2YWwuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL01ha2VGdW5jdGlvbi5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9NYWtlRnVuY3Rpb24uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvUG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWNvcmUvZGVwcy9ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvTm9GbG8uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIiwgIm5vZmxvLW5vZmxvLWNvcmUvZGVwcy9ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZW1pdHRlci9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtaW5kZXhvZi9pbmRleC5qcyIsICJjb21wb25lbnQtZW1pdHRlci9kZXBzL2luZGV4b2YvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvbGliL2ZicC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9pbmRleC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50Lmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRXh0ZW5kLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9FeHRlbmQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL01lcmdlT2JqZWN0cy5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWVyZ2VPYmplY3RzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TcGxpdE9iamVjdC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU3BsaXRPYmplY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1JlcGxhY2VLZXkuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1JlcGxhY2VLZXkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0tleXMuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0tleXMuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NpemUuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NpemUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1ZhbHVlcy5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvVmFsdWVzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9Kb2luLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9Kb2luLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9FeHRyYWN0UHJvcGVydHkuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0V4dHJhY3RQcm9wZXJ0eS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvSW5zZXJ0UHJvcGVydHkuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0luc2VydFByb3BlcnR5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TbGljZUFycmF5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TbGljZUFycmF5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TcGxpdEFycmF5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TcGxpdEFycmF5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9GaWx0ZXJQcm9wZXJ0eVZhbHVlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9GaWx0ZXJQcm9wZXJ0eVZhbHVlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9GbGF0dGVuT2JqZWN0LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9GbGF0dGVuT2JqZWN0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9NYXBQcm9wZXJ0eS5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWFwUHJvcGVydHkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1JlbW92ZVByb3BlcnR5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9SZW1vdmVQcm9wZXJ0eS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWFwUHJvcGVydHlWYWx1ZS5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWFwUHJvcGVydHlWYWx1ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvR2V0T2JqZWN0S2V5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9HZXRPYmplY3RLZXkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1VuaXF1ZUFycmF5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9VbmlxdWVBcnJheS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2V0UHJvcGVydHkuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TaW1wbGlmeU9iamVjdC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2ltcGxpZnlPYmplY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0R1cGxpY2F0ZVByb3BlcnR5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9EdXBsaWNhdGVQcm9wZXJ0eS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvQ3JlYXRlT2JqZWN0LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9DcmVhdGVPYmplY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NyZWF0ZURhdGUuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NyZWF0ZURhdGUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5VmFsdWUuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5VmFsdWUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NhbGxNZXRob2QuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NhbGxNZXRob2QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9pbmRleC5qcyIsICJub2Zsby1vYmplY3RzL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL2NvbXBvbmVudC5qc29uIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL1BvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FzeW5jQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL0FzeW5jQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1vYmplY3RzL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL05vRmxvLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTmV0d29yay5qcyIsICJub2Zsby1ub2Zsby1vYmplY3RzL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtZW1pdHRlci9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2VtaXR0ZXIvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWluZGV4b2YvaW5kZXguanMiLCAiY29tcG9uZW50LWVtaXR0ZXIvZGVwcy9pbmRleG9mL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL3VuZGVyc2NvcmUvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2xpYi9mYnAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL3VuZGVyc2NvcmUvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvaW5kZXguanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZmxvdy9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1mbG93L2NvbXBvbmVudC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWZsb3cvY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZmxvdy9jb21wb25lbnRzL0NvbmNhdC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1mbG93L2NvbXBvbmVudHMvQ29uY2F0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvY29tcG9uZW50cy9HYXRlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWZsb3cvY29tcG9uZW50cy9HYXRlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvaW5kZXguanMiLCAibm9mbG8tZmxvdy9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIiwgIm5vZmxvLW5vZmxvLWZsb3cvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWZsb3cvZGVwcy9ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvTmV0d29yay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9pbmRleC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1kb20vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWRvbS9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9BZGRDbGFzcy5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9BZGRDbGFzcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9BcHBlbmRDaGlsZC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9BcHBlbmRDaGlsZC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9DcmVhdGVFbGVtZW50LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL0NyZWF0ZUVsZW1lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvQ3JlYXRlRnJhZ21lbnQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZG9tL2NvbXBvbmVudHMvQ3JlYXRlRnJhZ21lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvR2V0QXR0cmlidXRlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL0dldEF0dHJpYnV0ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9HZXRFbGVtZW50LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL0dldEVsZW1lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvSGFzQ2xhc3MuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZG9tL2NvbXBvbmVudHMvSGFzQ2xhc3MuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVhZEh0bWwuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVhZEh0bWwuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVtb3ZlRWxlbWVudC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9SZW1vdmVFbGVtZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL1NldEF0dHJpYnV0ZS5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9TZXRBdHRyaWJ1dGUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvV3JpdGVIdG1sLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL1dyaXRlSHRtbC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9SZW1vdmVDbGFzcy5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9SZW1vdmVDbGFzcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9pbmRleC5qcyIsICJub2Zsby1kb20vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1kb20vZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNzcy9pbmRleC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1jc3MvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY3NzL2NvbXBvbmVudC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNzcy9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jc3MvY29tcG9uZW50cy9Nb3ZlRWxlbWVudC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1jc3MvY29tcG9uZW50cy9Nb3ZlRWxlbWVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jc3MvY29tcG9uZW50cy9Sb3RhdGVFbGVtZW50LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNzcy9jb21wb25lbnRzL1JvdGF0ZUVsZW1lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY3NzL2NvbXBvbmVudHMvU2V0RWxlbWVudFRvcC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1jc3MvY29tcG9uZW50cy9TZXRFbGVtZW50VG9wLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNzcy9pbmRleC5qcyIsICJub2Zsby1jc3MvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1jc3MvZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWNzcy9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWNzcy9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLWNzcy9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLWNzcy9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvaW5kZXguanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tbWF0aC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tbWF0aC9jb21wb25lbnRzL0FkZC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1tYXRoL2NvbXBvbmVudHMvQWRkLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9TdWJ0cmFjdC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1tYXRoL2NvbXBvbmVudHMvU3VidHJhY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tbWF0aC9jb21wb25lbnRzL011bHRpcGx5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9NdWx0aXBseS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvRGl2aWRlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9EaXZpZGUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tbWF0aC9jb21wb25lbnRzL0NhbGN1bGF0ZUFuZ2xlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9DYWxjdWxhdGVBbmdsZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvQ2FsY3VsYXRlRGlzdGFuY2UuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tbWF0aC9jb21wb25lbnRzL0NhbGN1bGF0ZURpc3RhbmNlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9Db21wYXJlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9Db21wYXJlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9Db3VudFN1bS5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1tYXRoL2NvbXBvbmVudHMvQ291bnRTdW0uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tbWF0aC9saWIvTWF0aENvbXBvbmVudC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1tYXRoL2xpYi9NYXRoQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvaW5kZXguanMiLCAibm9mbG8tbWF0aC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIiwgIm5vZmxvLW5vZmxvLW1hdGgvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLW1hdGgvZGVwcy9ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tbWF0aC9kZXBzL25vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tbWF0aC9kZXBzL25vZmxvL3NyYy9saWIvTmV0d29yay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNvcmUvaW5kZXguanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tY29yZS9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0NhbGxiYWNrLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9DYWxsYmFjay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvRGlzY29ubmVjdEFmdGVyUGFja2V0LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9EaXNjb25uZWN0QWZ0ZXJQYWNrZXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0Ryb3AuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tY29yZS9jb21wb25lbnRzL0Ryb3AuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0dyb3VwLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9Hcm91cC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvS2ljay5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvS2ljay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvTWVyZ2UuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tY29yZS9jb21wb25lbnRzL01lcmdlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNvcmUvY29tcG9uZW50cy9PdXRwdXQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tY29yZS9jb21wb25lbnRzL091dHB1dC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvUmVwZWF0LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9SZXBlYXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL1JlcGVhdEFzeW5jLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9SZXBlYXRBc3luYy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvU3BsaXQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tY29yZS9jb21wb25lbnRzL1NwbGl0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNvcmUvY29tcG9uZW50cy9SdW5JbnRlcnZhbC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvUnVuSW50ZXJ2YWwuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL01ha2VGdW5jdGlvbi5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvTWFrZUZ1bmN0aW9uLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNvcmUvaW5kZXguanMiLCAibm9mbG8tY29yZS9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIiwgIm5vZmxvLW5vZmxvLWNvcmUvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWNvcmUvZGVwcy9ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvTmV0d29yay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvLWNvcmUvZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJ0aGUtYmVoYXZpb3IvaW5kZXguanMiLCAidGhlLWJlaGF2aW9yL2luZGV4LmpzIik7aWYgKHR5cGVvZiBleHBvcnRzID09ICJvYmplY3QiKSB7CiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCJ0aGUtYmVoYXZpb3IiKTsKfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09ICJmdW5jdGlvbiIgJiYgZGVmaW5lLmFtZCkgewogIGRlZmluZShmdW5jdGlvbigpeyByZXR1cm4gcmVxdWlyZSgidGhlLWJlaGF2aW9yIik7IH0pOwp9IGVsc2UgewogIHRoaXNbInRoZS1iZWhhdmlvciJdID0gcmVxdWlyZSgidGhlLWJlaGF2aW9yIik7Cn19KSgpOw==",
                "body": "OyhmdW5jdGlvbigpewoKLyoqCiAqIFJlcXVpcmUgdGhlIGdpdmVuIHBhdGguCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAqIEByZXR1cm4ge09iamVjdH0gZXhwb3J0cwogKiBAYXBpIHB1YmxpYwogKi8KCmZ1bmN0aW9uIHJlcXVpcmUocGF0aCwgcGFyZW50LCBvcmlnKSB7CiAgdmFyIHJlc29sdmVkID0gcmVxdWlyZS5yZXNvbHZlKHBhdGgpOwoKICAvLyBsb29rdXAgZmFpbGVkCiAgaWYgKG51bGwgPT0gcmVzb2x2ZWQpIHsKICAgIG9yaWcgPSBvcmlnIHx8IHBhdGg7CiAgICBwYXJlbnQgPSBwYXJlbnQgfHwgJ3Jvb3QnOwogICAgdmFyIGVyciA9IG5ldyBFcnJvcignRmFpbGVkIHRvIHJlcXVpcmUgIicgKyBvcmlnICsgJyIgZnJvbSAiJyArIHBhcmVudCArICciJyk7CiAgICBlcnIucGF0aCA9IG9yaWc7CiAgICBlcnIucGFyZW50ID0gcGFyZW50OwogICAgZXJyLnJlcXVpcmUgPSB0cnVlOwogICAgdGhyb3cgZXJyOwogIH0KCiAgdmFyIG1vZHVsZSA9IHJlcXVpcmUubW9kdWxlc1tyZXNvbHZlZF07CgogIC8vIHBlcmZvcm0gcmVhbCByZXF1aXJlKCkKICAvLyBieSBpbnZva2luZyB0aGUgbW9kdWxlJ3MKICAvLyByZWdpc3RlcmVkIGZ1bmN0aW9uCiAgaWYgKCFtb2R1bGUuX3Jlc29sdmluZyAmJiAhbW9kdWxlLmV4cG9ydHMpIHsKICAgIHZhciBtb2QgPSB7fTsKICAgIG1vZC5leHBvcnRzID0ge307CiAgICBtb2QuY2xpZW50ID0gbW9kLmNvbXBvbmVudCA9IHRydWU7CiAgICBtb2R1bGUuX3Jlc29sdmluZyA9IHRydWU7CiAgICBtb2R1bGUuY2FsbCh0aGlzLCBtb2QuZXhwb3J0cywgcmVxdWlyZS5yZWxhdGl2ZShyZXNvbHZlZCksIG1vZCk7CiAgICBkZWxldGUgbW9kdWxlLl9yZXNvbHZpbmc7CiAgICBtb2R1bGUuZXhwb3J0cyA9IG1vZC5leHBvcnRzOwogIH0KCiAgcmV0dXJuIG1vZHVsZS5leHBvcnRzOwp9CgovKioKICogUmVnaXN0ZXJlZCBtb2R1bGVzLgogKi8KCnJlcXVpcmUubW9kdWxlcyA9IHt9OwoKLyoqCiAqIFJlZ2lzdGVyZWQgYWxpYXNlcy4KICovCgpyZXF1aXJlLmFsaWFzZXMgPSB7fTsKCi8qKgogKiBSZXNvbHZlIGBwYXRoYC4KICoKICogTG9va3VwOgogKgogKiAgIC0gUEFUSC9pbmRleC5qcwogKiAgIC0gUEFUSC5qcwogKiAgIC0gUEFUSAogKgogKiBAcGFyYW0ge1N0cmluZ30gcGF0aAogKiBAcmV0dXJuIHtTdHJpbmd9IHBhdGggb3IgbnVsbAogKiBAYXBpIHByaXZhdGUKICovCgpyZXF1aXJlLnJlc29sdmUgPSBmdW5jdGlvbihwYXRoKSB7CiAgaWYgKHBhdGguY2hhckF0KDApID09PSAnLycpIHBhdGggPSBwYXRoLnNsaWNlKDEpOwoKICB2YXIgcGF0aHMgPSBbCiAgICBwYXRoLAogICAgcGF0aCArICcuanMnLAogICAgcGF0aCArICcuanNvbicsCiAgICBwYXRoICsgJy9pbmRleC5qcycsCiAgICBwYXRoICsgJy9pbmRleC5qc29uJwogIF07CgogIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBwYXRoID0gcGF0aHNbaV07CiAgICBpZiAocmVxdWlyZS5tb2R1bGVzLmhhc093blByb3BlcnR5KHBhdGgpKSByZXR1cm4gcGF0aDsKICAgIGlmIChyZXF1aXJlLmFsaWFzZXMuaGFzT3duUHJvcGVydHkocGF0aCkpIHJldHVybiByZXF1aXJlLmFsaWFzZXNbcGF0aF07CiAgfQp9OwoKLyoqCiAqIE5vcm1hbGl6ZSBgcGF0aGAgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgcGF0aC4KICoKICogQHBhcmFtIHtTdHJpbmd9IGN1cnIKICogQHBhcmFtIHtTdHJpbmd9IHBhdGgKICogQHJldHVybiB7U3RyaW5nfQogKiBAYXBpIHByaXZhdGUKICovCgpyZXF1aXJlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKGN1cnIsIHBhdGgpIHsKICB2YXIgc2VncyA9IFtdOwoKICBpZiAoJy4nICE9IHBhdGguY2hhckF0KDApKSByZXR1cm4gcGF0aDsKCiAgY3VyciA9IGN1cnIuc3BsaXQoJy8nKTsKICBwYXRoID0gcGF0aC5zcGxpdCgnLycpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyArK2kpIHsKICAgIGlmICgnLi4nID09IHBhdGhbaV0pIHsKICAgICAgY3Vyci5wb3AoKTsKICAgIH0gZWxzZSBpZiAoJy4nICE9IHBhdGhbaV0gJiYgJycgIT0gcGF0aFtpXSkgewogICAgICBzZWdzLnB1c2gocGF0aFtpXSk7CiAgICB9CiAgfQoKICByZXR1cm4gY3Vyci5jb25jYXQoc2Vncykuam9pbignLycpOwp9OwoKLyoqCiAqIFJlZ2lzdGVyIG1vZHVsZSBhdCBgcGF0aGAgd2l0aCBjYWxsYmFjayBgZGVmaW5pdGlvbmAuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAqIEBwYXJhbSB7RnVuY3Rpb259IGRlZmluaXRpb24KICogQGFwaSBwcml2YXRlCiAqLwoKcmVxdWlyZS5yZWdpc3RlciA9IGZ1bmN0aW9uKHBhdGgsIGRlZmluaXRpb24pIHsKICByZXF1aXJlLm1vZHVsZXNbcGF0aF0gPSBkZWZpbml0aW9uOwp9OwoKLyoqCiAqIEFsaWFzIGEgbW9kdWxlIGRlZmluaXRpb24uCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBmcm9tCiAqIEBwYXJhbSB7U3RyaW5nfSB0bwogKiBAYXBpIHByaXZhdGUKICovCgpyZXF1aXJlLmFsaWFzID0gZnVuY3Rpb24oZnJvbSwgdG8pIHsKICBpZiAoIXJlcXVpcmUubW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShmcm9tKSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gYWxpYXMgIicgKyBmcm9tICsgJyIsIGl0IGRvZXMgbm90IGV4aXN0Jyk7CiAgfQogIHJlcXVpcmUuYWxpYXNlc1t0b10gPSBmcm9tOwp9OwoKLyoqCiAqIFJldHVybiBhIHJlcXVpcmUgZnVuY3Rpb24gcmVsYXRpdmUgdG8gdGhlIGBwYXJlbnRgIHBhdGguCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBwYXJlbnQKICogQHJldHVybiB7RnVuY3Rpb259CiAqIEBhcGkgcHJpdmF0ZQogKi8KCnJlcXVpcmUucmVsYXRpdmUgPSBmdW5jdGlvbihwYXJlbnQpIHsKICB2YXIgcCA9IHJlcXVpcmUubm9ybWFsaXplKHBhcmVudCwgJy4uJyk7CgogIC8qKgogICAqIGxhc3RJbmRleE9mIGhlbHBlci4KICAgKi8KCiAgZnVuY3Rpb24gbGFzdEluZGV4T2YoYXJyLCBvYmopIHsKICAgIHZhciBpID0gYXJyLmxlbmd0aDsKICAgIHdoaWxlIChpLS0pIHsKICAgICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTsKICAgIH0KICAgIHJldHVybiAtMTsKICB9CgogIC8qKgogICAqIFRoZSByZWxhdGl2ZSByZXF1aXJlKCkgaXRzZWxmLgogICAqLwoKICBmdW5jdGlvbiBsb2NhbFJlcXVpcmUocGF0aCkgewogICAgdmFyIHJlc29sdmVkID0gbG9jYWxSZXF1aXJlLnJlc29sdmUocGF0aCk7CiAgICByZXR1cm4gcmVxdWlyZShyZXNvbHZlZCwgcGFyZW50LCBwYXRoKTsKICB9CgogIC8qKgogICAqIFJlc29sdmUgcmVsYXRpdmUgdG8gdGhlIHBhcmVudC4KICAgKi8KCiAgbG9jYWxSZXF1aXJlLnJlc29sdmUgPSBmdW5jdGlvbihwYXRoKSB7CiAgICB2YXIgYyA9IHBhdGguY2hhckF0KDApOwogICAgaWYgKCcvJyA9PSBjKSByZXR1cm4gcGF0aC5zbGljZSgxKTsKICAgIGlmICgnLicgPT0gYykgcmV0dXJuIHJlcXVpcmUubm9ybWFsaXplKHAsIHBhdGgpOwoKICAgIC8vIHJlc29sdmUgZGVwcyBieSByZXR1cm5pbmcKICAgIC8vIHRoZSBkZXAgaW4gdGhlIG5lYXJlc3QgImRlcHMiCiAgICAvLyBkaXJlY3RvcnkKICAgIHZhciBzZWdzID0gcGFyZW50LnNwbGl0KCcvJyk7CiAgICB2YXIgaSA9IGxhc3RJbmRleE9mKHNlZ3MsICdkZXBzJykgKyAxOwogICAgaWYgKCFpKSBpID0gMDsKICAgIHBhdGggPSBzZWdzLnNsaWNlKDAsIGkgKyAxKS5qb2luKCcvJykgKyAnL2RlcHMvJyArIHBhdGg7CiAgICByZXR1cm4gcGF0aDsKICB9OwoKICAvKioKICAgKiBDaGVjayBpZiBtb2R1bGUgaXMgZGVmaW5lZCBhdCBgcGF0aGAuCiAgICovCgogIGxvY2FsUmVxdWlyZS5leGlzdHMgPSBmdW5jdGlvbihwYXRoKSB7CiAgICByZXR1cm4gcmVxdWlyZS5tb2R1bGVzLmhhc093blByb3BlcnR5KGxvY2FsUmVxdWlyZS5yZXNvbHZlKHBhdGgpKTsKICB9OwoKICByZXR1cm4gbG9jYWxSZXF1aXJlOwp9OwpyZXF1aXJlLnJlZ2lzdGVyKCJjb21wb25lbnQtaW5kZXhvZi9pbmRleC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXJyLCBvYmopewogIGlmIChhcnIuaW5kZXhPZikgcmV0dXJuIGFyci5pbmRleE9mKG9iaik7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHsKICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGk7CiAgfQogIHJldHVybiAtMTsKfTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoImNvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKCi8qKgogKiBNb2R1bGUgZGVwZW5kZW5jaWVzLgogKi8KCnZhciBpbmRleCA9IHJlcXVpcmUoJ2luZGV4b2YnKTsKCi8qKgogKiBFeHBvc2UgYEVtaXR0ZXJgLgogKi8KCm1vZHVsZS5leHBvcnRzID0gRW1pdHRlcjsKCi8qKgogKiBJbml0aWFsaXplIGEgbmV3IGBFbWl0dGVyYC4KICoKICogQGFwaSBwdWJsaWMKICovCgpmdW5jdGlvbiBFbWl0dGVyKG9iaikgewogIGlmIChvYmopIHJldHVybiBtaXhpbihvYmopOwp9OwoKLyoqCiAqIE1peGluIHRoZSBlbWl0dGVyIHByb3BlcnRpZXMuCiAqCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmoKICogQHJldHVybiB7T2JqZWN0fQogKiBAYXBpIHByaXZhdGUKICovCgpmdW5jdGlvbiBtaXhpbihvYmopIHsKICBmb3IgKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHsKICAgIG9ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTsKICB9CiAgcmV0dXJuIG9iajsKfQoKLyoqCiAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudAogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbgogKiBAcmV0dXJuIHtFbWl0dGVyfQogKiBAYXBpIHB1YmxpYwogKi8KCkVtaXR0ZXIucHJvdG90eXBlLm9uID0KRW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7CiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9OwogICh0aGlzLl9jYWxsYmFja3NbZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XSB8fCBbXSkKICAgIC5wdXNoKGZuKTsKICByZXR1cm4gdGhpczsKfTsKCi8qKgogKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGUKICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC4KICoKICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50CiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuCiAqIEByZXR1cm4ge0VtaXR0ZXJ9CiAqIEBhcGkgcHVibGljCiAqLwoKRW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7CiAgdmFyIHNlbGYgPSB0aGlzOwogIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTsKCiAgZnVuY3Rpb24gb24oKSB7CiAgICBzZWxmLm9mZihldmVudCwgb24pOwogICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIGZuLl9vZmYgPSBvbjsKICB0aGlzLm9uKGV2ZW50LCBvbik7CiAgcmV0dXJuIHRoaXM7Cn07CgovKioKICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGwKICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudAogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbgogKiBAcmV0dXJuIHtFbWl0dGVyfQogKiBAYXBpIHB1YmxpYwogKi8KCkVtaXR0ZXIucHJvdG90eXBlLm9mZiA9CkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0KRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0KRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7CiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9OwoKICAvLyBhbGwKICBpZiAoMCA9PSBhcmd1bWVudHMubGVuZ3RoKSB7CiAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLy8gc3BlY2lmaWMgZXZlbnQKICB2YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTsKICBpZiAoIWNhbGxiYWNrcykgcmV0dXJuIHRoaXM7CgogIC8vIHJlbW92ZSBhbGwgaGFuZGxlcnMKICBpZiAoMSA9PSBhcmd1bWVudHMubGVuZ3RoKSB7CiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLy8gcmVtb3ZlIHNwZWNpZmljIGhhbmRsZXIKICB2YXIgaSA9IGluZGV4KGNhbGxiYWNrcywgZm4uX29mZiB8fCBmbik7CiAgaWYgKH5pKSBjYWxsYmFja3Muc3BsaWNlKGksIDEpOwogIHJldHVybiB0aGlzOwp9OwoKLyoqCiAqIEVtaXQgYGV2ZW50YCB3aXRoIHRoZSBnaXZlbiBhcmdzLgogKgogKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQKICogQHBhcmFtIHtNaXhlZH0gLi4uCiAqIEByZXR1cm4ge0VtaXR0ZXJ9CiAqLwoKRW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50KXsKICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307CiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkKICAgICwgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTsKCiAgaWYgKGNhbGxiYWNrcykgewogICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzLnNsaWNlKDApOwogICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsZW47ICsraSkgewogICAgICBjYWxsYmFja3NbaV0uYXBwbHkodGhpcywgYXJncyk7CiAgICB9CiAgfQoKICByZXR1cm4gdGhpczsKfTsKCi8qKgogKiBSZXR1cm4gYXJyYXkgb2YgY2FsbGJhY2tzIGZvciBgZXZlbnRgLgogKgogKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQKICogQHJldHVybiB7QXJyYXl9CiAqIEBhcGkgcHVibGljCiAqLwoKRW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24oZXZlbnQpewogIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTsKICByZXR1cm4gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XSB8fCBbXTsKfTsKCi8qKgogKiBDaGVjayBpZiB0aGlzIGVtaXR0ZXIgaGFzIGBldmVudGAgaGFuZGxlcnMuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudAogKiBAcmV0dXJuIHtCb29sZWFufQogKiBAYXBpIHB1YmxpYwogKi8KCkVtaXR0ZXIucHJvdG90eXBlLmhhc0xpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXsKICByZXR1cm4gISEgdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Ci8vICAgICBVbmRlcnNjb3JlLmpzIDEuMy4zCi8vICAgICAoYykgMjAwOS0yMDEyIEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBJbmMuCi8vICAgICBVbmRlcnNjb3JlIGlzIGZyZWVseSBkaXN0cmlidXRhYmxlIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KLy8gICAgIFBvcnRpb25zIG9mIFVuZGVyc2NvcmUgYXJlIGluc3BpcmVkIG9yIGJvcnJvd2VkIGZyb20gUHJvdG90eXBlLAovLyAgICAgT2xpdmVyIFN0ZWVsZSdzIEZ1bmN0aW9uYWwsIGFuZCBKb2huIFJlc2lnJ3MgTWljcm8tVGVtcGxhdGluZy4KLy8gICAgIEZvciBhbGwgZGV0YWlscyBhbmQgZG9jdW1lbnRhdGlvbjoKLy8gICAgIGh0dHA6Ly9kb2N1bWVudGNsb3VkLmdpdGh1Yi5jb20vdW5kZXJzY29yZQoKKGZ1bmN0aW9uKCkgewoKICAvLyBCYXNlbGluZSBzZXR1cAogIC8vIC0tLS0tLS0tLS0tLS0tCgogIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIGluIHRoZSBicm93c2VyLCBvciBgZ2xvYmFsYCBvbiB0aGUgc2VydmVyLgogIHZhciByb290ID0gdGhpczsKCiAgLy8gU2F2ZSB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGBfYCB2YXJpYWJsZS4KICB2YXIgcHJldmlvdXNVbmRlcnNjb3JlID0gcm9vdC5fOwoKICAvLyBFc3RhYmxpc2ggdGhlIG9iamVjdCB0aGF0IGdldHMgcmV0dXJuZWQgdG8gYnJlYWsgb3V0IG9mIGEgbG9vcCBpdGVyYXRpb24uCiAgdmFyIGJyZWFrZXIgPSB7fTsKCiAgLy8gU2F2ZSBieXRlcyBpbiB0aGUgbWluaWZpZWQgKGJ1dCBub3QgZ3ppcHBlZCkgdmVyc2lvbjoKICB2YXIgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSwgT2JqUHJvdG8gPSBPYmplY3QucHJvdG90eXBlLCBGdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGU7CgogIC8vIENyZWF0ZSBxdWljayByZWZlcmVuY2UgdmFyaWFibGVzIGZvciBzcGVlZCBhY2Nlc3MgdG8gY29yZSBwcm90b3R5cGVzLgogIHZhciBwdXNoICAgICAgICAgICAgID0gQXJyYXlQcm90by5wdXNoLAogICAgICBzbGljZSAgICAgICAgICAgID0gQXJyYXlQcm90by5zbGljZSwKICAgICAgdW5zaGlmdCAgICAgICAgICA9IEFycmF5UHJvdG8udW5zaGlmdCwKICAgICAgdG9TdHJpbmcgICAgICAgICA9IE9ialByb3RvLnRvU3RyaW5nLAogICAgICBoYXNPd25Qcm9wZXJ0eSAgID0gT2JqUHJvdG8uaGFzT3duUHJvcGVydHk7CgogIC8vIEFsbCAqKkVDTUFTY3JpcHQgNSoqIG5hdGl2ZSBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbnMgdGhhdCB3ZSBob3BlIHRvIHVzZQogIC8vIGFyZSBkZWNsYXJlZCBoZXJlLgogIHZhcgogICAgbmF0aXZlRm9yRWFjaCAgICAgID0gQXJyYXlQcm90by5mb3JFYWNoLAogICAgbmF0aXZlTWFwICAgICAgICAgID0gQXJyYXlQcm90by5tYXAsCiAgICBuYXRpdmVSZWR1Y2UgICAgICAgPSBBcnJheVByb3RvLnJlZHVjZSwKICAgIG5hdGl2ZVJlZHVjZVJpZ2h0ICA9IEFycmF5UHJvdG8ucmVkdWNlUmlnaHQsCiAgICBuYXRpdmVGaWx0ZXIgICAgICAgPSBBcnJheVByb3RvLmZpbHRlciwKICAgIG5hdGl2ZUV2ZXJ5ICAgICAgICA9IEFycmF5UHJvdG8uZXZlcnksCiAgICBuYXRpdmVTb21lICAgICAgICAgPSBBcnJheVByb3RvLnNvbWUsCiAgICBuYXRpdmVJbmRleE9mICAgICAgPSBBcnJheVByb3RvLmluZGV4T2YsCiAgICBuYXRpdmVMYXN0SW5kZXhPZiAgPSBBcnJheVByb3RvLmxhc3RJbmRleE9mLAogICAgbmF0aXZlSXNBcnJheSAgICAgID0gQXJyYXkuaXNBcnJheSwKICAgIG5hdGl2ZUtleXMgICAgICAgICA9IE9iamVjdC5rZXlzLAogICAgbmF0aXZlQmluZCAgICAgICAgID0gRnVuY1Byb3RvLmJpbmQ7CgogIC8vIENyZWF0ZSBhIHNhZmUgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgdXNlIGJlbG93LgogIHZhciBfID0gZnVuY3Rpb24ob2JqKSB7IHJldHVybiBuZXcgd3JhcHBlcihvYmopOyB9OwoKICAvLyBFeHBvcnQgdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciAqKk5vZGUuanMqKiwgd2l0aAogIC8vIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGZvciB0aGUgb2xkIGByZXF1aXJlKClgIEFQSS4gSWYgd2UncmUgaW4KICAvLyB0aGUgYnJvd3NlciwgYWRkIGBfYCBhcyBhIGdsb2JhbCBvYmplY3QgdmlhIGEgc3RyaW5nIGlkZW50aWZpZXIsCiAgLy8gZm9yIENsb3N1cmUgQ29tcGlsZXIgImFkdmFuY2VkIiBtb2RlLgogIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykgewogICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfOwogICAgfQogICAgZXhwb3J0cy5fID0gXzsKICB9IGVsc2UgewogICAgcm9vdFsnXyddID0gXzsKICB9CgogIC8vIEN1cnJlbnQgdmVyc2lvbi4KICBfLlZFUlNJT04gPSAnMS4zLjMnOwoKICAvLyBDb2xsZWN0aW9uIEZ1bmN0aW9ucwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8vIFRoZSBjb3JuZXJzdG9uZSwgYW4gYGVhY2hgIGltcGxlbWVudGF0aW9uLCBha2EgYGZvckVhY2hgLgogIC8vIEhhbmRsZXMgb2JqZWN0cyB3aXRoIHRoZSBidWlsdC1pbiBgZm9yRWFjaGAsIGFycmF5cywgYW5kIHJhdyBvYmplY3RzLgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBmb3JFYWNoYCBpZiBhdmFpbGFibGUuCiAgdmFyIGVhY2ggPSBfLmVhY2ggPSBfLmZvckVhY2ggPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICBpZiAob2JqID09IG51bGwpIHJldHVybjsKICAgIGlmIChuYXRpdmVGb3JFYWNoICYmIG9iai5mb3JFYWNoID09PSBuYXRpdmVGb3JFYWNoKSB7CiAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCBjb250ZXh0KTsKICAgIH0gZWxzZSBpZiAob2JqLmxlbmd0aCA9PT0gK29iai5sZW5ndGgpIHsKICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopID09PSBicmVha2VyKSByZXR1cm47CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoXy5oYXMob2JqLCBrZXkpKSB7CiAgICAgICAgICBpZiAoaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopID09PSBicmVha2VyKSByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gUmV0dXJuIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRvciB0byBlYWNoIGVsZW1lbnQuCiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYG1hcGAgaWYgYXZhaWxhYmxlLgogIF8ubWFwID0gXy5jb2xsZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgY29udGV4dCkgewogICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdHM7CiAgICBpZiAobmF0aXZlTWFwICYmIG9iai5tYXAgPT09IG5hdGl2ZU1hcCkgcmV0dXJuIG9iai5tYXAoaXRlcmF0b3IsIGNvbnRleHQpOwogICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkgewogICAgICByZXN1bHRzW3Jlc3VsdHMubGVuZ3RoXSA9IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBsaXN0KTsKICAgIH0pOwogICAgcmV0dXJuIHJlc3VsdHM7CiAgfTsKCiAgLy8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLAogIC8vIG9yIGBmb2xkbGAuIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGByZWR1Y2VgIGlmIGF2YWlsYWJsZS4KICBfLnJlZHVjZSA9IF8uZm9sZGwgPSBfLmluamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIG1lbW8sIGNvbnRleHQpIHsKICAgIHZhciBpbml0aWFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDI7CiAgICBpZiAob2JqID09IG51bGwpIG9iaiA9IFtdOwogICAgaWYgKG5hdGl2ZVJlZHVjZSAmJiBvYmoucmVkdWNlID09PSBuYXRpdmVSZWR1Y2UpIHsKICAgICAgaWYgKGNvbnRleHQpIGl0ZXJhdG9yID0gXy5iaW5kKGl0ZXJhdG9yLCBjb250ZXh0KTsKICAgICAgcmV0dXJuIGluaXRpYWwgPyBvYmoucmVkdWNlKGl0ZXJhdG9yLCBtZW1vKSA6IG9iai5yZWR1Y2UoaXRlcmF0b3IpOwogICAgfQogICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkgewogICAgICBpZiAoIWluaXRpYWwpIHsKICAgICAgICBtZW1vID0gdmFsdWU7CiAgICAgICAgaW5pdGlhbCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWVtbyA9IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgbWVtbywgdmFsdWUsIGluZGV4LCBsaXN0KTsKICAgICAgfQogICAgfSk7CiAgICBpZiAoIWluaXRpYWwpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1JlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUnKTsKICAgIHJldHVybiBtZW1vOwogIH07CgogIC8vIFRoZSByaWdodC1hc3NvY2lhdGl2ZSB2ZXJzaW9uIG9mIHJlZHVjZSwgYWxzbyBrbm93biBhcyBgZm9sZHJgLgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGByZWR1Y2VSaWdodGAgaWYgYXZhaWxhYmxlLgogIF8ucmVkdWNlUmlnaHQgPSBfLmZvbGRyID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgbWVtbywgY29udGV4dCkgewogICAgdmFyIGluaXRpYWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMjsKICAgIGlmIChvYmogPT0gbnVsbCkgb2JqID0gW107CiAgICBpZiAobmF0aXZlUmVkdWNlUmlnaHQgJiYgb2JqLnJlZHVjZVJpZ2h0ID09PSBuYXRpdmVSZWR1Y2VSaWdodCkgewogICAgICBpZiAoY29udGV4dCkgaXRlcmF0b3IgPSBfLmJpbmQoaXRlcmF0b3IsIGNvbnRleHQpOwogICAgICByZXR1cm4gaW5pdGlhbCA/IG9iai5yZWR1Y2VSaWdodChpdGVyYXRvciwgbWVtbykgOiBvYmoucmVkdWNlUmlnaHQoaXRlcmF0b3IpOwogICAgfQogICAgdmFyIHJldmVyc2VkID0gXy50b0FycmF5KG9iaikucmV2ZXJzZSgpOwogICAgaWYgKGNvbnRleHQgJiYgIWluaXRpYWwpIGl0ZXJhdG9yID0gXy5iaW5kKGl0ZXJhdG9yLCBjb250ZXh0KTsKICAgIHJldHVybiBpbml0aWFsID8gXy5yZWR1Y2UocmV2ZXJzZWQsIGl0ZXJhdG9yLCBtZW1vLCBjb250ZXh0KSA6IF8ucmVkdWNlKHJldmVyc2VkLCBpdGVyYXRvcik7CiAgfTsKCiAgLy8gUmV0dXJuIHRoZSBmaXJzdCB2YWx1ZSB3aGljaCBwYXNzZXMgYSB0cnV0aCB0ZXN0LiBBbGlhc2VkIGFzIGBkZXRlY3RgLgogIF8uZmluZCA9IF8uZGV0ZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgY29udGV4dCkgewogICAgdmFyIHJlc3VsdDsKICAgIGFueShvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkgewogICAgICBpZiAoaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGxpc3QpKSB7CiAgICAgICAgcmVzdWx0ID0gdmFsdWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBmaWx0ZXJgIGlmIGF2YWlsYWJsZS4KICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLgogIF8uZmlsdGVyID0gXy5zZWxlY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0czsKICAgIGlmIChuYXRpdmVGaWx0ZXIgJiYgb2JqLmZpbHRlciA9PT0gbmF0aXZlRmlsdGVyKSByZXR1cm4gb2JqLmZpbHRlcihpdGVyYXRvciwgY29udGV4dCk7CiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7CiAgICAgIGlmIChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHNbcmVzdWx0cy5sZW5ndGhdID0gdmFsdWU7CiAgICB9KTsKICAgIHJldHVybiByZXN1bHRzOwogIH07CgogIC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIGZvciB3aGljaCBhIHRydXRoIHRlc3QgZmFpbHMuCiAgXy5yZWplY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0czsKICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHsKICAgICAgaWYgKCFpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHNbcmVzdWx0cy5sZW5ndGhdID0gdmFsdWU7CiAgICB9KTsKICAgIHJldHVybiByZXN1bHRzOwogIH07CgogIC8vIERldGVybWluZSB3aGV0aGVyIGFsbCBvZiB0aGUgZWxlbWVudHMgbWF0Y2ggYSB0cnV0aCB0ZXN0LgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBldmVyeWAgaWYgYXZhaWxhYmxlLgogIC8vIEFsaWFzZWQgYXMgYGFsbGAuCiAgXy5ldmVyeSA9IF8uYWxsID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgY29udGV4dCkgewogICAgdmFyIHJlc3VsdCA9IHRydWU7CiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiByZXN1bHQ7CiAgICBpZiAobmF0aXZlRXZlcnkgJiYgb2JqLmV2ZXJ5ID09PSBuYXRpdmVFdmVyeSkgcmV0dXJuIG9iai5ldmVyeShpdGVyYXRvciwgY29udGV4dCk7CiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7CiAgICAgIGlmICghKHJlc3VsdCA9IHJlc3VsdCAmJiBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpKSByZXR1cm4gYnJlYWtlcjsKICAgIH0pOwogICAgcmV0dXJuICEhcmVzdWx0OwogIH07CgogIC8vIERldGVybWluZSBpZiBhdCBsZWFzdCBvbmUgZWxlbWVudCBpbiB0aGUgb2JqZWN0IG1hdGNoZXMgYSB0cnV0aCB0ZXN0LgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBzb21lYCBpZiBhdmFpbGFibGUuCiAgLy8gQWxpYXNlZCBhcyBgYW55YC4KICB2YXIgYW55ID0gXy5zb21lID0gXy5hbnkgPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICBpdGVyYXRvciB8fCAoaXRlcmF0b3IgPSBfLmlkZW50aXR5KTsKICAgIHZhciByZXN1bHQgPSBmYWxzZTsKICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdDsKICAgIGlmIChuYXRpdmVTb21lICYmIG9iai5zb21lID09PSBuYXRpdmVTb21lKSByZXR1cm4gb2JqLnNvbWUoaXRlcmF0b3IsIGNvbnRleHQpOwogICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkgewogICAgICBpZiAocmVzdWx0IHx8IChyZXN1bHQgPSBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpKSByZXR1cm4gYnJlYWtlcjsKICAgIH0pOwogICAgcmV0dXJuICEhcmVzdWx0OwogIH07CgogIC8vIERldGVybWluZSBpZiBhIGdpdmVuIHZhbHVlIGlzIGluY2x1ZGVkIGluIHRoZSBhcnJheSBvciBvYmplY3QgdXNpbmcgYD09PWAuCiAgLy8gQWxpYXNlZCBhcyBgY29udGFpbnNgLgogIF8uaW5jbHVkZSA9IF8uY29udGFpbnMgPSBmdW5jdGlvbihvYmosIHRhcmdldCkgewogICAgdmFyIGZvdW5kID0gZmFsc2U7CiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiBmb3VuZDsKICAgIGlmIChuYXRpdmVJbmRleE9mICYmIG9iai5pbmRleE9mID09PSBuYXRpdmVJbmRleE9mKSByZXR1cm4gb2JqLmluZGV4T2YodGFyZ2V0KSAhPSAtMTsKICAgIGZvdW5kID0gYW55KG9iaiwgZnVuY3Rpb24odmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlID09PSB0YXJnZXQ7CiAgICB9KTsKICAgIHJldHVybiBmb3VuZDsKICB9OwoKICAvLyBJbnZva2UgYSBtZXRob2QgKHdpdGggYXJndW1lbnRzKSBvbiBldmVyeSBpdGVtIGluIGEgY29sbGVjdGlvbi4KICBfLmludm9rZSA9IGZ1bmN0aW9uKG9iaiwgbWV0aG9kKSB7CiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTsKICAgIHJldHVybiBfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIHJldHVybiAoXy5pc0Z1bmN0aW9uKG1ldGhvZCkgPyBtZXRob2QgOiB2YWx1ZVttZXRob2RdKS5hcHBseSh2YWx1ZSwgYXJncyk7CiAgICB9KTsKICB9OwoKICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBtYXBgOiBmZXRjaGluZyBhIHByb3BlcnR5LgogIF8ucGx1Y2sgPSBmdW5jdGlvbihvYmosIGtleSkgewogICAgcmV0dXJuIF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUpeyByZXR1cm4gdmFsdWVba2V5XTsgfSk7CiAgfTsKCiAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgb3IgKGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLgogIC8vIENhbid0IG9wdGltaXplIGFycmF5cyBvZiBpbnRlZ2VycyBsb25nZXIgdGhhbiA2NSw1MzUgZWxlbWVudHMuCiAgLy8gU2VlOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9ODA3OTcKICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIGlmICghaXRlcmF0b3IgJiYgXy5pc0FycmF5KG9iaikgJiYgb2JqWzBdID09PSArb2JqWzBdICYmIG9iai5sZW5ndGggPCA2NTUzNSkgewogICAgICByZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCwgb2JqKTsKICAgIH0KICAgIGlmICghaXRlcmF0b3IgJiYgXy5pc0VtcHR5KG9iaikpIHJldHVybiAtSW5maW5pdHk7CiAgICB2YXIgcmVzdWx0ID0ge2NvbXB1dGVkIDogLUluZmluaXR5fTsKICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHsKICAgICAgdmFyIGNvbXB1dGVkID0gaXRlcmF0b3IgPyBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkgOiB2YWx1ZTsKICAgICAgY29tcHV0ZWQgPj0gcmVzdWx0LmNvbXB1dGVkICYmIChyZXN1bHQgPSB7dmFsdWUgOiB2YWx1ZSwgY29tcHV0ZWQgOiBjb21wdXRlZH0pOwogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0LnZhbHVlOwogIH07CgogIC8vIFJldHVybiB0aGUgbWluaW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS4KICBfLm1pbiA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIGlmICghaXRlcmF0b3IgJiYgXy5pc0FycmF5KG9iaikgJiYgb2JqWzBdID09PSArb2JqWzBdICYmIG9iai5sZW5ndGggPCA2NTUzNSkgewogICAgICByZXR1cm4gTWF0aC5taW4uYXBwbHkoTWF0aCwgb2JqKTsKICAgIH0KICAgIGlmICghaXRlcmF0b3IgJiYgXy5pc0VtcHR5KG9iaikpIHJldHVybiBJbmZpbml0eTsKICAgIHZhciByZXN1bHQgPSB7Y29tcHV0ZWQgOiBJbmZpbml0eX07CiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7CiAgICAgIHZhciBjb21wdXRlZCA9IGl0ZXJhdG9yID8gaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGxpc3QpIDogdmFsdWU7CiAgICAgIGNvbXB1dGVkIDwgcmVzdWx0LmNvbXB1dGVkICYmIChyZXN1bHQgPSB7dmFsdWUgOiB2YWx1ZSwgY29tcHV0ZWQgOiBjb21wdXRlZH0pOwogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0LnZhbHVlOwogIH07CgogIC8vIFNodWZmbGUgYW4gYXJyYXkuCiAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgcmFuZDsKICAgIHZhciBpbmRleCA9IDA7CiAgICB2YXIgc2h1ZmZsZWQgPSBbXTsKICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICByYW5kID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKytpbmRleCk7CiAgICAgIHNodWZmbGVkW2luZGV4IC0gMV0gPSBzaHVmZmxlZFtyYW5kXTsKICAgICAgc2h1ZmZsZWRbcmFuZF0gPSB2YWx1ZTsKICAgIH0pOwogICAgcmV0dXJuIHNodWZmbGVkOwogIH07CgogIC8vIFNvcnQgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiBwcm9kdWNlZCBieSBhbiBpdGVyYXRvci4KICBfLnNvcnRCeSA9IGZ1bmN0aW9uKG9iaiwgdmFsLCBjb250ZXh0KSB7CiAgICB2YXIgaXRlcmF0b3IgPSBsb29rdXBJdGVyYXRvcihvYmosIHZhbCk7CiAgICByZXR1cm4gXy5wbHVjayhfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkgewogICAgICByZXR1cm4gewogICAgICAgIHZhbHVlIDogdmFsdWUsCiAgICAgICAgY3JpdGVyaWEgOiBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkKICAgICAgfTsKICAgIH0pLnNvcnQoZnVuY3Rpb24obGVmdCwgcmlnaHQpIHsKICAgICAgdmFyIGEgPSBsZWZ0LmNyaXRlcmlhLCBiID0gcmlnaHQuY3JpdGVyaWE7CiAgICAgIGlmIChhID09PSB2b2lkIDApIHJldHVybiAxOwogICAgICBpZiAoYiA9PT0gdm9pZCAwKSByZXR1cm4gLTE7CiAgICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMDsKICAgIH0pLCAndmFsdWUnKTsKICB9OwoKICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiB0byBnZW5lcmF0ZSBsb29rdXAgaXRlcmF0b3JzLgogIHZhciBsb29rdXBJdGVyYXRvciA9IGZ1bmN0aW9uKG9iaiwgdmFsKSB7CiAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKHZhbCkgPyB2YWwgOiBmdW5jdGlvbihvYmopIHsgcmV0dXJuIG9ialt2YWxdOyB9OwogIH07CgogIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHVzZWQgZm9yIGFnZ3JlZ2F0ZSAiZ3JvdXAgYnkiIG9wZXJhdGlvbnMuCiAgdmFyIGdyb3VwID0gZnVuY3Rpb24ob2JqLCB2YWwsIGJlaGF2aW9yKSB7CiAgICB2YXIgcmVzdWx0ID0ge307CiAgICB2YXIgaXRlcmF0b3IgPSBsb29rdXBJdGVyYXRvcihvYmosIHZhbCk7CiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CiAgICAgIHZhciBrZXkgPSBpdGVyYXRvcih2YWx1ZSwgaW5kZXgpOwogICAgICBiZWhhdmlvcihyZXN1bHQsIGtleSwgdmFsdWUpOwogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIC8vIEdyb3VwcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLiBQYXNzIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGUKICAvLyB0byBncm91cCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGNyaXRlcmlvbi4KICBfLmdyb3VwQnkgPSBmdW5jdGlvbihvYmosIHZhbCkgewogICAgcmV0dXJuIGdyb3VwKG9iaiwgdmFsLCBmdW5jdGlvbihyZXN1bHQsIGtleSwgdmFsdWUpIHsKICAgICAgKHJlc3VsdFtrZXldIHx8IChyZXN1bHRba2V5XSA9IFtdKSkucHVzaCh2YWx1ZSk7CiAgICB9KTsKICB9OwoKICAvLyBDb3VudHMgaW5zdGFuY2VzIG9mIGFuIG9iamVjdCB0aGF0IGdyb3VwIGJ5IGEgY2VydGFpbiBjcml0ZXJpb24uIFBhc3MKICAvLyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlIHRvIGNvdW50IGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUKICAvLyBjcml0ZXJpb24uCiAgXy5jb3VudEJ5ID0gZnVuY3Rpb24ob2JqLCB2YWwpIHsKICAgIHJldHVybiBncm91cChvYmosIHZhbCwgZnVuY3Rpb24ocmVzdWx0LCBrZXksIHZhbHVlKSB7CiAgICAgIHJlc3VsdFtrZXldIHx8IChyZXN1bHRba2V5XSA9IDApOwogICAgICByZXN1bHRba2V5XSsrOwogICAgfSk7CiAgfTsKCiAgLy8gVXNlIGEgY29tcGFyYXRvciBmdW5jdGlvbiB0byBmaWd1cmUgb3V0IHRoZSBzbWFsbGVzdCBpbmRleCBhdCB3aGljaAogIC8vIGFuIG9iamVjdCBzaG91bGQgYmUgaW5zZXJ0ZWQgc28gYXMgdG8gbWFpbnRhaW4gb3JkZXIuIFVzZXMgYmluYXJ5IHNlYXJjaC4KICBfLnNvcnRlZEluZGV4ID0gZnVuY3Rpb24oYXJyYXksIG9iaiwgaXRlcmF0b3IpIHsKICAgIGl0ZXJhdG9yIHx8IChpdGVyYXRvciA9IF8uaWRlbnRpdHkpOwogICAgdmFyIHZhbHVlID0gaXRlcmF0b3Iob2JqKTsKICAgIHZhciBsb3cgPSAwLCBoaWdoID0gYXJyYXkubGVuZ3RoOwogICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHsKICAgICAgdmFyIG1pZCA9IChsb3cgKyBoaWdoKSA+PiAxOwogICAgICBpdGVyYXRvcihhcnJheVttaWRdKSA8IHZhbHVlID8gbG93ID0gbWlkICsgMSA6IGhpZ2ggPSBtaWQ7CiAgICB9CiAgICByZXR1cm4gbG93OwogIH07CgogIC8vIFNhZmVseSBjb252ZXJ0IGFueXRoaW5nIGl0ZXJhYmxlIGludG8gYSByZWFsLCBsaXZlIGFycmF5LgogIF8udG9BcnJheSA9IGZ1bmN0aW9uKG9iaikgewogICAgaWYgKCFvYmopICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTsKICAgIGlmIChfLmlzQXJyYXkob2JqKSkgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2xpY2UuY2FsbChvYmopOwogICAgaWYgKF8uaXNBcmd1bWVudHMob2JqKSkgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzbGljZS5jYWxsKG9iaik7CiAgICBpZiAob2JqLnRvQXJyYXkgJiYgXy5pc0Z1bmN0aW9uKG9iai50b0FycmF5KSkgcmV0dXJuIG9iai50b0FycmF5KCk7CiAgICByZXR1cm4gXy52YWx1ZXMob2JqKTsKICB9OwoKICAvLyBSZXR1cm4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBvYmplY3QuCiAgXy5zaXplID0gZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gXy5pc0FycmF5KG9iaikgPyBvYmoubGVuZ3RoIDogXy5rZXlzKG9iaikubGVuZ3RoOwogIH07CgogIC8vIEFycmF5IEZ1bmN0aW9ucwogIC8vIC0tLS0tLS0tLS0tLS0tLQoKICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE4KICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LiBBbGlhc2VkIGFzIGBoZWFkYCBhbmQgYHRha2VgLiBUaGUgKipndWFyZCoqIGNoZWNrCiAgLy8gYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgXy5tYXBgLgogIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHsKICAgIHJldHVybiAobiAhPSBudWxsKSAmJiAhZ3VhcmQgPyBzbGljZS5jYWxsKGFycmF5LCAwLCBuKSA6IGFycmF5WzBdOwogIH07CgogIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGxhc3QgZW50cnkgb2YgdGhlIGFycmF5LiBFc3BlY2lhbGx5IHVzZWZ1bCBvbgogIC8vIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIGFsbCB0aGUgdmFsdWVzIGluCiAgLy8gdGhlIGFycmF5LCBleGNsdWRpbmcgdGhlIGxhc3QgTi4gVGhlICoqZ3VhcmQqKiBjaGVjayBhbGxvd3MgaXQgdG8gd29yayB3aXRoCiAgLy8gYF8ubWFwYC4KICBfLmluaXRpYWwgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHsKICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCAwLCBhcnJheS5sZW5ndGggLSAoKG4gPT0gbnVsbCkgfHwgZ3VhcmQgPyAxIDogbikpOwogIH07CgogIC8vIEdldCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBsYXN0IE4KICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LiBUaGUgKipndWFyZCoqIGNoZWNrIGFsbG93cyBpdCB0byB3b3JrIHdpdGggYF8ubWFwYC4KICBfLmxhc3QgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHsKICAgIGlmICgobiAhPSBudWxsKSAmJiAhZ3VhcmQpIHsKICAgICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIE1hdGgubWF4KGFycmF5Lmxlbmd0aCAtIG4sIDApKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAxXTsKICAgIH0KICB9OwoKICAvLyBSZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBmaXJzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEFsaWFzZWQgYXMgYHRhaWxgLgogIC8vIEVzcGVjaWFsbHkgdXNlZnVsIG9uIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nIGFuICoqaW5kZXgqKiB3aWxsIHJldHVybgogIC8vIHRoZSByZXN0IG9mIHRoZSB2YWx1ZXMgaW4gdGhlIGFycmF5IGZyb20gdGhhdCBpbmRleCBvbndhcmQuIFRoZSAqKmd1YXJkKioKICAvLyBjaGVjayBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuCiAgXy5yZXN0ID0gXy50YWlsID0gZnVuY3Rpb24oYXJyYXksIGluZGV4LCBndWFyZCkgewogICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIChpbmRleCA9PSBudWxsKSB8fCBndWFyZCA/IDEgOiBpbmRleCk7CiAgfTsKCiAgLy8gVHJpbSBvdXQgYWxsIGZhbHN5IHZhbHVlcyBmcm9tIGFuIGFycmF5LgogIF8uY29tcGFjdCA9IGZ1bmN0aW9uKGFycmF5KSB7CiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKXsgcmV0dXJuICEhdmFsdWU7IH0pOwogIH07CgogIC8vIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGEgcmVjdXJzaXZlIGBmbGF0dGVuYCBmdW5jdGlvbi4KICB2YXIgZmxhdHRlbiA9IGZ1bmN0aW9uKGlucHV0LCBzaGFsbG93LCBvdXRwdXQpIHsKICAgIGVhY2goaW5wdXQsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIGlmIChfLmlzQXJyYXkodmFsdWUpKSB7CiAgICAgICAgc2hhbGxvdyA/IHB1c2guYXBwbHkob3V0cHV0LCB2YWx1ZSkgOiBmbGF0dGVuKHZhbHVlLCBzaGFsbG93LCBvdXRwdXQpOwogICAgICB9IGVsc2UgewogICAgICAgIG91dHB1dC5wdXNoKHZhbHVlKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gb3V0cHV0OwogIH07CgogIC8vIFJldHVybiBhIGNvbXBsZXRlbHkgZmxhdHRlbmVkIHZlcnNpb24gb2YgYW4gYXJyYXkuCiAgXy5mbGF0dGVuID0gZnVuY3Rpb24oYXJyYXksIHNoYWxsb3cpIHsKICAgIHJldHVybiBmbGF0dGVuKGFycmF5LCBzaGFsbG93LCBbXSk7CiAgfTsKCiAgLy8gUmV0dXJuIGEgdmVyc2lvbiBvZiB0aGUgYXJyYXkgdGhhdCBkb2VzIG5vdCBjb250YWluIHRoZSBzcGVjaWZpZWQgdmFsdWUocykuCiAgXy53aXRob3V0ID0gZnVuY3Rpb24oYXJyYXkpIHsKICAgIHJldHVybiBfLmRpZmZlcmVuY2UoYXJyYXksIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7CiAgfTsKCiAgLy8gUHJvZHVjZSBhIGR1cGxpY2F0ZS1mcmVlIHZlcnNpb24gb2YgdGhlIGFycmF5LiBJZiB0aGUgYXJyYXkgaGFzIGFscmVhZHkKICAvLyBiZWVuIHNvcnRlZCwgeW91IGhhdmUgdGhlIG9wdGlvbiBvZiB1c2luZyBhIGZhc3RlciBhbGdvcml0aG0uCiAgLy8gQWxpYXNlZCBhcyBgdW5pcXVlYC4KICBfLnVuaXEgPSBfLnVuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5LCBpc1NvcnRlZCwgaXRlcmF0b3IpIHsKICAgIHZhciBpbml0aWFsID0gaXRlcmF0b3IgPyBfLm1hcChhcnJheSwgaXRlcmF0b3IpIDogYXJyYXk7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgXy5yZWR1Y2UoaW5pdGlhbCwgZnVuY3Rpb24obWVtbywgdmFsdWUsIGluZGV4KSB7CiAgICAgIGlmIChpc1NvcnRlZCA/IChfLmxhc3QobWVtbykgIT09IHZhbHVlIHx8ICFtZW1vLmxlbmd0aCkgOiAhXy5pbmNsdWRlKG1lbW8sIHZhbHVlKSkgewogICAgICAgIG1lbW8ucHVzaCh2YWx1ZSk7CiAgICAgICAgcmVzdWx0cy5wdXNoKGFycmF5W2luZGV4XSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG1lbW87CiAgICB9LCBbXSk7CiAgICByZXR1cm4gcmVzdWx0czsKICB9OwoKICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIHVuaW9uOiBlYWNoIGRpc3RpbmN0IGVsZW1lbnQgZnJvbSBhbGwgb2YKICAvLyB0aGUgcGFzc2VkLWluIGFycmF5cy4KICBfLnVuaW9uID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gXy51bmlxKGZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCBbXSkpOwogIH07CgogIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyBldmVyeSBpdGVtIHNoYXJlZCBiZXR3ZWVuIGFsbCB0aGUKICAvLyBwYXNzZWQtaW4gYXJyYXlzLgogIF8uaW50ZXJzZWN0aW9uID0gZnVuY3Rpb24oYXJyYXkpIHsKICAgIHZhciByZXN0ID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgcmV0dXJuIF8uZmlsdGVyKF8udW5pcShhcnJheSksIGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgcmV0dXJuIF8uZXZlcnkocmVzdCwgZnVuY3Rpb24ob3RoZXIpIHsKICAgICAgICByZXR1cm4gXy5pbmRleE9mKG90aGVyLCBpdGVtKSA+PSAwOwogICAgICB9KTsKICAgIH0pOwogIH07CgogIC8vIFRha2UgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBvbmUgYXJyYXkgYW5kIGEgbnVtYmVyIG9mIG90aGVyIGFycmF5cy4KICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLgogIF8uZGlmZmVyZW5jZSA9IGZ1bmN0aW9uKGFycmF5KSB7CiAgICB2YXIgcmVzdCA9IGZsYXR0ZW4oc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCB0cnVlLCBbXSk7CiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKXsgcmV0dXJuICFfLmluY2x1ZGUocmVzdCwgdmFsdWUpOyB9KTsKICB9OwoKICAvLyBaaXAgdG9nZXRoZXIgbXVsdGlwbGUgbGlzdHMgaW50byBhIHNpbmdsZSBhcnJheSAtLSBlbGVtZW50cyB0aGF0IHNoYXJlCiAgLy8gYW4gaW5kZXggZ28gdG9nZXRoZXIuCiAgXy56aXAgPSBmdW5jdGlvbigpIHsKICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgdmFyIGxlbmd0aCA9IF8ubWF4KF8ucGx1Y2soYXJncywgJ2xlbmd0aCcpKTsKICAgIHZhciByZXN1bHRzID0gbmV3IEFycmF5KGxlbmd0aCk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIHJlc3VsdHNbaV0gPSBfLnBsdWNrKGFyZ3MsICIiICsgaSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9OwoKICAvLyBaaXAgdG9nZXRoZXIgdHdvIGFycmF5cyAtLSBhbiBhcnJheSBvZiBrZXlzIGFuZCBhbiBhcnJheSBvZiB2YWx1ZXMgLS0gaW50bwogIC8vIGEgc2luZ2xlIG9iamVjdC4KICBfLnppcE9iamVjdCA9IGZ1bmN0aW9uKGtleXMsIHZhbHVlcykgewogICAgdmFyIHJlc3VsdCA9IHt9OwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICByZXN1bHRba2V5c1tpXV0gPSB2YWx1ZXNbaV07CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIC8vIElmIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcGx5IHVzIHdpdGggaW5kZXhPZiAoSSdtIGxvb2tpbmcgYXQgeW91LCAqKk1TSUUqKiksCiAgLy8gd2UgbmVlZCB0aGlzIGZ1bmN0aW9uLiBSZXR1cm4gdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuCiAgLy8gaXRlbSBpbiBhbiBhcnJheSwgb3IgLTEgaWYgdGhlIGl0ZW0gaXMgbm90IGluY2x1ZGVkIGluIHRoZSBhcnJheS4KICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgaW5kZXhPZmAgaWYgYXZhaWxhYmxlLgogIC8vIElmIHRoZSBhcnJheSBpcyBsYXJnZSBhbmQgYWxyZWFkeSBpbiBzb3J0IG9yZGVyLCBwYXNzIGB0cnVlYAogIC8vIGZvciAqKmlzU29ydGVkKiogdG8gdXNlIGJpbmFyeSBzZWFyY2guCiAgXy5pbmRleE9mID0gZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGlzU29ydGVkKSB7CiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIC0xOwogICAgdmFyIGksIGw7CiAgICBpZiAoaXNTb3J0ZWQpIHsKICAgICAgaSA9IF8uc29ydGVkSW5kZXgoYXJyYXksIGl0ZW0pOwogICAgICByZXR1cm4gYXJyYXlbaV0gPT09IGl0ZW0gPyBpIDogLTE7CiAgICB9CiAgICBpZiAobmF0aXZlSW5kZXhPZiAmJiBhcnJheS5pbmRleE9mID09PSBuYXRpdmVJbmRleE9mKSByZXR1cm4gYXJyYXkuaW5kZXhPZihpdGVtKTsKICAgIGZvciAoaSA9IDAsIGwgPSBhcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIGlmIChhcnJheVtpXSA9PT0gaXRlbSkgcmV0dXJuIGk7CiAgICByZXR1cm4gLTE7CiAgfTsKCiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYGxhc3RJbmRleE9mYCBpZiBhdmFpbGFibGUuCiAgXy5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uKGFycmF5LCBpdGVtKSB7CiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIC0xOwogICAgaWYgKG5hdGl2ZUxhc3RJbmRleE9mICYmIGFycmF5Lmxhc3RJbmRleE9mID09PSBuYXRpdmVMYXN0SW5kZXhPZikgcmV0dXJuIGFycmF5Lmxhc3RJbmRleE9mKGl0ZW0pOwogICAgdmFyIGkgPSBhcnJheS5sZW5ndGg7CiAgICB3aGlsZSAoaS0tKSBpZiAoYXJyYXlbaV0gPT09IGl0ZW0pIHJldHVybiBpOwogICAgcmV0dXJuIC0xOwogIH07CgogIC8vIEdlbmVyYXRlIGFuIGludGVnZXIgQXJyYXkgY29udGFpbmluZyBhbiBhcml0aG1ldGljIHByb2dyZXNzaW9uLiBBIHBvcnQgb2YKICAvLyB0aGUgbmF0aXZlIFB5dGhvbiBgcmFuZ2UoKWAgZnVuY3Rpb24uIFNlZQogIC8vIFt0aGUgUHl0aG9uIGRvY3VtZW50YXRpb25dKGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS9mdW5jdGlvbnMuaHRtbCNyYW5nZSkuCiAgXy5yYW5nZSA9IGZ1bmN0aW9uKHN0YXJ0LCBzdG9wLCBzdGVwKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8PSAxKSB7CiAgICAgIHN0b3AgPSBzdGFydCB8fCAwOwogICAgICBzdGFydCA9IDA7CiAgICB9CiAgICBzdGVwID0gYXJndW1lbnRzWzJdIHx8IDE7CgogICAgdmFyIGxlbiA9IE1hdGgubWF4KE1hdGguY2VpbCgoc3RvcCAtIHN0YXJ0KSAvIHN0ZXApLCAwKTsKICAgIHZhciBpZHggPSAwOwogICAgdmFyIHJhbmdlID0gbmV3IEFycmF5KGxlbik7CgogICAgd2hpbGUoaWR4IDwgbGVuKSB7CiAgICAgIHJhbmdlW2lkeCsrXSA9IHN0YXJ0OwogICAgICBzdGFydCArPSBzdGVwOwogICAgfQoKICAgIHJldHVybiByYW5nZTsKICB9OwoKICAvLyBGdW5jdGlvbiAoYWhlbSkgRnVuY3Rpb25zCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8vIFJldXNhYmxlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGZvciBwcm90b3R5cGUgc2V0dGluZy4KICB2YXIgY3RvciA9IGZ1bmN0aW9uKCl7fTsKCiAgLy8gQ3JlYXRlIGEgZnVuY3Rpb24gYm91bmQgdG8gYSBnaXZlbiBvYmplY3QgKGFzc2lnbmluZyBgdGhpc2AsIGFuZCBhcmd1bWVudHMsCiAgLy8gb3B0aW9uYWxseSkuIEJpbmRpbmcgd2l0aCBhcmd1bWVudHMgaXMgYWxzbyBrbm93biBhcyBgY3VycnlgLgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBGdW5jdGlvbi5iaW5kYCBpZiBhdmFpbGFibGUuCiAgLy8gV2UgY2hlY2sgZm9yIGBmdW5jLmJpbmRgIGZpcnN0LCB0byBmYWlsIGZhc3Qgd2hlbiBgZnVuY2AgaXMgdW5kZWZpbmVkLgogIF8uYmluZCA9IGZ1bmN0aW9uIGJpbmQoZnVuYywgY29udGV4dCkgewogICAgdmFyIGJvdW5kLCBhcmdzOwogICAgaWYgKGZ1bmMuYmluZCA9PT0gbmF0aXZlQmluZCAmJiBuYXRpdmVCaW5kKSByZXR1cm4gbmF0aXZlQmluZC5hcHBseShmdW5jLCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpOwogICAgaWYgKCFfLmlzRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBUeXBlRXJyb3I7CiAgICBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpOwogICAgcmV0dXJuIGJvdW5kID0gZnVuY3Rpb24oKSB7CiAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBib3VuZCkpIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpOwogICAgICBjdG9yLnByb3RvdHlwZSA9IGZ1bmMucHJvdG90eXBlOwogICAgICB2YXIgc2VsZiA9IG5ldyBjdG9yOwogICAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseShzZWxmLCBhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTsKICAgICAgaWYgKE9iamVjdChyZXN1bHQpID09PSByZXN1bHQpIHJldHVybiByZXN1bHQ7CiAgICAgIHJldHVybiBzZWxmOwogICAgfTsKICB9OwoKICAvLyBCaW5kIGFsbCBvZiBhbiBvYmplY3QncyBtZXRob2RzIHRvIHRoYXQgb2JqZWN0LiBVc2VmdWwgZm9yIGVuc3VyaW5nIHRoYXQKICAvLyBhbGwgY2FsbGJhY2tzIGRlZmluZWQgb24gYW4gb2JqZWN0IGJlbG9uZyB0byBpdC4KICBfLmJpbmRBbGwgPSBmdW5jdGlvbihvYmopIHsKICAgIHZhciBmdW5jcyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgIGlmIChmdW5jcy5sZW5ndGggPT0gMCkgZnVuY3MgPSBfLmZ1bmN0aW9ucyhvYmopOwogICAgZWFjaChmdW5jcywgZnVuY3Rpb24oZikgeyBvYmpbZl0gPSBfLmJpbmQob2JqW2ZdLCBvYmopOyB9KTsKICAgIHJldHVybiBvYmo7CiAgfTsKCiAgLy8gTWVtb2l6ZSBhbiBleHBlbnNpdmUgZnVuY3Rpb24gYnkgc3RvcmluZyBpdHMgcmVzdWx0cy4KICBfLm1lbW9pemUgPSBmdW5jdGlvbihmdW5jLCBoYXNoZXIpIHsKICAgIHZhciBtZW1vID0ge307CiAgICBoYXNoZXIgfHwgKGhhc2hlciA9IF8uaWRlbnRpdHkpOwogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICB2YXIga2V5ID0gaGFzaGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIHJldHVybiBfLmhhcyhtZW1vLCBrZXkpID8gbWVtb1trZXldIDogKG1lbW9ba2V5XSA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgICB9OwogIH07CgogIC8vIERlbGF5cyBhIGZ1bmN0aW9uIGZvciB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgYW5kIHRoZW4gY2FsbHMKICAvLyBpdCB3aXRoIHRoZSBhcmd1bWVudHMgc3VwcGxpZWQuCiAgXy5kZWxheSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHsKICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpOwogICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgcmV0dXJuIGZ1bmMuYXBwbHkobnVsbCwgYXJncyk7IH0sIHdhaXQpOwogIH07CgogIC8vIERlZmVycyBhIGZ1bmN0aW9uLCBzY2hlZHVsaW5nIGl0IHRvIHJ1biBhZnRlciB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhcwogIC8vIGNsZWFyZWQuCiAgXy5kZWZlciA9IGZ1bmN0aW9uKGZ1bmMpIHsKICAgIHJldHVybiBfLmRlbGF5LmFwcGx5KF8sIFtmdW5jLCAxXS5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKSk7CiAgfTsKCiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlCiAgLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuCiAgXy50aHJvdHRsZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHsKICAgIHZhciBjb250ZXh0LCBhcmdzLCB0aW1lb3V0LCB0aHJvdHRsaW5nLCBtb3JlLCByZXN1bHQ7CiAgICB2YXIgd2hlbkRvbmUgPSBfLmRlYm91bmNlKGZ1bmN0aW9uKCl7IG1vcmUgPSB0aHJvdHRsaW5nID0gZmFsc2U7IH0sIHdhaXQpOwogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICBjb250ZXh0ID0gdGhpczsgYXJncyA9IGFyZ3VtZW50czsKICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGltZW91dCA9IG51bGw7CiAgICAgICAgaWYgKG1vcmUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7CiAgICAgICAgd2hlbkRvbmUoKTsKICAgICAgfTsKICAgICAgaWYgKCF0aW1lb3V0KSB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7CiAgICAgIGlmICh0aHJvdHRsaW5nKSB7CiAgICAgICAgbW9yZSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3R0bGluZyA9IHRydWU7CiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTsKICAgICAgfQogICAgICB3aGVuRG9uZSgpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfTsKICB9OwoKICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90CiAgLy8gYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvcgogIC8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZQogIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuCiAgXy5kZWJvdW5jZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkgewogICAgdmFyIHRpbWVvdXQ7CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsKICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGltZW91dCA9IG51bGw7CiAgICAgICAgaWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7CiAgICAgIH07CiAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0OwogICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTsKICAgICAgaWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7CiAgICB9OwogIH07CgogIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgYXQgbW9zdCBvbmUgdGltZSwgbm8gbWF0dGVyIGhvdwogIC8vIG9mdGVuIHlvdSBjYWxsIGl0LiBVc2VmdWwgZm9yIGxhenkgaW5pdGlhbGl6YXRpb24uCiAgXy5vbmNlID0gZnVuY3Rpb24oZnVuYykgewogICAgdmFyIHJhbiA9IGZhbHNlLCBtZW1vOwogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICBpZiAocmFuKSByZXR1cm4gbWVtbzsKICAgICAgcmFuID0gdHJ1ZTsKICAgICAgcmV0dXJuIG1lbW8gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH07CgogIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLAogIC8vIGFsbG93aW5nIHlvdSB0byBhZGp1c3QgYXJndW1lbnRzLCBydW4gY29kZSBiZWZvcmUgYW5kIGFmdGVyLCBhbmQKICAvLyBjb25kaXRpb25hbGx5IGV4ZWN1dGUgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLgogIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGFyZ3MgPSBbZnVuY10uY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7CiAgICAgIHJldHVybiB3cmFwcGVyLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgfTsKICB9OwoKICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgYSBsaXN0IG9mIGZ1bmN0aW9ucywgZWFjaAogIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuCiAgXy5jb21wb3NlID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZnVuY3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzOwogICAgICBmb3IgKHZhciBpID0gZnVuY3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICBhcmdzID0gW2Z1bmNzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpXTsKICAgICAgfQogICAgICByZXR1cm4gYXJnc1swXTsKICAgIH07CiAgfTsKCiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIGFmdGVyIGJlaW5nIGNhbGxlZCBOIHRpbWVzLgogIF8uYWZ0ZXIgPSBmdW5jdGlvbih0aW1lcywgZnVuYykgewogICAgaWYgKHRpbWVzIDw9IDApIHJldHVybiBmdW5jKCk7CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgIGlmICgtLXRpbWVzIDwgMSkgewogICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgLy8gT2JqZWN0IEZ1bmN0aW9ucwogIC8vIC0tLS0tLS0tLS0tLS0tLS0KCiAgLy8gUmV0cmlldmUgdGhlIG5hbWVzIG9mIGFuIG9iamVjdCdzIHByb3BlcnRpZXMuCiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYE9iamVjdC5rZXlzYAogIF8ua2V5cyA9IG5hdGl2ZUtleXMgfHwgZnVuY3Rpb24ob2JqKSB7CiAgICBpZiAob2JqICE9PSBPYmplY3Qob2JqKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBvYmplY3QnKTsKICAgIHZhciBrZXlzID0gW107CiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSBpZiAoXy5oYXMob2JqLCBrZXkpKSBrZXlzW2tleXMubGVuZ3RoXSA9IGtleTsKICAgIHJldHVybiBrZXlzOwogIH07CgogIC8vIFJldHJpZXZlIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0J3MgcHJvcGVydGllcy4KICBfLnZhbHVlcyA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIF8ubWFwKG9iaiwgXy5pZGVudGl0eSk7CiAgfTsKCiAgLy8gUmV0dXJuIGEgc29ydGVkIGxpc3Qgb2YgdGhlIGZ1bmN0aW9uIG5hbWVzIGF2YWlsYWJsZSBvbiB0aGUgb2JqZWN0LgogIC8vIEFsaWFzZWQgYXMgYG1ldGhvZHNgCiAgXy5mdW5jdGlvbnMgPSBfLm1ldGhvZHMgPSBmdW5jdGlvbihvYmopIHsKICAgIHZhciBuYW1lcyA9IFtdOwogICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICBpZiAoXy5pc0Z1bmN0aW9uKG9ialtrZXldKSkgbmFtZXMucHVzaChrZXkpOwogICAgfQogICAgcmV0dXJuIG5hbWVzLnNvcnQoKTsKICB9OwoKICAvLyBFeHRlbmQgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIHByb3BlcnRpZXMgaW4gcGFzc2VkLWluIG9iamVjdChzKS4KICBfLmV4dGVuZCA9IGZ1bmN0aW9uKG9iaikgewogICAgZWFjaChzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIGZ1bmN0aW9uKHNvdXJjZSkgewogICAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkgewogICAgICAgIG9ialtwcm9wXSA9IHNvdXJjZVtwcm9wXTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gb2JqOwogIH07CgogIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbmx5IGNvbnRhaW5pbmcgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnRpZXMuCiAgXy5waWNrID0gZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgcmVzdWx0ID0ge307CiAgICBlYWNoKGZsYXR0ZW4oc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCB0cnVlLCBbXSksIGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAoa2V5IGluIG9iaikgcmVzdWx0W2tleV0gPSBvYmpba2V5XTsKICAgIH0pOwogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICAvLyBGaWxsIGluIGEgZ2l2ZW4gb2JqZWN0IHdpdGggZGVmYXVsdCBwcm9wZXJ0aWVzLgogIF8uZGVmYXVsdHMgPSBmdW5jdGlvbihvYmopIHsKICAgIGVhY2goc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCBmdW5jdGlvbihzb3VyY2UpIHsKICAgICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHsKICAgICAgICBpZiAob2JqW3Byb3BdID09IG51bGwpIG9ialtwcm9wXSA9IHNvdXJjZVtwcm9wXTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gb2JqOwogIH07CgogIC8vIENyZWF0ZSBhIChzaGFsbG93LWNsb25lZCkgZHVwbGljYXRlIG9mIGFuIG9iamVjdC4KICBfLmNsb25lID0gZnVuY3Rpb24ob2JqKSB7CiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIG9iajsKICAgIHJldHVybiBfLmlzQXJyYXkob2JqKSA/IG9iai5zbGljZSgpIDogXy5leHRlbmQoe30sIG9iaik7CiAgfTsKCiAgLy8gSW52b2tlcyBpbnRlcmNlcHRvciB3aXRoIHRoZSBvYmosIGFuZCB0aGVuIHJldHVybnMgb2JqLgogIC8vIFRoZSBwcmltYXJ5IHB1cnBvc2Ugb2YgdGhpcyBtZXRob2QgaXMgdG8gInRhcCBpbnRvIiBhIG1ldGhvZCBjaGFpbiwgaW4KICAvLyBvcmRlciB0byBwZXJmb3JtIG9wZXJhdGlvbnMgb24gaW50ZXJtZWRpYXRlIHJlc3VsdHMgd2l0aGluIHRoZSBjaGFpbi4KICBfLnRhcCA9IGZ1bmN0aW9uKG9iaiwgaW50ZXJjZXB0b3IpIHsKICAgIGludGVyY2VwdG9yKG9iaik7CiAgICByZXR1cm4gb2JqOwogIH07CgogIC8vIEludGVybmFsIHJlY3Vyc2l2ZSBjb21wYXJpc29uIGZ1bmN0aW9uIGZvciBgaXNFcXVhbGAuCiAgdmFyIGVxID0gZnVuY3Rpb24oYSwgYiwgc3RhY2spIHsKICAgIC8vIElkZW50aWNhbCBvYmplY3RzIGFyZSBlcXVhbC4gYDAgPT09IC0wYCwgYnV0IHRoZXkgYXJlbid0IGlkZW50aWNhbC4KICAgIC8vIFNlZSB0aGUgSGFybW9ueSBgZWdhbGAgcHJvcG9zYWw6IGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWhhcm1vbnk6ZWdhbC4KICAgIGlmIChhID09PSBiKSByZXR1cm4gYSAhPT0gMCB8fCAxIC8gYSA9PSAxIC8gYjsKICAgIC8vIEEgc3RyaWN0IGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYG51bGwgPT0gdW5kZWZpbmVkYC4KICAgIGlmIChhID09IG51bGwgfHwgYiA9PSBudWxsKSByZXR1cm4gYSA9PT0gYjsKICAgIC8vIFVud3JhcCBhbnkgd3JhcHBlZCBvYmplY3RzLgogICAgaWYgKGEuX2NoYWluKSBhID0gYS5fd3JhcHBlZDsKICAgIGlmIChiLl9jaGFpbikgYiA9IGIuX3dyYXBwZWQ7CiAgICAvLyBJbnZva2UgYSBjdXN0b20gYGlzRXF1YWxgIG1ldGhvZCBpZiBvbmUgaXMgcHJvdmlkZWQuCiAgICBpZiAoYS5pc0VxdWFsICYmIF8uaXNGdW5jdGlvbihhLmlzRXF1YWwpKSByZXR1cm4gYS5pc0VxdWFsKGIpOwogICAgaWYgKGIuaXNFcXVhbCAmJiBfLmlzRnVuY3Rpb24oYi5pc0VxdWFsKSkgcmV0dXJuIGIuaXNFcXVhbChhKTsKICAgIC8vIENvbXBhcmUgYFtbQ2xhc3NdXWAgbmFtZXMuCiAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbChhKTsKICAgIGlmIChjbGFzc05hbWUgIT0gdG9TdHJpbmcuY2FsbChiKSkgcmV0dXJuIGZhbHNlOwogICAgc3dpdGNoIChjbGFzc05hbWUpIHsKICAgICAgLy8gU3RyaW5ncywgbnVtYmVycywgZGF0ZXMsIGFuZCBib29sZWFucyBhcmUgY29tcGFyZWQgYnkgdmFsdWUuCiAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6CiAgICAgICAgLy8gUHJpbWl0aXZlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBvYmplY3Qgd3JhcHBlcnMgYXJlIGVxdWl2YWxlbnQ7IHRodXMsIGAiNSJgIGlzCiAgICAgICAgLy8gZXF1aXZhbGVudCB0byBgbmV3IFN0cmluZygiNSIpYC4KICAgICAgICByZXR1cm4gYSA9PSBTdHJpbmcoYik7CiAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6CiAgICAgICAgLy8gYE5hTmBzIGFyZSBlcXVpdmFsZW50LCBidXQgbm9uLXJlZmxleGl2ZS4gQW4gYGVnYWxgIGNvbXBhcmlzb24gaXMgcGVyZm9ybWVkIGZvcgogICAgICAgIC8vIG90aGVyIG51bWVyaWMgdmFsdWVzLgogICAgICAgIHJldHVybiBhICE9ICthID8gYiAhPSArYiA6IChhID09IDAgPyAxIC8gYSA9PSAxIC8gYiA6IGEgPT0gK2IpOwogICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzoKICAgICAgY2FzZSAnW29iamVjdCBCb29sZWFuXSc6CiAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1lcmljIHByaW1pdGl2ZSB2YWx1ZXMuIERhdGVzIGFyZSBjb21wYXJlZCBieSB0aGVpcgogICAgICAgIC8vIG1pbGxpc2Vjb25kIHJlcHJlc2VudGF0aW9ucy4gTm90ZSB0aGF0IGludmFsaWQgZGF0ZXMgd2l0aCBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMKICAgICAgICAvLyBvZiBgTmFOYCBhcmUgbm90IGVxdWl2YWxlbnQuCiAgICAgICAgcmV0dXJuICthID09ICtiOwogICAgICAvLyBSZWdFeHBzIGFyZSBjb21wYXJlZCBieSB0aGVpciBzb3VyY2UgcGF0dGVybnMgYW5kIGZsYWdzLgogICAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOgogICAgICAgIHJldHVybiBhLnNvdXJjZSA9PSBiLnNvdXJjZSAmJgogICAgICAgICAgICAgICBhLmdsb2JhbCA9PSBiLmdsb2JhbCAmJgogICAgICAgICAgICAgICBhLm11bHRpbGluZSA9PSBiLm11bHRpbGluZSAmJgogICAgICAgICAgICAgICBhLmlnbm9yZUNhc2UgPT0gYi5pZ25vcmVDYXNlOwogICAgfQogICAgaWYgKHR5cGVvZiBhICE9ICdvYmplY3QnIHx8IHR5cGVvZiBiICE9ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7CiAgICAvLyBBc3N1bWUgZXF1YWxpdHkgZm9yIGN5Y2xpYyBzdHJ1Y3R1cmVzLiBUaGUgYWxnb3JpdGhtIGZvciBkZXRlY3RpbmcgY3ljbGljCiAgICAvLyBzdHJ1Y3R1cmVzIGlzIGFkYXB0ZWQgZnJvbSBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zLCBhYnN0cmFjdCBvcGVyYXRpb24gYEpPYC4KICAgIHZhciBsZW5ndGggPSBzdGFjay5sZW5ndGg7CiAgICB3aGlsZSAobGVuZ3RoLS0pIHsKICAgICAgLy8gTGluZWFyIHNlYXJjaC4gUGVyZm9ybWFuY2UgaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mCiAgICAgIC8vIHVuaXF1ZSBuZXN0ZWQgc3RydWN0dXJlcy4KICAgICAgaWYgKHN0YWNrW2xlbmd0aF0gPT0gYSkgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuCiAgICBzdGFjay5wdXNoKGEpOwogICAgdmFyIHNpemUgPSAwLCByZXN1bHQgPSB0cnVlOwogICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIGFuZCBhcnJheXMuCiAgICBpZiAoY2xhc3NOYW1lID09ICdbb2JqZWN0IEFycmF5XScpIHsKICAgICAgLy8gQ29tcGFyZSBhcnJheSBsZW5ndGhzIHRvIGRldGVybWluZSBpZiBhIGRlZXAgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnkuCiAgICAgIHNpemUgPSBhLmxlbmd0aDsKICAgICAgcmVzdWx0ID0gc2l6ZSA9PSBiLmxlbmd0aDsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIC8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuCiAgICAgICAgd2hpbGUgKHNpemUtLSkgewogICAgICAgICAgLy8gRW5zdXJlIGNvbW11dGF0aXZlIGVxdWFsaXR5IGZvciBzcGFyc2UgYXJyYXlzLgogICAgICAgICAgaWYgKCEocmVzdWx0ID0gc2l6ZSBpbiBhID09IHNpemUgaW4gYiAmJiBlcShhW3NpemVdLCBiW3NpemVdLCBzdGFjaykpKSBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIE9iamVjdHMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1aXZhbGVudC4KICAgICAgaWYgKCdjb25zdHJ1Y3RvcicgaW4gYSAhPSAnY29uc3RydWN0b3InIGluIGIgfHwgYS5jb25zdHJ1Y3RvciAhPSBiLmNvbnN0cnVjdG9yKSByZXR1cm4gZmFsc2U7CiAgICAgIC8vIERlZXAgY29tcGFyZSBvYmplY3RzLgogICAgICBmb3IgKHZhciBrZXkgaW4gYSkgewogICAgICAgIGlmIChfLmhhcyhhLCBrZXkpKSB7CiAgICAgICAgICAvLyBDb3VudCB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHByb3BlcnRpZXMuCiAgICAgICAgICBzaXplKys7CiAgICAgICAgICAvLyBEZWVwIGNvbXBhcmUgZWFjaCBtZW1iZXIuCiAgICAgICAgICBpZiAoIShyZXN1bHQgPSBfLmhhcyhiLCBrZXkpICYmIGVxKGFba2V5XSwgYltrZXldLCBzdGFjaykpKSBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gRW5zdXJlIHRoYXQgYm90aCBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXMuCiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICBmb3IgKGtleSBpbiBiKSB7CiAgICAgICAgICBpZiAoXy5oYXMoYiwga2V5KSAmJiAhKHNpemUtLSkpIGJyZWFrOwogICAgICAgIH0KICAgICAgICByZXN1bHQgPSAhc2l6ZTsKICAgICAgfQogICAgfQogICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBvYmplY3QgZnJvbSB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuCiAgICBzdGFjay5wb3AoKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgLy8gUGVyZm9ybSBhIGRlZXAgY29tcGFyaXNvbiB0byBjaGVjayBpZiB0d28gb2JqZWN0cyBhcmUgZXF1YWwuCiAgXy5pc0VxdWFsID0gZnVuY3Rpb24oYSwgYikgewogICAgcmV0dXJuIGVxKGEsIGIsIFtdKTsKICB9OwoKICAvLyBJcyBhIGdpdmVuIGFycmF5LCBzdHJpbmcsIG9yIG9iamVjdCBlbXB0eT8KICAvLyBBbiAiZW1wdHkiIG9iamVjdCBoYXMgbm8gZW51bWVyYWJsZSBvd24tcHJvcGVydGllcy4KICBfLmlzRW1wdHkgPSBmdW5jdGlvbihvYmopIHsKICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHRydWU7CiAgICBpZiAoXy5pc0FycmF5KG9iaikgfHwgXy5pc1N0cmluZyhvYmopKSByZXR1cm4gb2JqLmxlbmd0aCA9PT0gMDsKICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChfLmhhcyhvYmosIGtleSkpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiB0cnVlOwogIH07CgogIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBET00gZWxlbWVudD8KICBfLmlzRWxlbWVudCA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuICEhKG9iaiAmJiBvYmoubm9kZVR5cGUgPT0gMSk7CiAgfTsKCiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhbiBhcnJheT8KICAvLyBEZWxlZ2F0ZXMgdG8gRUNNQTUncyBuYXRpdmUgQXJyYXkuaXNBcnJheQogIF8uaXNBcnJheSA9IG5hdGl2ZUlzQXJyYXkgfHwgZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09ICdbb2JqZWN0IEFycmF5XSc7CiAgfTsKCiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/CiAgXy5pc09iamVjdCA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIG9iaiA9PT0gT2JqZWN0KG9iaik7CiAgfTsKCiAgLy8gQWRkIHNvbWUgaXNUeXBlIG1ldGhvZHM6IGlzQXJndW1lbnRzLCBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNOdW1iZXIsIGlzRGF0ZSwgaXNSZWdFeHAuCiAgZWFjaChbJ0FyZ3VtZW50cycsICdGdW5jdGlvbicsICdTdHJpbmcnLCAnTnVtYmVyJywgJ0RhdGUnLCAnUmVnRXhwJ10sIGZ1bmN0aW9uKG5hbWUpIHsKICAgIF9bJ2lzJyArIG5hbWVdID0gZnVuY3Rpb24ob2JqKSB7CiAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT0gJ1tvYmplY3QgJyArIG5hbWUgKyAnXSc7CiAgICB9OwogIH0pOwoKICAvLyBEZWZpbmUgYSBmYWxsYmFjayB2ZXJzaW9uIG9mIHRoZSBtZXRob2QgaW4gYnJvd3NlcnMgKGFoZW0sIElFKSwgd2hlcmUKICAvLyB0aGVyZSBpc24ndCBhbnkgaW5zcGVjdGFibGUgIkFyZ3VtZW50cyIgdHlwZS4KICBpZiAoIV8uaXNBcmd1bWVudHMoYXJndW1lbnRzKSkgewogICAgXy5pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKG9iaikgewogICAgICByZXR1cm4gISEob2JqICYmIF8uaGFzKG9iaiwgJ2NhbGxlZScpKTsKICAgIH07CiAgfQoKICAvLyBJcyBhIGdpdmVuIG9iamVjdCBhIGZpbml0ZSBudW1iZXI/CiAgXy5pc0Zpbml0ZSA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIF8uaXNOdW1iZXIob2JqKSAmJiBpc0Zpbml0ZShvYmopOwogIH07CgogIC8vIElzIHRoZSBnaXZlbiB2YWx1ZSBgTmFOYD8KICBfLmlzTmFOID0gZnVuY3Rpb24ob2JqKSB7CiAgICAvLyBgTmFOYCBpcyB0aGUgb25seSB2YWx1ZSBmb3Igd2hpY2ggYD09PWAgaXMgbm90IHJlZmxleGl2ZS4KICAgIHJldHVybiBvYmogIT09IG9iajsKICB9OwoKICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgYm9vbGVhbj8KICBfLmlzQm9vbGVhbiA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIG9iaiA9PT0gdHJ1ZSB8fCBvYmogPT09IGZhbHNlIHx8IHRvU3RyaW5nLmNhbGwob2JqKSA9PSAnW29iamVjdCBCb29sZWFuXSc7CiAgfTsKCiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBlcXVhbCB0byBudWxsPwogIF8uaXNOdWxsID0gZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gb2JqID09PSBudWxsOwogIH07CgogIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgdW5kZWZpbmVkPwogIF8uaXNVbmRlZmluZWQgPSBmdW5jdGlvbihvYmopIHsKICAgIHJldHVybiBvYmogPT09IHZvaWQgMDsKICB9OwoKICAvLyBTaG9ydGN1dCBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHByb3BlcnR5IGRpcmVjdGx5CiAgLy8gb24gaXRzZWxmIChpbiBvdGhlciB3b3Jkcywgbm90IG9uIGEgcHJvdG90eXBlKS4KICBfLmhhcyA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7CiAgICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7CiAgfTsKCiAgLy8gVXRpbGl0eSBGdW5jdGlvbnMKICAvLyAtLS0tLS0tLS0tLS0tLS0tLQoKICAvLyBSdW4gVW5kZXJzY29yZS5qcyBpbiAqbm9Db25mbGljdCogbW9kZSwgcmV0dXJuaW5nIHRoZSBgX2AgdmFyaWFibGUgdG8gaXRzCiAgLy8gcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LgogIF8ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkgewogICAgcm9vdC5fID0gcHJldmlvdXNVbmRlcnNjb3JlOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgLy8gS2VlcCB0aGUgaWRlbnRpdHkgZnVuY3Rpb24gYXJvdW5kIGZvciBkZWZhdWx0IGl0ZXJhdG9ycy4KICBfLmlkZW50aXR5ID0gZnVuY3Rpb24odmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZTsKICB9OwoKICAvLyBSdW4gYSBmdW5jdGlvbiAqKm4qKiB0aW1lcy4KICBfLnRpbWVzID0gZnVuY3Rpb24obiwgaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSBpdGVyYXRvci5jYWxsKGNvbnRleHQsIGkpOwogIH07CgogIC8vIExpc3Qgb2YgSFRNTCBlbnRpdGllcyBmb3IgZXNjYXBpbmcuCiAgdmFyIGh0bWxFc2NhcGVzID0gewogICAgJyYnOiAnJmFtcDsnLAogICAgJzwnOiAnJmx0OycsCiAgICAnPic6ICcmZ3Q7JywKICAgICciJzogJyZxdW90OycsCiAgICAiJyI6ICcmI3gyNzsnLAogICAgJy8nOiAnJiN4MkY7JwogIH07CgogIC8vIFJlZ2V4IGNvbnRhaW5pbmcgdGhlIGtleXMgbGlzdGVkIGltbWVkaWF0ZWx5IGFib3ZlLgogIHZhciBodG1sRXNjYXBlciA9IC9bJjw+IidcL10vZzsKCiAgLy8gRXNjYXBlIGEgc3RyaW5nIGZvciBIVE1MIGludGVycG9sYXRpb24uCiAgXy5lc2NhcGUgPSBmdW5jdGlvbihzdHJpbmcpIHsKICAgIHJldHVybiAoJycgKyBzdHJpbmcpLnJlcGxhY2UoaHRtbEVzY2FwZXIsIGZ1bmN0aW9uKG1hdGNoKSB7CiAgICAgIHJldHVybiBodG1sRXNjYXBlc1ttYXRjaF07CiAgICB9KTsKICB9OwoKICAvLyBJZiB0aGUgdmFsdWUgb2YgdGhlIG5hbWVkIHByb3BlcnR5IGlzIGEgZnVuY3Rpb24gdGhlbiBpbnZva2UgaXQ7CiAgLy8gb3RoZXJ3aXNlLCByZXR1cm4gaXQuCiAgXy5yZXN1bHQgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7CiAgICBpZiAob2JqZWN0ID09IG51bGwpIHJldHVybiBudWxsOwogICAgdmFyIHZhbHVlID0gb2JqZWN0W3Byb3BlcnR5XTsKICAgIHJldHVybiBfLmlzRnVuY3Rpb24odmFsdWUpID8gdmFsdWUuY2FsbChvYmplY3QpIDogdmFsdWU7CiAgfTsKCiAgLy8gQWRkIHlvdXIgb3duIGN1c3RvbSBmdW5jdGlvbnMgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LCBlbnN1cmluZyB0aGF0CiAgLy8gdGhleSdyZSBjb3JyZWN0bHkgYWRkZWQgdG8gdGhlIE9PUCB3cmFwcGVyIGFzIHdlbGwuCiAgXy5taXhpbiA9IGZ1bmN0aW9uKG9iaikgewogICAgZWFjaChfLmZ1bmN0aW9ucyhvYmopLCBmdW5jdGlvbihuYW1lKXsKICAgICAgYWRkVG9XcmFwcGVyKG5hbWUsIF9bbmFtZV0gPSBvYmpbbmFtZV0pOwogICAgfSk7CiAgfTsKCiAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgaW50ZWdlciBpZCAodW5pcXVlIHdpdGhpbiB0aGUgZW50aXJlIGNsaWVudCBzZXNzaW9uKS4KICAvLyBVc2VmdWwgZm9yIHRlbXBvcmFyeSBET00gaWRzLgogIHZhciBpZENvdW50ZXIgPSAwOwogIF8udW5pcXVlSWQgPSBmdW5jdGlvbihwcmVmaXgpIHsKICAgIHZhciBpZCA9IGlkQ291bnRlcisrOwogICAgcmV0dXJuIHByZWZpeCA/IHByZWZpeCArIGlkIDogaWQ7CiAgfTsKCiAgLy8gQnkgZGVmYXVsdCwgVW5kZXJzY29yZSB1c2VzIEVSQi1zdHlsZSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLCBjaGFuZ2UgdGhlCiAgLy8gZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZSBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLgogIF8udGVtcGxhdGVTZXR0aW5ncyA9IHsKICAgIGV2YWx1YXRlICAgIDogLzwlKFtcc1xTXSs/KSU+L2csCiAgICBpbnRlcnBvbGF0ZSA6IC88JT0oW1xzXFNdKz8pJT4vZywKICAgIGVzY2FwZSAgICAgIDogLzwlLShbXHNcU10rPyklPi9nCiAgfTsKCiAgLy8gV2hlbiBjdXN0b21pemluZyBgdGVtcGxhdGVTZXR0aW5nc2AsIGlmIHlvdSBkb24ndCB3YW50IHRvIGRlZmluZSBhbgogIC8vIGludGVycG9sYXRpb24sIGV2YWx1YXRpb24gb3IgZXNjYXBpbmcgcmVnZXgsIHdlIG5lZWQgb25lIHRoYXQgaXMKICAvLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC4KICB2YXIgbm9NYXRjaCA9IC8uXi87CgogIC8vIENlcnRhaW4gY2hhcmFjdGVycyBuZWVkIHRvIGJlIGVzY2FwZWQgc28gdGhhdCB0aGV5IGNhbiBiZSBwdXQgaW50byBhCiAgLy8gc3RyaW5nIGxpdGVyYWwuCiAgdmFyIGVzY2FwZXMgPSB7CiAgICAnXFwnOiAgICdcXCcsCiAgICAiJyI6ICAgICInIiwKICAgIHI6ICAgICAgJ1xyJywKICAgIG46ICAgICAgJ1xuJywKICAgIHQ6ICAgICAgJ1x0JywKICAgIHUyMDI4OiAgJ1x1MjAyOCcsCiAgICB1MjAyOTogICdcdTIwMjknCiAgfTsKCiAgZm9yICh2YXIga2V5IGluIGVzY2FwZXMpIGVzY2FwZXNbZXNjYXBlc1trZXldXSA9IGtleTsKICB2YXIgZXNjYXBlciA9IC9cXHwnfFxyfFxufFx0fFx1MjAyOHxcdTIwMjkvZzsKICB2YXIgdW5lc2NhcGVyID0gL1xcKFxcfCd8cnxufHR8dTIwMjh8dTIwMjkpL2c7CgogIC8vIFdpdGhpbiBhbiBpbnRlcnBvbGF0aW9uLCBldmFsdWF0aW9uLCBvciBlc2NhcGluZywgcmVtb3ZlIEhUTUwgZXNjYXBpbmcKICAvLyB0aGF0IGhhZCBiZWVuIHByZXZpb3VzbHkgYWRkZWQuCiAgdmFyIHVuZXNjYXBlID0gZnVuY3Rpb24oY29kZSkgewogICAgcmV0dXJuIGNvZGUucmVwbGFjZSh1bmVzY2FwZXIsIGZ1bmN0aW9uKG1hdGNoLCBlc2NhcGUpIHsKICAgICAgcmV0dXJuIGVzY2FwZXNbZXNjYXBlXTsKICAgIH0pOwogIH07CgogIC8vIEphdmFTY3JpcHQgbWljcm8tdGVtcGxhdGluZywgc2ltaWxhciB0byBKb2huIFJlc2lnJ3MgaW1wbGVtZW50YXRpb24uCiAgLy8gVW5kZXJzY29yZSB0ZW1wbGF0aW5nIGhhbmRsZXMgYXJiaXRyYXJ5IGRlbGltaXRlcnMsIHByZXNlcnZlcyB3aGl0ZXNwYWNlLAogIC8vIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLgogIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBkYXRhLCBzZXR0aW5ncykgewogICAgc2V0dGluZ3MgPSBfLmRlZmF1bHRzKHNldHRpbmdzIHx8IHt9LCBfLnRlbXBsYXRlU2V0dGluZ3MpOwoKICAgIC8vIENvbXBpbGUgdGhlIHRlbXBsYXRlIHNvdXJjZSwgdGFraW5nIGNhcmUgdG8gZXNjYXBlIGNoYXJhY3RlcnMgdGhhdAogICAgLy8gY2Fubm90IGJlIGluY2x1ZGVkIGluIGEgc3RyaW5nIGxpdGVyYWwgYW5kIHRoZW4gdW5lc2NhcGUgdGhlbSBpbiBjb2RlCiAgICAvLyBibG9ja3MuCiAgICB2YXIgc291cmNlID0gIl9fcCs9JyIgKyB0ZXh0CiAgICAgIC5yZXBsYWNlKGVzY2FwZXIsIGZ1bmN0aW9uKG1hdGNoKSB7CiAgICAgICAgcmV0dXJuICdcXCcgKyBlc2NhcGVzW21hdGNoXTsKICAgICAgfSkKICAgICAgLnJlcGxhY2Uoc2V0dGluZ3MuZXNjYXBlIHx8IG5vTWF0Y2gsIGZ1bmN0aW9uKG1hdGNoLCBjb2RlKSB7CiAgICAgICAgcmV0dXJuICInK1xuKChfX3Q9KCIgKyB1bmVzY2FwZShjb2RlKSArICIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcbiciOwogICAgICB9KQogICAgICAucmVwbGFjZShzZXR0aW5ncy5pbnRlcnBvbGF0ZSB8fCBub01hdGNoLCBmdW5jdGlvbihtYXRjaCwgY29kZSkgewogICAgICAgIHJldHVybiAiJytcbigoX190PSgiICsgdW5lc2NhcGUoY29kZSkgKyAiKSk9PW51bGw/Jyc6X190KStcbiciOwogICAgICB9KQogICAgICAucmVwbGFjZShzZXR0aW5ncy5ldmFsdWF0ZSB8fCBub01hdGNoLCBmdW5jdGlvbihtYXRjaCwgY29kZSkgewogICAgICAgIHJldHVybiAiJztcbiIgKyB1bmVzY2FwZShjb2RlKSArICJcbl9fcCs9JyI7CiAgICAgIH0pICsgIic7XG4iOwoKICAgIC8vIElmIGEgdmFyaWFibGUgaXMgbm90IHNwZWNpZmllZCwgcGxhY2UgZGF0YSB2YWx1ZXMgaW4gbG9jYWwgc2NvcGUuCiAgICBpZiAoIXNldHRpbmdzLnZhcmlhYmxlKSBzb3VyY2UgPSAnd2l0aChvYmp8fHt9KXtcbicgKyBzb3VyY2UgKyAnfVxuJzsKCiAgICBzb3VyY2UgPSAidmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLCIgKwogICAgICAicHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyl9O1xuIiArCiAgICAgIHNvdXJjZSArICJyZXR1cm4gX19wO1xuIjsKCiAgICB2YXIgcmVuZGVyID0gbmV3IEZ1bmN0aW9uKHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonLCAnXycsIHNvdXJjZSk7CiAgICBpZiAoZGF0YSkgcmV0dXJuIHJlbmRlcihkYXRhLCBfKTsKICAgIHZhciB0ZW1wbGF0ZSA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pOwogICAgfTsKCiAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBmdW5jdGlvbiBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgcHJlY29tcGlsYXRpb24uCiAgICB0ZW1wbGF0ZS5zb3VyY2UgPSAnZnVuY3Rpb24oJyArIChzZXR0aW5ncy52YXJpYWJsZSB8fCAnb2JqJykgKyAnKXtcbicgKyBzb3VyY2UgKyAnfSc7CgogICAgcmV0dXJuIHRlbXBsYXRlOwogIH07CgogIC8vIEFkZCBhICJjaGFpbiIgZnVuY3Rpb24sIHdoaWNoIHdpbGwgZGVsZWdhdGUgdG8gdGhlIHdyYXBwZXIuCiAgXy5jaGFpbiA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIF8ob2JqKS5jaGFpbigpOwogIH07CgogIC8vIFRoZSBPT1AgV3JhcHBlcgogIC8vIC0tLS0tLS0tLS0tLS0tLQoKICAvLyBJZiBVbmRlcnNjb3JlIGlzIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLCBpdCByZXR1cm5zIGEgd3JhcHBlZCBvYmplY3QgdGhhdAogIC8vIGNhbiBiZSB1c2VkIE9PLXN0eWxlLiBUaGlzIHdyYXBwZXIgaG9sZHMgYWx0ZXJlZCB2ZXJzaW9ucyBvZiBhbGwgdGhlCiAgLy8gdW5kZXJzY29yZSBmdW5jdGlvbnMuIFdyYXBwZWQgb2JqZWN0cyBtYXkgYmUgY2hhaW5lZC4KICB2YXIgd3JhcHBlciA9IGZ1bmN0aW9uKG9iaikgeyB0aGlzLl93cmFwcGVkID0gb2JqOyB9OwoKICAvLyBFeHBvc2UgYHdyYXBwZXIucHJvdG90eXBlYCBhcyBgXy5wcm90b3R5cGVgCiAgXy5wcm90b3R5cGUgPSB3cmFwcGVyLnByb3RvdHlwZTsKCiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnRpbnVlIGNoYWluaW5nIGludGVybWVkaWF0ZSByZXN1bHRzLgogIHZhciByZXN1bHQgPSBmdW5jdGlvbihvYmosIGNoYWluKSB7CiAgICByZXR1cm4gY2hhaW4gPyBfKG9iaikuY2hhaW4oKSA6IG9iajsKICB9OwoKICAvLyBBIG1ldGhvZCB0byBlYXNpbHkgYWRkIGZ1bmN0aW9ucyB0byB0aGUgT09QIHdyYXBwZXIuCiAgdmFyIGFkZFRvV3JhcHBlciA9IGZ1bmN0aW9uKG5hbWUsIGZ1bmMpIHsKICAgIHdyYXBwZXIucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgICB1bnNoaWZ0LmNhbGwoYXJncywgdGhpcy5fd3JhcHBlZCk7CiAgICAgIHJldHVybiByZXN1bHQoZnVuYy5hcHBseShfLCBhcmdzKSwgdGhpcy5fY2hhaW4pOwogICAgfTsKICB9OwoKICAvLyBBZGQgYWxsIG9mIHRoZSBVbmRlcnNjb3JlIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlciBvYmplY3QuCiAgXy5taXhpbihfKTsKCiAgLy8gQWRkIGFsbCBtdXRhdG9yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci4KICBlYWNoKFsncG9wJywgJ3B1c2gnLCAncmV2ZXJzZScsICdzaGlmdCcsICdzb3J0JywgJ3NwbGljZScsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG5hbWUpIHsKICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdOwogICAgd3JhcHBlci5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIG9iaiA9IHRoaXMuX3dyYXBwZWQ7CiAgICAgIG1ldGhvZC5hcHBseShvYmosIGFyZ3VtZW50cyk7CiAgICAgIGlmICgobmFtZSA9PSAnc2hpZnQnIHx8IG5hbWUgPT0gJ3NwbGljZScpICYmIG9iai5sZW5ndGggPT09IDApIGRlbGV0ZSBvYmpbMF07CiAgICAgIHJldHVybiByZXN1bHQob2JqLCB0aGlzLl9jaGFpbik7CiAgICB9OwogIH0pOwoKICAvLyBBZGQgYWxsIGFjY2Vzc29yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci4KICBlYWNoKFsnY29uY2F0JywgJ2pvaW4nLCAnc2xpY2UnXSwgZnVuY3Rpb24obmFtZSkgewogICAgdmFyIG1ldGhvZCA9IEFycmF5UHJvdG9bbmFtZV07CiAgICB3cmFwcGVyLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gcmVzdWx0KG1ldGhvZC5hcHBseSh0aGlzLl93cmFwcGVkLCBhcmd1bWVudHMpLCB0aGlzLl9jaGFpbik7CiAgICB9OwogIH0pOwoKICAvLyBTdGFydCBjaGFpbmluZyBhIHdyYXBwZWQgVW5kZXJzY29yZSBvYmplY3QuCiAgd3JhcHBlci5wcm90b3R5cGUuY2hhaW4gPSBmdW5jdGlvbigpIHsKICAgIHRoaXMuX2NoYWluID0gdHJ1ZTsKICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIEV4dHJhY3RzIHRoZSByZXN1bHQgZnJvbSBhIHdyYXBwZWQgYW5kIGNoYWluZWQgb2JqZWN0LgogIHdyYXBwZXIucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5fd3JhcHBlZDsKICB9OwoKfSkuY2FsbCh0aGlzKTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7CiAgLyoKICAgKiBHZW5lcmF0ZWQgYnkgUEVHLmpzIDAuNy4wLgogICAqCiAgICogaHR0cDovL3BlZ2pzLm1hamRhLmN6LwogICAqLwogIAogIGZ1bmN0aW9uIHF1b3RlKHMpIHsKICAgIC8qCiAgICAgKiBFQ01BLTI2MiwgNXRoIGVkLiwgNy44LjQ6IEFsbCBjaGFyYWN0ZXJzIG1heSBhcHBlYXIgbGl0ZXJhbGx5IGluIGEKICAgICAqIHN0cmluZyBsaXRlcmFsIGV4Y2VwdCBmb3IgdGhlIGNsb3NpbmcgcXVvdGUgY2hhcmFjdGVyLCBiYWNrc2xhc2gsCiAgICAgKiBjYXJyaWFnZSByZXR1cm4sIGxpbmUgc2VwYXJhdG9yLCBwYXJhZ3JhcGggc2VwYXJhdG9yLCBhbmQgbGluZSBmZWVkLgogICAgICogQW55IGNoYXJhY3RlciBtYXkgYXBwZWFyIGluIHRoZSBmb3JtIG9mIGFuIGVzY2FwZSBzZXF1ZW5jZS4KICAgICAqCiAgICAgKiBGb3IgcG9ydGFiaWxpdHksIHdlIGFsc28gZXNjYXBlIGVzY2FwZSBhbGwgY29udHJvbCBhbmQgbm9uLUFTQ0lJCiAgICAgKiBjaGFyYWN0ZXJzLiBOb3RlIHRoYXQgIlwwIiBhbmQgIlx2IiBlc2NhcGUgc2VxdWVuY2VzIGFyZSBub3QgdXNlZAogICAgICogYmVjYXVzZSBKU0hpbnQgZG9lcyBub3QgbGlrZSB0aGUgZmlyc3QgYW5kIElFIHRoZSBzZWNvbmQuCiAgICAgKi8KICAgICByZXR1cm4gJyInICsgcwogICAgICAucmVwbGFjZSgvXFwvZywgJ1xcXFwnKSAgLy8gYmFja3NsYXNoCiAgICAgIC5yZXBsYWNlKC8iL2csICdcXCInKSAgICAvLyBjbG9zaW5nIHF1b3RlIGNoYXJhY3RlcgogICAgICAucmVwbGFjZSgvXHgwOC9nLCAnXFxiJykgLy8gYmFja3NwYWNlCiAgICAgIC5yZXBsYWNlKC9cdC9nLCAnXFx0JykgICAvLyBob3Jpem9udGFsIHRhYgogICAgICAucmVwbGFjZSgvXG4vZywgJ1xcbicpICAgLy8gbGluZSBmZWVkCiAgICAgIC5yZXBsYWNlKC9cZi9nLCAnXFxmJykgICAvLyBmb3JtIGZlZWQKICAgICAgLnJlcGxhY2UoL1xyL2csICdcXHInKSAgIC8vIGNhcnJpYWdlIHJldHVybgogICAgICAucmVwbGFjZSgvW1x4MDAtXHgwN1x4MEJceDBFLVx4MUZceDgwLVx1RkZGRl0vZywgZXNjYXBlKQogICAgICArICciJzsKICB9CiAgCiAgdmFyIHJlc3VsdCA9IHsKICAgIC8qCiAgICAgKiBQYXJzZXMgdGhlIGlucHV0IHdpdGggYSBnZW5lcmF0ZWQgcGFyc2VyLiBJZiB0aGUgcGFyc2luZyBpcyBzdWNjZXNzZnVsbCwKICAgICAqIHJldHVybnMgYSB2YWx1ZSBleHBsaWNpdGx5IG9yIGltcGxpY2l0bHkgc3BlY2lmaWVkIGJ5IHRoZSBncmFtbWFyIGZyb20KICAgICAqIHdoaWNoIHRoZSBwYXJzZXIgd2FzIGdlbmVyYXRlZCAoc2VlIHxQRUcuYnVpbGRQYXJzZXJ8KS4gSWYgdGhlIHBhcnNpbmcgaXMKICAgICAqIHVuc3VjY2Vzc2Z1bCwgdGhyb3dzIHxQRUcucGFyc2VyLlN5bnRheEVycm9yfCBkZXNjcmliaW5nIHRoZSBlcnJvci4KICAgICAqLwogICAgcGFyc2U6IGZ1bmN0aW9uKGlucHV0LCBzdGFydFJ1bGUpIHsKICAgICAgdmFyIHBhcnNlRnVuY3Rpb25zID0gewogICAgICAgICJzdGFydCI6IHBhcnNlX3N0YXJ0LAogICAgICAgICJsaW5lIjogcGFyc2VfbGluZSwKICAgICAgICAiTGluZVRlcm1pbmF0b3IiOiBwYXJzZV9MaW5lVGVybWluYXRvciwKICAgICAgICAiY29tbWVudCI6IHBhcnNlX2NvbW1lbnQsCiAgICAgICAgImNvbm5lY3Rpb24iOiBwYXJzZV9jb25uZWN0aW9uLAogICAgICAgICJicmlkZ2UiOiBwYXJzZV9icmlkZ2UsCiAgICAgICAgImxlZnRsZXQiOiBwYXJzZV9sZWZ0bGV0LAogICAgICAgICJpaXAiOiBwYXJzZV9paXAsCiAgICAgICAgInJpZ2h0bGV0IjogcGFyc2VfcmlnaHRsZXQsCiAgICAgICAgIm5vZGUiOiBwYXJzZV9ub2RlLAogICAgICAgICJjb21wb25lbnQiOiBwYXJzZV9jb21wb25lbnQsCiAgICAgICAgImNvbXBNZXRhIjogcGFyc2VfY29tcE1ldGEsCiAgICAgICAgInBvcnQiOiBwYXJzZV9wb3J0LAogICAgICAgICJhbnljaGFyIjogcGFyc2VfYW55Y2hhciwKICAgICAgICAiaWlwY2hhciI6IHBhcnNlX2lpcGNoYXIsCiAgICAgICAgIl8iOiBwYXJzZV9fLAogICAgICAgICJfXyI6IHBhcnNlX19fCiAgICAgIH07CiAgICAgIAogICAgICBpZiAoc3RhcnRSdWxlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBpZiAocGFyc2VGdW5jdGlvbnNbc3RhcnRSdWxlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcnVsZSBuYW1lOiAiICsgcXVvdGUoc3RhcnRSdWxlKSArICIuIik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHN0YXJ0UnVsZSA9ICJzdGFydCI7CiAgICAgIH0KICAgICAgCiAgICAgIHZhciBwb3MgPSAwOwogICAgICB2YXIgcmVwb3J0RmFpbHVyZXMgPSAwOwogICAgICB2YXIgcmlnaHRtb3N0RmFpbHVyZXNQb3MgPSAwOwogICAgICB2YXIgcmlnaHRtb3N0RmFpbHVyZXNFeHBlY3RlZCA9IFtdOwogICAgICAKICAgICAgZnVuY3Rpb24gcGFkTGVmdChpbnB1dCwgcGFkZGluZywgbGVuZ3RoKSB7CiAgICAgICAgdmFyIHJlc3VsdCA9IGlucHV0OwogICAgICAgIAogICAgICAgIHZhciBwYWRMZW5ndGggPSBsZW5ndGggLSBpbnB1dC5sZW5ndGg7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWRMZW5ndGg7IGkrKykgewogICAgICAgICAgcmVzdWx0ID0gcGFkZGluZyArIHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gZXNjYXBlKGNoKSB7CiAgICAgICAgdmFyIGNoYXJDb2RlID0gY2guY2hhckNvZGVBdCgwKTsKICAgICAgICB2YXIgZXNjYXBlQ2hhcjsKICAgICAgICB2YXIgbGVuZ3RoOwogICAgICAgIAogICAgICAgIGlmIChjaGFyQ29kZSA8PSAweEZGKSB7CiAgICAgICAgICBlc2NhcGVDaGFyID0gJ3gnOwogICAgICAgICAgbGVuZ3RoID0gMjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZXNjYXBlQ2hhciA9ICd1JzsKICAgICAgICAgIGxlbmd0aCA9IDQ7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiAnXFwnICsgZXNjYXBlQ2hhciArIHBhZExlZnQoY2hhckNvZGUudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCksICcwJywgbGVuZ3RoKTsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gbWF0Y2hGYWlsZWQoZmFpbHVyZSkgewogICAgICAgIGlmIChwb3MgPCByaWdodG1vc3RGYWlsdXJlc1BvcykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAocG9zID4gcmlnaHRtb3N0RmFpbHVyZXNQb3MpIHsKICAgICAgICAgIHJpZ2h0bW9zdEZhaWx1cmVzUG9zID0gcG9zOwogICAgICAgICAgcmlnaHRtb3N0RmFpbHVyZXNFeHBlY3RlZCA9IFtdOwogICAgICAgIH0KICAgICAgICAKICAgICAgICByaWdodG1vc3RGYWlsdXJlc0V4cGVjdGVkLnB1c2goZmFpbHVyZSk7CiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIHBhcnNlX3N0YXJ0KCkgewogICAgICAgIHZhciByZXN1bHQwLCByZXN1bHQxOwogICAgICAgIHZhciBwb3MwOwogICAgICAgIAogICAgICAgIHBvczAgPSBwb3M7CiAgICAgICAgcmVzdWx0MCA9IFtdOwogICAgICAgIHJlc3VsdDEgPSBwYXJzZV9saW5lKCk7CiAgICAgICAgd2hpbGUgKHJlc3VsdDEgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAucHVzaChyZXN1bHQxKTsKICAgICAgICAgIHJlc3VsdDEgPSBwYXJzZV9saW5lKCk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gKGZ1bmN0aW9uKG9mZnNldCkgeyByZXR1cm4gcGFyc2VyLmdldFJlc3VsdCgpOyAgfSkocG9zMCk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfbGluZSgpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0MywgcmVzdWx0NCwgcmVzdWx0NSwgcmVzdWx0NjsKICAgICAgICB2YXIgcG9zMCwgcG9zMTsKICAgICAgICAKICAgICAgICBwb3MwID0gcG9zOwogICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgcmVzdWx0MCA9IHBhcnNlX18oKTsKICAgICAgICBpZiAocmVzdWx0MCAhPT0gbnVsbCkgewogICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwb3MsIDcpID09PSAiRVhQT1JUPSIpIHsKICAgICAgICAgICAgcmVzdWx0MSA9ICJFWFBPUlQ9IjsKICAgICAgICAgICAgcG9zICs9IDc7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQxID0gbnVsbDsKICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlwiRVhQT1JUPVwiIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICAgIGlmICgvXltBLVouMC05X10vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgICAgcmVzdWx0MyA9IGlucHV0LmNoYXJBdChwb3MpOwogICAgICAgICAgICAgIHBvcysrOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdDMgPSBudWxsOwogICAgICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIltBLVouMC05X10iKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlc3VsdDMgIT09IG51bGwpIHsKICAgICAgICAgICAgICByZXN1bHQyID0gW107CiAgICAgICAgICAgICAgd2hpbGUgKHJlc3VsdDMgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJlc3VsdDIucHVzaChyZXN1bHQzKTsKICAgICAgICAgICAgICAgIGlmICgvXltBLVouMC05X10vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgICAgICAgIHJlc3VsdDMgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZXN1bHQzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIltBLVouMC05X10iKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQyID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocmVzdWx0MiAhPT0gbnVsbCkgewogICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBvcykgPT09IDU4KSB7CiAgICAgICAgICAgICAgICByZXN1bHQzID0gIjoiOwogICAgICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdDMgPSBudWxsOwogICAgICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJcIjpcIiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAocmVzdWx0MyAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgaWYgKC9eW0EtWjAtOV9dLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgICAgICAgICByZXN1bHQ1ID0gaW5wdXQuY2hhckF0KHBvcyk7CiAgICAgICAgICAgICAgICAgIHBvcysrOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0NSA9IG51bGw7CiAgICAgICAgICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbQS1aMC05X10iKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHJlc3VsdDUgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0NCA9IFtdOwogICAgICAgICAgICAgICAgICB3aGlsZSAocmVzdWx0NSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdDQucHVzaChyZXN1bHQ1KTsKICAgICAgICAgICAgICAgICAgICBpZiAoL15bQS1aMC05X10vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ1ID0gaW5wdXQuY2hhckF0KHBvcyk7CiAgICAgICAgICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgcmVzdWx0NSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIltBLVowLTlfXSIpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0NCA9IG51bGw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0NCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICByZXN1bHQ1ID0gcGFyc2VfXygpOwogICAgICAgICAgICAgICAgICBpZiAocmVzdWx0NSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdDYgPSBwYXJzZV9MaW5lVGVybWluYXRvcigpOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdDYgPSByZXN1bHQ2ICE9PSBudWxsID8gcmVzdWx0NiA6ICIiOwogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQ2ICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDIsIHJlc3VsdDMsIHJlc3VsdDQsIHJlc3VsdDUsIHJlc3VsdDZdOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gKGZ1bmN0aW9uKG9mZnNldCwgcHJpdiwgcHViKSB7cmV0dXJuIHBhcnNlci5yZWdpc3RlckV4cG9ydHMocHJpdi5qb2luKCIiKSxwdWIuam9pbigiIikpfSkocG9zMCwgcmVzdWx0MFsyXSwgcmVzdWx0MFs0XSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCA9PT0gbnVsbCkgewogICAgICAgICAgcG9zMCA9IHBvczsKICAgICAgICAgIHJlc3VsdDAgPSBwYXJzZV9jb21tZW50KCk7CiAgICAgICAgICBpZiAocmVzdWx0MCAhPT0gbnVsbCkgewogICAgICAgICAgICBpZiAoL15bXG5cclx1MjAyOFx1MjAyOV0vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgICAgcmVzdWx0MSA9IGlucHV0LmNoYXJBdChwb3MpOwogICAgICAgICAgICAgIHBvcysrOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIltcXG5cXHJcXHUyMDI4XFx1MjAyOV0iKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzdWx0MSA9IHJlc3VsdDEgIT09IG51bGwgPyByZXN1bHQxIDogIiI7CiAgICAgICAgICAgIGlmIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IFtyZXN1bHQwLCByZXN1bHQxXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICAgIHBvczAgPSBwb3M7CiAgICAgICAgICAgIHJlc3VsdDAgPSBwYXJzZV9fKCk7CiAgICAgICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgaWYgKC9eW1xuXHJcdTIwMjhcdTIwMjldLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgICAgICAgcmVzdWx0MSA9IGlucHV0LmNoYXJBdChwb3MpOwogICAgICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbXFxuXFxyXFx1MjAyOFxcdTIwMjldIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDFdOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICAgIHBvcyA9IHBvczA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgIHBvcyA9IHBvczA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlc3VsdDAgPT09IG51bGwpIHsKICAgICAgICAgICAgICBwb3MwID0gcG9zOwogICAgICAgICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IHBhcnNlX18oKTsKICAgICAgICAgICAgICBpZiAocmVzdWx0MCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgcmVzdWx0MSA9IHBhcnNlX2Nvbm5lY3Rpb24oKTsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIHJlc3VsdDIgPSBwYXJzZV9fKCk7CiAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQyICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0MyA9IHBhcnNlX0xpbmVUZXJtaW5hdG9yKCk7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0MyA9IHJlc3VsdDMgIT09IG51bGwgPyByZXN1bHQzIDogIiI7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdDMgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBbcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0M107CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJlc3VsdDAgPSAoZnVuY3Rpb24ob2Zmc2V0LCBlZGdlcykge3JldHVybiBwYXJzZXIucmVnaXN0ZXJFZGdlcyhlZGdlcyk7fSkocG9zMCwgcmVzdWx0MFsxXSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfTGluZVRlcm1pbmF0b3IoKSB7CiAgICAgICAgdmFyIHJlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDIsIHJlc3VsdDM7CiAgICAgICAgdmFyIHBvczA7CiAgICAgICAgCiAgICAgICAgcG9zMCA9IHBvczsKICAgICAgICByZXN1bHQwID0gcGFyc2VfXygpOwogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwb3MpID09PSA0NCkgewogICAgICAgICAgICByZXN1bHQxID0gIiwiOwogICAgICAgICAgICBwb3MrKzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCIsXCIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmVzdWx0MSA9IHJlc3VsdDEgIT09IG51bGwgPyByZXN1bHQxIDogIiI7CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQyID0gcGFyc2VfY29tbWVudCgpOwogICAgICAgICAgICByZXN1bHQyID0gcmVzdWx0MiAhPT0gbnVsbCA/IHJlc3VsdDIgOiAiIjsKICAgICAgICAgICAgaWYgKHJlc3VsdDIgIT09IG51bGwpIHsKICAgICAgICAgICAgICBpZiAoL15bXG5cclx1MjAyOFx1MjAyOV0vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgICAgICByZXN1bHQzID0gaW5wdXQuY2hhckF0KHBvcyk7CiAgICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVzdWx0MyA9IG51bGw7CiAgICAgICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIltcXG5cXHJcXHUyMDI4XFx1MjAyOV0iKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmVzdWx0MyA9IHJlc3VsdDMgIT09IG51bGwgPyByZXN1bHQzIDogIiI7CiAgICAgICAgICAgICAgaWYgKHJlc3VsdDMgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBbcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0M107CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgIHBvcyA9IHBvczA7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDA7CiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIHBhcnNlX2NvbW1lbnQoKSB7CiAgICAgICAgdmFyIHJlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDIsIHJlc3VsdDM7CiAgICAgICAgdmFyIHBvczA7CiAgICAgICAgCiAgICAgICAgcG9zMCA9IHBvczsKICAgICAgICByZXN1bHQwID0gcGFyc2VfXygpOwogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwb3MpID09PSAzNSkgewogICAgICAgICAgICByZXN1bHQxID0gIiMiOwogICAgICAgICAgICBwb3MrKzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCIjXCIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKHJlc3VsdDEgIT09IG51bGwpIHsKICAgICAgICAgICAgcmVzdWx0MiA9IFtdOwogICAgICAgICAgICByZXN1bHQzID0gcGFyc2VfYW55Y2hhcigpOwogICAgICAgICAgICB3aGlsZSAocmVzdWx0MyAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHJlc3VsdDIucHVzaChyZXN1bHQzKTsKICAgICAgICAgICAgICByZXN1bHQzID0gcGFyc2VfYW55Y2hhcigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyZXN1bHQyICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IFtyZXN1bHQwLCByZXN1bHQxLCByZXN1bHQyXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfY29ubmVjdGlvbigpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0MywgcmVzdWx0NDsKICAgICAgICB2YXIgcG9zMCwgcG9zMTsKICAgICAgICAKICAgICAgICBwb3MwID0gcG9zOwogICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgcmVzdWx0MCA9IHBhcnNlX2JyaWRnZSgpOwogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQxID0gcGFyc2VfXygpOwogICAgICAgICAgaWYgKHJlc3VsdDEgIT09IG51bGwpIHsKICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwb3MsIDIpID09PSAiLT4iKSB7CiAgICAgICAgICAgICAgcmVzdWx0MiA9ICItPiI7CiAgICAgICAgICAgICAgcG9zICs9IDI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0MiA9IG51bGw7CiAgICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCItPlwiIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyZXN1bHQyICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmVzdWx0MyA9IHBhcnNlX18oKTsKICAgICAgICAgICAgICBpZiAocmVzdWx0MyAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgcmVzdWx0NCA9IHBhcnNlX2Nvbm5lY3Rpb24oKTsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQ0ICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBbcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0MywgcmVzdWx0NF07CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCAhPT0gbnVsbCkgewogICAgICAgICAgcmVzdWx0MCA9IChmdW5jdGlvbihvZmZzZXQsIHgsIHkpIHsgcmV0dXJuIFt4LHldOyB9KShwb3MwLCByZXN1bHQwWzBdLCByZXN1bHQwWzRdKTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgPT09IG51bGwpIHsKICAgICAgICAgIHBvcyA9IHBvczA7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gcGFyc2VfYnJpZGdlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQwOwogICAgICB9CiAgICAgIAogICAgICBmdW5jdGlvbiBwYXJzZV9icmlkZ2UoKSB7CiAgICAgICAgdmFyIHJlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDIsIHJlc3VsdDMsIHJlc3VsdDQ7CiAgICAgICAgdmFyIHBvczAsIHBvczE7CiAgICAgICAgCiAgICAgICAgcG9zMCA9IHBvczsKICAgICAgICBwb3MxID0gcG9zOwogICAgICAgIHJlc3VsdDAgPSBwYXJzZV9wb3J0KCk7CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDEgPSBwYXJzZV9fKCk7CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQyID0gcGFyc2Vfbm9kZSgpOwogICAgICAgICAgICBpZiAocmVzdWx0MiAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHJlc3VsdDMgPSBwYXJzZV9fKCk7CiAgICAgICAgICAgICAgaWYgKHJlc3VsdDMgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJlc3VsdDQgPSBwYXJzZV9wb3J0KCk7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0NCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDIsIHJlc3VsdDMsIHJlc3VsdDRdOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSAoZnVuY3Rpb24ob2Zmc2V0LCB4LCBwcm9jLCB5KSB7IHJldHVybiBbeyJ0Z3QiOntwcm9jZXNzOnByb2MsIHBvcnQ6eH19LHsic3JjIjp7cHJvY2Vzczpwcm9jLCBwb3J0Onl9fV07IH0pKHBvczAsIHJlc3VsdDBbMF0sIHJlc3VsdDBbMl0sIHJlc3VsdDBbNF0pOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCA9PT0gbnVsbCkgewogICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgPT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSBwYXJzZV9paXAoKTsKICAgICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBwYXJzZV9yaWdodGxldCgpOwogICAgICAgICAgICBpZiAocmVzdWx0MCA9PT0gbnVsbCkgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBwYXJzZV9sZWZ0bGV0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDA7CiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIHBhcnNlX2xlZnRsZXQoKSB7CiAgICAgICAgdmFyIHJlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDI7CiAgICAgICAgdmFyIHBvczAsIHBvczE7CiAgICAgICAgCiAgICAgICAgcG9zMCA9IHBvczsKICAgICAgICBwb3MxID0gcG9zOwogICAgICAgIHJlc3VsdDAgPSBwYXJzZV9ub2RlKCk7CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDEgPSBwYXJzZV9fKCk7CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQyID0gcGFyc2VfcG9ydCgpOwogICAgICAgICAgICBpZiAocmVzdWx0MiAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBbcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0Ml07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSAoZnVuY3Rpb24ob2Zmc2V0LCBwcm9jLCBwb3J0KSB7IHJldHVybiB7InNyYyI6e3Byb2Nlc3M6cHJvYywgcG9ydDpwb3J0fX0gfSkocG9zMCwgcmVzdWx0MFswXSwgcmVzdWx0MFsyXSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfaWlwKCkgewogICAgICAgIHZhciByZXN1bHQwLCByZXN1bHQxLCByZXN1bHQyOwogICAgICAgIHZhciBwb3MwLCBwb3MxOwogICAgICAgIAogICAgICAgIHBvczAgPSBwb3M7CiAgICAgICAgcG9zMSA9IHBvczsKICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwb3MpID09PSAzOSkgewogICAgICAgICAgcmVzdWx0MCA9ICInIjsKICAgICAgICAgIHBvcysrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCInXCIiKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDEgPSBbXTsKICAgICAgICAgIHJlc3VsdDIgPSBwYXJzZV9paXBjaGFyKCk7CiAgICAgICAgICB3aGlsZSAocmVzdWx0MiAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQxLnB1c2gocmVzdWx0Mik7CiAgICAgICAgICAgIHJlc3VsdDIgPSBwYXJzZV9paXBjaGFyKCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwb3MpID09PSAzOSkgewogICAgICAgICAgICAgIHJlc3VsdDIgPSAiJyI7CiAgICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0MiA9IG51bGw7CiAgICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCInXCIiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlc3VsdDIgIT09IG51bGwpIHsKICAgICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDJdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gKGZ1bmN0aW9uKG9mZnNldCwgaWlwKSB7IHJldHVybiB7ImRhdGEiOmlpcC5qb2luKCIiKX0gfSkocG9zMCwgcmVzdWx0MFsxXSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfcmlnaHRsZXQoKSB7CiAgICAgICAgdmFyIHJlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDI7CiAgICAgICAgdmFyIHBvczAsIHBvczE7CiAgICAgICAgCiAgICAgICAgcG9zMCA9IHBvczsKICAgICAgICBwb3MxID0gcG9zOwogICAgICAgIHJlc3VsdDAgPSBwYXJzZV9wb3J0KCk7CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDEgPSBwYXJzZV9fKCk7CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQyID0gcGFyc2Vfbm9kZSgpOwogICAgICAgICAgICBpZiAocmVzdWx0MiAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBbcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0Ml07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSAoZnVuY3Rpb24ob2Zmc2V0LCBwb3J0LCBwcm9jKSB7IHJldHVybiB7InRndCI6e3Byb2Nlc3M6cHJvYywgcG9ydDpwb3J0fX0gfSkocG9zMCwgcmVzdWx0MFswXSwgcmVzdWx0MFsyXSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2Vfbm9kZSgpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MTsKICAgICAgICB2YXIgcG9zMCwgcG9zMTsKICAgICAgICAKICAgICAgICBwb3MwID0gcG9zOwogICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgaWYgKC9eW2EtekEtWjAtOV9dLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgcmVzdWx0MSA9IGlucHV0LmNoYXJBdChwb3MpOwogICAgICAgICAgcG9zKys7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbYS16QS1aMC05X10iKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDEgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSBbXTsKICAgICAgICAgIHdoaWxlIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICAgIHJlc3VsdDAucHVzaChyZXN1bHQxKTsKICAgICAgICAgICAgaWYgKC9eW2EtekEtWjAtOV9dLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgICAgIHJlc3VsdDEgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQxID0gbnVsbDsKICAgICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbYS16QS1aMC05X10iKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQxID0gcGFyc2VfY29tcG9uZW50KCk7CiAgICAgICAgICByZXN1bHQxID0gcmVzdWx0MSAhPT0gbnVsbCA/IHJlc3VsdDEgOiAiIjsKICAgICAgICAgIGlmIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBbcmVzdWx0MCwgcmVzdWx0MV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCAhPT0gbnVsbCkgewogICAgICAgICAgcmVzdWx0MCA9IChmdW5jdGlvbihvZmZzZXQsIG5vZGUsIGNvbXApIHsgaWYoY29tcCl7cGFyc2VyLmFkZE5vZGUobm9kZS5qb2luKCIiKSxjb21wKTt9OyByZXR1cm4gbm9kZS5qb2luKCIiKX0pKHBvczAsIHJlc3VsdDBbMF0sIHJlc3VsdDBbMV0pOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCA9PT0gbnVsbCkgewogICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDA7CiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIHBhcnNlX2NvbXBvbmVudCgpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0MzsKICAgICAgICB2YXIgcG9zMCwgcG9zMTsKICAgICAgICAKICAgICAgICBwb3MwID0gcG9zOwogICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocG9zKSA9PT0gNDApIHsKICAgICAgICAgIHJlc3VsdDAgPSAiKCI7CiAgICAgICAgICBwb3MrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlwiKFwiIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICBpZiAoL15bYS16QS1aXC9cLTAtOV9dLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgICByZXN1bHQyID0gaW5wdXQuY2hhckF0KHBvcyk7CiAgICAgICAgICAgIHBvcysrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MiA9IG51bGw7CiAgICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbYS16QS1aXFwvXFwtMC05X10iKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKHJlc3VsdDIgIT09IG51bGwpIHsKICAgICAgICAgICAgcmVzdWx0MSA9IFtdOwogICAgICAgICAgICB3aGlsZSAocmVzdWx0MiAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHJlc3VsdDEucHVzaChyZXN1bHQyKTsKICAgICAgICAgICAgICBpZiAoL15bYS16QS1aXC9cLTAtOV9dLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgICAgICAgcmVzdWx0MiA9IGlucHV0LmNoYXJBdChwb3MpOwogICAgICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdDIgPSBudWxsOwogICAgICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbYS16QS1aXFwvXFwtMC05X10iKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgfQogICAgICAgICAgcmVzdWx0MSA9IHJlc3VsdDEgIT09IG51bGwgPyByZXN1bHQxIDogIiI7CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQyID0gcGFyc2VfY29tcE1ldGEoKTsKICAgICAgICAgICAgcmVzdWx0MiA9IHJlc3VsdDIgIT09IG51bGwgPyByZXN1bHQyIDogIiI7CiAgICAgICAgICAgIGlmIChyZXN1bHQyICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocG9zKSA9PT0gNDEpIHsKICAgICAgICAgICAgICAgIHJlc3VsdDMgPSAiKSI7CiAgICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVzdWx0MyA9IG51bGw7CiAgICAgICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlwiKVwiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChyZXN1bHQzICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDEsIHJlc3VsdDIsIHJlc3VsdDNdOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gKGZ1bmN0aW9uKG9mZnNldCwgY29tcCwgbWV0YSkgeyB2YXIgbyA9IHt9OyBjb21wID8gby5jb21wID0gY29tcC5qb2luKCIiKSA6IG8uY29tcCA9ICcnOyBtZXRhID8gby5tZXRhID0gbWV0YS5qb2luKCIiKS5zcGxpdCgnLCcpIDogbnVsbDsgcmV0dXJuIG87IH0pKHBvczAsIHJlc3VsdDBbMV0sIHJlc3VsdDBbMl0pOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCA9PT0gbnVsbCkgewogICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDA7CiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIHBhcnNlX2NvbXBNZXRhKCkgewogICAgICAgIHZhciByZXN1bHQwLCByZXN1bHQxLCByZXN1bHQyOwogICAgICAgIHZhciBwb3MwLCBwb3MxOwogICAgICAgIAogICAgICAgIHBvczAgPSBwb3M7CiAgICAgICAgcG9zMSA9IHBvczsKICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwb3MpID09PSA1OCkgewogICAgICAgICAgcmVzdWx0MCA9ICI6IjsKICAgICAgICAgIHBvcysrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCI6XCIiKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIGlmICgvXlthLXpBLVpcL10vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgIHJlc3VsdDIgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQyID0gbnVsbDsKICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlthLXpBLVpcXC9dIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXN1bHQyICE9PSBudWxsKSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBbXTsKICAgICAgICAgICAgd2hpbGUgKHJlc3VsdDIgIT09IG51bGwpIHsKICAgICAgICAgICAgICByZXN1bHQxLnB1c2gocmVzdWx0Mik7CiAgICAgICAgICAgICAgaWYgKC9eW2EtekEtWlwvXS8udGVzdChpbnB1dC5jaGFyQXQocG9zKSkpIHsKICAgICAgICAgICAgICAgIHJlc3VsdDIgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgICAgIHBvcysrOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHQyID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICAgICAgICBtYXRjaEZhaWxlZCgiW2EtekEtWlxcL10iKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHJlc3VsdDEgIT09IG51bGwpIHsKICAgICAgICAgICAgcmVzdWx0MCA9IFtyZXN1bHQwLCByZXN1bHQxXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgICBwb3MgPSBwb3MxOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gKGZ1bmN0aW9uKG9mZnNldCwgbWV0YSkge3JldHVybiBtZXRhfSkocG9zMCwgcmVzdWx0MFsxXSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfcG9ydCgpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MTsKICAgICAgICB2YXIgcG9zMCwgcG9zMTsKICAgICAgICAKICAgICAgICBwb3MwID0gcG9zOwogICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgaWYgKC9eW0EtWi4wLTlfXS8udGVzdChpbnB1dC5jaGFyQXQocG9zKSkpIHsKICAgICAgICAgIHJlc3VsdDEgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgIHBvcysrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQxID0gbnVsbDsKICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICBtYXRjaEZhaWxlZCgiW0EtWi4wLTlfXSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgcmVzdWx0MCA9IFtdOwogICAgICAgICAgd2hpbGUgKHJlc3VsdDEgIT09IG51bGwpIHsKICAgICAgICAgICAgcmVzdWx0MC5wdXNoKHJlc3VsdDEpOwogICAgICAgICAgICBpZiAoL15bQS1aLjAtOV9dLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgICAgIHJlc3VsdDEgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQxID0gbnVsbDsKICAgICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbQS1aLjAtOV9dIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCAhPT0gbnVsbCkgewogICAgICAgICAgcmVzdWx0MSA9IHBhcnNlX19fKCk7CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDFdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSAoZnVuY3Rpb24ob2Zmc2V0LCBwb3J0bmFtZSkge3JldHVybiBwb3J0bmFtZS5qb2luKCIiKS50b0xvd2VyQ2FzZSgpfSkocG9zMCwgcmVzdWx0MFswXSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwID09PSBudWxsKSB7CiAgICAgICAgICBwb3MgPSBwb3MwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfYW55Y2hhcigpIHsKICAgICAgICB2YXIgcmVzdWx0MDsKICAgICAgICAKICAgICAgICBpZiAoL15bXlxuXHJcdTIwMjhcdTIwMjldLy50ZXN0KGlucHV0LmNoYXJBdChwb3MpKSkgewogICAgICAgICAgcmVzdWx0MCA9IGlucHV0LmNoYXJBdChwb3MpOwogICAgICAgICAgcG9zKys7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJbXlxcblxcclxcdTIwMjhcXHUyMDI5XSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfaWlwY2hhcigpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MTsKICAgICAgICB2YXIgcG9zMCwgcG9zMTsKICAgICAgICAKICAgICAgICBwb3MwID0gcG9zOwogICAgICAgIHBvczEgPSBwb3M7CiAgICAgICAgaWYgKC9eW1xcXS8udGVzdChpbnB1dC5jaGFyQXQocG9zKSkpIHsKICAgICAgICAgIHJlc3VsdDAgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgIHBvcysrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgIGlmIChyZXBvcnRGYWlsdXJlcyA9PT0gMCkgewogICAgICAgICAgICBtYXRjaEZhaWxlZCgiW1xcXFxdIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQwICE9PSBudWxsKSB7CiAgICAgICAgICBpZiAoL15bJ10vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQxID0gbnVsbDsKICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlsnXSIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQwID0gW3Jlc3VsdDAsIHJlc3VsdDFdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0MCA9IG51bGw7CiAgICAgICAgICAgIHBvcyA9IHBvczE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdDAgPSBudWxsOwogICAgICAgICAgcG9zID0gcG9zMTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgIT09IG51bGwpIHsKICAgICAgICAgIHJlc3VsdDAgPSAoZnVuY3Rpb24ob2Zmc2V0KSB7IHJldHVybiAiJyI7IH0pKHBvczApOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0MCA9PT0gbnVsbCkgewogICAgICAgICAgcG9zID0gcG9zMDsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdDAgPT09IG51bGwpIHsKICAgICAgICAgIGlmICgvXlteJ10vLnRlc3QoaW5wdXQuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICAgIHJlc3VsdDAgPSBpbnB1dC5jaGFyQXQocG9zKTsKICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICAgICAgaWYgKHJlcG9ydEZhaWx1cmVzID09PSAwKSB7CiAgICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlteJ10iKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfXygpIHsKICAgICAgICB2YXIgcmVzdWx0MCwgcmVzdWx0MTsKICAgICAgICAKICAgICAgICByZXN1bHQwID0gW107CiAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocG9zKSA9PT0gMzIpIHsKICAgICAgICAgIHJlc3VsdDEgPSAiICI7CiAgICAgICAgICBwb3MrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MSA9IG51bGw7CiAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlwiIFwiIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHdoaWxlIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwLnB1c2gocmVzdWx0MSk7CiAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwb3MpID09PSAzMikgewogICAgICAgICAgICByZXN1bHQxID0gIiAiOwogICAgICAgICAgICBwb3MrKzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdDEgPSBudWxsOwogICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICBtYXRjaEZhaWxlZCgiXCIgXCIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXN1bHQwID0gcmVzdWx0MCAhPT0gbnVsbCA/IHJlc3VsdDAgOiAiIjsKICAgICAgICByZXR1cm4gcmVzdWx0MDsKICAgICAgfQogICAgICAKICAgICAgZnVuY3Rpb24gcGFyc2VfX18oKSB7CiAgICAgICAgdmFyIHJlc3VsdDAsIHJlc3VsdDE7CiAgICAgICAgCiAgICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQocG9zKSA9PT0gMzIpIHsKICAgICAgICAgIHJlc3VsdDEgPSAiICI7CiAgICAgICAgICBwb3MrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0MSA9IG51bGw7CiAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgbWF0Y2hGYWlsZWQoIlwiIFwiIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQxICE9PSBudWxsKSB7CiAgICAgICAgICByZXN1bHQwID0gW107CiAgICAgICAgICB3aGlsZSAocmVzdWx0MSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHQwLnB1c2gocmVzdWx0MSk7CiAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KHBvcykgPT09IDMyKSB7CiAgICAgICAgICAgICAgcmVzdWx0MSA9ICIgIjsKICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQxID0gbnVsbDsKICAgICAgICAgICAgICBpZiAocmVwb3J0RmFpbHVyZXMgPT09IDApIHsKICAgICAgICAgICAgICAgIG1hdGNoRmFpbGVkKCJcIiBcIiIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQwID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDA7CiAgICAgIH0KICAgICAgCiAgICAgIAogICAgICBmdW5jdGlvbiBjbGVhbnVwRXhwZWN0ZWQoZXhwZWN0ZWQpIHsKICAgICAgICBleHBlY3RlZC5zb3J0KCk7CiAgICAgICAgCiAgICAgICAgdmFyIGxhc3RFeHBlY3RlZCA9IG51bGw7CiAgICAgICAgdmFyIGNsZWFuRXhwZWN0ZWQgPSBbXTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4cGVjdGVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoZXhwZWN0ZWRbaV0gIT09IGxhc3RFeHBlY3RlZCkgewogICAgICAgICAgICBjbGVhbkV4cGVjdGVkLnB1c2goZXhwZWN0ZWRbaV0pOwogICAgICAgICAgICBsYXN0RXhwZWN0ZWQgPSBleHBlY3RlZFtpXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNsZWFuRXhwZWN0ZWQ7CiAgICAgIH0KICAgICAgCiAgICAgIGZ1bmN0aW9uIGNvbXB1dGVFcnJvclBvc2l0aW9uKCkgewogICAgICAgIC8qCiAgICAgICAgICogVGhlIGZpcnN0IGlkZWEgd2FzIHRvIHVzZSB8U3RyaW5nLnNwbGl0fCB0byBicmVhayB0aGUgaW5wdXQgdXAgdG8gdGhlCiAgICAgICAgICogZXJyb3IgcG9zaXRpb24gYWxvbmcgbmV3bGluZXMgYW5kIGRlcml2ZSB0aGUgbGluZSBhbmQgY29sdW1uIGZyb20KICAgICAgICAgKiB0aGVyZS4gSG93ZXZlciBJRSdzIHxzcGxpdHwgaW1wbGVtZW50YXRpb24gaXMgc28gYnJva2VuIHRoYXQgaXQgd2FzCiAgICAgICAgICogZW5vdWdoIHRvIHByZXZlbnQgaXQuCiAgICAgICAgICovCiAgICAgICAgCiAgICAgICAgdmFyIGxpbmUgPSAxOwogICAgICAgIHZhciBjb2x1bW4gPSAxOwogICAgICAgIHZhciBzZWVuQ1IgPSBmYWxzZTsKICAgICAgICAKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE1hdGgubWF4KHBvcywgcmlnaHRtb3N0RmFpbHVyZXNQb3MpOyBpKyspIHsKICAgICAgICAgIHZhciBjaCA9IGlucHV0LmNoYXJBdChpKTsKICAgICAgICAgIGlmIChjaCA9PT0gIlxuIikgewogICAgICAgICAgICBpZiAoIXNlZW5DUikgeyBsaW5lKys7IH0KICAgICAgICAgICAgY29sdW1uID0gMTsKICAgICAgICAgICAgc2VlbkNSID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAiXHIiIHx8IGNoID09PSAiXHUyMDI4IiB8fCBjaCA9PT0gIlx1MjAyOSIpIHsKICAgICAgICAgICAgbGluZSsrOwogICAgICAgICAgICBjb2x1bW4gPSAxOwogICAgICAgICAgICBzZWVuQ1IgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29sdW1uKys7CiAgICAgICAgICAgIHNlZW5DUiA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4geyBsaW5lOiBsaW5lLCBjb2x1bW46IGNvbHVtbiB9OwogICAgICB9CiAgICAgIAogICAgICAKICAgICAgICB2YXIgcGFyc2VyLCBlZGdlcywgbm9kZXM7IAogICAgICAKICAgICAgICBwYXJzZXIgPSB0aGlzOwogICAgICAKICAgICAgICBlZGdlcyA9IHBhcnNlci5lZGdlcyA9IFtdOwogICAgICAgIAogICAgICAgIHBhcnNlci5leHBvcnRzID0gW10KICAgICAgCiAgICAgICAgbm9kZXMgPSB7fTsKICAgICAgCiAgICAgICAgcGFyc2VyLmFkZE5vZGUgPSBmdW5jdGlvbiAobm9kZU5hbWUsIGNvbXApIHsKICAgICAgICAgIGlmICghbm9kZXNbbm9kZU5hbWVdKSB7CiAgICAgICAgICAgIG5vZGVzW25vZGVOYW1lXSA9IHt9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoISFjb21wLmNvbXApIHsKICAgICAgICAgICAgbm9kZXNbbm9kZU5hbWVdLmNvbXBvbmVudCA9IGNvbXAuY29tcDsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghIWNvbXAubWV0YSkgewogICAgICAgICAgICBub2Rlc1tub2RlTmFtZV0ubWV0YWRhdGE9e3JvdXRlczpjb21wLm1ldGF9OwogICAgICAgICAgfQogICAgICAgICAKICAgICAgICB9CiAgICAgIAogICAgICAgIHBhcnNlci5nZXRSZXN1bHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4ge3Byb2Nlc3Nlczpub2RlcywgY29ubmVjdGlvbnM6cGFyc2VyLnByb2Nlc3NFZGdlcygpLCBleHBvcnRzOnBhcnNlci5leHBvcnRzfTsKICAgICAgICB9ICAKICAgICAgCiAgICAgICAgdmFyIGZsYXR0ZW4gPSBmdW5jdGlvbiAoYXJyYXksIGlzU2hhbGxvdykgewogICAgICAgICAgdmFyIGluZGV4ID0gLTEsCiAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCwKICAgICAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIAogICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgICAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdOwogICAgICAKICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIGlzU2hhbGxvdyA/IHZhbHVlIDogZmxhdHRlbih2YWx1ZSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcGFyc2VyLnJlZ2lzdGVyRXhwb3J0cyA9IGZ1bmN0aW9uIChwcml2LCBwdWIpIHsKICAgICAgICAgIHBhcnNlci5leHBvcnRzLnB1c2goe3ByaXZhdGU6cHJpdi50b0xvd2VyQ2FzZSgpLCBwdWJsaWM6cHViLnRvTG93ZXJDYXNlKCl9KQogICAgICAgIH0KICAgICAgCiAgICAgICAgcGFyc2VyLnJlZ2lzdGVyRWRnZXMgPSBmdW5jdGlvbiAoZWRnZXMpIHsKICAgICAgCiAgICAgICAgICBlZGdlcy5mb3JFYWNoKGZ1bmN0aW9uIChvLCBpKSB7CiAgICAgICAgICAgIHBhcnNlci5lZGdlcy5wdXNoKG8pOwogICAgICAgICAgfSk7CiAgICAgICAgfSAgCiAgICAgIAogICAgICAgIHBhcnNlci5wcm9jZXNzRWRnZXMgPSBmdW5jdGlvbiAoKSB7ICAgCiAgICAgICAgICB2YXIgZmxhdHMsIGdyb3VwZWQ7CiAgICAgICAgICBmbGF0cyA9IGZsYXR0ZW4ocGFyc2VyLmVkZ2VzKTsKICAgICAgICAgIGdyb3VwZWQgPSBbXTsKICAgICAgICAgIHZhciBjdXJyZW50ID0ge307CiAgICAgICAgICBmbGF0cy5mb3JFYWNoKGZ1bmN0aW9uIChvLCBpKSB7CiAgICAgICAgICAgIGlmIChpICUgMiAhPT0gMCkgeyAKICAgICAgICAgICAgICB2YXIgcGFpciA9IGdyb3VwZWRbZ3JvdXBlZC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICBwYWlyLnRndCA9IG8udGd0OwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBncm91cGVkLnB1c2gobyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBncm91cGVkOwogICAgICAgIH0KICAgICAgCiAgICAgIAogICAgICB2YXIgcmVzdWx0ID0gcGFyc2VGdW5jdGlvbnNbc3RhcnRSdWxlXSgpOwogICAgICAKICAgICAgLyoKICAgICAgICogVGhlIHBhcnNlciBpcyBub3cgaW4gb25lIG9mIHRoZSBmb2xsb3dpbmcgdGhyZWUgc3RhdGVzOgogICAgICAgKgogICAgICAgKiAxLiBUaGUgcGFyc2VyIHN1Y2Nlc3NmdWxseSBwYXJzZWQgdGhlIHdob2xlIGlucHV0LgogICAgICAgKgogICAgICAgKiAgICAtIHxyZXN1bHQgIT09IG51bGx8CiAgICAgICAqICAgIC0gfHBvcyA9PT0gaW5wdXQubGVuZ3RofAogICAgICAgKiAgICAtIHxyaWdodG1vc3RGYWlsdXJlc0V4cGVjdGVkfCBtYXkgb3IgbWF5IG5vdCBjb250YWluIHNvbWV0aGluZwogICAgICAgKgogICAgICAgKiAyLiBUaGUgcGFyc2VyIHN1Y2Nlc3NmdWxseSBwYXJzZWQgb25seSBhIHBhcnQgb2YgdGhlIGlucHV0LgogICAgICAgKgogICAgICAgKiAgICAtIHxyZXN1bHQgIT09IG51bGx8CiAgICAgICAqICAgIC0gfHBvcyA8IGlucHV0Lmxlbmd0aHwKICAgICAgICogICAgLSB8cmlnaHRtb3N0RmFpbHVyZXNFeHBlY3RlZHwgbWF5IG9yIG1heSBub3QgY29udGFpbiBzb21ldGhpbmcKICAgICAgICoKICAgICAgICogMy4gVGhlIHBhcnNlciBkaWQgbm90IHN1Y2Nlc3NmdWxseSBwYXJzZSBhbnkgcGFydCBvZiB0aGUgaW5wdXQuCiAgICAgICAqCiAgICAgICAqICAgLSB8cmVzdWx0ID09PSBudWxsfAogICAgICAgKiAgIC0gfHBvcyA9PT0gMHwKICAgICAgICogICAtIHxyaWdodG1vc3RGYWlsdXJlc0V4cGVjdGVkfCBjb250YWlucyBhdCBsZWFzdCBvbmUgZmFpbHVyZQogICAgICAgKgogICAgICAgKiBBbGwgY29kZSBmb2xsb3dpbmcgdGhpcyBjb21tZW50IChpbmNsdWRpbmcgY2FsbGVkIGZ1bmN0aW9ucykgbXVzdAogICAgICAgKiBoYW5kbGUgdGhlc2Ugc3RhdGVzLgogICAgICAgKi8KICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCBwb3MgIT09IGlucHV0Lmxlbmd0aCkgewogICAgICAgIHZhciBvZmZzZXQgPSBNYXRoLm1heChwb3MsIHJpZ2h0bW9zdEZhaWx1cmVzUG9zKTsKICAgICAgICB2YXIgZm91bmQgPSBvZmZzZXQgPCBpbnB1dC5sZW5ndGggPyBpbnB1dC5jaGFyQXQob2Zmc2V0KSA6IG51bGw7CiAgICAgICAgdmFyIGVycm9yUG9zaXRpb24gPSBjb21wdXRlRXJyb3JQb3NpdGlvbigpOwogICAgICAgIAogICAgICAgIHRocm93IG5ldyB0aGlzLlN5bnRheEVycm9yKAogICAgICAgICAgY2xlYW51cEV4cGVjdGVkKHJpZ2h0bW9zdEZhaWx1cmVzRXhwZWN0ZWQpLAogICAgICAgICAgZm91bmQsCiAgICAgICAgICBvZmZzZXQsCiAgICAgICAgICBlcnJvclBvc2l0aW9uLmxpbmUsCiAgICAgICAgICBlcnJvclBvc2l0aW9uLmNvbHVtbgogICAgICAgICk7CiAgICAgIH0KICAgICAgCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgCiAgICAvKiBSZXR1cm5zIHRoZSBwYXJzZXIgc291cmNlIGNvZGUuICovCiAgICB0b1NvdXJjZTogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl9zb3VyY2U7IH0KICB9OwogIAogIC8qIFRocm93biB3aGVuIGEgcGFyc2VyIGVuY291bnRlcnMgYSBzeW50YXggZXJyb3IuICovCiAgCiAgcmVzdWx0LlN5bnRheEVycm9yID0gZnVuY3Rpb24oZXhwZWN0ZWQsIGZvdW5kLCBvZmZzZXQsIGxpbmUsIGNvbHVtbikgewogICAgZnVuY3Rpb24gYnVpbGRNZXNzYWdlKGV4cGVjdGVkLCBmb3VuZCkgewogICAgICB2YXIgZXhwZWN0ZWRIdW1hbml6ZWQsIGZvdW5kSHVtYW5pemVkOwogICAgICAKICAgICAgc3dpdGNoIChleHBlY3RlZC5sZW5ndGgpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBleHBlY3RlZEh1bWFuaXplZCA9ICJlbmQgb2YgaW5wdXQiOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgZXhwZWN0ZWRIdW1hbml6ZWQgPSBleHBlY3RlZFswXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBleHBlY3RlZEh1bWFuaXplZCA9IGV4cGVjdGVkLnNsaWNlKDAsIGV4cGVjdGVkLmxlbmd0aCAtIDEpLmpvaW4oIiwgIikKICAgICAgICAgICAgKyAiIG9yICIKICAgICAgICAgICAgKyBleHBlY3RlZFtleHBlY3RlZC5sZW5ndGggLSAxXTsKICAgICAgfQogICAgICAKICAgICAgZm91bmRIdW1hbml6ZWQgPSBmb3VuZCA/IHF1b3RlKGZvdW5kKSA6ICJlbmQgb2YgaW5wdXQiOwogICAgICAKICAgICAgcmV0dXJuICJFeHBlY3RlZCAiICsgZXhwZWN0ZWRIdW1hbml6ZWQgKyAiIGJ1dCAiICsgZm91bmRIdW1hbml6ZWQgKyAiIGZvdW5kLiI7CiAgICB9CiAgICAKICAgIHRoaXMubmFtZSA9ICJTeW50YXhFcnJvciI7CiAgICB0aGlzLmV4cGVjdGVkID0gZXhwZWN0ZWQ7CiAgICB0aGlzLmZvdW5kID0gZm91bmQ7CiAgICB0aGlzLm1lc3NhZ2UgPSBidWlsZE1lc3NhZ2UoZXhwZWN0ZWQsIGZvdW5kKTsKICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0OwogICAgdGhpcy5saW5lID0gbGluZTsKICAgIHRoaXMuY29sdW1uID0gY29sdW1uOwogIH07CiAgCiAgcmVzdWx0LlN5bnRheEVycm9yLnByb3RvdHlwZSA9IEVycm9yLnByb3RvdHlwZTsKICAKICByZXR1cm4gcmVzdWx0Owp9KSgpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvIiwiZGVzY3JpcHRpb24iOiJGbG93LUJhc2VkIFByb2dyYW1taW5nIGVudmlyb25tZW50IGZvciBKYXZhU2NyaXB0Iiwia2V5d29yZHMiOlsiZmJwIiwid29ya2Zsb3ciLCJmbG93Il0sInJlcG8iOiJub2Zsby9ub2ZsbyIsInZlcnNpb24iOiIwLjQuMSIsImRlcGVuZGVuY2llcyI6eyJjb21wb25lbnQvZW1pdHRlciI6IioiLCJjb21wb25lbnQvdW5kZXJzY29yZSI6IioiLCJub2Zsby9mYnAiOiIqIn0sImRldmVsb3BtZW50Ijp7fSwibGljZW5zZSI6Ik1JVCIsIm1haW4iOiJzcmMvbGliL05vRmxvLmpzIiwic2NyaXB0cyI6WyJzcmMvbGliL0dyYXBoLmNvZmZlZSIsInNyYy9saWIvSW50ZXJuYWxTb2NrZXQuY29mZmVlIiwic3JjL2xpYi9Qb3J0LmNvZmZlZSIsInNyYy9saWIvQXJyYXlQb3J0LmNvZmZlZSIsInNyYy9saWIvQ29tcG9uZW50LmNvZmZlZSIsInNyYy9saWIvQXN5bmNDb21wb25lbnQuY29mZmVlIiwic3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmNvZmZlZSIsInNyYy9saWIvQ29tcG9uZW50TG9hZGVyLmNvZmZlZSIsInNyYy9saWIvTm9GbG8uY29mZmVlIiwic3JjL2xpYi9OZXR3b3JrLmNvZmZlZSIsInNyYy9jb21wb25lbnRzL0dyYXBoLmNvZmZlZSJdLCJqc29uIjpbImNvbXBvbmVudC5qc29uIl0sIm5vZmxvIjp7ImNvbXBvbmVudHMiOnsiR3JhcGgiOiJzcmMvY29tcG9uZW50cy9HcmFwaC5qcyJ9fX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvL3NyYy9saWIvR3JhcGguanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRXZlbnRFbWl0dGVyLCBHcmFwaCwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCmlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5leGVjUGF0aCAmJiBwcm9jZXNzLmV4ZWNQYXRoLmluZGV4T2YoJ25vZGUnKSAhPT0gLTEpIHsKICBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7Cn0gZWxzZSB7CiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpOwp9CgpHcmFwaCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR3JhcGgsIF9zdXBlcik7CgogIEdyYXBoLnByb3RvdHlwZS5uYW1lID0gJyc7CgogIEdyYXBoLnByb3RvdHlwZS5wcm9wZXJ0aWVzID0ge307CgogIEdyYXBoLnByb3RvdHlwZS5ub2RlcyA9IFtdOwoKICBHcmFwaC5wcm90b3R5cGUuZWRnZXMgPSBbXTsKCiAgR3JhcGgucHJvdG90eXBlLmluaXRpYWxpemVycyA9IFtdOwoKICBHcmFwaC5wcm90b3R5cGUuZXhwb3J0cyA9IFtdOwoKICBmdW5jdGlvbiBHcmFwaChuYW1lKSB7CiAgICB0aGlzLm5hbWUgPSBuYW1lICE9IG51bGwgPyBuYW1lIDogJyc7CiAgICB0aGlzLnByb3BlcnRpZXMgPSB7fTsKICAgIHRoaXMubm9kZXMgPSBbXTsKICAgIHRoaXMuZWRnZXMgPSBbXTsKICAgIHRoaXMuaW5pdGlhbGl6ZXJzID0gW107CiAgICB0aGlzLmV4cG9ydHMgPSBbXTsKICB9CgogIEdyYXBoLnByb3RvdHlwZS5hZGRFeHBvcnQgPSBmdW5jdGlvbihwcml2YXRlUG9ydCwgcHVibGljUG9ydCwgbWV0YWRhdGEpIHsKICAgIHJldHVybiB0aGlzLmV4cG9ydHMucHVzaCh7CiAgICAgICJwcml2YXRlIjogcHJpdmF0ZVBvcnQudG9Mb3dlckNhc2UoKSwKICAgICAgInB1YmxpYyI6IHB1YmxpY1BvcnQudG9Mb3dlckNhc2UoKSwKICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhCiAgICB9KTsKICB9OwoKICBHcmFwaC5wcm90b3R5cGUuYWRkTm9kZSA9IGZ1bmN0aW9uKGlkLCBjb21wb25lbnQsIG1ldGFkYXRhKSB7CiAgICB2YXIgbm9kZTsKICAgIGlmICghbWV0YWRhdGEpIHsKICAgICAgbWV0YWRhdGEgPSB7fTsKICAgIH0KICAgIG5vZGUgPSB7CiAgICAgIGlkOiBpZCwKICAgICAgY29tcG9uZW50OiBjb21wb25lbnQsCiAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YQogICAgfTsKICAgIHRoaXMubm9kZXMucHVzaChub2RlKTsKICAgIHRoaXMuZW1pdCgnYWRkTm9kZScsIG5vZGUpOwogICAgcmV0dXJuIG5vZGU7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLnJlbW92ZU5vZGUgPSBmdW5jdGlvbihpZCkgewogICAgdmFyIGVkZ2UsIGluaXRpYWxpemVyLCBub2RlLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVmMTsKICAgIG5vZGUgPSB0aGlzLmdldE5vZGUoaWQpOwogICAgX3JlZiA9IHRoaXMuZWRnZXM7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgZWRnZSA9IF9yZWZbX2ldOwogICAgICBpZiAoIWVkZ2UpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoZWRnZS5mcm9tLm5vZGUgPT09IG5vZGUuaWQpIHsKICAgICAgICB0aGlzLnJlbW92ZUVkZ2UoZWRnZS5mcm9tLm5vZGUsIGVkZ2UuZnJvbS5wb3J0KTsKICAgICAgfQogICAgICBpZiAoZWRnZS50by5ub2RlID09PSBub2RlLmlkKSB7CiAgICAgICAgdGhpcy5yZW1vdmVFZGdlKGVkZ2UudG8ubm9kZSwgZWRnZS50by5wb3J0KTsKICAgICAgfQogICAgfQogICAgX3JlZjEgPSB0aGlzLmluaXRpYWxpemVyczsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICBpbml0aWFsaXplciA9IF9yZWYxW19qXTsKICAgICAgaWYgKCFpbml0aWFsaXplcikgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmIChpbml0aWFsaXplci50by5ub2RlID09PSBub2RlLmlkKSB7CiAgICAgICAgdGhpcy5yZW1vdmVJbml0aWFsKGluaXRpYWxpemVyLnRvLm5vZGUsIGluaXRpYWxpemVyLnRvLnBvcnQpOwogICAgICB9CiAgICB9CiAgICBpZiAoLTEgIT09IHRoaXMubm9kZXMuaW5kZXhPZihub2RlKSkgewogICAgICB0aGlzLm5vZGVzLnNwbGljZSh0aGlzLm5vZGVzLmluZGV4T2Yobm9kZSksIDEpOwogICAgfQogICAgcmV0dXJuIHRoaXMuZW1pdCgncmVtb3ZlTm9kZScsIG5vZGUpOwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5nZXROb2RlID0gZnVuY3Rpb24oaWQpIHsKICAgIHZhciBub2RlLCBfaSwgX2xlbiwgX3JlZjsKICAgIF9yZWYgPSB0aGlzLm5vZGVzOwogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgIG5vZGUgPSBfcmVmW19pXTsKICAgICAgaWYgKCFub2RlKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKG5vZGUuaWQgPT09IGlkKSB7CiAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5yZW5hbWVOb2RlID0gZnVuY3Rpb24ob2xkSWQsIG5ld0lkKSB7CiAgICB2YXIgZWRnZSwgaWlwLCBub2RlLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVmMTsKICAgIG5vZGUgPSB0aGlzLmdldE5vZGUob2xkSWQpOwogICAgaWYgKCFub2RlKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIG5vZGUuaWQgPSBuZXdJZDsKICAgIF9yZWYgPSB0aGlzLmVkZ2VzOwogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgIGVkZ2UgPSBfcmVmW19pXTsKICAgICAgaWYgKCFlZGdlKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKGVkZ2UuZnJvbS5ub2RlID09PSBvbGRJZCkgewogICAgICAgIGVkZ2UuZnJvbS5ub2RlID0gbmV3SWQ7CiAgICAgIH0KICAgICAgaWYgKGVkZ2UudG8ubm9kZSA9PT0gb2xkSWQpIHsKICAgICAgICBlZGdlLnRvLm5vZGUgPSBuZXdJZDsKICAgICAgfQogICAgfQogICAgX3JlZjEgPSB0aGlzLmluaXRpYWxpemVyczsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICBpaXAgPSBfcmVmMVtfal07CiAgICAgIGlmICghaWlwKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKGlpcC50by5ub2RlID09PSBvbGRJZCkgewogICAgICAgIGlpcC50by5ub2RlID0gbmV3SWQ7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0aGlzLmVtaXQoJ3JlbmFtZU5vZGUnLCBvbGRJZCwgbmV3SWQpOwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5hZGRFZGdlID0gZnVuY3Rpb24ob3V0Tm9kZSwgb3V0UG9ydCwgaW5Ob2RlLCBpblBvcnQsIG1ldGFkYXRhKSB7CiAgICB2YXIgZWRnZTsKICAgIGlmICghdGhpcy5nZXROb2RlKG91dE5vZGUpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICghdGhpcy5nZXROb2RlKGluTm9kZSkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCFtZXRhZGF0YSkgewogICAgICBtZXRhZGF0YSA9IHt9OwogICAgfQogICAgZWRnZSA9IHsKICAgICAgZnJvbTogewogICAgICAgIG5vZGU6IG91dE5vZGUsCiAgICAgICAgcG9ydDogb3V0UG9ydAogICAgICB9LAogICAgICB0bzogewogICAgICAgIG5vZGU6IGluTm9kZSwKICAgICAgICBwb3J0OiBpblBvcnQKICAgICAgfSwKICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhCiAgICB9OwogICAgdGhpcy5lZGdlcy5wdXNoKGVkZ2UpOwogICAgdGhpcy5lbWl0KCdhZGRFZGdlJywgZWRnZSk7CiAgICByZXR1cm4gZWRnZTsKICB9OwoKICBHcmFwaC5wcm90b3R5cGUucmVtb3ZlRWRnZSA9IGZ1bmN0aW9uKG5vZGUsIHBvcnQsIG5vZGUyLCBwb3J0MikgewogICAgdmFyIGVkZ2UsIGluZGV4LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICBfcmVmID0gdGhpcy5lZGdlczsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKGluZGV4ID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgaW5kZXggPSArK19pKSB7CiAgICAgIGVkZ2UgPSBfcmVmW2luZGV4XTsKICAgICAgaWYgKCFlZGdlKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKGVkZ2UuZnJvbS5ub2RlID09PSBub2RlICYmIGVkZ2UuZnJvbS5wb3J0ID09PSBwb3J0KSB7CiAgICAgICAgaWYgKG5vZGUyICYmIHBvcnQyKSB7CiAgICAgICAgICBpZiAoIShlZGdlLnRvLm5vZGUgPT09IG5vZGUyICYmIGVkZ2UudG8ucG9ydCA9PT0gcG9ydDIpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUVkZ2UnLCBlZGdlKTsKICAgICAgICB0aGlzLmVkZ2VzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgICAgaWYgKGVkZ2UudG8ubm9kZSA9PT0gbm9kZSAmJiBlZGdlLnRvLnBvcnQgPT09IHBvcnQpIHsKICAgICAgICBpZiAobm9kZTIgJiYgcG9ydDIpIHsKICAgICAgICAgIGlmICghKGVkZ2UuZnJvbS5ub2RlID09PSBub2RlMiAmJiBlZGdlLmZyb20ucG9ydCA9PT0gcG9ydDIpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUVkZ2UnLCBlZGdlKTsKICAgICAgICBfcmVzdWx0cy5wdXNoKHRoaXMuZWRnZXMuc3BsaWNlKGluZGV4LCAxKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3Jlc3VsdHMucHVzaCh2b2lkIDApOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHM7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLmFkZEluaXRpYWwgPSBmdW5jdGlvbihkYXRhLCBub2RlLCBwb3J0LCBtZXRhZGF0YSkgewogICAgdmFyIGluaXRpYWxpemVyOwogICAgaWYgKCF0aGlzLmdldE5vZGUobm9kZSkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaW5pdGlhbGl6ZXIgPSB7CiAgICAgIGZyb206IHsKICAgICAgICBkYXRhOiBkYXRhCiAgICAgIH0sCiAgICAgIHRvOiB7CiAgICAgICAgbm9kZTogbm9kZSwKICAgICAgICBwb3J0OiBwb3J0CiAgICAgIH0sCiAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YQogICAgfTsKICAgIHRoaXMuaW5pdGlhbGl6ZXJzLnB1c2goaW5pdGlhbGl6ZXIpOwogICAgdGhpcy5lbWl0KCdhZGRJbml0aWFsJywgaW5pdGlhbGl6ZXIpOwogICAgcmV0dXJuIGluaXRpYWxpemVyOwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5yZW1vdmVJbml0aWFsID0gZnVuY3Rpb24obm9kZSwgcG9ydCkgewogICAgdmFyIGVkZ2UsIGluZGV4LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICBfcmVmID0gdGhpcy5pbml0aWFsaXplcnM7CiAgICBfcmVzdWx0cyA9IFtdOwogICAgZm9yIChpbmRleCA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGluZGV4ID0gKytfaSkgewogICAgICBlZGdlID0gX3JlZltpbmRleF07CiAgICAgIGlmICghZWRnZSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmIChlZGdlLnRvLm5vZGUgPT09IG5vZGUgJiYgZWRnZS50by5wb3J0ID09PSBwb3J0KSB7CiAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVJbml0aWFsJywgZWRnZSk7CiAgICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLmluaXRpYWxpemVycy5zcGxpY2UoaW5kZXgsIDEpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfcmVzdWx0cy5wdXNoKHZvaWQgMCk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICBHcmFwaC5wcm90b3R5cGUudG9ET1QgPSBmdW5jdGlvbigpIHsKICAgIHZhciBjbGVhbklELCBjbGVhblBvcnQsIGRhdGEsIGRvdCwgZWRnZSwgaWQsIGluaXRpYWxpemVyLCBub2RlLCBfaSwgX2osIF9rLCBfbGVuLCBfbGVuMSwgX2xlbjIsIF9yZWYsIF9yZWYxLCBfcmVmMjsKICAgIGNsZWFuSUQgPSBmdW5jdGlvbihpZCkgewogICAgICByZXR1cm4gaWQucmVwbGFjZSgvXHMqL2csICIiKTsKICAgIH07CiAgICBjbGVhblBvcnQgPSBmdW5jdGlvbihwb3J0KSB7CiAgICAgIHJldHVybiBwb3J0LnJlcGxhY2UoL1wuL2csICIiKTsKICAgIH07CiAgICBkb3QgPSAiZGlncmFwaCB7XG4iOwogICAgX3JlZiA9IHRoaXMubm9kZXM7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgbm9kZSA9IF9yZWZbX2ldOwogICAgICBkb3QgKz0gIiAgICAiICsgKGNsZWFuSUQobm9kZS5pZCkpICsgIiBbbGFiZWw9IiArIG5vZGUuaWQgKyAiIHNoYXBlPWJveF1cbiI7CiAgICB9CiAgICBfcmVmMSA9IHRoaXMuaW5pdGlhbGl6ZXJzOwogICAgZm9yIChpZCA9IF9qID0gMCwgX2xlbjEgPSBfcmVmMS5sZW5ndGg7IF9qIDwgX2xlbjE7IGlkID0gKytfaikgewogICAgICBpbml0aWFsaXplciA9IF9yZWYxW2lkXTsKICAgICAgaWYgKHR5cGVvZiBpbml0aWFsaXplci5mcm9tLmRhdGEgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBkYXRhID0gJ0Z1bmN0aW9uJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBkYXRhID0gaW5pdGlhbGl6ZXIuZnJvbS5kYXRhOwogICAgICB9CiAgICAgIGRvdCArPSAiICAgIGRhdGEiICsgaWQgKyAiIFtsYWJlbD1cIiciICsgZGF0YSArICInXCIgc2hhcGU9cGxhaW50ZXh0XVxuIjsKICAgICAgZG90ICs9ICIgICAgZGF0YSIgKyBpZCArICIgLT4gIiArIChjbGVhbklEKGluaXRpYWxpemVyLnRvLm5vZGUpKSArICJbaGVhZGxhYmVsPSIgKyAoY2xlYW5Qb3J0KGluaXRpYWxpemVyLnRvLnBvcnQpKSArICIgbGFiZWxmb250Y29sb3I9Ymx1ZSBsYWJlbGZvbnRzaXplPTguMF1cbiI7CiAgICB9CiAgICBfcmVmMiA9IHRoaXMuZWRnZXM7CiAgICBmb3IgKF9rID0gMCwgX2xlbjIgPSBfcmVmMi5sZW5ndGg7IF9rIDwgX2xlbjI7IF9rKyspIHsKICAgICAgZWRnZSA9IF9yZWYyW19rXTsKICAgICAgZG90ICs9ICIgICAgIiArIChjbGVhbklEKGVkZ2UuZnJvbS5ub2RlKSkgKyAiIC0+ICIgKyAoY2xlYW5JRChlZGdlLnRvLm5vZGUpKSArICJbdGFpbGxhYmVsPSIgKyAoY2xlYW5Qb3J0KGVkZ2UuZnJvbS5wb3J0KSkgKyAiIGhlYWRsYWJlbD0iICsgKGNsZWFuUG9ydChlZGdlLnRvLnBvcnQpKSArICIgbGFiZWxmb250Y29sb3I9Ymx1ZSBsYWJlbGZvbnRzaXplPTguMF1cbiI7CiAgICB9CiAgICBkb3QgKz0gIn0iOwogICAgcmV0dXJuIGRvdDsKICB9OwoKICBHcmFwaC5wcm90b3R5cGUudG9ZVU1MID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZWRnZSwgaW5pdGlhbGl6ZXIsIHl1bWwsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYsIF9yZWYxOwogICAgeXVtbCA9IFtdOwogICAgX3JlZiA9IHRoaXMuaW5pdGlhbGl6ZXJzOwogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgIGluaXRpYWxpemVyID0gX3JlZltfaV07CiAgICAgIHl1bWwucHVzaCgiKHN0YXJ0KVsiICsgaW5pdGlhbGl6ZXIudG8ucG9ydCArICJdLT4oIiArIGluaXRpYWxpemVyLnRvLm5vZGUgKyAiKSIpOwogICAgfQogICAgX3JlZjEgPSB0aGlzLmVkZ2VzOwogICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjEubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgIGVkZ2UgPSBfcmVmMVtfal07CiAgICAgIHl1bWwucHVzaCgiKCIgKyBlZGdlLmZyb20ubm9kZSArICIpWyIgKyBlZGdlLmZyb20ucG9ydCArICJdLT4oIiArIGVkZ2UudG8ubm9kZSArICIpIik7CiAgICB9CiAgICByZXR1cm4geXVtbC5qb2luKCIsIik7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbm5lY3Rpb24sIGVkZ2UsIGV4cG9ydGVkLCBleHBvcnRlZERhdGEsIGluaXRpYWxpemVyLCBqc29uLCBub2RlLCBwcm9wZXJ0eSwgdmFsdWUsIF9pLCBfaiwgX2ssIF9sLCBfbGVuLCBfbGVuMSwgX2xlbjIsIF9sZW4zLCBfcmVmLCBfcmVmMSwgX3JlZjIsIF9yZWYzLCBfcmVmNDsKICAgIGpzb24gPSB7CiAgICAgIHByb3BlcnRpZXM6IHt9LAogICAgICBleHBvcnRzOiBbXSwKICAgICAgcHJvY2Vzc2VzOiB7fSwKICAgICAgY29ubmVjdGlvbnM6IFtdCiAgICB9OwogICAgX3JlZiA9IHRoaXMucHJvcGVydGllczsKICAgIGZvciAocHJvcGVydHkgaW4gX3JlZikgewogICAgICB2YWx1ZSA9IF9yZWZbcHJvcGVydHldOwogICAgICBqc29uLnByb3BlcnRpZXNbcHJvcGVydHldID0gdmFsdWU7CiAgICB9CiAgICBpZiAodGhpcy5uYW1lKSB7CiAgICAgIGpzb24ucHJvcGVydGllcy5uYW1lID0gdGhpcy5uYW1lOwogICAgfQogICAgX3JlZjEgPSB0aGlzLmV4cG9ydHM7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYxLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgIGV4cG9ydGVkID0gX3JlZjFbX2ldOwogICAgICBleHBvcnRlZERhdGEgPSB7CiAgICAgICAgInByaXZhdGUiOiBleHBvcnRlZFsicHJpdmF0ZSJdLAogICAgICAgICJwdWJsaWMiOiBleHBvcnRlZFsicHVibGljIl0KICAgICAgfTsKICAgICAgaWYgKGV4cG9ydGVkLm1ldGFkYXRhKSB7CiAgICAgICAgZXhwb3J0ZWREYXRhLm1ldGFkYXRhID0gZXhwb3J0ZWQubWV0YWRhdGE7CiAgICAgIH0KICAgICAganNvbi5leHBvcnRzLnB1c2goZXhwb3J0ZWREYXRhKTsKICAgIH0KICAgIF9yZWYyID0gdGhpcy5ub2RlczsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYyLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICBub2RlID0gX3JlZjJbX2pdOwogICAgICBqc29uLnByb2Nlc3Nlc1tub2RlLmlkXSA9IHsKICAgICAgICBjb21wb25lbnQ6IG5vZGUuY29tcG9uZW50CiAgICAgIH07CiAgICAgIGlmIChub2RlLm1ldGFkYXRhKSB7CiAgICAgICAganNvbi5wcm9jZXNzZXNbbm9kZS5pZF0ubWV0YWRhdGEgPSBub2RlLm1ldGFkYXRhOwogICAgICB9CiAgICB9CiAgICBfcmVmMyA9IHRoaXMuZWRnZXM7CiAgICBmb3IgKF9rID0gMCwgX2xlbjIgPSBfcmVmMy5sZW5ndGg7IF9rIDwgX2xlbjI7IF9rKyspIHsKICAgICAgZWRnZSA9IF9yZWYzW19rXTsKICAgICAgY29ubmVjdGlvbiA9IHsKICAgICAgICBzcmM6IHsKICAgICAgICAgIHByb2Nlc3M6IGVkZ2UuZnJvbS5ub2RlLAogICAgICAgICAgcG9ydDogZWRnZS5mcm9tLnBvcnQKICAgICAgICB9LAogICAgICAgIHRndDogewogICAgICAgICAgcHJvY2VzczogZWRnZS50by5ub2RlLAogICAgICAgICAgcG9ydDogZWRnZS50by5wb3J0CiAgICAgICAgfQogICAgICB9OwogICAgICBpZiAoT2JqZWN0LmtleXMoZWRnZS5tZXRhZGF0YSkubGVuZ3RoKSB7CiAgICAgICAgY29ubmVjdGlvbi5tZXRhZGF0YSA9IGVkZ2UubWV0YWRhdGE7CiAgICAgIH0KICAgICAganNvbi5jb25uZWN0aW9ucy5wdXNoKGNvbm5lY3Rpb24pOwogICAgfQogICAgX3JlZjQgPSB0aGlzLmluaXRpYWxpemVyczsKICAgIGZvciAoX2wgPSAwLCBfbGVuMyA9IF9yZWY0Lmxlbmd0aDsgX2wgPCBfbGVuMzsgX2wrKykgewogICAgICBpbml0aWFsaXplciA9IF9yZWY0W19sXTsKICAgICAganNvbi5jb25uZWN0aW9ucy5wdXNoKHsKICAgICAgICBkYXRhOiBpbml0aWFsaXplci5mcm9tLmRhdGEsCiAgICAgICAgdGd0OiB7CiAgICAgICAgICBwcm9jZXNzOiBpbml0aWFsaXplci50by5ub2RlLAogICAgICAgICAgcG9ydDogaW5pdGlhbGl6ZXIudG8ucG9ydAogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4ganNvbjsKICB9OwoKICBHcmFwaC5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uKGZpbGUsIHN1Y2Nlc3MpIHsKICAgIHZhciBqc29uOwogICAganNvbiA9IEpTT04uc3RyaW5naWZ5KHRoaXMudG9KU09OKCksIG51bGwsIDQpOwogICAgcmV0dXJuIHJlcXVpcmUoJ2ZzJykud3JpdGVGaWxlKCIiICsgZmlsZSArICIuanNvbiIsIGpzb24sICJ1dGYtOCIsIGZ1bmN0aW9uKGVyciwgZGF0YSkgewogICAgICBpZiAoZXJyKSB7CiAgICAgICAgdGhyb3cgZXJyOwogICAgICB9CiAgICAgIHJldHVybiBzdWNjZXNzKGZpbGUpOwogICAgfSk7CiAgfTsKCiAgcmV0dXJuIEdyYXBoOwoKfSkoRXZlbnRFbWl0dGVyKTsKCmV4cG9ydHMuR3JhcGggPSBHcmFwaDsKCmV4cG9ydHMuY3JlYXRlR3JhcGggPSBmdW5jdGlvbihuYW1lKSB7CiAgcmV0dXJuIG5ldyBHcmFwaChuYW1lKTsKfTsKCmV4cG9ydHMubG9hZEpTT04gPSBmdW5jdGlvbihkZWZpbml0aW9uLCBzdWNjZXNzKSB7CiAgdmFyIGNvbm4sIGRlZiwgZXhwb3J0ZWQsIGdyYXBoLCBpZCwgbWV0YWRhdGEsIHByb3BlcnR5LCB2YWx1ZSwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZiwgX3JlZjEsIF9yZWYyLCBfcmVmMzsKICBpZiAoIWRlZmluaXRpb24ucHJvcGVydGllcykgewogICAgZGVmaW5pdGlvbi5wcm9wZXJ0aWVzID0ge307CiAgfQogIGlmICghZGVmaW5pdGlvbi5wcm9jZXNzZXMpIHsKICAgIGRlZmluaXRpb24ucHJvY2Vzc2VzID0ge307CiAgfQogIGlmICghZGVmaW5pdGlvbi5jb25uZWN0aW9ucykgewogICAgZGVmaW5pdGlvbi5jb25uZWN0aW9ucyA9IFtdOwogIH0KICBncmFwaCA9IG5ldyBHcmFwaChkZWZpbml0aW9uLnByb3BlcnRpZXMubmFtZSk7CiAgX3JlZiA9IGRlZmluaXRpb24ucHJvcGVydGllczsKICBmb3IgKHByb3BlcnR5IGluIF9yZWYpIHsKICAgIHZhbHVlID0gX3JlZltwcm9wZXJ0eV07CiAgICBpZiAocHJvcGVydHkgPT09ICduYW1lJykgewogICAgICBjb250aW51ZTsKICAgIH0KICAgIGdyYXBoLnByb3BlcnRpZXNbcHJvcGVydHldID0gdmFsdWU7CiAgfQogIF9yZWYxID0gZGVmaW5pdGlvbi5wcm9jZXNzZXM7CiAgZm9yIChpZCBpbiBfcmVmMSkgewogICAgZGVmID0gX3JlZjFbaWRdOwogICAgaWYgKCFkZWYubWV0YWRhdGEpIHsKICAgICAgZGVmLm1ldGFkYXRhID0ge307CiAgICB9CiAgICBncmFwaC5hZGROb2RlKGlkLCBkZWYuY29tcG9uZW50LCBkZWYubWV0YWRhdGEpOwogIH0KICBfcmVmMiA9IGRlZmluaXRpb24uY29ubmVjdGlvbnM7CiAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgY29ubiA9IF9yZWYyW19pXTsKICAgIGlmIChjb25uLmRhdGEgIT09IHZvaWQgMCkgewogICAgICBncmFwaC5hZGRJbml0aWFsKGNvbm4uZGF0YSwgY29ubi50Z3QucHJvY2VzcywgY29ubi50Z3QucG9ydC50b0xvd2VyQ2FzZSgpKTsKICAgICAgY29udGludWU7CiAgICB9CiAgICBtZXRhZGF0YSA9IGNvbm4ubWV0YWRhdGEgPyBjb25uLm1ldGFkYXRhIDoge307CiAgICBncmFwaC5hZGRFZGdlKGNvbm4uc3JjLnByb2Nlc3MsIGNvbm4uc3JjLnBvcnQudG9Mb3dlckNhc2UoKSwgY29ubi50Z3QucHJvY2VzcywgY29ubi50Z3QucG9ydC50b0xvd2VyQ2FzZSgpLCBtZXRhZGF0YSk7CiAgfQogIGlmIChkZWZpbml0aW9uLmV4cG9ydHMpIHsKICAgIF9yZWYzID0gZGVmaW5pdGlvbi5leHBvcnRzOwogICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjMubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgIGV4cG9ydGVkID0gX3JlZjNbX2pdOwogICAgICBncmFwaC5hZGRFeHBvcnQoZXhwb3J0ZWRbInByaXZhdGUiXSwgZXhwb3J0ZWRbInB1YmxpYyJdLCBleHBvcnRlZC5tZXRhZGF0YSk7CiAgICB9CiAgfQogIHJldHVybiBzdWNjZXNzKGdyYXBoKTsKfTsKCmV4cG9ydHMubG9hZEZCUCA9IGZ1bmN0aW9uKGZicERhdGEsIHN1Y2Nlc3MpIHsKICB2YXIgZGVmaW5pdGlvbjsKICBkZWZpbml0aW9uID0gcmVxdWlyZSgnZmJwJykucGFyc2UoZmJwRGF0YSk7CiAgcmV0dXJuIGV4cG9ydHMubG9hZEpTT04oZGVmaW5pdGlvbiwgc3VjY2Vzcyk7Cn07CgpleHBvcnRzLmxvYWRGaWxlID0gZnVuY3Rpb24oZmlsZSwgc3VjY2VzcykgewogIHZhciBkZWZpbml0aW9uLCBlOwogIGlmICghKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmV4ZWNQYXRoICYmIHByb2Nlc3MuZXhlY1BhdGguaW5kZXhPZignbm9kZScpICE9PSAtMSkpIHsKICAgIHRyeSB7CiAgICAgIGRlZmluaXRpb24gPSByZXF1aXJlKGZpbGUpOwogICAgICBleHBvcnRzLmxvYWRKU09OKGRlZmluaXRpb24sIHN1Y2Nlc3MpOwogICAgfSBjYXRjaCAoX2Vycm9yKSB7CiAgICAgIGUgPSBfZXJyb3I7CiAgICAgIHRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGxvYWQgZ3JhcGggIiArIGZpbGUgKyAiOiAiICsgZS5tZXNzYWdlKTsKICAgIH0KICAgIHJldHVybjsKICB9CiAgcmV0dXJuIHJlcXVpcmUoJ2ZzJykucmVhZEZpbGUoZmlsZSwgInV0Zi04IiwgZnVuY3Rpb24oZXJyLCBkYXRhKSB7CiAgICBpZiAoZXJyKSB7CiAgICAgIHRocm93IGVycjsKICAgIH0KICAgIGlmIChmaWxlLnNwbGl0KCcuJykucG9wKCkgPT09ICdmYnAnKSB7CiAgICAgIHJldHVybiBleHBvcnRzLmxvYWRGQlAoZGF0YSwgc3VjY2Vzcyk7CiAgICB9CiAgICBkZWZpbml0aW9uID0gSlNPTi5wYXJzZShkYXRhKTsKICAgIHJldHVybiBleHBvcnRzLmxvYWRKU09OKGRlZmluaXRpb24sIHN1Y2Nlc3MpOwogIH0pOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRXZlbnRFbWl0dGVyLCBJbnRlcm5hbFNvY2tldCwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCmlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5leGVjUGF0aCAmJiBwcm9jZXNzLmV4ZWNQYXRoLmluZGV4T2YoJ25vZGUnKSAhPT0gLTEpIHsKICBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7Cn0gZWxzZSB7CiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpOwp9CgpJbnRlcm5hbFNvY2tldCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoSW50ZXJuYWxTb2NrZXQsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEludGVybmFsU29ja2V0KCkgewogICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgIHRoaXMuZ3JvdXBzID0gW107CiAgfQoKICBJbnRlcm5hbFNvY2tldC5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMuY29ubmVjdGVkID0gdHJ1ZTsKICAgIHJldHVybiB0aGlzLmVtaXQoJ2Nvbm5lY3QnLCB0aGlzKTsKICB9OwoKICBJbnRlcm5hbFNvY2tldC5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uKCkgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlOwogICAgcmV0dXJuIHRoaXMuZW1pdCgnZGlzY29ubmVjdCcsIHRoaXMpOwogIH07CgogIEludGVybmFsU29ja2V0LnByb3RvdHlwZS5pc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuY29ubmVjdGVkOwogIH07CgogIEludGVybmFsU29ja2V0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkgewogICAgICB0aGlzLmNvbm5lY3QoKTsKICAgIH0KICAgIHJldHVybiB0aGlzLmVtaXQoJ2RhdGEnLCBkYXRhKTsKICB9OwoKICBJbnRlcm5hbFNvY2tldC5wcm90b3R5cGUuYmVnaW5Hcm91cCA9IGZ1bmN0aW9uKGdyb3VwKSB7CiAgICB0aGlzLmdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgIHJldHVybiB0aGlzLmVtaXQoJ2JlZ2luZ3JvdXAnLCBncm91cCk7CiAgfTsKCiAgSW50ZXJuYWxTb2NrZXQucHJvdG90eXBlLmVuZEdyb3VwID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5lbWl0KCdlbmRncm91cCcsIHRoaXMuZ3JvdXBzLnBvcCgpKTsKICB9OwoKICBJbnRlcm5hbFNvY2tldC5wcm90b3R5cGUuZ2V0SWQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBmcm9tU3RyLCB0b1N0cjsKICAgIGZyb21TdHIgPSBmdW5jdGlvbihmcm9tKSB7CiAgICAgIHJldHVybiAiIiArIGZyb20ucHJvY2Vzcy5pZCArICIoKSAiICsgKGZyb20ucG9ydC50b1VwcGVyQ2FzZSgpKTsKICAgIH07CiAgICB0b1N0ciA9IGZ1bmN0aW9uKHRvKSB7CiAgICAgIHJldHVybiAiIiArICh0by5wb3J0LnRvVXBwZXJDYXNlKCkpICsgIiAiICsgdG8ucHJvY2Vzcy5pZCArICIoKSI7CiAgICB9OwogICAgaWYgKCEodGhpcy5mcm9tIHx8IHRoaXMudG8pKSB7CiAgICAgIHJldHVybiAiVU5ERUZJTkVEIjsKICAgIH0KICAgIGlmICh0aGlzLmZyb20gJiYgIXRoaXMudG8pIHsKICAgICAgcmV0dXJuICIiICsgKGZyb21TdHIodGhpcy5mcm9tKSkgKyAiIC0+IEFOT04iOwogICAgfQogICAgaWYgKCF0aGlzLmZyb20pIHsKICAgICAgcmV0dXJuICJEQVRBIC0+ICIgKyAodG9TdHIodGhpcy50bykpOwogICAgfQogICAgcmV0dXJuICIiICsgKGZyb21TdHIodGhpcy5mcm9tKSkgKyAiIC0+ICIgKyAodG9TdHIodGhpcy50bykpOwogIH07CgogIHJldHVybiBJbnRlcm5hbFNvY2tldDsKCn0pKEV2ZW50RW1pdHRlcik7CgpleHBvcnRzLkludGVybmFsU29ja2V0ID0gSW50ZXJuYWxTb2NrZXQ7CgpleHBvcnRzLmNyZWF0ZVNvY2tldCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgSW50ZXJuYWxTb2NrZXQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEV2ZW50RW1pdHRlciwgUG9ydCwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCmlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5leGVjUGF0aCAmJiBwcm9jZXNzLmV4ZWNQYXRoLmluZGV4T2YoJ25vZGUnKSAhPT0gLTEpIHsKICBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7Cn0gZWxzZSB7CiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpOwp9CgpQb3J0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhQb3J0LCBfc3VwZXIpOwoKICBmdW5jdGlvbiBQb3J0KHR5cGUpIHsKICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICBpZiAoIXRoaXMudHlwZSkgewogICAgICB0aGlzLnR5cGUgPSAnYWxsJzsKICAgIH0KICAgIHRoaXMuc29ja2V0ID0gbnVsbDsKICAgIHRoaXMuZnJvbSA9IG51bGw7CiAgICB0aGlzLm5vZGUgPSBudWxsOwogICAgdGhpcy5uYW1lID0gbnVsbDsKICB9CgogIFBvcnQucHJvdG90eXBlLmdldElkID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoISh0aGlzLm5vZGUgJiYgdGhpcy5uYW1lKSkgewogICAgICByZXR1cm4gJ1BvcnQnOwogICAgfQogICAgcmV0dXJuICIiICsgdGhpcy5ub2RlICsgIiAiICsgKHRoaXMubmFtZS50b1VwcGVyQ2FzZSgpKTsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5hdHRhY2ggPSBmdW5jdGlvbihzb2NrZXQpIHsKICAgIGlmICh0aGlzLmlzQXR0YWNoZWQoKSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIiIgKyAodGhpcy5nZXRJZCgpKSArICI6IFNvY2tldCBhbHJlYWR5IGF0dGFjaGVkICIgKyAodGhpcy5zb2NrZXQuZ2V0SWQoKSkgKyAiIC0gIiArIChzb2NrZXQuZ2V0SWQoKSkpOwogICAgfQogICAgdGhpcy5zb2NrZXQgPSBzb2NrZXQ7CiAgICByZXR1cm4gdGhpcy5hdHRhY2hTb2NrZXQoc29ja2V0KTsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5hdHRhY2hTb2NrZXQgPSBmdW5jdGlvbihzb2NrZXQsIGxvY2FsSWQpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBpZiAobG9jYWxJZCA9PSBudWxsKSB7CiAgICAgIGxvY2FsSWQgPSBudWxsOwogICAgfQogICAgdGhpcy5lbWl0KCJhdHRhY2giLCBzb2NrZXQpOwogICAgdGhpcy5mcm9tID0gc29ja2V0LmZyb207CiAgICBpZiAoc29ja2V0LnNldE1heExpc3RlbmVycykgewogICAgICBzb2NrZXQuc2V0TWF4TGlzdGVuZXJzKDApOwogICAgfQogICAgc29ja2V0Lm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5lbWl0KCJjb25uZWN0Iiwgc29ja2V0LCBsb2NhbElkKTsKICAgIH0pOwogICAgc29ja2V0Lm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmVtaXQoImJlZ2luZ3JvdXAiLCBncm91cCwgbG9jYWxJZCk7CiAgICB9KTsKICAgIHNvY2tldC5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmVtaXQoImRhdGEiLCBkYXRhLCBsb2NhbElkKTsKICAgIH0pOwogICAgc29ja2V0Lm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5lbWl0KCJlbmRncm91cCIsIGdyb3VwLCBsb2NhbElkKTsKICAgIH0pOwogICAgcmV0dXJuIHNvY2tldC5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZW1pdCgiZGlzY29ubmVjdCIsIHNvY2tldCwgbG9jYWxJZCk7CiAgICB9KTsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMuc29ja2V0KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiIiArICh0aGlzLmdldElkKCkpICsgIjogTm8gY29ubmVjdGlvbiBhdmFpbGFibGUiKTsKICAgIH0KICAgIHJldHVybiB0aGlzLnNvY2tldC5jb25uZWN0KCk7CiAgfTsKCiAgUG9ydC5wcm90b3R5cGUuYmVnaW5Hcm91cCA9IGZ1bmN0aW9uKGdyb3VwKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgaWYgKCF0aGlzLnNvY2tldCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIiIgKyAodGhpcy5nZXRJZCgpKSArICI6IE5vIGNvbm5lY3Rpb24gYXZhaWxhYmxlIik7CiAgICB9CiAgICBpZiAodGhpcy5pc0Nvbm5lY3RlZCgpKSB7CiAgICAgIHJldHVybiB0aGlzLnNvY2tldC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0KICAgIHRoaXMuc29ja2V0Lm9uY2UoImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLnNvY2tldC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgcmV0dXJuIHRoaXMuc29ja2V0LmNvbm5lY3QoKTsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIGlmICghdGhpcy5zb2NrZXQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCIiICsgKHRoaXMuZ2V0SWQoKSkgKyAiOiBObyBjb25uZWN0aW9uIGF2YWlsYWJsZSIpOwogICAgfQogICAgaWYgKHRoaXMuaXNDb25uZWN0ZWQoKSkgewogICAgICByZXR1cm4gdGhpcy5zb2NrZXQuc2VuZChkYXRhKTsKICAgIH0KICAgIHRoaXMuc29ja2V0Lm9uY2UoImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLnNvY2tldC5zZW5kKGRhdGEpOwogICAgfSk7CiAgICByZXR1cm4gdGhpcy5zb2NrZXQuY29ubmVjdCgpOwogIH07CgogIFBvcnQucHJvdG90eXBlLmVuZEdyb3VwID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMuc29ja2V0KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiIiArICh0aGlzLmdldElkKCkpICsgIjogTm8gY29ubmVjdGlvbiBhdmFpbGFibGUiKTsKICAgIH0KICAgIHJldHVybiB0aGlzLnNvY2tldC5lbmRHcm91cCgpOwogIH07CgogIFBvcnQucHJvdG90eXBlLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5zb2NrZXQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCIiICsgKHRoaXMuZ2V0SWQoKSkgKyAiOiBObyBjb25uZWN0aW9uIGF2YWlsYWJsZSIpOwogICAgfQogICAgcmV0dXJuIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoKTsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5kZXRhY2ggPSBmdW5jdGlvbihzb2NrZXQpIHsKICAgIGlmICghdGhpcy5pc0F0dGFjaGVkKHNvY2tldCkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5lbWl0KCJkZXRhY2giLCB0aGlzLnNvY2tldCk7CiAgICB0aGlzLmZyb20gPSBudWxsOwogICAgcmV0dXJuIHRoaXMuc29ja2V0ID0gbnVsbDsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5pc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKCkgewogICAgaWYgKCF0aGlzLnNvY2tldCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gdGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKTsKICB9OwoKICBQb3J0LnByb3RvdHlwZS5pc0F0dGFjaGVkID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5zb2NrZXQgIT09IG51bGw7CiAgfTsKCiAgUG9ydC5wcm90b3R5cGUuY2FuQXR0YWNoID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5pc0F0dGFjaGVkKCkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgcmV0dXJuIFBvcnQ7Cgp9KShFdmVudEVtaXR0ZXIpOwoKZXhwb3J0cy5Qb3J0ID0gUG9ydDsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBBcnJheVBvcnQsIHBvcnQsCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpwb3J0ID0gcmVxdWlyZSgiLi9Qb3J0Iik7CgpBcnJheVBvcnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEFycmF5UG9ydCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gQXJyYXlQb3J0KHR5cGUpIHsKICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICBpZiAoIXRoaXMudHlwZSkgewogICAgICB0aGlzLnR5cGUgPSAnYWxsJzsKICAgIH0KICAgIHRoaXMuc29ja2V0cyA9IFtdOwogIH0KCiAgQXJyYXlQb3J0LnByb3RvdHlwZS5hdHRhY2ggPSBmdW5jdGlvbihzb2NrZXQpIHsKICAgIHRoaXMuc29ja2V0cy5wdXNoKHNvY2tldCk7CiAgICByZXR1cm4gdGhpcy5hdHRhY2hTb2NrZXQoc29ja2V0LCB0aGlzLnNvY2tldHMubGVuZ3RoIC0gMSk7CiAgfTsKCiAgQXJyYXlQb3J0LnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24oc29ja2V0SWQpIHsKICAgIGlmIChzb2NrZXRJZCA9PSBudWxsKSB7CiAgICAgIHNvY2tldElkID0gbnVsbDsKICAgIH0KICAgIGlmIChzb2NrZXRJZCA9PT0gbnVsbCkgewogICAgICBpZiAoIXRoaXMuc29ja2V0cy5sZW5ndGgpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIiIgKyAodGhpcy5nZXRJZCgpKSArICI6IE5vIGNvbm5lY3Rpb25zIGF2YWlsYWJsZSIpOwogICAgICB9CiAgICAgIHRoaXMuc29ja2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHNvY2tldCkgewogICAgICAgIHJldHVybiBzb2NrZXQuY29ubmVjdCgpOwogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCF0aGlzLnNvY2tldHNbc29ja2V0SWRdKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiIiArICh0aGlzLmdldElkKCkpICsgIjogTm8gY29ubmVjdGlvbiAnIiArIHNvY2tldElkICsgIicgYXZhaWxhYmxlIik7CiAgICB9CiAgICByZXR1cm4gdGhpcy5zb2NrZXRzW3NvY2tldElkXS5jb25uZWN0KCk7CiAgfTsKCiAgQXJyYXlQb3J0LnByb3RvdHlwZS5iZWdpbkdyb3VwID0gZnVuY3Rpb24oZ3JvdXAsIHNvY2tldElkKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgaWYgKHNvY2tldElkID09IG51bGwpIHsKICAgICAgc29ja2V0SWQgPSBudWxsOwogICAgfQogICAgaWYgKHNvY2tldElkID09PSBudWxsKSB7CiAgICAgIGlmICghdGhpcy5zb2NrZXRzLmxlbmd0aCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiIiArICh0aGlzLmdldElkKCkpICsgIjogTm8gY29ubmVjdGlvbnMgYXZhaWxhYmxlIik7CiAgICAgIH0KICAgICAgdGhpcy5zb2NrZXRzLmZvckVhY2goZnVuY3Rpb24oc29ja2V0LCBpbmRleCkgewogICAgICAgIHJldHVybiBfdGhpcy5iZWdpbkdyb3VwKGdyb3VwLCBpbmRleCk7CiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoIXRoaXMuc29ja2V0c1tzb2NrZXRJZF0pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCIiICsgKHRoaXMuZ2V0SWQoKSkgKyAiOiBObyBjb25uZWN0aW9uICciICsgc29ja2V0SWQgKyAiJyBhdmFpbGFibGUiKTsKICAgIH0KICAgIGlmICh0aGlzLmlzQ29ubmVjdGVkKHNvY2tldElkKSkgewogICAgICByZXR1cm4gdGhpcy5zb2NrZXRzW3NvY2tldElkXS5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0KICAgIHRoaXMuc29ja2V0c1tzb2NrZXRJZF0ub25jZSgiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuc29ja2V0c1tzb2NrZXRJZF0uYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHJldHVybiB0aGlzLnNvY2tldHNbc29ja2V0SWRdLmNvbm5lY3QoKTsKICB9OwoKICBBcnJheVBvcnQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihkYXRhLCBzb2NrZXRJZCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIGlmIChzb2NrZXRJZCA9PSBudWxsKSB7CiAgICAgIHNvY2tldElkID0gbnVsbDsKICAgIH0KICAgIGlmIChzb2NrZXRJZCA9PT0gbnVsbCkgewogICAgICBpZiAoIXRoaXMuc29ja2V0cy5sZW5ndGgpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIiIgKyAodGhpcy5nZXRJZCgpKSArICI6IE5vIGNvbm5lY3Rpb25zIGF2YWlsYWJsZSIpOwogICAgICB9CiAgICAgIHRoaXMuc29ja2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHNvY2tldCwgaW5kZXgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuc2VuZChkYXRhLCBpbmRleCk7CiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoIXRoaXMuc29ja2V0c1tzb2NrZXRJZF0pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCIiICsgKHRoaXMuZ2V0SWQoKSkgKyAiOiBObyBjb25uZWN0aW9uICciICsgc29ja2V0SWQgKyAiJyBhdmFpbGFibGUiKTsKICAgIH0KICAgIGlmICh0aGlzLmlzQ29ubmVjdGVkKHNvY2tldElkKSkgewogICAgICByZXR1cm4gdGhpcy5zb2NrZXRzW3NvY2tldElkXS5zZW5kKGRhdGEpOwogICAgfQogICAgdGhpcy5zb2NrZXRzW3NvY2tldElkXS5vbmNlKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5zb2NrZXRzW3NvY2tldElkXS5zZW5kKGRhdGEpOwogICAgfSk7CiAgICByZXR1cm4gdGhpcy5zb2NrZXRzW3NvY2tldElkXS5jb25uZWN0KCk7CiAgfTsKCiAgQXJyYXlQb3J0LnByb3RvdHlwZS5lbmRHcm91cCA9IGZ1bmN0aW9uKHNvY2tldElkKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgaWYgKHNvY2tldElkID09IG51bGwpIHsKICAgICAgc29ja2V0SWQgPSBudWxsOwogICAgfQogICAgaWYgKHNvY2tldElkID09PSBudWxsKSB7CiAgICAgIGlmICghdGhpcy5zb2NrZXRzLmxlbmd0aCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiIiArICh0aGlzLmdldElkKCkpICsgIjogTm8gY29ubmVjdGlvbnMgYXZhaWxhYmxlIik7CiAgICAgIH0KICAgICAgdGhpcy5zb2NrZXRzLmZvckVhY2goZnVuY3Rpb24oc29ja2V0LCBpbmRleCkgewogICAgICAgIHJldHVybiBfdGhpcy5lbmRHcm91cChpbmRleCk7CiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoIXRoaXMuc29ja2V0c1tzb2NrZXRJZF0pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCIiICsgKHRoaXMuZ2V0SWQoKSkgKyAiOiBObyBjb25uZWN0aW9uICciICsgc29ja2V0SWQgKyAiJyBhdmFpbGFibGUiKTsKICAgIH0KICAgIHJldHVybiB0aGlzLnNvY2tldHNbc29ja2V0SWRdLmVuZEdyb3VwKCk7CiAgfTsKCiAgQXJyYXlQb3J0LnByb3RvdHlwZS5kaXNjb25uZWN0ID0gZnVuY3Rpb24oc29ja2V0SWQpIHsKICAgIHZhciBzb2NrZXQsIF9pLCBfbGVuLCBfcmVmOwogICAgaWYgKHNvY2tldElkID09IG51bGwpIHsKICAgICAgc29ja2V0SWQgPSBudWxsOwogICAgfQogICAgaWYgKHNvY2tldElkID09PSBudWxsKSB7CiAgICAgIGlmICghdGhpcy5zb2NrZXRzLmxlbmd0aCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiIiArICh0aGlzLmdldElkKCkpICsgIjogTm8gY29ubmVjdGlvbnMgYXZhaWxhYmxlIik7CiAgICAgIH0KICAgICAgX3JlZiA9IHRoaXMuc29ja2V0czsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgc29ja2V0ID0gX3JlZltfaV07CiAgICAgICAgc29ja2V0LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoIXRoaXMuc29ja2V0c1tzb2NrZXRJZF0pIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgcmV0dXJuIHRoaXMuc29ja2V0c1tzb2NrZXRJZF0uZGlzY29ubmVjdCgpOwogIH07CgogIEFycmF5UG9ydC5wcm90b3R5cGUuZGV0YWNoID0gZnVuY3Rpb24oc29ja2V0KSB7CiAgICBpZiAodGhpcy5zb2NrZXRzLmluZGV4T2Yoc29ja2V0KSA9PT0gLTEpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5zb2NrZXRzLnNwbGljZSh0aGlzLnNvY2tldHMuaW5kZXhPZihzb2NrZXQpLCAxKTsKICAgIHJldHVybiB0aGlzLmVtaXQoImRldGFjaCIsIHNvY2tldCk7CiAgfTsKCiAgQXJyYXlQb3J0LnByb3RvdHlwZS5pc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKHNvY2tldElkKSB7CiAgICB2YXIgY29ubmVjdGVkLAogICAgICBfdGhpcyA9IHRoaXM7CiAgICBpZiAoc29ja2V0SWQgPT0gbnVsbCkgewogICAgICBzb2NrZXRJZCA9IG51bGw7CiAgICB9CiAgICBpZiAoc29ja2V0SWQgPT09IG51bGwpIHsKICAgICAgY29ubmVjdGVkID0gZmFsc2U7CiAgICAgIHRoaXMuc29ja2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHNvY2tldCkgewogICAgICAgIGlmIChzb2NrZXQuaXNDb25uZWN0ZWQoKSkgewogICAgICAgICAgcmV0dXJuIGNvbm5lY3RlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGNvbm5lY3RlZDsKICAgIH0KICAgIGlmICghdGhpcy5zb2NrZXRzW3NvY2tldElkXSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gdGhpcy5zb2NrZXRzW3NvY2tldElkXS5pc0Nvbm5lY3RlZCgpOwogIH07CgogIEFycmF5UG9ydC5wcm90b3R5cGUuaXNBdHRhY2hlZCA9IGZ1bmN0aW9uKHNvY2tldElkKSB7CiAgICBpZiAoc29ja2V0SWQgPT09IHZvaWQgMCkgewogICAgICBpZiAodGhpcy5zb2NrZXRzLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAodGhpcy5zb2NrZXRzW3NvY2tldElkXSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9OwoKICBBcnJheVBvcnQucHJvdG90eXBlLmNhbkF0dGFjaCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgcmV0dXJuIEFycmF5UG9ydDsKCn0pKHBvcnQuUG9ydCk7CgpleHBvcnRzLkFycmF5UG9ydCA9IEFycmF5UG9ydDsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgX3JlZiwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCmlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5leGVjUGF0aCAmJiBwcm9jZXNzLmV4ZWNQYXRoLmluZGV4T2YoJ25vZGUnKSAhPT0gLTEpIHsKICBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7Cn0gZWxzZSB7CiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpOwp9CgpDb21wb25lbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENvbXBvbmVudCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gQ29tcG9uZW50KCkgewogICAgX3JlZiA9IENvbXBvbmVudC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIHJldHVybiBfcmVmOwogIH0KCiAgQ29tcG9uZW50LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICcnOwoKICBDb21wb25lbnQucHJvdG90eXBlLmljb24gPSBudWxsOwoKICBDb21wb25lbnQucHJvdG90eXBlLmdldERlc2NyaXB0aW9uID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvbjsKICB9OwoKICBDb21wb25lbnQucHJvdG90eXBlLmlzUmVhZHkgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0cnVlOwogIH07CgogIENvbXBvbmVudC5wcm90b3R5cGUuaXNTdWJncmFwaCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGZhbHNlOwogIH07CgogIENvbXBvbmVudC5wcm90b3R5cGUuc2V0SWNvbiA9IGZ1bmN0aW9uKGljb24pIHsKICAgIHRoaXMuaWNvbiA9IGljb247CiAgICByZXR1cm4gdGhpcy5lbWl0KCdpY29uJywgdGhpcy5pY29uKTsKICB9OwoKICBDb21wb25lbnQucHJvdG90eXBlLmdldEljb24gPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmljb247CiAgfTsKCiAgQ29tcG9uZW50LnByb3RvdHlwZS5zaHV0ZG93biA9IGZ1bmN0aW9uKCkge307CgogIHJldHVybiBDb21wb25lbnQ7Cgp9KShFdmVudEVtaXR0ZXIpOwoKZXhwb3J0cy5Db21wb25lbnQgPSBDb21wb25lbnQ7Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBBc3luY0NvbXBvbmVudCwgY29tcG9uZW50LCBwb3J0LAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKcG9ydCA9IHJlcXVpcmUoIi4vUG9ydCIpOwoKY29tcG9uZW50ID0gcmVxdWlyZSgiLi9Db21wb25lbnQiKTsKCkFzeW5jQ29tcG9uZW50ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhBc3luY0NvbXBvbmVudCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gQXN5bmNDb21wb25lbnQoaW5Qb3J0TmFtZSwgb3V0UG9ydE5hbWUsIGVyclBvcnROYW1lKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnROYW1lID0gaW5Qb3J0TmFtZSAhPSBudWxsID8gaW5Qb3J0TmFtZSA6ICJpbiI7CiAgICB0aGlzLm91dFBvcnROYW1lID0gb3V0UG9ydE5hbWUgIT0gbnVsbCA/IG91dFBvcnROYW1lIDogIm91dCI7CiAgICB0aGlzLmVyclBvcnROYW1lID0gZXJyUG9ydE5hbWUgIT0gbnVsbCA/IGVyclBvcnROYW1lIDogImVycm9yIjsKICAgIGlmICghdGhpcy5pblBvcnRzW3RoaXMuaW5Qb3J0TmFtZV0pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJubyBpblBvcnQgbmFtZWQgJyIgKyB0aGlzLmluUG9ydE5hbWUgKyAiJyIpOwogICAgfQogICAgaWYgKCF0aGlzLm91dFBvcnRzW3RoaXMub3V0UG9ydE5hbWVdKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigibm8gb3V0UG9ydCBuYW1lZCAnIiArIHRoaXMub3V0UG9ydE5hbWUgKyAiJyIpOwogICAgfQogICAgdGhpcy5sb2FkID0gMDsKICAgIHRoaXMucSA9IFtdOwogICAgdGhpcy5vdXRQb3J0cy5sb2FkID0gbmV3IHBvcnQuUG9ydCgpOwogICAgdGhpcy5pblBvcnRzW3RoaXMuaW5Qb3J0TmFtZV0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICBpZiAoX3RoaXMubG9hZCA+IDApIHsKICAgICAgICByZXR1cm4gX3RoaXMucS5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJiZWdpbmdyb3VwIiwKICAgICAgICAgIGRhdGE6IGdyb3VwCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzW190aGlzLm91dFBvcnROYW1lXS5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzW3RoaXMuaW5Qb3J0TmFtZV0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oKSB7CiAgICAgIGlmIChfdGhpcy5sb2FkID4gMCkgewogICAgICAgIHJldHVybiBfdGhpcy5xLnB1c2goewogICAgICAgICAgbmFtZTogImVuZGdyb3VwIgogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0c1tfdGhpcy5vdXRQb3J0TmFtZV0uZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzW3RoaXMuaW5Qb3J0TmFtZV0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF90aGlzLmxvYWQgPiAwKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnEucHVzaCh7CiAgICAgICAgICBuYW1lOiAiZGlzY29ubmVjdCIKICAgICAgICB9KTsKICAgICAgfQogICAgICBfdGhpcy5vdXRQb3J0c1tfdGhpcy5vdXRQb3J0TmFtZV0uZGlzY29ubmVjdCgpOwogICAgICBpZiAoX3RoaXMub3V0UG9ydHMubG9hZC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMubG9hZC5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzW3RoaXMuaW5Qb3J0TmFtZV0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChfdGhpcy5xLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gX3RoaXMucS5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJkYXRhIiwKICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMucHJvY2Vzc0RhdGEoZGF0YSk7CiAgICB9KTsKICB9CgogIEFzeW5jQ29tcG9uZW50LnByb3RvdHlwZS5wcm9jZXNzRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluY3JlbWVudExvYWQoKTsKICAgIHJldHVybiB0aGlzLmRvQXN5bmMoZGF0YSwgZnVuY3Rpb24oZXJyKSB7CiAgICAgIGlmIChlcnIpIHsKICAgICAgICBpZiAoX3RoaXMub3V0UG9ydHNbX3RoaXMuZXJyUG9ydE5hbWVdICYmIF90aGlzLm91dFBvcnRzW190aGlzLmVyclBvcnROYW1lXS5pc0F0dGFjaGVkKCkpIHsKICAgICAgICAgIF90aGlzLm91dFBvcnRzW190aGlzLmVyclBvcnROYW1lXS5zZW5kKGVycik7CiAgICAgICAgICBfdGhpcy5vdXRQb3J0c1tfdGhpcy5lcnJQb3J0TmFtZV0uZGlzY29ubmVjdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5kZWNyZW1lbnRMb2FkKCk7CiAgICB9KTsKICB9OwoKICBBc3luY0NvbXBvbmVudC5wcm90b3R5cGUuaW5jcmVtZW50TG9hZCA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5sb2FkKys7CiAgICBpZiAodGhpcy5vdXRQb3J0cy5sb2FkLmlzQXR0YWNoZWQoKSkgewogICAgICB0aGlzLm91dFBvcnRzLmxvYWQuc2VuZCh0aGlzLmxvYWQpOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMubG9hZC5pc0F0dGFjaGVkKCkpIHsKICAgICAgcmV0dXJuIHRoaXMub3V0UG9ydHMubG9hZC5kaXNjb25uZWN0KCk7CiAgICB9CiAgfTsKCiAgQXN5bmNDb21wb25lbnQucHJvdG90eXBlLmRvQXN5bmMgPSBmdW5jdGlvbihkYXRhLCBjYWxsYmFjaykgewogICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigiQXN5bmNDb21wb25lbnRzIG11c3QgaW1wbGVtZW50IGRvQXN5bmMiKSk7CiAgfTsKCiAgQXN5bmNDb21wb25lbnQucHJvdG90eXBlLmRlY3JlbWVudExvYWQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBpZiAodGhpcy5sb2FkID09PSAwKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigibG9hZCBjYW5ub3QgYmUgbmVnYXRpdmUiKTsKICAgIH0KICAgIHRoaXMubG9hZC0tOwogICAgaWYgKHRoaXMub3V0UG9ydHMubG9hZC5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5sb2FkLnNlbmQodGhpcy5sb2FkKTsKICAgIH0KICAgIGlmICh0aGlzLm91dFBvcnRzLmxvYWQuaXNBdHRhY2hlZCgpKSB7CiAgICAgIHRoaXMub3V0UG9ydHMubG9hZC5kaXNjb25uZWN0KCk7CiAgICB9CiAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZXhlY1BhdGggJiYgcHJvY2Vzcy5leGVjUGF0aC5pbmRleE9mKCdub2RlJykgIT09IC0xKSB7CiAgICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBfdGhpcy5wcm9jZXNzUXVldWUoKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gX3RoaXMucHJvY2Vzc1F1ZXVlKCk7CiAgICAgIH0sIDApOwogICAgfQogIH07CgogIEFzeW5jQ29tcG9uZW50LnByb3RvdHlwZS5wcm9jZXNzUXVldWUgPSBmdW5jdGlvbigpIHsKICAgIHZhciBldmVudCwgcHJvY2Vzc2VkRGF0YTsKICAgIGlmICh0aGlzLmxvYWQgPiAwKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHByb2Nlc3NlZERhdGEgPSBmYWxzZTsKICAgIHdoaWxlICh0aGlzLnEubGVuZ3RoID4gMCkgewogICAgICBldmVudCA9IHRoaXMucVswXTsKICAgICAgc3dpdGNoIChldmVudC5uYW1lKSB7CiAgICAgICAgY2FzZSAiYmVnaW5ncm91cCI6CiAgICAgICAgICBpZiAocHJvY2Vzc2VkRGF0YSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLm91dFBvcnRzW3RoaXMub3V0UG9ydE5hbWVdLmJlZ2luR3JvdXAoZXZlbnQuZGF0YSk7CiAgICAgICAgICB0aGlzLnEuc2hpZnQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImVuZGdyb3VwIjoKICAgICAgICAgIGlmIChwcm9jZXNzZWREYXRhKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMub3V0UG9ydHNbdGhpcy5vdXRQb3J0TmFtZV0uZW5kR3JvdXAoKTsKICAgICAgICAgIHRoaXMucS5zaGlmdCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiZGlzY29ubmVjdCI6CiAgICAgICAgICBpZiAocHJvY2Vzc2VkRGF0YSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLm91dFBvcnRzW3RoaXMub3V0UG9ydE5hbWVdLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgIGlmICh0aGlzLm91dFBvcnRzLmxvYWQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgICAgIHRoaXMub3V0UG9ydHMubG9hZC5kaXNjb25uZWN0KCk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnEuc2hpZnQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImRhdGEiOgogICAgICAgICAgdGhpcy5wcm9jZXNzRGF0YShldmVudC5kYXRhKTsKICAgICAgICAgIHRoaXMucS5zaGlmdCgpOwogICAgICAgICAgcHJvY2Vzc2VkRGF0YSA9IHRydWU7CiAgICAgIH0KICAgIH0KICB9OwoKICByZXR1cm4gQXN5bmNDb21wb25lbnQ7Cgp9KShjb21wb25lbnQuQ29tcG9uZW50KTsKCmV4cG9ydHMuQXN5bmNDb21wb25lbnQgPSBBc3luY0NvbXBvbmVudDsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ29tcG9uZW50LCBQb3J0LCB1dGlsLAogIF9fYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgpDb21wb25lbnQgPSByZXF1aXJlKCIuL0NvbXBvbmVudCIpLkNvbXBvbmVudDsKClBvcnQgPSByZXF1aXJlKCIuL1BvcnQiKS5Qb3J0OwoKaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmV4ZWNQYXRoICYmIHByb2Nlc3MuZXhlY1BhdGguaW5kZXhPZignbm9kZScpICE9PSAtMSkgewogIHV0aWwgPSByZXF1aXJlKCJ1dGlsIik7Cn0gZWxzZSB7CiAgdXRpbCA9IHsKICAgIGluc3BlY3Q6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CiAgfTsKfQoKZXhwb3J0cy5Mb2dnaW5nQ29tcG9uZW50ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhMb2dnaW5nQ29tcG9uZW50LCBfc3VwZXIpOwoKICBmdW5jdGlvbiBMb2dnaW5nQ29tcG9uZW50KCkgewogICAgdGhpcy5zZW5kTG9nID0gX19iaW5kKHRoaXMuc2VuZExvZywgdGhpcyk7CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBsb2c6IG5ldyBQb3J0KCkKICAgIH07CiAgfQoKICBMb2dnaW5nQ29tcG9uZW50LnByb3RvdHlwZS5zZW5kTG9nID0gZnVuY3Rpb24obWVzc2FnZSkgewogICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAib2JqZWN0IikgewogICAgICBtZXNzYWdlLndoZW4gPSBuZXcgRGF0ZTsKICAgICAgbWVzc2FnZS5zb3VyY2UgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgIGlmICh0aGlzLm5vZGVJZCAhPSBudWxsKSB7CiAgICAgICAgbWVzc2FnZS5ub2RlSUQgPSB0aGlzLm5vZGVJZDsKICAgICAgfQogICAgfQogICAgaWYgKCh0aGlzLm91dFBvcnRzLmxvZyAhPSBudWxsKSAmJiB0aGlzLm91dFBvcnRzLmxvZy5pc0F0dGFjaGVkKCkpIHsKICAgICAgcmV0dXJuIHRoaXMub3V0UG9ydHMubG9nLnNlbmQobWVzc2FnZSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gY29uc29sZS5sb2codXRpbC5pbnNwZWN0KG1lc3NhZ2UsIDQsIHRydWUsIHRydWUpKTsKICAgIH0KICB9OwoKICByZXR1cm4gTG9nZ2luZ0NvbXBvbmVudDsKCn0pKENvbXBvbmVudCk7Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ29tcG9uZW50TG9hZGVyLCBpbnRlcm5hbFNvY2tldDsKCmludGVybmFsU29ja2V0ID0gcmVxdWlyZSgnLi9JbnRlcm5hbFNvY2tldCcpOwoKQ29tcG9uZW50TG9hZGVyID0gKGZ1bmN0aW9uKCkgewogIGZ1bmN0aW9uIENvbXBvbmVudExvYWRlcihiYXNlRGlyKSB7CiAgICB0aGlzLmJhc2VEaXIgPSBiYXNlRGlyOwogICAgdGhpcy5jb21wb25lbnRzID0gbnVsbDsKICAgIHRoaXMuY2hlY2tlZCA9IFtdOwogICAgdGhpcy5yZXZhbGlkYXRlID0gZmFsc2U7CiAgICB0aGlzLmxpYnJhcnlJY29ucyA9IHt9OwogIH0KCiAgQ29tcG9uZW50TG9hZGVyLnByb3RvdHlwZS5nZXRNb2R1bGVQcmVmaXggPSBmdW5jdGlvbihuYW1lKSB7CiAgICBpZiAoIW5hbWUpIHsKICAgICAgcmV0dXJuICcnOwogICAgfQogICAgaWYgKG5hbWUgPT09ICdub2ZsbycpIHsKICAgICAgcmV0dXJuICcnOwogICAgfQogICAgcmV0dXJuIG5hbWUucmVwbGFjZSgnbm9mbG8tJywgJycpOwogIH07CgogIENvbXBvbmVudExvYWRlci5wcm90b3R5cGUuZ2V0TW9kdWxlQ29tcG9uZW50cyA9IGZ1bmN0aW9uKG1vZHVsZU5hbWUpIHsKICAgIHZhciBjUGF0aCwgZGVmaW5pdGlvbiwgZGVwZW5kZW5jeSwgZSwgbG9hZGVyLCBuYW1lLCBwcmVmaXgsIF9yZWYsIF9yZWYxLCBfcmVzdWx0czsKICAgIGlmICh0aGlzLmNoZWNrZWQuaW5kZXhPZihtb2R1bGVOYW1lKSAhPT0gLTEpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5jaGVja2VkLnB1c2gobW9kdWxlTmFtZSk7CiAgICB0cnkgewogICAgICBkZWZpbml0aW9uID0gcmVxdWlyZSgiLyIgKyBtb2R1bGVOYW1lICsgIi9jb21wb25lbnQuanNvbiIpOwogICAgfSBjYXRjaCAoX2Vycm9yKSB7CiAgICAgIGUgPSBfZXJyb3I7CiAgICAgIGlmIChtb2R1bGVOYW1lLnN1YnN0cigwLCAxKSA9PT0gJy8nKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9kdWxlQ29tcG9uZW50cygibm9mbG8tIiArIChtb2R1bGVOYW1lLnN1YnN0cigxKSkpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGZvciAoZGVwZW5kZW5jeSBpbiBkZWZpbml0aW9uLmRlcGVuZGVuY2llcykgewogICAgICB0aGlzLmdldE1vZHVsZUNvbXBvbmVudHMoZGVwZW5kZW5jeS5yZXBsYWNlKCcvJywgJy0nKSk7CiAgICB9CiAgICBpZiAoIWRlZmluaXRpb24ubm9mbG8pIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgcHJlZml4ID0gdGhpcy5nZXRNb2R1bGVQcmVmaXgoZGVmaW5pdGlvbi5uYW1lKTsKICAgIGlmIChkZWZpbml0aW9uLm5vZmxvLmljb24pIHsKICAgICAgdGhpcy5saWJyYXJ5SWNvbnNbcHJlZml4XSA9IGRlZmluaXRpb24ubm9mbG8uaWNvbjsKICAgIH0KICAgIGlmIChtb2R1bGVOYW1lWzBdID09PSAnLycpIHsKICAgICAgbW9kdWxlTmFtZSA9IG1vZHVsZU5hbWUuc3Vic3RyKDEpOwogICAgfQogICAgaWYgKGRlZmluaXRpb24ubm9mbG8ubG9hZGVyKSB7CiAgICAgIGxvYWRlciA9IHJlcXVpcmUoZGVmaW5pdGlvbi5ub2Zsby5sb2FkZXIpOwogICAgICBsb2FkZXIodGhpcyk7CiAgICB9CiAgICBpZiAoZGVmaW5pdGlvbi5ub2Zsby5jb21wb25lbnRzKSB7CiAgICAgIF9yZWYgPSBkZWZpbml0aW9uLm5vZmxvLmNvbXBvbmVudHM7CiAgICAgIGZvciAobmFtZSBpbiBfcmVmKSB7CiAgICAgICAgY1BhdGggPSBfcmVmW25hbWVdOwogICAgICAgIGlmIChjUGF0aC5pbmRleE9mKCcuY29mZmVlJykgIT09IC0xKSB7CiAgICAgICAgICBjUGF0aCA9IGNQYXRoLnJlcGxhY2UoJy5jb2ZmZWUnLCAnLmpzJyk7CiAgICAgICAgfQogICAgICAgIHRoaXMucmVnaXN0ZXJDb21wb25lbnQocHJlZml4LCBuYW1lLCAiLyIgKyBtb2R1bGVOYW1lICsgIi8iICsgY1BhdGgpOwogICAgICB9CiAgICB9CiAgICBpZiAoZGVmaW5pdGlvbi5ub2Zsby5ncmFwaHMpIHsKICAgICAgX3JlZjEgPSBkZWZpbml0aW9uLm5vZmxvLmdyYXBoczsKICAgICAgX3Jlc3VsdHMgPSBbXTsKICAgICAgZm9yIChuYW1lIGluIF9yZWYxKSB7CiAgICAgICAgY1BhdGggPSBfcmVmMVtuYW1lXTsKICAgICAgICBfcmVzdWx0cy5wdXNoKHRoaXMucmVnaXN0ZXJDb21wb25lbnQocHJlZml4LCBuYW1lLCAiLyIgKyBtb2R1bGVOYW1lICsgIi8iICsgY1BhdGgpKTsKICAgICAgfQogICAgICByZXR1cm4gX3Jlc3VsdHM7CiAgICB9CiAgfTsKCiAgQ29tcG9uZW50TG9hZGVyLnByb3RvdHlwZS5saXN0Q29tcG9uZW50cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICBpZiAodGhpcy5jb21wb25lbnRzICE9PSBudWxsKSB7CiAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzLmNvbXBvbmVudHMpOwogICAgfQogICAgdGhpcy5jb21wb25lbnRzID0ge307CiAgICB0aGlzLmdldE1vZHVsZUNvbXBvbmVudHModGhpcy5iYXNlRGlyKTsKICAgIHJldHVybiBjYWxsYmFjayh0aGlzLmNvbXBvbmVudHMpOwogIH07CgogIENvbXBvbmVudExvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrKSB7CiAgICB2YXIgY29tcG9uZW50LCBjb21wb25lbnROYW1lLCBpbXBsZW1lbnRhdGlvbiwgaW5zdGFuY2UsCiAgICAgIF90aGlzID0gdGhpczsKICAgIGlmICghdGhpcy5jb21wb25lbnRzKSB7CiAgICAgIHRoaXMubGlzdENvbXBvbmVudHMoZnVuY3Rpb24oY29tcG9uZW50cykgewogICAgICAgIHJldHVybiBfdGhpcy5sb2FkKG5hbWUsIGNhbGxiYWNrKTsKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbXBvbmVudCA9IHRoaXMuY29tcG9uZW50c1tuYW1lXTsKICAgIGlmICghY29tcG9uZW50KSB7CiAgICAgIGZvciAoY29tcG9uZW50TmFtZSBpbiB0aGlzLmNvbXBvbmVudHMpIHsKICAgICAgICBpZiAoY29tcG9uZW50TmFtZS5zcGxpdCgnLycpWzFdID09PSBuYW1lKSB7CiAgICAgICAgICBjb21wb25lbnQgPSB0aGlzLmNvbXBvbmVudHNbY29tcG9uZW50TmFtZV07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKCFjb21wb25lbnQpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNvbXBvbmVudCAiICsgbmFtZSArICIgbm90IGF2YWlsYWJsZSB3aXRoIGJhc2UgIiArIHRoaXMuYmFzZURpcik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CiAgICBpZiAodGhpcy5pc0dyYXBoKGNvbXBvbmVudCkpIHsKICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmV4ZWNQYXRoICYmIHByb2Nlc3MuZXhlY1BhdGguaW5kZXhPZignbm9kZScpICE9PSAtMSkgewogICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMubG9hZEdyYXBoKG5hbWUsIGNvbXBvbmVudCwgY2FsbGJhY2spOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMubG9hZEdyYXBoKG5hbWUsIGNvbXBvbmVudCwgY2FsbGJhY2spOwogICAgICAgIH0sIDApOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlb2YgY29tcG9uZW50ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIGltcGxlbWVudGF0aW9uID0gY29tcG9uZW50OwogICAgICBpbnN0YW5jZSA9IG5ldyBjb21wb25lbnQ7CiAgICB9IGVsc2UgewogICAgICBpbXBsZW1lbnRhdGlvbiA9IHJlcXVpcmUoY29tcG9uZW50KTsKICAgICAgaW5zdGFuY2UgPSBpbXBsZW1lbnRhdGlvbi5nZXRDb21wb25lbnQoKTsKICAgIH0KICAgIGlmIChuYW1lID09PSAnR3JhcGgnKSB7CiAgICAgIGluc3RhbmNlLmJhc2VEaXIgPSB0aGlzLmJhc2VEaXI7CiAgICB9CiAgICB0aGlzLnNldEljb24obmFtZSwgaW5zdGFuY2UpOwogICAgcmV0dXJuIGNhbGxiYWNrKGluc3RhbmNlKTsKICB9OwoKICBDb21wb25lbnRMb2FkZXIucHJvdG90eXBlLmlzR3JhcGggPSBmdW5jdGlvbihjUGF0aCkgewogICAgaWYgKHR5cGVvZiBjUGF0aCAhPT0gJ3N0cmluZycpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIGNQYXRoLmluZGV4T2YoJy5mYnAnKSAhPT0gLTEgfHwgY1BhdGguaW5kZXhPZignLmpzb24nKSAhPT0gLTE7CiAgfTsKCiAgQ29tcG9uZW50TG9hZGVyLnByb3RvdHlwZS5sb2FkR3JhcGggPSBmdW5jdGlvbihuYW1lLCBjb21wb25lbnQsIGNhbGxiYWNrKSB7CiAgICB2YXIgZ3JhcGgsIGdyYXBoSW1wbGVtZW50YXRpb24sIGdyYXBoU29ja2V0OwogICAgZ3JhcGhJbXBsZW1lbnRhdGlvbiA9IHJlcXVpcmUodGhpcy5jb21wb25lbnRzWydHcmFwaCddKTsKICAgIGdyYXBoU29ja2V0ID0gaW50ZXJuYWxTb2NrZXQuY3JlYXRlU29ja2V0KCk7CiAgICBncmFwaCA9IGdyYXBoSW1wbGVtZW50YXRpb24uZ2V0Q29tcG9uZW50KCk7CiAgICBncmFwaC5iYXNlRGlyID0gdGhpcy5iYXNlRGlyOwogICAgZ3JhcGguaW5Qb3J0cy5ncmFwaC5hdHRhY2goZ3JhcGhTb2NrZXQpOwogICAgZ3JhcGhTb2NrZXQuc2VuZChjb21wb25lbnQpOwogICAgZ3JhcGhTb2NrZXQuZGlzY29ubmVjdCgpOwogICAgZGVsZXRlIGdyYXBoLmluUG9ydHMuZ3JhcGg7CiAgICBkZWxldGUgZ3JhcGguaW5Qb3J0cy5zdGFydDsKICAgIHRoaXMuc2V0SWNvbihuYW1lLCBncmFwaCk7CiAgICByZXR1cm4gY2FsbGJhY2soZ3JhcGgpOwogIH07CgogIENvbXBvbmVudExvYWRlci5wcm90b3R5cGUuc2V0SWNvbiA9IGZ1bmN0aW9uKG5hbWUsIGluc3RhbmNlKSB7CiAgICB2YXIgY29tcG9uZW50TmFtZSwgbGlicmFyeSwgX3JlZjsKICAgIGlmIChpbnN0YW5jZS5nZXRJY29uKCkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgX3JlZiA9IG5hbWUuc3BsaXQoJy8nKSwgbGlicmFyeSA9IF9yZWZbMF0sIGNvbXBvbmVudE5hbWUgPSBfcmVmWzFdOwogICAgaWYgKGNvbXBvbmVudE5hbWUgJiYgdGhpcy5nZXRMaWJyYXJ5SWNvbihsaWJyYXJ5KSkgewogICAgICBpbnN0YW5jZS5zZXRJY29uKHRoaXMuZ2V0TGlicmFyeUljb24obGlicmFyeSkpOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoaW5zdGFuY2UuaXNTdWJncmFwaCgpKSB7CiAgICAgIGluc3RhbmNlLnNldEljb24oJ3NpdGVtYXAnKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaW5zdGFuY2Uuc2V0SWNvbignYmxhbmsnKTsKICB9OwoKICBDb21wb25lbnRMb2FkZXIucHJvdG90eXBlLmdldExpYnJhcnlJY29uID0gZnVuY3Rpb24ocHJlZml4KSB7CiAgICBpZiAodGhpcy5saWJyYXJ5SWNvbnNbcHJlZml4XSkgewogICAgICByZXR1cm4gdGhpcy5saWJyYXJ5SWNvbnNbcHJlZml4XTsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH07CgogIENvbXBvbmVudExvYWRlci5wcm90b3R5cGUucmVnaXN0ZXJDb21wb25lbnQgPSBmdW5jdGlvbihwYWNrYWdlSWQsIG5hbWUsIGNQYXRoLCBjYWxsYmFjaykgewogICAgdmFyIGZ1bGxOYW1lLCBwcmVmaXg7CiAgICBwcmVmaXggPSB0aGlzLmdldE1vZHVsZVByZWZpeChwYWNrYWdlSWQpOwogICAgZnVsbE5hbWUgPSAiIiArIHByZWZpeCArICIvIiArIG5hbWU7CiAgICBpZiAoIXBhY2thZ2VJZCkgewogICAgICBmdWxsTmFtZSA9IG5hbWU7CiAgICB9CiAgICB0aGlzLmNvbXBvbmVudHNbZnVsbE5hbWVdID0gY1BhdGg7CiAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgICB9CiAgfTsKCiAgQ29tcG9uZW50TG9hZGVyLnByb3RvdHlwZS5yZWdpc3RlckdyYXBoID0gZnVuY3Rpb24ocGFja2FnZUlkLCBuYW1lLCBnUGF0aCwgY2FsbGJhY2spIHsKICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyQ29tcG9uZW50KHBhY2thZ2VJZCwgbmFtZSwgZ1BhdGgsIGNhbGxiYWNrKTsKICB9OwoKICBDb21wb25lbnRMb2FkZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLmNvbXBvbmVudHMgPSBudWxsOwogICAgdGhpcy5jaGVja2VkID0gW107CiAgICByZXR1cm4gdGhpcy5yZXZhbGlkYXRlID0gdHJ1ZTsKICB9OwoKICByZXR1cm4gQ29tcG9uZW50TG9hZGVyOwoKfSkoKTsKCmV4cG9ydHMuQ29tcG9uZW50TG9hZGVyID0gQ29tcG9uZW50TG9hZGVyOwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewpleHBvcnRzLmdyYXBoID0gcmVxdWlyZSgnLi9HcmFwaCcpOwoKZXhwb3J0cy5HcmFwaCA9IGV4cG9ydHMuZ3JhcGguR3JhcGg7CgpleHBvcnRzLk5ldHdvcmsgPSByZXF1aXJlKCcuL05ldHdvcmsnKS5OZXR3b3JrOwoKZXhwb3J0cy5pc0Jyb3dzZXIgPSBmdW5jdGlvbigpIHsKICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZXhlY1BhdGggJiYgcHJvY2Vzcy5leGVjUGF0aC5pbmRleE9mKCdub2RlJykgIT09IC0xKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHJldHVybiB0cnVlOwp9OwoKaWYgKCFleHBvcnRzLmlzQnJvd3NlcigpKSB7CiAgZXhwb3J0cy5Db21wb25lbnRMb2FkZXIgPSByZXF1aXJlKCcuL25vZGVqcy9Db21wb25lbnRMb2FkZXInKS5Db21wb25lbnRMb2FkZXI7Cn0gZWxzZSB7CiAgZXhwb3J0cy5Db21wb25lbnRMb2FkZXIgPSByZXF1aXJlKCcuL0NvbXBvbmVudExvYWRlcicpLkNvbXBvbmVudExvYWRlcjsKfQoKZXhwb3J0cy5Db21wb25lbnQgPSByZXF1aXJlKCcuL0NvbXBvbmVudCcpLkNvbXBvbmVudDsKCmV4cG9ydHMuQXN5bmNDb21wb25lbnQgPSByZXF1aXJlKCcuL0FzeW5jQ29tcG9uZW50JykuQXN5bmNDb21wb25lbnQ7CgpleHBvcnRzLkxvZ2dpbmdDb21wb25lbnQgPSByZXF1aXJlKCcuL0xvZ2dpbmdDb21wb25lbnQnKS5Mb2dnaW5nQ29tcG9uZW50OwoKZXhwb3J0cy5Qb3J0ID0gcmVxdWlyZSgnLi9Qb3J0JykuUG9ydDsKCmV4cG9ydHMuQXJyYXlQb3J0ID0gcmVxdWlyZSgnLi9BcnJheVBvcnQnKS5BcnJheVBvcnQ7CgpleHBvcnRzLmludGVybmFsU29ja2V0ID0gcmVxdWlyZSgnLi9JbnRlcm5hbFNvY2tldCcpOwoKZXhwb3J0cy5jcmVhdGVOZXR3b3JrID0gZnVuY3Rpb24oZ3JhcGgsIGNhbGxiYWNrLCBkZWxheSkgewogIHZhciBuZXR3b3JrLCBuZXR3b3JrUmVhZHk7CiAgbmV0d29yayA9IG5ldyBleHBvcnRzLk5ldHdvcmsoZ3JhcGgpOwogIG5ldHdvcmtSZWFkeSA9IGZ1bmN0aW9uKG5ldHdvcmspIHsKICAgIGlmIChjYWxsYmFjayAhPSBudWxsKSB7CiAgICAgIGNhbGxiYWNrKG5ldHdvcmspOwogICAgfQogICAgcmV0dXJuIG5ldHdvcmsuc3RhcnQoKTsKICB9OwogIGlmIChncmFwaC5ub2Rlcy5sZW5ndGggPT09IDApIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBuZXR3b3JrUmVhZHkobmV0d29yayk7CiAgICB9LCAwKTsKICAgIHJldHVybiBuZXR3b3JrOwogIH0KICBuZXR3b3JrLmxvYWRlci5saXN0Q29tcG9uZW50cyhmdW5jdGlvbigpIHsKICAgIGlmIChkZWxheSkgewogICAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCkgewogICAgICAgIGNhbGxiYWNrKG5ldHdvcmspOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiBuZXR3b3JrLmNvbm5lY3QoZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBuZXR3b3JrUmVhZHkobmV0d29yayk7CiAgICB9KTsKICB9KTsKICByZXR1cm4gbmV0d29yazsKfTsKCmV4cG9ydHMubG9hZEZpbGUgPSBmdW5jdGlvbihmaWxlLCBjYWxsYmFjaykgewogIHJldHVybiBleHBvcnRzLmdyYXBoLmxvYWRGaWxlKGZpbGUsIGZ1bmN0aW9uKG5ldCkgewogICAgcmV0dXJuIGV4cG9ydHMuY3JlYXRlTmV0d29yayhuZXQsIGNhbGxiYWNrKTsKICB9KTsKfTsKCmV4cG9ydHMuc2F2ZUZpbGUgPSBmdW5jdGlvbihncmFwaCwgZmlsZSwgY2FsbGJhY2spIHsKICByZXR1cm4gZXhwb3J0cy5ncmFwaC5zYXZlKGZpbGUsIGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGNhbGxiYWNrKGZpbGUpOwogIH0pOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvL3NyYy9saWIvTmV0d29yay5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBFdmVudEVtaXR0ZXIsIE5ldHdvcmssIGNvbXBvbmVudExvYWRlciwgZ3JhcGgsIGludGVybmFsU29ja2V0LCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKCmludGVybmFsU29ja2V0ID0gcmVxdWlyZSgiLi9JbnRlcm5hbFNvY2tldCIpOwoKZ3JhcGggPSByZXF1aXJlKCIuL0dyYXBoIik7CgppZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZXhlY1BhdGggJiYgcHJvY2Vzcy5leGVjUGF0aC5pbmRleE9mKCdub2RlJykgIT09IC0xKSB7CiAgY29tcG9uZW50TG9hZGVyID0gcmVxdWlyZSgiLi9ub2RlanMvQ29tcG9uZW50TG9hZGVyIik7CiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyOwp9IGVsc2UgewogIGNvbXBvbmVudExvYWRlciA9IHJlcXVpcmUoJy4vQ29tcG9uZW50TG9hZGVyJyk7CiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpOwp9CgpOZXR3b3JrID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhOZXR3b3JrLCBfc3VwZXIpOwoKICBOZXR3b3JrLnByb3RvdHlwZS5wcm9jZXNzZXMgPSB7fTsKCiAgTmV0d29yay5wcm90b3R5cGUuY29ubmVjdGlvbnMgPSBbXTsKCiAgTmV0d29yay5wcm90b3R5cGUuaW5pdGlhbHMgPSBbXTsKCiAgTmV0d29yay5wcm90b3R5cGUuZ3JhcGggPSBudWxsOwoKICBOZXR3b3JrLnByb3RvdHlwZS5zdGFydHVwRGF0ZSA9IG51bGw7CgogIE5ldHdvcmsucHJvdG90eXBlLnBvcnRCdWZmZXIgPSB7fTsKCiAgZnVuY3Rpb24gTmV0d29yayhncmFwaCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucHJvY2Vzc2VzID0ge307CiAgICB0aGlzLmNvbm5lY3Rpb25zID0gW107CiAgICB0aGlzLmluaXRpYWxzID0gW107CiAgICB0aGlzLmdyYXBoID0gZ3JhcGg7CiAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZXhlY1BhdGggJiYgcHJvY2Vzcy5leGVjUGF0aC5pbmRleE9mKCdub2RlJykgIT09IC0xKSB7CiAgICAgIHRoaXMuYmFzZURpciA9IGdyYXBoLmJhc2VEaXIgfHwgcHJvY2Vzcy5jd2QoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuYmFzZURpciA9IGdyYXBoLmJhc2VEaXIgfHwgJy8nOwogICAgfQogICAgdGhpcy5zdGFydHVwRGF0ZSA9IG5ldyBEYXRlKCk7CiAgICB0aGlzLmdyYXBoLm9uKCdhZGROb2RlJywgZnVuY3Rpb24obm9kZSkgewogICAgICByZXR1cm4gX3RoaXMuYWRkTm9kZShub2RlKTsKICAgIH0pOwogICAgdGhpcy5ncmFwaC5vbigncmVtb3ZlTm9kZScsIGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZU5vZGUobm9kZSk7CiAgICB9KTsKICAgIHRoaXMuZ3JhcGgub24oJ3JlbmFtZU5vZGUnLCBmdW5jdGlvbihvbGRJZCwgbmV3SWQpIHsKICAgICAgcmV0dXJuIF90aGlzLnJlbmFtZU5vZGUob2xkSWQsIG5ld0lkKTsKICAgIH0pOwogICAgdGhpcy5ncmFwaC5vbignYWRkRWRnZScsIGZ1bmN0aW9uKGVkZ2UpIHsKICAgICAgcmV0dXJuIF90aGlzLmFkZEVkZ2UoZWRnZSk7CiAgICB9KTsKICAgIHRoaXMuZ3JhcGgub24oJ3JlbW92ZUVkZ2UnLCBmdW5jdGlvbihlZGdlKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVFZGdlKGVkZ2UpOwogICAgfSk7CiAgICB0aGlzLmdyYXBoLm9uKCdhZGRJbml0aWFsJywgZnVuY3Rpb24oaWlwKSB7CiAgICAgIHJldHVybiBfdGhpcy5hZGRJbml0aWFsKGlpcCk7CiAgICB9KTsKICAgIHRoaXMuZ3JhcGgub24oJ3JlbW92ZUluaXRpYWwnLCBmdW5jdGlvbihpaXApIHsKICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZUluaXRpYWwoaWlwKTsKICAgIH0pOwogICAgdGhpcy5sb2FkZXIgPSBuZXcgY29tcG9uZW50TG9hZGVyLkNvbXBvbmVudExvYWRlcih0aGlzLmJhc2VEaXIpOwogIH0KCiAgTmV0d29yay5wcm90b3R5cGUudXB0aW1lID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gbmV3IERhdGUoKSAtIHRoaXMuc3RhcnR1cERhdGU7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuY29ubmVjdGlvbkNvdW50ID0gMDsKCiAgTmV0d29yay5wcm90b3R5cGUuaW5jcmVhc2VDb25uZWN0aW9ucyA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGlvbkNvdW50ID09PSAwKSB7CiAgICAgIHRoaXMuZW1pdCgnc3RhcnQnLCB7CiAgICAgICAgc3RhcnQ6IHRoaXMuc3RhcnR1cERhdGUKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uQ291bnQrKzsKICB9OwoKICBOZXR3b3JrLnByb3RvdHlwZS5kZWNyZWFzZUNvbm5lY3Rpb25zID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZW5kZXIsCiAgICAgIF90aGlzID0gdGhpczsKICAgIHRoaXMuY29ubmVjdGlvbkNvdW50LS07CiAgICBpZiAodGhpcy5jb25uZWN0aW9uQ291bnQgPT09IDApIHsKICAgICAgZW5kZXIgPSBfLmRlYm91bmNlKGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChfdGhpcy5jb25uZWN0aW9uQ291bnQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF90aGlzLmVtaXQoJ2VuZCcsIHsKICAgICAgICAgIHN0YXJ0OiBfdGhpcy5zdGFydHVwRGF0ZSwKICAgICAgICAgIGVuZDogbmV3IERhdGUsCiAgICAgICAgICB1cHRpbWU6IF90aGlzLnVwdGltZSgpCiAgICAgICAgfSk7CiAgICAgIH0sIDEwKTsKICAgICAgcmV0dXJuIGVuZGVyKCk7CiAgICB9CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKGNvbXBvbmVudCwgY2FsbGJhY2spIHsKICAgIGlmICh0eXBlb2YgY29tcG9uZW50ID09PSAnb2JqZWN0JykgewogICAgICByZXR1cm4gY2FsbGJhY2soY29tcG9uZW50KTsKICAgIH0KICAgIHJldHVybiB0aGlzLmxvYWRlci5sb2FkKGNvbXBvbmVudCwgY2FsbGJhY2spOwogIH07CgogIE5ldHdvcmsucHJvdG90eXBlLmFkZE5vZGUgPSBmdW5jdGlvbihub2RlLCBjYWxsYmFjaykgewogICAgdmFyIHByb2Nlc3MsCiAgICAgIF90aGlzID0gdGhpczsKICAgIGlmICh0aGlzLnByb2Nlc3Nlc1tub2RlLmlkXSkgewogICAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgICBjYWxsYmFjayh0aGlzLnByb2Nlc3Nlc1tub2RlLmlkXSk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQogICAgcHJvY2VzcyA9IHsKICAgICAgaWQ6IG5vZGUuaWQKICAgIH07CiAgICBpZiAoIW5vZGUuY29tcG9uZW50KSB7CiAgICAgIHRoaXMucHJvY2Vzc2VzW3Byb2Nlc3MuaWRdID0gcHJvY2VzczsKICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgY2FsbGJhY2socHJvY2Vzcyk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQogICAgcmV0dXJuIHRoaXMubG9hZChub2RlLmNvbXBvbmVudCwgZnVuY3Rpb24oaW5zdGFuY2UpIHsKICAgICAgdmFyIG5hbWUsIHBvcnQsIF9yZWYsIF9yZWYxOwogICAgICBpbnN0YW5jZS5ub2RlSWQgPSBub2RlLmlkOwogICAgICBwcm9jZXNzLmNvbXBvbmVudCA9IGluc3RhbmNlOwogICAgICBfcmVmID0gcHJvY2Vzcy5jb21wb25lbnQuaW5Qb3J0czsKICAgICAgZm9yIChuYW1lIGluIF9yZWYpIHsKICAgICAgICBwb3J0ID0gX3JlZltuYW1lXTsKICAgICAgICBwb3J0Lm5vZGUgPSBub2RlLmlkOwogICAgICAgIHBvcnQubmFtZSA9IG5hbWU7CiAgICAgIH0KICAgICAgX3JlZjEgPSBwcm9jZXNzLmNvbXBvbmVudC5vdXRQb3J0czsKICAgICAgZm9yIChuYW1lIGluIF9yZWYxKSB7CiAgICAgICAgcG9ydCA9IF9yZWYxW25hbWVdOwogICAgICAgIHBvcnQubm9kZSA9IG5vZGUuaWQ7CiAgICAgICAgcG9ydC5uYW1lID0gbmFtZTsKICAgICAgfQogICAgICBpZiAoaW5zdGFuY2UuaXNTdWJncmFwaCgpKSB7CiAgICAgICAgX3RoaXMuc3Vic2NyaWJlU3ViZ3JhcGgobm9kZS5pZCwgaW5zdGFuY2UpOwogICAgICB9CiAgICAgIF90aGlzLnByb2Nlc3Nlc1twcm9jZXNzLmlkXSA9IHByb2Nlc3M7CiAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgIHJldHVybiBjYWxsYmFjayhwcm9jZXNzKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUucmVtb3ZlTm9kZSA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIGlmICghdGhpcy5wcm9jZXNzZXNbbm9kZS5pZF0pIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5wcm9jZXNzZXNbbm9kZS5pZF0uY29tcG9uZW50LnNodXRkb3duKCk7CiAgICByZXR1cm4gZGVsZXRlIHRoaXMucHJvY2Vzc2VzW25vZGUuaWRdOwogIH07CgogIE5ldHdvcmsucHJvdG90eXBlLnJlbmFtZU5vZGUgPSBmdW5jdGlvbihvbGRJZCwgbmV3SWQpIHsKICAgIHZhciBuYW1lLCBwb3J0LCBwcm9jZXNzLCBfcmVmLCBfcmVmMTsKICAgIHByb2Nlc3MgPSB0aGlzLmdldE5vZGUob2xkSWQpOwogICAgaWYgKCFwcm9jZXNzKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHByb2Nlc3MuaWQgPSBuZXdJZDsKICAgIF9yZWYgPSBwcm9jZXNzLmNvbXBvbmVudC5pblBvcnRzOwogICAgZm9yIChuYW1lIGluIF9yZWYpIHsKICAgICAgcG9ydCA9IF9yZWZbbmFtZV07CiAgICAgIHBvcnQubm9kZSA9IG5ld0lkOwogICAgfQogICAgX3JlZjEgPSBwcm9jZXNzLmNvbXBvbmVudC5vdXRQb3J0czsKICAgIGZvciAobmFtZSBpbiBfcmVmMSkgewogICAgICBwb3J0ID0gX3JlZjFbbmFtZV07CiAgICAgIHBvcnQubm9kZSA9IG5ld0lkOwogICAgfQogICAgdGhpcy5wcm9jZXNzZXNbbmV3SWRdID0gcHJvY2VzczsKICAgIHJldHVybiBkZWxldGUgdGhpcy5wcm9jZXNzZXNbb2xkSWRdOwogIH07CgogIE5ldHdvcmsucHJvdG90eXBlLmdldE5vZGUgPSBmdW5jdGlvbihpZCkgewogICAgcmV0dXJuIHRoaXMucHJvY2Vzc2VzW2lkXTsKICB9OwoKICBOZXR3b3JrLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24oZG9uZSkgewogICAgdmFyIGVkZ2VzLCBpbml0aWFsaXplcnMsIG5vZGVzLCBzZXJpYWxpemUsCiAgICAgIF90aGlzID0gdGhpczsKICAgIGlmIChkb25lID09IG51bGwpIHsKICAgICAgZG9uZSA9IGZ1bmN0aW9uKCkge307CiAgICB9CiAgICBzZXJpYWxpemUgPSBmdW5jdGlvbihuZXh0LCBhZGQpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKHR5cGUpIHsKICAgICAgICByZXR1cm4gX3RoaXNbImFkZCIgKyB0eXBlXShhZGQsIGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIG5leHQodHlwZSk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9OwogICAgaW5pdGlhbGl6ZXJzID0gXy5yZWR1Y2VSaWdodCh0aGlzLmdyYXBoLmluaXRpYWxpemVycywgc2VyaWFsaXplLCBkb25lKTsKICAgIGVkZ2VzID0gXy5yZWR1Y2VSaWdodCh0aGlzLmdyYXBoLmVkZ2VzLCBzZXJpYWxpemUsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gaW5pdGlhbGl6ZXJzKCJJbml0aWFsIik7CiAgICB9KTsKICAgIG5vZGVzID0gXy5yZWR1Y2VSaWdodCh0aGlzLmdyYXBoLm5vZGVzLCBzZXJpYWxpemUsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gZWRnZXMoIkVkZ2UiKTsKICAgIH0pOwogICAgcmV0dXJuIG5vZGVzKCJOb2RlIik7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuY29ubmVjdFBvcnQgPSBmdW5jdGlvbihzb2NrZXQsIHByb2Nlc3MsIHBvcnQsIGluYm91bmQpIHsKICAgIGlmIChpbmJvdW5kKSB7CiAgICAgIHNvY2tldC50byA9IHsKICAgICAgICBwcm9jZXNzOiBwcm9jZXNzLAogICAgICAgIHBvcnQ6IHBvcnQKICAgICAgfTsKICAgICAgaWYgKCEocHJvY2Vzcy5jb21wb25lbnQuaW5Qb3J0cyAmJiBwcm9jZXNzLmNvbXBvbmVudC5pblBvcnRzW3BvcnRdKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiTm8gaW5wb3J0ICciICsgcG9ydCArICInIGRlZmluZWQgaW4gcHJvY2VzcyAiICsgcHJvY2Vzcy5pZCArICIgKCIgKyAoc29ja2V0LmdldElkKCkpICsgIikiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIHByb2Nlc3MuY29tcG9uZW50LmluUG9ydHNbcG9ydF0uYXR0YWNoKHNvY2tldCk7CiAgICB9CiAgICBzb2NrZXQuZnJvbSA9IHsKICAgICAgcHJvY2VzczogcHJvY2VzcywKICAgICAgcG9ydDogcG9ydAogICAgfTsKICAgIGlmICghKHByb2Nlc3MuY29tcG9uZW50Lm91dFBvcnRzICYmIHByb2Nlc3MuY29tcG9uZW50Lm91dFBvcnRzW3BvcnRdKSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIG91dHBvcnQgJyIgKyBwb3J0ICsgIicgZGVmaW5lZCBpbiBwcm9jZXNzICIgKyBwcm9jZXNzLmlkICsgIiAoIiArIChzb2NrZXQuZ2V0SWQoKSkgKyAiKSIpOwogICAgICByZXR1cm47CiAgICB9CiAgICByZXR1cm4gcHJvY2Vzcy5jb21wb25lbnQub3V0UG9ydHNbcG9ydF0uYXR0YWNoKHNvY2tldCk7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuc3Vic2NyaWJlU3ViZ3JhcGggPSBmdW5jdGlvbihub2RlTmFtZSwgcHJvY2VzcykgewogICAgdmFyIGVtaXRTdWIsCiAgICAgIF90aGlzID0gdGhpczsKICAgIGlmICghcHJvY2Vzcy5pc1JlYWR5KCkpIHsKICAgICAgcHJvY2Vzcy5vbmNlKCdyZWFkeScsIGZ1bmN0aW9uKCkgewogICAgICAgIF90aGlzLnN1YnNjcmliZVN1YmdyYXBoKG5vZGVOYW1lLCBwcm9jZXNzKTsKICAgICAgfSk7CiAgICB9CiAgICBpZiAoIXByb2Nlc3MubmV0d29yaykgewogICAgICByZXR1cm47CiAgICB9CiAgICBlbWl0U3ViID0gZnVuY3Rpb24odHlwZSwgZGF0YSkgewogICAgICBpZiAodHlwZSA9PT0gJ2Nvbm5lY3QnKSB7CiAgICAgICAgX3RoaXMuaW5jcmVhc2VDb25uZWN0aW9ucygpOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAnZGlzY29ubmVjdCcpIHsKICAgICAgICBfdGhpcy5kZWNyZWFzZUNvbm5lY3Rpb25zKCk7CiAgICAgIH0KICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgZGF0YSA9IHt9OwogICAgICB9CiAgICAgIGlmIChkYXRhLnN1YmdyYXBoKSB7CiAgICAgICAgZGF0YS5zdWJncmFwaCA9ICIiICsgbm9kZU5hbWUgKyAiOiIgKyBkYXRhLnN1YmdyYXBoOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGEuc3ViZ3JhcGggPSBub2RlTmFtZTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuZW1pdCh0eXBlLCBkYXRhKTsKICAgIH07CiAgICBwcm9jZXNzLm5ldHdvcmsub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBlbWl0U3ViKCdjb25uZWN0JywgZGF0YSk7CiAgICB9KTsKICAgIHByb2Nlc3MubmV0d29yay5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIGVtaXRTdWIoJ2JlZ2luZ3JvdXAnLCBkYXRhKTsKICAgIH0pOwogICAgcHJvY2Vzcy5uZXR3b3JrLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gZW1pdFN1YignZGF0YScsIGRhdGEpOwogICAgfSk7CiAgICBwcm9jZXNzLm5ldHdvcmsub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gZW1pdFN1YignZW5kZ3JvdXAnLCBkYXRhKTsKICAgIH0pOwogICAgcmV0dXJuIHByb2Nlc3MubmV0d29yay5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIGVtaXRTdWIoJ2Rpc2Nvbm5lY3QnLCBkYXRhKTsKICAgIH0pOwogIH07CgogIE5ldHdvcmsucHJvdG90eXBlLnN1YnNjcmliZVNvY2tldCA9IGZ1bmN0aW9uKHNvY2tldCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHNvY2tldC5vbignY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5pbmNyZWFzZUNvbm5lY3Rpb25zKCk7CiAgICAgIHJldHVybiBfdGhpcy5lbWl0KCdjb25uZWN0JywgewogICAgICAgIGlkOiBzb2NrZXQuZ2V0SWQoKSwKICAgICAgICBzb2NrZXQ6IHNvY2tldAogICAgICB9KTsKICAgIH0pOwogICAgc29ja2V0Lm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmVtaXQoJ2JlZ2luZ3JvdXAnLCB7CiAgICAgICAgaWQ6IHNvY2tldC5nZXRJZCgpLAogICAgICAgIHNvY2tldDogc29ja2V0LAogICAgICAgIGdyb3VwOiBncm91cAogICAgICB9KTsKICAgIH0pOwogICAgc29ja2V0Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZW1pdCgnZGF0YScsIHsKICAgICAgICBpZDogc29ja2V0LmdldElkKCksCiAgICAgICAgc29ja2V0OiBzb2NrZXQsCiAgICAgICAgZGF0YTogZGF0YQogICAgICB9KTsKICAgIH0pOwogICAgc29ja2V0Lm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5lbWl0KCdlbmRncm91cCcsIHsKICAgICAgICBpZDogc29ja2V0LmdldElkKCksCiAgICAgICAgc29ja2V0OiBzb2NrZXQsCiAgICAgICAgZ3JvdXA6IGdyb3VwCiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLmRlY3JlYXNlQ29ubmVjdGlvbnMoKTsKICAgICAgcmV0dXJuIF90aGlzLmVtaXQoJ2Rpc2Nvbm5lY3QnLCB7CiAgICAgICAgaWQ6IHNvY2tldC5nZXRJZCgpLAogICAgICAgIHNvY2tldDogc29ja2V0CiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuYWRkRWRnZSA9IGZ1bmN0aW9uKGVkZ2UsIGNhbGxiYWNrKSB7CiAgICB2YXIgZnJvbSwgc29ja2V0LCB0bywKICAgICAgX3RoaXMgPSB0aGlzOwogICAgc29ja2V0ID0gaW50ZXJuYWxTb2NrZXQuY3JlYXRlU29ja2V0KCk7CiAgICBmcm9tID0gdGhpcy5nZXROb2RlKGVkZ2UuZnJvbS5ub2RlKTsKICAgIGlmICghZnJvbSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIHByb2Nlc3MgZGVmaW5lZCBmb3Igb3V0Ym91bmQgbm9kZSAiICsgZWRnZS5mcm9tLm5vZGUpOwogICAgfQogICAgaWYgKCFmcm9tLmNvbXBvbmVudCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIGNvbXBvbmVudCBkZWZpbmVkIGZvciBvdXRib3VuZCBub2RlICIgKyBlZGdlLmZyb20ubm9kZSk7CiAgICB9CiAgICBpZiAoIWZyb20uY29tcG9uZW50LmlzUmVhZHkoKSkgewogICAgICBmcm9tLmNvbXBvbmVudC5vbmNlKCJyZWFkeSIsIGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBfdGhpcy5hZGRFZGdlKGVkZ2UsIGNhbGxiYWNrKTsKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRvID0gdGhpcy5nZXROb2RlKGVkZ2UudG8ubm9kZSk7CiAgICBpZiAoIXRvKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiTm8gcHJvY2VzcyBkZWZpbmVkIGZvciBpbmJvdW5kIG5vZGUgIiArIGVkZ2UudG8ubm9kZSk7CiAgICB9CiAgICBpZiAoIXRvLmNvbXBvbmVudCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIGNvbXBvbmVudCBkZWZpbmVkIGZvciBpbmJvdW5kIG5vZGUgIiArIGVkZ2UudG8ubm9kZSk7CiAgICB9CiAgICBpZiAoIXRvLmNvbXBvbmVudC5pc1JlYWR5KCkpIHsKICAgICAgdG8uY29tcG9uZW50Lm9uY2UoInJlYWR5IiwgZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmFkZEVkZ2UoZWRnZSwgY2FsbGJhY2spOwogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5jb25uZWN0UG9ydChzb2NrZXQsIHRvLCBlZGdlLnRvLnBvcnQsIHRydWUpOwogICAgdGhpcy5jb25uZWN0UG9ydChzb2NrZXQsIGZyb20sIGVkZ2UuZnJvbS5wb3J0LCBmYWxzZSk7CiAgICB0aGlzLnN1YnNjcmliZVNvY2tldChzb2NrZXQpOwogICAgdGhpcy5jb25uZWN0aW9ucy5wdXNoKHNvY2tldCk7CiAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgICB9CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUucmVtb3ZlRWRnZSA9IGZ1bmN0aW9uKGVkZ2UpIHsKICAgIHZhciBjb25uZWN0aW9uLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICBfcmVmID0gdGhpcy5jb25uZWN0aW9uczsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgY29ubmVjdGlvbiA9IF9yZWZbX2ldOwogICAgICBpZiAoIWNvbm5lY3Rpb24pIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoIShlZGdlLnRvLm5vZGUgPT09IGNvbm5lY3Rpb24udG8ucHJvY2Vzcy5pZCAmJiBlZGdlLnRvLnBvcnQgPT09IGNvbm5lY3Rpb24udG8ucG9ydCkpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBjb25uZWN0aW9uLnRvLnByb2Nlc3MuY29tcG9uZW50LmluUG9ydHNbY29ubmVjdGlvbi50by5wb3J0XS5kZXRhY2goY29ubmVjdGlvbik7CiAgICAgIGlmIChlZGdlLmZyb20ubm9kZSkgewogICAgICAgIGlmIChjb25uZWN0aW9uLmZyb20gJiYgZWRnZS5mcm9tLm5vZGUgPT09IGNvbm5lY3Rpb24uZnJvbS5wcm9jZXNzLmlkICYmIGVkZ2UuZnJvbS5wb3J0ID09PSBjb25uZWN0aW9uLmZyb20ucG9ydCkgewogICAgICAgICAgY29ubmVjdGlvbi5mcm9tLnByb2Nlc3MuY29tcG9uZW50Lm91dFBvcnRzW2Nvbm5lY3Rpb24uZnJvbS5wb3J0XS5kZXRhY2goY29ubmVjdGlvbik7CiAgICAgICAgfQogICAgICB9CiAgICAgIF9yZXN1bHRzLnB1c2godGhpcy5jb25uZWN0aW9ucy5zcGxpY2UodGhpcy5jb25uZWN0aW9ucy5pbmRleE9mKGNvbm5lY3Rpb24pLCAxKSk7CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHM7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuYWRkSW5pdGlhbCA9IGZ1bmN0aW9uKGluaXRpYWxpemVyLCBjYWxsYmFjaykgewogICAgdmFyIHNvY2tldCwgdG8sCiAgICAgIF90aGlzID0gdGhpczsKICAgIHNvY2tldCA9IGludGVybmFsU29ja2V0LmNyZWF0ZVNvY2tldCgpOwogICAgdGhpcy5zdWJzY3JpYmVTb2NrZXQoc29ja2V0KTsKICAgIHRvID0gdGhpcy5nZXROb2RlKGluaXRpYWxpemVyLnRvLm5vZGUpOwogICAgaWYgKCF0bykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIHByb2Nlc3MgZGVmaW5lZCBmb3IgaW5ib3VuZCBub2RlICIgKyBpbml0aWFsaXplci50by5ub2RlKTsKICAgIH0KICAgIGlmICghKHRvLmNvbXBvbmVudC5pc1JlYWR5KCkgfHwgdG8uY29tcG9uZW50LmluUG9ydHNbaW5pdGlhbGl6ZXIudG8ucG9ydF0pKSB7CiAgICAgIHRvLmNvbXBvbmVudC5zZXRNYXhMaXN0ZW5lcnMoMCk7CiAgICAgIHRvLmNvbXBvbmVudC5vbmNlKCJyZWFkeSIsIGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBfdGhpcy5hZGRJbml0aWFsKGluaXRpYWxpemVyLCBjYWxsYmFjayk7CiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICB0aGlzLmNvbm5lY3RQb3J0KHNvY2tldCwgdG8sIGluaXRpYWxpemVyLnRvLnBvcnQsIHRydWUpOwogICAgdGhpcy5jb25uZWN0aW9ucy5wdXNoKHNvY2tldCk7CiAgICB0aGlzLmluaXRpYWxzLnB1c2goewogICAgICBzb2NrZXQ6IHNvY2tldCwKICAgICAgZGF0YTogaW5pdGlhbGl6ZXIuZnJvbS5kYXRhCiAgICB9KTsKICAgIGlmIChjYWxsYmFjaykgewogICAgICByZXR1cm4gY2FsbGJhY2soKTsKICAgIH0KICB9OwoKICBOZXR3b3JrLnByb3RvdHlwZS5yZW1vdmVJbml0aWFsID0gZnVuY3Rpb24oaW5pdGlhbGl6ZXIpIHsKICAgIHZhciBjb25uZWN0aW9uLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICBfcmVmID0gdGhpcy5jb25uZWN0aW9uczsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgY29ubmVjdGlvbiA9IF9yZWZbX2ldOwogICAgICBpZiAoIWNvbm5lY3Rpb24pIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoIShpbml0aWFsaXplci50by5ub2RlID09PSBjb25uZWN0aW9uLnRvLnByb2Nlc3MuaWQgJiYgaW5pdGlhbGl6ZXIudG8ucG9ydCA9PT0gY29ubmVjdGlvbi50by5wb3J0KSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGNvbm5lY3Rpb24udG8ucHJvY2Vzcy5jb21wb25lbnQuaW5Qb3J0c1tjb25uZWN0aW9uLnRvLnBvcnRdLmRldGFjaChjb25uZWN0aW9uKTsKICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLmNvbm5lY3Rpb25zLnNwbGljZSh0aGlzLmNvbm5lY3Rpb25zLmluZGV4T2YoY29ubmVjdGlvbiksIDEpKTsKICAgIH0KICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICBOZXR3b3JrLnByb3RvdHlwZS5zZW5kSW5pdGlhbCA9IGZ1bmN0aW9uKGluaXRpYWwpIHsKICAgIGluaXRpYWwuc29ja2V0LmNvbm5lY3QoKTsKICAgIGluaXRpYWwuc29ja2V0LnNlbmQoaW5pdGlhbC5kYXRhKTsKICAgIHJldHVybiBpbml0aWFsLnNvY2tldC5kaXNjb25uZWN0KCk7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuc2VuZEluaXRpYWxzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgc2VuZCwKICAgICAgX3RoaXMgPSB0aGlzOwogICAgc2VuZCA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgaW5pdGlhbCwgX2ksIF9sZW4sIF9yZWY7CiAgICAgIF9yZWYgPSBfdGhpcy5pbml0aWFsczsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgaW5pdGlhbCA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLnNlbmRJbml0aWFsKGluaXRpYWwpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5pbml0aWFscyA9IFtdOwogICAgfTsKICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5leGVjUGF0aCAmJiBwcm9jZXNzLmV4ZWNQYXRoLmluZGV4T2YoJ25vZGUnKSAhPT0gLTEpIHsKICAgICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soc2VuZCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc2V0VGltZW91dChzZW5kLCAwKTsKICAgIH0KICB9OwoKICBOZXR3b3JrLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuc2VuZEluaXRpYWxzKCk7CiAgfTsKCiAgTmV0d29yay5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbm5lY3Rpb24sIGlkLCBwcm9jZXNzLCBfaSwgX2xlbiwgX3JlZiwgX3JlZjEsIF9yZXN1bHRzOwogICAgX3JlZiA9IHRoaXMuY29ubmVjdGlvbnM7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgY29ubmVjdGlvbiA9IF9yZWZbX2ldOwogICAgICBpZiAoIWNvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGNvbm5lY3Rpb24uZGlzY29ubmVjdCgpOwogICAgfQogICAgX3JlZjEgPSB0aGlzLnByb2Nlc3NlczsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKGlkIGluIF9yZWYxKSB7CiAgICAgIHByb2Nlc3MgPSBfcmVmMVtpZF07CiAgICAgIF9yZXN1bHRzLnB1c2gocHJvY2Vzcy5jb21wb25lbnQuc2h1dGRvd24oKSk7CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHM7CiAgfTsKCiAgcmV0dXJuIE5ldHdvcms7Cgp9KShFdmVudEVtaXR0ZXIpOwoKZXhwb3J0cy5OZXR3b3JrID0gTmV0d29yazsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBHcmFwaCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgppZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZXhlY1BhdGggJiYgcHJvY2Vzcy5leGVjUGF0aC5pbmRleE9mKCdub2RlJykgIT09IC0xKSB7CiAgbm9mbG8gPSByZXF1aXJlKCIuLi8uLi9saWIvTm9GbG8iKTsKfSBlbHNlIHsKICBub2ZsbyA9IHJlcXVpcmUoJy4uL2xpYi9Ob0ZsbycpOwp9CgpHcmFwaCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR3JhcGgsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEdyYXBoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMubmV0d29yayA9IG51bGw7CiAgICB0aGlzLnJlYWR5ID0gdHJ1ZTsKICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlOwogICAgdGhpcy5iYXNlRGlyID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZ3JhcGg6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKSwKICAgICAgc3RhcnQ6IG5ldyBub2Zsby5Qb3J0KCdiYW5nJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0ge307CiAgICB0aGlzLmluUG9ydHMuZ3JhcGgub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXRHcmFwaChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnN0YXJ0Lm9uKCJkYXRhIiwgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLnN0YXJ0ZWQgPSB0cnVlOwogICAgICBpZiAoIV90aGlzLm5ldHdvcmspIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm5ldHdvcmsuY29ubmVjdChmdW5jdGlvbigpIHsKICAgICAgICB2YXIgbmFtZSwgbm90UmVhZHksIHByb2Nlc3MsIF9yZWY7CiAgICAgICAgX3RoaXMubmV0d29yay5zZW5kSW5pdGlhbHMoKTsKICAgICAgICBub3RSZWFkeSA9IGZhbHNlOwogICAgICAgIF9yZWYgPSBfdGhpcy5uZXR3b3JrLnByb2Nlc3NlczsKICAgICAgICBmb3IgKG5hbWUgaW4gX3JlZikgewogICAgICAgICAgcHJvY2VzcyA9IF9yZWZbbmFtZV07CiAgICAgICAgICBpZiAoIV90aGlzLmNoZWNrQ29tcG9uZW50KG5hbWUsIHByb2Nlc3MpKSB7CiAgICAgICAgICAgIG5vdFJlYWR5ID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFub3RSZWFkeSkgewogICAgICAgICAgcmV0dXJuIF90aGlzLnNldFRvUmVhZHkoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICBHcmFwaC5wcm90b3R5cGUuc2V0R3JhcGggPSBmdW5jdGlvbihncmFwaCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucmVhZHkgPSBmYWxzZTsKICAgIGlmICh0eXBlb2YgZ3JhcGggPT09ICdvYmplY3QnKSB7CiAgICAgIGlmICh0eXBlb2YgZ3JhcGguYWRkTm9kZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZU5ldHdvcmsoZ3JhcGgpOwogICAgICB9CiAgICAgIG5vZmxvLmdyYXBoLmxvYWRKU09OKGdyYXBoLCBmdW5jdGlvbihpbnN0YW5jZSkgewogICAgICAgIGluc3RhbmNlLmJhc2VEaXIgPSBfdGhpcy5iYXNlRGlyOwogICAgICAgIHJldHVybiBfdGhpcy5jcmVhdGVOZXR3b3JrKGluc3RhbmNlKTsKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChncmFwaC5zdWJzdHIoMCwgMSkgIT09ICIvIikgewogICAgICBncmFwaCA9ICIiICsgKHByb2Nlc3MuY3dkKCkpICsgIi8iICsgZ3JhcGg7CiAgICB9CiAgICByZXR1cm4gZ3JhcGggPSBub2Zsby5ncmFwaC5sb2FkRmlsZShncmFwaCwgZnVuY3Rpb24oaW5zdGFuY2UpIHsKICAgICAgaW5zdGFuY2UuYmFzZURpciA9IF90aGlzLmJhc2VEaXI7CiAgICAgIHJldHVybiBfdGhpcy5jcmVhdGVOZXR3b3JrKGluc3RhbmNlKTsKICAgIH0pOwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5jcmVhdGVOZXR3b3JrID0gZnVuY3Rpb24oZ3JhcGgpIHsKICAgIHZhciBfcmVmLAogICAgICBfdGhpcyA9IHRoaXM7CiAgICBpZiAoKChfcmVmID0gdGhpcy5pblBvcnRzLnN0YXJ0KSAhPSBudWxsID8gX3JlZi5pc0F0dGFjaGVkKCkgOiB2b2lkIDApICYmICF0aGlzLnN0YXJ0ZWQpIHsKICAgICAgbm9mbG8uY3JlYXRlTmV0d29yayhncmFwaCwgZnVuY3Rpb24obmV0d29yaykgewogICAgICAgIF90aGlzLm5ldHdvcmsgPSBuZXR3b3JrOwogICAgICAgIHJldHVybiBfdGhpcy5lbWl0KCduZXR3b3JrJywgX3RoaXMubmV0d29yayk7CiAgICAgIH0sIHRydWUpOwogICAgICByZXR1cm47CiAgICB9CiAgICByZXR1cm4gbm9mbG8uY3JlYXRlTmV0d29yayhncmFwaCwgZnVuY3Rpb24obmV0d29yaykgewogICAgICB2YXIgbmFtZSwgbm90UmVhZHksIHByb2Nlc3MsIF9yZWYxOwogICAgICBfdGhpcy5uZXR3b3JrID0gbmV0d29yazsKICAgICAgX3RoaXMuZW1pdCgnbmV0d29yaycsIF90aGlzLm5ldHdvcmspOwogICAgICBub3RSZWFkeSA9IGZhbHNlOwogICAgICBfcmVmMSA9IF90aGlzLm5ldHdvcmsucHJvY2Vzc2VzOwogICAgICBmb3IgKG5hbWUgaW4gX3JlZjEpIHsKICAgICAgICBwcm9jZXNzID0gX3JlZjFbbmFtZV07CiAgICAgICAgaWYgKCFfdGhpcy5jaGVja0NvbXBvbmVudChuYW1lLCBwcm9jZXNzKSkgewogICAgICAgICAgbm90UmVhZHkgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIW5vdFJlYWR5KSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnNldFRvUmVhZHkoKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLmNoZWNrQ29tcG9uZW50ID0gZnVuY3Rpb24obmFtZSwgcHJvY2VzcykgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIGlmICghcHJvY2Vzcy5jb21wb25lbnQuaXNSZWFkeSgpKSB7CiAgICAgIHByb2Nlc3MuY29tcG9uZW50Lm9uY2UoInJlYWR5IiwgZnVuY3Rpb24oKSB7CiAgICAgICAgX3RoaXMuY2hlY2tDb21wb25lbnQobmFtZSwgcHJvY2Vzcyk7CiAgICAgICAgcmV0dXJuIF90aGlzLnNldFRvUmVhZHkoKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHRoaXMuZmluZEVkZ2VQb3J0cyhuYW1lLCBwcm9jZXNzKTsKICAgIHJldHVybiB0cnVlOwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5wb3J0TmFtZSA9IGZ1bmN0aW9uKG5vZGVOYW1lLCBwb3J0TmFtZSkgewogICAgcmV0dXJuICIiICsgKG5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpICsgIi4iICsgcG9ydE5hbWU7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLmlzRXhwb3J0ZWQgPSBmdW5jdGlvbihwb3J0LCBub2RlTmFtZSwgcG9ydE5hbWUpIHsKICAgIHZhciBleHBvcnRlZCwgbmV3UG9ydCwgX2ksIF9sZW4sIF9yZWY7CiAgICBuZXdQb3J0ID0gdGhpcy5wb3J0TmFtZShub2RlTmFtZSwgcG9ydE5hbWUpOwogICAgaWYgKCFwb3J0LmNhbkF0dGFjaCgpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmICh0aGlzLm5ldHdvcmsuZ3JhcGguZXhwb3J0cy5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIG5ld1BvcnQ7CiAgICB9CiAgICBfcmVmID0gdGhpcy5uZXR3b3JrLmdyYXBoLmV4cG9ydHM7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgZXhwb3J0ZWQgPSBfcmVmW19pXTsKICAgICAgaWYgKGV4cG9ydGVkWyJwcml2YXRlIl0gPT09IG5ld1BvcnQpIHsKICAgICAgICByZXR1cm4gZXhwb3J0ZWRbInB1YmxpYyJdOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLnNldFRvUmVhZHkgPSBmdW5jdGlvbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZXhlY1BhdGggJiYgcHJvY2Vzcy5leGVjUGF0aC5pbmRleE9mKCdub2RlJykgIT09IC0xKSB7CiAgICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgIF90aGlzLnJlYWR5ID0gdHJ1ZTsKICAgICAgICByZXR1cm4gX3RoaXMuZW1pdCgncmVhZHknKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBfdGhpcy5yZWFkeSA9IHRydWU7CiAgICAgICAgcmV0dXJuIF90aGlzLmVtaXQoJ3JlYWR5Jyk7CiAgICAgIH0sIDApOwogICAgfQogIH07CgogIEdyYXBoLnByb3RvdHlwZS5maW5kRWRnZVBvcnRzID0gZnVuY3Rpb24obmFtZSwgcHJvY2VzcykgewogICAgdmFyIHBvcnQsIHBvcnROYW1lLCB0YXJnZXRQb3J0TmFtZSwgX3JlZiwgX3JlZjE7CiAgICBfcmVmID0gcHJvY2Vzcy5jb21wb25lbnQuaW5Qb3J0czsKICAgIGZvciAocG9ydE5hbWUgaW4gX3JlZikgewogICAgICBwb3J0ID0gX3JlZltwb3J0TmFtZV07CiAgICAgIHRhcmdldFBvcnROYW1lID0gdGhpcy5pc0V4cG9ydGVkKHBvcnQsIG5hbWUsIHBvcnROYW1lKTsKICAgICAgaWYgKHRhcmdldFBvcnROYW1lID09PSBmYWxzZSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIHRoaXMuaW5Qb3J0c1t0YXJnZXRQb3J0TmFtZV0gPSBwb3J0OwogICAgfQogICAgX3JlZjEgPSBwcm9jZXNzLmNvbXBvbmVudC5vdXRQb3J0czsKICAgIGZvciAocG9ydE5hbWUgaW4gX3JlZjEpIHsKICAgICAgcG9ydCA9IF9yZWYxW3BvcnROYW1lXTsKICAgICAgdGFyZ2V0UG9ydE5hbWUgPSB0aGlzLmlzRXhwb3J0ZWQocG9ydCwgbmFtZSwgcG9ydE5hbWUpOwogICAgICBpZiAodGFyZ2V0UG9ydE5hbWUgPT09IGZhbHNlKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgdGhpcy5vdXRQb3J0c1t0YXJnZXRQb3J0TmFtZV0gPSBwb3J0OwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgR3JhcGgucHJvdG90eXBlLmlzUmVhZHkgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLnJlYWR5OwogIH07CgogIEdyYXBoLnByb3RvdHlwZS5pc1N1YmdyYXBoID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKICBHcmFwaC5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5uZXR3b3JrKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiB0aGlzLm5ldHdvcmsuc3RvcCgpOwogIH07CgogIHJldHVybiBHcmFwaDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgR3JhcGg7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vaW5kZXguanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewovKgogKiBUaGlzIGZpbGUgY2FuIGJlIHVzZWQgZm9yIGdlbmVyYWwgbGlicmFyeSBmZWF0dXJlcyB0aGF0IGFyZSBleHBvc2VkIGFzIENvbW1vbkpTIG1vZHVsZXMKICogdGhhdCB0aGUgY29tcG9uZW50cyB0aGVuIHV0aWxpemUKICovCgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvLWludGVyYWN0aW9uIiwiZGVzY3JpcHRpb24iOiJVc2VyIGludGVyYWN0aW9uIGNvbXBvbmVudHMgZm9yIE5vRmxvIiwiYXV0aG9yIjoiSGVucmkgQmVyZ2l1cyA8aGVucmkuYmVyZ2l1c0Bpa2kuZmk+IiwicmVwbyI6Im5vZmxvL25vZmxvLWludGVyYWN0aW9uIiwidmVyc2lvbiI6IjAuMC4xIiwia2V5d29yZHMiOltdLCJkZXBlbmRlbmNpZXMiOnsibm9mbG8vbm9mbG8iOiIqIn0sInNjcmlwdHMiOlsiY29tcG9uZW50cy9MaXN0ZW5EcmFnLmNvZmZlZSIsImNvbXBvbmVudHMvTGlzdGVuSGFzaC5jb2ZmZWUiLCJjb21wb25lbnRzL0xpc3RlbktleWJvYXJkLmNvZmZlZSIsImNvbXBvbmVudHMvTGlzdGVuTW91c2UuY29mZmVlIiwiY29tcG9uZW50cy9MaXN0ZW5Qb2ludGVyLmNvZmZlZSIsImNvbXBvbmVudHMvTGlzdGVuU2Nyb2xsLmNvZmZlZSIsImNvbXBvbmVudHMvTGlzdGVuU3BlZWNoLmNvZmZlZSIsImNvbXBvbmVudHMvTGlzdGVuVG91Y2guY29mZmVlIiwiY29tcG9uZW50cy9TZXRIYXNoLmNvZmZlZSIsImNvbXBvbmVudHMvUmVhZENvb3JkaW5hdGVzLmNvZmZlZSIsImluZGV4LmpzIl0sImpzb24iOlsiY29tcG9uZW50Lmpzb24iXSwibm9mbG8iOnsiaWNvbiI6InVzZXIiLCJjb21wb25lbnRzIjp7Ikxpc3RlbkRyYWciOiJjb21wb25lbnRzL0xpc3RlbkRyYWcuY29mZmVlIiwiTGlzdGVuSGFzaCI6ImNvbXBvbmVudHMvTGlzdGVuSGFzaC5jb2ZmZWUiLCJMaXN0ZW5LZXlib2FyZCI6ImNvbXBvbmVudHMvTGlzdGVuS2V5Ym9hcmQuY29mZmVlIiwiTGlzdGVuTW91c2UiOiJjb21wb25lbnRzL0xpc3Rlbk1vdXNlLmNvZmZlZSIsIkxpc3RlblBvaW50ZXIiOiJjb21wb25lbnRzL0xpc3RlblBvaW50ZXIuY29mZmVlIiwiTGlzdGVuU2Nyb2xsIjoiY29tcG9uZW50cy9MaXN0ZW5TY3JvbGwuY29mZmVlIiwiTGlzdGVuU3BlZWNoIjoiY29tcG9uZW50cy9MaXN0ZW5TcGVlY2guY29mZmVlIiwiTGlzdGVuVG91Y2giOiJjb21wb25lbnRzL0xpc3RlblRvdWNoLmNvZmZlZSIsIlJlYWRDb29yZGluYXRlcyI6ImNvbXBvbmVudHMvUmVhZENvb3JkaW5hdGVzLmNvZmZlZSIsIlNldEhhc2giOiJjb21wb25lbnRzL1NldEhhc2guY29mZmVlIn19fScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5EcmFnLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIExpc3RlbkRyYWcsIG5vZmxvLAogIF9fYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpMaXN0ZW5EcmFnID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhMaXN0ZW5EcmFnLCBfc3VwZXIpOwoKICBMaXN0ZW5EcmFnLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdMaXN0ZW4gdG8gZHJhZyBldmVudHMgb24gYSBET00gZWxlbWVudCc7CgogIGZ1bmN0aW9uIExpc3RlbkRyYWcoKSB7CiAgICB0aGlzLmRyYWdlbmQgPSBfX2JpbmQodGhpcy5kcmFnZW5kLCB0aGlzKTsKICAgIHRoaXMuZHJhZ21vdmUgPSBfX2JpbmQodGhpcy5kcmFnbW92ZSwgdGhpcyk7CiAgICB0aGlzLmRyYWdzdGFydCA9IF9fYmluZCh0aGlzLmRyYWdzdGFydCwgdGhpcyk7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBzdGFydDogbmV3IG5vZmxvLkFycmF5UG9ydCgnb2JqZWN0JyksCiAgICAgIG1vdmV4OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdudW1iZXInKSwKICAgICAgbW92ZXk6IG5ldyBub2Zsby5BcnJheVBvcnQoJ251bWJlcicpLAogICAgICBlbmQ6IG5ldyBub2Zsby5BcnJheVBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmVsZW1lbnQub24oJ2RhdGEnLCBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIHJldHVybiBfdGhpcy5zdWJzY3JpYmUoZWxlbWVudCk7CiAgICB9KTsKICB9CgogIExpc3RlbkRyYWcucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnc3RhcnQsIGZhbHNlKTsKICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZycsIHRoaXMuZHJhZ21vdmUsIGZhbHNlKTsKICAgIHJldHVybiBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLmRyYWdlbmQsIGZhbHNlKTsKICB9OwoKICBMaXN0ZW5EcmFnLnByb3RvdHlwZS5kcmFnc3RhcnQgPSBmdW5jdGlvbihldmVudCkgewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgdGhpcy5vdXRQb3J0cy5zdGFydC5zZW5kKGV2ZW50KTsKICAgIHJldHVybiB0aGlzLm91dFBvcnRzLnN0YXJ0LmRpc2Nvbm5lY3QoKTsKICB9OwoKICBMaXN0ZW5EcmFnLnByb3RvdHlwZS5kcmFnbW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB0aGlzLm91dFBvcnRzLm1vdmV4LnNlbmQoZXZlbnQuY2xpZW50WCk7CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5tb3ZleS5zZW5kKGV2ZW50LmNsaWVudFkpOwogIH07CgogIExpc3RlbkRyYWcucHJvdG90eXBlLmRyYWdlbmQgPSBmdW5jdGlvbihldmVudCkgewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgaWYgKHRoaXMub3V0UG9ydHMubW92ZXguaXNDb25uZWN0ZWQoKSkgewogICAgICB0aGlzLm91dFBvcnRzLm1vdmV4LmRpc2Nvbm5lY3QoKTsKICAgIH0KICAgIGlmICh0aGlzLm91dFBvcnRzLm1vdmV5LmlzQ29ubmVjdGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5tb3ZleS5kaXNjb25uZWN0KCk7CiAgICB9CiAgICB0aGlzLm91dFBvcnRzLmVuZC5zZW5kKGV2ZW50KTsKICAgIHJldHVybiB0aGlzLm91dFBvcnRzLmVuZC5kaXNjb25uZWN0KCk7CiAgfTsKCiAgcmV0dXJuIExpc3RlbkRyYWc7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IExpc3RlbkRyYWc7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5IYXNoLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIExpc3Rlbkhhc2gsIG5vZmxvLAogIF9fYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpMaXN0ZW5IYXNoID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhMaXN0ZW5IYXNoLCBfc3VwZXIpOwoKICBMaXN0ZW5IYXNoLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdMaXN0ZW4gZm9yIGhhc2ggY2hhbmdlcyBpbiBicm93c2VyXCdzIFVSTCBiYXInOwoKICBmdW5jdGlvbiBMaXN0ZW5IYXNoKCkgewogICAgdGhpcy5oYXNoQ2hhbmdlID0gX19iaW5kKHRoaXMuaGFzaENoYW5nZSwgdGhpcyk7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBzdGFydDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKSwKICAgICAgc3RvcDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIGluaXRpYWw6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKSwKICAgICAgY2hhbmdlOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLmluUG9ydHMuc3RhcnQub24oJ2RhdGEnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLnN1YnNjcmliZSgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc3RvcC5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMudW5zdWJzY3JpYmUoKTsKICAgIH0pOwogIH0KCiAgTGlzdGVuSGFzaC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgaW5pdGlhbEhhc2g7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuaGFzaENoYW5nZSwgZmFsc2UpOwogICAgaWYgKHRoaXMub3V0UG9ydHMuaW5pdGlhbC5pc0F0dGFjaGVkKCkpIHsKICAgICAgaW5pdGlhbEhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHIoMSk7CiAgICAgIHRoaXMub3V0UG9ydHMuaW5pdGlhbC5zZW5kKGluaXRpYWxIYXNoKTsKICAgICAgcmV0dXJuIHRoaXMub3V0UG9ydHMuaW5pdGlhbC5kaXNjb25uZWN0KCk7CiAgICB9CiAgfTsKCiAgTGlzdGVuSGFzaC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbigpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5oYXNoQ2hhbmdlLCBmYWxzZSk7CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5jaGFuZ2UuZGlzY29ubmVjdCgpOwogIH07CgogIExpc3Rlbkhhc2gucHJvdG90eXBlLmhhc2hDaGFuZ2UgPSBmdW5jdGlvbihldmVudCkgewogICAgdmFyIG5ld0hhc2gsIG9sZEhhc2g7CiAgICBvbGRIYXNoID0gZXZlbnQub2xkVVJMLnNwbGl0KCcjJylbMV07CiAgICBuZXdIYXNoID0gZXZlbnQubmV3VVJMLnNwbGl0KCcjJylbMV07CiAgICBpZiAoIW5ld0hhc2gpIHsKICAgICAgbmV3SGFzaCA9ICcnOwogICAgfQogICAgaWYgKG9sZEhhc2gpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5jaGFuZ2UuYmVnaW5Hcm91cChvbGRIYXNoKTsKICAgIH0KICAgIHRoaXMub3V0UG9ydHMuY2hhbmdlLnNlbmQobmV3SGFzaCk7CiAgICBpZiAob2xkSGFzaCkgewogICAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5jaGFuZ2UuZW5kR3JvdXAob2xkSGFzaCk7CiAgICB9CiAgfTsKCiAgTGlzdGVuSGFzaC5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLnVuc3Vic2NyaWJlKCk7CiAgfTsKCiAgcmV0dXJuIExpc3Rlbkhhc2g7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IExpc3Rlbkhhc2g7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5LZXlib2FyZC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBMaXN0ZW5LZXlib2FyZCwgbm9mbG8sCiAgX19iaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkxpc3RlbktleWJvYXJkID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhMaXN0ZW5LZXlib2FyZCwgX3N1cGVyKTsKCiAgTGlzdGVuS2V5Ym9hcmQucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0xpc3RlbiBmb3Iga2V5IHByZXNzZXMgb24gYSBnaXZlbiBET00gZWxlbWVudCc7CgogIExpc3RlbktleWJvYXJkLnByb3RvdHlwZS5pY29uID0gJ2tleWJvYXJkJzsKCiAgZnVuY3Rpb24gTGlzdGVuS2V5Ym9hcmQoKSB7CiAgICB0aGlzLmtleXByZXNzID0gX19iaW5kKHRoaXMua2V5cHJlc3MsIHRoaXMpOwogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuZWxlbWVudHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBzdG9wOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBrZXlwcmVzczogbmV3IG5vZmxvLlBvcnQoJ2ludGVnZXInKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGVsZW1lbnQpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc3RvcC5vbignZGF0YScsIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgcmV0dXJuIF90aGlzLnVuc3Vic2NyaWJlKGVsZW1lbnQpOwogICAgfSk7CiAgfQoKICBMaXN0ZW5LZXlib2FyZC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIHRoaXMua2V5cHJlc3MsIGZhbHNlKTsKICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLnB1c2goZWxlbWVudCk7CiAgfTsKCiAgTGlzdGVuS2V5Ym9hcmQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgaWYgKC0xID09PSB0aGlzLmVsZW1lbnRzLmluZGV4T2YoZWxlbWVudCkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIHRoaXMua2V5cHJlc3MsIGZhbHNlKTsKICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLnNwbGljZSh0aGlzLmVsZW1lbnRzLmluZGV4T2YoZWxlbWVudCksIDEpOwogIH07CgogIExpc3RlbktleWJvYXJkLnByb3RvdHlwZS5rZXlwcmVzcyA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBpZiAoIXRoaXMub3V0UG9ydHMua2V5cHJlc3MuaXNBdHRhY2hlZCgpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMub3V0UG9ydHMua2V5cHJlc3Muc2VuZChldmVudC5rZXlDb2RlKTsKICAgIHJldHVybiB0aGlzLm91dFBvcnRzLmtleXByZXNzLmRpc2Nvbm5lY3QoKTsKICB9OwoKICBMaXN0ZW5LZXlib2FyZC5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbigpIHsKICAgIHZhciBlbGVtZW50LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICBfcmVmID0gdGhpcy5lbGVtZW50czsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgZWxlbWVudCA9IF9yZWZbX2ldOwogICAgICBfcmVzdWx0cy5wdXNoKHRoaXMudW5zdWJzY3JpYmUoZWxlbWVudCkpOwogICAgfQogICAgcmV0dXJuIF9yZXN1bHRzOwogIH07CgogIHJldHVybiBMaXN0ZW5LZXlib2FyZDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgTGlzdGVuS2V5Ym9hcmQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5Nb3VzZS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBMaXN0ZW5Nb3VzZSwgbm9mbG8sCiAgX19iaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkxpc3Rlbk1vdXNlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhMaXN0ZW5Nb3VzZSwgX3N1cGVyKTsKCiAgTGlzdGVuTW91c2UucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0xpc3RlbiB0byBtb3VzZSBldmVudHMgb24gYSBET00gZWxlbWVudCc7CgogIGZ1bmN0aW9uIExpc3Rlbk1vdXNlKCkgewogICAgdGhpcy5kYmxjbGljayA9IF9fYmluZCh0aGlzLmRibGNsaWNrLCB0aGlzKTsKICAgIHRoaXMuY2xpY2sgPSBfX2JpbmQodGhpcy5jbGljaywgdGhpcyk7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBjbGljazogbmV3IG5vZmxvLkFycmF5UG9ydCgnb2JqZWN0JyksCiAgICAgIGRibGNsaWNrOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGVsZW1lbnQpOwogICAgfSk7CiAgfQoKICBMaXN0ZW5Nb3VzZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2ssIGZhbHNlKTsKICAgIHJldHVybiBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgdGhpcy5kYmxjbGljaywgZmFsc2UpOwogIH07CgogIExpc3Rlbk1vdXNlLnByb3RvdHlwZS5jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBpZiAoIXRoaXMub3V0UG9ydHMuY2xpY2suc29ja2V0cy5sZW5ndGgpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgdGhpcy5vdXRQb3J0cy5jbGljay5zZW5kKGV2ZW50KTsKICAgIHJldHVybiB0aGlzLm91dFBvcnRzLmNsaWNrLmRpc2Nvbm5lY3QoKTsKICB9OwoKICBMaXN0ZW5Nb3VzZS5wcm90b3R5cGUuZGJsY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewogICAgaWYgKCF0aGlzLm91dFBvcnRzLmRibGNsaWNrLnNvY2tldHMubGVuZ3RoKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgIHRoaXMub3V0UG9ydHMuZGJsY2xpY2suc2VuZChldmVudCk7CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5kYmxjbGljay5kaXNjb25uZWN0KCk7CiAgfTsKCiAgcmV0dXJuIExpc3Rlbk1vdXNlOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBMaXN0ZW5Nb3VzZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblBvaW50ZXIuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgTGlzdGVuUG9pbnRlciwgbm9mbG8sCiAgX19iaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkxpc3RlblBvaW50ZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKExpc3RlblBvaW50ZXIsIF9zdXBlcik7CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0xpc3RlbiB0byBwb2ludGVyIGV2ZW50cyBvbiBhIERPTSBlbGVtZW50JzsKCiAgZnVuY3Rpb24gTGlzdGVuUG9pbnRlcigpIHsKICAgIHRoaXMucG9pbnRlckxlYXZlID0gX19iaW5kKHRoaXMucG9pbnRlckxlYXZlLCB0aGlzKTsKICAgIHRoaXMucG9pbnRlckVudGVyID0gX19iaW5kKHRoaXMucG9pbnRlckVudGVyLCB0aGlzKTsKICAgIHRoaXMucG9pbnRlck91dCA9IF9fYmluZCh0aGlzLnBvaW50ZXJPdXQsIHRoaXMpOwogICAgdGhpcy5wb2ludGVyT3ZlciA9IF9fYmluZCh0aGlzLnBvaW50ZXJPdmVyLCB0aGlzKTsKICAgIHRoaXMucG9pbnRlck1vdmUgPSBfX2JpbmQodGhpcy5wb2ludGVyTW92ZSwgdGhpcyk7CiAgICB0aGlzLnBvaW50ZXJDYW5jZWwgPSBfX2JpbmQodGhpcy5wb2ludGVyQ2FuY2VsLCB0aGlzKTsKICAgIHRoaXMucG9pbnRlclVwID0gX19iaW5kKHRoaXMucG9pbnRlclVwLCB0aGlzKTsKICAgIHRoaXMucG9pbnRlckRvd24gPSBfX2JpbmQodGhpcy5wb2ludGVyRG93biwgdGhpcyk7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5hY3Rpb24gPSAnbm9uZSc7CiAgICB0aGlzLmNhcHR1cmUgPSBmYWxzZTsKICAgIHRoaXMucHJvcGFnYXRlID0gZmFsc2U7CiAgICB0aGlzLmVsZW1lbnRzID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIGVsZW1lbnQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgYWN0aW9uOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJyksCiAgICAgIGNhcHR1cmU6IG5ldyBub2Zsby5Qb3J0KCdib29sZWFuJyksCiAgICAgIHByb3BhZ2F0ZTogbmV3IG5vZmxvLlBvcnQoJ2Jvb2xlYW4nKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIGRvd246IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgdXA6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgY2FuY2VsOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIG1vdmU6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgb3ZlcjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgZW50ZXI6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgbGVhdmU6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGVsZW1lbnQpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuYWN0aW9uLm9uKCdkYXRhJywgZnVuY3Rpb24oYWN0aW9uKSB7CiAgICAgIF90aGlzLmFjdGlvbiA9IGFjdGlvbjsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmNhcHR1cmUub24oJ2RhdGEnLCBmdW5jdGlvbihjYXB0dXJlKSB7CiAgICAgIF90aGlzLmNhcHR1cmUgPSBjYXB0dXJlOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucHJvcGFnYXRlLm9uKCdkYXRhJywgZnVuY3Rpb24ocHJvcGFnYXRlKSB7CiAgICAgIF90aGlzLnByb3BhZ2F0ZSA9IHByb3BhZ2F0ZTsKICAgIH0pOwogIH0KCiAgTGlzdGVuUG9pbnRlci5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgaWYgKGVsZW1lbnQuc2V0QXR0cmlidXRlKSB7CiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0b3VjaC1hY3Rpb24nLCB0aGlzLmFjdGlvbik7CiAgICB9CiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgdGhpcy5wb2ludGVyRG93biwgdGhpcy5jYXB0dXJlKTsKICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgdGhpcy5wb2ludGVyVXAsIHRoaXMuY2FwdHVyZSk7CiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJjYW5jZWwnLCB0aGlzLnBvaW50ZXJDYW5jZWwsIHRoaXMuY2FwdHVyZSk7CiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgdGhpcy5wb2ludGVyTW92ZSwgdGhpcy5jYXB0dXJlKTsKICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm92ZXInLCB0aGlzLnBvaW50ZXJPdmVyLCB0aGlzLmNhcHR1cmUpOwogICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyb3V0JywgdGhpcy5wb2ludGVyT3V0LCB0aGlzLmNhcHR1cmUpOwogICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZW50ZXInLCB0aGlzLnBvaW50ZXJFbnRlciwgdGhpcy5jYXB0dXJlKTsKICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxlYXZlJywgdGhpcy5wb2ludGVyTGVhdmUsIHRoaXMuY2FwdHVyZSk7CiAgICByZXR1cm4gdGhpcy5lbGVtZW50cy5wdXNoKGVsZW1lbnQpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgdmFyIG5hbWUsIHBvcnQsIF9yZWYsIF9yZXN1bHRzOwogICAgaWYgKGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKSB7CiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCd0b3VjaC1hY3Rpb24nKTsKICAgIH0KICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCB0aGlzLnBvaW50ZXJEb3duLCB0aGlzLmNhcHR1cmUpOwogICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCB0aGlzLnBvaW50ZXJVcCwgdGhpcy5jYXB0dXJlKTsKICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmNhbmNlbCcsIHRoaXMucG9pbnRlckNhbmNlbCwgdGhpcy5jYXB0dXJlKTsKICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCB0aGlzLnBvaW50ZXJNb3ZlLCB0aGlzLmNhcHR1cmUpOwogICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVyb3ZlcicsIHRoaXMucG9pbnRlck92ZXIsIHRoaXMuY2FwdHVyZSk7CiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJvdXQnLCB0aGlzLnBvaW50ZXJPdXQsIHRoaXMuY2FwdHVyZSk7CiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJlbnRlcicsIHRoaXMucG9pbnRlckVudGVyLCB0aGlzLmNhcHR1cmUpOwogICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybGVhdmUnLCB0aGlzLnBvaW50ZXJMZWF2ZSwgdGhpcy5jYXB0dXJlKTsKICAgIF9yZWYgPSB0aGlzLm91dFBvcnRzOwogICAgX3Jlc3VsdHMgPSBbXTsKICAgIGZvciAobmFtZSBpbiBfcmVmKSB7CiAgICAgIHBvcnQgPSBfcmVmW25hbWVdOwogICAgICBpZiAoIXBvcnQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgX3Jlc3VsdHMucHVzaChwb3J0LmRpc2Nvbm5lY3QoKSk7CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHM7CiAgfTsKCiAgTGlzdGVuUG9pbnRlci5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbigpIHsKICAgIHZhciBlbGVtZW50LCBfaSwgX2xlbiwgX3JlZjsKICAgIF9yZWYgPSB0aGlzLmVsZW1lbnRzOwogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgIGVsZW1lbnQgPSBfcmVmW19pXTsKICAgICAgdGhpcy51bnN1YnNjcmliZShlbGVtZW50KTsKICAgIH0KICAgIHJldHVybiB0aGlzLmVsZW1lbnRzID0gW107CiAgfTsKCiAgTGlzdGVuUG9pbnRlci5wcm90b3R5cGUucG9pbnRlckRvd24gPSBmdW5jdGlvbihldmVudCkgewogICAgcmV0dXJuIHRoaXMuaGFuZGxlKGV2ZW50LCAnZG93bicpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLnBvaW50ZXJVcCA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICByZXR1cm4gdGhpcy5oYW5kbGUoZXZlbnQsICd1cCcpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLnBvaW50ZXJDYW5jZWwgPSBmdW5jdGlvbihldmVudCkgewogICAgcmV0dXJuIHRoaXMuaGFuZGxlKGV2ZW50LCAnY2FuY2VsJyk7CiAgfTsKCiAgTGlzdGVuUG9pbnRlci5wcm90b3R5cGUucG9pbnRlck1vdmUgPSBmdW5jdGlvbihldmVudCkgewogICAgcmV0dXJuIHRoaXMuaGFuZGxlKGV2ZW50LCAnbW92ZScpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLnBvaW50ZXJPdmVyID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgIHJldHVybiB0aGlzLmhhbmRsZShldmVudCwgJ292ZXInKTsKICB9OwoKICBMaXN0ZW5Qb2ludGVyLnByb3RvdHlwZS5wb2ludGVyT3V0ID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgIHJldHVybiB0aGlzLmhhbmRsZShldmVudCwgJ291dCcpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLnBvaW50ZXJFbnRlciA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICByZXR1cm4gdGhpcy5oYW5kbGUoZXZlbnQsICdlbnRlcicpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLnBvaW50ZXJMZWF2ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICByZXR1cm4gdGhpcy5oYW5kbGUoZXZlbnQsICdsZWF2ZScpOwogIH07CgogIExpc3RlblBvaW50ZXIucHJvdG90eXBlLmhhbmRsZSA9IGZ1bmN0aW9uKGV2ZW50LCB0eXBlKSB7CiAgICB2YXIgbmFtZSwgcG9ydCwgX3JlZiwgX3Jlc3VsdHM7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgaWYgKCF0aGlzLnByb3BhZ2F0ZSkgewogICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0KICAgIGlmICghdGhpcy5vdXRQb3J0c1t0eXBlXS5pc0F0dGFjaGVkKCkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5vdXRQb3J0c1t0eXBlXS5iZWdpbkdyb3VwKGV2ZW50LnBvaW50ZXJJZCk7CiAgICB0aGlzLm91dFBvcnRzW3R5cGVdLnNlbmQoZXZlbnQpOwogICAgdGhpcy5vdXRQb3J0c1t0eXBlXS5lbmRHcm91cCgpOwogICAgaWYgKHR5cGUgPT09ICd1cCcgfHwgdHlwZSA9PT0gJ2NhbmNlbCcgfHwgdHlwZSA9PT0gJ2xlYXZlJykgewogICAgICBfcmVmID0gdGhpcy5vdXRQb3J0czsKICAgICAgX3Jlc3VsdHMgPSBbXTsKICAgICAgZm9yIChuYW1lIGluIF9yZWYpIHsKICAgICAgICBwb3J0ID0gX3JlZltuYW1lXTsKICAgICAgICBpZiAoIXBvcnQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgX3Jlc3VsdHMucHVzaChwb3J0LmRpc2Nvbm5lY3QoKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF9yZXN1bHRzOwogICAgfQogIH07CgogIHJldHVybiBMaXN0ZW5Qb2ludGVyOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBMaXN0ZW5Qb2ludGVyOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuU2Nyb2xsLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIExpc3RlblNjcm9sbCwgbm9mbG8sCiAgX19iaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkxpc3RlblNjcm9sbCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoTGlzdGVuU2Nyb2xsLCBfc3VwZXIpOwoKICBMaXN0ZW5TY3JvbGwucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0xpc3RlbiB0byBzY3JvbGwgZXZlbnRzIG9uIHRoZSBicm93c2VyIHdpbmRvdyc7CgogIGZ1bmN0aW9uIExpc3RlblNjcm9sbCgpIHsKICAgIHRoaXMuc2Nyb2xsID0gX19iaW5kKHRoaXMuc2Nyb2xsLCB0aGlzKTsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIHN0YXJ0OiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpLAogICAgICBzdG9wOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgdG9wOiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyksCiAgICAgIGJvdHRvbTogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpLAogICAgICBsZWZ0OiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyksCiAgICAgIHJpZ2h0OiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJykKICAgIH07CiAgICB0aGlzLmluUG9ydHMuc3RhcnQub24oJ2RhdGEnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLnN1YnNjcmliZSgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc3RvcC5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMudW5zdWJzY3JpYmUoKTsKICAgIH0pOwogIH0KCiAgTGlzdGVuU2Nyb2xsLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGwsIGZhbHNlKTsKICB9OwoKICBMaXN0ZW5TY3JvbGwucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVucignc2Nyb2xsJywgdGhpcy5zY3JvbGwsIGZhbHNlKTsKICB9OwoKICBMaXN0ZW5TY3JvbGwucHJvdG90eXBlLnNjcm9sbCA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICB2YXIgYm90dG9tLCBsZWZ0LCByaWdodCwgdG9wOwogICAgdG9wID0gd2luZG93LnNjcm9sbFk7CiAgICBsZWZ0ID0gd2luZG93LnNjcm9sbFg7CiAgICBpZiAodGhpcy5vdXRQb3J0cy50b3AuaXNBdHRhY2hlZCgpKSB7CiAgICAgIHRoaXMub3V0UG9ydHMudG9wLnNlbmQodG9wKTsKICAgICAgdGhpcy5vdXRQb3J0cy50b3AuZGlzY29ubmVjdCgpOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMuYm90dG9tLmlzQXR0YWNoZWQoKSkgewogICAgICBib3R0b20gPSB0b3AgKyB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICAgIHRoaXMub3V0UG9ydHMuYm90dG9tLnNlbmQoYm90dG9tKTsKICAgICAgdGhpcy5vdXRQb3J0cy5ib3R0b20uZGlzY29ubmVjdCgpOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMubGVmdC5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5sZWZ0LnNlbmQobGVmdCk7CiAgICAgIHRoaXMub3V0UG9ydHMubGVmdC5kaXNjb25uZWN0KCk7CiAgICB9CiAgICBpZiAodGhpcy5vdXRQb3J0cy5yaWdodC5pc0F0dGFjaGVkKCkpIHsKICAgICAgcmlnaHQgPSBsZWZ0ICsgd2luZG93LmlubmVyV2lkdGg7CiAgICAgIHRoaXMub3V0UG9ydHMucmlnaHQuc2VuZChyaWdodCk7CiAgICAgIHJldHVybiB0aGlzLm91dFBvcnRzLnJpZ2h0LmRpc2Nvbm5lY3QoKTsKICAgIH0KICB9OwoKICBMaXN0ZW5TY3JvbGwucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy51bnN1YnNjcmliZSgpOwogIH07CgogIHJldHVybiBMaXN0ZW5TY3JvbGw7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IExpc3RlblNjcm9sbDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNwZWVjaC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBMaXN0ZW5TcGVlY2gsIG5vZmxvLAogIF9fYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpMaXN0ZW5TcGVlY2ggPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKExpc3RlblNwZWVjaCwgX3N1cGVyKTsKCiAgTGlzdGVuU3BlZWNoLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdMaXN0ZW4gZm9yIHVzZXJcJ3MgbWljcm9waG9uZSBhbmQgcmVjb2duaXplIHBocmFzZXMnOwoKICBmdW5jdGlvbiBMaXN0ZW5TcGVlY2goKSB7CiAgICB0aGlzLmhhbmRsZUVycm9yID0gX19iaW5kKHRoaXMuaGFuZGxlRXJyb3IsIHRoaXMpOwogICAgdGhpcy5oYW5kbGVSZXN1bHQgPSBfX2JpbmQodGhpcy5oYW5kbGVSZXN1bHQsIHRoaXMpOwogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucmVjb2duaXRpb24gPSBmYWxzZTsKICAgIHRoaXMuc2VudCA9IFtdOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBzdGFydDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKSwKICAgICAgc3RvcDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIHJlc3VsdDogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpLAogICAgICBlcnJvcjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLnN0YXJ0Lm9uKCdkYXRhJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5zdGFydExpc3RlbmluZygpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc3RvcC5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuc3RvcExpc3RlbmluZygpOwogICAgfSk7CiAgfQoKICBMaXN0ZW5TcGVlY2gucHJvdG90eXBlLnN0YXJ0TGlzdGVuaW5nID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoIXdpbmRvdy53ZWJraXRTcGVlY2hSZWNvZ25pdGlvbikgewogICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcignU3BlZWNoIHJlY29nbml0aW9uIHN1cHBvcnQgbm90IGF2YWlsYWJsZScpKTsKICAgIH0KICAgIHRoaXMucmVjb2duaXRpb24gPSBuZXcgd2luZG93LndlYmtpdFNwZWVjaFJlY29nbml0aW9uOwogICAgdGhpcy5yZWNvZ25pdGlvbi5jb250aW51b3VzID0gdHJ1ZTsKICAgIHRoaXMucmVjb2duaXRpb24uc3RhcnQoKTsKICAgIHRoaXMub3V0UG9ydHMucmVzdWx0LmNvbm5lY3QoKTsKICAgIHRoaXMucmVjb2duaXRpb24ub25yZXN1bHQgPSB0aGlzLmhhbmRsZVJlc3VsdDsKICAgIHJldHVybiB0aGlzLnJlY29nbml0aW9uLm9uZXJyb3IgPSB0aGlzLmhhbmRsZUVycm9yOwogIH07CgogIExpc3RlblNwZWVjaC5wcm90b3R5cGUuaGFuZGxlUmVzdWx0ID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgIHZhciBpZHgsIHJlc3VsdCwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzOwogICAgX3JlZiA9IGV2ZW50LnJlc3VsdHM7CiAgICBfcmVzdWx0cyA9IFtdOwogICAgZm9yIChpZHggPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpZHggPSArK19pKSB7CiAgICAgIHJlc3VsdCA9IF9yZWZbaWR4XTsKICAgICAgaWYgKCFyZXN1bHQuaXNGaW5hbCkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmICh0aGlzLnNlbnQuaW5kZXhPZihpZHgpICE9PSAtMSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIHRoaXMub3V0UG9ydHMucmVzdWx0LnNlbmQocmVzdWx0WzBdLnRyYW5zY3JpcHQpOwogICAgICBfcmVzdWx0cy5wdXNoKHRoaXMuc2VudC5wdXNoKGlkeCkpOwogICAgfQogICAgcmV0dXJuIF9yZXN1bHRzOwogIH07CgogIExpc3RlblNwZWVjaC5wcm90b3R5cGUuaGFuZGxlRXJyb3IgPSBmdW5jdGlvbihlcnJvcikgewogICAgaWYgKHRoaXMub3V0UG9ydHMuZXJyb3IuaXNBdHRhY2hlZCgpKSB7CiAgICAgIHRoaXMub3V0UG9ydHMuZXJyb3Iuc2VuZChlcnJvcik7CiAgICAgIHRoaXMub3V0UG9ydHMuZXJyb3IuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm47CiAgICB9CiAgICB0aHJvdyBlcnJvcjsKICB9OwoKICBMaXN0ZW5TcGVlY2gucHJvdG90eXBlLnN0b3BMaXN0ZW5pbmcgPSBmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5yZWNvZ25pdGlvbikgewogICAgICByZXR1cm47CiAgICB9CiAgICB0aGlzLm91dFBvcnRzLnJlc3VsdC5kaXNjb25uZWN0KCk7CiAgICB0aGlzLnJlY29nbml0aW9uLnN0b3AoKTsKICAgIHRoaXMucmVjb2duaXRpb24gPSBudWxsOwogICAgcmV0dXJuIHRoaXMuc2VudCA9IFtdOwogIH07CgogIExpc3RlblNwZWVjaC5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLnN0b3BMaXN0ZW5pbmcoKTsKICB9OwoKICByZXR1cm4gTGlzdGVuU3BlZWNoOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBMaXN0ZW5TcGVlY2g7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5Ub3VjaC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBMaXN0ZW5Ub3VjaCwgbm9mbG8sCiAgX19iaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkxpc3RlblRvdWNoID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhMaXN0ZW5Ub3VjaCwgX3N1cGVyKTsKCiAgTGlzdGVuVG91Y2gucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0xpc3RlbiB0byB0b3VjaCBldmVudHMgb24gYSBET00gZWxlbWVudCc7CgogIGZ1bmN0aW9uIExpc3RlblRvdWNoKCkgewogICAgdGhpcy50b3VjaGVuZCA9IF9fYmluZCh0aGlzLnRvdWNoZW5kLCB0aGlzKTsKICAgIHRoaXMudG91Y2htb3ZlID0gX19iaW5kKHRoaXMudG91Y2htb3ZlLCB0aGlzKTsKICAgIHRoaXMudG91Y2hzdGFydCA9IF9fYmluZCh0aGlzLnRvdWNoc3RhcnQsIHRoaXMpOwogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgc3RhcnQ6IG5ldyBub2Zsby5BcnJheVBvcnQoJ29iamVjdCcpLAogICAgICBtb3ZleDogbmV3IG5vZmxvLkFycmF5UG9ydCgnbnVtYmVyJyksCiAgICAgIG1vdmV5OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdudW1iZXInKSwKICAgICAgZW5kOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGVsZW1lbnQpOwogICAgfSk7CiAgfQoKICBMaXN0ZW5Ub3VjaC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy50b3VjaHN0YXJ0LCBmYWxzZSk7CiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMudG91Y2htb3ZlLCBmYWxzZSk7CiAgICByZXR1cm4gZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMudG91Y2hlbmQsIGZhbHNlKTsKICB9OwoKICBMaXN0ZW5Ub3VjaC5wcm90b3R5cGUudG91Y2hzdGFydCA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICB2YXIgaWR4LCB0b3VjaCwgX2ksIF9sZW4sIF9yZWY7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBpZiAoIWV2ZW50LmNoYW5nZWRUb3VjaGVzKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICghZXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIF9yZWYgPSBldmVudC5jaGFuZ2VkVG91Y2hlczsKICAgIGZvciAoaWR4ID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgaWR4ID0gKytfaSkgewogICAgICB0b3VjaCA9IF9yZWZbaWR4XTsKICAgICAgdGhpcy5vdXRQb3J0cy5zdGFydC5iZWdpbkdyb3VwKGlkeCk7CiAgICAgIHRoaXMub3V0UG9ydHMuc3RhcnQuc2VuZChldmVudCk7CiAgICAgIHRoaXMub3V0UG9ydHMuc3RhcnQuZW5kR3JvdXAoKTsKICAgIH0KICAgIHJldHVybiB0aGlzLm91dFBvcnRzLnN0YXJ0LmRpc2Nvbm5lY3QoKTsKICB9OwoKICBMaXN0ZW5Ub3VjaC5wcm90b3R5cGUudG91Y2htb3ZlID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgIHZhciBpZHgsIHRvdWNoLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBpZiAoIWV2ZW50LmNoYW5nZWRUb3VjaGVzKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICghZXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIF9yZWYgPSBldmVudC5jaGFuZ2VkVG91Y2hlczsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKGlkeCA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGlkeCA9ICsrX2kpIHsKICAgICAgdG91Y2ggPSBfcmVmW2lkeF07CiAgICAgIHRoaXMub3V0UG9ydHMubW92ZXguYmVnaW5Hcm91cChpZHgpOwogICAgICB0aGlzLm91dFBvcnRzLm1vdmV4LnNlbmQodG91Y2gucGFnZVgpOwogICAgICB0aGlzLm91dFBvcnRzLm1vdmV4LmVuZEdyb3VwKCk7CiAgICAgIHRoaXMub3V0UG9ydHMubW92ZXkuYmVnaW5Hcm91cChpZHgpOwogICAgICB0aGlzLm91dFBvcnRzLm1vdmV5LnNlbmQodG91Y2gucGFnZVkpOwogICAgICBfcmVzdWx0cy5wdXNoKHRoaXMub3V0UG9ydHMubW92ZXkuZW5kR3JvdXAoKSk7CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHM7CiAgfTsKCiAgTGlzdGVuVG91Y2gucHJvdG90eXBlLnRvdWNoZW5kID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgIHZhciBpZHgsIHRvdWNoLCBfaSwgX2xlbiwgX3JlZjsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgIGlmICghZXZlbnQuY2hhbmdlZFRvdWNoZXMpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCFldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMubW92ZXguaXNDb25uZWN0ZWQoKSkgewogICAgICB0aGlzLm91dFBvcnRzLm1vdmV4LmRpc2Nvbm5lY3QoKTsKICAgIH0KICAgIGlmICh0aGlzLm91dFBvcnRzLm1vdmV5LmlzQ29ubmVjdGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5tb3ZleS5kaXNjb25uZWN0KCk7CiAgICB9CiAgICBfcmVmID0gZXZlbnQuY2hhbmdlZFRvdWNoZXM7CiAgICBmb3IgKGlkeCA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGlkeCA9ICsrX2kpIHsKICAgICAgdG91Y2ggPSBfcmVmW2lkeF07CiAgICAgIHRoaXMub3V0UG9ydHMuZW5kLmJlZ2luR3JvdXAoaWR4KTsKICAgICAgdGhpcy5vdXRQb3J0cy5lbmQuc2VuZChldmVudCk7CiAgICAgIHRoaXMub3V0UG9ydHMuZW5kLmVuZEdyb3VwKCk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5lbmQuZGlzY29ubmVjdCgpOwogIH07CgogIHJldHVybiBMaXN0ZW5Ub3VjaDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgTGlzdGVuVG91Y2g7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9TZXRIYXNoLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFNldEhhc2gsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKU2V0SGFzaCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoU2V0SGFzaCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gU2V0SGFzaCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIGhhc2g6IG5ldyBub2Zsby5BcnJheVBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLmluUG9ydHMuaGFzaC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAiIyIgKyBkYXRhOwogICAgICBpZiAoX3RoaXMub3V0UG9ydHMub3V0LmlzQXR0YWNoZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuaGFzaC5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoX3RoaXMub3V0UG9ydHMub3V0LmlzQXR0YWNoZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgICB9CiAgICB9KTsKICB9CgogIHJldHVybiBTZXRIYXNoOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBTZXRIYXNoOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvUmVhZENvb3JkaW5hdGVzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlYWRDb29yZGluYXRlcywgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpSZWFkQ29vcmRpbmF0ZXMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFJlYWRDb29yZGluYXRlcywgX3N1cGVyKTsKCiAgUmVhZENvb3JkaW5hdGVzLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdSZWFkIHRoZSBjb29yZGluYXRlcyBmcm9tIGEgRE9NIGV2ZW50JzsKCiAgZnVuY3Rpb24gUmVhZENvb3JkaW5hdGVzKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZXZlbnQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIHNjcmVlbjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBjbGllbnQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgcGFnZTogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmV2ZW50Lm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnNjcmVlbi5pc0F0dGFjaGVkKCkpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5zY3JlZW4uYmVnaW5Hcm91cChncm91cCk7CiAgICAgIH0KICAgICAgaWYgKF90aGlzLm91dFBvcnRzLmNsaWVudC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5jbGllbnQuYmVnaW5Hcm91cChncm91cCk7CiAgICAgIH0KICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnBhZ2UuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLnBhZ2UuYmVnaW5Hcm91cChncm91cCk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmV2ZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucmVhZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmV2ZW50Lm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoX3RoaXMub3V0UG9ydHMuc2NyZWVuLmlzQXR0YWNoZWQoKSkgewogICAgICAgIF90aGlzLm91dFBvcnRzLnNjcmVlbi5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5jbGllbnQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMuY2xpZW50LmVuZEdyb3VwKCk7CiAgICAgIH0KICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnBhZ2UuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLnBhZ2UuZW5kR3JvdXAoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZXZlbnQub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnNjcmVlbi5pc0F0dGFjaGVkKCkpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5zY3JlZW4uZGlzY29ubmVjdCgpOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5jbGllbnQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMuY2xpZW50LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgICBpZiAoX3RoaXMub3V0UG9ydHMucGFnZS5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMucGFnZS5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgUmVhZENvb3JkaW5hdGVzLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgIGlmICghZXZlbnQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMuc2NyZWVuLmlzQXR0YWNoZWQoKSAmJiBldmVudC5zY3JlZW5YICE9PSB2b2lkIDApIHsKICAgICAgdGhpcy5vdXRQb3J0cy5zY3JlZW4uc2VuZCh7CiAgICAgICAgeDogZXZlbnQuc2NyZWVuWCwKICAgICAgICB5OiBldmVudC5zY3JlZW5ZCiAgICAgIH0pOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMuY2xpZW50LmlzQXR0YWNoZWQoKSAmJiBldmVudC5jbGllbnRYICE9PSB2b2lkIDApIHsKICAgICAgdGhpcy5vdXRQb3J0cy5jbGllbnQuc2VuZCh7CiAgICAgICAgeDogZXZlbnQuY2xpZW50WCwKICAgICAgICB5OiBldmVudC5jbGllbnRZCiAgICAgIH0pOwogICAgfQogICAgaWYgKHRoaXMub3V0UG9ydHMucGFnZS5pc0F0dGFjaGVkKCkgJiYgZXZlbnQucGFnZVggIT09IHZvaWQgMCkgewogICAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5wYWdlLnNlbmQoewogICAgICAgIHg6IGV2ZW50LnBhZ2VYLAogICAgICAgIHk6IGV2ZW50LnBhZ2VZCiAgICAgIH0pOwogICAgfQogIH07CgogIHJldHVybiBSZWFkQ29vcmRpbmF0ZXM7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFJlYWRDb29yZGluYXRlczsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvaW5kZXguanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewovKgogKiBUaGlzIGZpbGUgY2FuIGJlIHVzZWQgZm9yIGdlbmVyYWwgbGlicmFyeSBmZWF0dXJlcyBvZiBncm91cHMuCiAqCiAqIFRoZSBsaWJyYXJ5IGZlYXR1cmVzIGNhbiBiZSBtYWRlIGF2YWlsYWJsZSBhcyBDb21tb25KUyBtb2R1bGVzIHRoYXQgdGhlCiAqIGNvbXBvbmVudHMgaW4gdGhpcyBwcm9qZWN0IHV0aWxpemUuCiAqLwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnQuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJuYW1lIjoibm9mbG8tZ3JvdXBzIiwiZGVzY3JpcHRpb24iOiJHcm91cCBVdGlsaXRpZXMgZm9yIE5vRmxvIiwia2V5d29yZHMiOlsibm9mbG8iLCJncm91cHMiLCJ1dGlsaXRpZXMiXSwiYXV0aG9yIjoiS2VubmV0aCBLYW4gPGtlbmhrYW5AZ21haWwuY29tPiIsInZlcnNpb24iOiIwLjEuMCIsInJlcG8iOiJrZW5oa2FuL2dyb3VwcyIsImRlcGVuZGVuY2llcyI6eyJjb21wb25lbnQvdW5kZXJzY29yZSI6IioiLCJub2Zsby9ub2ZsbyI6IioifSwic2NyaXB0cyI6WyJjb21wb25lbnRzL1JlYWRHcm91cHMuY29mZmVlIiwiY29tcG9uZW50cy9SZW1vdmVHcm91cHMuY29mZmVlIiwiY29tcG9uZW50cy9SZWdyb3VwLmNvZmZlZSIsImNvbXBvbmVudHMvR3JvdXAuY29mZmVlIiwiY29tcG9uZW50cy9Hcm91cFppcC5jb2ZmZWUiLCJjb21wb25lbnRzL0ZpbHRlckJ5R3JvdXAuY29mZmVlIiwiY29tcG9uZW50cy9PYmplY3RpZnkuY29mZmVlIiwiY29tcG9uZW50cy9SZWFkR3JvdXAuY29mZmVlIiwiY29tcG9uZW50cy9TZW5kQnlHcm91cC5jb2ZmZWUiLCJjb21wb25lbnRzL0NvbGxlY3RHcm91cHMuY29mZmVlIiwiY29tcG9uZW50cy9Db2xsZWN0T2JqZWN0LmNvZmZlZSIsImNvbXBvbmVudHMvRmlyc3RHcm91cC5jb2ZmZWUiLCJjb21wb25lbnRzL01hcEdyb3VwLmNvZmZlZSIsImNvbXBvbmVudHMvTWVyZ2VHcm91cHMuY29mZmVlIiwiY29tcG9uZW50cy9Hcm91cEJ5T2JqZWN0S2V5LmNvZmZlZSIsImluZGV4LmpzIl0sImpzb24iOlsiY29tcG9uZW50Lmpzb24iXSwibm9mbG8iOnsiaWNvbiI6InRhZ3MiLCJjb21wb25lbnRzIjp7IlJlYWRHcm91cHMiOiJjb21wb25lbnRzL1JlYWRHcm91cHMuY29mZmVlIiwiUmVtb3ZlR3JvdXBzIjoiY29tcG9uZW50cy9SZW1vdmVHcm91cHMuY29mZmVlIiwiUmVncm91cCI6ImNvbXBvbmVudHMvUmVncm91cC5jb2ZmZWUiLCJHcm91cCI6ImNvbXBvbmVudHMvR3JvdXAuY29mZmVlIiwiR3JvdXBaaXAiOiJjb21wb25lbnRzL0dyb3VwWmlwLmNvZmZlZSIsIkZpbHRlckJ5R3JvdXAiOiJjb21wb25lbnRzL0ZpbHRlckJ5R3JvdXAuY29mZmVlIiwiT2JqZWN0aWZ5IjoiY29tcG9uZW50cy9PYmplY3RpZnkuY29mZmVlIiwiUmVhZEdyb3VwIjoiY29tcG9uZW50cy9SZWFkR3JvdXAuY29mZmVlIiwiU2VuZEJ5R3JvdXAiOiJjb21wb25lbnRzL1NlbmRCeUdyb3VwLmNvZmZlZSIsIkNvbGxlY3RHcm91cHMiOiJjb21wb25lbnRzL0NvbGxlY3RHcm91cHMuY29mZmVlIiwiQ29sbGVjdE9iamVjdCI6ImNvbXBvbmVudHMvQ29sbGVjdE9iamVjdC5jb2ZmZWUiLCJGaXJzdEdyb3VwIjoiY29tcG9uZW50cy9GaXJzdEdyb3VwLmNvZmZlZSIsIk1hcEdyb3VwIjoiY29tcG9uZW50cy9NYXBHcm91cC5jb2ZmZWUiLCJNZXJnZUdyb3VwcyI6ImNvbXBvbmVudHMvTWVyZ2VHcm91cHMuY29mZmVlIiwiR3JvdXBCeU9iamVjdEtleSI6ImNvbXBvbmVudHMvR3JvdXBCeU9iamVjdEtleS5jb2ZmZWUifX19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9SZWFkR3JvdXBzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlYWRHcm91cHMsIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKXyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUnKTsKClJlYWRHcm91cHMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFJlYWRHcm91cHMsIF9zdXBlcik7CgogIGZ1bmN0aW9uIFJlYWRHcm91cHMoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5zdHJpcCA9IGZhbHNlOwogICAgdGhpcy50aHJlc2hvbGQgPSBJbmZpbml0eTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLkFycmF5UG9ydCwKICAgICAgc3RyaXA6IG5ldyBub2Zsby5Qb3J0LAogICAgICB0aHJlc2hvbGQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCwKICAgICAgZ3JvdXA6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLnRocmVzaG9sZC5vbignZGF0YScsIGZ1bmN0aW9uKHRocmVzaG9sZCkgewogICAgICByZXR1cm4gX3RoaXMudGhyZXNob2xkID0gcGFyc2VJbnQodGhyZXNob2xkKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnN0cmlwLm9uKCdkYXRhJywgZnVuY3Rpb24oc3RyaXApIHsKICAgICAgcmV0dXJuIF90aGlzLnN0cmlwID0gc3RyaXAgPT09ICd0cnVlJzsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLmNvdW50ID0gMDsKICAgICAgcmV0dXJuIF90aGlzLmdyb3VwcyA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICB2YXIgYmVnaW5Hcm91cDsKICAgICAgYmVnaW5Hcm91cCA9IGZ1bmN0aW9uKCkgewogICAgICAgIF90aGlzLmdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgICAgICBpZiAoX3RoaXMub3V0UG9ydHMub3V0LmlzQXR0YWNoZWQoKSkgewogICAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGlmIChfdGhpcy5jb3VudCA+PSBfdGhpcy50aHJlc2hvbGQpIHsKICAgICAgICByZXR1cm4gYmVnaW5Hcm91cChncm91cCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMuZ3JvdXAuc2VuZChncm91cCk7CiAgICAgICAgaWYgKCFfdGhpcy5zdHJpcCkgewogICAgICAgICAgYmVnaW5Hcm91cChncm91cCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfdGhpcy5jb3VudCsrOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICBpZiAoZ3JvdXAgPT09IF8ubGFzdChfdGhpcy5ncm91cHMpKSB7CiAgICAgICAgX3RoaXMuZ3JvdXBzLnBvcCgpOwogICAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5vdXQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLm91dC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5vdXQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuZ3JvdXAuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gUmVhZEdyb3VwczsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVhZEdyb3VwczsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9SZW1vdmVHcm91cHMuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUmVtb3ZlR3JvdXBzLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKClJlbW92ZUdyb3VwcyA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoUmVtb3ZlR3JvdXBzLCBfc3VwZXIpOwoKICBSZW1vdmVHcm91cHMucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gIlJlbW92ZSBhIGdyb3VwIGdpdmVuIGEgc3RyaW5nIG9yIGEgcmVnZXggc3RyaW5nIjsKCiAgZnVuY3Rpb24gUmVtb3ZlR3JvdXBzKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucmVnZXhwID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIHJlZ2V4cDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLnJlZ2V4cC5vbigiZGF0YSIsIGZ1bmN0aW9uKHJlZ2V4cCkgewogICAgICByZXR1cm4gX3RoaXMucmVnZXhwID0gbmV3IFJlZ0V4cChyZWdleHApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICBpZiAoKF90aGlzLnJlZ2V4cCAhPSBudWxsKSAmJiAoZ3JvdXAubWF0Y2goX3RoaXMucmVnZXhwKSA9PSBudWxsKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICBpZiAoKF90aGlzLnJlZ2V4cCAhPSBudWxsKSAmJiAoZ3JvdXAubWF0Y2goX3RoaXMucmVnZXhwKSA9PSBudWxsKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBSZW1vdmVHcm91cHM7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFJlbW92ZUdyb3VwczsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9SZWdyb3VwLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlZ3JvdXAsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKUmVncm91cCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoUmVncm91cCwgX3N1cGVyKTsKCiAgUmVncm91cC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiRm9yd2FyZCBhbGwgdGhlIGRhdGEgSVBzLCBzdHJpcCBhbGwgZ3JvdXBzLCBhbmQgcmVwbGFjZSAgdGhlbSB3aXRoIGdyb3VwcyBmcm9tIGFub3RoZXIgY29ubmVjdGlvbiI7CgogIGZ1bmN0aW9uIFJlZ3JvdXAoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5ncm91cHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGdyb3VwOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHMuZ3JvdXAub24oImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3VwcyA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZ3JvdXAub24oImRhdGEiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGdyb3VwLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICAgIF9yZWYgPSBfdGhpcy5ncm91cHM7CiAgICAgIF9yZXN1bHRzID0gW107CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGdyb3VwID0gX3JlZltfaV07CiAgICAgICAgX3Jlc3VsdHMucHVzaChfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgZ3JvdXAsIF9pLCBfbGVuLCBfcmVmOwogICAgICBfcmVmID0gX3RoaXMuZ3JvdXBzOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gUmVncm91cDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVncm91cDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Hcm91cC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBHcm91cCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpHcm91cCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR3JvdXAsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEdyb3VwKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMubmV3R3JvdXBzID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0LAogICAgICBncm91cDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBncm91cCwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzOwogICAgICBfcmVmID0gX3RoaXMubmV3R3JvdXBzOwogICAgICBfcmVzdWx0cyA9IFtdOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICAgIF9yZXN1bHRzLnB1c2goX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApKTsKICAgICAgfQogICAgICByZXR1cm4gX3Jlc3VsdHM7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGdyb3VwLCBfaSwgX2xlbiwgX3JlZjsKICAgICAgX3JlZiA9IF90aGlzLm5ld0dyb3VwczsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgZ3JvdXAgPSBfcmVmW19pXTsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmdyb3VwLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5uZXdHcm91cHMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmdyb3VwLm9uKCJkYXRhIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm5ld0dyb3Vwcy5wdXNoKGdyb3VwKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIEdyb3VwOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBHcm91cDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Hcm91cFppcC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBHcm91cFppcCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpHcm91cFppcCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR3JvdXBaaXAsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEdyb3VwWmlwKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMubmV3R3JvdXBzID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0LAogICAgICBncm91cDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5jb3VudCA9IDA7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoX3RoaXMubmV3R3JvdXBzW190aGlzLmNvdW50KytdKTsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZ3JvdXAub24oImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm5ld0dyb3VwcyA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZ3JvdXAub24oImRhdGEiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMubmV3R3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgfQoKICByZXR1cm4gR3JvdXBaaXA7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEdyb3VwWmlwOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0ZpbHRlckJ5R3JvdXAuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRmlsdGVyQnlHcm91cCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpGaWx0ZXJCeUdyb3VwID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhGaWx0ZXJCeUdyb3VwLCBfc3VwZXIpOwoKICBGaWx0ZXJCeUdyb3VwLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJHaXZlbiBhIFJlZ0V4cCBzdHJpbmcsIGZpbHRlciBvdXQgZ3JvdXBzIHRoYXQgZG8gbm90ICBtYXRjaCBhbmQgdGhlaXIgY2hpbGRyZW4gZGF0YSBwYWNrZXRzL2dyb3Vwcy4gRm9yd2FyZCBvbmx5IHRoZSBjb250ZW50ICBvZiB0aGUgbWF0Y2hpbmcgZ3JvdXAuIjsKCiAgZnVuY3Rpb24gRmlsdGVyQnlHcm91cCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnJlZ2V4cCA9IG51bGw7CiAgICB0aGlzLm1hdGNoZWRMZXZlbCA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0LAogICAgICByZWdleHA6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCwKICAgICAgZ3JvdXA6IG5ldyBub2Zsby5Qb3J0LAogICAgICBlbXB0eTogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHMucmVnZXhwLm9uKCJkYXRhIiwgZnVuY3Rpb24ocmVnZXhwKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZWdleHAgPSBuZXcgUmVnRXhwKHJlZ2V4cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5sZXZlbCA9IDA7CiAgICAgIHJldHVybiBfdGhpcy5oYXNDb250ZW50ID0gZmFsc2U7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIGlmIChfdGhpcy5tYXRjaGVkTGV2ZWwgIT0gbnVsbCkgewogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgICAgfQogICAgICBfdGhpcy5sZXZlbCsrOwogICAgICBpZiAoKF90aGlzLm1hdGNoZWRMZXZlbCA9PSBudWxsKSAmJiAoX3RoaXMucmVnZXhwICE9IG51bGwpICYmIChncm91cC5tYXRjaChfdGhpcy5yZWdleHApICE9IG51bGwpKSB7CiAgICAgICAgX3RoaXMubWF0Y2hlZExldmVsID0gX3RoaXMubGV2ZWw7CiAgICAgICAgaWYgKF90aGlzLm91dFBvcnRzLmdyb3VwLmlzQXR0YWNoZWQoKSkgewogICAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmdyb3VwLnNlbmQoZ3JvdXApOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChfdGhpcy5tYXRjaGVkTGV2ZWwgIT0gbnVsbCkgewogICAgICAgIF90aGlzLmhhc0NvbnRlbnQgPSB0cnVlOwogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgaWYgKF90aGlzLm1hdGNoZWRMZXZlbCA9PT0gX3RoaXMubGV2ZWwpIHsKICAgICAgICBfdGhpcy5tYXRjaGVkTGV2ZWwgPSBudWxsOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5tYXRjaGVkTGV2ZWwgIT0gbnVsbCkgewogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5sZXZlbC0tOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKCFfdGhpcy5oYXNDb250ZW50ICYmIF90aGlzLm91dFBvcnRzLmVtcHR5LmlzQXR0YWNoZWQoKSkgewogICAgICAgIF90aGlzLm91dFBvcnRzLmVtcHR5LnNlbmQobnVsbCk7CiAgICAgICAgX3RoaXMub3V0UG9ydHMuZW1wdHkuZGlzY29ubmVjdCgpOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5ncm91cC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5ncm91cC5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBGaWx0ZXJCeUdyb3VwOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBGaWx0ZXJCeUdyb3VwOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL09iamVjdGlmeS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBPYmplY3RpZnksIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKCk9iamVjdGlmeSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoT2JqZWN0aWZ5LCBfc3VwZXIpOwoKICBPYmplY3RpZnkucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gInNwZWNpZnkgYSByZWdleHAgc3RyaW5nLCB1c2UgdGhlIGZpcnN0IG1hdGNoIGFzIHRoZSBrZXkgIG9mIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBkYXRhIjsKCiAgZnVuY3Rpb24gT2JqZWN0aWZ5KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucmVnZXhwID0gbnVsbDsKICAgIHRoaXMubWF0Y2ggPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCwKICAgICAgcmVnZXhwOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHMucmVnZXhwLm9uKCJkYXRhIiwgZnVuY3Rpb24ocmVnZXhwKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZWdleHAgPSBuZXcgUmVnRXhwKHJlZ2V4cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIGlmICgoX3RoaXMucmVnZXhwICE9IG51bGwpICYmIChncm91cC5tYXRjaChfdGhpcy5yZWdleHApICE9IG51bGwpKSB7CiAgICAgICAgX3RoaXMubWF0Y2ggPSBfLmZpcnN0KGdyb3VwLm1hdGNoKF90aGlzLnJlZ2V4cCkpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGQ7CiAgICAgIGlmIChfdGhpcy5tYXRjaCAhPSBudWxsKSB7CiAgICAgICAgZCA9IGRhdGE7CiAgICAgICAgZGF0YSA9IHt9OwogICAgICAgIGRhdGFbX3RoaXMubWF0Y2hdID0gZDsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIE9iamVjdGlmeTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgT2JqZWN0aWZ5Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1JlYWRHcm91cC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBSZWFkR3JvdXAsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKUmVhZEdyb3VwID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSZWFkR3JvdXAsIF9zdXBlcik7CgogIGZ1bmN0aW9uIFJlYWRHcm91cCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmdyb3VwcyA9IFtdOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uQXJyYXlQb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCwKICAgICAgZ3JvdXA6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgICBfdGhpcy5vdXRQb3J0cy5ncm91cC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLm91dC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLm91dC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgfQogICAgICBpZiAoIV90aGlzLmdyb3Vwcy5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmdyb3VwLnNlbmQoX3RoaXMuZ3JvdXBzLmpvaW4oJzonKSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMuZ3JvdXBzLnBvcCgpOwogICAgICBfdGhpcy5vdXRQb3J0cy5ncm91cC5lbmRHcm91cCgpOwogICAgICBpZiAoX3RoaXMub3V0UG9ydHMub3V0LmlzQXR0YWNoZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmdyb3VwLmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFJlYWRHcm91cDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVhZEdyb3VwOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1NlbmRCeUdyb3VwLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFNlbmRCeUdyb3VwLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClNlbmRCeUdyb3VwID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTZW5kQnlHcm91cCwgX3N1cGVyKTsKCiAgU2VuZEJ5R3JvdXAucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1NlbmQgcGFja2V0IGhlbGQgaW4gImRhdGEiIHdoZW4gcmVjZWl2aW5nXAogIG1hdGNoaW5nIHNldCBvZiBncm91cHMgaW4gImluIic7CgogIFNlbmRCeUdyb3VwLnByb3RvdHlwZS5pY29uID0gJ3NoYXJlLXNpZ24nOwoKICBmdW5jdGlvbiBTZW5kQnlHcm91cCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRhdGEgPSB7fTsKICAgIHRoaXMudW5ncm91cGVkID0gbnVsbDsKICAgIHRoaXMuZGF0YUdyb3VwcyA9IFtdOwogICAgdGhpcy5pbkdyb3VwcyA9IFtdOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpLAogICAgICBkYXRhOiBuZXcgbm9mbG8uUG9ydCgnYWxsJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5BcnJheVBvcnQoJ2FsbCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmRhdGEub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMuZGF0YUdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmRhdGEub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmICghX3RoaXMuZGF0YUdyb3Vwcy5sZW5ndGgpIHsKICAgICAgICBfdGhpcy51bmdyb3VwZWQgPSBkYXRhOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuZGF0YVtfdGhpcy5ncm91cElkKF90aGlzLmRhdGFHcm91cHMpXSA9IGRhdGE7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5kYXRhLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZGF0YUdyb3Vwcy5wb3AoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmluR3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBpZDsKICAgICAgaWYgKCFfdGhpcy5pbkdyb3Vwcy5sZW5ndGgpIHsKICAgICAgICBpZiAoX3RoaXMudW5ncm91cGVkICE9PSBudWxsKSB7CiAgICAgICAgICBfdGhpcy5zZW5kKF90aGlzLnVuZ3JvdXBlZCk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZCA9IF90aGlzLmdyb3VwSWQoX3RoaXMuaW5Hcm91cHMpOwogICAgICBpZiAoIV90aGlzLmRhdGFbaWRdKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5zZW5kKF90aGlzLmRhdGFbaWRdKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuaW5Hcm91cHMucG9wKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgU2VuZEJ5R3JvdXAucHJvdG90eXBlLmdyb3VwSWQgPSBmdW5jdGlvbihncm91cHMpIHsKICAgIHJldHVybiBncm91cHMuam9pbignOicpOwogIH07CgogIFNlbmRCeUdyb3VwLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIGdyb3VwLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVmMSwgX3Jlc3VsdHM7CiAgICBfcmVmID0gdGhpcy5pbkdyb3VwczsKICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICB0aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0KICAgIHRoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICBfcmVmMSA9IHRoaXMuaW5Hcm91cHM7CiAgICBfcmVzdWx0cyA9IFtdOwogICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjEubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgIGdyb3VwID0gX3JlZjFbX2pdOwogICAgICBfcmVzdWx0cy5wdXNoKHRoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCkpOwogICAgfQogICAgcmV0dXJuIF9yZXN1bHRzOwogIH07CgogIHJldHVybiBTZW5kQnlHcm91cDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU2VuZEJ5R3JvdXA7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvQ29sbGVjdEdyb3Vwcy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb2xsZWN0R3JvdXBzLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkNvbGxlY3RHcm91cHMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENvbGxlY3RHcm91cHMsIF9zdXBlcik7CgogIENvbGxlY3RHcm91cHMucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NvbGxlY3QgcGFja2V0cyBpbnRvIG9iamVjdCBrZXllZCBieSBpdHMgZ3JvdXBzJzsKCiAgZnVuY3Rpb24gQ29sbGVjdEdyb3VwcygpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRhdGEgPSB7fTsKICAgIHRoaXMuZ3JvdXBzID0gW107CiAgICB0aGlzLnBhcmVudHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIGVycm9yOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLmRhdGEgPSB7fTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgaWYgKGdyb3VwID09PSAnJGRhdGEnKSB7CiAgICAgICAgX3RoaXMuZXJyb3IoJ2dyb3VwcyBjYW5ub3QgYmUgbmFtZWQgXCckZGF0YVwnJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIF90aGlzLnBhcmVudHMucHVzaChfdGhpcy5kYXRhKTsKICAgICAgX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgICByZXR1cm4gX3RoaXMuZGF0YSA9IHt9OwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXREYXRhKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBkYXRhOwogICAgICBkYXRhID0gX3RoaXMuZGF0YTsKICAgICAgX3RoaXMuZGF0YSA9IF90aGlzLnBhcmVudHMucG9wKCk7CiAgICAgIHJldHVybiBfdGhpcy5hZGRDaGlsZChfdGhpcy5kYXRhLCBfdGhpcy5ncm91cHMucG9wKCksIGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoX3RoaXMuZGF0YSk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBDb2xsZWN0R3JvdXBzLnByb3RvdHlwZS5hZGRDaGlsZCA9IGZ1bmN0aW9uKHBhcmVudCwgY2hpbGQsIGRhdGEpIHsKICAgIGlmICghKGNoaWxkIGluIHBhcmVudCkpIHsKICAgICAgcmV0dXJuIHBhcmVudFtjaGlsZF0gPSBkYXRhOwogICAgfQogICAgaWYgKEFycmF5LmlzQXJyYXkocGFyZW50W2NoaWxkXSkpIHsKICAgICAgcmV0dXJuIHBhcmVudFtjaGlsZF0ucHVzaChkYXRhKTsKICAgIH0KICAgIHJldHVybiBwYXJlbnRbY2hpbGRdID0gW3BhcmVudFtjaGlsZF0sIGRhdGFdOwogIH07CgogIENvbGxlY3RHcm91cHMucHJvdG90eXBlLnNldERhdGEgPSBmdW5jdGlvbihkYXRhKSB7CiAgICB2YXIgX2Jhc2U7CiAgICBpZiAoKF9iYXNlID0gdGhpcy5kYXRhKS4kZGF0YSA9PSBudWxsKSB7CiAgICAgIF9iYXNlLiRkYXRhID0gW107CiAgICB9CiAgICByZXR1cm4gdGhpcy5kYXRhLiRkYXRhLnB1c2goZGF0YSk7CiAgfTsKCiAgQ29sbGVjdEdyb3Vwcy5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihtc2cpIHsKICAgIGlmICh0aGlzLm91dFBvcnRzLmVycm9yLmlzQXR0YWNoZWQoKSkgewogICAgICB0aGlzLm91dFBvcnRzLmVycm9yLnNlbmQobmV3IEVycm9yKG1zZykpOwogICAgICB0aGlzLm91dFBvcnRzLmVycm9yLmRpc2Nvbm5lY3QoKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7CiAgfTsKCiAgcmV0dXJuIENvbGxlY3RHcm91cHM7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENvbGxlY3RHcm91cHM7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvQ29sbGVjdE9iamVjdC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb2xsZWN0T2JqZWN0LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkNvbGxlY3RPYmplY3QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENvbGxlY3RPYmplY3QsIF9zdXBlcik7CgogIENvbGxlY3RPYmplY3QucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NvbGxlY3QgcGFja2V0cyB0byBhbiBvYmplY3QgaWRlbnRpZmllZCBieSBrZXlzIG9yZ2FuaXplZFwKICBieSBjb25uZWN0aW9uJzsKCiAgZnVuY3Rpb24gQ29sbGVjdE9iamVjdCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmtleXMgPSBbXTsKICAgIHRoaXMuYWxscGFja2V0cyA9IFtdOwogICAgdGhpcy5kYXRhID0ge307CiAgICB0aGlzLmdyb3VwcyA9IHt9OwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBrZXlzOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdzdHJpbmcnKSwKICAgICAgYWxscGFja2V0czogbmV3IG5vZmxvLkFycmF5UG9ydCgnc3RyaW5nJyksCiAgICAgIGNvbGxlY3Q6IG5ldyBub2Zsby5BcnJheVBvcnQoJ2FsbCcpLAogICAgICByZWxlYXNlOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpLAogICAgICBjbGVhcjogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmtleXMub24oJ2RhdGEnLCBmdW5jdGlvbihrZXkpIHsKICAgICAgdmFyIGtleXMsIF9pLCBfbGVuLCBfcmVzdWx0czsKICAgICAga2V5cyA9IGtleS5zcGxpdCgnLCcpOwogICAgICBpZiAoa2V5cy5sZW5ndGggPiAxKSB7CiAgICAgICAgX3RoaXMua2V5cyA9IFtdOwogICAgICB9CiAgICAgIF9yZXN1bHRzID0gW107CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0ga2V5cy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGtleSA9IGtleXNbX2ldOwogICAgICAgIF9yZXN1bHRzLnB1c2goX3RoaXMua2V5cy5wdXNoKGtleSkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmFsbHBhY2tldHMub24oJ2RhdGEnLCBmdW5jdGlvbihrZXkpIHsKICAgICAgdmFyIGFsbHBhY2tldHMsIF9pLCBfbGVuLCBfcmVzdWx0czsKICAgICAgYWxscGFja2V0cyA9IGtleS5zcGxpdCgnLCcpOwogICAgICBpZiAoYWxscGFja2V0cy5sZW5ndGggPiAxKSB7CiAgICAgICAgX3RoaXMua2V5cyA9IFtdOwogICAgICB9CiAgICAgIF9yZXN1bHRzID0gW107CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gYWxscGFja2V0cy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGtleSA9IGFsbHBhY2tldHNbX2ldOwogICAgICAgIF9yZXN1bHRzLnB1c2goX3RoaXMuYWxscGFja2V0cy5wdXNoKGtleSkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmNvbGxlY3Qub25jZSgnY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlU29ja2V0cygpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucmVsZWFzZS5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMucmVsZWFzZSgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucmVsZWFzZS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmNsZWFyLm9uKCdkYXRhJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5jbGVhcigpOwogICAgfSk7CiAgfQoKICBDb2xsZWN0T2JqZWN0LnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLm91dFBvcnRzLm91dC5zZW5kKHRoaXMuZGF0YSk7CiAgICByZXR1cm4gdGhpcy5kYXRhID0gdGhpcy5jbG9uZSh0aGlzLmRhdGEpOwogIH07CgogIENvbGxlY3RPYmplY3QucHJvdG90eXBlLnN1YnNjcmliZVNvY2tldHMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gdGhpcy5pblBvcnRzLmNvbGxlY3Quc29ja2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHNvY2tldCwgaWR4KSB7CiAgICAgIHJldHVybiBfdGhpcy5zdWJzY3JpYmVTb2NrZXQoc29ja2V0LCBpZHgpOwogICAgfSk7CiAgfTsKCiAgQ29sbGVjdE9iamVjdC5wcm90b3R5cGUuc3Vic2NyaWJlU29ja2V0ID0gZnVuY3Rpb24oc29ja2V0LCBpZCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHNvY2tldC5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIGlmICghX3RoaXMuZ3JvdXBzW2lkXSkgewogICAgICAgIF90aGlzLmdyb3Vwc1tpZF0gPSBbXTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzW2lkXS5wdXNoKGdyb3VwKTsKICAgIH0pOwogICAgc29ja2V0Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgZ3JvdXBJZDsKICAgICAgaWYgKCFfdGhpcy5rZXlzW2lkXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBncm91cElkID0gX3RoaXMuZ3JvdXBJZChfdGhpcy5ncm91cHNbaWRdKTsKICAgICAgaWYgKCFfdGhpcy5kYXRhW2dyb3VwSWRdKSB7CiAgICAgICAgX3RoaXMuZGF0YVtncm91cElkXSA9IHt9OwogICAgICB9CiAgICAgIGlmIChfdGhpcy5hbGxwYWNrZXRzLmluZGV4T2YoX3RoaXMua2V5c1tpZF0pICE9PSAtMSkgewogICAgICAgIGlmICghX3RoaXMuZGF0YVtncm91cElkXVtfdGhpcy5rZXlzW2lkXV0pIHsKICAgICAgICAgIF90aGlzLmRhdGFbZ3JvdXBJZF1bX3RoaXMua2V5c1tpZF1dID0gW107CiAgICAgICAgfQogICAgICAgIF90aGlzLmRhdGFbZ3JvdXBJZF1bX3RoaXMua2V5c1tpZF1dLnB1c2goZGF0YSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5kYXRhW2dyb3VwSWRdW190aGlzLmtleXNbaWRdXSA9IGRhdGE7CiAgICB9KTsKICAgIHJldHVybiBzb2NrZXQub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIGlmICghX3RoaXMuZ3JvdXBzW2lkXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzW2lkXS5wb3AoKTsKICAgIH0pOwogIH07CgogIENvbGxlY3RPYmplY3QucHJvdG90eXBlLmdyb3VwSWQgPSBmdW5jdGlvbihncm91cHMpIHsKICAgIGlmICghZ3JvdXBzLmxlbmd0aCkgewogICAgICByZXR1cm4gJ3VuZ3JvdXBlZCc7CiAgICB9CiAgICByZXR1cm4gZ3JvdXBzWzBdOwogIH07CgogIENvbGxlY3RPYmplY3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIGdyb3VwTmFtZSwgZ3JvdXBlZERhdGEsIG5hbWUsIG5ld0RhdGEsIHZhbHVlOwogICAgbmV3RGF0YSA9IHt9OwogICAgZm9yIChncm91cE5hbWUgaW4gZGF0YSkgewogICAgICBncm91cGVkRGF0YSA9IGRhdGFbZ3JvdXBOYW1lXTsKICAgICAgbmV3RGF0YVtncm91cE5hbWVdID0ge307CiAgICAgIGZvciAobmFtZSBpbiBncm91cGVkRGF0YSkgewogICAgICAgIHZhbHVlID0gZ3JvdXBlZERhdGFbbmFtZV07CiAgICAgICAgaWYgKCFncm91cGVkRGF0YS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIG5ld0RhdGFbZ3JvdXBOYW1lXVtuYW1lXSA9IHZhbHVlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbmV3RGF0YTsKICB9OwoKICBDb2xsZWN0T2JqZWN0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5kYXRhID0ge307CiAgICByZXR1cm4gdGhpcy5ncm91cHMgPSB7fTsKICB9OwoKICByZXR1cm4gQ29sbGVjdE9iamVjdDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgQ29sbGVjdE9iamVjdDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9GaXJzdEdyb3VwLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEZpcnN0R3JvdXAsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKRmlyc3RHcm91cCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoRmlyc3RHcm91cCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gRmlyc3RHcm91cCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRlcHRoID0gMDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgaWYgKF90aGlzLmRlcHRoID09PSAwKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5kZXB0aCsrOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIF90aGlzLmRlcHRoLS07CiAgICAgIGlmIChfdGhpcy5kZXB0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMuZGVwdGggPSAwOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIEZpcnN0R3JvdXA7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEZpcnN0R3JvdXA7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvTWFwR3JvdXAuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgTWFwR3JvdXAsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKTWFwR3JvdXAgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKE1hcEdyb3VwLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBNYXBHcm91cCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLm1hcCA9IHt9OwogICAgdGhpcy5yZWdleHBzID0ge307CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIG1hcDogbmV3IG5vZmxvLkFycmF5UG9ydCgpLAogICAgICByZWdleHA6IG5ldyBub2Zsby5BcnJheVBvcnQoKSwKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5tYXAub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcmVwYXJlTWFwKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucmVnZXhwLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucHJlcGFyZVJlZ0V4cChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm1hcEdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIE1hcEdyb3VwLnByb3RvdHlwZS5wcmVwYXJlTWFwID0gZnVuY3Rpb24obWFwKSB7CiAgICB2YXIgbWFwUGFydHM7CiAgICBpZiAodHlwZW9mIG1hcCA9PT0gJ29iamVjdCcpIHsKICAgICAgdGhpcy5tYXAgPSBtYXA7CiAgICAgIHJldHVybjsKICAgIH0KICAgIG1hcFBhcnRzID0gbWFwLnNwbGl0KCc9Jyk7CiAgICByZXR1cm4gdGhpcy5tYXBbbWFwUGFydHNbMF1dID0gbWFwUGFydHNbMV07CiAgfTsKCiAgTWFwR3JvdXAucHJvdG90eXBlLnByZXBhcmVSZWdFeHAgPSBmdW5jdGlvbihtYXApIHsKICAgIHZhciBtYXBQYXJ0czsKICAgIG1hcFBhcnRzID0gbWFwLnNwbGl0KCc9Jyk7CiAgICByZXR1cm4gdGhpcy5yZWdleHBzW21hcFBhcnRzWzBdXSA9IG1hcFBhcnRzWzFdOwogIH07CgogIE1hcEdyb3VwLnByb3RvdHlwZS5tYXBHcm91cCA9IGZ1bmN0aW9uKGdyb3VwKSB7CiAgICB2YXIgZXhwcmVzc2lvbiwgbWF0Y2hlZCwgcmVnZXhwLCByZXBsYWNlbWVudCwgX3JlZjsKICAgIGlmICh0aGlzLm1hcFtncm91cF0pIHsKICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cCh0aGlzLm1hcFtncm91cF0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBfcmVmID0gdGhpcy5yZWdleHBzOwogICAgZm9yIChleHByZXNzaW9uIGluIF9yZWYpIHsKICAgICAgcmVwbGFjZW1lbnQgPSBfcmVmW2V4cHJlc3Npb25dOwogICAgICByZWdleHAgPSBuZXcgUmVnRXhwKGV4cHJlc3Npb24pOwogICAgICBtYXRjaGVkID0gcmVnZXhwLmV4ZWMoZ3JvdXApOwogICAgICBpZiAoIW1hdGNoZWQpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBncm91cCA9IGdyb3VwLnJlcGxhY2UocmVnZXhwLCByZXBsYWNlbWVudCk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgfTsKCiAgcmV0dXJuIE1hcEdyb3VwOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBNYXBHcm91cDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9NZXJnZUdyb3Vwcy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBNZXJnZUdyb3Vwcywgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpfID0gcmVxdWlyZSgndW5kZXJzY29yZScpLl87CgpNZXJnZUdyb3VwcyA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoTWVyZ2VHcm91cHMsIF9zdXBlcik7CgogIGZ1bmN0aW9uIE1lcmdlR3JvdXBzKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuZ3JvdXBzID0ge307CiAgICB0aGlzLmRhdGEgPSB7fTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLkFycmF5UG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLkFycmF5UG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwLCBzb2NrZXQpIHsKICAgICAgcmV0dXJuIF90aGlzLmFkZEdyb3VwKHNvY2tldCwgZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhLCBzb2NrZXQpIHsKICAgICAgX3RoaXMucmVnaXN0ZXJEYXRhKHNvY2tldCwgZGF0YSk7CiAgICAgIHJldHVybiBfdGhpcy5jaGVja0J1ZmZlcihzb2NrZXQpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oZ3JvdXAsIHNvY2tldCkgewogICAgICBfdGhpcy5jaGVja0J1ZmZlcihzb2NrZXQpOwogICAgICByZXR1cm4gX3RoaXMucmVtb3ZlR3JvdXAoc29ja2V0KTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oc29ja2V0LCBzb2NrZXRJZCkgewogICAgICByZXR1cm4gX3RoaXMuY2hlY2tCdWZmZXIoc29ja2V0SWQpOwogICAgfSk7CiAgfQoKICBNZXJnZUdyb3Vwcy5wcm90b3R5cGUuYWRkR3JvdXAgPSBmdW5jdGlvbihzb2NrZXQsIGdyb3VwKSB7CiAgICBpZiAoIXRoaXMuZ3JvdXBzW3NvY2tldF0pIHsKICAgICAgdGhpcy5ncm91cHNbc29ja2V0XSA9IFtdOwogICAgfQogICAgcmV0dXJuIHRoaXMuZ3JvdXBzW3NvY2tldF0ucHVzaChncm91cCk7CiAgfTsKCiAgTWVyZ2VHcm91cHMucHJvdG90eXBlLnJlbW92ZUdyb3VwID0gZnVuY3Rpb24oc29ja2V0KSB7CiAgICByZXR1cm4gdGhpcy5ncm91cHNbc29ja2V0XS5wb3AoKTsKICB9OwoKICBNZXJnZUdyb3Vwcy5wcm90b3R5cGUuZ3JvdXBJZCA9IGZ1bmN0aW9uKHNvY2tldCkgewogICAgaWYgKCF0aGlzLmdyb3Vwc1tzb2NrZXRdKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgcmV0dXJuIHRoaXMuZ3JvdXBzW3NvY2tldF0uam9pbignOicpOwogIH07CgogIE1lcmdlR3JvdXBzLnByb3RvdHlwZS5yZWdpc3RlckRhdGEgPSBmdW5jdGlvbihzb2NrZXQsIGRhdGEpIHsKICAgIHZhciBpZDsKICAgIGlkID0gdGhpcy5ncm91cElkKHNvY2tldCk7CiAgICBpZiAoIWlkKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICghdGhpcy5kYXRhW2lkXSkgewogICAgICB0aGlzLmRhdGFbaWRdID0ge307CiAgICB9CiAgICByZXR1cm4gdGhpcy5kYXRhW2lkXVtzb2NrZXRdID0gZGF0YTsKICB9OwoKICBNZXJnZUdyb3Vwcy5wcm90b3R5cGUuY2hlY2tCdWZmZXIgPSBmdW5jdGlvbihzb2NrZXQpIHsKICAgIHZhciBpZCwgc29ja2V0SWQsIF9pLCBfbGVuLCBfcmVmOwogICAgaWQgPSB0aGlzLmdyb3VwSWQoc29ja2V0KTsKICAgIGlmICghaWQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCF0aGlzLmRhdGFbaWRdKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIF9yZWYgPSB0aGlzLmluUG9ydHNbImluIl0uc29ja2V0czsKICAgIGZvciAoc29ja2V0SWQgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBzb2NrZXRJZCA9ICsrX2kpIHsKICAgICAgc29ja2V0ID0gX3JlZltzb2NrZXRJZF07CiAgICAgIGlmICghdGhpcy5kYXRhW2lkXVtzb2NrZXRJZF0pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0KICAgIHRoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoaWQpOwogICAgdGhpcy5vdXRQb3J0cy5vdXQuc2VuZCh0aGlzLmRhdGFbaWRdKTsKICAgIHRoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB0aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICByZXR1cm4gZGVsZXRlIHRoaXMuZGF0YVtpZF07CiAgfTsKCiAgcmV0dXJuIE1lcmdlR3JvdXBzOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBNZXJnZUdyb3VwczsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Hcm91cEJ5T2JqZWN0S2V5LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEdyb3VwQnlPYmplY3RLZXksIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKR3JvdXBCeU9iamVjdEtleSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR3JvdXBCeU9iamVjdEtleSwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gR3JvdXBCeU9iamVjdEtleSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRhdGEgPSBbXTsKICAgIHRoaXMua2V5ID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoKSwKICAgICAga2V5OiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5kYXRhID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLmtleSkgewogICAgICAgIHJldHVybiBfdGhpcy5nZXRLZXkoZGF0YSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLmRhdGEucHVzaChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgZGF0YSwgX2ksIF9sZW4sIF9yZWY7CiAgICAgIGlmICghX3RoaXMuZGF0YS5sZW5ndGgpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIV90aGlzLmtleSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfcmVmID0gX3RoaXMuZGF0YTsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgZGF0YSA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLmdldEtleShkYXRhKTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmtleS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmtleSA9IGRhdGE7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5rZXkub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGRhdGEsIF9pLCBfbGVuLCBfcmVmOwogICAgICBpZiAoIV90aGlzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIF9yZWYgPSBfdGhpcy5kYXRhOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBkYXRhID0gX3JlZltfaV07CiAgICAgICAgX3RoaXMuZ2V0S2V5KGRhdGEpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBHcm91cEJ5T2JqZWN0S2V5LnByb3RvdHlwZS5nZXRLZXkgPSBmdW5jdGlvbihkYXRhKSB7CiAgICB2YXIgZ3JvdXA7CiAgICBpZiAoIXRoaXMua2V5KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignS2V5IG5vdCBkZWZpbmVkJyk7CiAgICB9CiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YSBpcyBub3QgYW4gb2JqZWN0Jyk7CiAgICB9CiAgICBncm91cCA9IGRhdGFbdGhpcy5rZXldOwogICAgaWYgKHR5cGVvZiBkYXRhW3RoaXMua2V5XSAhPT0gJ3N0cmluZycpIHsKICAgICAgZ3JvdXAgPSAndW5kZWZpbmVkJzsKICAgIH0KICAgIGlmICh0eXBlb2YgZGF0YVt0aGlzLmtleV0gPT09ICdib29sZWFuJykgewogICAgICBpZiAoZGF0YVt0aGlzLmtleV0pIHsKICAgICAgICBncm91cCA9IHRoaXMua2V5OwogICAgICB9CiAgICB9CiAgICB0aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIHRoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICB9OwoKICByZXR1cm4gR3JvdXBCeU9iamVjdEtleTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgR3JvdXBCeU9iamVjdEtleTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2luZGV4LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKLyoKICogVGhpcyBmaWxlIGNhbiBiZSB1c2VkIGZvciBnZW5lcmFsIGxpYnJhcnkgZmVhdHVyZXMgb2YgcGFja2V0cy4KICoKICogVGhlIGxpYnJhcnkgZmVhdHVyZXMgY2FuIGJlIG1hZGUgYXZhaWxhYmxlIGFzIENvbW1vbkpTIG1vZHVsZXMgdGhhdCB0aGUKICogY29tcG9uZW50cyBpbiB0aGlzIHByb2plY3QgdXRpbGl6ZS4KICovCgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnQuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJuYW1lIjoibm9mbG8tcGFja2V0cyIsImRlc2NyaXB0aW9uIjoiVGhlIGJlc3QgcHJvamVjdCBldmVyLiIsInZlcnNpb24iOiIwLjAuOCIsImF1dGhvciI6Iktlbm5ldGggS2FuIDxrZW5oa2FuQGdtYWlsLmNvbT4iLCJyZXBvIjoia2VuaGthbi9wYWNrZXRzIiwia2V5d29yZHMiOltdLCJkZXBlbmRlbmNpZXMiOnsibm9mbG8vbm9mbG8iOiIqIiwiY29tcG9uZW50L3VuZGVyc2NvcmUiOiIqIn0sInNjcmlwdHMiOlsiY29tcG9uZW50cy9Db3VudFBhY2tldHMuY29mZmVlIiwiY29tcG9uZW50cy9VbnppcC5jb2ZmZWUiLCJjb21wb25lbnRzL0RlZmF1bHRzLmNvZmZlZSIsImNvbXBvbmVudHMvRG9Ob3REaXNjb25uZWN0LmNvZmZlZSIsImNvbXBvbmVudHMvT25seURpc2Nvbm5lY3QuY29mZmVlIiwiY29tcG9uZW50cy9TcGxpdFBhY2tldC5jb2ZmZWUiLCJjb21wb25lbnRzL1JhbmdlLmNvZmZlZSIsImNvbXBvbmVudHMvRmxhdHRlbi5jb2ZmZWUiLCJjb21wb25lbnRzL0NvbXBhY3QuY29mZmVlIiwiY29tcG9uZW50cy9aaXAuY29mZmVlIiwiY29tcG9uZW50cy9TZW5kV2l0aC5jb2ZmZWUiLCJjb21wb25lbnRzL0ZpbHRlclBhY2tldHMuY29mZmVlIiwiY29tcG9uZW50cy9GaWx0ZXJCeVZhbHVlLmNvZmZlZSIsImNvbXBvbmVudHMvRmlsdGVyQnlQb3NpdGlvbi5jb2ZmZWUiLCJjb21wb25lbnRzL0ZpbHRlclBhY2tldC5jb2ZmZWUiLCJjb21wb25lbnRzL1VuaXF1ZVBhY2tldC5jb2ZmZWUiLCJjb21wb25lbnRzL0dyb3VwQnlQYWNrZXQuY29mZmVlIiwiY29tcG9uZW50cy9MYXN0UGFja2V0LmNvZmZlZSIsImNvbXBvbmVudHMvQ291bnRlci5jb2ZmZWUiLCJpbmRleC5qcyJdLCJqc29uIjpbImNvbXBvbmVudC5qc29uIl0sIm5vZmxvIjp7ImNvbXBvbmVudHMiOnsiQ291bnRQYWNrZXRzIjoiY29tcG9uZW50cy9Db3VudFBhY2tldHMuY29mZmVlIiwiVW56aXAiOiJjb21wb25lbnRzL1VuemlwLmNvZmZlZSIsIkRlZmF1bHRzIjoiY29tcG9uZW50cy9EZWZhdWx0cy5jb2ZmZWUiLCJEb05vdERpc2Nvbm5lY3QiOiJjb21wb25lbnRzL0RvTm90RGlzY29ubmVjdC5jb2ZmZWUiLCJPbmx5RGlzY29ubmVjdCI6ImNvbXBvbmVudHMvT25seURpc2Nvbm5lY3QuY29mZmVlIiwiU3BsaXRQYWNrZXQiOiJjb21wb25lbnRzL1NwbGl0UGFja2V0LmNvZmZlZSIsIlJhbmdlIjoiY29tcG9uZW50cy9SYW5nZS5jb2ZmZWUiLCJGbGF0dGVuIjoiY29tcG9uZW50cy9GbGF0dGVuLmNvZmZlZSIsIkNvbXBhY3QiOiJjb21wb25lbnRzL0NvbXBhY3QuY29mZmVlIiwiWmlwIjoiY29tcG9uZW50cy9aaXAuY29mZmVlIiwiU2VuZFdpdGgiOiJjb21wb25lbnRzL1NlbmRXaXRoLmNvZmZlZSIsIkZpbHRlclBhY2tldHMiOiJjb21wb25lbnRzL0ZpbHRlclBhY2tldHMuY29mZmVlIiwiRmlsdGVyQnlWYWx1ZSI6ImNvbXBvbmVudHMvRmlsdGVyQnlWYWx1ZS5jb2ZmZWUiLCJGaWx0ZXJCeVBvc2l0aW9uIjoiY29tcG9uZW50cy9GaWx0ZXJCeVBvc2l0aW9uLmNvZmZlZSIsIkZpbHRlclBhY2tldCI6ImNvbXBvbmVudHMvRmlsdGVyUGFja2V0LmNvZmZlZSIsIlVuaXF1ZVBhY2tldCI6ImNvbXBvbmVudHMvVW5pcXVlUGFja2V0LmNvZmZlZSIsIkdyb3VwQnlQYWNrZXQiOiJjb21wb25lbnRzL0dyb3VwQnlQYWNrZXQuY29mZmVlIiwiTGFzdFBhY2tldCI6ImNvbXBvbmVudHMvTGFzdFBhY2tldC5jb2ZmZWUiLCJDb3VudGVyIjoiY29tcG9uZW50cy9Db3VudGVyLmNvZmZlZSJ9fX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Db3VudFBhY2tldHMuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ291bnRQYWNrZXRzLCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpDb3VudFBhY2tldHMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENvdW50UGFja2V0cywgX3N1cGVyKTsKCiAgQ291bnRQYWNrZXRzLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJjb3VudCBudW1iZXIgb2YgZGF0YSBJUHMiOwoKICBmdW5jdGlvbiBDb3VudFBhY2tldHMoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGNvdW50OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgY291bnQ7CiAgICAgIF90aGlzLmNvdW50cyA9IFswXTsKICAgICAgcmV0dXJuIGNvdW50ID0gXy5sYXN0KF90aGlzLmNvdW50cyk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIF90aGlzLmNvdW50cy5wdXNoKDApOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBjb3VudDsKICAgICAgX3RoaXMuY291bnRzW190aGlzLmNvdW50cy5sZW5ndGggLSAxXSsrOwogICAgICBjb3VudCA9IF8ubGFzdChfdGhpcy5jb3VudHMpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICB2YXIgY291bnQ7CiAgICAgIGNvdW50ID0gXy5sYXN0KF90aGlzLmNvdW50cyk7CiAgICAgIF90aGlzLm91dFBvcnRzLmNvdW50LnNlbmQoY291bnQpOwogICAgICBfdGhpcy5jb3VudHMucG9wKCk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGNvdW50OwogICAgICBjb3VudCA9IF8ubGFzdChfdGhpcy5jb3VudHMpOwogICAgICBfdGhpcy5vdXRQb3J0cy5jb3VudC5zZW5kKGNvdW50KTsKICAgICAgX3RoaXMub3V0UG9ydHMuY291bnQuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIENvdW50UGFja2V0czsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgQ291bnRQYWNrZXRzOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9VbnppcC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBVbnppcCwgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgpfID0gcmVxdWlyZSgidW5kZXJzY29yZSIpOwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKVW56aXAgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFVuemlwLCBfc3VwZXIpOwoKICBVbnppcC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiU2VuZCBwYWNrZXRzIHdob3NlIHBvc2l0aW9uIHVwb24gcmVjZWlwdCBpcyBldmVuIHRvIHRoZSAgRVZFTiBwb3J0LCBvdGhlcndpc2UgdGhlIE9ERCBwb3J0LiI7CgogIGZ1bmN0aW9uIFVuemlwKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvZGQ6IG5ldyBub2Zsby5Qb3J0LAogICAgICBldmVuOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5jb3VudCA9IDA7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIHBvcnQ7CiAgICAgIF90aGlzLmNvdW50Kys7CiAgICAgIHBvcnQgPSBfdGhpcy5jb3VudCAlIDIgPT09IDAgPyAiZXZlbiIgOiAib2RkIjsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzW3BvcnRdLnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5vZGQuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuZXZlbi5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBVbnppcDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgVW56aXA7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0RlZmF1bHRzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIERlZmF1bHRzLCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpEZWZhdWx0cyA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoRGVmYXVsdHMsIF9zdXBlcik7CgogIERlZmF1bHRzLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJpZiBpbmNvbWluZyBpcyBzaG9ydCBvZiB0aGUgbGVuZ3RoIG9mIHRoZSBkZWZhdWx0ICBwYWNrZXRzLCBzZW5kIHRoZSBkZWZhdWx0IHBhY2tldHMuIjsKCiAgZnVuY3Rpb24gRGVmYXVsdHMoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5kZWZhdWx0cyA9IFtdOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCwKICAgICAgImRlZmF1bHQiOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImRlZmF1bHQiXS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZGVmYXVsdHMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJkZWZhdWx0Il0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5kZWZhdWx0cy5wdXNoKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLmNvdW50cyA9IFswXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgX3RoaXMuY291bnRzLnB1c2goMCk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGNvdW50OwogICAgICBjb3VudCA9IF8ubGFzdChfdGhpcy5jb3VudHMpOwogICAgICBpZiAoZGF0YSA9PSBudWxsKSB7CiAgICAgICAgZGF0YSA9IF90aGlzLmRlZmF1bHRzW2NvdW50XTsKICAgICAgfQogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgcmV0dXJuIF90aGlzLmNvdW50c1tfdGhpcy5jb3VudHMubGVuZ3RoIC0gMV0rKzsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIF90aGlzLnBhZFBhY2tldHMoXy5sYXN0KF90aGlzLmNvdW50cykpOwogICAgICBfdGhpcy5jb3VudHMucG9wKCk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLnBhZFBhY2tldHMoX3RoaXMuY291bnRzWzBdKTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIERlZmF1bHRzLnByb3RvdHlwZS5wYWRQYWNrZXRzID0gZnVuY3Rpb24oY291bnQpIHsKICAgIHZhciBfcmVzdWx0czsKICAgIF9yZXN1bHRzID0gW107CiAgICB3aGlsZSAoY291bnQgPCB0aGlzLmRlZmF1bHRzLmxlbmd0aCkgewogICAgICB0aGlzLm91dFBvcnRzLm91dC5zZW5kKHRoaXMuZGVmYXVsdHNbY291bnRdKTsKICAgICAgX3Jlc3VsdHMucHVzaChjb3VudCsrKTsKICAgIH0KICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICByZXR1cm4gRGVmYXVsdHM7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IERlZmF1bHRzOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Eb05vdERpc2Nvbm5lY3QuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRG9Ob3REaXNjb25uZWN0LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCkRvTm90RGlzY29ubmVjdCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoRG9Ob3REaXNjb25uZWN0LCBfc3VwZXIpOwoKICBEb05vdERpc2Nvbm5lY3QucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gImZvcndhcmRzIGV2ZXJ5dGhpbmcgYnV0IG5ldmVyIGRpc2Nvbm5lY3QiOwoKICBmdW5jdGlvbiBEb05vdERpc2Nvbm5lY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIERvTm90RGlzY29ubmVjdDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRG9Ob3REaXNjb25uZWN0Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Pbmx5RGlzY29ubmVjdC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBPbmx5RGlzY29ubmVjdCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpPbmx5RGlzY29ubmVjdCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoT25seURpc2Nvbm5lY3QsIF9zdXBlcik7CgogIE9ubHlEaXNjb25uZWN0LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJ0aGUgaW52ZXJzZSBvZiBEb05vdERpc2Nvbm5lY3QiOwoKICBmdW5jdGlvbiBPbmx5RGlzY29ubmVjdCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuY29ubmVjdCgpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIE9ubHlEaXNjb25uZWN0OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBPbmx5RGlzY29ubmVjdDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvU3BsaXRQYWNrZXQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgU3BsaXRQYWNrZXQsIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKClNwbGl0UGFja2V0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTcGxpdFBhY2tldCwgX3N1cGVyKTsKCiAgU3BsaXRQYWNrZXQucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gInNwbGl0cyBlYWNoIGluY29taW5nIHBhY2tldCBpbnRvIGl0cyBvd24gY29ubmVjdGlvbiI7CgogIGZ1bmN0aW9uIFNwbGl0UGFja2V0KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgZ3JvdXAsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYsIF9yZWYxOwogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuY29ubmVjdCgpOwogICAgICBfcmVmID0gX3RoaXMuZ3JvdXBzOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgICAgfQogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgX3JlZjEgPSBfdGhpcy5ncm91cHM7CiAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICAgIGdyb3VwID0gX3JlZjFbX2pdOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3Vwcy5wb3AoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFNwbGl0UGFja2V0OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBTcGxpdFBhY2tldDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvUmFuZ2UuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUmFuZ2UsIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKClJhbmdlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSYW5nZSwgX3N1cGVyKTsKCiAgUmFuZ2UucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gIm9ubHkgZm9yd2FyZCBhIHNwZWNpZmllZCBudW1iZXIgb2YgcGFja2V0cyBpbiBhICBjb25uZWN0aW9uIjsKCiAgZnVuY3Rpb24gUmFuZ2UoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5zdGFydCA9IC1JbmZpbml0eTsKICAgIHRoaXMuZW5kID0gK0luZmluaXR5OwogICAgdGhpcy5sZW5ndGggPSArSW5maW5pdHk7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0LAogICAgICBzdGFydDogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGVuZDogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGxlbmd0aDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLnN0YXJ0Lm9uKCJkYXRhIiwgZnVuY3Rpb24oc3RhcnQpIHsKICAgICAgcmV0dXJuIF90aGlzLnN0YXJ0ID0gcGFyc2VJbnQoc3RhcnQpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZW5kLm9uKCJkYXRhIiwgZnVuY3Rpb24oZW5kKSB7CiAgICAgIHJldHVybiBfdGhpcy5lbmQgPSBwYXJzZUludChlbmQpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMubGVuZ3RoLm9uKCJkYXRhIiwgZnVuY3Rpb24obGVuZ3RoKSB7CiAgICAgIHJldHVybiBfdGhpcy5sZW5ndGggPSBwYXJzZUludChsZW5ndGgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImNvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMudG90YWxDb3VudCA9IDA7CiAgICAgIHJldHVybiBfdGhpcy5zZW50Q291bnQgPSAwOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLnRvdGFsQ291bnQrKzsKICAgICAgaWYgKF90aGlzLnRvdGFsQ291bnQgPiBfdGhpcy5zdGFydCAmJiBfdGhpcy50b3RhbENvdW50IDwgX3RoaXMuZW5kICYmIF90aGlzLnNlbnRDb3VudCA8IF90aGlzLmxlbmd0aCkgewogICAgICAgIF90aGlzLnNlbnRDb3VudCsrOwogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBSYW5nZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmFuZ2U7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0ZsYXR0ZW4uanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRmxhdHRlbiwgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpfID0gcmVxdWlyZSgidW5kZXJzY29yZSIpOwoKRmxhdHRlbiA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoRmxhdHRlbiwgX3N1cGVyKTsKCiAgRmxhdHRlbi5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiRmxhdHRlbiB0aGUgSVAgc3RydWN0dXJlIGJ1dCBwcmVzZXJ2ZSBhbGwgZ3JvdXBzIChpLmUuICAgIGFsbCBncm91cHMgYXJlIGF0IHRoZSB0b3AgbGV2ZWwpIjsKCiAgZnVuY3Rpb24gRmxhdHRlbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5ncm91cHMgPSBbXTsKICAgICAgcmV0dXJuIF90aGlzLmNhY2hlID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHZhciBsb2M7CiAgICAgIGxvYyA9IF90aGlzLmxvY2F0ZSgpOwogICAgICBsb2NbZ3JvdXBdID0gW107CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMucHVzaChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGxvYzsKICAgICAgbG9jID0gX3RoaXMubG9jYXRlKCk7CiAgICAgIHJldHVybiBsb2MucHVzaChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMucG9wKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgbm9kZXMsIHBhY2tldHMsIF9yZWY7CiAgICAgIF9yZWYgPSBfdGhpcy5mbGF0dGVuKF90aGlzLmNhY2hlKSwgcGFja2V0cyA9IF9yZWYucGFja2V0cywgbm9kZXMgPSBfcmVmLm5vZGVzOwogICAgICBfdGhpcy5mbHVzaChfLmV4dGVuZChwYWNrZXRzLCBub2RlcykpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgRmxhdHRlbi5wcm90b3R5cGUubG9jYXRlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gXy5yZWR1Y2UodGhpcy5ncm91cHMsIChmdW5jdGlvbihsb2MsIGdyb3VwKSB7CiAgICAgIHJldHVybiBsb2NbZ3JvdXBdOwogICAgfSksIHRoaXMuY2FjaGUpOwogIH07CgogIEZsYXR0ZW4ucHJvdG90eXBlLmZsYXR0ZW4gPSBmdW5jdGlvbihub2RlKSB7CiAgICB2YXIgZ3JvdXAsIGdyb3Vwcywgbm9kZXMsIHBhY2tldHMsIHN1Ym5vZGVzLCBfaSwgX2xlbiwgX3JlZjsKICAgIGdyb3VwcyA9IHRoaXMuZ2V0Tm9uQXJyYXlLZXlzKG5vZGUpOwogICAgaWYgKGdyb3Vwcy5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwYWNrZXRzOiBub2RlLAogICAgICAgIG5vZGVzOiB7fQogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgc3Vibm9kZXMgPSB7fTsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBncm91cHMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBncm91cCA9IGdyb3Vwc1tfaV07CiAgICAgICAgX3JlZiA9IHRoaXMuZmxhdHRlbihub2RlW2dyb3VwXSksIHBhY2tldHMgPSBfcmVmLnBhY2tldHMsIG5vZGVzID0gX3JlZi5ub2RlczsKICAgICAgICBkZWxldGUgbm9kZVtncm91cF07CiAgICAgICAgc3Vibm9kZXNbZ3JvdXBdID0gcGFja2V0czsKICAgICAgICBfLmV4dGVuZChzdWJub2Rlcywgbm9kZXMpOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgcGFja2V0czogbm9kZSwKICAgICAgICBub2Rlczogc3Vibm9kZXMKICAgICAgfTsKICAgIH0KICB9OwoKICBGbGF0dGVuLnByb3RvdHlwZS5nZXROb25BcnJheUtleXMgPSBmdW5jdGlvbihub2RlKSB7CiAgICByZXR1cm4gXy5jb21wYWN0KF8uZmlsdGVyKF8ua2V5cyhub2RlKSwgZnVuY3Rpb24oa2V5KSB7CiAgICAgIHJldHVybiBpc05hTihwYXJzZUludChrZXkpKTsKICAgIH0pKTsKICB9OwoKICBGbGF0dGVuLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHZhciBncm91cCwgcGFja2V0LCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVzdWx0czsKICAgIGZvciAoX2kgPSAwLCBfbGVuID0gbm9kZS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBwYWNrZXQgPSBub2RlW19pXTsKICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChwYWNrZXQpOwogICAgfQogICAgX3JlZiA9IHRoaXMuZ2V0Tm9uQXJyYXlLZXlzKG5vZGUpOwogICAgX3Jlc3VsdHMgPSBbXTsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgIGdyb3VwID0gX3JlZltfal07CiAgICAgIHRoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgICB0aGlzLmZsdXNoKG5vZGVbZ3JvdXBdKTsKICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpKTsKICAgIH0KICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICByZXR1cm4gRmxhdHRlbjsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRmxhdHRlbjsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvQ29tcGFjdC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb21wYWN0LCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpDb21wYWN0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhDb21wYWN0LCBfc3VwZXIpOwoKICBDb21wYWN0LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJSZW1vdmUgbnVsbCI7CgogIGZ1bmN0aW9uIENvbXBhY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChkYXRhID09IG51bGwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChfLmlzT2JqZWN0KGRhdGEpICYmIF8uaXNFbXB0eShkYXRhKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIENvbXBhY3Q7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENvbXBhY3Q7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1ppcC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBaaXAsIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKClppcCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoWmlwLCBfc3VwZXIpOwoKICBaaXAucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gInppcCB0aHJvdWdoIG11bHRpcGxlIElQcyBhbmQgb3V0cHV0IGEgc2VyaWVzIG9mIHppcHBlZCAgSVBzIGp1c3QgbGlrZSBob3cgXy56aXAoKSB3b3JrcyBpbiBVbmRlcnNjb3JlLmpzIjsKCiAgZnVuY3Rpb24gWmlwKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLnBhY2tldHMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICBpZiAoXy5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnBhY2tldHMucHVzaChkYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF8uaXNFbXB0eShfdGhpcy5wYWNrZXRzKSkgewogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKFtdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChfLnppcC5hcHBseShfLCBfdGhpcy5wYWNrZXRzKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBaaXA7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFppcDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvU2VuZFdpdGguanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgU2VuZFdpdGgsIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKClNlbmRXaXRoID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTZW5kV2l0aCwgX3N1cGVyKTsKCiAgU2VuZFdpdGgucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gIkFsd2F5cyBzZW5kIHRoZSBzcGVjaWZpZWQgcGFja2V0cyB3aXRoIGluY29taW5nIHBhY2tldHMuIjsKCiAgZnVuY3Rpb24gU2VuZFdpdGgoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpc1sid2l0aCJdID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0LAogICAgICAid2l0aCI6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1sid2l0aCJdLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpc1sid2l0aCJdID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1sid2l0aCJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXNbIndpdGgiXS5wdXNoKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBwYWNrZXQsIF9pLCBfbGVuLCBfcmVmOwogICAgICBfcmVmID0gX3RoaXNbIndpdGgiXTsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgcGFja2V0ID0gX3JlZltfaV07CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQocGFja2V0KTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFNlbmRXaXRoOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBTZW5kV2l0aDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRmlsdGVyUGFja2V0cy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBGaWx0ZXJQYWNrZXRzLCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpGaWx0ZXJQYWNrZXRzID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhGaWx0ZXJQYWNrZXRzLCBfc3VwZXIpOwoKICBGaWx0ZXJQYWNrZXRzLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJGaWx0ZXIgcGFja2V0cyBtYXRjaGluZyBzb21lIFJlZ0V4cCBzdHJpbmdzIjsKCiAgZnVuY3Rpb24gRmlsdGVyUGFja2V0cygpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnJlZ2V4cHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIHJlZ2V4cDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0LAogICAgICBtaXNzZWQ6IG5ldyBub2Zsby5Qb3J0LAogICAgICBwYXNzdGhydTogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHMucmVnZXhwLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZWdleHBzID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5yZWdleHAub24oImRhdGEiLCBmdW5jdGlvbihyZWdleHApIHsKICAgICAgcmV0dXJuIF90aGlzLnJlZ2V4cHMucHVzaChuZXcgUmVnRXhwKHJlZ2V4cCkpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChfLmFueShfdGhpcy5yZWdleHBzLCAoZnVuY3Rpb24ocmVnZXhwKSB7CiAgICAgICAgcmV0dXJuIGRhdGEubWF0Y2gocmVnZXhwKTsKICAgICAgfSkpKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMubWlzc2VkLnNlbmQoZGF0YSk7CiAgICAgIH0KICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnBhc3N0aHJ1LmlzQXR0YWNoZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5wYXNzdGhydS5zZW5kKGRhdGEpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgICBfdGhpcy5vdXRQb3J0cy5taXNzZWQuZGlzY29ubmVjdCgpOwogICAgICBpZiAoX3RoaXMub3V0UG9ydHMucGFzc3RocnUuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLnBhc3N0aHJ1LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgfSk7CiAgfQoKICByZXR1cm4gRmlsdGVyUGFja2V0czsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRmlsdGVyUGFja2V0czsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRmlsdGVyQnlWYWx1ZS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBGaWx0ZXJCeVZhbHVlLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCkZpbHRlckJ5VmFsdWUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEZpbHRlckJ5VmFsdWUsIF9zdXBlcik7CgogIEZpbHRlckJ5VmFsdWUucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gIkZpbHRlciBwYWNrZXRzIGJhc2VkIG9uIHRoZWlyIHZhbHVlIjsKCiAgZnVuY3Rpb24gRmlsdGVyQnlWYWx1ZSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmZpbHRlclZhbHVlID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGZpbHRlcnZhbHVlOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIGxvd2VyOiBuZXcgbm9mbG8uUG9ydCwKICAgICAgaGlnaGVyOiBuZXcgbm9mbG8uUG9ydCwKICAgICAgZXF1YWw6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLmZpbHRlcnZhbHVlLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZmlsdGVyVmFsdWUgPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChkYXRhIDwgX3RoaXMuZmlsdGVyVmFsdWUpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMubG93ZXIuc2VuZChkYXRhKTsKICAgICAgfSBlbHNlIGlmIChkYXRhID4gX3RoaXMuZmlsdGVyVmFsdWUpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuaGlnaGVyLnNlbmQoZGF0YSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gX3RoaXMuZmlsdGVyVmFsdWUpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuZXF1YWwuc2VuZChkYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLmxvd2VyLmlzQ29ubmVjdGVkKCkpIHsKICAgICAgICBfdGhpcy5vdXRQb3J0cy5sb3dlci5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgICAgaWYgKF90aGlzLm91dFBvcnRzLmhpZ2hlci5pc0Nvbm5lY3RlZCgpKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMuaGlnaGVyLmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgICBpZiAoX3RoaXMub3V0UG9ydHMuZXF1YWwuaXNDb25uZWN0ZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5lcXVhbC5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgcmV0dXJuIEZpbHRlckJ5VmFsdWU7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEZpbHRlckJ5VmFsdWU7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0ZpbHRlckJ5UG9zaXRpb24uanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRmlsdGVyQnlQb3NpdGlvbiwgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpfID0gcmVxdWlyZSgidW5kZXJzY29yZSIpOwoKRmlsdGVyQnlQb3NpdGlvbiA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoRmlsdGVyQnlQb3NpdGlvbiwgX3N1cGVyKTsKCiAgRmlsdGVyQnlQb3NpdGlvbi5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiRmlsdGVyIHBhY2tldHMgYmFzZWQgb24gdGhlaXIgcG9zaXRpb25zIjsKCiAgZnVuY3Rpb24gRmlsdGVyQnlQb3NpdGlvbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmZpbHRlcnMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGZpbHRlcjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLmZpbHRlci5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZmlsdGVycyA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZmlsdGVyLm9uKCJkYXRhIiwgZnVuY3Rpb24oZmlsdGVyKSB7CiAgICAgIHJldHVybiBfdGhpcy5maWx0ZXJzLnB1c2goZmlsdGVyKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5jb3VudCA9IDA7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLmZpbHRlcnNbX3RoaXMuY291bnRdKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLmNvdW50Kys7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIEZpbHRlckJ5UG9zaXRpb247Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEZpbHRlckJ5UG9zaXRpb247Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0ZpbHRlclBhY2tldC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBGaWx0ZXJQYWNrZXQsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKRmlsdGVyUGFja2V0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhGaWx0ZXJQYWNrZXQsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEZpbHRlclBhY2tldCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnJlZ2V4cHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgcmVnZXhwOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCksCiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIG1pc3NlZDogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5yZWdleHAub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZWdleHBzLnB1c2goZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLnJlZ2V4cHMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmZpbHRlckRhdGEoZGF0YSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5taXNzZWQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBGaWx0ZXJQYWNrZXQucHJvdG90eXBlLmZpbHRlckRhdGEgPSBmdW5jdGlvbihkYXRhKSB7CiAgICB2YXIgZXhwcmVzc2lvbiwgbWF0Y2gsIHJlZ2V4cCwgX2ksIF9sZW4sIF9yZWY7CiAgICBtYXRjaCA9IGZhbHNlOwogICAgX3JlZiA9IHRoaXMucmVnZXhwczsKICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBleHByZXNzaW9uID0gX3JlZltfaV07CiAgICAgIHJlZ2V4cCA9IG5ldyBSZWdFeHAoZXhwcmVzc2lvbik7CiAgICAgIGlmICghcmVnZXhwLmV4ZWMoZGF0YSkpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBtYXRjaCA9IHRydWU7CiAgICB9CiAgICBpZiAoIW1hdGNoKSB7CiAgICAgIGlmICh0aGlzLm91dFBvcnRzLm1pc3NlZC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICB0aGlzLm91dFBvcnRzLm1pc3NlZC5zZW5kKGRhdGEpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiB0aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogIH07CgogIHJldHVybiBGaWx0ZXJQYWNrZXQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEZpbHRlclBhY2tldDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvVW5pcXVlUGFja2V0LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFVuaXF1ZVBhY2tldCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpVbmlxdWVQYWNrZXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFVuaXF1ZVBhY2tldCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gVW5pcXVlUGFja2V0KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuc2VlbiA9IFtdOwogICAgdGhpcy5ncm91cHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpLAogICAgICBjbGVhcjogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpLAogICAgICBkdXBsaWNhdGU6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMucHVzaChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGdyb3VwLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVmMSwgX3Jlc3VsdHM7CiAgICAgIGlmICghX3RoaXMudW5pcXVlKGRhdGEpKSB7CiAgICAgICAgaWYgKCFfdGhpcy5vdXRQb3J0cy5kdXBsaWNhdGUuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIF90aGlzLm91dFBvcnRzLmR1cGxpY2F0ZS5zZW5kKGRhdGEpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfcmVmID0gX3RoaXMuZ3JvdXBzOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgICAgfQogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgX3JlZjEgPSBfdGhpcy5ncm91cHM7CiAgICAgIF9yZXN1bHRzID0gW107CiAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICAgIGdyb3VwID0gX3JlZjFbX2pdOwogICAgICAgIF9yZXN1bHRzLnB1c2goX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnBvcCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgaWYgKCFfdGhpcy5vdXRQb3J0cy5kdXBsaWNhdGUuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5kdXBsaWNhdGUuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuY2xlYXIub24oJ2RhdGEnLCBmdW5jdGlvbigpIHsKICAgICAgX3RoaXMuc2VlbiA9IFtdOwogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzID0gW107CiAgICB9KTsKICB9CgogIFVuaXF1ZVBhY2tldC5wcm90b3R5cGUudW5pcXVlID0gZnVuY3Rpb24ocGFja2V0KSB7CiAgICBpZiAodGhpcy5zZWVuLmluZGV4T2YocGFja2V0KSAhPT0gLTEpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdGhpcy5zZWVuLnB1c2gocGFja2V0KTsKICAgIHJldHVybiB0cnVlOwogIH07CgogIHJldHVybiBVbmlxdWVQYWNrZXQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFVuaXF1ZVBhY2tldDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvR3JvdXBCeVBhY2tldC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBHcm91cEJ5UGFja2V0LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkdyb3VwQnlQYWNrZXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEdyb3VwQnlQYWNrZXQsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEdyb3VwQnlQYWNrZXQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5wYWNrZXRzID0gMDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgICByZXR1cm4gX3RoaXMucGFja2V0cyA9IDA7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoX3RoaXMucGFja2V0cyk7CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgICAgcmV0dXJuIF90aGlzLnBhY2tldHMrKzsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5wYWNrZXRzID0gMDsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBHcm91cEJ5UGFja2V0OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBHcm91cEJ5UGFja2V0Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9MYXN0UGFja2V0LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIExhc3RQYWNrZXQsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKTGFzdFBhY2tldCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoTGFzdFBhY2tldCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gTGFzdFBhY2tldCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnBhY2tldHMgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5wYWNrZXRzID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnBhY2tldHMucHVzaChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIGlmIChfdGhpcy5wYWNrZXRzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChfdGhpcy5wYWNrZXRzLnBvcCgpKTsKICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgcmV0dXJuIF90aGlzLnBhY2tldHMgPSBudWxsOwogICAgfSk7CiAgfQoKICByZXR1cm4gTGFzdFBhY2tldDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgTGFzdFBhY2tldDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvQ291bnRlci5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb3VudGVyLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkNvdW50ZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENvdW50ZXIsIF9zdXBlcik7CgogIENvdW50ZXIucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1RoZSBjb3VudCBjb21wb25lbnQgcmVjZWl2ZXMgaW5wdXQgb24gYSBzaW5nbGUgaW5wdXQgcG9ydCxcCiAgICBhbmQgc2VuZHMgdGhlIG51bWJlciBvZiBkYXRhIHBhY2tldHMgcmVjZWl2ZWQgdG8gdGhlIG91dHB1dCBwb3J0IHdoZW5cCiAgICB0aGUgaW5wdXQgZGlzY29ubmVjdHMnOwoKICBmdW5jdGlvbiBDb3VudGVyKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuY291bnQgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIGNvdW50OiBuZXcgbm9mbG8uUG9ydCwKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLmNvdW50ID09PSBudWxsKSB7CiAgICAgICAgX3RoaXMuY291bnQgPSAwOwogICAgICB9CiAgICAgIF90aGlzLmNvdW50Kys7CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5vdXQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5jb3VudC5zZW5kKF90aGlzLmNvdW50KTsKICAgICAgX3RoaXMub3V0UG9ydHMuY291bnQuZGlzY29ubmVjdCgpOwogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm4gX3RoaXMuY291bnQgPSBudWxsOwogICAgfSk7CiAgfQoKICByZXR1cm4gQ291bnRlcjsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgQ291bnRlcjsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1zdHJpbmdzL2luZGV4LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKLyoKICogVGhpcyBmaWxlIGNhbiBiZSB1c2VkIGZvciBnZW5lcmFsIGxpYnJhcnkgZmVhdHVyZXMgdGhhdCBhcmUgZXhwb3NlZCBhcyBDb21tb25KUyBtb2R1bGVzCiAqIHRoYXQgdGhlIGNvbXBvbmVudHMgdGhlbiB1dGlsaXplCiAqLwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXN0cmluZ3MvY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvLXN0cmluZ3MiLCJkZXNjcmlwdGlvbiI6IlN0cmluZyBVdGlsaXRpZXMgZm9yIE5vRmxvIiwiYXV0aG9yIjoiSGVucmkgQmVyZ2l1cyA8aGVucmkuYmVyZ2l1c0Bpa2kuZmk+IiwicmVwbyI6Im5vZmxvL25vZmxvLXN0cmluZ3MiLCJ2ZXJzaW9uIjoiMC4wLjEiLCJrZXl3b3JkcyI6W10sImRlcGVuZGVuY2llcyI6eyJub2Zsby9ub2ZsbyI6IioiLCJjb21wb25lbnQvdW5kZXJzY29yZSI6IioifSwic2NyaXB0cyI6WyJjb21wb25lbnRzL0NvbXBpbGVTdHJpbmcuY29mZmVlIiwiY29tcG9uZW50cy9GaWx0ZXIuY29mZmVlIiwiY29tcG9uZW50cy9TZW5kU3RyaW5nLmNvZmZlZSIsImNvbXBvbmVudHMvU3BsaXRTdHIuY29mZmVlIiwiY29tcG9uZW50cy9TdHJpbmdUZW1wbGF0ZS5jb2ZmZWUiLCJjb21wb25lbnRzL1JlcGxhY2UuY29mZmVlIiwiY29tcG9uZW50cy9Kc29uaWZ5LmNvZmZlZSIsImNvbXBvbmVudHMvUGFyc2VKc29uLmNvZmZlZSIsImluZGV4LmpzIl0sImpzb24iOlsiY29tcG9uZW50Lmpzb24iXSwibm9mbG8iOnsiaWNvbiI6ImZvbnQiLCJjb21wb25lbnRzIjp7IkNvbXBpbGVTdHJpbmciOiJjb21wb25lbnRzL0NvbXBpbGVTdHJpbmcuY29mZmVlIiwiRmlsdGVyIjoiY29tcG9uZW50cy9GaWx0ZXIuY29mZmVlIiwiU2VuZFN0cmluZyI6ImNvbXBvbmVudHMvU2VuZFN0cmluZy5jb2ZmZWUiLCJTcGxpdFN0ciI6ImNvbXBvbmVudHMvU3BsaXRTdHIuY29mZmVlIiwiU3RyaW5nVGVtcGxhdGUiOiJjb21wb25lbnRzL1N0cmluZ1RlbXBsYXRlLmNvZmZlZSIsIlJlcGxhY2UiOiJjb21wb25lbnRzL1JlcGxhY2UuY29mZmVlIiwiSnNvbmlmeSI6ImNvbXBvbmVudHMvSnNvbmlmeS5jb2ZmZWUiLCJQYXJzZUpzb24iOiJjb21wb25lbnRzL1BhcnNlSnNvbi5jb2ZmZWUifX19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvQ29tcGlsZVN0cmluZy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb21waWxlU3RyaW5nLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkNvbXBpbGVTdHJpbmcgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENvbXBpbGVTdHJpbmcsIF9zdXBlcik7CgogIGZ1bmN0aW9uIENvbXBpbGVTdHJpbmcoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5kZWxpbWl0ZXIgPSAiXG4iOwogICAgdGhpcy5kYXRhID0gW107CiAgICB0aGlzLm9uR3JvdXBFbmQgPSB0cnVlOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBkZWxpbWl0ZXI6IG5ldyBub2Zsby5Qb3J0LAogICAgICAiaW4iOiBuZXcgbm9mbG8uQXJyYXlQb3J0LAogICAgICBvbmdyb3VwOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHMuZGVsaW1pdGVyLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZGVsaW1pdGVyID0gZGF0YTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZGF0YS5wdXNoKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIGlmIChfdGhpcy5kYXRhLmxlbmd0aCAmJiBfdGhpcy5vbkdyb3VwRW5kKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoX3RoaXMuZGF0YS5qb2luKF90aGlzLmRlbGltaXRlcikpOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICByZXR1cm4gX3RoaXMuZGF0YSA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF90aGlzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoX3RoaXMuZGF0YS5qb2luKF90aGlzLmRlbGltaXRlcikpOwogICAgICB9CiAgICAgIF90aGlzLmRhdGEgPSBbXTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5vbmdyb3VwLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYgKGRhdGEudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJykgewogICAgICAgICAgX3RoaXMub25Hcm91cEVuZCA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBfdGhpcy5vbkdyb3VwRW5kID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm9uR3JvdXBFbmQgPSBkYXRhOwogICAgfSk7CiAgfQoKICByZXR1cm4gQ29tcGlsZVN0cmluZzsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgQ29tcGlsZVN0cmluZzsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvRmlsdGVyLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEZpbHRlciwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpGaWx0ZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEZpbHRlciwgX3N1cGVyKTsKCiAgRmlsdGVyLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJmaWx0ZXJzIGFuIElQIHdoaWNoIGlzIGEgc3RyaW5nIHVzaW5nIGEgcmVnZXgiOwoKICBmdW5jdGlvbiBGaWx0ZXIoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5yZWdleCA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKSwKICAgICAgcGF0dGVybjogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJyksCiAgICAgIG1pc3NlZDogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLnBhdHRlcm4ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZWdleCA9IG5ldyBSZWdFeHAoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJykgewogICAgICAgIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgIH0KICAgICAgaWYgKChfdGhpcy5yZWdleCAhPSBudWxsKSAmJiAoKGRhdGEgIT0gbnVsbCA/IHR5cGVvZiBkYXRhLm1hdGNoID09PSAiZnVuY3Rpb24iID8gZGF0YS5tYXRjaChfdGhpcy5yZWdleCkgOiB2b2lkIDAgOiB2b2lkIDApICE9IG51bGwpKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5taXNzZWQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm1pc3NlZC5zZW5kKGRhdGEpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgICBpZiAoX3RoaXMub3V0UG9ydHMubWlzc2VkLmlzQXR0YWNoZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5taXNzZWQuZGlzY29ubmVjdCgpOwogICAgICB9CiAgICB9KTsKICB9CgogIHJldHVybiBGaWx0ZXI7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEZpbHRlcjsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvU2VuZFN0cmluZy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBTZW5kU3RyaW5nLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClNlbmRTdHJpbmcgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFNlbmRTdHJpbmcsIF9zdXBlcik7CgogIGZ1bmN0aW9uIFNlbmRTdHJpbmcoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5kYXRhID0gewogICAgICBzdHJpbmc6IG51bGwsCiAgICAgIGdyb3VwOiBbXQogICAgfTsKICAgIHRoaXMuZ3JvdXBzID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIHN0cmluZzogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpLAogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLmluUG9ydHMuc3RyaW5nLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZGF0YS5zdHJpbmcgPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLmRhdGEuZ3JvdXAgPSBfdGhpcy5ncm91cHMuc2xpY2UoMCk7CiAgICAgIHJldHVybiBfdGhpcy5zZW5kU3RyaW5nKF90aGlzLmRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3Vwcy5wb3AoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBTZW5kU3RyaW5nLnByb3RvdHlwZS5zZW5kU3RyaW5nID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIGdyb3VwLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVmMSwgX3Jlc3VsdHM7CiAgICBfcmVmID0gZGF0YS5ncm91cDsKICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICB0aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0KICAgIHRoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YS5zdHJpbmcpOwogICAgX3JlZjEgPSBkYXRhLmdyb3VwOwogICAgX3Jlc3VsdHMgPSBbXTsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICBncm91cCA9IF9yZWYxW19qXTsKICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpKTsKICAgIH0KICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICByZXR1cm4gU2VuZFN0cmluZzsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU2VuZFN0cmluZzsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvU3BsaXRTdHIuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgU3BsaXRTdHIsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKU3BsaXRTdHIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFNwbGl0U3RyLCBfc3VwZXIpOwoKICBTcGxpdFN0ci5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnIFRoZSBTcGxpdFN0ciBjb21wb25lbnQgcmVjZWl2ZXMgYSBzdHJpbmcgaW4gdGhlIGluIHBvcnQsXAogICAgc3BsaXRzIGl0IGJ5IHN0cmluZyBzcGVjaWZpZWQgaW4gdGhlIGRlbGltaXRlciBwb3J0LCBhbmQgc2VuZCBlYWNoIHBhcnQgYXNcCiAgICBhIHNlcGFyYXRlIHBhY2tldCB0byB0aGUgb3V0IHBvcnQnOwoKICBmdW5jdGlvbiBTcGxpdFN0cigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRlbGltaXRlclN0cmluZyA9ICJcbiI7CiAgICB0aGlzLnN0cmluZ3MgPSBbXTsKICAgIHRoaXMuZ3JvdXBzID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIGRlbGltaXRlcjogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5kZWxpbWl0ZXIub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBmaXJzdCwgbGFzdDsKICAgICAgZmlyc3QgPSBkYXRhLnN1YnN0cigwLCAxKTsKICAgICAgbGFzdCA9IGRhdGEuc3Vic3RyKGRhdGEubGVuZ3RoIC0gMSwgMSk7CiAgICAgIGlmIChmaXJzdCA9PT0gJy8nICYmIGxhc3QgPT09ICcvJyAmJiBkYXRhLmxlbmd0aCA+IDEpIHsKICAgICAgICBkYXRhID0gbmV3IFJlZ0V4cChkYXRhLnN1YnN0cigxLCBkYXRhLmxlbmd0aCAtIDIpKTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuZGVsaW1pdGVyU3RyaW5nID0gZGF0YTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuc3RyaW5ncy5wdXNoKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBncm91cCwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZiwgX3JlZjE7CiAgICAgIGlmIChfdGhpcy5zdHJpbmdzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgICB9CiAgICAgIF9yZWYgPSBfdGhpcy5ncm91cHM7CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGdyb3VwID0gX3JlZltfaV07CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgICB9CiAgICAgIF90aGlzLnN0cmluZ3Muam9pbihfdGhpcy5kZWxpbWl0ZXJTdHJpbmcpLnNwbGl0KF90aGlzLmRlbGltaXRlclN0cmluZykuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGxpbmUpOwogICAgICB9KTsKICAgICAgX3JlZjEgPSBfdGhpcy5ncm91cHM7CiAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICAgIGdyb3VwID0gX3JlZjFbX2pdOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICAgIF90aGlzLnN0cmluZ3MgPSBbXTsKICAgICAgcmV0dXJuIF90aGlzLmdyb3VwcyA9IFtdOwogICAgfSk7CiAgfQoKICByZXR1cm4gU3BsaXRTdHI7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFNwbGl0U3RyKCk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1N0cmluZ1RlbXBsYXRlLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFN0cmluZ1RlbXBsYXRlLCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCl8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7CgpTdHJpbmdUZW1wbGF0ZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoU3RyaW5nVGVtcGxhdGUsIF9zdXBlcik7CgogIGZ1bmN0aW9uIFN0cmluZ1RlbXBsYXRlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMudGVtcGxhdGUgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICB0ZW1wbGF0ZTogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpLAogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy50ZW1wbGF0ZS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnRlbXBsYXRlID0gXy50ZW1wbGF0ZShkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoX3RoaXMudGVtcGxhdGUoZGF0YSkpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBTdHJpbmdUZW1wbGF0ZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU3RyaW5nVGVtcGxhdGU7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1JlcGxhY2UuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUmVwbGFjZSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpSZXBsYWNlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSZXBsYWNlLCBfc3VwZXIpOwoKICBSZXBsYWNlLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdHaXZlbiBhIGZpeGVkIHBhdHRlcm4gYW5kIGl0cyByZXBsYWNlbWVudCwgcmVwbGFjZSBhbGxcCiAgb2NjdXJyZW5jZXMgaW4gdGhlIGluY29taW5nIHRlbXBsYXRlLic7CgogIGZ1bmN0aW9uIFJlcGxhY2UoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5wYXR0ZXJuID0gbnVsbDsKICAgIHRoaXMucmVwbGFjZW1lbnQgPSAnJzsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpLAogICAgICBwYXR0ZXJuOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJyksCiAgICAgIHJlcGxhY2VtZW50OiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5wYXR0ZXJuLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucGF0dGVybiA9IG5ldyBSZWdFeHAoZGF0YSwgJ2cnKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnJlcGxhY2VtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucmVwbGFjZW1lbnQgPSBkYXRhLnJlcGxhY2UoJ1xcXFxuJywgIlxuIik7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIHN0cmluZzsKICAgICAgc3RyaW5nID0gZGF0YTsKICAgICAgaWYgKF90aGlzLnBhdHRlcm4gIT0gbnVsbCkgewogICAgICAgIHN0cmluZyA9ICgiIiArIGRhdGEpLnJlcGxhY2UoX3RoaXMucGF0dGVybiwgX3RoaXMucmVwbGFjZW1lbnQpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChzdHJpbmcpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gUmVwbGFjZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVwbGFjZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvSnNvbmlmeS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBKc29uaWZ5LCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCl8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7CgpKc29uaWZ5ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhKc29uaWZ5LCBfc3VwZXIpOwoKICBKc29uaWZ5LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJKU09OaWZ5IGFsbCBpbmNvbWluZywgdW5sZXNzIGEgcmF3IGZsYWcgaXMgc2V0IHRvICBleGNsdWRlIGRhdGEgcGFja2V0cyB0aGF0IGFyZSBwdXJlIHN0cmluZ3MiOwoKICBmdW5jdGlvbiBKc29uaWZ5KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucmF3ID0gZmFsc2U7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIHJhdzogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5yYXcub24oJ2RhdGEnLCBmdW5jdGlvbihyYXcpIHsKICAgICAgcmV0dXJuIF90aGlzLnJhdyA9IHJhdyA9PT0gJ3RydWUnOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChfdGhpcy5yYXcgJiYgXy5pc1N0cmluZyhkYXRhKSkgewogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBKc29uaWZ5OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBKc29uaWZ5Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLXN0cmluZ3MvY29tcG9uZW50cy9QYXJzZUpzb24uanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUGFyc2VKc29uLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKClBhcnNlSnNvbiA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoUGFyc2VKc29uLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBQYXJzZUpzb24oKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpc1sidHJ5Il0gPSBmYWxzZTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoKSwKICAgICAgInRyeSI6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHNbInRyeSJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICBpZiAoZGF0YSA9PT0gInRydWUiKSB7CiAgICAgICAgcmV0dXJuIF90aGlzWyJ0cnkiXSA9IHRydWU7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgZTsKICAgICAgdHJ5IHsKICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTsKICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7CiAgICAgICAgZSA9IF9lcnJvcjsKICAgICAgICBpZiAoIV90aGlzWyJ0cnkiXSkgewogICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFBhcnNlSnNvbjsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUGFyc2VKc29uOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3REcmFnLmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sicHJvcGVydGllcyI6eyJlbnZpcm9ubWVudCI6eyJydW50aW1lIjoiaHRtbCIsInNyYyI6Ii4vcHJldmlldy9pZnJhbWUuaHRtbCIsIndpZHRoIjoiMzAwIiwiaGVpZ2h0IjoiMzAwIiwiY29udGVudCI6IiJ9LCJuYW1lIjoiRGV0ZWN0RHJhZyJ9LCJleHBvcnRzIjpbeyJwcml2YXRlIjoicmVjZWl2ZWdlc3R1cmVfM2J3eW8uaW4iLCJwdWJsaWMiOiJpbiJ9LHsicHJpdmF0ZSI6ImNoZWNrbWluZGlzdGFuY2VfenN5aHEuY29tcGFyaXNvbiIsInB1YmxpYyI6ImRpc3RhbmNlIn0seyJwcml2YXRlIjoic2VuZHBhc3NfbHNreHEub3V0IiwicHVibGljIjoicGFzcyJ9LHsicHJpdmF0ZSI6InNlbmRmYWlsXzY0bW0yLm91dCIsInB1YmxpYyI6ImZhaWwifSx7InByaXZhdGUiOiJjaGVja21heHNwZWVkX3NvanRpLmNvbXBhcmlzb24iLCJwdWJsaWMiOiJtYXhzcGVlZCJ9XSwicHJvY2Vzc2VzIjp7IlJlY2VpdmVHZXN0dXJlXzNid3lvIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6LTYwNSwieSI6ODIsImxhYmVsIjoiUmVjZWl2ZUdlc3R1cmUifX0sImNvcmUvU3BsaXRfcWZob20iOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOi02MDUsInkiOjE1OSwibGFiZWwiOiJjb3JlL1NwbGl0In19LCJTZW5kUGFzc19sc2t4cSI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4IjoxMTQzLCJ5IjoyOCwibGFiZWwiOiJTZW5kUGFzcyJ9fSwiU2VuZEZhaWxfNjRtbTIiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTE0NSwieSI6MzA1LCJsYWJlbCI6IlNlbmRGYWlsIn19LCJGYWlsdXJlc18xM3E4cyI6eyJjb21wb25lbnQiOiJjb3JlL01lcmdlIiwibWV0YWRhdGEiOnsieCI6OTQxLCJ5IjozMTEsImxhYmVsIjoiRmFpbHVyZXMifX0sIkdldERpc3RhbmNlX2JqeDBzIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6NTI2LCJ5IjoxNjEsImxhYmVsIjoiR2V0RGlzdGFuY2UifX0sIkNoZWNrTWluRGlzdGFuY2VfenN5aHEiOnsiY29tcG9uZW50IjoibWF0aC9Db21wYXJlIiwibWV0YWRhdGEiOnsieCI6OTAwLCJ5IjoxNjAsImxhYmVsIjoiQ2hlY2tNaW5EaXN0YW5jZSJ9fSwiR2V0SW5kaXZpZHVhbFBvaW50ZXJfaHY5M3QiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9TcGxpdE9iamVjdCIsIm1ldGFkYXRhIjp7IngiOi00MTAsInkiOjE1OSwibGFiZWwiOiJHZXRJbmRpdmlkdWFsUG9pbnRlciJ9fSwiU3BsaXREaXN0YW5jZV92cmV5ZiI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6NzExLjk5OTk5OTk5OTk5OTgsInkiOjE2MCwibGFiZWwiOiJTcGxpdERpc3RhbmNlIn19LCJTcGxpdFBvaW50ZXJfOHJuOXEiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOi0yMjMuNTAwMDAwMDAwMDAwOCwieSI6MTU5LjE2NjY2NjY2NjY2NjY2LCJsYWJlbCI6IlNwbGl0UG9pbnRlciJ9fSwiU2VuZFBvaW50ZXJfYjR1bnYiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MzQwLjMzMzMzMzMzMzMzMjgsInkiOjE2MC4xNjY2NjY2NjY2NjY2OSwibGFiZWwiOiJTZW5kUG9pbnRlciJ9fSwiR2V0U3BlZWRfbzU2ZnAiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9HZXRPYmplY3RLZXkiLCJtZXRhZGF0YSI6eyJ4IjotNDAuNDk5OTk5OTk5OTk5NzcsInkiOjE1OSwibGFiZWwiOiJHZXRTcGVlZCJ9fSwiQ2hlY2tNYXhTcGVlZF9zb2p0aSI6eyJjb21wb25lbnQiOiJtYXRoL0NvbXBhcmUiLCJtZXRhZGF0YSI6eyJ4IjoxNTAuNTAwMDAwMDAwMDAwMjMsInkiOjE2MSwibGFiZWwiOiJDaGVja01heFNwZWVkIn19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoiUmVjZWl2ZUdlc3R1cmVfM2J3eW8iLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9xZmhvbSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3FmaG9tIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRGYWlsXzY0bW0yIiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3FmaG9tIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRQYXNzX2xza3hxIiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJGYWlsdXJlc18xM3E4cyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kRmFpbF82NG1tMiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9iangwcyIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsdXJlc18xM3E4cyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja01pbkRpc3RhbmNlX3pzeWhxIiwicG9ydCI6ImZhaWwifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsdXJlc18xM3E4cyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3FmaG9tIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEluZGl2aWR1YWxQb2ludGVyX2h2OTN0IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX2JqeDBzIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0RGlzdGFuY2VfdnJleWYiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXREaXN0YW5jZV92cmV5ZiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJDaGVja01pbkRpc3RhbmNlX3pzeWhxIiwicG9ydCI6InZhbHVlIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldEluZGl2aWR1YWxQb2ludGVyX2h2OTN0IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0UG9pbnRlcl84cm45cSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OH19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja01pbkRpc3RhbmNlX3pzeWhxIiwicG9ydCI6InBhc3MifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUGFzc19sc2t4cSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTZW5kUG9pbnRlcl9iNHVudiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9iangwcyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdFBvaW50ZXJfOHJuOXEiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFBvaW50ZXJfYjR1bnYiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IkNoZWNrTWF4U3BlZWRfc29qdGkiLCJwb3J0IjoicGFzcyJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRQb2ludGVyX2I0dW52IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldFNwZWVkX281NmZwIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrTWF4U3BlZWRfc29qdGkiLCJwb3J0IjoidmFsdWUifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRQb2ludGVyXzhybjlxIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldFNwZWVkX281NmZwIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo4fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldFNwZWVkX281NmZwIiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkZhaWx1cmVzXzEzcThzIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkNoZWNrTWF4U3BlZWRfc29qdGkiLCJwb3J0IjoiZmFpbCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkZhaWx1cmVzXzEzcThzIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJkYXRhIjoiZGlzdGFuY2UiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX2JqeDBzIiwicG9ydCI6ImtleSJ9fSx7ImRhdGEiOiI+PSIsInRndCI6eyJwcm9jZXNzIjoiQ2hlY2tNaW5EaXN0YW5jZV96c3locSIsInBvcnQiOiJvcGVyYXRvciJ9fSx7ImRhdGEiOiI8PSIsInRndCI6eyJwcm9jZXNzIjoiQ2hlY2tNYXhTcGVlZF9zb2p0aSIsInBvcnQiOiJvcGVyYXRvciJ9fSx7ImRhdGEiOiJzcGVlZCIsInRndCI6eyJwcm9jZXNzIjoiR2V0U3BlZWRfbzU2ZnAiLCJwb3J0Ijoia2V5In19XX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RTd2lwZS5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsiZW52aXJvbm1lbnQiOnsicnVudGltZSI6Imh0bWwiLCJzcmMiOiIuL3ByZXZpZXcvaWZyYW1lLmh0bWwiLCJ3aWR0aCI6IjMwMCIsImhlaWdodCI6IjMwMCIsImNvbnRlbnQiOiIifSwibmFtZSI6IkRldGVjdFN3aXBlIn0sImV4cG9ydHMiOlt7InByaXZhdGUiOiJyZWNlaXZlZ2VzdHVyZV83ZnhjMy5pbiIsInB1YmxpYyI6ImluIn0seyJwcml2YXRlIjoic2VuZHBhc3NfaXVjMjEub3V0IiwicHVibGljIjoicGFzcyJ9LHsicHJpdmF0ZSI6InNlbmRmYWlsX245aWF5Lm91dCIsInB1YmxpYyI6ImZhaWwifSx7InByaXZhdGUiOiJjaGVja3NwZWVkX2NydTIxLmNvbXBhcmlzb24iLCJwdWJsaWMiOiJzcGVlZCJ9LHsicHJpdmF0ZSI6ImNoZWNrZGlzdGFuY2VfNzg2Y2MuY29tcGFyaXNvbiIsInB1YmxpYyI6ImRpc3RhbmNlIn1dLCJwcm9jZXNzZXMiOnsiUmVjZWl2ZUdlc3R1cmVfN2Z4YzMiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoyNzcsInkiOjEyNCwibGFiZWwiOiJSZWNlaXZlR2VzdHVyZSJ9fSwiR2V0SW5kaXZpZHVhbFBvaW50ZXJfOW84NzgiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9TcGxpdE9iamVjdCIsIm1ldGFkYXRhIjp7IngiOjQ3MywieSI6MjE3LCJsYWJlbCI6IkdldEluZGl2aWR1YWxQb2ludGVyIn19LCJTZW5kUGFzc19pdWMyMSI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4IjoyMDYwLCJ5IjoxMTMsImxhYmVsIjoiU2VuZFBhc3MifX0sIkdldFNwZWVkXzI2bjZoIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6ODYzLCJ5IjoyMTYsImxhYmVsIjoiR2V0U3BlZWQifX0sIkRldGVjdGlvbkZhaWxlZF91ajdvaCI6eyJjb21wb25lbnQiOiJjb3JlL01lcmdlIiwibWV0YWRhdGEiOnsieCI6MTg1MCwieSI6MzM3LCJsYWJlbCI6IkRldGVjdGlvbkZhaWxlZCJ9fSwiY29yZS9TcGxpdF9jYmp5eSI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6MjczLCJ5IjoyMTYsImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiU2VuZEZhaWxfbjlpYXkiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MjA2MiwieSI6MzM3LjE2NjY2NjY2NjY2NjYzLCJsYWJlbCI6IlNlbmRGYWlsIn19LCJDaGVja1NwZWVkX2NydTIxIjp7ImNvbXBvbmVudCI6Im1hdGgvQ29tcGFyZSIsIm1ldGFkYXRhIjp7IngiOjEwNTUuNjY2NjY2NjY2NjY2NSwieSI6MjE1LjY2NjY2NjY2NjY2NjY2LCJsYWJlbCI6IkNoZWNrU3BlZWQifX0sInN0cmluZ3MvU2VuZFN0cmluZ183NXNlNiI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4IjoxMjUwLjY2NjY2NjY2NjY2NjUsInkiOjIxNi42NjY2NjY2NjY2NjY2NiwibGFiZWwiOiJzdHJpbmdzL1NlbmRTdHJpbmcifX0sIkdldERpc3RhbmNlX3pkanlmIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6MTQ0NS42NjY2NjY2NjY2NjY1LCJ5IjoyMTUuNjY2NjY2NjY2NjY2NjYsImxhYmVsIjoiR2V0RGlzdGFuY2UifX0sIkNoZWNrRGlzdGFuY2VfNzg2Y2MiOnsiY29tcG9uZW50IjoibWF0aC9Db21wYXJlIiwibWV0YWRhdGEiOnsieCI6MTY0OCwieSI6MjE2LCJsYWJlbCI6IkNoZWNrRGlzdGFuY2UifX0sImNvcmUvU3BsaXRfeDZwOTMiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjY2Ny45OTk5OTk5OTk5OTg2LCJ5IjoyMTUuNjY2NjY2NjY2NjY2NjMsImxhYmVsIjoiY29yZS9TcGxpdCJ9fX0sImNvbm5lY3Rpb25zIjpbeyJzcmMiOnsicHJvY2VzcyI6IkdldFNwZWVkXzI2bjZoIiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkRldGVjdGlvbkZhaWxlZF91ajdvaCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja1NwZWVkX2NydTIxIiwicG9ydCI6InBhc3MifSwidGd0Ijp7InByb2Nlc3MiOiJzdHJpbmdzL1NlbmRTdHJpbmdfNzVzZTYiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0U3BlZWRfMjZuNmgiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQ2hlY2tTcGVlZF9jcnUyMSIsInBvcnQiOiJ2YWx1ZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja1NwZWVkX2NydTIxIiwicG9ydCI6ImZhaWwifSwidGd0Ijp7InByb2Nlc3MiOiJEZXRlY3Rpb25GYWlsZWRfdWo3b2giLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoic3RyaW5ncy9TZW5kU3RyaW5nXzc1c2U2IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX3pkanlmIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX3pkanlmIiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkRldGVjdGlvbkZhaWxlZF91ajdvaCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja0Rpc3RhbmNlXzc4NmNjIiwicG9ydCI6ImZhaWwifSwidGd0Ijp7InByb2Nlc3MiOiJEZXRlY3Rpb25GYWlsZWRfdWo3b2giLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0RGlzdGFuY2VfemRqeWYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQ2hlY2tEaXN0YW5jZV83ODZjYyIsInBvcnQiOiJ2YWx1ZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja0Rpc3RhbmNlXzc4NmNjIiwicG9ydCI6InBhc3MifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUGFzc19pdWMyMSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJEZXRlY3Rpb25GYWlsZWRfdWo3b2giLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZEZhaWxfbjlpYXkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiUmVjZWl2ZUdlc3R1cmVfN2Z4YzMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9jYmp5eSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2Nianl5IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRQYXNzX2l1YzIxIiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2Nianl5IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRGYWlsX245aWF5IiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2Nianl5IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEluZGl2aWR1YWxQb2ludGVyXzlvODc4IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldEluZGl2aWR1YWxQb2ludGVyXzlvODc4IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfeDZwOTMiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF94NnA5MyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJzdHJpbmdzL1NlbmRTdHJpbmdfNzVzZTYiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfeDZwOTMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0U3BlZWRfMjZuNmgiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7ImRhdGEiOiJzcGVlZCIsInRndCI6eyJwcm9jZXNzIjoiR2V0U3BlZWRfMjZuNmgiLCJwb3J0Ijoia2V5In19LHsiZGF0YSI6ImRpc3RhbmNlIiwidGd0Ijp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV96ZGp5ZiIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoiPj0iLCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrU3BlZWRfY3J1MjEiLCJwb3J0Ijoib3BlcmF0b3IifX0seyJkYXRhIjoiPj0iLCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrRGlzdGFuY2VfNzg2Y2MiLCJwb3J0Ijoib3BlcmF0b3IifX1dfScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdFBpbmNoLmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sicHJvcGVydGllcyI6eyJlbnZpcm9ubWVudCI6eyJydW50aW1lIjoiaHRtbCIsInNyYyI6Ii4vcHJldmlldy9pZnJhbWUuaHRtbCIsIndpZHRoIjoiMzAwIiwiaGVpZ2h0IjoiMzAwIiwiY29udGVudCI6IiJ9LCJuYW1lIjoiRGV0ZWN0UGluY2gifSwiZXhwb3J0cyI6W3sicHJpdmF0ZSI6ImNvcmUvc3BsaXRfZXdicmUuaW4iLCJwdWJsaWMiOiJpbiJ9LHsicHJpdmF0ZSI6InNlbmRwYXNzX2NmMHB1Lm91dCIsInB1YmxpYyI6InBhc3MifSx7InByaXZhdGUiOiJzZW5kZmFpbF92bWk1bi5vdXQiLCJwdWJsaWMiOiJmYWlsIn1dLCJwcm9jZXNzZXMiOnsiY29yZS9TcGxpdF9ld2JyZSI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6NzQwLCJ5IjoxNTEsImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiU2VuZEZhaWxfdm1pNW4iOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTQyMywieSI6MjU5LCJsYWJlbCI6IlNlbmRGYWlsIn19LCJTZW5kUGFzc19jZjBwdSI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4IjoxNDIxLCJ5Ijo2NSwibGFiZWwiOiJTZW5kUGFzcyJ9fSwib2JqZWN0cy9TaXplX2pqbW1nIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvU2l6ZSIsIm1ldGFkYXRhIjp7IngiOjkzOSwieSI6MTUwLCJsYWJlbCI6Im9iamVjdHMvU2l6ZSJ9fSwibWF0aC9Db21wYXJlX2hrM3N1Ijp7ImNvbXBvbmVudCI6Im1hdGgvQ29tcGFyZSIsIm1ldGFkYXRhIjp7IngiOjExNDYsInkiOjE0NywibGFiZWwiOiJtYXRoL0NvbXBhcmUifX19LCJjb25uZWN0aW9ucyI6W3sic3JjIjp7InByb2Nlc3MiOiJvYmplY3RzL1NpemVfamptbWciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoibWF0aC9Db21wYXJlX2hrM3N1IiwicG9ydCI6InZhbHVlIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6Im1hdGgvQ29tcGFyZV9oazNzdSIsInBvcnQiOiJwYXNzIn0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFBhc3NfY2YwcHUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoibWF0aC9Db21wYXJlX2hrM3N1IiwicG9ydCI6ImZhaWwifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kRmFpbF92bWk1biIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2V3YnJlIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRGYWlsX3ZtaTVuIiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2V3YnJlIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRQYXNzX2NmMHB1IiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2V3YnJlIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Im9iamVjdHMvU2l6ZV9qam1tZyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsiZGF0YSI6MSwidGd0Ijp7InByb2Nlc3MiOiJtYXRoL0NvbXBhcmVfaGszc3UiLCJwb3J0IjoiY29tcGFyaXNvbiJ9fSx7ImRhdGEiOiI+IiwidGd0Ijp7InByb2Nlc3MiOiJtYXRoL0NvbXBhcmVfaGszc3UiLCJwb3J0Ijoib3BlcmF0b3IifX1dfScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0ZpbHRlckJ5VGFyZ2V0Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sicHJvcGVydGllcyI6eyJuYW1lIjoiRmlsdGVyQnlUYXJnZXQifSwiZXhwb3J0cyI6W3sicHJpdmF0ZSI6IlN0YXJ0RXZlbnRfcmpnMjQuaW4iLCJwdWJsaWMiOiJzdGFydGVkIn0seyJwcml2YXRlIjoiR2V0VGFyZ2V0XzdjZmltLm9iamVjdCIsInB1YmxpYyI6InN0YXJ0ZXZlbnQifSx7InByaXZhdGUiOiJNb3ZlRXZlbnRfcmV1aGwuaW4iLCJwdWJsaWMiOiJtb3ZlIn0seyJwcml2YXRlIjoiVmVyaWZ5VGFyZ2V0X3R5M3A1LmFjY2VwdCIsInB1YmxpYyI6ImFjY2VwdCJ9LHsicHJpdmF0ZSI6IlRhcmdldEVsZW1lbnRfOXR2ODcub3V0IiwicHVibGljIjoidGFyZ2V0In0seyJwcml2YXRlIjoiT25UYXJnZXRfbDg1eDkub3V0IiwicHVibGljIjoib250YXJnZXQifSx7InByaXZhdGUiOiJBbGxvd2VkTW92ZXNfeTZ1bHYub3V0IiwicHVibGljIjoibW92ZSJ9XSwicHJvY2Vzc2VzIjp7IkdldFRhcmdldF83Y2ZpbSI6eyJjb21wb25lbnQiOiJvYmplY3RzL0dldE9iamVjdEtleSIsIm1ldGFkYXRhIjp7IngiOjYzNCwieSI6MjEwLCJsYWJlbCI6IkdldFRhcmdldCJ9fSwiTW92ZUV2ZW50X3JldWhsIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6NDI1LCJ5IjozNjIsImxhYmVsIjoiTW92ZUV2ZW50In19LCJTcGxpdFRhcmdldF9zcWxnMCI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6ODM2LCJ5IjoyMTIsImxhYmVsIjoiU3BsaXRUYXJnZXQifX0sIlN0YXJ0RXZlbnRfcmpnMjQiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4Ijo0MjYuMDAwMDAwMDAwMDAwMDYsInkiOjIxMywibGFiZWwiOiJTdGFydEV2ZW50In19LCJWZXJpZnlUYXJnZXRfdHkzcDUiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9GaWx0ZXJQcm9wZXJ0eVZhbHVlIiwibWV0YWRhdGEiOnsieCI6MTA1MS4zMzMzMzMzMzMzMzM1LCJ5IjoyMTEuMzMzMzMzMzMzMzMzMzEsImxhYmVsIjoiVmVyaWZ5VGFyZ2V0In19LCJBbGxvd2VkTW92ZXNfeTZ1bHYiOnsiY29tcG9uZW50IjoiZmxvdy9HYXRlIiwibWV0YWRhdGEiOnsieCI6MTUwOC42NjY2NjY2NjY2NjY1LCJ5IjoyMTIuNSwibGFiZWwiOiJBbGxvd2VkTW92ZXMifX0sIlNwbGl0T25UYXJnZXRfeG1pNjciOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjEyNzUuODMzMzMzMzMzMzM0LCJ5IjoyMDkuNjY2NjY2NjY2NjY2NjksImxhYmVsIjoiU3BsaXRPblRhcmdldCJ9fSwiT25UYXJnZXRfbDg1eDkiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoxNTA5LjgzMzMzMzMzMzMzNCwieSI6MTE4LjY2NjY2NjY2NjY2NjY5LCJsYWJlbCI6Ik9uVGFyZ2V0In19LCJUYXJnZXRFbGVtZW50Xzl0djg3Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTUwNy44MzMzMzMzMzMzMzQsInkiOjI2LjY2NjY2NjY2NjY2NjY4NiwibGFiZWwiOiJUYXJnZXRFbGVtZW50In19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoiR2V0VGFyZ2V0XzdjZmltIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0VGFyZ2V0X3NxbGcwIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlN0YXJ0RXZlbnRfcmpnMjQiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0VGFyZ2V0XzdjZmltIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0VGFyZ2V0X3NxbGcwIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlZlcmlmeVRhcmdldF90eTNwNSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJNb3ZlRXZlbnRfcmV1aGwiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQWxsb3dlZE1vdmVzX3k2dWx2IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoyfX0seyJzcmMiOnsicHJvY2VzcyI6IlZlcmlmeVRhcmdldF90eTNwNSIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJBbGxvd2VkTW92ZXNfeTZ1bHYiLCJwb3J0IjoiY2xvc2UifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiVmVyaWZ5VGFyZ2V0X3R5M3A1IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0T25UYXJnZXRfeG1pNjciLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRPblRhcmdldF94bWk2NyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJBbGxvd2VkTW92ZXNfeTZ1bHYiLCJwb3J0Ijoib3BlbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdE9uVGFyZ2V0X3htaTY3IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ik9uVGFyZ2V0X2w4NXg5IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0VGFyZ2V0X3NxbGcwIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlRhcmdldEVsZW1lbnRfOXR2ODciLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7ImRhdGEiOiJ0YXJnZXQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldFRhcmdldF83Y2ZpbSIsInBvcnQiOiJrZXkifX1dfScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0dlc3R1cmVUb09iamVjdC5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsiZW52aXJvbm1lbnQiOnsicnVudGltZSI6Imh0bWwiLCJzcmMiOiIuL3ByZXZpZXcvaWZyYW1lLmh0bWwiLCJ3aWR0aCI6IjMwMCIsImhlaWdodCI6IjMwMCIsImNvbnRlbnQiOiIifSwibmFtZSI6IkJlaGF2aW9yIn0sImV4cG9ydHMiOlt7InByaXZhdGUiOiJsaXN0ZW5nZXN0dXJlc19uczhsaS5lbGVtZW50IiwicHVibGljIjoiZWxlbWVudCJ9LHsicHJpdmF0ZSI6Imdlc3R1cmVkYXRhdG9vYmplY3RfeWgzeXEub3V0IiwicHVibGljIjoib3V0In1dLCJwcm9jZXNzZXMiOnsiTGlzdGVuR2VzdHVyZXNfbnM4bGkiOnsiY29tcG9uZW50IjoiZ2VzdHVyZXMvTGlzdGVuR2VzdHVyZXMiLCJtZXRhZGF0YSI6eyJ4Ijo2MDksInkiOjEzOSwibGFiZWwiOiJMaXN0ZW5HZXN0dXJlcyJ9fSwiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSI6eyJjb21wb25lbnQiOiJncm91cHMvQ29sbGVjdE9iamVjdCIsIm1ldGFkYXRhIjp7IngiOjEyNTIsInkiOjE1OSwibGFiZWwiOiJHZXN0dXJlRGF0YVRvT2JqZWN0In19LCJTcGxpdEVuZF9ha2RxMSI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6ODQ3LjE2NjY2NjY2NjY2NjcsInkiOjg1LjY2NjY2NjY2NjY2NjY2LCJsYWJlbCI6IlNwbGl0RW5kIn19LCJDbGVhck9uRW5kXzl3OW8iOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXRBc3luYyIsIm1ldGFkYXRhIjp7IngiOjEwNTEuMTY2NjY2NjY2NjY2NywieSI6ODguNjY2NjY2NjY2NjY2NjYsImxhYmVsIjoiQ2xlYXJPbkVuZCJ9fSwiU3BsaXRTcGVlZF8yam5rbSI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6ODQ5LjUsInkiOjE0Ny41LCJsYWJlbCI6IlNwbGl0U3BlZWQifX0sIlNwbGl0U3RhcnRfaHIycngiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjg0NS44MzMzMzMzMzMzMzMsInkiOjIzLjUwMDAwMDAwMDAwMDAzLCJsYWJlbCI6IlNwbGl0U3RhcnQifX0sIlJlbGVhc2VNb3ZlT3JFbmRfYWhjczUiOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjEwNTAuMzMzMzMzMzMzMzMyNiwieSI6MTU3LjgzMzMzMzMzMzMzMzMxLCJsYWJlbCI6IlJlbGVhc2VNb3ZlT3JFbmQifX19LCJjb25uZWN0aW9ucyI6W3sic3JjIjp7InByb2Nlc3MiOiJTcGxpdEVuZF9ha2RxMSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJDbGVhck9uRW5kXzl3OW8iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2xlYXJPbkVuZF85dzlvIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0IjoiY2xlYXIifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0IjoiZW5kIn0sInRndCI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfYWtkcTEiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0Ijoic3RhcnQifSwidGd0Ijp7InByb2Nlc3MiOiJTcGxpdFN0YXJ0X2hyMnJ4IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0U3RhcnRfaHIycngiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6InN0YXJ0cG9pbnQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0IjoiZWxlbWVudHMifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjd9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0IjoiYW5nbGUifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0IjoiZGlzdGFuY2UifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRTcGVlZF8yam5rbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0IjoibW92ZXBvaW50In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImN1cnJlbnQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuR2VzdHVyZXNfbnM4bGkiLCJwb3J0IjoiZHVyYXRpb24ifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNvbGxlY3QifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfYWtkcTEiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImVuZHBvaW50In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6InNwZWVkIn0sInRndCI6eyJwcm9jZXNzIjoiU3BsaXRTcGVlZF8yam5rbSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OH19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdFNwZWVkXzJqbmttIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlJlbGVhc2VNb3ZlT3JFbmRfYWhjczUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjh9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfYWtkcTEiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiUmVsZWFzZU1vdmVPckVuZF9haGNzNSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJSZWxlYXNlTW92ZU9yRW5kX2FoY3M1IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0IjoicmVsZWFzZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OH19LHsiZGF0YSI6ImVsZW1lbnRzIiwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImFsbHBhY2tldHMifX0seyJkYXRhIjoic3RhcnRlbGVtZW50LHN0YXJ0cG9pbnQsZWxlbWVudHMsYW5nbGUsZGlzdGFuY2Usc3BlZWQsbW92ZXBvaW50LGN1cnJlbnQsZHVyYXRpb24sZW5kZWxlbWVudCxlbmRwb2ludCIsInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJrZXlzIn19XX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9MaXN0ZW5HZXN0dXJlcy5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsiZW52aXJvbm1lbnQiOnsicnVudGltZSI6Imh0bWwiLCJzcmMiOiIuL3ByZXZpZXcvaWZyYW1lLmh0bWwiLCJ3aWR0aCI6IjMwMCIsImhlaWdodCI6IjMwMCIsImNvbnRlbnQiOiIifSwibmFtZSI6Ikxpc3Rlbkdlc3R1cmVzIn0sImV4cG9ydHMiOlt7InByaXZhdGUiOiJnZXN0dXJlcy9saXN0ZW5wb2ludGVyXzhmdGQxLmVsZW1lbnQiLCJwdWJsaWMiOiJlbGVtZW50In0seyJwcml2YXRlIjoibW92ZXBvaW50X2ZqbHVyLm91dCIsInB1YmxpYyI6Im1vdmVwb2ludCJ9LHsicHJpdmF0ZSI6ImRpc3RhbmNlX2t3azM5Lm91dCIsInB1YmxpYyI6ImRpc3RhbmNlIn0seyJwcml2YXRlIjoiZ2VzdHVyZWVsZW1lbnRzX3l2bTltLm91dCIsInB1YmxpYyI6ImVsZW1lbnRzIn0seyJwcml2YXRlIjoiYW5nbGVfNDNxcG8ub3V0IiwicHVibGljIjoiYW5nbGUifSx7InByaXZhdGUiOiJzcGVlZF9lOTlqcS5vdXQiLCJwdWJsaWMiOiJzcGVlZCJ9LHsicHJpdmF0ZSI6ImdldHN0YXJ0ZWxlbWVudF93N202NC5vdXQiLCJwdWJsaWMiOiJzdGFydCJ9LHsicHJpdmF0ZSI6InN0YXJ0cG9pbnRfdThpbnQub3V0IiwicHVibGljIjoic3RhcnRwb2ludCJ9LHsicHJpdmF0ZSI6ImdldGVuZGVsZW1lbnRfc2xicDkub3V0IiwicHVibGljIjoiZW5kIn0seyJwcml2YXRlIjoiZ2V0ZW5kaW5ncG9pbnRfZGV0dGIuY2xpZW50IiwicHVibGljIjoiZW5kcG9pbnQifSx7InByaXZhdGUiOiJjdXJyZW50ZWxlbWVudF9jdTBxNS5vdXQiLCJwdWJsaWMiOiJjdXJyZW50In0seyJwcml2YXRlIjoiZHVyYXRpb25fcXlldnYub3V0IiwicHVibGljIjoiZHVyYXRpb24ifV0sInByb2Nlc3NlcyI6eyJHZXN0dXJlU3RhcnRfcjh2cjUiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjQ2NiwieSI6LTMxLCJsYWJlbCI6Ikdlc3R1cmVTdGFydCJ9fSwiR2V0U3RhcnRpbmdQb2ludF9waWRmcyI6eyJjb21wb25lbnQiOiJpbnRlcmFjdGlvbi9SZWFkQ29vcmRpbmF0ZXMiLCJtZXRhZGF0YSI6eyJ4Ijo3NjUsInkiOi0xOTEsImxhYmVsIjoiR2V0U3RhcnRpbmdQb2ludCJ9fSwiR2V0TW92ZVBvaW50XzlkaWE5Ijp7ImNvbXBvbmVudCI6ImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlcyIsIm1ldGFkYXRhIjp7IngiOjEzNjgsInkiOjEzNiwibGFiZWwiOiJHZXRNb3ZlUG9pbnQifX0sImNvcmUvU3BsaXRfYmFlZWIiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjE1NjMsInkiOjEzNywibGFiZWwiOiJjb3JlL1NwbGl0In19LCJjb3JlL1NwbGl0XzRkczFoIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4Ijo5NzMsInkiOi0xOTEsImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiR2VzdHVyZUFuZ2xlX2R3amoiOnsiY29tcG9uZW50IjoibWF0aC9DYWxjdWxhdGVBbmdsZSIsIm1ldGFkYXRhIjp7IngiOjE5MzksInkiOi0xMjcsImxhYmVsIjoiR2VzdHVyZUFuZ2xlIn19LCJHZXN0dXJlRGlzdGFuY2VfZXNxa2MiOnsiY29tcG9uZW50IjoibWF0aC9DYWxjdWxhdGVEaXN0YW5jZSIsIm1ldGFkYXRhIjp7IngiOjE5MzQsInkiOjIwLCJsYWJlbCI6Ikdlc3R1cmVEaXN0YW5jZSJ9fSwiTGFzdE1vdmVfcDV5ajciOnsiY29tcG9uZW50IjoiY29yZS9LaWNrIiwibWV0YWRhdGEiOnsieCI6MTA2MiwieSI6MTc2LCJsYWJlbCI6Ikxhc3RNb3ZlIn19LCJHZXN0dXJlRW5kX3FxeDhvIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4Ijo0NjAsInkiOjE2MiwibGFiZWwiOiJHZXN0dXJlRW5kIn19LCJHZXN0dXJlTW92ZV9oeTQ2cyI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6NDYzLCJ5Ijo2NSwibGFiZWwiOiJHZXN0dXJlTW92ZSJ9fSwiQWxsVG91Y2hlZEVsZW1lbnRzX2kzeDc0Ijp7ImNvbXBvbmVudCI6InBhY2tldHMvVW5pcXVlUGFja2V0IiwibWV0YWRhdGEiOnsieCI6MTQ0NSwieSI6NiwibGFiZWwiOiJBbGxUb3VjaGVkRWxlbWVudHMifX0sIkdldE1vdmVFbGVtZW50X2lhZXhtIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6MTA1OSwieSI6NiwibGFiZWwiOiJHZXRNb3ZlRWxlbWVudCJ9fSwiR2V0U3RhcnRFbGVtZW50X3c3bTY0Ijp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6OTY4LCJ5IjotNDA0LjY2NjY2NjY2NjY2NjYzLCJsYWJlbCI6IkdldFN0YXJ0RWxlbWVudCJ9fSwiTW92ZURhdGVfNmJqbmwiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9DcmVhdGVEYXRlIiwibWV0YWRhdGEiOnsieCI6MjE0NSwieSI6MTY0LCJsYWJlbCI6Ik1vdmVEYXRlIn19LCJTdGFydERhdGVfc3did3UiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9DcmVhdGVEYXRlIiwibWV0YWRhdGEiOnsieCI6OTY4LCJ5IjotMjgxLCJsYWJlbCI6IlN0YXJ0RGF0ZSJ9fSwibWF0aC9TdWJ0cmFjdF9qNXYyMCI6eyJjb21wb25lbnQiOiJtYXRoL1N1YnRyYWN0IiwibWV0YWRhdGEiOnsieCI6MjUxNiwieSI6LTE5MywibGFiZWwiOiJtYXRoL1N1YnRyYWN0In19LCJTZXRTdGFydF9xbDUxYyI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4Ijo3NjUsInkiOi0yODQsImxhYmVsIjoiU2V0U3RhcnQifX0sIm1hdGgvRGl2aWRlX3g0Z2M4Ijp7ImNvbXBvbmVudCI6Im1hdGgvRGl2aWRlIiwibWV0YWRhdGEiOnsieCI6MjkzOSwieSI6LTE5OSwibGFiZWwiOiJtYXRoL0RpdmlkZSJ9fSwiY29yZS9TcGxpdF94MGExMiI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6MjE1MSwieSI6MjMsImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwib2JqZWN0cy9DYWxsTWV0aG9kX2l1N2syIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvQ2FsbE1ldGhvZCIsIm1ldGFkYXRhIjp7IngiOjIzNDgsInkiOjE2NywibGFiZWwiOiJvYmplY3RzL0NhbGxNZXRob2QifX0sIm9iamVjdHMvQ2FsbE1ldGhvZF9ydGZkMiI6eyJjb21wb25lbnQiOiJvYmplY3RzL0NhbGxNZXRob2QiLCJtZXRhZGF0YSI6eyJ4IjoyMTM5LCJ5IjotMjc0LCJsYWJlbCI6Im9iamVjdHMvQ2FsbE1ldGhvZCJ9fSwiRGlzdGFuY2Vfa3drMzkiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoyNTgwLCJ5IjoyMCwibGFiZWwiOiJEaXN0YW5jZSJ9fSwiR2VzdHVyZUVsZW1lbnRzX3l2bTltIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTYzOSwieSI6NCwibGFiZWwiOiJHZXN0dXJlRWxlbWVudHMifX0sIkFuZ2xlXzQzcXBvIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MjMxMiwieSI6LTEyMSwibGFiZWwiOiJBbmdsZSJ9fSwiU3BlZWRfZTk5anEiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjozMzYyLCJ5IjotMTcxLCJsYWJlbCI6IlNwZWVkIn19LCJNb3ZlUG9pbnRfZmpsdXIiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoxOTM5LCJ5IjoyNjIsImxhYmVsIjoiTW92ZVBvaW50In19LCJTdGFydFBvaW50X3U4aW50Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTM4MiwieSI6LTE4OSwibGFiZWwiOiJTdGFydFBvaW50In19LCJnZXN0dXJlcy9MaXN0ZW5Qb2ludGVyXzhmdGQxIjp7ImNvbXBvbmVudCI6Imdlc3R1cmVzL0xpc3RlblBvaW50ZXIiLCJtZXRhZGF0YSI6eyJ4IjoyMTMsInkiOi0xLCJsYWJlbCI6Imdlc3R1cmVzL0xpc3RlblBvaW50ZXIifX0sIkdldEVuZEVsZW1lbnRfc2xicDkiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9HZXRPYmplY3RLZXkiLCJtZXRhZGF0YSI6eyJ4IjoxMzY3LjMzMzMzMzMzMzMzMzUsInkiOjI4My4zMzMzMzMzMzMzMzM1LCJsYWJlbCI6IkdldEVuZEVsZW1lbnQifX0sImNvcmUvUmVwZWF0QXN5bmNfYzU2dGoiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXRBc3luYyIsIm1ldGFkYXRhIjp7IngiOjEwNTguNjY2NjY2NjY2NjY3LCJ5IjozMTIuMzMzMzMzMzMzMzMzMjYsImxhYmVsIjoiY29yZS9SZXBlYXRBc3luYyJ9fSwic3RyaW5ncy9TZW5kU3RyaW5nX3Q2Z2J5Ijp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjE5MzUsInkiOjE2Ni4zMzMzMzMzMzMzMzMzNywibGFiZWwiOiJzdHJpbmdzL1NlbmRTdHJpbmcifX0sImdyb3Vwcy9TZW5kQnlHcm91cF96MDZrayI6eyJjb21wb25lbnQiOiJncm91cHMvU2VuZEJ5R3JvdXAiLCJtZXRhZGF0YSI6eyJ4Ijo1NTYsInkiOi0xNTEuNjY2NjY2NjY2NjY2NjksImxhYmVsIjoiZ3JvdXBzL1NlbmRCeUdyb3VwIn19LCJjb3JlL1NwbGl0X2VreGlqIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjozMTU4LjUsInkiOi0xNjYuMzMzMzMzMzMzMzMzNDMsImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiY29yZS9TcGxpdF9lcGgzZCI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6MjEyMy4zMzMzMzMzMzMzMzQsInkiOi0xMjIuNjY2NjY2NjY2NjY2NjksImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiY29yZS9TcGxpdF8zZWxlcCI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6MjczMS4xNjY2NjY2NjY2Njk3LCJ5IjotMTcxLjgzMzMzMzMzMzMzMjU4LCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sImNvcmUvU3BsaXRfOGwzeXUiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjEyNTEuMzMzMzMzMzMzMzMzMywieSI6Ny4xNjY2NjY2NjY2NjY2MjksImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiQ3VycmVudEVsZW1lbnRfY3UwcTUiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoxNTk5LjgzMzMzMzMzMzMzMywieSI6LTE5Mi4wMDAwMDAwMDAwMDAwNiwibGFiZWwiOiJDdXJyZW50RWxlbWVudCJ9fSwiRHVyYXRpb25fcXlldnYiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoyOTM3LjgzMzMzMzMzMzMzMywieSI6LTI5NS44MzMzMzMzMzMzMzMyNiwibGFiZWwiOiJEdXJhdGlvbiJ9fSwiR2V0RW5kaW5nUG9pbnRfZGV0dGIiOnsiY29tcG9uZW50IjoiaW50ZXJhY3Rpb24vUmVhZENvb3JkaW5hdGVzIiwibWV0YWRhdGEiOnsieCI6NzI3LjgzMzMzMzMzMzMzMzEsInkiOjMzNS4zMzMzMzMzMzMzMzMzLCJsYWJlbCI6IkdldEVuZGluZ1BvaW50In19LCJjb3JlL01lcmdlXzZzbyI6eyJjb21wb25lbnQiOiJjb3JlL01lcmdlIiwibWV0YWRhdGEiOnsieCI6MTE5Ni42NjY2NjY2NjY2NjcsInkiOi0xODguOTk5OTk5OTk5OTk5ODMsImxhYmVsIjoiY29yZS9NZXJnZSJ9fSwiaW50ZXJhY3Rpb24vUmVhZENvb3JkaW5hdGVzXzgyY2IxIjp7ImNvbXBvbmVudCI6ImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlcyIsIm1ldGFkYXRhIjp7IngiOjc2Ny4zMzMzMzMzMzMzMzM5LCJ5IjotODUuODMzMzMzMzMzMzMzMTQsImxhYmVsIjoiaW50ZXJhY3Rpb24vUmVhZENvb3JkaW5hdGVzIn19LCJjb3JlL0Ryb3Bfc2E4ejUiOnsiY29tcG9uZW50IjoiY29yZS9Ecm9wIiwibWV0YWRhdGEiOnsieCI6MTU5Ni44MzMzMzMzMzMzMzMsInkiOjMyNi4wMDAwMDAwMDAwMDAxLCJsYWJlbCI6ImNvcmUvRHJvcCJ9fSwiY29yZS9NZXJnZV9scXhsbCI6eyJjb21wb25lbnQiOiJjb3JlL01lcmdlIiwibWV0YWRhdGEiOnsieCI6NzY4Ljk5OTk5OTk5OTk5OTUsInkiOi00MDMuNjY2NjY2NjY2NjY2NjMsImxhYmVsIjoiY29yZS9NZXJnZSJ9fSwiZ3JvdXBzL1NlbmRCeUdyb3VwXzh5YWoiOnsiY29tcG9uZW50IjoiZ3JvdXBzL1NlbmRCeUdyb3VwIiwibWV0YWRhdGEiOnsieCI6MTE2Ni45OTk5OTk5OTk5OTksInkiOi0yODYuODMzMzMzMzMzMzMzMjYsImxhYmVsIjoiZ3JvdXBzL1NlbmRCeUdyb3VwIn19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF80ZHMxaCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlQW5nbGVfZHdqaiIsInBvcnQiOiJvcmlnaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9iYWVlYiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlQW5nbGVfZHdqaiIsInBvcnQiOiJkZXN0aW5hdGlvbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0XzRkczFoIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEaXN0YW5jZV9lc3FrYyIsInBvcnQiOiJvcmlnaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9iYWVlYiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGlzdGFuY2VfZXNxa2MiLCJwb3J0IjoiZGVzdGluYXRpb24ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0TW92ZVBvaW50XzlkaWE5IiwicG9ydCI6ImNsaWVudCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfYmFlZWIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0U3RhcnRpbmdQb2ludF9waWRmcyIsInBvcnQiOiJjbGllbnQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0XzRkczFoIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlNldFN0YXJ0X3FsNTFjIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlN0YXJ0RGF0ZV9zd2J3dSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlRGlzdGFuY2VfZXNxa2MiLCJwb3J0IjoiZGlzdGFuY2UifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3gwYTEyIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfeDBhMTIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoibWF0aC9EaXZpZGVfeDRnYzgiLCJwb3J0IjoiZGl2aWRlbmQifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoib2JqZWN0cy9DYWxsTWV0aG9kX2l1N2syIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Im1hdGgvU3VidHJhY3RfajV2MjAiLCJwb3J0IjoibWludWVuZCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJNb3ZlRGF0ZV82YmpubCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJvYmplY3RzL0NhbGxNZXRob2RfaXU3azIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF94MGExMiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJEaXN0YW5jZV9rd2szOSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJBbGxUb3VjaGVkRWxlbWVudHNfaTN4NzQiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZUVsZW1lbnRzX3l2bTltIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfYmFlZWIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiTW92ZVBvaW50X2ZqbHVyIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6Imdlc3R1cmVzL0xpc3RlblBvaW50ZXJfOGZ0ZDEiLCJwb3J0IjoiZW5kIn0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZUVuZF9xcXg4byIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJnZXN0dXJlcy9MaXN0ZW5Qb2ludGVyXzhmdGQxIiwicG9ydCI6Im1vdmUifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlTW92ZV9oeTQ2cyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJnZXN0dXJlcy9MaXN0ZW5Qb2ludGVyXzhmdGQxIiwicG9ydCI6InN0YXJ0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZVN0YXJ0X3I4dnI1IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Ikxhc3RNb3ZlX3A1eWo3IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEVuZEVsZW1lbnRfc2xicDkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZUVuZF9xcXg4byIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJMYXN0TW92ZV9wNXlqNyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlRW5kX3FxeDhvIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvUmVwZWF0QXN5bmNfYzU2dGoiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9iYWVlYiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJzdHJpbmdzL1NlbmRTdHJpbmdfdDZnYnkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoic3RyaW5ncy9TZW5kU3RyaW5nX3Q2Z2J5IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ik1vdmVEYXRlXzZiam5sIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo0fX0seyJzcmMiOnsicHJvY2VzcyI6Imdyb3Vwcy9TZW5kQnlHcm91cF96MDZrayIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRTdGFydGluZ1BvaW50X3BpZGZzIiwicG9ydCI6ImV2ZW50In0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Ikdlc3R1cmVTdGFydF9yOHZyNSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJncm91cHMvU2VuZEJ5R3JvdXBfejA2a2siLCJwb3J0IjoiZGF0YSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlTW92ZV9oeTQ2cyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJncm91cHMvU2VuZEJ5R3JvdXBfejA2a2siLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZU1vdmVfaHk0NnMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiTGFzdE1vdmVfcDV5ajciLCJwb3J0IjoiZGF0YSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlTW92ZV9oeTQ2cyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRNb3ZlRWxlbWVudF9pYWV4bSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlTW92ZV9oeTQ2cyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRNb3ZlUG9pbnRfOWRpYTkiLCJwb3J0IjoiZXZlbnQifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF94MGExMiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGlzdGFuY2VfZXNxa2MiLCJwb3J0IjoiY2xlYXIifSwibWV0YWRhdGEiOnsicm91dGUiOjB9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9la3hpaiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTcGVlZF9lOTlqcSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OH19LHsic3JjIjp7InByb2Nlc3MiOiJtYXRoL0RpdmlkZV94NGdjOCIsInBvcnQiOiJxdW90aWVudCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfZWt4aWoiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9la3hpaiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJtYXRoL0RpdmlkZV94NGdjOCIsInBvcnQiOiJjbGVhciJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MH19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1JlcGVhdEFzeW5jX2M1NnRqIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkFsbFRvdWNoZWRFbGVtZW50c19pM3g3NCIsInBvcnQiOiJjbGVhciJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlQW5nbGVfZHdqaiIsInBvcnQiOiJhbmdsZSJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfZXBoM2QiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9lcGgzZCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJBbmdsZV80M3FwbyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2VwaDNkIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVBbmdsZV9kd2pqIiwicG9ydCI6ImNsZWFyIn0sIm1ldGFkYXRhIjp7InJvdXRlIjowfX0seyJzcmMiOnsicHJvY2VzcyI6Im1hdGgvU3VidHJhY3RfajV2MjAiLCJwb3J0IjoiZGlmZmVyZW5jZSJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfM2VsZXAiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF8zZWxlcCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJtYXRoL0RpdmlkZV94NGdjOCIsInBvcnQiOiJkaXZpc29yIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldE1vdmVFbGVtZW50X2lhZXhtIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfOGwzeXUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF84bDN5dSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJBbGxUb3VjaGVkRWxlbWVudHNfaTN4NzQiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF84bDN5dSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJDdXJyZW50RWxlbWVudF9jdTBxNSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0XzNlbGVwIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkR1cmF0aW9uX3F5ZXZ2IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfM2VsZXAiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoibWF0aC9TdWJ0cmFjdF9qNXYyMCIsInBvcnQiOiJjbGVhciJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MH19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlRW5kX3FxeDhvIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEVuZGluZ1BvaW50X2RldHRiIiwicG9ydCI6ImV2ZW50In0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Im9iamVjdHMvQ2FsbE1ldGhvZF9ydGZkMiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJtYXRoL1N1YnRyYWN0X2o1djIwIiwicG9ydCI6InN1YnRyYWhlbmQifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF80ZHMxaCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL01lcmdlXzZzbyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL01lcmdlXzZzbyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTdGFydFBvaW50X3U4aW50IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6ImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlc184MmNiMSIsInBvcnQiOiJjbGllbnQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL01lcmdlXzZzbyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlU3RhcnRfcjh2cjUiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiaW50ZXJhY3Rpb24vUmVhZENvb3JkaW5hdGVzXzgyY2IxIiwicG9ydCI6ImV2ZW50In0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldEVuZEVsZW1lbnRfc2xicDkiLCJwb3J0IjoibWlzc2VkIn0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9Ecm9wX3NhOHo1IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikdlc3R1cmVTdGFydF9yOHZyNSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL01lcmdlX2xxeGxsIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvTWVyZ2VfbHF4bGwiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0U3RhcnRFbGVtZW50X3c3bTY0IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Imdyb3Vwcy9TZW5kQnlHcm91cF96MDZrayIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL01lcmdlX2xxeGxsIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Imdyb3Vwcy9TZW5kQnlHcm91cF84eWFqIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Im9iamVjdHMvQ2FsbE1ldGhvZF9ydGZkMiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTdGFydERhdGVfc3did3UiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiZ3JvdXBzL1NlbmRCeUdyb3VwXzh5YWoiLCJwb3J0IjoiZGF0YSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlU3RhcnRfcjh2cjUiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2V0U3RhcnRfcWw1MWMiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZU1vdmVfaHk0NnMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiZ3JvdXBzL1NlbmRCeUdyb3VwXzh5YWoiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7ImRhdGEiOiJ0YXJnZXQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldE1vdmVFbGVtZW50X2lhZXhtIiwicG9ydCI6ImtleSJ9fSx7ImRhdGEiOiJ0YXJnZXQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldFN0YXJ0RWxlbWVudF93N202NCIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoibm93IiwidGd0Ijp7InByb2Nlc3MiOiJTZXRTdGFydF9xbDUxYyIsInBvcnQiOiJzdHJpbmcifX0seyJkYXRhIjoiZ2V0VGltZSIsInRndCI6eyJwcm9jZXNzIjoib2JqZWN0cy9DYWxsTWV0aG9kX2l1N2syIiwicG9ydCI6Im1ldGhvZCJ9fSx7ImRhdGEiOiJnZXRUaW1lIiwidGd0Ijp7InByb2Nlc3MiOiJvYmplY3RzL0NhbGxNZXRob2RfcnRmZDIiLCJwb3J0IjoibWV0aG9kIn19LHsiZGF0YSI6InRhcmdldCIsInRndCI6eyJwcm9jZXNzIjoiR2V0RW5kRWxlbWVudF9zbGJwOSIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoibm93IiwidGd0Ijp7InByb2Nlc3MiOiJzdHJpbmdzL1NlbmRTdHJpbmdfdDZnYnkiLCJwb3J0Ijoic3RyaW5nIn19XX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9MaXN0ZW5Qb2ludGVyLmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sicHJvcGVydGllcyI6eyJuYW1lIjoiTGlzdGVuUG9pbnRlciJ9LCJleHBvcnRzIjpbeyJwcml2YXRlIjoiTGlzdGVuXzEwMjVnLmVsZW1lbnQiLCJwdWJsaWMiOiJlbGVtZW50In0seyJwcml2YXRlIjoiTGlzdGVuXzEwMjVnLmNhcHR1cmUiLCJwdWJsaWMiOiJjYXB0dXJlIn0seyJwcml2YXRlIjoiU3RhcnRFdmVudF94OGl0di5vdXQiLCJwdWJsaWMiOiJzdGFydCJ9LHsicHJpdmF0ZSI6Ik1vdmVFdmVudF9xYTNwcC5vdXQiLCJwdWJsaWMiOiJtb3ZlIn0seyJwcml2YXRlIjoiRW5kRXZlbnRfaG13cDkub3V0IiwicHVibGljIjoiZW5kIn1dLCJwcm9jZXNzZXMiOnsiTGlzdGVuXzEwMjVnIjp7ImNvbXBvbmVudCI6ImludGVyYWN0aW9uL0xpc3RlblBvaW50ZXIiLCJtZXRhZGF0YSI6eyJ4Ijo1MDAsInkiOi02NSwibGFiZWwiOiJMaXN0ZW4ifX0sIkVuZF92b20yMiI6eyJjb21wb25lbnQiOiJjb3JlL01lcmdlIiwibWV0YWRhdGEiOnsieCI6ODQzLCJ5Ijo5NiwibGFiZWwiOiJFbmQifX0sIlN0YXJ0Xzg2dTNnIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4Ijo4NDgsInkiOi0xNTcsImxhYmVsIjoiU3RhcnQifX0sIk1vdmVPbmx5RHVyaW5nR2VzdHVyZV85ODZ6dCI6eyJjb21wb25lbnQiOiJmbG93L0dhdGUiLCJtZXRhZGF0YSI6eyJ4IjoxMTA2LCJ5IjotNDAsImxhYmVsIjoiTW92ZU9ubHlEdXJpbmdHZXN0dXJlIn19LCJFbmRPbmx5T25jZV92ZXhmbiI6eyJjb21wb25lbnQiOiJmbG93L0dhdGUiLCJtZXRhZGF0YSI6eyJ4IjoxMTA3LCJ5Ijo3NSwibGFiZWwiOiJFbmRPbmx5T25jZSJ9fSwiU3BsaXRFbmRfY25meTYiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjE0MDcsInkiOjc5LCJsYWJlbCI6IlNwbGl0RW5kIn19LCJBc3luY2hyb25pemVfeDBocW0iOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXRBc3luYyIsIm1ldGFkYXRhIjp7IngiOjE0MDQsInkiOjE3MS4zMzMzMzMzMzMzMzMzMSwibGFiZWwiOiJBc3luY2hyb25pemUifX0sIlN0YXJ0RXZlbnRfeDhpdHYiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoxNjYyLCJ5IjotMTYyLCJsYWJlbCI6IlN0YXJ0RXZlbnQifX0sIk1vdmVFdmVudF9xYTNwcCI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjE2NjIsInkiOi0zNSwibGFiZWwiOiJNb3ZlRXZlbnQifX0sIkVuZEV2ZW50X2htd3A5Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTY1OSwieSI6NzUsImxhYmVsIjoiRW5kRXZlbnQifX19LCJjb25uZWN0aW9ucyI6W3sic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5fMTAyNWciLCJwb3J0IjoibGVhdmUifSwidGd0Ijp7InByb2Nlc3MiOiJFbmRfdm9tMjIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuXzEwMjVnIiwicG9ydCI6ImNhbmNlbCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkVuZF92b20yMiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5fMTAyNWciLCJwb3J0IjoidXAifSwidGd0Ijp7InByb2Nlc3MiOiJFbmRfdm9tMjIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuXzEwMjVnIiwicG9ydCI6ImRvd24ifSwidGd0Ijp7InByb2Nlc3MiOiJTdGFydF84NnUzZyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5fMTAyNWciLCJwb3J0IjoibW92ZSJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ik1vdmVPbmx5RHVyaW5nR2VzdHVyZV85ODZ6dCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJFbmRfdm9tMjIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiRW5kT25seU9uY2VfdmV4Zm4iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiRW5kT25seU9uY2VfdmV4Zm4iLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfY25meTYiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3RhcnRfODZ1M2ciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiRW5kT25seU9uY2VfdmV4Zm4iLCJwb3J0Ijoib3BlbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdEVuZF9jbmZ5NiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJBc3luY2hyb25pemVfeDBocW0iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiQXN5bmNocm9uaXplX3gwaHFtIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkVuZE9ubHlPbmNlX3ZleGZuIiwicG9ydCI6ImNsb3NlIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IlN0YXJ0Xzg2dTNnIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ik1vdmVPbmx5RHVyaW5nR2VzdHVyZV85ODZ6dCIsInBvcnQiOiJvcGVuIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0RW5kX2NuZnk2IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ik1vdmVPbmx5RHVyaW5nR2VzdHVyZV85ODZ6dCIsInBvcnQiOiJjbG9zZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJTdGFydF84NnUzZyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTdGFydEV2ZW50X3g4aXR2IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Ik1vdmVPbmx5RHVyaW5nR2VzdHVyZV85ODZ6dCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJNb3ZlRXZlbnRfcWEzcHAiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfY25meTYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiRW5kRXZlbnRfaG13cDkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fV19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvRGV0ZWN0Q2FyZGluYWxEaXJlY3Rpb24uanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJwcm9wZXJ0aWVzIjp7ImVudmlyb25tZW50Ijp7InJ1bnRpbWUiOiJodG1sIiwic3JjIjoiLi9wcmV2aWV3L2lmcmFtZS5odG1sIiwid2lkdGgiOiIzMDAiLCJoZWlnaHQiOiIzMDAiLCJjb250ZW50IjoiIn0sIm5hbWUiOiJEZXRlY3RDYXJkaW5hbERpcmVjdGlvbiJ9LCJleHBvcnRzIjpbeyJwcml2YXRlIjoicmVjZWl2ZWdlc3R1cmVfdGhibXcuaW4iLCJwdWJsaWMiOiJpbiJ9LHsicHJpdmF0ZSI6InNlbmRlYXN0XzIxOHF4Lm91dCIsInB1YmxpYyI6ImVhc3QifSx7InByaXZhdGUiOiJzZW5kc291dGhfd3gyYjUub3V0IiwicHVibGljIjoic291dGgifSx7InByaXZhdGUiOiJzZW5kd2VzdF9ya2R6OS5vdXQiLCJwdWJsaWMiOiJ3ZXN0In0seyJwcml2YXRlIjoic2VuZG5vcnRoX2M1NjJrLm91dCIsInB1YmxpYyI6Im5vcnRoIn0seyJwcml2YXRlIjoiZmFpbF81YjBxby5vdXQiLCJwdWJsaWMiOiJmYWlsIn0seyJwcml2YXRlIjoiY2hlY2ttYXhkaXN0YW5jZV9jZWJxNS5jb21wYXJpc29uIiwicHVibGljIjoibWF4ZGlzdGFuY2UifV0sInByb2Nlc3NlcyI6eyJSZWNlaXZlR2VzdHVyZV90aGJtdyI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOi0yOTQsInkiOjEzNCwibGFiZWwiOiJSZWNlaXZlR2VzdHVyZSJ9fSwiU3BsaXRHZXN0dXJlX2Rrazg3Ijp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjotMjk2LCJ5IjoyMTQsImxhYmVsIjoiU3BsaXRHZXN0dXJlIn19LCJTZW5kTm9ydGhfYzU2MmsiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTczMywieSI6NDQ3LCJsYWJlbCI6IlNlbmROb3J0aCJ9fSwiU2VuZEVhc3RfMjE4cXgiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTcyMSwieSI6LTUsImxhYmVsIjoiU2VuZEVhc3QifX0sIlJvdXRlRGlyZWN0aW9uX2FwZ3NwIjp7ImNvbXBvbmVudCI6Imdlc3R1cmVzL0NhcmRpbmFsUm91dGVyIiwibWV0YWRhdGEiOnsieCI6MTQ2OSwieSI6MTk1LCJsYWJlbCI6IlJvdXRlRGlyZWN0aW9uIn19LCJHZXRJbmRpdmlkdWFsUG9pbnRlcl9vempmYSI6eyJjb21wb25lbnQiOiJvYmplY3RzL1NwbGl0T2JqZWN0IiwibWV0YWRhdGEiOnsieCI6LTg2LCJ5IjoyMTQsImxhYmVsIjoiR2V0SW5kaXZpZHVhbFBvaW50ZXIifX0sIkdldFN0YXJ0UG9pbnRfYmhybDIiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9HZXRPYmplY3RLZXkiLCJtZXRhZGF0YSI6eyJ4Ijo4NzksInkiOjE1NywibGFiZWwiOiJHZXRTdGFydFBvaW50In19LCJHZXRDdXJyZW50UG9pbnRfcnd3dDAiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9HZXRPYmplY3RLZXkiLCJtZXRhZGF0YSI6eyJ4Ijo4NzcsInkiOjI1OSwibGFiZWwiOiJHZXRDdXJyZW50UG9pbnQifX0sIkdldEdlc3R1cmVBbmdsZV9kanByNiI6eyJjb21wb25lbnQiOiJtYXRoL0NhbGN1bGF0ZUFuZ2xlIiwibWV0YWRhdGEiOnsieCI6MTA4MywieSI6MTkzLCJsYWJlbCI6IkdldEdlc3R1cmVBbmdsZSJ9fSwiU2VuZFdlc3RfcmtkejkiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTczMC44MzMzMzMzMzMzMzMzLCJ5IjozNDguMzMzMzMzMzMzMzMzMzcsImxhYmVsIjoiU2VuZFdlc3QifX0sIlNlbmRTb3V0aF93eDJiNSI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4IjoxNzIxLjgzMzMzMzMzMzMzMzMsInkiOjEwNy4zMzMzMzMzMzMzMzMzNywibGFiZWwiOiJTZW5kU291dGgifX0sIkZhaWxfNWIwcW8iOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjE3MzguMTY2NjY2NjY2NjY2NSwieSI6NTY0LCJsYWJlbCI6IkZhaWwifX0sImNvcmUvU3BsaXRfbjNxaWYiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjEyNzYuOTk5OTk5OTk5OTk5LCJ5IjoxOTMuNjY2NjY2NjY2NjY2NjksImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiR2V0RGlzdGFuY2Vfb3d5eWIiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9HZXRPYmplY3RLZXkiLCJtZXRhZGF0YSI6eyJ4IjozMDQsInkiOjIxNiwibGFiZWwiOiJHZXREaXN0YW5jZSJ9fSwiQ2hlY2tNYXhEaXN0YW5jZV9jZWJxNSI6eyJjb21wb25lbnQiOiJtYXRoL0NvbXBhcmUiLCJtZXRhZGF0YSI6eyJ4Ijo0OTksInkiOjIxNCwibGFiZWwiOiJDaGVja01heERpc3RhbmNlIn19LCJTZW5kUG9pbnRlcl92MGVxdiI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4Ijo2ODgsInkiOjIxNCwibGFiZWwiOiJTZW5kUG9pbnRlciJ9fSwiU3BsaXRQb2ludGVyX3YwdThrIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjoxMDkuMDAwMDAwMDAwMDAwMDYsInkiOjIxNS4zMzMzMzMzMzMzMzMzMSwibGFiZWwiOiJTcGxpdFBvaW50ZXIifX19LCJjb25uZWN0aW9ucyI6W3sic3JjIjp7InByb2Nlc3MiOiJHZXRTdGFydFBvaW50X2JocmwyIiwicG9ydCI6Im9iamVjdCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEN1cnJlbnRQb2ludF9yd3d0MCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRTdGFydFBvaW50X2JocmwyIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEdlc3R1cmVBbmdsZV9kanByNiIsInBvcnQiOiJvcmlnaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0Q3VycmVudFBvaW50X3J3d3QwIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldEdlc3R1cmVBbmdsZV9kanByNiIsInBvcnQiOiJkZXN0aW5hdGlvbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdEdlc3R1cmVfZGtrODciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZEVhc3RfMjE4cXgiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0R2VzdHVyZV9ka2s4NyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kV2VzdF9ya2R6OSIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRHZXN0dXJlX2Rrazg3IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmROb3J0aF9jNTYyayIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRHZXN0dXJlX2Rrazg3IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRTb3V0aF93eDJiNSIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiUm91dGVEaXJlY3Rpb25fYXBnc3AiLCJwb3J0IjoibiJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmROb3J0aF9jNTYyayIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NH19LHsic3JjIjp7InByb2Nlc3MiOiJSb3V0ZURpcmVjdGlvbl9hcGdzcCIsInBvcnQiOiJ3In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFdlc3RfcmtkejkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiUm91dGVEaXJlY3Rpb25fYXBnc3AiLCJwb3J0IjoicyJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRTb3V0aF93eDJiNSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6Nn19LHsic3JjIjp7InByb2Nlc3MiOiJSb3V0ZURpcmVjdGlvbl9hcGdzcCIsInBvcnQiOiJlIn0sInRndCI6eyJwcm9jZXNzIjoiU2VuZEVhc3RfMjE4cXgiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjd9fSx7InNyYyI6eyJwcm9jZXNzIjoiUmVjZWl2ZUdlc3R1cmVfdGhibXciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU3BsaXRHZXN0dXJlX2Rrazg3IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0R2VzdHVyZV9ka2s4NyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRJbmRpdmlkdWFsUG9pbnRlcl9vempmYSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRDdXJyZW50UG9pbnRfcnd3dDAiLCJwb3J0IjoibWlzc2VkIn0sInRndCI6eyJwcm9jZXNzIjoiRmFpbF81YjBxbyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRTdGFydFBvaW50X2JocmwyIiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkZhaWxfNWIwcW8iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0R2VzdHVyZUFuZ2xlX2RqcHI2IiwicG9ydCI6ImFuZ2xlIn0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9uM3FpZiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X24zcWlmIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlJvdXRlRGlyZWN0aW9uX2FwZ3NwIiwicG9ydCI6ImRlZ3JlZXMifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9uM3FpZiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRHZXN0dXJlQW5nbGVfZGpwcjYiLCJwb3J0IjoiY2xlYXIifSwibWV0YWRhdGEiOnsicm91dGUiOjB9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0SW5kaXZpZHVhbFBvaW50ZXJfb3pqZmEiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU3BsaXRQb2ludGVyX3YwdThrIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0UG9pbnRlcl92MHU4ayIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUG9pbnRlcl92MGVxdiIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU2VuZFBvaW50ZXJfdjBlcXYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0U3RhcnRQb2ludF9iaHJsMiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja01heERpc3RhbmNlX2NlYnE1IiwicG9ydCI6InBhc3MifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUG9pbnRlcl92MGVxdiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja01heERpc3RhbmNlX2NlYnE1IiwicG9ydCI6ImZhaWwifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsXzViMHFvIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX293eXliIiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkZhaWxfNWIwcW8iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRQb2ludGVyX3YwdThrIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX293eXliIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjowfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX293eXliIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrTWF4RGlzdGFuY2VfY2VicTUiLCJwb3J0IjoidmFsdWUifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7ImRhdGEiOiJzdGFydHBvaW50IiwidGd0Ijp7InByb2Nlc3MiOiJHZXRTdGFydFBvaW50X2JocmwyIiwicG9ydCI6ImtleSJ9fSx7ImRhdGEiOiJtb3ZlcG9pbnQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldEN1cnJlbnRQb2ludF9yd3d0MCIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoiZGlzdGFuY2UiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX293eXliIiwicG9ydCI6ImtleSJ9fSx7ImRhdGEiOiI8PSIsInRndCI6eyJwcm9jZXNzIjoiQ2hlY2tNYXhEaXN0YW5jZV9jZWJxNSIsInBvcnQiOiJvcGVyYXRvciJ9fV19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9pbmRleC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Ci8qCiAqIFRoaXMgZmlsZSBjYW4gYmUgdXNlZCBmb3IgZ2VuZXJhbCBsaWJyYXJ5IGZlYXR1cmVzIG9mIG5vZmxvLWdlc3R1cmVzLgogKgogKiBUaGUgbGlicmFyeSBmZWF0dXJlcyBjYW4gYmUgbWFkZSBhdmFpbGFibGUgYXMgQ29tbW9uSlMgbW9kdWxlcyB0aGF0IHRoZQogKiBjb21wb25lbnRzIGluIHRoaXMgcHJvamVjdCB1dGlsaXplLgogKi8KCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvRGV0ZWN0RHJhZy5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsiZW52aXJvbm1lbnQiOnsicnVudGltZSI6Imh0bWwiLCJzcmMiOiIuL3ByZXZpZXcvaWZyYW1lLmh0bWwiLCJ3aWR0aCI6IjMwMCIsImhlaWdodCI6IjMwMCIsImNvbnRlbnQiOiIifSwibmFtZSI6IkRldGVjdERyYWcifSwiZXhwb3J0cyI6W3sicHJpdmF0ZSI6InJlY2VpdmVnZXN0dXJlXzNid3lvLmluIiwicHVibGljIjoiaW4ifSx7InByaXZhdGUiOiJjaGVja21pbmRpc3RhbmNlX3pzeWhxLmNvbXBhcmlzb24iLCJwdWJsaWMiOiJkaXN0YW5jZSJ9LHsicHJpdmF0ZSI6InNlbmRwYXNzX2xza3hxLm91dCIsInB1YmxpYyI6InBhc3MifSx7InByaXZhdGUiOiJzZW5kZmFpbF82NG1tMi5vdXQiLCJwdWJsaWMiOiJmYWlsIn0seyJwcml2YXRlIjoiY2hlY2ttYXhzcGVlZF9zb2p0aS5jb21wYXJpc29uIiwicHVibGljIjoibWF4c3BlZWQifV0sInByb2Nlc3NlcyI6eyJSZWNlaXZlR2VzdHVyZV8zYnd5byI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOi02MDUsInkiOjgyLCJsYWJlbCI6IlJlY2VpdmVHZXN0dXJlIn19LCJjb3JlL1NwbGl0X3FmaG9tIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjotNjA1LCJ5IjoxNTksImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiU2VuZFBhc3NfbHNreHEiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTE0MywieSI6MjgsImxhYmVsIjoiU2VuZFBhc3MifX0sIlNlbmRGYWlsXzY0bW0yIjp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjExNDUsInkiOjMwNSwibGFiZWwiOiJTZW5kRmFpbCJ9fSwiRmFpbHVyZXNfMTNxOHMiOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjk0MSwieSI6MzExLCJsYWJlbCI6IkZhaWx1cmVzIn19LCJHZXREaXN0YW5jZV9iangwcyI6eyJjb21wb25lbnQiOiJvYmplY3RzL0dldE9iamVjdEtleSIsIm1ldGFkYXRhIjp7IngiOjUyNiwieSI6MTYxLCJsYWJlbCI6IkdldERpc3RhbmNlIn19LCJDaGVja01pbkRpc3RhbmNlX3pzeWhxIjp7ImNvbXBvbmVudCI6Im1hdGgvQ29tcGFyZSIsIm1ldGFkYXRhIjp7IngiOjkwMCwieSI6MTYwLCJsYWJlbCI6IkNoZWNrTWluRGlzdGFuY2UifX0sIkdldEluZGl2aWR1YWxQb2ludGVyX2h2OTN0Ijp7ImNvbXBvbmVudCI6Im9iamVjdHMvU3BsaXRPYmplY3QiLCJtZXRhZGF0YSI6eyJ4IjotNDEwLCJ5IjoxNTksImxhYmVsIjoiR2V0SW5kaXZpZHVhbFBvaW50ZXIifX0sIlNwbGl0RGlzdGFuY2VfdnJleWYiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjcxMS45OTk5OTk5OTk5OTk4LCJ5IjoxNjAsImxhYmVsIjoiU3BsaXREaXN0YW5jZSJ9fSwiU3BsaXRQb2ludGVyXzhybjlxIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjotMjIzLjUwMDAwMDAwMDAwMDgsInkiOjE1OS4xNjY2NjY2NjY2NjY2NiwibGFiZWwiOiJTcGxpdFBvaW50ZXIifX0sIlNlbmRQb2ludGVyX2I0dW52Ijp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjM0MC4zMzMzMzMzMzMzMzI4LCJ5IjoxNjAuMTY2NjY2NjY2NjY2NjksImxhYmVsIjoiU2VuZFBvaW50ZXIifX0sIkdldFNwZWVkX281NmZwIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6LTQwLjQ5OTk5OTk5OTk5OTc3LCJ5IjoxNTksImxhYmVsIjoiR2V0U3BlZWQifX0sIkNoZWNrTWF4U3BlZWRfc29qdGkiOnsiY29tcG9uZW50IjoibWF0aC9Db21wYXJlIiwibWV0YWRhdGEiOnsieCI6MTUwLjUwMDAwMDAwMDAwMDIzLCJ5IjoxNjEsImxhYmVsIjoiQ2hlY2tNYXhTcGVlZCJ9fX0sImNvbm5lY3Rpb25zIjpbeyJzcmMiOnsicHJvY2VzcyI6IlJlY2VpdmVHZXN0dXJlXzNid3lvIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfcWZob20iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9xZmhvbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kRmFpbF82NG1tMiIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9xZmhvbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUGFzc19sc2t4cSIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiRmFpbHVyZXNfMTNxOHMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZEZhaWxfNjRtbTIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0RGlzdGFuY2VfYmp4MHMiLCJwb3J0IjoibWlzc2VkIn0sInRndCI6eyJwcm9jZXNzIjoiRmFpbHVyZXNfMTNxOHMiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tNaW5EaXN0YW5jZV96c3locSIsInBvcnQiOiJmYWlsIn0sInRndCI6eyJwcm9jZXNzIjoiRmFpbHVyZXNfMTNxOHMiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9xZmhvbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRJbmRpdmlkdWFsUG9pbnRlcl9odjkzdCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9iangwcyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTcGxpdERpc3RhbmNlX3ZyZXlmIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0RGlzdGFuY2VfdnJleWYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQ2hlY2tNaW5EaXN0YW5jZV96c3locSIsInBvcnQiOiJ2YWx1ZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRJbmRpdmlkdWFsUG9pbnRlcl9odjkzdCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTcGxpdFBvaW50ZXJfOHJuOXEiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjh9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tNaW5EaXN0YW5jZV96c3locSIsInBvcnQiOiJwYXNzIn0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFBhc3NfbHNreHEiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiU2VuZFBvaW50ZXJfYjR1bnYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0RGlzdGFuY2VfYmp4MHMiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRQb2ludGVyXzhybjlxIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRQb2ludGVyX2I0dW52IiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja01heFNwZWVkX3NvanRpIiwicG9ydCI6InBhc3MifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUG9pbnRlcl9iNHVudiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRTcGVlZF9vNTZmcCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJDaGVja01heFNwZWVkX3NvanRpIiwicG9ydCI6InZhbHVlIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0UG9pbnRlcl84cm45cSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRTcGVlZF9vNTZmcCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OH19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRTcGVlZF9vNTZmcCIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsdXJlc18xM3E4cyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJDaGVja01heFNwZWVkX3NvanRpIiwicG9ydCI6ImZhaWwifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsdXJlc18xM3E4cyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsiZGF0YSI6ImRpc3RhbmNlIiwidGd0Ijp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9iangwcyIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoiPj0iLCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrTWluRGlzdGFuY2VfenN5aHEiLCJwb3J0Ijoib3BlcmF0b3IifX0seyJkYXRhIjoiPD0iLCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrTWF4U3BlZWRfc29qdGkiLCJwb3J0Ijoib3BlcmF0b3IifX0seyJkYXRhIjoic3BlZWQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldFNwZWVkX281NmZwIiwicG9ydCI6ImtleSJ9fV19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvRGV0ZWN0U3dpcGUuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJwcm9wZXJ0aWVzIjp7ImVudmlyb25tZW50Ijp7InJ1bnRpbWUiOiJodG1sIiwic3JjIjoiLi9wcmV2aWV3L2lmcmFtZS5odG1sIiwid2lkdGgiOiIzMDAiLCJoZWlnaHQiOiIzMDAiLCJjb250ZW50IjoiIn0sIm5hbWUiOiJEZXRlY3RTd2lwZSJ9LCJleHBvcnRzIjpbeyJwcml2YXRlIjoicmVjZWl2ZWdlc3R1cmVfN2Z4YzMuaW4iLCJwdWJsaWMiOiJpbiJ9LHsicHJpdmF0ZSI6InNlbmRwYXNzX2l1YzIxLm91dCIsInB1YmxpYyI6InBhc3MifSx7InByaXZhdGUiOiJzZW5kZmFpbF9uOWlheS5vdXQiLCJwdWJsaWMiOiJmYWlsIn0seyJwcml2YXRlIjoiY2hlY2tzcGVlZF9jcnUyMS5jb21wYXJpc29uIiwicHVibGljIjoic3BlZWQifSx7InByaXZhdGUiOiJjaGVja2Rpc3RhbmNlXzc4NmNjLmNvbXBhcmlzb24iLCJwdWJsaWMiOiJkaXN0YW5jZSJ9XSwicHJvY2Vzc2VzIjp7IlJlY2VpdmVHZXN0dXJlXzdmeGMzIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6Mjc3LCJ5IjoxMjQsImxhYmVsIjoiUmVjZWl2ZUdlc3R1cmUifX0sIkdldEluZGl2aWR1YWxQb2ludGVyXzlvODc4Ijp7ImNvbXBvbmVudCI6Im9iamVjdHMvU3BsaXRPYmplY3QiLCJtZXRhZGF0YSI6eyJ4Ijo0NzMsInkiOjIxNywibGFiZWwiOiJHZXRJbmRpdmlkdWFsUG9pbnRlciJ9fSwiU2VuZFBhc3NfaXVjMjEiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MjA2MCwieSI6MTEzLCJsYWJlbCI6IlNlbmRQYXNzIn19LCJHZXRTcGVlZF8yNm42aCI6eyJjb21wb25lbnQiOiJvYmplY3RzL0dldE9iamVjdEtleSIsIm1ldGFkYXRhIjp7IngiOjg2MywieSI6MjE2LCJsYWJlbCI6IkdldFNwZWVkIn19LCJEZXRlY3Rpb25GYWlsZWRfdWo3b2giOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjE4NTAsInkiOjMzNywibGFiZWwiOiJEZXRlY3Rpb25GYWlsZWQifX0sImNvcmUvU3BsaXRfY2JqeXkiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjI3MywieSI6MjE2LCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sIlNlbmRGYWlsX245aWF5Ijp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjIwNjIsInkiOjMzNy4xNjY2NjY2NjY2NjY2MywibGFiZWwiOiJTZW5kRmFpbCJ9fSwiQ2hlY2tTcGVlZF9jcnUyMSI6eyJjb21wb25lbnQiOiJtYXRoL0NvbXBhcmUiLCJtZXRhZGF0YSI6eyJ4IjoxMDU1LjY2NjY2NjY2NjY2NjUsInkiOjIxNS42NjY2NjY2NjY2NjY2NiwibGFiZWwiOiJDaGVja1NwZWVkIn19LCJzdHJpbmdzL1NlbmRTdHJpbmdfNzVzZTYiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTI1MC42NjY2NjY2NjY2NjY1LCJ5IjoyMTYuNjY2NjY2NjY2NjY2NjYsImxhYmVsIjoic3RyaW5ncy9TZW5kU3RyaW5nIn19LCJHZXREaXN0YW5jZV96ZGp5ZiI6eyJjb21wb25lbnQiOiJvYmplY3RzL0dldE9iamVjdEtleSIsIm1ldGFkYXRhIjp7IngiOjE0NDUuNjY2NjY2NjY2NjY2NSwieSI6MjE1LjY2NjY2NjY2NjY2NjY2LCJsYWJlbCI6IkdldERpc3RhbmNlIn19LCJDaGVja0Rpc3RhbmNlXzc4NmNjIjp7ImNvbXBvbmVudCI6Im1hdGgvQ29tcGFyZSIsIm1ldGFkYXRhIjp7IngiOjE2NDgsInkiOjIxNiwibGFiZWwiOiJDaGVja0Rpc3RhbmNlIn19LCJjb3JlL1NwbGl0X3g2cDkzIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4Ijo2NjcuOTk5OTk5OTk5OTk4NiwieSI6MjE1LjY2NjY2NjY2NjY2NjYzLCJsYWJlbCI6ImNvcmUvU3BsaXQifX19LCJjb25uZWN0aW9ucyI6W3sic3JjIjp7InByb2Nlc3MiOiJHZXRTcGVlZF8yNm42aCIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJEZXRlY3Rpb25GYWlsZWRfdWo3b2giLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tTcGVlZF9jcnUyMSIsInBvcnQiOiJwYXNzIn0sInRndCI6eyJwcm9jZXNzIjoic3RyaW5ncy9TZW5kU3RyaW5nXzc1c2U2IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldFNwZWVkXzI2bjZoIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrU3BlZWRfY3J1MjEiLCJwb3J0IjoidmFsdWUifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tTcGVlZF9jcnUyMSIsInBvcnQiOiJmYWlsIn0sInRndCI6eyJwcm9jZXNzIjoiRGV0ZWN0aW9uRmFpbGVkX3VqN29oIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6InN0cmluZ3MvU2VuZFN0cmluZ183NXNlNiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV96ZGp5ZiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV96ZGp5ZiIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJEZXRlY3Rpb25GYWlsZWRfdWo3b2giLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tEaXN0YW5jZV83ODZjYyIsInBvcnQiOiJmYWlsIn0sInRndCI6eyJwcm9jZXNzIjoiRGV0ZWN0aW9uRmFpbGVkX3VqN29oIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldERpc3RhbmNlX3pkanlmIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrRGlzdGFuY2VfNzg2Y2MiLCJwb3J0IjoidmFsdWUifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tEaXN0YW5jZV83ODZjYyIsInBvcnQiOiJwYXNzIn0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFBhc3NfaXVjMjEiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiRGV0ZWN0aW9uRmFpbGVkX3VqN29oIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRGYWlsX245aWF5IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IlJlY2VpdmVHZXN0dXJlXzdmeGMzIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfY2JqeXkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9jYmp5eSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUGFzc19pdWMyMSIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9jYmp5eSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kRmFpbF9uOWlheSIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9jYmp5eSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRJbmRpdmlkdWFsUG9pbnRlcl85bzg3OCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRJbmRpdmlkdWFsUG9pbnRlcl85bzg3OCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3g2cDkzIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfeDZwOTMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoic3RyaW5ncy9TZW5kU3RyaW5nXzc1c2U2IiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3g2cDkzIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldFNwZWVkXzI2bjZoIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJkYXRhIjoic3BlZWQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldFNwZWVkXzI2bjZoIiwicG9ydCI6ImtleSJ9fSx7ImRhdGEiOiJkaXN0YW5jZSIsInRndCI6eyJwcm9jZXNzIjoiR2V0RGlzdGFuY2VfemRqeWYiLCJwb3J0Ijoia2V5In19LHsiZGF0YSI6Ij49IiwidGd0Ijp7InByb2Nlc3MiOiJDaGVja1NwZWVkX2NydTIxIiwicG9ydCI6Im9wZXJhdG9yIn19LHsiZGF0YSI6Ij49IiwidGd0Ijp7InByb2Nlc3MiOiJDaGVja0Rpc3RhbmNlXzc4NmNjIiwicG9ydCI6Im9wZXJhdG9yIn19XX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RQaW5jaC5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsiZW52aXJvbm1lbnQiOnsicnVudGltZSI6Imh0bWwiLCJzcmMiOiIuL3ByZXZpZXcvaWZyYW1lLmh0bWwiLCJ3aWR0aCI6IjMwMCIsImhlaWdodCI6IjMwMCIsImNvbnRlbnQiOiIifSwibmFtZSI6IkRldGVjdFBpbmNoIn0sImV4cG9ydHMiOlt7InByaXZhdGUiOiJjb3JlL3NwbGl0X2V3YnJlLmluIiwicHVibGljIjoiaW4ifSx7InByaXZhdGUiOiJzZW5kcGFzc19jZjBwdS5vdXQiLCJwdWJsaWMiOiJwYXNzIn0seyJwcml2YXRlIjoic2VuZGZhaWxfdm1pNW4ub3V0IiwicHVibGljIjoiZmFpbCJ9XSwicHJvY2Vzc2VzIjp7ImNvcmUvU3BsaXRfZXdicmUiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjc0MCwieSI6MTUxLCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sIlNlbmRGYWlsX3ZtaTVuIjp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjE0MjMsInkiOjI1OSwibGFiZWwiOiJTZW5kRmFpbCJ9fSwiU2VuZFBhc3NfY2YwcHUiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTQyMSwieSI6NjUsImxhYmVsIjoiU2VuZFBhc3MifX0sIm9iamVjdHMvU2l6ZV9qam1tZyI6eyJjb21wb25lbnQiOiJvYmplY3RzL1NpemUiLCJtZXRhZGF0YSI6eyJ4Ijo5MzksInkiOjE1MCwibGFiZWwiOiJvYmplY3RzL1NpemUifX0sIm1hdGgvQ29tcGFyZV9oazNzdSI6eyJjb21wb25lbnQiOiJtYXRoL0NvbXBhcmUiLCJtZXRhZGF0YSI6eyJ4IjoxMTQ2LCJ5IjoxNDcsImxhYmVsIjoibWF0aC9Db21wYXJlIn19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoib2JqZWN0cy9TaXplX2pqbW1nIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Im1hdGgvQ29tcGFyZV9oazNzdSIsInBvcnQiOiJ2YWx1ZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJtYXRoL0NvbXBhcmVfaGszc3UiLCJwb3J0IjoicGFzcyJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRQYXNzX2NmMHB1IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Im1hdGgvQ29tcGFyZV9oazNzdSIsInBvcnQiOiJmYWlsIn0sInRndCI6eyJwcm9jZXNzIjoiU2VuZEZhaWxfdm1pNW4iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9ld2JyZSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kRmFpbF92bWk1biIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9ld2JyZSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kUGFzc19jZjBwdSIsInBvcnQiOiJzdHJpbmcifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9ld2JyZSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJvYmplY3RzL1NpemVfamptbWciLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7ImRhdGEiOjEsInRndCI6eyJwcm9jZXNzIjoibWF0aC9Db21wYXJlX2hrM3N1IiwicG9ydCI6ImNvbXBhcmlzb24ifX0seyJkYXRhIjoiPiIsInRndCI6eyJwcm9jZXNzIjoibWF0aC9Db21wYXJlX2hrM3N1IiwicG9ydCI6Im9wZXJhdG9yIn19XX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9GaWx0ZXJCeVRhcmdldC5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsibmFtZSI6IkZpbHRlckJ5VGFyZ2V0In0sImV4cG9ydHMiOlt7InByaXZhdGUiOiJTdGFydEV2ZW50X3JqZzI0LmluIiwicHVibGljIjoic3RhcnRlZCJ9LHsicHJpdmF0ZSI6IkdldFRhcmdldF83Y2ZpbS5vYmplY3QiLCJwdWJsaWMiOiJzdGFydGV2ZW50In0seyJwcml2YXRlIjoiTW92ZUV2ZW50X3JldWhsLmluIiwicHVibGljIjoibW92ZSJ9LHsicHJpdmF0ZSI6IlZlcmlmeVRhcmdldF90eTNwNS5hY2NlcHQiLCJwdWJsaWMiOiJhY2NlcHQifSx7InByaXZhdGUiOiJUYXJnZXRFbGVtZW50Xzl0djg3Lm91dCIsInB1YmxpYyI6InRhcmdldCJ9LHsicHJpdmF0ZSI6Ik9uVGFyZ2V0X2w4NXg5Lm91dCIsInB1YmxpYyI6Im9udGFyZ2V0In0seyJwcml2YXRlIjoiQWxsb3dlZE1vdmVzX3k2dWx2Lm91dCIsInB1YmxpYyI6Im1vdmUifV0sInByb2Nlc3NlcyI6eyJHZXRUYXJnZXRfN2NmaW0iOnsiY29tcG9uZW50Ijoib2JqZWN0cy9HZXRPYmplY3RLZXkiLCJtZXRhZGF0YSI6eyJ4Ijo2MzQsInkiOjIxMCwibGFiZWwiOiJHZXRUYXJnZXQifX0sIk1vdmVFdmVudF9yZXVobCI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjQyNSwieSI6MzYyLCJsYWJlbCI6Ik1vdmVFdmVudCJ9fSwiU3BsaXRUYXJnZXRfc3FsZzAiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjgzNiwieSI6MjEyLCJsYWJlbCI6IlNwbGl0VGFyZ2V0In19LCJTdGFydEV2ZW50X3JqZzI0Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6NDI2LjAwMDAwMDAwMDAwMDA2LCJ5IjoyMTMsImxhYmVsIjoiU3RhcnRFdmVudCJ9fSwiVmVyaWZ5VGFyZ2V0X3R5M3A1Ijp7ImNvbXBvbmVudCI6Im9iamVjdHMvRmlsdGVyUHJvcGVydHlWYWx1ZSIsIm1ldGFkYXRhIjp7IngiOjEwNTEuMzMzMzMzMzMzMzMzNSwieSI6MjExLjMzMzMzMzMzMzMzMzMxLCJsYWJlbCI6IlZlcmlmeVRhcmdldCJ9fSwiQWxsb3dlZE1vdmVzX3k2dWx2Ijp7ImNvbXBvbmVudCI6ImZsb3cvR2F0ZSIsIm1ldGFkYXRhIjp7IngiOjE1MDguNjY2NjY2NjY2NjY2NSwieSI6MjEyLjUsImxhYmVsIjoiQWxsb3dlZE1vdmVzIn19LCJTcGxpdE9uVGFyZ2V0X3htaTY3Ijp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjoxMjc1LjgzMzMzMzMzMzMzNCwieSI6MjA5LjY2NjY2NjY2NjY2NjY5LCJsYWJlbCI6IlNwbGl0T25UYXJnZXQifX0sIk9uVGFyZ2V0X2w4NXg5Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTUwOS44MzMzMzMzMzMzMzQsInkiOjExOC42NjY2NjY2NjY2NjY2OSwibGFiZWwiOiJPblRhcmdldCJ9fSwiVGFyZ2V0RWxlbWVudF85dHY4NyI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjE1MDcuODMzMzMzMzMzMzM0LCJ5IjoyNi42NjY2NjY2NjY2NjY2ODYsImxhYmVsIjoiVGFyZ2V0RWxlbWVudCJ9fX0sImNvbm5lY3Rpb25zIjpbeyJzcmMiOnsicHJvY2VzcyI6IkdldFRhcmdldF83Y2ZpbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTcGxpdFRhcmdldF9zcWxnMCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTdGFydEV2ZW50X3JqZzI0IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldFRhcmdldF83Y2ZpbSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdFRhcmdldF9zcWxnMCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJWZXJpZnlUYXJnZXRfdHkzcDUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiTW92ZUV2ZW50X3JldWhsIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkFsbG93ZWRNb3Zlc195NnVsdiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6Mn19LHsic3JjIjp7InByb2Nlc3MiOiJWZXJpZnlUYXJnZXRfdHkzcDUiLCJwb3J0IjoibWlzc2VkIn0sInRndCI6eyJwcm9jZXNzIjoiQWxsb3dlZE1vdmVzX3k2dWx2IiwicG9ydCI6ImNsb3NlIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IlZlcmlmeVRhcmdldF90eTNwNSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTcGxpdE9uVGFyZ2V0X3htaTY3IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0T25UYXJnZXRfeG1pNjciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQWxsb3dlZE1vdmVzX3k2dWx2IiwicG9ydCI6Im9wZW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRPblRhcmdldF94bWk2NyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJPblRhcmdldF9sODV4OSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdFRhcmdldF9zcWxnMCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJUYXJnZXRFbGVtZW50Xzl0djg3IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJkYXRhIjoidGFyZ2V0IiwidGd0Ijp7InByb2Nlc3MiOiJHZXRUYXJnZXRfN2NmaW0iLCJwb3J0Ijoia2V5In19XX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9HZXN0dXJlVG9PYmplY3QuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJwcm9wZXJ0aWVzIjp7ImVudmlyb25tZW50Ijp7InJ1bnRpbWUiOiJodG1sIiwic3JjIjoiLi9wcmV2aWV3L2lmcmFtZS5odG1sIiwid2lkdGgiOiIzMDAiLCJoZWlnaHQiOiIzMDAiLCJjb250ZW50IjoiIn0sIm5hbWUiOiJCZWhhdmlvciJ9LCJleHBvcnRzIjpbeyJwcml2YXRlIjoibGlzdGVuZ2VzdHVyZXNfbnM4bGkuZWxlbWVudCIsInB1YmxpYyI6ImVsZW1lbnQifSx7InByaXZhdGUiOiJnZXN0dXJlZGF0YXRvb2JqZWN0X3loM3lxLm91dCIsInB1YmxpYyI6Im91dCJ9XSwicHJvY2Vzc2VzIjp7Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIjp7ImNvbXBvbmVudCI6Imdlc3R1cmVzL0xpc3Rlbkdlc3R1cmVzIiwibWV0YWRhdGEiOnsieCI6NjA5LCJ5IjoxMzksImxhYmVsIjoiTGlzdGVuR2VzdHVyZXMifX0sIkdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiOnsiY29tcG9uZW50IjoiZ3JvdXBzL0NvbGxlY3RPYmplY3QiLCJtZXRhZGF0YSI6eyJ4IjoxMjUyLCJ5IjoxNTksImxhYmVsIjoiR2VzdHVyZURhdGFUb09iamVjdCJ9fSwiU3BsaXRFbmRfYWtkcTEiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjg0Ny4xNjY2NjY2NjY2NjY3LCJ5Ijo4NS42NjY2NjY2NjY2NjY2NiwibGFiZWwiOiJTcGxpdEVuZCJ9fSwiQ2xlYXJPbkVuZF85dzlvIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0QXN5bmMiLCJtZXRhZGF0YSI6eyJ4IjoxMDUxLjE2NjY2NjY2NjY2NjcsInkiOjg4LjY2NjY2NjY2NjY2NjY2LCJsYWJlbCI6IkNsZWFyT25FbmQifX0sIlNwbGl0U3BlZWRfMmpua20iOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjg0OS41LCJ5IjoxNDcuNSwibGFiZWwiOiJTcGxpdFNwZWVkIn19LCJTcGxpdFN0YXJ0X2hyMnJ4Ijp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4Ijo4NDUuODMzMzMzMzMzMzMzLCJ5IjoyMy41MDAwMDAwMDAwMDAwMywibGFiZWwiOiJTcGxpdFN0YXJ0In19LCJSZWxlYXNlTW92ZU9yRW5kX2FoY3M1Ijp7ImNvbXBvbmVudCI6ImNvcmUvTWVyZ2UiLCJtZXRhZGF0YSI6eyJ4IjoxMDUwLjMzMzMzMzMzMzMzMjYsInkiOjE1Ny44MzMzMzMzMzMzMzMzMSwibGFiZWwiOiJSZWxlYXNlTW92ZU9yRW5kIn19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfYWtkcTEiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQ2xlYXJPbkVuZF85dzlvIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkNsZWFyT25FbmRfOXc5byIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6ImNsZWFyIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImVuZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0RW5kX2FrZHExIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6InN0YXJ0In0sInRndCI6eyJwcm9jZXNzIjoiU3BsaXRTdGFydF9ocjJyeCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdFN0YXJ0X2hyMnJ4IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0IjoiY29sbGVjdCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5HZXN0dXJlc19uczhsaSIsInBvcnQiOiJzdGFydHBvaW50In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImVsZW1lbnRzIn0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo3fX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImFuZ2xlIn0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImRpc3RhbmNlIn0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0U3BlZWRfMmpua20iLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6Im1vdmVwb2ludCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0IjoiY29sbGVjdCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5HZXN0dXJlc19uczhsaSIsInBvcnQiOiJjdXJyZW50In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbkdlc3R1cmVzX25zOGxpIiwicG9ydCI6ImR1cmF0aW9uIn0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJjb2xsZWN0In0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0RW5kX2FrZHExIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0IjoiY29sbGVjdCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5HZXN0dXJlc19uczhsaSIsInBvcnQiOiJlbmRwb2ludCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0IjoiY29sbGVjdCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJMaXN0ZW5HZXN0dXJlc19uczhsaSIsInBvcnQiOiJzcGVlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0U3BlZWRfMmpua20iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjh9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRTcGVlZF8yam5rbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJSZWxlYXNlTW92ZU9yRW5kX2FoY3M1IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo4fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0RW5kX2FrZHExIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlJlbGVhc2VNb3ZlT3JFbmRfYWhjczUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiUmVsZWFzZU1vdmVPckVuZF9haGNzNSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGF0YVRvT2JqZWN0X3loM3lxIiwicG9ydCI6InJlbGVhc2UifSwibWV0YWRhdGEiOnsicm91dGUiOjh9fSx7ImRhdGEiOiJlbGVtZW50cyIsInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURhdGFUb09iamVjdF95aDN5cSIsInBvcnQiOiJhbGxwYWNrZXRzIn19LHsiZGF0YSI6InN0YXJ0ZWxlbWVudCxzdGFydHBvaW50LGVsZW1lbnRzLGFuZ2xlLGRpc3RhbmNlLHNwZWVkLG1vdmVwb2ludCxjdXJyZW50LGR1cmF0aW9uLGVuZGVsZW1lbnQsZW5kcG9pbnQiLCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVEYXRhVG9PYmplY3RfeWgzeXEiLCJwb3J0Ijoia2V5cyJ9fV19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvTGlzdGVuR2VzdHVyZXMuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJwcm9wZXJ0aWVzIjp7ImVudmlyb25tZW50Ijp7InJ1bnRpbWUiOiJodG1sIiwic3JjIjoiLi9wcmV2aWV3L2lmcmFtZS5odG1sIiwid2lkdGgiOiIzMDAiLCJoZWlnaHQiOiIzMDAiLCJjb250ZW50IjoiIn0sIm5hbWUiOiJMaXN0ZW5HZXN0dXJlcyJ9LCJleHBvcnRzIjpbeyJwcml2YXRlIjoiZ2VzdHVyZXMvbGlzdGVucG9pbnRlcl84ZnRkMS5lbGVtZW50IiwicHVibGljIjoiZWxlbWVudCJ9LHsicHJpdmF0ZSI6Im1vdmVwb2ludF9mamx1ci5vdXQiLCJwdWJsaWMiOiJtb3ZlcG9pbnQifSx7InByaXZhdGUiOiJkaXN0YW5jZV9rd2szOS5vdXQiLCJwdWJsaWMiOiJkaXN0YW5jZSJ9LHsicHJpdmF0ZSI6Imdlc3R1cmVlbGVtZW50c195dm05bS5vdXQiLCJwdWJsaWMiOiJlbGVtZW50cyJ9LHsicHJpdmF0ZSI6ImFuZ2xlXzQzcXBvLm91dCIsInB1YmxpYyI6ImFuZ2xlIn0seyJwcml2YXRlIjoic3BlZWRfZTk5anEub3V0IiwicHVibGljIjoic3BlZWQifSx7InByaXZhdGUiOiJnZXRzdGFydGVsZW1lbnRfdzdtNjQub3V0IiwicHVibGljIjoic3RhcnQifSx7InByaXZhdGUiOiJzdGFydHBvaW50X3U4aW50Lm91dCIsInB1YmxpYyI6InN0YXJ0cG9pbnQifSx7InByaXZhdGUiOiJnZXRlbmRlbGVtZW50X3NsYnA5Lm91dCIsInB1YmxpYyI6ImVuZCJ9LHsicHJpdmF0ZSI6ImdldGVuZGluZ3BvaW50X2RldHRiLmNsaWVudCIsInB1YmxpYyI6ImVuZHBvaW50In0seyJwcml2YXRlIjoiY3VycmVudGVsZW1lbnRfY3UwcTUub3V0IiwicHVibGljIjoiY3VycmVudCJ9LHsicHJpdmF0ZSI6ImR1cmF0aW9uX3F5ZXZ2Lm91dCIsInB1YmxpYyI6ImR1cmF0aW9uIn1dLCJwcm9jZXNzZXMiOnsiR2VzdHVyZVN0YXJ0X3I4dnI1Ijp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4Ijo0NjYsInkiOi0zMSwibGFiZWwiOiJHZXN0dXJlU3RhcnQifX0sIkdldFN0YXJ0aW5nUG9pbnRfcGlkZnMiOnsiY29tcG9uZW50IjoiaW50ZXJhY3Rpb24vUmVhZENvb3JkaW5hdGVzIiwibWV0YWRhdGEiOnsieCI6NzY1LCJ5IjotMTkxLCJsYWJlbCI6IkdldFN0YXJ0aW5nUG9pbnQifX0sIkdldE1vdmVQb2ludF85ZGlhOSI6eyJjb21wb25lbnQiOiJpbnRlcmFjdGlvbi9SZWFkQ29vcmRpbmF0ZXMiLCJtZXRhZGF0YSI6eyJ4IjoxMzY4LCJ5IjoxMzYsImxhYmVsIjoiR2V0TW92ZVBvaW50In19LCJjb3JlL1NwbGl0X2JhZWViIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjoxNTYzLCJ5IjoxMzcsImxhYmVsIjoiY29yZS9TcGxpdCJ9fSwiY29yZS9TcGxpdF80ZHMxaCI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6OTczLCJ5IjotMTkxLCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sIkdlc3R1cmVBbmdsZV9kd2pqIjp7ImNvbXBvbmVudCI6Im1hdGgvQ2FsY3VsYXRlQW5nbGUiLCJtZXRhZGF0YSI6eyJ4IjoxOTM5LCJ5IjotMTI3LCJsYWJlbCI6Ikdlc3R1cmVBbmdsZSJ9fSwiR2VzdHVyZURpc3RhbmNlX2VzcWtjIjp7ImNvbXBvbmVudCI6Im1hdGgvQ2FsY3VsYXRlRGlzdGFuY2UiLCJtZXRhZGF0YSI6eyJ4IjoxOTM0LCJ5IjoyMCwibGFiZWwiOiJHZXN0dXJlRGlzdGFuY2UifX0sIkxhc3RNb3ZlX3A1eWo3Ijp7ImNvbXBvbmVudCI6ImNvcmUvS2ljayIsIm1ldGFkYXRhIjp7IngiOjEwNjIsInkiOjE3NiwibGFiZWwiOiJMYXN0TW92ZSJ9fSwiR2VzdHVyZUVuZF9xcXg4byI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6NDYwLCJ5IjoxNjIsImxhYmVsIjoiR2VzdHVyZUVuZCJ9fSwiR2VzdHVyZU1vdmVfaHk0NnMiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjQ2MywieSI6NjUsImxhYmVsIjoiR2VzdHVyZU1vdmUifX0sIkFsbFRvdWNoZWRFbGVtZW50c19pM3g3NCI6eyJjb21wb25lbnQiOiJwYWNrZXRzL1VuaXF1ZVBhY2tldCIsIm1ldGFkYXRhIjp7IngiOjE0NDUsInkiOjYsImxhYmVsIjoiQWxsVG91Y2hlZEVsZW1lbnRzIn19LCJHZXRNb3ZlRWxlbWVudF9pYWV4bSI6eyJjb21wb25lbnQiOiJvYmplY3RzL0dldE9iamVjdEtleSIsIm1ldGFkYXRhIjp7IngiOjEwNTksInkiOjYsImxhYmVsIjoiR2V0TW92ZUVsZW1lbnQifX0sIkdldFN0YXJ0RWxlbWVudF93N202NCI6eyJjb21wb25lbnQiOiJvYmplY3RzL0dldE9iamVjdEtleSIsIm1ldGFkYXRhIjp7IngiOjk2OCwieSI6LTQwNC42NjY2NjY2NjY2NjY2MywibGFiZWwiOiJHZXRTdGFydEVsZW1lbnQifX0sIk1vdmVEYXRlXzZiam5sIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvQ3JlYXRlRGF0ZSIsIm1ldGFkYXRhIjp7IngiOjIxNDUsInkiOjE2NCwibGFiZWwiOiJNb3ZlRGF0ZSJ9fSwiU3RhcnREYXRlX3N3Ynd1Ijp7ImNvbXBvbmVudCI6Im9iamVjdHMvQ3JlYXRlRGF0ZSIsIm1ldGFkYXRhIjp7IngiOjk2OCwieSI6LTI4MSwibGFiZWwiOiJTdGFydERhdGUifX0sIm1hdGgvU3VidHJhY3RfajV2MjAiOnsiY29tcG9uZW50IjoibWF0aC9TdWJ0cmFjdCIsIm1ldGFkYXRhIjp7IngiOjI1MTYsInkiOi0xOTMsImxhYmVsIjoibWF0aC9TdWJ0cmFjdCJ9fSwiU2V0U3RhcnRfcWw1MWMiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6NzY1LCJ5IjotMjg0LCJsYWJlbCI6IlNldFN0YXJ0In19LCJtYXRoL0RpdmlkZV94NGdjOCI6eyJjb21wb25lbnQiOiJtYXRoL0RpdmlkZSIsIm1ldGFkYXRhIjp7IngiOjI5MzksInkiOi0xOTksImxhYmVsIjoibWF0aC9EaXZpZGUifX0sImNvcmUvU3BsaXRfeDBhMTIiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjIxNTEsInkiOjIzLCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sIm9iamVjdHMvQ2FsbE1ldGhvZF9pdTdrMiI6eyJjb21wb25lbnQiOiJvYmplY3RzL0NhbGxNZXRob2QiLCJtZXRhZGF0YSI6eyJ4IjoyMzQ4LCJ5IjoxNjcsImxhYmVsIjoib2JqZWN0cy9DYWxsTWV0aG9kIn19LCJvYmplY3RzL0NhbGxNZXRob2RfcnRmZDIiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9DYWxsTWV0aG9kIiwibWV0YWRhdGEiOnsieCI6MjEzOSwieSI6LTI3NCwibGFiZWwiOiJvYmplY3RzL0NhbGxNZXRob2QifX0sIkRpc3RhbmNlX2t3azM5Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MjU4MCwieSI6MjAsImxhYmVsIjoiRGlzdGFuY2UifX0sIkdlc3R1cmVFbGVtZW50c195dm05bSI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjE2MzksInkiOjQsImxhYmVsIjoiR2VzdHVyZUVsZW1lbnRzIn19LCJBbmdsZV80M3FwbyI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjIzMTIsInkiOi0xMjEsImxhYmVsIjoiQW5nbGUifX0sIlNwZWVkX2U5OWpxIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MzM2MiwieSI6LTE3MSwibGFiZWwiOiJTcGVlZCJ9fSwiTW92ZVBvaW50X2ZqbHVyIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTkzOSwieSI6MjYyLCJsYWJlbCI6Ik1vdmVQb2ludCJ9fSwiU3RhcnRQb2ludF91OGludCI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjEzODIsInkiOi0xODksImxhYmVsIjoiU3RhcnRQb2ludCJ9fSwiZ2VzdHVyZXMvTGlzdGVuUG9pbnRlcl84ZnRkMSI6eyJjb21wb25lbnQiOiJnZXN0dXJlcy9MaXN0ZW5Qb2ludGVyIiwibWV0YWRhdGEiOnsieCI6MjEzLCJ5IjotMSwibGFiZWwiOiJnZXN0dXJlcy9MaXN0ZW5Qb2ludGVyIn19LCJHZXRFbmRFbGVtZW50X3NsYnA5Ijp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6MTM2Ny4zMzMzMzMzMzMzMzM1LCJ5IjoyODMuMzMzMzMzMzMzMzMzNSwibGFiZWwiOiJHZXRFbmRFbGVtZW50In19LCJjb3JlL1JlcGVhdEFzeW5jX2M1NnRqIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0QXN5bmMiLCJtZXRhZGF0YSI6eyJ4IjoxMDU4LjY2NjY2NjY2NjY2NywieSI6MzEyLjMzMzMzMzMzMzMzMzI2LCJsYWJlbCI6ImNvcmUvUmVwZWF0QXN5bmMifX0sInN0cmluZ3MvU2VuZFN0cmluZ190NmdieSI6eyJjb21wb25lbnQiOiJzdHJpbmdzL1NlbmRTdHJpbmciLCJtZXRhZGF0YSI6eyJ4IjoxOTM1LCJ5IjoxNjYuMzMzMzMzMzMzMzMzMzcsImxhYmVsIjoic3RyaW5ncy9TZW5kU3RyaW5nIn19LCJncm91cHMvU2VuZEJ5R3JvdXBfejA2a2siOnsiY29tcG9uZW50IjoiZ3JvdXBzL1NlbmRCeUdyb3VwIiwibWV0YWRhdGEiOnsieCI6NTU2LCJ5IjotMTUxLjY2NjY2NjY2NjY2NjY5LCJsYWJlbCI6Imdyb3Vwcy9TZW5kQnlHcm91cCJ9fSwiY29yZS9TcGxpdF9la3hpaiI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6MzE1OC41LCJ5IjotMTY2LjMzMzMzMzMzMzMzMzQzLCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sImNvcmUvU3BsaXRfZXBoM2QiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjIxMjMuMzMzMzMzMzMzMzM0LCJ5IjotMTIyLjY2NjY2NjY2NjY2NjY5LCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sImNvcmUvU3BsaXRfM2VsZXAiOnsiY29tcG9uZW50IjoiY29yZS9TcGxpdCIsIm1ldGFkYXRhIjp7IngiOjI3MzEuMTY2NjY2NjY2NjY5NywieSI6LTE3MS44MzMzMzMzMzMzMzI1OCwibGFiZWwiOiJjb3JlL1NwbGl0In19LCJjb3JlL1NwbGl0XzhsM3l1Ijp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjoxMjUxLjMzMzMzMzMzMzMzMzMsInkiOjcuMTY2NjY2NjY2NjY2NjI5LCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sIkN1cnJlbnRFbGVtZW50X2N1MHE1Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTU5OS44MzMzMzMzMzMzMzMsInkiOi0xOTIuMDAwMDAwMDAwMDAwMDYsImxhYmVsIjoiQ3VycmVudEVsZW1lbnQifX0sIkR1cmF0aW9uX3F5ZXZ2Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MjkzNy44MzMzMzMzMzMzMzMsInkiOi0yOTUuODMzMzMzMzMzMzMzMjYsImxhYmVsIjoiRHVyYXRpb24ifX0sIkdldEVuZGluZ1BvaW50X2RldHRiIjp7ImNvbXBvbmVudCI6ImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlcyIsIm1ldGFkYXRhIjp7IngiOjcyNy44MzMzMzMzMzMzMzMxLCJ5IjozMzUuMzMzMzMzMzMzMzMzMywibGFiZWwiOiJHZXRFbmRpbmdQb2ludCJ9fSwiY29yZS9NZXJnZV82c28iOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjExOTYuNjY2NjY2NjY2NjY3LCJ5IjotMTg4Ljk5OTk5OTk5OTk5OTgzLCJsYWJlbCI6ImNvcmUvTWVyZ2UifX0sImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlc184MmNiMSI6eyJjb21wb25lbnQiOiJpbnRlcmFjdGlvbi9SZWFkQ29vcmRpbmF0ZXMiLCJtZXRhZGF0YSI6eyJ4Ijo3NjcuMzMzMzMzMzMzMzMzOSwieSI6LTg1LjgzMzMzMzMzMzMzMzE0LCJsYWJlbCI6ImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlcyJ9fSwiY29yZS9Ecm9wX3NhOHo1Ijp7ImNvbXBvbmVudCI6ImNvcmUvRHJvcCIsIm1ldGFkYXRhIjp7IngiOjE1OTYuODMzMzMzMzMzMzMzLCJ5IjozMjYuMDAwMDAwMDAwMDAwMSwibGFiZWwiOiJjb3JlL0Ryb3AifX0sImNvcmUvTWVyZ2VfbHF4bGwiOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjc2OC45OTk5OTk5OTk5OTk1LCJ5IjotNDAzLjY2NjY2NjY2NjY2NjYzLCJsYWJlbCI6ImNvcmUvTWVyZ2UifX0sImdyb3Vwcy9TZW5kQnlHcm91cF84eWFqIjp7ImNvbXBvbmVudCI6Imdyb3Vwcy9TZW5kQnlHcm91cCIsIm1ldGFkYXRhIjp7IngiOjExNjYuOTk5OTk5OTk5OTk5LCJ5IjotMjg2LjgzMzMzMzMzMzMzMzI2LCJsYWJlbCI6Imdyb3Vwcy9TZW5kQnlHcm91cCJ9fX0sImNvbm5lY3Rpb25zIjpbeyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfNGRzMWgiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZUFuZ2xlX2R3amoiLCJwb3J0Ijoib3JpZ2luIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfYmFlZWIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZUFuZ2xlX2R3amoiLCJwb3J0IjoiZGVzdGluYXRpb24ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF80ZHMxaCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlRGlzdGFuY2VfZXNxa2MiLCJwb3J0Ijoib3JpZ2luIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfYmFlZWIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURpc3RhbmNlX2VzcWtjIiwicG9ydCI6ImRlc3RpbmF0aW9uIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldE1vdmVQb2ludF85ZGlhOSIsInBvcnQiOiJjbGllbnQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2JhZWViIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldFN0YXJ0aW5nUG9pbnRfcGlkZnMiLCJwb3J0IjoiY2xpZW50In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF80ZHMxaCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTZXRTdGFydF9xbDUxYyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTdGFydERhdGVfc3did3UiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZURpc3RhbmNlX2VzcWtjIiwicG9ydCI6ImRpc3RhbmNlIn0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF94MGExMiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X3gwYTEyIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Im1hdGgvRGl2aWRlX3g0Z2M4IiwicG9ydCI6ImRpdmlkZW5kIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6Im9iamVjdHMvQ2FsbE1ldGhvZF9pdTdrMiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJtYXRoL1N1YnRyYWN0X2o1djIwIiwicG9ydCI6Im1pbnVlbmQifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiTW92ZURhdGVfNmJqbmwiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoib2JqZWN0cy9DYWxsTWV0aG9kX2l1N2syIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfeDBhMTIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiRGlzdGFuY2Vfa3drMzkiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiQWxsVG91Y2hlZEVsZW1lbnRzX2kzeDc0IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVFbGVtZW50c195dm05bSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2JhZWViIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ik1vdmVQb2ludF9mamx1ciIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6M319LHsic3JjIjp7InByb2Nlc3MiOiJnZXN0dXJlcy9MaXN0ZW5Qb2ludGVyXzhmdGQxIiwicG9ydCI6ImVuZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVFbmRfcXF4OG8iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiZ2VzdHVyZXMvTGlzdGVuUG9pbnRlcl84ZnRkMSIsInBvcnQiOiJtb3ZlIn0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZU1vdmVfaHk0NnMiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiZ2VzdHVyZXMvTGlzdGVuUG9pbnRlcl84ZnRkMSIsInBvcnQiOiJzdGFydCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikdlc3R1cmVTdGFydF9yOHZyNSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJMYXN0TW92ZV9wNXlqNyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRFbmRFbGVtZW50X3NsYnA5IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikdlc3R1cmVFbmRfcXF4OG8iLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiTGFzdE1vdmVfcDV5ajciLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZUVuZF9xcXg4byIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1JlcGVhdEFzeW5jX2M1NnRqIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfYmFlZWIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoic3RyaW5ncy9TZW5kU3RyaW5nX3Q2Z2J5IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6InN0cmluZ3MvU2VuZFN0cmluZ190NmdieSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJNb3ZlRGF0ZV82YmpubCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NH19LHsic3JjIjp7InByb2Nlc3MiOiJncm91cHMvU2VuZEJ5R3JvdXBfejA2a2siLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0U3RhcnRpbmdQb2ludF9waWRmcyIsInBvcnQiOiJldmVudCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlU3RhcnRfcjh2cjUiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiZ3JvdXBzL1NlbmRCeUdyb3VwX3owNmtrIiwicG9ydCI6ImRhdGEifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZU1vdmVfaHk0NnMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiZ3JvdXBzL1NlbmRCeUdyb3VwX3owNmtrIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6Ikdlc3R1cmVNb3ZlX2h5NDZzIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Ikxhc3RNb3ZlX3A1eWo3IiwicG9ydCI6ImRhdGEifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZU1vdmVfaHk0NnMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0TW92ZUVsZW1lbnRfaWFleG0iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZU1vdmVfaHk0NnMiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0TW92ZVBvaW50XzlkaWE5IiwicG9ydCI6ImV2ZW50In0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfeDBhMTIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2VzdHVyZURpc3RhbmNlX2VzcWtjIiwicG9ydCI6ImNsZWFyIn0sIm1ldGFkYXRhIjp7InJvdXRlIjowfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfZWt4aWoiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU3BlZWRfZTk5anEiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjh9fSx7InNyYyI6eyJwcm9jZXNzIjoibWF0aC9EaXZpZGVfeDRnYzgiLCJwb3J0IjoicXVvdGllbnQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2VreGlqIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfZWt4aWoiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoibWF0aC9EaXZpZGVfeDRnYzgiLCJwb3J0IjoiY2xlYXIifSwibWV0YWRhdGEiOnsicm91dGUiOjB9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9SZXBlYXRBc3luY19jNTZ0aiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJBbGxUb3VjaGVkRWxlbWVudHNfaTN4NzQiLCJwb3J0IjoiY2xlYXIifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZUFuZ2xlX2R3amoiLCJwb3J0IjoiYW5nbGUifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0X2VwaDNkIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfZXBoM2QiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQW5nbGVfNDNxcG8iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9lcGgzZCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXN0dXJlQW5nbGVfZHdqaiIsInBvcnQiOiJjbGVhciJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MH19LHsic3JjIjp7InByb2Nlc3MiOiJtYXRoL1N1YnRyYWN0X2o1djIwIiwicG9ydCI6ImRpZmZlcmVuY2UifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0XzNlbGVwIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfM2VsZXAiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoibWF0aC9EaXZpZGVfeDRnYzgiLCJwb3J0IjoiZGl2aXNvciJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRNb3ZlRWxlbWVudF9pYWV4bSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJjb3JlL1NwbGl0XzhsM3l1IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfOGwzeXUiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQWxsVG91Y2hlZEVsZW1lbnRzX2kzeDc0IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfOGwzeXUiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQ3VycmVudEVsZW1lbnRfY3UwcTUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF8zZWxlcCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJEdXJhdGlvbl9xeWV2diIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL1NwbGl0XzNlbGVwIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Im1hdGgvU3VidHJhY3RfajV2MjAiLCJwb3J0IjoiY2xlYXIifSwibWV0YWRhdGEiOnsicm91dGUiOjB9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZUVuZF9xcXg4byIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRFbmRpbmdQb2ludF9kZXR0YiIsInBvcnQiOiJldmVudCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJvYmplY3RzL0NhbGxNZXRob2RfcnRmZDIiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoibWF0aC9TdWJ0cmFjdF9qNXYyMCIsInBvcnQiOiJzdWJ0cmFoZW5kIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfNGRzMWgiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9NZXJnZV82c28iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9NZXJnZV82c28iLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU3RhcnRQb2ludF91OGludCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJpbnRlcmFjdGlvbi9SZWFkQ29vcmRpbmF0ZXNfODJjYjEiLCJwb3J0IjoiY2xpZW50In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9NZXJnZV82c28iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZVN0YXJ0X3I4dnI1IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImludGVyYWN0aW9uL1JlYWRDb29yZGluYXRlc184MmNiMSIsInBvcnQiOiJldmVudCJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXRFbmRFbGVtZW50X3NsYnA5IiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvRHJvcF9zYTh6NSIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXN0dXJlU3RhcnRfcjh2cjUiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9NZXJnZV9scXhsbCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJjb3JlL01lcmdlX2xxeGxsIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldFN0YXJ0RWxlbWVudF93N202NCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJncm91cHMvU2VuZEJ5R3JvdXBfejA2a2siLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiY29yZS9NZXJnZV9scXhsbCIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJncm91cHMvU2VuZEJ5R3JvdXBfOHlhaiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJvYmplY3RzL0NhbGxNZXRob2RfcnRmZDIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3RhcnREYXRlX3N3Ynd1IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Imdyb3Vwcy9TZW5kQnlHcm91cF84eWFqIiwicG9ydCI6ImRhdGEifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2VzdHVyZVN0YXJ0X3I4dnI1IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNldFN0YXJ0X3FsNTFjIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6Ikdlc3R1cmVNb3ZlX2h5NDZzIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6Imdyb3Vwcy9TZW5kQnlHcm91cF84eWFqIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJkYXRhIjoidGFyZ2V0IiwidGd0Ijp7InByb2Nlc3MiOiJHZXRNb3ZlRWxlbWVudF9pYWV4bSIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoidGFyZ2V0IiwidGd0Ijp7InByb2Nlc3MiOiJHZXRTdGFydEVsZW1lbnRfdzdtNjQiLCJwb3J0Ijoia2V5In19LHsiZGF0YSI6Im5vdyIsInRndCI6eyJwcm9jZXNzIjoiU2V0U3RhcnRfcWw1MWMiLCJwb3J0Ijoic3RyaW5nIn19LHsiZGF0YSI6ImdldFRpbWUiLCJ0Z3QiOnsicHJvY2VzcyI6Im9iamVjdHMvQ2FsbE1ldGhvZF9pdTdrMiIsInBvcnQiOiJtZXRob2QifX0seyJkYXRhIjoiZ2V0VGltZSIsInRndCI6eyJwcm9jZXNzIjoib2JqZWN0cy9DYWxsTWV0aG9kX3J0ZmQyIiwicG9ydCI6Im1ldGhvZCJ9fSx7ImRhdGEiOiJ0YXJnZXQiLCJ0Z3QiOnsicHJvY2VzcyI6IkdldEVuZEVsZW1lbnRfc2xicDkiLCJwb3J0Ijoia2V5In19LHsiZGF0YSI6Im5vdyIsInRndCI6eyJwcm9jZXNzIjoic3RyaW5ncy9TZW5kU3RyaW5nX3Q2Z2J5IiwicG9ydCI6InN0cmluZyJ9fV19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvTGlzdGVuUG9pbnRlci5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7InByb3BlcnRpZXMiOnsibmFtZSI6Ikxpc3RlblBvaW50ZXIifSwiZXhwb3J0cyI6W3sicHJpdmF0ZSI6Ikxpc3Rlbl8xMDI1Zy5lbGVtZW50IiwicHVibGljIjoiZWxlbWVudCJ9LHsicHJpdmF0ZSI6Ikxpc3Rlbl8xMDI1Zy5jYXB0dXJlIiwicHVibGljIjoiY2FwdHVyZSJ9LHsicHJpdmF0ZSI6IlN0YXJ0RXZlbnRfeDhpdHYub3V0IiwicHVibGljIjoic3RhcnQifSx7InByaXZhdGUiOiJNb3ZlRXZlbnRfcWEzcHAub3V0IiwicHVibGljIjoibW92ZSJ9LHsicHJpdmF0ZSI6IkVuZEV2ZW50X2htd3A5Lm91dCIsInB1YmxpYyI6ImVuZCJ9XSwicHJvY2Vzc2VzIjp7Ikxpc3Rlbl8xMDI1ZyI6eyJjb21wb25lbnQiOiJpbnRlcmFjdGlvbi9MaXN0ZW5Qb2ludGVyIiwibWV0YWRhdGEiOnsieCI6NTAwLCJ5IjotNjUsImxhYmVsIjoiTGlzdGVuIn19LCJFbmRfdm9tMjIiOnsiY29tcG9uZW50IjoiY29yZS9NZXJnZSIsIm1ldGFkYXRhIjp7IngiOjg0MywieSI6OTYsImxhYmVsIjoiRW5kIn19LCJTdGFydF84NnUzZyI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6ODQ4LCJ5IjotMTU3LCJsYWJlbCI6IlN0YXJ0In19LCJNb3ZlT25seUR1cmluZ0dlc3R1cmVfOTg2enQiOnsiY29tcG9uZW50IjoiZmxvdy9HYXRlIiwibWV0YWRhdGEiOnsieCI6MTEwNiwieSI6LTQwLCJsYWJlbCI6Ik1vdmVPbmx5RHVyaW5nR2VzdHVyZSJ9fSwiRW5kT25seU9uY2VfdmV4Zm4iOnsiY29tcG9uZW50IjoiZmxvdy9HYXRlIiwibWV0YWRhdGEiOnsieCI6MTEwNywieSI6NzUsImxhYmVsIjoiRW5kT25seU9uY2UifX0sIlNwbGl0RW5kX2NuZnk2Ijp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjoxNDA3LCJ5Ijo3OSwibGFiZWwiOiJTcGxpdEVuZCJ9fSwiQXN5bmNocm9uaXplX3gwaHFtIjp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0QXN5bmMiLCJtZXRhZGF0YSI6eyJ4IjoxNDA0LCJ5IjoxNzEuMzMzMzMzMzMzMzMzMzEsImxhYmVsIjoiQXN5bmNocm9uaXplIn19LCJTdGFydEV2ZW50X3g4aXR2Ijp7ImNvbXBvbmVudCI6ImNvcmUvUmVwZWF0IiwibWV0YWRhdGEiOnsieCI6MTY2MiwieSI6LTE2MiwibGFiZWwiOiJTdGFydEV2ZW50In19LCJNb3ZlRXZlbnRfcWEzcHAiOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjoxNjYyLCJ5IjotMzUsImxhYmVsIjoiTW92ZUV2ZW50In19LCJFbmRFdmVudF9obXdwOSI6eyJjb21wb25lbnQiOiJjb3JlL1JlcGVhdCIsIm1ldGFkYXRhIjp7IngiOjE2NTksInkiOjc1LCJsYWJlbCI6IkVuZEV2ZW50In19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuXzEwMjVnIiwicG9ydCI6ImxlYXZlIn0sInRndCI6eyJwcm9jZXNzIjoiRW5kX3ZvbTIyIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbl8xMDI1ZyIsInBvcnQiOiJjYW5jZWwifSwidGd0Ijp7InByb2Nlc3MiOiJFbmRfdm9tMjIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuXzEwMjVnIiwicG9ydCI6InVwIn0sInRndCI6eyJwcm9jZXNzIjoiRW5kX3ZvbTIyIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6Ikxpc3Rlbl8xMDI1ZyIsInBvcnQiOiJkb3duIn0sInRndCI6eyJwcm9jZXNzIjoiU3RhcnRfODZ1M2ciLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiTGlzdGVuXzEwMjVnIiwicG9ydCI6Im1vdmUifSwidGd0Ijp7InByb2Nlc3MiOiJNb3ZlT25seUR1cmluZ0dlc3R1cmVfOTg2enQiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjN9fSx7InNyYyI6eyJwcm9jZXNzIjoiRW5kX3ZvbTIyIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkVuZE9ubHlPbmNlX3ZleGZuIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkVuZE9ubHlPbmNlX3ZleGZuIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0RW5kX2NuZnk2IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IlN0YXJ0Xzg2dTNnIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkVuZE9ubHlPbmNlX3ZleGZuIiwicG9ydCI6Im9wZW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjV9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRFbmRfY25meTYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiQXN5bmNocm9uaXplX3gwaHFtIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkFzeW5jaHJvbml6ZV94MGhxbSIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJFbmRPbmx5T25jZV92ZXhmbiIsInBvcnQiOiJjbG9zZSJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJTdGFydF84NnUzZyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJNb3ZlT25seUR1cmluZ0dlc3R1cmVfOTg2enQiLCJwb3J0Ijoib3BlbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdEVuZF9jbmZ5NiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJNb3ZlT25seUR1cmluZ0dlc3R1cmVfOTg2enQiLCJwb3J0IjoiY2xvc2UifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3RhcnRfODZ1M2ciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU3RhcnRFdmVudF94OGl0diIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6NX19LHsic3JjIjp7InByb2Nlc3MiOiJNb3ZlT25seUR1cmluZ0dlc3R1cmVfOTg2enQiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiTW92ZUV2ZW50X3FhM3BwIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjozfX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0RW5kX2NuZnk2IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkVuZEV2ZW50X2htd3A5IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX1dfScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdENhcmRpbmFsRGlyZWN0aW9uLmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sicHJvcGVydGllcyI6eyJlbnZpcm9ubWVudCI6eyJydW50aW1lIjoiaHRtbCIsInNyYyI6Ii4vcHJldmlldy9pZnJhbWUuaHRtbCIsIndpZHRoIjoiMzAwIiwiaGVpZ2h0IjoiMzAwIiwiY29udGVudCI6IiJ9LCJuYW1lIjoiRGV0ZWN0Q2FyZGluYWxEaXJlY3Rpb24ifSwiZXhwb3J0cyI6W3sicHJpdmF0ZSI6InJlY2VpdmVnZXN0dXJlX3RoYm13LmluIiwicHVibGljIjoiaW4ifSx7InByaXZhdGUiOiJzZW5kZWFzdF8yMThxeC5vdXQiLCJwdWJsaWMiOiJlYXN0In0seyJwcml2YXRlIjoic2VuZHNvdXRoX3d4MmI1Lm91dCIsInB1YmxpYyI6InNvdXRoIn0seyJwcml2YXRlIjoic2VuZHdlc3Rfcmtkejkub3V0IiwicHVibGljIjoid2VzdCJ9LHsicHJpdmF0ZSI6InNlbmRub3J0aF9jNTYyay5vdXQiLCJwdWJsaWMiOiJub3J0aCJ9LHsicHJpdmF0ZSI6ImZhaWxfNWIwcW8ub3V0IiwicHVibGljIjoiZmFpbCJ9LHsicHJpdmF0ZSI6ImNoZWNrbWF4ZGlzdGFuY2VfY2VicTUuY29tcGFyaXNvbiIsInB1YmxpYyI6Im1heGRpc3RhbmNlIn1dLCJwcm9jZXNzZXMiOnsiUmVjZWl2ZUdlc3R1cmVfdGhibXciOnsiY29tcG9uZW50IjoiY29yZS9SZXBlYXQiLCJtZXRhZGF0YSI6eyJ4IjotMjk0LCJ5IjoxMzQsImxhYmVsIjoiUmVjZWl2ZUdlc3R1cmUifX0sIlNwbGl0R2VzdHVyZV9ka2s4NyI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6LTI5NiwieSI6MjE0LCJsYWJlbCI6IlNwbGl0R2VzdHVyZSJ9fSwiU2VuZE5vcnRoX2M1NjJrIjp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjE3MzMsInkiOjQ0NywibGFiZWwiOiJTZW5kTm9ydGgifX0sIlNlbmRFYXN0XzIxOHF4Ijp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjE3MjEsInkiOi01LCJsYWJlbCI6IlNlbmRFYXN0In19LCJSb3V0ZURpcmVjdGlvbl9hcGdzcCI6eyJjb21wb25lbnQiOiJnZXN0dXJlcy9DYXJkaW5hbFJvdXRlciIsIm1ldGFkYXRhIjp7IngiOjE0NjksInkiOjE5NSwibGFiZWwiOiJSb3V0ZURpcmVjdGlvbiJ9fSwiR2V0SW5kaXZpZHVhbFBvaW50ZXJfb3pqZmEiOnsiY29tcG9uZW50Ijoib2JqZWN0cy9TcGxpdE9iamVjdCIsIm1ldGFkYXRhIjp7IngiOi04NiwieSI6MjE0LCJsYWJlbCI6IkdldEluZGl2aWR1YWxQb2ludGVyIn19LCJHZXRTdGFydFBvaW50X2JocmwyIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6ODc5LCJ5IjoxNTcsImxhYmVsIjoiR2V0U3RhcnRQb2ludCJ9fSwiR2V0Q3VycmVudFBvaW50X3J3d3QwIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6ODc3LCJ5IjoyNTksImxhYmVsIjoiR2V0Q3VycmVudFBvaW50In19LCJHZXRHZXN0dXJlQW5nbGVfZGpwcjYiOnsiY29tcG9uZW50IjoibWF0aC9DYWxjdWxhdGVBbmdsZSIsIm1ldGFkYXRhIjp7IngiOjEwODMsInkiOjE5MywibGFiZWwiOiJHZXRHZXN0dXJlQW5nbGUifX0sIlNlbmRXZXN0X3JrZHo5Ijp7ImNvbXBvbmVudCI6InN0cmluZ3MvU2VuZFN0cmluZyIsIm1ldGFkYXRhIjp7IngiOjE3MzAuODMzMzMzMzMzMzMzMywieSI6MzQ4LjMzMzMzMzMzMzMzMzM3LCJsYWJlbCI6IlNlbmRXZXN0In19LCJTZW5kU291dGhfd3gyYjUiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6MTcyMS44MzMzMzMzMzMzMzMzLCJ5IjoxMDcuMzMzMzMzMzMzMzMzMzcsImxhYmVsIjoiU2VuZFNvdXRoIn19LCJGYWlsXzViMHFvIjp7ImNvbXBvbmVudCI6ImNvcmUvTWVyZ2UiLCJtZXRhZGF0YSI6eyJ4IjoxNzM4LjE2NjY2NjY2NjY2NjUsInkiOjU2NCwibGFiZWwiOiJGYWlsIn19LCJjb3JlL1NwbGl0X24zcWlmIjp7ImNvbXBvbmVudCI6ImNvcmUvU3BsaXQiLCJtZXRhZGF0YSI6eyJ4IjoxMjc2Ljk5OTk5OTk5OTk5OSwieSI6MTkzLjY2NjY2NjY2NjY2NjY5LCJsYWJlbCI6ImNvcmUvU3BsaXQifX0sIkdldERpc3RhbmNlX293eXliIjp7ImNvbXBvbmVudCI6Im9iamVjdHMvR2V0T2JqZWN0S2V5IiwibWV0YWRhdGEiOnsieCI6MzA0LCJ5IjoyMTYsImxhYmVsIjoiR2V0RGlzdGFuY2UifX0sIkNoZWNrTWF4RGlzdGFuY2VfY2VicTUiOnsiY29tcG9uZW50IjoibWF0aC9Db21wYXJlIiwibWV0YWRhdGEiOnsieCI6NDk5LCJ5IjoyMTQsImxhYmVsIjoiQ2hlY2tNYXhEaXN0YW5jZSJ9fSwiU2VuZFBvaW50ZXJfdjBlcXYiOnsiY29tcG9uZW50Ijoic3RyaW5ncy9TZW5kU3RyaW5nIiwibWV0YWRhdGEiOnsieCI6Njg4LCJ5IjoyMTQsImxhYmVsIjoiU2VuZFBvaW50ZXIifX0sIlNwbGl0UG9pbnRlcl92MHU4ayI6eyJjb21wb25lbnQiOiJjb3JlL1NwbGl0IiwibWV0YWRhdGEiOnsieCI6MTA5LjAwMDAwMDAwMDAwMDA2LCJ5IjoyMTUuMzMzMzMzMzMzMzMzMzEsImxhYmVsIjoiU3BsaXRQb2ludGVyIn19fSwiY29ubmVjdGlvbnMiOlt7InNyYyI6eyJwcm9jZXNzIjoiR2V0U3RhcnRQb2ludF9iaHJsMiIsInBvcnQiOiJvYmplY3QifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRDdXJyZW50UG9pbnRfcnd3dDAiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0U3RhcnRQb2ludF9iaHJsMiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRHZXN0dXJlQW5nbGVfZGpwcjYiLCJwb3J0Ijoib3JpZ2luIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IkdldEN1cnJlbnRQb2ludF9yd3d0MCIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXRHZXN0dXJlQW5nbGVfZGpwcjYiLCJwb3J0IjoiZGVzdGluYXRpb24ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiU3BsaXRHZXN0dXJlX2Rrazg3IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRFYXN0XzIxOHF4IiwicG9ydCI6InN0cmluZyJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdEdlc3R1cmVfZGtrODciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFdlc3RfcmtkejkiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0R2VzdHVyZV9ka2s4NyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kTm9ydGhfYzU2MmsiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0R2VzdHVyZV9ka2s4NyIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kU291dGhfd3gyYjUiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlJvdXRlRGlyZWN0aW9uX2FwZ3NwIiwicG9ydCI6Im4ifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kTm9ydGhfYzU2MmsiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjR9fSx7InNyYyI6eyJwcm9jZXNzIjoiUm91dGVEaXJlY3Rpb25fYXBnc3AiLCJwb3J0IjoidyJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRXZXN0X3JrZHo5IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo1fX0seyJzcmMiOnsicHJvY2VzcyI6IlJvdXRlRGlyZWN0aW9uX2FwZ3NwIiwicG9ydCI6InMifSwidGd0Ijp7InByb2Nlc3MiOiJTZW5kU291dGhfd3gyYjUiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjZ9fSx7InNyYyI6eyJwcm9jZXNzIjoiUm91dGVEaXJlY3Rpb25fYXBnc3AiLCJwb3J0IjoiZSJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNlbmRFYXN0XzIxOHF4IiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo3fX0seyJzcmMiOnsicHJvY2VzcyI6IlJlY2VpdmVHZXN0dXJlX3RoYm13IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0R2VzdHVyZV9ka2s4NyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdEdlc3R1cmVfZGtrODciLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0SW5kaXZpZHVhbFBvaW50ZXJfb3pqZmEiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0Q3VycmVudFBvaW50X3J3d3QwIiwicG9ydCI6Im1pc3NlZCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkZhaWxfNWIwcW8iLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjF9fSx7InNyYyI6eyJwcm9jZXNzIjoiR2V0U3RhcnRQb2ludF9iaHJsMiIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsXzViMHFvIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldEdlc3R1cmVBbmdsZV9kanByNiIsInBvcnQiOiJhbmdsZSJ9LCJ0Z3QiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfbjNxaWYiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiY29yZS9TcGxpdF9uM3FpZiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJSb3V0ZURpcmVjdGlvbl9hcGdzcCIsInBvcnQiOiJkZWdyZWVzIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6ImNvcmUvU3BsaXRfbjNxaWYiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiR2V0R2VzdHVyZUFuZ2xlX2RqcHI2IiwicG9ydCI6ImNsZWFyIn0sIm1ldGFkYXRhIjp7InJvdXRlIjowfX0seyJzcmMiOnsicHJvY2VzcyI6IkdldEluZGl2aWR1YWxQb2ludGVyX296amZhIiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IlNwbGl0UG9pbnRlcl92MHU4ayIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6OX19LHsic3JjIjp7InByb2Nlc3MiOiJTcGxpdFBvaW50ZXJfdjB1OGsiLCJwb3J0Ijoib3V0In0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFBvaW50ZXJfdjBlcXYiLCJwb3J0Ijoic3RyaW5nIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJzcmMiOnsicHJvY2VzcyI6IlNlbmRQb2ludGVyX3YwZXF2IiwicG9ydCI6Im91dCJ9LCJ0Z3QiOnsicHJvY2VzcyI6IkdldFN0YXJ0UG9pbnRfYmhybDIiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tNYXhEaXN0YW5jZV9jZWJxNSIsInBvcnQiOiJwYXNzIn0sInRndCI6eyJwcm9jZXNzIjoiU2VuZFBvaW50ZXJfdjBlcXYiLCJwb3J0IjoiaW4ifSwibWV0YWRhdGEiOnsicm91dGUiOjl9fSx7InNyYyI6eyJwcm9jZXNzIjoiQ2hlY2tNYXhEaXN0YW5jZV9jZWJxNSIsInBvcnQiOiJmYWlsIn0sInRndCI6eyJwcm9jZXNzIjoiRmFpbF81YjBxbyIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MX19LHsic3JjIjp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9vd3l5YiIsInBvcnQiOiJtaXNzZWQifSwidGd0Ijp7InByb2Nlc3MiOiJGYWlsXzViMHFvIiwicG9ydCI6ImluIn0sIm1ldGFkYXRhIjp7InJvdXRlIjoxfX0seyJzcmMiOnsicHJvY2VzcyI6IlNwbGl0UG9pbnRlcl92MHU4ayIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9vd3l5YiIsInBvcnQiOiJpbiJ9LCJtZXRhZGF0YSI6eyJyb3V0ZSI6MH19LHsic3JjIjp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9vd3l5YiIsInBvcnQiOiJvdXQifSwidGd0Ijp7InByb2Nlc3MiOiJDaGVja01heERpc3RhbmNlX2NlYnE1IiwicG9ydCI6InZhbHVlIn0sIm1ldGFkYXRhIjp7InJvdXRlIjo5fX0seyJkYXRhIjoic3RhcnRwb2ludCIsInRndCI6eyJwcm9jZXNzIjoiR2V0U3RhcnRQb2ludF9iaHJsMiIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoibW92ZXBvaW50IiwidGd0Ijp7InByb2Nlc3MiOiJHZXRDdXJyZW50UG9pbnRfcnd3dDAiLCJwb3J0Ijoia2V5In19LHsiZGF0YSI6ImRpc3RhbmNlIiwidGd0Ijp7InByb2Nlc3MiOiJHZXREaXN0YW5jZV9vd3l5YiIsInBvcnQiOiJrZXkifX0seyJkYXRhIjoiPD0iLCJ0Z3QiOnsicHJvY2VzcyI6IkNoZWNrTWF4RGlzdGFuY2VfY2VicTUiLCJwb3J0Ijoib3BlcmF0b3IifX1dfScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ2VzdHVyZXMvY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvLWdlc3R1cmVzIiwiZGVzY3JpcHRpb24iOiJHZXN0dXJlIHJlY29nbml0aW9uIGNvbXBvbmVudHMgZm9yIE5vRmxvIiwiYXV0aG9yIjoiSGVucmkgQmVyZ2l1cyA8aGVucmkuYmVyZ2l1c0Bpa2kuZmk+IiwicmVwbyI6Im5vZmxvL25vZmxvLWdlc3R1cmVzIiwidmVyc2lvbiI6IjAuMS4wIiwia2V5d29yZHMiOltdLCJkZXBlbmRlbmNpZXMiOnsibm9mbG8vbm9mbG8iOiIqIiwibm9mbG8vbm9mbG8taW50ZXJhY3Rpb24iOiIqIiwibm9mbG8vbm9mbG8tbWF0aCI6IioiLCJub2Zsby9ub2Zsby1mbG93IjoiKiIsIm5vZmxvL25vZmxvLWdyb3VwcyI6IioiLCJub2Zsby9ub2Zsby1wYWNrZXRzIjoiKiIsIm5vZmxvL25vZmxvLW9iamVjdHMiOiIqIiwibm9mbG8vbm9mbG8tZG9tIjoiKiIsIm5vZmxvL25vZmxvLXN0cmluZ3MiOiIqIiwibm9mbG8vbm9mbG8tY29yZSI6IioifSwic2NyaXB0cyI6WyJjb21wb25lbnRzL0NhbGN1bGF0ZUNlbnRlci5jb2ZmZWUiLCJjb21wb25lbnRzL0NhbGN1bGF0ZVNjYWxlLmNvZmZlZSIsImNvbXBvbmVudHMvQ2FyZGluYWxSb3V0ZXIuY29mZmVlIiwiY29tcG9uZW50cy9EZWdyZWVzVG9DYXJkaW5hbC5jb2ZmZWUiLCJjb21wb25lbnRzL0RlZ3JlZXNUb0NvbXBhc3MuY29mZmVlIiwiY29tcG9uZW50cy9EZXRlY3RTY3JhdGNoLmNvZmZlZSIsImNvbXBvbmVudHMvRGV0ZWN0VGFyZ2V0LmNvZmZlZSIsImdyYXBocy9EZXRlY3REcmFnLmpzb24iLCJncmFwaHMvRGV0ZWN0U3dpcGUuanNvbiIsImdyYXBocy9EZXRlY3RQaW5jaC5qc29uIiwiZ3JhcGhzL0ZpbHRlckJ5VGFyZ2V0Lmpzb24iLCJncmFwaHMvR2VzdHVyZVRvT2JqZWN0Lmpzb24iLCJncmFwaHMvTGlzdGVuR2VzdHVyZXMuanNvbiIsImdyYXBocy9MaXN0ZW5Qb2ludGVyLmpzb24iLCJncmFwaHMvRGV0ZWN0Q2FyZGluYWxEaXJlY3Rpb24uanNvbiIsImluZGV4LmpzIl0sImpzb24iOlsiZ3JhcGhzL0RldGVjdERyYWcuanNvbiIsImdyYXBocy9EZXRlY3RTd2lwZS5qc29uIiwiZ3JhcGhzL0RldGVjdFBpbmNoLmpzb24iLCJncmFwaHMvRmlsdGVyQnlUYXJnZXQuanNvbiIsImdyYXBocy9HZXN0dXJlVG9PYmplY3QuanNvbiIsImdyYXBocy9MaXN0ZW5HZXN0dXJlcy5qc29uIiwiZ3JhcGhzL0xpc3RlblBvaW50ZXIuanNvbiIsImdyYXBocy9EZXRlY3RDYXJkaW5hbERpcmVjdGlvbi5qc29uIiwiY29tcG9uZW50Lmpzb24iXSwibm9mbG8iOnsiaWNvbiI6ImhhbmQtcmlnaHQiLCJjb21wb25lbnRzIjp7IkNhbGN1bGF0ZUNlbnRlciI6ImNvbXBvbmVudHMvQ2FsY3VsYXRlQ2VudGVyLmNvZmZlZSIsIkNhbGN1bGF0ZVNjYWxlIjoiY29tcG9uZW50cy9DYWxjdWxhdGVTY2FsZS5jb2ZmZWUiLCJDYXJkaW5hbFJvdXRlciI6ImNvbXBvbmVudHMvQ2FyZGluYWxSb3V0ZXIuY29mZmVlIiwiRGVncmVlc1RvQ2FyZGluYWwiOiJjb21wb25lbnRzL0RlZ3JlZXNUb0NhcmRpbmFsLmNvZmZlZSIsIkRlZ3JlZXNUb0NvbXBhc3MiOiJjb21wb25lbnRzL0RlZ3JlZXNUb0NvbXBhc3MuY29mZmVlIiwiRGV0ZWN0U2NyYXRjaCI6ImNvbXBvbmVudHMvRGV0ZWN0U2NyYXRjaC5jb2ZmZWUiLCJEZXRlY3RUYXJnZXQiOiJjb21wb25lbnRzL0RldGVjdFRhcmdldC5jb2ZmZWUifSwiZ3JhcGhzIjp7IkRldGVjdERyYWciOiJncmFwaHMvRGV0ZWN0RHJhZy5qc29uIiwiRGV0ZWN0U3dpcGUiOiJncmFwaHMvRGV0ZWN0U3dpcGUuanNvbiIsIkRldGVjdFBpbmNoIjoiZ3JhcGhzL0RldGVjdFBpbmNoLmpzb24iLCJGaWx0ZXJCeVRhcmdldCI6ImdyYXBocy9GaWx0ZXJCeVRhcmdldC5qc29uIiwiR2VzdHVyZVRvT2JqZWN0IjoiZ3JhcGhzL0dlc3R1cmVUb09iamVjdC5qc29uIiwiTGlzdGVuR2VzdHVyZXMiOiJncmFwaHMvTGlzdGVuR2VzdHVyZXMuanNvbiIsIkxpc3RlblBvaW50ZXIiOiJncmFwaHMvTGlzdGVuUG9pbnRlci5qc29uIiwiRGV0ZWN0Q2FyZGluYWxEaXJlY3Rpb24iOiJncmFwaHMvRGV0ZWN0Q2FyZGluYWxEaXJlY3Rpb24uanNvbiJ9fX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvQ2FsY3VsYXRlQ2VudGVyLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIENhbGN1bGF0ZUNlbnRlciwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpDYWxjdWxhdGVDZW50ZXIgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENhbGN1bGF0ZUNlbnRlciwgX3N1cGVyKTsKCiAgQ2FsY3VsYXRlQ2VudGVyLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdDYWxjdWxhdGUgdGhlIGNlbnRlciBwb2ludCBmb3IgYSBnZXN0dXJlJzsKCiAgZnVuY3Rpb24gQ2FsY3VsYXRlQ2VudGVyKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgY2VudGVyOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihnZXN0dXJlKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5jZW50ZXIuc2VuZChfdGhpcy5jYWxjdWxhdGVDZW50ZXIoZ2VzdHVyZSkpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmNlbnRlci5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIENhbGN1bGF0ZUNlbnRlci5wcm90b3R5cGUuY2FsY3VsYXRlQ2VudGVyID0gZnVuY3Rpb24oZ2VzdHVyZSkgewogICAgdmFyIGNlbnRlciwgaWQsIHN0YXJ0WCwgc3RhcnRZLCB0b3VjaDsKICAgIGlmIChPYmplY3Qua2V5cyhnZXN0dXJlKS5sZW5ndGggPT09IDEpIHsKICAgICAgcmV0dXJuIGdlc3R1cmUuc3RhcnRwb2ludDsKICAgIH0KICAgIHN0YXJ0WCA9IFtdOwogICAgc3RhcnRZID0gW107CiAgICBmb3IgKGlkIGluIGdlc3R1cmUpIHsKICAgICAgdG91Y2ggPSBnZXN0dXJlW2lkXTsKICAgICAgaWYgKCF0b3VjaCkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmICghdG91Y2guc3RhcnRwb2ludCkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIHN0YXJ0WC5wdXNoKHRvdWNoLnN0YXJ0cG9pbnQueCk7CiAgICAgIHN0YXJ0WS5wdXNoKHRvdWNoLnN0YXJ0cG9pbnQueSk7CiAgICB9CiAgICByZXR1cm4gY2VudGVyID0gewogICAgICB4OiBNYXRoLm1pbi5hcHBseShNYXRoLCBzdGFydFgpICsgTWF0aC5tYXguYXBwbHkoTWF0aCwgc3RhcnRYKSAvIDIsCiAgICAgIHk6IE1hdGgubWluLmFwcGx5KE1hdGgsIHN0YXJ0WSkgKyBNYXRoLm1heC5hcHBseShNYXRoLCBzdGFydFkpIC8gMgogICAgfTsKICB9OwoKICByZXR1cm4gQ2FsY3VsYXRlQ2VudGVyOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDYWxjdWxhdGVDZW50ZXI7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZ2VzdHVyZXMvY29tcG9uZW50cy9DYWxjdWxhdGVTY2FsZS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDYWxjdWxhdGVTY2FsZSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpDYWxjdWxhdGVTY2FsZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQ2FsY3VsYXRlU2NhbGUsIF9zdXBlcik7CgogIENhbGN1bGF0ZVNjYWxlLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdDYWxjdWxhdGUgdGhlIHNjYWxlIGJhc2VkIG9uIGdlc3R1cmFsIG1vdmVtZW50JzsKCiAgZnVuY3Rpb24gQ2FsY3VsYXRlU2NhbGUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBzY2FsZTogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZ2VzdHVyZSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuc2NhbGUuc2VuZChfdGhpcy5jYWxjdWxhdGVTY2FsZShnZXN0dXJlKSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuc2NhbGUuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBDYWxjdWxhdGVTY2FsZS5wcm90b3R5cGUuY2FsY3VsYXRlU2NhbGUgPSBmdW5jdGlvbihnZXN0dXJlKSB7CiAgICB2YXIgaWQsIG1vdmVQb2ludHMsIHNjYWxlLCBzdGFydFBvaW50cywgdG91Y2g7CiAgICBpZiAoT2JqZWN0LmtleXMoZ2VzdHVyZSkubGVuZ3RoID09PSAxKSB7CiAgICAgIHJldHVybiAxOwogICAgfQogICAgc3RhcnRQb2ludHMgPSBbXTsKICAgIG1vdmVQb2ludHMgPSBbXTsKICAgIGZvciAoaWQgaW4gZ2VzdHVyZSkgewogICAgICB0b3VjaCA9IGdlc3R1cmVbaWRdOwogICAgICBpZiAodG91Y2guc3RhcnRwb2ludCkgewogICAgICAgIHN0YXJ0UG9pbnRzLnB1c2godG91Y2guc3RhcnRwb2ludCk7CiAgICAgIH0KICAgICAgaWYgKHRvdWNoLm1vdmVwb2ludCkgewogICAgICAgIG1vdmVQb2ludHMucHVzaCh0b3VjaC5tb3ZlcG9pbnQpOwogICAgICB9CiAgICB9CiAgICBpZiAoc3RhcnRQb2ludHMubGVuZ3RoIDwgMiB8fCBtb3ZlUG9pbnRzLmxlbmd0aCA8IDIpIHsKICAgICAgcmV0dXJuIDE7CiAgICB9CiAgICBzY2FsZSA9IHRoaXMuY2FsY3VsYXRlRGlzdGFuY2UobW92ZVBvaW50c1swXSwgbW92ZVBvaW50c1sxXSkgLyB0aGlzLmNhbGN1bGF0ZURpc3RhbmNlKHN0YXJ0UG9pbnRzWzBdLCBzdGFydFBvaW50c1sxXSk7CiAgICByZXR1cm4gc2NhbGU7CiAgfTsKCiAgQ2FsY3VsYXRlU2NhbGUucHJvdG90eXBlLmNhbGN1bGF0ZURpc3RhbmNlID0gZnVuY3Rpb24ob3JpZ2luLCBkZXN0aW5hdGlvbikgewogICAgdmFyIGRlbHRhWCwgZGVsdGFZLCBkaXN0YW5jZTsKICAgIGRlbHRhWCA9IGRlc3RpbmF0aW9uLnggLSBvcmlnaW4ueDsKICAgIGRlbHRhWSA9IGRlc3RpbmF0aW9uLnkgLSBvcmlnaW4ueTsKICAgIG9yaWdpbiA9IG51bGw7CiAgICBkZXN0aW5hdGlvbiA9IG51bGw7CiAgICBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhkZWx0YVgsIDIpICsgTWF0aC5wb3coZGVsdGFZLCAyKSk7CiAgICByZXR1cm4gZGlzdGFuY2U7CiAgfTsKCiAgcmV0dXJuIENhbGN1bGF0ZVNjYWxlOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDYWxjdWxhdGVTY2FsZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0NhcmRpbmFsUm91dGVyLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIENhcmRpbmFsUm91dGVyLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkNhcmRpbmFsUm91dGVyID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhDYXJkaW5hbFJvdXRlciwgX3N1cGVyKTsKCiAgQ2FyZGluYWxSb3V0ZXIucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1JvdXRlIHZhbHVlcyBiYXNlZCBvbiB0aGVpciBjYXJkaW5hbCBkaXJlY3Rpb25zJzsKCiAgQ2FyZGluYWxSb3V0ZXIucHJvdG90eXBlLmljb24gPSAnY29tcGFzcyc7CgogIGZ1bmN0aW9uIENhcmRpbmFsUm91dGVyKCkgewogICAgdmFyIGhlYWRpbmdzLAogICAgICBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIGRlZ3JlZXM6IG5ldyBub2Zsby5Qb3J0KCdudW1iZXInKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIGU6IG5ldyBub2Zsby5Qb3J0KCdudW1iZXInKSwKICAgICAgczogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpLAogICAgICB3OiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyksCiAgICAgIG46IG5ldyBub2Zsby5Qb3J0KCdudW1iZXInKQogICAgfTsKICAgIGhlYWRpbmdzID0gWydlJywgJ3MnLCAndycsICduJ107CiAgICB0aGlzLmluUG9ydHMuZGVncmVlcy5vbignZGF0YScsIGZ1bmN0aW9uKGRlZ3JlZXMpIHsKICAgICAgdmFyIGhlYWRpbmcsIGluZGV4OwogICAgICBpbmRleCA9IGRlZ3JlZXMgLSA0NTsKICAgICAgaWYgKGluZGV4IDwgMCkgewogICAgICAgIGluZGV4ID0gaW5kZXggKyAzNjA7CiAgICAgIH0KICAgICAgaW5kZXggPSBwYXJzZUludChpbmRleCAvIDkwKTsKICAgICAgaGVhZGluZyA9IGhlYWRpbmdzW2luZGV4XTsKICAgICAgaWYgKCFfdGhpcy5vdXRQb3J0c1toZWFkaW5nXS5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgX3RoaXMub3V0UG9ydHNbaGVhZGluZ10uc2VuZChkZWdyZWVzKTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzW2hlYWRpbmddLmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIENhcmRpbmFsUm91dGVyOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDYXJkaW5hbFJvdXRlcjsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RlZ3JlZXNUb0NhcmRpbmFsLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIERlZ3JlZXNUb0NhcmRpbmFsLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkRlZ3JlZXNUb0NhcmRpbmFsID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhEZWdyZWVzVG9DYXJkaW5hbCwgX3N1cGVyKTsKCiAgRGVncmVlc1RvQ2FyZGluYWwucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NvbnZlcnQgYSBoZWFkaW5nIGluIGRlZ3JlZXMgdG8gYSBjYXJkaW5hbCBkaXJlY3Rpb24sIGUuZy4gTiwgUyc7CgogIERlZ3JlZXNUb0NhcmRpbmFsLnByb3RvdHlwZS5pY29uID0gJ2NvbXBhc3MnOwoKICBmdW5jdGlvbiBEZWdyZWVzVG9DYXJkaW5hbCgpIHsKICAgIHZhciBoZWFkaW5ncywKICAgICAgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBkZWdyZWVzOiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBoZWFkaW5nOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICBoZWFkaW5ncyA9IFsnRScsICdTJywgJ1cnLCAnTiddOwogICAgdGhpcy5pblBvcnRzLmRlZ3JlZXMub24oJ2RhdGEnLCBmdW5jdGlvbihkZWdyZWVzKSB7CiAgICAgIHZhciBpbmRleDsKICAgICAgaW5kZXggPSBkZWdyZWVzIC0gNDU7CiAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICBpbmRleCA9IGluZGV4ICsgMzYwOwogICAgICB9CiAgICAgIGluZGV4ID0gcGFyc2VJbnQoaW5kZXggLyA5MCk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5oZWFkaW5nLnNlbmQoaGVhZGluZ3NbaW5kZXhdKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmRlZ3JlZXMub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmhlYWRpbmcuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gRGVncmVlc1RvQ2FyZGluYWw7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IERlZ3JlZXNUb0NhcmRpbmFsOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvRGVncmVlc1RvQ29tcGFzcy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBEZWdyZWVzVG9Db21wYXNzLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkRlZ3JlZXNUb0NvbXBhc3MgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKERlZ3JlZXNUb0NvbXBhc3MsIF9zdXBlcik7CgogIERlZ3JlZXNUb0NvbXBhc3MucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NvbnZlcnQgYSBoZWFkaW5nIGluIGRlZ3JlZXMgdG8gYSBjb21wYXNzIGRpcmVjdGlvbiwgZS5nLiBOLCBTVyc7CgogIERlZ3JlZXNUb0NvbXBhc3MucHJvdG90eXBlLmljb24gPSAnY29tcGFzcyc7CgogIGZ1bmN0aW9uIERlZ3JlZXNUb0NvbXBhc3MoKSB7CiAgICB2YXIgaGVhZGluZ3MsCiAgICAgIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZGVncmVlczogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgaGVhZGluZzogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgaGVhZGluZ3MgPSBbJ05FJywgJ0UnLCAnU0UnLCAnUycsICdTVycsICdXJywgJ05XJywgJ04nXTsKICAgIHRoaXMuaW5Qb3J0cy5kZWdyZWVzLm9uKCdkYXRhJywgZnVuY3Rpb24oZGVncmVlcykgewogICAgICB2YXIgaW5kZXg7CiAgICAgIGluZGV4ID0gZGVncmVlcyAtIDIyLjU7CiAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICBpbmRleCA9IGluZGV4ICsgMzYwOwogICAgICB9CiAgICAgIGluZGV4ID0gcGFyc2VJbnQoaW5kZXggLyA0NSk7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5oZWFkaW5nLnNlbmQoaGVhZGluZ3NbaW5kZXhdKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmRlZ3JlZXMub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmhlYWRpbmcuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gRGVncmVlc1RvQ29tcGFzczsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRGVncmVlc1RvQ29tcGFzczsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RldGVjdFNjcmF0Y2guanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRGV0ZWN0U2NyYXRjaCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpEZXRlY3RTY3JhdGNoID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhEZXRlY3RTY3JhdGNoLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBEZXRlY3RTY3JhdGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMubWludHVybnMgPSAzOwogICAgdGhpcy5kaXN0YW5jZSA9IDIwOwogICAgdGhpcy5taW5TcGVlZCA9IDA7CiAgICB0aGlzLnByZXZQb2ludCA9IG51bGw7CiAgICB0aGlzLnByZXZBbmdsZSA9IG51bGw7CiAgICB0aGlzLnByZXZUaW1lID0gbnVsbDsKICAgIHRoaXMuc3BlZWRDaGVja2VkID0gZmFsc2U7CiAgICB0aGlzLnR1cm5zID0gMDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBkaXN0YW5jZTogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpLAogICAgICBzcGVlZDogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgcGFzczogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBmYWlsOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPiAxKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMuZmFpbC5zZW5kKGRhdGEpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuZGV0ZWN0KGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLm91dFBvcnRzLnBhc3MuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuZmFpbC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5kaXN0YW5jZS5vbignZGF0YScsIGZ1bmN0aW9uKGRpc3RhbmNlKSB7CiAgICAgIF90aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5zcGVlZC5vbignZGF0YScsIGZ1bmN0aW9uKG1pblNwZWVkKSB7CiAgICAgIF90aGlzLm1pblNwZWVkID0gbWluU3BlZWQ7CiAgICB9KTsKICB9CgogIERldGVjdFNjcmF0Y2gucHJvdG90eXBlLmRldGVjdCA9IGZ1bmN0aW9uKGdlc3R1cmUpIHsKICAgIHZhciBhbmdsZSwgZGlzdGFuY2UsIGVsYXBzZWQsIHNwZWVkLCB0aW1lLCB0b3VjaCwgdHVybjsKICAgIHRvdWNoID0gZ2VzdHVyZVtPYmplY3Qua2V5cyhnZXN0dXJlKVswXV07CiAgICBpZiAodG91Y2guZW5kcG9pbnQpIHsKICAgICAgdGhpcy5yZXNldCgpOwogICAgICB0aGlzLm91dFBvcnRzLmZhaWwuc2VuZChnZXN0dXJlKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCF0aGlzLnByZXZQb2ludCkgewogICAgICB0aGlzLnByZXZQb2ludCA9IHRvdWNoLnN0YXJ0cG9pbnQ7CiAgICAgIHRoaXMucHJldlRpbWUgPSBuZXcgRGF0ZTsKICAgICAgcmV0dXJuOwogICAgfQogICAgZGlzdGFuY2UgPSB0aGlzLmNhbGN1bGF0ZURpc3RhbmNlKHRoaXMucHJldlBvaW50LCB0b3VjaC5tb3ZlcG9pbnQpOwogICAgaWYgKGRpc3RhbmNlIDwgdGhpcy5kaXN0YW5jZSkgewogICAgICByZXR1cm47CiAgICB9CiAgICB0aW1lID0gbmV3IERhdGU7CiAgICBpZiAoIXRoaXMuc3BlZWRDaGVja2VkKSB7CiAgICAgIGVsYXBzZWQgPSB0aW1lLmdldFRpbWUoKSAtIHRoaXMucHJldlRpbWUuZ2V0VGltZSgpOwogICAgICBzcGVlZCA9IGRpc3RhbmNlIC8gZWxhcHNlZDsKICAgICAgaWYgKHNwZWVkIDwgdGhpcy5taW5TcGVlZCkgewogICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICB0aGlzLm91dFBvcnRzLmZhaWwuc2VuZChnZXN0dXJlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5zcGVlZENoZWNrZWQgPSB0cnVlOwogICAgfQogICAgYW5nbGUgPSB0aGlzLmNhbGN1bGF0ZUFuZ2xlKHRoaXMucHJldlBvaW50LCB0b3VjaC5tb3ZlcG9pbnQpOwogICAgaWYgKCF0aGlzLnByZXZBbmdsZSkgewogICAgICB0aGlzLnByZXZBbmdsZSA9IGFuZ2xlOwogICAgICByZXR1cm47CiAgICB9CiAgICB0dXJuID0gTWF0aC5hYnModGhpcy5hbmdsZUNoYW5nZSh0aGlzLnByZXZBbmdsZSwgYW5nbGUpKTsKICAgIHRoaXMucHJldlBvaW50ID0gdG91Y2gubW92ZXBvaW50OwogICAgdGhpcy5wcmV2QW5nbGUgPSBhbmdsZTsKICAgIGlmICghKHR1cm4gPiAxMzApKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMucHJldlRpbWUgPSB0aW1lOwogICAgdGhpcy50dXJucysrOwogICAgaWYgKHRoaXMudHVybnMgPj0gdGhpcy5taW50dXJucykgewogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHJldHVybiB0aGlzLm91dFBvcnRzLnBhc3Muc2VuZChnZXN0dXJlKTsKICAgIH0KICB9OwoKICBEZXRlY3RTY3JhdGNoLnByb3RvdHlwZS5jYWxjdWxhdGVEaXN0YW5jZSA9IGZ1bmN0aW9uKG9yaWdpbiwgZGVzdGluYXRpb24pIHsKICAgIHZhciBkZWx0YVgsIGRlbHRhWSwgZGlzdGFuY2U7CiAgICBkZWx0YVggPSBkZXN0aW5hdGlvbi54IC0gb3JpZ2luLng7CiAgICBkZWx0YVkgPSBkZXN0aW5hdGlvbi55IC0gb3JpZ2luLnk7CiAgICBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhkZWx0YVgsIDIpICsgTWF0aC5wb3coZGVsdGFZLCAyKSk7CiAgICByZXR1cm4gZGlzdGFuY2U7CiAgfTsKCiAgRGV0ZWN0U2NyYXRjaC5wcm90b3R5cGUuY2FsY3VsYXRlQW5nbGUgPSBmdW5jdGlvbihvcmlnaW4sIGRlc3RpbmF0aW9uKSB7CiAgICB2YXIgYW5nbGUsIGRlbHRhWCwgZGVsdGFZOwogICAgZGVsdGFYID0gZGVzdGluYXRpb24ueCAtIG9yaWdpbi54OwogICAgZGVsdGFZID0gZGVzdGluYXRpb24ueSAtIG9yaWdpbi55OwogICAgYW5nbGUgPSAoTWF0aC5hdGFuMihkZWx0YVksIGRlbHRhWCkgKiAxODAgLyBNYXRoLlBJKSArIDkwOwogICAgaWYgKGFuZ2xlIDwgMCkgewogICAgICBhbmdsZSA9IGFuZ2xlICsgMzYwOwogICAgfQogICAgcmV0dXJuIGFuZ2xlOwogIH07CgogIERldGVjdFNjcmF0Y2gucHJvdG90eXBlLmFuZ2xlQ2hhbmdlID0gZnVuY3Rpb24ocHJldmlvdXMsIGN1cnJlbnQpIHsKICAgIHZhciBkaWZmZXJlbmNlOwogICAgZGlmZmVyZW5jZSA9IGN1cnJlbnQgLSBwcmV2aW91czsKICAgIHdoaWxlIChkaWZmZXJlbmNlIDwgLTE4MCkgewogICAgICBkaWZmZXJlbmNlICs9IDM2MDsKICAgIH0KICAgIHdoaWxlIChkaWZmZXJlbmNlID4gMTgwKSB7CiAgICAgIGRpZmZlcmVuY2UgLT0gMzYwOwogICAgfQogICAgcmV0dXJuIGRpZmZlcmVuY2U7CiAgfTsKCiAgRGV0ZWN0U2NyYXRjaC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHsKICAgIHRoaXMudHVybnMgPSAwOwogICAgdGhpcy5wcmV2UG9pbnQgPSBudWxsOwogICAgdGhpcy5wcmV2QW5nbGUgPSBudWxsOwogICAgdGhpcy5wcmV2VGltZSA9IG51bGw7CiAgICByZXR1cm4gdGhpcy5zcGVlZENoZWNrZWQgPSBmYWxzZTsKICB9OwoKICByZXR1cm4gRGV0ZWN0U2NyYXRjaDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRGV0ZWN0U2NyYXRjaDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RldGVjdFRhcmdldC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBEZXRlY3RUYXJnZXQsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKRGV0ZWN0VGFyZ2V0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhEZXRlY3RUYXJnZXQsIF9zdXBlcik7CgogIERldGVjdFRhcmdldC5wcm90b3R5cGUuZGVzY3JpYmUgPSAnVmVyaWZ5IHRoYXQgdGhlIGdlc3R1cmUgdGFyZ2V0IGhhcyB0aGUgcmlnaHQgcHJvcGVydGllcyc7CgogIGZ1bmN0aW9uIERldGVjdFRhcmdldCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnRhcmdldCA9IG51bGw7CiAgICB0aGlzLmtleSA9ICdjdXJyZW50JzsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBrZXk6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKSwKICAgICAgdGFyZ2V0OiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJyksCiAgICAgIGNsZWFyOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgcGFzczogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBmYWlsOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIHRhcmdldDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLnRhcmdldC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIHBhcnRzOwogICAgICBwYXJ0cyA9IGRhdGEuc3BsaXQoJz0nKTsKICAgICAgaWYgKCFfdGhpcy50YXJnZXQpIHsKICAgICAgICBfdGhpcy50YXJnZXQgPSB7fTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMudGFyZ2V0W3BhcnRzWzBdXSA9IHBhcnRzWzFdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMua2V5Lm9uKCdkYXRhJywgZnVuY3Rpb24oa2V5KSB7CiAgICAgIF90aGlzLmtleSA9IGtleTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmNsZWFyLm9uKCdkYXRhJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy50YXJnZXQgPSBudWxsOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBlbGVtZW50LCBwYXNzZWQsIHRvdWNoOwogICAgICBpZiAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID4gMSkgewogICAgICAgIHBhc3NlZCA9IHRydWU7CiAgICAgICAgZm9yICh0b3VjaCBpbiBkYXRhKSB7CiAgICAgICAgICBlbGVtZW50ID0gZGF0YVt0b3VjaF07CiAgICAgICAgICBpZiAoIV90aGlzLmRldGVjdFRhcmdldChlbGVtZW50KSkgewogICAgICAgICAgICBwYXNzZWQgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHBhc3NlZCkgewogICAgICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnRhcmdldC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICAgICAgX3RoaXMub3V0UG9ydHMudGFyZ2V0LnNlbmQoZGF0YVtPYmplY3Qua2V5cyhkYXRhKVswXV1bX3RoaXMua2V5XSk7CiAgICAgICAgICB9CiAgICAgICAgICBfdGhpcy5vdXRQb3J0cy5wYXNzLnNlbmQoZGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLm91dFBvcnRzLmZhaWwuc2VuZChkYXRhKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5kZXRlY3RUYXJnZXQoZGF0YVtPYmplY3Qua2V5cyhkYXRhKVswXV0pKSB7CiAgICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnRhcmdldC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICAgIF90aGlzLm91dFBvcnRzLnRhcmdldC5zZW5kKGRhdGFbT2JqZWN0LmtleXMoZGF0YSlbMF1dW190aGlzLmtleV0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMucGFzcy5zZW5kKGRhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5mYWlsLnNlbmQoZGF0YSk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLm91dFBvcnRzLnBhc3MuZGlzY29ubmVjdCgpOwogICAgICBfdGhpcy5vdXRQb3J0cy5mYWlsLmRpc2Nvbm5lY3QoKTsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLnRhcmdldC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMudGFyZ2V0LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgfSk7CiAgfQoKICBEZXRlY3RUYXJnZXQucHJvdG90eXBlLmRldGVjdFRhcmdldCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgIHZhciBrZXksIHZhbHVlLCBfcmVmOwogICAgaWYgKCFlbGVtZW50W3RoaXMua2V5XSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBfcmVmID0gdGhpcy50YXJnZXQ7CiAgICBmb3IgKGtleSBpbiBfcmVmKSB7CiAgICAgIHZhbHVlID0gX3JlZltrZXldOwogICAgICBpZiAoZWxlbWVudFt0aGlzLmtleV1ba2V5XSAhPT0gdmFsdWUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0cnVlOwogIH07CgogIHJldHVybiBEZXRlY3RUYXJnZXQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IERldGVjdFRhcmdldDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2luZGV4LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKLyoKICogVGhpcyBmaWxlIGNhbiBiZSB1c2VkIGZvciBnZW5lcmFsIGxpYnJhcnkgZmVhdHVyZXMgb2Ygb2JqZWN0cy4KICoKICogVGhlIGxpYnJhcnkgZmVhdHVyZXMgY2FuIGJlIG1hZGUgYXZhaWxhYmxlIGFzIENvbW1vbkpTIG1vZHVsZXMgdGhhdCB0aGUKICogY29tcG9uZW50cyBpbiB0aGlzIHByb2plY3QgdXRpbGl6ZS4KICovCgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnQuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJuYW1lIjoibm9mbG8tb2JqZWN0cyIsImRlc2NyaXB0aW9uIjoiT2JqZWN0IFV0aWxpdGllcyBmb3IgTm9GbG8iLCJ2ZXJzaW9uIjoiMC4xLjAiLCJrZXl3b3JkcyI6WyJub2ZsbyIsIm9iamVjdHMiLCJ1dGlsaXRpZXMiXSwiYXV0aG9yIjoiS2VubmV0aCBLYW4gPGtlbmhrYW5AZ21haWwuY29tPiIsInJlcG8iOiJub2Zsby9vYmplY3RzIiwiZGVwZW5kZW5jaWVzIjp7Im5vZmxvL25vZmxvIjoiKiIsImNvbXBvbmVudC91bmRlcnNjb3JlIjoiKiJ9LCJzY3JpcHRzIjpbImNvbXBvbmVudHMvRXh0ZW5kLmNvZmZlZSIsImNvbXBvbmVudHMvTWVyZ2VPYmplY3RzLmNvZmZlZSIsImNvbXBvbmVudHMvU3BsaXRPYmplY3QuY29mZmVlIiwiY29tcG9uZW50cy9SZXBsYWNlS2V5LmNvZmZlZSIsImNvbXBvbmVudHMvS2V5cy5jb2ZmZWUiLCJjb21wb25lbnRzL1NpemUuY29mZmVlIiwiY29tcG9uZW50cy9WYWx1ZXMuY29mZmVlIiwiY29tcG9uZW50cy9Kb2luLmNvZmZlZSIsImNvbXBvbmVudHMvRXh0cmFjdFByb3BlcnR5LmNvZmZlZSIsImNvbXBvbmVudHMvSW5zZXJ0UHJvcGVydHkuY29mZmVlIiwiY29tcG9uZW50cy9TbGljZUFycmF5LmNvZmZlZSIsImNvbXBvbmVudHMvU3BsaXRBcnJheS5jb2ZmZWUiLCJjb21wb25lbnRzL0ZpbHRlclByb3BlcnR5VmFsdWUuY29mZmVlIiwiY29tcG9uZW50cy9GbGF0dGVuT2JqZWN0LmNvZmZlZSIsImNvbXBvbmVudHMvTWFwUHJvcGVydHkuY29mZmVlIiwiY29tcG9uZW50cy9SZW1vdmVQcm9wZXJ0eS5jb2ZmZWUiLCJjb21wb25lbnRzL01hcFByb3BlcnR5VmFsdWUuY29mZmVlIiwiY29tcG9uZW50cy9HZXRPYmplY3RLZXkuY29mZmVlIiwiY29tcG9uZW50cy9VbmlxdWVBcnJheS5jb2ZmZWUiLCJjb21wb25lbnRzL1NldFByb3BlcnR5LmNvZmZlZSIsImNvbXBvbmVudHMvU2ltcGxpZnlPYmplY3QuY29mZmVlIiwiY29tcG9uZW50cy9EdXBsaWNhdGVQcm9wZXJ0eS5jb2ZmZWUiLCJjb21wb25lbnRzL0NyZWF0ZU9iamVjdC5jb2ZmZWUiLCJjb21wb25lbnRzL0NyZWF0ZURhdGUuY29mZmVlIiwiY29tcG9uZW50cy9TZXRQcm9wZXJ0eVZhbHVlLmNvZmZlZSIsImNvbXBvbmVudHMvQ2FsbE1ldGhvZC5jb2ZmZWUiLCJpbmRleC5qcyJdLCJqc29uIjpbImNvbXBvbmVudC5qc29uIl0sIm5vZmxvIjp7Imljb24iOiJsaXN0IiwiY29tcG9uZW50cyI6eyJFeHRlbmQiOiJjb21wb25lbnRzL0V4dGVuZC5jb2ZmZWUiLCJNZXJnZU9iamVjdHMiOiJjb21wb25lbnRzL01lcmdlT2JqZWN0cy5jb2ZmZWUiLCJTcGxpdE9iamVjdCI6ImNvbXBvbmVudHMvU3BsaXRPYmplY3QuY29mZmVlIiwiUmVwbGFjZUtleSI6ImNvbXBvbmVudHMvUmVwbGFjZUtleS5jb2ZmZWUiLCJLZXlzIjoiY29tcG9uZW50cy9LZXlzLmNvZmZlZSIsIlNpemUiOiJjb21wb25lbnRzL1NpemUuY29mZmVlIiwiVmFsdWVzIjoiY29tcG9uZW50cy9WYWx1ZXMuY29mZmVlIiwiSm9pbiI6ImNvbXBvbmVudHMvSm9pbi5jb2ZmZWUiLCJFeHRyYWN0UHJvcGVydHkiOiJjb21wb25lbnRzL0V4dHJhY3RQcm9wZXJ0eS5jb2ZmZWUiLCJJbnNlcnRQcm9wZXJ0eSI6ImNvbXBvbmVudHMvSW5zZXJ0UHJvcGVydHkuY29mZmVlIiwiU2xpY2VBcnJheSI6ImNvbXBvbmVudHMvU2xpY2VBcnJheS5jb2ZmZWUiLCJTcGxpdEFycmF5IjoiY29tcG9uZW50cy9TcGxpdEFycmF5LmNvZmZlZSIsIkZpbHRlclByb3BlcnR5VmFsdWUiOiJjb21wb25lbnRzL0ZpbHRlclByb3BlcnR5VmFsdWUuY29mZmVlIiwiRmxhdHRlbk9iamVjdCI6ImNvbXBvbmVudHMvRmxhdHRlbk9iamVjdC5jb2ZmZWUiLCJNYXBQcm9wZXJ0eSI6ImNvbXBvbmVudHMvTWFwUHJvcGVydHkuY29mZmVlIiwiUmVtb3ZlUHJvcGVydHkiOiJjb21wb25lbnRzL1JlbW92ZVByb3BlcnR5LmNvZmZlZSIsIk1hcFByb3BlcnR5VmFsdWUiOiJjb21wb25lbnRzL01hcFByb3BlcnR5VmFsdWUuY29mZmVlIiwiR2V0T2JqZWN0S2V5IjoiY29tcG9uZW50cy9HZXRPYmplY3RLZXkuY29mZmVlIiwiVW5pcXVlQXJyYXkiOiJjb21wb25lbnRzL1VuaXF1ZUFycmF5LmNvZmZlZSIsIlNldFByb3BlcnR5IjoiY29tcG9uZW50cy9TZXRQcm9wZXJ0eS5jb2ZmZWUiLCJTaW1wbGlmeU9iamVjdCI6ImNvbXBvbmVudHMvU2ltcGxpZnlPYmplY3QuY29mZmVlIiwiRHVwbGljYXRlUHJvcGVydHkiOiJjb21wb25lbnRzL0R1cGxpY2F0ZVByb3BlcnR5LmNvZmZlZSIsIkNyZWF0ZU9iamVjdCI6ImNvbXBvbmVudHMvQ3JlYXRlT2JqZWN0LmNvZmZlZSIsIkNyZWF0ZURhdGUiOiJjb21wb25lbnRzL0NyZWF0ZURhdGUuY29mZmVlIiwiU2V0UHJvcGVydHlWYWx1ZSI6ImNvbXBvbmVudHMvU2V0UHJvcGVydHlWYWx1ZS5jb2ZmZWUiLCJDYWxsTWV0aG9kIjoiY29tcG9uZW50cy9DYWxsTWV0aG9kLmNvZmZlZSJ9fX0nKTsKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9FeHRlbmQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRXh0ZW5kLCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpFeHRlbmQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEV4dGVuZCwgX3N1cGVyKTsKCiAgRXh0ZW5kLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJFeHRlbmQgYW4gaW5jb21pbmcgb2JqZWN0IHRvIHNvbWUgcHJlZGVmaW5lZCAgb2JqZWN0cywgb3B0aW9uYWxseSBieSBhIGNlcnRhaW4gcHJvcGVydHkiOwoKICBmdW5jdGlvbiBFeHRlbmQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5iYXNlcyA9IFtdOwogICAgdGhpcy5tZXJnZWRCYXNlID0ge307CiAgICB0aGlzLmtleSA9IG51bGw7CiAgICB0aGlzLnJldmVyc2UgPSBmYWxzZTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGJhc2U6IG5ldyBub2Zsby5Qb3J0LAogICAgICBrZXk6IG5ldyBub2Zsby5Qb3J0LAogICAgICByZXZlcnNlOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHMuYmFzZS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuYmFzZXMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmJhc2Uub24oImRhdGEiLCBmdW5jdGlvbihiYXNlKSB7CiAgICAgIGlmIChiYXNlICE9IG51bGwpIHsKICAgICAgICByZXR1cm4gX3RoaXMuYmFzZXMucHVzaChiYXNlKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMua2V5Lm9uKCJkYXRhIiwgZnVuY3Rpb24oa2V5KSB7CiAgICAgIF90aGlzLmtleSA9IGtleTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnJldmVyc2Uub24oImRhdGEiLCBmdW5jdGlvbihyZXZlcnNlKSB7CiAgICAgIHJldHVybiBfdGhpcy5yZXZlcnNlID0gcmV2ZXJzZSA9PT0gJ3RydWUnOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImNvbm5lY3QiLCBmdW5jdGlvbihncm91cCkge30pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oaW5jb21pbmcpIHsKICAgICAgdmFyIGJhc2UsIG91dCwgX2ksIF9sZW4sIF9yZWY7CiAgICAgIG91dCA9IHt9OwogICAgICBfcmVmID0gX3RoaXMuYmFzZXM7CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGJhc2UgPSBfcmVmW19pXTsKICAgICAgICBpZiAoKF90aGlzLmtleSA9PSBudWxsKSB8fCAoaW5jb21pbmdbX3RoaXMua2V5XSAhPSBudWxsKSAmJiBpbmNvbWluZ1tfdGhpcy5rZXldID09PSBiYXNlW190aGlzLmtleV0pIHsKICAgICAgICAgIF8uZXh0ZW5kKG91dCwgYmFzZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChfdGhpcy5yZXZlcnNlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF8uZXh0ZW5kKHt9LCBpbmNvbWluZywgb3V0KSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF8uZXh0ZW5kKG91dCwgaW5jb21pbmcpKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBFeHRlbmQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEV4dGVuZDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWVyZ2VPYmplY3RzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIE1lcmdlT2JqZWN0cywgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgpfID0gcmVxdWlyZSgidW5kZXJzY29yZSIpOwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKTWVyZ2VPYmplY3RzID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhNZXJnZU9iamVjdHMsIF9zdXBlcik7CgogIE1lcmdlT2JqZWN0cy5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAibWVyZ2VzIGFsbCBpbmNvbWluZyBvYmplY3RzIGludG8gb25lIjsKCiAgZnVuY3Rpb24gTWVyZ2VPYmplY3RzKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMubWVyZ2UgPSBfLmJpbmQodGhpcy5tZXJnZSwgdGhpcyk7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5ncm91cHMgPSBbXTsKICAgICAgcmV0dXJuIF90aGlzLm9iamVjdHMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3Vwcy5wdXNoKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24ob2JqZWN0KSB7CiAgICAgIHJldHVybiBfdGhpcy5vYmplY3RzLnB1c2gob2JqZWN0KTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMucG9wKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChfLnJlZHVjZShfdGhpcy5vYmplY3RzLCBfdGhpcy5tZXJnZSwge30pKTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIE1lcmdlT2JqZWN0cy5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbihvcmlnaW4sIG9iamVjdCkgewogICAgdmFyIGtleSwgb1ZhbHVlLCB2YWx1ZTsKICAgIGZvciAoa2V5IGluIG9iamVjdCkgewogICAgICB2YWx1ZSA9IG9iamVjdFtrZXldOwogICAgICBvVmFsdWUgPSBvcmlnaW5ba2V5XTsKICAgICAgaWYgKG9WYWx1ZSAhPSBudWxsKSB7CiAgICAgICAgc3dpdGNoICh0b1N0cmluZy5jYWxsKG9WYWx1ZSkpIHsKICAgICAgICAgIGNhc2UgIltvYmplY3QgQXJyYXldIjoKICAgICAgICAgICAgb3JpZ2luW2tleV0ucHVzaC5hcHBseShvcmlnaW5ba2V5XSwgdmFsdWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIltvYmplY3QgT2JqZWN0XSI6CiAgICAgICAgICAgIG9yaWdpbltrZXldID0gdGhpcy5tZXJnZShvVmFsdWUsIHZhbHVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBvcmlnaW5ba2V5XSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBvcmlnaW5ba2V5XSA9IHZhbHVlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gb3JpZ2luOwogIH07CgogIHJldHVybiBNZXJnZU9iamVjdHM7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IE1lcmdlT2JqZWN0czsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU3BsaXRPYmplY3QuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgU3BsaXRPYmplY3QsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKU3BsaXRPYmplY3QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFNwbGl0T2JqZWN0LCBfc3VwZXIpOwoKICBTcGxpdE9iamVjdC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAic3BsaXRzIGEgc2luZ2xlIG9iamVjdCBpbnRvIG11bHRpcGxlIElQcywgICAgd3JhcHBlZCB3aXRoIHRoZSBrZXkgYXMgdGhlIGdyb3VwIjsKCiAgZnVuY3Rpb24gU3BsaXRPYmplY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBrZXksIHZhbHVlLCBfcmVzdWx0czsKICAgICAgX3Jlc3VsdHMgPSBbXTsKICAgICAgZm9yIChrZXkgaW4gZGF0YSkgewogICAgICAgIHZhbHVlID0gZGF0YVtrZXldOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGtleSk7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LnNlbmQodmFsdWUpOwogICAgICAgIF9yZXN1bHRzLnB1c2goX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gU3BsaXRPYmplY3Q7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFNwbGl0T2JqZWN0Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9SZXBsYWNlS2V5LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlcGxhY2VLZXksIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKUmVwbGFjZUtleSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoUmVwbGFjZUtleSwgX3N1cGVyKTsKCiAgUmVwbGFjZUtleS5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiZ2l2ZW4gYSByZWdleHAgbWF0Y2hpbmcgYW55IGtleSBvZiBhbiBpbmNvbWluZyAgb2JqZWN0IGFzIGEgZGF0YSBJUCwgcmVwbGFjZSB0aGUga2V5IHdpdGggdGhlIHByb3ZpZGVkIHN0cmluZyI7CgogIGZ1bmN0aW9uIFJlcGxhY2VLZXkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5wYXR0ZXJucyA9IHt9OwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCwKICAgICAgcGF0dGVybjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLnBhdHRlcm4ub24oImRhdGEiLCBmdW5jdGlvbihwYXR0ZXJucykgewogICAgICBfdGhpcy5wYXR0ZXJucyA9IHBhdHRlcm5zOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBrZXksIG5ld0tleSwgcGF0dGVybiwgcmVwbGFjZSwgdmFsdWUsIF9yZWY7CiAgICAgIG5ld0tleSA9IG51bGw7CiAgICAgIGZvciAoa2V5IGluIGRhdGEpIHsKICAgICAgICB2YWx1ZSA9IGRhdGFba2V5XTsKICAgICAgICBfcmVmID0gX3RoaXMucGF0dGVybnM7CiAgICAgICAgZm9yIChwYXR0ZXJuIGluIF9yZWYpIHsKICAgICAgICAgIHJlcGxhY2UgPSBfcmVmW3BhdHRlcm5dOwogICAgICAgICAgcGF0dGVybiA9IG5ldyBSZWdFeHAocGF0dGVybik7CiAgICAgICAgICBpZiAoa2V5Lm1hdGNoKHBhdHRlcm4pICE9IG51bGwpIHsKICAgICAgICAgICAgbmV3S2V5ID0ga2V5LnJlcGxhY2UocGF0dGVybiwgcmVwbGFjZSk7CiAgICAgICAgICAgIGRhdGFbbmV3S2V5XSA9IHZhbHVlOwogICAgICAgICAgICBkZWxldGUgZGF0YVtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5wYXR0ZXJuID0gbnVsbDsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBSZXBsYWNlS2V5OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBSZXBsYWNlS2V5Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9LZXlzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEtleXMsIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKXyA9IHJlcXVpcmUoInVuZGVyc2NvcmUiKTsKCktleXMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEtleXMsIF9zdXBlcik7CgogIEtleXMucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gImdldHMgb25seSB0aGUga2V5cyBvZiBhbiBvYmplY3QgYW5kIGZvcndhcmQgdGhlbSBhcyBhbiBhcnJheSI7CgogIGZ1bmN0aW9uIEtleXMoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGtleSwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzOwogICAgICBfcmVmID0gXy5rZXlzKGRhdGEpOwogICAgICBfcmVzdWx0cyA9IFtdOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBrZXkgPSBfcmVmW19pXTsKICAgICAgICBfcmVzdWx0cy5wdXNoKF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGtleSkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gS2V5czsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgS2V5czsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2l6ZS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBTaXplLCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpTaXplID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTaXplLCBfc3VwZXIpOwoKICBTaXplLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJnZXRzIHRoZSBzaXplIG9mIGFuIG9iamVjdCBhbmQgc2VuZHMgdGhhdCBvdXQgYXMgYSBudW1iZXIiOwoKICBmdW5jdGlvbiBTaXplKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnaW50ZWdlcicpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoXy5zaXplKGRhdGEpKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gU2l6ZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU2l6ZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvVmFsdWVzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFZhbHVlcywgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoIm5vZmxvIik7CgpfID0gcmVxdWlyZSgidW5kZXJzY29yZSIpOwoKVmFsdWVzID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhWYWx1ZXMsIF9zdXBlcik7CgogIFZhbHVlcy5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiZ2V0cyBvbmx5IHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0IGFuZCBmb3J3YXJkIHRoZW0gYXMgYW4gYXJyYXkiOwoKICBmdW5jdGlvbiBWYWx1ZXMoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciB2YWx1ZSwgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzOwogICAgICBfcmVmID0gXy52YWx1ZXMoZGF0YSk7CiAgICAgIF9yZXN1bHRzID0gW107CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIHZhbHVlID0gX3JlZltfaV07CiAgICAgICAgX3Jlc3VsdHMucHVzaChfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZCh2YWx1ZSkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gVmFsdWVzOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBWYWx1ZXM7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0pvaW4uanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgSm9pbiwgbm9mbG8sIF8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgpfID0gcmVxdWlyZSgidW5kZXJzY29yZSIpOwoKbm9mbG8gPSByZXF1aXJlKCJub2ZsbyIpOwoKSm9pbiA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoSm9pbiwgX3N1cGVyKTsKCiAgSm9pbi5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAiSm9pbiBhbGwgdmFsdWVzIG9mIGEgcGFzc2VkIHBhY2tldCB0b2dldGhlciBhcyBhICBzdHJpbmcgd2l0aCBhIHByZWRlZmluZWQgZGVsaW1pdGVyIjsKCiAgZnVuY3Rpb24gSm9pbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRlbGltaXRlciA9ICIsIjsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGRlbGltaXRlcjogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLmRlbGltaXRlci5vbigiZGF0YSIsIGZ1bmN0aW9uKGRlbGltaXRlcikgewogICAgICBfdGhpcy5kZWxpbWl0ZXIgPSBkZWxpbWl0ZXI7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKG9iamVjdCkgewogICAgICBpZiAoXy5pc09iamVjdChvYmplY3QpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF8udmFsdWVzKG9iamVjdCkuam9pbihfdGhpcy5kZWxpbWl0ZXIpKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRpc2Nvbm5lY3QiLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBKb2luOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBKb2luOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9FeHRyYWN0UHJvcGVydHkuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRXh0cmFjdFByb3BlcnR5LCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpFeHRyYWN0UHJvcGVydHkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEV4dHJhY3RQcm9wZXJ0eSwgX3N1cGVyKTsKCiAgRXh0cmFjdFByb3BlcnR5LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJHaXZlbiBhIGtleSwgcmV0dXJuIG9ubHkgdGhlIHZhbHVlIG1hdGNoaW5nIHRoYXQga2V5ICBpbiB0aGUgaW5jb21pbmcgb2JqZWN0IjsKCiAgZnVuY3Rpb24gRXh0cmFjdFByb3BlcnR5KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQsCiAgICAgIGtleTogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLmtleS5vbigiY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMua2V5cyA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMua2V5Lm9uKCJkYXRhIiwgZnVuY3Rpb24oa2V5KSB7CiAgICAgIHJldHVybiBfdGhpcy5rZXlzLnB1c2goa2V5KTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJiZWdpbmdyb3VwIiwgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIga2V5LCB2YWx1ZSwgX2ksIF9sZW4sIF9yZWY7CiAgICAgIGlmICgoX3RoaXMua2V5cyAhPSBudWxsKSAmJiBfLmlzT2JqZWN0KGRhdGEpKSB7CiAgICAgICAgdmFsdWUgPSBkYXRhOwogICAgICAgIF9yZWYgPSBfdGhpcy5rZXlzOwogICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgICAga2V5ID0gX3JlZltfaV07CiAgICAgICAgICB2YWx1ZSA9IHZhbHVlW2tleV07CiAgICAgICAgfQogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZCh2YWx1ZSk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJlbmRncm91cCIsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkaXNjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gRXh0cmFjdFByb3BlcnR5OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBFeHRyYWN0UHJvcGVydHk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0luc2VydFByb3BlcnR5LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEluc2VydFByb3BlcnR5LCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCl8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgpJbnNlcnRQcm9wZXJ0eSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoSW5zZXJ0UHJvcGVydHksIF9zdXBlcik7CgogIEluc2VydFByb3BlcnR5LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICJJbnNlcnQgYSBwcm9wZXJ0eSBpbnRvIGluY29taW5nIG9iamVjdHMuIjsKCiAgZnVuY3Rpb24gSW5zZXJ0UHJvcGVydHkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5wcm9wZXJ0aWVzID0ge307CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0LAogICAgICBwcm9wZXJ0eTogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0CiAgICB9OwogICAgdGhpcy5pblBvcnRzLnByb3BlcnR5Lm9uKCJjb25uZWN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcm9wZXJ0aWVzID0ge307CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5wcm9wZXJ0eS5vbigiYmVnaW5ncm91cCIsIGZ1bmN0aW9uKGtleSkgewogICAgICBfdGhpcy5rZXkgPSBrZXk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5wcm9wZXJ0eS5vbigiZGF0YSIsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIGlmIChfdGhpcy5rZXkgIT0gbnVsbCkgewogICAgICAgIHJldHVybiBfdGhpcy5wcm9wZXJ0aWVzW190aGlzLmtleV0gPSB2YWx1ZTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucHJvcGVydHkub24oImVuZGdyb3VwIiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5rZXkgPSBudWxsOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImJlZ2luZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBrZXksIHZhbHVlLCBfcmVmOwogICAgICBpZiAoIV8uaXNPYmplY3QoZGF0YSkpIHsKICAgICAgICBkYXRhID0ge307CiAgICAgIH0KICAgICAgX3JlZiA9IF90aGlzLnByb3BlcnRpZXM7CiAgICAgIGZvciAoa2V5IGluIF9yZWYpIHsKICAgICAgICB2YWx1ZSA9IF9yZWZba2V5XTsKICAgICAgICBkYXRhW2tleV0gPSB2YWx1ZTsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZW5kZ3JvdXAiLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGlzY29ubmVjdCIsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIEluc2VydFByb3BlcnR5OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBJbnNlcnRQcm9wZXJ0eTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2xpY2VBcnJheS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBTbGljZUFycmF5LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClNsaWNlQXJyYXkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFNsaWNlQXJyYXksIF9zdXBlcik7CgogIGZ1bmN0aW9uIFNsaWNlQXJyYXkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5iZWdpbiA9IDA7CiAgICB0aGlzLmVuZCA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIGJlZ2luOiBuZXcgbm9mbG8uUG9ydCgpLAogICAgICBlbmQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIGVycm9yOiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmJlZ2luLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuYmVnaW4gPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZW5kLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuZW5kID0gZGF0YTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuc2xpY2VEYXRhKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBTbGljZUFycmF5LnByb3RvdHlwZS5zbGljZURhdGEgPSBmdW5jdGlvbihkYXRhKSB7CiAgICB2YXIgc2xpY2VkOwogICAgaWYgKCFkYXRhLnNsaWNlKSB7CiAgICAgIHJldHVybiB0aGlzLm91dFBvcnRzLmVycm9yLnNlbmQoIkRhdGEgIiArICh0eXBlb2YgZGF0YSkgKyAiIGNhbm5vdCBiZSBzbGljZWQiKTsKICAgIH0KICAgIGlmICh0aGlzLmVuZCAhPT0gbnVsbCkgewogICAgICBzbGljZWQgPSBkYXRhLnNsaWNlKHRoaXMuYmVnaW4sIHRoaXMuZW5kKTsKICAgIH0KICAgIGlmICh0aGlzLmVuZCA9PT0gbnVsbCkgewogICAgICBzbGljZWQgPSBkYXRhLnNsaWNlKHRoaXMuYmVnaW4pOwogICAgfQogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMub3V0LnNlbmQoc2xpY2VkKTsKICB9OwoKICByZXR1cm4gU2xpY2VBcnJheTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU2xpY2VBcnJheTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU3BsaXRBcnJheS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBTcGxpdEFycmF5LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClNwbGl0QXJyYXkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFNwbGl0QXJyYXksIF9zdXBlcik7CgogIGZ1bmN0aW9uIFNwbGl0QXJyYXkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBpdGVtLCBrZXksIF9pLCBfbGVuLCBfcmVzdWx0czsKICAgICAgaWYgKHRvU3RyaW5nLmNhbGwoZGF0YSkgIT09ICdbb2JqZWN0IEFycmF5XScpIHsKICAgICAgICBmb3IgKGtleSBpbiBkYXRhKSB7CiAgICAgICAgICBpdGVtID0gZGF0YVtrZXldOwogICAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoa2V5KTsKICAgICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGl0ZW0pOwogICAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfcmVzdWx0cyA9IFtdOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGRhdGEubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBpdGVtID0gZGF0YVtfaV07CiAgICAgICAgX3Jlc3VsdHMucHVzaChfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChpdGVtKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIF9yZXN1bHRzOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFNwbGl0QXJyYXk7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFNwbGl0QXJyYXk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0ZpbHRlclByb3BlcnR5VmFsdWUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRmlsdGVyUHJvcGVydHlWYWx1ZSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpGaWx0ZXJQcm9wZXJ0eVZhbHVlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhGaWx0ZXJQcm9wZXJ0eVZhbHVlLCBfc3VwZXIpOwoKICBGaWx0ZXJQcm9wZXJ0eVZhbHVlLnByb3RvdHlwZS5pY29uID0gJ2ZpbHRlcic7CgogIGZ1bmN0aW9uIEZpbHRlclByb3BlcnR5VmFsdWUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5hY2NlcHRzID0ge307CiAgICB0aGlzLnJlZ2V4cHMgPSB7fTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgYWNjZXB0OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdhbGwnKSwKICAgICAgcmVnZXhwOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdzdHJpbmcnKSwKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIG1pc3NlZDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmFjY2VwdC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnByZXBhcmVBY2NlcHQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5yZWdleHAub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcmVwYXJlUmVnRXhwKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChfdGhpcy5maWx0ZXJpbmcoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5maWx0ZXJEYXRhKGRhdGEpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgRmlsdGVyUHJvcGVydHlWYWx1ZS5wcm90b3R5cGUuZmlsdGVyaW5nID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gKE9iamVjdC5rZXlzKHRoaXMuYWNjZXB0cykpLmxlbmd0aCA+IDAgfHwgKE9iamVjdC5rZXlzKHRoaXMucmVnZXhwcykpLmxlbmd0aCA+IDA7CiAgfTsKCiAgRmlsdGVyUHJvcGVydHlWYWx1ZS5wcm90b3R5cGUucHJlcGFyZUFjY2VwdCA9IGZ1bmN0aW9uKG1hcCkgewogICAgdmFyIGUsIG1hcFBhcnRzOwogICAgaWYgKHR5cGVvZiBtYXAgPT09ICdvYmplY3QnKSB7CiAgICAgIHRoaXMuYWNjZXB0cyA9IG1hcDsKICAgICAgcmV0dXJuOwogICAgfQogICAgbWFwUGFydHMgPSBtYXAuc3BsaXQoJz0nKTsKICAgIHRyeSB7CiAgICAgIHJldHVybiB0aGlzLmFjY2VwdHNbbWFwUGFydHNbMF1dID0gZXZhbChtYXBQYXJ0c1sxXSk7CiAgICB9IGNhdGNoIChfZXJyb3IpIHsKICAgICAgZSA9IF9lcnJvcjsKICAgICAgaWYgKGUgaW5zdGFuY2VvZiBSZWZlcmVuY2VFcnJvcikgewogICAgICAgIHJldHVybiB0aGlzLmFjY2VwdHNbbWFwUGFydHNbMF1dID0gbWFwUGFydHNbMV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgZTsKICAgICAgfQogICAgfQogIH07CgogIEZpbHRlclByb3BlcnR5VmFsdWUucHJvdG90eXBlLnByZXBhcmVSZWdFeHAgPSBmdW5jdGlvbihtYXApIHsKICAgIHZhciBtYXBQYXJ0czsKICAgIG1hcFBhcnRzID0gbWFwLnNwbGl0KCc9Jyk7CiAgICByZXR1cm4gdGhpcy5yZWdleHBzW21hcFBhcnRzWzBdXSA9IG1hcFBhcnRzWzFdOwogIH07CgogIEZpbHRlclByb3BlcnR5VmFsdWUucHJvdG90eXBlLmZpbHRlckRhdGEgPSBmdW5jdGlvbihvYmplY3QpIHsKICAgIHZhciBtYXRjaCwgbmV3RGF0YSwgcHJvcGVydHksIHJlZ2V4cCwgdmFsdWU7CiAgICBuZXdEYXRhID0ge307CiAgICBtYXRjaCA9IGZhbHNlOwogICAgZm9yIChwcm9wZXJ0eSBpbiBvYmplY3QpIHsKICAgICAgdmFsdWUgPSBvYmplY3RbcHJvcGVydHldOwogICAgICBpZiAodGhpcy5hY2NlcHRzW3Byb3BlcnR5XSkgewogICAgICAgIGlmICh0aGlzLmFjY2VwdHNbcHJvcGVydHldICE9PSB2YWx1ZSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIG1hdGNoID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAodGhpcy5yZWdleHBzW3Byb3BlcnR5XSkgewogICAgICAgIHJlZ2V4cCA9IG5ldyBSZWdFeHAodGhpcy5yZWdleHBzW3Byb3BlcnR5XSk7CiAgICAgICAgaWYgKCFyZWdleHAuZXhlYyh2YWx1ZSkpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICBtYXRjaCA9IHRydWU7CiAgICAgIH0KICAgICAgbmV3RGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgY29udGludWU7CiAgICB9CiAgICBpZiAoIW1hdGNoKSB7CiAgICAgIGlmICghdGhpcy5vdXRQb3J0cy5taXNzZWQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMub3V0UG9ydHMubWlzc2VkLnNlbmQob2JqZWN0KTsKICAgICAgdGhpcy5vdXRQb3J0cy5taXNzZWQuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm47CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChuZXdEYXRhKTsKICB9OwoKICByZXR1cm4gRmlsdGVyUHJvcGVydHlWYWx1ZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRmlsdGVyUHJvcGVydHlWYWx1ZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRmxhdHRlbk9iamVjdC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBGbGF0dGVuT2JqZWN0LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkZsYXR0ZW5PYmplY3QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEZsYXR0ZW5PYmplY3QsIF9zdXBlcik7CgogIGZ1bmN0aW9uIEZsYXR0ZW5PYmplY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5tYXAgPSB7fTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgbWFwOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCksCiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHMubWFwLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucHJlcGFyZU1hcChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgb2JqZWN0LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICAgIF9yZWYgPSBfdGhpcy5mbGF0dGVuT2JqZWN0KGRhdGEpOwogICAgICBfcmVzdWx0cyA9IFtdOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBvYmplY3QgPSBfcmVmW19pXTsKICAgICAgICBfcmVzdWx0cy5wdXNoKF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF90aGlzLm1hcEtleXMob2JqZWN0KSkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgRmxhdHRlbk9iamVjdC5wcm90b3R5cGUucHJlcGFyZU1hcCA9IGZ1bmN0aW9uKG1hcCkgewogICAgdmFyIG1hcFBhcnRzOwogICAgaWYgKHR5cGVvZiBtYXAgPT09ICdvYmplY3QnKSB7CiAgICAgIHRoaXMubWFwID0gbWFwOwogICAgICByZXR1cm47CiAgICB9CiAgICBtYXBQYXJ0cyA9IG1hcC5zcGxpdCgnPScpOwogICAgcmV0dXJuIHRoaXMubWFwW21hcFBhcnRzWzBdXSA9IG1hcFBhcnRzWzFdOwogIH07CgogIEZsYXR0ZW5PYmplY3QucHJvdG90eXBlLm1hcEtleXMgPSBmdW5jdGlvbihvYmplY3QpIHsKICAgIHZhciBrZXksIG1hcCwgX3JlZjsKICAgIF9yZWYgPSB0aGlzLm1hcDsKICAgIGZvciAoa2V5IGluIF9yZWYpIHsKICAgICAgbWFwID0gX3JlZltrZXldOwogICAgICBvYmplY3RbbWFwXSA9IG9iamVjdC5mbGF0dGVuZWRLZXlzW2tleV07CiAgICB9CiAgICBkZWxldGUgb2JqZWN0LmZsYXR0ZW5lZEtleXM7CiAgICByZXR1cm4gb2JqZWN0OwogIH07CgogIEZsYXR0ZW5PYmplY3QucHJvdG90eXBlLmZsYXR0ZW5PYmplY3QgPSBmdW5jdGlvbihvYmplY3QpIHsKICAgIHZhciBmbGF0dGVuZWQsIGZsYXR0ZW5lZFZhbHVlLCBrZXksIHZhbCwgdmFsdWUsIF9pLCBfbGVuOwogICAgZmxhdHRlbmVkID0gW107CiAgICBmb3IgKGtleSBpbiBvYmplY3QpIHsKICAgICAgdmFsdWUgPSBvYmplY3Rba2V5XTsKICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHsKICAgICAgICBmbGF0dGVuZWRWYWx1ZSA9IHRoaXMuZmxhdHRlbk9iamVjdCh2YWx1ZSk7CiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBmbGF0dGVuZWRWYWx1ZS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgICAgdmFsID0gZmxhdHRlbmVkVmFsdWVbX2ldOwogICAgICAgICAgdmFsLmZsYXR0ZW5lZEtleXMucHVzaChrZXkpOwogICAgICAgICAgZmxhdHRlbmVkLnB1c2godmFsKTsKICAgICAgICB9CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgZmxhdHRlbmVkLnB1c2goewogICAgICAgIGZsYXR0ZW5lZEtleXM6IFtrZXldLAogICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBmbGF0dGVuZWQ7CiAgfTsKCiAgcmV0dXJuIEZsYXR0ZW5PYmplY3Q7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEZsYXR0ZW5PYmplY3Q7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL01hcFByb3BlcnR5LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIE1hcFByb3BlcnR5LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCk1hcFByb3BlcnR5ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhNYXBQcm9wZXJ0eSwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gTWFwUHJvcGVydHkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5tYXAgPSB7fTsKICAgIHRoaXMucmVnZXhwcyA9IHt9OwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBtYXA6IG5ldyBub2Zsby5BcnJheVBvcnQoKSwKICAgICAgcmVnZXhwOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCksCiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHMubWFwLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucHJlcGFyZU1hcChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnJlZ2V4cC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnByZXBhcmVSZWdFeHAoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm1hcERhdGEoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIE1hcFByb3BlcnR5LnByb3RvdHlwZS5wcmVwYXJlTWFwID0gZnVuY3Rpb24obWFwKSB7CiAgICB2YXIgbWFwUGFydHM7CiAgICBpZiAodHlwZW9mIG1hcCA9PT0gJ29iamVjdCcpIHsKICAgICAgdGhpcy5tYXAgPSBtYXA7CiAgICAgIHJldHVybjsKICAgIH0KICAgIG1hcFBhcnRzID0gbWFwLnNwbGl0KCc9Jyk7CiAgICByZXR1cm4gdGhpcy5tYXBbbWFwUGFydHNbMF1dID0gbWFwUGFydHNbMV07CiAgfTsKCiAgTWFwUHJvcGVydHkucHJvdG90eXBlLnByZXBhcmVSZWdFeHAgPSBmdW5jdGlvbihtYXApIHsKICAgIHZhciBtYXBQYXJ0czsKICAgIG1hcFBhcnRzID0gbWFwLnNwbGl0KCc9Jyk7CiAgICByZXR1cm4gdGhpcy5yZWdleHBzW21hcFBhcnRzWzBdXSA9IG1hcFBhcnRzWzFdOwogIH07CgogIE1hcFByb3BlcnR5LnByb3RvdHlwZS5tYXBEYXRhID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIGV4cHJlc3Npb24sIG1hdGNoZWQsIG5ld0RhdGEsIHByb3BlcnR5LCByZWdleHAsIHJlcGxhY2VtZW50LCB2YWx1ZSwgX3JlZjsKICAgIG5ld0RhdGEgPSB7fTsKICAgIGZvciAocHJvcGVydHkgaW4gZGF0YSkgewogICAgICB2YWx1ZSA9IGRhdGFbcHJvcGVydHldOwogICAgICBpZiAocHJvcGVydHkgaW4gdGhpcy5tYXApIHsKICAgICAgICBwcm9wZXJ0eSA9IHRoaXMubWFwW3Byb3BlcnR5XTsKICAgICAgfQogICAgICBfcmVmID0gdGhpcy5yZWdleHBzOwogICAgICBmb3IgKGV4cHJlc3Npb24gaW4gX3JlZikgewogICAgICAgIHJlcGxhY2VtZW50ID0gX3JlZltleHByZXNzaW9uXTsKICAgICAgICByZWdleHAgPSBuZXcgUmVnRXhwKGV4cHJlc3Npb24pOwogICAgICAgIG1hdGNoZWQgPSByZWdleHAuZXhlYyhwcm9wZXJ0eSk7CiAgICAgICAgaWYgKCFtYXRjaGVkKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgcHJvcGVydHkgPSBwcm9wZXJ0eS5yZXBsYWNlKHJlZ2V4cCwgcmVwbGFjZW1lbnQpOwogICAgICB9CiAgICAgIGlmIChwcm9wZXJ0eSBpbiBuZXdEYXRhKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobmV3RGF0YVtwcm9wZXJ0eV0pKSB7CiAgICAgICAgICBuZXdEYXRhW3Byb3BlcnR5XS5wdXNoKHZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbmV3RGF0YVtwcm9wZXJ0eV0gPSBbbmV3RGF0YVtwcm9wZXJ0eV0sIHZhbHVlXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV3RGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMub3V0LnNlbmQobmV3RGF0YSk7CiAgfTsKCiAgcmV0dXJuIE1hcFByb3BlcnR5OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBNYXBQcm9wZXJ0eTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvUmVtb3ZlUHJvcGVydHkuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUmVtb3ZlUHJvcGVydHksIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKXyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUnKTsKClJlbW92ZVByb3BlcnR5ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSZW1vdmVQcm9wZXJ0eSwgX3N1cGVyKTsKCiAgUmVtb3ZlUHJvcGVydHkucHJvdG90eXBlLmljb24gPSAncmVtb3ZlJzsKCiAgZnVuY3Rpb24gUmVtb3ZlUHJvcGVydHkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5wcm9wZXJ0aWVzID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIHByb3BlcnR5OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHMucHJvcGVydHkub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcm9wZXJ0aWVzLnB1c2goZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF90aGlzLnJlbW92ZVByb3BlcnRpZXMoZGF0YSkpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBSZW1vdmVQcm9wZXJ0eS5wcm90b3R5cGUucmVtb3ZlUHJvcGVydGllcyA9IGZ1bmN0aW9uKG9iamVjdCkgewogICAgdmFyIHByb3BlcnR5LCBfaSwgX2xlbiwgX3JlZjsKICAgIG9iamVjdCA9IF8uY2xvbmUob2JqZWN0KTsKICAgIF9yZWYgPSB0aGlzLnByb3BlcnRpZXM7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgcHJvcGVydHkgPSBfcmVmW19pXTsKICAgICAgZGVsZXRlIG9iamVjdFtwcm9wZXJ0eV07CiAgICB9CiAgICByZXR1cm4gb2JqZWN0OwogIH07CgogIHJldHVybiBSZW1vdmVQcm9wZXJ0eTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVtb3ZlUHJvcGVydHk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL01hcFByb3BlcnR5VmFsdWUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgTWFwUHJvcGVydHlWYWx1ZSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpNYXBQcm9wZXJ0eVZhbHVlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhNYXBQcm9wZXJ0eVZhbHVlLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBNYXBQcm9wZXJ0eVZhbHVlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMubWFwQW55ID0ge307CiAgICB0aGlzLm1hcCA9IHt9OwogICAgdGhpcy5yZWdleHBBbnkgPSB7fTsKICAgIHRoaXMucmVnZXhwID0ge307CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIG1hcDogbmV3IG5vZmxvLkFycmF5UG9ydCgpLAogICAgICByZWdleHA6IG5ldyBub2Zsby5BcnJheVBvcnQoKSwKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5tYXAub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcmVwYXJlTWFwKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucmVnZXhwLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMucHJlcGFyZVJlZ0V4cChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMubWFwRGF0YShkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgTWFwUHJvcGVydHlWYWx1ZS5wcm90b3R5cGUucHJlcGFyZU1hcCA9IGZ1bmN0aW9uKG1hcCkgewogICAgdmFyIG1hcFBhcnRzOwogICAgaWYgKHR5cGVvZiBtYXAgPT09ICdvYmplY3QnKSB7CiAgICAgIHRoaXMubWFwQW55ID0gbWFwOwogICAgICByZXR1cm47CiAgICB9CiAgICBtYXBQYXJ0cyA9IG1hcC5zcGxpdCgnPScpOwogICAgaWYgKG1hcFBhcnRzLmxlbmd0aCA9PT0gMykgewogICAgICB0aGlzLm1hcFttYXBQYXJ0c1swXV0gPSB7CiAgICAgICAgZnJvbTogbWFwUGFydHNbMV0sCiAgICAgICAgdG86IG1hcFBhcnRzWzJdCiAgICAgIH07CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiB0aGlzLm1hcEFueVttYXBQYXJ0c1swXV0gPSBtYXBQYXJ0c1sxXTsKICB9OwoKICBNYXBQcm9wZXJ0eVZhbHVlLnByb3RvdHlwZS5wcmVwYXJlUmVnRXhwID0gZnVuY3Rpb24obWFwKSB7CiAgICB2YXIgbWFwUGFydHM7CiAgICBtYXBQYXJ0cyA9IG1hcC5zcGxpdCgnPScpOwogICAgaWYgKG1hcFBhcnRzLmxlbmd0aCA9PT0gMykgewogICAgICB0aGlzLnJlZ2V4cFttYXBQYXJ0c1swXV0gPSB7CiAgICAgICAgZnJvbTogbWFwUGFydHNbMV0sCiAgICAgICAgdG86IG1hcFBhcnRzWzJdCiAgICAgIH07CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJldHVybiB0aGlzLnJlZ2V4cEFueVttYXBQYXJ0c1swXV0gPSBtYXBQYXJ0c1sxXTsKICB9OwoKICBNYXBQcm9wZXJ0eVZhbHVlLnByb3RvdHlwZS5tYXBEYXRhID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIGV4cHJlc3Npb24sIG1hdGNoZWQsIHByb3BlcnR5LCByZWdleHAsIHJlcGxhY2VtZW50LCB2YWx1ZSwgX3JlZjsKICAgIGZvciAocHJvcGVydHkgaW4gZGF0YSkgewogICAgICB2YWx1ZSA9IGRhdGFbcHJvcGVydHldOwogICAgICBpZiAodGhpcy5tYXBbcHJvcGVydHldICYmIHRoaXMubWFwW3Byb3BlcnR5XS5mcm9tID09PSB2YWx1ZSkgewogICAgICAgIGRhdGFbcHJvcGVydHldID0gdGhpcy5tYXBbcHJvcGVydHldLnRvOwogICAgICB9CiAgICAgIGlmICh0aGlzLm1hcEFueVt2YWx1ZV0pIHsKICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IHRoaXMubWFwQW55W3ZhbHVlXTsKICAgICAgfQogICAgICBpZiAodGhpcy5yZWdleHBbcHJvcGVydHldKSB7CiAgICAgICAgcmVnZXhwID0gbmV3IFJlZ0V4cCh0aGlzLnJlZ2V4cFtwcm9wZXJ0eV0uZnJvbSk7CiAgICAgICAgbWF0Y2hlZCA9IHJlZ2V4cC5leGVjKHZhbHVlKTsKICAgICAgICBpZiAobWF0Y2hlZCkgewogICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZS5yZXBsYWNlKHJlZ2V4cCwgdGhpcy5yZWdleHBbcHJvcGVydHldLnRvKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgX3JlZiA9IHRoaXMucmVnZXhwQW55OwogICAgICBmb3IgKGV4cHJlc3Npb24gaW4gX3JlZikgewogICAgICAgIHJlcGxhY2VtZW50ID0gX3JlZltleHByZXNzaW9uXTsKICAgICAgICByZWdleHAgPSBuZXcgUmVnRXhwKGV4cHJlc3Npb24pOwogICAgICAgIG1hdGNoZWQgPSByZWdleHAuZXhlYyh2YWx1ZSk7CiAgICAgICAgaWYgKCFtYXRjaGVkKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZS5yZXBsYWNlKHJlZ2V4cCwgcmVwbGFjZW1lbnQpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICB9OwoKICByZXR1cm4gTWFwUHJvcGVydHlWYWx1ZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgTWFwUHJvcGVydHlWYWx1ZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvR2V0T2JqZWN0S2V5LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEdldE9iamVjdEtleSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpHZXRPYmplY3RLZXkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEdldE9iamVjdEtleSwgX3N1cGVyKTsKCiAgR2V0T2JqZWN0S2V5LnByb3RvdHlwZS5pY29uID0gJ2luZGVudC1yaWdodCc7CgogIGZ1bmN0aW9uIEdldE9iamVjdEtleSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnNlbmRHcm91cCA9IHRydWU7CiAgICB0aGlzLmRhdGEgPSBbXTsKICAgIHRoaXMua2V5ID0gW107CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIGtleTogbmV3IG5vZmxvLkFycmF5UG9ydCgpLAogICAgICBzZW5kZ3JvdXA6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIG9iamVjdDogbmV3IG5vZmxvLlBvcnQoKSwKICAgICAgbWlzc2VkOiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5kYXRhID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKF90aGlzLmtleS5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuZ2V0S2V5KGRhdGEpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5kYXRhLnB1c2goZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGRhdGEsIF9pLCBfbGVuLCBfcmVmOwogICAgICBpZiAoIV90aGlzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCFfdGhpcy5rZXkubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIF9yZWYgPSBfdGhpcy5kYXRhOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBkYXRhID0gX3JlZltfaV07CiAgICAgICAgX3RoaXMuZ2V0S2V5KGRhdGEpOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICAgIGlmIChfdGhpcy5vdXRQb3J0cy5vYmplY3QuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm9iamVjdC5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmtleS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmtleS5wdXNoKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMua2V5Lm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBkYXRhLCBfaSwgX2xlbiwgX3JlZjsKICAgICAgaWYgKCFfdGhpcy5kYXRhLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfcmVmID0gX3RoaXMuZGF0YTsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgZGF0YSA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLmdldEtleShkYXRhKTsKICAgICAgfQogICAgICBfdGhpcy5kYXRhID0gW107CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc2VuZGdyb3VwLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYgKGRhdGEudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJykgewogICAgICAgICAgX3RoaXMuc2VuZEdyb3VwID0gZmFsc2U7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIF90aGlzLnNlbmRHcm91cCA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5zZW5kR3JvdXAgPSBkYXRhOwogICAgfSk7CiAgfQoKICBHZXRPYmplY3RLZXkucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24oZGF0YSwgZXJyb3IpIHsKICAgIGlmICh0aGlzLm91dFBvcnRzLm1pc3NlZC5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5taXNzZWQuc2VuZChkYXRhKTsKICAgICAgdGhpcy5vdXRQb3J0cy5taXNzZWQuZGlzY29ubmVjdCgpOwogICAgICByZXR1cm47CiAgICB9CiAgICB0aHJvdyBlcnJvcjsKICB9OwoKICBHZXRPYmplY3RLZXkucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgIHZhciBrZXksIF9pLCBfbGVuLCBfcmVmOwogICAgaWYgKCF0aGlzLmtleS5sZW5ndGgpIHsKICAgICAgdGhpcy5lcnJvcihkYXRhLCBuZXcgRXJyb3IoJ0tleSBub3QgZGVmaW5lZCcpKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgewogICAgICB0aGlzLmVycm9yKGRhdGEsIG5ldyBFcnJvcignRGF0YSBpcyBub3QgYW4gb2JqZWN0JykpOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICB0aGlzLmVycm9yKGRhdGEsIG5ldyBFcnJvcignRGF0YSBpcyBOVUxMJykpOwogICAgICByZXR1cm47CiAgICB9CiAgICBfcmVmID0gdGhpcy5rZXk7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAga2V5ID0gX3JlZltfaV07CiAgICAgIGlmIChkYXRhW2tleV0gPT09IHZvaWQgMCkgewogICAgICAgIHRoaXMuZXJyb3IoZGF0YSwgbmV3IEVycm9yKCJPYmplY3QgaGFzIG5vIGtleSAiICsga2V5KSk7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc2VuZEdyb3VwKSB7CiAgICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChrZXkpOwogICAgICB9CiAgICAgIHRoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YVtrZXldKTsKICAgICAgaWYgKHRoaXMuc2VuZEdyb3VwKSB7CiAgICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgICAgfQogICAgfQogICAgaWYgKCF0aGlzLm91dFBvcnRzLm9iamVjdC5pc0F0dGFjaGVkKCkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMub2JqZWN0LnNlbmQoZGF0YSk7CiAgfTsKCiAgcmV0dXJuIEdldE9iamVjdEtleTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgR2V0T2JqZWN0S2V5Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9VbmlxdWVBcnJheS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBVbmlxdWVBcnJheSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpVbmlxdWVBcnJheSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoVW5pcXVlQXJyYXksIF9zdXBlcik7CgogIGZ1bmN0aW9uIFVuaXF1ZUFycmF5KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF90aGlzLnVuaXF1ZShkYXRhKSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgVW5pcXVlQXJyYXkucHJvdG90eXBlLnVuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5KSB7CiAgICB2YXIgbWVtYmVyLCBuZXdBcnJheSwgc2VlbiwgX2ksIF9sZW47CiAgICBzZWVuID0ge307CiAgICBuZXdBcnJheSA9IFtdOwogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBhcnJheS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBtZW1iZXIgPSBhcnJheVtfaV07CiAgICAgIHNlZW5bbWVtYmVyXSA9IG1lbWJlcjsKICAgIH0KICAgIGZvciAobWVtYmVyIGluIHNlZW4pIHsKICAgICAgbmV3QXJyYXkucHVzaChtZW1iZXIpOwogICAgfQogICAgcmV0dXJuIG5ld0FycmF5OwogIH07CgogIHJldHVybiBVbmlxdWVBcnJheTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgVW5pcXVlQXJyYXk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFNldFByb3BlcnR5LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClNldFByb3BlcnR5ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTZXRQcm9wZXJ0eSwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gU2V0UHJvcGVydHkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5wcm9wZXJ0aWVzID0ge307CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIHByb3BlcnR5OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCksCiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHMucHJvcGVydHkub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXRQcm9wZXJ0eShkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMuYWRkUHJvcGVydGllcyhkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgU2V0UHJvcGVydHkucHJvdG90eXBlLnNldFByb3BlcnR5ID0gZnVuY3Rpb24ocHJvcCkgewogICAgdmFyIHByb3BQYXJ0czsKICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ29iamVjdCcpIHsKICAgICAgdGhpcy5wcm9wID0gcHJvcDsKICAgICAgcmV0dXJuOwogICAgfQogICAgcHJvcFBhcnRzID0gcHJvcC5zcGxpdCgnPScpOwogICAgcmV0dXJuIHRoaXMucHJvcGVydGllc1twcm9wUGFydHNbMF1dID0gcHJvcFBhcnRzWzFdOwogIH07CgogIFNldFByb3BlcnR5LnByb3RvdHlwZS5hZGRQcm9wZXJ0aWVzID0gZnVuY3Rpb24ob2JqZWN0KSB7CiAgICB2YXIgcHJvcGVydHksIHZhbHVlLCBfcmVmOwogICAgX3JlZiA9IHRoaXMucHJvcGVydGllczsKICAgIGZvciAocHJvcGVydHkgaW4gX3JlZikgewogICAgICB2YWx1ZSA9IF9yZWZbcHJvcGVydHldOwogICAgICBvYmplY3RbcHJvcGVydHldID0gdmFsdWU7CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChvYmplY3QpOwogIH07CgogIHJldHVybiBTZXRQcm9wZXJ0eTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU2V0UHJvcGVydHk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NpbXBsaWZ5T2JqZWN0LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFNpbXBsaWZ5T2JqZWN0LCBub2ZsbywgXywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCl8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJykuXzsKClNpbXBsaWZ5T2JqZWN0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTaW1wbGlmeU9iamVjdCwgX3N1cGVyKTsKCiAgZnVuY3Rpb24gU2ltcGxpZnlPYmplY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luR3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChfdGhpcy5zaW1wbGlmeShkYXRhKSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIFNpbXBsaWZ5T2JqZWN0LnByb3RvdHlwZS5zaW1wbGlmeSA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgIGlmIChfLmlzQXJyYXkoZGF0YSkpIHsKICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAxKSB7CiAgICAgICAgcmV0dXJuIGRhdGFbMF07CiAgICAgIH0KICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CiAgICBpZiAoIV8uaXNPYmplY3QoZGF0YSkpIHsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CiAgICByZXR1cm4gdGhpcy5zaW1wbGlmeU9iamVjdChkYXRhKTsKICB9OwoKICBTaW1wbGlmeU9iamVjdC5wcm90b3R5cGUuc2ltcGxpZnlPYmplY3QgPSBmdW5jdGlvbihkYXRhKSB7CiAgICB2YXIga2V5cywgc2ltcGxpZmllZCwKICAgICAgX3RoaXMgPSB0aGlzOwogICAga2V5cyA9IF8ua2V5cyhkYXRhKTsKICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMSAmJiBrZXlzWzBdID09PSAnJGRhdGEnKSB7CiAgICAgIHJldHVybiB0aGlzLnNpbXBsaWZ5KGRhdGFbJyRkYXRhJ10pOwogICAgfQogICAgc2ltcGxpZmllZCA9IHt9OwogICAgXy5lYWNoKGRhdGEsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHsKICAgICAgcmV0dXJuIHNpbXBsaWZpZWRba2V5XSA9IF90aGlzLnNpbXBsaWZ5KHZhbHVlKTsKICAgIH0pOwogICAgcmV0dXJuIHNpbXBsaWZpZWQ7CiAgfTsKCiAgcmV0dXJuIFNpbXBsaWZ5T2JqZWN0OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBTaW1wbGlmeU9iamVjdDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRHVwbGljYXRlUHJvcGVydHkuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRHVwbGljYXRlUHJvcGVydHksIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKRHVwbGljYXRlUHJvcGVydHkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKER1cGxpY2F0ZVByb3BlcnR5LCBfc3VwZXIpOwoKICBmdW5jdGlvbiBEdXBsaWNhdGVQcm9wZXJ0eSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnByb3BlcnRpZXMgPSB7fTsKICAgIHRoaXMuc2VwYXJhdG9yID0gJy8nOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBwcm9wZXJ0eTogbmV3IG5vZmxvLkFycmF5UG9ydCgpLAogICAgICBzZXBhcmF0b3I6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCkKICAgIH07CiAgICB0aGlzLmluUG9ydHMucHJvcGVydHkub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXRQcm9wZXJ0eShkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnNlcGFyYXRvci5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnNlcGFyYXRvciA9IGRhdGE7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmFkZFByb3BlcnRpZXMoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIER1cGxpY2F0ZVByb3BlcnR5LnByb3RvdHlwZS5zZXRQcm9wZXJ0eSA9IGZ1bmN0aW9uKHByb3ApIHsKICAgIHZhciBwcm9wUGFydHM7CiAgICBpZiAodHlwZW9mIHByb3AgPT09ICdvYmplY3QnKSB7CiAgICAgIHRoaXMucHJvcCA9IHByb3A7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHByb3BQYXJ0cyA9IHByb3Auc3BsaXQoJz0nKTsKICAgIGlmIChwcm9wUGFydHMubGVuZ3RoID4gMikgewogICAgICB0aGlzLnByb3BlcnRpZXNbcHJvcFBhcnRzLnBvcCgpXSA9IHByb3BQYXJ0czsKICAgICAgcmV0dXJuOwogICAgfQogICAgcmV0dXJuIHRoaXMucHJvcGVydGllc1twcm9wUGFydHNbMV1dID0gcHJvcFBhcnRzWzBdOwogIH07CgogIER1cGxpY2F0ZVByb3BlcnR5LnByb3RvdHlwZS5hZGRQcm9wZXJ0aWVzID0gZnVuY3Rpb24ob2JqZWN0KSB7CiAgICB2YXIgbmV3VmFsdWVzLCBuZXdwcm9wLCBvcmlnaW5hbCwgb3JpZ2luYWxQcm9wLCBfaSwgX2xlbiwgX3JlZjsKICAgIF9yZWYgPSB0aGlzLnByb3BlcnRpZXM7CiAgICBmb3IgKG5ld3Byb3AgaW4gX3JlZikgewogICAgICBvcmlnaW5hbCA9IF9yZWZbbmV3cHJvcF07CiAgICAgIGlmICh0eXBlb2Ygb3JpZ2luYWwgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgb2JqZWN0W25ld3Byb3BdID0gb2JqZWN0W29yaWdpbmFsXTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBuZXdWYWx1ZXMgPSBbXTsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBvcmlnaW5hbC5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIG9yaWdpbmFsUHJvcCA9IG9yaWdpbmFsW19pXTsKICAgICAgICBuZXdWYWx1ZXMucHVzaChvYmplY3Rbb3JpZ2luYWxQcm9wXSk7CiAgICAgIH0KICAgICAgb2JqZWN0W25ld3Byb3BdID0gbmV3VmFsdWVzLmpvaW4odGhpcy5zZXBhcmF0b3IpOwogICAgfQogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMub3V0LnNlbmQob2JqZWN0KTsKICB9OwoKICByZXR1cm4gRHVwbGljYXRlUHJvcGVydHk7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IER1cGxpY2F0ZVByb3BlcnR5Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9DcmVhdGVPYmplY3QuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ3JlYXRlT2JqZWN0LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkNyZWF0ZU9iamVjdCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQ3JlYXRlT2JqZWN0LCBfc3VwZXIpOwoKICBmdW5jdGlvbiBDcmVhdGVPYmplY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBzdGFydDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLnN0YXJ0Lm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnN0YXJ0Lm9uKCJkYXRhIiwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZCh7fSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5zdGFydC5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc3RhcnQub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBDcmVhdGVPYmplY3Q7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENyZWF0ZU9iamVjdDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvQ3JlYXRlRGF0ZS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDcmVhdGVEYXRlLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCkNyZWF0ZURhdGUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENyZWF0ZURhdGUsIF9zdXBlcik7CgogIENyZWF0ZURhdGUucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NyZWF0ZSBhIG5ldyBEYXRlIG9iamVjdCBmcm9tIHN0cmluZyc7CgogIENyZWF0ZURhdGUucHJvdG90eXBlLmljb24gPSAndGltZSc7CgogIGZ1bmN0aW9uIENyZWF0ZURhdGUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbigiZGF0YSIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGRhdGU7CiAgICAgIGlmIChkYXRhID09PSAibm93IiB8fCBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHRydWUpIHsKICAgICAgICBkYXRlID0gbmV3IERhdGU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGEpOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRlKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIENyZWF0ZURhdGU7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENyZWF0ZURhdGU7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5VmFsdWUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgU2V0UHJvcGVydHlWYWx1ZSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpTZXRQcm9wZXJ0eVZhbHVlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTZXRQcm9wZXJ0eVZhbHVlLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBTZXRQcm9wZXJ0eVZhbHVlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucHJvcGVydHkgPSBudWxsOwogICAgdGhpcy52YWx1ZSA9IG51bGw7CiAgICB0aGlzLmRhdGEgPSBbXTsKICAgIHRoaXMuZ3JvdXBzID0gW107CiAgICB0aGlzLmtlZXAgPSBmYWxzZTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgcHJvcGVydHk6IG5ldyBub2Zsby5Qb3J0KCksCiAgICAgIHZhbHVlOiBuZXcgbm9mbG8uUG9ydCgpLAogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgpLAogICAgICBrZWVwOiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmtlZXAub24oJ2RhdGEnLCBmdW5jdGlvbihrZWVwKSB7CiAgICAgIHJldHVybiBfdGhpcy5rZWVwID0ga2VlcCA9PT0gJ3RydWUnOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMucHJvcGVydHkub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLnByb3BlcnR5ID0gZGF0YTsKICAgICAgaWYgKF90aGlzLnZhbHVlICYmIF90aGlzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmFkZFByb3BlcnRpZXMoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMudmFsdWUub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLnZhbHVlID0gZGF0YTsKICAgICAgaWYgKF90aGlzLnByb3BlcnR5ICYmIF90aGlzLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmFkZFByb3BlcnRpZXMoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmIChfdGhpcy5wcm9wZXJ0eSAmJiBfdGhpcy52YWx1ZSkgewogICAgICAgIF90aGlzLmFkZFByb3BlcnR5KHsKICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICBncm91cDogX3RoaXMuZ3JvdXBzLnNsaWNlKDApCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5kYXRhLnB1c2goewogICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgZ3JvdXA6IF90aGlzLmdyb3Vwcy5zbGljZSgwKQogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnBvcCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF90aGlzLnByb3BlcnR5ICYmIF90aGlzLnZhbHVlKSB7CiAgICAgICAgX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgICBpZiAoIV90aGlzLmtlZXApIHsKICAgICAgICByZXR1cm4gX3RoaXMudmFsdWUgPSBudWxsOwogICAgICB9CiAgICB9KTsKICB9CgogIFNldFByb3BlcnR5VmFsdWUucHJvdG90eXBlLmFkZFByb3BlcnR5ID0gZnVuY3Rpb24ob2JqZWN0KSB7CiAgICB2YXIgZ3JvdXAsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYsIF9yZWYxLCBfcmVzdWx0czsKICAgIG9iamVjdC5kYXRhW3RoaXMucHJvcGVydHldID0gdGhpcy52YWx1ZTsKICAgIF9yZWYgPSBvYmplY3QuZ3JvdXA7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgZ3JvdXAgPSBfcmVmW19pXTsKICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9CiAgICB0aGlzLm91dFBvcnRzLm91dC5zZW5kKG9iamVjdC5kYXRhKTsKICAgIF9yZWYxID0gb2JqZWN0Lmdyb3VwOwogICAgX3Jlc3VsdHMgPSBbXTsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICBncm91cCA9IF9yZWYxW19qXTsKICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpKTsKICAgIH0KICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICBTZXRQcm9wZXJ0eVZhbHVlLnByb3RvdHlwZS5hZGRQcm9wZXJ0aWVzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgb2JqZWN0LCBfaSwgX2xlbiwgX3JlZjsKICAgIF9yZWYgPSB0aGlzLmRhdGE7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgb2JqZWN0ID0gX3JlZltfaV07CiAgICAgIHRoaXMuYWRkUHJvcGVydHkob2JqZWN0KTsKICAgIH0KICAgIHRoaXMuZGF0YSA9IFtdOwogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICB9OwoKICByZXR1cm4gU2V0UHJvcGVydHlWYWx1ZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU2V0UHJvcGVydHlWYWx1ZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvQ2FsbE1ldGhvZC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDYWxsTWV0aG9kLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgibm9mbG8iKTsKCkNhbGxNZXRob2QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENhbGxNZXRob2QsIF9zdXBlcik7CgogIENhbGxNZXRob2QucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gImNhbGwgYSBtZXRob2Qgb24gYW4gb2JqZWN0IjsKCiAgQ2FsbE1ldGhvZC5wcm90b3R5cGUuaWNvbiA9ICdnZWFyJzsKCiAgZnVuY3Rpb24gQ2FsbE1ldGhvZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLm1ldGhvZCA9IG51bGw7CiAgICB0aGlzLmFyZ3MgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBtZXRob2Q6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKSwKICAgICAgImFyZ3VtZW50cyI6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpLAogICAgICBlcnJvcjogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCJkYXRhIiwgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgbXNnOwogICAgICBpZiAoIV90aGlzLm1ldGhvZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIWRhdGFbX3RoaXMubWV0aG9kXSkgewogICAgICAgIG1zZyA9ICJNZXRob2QgJyIgKyBfdGhpcy5tZXRob2QgKyAiJyBub3QgYXZhaWxhYmxlIjsKICAgICAgICBpZiAoX3RoaXMub3V0UG9ydHMuZXJyb3IuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgICBfdGhpcy5vdXRQb3J0cy5lcnJvci5zZW5kKG1zZyk7CiAgICAgICAgICBfdGhpcy5vdXRQb3J0cy5lcnJvci5kaXNjb25uZWN0KCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGFbX3RoaXMubWV0aG9kXS5hcHBseShkYXRhLCBfdGhpcy5hcmdzKSk7CiAgICAgIHJldHVybiBfdGhpcy5hcmdzID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5tZXRob2Qub24oImRhdGEiLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5tZXRob2QgPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImFyZ3VtZW50cyJdLm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5hcmdzID0gW107CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siYXJndW1lbnRzIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5hcmdzLnB1c2goZGF0YSk7CiAgICB9KTsKICB9CgogIHJldHVybiBDYWxsTWV0aG9kOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDYWxsTWV0aG9kOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWZsb3cvaW5kZXguanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewovKgogKiBUaGlzIGZpbGUgY2FuIGJlIHVzZWQgZm9yIGdlbmVyYWwgbGlicmFyeSBmZWF0dXJlcyBvZiBmbG93LgogKgogKiBUaGUgbGlicmFyeSBmZWF0dXJlcyBjYW4gYmUgbWFkZSBhdmFpbGFibGUgYXMgQ29tbW9uSlMgbW9kdWxlcyB0aGF0IHRoZQogKiBjb21wb25lbnRzIGluIHRoaXMgcHJvamVjdCB1dGlsaXplLgogKi8KCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1mbG93L2NvbXBvbmVudC5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7Im5hbWUiOiJub2Zsby1mbG93IiwiZGVzY3JpcHRpb24iOiJGbG93IENvbnRyb2wgZm9yIE5vRmxvIiwiYXV0aG9yIjoiSGVucmkgQmVyZ2l1cyA8aGVucmkuYmVyZ2l1c0Bpa2kuZmk+IiwicmVwbyI6Im5vZmxvL25vZmxvLWRvbSIsInZlcnNpb24iOiIwLjIuMCIsImtleXdvcmRzIjpbXSwiZGVwZW5kZW5jaWVzIjp7Im5vZmxvL25vZmxvIjoiKiJ9LCJzY3JpcHRzIjpbImNvbXBvbmVudHMvQ29uY2F0LmNvZmZlZSIsImNvbXBvbmVudHMvR2F0ZS5jb2ZmZWUiLCJpbmRleC5qcyJdLCJqc29uIjpbImNvbXBvbmVudC5qc29uIl0sIm5vZmxvIjp7Imljb24iOiJyYW5kb20iLCJjb21wb25lbnRzIjp7IkNvbmNhdCI6ImNvbXBvbmVudHMvQ29uY2F0LmNvZmZlZSIsIkdhdGUiOiJjb21wb25lbnRzL0dhdGUuY29mZmVlIn19fScpOwp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZmxvdy9jb21wb25lbnRzL0NvbmNhdC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb25jYXQsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKQ29uY2F0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhDb25jYXQsIF9zdXBlcik7CgogIENvbmNhdC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnR2F0aGVycyBkYXRhIGZyb20gYWxsIGluY29taW5nIGNvbm5lY3Rpb25zIGFuZCBzZW5kc1wKICB0aGVtIHRvZ2V0aGVyIGluIG9yZGVyIG9mIGNvbm5lY3Rpb24nOwoKICBmdW5jdGlvbiBDb25jYXQoKSB7CiAgICB2YXIgc3Vic2NyaWJlZCwKICAgICAgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5idWZmZXJzID0ge307CiAgICB0aGlzLmhhc0Nvbm5lY3RlZCA9IHt9OwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uQXJyYXlQb3J0CiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydAogICAgfTsKICAgIHN1YnNjcmliZWQgPSBmYWxzZTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignY29ubmVjdCcsIGZ1bmN0aW9uKHNvY2tldCkgewogICAgICB2YXIgaWQsIF9pLCBfbGVuLCBfcmVmOwogICAgICBfdGhpcy5oYXNDb25uZWN0ZWRbX3RoaXMuaW5Qb3J0c1siaW4iXS5zb2NrZXRzLmluZGV4T2Yoc29ja2V0KV0gPSB0cnVlOwogICAgICBpZiAoIXN1YnNjcmliZWQpIHsKICAgICAgICBfcmVmID0gX3RoaXMuaW5Qb3J0c1siaW4iXS5zb2NrZXRzOwogICAgICAgIGZvciAoaWQgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpZCA9ICsrX2kpIHsKICAgICAgICAgIHNvY2tldCA9IF9yZWZbaWRdOwogICAgICAgICAgX3RoaXMuc3Vic2NyaWJlU29ja2V0KGlkKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN1YnNjcmliZWQgPSB0cnVlOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNvY2tldCwgX2ksIF9sZW4sIF9yZWY7CiAgICAgIF9yZWYgPSBfdGhpcy5pblBvcnRzWyJpbiJdLnNvY2tldHM7CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIHNvY2tldCA9IF9yZWZbX2ldOwogICAgICAgIGlmIChzb2NrZXQuaXNDb25uZWN0ZWQoKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgICBfdGhpcy5jbGVhckJ1ZmZlcnMoKTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIENvbmNhdC5wcm90b3R5cGUuY2xlYXJCdWZmZXJzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZGF0YSwgaWQsIF9yZWY7CiAgICBfcmVmID0gdGhpcy5idWZmZXJzOwogICAgZm9yIChpZCBpbiBfcmVmKSB7CiAgICAgIGRhdGEgPSBfcmVmW2lkXTsKICAgICAgaWYgKCF0aGlzLmhhc0Nvbm5lY3RlZFtpZF0pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0KICAgIHRoaXMuYnVmZmVycyA9IHt9OwogICAgcmV0dXJuIHRoaXMuaGFzQ29ubmVjdGVkID0ge307CiAgfTsKCiAgQ29uY2F0LnByb3RvdHlwZS5zdWJzY3JpYmVTb2NrZXQgPSBmdW5jdGlvbihpZCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuYnVmZmVyc1tpZF0gPSBbXTsKICAgIHJldHVybiB0aGlzLmluUG9ydHNbImluIl0uc29ja2V0c1tpZF0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmICh0eXBlb2YgX3RoaXMuYnVmZmVyc1tpZF0gIT09ICdvYmplY3QnKSB7CiAgICAgICAgX3RoaXMuYnVmZmVyc1tpZF0gPSBbXTsKICAgICAgfQogICAgICBfdGhpcy5idWZmZXJzW2lkXS5wdXNoKGRhdGEpOwogICAgICByZXR1cm4gX3RoaXMuY2hlY2tTZW5kKCk7CiAgICB9KTsKICB9OwoKICBDb25jYXQucHJvdG90eXBlLmNoZWNrU2VuZCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGJ1ZmZlciwgaWQsIHNvY2tldCwgX2ksIF9sZW4sIF9yZWYsIF9yZWYxLCBfcmVzdWx0czsKICAgIF9yZWYgPSB0aGlzLmluUG9ydHNbImluIl0uc29ja2V0czsKICAgIGZvciAoaWQgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpZCA9ICsrX2kpIHsKICAgICAgc29ja2V0ID0gX3JlZltpZF07CiAgICAgIGlmICghdGhpcy5idWZmZXJzW2lkXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIXRoaXMuYnVmZmVyc1tpZF0ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CiAgICBfcmVmMSA9IHRoaXMuYnVmZmVyczsKICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKGlkIGluIF9yZWYxKSB7CiAgICAgIGJ1ZmZlciA9IF9yZWYxW2lkXTsKICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLm91dFBvcnRzLm91dC5zZW5kKGJ1ZmZlci5zaGlmdCgpKSk7CiAgICB9CiAgICByZXR1cm4gX3Jlc3VsdHM7CiAgfTsKCiAgcmV0dXJuIENvbmNhdDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgQ29uY2F0Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWZsb3cvY29tcG9uZW50cy9HYXRlLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEdhdGUsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKR2F0ZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR2F0ZSwgX3N1cGVyKTsKCiAgR2F0ZS5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnVGhpcyBjb21wb25lbnQgZm9yd2FyZHMgcmVjZWl2ZWQgcGFja2V0cyB3aGVuIHRoZSBnYXRlIGlzIG9wZW4nOwoKICBmdW5jdGlvbiBHYXRlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnYWxsJyksCiAgICAgIG9wZW46IG5ldyBub2Zsby5Qb3J0KCdiYW5nJyksCiAgICAgIGNsb3NlOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnYWxsJykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKCFfdGhpcy5vcGVuKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICBpZiAoIV90aGlzLm9wZW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBpZiAoIV90aGlzLm9wZW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2VuZGdyb3VwJywgZnVuY3Rpb24oKSB7CiAgICAgIGlmICghX3RoaXMub3BlbikgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoIV90aGlzLm9wZW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5vcGVuLm9uKCdkYXRhJywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vcGVuID0gdHJ1ZTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmNsb3NlLm9uKCdkYXRhJywgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBHYXRlOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBHYXRlOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWRvbS9pbmRleC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Ci8qCiAqIFRoaXMgZmlsZSBjYW4gYmUgdXNlZCBmb3IgZ2VuZXJhbCBsaWJyYXJ5IGZlYXR1cmVzIHRoYXQgYXJlIGV4cG9zZWQgYXMgQ29tbW9uSlMgbW9kdWxlcwogKiB0aGF0IHRoZSBjb21wb25lbnRzIHRoZW4gdXRpbGl6ZQogKi8KCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvLWRvbSIsImRlc2NyaXB0aW9uIjoiRG9jdW1lbnQgT2JqZWN0IE1vZGVsIGNvbXBvbmVudHMgZm9yIE5vRmxvIiwiYXV0aG9yIjoiSGVucmkgQmVyZ2l1cyA8aGVucmkuYmVyZ2l1c0Bpa2kuZmk+IiwicmVwbyI6Im5vZmxvL25vZmxvLWRvbSIsInZlcnNpb24iOiIwLjAuMSIsImtleXdvcmRzIjpbXSwiZGVwZW5kZW5jaWVzIjp7Im5vZmxvL25vZmxvIjoiKiJ9LCJzY3JpcHRzIjpbImNvbXBvbmVudHMvQWRkQ2xhc3MuY29mZmVlIiwiY29tcG9uZW50cy9BcHBlbmRDaGlsZC5jb2ZmZWUiLCJjb21wb25lbnRzL0NyZWF0ZUVsZW1lbnQuY29mZmVlIiwiY29tcG9uZW50cy9DcmVhdGVGcmFnbWVudC5jb2ZmZWUiLCJjb21wb25lbnRzL0dldEF0dHJpYnV0ZS5jb2ZmZWUiLCJjb21wb25lbnRzL0dldEVsZW1lbnQuY29mZmVlIiwiY29tcG9uZW50cy9IYXNDbGFzcy5jb2ZmZWUiLCJjb21wb25lbnRzL1JlYWRIdG1sLmNvZmZlZSIsImNvbXBvbmVudHMvUmVtb3ZlRWxlbWVudC5jb2ZmZWUiLCJjb21wb25lbnRzL1NldEF0dHJpYnV0ZS5jb2ZmZWUiLCJjb21wb25lbnRzL1dyaXRlSHRtbC5jb2ZmZWUiLCJjb21wb25lbnRzL1JlbW92ZUNsYXNzLmNvZmZlZSIsImNvbXBvbmVudHMvUmVxdWVzdEFuaW1hdGlvbkZyYW1lLmNvZmZlZSIsImluZGV4LmpzIl0sImpzb24iOlsiY29tcG9uZW50Lmpzb24iXSwibm9mbG8iOnsiaWNvbiI6Imh0bWw1IiwiY29tcG9uZW50cyI6eyJBZGRDbGFzcyI6ImNvbXBvbmVudHMvQWRkQ2xhc3MuY29mZmVlIiwiQXBwZW5kQ2hpbGQiOiJjb21wb25lbnRzL0FwcGVuZENoaWxkLmNvZmZlZSIsIkNyZWF0ZUVsZW1lbnQiOiJjb21wb25lbnRzL0NyZWF0ZUVsZW1lbnQuY29mZmVlIiwiQ3JlYXRlRnJhZ21lbnQiOiJjb21wb25lbnRzL0NyZWF0ZUZyYWdtZW50LmNvZmZlZSIsIkdldEF0dHJpYnV0ZSI6ImNvbXBvbmVudHMvR2V0QXR0cmlidXRlLmNvZmZlZSIsIkdldEVsZW1lbnQiOiJjb21wb25lbnRzL0dldEVsZW1lbnQuY29mZmVlIiwiSGFzQ2xhc3MiOiJjb21wb25lbnRzL0hhc0NsYXNzLmNvZmZlZSIsIldyaXRlSHRtbCI6ImNvbXBvbmVudHMvV3JpdGVIdG1sLmNvZmZlZSIsIlJlYWRIdG1sIjoiY29tcG9uZW50cy9SZWFkSHRtbC5jb2ZmZWUiLCJSZW1vdmVFbGVtZW50IjoiY29tcG9uZW50cy9SZW1vdmVFbGVtZW50LmNvZmZlZSIsIlNldEF0dHJpYnV0ZSI6ImNvbXBvbmVudHMvU2V0QXR0cmlidXRlLmNvZmZlZSIsIlJlbW92ZUNsYXNzIjoiY29tcG9uZW50cy9SZW1vdmVDbGFzcy5jb2ZmZWUiLCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiOiJjb21wb25lbnRzL1JlcXVlc3RBbmltYXRpb25GcmFtZS5jb2ZmZWUifX19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9BZGRDbGFzcy5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBBZGRDbGFzcywgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpBZGRDbGFzcyA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQWRkQ2xhc3MsIF9zdXBlcik7CgogIEFkZENsYXNzLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdBZGQgYSBjbGFzcyB0byBhbiBlbGVtZW50JzsKCiAgZnVuY3Rpb24gQWRkQ2xhc3MoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5lbGVtZW50ID0gbnVsbDsKICAgIHRoaXNbImNsYXNzIl0gPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgICJjbGFzcyI6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7fTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5lbGVtZW50ID0gZGF0YTsKICAgICAgaWYgKF90aGlzWyJjbGFzcyJdKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmFkZENsYXNzKCk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJjbGFzcyJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpc1siY2xhc3MiXSA9IGRhdGE7CiAgICAgIGlmIChfdGhpcy5lbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmFkZENsYXNzKCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgQWRkQ2xhc3MucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpc1siY2xhc3MiXSk7CiAgfTsKCiAgcmV0dXJuIEFkZENsYXNzOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBBZGRDbGFzczsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9BcHBlbmRDaGlsZC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBBcHBlbmRDaGlsZCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpBcHBlbmRDaGlsZCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQXBwZW5kQ2hpbGQsIF9zdXBlcik7CgogIEFwcGVuZENoaWxkLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdBcHBlbmQgZWxlbWVudHMgYXMgY2hpbGRyZW4gb2YgYSBwYXJlbnQgZWxlbWVudCc7CgogIGZ1bmN0aW9uIEFwcGVuZENoaWxkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucGFyZW50ID0gbnVsbDsKICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgcGFyZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIGNoaWxkOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0ge307CiAgICB0aGlzLmluUG9ydHMucGFyZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5wYXJlbnQgPSBkYXRhOwogICAgICBpZiAoX3RoaXMuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmFwcGVuZCgpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5jaGlsZC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKCFfdGhpcy5wYXJlbnQpIHsKICAgICAgICBfdGhpcy5jaGlsZHJlbi5wdXNoKGRhdGEpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMucGFyZW50LmFwcGVuZENoaWxkKGRhdGEpOwogICAgfSk7CiAgfQoKICBBcHBlbmRDaGlsZC5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgY2hpbGQsIF9pLCBfbGVuLCBfcmVmOwogICAgX3JlZiA9IHRoaXMuY2hpbGRyZW47CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgY2hpbGQgPSBfcmVmW19pXTsKICAgICAgdGhpcy5wYXJlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpOwogICAgfQogICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4gPSBbXTsKICB9OwoKICByZXR1cm4gQXBwZW5kQ2hpbGQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEFwcGVuZENoaWxkOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL0NyZWF0ZUVsZW1lbnQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ3JlYXRlRWxlbWVudCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpDcmVhdGVFbGVtZW50ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhDcmVhdGVFbGVtZW50LCBfc3VwZXIpOwoKICBDcmVhdGVFbGVtZW50LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdDcmVhdGUgYSBuZXcgRE9NIEVsZW1lbnQnOwoKICBmdW5jdGlvbiBDcmVhdGVFbGVtZW50KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgdGFnbmFtZTogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLnRhZ25hbWUub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5lbGVtZW50LnNlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkYXRhKSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy50YWduYW1lLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5lbGVtZW50LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIENyZWF0ZUVsZW1lbnQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENyZWF0ZUVsZW1lbnQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvQ3JlYXRlRnJhZ21lbnQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ3JlYXRlRnJhZ21lbnQsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKQ3JlYXRlRnJhZ21lbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENyZWF0ZUZyYWdtZW50LCBfc3VwZXIpOwoKICBDcmVhdGVGcmFnbWVudC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnQ3JlYXRlIGEgbmV3IERPTSBEb2N1bWVudEZyYWdtZW50JzsKCiAgZnVuY3Rpb24gQ3JlYXRlRnJhZ21lbnQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgZnJhZ21lbnQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuZnJhZ21lbnQuc2VuZChkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLmZyYWdtZW50LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIENyZWF0ZUZyYWdtZW50OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDcmVhdGVGcmFnbWVudDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9HZXRBdHRyaWJ1dGUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgR2V0QXR0cmlidXRlLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkdldEF0dHJpYnV0ZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR2V0QXR0cmlidXRlLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBHZXRBdHRyaWJ1dGUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5hdHRyaWJ1dGUgPSBudWxsOwogICAgdGhpcy5lbGVtZW50ID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBhdHRyaWJ1dGU6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmVsZW1lbnQub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLmVsZW1lbnQgPSBkYXRhOwogICAgICBpZiAoX3RoaXMuYXR0cmlidXRlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmdldEF0dHJpYnV0ZSgpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5hdHRyaWJ1dGUub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLmF0dHJpYnV0ZSA9IGRhdGE7CiAgICAgIGlmIChfdGhpcy5lbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmdldEF0dHJpYnV0ZSgpOwogICAgICB9CiAgICB9KTsKICB9CgogIEdldEF0dHJpYnV0ZS5wcm90b3R5cGUuZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgdmFsdWU7CiAgICB2YWx1ZSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGUpOwogICAgdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cCh0aGlzLmF0dHJpYnV0ZSk7CiAgICB0aGlzLm91dFBvcnRzLm91dC5zZW5kKHZhbHVlKTsKICAgIHRoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogIH07CgogIHJldHVybiBHZXRBdHRyaWJ1dGU7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEdldEF0dHJpYnV0ZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9HZXRFbGVtZW50LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEdldEVsZW1lbnQsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKR2V0RWxlbWVudCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoR2V0RWxlbWVudCwgX3N1cGVyKTsKCiAgR2V0RWxlbWVudC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnR2V0IGEgRE9NIGVsZW1lbnQgbWF0Y2hpbmcgYSBxdWVyeSc7CgogIGZ1bmN0aW9uIEdldEVsZW1lbnQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5jb250YWluZXIgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIHNlbGVjdG9yOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIGVycm9yOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmICh0eXBlb2YgZGF0YS5xdWVyeVNlbGVjdG9yICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgX3RoaXMuZXJyb3IoJ0dpdmVuIGNvbnRhaW5lciBkb2VzblwndCBzdXBwb3J0IHF1ZXJ5U2VsZWN0b3JzJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5jb250YWluZXIgPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc2VsZWN0b3Iub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5zZWxlY3QoZGF0YSk7CiAgICB9KTsKICB9CgogIEdldEVsZW1lbnQucHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7CiAgICB2YXIgZWwsIGVsZW1lbnQsIF9pLCBfbGVuOwogICAgaWYgKHRoaXMuY29udGFpbmVyKSB7CiAgICAgIGVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB9IGVsc2UgewogICAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOwogICAgfQogICAgaWYgKCFlbC5sZW5ndGgpIHsKICAgICAgdGhpcy5lcnJvcigiTm8gZWxlbWVudCBtYXRjaGluZyAnIiArIHNlbGVjdG9yICsgIicgZm91bmQiKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBlbC5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBlbGVtZW50ID0gZWxbX2ldOwogICAgICB0aGlzLm91dFBvcnRzLmVsZW1lbnQuc2VuZChlbGVtZW50KTsKICAgIH0KICAgIHJldHVybiB0aGlzLm91dFBvcnRzLmVsZW1lbnQuZGlzY29ubmVjdCgpOwogIH07CgogIEdldEVsZW1lbnQucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24obXNnKSB7CiAgICBpZiAodGhpcy5vdXRQb3J0cy5lcnJvci5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5lcnJvci5zZW5kKG5ldyBFcnJvcihtc2cpKTsKICAgICAgdGhpcy5vdXRQb3J0cy5lcnJvci5kaXNjb25uZWN0KCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRocm93IG5ldyBFcnJvcihtc2cpOwogIH07CgogIHJldHVybiBHZXRFbGVtZW50OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBHZXRFbGVtZW50Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL0hhc0NsYXNzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEhhc0NsYXNzLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCkhhc0NsYXNzID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhIYXNDbGFzcywgX3N1cGVyKTsKCiAgSGFzQ2xhc3MucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NoZWNrIGlmIGFuIGVsZW1lbnQgaGFzIGEgZ2l2ZW4gY2xhc3MnOwoKICBmdW5jdGlvbiBIYXNDbGFzcygpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmVsZW1lbnQgPSBudWxsOwogICAgdGhpc1siY2xhc3MiXSA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIGVsZW1lbnQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKSwKICAgICAgImNsYXNzIjogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBtaXNzZWQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5lbGVtZW50ID0gZGF0YTsKICAgICAgaWYgKF90aGlzWyJjbGFzcyJdKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmNoZWNrQ2xhc3MoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZWxlbWVudC5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5vdXRQb3J0cy5lbGVtZW50LmRpc2Nvbm5lY3QoKTsKICAgICAgaWYgKCFfdGhpcy5vdXRQb3J0cy5taXNzZWQuaXNBdHRhY2hlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5taXNzZWQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImNsYXNzIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzWyJjbGFzcyJdID0gZGF0YTsKICAgICAgaWYgKF90aGlzLmVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gX3RoaXMuY2hlY2tDbGFzcygpOwogICAgICB9CiAgICB9KTsKICB9CgogIEhhc0NsYXNzLnByb3RvdHlwZS5jaGVja0NsYXNzID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyh0aGlzWyJjbGFzcyJdKSkgewogICAgICB0aGlzLm91dFBvcnRzLmVsZW1lbnQuc2VuZCh0aGlzLmVsZW1lbnQpOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoIXRoaXMub3V0UG9ydHMubWlzc2VkLmlzQXR0YWNoZWQoKSkgewogICAgICByZXR1cm47CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5taXNzZWQuc2VuZCh0aGlzLmVsZW1lbnQpOwogIH07CgogIHJldHVybiBIYXNDbGFzczsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgSGFzQ2xhc3M7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVhZEh0bWwuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUmVhZEh0bWwsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKUmVhZEh0bWwgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFJlYWRIdG1sLCBfc3VwZXIpOwoKICBSZWFkSHRtbC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnUmVhZCBIVE1MIGZyb20gYW4gZXhpc3RpbmcgZWxlbWVudCc7CgogIGZ1bmN0aW9uIFJlYWRIdG1sKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgY29udGFpbmVyOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBodG1sOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLmluUG9ydHMuY29udGFpbmVyLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5vdXRQb3J0cy5odG1sLnNlbmQoZGF0YS5pbm5lckhUTUwpOwogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMuaHRtbC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBSZWFkSHRtbDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVhZEh0bWw7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVtb3ZlRWxlbWVudC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBSZW1vdmVFbGVtZW50LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClJlbW92ZUVsZW1lbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFJlbW92ZUVsZW1lbnQsIF9zdXBlcik7CgogIFJlbW92ZUVsZW1lbnQucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1JlbW92ZSBhbiBlbGVtZW50IGZyb20gRE9NJzsKCiAgZnVuY3Rpb24gUmVtb3ZlRWxlbWVudCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIGVsZW1lbnQ6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5lbGVtZW50Lm9uKCdkYXRhJywgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICBpZiAoIWVsZW1lbnQucGFyZW50Tm9kZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW1lbnQpOwogICAgfSk7CiAgfQoKICByZXR1cm4gUmVtb3ZlRWxlbWVudDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVtb3ZlRWxlbWVudDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9TZXRBdHRyaWJ1dGUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgU2V0QXR0cmlidXRlLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClNldEF0dHJpYnV0ZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoU2V0QXR0cmlidXRlLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBTZXRBdHRyaWJ1dGUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5hdHRyaWJ1dGUgPSBudWxsOwogICAgdGhpcy52YWx1ZSA9IG51bGw7CiAgICB0aGlzLmVsZW1lbnQgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIGF0dHJpYnV0ZTogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpLAogICAgICB2YWx1ZTogbmV3IG5vZmxvLlBvcnQoJ3N0cmluZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmVsZW1lbnQub24oJ2RhdGEnLCBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIF90aGlzLmVsZW1lbnQgPSBlbGVtZW50OwogICAgICBpZiAoX3RoaXMuYXR0cmlidXRlICYmIF90aGlzLnZhbHVlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnNldEF0dHJpYnV0ZSgpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5hdHRyaWJ1dGUub24oJ2RhdGEnLCBmdW5jdGlvbihhdHRyaWJ1dGUpIHsKICAgICAgX3RoaXMuYXR0cmlidXRlID0gYXR0cmlidXRlOwogICAgICBpZiAoX3RoaXMuZWxlbWVudCAmJiBfdGhpcy52YWx1ZSkgewogICAgICAgIHJldHVybiBfdGhpcy5zZXRBdHRyaWJ1dGUoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMudmFsdWUub24oJ2RhdGEnLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICBfdGhpcy52YWx1ZSA9IF90aGlzLm5vcm1hbGl6ZVZhbHVlKHZhbHVlKTsKICAgICAgaWYgKF90aGlzLmF0dHJpYnV0ZSAmJiBfdGhpcy5lbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnNldEF0dHJpYnV0ZSgpOwogICAgICB9CiAgICB9KTsKICB9CgogIFNldEF0dHJpYnV0ZS5wcm90b3R5cGUuc2V0QXR0cmlidXRlID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKHRoaXMuYXR0cmlidXRlLCB0aGlzLnZhbHVlKTsKICAgIHRoaXMudmFsdWUgPSBudWxsOwogICAgaWYgKHRoaXMub3V0UG9ydHMuZWxlbWVudC5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5lbGVtZW50LnNlbmQodGhpcy5lbGVtZW50KTsKICAgICAgcmV0dXJuIHRoaXMub3V0UG9ydHMuZWxlbWVudC5kaXNjb25uZWN0KCk7CiAgICB9CiAgfTsKCiAgU2V0QXR0cmlidXRlLnByb3RvdHlwZS5ub3JtYWxpemVWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICB2YXIga2V5LCBuZXdWYWwsIHZhbDsKICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7CiAgICAgIGlmICh0b1N0cmluZy5jYWxsKHZhbHVlKSAhPT0gJ1tvYmplY3QgQXJyYXldJykgewogICAgICAgIG5ld1ZhbCA9IFtdOwogICAgICAgIGZvciAoa2V5IGluIHZhbHVlKSB7CiAgICAgICAgICB2YWwgPSB2YWx1ZVtrZXldOwogICAgICAgICAgbmV3VmFsLnB1c2godmFsKTsKICAgICAgICB9CiAgICAgICAgdmFsdWUgPSBuZXdWYWw7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlLmpvaW4oJyAnKTsKICAgIH0KICAgIHJldHVybiB2YWx1ZTsKICB9OwoKICByZXR1cm4gU2V0QXR0cmlidXRlOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBTZXRBdHRyaWJ1dGU7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvV3JpdGVIdG1sLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFdyaXRlSHRtbCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpXcml0ZUh0bWwgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFdyaXRlSHRtbCwgX3N1cGVyKTsKCiAgV3JpdGVIdG1sLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdXcml0ZSBIVE1MIGluc2lkZSBhbiBleGlzdGluZyBlbGVtZW50JzsKCiAgZnVuY3Rpb24gV3JpdGVIdG1sKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDsKICAgIHRoaXMuaHRtbCA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIGh0bWw6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKSwKICAgICAgY29udGFpbmVyOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBjb250YWluZXI6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5odG1sLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5odG1sID0gZGF0YTsKICAgICAgaWYgKF90aGlzLmNvbnRhaW5lcikgewogICAgICAgIHJldHVybiBfdGhpcy53cml0ZUh0bWwoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuY29udGFpbmVyLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5jb250YWluZXIgPSBkYXRhOwogICAgICBpZiAoX3RoaXMuaHRtbCAhPT0gbnVsbCkgewogICAgICAgIHJldHVybiBfdGhpcy53cml0ZUh0bWwoKTsKICAgICAgfQogICAgfSk7CiAgfQoKICBXcml0ZUh0bWwucHJvdG90eXBlLndyaXRlSHRtbCA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5odG1sOwogICAgdGhpcy5odG1sID0gbnVsbDsKICAgIGlmICh0aGlzLm91dFBvcnRzLmNvbnRhaW5lci5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5jb250YWluZXIuc2VuZCh0aGlzLmNvbnRhaW5lcik7CiAgICAgIHJldHVybiB0aGlzLm91dFBvcnRzLmNvbnRhaW5lci5kaXNjb25uZWN0KCk7CiAgICB9CiAgfTsKCiAgcmV0dXJuIFdyaXRlSHRtbDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgV3JpdGVIdG1sOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL1JlbW92ZUNsYXNzLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlbW92ZUNsYXNzLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClJlbW92ZUNsYXNzID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSZW1vdmVDbGFzcywgX3N1cGVyKTsKCiAgUmVtb3ZlQ2xhc3MucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1JlbW92ZSBhIGNsYXNzIGZyb20gYW4gZWxlbWVudCc7CgogIGZ1bmN0aW9uIFJlbW92ZUNsYXNzKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuZWxlbWVudCA9IG51bGw7CiAgICB0aGlzWyJjbGFzcyJdID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICAiY2xhc3MiOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0ge307CiAgICB0aGlzLmluUG9ydHMuZWxlbWVudC5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgX3RoaXMuZWxlbWVudCA9IGRhdGE7CiAgICAgIGlmIChfdGhpc1siY2xhc3MiXSkgewogICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVDbGFzcygpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siY2xhc3MiXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgX3RoaXNbImNsYXNzIl0gPSBkYXRhOwogICAgICBpZiAoX3RoaXMuZWxlbWVudCkgewogICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVDbGFzcygpOwogICAgICB9CiAgICB9KTsKICB9CgogIFJlbW92ZUNsYXNzLnByb3RvdHlwZS5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXNbImNsYXNzIl0pOwogIH07CgogIHJldHVybiBSZW1vdmVDbGFzczsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVtb3ZlQ2xhc3M7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlcXVlc3RBbmltYXRpb25GcmFtZSwgbm9mbG8sIHJlcXVlc3RBbmltYXRpb25GcmFtZSwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBmdW5jdGlvbihjYWxsYmFjaywgZWxlbWVudCkgewogIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgIHJldHVybiBjYWxsYmFjaygrbmV3IERhdGUoKSk7CiAgfSwgMTAwMCAvIDYwKTsKfTsKClJlcXVlc3RBbmltYXRpb25GcmFtZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoUmVxdWVzdEFuaW1hdGlvbkZyYW1lLCBfc3VwZXIpOwoKICBSZXF1ZXN0QW5pbWF0aW9uRnJhbWUucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1NlbmRzIGJhbmdzIHRoYXQgY29ycmVzcG9uZCB3aXRoIHNjcmVlbiByZWZyZXNoIHJhdGUuJzsKCiAgUmVxdWVzdEFuaW1hdGlvbkZyYW1lLnByb3RvdHlwZS5pY29uID0gJ2ZpbG0nOwoKICBmdW5jdGlvbiBSZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgIHN0YXJ0OiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpLAogICAgICBzdG9wOiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnYmFuZycpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLnN0YXJ0Lm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5ydW5uaW5nID0gdHJ1ZTsKICAgICAgcmV0dXJuIF90aGlzLmFuaW1hdGUoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnN0b3Aub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgICB9KTsKICB9CgogIFJlcXVlc3RBbmltYXRpb25GcmFtZS5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMucnVubmluZykgewogICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRlLmJpbmQodGhpcykpOwogICAgICByZXR1cm4gdGhpcy5vdXRQb3J0cy5vdXQuc2VuZCh0cnVlKTsKICAgIH0KICB9OwoKICBSZXF1ZXN0QW5pbWF0aW9uRnJhbWUucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgfTsKCiAgcmV0dXJuIFJlcXVlc3RBbmltYXRpb25GcmFtZTsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVxdWVzdEFuaW1hdGlvbkZyYW1lOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWNzcy9pbmRleC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Ci8qCiAqIFRoaXMgZmlsZSBjYW4gYmUgdXNlZCBmb3IgZ2VuZXJhbCBsaWJyYXJ5IGZlYXR1cmVzIHRoYXQgYXJlIGV4cG9zZWQgYXMgQ29tbW9uSlMgbW9kdWxlcwogKiB0aGF0IHRoZSBjb21wb25lbnRzIHRoZW4gdXRpbGl6ZQogKi8KCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jc3MvY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvLWNzcyIsImRlc2NyaXB0aW9uIjoiQ2FzY2FkaW5nIFN0eWxlIFNoZWV0cyBjb21wb25lbnRzIGZvciBOb0ZsbyIsImF1dGhvciI6IkhlbnJpIEJlcmdpdXMgPGhlbnJpLmJlcmdpdXNAaWtpLmZpPiIsInJlcG8iOiJub2Zsby9ub2Zsby1jc3MiLCJ2ZXJzaW9uIjoiMC4wLjEiLCJrZXl3b3JkcyI6W10sImRlcGVuZGVuY2llcyI6eyJub2Zsby9ub2ZsbyI6IioifSwic2NyaXB0cyI6WyJjb21wb25lbnRzL01vdmVFbGVtZW50LmNvZmZlZSIsImNvbXBvbmVudHMvUm90YXRlRWxlbWVudC5jb2ZmZWUiLCJjb21wb25lbnRzL1NldEVsZW1lbnRUb3AuY29mZmVlIiwiaW5kZXguanMiXSwianNvbiI6WyJjb21wb25lbnQuanNvbiJdLCJub2ZsbyI6eyJpY29uIjoiY3NzMyIsImNvbXBvbmVudHMiOnsiTW92ZUVsZW1lbnQiOiJjb21wb25lbnRzL01vdmVFbGVtZW50LmNvZmZlZSIsIlJvdGF0ZUVsZW1lbnQiOiJjb21wb25lbnRzL1JvdGF0ZUVsZW1lbnQuY29mZmVlIiwiU2V0RWxlbWVudFRvcCI6ImNvbXBvbmVudHMvU2V0RWxlbWVudFRvcC5jb2ZmZWUifX19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jc3MvY29tcG9uZW50cy9Nb3ZlRWxlbWVudC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBNb3ZlRWxlbWVudCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpNb3ZlRWxlbWVudCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoTW92ZUVsZW1lbnQsIF9zdXBlcik7CgogIE1vdmVFbGVtZW50LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdDaGFuZ2UgdGhlIGNvb3JkaW5hdGVzIG9mIGEgRE9NIGVsZW1lbnQnOwoKICBNb3ZlRWxlbWVudC5wcm90b3R5cGUuaWNvbiA9ICdtb3ZlJzsKCiAgZnVuY3Rpb24gTW92ZUVsZW1lbnQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5lbGVtZW50ID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgZWxlbWVudDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICBwb2ludDogbmV3IG5vZmxvLlBvcnQoJ29iamVjdCcpLAogICAgICB4OiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyksCiAgICAgIHk6IG5ldyBub2Zsby5Qb3J0KCdudW1iZXInKSwKICAgICAgejogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmVsZW1lbnQub24oJ2RhdGEnLCBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIHJldHVybiBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnBvaW50Lm9uKCdkYXRhJywgZnVuY3Rpb24ocG9pbnQpIHsKICAgICAgX3RoaXMuc2V0UG9zaXRpb24oJ2xlZnQnLCAiIiArIHBvaW50LnggKyAicHgiKTsKICAgICAgcmV0dXJuIF90aGlzLnNldFBvc2l0aW9uKCd0b3AnLCAiIiArIHBvaW50LnkgKyAicHgiKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLngub24oJ2RhdGEnLCBmdW5jdGlvbih4KSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXRQb3NpdGlvbignbGVmdCcsICIiICsgeCArICJweCIpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMueS5vbignZGF0YScsIGZ1bmN0aW9uKHkpIHsKICAgICAgcmV0dXJuIF90aGlzLnNldFBvc2l0aW9uKCd0b3AnLCAiIiArIHkgKyAicHgiKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnoub24oJ2RhdGEnLCBmdW5jdGlvbih6KSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXRQb3NpdGlvbignekluZGV4Jywgeik7CiAgICB9KTsKICB9CgogIE1vdmVFbGVtZW50LnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKGF0dHIsIHZhbHVlKSB7CiAgICB0aGlzLmVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnOwogICAgcmV0dXJuIHRoaXMuZWxlbWVudC5zdHlsZVthdHRyXSA9IHZhbHVlOwogIH07CgogIHJldHVybiBNb3ZlRWxlbWVudDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgTW92ZUVsZW1lbnQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tY3NzL2NvbXBvbmVudHMvUm90YXRlRWxlbWVudC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBSb3RhdGVFbGVtZW50LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClJvdGF0ZUVsZW1lbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKFJvdGF0ZUVsZW1lbnQsIF9zdXBlcik7CgogIFJvdGF0ZUVsZW1lbnQucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NoYW5nZSB0aGUgY29vcmRpbmF0ZXMgb2YgYSBET00gZWxlbWVudCc7CgogIFJvdGF0ZUVsZW1lbnQucHJvdG90eXBlLmljb24gPSAncm90YXRlLXJpZ2h0JzsKCiAgZnVuY3Rpb24gUm90YXRlRWxlbWVudCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmVsZW1lbnQgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIHBlcmNlbnQ6IG5ldyBub2Zsby5Qb3J0KCdudW1iZXInKSwKICAgICAgZGVncmVlczogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmVsZW1lbnQub24oJ2RhdGEnLCBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIHJldHVybiBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnBlcmNlbnQub24oJ2RhdGEnLCBmdW5jdGlvbihwZXJjZW50KSB7CiAgICAgIHZhciBkZWdyZWVzOwogICAgICBpZiAoIV90aGlzLmVsZW1lbnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZGVncmVlcyA9IDM2MCAqIHBlcmNlbnQgJSAzNjA7CiAgICAgIHJldHVybiBfdGhpcy5zZXRSb3RhdGlvbihfdGhpcy5lbGVtZW50LCBkZWdyZWVzKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmRlZ3JlZXMub24oJ2RhdGEnLCBmdW5jdGlvbihkZWdyZWVzKSB7CiAgICAgIGlmICghX3RoaXMuZWxlbWVudCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuc2V0Um90YXRpb24oX3RoaXMuZWxlbWVudCwgZGVncmVlcyk7CiAgICB9KTsKICB9CgogIFJvdGF0ZUVsZW1lbnQucHJvdG90eXBlLnNldFJvdGF0aW9uID0gZnVuY3Rpb24oZWxlbWVudCwgZGVncmVlcykgewogICAgcmV0dXJuIHRoaXMuc2V0VmVuZG9yKGVsZW1lbnQsICJ0cmFuc2Zvcm0iLCAicm90YXRlKCIgKyBkZWdyZWVzICsgImRlZykiKTsKICB9OwoKICBSb3RhdGVFbGVtZW50LnByb3RvdHlwZS5zZXRWZW5kb3IgPSBmdW5jdGlvbihlbGVtZW50LCBwcm9wZXJ0eSwgdmFsdWUpIHsKICAgIHZhciBwcm9wZXJ0eUNhcDsKICAgIHByb3BlcnR5Q2FwID0gcHJvcGVydHkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wZXJ0eS5zdWJzdHIoMSk7CiAgICBlbGVtZW50LnN0eWxlWyJ3ZWJraXQiICsgcHJvcGVydHlDYXBdID0gdmFsdWU7CiAgICBlbGVtZW50LnN0eWxlWyJtb3oiICsgcHJvcGVydHlDYXBdID0gdmFsdWU7CiAgICBlbGVtZW50LnN0eWxlWyJtcyIgKyBwcm9wZXJ0eUNhcF0gPSB2YWx1ZTsKICAgIGVsZW1lbnQuc3R5bGVbIm8iICsgcHJvcGVydHlDYXBdID0gdmFsdWU7CiAgICByZXR1cm4gZWxlbWVudC5zdHlsZVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICB9OwoKICByZXR1cm4gUm90YXRlRWxlbWVudDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUm90YXRlRWxlbWVudDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jc3MvY29tcG9uZW50cy9TZXRFbGVtZW50VG9wLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFNldEVsZW1lbnRUb3AsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKU2V0RWxlbWVudFRvcCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoU2V0RWxlbWVudFRvcCwgX3N1cGVyKTsKCiAgU2V0RWxlbWVudFRvcC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnU2V0IGVsZW1lbnRcJ3MgQ1NTIHRvcCc7CgogIFNldEVsZW1lbnRUb3AucHJvdG90eXBlLmljb24gPSAncmVzaXplLXZlcnRpY2FsJzsKCiAgZnVuY3Rpb24gU2V0RWxlbWVudFRvcCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmVsZW1lbnQgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBlbGVtZW50OiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JyksCiAgICAgIHRvcDogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpCiAgICB9OwogICAgdGhpcy5pblBvcnRzLmVsZW1lbnQub24oJ2RhdGEnLCBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIHJldHVybiBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLnRvcC5vbignZGF0YScsIGZ1bmN0aW9uKHRvcCkgewogICAgICBpZiAoIV90aGlzLmVsZW1lbnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgX3RoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CiAgICAgIHJldHVybiBfdGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9ICIiICsgdG9wICsgInB4IjsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFNldEVsZW1lbnRUb3A7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFNldEVsZW1lbnRUb3A7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tbWF0aC9pbmRleC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Ci8qCiAqIFRoaXMgZmlsZSBjYW4gYmUgdXNlZCBmb3IgZ2VuZXJhbCBsaWJyYXJ5IGZlYXR1cmVzIG9mIG5vZmxvLW1hdGguCiAqCiAqIFRoZSBsaWJyYXJ5IGZlYXR1cmVzIGNhbiBiZSBtYWRlIGF2YWlsYWJsZSBhcyBDb21tb25KUyBtb2R1bGVzIHRoYXQgdGhlCiAqIGNvbXBvbmVudHMgaW4gdGhpcyBwcm9qZWN0IHV0aWxpemUuCiAqLwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50Lmpzb24iLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewptb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoJ3sibmFtZSI6Im5vZmxvLW1hdGgiLCJkZXNjcmlwdGlvbiI6Ik1hdGhlbWF0aWNhbCBjb21wb25lbnRzIGZvciBOb0ZsbyIsImF1dGhvciI6IkhlbnJpIEJlcmdpdXMgPGhlbnJpLmJlcmdpdXNAaWtpLmZpPiIsInJlcG8iOiJub2Zsby9ub2Zsby1tYXRoIiwidmVyc2lvbiI6IjAuMC4xIiwia2V5d29yZHMiOltdLCJkZXBlbmRlbmNpZXMiOnsibm9mbG8vbm9mbG8iOiIqIn0sInNjcmlwdHMiOlsiY29tcG9uZW50cy9BZGQuY29mZmVlIiwiY29tcG9uZW50cy9TdWJ0cmFjdC5jb2ZmZWUiLCJjb21wb25lbnRzL011bHRpcGx5LmNvZmZlZSIsImNvbXBvbmVudHMvRGl2aWRlLmNvZmZlZSIsImNvbXBvbmVudHMvQ2FsY3VsYXRlQW5nbGUuY29mZmVlIiwiY29tcG9uZW50cy9DYWxjdWxhdGVEaXN0YW5jZS5jb2ZmZWUiLCJjb21wb25lbnRzL0NvbXBhcmUuY29mZmVlIiwiY29tcG9uZW50cy9Db3VudFN1bS5jb2ZmZWUiLCJsaWIvTWF0aENvbXBvbmVudC5jb2ZmZWUiLCJpbmRleC5qcyJdLCJqc29uIjpbImNvbXBvbmVudC5qc29uIl0sIm5vZmxvIjp7Imljb24iOiJwbHVzLXNpZ24iLCJjb21wb25lbnRzIjp7IkFkZCI6ImNvbXBvbmVudHMvQWRkLmNvZmZlZSIsIlN1YnRyYWN0IjoiY29tcG9uZW50cy9TdWJ0cmFjdC5jb2ZmZWUiLCJNdWx0aXBseSI6ImNvbXBvbmVudHMvTXVsdGlwbHkuY29mZmVlIiwiRGl2aWRlIjoiY29tcG9uZW50cy9EaXZpZGUuY29mZmVlIiwiQ2FsY3VsYXRlQW5nbGUiOiJjb21wb25lbnRzL0NhbGN1bGF0ZUFuZ2xlLmNvZmZlZSIsIkNhbGN1bGF0ZURpc3RhbmNlIjoiY29tcG9uZW50cy9DYWxjdWxhdGVEaXN0YW5jZS5jb2ZmZWUiLCJDb21wYXJlIjoiY29tcG9uZW50cy9Db21wYXJlLmNvZmZlZSIsIkNvdW50U3VtIjoiY29tcG9uZW50cy9Db3VudFN1bS5jb2ZmZWUifX19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvQWRkLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIEFkZCwgTWF0aENvbXBvbmVudCwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCk1hdGhDb21wb25lbnQgPSByZXF1aXJlKCcuLi9saWIvTWF0aENvbXBvbmVudCcpLk1hdGhDb21wb25lbnQ7CgpBZGQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEFkZCwgX3N1cGVyKTsKCiAgQWRkLnByb3RvdHlwZS5pY29uID0gJ3BsdXMnOwoKICBmdW5jdGlvbiBBZGQoKSB7CiAgICBBZGQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgJ2F1Z2VuZCcsICdhZGRlbmQnLCAnc3VtJyk7CiAgfQoKICBBZGQucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKGF1Z2VuZCwgYWRkZW5kKSB7CiAgICByZXR1cm4gYXVnZW5kICsgYWRkZW5kOwogIH07CgogIHJldHVybiBBZGQ7Cgp9KShNYXRoQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBBZGQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tbWF0aC9jb21wb25lbnRzL1N1YnRyYWN0LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIE1hdGhDb21wb25lbnQsIFN1YnRyYWN0LAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKTWF0aENvbXBvbmVudCA9IHJlcXVpcmUoJy4uL2xpYi9NYXRoQ29tcG9uZW50JykuTWF0aENvbXBvbmVudDsKClN1YnRyYWN0ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhTdWJ0cmFjdCwgX3N1cGVyKTsKCiAgU3VidHJhY3QucHJvdG90eXBlLmljb24gPSAnbWludXMnOwoKICBmdW5jdGlvbiBTdWJ0cmFjdCgpIHsKICAgIFN1YnRyYWN0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsICdtaW51ZW5kJywgJ3N1YnRyYWhlbmQnLCAnZGlmZmVyZW5jZScpOwogIH0KCiAgU3VidHJhY3QucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKG1pbnVlbmQsIHN1YnRyYWhlbmQpIHsKICAgIHJldHVybiBtaW51ZW5kIC0gc3VidHJhaGVuZDsKICB9OwoKICByZXR1cm4gU3VidHJhY3Q7Cgp9KShNYXRoQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBTdWJ0cmFjdDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvTXVsdGlwbHkuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgTWF0aENvbXBvbmVudCwgTXVsdGlwbHksCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgpNYXRoQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vbGliL01hdGhDb21wb25lbnQnKS5NYXRoQ29tcG9uZW50OwoKTXVsdGlwbHkgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKE11bHRpcGx5LCBfc3VwZXIpOwoKICBNdWx0aXBseS5wcm90b3R5cGUuaWNvbiA9ICdhc3Rlcmlzayc7CgogIGZ1bmN0aW9uIE11bHRpcGx5KCkgewogICAgTXVsdGlwbHkuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgJ211bHRpcGxpY2FuZCcsICdtdWx0aXBsaWVyJywgJ3Byb2R1Y3QnKTsKICB9CgogIE11bHRpcGx5LnByb3RvdHlwZS5jYWxjdWxhdGUgPSBmdW5jdGlvbihtdWx0aXBsaWNhbmQsIG11bHRpcGxpZXIpIHsKICAgIHJldHVybiBtdWx0aXBsaWNhbmQgKiBtdWx0aXBsaWVyOwogIH07CgogIHJldHVybiBNdWx0aXBseTsKCn0pKE1hdGhDb21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IE11bHRpcGx5Owp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9EaXZpZGUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRGl2aWRlLCBNYXRoQ29tcG9uZW50LAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKTWF0aENvbXBvbmVudCA9IHJlcXVpcmUoJy4uL2xpYi9NYXRoQ29tcG9uZW50JykuTWF0aENvbXBvbmVudDsKCkRpdmlkZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoRGl2aWRlLCBfc3VwZXIpOwoKICBmdW5jdGlvbiBEaXZpZGUoKSB7CiAgICBEaXZpZGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgJ2RpdmlkZW5kJywgJ2Rpdmlzb3InLCAncXVvdGllbnQnKTsKICB9CgogIERpdmlkZS5wcm90b3R5cGUuY2FsY3VsYXRlID0gZnVuY3Rpb24oZGl2aWRlbmQsIGRpdmlzb3IpIHsKICAgIHJldHVybiBkaXZpZGVuZCAvIGRpdmlzb3I7CiAgfTsKCiAgcmV0dXJuIERpdmlkZTsKCn0pKE1hdGhDb21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IERpdmlkZTsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvQ2FsY3VsYXRlQW5nbGUuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ2FsY3VsYXRlQW5nbGUsIE1hdGhDb21wb25lbnQsCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07CgpNYXRoQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vbGliL01hdGhDb21wb25lbnQnKS5NYXRoQ29tcG9uZW50OwoKQ2FsY3VsYXRlQW5nbGUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENhbGN1bGF0ZUFuZ2xlLCBfc3VwZXIpOwoKICBDYWxjdWxhdGVBbmdsZS5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnQ2FsY3VsYXRlIHRoZSBhbmdsZSBiZXR3ZWVuIHR3byBwb2ludHMnOwoKICBDYWxjdWxhdGVBbmdsZS5wcm90b3R5cGUuaWNvbiA9ICdjb21wYXNzJzsKCiAgZnVuY3Rpb24gQ2FsY3VsYXRlQW5nbGUoKSB7CiAgICBDYWxjdWxhdGVBbmdsZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCAnb3JpZ2luJywgJ2Rlc3RpbmF0aW9uJywgJ2FuZ2xlJywgJ29iamVjdCcpOwogIH0KCiAgQ2FsY3VsYXRlQW5nbGUucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKG9yaWdpbiwgZGVzdGluYXRpb24pIHsKICAgIHZhciBhbmdsZSwgZGVsdGFYLCBkZWx0YVk7CiAgICBkZWx0YVggPSBkZXN0aW5hdGlvbi54IC0gb3JpZ2luLng7CiAgICBkZWx0YVkgPSBkZXN0aW5hdGlvbi55IC0gb3JpZ2luLnk7CiAgICBvcmlnaW4gPSBudWxsOwogICAgZGVzdGluYXRpb24gPSBudWxsOwogICAgYW5nbGUgPSAoTWF0aC5hdGFuMihkZWx0YVksIGRlbHRhWCkgKiAxODAgLyBNYXRoLlBJKSArIDkwOwogICAgaWYgKGFuZ2xlIDwgMCkgewogICAgICBhbmdsZSA9IGFuZ2xlICsgMzYwOwogICAgfQogICAgcmV0dXJuIGFuZ2xlOwogIH07CgogIHJldHVybiBDYWxjdWxhdGVBbmdsZTsKCn0pKE1hdGhDb21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENhbGN1bGF0ZUFuZ2xlOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9DYWxjdWxhdGVEaXN0YW5jZS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDYWxjdWxhdGVEaXN0YW5jZSwgTWF0aENvbXBvbmVudCwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCk1hdGhDb21wb25lbnQgPSByZXF1aXJlKCcuLi9saWIvTWF0aENvbXBvbmVudCcpLk1hdGhDb21wb25lbnQ7CgpDYWxjdWxhdGVEaXN0YW5jZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQ2FsY3VsYXRlRGlzdGFuY2UsIF9zdXBlcik7CgogIENhbGN1bGF0ZURpc3RhbmNlLnByb3RvdHlwZS5pY29uID0gJ2Fycm93LXJpZ2h0JzsKCiAgQ2FsY3VsYXRlRGlzdGFuY2UucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0NhbGN1bGF0ZSB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0d28gcG9pbnRzJzsKCiAgZnVuY3Rpb24gQ2FsY3VsYXRlRGlzdGFuY2UoKSB7CiAgICBDYWxjdWxhdGVEaXN0YW5jZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCAnb3JpZ2luJywgJ2Rlc3RpbmF0aW9uJywgJ2Rpc3RhbmNlJywgJ29iamVjdCcpOwogIH0KCiAgQ2FsY3VsYXRlRGlzdGFuY2UucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKG9yaWdpbiwgZGVzdGluYXRpb24pIHsKICAgIHZhciBkZWx0YVgsIGRlbHRhWSwgZGlzdGFuY2U7CiAgICBkZWx0YVggPSBkZXN0aW5hdGlvbi54IC0gb3JpZ2luLng7CiAgICBkZWx0YVkgPSBkZXN0aW5hdGlvbi55IC0gb3JpZ2luLnk7CiAgICBvcmlnaW4gPSBudWxsOwogICAgZGVzdGluYXRpb24gPSBudWxsOwogICAgZGlzdGFuY2UgPSBNYXRoLnNxcnQoTWF0aC5wb3coZGVsdGFYLCAyKSArIE1hdGgucG93KGRlbHRhWSwgMikpOwogICAgcmV0dXJuIGRpc3RhbmNlOwogIH07CgogIHJldHVybiBDYWxjdWxhdGVEaXN0YW5jZTsKCn0pKE1hdGhDb21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENhbGN1bGF0ZURpc3RhbmNlOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9Db21wYXJlLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIENvbXBhcmUsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKQ29tcGFyZSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQ29tcGFyZSwgX3N1cGVyKTsKCiAgQ29tcGFyZS5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnQ29tcGFyZSB0d28gbnVtYmVycyc7CgogIENvbXBhcmUucHJvdG90eXBlLmljb24gPSAnY2hlY2snOwoKICBmdW5jdGlvbiBDb21wYXJlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMub3BlcmF0b3IgPSAnPT0nOwogICAgdGhpcy52YWx1ZSA9IG51bGw7CiAgICB0aGlzLmNvbXBhcmlzb24gPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICB2YWx1ZTogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpLAogICAgICBjb21wYXJpc29uOiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyksCiAgICAgIG9wZXJhdG9yOiBuZXcgbm9mbG8uUG9ydCgnc3RyaW5nJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBwYXNzOiBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyksCiAgICAgIGZhaWw6IG5ldyBub2Zsby5Qb3J0KCdudW1iZXInKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5vcGVyYXRvci5vbignZGF0YScsIGZ1bmN0aW9uKG9wZXJhdG9yKSB7CiAgICAgIF90aGlzLm9wZXJhdG9yID0gb3BlcmF0b3I7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy52YWx1ZS5vbignZGF0YScsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7CiAgICAgIGlmIChfdGhpcy5jb21wYXJpc29uKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBhcmUoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMudmFsdWUub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLnBhc3MuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuY29tcGFyaXNvbi5vbignZGF0YScsIGZ1bmN0aW9uKGNvbXBhcmlzb24pIHsKICAgICAgX3RoaXMuY29tcGFyaXNvbiA9IGNvbXBhcmlzb247CiAgICAgIGlmIChfdGhpcy52YWx1ZSkgewogICAgICAgIHJldHVybiBfdGhpcy5jb21wYXJlKCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgQ29tcGFyZS5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uKCkgewogICAgc3dpdGNoICh0aGlzLm9wZXJhdG9yKSB7CiAgICAgIGNhc2UgJ2VxJzoKICAgICAgY2FzZSAnPT0nOgogICAgICAgIGlmICh0aGlzLnZhbHVlID09PSB0aGlzLmNvbXBhcmlzb24pIHsKICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQodGhpcy52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlICduZSc6CiAgICAgIGNhc2UgJyE9JzoKICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gdGhpcy5jb21wYXJpc29uKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kKHRoaXMudmFsdWUpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZ3QnOgogICAgICBjYXNlICc+JzoKICAgICAgICBpZiAodGhpcy52YWx1ZSA+IHRoaXMuY29tcGFyaXNvbikgewogICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZCh0aGlzLnZhbHVlKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2x0JzoKICAgICAgY2FzZSAnPCc6CiAgICAgICAgaWYgKHRoaXMudmFsdWUgPCB0aGlzLmNvbXBhcmlzb24pIHsKICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQodGhpcy52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdnZSc6CiAgICAgIGNhc2UgJz49JzoKICAgICAgICBpZiAodGhpcy52YWx1ZSA+PSB0aGlzLmNvbXBhcmlzb24pIHsKICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQodGhpcy52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdsZSc6CiAgICAgIGNhc2UgJzw9JzoKICAgICAgICBpZiAodGhpcy52YWx1ZSA8PSB0aGlzLmNvbXBhcmlzb24pIHsKICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQodGhpcy52YWx1ZSk7CiAgICAgICAgfQogICAgfQogICAgaWYgKCF0aGlzLm91dFBvcnRzLmZhaWwuaXNBdHRhY2hlZCgpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMub3V0UG9ydHMuZmFpbC5zZW5kKHRoaXMudmFsdWUpOwogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMuZmFpbC5kaXNjb25uZWN0KCk7CiAgfTsKCiAgQ29tcGFyZS5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKHZhbCkgewogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMucGFzcy5zZW5kKHRoaXMudmFsdWUpOwogIH07CgogIHJldHVybiBDb21wYXJlOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDb21wYXJlOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9Db3VudFN1bS5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBDb3VudFN1bSwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpDb3VudFN1bSA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoQ291bnRTdW0sIF9zdXBlcik7CgogIGZ1bmN0aW9uIENvdW50U3VtKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMucG9ydENvdW50cyA9IHt9OwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdudW1iZXInKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLkFycmF5UG9ydCgnbnVtYmVyJykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhLCBwb3J0SWQpIHsKICAgICAgcmV0dXJuIF90aGlzLmNvdW50KHBvcnRJZCwgZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKHNvY2tldCwgcG9ydElkKSB7CiAgICAgIHZhciBfaSwgX2xlbiwgX3JlZjsKICAgICAgX3JlZiA9IF90aGlzLmluUG9ydHNbImluIl0uc29ja2V0czsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgc29ja2V0ID0gX3JlZltfaV07CiAgICAgICAgaWYgKHNvY2tldC5pc0Nvbm5lY3RlZCgpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBDb3VudFN1bS5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbihwb3J0LCBkYXRhKSB7CiAgICB2YXIgaWQsIHNvY2tldCwgc3VtLCBfaSwgX2xlbiwgX3JlZjsKICAgIHN1bSA9IDA7CiAgICB0aGlzLnBvcnRDb3VudHNbcG9ydF0gPSBkYXRhOwogICAgX3JlZiA9IHRoaXMuaW5Qb3J0c1siaW4iXS5zb2NrZXRzOwogICAgZm9yIChpZCA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGlkID0gKytfaSkgewogICAgICBzb2NrZXQgPSBfcmVmW2lkXTsKICAgICAgaWYgKHR5cGVvZiB0aGlzLnBvcnRDb3VudHNbaWRdID09PSAndW5kZWZpbmVkJykgewogICAgICAgIHRoaXMucG9ydENvdW50c1tpZF0gPSAwOwogICAgICB9CiAgICAgIHN1bSArPSB0aGlzLnBvcnRDb3VudHNbaWRdOwogICAgfQogICAgcmV0dXJuIHRoaXMub3V0UG9ydHMub3V0LnNlbmQoc3VtKTsKICB9OwoKICByZXR1cm4gQ291bnRTdW07Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IENvdW50U3VtOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLW1hdGgvbGliL01hdGhDb21wb25lbnQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgTWF0aENvbXBvbmVudCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpNYXRoQ29tcG9uZW50ID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhNYXRoQ29tcG9uZW50LCBfc3VwZXIpOwoKICBmdW5jdGlvbiBNYXRoQ29tcG9uZW50KHByaW1hcnksIHNlY29uZGFyeSwgcmVzLCBpbnB1dFR5cGUpIHsKICAgIHZhciBjYWxjdWxhdGUsCiAgICAgIF90aGlzID0gdGhpczsKICAgIGlmIChpbnB1dFR5cGUgPT0gbnVsbCkgewogICAgICBpbnB1dFR5cGUgPSAnbnVtYmVyJzsKICAgIH0KICAgIHRoaXMuaW5Qb3J0cyA9IHt9OwogICAgdGhpcy5vdXRQb3J0cyA9IHt9OwogICAgdGhpcy5pblBvcnRzW3ByaW1hcnldID0gbmV3IG5vZmxvLlBvcnQoaW5wdXRUeXBlKTsKICAgIHRoaXMuaW5Qb3J0c1tzZWNvbmRhcnldID0gbmV3IG5vZmxvLlBvcnQoaW5wdXRUeXBlKTsKICAgIHRoaXMuaW5Qb3J0cy5jbGVhciA9IG5ldyBub2Zsby5Qb3J0KCdiYW5nJyk7CiAgICB0aGlzLm91dFBvcnRzW3Jlc10gPSBuZXcgbm9mbG8uUG9ydCgnbnVtYmVyJyk7CiAgICB0aGlzLnByaW1hcnkgPSB7CiAgICAgIHZhbHVlOiBudWxsLAogICAgICBncm91cDogW10sCiAgICAgIGRpc2Nvbm5lY3Q6IGZhbHNlCiAgICB9OwogICAgdGhpcy5zZWNvbmRhcnkgPSBudWxsOwogICAgdGhpcy5ncm91cHMgPSBbXTsKICAgIGNhbGN1bGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgZ3JvdXAsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYsIF9yZWYxOwogICAgICBfcmVmID0gX3RoaXMucHJpbWFyeS5ncm91cDsKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgZ3JvdXAgPSBfcmVmW19pXTsKICAgICAgICBfdGhpcy5vdXRQb3J0c1tyZXNdLmJlZ2luR3JvdXAoZ3JvdXApOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzW3Jlc10uc2VuZChfdGhpcy5jYWxjdWxhdGUoX3RoaXMucHJpbWFyeS52YWx1ZSwgX3RoaXMuc2Vjb25kYXJ5KSk7CiAgICAgIF9yZWYxID0gX3RoaXMucHJpbWFyeS5ncm91cDsKICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjEubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgICAgZ3JvdXAgPSBfcmVmMVtfal07CiAgICAgICAgX3RoaXMub3V0UG9ydHNbcmVzXS5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5wcmltYXJ5LmRpc2Nvbm5lY3QpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHNbcmVzXS5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgIH07CiAgICB0aGlzLmluUG9ydHNbcHJpbWFyeV0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbcHJpbWFyeV0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLnByaW1hcnkgPSB7CiAgICAgICAgdmFsdWU6IGRhdGEsCiAgICAgICAgZ3JvdXA6IF90aGlzLmdyb3Vwcy5zbGljZSgwKSwKICAgICAgICBkaXNjb25uZWN0OiBmYWxzZQogICAgICB9OwogICAgICBpZiAoX3RoaXMuc2Vjb25kYXJ5ICE9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZSgpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1twcmltYXJ5XS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3Vwcy5wb3AoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzW3ByaW1hcnldLm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIF90aGlzLnByaW1hcnkuZGlzY29ubmVjdCA9IHRydWU7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0c1tyZXNdLmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzW3NlY29uZGFyeV0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIF90aGlzLnNlY29uZGFyeSA9IGRhdGE7CiAgICAgIGlmIChfdGhpcy5wcmltYXJ5LnZhbHVlICE9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZSgpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5jbGVhci5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGdyb3VwLCBfaSwgX2xlbiwgX3JlZjsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzW3Jlc10uaXNDb25uZWN0ZWQoKSkgewogICAgICAgIF9yZWYgPSBfdGhpcy5wcmltYXJ5Lmdyb3VwOwogICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgICAgZ3JvdXAgPSBfcmVmW19pXTsKICAgICAgICAgIF90aGlzLm91dFBvcnRzW3Jlc10uZW5kR3JvdXAoKTsKICAgICAgICB9CiAgICAgICAgaWYgKF90aGlzLnByaW1hcnkuZGlzY29ubmVjdCkgewogICAgICAgICAgX3RoaXMub3V0UG9ydHNbcmVzXS5kaXNjb25uZWN0KCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIF90aGlzLnByaW1hcnkgPSB7CiAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgZ3JvdXA6IFtdLAogICAgICAgIGRpc2Nvbm5lY3Q6IGZhbHNlCiAgICAgIH07CiAgICAgIF90aGlzLnNlY29uZGFyeSA9IG51bGw7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMgPSBbXTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIE1hdGhDb21wb25lbnQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5NYXRoQ29tcG9uZW50ID0gTWF0aENvbXBvbmVudDsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jb3JlL2luZGV4LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKLyoKICogVGhpcyBmaWxlIGNhbiBiZSB1c2VkIGZvciBnZW5lcmFsIGxpYnJhcnkgZmVhdHVyZXMgb2YgY29yZS4KICoKICogVGhlIGxpYnJhcnkgZmVhdHVyZXMgY2FuIGJlIG1hZGUgYXZhaWxhYmxlIGFzIENvbW1vbkpTIG1vZHVsZXMgdGhhdCB0aGUKICogY29tcG9uZW50cyBpbiB0aGlzIHByb2plY3QgdXRpbGl6ZS4KICovCgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnQuanNvbiIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7Cm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJuYW1lIjoibm9mbG8tY29yZSIsImRlc2NyaXB0aW9uIjoiTm9GbG8gRXNzZW50aWFscyIsInJlcG8iOiJub2Zsby9ub2Zsby1jb3JlIiwidmVyc2lvbiI6IjAuMS4wIiwiYXV0aG9yIjp7Im5hbWUiOiJIZW5yaSBCZXJnaXVzIiwiZW1haWwiOiJoZW5yaS5iZXJnaXVzQGlraS5maSJ9LCJjb250cmlidXRvcnMiOlt7Im5hbWUiOiJLZW5uZXRoIEthbiIsImVtYWlsIjoia2VuaGthbkBnbWFpbC5jb20ifSx7Im5hbWUiOiJSeWFuIFNoYXciLCJlbWFpbCI6InJ5YW5zaGF3QHVuYy5lZHUifV0sImtleXdvcmRzIjpbXSwiZGVwZW5kZW5jaWVzIjp7Im5vZmxvL25vZmxvIjoiKiIsImNvbXBvbmVudC91bmRlcnNjb3JlIjoiKiJ9LCJzY3JpcHRzIjpbImNvbXBvbmVudHMvQ2FsbGJhY2suY29mZmVlIiwiY29tcG9uZW50cy9EaXNjb25uZWN0QWZ0ZXJQYWNrZXQuY29mZmVlIiwiY29tcG9uZW50cy9Ecm9wLmNvZmZlZSIsImNvbXBvbmVudHMvR3JvdXAuY29mZmVlIiwiY29tcG9uZW50cy9LaWNrLmNvZmZlZSIsImNvbXBvbmVudHMvTWVyZ2UuY29mZmVlIiwiY29tcG9uZW50cy9PdXRwdXQuY29mZmVlIiwiY29tcG9uZW50cy9SZXBlYXQuY29mZmVlIiwiY29tcG9uZW50cy9SZXBlYXRBc3luYy5jb2ZmZWUiLCJjb21wb25lbnRzL1NwbGl0LmNvZmZlZSIsImNvbXBvbmVudHMvUnVuSW50ZXJ2YWwuY29mZmVlIiwiY29tcG9uZW50cy9NYWtlRnVuY3Rpb24uY29mZmVlIiwiaW5kZXguanMiXSwianNvbiI6WyJjb21wb25lbnQuanNvbiJdLCJub2ZsbyI6eyJjb21wb25lbnRzIjp7IkNhbGxiYWNrIjoiY29tcG9uZW50cy9DYWxsYmFjay5jb2ZmZWUiLCJEaXNjb25uZWN0QWZ0ZXJQYWNrZXQiOiJjb21wb25lbnRzL0Rpc2Nvbm5lY3RBZnRlclBhY2tldC5jb2ZmZWUiLCJEcm9wIjoiY29tcG9uZW50cy9Ecm9wLmNvZmZlZSIsIkdyb3VwIjoiY29tcG9uZW50cy9Hcm91cC5jb2ZmZWUiLCJLaWNrIjoiY29tcG9uZW50cy9LaWNrLmNvZmZlZSIsIk1lcmdlIjoiY29tcG9uZW50cy9NZXJnZS5jb2ZmZWUiLCJPdXRwdXQiOiJjb21wb25lbnRzL091dHB1dC5jb2ZmZWUiLCJSZXBlYXQiOiJjb21wb25lbnRzL1JlcGVhdC5jb2ZmZWUiLCJSZXBlYXRBc3luYyI6ImNvbXBvbmVudHMvUmVwZWF0QXN5bmMuY29mZmVlIiwiU3BsaXQiOiJjb21wb25lbnRzL1NwbGl0LmNvZmZlZSIsIlJ1bkludGVydmFsIjoiY29tcG9uZW50cy9SdW5JbnRlcnZhbC5jb2ZmZWUiLCJNYWtlRnVuY3Rpb24iOiJjb21wb25lbnRzL01ha2VGdW5jdGlvbi5jb2ZmZWUifX19Jyk7Cn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvQ2FsbGJhY2suanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgQ2FsbGJhY2ssIG5vZmxvLCBfLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKXyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUnKS5fOwoKQ2FsbGJhY2sgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKENhbGxiYWNrLCBfc3VwZXIpOwoKICBDYWxsYmFjay5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnVGhpcyBjb21wb25lbnQgY2FsbHMgYSBnaXZlbiBjYWxsYmFjayBmdW5jdGlvbiBmb3IgZWFjaFwKICBJUCBpdCByZWNlaXZlcy4gIFRoZSBDYWxsYmFjayBjb21wb25lbnQgaXMgdHlwaWNhbGx5IHVzZWQgdG8gY29ubmVjdFwKICBOb0ZsbyB3aXRoIGV4dGVybmFsIE5vZGUuanMgY29kZS4nOwoKICBDYWxsYmFjay5wcm90b3R5cGUuaWNvbiA9ICdzaWdub3V0JzsKCiAgZnVuY3Rpb24gQ2FsbGJhY2soKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5jYWxsYmFjayA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKSwKICAgICAgY2FsbGJhY2s6IG5ldyBub2Zsby5Qb3J0KCdmdW5jdGlvbicpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgZXJyb3I6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5jYWxsYmFjay5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKCFfLmlzRnVuY3Rpb24oZGF0YSkpIHsKICAgICAgICBfdGhpcy5lcnJvcignVGhlIHByb3ZpZGVkIGNhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbicpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gX3RoaXMuY2FsbGJhY2sgPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIGlmICghX3RoaXMuY2FsbGJhY2spIHsKICAgICAgICBfdGhpcy5lcnJvcignTm8gY2FsbGJhY2sgcHJvdmlkZWQnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLmNhbGxiYWNrKGRhdGEpOwogICAgfSk7CiAgfQoKICBDYWxsYmFjay5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihtc2cpIHsKICAgIGlmICh0aGlzLm91dFBvcnRzLmVycm9yLmlzQXR0YWNoZWQoKSkgewogICAgICB0aGlzLm91dFBvcnRzLmVycm9yLnNlbmQobmV3IEVycm9yKG1zZykpOwogICAgICB0aGlzLm91dFBvcnRzLmVycm9yLmRpc2Nvbm5lY3QoKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7CiAgfTsKCiAgcmV0dXJuIENhbGxiYWNrOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBDYWxsYmFjazsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvRGlzY29ubmVjdEFmdGVyUGFja2V0LmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIERpc2Nvbm5lY3RBZnRlclBhY2tldCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpEaXNjb25uZWN0QWZ0ZXJQYWNrZXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKERpc2Nvbm5lY3RBZnRlclBhY2tldCwgX3N1cGVyKTsKCiAgRGlzY29ubmVjdEFmdGVyUGFja2V0LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdGb3J3YXJkcyBhbnkgcGFja2V0cywgYnV0IGFsc28gc2VuZHMgYSBkaXNjb25uZWN0IGFmdGVyIGVhY2ggb2YgdGhlbSc7CgogIERpc2Nvbm5lY3RBZnRlclBhY2tldC5wcm90b3R5cGUuaWNvbiA9ICdwYXVzZSc7CgogIGZ1bmN0aW9uIERpc2Nvbm5lY3RBZnRlclBhY2tldCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gRGlzY29ubmVjdEFmdGVyUGFja2V0OwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBEaXNjb25uZWN0QWZ0ZXJQYWNrZXQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0Ryb3AuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgRHJvcCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpEcm9wID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhEcm9wLCBfc3VwZXIpOwoKICBEcm9wLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdUaGlzIGNvbXBvbmVudCBkcm9wcyBldmVyeSBwYWNrZXQgaXQgcmVjZWl2ZXMgd2l0aCBub1wKICBhY3Rpb24nOwoKICBEcm9wLnByb3RvdHlwZS5pY29uID0gJ3RyYXNoJzsKCiAgZnVuY3Rpb24gRHJvcCgpIHsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLkFycmF5UG9ydCgnYWxsJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0ge307CiAgfQoKICByZXR1cm4gRHJvcDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgRHJvcDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvR3JvdXAuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgR3JvdXAsIG5vZmxvLAogIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LAogIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9OwoKbm9mbG8gPSByZXF1aXJlKCdub2ZsbycpOwoKR3JvdXAgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEdyb3VwLCBfc3VwZXIpOwoKICBHcm91cC5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSAnQWRkcyBhIHNldCBvZiBncm91cHMgYXJvdW5kIHRoZSBwYWNrZXRzIHJlY2VpdmVkIGF0IGVhY2ggY29ubmVjdGlvbic7CgogIEdyb3VwLnByb3RvdHlwZS5pY29uID0gJ3RhZ3MnOwoKICBmdW5jdGlvbiBHcm91cCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmdyb3VwcyA9IFtdOwogICAgdGhpcy5uZXdHcm91cHMgPSBbXTsKICAgIHRoaXMudGhyZXNob2xkID0gbnVsbDsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLkFycmF5UG9ydCgnYWxsJyksCiAgICAgIGdyb3VwOiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdzdHJpbmcnKSwKICAgICAgdGhyZXNob2xkOiBuZXcgbm9mbG8uUG9ydCgnaW50ZWdlcicpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnYWxsJykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGdyb3VwLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7CiAgICAgIF9yZWYgPSBfdGhpcy5uZXdHcm91cHM7CiAgICAgIF9yZXN1bHRzID0gW107CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGdyb3VwID0gX3JlZltfaV07CiAgICAgICAgX3Jlc3VsdHMucHVzaChfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCkpOwogICAgICB9CiAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgZ3JvdXAsIF9pLCBfbGVuLCBfcmVmOwogICAgICBfcmVmID0gX3RoaXMubmV3R3JvdXBzOwogICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICBncm91cCA9IF9yZWZbX2ldOwogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMgPSBbXTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzLmdyb3VwLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgZGlmZjsKICAgICAgaWYgKF90aGlzLnRocmVzaG9sZCkgewogICAgICAgIGRpZmYgPSBfdGhpcy5uZXdHcm91cHMubGVuZ3RoIC0gX3RoaXMudGhyZXNob2xkICsgMTsKICAgICAgICBpZiAoZGlmZiA+IDApIHsKICAgICAgICAgIF90aGlzLm5ld0dyb3VwcyA9IF90aGlzLm5ld0dyb3Vwcy5zbGljZShkaWZmKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm5ld0dyb3Vwcy5wdXNoKGRhdGEpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMudGhyZXNob2xkLm9uKCdkYXRhJywgZnVuY3Rpb24odGhyZXNob2xkKSB7CiAgICAgIF90aGlzLnRocmVzaG9sZCA9IHRocmVzaG9sZDsKICAgIH0pOwogIH0KCiAgcmV0dXJuIEdyb3VwOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBHcm91cDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvS2ljay5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBLaWNrLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCktpY2sgPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKEtpY2ssIF9zdXBlcik7CgogIEtpY2sucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1RoaXMgY29tcG9uZW50IGdlbmVyYXRlcyBhIHNpbmdsZSBwYWNrZXQgYW5kIHNlbmRzIGl0IHRvXAogIHRoZSBvdXRwdXQgcG9ydC4gTW9zdGx5IHVzYWJsZSBmb3IgZGVidWdnaW5nLCBidXQgY2FuIGFsc28gYmUgdXNlZnVsXAogIGZvciBzdGFydGluZyB1cCBuZXR3b3Jrcy4nOwoKICBLaWNrLnByb3RvdHlwZS5pY29uID0gJ3NoYXJlJzsKCiAgZnVuY3Rpb24gS2ljaygpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmRhdGEgPSB7CiAgICAgIHBhY2tldDogbnVsbCwKICAgICAgZ3JvdXA6IFtdCiAgICB9OwogICAgdGhpcy5ncm91cHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKSwKICAgICAgZGF0YTogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignYmVnaW5ncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMucHVzaChncm91cCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMuZGF0YS5ncm91cCA9IF90aGlzLmdyb3Vwcy5zbGljZSgwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKGdyb3VwKSB7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cHMucG9wKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICBfdGhpcy5zZW5kS2ljayhfdGhpcy5kYXRhKTsKICAgICAgcmV0dXJuIF90aGlzLmdyb3VwcyA9IFtdOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuZGF0YS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLmRhdGEucGFja2V0ID0gZGF0YTsKICAgIH0pOwogIH0KCiAgS2ljay5wcm90b3R5cGUuc2VuZEtpY2sgPSBmdW5jdGlvbihraWNrKSB7CiAgICB2YXIgZ3JvdXAsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYsIF9yZWYxOwogICAgX3JlZiA9IGtpY2suZ3JvdXA7CiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgZ3JvdXAgPSBfcmVmW19pXTsKICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICB9CiAgICB0aGlzLm91dFBvcnRzLm91dC5zZW5kKGtpY2sucGFja2V0KTsKICAgIF9yZWYxID0ga2ljay5ncm91cDsKICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICBncm91cCA9IF9yZWYxW19qXTsKICAgICAgdGhpcy5vdXRQb3J0cy5vdXQuZW5kR3JvdXAoKTsKICAgIH0KICAgIHJldHVybiB0aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgfTsKCiAgcmV0dXJuIEtpY2s7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IEtpY2s7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL01lcmdlLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIE1lcmdlLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCk1lcmdlID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhNZXJnZSwgX3N1cGVyKTsKCiAgTWVyZ2UucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1RoaXMgY29tcG9uZW50IHJlY2VpdmVzIGRhdGEgb24gbXVsdGlwbGUgaW5wdXQgcG9ydHMgYW5kXAogICAgc2VuZHMgdGhlIHNhbWUgZGF0YSBvdXQgdG8gdGhlIGNvbm5lY3RlZCBvdXRwdXQgcG9ydCc7CgogIE1lcmdlLnByb3RvdHlwZS5pY29uID0gJ3Jlc2l6ZS1zbWFsbCc7CgogIGZ1bmN0aW9uIE1lcmdlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLkFycmF5UG9ydCgnYWxsJykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmNvbm5lY3QoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNvY2tldCwgX2ksIF9sZW4sIF9yZWY7CiAgICAgIF9yZWYgPSBfdGhpcy5pblBvcnRzWyJpbiJdLnNvY2tldHM7CiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIHNvY2tldCA9IF9yZWZbX2ldOwogICAgICAgIGlmIChzb2NrZXQuY29ubmVjdGVkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICByZXR1cm4gTWVyZ2U7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IE1lcmdlOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWNvcmUvY29tcG9uZW50cy9PdXRwdXQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgT3V0cHV0LCBub2ZsbywgdXRpbCwKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKCmlmICghbm9mbG8uaXNCcm93c2VyKCkpIHsKICB1dGlsID0gcmVxdWlyZSgndXRpbCcpOwp9IGVsc2UgewogIHV0aWwgPSB7CiAgICBpbnNwZWN0OiBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBkYXRhOwogICAgfQogIH07Cn0KCk91dHB1dCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoT3V0cHV0LCBfc3VwZXIpOwoKICBPdXRwdXQucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1RoaXMgY29tcG9uZW50IHJlY2VpdmVzIGlucHV0IG9uIGEgc2luZ2xlIGlucG9ydCwgYW5kXAogICAgc2VuZHMgdGhlIGRhdGEgaXRlbXMgZGlyZWN0bHkgdG8gY29uc29sZS5sb2cnOwoKICBPdXRwdXQucHJvdG90eXBlLmljb24gPSAnYnVnJzsKCiAgZnVuY3Rpb24gT3V0cHV0KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMub3B0aW9ucyA9IG51bGw7CiAgICB0aGlzLmluUG9ydHMgPSB7CiAgICAgICJpbiI6IG5ldyBub2Zsby5BcnJheVBvcnQoJ2FsbCcpLAogICAgICBvcHRpb25zOiBuZXcgbm9mbG8uUG9ydCgnb2JqZWN0JykKICAgIH07CiAgICB0aGlzLm91dFBvcnRzID0gewogICAgICBvdXQ6IG5ldyBub2Zsby5Qb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgX3RoaXMubG9nKGRhdGEpOwogICAgICBpZiAoX3RoaXMub3V0UG9ydHMub3V0LmlzQXR0YWNoZWQoKSkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKF90aGlzLm91dFBvcnRzLm91dC5pc0F0dGFjaGVkKCkpIHsKICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLmluUG9ydHMub3B0aW9ucy5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIF90aGlzLnNldE9wdGlvbnMoZGF0YSk7CiAgICB9KTsKICB9CgogIE91dHB1dC5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgIHZhciBrZXksIHZhbHVlLCBfcmVzdWx0czsKICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdPcHRpb25zIGlzIG5vdCBhbiBvYmplY3QnKTsKICAgIH0KICAgIGlmICh0aGlzLm9wdGlvbnMgPT0gbnVsbCkgewogICAgICB0aGlzLm9wdGlvbnMgPSB7fTsKICAgIH0KICAgIF9yZXN1bHRzID0gW107CiAgICBmb3IgKGtleSBpbiBvcHRpb25zKSB7CiAgICAgIGlmICghX19oYXNQcm9wLmNhbGwob3B0aW9ucywga2V5KSkgY29udGludWU7CiAgICAgIHZhbHVlID0gb3B0aW9uc1trZXldOwogICAgICBfcmVzdWx0cy5wdXNoKHRoaXMub3B0aW9uc1trZXldID0gdmFsdWUpOwogICAgfQogICAgcmV0dXJuIF9yZXN1bHRzOwogIH07CgogIE91dHB1dC5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24oZGF0YSkgewogICAgaWYgKHRoaXMub3B0aW9ucyAhPSBudWxsKSB7CiAgICAgIHJldHVybiBjb25zb2xlLmxvZyh1dGlsLmluc3BlY3QoZGF0YSwgdGhpcy5vcHRpb25zLnNob3dIaWRkZW4sIHRoaXMub3B0aW9ucy5kZXB0aCwgdGhpcy5vcHRpb25zLmNvbG9ycykpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGRhdGEpOwogICAgfQogIH07CgogIHJldHVybiBPdXRwdXQ7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IE91dHB1dCgpOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWNvcmUvY29tcG9uZW50cy9SZXBlYXQuanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgUmVwZWF0LCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClJlcGVhdCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoUmVwZWF0LCBfc3VwZXIpOwoKICBSZXBlYXQucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ0ZvcndhcmRzIHBhY2tldHMgYW5kIG1ldGFkYXRhIGluIHRoZSBzYW1lIHdheSBpdCByZWNlaXZlcyB0aGVtJzsKCiAgUmVwZWF0LnByb3RvdHlwZS5pY29uID0gJ2ZvcndhcmQnOwoKICBmdW5jdGlvbiBSZXBlYXQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgpCiAgICB9OwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdjb25uZWN0JywgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuY29ubmVjdCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmJlZ2luR3JvdXAoZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZChkYXRhKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdlbmRncm91cCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmVuZEdyb3VwKCk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFJlcGVhdDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVwZWF0KCk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL1JlcGVhdEFzeW5jLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJlcGVhdEFzeW5jLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClJlcGVhdEFzeW5jID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSZXBlYXRBc3luYywgX3N1cGVyKTsKCiAgUmVwZWF0QXN5bmMucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gIkxpa2UgJ1JlcGVhdCcsIGV4Y2VwdCByZXBlYXQgb24gbmV4dCB0aWNrIjsKCiAgUmVwZWF0QXN5bmMucHJvdG90eXBlLmljb24gPSAnc3RlcC1mb3J3YXJkJzsKCiAgZnVuY3Rpb24gUmVwZWF0QXN5bmMoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5ncm91cHMgPSBbXTsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uUG9ydCgnYWxsJykKICAgIH07CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2JlZ2luZ3JvdXAnLCBmdW5jdGlvbihncm91cCkgewogICAgICByZXR1cm4gX3RoaXMuZ3JvdXBzLnB1c2goZ3JvdXApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBncm91cHMsIGxhdGVyOwogICAgICBncm91cHMgPSBfdGhpcy5ncm91cHM7CiAgICAgIGxhdGVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGdyb3VwLCBfaSwgX2osIF9sZW4sIF9sZW4xOwogICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gZ3JvdXBzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgICBncm91cCA9IGdyb3Vwc1tfaV07CiAgICAgICAgICBfdGhpcy5vdXRQb3J0cy5vdXQuYmVnaW5Hcm91cChncm91cCk7CiAgICAgICAgfQogICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKGRhdGEpOwogICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IGdyb3Vwcy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHsKICAgICAgICAgIGdyb3VwID0gZ3JvdXBzW19qXTsKICAgICAgICAgIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgfTsKICAgICAgcmV0dXJuIHNldFRpbWVvdXQobGF0ZXIsIDApOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLmdyb3VwcyA9IFtdOwogICAgfSk7CiAgfQoKICByZXR1cm4gUmVwZWF0QXN5bmM7Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFJlcGVhdEFzeW5jOwp9OwoKfSk7CnJlcXVpcmUucmVnaXN0ZXIoIm5vZmxvLW5vZmxvLWNvcmUvY29tcG9uZW50cy9TcGxpdC5qcyIsIGZ1bmN0aW9uKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSl7CnZhciBTcGxpdCwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpTcGxpdCA9IChmdW5jdGlvbihfc3VwZXIpIHsKICBfX2V4dGVuZHMoU3BsaXQsIF9zdXBlcik7CgogIFNwbGl0LnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdUaGlzIGNvbXBvbmVudCByZWNlaXZlcyBkYXRhIG9uIGEgc2luZ2xlIGlucHV0IHBvcnQgYW5kXAogICAgc2VuZHMgdGhlIHNhbWUgZGF0YSBvdXQgdG8gYWxsIGNvbm5lY3RlZCBvdXRwdXQgcG9ydHMnOwoKICBTcGxpdC5wcm90b3R5cGUuaWNvbiA9ICdyZXNpemUtZnVsbCc7CgogIGZ1bmN0aW9uIFNwbGl0KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHRoaXMuaW5Qb3J0cyA9IHsKICAgICAgImluIjogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpCiAgICB9OwogICAgdGhpcy5vdXRQb3J0cyA9IHsKICAgICAgb3V0OiBuZXcgbm9mbG8uQXJyYXlQb3J0KCdhbGwnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LmNvbm5lY3QoKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdiZWdpbmdyb3VwJywgZnVuY3Rpb24oZ3JvdXApIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5iZWdpbkdyb3VwKGdyb3VwKTsKICAgIH0pOwogICAgdGhpcy5pblBvcnRzWyJpbiJdLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkgewogICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQoZGF0YSk7CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZW5kZ3JvdXAnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5lbmRHcm91cCgpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHNbImluIl0ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5kaXNjb25uZWN0KCk7CiAgICB9KTsKICB9CgogIHJldHVybiBTcGxpdDsKCn0pKG5vZmxvLkNvbXBvbmVudCk7CgpleHBvcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgU3BsaXQ7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3Rlcigibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL1J1bkludGVydmFsLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIFJ1bkludGVydmFsLCBub2ZsbywKICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTsKCm5vZmxvID0gcmVxdWlyZSgnbm9mbG8nKTsKClJ1bkludGVydmFsID0gKGZ1bmN0aW9uKF9zdXBlcikgewogIF9fZXh0ZW5kcyhSdW5JbnRlcnZhbCwgX3N1cGVyKTsKCiAgUnVuSW50ZXJ2YWwucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gJ1NlbmQgYSBwYWNrZXQgYXQgdGhlIGdpdmVuIGludGVydmFsJzsKCiAgUnVuSW50ZXJ2YWwucHJvdG90eXBlLmljb24gPSAnY2xvY2snOwoKICBmdW5jdGlvbiBSdW5JbnRlcnZhbCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLnRpbWVyID0gbnVsbDsKICAgIHRoaXMuaW50ZXJ2YWwgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICBpbnRlcnZhbDogbmV3IG5vZmxvLlBvcnQoJ251bWJlcicpLAogICAgICBzdGFydDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKSwKICAgICAgc3RvcDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ2JhbmcnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0cy5pbnRlcnZhbC5vbignZGF0YScsIGZ1bmN0aW9uKGludGVydmFsKSB7CiAgICAgIF90aGlzLmludGVydmFsID0gaW50ZXJ2YWw7CiAgICAgIGlmIChfdGhpcy50aW1lciAhPSBudWxsKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbChfdGhpcy50aW1lcik7CiAgICAgICAgcmV0dXJuIF90aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHMub3V0LnNlbmQodHJ1ZSk7CiAgICAgICAgfSwgX3RoaXMuaW50ZXJ2YWwpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0cy5zdGFydC5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoX3RoaXMudGltZXIgIT0gbnVsbCkgewogICAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMudGltZXIpOwogICAgICB9CiAgICAgIF90aGlzLm91dFBvcnRzLm91dC5jb25uZWN0KCk7CiAgICAgIHJldHVybiBfdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuc2VuZCh0cnVlKTsKICAgICAgfSwgX3RoaXMuaW50ZXJ2YWwpOwogICAgfSk7CiAgICB0aGlzLmluUG9ydHMuc3RvcC5vbignZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoIV90aGlzLnRpbWVyKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMudGltZXIpOwogICAgICBfdGhpcy50aW1lciA9IG51bGw7CiAgICAgIHJldHVybiBfdGhpcy5vdXRQb3J0cy5vdXQuZGlzY29ubmVjdCgpOwogICAgfSk7CiAgfQoKICBSdW5JbnRlcnZhbC5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLnRpbWVyICE9IG51bGwpIHsKICAgICAgcmV0dXJuIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICB9CiAgfTsKCiAgcmV0dXJuIFJ1bkludGVydmFsOwoKfSkobm9mbG8uQ29tcG9uZW50KTsKCmV4cG9ydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBSdW5JbnRlcnZhbDsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvTWFrZUZ1bmN0aW9uLmpzIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKdmFyIE1ha2VGdW5jdGlvbiwgbm9mbG8sCiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksCiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07Cgpub2ZsbyA9IHJlcXVpcmUoJ25vZmxvJyk7CgpNYWtlRnVuY3Rpb24gPSAoZnVuY3Rpb24oX3N1cGVyKSB7CiAgX19leHRlbmRzKE1ha2VGdW5jdGlvbiwgX3N1cGVyKTsKCiAgTWFrZUZ1bmN0aW9uLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9ICdFdmFsdWF0ZXMgYSBmdW5jdGlvbiBlYWNoIHRpbWUgZGF0YSBoaXRzIHRoZSAiaW4iIHBvcnRcCiAgYW5kIHNlbmRzIHRoZSByZXR1cm4gdmFsdWUgdG8gIm91dCIuIFdpdGhpbiB0aGUgZnVuY3Rpb24gIngiIHdpbGxcCiAgYmUgdGhlIHZhcmlhYmxlIGZyb20gdGhlIGluIHBvcnQuIEZvciBleGFtcGxlLCB0byBtYWtlIGEgXjIgZnVuY3Rpb25cCiAgaW5wdXQgInJldHVybiB4Kng7IiB0byB0aGUgZnVuY3Rpb24gcG9ydC4nOwoKICBNYWtlRnVuY3Rpb24ucHJvdG90eXBlLmljb24gPSAnY29kZSc7CgogIGZ1bmN0aW9uIE1ha2VGdW5jdGlvbigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmYgPSBudWxsOwogICAgdGhpcy5pblBvcnRzID0gewogICAgICAiaW4iOiBuZXcgbm9mbG8uUG9ydCgnYWxsJyksCiAgICAgICJmdW5jdGlvbiI6IG5ldyBub2Zsby5Qb3J0KCdzdHJpbmcnKQogICAgfTsKICAgIHRoaXMub3V0UG9ydHMgPSB7CiAgICAgIG91dDogbmV3IG5vZmxvLlBvcnQoJ2FsbCcpLAogICAgICAiZnVuY3Rpb24iOiBuZXcgbm9mbG8uUG9ydCgnZnVuY3Rpb24nKSwKICAgICAgZXJyb3I6IG5ldyBub2Zsby5Qb3J0KCdvYmplY3QnKQogICAgfTsKICAgIHRoaXMuaW5Qb3J0c1siZnVuY3Rpb24iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgdmFyIGVycm9yOwogICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICBfdGhpcy5mID0gZGF0YTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0cnkgewogICAgICAgICAgX3RoaXMuZiA9IEZ1bmN0aW9uKCJ4IiwgZGF0YSk7CiAgICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7CiAgICAgICAgICBlcnJvciA9IF9lcnJvcjsKICAgICAgICAgIF90aGlzLmVycm9yKCdFcnJvciBjcmVhdGluZyBmdW5jdGlvbjogJyArIGRhdGEpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoX3RoaXMuZikgewogICAgICAgIHRyeSB7CiAgICAgICAgICBfdGhpcy5mKHRydWUpOwogICAgICAgICAgaWYgKF90aGlzLm91dFBvcnRzWyJmdW5jdGlvbiJdLmlzQXR0YWNoZWQoKSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMub3V0UG9ydHNbImZ1bmN0aW9uIl0uc2VuZChfdGhpcy5mKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHsKICAgICAgICAgIGVycm9yID0gX2Vycm9yOwogICAgICAgICAgcmV0dXJuIF90aGlzLmVycm9yKCdFcnJvciBldmFsdWF0aW5nIGZ1bmN0aW9uOiAnICsgZGF0YSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHRoaXMuaW5Qb3J0c1siaW4iXS5vbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgaWYgKCFfdGhpcy5mKSB7CiAgICAgICAgX3RoaXMuZXJyb3IoJ05vIGZ1bmN0aW9uIGRlZmluZWQnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLm91dFBvcnRzLm91dC5zZW5kKF90aGlzLmYoZGF0YSkpOwogICAgfSk7CiAgfQoKICBNYWtlRnVuY3Rpb24ucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24obXNnKSB7CiAgICBpZiAodGhpcy5vdXRQb3J0cy5lcnJvci5pc0F0dGFjaGVkKCkpIHsKICAgICAgdGhpcy5vdXRQb3J0cy5lcnJvci5zZW5kKG5ldyBFcnJvcihtc2cpKTsKICAgICAgdGhpcy5vdXRQb3J0cy5lcnJvci5kaXNjb25uZWN0KCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRocm93IG5ldyBFcnJvcihtc2cpOwogIH07CgogIHJldHVybiBNYWtlRnVuY3Rpb247Cgp9KShub2Zsby5Db21wb25lbnQpOwoKZXhwb3J0cy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IE1ha2VGdW5jdGlvbjsKfTsKCn0pOwpyZXF1aXJlLnJlZ2lzdGVyKCJ0aGUtYmVoYXZpb3IvaW5kZXguanMiLCBmdW5jdGlvbihleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUpewp2YXIgbm9mbG8gPSByZXF1aXJlKCcvbm9mbG8tbm9mbG8nKTsKCmV4cG9ydHMucnVuR3JhcGggPSBmdW5jdGlvbiAoZ3JhcGgsIGNhbGxiYWNrKSB7CiAgZ3JhcGguYmFzZURpciA9ICd0aGUtYmVoYXZpb3InOwogIG5vZmxvLmNyZWF0ZU5ldHdvcmsoZ3JhcGgsIGNhbGxiYWNrKTsKfTsKCmV4cG9ydHMucHJlcGFyZUdyYXBoID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7CiAgdmFyIGdyYXBoID0gbmV3IG5vZmxvLkdyYXBoKCd0aGUtYmVoYXZpb3JzJyk7CiAgdmFyIGJlaGF2aW9ycyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGluc3RhbmNlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0aGUtYmVoYXZpb3InKSk7CgogIC8vIFdlIHVzZSBhIHNpbmdsZSBsaXN0ZW5lciBmb3IgYWxsIGJlaGF2aW9ycwogIHByZXZOb2RlID0gZXhwb3J0cy5wcmVwYXJlTGlzdGVuZXIoZ3JhcGgsIGluc3RhbmNlKTsKCiAgdmFyIGNvbXBvbmVudExvYWRlciA9IHJlcXVpcmUoJy9ub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlcicpOwogIHZhciBsb2FkZXIgPSBuZXcgY29tcG9uZW50TG9hZGVyLkNvbXBvbmVudExvYWRlcigndGhlLWJlaGF2aW9yJyk7CiAgbG9hZGVyLmxpc3RDb21wb25lbnRzKGZ1bmN0aW9uICgpIHt9KTsKCiAgLy8gQ29udHJvbCBkZXRlY3Rpb24gd2l0aCBhIGdhdGUuIFdoZW4gYW55IGJlaGF2aW9yIGhhcyBiZWVuIHJlY29nbml6ZWQgd2Ugc3RvcAogIC8vIGRldGVjdGlvbgogIGdyYXBoLmFkZE5vZGUoJ0RldGVjdCcsICdmbG93L0dhdGUnKTsKICBncmFwaC5hZGROb2RlKCdBbGxvd0RldGVjdCcsICdjb3JlL01lcmdlJyk7CiAgZ3JhcGguYWRkRWRnZSgnQWxsb3dEZXRlY3QnLCAnb3V0JywgJ0RldGVjdCcsICdvcGVuJyk7CiAgZ3JhcGguYWRkTm9kZSgnU3RvcERldGVjdCcsICdjb3JlL01lcmdlJyk7CiAgZ3JhcGguYWRkRWRnZSgnU3RvcERldGVjdCcsICdvdXQnLCAnRGV0ZWN0JywgJ2Nsb3NlJyk7CiAgZ3JhcGguYWRkTm9kZSgnU3BsaXRHZXN0dXJlJywgJ2NvcmUvU3BsaXQnKTsKICBncmFwaC5hZGRFZGdlKCdMaXN0ZW4nLCAnb3V0JywgJ1NwbGl0R2VzdHVyZScsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ1NwbGl0R2VzdHVyZScsICdvdXQnLCAnRGV0ZWN0JywgJ2luJyk7CiAgLy8gd2hlbiB0aGF0IGdlc3R1cmUgZW5kcyB3ZSByZW9wZW4gaXQKICBncmFwaC5hZGROb2RlKCdBZnRlckdlc3R1cmVSZWFsbG93RGV0ZWN0JywgJ2NvcmUvS2ljaycpOwogIGdyYXBoLmFkZEVkZ2UoJ1NwbGl0R2VzdHVyZScsICdvdXQnLCAnQWZ0ZXJHZXN0dXJlUmVhbGxvd0RldGVjdCcsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ0FmdGVyR2VzdHVyZVJlYWxsb3dEZXRlY3QnLCAnb3V0JywgJ0FsbG93RGV0ZWN0JywgJ2luJyk7CgogIC8vIEluaXRpYWxseSBkZXRlY3Rpb24gaXMgZW5hYmxlZAogIGdyYXBoLmFkZEluaXRpYWwodHJ1ZSwgJ0FsbG93RGV0ZWN0JywgJ2luJyk7CgogIC8vIENvbm5lY3QgbGlzdGVuZXIgdG8gZGV0ZWN0aW9uCgogIHByZXZOb2RlID0gWydEZXRlY3QnLCAnb3V0J107CiAgYmVoYXZpb3JzLmZvckVhY2goZnVuY3Rpb24gKGJlaGF2aW9yLCBpZHgpIHsKICAgIC8vIEJ1aWxkIGEgc3ViZ3JhcGggZm9yIHRoZSBiZWhhdmlvcgogICAgdmFyIGlkID0gYmVoYXZpb3IudHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGJlaGF2aW9yLnR5cGUuc2xpY2UoMSkgKyBpZHg7CiAgICBiZWhhdmlvci5jb250YWluZXIgPSBpbnN0YW5jZS5jb250YWluZXI7CiAgICB2YXIgc3ViZ3JhcGggPSBleHBvcnRzLnByZXBhcmVEZXRlY3Rpb25HcmFwaChiZWhhdmlvcik7CiAgICAvL2NvbnNvbGUubG9nKHN1YmdyYXBoLnRvRE9UKCkpOwogICAgc3ViZ3JhcGguYmFzZURpciA9ICd0aGUtYmVoYXZpb3InOwogICAgbG9hZGVyLmxvYWRHcmFwaChpZCwgc3ViZ3JhcGgsIGZ1bmN0aW9uIChpbnN0YW5jZSkgewogICAgICB2YXIgZ3JhcGhOb2RlID0gZ3JhcGguYWRkTm9kZShpZCwgaW5zdGFuY2UpOwoKICAgICAgLy8gQ29ubmVjdCBpdCB3aXRoIG91ciBsaXN0ZW5lcgogICAgICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgaWQsICdkZXRlY3QnKTsKICAgICAgZ3JhcGguYWRkRWRnZSgnU3BsaXRHZXN0dXJlJywgJ291dCcsIGlkLCAnaW4nKTsKCiAgICAgIC8vIElmIHRoZSBiZWhhdmlvciBwYXNzZXMgd2UgY2FuIHN0b3AgZGV0ZWN0aW9uCiAgICAgIGdyYXBoLmFkZEVkZ2UoaWQsICdwYXNzJywgJ1N0b3BEZXRlY3QnLCAnaW4nKTsKICAgIH0pOwoKICAgIC8vIElmIHRoaXMgYmVoYXZpb3IgZmFpbHMsIHRyeSBuZXh0IG9uZQogICAgcHJldk5vZGUgPSBbaWQsICdmYWlsJ107CiAgfSk7CgogIC8vIElmIGFsbCBkZXRlY3Rpb24gZmFpbGVkLCBjbG9zZSBkZXRlY3Rpb24KICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgJ1N0b3BEZXRlY3QnLCAnaW4nKTsKCiAgcmV0dXJuIGdyYXBoOwp9CgpleHBvcnRzLnByZXBhcmVEZXRlY3Rpb25HcmFwaCA9IGZ1bmN0aW9uIChpbnN0YW5jZSkgewogIHZhciBwcmV2Tm9kZTsKCiAgLy8gSW5pdGlhbGl6ZSBzdWJncmFwaAogIHZhciBncmFwaCA9IG5ldyBub2Zsby5HcmFwaChpbnN0YW5jZS50eXBlKTsKCiAgLy8gRW50cnkgcG9pbnQKICBncmFwaC5hZGROb2RlKCdHZXN0dXJlJywgJ2NvcmUvUmVwZWF0Jyk7CiAgZ3JhcGguYWRkRXhwb3J0KCdnZXN0dXJlLmluJywgJ2RldGVjdCcpOwogIGdyYXBoLmFkZE5vZGUoJ1NwbGl0R2VzdHVyZScsICdjb3JlL1NwbGl0Jyk7CiAgZ3JhcGguYWRkRXhwb3J0KCdzcGxpdGdlc3R1cmUuaW4nLCAnaW4nKTsKICBwcmV2Tm9kZSA9IFsnR2VzdHVyZScsICdvdXQnXTsKCiAgZ3JhcGguYWRkTm9kZSgnUGFzc2VkJywgJ2NvcmUvTWVyZ2UnKTsKICBncmFwaC5hZGROb2RlKCdUYXJnZXQnLCAnY29yZS9SZXBlYXQnKTsKICBncmFwaC5hZGROb2RlKCdBbGxvd0RldGVjdCcsICdjb3JlL1JlcGVhdCcpOwoKICAvLyBHbyB0byBhY3Rpb24KICBncmFwaC5hZGROb2RlKCdEb0FjdGlvbicsICdjb3JlL01lcmdlJyk7CgogIC8vIFdoZW4gbm8gZ2VzdHVyZSBoYXMgYmVlbiByZWNvZ25pemVkIHdlIGlnbm9yZSB0aGUgc2l0dWF0aW9uCiAgZ3JhcGguYWRkTm9kZSgnTm90WWV0JywgJ2NvcmUvRHJvcCcpOwoKICAvLyBIYW5kbGUgcGFzcy10aHJ1CiAgZXhwb3J0cy5wcmVwYXJlUGFzc1Rocm91Z2goZ3JhcGgsIGluc3RhbmNlKTsKCiAgLy8gVmFsaWRhdGUgdGFyZ2V0IG5vZGUKICBwcmV2Tm9kZSA9IGV4cG9ydHMucHJlcGFyZUFjY2VwdChncmFwaCwgaW5zdGFuY2UsIHByZXZOb2RlKTsKICAvLyBDaGVjayB0aGUgZ2VzdHVyZQogIHN3aXRjaCAoaW5zdGFuY2UudHlwZSkgewogICAgY2FzZSAncGluY2gnOgogICAgICBwcmV2Tm9kZSA9IGV4cG9ydHMucHJlcGFyZVBpbmNoKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpOwogICAgICBicmVhazsKICAgIGNhc2UgJ2RyYWcnOgogICAgICBwcmV2Tm9kZSA9IGV4cG9ydHMucHJlcGFyZURyYWcoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnc2NyYXRjaCc6CiAgICAgIHByZXZOb2RlID0gZXhwb3J0cy5wcmVwYXJlU2NyYXRjaChncmFwaCwgaW5zdGFuY2UsIHByZXZOb2RlKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdzd2lwZSc6CiAgICAgIHByZXZOb2RlID0gZXhwb3J0cy5wcmVwYXJlU3dpcGUoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSk7CiAgICAgIGJyZWFrOwogIH0KICAvLyBDaGVjayBnZXN0dXJlIGRpcmVjdGlvbgogIHByZXZOb2RlID0gZXhwb3J0cy5wcmVwYXJlRGlyZWN0aW9uKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpOwoKICAvLyBHZXN0dXJlIGhhcyBiZWVuIGFjY2VwdGVkLCBwYXNzIGRhdGEgdG8gYWN0aW9uCiAgZ3JhcGguYWRkRWRnZShwcmV2Tm9kZVswXSwgcHJldk5vZGVbMV0sICdQYXNzZWQnLCAnaW4nKTsKCiAgcHJldk5vZGUgPSBbJ0RvQWN0aW9uJywgJ291dCddOwoKICAvLyBIYW5kbGUgYWN0aW9uCiAgaWYgKGluc3RhbmNlLmFjdGlvbiAmJiBpbnN0YW5jZS5hY3Rpb24uaW5kZXhPZignLycpKSB7CiAgICBpbnN0YW5jZS5hY3Rpb24gPSBpbnN0YW5jZS5hY3Rpb24uc3BsaXQoJy8nKS5wb3AoKTsKICB9CiAgc3dpdGNoIChpbnN0YW5jZS5hY3Rpb24pIHsKICAgIGNhc2UgJ21vdmUnOgogICAgICBleHBvcnRzLnByZXBhcmVNb3ZlKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpOwogICAgICBicmVhazsKICAgIGNhc2UgJ3JlbW92ZSc6CiAgICAgIGV4cG9ydHMucHJlcGFyZVJlbW92ZShncmFwaCwgaW5zdGFuY2UsIHByZXZOb2RlKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdhdHRyaWJ1dGUnOgogICAgICBleHBvcnRzLnByZXBhcmVBdHRyaWJ1dGUoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSk7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgLy8gTm8gYnVpbHQtaW4gYWN0aW9uLCB0cmlnZ2VyIGV2ZW50CiAgICAgIGV4cG9ydHMucHJlcGFyZUNhbGxiYWNrKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpOwogICAgICBicmVhazsKICB9CgogIC8vIEhhbmRsZSBnZXN0dXJlIGVuZAogIGdyYXBoLmFkZE5vZGUoJ0FmdGVyR2VzdHVyZUNsb3NlUGFzc3RocnUnLCAnY29yZS9LaWNrJyk7CiAgZ3JhcGguYWRkRWRnZSgnU3BsaXRHZXN0dXJlJywgJ291dCcsICdBZnRlckdlc3R1cmVDbG9zZVBhc3N0aHJ1JywgJ2luJyk7CiAgZ3JhcGguYWRkRWRnZSgnQWZ0ZXJHZXN0dXJlQ2xvc2VQYXNzdGhydScsICdvdXQnLCAnUGFzc1RocnUnLCAnY2xvc2UnKTsKCiAgLy8gRW1pdCBlbmQgZXZlbnQKICBncmFwaC5hZGROb2RlKCdFbmRDYWxsYmFjaycsICdjb3JlL0NhbGxiYWNrJyk7CiAgZ3JhcGguYWRkTm9kZSgnQWZ0ZXJHZXN0dXJlQ2FsbCcsICdjb3JlL0tpY2snKTsKICBncmFwaC5hZGRFZGdlKCdTcGxpdEdlc3R1cmUnLCAnb3V0JywgJ0FmdGVyR2VzdHVyZUNhbGwnLCAnZGF0YScpOwogIGdyYXBoLmFkZEVkZ2UoJ0FmdGVyR2VzdHVyZUNhbGwnLCAnb3V0JywgJ0VuZENhbGxiYWNrJywgJ2luJyk7CiAgdmFyIGVuZENhbGxiYWNrID0gZnVuY3Rpb24gKGdlc3R1cmUpIHsKICAgIGluc3RhbmNlLmZpcmUoJ2dlc3R1cmVlbmQnLCBnZXN0dXJlKTsKICB9OwogIGdyYXBoLmFkZEluaXRpYWwoZW5kQ2FsbGJhY2ssICdFbmRDYWxsYmFjaycsICdjYWxsYmFjaycpOwogIC8vIE9ubHkgYWZ0ZXIgYSByZWNvZ25pemVkIHJlc3R1cmUKICBncmFwaC5hZGROb2RlKCdBbGxvd0VuZCcsICdmbG93L0dhdGUnKTsKICBncmFwaC5hZGRFZGdlKCdTcGxpdFBhc3NlZCcsICdvdXQnLCAnQWxsb3dFbmQnLCAnb3BlbicpOwogIGdyYXBoLmFkZEVkZ2UoJ1NwbGl0UGFzc2VkJywgJ291dCcsICdQYXNzVGhydScsICdvcGVuJyk7CiAgZ3JhcGguYWRkRWRnZSgnU3BsaXRHZXN0dXJlJywgJ291dCcsICdBbGxvd0VuZCcsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ0FsbG93RW5kJywgJ291dCcsICdBZnRlckdlc3R1cmVDYWxsJywgJ2luJyk7CiAgZ3JhcGguYWRkTm9kZSgnQWZ0ZXJHZXN0dXJlQ2xvc2VDYWxsYmFjaycsICdjb3JlL0tpY2snKTsKICBncmFwaC5hZGRFZGdlKCdTcGxpdEdlc3R1cmUnLCAnb3V0JywgJ0FmdGVyR2VzdHVyZUNsb3NlQ2FsbGJhY2snLCAnaW4nKTsKICBncmFwaC5hZGRFZGdlKCdBZnRlckdlc3R1cmVDbG9zZUNhbGxiYWNrJywgJ291dCcsICdBbGxvd0VuZCcsICdjbG9zZScpOwoKICByZXR1cm4gZ3JhcGg7Cn0KCmV4cG9ydHMucHJlcGFyZUxpc3RlbmVyID0gZnVuY3Rpb24gKGdyYXBoLCBpbnN0YW5jZSkgewogIGdyYXBoLmFkZE5vZGUoJ0xpc3RlbicsICdnZXN0dXJlcy9HZXN0dXJlVG9PYmplY3QnKTsKCiAgc3dpdGNoIChpbnN0YW5jZS5saXN0ZW50bykgewogICAgY2FzZSAnaHRtbCc6CiAgICAgIGdyYXBoLmFkZEluaXRpYWwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXSwgJ0xpc3RlbicsICdlbGVtZW50Jyk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnZG9jdW1lbnQnOgogICAgICBncmFwaC5hZGRJbml0aWFsKGRvY3VtZW50LCAnTGlzdGVuJywgJ2VsZW1lbnQnKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdjb250YWluZXInOgogICAgZGVmYXVsdDoKICAgICAgZ3JhcGguYWRkSW5pdGlhbChpbnN0YW5jZS5jb250YWluZXIsICdMaXN0ZW4nLCAnZWxlbWVudCcpOwogICAgICBicmVhazsKICB9CiAgcmV0dXJuIFsnTGlzdGVuJywgJ291dCddOwp9OwoKZXhwb3J0cy5wcmVwYXJlUGFzc1Rocm91Z2ggPSBmdW5jdGlvbiAoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSkgewogIC8vIFJlcG9ydCBmYWlsdXJlcyB1cHN0cmVhZAogIGdyYXBoLmFkZE5vZGUoJ0ZhaWxlZCcsICdjb3JlL01lcmdlJyk7CiAgZ3JhcGguYWRkRXhwb3J0KCdmYWlsZWQub3V0JywgJ2ZhaWwnKTsKCiAgLy8gV2UgdXNlIGEgZ2F0ZSBmb3IgcGFzc2luZyB0aGluZ3MgYWZ0ZXIgcmVjb2duaXRpb24gc3RyYWlnaHQgdG8gYWN0aW9uCiAgZ3JhcGguYWRkTm9kZSgnUGFzc1RocnUnLCAnZmxvdy9HYXRlJyk7CiAgZ3JhcGguYWRkRWRnZSgnU3BsaXRHZXN0dXJlJywgJ291dCcsICdQYXNzVGhydScsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ1Bhc3NUaHJ1JywgJ291dCcsICdEb0FjdGlvbicsICdpbicpOwoKICAvLyBPcGVuIG9uIGRldGVjdGVkIGdlc3R1cmUKICBncmFwaC5hZGRFZGdlKCdTcGxpdFBhc3NlZCcsICdvdXQnLCAnUGFzc1RocnUnLCAnb3BlbicpOwoKICAvLyBDbG9zZSB0aGUgZ2F0ZSBhZnRlciBkZXRlY3Rpb24KICBncmFwaC5hZGROb2RlKCdTcGxpdFBhc3NlZCcsICdjb3JlL1NwbGl0Jyk7CiAgZ3JhcGguYWRkRWRnZSgnUGFzc2VkJywgJ291dCcsICdTcGxpdFBhc3NlZCcsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ1NwbGl0UGFzc2VkJywgJ291dCcsICdEb0FjdGlvbicsICdpbicpOwoKICAvLyBSZXBvcnQgcGFzc2VzIHVwc3RyZWFtCiAgZ3JhcGguYWRkRXhwb3J0KCdzcGxpdHBhc3NlZC5vdXQnLCAncGFzcycpOwp9OwoKZXhwb3J0cy5wcmVwYXJlQWNjZXB0ID0gZnVuY3Rpb24gKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpIHsKICBpZiAoIWluc3RhbmNlLmFjY2VwdCkgewogICAgZ3JhcGguYWRkSW5pdGlhbChpbnN0YW5jZS5jb250YWluZXIsICdUYXJnZXQnLCAnaW4nKTsKICAgIHJldHVybiBwcmV2Tm9kZTsKICB9CgogIGdyYXBoLmFkZE5vZGUoJ0RldGVjdFRhcmdldCcsICdnZXN0dXJlcy9EZXRlY3RUYXJnZXQnKTsKICBncmFwaC5hZGRJbml0aWFsKCdzdGFydGVsZW1lbnQnLCAnRGV0ZWN0VGFyZ2V0JywgJ2tleScpOwogIGdyYXBoLmFkZEVkZ2UocHJldk5vZGVbMF0sIHByZXZOb2RlWzFdLCAnRGV0ZWN0VGFyZ2V0JywgJ2luJyk7CiAgZ3JhcGguYWRkRWRnZSgnRGV0ZWN0VGFyZ2V0JywgJ3RhcmdldCcsICdUYXJnZXQnLCAnaW4nKTsKICBncmFwaC5hZGRJbml0aWFsKGluc3RhbmNlLmFjY2VwdCwgJ0RldGVjdFRhcmdldCcsICd0YXJnZXQnKTsKICBncmFwaC5hZGRFZGdlKCdEZXRlY3RUYXJnZXQnLCAnZmFpbCcsICdGYWlsZWQnLCAnaW4nKTsKICByZXR1cm4gWydEZXRlY3RUYXJnZXQnLCAncGFzcyddOwp9OwoKZXhwb3J0cy5wcmVwYXJlUGluY2ggPSBmdW5jdGlvbiAoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSkgewogIGdyYXBoLmFkZE5vZGUoJ0RldGVjdFBpbmNoJywgJ2dlc3R1cmVzL0RldGVjdFBpbmNoJyk7CiAgZ3JhcGguYWRkRWRnZShwcmV2Tm9kZVswXSwgcHJldk5vZGVbMV0sICdEZXRlY3RQaW5jaCcsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ0RldGVjdFBpbmNoJywgJ2ZhaWwnLCAnRmFpbGVkJywgJ2luJyk7CiAgcmV0dXJuIFsnRGV0ZWN0UGluY2gnLCAncGFzcyddOwp9OwoKZXhwb3J0cy5wcmVwYXJlRHJhZyA9IGZ1bmN0aW9uIChncmFwaCwgaW5zdGFuY2UsIHByZXZOb2RlKSB7CiAgdmFyIG1pbkRpc3RhbmNlID0gMjA7CiAgaWYgKGluc3RhbmNlLm1pbmRpc3RhbmNlKSB7CiAgICBtaW5EaXN0YW5jZSA9IHBhcnNlSW50KGluc3RhbmNlLm1pbmRpc3RhbmNlKTsKICB9CiAgdmFyIG1heFNwZWVkID0gSW5maW5pdHk7CiAgaWYgKGluc3RhbmNlLm1heHNwZWVkKSB7CiAgICBtYXhTcGVlZCA9IHBhcnNlSW50KGluc3RhbmNlLm1heHNwZWVkKTsKICB9CiAgZ3JhcGguYWRkTm9kZSgnRGV0ZWN0RHJhZycsICdnZXN0dXJlcy9EZXRlY3REcmFnJyk7CiAgZ3JhcGguYWRkRWRnZShwcmV2Tm9kZVswXSwgcHJldk5vZGVbMV0sICdEZXRlY3REcmFnJywgJ2luJyk7CiAgZ3JhcGguYWRkSW5pdGlhbChtaW5EaXN0YW5jZSwgJ0RldGVjdERyYWcnLCAnZGlzdGFuY2UnKTsKICBncmFwaC5hZGRJbml0aWFsKG1heFNwZWVkLCAnRGV0ZWN0RHJhZycsICdtYXhzcGVlZCcpOwogIGlmIChpbnN0YW5jZS50eXBlID09PSAnZHJhZycpIHsKICAgIGdyYXBoLmFkZEVkZ2UoJ0RldGVjdERyYWcnLCAnZmFpbCcsICdOb3RZZXQnLCAnaW4nKTsKICB9IGVsc2UgewogICAgZ3JhcGguYWRkRWRnZSgnRGV0ZWN0RHJhZycsICdmYWlsJywgJ0ZhaWxlZCcsICdpbicpOwogIH0KICByZXR1cm4gWydEZXRlY3REcmFnJywgJ3Bhc3MnXTsKfTsKCmV4cG9ydHMucHJlcGFyZVNjcmF0Y2ggPSBmdW5jdGlvbiAoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSkgewogIHZhciBtaW5EaXN0YW5jZSA9IDIwOwogIGlmIChpbnN0YW5jZS5taW5kaXN0YW5jZSkgewogICAgbWluRGlzdGFuY2UgPSBwYXJzZUludChpbnN0YW5jZS5taW5kaXN0YW5jZSk7CiAgfQogIHZhciBtaW5TcGVlZCA9IDE7CiAgaWYgKGluc3RhbmNlLm1pbnNwZWVkKSB7CiAgICBtaW5TcGVlZCA9IHBhcnNlRmxvYXQoaW5zdGFuY2UubWluc3BlZWQpOwogIH0KICBncmFwaC5hZGROb2RlKCdEZXRlY3RTY3JhdGNoJywgJ2dlc3R1cmVzL0RldGVjdFNjcmF0Y2gnKTsKICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgJ0RldGVjdFNjcmF0Y2gnLCAnaW4nKTsKICBncmFwaC5hZGRJbml0aWFsKG1pbkRpc3RhbmNlLCAnRGV0ZWN0U2NyYXRjaCcsICdkaXN0YW5jZScpOwogIGdyYXBoLmFkZEluaXRpYWwobWluU3BlZWQsICdEZXRlY3RTY3JhdGNoJywgJ3NwZWVkJyk7CiAgZ3JhcGguYWRkRWRnZSgnRGV0ZWN0U2NyYXRjaCcsICdmYWlsJywgJ0ZhaWxlZCcsICdpbicpOwogIHJldHVybiBbJ0RldGVjdFNjcmF0Y2gnLCAncGFzcyddOwp9OwoKZXhwb3J0cy5wcmVwYXJlU3dpcGUgPSBmdW5jdGlvbiAoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSkgewogIHZhciBtaW5EaXN0YW5jZSA9IDUwOwogIGlmIChpbnN0YW5jZS5taW5kaXN0YW5jZSkgewogICAgbWluRGlzdGFuY2UgPSBwYXJzZUludChpbnN0YW5jZS5taW5kaXN0YW5jZSk7CiAgfQogIHZhciBtaW5TcGVlZCA9IDEuNTsKICBpZiAoaW5zdGFuY2UubWluc3BlZWQpIHsKICAgIG1pblNwZWVkID0gcGFyc2VGbG9hdChpbnN0YW5jZS5taW5zcGVlZCk7CiAgfQogIGdyYXBoLmFkZE5vZGUoJ0RldGVjdFN3aXBlJywgJ2dlc3R1cmVzL0RldGVjdFN3aXBlJyk7CiAgZ3JhcGguYWRkRWRnZShwcmV2Tm9kZVswXSwgcHJldk5vZGVbMV0sICdEZXRlY3RTd2lwZScsICdpbicpOwogIGdyYXBoLmFkZEluaXRpYWwobWluRGlzdGFuY2UsICdEZXRlY3RTd2lwZScsICdkaXN0YW5jZScpOwogIGdyYXBoLmFkZEluaXRpYWwobWluU3BlZWQsICdEZXRlY3RTd2lwZScsICdzcGVlZCcpOwogIGdyYXBoLmFkZEVkZ2UoJ0RldGVjdFN3aXBlJywgJ2ZhaWwnLCAnRmFpbGVkJywgJ2luJyk7CiAgcmV0dXJuIFsnRGV0ZWN0U3dpcGUnLCAncGFzcyddOwp9OwoKZXhwb3J0cy5wcmVwYXJlRGlyZWN0aW9uID0gZnVuY3Rpb24gKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpIHsKICBpZiAoIWluc3RhbmNlLmRpcmVjdGlvbikgewogICAgcmV0dXJuIHByZXZOb2RlOwogIH0KICB2YXIgZGlyZWN0aW9ucyA9IGluc3RhbmNlLmRpcmVjdGlvbi5zcGxpdCgnICcpOwogIGlmIChkaXJlY3Rpb25zLmxlbmd0aCA9PT0gNCkgewogICAgcmV0dXJuIHByZXZOb2RlOwogIH0KICB2YXIgbWF4RGlzdGFuY2UgPSBJbmZpbml0eTsKICBpZiAoaW5zdGFuY2UubWF4ZGlzdGFuY2UpIHsKICAgIG1heERpc3RhbmNlID0gcGFyc2VJbnQoaW5zdGFuY2UubWF4ZGlzdGFuY2UpOwogIH0KICB2YXIgY2FyZGluYWxzID0gWydlYXN0JywgJ3NvdXRoJywgJ25vcnRoJywgJ3dlc3QnXTsKICBncmFwaC5hZGROb2RlKCdEZXRlY3REaXJlY3Rpb24nLCAnZ2VzdHVyZXMvRGV0ZWN0Q2FyZGluYWxEaXJlY3Rpb24nKTsKICBncmFwaC5hZGRJbml0aWFsKG1heERpc3RhbmNlLCAnRGV0ZWN0RGlyZWN0aW9uJywgJ21heGRpc3RhbmNlJyk7CiAgZ3JhcGguYWRkRWRnZShwcmV2Tm9kZVswXSwgcHJldk5vZGVbMV0sICdEZXRlY3REaXJlY3Rpb24nLCAnaW4nKTsKICBncmFwaC5hZGROb2RlKCdEaXJlY3Rpb25QYXNzZWQnLCAnY29yZS9NZXJnZScpOwogIGNhcmRpbmFscy5mb3JFYWNoKGZ1bmN0aW9uIChkaXIpIHsKICAgIGlmIChkaXJlY3Rpb25zLmluZGV4T2YoZGlyKSAhPT0gLTEpIHsKICAgICAgLy8gQWxsb3dlZCBkaXJlY3Rpb24KICAgICAgZ3JhcGguYWRkRWRnZSgnRGV0ZWN0RGlyZWN0aW9uJywgZGlyLCAnRGlyZWN0aW9uUGFzc2VkJywgJ2luJyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGdyYXBoLmFkZEVkZ2UoJ0RldGVjdERpcmVjdGlvbicsIGRpciwgJ0ZhaWxlZCcsICdpbicpOwogIH0pOwogIGdyYXBoLmFkZEVkZ2UoJ0RldGVjdERpcmVjdGlvbicsICdmYWlsJywgJ0ZhaWxlZCcsICdpbicpOwogIHJldHVybiBbJ0RpcmVjdGlvblBhc3NlZCcsICdvdXQnXTsKfTsKCmV4cG9ydHMucHJlcGFyZU1vdmUgPSBmdW5jdGlvbiAoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSkgewogIGdyYXBoLmFkZE5vZGUoJ0VhY2hUb3VjaCcsICdvYmplY3RzL1NwbGl0T2JqZWN0Jyk7CiAgZ3JhcGguYWRkRWRnZSgnRG9BY3Rpb24nLCAnb3V0JywgJ0VhY2hUb3VjaCcsICdpbicpOwogIGdyYXBoLmFkZE5vZGUoJ0dldFBvaW50JywgJ29iamVjdHMvR2V0T2JqZWN0S2V5Jyk7CiAgZ3JhcGguYWRkRWRnZSgnRWFjaFRvdWNoJywgJ291dCcsICdHZXRQb2ludCcsICdpbicpOwogIGdyYXBoLmFkZEluaXRpYWwoJ21vdmVwb2ludCcsICdHZXRQb2ludCcsICdrZXknKTsKICBncmFwaC5hZGRFZGdlKCdHZXRQb2ludCcsICdtaXNzZWQnLCAnTm90WWV0JywgJ2luJyk7CiAgZ3JhcGguYWRkTm9kZSgnTW92ZScsICdjc3MvTW92ZUVsZW1lbnQnKTsKICBncmFwaC5hZGRFZGdlKCdUYXJnZXQnLCAnb3V0JywgJ01vdmUnLCAnZWxlbWVudCcpOwogIGdyYXBoLmFkZEVkZ2UoJ0dldFBvaW50JywgJ291dCcsICdNb3ZlJywgJ3BvaW50Jyk7Cn07CgpleHBvcnRzLnByZXBhcmVSZW1vdmUgPSBmdW5jdGlvbiAoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSkgewogIGdyYXBoLmFkZE5vZGUoJ1NlbmROb2RlJywgJ3N0cmluZ3MvU2VuZFN0cmluZycpOwogIGdyYXBoLmFkZEVkZ2UoJ1RhcmdldCcsICdvdXQnLCAnU2VuZE5vZGUnLCAnc3RyaW5nJyk7CiAgZ3JhcGguYWRkRWRnZSgnRG9BY3Rpb24nLCAnb3V0JywgJ1NlbmROb2RlJywgJ2luJyk7CiAgZ3JhcGguYWRkTm9kZSgnUmVtb3ZlTm9kZScsICdkb20vUmVtb3ZlRWxlbWVudCcpOwogIGdyYXBoLmFkZEVkZ2UoJ1NlbmROb2RlJywgJ291dCcsICdSZW1vdmVOb2RlJywgJ2VsZW1lbnQnKTsKfTsKCmV4cG9ydHMucHJlcGFyZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChncmFwaCwgaW5zdGFuY2UsIHByZXZOb2RlKSB7CiAgZ3JhcGguYWRkTm9kZSgnRWFjaFRvdWNoJywgJ29iamVjdHMvU3BsaXRPYmplY3QnKTsKICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgJ0VhY2hUb3VjaCcsICdpbicpOwogIGdyYXBoLmFkZE5vZGUoJ0dldFBvaW50JywgJ29iamVjdHMvR2V0T2JqZWN0S2V5Jyk7CiAgZ3JhcGguYWRkRWRnZSgnRWFjaFRvdWNoJywgJ291dCcsICdHZXRQb2ludCcsICdpbicpOwogIGdyYXBoLmFkZEluaXRpYWwoJ21vdmVwb2ludCcsICdHZXRQb2ludCcsICdrZXknKTsKICBncmFwaC5hZGRFZGdlKCdHZXRQb2ludCcsICdtaXNzZWQnLCAnRmFpbGVkJywgJ2luJyk7CiAgZ3JhcGguYWRkTm9kZSgnU2V0JywgJ2RvbS9TZXRBdHRyaWJ1dGUnKTsKICBncmFwaC5hZGRFZGdlKCdUYXJnZXQnLCAnb3V0JywgJ1NldCcsICdlbGVtZW50Jyk7CiAgZ3JhcGguYWRkSW5pdGlhbChpbnN0YW5jZS50eXBlLCAnU2V0JywgJ2F0dHJpYnV0ZScpOwogIGdyYXBoLmFkZEVkZ2UoJ0dldFBvaW50JywgJ291dCcsICdTZXQnLCAndmFsdWUnKTsKfTsKCmV4cG9ydHMuZ2V0Q2VudGVyID0gZnVuY3Rpb24gKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpIHsKICAvLyBDYWxjdWxhdGUgY2VudGVyCiAgZ3JhcGguYWRkTm9kZSgnQWRkQ2VudGVyJywgJ29iamVjdHMvU2V0UHJvcGVydHlWYWx1ZScpOwogIGdyYXBoLmFkZEluaXRpYWwoJ2NlbnRlcicsICdBZGRDZW50ZXInLCAncHJvcGVydHknKTsKICBncmFwaC5hZGROb2RlKCdTcGxpdFBpbmNoJywgJ2NvcmUvU3BsaXQnKTsKICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgJ1NwbGl0UGluY2gnLCAnaW4nKTsKICBncmFwaC5hZGRFZGdlKCdTcGxpdFBpbmNoJywgJ291dCcsICdBZGRDZW50ZXInLCAnaW4nKTsKICBncmFwaC5hZGROb2RlKCdDYWxjdWxhdGVDZW50ZXInLCAnZ2VzdHVyZXMvQ2FsY3VsYXRlQ2VudGVyJyk7CiAgZ3JhcGguYWRkRWRnZSgnU3BsaXRQaW5jaCcsICdvdXQnLCAnQ2FsY3VsYXRlQ2VudGVyJywgJ2luJyk7CiAgZ3JhcGguYWRkRWRnZSgnQ2FsY3VsYXRlQ2VudGVyJywgJ2NlbnRlcicsICdBZGRDZW50ZXInLCAndmFsdWUnKTsKICByZXR1cm4gWydBZGRDZW50ZXInLCAnb3V0J107Cn07CgpleHBvcnRzLmdldFNjYWxlID0gZnVuY3Rpb24gKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpIHsKICAvLyBDYWxjdWxhdGUgc2NhbGUKICBncmFwaC5hZGROb2RlKCdTcGxpdEFmdGVyQWRkJywgJ2NvcmUvU3BsaXQnKTsKICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgJ1NwbGl0QWZ0ZXJBZGQnLCAnaW4nKTsKICBncmFwaC5hZGROb2RlKCdBZGRTY2FsZScsICdvYmplY3RzL1NldFByb3BlcnR5VmFsdWUnKTsKICBncmFwaC5hZGRJbml0aWFsKCdzY2FsZScsICdBZGRTY2FsZScsICdwcm9wZXJ0eScpOwogIGdyYXBoLmFkZEVkZ2UoJ1NwbGl0QWZ0ZXJBZGQnLCAnb3V0JywgJ0FkZFNjYWxlJywgJ2luJyk7CiAgZ3JhcGguYWRkTm9kZSgnQ2FsY3VsYXRlU2NhbGUnLCAnZ2VzdHVyZXMvQ2FsY3VsYXRlU2NhbGUnKTsKICBncmFwaC5hZGRFZGdlKCdTcGxpdEFmdGVyQWRkJywgJ291dCcsICdDYWxjdWxhdGVTY2FsZScsICdpbicpOwogIGdyYXBoLmFkZEVkZ2UoJ0NhbGN1bGF0ZVNjYWxlJywgJ3NjYWxlJywgJ0FkZFNjYWxlJywgJ3ZhbHVlJyk7CiAgcmV0dXJuIFsnQWRkU2NhbGUnLCAnb3V0J107Cn07CmV4cG9ydHMucHJlcGFyZUNhbGxiYWNrID0gZnVuY3Rpb24gKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpIHsKICBwcmV2Tm9kZSA9IGV4cG9ydHMuZ2V0Q2VudGVyKGdyYXBoLCBpbnN0YW5jZSwgcHJldk5vZGUpOwogIGlmIChpbnN0YW5jZS50eXBlID09PSAncGluY2gnKSB7CiAgICBwcmV2Tm9kZSA9IGV4cG9ydHMuZ2V0U2NhbGUoZ3JhcGgsIGluc3RhbmNlLCBwcmV2Tm9kZSk7CiAgfQogIGdyYXBoLmFkZE5vZGUoJ0NhbGxiYWNrJywgJ2NvcmUvQ2FsbGJhY2snKTsKICBncmFwaC5hZGRFZGdlKHByZXZOb2RlWzBdLCBwcmV2Tm9kZVsxXSwgJ0NhbGxiYWNrJywgJ2luJyk7CiAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKGdlc3R1cmUpIHsKICAgIGluc3RhbmNlLmZpcmUoJ2dlc3R1cmUnLCBnZXN0dXJlKTsKICB9OwogIGdyYXBoLmFkZEluaXRpYWwoY2FsbGJhY2ssICdDYWxsYmFjaycsICdjYWxsYmFjaycpOwogIGdyYXBoLmFkZE5vZGUoJ0Ryb3BUYXJnZXQnLCAnY29yZS9Ecm9wJyk7CiAgZ3JhcGguYWRkRWRnZSgnVGFyZ2V0JywgJ291dCcsICdEcm9wVGFyZ2V0JywgJ2luJyk7Cn07Cgp9KTsKcmVxdWlyZS5yZWdpc3RlcigidGhlLWJlaGF2aW9yL2NvbXBvbmVudC5qc29uIiwgZnVuY3Rpb24oZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKXsKbW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKCd7Im5hbWUiOiJ0aGUtYmVoYXZpb3IiLCJkZXNjcmlwdGlvbiI6IlBvbHltZXIgZWxlbWVudHMgZm9yIGdlc3R1cmFsIGJlaGF2aW9yIiwiYXV0aG9yIjoiSGVucmkgQmVyZ2l1cyA8aGVucmkuYmVyZ2l1c0Bpa2kuZmk+IiwicmVwbyI6Im5vZmxvL25vZmxvLXVpIiwidmVyc2lvbiI6IjAuMS4wIiwia2V5d29yZHMiOltdLCJkZXBlbmRlbmNpZXMiOnsibm9mbG8vbm9mbG8iOiIqIiwibm9mbG8vbm9mbG8taW50ZXJhY3Rpb24iOiIqIiwibm9mbG8vbm9mbG8tZ2VzdHVyZXMiOiIqIiwibm9mbG8vbm9mbG8tb2JqZWN0cyI6IioiLCJub2Zsby9ub2Zsby1mbG93IjoiKiIsIm5vZmxvL25vZmxvLWRvbSI6IioiLCJub2Zsby9ub2Zsby1jc3MiOiIqIiwibm9mbG8vbm9mbG8tbWF0aCI6IioiLCJub2Zsby9ub2Zsby1jb3JlIjoiKiJ9LCJub2ZsbyI6eyJjb21wb25lbnRzIjp7fSwiZ3JhcGhzIjp7fX0sIm1haW4iOiJpbmRleC5qcyIsInNjcmlwdHMiOlsiaW5kZXguanMiXSwianNvbiI6WyJjb21wb25lbnQuanNvbiJdLCJmaWxlcyI6W119Jyk7Cn0pOwoKCgoKCgoKCgoKCgoKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtZW1pdHRlci9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2VtaXR0ZXIvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWluZGV4b2YvaW5kZXguanMiLCAiY29tcG9uZW50LWVtaXR0ZXIvZGVwcy9pbmRleG9mL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL3VuZGVyc2NvcmUvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2xpYi9mYnAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vaW5kZXguanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50Lmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5EcmFnLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuRHJhZy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3Rlbkhhc2guanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5IYXNoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuS2V5Ym9hcmQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5LZXlib2FyZC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3Rlbk1vdXNlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuTW91c2UuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5Qb2ludGVyLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuUG9pbnRlci5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNjcm9sbC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNjcm9sbC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNwZWVjaC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNwZWVjaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblRvdWNoLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuVG91Y2guanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9TZXRIYXNoLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvU2V0SGFzaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL1JlYWRDb29yZGluYXRlcy5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL1JlYWRDb29yZGluYXRlcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9pbmRleC5qcyIsICJub2Zsby1pbnRlcmFjdGlvbi9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvR3JhcGguanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL3NyYy9saWIvUG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL3NyYy9saWIvTm9GbG8uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZW1pdHRlci9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtaW5kZXhvZi9pbmRleC5qcyIsICJjb21wb25lbnQtZW1pdHRlci9kZXBzL2luZGV4b2YvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvbGliL2ZicC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvRGV0ZWN0RHJhZy5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3REcmFnLmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdFN3aXBlLmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdFN3aXBlLmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdFBpbmNoLmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdFBpbmNoLmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0ZpbHRlckJ5VGFyZ2V0Lmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0ZpbHRlckJ5VGFyZ2V0Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0dlc3R1cmVUb09iamVjdC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9HZXN0dXJlVG9PYmplY3QuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvTGlzdGVuR2VzdHVyZXMuanNvbiIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9ncmFwaHMvTGlzdGVuR2VzdHVyZXMuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9ncmFwaHMvTGlzdGVuUG9pbnRlci5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9MaXN0ZW5Qb2ludGVyLmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdENhcmRpbmFsRGlyZWN0aW9uLmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdENhcmRpbmFsRGlyZWN0aW9uLmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvaW5kZXguanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0RldGVjdERyYWcuanNvbiIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9ncmFwaHMvRGV0ZWN0RHJhZy5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RTd2lwZS5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RTd2lwZS5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RQaW5jaC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RQaW5jaC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9GaWx0ZXJCeVRhcmdldC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9GaWx0ZXJCeVRhcmdldC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9HZXN0dXJlVG9PYmplY3QuanNvbiIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9ncmFwaHMvR2VzdHVyZVRvT2JqZWN0Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0xpc3Rlbkdlc3R1cmVzLmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0xpc3Rlbkdlc3R1cmVzLmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZ3JhcGhzL0xpc3RlblBvaW50ZXIuanNvbiIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9ncmFwaHMvTGlzdGVuUG9pbnRlci5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RDYXJkaW5hbERpcmVjdGlvbi5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2dyYXBocy9EZXRlY3RDYXJkaW5hbERpcmVjdGlvbi5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2NvbXBvbmVudC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvQ2FsY3VsYXRlQ2VudGVyLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvQ2FsY3VsYXRlQ2VudGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvQ2FsY3VsYXRlU2NhbGUuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZ2VzdHVyZXMvY29tcG9uZW50cy9DYWxjdWxhdGVTY2FsZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0NhcmRpbmFsUm91dGVyLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvQ2FyZGluYWxSb3V0ZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvY29tcG9uZW50cy9EZWdyZWVzVG9DYXJkaW5hbC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RlZ3JlZXNUb0NhcmRpbmFsLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvRGVncmVlc1RvQ29tcGFzcy5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RlZ3JlZXNUb0NvbXBhc3MuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ2VzdHVyZXMvY29tcG9uZW50cy9EZXRlY3RTY3JhdGNoLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWdlc3R1cmVzL2NvbXBvbmVudHMvRGV0ZWN0U2NyYXRjaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RldGVjdFRhcmdldC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1nZXN0dXJlcy9jb21wb25lbnRzL0RldGVjdFRhcmdldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1nZXN0dXJlcy9pbmRleC5qcyIsICJub2Zsby1nZXN0dXJlcy9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvL3NyYy9saWIvUG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvL3NyYy9saWIvTm9GbG8uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZW1pdHRlci9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtaW5kZXhvZi9pbmRleC5qcyIsICJjb21wb25lbnQtZW1pdHRlci9kZXBzL2luZGV4b2YvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvbGliL2ZicC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9pbmRleC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWludGVyYWN0aW9uL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudC5qc29uIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5EcmFnLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5EcmFnLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuSGFzaC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuSGFzaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlbktleWJvYXJkLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5LZXlib2FyZC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3Rlbk1vdXNlLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5Nb3VzZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblBvaW50ZXIuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblBvaW50ZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vY29tcG9uZW50cy9MaXN0ZW5TY3JvbGwuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNjcm9sbC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblNwZWVjaC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuU3BlZWNoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvTGlzdGVuVG91Y2guanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL0xpc3RlblRvdWNoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvU2V0SGFzaC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvU2V0SGFzaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9jb21wb25lbnRzL1JlYWRDb29yZGluYXRlcy5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWludGVyYWN0aW9uL2NvbXBvbmVudHMvUmVhZENvb3JkaW5hdGVzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL2NvbXBvbmVudC5qc29uIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL3NyYy9saWIvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIsICJub2Zsby1ub2Zsby1pbnRlcmFjdGlvbi9kZXBzL25vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FzeW5jQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiLCAibm9mbG8tbm9mbG8taW50ZXJhY3Rpb24vZGVwcy9ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvLWludGVyYWN0aW9uL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1tYXRoL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1tYXRoL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9BZGQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1tYXRoL2NvbXBvbmVudHMvQWRkLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9TdWJ0cmFjdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9TdWJ0cmFjdC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvTXVsdGlwbHkuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1tYXRoL2NvbXBvbmVudHMvTXVsdGlwbHkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tbWF0aC9jb21wb25lbnRzL0RpdmlkZS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9EaXZpZGUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tbWF0aC9jb21wb25lbnRzL0NhbGN1bGF0ZUFuZ2xlLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tbWF0aC9jb21wb25lbnRzL0NhbGN1bGF0ZUFuZ2xlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9DYWxjdWxhdGVEaXN0YW5jZS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9DYWxjdWxhdGVEaXN0YW5jZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvQ29tcGFyZS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9Db21wYXJlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9Db3VudFN1bS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9Db3VudFN1bS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1tYXRoL2xpYi9NYXRoQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tbWF0aC9saWIvTWF0aENvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIiwgIm5vZmxvLW5vZmxvLW1hdGgvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLW1hdGgvZGVwcy9ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tbWF0aC9kZXBzL25vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tbWF0aC9kZXBzL25vZmxvL3NyYy9saWIvTmV0d29yay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1mbG93L2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1mbG93L2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvY29tcG9uZW50cy9Db25jYXQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1mbG93L2NvbXBvbmVudHMvQ29uY2F0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvY29tcG9uZW50cy9HYXRlLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZmxvdy9jb21wb25lbnRzL0dhdGUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvUG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWZsb3cvZGVwcy9ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvTm9GbG8uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIiwgIm5vZmxvLW5vZmxvLWZsb3cvZGVwcy9ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZW1pdHRlci9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtaW5kZXhvZi9pbmRleC5qcyIsICJjb21wb25lbnQtZW1pdHRlci9kZXBzL2luZGV4b2YvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvbGliL2ZicC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1ncm91cHMvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1ncm91cHMvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudC5qc29uIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZ3JvdXBzL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1JlYWRHcm91cHMuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1ncm91cHMvY29tcG9uZW50cy9SZWFkR3JvdXBzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1JlbW92ZUdyb3Vwcy5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1JlbW92ZUdyb3Vwcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9SZWdyb3VwLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvUmVncm91cC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Hcm91cC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0dyb3VwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0dyb3VwWmlwLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvR3JvdXBaaXAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvRmlsdGVyQnlHcm91cC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0ZpbHRlckJ5R3JvdXAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvT2JqZWN0aWZ5LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvT2JqZWN0aWZ5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1JlYWRHcm91cC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1JlYWRHcm91cC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9TZW5kQnlHcm91cC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWdyb3Vwcy9jb21wb25lbnRzL1NlbmRCeUdyb3VwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0NvbGxlY3RHcm91cHMuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Db2xsZWN0R3JvdXBzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0NvbGxlY3RPYmplY3QuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Db2xsZWN0T2JqZWN0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL0ZpcnN0R3JvdXAuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1ncm91cHMvY29tcG9uZW50cy9GaXJzdEdyb3VwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWdyb3Vwcy9jb21wb25lbnRzL01hcEdyb3VwLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvTWFwR3JvdXAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvTWVyZ2VHcm91cHMuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1ncm91cHMvY29tcG9uZW50cy9NZXJnZUdyb3Vwcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1ncm91cHMvY29tcG9uZW50cy9Hcm91cEJ5T2JqZWN0S2V5LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZ3JvdXBzL2NvbXBvbmVudHMvR3JvdXBCeU9iamVjdEtleS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLWdyb3Vwcy9kZXBzL25vZmxvL3NyYy9saWIvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9zcmMvbGliL1BvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiLCAibm9mbG8tbm9mbG8tZ3JvdXBzL2RlcHMvbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZ3JvdXBzL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9zcmMvbGliL0FzeW5jQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiLCAibm9mbG8tbm9mbG8tZ3JvdXBzL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9zcmMvbGliL05vRmxvLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTmV0d29yay5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tZ3JvdXBzL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1ncm91cHMvZGVwcy9ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtZW1pdHRlci9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2VtaXR0ZXIvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWluZGV4b2YvaW5kZXguanMiLCAiY29tcG9uZW50LWVtaXR0ZXIvZGVwcy9pbmRleG9mL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL3VuZGVyc2NvcmUvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2xpYi9mYnAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9pbmRleC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0NvdW50UGFja2V0cy5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Db3VudFBhY2tldHMuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1VuemlwLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1VuemlwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9EZWZhdWx0cy5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9EZWZhdWx0cy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRG9Ob3REaXNjb25uZWN0LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0RvTm90RGlzY29ubmVjdC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvT25seURpc2Nvbm5lY3QuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvT25seURpc2Nvbm5lY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1NwbGl0UGFja2V0LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1NwbGl0UGFja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9SYW5nZS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9SYW5nZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRmxhdHRlbi5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9GbGF0dGVuLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Db21wYWN0LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0NvbXBhY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1ppcC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9aaXAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1NlbmRXaXRoLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL1NlbmRXaXRoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9GaWx0ZXJQYWNrZXRzLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0ZpbHRlclBhY2tldHMuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0ZpbHRlckJ5VmFsdWUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRmlsdGVyQnlWYWx1ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRmlsdGVyQnlQb3NpdGlvbi5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9GaWx0ZXJCeVBvc2l0aW9uLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9GaWx0ZXJQYWNrZXQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvRmlsdGVyUGFja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9VbmlxdWVQYWNrZXQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvVW5pcXVlUGFja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Hcm91cEJ5UGFja2V0LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0dyb3VwQnlQYWNrZXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tcGFja2V0cy9jb21wb25lbnRzL0xhc3RQYWNrZXQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvTGFzdFBhY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1wYWNrZXRzL2NvbXBvbmVudHMvQ291bnRlci5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXBhY2tldHMvY29tcG9uZW50cy9Db3VudGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL2NvbXBvbmVudC5qc29uIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8tcGFja2V0cy9kZXBzL25vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvbGliL1BvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiLCAibm9mbG8tbm9mbG8tcGFja2V0cy9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FzeW5jQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvbGliL0FzeW5jQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1wYWNrZXRzL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvbGliL05vRmxvLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTmV0d29yay5qcyIsICJub2Zsby1ub2Zsby1wYWNrZXRzL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvLXBhY2tldHMvZGVwcy9ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtZW1pdHRlci9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2VtaXR0ZXIvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWluZGV4b2YvaW5kZXguanMiLCAiY29tcG9uZW50LWVtaXR0ZXIvZGVwcy9pbmRleG9mL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL3VuZGVyc2NvcmUvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2xpYi9mYnAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tcGFja2V0cy9kZXBzL3VuZGVyc2NvcmUvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9FeHRlbmQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRXh0ZW5kLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9NZXJnZU9iamVjdHMuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWVyZ2VPYmplY3RzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TcGxpdE9iamVjdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TcGxpdE9iamVjdC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvUmVwbGFjZUtleS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9SZXBsYWNlS2V5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9LZXlzLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0tleXMuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NpemUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2l6ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvVmFsdWVzLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1ZhbHVlcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvSm9pbi5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9Kb2luLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9FeHRyYWN0UHJvcGVydHkuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRXh0cmFjdFByb3BlcnR5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9JbnNlcnRQcm9wZXJ0eS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9JbnNlcnRQcm9wZXJ0eS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2xpY2VBcnJheS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TbGljZUFycmF5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TcGxpdEFycmF5LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NwbGl0QXJyYXkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0ZpbHRlclByb3BlcnR5VmFsdWUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRmlsdGVyUHJvcGVydHlWYWx1ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRmxhdHRlbk9iamVjdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9GbGF0dGVuT2JqZWN0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9NYXBQcm9wZXJ0eS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9NYXBQcm9wZXJ0eS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvUmVtb3ZlUHJvcGVydHkuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvUmVtb3ZlUHJvcGVydHkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL01hcFByb3BlcnR5VmFsdWUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWFwUHJvcGVydHlWYWx1ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvR2V0T2JqZWN0S2V5LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0dldE9iamVjdEtleS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvVW5pcXVlQXJyYXkuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvVW5pcXVlQXJyYXkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TaW1wbGlmeU9iamVjdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TaW1wbGlmeU9iamVjdC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRHVwbGljYXRlUHJvcGVydHkuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRHVwbGljYXRlUHJvcGVydHkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NyZWF0ZU9iamVjdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9DcmVhdGVPYmplY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NyZWF0ZURhdGUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvQ3JlYXRlRGF0ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2V0UHJvcGVydHlWYWx1ZS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TZXRQcm9wZXJ0eVZhbHVlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9DYWxsTWV0aG9kLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NhbGxNZXRob2QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIsICJub2Zsby1ub2Zsby1vYmplY3RzL2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvUG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIsICJub2Zsby1ub2Zsby1vYmplY3RzL2RlcHMvbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvTm9GbG8uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZW1pdHRlci9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtaW5kZXhvZi9pbmRleC5qcyIsICJjb21wb25lbnQtZW1pdHRlci9kZXBzL2luZGV4b2YvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvbGliL2ZicC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby1vYmplY3RzL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZG9tL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWRvbS9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9BZGRDbGFzcy5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL0FkZENsYXNzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL0FwcGVuZENoaWxkLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tZG9tL2NvbXBvbmVudHMvQXBwZW5kQ2hpbGQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvQ3JlYXRlRWxlbWVudC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL0NyZWF0ZUVsZW1lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvQ3JlYXRlRnJhZ21lbnQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9DcmVhdGVGcmFnbWVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9HZXRBdHRyaWJ1dGUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9HZXRBdHRyaWJ1dGUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvR2V0RWxlbWVudC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL0dldEVsZW1lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvSGFzQ2xhc3MuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9IYXNDbGFzcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9SZWFkSHRtbC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL1JlYWRIdG1sLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL1JlbW92ZUVsZW1lbnQuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9SZW1vdmVFbGVtZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL1NldEF0dHJpYnV0ZS5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL1NldEF0dHJpYnV0ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9Xcml0ZUh0bWwuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9Xcml0ZUh0bWwuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVtb3ZlQ2xhc3MuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9SZW1vdmVDbGFzcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1kb20vZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXN0cmluZ3MvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1zdHJpbmdzL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXN0cmluZ3MvY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1zdHJpbmdzL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXN0cmluZ3MvY29tcG9uZW50cy9Db21waWxlU3RyaW5nLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL0NvbXBpbGVTdHJpbmcuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL0ZpbHRlci5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLXN0cmluZ3MvY29tcG9uZW50cy9GaWx0ZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1NlbmRTdHJpbmcuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvU2VuZFN0cmluZy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvU3BsaXRTdHIuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvU3BsaXRTdHIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1N0cmluZ1RlbXBsYXRlLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1N0cmluZ1RlbXBsYXRlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLXN0cmluZ3MvY29tcG9uZW50cy9SZXBsYWNlLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1JlcGxhY2UuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL0pzb25pZnkuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvSnNvbmlmeS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1zdHJpbmdzL2NvbXBvbmVudHMvUGFyc2VKc29uLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tc3RyaW5ncy9jb21wb25lbnRzL1BhcnNlSnNvbi5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIiwgIm5vZmxvLW5vZmxvLXN0cmluZ3MvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLXN0cmluZ3MvZGVwcy9ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tc3RyaW5ncy9kZXBzL25vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tc3RyaW5ncy9kZXBzL25vZmxvL3NyYy9saWIvTmV0d29yay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1zdHJpbmdzL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvLXN0cmluZ3MvZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tY29yZS9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudC5qc29uIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tY29yZS9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvQ2FsbGJhY2suanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvQ2FsbGJhY2suanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0Rpc2Nvbm5lY3RBZnRlclBhY2tldC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9EaXNjb25uZWN0QWZ0ZXJQYWNrZXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0Ryb3AuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvRHJvcC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvR3JvdXAuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvR3JvdXAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0tpY2suanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvS2ljay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvTWVyZ2UuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvTWVyZ2UuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL091dHB1dC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9PdXRwdXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL1JlcGVhdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9SZXBlYXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL1JlcGVhdEFzeW5jLmpzIiwgIm5vZmxvLW5vZmxvLWdlc3R1cmVzL2RlcHMvbm9mbG8tY29yZS9jb21wb25lbnRzL1JlcGVhdEFzeW5jLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNvcmUvY29tcG9uZW50cy9TcGxpdC5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9TcGxpdC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvUnVuSW50ZXJ2YWwuanMiLCAibm9mbG8tbm9mbG8tZ2VzdHVyZXMvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvUnVuSW50ZXJ2YWwuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL01ha2VGdW5jdGlvbi5qcyIsICJub2Zsby1ub2Zsby1nZXN0dXJlcy9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9NYWtlRnVuY3Rpb24uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL2NvbXBvbmVudC5qc29uIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvUG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWNvcmUvZGVwcy9ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvTm9GbG8uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIiwgIm5vZmxvLW5vZmxvLWNvcmUvZGVwcy9ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZW1pdHRlci9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtaW5kZXhvZi9pbmRleC5qcyIsICJjb21wb25lbnQtZW1pdHRlci9kZXBzL2luZGV4b2YvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvbGliL2ZicC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvdW5kZXJzY29yZS9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9pbmRleC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50Lmpzb24iLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvRXh0ZW5kLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9FeHRlbmQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL01lcmdlT2JqZWN0cy5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWVyZ2VPYmplY3RzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TcGxpdE9iamVjdC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU3BsaXRPYmplY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1JlcGxhY2VLZXkuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1JlcGxhY2VLZXkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0tleXMuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0tleXMuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NpemUuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NpemUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1ZhbHVlcy5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvVmFsdWVzLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9Kb2luLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9Kb2luLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9FeHRyYWN0UHJvcGVydHkuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0V4dHJhY3RQcm9wZXJ0eS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvSW5zZXJ0UHJvcGVydHkuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0luc2VydFByb3BlcnR5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TbGljZUFycmF5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TbGljZUFycmF5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TcGxpdEFycmF5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TcGxpdEFycmF5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9GaWx0ZXJQcm9wZXJ0eVZhbHVlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9GaWx0ZXJQcm9wZXJ0eVZhbHVlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9GbGF0dGVuT2JqZWN0LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9GbGF0dGVuT2JqZWN0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9NYXBQcm9wZXJ0eS5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWFwUHJvcGVydHkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1JlbW92ZVByb3BlcnR5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9SZW1vdmVQcm9wZXJ0eS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWFwUHJvcGVydHlWYWx1ZS5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvTWFwUHJvcGVydHlWYWx1ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvR2V0T2JqZWN0S2V5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9HZXRPYmplY3RLZXkuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1VuaXF1ZUFycmF5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9VbmlxdWVBcnJheS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2V0UHJvcGVydHkuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW9iamVjdHMvY29tcG9uZW50cy9TaW1wbGlmeU9iamVjdC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvU2ltcGxpZnlPYmplY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0R1cGxpY2F0ZVByb3BlcnR5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9EdXBsaWNhdGVQcm9wZXJ0eS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1vYmplY3RzL2NvbXBvbmVudHMvQ3JlYXRlT2JqZWN0LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW9iamVjdHMvY29tcG9uZW50cy9DcmVhdGVPYmplY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NyZWF0ZURhdGUuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NyZWF0ZURhdGUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5VmFsdWUuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL1NldFByb3BlcnR5VmFsdWUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NhbGxNZXRob2QuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tb2JqZWN0cy9jb21wb25lbnRzL0NhbGxNZXRob2QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tb2JqZWN0cy9pbmRleC5qcyIsICJub2Zsby1vYmplY3RzL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL2NvbXBvbmVudC5qc29uIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL1BvcnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9BcnJheVBvcnQuanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0FzeW5jQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL0FzeW5jQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1vYmplY3RzL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvbGliL05vRmxvLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTmV0d29yay5qcyIsICJub2Zsby1ub2Zsby1vYmplY3RzL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvLW9iamVjdHMvZGVwcy9ub2Zsby9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtZW1pdHRlci9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2VtaXR0ZXIvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWluZGV4b2YvaW5kZXguanMiLCAiY29tcG9uZW50LWVtaXR0ZXIvZGVwcy9pbmRleG9mL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJjb21wb25lbnQtdW5kZXJzY29yZS9pbmRleC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL3VuZGVyc2NvcmUvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2xpYi9mYnAuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tbm9mbG8vZGVwcy9mYnAvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tZmJwL2xpYi9mYnAuanMiLCAibm9mbG8tZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8tb2JqZWN0cy9kZXBzL3VuZGVyc2NvcmUvaW5kZXguanMiKTsKCnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvaW5kZXguanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZmxvdy9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1mbG93L2NvbXBvbmVudC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWZsb3cvY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZmxvdy9jb21wb25lbnRzL0NvbmNhdC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1mbG93L2NvbXBvbmVudHMvQ29uY2F0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvY29tcG9uZW50cy9HYXRlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWZsb3cvY29tcG9uZW50cy9HYXRlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWZsb3cvaW5kZXguanMiLCAibm9mbG8tZmxvdy9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIiwgIm5vZmxvLW5vZmxvLWZsb3cvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWZsb3cvZGVwcy9ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tZmxvdy9kZXBzL25vZmxvL3NyYy9saWIvTmV0d29yay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1mbG93L2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9pbmRleC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1kb20vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWRvbS9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9BZGRDbGFzcy5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9BZGRDbGFzcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9BcHBlbmRDaGlsZC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9BcHBlbmRDaGlsZC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9DcmVhdGVFbGVtZW50LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL0NyZWF0ZUVsZW1lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvQ3JlYXRlRnJhZ21lbnQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZG9tL2NvbXBvbmVudHMvQ3JlYXRlRnJhZ21lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvR2V0QXR0cmlidXRlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL0dldEF0dHJpYnV0ZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9HZXRFbGVtZW50LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL0dldEVsZW1lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvSGFzQ2xhc3MuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZG9tL2NvbXBvbmVudHMvSGFzQ2xhc3MuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVhZEh0bWwuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVhZEh0bWwuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVtb3ZlRWxlbWVudC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9SZW1vdmVFbGVtZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9jb21wb25lbnRzL1NldEF0dHJpYnV0ZS5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9TZXRBdHRyaWJ1dGUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tZG9tL2NvbXBvbmVudHMvV3JpdGVIdG1sLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWRvbS9jb21wb25lbnRzL1dyaXRlSHRtbC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9SZW1vdmVDbGFzcy5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1kb20vY29tcG9uZW50cy9SZW1vdmVDbGFzcy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1kb20vY29tcG9uZW50cy9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tZG9tL2NvbXBvbmVudHMvUmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWRvbS9pbmRleC5qcyIsICJub2Zsby1kb20vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1kb20vZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLWRvbS9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tZG9tL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNzcy9pbmRleC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1jc3MvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY3NzL2NvbXBvbmVudC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNzcy9jb21wb25lbnQuanNvbiIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jc3MvY29tcG9uZW50cy9Nb3ZlRWxlbWVudC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1jc3MvY29tcG9uZW50cy9Nb3ZlRWxlbWVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jc3MvY29tcG9uZW50cy9Sb3RhdGVFbGVtZW50LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNzcy9jb21wb25lbnRzL1JvdGF0ZUVsZW1lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY3NzL2NvbXBvbmVudHMvU2V0RWxlbWVudFRvcC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1jc3MvY29tcG9uZW50cy9TZXRFbGVtZW50VG9wLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNzcy9pbmRleC5qcyIsICJub2Zsby1jc3MvaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vY29tcG9uZW50Lmpzb24iLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1jc3MvZGVwcy9ub2Zsby9zcmMvbGliL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvSW50ZXJuYWxTb2NrZXQuanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vc3JjL2xpYi9JbnRlcm5hbFNvY2tldC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL1BvcnQuanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWNzcy9kZXBzL25vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIiwgIm5vZmxvLW5vZmxvLWNzcy9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXN5bmNDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vc3JjL2xpYi9Mb2dnaW5nQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIiwgIm5vZmxvLW5vZmxvLWNzcy9kZXBzL25vZmxvL3NyYy9saWIvQ29tcG9uZW50TG9hZGVyLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vc3JjL2xpYi9OZXR3b3JrLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIiwgIm5vZmxvLW5vZmxvLWNzcy9kZXBzL25vZmxvL3NyYy9jb21wb25lbnRzL0dyYXBoLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvTm9GbG8uanMiLCAibm9mbG8tbm9mbG8tY3NzL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvaW5kZXguanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tbWF0aC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tbWF0aC9jb21wb25lbnRzL0FkZC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1tYXRoL2NvbXBvbmVudHMvQWRkLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9TdWJ0cmFjdC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1tYXRoL2NvbXBvbmVudHMvU3VidHJhY3QuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tbWF0aC9jb21wb25lbnRzL011bHRpcGx5LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9NdWx0aXBseS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvRGl2aWRlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9EaXZpZGUuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tbWF0aC9jb21wb25lbnRzL0NhbGN1bGF0ZUFuZ2xlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9DYWxjdWxhdGVBbmdsZS5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1tYXRoL2NvbXBvbmVudHMvQ2FsY3VsYXRlRGlzdGFuY2UuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tbWF0aC9jb21wb25lbnRzL0NhbGN1bGF0ZURpc3RhbmNlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9Db21wYXJlLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLW1hdGgvY29tcG9uZW50cy9Db21wYXJlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvY29tcG9uZW50cy9Db3VudFN1bS5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1tYXRoL2NvbXBvbmVudHMvQ291bnRTdW0uanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tbWF0aC9saWIvTWF0aENvbXBvbmVudC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1tYXRoL2xpYi9NYXRoQ29tcG9uZW50LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLW1hdGgvaW5kZXguanMiLCAibm9mbG8tbWF0aC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIiwgIm5vZmxvLW5vZmxvLW1hdGgvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLW1hdGgvZGVwcy9ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tbWF0aC9kZXBzL25vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tbWF0aC9kZXBzL25vZmxvL3NyYy9saWIvTmV0d29yay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1tYXRoL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNvcmUvaW5kZXguanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tY29yZS9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudC5qc29uIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0NhbGxiYWNrLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9DYWxsYmFjay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvRGlzY29ubmVjdEFmdGVyUGFja2V0LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9EaXNjb25uZWN0QWZ0ZXJQYWNrZXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0Ryb3AuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tY29yZS9jb21wb25lbnRzL0Ryb3AuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL0dyb3VwLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9Hcm91cC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvS2ljay5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvS2ljay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvTWVyZ2UuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tY29yZS9jb21wb25lbnRzL01lcmdlLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNvcmUvY29tcG9uZW50cy9PdXRwdXQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tY29yZS9jb21wb25lbnRzL091dHB1dC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvUmVwZWF0LmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9SZXBlYXQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL1JlcGVhdEFzeW5jLmpzIiwgInRoZS1iZWhhdmlvci9kZXBzL25vZmxvLWNvcmUvY29tcG9uZW50cy9SZXBlYXRBc3luYy5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby1jb3JlL2NvbXBvbmVudHMvU3BsaXQuanMiLCAidGhlLWJlaGF2aW9yL2RlcHMvbm9mbG8tY29yZS9jb21wb25lbnRzL1NwbGl0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNvcmUvY29tcG9uZW50cy9SdW5JbnRlcnZhbC5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvUnVuSW50ZXJ2YWwuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8tY29yZS9jb21wb25lbnRzL01ha2VGdW5jdGlvbi5qcyIsICJ0aGUtYmVoYXZpb3IvZGVwcy9ub2Zsby1jb3JlL2NvbXBvbmVudHMvTWFrZUZ1bmN0aW9uLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvLWNvcmUvaW5kZXguanMiLCAibm9mbG8tY29yZS9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9jb21wb25lbnQuanNvbiIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vY29tcG9uZW50Lmpzb24iKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9HcmFwaC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIiwgIm5vZmxvLW5vZmxvLWNvcmUvZGVwcy9ub2Zsby9zcmMvbGliL0ludGVybmFsU29ja2V0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvUG9ydC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9Qb3J0LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLW5vZmxvL3NyYy9saWIvQXJyYXlQb3J0LmpzIiwgIm5vZmxvLW5vZmxvLWNvcmUvZGVwcy9ub2Zsby9zcmMvbGliL0FycmF5UG9ydC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnQuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9Bc3luY0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0xvZ2dpbmdDb21wb25lbnQuanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvTG9nZ2luZ0NvbXBvbmVudC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL0NvbXBvbmVudExvYWRlci5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9Db21wb25lbnRMb2FkZXIuanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05ldHdvcmsuanMiLCAibm9mbG8tbm9mbG8tY29yZS9kZXBzL25vZmxvL3NyYy9saWIvTmV0d29yay5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvY29tcG9uZW50cy9HcmFwaC5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vc3JjL2NvbXBvbmVudHMvR3JhcGguanMiKTsKcmVxdWlyZS5hbGlhcygibm9mbG8tbm9mbG8vc3JjL2xpYi9Ob0Zsby5qcyIsICJub2Zsby1ub2Zsby1jb3JlL2RlcHMvbm9mbG8vaW5kZXguanMiKTsKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy9lbWl0dGVyL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC1pbmRleG9mL2luZGV4LmpzIiwgImNvbXBvbmVudC1lbWl0dGVyL2RlcHMvaW5kZXhvZi9pbmRleC5qcyIpOwoKcmVxdWlyZS5hbGlhcygiY29tcG9uZW50LXVuZGVyc2NvcmUvaW5kZXguanMiLCAibm9mbG8tbm9mbG8vZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJub2Zsby1mYnAvbGliL2ZicC5qcyIsICJub2Zsby1ub2Zsby9kZXBzL2ZicC9saWIvZmJwLmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLW5vZmxvL2RlcHMvZmJwL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoIm5vZmxvLWZicC9saWIvZmJwLmpzIiwgIm5vZmxvLWZicC9pbmRleC5qcyIpOwpyZXF1aXJlLmFsaWFzKCJub2Zsby1ub2Zsby9zcmMvbGliL05vRmxvLmpzIiwgIm5vZmxvLW5vZmxvL2luZGV4LmpzIik7CnJlcXVpcmUuYWxpYXMoImNvbXBvbmVudC11bmRlcnNjb3JlL2luZGV4LmpzIiwgIm5vZmxvLW5vZmxvLWNvcmUvZGVwcy91bmRlcnNjb3JlL2luZGV4LmpzIik7CgpyZXF1aXJlLmFsaWFzKCJ0aGUtYmVoYXZpb3IvaW5kZXguanMiLCAidGhlLWJlaGF2aW9yL2luZGV4LmpzIik7aWYgKHR5cGVvZiBleHBvcnRzID09ICJvYmplY3QiKSB7CiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCJ0aGUtYmVoYXZpb3IiKTsKfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09ICJmdW5jdGlvbiIgJiYgZGVmaW5lLmFtZCkgewogIGRlZmluZShmdW5jdGlvbigpeyByZXR1cm4gcmVxdWlyZSgidGhlLWJlaGF2aW9yIik7IH0pOwp9IGVsc2UgewogIHRoaXNbInRoZS1iZWhhdmlvciJdID0gcmVxdWlyZSgidGhlLWJlaGF2aW9yIik7Cn19KSgpOw==",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Sat, 08 Nov 2014 15:31:15 GMT",
                    "Content-Length": "576979",
                    "Date": "Sat, 08 Nov 2014 15:31:15 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}