{
    "url": "http://localhost:9999/diddledan/broadway-heading/bower_components/platform/platform.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Link manipulation (DOM-based)",
    "issueType": 5246976,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based link manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a navigation target within the current page, such as a clickable link or the submission URL of a form. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the target of links within the response. An attacker may be able to leverage this to perform various attacks, including:<ul><li>Causing the user to redirect to an arbitrary external URL, to facilitate a phishing attack.</li><li>Causing the user to submit sensitive form data to a server controlled by the attacker.</li><li>Causing the user to perform an unintended action within the application, by changing the file or query string associated with a link.</li><li>Bypassing browser anti-XSS defenses by injecting on-site links containing XSS exploits, since browser anti-XSS defenses typically do not operate on on-site links.</li></ul>",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based link manipulation vulnerabilities is not to dynamically set the target URLs of links or forms using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a link target. In general, this is best achieved by using a whitelist of URLs that are permitted link targets, and strictly validating the target against this list before setting the link target.",
    "issueDetail": "The application may be vulnerable to DOM-based link manipulation. Data is read from <b>the 'baseURI' property of a DOM element</b> and written to <b>the 'href' property of a DOM element</b> via the following statement:<ul><li>e.href=document.baseURI,d.appendChild(e)</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/diddledan/broadway-heading/bower_components/platform/platform.js",
                "path": "/diddledan/broadway-heading/bower_components/platform/platform.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9kaWRkbGVkYW4vYnJvYWR3YXktaGVhZGluZy9ib3dlcl9jb21wb25lbnRzL3BsYXRmb3JtL3BsYXRmb3JtLmpzIEhUVFAvMS4xDQpIb3N0OiBsb2NhbGhvc3Q6OTk5OQ0KDQo=",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTU4NDg4DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBUaHUsIDA2IE5vdiAyMDE0IDE0OjA5OjEwIEdNVA0KTGFzdC1Nb2RpZmllZDogVGh1LCAwNiBOb3YgMjAxNCAxNDowOTowOCBHTVQNCg0KLyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbjogMC4zLjUKCndpbmRvdy5QbGF0Zm9ybT13aW5kb3cuUGxhdGZvcm18fHt9LHdpbmRvdy5sb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LGZ1bmN0aW9uKGEpe3ZhciBiPWEuZmxhZ3N8fHt9O2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9IiksYVswXSYmKGJbYVswXV09YVsxXXx8ITApfSk7dmFyIGM9ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0W3NyYyo9InBsYXRmb3JtLmpzIl0nKTtpZihjKWZvcih2YXIgZCxlPWMuYXR0cmlidXRlcyxmPTA7ZjxlLmxlbmd0aDtmKyspZD1lW2ZdLCJzcmMiIT09ZC5uYW1lJiYoYltkLm5hbWVdPWQudmFsdWV8fCEwKTtiLmxvZyYmYi5sb2cuc3BsaXQoIiwiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3dpbmRvdy5sb2dGbGFnc1thXT0hMH0pLGIuc2hhZG93PWIuc2hhZG93fHxiLnNoYWRvd2RvbXx8Yi5wb2x5ZmlsbCxiLnNoYWRvdz0ibmF0aXZlIj09PWIuc2hhZG93PyExOmIuc2hhZG93fHwhSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QsYi5zaGFkb3cmJmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInNjcmlwdCIpLmxlbmd0aD4xJiZjb25zb2xlLndhcm4oInBsYXRmb3JtLmpzIGlzIG5vdCB0aGUgZmlyc3Qgc2NyaXB0IG9uIHRoZSBwYWdlLiBTZWUgaHR0cDovL3d3dy5wb2x5bWVyLXByb2plY3Qub3JnL2RvY3Mvc3RhcnQvcGxhdGZvcm0uaHRtbCNzZXR1cCBmb3IgZGV0YWlscy4iKSxiLnJlZ2lzdGVyJiYod2luZG93LkN1c3RvbUVsZW1lbnRzPXdpbmRvdy5DdXN0b21FbGVtZW50c3x8e2ZsYWdzOnt9fSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuZmxhZ3MucmVnaXN0ZXI9Yi5yZWdpc3RlciksYi5pbXBvcnRzJiYod2luZG93LkhUTUxJbXBvcnRzPXdpbmRvdy5IVE1MSW1wb3J0c3x8e2ZsYWdzOnt9fSx3aW5kb3cuSFRNTEltcG9ydHMuZmxhZ3MuaW1wb3J0cz1iLmltcG9ydHMpLGEuZmxhZ3M9Yn0oUGxhdGZvcm0pLCJ1bmRlZmluZWQiPT10eXBlb2YgV2Vha01hcCYmIWZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9RGF0ZS5ub3coKSUxZTksYz1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGIrKyArIl9fIil9O2MucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYixjKXt2YXIgZD1iW3RoaXMubmFtZV07ZCYmZFswXT09PWI/ZFsxXT1jOmEoYix0aGlzLm5hbWUse3ZhbHVlOltiLGNdLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4oYj1hW3RoaXMubmFtZV0pJiZiWzBdPT09YT9iWzFdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9YVt0aGlzLm5hbWVdO2lmKCFiKXJldHVybiExO3ZhciBjPWJbMF09PT1hO3JldHVybiBiWzBdPWJbMV09dm9pZCAwLGN9LGhhczpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMubmFtZV07cmV0dXJuIGI/YlswXT09PWE6ITF9fSx3aW5kb3cuV2Vha01hcD1jfSgpLGZ1bmN0aW9uKGdsb2JhbCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGRldGVjdE9iamVjdE9ic2VydmUoKXtmdW5jdGlvbiBhKGEpe2I9YX1pZigiZnVuY3Rpb24iIT10eXBlb2YgT2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBBcnJheS5vYnNlcnZlKXJldHVybiExO3ZhciBiPVtdLGM9e30sZD1bXTtyZXR1cm4gT2JqZWN0Lm9ic2VydmUoYyxhKSxBcnJheS5vYnNlcnZlKGQsYSksYy5pZD0xLGMuaWQ9MixkZWxldGUgYy5pZCxkLnB1c2goMSwyKSxkLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSw1IT09Yi5sZW5ndGg/ITE6ImFkZCIhPWJbMF0udHlwZXx8InVwZGF0ZSIhPWJbMV0udHlwZXx8ImRlbGV0ZSIhPWJbMl0udHlwZXx8InNwbGljZSIhPWJbM10udHlwZXx8InNwbGljZSIhPWJbNF0udHlwZT8hMTooT2JqZWN0LnVub2JzZXJ2ZShjLGEpLEFycmF5LnVub2JzZXJ2ZShkLGEpLCEwKX1mdW5jdGlvbiBkZXRlY3RFdmFsKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBjaHJvbWUmJmNocm9tZS5hcHAmJmNocm9tZS5hcHAucnVudGltZSlyZXR1cm4hMTtpZihuYXZpZ2F0b3IuZ2V0RGV2aWNlU3RvcmFnZSlyZXR1cm4hMTt0cnl7dmFyIGE9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtyZXR1cm4gYSgpfWNhdGNoKGIpe3JldHVybiExfX1mdW5jdGlvbiBpc0luZGV4KGEpe3JldHVybithPT09YT4+PjB9ZnVuY3Rpb24gdG9OdW1iZXIoYSl7cmV0dXJuK2F9ZnVuY3Rpb24gaXNPYmplY3QoYSl7cmV0dXJuIGE9PT1PYmplY3QoYSl9ZnVuY3Rpb24gYXJlU2FtZVZhbHVlKGEsYil7cmV0dXJuIGE9PT1iPzAhPT1hfHwxL2E9PT0xL2I6bnVtYmVySXNOYU4oYSkmJm51bWJlcklzTmFOKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBnZXRQYXRoQ2hhclR5cGUoYSl7aWYodm9pZCAwPT09YSlyZXR1cm4iZW9mIjt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7c3dpdGNoKGIpe2Nhc2UgOTE6Y2FzZSA5MzpjYXNlIDQ2OmNhc2UgMzQ6Y2FzZSAzOTpjYXNlIDQ4OnJldHVybiBhO2Nhc2UgOTU6Y2FzZSAzNjpyZXR1cm4iaWRlbnQiO2Nhc2UgMzI6Y2FzZSA5OmNhc2UgMTA6Y2FzZSAxMzpjYXNlIDE2MDpjYXNlIDY1Mjc5OmNhc2UgODIzMjpjYXNlIDgyMzM6cmV0dXJuIndzIn1yZXR1cm4gYj49OTcmJjEyMj49Ynx8Yj49NjUmJjkwPj1iPyJpZGVudCI6Yj49NDkmJjU3Pj1iPyJudW1iZXIiOiJlbHNlIn1mdW5jdGlvbiBub29wKCl7fWZ1bmN0aW9uIHBhcnNlUGF0aChhKXtmdW5jdGlvbiBiKCl7aWYoIShrPj1hLmxlbmd0aCkpe3ZhciBiPWFbaysxXTtyZXR1cm4iaW5TaW5nbGVRdW90ZSI9PWwmJiInIj09Ynx8ImluRG91YmxlUXVvdGUiPT1sJiYnIic9PWI/KGsrKyxkPWIsbS5hcHBlbmQoKSwhMCk6dm9pZCAwfX1mb3IodmFyIGMsZCxlLGYsZyxoLGksaj1bXSxrPS0xLGw9ImJlZm9yZVBhdGgiLG09e3B1c2g6ZnVuY3Rpb24oKXt2b2lkIDAhPT1lJiYoai5wdXNoKGUpLGU9dm9pZCAwKX0sYXBwZW5kOmZ1bmN0aW9uKCl7dm9pZCAwPT09ZT9lPWQ6ZSs9ZH19O2w7KWlmKGsrKyxjPWFba10sIlxcIiE9Y3x8IWIobCkpe2lmKGY9Z2V0UGF0aENoYXJUeXBlKGMpLGk9cGF0aFN0YXRlTWFjaGluZVtsXSxnPWlbZl18fGlbImVsc2UiXXx8ImVycm9yIiwiZXJyb3IiPT1nKXJldHVybjtpZihsPWdbMF0saD1tW2dbMV1dfHxub29wLGQ9dm9pZCAwPT09Z1syXT9jOmdbMl0saCgpLCJhZnRlclBhdGgiPT09bClyZXR1cm4gan19ZnVuY3Rpb24gaXNJZGVudChhKXtyZXR1cm4gaWRlbnRSZWdFeHAudGVzdChhKX1mdW5jdGlvbiBQYXRoKGEsYil7aWYoYiE9PWNvbnN0cnVjdG9ySXNQcml2YXRlKXRocm93IEVycm9yKCJVc2UgUGF0aC5nZXQgdG8gcmV0cmlldmUgcGF0aCBvYmplY3RzIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspdGhpcy5wdXNoKFN0cmluZyhhW2NdKSk7aGFzRXZhbCYmdGhpcy5sZW5ndGgmJih0aGlzLmdldFZhbHVlRnJvbT10aGlzLmNvbXBpbGVkR2V0VmFsdWVGcm9tRm4oKSl9ZnVuY3Rpb24gZ2V0UGF0aChhKXtpZihhIGluc3RhbmNlb2YgUGF0aClyZXR1cm4gYTtpZigobnVsbD09YXx8MD09YS5sZW5ndGgpJiYoYT0iIiksInN0cmluZyIhPXR5cGVvZiBhKXtpZihpc0luZGV4KGEubGVuZ3RoKSlyZXR1cm4gbmV3IFBhdGgoYSxjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7YT1TdHJpbmcoYSl9dmFyIGI9cGF0aENhY2hlW2FdO2lmKGIpcmV0dXJuIGI7dmFyIGM9cGFyc2VQYXRoKGEpO2lmKCFjKXJldHVybiBpbnZhbGlkUGF0aDt2YXIgYj1uZXcgUGF0aChjLGNvbnN0cnVjdG9ySXNQcml2YXRlKTtyZXR1cm4gcGF0aENhY2hlW2FdPWIsYn1mdW5jdGlvbiBmb3JtYXRBY2Nlc3NvcihhKXtyZXR1cm4gaXNJbmRleChhKT8iWyIrYSsiXSI6J1siJythLnJlcGxhY2UoLyIvZywnXFwiJykrJyJdJ31mdW5jdGlvbiBkaXJ0eUNoZWNrKGEpe2Zvcih2YXIgYj0wO01BWF9ESVJUWV9DSEVDS19DWUNMRVM+YiYmYS5jaGVja18oKTspYisrO3JldHVybiB0ZXN0aW5nRXhwb3NlQ3ljbGVDb3VudCYmKGdsb2JhbC5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1iKSxiPjB9ZnVuY3Rpb24gb2JqZWN0SXNFbXB0eShhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBkaWZmSXNFbXB0eShhKXtyZXR1cm4gb2JqZWN0SXNFbXB0eShhLmFkZGVkKSYmb2JqZWN0SXNFbXB0eShhLnJlbW92ZWQpJiZvYmplY3RJc0VtcHR5KGEuY2hhbmdlZCl9ZnVuY3Rpb24gZGlmZk9iamVjdEZyb21PbGRPYmplY3QoYSxiKXt2YXIgYz17fSxkPXt9LGU9e307Zm9yKHZhciBmIGluIGIpe3ZhciBnPWFbZl07KHZvaWQgMD09PWd8fGchPT1iW2ZdKSYmKGYgaW4gYT9nIT09YltmXSYmKGVbZl09Zyk6ZFtmXT12b2lkIDApfWZvcih2YXIgZiBpbiBhKWYgaW4gYnx8KGNbZl09YVtmXSk7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJmEubGVuZ3RoIT09Yi5sZW5ndGgmJihlLmxlbmd0aD1hLmxlbmd0aCkse2FkZGVkOmMscmVtb3ZlZDpkLGNoYW5nZWQ6ZX19ZnVuY3Rpb24gcnVuRU9NVGFza3MoKXtpZighZW9tVGFza3MubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYT0wO2E8ZW9tVGFza3MubGVuZ3RoO2ErKyllb21UYXNrc1thXSgpO3JldHVybiBlb21UYXNrcy5sZW5ndGg9MCwhMH1mdW5jdGlvbiBuZXdPYnNlcnZlZE9iamVjdCgpe2Z1bmN0aW9uIGEoYSl7YiYmYi5zdGF0ZV89PT1PUEVORUQmJiFkJiZiLmNoZWNrXyhhKX12YXIgYixjLGQ9ITEsZT0hMDtyZXR1cm57b3BlbjpmdW5jdGlvbihjKXtpZihiKXRocm93IEVycm9yKCJPYnNlcnZlZE9iamVjdCBpbiB1c2UiKTtlfHxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksYj1jLGU9ITF9LG9ic2VydmU6ZnVuY3Rpb24oYixkKXtjPWIsZD9BcnJheS5vYnNlcnZlKGMsYSk6T2JqZWN0Lm9ic2VydmUoYyxhKX0sZGVsaXZlcjpmdW5jdGlvbihiKXtkPWIsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGQ9ITF9LGNsb3NlOmZ1bmN0aW9uKCl7Yj12b2lkIDAsT2JqZWN0LnVub2JzZXJ2ZShjLGEpLG9ic2VydmVkT2JqZWN0Q2FjaGUucHVzaCh0aGlzKX19fWZ1bmN0aW9uIGdldE9ic2VydmVkT2JqZWN0KGEsYixjKXt2YXIgZD1vYnNlcnZlZE9iamVjdENhY2hlLnBvcCgpfHxuZXdPYnNlcnZlZE9iamVjdCgpO3JldHVybiBkLm9wZW4oYSksZC5vYnNlcnZlKGIsYyksZH1mdW5jdGlvbiBuZXdPYnNlcnZlZFNldCgpe2Z1bmN0aW9uIGEoYixmKXtiJiYoYj09PWQmJihlW2ZdPSEwKSxoLmluZGV4T2YoYik8MCYmKGgucHVzaChiKSxPYmplY3Qub2JzZXJ2ZShiLGMpKSxhKE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSxmKSl9ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtpZihjLm9iamVjdCE9PWR8fGVbYy5uYW1lXXx8InNldFByb3RvdHlwZSI9PT1jLnR5cGUpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gYyhjKXtpZighYihjKSl7Zm9yKHZhciBkLGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PU9QRU5FRCYmZC5pdGVyYXRlT2JqZWN0c18oYSk7Zm9yKHZhciBlPTA7ZTxnLmxlbmd0aDtlKyspZD1nW2VdLGQuc3RhdGVfPT1PUEVORUQmJmQuY2hlY2tfKCl9fXZhciBkLGUsZj0wLGc9W10saD1bXSxpPXtvYmplY3Q6dm9pZCAwLG9iamVjdHM6aCxvcGVuOmZ1bmN0aW9uKGIsYyl7ZHx8KGQ9YyxlPXt9KSxnLnB1c2goYiksZisrLGIuaXRlcmF0ZU9iamVjdHNfKGEpfSxjbG9zZTpmdW5jdGlvbigpe2lmKGYtLSwhKGY+MCkpe2Zvcih2YXIgYT0wO2E8aC5sZW5ndGg7YSsrKU9iamVjdC51bm9ic2VydmUoaFthXSxjKSxPYnNlcnZlci51bm9ic2VydmVkQ291bnQrKztnLmxlbmd0aD0wLGgubGVuZ3RoPTAsZD12b2lkIDAsZT12b2lkIDAsb2JzZXJ2ZWRTZXRDYWNoZS5wdXNoKHRoaXMpfX19O3JldHVybiBpfWZ1bmN0aW9uIGdldE9ic2VydmVkU2V0KGEsYil7cmV0dXJuIGxhc3RPYnNlcnZlZFNldCYmbGFzdE9ic2VydmVkU2V0Lm9iamVjdD09PWJ8fChsYXN0T2JzZXJ2ZWRTZXQ9b2JzZXJ2ZWRTZXRDYWNoZS5wb3AoKXx8bmV3T2JzZXJ2ZWRTZXQoKSxsYXN0T2JzZXJ2ZWRTZXQub2JqZWN0PWIpLGxhc3RPYnNlcnZlZFNldC5vcGVuKGEsYiksbGFzdE9ic2VydmVkU2V0fWZ1bmN0aW9uIE9ic2VydmVyKCl7dGhpcy5zdGF0ZV89VU5PUEVORUQsdGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmlkXz1uZXh0T2JzZXJ2ZXJJZCsrfWZ1bmN0aW9uIGFkZFRvQWxsKGEpe09ic2VydmVyLl9hbGxPYnNlcnZlcnNDb3VudCsrLGNvbGxlY3RPYnNlcnZlcnMmJmFsbE9ic2VydmVycy5wdXNoKGEpfWZ1bmN0aW9uIHJlbW92ZUZyb21BbGwoKXtPYnNlcnZlci5fYWxsT2JzZXJ2ZXJzQ291bnQtLX1mdW5jdGlvbiBPYmplY3RPYnNlcnZlcihhKXtPYnNlcnZlci5jYWxsKHRoaXMpLHRoaXMudmFsdWVfPWEsdGhpcy5vbGRPYmplY3RfPXZvaWQgMH1mdW5jdGlvbiBBcnJheU9ic2VydmVyKGEpe2lmKCFBcnJheS5pc0FycmF5KGEpKXRocm93IEVycm9yKCJQcm92aWRlZCBvYmplY3QgaXMgbm90IGFuIEFycmF5Iik7T2JqZWN0T2JzZXJ2ZXIuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIFBhdGhPYnNlcnZlcihhLGIpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy5vYmplY3RfPWEsdGhpcy5wYXRoXz1nZXRQYXRoKGIpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMH1mdW5jdGlvbiBDb21wb3VuZE9ic2VydmVyKGEpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXz1hLHRoaXMudmFsdWVfPVtdLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCx0aGlzLm9ic2VydmVkXz1bXX1mdW5jdGlvbiBpZGVudEZuKGEpe3JldHVybiBhfWZ1bmN0aW9uIE9ic2VydmVyVHJhbnNmb3JtKGEsYixjLGQpe3RoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLm9ic2VydmFibGVfPWEsdGhpcy5nZXRWYWx1ZUZuXz1ifHxpZGVudEZuLHRoaXMuc2V0VmFsdWVGbl89Y3x8aWRlbnRGbix0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF89ZH1mdW5jdGlvbiBkaWZmT2JqZWN0RnJvbUNoYW5nZVJlY29yZHMoYSxiLGMpe2Zvcih2YXIgZD17fSxlPXt9LGY9MDtmPGIubGVuZ3RoO2YrKyl7dmFyIGc9YltmXTtleHBlY3RlZFJlY29yZFR5cGVzW2cudHlwZV0/KGcubmFtZSBpbiBjfHwoY1tnLm5hbWVdPWcub2xkVmFsdWUpLCJ1cGRhdGUiIT1nLnR5cGUmJigiYWRkIiE9Zy50eXBlP2cubmFtZSBpbiBkPyhkZWxldGUgZFtnLm5hbWVdLGRlbGV0ZSBjW2cubmFtZV0pOmVbZy5uYW1lXT0hMDpnLm5hbWUgaW4gZT9kZWxldGUgZVtnLm5hbWVdOmRbZy5uYW1lXT0hMCkpOihjb25zb2xlLmVycm9yKCJVbmtub3duIGNoYW5nZVJlY29yZCB0eXBlOiAiK2cudHlwZSksY29uc29sZS5lcnJvcihnKSl9Zm9yKHZhciBoIGluIGQpZFtoXT1hW2hdO2Zvcih2YXIgaCBpbiBlKWVbaF09dm9pZCAwO3ZhciBpPXt9O2Zvcih2YXIgaCBpbiBjKWlmKCEoaCBpbiBkfHxoIGluIGUpKXt2YXIgaj1hW2hdO2NbaF0hPT1qJiYoaVtoXT1qKX1yZXR1cm57YWRkZWQ6ZCxyZW1vdmVkOmUsY2hhbmdlZDppfX1mdW5jdGlvbiBuZXdTcGxpY2UoYSxiLGMpe3JldHVybntpbmRleDphLHJlbW92ZWQ6YixhZGRlZENvdW50OmN9fWZ1bmN0aW9uIEFycmF5U3BsaWNlKCl7fWZ1bmN0aW9uIGNhbGNTcGxpY2VzKGEsYixjLGQsZSxmKXtyZXR1cm4gYXJyYXlTcGxpY2UuY2FsY1NwbGljZXMoYSxiLGMsZCxlLGYpfWZ1bmN0aW9uIGludGVyc2VjdChhLGIsYyxkKXtyZXR1cm4gYz5ifHxhPmQ/LTE6Yj09Y3x8ZD09YT8wOmM+YT9kPmI/Yi1jOmQtYzpiPmQ/ZC1hOmItYX1mdW5jdGlvbiBtZXJnZVNwbGljZShhLGIsYyxkKXtmb3IodmFyIGU9bmV3U3BsaWNlKGIsYyxkKSxmPSExLGc9MCxoPTA7aDxhLmxlbmd0aDtoKyspe3ZhciBpPWFbaF07aWYoaS5pbmRleCs9ZywhZil7dmFyIGo9aW50ZXJzZWN0KGUuaW5kZXgsZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoLGkuaW5kZXgsaS5pbmRleCtpLmFkZGVkQ291bnQpO2lmKGo+PTApe2Euc3BsaWNlKGgsMSksaC0tLGctPWkuYWRkZWRDb3VudC1pLnJlbW92ZWQubGVuZ3RoLGUuYWRkZWRDb3VudCs9aS5hZGRlZENvdW50LWo7dmFyIGs9ZS5yZW1vdmVkLmxlbmd0aCtpLnJlbW92ZWQubGVuZ3RoLWo7aWYoZS5hZGRlZENvdW50fHxrKXt2YXIgYz1pLnJlbW92ZWQ7aWYoZS5pbmRleDxpLmluZGV4KXt2YXIgbD1lLnJlbW92ZWQuc2xpY2UoMCxpLmluZGV4LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGwsYyksYz1sfWlmKGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aD5pLmluZGV4K2kuYWRkZWRDb3VudCl7dmFyIG09ZS5yZW1vdmVkLnNsaWNlKGkuaW5kZXgraS5hZGRlZENvdW50LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsbSl9ZS5yZW1vdmVkPWMsaS5pbmRleDxlLmluZGV4JiYoZS5pbmRleD1pLmluZGV4KX1lbHNlIGY9ITB9ZWxzZSBpZihlLmluZGV4PGkuaW5kZXgpe2Y9ITAsYS5zcGxpY2UoaCwwLGUpLGgrKzt2YXIgbj1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aDtpLmluZGV4Kz1uLGcrPW59fX1mfHxhLnB1c2goZSl9ZnVuY3Rpb24gY3JlYXRlSW5pdGlhbFNwbGljZXMoYSxiKXtmb3IodmFyIGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdO3N3aXRjaChlLnR5cGUpe2Nhc2Uic3BsaWNlIjptZXJnZVNwbGljZShjLGUuaW5kZXgsZS5yZW1vdmVkLnNsaWNlKCksZS5hZGRlZENvdW50KTticmVhaztjYXNlImFkZCI6Y2FzZSJ1cGRhdGUiOmNhc2UiZGVsZXRlIjppZighaXNJbmRleChlLm5hbWUpKWNvbnRpbnVlO3ZhciBmPXRvTnVtYmVyKGUubmFtZSk7aWYoMD5mKWNvbnRpbnVlO21lcmdlU3BsaWNlKGMsZixbZS5vbGRWYWx1ZV0sMSk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKCJVbmV4cGVjdGVkIHJlY29yZCB0eXBlOiAiK0pTT04uc3RyaW5naWZ5KGUpKX19cmV0dXJuIGN9ZnVuY3Rpb24gcHJvamVjdEFycmF5U3BsaWNlcyhhLGIpe3ZhciBjPVtdO3JldHVybiBjcmVhdGVJbml0aWFsU3BsaWNlcyhhLGIpLmZvckVhY2goZnVuY3Rpb24oYil7cmV0dXJuIDE9PWIuYWRkZWRDb3VudCYmMT09Yi5yZW1vdmVkLmxlbmd0aD92b2lkKGIucmVtb3ZlZFswXSE9PWFbYi5pbmRleF0mJmMucHVzaChiKSk6dm9pZChjPWMuY29uY2F0KGNhbGNTcGxpY2VzKGEsYi5pbmRleCxiLmluZGV4K2IuYWRkZWRDb3VudCxiLnJlbW92ZWQsMCxiLnJlbW92ZWQubGVuZ3RoKSkpfSksY312YXIgdGVzdGluZ0V4cG9zZUN5Y2xlQ291bnQ9Z2xvYmFsLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50LGhhc09ic2VydmU9ZGV0ZWN0T2JqZWN0T2JzZXJ2ZSgpLGhhc0V2YWw9ZGV0ZWN0RXZhbCgpLG51bWJlcklzTmFOPWdsb2JhbC5OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGEpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYSYmZ2xvYmFsLmlzTmFOKGEpfSxjcmVhdGVPYmplY3Q9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LGlkZW50U3RhcnQ9IlskX2EtekEtWl0iLGlkZW50UGFydD0iWyRfYS16QS1aMC05XSIsaWRlbnRSZWdFeHA9bmV3IFJlZ0V4cCgiXiIraWRlbnRTdGFydCsiKyIraWRlbnRQYXJ0KyIqJCIpLHBhdGhTdGF0ZU1hY2hpbmU9e2JlZm9yZVBhdGg6e3dzOlsiYmVmb3JlUGF0aCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdLCJbIjpbImJlZm9yZUVsZW1lbnQiXSxlb2Y6WyJhZnRlclBhdGgiXX0saW5QYXRoOnt3czpbImluUGF0aCJdLCIuIjpbImJlZm9yZUlkZW50Il0sIlsiOlsiYmVmb3JlRWxlbWVudCJdLGVvZjpbImFmdGVyUGF0aCJdfSxiZWZvcmVJZGVudDp7d3M6WyJiZWZvcmVJZGVudCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdfSxpbklkZW50OntpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXSwwOlsiaW5JZGVudCIsImFwcGVuZCJdLG51bWJlcjpbImluSWRlbnQiLCJhcHBlbmQiXSx3czpbImluUGF0aCIsInB1c2giXSwiLiI6WyJiZWZvcmVJZGVudCIsInB1c2giXSwiWyI6WyJiZWZvcmVFbGVtZW50IiwicHVzaCJdLGVvZjpbImFmdGVyUGF0aCIsInB1c2giXX0sYmVmb3JlRWxlbWVudDp7d3M6WyJiZWZvcmVFbGVtZW50Il0sMDpbImFmdGVyWmVybyIsImFwcGVuZCJdLG51bWJlcjpbImluSW5kZXgiLCJhcHBlbmQiXSwiJyI6WyJpblNpbmdsZVF1b3RlIiwiYXBwZW5kIiwiIl0sJyInOlsiaW5Eb3VibGVRdW90ZSIsImFwcGVuZCIsIiJdfSxhZnRlclplcm86e3dzOlsiYWZ0ZXJFbGVtZW50IiwicHVzaCJdLCJdIjpbImluUGF0aCIsInB1c2giXX0saW5JbmRleDp7MDpbImluSW5kZXgiLCJhcHBlbmQiXSxudW1iZXI6WyJpbkluZGV4IiwiYXBwZW5kIl0sd3M6WyJhZnRlckVsZW1lbnQiXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19LGluU2luZ2xlUXVvdGU6eyInIjpbImFmdGVyRWxlbWVudCJdLGVvZjpbImVycm9yIl0sImVsc2UiOlsiaW5TaW5nbGVRdW90ZSIsImFwcGVuZCJdfSxpbkRvdWJsZVF1b3RlOnsnIic6WyJhZnRlckVsZW1lbnQiXSxlb2Y6WyJlcnJvciJdLCJlbHNlIjpbImluRG91YmxlUXVvdGUiLCJhcHBlbmQiXX0sYWZ0ZXJFbGVtZW50Ont3czpbImFmdGVyRWxlbWVudCJdLCJdIjpbImluUGF0aCIsInB1c2giXX19LGNvbnN0cnVjdG9ySXNQcml2YXRlPXt9LHBhdGhDYWNoZT17fTtQYXRoLmdldD1nZXRQYXRoLFBhdGgucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOltdLHZhbGlkOiEwLHRvU3RyaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPSIiLGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7dmFyIGM9dGhpc1tiXTthKz1pc0lkZW50KGMpP2I/Ii4iK2M6Yzpmb3JtYXRBY2Nlc3NvcihjKX1yZXR1cm4gYX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZihudWxsPT1hKXJldHVybjthPWFbdGhpc1tiXV19cmV0dXJuIGF9LGl0ZXJhdGVPYmplY3RzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKGMmJihhPWFbdGhpc1tjLTFdXSksIWlzT2JqZWN0KGEpKXJldHVybjtiKGEsdGhpc1swXSl9fSxjb21waWxlZEdldFZhbHVlRnJvbUZuOmZ1bmN0aW9uKCl7dmFyIGE9IiIsYj0ib2JqIjthKz0iaWYgKG9iaiAhPSBudWxsIjtmb3IodmFyIGMsZD0wO2Q8dGhpcy5sZW5ndGgtMTtkKyspYz10aGlzW2RdLGIrPWlzSWRlbnQoYyk/Ii4iK2M6Zm9ybWF0QWNjZXNzb3IoYyksYSs9IiAmJlxuICAgICAiK2IrIiAhPSBudWxsIjthKz0iKVxuIjt2YXIgYz10aGlzW2RdO3JldHVybiBiKz1pc0lkZW50KGMpPyIuIitjOmZvcm1hdEFjY2Vzc29yKGMpLGErPSIgIHJldHVybiAiK2IrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixhKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKCFpc09iamVjdChhKSlyZXR1cm4hMTthPWFbdGhpc1tjXV19cmV0dXJuIGlzT2JqZWN0KGEpPyhhW3RoaXNbY11dPWIsITApOiExfX0pO3ZhciBpbnZhbGlkUGF0aD1uZXcgUGF0aCgiIixjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7aW52YWxpZFBhdGgudmFsaWQ9ITEsaW52YWxpZFBhdGguZ2V0VmFsdWVGcm9tPWludmFsaWRQYXRoLnNldFZhbHVlRnJvbT1mdW5jdGlvbigpe307dmFyIE1BWF9ESVJUWV9DSEVDS19DWUNMRVM9MWUzLGVvbVRhc2tzPVtdLHJ1bkVPTT1oYXNPYnNlcnZlP2Z1bmN0aW9uKCl7dmFyIGE9e3BpbmdQb25nOiEwfSxiPSExO3JldHVybiBPYmplY3Qub2JzZXJ2ZShhLGZ1bmN0aW9uKCl7cnVuRU9NVGFza3MoKSxiPSExfSksZnVuY3Rpb24oYyl7ZW9tVGFza3MucHVzaChjKSxifHwoYj0hMCxhLnBpbmdQb25nPSFhLnBpbmdQb25nKX19KCk6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZW9tVGFza3MucHVzaChhKX19KCksb2JzZXJ2ZWRPYmplY3RDYWNoZT1bXSxvYnNlcnZlZFNldENhY2hlPVtdLGxhc3RPYnNlcnZlZFNldCxVTk9QRU5FRD0wLE9QRU5FRD0xLENMT1NFRD0yLFJFU0VUVElORz0zLG5leHRPYnNlcnZlcklkPTE7T2JzZXJ2ZXIucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPVVOT1BFTkVEKXRocm93IEVycm9yKCJPYnNlcnZlciBoYXMgYWxyZWFkeSBiZWVuIG9wZW5lZC4iKTtyZXR1cm4gYWRkVG9BbGwodGhpcyksdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLmNvbm5lY3RfKCksdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMudmFsdWVffSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJihyZW1vdmVGcm9tQWxsKHRoaXMpLHRoaXMuZGlzY29ubmVjdF8oKSx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy5zdGF0ZV89Q0xPU0VEKX0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJmRpcnR5Q2hlY2sodGhpcyl9LHJlcG9ydF86ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuY2FsbGJhY2tfLmFwcGx5KHRoaXMudGFyZ2V0XyxhKX1jYXRjaChiKXtPYnNlcnZlci5fZXJyb3JUaHJvd25EdXJpbmdDYWxsYmFjaz0hMCxjb25zb2xlLmVycm9yKCJFeGNlcHRpb24gY2F1Z2h0IGR1cmluZyBvYnNlcnZlciBjYWxsYmFjazogIisoYi5zdGFja3x8YikpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja18odm9pZCAwLCEwKSx0aGlzLnZhbHVlX319O3ZhciBjb2xsZWN0T2JzZXJ2ZXJzPSFoYXNPYnNlcnZlLGFsbE9ic2VydmVycztPYnNlcnZlci5fYWxsT2JzZXJ2ZXJzQ291bnQ9MCxjb2xsZWN0T2JzZXJ2ZXJzJiYoYWxsT2JzZXJ2ZXJzPVtdKTt2YXIgcnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITEsaGFzRGVidWdGb3JjZUZ1bGxEZWxpdmVyeT1oYXNPYnNlcnZlJiZoYXNFdmFsJiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gZXZhbCgiJVJ1bk1pY3JvdGFza3MoKSIpLCEwfWNhdGNoKGV4KXtyZXR1cm4hMX19KCk7Z2xvYmFsLlBsYXRmb3JtPWdsb2JhbC5QbGF0Zm9ybXx8e30sZ2xvYmFsLlBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50PWZ1bmN0aW9uKCl7aWYoIXJ1bm5pbmdNaWNyb3Rhc2tDaGVja3BvaW50KXtpZihoYXNEZWJ1Z0ZvcmNlRnVsbERlbGl2ZXJ5KXJldHVybiB2b2lkIGV2YWwoIiVSdW5NaWNyb3Rhc2tzKCkiKTtpZihjb2xsZWN0T2JzZXJ2ZXJzKXtydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludD0hMDt2YXIgY3ljbGVzPTAsYW55Q2hhbmdlZCx0b0NoZWNrO2Rve2N5Y2xlcysrLHRvQ2hlY2s9YWxsT2JzZXJ2ZXJzLGFsbE9ic2VydmVycz1bXSxhbnlDaGFuZ2VkPSExO2Zvcih2YXIgaT0wO2k8dG9DaGVjay5sZW5ndGg7aSsrKXt2YXIgb2JzZXJ2ZXI9dG9DaGVja1tpXTtvYnNlcnZlci5zdGF0ZV89PU9QRU5FRCYmKG9ic2VydmVyLmNoZWNrXygpJiYoYW55Q2hhbmdlZD0hMCksYWxsT2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpKX1ydW5FT01UYXNrcygpJiYoYW55Q2hhbmdlZD0hMCl9d2hpbGUoTUFYX0RJUlRZX0NIRUNLX0NZQ0xFUz5jeWNsZXMmJmFueUNoYW5nZWQpO3Rlc3RpbmdFeHBvc2VDeWNsZUNvdW50JiYoZ2xvYmFsLmRpcnR5Q2hlY2tDeWNsZUNvdW50PWN5Y2xlcykscnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITF9fX0sY29sbGVjdE9ic2VydmVycyYmKGdsb2JhbC5QbGF0Zm9ybS5jbGVhck9ic2VydmVycz1mdW5jdGlvbigpe2FsbE9ic2VydmVycz1bXX0pLE9iamVjdE9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYnNlcnZlci5wcm90b3R5cGUsYXJyYXlPYnNlcnZlOiExLGNvbm5lY3RfOmZ1bmN0aW9uKCl7aGFzT2JzZXJ2ZT90aGlzLmRpcmVjdE9ic2VydmVyXz1nZXRPYnNlcnZlZE9iamVjdCh0aGlzLHRoaXMudmFsdWVfLHRoaXMuYXJyYXlPYnNlcnZlKTp0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKX0sY29weU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYj1BcnJheS5pc0FycmF5KGEpP1tdOnt9O2Zvcih2YXIgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmKGIubGVuZ3RoPWEubGVuZ3RoKSxifSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGIsYztpZihoYXNPYnNlcnZlKXtpZighYSlyZXR1cm4hMTtjPXt9LGI9ZGlmZk9iamVjdEZyb21DaGFuZ2VSZWNvcmRzKHRoaXMudmFsdWVfLGEsYyl9ZWxzZSBjPXRoaXMub2xkT2JqZWN0XyxiPWRpZmZPYmplY3RGcm9tT2xkT2JqZWN0KHRoaXMudmFsdWVfLHRoaXMub2xkT2JqZWN0Xyk7cmV0dXJuIGRpZmZJc0VtcHR5KGIpPyExOihoYXNPYnNlcnZlfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYi5hZGRlZHx8e30sYi5yZW1vdmVkfHx7fSxiLmNoYW5nZWR8fHt9LGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfV0pLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXtoYXNPYnNlcnZlPyh0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSgpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCk6dGhpcy5vbGRPYmplY3RfPXZvaWQgMH0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJihoYXNPYnNlcnZlP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITEpOmRpcnR5Q2hlY2sodGhpcykpfSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpcmVjdE9ic2VydmVyXz90aGlzLmRpcmVjdE9ic2VydmVyXy5kZWxpdmVyKCEwKTp0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKSx0aGlzLnZhbHVlX319KSxBcnJheU9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYmplY3RPYnNlcnZlci5wcm90b3R5cGUsYXJyYXlPYnNlcnZlOiEwLGNvcHlPYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2xpY2UoKX0sY2hlY2tfOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGhhc09ic2VydmUpe2lmKCFhKXJldHVybiExO2I9cHJvamVjdEFycmF5U3BsaWNlcyh0aGlzLnZhbHVlXyxhKX1lbHNlIGI9Y2FsY1NwbGljZXModGhpcy52YWx1ZV8sMCx0aGlzLnZhbHVlXy5sZW5ndGgsdGhpcy5vbGRPYmplY3RfLDAsdGhpcy5vbGRPYmplY3RfLmxlbmd0aCk7cmV0dXJuIGImJmIubGVuZ3RoPyhoYXNPYnNlcnZlfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYl0pLCEwKTohMX19KSxBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcz1mdW5jdGlvbihhLGIsYyl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2Zvcih2YXIgZD1bYy5pbmRleCxjLnJlbW92ZWQubGVuZ3RoXSxlPWMuaW5kZXg7ZTxjLmluZGV4K2MuYWRkZWRDb3VudDspZC5wdXNoKGJbZV0pLGUrKztBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGEsZCl9KX0sUGF0aE9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYnNlcnZlci5wcm90b3R5cGUsZ2V0IHBhdGgoKXtyZXR1cm4gdGhpcy5wYXRoX30sY29ubmVjdF86ZnVuY3Rpb24oKXtoYXNPYnNlcnZlJiYodGhpcy5kaXJlY3RPYnNlcnZlcl89Z2V0T2JzZXJ2ZWRTZXQodGhpcyx0aGlzLm9iamVjdF8pKSx0aGlzLmNoZWNrXyh2b2lkIDAsITApfSxkaXNjb25uZWN0XzpmdW5jdGlvbigpe3RoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXyYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKHRoaXMpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCl9LGl0ZXJhdGVPYmplY3RzXzpmdW5jdGlvbihhKXt0aGlzLnBhdGhfLml0ZXJhdGVPYmplY3RzKHRoaXMub2JqZWN0XyxhKX0sY2hlY2tfOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy52YWx1ZV87cmV0dXJuIHRoaXMudmFsdWVfPXRoaXMucGF0aF8uZ2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0XyksYnx8YXJlU2FtZVZhbHVlKHRoaXMudmFsdWVfLGMpPyExOih0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpc10pLCEwKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXyYmdGhpcy5wYXRoXy5zZXRWYWx1ZUZyb20odGhpcy5vYmplY3RfLGEpfX0pO3ZhciBvYnNlcnZlclNlbnRpbmVsPXt9O0NvbXBvdW5kT2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe2lmKGhhc09ic2VydmUpe2Zvcih2YXIgYSxiPSExLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWlmKGE9dGhpcy5vYnNlcnZlZF9bY10sYSE9PW9ic2VydmVyU2VudGluZWwpe2I9ITA7YnJlYWt9YiYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPWdldE9ic2VydmVkU2V0KHRoaXMsYSkpfXRoaXMuY2hlY2tfKHZvaWQgMCwhdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLm9ic2VydmVkXy5sZW5ndGg7YSs9Mil0aGlzLm9ic2VydmVkX1thXT09PW9ic2VydmVyU2VudGluZWwmJnRoaXMub2JzZXJ2ZWRfW2ErMV0uY2xvc2UoKTt0aGlzLm9ic2VydmVkXy5sZW5ndGg9MCx0aGlzLnZhbHVlXy5sZW5ndGg9MCx0aGlzLmRpcmVjdE9ic2VydmVyXyYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKHRoaXMpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCl9LGFkZFBhdGg6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnN0YXRlXyE9VU5PUEVORUQmJnRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgcGF0aHMgb25jZSBzdGFydGVkLiIpO3ZhciBiPWdldFBhdGgoYik7aWYodGhpcy5vYnNlcnZlZF8ucHVzaChhLGIpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl8pe3ZhciBjPXRoaXMub2JzZXJ2ZWRfLmxlbmd0aC8yLTE7dGhpcy52YWx1ZV9bY109Yi5nZXRWYWx1ZUZyb20oYSl9fSxhZGRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXRlXyE9VU5PUEVORUQmJnRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgb2JzZXJ2ZXJzIG9uY2Ugc3RhcnRlZC4iKTtpZih0aGlzLm9ic2VydmVkXy5wdXNoKG9ic2VydmVyU2VudGluZWwsYSksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl7dmFyIGI9dGhpcy5vYnNlcnZlZF8ubGVuZ3RoLzItMTt0aGlzLnZhbHVlX1tiXT1hLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpfX0sc3RhcnRSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1PUEVORUQpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IHJlc2V0IHdoaWxlIG9wZW4iKTt0aGlzLnN0YXRlXz1SRVNFVFRJTkcsdGhpcy5kaXNjb25uZWN0XygpfSxmaW5pc2hSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IGZpbmlzaFJlc2V0IGFmdGVyIHN0YXJ0UmVzZXQiKTtyZXR1cm4gdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMuY29ubmVjdF8oKSx0aGlzLnZhbHVlX30saXRlcmF0ZU9iamVjdHNfOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTA7Yzx0aGlzLm9ic2VydmVkXy5sZW5ndGg7Yys9MiliPXRoaXMub2JzZXJ2ZWRfW2NdLGIhPT1vYnNlcnZlclNlbnRpbmVsJiZ0aGlzLm9ic2VydmVkX1tjKzFdLml0ZXJhdGVPYmplY3RzKGIsYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTA7ZDx0aGlzLm9ic2VydmVkXy5sZW5ndGg7ZCs9Mil7dmFyIGUsZj10aGlzLm9ic2VydmVkX1tkXSxnPXRoaXMub2JzZXJ2ZWRfW2QrMV07aWYoZj09PW9ic2VydmVyU2VudGluZWwpe3ZhciBoPWc7ZT10aGlzLnN0YXRlXz09PVVOT1BFTkVEP2gub3Blbih0aGlzLmRlbGl2ZXIsdGhpcyk6aC5kaXNjYXJkQ2hhbmdlcygpfWVsc2UgZT1nLmdldFZhbHVlRnJvbShmKTtiP3RoaXMudmFsdWVfW2QvMl09ZTphcmVTYW1lVmFsdWUoZSx0aGlzLnZhbHVlX1tkLzJdKXx8KGM9Y3x8W10sY1tkLzJdPXRoaXMudmFsdWVfW2QvMl0sdGhpcy52YWx1ZV9bZC8yXT1lKX1yZXR1cm4gYz8odGhpcy5yZXBvcnRfKFt0aGlzLnZhbHVlXyxjLHRoaXMub2JzZXJ2ZWRfXSksITApOiExfX0pLE9ic2VydmVyVHJhbnNmb3JtLnByb3RvdHlwZT17b3BlbjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNhbGxiYWNrXz1hLHRoaXMudGFyZ2V0Xz1iLHRoaXMudmFsdWVfPXRoaXMuZ2V0VmFsdWVGbl8odGhpcy5vYnNlcnZhYmxlXy5vcGVuKHRoaXMub2JzZXJ2ZWRDYWxsYmFja18sdGhpcykpLHRoaXMudmFsdWVffSxvYnNlcnZlZENhbGxiYWNrXzpmdW5jdGlvbihhKXtpZihhPXRoaXMuZ2V0VmFsdWVGbl8oYSksIWFyZVNhbWVWYWx1ZShhLHRoaXMudmFsdWVfKSl7dmFyIGI9dGhpcy52YWx1ZV87dGhpcy52YWx1ZV89YSx0aGlzLmNhbGxiYWNrXy5jYWxsKHRoaXMudGFyZ2V0Xyx0aGlzLnZhbHVlXyxiKX19LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVfPXRoaXMuZ2V0VmFsdWVGbl8odGhpcy5vYnNlcnZhYmxlXy5kaXNjYXJkQ2hhbmdlcygpKSx0aGlzLnZhbHVlX30sZGVsaXZlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9ic2VydmFibGVfLmRlbGl2ZXIoKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dGhpcy5zZXRWYWx1ZUZuXyhhKSwhdGhpcy5kb250UGFzc1Rocm91Z2hTZXRfJiZ0aGlzLm9ic2VydmFibGVfLnNldFZhbHVlP3RoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWUoYSk6dm9pZCAwfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMub2JzZXJ2YWJsZV8mJnRoaXMub2JzZXJ2YWJsZV8uY2xvc2UoKSx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLm9ic2VydmFibGVfPXZvaWQgMCx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5nZXRWYWx1ZUZuXz12b2lkIDAsdGhpcy5zZXRWYWx1ZUZuXz12b2lkIDB9fTt2YXIgZXhwZWN0ZWRSZWNvcmRUeXBlcz17YWRkOiEwLHVwZGF0ZTohMCwiZGVsZXRlIjohMH0sRURJVF9MRUFWRT0wLEVESVRfVVBEQVRFPTEsRURJVF9BREQ9MixFRElUX0RFTEVURT0zO0FycmF5U3BsaWNlLnByb3RvdHlwZT17Y2FsY0VkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mLWUrMSxoPWMtYisxLGk9bmV3IEFycmF5KGcpLGo9MDtnPmo7aisrKWlbal09bmV3IEFycmF5KGgpLGlbal1bMF09ajtmb3IodmFyIGs9MDtoPms7aysrKWlbMF1ba109aztmb3IodmFyIGo9MTtnPmo7aisrKWZvcih2YXIgaz0xO2g+aztrKyspaWYodGhpcy5lcXVhbHMoYVtiK2stMV0sZFtlK2otMV0pKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX0sc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaChFRElUX0xFQVZFKTooZS5wdXNoKEVESVRfVVBEQVRFKSxkPWcpLGItLSxjLS0pOmY9PWg/KGUucHVzaChFRElUX0RFTEVURSksYi0tLGQ9aCk6KGUucHVzaChFRElUX0FERCksYy0tLGQ9aSl9ZWxzZSBlLnB1c2goRURJVF9ERUxFVEUpLGItLTtlbHNlIGUucHVzaChFRElUX0FERCksYy0tO3JldHVybiBlLnJldmVyc2UoKSxlfSxjYWxjU3BsaWNlczpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9MCxoPTAsaT1NYXRoLm1pbihjLWIsZi1lKTtpZigwPT1iJiYwPT1lJiYoZz10aGlzLnNoYXJlZFByZWZpeChhLGQsaSkpLGM9PWEubGVuZ3RoJiZmPT1kLmxlbmd0aCYmKGg9dGhpcy5zaGFyZWRTdWZmaXgoYSxkLGktZykpLGIrPWcsZSs9ZyxjLT1oLGYtPWgsYy1iPT0wJiZmLWU9PTApcmV0dXJuW107aWYoYj09Yyl7Zm9yKHZhciBqPW5ld1NwbGljZShiLFtdLDApO2Y+ZTspai5yZW1vdmVkLnB1c2goZFtlKytdKTtyZXR1cm5bal19aWYoZT09ZilyZXR1cm5bbmV3U3BsaWNlKGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIEVESVRfTEVBVkU6aiYmKGwucHVzaChqKSxqPXZvaWQgMCksbSsrLG4rKzticmVhaztjYXNlIEVESVRfVVBEQVRFOmp8fChqPW5ld1NwbGljZShtLFtdLDApKSxqLmFkZGVkQ291bnQrKyxtKyssai5yZW1vdmVkLnB1c2goZFtuXSksbisrO2JyZWFrO2Nhc2UgRURJVF9BREQ6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIEVESVRfREVMRVRFOmp8fChqPW5ld1NwbGljZShtLFtdLDApKSxqLnJlbW92ZWQucHVzaChkW25dKSxuKyt9cmV0dXJuIGomJmwucHVzaChqKSxsfSxzaGFyZWRQcmVmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wO2M+ZDtkKyspaWYoIXRoaXMuZXF1YWxzKGFbZF0sYltkXSkpcmV0dXJuIGQ7cmV0dXJuIGN9LHNoYXJlZFN1ZmZpeDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsZj0wO2M+ZiYmdGhpcy5lcXVhbHMoYVstLWRdLGJbLS1lXSk7KWYrKztyZXR1cm4gZn0sY2FsY3VsYXRlU3BsaWNlczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNhbGNTcGxpY2VzKGEsMCxhLmxlbmd0aCxiLDAsYi5sZW5ndGgpfSxlcXVhbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9fTt2YXIgYXJyYXlTcGxpY2U9bmV3IEFycmF5U3BsaWNlO2dsb2JhbC5PYnNlcnZlcj1PYnNlcnZlcixnbG9iYWwuT2JzZXJ2ZXIucnVuRU9NXz1ydW5FT00sZ2xvYmFsLk9ic2VydmVyLm9ic2VydmVyU2VudGluZWxfPW9ic2VydmVyU2VudGluZWwsZ2xvYmFsLk9ic2VydmVyLmhhc09iamVjdE9ic2VydmU9aGFzT2JzZXJ2ZSxnbG9iYWwuQXJyYXlPYnNlcnZlcj1BcnJheU9ic2VydmVyLGdsb2JhbC5BcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXJyYXlTcGxpY2UuY2FsY3VsYXRlU3BsaWNlcyhhLGIpfSxnbG9iYWwuQXJyYXlTcGxpY2U9QXJyYXlTcGxpY2UsZ2xvYmFsLk9iamVjdE9ic2VydmVyPU9iamVjdE9ic2VydmVyLGdsb2JhbC5QYXRoT2JzZXJ2ZXI9UGF0aE9ic2VydmVyLGdsb2JhbC5Db21wb3VuZE9ic2VydmVyPUNvbXBvdW5kT2JzZXJ2ZXIsZ2xvYmFsLlBhdGg9UGF0aCxnbG9iYWwuT2JzZXJ2ZXJUcmFuc2Zvcm09T2JzZXJ2ZXJUcmFuc2Zvcm19KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGU/Z2xvYmFsOnRoaXN8fHdpbmRvdyksUGxhdGZvcm0uZmxhZ3Muc2hhZG93Pyh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGw9e30sZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIGNocm9tZSYmY2hyb21lLmFwcCYmY2hyb21lLmFwcC5ydW50aW1lKXJldHVybiExO2lmKG5hdmlnYXRvci5nZXREZXZpY2VTdG9yYWdlKXJldHVybiExO3RyeXt2YXIgYT1uZXcgRnVuY3Rpb24oInJldHVybiB0cnVlOyIpO3JldHVybiBhKCl9Y2F0Y2goYil7cmV0dXJuITF9fWZ1bmN0aW9uIGMoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gZChhLGIpe2Zvcih2YXIgYz1MKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtLKGEsZSxNKGIsZSkpfXJldHVybiBhfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9TChiKSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07c3dpdGNoKGUpe2Nhc2UiYXJndW1lbnRzIjpjYXNlImNhbGxlciI6Y2FzZSJsZW5ndGgiOmNhc2UibmFtZSI6Y2FzZSJwcm90b3R5cGUiOmNhc2UidG9TdHJpbmciOmNvbnRpbnVlfUsoYSxlLE0oYixlKSl9cmV0dXJuIGF9ZnVuY3Rpb24gZihhLGIpe2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGJbY11pbiBhKXJldHVybiBiW2NdfWZ1bmN0aW9uIGcoYSxiLGMpe04udmFsdWU9YyxLKGEsYixOKX1mdW5jdGlvbiBoKGEpe3ZhciBiPWEuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYz1HLmdldChiKTtpZihjKXJldHVybiBjO3ZhciBkPWgoYiksZT12KGQpO3JldHVybiBzKGIsZSxhKSxlfWZ1bmN0aW9uIGkoYSxiKXtxKGEsYiwhMCl9ZnVuY3Rpb24gaihhLGIpe3EoYixhLCExKX1mdW5jdGlvbiBrKGEpe3JldHVybi9eb25bYS16XSskLy50ZXN0KGEpfWZ1bmN0aW9uIGwoYSl7cmV0dXJuL15cd1thLXpBLVpfMC05XSokLy50ZXN0KGEpfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIEomJmwoYSk/bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcy5pbXBsLiIrYSk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdfX1mdW5jdGlvbiBuKGEpe3JldHVybiBKJiZsKGEpP25ldyBGdW5jdGlvbigidiIsInRoaXMuaW1wbC4iK2ErIiA9IHYiKTpmdW5jdGlvbihiKXt0aGlzLmltcGxbYV09Yn19ZnVuY3Rpb24gbyhhKXtyZXR1cm4gSiYmbChhKT9uZXcgRnVuY3Rpb24oInJldHVybiB0aGlzLmltcGwuIithKyIuYXBwbHkodGhpcy5pbXBsLCBhcmd1bWVudHMpIik6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX1mdW5jdGlvbiBwKGEsYil7dHJ5e3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYil9Y2F0Y2goYyl7cmV0dXJuIFB9fWZ1bmN0aW9uIHEoYixjLGQpe2Zvcih2YXIgZT1MKGIpLGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGc9ZVtmXTtpZigicG9seW1lckJsYWNrTGlzdF8iIT09ZyYmIShnIGluIGN8fGIucG9seW1lckJsYWNrTGlzdF8mJmIucG9seW1lckJsYWNrTGlzdF9bZ10pKXtPJiZiLl9fbG9va3VwR2V0dGVyX18oZyk7dmFyIGgsaSxqPXAoYixnKTtpZihkJiYiZnVuY3Rpb24iPT10eXBlb2Ygai52YWx1ZSljW2ddPW8oZyk7ZWxzZXt2YXIgbD1rKGcpO2g9bD9hLmdldEV2ZW50SGFuZGxlckdldHRlcihnKTptKGcpLChqLndyaXRhYmxlfHxqLnNldCkmJihpPWw/YS5nZXRFdmVudEhhbmRsZXJTZXR0ZXIoZyk6bihnKSksSyhjLGcse2dldDpoLHNldDppLGNvbmZpZ3VyYWJsZTpqLmNvbmZpZ3VyYWJsZSxlbnVtZXJhYmxlOmouZW51bWVyYWJsZX0pfX19fWZ1bmN0aW9uIHIoYSxiLGMpe3ZhciBkPWEucHJvdG90eXBlO3MoZCxiLGMpLGUoYixhKX1mdW5jdGlvbiBzKGEsYixkKXt2YXIgZT1iLnByb3RvdHlwZTtjKHZvaWQgMD09PUcuZ2V0KGEpKSxHLnNldChhLGIpLEguc2V0KGUsYSksaShhLGUpLGQmJmooZSxkKSxnKGUsImNvbnN0cnVjdG9yIixiKSxiLnByb3RvdHlwZT1lfWZ1bmN0aW9uIHQoYSxiKXtyZXR1cm4gRy5nZXQoYi5wcm90b3R5cGUpPT09YX1mdW5jdGlvbiB1KGEpe3ZhciBiPU9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxjPWgoYiksZD12KGMpO3JldHVybiBzKGIsZCxhKSxkfWZ1bmN0aW9uIHYoYSl7ZnVuY3Rpb24gYihiKXthLmNhbGwodGhpcyxiKX12YXIgYz1PYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKTtyZXR1cm4gYy5jb25zdHJ1Y3Rvcj1iLGIucHJvdG90eXBlPWMsYn1mdW5jdGlvbiB3KGEpe3JldHVybiBhIGluc3RhbmNlb2YgSS5FdmVudFRhcmdldHx8YSBpbnN0YW5jZW9mIEkuRXZlbnR8fGEgaW5zdGFuY2VvZiBJLlJhbmdlfHxhIGluc3RhbmNlb2YgSS5ET01JbXBsZW1lbnRhdGlvbnx8YSBpbnN0YW5jZW9mIEkuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfHxhIGluc3RhbmNlb2YgSS5Gb3JtRGF0YXx8SS5XZWJHTFJlbmRlcmluZ0NvbnRleHQmJmEgaW5zdGFuY2VvZiBJLldlYkdMUmVuZGVyaW5nQ29udGV4dH1mdW5jdGlvbiB4KGEpe3JldHVybiBSJiZhIGluc3RhbmNlb2YgUnx8YSBpbnN0YW5jZW9mIFR8fGEgaW5zdGFuY2VvZiBTfHxhIGluc3RhbmNlb2YgVXx8YSBpbnN0YW5jZW9mIFZ8fGEgaW5zdGFuY2VvZiBRfHxhIGluc3RhbmNlb2YgV3x8YSBpbnN0YW5jZW9mIFp8fFgmJmEgaW5zdGFuY2VvZiBYfHxZJiZhIGluc3RhbmNlb2YgWX1mdW5jdGlvbiB5KGEpe3JldHVybiBudWxsPT09YT9udWxsOihjKHgoYSkpLGEucG9seW1lcldyYXBwZXJffHwoYS5wb2x5bWVyV3JhcHBlcl89bmV3KGgoYSkpKGEpKSl9ZnVuY3Rpb24geihhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYyh3KGEpKSxhLmltcGwpfWZ1bmN0aW9uIEEoYSl7cmV0dXJuIGEmJncoYSk/eihhKTphfWZ1bmN0aW9uIEIoYSl7cmV0dXJuIGEmJiF3KGEpP3koYSk6YX1mdW5jdGlvbiBDKGEsYil7bnVsbCE9PWImJihjKHgoYSkpLGModm9pZCAwPT09Ynx8dyhiKSksYS5wb2x5bWVyV3JhcHBlcl89Yil9ZnVuY3Rpb24gRChhLGIsYyl7JC5nZXQ9YyxLKGEucHJvdG90eXBlLGIsJCl9ZnVuY3Rpb24gRShhLGIpe0QoYSxiLGZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5pbXBsW2JdKX0pfWZ1bmN0aW9uIEYoYSxiKXthLmZvckVhY2goZnVuY3Rpb24oYSl7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7dmFyIGE9Qih0aGlzKTtyZXR1cm4gYVtiXS5hcHBseShhLGFyZ3VtZW50cyl9fSl9KX12YXIgRz1uZXcgV2Vha01hcCxIPW5ldyBXZWFrTWFwLEk9T2JqZWN0LmNyZWF0ZShudWxsKSxKPWIoKSxLPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxMPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLE09T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixOPXt2YWx1ZTp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITB9O0wod2luZG93KTt2YXIgTz0vRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxQPXtnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5jdGlvbigpe30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9LFE9d2luZG93LkRPTUltcGxlbWVudGF0aW9uLFI9d2luZG93LkV2ZW50VGFyZ2V0LFM9d2luZG93LkV2ZW50LFQ9d2luZG93Lk5vZGUsVT13aW5kb3cuV2luZG93LFY9d2luZG93LlJhbmdlLFc9d2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxYPXdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQsWT13aW5kb3cuU1ZHRWxlbWVudEluc3RhbmNlLFo9d2luZG93LkZvcm1EYXRhLCQ9e2dldDp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9O2EuYXNzZXJ0PWMsYS5jb25zdHJ1Y3RvclRhYmxlPUcsYS5kZWZpbmVHZXR0ZXI9RCxhLmRlZmluZVdyYXBHZXR0ZXI9RSxhLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyPUYsYS5pc1dyYXBwZXI9dyxhLmlzV3JhcHBlckZvcj10LGEubWl4aW49ZCxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlPUgsYS5vbmVPZj1mLGEucmVnaXN0ZXJPYmplY3Q9dSxhLnJlZ2lzdGVyV3JhcHBlcj1yLGEucmV3cmFwPUMsYS51bndyYXA9eixhLnVud3JhcElmTmVlZGVkPUEsYS53cmFwPXksYS53cmFwSWZOZWVkZWQ9QixhLndyYXBwZXJzPUl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtnPSExO3ZhciBhPWYuc2xpY2UoMCk7Zj1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdKCl9ZnVuY3Rpb24gYyhhKXtmLnB1c2goYSksZ3x8KGc9ITAsZChiLDApKX12YXIgZCxlPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyLGY9W10sZz0hMTtpZihlKXt2YXIgaD0xLGk9bmV3IGUoYiksaj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShoKTtpLm9ic2VydmUoaix7Y2hhcmFjdGVyRGF0YTohMH0pLGQ9ZnVuY3Rpb24oKXtoPShoKzEpJTIsai5kYXRhPWh9fWVsc2UgZD13aW5kb3cuc2V0SW1tZWRpYXRlfHx3aW5kb3cuc2V0VGltZW91dDthLnNldEVuZE9mTWljcm90YXNrPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtwfHwoayhjKSxwPSEwKX1mdW5jdGlvbiBjKCl7cD0hMTtkbyBmb3IodmFyIGE9by5zbGljZSgpLGI9ITEsYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLGU9ZC50YWtlUmVjb3JkcygpO2YoZCksZS5sZW5ndGgmJihkLmNhbGxiYWNrXyhlLGQpLGI9ITApfXdoaWxlKGIpfWZ1bmN0aW9uIGQoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1uZXcgbS5Ob2RlTGlzdCx0aGlzLnJlbW92ZWROb2Rlcz1uZXcgbS5Ob2RlTGlzdCx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBlKGEsYil7Zm9yKDthO2E9YS5wYXJlbnROb2RlKXt2YXIgYz1uLmdldChhKTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO2Uub3B0aW9ucy5zdWJ0cmVlJiZlLmFkZFRyYW5zaWVudE9ic2VydmVyKGIpfX19ZnVuY3Rpb24gZihhKXtmb3IodmFyIGI9MDtiPGEubm9kZXNfLmxlbmd0aDtiKyspe3ZhciBjPWEubm9kZXNfW2JdLGQ9bi5nZXQoYyk7aWYoIWQpcmV0dXJuO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2Yub2JzZXJ2ZXI9PT1hJiZmLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfX19ZnVuY3Rpb24gZyhhLGMsZSl7Zm9yKHZhciBmPU9iamVjdC5jcmVhdGUobnVsbCksZz1PYmplY3QuY3JlYXRlKG51bGwpLGg9YTtoO2g9aC5wYXJlbnROb2RlKXt2YXIgaT1uLmdldChoKTtpZihpKWZvcih2YXIgaj0wO2o8aS5sZW5ndGg7aisrKXt2YXIgaz1pW2pdLGw9ay5vcHRpb25zO2lmKChoPT09YXx8bC5zdWJ0cmVlKSYmISgiYXR0cmlidXRlcyI9PT1jJiYhbC5hdHRyaWJ1dGVzfHwiYXR0cmlidXRlcyI9PT1jJiZsLmF0dHJpYnV0ZUZpbHRlciYmKG51bGwhPT1lLm5hbWVzcGFjZXx8LTE9PT1sLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGUubmFtZSkpfHwiY2hhcmFjdGVyRGF0YSI9PT1jJiYhbC5jaGFyYWN0ZXJEYXRhfHwiY2hpbGRMaXN0Ij09PWMmJiFsLmNoaWxkTGlzdCkpe3ZhciBtPWsub2JzZXJ2ZXI7ZlttLnVpZF9dPW0sKCJhdHRyaWJ1dGVzIj09PWMmJmwuYXR0cmlidXRlT2xkVmFsdWV8fCJjaGFyYWN0ZXJEYXRhIj09PWMmJmwuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKSYmKGdbbS51aWRfXT1lLm9sZFZhbHVlKX19fXZhciBvPSExO2Zvcih2YXIgcCBpbiBmKXt2YXIgbT1mW3BdLHE9bmV3IGQoYyxhKTsibmFtZSJpbiBlJiYibmFtZXNwYWNlImluIGUmJihxLmF0dHJpYnV0ZU5hbWU9ZS5uYW1lLHEuYXR0cmlidXRlTmFtZXNwYWNlPWUubmFtZXNwYWNlKSxlLmFkZGVkTm9kZXMmJihxLmFkZGVkTm9kZXM9ZS5hZGRlZE5vZGVzKSxlLnJlbW92ZWROb2RlcyYmKHEucmVtb3ZlZE5vZGVzPWUucmVtb3ZlZE5vZGVzKSxlLnByZXZpb3VzU2libGluZyYmKHEucHJldmlvdXNTaWJsaW5nPWUucHJldmlvdXNTaWJsaW5nKSxlLm5leHRTaWJsaW5nJiYocS5uZXh0U2libGluZz1lLm5leHRTaWJsaW5nKSx2b2lkIDAhPT1nW3BdJiYocS5vbGRWYWx1ZT1nW3BdKSxtLnJlY29yZHNfLnB1c2gocSksbz0hMH1vJiZiKCl9ZnVuY3Rpb24gaChhKXtpZih0aGlzLmNoaWxkTGlzdD0hIWEuY2hpbGRMaXN0LHRoaXMuc3VidHJlZT0hIWEuc3VidHJlZSx0aGlzLmF0dHJpYnV0ZXM9ImF0dHJpYnV0ZXMiaW4gYXx8ISgiYXR0cmlidXRlT2xkVmFsdWUiaW4gYXx8ImF0dHJpYnV0ZUZpbHRlciJpbiBhKT8hIWEuYXR0cmlidXRlczohMCx0aGlzLmNoYXJhY3RlckRhdGE9ImNoYXJhY3RlckRhdGFPbGRWYWx1ZSJpbiBhJiYhKCJjaGFyYWN0ZXJEYXRhImluIGEpPyEwOiEhYS5jaGFyYWN0ZXJEYXRhLCF0aGlzLmF0dHJpYnV0ZXMmJihhLmF0dHJpYnV0ZU9sZFZhbHVlfHwiYXR0cmlidXRlRmlsdGVyImluIGEpfHwhdGhpcy5jaGFyYWN0ZXJEYXRhJiZhLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSl0aHJvdyBuZXcgVHlwZUVycm9yO2lmKHRoaXMuY2hhcmFjdGVyRGF0YT0hIWEuY2hhcmFjdGVyRGF0YSx0aGlzLmF0dHJpYnV0ZU9sZFZhbHVlPSEhYS5hdHRyaWJ1dGVPbGRWYWx1ZSx0aGlzLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT0hIWEuY2hhcmFjdGVyRGF0YU9sZFZhbHVlLCJhdHRyaWJ1dGVGaWx0ZXIiaW4gYSl7aWYobnVsbD09YS5hdHRyaWJ1dGVGaWx0ZXJ8fCJvYmplY3QiIT10eXBlb2YgYS5hdHRyaWJ1dGVGaWx0ZXIpdGhyb3cgbmV3IFR5cGVFcnJvcjt0aGlzLmF0dHJpYnV0ZUZpbHRlcj1xLmNhbGwoYS5hdHRyaWJ1dGVGaWx0ZXIpfWVsc2UgdGhpcy5hdHRyaWJ1dGVGaWx0ZXI9bnVsbH1mdW5jdGlvbiBpKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89KytyLG8ucHVzaCh0aGlzKX1mdW5jdGlvbiBqKGEsYixjKXt0aGlzLm9ic2VydmVyPWEsdGhpcy50YXJnZXQ9Yix0aGlzLm9wdGlvbnM9Yyx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W119dmFyIGs9YS5zZXRFbmRPZk1pY3JvdGFzayxsPWEud3JhcElmTmVlZGVkLG09YS53cmFwcGVycyxuPW5ldyBXZWFrTWFwLG89W10scD0hMSxxPUFycmF5LnByb3RvdHlwZS5zbGljZSxyPTA7aS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXthPWwoYSk7dmFyIGMsZD1uZXcgaChiKSxlPW4uZ2V0KGEpO2V8fG4uc2V0KGEsZT1bXSk7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspZVtmXS5vYnNlcnZlcj09PXRoaXMmJihjPWVbZl0sYy5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKSxjLm9wdGlvbnM9ZCk7Y3x8KGM9bmV3IGoodGhpcyxhLGQpLGUucHVzaChjKSx0aGlzLm5vZGVzXy5wdXNoKGEpKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW4uZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19LGoucHJvdG90eXBlPXthZGRUcmFuc2llbnRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZihhIT09dGhpcy50YXJnZXQpe3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGEpO3ZhciBiPW4uZ2V0KGEpO2J8fG4uc2V0KGEsYj1bXSksYi5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylmb3IodmFyIGM9YVtiXSxkPW4uZ2V0KGMpLGU9MDtlPGQubGVuZ3RoO2UrKylpZihkW2VdPT09dGhpcyl7ZC5zcGxpY2UoZSwxKTticmVha319fSxhLmVucXVldWVNdXRhdGlvbj1nLGEucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnM9ZSxhLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9aSxhLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXt0aGlzLnJvb3Q9YSx0aGlzLnBhcmVudD1ifWZ1bmN0aW9uIGMoYSxiKXtpZihhLnRyZWVTY29wZV8hPT1iKXthLnRyZWVTY29wZV89Yjtmb3IodmFyIGQ9YS5zaGFkb3dSb290O2Q7ZD1kLm9sZGVyU2hhZG93Um9vdClkLnRyZWVTY29wZV8ucGFyZW50PWI7Zm9yKHZhciBlPWEuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyljKGUsYil9fWZ1bmN0aW9uIGQoYyl7aWYoYyBpbnN0YW5jZW9mIGEud3JhcHBlcnMuV2luZG93LGMudHJlZVNjb3BlXylyZXR1cm4gYy50cmVlU2NvcGVfO3ZhciBlLGY9Yy5wYXJlbnROb2RlO3JldHVybiBlPWY/ZChmKTpuZXcgYihjLG51bGwpLGMudHJlZVNjb3BlXz1lfWIucHJvdG90eXBlPXtnZXQgcmVuZGVyZXIoKXtyZXR1cm4gdGhpcy5yb290IGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290P2EuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMucm9vdC5ob3N0KTpudWxsfSxjb250YWluczpmdW5jdGlvbihhKXtmb3IoO2E7YT1hLnBhcmVudClpZihhPT09dGhpcylyZXR1cm4hMDtyZXR1cm4hMX19LGEuVHJlZVNjb3BlPWIsYS5nZXRUcmVlU2NvcGU9ZCxhLnNldFRyZWVTY29wZT1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhIGluc3RhbmNlb2YgUS5TaGFkb3dSb290fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIEwoYSkucm9vdH1mdW5jdGlvbiBkKGEsZCl7dmFyIGg9W10saT1hO2ZvcihoLnB1c2goaSk7aTspe3ZhciBqPWcoaSk7aWYoaiYmai5sZW5ndGg+MCl7Zm9yKHZhciBrPTA7azxqLmxlbmd0aDtrKyspe3ZhciBtPWpba107aWYoZihtKSl7dmFyIG49YyhtKSxvPW4ub2xkZXJTaGFkb3dSb290O28mJmgucHVzaChvKX1oLnB1c2gobSl9aT1qW2oubGVuZ3RoLTFdfWVsc2UgaWYoYihpKSl7aWYobChhLGkpJiZlKGQpKWJyZWFrO2k9aS5ob3N0LGgucHVzaChpKX1lbHNlIGk9aS5wYXJlbnROb2RlLGkmJmgucHVzaChpKX1yZXR1cm4gaH1mdW5jdGlvbiBlKGEpe2lmKCFhKXJldHVybiExO3N3aXRjaChhLnR5cGUpe2Nhc2UiYWJvcnQiOmNhc2UiZXJyb3IiOmNhc2Uic2VsZWN0IjpjYXNlImNoYW5nZSI6Y2FzZSJsb2FkIjpjYXNlInJlc2V0IjpjYXNlInJlc2l6ZSI6Y2FzZSJzY3JvbGwiOmNhc2Uic2VsZWN0c3RhcnQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBIVE1MU2hhZG93RWxlbWVudH1mdW5jdGlvbiBnKGIpe3JldHVybiBhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzKGIpfWZ1bmN0aW9uIGgoYSxiKXtpZigwPT09YS5sZW5ndGgpcmV0dXJuIGI7YiBpbnN0YW5jZW9mIFEuV2luZG93JiYoYj1iLmRvY3VtZW50KTtmb3IodmFyIGM9TChiKSxkPWFbMF0sZT1MKGQpLGY9aihjLGUpLGc9MDtnPGEubGVuZ3RoO2crKyl7dmFyIGg9YVtnXTtpZihMKGgpPT09ZilyZXR1cm4gaH1yZXR1cm4gYVthLmxlbmd0aC0xXX1mdW5jdGlvbiBpKGEpe2Zvcih2YXIgYj1bXTthO2E9YS5wYXJlbnQpYi5wdXNoKGEpO3JldHVybiBifWZ1bmN0aW9uIGooYSxiKXtmb3IodmFyIGM9aShhKSxkPWkoYiksZT1udWxsO2MubGVuZ3RoPjAmJmQubGVuZ3RoPjA7KXt2YXIgZj1jLnBvcCgpLGc9ZC5wb3AoKTtpZihmIT09ZylicmVhaztlPWZ9cmV0dXJuIGV9ZnVuY3Rpb24gayhhLGIsYyl7YiBpbnN0YW5jZW9mIFEuV2luZG93JiYoYj1iLmRvY3VtZW50KTt2YXIgZSxmPUwoYiksZz1MKGMpLGg9ZChjLGEpLGU9aihmLGcpO2V8fChlPWcucm9vdCk7Zm9yKHZhciBpPWU7aTtpPWkucGFyZW50KWZvcih2YXIgaz0wO2s8aC5sZW5ndGg7aysrKXt2YXIgbD1oW2tdO2lmKEwobCk9PT1pKXJldHVybiBsfXJldHVybiBudWxsfWZ1bmN0aW9uIGwoYSxiKXtyZXR1cm4gTChhKT09PUwoYil9ZnVuY3Rpb24gbShhKXtpZighUy5nZXQoYSkmJihTLnNldChhLCEwKSxuKFAoYSksUChhLnRhcmdldCkpLEopKXt2YXIgYj1KO3Rocm93IEo9bnVsbCxifX1mdW5jdGlvbiBuKGIsYyl7aWYoVC5nZXQoYikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkU3RhdGVFcnJvciIpO1Quc2V0KGIsITApLGEucmVuZGVyQWxsUGVuZGluZygpOwp2YXIgZSxmLGcsaD1iLnR5cGU7aWYoImxvYWQiPT09aCYmIWIuYnViYmxlcyl7dmFyIGk9YztpIGluc3RhbmNlb2YgUS5Eb2N1bWVudCYmKGc9aS5kZWZhdWx0VmlldykmJihmPWksZT1bXSl9aWYoIWUpaWYoYyBpbnN0YW5jZW9mIFEuV2luZG93KWc9YyxlPVtdO2Vsc2UgaWYoZT1kKGMsYiksImxvYWQiIT09Yi50eXBlKXt2YXIgaT1lW2UubGVuZ3RoLTFdO2kgaW5zdGFuY2VvZiBRLkRvY3VtZW50JiYoZz1pLmRlZmF1bHRWaWV3KX1yZXR1cm4gXy5zZXQoYixlKSxvKGIsZSxnLGYpJiZwKGIsZSxnLGYpJiZxKGIsZSxnLGYpLFguc2V0KGIsYWIpLFYuZGVsZXRlKGIsbnVsbCksVC5kZWxldGUoYiksYi5kZWZhdWx0UHJldmVudGVkfWZ1bmN0aW9uIG8oYSxiLGMsZCl7dmFyIGU9YmI7aWYoYyYmIXIoYyxhLGUsYixkKSlyZXR1cm4hMTtmb3IodmFyIGY9Yi5sZW5ndGgtMTtmPjA7Zi0tKWlmKCFyKGJbZl0sYSxlLGIsZCkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gcChhLGIsYyxkKXt2YXIgZT1jYixmPWJbMF18fGM7cmV0dXJuIHIoZixhLGUsYixkKX1mdW5jdGlvbiBxKGEsYixjLGQpe2Zvcih2YXIgZT1kYixmPTE7ZjxiLmxlbmd0aDtmKyspaWYoIXIoYltmXSxhLGUsYixkKSlyZXR1cm47YyYmYi5sZW5ndGg+MCYmcihjLGEsZSxiLGQpfWZ1bmN0aW9uIHIoYSxiLGMsZCxlKXt2YXIgZj1SLmdldChhKTtpZighZilyZXR1cm4hMDt2YXIgZz1lfHxoKGQsYSk7aWYoZz09PWEpe2lmKGM9PT1iYilyZXR1cm4hMDtjPT09ZGImJihjPWNiKX1lbHNlIGlmKGM9PT1kYiYmIWIuYnViYmxlcylyZXR1cm4hMDtpZigicmVsYXRlZFRhcmdldCJpbiBiKXt2YXIgaT1PKGIpLGo9aS5yZWxhdGVkVGFyZ2V0O2lmKGope2lmKGogaW5zdGFuY2VvZiBPYmplY3QmJmouYWRkRXZlbnRMaXN0ZW5lcil7dmFyIGw9UChqKSxtPWsoYixhLGwpO2lmKG09PT1nKXJldHVybiEwfWVsc2UgbT1udWxsO1cuc2V0KGIsbSl9fVguc2V0KGIsYyk7dmFyIG49Yi50eXBlLG89ITE7VS5zZXQoYixnKSxWLnNldChiLGEpLGYuZGVwdGgrKztmb3IodmFyIHA9MCxxPWYubGVuZ3RoO3E+cDtwKyspe3ZhciByPWZbcF07aWYoci5yZW1vdmVkKW89ITA7ZWxzZSBpZighKHIudHlwZSE9PW58fCFyLmNhcHR1cmUmJmM9PT1iYnx8ci5jYXB0dXJlJiZjPT09ZGIpKXRyeXtpZigiZnVuY3Rpb24iPT10eXBlb2Ygci5oYW5kbGVyP3IuaGFuZGxlci5jYWxsKGEsYik6ci5oYW5kbGVyLmhhbmRsZUV2ZW50KGIpLFouZ2V0KGIpKXJldHVybiExfWNhdGNoKHMpe0p8fChKPXMpfX1pZihmLmRlcHRoLS0sbyYmMD09PWYuZGVwdGgpe3ZhciB0PWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgcD0wO3A8dC5sZW5ndGg7cCsrKXRbcF0ucmVtb3ZlZHx8Zi5wdXNoKHRbcF0pfXJldHVybiFZLmdldChiKX1mdW5jdGlvbiBzKGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB0KGEsYil7aWYoIShhIGluc3RhbmNlb2YgZWIpKXJldHVybiBQKHgoZWIsIkV2ZW50IixhLGIpKTt2YXIgYz1hO3JldHVybiBwYnx8ImJlZm9yZXVubG9hZCIhPT1jLnR5cGU/dm9pZCh0aGlzLmltcGw9Yyk6bmV3IHkoYyl9ZnVuY3Rpb24gdShhKXtyZXR1cm4gYSYmYS5yZWxhdGVkVGFyZ2V0P09iamVjdC5jcmVhdGUoYSx7cmVsYXRlZFRhcmdldDp7dmFsdWU6TyhhLnJlbGF0ZWRUYXJnZXQpfX0pOmF9ZnVuY3Rpb24gdihhLGIsYyl7dmFyIGQ9d2luZG93W2FdLGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYiBpbnN0YW5jZW9mIGQ/dm9pZCh0aGlzLmltcGw9Yik6UCh4KGQsYSxiLGMpKX07aWYoZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksYyYmTShlLnByb3RvdHlwZSxjKSxkKXRyeXtOKGQsZSxuZXcgZCgidGVtcCIpKX1jYXRjaChmKXtOKGQsZSxkb2N1bWVudC5jcmVhdGVFdmVudChhKSl9cmV0dXJuIGV9ZnVuY3Rpb24gdyhhLGIpe3JldHVybiBmdW5jdGlvbigpe2FyZ3VtZW50c1tiXT1PKGFyZ3VtZW50c1tiXSk7dmFyIGM9Tyh0aGlzKTtjW2FdLmFwcGx5KGMsYXJndW1lbnRzKX19ZnVuY3Rpb24geChhLGIsYyxkKXtpZihuYilyZXR1cm4gbmV3IGEoYyx1KGQpKTt2YXIgZT1PKGRvY3VtZW50LmNyZWF0ZUV2ZW50KGIpKSxmPW1iW2JdLGc9W2NdO3JldHVybiBPYmplY3Qua2V5cyhmKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPW51bGwhPWQmJmEgaW4gZD9kW2FdOmZbYV07InJlbGF0ZWRUYXJnZXQiPT09YSYmKGI9TyhiKSksZy5wdXNoKGIpfSksZVsiaW5pdCIrYl0uYXBwbHkoZSxnKSxlfWZ1bmN0aW9uIHkoYSl7dC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24geihhKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYT8hMDphJiZhLmhhbmRsZUV2ZW50fWZ1bmN0aW9uIEEoYSl7c3dpdGNoKGEpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjpjYXNlIkRPTUF0dHJpYnV0ZU5hbWVDaGFuZ2VkIjpjYXNlIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCI6Y2FzZSJET01FbGVtZW50TmFtZUNoYW5nZWQiOmNhc2UiRE9NTm9kZUluc2VydGVkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZEludG9Eb2N1bWVudCI6Y2FzZSJET01Ob2RlUmVtb3ZlZCI6Y2FzZSJET01Ob2RlUmVtb3ZlZEZyb21Eb2N1bWVudCI6Y2FzZSJET01TdWJ0cmVlTW9kaWZpZWQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIEIoYSl7dGhpcy5pbXBsPWF9ZnVuY3Rpb24gQyhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFEuU2hhZG93Um9vdCYmKGE9YS5ob3N0KSxPKGEpfWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1SLmdldChhKTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKCFjW2RdLnJlbW92ZWQmJmNbZF0udHlwZT09PWIpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gRShhLGIpe2Zvcih2YXIgYz1PKGEpO2M7Yz1jLnBhcmVudE5vZGUpaWYoRChQKGMpLGIpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEYoYSl7SyhhLHJiKX1mdW5jdGlvbiBHKGIsYyxlLGYpe2EucmVuZGVyQWxsUGVuZGluZygpO3ZhciBnPVAoc2IuY2FsbChjLmltcGwsZSxmKSk7aWYoIWcpcmV0dXJuIG51bGw7dmFyIGk9ZChnLG51bGwpLGo9aS5sYXN0SW5kZXhPZihiKTtyZXR1cm4tMT09aj9udWxsOihpPWkuc2xpY2UoMCxqKSxoKGksYikpfWZ1bmN0aW9uIEgoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9JC5nZXQodGhpcyk7cmV0dXJuIGImJmJbYV0mJmJbYV0udmFsdWV8fG51bGx9fWZ1bmN0aW9uIEkoYSl7dmFyIGI9YS5zbGljZSgyKTtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9JC5nZXQodGhpcyk7ZHx8KGQ9T2JqZWN0LmNyZWF0ZShudWxsKSwkLnNldCh0aGlzLGQpKTt2YXIgZT1kW2FdO2lmKGUmJnRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGUud3JhcHBlZCwhMSksImZ1bmN0aW9uIj09dHlwZW9mIGMpe3ZhciBmPWZ1bmN0aW9uKGIpe3ZhciBkPWMuY2FsbCh0aGlzLGIpO2Q9PT0hMT9iLnByZXZlbnREZWZhdWx0KCk6Im9uYmVmb3JldW5sb2FkIj09PWEmJiJzdHJpbmciPT10eXBlb2YgZCYmKGIucmV0dXJuVmFsdWU9ZCl9O3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihiLGYsITEpLGRbYV09e3ZhbHVlOmMsd3JhcHBlZDpmfX19fXZhciBKLEs9YS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcixMPWEuZ2V0VHJlZVNjb3BlLE09YS5taXhpbixOPWEucmVnaXN0ZXJXcmFwcGVyLE89YS51bndyYXAsUD1hLndyYXAsUT1hLndyYXBwZXJzLFI9KG5ldyBXZWFrTWFwLG5ldyBXZWFrTWFwKSxTPW5ldyBXZWFrTWFwLFQ9bmV3IFdlYWtNYXAsVT1uZXcgV2Vha01hcCxWPW5ldyBXZWFrTWFwLFc9bmV3IFdlYWtNYXAsWD1uZXcgV2Vha01hcCxZPW5ldyBXZWFrTWFwLFo9bmV3IFdlYWtNYXAsJD1uZXcgV2Vha01hcCxfPW5ldyBXZWFrTWFwLGFiPTAsYmI9MSxjYj0yLGRiPTM7cy5wcm90b3R5cGU9e2VxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGVyPT09YS5oYW5kbGVyJiZ0aGlzLnR5cGU9PT1hLnR5cGUmJnRoaXMuY2FwdHVyZT09PWEuY2FwdHVyZX0sZ2V0IHJlbW92ZWQoKXtyZXR1cm4gbnVsbD09PXRoaXMuaGFuZGxlcn0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW51bGx9fTt2YXIgZWI9d2luZG93LkV2ZW50O2ViLnByb3RvdHlwZS5wb2x5bWVyQmxhY2tMaXN0Xz17cmV0dXJuVmFsdWU6ITAsa2V5TG9jYXRpb246ITB9LHQucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIFUuZ2V0KHRoaXMpfSxnZXQgY3VycmVudFRhcmdldCgpe3JldHVybiBWLmdldCh0aGlzKX0sZ2V0IGV2ZW50UGhhc2UoKXtyZXR1cm4gWC5nZXQodGhpcyl9LGdldCBwYXRoKCl7dmFyIGE9Xy5nZXQodGhpcyk7cmV0dXJuIGE/YS5zbGljZSgpOltdfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtZLnNldCh0aGlzLCEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7WS5zZXQodGhpcywhMCksWi5zZXQodGhpcywhMCl9fSxOKGViLHQsZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50IikpO3ZhciBmYj12KCJVSUV2ZW50Iix0KSxnYj12KCJDdXN0b21FdmVudCIsdCksaGI9e2dldCByZWxhdGVkVGFyZ2V0KCl7dmFyIGE9Vy5nZXQodGhpcyk7cmV0dXJuIHZvaWQgMCE9PWE/YTpQKE8odGhpcykucmVsYXRlZFRhcmdldCl9fSxpYj1NKHtpbml0TW91c2VFdmVudDp3KCJpbml0TW91c2VFdmVudCIsMTQpfSxoYiksamI9TSh7aW5pdEZvY3VzRXZlbnQ6dygiaW5pdEZvY3VzRXZlbnQiLDUpfSxoYiksa2I9digiTW91c2VFdmVudCIsZmIsaWIpLGxiPXYoIkZvY3VzRXZlbnQiLGZiLGpiKSxtYj1PYmplY3QuY3JlYXRlKG51bGwpLG5iPWZ1bmN0aW9uKCl7dHJ5e25ldyB3aW5kb3cuRm9jdXNFdmVudCgiZm9jdXMiKX1jYXRjaChhKXtyZXR1cm4hMX1yZXR1cm4hMH0oKTtpZighbmIpe3ZhciBvYj1mdW5jdGlvbihhLGIsYyl7aWYoYyl7dmFyIGQ9bWJbY107Yj1NKE0oe30sZCksYil9bWJbYV09Yn07b2IoIkV2ZW50Iix7YnViYmxlczohMSxjYW5jZWxhYmxlOiExfSksb2IoIkN1c3RvbUV2ZW50Iix7ZGV0YWlsOm51bGx9LCJFdmVudCIpLG9iKCJVSUV2ZW50Iix7dmlldzpudWxsLGRldGFpbDowfSwiRXZlbnQiKSxvYigiTW91c2VFdmVudCIse3NjcmVlblg6MCxzY3JlZW5ZOjAsY2xpZW50WDowLGNsaWVudFk6MCxjdHJsS2V5OiExLGFsdEtleTohMSxzaGlmdEtleTohMSxtZXRhS2V5OiExLGJ1dHRvbjowLHJlbGF0ZWRUYXJnZXQ6bnVsbH0sIlVJRXZlbnQiKSxvYigiRm9jdXNFdmVudCIse3JlbGF0ZWRUYXJnZXQ6bnVsbH0sIlVJRXZlbnQiKX12YXIgcGI9d2luZG93LkJlZm9yZVVubG9hZEV2ZW50O3kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLE0oeS5wcm90b3R5cGUse2dldCByZXR1cm5WYWx1ZSgpe3JldHVybiB0aGlzLmltcGwucmV0dXJuVmFsdWV9LHNldCByZXR1cm5WYWx1ZShhKXt0aGlzLmltcGwucmV0dXJuVmFsdWU9YX19KSxwYiYmTihwYix5KTt2YXIgcWI9d2luZG93LkV2ZW50VGFyZ2V0LHJiPVsiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50Il07W05vZGUsV2luZG93XS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWEucHJvdG90eXBlO3JiLmZvckVhY2goZnVuY3Rpb24oYSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsYSsiXyIse3ZhbHVlOmJbYV19KX0pfSksQi5wcm90b3R5cGU9e2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2lmKHooYikmJiFBKGEpKXt2YXIgZD1uZXcgcyhhLGIsYyksZT1SLmdldCh0aGlzKTtpZihlKXtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKylpZihkLmVxdWFscyhlW2ZdKSlyZXR1cm59ZWxzZSBlPVtdLGUuZGVwdGg9MCxSLnNldCh0aGlzLGUpO2UucHVzaChkKTt2YXIgZz1DKHRoaXMpO2cuYWRkRXZlbnRMaXN0ZW5lcl8oYSxtLCEwKX19LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2M9Qm9vbGVhbihjKTt2YXIgZD1SLmdldCh0aGlzKTtpZihkKXtmb3IodmFyIGU9MCxmPSExLGc9MDtnPGQubGVuZ3RoO2crKylkW2ddLnR5cGU9PT1hJiZkW2ddLmNhcHR1cmU9PT1jJiYoZSsrLGRbZ10uaGFuZGxlcj09PWImJihmPSEwLGRbZ10ucmVtb3ZlKCkpKTtpZihmJiYxPT09ZSl7dmFyIGg9Qyh0aGlzKTtoLnJlbW92ZUV2ZW50TGlzdGVuZXJfKGEsbSwhMCl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihiKXt2YXIgYz1PKGIpLGQ9Yy50eXBlO1Muc2V0KGMsITEpLGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBlO0UodGhpcyxkKXx8KGU9ZnVuY3Rpb24oKXt9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkLGUsITApKTt0cnl7cmV0dXJuIE8odGhpcykuZGlzcGF0Y2hFdmVudF8oYyl9ZmluYWxseXtlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxlLCEwKX19fSxxYiYmTihxYixCKTt2YXIgc2I9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludDthLmVsZW1lbnRGcm9tUG9pbnQ9RyxhLmdldEV2ZW50SGFuZGxlckdldHRlcj1ILGEuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyPUksYS53cmFwRXZlbnRUYXJnZXRNZXRob2RzPUYsYS53cmFwcGVycy5CZWZvcmVVbmxvYWRFdmVudD15LGEud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9Z2IsYS53cmFwcGVycy5FdmVudD10LGEud3JhcHBlcnMuRXZlbnRUYXJnZXQ9QixhLndyYXBwZXJzLkZvY3VzRXZlbnQ9bGIsYS53cmFwcGVycy5Nb3VzZUV2ZW50PWtiLGEud3JhcHBlcnMuVUlFdmVudD1mYn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIsbyl9ZnVuY3Rpb24gYyhhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBkKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPW5ldyBkLGU9MDtlPGEubGVuZ3RoO2UrKyliW2VdPW5ldyBjKGFbZV0pO3JldHVybiBiLmxlbmd0aD1lLGJ9ZnVuY3Rpb24gZihhKXtnLmNhbGwodGhpcyxhKX12YXIgZz1hLndyYXBwZXJzLlVJRXZlbnQsaD1hLm1peGluLGk9YS5yZWdpc3RlcldyYXBwZXIsaj1hLnVud3JhcCxrPWEud3JhcCxsPXdpbmRvdy5Ub3VjaEV2ZW50O2lmKGwpe3ZhciBtO3RyeXttPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJUb3VjaEV2ZW50Iil9Y2F0Y2gobil7cmV0dXJufXZhciBvPXtlbnVtZXJhYmxlOiExfTtjLnByb3RvdHlwZT17Z2V0IHRhcmdldCgpe3JldHVybiBrKHRoaXMuaW1wbC50YXJnZXQpfX07dmFyIHA9e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpudWxsfTtbImNsaWVudFgiLCJjbGllbnRZIiwic2NyZWVuWCIsInNjcmVlblkiLCJwYWdlWCIsInBhZ2VZIiwiaWRlbnRpZmllciIsIndlYmtpdFJhZGl1c1giLCJ3ZWJraXRSYWRpdXNZIiwid2Via2l0Um90YXRpb25BbmdsZSIsIndlYmtpdEZvcmNlIl0uZm9yRWFjaChmdW5jdGlvbihhKXtwLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLnByb3RvdHlwZSxhLHApfSksZC5wcm90b3R5cGU9e2l0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19fSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGcucHJvdG90eXBlKSxoKGYucHJvdG90eXBlLHtnZXQgdG91Y2hlcygpe3JldHVybiBlKGoodGhpcykudG91Y2hlcyl9LGdldCB0YXJnZXRUb3VjaGVzKCl7cmV0dXJuIGUoaih0aGlzKS50YXJnZXRUb3VjaGVzKX0sZ2V0IGNoYW5nZWRUb3VjaGVzKCl7cmV0dXJuIGUoaih0aGlzKS5jaGFuZ2VkVG91Y2hlcyl9LGluaXRUb3VjaEV2ZW50OmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJOb3QgaW1wbGVtZW50ZWQiKX19KSxpKGwsZixtKSxhLndyYXBwZXJzLlRvdWNoPWMsYS53cmFwcGVycy5Ub3VjaEV2ZW50PWYsYS53cmFwcGVycy5Ub3VjaExpc3Q9ZH19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLGcpfWZ1bmN0aW9uIGMoKXt0aGlzLmxlbmd0aD0wLGIodGhpcywibGVuZ3RoIil9ZnVuY3Rpb24gZChhKXtpZihudWxsPT1hKXJldHVybiBhO2Zvcih2YXIgYj1uZXcgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWJbZF09ZihhW2RdKTtyZXR1cm4gYi5sZW5ndGg9ZSxifWZ1bmN0aW9uIGUoYSxiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBkKHRoaXMuaW1wbFtiXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fXZhciBmPWEud3JhcCxnPXtlbnVtZXJhYmxlOiExfTtjLnByb3RvdHlwZT17aXRlbTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thXX19LGIoYy5wcm90b3R5cGUsIml0ZW0iKSxhLndyYXBwZXJzLk5vZGVMaXN0PWMsYS5hZGRXcmFwTm9kZUxpc3RNZXRob2Q9ZSxhLndyYXBOb2RlTGlzdD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjthLndyYXBIVE1MQ29sbGVjdGlvbj1hLndyYXBOb2RlTGlzdCxhLndyYXBwZXJzLkhUTUxDb2xsZWN0aW9uPWEud3JhcHBlcnMuTm9kZUxpc3R9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7QShhIGluc3RhbmNlb2Ygdyl9ZnVuY3Rpb24gYyhhKXt2YXIgYj1uZXcgeTtyZXR1cm4gYlswXT1hLGIubGVuZ3RoPTEsYn1mdW5jdGlvbiBkKGEsYixjKXtDKGIsImNoaWxkTGlzdCIse3JlbW92ZWROb2RlczpjLHByZXZpb3VzU2libGluZzphLnByZXZpb3VzU2libGluZyxuZXh0U2libGluZzphLm5leHRTaWJsaW5nfSl9ZnVuY3Rpb24gZShhLGIpe0MoYSwiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmJ9KX1mdW5jdGlvbiBmKGEsYixkLGUpe2lmKGEgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXt2YXIgZj1oKGEpO089ITA7Zm9yKHZhciBnPWYubGVuZ3RoLTE7Zz49MDtnLS0pYS5yZW1vdmVDaGlsZChmW2ddKSxmW2ddLnBhcmVudE5vZGVfPWI7Tz0hMTtmb3IodmFyIGc9MDtnPGYubGVuZ3RoO2crKylmW2ddLnByZXZpb3VzU2libGluZ189ZltnLTFdfHxkLGZbZ10ubmV4dFNpYmxpbmdfPWZbZysxXXx8ZTtyZXR1cm4gZCYmKGQubmV4dFNpYmxpbmdfPWZbMF0pLGUmJihlLnByZXZpb3VzU2libGluZ189ZltmLmxlbmd0aC0xXSksZn12YXIgZj1jKGEpLGk9YS5wYXJlbnROb2RlO3JldHVybiBpJiZpLnJlbW92ZUNoaWxkKGEpLGEucGFyZW50Tm9kZV89YixhLnByZXZpb3VzU2libGluZ189ZCxhLm5leHRTaWJsaW5nXz1lLGQmJihkLm5leHRTaWJsaW5nXz1hKSxlJiYoZS5wcmV2aW91c1NpYmxpbmdfPWEpLGZ9ZnVuY3Rpb24gZyhhKXtpZihhIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudClyZXR1cm4gaChhKTt2YXIgYj1jKGEpLGU9YS5wYXJlbnROb2RlO3JldHVybiBlJiZkKGEsZSxiKSxifWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPW5ldyB5LGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYi5sZW5ndGg9YyxlKGEsYiksYn1mdW5jdGlvbiBpKGEpe3JldHVybiBhfWZ1bmN0aW9uIGooYSxiKXtJKGEsYiksYS5ub2RlSXNJbnNlcnRlZF8oKX1mdW5jdGlvbiBrKGEsYil7Zm9yKHZhciBjPUQoYiksZD0wO2Q8YS5sZW5ndGg7ZCsrKWooYVtkXSxjKX1mdW5jdGlvbiBsKGEpe0koYSxuZXcgeihhLG51bGwpKX1mdW5jdGlvbiBtKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWwoYVtiXSl9ZnVuY3Rpb24gbihhLGIpe3ZhciBjPWEubm9kZVR5cGU9PT13LkRPQ1VNRU5UX05PREU/YTphLm93bmVyRG9jdW1lbnQ7YyE9PWIub3duZXJEb2N1bWVudCYmYy5hZG9wdE5vZGUoYil9ZnVuY3Rpb24gbyhiLGMpe2lmKGMubGVuZ3RoKXt2YXIgZD1iLm93bmVyRG9jdW1lbnQ7aWYoZCE9PWNbMF0ub3duZXJEb2N1bWVudClmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKylhLmFkb3B0Tm9kZU5vUmVtb3ZlKGNbZV0sZCl9fWZ1bmN0aW9uIHAoYSxiKXtvKGEsYik7dmFyIGM9Yi5sZW5ndGg7aWYoMT09PWMpcmV0dXJuIEooYlswXSk7Zm9yKHZhciBkPUooYS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZT0wO2M+ZTtlKyspZC5hcHBlbmRDaGlsZChKKGJbZV0pKTtyZXR1cm4gZH1mdW5jdGlvbiBxKGEpe2lmKHZvaWQgMCE9PWEuZmlyc3RDaGlsZF8pZm9yKHZhciBiPWEuZmlyc3RDaGlsZF87Yjspe3ZhciBjPWI7Yj1iLm5leHRTaWJsaW5nXyxjLnBhcmVudE5vZGVfPWMucHJldmlvdXNTaWJsaW5nXz1jLm5leHRTaWJsaW5nXz12b2lkIDB9YS5maXJzdENoaWxkXz1hLmxhc3RDaGlsZF89dm9pZCAwfWZ1bmN0aW9uIHIoYSl7aWYoYS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7Zm9yKHZhciBiPWEuZmlyc3RDaGlsZDtiOyl7QShiLnBhcmVudE5vZGU9PT1hKTt2YXIgYz1iLm5leHRTaWJsaW5nLGQ9SihiKSxlPWQucGFyZW50Tm9kZTtlJiZWLmNhbGwoZSxkKSxiLnByZXZpb3VzU2libGluZ189Yi5uZXh0U2libGluZ189Yi5wYXJlbnROb2RlXz1udWxsLGI9Y31hLmZpcnN0Q2hpbGRfPWEubGFzdENoaWxkXz1udWxsfWVsc2UgZm9yKHZhciBjLGY9SihhKSxnPWYuZmlyc3RDaGlsZDtnOyljPWcubmV4dFNpYmxpbmcsVi5jYWxsKGYsZyksZz1jfWZ1bmN0aW9uIHMoYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiZiLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfWZ1bmN0aW9uIHQoYSl7Zm9yKHZhciBiLGM9MDtjPGEubGVuZ3RoO2MrKyliPWFbY10sYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpfWZ1bmN0aW9uIHUoYSxiLGMpe3ZhciBkO2lmKGQ9TChjP1AuY2FsbChjLGEuaW1wbCwhMSk6US5jYWxsKGEuaW1wbCwhMSkpLGIpe2Zvcih2YXIgZT1hLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpZC5hcHBlbmRDaGlsZCh1KGUsITAsYykpO2lmKGEgaW5zdGFuY2VvZiBOLkhUTUxUZW1wbGF0ZUVsZW1lbnQpZm9yKHZhciBmPWQuY29udGVudCxlPWEuY29udGVudC5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWYuYXBwZW5kQ2hpbGQodShlLCEwLGMpKX1yZXR1cm4gZH1mdW5jdGlvbiB2KGEsYil7aWYoIWJ8fEQoYSkhPT1EKGIpKXJldHVybiExO2Zvcih2YXIgYz1iO2M7Yz1jLnBhcmVudE5vZGUpaWYoYz09PWEpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gdyhhKXtBKGEgaW5zdGFuY2VvZiBSKSx4LmNhbGwodGhpcyxhKSx0aGlzLnBhcmVudE5vZGVfPXZvaWQgMCx0aGlzLmZpcnN0Q2hpbGRfPXZvaWQgMCx0aGlzLmxhc3RDaGlsZF89dm9pZCAwLHRoaXMubmV4dFNpYmxpbmdfPXZvaWQgMCx0aGlzLnByZXZpb3VzU2libGluZ189dm9pZCAwLHRoaXMudHJlZVNjb3BlXz12b2lkIDB9dmFyIHg9YS53cmFwcGVycy5FdmVudFRhcmdldCx5PWEud3JhcHBlcnMuTm9kZUxpc3Qsej1hLlRyZWVTY29wZSxBPWEuYXNzZXJ0LEI9YS5kZWZpbmVXcmFwR2V0dGVyLEM9YS5lbnF1ZXVlTXV0YXRpb24sRD1hLmdldFRyZWVTY29wZSxFPWEuaXNXcmFwcGVyLEY9YS5taXhpbixHPWEucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnMsSD1hLnJlZ2lzdGVyV3JhcHBlcixJPWEuc2V0VHJlZVNjb3BlLEo9YS51bndyYXAsSz1hLnVud3JhcElmTmVlZGVkLEw9YS53cmFwLE09YS53cmFwSWZOZWVkZWQsTj1hLndyYXBwZXJzLE89ITEsUD1kb2N1bWVudC5pbXBvcnROb2RlLFE9d2luZG93Lk5vZGUucHJvdG90eXBlLmNsb25lTm9kZSxSPXdpbmRvdy5Ob2RlLFM9d2luZG93LkRvY3VtZW50RnJhZ21lbnQsVD0oUi5wcm90b3R5cGUuYXBwZW5kQ2hpbGQsUi5wcm90b3R5cGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24pLFU9Ui5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLFY9Ui5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsVz1SLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQsWD0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxZPVg/ZnVuY3Rpb24oYSxiKXt0cnl7Vi5jYWxsKGEsYil9Y2F0Y2goYyl7aWYoIShhIGluc3RhbmNlb2YgUykpdGhyb3cgY319OmZ1bmN0aW9uKGEsYil7Vi5jYWxsKGEsYil9O3cucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLEYody5wcm90b3R5cGUse2FwcGVuZENoaWxkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluc2VydEJlZm9yZShhLG51bGwpfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSxjKXtiKGEpO3ZhciBkO2M/RShjKT9kPUooYyk6KGQ9YyxjPUwoZCkpOihjPW51bGwsZD1udWxsKSxjJiZBKGMucGFyZW50Tm9kZT09PXRoaXMpO3ZhciBlLGg9Yz9jLnByZXZpb3VzU2libGluZzp0aGlzLmxhc3RDaGlsZCxpPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhcyhhKTtpZihlPWk/ZyhhKTpmKGEsdGhpcyxoLGMpLGkpbih0aGlzLGEpLHEodGhpcyksVS5jYWxsKHRoaXMuaW1wbCxKKGEpLGQpO2Vsc2V7aHx8KHRoaXMuZmlyc3RDaGlsZF89ZVswXSksY3x8KHRoaXMubGFzdENoaWxkXz1lW2UubGVuZ3RoLTFdLHZvaWQgMD09PXRoaXMuZmlyc3RDaGlsZF8mJih0aGlzLmZpcnN0Q2hpbGRfPXRoaXMuZmlyc3RDaGlsZCkpO3ZhciBqPWQ/ZC5wYXJlbnROb2RlOnRoaXMuaW1wbDtqP1UuY2FsbChqLHAodGhpcyxlKSxkKTpvKHRoaXMsZSl9cmV0dXJuIEModGhpcywiY2hpbGRMaXN0Iix7YWRkZWROb2RlczplLG5leHRTaWJsaW5nOmMscHJldmlvdXNTaWJsaW5nOmh9KSxrKGUsdGhpcyksYX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSl7aWYoYihhKSxhLnBhcmVudE5vZGUhPT10aGlzKXtmb3IodmFyIGQ9ITEsZT0odGhpcy5jaGlsZE5vZGVzLHRoaXMuZmlyc3RDaGlsZCk7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZT09PWEpe2Q9ITA7YnJlYWt9aWYoIWQpdGhyb3cgbmV3IEVycm9yKCJOb3RGb3VuZEVycm9yIil9dmFyIGY9SihhKSxnPWEubmV4dFNpYmxpbmcsaD1hLnByZXZpb3VzU2libGluZztpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXt2YXIgaT10aGlzLmZpcnN0Q2hpbGQsaj10aGlzLmxhc3RDaGlsZCxrPWYucGFyZW50Tm9kZTtrJiZZKGssZiksaT09PWEmJih0aGlzLmZpcnN0Q2hpbGRfPWcpLGo9PT1hJiYodGhpcy5sYXN0Q2hpbGRfPWgpLGgmJihoLm5leHRTaWJsaW5nXz1nKSxnJiYoZy5wcmV2aW91c1NpYmxpbmdfPWgpLGEucHJldmlvdXNTaWJsaW5nXz1hLm5leHRTaWJsaW5nXz1hLnBhcmVudE5vZGVfPXZvaWQgMH1lbHNlIHEodGhpcyksWSh0aGlzLmltcGwsZik7cmV0dXJuIE98fEModGhpcywiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmMoYSksbmV4dFNpYmxpbmc6ZyxwcmV2aW91c1NpYmxpbmc6aH0pLEcodGhpcyxhKSxhfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxkKXtiKGEpO3ZhciBlO2lmKEUoZCk/ZT1KKGQpOihlPWQsZD1MKGUpKSxkLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3ZhciBoLGk9ZC5uZXh0U2libGluZyxqPWQucHJldmlvdXNTaWJsaW5nLG09IXRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkmJiFzKGEpO3JldHVybiBtP2g9ZyhhKTooaT09PWEmJihpPWEubmV4dFNpYmxpbmcpLGg9ZihhLHRoaXMsaixpKSksbT8obih0aGlzLGEpLHEodGhpcyksVy5jYWxsKHRoaXMuaW1wbCxKKGEpLGUpKToodGhpcy5maXJzdENoaWxkPT09ZCYmKHRoaXMuZmlyc3RDaGlsZF89aFswXSksdGhpcy5sYXN0Q2hpbGQ9PT1kJiYodGhpcy5sYXN0Q2hpbGRfPWhbaC5sZW5ndGgtMV0pLGQucHJldmlvdXNTaWJsaW5nXz1kLm5leHRTaWJsaW5nXz1kLnBhcmVudE5vZGVfPXZvaWQgMCxlLnBhcmVudE5vZGUmJlcuY2FsbChlLnBhcmVudE5vZGUscCh0aGlzLGgpLGUpKSxDKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6aCxyZW1vdmVkTm9kZXM6YyhkKSxuZXh0U2libGluZzppLHByZXZpb3VzU2libGluZzpqfSksbChkKSxrKGgsdGhpcyksZH0sbm9kZUlzSW5zZXJ0ZWRfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylhLm5vZGVJc0luc2VydGVkXygpfSxoYXNDaGlsZE5vZGVzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmZpcnN0Q2hpbGR9LGdldCBwYXJlbnROb2RlKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMucGFyZW50Tm9kZV8/dGhpcy5wYXJlbnROb2RlXzpMKHRoaXMuaW1wbC5wYXJlbnROb2RlKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5maXJzdENoaWxkXz90aGlzLmZpcnN0Q2hpbGRfOkwodGhpcy5pbXBsLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubGFzdENoaWxkXz90aGlzLmxhc3RDaGlsZF86TCh0aGlzLmltcGwubGFzdENoaWxkKX0sZ2V0IG5leHRTaWJsaW5nKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubmV4dFNpYmxpbmdfP3RoaXMubmV4dFNpYmxpbmdfOkwodGhpcy5pbXBsLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzU2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLnByZXZpb3VzU2libGluZ18/dGhpcy5wcmV2aW91c1NpYmxpbmdfOkwodGhpcy5pbXBsLnByZXZpb3VzU2libGluZyl9LGdldCBwYXJlbnRFbGVtZW50KCl7Zm9yKHZhciBhPXRoaXMucGFyZW50Tm9kZTthJiZhLm5vZGVUeXBlIT09dy5FTEVNRU5UX05PREU7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxnZXQgdGV4dENvbnRlbnQoKXtmb3IodmFyIGE9IiIsYj10aGlzLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpYi5ub2RlVHlwZSE9dy5DT01NRU5UX05PREUmJihhKz1iLnRleHRDb250ZW50KTtyZXR1cm4gYX0sc2V0IHRleHRDb250ZW50KGEpe3ZhciBiPWkodGhpcy5jaGlsZE5vZGVzKTtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtpZihyKHRoaXMpLCIiIT09YSl7dmFyIGM9dGhpcy5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSk7dGhpcy5hcHBlbmRDaGlsZChjKX19ZWxzZSBxKHRoaXMpLHRoaXMuaW1wbC50ZXh0Q29udGVudD1hO3ZhciBkPWkodGhpcy5jaGlsZE5vZGVzKTtDKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6ZCxyZW1vdmVkTm9kZXM6Yn0pLG0oYiksayhkLHRoaXMpfSxnZXQgY2hpbGROb2Rlcygpe2Zvcih2YXIgYT1uZXcgeSxiPTAsYz10aGlzLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpYVtiKytdPWM7cmV0dXJuIGEubGVuZ3RoPWIsYX0sY2xvbmVOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB1KHRoaXMsYSl9LGNvbnRhaW5zOmZ1bmN0aW9uKGEpe3JldHVybiB2KHRoaXMsTShhKSl9LGNvbXBhcmVEb2N1bWVudFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBULmNhbGwodGhpcy5pbXBsLEsoYSkpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPWkodGhpcy5jaGlsZE5vZGVzKSxkPVtdLGU9IiIsZj0wO2Y8Yy5sZW5ndGg7ZisrKWI9Y1tmXSxiLm5vZGVUeXBlPT09dy5URVhUX05PREU/YXx8Yi5kYXRhLmxlbmd0aD9hPyhlKz1iLmRhdGEsZC5wdXNoKGIpKTphPWI6dGhpcy5yZW1vdmVOb2RlKGIpOihhJiZkLmxlbmd0aCYmKGEuZGF0YSs9ZSx0KGQpKSxkPVtdLGU9IiIsYT1udWxsLGIuY2hpbGROb2Rlcy5sZW5ndGgmJmIubm9ybWFsaXplKCkpO2EmJmQubGVuZ3RoJiYoYS5kYXRhKz1lLHQoZCkpfX0pLEIodywib3duZXJEb2N1bWVudCIpLEgoUix3LGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3IsZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwsdy5wcm90b3R5cGU9RihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx3LnByb3RvdHlwZSksYS5jbG9uZU5vZGU9dSxhLm5vZGVXYXNBZGRlZD1qLGEubm9kZVdhc1JlbW92ZWQ9bCxhLm5vZGVzV2VyZUFkZGVkPWssYS5ub2Rlc1dlcmVSZW1vdmVkPW0sYS5zbmFwc2hvdE5vZGVMaXN0PWksYS53cmFwcGVycy5Ob2RlPXd9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYixjLGQpe2Zvcih2YXIgZT1udWxsLGY9bnVsbCxnPTAsaD1iLmxlbmd0aDtoPmc7ZysrKWU9cShiW2ddKSwoZj1wKGUpLnJvb3QpJiZmIGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290fHwoZFtjKytdPWUpO3JldHVybiBjfWZ1bmN0aW9uIGMoYSxiKXtmb3IodmFyIGQsZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KXtpZihlLm1hdGNoZXMoYikpcmV0dXJuIGU7aWYoZD1jKGUsYikpcmV0dXJuIGQ7ZT1lLm5leHRFbGVtZW50U2libGluZ31yZXR1cm4gbnVsbH1mdW5jdGlvbiBkKGEsYil7cmV0dXJuIGEubWF0Y2hlcyhiKX1mdW5jdGlvbiBlKGEsYixjKXt2YXIgZD1hLmxvY2FsTmFtZTtyZXR1cm4gZD09PWJ8fGQ9PT1jJiZhLm5hbWVzcGFjZVVSST09PUJ9ZnVuY3Rpb24gZigpe3JldHVybiEwfWZ1bmN0aW9uIGcoYSxiLGMpe3JldHVybiBhLmxvY2FsTmFtZT09PWN9ZnVuY3Rpb24gaChhLGIpe3JldHVybiBhLm5hbWVzcGFjZVVSST09PWJ9ZnVuY3Rpb24gaShhLGIsYyl7cmV0dXJuIGEubmFtZXNwYWNlVVJJPT09YiYmYS5sb2NhbE5hbWU9PT1jfWZ1bmN0aW9uIGooYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1hLmZpcnN0RWxlbWVudENoaWxkO2c7KWQoZyxlLGYpJiYoY1tiKytdPWcpLGI9aihnLGIsYyxkLGUsZiksZz1nLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gYn1mdW5jdGlvbiBrKGMsZCxlLGYpe3ZhciBnLGg9dGhpcy5pbXBsLGk9cCh0aGlzKS5yb290O2lmKGkgaW5zdGFuY2VvZiBhLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIGoodGhpcyxkLGUsYyxmLG51bGwpO2lmKGggaW5zdGFuY2VvZiB6KWc9dS5jYWxsKGgsZik7ZWxzZXtpZighKGggaW5zdGFuY2VvZiBBKSlyZXR1cm4gaih0aGlzLGQsZSxjLGYsbnVsbCk7Zz10LmNhbGwoaCxmKX1yZXR1cm4gYihnLGQsZSl9ZnVuY3Rpb24gbChjLGQsZSxmLGcpe3ZhciBoLGk9dGhpcy5pbXBsLGs9cCh0aGlzKS5yb290O2lmKGsgaW5zdGFuY2VvZiBhLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIGoodGhpcyxkLGUsYyxmLGcpO2lmKGkgaW5zdGFuY2VvZiB6KWg9dy5jYWxsKGksZixnKTtlbHNle2lmKCEoaSBpbnN0YW5jZW9mIEEpKXJldHVybiBqKHRoaXMsZCxlLGMsZixnKTtoPXYuY2FsbChpLGYsZyl9cmV0dXJuIGIoaCxkLGUpfWZ1bmN0aW9uIG0oYyxkLGUsZixnKXt2YXIgaCxpPXRoaXMuaW1wbCxrPXAodGhpcykucm9vdDtpZihrIGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290KXJldHVybiBqKHRoaXMsZCxlLGMsZixnKTtpZihpIGluc3RhbmNlb2YgeiloPXkuY2FsbChpLGYsZyk7ZWxzZXtpZighKGkgaW5zdGFuY2VvZiBBKSlyZXR1cm4gaih0aGlzLGQsZSxjLGYsZyk7aD14LmNhbGwoaSxmLGcpfXJldHVybiBiKGgsZCxlKX12YXIgbj1hLndyYXBwZXJzLkhUTUxDb2xsZWN0aW9uLG89YS53cmFwcGVycy5Ob2RlTGlzdCxwPWEuZ2V0VHJlZVNjb3BlLHE9YS53cmFwLHI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcixzPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yLHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCx1PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsLHY9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUsdz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUseD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZU5TLHk9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lTlMsej13aW5kb3cuRWxlbWVudCxBPXdpbmRvdy5IVE1MRG9jdW1lbnQsQj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsQz17cXVlcnlTZWxlY3RvcjpmdW5jdGlvbihiKXt2YXIgZCxlPXRoaXMuaW1wbCxmPXAodGhpcykucm9vdDtpZihmIGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290KXJldHVybiBjKHRoaXMsYik7aWYoZSBpbnN0YW5jZW9mIHopZD1xKHMuY2FsbChlLGIpKTtlbHNle2lmKCEoZSBpbnN0YW5jZW9mIEEpKXJldHVybiBjKHRoaXMsYik7ZD1xKHIuY2FsbChlLGIpKX1yZXR1cm4gZCYmKGY9cChkKS5yb290KSYmZiBpbnN0YW5jZW9mIGEud3JhcHBlcnMuU2hhZG93Um9vdD9jKHRoaXMsYik6ZH0scXVlcnlTZWxlY3RvckFsbDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgbztyZXR1cm4gYi5sZW5ndGg9ay5jYWxsKHRoaXMsZCwwLGIsYSksYn19LEQ9e2dldEVsZW1lbnRzQnlUYWdOYW1lOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBuLGM9IioiPT09YT9mOmU7cmV0dXJuIGIubGVuZ3RoPWwuY2FsbCh0aGlzLGMsMCxiLGEsYS50b0xvd2VyQ2FzZSgpKSxifSxnZXRFbGVtZW50c0J5Q2xhc3NOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoIi4iK2EpfSxnZXRFbGVtZW50c0J5VGFnTmFtZU5TOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IG4sZD1udWxsO3JldHVybiBkPSIqIj09PWE/IioiPT09Yj9mOmc6IioiPT09Yj9oOmksYy5sZW5ndGg9bS5jYWxsKHRoaXMsZCwwLGMsYXx8bnVsbCxiKSxjfX07YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlPUQsYS5TZWxlY3RvcnNJbnRlcmZhY2U9Q30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLm5leHRTaWJsaW5nO3JldHVybiBhfWZ1bmN0aW9uIGMoYSl7Zm9yKDthJiZhLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWE9YS5wcmV2aW91c1NpYmxpbmc7cmV0dXJuIGF9dmFyIGQ9YS53cmFwcGVycy5Ob2RlTGlzdCxlPXtnZXQgZmlyc3RFbGVtZW50Q2hpbGQoKXtyZXR1cm4gYih0aGlzLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBjKHRoaXMubGFzdENoaWxkKX0sZ2V0IGNoaWxkRWxlbWVudENvdW50KCl7Zm9yKHZhciBhPTAsYj10aGlzLmZpcnN0RWxlbWVudENoaWxkO2I7Yj1iLm5leHRFbGVtZW50U2libGluZylhKys7cmV0dXJuIGF9LGdldCBjaGlsZHJlbigpe2Zvcih2YXIgYT1uZXcgZCxiPTAsYz10aGlzLmZpcnN0RWxlbWVudENoaWxkO2M7Yz1jLm5leHRFbGVtZW50U2libGluZylhW2IrK109YztyZXR1cm4gYS5sZW5ndGg9YixhfSxyZW1vdmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5yZW1vdmVDaGlsZCh0aGlzKX19LGY9e2dldCBuZXh0RWxlbWVudFNpYmxpbmcoKXtyZXR1cm4gYih0aGlzLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzRWxlbWVudFNpYmxpbmcoKXtyZXR1cm4gYyh0aGlzLnByZXZpb3VzU2libGluZyl9fTthLkNoaWxkTm9kZUludGVyZmFjZT1mLGEuUGFyZW50Tm9kZUludGVyZmFjZT1lfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfXZhciBjPWEuQ2hpbGROb2RlSW50ZXJmYWNlLGQ9YS53cmFwcGVycy5Ob2RlLGU9YS5lbnF1ZXVlTXV0YXRpb24sZj1hLm1peGluLGc9YS5yZWdpc3RlcldyYXBwZXIsaD13aW5kb3cuQ2hhcmFjdGVyRGF0YTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxmKGIucHJvdG90eXBlLHtnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoYSl7dGhpcy5kYXRhPWF9LGdldCBkYXRhKCl7cmV0dXJuIHRoaXMuaW1wbC5kYXRhfSxzZXQgZGF0YShhKXt2YXIgYj10aGlzLmltcGwuZGF0YTtlKHRoaXMsImNoYXJhY3RlckRhdGEiLHtvbGRWYWx1ZTpifSksdGhpcy5pbXBsLmRhdGE9YX19KSxmKGIucHJvdG90eXBlLGMpLGcoaCxiLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGE+Pj4wfWZ1bmN0aW9uIGMoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGQ9YS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhLGU9KGEuZW5xdWV1ZU11dGF0aW9uLGEubWl4aW4pLGY9YS5yZWdpc3RlcldyYXBwZXIsZz13aW5kb3cuVGV4dDtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGMucHJvdG90eXBlLHtzcGxpdFRleHQ6ZnVuY3Rpb24oYSl7YT1iKGEpO3ZhciBjPXRoaXMuZGF0YTtpZihhPmMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW5kZXhTaXplRXJyb3IiKTt2YXIgZD1jLnNsaWNlKDAsYSksZT1jLnNsaWNlKGEpO3RoaXMuZGF0YT1kO3ZhciBmPXRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKTtyZXR1cm4gdGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYsdGhpcy5uZXh0U2libGluZyksZn19KSxmKGcsYyxkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGEud3JhcHBlcnMuVGV4dD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIpe2EuaW52YWxpZGF0ZVJlbmRlcmVyQmFzZWRPbkF0dHJpYnV0ZShiLCJjbGFzcyIpfWZ1bmN0aW9uIGMoYSxiKXt0aGlzLmltcGw9YSx0aGlzLm93bmVyRWxlbWVudF89Yn1jLnByb3RvdHlwZT17Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLmltcGwubGVuZ3RofSxpdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmltcGwuaXRlbShhKX0sY29udGFpbnM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1wbC5jb250YWlucyhhKX0sYWRkOmZ1bmN0aW9uKCl7dGhpcy5pbXBsLmFkZC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSxiKHRoaXMub3duZXJFbGVtZW50Xyl9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuaW1wbC5yZW1vdmUuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyksYih0aGlzLm93bmVyRWxlbWVudF8pfSx0b2dnbGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltcGwudG9nZ2xlLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpO3JldHVybiBiKHRoaXMub3duZXJFbGVtZW50XyksYX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxhLndyYXBwZXJzLkRPTVRva2VuTGlzdD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIsYyl7dmFyIGQ9Yi5wYXJlbnROb2RlO2lmKGQmJmQuc2hhZG93Um9vdCl7dmFyIGU9YS5nZXRSZW5kZXJlckZvckhvc3QoZCk7ZS5kZXBlbmRzT25BdHRyaWJ1dGUoYykmJmUuaW52YWxpZGF0ZSgpfX1mdW5jdGlvbiBjKGEsYixjKXtrKGEsImF0dHJpYnV0ZXMiLHtuYW1lOmIsbmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6Y30pfWZ1bmN0aW9uIGQoYSl7Zy5jYWxsKHRoaXMsYSl9dmFyIGU9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsZz1hLndyYXBwZXJzLk5vZGUsaD1hLndyYXBwZXJzLkRPTVRva2VuTGlzdCxpPWEuUGFyZW50Tm9kZUludGVyZmFjZSxqPWEuU2VsZWN0b3JzSW50ZXJmYWNlLGs9KGEuYWRkV3JhcE5vZGVMaXN0TWV0aG9kLGEuZW5xdWV1ZU11dGF0aW9uKSxsPWEubWl4aW4sbT0oYS5vbmVPZixhLnJlZ2lzdGVyV3JhcHBlciksbj1hLnVud3JhcCxvPWEud3JhcHBlcnMscD13aW5kb3cuRWxlbWVudCxxPVsibWF0Y2hlcyIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIl0uZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBwLnByb3RvdHlwZVthXX0pLHI9cVswXSxzPXAucHJvdG90eXBlW3JdLHQ9bmV3IFdlYWtNYXA7ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSksbChkLnByb3RvdHlwZSx7Y3JlYXRlU2hhZG93Um9vdDpmdW5jdGlvbigpe3ZhciBiPW5ldyBvLlNoYWRvd1Jvb3QodGhpcyk7dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSb290Xz1iO3ZhciBjPWEuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMpO3JldHVybiBjLmludmFsaWRhdGUoKSxifSxnZXQgc2hhZG93Um9vdCgpe3JldHVybiB0aGlzLmltcGwucG9seW1lclNoYWRvd1Jvb3RffHxudWxsfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxkKXt2YXIgZT10aGlzLmltcGwuZ2V0QXR0cmlidXRlKGEpO3RoaXMuaW1wbC5zZXRBdHRyaWJ1dGUoYSxkKSxjKHRoaXMsYSxlKSxiKHRoaXMsYSl9LHJlbW92ZUF0dHJpYnV0ZTpmdW5jdGlvbihhKXt2YXIgZD10aGlzLmltcGwuZ2V0QXR0cmlidXRlKGEpO3RoaXMuaW1wbC5yZW1vdmVBdHRyaWJ1dGUoYSksYyh0aGlzLGEsZCksYih0aGlzLGEpfSxtYXRjaGVzOmZ1bmN0aW9uKGEpe3JldHVybiBzLmNhbGwodGhpcy5pbXBsLGEpfSxnZXQgY2xhc3NMaXN0KCl7dmFyIGE9dC5nZXQodGhpcyk7cmV0dXJuIGF8fHQuc2V0KHRoaXMsYT1uZXcgaChuKHRoaXMpLmNsYXNzTGlzdCx0aGlzKSksYX0sZ2V0IGNsYXNzTmFtZSgpe3JldHVybiBuKHRoaXMpLmNsYXNzTmFtZX0sc2V0IGNsYXNzTmFtZShhKXt0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGEpfSxnZXQgaWQoKXtyZXR1cm4gbih0aGlzKS5pZH0sc2V0IGlkKGEpe3RoaXMuc2V0QXR0cmlidXRlKCJpZCIsYSl9fSkscS5mb3JFYWNoKGZ1bmN0aW9uKGEpeyJtYXRjaGVzIiE9PWEmJihkLnByb3RvdHlwZVthXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXRjaGVzKGEpfSl9KSxwLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290JiYoZC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1kLnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290KSxsKGQucHJvdG90eXBlLGUpLGwoZC5wcm90b3R5cGUsZiksbChkLnByb3RvdHlwZSxpKSxsKGQucHJvdG90eXBlLGopLG0ocCxkLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhudWxsLCJ4IikpLGEuaW52YWxpZGF0ZVJlbmRlcmVyQmFzZWRPbkF0dHJpYnV0ZT1iLGEubWF0Y2hlc05hbWVzPXEsYS53cmFwcGVycy5FbGVtZW50PWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7c3dpdGNoKGEpe2Nhc2UiJiI6cmV0dXJuIiZhbXA7IjtjYXNlIjwiOnJldHVybiImbHQ7IjtjYXNlIj4iOnJldHVybiImZ3Q7IjtjYXNlJyInOnJldHVybiImcXVvdDsiO2Nhc2UiXHhhMCI6cmV0dXJuIiZuYnNwOyJ9fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucmVwbGFjZSh6LGIpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEucmVwbGFjZShBLGIpfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPXt9LGM9MDtjPGEubGVuZ3RoO2MrKyliW2FbY11dPSEwO3JldHVybiBifWZ1bmN0aW9uIGYoYSxiKXtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmb3IodmFyIGUsZj1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxoPSI8IitmLGk9YS5hdHRyaWJ1dGVzLGo9MDtlPWlbal07aisrKWgrPSIgIitlLm5hbWUrJz0iJytjKGUudmFsdWUpKyciJztyZXR1cm4gaCs9Ij4iLEJbZl0/aDpoK2coYSkrIjwvIitmKyI+IjtjYXNlIE5vZGUuVEVYVF9OT0RFOnZhciBrPWEuZGF0YTtyZXR1cm4gYiYmQ1tiLmxvY2FsTmFtZV0/azpkKGspO2Nhc2UgTm9kZS5DT01NRU5UX05PREU6cmV0dXJuIjwhLS0iK2EuZGF0YSsiLS0+IjtkZWZhdWx0OnRocm93IGNvbnNvbGUuZXJyb3IoYSksbmV3IEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKX19ZnVuY3Rpb24gZyhhKXthIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50JiYoYT1hLmNvbnRlbnQpO2Zvcih2YXIgYj0iIixjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyliKz1mKGMsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGQ9Y3x8ImRpdiI7YS50ZXh0Q29udGVudD0iIjt2YXIgZT13KGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KGQpKTtlLmlubmVySFRNTD1iO2Zvcih2YXIgZjtmPWUuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZCh4KGYpKX1mdW5jdGlvbiBpKGEpe28uY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz13KGEuY2xvbmVOb2RlKCExKSk7Yy5pbm5lckhUTUw9Yjtmb3IodmFyIGQsZT13KGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7ZD1jLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoZCk7cmV0dXJuIHgoZSl9ZnVuY3Rpb24gayhiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdfX1mdW5jdGlvbiBsKGEpe3AoaSxhLGsoYSkpfWZ1bmN0aW9uIG0oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLGIse2dldDprKGIpLHNldDpmdW5jdGlvbihjKXthLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl09Y30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBuKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxiLHt2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIG89YS53cmFwcGVycy5FbGVtZW50LHA9YS5kZWZpbmVHZXR0ZXIscT1hLmVucXVldWVNdXRhdGlvbixyPWEubWl4aW4scz1hLm5vZGVzV2VyZUFkZGVkLHQ9YS5ub2Rlc1dlcmVSZW1vdmVkLHU9YS5yZWdpc3RlcldyYXBwZXIsdj1hLnNuYXBzaG90Tm9kZUxpc3Qsdz1hLnVud3JhcCx4PWEud3JhcCx5PWEud3JhcHBlcnMsej0vWyZcdTAwQTAiXS9nLEE9L1smXHUwMEEwPD5dL2csQj1lKFsiYXJlYSIsImJhc2UiLCJiciIsImNvbCIsImNvbW1hbmQiLCJlbWJlZCIsImhyIiwiaW1nIiwiaW5wdXQiLCJrZXlnZW4iLCJsaW5rIiwibWV0YSIsInBhcmFtIiwic291cmNlIiwidHJhY2siLCJ3YnIiXSksQz1lKFsic3R5bGUiLCJzY3JpcHQiLCJ4bXAiLCJpZnJhbWUiLCJub2VtYmVkIiwibm9mcmFtZXMiLCJwbGFpbnRleHQiLCJub3NjcmlwdCJdKSxEPS9NU0lFLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLEU9d2luZG93LkhUTUxFbGVtZW50LEY9d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSkscihpLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBnKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2lmKEQmJkNbdGhpcy5sb2NhbE5hbWVdKXJldHVybiB2b2lkKHRoaXMudGV4dENvbnRlbnQ9YSk7dmFyIGI9dih0aGlzLmNoaWxkTm9kZXMpO3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk/dGhpcyBpbnN0YW5jZW9mIHkuSFRNTFRlbXBsYXRlRWxlbWVudD9oKHRoaXMuY29udGVudCxhKTpoKHRoaXMsYSx0aGlzLnRhZ05hbWUpOiFGJiZ0aGlzIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50P2godGhpcy5jb250ZW50LGEpOnRoaXMuaW1wbC5pbm5lckhUTUw9YTt2YXIgYz12KHRoaXMuY2hpbGROb2Rlcyk7cSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmMscmVtb3ZlZE5vZGVzOmJ9KSx0KGIpLHMoYyx0aGlzKX0sZ2V0IG91dGVySFRNTCgpe3JldHVybiBmKHRoaXMsdGhpcy5wYXJlbnROb2RlKX0sc2V0IG91dGVySFRNTChhKXt2YXIgYj10aGlzLnBhcmVudE5vZGU7aWYoYil7Yi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKTt2YXIgYz1qKGIsYSk7Yi5yZXBsYWNlQ2hpbGQoYyx0aGlzKX19LGluc2VydEFkamFjZW50SFRNTDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7c3dpdGNoKFN0cmluZyhhKS50b0xvd2VyQ2FzZSgpKXtjYXNlImJlZm9yZWJlZ2luIjpjPXRoaXMucGFyZW50Tm9kZSxkPXRoaXM7YnJlYWs7Y2FzZSJhZnRlcmVuZCI6Yz10aGlzLnBhcmVudE5vZGUsZD10aGlzLm5leHRTaWJsaW5nO2JyZWFrO2Nhc2UiYWZ0ZXJiZWdpbiI6Yz10aGlzLGQ9dGhpcy5maXJzdENoaWxkO2JyZWFrO2Nhc2UiYmVmb3JlZW5kIjpjPXRoaXMsZD1udWxsO2JyZWFrO2RlZmF1bHQ6cmV0dXJufXZhciBlPWooYyxiKTtjLmluc2VydEJlZm9yZShlLGQpfSxnZXQgaGlkZGVuKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKCJoaWRkZW4iKX0sc2V0IGhpZGRlbihhKXthP3RoaXMuc2V0QXR0cmlidXRlKCJoaWRkZW4iLCIiKTp0aGlzLnJlbW92ZUF0dHJpYnV0ZSgiaGlkZGVuIil9fSksWyJjbGllbnRIZWlnaHQiLCJjbGllbnRMZWZ0IiwiY2xpZW50VG9wIiwiY2xpZW50V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0VG9wIiwib2Zmc2V0V2lkdGgiLCJzY3JvbGxIZWlnaHQiLCJzY3JvbGxXaWR0aCJdLmZvckVhY2gobCksWyJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIl0uZm9yRWFjaChtKSxbImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdldENsaWVudFJlY3RzIiwic2Nyb2xsSW50b1ZpZXciXS5mb3JFYWNoKG4pLHUoRSxpLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImIiKSksYS53cmFwcGVycy5IVE1MRWxlbWVudD1pLGEuZ2V0SW5uZXJIVE1MPWcsYS5zZXRJbm5lckhUTUw9aH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS53cmFwLGc9d2luZG93LkhUTUxDYW52YXNFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldENvbnRleHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltcGwuZ2V0Q29udGV4dC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKTtyZXR1cm4gYSYmZihhKX19KSxlKGcsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKSksYS53cmFwcGVycy5IVE1MQ2FudmFzRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj13aW5kb3cuSFRNTENvbnRlbnRFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCBzZWxlY3QoKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpfSxzZXQgc2VsZWN0KGEpe3RoaXMuc2V0QXR0cmlidXRlKCJzZWxlY3QiLGEpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXtjLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGEsYiksInNlbGVjdCI9PT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKSYmdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoITApfX0pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9d2luZG93LkhUTUxGb3JtRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgZWxlbWVudHMoKXtyZXR1cm4gZihnKHRoaXMpLmVsZW1lbnRzKX19KSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIikpLGEud3JhcHBlcnMuSFRNTEZvcm1FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGMpKXRocm93IG5ldyBUeXBlRXJyb3IoIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3ZhciBlPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpO2QuY2FsbCh0aGlzLGUpLGcoZSx0aGlzKSx2b2lkIDAhPT1hJiYoZS53aWR0aD1hKSx2b2lkIDAhPT1iJiYoZS5oZWlnaHQ9Yil9dmFyIGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLnJld3JhcCxoPXdpbmRvdy5IVE1MSW1hZ2VFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpKSxjLnByb3RvdHlwZT1iLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxJbWFnZUVsZW1lbnQ9YixhLndyYXBwZXJzLkltYWdlPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPShhLm1peGluLGEud3JhcHBlcnMuTm9kZUxpc3QsYS5yZWdpc3RlcldyYXBwZXIpLGU9d2luZG93LkhUTUxTaGFkb3dFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUmJmQoZSxiKSxhLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEuZGVmYXVsdFZpZXcpcmV0dXJuIGE7dmFyIGI9ay5nZXQoYSk7aWYoIWIpe2ZvcihiPWEuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtiLmxhc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmxhc3RDaGlsZCk7ay5zZXQoYSxiKX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYyxkPWIoYS5vd25lckRvY3VtZW50KSxlPWgoZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2M9YS5maXJzdENoaWxkOyllLmFwcGVuZENoaWxkKGMpO3JldHVybiBlfWZ1bmN0aW9uIGQoYSl7aWYoZS5jYWxsKHRoaXMsYSksIWwpe3ZhciBiPWMoYSk7ai5zZXQodGhpcyxpKGIpKX19dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEudW53cmFwLGk9YS53cmFwLGo9bmV3IFdlYWtNYXAsaz1uZXcgV2Vha01hcCxsPXdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50O2QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUpLGYoZC5wcm90b3R5cGUse2dldCBjb250ZW50KCl7cmV0dXJuIGw/aSh0aGlzLmltcGwuY29udGVudCk6ai5nZXQodGhpcyl9fSksbCYmZyhsLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLnJlZ2lzdGVyV3JhcHBlcixlPXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoZSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIikpLGEud3JhcHBlcnMuSFRNTE1lZGlhRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGMoYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGI9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpKTtkLmNhbGwodGhpcyxiKSxnKGIsdGhpcyksYi5zZXRBdHRyaWJ1dGUoInByZWxvYWQiLCJhdXRvIiksdm9pZCAwIT09YSYmYi5zZXRBdHRyaWJ1dGUoInNyYyIsYSl9dmFyIGQ9YS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxBdWRpb0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSksYy5wcm90b3R5cGU9Yi5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MQXVkaW9FbGVtZW50PWIsYS53cmFwcGVycy5BdWRpbz1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhLnJlcGxhY2UoL1xzKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uIGMoYSl7ZS5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gZChhLGIsYyxmKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt2YXIgZz1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtlLmNhbGwodGhpcyxnKSxoKGcsdGhpcyksdm9pZCAwIT09YSYmKGcudGV4dD1hKSx2b2lkIDAhPT1iJiZnLnNldEF0dHJpYnV0ZSgidmFsdWUiLGIpLGM9PT0hMCYmZy5zZXRBdHRyaWJ1dGUoInNlbGVjdGVkIiwiIiksZy5zZWxlY3RlZD1mPT09ITB9dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEucmV3cmFwLGk9YS51bndyYXAsaj1hLndyYXAsaz13aW5kb3cuSFRNTE9wdGlvbkVsZW1lbnQ7Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZihjLnByb3RvdHlwZSx7Z2V0IHRleHQoKXtyZXR1cm4gYih0aGlzLnRleHRDb250ZW50KX0sc2V0IHRleHQoYSl7dGhpcy50ZXh0Q29udGVudD1iKFN0cmluZyhhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGooaSh0aGlzKS5mb3JtKX19KSxnKGssYyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSksZC5wcm90b3R5cGU9Yy5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MT3B0aW9uRWxlbWVudD1jLGEud3JhcHBlcnMuT3B0aW9uPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS53cmFwLGg9d2luZG93LkhUTUxTZWxlY3RFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2FkZDpmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgYiYmKGI9ZihiKSksZih0aGlzKS5hZGQoZihhKSxiKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP3ZvaWQgYy5wcm90b3R5cGUucmVtb3ZlLmNhbGwodGhpcyk6KCJvYmplY3QiPT10eXBlb2YgYSYmKGE9ZihhKSksdm9pZCBmKHRoaXMpLnJlbW92ZShhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGcoZih0aGlzKS5mb3JtKX19KSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKSksYS53cmFwcGVycy5IVE1MU2VsZWN0RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEud3JhcCxoPWEud3JhcEhUTUxDb2xsZWN0aW9uLGk9d2luZG93LkhUTUxUYWJsZUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNhcHRpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNhcHRpb24pfSxjcmVhdGVDYXB0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVDYXB0aW9uKCkpfSxnZXQgdEhlYWQoKXtyZXR1cm4gZyhmKHRoaXMpLnRIZWFkKX0sY3JlYXRlVEhlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZVRIZWFkKCkpfSxjcmVhdGVURm9vdDpmdW5jdGlvbigpe3JldHVybiBnKGYodGhpcykuY3JlYXRlVEZvb3QoKSl9LGdldCB0Rm9vdCgpe3JldHVybiBnKGYodGhpcykudEZvb3QpfSxnZXQgdEJvZGllcygpe3JldHVybiBoKGYodGhpcykudEJvZGllcykKfSxjcmVhdGVUQm9keTpmdW5jdGlvbigpe3JldHVybiBnKGYodGhpcykuY3JlYXRlVEJvZHkoKSl9LGdldCByb3dzKCl7cmV0dXJuIGgoZih0aGlzKS5yb3dzKX0saW5zZXJ0Um93OmZ1bmN0aW9uKGEpe3JldHVybiBnKGYodGhpcykuaW5zZXJ0Um93KGEpKX19KSxlKGksYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpKSxhLndyYXBwZXJzLkhUTUxUYWJsZUVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS53cmFwSFRNTENvbGxlY3Rpb24sZz1hLnVud3JhcCxoPWEud3JhcCxpPXdpbmRvdy5IVE1MVGFibGVTZWN0aW9uRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgcm93cygpe3JldHVybiBmKGcodGhpcykucm93cyl9LGluc2VydFJvdzpmdW5jdGlvbihhKXtyZXR1cm4gaChnKHRoaXMpLmluc2VydFJvdyhhKSl9fSksZShpLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGhlYWQiKSksYS53cmFwcGVycy5IVE1MVGFibGVTZWN0aW9uRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9YS53cmFwLGk9d2luZG93LkhUTUxUYWJsZVJvd0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNlbGxzKCl7cmV0dXJuIGYoZyh0aGlzKS5jZWxscyl9LGluc2VydENlbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIGgoZyh0aGlzKS5pbnNlcnRDZWxsKGEpKX19KSxlKGksYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpKSxhLndyYXBwZXJzLkhUTUxUYWJsZVJvd0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYS5sb2NhbE5hbWUpe2Nhc2UiY29udGVudCI6cmV0dXJuIG5ldyBjKGEpO2Nhc2Uic2hhZG93IjpyZXR1cm4gbmV3IGUoYSk7Y2FzZSJ0ZW1wbGF0ZSI6cmV0dXJuIG5ldyBmKGEpfWQuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsZj1hLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQsZz0oYS5taXhpbixhLnJlZ2lzdGVyV3JhcHBlciksaD13aW5kb3cuSFRNTFVua25vd25FbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGcoaCxiKSxhLndyYXBwZXJzLkhUTUxVbmtub3duRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLndyYXBwZXJzLkVsZW1lbnQsYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5yZWdpc3Rlck9iamVjdCxlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZSwidGl0bGUiKSxnPWQoZiksaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZy5wcm90b3R5cGUpLmNvbnN0cnVjdG9yO2lmKCEoImNsYXNzTGlzdCJpbiBmKSl7dmFyIGk9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLnByb3RvdHlwZSwiY2xhc3NMaXN0Iik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMucHJvdG90eXBlLCJjbGFzc0xpc3QiLGkpLGRlbGV0ZSBiLnByb3RvdHlwZS5jbGFzc0xpc3R9YS53cmFwcGVycy5TVkdFbGVtZW50PWh9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7bS5jYWxsKHRoaXMsYSl9dmFyIGM9YS5taXhpbixkPWEucmVnaXN0ZXJXcmFwcGVyLGU9YS51bndyYXAsZj1hLndyYXAsZz13aW5kb3cuU1ZHVXNlRWxlbWVudCxoPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsaT1mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhoLCJnIikpLGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGgsInVzZSIpLGs9aS5jb25zdHJ1Y3RvcixsPU9iamVjdC5nZXRQcm90b3R5cGVPZihrLnByb3RvdHlwZSksbT1sLmNvbnN0cnVjdG9yO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobCksImluc3RhbmNlUm9vdCJpbiBqJiZjKGIucHJvdG90eXBlLHtnZXQgaW5zdGFuY2VSb290KCl7cmV0dXJuIGYoZSh0aGlzKS5pbnN0YW5jZVJvb3QpfSxnZXQgYW5pbWF0ZWRJbnN0YW5jZVJvb3QoKXtyZXR1cm4gZihlKHRoaXMpLmFuaW1hdGVkSW5zdGFuY2VSb290KX19KSxkKGcsYixqKSxhLndyYXBwZXJzLlNWR1VzZUVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS53cmFwLGc9d2luZG93LlNWR0VsZW1lbnRJbnN0YW5jZTtnJiYoYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNvcnJlc3BvbmRpbmdFbGVtZW50KCl7cmV0dXJuIGYodGhpcy5pbXBsLmNvcnJlc3BvbmRpbmdFbGVtZW50KX0sZ2V0IGNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KCl7cmV0dXJuIGYodGhpcy5pbXBsLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KX0sZ2V0IHBhcmVudE5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBjaGlsZE5vZGVzKCl7dGhyb3cgbmV3IEVycm9yKCJOb3QgaW1wbGVtZW50ZWQiKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gZih0aGlzLmltcGwuZmlyc3RDaGlsZCl9LGdldCBsYXN0Q2hpbGQoKXtyZXR1cm4gZih0aGlzLmltcGwubGFzdENoaWxkKX0sZ2V0IHByZXZpb3VzU2libGluZygpe3JldHVybiBmKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgbmV4dFNpYmxpbmcoKXtyZXR1cm4gZih0aGlzLmltcGwubmV4dFNpYmxpbmcpfX0pLGUoZyxiKSxhLndyYXBwZXJzLlNWR0VsZW1lbnRJbnN0YW5jZT1iKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcCxmPWEudW53cmFwSWZOZWVkZWQsZz1hLndyYXAsaD13aW5kb3cuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO2MoYi5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gZyh0aGlzLmltcGwuY2FudmFzKX0sZHJhd0ltYWdlOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzBdPWYoYXJndW1lbnRzWzBdKSx0aGlzLmltcGwuZHJhd0ltYWdlLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSxjcmVhdGVQYXR0ZXJuOmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT1lKGFyZ3VtZW50c1swXSksdGhpcy5pbXBsLmNyZWF0ZVBhdHRlcm4uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9fSksZChoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKSksYS53cmFwcGVycy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcElmTmVlZGVkLGY9YS53cmFwLGc9d2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dDtpZihnKXtjKGIucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNhbnZhcyl9LHRleEltYWdlMkQ6ZnVuY3Rpb24oKXthcmd1bWVudHNbNV09ZShhcmd1bWVudHNbNV0pLHRoaXMuaW1wbC50ZXhJbWFnZTJELmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSx0ZXhTdWJJbWFnZTJEOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzZdPWUoYXJndW1lbnRzWzZdKSx0aGlzLmltcGwudGV4U3ViSW1hZ2UyRC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19KTt2YXIgaD0vV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpP3tkcmF3aW5nQnVmZmVySGVpZ2h0Om51bGwsZHJhd2luZ0J1ZmZlcldpZHRoOm51bGx9Ont9O2QoZyxiLGgpLGEud3JhcHBlcnMuV2ViR0xSZW5kZXJpbmdDb250ZXh0PWJ9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEucmVnaXN0ZXJXcmFwcGVyLGQ9YS51bndyYXAsZT1hLnVud3JhcElmTmVlZGVkLGY9YS53cmFwLGc9d2luZG93LlJhbmdlO2IucHJvdG90eXBlPXtnZXQgc3RhcnRDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuc3RhcnRDb250YWluZXIpfSxnZXQgZW5kQ29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLmVuZENvbnRhaW5lcil9LGdldCBjb21tb25BbmNlc3RvckNvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5jb21tb25BbmNlc3RvckNvbnRhaW5lcil9LHNldFN0YXJ0OmZ1bmN0aW9uKGEsYil7dGhpcy5pbXBsLnNldFN0YXJ0KGUoYSksYil9LHNldEVuZDpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5zZXRFbmQoZShhKSxiKX0sc2V0U3RhcnRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldFN0YXJ0QmVmb3JlKGUoYSkpfSxzZXRTdGFydEFmdGVyOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRTdGFydEFmdGVyKGUoYSkpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldEVuZEJlZm9yZShlKGEpKX0sc2V0RW5kQWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldEVuZEFmdGVyKGUoYSkpfSxzZWxlY3ROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3ROb2RlKGUoYSkpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNlbGVjdE5vZGVDb250ZW50cyhlKGEpKX0sY29tcGFyZUJvdW5kYXJ5UG9pbnRzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5jb21wYXJlQm91bmRhcnlQb2ludHMoYSxkKGIpKX0sZXh0cmFjdENvbnRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmV4dHJhY3RDb250ZW50cygpKX0sY2xvbmVDb250ZW50czpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5jbG9uZUNvbnRlbnRzKCkpfSxpbnNlcnROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5pbnNlcnROb2RlKGUoYSkpfSxzdXJyb3VuZENvbnRlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zdXJyb3VuZENvbnRlbnRzKGUoYSkpfSxjbG9uZVJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNsb25lUmFuZ2UoKSl9LGlzUG9pbnRJblJhbmdlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5pc1BvaW50SW5SYW5nZShlKGEpLGIpfSxjb21wYXJlUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbXBhcmVQb2ludChlKGEpLGIpfSxpbnRlcnNlY3RzTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbXBsLmludGVyc2VjdHNOb2RlKGUoYSkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGwudG9TdHJpbmcoKX19LGcucHJvdG90eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCYmKGIucHJvdG90eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gZih0aGlzLmltcGwuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGEpKX0pLGMod2luZG93LlJhbmdlLGIsZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSksYS53cmFwcGVycy5SYW5nZT1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYz1hLlBhcmVudE5vZGVJbnRlcmZhY2UsZD1hLlNlbGVjdG9yc0ludGVyZmFjZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyT2JqZWN0LGc9Zihkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2UoZy5wcm90b3R5cGUsYyksZShnLnByb3RvdHlwZSxkKSxlKGcucHJvdG90eXBlLGIpO3ZhciBoPWYoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikpO2Eud3JhcHBlcnMuQ29tbWVudD1oLGEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudD1nfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWsoYS5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtjLmNhbGwodGhpcyxiKSxpKGIsdGhpcyk7dmFyIGU9YS5zaGFkb3dSb290O20uc2V0KHRoaXMsZSksdGhpcy50cmVlU2NvcGVfPW5ldyBkKHRoaXMsZyhlfHxhKSksbC5zZXQodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkRvY3VtZW50RnJhZ21lbnQsZD1hLlRyZWVTY29wZSxlPWEuZWxlbWVudEZyb21Qb2ludCxmPWEuZ2V0SW5uZXJIVE1MLGc9YS5nZXRUcmVlU2NvcGUsaD1hLm1peGluLGk9YS5yZXdyYXAsaj1hLnNldElubmVySFRNTCxrPWEudW53cmFwLGw9bmV3IFdlYWtNYXAsbT1uZXcgV2Vha01hcCxuPS9bIFx0XG5cclxmXS87Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksaChiLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBmKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2oodGhpcyxhKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxnZXQgb2xkZXJTaGFkb3dSb290KCl7cmV0dXJuIG0uZ2V0KHRoaXMpfHxudWxsfSxnZXQgaG9zdCgpe3JldHVybiBsLmdldCh0aGlzKXx8bnVsbH0saW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyOmZ1bmN0aW9uKCl7cmV0dXJuIGwuZ2V0KHRoaXMpLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUodGhpcyx0aGlzLm93bmVyRG9jdW1lbnQsYSxiKX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG4udGVzdChhKT9udWxsOnRoaXMucXVlcnlTZWxlY3RvcignW2lkPSInK2ErJyJdJyl9fSksYS53cmFwcGVycy5TaGFkb3dSb290PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7YS5wcmV2aW91c1NpYmxpbmdfPWEucHJldmlvdXNTaWJsaW5nLGEubmV4dFNpYmxpbmdfPWEubmV4dFNpYmxpbmcsYS5wYXJlbnROb2RlXz1hLnBhcmVudE5vZGV9ZnVuY3Rpb24gYyhhLGMsZSl7dmFyIGY9RyhhKSxnPUcoYyksaD1lP0coZSk6bnVsbDtpZihkKGMpLGIoYyksZSlhLmZpcnN0Q2hpbGQ9PT1lJiYoYS5maXJzdENoaWxkXz1lKSxlLnByZXZpb3VzU2libGluZ189ZS5wcmV2aW91c1NpYmxpbmc7ZWxzZXthLmxhc3RDaGlsZF89YS5sYXN0Q2hpbGQsYS5sYXN0Q2hpbGQ9PT1hLmZpcnN0Q2hpbGQmJihhLmZpcnN0Q2hpbGRfPWEuZmlyc3RDaGlsZCk7dmFyIGk9SChmLmxhc3RDaGlsZCk7aSYmKGkubmV4dFNpYmxpbmdfPWkubmV4dFNpYmxpbmcpfWYuaW5zZXJ0QmVmb3JlKGcsaCl9ZnVuY3Rpb24gZChhKXt2YXIgYz1HKGEpLGQ9Yy5wYXJlbnROb2RlO2lmKGQpe3ZhciBlPUgoZCk7YihhKSxhLnByZXZpb3VzU2libGluZyYmKGEucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1hKSxhLm5leHRTaWJsaW5nJiYoYS5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPWEpLGUubGFzdENoaWxkPT09YSYmKGUubGFzdENoaWxkXz1hKSxlLmZpcnN0Q2hpbGQ9PT1hJiYoZS5maXJzdENoaWxkXz1hKSxkLnJlbW92ZUNoaWxkKGMpfX1mdW5jdGlvbiBlKGEpe0kuc2V0KGEsW10pfWZ1bmN0aW9uIGYoYSl7dmFyIGI9SS5nZXQoYSk7cmV0dXJuIGJ8fEkuc2V0KGEsYj1bXSksYn1mdW5jdGlvbiBnKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYltjKytdPWQ7cmV0dXJuIGJ9ZnVuY3Rpb24gaCgpe2Zvcih2YXIgYT0wO2E8TS5sZW5ndGg7YSsrKXt2YXIgYj1NW2FdLGM9Yi5wYXJlbnRSZW5kZXJlcjtjJiZjLmRpcnR5fHxiLnJlbmRlcigpfU09W119ZnVuY3Rpb24gaSgpe3k9bnVsbCxoKCl9ZnVuY3Rpb24gaihhKXt2YXIgYj1LLmdldChhKTtyZXR1cm4gYnx8KGI9bmV3IG4oYSksSy5zZXQoYSxiKSksYn1mdW5jdGlvbiBrKGEpe3ZhciBiPUUoYSkucm9vdDtyZXR1cm4gYiBpbnN0YW5jZW9mIEQ/YjpudWxsfWZ1bmN0aW9uIGwoYSl7cmV0dXJuIGooYS5ob3N0KX1mdW5jdGlvbiBtKGEpe3RoaXMuc2tpcD0hMSx0aGlzLm5vZGU9YSx0aGlzLmNoaWxkTm9kZXM9W119ZnVuY3Rpb24gbihhKXt0aGlzLmhvc3Q9YSx0aGlzLmRpcnR5PSExLHRoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKSx0aGlzLmFzc29jaWF0ZU5vZGUoYSl9ZnVuY3Rpb24gbyhhKXtmb3IodmFyIGI9W10sYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpdihjKT9iLnB1c2guYXBwbHkoYixmKGMpKTpiLnB1c2goYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gcChhKXtpZihhIGluc3RhbmNlb2YgQilyZXR1cm4gYTtpZihhIGluc3RhbmNlb2YgQSlyZXR1cm4gbnVsbDtmb3IodmFyIGI9YS5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKXt2YXIgYz1wKGIpO2lmKGMpcmV0dXJuIGN9cmV0dXJuIG51bGx9ZnVuY3Rpb24gcShhLGIpe2YoYikucHVzaChhKTt2YXIgYz1KLmdldChhKTtjP2MucHVzaChiKTpKLnNldChhLFtiXSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gSi5nZXQoYSl9ZnVuY3Rpb24gcyhhKXtKLnNldChhLHZvaWQgMCl9ZnVuY3Rpb24gdChhLGIpe3ZhciBjPWIuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKTtpZighYylyZXR1cm4hMDtpZihjPWMudHJpbSgpLCFjKXJldHVybiEwO2lmKCEoYSBpbnN0YW5jZW9mIHopKXJldHVybiExO2lmKCFPLnRlc3QoYykpcmV0dXJuITE7dHJ5e3JldHVybiBhLm1hdGNoZXMoYyl9Y2F0Y2goZCl7cmV0dXJuITF9fWZ1bmN0aW9uIHUoYSxiKXt2YXIgYz1yKGIpO3JldHVybiBjJiZjW2MubGVuZ3RoLTFdPT09YX1mdW5jdGlvbiB2KGEpe3JldHVybiBhIGluc3RhbmNlb2YgQXx8YSBpbnN0YW5jZW9mIEJ9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gYS5zaGFkb3dSb290fWZ1bmN0aW9uIHgoYSl7Zm9yKHZhciBiPVtdLGM9YS5zaGFkb3dSb290O2M7Yz1jLm9sZGVyU2hhZG93Um9vdCliLnB1c2goYyk7cmV0dXJuIGJ9dmFyIHksej1hLndyYXBwZXJzLkVsZW1lbnQsQT1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxCPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsQz1hLndyYXBwZXJzLk5vZGUsRD1hLndyYXBwZXJzLlNoYWRvd1Jvb3QsRT0oYS5hc3NlcnQsYS5nZXRUcmVlU2NvcGUpLEY9KGEubWl4aW4sYS5vbmVPZiksRz1hLnVud3JhcCxIPWEud3JhcCxJPW5ldyBXZWFrTWFwLEo9bmV3IFdlYWtNYXAsSz1uZXcgV2Vha01hcCxMPUYod2luZG93LFsicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2V0VGltZW91dCJdKSxNPVtdLE49bmV3IEFycmF5U3BsaWNlO04uZXF1YWxzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEcoYS5ub2RlKT09PWJ9LG0ucHJvdG90eXBlPXthcHBlbmQ6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IG0oYSk7cmV0dXJuIHRoaXMuY2hpbGROb2Rlcy5wdXNoKGIpLGJ9LHN5bmM6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuc2tpcCl7Zm9yKHZhciBiPXRoaXMubm9kZSxlPXRoaXMuY2hpbGROb2RlcyxmPWcoRyhiKSksaD1hfHxuZXcgV2Vha01hcCxpPU4uY2FsY3VsYXRlU3BsaWNlcyhlLGYpLGo9MCxrPTAsbD0wLG09MDttPGkubGVuZ3RoO20rKyl7Zm9yKHZhciBuPWlbbV07bDxuLmluZGV4O2wrKylrKyssZVtqKytdLnN5bmMoaCk7Zm9yKHZhciBvPW4ucmVtb3ZlZC5sZW5ndGgscD0wO28+cDtwKyspe3ZhciBxPUgoZltrKytdKTtoLmdldChxKXx8ZChxKX1mb3IodmFyIHI9bi5hZGRlZENvdW50LHM9ZltrXSYmSChmW2tdKSxwPTA7cj5wO3ArKyl7dmFyIHQ9ZVtqKytdLHU9dC5ub2RlO2MoYix1LHMpLGguc2V0KHUsITApLHQuc3luYyhoKX1sKz1yfWZvcih2YXIgbT1sO208ZS5sZW5ndGg7bSsrKWVbbV0uc3luYyhoKX19fSxuLnByb3RvdHlwZT17cmVuZGVyOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZGlydHkpe3RoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKTt2YXIgYj10aGlzLmhvc3Q7dGhpcy5kaXN0cmlidXRpb24oYik7dmFyIGM9YXx8bmV3IG0oYik7dGhpcy5idWlsZFJlbmRlclRyZWUoYyxiKTt2YXIgZD0hYTtkJiZjLnN5bmMoKSx0aGlzLmRpcnR5PSExfX0sZ2V0IHBhcmVudFJlbmRlcmVyKCl7cmV0dXJuIEUodGhpcy5ob3N0KS5yZW5kZXJlcn0saW52YWxpZGF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmRpcnR5KXt0aGlzLmRpcnR5PSEwO3ZhciBhPXRoaXMucGFyZW50UmVuZGVyZXI7aWYoYSYmYS5pbnZhbGlkYXRlKCksTS5wdXNoKHRoaXMpLHkpcmV0dXJuO3k9d2luZG93W0xdKGksMCl9fSxkaXN0cmlidXRpb246ZnVuY3Rpb24oYSl7dGhpcy5yZXNldEFsbChhKSx0aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oYSl9LHJlc2V0QWxsOmZ1bmN0aW9uKGEpe3YoYSk/ZShhKTpzKGEpO2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpdGhpcy5yZXNldEFsbChiKTthLnNoYWRvd1Jvb3QmJnRoaXMucmVzZXRBbGwoYS5zaGFkb3dSb290KSxhLm9sZGVyU2hhZG93Um9vdCYmdGhpcy5yZXNldEFsbChhLm9sZGVyU2hhZG93Um9vdCl9LGRpc3RyaWJ1dGlvblJlc29sdXRpb246ZnVuY3Rpb24oYSl7aWYodyhhKSl7Zm9yKHZhciBiPWEsYz1vKGIpLGQ9eChiKSxlPTA7ZTxkLmxlbmd0aDtlKyspdGhpcy5wb29sRGlzdHJpYnV0aW9uKGRbZV0sYyk7Zm9yKHZhciBlPWQubGVuZ3RoLTE7ZT49MDtlLS0pe3ZhciBmPWRbZV0sZz1wKGYpO2lmKGcpe3ZhciBoPWYub2xkZXJTaGFkb3dSb290O2gmJihjPW8oaCkpO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXEoY1tpXSxnKX10aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oZil9fWZvcih2YXIgaj1hLmZpcnN0Q2hpbGQ7ajtqPWoubmV4dFNpYmxpbmcpdGhpcy5kaXN0cmlidXRpb25SZXNvbHV0aW9uKGopfSxwb29sRGlzdHJpYnV0aW9uOmZ1bmN0aW9uKGEsYil7aWYoIShhIGluc3RhbmNlb2YgQikpaWYoYSBpbnN0YW5jZW9mIEEpe3ZhciBjPWE7dGhpcy51cGRhdGVEZXBlbmRlbnRBdHRyaWJ1dGVzKGMuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKSk7Zm9yKHZhciBkPSExLGU9MDtlPGIubGVuZ3RoO2UrKyl7dmFyIGE9YltlXTthJiZ0KGEsYykmJihxKGEsYyksYltlXT12b2lkIDAsZD0hMCl9aWYoIWQpZm9yKHZhciBmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZylxKGYsYyl9ZWxzZSBmb3IodmFyIGY9YS5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucG9vbERpc3RyaWJ1dGlvbihmLGIpfSxidWlsZFJlbmRlclRyZWU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5jb21wb3NlKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXSxmPWEuYXBwZW5kKGUpO3RoaXMuYnVpbGRSZW5kZXJUcmVlKGYsZSl9aWYodyhiKSl7dmFyIGc9aihiKTtnLmRpcnR5PSExfX0sY29tcG9zZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1hLnNoYWRvd1Jvb3R8fGEsZD1jLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpaWYodihkKSl7dGhpcy5hc3NvY2lhdGVOb2RlKGMpO2Zvcih2YXIgZT1mKGQpLGc9MDtnPGUubGVuZ3RoO2crKyl7dmFyIGg9ZVtnXTt1KGQsaCkmJmIucHVzaChoKX19ZWxzZSBiLnB1c2goZCk7cmV0dXJuIGJ9LGludmFsaWRhdGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dGhpcy5hdHRyaWJ1dGVzPU9iamVjdC5jcmVhdGUobnVsbCl9LHVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzOy9cLlx3Ky8udGVzdChhKSYmKGJbImNsYXNzIl09ITApLC8jXHcrLy50ZXN0KGEpJiYoYi5pZD0hMCksYS5yZXBsYWNlKC9cW1xzKihbXlxzPVx8flxdXSspL2csZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSl9fSxkZXBlbmRzT25BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXX0sYXNzb2NpYXRlTm9kZTpmdW5jdGlvbihhKXthLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz10aGlzfX07dmFyIE89L15bKi4jW2EtekEtWl98XS87Qy5wcm90b3R5cGUuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSZW5kZXJlcl87cmV0dXJuIGE/KGEuaW52YWxpZGF0ZSgpLCEwKTohMX0sQS5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1CLnByb3RvdHlwZS5nZXREaXN0cmlidXRlZE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxmKHRoaXMpfSx6LnByb3RvdHlwZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz1mdW5jdGlvbigpe3JldHVybiBoKCkscih0aGlzKXx8W119LEEucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1CLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBhLGI9ayh0aGlzKTtiJiYoYT1sKGIpKSx0aGlzLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz1hLGEmJmEuaW52YWxpZGF0ZSgpfSxhLmdldFJlbmRlcmVyRm9ySG9zdD1qLGEuZ2V0U2hhZG93VHJlZXM9eCxhLnJlbmRlckFsbFBlbmRpbmc9aCxhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzPXIsYS52aXN1YWw9e2luc2VydEJlZm9yZTpjLHJlbW92ZTpkfX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXtpZih3aW5kb3dbYl0pe2QoIWEud3JhcHBlcnNbYl0pO3ZhciBpPWZ1bmN0aW9uKGEpe2MuY2FsbCh0aGlzLGEpfTtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxlKGkucHJvdG90eXBlLHtnZXQgZm9ybSgpe3JldHVybiBoKGcodGhpcykuZm9ybSl9fSksZih3aW5kb3dbYl0saSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KGIuc2xpY2UoNCwtNykpKSxhLndyYXBwZXJzW2JdPWl9fXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLmFzc2VydCxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPWEudW53cmFwLGg9YS53cmFwLGk9WyJIVE1MQnV0dG9uRWxlbWVudCIsIkhUTUxGaWVsZFNldEVsZW1lbnQiLCJIVE1MSW5wdXRFbGVtZW50IiwiSFRNTEtleWdlbkVsZW1lbnQiLCJIVE1MTGFiZWxFbGVtZW50IiwiSFRNTExlZ2VuZEVsZW1lbnQiLCJIVE1MT2JqZWN0RWxlbWVudCIsIkhUTUxPdXRwdXRFbGVtZW50IiwiSFRNTFRleHRBcmVhRWxlbWVudCJdO2kuZm9yRWFjaChiKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX17dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXA7d2luZG93LlNlbGVjdGlvbn1iLnByb3RvdHlwZT17Z2V0IGFuY2hvck5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuYW5jaG9yTm9kZSl9LGdldCBmb2N1c05vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmFkZFJhbmdlKGQoYSkpfSxjb2xsYXBzZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5jb2xsYXBzZShlKGEpLGIpfSxjb250YWluc05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbnRhaW5zTm9kZShlKGEpLGIpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuZXh0ZW5kKGUoYSksYil9LGdldFJhbmdlQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcy5pbXBsLmdldFJhbmdlQXQoYSkpfSxyZW1vdmVSYW5nZTpmdW5jdGlvbihhKXt0aGlzLmltcGwucmVtb3ZlUmFuZ2UoZChhKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3RBbGxDaGlsZHJlbihlKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxjKHdpbmRvdy5TZWxlY3Rpb24sYix3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLGEud3JhcHBlcnMuU2VsZWN0aW9uPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ay5jYWxsKHRoaXMsYSksdGhpcy50cmVlU2NvcGVfPW5ldyBwKHRoaXMsbnVsbCl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1kb2N1bWVudFthXTtiLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7RC5jYWxsKGIuaW1wbCx6KGEpKSxlKGEsYil9ZnVuY3Rpb24gZShhLGIpe2Euc2hhZG93Um9vdCYmYi5hZG9wdE5vZGUoYS5zaGFkb3dSb290KSxhIGluc3RhbmNlb2YgbyYmZihhLGIpO2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpZShjLGIpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLm9sZGVyU2hhZG93Um9vdDtjJiZiLmFkb3B0Tm9kZShjKX1mdW5jdGlvbiBnKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19dmFyIGo9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGs9YS53cmFwcGVycy5Ob2RlLGw9YS5QYXJlbnROb2RlSW50ZXJmYWNlLG09YS53cmFwcGVycy5TZWxlY3Rpb24sbj1hLlNlbGVjdG9yc0ludGVyZmFjZSxvPWEud3JhcHBlcnMuU2hhZG93Um9vdCxwPWEuVHJlZVNjb3BlLHE9YS5jbG9uZU5vZGUscj1hLmRlZmluZVdyYXBHZXR0ZXIscz1hLmVsZW1lbnRGcm9tUG9pbnQsdD1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLHU9YS5tYXRjaGVzTmFtZXMsdj1hLm1peGluLHc9YS5yZWdpc3RlcldyYXBwZXIseD1hLnJlbmRlckFsbFBlbmRpbmcseT1hLnJld3JhcCx6PWEudW53cmFwLEE9YS53cmFwLEI9YS53cmFwRXZlbnRUYXJnZXRNZXRob2RzLEM9KGEud3JhcE5vZGVMaXN0LG5ldyBXZWFrTWFwKTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGsucHJvdG90eXBlKSxyKGIsImRvY3VtZW50RWxlbWVudCIpLHIoYiwiYm9keSIpLHIoYiwiaGVhZCIpLFsiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImdldEVsZW1lbnRCeUlkIl0uZm9yRWFjaChjKTt2YXIgRD1kb2N1bWVudC5hZG9wdE5vZGUsRT1kb2N1bWVudC5nZXRTZWxlY3Rpb247aWYodihiLnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkKGEsdGhpcyksYX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBzKHRoaXMsdGhpcyxhLGIpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHEoYSxiLHRoaXMuaW1wbCl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB4KCksbmV3IG0oRS5jYWxsKHoodGhpcykpKX0sZ2V0RWxlbWVudHNCeU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ucXVlcnlTZWxlY3RvckFsbC5jYWxsKHRoaXMsIltuYW1lPSIrSlNPTi5zdHJpbmdpZnkoU3RyaW5nKGEpKSsiXSIpfX0pLGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCl7dmFyIEY9ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50O2IucHJvdG90eXBlLnJlZ2lzdGVyRWxlbWVudD1mdW5jdGlvbihiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGE/dm9pZCh0aGlzLmltcGw9YSk6Zj9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGYsYik6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiKX12YXIgZSxmO2lmKHZvaWQgMCE9PWMmJihlPWMucHJvdG90eXBlLGY9Yy5leHRlbmRzKSxlfHwoZT1PYmplY3QuY3JlYXRlKEhUTUxFbGVtZW50LnByb3RvdHlwZSkpLGEubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KGUpKXRocm93IG5ldyBFcnJvcigiTm90U3VwcG9ydGVkRXJyb3IiKTtmb3IodmFyIGcsaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksaT1bXTtoJiYhKGc9YS5uYXRpdmVQcm90b3R5cGVUYWJsZS5nZXQoaCkpOylpLnB1c2goaCksaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoaCk7aWYoIWcpdGhyb3cgbmV3IEVycm9yKCJOb3RTdXBwb3J0ZWRFcnJvciIpO2Zvcih2YXIgaj1PYmplY3QuY3JlYXRlKGcpLGs9aS5sZW5ndGgtMTtrPj0wO2stLSlqPU9iamVjdC5jcmVhdGUoaik7WyJjcmVhdGVkQ2FsbGJhY2siLCJhdHRhY2hlZENhbGxiYWNrIiwiZGV0YWNoZWRDYWxsYmFjayIsImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayJdLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9ZVthXTtiJiYoalthXT1mdW5jdGlvbigpe0EodGhpcylpbnN0YW5jZW9mIGR8fHkodGhpcyksYi5hcHBseShBKHRoaXMpLGFyZ3VtZW50cyl9KX0pO3ZhciBsPXtwcm90b3R5cGU6an07ZiYmKGwuZXh0ZW5kcz1mKSxkLnByb3RvdHlwZT1lLGQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWQsYS5jb25zdHJ1Y3RvclRhYmxlLnNldChqLGQpLGEubmF0aXZlUHJvdG90eXBlVGFibGUuc2V0KGUsaik7Ri5jYWxsKHoodGhpcyksYixsKTtyZXR1cm4gZH0sdChbd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50XSxbInJlZ2lzdGVyRWxlbWVudCJdKX10KFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50LHdpbmRvdy5IVE1MSHRtbEVsZW1lbnRdLFsiYXBwZW5kQ2hpbGQiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsImNvbnRhaW5zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyIsImluc2VydEJlZm9yZSIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlQ2hpbGQiLCJyZXBsYWNlQ2hpbGQiXS5jb25jYXQodSkpLHQoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJhZG9wdE5vZGUiLCJpbXBvcnROb2RlIiwiY29udGFpbnMiLCJjcmVhdGVDb21tZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJjcmVhdGVFdmVudCIsImNyZWF0ZUV2ZW50TlMiLCJjcmVhdGVSYW5nZSIsImNyZWF0ZVRleHROb2RlIiwiZWxlbWVudEZyb21Qb2ludCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJnZXRTZWxlY3Rpb24iXSksdihiLnByb3RvdHlwZSxqKSx2KGIucHJvdG90eXBlLGwpLHYoYi5wcm90b3R5cGUsbiksdihiLnByb3RvdHlwZSx7Z2V0IGltcGxlbWVudGF0aW9uKCl7dmFyIGE9Qy5nZXQodGhpcyk7cmV0dXJuIGE/YTooYT1uZXcgZyh6KHRoaXMpLmltcGxlbWVudGF0aW9uKSxDLnNldCh0aGlzLGEpLGEpfSxnZXQgZGVmYXVsdFZpZXcoKXtyZXR1cm4gQSh6KHRoaXMpLmRlZmF1bHRWaWV3KX19KSx3KHdpbmRvdy5Eb2N1bWVudCxiLGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikpLHdpbmRvdy5IVE1MRG9jdW1lbnQmJncod2luZG93LkhUTUxEb2N1bWVudCxiKSxCKFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50XSksaChnLCJjcmVhdGVEb2N1bWVudFR5cGUiKSxoKGcsImNyZWF0ZURvY3VtZW50IiksaChnLCJjcmVhdGVIVE1MRG9jdW1lbnQiKSxpKGcsImhhc0ZlYXR1cmUiKSx3KHdpbmRvdy5ET01JbXBsZW1lbnRhdGlvbixnKSx0KFt3aW5kb3cuRE9NSW1wbGVtZW50YXRpb25dLFsiY3JlYXRlRG9jdW1lbnRUeXBlIiwiY3JlYXRlRG9jdW1lbnQiLCJjcmVhdGVIVE1MRG9jdW1lbnQiLCJoYXNGZWF0dXJlIl0pLGEuYWRvcHROb2RlTm9SZW1vdmU9ZCxhLndyYXBwZXJzLkRPTUltcGxlbWVudGF0aW9uPWcsYS53cmFwcGVycy5Eb2N1bWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuRXZlbnRUYXJnZXQsZD1hLndyYXBwZXJzLlNlbGVjdGlvbixlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPWEucmVuZGVyQWxsUGVuZGluZyxoPWEudW53cmFwLGk9YS51bndyYXBJZk5lZWRlZCxqPWEud3JhcCxrPXdpbmRvdy5XaW5kb3csbD13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSxtPXdpbmRvdy5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSxuPXdpbmRvdy5nZXRTZWxlY3Rpb247Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksay5wcm90b3R5cGUuZ2V0Q29tcHV0ZWRTdHlsZT1mdW5jdGlvbihhLGIpe3JldHVybiBqKHRoaXN8fHdpbmRvdykuZ2V0Q29tcHV0ZWRTdHlsZShpKGEpLGIpfSxtJiYoay5wcm90b3R5cGUuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaih0aGlzfHx3aW5kb3cpLmdldERlZmF1bHRDb21wdXRlZFN0eWxlKGkoYSksYil9KSxrLnByb3RvdHlwZS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gaih0aGlzfHx3aW5kb3cpLmdldFNlbGVjdGlvbigpfSxkZWxldGUgd2luZG93LmdldENvbXB1dGVkU3R5bGUsZGVsZXRlIHdpbmRvdy5nZXRTZWxlY3Rpb24sWyJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2sucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7dmFyIGI9aih0aGlzfHx3aW5kb3cpO3JldHVybiBiW2FdLmFwcGx5KGIsYXJndW1lbnRzKX0sZGVsZXRlIHdpbmRvd1thXX0pLGUoYi5wcm90b3R5cGUse2dldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZygpLGwuY2FsbChoKHRoaXMpLGkoYSksYil9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBnKCksbmV3IGQobi5jYWxsKGgodGhpcykpKX0sZ2V0IGRvY3VtZW50KCl7cmV0dXJuIGooaCh0aGlzKS5kb2N1bWVudCl9fSksbSYmKGIucHJvdG90eXBlLmdldERlZmF1bHRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGcoKSxtLmNhbGwoaCh0aGlzKSxpKGEpLGIpfSksZihrLGIsd2luZG93KSxhLndyYXBwZXJzLldpbmRvdz1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLnVud3JhcCxjPXdpbmRvdy5EYXRhVHJhbnNmZXJ8fHdpbmRvdy5DbGlwYm9hcmQsZD1jLnByb3RvdHlwZS5zZXREcmFnSW1hZ2U7ZCYmKGMucHJvdG90eXBlLnNldERyYWdJbWFnZT1mdW5jdGlvbihhLGMsZSl7ZC5jYWxsKHRoaXMsYihhKSxjLGUpfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPWEgaW5zdGFuY2VvZiBlP2E6bmV3IGUoYSYmZChhKSl9dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPXdpbmRvdy5Gb3JtRGF0YTtjKGUsYixuZXcgZSksYS53cmFwcGVycy5Gb3JtRGF0YT1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWNbYV0sZD13aW5kb3dbYl07aWYoZCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKSxmPWUuY29uc3RydWN0b3I7d2luZG93W2JdPWZ9fXZhciBjPShhLmlzV3JhcHBlckZvcix7YToiSFRNTEFuY2hvckVsZW1lbnQiLGFyZWE6IkhUTUxBcmVhRWxlbWVudCIsYXVkaW86IkhUTUxBdWRpb0VsZW1lbnQiLGJhc2U6IkhUTUxCYXNlRWxlbWVudCIsYm9keToiSFRNTEJvZHlFbGVtZW50IixicjoiSFRNTEJSRWxlbWVudCIsYnV0dG9uOiJIVE1MQnV0dG9uRWxlbWVudCIsY2FudmFzOiJIVE1MQ2FudmFzRWxlbWVudCIsY2FwdGlvbjoiSFRNTFRhYmxlQ2FwdGlvbkVsZW1lbnQiLGNvbDoiSFRNTFRhYmxlQ29sRWxlbWVudCIsY29udGVudDoiSFRNTENvbnRlbnRFbGVtZW50IixkYXRhOiJIVE1MRGF0YUVsZW1lbnQiLGRhdGFsaXN0OiJIVE1MRGF0YUxpc3RFbGVtZW50IixkZWw6IkhUTUxNb2RFbGVtZW50IixkaXI6IkhUTUxEaXJlY3RvcnlFbGVtZW50IixkaXY6IkhUTUxEaXZFbGVtZW50IixkbDoiSFRNTERMaXN0RWxlbWVudCIsZW1iZWQ6IkhUTUxFbWJlZEVsZW1lbnQiLGZpZWxkc2V0OiJIVE1MRmllbGRTZXRFbGVtZW50Iixmb250OiJIVE1MRm9udEVsZW1lbnQiLGZvcm06IkhUTUxGb3JtRWxlbWVudCIsZnJhbWU6IkhUTUxGcmFtZUVsZW1lbnQiLGZyYW1lc2V0OiJIVE1MRnJhbWVTZXRFbGVtZW50IixoMToiSFRNTEhlYWRpbmdFbGVtZW50IixoZWFkOiJIVE1MSGVhZEVsZW1lbnQiLGhyOiJIVE1MSFJFbGVtZW50IixodG1sOiJIVE1MSHRtbEVsZW1lbnQiLGlmcmFtZToiSFRNTElGcmFtZUVsZW1lbnQiLGltZzoiSFRNTEltYWdlRWxlbWVudCIsaW5wdXQ6IkhUTUxJbnB1dEVsZW1lbnQiLGtleWdlbjoiSFRNTEtleWdlbkVsZW1lbnQiLGxhYmVsOiJIVE1MTGFiZWxFbGVtZW50IixsZWdlbmQ6IkhUTUxMZWdlbmRFbGVtZW50IixsaToiSFRNTExJRWxlbWVudCIsbGluazoiSFRNTExpbmtFbGVtZW50IixtYXA6IkhUTUxNYXBFbGVtZW50IixtYXJxdWVlOiJIVE1MTWFycXVlZUVsZW1lbnQiLG1lbnU6IkhUTUxNZW51RWxlbWVudCIsbWVudWl0ZW06IkhUTUxNZW51SXRlbUVsZW1lbnQiLG1ldGE6IkhUTUxNZXRhRWxlbWVudCIsbWV0ZXI6IkhUTUxNZXRlckVsZW1lbnQiLG9iamVjdDoiSFRNTE9iamVjdEVsZW1lbnQiLG9sOiJIVE1MT0xpc3RFbGVtZW50IixvcHRncm91cDoiSFRNTE9wdEdyb3VwRWxlbWVudCIsb3B0aW9uOiJIVE1MT3B0aW9uRWxlbWVudCIsb3V0cHV0OiJIVE1MT3V0cHV0RWxlbWVudCIscDoiSFRNTFBhcmFncmFwaEVsZW1lbnQiLHBhcmFtOiJIVE1MUGFyYW1FbGVtZW50IixwcmU6IkhUTUxQcmVFbGVtZW50Iixwcm9ncmVzczoiSFRNTFByb2dyZXNzRWxlbWVudCIscToiSFRNTFF1b3RlRWxlbWVudCIsc2NyaXB0OiJIVE1MU2NyaXB0RWxlbWVudCIsc2VsZWN0OiJIVE1MU2VsZWN0RWxlbWVudCIsc2hhZG93OiJIVE1MU2hhZG93RWxlbWVudCIsc291cmNlOiJIVE1MU291cmNlRWxlbWVudCIsc3BhbjoiSFRNTFNwYW5FbGVtZW50IixzdHlsZToiSFRNTFN0eWxlRWxlbWVudCIsdGFibGU6IkhUTUxUYWJsZUVsZW1lbnQiLHRib2R5OiJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsdGVtcGxhdGU6IkhUTUxUZW1wbGF0ZUVsZW1lbnQiLHRleHRhcmVhOiJIVE1MVGV4dEFyZWFFbGVtZW50Iix0aGVhZDoiSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQiLHRpbWU6IkhUTUxUaW1lRWxlbWVudCIsdGl0bGU6IkhUTUxUaXRsZUVsZW1lbnQiLHRyOiJIVE1MVGFibGVSb3dFbGVtZW50Iix0cmFjazoiSFRNTFRyYWNrRWxlbWVudCIsdWw6IkhUTUxVTGlzdEVsZW1lbnQiLHZpZGVvOiJIVE1MVmlkZW9FbGVtZW50In0pO09iamVjdC5rZXlzKGMpLmZvckVhY2goYiksT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYS53cmFwcGVycykuZm9yRWFjaChmdW5jdGlvbihiKXt3aW5kb3dbYl09YS53cmFwcGVyc1tiXX0pfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxjKXt2YXIgZCxlLGYsZyxoPWEuZmlyc3RFbGVtZW50Q2hpbGQ7Zm9yKGU9W10sZj1hLnNoYWRvd1Jvb3Q7ZjspZS5wdXNoKGYpLGY9Zi5vbGRlclNoYWRvd1Jvb3Q7Zm9yKGc9ZS5sZW5ndGgtMTtnPj0wO2ctLSlpZihkPWVbZ10ucXVlcnlTZWxlY3RvcihjKSlyZXR1cm4gZDtmb3IoO2g7KXtpZihkPWIoaCxjKSlyZXR1cm4gZDtoPWgubmV4dEVsZW1lbnRTaWJsaW5nfXJldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiLGQpe3ZhciBlLGYsZyxoLGksaj1hLmZpcnN0RWxlbWVudENoaWxkO2ZvcihnPVtdLGY9YS5zaGFkb3dSb290O2Y7KWcucHVzaChmKSxmPWYub2xkZXJTaGFkb3dSb290O2ZvcihoPWcubGVuZ3RoLTE7aD49MDtoLS0pZm9yKGU9Z1toXS5xdWVyeVNlbGVjdG9yQWxsKGIpLGk9MDtpPGUubGVuZ3RoO2krKylkLnB1c2goZVtpXSk7Zm9yKDtqOyljKGosYixkKSxqPWoubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBkfXdpbmRvdy53cmFwPVNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZCx3aW5kb3cudW53cmFwPVNoYWRvd0RPTVBvbHlmaWxsLnVud3JhcElmTmVlZGVkLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFbGVtZW50LnByb3RvdHlwZSwid2Via2l0U2hhZG93Um9vdCIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihFbGVtZW50LnByb3RvdHlwZSwic2hhZG93Um9vdCIpKTt2YXIgZD1FbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290O0VsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q9ZnVuY3Rpb24oKXt2YXIgYT1kLmNhbGwodGhpcyk7cmV0dXJuIEN1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93KHRoaXMpLGF9LEVsZW1lbnQucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3Q9RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdCxhLnF1ZXJ5QWxsU2hhZG93cz1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIGU/YyhhLGQsW10pOmIoYSxkKX19KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPSIiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7Yys9YS50ZXh0Q29udGVudCsiXG5cbiJ9KSxifHwoYz1jLnJlcGxhY2UobCwiIikpLGN9ZnVuY3Rpb24gYyhhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3JldHVybiBiLnRleHRDb250ZW50PWEsYn1mdW5jdGlvbiBkKGEpe3ZhciBiPWMoYSk7ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChiKTt2YXIgZD1bXTtpZihiLnNoZWV0KXRyeXtkPWIuc2hlZXQuY3NzUnVsZXN9Y2F0Y2goZSl7fWVsc2UgY29uc29sZS53YXJuKCJzaGVldCBub3QgZm91bmQiLGIpO3JldHVybiBiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksZH1mdW5jdGlvbiBlKCl7di5pbml0aWFsaXplZD0hMCxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHYpO3ZhciBhPXYuY29udGVudERvY3VtZW50LGI9YS5jcmVhdGVFbGVtZW50KCJiYXNlIik7Yi5ocmVmPWRvY3VtZW50LmJhc2VVUkksYS5oZWFkLmFwcGVuZENoaWxkKGIpfWZ1bmN0aW9uIGYoYSl7di5pbml0aWFsaXplZHx8ZSgpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodiksYSh2LmNvbnRlbnREb2N1bWVudCksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh2KX1mdW5jdGlvbiBnKGEsYil7aWYoYil7dmFyIGU7aWYoYS5tYXRjaCgiQGltcG9ydCIpJiZ4KXt2YXIgZz1jKGEpO2YoZnVuY3Rpb24oYSl7YS5oZWFkLmFwcGVuZENoaWxkKGcuaW1wbCksZT1nLnNoZWV0LmNzc1J1bGVzLGIoZSl9KX1lbHNlIGU9ZChhKSxiKGUpfX1mdW5jdGlvbiBoKGEpe2EmJmooKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9ZnVuY3Rpb24gaShhLGIpe3ZhciBkPWMoYSk7ZC5zZXRBdHRyaWJ1dGUoYiwiIiksZC5zZXRBdHRyaWJ1dGUoeiwiIiksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChkKX1mdW5jdGlvbiBqKCl7cmV0dXJuIHd8fCh3PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksdy5zZXRBdHRyaWJ1dGUoeiwiIiksd1t6XT0hMCksd312YXIgaz17c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihhLGMsZCl7dmFyIGU9dGhpcy5wcmVwYXJlUm9vdChhLGMsZCksZj10aGlzLmlzVHlwZUV4dGVuc2lvbihkKSxnPXRoaXMubWFrZVNjb3BlU2VsZWN0b3IoYyxmKSxoPWIoZSwhMCk7aD10aGlzLnNjb3BlQ3NzVGV4dChoLGcpLGEmJihhLnNoaW1tZWRTdHlsZT1oKSx0aGlzLmFkZENzc1RvRG9jdW1lbnQoaCxjKX0sc2hpbVN0eWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc2hpbUNzc1RleHQoYS50ZXh0Q29udGVudCxiKX0sc2hpbUNzc1RleHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT10aGlzLmluc2VydERpcmVjdGl2ZXMoYSksdGhpcy5zY29wZUNzc1RleHQoYSxiKX0sbWFrZVNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9iPyJbaXM9IithKyJdIjphOiIifSxpc1R5cGVFeHRlbnNpb246ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEuaW5kZXhPZigiLSIpPDB9LHByZXBhcmVSb290OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlZ2lzdGVyUm9vdChhLGIsYyk7cmV0dXJuIHRoaXMucmVwbGFjZVRleHRJblN0eWxlcyhkLnJvb3RTdHlsZXMsdGhpcy5pbnNlcnREaXJlY3RpdmVzKSx0aGlzLnJlbW92ZVN0eWxlcyhhLGQucm9vdFN0eWxlcyksdGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYSxiKSxkLnNjb3BlU3R5bGVzfSxyZW1vdmVTdHlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpfSxyZWdpc3RlclJvb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVnaXN0cnlbYl09e3Jvb3Q6YSxuYW1lOmIsZXh0ZW5kc05hbWU6Y30sZT10aGlzLmZpbmRTdHlsZXMoYSk7ZC5yb290U3R5bGVzPWUsZC5zY29wZVN0eWxlcz1kLnJvb3RTdHlsZXM7dmFyIGY9dGhpcy5yZWdpc3RyeVtkLmV4dGVuZHNOYW1lXTtyZXR1cm4gZiYmKGQuc2NvcGVTdHlsZXM9Zi5zY29wZVN0eWxlcy5jb25jYXQoZC5zY29wZVN0eWxlcykpLGR9LGZpbmRTdHlsZXM6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuW107dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYixmdW5jdGlvbihhKXtyZXR1cm4hYS5oYXNBdHRyaWJ1dGUoQSl9KX0sYXBwbHlTY29wZVRvQ29udGVudDpmdW5jdGlvbihhLGIpe2EmJihBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgiKiIpLGZ1bmN0aW9uKGEpe2Euc2V0QXR0cmlidXRlKGIsIiIpfSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIiksZnVuY3Rpb24oYSl7dGhpcy5hcHBseVNjb3BlVG9Db250ZW50KGEuY29udGVudCxiKX0sdGhpcykpfSxpbnNlcnREaXJlY3RpdmVzOmZ1bmN0aW9uKGEpe3JldHVybiBhPXRoaXMuaW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzSW5Dc3NUZXh0KGEpLHRoaXMuaW5zZXJ0UG9seWZpbGxSdWxlc0luQ3NzVGV4dChhKX0saW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzSW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShtLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuc2xpY2UoMCwtMikrInsifSksYS5yZXBsYWNlKG4sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYisiIHsifSl9LGluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKG8sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5zbGljZSgwLC0xKX0pLGEucmVwbGFjZShwLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEucmVwbGFjZShiLCIiKS5yZXBsYWNlKGMsIiIpO3JldHVybiBkK2V9KX0sc2NvcGVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5leHRyYWN0VW5zY29wZWRSdWxlc0Zyb21Dc3NUZXh0KGEpO2lmKGE9dGhpcy5pbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQoYSksYT10aGlzLmNvbnZlcnRDb2xvbkhvc3QoYSksYT10aGlzLmNvbnZlcnRDb2xvbkhvc3RDb250ZXh0KGEpLGE9dGhpcy5jb252ZXJ0U2hhZG93RE9NU2VsZWN0b3JzKGEpLGIpe3ZhciBhLGQ9dGhpcztnKGEsZnVuY3Rpb24oYyl7YT1kLnNjb3BlUnVsZXMoYyxiKX0pfXJldHVybiBhPWErIlxuIitjLGEudHJpbSgpfSxleHRyYWN0VW5zY29wZWRSdWxlc0Zyb21Dc3NUZXh0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPSIiO2I9cS5leGVjKGEpOyljKz1iWzFdLnNsaWNlKDAsLTEpKyJcblxuIjtmb3IoO2I9ci5leGVjKGEpOyljKz1iWzBdLnJlcGxhY2UoYlsyXSwiIikucmVwbGFjZShiWzFdLGJbM10pKyJcblxuIjtyZXR1cm4gY30sY29udmVydENvbG9uSG9zdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb252ZXJ0Q29sb25SdWxlKGEsY3NzQ29sb25Ib3N0UmUsdGhpcy5jb2xvbkhvc3RQYXJ0UmVwbGFjZXIpfSxjb252ZXJ0Q29sb25Ib3N0Q29udGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb252ZXJ0Q29sb25SdWxlKGEsY3NzQ29sb25Ib3N0Q29udGV4dFJlLHRoaXMuY29sb25Ib3N0Q29udGV4dFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvblJ1bGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnJlcGxhY2UoYixmdW5jdGlvbihhLGIsZCxlKXtpZihiPXBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcixkKXtmb3IodmFyIGYsZz1kLnNwbGl0KCIsIiksaD1bXSxpPTAsaj1nLmxlbmd0aDtqPmkmJihmPWdbaV0pO2krKylmPWYudHJpbSgpLGgucHVzaChjKGIsZixlKSk7cmV0dXJuIGguam9pbigiLCIpfXJldHVybiBiK2V9KX0sY29sb25Ib3N0Q29udGV4dFBhcnRSZXBsYWNlcjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGIubWF0Y2gocyk/dGhpcy5jb2xvbkhvc3RQYXJ0UmVwbGFjZXIoYSxiLGMpOmErYitjKyIsICIrYisiICIrYStjfSxjb2xvbkhvc3RQYXJ0UmVwbGFjZXI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhK2IucmVwbGFjZShzLCIiKStjfSxjb252ZXJ0U2hhZG93RE9NU2VsZWN0b3JzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8c2hhZG93RE9NU2VsZWN0b3JzUmUubGVuZ3RoO2IrKylhPWEucmVwbGFjZShzaGFkb3dET01TZWxlY3RvcnNSZVtiXSwiICIpO3JldHVybiBhfSxzY29wZVJ1bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9IiI7cmV0dXJuIGEmJkFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXtpZihhLnNlbGVjdG9yVGV4dCYmYS5zdHlsZSYmdm9pZCAwIT09YS5zdHlsZS5jc3NUZXh0KWMrPXRoaXMuc2NvcGVTZWxlY3RvcihhLnNlbGVjdG9yVGV4dCxiLHRoaXMuc3RyaWN0U3R5bGluZykrIiB7XG4JIixjKz10aGlzLnByb3BlcnRpZXNGcm9tUnVsZShhKSsiXG59XG5cbiI7ZWxzZSBpZihhLnR5cGU9PT1DU1NSdWxlLk1FRElBX1JVTEUpYys9IkBtZWRpYSAiK2EubWVkaWEubWVkaWFUZXh0KyIge1xuIixjKz10aGlzLnNjb3BlUnVsZXMoYS5jc3NSdWxlcyxiKSxjKz0iXG59XG5cbiI7ZWxzZSB0cnl7YS5jc3NUZXh0JiYoYys9YS5jc3NUZXh0KyJcblxuIil9Y2F0Y2goZCl7fX0sdGhpcyksY30sc2NvcGVTZWxlY3RvcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT1hLnNwbGl0KCIsIik7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihhKXthPWEudHJpbSgpLHRoaXMuc2VsZWN0b3JOZWVkc1Njb3BpbmcoYSxiKSYmKGE9YyYmIWEubWF0Y2gocG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yKT90aGlzLmFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZShhLGIpOnRoaXMuYXBwbHlTZWxlY3RvclNjb3BlKGEsYikpLGQucHVzaChhKX0sdGhpcyksZC5qb2luKCIsICIpfSxzZWxlY3Rvck5lZWRzU2NvcGluZzpmdW5jdGlvbihhLGIpe2lmKEFycmF5LmlzQXJyYXkoYikpcmV0dXJuITA7dmFyIGM9dGhpcy5tYWtlU2NvcGVNYXRjaGVyKGIpO3JldHVybiFhLm1hdGNoKGMpfSxtYWtlU2NvcGVNYXRjaGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZSgvXFsvZywiXFxbIikucmVwbGFjZSgvXFsvZywiXFxdIiksbmV3IFJlZ0V4cCgiXigiK2ErIikiK3NlbGVjdG9yUmVTdWZmaXgsIm0iKX0sYXBwbHlTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEFycmF5LmlzQXJyYXkoYik/dGhpcy5hcHBseVNlbGVjdG9yU2NvcGVMaXN0KGEsYik6dGhpcy5hcHBseVNpbXBsZVNlbGVjdG9yU2NvcGUoYSxiKX0sYXBwbHlTZWxlY3RvclNjb3BlTGlzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPVtdLGU9MDtjPWJbZV07ZSsrKWQucHVzaCh0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGMpKTtyZXR1cm4gZC5qb2luKCIsICIpfSxhcHBseVNpbXBsZVNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5tYXRjaChwb2x5ZmlsbEhvc3RSZSk/KGE9YS5yZXBsYWNlKHBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcixiKSxhLnJlcGxhY2UocG9seWZpbGxIb3N0UmUsYisiICIpKTpiKyIgIithfSxhcHBseVN0cmljdFNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiKXtiPWIucmVwbGFjZSgvXFtpcz0oW15cXV0qKVxdL2csIiQxIik7dmFyIGM9WyIgIiwiPiIsIisiLCJ+Il0sZD1hLGU9IlsiK2IrIl0iO3JldHVybiBjLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9ZC5zcGxpdChhKTtkPWIubWFwKGZ1bmN0aW9uKGEpe3ZhciBiPWEudHJpbSgpLnJlcGxhY2UocG9seWZpbGxIb3N0UmUsIiIpO3JldHVybiBiJiZjLmluZGV4T2YoYik8MCYmYi5pbmRleE9mKGUpPDAmJihhPWIucmVwbGFjZSgvKFteOl0qKSg6KikoLiopLywiJDEiK2UrIiQyJDMiKSksYX0pLmpvaW4oYSl9KSxkfSxpbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShjb2xvbkhvc3RDb250ZXh0UmUsdCkucmVwbGFjZShjb2xvbkhvc3RSZSxzKX0scHJvcGVydGllc0Zyb21SdWxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc3R5bGUuY3NzVGV4dDthLnN0eWxlLmNvbnRlbnQmJiFhLnN0eWxlLmNvbnRlbnQubWF0Y2goL1snIl0rfGF0dHIvKSYmKGI9Yi5yZXBsYWNlKC9jb250ZW50OlteO10qOy9nLCJjb250ZW50OiAnIithLnN0eWxlLmNvbnRlbnQrIic7IikpO3ZhciBjPWEuc3R5bGU7Zm9yKHZhciBkIGluIGMpImluaXRpYWwiPT09Y1tkXSYmKGIrPWQrIjogaW5pdGlhbDsgIik7cmV0dXJuIGJ9LHJlcGxhY2VUZXh0SW5TdHlsZXM6ZnVuY3Rpb24oYSxiKXthJiZiJiYoYSBpbnN0YW5jZW9mIEFycmF5fHwoYT1bYV0pLEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXthLnRleHRDb250ZW50PWIuY2FsbCh0aGlzLGEudGV4dENvbnRlbnQpfSx0aGlzKSl9LGFkZENzc1RvRG9jdW1lbnQ6ZnVuY3Rpb24oYSxiKXthLm1hdGNoKCJAaW1wb3J0Iik/aShhLGIpOmgoYSl9fSxsPS9cL1wqW14qXSpcKisoW14vKl1bXipdKlwqKykqXC8vZ2ltLG09L1wvXCpccypAcG9seWZpbGwgKFteKl0qXCorKFteLypdW14qXSpcKispKlwvKShbXntdKj8pey9naW0sbj0vcG9seWZpbGwtbmV4dC1zZWxlY3RvcltefV0qY29udGVudFw6W1xzXSo/WyciXSguKj8pWyciXVs7XHNdKn0oW157XSo/KXsvZ2ltLG89L1wvXCpcc0Bwb2x5ZmlsbC1ydWxlKFteKl0qXCorKFteLypdW14qXSpcKispKilcLy9naW0scD0vKHBvbHlmaWxsLXJ1bGUpW159XSooY29udGVudFw6W1xzXSpbJyJdKC4qPylbJyJdKVs7XHNdKltefV0qfS9naW0scT0vXC9cKlxzQHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxyPS8ocG9seWZpbGwtdW5zY29wZWQtcnVsZSlbXn1dKihjb250ZW50XDpbXHNdKlsnIl0oLio/KVsnIl0pWztcc10qW159XSp9L2dpbSxzPSItc2hhZG93Y3NzaG9zdCIsdD0iLXNoYWRvd2Nzc2NvbnRleHQiLHU9IikoPzpcXCgoKD86XFwoW14pKF0qXFwpfFteKShdKikrPylcXCkpPyhbXix7XSopIjtjc3NDb2xvbkhvc3RSZT1uZXcgUmVnRXhwKCIoIitzK3UsImdpbSIpLGNzc0NvbG9uSG9zdENvbnRleHRSZT1uZXcgUmVnRXhwKCIoIit0K3UsImdpbSIpLHNlbGVjdG9yUmVTdWZmaXg9IihbPlxcc34rWy4sezpdW1xcc1xcU10qKT8kIixjb2xvbkhvc3RSZT0vXDpob3N0L2dpbSxjb2xvbkhvc3RDb250ZXh0UmU9L1w6aG9zdC1jb250ZXh0L2dpbSxwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3I9cysiLW5vLWNvbWJpbmF0b3IiLHBvbHlmaWxsSG9zdFJlPW5ldyBSZWdFeHAocywiZ2ltIikscG9seWZpbGxIb3N0Q29udGV4dFJlPW5ldyBSZWdFeHAodCwiZ2ltIiksc2hhZG93RE9NU2VsZWN0b3JzUmU9Wy9cXlxeL2csL1xeL2csL1wvc2hhZG93XC8vZywvXC9zaGFkb3ctZGVlcFwvL2csLzo6c2hhZG93L2csL1wvZGVlcFwvL2csLzo6Y29udGVudC9nXTt2YXIgdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTt2LnN0eWxlLmRpc3BsYXk9Im5vbmUiO3ZhciB3LHg9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgiQ2hyb21lIikseT0ic2hpbS1zaGFkb3dkb20iLHo9InNoaW0tc2hhZG93ZG9tLWNzcyIsQT0ibm8tc2hpbSI7aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXtoKCJzdHlsZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxuIik7dmFyIEI9d3JhcChkb2N1bWVudCksQz1CLnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtDLmluc2VydEJlZm9yZShqKCksQy5jaGlsZE5vZGVzWzBdKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe3ZhciBiPWEudXJsUmVzb2x2ZXI7aWYod2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMudXNlTmF0aXZlKXt2YXIgYz0ibGlua1tyZWw9c3R5bGVzaGVldF1bIit5KyJdIixkPSJzdHlsZVsiK3krIl0iO0hUTUxJbXBvcnRzLmltcG9ydGVyLmRvY3VtZW50UHJlbG9hZFNlbGVjdG9ycys9IiwiK2MsSFRNTEltcG9ydHMuaW1wb3J0ZXIuaW1wb3J0c1ByZWxvYWRTZWxlY3RvcnMrPSIsIitjLEhUTUxJbXBvcnRzLnBhcnNlci5kb2N1bWVudFNlbGVjdG9ycz1bSFRNTEltcG9ydHMucGFyc2VyLmRvY3VtZW50U2VsZWN0b3JzLGMsZF0uam9pbigiLCIpO3ZhciBlPUhUTUxJbXBvcnRzLnBhcnNlci5wYXJzZUdlbmVyaWM7SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlR2VuZXJpYz1mdW5jdGlvbihhKXtpZighYVt6XSl7dmFyIGM9YS5fX2ltcG9ydEVsZW1lbnR8fGE7aWYoIWMuaGFzQXR0cmlidXRlKHkpKXJldHVybiB2b2lkIGUuY2FsbCh0aGlzLGEpO2EuX19yZXNvdXJjZT8oYz1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSxjLnRleHRDb250ZW50PWIucmVzb2x2ZUNzc1RleHQoYS5fX3Jlc291cmNlLGEuaHJlZikpOmIucmVzb2x2ZVN0eWxlKGMpLGMudGV4dENvbnRlbnQ9ay5zaGltU3R5bGUoYyksYy5yZW1vdmVBdHRyaWJ1dGUoeSwiIiksYy5zZXRBdHRyaWJ1dGUoeiwiIiksY1t6XT0hMCxjLnBhcmVudE5vZGUhPT1DJiYoYS5wYXJlbnROb2RlPT09Qz9DLnJlcGxhY2VDaGlsZChjLGEpOnRoaXMuYWRkRWxlbWVudFRvRG9jdW1lbnQoYykpLGMuX19pbXBvcnRQYXJzZWQ9ITAsdGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGEpLHRoaXMucGFyc2VOZXh0KCl9fTt2YXIgZj1IVE1MSW1wb3J0cy5wYXJzZXIuaGFzUmVzb3VyY2U7SFRNTEltcG9ydHMucGFyc2VyLmhhc1Jlc291cmNlPWZ1bmN0aW9uKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiYic3R5bGVzaGVldCI9PT1hLnJlbCYmYS5oYXNBdHRyaWJ1dGUoeSk/YS5fX3Jlc291cmNlOmYuY2FsbCh0aGlzLGEpfX19KX1hLlNoYWRvd0NTUz1rfSh3aW5kb3cuUGxhdGZvcm0pKTohZnVuY3Rpb24oKXt3aW5kb3cud3JhcD13aW5kb3cudW53cmFwPWZ1bmN0aW9uKGEpe3JldHVybiBhCn0sYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtpZihDdXN0b21FbGVtZW50cy51c2VOYXRpdmU9PT0hMSl7dmFyIGE9RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdDtFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGI9YS5jYWxsKHRoaXMpO3JldHVybiBDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxifX19KSxQbGF0Zm9ybS50ZW1wbGF0ZUNvbnRlbnQ9ZnVuY3Rpb24oYSl7aWYod2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChhKSwhYS5jb250ZW50JiYhYS5fY29udGVudCl7Zm9yKHZhciBiPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTthLmZpcnN0Q2hpbGQ7KWIuYXBwZW5kQ2hpbGQoYS5maXJzdENoaWxkKTthLl9jb250ZW50PWJ9cmV0dXJuIGEuY29udGVudHx8YS5fY29udGVudH19KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIHZvaWQgMCE9PW1bYV19ZnVuY3Rpb24gYygpe2guY2FsbCh0aGlzKSx0aGlzLl9pc0ludmFsaWQ9ITB9ZnVuY3Rpb24gZChhKXtyZXR1cm4iIj09YSYmYy5jYWxsKHRoaXMpLGEudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gYj4zMiYmMTI3PmImJi0xPT1bMzQsMzUsNjAsNjIsNjMsOTZdLmluZGV4T2YoYik/YTplbmNvZGVVUklDb21wb25lbnQoYSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGI+MzImJjEyNz5iJiYtMT09WzM0LDM1LDYwLDYyLDk2XS5pbmRleE9mKGIpP2E6ZW5jb2RlVVJJQ29tcG9uZW50KGEpfWZ1bmN0aW9uIGcoYSxnLGgpe2Z1bmN0aW9uIGkoYSl7dC5wdXNoKGEpfXZhciBqPWd8fCJzY2hlbWUgc3RhcnQiLGs9MCxsPSIiLHI9ITEscz0hMSx0PVtdO2E6Zm9yKDsoYVtrLTFdIT1vfHwwPT1rKSYmIXRoaXMuX2lzSW52YWxpZDspe3ZhciB1PWFba107c3dpdGNoKGope2Nhc2Uic2NoZW1lIHN0YXJ0IjppZighdXx8IXAudGVzdCh1KSl7aWYoZyl7aSgiSW52YWxpZCBzY2hlbWUuIik7YnJlYWsgYX1sPSIiLGo9Im5vIHNjaGVtZSI7Y29udGludWV9bCs9dS50b0xvd2VyQ2FzZSgpLGo9InNjaGVtZSI7YnJlYWs7Y2FzZSJzY2hlbWUiOmlmKHUmJnEudGVzdCh1KSlsKz11LnRvTG93ZXJDYXNlKCk7ZWxzZXtpZigiOiIhPXUpe2lmKGcpe2lmKG89PXUpYnJlYWsgYTtpKCJDb2RlIHBvaW50IG5vdCBhbGxvd2VkIGluIHNjaGVtZTogIit1KTticmVhayBhfWw9IiIsaz0wLGo9Im5vIHNjaGVtZSI7Y29udGludWV9aWYodGhpcy5fc2NoZW1lPWwsbD0iIixnKWJyZWFrIGE7Yih0aGlzLl9zY2hlbWUpJiYodGhpcy5faXNSZWxhdGl2ZT0hMCksaj0iZmlsZSI9PXRoaXMuX3NjaGVtZT8icmVsYXRpdmUiOnRoaXMuX2lzUmVsYXRpdmUmJmgmJmguX3NjaGVtZT09dGhpcy5fc2NoZW1lPyJyZWxhdGl2ZSBvciBhdXRob3JpdHkiOnRoaXMuX2lzUmVsYXRpdmU/ImF1dGhvcml0eSBmaXJzdCBzbGFzaCI6InNjaGVtZSBkYXRhIn1icmVhaztjYXNlInNjaGVtZSBkYXRhIjoiPyI9PXU/KHF1ZXJ5PSI/IixqPSJxdWVyeSIpOiIjIj09dT8odGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iik6byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fc2NoZW1lRGF0YSs9ZSh1KSk7YnJlYWs7Y2FzZSJubyBzY2hlbWUiOmlmKGgmJmIoaC5fc2NoZW1lKSl7aj0icmVsYXRpdmUiO2NvbnRpbnVlfWkoIk1pc3Npbmcgc2NoZW1lLiIpLGMuY2FsbCh0aGlzKTticmVhaztjYXNlInJlbGF0aXZlIG9yIGF1dGhvcml0eSI6aWYoIi8iIT11fHwiLyIhPWFbaysxXSl7aSgiRXhwZWN0ZWQgLywgZ290OiAiK3UpLGo9InJlbGF0aXZlIjtjb250aW51ZX1qPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2JyZWFrO2Nhc2UicmVsYXRpdmUiOmlmKHRoaXMuX2lzUmVsYXRpdmU9ITAsImZpbGUiIT10aGlzLl9zY2hlbWUmJih0aGlzLl9zY2hlbWU9aC5fc2NoZW1lKSxvPT11KXt0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PWguX3F1ZXJ5O2JyZWFrIGF9aWYoIi8iPT11fHwiXFwiPT11KSJcXCI9PXUmJmkoIlxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC4iKSxqPSJyZWxhdGl2ZSBzbGFzaCI7ZWxzZSBpZigiPyI9PXUpdGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT0iPyIsaj0icXVlcnkiO2Vsc2V7aWYoIiMiIT11KXt2YXIgdj1hW2srMV0sdz1hW2srMl07KCJmaWxlIiE9dGhpcy5fc2NoZW1lfHwhcC50ZXN0KHUpfHwiOiIhPXYmJiJ8IiE9dnx8byE9dyYmIi8iIT13JiYiXFwiIT13JiYiPyIhPXcmJiIjIiE9dykmJih0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3BhdGgucG9wKCkpLGo9InJlbGF0aXZlIHBhdGgiO2NvbnRpbnVlfXRoaXMuX2hvc3Q9aC5faG9zdCx0aGlzLl9wb3J0PWguX3BvcnQsdGhpcy5fcGF0aD1oLl9wYXRoLnNsaWNlKCksdGhpcy5fcXVlcnk9aC5fcXVlcnksdGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50In1icmVhaztjYXNlInJlbGF0aXZlIHNsYXNoIjppZigiLyIhPXUmJiJcXCIhPXUpeyJmaWxlIiE9dGhpcy5fc2NoZW1lJiYodGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCksaj0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9IlxcIj09dSYmaSgiXFwgaXMgYW4gaW52YWxpZCBjb2RlIHBvaW50LiIpLGo9ImZpbGUiPT10aGlzLl9zY2hlbWU/ImZpbGUgaG9zdCI6ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI7YnJlYWs7Y2FzZSJhdXRob3JpdHkgZmlyc3Qgc2xhc2giOmlmKCIvIiE9dSl7aSgiRXhwZWN0ZWQgJy8nLCBnb3Q6ICIrdSksaj0iYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjtjb250aW51ZX1qPSJhdXRob3JpdHkgc2Vjb25kIHNsYXNoIjticmVhaztjYXNlImF1dGhvcml0eSBzZWNvbmQgc2xhc2giOmlmKGo9ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyIsIi8iIT11KXtpKCJFeHBlY3RlZCAnLycsIGdvdDogIit1KTtjb250aW51ZX1icmVhaztjYXNlImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI6aWYoIi8iIT11JiYiXFwiIT11KXtqPSJhdXRob3JpdHkiO2NvbnRpbnVlfWkoIkV4cGVjdGVkIGF1dGhvcml0eSwgZ290OiAiK3UpO2JyZWFrO2Nhc2UiYXV0aG9yaXR5IjppZigiQCI9PXUpe3ImJihpKCJAIGFscmVhZHkgc2Vlbi4iKSxsKz0iJTQwIikscj0hMDtmb3IodmFyIHg9MDt4PGwubGVuZ3RoO3grKyl7dmFyIHk9bFt4XTtpZigiCSIhPXkmJiJcbiIhPXkmJiJcciIhPXkpaWYoIjoiIT15fHxudWxsIT09dGhpcy5fcGFzc3dvcmQpe3ZhciB6PWUoeSk7bnVsbCE9PXRoaXMuX3Bhc3N3b3JkP3RoaXMuX3Bhc3N3b3JkKz16OnRoaXMuX3VzZXJuYW1lKz16fWVsc2UgdGhpcy5fcGFzc3dvcmQ9IiI7ZWxzZSBpKCJJbnZhbGlkIHdoaXRlc3BhY2UgaW4gYXV0aG9yaXR5LiIpfWw9IiJ9ZWxzZXtpZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11KXtrLT1sLmxlbmd0aCxsPSIiLGo9Imhvc3QiO2NvbnRpbnVlfWwrPXV9YnJlYWs7Y2FzZSJmaWxlIGhvc3QiOmlmKG89PXV8fCIvIj09dXx8IlxcIj09dXx8Ij8iPT11fHwiIyI9PXUpezIhPWwubGVuZ3RofHwhcC50ZXN0KGxbMF0pfHwiOiIhPWxbMV0mJiJ8IiE9bFsxXT8wPT1sLmxlbmd0aD9qPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0IjoodGhpcy5faG9zdD1kLmNhbGwodGhpcyxsKSxsPSIiLGo9InJlbGF0aXZlIHBhdGggc3RhcnQiKTpqPSJyZWxhdGl2ZSBwYXRoIjtjb250aW51ZX0iCSI9PXV8fCJcbiI9PXV8fCJcciI9PXU/aSgiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGZpbGUgaG9zdC4iKTpsKz11O2JyZWFrO2Nhc2UiaG9zdCI6Y2FzZSJob3N0bmFtZSI6aWYoIjoiIT11fHxzKXtpZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11KXtpZih0aGlzLl9ob3N0PWQuY2FsbCh0aGlzLGwpLGw9IiIsaj0icmVsYXRpdmUgcGF0aCBzdGFydCIsZylicmVhayBhO2NvbnRpbnVlfSIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dT8oIlsiPT11P3M9ITA6Il0iPT11JiYocz0hMSksbCs9dSk6aSgiSW52YWxpZCBjb2RlIHBvaW50IGluIGhvc3QvaG9zdG5hbWU6ICIrdSl9ZWxzZSBpZih0aGlzLl9ob3N0PWQuY2FsbCh0aGlzLGwpLGw9IiIsaj0icG9ydCIsImhvc3RuYW1lIj09ZylicmVhayBhO2JyZWFrO2Nhc2UicG9ydCI6aWYoL1swLTldLy50ZXN0KHUpKWwrPXU7ZWxzZXtpZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11fHxnKXtpZigiIiE9bCl7dmFyIEE9cGFyc2VJbnQobCwxMCk7QSE9bVt0aGlzLl9zY2hlbWVdJiYodGhpcy5fcG9ydD1BKyIiKSxsPSIifWlmKGcpYnJlYWsgYTtqPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0Ijtjb250aW51ZX0iCSI9PXV8fCJcbiI9PXV8fCJcciI9PXU/aSgiSW52YWxpZCBjb2RlIHBvaW50IGluIHBvcnQ6ICIrdSk6Yy5jYWxsKHRoaXMpfWJyZWFrO2Nhc2UicmVsYXRpdmUgcGF0aCBzdGFydCI6aWYoIlxcIj09dSYmaSgiJ1xcJyBub3QgYWxsb3dlZCBpbiBwYXRoLiIpLGo9InJlbGF0aXZlIHBhdGgiLCIvIiE9dSYmIlxcIiE9dSljb250aW51ZTticmVhaztjYXNlInJlbGF0aXZlIHBhdGgiOmlmKG8hPXUmJiIvIiE9dSYmIlxcIiE9dSYmKGd8fCI/IiE9dSYmIiMiIT11KSkiCSIhPXUmJiJcbiIhPXUmJiJcciIhPXUmJihsKz1lKHUpKTtlbHNleyJcXCI9PXUmJmkoIlxcIG5vdCBhbGxvd2VkIGluIHJlbGF0aXZlIHBhdGguIik7dmFyIEI7KEI9bltsLnRvTG93ZXJDYXNlKCldKSYmKGw9QiksIi4uIj09bD8odGhpcy5fcGF0aC5wb3AoKSwiLyIhPXUmJiJcXCIhPXUmJnRoaXMuX3BhdGgucHVzaCgiIikpOiIuIj09bCYmIi8iIT11JiYiXFwiIT11P3RoaXMuX3BhdGgucHVzaCgiIik6Ii4iIT1sJiYoImZpbGUiPT10aGlzLl9zY2hlbWUmJjA9PXRoaXMuX3BhdGgubGVuZ3RoJiYyPT1sLmxlbmd0aCYmcC50ZXN0KGxbMF0pJiYifCI9PWxbMV0mJihsPWxbMF0rIjoiKSx0aGlzLl9wYXRoLnB1c2gobCkpLGw9IiIsIj8iPT11Pyh0aGlzLl9xdWVyeT0iPyIsaj0icXVlcnkiKToiIyI9PXUmJih0aGlzLl9mcmFnbWVudD0iIyIsaj0iZnJhZ21lbnQiKX1icmVhaztjYXNlInF1ZXJ5IjpnfHwiIyIhPXU/byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fcXVlcnkrPWYodSkpOih0aGlzLl9mcmFnbWVudD0iIyIsaj0iZnJhZ21lbnQiKTticmVhaztjYXNlImZyYWdtZW50IjpvIT11JiYiCSIhPXUmJiJcbiIhPXUmJiJcciIhPXUmJih0aGlzLl9mcmFnbWVudCs9dSl9aysrfX1mdW5jdGlvbiBoKCl7dGhpcy5fc2NoZW1lPSIiLHRoaXMuX3NjaGVtZURhdGE9IiIsdGhpcy5fdXNlcm5hbWU9IiIsdGhpcy5fcGFzc3dvcmQ9bnVsbCx0aGlzLl9ob3N0PSIiLHRoaXMuX3BvcnQ9IiIsdGhpcy5fcGF0aD1bXSx0aGlzLl9xdWVyeT0iIix0aGlzLl9mcmFnbWVudD0iIix0aGlzLl9pc0ludmFsaWQ9ITEsdGhpcy5faXNSZWxhdGl2ZT0hMX1mdW5jdGlvbiBpKGEsYil7dm9pZCAwPT09Ynx8YiBpbnN0YW5jZW9mIGl8fChiPW5ldyBpKFN0cmluZyhiKSkpLHRoaXMuX3VybD1hLGguY2FsbCh0aGlzKTt2YXIgYz1hLnJlcGxhY2UoL15bIFx0XHJcblxmXSt8WyBcdFxyXG5cZl0rJC9nLCIiKTtnLmNhbGwodGhpcyxjLG51bGwsYil9dmFyIGo9ITE7aWYoIWEuZm9yY2VKVVJMKXRyeXt2YXIgaz1uZXcgVVJMKCJiIiwiaHR0cDovL2EiKTtqPSJodHRwOi8vYS9iIj09PWsuaHJlZn1jYXRjaChsKXt9aWYoIWope3ZhciBtPU9iamVjdC5jcmVhdGUobnVsbCk7bS5mdHA9MjEsbS5maWxlPTAsbS5nb3BoZXI9NzAsbS5odHRwPTgwLG0uaHR0cHM9NDQzLG0ud3M9ODAsbS53c3M9NDQzO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7blsiJTJlIl09Ii4iLG5bIi4lMmUiXT0iLi4iLG5bIiUyZS4iXT0iLi4iLG5bIiUyZSUyZSJdPSIuLiI7dmFyIG89dm9pZCAwLHA9L1thLXpBLVpdLyxxPS9bYS16QS1aMC05XCtcLVwuXS87aS5wcm90b3R5cGU9e2dldCBocmVmKCl7aWYodGhpcy5faXNJbnZhbGlkKXJldHVybiB0aGlzLl91cmw7dmFyIGE9IiI7cmV0dXJuKCIiIT10aGlzLl91c2VybmFtZXx8bnVsbCE9dGhpcy5fcGFzc3dvcmQpJiYoYT10aGlzLl91c2VybmFtZSsobnVsbCE9dGhpcy5fcGFzc3dvcmQ/IjoiK3RoaXMuX3Bhc3N3b3JkOiIiKSsiQCIpLHRoaXMucHJvdG9jb2wrKHRoaXMuX2lzUmVsYXRpdmU/Ii8vIithK3RoaXMuaG9zdDoiIikrdGhpcy5wYXRobmFtZSt0aGlzLl9xdWVyeSt0aGlzLl9mcmFnbWVudH0sc2V0IGhyZWYoYSl7aC5jYWxsKHRoaXMpLGcuY2FsbCh0aGlzLGEpfSxnZXQgcHJvdG9jb2woKXtyZXR1cm4gdGhpcy5fc2NoZW1lKyI6In0sc2V0IHByb3RvY29sKGEpe3RoaXMuX2lzSW52YWxpZHx8Zy5jYWxsKHRoaXMsYSsiOiIsInNjaGVtZSBzdGFydCIpfSxnZXQgaG9zdCgpe3JldHVybiB0aGlzLl9pc0ludmFsaWQ/IiI6dGhpcy5fcG9ydD90aGlzLl9ob3N0KyI6Iit0aGlzLl9wb3J0OnRoaXMuX2hvc3R9LHNldCBob3N0KGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJmcuY2FsbCh0aGlzLGEsImhvc3QiKX0sZ2V0IGhvc3RuYW1lKCl7cmV0dXJuIHRoaXMuX2hvc3R9LHNldCBob3N0bmFtZShhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZnLmNhbGwodGhpcyxhLCJob3N0bmFtZSIpfSxnZXQgcG9ydCgpe3JldHVybiB0aGlzLl9wb3J0fSxzZXQgcG9ydChhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZnLmNhbGwodGhpcyxhLCJwb3J0Iil9LGdldCBwYXRobmFtZSgpe3JldHVybiB0aGlzLl9pc0ludmFsaWQ/IiI6dGhpcy5faXNSZWxhdGl2ZT8iLyIrdGhpcy5fcGF0aC5qb2luKCIvIik6dGhpcy5fc2NoZW1lRGF0YX0sc2V0IHBhdGhuYW1lKGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJih0aGlzLl9wYXRoPVtdLGcuY2FsbCh0aGlzLGEsInJlbGF0aXZlIHBhdGggc3RhcnQiKSl9LGdldCBzZWFyY2goKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkfHwhdGhpcy5fcXVlcnl8fCI/Ij09dGhpcy5fcXVlcnk/IiI6dGhpcy5fcXVlcnl9LHNldCBzZWFyY2goYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmKHRoaXMuX3F1ZXJ5PSI/IiwiPyI9PWFbMF0mJihhPWEuc2xpY2UoMSkpLGcuY2FsbCh0aGlzLGEsInF1ZXJ5IikpfSxnZXQgaGFzaCgpe3JldHVybiB0aGlzLl9pc0ludmFsaWR8fCF0aGlzLl9mcmFnbWVudHx8IiMiPT10aGlzLl9mcmFnbWVudD8iIjp0aGlzLl9mcmFnbWVudH0sc2V0IGhhc2goYSl7dGhpcy5faXNJbnZhbGlkfHwodGhpcy5fZnJhZ21lbnQ9IiMiLCIjIj09YVswXSYmKGE9YS5zbGljZSgxKSksZy5jYWxsKHRoaXMsYSwiZnJhZ21lbnQiKSl9fTt2YXIgcj1hLlVSTDtyJiYoaS5jcmVhdGVPYmplY3RVUkw9ZnVuY3Rpb24oKXtyZXR1cm4gci5jcmVhdGVPYmplY3RVUkwuYXBwbHkocixhcmd1bWVudHMpfSxpLnJldm9rZU9iamVjdFVSTD1mdW5jdGlvbihhKXtyLnJldm9rZU9iamVjdFVSTChhKX0pLGEuVVJMPWl9fSh0aGlzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYj1hfHx7fSxkPTE7ZDxhcmd1bWVudHMubGVuZ3RoO2QrKyl7dmFyIGU9YXJndW1lbnRzW2RdO3RyeXtmb3IodmFyIGYgaW4gZSljKGYsZSxiKX1jYXRjaChnKXt9fXJldHVybiBifWZ1bmN0aW9uIGMoYSxiLGMpe3ZhciBlPWQoYixhKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxhLGUpfWZ1bmN0aW9uIGQoYSxiKXtpZihhKXt2YXIgYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYik7cmV0dXJuIGN8fGQoT2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGIpfX1GdW5jdGlvbi5wcm90b3R5cGUuYmluZHx8KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9Yy5zbGljZSgpO3JldHVybiBkLnB1c2guYXBwbHkoZCxhcmd1bWVudHMpLGIuYXBwbHkoYSxkKX19KSxhLm1peGluPWJ9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPSJzdHJpbmciPT10eXBlb2YgYT9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpOmEuY2xvbmVOb2RlKCEwKTtpZihkLmlubmVySFRNTD1iLGMpZm9yKHZhciBlIGluIGMpZC5zZXRBdHRyaWJ1dGUoZSxjW2VdKTtyZXR1cm4gZH12YXIgYz1ET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZCxkPURPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlO0RPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKyljLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspZC5jYWxsKHRoaXMsYXJndW1lbnRzW2FdKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oYSxiKXsxPT1hcmd1bWVudHMubGVuZ3RoJiYoYj0hdGhpcy5jb250YWlucyhhKSksYj90aGlzLmFkZChhKTp0aGlzLnJlbW92ZShhKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS5zd2l0Y2g9ZnVuY3Rpb24oYSxiKXthJiZ0aGlzLnJlbW92ZShhKSxiJiZ0aGlzLmFkZChiKX07dmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcyl9LGY9d2luZG93Lk5hbWVkTm9kZU1hcHx8d2luZG93Lk1vek5hbWVkQXR0ck1hcHx8e307aWYoTm9kZUxpc3QucHJvdG90eXBlLmFycmF5PWUsZi5wcm90b3R5cGUuYXJyYXk9ZSxIVE1MQ29sbGVjdGlvbi5wcm90b3R5cGUuYXJyYXk9ZSwhd2luZG93LnBlcmZvcm1hbmNlKXt2YXIgZz1EYXRlLm5vdygpO3dpbmRvdy5wZXJmb3JtYW5jZT17bm93OmZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCktZ319fXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7dmFyIGE9d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTtyZXR1cm4gYT9mdW5jdGlvbihiKXtyZXR1cm4gYShmdW5jdGlvbigpe2IocGVyZm9ybWFuY2Uubm93KCkpfSl9OmZ1bmN0aW9uKGEpe3JldHVybiB3aW5kb3cuc2V0VGltZW91dChhLDFlMy82MCl9fSgpKSx3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGEpe2NsZWFyVGltZW91dChhKX19KCkpO3ZhciBoPVtdLGk9ZnVuY3Rpb24oKXtoLnB1c2goYXJndW1lbnRzKX07d2luZG93LlBvbHltZXI9aSxhLmRlbGl2ZXJEZWNsYXJhdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gYS5kZWxpdmVyRGVjbGFyYXRpb25zPWZ1bmN0aW9uKCl7dGhyb3ciUG9zc2libGUgYXR0ZW1wdCB0byBsb2FkIFBvbHltZXIgdHdpY2UifSxofSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXt3aW5kb3cuUG9seW1lcj09PWkmJih3aW5kb3cuUG9seW1lcj1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoJ1lvdSB0cmllZCB0byB1c2UgcG9seW1lciB3aXRob3V0IGxvYWRpbmcgaXQgZmlyc3QuIFRvIGxvYWQgcG9seW1lciwgPGxpbmsgcmVsPSJpbXBvcnQiIGhyZWY9ImNvbXBvbmVudHMvcG9seW1lci9wb2x5bWVyLmh0bWwiPicpfSl9KSxhLmNyZWF0ZURPTT1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2EudGVtcGxhdGVDb250ZW50PWEudGVtcGxhdGVDb250ZW50fHxmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50fX0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXthPWF8fCh3aW5kb3cuSW5zcGVjdG9yPXt9KTt2YXIgYjt3aW5kb3cuc2luc3BlY3Q9ZnVuY3Rpb24oYSxkKXtifHwoYj13aW5kb3cub3BlbigiIiwiU2hhZG93RE9NIEluc3BlY3RvciIsbnVsbCwhMCksYi5kb2N1bWVudC53cml0ZShjKSxiLmFwaT17c2hhZG93aXplOnNoYWRvd2l6ZX0pLGYoYXx8d3JhcChkb2N1bWVudC5ib2R5KSxkKX07dmFyIGM9WyI8IURPQ1RZUEUgaHRtbD4iLCI8aHRtbD4iLCIgIDxoZWFkPiIsIiAgICA8dGl0bGU+U2hhZG93RE9NIEluc3BlY3RvcjwvdGl0bGU+IiwiICAgIDxzdHlsZT4iLCIgICAgICBib2R5IHsiLCIgICAgICB9IiwiICAgICAgcHJlIHsiLCcgICAgICAgIGZvbnQ6IDlwdCAiQ291cmllciBOZXciLCBtb25vc3BhY2U7JywiICAgICAgICBsaW5lLWhlaWdodDogMS41ZW07IiwiICAgICAgfSIsIiAgICAgIHRhZyB7IiwiICAgICAgICBjb2xvcjogcHVycGxlOyIsIiAgICAgIH0iLCIgICAgICB1bCB7IiwiICAgICAgICAgbWFyZ2luOiAwOyIsIiAgICAgICAgIHBhZGRpbmc6IDA7IiwiICAgICAgICAgbGlzdC1zdHlsZTogbm9uZTsiLCIgICAgICB9IiwiICAgICAgbGkgeyIsIiAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsiLCIgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFmMWYxOyIsIiAgICAgICAgIHBhZGRpbmc6IDRweCA2cHg7IiwiICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OyIsIiAgICAgICAgIG1hcmdpbi1yaWdodDogNHB4OyIsIiAgICAgIH0iLCIgICAgPC9zdHlsZT4iLCIgIDwvaGVhZD4iLCIgIDxib2R5PiIsJyAgICA8dWwgaWQ9ImNydW1icyI+JywiICAgIDwvdWw+IiwnICAgIDxkaXYgaWQ9InRyZWUiPjwvZGl2PicsIiAgPC9ib2R5PiIsIjwvaHRtbD4iXS5qb2luKCJcbiIpLGQ9W10sZT1mdW5jdGlvbigpe3ZhciBhPWIuZG9jdW1lbnQsYz1hLnF1ZXJ5U2VsZWN0b3IoIiNjcnVtYnMiKTtjLnRleHRDb250ZW50PSIiO2Zvcih2YXIgZSxnPTA7ZT1kW2ddO2crKyl7dmFyIGg9YS5jcmVhdGVFbGVtZW50KCJhIik7aC5ocmVmPSIjIixoLnRleHRDb250ZW50PWUubG9jYWxOYW1lLGguaWR4PWcsaC5vbmNsaWNrPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYjtkLmxlbmd0aD50aGlzLmlkeDspYj1kLnBvcCgpO2YoYi5zaGFkb3d8fGIsYiksYS5wcmV2ZW50RGVmYXVsdCgpfSxjLmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudCgibGkiKSkuYXBwZW5kQ2hpbGQoaCl9fSxmPWZ1bmN0aW9uKGEsYyl7dmFyIGY9Yi5kb2N1bWVudDtrPVtdO3ZhciBnPWN8fGE7ZC5wdXNoKGcpLGUoKSxmLmJvZHkucXVlcnlTZWxlY3RvcigiI3RyZWUiKS5pbm5lckhUTUw9IjxwcmU+IitqKGEsYS5jaGlsZE5vZGVzKSsiPC9wcmU+In0sZz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGg9e1NUWUxFOjEsU0NSSVBUOjEsIiNjb21tZW50IjoxLFRFTVBMQVRFOjF9LGk9ZnVuY3Rpb24oYSl7cmV0dXJuIGhbYS5ub2RlTmFtZV19LGo9ZnVuY3Rpb24oYSxiLGMpe2lmKGkoYSkpcmV0dXJuIiI7dmFyIGQ9Y3x8IiI7aWYoYS5sb2NhbE5hbWV8fDExPT1hLm5vZGVUeXBlKXt2YXIgZT1hLmxvY2FsTmFtZXx8InNoYWRvdy1yb290IixmPWQrbChhKTsiY29udGVudCI9PWUmJihiPWEuZ2V0RGlzdHJpYnV0ZWROb2RlcygpKSxmKz0iPGJyLz4iO3ZhciBoPWQrIiZuYnNwOyZuYnNwOyI7ZyhiLGZ1bmN0aW9uKGEpe2YrPWooYSxhLmNoaWxkTm9kZXMsaCl9KSxmKz1kLHticjoxfVtlXXx8KGYrPSI8dGFnPiZsdDsvIitlKyImZ3Q7PC90YWc+IixmKz0iPGJyLz4iKX1lbHNle3ZhciBrPWEudGV4dENvbnRlbnQudHJpbSgpO2Y9az9kKyciJytrKyciPGJyLz4nOiIifXJldHVybiBmfSxrPVtdLGw9ZnVuY3Rpb24oYSl7dmFyIGI9Ijx0YWc+Jmx0OyIsYz1hLmxvY2FsTmFtZXx8InNoYWRvdy1yb290IjtyZXR1cm4gYS53ZWJraXRTaGFkb3dSb290fHxhLnNoYWRvd1Jvb3Q/KGIrPScgPGJ1dHRvbiBpZHg9Iicray5sZW5ndGgrJyIgb25jbGljaz0iYXBpLnNoYWRvd2l6ZS5jYWxsKHRoaXMpIj4nK2MrIjwvYnV0dG9uPiIsay5wdXNoKGEpKTpiKz1jfHwic2hhZG93LXJvb3QiLGEuYXR0cmlidXRlcyYmZyhhLmF0dHJpYnV0ZXMsZnVuY3Rpb24oYSl7Yis9IiAiK2EubmFtZSsoYS52YWx1ZT8nPSInK2EudmFsdWUrJyInOiIiKX0pLGIrPSImZ3Q7PC90YWc+In07c2hhZG93aXplPWZ1bmN0aW9uKCl7dmFyIGE9TnVtYmVyKHRoaXMuYXR0cmlidXRlcy5pZHgudmFsdWUpLGI9a1thXTtiP2YoYi53ZWJraXRTaGFkb3dSb290fHxiLnNoYWRvd1Jvb3QsYik6KGNvbnNvbGUubG9nKCJiYWQgc2hhZG93aXplIG5vZGUiKSxjb25zb2xlLmRpcih0aGlzKSl9LGEub3V0cHV0PWp9KHdpbmRvdy5JbnNwZWN0b3IpLGZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTthLnRleHRDb250ZW50PSJib2R5IHt0cmFuc2l0aW9uOiBvcGFjaXR5IGVhc2UtaW4gMC4yczsgfSBcbmJvZHlbdW5yZXNvbHZlZF0ge29wYWNpdHk6IDA7IGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogaGlkZGVuOyB9IFxuIjt2YXIgYj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfShQbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBiPWJ8fFtdLGIubWFwfHwoYj1bYl0pLGEuYXBwbHkodGhpcyxiLm1hcChkKSl9ZnVuY3Rpb24gYyhhLGMsZCl7dmFyIGU7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm47Y2FzZSAxOmU9bnVsbDticmVhaztjYXNlIDI6ZT1jLmFwcGx5KHRoaXMpO2JyZWFrO2RlZmF1bHQ6ZT1iKGQsYyl9ZlthXT1lfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZbYV19ZnVuY3Rpb24gZShhLGMpe0hUTUxJbXBvcnRzLndoZW5JbXBvcnRzUmVhZHkoZnVuY3Rpb24oKXtiKGMsYSl9KX12YXIgZj17fTthLm1hcnNoYWw9ZCxhLm1vZHVsYXJpemU9YyxhLnVzaW5nPWV9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmLnRleHRDb250ZW50PWQrKyxlLnB1c2goYSl9ZnVuY3Rpb24gYygpe2Zvcig7ZS5sZW5ndGg7KWUuc2hpZnQoKSgpfXZhciBkPTAsZT1bXSxmPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcod2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fEpzTXV0YXRpb25PYnNlcnZlcikoYykub2JzZXJ2ZShmLHtjaGFyYWN0ZXJEYXRhOiEwfSksYS5lbmRPZk1pY3JvdGFzaz1ifShQbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCxlKXtyZXR1cm4gYS5yZXBsYWNlKGUsZnVuY3Rpb24oYSxlLGYsZyl7dmFyIGg9Zi5yZXBsYWNlKC9bIiddL2csIiIpO3JldHVybiBoPWMoYixoLGQpLGUrIiciK2grIiciK2d9KX1mdW5jdGlvbiBjKGEsYixjKXtpZihiJiYiLyI9PT1iWzBdKXJldHVybiBiO3ZhciBlPW5ldyBVUkwoYixhKTtyZXR1cm4gYz9lLmhyZWY6ZChlLmhyZWYpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9bmV3IFVSTChkb2N1bWVudC5iYXNlVVJJKSxjPW5ldyBVUkwoYSxiKTtyZXR1cm4gYy5ob3N0PT09Yi5ob3N0JiZjLnBvcnQ9PT1iLnBvcnQmJmMucHJvdG9jb2w9PT1iLnByb3RvY29sP2UoYixjKTphfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9YS5wYXRobmFtZSxkPWIucGF0aG5hbWUsZT1jLnNwbGl0KCIvIiksZj1kLnNwbGl0KCIvIik7ZS5sZW5ndGgmJmVbMF09PT1mWzBdOyllLnNoaWZ0KCksZi5zaGlmdCgpO2Zvcih2YXIgZz0wLGg9ZS5sZW5ndGgtMTtoPmc7ZysrKWYudW5zaGlmdCgiLi4iKTtyZXR1cm4gZi5qb2luKCIvIikrYi5zZWFyY2grYi5oYXNofXZhciBmPXtyZXNvbHZlRG9tOmZ1bmN0aW9uKGEsYil7Yj1ifHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSx0aGlzLnJlc29sdmVBdHRyaWJ1dGVzKGEsYiksdGhpcy5yZXNvbHZlU3R5bGVzKGEsYik7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJ0ZW1wbGF0ZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKWQuY29udGVudCYmdGhpcy5yZXNvbHZlRG9tKGQuY29udGVudCxiKX0scmVzb2x2ZVRlbXBsYXRlOmZ1bmN0aW9uKGEpe3RoaXMucmVzb2x2ZURvbShhLmNvbnRlbnQsYS5vd25lckRvY3VtZW50LmJhc2VVUkkpfSxyZXNvbHZlU3R5bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKXRoaXMucmVzb2x2ZVN0eWxlKGQsYil9LHJlc29sdmVTdHlsZTpmdW5jdGlvbihhLGIpe2I9Ynx8YS5vd25lckRvY3VtZW50LmJhc2VVUkksYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVDc3NUZXh0KGEudGV4dENvbnRlbnQsYil9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYT1iKGEsYyxkLGcpLGIoYSxjLGQsaCl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7YS5oYXNBdHRyaWJ1dGVzJiZhLmhhc0F0dHJpYnV0ZXMoKSYmdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoYSxiKTt2YXIgYz1hJiZhLnF1ZXJ5U2VsZWN0b3JBbGwoaik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoZCxiKX0scmVzb2x2ZUVsZW1lbnRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsZCl7ZD1kfHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIGYsaD1hLmF0dHJpYnV0ZXNbZV0saT1oJiZoLnZhbHVlO2kmJmkuc2VhcmNoKGspPDAmJihmPSJzdHlsZSI9PT1lP2IoaSxkLCExLGcpOmMoZCxpKSxoLnZhbHVlPWYpfSl9fSxnPS8odXJsXCgpKFteKV0qKShcKSkvZyxoPS8oQGltcG9ydFtcc10rKD8hdXJsXCgpKShbXjtdKikoOykvZyxpPVsiaHJlZiIsInNyYyIsImFjdGlvbiIsInN0eWxlIiwidXJsIl0saj0iWyIraS5qb2luKCJdLFsiKSsiXSIsaz0ie3suKn19IjthLnVybFJlc29sdmVyPWZ9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3UucHVzaChhKSx0fHwodD0hMCxxKGQpKX1mdW5jdGlvbiBjKGEpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSl8fGF9ZnVuY3Rpb24gZCgpe3Q9ITE7dmFyIGE9dTt1PVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7dmFyIGI9ITE7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEudGFrZVJlY29yZHMoKTtlKGEpLGMubGVuZ3RoJiYoYS5jYWxsYmFja18oYyxhKSxiPSEwKX0pLGImJmQoKX1mdW5jdGlvbiBlKGEpe2Eubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9cC5nZXQoYik7YyYmYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Iub2JzZXJ2ZXI9PT1hJiZiLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPWE7YztjPWMucGFyZW50Tm9kZSl7dmFyIGQ9cC5nZXQoYyk7aWYoZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXSxnPWYub3B0aW9ucztpZihjPT09YXx8Zy5zdWJ0cmVlKXt2YXIgaD1iKGcpO2gmJmYuZW5xdWV1ZShoKX19fX1mdW5jdGlvbiBnKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89Kyt2fWZ1bmN0aW9uIGgoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1bXSx0aGlzLnJlbW92ZWROb2Rlcz1bXSx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBpKGEpe3ZhciBiPW5ldyBoKGEudHlwZSxhLnRhcmdldCk7cmV0dXJuIGIuYWRkZWROb2Rlcz1hLmFkZGVkTm9kZXMuc2xpY2UoKSxiLnJlbW92ZWROb2Rlcz1hLnJlbW92ZWROb2Rlcy5zbGljZSgpLGIucHJldmlvdXNTaWJsaW5nPWEucHJldmlvdXNTaWJsaW5nLGIubmV4dFNpYmxpbmc9YS5uZXh0U2libGluZyxiLmF0dHJpYnV0ZU5hbWU9YS5hdHRyaWJ1dGVOYW1lLGIuYXR0cmlidXRlTmFtZXNwYWNlPWEuYXR0cmlidXRlTmFtZXNwYWNlLGIub2xkVmFsdWU9YS5vbGRWYWx1ZSxifWZ1bmN0aW9uIGooYSxiKXtyZXR1cm4gdz1uZXcgaChhLGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIHg/eDooeD1pKHcpLHgub2xkVmFsdWU9YSx4KX1mdW5jdGlvbiBsKCl7dz14PXZvaWQgMH1mdW5jdGlvbiBtKGEpe3JldHVybiBhPT09eHx8YT09PXd9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgV2Vha01hcCxxPXdpbmRvdy5tc1NldEltbWVkaWF0ZTtpZighcSl7dmFyIHI9W10scz1TdHJpbmcoTWF0aC5yYW5kb20oKSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKGEpe2lmKGEuZGF0YT09PXMpe3ZhciBiPXI7cj1bXSxiLmZvckVhY2goZnVuY3Rpb24oYSl7YSgpfSl9fSkscT1mdW5jdGlvbihhKXtyLnB1c2goYSksd2luZG93LnBvc3RNZXNzYWdlKHMsIioiKX19dmFyIHQ9ITEsdT1bXSx2PTA7Zy5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXtpZihhPWMoYSksIWIuY2hpbGRMaXN0JiYhYi5hdHRyaWJ1dGVzJiYhYi5jaGFyYWN0ZXJEYXRhfHxiLmF0dHJpYnV0ZU9sZFZhbHVlJiYhYi5hdHRyaWJ1dGVzfHxiLmF0dHJpYnV0ZUZpbHRlciYmYi5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYhYi5hdHRyaWJ1dGVzfHxiLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSYmIWIuY2hhcmFjdGVyRGF0YSl0aHJvdyBuZXcgU3ludGF4RXJyb3I7dmFyIGQ9cC5nZXQoYSk7ZHx8cC5zZXQoYSxkPVtdKTtmb3IodmFyIGUsZj0wO2Y8ZC5sZW5ndGg7ZisrKWlmKGRbZl0ub2JzZXJ2ZXI9PT10aGlzKXtlPWRbZl0sZS5yZW1vdmVMaXN0ZW5lcnMoKSxlLm9wdGlvbnM9YjticmVha31lfHwoZT1uZXcgbyh0aGlzLGEsYiksZC5wdXNoKGUpLHRoaXMubm9kZXNfLnB1c2goYSkpLGUuYWRkTGlzdGVuZXJzKCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1wLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107aWYoZC5vYnNlcnZlcj09PXRoaXMpe2QucmVtb3ZlTGlzdGVuZXJzKCksYi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19O3ZhciB3LHg7by5wcm90b3R5cGU9e2VucXVldWU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5vYnNlcnZlci5yZWNvcmRzXyxkPWMubGVuZ3RoO2lmKGMubGVuZ3RoPjApe3ZhciBlPWNbZC0xXSxmPW4oZSxhKTtpZihmKXJldHVybiB2b2lkKGNbZC0xXT1mKX1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWcsYS5NdXRhdGlvbk9ic2VydmVyfHwoYS5NdXRhdGlvbk9ic2VydmVyPWcpfSh0aGlzKSx3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe3ZhciBiPShhLnBhdGgsYS54aHIpLGM9YS5mbGFncyxkPWZ1bmN0aW9uKGEsYil7dGhpcy5jYWNoZT17fSx0aGlzLm9ubG9hZD1hLHRoaXMub25jb21wbGV0ZT1iLHRoaXMuaW5mbGlnaHQ9MCx0aGlzLnBlbmRpbmc9e319O2QucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0Kz1hLmxlbmd0aDtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspdGhpcy5yZXF1aXJlKGIpO3RoaXMuY2hlY2tEb25lKCl9LGFkZE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbmZsaWdodCsrLHRoaXMucmVxdWlyZShhKSx0aGlzLmNoZWNrRG9uZSgpfSxyZXF1aXJlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc3JjfHxhLmhyZWY7YS5fX25vZGVVcmw9Yix0aGlzLmRlZHVwZShiLGEpfHx0aGlzLmZldGNoKGIsYSl9LGRlZHVwZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMucGVuZGluZ1thXSlyZXR1cm4gdGhpcy5wZW5kaW5nW2FdLnB1c2goYiksITA7cmV0dXJuIHRoaXMuY2FjaGVbYV0/KHRoaXMub25sb2FkKGEsYix0aGlzLmNhY2hlW2FdKSx0aGlzLnRhaWwoKSwhMCk6KHRoaXMucGVuZGluZ1thXT1bYl0sITEpfSxmZXRjaDpmdW5jdGlvbihhLGQpe2lmKGMubG9hZCYmY29uc29sZS5sb2coImZldGNoIixhLGQpLGEubWF0Y2goL15kYXRhOi8pKXt2YXIgZT1hLnNwbGl0KCIsIiksZj1lWzBdLGc9ZVsxXTtnPWYuaW5kZXhPZigiO2Jhc2U2NCIpPi0xP2F0b2IoZyk6ZGVjb2RlVVJJQ29tcG9uZW50KGcpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnJlY2VpdmUoYSxkLG51bGwsZyl9LmJpbmQodGhpcyksMCl9ZWxzZXt2YXIgaD1mdW5jdGlvbihiLGMsZSl7dGhpcy5yZWNlaXZlKGEsZCxiLGMsZSl9LmJpbmQodGhpcyk7Yi5sb2FkKGEsaCl9fSxyZWNlaXZlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy5jYWNoZVthXT1kO3ZhciBmPXRoaXMucGVuZGluZ1thXTtlJiZlIT09YSYmKHRoaXMuY2FjaGVbZV09ZCxmPWYuY29uY2F0KHRoaXMucGVuZGluZ1tlXSkpO2Zvcih2YXIgZyxoPTAsaT1mLmxlbmd0aDtpPmgmJihnPWZbaF0pO2grKyl0aGlzLm9ubG9hZChlfHxhLGcsZCksdGhpcy50YWlsKCk7dGhpcy5wZW5kaW5nW2FdPW51bGwsZSYmZSE9PWEmJih0aGlzLnBlbmRpbmdbZV09bnVsbCl9LHRhaWw6ZnVuY3Rpb24oKXstLXRoaXMuaW5mbGlnaHQsdGhpcy5jaGVja0RvbmUoKX0sY2hlY2tEb25lOmZ1bmN0aW9uKCl7dGhpcy5pbmZsaWdodHx8dGhpcy5vbmNvbXBsZXRlKCl9fSxiPWJ8fHthc3luYzohMCxvazpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdGF0dXM+PTIwMCYmYS5zdGF0dXM8MzAwfHwzMDQ9PT1hLnN0YXR1c3x8MD09PWEuc3RhdHVzfSxsb2FkOmZ1bmN0aW9uKGMsZCxlKXt2YXIgZj1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuKGEuZmxhZ3MuZGVidWd8fGEuZmxhZ3MuYnVzdCkmJihjKz0iPyIrTWF0aC5yYW5kb20oKSksZi5vcGVuKCJHRVQiLGMsYi5hc3luYyksZi5hZGRFdmVudExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixmdW5jdGlvbigpe2lmKDQ9PT1mLnJlYWR5U3RhdGUpe3ZhciBhPWYuZ2V0UmVzcG9uc2VIZWFkZXIoIkxvY2F0aW9uIiksYz1udWxsO2lmKGEpdmFyIGM9Ii8iPT09YS5zdWJzdHIoMCwxKT9sb2NhdGlvbi5vcmlnaW4rYTpjO2QuY2FsbChlLCFiLm9rKGYpJiZmLGYucmVzcG9uc2V8fGYucmVzcG9uc2VUZXh0LGMpfX0pLGYuc2VuZCgpLGZ9LGxvYWREb2N1bWVudDpmdW5jdGlvbihhLGIsYyl7dGhpcy5sb2FkKGEsYixjKS5yZXNwb25zZVR5cGU9ImRvY3VtZW50In19LGEueGhyPWIsYS5Mb2FkZXI9ZH0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLnJlbD09PWd9ZnVuY3Rpb24gYyhhKXt2YXIgYj1kKGEpLGM9ImRhdGE6dGV4dC9qYXZhc2NyaXB0Ijt0cnl7Yys9IjtiYXNlNjQsIitidG9hKGIpfWNhdGNoKGUpe2MrPSI7Y2hhcnNldD11dGYtOCwiK2VuY29kZVVSSUNvbXBvbmVudChiKX1yZXR1cm4gY31mdW5jdGlvbiBkKGEpe3JldHVybiBhLnRleHRDb250ZW50K2UoYSl9ZnVuY3Rpb24gZShhKXt2YXIgYj1hLl9fbm9kZVVybDtpZighYil7Yj1hLm93bmVyRG9jdW1lbnQuYmFzZVVSSTt2YXIgYz0iWyIrTWF0aC5mbG9vcigxZTMqKE1hdGgucmFuZG9tKCkrMSkpKyJdIixkPWEudGV4dENvbnRlbnQubWF0Y2goL1BvbHltZXJcKFsnIl0oW14nIl0qKS8pO2M9ZCYmZFsxXXx8YyxiKz0iLyIrYysiLmpzIn1yZXR1cm4iXG4vLyMgc291cmNlVVJMPSIrYisiXG4ifWZ1bmN0aW9uIGYoYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGIudGV4dENvbnRlbnQ9YS50ZXh0Q29udGVudCxuLnJlc29sdmVVcmxzSW5TdHlsZShiKSxifXZhciBnPSJpbXBvcnQiLGg9YS5mbGFncyxpPS9UcmlkZW50Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGo9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP3dpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoZG9jdW1lbnQpOmRvY3VtZW50LGs9e2RvY3VtZW50U2VsZWN0b3JzOiJsaW5rW3JlbD0iK2crIl0iLGltcG9ydHNTZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2crIl0iLCJsaW5rW3JlbD1zdHlsZXNoZWV0XSIsInN0eWxlIiwic2NyaXB0Om5vdChbdHlwZV0pIiwnc2NyaXB0W3R5cGU9InRleHQvamF2YXNjcmlwdCJdJ10uam9pbigiLCIpLG1hcDp7bGluazoicGFyc2VMaW5rIixzY3JpcHQ6InBhcnNlU2NyaXB0IixzdHlsZToicGFyc2VTdHlsZSJ9LHBhcnNlTmV4dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubmV4dFRvUGFyc2UoKTthJiZ0aGlzLnBhcnNlKGEpfSxwYXJzZTpmdW5jdGlvbihhKXtpZih0aGlzLmlzUGFyc2VkKGEpKXJldHVybiB2b2lkKGgucGFyc2UmJmNvbnNvbGUubG9nKCJbJXNdIGlzIGFscmVhZHkgcGFyc2VkIixhLmxvY2FsTmFtZSkpO3ZhciBiPXRoaXNbdGhpcy5tYXBbYS5sb2NhbE5hbWVdXTtiJiYodGhpcy5tYXJrUGFyc2luZyhhKSxiLmNhbGwodGhpcyxhKSl9LG1hcmtQYXJzaW5nOmZ1bmN0aW9uKGEpe2gucGFyc2UmJmNvbnNvbGUubG9nKCJwYXJzaW5nIixhKSx0aGlzLnBhcnNpbmdFbGVtZW50PWF9LG1hcmtQYXJzaW5nQ29tcGxldGU6ZnVuY3Rpb24oYSl7YS5fX2ltcG9ydFBhcnNlZD0hMCxhLl9faW1wb3J0RWxlbWVudCYmKGEuX19pbXBvcnRFbGVtZW50Ll9faW1wb3J0UGFyc2VkPSEwKSx0aGlzLnBhcnNpbmdFbGVtZW50PW51bGwsaC5wYXJzZSYmY29uc29sZS5sb2coImNvbXBsZXRlZCIsYSl9LGludmFsaWRhdGVQYXJzZTpmdW5jdGlvbihhKXthJiZhLl9faW1wb3J0TGluayYmKGEuX19pbXBvcnRQYXJzZWQ9YS5fX2ltcG9ydExpbmsuX19pbXBvcnRQYXJzZWQ9ITEsdGhpcy5wYXJzZVNvb24oKSl9LHBhcnNlU29vbjpmdW5jdGlvbigpe3RoaXMuX3BhcnNlU29vbiYmY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fcGFyc2VEZWxheSk7dmFyIGE9dGhpczt0aGlzLl9wYXJzZVNvb249cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7YS5wYXJzZU5leHQoKX0pfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXtpZihIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vayYmSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2soYSksYS5pbXBvcnQuX19pbXBvcnRQYXJzZWQ9ITAsdGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGEpLGEuZGlzcGF0Y2hFdmVudChhLl9fcmVzb3VyY2U/bmV3IEN1c3RvbUV2ZW50KCJsb2FkIix7YnViYmxlczohMX0pOm5ldyBDdXN0b21FdmVudCgiZXJyb3IiLHtidWJibGVzOiExfSkpLGEuX19wZW5kaW5nKWZvcih2YXIgYjthLl9fcGVuZGluZy5sZW5ndGg7KWI9YS5fX3BlbmRpbmcuc2hpZnQoKSxiJiZiKHt0YXJnZXQ6YX0pO3RoaXMucGFyc2VOZXh0KCl9LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpP3RoaXMucGFyc2VJbXBvcnQoYSk6KGEuaHJlZj1hLmhyZWYsdGhpcy5wYXJzZUdlbmVyaWMoYSkpfSxwYXJzZVN0eWxlOmZ1bmN0aW9uKGEpe3ZhciBiPWE7YT1mKGEpLGEuX19pbXBvcnRFbGVtZW50PWIsdGhpcy5wYXJzZUdlbmVyaWMoYSl9LHBhcnNlR2VuZXJpYzpmdW5jdGlvbihhKXt0aGlzLnRyYWNrRWxlbWVudChhKSx0aGlzLmFkZEVsZW1lbnRUb0RvY3VtZW50KGEpfSxyb290SW1wb3J0Rm9yRWxlbWVudDpmdW5jdGlvbihhKXtmb3IodmFyIGI9YTtiLm93bmVyRG9jdW1lbnQuX19pbXBvcnRMaW5rOyliPWIub3duZXJEb2N1bWVudC5fX2ltcG9ydExpbms7cmV0dXJuIGJ9LGFkZEVsZW1lbnRUb0RvY3VtZW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnJvb3RJbXBvcnRGb3JFbGVtZW50KGEuX19pbXBvcnRFbGVtZW50fHxhKSxjPWIuX19pbnNlcnRlZEVsZW1lbnRzPWIuX19pbnNlcnRlZEVsZW1lbnRzfHwwLGQ9Yi5uZXh0RWxlbWVudFNpYmxpbmcsZT0wO2M+ZTtlKyspZD1kJiZkLm5leHRFbGVtZW50U2libGluZztiLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsZCl9LHRyYWNrRWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1mdW5jdGlvbihkKXtiJiZiKGQpLGMubWFya1BhcnNpbmdDb21wbGV0ZShhKSxjLnBhcnNlTmV4dCgpfTtpZihhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGQpLGEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQpLGkmJiJzdHlsZSI9PT1hLmxvY2FsTmFtZSl7dmFyIGU9ITE7aWYoLTE9PWEudGV4dENvbnRlbnQuaW5kZXhPZigiQGltcG9ydCIpKWU9ITA7ZWxzZSBpZihhLnNoZWV0KXtlPSEwO2Zvcih2YXIgZixnPWEuc2hlZXQuY3NzUnVsZXMsaD1nP2cubGVuZ3RoOjAsaj0wO2g+aiYmKGY9Z1tqXSk7aisrKWYudHlwZT09PUNTU1J1bGUuSU1QT1JUX1JVTEUmJihlPWUmJkJvb2xlYW4oZi5zdHlsZVNoZWV0KSl9ZSYmYS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgibG9hZCIse2J1YmJsZXM6ITF9KSl9fSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLl9faW1wb3J0RWxlbWVudD1iLGQuc3JjPWIuc3JjP2Iuc3JjOmMoYiksYS5jdXJyZW50U2NyaXB0PWIsdGhpcy50cmFja0VsZW1lbnQoZCxmdW5jdGlvbigpe2QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSxhLmN1cnJlbnRTY3JpcHQ9bnVsbH0pLHRoaXMuYWRkRWxlbWVudFRvRG9jdW1lbnQoZCl9LG5leHRUb1BhcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMucGFyc2luZ0VsZW1lbnQmJnRoaXMubmV4dFRvUGFyc2VJbkRvYyhqKX0sbmV4dFRvUGFyc2VJbkRvYzpmdW5jdGlvbihhLGMpe2Zvcih2YXIgZCxlPWEucXVlcnlTZWxlY3RvckFsbCh0aGlzLnBhcnNlU2VsZWN0b3JzRm9yTm9kZShhKSksZj0wLGc9ZS5sZW5ndGg7Zz5mJiYoZD1lW2ZdKTtmKyspaWYoIXRoaXMuaXNQYXJzZWQoZCkpcmV0dXJuIHRoaXMuaGFzUmVzb3VyY2UoZCk/YihkKT90aGlzLm5leHRUb1BhcnNlSW5Eb2MoZC5pbXBvcnQsZCk6ZDp2b2lkIDA7cmV0dXJuIGN9LHBhcnNlU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGE7cmV0dXJuIGI9PT1qP3RoaXMuZG9jdW1lbnRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzU2VsZWN0b3JzfSxpc1BhcnNlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5fX2ltcG9ydFBhcnNlZH0saGFzUmVzb3VyY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSkmJiFhLmltcG9ydD8hMTohMH19LGw9Lyh1cmxcKCkoW14pXSopKFwpKS9nLG09LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLG49e3Jlc29sdmVVcmxzSW5TdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQsYz1iLmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVVcmxzSW5Dc3NUZXh0KGEudGV4dENvbnRlbnQsYyksYX0scmVzb2x2ZVVybHNJbkNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlcGxhY2VVcmxzKGEsYixsKTtyZXR1cm4gYz10aGlzLnJlcGxhY2VVcmxzKGMsYixtKX0scmVwbGFjZVVybHM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnJlcGxhY2UoYyxmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1kLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGIuaHJlZj1mLGY9Yi5ocmVmLGMrIiciK2YrIiciK2V9KX19O2EucGFyc2VyPWssYS5wYXRoPW4sYS5pc0lFPWl9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBjKGEscSl9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGQoYSxiKXt2YXIgYz1hO2MgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KHEpKSxjLl9VUkw9Yjt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtkLnNldEF0dHJpYnV0ZSgiaHJlZiIsYiksYy5iYXNlVVJJfHwoYy5iYXNlVVJJPWIpO3ZhciBlPWMuY3JlYXRlRWxlbWVudCgibWV0YSIpO3JldHVybiBlLnNldEF0dHJpYnV0ZSgiY2hhcnNldCIsInV0Zi04IiksYy5oZWFkLmFwcGVuZENoaWxkKGUpLGMuaGVhZC5hcHBlbmRDaGlsZChkKSxhIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjLmJvZHkuaW5uZXJIVE1MPWEpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31mdW5jdGlvbiBlKGEsYil7Yj1ifHxyLGcoZnVuY3Rpb24oKXtoKGEsYil9LGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuImNvbXBsZXRlIj09PWEucmVhZHlTdGF0ZXx8YS5yZWFkeVN0YXRlPT09eX1mdW5jdGlvbiBnKGEsYil7aWYoZihiKSlhJiZhKCk7ZWxzZXt2YXIgYz1mdW5jdGlvbigpeygiY29tcGxldGUiPT09Yi5yZWFkeVN0YXRlfHxiLnJlYWR5U3RhdGU9PT15KSYmKGIucmVtb3ZlRXZlbnRMaXN0ZW5lcih6LGMpLGcoYSxiKSl9O2IuYWRkRXZlbnRMaXN0ZW5lcih6LGMpfX1mdW5jdGlvbiBoKGEsYil7ZnVuY3Rpb24gYygpe2Y9PWcmJmEmJmEoKX1mdW5jdGlvbiBkKCl7ZisrLGMoKX12YXIgZT1iLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxmPTAsZz1lLmxlbmd0aDtpZihnKWZvcih2YXIgaCxqPTA7Zz5qJiYoaD1lW2pdKTtqKyspaShoKT9kLmNhbGwoaCk6KGguYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZCksaC5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsZCkpO2Vsc2UgYygpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIG8/YS5pbXBvcnQmJiJsb2FkaW5nIiE9PWEuaW1wb3J0LnJlYWR5U3RhdGV8fGEuX19sb2FkZWQ6YS5fX2ltcG9ydFBhcnNlZH1mdW5jdGlvbiBqKGEpe2Zvcih2YXIgYixjPTAsZD1hLmxlbmd0aDtkPmMmJihiPWFbY10pO2MrKylrKGIpJiZsKGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJiJpbXBvcnQiPT09YS5yZWx9ZnVuY3Rpb24gbChhKXt2YXIgYj1hLmltcG9ydDtiP20oe3RhcmdldDphfSk6KGEuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsbSksYS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsbSkpfWZ1bmN0aW9uIG0oYSl7YS50YXJnZXQuX19sb2FkZWQ9ITB9dmFyIG49ImltcG9ydCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksbz1uLHA9YS5mbGFncyxxPSJpbXBvcnQiLHI9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7aWYobyl2YXIgcz17fTtlbHNlIHZhciB0PShhLnhocixhLkxvYWRlciksdT1hLnBhcnNlcixzPXtkb2N1bWVudHM6e30sZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzOiJsaW5rW3JlbD0iK3ErIl0iLGltcG9ydHNQcmVsb2FkU2VsZWN0b3JzOlsibGlua1tyZWw9IitxKyJdIl0uam9pbigiLCIpLGxvYWROb2RlOmZ1bmN0aW9uKGEpe3YuYWRkTm9kZShhKX0sbG9hZFN1YnRyZWU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXJzaGFsTm9kZXMoYSk7di5hZGROb2RlcyhiKX0sbWFyc2hhbE5vZGVzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5sb2FkU2VsZWN0b3JzRm9yTm9kZShhKSl9LGxvYWRTZWxlY3RvcnNGb3JOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudHx8YTtyZXR1cm4gYj09PXI/dGhpcy5kb2N1bWVudFByZWxvYWRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzUHJlbG9hZFNlbGVjdG9yc30sbG9hZGVkOmZ1bmN0aW9uKGEsYyxlKXtpZihwLmxvYWQmJmNvbnNvbGUubG9nKCJsb2FkZWQiLGEsYyksYy5fX3Jlc291cmNlPWUsYihjKSl7dmFyIGY9dGhpcy5kb2N1bWVudHNbYV07Znx8KGY9ZChlLGEpLGYuX19pbXBvcnRMaW5rPWMsdGhpcy5ib290RG9jdW1lbnQoZiksdGhpcy5kb2N1bWVudHNbYV09ZiksYy5pbXBvcnQ9Zn11LnBhcnNlTmV4dCgpfSxib290RG9jdW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5sb2FkU3VidHJlZShhKSx0aGlzLm9ic2VydmUoYSksdS5wYXJzZU5leHQoKX0sbG9hZGVkQWxsOmZ1bmN0aW9uKCl7dS5wYXJzZU5leHQoKX19LHY9bmV3IHQocy5sb2FkZWQuYmluZChzKSxzLmxvYWRlZEFsbC5iaW5kKHMpKTt2YXIgdz17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEhUTUxJbXBvcnRzLmN1cnJlbnRTY3JpcHR8fGRvY3VtZW50LmN1cnJlbnRTY3JpcHR9LGNvbmZpZ3VyYWJsZTohMH07aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCJfY3VycmVudFNjcmlwdCIsdyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9jdXJyZW50U2NyaXB0Iix3KSwhZG9jdW1lbnQuYmFzZVVSSSl7dmFyIHg9e2dldDpmdW5jdGlvbigpe3JldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZn0sY29uZmlndXJhYmxlOiEwfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsImJhc2VVUkkiLHgpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJiYXNlVVJJIix4KX12YXIgeT1IVE1MSW1wb3J0cy5pc0lFPyJjb21wbGV0ZSI6ImludGVyYWN0aXZlIix6PSJyZWFkeXN0YXRlY2hhbmdlIjtvJiZuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspYi5hZGRlZE5vZGVzJiZqKGIuYWRkZWROb2Rlcyl9KS5vYnNlcnZlKGRvY3VtZW50LmhlYWQse2NoaWxkTGlzdDohMH0pLGEuaGFzTmF0aXZlPW4sYS51c2VOYXRpdmU9byxhLmltcG9ydGVyPXMsYS5JTVBPUlRfTElOS19UWVBFPXEsYS5pc0ltcG9ydExvYWRlZD1pLGEuaW1wb3J0TG9hZGVyPXYsYS53aGVuUmVhZHk9ZSxhLndoZW5JbXBvcnRzUmVhZHk9ZX0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYixkPTAsZT1hLmxlbmd0aDtlPmQmJihiPWFbZF0pO2QrKykiY2hpbGRMaXN0Ij09PWIudHlwZSYmYi5hZGRlZE5vZGVzLmxlbmd0aCYmYyhiLmFkZGVkTm9kZXMpfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiLGUsZz0wLGg9YS5sZW5ndGg7aD5nJiYoZT1hW2ddKTtnKyspYj1ifHxlLm93bmVyRG9jdW1lbnQsZChlKSYmZi5sb2FkTm9kZShlKSxlLmNoaWxkcmVuJiZlLmNoaWxkcmVuLmxlbmd0aCYmYyhlLmNoaWxkcmVuKX1mdW5jdGlvbiBkKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZSYmZy5jYWxsKGEsZi5sb2FkU2VsZWN0b3JzRm9yTm9kZShhKSl9ZnVuY3Rpb24gZShhKXtoLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX12YXIgZj0oYS5JTVBPUlRfTElOS19UWVBFLGEuaW1wb3J0ZXIpLGc9KGEucGFyc2VyLEhUTUxFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IpLGg9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoYik7YS5vYnNlcnZlPWUsZi5vYnNlcnZlPWV9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5pbXBvcnRlci5ib290RG9jdW1lbnQoYil9ImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGMuaW5pdEV2ZW50KGEsYi5idWJibGVzPT09ITE/ITE6ITAsYi5jYW5jZWxhYmxlPT09ITE/ITE6ITAsYi5kZXRhaWwpLGN9KTt2YXIgYj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe0hUTUxJbXBvcnRzLnJlYWR5PSEwLEhUTUxJbXBvcnRzLnJlYWR5VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxiLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJIVE1MSW1wb3J0c0xvYWRlZCIse2J1YmJsZXM6ITB9KSl9KSxIVE1MSW1wb3J0cy51c2VOYXRpdmV8fCgiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8ImludGVyYWN0aXZlIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJiF3aW5kb3cuYXR0YWNoRXZlbnQ/YSgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEpKX0oKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxjLGQpe3ZhciBlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7aWYoIWUpZm9yKGU9YS5maXJzdENoaWxkO2UmJmUubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspZT1lLm5leHRTaWJsaW5nO2Zvcig7ZTspYyhlLGQpIT09ITAmJmIoZSxjLGQpLGU9ZS5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhhLGIpe2Zvcih2YXIgYz1hLnNoYWRvd1Jvb3Q7YzspZChjLGIpLGM9Yy5vbGRlclNoYWRvd1Jvb3R9ZnVuY3Rpb24gZChhLGQpe2IoYSxmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8hMDp2b2lkIGMoYSxkKX0pLGMoYSxkKX1mdW5jdGlvbiBlKGEpe3JldHVybiBoKGEpPyhpKGEpLCEwKTp2b2lkIGwoYSl9ZnVuY3Rpb24gZihhKXtkKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSk/ITA6dm9pZCAwfSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gZShhKXx8ZihhKX1mdW5jdGlvbiBoKGIpe2lmKCFiLl9fdXBncmFkZWRfXyYmYi5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgiaXMiKXx8Yi5sb2NhbE5hbWUsZD1hLnJlZ2lzdHJ5W2NdO2lmKGQpcmV0dXJuIEEuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpLCEwfX1mdW5jdGlvbiBpKGEpe2woYSkscihhKSYmZChhLGZ1bmN0aW9uKGEpe2woYSl9KX1mdW5jdGlvbiBqKGEpe2lmKEUucHVzaChhKSwhRCl7RD0hMDt2YXIgYj13aW5kb3cuUGxhdGZvcm0mJndpbmRvdy5QbGF0Zm9ybS5lbmRPZk1pY3JvdGFza3x8c2V0VGltZW91dDtiKGspfX1mdW5jdGlvbiBrKCl7RD0hMTtmb3IodmFyIGEsYj1FLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWEoKTtFPVtdfWZ1bmN0aW9uIGwoYSl7Qz9qKGZ1bmN0aW9uKCl7bShhKX0pOm0oYSl9ZnVuY3Rpb24gbShhKXsoYS5hdHRhY2hlZENhbGxiYWNrfHxhLmRldGFjaGVkQ2FsbGJhY2t8fGEuX191cGdyYWRlZF9fJiZBLmRvbSkmJihBLmRvbSYmY29uc29sZS5ncm91cCgiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSkscihhKSYmKGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKSsxLGEuX19pbnNlcnRlZDwxJiYoYS5fX2luc2VydGVkPTEpLGEuX19pbnNlcnRlZD4xP0EuZG9tJiZjb25zb2xlLndhcm4oImluc2VydGVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuYXR0YWNoZWRDYWxsYmFjayYmKEEuZG9tJiZjb25zb2xlLmxvZygiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSksYS5hdHRhY2hlZENhbGxiYWNrKCkpKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpKQp9ZnVuY3Rpb24gbihhKXtvKGEpLGQoYSxmdW5jdGlvbihhKXtvKGEpfSl9ZnVuY3Rpb24gbyhhKXtDP2ooZnVuY3Rpb24oKXtwKGEpfSk6cChhKX1mdW5jdGlvbiBwKGEpeyhhLmF0dGFjaGVkQ2FsbGJhY2t8fGEuZGV0YWNoZWRDYWxsYmFja3x8YS5fX3VwZ3JhZGVkX18mJkEuZG9tKSYmKEEuZG9tJiZjb25zb2xlLmdyb3VwKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUpLHIoYSl8fChhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCktMSxhLl9faW5zZXJ0ZWQ+MCYmKGEuX19pbnNlcnRlZD0wKSxhLl9faW5zZXJ0ZWQ8MD9BLmRvbSYmY29uc29sZS53YXJuKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuZGV0YWNoZWRDYWxsYmFjayYmYS5kZXRhY2hlZENhbGxiYWNrKCkpLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCkpfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD9TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSk6YX1mdW5jdGlvbiByKGEpe2Zvcih2YXIgYj1hLGM9cShkb2N1bWVudCk7Yjspe2lmKGI9PWMpcmV0dXJuITA7Yj1iLnBhcmVudE5vZGV8fGIuaG9zdH19ZnVuY3Rpb24gcyhhKXtpZihhLnNoYWRvd1Jvb3QmJiFhLnNoYWRvd1Jvb3QuX193YXRjaGVkKXtBLmRvbSYmY29uc29sZS5sb2coIndhdGNoaW5nIHNoYWRvdy1yb290IGZvcjogIixhLmxvY2FsTmFtZSk7Zm9yKHZhciBiPWEuc2hhZG93Um9vdDtiOyl0KGIpLGI9Yi5vbGRlclNoYWRvd1Jvb3R9fWZ1bmN0aW9uIHQoYSl7YS5fX3dhdGNoZWR8fCh3KGEpLGEuX193YXRjaGVkPSEwKX1mdW5jdGlvbiB1KGEpe2lmKEEuZG9tKXt2YXIgYj1hWzBdO2lmKGImJiJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMmJmIuYWRkZWROb2Rlcyl7Zm9yKHZhciBjPWIuYWRkZWROb2Rlc1swXTtjJiZjIT09ZG9jdW1lbnQmJiFjLmhvc3Q7KWM9Yy5wYXJlbnROb2RlO3ZhciBkPWMmJihjLlVSTHx8Yy5fVVJMfHxjLmhvc3QmJmMuaG9zdC5sb2NhbE5hbWUpfHwiIjtkPWQuc3BsaXQoIi8/Iikuc2hpZnQoKS5zcGxpdCgiLyIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoIm11dGF0aW9ucyAoJWQpIFslc10iLGEubGVuZ3RoLGR8fCIiKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7ImNoaWxkTGlzdCI9PT1hLnR5cGUmJihHKGEuYWRkZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmZyhhKX0pLEcoYS5yZW1vdmVkTm9kZXMsZnVuY3Rpb24oYSl7YS5sb2NhbE5hbWUmJm4oYSl9KSl9KSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHYoKXt1KEYudGFrZVJlY29yZHMoKSksaygpfWZ1bmN0aW9uIHcoYSl7Ri5vYnNlcnZlKGEse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9ZnVuY3Rpb24geChhKXt3KGEpfWZ1bmN0aW9uIHkoYSl7QS5kb20mJmNvbnNvbGUuZ3JvdXAoInVwZ3JhZGVEb2N1bWVudDogIixhLmJhc2VVUkkuc3BsaXQoIi8iKS5wb3AoKSksZyhhKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHooYSl7YT1xKGEpO2Zvcih2YXIgYixjPWEucXVlcnlTZWxlY3RvckFsbCgibGlua1tyZWw9IitCKyJdIiksZD0wLGU9Yy5sZW5ndGg7ZT5kJiYoYj1jW2RdKTtkKyspYi5pbXBvcnQmJmIuaW1wb3J0Ll9fcGFyc2VkJiZ6KGIuaW1wb3J0KTt5KGEpfXZhciBBPXdpbmRvdy5sb2dGbGFnc3x8e30sQj13aW5kb3cuSFRNTEltcG9ydHM/SFRNTEltcG9ydHMuSU1QT1JUX0xJTktfVFlQRToibm9uZSIsQz0hd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyPT09d2luZG93LkpzTXV0YXRpb25PYnNlcnZlcjthLmhhc1BvbHlmaWxsTXV0YXRpb25zPUM7dmFyIEQ9ITEsRT1bXSxGPW5ldyBNdXRhdGlvbk9ic2VydmVyKHUpLEc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLklNUE9SVF9MSU5LX1RZUEU9QixhLndhdGNoU2hhZG93PXMsYS51cGdyYWRlRG9jdW1lbnRUcmVlPXosYS51cGdyYWRlQWxsPWcsYS51cGdyYWRlU3VidHJlZT1mLGEuaW5zZXJ0ZWROb2RlPWksYS5vYnNlcnZlRG9jdW1lbnQ9eCxhLnVwZ3JhZGVEb2N1bWVudD15LGEudGFrZVJlY29yZHM9dn0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIsZyl7dmFyIGg9Z3x8e307aWYoIWIpdGhyb3cgbmV3IEVycm9yKCJkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ6IGZpcnN0IGFyZ3VtZW50IGBuYW1lYCBtdXN0IG5vdCBiZSBlbXB0eSIpO2lmKGIuaW5kZXhPZigiLSIpPDApdGhyb3cgbmV3IEVycm9yKCJkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ6IGZpcnN0IGFyZ3VtZW50ICgnbmFtZScpIG11c3QgY29udGFpbiBhIGRhc2ggKCctJykuIEFyZ3VtZW50IHByb3ZpZGVkIHdhcyAnIitTdHJpbmcoYikrIicuIik7aWYoYyhiKSl0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byBleGVjdXRlICdyZWdpc3RlckVsZW1lbnQnIG9uICdEb2N1bWVudCc6IFJlZ2lzdHJhdGlvbiBmYWlsZWQgZm9yIHR5cGUgJyIrU3RyaW5nKGIpKyInLiBUaGUgdHlwZSBuYW1lIGlzIGludmFsaWQuIik7aWYobihiKSl0aHJvdyBuZXcgRXJyb3IoIkR1cGxpY2F0ZURlZmluaXRpb25FcnJvcjogYSB0eXBlIHdpdGggbmFtZSAnIitTdHJpbmcoYikrIicgaXMgYWxyZWFkeSByZWdpc3RlcmVkIik7aWYoIWgucHJvdG90eXBlKXRocm93IG5ldyBFcnJvcigiT3B0aW9ucyBtaXNzaW5nIHJlcXVpcmVkIHByb3RvdHlwZSBwcm9wZXJ0eSIpO3JldHVybiBoLl9fbmFtZT1iLnRvTG93ZXJDYXNlKCksaC5saWZlY3ljbGU9aC5saWZlY3ljbGV8fHt9LGguYW5jZXN0cnk9ZChoLmV4dGVuZHMpLGUoaCksZihoKSxsKGgucHJvdG90eXBlKSxvKGguX19uYW1lLGgpLGguY3Rvcj1wKGgpLGguY3Rvci5wcm90b3R5cGU9aC5wcm90b3R5cGUsaC5wcm90b3R5cGUuY29uc3RydWN0b3I9aC5jdG9yLGEucmVhZHkmJmEudXBncmFkZURvY3VtZW50VHJlZShkb2N1bWVudCksaC5jdG9yfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiPTA7Yjx5Lmxlbmd0aDtiKyspaWYoYT09PXlbYl0pcmV0dXJuITB9ZnVuY3Rpb24gZChhKXt2YXIgYj1uKGEpO3JldHVybiBiP2QoYi5leHRlbmRzKS5jb25jYXQoW2JdKTpbXX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYixjPWEuZXh0ZW5kcyxkPTA7Yj1hLmFuY2VzdHJ5W2RdO2QrKyljPWIuaXMmJmIudGFnO2EudGFnPWN8fGEuX19uYW1lLGMmJihhLmlzPWEuX19uYW1lKX1mdW5jdGlvbiBmKGEpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgYj1IVE1MRWxlbWVudC5wcm90b3R5cGU7aWYoYS5pcyl7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhLnRhZyksZD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYyk7ZD09PWEucHJvdG90eXBlJiYoYj1kKX1mb3IodmFyIGUsZj1hLnByb3RvdHlwZTtmJiZmIT09YjspZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZiksZi5fX3Byb3RvX189ZSxmPWU7YS5uYXRpdmU9Yn19ZnVuY3Rpb24gZyhhKXtyZXR1cm4gaChCKGEudGFnKSxhKX1mdW5jdGlvbiBoKGIsYyl7cmV0dXJuIGMuaXMmJmIuc2V0QXR0cmlidXRlKCJpcyIsYy5pcyksaShiLGMpLGIuX191cGdyYWRlZF9fPSEwLGsoYiksYS5pbnNlcnRlZE5vZGUoYiksYS51cGdyYWRlU3VidHJlZShiKSxifWZ1bmN0aW9uIGkoYSxiKXtPYmplY3QuX19wcm90b19fP2EuX19wcm90b19fPWIucHJvdG90eXBlOihqKGEsYi5wcm90b3R5cGUsYi5uYXRpdmUpLGEuX19wcm90b19fPWIucHJvdG90eXBlKX1mdW5jdGlvbiBqKGEsYixjKXtmb3IodmFyIGQ9e30sZT1iO2UhPT1jJiZlIT09SFRNTEVsZW1lbnQucHJvdG90eXBlOyl7Zm9yKHZhciBmLGc9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSksaD0wO2Y9Z1toXTtoKyspZFtmXXx8KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGYsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGYpKSxkW2ZdPTEpO2U9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfX1mdW5jdGlvbiBrKGEpe2EuY3JlYXRlZENhbGxiYWNrJiZhLmNyZWF0ZWRDYWxsYmFjaygpfWZ1bmN0aW9uIGwoYSl7aWYoIWEuc2V0QXR0cmlidXRlLl9wb2x5ZmlsbGVkKXt2YXIgYj1hLnNldEF0dHJpYnV0ZTthLnNldEF0dHJpYnV0ZT1mdW5jdGlvbihhLGMpe20uY2FsbCh0aGlzLGEsYyxiKX07dmFyIGM9YS5yZW1vdmVBdHRyaWJ1dGU7YS5yZW1vdmVBdHRyaWJ1dGU9ZnVuY3Rpb24oYSl7bS5jYWxsKHRoaXMsYSxudWxsLGMpfSxhLnNldEF0dHJpYnV0ZS5fcG9seWZpbGxlZD0hMH19ZnVuY3Rpb24gbShhLGIsYyl7YT1hLnRvTG93ZXJDYXNlKCk7dmFyIGQ9dGhpcy5nZXRBdHRyaWJ1dGUoYSk7Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGU9dGhpcy5nZXRBdHRyaWJ1dGUoYSk7dGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2smJmUhPT1kJiZ0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhLGQsZSl9ZnVuY3Rpb24gbihhKXtyZXR1cm4gYT96W2EudG9Mb3dlckNhc2UoKV06dm9pZCAwfWZ1bmN0aW9uIG8oYSxiKXt6W2FdPWJ9ZnVuY3Rpb24gcChhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZyhhKX19ZnVuY3Rpb24gcShhLGIsYyl7cmV0dXJuIGE9PT1BP3IoYixjKTpDKGEsYil9ZnVuY3Rpb24gcihhLGIpe3ZhciBjPW4oYnx8YSk7aWYoYyl7aWYoYT09Yy50YWcmJmI9PWMuaXMpcmV0dXJuIG5ldyBjLmN0b3I7aWYoIWImJiFjLmlzKXJldHVybiBuZXcgYy5jdG9yfWlmKGIpe3ZhciBkPXIoYSk7cmV0dXJuIGQuc2V0QXR0cmlidXRlKCJpcyIsYiksZH12YXIgZD1CKGEpO3JldHVybiBhLmluZGV4T2YoIi0iKT49MCYmaShkLEhUTUxFbGVtZW50KSxkfWZ1bmN0aW9uIHMoYSl7aWYoIWEuX191cGdyYWRlZF9fJiZhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKCJpcyIpLGM9bihifHxhLmxvY2FsTmFtZSk7aWYoYyl7aWYoYiYmYy50YWc9PWEubG9jYWxOYW1lKXJldHVybiBoKGEsYyk7aWYoIWImJiFjLmV4dGVuZHMpcmV0dXJuIGgoYSxjKX19fWZ1bmN0aW9uIHQoYil7dmFyIGM9RC5jYWxsKHRoaXMsYik7cmV0dXJuIGEudXBncmFkZUFsbChjKSxjfWF8fChhPXdpbmRvdy5DdXN0b21FbGVtZW50cz17ZmxhZ3M6e319KTt2YXIgdT1hLmZsYWdzLHY9Qm9vbGVhbihkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQpLHc9IXUucmVnaXN0ZXImJnYmJiF3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJighd2luZG93LkhUTUxJbXBvcnRzfHxIVE1MSW1wb3J0cy51c2VOYXRpdmUpO2lmKHcpe3ZhciB4PWZ1bmN0aW9uKCl7fTthLnJlZ2lzdHJ5PXt9LGEudXBncmFkZUVsZW1lbnQ9eCxhLndhdGNoU2hhZG93PXgsYS51cGdyYWRlPXgsYS51cGdyYWRlQWxsPXgsYS51cGdyYWRlU3VidHJlZT14LGEub2JzZXJ2ZURvY3VtZW50PXgsYS51cGdyYWRlRG9jdW1lbnQ9eCxhLnVwZ3JhZGVEb2N1bWVudFRyZWU9eCxhLnRha2VSZWNvcmRzPXgsYS5yZXNlcnZlZFRhZ0xpc3Q9W119ZWxzZXt2YXIgeT1bImFubm90YXRpb24teG1sIiwiY29sb3ItcHJvZmlsZSIsImZvbnQtZmFjZSIsImZvbnQtZmFjZS1zcmMiLCJmb250LWZhY2UtdXJpIiwiZm9udC1mYWNlLWZvcm1hdCIsImZvbnQtZmFjZS1uYW1lIiwibWlzc2luZy1nbHlwaCJdLHo9e30sQT0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsQj1kb2N1bWVudC5jcmVhdGVFbGVtZW50LmJpbmQoZG9jdW1lbnQpLEM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TLmJpbmQoZG9jdW1lbnQpLEQ9Tm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlO2RvY3VtZW50LnJlZ2lzdGVyRWxlbWVudD1iLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQ9cixkb2N1bWVudC5jcmVhdGVFbGVtZW50TlM9cSxOb2RlLnByb3RvdHlwZS5jbG9uZU5vZGU9dCxhLnJlZ2lzdHJ5PXosYS51cGdyYWRlPXN9dmFyIEU7RT1PYmplY3QuX19wcm90b19ffHx3P2Z1bmN0aW9uKGEsYil7cmV0dXJuIGEgaW5zdGFuY2VvZiBifTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hO2M7KXtpZihjPT09Yi5wcm90b3R5cGUpcmV0dXJuITA7Yz1jLl9fcHJvdG9fX31yZXR1cm4hMX0sYS5pbnN0YW5jZW9mPUUsYS5yZXNlcnZlZFRhZ0xpc3Q9eSxkb2N1bWVudC5yZWdpc3Rlcj1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQsYS5oYXNOYXRpdmU9dixhLnVzZU5hdGl2ZT13fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWN9dmFyIGM9YS5JTVBPUlRfTElOS19UWVBFLGQ9e3NlbGVjdG9yczpbImxpbmtbcmVsPSIrYysiXSJdLG1hcDp7bGluazoicGFyc2VMaW5rIn0scGFyc2U6ZnVuY3Rpb24oYSl7aWYoIWEuX19wYXJzZWQpe2EuX19wYXJzZWQ9ITA7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGQuc2VsZWN0b3JzKTtlKGIsZnVuY3Rpb24oYSl7ZFtkLm1hcFthLmxvY2FsTmFtZV1dKGEpfSksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGEpLEN1c3RvbUVsZW1lbnRzLm9ic2VydmVEb2N1bWVudChhKX19LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpJiZ0aGlzLnBhcnNlSW1wb3J0KGEpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXthLmltcG9ydCYmZC5wYXJzZShhLmltcG9ydCl9fSxlPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS5wYXJzZXI9ZCxhLklNUE9SVF9MSU5LX1RZUEU9Y30od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoZG9jdW1lbnQpO3ZhciBhPXdpbmRvdy5QbGF0Zm9ybSYmUGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s/UGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s6c2V0VGltZW91dDthKGZ1bmN0aW9uKCl7Q3VzdG9tRWxlbWVudHMucmVhZHk9ITAsQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lPURhdGUubm93KCksd2luZG93LkhUTUxJbXBvcnRzJiYoQ3VzdG9tRWxlbWVudHMuZWxhcHNlZD1DdXN0b21FbGVtZW50cy5yZWFkeVRpbWUtSFRNTEltcG9ydHMucmVhZHlUaW1lKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiV2ViQ29tcG9uZW50c1JlYWR5Iix7YnViYmxlczohMH0pKSx3aW5kb3cuSFRNTEltcG9ydHMmJihIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vaz1mdW5jdGlvbihhKXtDdXN0b21FbGVtZW50cy5wYXJzZXIucGFyc2UoYS5pbXBvcnQpfSl9KX1pZigiZnVuY3Rpb24iIT10eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50JiYod2luZG93LkN1c3RvbUV2ZW50PWZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1kb2N1bWVudC5jcmVhdGVFdmVudCgiQ3VzdG9tRXZlbnQiKTtyZXR1cm4gYy5pbml0Q3VzdG9tRXZlbnQoYSxCb29sZWFuKGIuYnViYmxlcyksQm9vbGVhbihiLmNhbmNlbGFibGUpLGIuZGV0YWlsKSxjfSx3aW5kb3cuQ3VzdG9tRXZlbnQucHJvdG90eXBlPXdpbmRvdy5FdmVudC5wcm90b3R5cGUpLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHxhLmZsYWdzLmVhZ2VyKWIoKTtlbHNlIGlmKCJpbnRlcmFjdGl2ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlfHx3aW5kb3cuYXR0YWNoRXZlbnR8fHdpbmRvdy5IVE1MSW1wb3J0cyYmIXdpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeSl7dmFyIGM9d2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMucmVhZHk/IkhUTUxJbXBvcnRzTG9hZGVkIjoiRE9NQ29udGVudExvYWRlZCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYyxiKX1lbHNlIGIoKX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbigpe2lmKHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCl7dmFyIGE9WyJ1cGdyYWRlQWxsIiwidXBncmFkZVN1YnRyZWUiLCJvYnNlcnZlRG9jdW1lbnQiLCJ1cGdyYWRlRG9jdW1lbnQiXSxiPXt9O2EuZm9yRWFjaChmdW5jdGlvbihhKXtiW2FdPUN1c3RvbUVsZW1lbnRzW2FdfSksYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe0N1c3RvbUVsZW1lbnRzW2FdPWZ1bmN0aW9uKGMpe3JldHVybiBiW2FdKHdyYXAoYykpfX0pfX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3RoaXMuY2FjaGU9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLm1hcD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMucmVxdWVzdHM9MCx0aGlzLnJlZ2V4PWF9dmFyIGM9YS5lbmRPZk1pY3JvdGFzaztiLnByb3RvdHlwZT17ZXh0cmFjdFVybHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPVtdO2M9dGhpcy5yZWdleC5leGVjKGEpOylkPW5ldyBVUkwoY1sxXSxiKSxlLnB1c2goe21hdGNoZWQ6Y1swXSx1cmw6ZC5ocmVmfSk7cmV0dXJuIGV9LHByb2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZXh0cmFjdFVybHMoYSxiKSxlPWMuYmluZChudWxsLHRoaXMubWFwKTt0aGlzLmZldGNoKGQsZSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGg7aWYoIWMpcmV0dXJuIGIoKTtmb3IodmFyIGQsZSxmLGc9ZnVuY3Rpb24oKXswPT09LS1jJiZiKCl9LGg9MDtjPmg7aCsrKWQ9YVtoXSxmPWQudXJsLGU9dGhpcy5jYWNoZVtmXSxlfHwoZT10aGlzLnhocihmKSxlLm1hdGNoPWQsdGhpcy5jYWNoZVtmXT1lKSxlLndhaXQoZyl9LGhhbmRsZVhocjpmdW5jdGlvbihhKXt2YXIgYj1hLm1hdGNoLGM9Yi51cmwsZD1hLnJlc3BvbnNlfHxhLnJlc3BvbnNlVGV4dHx8IiI7dGhpcy5tYXBbY109ZCx0aGlzLmZldGNoKHRoaXMuZXh0cmFjdFVybHMoZCxjKSxhLnJlc29sdmUpfSx4aHI6ZnVuY3Rpb24oYSl7dGhpcy5yZXF1ZXN0cysrO3ZhciBiPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gYi5vcGVuKCJHRVQiLGEsITApLGIuc2VuZCgpLGIub25lcnJvcj1iLm9ubG9hZD10aGlzLmhhbmRsZVhoci5iaW5kKHRoaXMsYiksYi5wZW5kaW5nPVtdLGIucmVzb2x2ZT1mdW5jdGlvbigpe2Zvcih2YXIgYT1iLnBlbmRpbmcsYz0wO2M8YS5sZW5ndGg7YysrKWFbY10oKTtiLnBlbmRpbmc9bnVsbH0sYi53YWl0PWZ1bmN0aW9uKGEpe2IucGVuZGluZz9iLnBlbmRpbmcucHVzaChhKTpjKGEpfSxifX0sYS5Mb2FkZXI9Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dGhpcy5sb2FkZXI9bmV3IGQodGhpcy5yZWdleCl9dmFyIGM9YS51cmxSZXNvbHZlcixkPWEuTG9hZGVyO2IucHJvdG90eXBlPXtyZWdleDovQGltcG9ydFxzKyg/OnVybCk/WyInXChdKihbXiciXCldKilbJyJcKV0qOy9nLHJlc29sdmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGQpe2ModGhpcy5mbGF0dGVuKGEsYixkKSl9LmJpbmQodGhpcyk7dGhpcy5sb2FkZXIucHJvY2VzcyhhLGIsZCl9LHJlc29sdmVOb2RlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLnRleHRDb250ZW50LGU9ZnVuY3Rpb24oYil7YS50ZXh0Q29udGVudD1iLGMoYSl9O3RoaXMucmVzb2x2ZShkLGIsZSl9LGZsYXR0ZW46ZnVuY3Rpb24oYSxiLGQpe2Zvcih2YXIgZSxmLGcsaD10aGlzLmxvYWRlci5leHRyYWN0VXJscyhhLGIpLGk9MDtpPGgubGVuZ3RoO2krKyllPWhbaV0sZj1lLnVybCxnPWMucmVzb2x2ZUNzc1RleHQoZFtmXSxmLCEwKSxnPXRoaXMuZmxhdHRlbihnLGIsZCksYT1hLnJlcGxhY2UoZS5tYXRjaGVkLGcpO3JldHVybiBhfSxsb2FkU3R5bGVzOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7ZisrLGY9PT1nJiZjJiZjKCl9Zm9yKHZhciBlLGY9MCxnPWEubGVuZ3RoLGg9MDtnPmgmJihlPWFbaF0pO2grKyl0aGlzLnJlc29sdmVOb2RlKGUsYixkKX19O3ZhciBlPW5ldyBiO2Euc3R5bGVSZXNvbHZlcj1lfSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGEoYSl7Zm9yKDthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhLmdldEVsZW1lbnRCeUlkP2E6bnVsbH1mdW5jdGlvbiBiKGEsYixjKXt2YXIgZD1hLmJpbmRpbmdzXztyZXR1cm4gZHx8KGQ9YS5iaW5kaW5nc189e30pLGRbYl0mJmNbYl0uY2xvc2UoKSxkW2JdPWN9ZnVuY3Rpb24gYyhhLGIsYyl7cmV0dXJuIGN9ZnVuY3Rpb24gZChhKXtyZXR1cm4gbnVsbD09YT8iIjphfWZ1bmN0aW9uIGUoYSxiKXthLmRhdGE9ZChiKX1mdW5jdGlvbiBmKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZShhLGIpfX1mdW5jdGlvbiBnKGEsYixjLGUpe3JldHVybiBjP3ZvaWQoZT9hLnNldEF0dHJpYnV0ZShiLCIiKTphLnJlbW92ZUF0dHJpYnV0ZShiKSk6dm9pZCBhLnNldEF0dHJpYnV0ZShiLGQoZSkpfWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtnKGEsYixjLGQpfX1mdW5jdGlvbiBpKGEpe3N3aXRjaChhLnR5cGUpe2Nhc2UiY2hlY2tib3giOnJldHVybiB1O2Nhc2UicmFkaW8iOmNhc2Uic2VsZWN0LW11bHRpcGxlIjpjYXNlInNlbGVjdC1vbmUiOnJldHVybiJjaGFuZ2UiO2Nhc2UicmFuZ2UiOmlmKC9UcmlkZW50fE1TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpcmV0dXJuImNoYW5nZSI7ZGVmYXVsdDpyZXR1cm4iaW5wdXQifX1mdW5jdGlvbiBqKGEsYixjLGUpe2FbYl09KGV8fGQpKGMpfWZ1bmN0aW9uIGsoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtyZXR1cm4gaihhLGIsZCxjKX19ZnVuY3Rpb24gbCgpe31mdW5jdGlvbiBtKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtjLnNldFZhbHVlKGFbYl0pLGMuZGlzY2FyZENoYW5nZXMoKSwoZHx8bCkoYSksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX12YXIgZj1pKGEpO3JldHVybiBhLmFkZEV2ZW50TGlzdGVuZXIoZixlKSx7Y2xvc2U6ZnVuY3Rpb24oKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoZixlKSxjLmNsb3NlKCl9LG9ic2VydmFibGVfOmN9fWZ1bmN0aW9uIG4oYSl7cmV0dXJuIEJvb2xlYW4oYSl9ZnVuY3Rpb24gbyhiKXtpZihiLmZvcm0pcmV0dXJuIHMoYi5mb3JtLmVsZW1lbnRzLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1iJiYiSU5QVVQiPT1hLnRhZ05hbWUmJiJyYWRpbyI9PWEudHlwZSYmYS5uYW1lPT1iLm5hbWV9KTt2YXIgYz1hKGIpO2lmKCFjKXJldHVybltdO3ZhciBkPWMucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSInK2IubmFtZSsnIl0nKTtyZXR1cm4gcyhkLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1iJiYhYS5mb3JtfSl9ZnVuY3Rpb24gcChhKXsiSU5QVVQiPT09YS50YWdOYW1lJiYicmFkaW8iPT09YS50eXBlJiZvKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5iaW5kaW5nc18uY2hlY2tlZDtiJiZiLm9ic2VydmFibGVfLnNldFZhbHVlKCExKX0pfWZ1bmN0aW9uIHEoYSxiKXt2YXIgYyxlLGYsZz1hLnBhcmVudE5vZGU7ZyBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50JiZnLmJpbmRpbmdzXyYmZy5iaW5kaW5nc18udmFsdWUmJihjPWcsZT1jLmJpbmRpbmdzXy52YWx1ZSxmPWMudmFsdWUpLGEudmFsdWU9ZChiKSxjJiZjLnZhbHVlIT1mJiYoZS5vYnNlcnZhYmxlXy5zZXRWYWx1ZShjLnZhbHVlKSxlLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cShhLGIpfX12YXIgcz1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZmlsdGVyKTtOb2RlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYil7Y29uc29sZS5lcnJvcigiVW5oYW5kbGVkIGJpbmRpbmcgdG8gTm9kZTogIix0aGlzLGEsYil9LE5vZGUucHJvdG90eXBlLmJpbmRGaW5pc2hlZD1mdW5jdGlvbigpe307dmFyIHQ9YztPYmplY3QuZGVmaW5lUHJvcGVydHkoUGxhdGZvcm0sImVuYWJsZUJpbmRpbmdzUmVmbGVjdGlvbiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0PT09Yn0sc2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0PWE/YjpjLGF9LGNvbmZpZ3VyYWJsZTohMH0pLFRleHQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe2lmKCJ0ZXh0Q29udGVudCIhPT1hKXJldHVybiBOb2RlLnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYoYylyZXR1cm4gZSh0aGlzLGIpO3ZhciBkPWI7cmV0dXJuIGUodGhpcyxkLm9wZW4oZih0aGlzKSkpLHQodGhpcyxhLGQpfSxFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iPyI9PWFbYS5sZW5ndGgtMV07aWYoZCYmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLGE9YS5zbGljZSgwLC0xKSksYylyZXR1cm4gZyh0aGlzLGEsZCxiKTt2YXIgZT1iO3JldHVybiBnKHRoaXMsYSxkLGUub3BlbihoKHRoaXMsYSxkKSkpLHQodGhpcyxhLGUpfTt2YXIgdTshZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiPWEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSk7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJjaGVja2JveCIpO3ZhciBjLGQ9MDtiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjbGljayJ9KSxiLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24oKXtkKyssYz1jfHwiY2hhbmdlIn0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7ZS5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCEwLHdpbmRvdywwLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsKSxiLmRpc3BhdGNoRXZlbnQoZSksdT0xPT1kPyJjaGFuZ2UiOmN9KCksSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZSl7aWYoInZhbHVlIiE9PWEmJiJjaGVja2VkIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGMsZSk7dGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSk7dmFyIGY9ImNoZWNrZWQiPT1hP246ZCxnPSJjaGVja2VkIj09YT9wOmw7aWYoZSlyZXR1cm4gaih0aGlzLGEsYyxmKTt2YXIgaD1jLGk9bSh0aGlzLGEsaCxnKTtyZXR1cm4gaih0aGlzLGEsaC5vcGVuKGsodGhpcyxhLGYpKSxmKSxiKHRoaXMsYSxpKX0sSFRNTFRleHRBcmVhRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInZhbHVlIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIiksYylyZXR1cm4gaih0aGlzLCJ2YWx1ZSIsYik7dmFyIGU9YixmPW0odGhpcywidmFsdWUiLGUpO3JldHVybiBqKHRoaXMsInZhbHVlIixlLm9wZW4oayh0aGlzLCJ2YWx1ZSIsZCkpKSx0KHRoaXMsYSxmKX0sSFRNTE9wdGlvbkVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe2lmKCJ2YWx1ZSIhPT1hKXJldHVybiBIVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpO2lmKHRoaXMucmVtb3ZlQXR0cmlidXRlKCJ2YWx1ZSIpLGMpcmV0dXJuIHEodGhpcyxiKTt2YXIgZD1iLGU9bSh0aGlzLCJ2YWx1ZSIsZCk7cmV0dXJuIHEodGhpcyxkLm9wZW4ocih0aGlzKSkpLHQodGhpcyxhLGUpfSxIVE1MU2VsZWN0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZCl7aWYoInNlbGVjdGVkaW5kZXgiPT09YSYmKGE9InNlbGVjdGVkSW5kZXgiKSwic2VsZWN0ZWRJbmRleCIhPT1hJiYidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxkKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSxkKXJldHVybiBqKHRoaXMsYSxjKTt2YXIgZT1jLGY9bSh0aGlzLGEsZSk7cmV0dXJuIGoodGhpcyxhLGUub3BlbihrKHRoaXMsYSkpKSxiKHRoaXMsYSxmKX19KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQXNzZXJ0aW9uIGZhaWxlZCIpfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiO2I9YS5wYXJlbnROb2RlOylhPWI7cmV0dXJuIGF9ZnVuY3Rpb24gZChhLGIpe2lmKGIpe2Zvcih2YXIgZCxlPSIjIitiOyFkJiYoYT1jKGEpLGEucHJvdG9Db250ZW50Xz9kPWEucHJvdG9Db250ZW50Xy5xdWVyeVNlbGVjdG9yKGUpOmEuZ2V0RWxlbWVudEJ5SWQmJihkPWEuZ2V0RWxlbWVudEJ5SWQoYikpLCFkJiZhLnRlbXBsYXRlQ3JlYXRvcl8pOylhPWEudGVtcGxhdGVDcmVhdG9yXztyZXR1cm4gZH19ZnVuY3Rpb24gZShhKXtyZXR1cm4idGVtcGxhdGUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI9PWEubmFtZXNwYWNlVVJJfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIlRFTVBMQVRFIj09YS50YWdOYW1lJiYiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI9PWEubmFtZXNwYWNlVVJJfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIEJvb2xlYW4oTFthLnRhZ05hbWVdJiZhLmhhc0F0dHJpYnV0ZSgidGVtcGxhdGUiKSl9ZnVuY3Rpb24gaChhKXtyZXR1cm4gdm9pZCAwPT09YS5pc1RlbXBsYXRlXyYmKGEuaXNUZW1wbGF0ZV89IlRFTVBMQVRFIj09YS50YWdOYW1lfHxnKGEpKSxhLmlzVGVtcGxhdGVffWZ1bmN0aW9uIGkoYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoTik7aChhKSYmYihhKSxHKGMsYil9ZnVuY3Rpb24gaihhKXtmdW5jdGlvbiBiKGEpe0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSl8fGooYS5jb250ZW50KX1pKGEsYil9ZnVuY3Rpb24gayhhLGIpe09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSl9ZnVuY3Rpb24gbChhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7aWYoIWIuZGVmYXVsdFZpZXcpcmV0dXJuIGI7dmFyIGM9Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfO2lmKCFjKXtmb3IoYz1iLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yy5sYXN0Q2hpbGQ7KWMucmVtb3ZlQ2hpbGQoYy5sYXN0Q2hpbGQpO2IudGVtcGxhdGVDb250ZW50c093bmVyXz1jfXJldHVybiBjfWZ1bmN0aW9uIG0oYSl7aWYoIWEuc3RhZ2luZ0RvY3VtZW50Xyl7dmFyIGI9YS5vd25lckRvY3VtZW50O2lmKCFiLnN0YWdpbmdEb2N1bWVudF8pe2Iuc3RhZ2luZ0RvY3VtZW50Xz1iLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIiksYi5zdGFnaW5nRG9jdW1lbnRfLmlzU3RhZ2luZ0RvY3VtZW50PSEwO3ZhciBjPWIuc3RhZ2luZ0RvY3VtZW50Xy5jcmVhdGVFbGVtZW50KCJiYXNlIik7Yy5ocmVmPWRvY3VtZW50LmJhc2VVUkksYi5zdGFnaW5nRG9jdW1lbnRfLmhlYWQuYXBwZW5kQ2hpbGQoYyksYi5zdGFnaW5nRG9jdW1lbnRfLnN0YWdpbmdEb2N1bWVudF89Yi5zdGFnaW5nRG9jdW1lbnRffWEuc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF99cmV0dXJuIGEuc3RhZ2luZ0RvY3VtZW50X31mdW5jdGlvbiBuKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO0tbZS5uYW1lXSYmKCJ0ZW1wbGF0ZSIhPT1lLm5hbWUmJmIuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpKX1yZXR1cm4gYn1mdW5jdGlvbiBvKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO2Iuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpfXJldHVybiBhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksYn1mdW5jdGlvbiBwKGEsYixjKXt2YXIgZD1hLmNvbnRlbnQ7aWYoYylyZXR1cm4gdm9pZCBkLmFwcGVuZENoaWxkKGIpO2Zvcih2YXIgZTtlPWIuZmlyc3RDaGlsZDspZC5hcHBlbmRDaGlsZChlKX1mdW5jdGlvbiBxKGEpe1A/YS5fX3Byb3RvX189SFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU6ayhhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKX1mdW5jdGlvbiByKGEpe2Euc2V0TW9kZWxGbl98fChhLnNldE1vZGVsRm5fPWZ1bmN0aW9uKCl7YS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMTt2YXIgYj16KGEsYS5kZWxlZ2F0ZV8mJmEuZGVsZWdhdGVfLnByZXBhcmVCaW5kaW5nKTt3KGEsYixhLm1vZGVsXyl9KSxhLnNldE1vZGVsRm5TY2hlZHVsZWRffHwoYS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMCxPYnNlcnZlci5ydW5FT01fKGEuc2V0TW9kZWxGbl8pKX1mdW5jdGlvbiBzKGEsYixjLGQpe2lmKGEmJmEubGVuZ3RoKXtmb3IodmFyIGUsZj1hLmxlbmd0aCxnPTAsaD0wLGk9MCxqPSEwO2Y+aDspe3ZhciBnPWEuaW5kZXhPZigie3siLGgpLGs9YS5pbmRleE9mKCJbWyIsaCksbD0hMSxtPSJ9fSI7aWYoaz49MCYmKDA+Z3x8Zz5rKSYmKGc9ayxsPSEwLG09Il1dIiksaT0wPmc/LTE6YS5pbmRleE9mKG0sZysyKSwwPmkpe2lmKCFlKXJldHVybjtlLnB1c2goYS5zbGljZShoKSk7YnJlYWt9ZT1lfHxbXSxlLnB1c2goYS5zbGljZShoLGcpKTt2YXIgbj1hLnNsaWNlKGcrMixpKS50cmltKCk7ZS5wdXNoKGwpLGo9aiYmbDt2YXIgbz1kJiZkKG4sYixjKTtlLnB1c2gobnVsbD09bz9QYXRoLmdldChuKTpudWxsKSxlLnB1c2gobyksaD1pKzJ9cmV0dXJuIGg9PT1mJiZlLnB1c2goIiIpLGUuaGFzT25lUGF0aD01PT09ZS5sZW5ndGgsZS5pc1NpbXBsZVBhdGg9ZS5oYXNPbmVQYXRoJiYiIj09ZVswXSYmIiI9PWVbNF0sZS5vbmx5T25lVGltZT1qLGUuY29tYmluYXRvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9ZVswXSxjPTE7YzxlLmxlbmd0aDtjKz00KXt2YXIgZD1lLmhhc09uZVBhdGg/YTphWyhjLTEpLzRdO3ZvaWQgMCE9PWQmJihiKz1kKSxiKz1lW2MrM119cmV0dXJuIGJ9LGV9fWZ1bmN0aW9uIHQoYSxiLGMsZCl7aWYoYi5oYXNPbmVQYXRoKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMCk6YlsyXS5nZXRWYWx1ZUZyb20oZCk7cmV0dXJuIGIuaXNTaW1wbGVQYXRoP2Y6Yi5jb21iaW5hdG9yKGYpfWZvcih2YXIgZz1bXSxoPTE7aDxiLmxlbmd0aDtoKz00KXt2YXIgZT1iW2grMl07Z1soaC0xKS80XT1lP2UoZCxjKTpiW2grMV0uZ2V0VmFsdWVGcm9tKGQpfXJldHVybiBiLmNvbWJpbmF0b3IoZyl9ZnVuY3Rpb24gdShhLGIsYyxkKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMSk6bmV3IFBhdGhPYnNlcnZlcihkLGJbMl0pO3JldHVybiBiLmlzU2ltcGxlUGF0aD9mOm5ldyBPYnNlcnZlclRyYW5zZm9ybShmLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdihhLGIsYyxkKXtpZihiLm9ubHlPbmVUaW1lKXJldHVybiB0KGEsYixjLGQpO2lmKGIuaGFzT25lUGF0aClyZXR1cm4gdShhLGIsYyxkKTtmb3IodmFyIGU9bmV3IENvbXBvdW5kT2JzZXJ2ZXIsZj0xO2Y8Yi5sZW5ndGg7Zis9NCl7dmFyIGc9YltmXSxoPWJbZisyXTtpZihoKXt2YXIgaT1oKGQsYyxnKTtnP2UuYWRkUGF0aChpKTplLmFkZE9ic2VydmVyKGkpfWVsc2V7dmFyIGo9YltmKzFdO2c/ZS5hZGRQYXRoKGouZ2V0VmFsdWVGcm9tKGQpKTplLmFkZFBhdGgoZCxqKX19cmV0dXJuIG5ldyBPYnNlcnZlclRyYW5zZm9ybShlLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdyhhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGIubGVuZ3RoO2UrPTIpe3ZhciBmPWJbZV0sZz1iW2UrMV0saD12KGYsZyxhLGMpLGk9YS5iaW5kKGYsaCxnLm9ubHlPbmVUaW1lKTtpJiZkJiZkLnB1c2goaSl9aWYoYS5iaW5kRmluaXNoZWQoKSxiLmlzVGVtcGxhdGUpe2EubW9kZWxfPWM7dmFyIGo9YS5wcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfKGIpO2QmJmomJmQucHVzaChqKX19ZnVuY3Rpb24geChhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoYik7cmV0dXJuIHMoIiI9PWQ/Int7fX0iOmQsYixhLGMpfWZ1bmN0aW9uIHkoYSxjKXtiKGEpO2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmF0dHJpYnV0ZXMubGVuZ3RoO2UrKyl7Zm9yKHZhciBmPWEuYXR0cmlidXRlc1tlXSxnPWYubmFtZSxpPWYudmFsdWU7Il8iPT09Z1swXTspZz1nLnN1YnN0cmluZygxKTtpZighaChhKXx8ZyE9PUomJmchPT1IJiZnIT09SSl7dmFyIGo9cyhpLGcsYSxjKTtqJiZkLnB1c2goZyxqKX19cmV0dXJuIGgoYSkmJihkLmlzVGVtcGxhdGU9ITAsZC5pZj14KGEsSixjKSxkLmJpbmQ9eChhLEgsYyksZC5yZXBlYXQ9eChhLEksYyksIWQuaWZ8fGQuYmluZHx8ZC5yZXBlYXR8fChkLmJpbmQ9cygie3t9fSIsSCxhLGMpKSksZH1mdW5jdGlvbiB6KGEsYil7aWYoYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiB5KGEsYik7aWYoYS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFKXt2YXIgYz1zKGEuZGF0YSwidGV4dENvbnRlbnQiLGEsYik7aWYoYylyZXR1cm5bInRleHRDb250ZW50IixjXX1yZXR1cm5bXX1mdW5jdGlvbiBBKGEsYixjLGQsZSxmLGcpe2Zvcih2YXIgaD1iLmFwcGVuZENoaWxkKGMuaW1wb3J0Tm9kZShhLCExKSksaT0wLGo9YS5maXJzdENoaWxkO2o7aj1qLm5leHRTaWJsaW5nKUEoaixoLGMsZC5jaGlsZHJlbltpKytdLGUsZixnKTtyZXR1cm4gZC5pc1RlbXBsYXRlJiYoSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShoLGEpLGYmJmguc2V0RGVsZWdhdGVfKGYpKSx3KGgsZCxlLGcpLGh9ZnVuY3Rpb24gQihhLGIpe3ZhciBjPXooYSxiKTtjLmNoaWxkcmVuPXt9O2Zvcih2YXIgZD0wLGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWMuY2hpbGRyZW5bZCsrXT1CKGUsYik7cmV0dXJuIGN9ZnVuY3Rpb24gQyhhKXt2YXIgYj1hLmlkXztyZXR1cm4gYnx8KGI9YS5pZF89UysrKSxifWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1DKGEpO2lmKGIpe3ZhciBkPWIuYmluZGluZ01hcHNbY107cmV0dXJuIGR8fChkPWIuYmluZGluZ01hcHNbY109QihhLGIucHJlcGFyZUJpbmRpbmcpfHxbXSksZH12YXIgZD1hLmJpbmRpbmdNYXBfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdNYXBfPUIoYSx2b2lkIDApfHxbXSksZH1mdW5jdGlvbiBFKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMuaW5zdGFuY2VzPVtdLHRoaXMuZGVwcz12b2lkIDAsdGhpcy5pdGVyYXRlZFZhbHVlPVtdLHRoaXMucHJlc2VudFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwfXZhciBGLEc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP0Y9YS5NYXA6KEY9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LEYucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSk7ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBIPSJiaW5kIixJPSJyZXBlYXQiLEo9ImlmIixLPXt0ZW1wbGF0ZTohMCxyZXBlYXQ6ITAsYmluZDohMCxyZWY6ITB9LEw9e1RIRUFEOiEwLFRCT0RZOiEwLFRGT09UOiEwLFRIOiEwLFRSOiEwLFREOiEwLENPTEdST1VQOiEwLENPTDohMCxDQVBUSU9OOiEwLE9QVElPTjohMCxPUFRHUk9VUDohMH0sTT0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7TSYmIWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKSxiPWEuY29udGVudC5vd25lckRvY3VtZW50LGM9Yi5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImh0bWwiKSksZD1jLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiaGVhZCIpKSxlPWIuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2UuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGQuYXBwZW5kQ2hpbGQoZSl9KCk7dmFyIE49InRlbXBsYXRlLCAiK09iamVjdC5rZXlzKEwpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpKyJbdGVtcGxhdGVdIn0pLmpvaW4oIiwgIik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtqKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksTXx8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIE8sUD0iX19wcm90b19fImlue307ImZ1bmN0aW9uIj09dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJihPPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udGFyZ2V0LnJlZkNoYW5nZWRfKCl9KSksSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGQ9YTtkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBoPWYoZCkmJk0saT1oLGs9IWgsbT0hMTtpZihofHwoZyhkKT8oYighYyksZD1uKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsaD1NLG09ITApOmUoZCkmJihkPW8oYSksZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxoPU0pKSwhaCl7cShkKTt2YXIgcj1sKGQpO2QuY29udGVudF89ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9cmV0dXJuIGM/ZC5pbnN0YW5jZVJlZl89YzprP3AoZCxhLG0pOmkmJmooZC5jb250ZW50KSwhMH0sSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXA9ajt2YXIgUT1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsUj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudF99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtNfHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShRLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixSKSksayhIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSx7YmluZDpmdW5jdGlvbihhLGIsYyl7aWYoInJlZiIhPWEpcmV0dXJuIEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTt2YXIgZD10aGlzLGU9Yz9iOmIub3BlbihmdW5jdGlvbihhKXtkLnNldEF0dHJpYnV0ZSgicmVmIixhKSxkLnJlZkNoYW5nZWRfKCl9KTtyZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUoInJlZiIsZSksdGhpcy5yZWZDaGFuZ2VkXygpLGM/dm9pZCAwOih0aGlzLmJpbmRpbmdzXz90aGlzLmJpbmRpbmdzXy5yZWY9Yjp0aGlzLmJpbmRpbmdzXz17cmVmOmJ9LGIpfSxwcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yXyYmdGhpcy5pdGVyYXRvcl8uY2xvc2VEZXBzKCksYS5pZnx8YS5iaW5kfHxhLnJlcGVhdD8odGhpcy5pdGVyYXRvcl98fCh0aGlzLml0ZXJhdG9yXz1uZXcgRSh0aGlzKSksdGhpcy5pdGVyYXRvcl8udXBkYXRlRGVwZW5kZW5jaWVzKGEsdGhpcy5tb2RlbF8pLE8mJk8ub2JzZXJ2ZSh0aGlzLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInJlZiJdfSksdGhpcy5pdGVyYXRvcl8pOnZvaWQodGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCkpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihhLGIsYyl7Yj9jPXRoaXMubmV3RGVsZWdhdGVfKGIpOmN8fChjPXRoaXMuZGVsZWdhdGVfKSx0aGlzLnJlZkNvbnRlbnRffHwodGhpcy5yZWZDb250ZW50Xz10aGlzLnJlZl8uY29udGVudCk7dmFyIGQ9dGhpcy5yZWZDb250ZW50XztpZihudWxsPT09ZC5maXJzdENoaWxkKXJldHVybiBUO3ZhciBlPUQoZCxjKSxmPW0odGhpcyksZz1mLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtnLnRlbXBsYXRlQ3JlYXRvcl89dGhpcyxnLnByb3RvQ29udGVudF89ZCxnLmJpbmRpbmdzXz1bXSxnLnRlcm1pbmF0b3JfPW51bGw7Zm9yKHZhciBoPWcudGVtcGxhdGVJbnN0YW5jZV89e2ZpcnN0Tm9kZTpudWxsLGxhc3ROb2RlOm51bGwsbW9kZWw6YX0saT0wLGo9ITEsaz1kLmZpcnN0Q2hpbGQ7aztrPWsubmV4dFNpYmxpbmcpe251bGw9PT1rLm5leHRTaWJsaW5nJiYoaj0hMCk7dmFyIGw9QShrLGcsZixlLmNoaWxkcmVuW2krK10sYSxjLGcuYmluZGluZ3NfKTtsLnRlbXBsYXRlSW5zdGFuY2VfPWgsaiYmKGcudGVybWluYXRvcl89bCl9cmV0dXJuIGguZmlyc3ROb2RlPWcuZmlyc3RDaGlsZCxoLmxhc3ROb2RlPWcubGFzdENoaWxkLGcudGVtcGxhdGVDcmVhdG9yXz12b2lkIDAsZy5wcm90b0NvbnRlbnRfPXZvaWQgMCxnfSxnZXQgbW9kZWwoKXtyZXR1cm4gdGhpcy5tb2RlbF99LHNldCBtb2RlbChhKXt0aGlzLm1vZGVsXz1hLHIodGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZV8mJnRoaXMuZGVsZWdhdGVfLnJhd30scmVmQ2hhbmdlZF86ZnVuY3Rpb24oKXt0aGlzLml0ZXJhdG9yXyYmdGhpcy5yZWZDb250ZW50XyE9PXRoaXMucmVmXy5jb250ZW50JiYodGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8udmFsdWVDaGFuZ2VkKCksdGhpcy5pdGVyYXRvcl8udXBkYXRlSXRlcmF0ZWRWYWx1ZSh0aGlzLml0ZXJhdG9yXy5nZXRVcGRhdGVkVmFsdWUoKSkpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubW9kZWxfPXZvaWQgMCx0aGlzLmRlbGVnYXRlXz12b2lkIDAsdGhpcy5iaW5kaW5nc18mJnRoaXMuYmluZGluZ3NfLnJlZiYmdGhpcy5iaW5kaW5nc18ucmVmLmNsb3NlKCksdGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCl9LHNldERlbGVnYXRlXzpmdW5jdGlvbihhKXt0aGlzLmRlbGVnYXRlXz1hLHRoaXMuYmluZGluZ01hcF89dm9pZCAwLHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8uaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlTW9kZWxGbl89dm9pZCAwKX0sbmV3RGVsZWdhdGVfOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YSYmYVtiXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYylyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShhLGFyZ3VtZW50cyl9fWlmKGEpcmV0dXJue2JpbmRpbmdNYXBzOnt9LHJhdzphLHByZXBhcmVCaW5kaW5nOmIoInByZXBhcmVCaW5kaW5nIikscHJlcGFyZUluc3RhbmNlTW9kZWw6YigicHJlcGFyZUluc3RhbmNlTW9kZWwiKSxwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6YigicHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkIil9fSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe2lmKHRoaXMuZGVsZWdhdGVfKXRocm93IEVycm9yKCJUZW1wbGF0ZSBtdXN0IGJlIGNsZWFyZWQgYmVmb3JlIGEgbmV3IGJpbmRpbmdEZWxlZ2F0ZSBjYW4gYmUgYXNzaWduZWQiKTt0aGlzLnNldERlbGVnYXRlXyh0aGlzLm5ld0RlbGVnYXRlXyhhKSl9LGdldCByZWZfKCl7dmFyIGE9ZCh0aGlzLHRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKSk7aWYoYXx8KGE9dGhpcy5pbnN0YW5jZVJlZl8pLCFhKXJldHVybiB0aGlzO3ZhciBiPWEucmVmXztyZXR1cm4gYj9iOmF9fSk7dmFyIFM9MTtPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlbXBsYXRlSW5zdGFuY2VfO3JldHVybiBhP2E6dGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS50ZW1wbGF0ZUluc3RhbmNlOnZvaWQgMH19KTt2YXIgVD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7VC5iaW5kaW5nc189W10sVC50ZXJtaW5hdG9yXz1udWxsLEUucHJvdG90eXBlPXtjbG9zZURlcHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRlcHM7YSYmKGEuaWZPbmVUaW1lPT09ITEmJmEuaWZWYWx1ZS5jbG9zZSgpLGEub25lVGltZT09PSExJiZhLnZhbHVlLmNsb3NlKCkpfSx1cGRhdGVEZXBlbmRlbmNpZXM6ZnVuY3Rpb24oYSxiKXt0aGlzLmNsb3NlRGVwcygpO3ZhciBjPXRoaXMuZGVwcz17fSxkPXRoaXMudGVtcGxhdGVFbGVtZW50XyxlPSEwO2lmKGEuaWYpe2lmKGMuaGFzSWY9ITAsYy5pZk9uZVRpbWU9YS5pZi5vbmx5T25lVGltZSxjLmlmVmFsdWU9dihKLGEuaWYsZCxiKSxlPWMuaWZWYWx1ZSxjLmlmT25lVGltZSYmIWUpcmV0dXJuIHZvaWQgdGhpcy52YWx1ZUNoYW5nZWQoKTtjLmlmT25lVGltZXx8KGU9ZS5vcGVuKHRoaXMudXBkYXRlSWZWYWx1ZSx0aGlzKSl9YS5yZXBlYXQ/KGMucmVwZWF0PSEwLGMub25lVGltZT1hLnJlcGVhdC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSSxhLnJlcGVhdCxkLGIpKTooYy5yZXBlYXQ9ITEsYy5vbmVUaW1lPWEuYmluZC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSCxhLmJpbmQsZCxiKSk7dmFyIGY9Yy52YWx1ZTtyZXR1cm4gYy5vbmVUaW1lfHwoZj1mLm9wZW4odGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlLHRoaXMpKSxlP3ZvaWQgdGhpcy51cGRhdGVWYWx1ZShmKTp2b2lkIHRoaXMudmFsdWVDaGFuZ2VkKCl9LGdldFVwZGF0ZWRWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZGVwcy52YWx1ZTtyZXR1cm4gdGhpcy5kZXBzLm9uZVRpbWV8fChhPWEuZGlzY2FyZENoYW5nZXMoKSksYX0sdXBkYXRlSWZWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT92b2lkIHRoaXMudXBkYXRlVmFsdWUodGhpcy5nZXRVcGRhdGVkVmFsdWUoKSk6dm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfSx1cGRhdGVJdGVyYXRlZFZhbHVlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZGVwcy5oYXNJZil7dmFyIGI9dGhpcy5kZXBzLmlmVmFsdWU7aWYodGhpcy5kZXBzLmlmT25lVGltZXx8KGI9Yi5kaXNjYXJkQ2hhbmdlcygpKSwhYilyZXR1cm4gdm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfXRoaXMudXBkYXRlVmFsdWUoYSl9LHVwZGF0ZVZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuZGVwcy5yZXBlYXR8fChhPVthXSk7dmFyIGI9dGhpcy5kZXBzLnJlcGVhdCYmIXRoaXMuZGVwcy5vbmVUaW1lJiZBcnJheS5pc0FycmF5KGEpO3RoaXMudmFsdWVDaGFuZ2VkKGEsYil9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIpe0FycmF5LmlzQXJyYXkoYSl8fChhPVtdKSxhIT09dGhpcy5pdGVyYXRlZFZhbHVlJiYodGhpcy51bm9ic2VydmUoKSx0aGlzLnByZXNlbnRWYWx1ZT1hLGImJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5wcmVzZW50VmFsdWUpLHRoaXMuYXJyYXlPYnNlcnZlci5vcGVuKHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSksdGhpcy5oYW5kbGVTcGxpY2VzKEFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcyh0aGlzLnByZXNlbnRWYWx1ZSx0aGlzLml0ZXJhdGVkVmFsdWUpKSl9LGdldExhc3RJbnN0YW5jZU5vZGU6ZnVuY3Rpb24oYSl7aWYoLTE9PWEpcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Xzt2YXIgYj10aGlzLmluc3RhbmNlc1thXSxjPWIudGVybWluYXRvcl87aWYoIWMpcmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpO2lmKGMubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8dGhpcy50ZW1wbGF0ZUVsZW1lbnRfPT09YylyZXR1cm4gYzt2YXIgZD1jLml0ZXJhdG9yXztyZXR1cm4gZD9kLmdldExhc3RUZW1wbGF0ZU5vZGUoKTpjfSxnZXRMYXN0VGVtcGxhdGVOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZSh0aGlzLmluc3RhbmNlcy5sZW5ndGgtMSl9LGluc2VydEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYS0xKSxkPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlO3RoaXMuaW5zdGFuY2VzLnNwbGljZShhLDAsYiksZC5pbnNlcnRCZWZvcmUoYixjLm5leHRTaWJsaW5nKX0sZXh0cmFjdEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpLGM9dGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEpLGQ9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGUsZT10aGlzLmluc3RhbmNlcy5zcGxpY2UoYSwxKVswXTtjIT09Yjspe3ZhciBmPWIubmV4dFNpYmxpbmc7Zj09YyYmKGM9YiksZS5hcHBlbmRDaGlsZChkLnJlbW92ZUNoaWxkKGYpKX1yZXR1cm4gZX0sZ2V0RGVsZWdhdGVGbjpmdW5jdGlvbihhKXtyZXR1cm4gYT1hJiZhKHRoaXMudGVtcGxhdGVFbGVtZW50XyksImZ1bmN0aW9uIj09dHlwZW9mIGE/YTpudWxsfSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCYmYS5sZW5ndGgpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZighYi5wYXJlbnROb2RlKXJldHVybiB2b2lkIHRoaXMuY2xvc2UoKTtBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcyh0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5wcmVzZW50VmFsdWUsYSk7dmFyIGM9Yi5kZWxlZ2F0ZV87dm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPXRoaXMuZ2V0RGVsZWdhdGVGbihjJiZjLnByZXBhcmVJbnN0YW5jZU1vZGVsKSksdm9pZCAwPT09dGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmKHRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dGhpcy5nZXREZWxlZ2F0ZUZuKGMmJmMucHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkKSk7Zm9yKHZhciBkPW5ldyBGLGU9MCxmPTA7ZjxhLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1hW2ZdLGg9Zy5yZW1vdmVkLGk9MDtpPGgubGVuZ3RoO2krKyl7dmFyIGo9aFtpXSxrPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoZy5pbmRleCtlKTtrIT09VCYmZC5zZXQoaixrKX1lLT1nLmFkZGVkQ291bnR9Zm9yKHZhciBmPTA7ZjxhLmxlbmd0aDtmKyspZm9yKHZhciBnPWFbZl0sbD1nLmluZGV4O2w8Zy5pbmRleCtnLmFkZGVkQ291bnQ7bCsrKXt2YXIgaj10aGlzLml0ZXJhdGVkVmFsdWVbbF0saz1kLmdldChqKTtrP2QuZGVsZXRlKGopOih0aGlzLmluc3RhbmNlTW9kZWxGbl8mJihqPXRoaXMuaW5zdGFuY2VNb2RlbEZuXyhqKSksaz12b2lkIDA9PT1qP1Q6Yi5jcmVhdGVJbnN0YW5jZShqLHZvaWQgMCxjKSksdGhpcy5pbnNlcnRJbnN0YW5jZUF0KGwsayl9ZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKGEpfSx0aGlzKSx0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fJiZ0aGlzLnJlcG9ydEluc3RhbmNlc01vdmVkKGEpfX0scmVwb3J0SW5zdGFuY2VNb3ZlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmluc3RhbmNlc1thXTtiIT09VCYmdGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyhiLnRlbXBsYXRlSW5zdGFuY2VfLGEpfSxyZXBvcnRJbnN0YW5jZXNNb3ZlZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdO2lmKDAhPWMpZm9yKDtiPGUuaW5kZXg7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKys7ZWxzZSBiPWUuaW5kZXg7Zm9yKDtiPGUuaW5kZXgrZS5hZGRlZENvdW50Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2MrPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RofWlmKDAhPWMpZm9yKHZhciBmPXRoaXMuaW5zdGFuY2VzLmxlbmd0aDtmPmI7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKyt9LGNsb3NlSW5zdGFuY2VCaW5kaW5nczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5iaW5kaW5nc18sYz0wO2M8Yi5sZW5ndGg7YysrKWJbY10uY2xvc2UoKX0sdW5vYnNlcnZlOmZ1bmN0aW9uKCl7dGhpcy5hcnJheU9ic2VydmVyJiYodGhpcy5hcnJheU9ic2VydmVyLmNsb3NlKCksdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXt0aGlzLnVub2JzZXJ2ZSgpO2Zvcih2YXIgYT0wO2E8dGhpcy5pbnN0YW5jZXMubGVuZ3RoO2ErKyl0aGlzLmNsb3NlSW5zdGFuY2VCaW5kaW5ncyh0aGlzLmluc3RhbmNlc1thXSk7dGhpcy5pbnN0YW5jZXMubGVuZ3RoPTAsdGhpcy5jbG9zZURlcHMoKSx0aGlzLnRlbXBsYXRlRWxlbWVudF8uaXRlcmF0b3JfPXZvaWQgMCx0aGlzLmNsb3NlZD0hMH19fSxIVE1MVGVtcGxhdGVFbGVtZW50LmZvckFsbFRlbXBsYXRlc0Zyb21fPWl9KHRoaXMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtlfHwoZT0hMCxhLmVuZE9mTWljcm90YXNrKGZ1bmN0aW9uKCl7ZT0hMSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwKCJQbGF0Zm9ybS5mbHVzaCgpIiksYS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXBFbmQoKX0pKX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2MudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2QuaW5zZXJ0QmVmb3JlKGMsZC5maXJzdENoaWxkKTt2YXIgZTtpZihPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlKWI9ZnVuY3Rpb24oKXt9O2Vsc2V7dmFyIGY9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLGEuZmx1c2hQb2xsPXNldEludGVydmFsKGIsZil9KX1pZih3aW5kb3cuQ3VzdG9tRWxlbWVudHMmJiFDdXN0b21FbGVtZW50cy51c2VOYXRpdmUpe3ZhciBnPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlO0RvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Zy5jYWxsKHRoaXMsYSxiKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChjKSxjfX1hLmZsdXNoPWJ9KHdpbmRvdy5QbGF0Zm9ybSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsYXRmb3JtLmpzLm1hcA==",
                "body": "LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbjogMC4zLjUKCndpbmRvdy5QbGF0Zm9ybT13aW5kb3cuUGxhdGZvcm18fHt9LHdpbmRvdy5sb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LGZ1bmN0aW9uKGEpe3ZhciBiPWEuZmxhZ3N8fHt9O2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9IiksYVswXSYmKGJbYVswXV09YVsxXXx8ITApfSk7dmFyIGM9ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0W3NyYyo9InBsYXRmb3JtLmpzIl0nKTtpZihjKWZvcih2YXIgZCxlPWMuYXR0cmlidXRlcyxmPTA7ZjxlLmxlbmd0aDtmKyspZD1lW2ZdLCJzcmMiIT09ZC5uYW1lJiYoYltkLm5hbWVdPWQudmFsdWV8fCEwKTtiLmxvZyYmYi5sb2cuc3BsaXQoIiwiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3dpbmRvdy5sb2dGbGFnc1thXT0hMH0pLGIuc2hhZG93PWIuc2hhZG93fHxiLnNoYWRvd2RvbXx8Yi5wb2x5ZmlsbCxiLnNoYWRvdz0ibmF0aXZlIj09PWIuc2hhZG93PyExOmIuc2hhZG93fHwhSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QsYi5zaGFkb3cmJmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInNjcmlwdCIpLmxlbmd0aD4xJiZjb25zb2xlLndhcm4oInBsYXRmb3JtLmpzIGlzIG5vdCB0aGUgZmlyc3Qgc2NyaXB0IG9uIHRoZSBwYWdlLiBTZWUgaHR0cDovL3d3dy5wb2x5bWVyLXByb2plY3Qub3JnL2RvY3Mvc3RhcnQvcGxhdGZvcm0uaHRtbCNzZXR1cCBmb3IgZGV0YWlscy4iKSxiLnJlZ2lzdGVyJiYod2luZG93LkN1c3RvbUVsZW1lbnRzPXdpbmRvdy5DdXN0b21FbGVtZW50c3x8e2ZsYWdzOnt9fSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuZmxhZ3MucmVnaXN0ZXI9Yi5yZWdpc3RlciksYi5pbXBvcnRzJiYod2luZG93LkhUTUxJbXBvcnRzPXdpbmRvdy5IVE1MSW1wb3J0c3x8e2ZsYWdzOnt9fSx3aW5kb3cuSFRNTEltcG9ydHMuZmxhZ3MuaW1wb3J0cz1iLmltcG9ydHMpLGEuZmxhZ3M9Yn0oUGxhdGZvcm0pLCJ1bmRlZmluZWQiPT10eXBlb2YgV2Vha01hcCYmIWZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9RGF0ZS5ub3coKSUxZTksYz1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGIrKyArIl9fIil9O2MucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYixjKXt2YXIgZD1iW3RoaXMubmFtZV07ZCYmZFswXT09PWI/ZFsxXT1jOmEoYix0aGlzLm5hbWUse3ZhbHVlOltiLGNdLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4oYj1hW3RoaXMubmFtZV0pJiZiWzBdPT09YT9iWzFdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9YVt0aGlzLm5hbWVdO2lmKCFiKXJldHVybiExO3ZhciBjPWJbMF09PT1hO3JldHVybiBiWzBdPWJbMV09dm9pZCAwLGN9LGhhczpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMubmFtZV07cmV0dXJuIGI/YlswXT09PWE6ITF9fSx3aW5kb3cuV2Vha01hcD1jfSgpLGZ1bmN0aW9uKGdsb2JhbCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGRldGVjdE9iamVjdE9ic2VydmUoKXtmdW5jdGlvbiBhKGEpe2I9YX1pZigiZnVuY3Rpb24iIT10eXBlb2YgT2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBBcnJheS5vYnNlcnZlKXJldHVybiExO3ZhciBiPVtdLGM9e30sZD1bXTtyZXR1cm4gT2JqZWN0Lm9ic2VydmUoYyxhKSxBcnJheS5vYnNlcnZlKGQsYSksYy5pZD0xLGMuaWQ9MixkZWxldGUgYy5pZCxkLnB1c2goMSwyKSxkLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSw1IT09Yi5sZW5ndGg/ITE6ImFkZCIhPWJbMF0udHlwZXx8InVwZGF0ZSIhPWJbMV0udHlwZXx8ImRlbGV0ZSIhPWJbMl0udHlwZXx8InNwbGljZSIhPWJbM10udHlwZXx8InNwbGljZSIhPWJbNF0udHlwZT8hMTooT2JqZWN0LnVub2JzZXJ2ZShjLGEpLEFycmF5LnVub2JzZXJ2ZShkLGEpLCEwKX1mdW5jdGlvbiBkZXRlY3RFdmFsKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBjaHJvbWUmJmNocm9tZS5hcHAmJmNocm9tZS5hcHAucnVudGltZSlyZXR1cm4hMTtpZihuYXZpZ2F0b3IuZ2V0RGV2aWNlU3RvcmFnZSlyZXR1cm4hMTt0cnl7dmFyIGE9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtyZXR1cm4gYSgpfWNhdGNoKGIpe3JldHVybiExfX1mdW5jdGlvbiBpc0luZGV4KGEpe3JldHVybithPT09YT4+PjB9ZnVuY3Rpb24gdG9OdW1iZXIoYSl7cmV0dXJuK2F9ZnVuY3Rpb24gaXNPYmplY3QoYSl7cmV0dXJuIGE9PT1PYmplY3QoYSl9ZnVuY3Rpb24gYXJlU2FtZVZhbHVlKGEsYil7cmV0dXJuIGE9PT1iPzAhPT1hfHwxL2E9PT0xL2I6bnVtYmVySXNOYU4oYSkmJm51bWJlcklzTmFOKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBnZXRQYXRoQ2hhclR5cGUoYSl7aWYodm9pZCAwPT09YSlyZXR1cm4iZW9mIjt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7c3dpdGNoKGIpe2Nhc2UgOTE6Y2FzZSA5MzpjYXNlIDQ2OmNhc2UgMzQ6Y2FzZSAzOTpjYXNlIDQ4OnJldHVybiBhO2Nhc2UgOTU6Y2FzZSAzNjpyZXR1cm4iaWRlbnQiO2Nhc2UgMzI6Y2FzZSA5OmNhc2UgMTA6Y2FzZSAxMzpjYXNlIDE2MDpjYXNlIDY1Mjc5OmNhc2UgODIzMjpjYXNlIDgyMzM6cmV0dXJuIndzIn1yZXR1cm4gYj49OTcmJjEyMj49Ynx8Yj49NjUmJjkwPj1iPyJpZGVudCI6Yj49NDkmJjU3Pj1iPyJudW1iZXIiOiJlbHNlIn1mdW5jdGlvbiBub29wKCl7fWZ1bmN0aW9uIHBhcnNlUGF0aChhKXtmdW5jdGlvbiBiKCl7aWYoIShrPj1hLmxlbmd0aCkpe3ZhciBiPWFbaysxXTtyZXR1cm4iaW5TaW5nbGVRdW90ZSI9PWwmJiInIj09Ynx8ImluRG91YmxlUXVvdGUiPT1sJiYnIic9PWI/KGsrKyxkPWIsbS5hcHBlbmQoKSwhMCk6dm9pZCAwfX1mb3IodmFyIGMsZCxlLGYsZyxoLGksaj1bXSxrPS0xLGw9ImJlZm9yZVBhdGgiLG09e3B1c2g6ZnVuY3Rpb24oKXt2b2lkIDAhPT1lJiYoai5wdXNoKGUpLGU9dm9pZCAwKX0sYXBwZW5kOmZ1bmN0aW9uKCl7dm9pZCAwPT09ZT9lPWQ6ZSs9ZH19O2w7KWlmKGsrKyxjPWFba10sIlxcIiE9Y3x8IWIobCkpe2lmKGY9Z2V0UGF0aENoYXJUeXBlKGMpLGk9cGF0aFN0YXRlTWFjaGluZVtsXSxnPWlbZl18fGlbImVsc2UiXXx8ImVycm9yIiwiZXJyb3IiPT1nKXJldHVybjtpZihsPWdbMF0saD1tW2dbMV1dfHxub29wLGQ9dm9pZCAwPT09Z1syXT9jOmdbMl0saCgpLCJhZnRlclBhdGgiPT09bClyZXR1cm4gan19ZnVuY3Rpb24gaXNJZGVudChhKXtyZXR1cm4gaWRlbnRSZWdFeHAudGVzdChhKX1mdW5jdGlvbiBQYXRoKGEsYil7aWYoYiE9PWNvbnN0cnVjdG9ySXNQcml2YXRlKXRocm93IEVycm9yKCJVc2UgUGF0aC5nZXQgdG8gcmV0cmlldmUgcGF0aCBvYmplY3RzIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspdGhpcy5wdXNoKFN0cmluZyhhW2NdKSk7aGFzRXZhbCYmdGhpcy5sZW5ndGgmJih0aGlzLmdldFZhbHVlRnJvbT10aGlzLmNvbXBpbGVkR2V0VmFsdWVGcm9tRm4oKSl9ZnVuY3Rpb24gZ2V0UGF0aChhKXtpZihhIGluc3RhbmNlb2YgUGF0aClyZXR1cm4gYTtpZigobnVsbD09YXx8MD09YS5sZW5ndGgpJiYoYT0iIiksInN0cmluZyIhPXR5cGVvZiBhKXtpZihpc0luZGV4KGEubGVuZ3RoKSlyZXR1cm4gbmV3IFBhdGgoYSxjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7YT1TdHJpbmcoYSl9dmFyIGI9cGF0aENhY2hlW2FdO2lmKGIpcmV0dXJuIGI7dmFyIGM9cGFyc2VQYXRoKGEpO2lmKCFjKXJldHVybiBpbnZhbGlkUGF0aDt2YXIgYj1uZXcgUGF0aChjLGNvbnN0cnVjdG9ySXNQcml2YXRlKTtyZXR1cm4gcGF0aENhY2hlW2FdPWIsYn1mdW5jdGlvbiBmb3JtYXRBY2Nlc3NvcihhKXtyZXR1cm4gaXNJbmRleChhKT8iWyIrYSsiXSI6J1siJythLnJlcGxhY2UoLyIvZywnXFwiJykrJyJdJ31mdW5jdGlvbiBkaXJ0eUNoZWNrKGEpe2Zvcih2YXIgYj0wO01BWF9ESVJUWV9DSEVDS19DWUNMRVM+YiYmYS5jaGVja18oKTspYisrO3JldHVybiB0ZXN0aW5nRXhwb3NlQ3ljbGVDb3VudCYmKGdsb2JhbC5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1iKSxiPjB9ZnVuY3Rpb24gb2JqZWN0SXNFbXB0eShhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBkaWZmSXNFbXB0eShhKXtyZXR1cm4gb2JqZWN0SXNFbXB0eShhLmFkZGVkKSYmb2JqZWN0SXNFbXB0eShhLnJlbW92ZWQpJiZvYmplY3RJc0VtcHR5KGEuY2hhbmdlZCl9ZnVuY3Rpb24gZGlmZk9iamVjdEZyb21PbGRPYmplY3QoYSxiKXt2YXIgYz17fSxkPXt9LGU9e307Zm9yKHZhciBmIGluIGIpe3ZhciBnPWFbZl07KHZvaWQgMD09PWd8fGchPT1iW2ZdKSYmKGYgaW4gYT9nIT09YltmXSYmKGVbZl09Zyk6ZFtmXT12b2lkIDApfWZvcih2YXIgZiBpbiBhKWYgaW4gYnx8KGNbZl09YVtmXSk7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJmEubGVuZ3RoIT09Yi5sZW5ndGgmJihlLmxlbmd0aD1hLmxlbmd0aCkse2FkZGVkOmMscmVtb3ZlZDpkLGNoYW5nZWQ6ZX19ZnVuY3Rpb24gcnVuRU9NVGFza3MoKXtpZighZW9tVGFza3MubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYT0wO2E8ZW9tVGFza3MubGVuZ3RoO2ErKyllb21UYXNrc1thXSgpO3JldHVybiBlb21UYXNrcy5sZW5ndGg9MCwhMH1mdW5jdGlvbiBuZXdPYnNlcnZlZE9iamVjdCgpe2Z1bmN0aW9uIGEoYSl7YiYmYi5zdGF0ZV89PT1PUEVORUQmJiFkJiZiLmNoZWNrXyhhKX12YXIgYixjLGQ9ITEsZT0hMDtyZXR1cm57b3BlbjpmdW5jdGlvbihjKXtpZihiKXRocm93IEVycm9yKCJPYnNlcnZlZE9iamVjdCBpbiB1c2UiKTtlfHxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksYj1jLGU9ITF9LG9ic2VydmU6ZnVuY3Rpb24oYixkKXtjPWIsZD9BcnJheS5vYnNlcnZlKGMsYSk6T2JqZWN0Lm9ic2VydmUoYyxhKX0sZGVsaXZlcjpmdW5jdGlvbihiKXtkPWIsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGQ9ITF9LGNsb3NlOmZ1bmN0aW9uKCl7Yj12b2lkIDAsT2JqZWN0LnVub2JzZXJ2ZShjLGEpLG9ic2VydmVkT2JqZWN0Q2FjaGUucHVzaCh0aGlzKX19fWZ1bmN0aW9uIGdldE9ic2VydmVkT2JqZWN0KGEsYixjKXt2YXIgZD1vYnNlcnZlZE9iamVjdENhY2hlLnBvcCgpfHxuZXdPYnNlcnZlZE9iamVjdCgpO3JldHVybiBkLm9wZW4oYSksZC5vYnNlcnZlKGIsYyksZH1mdW5jdGlvbiBuZXdPYnNlcnZlZFNldCgpe2Z1bmN0aW9uIGEoYixmKXtiJiYoYj09PWQmJihlW2ZdPSEwKSxoLmluZGV4T2YoYik8MCYmKGgucHVzaChiKSxPYmplY3Qub2JzZXJ2ZShiLGMpKSxhKE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSxmKSl9ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtpZihjLm9iamVjdCE9PWR8fGVbYy5uYW1lXXx8InNldFByb3RvdHlwZSI9PT1jLnR5cGUpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gYyhjKXtpZighYihjKSl7Zm9yKHZhciBkLGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PU9QRU5FRCYmZC5pdGVyYXRlT2JqZWN0c18oYSk7Zm9yKHZhciBlPTA7ZTxnLmxlbmd0aDtlKyspZD1nW2VdLGQuc3RhdGVfPT1PUEVORUQmJmQuY2hlY2tfKCl9fXZhciBkLGUsZj0wLGc9W10saD1bXSxpPXtvYmplY3Q6dm9pZCAwLG9iamVjdHM6aCxvcGVuOmZ1bmN0aW9uKGIsYyl7ZHx8KGQ9YyxlPXt9KSxnLnB1c2goYiksZisrLGIuaXRlcmF0ZU9iamVjdHNfKGEpfSxjbG9zZTpmdW5jdGlvbigpe2lmKGYtLSwhKGY+MCkpe2Zvcih2YXIgYT0wO2E8aC5sZW5ndGg7YSsrKU9iamVjdC51bm9ic2VydmUoaFthXSxjKSxPYnNlcnZlci51bm9ic2VydmVkQ291bnQrKztnLmxlbmd0aD0wLGgubGVuZ3RoPTAsZD12b2lkIDAsZT12b2lkIDAsb2JzZXJ2ZWRTZXRDYWNoZS5wdXNoKHRoaXMpfX19O3JldHVybiBpfWZ1bmN0aW9uIGdldE9ic2VydmVkU2V0KGEsYil7cmV0dXJuIGxhc3RPYnNlcnZlZFNldCYmbGFzdE9ic2VydmVkU2V0Lm9iamVjdD09PWJ8fChsYXN0T2JzZXJ2ZWRTZXQ9b2JzZXJ2ZWRTZXRDYWNoZS5wb3AoKXx8bmV3T2JzZXJ2ZWRTZXQoKSxsYXN0T2JzZXJ2ZWRTZXQub2JqZWN0PWIpLGxhc3RPYnNlcnZlZFNldC5vcGVuKGEsYiksbGFzdE9ic2VydmVkU2V0fWZ1bmN0aW9uIE9ic2VydmVyKCl7dGhpcy5zdGF0ZV89VU5PUEVORUQsdGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmlkXz1uZXh0T2JzZXJ2ZXJJZCsrfWZ1bmN0aW9uIGFkZFRvQWxsKGEpe09ic2VydmVyLl9hbGxPYnNlcnZlcnNDb3VudCsrLGNvbGxlY3RPYnNlcnZlcnMmJmFsbE9ic2VydmVycy5wdXNoKGEpfWZ1bmN0aW9uIHJlbW92ZUZyb21BbGwoKXtPYnNlcnZlci5fYWxsT2JzZXJ2ZXJzQ291bnQtLX1mdW5jdGlvbiBPYmplY3RPYnNlcnZlcihhKXtPYnNlcnZlci5jYWxsKHRoaXMpLHRoaXMudmFsdWVfPWEsdGhpcy5vbGRPYmplY3RfPXZvaWQgMH1mdW5jdGlvbiBBcnJheU9ic2VydmVyKGEpe2lmKCFBcnJheS5pc0FycmF5KGEpKXRocm93IEVycm9yKCJQcm92aWRlZCBvYmplY3QgaXMgbm90IGFuIEFycmF5Iik7T2JqZWN0T2JzZXJ2ZXIuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIFBhdGhPYnNlcnZlcihhLGIpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy5vYmplY3RfPWEsdGhpcy5wYXRoXz1nZXRQYXRoKGIpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMH1mdW5jdGlvbiBDb21wb3VuZE9ic2VydmVyKGEpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXz1hLHRoaXMudmFsdWVfPVtdLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCx0aGlzLm9ic2VydmVkXz1bXX1mdW5jdGlvbiBpZGVudEZuKGEpe3JldHVybiBhfWZ1bmN0aW9uIE9ic2VydmVyVHJhbnNmb3JtKGEsYixjLGQpe3RoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLm9ic2VydmFibGVfPWEsdGhpcy5nZXRWYWx1ZUZuXz1ifHxpZGVudEZuLHRoaXMuc2V0VmFsdWVGbl89Y3x8aWRlbnRGbix0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF89ZH1mdW5jdGlvbiBkaWZmT2JqZWN0RnJvbUNoYW5nZVJlY29yZHMoYSxiLGMpe2Zvcih2YXIgZD17fSxlPXt9LGY9MDtmPGIubGVuZ3RoO2YrKyl7dmFyIGc9YltmXTtleHBlY3RlZFJlY29yZFR5cGVzW2cudHlwZV0/KGcubmFtZSBpbiBjfHwoY1tnLm5hbWVdPWcub2xkVmFsdWUpLCJ1cGRhdGUiIT1nLnR5cGUmJigiYWRkIiE9Zy50eXBlP2cubmFtZSBpbiBkPyhkZWxldGUgZFtnLm5hbWVdLGRlbGV0ZSBjW2cubmFtZV0pOmVbZy5uYW1lXT0hMDpnLm5hbWUgaW4gZT9kZWxldGUgZVtnLm5hbWVdOmRbZy5uYW1lXT0hMCkpOihjb25zb2xlLmVycm9yKCJVbmtub3duIGNoYW5nZVJlY29yZCB0eXBlOiAiK2cudHlwZSksY29uc29sZS5lcnJvcihnKSl9Zm9yKHZhciBoIGluIGQpZFtoXT1hW2hdO2Zvcih2YXIgaCBpbiBlKWVbaF09dm9pZCAwO3ZhciBpPXt9O2Zvcih2YXIgaCBpbiBjKWlmKCEoaCBpbiBkfHxoIGluIGUpKXt2YXIgaj1hW2hdO2NbaF0hPT1qJiYoaVtoXT1qKX1yZXR1cm57YWRkZWQ6ZCxyZW1vdmVkOmUsY2hhbmdlZDppfX1mdW5jdGlvbiBuZXdTcGxpY2UoYSxiLGMpe3JldHVybntpbmRleDphLHJlbW92ZWQ6YixhZGRlZENvdW50OmN9fWZ1bmN0aW9uIEFycmF5U3BsaWNlKCl7fWZ1bmN0aW9uIGNhbGNTcGxpY2VzKGEsYixjLGQsZSxmKXtyZXR1cm4gYXJyYXlTcGxpY2UuY2FsY1NwbGljZXMoYSxiLGMsZCxlLGYpfWZ1bmN0aW9uIGludGVyc2VjdChhLGIsYyxkKXtyZXR1cm4gYz5ifHxhPmQ/LTE6Yj09Y3x8ZD09YT8wOmM+YT9kPmI/Yi1jOmQtYzpiPmQ/ZC1hOmItYX1mdW5jdGlvbiBtZXJnZVNwbGljZShhLGIsYyxkKXtmb3IodmFyIGU9bmV3U3BsaWNlKGIsYyxkKSxmPSExLGc9MCxoPTA7aDxhLmxlbmd0aDtoKyspe3ZhciBpPWFbaF07aWYoaS5pbmRleCs9ZywhZil7dmFyIGo9aW50ZXJzZWN0KGUuaW5kZXgsZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoLGkuaW5kZXgsaS5pbmRleCtpLmFkZGVkQ291bnQpO2lmKGo+PTApe2Euc3BsaWNlKGgsMSksaC0tLGctPWkuYWRkZWRDb3VudC1pLnJlbW92ZWQubGVuZ3RoLGUuYWRkZWRDb3VudCs9aS5hZGRlZENvdW50LWo7dmFyIGs9ZS5yZW1vdmVkLmxlbmd0aCtpLnJlbW92ZWQubGVuZ3RoLWo7aWYoZS5hZGRlZENvdW50fHxrKXt2YXIgYz1pLnJlbW92ZWQ7aWYoZS5pbmRleDxpLmluZGV4KXt2YXIgbD1lLnJlbW92ZWQuc2xpY2UoMCxpLmluZGV4LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGwsYyksYz1sfWlmKGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aD5pLmluZGV4K2kuYWRkZWRDb3VudCl7dmFyIG09ZS5yZW1vdmVkLnNsaWNlKGkuaW5kZXgraS5hZGRlZENvdW50LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsbSl9ZS5yZW1vdmVkPWMsaS5pbmRleDxlLmluZGV4JiYoZS5pbmRleD1pLmluZGV4KX1lbHNlIGY9ITB9ZWxzZSBpZihlLmluZGV4PGkuaW5kZXgpe2Y9ITAsYS5zcGxpY2UoaCwwLGUpLGgrKzt2YXIgbj1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aDtpLmluZGV4Kz1uLGcrPW59fX1mfHxhLnB1c2goZSl9ZnVuY3Rpb24gY3JlYXRlSW5pdGlhbFNwbGljZXMoYSxiKXtmb3IodmFyIGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdO3N3aXRjaChlLnR5cGUpe2Nhc2Uic3BsaWNlIjptZXJnZVNwbGljZShjLGUuaW5kZXgsZS5yZW1vdmVkLnNsaWNlKCksZS5hZGRlZENvdW50KTticmVhaztjYXNlImFkZCI6Y2FzZSJ1cGRhdGUiOmNhc2UiZGVsZXRlIjppZighaXNJbmRleChlLm5hbWUpKWNvbnRpbnVlO3ZhciBmPXRvTnVtYmVyKGUubmFtZSk7aWYoMD5mKWNvbnRpbnVlO21lcmdlU3BsaWNlKGMsZixbZS5vbGRWYWx1ZV0sMSk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKCJVbmV4cGVjdGVkIHJlY29yZCB0eXBlOiAiK0pTT04uc3RyaW5naWZ5KGUpKX19cmV0dXJuIGN9ZnVuY3Rpb24gcHJvamVjdEFycmF5U3BsaWNlcyhhLGIpe3ZhciBjPVtdO3JldHVybiBjcmVhdGVJbml0aWFsU3BsaWNlcyhhLGIpLmZvckVhY2goZnVuY3Rpb24oYil7cmV0dXJuIDE9PWIuYWRkZWRDb3VudCYmMT09Yi5yZW1vdmVkLmxlbmd0aD92b2lkKGIucmVtb3ZlZFswXSE9PWFbYi5pbmRleF0mJmMucHVzaChiKSk6dm9pZChjPWMuY29uY2F0KGNhbGNTcGxpY2VzKGEsYi5pbmRleCxiLmluZGV4K2IuYWRkZWRDb3VudCxiLnJlbW92ZWQsMCxiLnJlbW92ZWQubGVuZ3RoKSkpfSksY312YXIgdGVzdGluZ0V4cG9zZUN5Y2xlQ291bnQ9Z2xvYmFsLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50LGhhc09ic2VydmU9ZGV0ZWN0T2JqZWN0T2JzZXJ2ZSgpLGhhc0V2YWw9ZGV0ZWN0RXZhbCgpLG51bWJlcklzTmFOPWdsb2JhbC5OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGEpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYSYmZ2xvYmFsLmlzTmFOKGEpfSxjcmVhdGVPYmplY3Q9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LGlkZW50U3RhcnQ9IlskX2EtekEtWl0iLGlkZW50UGFydD0iWyRfYS16QS1aMC05XSIsaWRlbnRSZWdFeHA9bmV3IFJlZ0V4cCgiXiIraWRlbnRTdGFydCsiKyIraWRlbnRQYXJ0KyIqJCIpLHBhdGhTdGF0ZU1hY2hpbmU9e2JlZm9yZVBhdGg6e3dzOlsiYmVmb3JlUGF0aCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdLCJbIjpbImJlZm9yZUVsZW1lbnQiXSxlb2Y6WyJhZnRlclBhdGgiXX0saW5QYXRoOnt3czpbImluUGF0aCJdLCIuIjpbImJlZm9yZUlkZW50Il0sIlsiOlsiYmVmb3JlRWxlbWVudCJdLGVvZjpbImFmdGVyUGF0aCJdfSxiZWZvcmVJZGVudDp7d3M6WyJiZWZvcmVJZGVudCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdfSxpbklkZW50OntpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXSwwOlsiaW5JZGVudCIsImFwcGVuZCJdLG51bWJlcjpbImluSWRlbnQiLCJhcHBlbmQiXSx3czpbImluUGF0aCIsInB1c2giXSwiLiI6WyJiZWZvcmVJZGVudCIsInB1c2giXSwiWyI6WyJiZWZvcmVFbGVtZW50IiwicHVzaCJdLGVvZjpbImFmdGVyUGF0aCIsInB1c2giXX0sYmVmb3JlRWxlbWVudDp7d3M6WyJiZWZvcmVFbGVtZW50Il0sMDpbImFmdGVyWmVybyIsImFwcGVuZCJdLG51bWJlcjpbImluSW5kZXgiLCJhcHBlbmQiXSwiJyI6WyJpblNpbmdsZVF1b3RlIiwiYXBwZW5kIiwiIl0sJyInOlsiaW5Eb3VibGVRdW90ZSIsImFwcGVuZCIsIiJdfSxhZnRlclplcm86e3dzOlsiYWZ0ZXJFbGVtZW50IiwicHVzaCJdLCJdIjpbImluUGF0aCIsInB1c2giXX0saW5JbmRleDp7MDpbImluSW5kZXgiLCJhcHBlbmQiXSxudW1iZXI6WyJpbkluZGV4IiwiYXBwZW5kIl0sd3M6WyJhZnRlckVsZW1lbnQiXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19LGluU2luZ2xlUXVvdGU6eyInIjpbImFmdGVyRWxlbWVudCJdLGVvZjpbImVycm9yIl0sImVsc2UiOlsiaW5TaW5nbGVRdW90ZSIsImFwcGVuZCJdfSxpbkRvdWJsZVF1b3RlOnsnIic6WyJhZnRlckVsZW1lbnQiXSxlb2Y6WyJlcnJvciJdLCJlbHNlIjpbImluRG91YmxlUXVvdGUiLCJhcHBlbmQiXX0sYWZ0ZXJFbGVtZW50Ont3czpbImFmdGVyRWxlbWVudCJdLCJdIjpbImluUGF0aCIsInB1c2giXX19LGNvbnN0cnVjdG9ySXNQcml2YXRlPXt9LHBhdGhDYWNoZT17fTtQYXRoLmdldD1nZXRQYXRoLFBhdGgucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOltdLHZhbGlkOiEwLHRvU3RyaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPSIiLGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7dmFyIGM9dGhpc1tiXTthKz1pc0lkZW50KGMpP2I/Ii4iK2M6Yzpmb3JtYXRBY2Nlc3NvcihjKX1yZXR1cm4gYX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZihudWxsPT1hKXJldHVybjthPWFbdGhpc1tiXV19cmV0dXJuIGF9LGl0ZXJhdGVPYmplY3RzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKGMmJihhPWFbdGhpc1tjLTFdXSksIWlzT2JqZWN0KGEpKXJldHVybjtiKGEsdGhpc1swXSl9fSxjb21waWxlZEdldFZhbHVlRnJvbUZuOmZ1bmN0aW9uKCl7dmFyIGE9IiIsYj0ib2JqIjthKz0iaWYgKG9iaiAhPSBudWxsIjtmb3IodmFyIGMsZD0wO2Q8dGhpcy5sZW5ndGgtMTtkKyspYz10aGlzW2RdLGIrPWlzSWRlbnQoYyk/Ii4iK2M6Zm9ybWF0QWNjZXNzb3IoYyksYSs9IiAmJlxuICAgICAiK2IrIiAhPSBudWxsIjthKz0iKVxuIjt2YXIgYz10aGlzW2RdO3JldHVybiBiKz1pc0lkZW50KGMpPyIuIitjOmZvcm1hdEFjY2Vzc29yKGMpLGErPSIgIHJldHVybiAiK2IrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixhKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKCFpc09iamVjdChhKSlyZXR1cm4hMTthPWFbdGhpc1tjXV19cmV0dXJuIGlzT2JqZWN0KGEpPyhhW3RoaXNbY11dPWIsITApOiExfX0pO3ZhciBpbnZhbGlkUGF0aD1uZXcgUGF0aCgiIixjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7aW52YWxpZFBhdGgudmFsaWQ9ITEsaW52YWxpZFBhdGguZ2V0VmFsdWVGcm9tPWludmFsaWRQYXRoLnNldFZhbHVlRnJvbT1mdW5jdGlvbigpe307dmFyIE1BWF9ESVJUWV9DSEVDS19DWUNMRVM9MWUzLGVvbVRhc2tzPVtdLHJ1bkVPTT1oYXNPYnNlcnZlP2Z1bmN0aW9uKCl7dmFyIGE9e3BpbmdQb25nOiEwfSxiPSExO3JldHVybiBPYmplY3Qub2JzZXJ2ZShhLGZ1bmN0aW9uKCl7cnVuRU9NVGFza3MoKSxiPSExfSksZnVuY3Rpb24oYyl7ZW9tVGFza3MucHVzaChjKSxifHwoYj0hMCxhLnBpbmdQb25nPSFhLnBpbmdQb25nKX19KCk6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZW9tVGFza3MucHVzaChhKX19KCksb2JzZXJ2ZWRPYmplY3RDYWNoZT1bXSxvYnNlcnZlZFNldENhY2hlPVtdLGxhc3RPYnNlcnZlZFNldCxVTk9QRU5FRD0wLE9QRU5FRD0xLENMT1NFRD0yLFJFU0VUVElORz0zLG5leHRPYnNlcnZlcklkPTE7T2JzZXJ2ZXIucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPVVOT1BFTkVEKXRocm93IEVycm9yKCJPYnNlcnZlciBoYXMgYWxyZWFkeSBiZWVuIG9wZW5lZC4iKTtyZXR1cm4gYWRkVG9BbGwodGhpcyksdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLmNvbm5lY3RfKCksdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMudmFsdWVffSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJihyZW1vdmVGcm9tQWxsKHRoaXMpLHRoaXMuZGlzY29ubmVjdF8oKSx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy5zdGF0ZV89Q0xPU0VEKX0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJmRpcnR5Q2hlY2sodGhpcyl9LHJlcG9ydF86ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuY2FsbGJhY2tfLmFwcGx5KHRoaXMudGFyZ2V0XyxhKX1jYXRjaChiKXtPYnNlcnZlci5fZXJyb3JUaHJvd25EdXJpbmdDYWxsYmFjaz0hMCxjb25zb2xlLmVycm9yKCJFeGNlcHRpb24gY2F1Z2h0IGR1cmluZyBvYnNlcnZlciBjYWxsYmFjazogIisoYi5zdGFja3x8YikpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja18odm9pZCAwLCEwKSx0aGlzLnZhbHVlX319O3ZhciBjb2xsZWN0T2JzZXJ2ZXJzPSFoYXNPYnNlcnZlLGFsbE9ic2VydmVycztPYnNlcnZlci5fYWxsT2JzZXJ2ZXJzQ291bnQ9MCxjb2xsZWN0T2JzZXJ2ZXJzJiYoYWxsT2JzZXJ2ZXJzPVtdKTt2YXIgcnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITEsaGFzRGVidWdGb3JjZUZ1bGxEZWxpdmVyeT1oYXNPYnNlcnZlJiZoYXNFdmFsJiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gZXZhbCgiJVJ1bk1pY3JvdGFza3MoKSIpLCEwfWNhdGNoKGV4KXtyZXR1cm4hMX19KCk7Z2xvYmFsLlBsYXRmb3JtPWdsb2JhbC5QbGF0Zm9ybXx8e30sZ2xvYmFsLlBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50PWZ1bmN0aW9uKCl7aWYoIXJ1bm5pbmdNaWNyb3Rhc2tDaGVja3BvaW50KXtpZihoYXNEZWJ1Z0ZvcmNlRnVsbERlbGl2ZXJ5KXJldHVybiB2b2lkIGV2YWwoIiVSdW5NaWNyb3Rhc2tzKCkiKTtpZihjb2xsZWN0T2JzZXJ2ZXJzKXtydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludD0hMDt2YXIgY3ljbGVzPTAsYW55Q2hhbmdlZCx0b0NoZWNrO2Rve2N5Y2xlcysrLHRvQ2hlY2s9YWxsT2JzZXJ2ZXJzLGFsbE9ic2VydmVycz1bXSxhbnlDaGFuZ2VkPSExO2Zvcih2YXIgaT0wO2k8dG9DaGVjay5sZW5ndGg7aSsrKXt2YXIgb2JzZXJ2ZXI9dG9DaGVja1tpXTtvYnNlcnZlci5zdGF0ZV89PU9QRU5FRCYmKG9ic2VydmVyLmNoZWNrXygpJiYoYW55Q2hhbmdlZD0hMCksYWxsT2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpKX1ydW5FT01UYXNrcygpJiYoYW55Q2hhbmdlZD0hMCl9d2hpbGUoTUFYX0RJUlRZX0NIRUNLX0NZQ0xFUz5jeWNsZXMmJmFueUNoYW5nZWQpO3Rlc3RpbmdFeHBvc2VDeWNsZUNvdW50JiYoZ2xvYmFsLmRpcnR5Q2hlY2tDeWNsZUNvdW50PWN5Y2xlcykscnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITF9fX0sY29sbGVjdE9ic2VydmVycyYmKGdsb2JhbC5QbGF0Zm9ybS5jbGVhck9ic2VydmVycz1mdW5jdGlvbigpe2FsbE9ic2VydmVycz1bXX0pLE9iamVjdE9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYnNlcnZlci5wcm90b3R5cGUsYXJyYXlPYnNlcnZlOiExLGNvbm5lY3RfOmZ1bmN0aW9uKCl7aGFzT2JzZXJ2ZT90aGlzLmRpcmVjdE9ic2VydmVyXz1nZXRPYnNlcnZlZE9iamVjdCh0aGlzLHRoaXMudmFsdWVfLHRoaXMuYXJyYXlPYnNlcnZlKTp0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKX0sY29weU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYj1BcnJheS5pc0FycmF5KGEpP1tdOnt9O2Zvcih2YXIgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmKGIubGVuZ3RoPWEubGVuZ3RoKSxifSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGIsYztpZihoYXNPYnNlcnZlKXtpZighYSlyZXR1cm4hMTtjPXt9LGI9ZGlmZk9iamVjdEZyb21DaGFuZ2VSZWNvcmRzKHRoaXMudmFsdWVfLGEsYyl9ZWxzZSBjPXRoaXMub2xkT2JqZWN0XyxiPWRpZmZPYmplY3RGcm9tT2xkT2JqZWN0KHRoaXMudmFsdWVfLHRoaXMub2xkT2JqZWN0Xyk7cmV0dXJuIGRpZmZJc0VtcHR5KGIpPyExOihoYXNPYnNlcnZlfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYi5hZGRlZHx8e30sYi5yZW1vdmVkfHx7fSxiLmNoYW5nZWR8fHt9LGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfV0pLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXtoYXNPYnNlcnZlPyh0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSgpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCk6dGhpcy5vbGRPYmplY3RfPXZvaWQgMH0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJihoYXNPYnNlcnZlP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITEpOmRpcnR5Q2hlY2sodGhpcykpfSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpcmVjdE9ic2VydmVyXz90aGlzLmRpcmVjdE9ic2VydmVyXy5kZWxpdmVyKCEwKTp0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKSx0aGlzLnZhbHVlX319KSxBcnJheU9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYmplY3RPYnNlcnZlci5wcm90b3R5cGUsYXJyYXlPYnNlcnZlOiEwLGNvcHlPYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2xpY2UoKX0sY2hlY2tfOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGhhc09ic2VydmUpe2lmKCFhKXJldHVybiExO2I9cHJvamVjdEFycmF5U3BsaWNlcyh0aGlzLnZhbHVlXyxhKX1lbHNlIGI9Y2FsY1NwbGljZXModGhpcy52YWx1ZV8sMCx0aGlzLnZhbHVlXy5sZW5ndGgsdGhpcy5vbGRPYmplY3RfLDAsdGhpcy5vbGRPYmplY3RfLmxlbmd0aCk7cmV0dXJuIGImJmIubGVuZ3RoPyhoYXNPYnNlcnZlfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYl0pLCEwKTohMX19KSxBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcz1mdW5jdGlvbihhLGIsYyl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2Zvcih2YXIgZD1bYy5pbmRleCxjLnJlbW92ZWQubGVuZ3RoXSxlPWMuaW5kZXg7ZTxjLmluZGV4K2MuYWRkZWRDb3VudDspZC5wdXNoKGJbZV0pLGUrKztBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGEsZCl9KX0sUGF0aE9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYnNlcnZlci5wcm90b3R5cGUsZ2V0IHBhdGgoKXtyZXR1cm4gdGhpcy5wYXRoX30sY29ubmVjdF86ZnVuY3Rpb24oKXtoYXNPYnNlcnZlJiYodGhpcy5kaXJlY3RPYnNlcnZlcl89Z2V0T2JzZXJ2ZWRTZXQodGhpcyx0aGlzLm9iamVjdF8pKSx0aGlzLmNoZWNrXyh2b2lkIDAsITApfSxkaXNjb25uZWN0XzpmdW5jdGlvbigpe3RoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXyYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKHRoaXMpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCl9LGl0ZXJhdGVPYmplY3RzXzpmdW5jdGlvbihhKXt0aGlzLnBhdGhfLml0ZXJhdGVPYmplY3RzKHRoaXMub2JqZWN0XyxhKX0sY2hlY2tfOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy52YWx1ZV87cmV0dXJuIHRoaXMudmFsdWVfPXRoaXMucGF0aF8uZ2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0XyksYnx8YXJlU2FtZVZhbHVlKHRoaXMudmFsdWVfLGMpPyExOih0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpc10pLCEwKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXyYmdGhpcy5wYXRoXy5zZXRWYWx1ZUZyb20odGhpcy5vYmplY3RfLGEpfX0pO3ZhciBvYnNlcnZlclNlbnRpbmVsPXt9O0NvbXBvdW5kT2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe2lmKGhhc09ic2VydmUpe2Zvcih2YXIgYSxiPSExLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWlmKGE9dGhpcy5vYnNlcnZlZF9bY10sYSE9PW9ic2VydmVyU2VudGluZWwpe2I9ITA7YnJlYWt9YiYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPWdldE9ic2VydmVkU2V0KHRoaXMsYSkpfXRoaXMuY2hlY2tfKHZvaWQgMCwhdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLm9ic2VydmVkXy5sZW5ndGg7YSs9Mil0aGlzLm9ic2VydmVkX1thXT09PW9ic2VydmVyU2VudGluZWwmJnRoaXMub2JzZXJ2ZWRfW2ErMV0uY2xvc2UoKTt0aGlzLm9ic2VydmVkXy5sZW5ndGg9MCx0aGlzLnZhbHVlXy5sZW5ndGg9MCx0aGlzLmRpcmVjdE9ic2VydmVyXyYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKHRoaXMpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCl9LGFkZFBhdGg6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnN0YXRlXyE9VU5PUEVORUQmJnRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgcGF0aHMgb25jZSBzdGFydGVkLiIpO3ZhciBiPWdldFBhdGgoYik7aWYodGhpcy5vYnNlcnZlZF8ucHVzaChhLGIpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl8pe3ZhciBjPXRoaXMub2JzZXJ2ZWRfLmxlbmd0aC8yLTE7dGhpcy52YWx1ZV9bY109Yi5nZXRWYWx1ZUZyb20oYSl9fSxhZGRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXRlXyE9VU5PUEVORUQmJnRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgb2JzZXJ2ZXJzIG9uY2Ugc3RhcnRlZC4iKTtpZih0aGlzLm9ic2VydmVkXy5wdXNoKG9ic2VydmVyU2VudGluZWwsYSksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl7dmFyIGI9dGhpcy5vYnNlcnZlZF8ubGVuZ3RoLzItMTt0aGlzLnZhbHVlX1tiXT1hLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpfX0sc3RhcnRSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1PUEVORUQpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IHJlc2V0IHdoaWxlIG9wZW4iKTt0aGlzLnN0YXRlXz1SRVNFVFRJTkcsdGhpcy5kaXNjb25uZWN0XygpfSxmaW5pc2hSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IGZpbmlzaFJlc2V0IGFmdGVyIHN0YXJ0UmVzZXQiKTtyZXR1cm4gdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMuY29ubmVjdF8oKSx0aGlzLnZhbHVlX30saXRlcmF0ZU9iamVjdHNfOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTA7Yzx0aGlzLm9ic2VydmVkXy5sZW5ndGg7Yys9MiliPXRoaXMub2JzZXJ2ZWRfW2NdLGIhPT1vYnNlcnZlclNlbnRpbmVsJiZ0aGlzLm9ic2VydmVkX1tjKzFdLml0ZXJhdGVPYmplY3RzKGIsYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTA7ZDx0aGlzLm9ic2VydmVkXy5sZW5ndGg7ZCs9Mil7dmFyIGUsZj10aGlzLm9ic2VydmVkX1tkXSxnPXRoaXMub2JzZXJ2ZWRfW2QrMV07aWYoZj09PW9ic2VydmVyU2VudGluZWwpe3ZhciBoPWc7ZT10aGlzLnN0YXRlXz09PVVOT1BFTkVEP2gub3Blbih0aGlzLmRlbGl2ZXIsdGhpcyk6aC5kaXNjYXJkQ2hhbmdlcygpfWVsc2UgZT1nLmdldFZhbHVlRnJvbShmKTtiP3RoaXMudmFsdWVfW2QvMl09ZTphcmVTYW1lVmFsdWUoZSx0aGlzLnZhbHVlX1tkLzJdKXx8KGM9Y3x8W10sY1tkLzJdPXRoaXMudmFsdWVfW2QvMl0sdGhpcy52YWx1ZV9bZC8yXT1lKX1yZXR1cm4gYz8odGhpcy5yZXBvcnRfKFt0aGlzLnZhbHVlXyxjLHRoaXMub2JzZXJ2ZWRfXSksITApOiExfX0pLE9ic2VydmVyVHJhbnNmb3JtLnByb3RvdHlwZT17b3BlbjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNhbGxiYWNrXz1hLHRoaXMudGFyZ2V0Xz1iLHRoaXMudmFsdWVfPXRoaXMuZ2V0VmFsdWVGbl8odGhpcy5vYnNlcnZhYmxlXy5vcGVuKHRoaXMub2JzZXJ2ZWRDYWxsYmFja18sdGhpcykpLHRoaXMudmFsdWVffSxvYnNlcnZlZENhbGxiYWNrXzpmdW5jdGlvbihhKXtpZihhPXRoaXMuZ2V0VmFsdWVGbl8oYSksIWFyZVNhbWVWYWx1ZShhLHRoaXMudmFsdWVfKSl7dmFyIGI9dGhpcy52YWx1ZV87dGhpcy52YWx1ZV89YSx0aGlzLmNhbGxiYWNrXy5jYWxsKHRoaXMudGFyZ2V0Xyx0aGlzLnZhbHVlXyxiKX19LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVfPXRoaXMuZ2V0VmFsdWVGbl8odGhpcy5vYnNlcnZhYmxlXy5kaXNjYXJkQ2hhbmdlcygpKSx0aGlzLnZhbHVlX30sZGVsaXZlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9ic2VydmFibGVfLmRlbGl2ZXIoKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dGhpcy5zZXRWYWx1ZUZuXyhhKSwhdGhpcy5kb250UGFzc1Rocm91Z2hTZXRfJiZ0aGlzLm9ic2VydmFibGVfLnNldFZhbHVlP3RoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWUoYSk6dm9pZCAwfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMub2JzZXJ2YWJsZV8mJnRoaXMub2JzZXJ2YWJsZV8uY2xvc2UoKSx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLm9ic2VydmFibGVfPXZvaWQgMCx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5nZXRWYWx1ZUZuXz12b2lkIDAsdGhpcy5zZXRWYWx1ZUZuXz12b2lkIDB9fTt2YXIgZXhwZWN0ZWRSZWNvcmRUeXBlcz17YWRkOiEwLHVwZGF0ZTohMCwiZGVsZXRlIjohMH0sRURJVF9MRUFWRT0wLEVESVRfVVBEQVRFPTEsRURJVF9BREQ9MixFRElUX0RFTEVURT0zO0FycmF5U3BsaWNlLnByb3RvdHlwZT17Y2FsY0VkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mLWUrMSxoPWMtYisxLGk9bmV3IEFycmF5KGcpLGo9MDtnPmo7aisrKWlbal09bmV3IEFycmF5KGgpLGlbal1bMF09ajtmb3IodmFyIGs9MDtoPms7aysrKWlbMF1ba109aztmb3IodmFyIGo9MTtnPmo7aisrKWZvcih2YXIgaz0xO2g+aztrKyspaWYodGhpcy5lcXVhbHMoYVtiK2stMV0sZFtlK2otMV0pKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX0sc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaChFRElUX0xFQVZFKTooZS5wdXNoKEVESVRfVVBEQVRFKSxkPWcpLGItLSxjLS0pOmY9PWg/KGUucHVzaChFRElUX0RFTEVURSksYi0tLGQ9aCk6KGUucHVzaChFRElUX0FERCksYy0tLGQ9aSl9ZWxzZSBlLnB1c2goRURJVF9ERUxFVEUpLGItLTtlbHNlIGUucHVzaChFRElUX0FERCksYy0tO3JldHVybiBlLnJldmVyc2UoKSxlfSxjYWxjU3BsaWNlczpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9MCxoPTAsaT1NYXRoLm1pbihjLWIsZi1lKTtpZigwPT1iJiYwPT1lJiYoZz10aGlzLnNoYXJlZFByZWZpeChhLGQsaSkpLGM9PWEubGVuZ3RoJiZmPT1kLmxlbmd0aCYmKGg9dGhpcy5zaGFyZWRTdWZmaXgoYSxkLGktZykpLGIrPWcsZSs9ZyxjLT1oLGYtPWgsYy1iPT0wJiZmLWU9PTApcmV0dXJuW107aWYoYj09Yyl7Zm9yKHZhciBqPW5ld1NwbGljZShiLFtdLDApO2Y+ZTspai5yZW1vdmVkLnB1c2goZFtlKytdKTtyZXR1cm5bal19aWYoZT09ZilyZXR1cm5bbmV3U3BsaWNlKGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIEVESVRfTEVBVkU6aiYmKGwucHVzaChqKSxqPXZvaWQgMCksbSsrLG4rKzticmVhaztjYXNlIEVESVRfVVBEQVRFOmp8fChqPW5ld1NwbGljZShtLFtdLDApKSxqLmFkZGVkQ291bnQrKyxtKyssai5yZW1vdmVkLnB1c2goZFtuXSksbisrO2JyZWFrO2Nhc2UgRURJVF9BREQ6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIEVESVRfREVMRVRFOmp8fChqPW5ld1NwbGljZShtLFtdLDApKSxqLnJlbW92ZWQucHVzaChkW25dKSxuKyt9cmV0dXJuIGomJmwucHVzaChqKSxsfSxzaGFyZWRQcmVmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wO2M+ZDtkKyspaWYoIXRoaXMuZXF1YWxzKGFbZF0sYltkXSkpcmV0dXJuIGQ7cmV0dXJuIGN9LHNoYXJlZFN1ZmZpeDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsZj0wO2M+ZiYmdGhpcy5lcXVhbHMoYVstLWRdLGJbLS1lXSk7KWYrKztyZXR1cm4gZn0sY2FsY3VsYXRlU3BsaWNlczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNhbGNTcGxpY2VzKGEsMCxhLmxlbmd0aCxiLDAsYi5sZW5ndGgpfSxlcXVhbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9fTt2YXIgYXJyYXlTcGxpY2U9bmV3IEFycmF5U3BsaWNlO2dsb2JhbC5PYnNlcnZlcj1PYnNlcnZlcixnbG9iYWwuT2JzZXJ2ZXIucnVuRU9NXz1ydW5FT00sZ2xvYmFsLk9ic2VydmVyLm9ic2VydmVyU2VudGluZWxfPW9ic2VydmVyU2VudGluZWwsZ2xvYmFsLk9ic2VydmVyLmhhc09iamVjdE9ic2VydmU9aGFzT2JzZXJ2ZSxnbG9iYWwuQXJyYXlPYnNlcnZlcj1BcnJheU9ic2VydmVyLGdsb2JhbC5BcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXJyYXlTcGxpY2UuY2FsY3VsYXRlU3BsaWNlcyhhLGIpfSxnbG9iYWwuQXJyYXlTcGxpY2U9QXJyYXlTcGxpY2UsZ2xvYmFsLk9iamVjdE9ic2VydmVyPU9iamVjdE9ic2VydmVyLGdsb2JhbC5QYXRoT2JzZXJ2ZXI9UGF0aE9ic2VydmVyLGdsb2JhbC5Db21wb3VuZE9ic2VydmVyPUNvbXBvdW5kT2JzZXJ2ZXIsZ2xvYmFsLlBhdGg9UGF0aCxnbG9iYWwuT2JzZXJ2ZXJUcmFuc2Zvcm09T2JzZXJ2ZXJUcmFuc2Zvcm19KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGU/Z2xvYmFsOnRoaXN8fHdpbmRvdyksUGxhdGZvcm0uZmxhZ3Muc2hhZG93Pyh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGw9e30sZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIGNocm9tZSYmY2hyb21lLmFwcCYmY2hyb21lLmFwcC5ydW50aW1lKXJldHVybiExO2lmKG5hdmlnYXRvci5nZXREZXZpY2VTdG9yYWdlKXJldHVybiExO3RyeXt2YXIgYT1uZXcgRnVuY3Rpb24oInJldHVybiB0cnVlOyIpO3JldHVybiBhKCl9Y2F0Y2goYil7cmV0dXJuITF9fWZ1bmN0aW9uIGMoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gZChhLGIpe2Zvcih2YXIgYz1MKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtLKGEsZSxNKGIsZSkpfXJldHVybiBhfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9TChiKSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07c3dpdGNoKGUpe2Nhc2UiYXJndW1lbnRzIjpjYXNlImNhbGxlciI6Y2FzZSJsZW5ndGgiOmNhc2UibmFtZSI6Y2FzZSJwcm90b3R5cGUiOmNhc2UidG9TdHJpbmciOmNvbnRpbnVlfUsoYSxlLE0oYixlKSl9cmV0dXJuIGF9ZnVuY3Rpb24gZihhLGIpe2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGJbY11pbiBhKXJldHVybiBiW2NdfWZ1bmN0aW9uIGcoYSxiLGMpe04udmFsdWU9YyxLKGEsYixOKX1mdW5jdGlvbiBoKGEpe3ZhciBiPWEuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYz1HLmdldChiKTtpZihjKXJldHVybiBjO3ZhciBkPWgoYiksZT12KGQpO3JldHVybiBzKGIsZSxhKSxlfWZ1bmN0aW9uIGkoYSxiKXtxKGEsYiwhMCl9ZnVuY3Rpb24gaihhLGIpe3EoYixhLCExKX1mdW5jdGlvbiBrKGEpe3JldHVybi9eb25bYS16XSskLy50ZXN0KGEpfWZ1bmN0aW9uIGwoYSl7cmV0dXJuL15cd1thLXpBLVpfMC05XSokLy50ZXN0KGEpfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIEomJmwoYSk/bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcy5pbXBsLiIrYSk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdfX1mdW5jdGlvbiBuKGEpe3JldHVybiBKJiZsKGEpP25ldyBGdW5jdGlvbigidiIsInRoaXMuaW1wbC4iK2ErIiA9IHYiKTpmdW5jdGlvbihiKXt0aGlzLmltcGxbYV09Yn19ZnVuY3Rpb24gbyhhKXtyZXR1cm4gSiYmbChhKT9uZXcgRnVuY3Rpb24oInJldHVybiB0aGlzLmltcGwuIithKyIuYXBwbHkodGhpcy5pbXBsLCBhcmd1bWVudHMpIik6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX1mdW5jdGlvbiBwKGEsYil7dHJ5e3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYil9Y2F0Y2goYyl7cmV0dXJuIFB9fWZ1bmN0aW9uIHEoYixjLGQpe2Zvcih2YXIgZT1MKGIpLGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGc9ZVtmXTtpZigicG9seW1lckJsYWNrTGlzdF8iIT09ZyYmIShnIGluIGN8fGIucG9seW1lckJsYWNrTGlzdF8mJmIucG9seW1lckJsYWNrTGlzdF9bZ10pKXtPJiZiLl9fbG9va3VwR2V0dGVyX18oZyk7dmFyIGgsaSxqPXAoYixnKTtpZihkJiYiZnVuY3Rpb24iPT10eXBlb2Ygai52YWx1ZSljW2ddPW8oZyk7ZWxzZXt2YXIgbD1rKGcpO2g9bD9hLmdldEV2ZW50SGFuZGxlckdldHRlcihnKTptKGcpLChqLndyaXRhYmxlfHxqLnNldCkmJihpPWw/YS5nZXRFdmVudEhhbmRsZXJTZXR0ZXIoZyk6bihnKSksSyhjLGcse2dldDpoLHNldDppLGNvbmZpZ3VyYWJsZTpqLmNvbmZpZ3VyYWJsZSxlbnVtZXJhYmxlOmouZW51bWVyYWJsZX0pfX19fWZ1bmN0aW9uIHIoYSxiLGMpe3ZhciBkPWEucHJvdG90eXBlO3MoZCxiLGMpLGUoYixhKX1mdW5jdGlvbiBzKGEsYixkKXt2YXIgZT1iLnByb3RvdHlwZTtjKHZvaWQgMD09PUcuZ2V0KGEpKSxHLnNldChhLGIpLEguc2V0KGUsYSksaShhLGUpLGQmJmooZSxkKSxnKGUsImNvbnN0cnVjdG9yIixiKSxiLnByb3RvdHlwZT1lfWZ1bmN0aW9uIHQoYSxiKXtyZXR1cm4gRy5nZXQoYi5wcm90b3R5cGUpPT09YX1mdW5jdGlvbiB1KGEpe3ZhciBiPU9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxjPWgoYiksZD12KGMpO3JldHVybiBzKGIsZCxhKSxkfWZ1bmN0aW9uIHYoYSl7ZnVuY3Rpb24gYihiKXthLmNhbGwodGhpcyxiKX12YXIgYz1PYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKTtyZXR1cm4gYy5jb25zdHJ1Y3Rvcj1iLGIucHJvdG90eXBlPWMsYn1mdW5jdGlvbiB3KGEpe3JldHVybiBhIGluc3RhbmNlb2YgSS5FdmVudFRhcmdldHx8YSBpbnN0YW5jZW9mIEkuRXZlbnR8fGEgaW5zdGFuY2VvZiBJLlJhbmdlfHxhIGluc3RhbmNlb2YgSS5ET01JbXBsZW1lbnRhdGlvbnx8YSBpbnN0YW5jZW9mIEkuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfHxhIGluc3RhbmNlb2YgSS5Gb3JtRGF0YXx8SS5XZWJHTFJlbmRlcmluZ0NvbnRleHQmJmEgaW5zdGFuY2VvZiBJLldlYkdMUmVuZGVyaW5nQ29udGV4dH1mdW5jdGlvbiB4KGEpe3JldHVybiBSJiZhIGluc3RhbmNlb2YgUnx8YSBpbnN0YW5jZW9mIFR8fGEgaW5zdGFuY2VvZiBTfHxhIGluc3RhbmNlb2YgVXx8YSBpbnN0YW5jZW9mIFZ8fGEgaW5zdGFuY2VvZiBRfHxhIGluc3RhbmNlb2YgV3x8YSBpbnN0YW5jZW9mIFp8fFgmJmEgaW5zdGFuY2VvZiBYfHxZJiZhIGluc3RhbmNlb2YgWX1mdW5jdGlvbiB5KGEpe3JldHVybiBudWxsPT09YT9udWxsOihjKHgoYSkpLGEucG9seW1lcldyYXBwZXJffHwoYS5wb2x5bWVyV3JhcHBlcl89bmV3KGgoYSkpKGEpKSl9ZnVuY3Rpb24geihhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYyh3KGEpKSxhLmltcGwpfWZ1bmN0aW9uIEEoYSl7cmV0dXJuIGEmJncoYSk/eihhKTphfWZ1bmN0aW9uIEIoYSl7cmV0dXJuIGEmJiF3KGEpP3koYSk6YX1mdW5jdGlvbiBDKGEsYil7bnVsbCE9PWImJihjKHgoYSkpLGModm9pZCAwPT09Ynx8dyhiKSksYS5wb2x5bWVyV3JhcHBlcl89Yil9ZnVuY3Rpb24gRChhLGIsYyl7JC5nZXQ9YyxLKGEucHJvdG90eXBlLGIsJCl9ZnVuY3Rpb24gRShhLGIpe0QoYSxiLGZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5pbXBsW2JdKX0pfWZ1bmN0aW9uIEYoYSxiKXthLmZvckVhY2goZnVuY3Rpb24oYSl7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7dmFyIGE9Qih0aGlzKTtyZXR1cm4gYVtiXS5hcHBseShhLGFyZ3VtZW50cyl9fSl9KX12YXIgRz1uZXcgV2Vha01hcCxIPW5ldyBXZWFrTWFwLEk9T2JqZWN0LmNyZWF0ZShudWxsKSxKPWIoKSxLPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxMPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLE09T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixOPXt2YWx1ZTp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITB9O0wod2luZG93KTt2YXIgTz0vRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxQPXtnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5jdGlvbigpe30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9LFE9d2luZG93LkRPTUltcGxlbWVudGF0aW9uLFI9d2luZG93LkV2ZW50VGFyZ2V0LFM9d2luZG93LkV2ZW50LFQ9d2luZG93Lk5vZGUsVT13aW5kb3cuV2luZG93LFY9d2luZG93LlJhbmdlLFc9d2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxYPXdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQsWT13aW5kb3cuU1ZHRWxlbWVudEluc3RhbmNlLFo9d2luZG93LkZvcm1EYXRhLCQ9e2dldDp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9O2EuYXNzZXJ0PWMsYS5jb25zdHJ1Y3RvclRhYmxlPUcsYS5kZWZpbmVHZXR0ZXI9RCxhLmRlZmluZVdyYXBHZXR0ZXI9RSxhLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyPUYsYS5pc1dyYXBwZXI9dyxhLmlzV3JhcHBlckZvcj10LGEubWl4aW49ZCxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlPUgsYS5vbmVPZj1mLGEucmVnaXN0ZXJPYmplY3Q9dSxhLnJlZ2lzdGVyV3JhcHBlcj1yLGEucmV3cmFwPUMsYS51bndyYXA9eixhLnVud3JhcElmTmVlZGVkPUEsYS53cmFwPXksYS53cmFwSWZOZWVkZWQ9QixhLndyYXBwZXJzPUl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtnPSExO3ZhciBhPWYuc2xpY2UoMCk7Zj1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdKCl9ZnVuY3Rpb24gYyhhKXtmLnB1c2goYSksZ3x8KGc9ITAsZChiLDApKX12YXIgZCxlPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyLGY9W10sZz0hMTtpZihlKXt2YXIgaD0xLGk9bmV3IGUoYiksaj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShoKTtpLm9ic2VydmUoaix7Y2hhcmFjdGVyRGF0YTohMH0pLGQ9ZnVuY3Rpb24oKXtoPShoKzEpJTIsai5kYXRhPWh9fWVsc2UgZD13aW5kb3cuc2V0SW1tZWRpYXRlfHx3aW5kb3cuc2V0VGltZW91dDthLnNldEVuZE9mTWljcm90YXNrPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtwfHwoayhjKSxwPSEwKX1mdW5jdGlvbiBjKCl7cD0hMTtkbyBmb3IodmFyIGE9by5zbGljZSgpLGI9ITEsYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLGU9ZC50YWtlUmVjb3JkcygpO2YoZCksZS5sZW5ndGgmJihkLmNhbGxiYWNrXyhlLGQpLGI9ITApfXdoaWxlKGIpfWZ1bmN0aW9uIGQoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1uZXcgbS5Ob2RlTGlzdCx0aGlzLnJlbW92ZWROb2Rlcz1uZXcgbS5Ob2RlTGlzdCx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBlKGEsYil7Zm9yKDthO2E9YS5wYXJlbnROb2RlKXt2YXIgYz1uLmdldChhKTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO2Uub3B0aW9ucy5zdWJ0cmVlJiZlLmFkZFRyYW5zaWVudE9ic2VydmVyKGIpfX19ZnVuY3Rpb24gZihhKXtmb3IodmFyIGI9MDtiPGEubm9kZXNfLmxlbmd0aDtiKyspe3ZhciBjPWEubm9kZXNfW2JdLGQ9bi5nZXQoYyk7aWYoIWQpcmV0dXJuO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2Yub2JzZXJ2ZXI9PT1hJiZmLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfX19ZnVuY3Rpb24gZyhhLGMsZSl7Zm9yKHZhciBmPU9iamVjdC5jcmVhdGUobnVsbCksZz1PYmplY3QuY3JlYXRlKG51bGwpLGg9YTtoO2g9aC5wYXJlbnROb2RlKXt2YXIgaT1uLmdldChoKTtpZihpKWZvcih2YXIgaj0wO2o8aS5sZW5ndGg7aisrKXt2YXIgaz1pW2pdLGw9ay5vcHRpb25zO2lmKChoPT09YXx8bC5zdWJ0cmVlKSYmISgiYXR0cmlidXRlcyI9PT1jJiYhbC5hdHRyaWJ1dGVzfHwiYXR0cmlidXRlcyI9PT1jJiZsLmF0dHJpYnV0ZUZpbHRlciYmKG51bGwhPT1lLm5hbWVzcGFjZXx8LTE9PT1sLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGUubmFtZSkpfHwiY2hhcmFjdGVyRGF0YSI9PT1jJiYhbC5jaGFyYWN0ZXJEYXRhfHwiY2hpbGRMaXN0Ij09PWMmJiFsLmNoaWxkTGlzdCkpe3ZhciBtPWsub2JzZXJ2ZXI7ZlttLnVpZF9dPW0sKCJhdHRyaWJ1dGVzIj09PWMmJmwuYXR0cmlidXRlT2xkVmFsdWV8fCJjaGFyYWN0ZXJEYXRhIj09PWMmJmwuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKSYmKGdbbS51aWRfXT1lLm9sZFZhbHVlKX19fXZhciBvPSExO2Zvcih2YXIgcCBpbiBmKXt2YXIgbT1mW3BdLHE9bmV3IGQoYyxhKTsibmFtZSJpbiBlJiYibmFtZXNwYWNlImluIGUmJihxLmF0dHJpYnV0ZU5hbWU9ZS5uYW1lLHEuYXR0cmlidXRlTmFtZXNwYWNlPWUubmFtZXNwYWNlKSxlLmFkZGVkTm9kZXMmJihxLmFkZGVkTm9kZXM9ZS5hZGRlZE5vZGVzKSxlLnJlbW92ZWROb2RlcyYmKHEucmVtb3ZlZE5vZGVzPWUucmVtb3ZlZE5vZGVzKSxlLnByZXZpb3VzU2libGluZyYmKHEucHJldmlvdXNTaWJsaW5nPWUucHJldmlvdXNTaWJsaW5nKSxlLm5leHRTaWJsaW5nJiYocS5uZXh0U2libGluZz1lLm5leHRTaWJsaW5nKSx2b2lkIDAhPT1nW3BdJiYocS5vbGRWYWx1ZT1nW3BdKSxtLnJlY29yZHNfLnB1c2gocSksbz0hMH1vJiZiKCl9ZnVuY3Rpb24gaChhKXtpZih0aGlzLmNoaWxkTGlzdD0hIWEuY2hpbGRMaXN0LHRoaXMuc3VidHJlZT0hIWEuc3VidHJlZSx0aGlzLmF0dHJpYnV0ZXM9ImF0dHJpYnV0ZXMiaW4gYXx8ISgiYXR0cmlidXRlT2xkVmFsdWUiaW4gYXx8ImF0dHJpYnV0ZUZpbHRlciJpbiBhKT8hIWEuYXR0cmlidXRlczohMCx0aGlzLmNoYXJhY3RlckRhdGE9ImNoYXJhY3RlckRhdGFPbGRWYWx1ZSJpbiBhJiYhKCJjaGFyYWN0ZXJEYXRhImluIGEpPyEwOiEhYS5jaGFyYWN0ZXJEYXRhLCF0aGlzLmF0dHJpYnV0ZXMmJihhLmF0dHJpYnV0ZU9sZFZhbHVlfHwiYXR0cmlidXRlRmlsdGVyImluIGEpfHwhdGhpcy5jaGFyYWN0ZXJEYXRhJiZhLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSl0aHJvdyBuZXcgVHlwZUVycm9yO2lmKHRoaXMuY2hhcmFjdGVyRGF0YT0hIWEuY2hhcmFjdGVyRGF0YSx0aGlzLmF0dHJpYnV0ZU9sZFZhbHVlPSEhYS5hdHRyaWJ1dGVPbGRWYWx1ZSx0aGlzLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT0hIWEuY2hhcmFjdGVyRGF0YU9sZFZhbHVlLCJhdHRyaWJ1dGVGaWx0ZXIiaW4gYSl7aWYobnVsbD09YS5hdHRyaWJ1dGVGaWx0ZXJ8fCJvYmplY3QiIT10eXBlb2YgYS5hdHRyaWJ1dGVGaWx0ZXIpdGhyb3cgbmV3IFR5cGVFcnJvcjt0aGlzLmF0dHJpYnV0ZUZpbHRlcj1xLmNhbGwoYS5hdHRyaWJ1dGVGaWx0ZXIpfWVsc2UgdGhpcy5hdHRyaWJ1dGVGaWx0ZXI9bnVsbH1mdW5jdGlvbiBpKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89KytyLG8ucHVzaCh0aGlzKX1mdW5jdGlvbiBqKGEsYixjKXt0aGlzLm9ic2VydmVyPWEsdGhpcy50YXJnZXQ9Yix0aGlzLm9wdGlvbnM9Yyx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W119dmFyIGs9YS5zZXRFbmRPZk1pY3JvdGFzayxsPWEud3JhcElmTmVlZGVkLG09YS53cmFwcGVycyxuPW5ldyBXZWFrTWFwLG89W10scD0hMSxxPUFycmF5LnByb3RvdHlwZS5zbGljZSxyPTA7aS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXthPWwoYSk7dmFyIGMsZD1uZXcgaChiKSxlPW4uZ2V0KGEpO2V8fG4uc2V0KGEsZT1bXSk7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspZVtmXS5vYnNlcnZlcj09PXRoaXMmJihjPWVbZl0sYy5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKSxjLm9wdGlvbnM9ZCk7Y3x8KGM9bmV3IGoodGhpcyxhLGQpLGUucHVzaChjKSx0aGlzLm5vZGVzXy5wdXNoKGEpKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW4uZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19LGoucHJvdG90eXBlPXthZGRUcmFuc2llbnRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZihhIT09dGhpcy50YXJnZXQpe3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGEpO3ZhciBiPW4uZ2V0KGEpO2J8fG4uc2V0KGEsYj1bXSksYi5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylmb3IodmFyIGM9YVtiXSxkPW4uZ2V0KGMpLGU9MDtlPGQubGVuZ3RoO2UrKylpZihkW2VdPT09dGhpcyl7ZC5zcGxpY2UoZSwxKTticmVha319fSxhLmVucXVldWVNdXRhdGlvbj1nLGEucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnM9ZSxhLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9aSxhLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXt0aGlzLnJvb3Q9YSx0aGlzLnBhcmVudD1ifWZ1bmN0aW9uIGMoYSxiKXtpZihhLnRyZWVTY29wZV8hPT1iKXthLnRyZWVTY29wZV89Yjtmb3IodmFyIGQ9YS5zaGFkb3dSb290O2Q7ZD1kLm9sZGVyU2hhZG93Um9vdClkLnRyZWVTY29wZV8ucGFyZW50PWI7Zm9yKHZhciBlPWEuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyljKGUsYil9fWZ1bmN0aW9uIGQoYyl7aWYoYyBpbnN0YW5jZW9mIGEud3JhcHBlcnMuV2luZG93LGMudHJlZVNjb3BlXylyZXR1cm4gYy50cmVlU2NvcGVfO3ZhciBlLGY9Yy5wYXJlbnROb2RlO3JldHVybiBlPWY/ZChmKTpuZXcgYihjLG51bGwpLGMudHJlZVNjb3BlXz1lfWIucHJvdG90eXBlPXtnZXQgcmVuZGVyZXIoKXtyZXR1cm4gdGhpcy5yb290IGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290P2EuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMucm9vdC5ob3N0KTpudWxsfSxjb250YWluczpmdW5jdGlvbihhKXtmb3IoO2E7YT1hLnBhcmVudClpZihhPT09dGhpcylyZXR1cm4hMDtyZXR1cm4hMX19LGEuVHJlZVNjb3BlPWIsYS5nZXRUcmVlU2NvcGU9ZCxhLnNldFRyZWVTY29wZT1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhIGluc3RhbmNlb2YgUS5TaGFkb3dSb290fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIEwoYSkucm9vdH1mdW5jdGlvbiBkKGEsZCl7dmFyIGg9W10saT1hO2ZvcihoLnB1c2goaSk7aTspe3ZhciBqPWcoaSk7aWYoaiYmai5sZW5ndGg+MCl7Zm9yKHZhciBrPTA7azxqLmxlbmd0aDtrKyspe3ZhciBtPWpba107aWYoZihtKSl7dmFyIG49YyhtKSxvPW4ub2xkZXJTaGFkb3dSb290O28mJmgucHVzaChvKX1oLnB1c2gobSl9aT1qW2oubGVuZ3RoLTFdfWVsc2UgaWYoYihpKSl7aWYobChhLGkpJiZlKGQpKWJyZWFrO2k9aS5ob3N0LGgucHVzaChpKX1lbHNlIGk9aS5wYXJlbnROb2RlLGkmJmgucHVzaChpKX1yZXR1cm4gaH1mdW5jdGlvbiBlKGEpe2lmKCFhKXJldHVybiExO3N3aXRjaChhLnR5cGUpe2Nhc2UiYWJvcnQiOmNhc2UiZXJyb3IiOmNhc2Uic2VsZWN0IjpjYXNlImNoYW5nZSI6Y2FzZSJsb2FkIjpjYXNlInJlc2V0IjpjYXNlInJlc2l6ZSI6Y2FzZSJzY3JvbGwiOmNhc2Uic2VsZWN0c3RhcnQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBIVE1MU2hhZG93RWxlbWVudH1mdW5jdGlvbiBnKGIpe3JldHVybiBhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzKGIpfWZ1bmN0aW9uIGgoYSxiKXtpZigwPT09YS5sZW5ndGgpcmV0dXJuIGI7YiBpbnN0YW5jZW9mIFEuV2luZG93JiYoYj1iLmRvY3VtZW50KTtmb3IodmFyIGM9TChiKSxkPWFbMF0sZT1MKGQpLGY9aihjLGUpLGc9MDtnPGEubGVuZ3RoO2crKyl7dmFyIGg9YVtnXTtpZihMKGgpPT09ZilyZXR1cm4gaH1yZXR1cm4gYVthLmxlbmd0aC0xXX1mdW5jdGlvbiBpKGEpe2Zvcih2YXIgYj1bXTthO2E9YS5wYXJlbnQpYi5wdXNoKGEpO3JldHVybiBifWZ1bmN0aW9uIGooYSxiKXtmb3IodmFyIGM9aShhKSxkPWkoYiksZT1udWxsO2MubGVuZ3RoPjAmJmQubGVuZ3RoPjA7KXt2YXIgZj1jLnBvcCgpLGc9ZC5wb3AoKTtpZihmIT09ZylicmVhaztlPWZ9cmV0dXJuIGV9ZnVuY3Rpb24gayhhLGIsYyl7YiBpbnN0YW5jZW9mIFEuV2luZG93JiYoYj1iLmRvY3VtZW50KTt2YXIgZSxmPUwoYiksZz1MKGMpLGg9ZChjLGEpLGU9aihmLGcpO2V8fChlPWcucm9vdCk7Zm9yKHZhciBpPWU7aTtpPWkucGFyZW50KWZvcih2YXIgaz0wO2s8aC5sZW5ndGg7aysrKXt2YXIgbD1oW2tdO2lmKEwobCk9PT1pKXJldHVybiBsfXJldHVybiBudWxsfWZ1bmN0aW9uIGwoYSxiKXtyZXR1cm4gTChhKT09PUwoYil9ZnVuY3Rpb24gbShhKXtpZighUy5nZXQoYSkmJihTLnNldChhLCEwKSxuKFAoYSksUChhLnRhcmdldCkpLEopKXt2YXIgYj1KO3Rocm93IEo9bnVsbCxifX1mdW5jdGlvbiBuKGIsYyl7aWYoVC5nZXQoYikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkU3RhdGVFcnJvciIpO1Quc2V0KGIsITApLGEucmVuZGVyQWxsUGVuZGluZygpOwp2YXIgZSxmLGcsaD1iLnR5cGU7aWYoImxvYWQiPT09aCYmIWIuYnViYmxlcyl7dmFyIGk9YztpIGluc3RhbmNlb2YgUS5Eb2N1bWVudCYmKGc9aS5kZWZhdWx0VmlldykmJihmPWksZT1bXSl9aWYoIWUpaWYoYyBpbnN0YW5jZW9mIFEuV2luZG93KWc9YyxlPVtdO2Vsc2UgaWYoZT1kKGMsYiksImxvYWQiIT09Yi50eXBlKXt2YXIgaT1lW2UubGVuZ3RoLTFdO2kgaW5zdGFuY2VvZiBRLkRvY3VtZW50JiYoZz1pLmRlZmF1bHRWaWV3KX1yZXR1cm4gXy5zZXQoYixlKSxvKGIsZSxnLGYpJiZwKGIsZSxnLGYpJiZxKGIsZSxnLGYpLFguc2V0KGIsYWIpLFYuZGVsZXRlKGIsbnVsbCksVC5kZWxldGUoYiksYi5kZWZhdWx0UHJldmVudGVkfWZ1bmN0aW9uIG8oYSxiLGMsZCl7dmFyIGU9YmI7aWYoYyYmIXIoYyxhLGUsYixkKSlyZXR1cm4hMTtmb3IodmFyIGY9Yi5sZW5ndGgtMTtmPjA7Zi0tKWlmKCFyKGJbZl0sYSxlLGIsZCkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gcChhLGIsYyxkKXt2YXIgZT1jYixmPWJbMF18fGM7cmV0dXJuIHIoZixhLGUsYixkKX1mdW5jdGlvbiBxKGEsYixjLGQpe2Zvcih2YXIgZT1kYixmPTE7ZjxiLmxlbmd0aDtmKyspaWYoIXIoYltmXSxhLGUsYixkKSlyZXR1cm47YyYmYi5sZW5ndGg+MCYmcihjLGEsZSxiLGQpfWZ1bmN0aW9uIHIoYSxiLGMsZCxlKXt2YXIgZj1SLmdldChhKTtpZighZilyZXR1cm4hMDt2YXIgZz1lfHxoKGQsYSk7aWYoZz09PWEpe2lmKGM9PT1iYilyZXR1cm4hMDtjPT09ZGImJihjPWNiKX1lbHNlIGlmKGM9PT1kYiYmIWIuYnViYmxlcylyZXR1cm4hMDtpZigicmVsYXRlZFRhcmdldCJpbiBiKXt2YXIgaT1PKGIpLGo9aS5yZWxhdGVkVGFyZ2V0O2lmKGope2lmKGogaW5zdGFuY2VvZiBPYmplY3QmJmouYWRkRXZlbnRMaXN0ZW5lcil7dmFyIGw9UChqKSxtPWsoYixhLGwpO2lmKG09PT1nKXJldHVybiEwfWVsc2UgbT1udWxsO1cuc2V0KGIsbSl9fVguc2V0KGIsYyk7dmFyIG49Yi50eXBlLG89ITE7VS5zZXQoYixnKSxWLnNldChiLGEpLGYuZGVwdGgrKztmb3IodmFyIHA9MCxxPWYubGVuZ3RoO3E+cDtwKyspe3ZhciByPWZbcF07aWYoci5yZW1vdmVkKW89ITA7ZWxzZSBpZighKHIudHlwZSE9PW58fCFyLmNhcHR1cmUmJmM9PT1iYnx8ci5jYXB0dXJlJiZjPT09ZGIpKXRyeXtpZigiZnVuY3Rpb24iPT10eXBlb2Ygci5oYW5kbGVyP3IuaGFuZGxlci5jYWxsKGEsYik6ci5oYW5kbGVyLmhhbmRsZUV2ZW50KGIpLFouZ2V0KGIpKXJldHVybiExfWNhdGNoKHMpe0p8fChKPXMpfX1pZihmLmRlcHRoLS0sbyYmMD09PWYuZGVwdGgpe3ZhciB0PWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgcD0wO3A8dC5sZW5ndGg7cCsrKXRbcF0ucmVtb3ZlZHx8Zi5wdXNoKHRbcF0pfXJldHVybiFZLmdldChiKX1mdW5jdGlvbiBzKGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB0KGEsYil7aWYoIShhIGluc3RhbmNlb2YgZWIpKXJldHVybiBQKHgoZWIsIkV2ZW50IixhLGIpKTt2YXIgYz1hO3JldHVybiBwYnx8ImJlZm9yZXVubG9hZCIhPT1jLnR5cGU/dm9pZCh0aGlzLmltcGw9Yyk6bmV3IHkoYyl9ZnVuY3Rpb24gdShhKXtyZXR1cm4gYSYmYS5yZWxhdGVkVGFyZ2V0P09iamVjdC5jcmVhdGUoYSx7cmVsYXRlZFRhcmdldDp7dmFsdWU6TyhhLnJlbGF0ZWRUYXJnZXQpfX0pOmF9ZnVuY3Rpb24gdihhLGIsYyl7dmFyIGQ9d2luZG93W2FdLGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYiBpbnN0YW5jZW9mIGQ/dm9pZCh0aGlzLmltcGw9Yik6UCh4KGQsYSxiLGMpKX07aWYoZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksYyYmTShlLnByb3RvdHlwZSxjKSxkKXRyeXtOKGQsZSxuZXcgZCgidGVtcCIpKX1jYXRjaChmKXtOKGQsZSxkb2N1bWVudC5jcmVhdGVFdmVudChhKSl9cmV0dXJuIGV9ZnVuY3Rpb24gdyhhLGIpe3JldHVybiBmdW5jdGlvbigpe2FyZ3VtZW50c1tiXT1PKGFyZ3VtZW50c1tiXSk7dmFyIGM9Tyh0aGlzKTtjW2FdLmFwcGx5KGMsYXJndW1lbnRzKX19ZnVuY3Rpb24geChhLGIsYyxkKXtpZihuYilyZXR1cm4gbmV3IGEoYyx1KGQpKTt2YXIgZT1PKGRvY3VtZW50LmNyZWF0ZUV2ZW50KGIpKSxmPW1iW2JdLGc9W2NdO3JldHVybiBPYmplY3Qua2V5cyhmKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPW51bGwhPWQmJmEgaW4gZD9kW2FdOmZbYV07InJlbGF0ZWRUYXJnZXQiPT09YSYmKGI9TyhiKSksZy5wdXNoKGIpfSksZVsiaW5pdCIrYl0uYXBwbHkoZSxnKSxlfWZ1bmN0aW9uIHkoYSl7dC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24geihhKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYT8hMDphJiZhLmhhbmRsZUV2ZW50fWZ1bmN0aW9uIEEoYSl7c3dpdGNoKGEpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjpjYXNlIkRPTUF0dHJpYnV0ZU5hbWVDaGFuZ2VkIjpjYXNlIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCI6Y2FzZSJET01FbGVtZW50TmFtZUNoYW5nZWQiOmNhc2UiRE9NTm9kZUluc2VydGVkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZEludG9Eb2N1bWVudCI6Y2FzZSJET01Ob2RlUmVtb3ZlZCI6Y2FzZSJET01Ob2RlUmVtb3ZlZEZyb21Eb2N1bWVudCI6Y2FzZSJET01TdWJ0cmVlTW9kaWZpZWQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIEIoYSl7dGhpcy5pbXBsPWF9ZnVuY3Rpb24gQyhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFEuU2hhZG93Um9vdCYmKGE9YS5ob3N0KSxPKGEpfWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1SLmdldChhKTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKCFjW2RdLnJlbW92ZWQmJmNbZF0udHlwZT09PWIpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gRShhLGIpe2Zvcih2YXIgYz1PKGEpO2M7Yz1jLnBhcmVudE5vZGUpaWYoRChQKGMpLGIpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEYoYSl7SyhhLHJiKX1mdW5jdGlvbiBHKGIsYyxlLGYpe2EucmVuZGVyQWxsUGVuZGluZygpO3ZhciBnPVAoc2IuY2FsbChjLmltcGwsZSxmKSk7aWYoIWcpcmV0dXJuIG51bGw7dmFyIGk9ZChnLG51bGwpLGo9aS5sYXN0SW5kZXhPZihiKTtyZXR1cm4tMT09aj9udWxsOihpPWkuc2xpY2UoMCxqKSxoKGksYikpfWZ1bmN0aW9uIEgoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9JC5nZXQodGhpcyk7cmV0dXJuIGImJmJbYV0mJmJbYV0udmFsdWV8fG51bGx9fWZ1bmN0aW9uIEkoYSl7dmFyIGI9YS5zbGljZSgyKTtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9JC5nZXQodGhpcyk7ZHx8KGQ9T2JqZWN0LmNyZWF0ZShudWxsKSwkLnNldCh0aGlzLGQpKTt2YXIgZT1kW2FdO2lmKGUmJnRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGUud3JhcHBlZCwhMSksImZ1bmN0aW9uIj09dHlwZW9mIGMpe3ZhciBmPWZ1bmN0aW9uKGIpe3ZhciBkPWMuY2FsbCh0aGlzLGIpO2Q9PT0hMT9iLnByZXZlbnREZWZhdWx0KCk6Im9uYmVmb3JldW5sb2FkIj09PWEmJiJzdHJpbmciPT10eXBlb2YgZCYmKGIucmV0dXJuVmFsdWU9ZCl9O3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihiLGYsITEpLGRbYV09e3ZhbHVlOmMsd3JhcHBlZDpmfX19fXZhciBKLEs9YS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcixMPWEuZ2V0VHJlZVNjb3BlLE09YS5taXhpbixOPWEucmVnaXN0ZXJXcmFwcGVyLE89YS51bndyYXAsUD1hLndyYXAsUT1hLndyYXBwZXJzLFI9KG5ldyBXZWFrTWFwLG5ldyBXZWFrTWFwKSxTPW5ldyBXZWFrTWFwLFQ9bmV3IFdlYWtNYXAsVT1uZXcgV2Vha01hcCxWPW5ldyBXZWFrTWFwLFc9bmV3IFdlYWtNYXAsWD1uZXcgV2Vha01hcCxZPW5ldyBXZWFrTWFwLFo9bmV3IFdlYWtNYXAsJD1uZXcgV2Vha01hcCxfPW5ldyBXZWFrTWFwLGFiPTAsYmI9MSxjYj0yLGRiPTM7cy5wcm90b3R5cGU9e2VxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGVyPT09YS5oYW5kbGVyJiZ0aGlzLnR5cGU9PT1hLnR5cGUmJnRoaXMuY2FwdHVyZT09PWEuY2FwdHVyZX0sZ2V0IHJlbW92ZWQoKXtyZXR1cm4gbnVsbD09PXRoaXMuaGFuZGxlcn0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW51bGx9fTt2YXIgZWI9d2luZG93LkV2ZW50O2ViLnByb3RvdHlwZS5wb2x5bWVyQmxhY2tMaXN0Xz17cmV0dXJuVmFsdWU6ITAsa2V5TG9jYXRpb246ITB9LHQucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIFUuZ2V0KHRoaXMpfSxnZXQgY3VycmVudFRhcmdldCgpe3JldHVybiBWLmdldCh0aGlzKX0sZ2V0IGV2ZW50UGhhc2UoKXtyZXR1cm4gWC5nZXQodGhpcyl9LGdldCBwYXRoKCl7dmFyIGE9Xy5nZXQodGhpcyk7cmV0dXJuIGE/YS5zbGljZSgpOltdfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtZLnNldCh0aGlzLCEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7WS5zZXQodGhpcywhMCksWi5zZXQodGhpcywhMCl9fSxOKGViLHQsZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50IikpO3ZhciBmYj12KCJVSUV2ZW50Iix0KSxnYj12KCJDdXN0b21FdmVudCIsdCksaGI9e2dldCByZWxhdGVkVGFyZ2V0KCl7dmFyIGE9Vy5nZXQodGhpcyk7cmV0dXJuIHZvaWQgMCE9PWE/YTpQKE8odGhpcykucmVsYXRlZFRhcmdldCl9fSxpYj1NKHtpbml0TW91c2VFdmVudDp3KCJpbml0TW91c2VFdmVudCIsMTQpfSxoYiksamI9TSh7aW5pdEZvY3VzRXZlbnQ6dygiaW5pdEZvY3VzRXZlbnQiLDUpfSxoYiksa2I9digiTW91c2VFdmVudCIsZmIsaWIpLGxiPXYoIkZvY3VzRXZlbnQiLGZiLGpiKSxtYj1PYmplY3QuY3JlYXRlKG51bGwpLG5iPWZ1bmN0aW9uKCl7dHJ5e25ldyB3aW5kb3cuRm9jdXNFdmVudCgiZm9jdXMiKX1jYXRjaChhKXtyZXR1cm4hMX1yZXR1cm4hMH0oKTtpZighbmIpe3ZhciBvYj1mdW5jdGlvbihhLGIsYyl7aWYoYyl7dmFyIGQ9bWJbY107Yj1NKE0oe30sZCksYil9bWJbYV09Yn07b2IoIkV2ZW50Iix7YnViYmxlczohMSxjYW5jZWxhYmxlOiExfSksb2IoIkN1c3RvbUV2ZW50Iix7ZGV0YWlsOm51bGx9LCJFdmVudCIpLG9iKCJVSUV2ZW50Iix7dmlldzpudWxsLGRldGFpbDowfSwiRXZlbnQiKSxvYigiTW91c2VFdmVudCIse3NjcmVlblg6MCxzY3JlZW5ZOjAsY2xpZW50WDowLGNsaWVudFk6MCxjdHJsS2V5OiExLGFsdEtleTohMSxzaGlmdEtleTohMSxtZXRhS2V5OiExLGJ1dHRvbjowLHJlbGF0ZWRUYXJnZXQ6bnVsbH0sIlVJRXZlbnQiKSxvYigiRm9jdXNFdmVudCIse3JlbGF0ZWRUYXJnZXQ6bnVsbH0sIlVJRXZlbnQiKX12YXIgcGI9d2luZG93LkJlZm9yZVVubG9hZEV2ZW50O3kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLE0oeS5wcm90b3R5cGUse2dldCByZXR1cm5WYWx1ZSgpe3JldHVybiB0aGlzLmltcGwucmV0dXJuVmFsdWV9LHNldCByZXR1cm5WYWx1ZShhKXt0aGlzLmltcGwucmV0dXJuVmFsdWU9YX19KSxwYiYmTihwYix5KTt2YXIgcWI9d2luZG93LkV2ZW50VGFyZ2V0LHJiPVsiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50Il07W05vZGUsV2luZG93XS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWEucHJvdG90eXBlO3JiLmZvckVhY2goZnVuY3Rpb24oYSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsYSsiXyIse3ZhbHVlOmJbYV19KX0pfSksQi5wcm90b3R5cGU9e2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2lmKHooYikmJiFBKGEpKXt2YXIgZD1uZXcgcyhhLGIsYyksZT1SLmdldCh0aGlzKTtpZihlKXtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKylpZihkLmVxdWFscyhlW2ZdKSlyZXR1cm59ZWxzZSBlPVtdLGUuZGVwdGg9MCxSLnNldCh0aGlzLGUpO2UucHVzaChkKTt2YXIgZz1DKHRoaXMpO2cuYWRkRXZlbnRMaXN0ZW5lcl8oYSxtLCEwKX19LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2M9Qm9vbGVhbihjKTt2YXIgZD1SLmdldCh0aGlzKTtpZihkKXtmb3IodmFyIGU9MCxmPSExLGc9MDtnPGQubGVuZ3RoO2crKylkW2ddLnR5cGU9PT1hJiZkW2ddLmNhcHR1cmU9PT1jJiYoZSsrLGRbZ10uaGFuZGxlcj09PWImJihmPSEwLGRbZ10ucmVtb3ZlKCkpKTtpZihmJiYxPT09ZSl7dmFyIGg9Qyh0aGlzKTtoLnJlbW92ZUV2ZW50TGlzdGVuZXJfKGEsbSwhMCl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihiKXt2YXIgYz1PKGIpLGQ9Yy50eXBlO1Muc2V0KGMsITEpLGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBlO0UodGhpcyxkKXx8KGU9ZnVuY3Rpb24oKXt9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkLGUsITApKTt0cnl7cmV0dXJuIE8odGhpcykuZGlzcGF0Y2hFdmVudF8oYyl9ZmluYWxseXtlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxlLCEwKX19fSxxYiYmTihxYixCKTt2YXIgc2I9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludDthLmVsZW1lbnRGcm9tUG9pbnQ9RyxhLmdldEV2ZW50SGFuZGxlckdldHRlcj1ILGEuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyPUksYS53cmFwRXZlbnRUYXJnZXRNZXRob2RzPUYsYS53cmFwcGVycy5CZWZvcmVVbmxvYWRFdmVudD15LGEud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9Z2IsYS53cmFwcGVycy5FdmVudD10LGEud3JhcHBlcnMuRXZlbnRUYXJnZXQ9QixhLndyYXBwZXJzLkZvY3VzRXZlbnQ9bGIsYS53cmFwcGVycy5Nb3VzZUV2ZW50PWtiLGEud3JhcHBlcnMuVUlFdmVudD1mYn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIsbyl9ZnVuY3Rpb24gYyhhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBkKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPW5ldyBkLGU9MDtlPGEubGVuZ3RoO2UrKyliW2VdPW5ldyBjKGFbZV0pO3JldHVybiBiLmxlbmd0aD1lLGJ9ZnVuY3Rpb24gZihhKXtnLmNhbGwodGhpcyxhKX12YXIgZz1hLndyYXBwZXJzLlVJRXZlbnQsaD1hLm1peGluLGk9YS5yZWdpc3RlcldyYXBwZXIsaj1hLnVud3JhcCxrPWEud3JhcCxsPXdpbmRvdy5Ub3VjaEV2ZW50O2lmKGwpe3ZhciBtO3RyeXttPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJUb3VjaEV2ZW50Iil9Y2F0Y2gobil7cmV0dXJufXZhciBvPXtlbnVtZXJhYmxlOiExfTtjLnByb3RvdHlwZT17Z2V0IHRhcmdldCgpe3JldHVybiBrKHRoaXMuaW1wbC50YXJnZXQpfX07dmFyIHA9e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpudWxsfTtbImNsaWVudFgiLCJjbGllbnRZIiwic2NyZWVuWCIsInNjcmVlblkiLCJwYWdlWCIsInBhZ2VZIiwiaWRlbnRpZmllciIsIndlYmtpdFJhZGl1c1giLCJ3ZWJraXRSYWRpdXNZIiwid2Via2l0Um90YXRpb25BbmdsZSIsIndlYmtpdEZvcmNlIl0uZm9yRWFjaChmdW5jdGlvbihhKXtwLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLnByb3RvdHlwZSxhLHApfSksZC5wcm90b3R5cGU9e2l0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19fSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGcucHJvdG90eXBlKSxoKGYucHJvdG90eXBlLHtnZXQgdG91Y2hlcygpe3JldHVybiBlKGoodGhpcykudG91Y2hlcyl9LGdldCB0YXJnZXRUb3VjaGVzKCl7cmV0dXJuIGUoaih0aGlzKS50YXJnZXRUb3VjaGVzKX0sZ2V0IGNoYW5nZWRUb3VjaGVzKCl7cmV0dXJuIGUoaih0aGlzKS5jaGFuZ2VkVG91Y2hlcyl9LGluaXRUb3VjaEV2ZW50OmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJOb3QgaW1wbGVtZW50ZWQiKX19KSxpKGwsZixtKSxhLndyYXBwZXJzLlRvdWNoPWMsYS53cmFwcGVycy5Ub3VjaEV2ZW50PWYsYS53cmFwcGVycy5Ub3VjaExpc3Q9ZH19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLGcpfWZ1bmN0aW9uIGMoKXt0aGlzLmxlbmd0aD0wLGIodGhpcywibGVuZ3RoIil9ZnVuY3Rpb24gZChhKXtpZihudWxsPT1hKXJldHVybiBhO2Zvcih2YXIgYj1uZXcgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWJbZF09ZihhW2RdKTtyZXR1cm4gYi5sZW5ndGg9ZSxifWZ1bmN0aW9uIGUoYSxiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBkKHRoaXMuaW1wbFtiXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fXZhciBmPWEud3JhcCxnPXtlbnVtZXJhYmxlOiExfTtjLnByb3RvdHlwZT17aXRlbTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thXX19LGIoYy5wcm90b3R5cGUsIml0ZW0iKSxhLndyYXBwZXJzLk5vZGVMaXN0PWMsYS5hZGRXcmFwTm9kZUxpc3RNZXRob2Q9ZSxhLndyYXBOb2RlTGlzdD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjthLndyYXBIVE1MQ29sbGVjdGlvbj1hLndyYXBOb2RlTGlzdCxhLndyYXBwZXJzLkhUTUxDb2xsZWN0aW9uPWEud3JhcHBlcnMuTm9kZUxpc3R9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7QShhIGluc3RhbmNlb2Ygdyl9ZnVuY3Rpb24gYyhhKXt2YXIgYj1uZXcgeTtyZXR1cm4gYlswXT1hLGIubGVuZ3RoPTEsYn1mdW5jdGlvbiBkKGEsYixjKXtDKGIsImNoaWxkTGlzdCIse3JlbW92ZWROb2RlczpjLHByZXZpb3VzU2libGluZzphLnByZXZpb3VzU2libGluZyxuZXh0U2libGluZzphLm5leHRTaWJsaW5nfSl9ZnVuY3Rpb24gZShhLGIpe0MoYSwiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmJ9KX1mdW5jdGlvbiBmKGEsYixkLGUpe2lmKGEgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXt2YXIgZj1oKGEpO089ITA7Zm9yKHZhciBnPWYubGVuZ3RoLTE7Zz49MDtnLS0pYS5yZW1vdmVDaGlsZChmW2ddKSxmW2ddLnBhcmVudE5vZGVfPWI7Tz0hMTtmb3IodmFyIGc9MDtnPGYubGVuZ3RoO2crKylmW2ddLnByZXZpb3VzU2libGluZ189ZltnLTFdfHxkLGZbZ10ubmV4dFNpYmxpbmdfPWZbZysxXXx8ZTtyZXR1cm4gZCYmKGQubmV4dFNpYmxpbmdfPWZbMF0pLGUmJihlLnByZXZpb3VzU2libGluZ189ZltmLmxlbmd0aC0xXSksZn12YXIgZj1jKGEpLGk9YS5wYXJlbnROb2RlO3JldHVybiBpJiZpLnJlbW92ZUNoaWxkKGEpLGEucGFyZW50Tm9kZV89YixhLnByZXZpb3VzU2libGluZ189ZCxhLm5leHRTaWJsaW5nXz1lLGQmJihkLm5leHRTaWJsaW5nXz1hKSxlJiYoZS5wcmV2aW91c1NpYmxpbmdfPWEpLGZ9ZnVuY3Rpb24gZyhhKXtpZihhIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudClyZXR1cm4gaChhKTt2YXIgYj1jKGEpLGU9YS5wYXJlbnROb2RlO3JldHVybiBlJiZkKGEsZSxiKSxifWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPW5ldyB5LGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYi5sZW5ndGg9YyxlKGEsYiksYn1mdW5jdGlvbiBpKGEpe3JldHVybiBhfWZ1bmN0aW9uIGooYSxiKXtJKGEsYiksYS5ub2RlSXNJbnNlcnRlZF8oKX1mdW5jdGlvbiBrKGEsYil7Zm9yKHZhciBjPUQoYiksZD0wO2Q8YS5sZW5ndGg7ZCsrKWooYVtkXSxjKX1mdW5jdGlvbiBsKGEpe0koYSxuZXcgeihhLG51bGwpKX1mdW5jdGlvbiBtKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWwoYVtiXSl9ZnVuY3Rpb24gbihhLGIpe3ZhciBjPWEubm9kZVR5cGU9PT13LkRPQ1VNRU5UX05PREU/YTphLm93bmVyRG9jdW1lbnQ7YyE9PWIub3duZXJEb2N1bWVudCYmYy5hZG9wdE5vZGUoYil9ZnVuY3Rpb24gbyhiLGMpe2lmKGMubGVuZ3RoKXt2YXIgZD1iLm93bmVyRG9jdW1lbnQ7aWYoZCE9PWNbMF0ub3duZXJEb2N1bWVudClmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKylhLmFkb3B0Tm9kZU5vUmVtb3ZlKGNbZV0sZCl9fWZ1bmN0aW9uIHAoYSxiKXtvKGEsYik7dmFyIGM9Yi5sZW5ndGg7aWYoMT09PWMpcmV0dXJuIEooYlswXSk7Zm9yKHZhciBkPUooYS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZT0wO2M+ZTtlKyspZC5hcHBlbmRDaGlsZChKKGJbZV0pKTtyZXR1cm4gZH1mdW5jdGlvbiBxKGEpe2lmKHZvaWQgMCE9PWEuZmlyc3RDaGlsZF8pZm9yKHZhciBiPWEuZmlyc3RDaGlsZF87Yjspe3ZhciBjPWI7Yj1iLm5leHRTaWJsaW5nXyxjLnBhcmVudE5vZGVfPWMucHJldmlvdXNTaWJsaW5nXz1jLm5leHRTaWJsaW5nXz12b2lkIDB9YS5maXJzdENoaWxkXz1hLmxhc3RDaGlsZF89dm9pZCAwfWZ1bmN0aW9uIHIoYSl7aWYoYS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7Zm9yKHZhciBiPWEuZmlyc3RDaGlsZDtiOyl7QShiLnBhcmVudE5vZGU9PT1hKTt2YXIgYz1iLm5leHRTaWJsaW5nLGQ9SihiKSxlPWQucGFyZW50Tm9kZTtlJiZWLmNhbGwoZSxkKSxiLnByZXZpb3VzU2libGluZ189Yi5uZXh0U2libGluZ189Yi5wYXJlbnROb2RlXz1udWxsLGI9Y31hLmZpcnN0Q2hpbGRfPWEubGFzdENoaWxkXz1udWxsfWVsc2UgZm9yKHZhciBjLGY9SihhKSxnPWYuZmlyc3RDaGlsZDtnOyljPWcubmV4dFNpYmxpbmcsVi5jYWxsKGYsZyksZz1jfWZ1bmN0aW9uIHMoYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiZiLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfWZ1bmN0aW9uIHQoYSl7Zm9yKHZhciBiLGM9MDtjPGEubGVuZ3RoO2MrKyliPWFbY10sYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpfWZ1bmN0aW9uIHUoYSxiLGMpe3ZhciBkO2lmKGQ9TChjP1AuY2FsbChjLGEuaW1wbCwhMSk6US5jYWxsKGEuaW1wbCwhMSkpLGIpe2Zvcih2YXIgZT1hLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpZC5hcHBlbmRDaGlsZCh1KGUsITAsYykpO2lmKGEgaW5zdGFuY2VvZiBOLkhUTUxUZW1wbGF0ZUVsZW1lbnQpZm9yKHZhciBmPWQuY29udGVudCxlPWEuY29udGVudC5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWYuYXBwZW5kQ2hpbGQodShlLCEwLGMpKX1yZXR1cm4gZH1mdW5jdGlvbiB2KGEsYil7aWYoIWJ8fEQoYSkhPT1EKGIpKXJldHVybiExO2Zvcih2YXIgYz1iO2M7Yz1jLnBhcmVudE5vZGUpaWYoYz09PWEpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gdyhhKXtBKGEgaW5zdGFuY2VvZiBSKSx4LmNhbGwodGhpcyxhKSx0aGlzLnBhcmVudE5vZGVfPXZvaWQgMCx0aGlzLmZpcnN0Q2hpbGRfPXZvaWQgMCx0aGlzLmxhc3RDaGlsZF89dm9pZCAwLHRoaXMubmV4dFNpYmxpbmdfPXZvaWQgMCx0aGlzLnByZXZpb3VzU2libGluZ189dm9pZCAwLHRoaXMudHJlZVNjb3BlXz12b2lkIDB9dmFyIHg9YS53cmFwcGVycy5FdmVudFRhcmdldCx5PWEud3JhcHBlcnMuTm9kZUxpc3Qsej1hLlRyZWVTY29wZSxBPWEuYXNzZXJ0LEI9YS5kZWZpbmVXcmFwR2V0dGVyLEM9YS5lbnF1ZXVlTXV0YXRpb24sRD1hLmdldFRyZWVTY29wZSxFPWEuaXNXcmFwcGVyLEY9YS5taXhpbixHPWEucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnMsSD1hLnJlZ2lzdGVyV3JhcHBlcixJPWEuc2V0VHJlZVNjb3BlLEo9YS51bndyYXAsSz1hLnVud3JhcElmTmVlZGVkLEw9YS53cmFwLE09YS53cmFwSWZOZWVkZWQsTj1hLndyYXBwZXJzLE89ITEsUD1kb2N1bWVudC5pbXBvcnROb2RlLFE9d2luZG93Lk5vZGUucHJvdG90eXBlLmNsb25lTm9kZSxSPXdpbmRvdy5Ob2RlLFM9d2luZG93LkRvY3VtZW50RnJhZ21lbnQsVD0oUi5wcm90b3R5cGUuYXBwZW5kQ2hpbGQsUi5wcm90b3R5cGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24pLFU9Ui5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLFY9Ui5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsVz1SLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQsWD0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxZPVg/ZnVuY3Rpb24oYSxiKXt0cnl7Vi5jYWxsKGEsYil9Y2F0Y2goYyl7aWYoIShhIGluc3RhbmNlb2YgUykpdGhyb3cgY319OmZ1bmN0aW9uKGEsYil7Vi5jYWxsKGEsYil9O3cucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLEYody5wcm90b3R5cGUse2FwcGVuZENoaWxkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluc2VydEJlZm9yZShhLG51bGwpfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSxjKXtiKGEpO3ZhciBkO2M/RShjKT9kPUooYyk6KGQ9YyxjPUwoZCkpOihjPW51bGwsZD1udWxsKSxjJiZBKGMucGFyZW50Tm9kZT09PXRoaXMpO3ZhciBlLGg9Yz9jLnByZXZpb3VzU2libGluZzp0aGlzLmxhc3RDaGlsZCxpPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhcyhhKTtpZihlPWk/ZyhhKTpmKGEsdGhpcyxoLGMpLGkpbih0aGlzLGEpLHEodGhpcyksVS5jYWxsKHRoaXMuaW1wbCxKKGEpLGQpO2Vsc2V7aHx8KHRoaXMuZmlyc3RDaGlsZF89ZVswXSksY3x8KHRoaXMubGFzdENoaWxkXz1lW2UubGVuZ3RoLTFdLHZvaWQgMD09PXRoaXMuZmlyc3RDaGlsZF8mJih0aGlzLmZpcnN0Q2hpbGRfPXRoaXMuZmlyc3RDaGlsZCkpO3ZhciBqPWQ/ZC5wYXJlbnROb2RlOnRoaXMuaW1wbDtqP1UuY2FsbChqLHAodGhpcyxlKSxkKTpvKHRoaXMsZSl9cmV0dXJuIEModGhpcywiY2hpbGRMaXN0Iix7YWRkZWROb2RlczplLG5leHRTaWJsaW5nOmMscHJldmlvdXNTaWJsaW5nOmh9KSxrKGUsdGhpcyksYX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSl7aWYoYihhKSxhLnBhcmVudE5vZGUhPT10aGlzKXtmb3IodmFyIGQ9ITEsZT0odGhpcy5jaGlsZE5vZGVzLHRoaXMuZmlyc3RDaGlsZCk7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZT09PWEpe2Q9ITA7YnJlYWt9aWYoIWQpdGhyb3cgbmV3IEVycm9yKCJOb3RGb3VuZEVycm9yIil9dmFyIGY9SihhKSxnPWEubmV4dFNpYmxpbmcsaD1hLnByZXZpb3VzU2libGluZztpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXt2YXIgaT10aGlzLmZpcnN0Q2hpbGQsaj10aGlzLmxhc3RDaGlsZCxrPWYucGFyZW50Tm9kZTtrJiZZKGssZiksaT09PWEmJih0aGlzLmZpcnN0Q2hpbGRfPWcpLGo9PT1hJiYodGhpcy5sYXN0Q2hpbGRfPWgpLGgmJihoLm5leHRTaWJsaW5nXz1nKSxnJiYoZy5wcmV2aW91c1NpYmxpbmdfPWgpLGEucHJldmlvdXNTaWJsaW5nXz1hLm5leHRTaWJsaW5nXz1hLnBhcmVudE5vZGVfPXZvaWQgMH1lbHNlIHEodGhpcyksWSh0aGlzLmltcGwsZik7cmV0dXJuIE98fEModGhpcywiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmMoYSksbmV4dFNpYmxpbmc6ZyxwcmV2aW91c1NpYmxpbmc6aH0pLEcodGhpcyxhKSxhfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxkKXtiKGEpO3ZhciBlO2lmKEUoZCk/ZT1KKGQpOihlPWQsZD1MKGUpKSxkLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3ZhciBoLGk9ZC5uZXh0U2libGluZyxqPWQucHJldmlvdXNTaWJsaW5nLG09IXRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkmJiFzKGEpO3JldHVybiBtP2g9ZyhhKTooaT09PWEmJihpPWEubmV4dFNpYmxpbmcpLGg9ZihhLHRoaXMsaixpKSksbT8obih0aGlzLGEpLHEodGhpcyksVy5jYWxsKHRoaXMuaW1wbCxKKGEpLGUpKToodGhpcy5maXJzdENoaWxkPT09ZCYmKHRoaXMuZmlyc3RDaGlsZF89aFswXSksdGhpcy5sYXN0Q2hpbGQ9PT1kJiYodGhpcy5sYXN0Q2hpbGRfPWhbaC5sZW5ndGgtMV0pLGQucHJldmlvdXNTaWJsaW5nXz1kLm5leHRTaWJsaW5nXz1kLnBhcmVudE5vZGVfPXZvaWQgMCxlLnBhcmVudE5vZGUmJlcuY2FsbChlLnBhcmVudE5vZGUscCh0aGlzLGgpLGUpKSxDKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6aCxyZW1vdmVkTm9kZXM6YyhkKSxuZXh0U2libGluZzppLHByZXZpb3VzU2libGluZzpqfSksbChkKSxrKGgsdGhpcyksZH0sbm9kZUlzSW5zZXJ0ZWRfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylhLm5vZGVJc0luc2VydGVkXygpfSxoYXNDaGlsZE5vZGVzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmZpcnN0Q2hpbGR9LGdldCBwYXJlbnROb2RlKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMucGFyZW50Tm9kZV8/dGhpcy5wYXJlbnROb2RlXzpMKHRoaXMuaW1wbC5wYXJlbnROb2RlKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5maXJzdENoaWxkXz90aGlzLmZpcnN0Q2hpbGRfOkwodGhpcy5pbXBsLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubGFzdENoaWxkXz90aGlzLmxhc3RDaGlsZF86TCh0aGlzLmltcGwubGFzdENoaWxkKX0sZ2V0IG5leHRTaWJsaW5nKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubmV4dFNpYmxpbmdfP3RoaXMubmV4dFNpYmxpbmdfOkwodGhpcy5pbXBsLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzU2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLnByZXZpb3VzU2libGluZ18/dGhpcy5wcmV2aW91c1NpYmxpbmdfOkwodGhpcy5pbXBsLnByZXZpb3VzU2libGluZyl9LGdldCBwYXJlbnRFbGVtZW50KCl7Zm9yKHZhciBhPXRoaXMucGFyZW50Tm9kZTthJiZhLm5vZGVUeXBlIT09dy5FTEVNRU5UX05PREU7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxnZXQgdGV4dENvbnRlbnQoKXtmb3IodmFyIGE9IiIsYj10aGlzLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpYi5ub2RlVHlwZSE9dy5DT01NRU5UX05PREUmJihhKz1iLnRleHRDb250ZW50KTtyZXR1cm4gYX0sc2V0IHRleHRDb250ZW50KGEpe3ZhciBiPWkodGhpcy5jaGlsZE5vZGVzKTtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtpZihyKHRoaXMpLCIiIT09YSl7dmFyIGM9dGhpcy5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSk7dGhpcy5hcHBlbmRDaGlsZChjKX19ZWxzZSBxKHRoaXMpLHRoaXMuaW1wbC50ZXh0Q29udGVudD1hO3ZhciBkPWkodGhpcy5jaGlsZE5vZGVzKTtDKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6ZCxyZW1vdmVkTm9kZXM6Yn0pLG0oYiksayhkLHRoaXMpfSxnZXQgY2hpbGROb2Rlcygpe2Zvcih2YXIgYT1uZXcgeSxiPTAsYz10aGlzLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpYVtiKytdPWM7cmV0dXJuIGEubGVuZ3RoPWIsYX0sY2xvbmVOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB1KHRoaXMsYSl9LGNvbnRhaW5zOmZ1bmN0aW9uKGEpe3JldHVybiB2KHRoaXMsTShhKSl9LGNvbXBhcmVEb2N1bWVudFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBULmNhbGwodGhpcy5pbXBsLEsoYSkpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPWkodGhpcy5jaGlsZE5vZGVzKSxkPVtdLGU9IiIsZj0wO2Y8Yy5sZW5ndGg7ZisrKWI9Y1tmXSxiLm5vZGVUeXBlPT09dy5URVhUX05PREU/YXx8Yi5kYXRhLmxlbmd0aD9hPyhlKz1iLmRhdGEsZC5wdXNoKGIpKTphPWI6dGhpcy5yZW1vdmVOb2RlKGIpOihhJiZkLmxlbmd0aCYmKGEuZGF0YSs9ZSx0KGQpKSxkPVtdLGU9IiIsYT1udWxsLGIuY2hpbGROb2Rlcy5sZW5ndGgmJmIubm9ybWFsaXplKCkpO2EmJmQubGVuZ3RoJiYoYS5kYXRhKz1lLHQoZCkpfX0pLEIodywib3duZXJEb2N1bWVudCIpLEgoUix3LGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3IsZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwsdy5wcm90b3R5cGU9RihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx3LnByb3RvdHlwZSksYS5jbG9uZU5vZGU9dSxhLm5vZGVXYXNBZGRlZD1qLGEubm9kZVdhc1JlbW92ZWQ9bCxhLm5vZGVzV2VyZUFkZGVkPWssYS5ub2Rlc1dlcmVSZW1vdmVkPW0sYS5zbmFwc2hvdE5vZGVMaXN0PWksYS53cmFwcGVycy5Ob2RlPXd9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYixjLGQpe2Zvcih2YXIgZT1udWxsLGY9bnVsbCxnPTAsaD1iLmxlbmd0aDtoPmc7ZysrKWU9cShiW2ddKSwoZj1wKGUpLnJvb3QpJiZmIGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290fHwoZFtjKytdPWUpO3JldHVybiBjfWZ1bmN0aW9uIGMoYSxiKXtmb3IodmFyIGQsZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KXtpZihlLm1hdGNoZXMoYikpcmV0dXJuIGU7aWYoZD1jKGUsYikpcmV0dXJuIGQ7ZT1lLm5leHRFbGVtZW50U2libGluZ31yZXR1cm4gbnVsbH1mdW5jdGlvbiBkKGEsYil7cmV0dXJuIGEubWF0Y2hlcyhiKX1mdW5jdGlvbiBlKGEsYixjKXt2YXIgZD1hLmxvY2FsTmFtZTtyZXR1cm4gZD09PWJ8fGQ9PT1jJiZhLm5hbWVzcGFjZVVSST09PUJ9ZnVuY3Rpb24gZigpe3JldHVybiEwfWZ1bmN0aW9uIGcoYSxiLGMpe3JldHVybiBhLmxvY2FsTmFtZT09PWN9ZnVuY3Rpb24gaChhLGIpe3JldHVybiBhLm5hbWVzcGFjZVVSST09PWJ9ZnVuY3Rpb24gaShhLGIsYyl7cmV0dXJuIGEubmFtZXNwYWNlVVJJPT09YiYmYS5sb2NhbE5hbWU9PT1jfWZ1bmN0aW9uIGooYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1hLmZpcnN0RWxlbWVudENoaWxkO2c7KWQoZyxlLGYpJiYoY1tiKytdPWcpLGI9aihnLGIsYyxkLGUsZiksZz1nLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gYn1mdW5jdGlvbiBrKGMsZCxlLGYpe3ZhciBnLGg9dGhpcy5pbXBsLGk9cCh0aGlzKS5yb290O2lmKGkgaW5zdGFuY2VvZiBhLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIGoodGhpcyxkLGUsYyxmLG51bGwpO2lmKGggaW5zdGFuY2VvZiB6KWc9dS5jYWxsKGgsZik7ZWxzZXtpZighKGggaW5zdGFuY2VvZiBBKSlyZXR1cm4gaih0aGlzLGQsZSxjLGYsbnVsbCk7Zz10LmNhbGwoaCxmKX1yZXR1cm4gYihnLGQsZSl9ZnVuY3Rpb24gbChjLGQsZSxmLGcpe3ZhciBoLGk9dGhpcy5pbXBsLGs9cCh0aGlzKS5yb290O2lmKGsgaW5zdGFuY2VvZiBhLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIGoodGhpcyxkLGUsYyxmLGcpO2lmKGkgaW5zdGFuY2VvZiB6KWg9dy5jYWxsKGksZixnKTtlbHNle2lmKCEoaSBpbnN0YW5jZW9mIEEpKXJldHVybiBqKHRoaXMsZCxlLGMsZixnKTtoPXYuY2FsbChpLGYsZyl9cmV0dXJuIGIoaCxkLGUpfWZ1bmN0aW9uIG0oYyxkLGUsZixnKXt2YXIgaCxpPXRoaXMuaW1wbCxrPXAodGhpcykucm9vdDtpZihrIGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290KXJldHVybiBqKHRoaXMsZCxlLGMsZixnKTtpZihpIGluc3RhbmNlb2YgeiloPXkuY2FsbChpLGYsZyk7ZWxzZXtpZighKGkgaW5zdGFuY2VvZiBBKSlyZXR1cm4gaih0aGlzLGQsZSxjLGYsZyk7aD14LmNhbGwoaSxmLGcpfXJldHVybiBiKGgsZCxlKX12YXIgbj1hLndyYXBwZXJzLkhUTUxDb2xsZWN0aW9uLG89YS53cmFwcGVycy5Ob2RlTGlzdCxwPWEuZ2V0VHJlZVNjb3BlLHE9YS53cmFwLHI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcixzPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yLHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCx1PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsLHY9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUsdz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUseD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZU5TLHk9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lTlMsej13aW5kb3cuRWxlbWVudCxBPXdpbmRvdy5IVE1MRG9jdW1lbnQsQj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsQz17cXVlcnlTZWxlY3RvcjpmdW5jdGlvbihiKXt2YXIgZCxlPXRoaXMuaW1wbCxmPXAodGhpcykucm9vdDtpZihmIGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290KXJldHVybiBjKHRoaXMsYik7aWYoZSBpbnN0YW5jZW9mIHopZD1xKHMuY2FsbChlLGIpKTtlbHNle2lmKCEoZSBpbnN0YW5jZW9mIEEpKXJldHVybiBjKHRoaXMsYik7ZD1xKHIuY2FsbChlLGIpKX1yZXR1cm4gZCYmKGY9cChkKS5yb290KSYmZiBpbnN0YW5jZW9mIGEud3JhcHBlcnMuU2hhZG93Um9vdD9jKHRoaXMsYik6ZH0scXVlcnlTZWxlY3RvckFsbDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgbztyZXR1cm4gYi5sZW5ndGg9ay5jYWxsKHRoaXMsZCwwLGIsYSksYn19LEQ9e2dldEVsZW1lbnRzQnlUYWdOYW1lOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBuLGM9IioiPT09YT9mOmU7cmV0dXJuIGIubGVuZ3RoPWwuY2FsbCh0aGlzLGMsMCxiLGEsYS50b0xvd2VyQ2FzZSgpKSxifSxnZXRFbGVtZW50c0J5Q2xhc3NOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoIi4iK2EpfSxnZXRFbGVtZW50c0J5VGFnTmFtZU5TOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IG4sZD1udWxsO3JldHVybiBkPSIqIj09PWE/IioiPT09Yj9mOmc6IioiPT09Yj9oOmksYy5sZW5ndGg9bS5jYWxsKHRoaXMsZCwwLGMsYXx8bnVsbCxiKSxjfX07YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlPUQsYS5TZWxlY3RvcnNJbnRlcmZhY2U9Q30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLm5leHRTaWJsaW5nO3JldHVybiBhfWZ1bmN0aW9uIGMoYSl7Zm9yKDthJiZhLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWE9YS5wcmV2aW91c1NpYmxpbmc7cmV0dXJuIGF9dmFyIGQ9YS53cmFwcGVycy5Ob2RlTGlzdCxlPXtnZXQgZmlyc3RFbGVtZW50Q2hpbGQoKXtyZXR1cm4gYih0aGlzLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBjKHRoaXMubGFzdENoaWxkKX0sZ2V0IGNoaWxkRWxlbWVudENvdW50KCl7Zm9yKHZhciBhPTAsYj10aGlzLmZpcnN0RWxlbWVudENoaWxkO2I7Yj1iLm5leHRFbGVtZW50U2libGluZylhKys7cmV0dXJuIGF9LGdldCBjaGlsZHJlbigpe2Zvcih2YXIgYT1uZXcgZCxiPTAsYz10aGlzLmZpcnN0RWxlbWVudENoaWxkO2M7Yz1jLm5leHRFbGVtZW50U2libGluZylhW2IrK109YztyZXR1cm4gYS5sZW5ndGg9YixhfSxyZW1vdmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5yZW1vdmVDaGlsZCh0aGlzKX19LGY9e2dldCBuZXh0RWxlbWVudFNpYmxpbmcoKXtyZXR1cm4gYih0aGlzLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzRWxlbWVudFNpYmxpbmcoKXtyZXR1cm4gYyh0aGlzLnByZXZpb3VzU2libGluZyl9fTthLkNoaWxkTm9kZUludGVyZmFjZT1mLGEuUGFyZW50Tm9kZUludGVyZmFjZT1lfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfXZhciBjPWEuQ2hpbGROb2RlSW50ZXJmYWNlLGQ9YS53cmFwcGVycy5Ob2RlLGU9YS5lbnF1ZXVlTXV0YXRpb24sZj1hLm1peGluLGc9YS5yZWdpc3RlcldyYXBwZXIsaD13aW5kb3cuQ2hhcmFjdGVyRGF0YTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxmKGIucHJvdG90eXBlLHtnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoYSl7dGhpcy5kYXRhPWF9LGdldCBkYXRhKCl7cmV0dXJuIHRoaXMuaW1wbC5kYXRhfSxzZXQgZGF0YShhKXt2YXIgYj10aGlzLmltcGwuZGF0YTtlKHRoaXMsImNoYXJhY3RlckRhdGEiLHtvbGRWYWx1ZTpifSksdGhpcy5pbXBsLmRhdGE9YX19KSxmKGIucHJvdG90eXBlLGMpLGcoaCxiLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGE+Pj4wfWZ1bmN0aW9uIGMoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGQ9YS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhLGU9KGEuZW5xdWV1ZU11dGF0aW9uLGEubWl4aW4pLGY9YS5yZWdpc3RlcldyYXBwZXIsZz13aW5kb3cuVGV4dDtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGMucHJvdG90eXBlLHtzcGxpdFRleHQ6ZnVuY3Rpb24oYSl7YT1iKGEpO3ZhciBjPXRoaXMuZGF0YTtpZihhPmMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW5kZXhTaXplRXJyb3IiKTt2YXIgZD1jLnNsaWNlKDAsYSksZT1jLnNsaWNlKGEpO3RoaXMuZGF0YT1kO3ZhciBmPXRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKTtyZXR1cm4gdGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYsdGhpcy5uZXh0U2libGluZyksZn19KSxmKGcsYyxkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGEud3JhcHBlcnMuVGV4dD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIpe2EuaW52YWxpZGF0ZVJlbmRlcmVyQmFzZWRPbkF0dHJpYnV0ZShiLCJjbGFzcyIpfWZ1bmN0aW9uIGMoYSxiKXt0aGlzLmltcGw9YSx0aGlzLm93bmVyRWxlbWVudF89Yn1jLnByb3RvdHlwZT17Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLmltcGwubGVuZ3RofSxpdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmltcGwuaXRlbShhKX0sY29udGFpbnM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1wbC5jb250YWlucyhhKX0sYWRkOmZ1bmN0aW9uKCl7dGhpcy5pbXBsLmFkZC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSxiKHRoaXMub3duZXJFbGVtZW50Xyl9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuaW1wbC5yZW1vdmUuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyksYih0aGlzLm93bmVyRWxlbWVudF8pfSx0b2dnbGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltcGwudG9nZ2xlLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpO3JldHVybiBiKHRoaXMub3duZXJFbGVtZW50XyksYX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxhLndyYXBwZXJzLkRPTVRva2VuTGlzdD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIsYyl7dmFyIGQ9Yi5wYXJlbnROb2RlO2lmKGQmJmQuc2hhZG93Um9vdCl7dmFyIGU9YS5nZXRSZW5kZXJlckZvckhvc3QoZCk7ZS5kZXBlbmRzT25BdHRyaWJ1dGUoYykmJmUuaW52YWxpZGF0ZSgpfX1mdW5jdGlvbiBjKGEsYixjKXtrKGEsImF0dHJpYnV0ZXMiLHtuYW1lOmIsbmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6Y30pfWZ1bmN0aW9uIGQoYSl7Zy5jYWxsKHRoaXMsYSl9dmFyIGU9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsZz1hLndyYXBwZXJzLk5vZGUsaD1hLndyYXBwZXJzLkRPTVRva2VuTGlzdCxpPWEuUGFyZW50Tm9kZUludGVyZmFjZSxqPWEuU2VsZWN0b3JzSW50ZXJmYWNlLGs9KGEuYWRkV3JhcE5vZGVMaXN0TWV0aG9kLGEuZW5xdWV1ZU11dGF0aW9uKSxsPWEubWl4aW4sbT0oYS5vbmVPZixhLnJlZ2lzdGVyV3JhcHBlciksbj1hLnVud3JhcCxvPWEud3JhcHBlcnMscD13aW5kb3cuRWxlbWVudCxxPVsibWF0Y2hlcyIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIl0uZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBwLnByb3RvdHlwZVthXX0pLHI9cVswXSxzPXAucHJvdG90eXBlW3JdLHQ9bmV3IFdlYWtNYXA7ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSksbChkLnByb3RvdHlwZSx7Y3JlYXRlU2hhZG93Um9vdDpmdW5jdGlvbigpe3ZhciBiPW5ldyBvLlNoYWRvd1Jvb3QodGhpcyk7dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSb290Xz1iO3ZhciBjPWEuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMpO3JldHVybiBjLmludmFsaWRhdGUoKSxifSxnZXQgc2hhZG93Um9vdCgpe3JldHVybiB0aGlzLmltcGwucG9seW1lclNoYWRvd1Jvb3RffHxudWxsfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxkKXt2YXIgZT10aGlzLmltcGwuZ2V0QXR0cmlidXRlKGEpO3RoaXMuaW1wbC5zZXRBdHRyaWJ1dGUoYSxkKSxjKHRoaXMsYSxlKSxiKHRoaXMsYSl9LHJlbW92ZUF0dHJpYnV0ZTpmdW5jdGlvbihhKXt2YXIgZD10aGlzLmltcGwuZ2V0QXR0cmlidXRlKGEpO3RoaXMuaW1wbC5yZW1vdmVBdHRyaWJ1dGUoYSksYyh0aGlzLGEsZCksYih0aGlzLGEpfSxtYXRjaGVzOmZ1bmN0aW9uKGEpe3JldHVybiBzLmNhbGwodGhpcy5pbXBsLGEpfSxnZXQgY2xhc3NMaXN0KCl7dmFyIGE9dC5nZXQodGhpcyk7cmV0dXJuIGF8fHQuc2V0KHRoaXMsYT1uZXcgaChuKHRoaXMpLmNsYXNzTGlzdCx0aGlzKSksYX0sZ2V0IGNsYXNzTmFtZSgpe3JldHVybiBuKHRoaXMpLmNsYXNzTmFtZX0sc2V0IGNsYXNzTmFtZShhKXt0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGEpfSxnZXQgaWQoKXtyZXR1cm4gbih0aGlzKS5pZH0sc2V0IGlkKGEpe3RoaXMuc2V0QXR0cmlidXRlKCJpZCIsYSl9fSkscS5mb3JFYWNoKGZ1bmN0aW9uKGEpeyJtYXRjaGVzIiE9PWEmJihkLnByb3RvdHlwZVthXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXRjaGVzKGEpfSl9KSxwLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290JiYoZC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1kLnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290KSxsKGQucHJvdG90eXBlLGUpLGwoZC5wcm90b3R5cGUsZiksbChkLnByb3RvdHlwZSxpKSxsKGQucHJvdG90eXBlLGopLG0ocCxkLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhudWxsLCJ4IikpLGEuaW52YWxpZGF0ZVJlbmRlcmVyQmFzZWRPbkF0dHJpYnV0ZT1iLGEubWF0Y2hlc05hbWVzPXEsYS53cmFwcGVycy5FbGVtZW50PWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7c3dpdGNoKGEpe2Nhc2UiJiI6cmV0dXJuIiZhbXA7IjtjYXNlIjwiOnJldHVybiImbHQ7IjtjYXNlIj4iOnJldHVybiImZ3Q7IjtjYXNlJyInOnJldHVybiImcXVvdDsiO2Nhc2UiXHhhMCI6cmV0dXJuIiZuYnNwOyJ9fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucmVwbGFjZSh6LGIpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEucmVwbGFjZShBLGIpfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPXt9LGM9MDtjPGEubGVuZ3RoO2MrKyliW2FbY11dPSEwO3JldHVybiBifWZ1bmN0aW9uIGYoYSxiKXtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmb3IodmFyIGUsZj1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxoPSI8IitmLGk9YS5hdHRyaWJ1dGVzLGo9MDtlPWlbal07aisrKWgrPSIgIitlLm5hbWUrJz0iJytjKGUudmFsdWUpKyciJztyZXR1cm4gaCs9Ij4iLEJbZl0/aDpoK2coYSkrIjwvIitmKyI+IjtjYXNlIE5vZGUuVEVYVF9OT0RFOnZhciBrPWEuZGF0YTtyZXR1cm4gYiYmQ1tiLmxvY2FsTmFtZV0/azpkKGspO2Nhc2UgTm9kZS5DT01NRU5UX05PREU6cmV0dXJuIjwhLS0iK2EuZGF0YSsiLS0+IjtkZWZhdWx0OnRocm93IGNvbnNvbGUuZXJyb3IoYSksbmV3IEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKX19ZnVuY3Rpb24gZyhhKXthIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50JiYoYT1hLmNvbnRlbnQpO2Zvcih2YXIgYj0iIixjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyliKz1mKGMsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGQ9Y3x8ImRpdiI7YS50ZXh0Q29udGVudD0iIjt2YXIgZT13KGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KGQpKTtlLmlubmVySFRNTD1iO2Zvcih2YXIgZjtmPWUuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZCh4KGYpKX1mdW5jdGlvbiBpKGEpe28uY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz13KGEuY2xvbmVOb2RlKCExKSk7Yy5pbm5lckhUTUw9Yjtmb3IodmFyIGQsZT13KGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7ZD1jLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoZCk7cmV0dXJuIHgoZSl9ZnVuY3Rpb24gayhiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdfX1mdW5jdGlvbiBsKGEpe3AoaSxhLGsoYSkpfWZ1bmN0aW9uIG0oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLGIse2dldDprKGIpLHNldDpmdW5jdGlvbihjKXthLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl09Y30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBuKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxiLHt2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIG89YS53cmFwcGVycy5FbGVtZW50LHA9YS5kZWZpbmVHZXR0ZXIscT1hLmVucXVldWVNdXRhdGlvbixyPWEubWl4aW4scz1hLm5vZGVzV2VyZUFkZGVkLHQ9YS5ub2Rlc1dlcmVSZW1vdmVkLHU9YS5yZWdpc3RlcldyYXBwZXIsdj1hLnNuYXBzaG90Tm9kZUxpc3Qsdz1hLnVud3JhcCx4PWEud3JhcCx5PWEud3JhcHBlcnMsej0vWyZcdTAwQTAiXS9nLEE9L1smXHUwMEEwPD5dL2csQj1lKFsiYXJlYSIsImJhc2UiLCJiciIsImNvbCIsImNvbW1hbmQiLCJlbWJlZCIsImhyIiwiaW1nIiwiaW5wdXQiLCJrZXlnZW4iLCJsaW5rIiwibWV0YSIsInBhcmFtIiwic291cmNlIiwidHJhY2siLCJ3YnIiXSksQz1lKFsic3R5bGUiLCJzY3JpcHQiLCJ4bXAiLCJpZnJhbWUiLCJub2VtYmVkIiwibm9mcmFtZXMiLCJwbGFpbnRleHQiLCJub3NjcmlwdCJdKSxEPS9NU0lFLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLEU9d2luZG93LkhUTUxFbGVtZW50LEY9d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSkscihpLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBnKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2lmKEQmJkNbdGhpcy5sb2NhbE5hbWVdKXJldHVybiB2b2lkKHRoaXMudGV4dENvbnRlbnQ9YSk7dmFyIGI9dih0aGlzLmNoaWxkTm9kZXMpO3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk/dGhpcyBpbnN0YW5jZW9mIHkuSFRNTFRlbXBsYXRlRWxlbWVudD9oKHRoaXMuY29udGVudCxhKTpoKHRoaXMsYSx0aGlzLnRhZ05hbWUpOiFGJiZ0aGlzIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50P2godGhpcy5jb250ZW50LGEpOnRoaXMuaW1wbC5pbm5lckhUTUw9YTt2YXIgYz12KHRoaXMuY2hpbGROb2Rlcyk7cSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmMscmVtb3ZlZE5vZGVzOmJ9KSx0KGIpLHMoYyx0aGlzKX0sZ2V0IG91dGVySFRNTCgpe3JldHVybiBmKHRoaXMsdGhpcy5wYXJlbnROb2RlKX0sc2V0IG91dGVySFRNTChhKXt2YXIgYj10aGlzLnBhcmVudE5vZGU7aWYoYil7Yi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKTt2YXIgYz1qKGIsYSk7Yi5yZXBsYWNlQ2hpbGQoYyx0aGlzKX19LGluc2VydEFkamFjZW50SFRNTDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7c3dpdGNoKFN0cmluZyhhKS50b0xvd2VyQ2FzZSgpKXtjYXNlImJlZm9yZWJlZ2luIjpjPXRoaXMucGFyZW50Tm9kZSxkPXRoaXM7YnJlYWs7Y2FzZSJhZnRlcmVuZCI6Yz10aGlzLnBhcmVudE5vZGUsZD10aGlzLm5leHRTaWJsaW5nO2JyZWFrO2Nhc2UiYWZ0ZXJiZWdpbiI6Yz10aGlzLGQ9dGhpcy5maXJzdENoaWxkO2JyZWFrO2Nhc2UiYmVmb3JlZW5kIjpjPXRoaXMsZD1udWxsO2JyZWFrO2RlZmF1bHQ6cmV0dXJufXZhciBlPWooYyxiKTtjLmluc2VydEJlZm9yZShlLGQpfSxnZXQgaGlkZGVuKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKCJoaWRkZW4iKX0sc2V0IGhpZGRlbihhKXthP3RoaXMuc2V0QXR0cmlidXRlKCJoaWRkZW4iLCIiKTp0aGlzLnJlbW92ZUF0dHJpYnV0ZSgiaGlkZGVuIil9fSksWyJjbGllbnRIZWlnaHQiLCJjbGllbnRMZWZ0IiwiY2xpZW50VG9wIiwiY2xpZW50V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0VG9wIiwib2Zmc2V0V2lkdGgiLCJzY3JvbGxIZWlnaHQiLCJzY3JvbGxXaWR0aCJdLmZvckVhY2gobCksWyJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIl0uZm9yRWFjaChtKSxbImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdldENsaWVudFJlY3RzIiwic2Nyb2xsSW50b1ZpZXciXS5mb3JFYWNoKG4pLHUoRSxpLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImIiKSksYS53cmFwcGVycy5IVE1MRWxlbWVudD1pLGEuZ2V0SW5uZXJIVE1MPWcsYS5zZXRJbm5lckhUTUw9aH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS53cmFwLGc9d2luZG93LkhUTUxDYW52YXNFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldENvbnRleHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltcGwuZ2V0Q29udGV4dC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKTtyZXR1cm4gYSYmZihhKX19KSxlKGcsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKSksYS53cmFwcGVycy5IVE1MQ2FudmFzRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj13aW5kb3cuSFRNTENvbnRlbnRFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCBzZWxlY3QoKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpfSxzZXQgc2VsZWN0KGEpe3RoaXMuc2V0QXR0cmlidXRlKCJzZWxlY3QiLGEpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXtjLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGEsYiksInNlbGVjdCI9PT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKSYmdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoITApfX0pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9d2luZG93LkhUTUxGb3JtRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgZWxlbWVudHMoKXtyZXR1cm4gZihnKHRoaXMpLmVsZW1lbnRzKX19KSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIikpLGEud3JhcHBlcnMuSFRNTEZvcm1FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGMpKXRocm93IG5ldyBUeXBlRXJyb3IoIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3ZhciBlPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpO2QuY2FsbCh0aGlzLGUpLGcoZSx0aGlzKSx2b2lkIDAhPT1hJiYoZS53aWR0aD1hKSx2b2lkIDAhPT1iJiYoZS5oZWlnaHQ9Yil9dmFyIGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLnJld3JhcCxoPXdpbmRvdy5IVE1MSW1hZ2VFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpKSxjLnByb3RvdHlwZT1iLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxJbWFnZUVsZW1lbnQ9YixhLndyYXBwZXJzLkltYWdlPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPShhLm1peGluLGEud3JhcHBlcnMuTm9kZUxpc3QsYS5yZWdpc3RlcldyYXBwZXIpLGU9d2luZG93LkhUTUxTaGFkb3dFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUmJmQoZSxiKSxhLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEuZGVmYXVsdFZpZXcpcmV0dXJuIGE7dmFyIGI9ay5nZXQoYSk7aWYoIWIpe2ZvcihiPWEuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtiLmxhc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmxhc3RDaGlsZCk7ay5zZXQoYSxiKX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYyxkPWIoYS5vd25lckRvY3VtZW50KSxlPWgoZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2M9YS5maXJzdENoaWxkOyllLmFwcGVuZENoaWxkKGMpO3JldHVybiBlfWZ1bmN0aW9uIGQoYSl7aWYoZS5jYWxsKHRoaXMsYSksIWwpe3ZhciBiPWMoYSk7ai5zZXQodGhpcyxpKGIpKX19dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEudW53cmFwLGk9YS53cmFwLGo9bmV3IFdlYWtNYXAsaz1uZXcgV2Vha01hcCxsPXdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50O2QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUpLGYoZC5wcm90b3R5cGUse2dldCBjb250ZW50KCl7cmV0dXJuIGw/aSh0aGlzLmltcGwuY29udGVudCk6ai5nZXQodGhpcyl9fSksbCYmZyhsLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLnJlZ2lzdGVyV3JhcHBlcixlPXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoZSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIikpLGEud3JhcHBlcnMuSFRNTE1lZGlhRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGMoYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGI9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpKTtkLmNhbGwodGhpcyxiKSxnKGIsdGhpcyksYi5zZXRBdHRyaWJ1dGUoInByZWxvYWQiLCJhdXRvIiksdm9pZCAwIT09YSYmYi5zZXRBdHRyaWJ1dGUoInNyYyIsYSl9dmFyIGQ9YS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxBdWRpb0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSksYy5wcm90b3R5cGU9Yi5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MQXVkaW9FbGVtZW50PWIsYS53cmFwcGVycy5BdWRpbz1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhLnJlcGxhY2UoL1xzKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uIGMoYSl7ZS5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gZChhLGIsYyxmKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt2YXIgZz1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtlLmNhbGwodGhpcyxnKSxoKGcsdGhpcyksdm9pZCAwIT09YSYmKGcudGV4dD1hKSx2b2lkIDAhPT1iJiZnLnNldEF0dHJpYnV0ZSgidmFsdWUiLGIpLGM9PT0hMCYmZy5zZXRBdHRyaWJ1dGUoInNlbGVjdGVkIiwiIiksZy5zZWxlY3RlZD1mPT09ITB9dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEucmV3cmFwLGk9YS51bndyYXAsaj1hLndyYXAsaz13aW5kb3cuSFRNTE9wdGlvbkVsZW1lbnQ7Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZihjLnByb3RvdHlwZSx7Z2V0IHRleHQoKXtyZXR1cm4gYih0aGlzLnRleHRDb250ZW50KX0sc2V0IHRleHQoYSl7dGhpcy50ZXh0Q29udGVudD1iKFN0cmluZyhhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGooaSh0aGlzKS5mb3JtKX19KSxnKGssYyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSksZC5wcm90b3R5cGU9Yy5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MT3B0aW9uRWxlbWVudD1jLGEud3JhcHBlcnMuT3B0aW9uPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS53cmFwLGg9d2luZG93LkhUTUxTZWxlY3RFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2FkZDpmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgYiYmKGI9ZihiKSksZih0aGlzKS5hZGQoZihhKSxiKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP3ZvaWQgYy5wcm90b3R5cGUucmVtb3ZlLmNhbGwodGhpcyk6KCJvYmplY3QiPT10eXBlb2YgYSYmKGE9ZihhKSksdm9pZCBmKHRoaXMpLnJlbW92ZShhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGcoZih0aGlzKS5mb3JtKX19KSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKSksYS53cmFwcGVycy5IVE1MU2VsZWN0RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEud3JhcCxoPWEud3JhcEhUTUxDb2xsZWN0aW9uLGk9d2luZG93LkhUTUxUYWJsZUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNhcHRpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNhcHRpb24pfSxjcmVhdGVDYXB0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVDYXB0aW9uKCkpfSxnZXQgdEhlYWQoKXtyZXR1cm4gZyhmKHRoaXMpLnRIZWFkKX0sY3JlYXRlVEhlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZVRIZWFkKCkpfSxjcmVhdGVURm9vdDpmdW5jdGlvbigpe3JldHVybiBnKGYodGhpcykuY3JlYXRlVEZvb3QoKSl9LGdldCB0Rm9vdCgpe3JldHVybiBnKGYodGhpcykudEZvb3QpfSxnZXQgdEJvZGllcygpe3JldHVybiBoKGYodGhpcykudEJvZGllcykKfSxjcmVhdGVUQm9keTpmdW5jdGlvbigpe3JldHVybiBnKGYodGhpcykuY3JlYXRlVEJvZHkoKSl9LGdldCByb3dzKCl7cmV0dXJuIGgoZih0aGlzKS5yb3dzKX0saW5zZXJ0Um93OmZ1bmN0aW9uKGEpe3JldHVybiBnKGYodGhpcykuaW5zZXJ0Um93KGEpKX19KSxlKGksYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpKSxhLndyYXBwZXJzLkhUTUxUYWJsZUVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS53cmFwSFRNTENvbGxlY3Rpb24sZz1hLnVud3JhcCxoPWEud3JhcCxpPXdpbmRvdy5IVE1MVGFibGVTZWN0aW9uRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgcm93cygpe3JldHVybiBmKGcodGhpcykucm93cyl9LGluc2VydFJvdzpmdW5jdGlvbihhKXtyZXR1cm4gaChnKHRoaXMpLmluc2VydFJvdyhhKSl9fSksZShpLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGhlYWQiKSksYS53cmFwcGVycy5IVE1MVGFibGVTZWN0aW9uRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9YS53cmFwLGk9d2luZG93LkhUTUxUYWJsZVJvd0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNlbGxzKCl7cmV0dXJuIGYoZyh0aGlzKS5jZWxscyl9LGluc2VydENlbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIGgoZyh0aGlzKS5pbnNlcnRDZWxsKGEpKX19KSxlKGksYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpKSxhLndyYXBwZXJzLkhUTUxUYWJsZVJvd0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYS5sb2NhbE5hbWUpe2Nhc2UiY29udGVudCI6cmV0dXJuIG5ldyBjKGEpO2Nhc2Uic2hhZG93IjpyZXR1cm4gbmV3IGUoYSk7Y2FzZSJ0ZW1wbGF0ZSI6cmV0dXJuIG5ldyBmKGEpfWQuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsZj1hLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQsZz0oYS5taXhpbixhLnJlZ2lzdGVyV3JhcHBlciksaD13aW5kb3cuSFRNTFVua25vd25FbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGcoaCxiKSxhLndyYXBwZXJzLkhUTUxVbmtub3duRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLndyYXBwZXJzLkVsZW1lbnQsYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5yZWdpc3Rlck9iamVjdCxlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZSwidGl0bGUiKSxnPWQoZiksaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZy5wcm90b3R5cGUpLmNvbnN0cnVjdG9yO2lmKCEoImNsYXNzTGlzdCJpbiBmKSl7dmFyIGk9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLnByb3RvdHlwZSwiY2xhc3NMaXN0Iik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMucHJvdG90eXBlLCJjbGFzc0xpc3QiLGkpLGRlbGV0ZSBiLnByb3RvdHlwZS5jbGFzc0xpc3R9YS53cmFwcGVycy5TVkdFbGVtZW50PWh9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7bS5jYWxsKHRoaXMsYSl9dmFyIGM9YS5taXhpbixkPWEucmVnaXN0ZXJXcmFwcGVyLGU9YS51bndyYXAsZj1hLndyYXAsZz13aW5kb3cuU1ZHVXNlRWxlbWVudCxoPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsaT1mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhoLCJnIikpLGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGgsInVzZSIpLGs9aS5jb25zdHJ1Y3RvcixsPU9iamVjdC5nZXRQcm90b3R5cGVPZihrLnByb3RvdHlwZSksbT1sLmNvbnN0cnVjdG9yO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobCksImluc3RhbmNlUm9vdCJpbiBqJiZjKGIucHJvdG90eXBlLHtnZXQgaW5zdGFuY2VSb290KCl7cmV0dXJuIGYoZSh0aGlzKS5pbnN0YW5jZVJvb3QpfSxnZXQgYW5pbWF0ZWRJbnN0YW5jZVJvb3QoKXtyZXR1cm4gZihlKHRoaXMpLmFuaW1hdGVkSW5zdGFuY2VSb290KX19KSxkKGcsYixqKSxhLndyYXBwZXJzLlNWR1VzZUVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS53cmFwLGc9d2luZG93LlNWR0VsZW1lbnRJbnN0YW5jZTtnJiYoYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNvcnJlc3BvbmRpbmdFbGVtZW50KCl7cmV0dXJuIGYodGhpcy5pbXBsLmNvcnJlc3BvbmRpbmdFbGVtZW50KX0sZ2V0IGNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KCl7cmV0dXJuIGYodGhpcy5pbXBsLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KX0sZ2V0IHBhcmVudE5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBjaGlsZE5vZGVzKCl7dGhyb3cgbmV3IEVycm9yKCJOb3QgaW1wbGVtZW50ZWQiKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gZih0aGlzLmltcGwuZmlyc3RDaGlsZCl9LGdldCBsYXN0Q2hpbGQoKXtyZXR1cm4gZih0aGlzLmltcGwubGFzdENoaWxkKX0sZ2V0IHByZXZpb3VzU2libGluZygpe3JldHVybiBmKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgbmV4dFNpYmxpbmcoKXtyZXR1cm4gZih0aGlzLmltcGwubmV4dFNpYmxpbmcpfX0pLGUoZyxiKSxhLndyYXBwZXJzLlNWR0VsZW1lbnRJbnN0YW5jZT1iKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcCxmPWEudW53cmFwSWZOZWVkZWQsZz1hLndyYXAsaD13aW5kb3cuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO2MoYi5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gZyh0aGlzLmltcGwuY2FudmFzKX0sZHJhd0ltYWdlOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzBdPWYoYXJndW1lbnRzWzBdKSx0aGlzLmltcGwuZHJhd0ltYWdlLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSxjcmVhdGVQYXR0ZXJuOmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT1lKGFyZ3VtZW50c1swXSksdGhpcy5pbXBsLmNyZWF0ZVBhdHRlcm4uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9fSksZChoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKSksYS53cmFwcGVycy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcElmTmVlZGVkLGY9YS53cmFwLGc9d2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dDtpZihnKXtjKGIucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNhbnZhcyl9LHRleEltYWdlMkQ6ZnVuY3Rpb24oKXthcmd1bWVudHNbNV09ZShhcmd1bWVudHNbNV0pLHRoaXMuaW1wbC50ZXhJbWFnZTJELmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSx0ZXhTdWJJbWFnZTJEOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzZdPWUoYXJndW1lbnRzWzZdKSx0aGlzLmltcGwudGV4U3ViSW1hZ2UyRC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19KTt2YXIgaD0vV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpP3tkcmF3aW5nQnVmZmVySGVpZ2h0Om51bGwsZHJhd2luZ0J1ZmZlcldpZHRoOm51bGx9Ont9O2QoZyxiLGgpLGEud3JhcHBlcnMuV2ViR0xSZW5kZXJpbmdDb250ZXh0PWJ9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEucmVnaXN0ZXJXcmFwcGVyLGQ9YS51bndyYXAsZT1hLnVud3JhcElmTmVlZGVkLGY9YS53cmFwLGc9d2luZG93LlJhbmdlO2IucHJvdG90eXBlPXtnZXQgc3RhcnRDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuc3RhcnRDb250YWluZXIpfSxnZXQgZW5kQ29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLmVuZENvbnRhaW5lcil9LGdldCBjb21tb25BbmNlc3RvckNvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5jb21tb25BbmNlc3RvckNvbnRhaW5lcil9LHNldFN0YXJ0OmZ1bmN0aW9uKGEsYil7dGhpcy5pbXBsLnNldFN0YXJ0KGUoYSksYil9LHNldEVuZDpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5zZXRFbmQoZShhKSxiKX0sc2V0U3RhcnRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldFN0YXJ0QmVmb3JlKGUoYSkpfSxzZXRTdGFydEFmdGVyOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRTdGFydEFmdGVyKGUoYSkpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldEVuZEJlZm9yZShlKGEpKX0sc2V0RW5kQWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldEVuZEFmdGVyKGUoYSkpfSxzZWxlY3ROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3ROb2RlKGUoYSkpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNlbGVjdE5vZGVDb250ZW50cyhlKGEpKX0sY29tcGFyZUJvdW5kYXJ5UG9pbnRzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5jb21wYXJlQm91bmRhcnlQb2ludHMoYSxkKGIpKX0sZXh0cmFjdENvbnRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmV4dHJhY3RDb250ZW50cygpKX0sY2xvbmVDb250ZW50czpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5jbG9uZUNvbnRlbnRzKCkpfSxpbnNlcnROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5pbnNlcnROb2RlKGUoYSkpfSxzdXJyb3VuZENvbnRlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zdXJyb3VuZENvbnRlbnRzKGUoYSkpfSxjbG9uZVJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNsb25lUmFuZ2UoKSl9LGlzUG9pbnRJblJhbmdlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5pc1BvaW50SW5SYW5nZShlKGEpLGIpfSxjb21wYXJlUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbXBhcmVQb2ludChlKGEpLGIpfSxpbnRlcnNlY3RzTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbXBsLmludGVyc2VjdHNOb2RlKGUoYSkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGwudG9TdHJpbmcoKX19LGcucHJvdG90eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCYmKGIucHJvdG90eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gZih0aGlzLmltcGwuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGEpKX0pLGMod2luZG93LlJhbmdlLGIsZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSksYS53cmFwcGVycy5SYW5nZT1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYz1hLlBhcmVudE5vZGVJbnRlcmZhY2UsZD1hLlNlbGVjdG9yc0ludGVyZmFjZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyT2JqZWN0LGc9Zihkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2UoZy5wcm90b3R5cGUsYyksZShnLnByb3RvdHlwZSxkKSxlKGcucHJvdG90eXBlLGIpO3ZhciBoPWYoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikpO2Eud3JhcHBlcnMuQ29tbWVudD1oLGEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudD1nfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWsoYS5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtjLmNhbGwodGhpcyxiKSxpKGIsdGhpcyk7dmFyIGU9YS5zaGFkb3dSb290O20uc2V0KHRoaXMsZSksdGhpcy50cmVlU2NvcGVfPW5ldyBkKHRoaXMsZyhlfHxhKSksbC5zZXQodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkRvY3VtZW50RnJhZ21lbnQsZD1hLlRyZWVTY29wZSxlPWEuZWxlbWVudEZyb21Qb2ludCxmPWEuZ2V0SW5uZXJIVE1MLGc9YS5nZXRUcmVlU2NvcGUsaD1hLm1peGluLGk9YS5yZXdyYXAsaj1hLnNldElubmVySFRNTCxrPWEudW53cmFwLGw9bmV3IFdlYWtNYXAsbT1uZXcgV2Vha01hcCxuPS9bIFx0XG5cclxmXS87Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksaChiLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBmKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2oodGhpcyxhKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxnZXQgb2xkZXJTaGFkb3dSb290KCl7cmV0dXJuIG0uZ2V0KHRoaXMpfHxudWxsfSxnZXQgaG9zdCgpe3JldHVybiBsLmdldCh0aGlzKXx8bnVsbH0saW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyOmZ1bmN0aW9uKCl7cmV0dXJuIGwuZ2V0KHRoaXMpLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUodGhpcyx0aGlzLm93bmVyRG9jdW1lbnQsYSxiKX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG4udGVzdChhKT9udWxsOnRoaXMucXVlcnlTZWxlY3RvcignW2lkPSInK2ErJyJdJyl9fSksYS53cmFwcGVycy5TaGFkb3dSb290PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7YS5wcmV2aW91c1NpYmxpbmdfPWEucHJldmlvdXNTaWJsaW5nLGEubmV4dFNpYmxpbmdfPWEubmV4dFNpYmxpbmcsYS5wYXJlbnROb2RlXz1hLnBhcmVudE5vZGV9ZnVuY3Rpb24gYyhhLGMsZSl7dmFyIGY9RyhhKSxnPUcoYyksaD1lP0coZSk6bnVsbDtpZihkKGMpLGIoYyksZSlhLmZpcnN0Q2hpbGQ9PT1lJiYoYS5maXJzdENoaWxkXz1lKSxlLnByZXZpb3VzU2libGluZ189ZS5wcmV2aW91c1NpYmxpbmc7ZWxzZXthLmxhc3RDaGlsZF89YS5sYXN0Q2hpbGQsYS5sYXN0Q2hpbGQ9PT1hLmZpcnN0Q2hpbGQmJihhLmZpcnN0Q2hpbGRfPWEuZmlyc3RDaGlsZCk7dmFyIGk9SChmLmxhc3RDaGlsZCk7aSYmKGkubmV4dFNpYmxpbmdfPWkubmV4dFNpYmxpbmcpfWYuaW5zZXJ0QmVmb3JlKGcsaCl9ZnVuY3Rpb24gZChhKXt2YXIgYz1HKGEpLGQ9Yy5wYXJlbnROb2RlO2lmKGQpe3ZhciBlPUgoZCk7YihhKSxhLnByZXZpb3VzU2libGluZyYmKGEucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1hKSxhLm5leHRTaWJsaW5nJiYoYS5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPWEpLGUubGFzdENoaWxkPT09YSYmKGUubGFzdENoaWxkXz1hKSxlLmZpcnN0Q2hpbGQ9PT1hJiYoZS5maXJzdENoaWxkXz1hKSxkLnJlbW92ZUNoaWxkKGMpfX1mdW5jdGlvbiBlKGEpe0kuc2V0KGEsW10pfWZ1bmN0aW9uIGYoYSl7dmFyIGI9SS5nZXQoYSk7cmV0dXJuIGJ8fEkuc2V0KGEsYj1bXSksYn1mdW5jdGlvbiBnKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYltjKytdPWQ7cmV0dXJuIGJ9ZnVuY3Rpb24gaCgpe2Zvcih2YXIgYT0wO2E8TS5sZW5ndGg7YSsrKXt2YXIgYj1NW2FdLGM9Yi5wYXJlbnRSZW5kZXJlcjtjJiZjLmRpcnR5fHxiLnJlbmRlcigpfU09W119ZnVuY3Rpb24gaSgpe3k9bnVsbCxoKCl9ZnVuY3Rpb24gaihhKXt2YXIgYj1LLmdldChhKTtyZXR1cm4gYnx8KGI9bmV3IG4oYSksSy5zZXQoYSxiKSksYn1mdW5jdGlvbiBrKGEpe3ZhciBiPUUoYSkucm9vdDtyZXR1cm4gYiBpbnN0YW5jZW9mIEQ/YjpudWxsfWZ1bmN0aW9uIGwoYSl7cmV0dXJuIGooYS5ob3N0KX1mdW5jdGlvbiBtKGEpe3RoaXMuc2tpcD0hMSx0aGlzLm5vZGU9YSx0aGlzLmNoaWxkTm9kZXM9W119ZnVuY3Rpb24gbihhKXt0aGlzLmhvc3Q9YSx0aGlzLmRpcnR5PSExLHRoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKSx0aGlzLmFzc29jaWF0ZU5vZGUoYSl9ZnVuY3Rpb24gbyhhKXtmb3IodmFyIGI9W10sYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpdihjKT9iLnB1c2guYXBwbHkoYixmKGMpKTpiLnB1c2goYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gcChhKXtpZihhIGluc3RhbmNlb2YgQilyZXR1cm4gYTtpZihhIGluc3RhbmNlb2YgQSlyZXR1cm4gbnVsbDtmb3IodmFyIGI9YS5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKXt2YXIgYz1wKGIpO2lmKGMpcmV0dXJuIGN9cmV0dXJuIG51bGx9ZnVuY3Rpb24gcShhLGIpe2YoYikucHVzaChhKTt2YXIgYz1KLmdldChhKTtjP2MucHVzaChiKTpKLnNldChhLFtiXSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gSi5nZXQoYSl9ZnVuY3Rpb24gcyhhKXtKLnNldChhLHZvaWQgMCl9ZnVuY3Rpb24gdChhLGIpe3ZhciBjPWIuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKTtpZighYylyZXR1cm4hMDtpZihjPWMudHJpbSgpLCFjKXJldHVybiEwO2lmKCEoYSBpbnN0YW5jZW9mIHopKXJldHVybiExO2lmKCFPLnRlc3QoYykpcmV0dXJuITE7dHJ5e3JldHVybiBhLm1hdGNoZXMoYyl9Y2F0Y2goZCl7cmV0dXJuITF9fWZ1bmN0aW9uIHUoYSxiKXt2YXIgYz1yKGIpO3JldHVybiBjJiZjW2MubGVuZ3RoLTFdPT09YX1mdW5jdGlvbiB2KGEpe3JldHVybiBhIGluc3RhbmNlb2YgQXx8YSBpbnN0YW5jZW9mIEJ9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gYS5zaGFkb3dSb290fWZ1bmN0aW9uIHgoYSl7Zm9yKHZhciBiPVtdLGM9YS5zaGFkb3dSb290O2M7Yz1jLm9sZGVyU2hhZG93Um9vdCliLnB1c2goYyk7cmV0dXJuIGJ9dmFyIHksej1hLndyYXBwZXJzLkVsZW1lbnQsQT1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxCPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsQz1hLndyYXBwZXJzLk5vZGUsRD1hLndyYXBwZXJzLlNoYWRvd1Jvb3QsRT0oYS5hc3NlcnQsYS5nZXRUcmVlU2NvcGUpLEY9KGEubWl4aW4sYS5vbmVPZiksRz1hLnVud3JhcCxIPWEud3JhcCxJPW5ldyBXZWFrTWFwLEo9bmV3IFdlYWtNYXAsSz1uZXcgV2Vha01hcCxMPUYod2luZG93LFsicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2V0VGltZW91dCJdKSxNPVtdLE49bmV3IEFycmF5U3BsaWNlO04uZXF1YWxzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEcoYS5ub2RlKT09PWJ9LG0ucHJvdG90eXBlPXthcHBlbmQ6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IG0oYSk7cmV0dXJuIHRoaXMuY2hpbGROb2Rlcy5wdXNoKGIpLGJ9LHN5bmM6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuc2tpcCl7Zm9yKHZhciBiPXRoaXMubm9kZSxlPXRoaXMuY2hpbGROb2RlcyxmPWcoRyhiKSksaD1hfHxuZXcgV2Vha01hcCxpPU4uY2FsY3VsYXRlU3BsaWNlcyhlLGYpLGo9MCxrPTAsbD0wLG09MDttPGkubGVuZ3RoO20rKyl7Zm9yKHZhciBuPWlbbV07bDxuLmluZGV4O2wrKylrKyssZVtqKytdLnN5bmMoaCk7Zm9yKHZhciBvPW4ucmVtb3ZlZC5sZW5ndGgscD0wO28+cDtwKyspe3ZhciBxPUgoZltrKytdKTtoLmdldChxKXx8ZChxKX1mb3IodmFyIHI9bi5hZGRlZENvdW50LHM9ZltrXSYmSChmW2tdKSxwPTA7cj5wO3ArKyl7dmFyIHQ9ZVtqKytdLHU9dC5ub2RlO2MoYix1LHMpLGguc2V0KHUsITApLHQuc3luYyhoKX1sKz1yfWZvcih2YXIgbT1sO208ZS5sZW5ndGg7bSsrKWVbbV0uc3luYyhoKX19fSxuLnByb3RvdHlwZT17cmVuZGVyOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZGlydHkpe3RoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKTt2YXIgYj10aGlzLmhvc3Q7dGhpcy5kaXN0cmlidXRpb24oYik7dmFyIGM9YXx8bmV3IG0oYik7dGhpcy5idWlsZFJlbmRlclRyZWUoYyxiKTt2YXIgZD0hYTtkJiZjLnN5bmMoKSx0aGlzLmRpcnR5PSExfX0sZ2V0IHBhcmVudFJlbmRlcmVyKCl7cmV0dXJuIEUodGhpcy5ob3N0KS5yZW5kZXJlcn0saW52YWxpZGF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmRpcnR5KXt0aGlzLmRpcnR5PSEwO3ZhciBhPXRoaXMucGFyZW50UmVuZGVyZXI7aWYoYSYmYS5pbnZhbGlkYXRlKCksTS5wdXNoKHRoaXMpLHkpcmV0dXJuO3k9d2luZG93W0xdKGksMCl9fSxkaXN0cmlidXRpb246ZnVuY3Rpb24oYSl7dGhpcy5yZXNldEFsbChhKSx0aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oYSl9LHJlc2V0QWxsOmZ1bmN0aW9uKGEpe3YoYSk/ZShhKTpzKGEpO2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpdGhpcy5yZXNldEFsbChiKTthLnNoYWRvd1Jvb3QmJnRoaXMucmVzZXRBbGwoYS5zaGFkb3dSb290KSxhLm9sZGVyU2hhZG93Um9vdCYmdGhpcy5yZXNldEFsbChhLm9sZGVyU2hhZG93Um9vdCl9LGRpc3RyaWJ1dGlvblJlc29sdXRpb246ZnVuY3Rpb24oYSl7aWYodyhhKSl7Zm9yKHZhciBiPWEsYz1vKGIpLGQ9eChiKSxlPTA7ZTxkLmxlbmd0aDtlKyspdGhpcy5wb29sRGlzdHJpYnV0aW9uKGRbZV0sYyk7Zm9yKHZhciBlPWQubGVuZ3RoLTE7ZT49MDtlLS0pe3ZhciBmPWRbZV0sZz1wKGYpO2lmKGcpe3ZhciBoPWYub2xkZXJTaGFkb3dSb290O2gmJihjPW8oaCkpO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXEoY1tpXSxnKX10aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oZil9fWZvcih2YXIgaj1hLmZpcnN0Q2hpbGQ7ajtqPWoubmV4dFNpYmxpbmcpdGhpcy5kaXN0cmlidXRpb25SZXNvbHV0aW9uKGopfSxwb29sRGlzdHJpYnV0aW9uOmZ1bmN0aW9uKGEsYil7aWYoIShhIGluc3RhbmNlb2YgQikpaWYoYSBpbnN0YW5jZW9mIEEpe3ZhciBjPWE7dGhpcy51cGRhdGVEZXBlbmRlbnRBdHRyaWJ1dGVzKGMuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKSk7Zm9yKHZhciBkPSExLGU9MDtlPGIubGVuZ3RoO2UrKyl7dmFyIGE9YltlXTthJiZ0KGEsYykmJihxKGEsYyksYltlXT12b2lkIDAsZD0hMCl9aWYoIWQpZm9yKHZhciBmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZylxKGYsYyl9ZWxzZSBmb3IodmFyIGY9YS5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucG9vbERpc3RyaWJ1dGlvbihmLGIpfSxidWlsZFJlbmRlclRyZWU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5jb21wb3NlKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXSxmPWEuYXBwZW5kKGUpO3RoaXMuYnVpbGRSZW5kZXJUcmVlKGYsZSl9aWYodyhiKSl7dmFyIGc9aihiKTtnLmRpcnR5PSExfX0sY29tcG9zZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1hLnNoYWRvd1Jvb3R8fGEsZD1jLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpaWYodihkKSl7dGhpcy5hc3NvY2lhdGVOb2RlKGMpO2Zvcih2YXIgZT1mKGQpLGc9MDtnPGUubGVuZ3RoO2crKyl7dmFyIGg9ZVtnXTt1KGQsaCkmJmIucHVzaChoKX19ZWxzZSBiLnB1c2goZCk7cmV0dXJuIGJ9LGludmFsaWRhdGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dGhpcy5hdHRyaWJ1dGVzPU9iamVjdC5jcmVhdGUobnVsbCl9LHVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzOy9cLlx3Ky8udGVzdChhKSYmKGJbImNsYXNzIl09ITApLC8jXHcrLy50ZXN0KGEpJiYoYi5pZD0hMCksYS5yZXBsYWNlKC9cW1xzKihbXlxzPVx8flxdXSspL2csZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSl9fSxkZXBlbmRzT25BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXX0sYXNzb2NpYXRlTm9kZTpmdW5jdGlvbihhKXthLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz10aGlzfX07dmFyIE89L15bKi4jW2EtekEtWl98XS87Qy5wcm90b3R5cGUuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSZW5kZXJlcl87cmV0dXJuIGE/KGEuaW52YWxpZGF0ZSgpLCEwKTohMX0sQS5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1CLnByb3RvdHlwZS5nZXREaXN0cmlidXRlZE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxmKHRoaXMpfSx6LnByb3RvdHlwZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz1mdW5jdGlvbigpe3JldHVybiBoKCkscih0aGlzKXx8W119LEEucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1CLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBhLGI9ayh0aGlzKTtiJiYoYT1sKGIpKSx0aGlzLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz1hLGEmJmEuaW52YWxpZGF0ZSgpfSxhLmdldFJlbmRlcmVyRm9ySG9zdD1qLGEuZ2V0U2hhZG93VHJlZXM9eCxhLnJlbmRlckFsbFBlbmRpbmc9aCxhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzPXIsYS52aXN1YWw9e2luc2VydEJlZm9yZTpjLHJlbW92ZTpkfX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXtpZih3aW5kb3dbYl0pe2QoIWEud3JhcHBlcnNbYl0pO3ZhciBpPWZ1bmN0aW9uKGEpe2MuY2FsbCh0aGlzLGEpfTtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxlKGkucHJvdG90eXBlLHtnZXQgZm9ybSgpe3JldHVybiBoKGcodGhpcykuZm9ybSl9fSksZih3aW5kb3dbYl0saSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KGIuc2xpY2UoNCwtNykpKSxhLndyYXBwZXJzW2JdPWl9fXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLmFzc2VydCxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPWEudW53cmFwLGg9YS53cmFwLGk9WyJIVE1MQnV0dG9uRWxlbWVudCIsIkhUTUxGaWVsZFNldEVsZW1lbnQiLCJIVE1MSW5wdXRFbGVtZW50IiwiSFRNTEtleWdlbkVsZW1lbnQiLCJIVE1MTGFiZWxFbGVtZW50IiwiSFRNTExlZ2VuZEVsZW1lbnQiLCJIVE1MT2JqZWN0RWxlbWVudCIsIkhUTUxPdXRwdXRFbGVtZW50IiwiSFRNTFRleHRBcmVhRWxlbWVudCJdO2kuZm9yRWFjaChiKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX17dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXA7d2luZG93LlNlbGVjdGlvbn1iLnByb3RvdHlwZT17Z2V0IGFuY2hvck5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuYW5jaG9yTm9kZSl9LGdldCBmb2N1c05vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmFkZFJhbmdlKGQoYSkpfSxjb2xsYXBzZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5jb2xsYXBzZShlKGEpLGIpfSxjb250YWluc05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbnRhaW5zTm9kZShlKGEpLGIpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuZXh0ZW5kKGUoYSksYil9LGdldFJhbmdlQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcy5pbXBsLmdldFJhbmdlQXQoYSkpfSxyZW1vdmVSYW5nZTpmdW5jdGlvbihhKXt0aGlzLmltcGwucmVtb3ZlUmFuZ2UoZChhKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3RBbGxDaGlsZHJlbihlKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxjKHdpbmRvdy5TZWxlY3Rpb24sYix3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLGEud3JhcHBlcnMuU2VsZWN0aW9uPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ay5jYWxsKHRoaXMsYSksdGhpcy50cmVlU2NvcGVfPW5ldyBwKHRoaXMsbnVsbCl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1kb2N1bWVudFthXTtiLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7RC5jYWxsKGIuaW1wbCx6KGEpKSxlKGEsYil9ZnVuY3Rpb24gZShhLGIpe2Euc2hhZG93Um9vdCYmYi5hZG9wdE5vZGUoYS5zaGFkb3dSb290KSxhIGluc3RhbmNlb2YgbyYmZihhLGIpO2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpZShjLGIpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLm9sZGVyU2hhZG93Um9vdDtjJiZiLmFkb3B0Tm9kZShjKX1mdW5jdGlvbiBnKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19dmFyIGo9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGs9YS53cmFwcGVycy5Ob2RlLGw9YS5QYXJlbnROb2RlSW50ZXJmYWNlLG09YS53cmFwcGVycy5TZWxlY3Rpb24sbj1hLlNlbGVjdG9yc0ludGVyZmFjZSxvPWEud3JhcHBlcnMuU2hhZG93Um9vdCxwPWEuVHJlZVNjb3BlLHE9YS5jbG9uZU5vZGUscj1hLmRlZmluZVdyYXBHZXR0ZXIscz1hLmVsZW1lbnRGcm9tUG9pbnQsdD1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLHU9YS5tYXRjaGVzTmFtZXMsdj1hLm1peGluLHc9YS5yZWdpc3RlcldyYXBwZXIseD1hLnJlbmRlckFsbFBlbmRpbmcseT1hLnJld3JhcCx6PWEudW53cmFwLEE9YS53cmFwLEI9YS53cmFwRXZlbnRUYXJnZXRNZXRob2RzLEM9KGEud3JhcE5vZGVMaXN0LG5ldyBXZWFrTWFwKTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGsucHJvdG90eXBlKSxyKGIsImRvY3VtZW50RWxlbWVudCIpLHIoYiwiYm9keSIpLHIoYiwiaGVhZCIpLFsiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImdldEVsZW1lbnRCeUlkIl0uZm9yRWFjaChjKTt2YXIgRD1kb2N1bWVudC5hZG9wdE5vZGUsRT1kb2N1bWVudC5nZXRTZWxlY3Rpb247aWYodihiLnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkKGEsdGhpcyksYX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBzKHRoaXMsdGhpcyxhLGIpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHEoYSxiLHRoaXMuaW1wbCl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB4KCksbmV3IG0oRS5jYWxsKHoodGhpcykpKX0sZ2V0RWxlbWVudHNCeU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ucXVlcnlTZWxlY3RvckFsbC5jYWxsKHRoaXMsIltuYW1lPSIrSlNPTi5zdHJpbmdpZnkoU3RyaW5nKGEpKSsiXSIpfX0pLGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCl7dmFyIEY9ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50O2IucHJvdG90eXBlLnJlZ2lzdGVyRWxlbWVudD1mdW5jdGlvbihiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGE/dm9pZCh0aGlzLmltcGw9YSk6Zj9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGYsYik6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiKX12YXIgZSxmO2lmKHZvaWQgMCE9PWMmJihlPWMucHJvdG90eXBlLGY9Yy5leHRlbmRzKSxlfHwoZT1PYmplY3QuY3JlYXRlKEhUTUxFbGVtZW50LnByb3RvdHlwZSkpLGEubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KGUpKXRocm93IG5ldyBFcnJvcigiTm90U3VwcG9ydGVkRXJyb3IiKTtmb3IodmFyIGcsaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksaT1bXTtoJiYhKGc9YS5uYXRpdmVQcm90b3R5cGVUYWJsZS5nZXQoaCkpOylpLnB1c2goaCksaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoaCk7aWYoIWcpdGhyb3cgbmV3IEVycm9yKCJOb3RTdXBwb3J0ZWRFcnJvciIpO2Zvcih2YXIgaj1PYmplY3QuY3JlYXRlKGcpLGs9aS5sZW5ndGgtMTtrPj0wO2stLSlqPU9iamVjdC5jcmVhdGUoaik7WyJjcmVhdGVkQ2FsbGJhY2siLCJhdHRhY2hlZENhbGxiYWNrIiwiZGV0YWNoZWRDYWxsYmFjayIsImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayJdLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9ZVthXTtiJiYoalthXT1mdW5jdGlvbigpe0EodGhpcylpbnN0YW5jZW9mIGR8fHkodGhpcyksYi5hcHBseShBKHRoaXMpLGFyZ3VtZW50cyl9KX0pO3ZhciBsPXtwcm90b3R5cGU6an07ZiYmKGwuZXh0ZW5kcz1mKSxkLnByb3RvdHlwZT1lLGQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWQsYS5jb25zdHJ1Y3RvclRhYmxlLnNldChqLGQpLGEubmF0aXZlUHJvdG90eXBlVGFibGUuc2V0KGUsaik7Ri5jYWxsKHoodGhpcyksYixsKTtyZXR1cm4gZH0sdChbd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50XSxbInJlZ2lzdGVyRWxlbWVudCJdKX10KFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50LHdpbmRvdy5IVE1MSHRtbEVsZW1lbnRdLFsiYXBwZW5kQ2hpbGQiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsImNvbnRhaW5zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyIsImluc2VydEJlZm9yZSIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlQ2hpbGQiLCJyZXBsYWNlQ2hpbGQiXS5jb25jYXQodSkpLHQoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJhZG9wdE5vZGUiLCJpbXBvcnROb2RlIiwiY29udGFpbnMiLCJjcmVhdGVDb21tZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJjcmVhdGVFdmVudCIsImNyZWF0ZUV2ZW50TlMiLCJjcmVhdGVSYW5nZSIsImNyZWF0ZVRleHROb2RlIiwiZWxlbWVudEZyb21Qb2ludCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJnZXRTZWxlY3Rpb24iXSksdihiLnByb3RvdHlwZSxqKSx2KGIucHJvdG90eXBlLGwpLHYoYi5wcm90b3R5cGUsbiksdihiLnByb3RvdHlwZSx7Z2V0IGltcGxlbWVudGF0aW9uKCl7dmFyIGE9Qy5nZXQodGhpcyk7cmV0dXJuIGE/YTooYT1uZXcgZyh6KHRoaXMpLmltcGxlbWVudGF0aW9uKSxDLnNldCh0aGlzLGEpLGEpfSxnZXQgZGVmYXVsdFZpZXcoKXtyZXR1cm4gQSh6KHRoaXMpLmRlZmF1bHRWaWV3KX19KSx3KHdpbmRvdy5Eb2N1bWVudCxiLGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikpLHdpbmRvdy5IVE1MRG9jdW1lbnQmJncod2luZG93LkhUTUxEb2N1bWVudCxiKSxCKFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50XSksaChnLCJjcmVhdGVEb2N1bWVudFR5cGUiKSxoKGcsImNyZWF0ZURvY3VtZW50IiksaChnLCJjcmVhdGVIVE1MRG9jdW1lbnQiKSxpKGcsImhhc0ZlYXR1cmUiKSx3KHdpbmRvdy5ET01JbXBsZW1lbnRhdGlvbixnKSx0KFt3aW5kb3cuRE9NSW1wbGVtZW50YXRpb25dLFsiY3JlYXRlRG9jdW1lbnRUeXBlIiwiY3JlYXRlRG9jdW1lbnQiLCJjcmVhdGVIVE1MRG9jdW1lbnQiLCJoYXNGZWF0dXJlIl0pLGEuYWRvcHROb2RlTm9SZW1vdmU9ZCxhLndyYXBwZXJzLkRPTUltcGxlbWVudGF0aW9uPWcsYS53cmFwcGVycy5Eb2N1bWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuRXZlbnRUYXJnZXQsZD1hLndyYXBwZXJzLlNlbGVjdGlvbixlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPWEucmVuZGVyQWxsUGVuZGluZyxoPWEudW53cmFwLGk9YS51bndyYXBJZk5lZWRlZCxqPWEud3JhcCxrPXdpbmRvdy5XaW5kb3csbD13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSxtPXdpbmRvdy5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSxuPXdpbmRvdy5nZXRTZWxlY3Rpb247Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksay5wcm90b3R5cGUuZ2V0Q29tcHV0ZWRTdHlsZT1mdW5jdGlvbihhLGIpe3JldHVybiBqKHRoaXN8fHdpbmRvdykuZ2V0Q29tcHV0ZWRTdHlsZShpKGEpLGIpfSxtJiYoay5wcm90b3R5cGUuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaih0aGlzfHx3aW5kb3cpLmdldERlZmF1bHRDb21wdXRlZFN0eWxlKGkoYSksYil9KSxrLnByb3RvdHlwZS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gaih0aGlzfHx3aW5kb3cpLmdldFNlbGVjdGlvbigpfSxkZWxldGUgd2luZG93LmdldENvbXB1dGVkU3R5bGUsZGVsZXRlIHdpbmRvdy5nZXRTZWxlY3Rpb24sWyJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2sucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7dmFyIGI9aih0aGlzfHx3aW5kb3cpO3JldHVybiBiW2FdLmFwcGx5KGIsYXJndW1lbnRzKX0sZGVsZXRlIHdpbmRvd1thXX0pLGUoYi5wcm90b3R5cGUse2dldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZygpLGwuY2FsbChoKHRoaXMpLGkoYSksYil9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBnKCksbmV3IGQobi5jYWxsKGgodGhpcykpKX0sZ2V0IGRvY3VtZW50KCl7cmV0dXJuIGooaCh0aGlzKS5kb2N1bWVudCl9fSksbSYmKGIucHJvdG90eXBlLmdldERlZmF1bHRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGcoKSxtLmNhbGwoaCh0aGlzKSxpKGEpLGIpfSksZihrLGIsd2luZG93KSxhLndyYXBwZXJzLldpbmRvdz1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLnVud3JhcCxjPXdpbmRvdy5EYXRhVHJhbnNmZXJ8fHdpbmRvdy5DbGlwYm9hcmQsZD1jLnByb3RvdHlwZS5zZXREcmFnSW1hZ2U7ZCYmKGMucHJvdG90eXBlLnNldERyYWdJbWFnZT1mdW5jdGlvbihhLGMsZSl7ZC5jYWxsKHRoaXMsYihhKSxjLGUpfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPWEgaW5zdGFuY2VvZiBlP2E6bmV3IGUoYSYmZChhKSl9dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPXdpbmRvdy5Gb3JtRGF0YTtjKGUsYixuZXcgZSksYS53cmFwcGVycy5Gb3JtRGF0YT1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWNbYV0sZD13aW5kb3dbYl07aWYoZCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKSxmPWUuY29uc3RydWN0b3I7d2luZG93W2JdPWZ9fXZhciBjPShhLmlzV3JhcHBlckZvcix7YToiSFRNTEFuY2hvckVsZW1lbnQiLGFyZWE6IkhUTUxBcmVhRWxlbWVudCIsYXVkaW86IkhUTUxBdWRpb0VsZW1lbnQiLGJhc2U6IkhUTUxCYXNlRWxlbWVudCIsYm9keToiSFRNTEJvZHlFbGVtZW50IixicjoiSFRNTEJSRWxlbWVudCIsYnV0dG9uOiJIVE1MQnV0dG9uRWxlbWVudCIsY2FudmFzOiJIVE1MQ2FudmFzRWxlbWVudCIsY2FwdGlvbjoiSFRNTFRhYmxlQ2FwdGlvbkVsZW1lbnQiLGNvbDoiSFRNTFRhYmxlQ29sRWxlbWVudCIsY29udGVudDoiSFRNTENvbnRlbnRFbGVtZW50IixkYXRhOiJIVE1MRGF0YUVsZW1lbnQiLGRhdGFsaXN0OiJIVE1MRGF0YUxpc3RFbGVtZW50IixkZWw6IkhUTUxNb2RFbGVtZW50IixkaXI6IkhUTUxEaXJlY3RvcnlFbGVtZW50IixkaXY6IkhUTUxEaXZFbGVtZW50IixkbDoiSFRNTERMaXN0RWxlbWVudCIsZW1iZWQ6IkhUTUxFbWJlZEVsZW1lbnQiLGZpZWxkc2V0OiJIVE1MRmllbGRTZXRFbGVtZW50Iixmb250OiJIVE1MRm9udEVsZW1lbnQiLGZvcm06IkhUTUxGb3JtRWxlbWVudCIsZnJhbWU6IkhUTUxGcmFtZUVsZW1lbnQiLGZyYW1lc2V0OiJIVE1MRnJhbWVTZXRFbGVtZW50IixoMToiSFRNTEhlYWRpbmdFbGVtZW50IixoZWFkOiJIVE1MSGVhZEVsZW1lbnQiLGhyOiJIVE1MSFJFbGVtZW50IixodG1sOiJIVE1MSHRtbEVsZW1lbnQiLGlmcmFtZToiSFRNTElGcmFtZUVsZW1lbnQiLGltZzoiSFRNTEltYWdlRWxlbWVudCIsaW5wdXQ6IkhUTUxJbnB1dEVsZW1lbnQiLGtleWdlbjoiSFRNTEtleWdlbkVsZW1lbnQiLGxhYmVsOiJIVE1MTGFiZWxFbGVtZW50IixsZWdlbmQ6IkhUTUxMZWdlbmRFbGVtZW50IixsaToiSFRNTExJRWxlbWVudCIsbGluazoiSFRNTExpbmtFbGVtZW50IixtYXA6IkhUTUxNYXBFbGVtZW50IixtYXJxdWVlOiJIVE1MTWFycXVlZUVsZW1lbnQiLG1lbnU6IkhUTUxNZW51RWxlbWVudCIsbWVudWl0ZW06IkhUTUxNZW51SXRlbUVsZW1lbnQiLG1ldGE6IkhUTUxNZXRhRWxlbWVudCIsbWV0ZXI6IkhUTUxNZXRlckVsZW1lbnQiLG9iamVjdDoiSFRNTE9iamVjdEVsZW1lbnQiLG9sOiJIVE1MT0xpc3RFbGVtZW50IixvcHRncm91cDoiSFRNTE9wdEdyb3VwRWxlbWVudCIsb3B0aW9uOiJIVE1MT3B0aW9uRWxlbWVudCIsb3V0cHV0OiJIVE1MT3V0cHV0RWxlbWVudCIscDoiSFRNTFBhcmFncmFwaEVsZW1lbnQiLHBhcmFtOiJIVE1MUGFyYW1FbGVtZW50IixwcmU6IkhUTUxQcmVFbGVtZW50Iixwcm9ncmVzczoiSFRNTFByb2dyZXNzRWxlbWVudCIscToiSFRNTFF1b3RlRWxlbWVudCIsc2NyaXB0OiJIVE1MU2NyaXB0RWxlbWVudCIsc2VsZWN0OiJIVE1MU2VsZWN0RWxlbWVudCIsc2hhZG93OiJIVE1MU2hhZG93RWxlbWVudCIsc291cmNlOiJIVE1MU291cmNlRWxlbWVudCIsc3BhbjoiSFRNTFNwYW5FbGVtZW50IixzdHlsZToiSFRNTFN0eWxlRWxlbWVudCIsdGFibGU6IkhUTUxUYWJsZUVsZW1lbnQiLHRib2R5OiJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsdGVtcGxhdGU6IkhUTUxUZW1wbGF0ZUVsZW1lbnQiLHRleHRhcmVhOiJIVE1MVGV4dEFyZWFFbGVtZW50Iix0aGVhZDoiSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQiLHRpbWU6IkhUTUxUaW1lRWxlbWVudCIsdGl0bGU6IkhUTUxUaXRsZUVsZW1lbnQiLHRyOiJIVE1MVGFibGVSb3dFbGVtZW50Iix0cmFjazoiSFRNTFRyYWNrRWxlbWVudCIsdWw6IkhUTUxVTGlzdEVsZW1lbnQiLHZpZGVvOiJIVE1MVmlkZW9FbGVtZW50In0pO09iamVjdC5rZXlzKGMpLmZvckVhY2goYiksT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYS53cmFwcGVycykuZm9yRWFjaChmdW5jdGlvbihiKXt3aW5kb3dbYl09YS53cmFwcGVyc1tiXX0pfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxjKXt2YXIgZCxlLGYsZyxoPWEuZmlyc3RFbGVtZW50Q2hpbGQ7Zm9yKGU9W10sZj1hLnNoYWRvd1Jvb3Q7ZjspZS5wdXNoKGYpLGY9Zi5vbGRlclNoYWRvd1Jvb3Q7Zm9yKGc9ZS5sZW5ndGgtMTtnPj0wO2ctLSlpZihkPWVbZ10ucXVlcnlTZWxlY3RvcihjKSlyZXR1cm4gZDtmb3IoO2g7KXtpZihkPWIoaCxjKSlyZXR1cm4gZDtoPWgubmV4dEVsZW1lbnRTaWJsaW5nfXJldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiLGQpe3ZhciBlLGYsZyxoLGksaj1hLmZpcnN0RWxlbWVudENoaWxkO2ZvcihnPVtdLGY9YS5zaGFkb3dSb290O2Y7KWcucHVzaChmKSxmPWYub2xkZXJTaGFkb3dSb290O2ZvcihoPWcubGVuZ3RoLTE7aD49MDtoLS0pZm9yKGU9Z1toXS5xdWVyeVNlbGVjdG9yQWxsKGIpLGk9MDtpPGUubGVuZ3RoO2krKylkLnB1c2goZVtpXSk7Zm9yKDtqOyljKGosYixkKSxqPWoubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBkfXdpbmRvdy53cmFwPVNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZCx3aW5kb3cudW53cmFwPVNoYWRvd0RPTVBvbHlmaWxsLnVud3JhcElmTmVlZGVkLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFbGVtZW50LnByb3RvdHlwZSwid2Via2l0U2hhZG93Um9vdCIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihFbGVtZW50LnByb3RvdHlwZSwic2hhZG93Um9vdCIpKTt2YXIgZD1FbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290O0VsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q9ZnVuY3Rpb24oKXt2YXIgYT1kLmNhbGwodGhpcyk7cmV0dXJuIEN1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93KHRoaXMpLGF9LEVsZW1lbnQucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3Q9RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdCxhLnF1ZXJ5QWxsU2hhZG93cz1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIGU/YyhhLGQsW10pOmIoYSxkKX19KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPSIiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7Yys9YS50ZXh0Q29udGVudCsiXG5cbiJ9KSxifHwoYz1jLnJlcGxhY2UobCwiIikpLGN9ZnVuY3Rpb24gYyhhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3JldHVybiBiLnRleHRDb250ZW50PWEsYn1mdW5jdGlvbiBkKGEpe3ZhciBiPWMoYSk7ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChiKTt2YXIgZD1bXTtpZihiLnNoZWV0KXRyeXtkPWIuc2hlZXQuY3NzUnVsZXN9Y2F0Y2goZSl7fWVsc2UgY29uc29sZS53YXJuKCJzaGVldCBub3QgZm91bmQiLGIpO3JldHVybiBiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksZH1mdW5jdGlvbiBlKCl7di5pbml0aWFsaXplZD0hMCxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHYpO3ZhciBhPXYuY29udGVudERvY3VtZW50LGI9YS5jcmVhdGVFbGVtZW50KCJiYXNlIik7Yi5ocmVmPWRvY3VtZW50LmJhc2VVUkksYS5oZWFkLmFwcGVuZENoaWxkKGIpfWZ1bmN0aW9uIGYoYSl7di5pbml0aWFsaXplZHx8ZSgpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodiksYSh2LmNvbnRlbnREb2N1bWVudCksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh2KX1mdW5jdGlvbiBnKGEsYil7aWYoYil7dmFyIGU7aWYoYS5tYXRjaCgiQGltcG9ydCIpJiZ4KXt2YXIgZz1jKGEpO2YoZnVuY3Rpb24oYSl7YS5oZWFkLmFwcGVuZENoaWxkKGcuaW1wbCksZT1nLnNoZWV0LmNzc1J1bGVzLGIoZSl9KX1lbHNlIGU9ZChhKSxiKGUpfX1mdW5jdGlvbiBoKGEpe2EmJmooKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9ZnVuY3Rpb24gaShhLGIpe3ZhciBkPWMoYSk7ZC5zZXRBdHRyaWJ1dGUoYiwiIiksZC5zZXRBdHRyaWJ1dGUoeiwiIiksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChkKX1mdW5jdGlvbiBqKCl7cmV0dXJuIHd8fCh3PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksdy5zZXRBdHRyaWJ1dGUoeiwiIiksd1t6XT0hMCksd312YXIgaz17c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihhLGMsZCl7dmFyIGU9dGhpcy5wcmVwYXJlUm9vdChhLGMsZCksZj10aGlzLmlzVHlwZUV4dGVuc2lvbihkKSxnPXRoaXMubWFrZVNjb3BlU2VsZWN0b3IoYyxmKSxoPWIoZSwhMCk7aD10aGlzLnNjb3BlQ3NzVGV4dChoLGcpLGEmJihhLnNoaW1tZWRTdHlsZT1oKSx0aGlzLmFkZENzc1RvRG9jdW1lbnQoaCxjKX0sc2hpbVN0eWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc2hpbUNzc1RleHQoYS50ZXh0Q29udGVudCxiKX0sc2hpbUNzc1RleHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT10aGlzLmluc2VydERpcmVjdGl2ZXMoYSksdGhpcy5zY29wZUNzc1RleHQoYSxiKX0sbWFrZVNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9iPyJbaXM9IithKyJdIjphOiIifSxpc1R5cGVFeHRlbnNpb246ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEuaW5kZXhPZigiLSIpPDB9LHByZXBhcmVSb290OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlZ2lzdGVyUm9vdChhLGIsYyk7cmV0dXJuIHRoaXMucmVwbGFjZVRleHRJblN0eWxlcyhkLnJvb3RTdHlsZXMsdGhpcy5pbnNlcnREaXJlY3RpdmVzKSx0aGlzLnJlbW92ZVN0eWxlcyhhLGQucm9vdFN0eWxlcyksdGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYSxiKSxkLnNjb3BlU3R5bGVzfSxyZW1vdmVTdHlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpfSxyZWdpc3RlclJvb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVnaXN0cnlbYl09e3Jvb3Q6YSxuYW1lOmIsZXh0ZW5kc05hbWU6Y30sZT10aGlzLmZpbmRTdHlsZXMoYSk7ZC5yb290U3R5bGVzPWUsZC5zY29wZVN0eWxlcz1kLnJvb3RTdHlsZXM7dmFyIGY9dGhpcy5yZWdpc3RyeVtkLmV4dGVuZHNOYW1lXTtyZXR1cm4gZiYmKGQuc2NvcGVTdHlsZXM9Zi5zY29wZVN0eWxlcy5jb25jYXQoZC5zY29wZVN0eWxlcykpLGR9LGZpbmRTdHlsZXM6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuW107dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYixmdW5jdGlvbihhKXtyZXR1cm4hYS5oYXNBdHRyaWJ1dGUoQSl9KX0sYXBwbHlTY29wZVRvQ29udGVudDpmdW5jdGlvbihhLGIpe2EmJihBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgiKiIpLGZ1bmN0aW9uKGEpe2Euc2V0QXR0cmlidXRlKGIsIiIpfSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIiksZnVuY3Rpb24oYSl7dGhpcy5hcHBseVNjb3BlVG9Db250ZW50KGEuY29udGVudCxiKX0sdGhpcykpfSxpbnNlcnREaXJlY3RpdmVzOmZ1bmN0aW9uKGEpe3JldHVybiBhPXRoaXMuaW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzSW5Dc3NUZXh0KGEpLHRoaXMuaW5zZXJ0UG9seWZpbGxSdWxlc0luQ3NzVGV4dChhKX0saW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzSW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShtLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuc2xpY2UoMCwtMikrInsifSksYS5yZXBsYWNlKG4sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYisiIHsifSl9LGluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKG8sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5zbGljZSgwLC0xKX0pLGEucmVwbGFjZShwLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEucmVwbGFjZShiLCIiKS5yZXBsYWNlKGMsIiIpO3JldHVybiBkK2V9KX0sc2NvcGVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5leHRyYWN0VW5zY29wZWRSdWxlc0Zyb21Dc3NUZXh0KGEpO2lmKGE9dGhpcy5pbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQoYSksYT10aGlzLmNvbnZlcnRDb2xvbkhvc3QoYSksYT10aGlzLmNvbnZlcnRDb2xvbkhvc3RDb250ZXh0KGEpLGE9dGhpcy5jb252ZXJ0U2hhZG93RE9NU2VsZWN0b3JzKGEpLGIpe3ZhciBhLGQ9dGhpcztnKGEsZnVuY3Rpb24oYyl7YT1kLnNjb3BlUnVsZXMoYyxiKX0pfXJldHVybiBhPWErIlxuIitjLGEudHJpbSgpfSxleHRyYWN0VW5zY29wZWRSdWxlc0Zyb21Dc3NUZXh0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPSIiO2I9cS5leGVjKGEpOyljKz1iWzFdLnNsaWNlKDAsLTEpKyJcblxuIjtmb3IoO2I9ci5leGVjKGEpOyljKz1iWzBdLnJlcGxhY2UoYlsyXSwiIikucmVwbGFjZShiWzFdLGJbM10pKyJcblxuIjtyZXR1cm4gY30sY29udmVydENvbG9uSG9zdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb252ZXJ0Q29sb25SdWxlKGEsY3NzQ29sb25Ib3N0UmUsdGhpcy5jb2xvbkhvc3RQYXJ0UmVwbGFjZXIpfSxjb252ZXJ0Q29sb25Ib3N0Q29udGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb252ZXJ0Q29sb25SdWxlKGEsY3NzQ29sb25Ib3N0Q29udGV4dFJlLHRoaXMuY29sb25Ib3N0Q29udGV4dFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvblJ1bGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnJlcGxhY2UoYixmdW5jdGlvbihhLGIsZCxlKXtpZihiPXBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcixkKXtmb3IodmFyIGYsZz1kLnNwbGl0KCIsIiksaD1bXSxpPTAsaj1nLmxlbmd0aDtqPmkmJihmPWdbaV0pO2krKylmPWYudHJpbSgpLGgucHVzaChjKGIsZixlKSk7cmV0dXJuIGguam9pbigiLCIpfXJldHVybiBiK2V9KX0sY29sb25Ib3N0Q29udGV4dFBhcnRSZXBsYWNlcjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGIubWF0Y2gocyk/dGhpcy5jb2xvbkhvc3RQYXJ0UmVwbGFjZXIoYSxiLGMpOmErYitjKyIsICIrYisiICIrYStjfSxjb2xvbkhvc3RQYXJ0UmVwbGFjZXI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhK2IucmVwbGFjZShzLCIiKStjfSxjb252ZXJ0U2hhZG93RE9NU2VsZWN0b3JzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8c2hhZG93RE9NU2VsZWN0b3JzUmUubGVuZ3RoO2IrKylhPWEucmVwbGFjZShzaGFkb3dET01TZWxlY3RvcnNSZVtiXSwiICIpO3JldHVybiBhfSxzY29wZVJ1bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9IiI7cmV0dXJuIGEmJkFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXtpZihhLnNlbGVjdG9yVGV4dCYmYS5zdHlsZSYmdm9pZCAwIT09YS5zdHlsZS5jc3NUZXh0KWMrPXRoaXMuc2NvcGVTZWxlY3RvcihhLnNlbGVjdG9yVGV4dCxiLHRoaXMuc3RyaWN0U3R5bGluZykrIiB7XG4JIixjKz10aGlzLnByb3BlcnRpZXNGcm9tUnVsZShhKSsiXG59XG5cbiI7ZWxzZSBpZihhLnR5cGU9PT1DU1NSdWxlLk1FRElBX1JVTEUpYys9IkBtZWRpYSAiK2EubWVkaWEubWVkaWFUZXh0KyIge1xuIixjKz10aGlzLnNjb3BlUnVsZXMoYS5jc3NSdWxlcyxiKSxjKz0iXG59XG5cbiI7ZWxzZSB0cnl7YS5jc3NUZXh0JiYoYys9YS5jc3NUZXh0KyJcblxuIil9Y2F0Y2goZCl7fX0sdGhpcyksY30sc2NvcGVTZWxlY3RvcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT1hLnNwbGl0KCIsIik7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihhKXthPWEudHJpbSgpLHRoaXMuc2VsZWN0b3JOZWVkc1Njb3BpbmcoYSxiKSYmKGE9YyYmIWEubWF0Y2gocG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yKT90aGlzLmFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZShhLGIpOnRoaXMuYXBwbHlTZWxlY3RvclNjb3BlKGEsYikpLGQucHVzaChhKX0sdGhpcyksZC5qb2luKCIsICIpfSxzZWxlY3Rvck5lZWRzU2NvcGluZzpmdW5jdGlvbihhLGIpe2lmKEFycmF5LmlzQXJyYXkoYikpcmV0dXJuITA7dmFyIGM9dGhpcy5tYWtlU2NvcGVNYXRjaGVyKGIpO3JldHVybiFhLm1hdGNoKGMpfSxtYWtlU2NvcGVNYXRjaGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZSgvXFsvZywiXFxbIikucmVwbGFjZSgvXFsvZywiXFxdIiksbmV3IFJlZ0V4cCgiXigiK2ErIikiK3NlbGVjdG9yUmVTdWZmaXgsIm0iKX0sYXBwbHlTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEFycmF5LmlzQXJyYXkoYik/dGhpcy5hcHBseVNlbGVjdG9yU2NvcGVMaXN0KGEsYik6dGhpcy5hcHBseVNpbXBsZVNlbGVjdG9yU2NvcGUoYSxiKX0sYXBwbHlTZWxlY3RvclNjb3BlTGlzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPVtdLGU9MDtjPWJbZV07ZSsrKWQucHVzaCh0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGMpKTtyZXR1cm4gZC5qb2luKCIsICIpfSxhcHBseVNpbXBsZVNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5tYXRjaChwb2x5ZmlsbEhvc3RSZSk/KGE9YS5yZXBsYWNlKHBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcixiKSxhLnJlcGxhY2UocG9seWZpbGxIb3N0UmUsYisiICIpKTpiKyIgIithfSxhcHBseVN0cmljdFNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiKXtiPWIucmVwbGFjZSgvXFtpcz0oW15cXV0qKVxdL2csIiQxIik7dmFyIGM9WyIgIiwiPiIsIisiLCJ+Il0sZD1hLGU9IlsiK2IrIl0iO3JldHVybiBjLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9ZC5zcGxpdChhKTtkPWIubWFwKGZ1bmN0aW9uKGEpe3ZhciBiPWEudHJpbSgpLnJlcGxhY2UocG9seWZpbGxIb3N0UmUsIiIpO3JldHVybiBiJiZjLmluZGV4T2YoYik8MCYmYi5pbmRleE9mKGUpPDAmJihhPWIucmVwbGFjZSgvKFteOl0qKSg6KikoLiopLywiJDEiK2UrIiQyJDMiKSksYX0pLmpvaW4oYSl9KSxkfSxpbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShjb2xvbkhvc3RDb250ZXh0UmUsdCkucmVwbGFjZShjb2xvbkhvc3RSZSxzKX0scHJvcGVydGllc0Zyb21SdWxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc3R5bGUuY3NzVGV4dDthLnN0eWxlLmNvbnRlbnQmJiFhLnN0eWxlLmNvbnRlbnQubWF0Y2goL1snIl0rfGF0dHIvKSYmKGI9Yi5yZXBsYWNlKC9jb250ZW50OlteO10qOy9nLCJjb250ZW50OiAnIithLnN0eWxlLmNvbnRlbnQrIic7IikpO3ZhciBjPWEuc3R5bGU7Zm9yKHZhciBkIGluIGMpImluaXRpYWwiPT09Y1tkXSYmKGIrPWQrIjogaW5pdGlhbDsgIik7cmV0dXJuIGJ9LHJlcGxhY2VUZXh0SW5TdHlsZXM6ZnVuY3Rpb24oYSxiKXthJiZiJiYoYSBpbnN0YW5jZW9mIEFycmF5fHwoYT1bYV0pLEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXthLnRleHRDb250ZW50PWIuY2FsbCh0aGlzLGEudGV4dENvbnRlbnQpfSx0aGlzKSl9LGFkZENzc1RvRG9jdW1lbnQ6ZnVuY3Rpb24oYSxiKXthLm1hdGNoKCJAaW1wb3J0Iik/aShhLGIpOmgoYSl9fSxsPS9cL1wqW14qXSpcKisoW14vKl1bXipdKlwqKykqXC8vZ2ltLG09L1wvXCpccypAcG9seWZpbGwgKFteKl0qXCorKFteLypdW14qXSpcKispKlwvKShbXntdKj8pey9naW0sbj0vcG9seWZpbGwtbmV4dC1zZWxlY3RvcltefV0qY29udGVudFw6W1xzXSo/WyciXSguKj8pWyciXVs7XHNdKn0oW157XSo/KXsvZ2ltLG89L1wvXCpcc0Bwb2x5ZmlsbC1ydWxlKFteKl0qXCorKFteLypdW14qXSpcKispKilcLy9naW0scD0vKHBvbHlmaWxsLXJ1bGUpW159XSooY29udGVudFw6W1xzXSpbJyJdKC4qPylbJyJdKVs7XHNdKltefV0qfS9naW0scT0vXC9cKlxzQHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxyPS8ocG9seWZpbGwtdW5zY29wZWQtcnVsZSlbXn1dKihjb250ZW50XDpbXHNdKlsnIl0oLio/KVsnIl0pWztcc10qW159XSp9L2dpbSxzPSItc2hhZG93Y3NzaG9zdCIsdD0iLXNoYWRvd2Nzc2NvbnRleHQiLHU9IikoPzpcXCgoKD86XFwoW14pKF0qXFwpfFteKShdKikrPylcXCkpPyhbXix7XSopIjtjc3NDb2xvbkhvc3RSZT1uZXcgUmVnRXhwKCIoIitzK3UsImdpbSIpLGNzc0NvbG9uSG9zdENvbnRleHRSZT1uZXcgUmVnRXhwKCIoIit0K3UsImdpbSIpLHNlbGVjdG9yUmVTdWZmaXg9IihbPlxcc34rWy4sezpdW1xcc1xcU10qKT8kIixjb2xvbkhvc3RSZT0vXDpob3N0L2dpbSxjb2xvbkhvc3RDb250ZXh0UmU9L1w6aG9zdC1jb250ZXh0L2dpbSxwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3I9cysiLW5vLWNvbWJpbmF0b3IiLHBvbHlmaWxsSG9zdFJlPW5ldyBSZWdFeHAocywiZ2ltIikscG9seWZpbGxIb3N0Q29udGV4dFJlPW5ldyBSZWdFeHAodCwiZ2ltIiksc2hhZG93RE9NU2VsZWN0b3JzUmU9Wy9cXlxeL2csL1xeL2csL1wvc2hhZG93XC8vZywvXC9zaGFkb3ctZGVlcFwvL2csLzo6c2hhZG93L2csL1wvZGVlcFwvL2csLzo6Y29udGVudC9nXTt2YXIgdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTt2LnN0eWxlLmRpc3BsYXk9Im5vbmUiO3ZhciB3LHg9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgiQ2hyb21lIikseT0ic2hpbS1zaGFkb3dkb20iLHo9InNoaW0tc2hhZG93ZG9tLWNzcyIsQT0ibm8tc2hpbSI7aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXtoKCJzdHlsZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxuIik7dmFyIEI9d3JhcChkb2N1bWVudCksQz1CLnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtDLmluc2VydEJlZm9yZShqKCksQy5jaGlsZE5vZGVzWzBdKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe3ZhciBiPWEudXJsUmVzb2x2ZXI7aWYod2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMudXNlTmF0aXZlKXt2YXIgYz0ibGlua1tyZWw9c3R5bGVzaGVldF1bIit5KyJdIixkPSJzdHlsZVsiK3krIl0iO0hUTUxJbXBvcnRzLmltcG9ydGVyLmRvY3VtZW50UHJlbG9hZFNlbGVjdG9ycys9IiwiK2MsSFRNTEltcG9ydHMuaW1wb3J0ZXIuaW1wb3J0c1ByZWxvYWRTZWxlY3RvcnMrPSIsIitjLEhUTUxJbXBvcnRzLnBhcnNlci5kb2N1bWVudFNlbGVjdG9ycz1bSFRNTEltcG9ydHMucGFyc2VyLmRvY3VtZW50U2VsZWN0b3JzLGMsZF0uam9pbigiLCIpO3ZhciBlPUhUTUxJbXBvcnRzLnBhcnNlci5wYXJzZUdlbmVyaWM7SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlR2VuZXJpYz1mdW5jdGlvbihhKXtpZighYVt6XSl7dmFyIGM9YS5fX2ltcG9ydEVsZW1lbnR8fGE7aWYoIWMuaGFzQXR0cmlidXRlKHkpKXJldHVybiB2b2lkIGUuY2FsbCh0aGlzLGEpO2EuX19yZXNvdXJjZT8oYz1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSxjLnRleHRDb250ZW50PWIucmVzb2x2ZUNzc1RleHQoYS5fX3Jlc291cmNlLGEuaHJlZikpOmIucmVzb2x2ZVN0eWxlKGMpLGMudGV4dENvbnRlbnQ9ay5zaGltU3R5bGUoYyksYy5yZW1vdmVBdHRyaWJ1dGUoeSwiIiksYy5zZXRBdHRyaWJ1dGUoeiwiIiksY1t6XT0hMCxjLnBhcmVudE5vZGUhPT1DJiYoYS5wYXJlbnROb2RlPT09Qz9DLnJlcGxhY2VDaGlsZChjLGEpOnRoaXMuYWRkRWxlbWVudFRvRG9jdW1lbnQoYykpLGMuX19pbXBvcnRQYXJzZWQ9ITAsdGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGEpLHRoaXMucGFyc2VOZXh0KCl9fTt2YXIgZj1IVE1MSW1wb3J0cy5wYXJzZXIuaGFzUmVzb3VyY2U7SFRNTEltcG9ydHMucGFyc2VyLmhhc1Jlc291cmNlPWZ1bmN0aW9uKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiYic3R5bGVzaGVldCI9PT1hLnJlbCYmYS5oYXNBdHRyaWJ1dGUoeSk/YS5fX3Jlc291cmNlOmYuY2FsbCh0aGlzLGEpfX19KX1hLlNoYWRvd0NTUz1rfSh3aW5kb3cuUGxhdGZvcm0pKTohZnVuY3Rpb24oKXt3aW5kb3cud3JhcD13aW5kb3cudW53cmFwPWZ1bmN0aW9uKGEpe3JldHVybiBhCn0sYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtpZihDdXN0b21FbGVtZW50cy51c2VOYXRpdmU9PT0hMSl7dmFyIGE9RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdDtFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGI9YS5jYWxsKHRoaXMpO3JldHVybiBDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxifX19KSxQbGF0Zm9ybS50ZW1wbGF0ZUNvbnRlbnQ9ZnVuY3Rpb24oYSl7aWYod2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChhKSwhYS5jb250ZW50JiYhYS5fY29udGVudCl7Zm9yKHZhciBiPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTthLmZpcnN0Q2hpbGQ7KWIuYXBwZW5kQ2hpbGQoYS5maXJzdENoaWxkKTthLl9jb250ZW50PWJ9cmV0dXJuIGEuY29udGVudHx8YS5fY29udGVudH19KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIHZvaWQgMCE9PW1bYV19ZnVuY3Rpb24gYygpe2guY2FsbCh0aGlzKSx0aGlzLl9pc0ludmFsaWQ9ITB9ZnVuY3Rpb24gZChhKXtyZXR1cm4iIj09YSYmYy5jYWxsKHRoaXMpLGEudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gYj4zMiYmMTI3PmImJi0xPT1bMzQsMzUsNjAsNjIsNjMsOTZdLmluZGV4T2YoYik/YTplbmNvZGVVUklDb21wb25lbnQoYSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGI+MzImJjEyNz5iJiYtMT09WzM0LDM1LDYwLDYyLDk2XS5pbmRleE9mKGIpP2E6ZW5jb2RlVVJJQ29tcG9uZW50KGEpfWZ1bmN0aW9uIGcoYSxnLGgpe2Z1bmN0aW9uIGkoYSl7dC5wdXNoKGEpfXZhciBqPWd8fCJzY2hlbWUgc3RhcnQiLGs9MCxsPSIiLHI9ITEscz0hMSx0PVtdO2E6Zm9yKDsoYVtrLTFdIT1vfHwwPT1rKSYmIXRoaXMuX2lzSW52YWxpZDspe3ZhciB1PWFba107c3dpdGNoKGope2Nhc2Uic2NoZW1lIHN0YXJ0IjppZighdXx8IXAudGVzdCh1KSl7aWYoZyl7aSgiSW52YWxpZCBzY2hlbWUuIik7YnJlYWsgYX1sPSIiLGo9Im5vIHNjaGVtZSI7Y29udGludWV9bCs9dS50b0xvd2VyQ2FzZSgpLGo9InNjaGVtZSI7YnJlYWs7Y2FzZSJzY2hlbWUiOmlmKHUmJnEudGVzdCh1KSlsKz11LnRvTG93ZXJDYXNlKCk7ZWxzZXtpZigiOiIhPXUpe2lmKGcpe2lmKG89PXUpYnJlYWsgYTtpKCJDb2RlIHBvaW50IG5vdCBhbGxvd2VkIGluIHNjaGVtZTogIit1KTticmVhayBhfWw9IiIsaz0wLGo9Im5vIHNjaGVtZSI7Y29udGludWV9aWYodGhpcy5fc2NoZW1lPWwsbD0iIixnKWJyZWFrIGE7Yih0aGlzLl9zY2hlbWUpJiYodGhpcy5faXNSZWxhdGl2ZT0hMCksaj0iZmlsZSI9PXRoaXMuX3NjaGVtZT8icmVsYXRpdmUiOnRoaXMuX2lzUmVsYXRpdmUmJmgmJmguX3NjaGVtZT09dGhpcy5fc2NoZW1lPyJyZWxhdGl2ZSBvciBhdXRob3JpdHkiOnRoaXMuX2lzUmVsYXRpdmU/ImF1dGhvcml0eSBmaXJzdCBzbGFzaCI6InNjaGVtZSBkYXRhIn1icmVhaztjYXNlInNjaGVtZSBkYXRhIjoiPyI9PXU/KHF1ZXJ5PSI/IixqPSJxdWVyeSIpOiIjIj09dT8odGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iik6byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fc2NoZW1lRGF0YSs9ZSh1KSk7YnJlYWs7Y2FzZSJubyBzY2hlbWUiOmlmKGgmJmIoaC5fc2NoZW1lKSl7aj0icmVsYXRpdmUiO2NvbnRpbnVlfWkoIk1pc3Npbmcgc2NoZW1lLiIpLGMuY2FsbCh0aGlzKTticmVhaztjYXNlInJlbGF0aXZlIG9yIGF1dGhvcml0eSI6aWYoIi8iIT11fHwiLyIhPWFbaysxXSl7aSgiRXhwZWN0ZWQgLywgZ290OiAiK3UpLGo9InJlbGF0aXZlIjtjb250aW51ZX1qPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2JyZWFrO2Nhc2UicmVsYXRpdmUiOmlmKHRoaXMuX2lzUmVsYXRpdmU9ITAsImZpbGUiIT10aGlzLl9zY2hlbWUmJih0aGlzLl9zY2hlbWU9aC5fc2NoZW1lKSxvPT11KXt0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PWguX3F1ZXJ5O2JyZWFrIGF9aWYoIi8iPT11fHwiXFwiPT11KSJcXCI9PXUmJmkoIlxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC4iKSxqPSJyZWxhdGl2ZSBzbGFzaCI7ZWxzZSBpZigiPyI9PXUpdGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT0iPyIsaj0icXVlcnkiO2Vsc2V7aWYoIiMiIT11KXt2YXIgdj1hW2srMV0sdz1hW2srMl07KCJmaWxlIiE9dGhpcy5fc2NoZW1lfHwhcC50ZXN0KHUpfHwiOiIhPXYmJiJ8IiE9dnx8byE9dyYmIi8iIT13JiYiXFwiIT13JiYiPyIhPXcmJiIjIiE9dykmJih0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3BhdGgucG9wKCkpLGo9InJlbGF0aXZlIHBhdGgiO2NvbnRpbnVlfXRoaXMuX2hvc3Q9aC5faG9zdCx0aGlzLl9wb3J0PWguX3BvcnQsdGhpcy5fcGF0aD1oLl9wYXRoLnNsaWNlKCksdGhpcy5fcXVlcnk9aC5fcXVlcnksdGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50In1icmVhaztjYXNlInJlbGF0aXZlIHNsYXNoIjppZigiLyIhPXUmJiJcXCIhPXUpeyJmaWxlIiE9dGhpcy5fc2NoZW1lJiYodGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCksaj0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9IlxcIj09dSYmaSgiXFwgaXMgYW4gaW52YWxpZCBjb2RlIHBvaW50LiIpLGo9ImZpbGUiPT10aGlzLl9zY2hlbWU/ImZpbGUgaG9zdCI6ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI7YnJlYWs7Y2FzZSJhdXRob3JpdHkgZmlyc3Qgc2xhc2giOmlmKCIvIiE9dSl7aSgiRXhwZWN0ZWQgJy8nLCBnb3Q6ICIrdSksaj0iYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjtjb250aW51ZX1qPSJhdXRob3JpdHkgc2Vjb25kIHNsYXNoIjticmVhaztjYXNlImF1dGhvcml0eSBzZWNvbmQgc2xhc2giOmlmKGo9ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyIsIi8iIT11KXtpKCJFeHBlY3RlZCAnLycsIGdvdDogIit1KTtjb250aW51ZX1icmVhaztjYXNlImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI6aWYoIi8iIT11JiYiXFwiIT11KXtqPSJhdXRob3JpdHkiO2NvbnRpbnVlfWkoIkV4cGVjdGVkIGF1dGhvcml0eSwgZ290OiAiK3UpO2JyZWFrO2Nhc2UiYXV0aG9yaXR5IjppZigiQCI9PXUpe3ImJihpKCJAIGFscmVhZHkgc2Vlbi4iKSxsKz0iJTQwIikscj0hMDtmb3IodmFyIHg9MDt4PGwubGVuZ3RoO3grKyl7dmFyIHk9bFt4XTtpZigiCSIhPXkmJiJcbiIhPXkmJiJcciIhPXkpaWYoIjoiIT15fHxudWxsIT09dGhpcy5fcGFzc3dvcmQpe3ZhciB6PWUoeSk7bnVsbCE9PXRoaXMuX3Bhc3N3b3JkP3RoaXMuX3Bhc3N3b3JkKz16OnRoaXMuX3VzZXJuYW1lKz16fWVsc2UgdGhpcy5fcGFzc3dvcmQ9IiI7ZWxzZSBpKCJJbnZhbGlkIHdoaXRlc3BhY2UgaW4gYXV0aG9yaXR5LiIpfWw9IiJ9ZWxzZXtpZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11KXtrLT1sLmxlbmd0aCxsPSIiLGo9Imhvc3QiO2NvbnRpbnVlfWwrPXV9YnJlYWs7Y2FzZSJmaWxlIGhvc3QiOmlmKG89PXV8fCIvIj09dXx8IlxcIj09dXx8Ij8iPT11fHwiIyI9PXUpezIhPWwubGVuZ3RofHwhcC50ZXN0KGxbMF0pfHwiOiIhPWxbMV0mJiJ8IiE9bFsxXT8wPT1sLmxlbmd0aD9qPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0IjoodGhpcy5faG9zdD1kLmNhbGwodGhpcyxsKSxsPSIiLGo9InJlbGF0aXZlIHBhdGggc3RhcnQiKTpqPSJyZWxhdGl2ZSBwYXRoIjtjb250aW51ZX0iCSI9PXV8fCJcbiI9PXV8fCJcciI9PXU/aSgiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGZpbGUgaG9zdC4iKTpsKz11O2JyZWFrO2Nhc2UiaG9zdCI6Y2FzZSJob3N0bmFtZSI6aWYoIjoiIT11fHxzKXtpZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11KXtpZih0aGlzLl9ob3N0PWQuY2FsbCh0aGlzLGwpLGw9IiIsaj0icmVsYXRpdmUgcGF0aCBzdGFydCIsZylicmVhayBhO2NvbnRpbnVlfSIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dT8oIlsiPT11P3M9ITA6Il0iPT11JiYocz0hMSksbCs9dSk6aSgiSW52YWxpZCBjb2RlIHBvaW50IGluIGhvc3QvaG9zdG5hbWU6ICIrdSl9ZWxzZSBpZih0aGlzLl9ob3N0PWQuY2FsbCh0aGlzLGwpLGw9IiIsaj0icG9ydCIsImhvc3RuYW1lIj09ZylicmVhayBhO2JyZWFrO2Nhc2UicG9ydCI6aWYoL1swLTldLy50ZXN0KHUpKWwrPXU7ZWxzZXtpZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11fHxnKXtpZigiIiE9bCl7dmFyIEE9cGFyc2VJbnQobCwxMCk7QSE9bVt0aGlzLl9zY2hlbWVdJiYodGhpcy5fcG9ydD1BKyIiKSxsPSIifWlmKGcpYnJlYWsgYTtqPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0Ijtjb250aW51ZX0iCSI9PXV8fCJcbiI9PXV8fCJcciI9PXU/aSgiSW52YWxpZCBjb2RlIHBvaW50IGluIHBvcnQ6ICIrdSk6Yy5jYWxsKHRoaXMpfWJyZWFrO2Nhc2UicmVsYXRpdmUgcGF0aCBzdGFydCI6aWYoIlxcIj09dSYmaSgiJ1xcJyBub3QgYWxsb3dlZCBpbiBwYXRoLiIpLGo9InJlbGF0aXZlIHBhdGgiLCIvIiE9dSYmIlxcIiE9dSljb250aW51ZTticmVhaztjYXNlInJlbGF0aXZlIHBhdGgiOmlmKG8hPXUmJiIvIiE9dSYmIlxcIiE9dSYmKGd8fCI/IiE9dSYmIiMiIT11KSkiCSIhPXUmJiJcbiIhPXUmJiJcciIhPXUmJihsKz1lKHUpKTtlbHNleyJcXCI9PXUmJmkoIlxcIG5vdCBhbGxvd2VkIGluIHJlbGF0aXZlIHBhdGguIik7dmFyIEI7KEI9bltsLnRvTG93ZXJDYXNlKCldKSYmKGw9QiksIi4uIj09bD8odGhpcy5fcGF0aC5wb3AoKSwiLyIhPXUmJiJcXCIhPXUmJnRoaXMuX3BhdGgucHVzaCgiIikpOiIuIj09bCYmIi8iIT11JiYiXFwiIT11P3RoaXMuX3BhdGgucHVzaCgiIik6Ii4iIT1sJiYoImZpbGUiPT10aGlzLl9zY2hlbWUmJjA9PXRoaXMuX3BhdGgubGVuZ3RoJiYyPT1sLmxlbmd0aCYmcC50ZXN0KGxbMF0pJiYifCI9PWxbMV0mJihsPWxbMF0rIjoiKSx0aGlzLl9wYXRoLnB1c2gobCkpLGw9IiIsIj8iPT11Pyh0aGlzLl9xdWVyeT0iPyIsaj0icXVlcnkiKToiIyI9PXUmJih0aGlzLl9mcmFnbWVudD0iIyIsaj0iZnJhZ21lbnQiKX1icmVhaztjYXNlInF1ZXJ5IjpnfHwiIyIhPXU/byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fcXVlcnkrPWYodSkpOih0aGlzLl9mcmFnbWVudD0iIyIsaj0iZnJhZ21lbnQiKTticmVhaztjYXNlImZyYWdtZW50IjpvIT11JiYiCSIhPXUmJiJcbiIhPXUmJiJcciIhPXUmJih0aGlzLl9mcmFnbWVudCs9dSl9aysrfX1mdW5jdGlvbiBoKCl7dGhpcy5fc2NoZW1lPSIiLHRoaXMuX3NjaGVtZURhdGE9IiIsdGhpcy5fdXNlcm5hbWU9IiIsdGhpcy5fcGFzc3dvcmQ9bnVsbCx0aGlzLl9ob3N0PSIiLHRoaXMuX3BvcnQ9IiIsdGhpcy5fcGF0aD1bXSx0aGlzLl9xdWVyeT0iIix0aGlzLl9mcmFnbWVudD0iIix0aGlzLl9pc0ludmFsaWQ9ITEsdGhpcy5faXNSZWxhdGl2ZT0hMX1mdW5jdGlvbiBpKGEsYil7dm9pZCAwPT09Ynx8YiBpbnN0YW5jZW9mIGl8fChiPW5ldyBpKFN0cmluZyhiKSkpLHRoaXMuX3VybD1hLGguY2FsbCh0aGlzKTt2YXIgYz1hLnJlcGxhY2UoL15bIFx0XHJcblxmXSt8WyBcdFxyXG5cZl0rJC9nLCIiKTtnLmNhbGwodGhpcyxjLG51bGwsYil9dmFyIGo9ITE7aWYoIWEuZm9yY2VKVVJMKXRyeXt2YXIgaz1uZXcgVVJMKCJiIiwiaHR0cDovL2EiKTtqPSJodHRwOi8vYS9iIj09PWsuaHJlZn1jYXRjaChsKXt9aWYoIWope3ZhciBtPU9iamVjdC5jcmVhdGUobnVsbCk7bS5mdHA9MjEsbS5maWxlPTAsbS5nb3BoZXI9NzAsbS5odHRwPTgwLG0uaHR0cHM9NDQzLG0ud3M9ODAsbS53c3M9NDQzO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7blsiJTJlIl09Ii4iLG5bIi4lMmUiXT0iLi4iLG5bIiUyZS4iXT0iLi4iLG5bIiUyZSUyZSJdPSIuLiI7dmFyIG89dm9pZCAwLHA9L1thLXpBLVpdLyxxPS9bYS16QS1aMC05XCtcLVwuXS87aS5wcm90b3R5cGU9e2dldCBocmVmKCl7aWYodGhpcy5faXNJbnZhbGlkKXJldHVybiB0aGlzLl91cmw7dmFyIGE9IiI7cmV0dXJuKCIiIT10aGlzLl91c2VybmFtZXx8bnVsbCE9dGhpcy5fcGFzc3dvcmQpJiYoYT10aGlzLl91c2VybmFtZSsobnVsbCE9dGhpcy5fcGFzc3dvcmQ/IjoiK3RoaXMuX3Bhc3N3b3JkOiIiKSsiQCIpLHRoaXMucHJvdG9jb2wrKHRoaXMuX2lzUmVsYXRpdmU/Ii8vIithK3RoaXMuaG9zdDoiIikrdGhpcy5wYXRobmFtZSt0aGlzLl9xdWVyeSt0aGlzLl9mcmFnbWVudH0sc2V0IGhyZWYoYSl7aC5jYWxsKHRoaXMpLGcuY2FsbCh0aGlzLGEpfSxnZXQgcHJvdG9jb2woKXtyZXR1cm4gdGhpcy5fc2NoZW1lKyI6In0sc2V0IHByb3RvY29sKGEpe3RoaXMuX2lzSW52YWxpZHx8Zy5jYWxsKHRoaXMsYSsiOiIsInNjaGVtZSBzdGFydCIpfSxnZXQgaG9zdCgpe3JldHVybiB0aGlzLl9pc0ludmFsaWQ/IiI6dGhpcy5fcG9ydD90aGlzLl9ob3N0KyI6Iit0aGlzLl9wb3J0OnRoaXMuX2hvc3R9LHNldCBob3N0KGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJmcuY2FsbCh0aGlzLGEsImhvc3QiKX0sZ2V0IGhvc3RuYW1lKCl7cmV0dXJuIHRoaXMuX2hvc3R9LHNldCBob3N0bmFtZShhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZnLmNhbGwodGhpcyxhLCJob3N0bmFtZSIpfSxnZXQgcG9ydCgpe3JldHVybiB0aGlzLl9wb3J0fSxzZXQgcG9ydChhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZnLmNhbGwodGhpcyxhLCJwb3J0Iil9LGdldCBwYXRobmFtZSgpe3JldHVybiB0aGlzLl9pc0ludmFsaWQ/IiI6dGhpcy5faXNSZWxhdGl2ZT8iLyIrdGhpcy5fcGF0aC5qb2luKCIvIik6dGhpcy5fc2NoZW1lRGF0YX0sc2V0IHBhdGhuYW1lKGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJih0aGlzLl9wYXRoPVtdLGcuY2FsbCh0aGlzLGEsInJlbGF0aXZlIHBhdGggc3RhcnQiKSl9LGdldCBzZWFyY2goKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkfHwhdGhpcy5fcXVlcnl8fCI/Ij09dGhpcy5fcXVlcnk/IiI6dGhpcy5fcXVlcnl9LHNldCBzZWFyY2goYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmKHRoaXMuX3F1ZXJ5PSI/IiwiPyI9PWFbMF0mJihhPWEuc2xpY2UoMSkpLGcuY2FsbCh0aGlzLGEsInF1ZXJ5IikpfSxnZXQgaGFzaCgpe3JldHVybiB0aGlzLl9pc0ludmFsaWR8fCF0aGlzLl9mcmFnbWVudHx8IiMiPT10aGlzLl9mcmFnbWVudD8iIjp0aGlzLl9mcmFnbWVudH0sc2V0IGhhc2goYSl7dGhpcy5faXNJbnZhbGlkfHwodGhpcy5fZnJhZ21lbnQ9IiMiLCIjIj09YVswXSYmKGE9YS5zbGljZSgxKSksZy5jYWxsKHRoaXMsYSwiZnJhZ21lbnQiKSl9fTt2YXIgcj1hLlVSTDtyJiYoaS5jcmVhdGVPYmplY3RVUkw9ZnVuY3Rpb24oKXtyZXR1cm4gci5jcmVhdGVPYmplY3RVUkwuYXBwbHkocixhcmd1bWVudHMpfSxpLnJldm9rZU9iamVjdFVSTD1mdW5jdGlvbihhKXtyLnJldm9rZU9iamVjdFVSTChhKX0pLGEuVVJMPWl9fSh0aGlzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYj1hfHx7fSxkPTE7ZDxhcmd1bWVudHMubGVuZ3RoO2QrKyl7dmFyIGU9YXJndW1lbnRzW2RdO3RyeXtmb3IodmFyIGYgaW4gZSljKGYsZSxiKX1jYXRjaChnKXt9fXJldHVybiBifWZ1bmN0aW9uIGMoYSxiLGMpe3ZhciBlPWQoYixhKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxhLGUpfWZ1bmN0aW9uIGQoYSxiKXtpZihhKXt2YXIgYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYik7cmV0dXJuIGN8fGQoT2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGIpfX1GdW5jdGlvbi5wcm90b3R5cGUuYmluZHx8KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9Yy5zbGljZSgpO3JldHVybiBkLnB1c2guYXBwbHkoZCxhcmd1bWVudHMpLGIuYXBwbHkoYSxkKX19KSxhLm1peGluPWJ9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPSJzdHJpbmciPT10eXBlb2YgYT9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpOmEuY2xvbmVOb2RlKCEwKTtpZihkLmlubmVySFRNTD1iLGMpZm9yKHZhciBlIGluIGMpZC5zZXRBdHRyaWJ1dGUoZSxjW2VdKTtyZXR1cm4gZH12YXIgYz1ET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZCxkPURPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlO0RPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKyljLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspZC5jYWxsKHRoaXMsYXJndW1lbnRzW2FdKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oYSxiKXsxPT1hcmd1bWVudHMubGVuZ3RoJiYoYj0hdGhpcy5jb250YWlucyhhKSksYj90aGlzLmFkZChhKTp0aGlzLnJlbW92ZShhKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS5zd2l0Y2g9ZnVuY3Rpb24oYSxiKXthJiZ0aGlzLnJlbW92ZShhKSxiJiZ0aGlzLmFkZChiKX07dmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcyl9LGY9d2luZG93Lk5hbWVkTm9kZU1hcHx8d2luZG93Lk1vek5hbWVkQXR0ck1hcHx8e307aWYoTm9kZUxpc3QucHJvdG90eXBlLmFycmF5PWUsZi5wcm90b3R5cGUuYXJyYXk9ZSxIVE1MQ29sbGVjdGlvbi5wcm90b3R5cGUuYXJyYXk9ZSwhd2luZG93LnBlcmZvcm1hbmNlKXt2YXIgZz1EYXRlLm5vdygpO3dpbmRvdy5wZXJmb3JtYW5jZT17bm93OmZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCktZ319fXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7dmFyIGE9d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTtyZXR1cm4gYT9mdW5jdGlvbihiKXtyZXR1cm4gYShmdW5jdGlvbigpe2IocGVyZm9ybWFuY2Uubm93KCkpfSl9OmZ1bmN0aW9uKGEpe3JldHVybiB3aW5kb3cuc2V0VGltZW91dChhLDFlMy82MCl9fSgpKSx3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGEpe2NsZWFyVGltZW91dChhKX19KCkpO3ZhciBoPVtdLGk9ZnVuY3Rpb24oKXtoLnB1c2goYXJndW1lbnRzKX07d2luZG93LlBvbHltZXI9aSxhLmRlbGl2ZXJEZWNsYXJhdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gYS5kZWxpdmVyRGVjbGFyYXRpb25zPWZ1bmN0aW9uKCl7dGhyb3ciUG9zc2libGUgYXR0ZW1wdCB0byBsb2FkIFBvbHltZXIgdHdpY2UifSxofSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXt3aW5kb3cuUG9seW1lcj09PWkmJih3aW5kb3cuUG9seW1lcj1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoJ1lvdSB0cmllZCB0byB1c2UgcG9seW1lciB3aXRob3V0IGxvYWRpbmcgaXQgZmlyc3QuIFRvIGxvYWQgcG9seW1lciwgPGxpbmsgcmVsPSJpbXBvcnQiIGhyZWY9ImNvbXBvbmVudHMvcG9seW1lci9wb2x5bWVyLmh0bWwiPicpfSl9KSxhLmNyZWF0ZURPTT1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2EudGVtcGxhdGVDb250ZW50PWEudGVtcGxhdGVDb250ZW50fHxmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50fX0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXthPWF8fCh3aW5kb3cuSW5zcGVjdG9yPXt9KTt2YXIgYjt3aW5kb3cuc2luc3BlY3Q9ZnVuY3Rpb24oYSxkKXtifHwoYj13aW5kb3cub3BlbigiIiwiU2hhZG93RE9NIEluc3BlY3RvciIsbnVsbCwhMCksYi5kb2N1bWVudC53cml0ZShjKSxiLmFwaT17c2hhZG93aXplOnNoYWRvd2l6ZX0pLGYoYXx8d3JhcChkb2N1bWVudC5ib2R5KSxkKX07dmFyIGM9WyI8IURPQ1RZUEUgaHRtbD4iLCI8aHRtbD4iLCIgIDxoZWFkPiIsIiAgICA8dGl0bGU+U2hhZG93RE9NIEluc3BlY3RvcjwvdGl0bGU+IiwiICAgIDxzdHlsZT4iLCIgICAgICBib2R5IHsiLCIgICAgICB9IiwiICAgICAgcHJlIHsiLCcgICAgICAgIGZvbnQ6IDlwdCAiQ291cmllciBOZXciLCBtb25vc3BhY2U7JywiICAgICAgICBsaW5lLWhlaWdodDogMS41ZW07IiwiICAgICAgfSIsIiAgICAgIHRhZyB7IiwiICAgICAgICBjb2xvcjogcHVycGxlOyIsIiAgICAgIH0iLCIgICAgICB1bCB7IiwiICAgICAgICAgbWFyZ2luOiAwOyIsIiAgICAgICAgIHBhZGRpbmc6IDA7IiwiICAgICAgICAgbGlzdC1zdHlsZTogbm9uZTsiLCIgICAgICB9IiwiICAgICAgbGkgeyIsIiAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsiLCIgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFmMWYxOyIsIiAgICAgICAgIHBhZGRpbmc6IDRweCA2cHg7IiwiICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OyIsIiAgICAgICAgIG1hcmdpbi1yaWdodDogNHB4OyIsIiAgICAgIH0iLCIgICAgPC9zdHlsZT4iLCIgIDwvaGVhZD4iLCIgIDxib2R5PiIsJyAgICA8dWwgaWQ9ImNydW1icyI+JywiICAgIDwvdWw+IiwnICAgIDxkaXYgaWQ9InRyZWUiPjwvZGl2PicsIiAgPC9ib2R5PiIsIjwvaHRtbD4iXS5qb2luKCJcbiIpLGQ9W10sZT1mdW5jdGlvbigpe3ZhciBhPWIuZG9jdW1lbnQsYz1hLnF1ZXJ5U2VsZWN0b3IoIiNjcnVtYnMiKTtjLnRleHRDb250ZW50PSIiO2Zvcih2YXIgZSxnPTA7ZT1kW2ddO2crKyl7dmFyIGg9YS5jcmVhdGVFbGVtZW50KCJhIik7aC5ocmVmPSIjIixoLnRleHRDb250ZW50PWUubG9jYWxOYW1lLGguaWR4PWcsaC5vbmNsaWNrPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYjtkLmxlbmd0aD50aGlzLmlkeDspYj1kLnBvcCgpO2YoYi5zaGFkb3d8fGIsYiksYS5wcmV2ZW50RGVmYXVsdCgpfSxjLmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudCgibGkiKSkuYXBwZW5kQ2hpbGQoaCl9fSxmPWZ1bmN0aW9uKGEsYyl7dmFyIGY9Yi5kb2N1bWVudDtrPVtdO3ZhciBnPWN8fGE7ZC5wdXNoKGcpLGUoKSxmLmJvZHkucXVlcnlTZWxlY3RvcigiI3RyZWUiKS5pbm5lckhUTUw9IjxwcmU+IitqKGEsYS5jaGlsZE5vZGVzKSsiPC9wcmU+In0sZz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGg9e1NUWUxFOjEsU0NSSVBUOjEsIiNjb21tZW50IjoxLFRFTVBMQVRFOjF9LGk9ZnVuY3Rpb24oYSl7cmV0dXJuIGhbYS5ub2RlTmFtZV19LGo9ZnVuY3Rpb24oYSxiLGMpe2lmKGkoYSkpcmV0dXJuIiI7dmFyIGQ9Y3x8IiI7aWYoYS5sb2NhbE5hbWV8fDExPT1hLm5vZGVUeXBlKXt2YXIgZT1hLmxvY2FsTmFtZXx8InNoYWRvdy1yb290IixmPWQrbChhKTsiY29udGVudCI9PWUmJihiPWEuZ2V0RGlzdHJpYnV0ZWROb2RlcygpKSxmKz0iPGJyLz4iO3ZhciBoPWQrIiZuYnNwOyZuYnNwOyI7ZyhiLGZ1bmN0aW9uKGEpe2YrPWooYSxhLmNoaWxkTm9kZXMsaCl9KSxmKz1kLHticjoxfVtlXXx8KGYrPSI8dGFnPiZsdDsvIitlKyImZ3Q7PC90YWc+IixmKz0iPGJyLz4iKX1lbHNle3ZhciBrPWEudGV4dENvbnRlbnQudHJpbSgpO2Y9az9kKyciJytrKyciPGJyLz4nOiIifXJldHVybiBmfSxrPVtdLGw9ZnVuY3Rpb24oYSl7dmFyIGI9Ijx0YWc+Jmx0OyIsYz1hLmxvY2FsTmFtZXx8InNoYWRvdy1yb290IjtyZXR1cm4gYS53ZWJraXRTaGFkb3dSb290fHxhLnNoYWRvd1Jvb3Q/KGIrPScgPGJ1dHRvbiBpZHg9Iicray5sZW5ndGgrJyIgb25jbGljaz0iYXBpLnNoYWRvd2l6ZS5jYWxsKHRoaXMpIj4nK2MrIjwvYnV0dG9uPiIsay5wdXNoKGEpKTpiKz1jfHwic2hhZG93LXJvb3QiLGEuYXR0cmlidXRlcyYmZyhhLmF0dHJpYnV0ZXMsZnVuY3Rpb24oYSl7Yis9IiAiK2EubmFtZSsoYS52YWx1ZT8nPSInK2EudmFsdWUrJyInOiIiKX0pLGIrPSImZ3Q7PC90YWc+In07c2hhZG93aXplPWZ1bmN0aW9uKCl7dmFyIGE9TnVtYmVyKHRoaXMuYXR0cmlidXRlcy5pZHgudmFsdWUpLGI9a1thXTtiP2YoYi53ZWJraXRTaGFkb3dSb290fHxiLnNoYWRvd1Jvb3QsYik6KGNvbnNvbGUubG9nKCJiYWQgc2hhZG93aXplIG5vZGUiKSxjb25zb2xlLmRpcih0aGlzKSl9LGEub3V0cHV0PWp9KHdpbmRvdy5JbnNwZWN0b3IpLGZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTthLnRleHRDb250ZW50PSJib2R5IHt0cmFuc2l0aW9uOiBvcGFjaXR5IGVhc2UtaW4gMC4yczsgfSBcbmJvZHlbdW5yZXNvbHZlZF0ge29wYWNpdHk6IDA7IGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogaGlkZGVuOyB9IFxuIjt2YXIgYj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfShQbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBiPWJ8fFtdLGIubWFwfHwoYj1bYl0pLGEuYXBwbHkodGhpcyxiLm1hcChkKSl9ZnVuY3Rpb24gYyhhLGMsZCl7dmFyIGU7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm47Y2FzZSAxOmU9bnVsbDticmVhaztjYXNlIDI6ZT1jLmFwcGx5KHRoaXMpO2JyZWFrO2RlZmF1bHQ6ZT1iKGQsYyl9ZlthXT1lfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZbYV19ZnVuY3Rpb24gZShhLGMpe0hUTUxJbXBvcnRzLndoZW5JbXBvcnRzUmVhZHkoZnVuY3Rpb24oKXtiKGMsYSl9KX12YXIgZj17fTthLm1hcnNoYWw9ZCxhLm1vZHVsYXJpemU9YyxhLnVzaW5nPWV9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmLnRleHRDb250ZW50PWQrKyxlLnB1c2goYSl9ZnVuY3Rpb24gYygpe2Zvcig7ZS5sZW5ndGg7KWUuc2hpZnQoKSgpfXZhciBkPTAsZT1bXSxmPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcod2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fEpzTXV0YXRpb25PYnNlcnZlcikoYykub2JzZXJ2ZShmLHtjaGFyYWN0ZXJEYXRhOiEwfSksYS5lbmRPZk1pY3JvdGFzaz1ifShQbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCxlKXtyZXR1cm4gYS5yZXBsYWNlKGUsZnVuY3Rpb24oYSxlLGYsZyl7dmFyIGg9Zi5yZXBsYWNlKC9bIiddL2csIiIpO3JldHVybiBoPWMoYixoLGQpLGUrIiciK2grIiciK2d9KX1mdW5jdGlvbiBjKGEsYixjKXtpZihiJiYiLyI9PT1iWzBdKXJldHVybiBiO3ZhciBlPW5ldyBVUkwoYixhKTtyZXR1cm4gYz9lLmhyZWY6ZChlLmhyZWYpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9bmV3IFVSTChkb2N1bWVudC5iYXNlVVJJKSxjPW5ldyBVUkwoYSxiKTtyZXR1cm4gYy5ob3N0PT09Yi5ob3N0JiZjLnBvcnQ9PT1iLnBvcnQmJmMucHJvdG9jb2w9PT1iLnByb3RvY29sP2UoYixjKTphfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9YS5wYXRobmFtZSxkPWIucGF0aG5hbWUsZT1jLnNwbGl0KCIvIiksZj1kLnNwbGl0KCIvIik7ZS5sZW5ndGgmJmVbMF09PT1mWzBdOyllLnNoaWZ0KCksZi5zaGlmdCgpO2Zvcih2YXIgZz0wLGg9ZS5sZW5ndGgtMTtoPmc7ZysrKWYudW5zaGlmdCgiLi4iKTtyZXR1cm4gZi5qb2luKCIvIikrYi5zZWFyY2grYi5oYXNofXZhciBmPXtyZXNvbHZlRG9tOmZ1bmN0aW9uKGEsYil7Yj1ifHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSx0aGlzLnJlc29sdmVBdHRyaWJ1dGVzKGEsYiksdGhpcy5yZXNvbHZlU3R5bGVzKGEsYik7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJ0ZW1wbGF0ZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKWQuY29udGVudCYmdGhpcy5yZXNvbHZlRG9tKGQuY29udGVudCxiKX0scmVzb2x2ZVRlbXBsYXRlOmZ1bmN0aW9uKGEpe3RoaXMucmVzb2x2ZURvbShhLmNvbnRlbnQsYS5vd25lckRvY3VtZW50LmJhc2VVUkkpfSxyZXNvbHZlU3R5bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKXRoaXMucmVzb2x2ZVN0eWxlKGQsYil9LHJlc29sdmVTdHlsZTpmdW5jdGlvbihhLGIpe2I9Ynx8YS5vd25lckRvY3VtZW50LmJhc2VVUkksYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVDc3NUZXh0KGEudGV4dENvbnRlbnQsYil9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYT1iKGEsYyxkLGcpLGIoYSxjLGQsaCl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7YS5oYXNBdHRyaWJ1dGVzJiZhLmhhc0F0dHJpYnV0ZXMoKSYmdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoYSxiKTt2YXIgYz1hJiZhLnF1ZXJ5U2VsZWN0b3JBbGwoaik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoZCxiKX0scmVzb2x2ZUVsZW1lbnRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsZCl7ZD1kfHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIGYsaD1hLmF0dHJpYnV0ZXNbZV0saT1oJiZoLnZhbHVlO2kmJmkuc2VhcmNoKGspPDAmJihmPSJzdHlsZSI9PT1lP2IoaSxkLCExLGcpOmMoZCxpKSxoLnZhbHVlPWYpfSl9fSxnPS8odXJsXCgpKFteKV0qKShcKSkvZyxoPS8oQGltcG9ydFtcc10rKD8hdXJsXCgpKShbXjtdKikoOykvZyxpPVsiaHJlZiIsInNyYyIsImFjdGlvbiIsInN0eWxlIiwidXJsIl0saj0iWyIraS5qb2luKCJdLFsiKSsiXSIsaz0ie3suKn19IjthLnVybFJlc29sdmVyPWZ9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3UucHVzaChhKSx0fHwodD0hMCxxKGQpKX1mdW5jdGlvbiBjKGEpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSl8fGF9ZnVuY3Rpb24gZCgpe3Q9ITE7dmFyIGE9dTt1PVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7dmFyIGI9ITE7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEudGFrZVJlY29yZHMoKTtlKGEpLGMubGVuZ3RoJiYoYS5jYWxsYmFja18oYyxhKSxiPSEwKX0pLGImJmQoKX1mdW5jdGlvbiBlKGEpe2Eubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9cC5nZXQoYik7YyYmYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Iub2JzZXJ2ZXI9PT1hJiZiLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPWE7YztjPWMucGFyZW50Tm9kZSl7dmFyIGQ9cC5nZXQoYyk7aWYoZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXSxnPWYub3B0aW9ucztpZihjPT09YXx8Zy5zdWJ0cmVlKXt2YXIgaD1iKGcpO2gmJmYuZW5xdWV1ZShoKX19fX1mdW5jdGlvbiBnKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89Kyt2fWZ1bmN0aW9uIGgoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1bXSx0aGlzLnJlbW92ZWROb2Rlcz1bXSx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBpKGEpe3ZhciBiPW5ldyBoKGEudHlwZSxhLnRhcmdldCk7cmV0dXJuIGIuYWRkZWROb2Rlcz1hLmFkZGVkTm9kZXMuc2xpY2UoKSxiLnJlbW92ZWROb2Rlcz1hLnJlbW92ZWROb2Rlcy5zbGljZSgpLGIucHJldmlvdXNTaWJsaW5nPWEucHJldmlvdXNTaWJsaW5nLGIubmV4dFNpYmxpbmc9YS5uZXh0U2libGluZyxiLmF0dHJpYnV0ZU5hbWU9YS5hdHRyaWJ1dGVOYW1lLGIuYXR0cmlidXRlTmFtZXNwYWNlPWEuYXR0cmlidXRlTmFtZXNwYWNlLGIub2xkVmFsdWU9YS5vbGRWYWx1ZSxifWZ1bmN0aW9uIGooYSxiKXtyZXR1cm4gdz1uZXcgaChhLGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIHg/eDooeD1pKHcpLHgub2xkVmFsdWU9YSx4KX1mdW5jdGlvbiBsKCl7dz14PXZvaWQgMH1mdW5jdGlvbiBtKGEpe3JldHVybiBhPT09eHx8YT09PXd9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgV2Vha01hcCxxPXdpbmRvdy5tc1NldEltbWVkaWF0ZTtpZighcSl7dmFyIHI9W10scz1TdHJpbmcoTWF0aC5yYW5kb20oKSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKGEpe2lmKGEuZGF0YT09PXMpe3ZhciBiPXI7cj1bXSxiLmZvckVhY2goZnVuY3Rpb24oYSl7YSgpfSl9fSkscT1mdW5jdGlvbihhKXtyLnB1c2goYSksd2luZG93LnBvc3RNZXNzYWdlKHMsIioiKX19dmFyIHQ9ITEsdT1bXSx2PTA7Zy5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXtpZihhPWMoYSksIWIuY2hpbGRMaXN0JiYhYi5hdHRyaWJ1dGVzJiYhYi5jaGFyYWN0ZXJEYXRhfHxiLmF0dHJpYnV0ZU9sZFZhbHVlJiYhYi5hdHRyaWJ1dGVzfHxiLmF0dHJpYnV0ZUZpbHRlciYmYi5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYhYi5hdHRyaWJ1dGVzfHxiLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSYmIWIuY2hhcmFjdGVyRGF0YSl0aHJvdyBuZXcgU3ludGF4RXJyb3I7dmFyIGQ9cC5nZXQoYSk7ZHx8cC5zZXQoYSxkPVtdKTtmb3IodmFyIGUsZj0wO2Y8ZC5sZW5ndGg7ZisrKWlmKGRbZl0ub2JzZXJ2ZXI9PT10aGlzKXtlPWRbZl0sZS5yZW1vdmVMaXN0ZW5lcnMoKSxlLm9wdGlvbnM9YjticmVha31lfHwoZT1uZXcgbyh0aGlzLGEsYiksZC5wdXNoKGUpLHRoaXMubm9kZXNfLnB1c2goYSkpLGUuYWRkTGlzdGVuZXJzKCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1wLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107aWYoZC5vYnNlcnZlcj09PXRoaXMpe2QucmVtb3ZlTGlzdGVuZXJzKCksYi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19O3ZhciB3LHg7by5wcm90b3R5cGU9e2VucXVldWU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5vYnNlcnZlci5yZWNvcmRzXyxkPWMubGVuZ3RoO2lmKGMubGVuZ3RoPjApe3ZhciBlPWNbZC0xXSxmPW4oZSxhKTtpZihmKXJldHVybiB2b2lkKGNbZC0xXT1mKX1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWcsYS5NdXRhdGlvbk9ic2VydmVyfHwoYS5NdXRhdGlvbk9ic2VydmVyPWcpfSh0aGlzKSx3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe3ZhciBiPShhLnBhdGgsYS54aHIpLGM9YS5mbGFncyxkPWZ1bmN0aW9uKGEsYil7dGhpcy5jYWNoZT17fSx0aGlzLm9ubG9hZD1hLHRoaXMub25jb21wbGV0ZT1iLHRoaXMuaW5mbGlnaHQ9MCx0aGlzLnBlbmRpbmc9e319O2QucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0Kz1hLmxlbmd0aDtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspdGhpcy5yZXF1aXJlKGIpO3RoaXMuY2hlY2tEb25lKCl9LGFkZE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbmZsaWdodCsrLHRoaXMucmVxdWlyZShhKSx0aGlzLmNoZWNrRG9uZSgpfSxyZXF1aXJlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc3JjfHxhLmhyZWY7YS5fX25vZGVVcmw9Yix0aGlzLmRlZHVwZShiLGEpfHx0aGlzLmZldGNoKGIsYSl9LGRlZHVwZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMucGVuZGluZ1thXSlyZXR1cm4gdGhpcy5wZW5kaW5nW2FdLnB1c2goYiksITA7cmV0dXJuIHRoaXMuY2FjaGVbYV0/KHRoaXMub25sb2FkKGEsYix0aGlzLmNhY2hlW2FdKSx0aGlzLnRhaWwoKSwhMCk6KHRoaXMucGVuZGluZ1thXT1bYl0sITEpfSxmZXRjaDpmdW5jdGlvbihhLGQpe2lmKGMubG9hZCYmY29uc29sZS5sb2coImZldGNoIixhLGQpLGEubWF0Y2goL15kYXRhOi8pKXt2YXIgZT1hLnNwbGl0KCIsIiksZj1lWzBdLGc9ZVsxXTtnPWYuaW5kZXhPZigiO2Jhc2U2NCIpPi0xP2F0b2IoZyk6ZGVjb2RlVVJJQ29tcG9uZW50KGcpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnJlY2VpdmUoYSxkLG51bGwsZyl9LmJpbmQodGhpcyksMCl9ZWxzZXt2YXIgaD1mdW5jdGlvbihiLGMsZSl7dGhpcy5yZWNlaXZlKGEsZCxiLGMsZSl9LmJpbmQodGhpcyk7Yi5sb2FkKGEsaCl9fSxyZWNlaXZlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy5jYWNoZVthXT1kO3ZhciBmPXRoaXMucGVuZGluZ1thXTtlJiZlIT09YSYmKHRoaXMuY2FjaGVbZV09ZCxmPWYuY29uY2F0KHRoaXMucGVuZGluZ1tlXSkpO2Zvcih2YXIgZyxoPTAsaT1mLmxlbmd0aDtpPmgmJihnPWZbaF0pO2grKyl0aGlzLm9ubG9hZChlfHxhLGcsZCksdGhpcy50YWlsKCk7dGhpcy5wZW5kaW5nW2FdPW51bGwsZSYmZSE9PWEmJih0aGlzLnBlbmRpbmdbZV09bnVsbCl9LHRhaWw6ZnVuY3Rpb24oKXstLXRoaXMuaW5mbGlnaHQsdGhpcy5jaGVja0RvbmUoKX0sY2hlY2tEb25lOmZ1bmN0aW9uKCl7dGhpcy5pbmZsaWdodHx8dGhpcy5vbmNvbXBsZXRlKCl9fSxiPWJ8fHthc3luYzohMCxvazpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdGF0dXM+PTIwMCYmYS5zdGF0dXM8MzAwfHwzMDQ9PT1hLnN0YXR1c3x8MD09PWEuc3RhdHVzfSxsb2FkOmZ1bmN0aW9uKGMsZCxlKXt2YXIgZj1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuKGEuZmxhZ3MuZGVidWd8fGEuZmxhZ3MuYnVzdCkmJihjKz0iPyIrTWF0aC5yYW5kb20oKSksZi5vcGVuKCJHRVQiLGMsYi5hc3luYyksZi5hZGRFdmVudExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixmdW5jdGlvbigpe2lmKDQ9PT1mLnJlYWR5U3RhdGUpe3ZhciBhPWYuZ2V0UmVzcG9uc2VIZWFkZXIoIkxvY2F0aW9uIiksYz1udWxsO2lmKGEpdmFyIGM9Ii8iPT09YS5zdWJzdHIoMCwxKT9sb2NhdGlvbi5vcmlnaW4rYTpjO2QuY2FsbChlLCFiLm9rKGYpJiZmLGYucmVzcG9uc2V8fGYucmVzcG9uc2VUZXh0LGMpfX0pLGYuc2VuZCgpLGZ9LGxvYWREb2N1bWVudDpmdW5jdGlvbihhLGIsYyl7dGhpcy5sb2FkKGEsYixjKS5yZXNwb25zZVR5cGU9ImRvY3VtZW50In19LGEueGhyPWIsYS5Mb2FkZXI9ZH0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLnJlbD09PWd9ZnVuY3Rpb24gYyhhKXt2YXIgYj1kKGEpLGM9ImRhdGE6dGV4dC9qYXZhc2NyaXB0Ijt0cnl7Yys9IjtiYXNlNjQsIitidG9hKGIpfWNhdGNoKGUpe2MrPSI7Y2hhcnNldD11dGYtOCwiK2VuY29kZVVSSUNvbXBvbmVudChiKX1yZXR1cm4gY31mdW5jdGlvbiBkKGEpe3JldHVybiBhLnRleHRDb250ZW50K2UoYSl9ZnVuY3Rpb24gZShhKXt2YXIgYj1hLl9fbm9kZVVybDtpZighYil7Yj1hLm93bmVyRG9jdW1lbnQuYmFzZVVSSTt2YXIgYz0iWyIrTWF0aC5mbG9vcigxZTMqKE1hdGgucmFuZG9tKCkrMSkpKyJdIixkPWEudGV4dENvbnRlbnQubWF0Y2goL1BvbHltZXJcKFsnIl0oW14nIl0qKS8pO2M9ZCYmZFsxXXx8YyxiKz0iLyIrYysiLmpzIn1yZXR1cm4iXG4vLyMgc291cmNlVVJMPSIrYisiXG4ifWZ1bmN0aW9uIGYoYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGIudGV4dENvbnRlbnQ9YS50ZXh0Q29udGVudCxuLnJlc29sdmVVcmxzSW5TdHlsZShiKSxifXZhciBnPSJpbXBvcnQiLGg9YS5mbGFncyxpPS9UcmlkZW50Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGo9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP3dpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoZG9jdW1lbnQpOmRvY3VtZW50LGs9e2RvY3VtZW50U2VsZWN0b3JzOiJsaW5rW3JlbD0iK2crIl0iLGltcG9ydHNTZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2crIl0iLCJsaW5rW3JlbD1zdHlsZXNoZWV0XSIsInN0eWxlIiwic2NyaXB0Om5vdChbdHlwZV0pIiwnc2NyaXB0W3R5cGU9InRleHQvamF2YXNjcmlwdCJdJ10uam9pbigiLCIpLG1hcDp7bGluazoicGFyc2VMaW5rIixzY3JpcHQ6InBhcnNlU2NyaXB0IixzdHlsZToicGFyc2VTdHlsZSJ9LHBhcnNlTmV4dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubmV4dFRvUGFyc2UoKTthJiZ0aGlzLnBhcnNlKGEpfSxwYXJzZTpmdW5jdGlvbihhKXtpZih0aGlzLmlzUGFyc2VkKGEpKXJldHVybiB2b2lkKGgucGFyc2UmJmNvbnNvbGUubG9nKCJbJXNdIGlzIGFscmVhZHkgcGFyc2VkIixhLmxvY2FsTmFtZSkpO3ZhciBiPXRoaXNbdGhpcy5tYXBbYS5sb2NhbE5hbWVdXTtiJiYodGhpcy5tYXJrUGFyc2luZyhhKSxiLmNhbGwodGhpcyxhKSl9LG1hcmtQYXJzaW5nOmZ1bmN0aW9uKGEpe2gucGFyc2UmJmNvbnNvbGUubG9nKCJwYXJzaW5nIixhKSx0aGlzLnBhcnNpbmdFbGVtZW50PWF9LG1hcmtQYXJzaW5nQ29tcGxldGU6ZnVuY3Rpb24oYSl7YS5fX2ltcG9ydFBhcnNlZD0hMCxhLl9faW1wb3J0RWxlbWVudCYmKGEuX19pbXBvcnRFbGVtZW50Ll9faW1wb3J0UGFyc2VkPSEwKSx0aGlzLnBhcnNpbmdFbGVtZW50PW51bGwsaC5wYXJzZSYmY29uc29sZS5sb2coImNvbXBsZXRlZCIsYSl9LGludmFsaWRhdGVQYXJzZTpmdW5jdGlvbihhKXthJiZhLl9faW1wb3J0TGluayYmKGEuX19pbXBvcnRQYXJzZWQ9YS5fX2ltcG9ydExpbmsuX19pbXBvcnRQYXJzZWQ9ITEsdGhpcy5wYXJzZVNvb24oKSl9LHBhcnNlU29vbjpmdW5jdGlvbigpe3RoaXMuX3BhcnNlU29vbiYmY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fcGFyc2VEZWxheSk7dmFyIGE9dGhpczt0aGlzLl9wYXJzZVNvb249cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7YS5wYXJzZU5leHQoKX0pfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXtpZihIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vayYmSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2soYSksYS5pbXBvcnQuX19pbXBvcnRQYXJzZWQ9ITAsdGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGEpLGEuZGlzcGF0Y2hFdmVudChhLl9fcmVzb3VyY2U/bmV3IEN1c3RvbUV2ZW50KCJsb2FkIix7YnViYmxlczohMX0pOm5ldyBDdXN0b21FdmVudCgiZXJyb3IiLHtidWJibGVzOiExfSkpLGEuX19wZW5kaW5nKWZvcih2YXIgYjthLl9fcGVuZGluZy5sZW5ndGg7KWI9YS5fX3BlbmRpbmcuc2hpZnQoKSxiJiZiKHt0YXJnZXQ6YX0pO3RoaXMucGFyc2VOZXh0KCl9LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpP3RoaXMucGFyc2VJbXBvcnQoYSk6KGEuaHJlZj1hLmhyZWYsdGhpcy5wYXJzZUdlbmVyaWMoYSkpfSxwYXJzZVN0eWxlOmZ1bmN0aW9uKGEpe3ZhciBiPWE7YT1mKGEpLGEuX19pbXBvcnRFbGVtZW50PWIsdGhpcy5wYXJzZUdlbmVyaWMoYSl9LHBhcnNlR2VuZXJpYzpmdW5jdGlvbihhKXt0aGlzLnRyYWNrRWxlbWVudChhKSx0aGlzLmFkZEVsZW1lbnRUb0RvY3VtZW50KGEpfSxyb290SW1wb3J0Rm9yRWxlbWVudDpmdW5jdGlvbihhKXtmb3IodmFyIGI9YTtiLm93bmVyRG9jdW1lbnQuX19pbXBvcnRMaW5rOyliPWIub3duZXJEb2N1bWVudC5fX2ltcG9ydExpbms7cmV0dXJuIGJ9LGFkZEVsZW1lbnRUb0RvY3VtZW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnJvb3RJbXBvcnRGb3JFbGVtZW50KGEuX19pbXBvcnRFbGVtZW50fHxhKSxjPWIuX19pbnNlcnRlZEVsZW1lbnRzPWIuX19pbnNlcnRlZEVsZW1lbnRzfHwwLGQ9Yi5uZXh0RWxlbWVudFNpYmxpbmcsZT0wO2M+ZTtlKyspZD1kJiZkLm5leHRFbGVtZW50U2libGluZztiLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsZCl9LHRyYWNrRWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1mdW5jdGlvbihkKXtiJiZiKGQpLGMubWFya1BhcnNpbmdDb21wbGV0ZShhKSxjLnBhcnNlTmV4dCgpfTtpZihhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGQpLGEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQpLGkmJiJzdHlsZSI9PT1hLmxvY2FsTmFtZSl7dmFyIGU9ITE7aWYoLTE9PWEudGV4dENvbnRlbnQuaW5kZXhPZigiQGltcG9ydCIpKWU9ITA7ZWxzZSBpZihhLnNoZWV0KXtlPSEwO2Zvcih2YXIgZixnPWEuc2hlZXQuY3NzUnVsZXMsaD1nP2cubGVuZ3RoOjAsaj0wO2g+aiYmKGY9Z1tqXSk7aisrKWYudHlwZT09PUNTU1J1bGUuSU1QT1JUX1JVTEUmJihlPWUmJkJvb2xlYW4oZi5zdHlsZVNoZWV0KSl9ZSYmYS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgibG9hZCIse2J1YmJsZXM6ITF9KSl9fSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLl9faW1wb3J0RWxlbWVudD1iLGQuc3JjPWIuc3JjP2Iuc3JjOmMoYiksYS5jdXJyZW50U2NyaXB0PWIsdGhpcy50cmFja0VsZW1lbnQoZCxmdW5jdGlvbigpe2QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSxhLmN1cnJlbnRTY3JpcHQ9bnVsbH0pLHRoaXMuYWRkRWxlbWVudFRvRG9jdW1lbnQoZCl9LG5leHRUb1BhcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMucGFyc2luZ0VsZW1lbnQmJnRoaXMubmV4dFRvUGFyc2VJbkRvYyhqKX0sbmV4dFRvUGFyc2VJbkRvYzpmdW5jdGlvbihhLGMpe2Zvcih2YXIgZCxlPWEucXVlcnlTZWxlY3RvckFsbCh0aGlzLnBhcnNlU2VsZWN0b3JzRm9yTm9kZShhKSksZj0wLGc9ZS5sZW5ndGg7Zz5mJiYoZD1lW2ZdKTtmKyspaWYoIXRoaXMuaXNQYXJzZWQoZCkpcmV0dXJuIHRoaXMuaGFzUmVzb3VyY2UoZCk/YihkKT90aGlzLm5leHRUb1BhcnNlSW5Eb2MoZC5pbXBvcnQsZCk6ZDp2b2lkIDA7cmV0dXJuIGN9LHBhcnNlU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGE7cmV0dXJuIGI9PT1qP3RoaXMuZG9jdW1lbnRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzU2VsZWN0b3JzfSxpc1BhcnNlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5fX2ltcG9ydFBhcnNlZH0saGFzUmVzb3VyY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSkmJiFhLmltcG9ydD8hMTohMH19LGw9Lyh1cmxcKCkoW14pXSopKFwpKS9nLG09LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLG49e3Jlc29sdmVVcmxzSW5TdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQsYz1iLmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVVcmxzSW5Dc3NUZXh0KGEudGV4dENvbnRlbnQsYyksYX0scmVzb2x2ZVVybHNJbkNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlcGxhY2VVcmxzKGEsYixsKTtyZXR1cm4gYz10aGlzLnJlcGxhY2VVcmxzKGMsYixtKX0scmVwbGFjZVVybHM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnJlcGxhY2UoYyxmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1kLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGIuaHJlZj1mLGY9Yi5ocmVmLGMrIiciK2YrIiciK2V9KX19O2EucGFyc2VyPWssYS5wYXRoPW4sYS5pc0lFPWl9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBjKGEscSl9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGQoYSxiKXt2YXIgYz1hO2MgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KHEpKSxjLl9VUkw9Yjt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtkLnNldEF0dHJpYnV0ZSgiaHJlZiIsYiksYy5iYXNlVVJJfHwoYy5iYXNlVVJJPWIpO3ZhciBlPWMuY3JlYXRlRWxlbWVudCgibWV0YSIpO3JldHVybiBlLnNldEF0dHJpYnV0ZSgiY2hhcnNldCIsInV0Zi04IiksYy5oZWFkLmFwcGVuZENoaWxkKGUpLGMuaGVhZC5hcHBlbmRDaGlsZChkKSxhIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjLmJvZHkuaW5uZXJIVE1MPWEpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31mdW5jdGlvbiBlKGEsYil7Yj1ifHxyLGcoZnVuY3Rpb24oKXtoKGEsYil9LGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuImNvbXBsZXRlIj09PWEucmVhZHlTdGF0ZXx8YS5yZWFkeVN0YXRlPT09eX1mdW5jdGlvbiBnKGEsYil7aWYoZihiKSlhJiZhKCk7ZWxzZXt2YXIgYz1mdW5jdGlvbigpeygiY29tcGxldGUiPT09Yi5yZWFkeVN0YXRlfHxiLnJlYWR5U3RhdGU9PT15KSYmKGIucmVtb3ZlRXZlbnRMaXN0ZW5lcih6LGMpLGcoYSxiKSl9O2IuYWRkRXZlbnRMaXN0ZW5lcih6LGMpfX1mdW5jdGlvbiBoKGEsYil7ZnVuY3Rpb24gYygpe2Y9PWcmJmEmJmEoKX1mdW5jdGlvbiBkKCl7ZisrLGMoKX12YXIgZT1iLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxmPTAsZz1lLmxlbmd0aDtpZihnKWZvcih2YXIgaCxqPTA7Zz5qJiYoaD1lW2pdKTtqKyspaShoKT9kLmNhbGwoaCk6KGguYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZCksaC5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsZCkpO2Vsc2UgYygpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIG8/YS5pbXBvcnQmJiJsb2FkaW5nIiE9PWEuaW1wb3J0LnJlYWR5U3RhdGV8fGEuX19sb2FkZWQ6YS5fX2ltcG9ydFBhcnNlZH1mdW5jdGlvbiBqKGEpe2Zvcih2YXIgYixjPTAsZD1hLmxlbmd0aDtkPmMmJihiPWFbY10pO2MrKylrKGIpJiZsKGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJiJpbXBvcnQiPT09YS5yZWx9ZnVuY3Rpb24gbChhKXt2YXIgYj1hLmltcG9ydDtiP20oe3RhcmdldDphfSk6KGEuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsbSksYS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsbSkpfWZ1bmN0aW9uIG0oYSl7YS50YXJnZXQuX19sb2FkZWQ9ITB9dmFyIG49ImltcG9ydCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksbz1uLHA9YS5mbGFncyxxPSJpbXBvcnQiLHI9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7aWYobyl2YXIgcz17fTtlbHNlIHZhciB0PShhLnhocixhLkxvYWRlciksdT1hLnBhcnNlcixzPXtkb2N1bWVudHM6e30sZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzOiJsaW5rW3JlbD0iK3ErIl0iLGltcG9ydHNQcmVsb2FkU2VsZWN0b3JzOlsibGlua1tyZWw9IitxKyJdIl0uam9pbigiLCIpLGxvYWROb2RlOmZ1bmN0aW9uKGEpe3YuYWRkTm9kZShhKX0sbG9hZFN1YnRyZWU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXJzaGFsTm9kZXMoYSk7di5hZGROb2RlcyhiKX0sbWFyc2hhbE5vZGVzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5sb2FkU2VsZWN0b3JzRm9yTm9kZShhKSl9LGxvYWRTZWxlY3RvcnNGb3JOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudHx8YTtyZXR1cm4gYj09PXI/dGhpcy5kb2N1bWVudFByZWxvYWRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzUHJlbG9hZFNlbGVjdG9yc30sbG9hZGVkOmZ1bmN0aW9uKGEsYyxlKXtpZihwLmxvYWQmJmNvbnNvbGUubG9nKCJsb2FkZWQiLGEsYyksYy5fX3Jlc291cmNlPWUsYihjKSl7dmFyIGY9dGhpcy5kb2N1bWVudHNbYV07Znx8KGY9ZChlLGEpLGYuX19pbXBvcnRMaW5rPWMsdGhpcy5ib290RG9jdW1lbnQoZiksdGhpcy5kb2N1bWVudHNbYV09ZiksYy5pbXBvcnQ9Zn11LnBhcnNlTmV4dCgpfSxib290RG9jdW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5sb2FkU3VidHJlZShhKSx0aGlzLm9ic2VydmUoYSksdS5wYXJzZU5leHQoKX0sbG9hZGVkQWxsOmZ1bmN0aW9uKCl7dS5wYXJzZU5leHQoKX19LHY9bmV3IHQocy5sb2FkZWQuYmluZChzKSxzLmxvYWRlZEFsbC5iaW5kKHMpKTt2YXIgdz17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEhUTUxJbXBvcnRzLmN1cnJlbnRTY3JpcHR8fGRvY3VtZW50LmN1cnJlbnRTY3JpcHR9LGNvbmZpZ3VyYWJsZTohMH07aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCJfY3VycmVudFNjcmlwdCIsdyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9jdXJyZW50U2NyaXB0Iix3KSwhZG9jdW1lbnQuYmFzZVVSSSl7dmFyIHg9e2dldDpmdW5jdGlvbigpe3JldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZn0sY29uZmlndXJhYmxlOiEwfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsImJhc2VVUkkiLHgpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJiYXNlVVJJIix4KX12YXIgeT1IVE1MSW1wb3J0cy5pc0lFPyJjb21wbGV0ZSI6ImludGVyYWN0aXZlIix6PSJyZWFkeXN0YXRlY2hhbmdlIjtvJiZuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspYi5hZGRlZE5vZGVzJiZqKGIuYWRkZWROb2Rlcyl9KS5vYnNlcnZlKGRvY3VtZW50LmhlYWQse2NoaWxkTGlzdDohMH0pLGEuaGFzTmF0aXZlPW4sYS51c2VOYXRpdmU9byxhLmltcG9ydGVyPXMsYS5JTVBPUlRfTElOS19UWVBFPXEsYS5pc0ltcG9ydExvYWRlZD1pLGEuaW1wb3J0TG9hZGVyPXYsYS53aGVuUmVhZHk9ZSxhLndoZW5JbXBvcnRzUmVhZHk9ZX0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYixkPTAsZT1hLmxlbmd0aDtlPmQmJihiPWFbZF0pO2QrKykiY2hpbGRMaXN0Ij09PWIudHlwZSYmYi5hZGRlZE5vZGVzLmxlbmd0aCYmYyhiLmFkZGVkTm9kZXMpfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiLGUsZz0wLGg9YS5sZW5ndGg7aD5nJiYoZT1hW2ddKTtnKyspYj1ifHxlLm93bmVyRG9jdW1lbnQsZChlKSYmZi5sb2FkTm9kZShlKSxlLmNoaWxkcmVuJiZlLmNoaWxkcmVuLmxlbmd0aCYmYyhlLmNoaWxkcmVuKX1mdW5jdGlvbiBkKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZSYmZy5jYWxsKGEsZi5sb2FkU2VsZWN0b3JzRm9yTm9kZShhKSl9ZnVuY3Rpb24gZShhKXtoLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX12YXIgZj0oYS5JTVBPUlRfTElOS19UWVBFLGEuaW1wb3J0ZXIpLGc9KGEucGFyc2VyLEhUTUxFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IpLGg9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoYik7YS5vYnNlcnZlPWUsZi5vYnNlcnZlPWV9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5pbXBvcnRlci5ib290RG9jdW1lbnQoYil9ImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGMuaW5pdEV2ZW50KGEsYi5idWJibGVzPT09ITE/ITE6ITAsYi5jYW5jZWxhYmxlPT09ITE/ITE6ITAsYi5kZXRhaWwpLGN9KTt2YXIgYj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe0hUTUxJbXBvcnRzLnJlYWR5PSEwLEhUTUxJbXBvcnRzLnJlYWR5VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxiLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJIVE1MSW1wb3J0c0xvYWRlZCIse2J1YmJsZXM6ITB9KSl9KSxIVE1MSW1wb3J0cy51c2VOYXRpdmV8fCgiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8ImludGVyYWN0aXZlIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJiF3aW5kb3cuYXR0YWNoRXZlbnQ/YSgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEpKX0oKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxjLGQpe3ZhciBlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7aWYoIWUpZm9yKGU9YS5maXJzdENoaWxkO2UmJmUubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspZT1lLm5leHRTaWJsaW5nO2Zvcig7ZTspYyhlLGQpIT09ITAmJmIoZSxjLGQpLGU9ZS5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhhLGIpe2Zvcih2YXIgYz1hLnNoYWRvd1Jvb3Q7YzspZChjLGIpLGM9Yy5vbGRlclNoYWRvd1Jvb3R9ZnVuY3Rpb24gZChhLGQpe2IoYSxmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8hMDp2b2lkIGMoYSxkKX0pLGMoYSxkKX1mdW5jdGlvbiBlKGEpe3JldHVybiBoKGEpPyhpKGEpLCEwKTp2b2lkIGwoYSl9ZnVuY3Rpb24gZihhKXtkKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSk/ITA6dm9pZCAwfSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gZShhKXx8ZihhKX1mdW5jdGlvbiBoKGIpe2lmKCFiLl9fdXBncmFkZWRfXyYmYi5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgiaXMiKXx8Yi5sb2NhbE5hbWUsZD1hLnJlZ2lzdHJ5W2NdO2lmKGQpcmV0dXJuIEEuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpLCEwfX1mdW5jdGlvbiBpKGEpe2woYSkscihhKSYmZChhLGZ1bmN0aW9uKGEpe2woYSl9KX1mdW5jdGlvbiBqKGEpe2lmKEUucHVzaChhKSwhRCl7RD0hMDt2YXIgYj13aW5kb3cuUGxhdGZvcm0mJndpbmRvdy5QbGF0Zm9ybS5lbmRPZk1pY3JvdGFza3x8c2V0VGltZW91dDtiKGspfX1mdW5jdGlvbiBrKCl7RD0hMTtmb3IodmFyIGEsYj1FLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWEoKTtFPVtdfWZ1bmN0aW9uIGwoYSl7Qz9qKGZ1bmN0aW9uKCl7bShhKX0pOm0oYSl9ZnVuY3Rpb24gbShhKXsoYS5hdHRhY2hlZENhbGxiYWNrfHxhLmRldGFjaGVkQ2FsbGJhY2t8fGEuX191cGdyYWRlZF9fJiZBLmRvbSkmJihBLmRvbSYmY29uc29sZS5ncm91cCgiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSkscihhKSYmKGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKSsxLGEuX19pbnNlcnRlZDwxJiYoYS5fX2luc2VydGVkPTEpLGEuX19pbnNlcnRlZD4xP0EuZG9tJiZjb25zb2xlLndhcm4oImluc2VydGVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuYXR0YWNoZWRDYWxsYmFjayYmKEEuZG9tJiZjb25zb2xlLmxvZygiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSksYS5hdHRhY2hlZENhbGxiYWNrKCkpKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpKQp9ZnVuY3Rpb24gbihhKXtvKGEpLGQoYSxmdW5jdGlvbihhKXtvKGEpfSl9ZnVuY3Rpb24gbyhhKXtDP2ooZnVuY3Rpb24oKXtwKGEpfSk6cChhKX1mdW5jdGlvbiBwKGEpeyhhLmF0dGFjaGVkQ2FsbGJhY2t8fGEuZGV0YWNoZWRDYWxsYmFja3x8YS5fX3VwZ3JhZGVkX18mJkEuZG9tKSYmKEEuZG9tJiZjb25zb2xlLmdyb3VwKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUpLHIoYSl8fChhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCktMSxhLl9faW5zZXJ0ZWQ+MCYmKGEuX19pbnNlcnRlZD0wKSxhLl9faW5zZXJ0ZWQ8MD9BLmRvbSYmY29uc29sZS53YXJuKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuZGV0YWNoZWRDYWxsYmFjayYmYS5kZXRhY2hlZENhbGxiYWNrKCkpLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCkpfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD9TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSk6YX1mdW5jdGlvbiByKGEpe2Zvcih2YXIgYj1hLGM9cShkb2N1bWVudCk7Yjspe2lmKGI9PWMpcmV0dXJuITA7Yj1iLnBhcmVudE5vZGV8fGIuaG9zdH19ZnVuY3Rpb24gcyhhKXtpZihhLnNoYWRvd1Jvb3QmJiFhLnNoYWRvd1Jvb3QuX193YXRjaGVkKXtBLmRvbSYmY29uc29sZS5sb2coIndhdGNoaW5nIHNoYWRvdy1yb290IGZvcjogIixhLmxvY2FsTmFtZSk7Zm9yKHZhciBiPWEuc2hhZG93Um9vdDtiOyl0KGIpLGI9Yi5vbGRlclNoYWRvd1Jvb3R9fWZ1bmN0aW9uIHQoYSl7YS5fX3dhdGNoZWR8fCh3KGEpLGEuX193YXRjaGVkPSEwKX1mdW5jdGlvbiB1KGEpe2lmKEEuZG9tKXt2YXIgYj1hWzBdO2lmKGImJiJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMmJmIuYWRkZWROb2Rlcyl7Zm9yKHZhciBjPWIuYWRkZWROb2Rlc1swXTtjJiZjIT09ZG9jdW1lbnQmJiFjLmhvc3Q7KWM9Yy5wYXJlbnROb2RlO3ZhciBkPWMmJihjLlVSTHx8Yy5fVVJMfHxjLmhvc3QmJmMuaG9zdC5sb2NhbE5hbWUpfHwiIjtkPWQuc3BsaXQoIi8/Iikuc2hpZnQoKS5zcGxpdCgiLyIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoIm11dGF0aW9ucyAoJWQpIFslc10iLGEubGVuZ3RoLGR8fCIiKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7ImNoaWxkTGlzdCI9PT1hLnR5cGUmJihHKGEuYWRkZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmZyhhKX0pLEcoYS5yZW1vdmVkTm9kZXMsZnVuY3Rpb24oYSl7YS5sb2NhbE5hbWUmJm4oYSl9KSl9KSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHYoKXt1KEYudGFrZVJlY29yZHMoKSksaygpfWZ1bmN0aW9uIHcoYSl7Ri5vYnNlcnZlKGEse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9ZnVuY3Rpb24geChhKXt3KGEpfWZ1bmN0aW9uIHkoYSl7QS5kb20mJmNvbnNvbGUuZ3JvdXAoInVwZ3JhZGVEb2N1bWVudDogIixhLmJhc2VVUkkuc3BsaXQoIi8iKS5wb3AoKSksZyhhKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHooYSl7YT1xKGEpO2Zvcih2YXIgYixjPWEucXVlcnlTZWxlY3RvckFsbCgibGlua1tyZWw9IitCKyJdIiksZD0wLGU9Yy5sZW5ndGg7ZT5kJiYoYj1jW2RdKTtkKyspYi5pbXBvcnQmJmIuaW1wb3J0Ll9fcGFyc2VkJiZ6KGIuaW1wb3J0KTt5KGEpfXZhciBBPXdpbmRvdy5sb2dGbGFnc3x8e30sQj13aW5kb3cuSFRNTEltcG9ydHM/SFRNTEltcG9ydHMuSU1QT1JUX0xJTktfVFlQRToibm9uZSIsQz0hd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyPT09d2luZG93LkpzTXV0YXRpb25PYnNlcnZlcjthLmhhc1BvbHlmaWxsTXV0YXRpb25zPUM7dmFyIEQ9ITEsRT1bXSxGPW5ldyBNdXRhdGlvbk9ic2VydmVyKHUpLEc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLklNUE9SVF9MSU5LX1RZUEU9QixhLndhdGNoU2hhZG93PXMsYS51cGdyYWRlRG9jdW1lbnRUcmVlPXosYS51cGdyYWRlQWxsPWcsYS51cGdyYWRlU3VidHJlZT1mLGEuaW5zZXJ0ZWROb2RlPWksYS5vYnNlcnZlRG9jdW1lbnQ9eCxhLnVwZ3JhZGVEb2N1bWVudD15LGEudGFrZVJlY29yZHM9dn0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIsZyl7dmFyIGg9Z3x8e307aWYoIWIpdGhyb3cgbmV3IEVycm9yKCJkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ6IGZpcnN0IGFyZ3VtZW50IGBuYW1lYCBtdXN0IG5vdCBiZSBlbXB0eSIpO2lmKGIuaW5kZXhPZigiLSIpPDApdGhyb3cgbmV3IEVycm9yKCJkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ6IGZpcnN0IGFyZ3VtZW50ICgnbmFtZScpIG11c3QgY29udGFpbiBhIGRhc2ggKCctJykuIEFyZ3VtZW50IHByb3ZpZGVkIHdhcyAnIitTdHJpbmcoYikrIicuIik7aWYoYyhiKSl0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byBleGVjdXRlICdyZWdpc3RlckVsZW1lbnQnIG9uICdEb2N1bWVudCc6IFJlZ2lzdHJhdGlvbiBmYWlsZWQgZm9yIHR5cGUgJyIrU3RyaW5nKGIpKyInLiBUaGUgdHlwZSBuYW1lIGlzIGludmFsaWQuIik7aWYobihiKSl0aHJvdyBuZXcgRXJyb3IoIkR1cGxpY2F0ZURlZmluaXRpb25FcnJvcjogYSB0eXBlIHdpdGggbmFtZSAnIitTdHJpbmcoYikrIicgaXMgYWxyZWFkeSByZWdpc3RlcmVkIik7aWYoIWgucHJvdG90eXBlKXRocm93IG5ldyBFcnJvcigiT3B0aW9ucyBtaXNzaW5nIHJlcXVpcmVkIHByb3RvdHlwZSBwcm9wZXJ0eSIpO3JldHVybiBoLl9fbmFtZT1iLnRvTG93ZXJDYXNlKCksaC5saWZlY3ljbGU9aC5saWZlY3ljbGV8fHt9LGguYW5jZXN0cnk9ZChoLmV4dGVuZHMpLGUoaCksZihoKSxsKGgucHJvdG90eXBlKSxvKGguX19uYW1lLGgpLGguY3Rvcj1wKGgpLGguY3Rvci5wcm90b3R5cGU9aC5wcm90b3R5cGUsaC5wcm90b3R5cGUuY29uc3RydWN0b3I9aC5jdG9yLGEucmVhZHkmJmEudXBncmFkZURvY3VtZW50VHJlZShkb2N1bWVudCksaC5jdG9yfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiPTA7Yjx5Lmxlbmd0aDtiKyspaWYoYT09PXlbYl0pcmV0dXJuITB9ZnVuY3Rpb24gZChhKXt2YXIgYj1uKGEpO3JldHVybiBiP2QoYi5leHRlbmRzKS5jb25jYXQoW2JdKTpbXX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYixjPWEuZXh0ZW5kcyxkPTA7Yj1hLmFuY2VzdHJ5W2RdO2QrKyljPWIuaXMmJmIudGFnO2EudGFnPWN8fGEuX19uYW1lLGMmJihhLmlzPWEuX19uYW1lKX1mdW5jdGlvbiBmKGEpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgYj1IVE1MRWxlbWVudC5wcm90b3R5cGU7aWYoYS5pcyl7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhLnRhZyksZD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYyk7ZD09PWEucHJvdG90eXBlJiYoYj1kKX1mb3IodmFyIGUsZj1hLnByb3RvdHlwZTtmJiZmIT09YjspZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZiksZi5fX3Byb3RvX189ZSxmPWU7YS5uYXRpdmU9Yn19ZnVuY3Rpb24gZyhhKXtyZXR1cm4gaChCKGEudGFnKSxhKX1mdW5jdGlvbiBoKGIsYyl7cmV0dXJuIGMuaXMmJmIuc2V0QXR0cmlidXRlKCJpcyIsYy5pcyksaShiLGMpLGIuX191cGdyYWRlZF9fPSEwLGsoYiksYS5pbnNlcnRlZE5vZGUoYiksYS51cGdyYWRlU3VidHJlZShiKSxifWZ1bmN0aW9uIGkoYSxiKXtPYmplY3QuX19wcm90b19fP2EuX19wcm90b19fPWIucHJvdG90eXBlOihqKGEsYi5wcm90b3R5cGUsYi5uYXRpdmUpLGEuX19wcm90b19fPWIucHJvdG90eXBlKX1mdW5jdGlvbiBqKGEsYixjKXtmb3IodmFyIGQ9e30sZT1iO2UhPT1jJiZlIT09SFRNTEVsZW1lbnQucHJvdG90eXBlOyl7Zm9yKHZhciBmLGc9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSksaD0wO2Y9Z1toXTtoKyspZFtmXXx8KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGYsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGYpKSxkW2ZdPTEpO2U9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfX1mdW5jdGlvbiBrKGEpe2EuY3JlYXRlZENhbGxiYWNrJiZhLmNyZWF0ZWRDYWxsYmFjaygpfWZ1bmN0aW9uIGwoYSl7aWYoIWEuc2V0QXR0cmlidXRlLl9wb2x5ZmlsbGVkKXt2YXIgYj1hLnNldEF0dHJpYnV0ZTthLnNldEF0dHJpYnV0ZT1mdW5jdGlvbihhLGMpe20uY2FsbCh0aGlzLGEsYyxiKX07dmFyIGM9YS5yZW1vdmVBdHRyaWJ1dGU7YS5yZW1vdmVBdHRyaWJ1dGU9ZnVuY3Rpb24oYSl7bS5jYWxsKHRoaXMsYSxudWxsLGMpfSxhLnNldEF0dHJpYnV0ZS5fcG9seWZpbGxlZD0hMH19ZnVuY3Rpb24gbShhLGIsYyl7YT1hLnRvTG93ZXJDYXNlKCk7dmFyIGQ9dGhpcy5nZXRBdHRyaWJ1dGUoYSk7Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGU9dGhpcy5nZXRBdHRyaWJ1dGUoYSk7dGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2smJmUhPT1kJiZ0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhLGQsZSl9ZnVuY3Rpb24gbihhKXtyZXR1cm4gYT96W2EudG9Mb3dlckNhc2UoKV06dm9pZCAwfWZ1bmN0aW9uIG8oYSxiKXt6W2FdPWJ9ZnVuY3Rpb24gcChhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZyhhKX19ZnVuY3Rpb24gcShhLGIsYyl7cmV0dXJuIGE9PT1BP3IoYixjKTpDKGEsYil9ZnVuY3Rpb24gcihhLGIpe3ZhciBjPW4oYnx8YSk7aWYoYyl7aWYoYT09Yy50YWcmJmI9PWMuaXMpcmV0dXJuIG5ldyBjLmN0b3I7aWYoIWImJiFjLmlzKXJldHVybiBuZXcgYy5jdG9yfWlmKGIpe3ZhciBkPXIoYSk7cmV0dXJuIGQuc2V0QXR0cmlidXRlKCJpcyIsYiksZH12YXIgZD1CKGEpO3JldHVybiBhLmluZGV4T2YoIi0iKT49MCYmaShkLEhUTUxFbGVtZW50KSxkfWZ1bmN0aW9uIHMoYSl7aWYoIWEuX191cGdyYWRlZF9fJiZhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKCJpcyIpLGM9bihifHxhLmxvY2FsTmFtZSk7aWYoYyl7aWYoYiYmYy50YWc9PWEubG9jYWxOYW1lKXJldHVybiBoKGEsYyk7aWYoIWImJiFjLmV4dGVuZHMpcmV0dXJuIGgoYSxjKX19fWZ1bmN0aW9uIHQoYil7dmFyIGM9RC5jYWxsKHRoaXMsYik7cmV0dXJuIGEudXBncmFkZUFsbChjKSxjfWF8fChhPXdpbmRvdy5DdXN0b21FbGVtZW50cz17ZmxhZ3M6e319KTt2YXIgdT1hLmZsYWdzLHY9Qm9vbGVhbihkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQpLHc9IXUucmVnaXN0ZXImJnYmJiF3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJighd2luZG93LkhUTUxJbXBvcnRzfHxIVE1MSW1wb3J0cy51c2VOYXRpdmUpO2lmKHcpe3ZhciB4PWZ1bmN0aW9uKCl7fTthLnJlZ2lzdHJ5PXt9LGEudXBncmFkZUVsZW1lbnQ9eCxhLndhdGNoU2hhZG93PXgsYS51cGdyYWRlPXgsYS51cGdyYWRlQWxsPXgsYS51cGdyYWRlU3VidHJlZT14LGEub2JzZXJ2ZURvY3VtZW50PXgsYS51cGdyYWRlRG9jdW1lbnQ9eCxhLnVwZ3JhZGVEb2N1bWVudFRyZWU9eCxhLnRha2VSZWNvcmRzPXgsYS5yZXNlcnZlZFRhZ0xpc3Q9W119ZWxzZXt2YXIgeT1bImFubm90YXRpb24teG1sIiwiY29sb3ItcHJvZmlsZSIsImZvbnQtZmFjZSIsImZvbnQtZmFjZS1zcmMiLCJmb250LWZhY2UtdXJpIiwiZm9udC1mYWNlLWZvcm1hdCIsImZvbnQtZmFjZS1uYW1lIiwibWlzc2luZy1nbHlwaCJdLHo9e30sQT0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsQj1kb2N1bWVudC5jcmVhdGVFbGVtZW50LmJpbmQoZG9jdW1lbnQpLEM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TLmJpbmQoZG9jdW1lbnQpLEQ9Tm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlO2RvY3VtZW50LnJlZ2lzdGVyRWxlbWVudD1iLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQ9cixkb2N1bWVudC5jcmVhdGVFbGVtZW50TlM9cSxOb2RlLnByb3RvdHlwZS5jbG9uZU5vZGU9dCxhLnJlZ2lzdHJ5PXosYS51cGdyYWRlPXN9dmFyIEU7RT1PYmplY3QuX19wcm90b19ffHx3P2Z1bmN0aW9uKGEsYil7cmV0dXJuIGEgaW5zdGFuY2VvZiBifTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hO2M7KXtpZihjPT09Yi5wcm90b3R5cGUpcmV0dXJuITA7Yz1jLl9fcHJvdG9fX31yZXR1cm4hMX0sYS5pbnN0YW5jZW9mPUUsYS5yZXNlcnZlZFRhZ0xpc3Q9eSxkb2N1bWVudC5yZWdpc3Rlcj1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQsYS5oYXNOYXRpdmU9dixhLnVzZU5hdGl2ZT13fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWN9dmFyIGM9YS5JTVBPUlRfTElOS19UWVBFLGQ9e3NlbGVjdG9yczpbImxpbmtbcmVsPSIrYysiXSJdLG1hcDp7bGluazoicGFyc2VMaW5rIn0scGFyc2U6ZnVuY3Rpb24oYSl7aWYoIWEuX19wYXJzZWQpe2EuX19wYXJzZWQ9ITA7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGQuc2VsZWN0b3JzKTtlKGIsZnVuY3Rpb24oYSl7ZFtkLm1hcFthLmxvY2FsTmFtZV1dKGEpfSksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGEpLEN1c3RvbUVsZW1lbnRzLm9ic2VydmVEb2N1bWVudChhKX19LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpJiZ0aGlzLnBhcnNlSW1wb3J0KGEpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXthLmltcG9ydCYmZC5wYXJzZShhLmltcG9ydCl9fSxlPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS5wYXJzZXI9ZCxhLklNUE9SVF9MSU5LX1RZUEU9Y30od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoZG9jdW1lbnQpO3ZhciBhPXdpbmRvdy5QbGF0Zm9ybSYmUGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s/UGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s6c2V0VGltZW91dDthKGZ1bmN0aW9uKCl7Q3VzdG9tRWxlbWVudHMucmVhZHk9ITAsQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lPURhdGUubm93KCksd2luZG93LkhUTUxJbXBvcnRzJiYoQ3VzdG9tRWxlbWVudHMuZWxhcHNlZD1DdXN0b21FbGVtZW50cy5yZWFkeVRpbWUtSFRNTEltcG9ydHMucmVhZHlUaW1lKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiV2ViQ29tcG9uZW50c1JlYWR5Iix7YnViYmxlczohMH0pKSx3aW5kb3cuSFRNTEltcG9ydHMmJihIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vaz1mdW5jdGlvbihhKXtDdXN0b21FbGVtZW50cy5wYXJzZXIucGFyc2UoYS5pbXBvcnQpfSl9KX1pZigiZnVuY3Rpb24iIT10eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50JiYod2luZG93LkN1c3RvbUV2ZW50PWZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1kb2N1bWVudC5jcmVhdGVFdmVudCgiQ3VzdG9tRXZlbnQiKTtyZXR1cm4gYy5pbml0Q3VzdG9tRXZlbnQoYSxCb29sZWFuKGIuYnViYmxlcyksQm9vbGVhbihiLmNhbmNlbGFibGUpLGIuZGV0YWlsKSxjfSx3aW5kb3cuQ3VzdG9tRXZlbnQucHJvdG90eXBlPXdpbmRvdy5FdmVudC5wcm90b3R5cGUpLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHxhLmZsYWdzLmVhZ2VyKWIoKTtlbHNlIGlmKCJpbnRlcmFjdGl2ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlfHx3aW5kb3cuYXR0YWNoRXZlbnR8fHdpbmRvdy5IVE1MSW1wb3J0cyYmIXdpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeSl7dmFyIGM9d2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMucmVhZHk/IkhUTUxJbXBvcnRzTG9hZGVkIjoiRE9NQ29udGVudExvYWRlZCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYyxiKX1lbHNlIGIoKX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbigpe2lmKHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCl7dmFyIGE9WyJ1cGdyYWRlQWxsIiwidXBncmFkZVN1YnRyZWUiLCJvYnNlcnZlRG9jdW1lbnQiLCJ1cGdyYWRlRG9jdW1lbnQiXSxiPXt9O2EuZm9yRWFjaChmdW5jdGlvbihhKXtiW2FdPUN1c3RvbUVsZW1lbnRzW2FdfSksYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe0N1c3RvbUVsZW1lbnRzW2FdPWZ1bmN0aW9uKGMpe3JldHVybiBiW2FdKHdyYXAoYykpfX0pfX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3RoaXMuY2FjaGU9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLm1hcD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMucmVxdWVzdHM9MCx0aGlzLnJlZ2V4PWF9dmFyIGM9YS5lbmRPZk1pY3JvdGFzaztiLnByb3RvdHlwZT17ZXh0cmFjdFVybHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPVtdO2M9dGhpcy5yZWdleC5leGVjKGEpOylkPW5ldyBVUkwoY1sxXSxiKSxlLnB1c2goe21hdGNoZWQ6Y1swXSx1cmw6ZC5ocmVmfSk7cmV0dXJuIGV9LHByb2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZXh0cmFjdFVybHMoYSxiKSxlPWMuYmluZChudWxsLHRoaXMubWFwKTt0aGlzLmZldGNoKGQsZSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGg7aWYoIWMpcmV0dXJuIGIoKTtmb3IodmFyIGQsZSxmLGc9ZnVuY3Rpb24oKXswPT09LS1jJiZiKCl9LGg9MDtjPmg7aCsrKWQ9YVtoXSxmPWQudXJsLGU9dGhpcy5jYWNoZVtmXSxlfHwoZT10aGlzLnhocihmKSxlLm1hdGNoPWQsdGhpcy5jYWNoZVtmXT1lKSxlLndhaXQoZyl9LGhhbmRsZVhocjpmdW5jdGlvbihhKXt2YXIgYj1hLm1hdGNoLGM9Yi51cmwsZD1hLnJlc3BvbnNlfHxhLnJlc3BvbnNlVGV4dHx8IiI7dGhpcy5tYXBbY109ZCx0aGlzLmZldGNoKHRoaXMuZXh0cmFjdFVybHMoZCxjKSxhLnJlc29sdmUpfSx4aHI6ZnVuY3Rpb24oYSl7dGhpcy5yZXF1ZXN0cysrO3ZhciBiPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gYi5vcGVuKCJHRVQiLGEsITApLGIuc2VuZCgpLGIub25lcnJvcj1iLm9ubG9hZD10aGlzLmhhbmRsZVhoci5iaW5kKHRoaXMsYiksYi5wZW5kaW5nPVtdLGIucmVzb2x2ZT1mdW5jdGlvbigpe2Zvcih2YXIgYT1iLnBlbmRpbmcsYz0wO2M8YS5sZW5ndGg7YysrKWFbY10oKTtiLnBlbmRpbmc9bnVsbH0sYi53YWl0PWZ1bmN0aW9uKGEpe2IucGVuZGluZz9iLnBlbmRpbmcucHVzaChhKTpjKGEpfSxifX0sYS5Mb2FkZXI9Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dGhpcy5sb2FkZXI9bmV3IGQodGhpcy5yZWdleCl9dmFyIGM9YS51cmxSZXNvbHZlcixkPWEuTG9hZGVyO2IucHJvdG90eXBlPXtyZWdleDovQGltcG9ydFxzKyg/OnVybCk/WyInXChdKihbXiciXCldKilbJyJcKV0qOy9nLHJlc29sdmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGQpe2ModGhpcy5mbGF0dGVuKGEsYixkKSl9LmJpbmQodGhpcyk7dGhpcy5sb2FkZXIucHJvY2VzcyhhLGIsZCl9LHJlc29sdmVOb2RlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLnRleHRDb250ZW50LGU9ZnVuY3Rpb24oYil7YS50ZXh0Q29udGVudD1iLGMoYSl9O3RoaXMucmVzb2x2ZShkLGIsZSl9LGZsYXR0ZW46ZnVuY3Rpb24oYSxiLGQpe2Zvcih2YXIgZSxmLGcsaD10aGlzLmxvYWRlci5leHRyYWN0VXJscyhhLGIpLGk9MDtpPGgubGVuZ3RoO2krKyllPWhbaV0sZj1lLnVybCxnPWMucmVzb2x2ZUNzc1RleHQoZFtmXSxmLCEwKSxnPXRoaXMuZmxhdHRlbihnLGIsZCksYT1hLnJlcGxhY2UoZS5tYXRjaGVkLGcpO3JldHVybiBhfSxsb2FkU3R5bGVzOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7ZisrLGY9PT1nJiZjJiZjKCl9Zm9yKHZhciBlLGY9MCxnPWEubGVuZ3RoLGg9MDtnPmgmJihlPWFbaF0pO2grKyl0aGlzLnJlc29sdmVOb2RlKGUsYixkKX19O3ZhciBlPW5ldyBiO2Euc3R5bGVSZXNvbHZlcj1lfSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGEoYSl7Zm9yKDthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhLmdldEVsZW1lbnRCeUlkP2E6bnVsbH1mdW5jdGlvbiBiKGEsYixjKXt2YXIgZD1hLmJpbmRpbmdzXztyZXR1cm4gZHx8KGQ9YS5iaW5kaW5nc189e30pLGRbYl0mJmNbYl0uY2xvc2UoKSxkW2JdPWN9ZnVuY3Rpb24gYyhhLGIsYyl7cmV0dXJuIGN9ZnVuY3Rpb24gZChhKXtyZXR1cm4gbnVsbD09YT8iIjphfWZ1bmN0aW9uIGUoYSxiKXthLmRhdGE9ZChiKX1mdW5jdGlvbiBmKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZShhLGIpfX1mdW5jdGlvbiBnKGEsYixjLGUpe3JldHVybiBjP3ZvaWQoZT9hLnNldEF0dHJpYnV0ZShiLCIiKTphLnJlbW92ZUF0dHJpYnV0ZShiKSk6dm9pZCBhLnNldEF0dHJpYnV0ZShiLGQoZSkpfWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtnKGEsYixjLGQpfX1mdW5jdGlvbiBpKGEpe3N3aXRjaChhLnR5cGUpe2Nhc2UiY2hlY2tib3giOnJldHVybiB1O2Nhc2UicmFkaW8iOmNhc2Uic2VsZWN0LW11bHRpcGxlIjpjYXNlInNlbGVjdC1vbmUiOnJldHVybiJjaGFuZ2UiO2Nhc2UicmFuZ2UiOmlmKC9UcmlkZW50fE1TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpcmV0dXJuImNoYW5nZSI7ZGVmYXVsdDpyZXR1cm4iaW5wdXQifX1mdW5jdGlvbiBqKGEsYixjLGUpe2FbYl09KGV8fGQpKGMpfWZ1bmN0aW9uIGsoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtyZXR1cm4gaihhLGIsZCxjKX19ZnVuY3Rpb24gbCgpe31mdW5jdGlvbiBtKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtjLnNldFZhbHVlKGFbYl0pLGMuZGlzY2FyZENoYW5nZXMoKSwoZHx8bCkoYSksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX12YXIgZj1pKGEpO3JldHVybiBhLmFkZEV2ZW50TGlzdGVuZXIoZixlKSx7Y2xvc2U6ZnVuY3Rpb24oKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoZixlKSxjLmNsb3NlKCl9LG9ic2VydmFibGVfOmN9fWZ1bmN0aW9uIG4oYSl7cmV0dXJuIEJvb2xlYW4oYSl9ZnVuY3Rpb24gbyhiKXtpZihiLmZvcm0pcmV0dXJuIHMoYi5mb3JtLmVsZW1lbnRzLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1iJiYiSU5QVVQiPT1hLnRhZ05hbWUmJiJyYWRpbyI9PWEudHlwZSYmYS5uYW1lPT1iLm5hbWV9KTt2YXIgYz1hKGIpO2lmKCFjKXJldHVybltdO3ZhciBkPWMucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSInK2IubmFtZSsnIl0nKTtyZXR1cm4gcyhkLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1iJiYhYS5mb3JtfSl9ZnVuY3Rpb24gcChhKXsiSU5QVVQiPT09YS50YWdOYW1lJiYicmFkaW8iPT09YS50eXBlJiZvKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5iaW5kaW5nc18uY2hlY2tlZDtiJiZiLm9ic2VydmFibGVfLnNldFZhbHVlKCExKX0pfWZ1bmN0aW9uIHEoYSxiKXt2YXIgYyxlLGYsZz1hLnBhcmVudE5vZGU7ZyBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50JiZnLmJpbmRpbmdzXyYmZy5iaW5kaW5nc18udmFsdWUmJihjPWcsZT1jLmJpbmRpbmdzXy52YWx1ZSxmPWMudmFsdWUpLGEudmFsdWU9ZChiKSxjJiZjLnZhbHVlIT1mJiYoZS5vYnNlcnZhYmxlXy5zZXRWYWx1ZShjLnZhbHVlKSxlLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cShhLGIpfX12YXIgcz1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZmlsdGVyKTtOb2RlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYil7Y29uc29sZS5lcnJvcigiVW5oYW5kbGVkIGJpbmRpbmcgdG8gTm9kZTogIix0aGlzLGEsYil9LE5vZGUucHJvdG90eXBlLmJpbmRGaW5pc2hlZD1mdW5jdGlvbigpe307dmFyIHQ9YztPYmplY3QuZGVmaW5lUHJvcGVydHkoUGxhdGZvcm0sImVuYWJsZUJpbmRpbmdzUmVmbGVjdGlvbiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0PT09Yn0sc2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0PWE/YjpjLGF9LGNvbmZpZ3VyYWJsZTohMH0pLFRleHQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe2lmKCJ0ZXh0Q29udGVudCIhPT1hKXJldHVybiBOb2RlLnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYoYylyZXR1cm4gZSh0aGlzLGIpO3ZhciBkPWI7cmV0dXJuIGUodGhpcyxkLm9wZW4oZih0aGlzKSkpLHQodGhpcyxhLGQpfSxFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iPyI9PWFbYS5sZW5ndGgtMV07aWYoZCYmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLGE9YS5zbGljZSgwLC0xKSksYylyZXR1cm4gZyh0aGlzLGEsZCxiKTt2YXIgZT1iO3JldHVybiBnKHRoaXMsYSxkLGUub3BlbihoKHRoaXMsYSxkKSkpLHQodGhpcyxhLGUpfTt2YXIgdTshZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiPWEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSk7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJjaGVja2JveCIpO3ZhciBjLGQ9MDtiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjbGljayJ9KSxiLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24oKXtkKyssYz1jfHwiY2hhbmdlIn0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7ZS5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCEwLHdpbmRvdywwLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsKSxiLmRpc3BhdGNoRXZlbnQoZSksdT0xPT1kPyJjaGFuZ2UiOmN9KCksSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZSl7aWYoInZhbHVlIiE9PWEmJiJjaGVja2VkIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGMsZSk7dGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSk7dmFyIGY9ImNoZWNrZWQiPT1hP246ZCxnPSJjaGVja2VkIj09YT9wOmw7aWYoZSlyZXR1cm4gaih0aGlzLGEsYyxmKTt2YXIgaD1jLGk9bSh0aGlzLGEsaCxnKTtyZXR1cm4gaih0aGlzLGEsaC5vcGVuKGsodGhpcyxhLGYpKSxmKSxiKHRoaXMsYSxpKX0sSFRNTFRleHRBcmVhRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInZhbHVlIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIiksYylyZXR1cm4gaih0aGlzLCJ2YWx1ZSIsYik7dmFyIGU9YixmPW0odGhpcywidmFsdWUiLGUpO3JldHVybiBqKHRoaXMsInZhbHVlIixlLm9wZW4oayh0aGlzLCJ2YWx1ZSIsZCkpKSx0KHRoaXMsYSxmKX0sSFRNTE9wdGlvbkVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe2lmKCJ2YWx1ZSIhPT1hKXJldHVybiBIVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpO2lmKHRoaXMucmVtb3ZlQXR0cmlidXRlKCJ2YWx1ZSIpLGMpcmV0dXJuIHEodGhpcyxiKTt2YXIgZD1iLGU9bSh0aGlzLCJ2YWx1ZSIsZCk7cmV0dXJuIHEodGhpcyxkLm9wZW4ocih0aGlzKSkpLHQodGhpcyxhLGUpfSxIVE1MU2VsZWN0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZCl7aWYoInNlbGVjdGVkaW5kZXgiPT09YSYmKGE9InNlbGVjdGVkSW5kZXgiKSwic2VsZWN0ZWRJbmRleCIhPT1hJiYidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxkKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSxkKXJldHVybiBqKHRoaXMsYSxjKTt2YXIgZT1jLGY9bSh0aGlzLGEsZSk7cmV0dXJuIGoodGhpcyxhLGUub3BlbihrKHRoaXMsYSkpKSxiKHRoaXMsYSxmKX19KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQXNzZXJ0aW9uIGZhaWxlZCIpfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiO2I9YS5wYXJlbnROb2RlOylhPWI7cmV0dXJuIGF9ZnVuY3Rpb24gZChhLGIpe2lmKGIpe2Zvcih2YXIgZCxlPSIjIitiOyFkJiYoYT1jKGEpLGEucHJvdG9Db250ZW50Xz9kPWEucHJvdG9Db250ZW50Xy5xdWVyeVNlbGVjdG9yKGUpOmEuZ2V0RWxlbWVudEJ5SWQmJihkPWEuZ2V0RWxlbWVudEJ5SWQoYikpLCFkJiZhLnRlbXBsYXRlQ3JlYXRvcl8pOylhPWEudGVtcGxhdGVDcmVhdG9yXztyZXR1cm4gZH19ZnVuY3Rpb24gZShhKXtyZXR1cm4idGVtcGxhdGUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI9PWEubmFtZXNwYWNlVVJJfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIlRFTVBMQVRFIj09YS50YWdOYW1lJiYiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI9PWEubmFtZXNwYWNlVVJJfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIEJvb2xlYW4oTFthLnRhZ05hbWVdJiZhLmhhc0F0dHJpYnV0ZSgidGVtcGxhdGUiKSl9ZnVuY3Rpb24gaChhKXtyZXR1cm4gdm9pZCAwPT09YS5pc1RlbXBsYXRlXyYmKGEuaXNUZW1wbGF0ZV89IlRFTVBMQVRFIj09YS50YWdOYW1lfHxnKGEpKSxhLmlzVGVtcGxhdGVffWZ1bmN0aW9uIGkoYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoTik7aChhKSYmYihhKSxHKGMsYil9ZnVuY3Rpb24gaihhKXtmdW5jdGlvbiBiKGEpe0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSl8fGooYS5jb250ZW50KX1pKGEsYil9ZnVuY3Rpb24gayhhLGIpe09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSl9ZnVuY3Rpb24gbChhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7aWYoIWIuZGVmYXVsdFZpZXcpcmV0dXJuIGI7dmFyIGM9Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfO2lmKCFjKXtmb3IoYz1iLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yy5sYXN0Q2hpbGQ7KWMucmVtb3ZlQ2hpbGQoYy5sYXN0Q2hpbGQpO2IudGVtcGxhdGVDb250ZW50c093bmVyXz1jfXJldHVybiBjfWZ1bmN0aW9uIG0oYSl7aWYoIWEuc3RhZ2luZ0RvY3VtZW50Xyl7dmFyIGI9YS5vd25lckRvY3VtZW50O2lmKCFiLnN0YWdpbmdEb2N1bWVudF8pe2Iuc3RhZ2luZ0RvY3VtZW50Xz1iLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIiksYi5zdGFnaW5nRG9jdW1lbnRfLmlzU3RhZ2luZ0RvY3VtZW50PSEwO3ZhciBjPWIuc3RhZ2luZ0RvY3VtZW50Xy5jcmVhdGVFbGVtZW50KCJiYXNlIik7Yy5ocmVmPWRvY3VtZW50LmJhc2VVUkksYi5zdGFnaW5nRG9jdW1lbnRfLmhlYWQuYXBwZW5kQ2hpbGQoYyksYi5zdGFnaW5nRG9jdW1lbnRfLnN0YWdpbmdEb2N1bWVudF89Yi5zdGFnaW5nRG9jdW1lbnRffWEuc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF99cmV0dXJuIGEuc3RhZ2luZ0RvY3VtZW50X31mdW5jdGlvbiBuKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO0tbZS5uYW1lXSYmKCJ0ZW1wbGF0ZSIhPT1lLm5hbWUmJmIuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpKX1yZXR1cm4gYn1mdW5jdGlvbiBvKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO2Iuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpfXJldHVybiBhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksYn1mdW5jdGlvbiBwKGEsYixjKXt2YXIgZD1hLmNvbnRlbnQ7aWYoYylyZXR1cm4gdm9pZCBkLmFwcGVuZENoaWxkKGIpO2Zvcih2YXIgZTtlPWIuZmlyc3RDaGlsZDspZC5hcHBlbmRDaGlsZChlKX1mdW5jdGlvbiBxKGEpe1A/YS5fX3Byb3RvX189SFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU6ayhhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKX1mdW5jdGlvbiByKGEpe2Euc2V0TW9kZWxGbl98fChhLnNldE1vZGVsRm5fPWZ1bmN0aW9uKCl7YS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMTt2YXIgYj16KGEsYS5kZWxlZ2F0ZV8mJmEuZGVsZWdhdGVfLnByZXBhcmVCaW5kaW5nKTt3KGEsYixhLm1vZGVsXyl9KSxhLnNldE1vZGVsRm5TY2hlZHVsZWRffHwoYS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMCxPYnNlcnZlci5ydW5FT01fKGEuc2V0TW9kZWxGbl8pKX1mdW5jdGlvbiBzKGEsYixjLGQpe2lmKGEmJmEubGVuZ3RoKXtmb3IodmFyIGUsZj1hLmxlbmd0aCxnPTAsaD0wLGk9MCxqPSEwO2Y+aDspe3ZhciBnPWEuaW5kZXhPZigie3siLGgpLGs9YS5pbmRleE9mKCJbWyIsaCksbD0hMSxtPSJ9fSI7aWYoaz49MCYmKDA+Z3x8Zz5rKSYmKGc9ayxsPSEwLG09Il1dIiksaT0wPmc/LTE6YS5pbmRleE9mKG0sZysyKSwwPmkpe2lmKCFlKXJldHVybjtlLnB1c2goYS5zbGljZShoKSk7YnJlYWt9ZT1lfHxbXSxlLnB1c2goYS5zbGljZShoLGcpKTt2YXIgbj1hLnNsaWNlKGcrMixpKS50cmltKCk7ZS5wdXNoKGwpLGo9aiYmbDt2YXIgbz1kJiZkKG4sYixjKTtlLnB1c2gobnVsbD09bz9QYXRoLmdldChuKTpudWxsKSxlLnB1c2gobyksaD1pKzJ9cmV0dXJuIGg9PT1mJiZlLnB1c2goIiIpLGUuaGFzT25lUGF0aD01PT09ZS5sZW5ndGgsZS5pc1NpbXBsZVBhdGg9ZS5oYXNPbmVQYXRoJiYiIj09ZVswXSYmIiI9PWVbNF0sZS5vbmx5T25lVGltZT1qLGUuY29tYmluYXRvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9ZVswXSxjPTE7YzxlLmxlbmd0aDtjKz00KXt2YXIgZD1lLmhhc09uZVBhdGg/YTphWyhjLTEpLzRdO3ZvaWQgMCE9PWQmJihiKz1kKSxiKz1lW2MrM119cmV0dXJuIGJ9LGV9fWZ1bmN0aW9uIHQoYSxiLGMsZCl7aWYoYi5oYXNPbmVQYXRoKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMCk6YlsyXS5nZXRWYWx1ZUZyb20oZCk7cmV0dXJuIGIuaXNTaW1wbGVQYXRoP2Y6Yi5jb21iaW5hdG9yKGYpfWZvcih2YXIgZz1bXSxoPTE7aDxiLmxlbmd0aDtoKz00KXt2YXIgZT1iW2grMl07Z1soaC0xKS80XT1lP2UoZCxjKTpiW2grMV0uZ2V0VmFsdWVGcm9tKGQpfXJldHVybiBiLmNvbWJpbmF0b3IoZyl9ZnVuY3Rpb24gdShhLGIsYyxkKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMSk6bmV3IFBhdGhPYnNlcnZlcihkLGJbMl0pO3JldHVybiBiLmlzU2ltcGxlUGF0aD9mOm5ldyBPYnNlcnZlclRyYW5zZm9ybShmLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdihhLGIsYyxkKXtpZihiLm9ubHlPbmVUaW1lKXJldHVybiB0KGEsYixjLGQpO2lmKGIuaGFzT25lUGF0aClyZXR1cm4gdShhLGIsYyxkKTtmb3IodmFyIGU9bmV3IENvbXBvdW5kT2JzZXJ2ZXIsZj0xO2Y8Yi5sZW5ndGg7Zis9NCl7dmFyIGc9YltmXSxoPWJbZisyXTtpZihoKXt2YXIgaT1oKGQsYyxnKTtnP2UuYWRkUGF0aChpKTplLmFkZE9ic2VydmVyKGkpfWVsc2V7dmFyIGo9YltmKzFdO2c/ZS5hZGRQYXRoKGouZ2V0VmFsdWVGcm9tKGQpKTplLmFkZFBhdGgoZCxqKX19cmV0dXJuIG5ldyBPYnNlcnZlclRyYW5zZm9ybShlLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdyhhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGIubGVuZ3RoO2UrPTIpe3ZhciBmPWJbZV0sZz1iW2UrMV0saD12KGYsZyxhLGMpLGk9YS5iaW5kKGYsaCxnLm9ubHlPbmVUaW1lKTtpJiZkJiZkLnB1c2goaSl9aWYoYS5iaW5kRmluaXNoZWQoKSxiLmlzVGVtcGxhdGUpe2EubW9kZWxfPWM7dmFyIGo9YS5wcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfKGIpO2QmJmomJmQucHVzaChqKX19ZnVuY3Rpb24geChhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoYik7cmV0dXJuIHMoIiI9PWQ/Int7fX0iOmQsYixhLGMpfWZ1bmN0aW9uIHkoYSxjKXtiKGEpO2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmF0dHJpYnV0ZXMubGVuZ3RoO2UrKyl7Zm9yKHZhciBmPWEuYXR0cmlidXRlc1tlXSxnPWYubmFtZSxpPWYudmFsdWU7Il8iPT09Z1swXTspZz1nLnN1YnN0cmluZygxKTtpZighaChhKXx8ZyE9PUomJmchPT1IJiZnIT09SSl7dmFyIGo9cyhpLGcsYSxjKTtqJiZkLnB1c2goZyxqKX19cmV0dXJuIGgoYSkmJihkLmlzVGVtcGxhdGU9ITAsZC5pZj14KGEsSixjKSxkLmJpbmQ9eChhLEgsYyksZC5yZXBlYXQ9eChhLEksYyksIWQuaWZ8fGQuYmluZHx8ZC5yZXBlYXR8fChkLmJpbmQ9cygie3t9fSIsSCxhLGMpKSksZH1mdW5jdGlvbiB6KGEsYil7aWYoYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiB5KGEsYik7aWYoYS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFKXt2YXIgYz1zKGEuZGF0YSwidGV4dENvbnRlbnQiLGEsYik7aWYoYylyZXR1cm5bInRleHRDb250ZW50IixjXX1yZXR1cm5bXX1mdW5jdGlvbiBBKGEsYixjLGQsZSxmLGcpe2Zvcih2YXIgaD1iLmFwcGVuZENoaWxkKGMuaW1wb3J0Tm9kZShhLCExKSksaT0wLGo9YS5maXJzdENoaWxkO2o7aj1qLm5leHRTaWJsaW5nKUEoaixoLGMsZC5jaGlsZHJlbltpKytdLGUsZixnKTtyZXR1cm4gZC5pc1RlbXBsYXRlJiYoSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShoLGEpLGYmJmguc2V0RGVsZWdhdGVfKGYpKSx3KGgsZCxlLGcpLGh9ZnVuY3Rpb24gQihhLGIpe3ZhciBjPXooYSxiKTtjLmNoaWxkcmVuPXt9O2Zvcih2YXIgZD0wLGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWMuY2hpbGRyZW5bZCsrXT1CKGUsYik7cmV0dXJuIGN9ZnVuY3Rpb24gQyhhKXt2YXIgYj1hLmlkXztyZXR1cm4gYnx8KGI9YS5pZF89UysrKSxifWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1DKGEpO2lmKGIpe3ZhciBkPWIuYmluZGluZ01hcHNbY107cmV0dXJuIGR8fChkPWIuYmluZGluZ01hcHNbY109QihhLGIucHJlcGFyZUJpbmRpbmcpfHxbXSksZH12YXIgZD1hLmJpbmRpbmdNYXBfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdNYXBfPUIoYSx2b2lkIDApfHxbXSksZH1mdW5jdGlvbiBFKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMuaW5zdGFuY2VzPVtdLHRoaXMuZGVwcz12b2lkIDAsdGhpcy5pdGVyYXRlZFZhbHVlPVtdLHRoaXMucHJlc2VudFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwfXZhciBGLEc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP0Y9YS5NYXA6KEY9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LEYucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSk7ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBIPSJiaW5kIixJPSJyZXBlYXQiLEo9ImlmIixLPXt0ZW1wbGF0ZTohMCxyZXBlYXQ6ITAsYmluZDohMCxyZWY6ITB9LEw9e1RIRUFEOiEwLFRCT0RZOiEwLFRGT09UOiEwLFRIOiEwLFRSOiEwLFREOiEwLENPTEdST1VQOiEwLENPTDohMCxDQVBUSU9OOiEwLE9QVElPTjohMCxPUFRHUk9VUDohMH0sTT0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7TSYmIWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKSxiPWEuY29udGVudC5vd25lckRvY3VtZW50LGM9Yi5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImh0bWwiKSksZD1jLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiaGVhZCIpKSxlPWIuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2UuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGQuYXBwZW5kQ2hpbGQoZSl9KCk7dmFyIE49InRlbXBsYXRlLCAiK09iamVjdC5rZXlzKEwpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpKyJbdGVtcGxhdGVdIn0pLmpvaW4oIiwgIik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtqKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksTXx8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIE8sUD0iX19wcm90b19fImlue307ImZ1bmN0aW9uIj09dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJihPPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udGFyZ2V0LnJlZkNoYW5nZWRfKCl9KSksSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGQ9YTtkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBoPWYoZCkmJk0saT1oLGs9IWgsbT0hMTtpZihofHwoZyhkKT8oYighYyksZD1uKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsaD1NLG09ITApOmUoZCkmJihkPW8oYSksZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxoPU0pKSwhaCl7cShkKTt2YXIgcj1sKGQpO2QuY29udGVudF89ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9cmV0dXJuIGM/ZC5pbnN0YW5jZVJlZl89YzprP3AoZCxhLG0pOmkmJmooZC5jb250ZW50KSwhMH0sSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXA9ajt2YXIgUT1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsUj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudF99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtNfHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShRLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixSKSksayhIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSx7YmluZDpmdW5jdGlvbihhLGIsYyl7aWYoInJlZiIhPWEpcmV0dXJuIEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTt2YXIgZD10aGlzLGU9Yz9iOmIub3BlbihmdW5jdGlvbihhKXtkLnNldEF0dHJpYnV0ZSgicmVmIixhKSxkLnJlZkNoYW5nZWRfKCl9KTtyZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUoInJlZiIsZSksdGhpcy5yZWZDaGFuZ2VkXygpLGM/dm9pZCAwOih0aGlzLmJpbmRpbmdzXz90aGlzLmJpbmRpbmdzXy5yZWY9Yjp0aGlzLmJpbmRpbmdzXz17cmVmOmJ9LGIpfSxwcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yXyYmdGhpcy5pdGVyYXRvcl8uY2xvc2VEZXBzKCksYS5pZnx8YS5iaW5kfHxhLnJlcGVhdD8odGhpcy5pdGVyYXRvcl98fCh0aGlzLml0ZXJhdG9yXz1uZXcgRSh0aGlzKSksdGhpcy5pdGVyYXRvcl8udXBkYXRlRGVwZW5kZW5jaWVzKGEsdGhpcy5tb2RlbF8pLE8mJk8ub2JzZXJ2ZSh0aGlzLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInJlZiJdfSksdGhpcy5pdGVyYXRvcl8pOnZvaWQodGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCkpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihhLGIsYyl7Yj9jPXRoaXMubmV3RGVsZWdhdGVfKGIpOmN8fChjPXRoaXMuZGVsZWdhdGVfKSx0aGlzLnJlZkNvbnRlbnRffHwodGhpcy5yZWZDb250ZW50Xz10aGlzLnJlZl8uY29udGVudCk7dmFyIGQ9dGhpcy5yZWZDb250ZW50XztpZihudWxsPT09ZC5maXJzdENoaWxkKXJldHVybiBUO3ZhciBlPUQoZCxjKSxmPW0odGhpcyksZz1mLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtnLnRlbXBsYXRlQ3JlYXRvcl89dGhpcyxnLnByb3RvQ29udGVudF89ZCxnLmJpbmRpbmdzXz1bXSxnLnRlcm1pbmF0b3JfPW51bGw7Zm9yKHZhciBoPWcudGVtcGxhdGVJbnN0YW5jZV89e2ZpcnN0Tm9kZTpudWxsLGxhc3ROb2RlOm51bGwsbW9kZWw6YX0saT0wLGo9ITEsaz1kLmZpcnN0Q2hpbGQ7aztrPWsubmV4dFNpYmxpbmcpe251bGw9PT1rLm5leHRTaWJsaW5nJiYoaj0hMCk7dmFyIGw9QShrLGcsZixlLmNoaWxkcmVuW2krK10sYSxjLGcuYmluZGluZ3NfKTtsLnRlbXBsYXRlSW5zdGFuY2VfPWgsaiYmKGcudGVybWluYXRvcl89bCl9cmV0dXJuIGguZmlyc3ROb2RlPWcuZmlyc3RDaGlsZCxoLmxhc3ROb2RlPWcubGFzdENoaWxkLGcudGVtcGxhdGVDcmVhdG9yXz12b2lkIDAsZy5wcm90b0NvbnRlbnRfPXZvaWQgMCxnfSxnZXQgbW9kZWwoKXtyZXR1cm4gdGhpcy5tb2RlbF99LHNldCBtb2RlbChhKXt0aGlzLm1vZGVsXz1hLHIodGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZV8mJnRoaXMuZGVsZWdhdGVfLnJhd30scmVmQ2hhbmdlZF86ZnVuY3Rpb24oKXt0aGlzLml0ZXJhdG9yXyYmdGhpcy5yZWZDb250ZW50XyE9PXRoaXMucmVmXy5jb250ZW50JiYodGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8udmFsdWVDaGFuZ2VkKCksdGhpcy5pdGVyYXRvcl8udXBkYXRlSXRlcmF0ZWRWYWx1ZSh0aGlzLml0ZXJhdG9yXy5nZXRVcGRhdGVkVmFsdWUoKSkpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubW9kZWxfPXZvaWQgMCx0aGlzLmRlbGVnYXRlXz12b2lkIDAsdGhpcy5iaW5kaW5nc18mJnRoaXMuYmluZGluZ3NfLnJlZiYmdGhpcy5iaW5kaW5nc18ucmVmLmNsb3NlKCksdGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCl9LHNldERlbGVnYXRlXzpmdW5jdGlvbihhKXt0aGlzLmRlbGVnYXRlXz1hLHRoaXMuYmluZGluZ01hcF89dm9pZCAwLHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8uaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlTW9kZWxGbl89dm9pZCAwKX0sbmV3RGVsZWdhdGVfOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YSYmYVtiXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYylyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShhLGFyZ3VtZW50cyl9fWlmKGEpcmV0dXJue2JpbmRpbmdNYXBzOnt9LHJhdzphLHByZXBhcmVCaW5kaW5nOmIoInByZXBhcmVCaW5kaW5nIikscHJlcGFyZUluc3RhbmNlTW9kZWw6YigicHJlcGFyZUluc3RhbmNlTW9kZWwiKSxwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6YigicHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkIil9fSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe2lmKHRoaXMuZGVsZWdhdGVfKXRocm93IEVycm9yKCJUZW1wbGF0ZSBtdXN0IGJlIGNsZWFyZWQgYmVmb3JlIGEgbmV3IGJpbmRpbmdEZWxlZ2F0ZSBjYW4gYmUgYXNzaWduZWQiKTt0aGlzLnNldERlbGVnYXRlXyh0aGlzLm5ld0RlbGVnYXRlXyhhKSl9LGdldCByZWZfKCl7dmFyIGE9ZCh0aGlzLHRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKSk7aWYoYXx8KGE9dGhpcy5pbnN0YW5jZVJlZl8pLCFhKXJldHVybiB0aGlzO3ZhciBiPWEucmVmXztyZXR1cm4gYj9iOmF9fSk7dmFyIFM9MTtPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlbXBsYXRlSW5zdGFuY2VfO3JldHVybiBhP2E6dGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS50ZW1wbGF0ZUluc3RhbmNlOnZvaWQgMH19KTt2YXIgVD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7VC5iaW5kaW5nc189W10sVC50ZXJtaW5hdG9yXz1udWxsLEUucHJvdG90eXBlPXtjbG9zZURlcHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRlcHM7YSYmKGEuaWZPbmVUaW1lPT09ITEmJmEuaWZWYWx1ZS5jbG9zZSgpLGEub25lVGltZT09PSExJiZhLnZhbHVlLmNsb3NlKCkpfSx1cGRhdGVEZXBlbmRlbmNpZXM6ZnVuY3Rpb24oYSxiKXt0aGlzLmNsb3NlRGVwcygpO3ZhciBjPXRoaXMuZGVwcz17fSxkPXRoaXMudGVtcGxhdGVFbGVtZW50XyxlPSEwO2lmKGEuaWYpe2lmKGMuaGFzSWY9ITAsYy5pZk9uZVRpbWU9YS5pZi5vbmx5T25lVGltZSxjLmlmVmFsdWU9dihKLGEuaWYsZCxiKSxlPWMuaWZWYWx1ZSxjLmlmT25lVGltZSYmIWUpcmV0dXJuIHZvaWQgdGhpcy52YWx1ZUNoYW5nZWQoKTtjLmlmT25lVGltZXx8KGU9ZS5vcGVuKHRoaXMudXBkYXRlSWZWYWx1ZSx0aGlzKSl9YS5yZXBlYXQ/KGMucmVwZWF0PSEwLGMub25lVGltZT1hLnJlcGVhdC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSSxhLnJlcGVhdCxkLGIpKTooYy5yZXBlYXQ9ITEsYy5vbmVUaW1lPWEuYmluZC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSCxhLmJpbmQsZCxiKSk7dmFyIGY9Yy52YWx1ZTtyZXR1cm4gYy5vbmVUaW1lfHwoZj1mLm9wZW4odGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlLHRoaXMpKSxlP3ZvaWQgdGhpcy51cGRhdGVWYWx1ZShmKTp2b2lkIHRoaXMudmFsdWVDaGFuZ2VkKCl9LGdldFVwZGF0ZWRWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZGVwcy52YWx1ZTtyZXR1cm4gdGhpcy5kZXBzLm9uZVRpbWV8fChhPWEuZGlzY2FyZENoYW5nZXMoKSksYX0sdXBkYXRlSWZWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT92b2lkIHRoaXMudXBkYXRlVmFsdWUodGhpcy5nZXRVcGRhdGVkVmFsdWUoKSk6dm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfSx1cGRhdGVJdGVyYXRlZFZhbHVlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZGVwcy5oYXNJZil7dmFyIGI9dGhpcy5kZXBzLmlmVmFsdWU7aWYodGhpcy5kZXBzLmlmT25lVGltZXx8KGI9Yi5kaXNjYXJkQ2hhbmdlcygpKSwhYilyZXR1cm4gdm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfXRoaXMudXBkYXRlVmFsdWUoYSl9LHVwZGF0ZVZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuZGVwcy5yZXBlYXR8fChhPVthXSk7dmFyIGI9dGhpcy5kZXBzLnJlcGVhdCYmIXRoaXMuZGVwcy5vbmVUaW1lJiZBcnJheS5pc0FycmF5KGEpO3RoaXMudmFsdWVDaGFuZ2VkKGEsYil9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIpe0FycmF5LmlzQXJyYXkoYSl8fChhPVtdKSxhIT09dGhpcy5pdGVyYXRlZFZhbHVlJiYodGhpcy51bm9ic2VydmUoKSx0aGlzLnByZXNlbnRWYWx1ZT1hLGImJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5wcmVzZW50VmFsdWUpLHRoaXMuYXJyYXlPYnNlcnZlci5vcGVuKHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSksdGhpcy5oYW5kbGVTcGxpY2VzKEFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcyh0aGlzLnByZXNlbnRWYWx1ZSx0aGlzLml0ZXJhdGVkVmFsdWUpKSl9LGdldExhc3RJbnN0YW5jZU5vZGU6ZnVuY3Rpb24oYSl7aWYoLTE9PWEpcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Xzt2YXIgYj10aGlzLmluc3RhbmNlc1thXSxjPWIudGVybWluYXRvcl87aWYoIWMpcmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpO2lmKGMubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8dGhpcy50ZW1wbGF0ZUVsZW1lbnRfPT09YylyZXR1cm4gYzt2YXIgZD1jLml0ZXJhdG9yXztyZXR1cm4gZD9kLmdldExhc3RUZW1wbGF0ZU5vZGUoKTpjfSxnZXRMYXN0VGVtcGxhdGVOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZSh0aGlzLmluc3RhbmNlcy5sZW5ndGgtMSl9LGluc2VydEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYS0xKSxkPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlO3RoaXMuaW5zdGFuY2VzLnNwbGljZShhLDAsYiksZC5pbnNlcnRCZWZvcmUoYixjLm5leHRTaWJsaW5nKX0sZXh0cmFjdEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpLGM9dGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEpLGQ9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGUsZT10aGlzLmluc3RhbmNlcy5zcGxpY2UoYSwxKVswXTtjIT09Yjspe3ZhciBmPWIubmV4dFNpYmxpbmc7Zj09YyYmKGM9YiksZS5hcHBlbmRDaGlsZChkLnJlbW92ZUNoaWxkKGYpKX1yZXR1cm4gZX0sZ2V0RGVsZWdhdGVGbjpmdW5jdGlvbihhKXtyZXR1cm4gYT1hJiZhKHRoaXMudGVtcGxhdGVFbGVtZW50XyksImZ1bmN0aW9uIj09dHlwZW9mIGE/YTpudWxsfSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCYmYS5sZW5ndGgpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZighYi5wYXJlbnROb2RlKXJldHVybiB2b2lkIHRoaXMuY2xvc2UoKTtBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcyh0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5wcmVzZW50VmFsdWUsYSk7dmFyIGM9Yi5kZWxlZ2F0ZV87dm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPXRoaXMuZ2V0RGVsZWdhdGVGbihjJiZjLnByZXBhcmVJbnN0YW5jZU1vZGVsKSksdm9pZCAwPT09dGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmKHRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dGhpcy5nZXREZWxlZ2F0ZUZuKGMmJmMucHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkKSk7Zm9yKHZhciBkPW5ldyBGLGU9MCxmPTA7ZjxhLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1hW2ZdLGg9Zy5yZW1vdmVkLGk9MDtpPGgubGVuZ3RoO2krKyl7dmFyIGo9aFtpXSxrPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoZy5pbmRleCtlKTtrIT09VCYmZC5zZXQoaixrKX1lLT1nLmFkZGVkQ291bnR9Zm9yKHZhciBmPTA7ZjxhLmxlbmd0aDtmKyspZm9yKHZhciBnPWFbZl0sbD1nLmluZGV4O2w8Zy5pbmRleCtnLmFkZGVkQ291bnQ7bCsrKXt2YXIgaj10aGlzLml0ZXJhdGVkVmFsdWVbbF0saz1kLmdldChqKTtrP2QuZGVsZXRlKGopOih0aGlzLmluc3RhbmNlTW9kZWxGbl8mJihqPXRoaXMuaW5zdGFuY2VNb2RlbEZuXyhqKSksaz12b2lkIDA9PT1qP1Q6Yi5jcmVhdGVJbnN0YW5jZShqLHZvaWQgMCxjKSksdGhpcy5pbnNlcnRJbnN0YW5jZUF0KGwsayl9ZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKGEpfSx0aGlzKSx0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fJiZ0aGlzLnJlcG9ydEluc3RhbmNlc01vdmVkKGEpfX0scmVwb3J0SW5zdGFuY2VNb3ZlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmluc3RhbmNlc1thXTtiIT09VCYmdGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyhiLnRlbXBsYXRlSW5zdGFuY2VfLGEpfSxyZXBvcnRJbnN0YW5jZXNNb3ZlZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdO2lmKDAhPWMpZm9yKDtiPGUuaW5kZXg7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKys7ZWxzZSBiPWUuaW5kZXg7Zm9yKDtiPGUuaW5kZXgrZS5hZGRlZENvdW50Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2MrPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RofWlmKDAhPWMpZm9yKHZhciBmPXRoaXMuaW5zdGFuY2VzLmxlbmd0aDtmPmI7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKyt9LGNsb3NlSW5zdGFuY2VCaW5kaW5nczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5iaW5kaW5nc18sYz0wO2M8Yi5sZW5ndGg7YysrKWJbY10uY2xvc2UoKX0sdW5vYnNlcnZlOmZ1bmN0aW9uKCl7dGhpcy5hcnJheU9ic2VydmVyJiYodGhpcy5hcnJheU9ic2VydmVyLmNsb3NlKCksdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXt0aGlzLnVub2JzZXJ2ZSgpO2Zvcih2YXIgYT0wO2E8dGhpcy5pbnN0YW5jZXMubGVuZ3RoO2ErKyl0aGlzLmNsb3NlSW5zdGFuY2VCaW5kaW5ncyh0aGlzLmluc3RhbmNlc1thXSk7dGhpcy5pbnN0YW5jZXMubGVuZ3RoPTAsdGhpcy5jbG9zZURlcHMoKSx0aGlzLnRlbXBsYXRlRWxlbWVudF8uaXRlcmF0b3JfPXZvaWQgMCx0aGlzLmNsb3NlZD0hMH19fSxIVE1MVGVtcGxhdGVFbGVtZW50LmZvckFsbFRlbXBsYXRlc0Zyb21fPWl9KHRoaXMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtlfHwoZT0hMCxhLmVuZE9mTWljcm90YXNrKGZ1bmN0aW9uKCl7ZT0hMSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwKCJQbGF0Zm9ybS5mbHVzaCgpIiksYS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXBFbmQoKX0pKX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2MudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2QuaW5zZXJ0QmVmb3JlKGMsZC5maXJzdENoaWxkKTt2YXIgZTtpZihPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlKWI9ZnVuY3Rpb24oKXt9O2Vsc2V7dmFyIGY9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLGEuZmx1c2hQb2xsPXNldEludGVydmFsKGIsZil9KX1pZih3aW5kb3cuQ3VzdG9tRWxlbWVudHMmJiFDdXN0b21FbGVtZW50cy51c2VOYXRpdmUpe3ZhciBnPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlO0RvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Zy5jYWxsKHRoaXMsYSxiKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChjKSxjfX1hLmZsdXNoPWJ9KHdpbmRvdy5QbGF0Zm9ybSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsYXRmb3JtLmpzLm1hcA==",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Thu, 06 Nov 2014 14:09:08 GMT",
                    "Content-Length": "158488",
                    "Date": "Thu, 06 Nov 2014 14:09:10 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}