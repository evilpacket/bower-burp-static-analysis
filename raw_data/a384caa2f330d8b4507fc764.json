{
    "url": "http://localhost:9999/gitnik/github-feed.js/dist/polymer-platform.min.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Link manipulation (DOM-based)",
    "issueType": 5246976,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based link manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a navigation target within the current page, such as a clickable link or the submission URL of a form. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the target of links within the response. An attacker may be able to leverage this to perform various attacks, including:<ul><li>Causing the user to redirect to an arbitrary external URL, to facilitate a phishing attack.</li><li>Causing the user to submit sensitive form data to a server controlled by the attacker.</li><li>Causing the user to perform an unintended action within the application, by changing the file or query string associated with a link.</li><li>Bypassing browser anti-XSS defenses by injecting on-site links containing XSS exploits, since browser anti-XSS defenses typically do not operate on on-site links.</li></ul>",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based link manipulation vulnerabilities is not to dynamically set the target URLs of links or forms using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a link target. In general, this is best achieved by using a whitelist of URLs that are permitted link targets, and strictly validating the target against this list before setting the link target.",
    "issueDetail": "The application may be vulnerable to DOM-based link manipulation. Data is read from <b>the 'baseURI' property of a DOM element</b> and written to <b>the 'href' property of a DOM element</b> via the following statement:<ul><li>i.href=document.baseURI,h.content.ownerDocument.appendChild(i);</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/gitnik/github-feed.js/dist/polymer-platform.min.js",
                "path": "/gitnik/github-feed.js/dist/polymer-platform.min.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9naXRuaWsvZ2l0aHViLWZlZWQuanMvZGlzdC9wb2x5bWVyLXBsYXRmb3JtLm1pbi5qcyBIVFRQLzEuMQ0KSG9zdDogbG9jYWxob3N0Ojk5OTkNCg0K",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTcwMzU4DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBGcmksIDA3IE5vdiAyMDE0IDAyOjIzOjAwIEdNVA0KTGFzdC1Nb2RpZmllZDogRnJpLCAwNyBOb3YgMjAxNCAwMjoyMzowMCBHTVQNCg0KZnVuY3Rpb24gUG9pbnRlckdlc3R1cmVFdmVudChhLGIpe3ZhciBjPWJ8fHt9LGQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50IiksZT17YnViYmxlczpCb29sZWFuKGMuYnViYmxlcyk9PT1jLmJ1YmJsZXN8fCEwLGNhbmNlbGFibGU6Qm9vbGVhbihjLmNhbmNlbGFibGUpPT09Yy5jYW5jZWxhYmxlfHwhMH07ZC5pbml0RXZlbnQoYSxlLmJ1YmJsZXMsZS5jYW5jZWxhYmxlKTtmb3IodmFyIGYsZz1PYmplY3Qua2V5cyhjKSxoPTA7aDxnLmxlbmd0aDtoKyspZj1nW2hdLGRbZl09Y1tmXTtyZXR1cm4gZC5wcmV2ZW50VGFwPXRoaXMucHJldmVudFRhcCxkfSJ1bmRlZmluZWQiPT10eXBlb2YgV2Vha01hcCYmIWZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9RGF0ZS5ub3coKSUxZTksYz1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGIrKyArIl9fIil9O2MucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYixjKXt2YXIgZD1iW3RoaXMubmFtZV07ZCYmZFswXT09PWI/ZFsxXT1jOmEoYix0aGlzLm5hbWUse3ZhbHVlOltiLGNdLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4oYj1hW3RoaXMubmFtZV0pJiZiWzBdPT09YT9iWzFdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX0sd2luZG93LldlYWtNYXA9Y30oKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe2Z1bmN0aW9uIGEoYSl7Yj1hfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiBPYmplY3Qub2JzZXJ2ZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIEFycmF5Lm9ic2VydmUpcmV0dXJuITE7dmFyIGI9W10sYz17fTtpZihPYmplY3Qub2JzZXJ2ZShjLGEpLGMuaWQ9MSxjLmlkPTIsZGVsZXRlIGMuaWQsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLDMhPT1iLmxlbmd0aClyZXR1cm4hMTtpZigibmV3Ij09YlswXS50eXBlJiYidXBkYXRlZCI9PWJbMV0udHlwZSYmImRlbGV0ZWQiPT1iWzJdLnR5cGUpTD0ibmV3IixNPSJ1cGRhdGVkIixOPSJyZWNvbmZpZ3VyZWQiLE89ImRlbGV0ZWQiO2Vsc2UgaWYoImFkZCIhPWJbMF0udHlwZXx8InVwZGF0ZSIhPWJbMV0udHlwZXx8ImRlbGV0ZSIhPWJbMl0udHlwZSlyZXR1cm4gY29uc29sZS5lcnJvcigiVW5leHBlY3RlZCBjaGFuZ2UgcmVjb3JkIG5hbWVzIGZvciBPYmplY3Qub2JzZXJ2ZS4gVXNpbmcgZGlydHktY2hlY2tpbmcgaW5zdGVhZCIpLCExO3JldHVybiBPYmplY3QudW5vYnNlcnZlKGMsYSksYz1bMF0sQXJyYXkub2JzZXJ2ZShjLGEpLGNbMV09MSxjLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSwyIT1iLmxlbmd0aD8hMTpiWzBdLnR5cGUhPVB8fGJbMV0udHlwZSE9UD8hMTooQXJyYXkudW5vYnNlcnZlKGMsYSksITApfWZ1bmN0aW9uIGMoKXtpZihhLmRvY3VtZW50JiYic2VjdXJpdHlQb2xpY3kiaW4gYS5kb2N1bWVudCYmIWEuZG9jdW1lbnQuc2VjdXJpdHlQb2xpY3kuYWxsb3dzRXZhbClyZXR1cm4hMTt0cnl7dmFyIGI9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtyZXR1cm4gYigpfWNhdGNoKGMpe3JldHVybiExfX1mdW5jdGlvbiBkKGEpe3JldHVybithPT09YT4+PjB9ZnVuY3Rpb24gZShhKXtyZXR1cm4rYX1mdW5jdGlvbiBmKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYT09PWI/MCE9PWF8fDEvYT09PTEvYjpTKGEpJiZTKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBoKGEpe3JldHVybiJzdHJpbmciIT10eXBlb2YgYT8hMTooYT1hLnRyaW0oKSwiIj09YT8hMDoiLiI9PWFbMF0/ITE6JC50ZXN0KGEpKX1mdW5jdGlvbiBpKGEsYil7aWYoYiE9PV8pdGhyb3cgRXJyb3IoIlVzZSBQYXRoLmdldCB0byByZXRyaWV2ZSBwYXRoIG9iamVjdHMiKTtyZXR1cm4iIj09YS50cmltKCk/dGhpczpkKGEpPyh0aGlzLnB1c2goYSksdGhpcyk6KGEuc3BsaXQoL1xzKlwuXHMqLykuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhfSkuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnB1c2goYSl9LHRoaXMpLHZvaWQoUiYmdGhpcy5sZW5ndGgmJih0aGlzLmdldFZhbHVlRnJvbT10aGlzLmNvbXBpbGVkR2V0VmFsdWVGcm9tRm4oKSkpKX1mdW5jdGlvbiBqKGEpe2lmKGEgaW5zdGFuY2VvZiBpKXJldHVybiBhO251bGw9PWEmJihhPSIiKSwic3RyaW5nIiE9dHlwZW9mIGEmJihhPVN0cmluZyhhKSk7dmFyIGI9YWJbYV07aWYoYilyZXR1cm4gYjtpZighaChhKSlyZXR1cm4gYmI7dmFyIGI9bmV3IGkoYSxfKTtyZXR1cm4gYWJbYV09YixifWZ1bmN0aW9uIGsoYil7Zm9yKHZhciBjPTA7ZGI+YyYmYi5jaGVja18oKTspYysrO3JldHVybiBhLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50JiYoYS5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1jKSxjPjB9ZnVuY3Rpb24gbChhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBtKGEpe3JldHVybiBsKGEuYWRkZWQpJiZsKGEucmVtb3ZlZCkmJmwoYS5jaGFuZ2VkKX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9e30sZD17fSxlPXt9O2Zvcih2YXIgZiBpbiBiKXt2YXIgZz1hW2ZdOyh2b2lkIDA9PT1nfHxnIT09YltmXSkmJihmIGluIGE/ZyE9PWJbZl0mJihlW2ZdPWcpOmRbZl09dm9pZCAwKX1mb3IodmFyIGYgaW4gYSlmIGluIGJ8fChjW2ZdPWFbZl0pO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiZhLmxlbmd0aCE9PWIubGVuZ3RoJiYoZS5sZW5ndGg9YS5sZW5ndGgpLHthZGRlZDpjLHJlbW92ZWQ6ZCxjaGFuZ2VkOmV9fWZ1bmN0aW9uIG8oKXtpZighZWIubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYT0wO2E8ZWIubGVuZ3RoO2ErKyllYlthXSgpO3JldHVybiBlYi5sZW5ndGg9MCwhMH1mdW5jdGlvbiBwKCl7ZnVuY3Rpb24gYShhKXtiJiZiLnN0YXRlXz09PWtiJiYhZCYmYi5jaGVja18oYSl9dmFyIGIsYyxkPSExLGU9ITA7cmV0dXJue29wZW46ZnVuY3Rpb24oYyl7aWYoYil0aHJvdyBFcnJvcigiT2JzZXJ2ZWRPYmplY3QgaW4gdXNlIik7ZXx8T2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGI9YyxlPSExfSxvYnNlcnZlOmZ1bmN0aW9uKGIsZCl7Yz1iLGQ/QXJyYXkub2JzZXJ2ZShjLGEpOk9iamVjdC5vYnNlcnZlKGMsYSl9LGRlbGl2ZXI6ZnVuY3Rpb24oYil7ZD1iLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxkPSExfSxjbG9zZTpmdW5jdGlvbigpe2I9dm9pZCAwLE9iamVjdC51bm9ic2VydmUoYyxhKSxnYi5wdXNoKHRoaXMpfX19ZnVuY3Rpb24gcShhLGIsYyl7dmFyIGQ9Z2IucG9wKCl8fHAoKTtyZXR1cm4gZC5vcGVuKGEpLGQub2JzZXJ2ZShiLGMpLGR9ZnVuY3Rpb24gcigpe2Z1bmN0aW9uIGEoYil7aWYoZihiKSl7dmFyIGM9aS5pbmRleE9mKGIpO2M+PTA/KGlbY109dm9pZCAwLGgucHVzaChiKSk6aC5pbmRleE9mKGIpPDAmJihoLnB1c2goYiksT2JqZWN0Lm9ic2VydmUoYixkKSksYShPYmplY3QuZ2V0UHJvdG90eXBlT2YoYikpfX1mdW5jdGlvbiBiKCl7aWYoaz0hMSxqKXt2YXIgYj1pPT09aGI/W106aTtpPWgsaD1iO3ZhciBjO2Zvcih2YXIgZiBpbiBlKWM9ZVtmXSxjJiZjLnN0YXRlXz09a2ImJmMuaXRlcmF0ZU9iamVjdHNfKGEpO2Zvcih2YXIgZz0wO2c8aS5sZW5ndGg7ZysrKXt2YXIgbD1pW2ddO2wmJk9iamVjdC51bm9ic2VydmUobCxkKX1pLmxlbmd0aD0wfX1mdW5jdGlvbiBjKCl7a3x8KGo9ITAsaz0hMCxmYihiKSl9ZnVuY3Rpb24gZCgpe3ZhciBhO2Zvcih2YXIgYiBpbiBlKWE9ZVtiXSxhJiZhLnN0YXRlXz09a2ImJmEuY2hlY2tfKCk7YygpfXZhciBlPVtdLGc9MCxoPVtdLGk9aGIsaj0hMSxrPSExLGw9e29iamVjdDp2b2lkIDAsb2JqZWN0czpoLG9wZW46ZnVuY3Rpb24oYil7ZVtiLmlkX109YixnKyssYi5pdGVyYXRlT2JqZWN0c18oYSl9LGNsb3NlOmZ1bmN0aW9uKGEpe2lmKGVbYS5pZF9dPXZvaWQgMCxnLS0sZylyZXR1cm4gdm9pZCBjKCk7aj0hMTtmb3IodmFyIGI9MDtiPGgubGVuZ3RoO2IrKylPYmplY3QudW5vYnNlcnZlKGhbYl0sZCksdC51bm9ic2VydmVkQ291bnQrKztlLmxlbmd0aD0wLGgubGVuZ3RoPTAsaWIucHVzaCh0aGlzKX0scmVzZXQ6Y307cmV0dXJuIGx9ZnVuY3Rpb24gcyhhLGIpe3JldHVybiBjYiYmY2Iub2JqZWN0PT09Ynx8KGNiPWliLnBvcCgpfHxyKCksY2Iub2JqZWN0PWIpLGNiLm9wZW4oYSksY2J9ZnVuY3Rpb24gdCgpe3RoaXMuc3RhdGVfPWpiLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5pZF89bmIrK31mdW5jdGlvbiB1KGEpe3QuX2FsbE9ic2VydmVyc0NvdW50KysscGImJm9iLnB1c2goYSl9ZnVuY3Rpb24gdigpe3QuX2FsbE9ic2VydmVyc0NvdW50LS19ZnVuY3Rpb24gdyhhKXt0LmNhbGwodGhpcyksdGhpcy52YWx1ZV89YSx0aGlzLm9sZE9iamVjdF89dm9pZCAwfWZ1bmN0aW9uIHgoYSl7aWYoIUFycmF5LmlzQXJyYXkoYSkpdGhyb3cgRXJyb3IoIlByb3ZpZGVkIG9iamVjdCBpcyBub3QgYW4gQXJyYXkiKTt3LmNhbGwodGhpcyxhKX1mdW5jdGlvbiB5KGEsYil7dC5jYWxsKHRoaXMpLHRoaXMub2JqZWN0Xz1hLHRoaXMucGF0aF89YiBpbnN0YW5jZW9mIGk/YjpqKGIpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMH1mdW5jdGlvbiB6KCl7dC5jYWxsKHRoaXMpLHRoaXMudmFsdWVfPVtdLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCx0aGlzLm9ic2VydmVkXz1bXX1mdW5jdGlvbiBBKGEpe3JldHVybiBhfWZ1bmN0aW9uIEIoYSxiLGMsZCl7dGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89YSx0aGlzLmdldFZhbHVlRm5fPWJ8fEEsdGhpcy5zZXRWYWx1ZUZuXz1jfHxBLHRoaXMuZG9udFBhc3NUaHJvdWdoU2V0Xz1kfWZ1bmN0aW9uIEMoYSxiKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0Lm9ic2VydmUpe3ZhciBjPU9iamVjdC5nZXROb3RpZmllcihhKTtyZXR1cm4gZnVuY3Rpb24oZCxlKXt2YXIgZj17b2JqZWN0OmEsdHlwZTpkLG5hbWU6Yn07Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihmLm9sZFZhbHVlPWUpLGMubm90aWZ5KGYpfX19ZnVuY3Rpb24gRChhLGIsYyl7Zm9yKHZhciBkPXt9LGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO3RiW2cudHlwZV0/KGcubmFtZSBpbiBjfHwoY1tnLm5hbWVdPWcub2xkVmFsdWUpLGcudHlwZSE9TSYmKGcudHlwZSE9TD9nLm5hbWUgaW4gZD8oZGVsZXRlIGRbZy5uYW1lXSxkZWxldGUgY1tnLm5hbWVdKTplW2cubmFtZV09ITA6Zy5uYW1lIGluIGU/ZGVsZXRlIGVbZy5uYW1lXTpkW2cubmFtZV09ITApKTooY29uc29sZS5lcnJvcigiVW5rbm93biBjaGFuZ2VSZWNvcmQgdHlwZTogIitnLnR5cGUpLGNvbnNvbGUuZXJyb3IoZykpfWZvcih2YXIgaCBpbiBkKWRbaF09YVtoXTtmb3IodmFyIGggaW4gZSllW2hdPXZvaWQgMDt2YXIgaT17fTtmb3IodmFyIGggaW4gYylpZighKGggaW4gZHx8aCBpbiBlKSl7dmFyIGo9YVtoXTtjW2hdIT09aiYmKGlbaF09ail9cmV0dXJue2FkZGVkOmQscmVtb3ZlZDplLGNoYW5nZWQ6aX19ZnVuY3Rpb24gRShhLGIsYyl7cmV0dXJue2luZGV4OmEscmVtb3ZlZDpiLGFkZGVkQ291bnQ6Y319ZnVuY3Rpb24gRigpe31mdW5jdGlvbiBHKGEsYixjLGQsZSxmKXtyZXR1cm4geWIuY2FsY1NwbGljZXMoYSxiLGMsZCxlLGYpfWZ1bmN0aW9uIEgoYSxiLGMsZCl7cmV0dXJuIGM+Ynx8YT5kPy0xOmI9PWN8fGQ9PWE/MDpjPmE/ZD5iP2ItYzpkLWM6Yj5kP2QtYTpiLWF9ZnVuY3Rpb24gSShhLGIsYyxkKXtmb3IodmFyIGU9RShiLGMsZCksZj0hMSxnPTAsaD0wO2g8YS5sZW5ndGg7aCsrKXt2YXIgaT1hW2hdO2lmKGkuaW5kZXgrPWcsIWYpe3ZhciBqPUgoZS5pbmRleCxlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGgsaS5pbmRleCxpLmluZGV4K2kuYWRkZWRDb3VudCk7aWYoaj49MCl7YS5zcGxpY2UoaCwxKSxoLS0sZy09aS5hZGRlZENvdW50LWkucmVtb3ZlZC5sZW5ndGgsZS5hZGRlZENvdW50Kz1pLmFkZGVkQ291bnQtajt2YXIgaz1lLnJlbW92ZWQubGVuZ3RoK2kucmVtb3ZlZC5sZW5ndGgtajtpZihlLmFkZGVkQ291bnR8fGspe3ZhciBjPWkucmVtb3ZlZDtpZihlLmluZGV4PGkuaW5kZXgpe3ZhciBsPWUucmVtb3ZlZC5zbGljZSgwLGkuaW5kZXgtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobCxjKSxjPWx9aWYoZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoPmkuaW5kZXgraS5hZGRlZENvdW50KXt2YXIgbT1lLnJlbW92ZWQuc2xpY2UoaS5pbmRleCtpLmFkZGVkQ291bnQtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYyxtKX1lLnJlbW92ZWQ9YyxpLmluZGV4PGUuaW5kZXgmJihlLmluZGV4PWkuaW5kZXgpfWVsc2UgZj0hMH1lbHNlIGlmKGUuaW5kZXg8aS5pbmRleCl7Zj0hMCxhLnNwbGljZShoLDAsZSksaCsrO3ZhciBuPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RoO2kuaW5kZXgrPW4sZys9bn19fWZ8fGEucHVzaChlKX1mdW5jdGlvbiBKKGEsYil7Zm9yKHZhciBjPVtdLGY9MDtmPGIubGVuZ3RoO2YrKyl7dmFyIGc9YltmXTtzd2l0Y2goZy50eXBlKXtjYXNlIFA6SShjLGcuaW5kZXgsZy5yZW1vdmVkLnNsaWNlKCksZy5hZGRlZENvdW50KTticmVhaztjYXNlIEw6Y2FzZSBNOmNhc2UgTzppZighZChnLm5hbWUpKWNvbnRpbnVlO3ZhciBoPWUoZy5uYW1lKTtpZigwPmgpY29udGludWU7SShjLGgsW2cub2xkVmFsdWVdLDEpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiVW5leHBlY3RlZCByZWNvcmQgdHlwZTogIitKU09OLnN0cmluZ2lmeShnKSl9fXJldHVybiBjfWZ1bmN0aW9uIEsoYSxiKXt2YXIgYz1bXTtyZXR1cm4gSihhLGIpLmZvckVhY2goZnVuY3Rpb24oYil7cmV0dXJuIDE9PWIuYWRkZWRDb3VudCYmMT09Yi5yZW1vdmVkLmxlbmd0aD92b2lkKGIucmVtb3ZlZFswXSE9PWFbYi5pbmRleF0mJmMucHVzaChiKSk6dm9pZChjPWMuY29uY2F0KEcoYSxiLmluZGV4LGIuaW5kZXgrYi5hZGRlZENvdW50LGIucmVtb3ZlZCwwLGIucmVtb3ZlZC5sZW5ndGgpKSl9KSxjfXZhciBMPSJhZGQiLE09InVwZGF0ZSIsTj0icmVjb25maWd1cmUiLE89ImRlbGV0ZSIsUD0ic3BsaWNlIixRPWIoKSxSPWMoKSxTPWEuTnVtYmVyLmlzTmFOfHxmdW5jdGlvbihiKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGImJmEuaXNOYU4oYil9LFQ9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LFU9IlskX2EtekEtWl0iLFY9IlskX2EtekEtWjAtOV0iLFc9VSsiKyIrVisiKiIsWD0iKD86WzAtOV18WzEtOV0rWzAtOV0rKSIsWT0iKD86IitXKyJ8IitYKyIpIixaPSIoPzoiK1krIikoPzpcXHMqXFwuXFxzKiIrWSsiKSoiLCQ9bmV3IFJlZ0V4cCgiXiIrWisiJCIpLF89e30sYWI9e307aS5nZXQ9aixpLnByb3RvdHlwZT1UKHtfX3Byb3RvX186W10sdmFsaWQ6ITAsdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qb2luKCIuIil9LGdldFZhbHVlRnJvbTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7aWYobnVsbD09YSlyZXR1cm47YT1hW3RoaXNbYl1dfXJldHVybiBhfSxpdGVyYXRlT2JqZWN0czpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGg7YysrKXtpZihjJiYoYT1hW3RoaXNbYy0xXV0pLCFhKXJldHVybjtiKGEpfX0sY29tcGlsZWRHZXRWYWx1ZUZyb21GbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBkKGEpPydbIicrYSsnIl0nOiIuIithfSksYj0iIixjPSJvYmoiO2IrPSJpZiAob2JqICE9IG51bGwiO2Zvcih2YXIgZT0wO2U8dGhpcy5sZW5ndGgtMTtlKyspdGhpc1tlXSxjKz1hW2VdLGIrPSIgJiZcbiAgICAgIitjKyIgIT0gbnVsbCI7cmV0dXJuIGIrPSIpXG4iLGMrPWFbZV0sYis9IiAgcmV0dXJuICIrYysiO1xuZWxzZVxuICByZXR1cm4gdW5kZWZpbmVkOyIsbmV3IEZ1bmN0aW9uKCJvYmoiLGIpfSxzZXRWYWx1ZUZyb206ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aC0xO2MrKyl7aWYoIWYoYSkpcmV0dXJuITE7YT1hW3RoaXNbY11dfXJldHVybiBmKGEpPyhhW3RoaXNbY11dPWIsITApOiExfX0pO3ZhciBiYj1uZXcgaSgiIixfKTtiYi52YWxpZD0hMSxiYi5nZXRWYWx1ZUZyb209YmIuc2V0VmFsdWVGcm9tPWZ1bmN0aW9uKCl7fTt2YXIgY2IsZGI9MWUzLGViPVtdLGZiPVE/ZnVuY3Rpb24oKXt2YXIgYT17cGluZ1Bvbmc6ITB9LGI9ITE7cmV0dXJuIE9iamVjdC5vYnNlcnZlKGEsZnVuY3Rpb24oKXtvKCksYj0hMX0pLGZ1bmN0aW9uKGMpe2ViLnB1c2goYyksYnx8KGI9ITAsYS5waW5nUG9uZz0hYS5waW5nUG9uZyl9fSgpOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEpe2ViLnB1c2goYSl9fSgpLGdiPVtdLGhiPVtdLGliPVtdLGpiPTAsa2I9MSxsYj0yLG1iPTMsbmI9MTt0LnByb3RvdHlwZT17b3BlbjpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc3RhdGVfIT1qYil0aHJvdyBFcnJvcigiT2JzZXJ2ZXIgaGFzIGFscmVhZHkgYmVlbiBvcGVuZWQuIik7cmV0dXJuIHUodGhpcyksdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLnN0YXRlXz1rYix0aGlzLmNvbm5lY3RfKCksdGhpcy52YWx1ZV99LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZV89PWtiJiYodih0aGlzKSx0aGlzLnN0YXRlXz1sYix0aGlzLmRpc2Nvbm5lY3RfKCksdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwKX0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1rYiYmayh0aGlzKX0scmVwb3J0XzpmdW5jdGlvbihhKXt0cnl7dGhpcy5jYWxsYmFja18uYXBwbHkodGhpcy50YXJnZXRfLGEpfWNhdGNoKGIpe3QuX2Vycm9yVGhyb3duRHVyaW5nQ2FsbGJhY2s9ITAsY29uc29sZS5lcnJvcigiRXhjZXB0aW9uIGNhdWdodCBkdXJpbmcgb2JzZXJ2ZXIgY2FsbGJhY2s6ICIrKGIuc3RhY2t8fGIpKX19LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hlY2tfKHZvaWQgMCwhMCksdGhpcy52YWx1ZV99fTt2YXIgb2IscGI9IVE7dC5fYWxsT2JzZXJ2ZXJzQ291bnQ9MCxwYiYmKG9iPVtdKTt2YXIgcWI9ITEscmI9ImZ1bmN0aW9uIj09dHlwZW9mIE9iamVjdC5kZWxpdmVyQWxsQ2hhbmdlUmVjb3JkczthLlBsYXRmb3JtPWEuUGxhdGZvcm18fHt9LGEuUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQ9ZnVuY3Rpb24oKXtpZighcWIpe2lmKHJiKXJldHVybiB2b2lkIE9iamVjdC5kZWxpdmVyQWxsQ2hhbmdlUmVjb3JkcygpO2lmKHBiKXtxYj0hMDt2YXIgYixjLGQ9MDtkb3tkKyssYz1vYixvYj1bXSxiPSExO2Zvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKXt2YXIgZj1jW2VdO2Yuc3RhdGVfPT1rYiYmKGYuY2hlY2tfKCkmJihiPSEwKSxvYi5wdXNoKGYpKX1vKCkmJihiPSEwKX13aGlsZShkYj5kJiZiKTthLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50JiYoYS5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1kKSxxYj0hMX19fSxwYiYmKGEuUGxhdGZvcm0uY2xlYXJPYnNlcnZlcnM9ZnVuY3Rpb24oKXtvYj1bXX0pLHcucHJvdG90eXBlPVQoe19fcHJvdG9fXzp0LnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITEsY29ubmVjdF86ZnVuY3Rpb24oKXtRP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfPXEodGhpcyx0aGlzLnZhbHVlXyx0aGlzLmFycmF5T2JzZXJ2ZSk6dGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXyl9LGNvcHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkuaXNBcnJheShhKT9bXTp7fTtmb3IodmFyIGMgaW4gYSliW2NdPWFbY107cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJihiLmxlbmd0aD1hLmxlbmd0aCksYn0sY2hlY2tfOmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoUSl7aWYoIWEpcmV0dXJuITE7Yz17fSxiPUQodGhpcy52YWx1ZV8sYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3RfLGI9bih0aGlzLnZhbHVlXyx0aGlzLm9sZE9iamVjdF8pO3JldHVybiBtKGIpPyExOihRfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYi5hZGRlZHx8e30sYi5yZW1vdmVkfHx7fSxiLmNoYW5nZWR8fHt9LGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfV0pLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXtRPyh0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSgpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCk6dGhpcy5vbGRPYmplY3RfPXZvaWQgMH0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1rYiYmKFE/dGhpcy5kaXJlY3RPYnNlcnZlcl8uZGVsaXZlcighMSk6ayh0aGlzKSl9LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyZWN0T2JzZXJ2ZXJfP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITApOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pLHRoaXMudmFsdWVffX0pLHgucHJvdG90eXBlPVQoe19fcHJvdG9fXzp3LnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITAsY29weU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZSgpfSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGI7aWYoUSl7aWYoIWEpcmV0dXJuITE7Yj1LKHRoaXMudmFsdWVfLGEpfWVsc2UgYj1HKHRoaXMudmFsdWVfLDAsdGhpcy52YWx1ZV8ubGVuZ3RoLHRoaXMub2xkT2JqZWN0XywwLHRoaXMub2xkT2JqZWN0Xy5sZW5ndGgpO3JldHVybiBiJiZiLmxlbmd0aD8oUXx8KHRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pKSx0aGlzLnJlcG9ydF8oW2JdKSwhMCk6ITF9fSkseC5hcHBseVNwbGljZXM9ZnVuY3Rpb24oYSxiLGMpe2MuZm9yRWFjaChmdW5jdGlvbihjKXtmb3IodmFyIGQ9W2MuaW5kZXgsYy5yZW1vdmVkLmxlbmd0aF0sZT1jLmluZGV4O2U8Yy5pbmRleCtjLmFkZGVkQ291bnQ7KWQucHVzaChiW2VdKSxlKys7QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhLGQpfSl9LHkucHJvdG90eXBlPVQoe19fcHJvdG9fXzp0LnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe1EmJih0aGlzLmRpcmVjdE9ic2VydmVyXz1zKHRoaXMsdGhpcy5vYmplY3RfKSksdGhpcy5jaGVja18odm9pZCAwLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXt0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXy5pdGVyYXRlT2JqZWN0cyh0aGlzLm9iamVjdF8sYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMudmFsdWVfO3JldHVybiB0aGlzLnZhbHVlXz10aGlzLnBhdGhfLmdldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8pLGJ8fGcodGhpcy52YWx1ZV8sYyk/ITE6KHRoaXMucmVwb3J0XyhbdGhpcy52YWx1ZV8sY10pLCEwKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXyYmdGhpcy5wYXRoXy5zZXRWYWx1ZUZyb20odGhpcy5vYmplY3RfLGEpfX0pO3ZhciBzYj17fTt6LnByb3RvdHlwZT1UKHtfX3Byb3RvX186dC5wcm90b3R5cGUsY29ubmVjdF86ZnVuY3Rpb24oKXtpZih0aGlzLmNoZWNrXyh2b2lkIDAsITApLFEpe2Zvcih2YXIgYSxiPSExLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWlmKGE9dGhpcy5vYnNlcnZlZF9bY10sYSE9PXNiKXtiPSEwO2JyZWFrfXJldHVybiB0aGlzLmRpcmVjdE9ic2VydmVyXz9iP3ZvaWQgdGhpcy5kaXJlY3RPYnNlcnZlcl8ucmVzZXQoKToodGhpcy5kaXJlY3RPYnNlcnZlcl8uY2xvc2UoKSx2b2lkKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCkpOnZvaWQoYiYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXModGhpcyxhKSkpfX0sY2xvc2VPYnNlcnZlcnNfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLm9ic2VydmVkXy5sZW5ndGg7YSs9Mil0aGlzLm9ic2VydmVkX1thXT09PXNiJiZ0aGlzLm9ic2VydmVkX1thKzFdLmNsb3NlKCk7dGhpcy5vYnNlcnZlZF8ubGVuZ3RoPTB9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7dGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfJiYodGhpcy5kaXJlY3RPYnNlcnZlcl8uY2xvc2UodGhpcyksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwKSx0aGlzLmNsb3NlT2JzZXJ2ZXJzXygpfSxhZGRQYXRoOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPWpiJiZ0aGlzLnN0YXRlXyE9bWIpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgcGF0aHMgb25jZSBzdGFydGVkLiIpO3RoaXMub2JzZXJ2ZWRfLnB1c2goYSxiIGluc3RhbmNlb2YgaT9iOmooYikpfSxhZGRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXRlXyE9amImJnRoaXMuc3RhdGVfIT1tYil0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBvYnNlcnZlcnMgb25jZSBzdGFydGVkLiIpO2Eub3Blbih0aGlzLmRlbGl2ZXIsdGhpcyksdGhpcy5vYnNlcnZlZF8ucHVzaChzYixhKX0sc3RhcnRSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1rYil0aHJvdyBFcnJvcigiQ2FuIG9ubHkgcmVzZXQgd2hpbGUgb3BlbiIpO3RoaXMuc3RhdGVfPW1iLHRoaXMuY2xvc2VPYnNlcnZlcnNfKCl9LGZpbmlzaFJlc2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5zdGF0ZV8hPW1iKXRocm93IEVycm9yKCJDYW4gb25seSBmaW5pc2hSZXNldCBhZnRlciBzdGFydFJlc2V0Iik7cmV0dXJuIHRoaXMuc3RhdGVfPWtiLHRoaXMuY29ubmVjdF8oKSx0aGlzLnZhbHVlX30saXRlcmF0ZU9iamVjdHNfOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTA7Yzx0aGlzLm9ic2VydmVkXy5sZW5ndGg7Yys9MiliPXRoaXMub2JzZXJ2ZWRfW2NdLGIhPT1zYiYmdGhpcy5vYnNlcnZlZF9bYysxXS5pdGVyYXRlT2JqZWN0cyhiLGEpfSxjaGVja186ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wO2Q8dGhpcy5vYnNlcnZlZF8ubGVuZ3RoO2QrPTIpe3ZhciBlPXRoaXMub2JzZXJ2ZWRfW2QrMV0sZj10aGlzLm9ic2VydmVkX1tkXSxoPWY9PT1zYj9lLmRpc2NhcmRDaGFuZ2VzKCk6ZS5nZXRWYWx1ZUZyb20oZik7Yj90aGlzLnZhbHVlX1tkLzJdPWg6ZyhoLHRoaXMudmFsdWVfW2QvMl0pfHwoYz1jfHxbXSxjW2QvMl09dGhpcy52YWx1ZV9bZC8yXSx0aGlzLnZhbHVlX1tkLzJdPWgpfXJldHVybiBjPyh0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpcy5vYnNlcnZlZF9dKSwhMCk6ITF9fSksQi5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLnZhbHVlXz10aGlzLmdldFZhbHVlRm5fKHRoaXMub2JzZXJ2YWJsZV8ub3Blbih0aGlzLm9ic2VydmVkQ2FsbGJhY2tfLHRoaXMpKSx0aGlzLnZhbHVlX30sb2JzZXJ2ZWRDYWxsYmFja186ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmdldFZhbHVlRm5fKGEpLCFnKGEsdGhpcy52YWx1ZV8pKXt2YXIgYj10aGlzLnZhbHVlXzt0aGlzLnZhbHVlXz1hLHRoaXMuY2FsbGJhY2tfLmNhbGwodGhpcy50YXJnZXRfLHRoaXMudmFsdWVfLGIpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMudmFsdWVffSxkZWxpdmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JzZXJ2YWJsZV8uZGVsaXZlcigpfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLnNldFZhbHVlRm5fKGEpLCF0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF8mJnRoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWU/dGhpcy5vYnNlcnZhYmxlXy5zZXRWYWx1ZShhKTp2b2lkIDB9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZhYmxlXyYmdGhpcy5vYnNlcnZhYmxlXy5jbG9zZSgpLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmdldFZhbHVlRm5fPXZvaWQgMCx0aGlzLnNldFZhbHVlRm5fPXZvaWQgMH19O3ZhciB0Yj17fTt0YltMXT0hMCx0YltNXT0hMCx0YltPXT0hMCx0LmRlZmluZUNvbXB1dGVkUHJvcGVydHk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPUMoYSxiKSxlPWMub3BlbihmdW5jdGlvbihhLGIpe2U9YSxkJiZkKE0sYil9KTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGMuZGVsaXZlcigpLGV9LHNldDpmdW5jdGlvbihhKXtyZXR1cm4gYy5zZXRWYWx1ZShhKSxhfSxjb25maWd1cmFibGU6ITB9KSx7Y2xvc2U6ZnVuY3Rpb24oKXtjLmNsb3NlKCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19fTt2YXIgdWI9MCx2Yj0xLHdiPTIseGI9MztGLnByb3RvdHlwZT17Y2FsY0VkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mLWUrMSxoPWMtYisxLGk9bmV3IEFycmF5KGcpLGo9MDtnPmo7aisrKWlbal09bmV3IEFycmF5KGgpLGlbal1bMF09ajtmb3IodmFyIGs9MDtoPms7aysrKWlbMF1ba109aztmb3IodmFyIGo9MTtnPmo7aisrKWZvcih2YXIgaz0xO2g+aztrKyspaWYodGhpcy5lcXVhbHMoYVtiK2stMV0sZFtlK2otMV0pKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX0sc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaCh1Yik6KGUucHVzaCh2YiksZD1nKSxiLS0sYy0tKTpmPT1oPyhlLnB1c2goeGIpLGItLSxkPWgpOihlLnB1c2god2IpLGMtLSxkPWkpfWVsc2UgZS5wdXNoKHhiKSxiLS07ZWxzZSBlLnB1c2god2IpLGMtLTtyZXR1cm4gZS5yZXZlcnNlKCksZX0sY2FsY1NwbGljZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPTAsaD0wLGk9TWF0aC5taW4oYy1iLGYtZSk7aWYoMD09YiYmMD09ZSYmKGc9dGhpcy5zaGFyZWRQcmVmaXgoYSxkLGkpKSxjPT1hLmxlbmd0aCYmZj09ZC5sZW5ndGgmJihoPXRoaXMuc2hhcmVkU3VmZml4KGEsZCxpLWcpKSxiKz1nLGUrPWcsYy09aCxmLT1oLGMtYj09MCYmZi1lPT0wKXJldHVybltdO2lmKGI9PWMpe2Zvcih2YXIgaj1FKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltFKGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIHViOmomJihsLnB1c2goaiksaj12b2lkIDApLG0rKyxuKys7YnJlYWs7Y2FzZSB2YjpqfHwoaj1FKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSB3YjpqfHwoaj1FKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIHhiOmp8fChqPUUobSxbXSwwKSksai5yZW1vdmVkLnB1c2goZFtuXSksbisrfXJldHVybiBqJiZsLnB1c2goaiksbH0sc2hhcmVkUHJlZml4OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MDtjPmQ7ZCsrKWlmKCF0aGlzLmVxdWFscyhhW2RdLGJbZF0pKXJldHVybiBkO3JldHVybiBjfSxzaGFyZWRTdWZmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPWIubGVuZ3RoLGY9MDtjPmYmJnRoaXMuZXF1YWxzKGFbLS1kXSxiWy0tZV0pOylmKys7cmV0dXJuIGZ9LGNhbGN1bGF0ZVNwbGljZXM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxjU3BsaWNlcyhhLDAsYS5sZW5ndGgsYiwwLGIubGVuZ3RoKX0sZXF1YWxzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifX07dmFyIHliPW5ldyBGO2EuT2JzZXJ2ZXI9dCxhLk9ic2VydmVyLnJ1bkVPTV89ZmIsYS5PYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlPVEsYS5BcnJheU9ic2VydmVyPXgsYS5BcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4geWIuY2FsY3VsYXRlU3BsaWNlcyhhLGIpfSxhLkFycmF5U3BsaWNlPUYsYS5PYmplY3RPYnNlcnZlcj13LGEuUGF0aE9ic2VydmVyPXksYS5Db21wb3VuZE9ic2VydmVyPXosYS5QYXRoPWksYS5PYnNlcnZlclRyYW5zZm9ybT1CLGEuT2JzZXJ2ZXIuY2hhbmdlUmVjb3JkVHlwZXM9e2FkZDpMLHVwZGF0ZTpNLHJlY29uZmlndXJlOk4sImRlbGV0ZSI6TyxzcGxpY2U6UH19KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGU/Z2xvYmFsOnRoaXN8fHdpbmRvdyksd2luZG93LlBsYXRmb3JtPXdpbmRvdy5QbGF0Zm9ybXx8e30sd2luZG93LmxvZ0ZsYWdzPXdpbmRvdy5sb2dGbGFnc3x8e30sZnVuY3Rpb24oYSl7dmFyIGI9YS5mbGFnc3x8e307bG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihhKXthPWEuc3BsaXQoIj0iKSxhWzBdJiYoYlthWzBdXT1hWzFdfHwhMCl9KSxiLnNoYWRvdz1iLnNoYWRvd3x8Yi5zaGFkb3dkb218fGIucG9seWZpbGwsYi5zaGFkb3c9Im5hdGl2ZSI9PT1iLnNoYWRvdz8hMTpiLnNoYWRvd3x8IUhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290JiYicG9seWZpbGwiLGEuZmxhZ3M9Yn0oUGxhdGZvcm0pLCJwb2x5ZmlsbCI9PT1QbGF0Zm9ybS5mbGFncy5zaGFkb3c/KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD17fSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIEwoYikuZm9yRWFjaChmdW5jdGlvbihjKXtLKGEsYyxNKGIsYykpfSksYX1mdW5jdGlvbiBkKGEsYil7cmV0dXJuIEwoYikuZm9yRWFjaChmdW5jdGlvbihjKXtzd2l0Y2goYyl7Y2FzZSJhcmd1bWVudHMiOmNhc2UiY2FsbGVyIjpjYXNlImxlbmd0aCI6Y2FzZSJuYW1lIjpjYXNlInByb3RvdHlwZSI6Y2FzZSJ0b1N0cmluZyI6cmV0dXJufUsoYSxjLE0oYixjKSl9KSxhfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdaW4gYSlyZXR1cm4gYltjXX1mdW5jdGlvbiBmKGEpe3ZhciBiPWEuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYz1FLmdldChiKTtpZihjKXJldHVybiBjO3ZhciBkPWYoYiksZT10KGQpO3JldHVybiBxKGIsZSxhKSxlfWZ1bmN0aW9uIGcoYSxiKXtvKGEsYiwhMCl9ZnVuY3Rpb24gaChhLGIpe28oYixhLCExKX1mdW5jdGlvbiBpKGEpe3JldHVybi9eb25bYS16XSskLy50ZXN0KGEpfWZ1bmN0aW9uIGooYSl7cmV0dXJuL15cd1thLXpBLVpfMC05XSokLy50ZXN0KGEpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIEgmJmooYSk/bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcy5pbXBsLiIrYSk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdfX1mdW5jdGlvbiBsKGEpe3JldHVybiBIJiZqKGEpP25ldyBGdW5jdGlvbigidiIsInRoaXMuaW1wbC4iK2ErIiA9IHYiKTpmdW5jdGlvbihiKXt0aGlzLmltcGxbYV09Yn19ZnVuY3Rpb24gbShhKXtyZXR1cm4gSCYmaihhKT9uZXcgRnVuY3Rpb24oInJldHVybiB0aGlzLmltcGwuIithKyIuYXBwbHkodGhpcy5pbXBsLCBhcmd1bWVudHMpIik6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX1mdW5jdGlvbiBuKGEsYil7dHJ5e3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYil9Y2F0Y2goYyl7cmV0dXJuIE99fWZ1bmN0aW9uIG8oYixjLGQpe2Zvcih2YXIgZT1MKGIpLGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGc9ZVtmXTtpZigicG9seW1lckJsYWNrTGlzdF8iIT09ZyYmIShnIGluIGN8fGIucG9seW1lckJsYWNrTGlzdF8mJmIucG9seW1lckJsYWNrTGlzdF9bZ10pKXtOJiZiLl9fbG9va3VwR2V0dGVyX18oZyk7dmFyIGgsaixvPW4oYixnKTtpZihkJiYiZnVuY3Rpb24iPT10eXBlb2Ygby52YWx1ZSljW2ddPW0oZyk7ZWxzZXt2YXIgcD1pKGcpO2g9cD9hLmdldEV2ZW50SGFuZGxlckdldHRlcihnKTprKGcpLChvLndyaXRhYmxlfHxvLnNldCkmJihqPXA/YS5nZXRFdmVudEhhbmRsZXJTZXR0ZXIoZyk6bChnKSksSyhjLGcse2dldDpoLHNldDpqLGNvbmZpZ3VyYWJsZTpvLmNvbmZpZ3VyYWJsZSxlbnVtZXJhYmxlOm8uZW51bWVyYWJsZX0pfX19fWZ1bmN0aW9uIHAoYSxiLGMpe3ZhciBlPWEucHJvdG90eXBlO3EoZSxiLGMpLGQoYixhKX1mdW5jdGlvbiBxKGEsYyxkKXt2YXIgZT1jLnByb3RvdHlwZTtiKHZvaWQgMD09PUUuZ2V0KGEpKSxFLnNldChhLGMpLEYuc2V0KGUsYSksZyhhLGUpLGQmJmgoZSxkKSxLKGUsImNvbnN0cnVjdG9yIix7dmFsdWU6Yyxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMH0pfWZ1bmN0aW9uIHIoYSxiKXtyZXR1cm4gRS5nZXQoYi5wcm90b3R5cGUpPT09YX1mdW5jdGlvbiBzKGEpe3ZhciBiPU9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxjPWYoYiksZD10KGMpO3JldHVybiBxKGIsZCxhKSxkfWZ1bmN0aW9uIHQoYSl7ZnVuY3Rpb24gYihiKXthLmNhbGwodGhpcyxiKX1yZXR1cm4gYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSksYi5wcm90b3R5cGUuY29uc3RydWN0b3I9YixifWZ1bmN0aW9uIHUoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBHLkV2ZW50VGFyZ2V0fHxhIGluc3RhbmNlb2YgRy5FdmVudHx8YSBpbnN0YW5jZW9mIEcuUmFuZ2V8fGEgaW5zdGFuY2VvZiBHLkRPTUltcGxlbWVudGF0aW9ufHxhIGluc3RhbmNlb2YgRy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8fEcuV2ViR0xSZW5kZXJpbmdDb250ZXh0JiZhIGluc3RhbmNlb2YgRy5XZWJHTFJlbmRlcmluZ0NvbnRleHR9ZnVuY3Rpb24gdihhKXtyZXR1cm4gUSYmYSBpbnN0YW5jZW9mIFF8fGEgaW5zdGFuY2VvZiBTfHxhIGluc3RhbmNlb2YgUnx8YSBpbnN0YW5jZW9mIFR8fGEgaW5zdGFuY2VvZiBVfHxhIGluc3RhbmNlb2YgUHx8YSBpbnN0YW5jZW9mIFZ8fFcmJmEgaW5zdGFuY2VvZiBXfHxYJiZhIGluc3RhbmNlb2YgWH1mdW5jdGlvbiB3KGEpe3JldHVybiBudWxsPT09YT9udWxsOihiKHYoYSkpLGEucG9seW1lcldyYXBwZXJffHwoYS5wb2x5bWVyV3JhcHBlcl89bmV3KGYoYSkpKGEpKSl9ZnVuY3Rpb24geChhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYih1KGEpKSxhLmltcGwpfWZ1bmN0aW9uIHkoYSl7cmV0dXJuIGEmJnUoYSk/eChhKTphfWZ1bmN0aW9uIHooYSl7cmV0dXJuIGEmJiF1KGEpP3coYSk6YX1mdW5jdGlvbiBBKGEsYyl7bnVsbCE9PWMmJihiKHYoYSkpLGIodm9pZCAwPT09Y3x8dShjKSksYS5wb2x5bWVyV3JhcHBlcl89Yyl9ZnVuY3Rpb24gQihhLGIsYyl7SyhhLnByb3RvdHlwZSxiLHtnZXQ6Yyxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfWZ1bmN0aW9uIEMoYSxiKXtCKGEsYixmdW5jdGlvbigpe3JldHVybiB3KHRoaXMuaW1wbFtiXSl9KX1mdW5jdGlvbiBEKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IuZm9yRWFjaChmdW5jdGlvbihiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3ZhciBhPXoodGhpcyk7cmV0dXJuIGFbYl0uYXBwbHkoYSxhcmd1bWVudHMpfX0pfSl9dmFyIEU9bmV3IFdlYWtNYXAsRj1uZXcgV2Vha01hcCxHPU9iamVjdC5jcmVhdGUobnVsbCksSD0hKCJzZWN1cml0eVBvbGljeSJpbiBkb2N1bWVudCl8fGRvY3VtZW50LnNlY3VyaXR5UG9saWN5LmFsbG93c0V2YWw7aWYoSCl0cnl7dmFyIEk9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtIPUkoKX1jYXRjaChKKXtIPSExfXZhciBLPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxMPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLE09T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtMKHdpbmRvdyk7dmFyIE49L0ZpcmVmb3gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksTz17Z2V0OmZ1bmN0aW9uKCl7fSxzZXQ6ZnVuY3Rpb24oKXt9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSxQPXdpbmRvdy5ET01JbXBsZW1lbnRhdGlvbixRPXdpbmRvdy5FdmVudFRhcmdldCxSPXdpbmRvdy5FdmVudCxTPXdpbmRvdy5Ob2RlLFQ9d2luZG93LldpbmRvdyxVPXdpbmRvdy5SYW5nZSxWPXdpbmRvdy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsVz13aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0LFg9d2luZG93LlNWR0VsZW1lbnRJbnN0YW5jZTthLmFzc2VydD1iLGEuY29uc3RydWN0b3JUYWJsZT1FLGEuZGVmaW5lR2V0dGVyPUIsYS5kZWZpbmVXcmFwR2V0dGVyPUMsYS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcj1ELGEuaXNXcmFwcGVyPXUsYS5pc1dyYXBwZXJGb3I9cixhLm1peGluPWMsYS5uYXRpdmVQcm90b3R5cGVUYWJsZT1GLGEub25lT2Y9ZSxhLnJlZ2lzdGVyT2JqZWN0PXMsYS5yZWdpc3RlcldyYXBwZXI9cCxhLnJld3JhcD1BLGEudW53cmFwPXgsYS51bndyYXBJZk5lZWRlZD15LGEud3JhcD13LGEud3JhcElmTmVlZGVkPXosYS53cmFwcGVycz1HfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKCl7Zz0hMTt2YXIgYT1mLnNsaWNlKDApO2Y9W107Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXSgpfWZ1bmN0aW9uIGMoYSl7Zi5wdXNoKGEpLGd8fChnPSEwLGQoYiwwKSl9dmFyIGQsZT13aW5kb3cuTXV0YXRpb25PYnNlcnZlcixmPVtdLGc9ITE7aWYoZSl7dmFyIGg9MSxpPW5ldyBlKGIpLGo9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaCk7aS5vYnNlcnZlKGose2NoYXJhY3RlckRhdGE6ITB9KSxkPWZ1bmN0aW9uKCl7aD0oaCsxKSUyLGouZGF0YT1ofX1lbHNlIGQ9d2luZG93LnNldEltbWVkaWF0ZXx8d2luZG93LnNldFRpbWVvdXQ7YS5zZXRFbmRPZk1pY3JvdGFzaz1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKCl7cHx8KGsoYykscD0hMCl9ZnVuY3Rpb24gYygpe3A9ITE7ZG8gZm9yKHZhciBhPW8uc2xpY2UoKSxiPSExLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXSxlPWQudGFrZVJlY29yZHMoKTtmKGQpLGUubGVuZ3RoJiYoZC5jYWxsYmFja18oZSxkKSxiPSEwKX13aGlsZShiKX1mdW5jdGlvbiBkKGEsYil7dGhpcy50eXBlPWEsdGhpcy50YXJnZXQ9Yix0aGlzLmFkZGVkTm9kZXM9bmV3IG0uTm9kZUxpc3QsdGhpcy5yZW1vdmVkTm9kZXM9bmV3IG0uTm9kZUxpc3QsdGhpcy5wcmV2aW91c1NpYmxpbmc9bnVsbCx0aGlzLm5leHRTaWJsaW5nPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lc3BhY2U9bnVsbCx0aGlzLm9sZFZhbHVlPW51bGx9ZnVuY3Rpb24gZShhLGIpe2Zvcig7YTthPWEucGFyZW50Tm9kZSl7dmFyIGM9bi5nZXQoYSk7aWYoYylmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtlLm9wdGlvbnMuc3VidHJlZSYmZS5hZGRUcmFuc2llbnRPYnNlcnZlcihiKX19fWZ1bmN0aW9uIGYoYSl7Zm9yKHZhciBiPTA7YjxhLm5vZGVzXy5sZW5ndGg7YisrKXt2YXIgYz1hLm5vZGVzX1tiXSxkPW4uZ2V0KGMpO2lmKCFkKXJldHVybjtmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXTtmLm9ic2VydmVyPT09YSYmZi5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKX19fWZ1bmN0aW9uIGcoYSxjLGUpe2Zvcih2YXIgZj1PYmplY3QuY3JlYXRlKG51bGwpLGc9T2JqZWN0LmNyZWF0ZShudWxsKSxoPWE7aDtoPWgucGFyZW50Tm9kZSl7dmFyIGk9bi5nZXQoaCk7aWYoaSlmb3IodmFyIGo9MDtqPGkubGVuZ3RoO2orKyl7dmFyIGs9aVtqXSxsPWsub3B0aW9ucztpZigoaD09PWF8fGwuc3VidHJlZSkmJiEoImF0dHJpYnV0ZXMiPT09YyYmIWwuYXR0cmlidXRlc3x8ImF0dHJpYnV0ZXMiPT09YyYmbC5hdHRyaWJ1dGVGaWx0ZXImJihudWxsIT09ZS5uYW1lc3BhY2V8fC0xPT09bC5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihlLm5hbWUpKXx8ImNoYXJhY3RlckRhdGEiPT09YyYmIWwuY2hhcmFjdGVyRGF0YXx8ImNoaWxkTGlzdCI9PT1jJiYhbC5jaGlsZExpc3QpKXt2YXIgbT1rLm9ic2VydmVyO2ZbbS51aWRfXT1tLCgiYXR0cmlidXRlcyI9PT1jJiZsLmF0dHJpYnV0ZU9sZFZhbHVlfHwiY2hhcmFjdGVyRGF0YSI9PT1jJiZsLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSkmJihnW20udWlkX109ZS5vbGRWYWx1ZSl9fX12YXIgbz0hMTtmb3IodmFyIHAgaW4gZil7dmFyIG09ZltwXSxxPW5ldyBkKGMsYSk7Im5hbWUiaW4gZSYmIm5hbWVzcGFjZSJpbiBlJiYocS5hdHRyaWJ1dGVOYW1lPWUubmFtZSxxLmF0dHJpYnV0ZU5hbWVzcGFjZT1lLm5hbWVzcGFjZSksZS5hZGRlZE5vZGVzJiYocS5hZGRlZE5vZGVzPWUuYWRkZWROb2RlcyksZS5yZW1vdmVkTm9kZXMmJihxLnJlbW92ZWROb2Rlcz1lLnJlbW92ZWROb2RlcyksZS5wcmV2aW91c1NpYmxpbmcmJihxLnByZXZpb3VzU2libGluZz1lLnByZXZpb3VzU2libGluZyksZS5uZXh0U2libGluZyYmKHEubmV4dFNpYmxpbmc9ZS5uZXh0U2libGluZyksdm9pZCAwIT09Z1twXSYmKHEub2xkVmFsdWU9Z1twXSksbS5yZWNvcmRzXy5wdXNoKHEpLG89ITB9byYmYigpfWZ1bmN0aW9uIGgoYSl7aWYodGhpcy5jaGlsZExpc3Q9ISFhLmNoaWxkTGlzdCx0aGlzLnN1YnRyZWU9ISFhLnN1YnRyZWUsdGhpcy5hdHRyaWJ1dGVzPSJhdHRyaWJ1dGVzImluIGF8fCEoImF0dHJpYnV0ZU9sZFZhbHVlImluIGF8fCJhdHRyaWJ1dGVGaWx0ZXIiaW4gYSk/ISFhLmF0dHJpYnV0ZXM6ITAsdGhpcy5jaGFyYWN0ZXJEYXRhPSJjaGFyYWN0ZXJEYXRhT2xkVmFsdWUiaW4gYSYmISgiY2hhcmFjdGVyRGF0YSJpbiBhKT8hMDohIWEuY2hhcmFjdGVyRGF0YSwhdGhpcy5hdHRyaWJ1dGVzJiYoYS5hdHRyaWJ1dGVPbGRWYWx1ZXx8ImF0dHJpYnV0ZUZpbHRlciJpbiBhKXx8IXRoaXMuY2hhcmFjdGVyRGF0YSYmYS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpdGhyb3cgbmV3IFR5cGVFcnJvcjtpZih0aGlzLmNoYXJhY3RlckRhdGE9ISFhLmNoYXJhY3RlckRhdGEsdGhpcy5hdHRyaWJ1dGVPbGRWYWx1ZT0hIWEuYXR0cmlidXRlT2xkVmFsdWUsdGhpcy5jaGFyYWN0ZXJEYXRhT2xkVmFsdWU9ISFhLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSwiYXR0cmlidXRlRmlsdGVyImluIGEpe2lmKG51bGw9PWEuYXR0cmlidXRlRmlsdGVyfHwib2JqZWN0IiE9dHlwZW9mIGEuYXR0cmlidXRlRmlsdGVyKXRocm93IG5ldyBUeXBlRXJyb3I7dGhpcy5hdHRyaWJ1dGVGaWx0ZXI9cS5jYWxsKGEuYXR0cmlidXRlRmlsdGVyKX1lbHNlIHRoaXMuYXR0cmlidXRlRmlsdGVyPW51bGx9ZnVuY3Rpb24gaShhKXt0aGlzLmNhbGxiYWNrXz1hLHRoaXMubm9kZXNfPVtdLHRoaXMucmVjb3Jkc189W10sdGhpcy51aWRfPSsrcixvLnB1c2godGhpcyl9ZnVuY3Rpb24gaihhLGIsYyl7dGhpcy5vYnNlcnZlcj1hLHRoaXMudGFyZ2V0PWIsdGhpcy5vcHRpb25zPWMsdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdfXZhciBrPWEuc2V0RW5kT2ZNaWNyb3Rhc2ssbD1hLndyYXBJZk5lZWRlZCxtPWEud3JhcHBlcnMsbj1uZXcgV2Vha01hcCxvPVtdLHA9ITEscT1BcnJheS5wcm90b3R5cGUuc2xpY2Uscj0wO2kucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGEsYil7YT1sKGEpO3ZhciBjLGQ9bmV3IGgoYiksZT1uLmdldChhKTtlfHxuLnNldChhLGU9W10pO2Zvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKWVbZl0ub2JzZXJ2ZXI9PT10aGlzJiYoYz1lW2ZdLGMucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCksYy5vcHRpb25zPWQpO2N8fChjPW5ldyBqKHRoaXMsYSxkKSxlLnB1c2goYyksdGhpcy5ub2Rlc18ucHVzaChhKSl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1uLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107aWYoZC5vYnNlcnZlcj09PXRoaXMpe2Iuc3BsaWNlKGMsMSk7YnJlYWt9fX0sdGhpcyksdGhpcy5yZWNvcmRzXz1bXX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlY29yZHNfO3JldHVybiB0aGlzLnJlY29yZHNfPVtdLGF9fSxqLnByb3RvdHlwZT17YWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXMucHVzaChhKTt2YXIgYj1uLmdldChhKTtifHxuLnNldChhLGI9W10pLGIucHVzaCh0aGlzKX19LHJlbW92ZVRyYW5zaWVudE9ic2VydmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlczt0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W107Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspZm9yKHZhciBjPWFbYl0sZD1uLmdldChjKSxlPTA7ZTxkLmxlbmd0aDtlKyspaWYoZFtlXT09PXRoaXMpe2Quc3BsaWNlKGUsMSk7YnJlYWt9fX0sYS5lbnF1ZXVlTXV0YXRpb249ZyxhLnJlZ2lzdGVyVHJhbnNpZW50T2JzZXJ2ZXJzPWUsYS53cmFwcGVycy5NdXRhdGlvbk9ic2VydmVyPWksYS53cmFwcGVycy5NdXRhdGlvblJlY29yZD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhIGluc3RhbmNlb2YgUS5TaGFkb3dSb290fWZ1bmN0aW9uIGMoYSl7dmFyIGI9YS5sb2NhbE5hbWU7cmV0dXJuImNvbnRlbnQiPT09Ynx8InNoYWRvdyI9PT1ifWZ1bmN0aW9uIGQoYSl7cmV0dXJuISFhLnNoYWRvd1Jvb3R9ZnVuY3Rpb24gZShhKXt2YXIgYjtyZXR1cm4gYS5wYXJlbnROb2RlfHwoYj1hLmRlZmF1bHRWaWV3KSYmUChiKXx8bnVsbH1mdW5jdGlvbiBmKGYsZyxoKXtpZihoLmxlbmd0aClyZXR1cm4gaC5zaGlmdCgpO2lmKGIoZikpcmV0dXJuIGooZil8fGYuaG9zdDt2YXIgaT1hLmV2ZW50UGFyZW50c1RhYmxlLmdldChmKTtpZihpKXtmb3IodmFyIGs9MTtrPGkubGVuZ3RoO2srKyloW2stMV09aVtrXTtyZXR1cm4gaVswXX1pZihnJiZjKGYpKXt2YXIgbD1mLnBhcmVudE5vZGU7aWYobCYmZChsKSlmb3IodmFyIG09YS5nZXRTaGFkb3dUcmVlcyhsKSxuPWooZyksaz0wO2s8bS5sZW5ndGg7aysrKWlmKG1ba10uY29udGFpbnMobikpcmV0dXJuIG59cmV0dXJuIGUoZil9ZnVuY3Rpb24gZyhhKXtmb3IodmFyIGQ9W10sZT1hLGc9W10saT1bXTtlOyl7dmFyIGo9bnVsbDtpZihjKGUpKXtqPWgoZCk7dmFyIGs9ZFtkLmxlbmd0aC0xXXx8ZTtkLnB1c2goayl9ZWxzZSBkLmxlbmd0aHx8ZC5wdXNoKGUpO3ZhciBsPWRbZC5sZW5ndGgtMV07Zy5wdXNoKHt0YXJnZXQ6bCxjdXJyZW50VGFyZ2V0OmV9KSxiKGUpJiZkLnBvcCgpLGU9ZihlLGosaSl9cmV0dXJuIGd9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9YS5sZW5ndGgtMTtiPj0wO2ItLSlpZighYyhhW2JdKSlyZXR1cm4gYVtiXTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBpKGEsZCl7Zm9yKHZhciBlPVtdO2E7KXtmb3IodmFyIGc9W10saT1kLGo9dm9pZCAwO2k7KXt2YXIgbD1udWxsO2lmKGcubGVuZ3RoKXtpZihjKGkpJiYobD1oKGcpLGsoaikpKXt2YXIgbj1nW2cubGVuZ3RoLTFdO2cucHVzaChuKX19ZWxzZSBnLnB1c2goaSk7aWYobShpLGEpKXJldHVybiBnW2cubGVuZ3RoLTFdO2IoaSkmJmcucG9wKCksaj1pLGk9ZihpLGwsZSl9YT1iKGEpP2EuaG9zdDphLnBhcmVudE5vZGV9fWZ1bmN0aW9uIGooYil7cmV0dXJuIGEuaW5zZXJ0aW9uUGFyZW50VGFibGUuZ2V0KGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIGooYSl9ZnVuY3Rpb24gbChhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBtKGEsYil7cmV0dXJuIGwoYSk9PT1sKGIpfWZ1bmN0aW9uIG4oYSxiKXtyZXR1cm4gYT09PWI/ITA6YSBpbnN0YW5jZW9mIFEuU2hhZG93Um9vdD9uKGwoYS5ob3N0KSxiKTohMX1mdW5jdGlvbiBvKGEpe3JldHVybiBTLmdldChhKT92b2lkIDA6KFMuc2V0KGEsITApLHAoUChhKSxQKGEudGFyZ2V0KSkpfWZ1bmN0aW9uIHAoYixjKXtpZihULmdldChiKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWRTdGF0ZUVycm9yIik7VC5zZXQoYiwhMCksYS5yZW5kZXJBbGxQZW5kaW5nKCk7dmFyIGQ9ZyhjKTtyZXR1cm4ibG9hZCI9PT1iLnR5cGUmJjI9PT1kLmxlbmd0aCYmZFswXS50YXJnZXQgaW5zdGFuY2VvZiBRLkRvY3VtZW50JiZkLnNoaWZ0KCksXy5zZXQoYixkKSxxKGIsZCkmJnIoYixkKSYmcyhiLGQpLFguc2V0KGIsdi5OT05FKSxWLmRlbGV0ZShiLG51bGwpLFQuZGVsZXRlKGIpLGIuZGVmYXVsdFByZXZlbnRlZH1mdW5jdGlvbiBxKGEsYil7Zm9yKHZhciBjLGQ9Yi5sZW5ndGgtMTtkPjA7ZC0tKXt2YXIgZT1iW2RdLnRhcmdldCxmPWJbZF0uY3VycmVudFRhcmdldDtpZihlIT09ZiYmKGM9di5DQVBUVVJJTkdfUEhBU0UsIXQoYltkXSxhLGMpKSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiByKGEsYil7dmFyIGM9di5BVF9UQVJHRVQ7cmV0dXJuIHQoYlswXSxhLGMpfWZ1bmN0aW9uIHMoYSxiKXtmb3IodmFyIGMsZD1hLmJ1YmJsZXMsZT0xO2U8Yi5sZW5ndGg7ZSsrKXt2YXIgZj1iW2VdLnRhcmdldCxnPWJbZV0uY3VycmVudFRhcmdldDtpZihmPT09ZyljPXYuQVRfVEFSR0VUO2Vsc2V7aWYoIWR8fFouZ2V0KGEpKWNvbnRpbnVlO2M9di5CVUJCTElOR19QSEFTRX1pZighdChiW2VdLGEsYykpcmV0dXJufX1mdW5jdGlvbiB0KGEsYixjKXt2YXIgZD1hLnRhcmdldCxlPWEuY3VycmVudFRhcmdldCxmPVIuZ2V0KGUpO2lmKCFmKXJldHVybiEwO2lmKCJyZWxhdGVkVGFyZ2V0ImluIGIpe3ZhciBnPU8oYik7aWYoZy5yZWxhdGVkVGFyZ2V0KXt2YXIgaD1QKGcucmVsYXRlZFRhcmdldCksaj1pKGUsaCk7aWYoaj09PWQpcmV0dXJuITA7Vy5zZXQoYixqKX19WC5zZXQoYixjKTt2YXIgaz1iLnR5cGUsbD0hMTtVLnNldChiLGQpLFYuc2V0KGIsZSk7Zm9yKHZhciBtPTA7bTxmLmxlbmd0aDttKyspe3ZhciBuPWZbbV07aWYobi5yZW1vdmVkKWw9ITA7ZWxzZSBpZighKG4udHlwZSE9PWt8fCFuLmNhcHR1cmUmJmM9PT12LkNBUFRVUklOR19QSEFTRXx8bi5jYXB0dXJlJiZjPT09di5CVUJCTElOR19QSEFTRSkpdHJ5e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuLmhhbmRsZXI/bi5oYW5kbGVyLmNhbGwoZSxiKTpuLmhhbmRsZXIuaGFuZGxlRXZlbnQoYiksWi5nZXQoYikpcmV0dXJuITF9Y2F0Y2gobyl7d2luZG93Lm9uZXJyb3I/d2luZG93Lm9uZXJyb3Ioby5tZXNzYWdlKTpjb25zb2xlLmVycm9yKG8sby5zdGFjayl9fWlmKGwpe3ZhciBwPWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgbT0wO208cC5sZW5ndGg7bSsrKXBbbV0ucmVtb3ZlZHx8Zi5wdXNoKHBbbV0pfXJldHVybiFZLmdldChiKX1mdW5jdGlvbiB1KGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB2KGEsYil7cmV0dXJuIGEgaW5zdGFuY2VvZiBhYj92b2lkKHRoaXMuaW1wbD1hKTpQKHooYWIsIkV2ZW50IixhLGIpKX1mdW5jdGlvbiB3KGEpe3JldHVybiBhJiZhLnJlbGF0ZWRUYXJnZXQ/T2JqZWN0LmNyZWF0ZShhLHtyZWxhdGVkVGFyZ2V0Ont2YWx1ZTpPKGEucmVsYXRlZFRhcmdldCl9fSk6YX1mdW5jdGlvbiB4KGEsYixjKXt2YXIgZD13aW5kb3dbYV0sZT1mdW5jdGlvbihiLGMpe3JldHVybiBiIGluc3RhbmNlb2YgZD92b2lkKHRoaXMuaW1wbD1iKTpQKHooZCxhLGIsYykpfTtpZihlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxjJiZNKGUucHJvdG90eXBlLGMpLGQpdHJ5e04oZCxlLG5ldyBkKCJ0ZW1wIikpfWNhdGNoKGYpe04oZCxlLGRvY3VtZW50LmNyZWF0ZUV2ZW50KGEpKX1yZXR1cm4gZX1mdW5jdGlvbiB5KGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7YXJndW1lbnRzW2JdPU8oYXJndW1lbnRzW2JdKTt2YXIgYz1PKHRoaXMpO2NbYV0uYXBwbHkoYyxhcmd1bWVudHMpfX1mdW5jdGlvbiB6KGEsYixjLGQpe2lmKGpiKXJldHVybiBuZXcgYShjLHcoZCkpO3ZhciBlPU8oZG9jdW1lbnQuY3JlYXRlRXZlbnQoYikpLGY9aWJbYl0sZz1bY107cmV0dXJuIE9iamVjdC5rZXlzKGYpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9bnVsbCE9ZCYmYSBpbiBkP2RbYV06ZlthXTsicmVsYXRlZFRhcmdldCI9PT1hJiYoYj1PKGIpKSxnLnB1c2goYil9KSxlWyJpbml0IitiXS5hcHBseShlLGcpLGV9ZnVuY3Rpb24gQSgpe3YuY2FsbCh0aGlzKX1mdW5jdGlvbiBCKGEpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhPyEwOmEmJmEuaGFuZGxlRXZlbnR9ZnVuY3Rpb24gQyhhKXtzd2l0Y2goYSl7Y2FzZSJET01BdHRyTW9kaWZpZWQiOmNhc2UiRE9NQXR0cmlidXRlTmFtZUNoYW5nZWQiOmNhc2UiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIjpjYXNlIkRPTUVsZW1lbnROYW1lQ2hhbmdlZCI6Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOmNhc2UiRE9NTm9kZUluc2VydGVkSW50b0RvY3VtZW50IjpjYXNlIkRPTU5vZGVSZW1vdmVkIjpjYXNlIkRPTU5vZGVSZW1vdmVkRnJvbURvY3VtZW50IjpjYXNlIkRPTVN1YnRyZWVNb2RpZmllZCI6cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gRChhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBFKGEpe3JldHVybiBhIGluc3RhbmNlb2YgUS5TaGFkb3dSb290JiYoYT1hLmhvc3QpLE8oYSl9ZnVuY3Rpb24gRihhLGIpe3ZhciBjPVIuZ2V0KGEpO2lmKGMpZm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspaWYoIWNbZF0ucmVtb3ZlZCYmY1tkXS50eXBlPT09YilyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBHKGEsYil7Zm9yKHZhciBjPU8oYSk7YztjPWMucGFyZW50Tm9kZSlpZihGKFAoYyksYikpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gSChhKXtMKGEsbWIpfWZ1bmN0aW9uIEkoYixjLGQsZSl7YS5yZW5kZXJBbGxQZW5kaW5nKCk7Zm9yKHZhciBmPVAobmIuY2FsbChjLmltcGwsZCxlKSksaD1nKGYsdGhpcyksaT0wO2k8aC5sZW5ndGg7aSsrKXt2YXIgaj1oW2ldO2lmKGouY3VycmVudFRhcmdldD09PWIpcmV0dXJuIGoudGFyZ2V0fXJldHVybiBudWxsfWZ1bmN0aW9uIEooYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9JC5nZXQodGhpcyk7cmV0dXJuIGImJmJbYV0mJmJbYV0udmFsdWV8fG51bGx9fWZ1bmN0aW9uIEsoYSl7dmFyIGI9YS5zbGljZSgyKTtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9JC5nZXQodGhpcyk7ZHx8KGQ9T2JqZWN0LmNyZWF0ZShudWxsKSwkLnNldCh0aGlzLGQpKTt2YXIgZT1kW2FdO2lmKGUmJnRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGUud3JhcHBlZCwhMSksImZ1bmN0aW9uIj09dHlwZW9mIGMpe3ZhciBmPWZ1bmN0aW9uKGIpe3ZhciBkPWMuY2FsbCh0aGlzLGIpO2Q9PT0hMT9iLnByZXZlbnREZWZhdWx0KCk6Im9uYmVmb3JldW5sb2FkIj09PWEmJiJzdHJpbmciPT10eXBlb2YgZCYmKGIucmV0dXJuVmFsdWU9ZCl9O3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihiLGYsITEpLGRbYV09e3ZhbHVlOmMsd3JhcHBlZDpmfX19fXZhciBMPWEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIsTT1hLm1peGluLE49YS5yZWdpc3RlcldyYXBwZXIsTz1hLnVud3JhcCxQPWEud3JhcCxRPWEud3JhcHBlcnMsUj0obmV3IFdlYWtNYXAsbmV3IFdlYWtNYXApLFM9bmV3IFdlYWtNYXAsVD1uZXcgV2Vha01hcCxVPW5ldyBXZWFrTWFwLFY9bmV3IFdlYWtNYXAsVz1uZXcgV2Vha01hcCxYPW5ldyBXZWFrTWFwLFk9bmV3IFdlYWtNYXAsWj1uZXcgV2Vha01hcCwkPW5ldyBXZWFrTWFwLF89bmV3IFdlYWtNYXA7dS5wcm90b3R5cGU9e2VxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGVyPT09YS5oYW5kbGVyJiZ0aGlzLnR5cGU9PT1hLnR5cGUmJnRoaXMuY2FwdHVyZT09PWEuY2FwdHVyZX0sZ2V0IHJlbW92ZWQoKXtyZXR1cm4gbnVsbD09PXRoaXMuaGFuZGxlcn0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW51bGx9fTt2YXIgYWI9d2luZG93LkV2ZW50O2FiLnByb3RvdHlwZS5wb2x5bWVyQmxhY2tMaXN0Xz17cmV0dXJuVmFsdWU6ITAsa2V5TG9jYXRpb246ITB9LHYucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIFUuZ2V0KHRoaXMpfSxnZXQgY3VycmVudFRhcmdldCgpe3JldHVybiBWLmdldCh0aGlzKX0sZ2V0IGV2ZW50UGhhc2UoKXtyZXR1cm4gWC5nZXQodGhpcyl9LGdldCBwYXRoKCl7dmFyIGE9bmV3IFEuTm9kZUxpc3QsYj1fLmdldCh0aGlzKTtpZihiKXtmb3IodmFyIGM9MCxkPWIubGVuZ3RoLTEsZT1sKFYuZ2V0KHRoaXMpKSxmPTA7ZD49ZjtmKyspe3ZhciBnPWJbZl0uY3VycmVudFRhcmdldCxoPWwoZyk7bihlLGgpJiYoZiE9PWR8fGcgaW5zdGFuY2VvZiBRLk5vZGUpJiYoYVtjKytdPWcpfWEubGVuZ3RoPWN9cmV0dXJuIGF9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe1kuc2V0KHRoaXMsITApfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtZLnNldCh0aGlzLCEwKSxaLnNldCh0aGlzLCEwKX19LE4oYWIsdixkb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSk7dmFyIGJiPXgoIlVJRXZlbnQiLHYpLGNiPXgoIkN1c3RvbUV2ZW50Iix2KSxkYj17Z2V0IHJlbGF0ZWRUYXJnZXQoKXtyZXR1cm4gVy5nZXQodGhpcyl8fFAoTyh0aGlzKS5yZWxhdGVkVGFyZ2V0KX19LGViPU0oe2luaXRNb3VzZUV2ZW50OnkoImluaXRNb3VzZUV2ZW50IiwxNCl9LGRiKSxmYj1NKHtpbml0Rm9jdXNFdmVudDp5KCJpbml0Rm9jdXNFdmVudCIsNSl9LGRiKSxnYj14KCJNb3VzZUV2ZW50IixiYixlYiksaGI9eCgiRm9jdXNFdmVudCIsYmIsZmIpLGliPU9iamVjdC5jcmVhdGUobnVsbCksamI9ZnVuY3Rpb24oKXt0cnl7bmV3IHdpbmRvdy5Gb2N1c0V2ZW50KCJmb2N1cyIpfWNhdGNoKGEpe3JldHVybiExfXJldHVybiEwfSgpO2lmKCFqYil7dmFyIGtiPWZ1bmN0aW9uKGEsYixjKXtpZihjKXt2YXIgZD1pYltjXTtiPU0oTSh7fSxkKSxiKX1pYlthXT1ifTtrYigiRXZlbnQiLHtidWJibGVzOiExLGNhbmNlbGFibGU6ITF9KSxrYigiQ3VzdG9tRXZlbnQiLHtkZXRhaWw6bnVsbH0sIkV2ZW50Iiksa2IoIlVJRXZlbnQiLHt2aWV3Om51bGwsZGV0YWlsOjB9LCJFdmVudCIpLGtiKCJNb3VzZUV2ZW50Iix7c2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpLGtiKCJGb2N1c0V2ZW50Iix7cmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpfUEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodi5wcm90b3R5cGUpLE0oQS5wcm90b3R5cGUse2dldCByZXR1cm5WYWx1ZSgpe3JldHVybiB0aGlzLmltcGwucmV0dXJuVmFsdWV9LHNldCByZXR1cm5WYWx1ZShhKXt0aGlzLmltcGwucmV0dXJuVmFsdWU9YQp9fSk7dmFyIGxiPXdpbmRvdy5FdmVudFRhcmdldCxtYj1bImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdO1tOb2RlLFdpbmRvd10uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnByb3RvdHlwZTttYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLGErIl8iLHt2YWx1ZTpiW2FdfSl9KX0pLEQucHJvdG90eXBlPXthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtpZihCKGIpJiYhQyhhKSl7dmFyIGQ9bmV3IHUoYSxiLGMpLGU9Ui5nZXQodGhpcyk7aWYoZSl7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspaWYoZC5lcXVhbHMoZVtmXSkpcmV0dXJufWVsc2UgZT1bXSxSLnNldCh0aGlzLGUpO2UucHVzaChkKTt2YXIgZz1FKHRoaXMpO2cuYWRkRXZlbnRMaXN0ZW5lcl8oYSxvLCEwKX19LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2M9Qm9vbGVhbihjKTt2YXIgZD1SLmdldCh0aGlzKTtpZihkKXtmb3IodmFyIGU9MCxmPSExLGc9MDtnPGQubGVuZ3RoO2crKylkW2ddLnR5cGU9PT1hJiZkW2ddLmNhcHR1cmU9PT1jJiYoZSsrLGRbZ10uaGFuZGxlcj09PWImJihmPSEwLGRbZ10ucmVtb3ZlKCkpKTtpZihmJiYxPT09ZSl7dmFyIGg9RSh0aGlzKTtoLnJlbW92ZUV2ZW50TGlzdGVuZXJfKGEsbywhMCl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihiKXt2YXIgYz1PKGIpLGQ9Yy50eXBlO1Muc2V0KGMsITEpLGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBlO0codGhpcyxkKXx8KGU9ZnVuY3Rpb24oKXt9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkLGUsITApKTt0cnl7cmV0dXJuIE8odGhpcykuZGlzcGF0Y2hFdmVudF8oYyl9ZmluYWxseXtlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxlLCEwKX19fSxsYiYmTihsYixEKTt2YXIgbmI9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludDthLmFkanVzdFJlbGF0ZWRUYXJnZXQ9aSxhLmVsZW1lbnRGcm9tUG9pbnQ9SSxhLmdldEV2ZW50SGFuZGxlckdldHRlcj1KLGEuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyPUssYS53cmFwRXZlbnRUYXJnZXRNZXRob2RzPUgsYS53cmFwcGVycy5CZWZvcmVVbmxvYWRFdmVudD1BLGEud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9Y2IsYS53cmFwcGVycy5FdmVudD12LGEud3JhcHBlcnMuRXZlbnRUYXJnZXQ9RCxhLndyYXBwZXJzLkZvY3VzRXZlbnQ9aGIsYS53cmFwcGVycy5Nb3VzZUV2ZW50PWdiLGEud3JhcHBlcnMuVUlFdmVudD1iYn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse2VudW1lcmFibGU6ITF9KX1mdW5jdGlvbiBjKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGQoYSl7aWYobnVsbD09YSlyZXR1cm4gYTtmb3IodmFyIGI9bmV3IGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyliW2RdPWYoYVtkXSk7cmV0dXJuIGIubGVuZ3RoPWUsYn1mdW5jdGlvbiBlKGEsYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX12YXIgZj1hLndyYXA7Yy5wcm90b3R5cGU9e2l0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19fSxiKGMucHJvdG90eXBlLCJpdGVtIiksYS53cmFwcGVycy5Ob2RlTGlzdD1jLGEuYWRkV3JhcE5vZGVMaXN0TWV0aG9kPWUsYS53cmFwTm9kZUxpc3Q9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt3KGEgaW5zdGFuY2VvZiB0KX1mdW5jdGlvbiBjKGEpe3ZhciBiPW5ldyB2O3JldHVybiBiWzBdPWEsYi5sZW5ndGg9MSxifWZ1bmN0aW9uIGQoYSxiLGMpe3koYiwiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmMscHJldmlvdXNTaWJsaW5nOmEucHJldmlvdXNTaWJsaW5nLG5leHRTaWJsaW5nOmEubmV4dFNpYmxpbmd9KX1mdW5jdGlvbiBlKGEsYil7eShhLCJjaGlsZExpc3QiLHtyZW1vdmVkTm9kZXM6Yn0pfWZ1bmN0aW9uIGYoYSxiLGQsZSl7aWYoYSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpe3ZhciBmPWgoYSk7Rz0hMDtmb3IodmFyIGc9Zi5sZW5ndGgtMTtnPj0wO2ctLSlhLnJlbW92ZUNoaWxkKGZbZ10pLGZbZ10ucGFyZW50Tm9kZV89YjtHPSExO2Zvcih2YXIgZz0wO2c8Zi5sZW5ndGg7ZysrKWZbZ10ucHJldmlvdXNTaWJsaW5nXz1mW2ctMV18fGQsZltnXS5uZXh0U2libGluZ189ZltnKzFdfHxlO3JldHVybiBkJiYoZC5uZXh0U2libGluZ189ZlswXSksZSYmKGUucHJldmlvdXNTaWJsaW5nXz1mW2YubGVuZ3RoLTFdKSxmfXZhciBmPWMoYSksaT1hLnBhcmVudE5vZGU7cmV0dXJuIGkmJmkucmVtb3ZlQ2hpbGQoYSksYS5wYXJlbnROb2RlXz1iLGEucHJldmlvdXNTaWJsaW5nXz1kLGEubmV4dFNpYmxpbmdfPWUsZCYmKGQubmV4dFNpYmxpbmdfPWEpLGUmJihlLnByZXZpb3VzU2libGluZ189YSksZn1mdW5jdGlvbiBnKGEpe2lmKGEgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXJldHVybiBoKGEpO3ZhciBiPWMoYSksZT1hLnBhcmVudE5vZGU7cmV0dXJuIGUmJmQoYSxlLGIpLGJ9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9bmV3IHYsYz0wLGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWJbYysrXT1kO3JldHVybiBiLmxlbmd0aD1jLGUoYSxiKSxifWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gaihhKXthLm5vZGVJc0luc2VydGVkXygpfWZ1bmN0aW9uIGsoYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspaihhW2JdKX1mdW5jdGlvbiBsKCl7fWZ1bmN0aW9uIG0oKXt9ZnVuY3Rpb24gbihhLGIpe3ZhciBjPWEubm9kZVR5cGU9PT10LkRPQ1VNRU5UX05PREU/YTphLm93bmVyRG9jdW1lbnQ7YyE9PWIub3duZXJEb2N1bWVudCYmYy5hZG9wdE5vZGUoYil9ZnVuY3Rpb24gbyhiLGMpe2lmKGMubGVuZ3RoKXt2YXIgZD1iLm93bmVyRG9jdW1lbnQ7aWYoZCE9PWNbMF0ub3duZXJEb2N1bWVudClmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKylhLmFkb3B0Tm9kZU5vUmVtb3ZlKGNbZV0sZCl9fWZ1bmN0aW9uIHAoYSxiKXtvKGEsYik7dmFyIGM9Yi5sZW5ndGg7aWYoMT09PWMpcmV0dXJuIEQoYlswXSk7Zm9yKHZhciBkPUQoYS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZT0wO2M+ZTtlKyspZC5hcHBlbmRDaGlsZChEKGJbZV0pKTtyZXR1cm4gZH1mdW5jdGlvbiBxKGEpe2lmKHZvaWQgMCE9PWEuZmlyc3RDaGlsZF8pZm9yKHZhciBiPWEuZmlyc3RDaGlsZF87Yjspe3ZhciBjPWI7Yj1iLm5leHRTaWJsaW5nXyxjLnBhcmVudE5vZGVfPWMucHJldmlvdXNTaWJsaW5nXz1jLm5leHRTaWJsaW5nXz12b2lkIDB9YS5maXJzdENoaWxkXz1hLmxhc3RDaGlsZF89dm9pZCAwfWZ1bmN0aW9uIHIoYSl7aWYoYS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7Zm9yKHZhciBiPWEuZmlyc3RDaGlsZDtiOyl7dyhiLnBhcmVudE5vZGU9PT1hKTt2YXIgYz1iLm5leHRTaWJsaW5nLGQ9RChiKSxlPWQucGFyZW50Tm9kZTtlJiZMLmNhbGwoZSxkKSxiLnByZXZpb3VzU2libGluZ189Yi5uZXh0U2libGluZ189Yi5wYXJlbnROb2RlXz1udWxsLGI9Y31hLmZpcnN0Q2hpbGRfPWEubGFzdENoaWxkXz1udWxsfWVsc2UgZm9yKHZhciBjLGY9RChhKSxnPWYuZmlyc3RDaGlsZDtnOyljPWcubmV4dFNpYmxpbmcsTC5jYWxsKGYsZyksZz1jfWZ1bmN0aW9uIHMoYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiZiLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfWZ1bmN0aW9uIHQoYSl7dyhhIGluc3RhbmNlb2YgSCksdS5jYWxsKHRoaXMsYSksdGhpcy5wYXJlbnROb2RlXz12b2lkIDAsdGhpcy5maXJzdENoaWxkXz12b2lkIDAsdGhpcy5sYXN0Q2hpbGRfPXZvaWQgMCx0aGlzLm5leHRTaWJsaW5nXz12b2lkIDAsdGhpcy5wcmV2aW91c1NpYmxpbmdfPXZvaWQgMH12YXIgdT1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LHY9YS53cmFwcGVycy5Ob2RlTGlzdCx3PWEuYXNzZXJ0LHg9YS5kZWZpbmVXcmFwR2V0dGVyLHk9YS5lbnF1ZXVlTXV0YXRpb24sej1hLmlzV3JhcHBlcixBPWEubWl4aW4sQj1hLnJlZ2lzdGVyVHJhbnNpZW50T2JzZXJ2ZXJzLEM9YS5yZWdpc3RlcldyYXBwZXIsRD1hLnVud3JhcCxFPWEud3JhcCxGPWEud3JhcElmTmVlZGVkLEc9ITEsSD13aW5kb3cuTm9kZSxJPXdpbmRvdy5Eb2N1bWVudEZyYWdtZW50LEo9KEgucHJvdG90eXBlLmFwcGVuZENoaWxkLEgucHJvdG90eXBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSxLPUgucHJvdG90eXBlLmluc2VydEJlZm9yZSxMPUgucHJvdG90eXBlLnJlbW92ZUNoaWxkLE09SC5wcm90b3R5cGUucmVwbGFjZUNoaWxkLE49L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksTz1OP2Z1bmN0aW9uKGEsYil7dHJ5e0wuY2FsbChhLGIpfWNhdGNoKGMpe2lmKCEoYSBpbnN0YW5jZW9mIEkpKXRocm93IGN9fTpmdW5jdGlvbihhLGIpe0wuY2FsbChhLGIpfTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxBKHQucHJvdG90eXBlLHthcHBlbmRDaGlsZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUoYSxudWxsKX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGEsYyl7YihhKTt2YXIgZDtjP3ooYyk/ZD1EKGMpOihkPWMsYz1FKGQpKTooYz1udWxsLGQ9bnVsbCksYyYmdyhjLnBhcmVudE5vZGU9PT10aGlzKTt2YXIgZSxoPWM/Yy5wcmV2aW91c1NpYmxpbmc6dGhpcy5sYXN0Q2hpbGQsaT0hdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSYmIXMoYSk7aWYoZT1pP2coYSk6ZihhLHRoaXMsaCxjKSxpKW4odGhpcyxhKSxxKHRoaXMpLEsuY2FsbCh0aGlzLmltcGwsRChhKSxkKTtlbHNle2h8fCh0aGlzLmZpcnN0Q2hpbGRfPWVbMF0pLGN8fCh0aGlzLmxhc3RDaGlsZF89ZVtlLmxlbmd0aC0xXSk7dmFyIGo9ZD9kLnBhcmVudE5vZGU6dGhpcy5pbXBsO2o/Sy5jYWxsKGoscCh0aGlzLGUpLGQpOm8odGhpcyxlKX1yZXR1cm4geSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmUsbmV4dFNpYmxpbmc6YyxwcmV2aW91c1NpYmxpbmc6aH0pLGsoZSksYX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSl7aWYoYihhKSxhLnBhcmVudE5vZGUhPT10aGlzKXtmb3IodmFyIGQ9ITEsZT0odGhpcy5jaGlsZE5vZGVzLHRoaXMuZmlyc3RDaGlsZCk7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZT09PWEpe2Q9ITA7YnJlYWt9aWYoIWQpdGhyb3cgbmV3IEVycm9yKCJOb3RGb3VuZEVycm9yIil9dmFyIGY9RChhKSxnPWEubmV4dFNpYmxpbmcsaD1hLnByZXZpb3VzU2libGluZztpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXt2YXIgaT10aGlzLmZpcnN0Q2hpbGQsaj10aGlzLmxhc3RDaGlsZCxrPWYucGFyZW50Tm9kZTtrJiZPKGssZiksaT09PWEmJih0aGlzLmZpcnN0Q2hpbGRfPWcpLGo9PT1hJiYodGhpcy5sYXN0Q2hpbGRfPWgpLGgmJihoLm5leHRTaWJsaW5nXz1nKSxnJiYoZy5wcmV2aW91c1NpYmxpbmdfPWgpLGEucHJldmlvdXNTaWJsaW5nXz1hLm5leHRTaWJsaW5nXz1hLnBhcmVudE5vZGVfPXZvaWQgMH1lbHNlIHEodGhpcyksTyh0aGlzLmltcGwsZik7cmV0dXJuIEd8fHkodGhpcywiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmMoYSksbmV4dFNpYmxpbmc6ZyxwcmV2aW91c1NpYmxpbmc6aH0pLEIodGhpcyxhKSxhfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxkKXtiKGEpO3ZhciBlO2lmKHooZCk/ZT1EKGQpOihlPWQsZD1FKGUpKSxkLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3ZhciBoLGk9ZC5uZXh0U2libGluZyxqPWQucHJldmlvdXNTaWJsaW5nLG09IXRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkmJiFzKGEpO3JldHVybiBtP2g9ZyhhKTooaT09PWEmJihpPWEubmV4dFNpYmxpbmcpLGg9ZihhLHRoaXMsaixpKSksbT8obih0aGlzLGEpLHEodGhpcyksTS5jYWxsKHRoaXMuaW1wbCxEKGEpLGUpKToodGhpcy5maXJzdENoaWxkPT09ZCYmKHRoaXMuZmlyc3RDaGlsZF89aFswXSksdGhpcy5sYXN0Q2hpbGQ9PT1kJiYodGhpcy5sYXN0Q2hpbGRfPWhbaC5sZW5ndGgtMV0pLGQucHJldmlvdXNTaWJsaW5nXz1kLm5leHRTaWJsaW5nXz1kLnBhcmVudE5vZGVfPXZvaWQgMCxlLnBhcmVudE5vZGUmJk0uY2FsbChlLnBhcmVudE5vZGUscCh0aGlzLGgpLGUpKSx5KHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6aCxyZW1vdmVkTm9kZXM6YyhkKSxuZXh0U2libGluZzppLHByZXZpb3VzU2libGluZzpqfSksbChkKSxrKGgpLGR9LG5vZGVJc0luc2VydGVkXzpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYS5ub2RlSXNJbnNlcnRlZF8oKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86RSh0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBmaXJzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZmlyc3RDaGlsZF8/dGhpcy5maXJzdENoaWxkXzpFKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmxhc3RDaGlsZF8/dGhpcy5sYXN0Q2hpbGRfOkUodGhpcy5pbXBsLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpFKHRoaXMuaW1wbC5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5wcmV2aW91c1NpYmxpbmdfP3RoaXMucHJldmlvdXNTaWJsaW5nXzpFKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgcGFyZW50RWxlbWVudCgpe2Zvcih2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5ub2RlVHlwZSE9PXQuRUxFTUVOVF9OT0RFOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX0sZ2V0IHRleHRDb250ZW50KCl7Zm9yKHZhciBhPSIiLGI9dGhpcy5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKWIubm9kZVR5cGUhPXQuQ09NTUVOVF9OT0RFJiYoYSs9Yi50ZXh0Q29udGVudCk7cmV0dXJuIGF9LHNldCB0ZXh0Q29udGVudChhKXt2YXIgYj1pKHRoaXMuY2hpbGROb2Rlcyk7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7aWYocih0aGlzKSwiIiE9PWEpe3ZhciBjPXRoaXMuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpO3RoaXMuYXBwZW5kQ2hpbGQoYyl9fWVsc2UgcSh0aGlzKSx0aGlzLmltcGwudGV4dENvbnRlbnQ9YTt2YXIgZD1pKHRoaXMuY2hpbGROb2Rlcyk7eSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmQscmVtb3ZlZE5vZGVzOmJ9KSxtKGIpLGsoZCl9LGdldCBjaGlsZE5vZGVzKCl7Zm9yKHZhciBhPW5ldyB2LGI9MCxjPXRoaXMuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZylhW2IrK109YztyZXR1cm4gYS5sZW5ndGg9YixhfSxjbG9uZU5vZGU6ZnVuY3Rpb24oYSl7dmFyIGI9RSh0aGlzLmltcGwuY2xvbmVOb2RlKCExKSk7aWYoYSlmb3IodmFyIGM9dGhpcy5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWIuYXBwZW5kQ2hpbGQoYy5jbG9uZU5vZGUoITApKTtyZXR1cm4gYn0sY29udGFpbnM6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuITE7aWYoYT1GKGEpLGE9PT10aGlzKXJldHVybiEwO3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYj90aGlzLmNvbnRhaW5zKGIpOiExfSxjb21wYXJlRG9jdW1lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gSi5jYWxsKHRoaXMuaW1wbCxEKGEpKX19KSx4KHQsIm93bmVyRG9jdW1lbnQiKSxDKEgsdCxkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGRlbGV0ZSB0LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yLGRlbGV0ZSB0LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLHQucHJvdG90eXBlPUEoT2JqZWN0LmNyZWF0ZSh1LnByb3RvdHlwZSksdC5wcm90b3R5cGUpLGEubm9kZVdhc0FkZGVkPWosYS5ub2RlV2FzUmVtb3ZlZD1sLGEubm9kZXNXZXJlQWRkZWQ9ayxhLm5vZGVzV2VyZVJlbW92ZWQ9bSxhLnNuYXBzaG90Tm9kZUxpc3Q9aSxhLndyYXBwZXJzLk5vZGU9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGMpe2Zvcih2YXIgZCxlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7ZTspe2lmKGUubWF0Y2hlcyhjKSlyZXR1cm4gZTtpZihkPWIoZSxjKSlyZXR1cm4gZDtlPWUubmV4dEVsZW1lbnRTaWJsaW5nfXJldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiLGQpe2Zvcih2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KWUubWF0Y2hlcyhiKSYmKGRbZC5sZW5ndGgrK109ZSksYyhlLGIsZCksZT1lLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gZH12YXIgZD17cXVlcnlTZWxlY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gYih0aGlzLGEpfSxxdWVyeVNlbGVjdG9yQWxsOmZ1bmN0aW9uKGEpe3JldHVybiBjKHRoaXMsYSxuZXcgTm9kZUxpc3QpfX0sZT17Z2V0RWxlbWVudHNCeVRhZ05hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbChhKX0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCIuIithKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWVOUzpmdW5jdGlvbihhLGIpe2lmKCIqIj09PWEpcmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYik7Zm9yKHZhciBjPW5ldyBOb2RlTGlzdCxkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYiksZT0wLGY9MDtlPGQubGVuZ3RoO2UrKylkW2VdLm5hbWVzcGFjZVVSST09PWEmJihjW2YrK109ZFtlXSk7cmV0dXJuIGMubGVuZ3RoPWYsY319O2EuR2V0RWxlbWVudHNCeUludGVyZmFjZT1lLGEuU2VsZWN0b3JzSW50ZXJmYWNlPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Zm9yKDthJiZhLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWE9YS5uZXh0U2libGluZztyZXR1cm4gYX1mdW5jdGlvbiBjKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEucHJldmlvdXNTaWJsaW5nO3JldHVybiBhfXZhciBkPWEud3JhcHBlcnMuTm9kZUxpc3QsZT17Z2V0IGZpcnN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGIodGhpcy5maXJzdENoaWxkKX0sZ2V0IGxhc3RFbGVtZW50Q2hpbGQoKXtyZXR1cm4gYyh0aGlzLmxhc3RDaGlsZCl9LGdldCBjaGlsZEVsZW1lbnRDb3VudCgpe2Zvcih2YXIgYT0wLGI9dGhpcy5maXJzdEVsZW1lbnRDaGlsZDtiO2I9Yi5uZXh0RWxlbWVudFNpYmxpbmcpYSsrO3JldHVybiBhfSxnZXQgY2hpbGRyZW4oKXtmb3IodmFyIGE9bmV3IGQsYj0wLGM9dGhpcy5maXJzdEVsZW1lbnRDaGlsZDtjO2M9Yy5uZXh0RWxlbWVudFNpYmxpbmcpYVtiKytdPWM7cmV0dXJuIGEubGVuZ3RoPWIsYX19LGY9e2dldCBuZXh0RWxlbWVudFNpYmxpbmcoKXtyZXR1cm4gYih0aGlzLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzRWxlbWVudFNpYmxpbmcoKXtyZXR1cm4gYyh0aGlzLnByZXZpb3VzU2libGluZyl9fTthLkNoaWxkTm9kZUludGVyZmFjZT1mLGEuUGFyZW50Tm9kZUludGVyZmFjZT1lfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfXZhciBjPWEuQ2hpbGROb2RlSW50ZXJmYWNlLGQ9YS53cmFwcGVycy5Ob2RlLGU9YS5lbnF1ZXVlTXV0YXRpb24sZj1hLm1peGluLGc9YS5yZWdpc3RlcldyYXBwZXIsaD13aW5kb3cuQ2hhcmFjdGVyRGF0YTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxmKGIucHJvdG90eXBlLHtnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoYSl7dGhpcy5kYXRhPWF9LGdldCBkYXRhKCl7cmV0dXJuIHRoaXMuaW1wbC5kYXRhfSxzZXQgZGF0YShhKXt2YXIgYj10aGlzLmltcGwuZGF0YTtlKHRoaXMsImNoYXJhY3RlckRhdGEiLHtvbGRWYWx1ZTpifSksdGhpcy5pbXBsLmRhdGE9YX19KSxmKGIucHJvdG90eXBlLGMpLGcoaCxiLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGE+Pj4wfWZ1bmN0aW9uIGMoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGQ9YS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhLGU9KGEuZW5xdWV1ZU11dGF0aW9uLGEubWl4aW4pLGY9YS5yZWdpc3RlcldyYXBwZXIsZz13aW5kb3cuVGV4dDtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGMucHJvdG90eXBlLHtzcGxpdFRleHQ6ZnVuY3Rpb24oYSl7YT1iKGEpO3ZhciBjPXRoaXMuZGF0YTtpZihhPmMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW5kZXhTaXplRXJyb3IiKTt2YXIgZD1jLnNsaWNlKDAsYSksZT1jLnNsaWNlKGEpO3RoaXMuZGF0YT1kO3ZhciBmPXRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKTtyZXR1cm4gdGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYsdGhpcy5uZXh0U2libGluZyksZn19KSxmKGcsYyxkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGEud3JhcHBlcnMuVGV4dD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIsYyl7dmFyIGQ9Yi5wYXJlbnROb2RlO2lmKGQmJmQuc2hhZG93Um9vdCl7dmFyIGU9YS5nZXRSZW5kZXJlckZvckhvc3QoZCk7ZS5kZXBlbmRzT25BdHRyaWJ1dGUoYykmJmUuaW52YWxpZGF0ZSgpfX1mdW5jdGlvbiBjKGEsYixjKXtrKGEsImF0dHJpYnV0ZXMiLHtuYW1lOmIsbmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6Y30pfWZ1bmN0aW9uIGQoYSl7aC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gZShhLGMsZCl7dmFyIGU9ZHx8YztPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2NdfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsW2NdPWEsYih0aGlzLGUpfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfXZhciBmPWEuQ2hpbGROb2RlSW50ZXJmYWNlLGc9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGg9YS53cmFwcGVycy5Ob2RlLGk9YS5QYXJlbnROb2RlSW50ZXJmYWNlLGo9YS5TZWxlY3RvcnNJbnRlcmZhY2Usaz0oYS5hZGRXcmFwTm9kZUxpc3RNZXRob2QsYS5lbnF1ZXVlTXV0YXRpb24pLGw9YS5taXhpbixtPShhLm9uZU9mLGEucmVnaXN0ZXJXcmFwcGVyKSxuPWEud3JhcHBlcnMsbz13aW5kb3cuRWxlbWVudCxwPVsibWF0Y2hlcyIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIl0uZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBvLnByb3RvdHlwZVthXX0pLHE9cFswXSxyPW8ucHJvdG90eXBlW3FdO2QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpLGwoZC5wcm90b3R5cGUse2NyZWF0ZVNoYWRvd1Jvb3Q6ZnVuY3Rpb24oKXt2YXIgYj1uZXcgbi5TaGFkb3dSb290KHRoaXMpO3RoaXMuaW1wbC5wb2x5bWVyU2hhZG93Um9vdF89Yjt2YXIgYz1hLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzKTtyZXR1cm4gYy5pbnZhbGlkYXRlKCksYn0sZ2V0IHNoYWRvd1Jvb3QoKXtyZXR1cm4gdGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSb290X3x8bnVsbH0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsZCl7dmFyIGU9dGhpcy5pbXBsLmdldEF0dHJpYnV0ZShhKTt0aGlzLmltcGwuc2V0QXR0cmlidXRlKGEsZCksYyh0aGlzLGEsZSksYih0aGlzLGEpfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5pbXBsLmdldEF0dHJpYnV0ZShhKTt0aGlzLmltcGwucmVtb3ZlQXR0cmlidXRlKGEpLGModGhpcyxhLGQpLGIodGhpcyxhKX0sbWF0Y2hlczpmdW5jdGlvbihhKXtyZXR1cm4gci5jYWxsKHRoaXMuaW1wbCxhKX19KSxwLmZvckVhY2goZnVuY3Rpb24oYSl7Im1hdGNoZXMiIT09YSYmKGQucHJvdG90eXBlW2FdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1hdGNoZXMoYSl9KX0pLG8ucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QmJihkLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PWQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QpLGUoZC5wcm90b3R5cGUsImlkIiksZShkLnByb3RvdHlwZSwiY2xhc3NOYW1lIiwiY2xhc3MiKSxsKGQucHJvdG90eXBlLGYpLGwoZC5wcm90b3R5cGUsZyksbChkLnByb3RvdHlwZSxpKSxsKGQucHJvdG90eXBlLGopLG0obyxkLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhudWxsLCJ4IikpLGEubWF0Y2hlc05hbWVzPXAsYS53cmFwcGVycy5FbGVtZW50PWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7c3dpdGNoKGEpe2Nhc2UiJiI6cmV0dXJuIiZhbXA7IjtjYXNlIjwiOnJldHVybiImbHQ7IjtjYXNlIj4iOnJldHVybiImZ3Q7IjtjYXNlJyInOnJldHVybiImcXVvdDsiO2Nhc2UiwqAiOnJldHVybiImbmJzcDsifX1mdW5jdGlvbiBjKGEpe3JldHVybiBhLnJlcGxhY2UoeSxiKX1mdW5jdGlvbiBkKGEpe3JldHVybiBhLnJlcGxhY2UoeixiKX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYj17fSxjPTA7YzxhLmxlbmd0aDtjKyspYlthW2NdXT0hMDtyZXR1cm4gYn1mdW5jdGlvbiBmKGEsYil7c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgTm9kZS5FTEVNRU5UX05PREU6Zm9yKHZhciBlLGY9YS50YWdOYW1lLnRvTG93ZXJDYXNlKCksaD0iPCIrZixpPWEuYXR0cmlidXRlcyxqPTA7ZT1pW2pdO2orKyloKz0iICIrZS5uYW1lKyc9IicrYyhlLnZhbHVlKSsnIic7cmV0dXJuIGgrPSI+IixBW2ZdP2g6aCtnKGEpKyI8LyIrZisiPiI7Y2FzZSBOb2RlLlRFWFRfTk9ERTp2YXIgaz1hLmRhdGE7cmV0dXJuIGImJkJbYi5sb2NhbE5hbWVdP2s6ZChrKTtjYXNlIE5vZGUuQ09NTUVOVF9OT0RFOnJldHVybiI8IS0tIithLmRhdGErIi0tPiI7ZGVmYXVsdDp0aHJvdyBjb25zb2xlLmVycm9yKGEpLG5ldyBFcnJvcigibm90IGltcGxlbWVudGVkIil9fWZ1bmN0aW9uIGcoYSl7Zm9yKHZhciBiPSIiLGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWIrPWYoYyxhKTtyZXR1cm4gYn1mdW5jdGlvbiBoKGEsYixjKXt2YXIgZD1jfHwiZGl2IjthLnRleHRDb250ZW50PSIiO3ZhciBlPXcoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZCkpO2UuaW5uZXJIVE1MPWI7Zm9yKHZhciBmO2Y9ZS5maXJzdENoaWxkOylhLmFwcGVuZENoaWxkKHgoZikpfWZ1bmN0aW9uIGkoYSl7by5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gaihhLGIpe3ZhciBjPXcoYS5jbG9uZU5vZGUoITEpKTtjLmlubmVySFRNTD1iO2Zvcih2YXIgZCxlPXcoZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtkPWMuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChkKTtyZXR1cm4geChlKX1mdW5jdGlvbiBrKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl19fWZ1bmN0aW9uIGwoYSl7cChpLGEsayhhKSl9ZnVuY3Rpb24gbShiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsYix7Z2V0OmsoYiksc2V0OmZ1bmN0aW9uKGMpe2EucmVuZGVyQWxsUGVuZGluZygpLHRoaXMuaW1wbFtiXT1jfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfWZ1bmN0aW9uIG4oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLGIse3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGEucmVuZGVyQWxsUGVuZGluZygpLHRoaXMuaW1wbFtiXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX0sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX12YXIgbz1hLndyYXBwZXJzLkVsZW1lbnQscD1hLmRlZmluZUdldHRlcixxPWEuZW5xdWV1ZU11dGF0aW9uLHI9YS5taXhpbixzPWEubm9kZXNXZXJlQWRkZWQsdD1hLm5vZGVzV2VyZVJlbW92ZWQsdT1hLnJlZ2lzdGVyV3JhcHBlcix2PWEuc25hcHNob3ROb2RlTGlzdCx3PWEudW53cmFwLHg9YS53cmFwLHk9L1smXHUwMEEwIl0vZyx6PS9bJlx1MDBBMDw+XS9nLEE9ZShbImFyZWEiLCJiYXNlIiwiYnIiLCJjb2wiLCJjb21tYW5kIiwiZW1iZWQiLCJociIsImltZyIsImlucHV0Iiwia2V5Z2VuIiwibGluayIsIm1ldGEiLCJwYXJhbSIsInNvdXJjZSIsInRyYWNrIiwid2JyIl0pLEI9ZShbInN0eWxlIiwic2NyaXB0IiwieG1wIiwiaWZyYW1lIiwibm9lbWJlZCIsIm5vZnJhbWVzIiwicGxhaW50ZXh0Iiwibm9zY3JpcHQiXSksQz0vTVNJRS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxEPXdpbmRvdy5IVE1MRWxlbWVudDtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxyKGkucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGcodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7aWYoQyYmQlt0aGlzLmxvY2FsTmFtZV0pcmV0dXJuIHZvaWQodGhpcy50ZXh0Q29udGVudD1hKTt2YXIgYj12KHRoaXMuY2hpbGROb2Rlcyk7dGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKT9oKHRoaXMsYSx0aGlzLnRhZ05hbWUpOnRoaXMuaW1wbC5pbm5lckhUTUw9YTt2YXIgYz12KHRoaXMuY2hpbGROb2Rlcyk7cSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmMscmVtb3ZlZE5vZGVzOmJ9KSx0KGIpLHMoYyl9LGdldCBvdXRlckhUTUwoKXtyZXR1cm4gZih0aGlzLHRoaXMucGFyZW50Tm9kZSl9LHNldCBvdXRlckhUTUwoYSl7dmFyIGI9dGhpcy5wYXJlbnROb2RlO2lmKGIpe2IuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGM9aihiLGEpO2IucmVwbGFjZUNoaWxkKGMsdGhpcyl9fSxpbnNlcnRBZGphY2VudEhUTUw6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO3N3aXRjaChTdHJpbmcoYSkudG9Mb3dlckNhc2UoKSl7Y2FzZSJiZWZvcmViZWdpbiI6Yz10aGlzLnBhcmVudE5vZGUsZD10aGlzO2JyZWFrO2Nhc2UiYWZ0ZXJlbmQiOmM9dGhpcy5wYXJlbnROb2RlLGQ9dGhpcy5uZXh0U2libGluZzticmVhaztjYXNlImFmdGVyYmVnaW4iOmM9dGhpcyxkPXRoaXMuZmlyc3RDaGlsZDticmVhaztjYXNlImJlZm9yZWVuZCI6Yz10aGlzLGQ9bnVsbDticmVhaztkZWZhdWx0OnJldHVybn12YXIgZT1qKGMsYik7Yy5pbnNlcnRCZWZvcmUoZSxkKX19KSxbImNsaWVudEhlaWdodCIsImNsaWVudExlZnQiLCJjbGllbnRUb3AiLCJjbGllbnRXaWR0aCIsIm9mZnNldEhlaWdodCIsIm9mZnNldExlZnQiLCJvZmZzZXRUb3AiLCJvZmZzZXRXaWR0aCIsInNjcm9sbEhlaWdodCIsInNjcm9sbFdpZHRoIl0uZm9yRWFjaChsKSxbInNjcm9sbExlZnQiLCJzY3JvbGxUb3AiXS5mb3JFYWNoKG0pLFsiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZ2V0Q2xpZW50UmVjdHMiLCJzY3JvbGxJbnRvVmlldyJdLmZvckVhY2gobiksdShELGksZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYiIpKSxhLndyYXBwZXJzLkhUTUxFbGVtZW50PWksYS5nZXRJbm5lckhUTUw9ZyxhLnNldElubmVySFRNTD1ofSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXAsZz13aW5kb3cuSFRNTENhbnZhc0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0Q29udGV4dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW1wbC5nZXRDb250ZXh0LmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpO3JldHVybiBhJiZmKGEpfX0pLGUoZyxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpKSxhLndyYXBwZXJzLkhUTUxDYW52YXNFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPXdpbmRvdy5IVE1MQ29udGVudEVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IHNlbGVjdCgpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgic2VsZWN0Iil9LHNldCBzZWxlY3QoYSl7dGhpcy5zZXRBdHRyaWJ1dGUoInNlbGVjdCIsYSl9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbihhLGIpe2MucHJvdG90eXBlLnNldEF0dHJpYnV0ZS5jYWxsKHRoaXMsYSxiKSwic2VsZWN0Ij09PVN0cmluZyhhKS50b0xvd2VyQ2FzZSgpJiZ0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcighMCl9fSksZiYmZShmLGIpLGEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGMpKXRocm93IG5ldyBUeXBlRXJyb3IoIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3ZhciBlPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpO2QuY2FsbCh0aGlzLGUpLGcoZSx0aGlzKSx2b2lkIDAhPT1hJiYoZS53aWR0aD1hKSx2b2lkIDAhPT1iJiYoZS5oZWlnaHQ9Yil9dmFyIGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLnJld3JhcCxoPXdpbmRvdy5IVE1MSW1hZ2VFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpKSxjLnByb3RvdHlwZT1iLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxJbWFnZUVsZW1lbnQ9YixhLndyYXBwZXJzLkltYWdlPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPXdpbmRvdy5IVE1MU2hhZG93RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHt9KSxmJiZlKGYsYiksYS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhLmRlZmF1bHRWaWV3KXJldHVybiBhO3ZhciBiPW0uZ2V0KGEpO2lmKCFiKXtmb3IoYj1hLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yi5sYXN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5sYXN0Q2hpbGQpO20uc2V0KGEsYil9cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGMsZD1iKGEub3duZXJEb2N1bWVudCksZT1qKGQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtjPWEuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChjKTtyZXR1cm4gZX1mdW5jdGlvbiBkKGEpe2lmKGUuY2FsbCh0aGlzLGEpLCFuKXt2YXIgYj1jKGEpO2wuc2V0KHRoaXMsayhiKSl9fXZhciBlPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZj1hLmdldElubmVySFRNTCxnPWEubWl4aW4saD1hLnJlZ2lzdGVyV3JhcHBlcixpPWEuc2V0SW5uZXJIVE1MLGo9YS51bndyYXAsaz1hLndyYXAsbD1uZXcgV2Vha01hcCxtPW5ldyBXZWFrTWFwLG49d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZyhkLnByb3RvdHlwZSx7Z2V0IGNvbnRlbnQoKXtyZXR1cm4gbj9rKHRoaXMuaW1wbC5jb250ZW50KTpsLmdldCh0aGlzKX0sZ2V0IGlubmVySFRNTCgpe3JldHVybiBmKHRoaXMuY29udGVudCl9LHNldCBpbm5lckhUTUwoYSl7aSh0aGlzLmNvbnRlbnQsYSl9fSksbiYmaChuLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLnJlZ2lzdGVyV3JhcHBlcixlPXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoZSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIikpLGEud3JhcHBlcnMuSFRNTE1lZGlhRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGMoYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGI9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpKTtkLmNhbGwodGhpcyxiKSxnKGIsdGhpcyksYi5zZXRBdHRyaWJ1dGUoInByZWxvYWQiLCJhdXRvIiksdm9pZCAwIT09YSYmYi5zZXRBdHRyaWJ1dGUoInNyYyIsYSl9dmFyIGQ9YS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxBdWRpb0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSksYy5wcm90b3R5cGU9Yi5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MQXVkaW9FbGVtZW50PWIsYS53cmFwcGVycy5BdWRpbz1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhLnJlcGxhY2UoL1xzKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uIGMoYSl7ZS5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gZChhLGIsYyxmKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt2YXIgZz1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtlLmNhbGwodGhpcyxnKSxoKGcsdGhpcyksdm9pZCAwIT09YSYmKGcudGV4dD1hKSx2b2lkIDAhPT1iJiZnLnNldEF0dHJpYnV0ZSgidmFsdWUiLGIpLGM9PT0hMCYmZy5zZXRBdHRyaWJ1dGUoInNlbGVjdGVkIiwiIiksZy5zZWxlY3RlZD1mPT09ITB9dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEucmV3cmFwLGk9YS51bndyYXAsaj1hLndyYXAsaz13aW5kb3cuSFRNTE9wdGlvbkVsZW1lbnQ7Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZihjLnByb3RvdHlwZSx7Z2V0IHRleHQoKXtyZXR1cm4gYih0aGlzLnRleHRDb250ZW50KX0sc2V0IHRleHQoYSl7dGhpcy50ZXh0Q29udGVudD1iKFN0cmluZyhhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGooaSh0aGlzKS5mb3JtKX19KSxnKGssYyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSksZC5wcm90b3R5cGU9Yy5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MT3B0aW9uRWxlbWVudD1jLGEud3JhcHBlcnMuT3B0aW9uPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7c3dpdGNoKGEubG9jYWxOYW1lKXtjYXNlImNvbnRlbnQiOnJldHVybiBuZXcgYyhhKTtjYXNlInNoYWRvdyI6cmV0dXJuIG5ldyBlKGEpO2Nhc2UidGVtcGxhdGUiOnJldHVybiBuZXcgZihhKX1kLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxkPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZT1hLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50LGY9YS53cmFwcGVycy5IVE1MVGVtcGxhdGVFbGVtZW50LGc9KGEubWl4aW4sYS5yZWdpc3RlcldyYXBwZXIpLGg9d2luZG93LkhUTUxVbmtub3duRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxnKGgsYiksYS53cmFwcGVycy5IVE1MVW5rbm93bkVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7dmFyIGI9YS5yZWdpc3Rlck9iamVjdCxjPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoYywidGl0bGUiKSxlPWIoZCksZj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLmNvbnN0cnVjdG9yO2Eud3JhcHBlcnMuU1ZHRWxlbWVudD1mfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe20uY2FsbCh0aGlzLGEpfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEudW53cmFwLGY9YS53cmFwLGc9d2luZG93LlNWR1VzZUVsZW1lbnQsaD0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLGk9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoaCwiZyIpKSxqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhoLCJ1c2UiKSxrPWkuY29uc3RydWN0b3IsbD1PYmplY3QuZ2V0UHJvdG90eXBlT2Yoay5wcm90b3R5cGUpLG09bC5jb25zdHJ1Y3RvcjtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGwpLCJpbnN0YW5jZVJvb3QiaW4gaiYmYyhiLnByb3RvdHlwZSx7Z2V0IGluc3RhbmNlUm9vdCgpe3JldHVybiBmKGUodGhpcykuaW5zdGFuY2VSb290KX0sZ2V0IGFuaW1hdGVkSW5zdGFuY2VSb290KCl7cmV0dXJuIGYoZSh0aGlzKS5hbmltYXRlZEluc3RhbmNlUm9vdCl9fSksZChnLGIsaiksYS53cmFwcGVycy5TVkdVc2VFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5FdmVudFRhcmdldCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcCxnPXdpbmRvdy5TVkdFbGVtZW50SW5zdGFuY2U7ZyYmKGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCBjb3JyZXNwb25kaW5nRWxlbWVudCgpe3JldHVybiBmKHRoaXMuaW1wbC5jb3JyZXNwb25kaW5nRWxlbWVudCl9LGdldCBjb3JyZXNwb25kaW5nVXNlRWxlbWVudCgpe3JldHVybiBmKHRoaXMuaW1wbC5jb3JyZXNwb25kaW5nVXNlRWxlbWVudCl9LGdldCBwYXJlbnROb2RlKCl7cmV0dXJuIGYodGhpcy5pbXBsLnBhcmVudE5vZGUpfSxnZXQgY2hpbGROb2Rlcygpe3Rocm93IG5ldyBFcnJvcigiTm90IGltcGxlbWVudGVkIil9LGdldCBmaXJzdENoaWxkKCl7cmV0dXJuIGYodGhpcy5pbXBsLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIGYodGhpcy5pbXBsLmxhc3RDaGlsZCl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gZih0aGlzLmltcGwucHJldmlvdXNTaWJsaW5nKX0sZ2V0IG5leHRTaWJsaW5nKCl7cmV0dXJuIGYodGhpcy5pbXBsLm5leHRTaWJsaW5nKX19KSxlKGcsYiksYS53cmFwcGVycy5TVkdFbGVtZW50SW5zdGFuY2U9Yil9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPWF9dmFyIGM9YS5taXhpbixkPWEucmVnaXN0ZXJXcmFwcGVyLGU9YS51bndyYXAsZj1hLnVud3JhcElmTmVlZGVkLGc9YS53cmFwLGg9d2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtjKGIucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGcodGhpcy5pbXBsLmNhbnZhcyl9LGRyYXdJbWFnZTpmdW5jdGlvbigpe2FyZ3VtZW50c1swXT1mKGFyZ3VtZW50c1swXSksdGhpcy5pbXBsLmRyYXdJbWFnZS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX0sY3JlYXRlUGF0dGVybjpmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09ZShhcmd1bWVudHNbMF0pLHRoaXMuaW1wbC5jcmVhdGVQYXR0ZXJuLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX0pLGQoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLmdldENvbnRleHQoIjJkIikpLGEud3JhcHBlcnMuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPWF9dmFyIGM9YS5taXhpbixkPWEucmVnaXN0ZXJXcmFwcGVyLGU9YS51bndyYXBJZk5lZWRlZCxmPWEud3JhcCxnPXdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQ7aWYoZyl7YyhiLnByb3RvdHlwZSx7Z2V0IGNhbnZhcygpe3JldHVybiBmKHRoaXMuaW1wbC5jYW52YXMpfSx0ZXhJbWFnZTJEOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzVdPWUoYXJndW1lbnRzWzVdKSx0aGlzLmltcGwudGV4SW1hZ2UyRC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX0sdGV4U3ViSW1hZ2UyRDpmdW5jdGlvbigpe2FyZ3VtZW50c1s2XT1lKGFyZ3VtZW50c1s2XSksdGhpcy5pbXBsLnRleFN1YkltYWdlMkQuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9fSk7dmFyIGg9L1dlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KT97ZHJhd2luZ0J1ZmZlckhlaWdodDpudWxsLGRyYXdpbmdCdWZmZXJXaWR0aDpudWxsfTp7fTtkKGcsYixoKSxhLndyYXBwZXJzLldlYkdMUmVuZGVyaW5nQ29udGV4dD1ifX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLnJlZ2lzdGVyV3JhcHBlcixkPWEudW53cmFwLGU9YS51bndyYXBJZk5lZWRlZCxmPWEud3JhcCxnPXdpbmRvdy5SYW5nZTtiLnByb3RvdHlwZT17Z2V0IHN0YXJ0Q29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLnN0YXJ0Q29udGFpbmVyKX0sZ2V0IGVuZENvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5lbmRDb250YWluZXIpfSxnZXQgY29tbW9uQW5jZXN0b3JDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuY29tbW9uQW5jZXN0b3JDb250YWluZXIpfSxzZXRTdGFydDpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5zZXRTdGFydChlKGEpLGIpfSxzZXRFbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuc2V0RW5kKGUoYSksYil9LHNldFN0YXJ0QmVmb3JlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRTdGFydEJlZm9yZShlKGEpKX0sc2V0U3RhcnRBZnRlcjpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0U3RhcnRBZnRlcihlKGEpKX0sc2V0RW5kQmVmb3JlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRFbmRCZWZvcmUoZShhKSl9LHNldEVuZEFmdGVyOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRFbmRBZnRlcihlKGEpKX0sc2VsZWN0Tm9kZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2VsZWN0Tm9kZShlKGEpKX0sc2VsZWN0Tm9kZUNvbnRlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3ROb2RlQ29udGVudHMoZShhKSl9LGNvbXBhcmVCb3VuZGFyeVBvaW50czpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmltcGwuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKGEsZChiKSl9LGV4dHJhY3RDb250ZW50czpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5leHRyYWN0Q29udGVudHMoKSl9LGNsb25lQ29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLmltcGwuY2xvbmVDb250ZW50cygpKX0saW5zZXJ0Tm9kZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuaW5zZXJ0Tm9kZShlKGEpKX0sc3Vycm91bmRDb250ZW50czpmdW5jdGlvbihhKXt0aGlzLmltcGwuc3Vycm91bmRDb250ZW50cyhlKGEpKX0sY2xvbmVSYW5nZTpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5jbG9uZVJhbmdlKCkpfSxpc1BvaW50SW5SYW5nZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmltcGwuaXNQb2ludEluUmFuZ2UoZShhKSxiKX0sY29tcGFyZVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5jb21wYXJlUG9pbnQoZShhKSxiKX0saW50ZXJzZWN0c05vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1wbC5pbnRlcnNlY3RzTm9kZShlKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxnLnByb3RvdHlwZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQmJihiLnByb3RvdHlwZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcy5pbXBsLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChhKSl9KSxjKHdpbmRvdy5SYW5nZSxiLGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkpLGEud3JhcHBlcnMuUmFuZ2U9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7dmFyIGI9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGM9YS5QYXJlbnROb2RlSW50ZXJmYWNlLGQ9YS5TZWxlY3RvcnNJbnRlcmZhY2UsZT1hLm1peGluLGY9YS5yZWdpc3Rlck9iamVjdCxnPWYoZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtlKGcucHJvdG90eXBlLGMpLGUoZy5wcm90b3R5cGUsZCksZShnLnByb3RvdHlwZSxiKTt2YXIgaD1mKGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoIiIpKTthLndyYXBwZXJzLkNvbW1lbnQ9aCxhLndyYXBwZXJzLkRvY3VtZW50RnJhZ21lbnQ9Z30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt2YXIgYj1pKGEuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Yy5jYWxsKHRoaXMsYiksZyhiLHRoaXMpO3ZhciBkPWEuc2hhZG93Um9vdDtrLnNldCh0aGlzLGQpLGouc2V0KHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50LGQ9YS5lbGVtZW50RnJvbVBvaW50LGU9YS5nZXRJbm5lckhUTUwsZj1hLm1peGluLGc9YS5yZXdyYXAsaD1hLnNldElubmVySFRNTCxpPWEudW53cmFwLGo9bmV3IFdlYWtNYXAsaz1uZXcgV2Vha01hcCxsPS9bIFx0XG5cclxmXS87Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZihiLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBlKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2godGhpcyxhKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxnZXQgb2xkZXJTaGFkb3dSb290KCl7cmV0dXJuIGsuZ2V0KHRoaXMpfHxudWxsfSxnZXQgaG9zdCgpe3JldHVybiBqLmdldCh0aGlzKXx8bnVsbH0saW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyOmZ1bmN0aW9uKCl7cmV0dXJuIGouZ2V0KHRoaXMpLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGQodGhpcyx0aGlzLm93bmVyRG9jdW1lbnQsYSxiKX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGwudGVzdChhKT9udWxsOnRoaXMucXVlcnlTZWxlY3RvcignW2lkPSInK2ErJyJdJyl9fSksYS53cmFwcGVycy5TaGFkb3dSb290PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7YS5wcmV2aW91c1NpYmxpbmdfPWEucHJldmlvdXNTaWJsaW5nLGEubmV4dFNpYmxpbmdfPWEubmV4dFNpYmxpbmcsYS5wYXJlbnROb2RlXz1hLnBhcmVudE5vZGV9ZnVuY3Rpb24gYyhhLGMsZSl7dmFyIGY9RihhKSxnPUYoYyksaD1lP0YoZSk6bnVsbDtpZihkKGMpLGIoYyksZSlhLmZpcnN0Q2hpbGQ9PT1lJiYoYS5maXJzdENoaWxkXz1lKSxlLnByZXZpb3VzU2libGluZ189ZS5wcmV2aW91c1NpYmxpbmc7ZWxzZXthLmxhc3RDaGlsZF89YS5sYXN0Q2hpbGQsYS5sYXN0Q2hpbGQ9PT1hLmZpcnN0Q2hpbGQmJihhLmZpcnN0Q2hpbGRfPWEuZmlyc3RDaGlsZCk7dmFyIGk9RyhmLmxhc3RDaGlsZCk7aSYmKGkubmV4dFNpYmxpbmdfPWkubmV4dFNpYmxpbmcpfWYuaW5zZXJ0QmVmb3JlKGcsaCl9ZnVuY3Rpb24gZChhKXt2YXIgYz1GKGEpLGQ9Yy5wYXJlbnROb2RlO2lmKGQpe3ZhciBlPUcoZCk7YihhKSxhLnByZXZpb3VzU2libGluZyYmKGEucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1hKSxhLm5leHRTaWJsaW5nJiYoYS5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPWEpLGUubGFzdENoaWxkPT09YSYmKGUubGFzdENoaWxkXz1hKSxlLmZpcnN0Q2hpbGQ9PT1hJiYoZS5maXJzdENoaWxkXz1hKSxkLnJlbW92ZUNoaWxkKGMpfX1mdW5jdGlvbiBlKGEsYil7ZyhiKS5wdXNoKGEpLHgoYSxiKTt2YXIgYz1JLmdldChhKTtjfHxJLnNldChhLGM9W10pLGMucHVzaChiKX1mdW5jdGlvbiBmKGEpe0guc2V0KGEsW10pfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIEguZ2V0KGEpfWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYn1mdW5jdGlvbiBpKGEsYixjKXtmb3IodmFyIGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWlmKGIoZCkpe2lmKGMoZCk9PT0hMSlyZXR1cm59ZWxzZSBpKGQsYixjKX1mdW5jdGlvbiBqKGEsYil7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpO2lmKCFjKXJldHVybiEwO2lmKGM9Yy50cmltKCksIWMpcmV0dXJuITA7aWYoIShhIGluc3RhbmNlb2YgeikpcmV0dXJuITE7aWYoIioiPT09Y3x8Yz09PWEubG9jYWxOYW1lKXJldHVybiEwO2lmKCFMLnRlc3QoYykpcmV0dXJuITE7aWYoIjoiPT09Y1swXSYmIU0udGVzdChjKSlyZXR1cm4hMTt0cnl7cmV0dXJuIGEubWF0Y2hlcyhjKX1jYXRjaChkKXtyZXR1cm4hMX19ZnVuY3Rpb24gaygpe2Zvcih2YXIgYT0wO2E8Ty5sZW5ndGg7YSsrKU9bYV0ucmVuZGVyKCk7Tz1bXX1mdW5jdGlvbiBsKCl7eT1udWxsLGsoKX1mdW5jdGlvbiBtKGEpe3ZhciBiPUsuZ2V0KGEpO3JldHVybiBifHwoYj1uZXcgcShhKSxLLnNldChhLGIpKSxifWZ1bmN0aW9uIG4oYSl7Zm9yKDthO2E9YS5wYXJlbnROb2RlKWlmKGEgaW5zdGFuY2VvZiBEKXJldHVybiBhO3JldHVybiBudWxsfWZ1bmN0aW9uIG8oYSl7cmV0dXJuIG0oYS5ob3N0KX1mdW5jdGlvbiBwKGEpe3RoaXMuc2tpcD0hMSx0aGlzLm5vZGU9YSx0aGlzLmNoaWxkTm9kZXM9W119ZnVuY3Rpb24gcShhKXt0aGlzLmhvc3Q9YSx0aGlzLmRpcnR5PSExLHRoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKSx0aGlzLmFzc29jaWF0ZU5vZGUoYSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEF9ZnVuY3Rpb24gcyhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEF9ZnVuY3Rpb24gdChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEJ9ZnVuY3Rpb24gdShhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEJ9ZnVuY3Rpb24gdihhKXtyZXR1cm4gYS5zaGFkb3dSb290fWZ1bmN0aW9uIHcoYSl7Zm9yKHZhciBiPVtdLGM9YS5zaGFkb3dSb290O2M7Yz1jLm9sZGVyU2hhZG93Um9vdCliLnB1c2goYyk7cmV0dXJuIGJ9ZnVuY3Rpb24geChhLGIpe0ouc2V0KGEsYil9dmFyIHksej1hLndyYXBwZXJzLkVsZW1lbnQsQT1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxCPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsQz1hLndyYXBwZXJzLk5vZGUsRD1hLndyYXBwZXJzLlNoYWRvd1Jvb3QsRT0oYS5hc3NlcnQsYS5taXhpbixhLm9uZU9mKSxGPWEudW53cmFwLEc9YS53cmFwLEg9bmV3IFdlYWtNYXAsST1uZXcgV2Vha01hcCxKPW5ldyBXZWFrTWFwLEs9bmV3IFdlYWtNYXAsTD0vXlsqLjojW2EtekEtWl98XS8sTT1uZXcgUmVnRXhwKCJeOigiK1sibGluayIsInZpc2l0ZWQiLCJ0YXJnZXQiLCJlbmFibGVkIiwiZGlzYWJsZWQiLCJjaGVja2VkIiwiaW5kZXRlcm1pbmF0ZSIsIm50aC1jaGlsZCIsIm50aC1sYXN0LWNoaWxkIiwibnRoLW9mLXR5cGUiLCJudGgtbGFzdC1vZi10eXBlIiwiZmlyc3QtY2hpbGQiLCJsYXN0LWNoaWxkIiwiZmlyc3Qtb2YtdHlwZSIsImxhc3Qtb2YtdHlwZSIsIm9ubHktb2YtdHlwZSJdLmpvaW4oInwiKSsiKSIpLE49RSh3aW5kb3csWyJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzZXRUaW1lb3V0Il0pLE89W10sUD1uZXcgQXJyYXlTcGxpY2U7UC5lcXVhbHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRihhLm5vZGUpPT09Yn0scC5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgcChhKTtyZXR1cm4gdGhpcy5jaGlsZE5vZGVzLnB1c2goYiksYn0sc3luYzpmdW5jdGlvbihhKXtpZighdGhpcy5za2lwKXtmb3IodmFyIGI9dGhpcy5ub2RlLGU9dGhpcy5jaGlsZE5vZGVzLGY9aChGKGIpKSxnPWF8fG5ldyBXZWFrTWFwLGk9UC5jYWxjdWxhdGVTcGxpY2VzKGUsZiksaj0wLGs9MCxsPTAsbT0wO208aS5sZW5ndGg7bSsrKXtmb3IodmFyIG49aVttXTtsPG4uaW5kZXg7bCsrKWsrKyxlW2orK10uc3luYyhnKTtmb3IodmFyIG89bi5yZW1vdmVkLmxlbmd0aCxwPTA7bz5wO3ArKyl7dmFyIHE9RyhmW2srK10pO2cuZ2V0KHEpfHxkKHEpfWZvcih2YXIgcj1uLmFkZGVkQ291bnQscz1mW2tdJiZHKGZba10pLHA9MDtyPnA7cCsrKXt2YXIgdD1lW2orK10sdT10Lm5vZGU7YyhiLHUscyksZy5zZXQodSwhMCksdC5zeW5jKGcpfWwrPXJ9Zm9yKHZhciBtPWw7bTxlLmxlbmd0aDttKyspZVttXS5zeW5jKGcpfX19LHEucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5kaXJ0eSl7dGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpLHRoaXMudHJlZUNvbXBvc2l0aW9uKCk7dmFyIGI9dGhpcy5ob3N0LGM9Yi5zaGFkb3dSb290O3RoaXMuYXNzb2NpYXRlTm9kZShiKTtmb3IodmFyIGQ9IWUsZT1hfHxuZXcgcChiKSxmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZyl0aGlzLnJlbmRlck5vZGUoYyxlLGYsITEpO2QmJmUuc3luYygpLHRoaXMuZGlydHk9ITF9fSxpbnZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZGlydHkpe2lmKHRoaXMuZGlydHk9ITAsTy5wdXNoKHRoaXMpLHkpcmV0dXJuO3k9d2luZG93W05dKGwsMCl9fSxyZW5kZXJOb2RlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKHYoYykpe2I9Yi5hcHBlbmQoYyk7dmFyIGU9bShjKTtlLmRpcnR5PSEwLGUucmVuZGVyKGIpfWVsc2UgcihjKT90aGlzLnJlbmRlckluc2VydGlvblBvaW50KGEsYixjLGQpOnQoYyk/dGhpcy5yZW5kZXJTaGFkb3dJbnNlcnRpb25Qb2ludChhLGIsYyk6dGhpcy5yZW5kZXJBc0FueURvbVRyZWUoYSxiLGMsZCl9LHJlbmRlckFzQW55RG9tVHJlZTpmdW5jdGlvbihhLGIsYyxkKXtpZihiPWIuYXBwZW5kKGMpLHYoYykpe3ZhciBlPW0oYyk7Yi5za2lwPSFlLmRpcnR5LGUucmVuZGVyKGIpfWVsc2UgZm9yKHZhciBmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZyl0aGlzLnJlbmRlck5vZGUoYSxiLGYsZCl9LHJlbmRlckluc2VydGlvblBvaW50OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWcoYyk7aWYoZS5sZW5ndGgpe3RoaXMuYXNzb2NpYXRlTm9kZShjKTtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGg9ZVtmXTtyKGgpJiZkP3RoaXMucmVuZGVySW5zZXJ0aW9uUG9pbnQoYSxiLGgsZCk6dGhpcy5yZW5kZXJBc0FueURvbVRyZWUoYSxiLGgsZCl9fWVsc2UgdGhpcy5yZW5kZXJGYWxsYmFja0NvbnRlbnQoYSxiLGMpO3RoaXMuYXNzb2NpYXRlTm9kZShjLnBhcmVudE5vZGUpfSxyZW5kZXJTaGFkb3dJbnNlcnRpb25Qb2ludDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoZCl7eChkLGMpLHRoaXMuYXNzb2NpYXRlTm9kZShjLnBhcmVudE5vZGUpO2Zvcih2YXIgZT1kLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpdGhpcy5yZW5kZXJOb2RlKGQsYixlLCEwKX1lbHNlIHRoaXMucmVuZGVyRmFsbGJhY2tDb250ZW50KGEsYixjKX0scmVuZGVyRmFsbGJhY2tDb250ZW50OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmFzc29jaWF0ZU5vZGUoYyksdGhpcy5hc3NvY2lhdGVOb2RlKGMucGFyZW50Tm9kZSk7Zm9yKHZhciBkPWMuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyl0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsZCwhMSl9LGludmFsaWRhdGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dGhpcy5hdHRyaWJ1dGVzPU9iamVjdC5jcmVhdGUobnVsbCl9LHVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzOy9cLlx3Ky8udGVzdChhKSYmKGJbImNsYXNzIl09ITApLC8jXHcrLy50ZXN0KGEpJiYoYi5pZD0hMCksYS5yZXBsYWNlKC9cW1xzKihbXlxzPVx8flxdXSspL2csZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSl9fSxkZXBlbmRzT25BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXX0sZGlzdHJpYnV0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7aShhLHMsZnVuY3Rpb24oYSl7ZihhKSxjLnVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXMoYS5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpKTtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGc9YltkXTt2b2lkIDAhPT1nJiZqKGcsYSkmJihlKGcsYSksYltkXT12b2lkIDApfX0pfSx0cmVlQ29tcG9zaXRpb246ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5ob3N0LGI9YS5zaGFkb3dSb290LGM9W10sZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpaWYocihkKSl7dmFyIGU9ZyhkKTtlJiZlLmxlbmd0aHx8KGU9aChkKSksYy5wdXNoLmFwcGx5KGMsZSl9ZWxzZSBjLnB1c2goZCk7Zm9yKHZhciBmLGo7Yjspe2lmKGY9dm9pZCAwLGkoYix1LGZ1bmN0aW9uKGEpe3JldHVybiBmPWEsITF9KSxqPWYsdGhpcy5kaXN0cmlidXRlKGIsYyksail7dmFyIGs9Yi5vbGRlclNoYWRvd1Jvb3Q7aWYoayl7Yj1rLHgoYixqKTtjb250aW51ZX1icmVha31icmVha319LGFzc29jaWF0ZU5vZGU6ZnVuY3Rpb24oYSl7YS5pbXBsLnBvbHltZXJTaGFkb3dSZW5kZXJlcl89dGhpc319LEMucHJvdG90eXBlLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaW1wbC5wb2x5bWVyU2hhZG93UmVuZGVyZXJfO3JldHVybiBhPyhhLmludmFsaWRhdGUoKSwhMCk6ITF9LEEucHJvdG90eXBlLmdldERpc3RyaWJ1dGVkTm9kZXM9ZnVuY3Rpb24oKXtyZXR1cm4gaygpLGcodGhpcyl9LEIucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1BLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBhLGI9bih0aGlzKTtiJiYoYT1vKGIpKSx0aGlzLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz1hLGEmJmEuaW52YWxpZGF0ZSgpfSxhLmV2ZW50UGFyZW50c1RhYmxlPUksYS5nZXRSZW5kZXJlckZvckhvc3Q9bSxhLmdldFNoYWRvd1RyZWVzPXcsYS5pbnNlcnRpb25QYXJlbnRUYWJsZT1KLGEucmVuZGVyQWxsUGVuZGluZz1rLGEudmlzdWFsPXtpbnNlcnRCZWZvcmU6YyxyZW1vdmU6ZH19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7aWYod2luZG93W2JdKXtkKCFhLndyYXBwZXJzW2JdKTt2YXIgaT1mdW5jdGlvbihhKXtjLmNhbGwodGhpcyxhKQp9O2kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUoaS5wcm90b3R5cGUse2dldCBmb3JtKCl7cmV0dXJuIGgoZyh0aGlzKS5mb3JtKX19KSxmKHdpbmRvd1tiXSxpLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYi5zbGljZSg0LC03KSkpLGEud3JhcHBlcnNbYl09aX19dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEuYXNzZXJ0LGU9YS5taXhpbixmPWEucmVnaXN0ZXJXcmFwcGVyLGc9YS51bndyYXAsaD1hLndyYXAsaT1bIkhUTUxCdXR0b25FbGVtZW50IiwiSFRNTEZpZWxkU2V0RWxlbWVudCIsIkhUTUxJbnB1dEVsZW1lbnQiLCJIVE1MS2V5Z2VuRWxlbWVudCIsIkhUTUxMYWJlbEVsZW1lbnQiLCJIVE1MTGVnZW5kRWxlbWVudCIsIkhUTUxPYmplY3RFbGVtZW50IiwiSFRNTE91dHB1dEVsZW1lbnQiLCJIVE1MU2VsZWN0RWxlbWVudCIsIkhUTUxUZXh0QXJlYUVsZW1lbnQiXTtpLmZvckVhY2goYil9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPWF9dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXA7d2luZG93LlNlbGVjdGlvbixiLnByb3RvdHlwZT17Z2V0IGFuY2hvck5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuYW5jaG9yTm9kZSl9LGdldCBmb2N1c05vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmFkZFJhbmdlKGQoYSkpfSxjb2xsYXBzZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5jb2xsYXBzZShlKGEpLGIpfSxjb250YWluc05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbnRhaW5zTm9kZShlKGEpLGIpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuZXh0ZW5kKGUoYSksYil9LGdldFJhbmdlQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcy5pbXBsLmdldFJhbmdlQXQoYSkpfSxyZW1vdmVSYW5nZTpmdW5jdGlvbihhKXt0aGlzLmltcGwucmVtb3ZlUmFuZ2UoZChhKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3RBbGxDaGlsZHJlbihlKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxjKHdpbmRvdy5TZWxlY3Rpb24sYix3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLGEud3JhcHBlcnMuU2VsZWN0aW9uPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ay5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1kb2N1bWVudFthXTtiLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiB5KGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7Qi5jYWxsKGIuaW1wbCx4KGEpKSxlKGEsYil9ZnVuY3Rpb24gZShhLGIpe2Euc2hhZG93Um9vdCYmYi5hZG9wdE5vZGUoYS5zaGFkb3dSb290KSxhIGluc3RhbmNlb2YgbyYmZihhLGIpO2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpZShjLGIpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLm9sZGVyU2hhZG93Um9vdDtjJiZiLmFkb3B0Tm9kZShjKX1mdW5jdGlvbiBnKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiB5KGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19dmFyIGo9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGs9YS53cmFwcGVycy5Ob2RlLGw9YS5QYXJlbnROb2RlSW50ZXJmYWNlLG09YS53cmFwcGVycy5TZWxlY3Rpb24sbj1hLlNlbGVjdG9yc0ludGVyZmFjZSxvPWEud3JhcHBlcnMuU2hhZG93Um9vdCxwPWEuZGVmaW5lV3JhcEdldHRlcixxPWEuZWxlbWVudEZyb21Qb2ludCxyPWEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIscz1hLm1hdGNoZXNOYW1lcyx0PWEubWl4aW4sdT1hLnJlZ2lzdGVyV3JhcHBlcix2PWEucmVuZGVyQWxsUGVuZGluZyx3PWEucmV3cmFwLHg9YS51bndyYXAseT1hLndyYXAsej1hLndyYXBFdmVudFRhcmdldE1ldGhvZHMsQT0oYS53cmFwTm9kZUxpc3QsbmV3IFdlYWtNYXApO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoay5wcm90b3R5cGUpLHAoYiwiZG9jdW1lbnRFbGVtZW50IikscChiLCJib2R5IikscChiLCJoZWFkIiksWyJjcmVhdGVDb21tZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJjcmVhdGVFdmVudCIsImNyZWF0ZUV2ZW50TlMiLCJjcmVhdGVSYW5nZSIsImNyZWF0ZVRleHROb2RlIiwiZ2V0RWxlbWVudEJ5SWQiXS5mb3JFYWNoKGMpO3ZhciBCPWRvY3VtZW50LmFkb3B0Tm9kZSxDPWRvY3VtZW50LmltcG9ydE5vZGUsRD1kb2N1bWVudC5nZXRTZWxlY3Rpb247aWYodChiLnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkKGEsdGhpcyksYX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBxKHRoaXMsdGhpcyxhLGIpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7dmFyIGM9eShDLmNhbGwodGhpcy5pbXBsLHgoYSksITEpKTtpZihiKWZvcih2YXIgZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYy5hcHBlbmRDaGlsZCh0aGlzLmltcG9ydE5vZGUoZCwhMCkpO3JldHVybiBjfSxnZXRTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdigpLG5ldyBtKEQuY2FsbCh4KHRoaXMpKSl9fSksZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KXt2YXIgRT1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ7Yi5wcm90b3R5cGUucmVnaXN0ZXJFbGVtZW50PWZ1bmN0aW9uKGIsYyl7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYT92b2lkKHRoaXMuaW1wbD1hKTpjLmV4dGVuZHM/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChjLmV4dGVuZHMsYik6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiKX12YXIgZT1jLnByb3RvdHlwZTtpZihhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChlKSl0aHJvdyBuZXcgRXJyb3IoIk5vdFN1cHBvcnRlZEVycm9yIik7Zm9yKHZhciBmLGc9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLGg9W107ZyYmIShmPWEubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KGcpKTspaC5wdXNoKGcpLGc9T2JqZWN0LmdldFByb3RvdHlwZU9mKGcpO2lmKCFmKXRocm93IG5ldyBFcnJvcigiTm90U3VwcG9ydGVkRXJyb3IiKTtmb3IodmFyIGk9T2JqZWN0LmNyZWF0ZShmKSxqPWgubGVuZ3RoLTE7aj49MDtqLS0paT1PYmplY3QuY3JlYXRlKGkpO1siY3JlYXRlZENhbGxiYWNrIiwiYXR0YWNoZWRDYWxsYmFjayIsImRldGFjaGVkQ2FsbGJhY2siLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWVbYV07YiYmKGlbYV09ZnVuY3Rpb24oKXt5KHRoaXMpaW5zdGFuY2VvZiBkfHx3KHRoaXMpLGIuYXBwbHkoeSh0aGlzKSxhcmd1bWVudHMpfSl9KTt2YXIgaz17cHJvdG90eXBlOml9O3JldHVybiBjLmV4dGVuZHMmJihrLmV4dGVuZHM9Yy5leHRlbmRzKSxkLnByb3RvdHlwZT1lLGQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWQsYS5jb25zdHJ1Y3RvclRhYmxlLnNldChpLGQpLGEubmF0aXZlUHJvdG90eXBlVGFibGUuc2V0KGUsaSksRS5jYWxsKHgodGhpcyksYixrKSxkfSxyKFt3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnRdLFsicmVnaXN0ZXJFbGVtZW50Il0pfXIoW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnQsd2luZG93LkhUTUxIdG1sRWxlbWVudF0sWyJhcHBlbmRDaGlsZCIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwiY29udGFpbnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZU5TIiwiaW5zZXJ0QmVmb3JlIiwicXVlcnlTZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZW1vdmVDaGlsZCIsInJlcGxhY2VDaGlsZCJdLmNvbmNhdChzKSkscihbd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50XSxbImFkb3B0Tm9kZSIsImltcG9ydE5vZGUiLCJjb250YWlucyIsImNyZWF0ZUNvbW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUV2ZW50IiwiY3JlYXRlRXZlbnROUyIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlVGV4dE5vZGUiLCJlbGVtZW50RnJvbVBvaW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRTZWxlY3Rpb24iXSksdChiLnByb3RvdHlwZSxqKSx0KGIucHJvdG90eXBlLGwpLHQoYi5wcm90b3R5cGUsbiksdChiLnByb3RvdHlwZSx7Z2V0IGltcGxlbWVudGF0aW9uKCl7dmFyIGE9QS5nZXQodGhpcyk7cmV0dXJuIGE/YTooYT1uZXcgZyh4KHRoaXMpLmltcGxlbWVudGF0aW9uKSxBLnNldCh0aGlzLGEpLGEpfX0pLHUod2luZG93LkRvY3VtZW50LGIsZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSksd2luZG93LkhUTUxEb2N1bWVudCYmdSh3aW5kb3cuSFRNTERvY3VtZW50LGIpLHooW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnRdKSxoKGcsImNyZWF0ZURvY3VtZW50VHlwZSIpLGgoZywiY3JlYXRlRG9jdW1lbnQiKSxoKGcsImNyZWF0ZUhUTUxEb2N1bWVudCIpLGkoZywiaGFzRmVhdHVyZSIpLHUod2luZG93LkRPTUltcGxlbWVudGF0aW9uLGcpLHIoW3dpbmRvdy5ET01JbXBsZW1lbnRhdGlvbl0sWyJjcmVhdGVEb2N1bWVudFR5cGUiLCJjcmVhdGVEb2N1bWVudCIsImNyZWF0ZUhUTUxEb2N1bWVudCIsImhhc0ZlYXR1cmUiXSksYS5hZG9wdE5vZGVOb1JlbW92ZT1kLGEud3JhcHBlcnMuRE9NSW1wbGVtZW50YXRpb249ZyxhLndyYXBwZXJzLkRvY3VtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5FdmVudFRhcmdldCxkPWEud3JhcHBlcnMuU2VsZWN0aW9uLGU9YS5taXhpbixmPWEucmVnaXN0ZXJXcmFwcGVyLGc9YS5yZW5kZXJBbGxQZW5kaW5nLGg9YS51bndyYXAsaT1hLnVud3JhcElmTmVlZGVkLGo9YS53cmFwLGs9d2luZG93LldpbmRvdyxsPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLG09d2luZG93LmdldFNlbGVjdGlvbjtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxrLnByb3RvdHlwZS5nZXRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGoodGhpc3x8d2luZG93KS5nZXRDb21wdXRlZFN0eWxlKGkoYSksYil9LGsucHJvdG90eXBlLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiBqKHRoaXN8fHdpbmRvdykuZ2V0U2VsZWN0aW9uKCl9LGRlbGV0ZSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSxkZWxldGUgd2luZG93LmdldFNlbGVjdGlvbixbImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdLmZvckVhY2goZnVuY3Rpb24oYSl7ay5wcm90b3R5cGVbYV09ZnVuY3Rpb24oKXt2YXIgYj1qKHRoaXN8fHdpbmRvdyk7cmV0dXJuIGJbYV0uYXBwbHkoYixhcmd1bWVudHMpfSxkZWxldGUgd2luZG93W2FdfSksZShiLnByb3RvdHlwZSx7Z2V0Q29tcHV0ZWRTdHlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBnKCksbC5jYWxsKGgodGhpcyksaShhKSxiKX0sZ2V0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoKSxuZXcgZChtLmNhbGwoaCh0aGlzKSkpfX0pLGYoayxiKSxhLndyYXBwZXJzLldpbmRvdz1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWNbYV0sZD13aW5kb3dbYl07aWYoZCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKSxmPWUuY29uc3RydWN0b3I7d2luZG93W2JdPWZ9fXZhciBjPShhLmlzV3JhcHBlckZvcix7YToiSFRNTEFuY2hvckVsZW1lbnQiLGFyZWE6IkhUTUxBcmVhRWxlbWVudCIsYnI6IkhUTUxCUkVsZW1lbnQiLGJhc2U6IkhUTUxCYXNlRWxlbWVudCIsYm9keToiSFRNTEJvZHlFbGVtZW50IixidXR0b246IkhUTUxCdXR0b25FbGVtZW50IixkbDoiSFRNTERMaXN0RWxlbWVudCIsZGF0YWxpc3Q6IkhUTUxEYXRhTGlzdEVsZW1lbnQiLGRhdGE6IkhUTUxEYXRhRWxlbWVudCIsZGlyOiJIVE1MRGlyZWN0b3J5RWxlbWVudCIsZGl2OiJIVE1MRGl2RWxlbWVudCIsZW1iZWQ6IkhUTUxFbWJlZEVsZW1lbnQiLGZpZWxkc2V0OiJIVE1MRmllbGRTZXRFbGVtZW50Iixmb250OiJIVE1MRm9udEVsZW1lbnQiLGZvcm06IkhUTUxGb3JtRWxlbWVudCIsZnJhbWU6IkhUTUxGcmFtZUVsZW1lbnQiLGZyYW1lc2V0OiJIVE1MRnJhbWVTZXRFbGVtZW50IixocjoiSFRNTEhSRWxlbWVudCIsaGVhZDoiSFRNTEhlYWRFbGVtZW50IixoMToiSFRNTEhlYWRpbmdFbGVtZW50IixodG1sOiJIVE1MSHRtbEVsZW1lbnQiLGlmcmFtZToiSFRNTElGcmFtZUVsZW1lbnQiLGlucHV0OiJIVE1MSW5wdXRFbGVtZW50IixsaToiSFRNTExJRWxlbWVudCIsbGFiZWw6IkhUTUxMYWJlbEVsZW1lbnQiLGxlZ2VuZDoiSFRNTExlZ2VuZEVsZW1lbnQiLGxpbms6IkhUTUxMaW5rRWxlbWVudCIsbWFwOiJIVE1MTWFwRWxlbWVudCIsbWFycXVlZToiSFRNTE1hcnF1ZWVFbGVtZW50IixtZW51OiJIVE1MTWVudUVsZW1lbnQiLG1lbnVpdGVtOiJIVE1MTWVudUl0ZW1FbGVtZW50IixtZXRhOiJIVE1MTWV0YUVsZW1lbnQiLG1ldGVyOiJIVE1MTWV0ZXJFbGVtZW50IixkZWw6IkhUTUxNb2RFbGVtZW50IixvbDoiSFRNTE9MaXN0RWxlbWVudCIsb2JqZWN0OiJIVE1MT2JqZWN0RWxlbWVudCIsb3B0Z3JvdXA6IkhUTUxPcHRHcm91cEVsZW1lbnQiLG9wdGlvbjoiSFRNTE9wdGlvbkVsZW1lbnQiLG91dHB1dDoiSFRNTE91dHB1dEVsZW1lbnQiLHA6IkhUTUxQYXJhZ3JhcGhFbGVtZW50IixwYXJhbToiSFRNTFBhcmFtRWxlbWVudCIscHJlOiJIVE1MUHJlRWxlbWVudCIscHJvZ3Jlc3M6IkhUTUxQcm9ncmVzc0VsZW1lbnQiLHE6IkhUTUxRdW90ZUVsZW1lbnQiLHNjcmlwdDoiSFRNTFNjcmlwdEVsZW1lbnQiLHNlbGVjdDoiSFRNTFNlbGVjdEVsZW1lbnQiLHNvdXJjZToiSFRNTFNvdXJjZUVsZW1lbnQiLHNwYW46IkhUTUxTcGFuRWxlbWVudCIsc3R5bGU6IkhUTUxTdHlsZUVsZW1lbnQiLHRpbWU6IkhUTUxUaW1lRWxlbWVudCIsY2FwdGlvbjoiSFRNTFRhYmxlQ2FwdGlvbkVsZW1lbnQiLGNvbDoiSFRNTFRhYmxlQ29sRWxlbWVudCIsdGFibGU6IkhUTUxUYWJsZUVsZW1lbnQiLHRyOiJIVE1MVGFibGVSb3dFbGVtZW50Iix0aGVhZDoiSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQiLHRib2R5OiJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsdGV4dGFyZWE6IkhUTUxUZXh0QXJlYUVsZW1lbnQiLHRyYWNrOiJIVE1MVHJhY2tFbGVtZW50Iix0aXRsZToiSFRNTFRpdGxlRWxlbWVudCIsdWw6IkhUTUxVTGlzdEVsZW1lbnQiLHZpZGVvOiJIVE1MVmlkZW9FbGVtZW50In0pO09iamVjdC5rZXlzKGMpLmZvckVhY2goYiksT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYS53cmFwcGVycykuZm9yRWFjaChmdW5jdGlvbihiKXt3aW5kb3dbYl09YS53cmFwcGVyc1tiXX0pLGEua25vd25FbGVtZW50cz1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKCl7d2luZG93LndyYXA9U2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkLHdpbmRvdy51bndyYXA9U2hhZG93RE9NUG9seWZpbGwudW53cmFwSWZOZWVkZWQsT2JqZWN0LmRlZmluZVByb3BlcnR5KEVsZW1lbnQucHJvdG90eXBlLCJ3ZWJraXRTaGFkb3dSb290IixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEVsZW1lbnQucHJvdG90eXBlLCJzaGFkb3dSb290IikpO3ZhciBhPUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q7RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBiPWEuY2FsbCh0aGlzKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMud2F0Y2hTaGFkb3codGhpcyksYn0sRWxlbWVudC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1FbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz0iIjtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2MrPWEudGV4dENvbnRlbnQrIlxuXG4ifSksYnx8KGM9Yy5yZXBsYWNlKG0sIiIpKSxjfWZ1bmN0aW9uIGMoYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi50ZXh0Q29udGVudD1hLGJ9ZnVuY3Rpb24gZChhKXt2YXIgYj1jKGEpO2RvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYik7dmFyIGQ9Yi5zaGVldC5jc3NSdWxlcztyZXR1cm4gYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGR9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9MCxjPVtdO2I8YS5sZW5ndGg7YisrKWMucHVzaChhW2JdLmNzc1RleHQpO3JldHVybiBjLmpvaW4oIlxuXG4iKX1mdW5jdGlvbiBmKGEpe2EmJmcoKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9ZnVuY3Rpb24gZygpe3JldHVybiB2fHwodj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLHYuc2V0QXR0cmlidXRlKCJTaGFkb3dDU1NTaGltIiwiIiksdi5zaGFkb3dDc3NTaGltPSEwKSx2fXZhciBoPShhLmxvYWRlcix7c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihhLGIsZCl7dmFyIGU9dGhpcy5pc1R5cGVFeHRlbnNpb24oZCksZz10aGlzLnJlZ2lzdGVyRGVmaW5pdGlvbihhLGIsZCk7dGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYSxiKTt2YXIgaD10aGlzLnN0eWxlc1RvU2hpbW1lZENzc1RleHQoZy5yb290U3R5bGVzLGcuc2NvcGVTdHlsZXMsYixlKTtnLnNoaW1tZWRTdHlsZT1jKGgpLGEmJihhLnNoaW1tZWRTdHlsZT1nLnNoaW1tZWRTdHlsZSk7Zm9yKHZhciBpLGo9MCxrPWcucm9vdFN0eWxlcy5sZW5ndGg7az5qJiYoaT1nLnJvb3RTdHlsZXNbal0pO2orKylpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaSk7ZihoKX0sc3R5bGVzVG9TaGltbWVkQ3NzVGV4dDpmdW5jdGlvbihhLGIsYyxkKXtjPWN8fCIiLHRoaXMuaW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzKGEpLHRoaXMuaW5zZXJ0UG9seWZpbGxSdWxlcyhhKTt2YXIgZT10aGlzLnNoaW1BdEhvc3QoYixjLGQpK3RoaXMuc2hpbVNjb3BpbmcoYixjLGQpO3JldHVybiBlKz10aGlzLmV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXMoYSl9LHJlZ2lzdGVyRGVmaW5pdGlvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZWdpc3RyeVtiXT17cm9vdDphLG5hbWU6YixleHRlbmRzTmFtZTpjfSxlPWE/YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpOltdO2U9ZT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLDApOltdLGQucm9vdFN0eWxlcz1lLGQuc2NvcGVTdHlsZXM9ZC5yb290U3R5bGVzO3ZhciBmPXRoaXMucmVnaXN0cnlbZC5leHRlbmRzTmFtZV07cmV0dXJuIWZ8fGEmJiFhLnF1ZXJ5U2VsZWN0b3IoInNoYWRvdyIpfHwoZC5zY29wZVN0eWxlcz1mLnNjb3BlU3R5bGVzLmNvbmNhdChkLnNjb3BlU3R5bGVzKSksZH0saXNUeXBlRXh0ZW5zaW9uOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLmluZGV4T2YoIi0iKTwwfSxhcHBseVNjb3BlVG9Db250ZW50OmZ1bmN0aW9uKGEsYil7YSYmKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYS5xdWVyeVNlbGVjdG9yQWxsKCIqIiksZnVuY3Rpb24oYSl7YS5zZXRBdHRyaWJ1dGUoYiwiIil9KSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKSxmdW5jdGlvbihhKXt0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYS5jb250ZW50LGIpfSx0aGlzKSl9LGluc2VydFBvbHlmaWxsRGlyZWN0aXZlczpmdW5jdGlvbihhKXthJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD10aGlzLmluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dChhLnRleHRDb250ZW50KX0sdGhpcyl9LGluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKG4sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5zbGljZSgwLC0yKSsieyJ9KX0saW5zZXJ0UG9seWZpbGxSdWxlczpmdW5jdGlvbihhKXthJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD10aGlzLmluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQoYS50ZXh0Q29udGVudCl9LHRoaXMpfSxpbnNlcnRQb2x5ZmlsbFJ1bGVzSW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UobyxmdW5jdGlvbihhLGIpe3JldHVybiBiLnNsaWNlKDAsLTEpfSl9LGV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXM6ZnVuY3Rpb24oYSl7dmFyIGI9IiI7cmV0dXJuIGEmJkFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXtiKz10aGlzLmV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dChhLnRleHRDb250ZW50KSsiXG5cbiJ9LHRoaXMpLGJ9LGV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0iIjtiPXAuZXhlYyhhKTspYys9YlsxXS5zbGljZSgwLC0xKSsiXG5cbiI7cmV0dXJuIGN9LHNoaW1BdEhvc3Q6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhP3RoaXMuY29udmVydEF0SG9zdFN0eWxlcyhhLGIsYyk6dm9pZCAwfSxjb252ZXJ0QXRIb3N0U3R5bGVzOmZ1bmN0aW9uKGEsYyxmKXt2YXIgZz1iKGEpLGg9dGhpcztyZXR1cm4gZz1nLnJlcGxhY2UoaSxmdW5jdGlvbihhLGIpe3JldHVybiBoLnNjb3BlSG9zdENzcyhiLGMsZil9KSxnPWUodGhpcy5maW5kQXRIb3N0UnVsZXMoZChnKSx0aGlzLm1ha2VTY29wZU1hdGNoZXIoYyxmKSkpfSxzY29wZUhvc3RDc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXM7cmV0dXJuIGEucmVwbGFjZShqLGZ1bmN0aW9uKGEsZSxmKXtyZXR1cm4gZC5zY29wZUhvc3RTZWxlY3RvcihlLGIsYykrIiAiK2YrIlxuCSJ9KX0sc2NvcGVIb3N0U2VsZWN0b3I6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9YS5zcGxpdCgiLCIpLGY9Iltpcz0iK2IrIl0iO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnRyaW0oKSxhLm1hdGNoKGspP2E9YS5yZXBsYWNlKGssYz9mKyIkMSQzIjpiKyIkMSQzIik6YS5tYXRjaChsKSYmKGE9Yz9mK2E6YithKSxkLnB1c2goYSl9LHRoaXMpLGQuam9pbigiLCAiKX0sZmluZEF0SG9zdFJ1bGVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChhLHRoaXMuaXNIb3N0UnVsZS5iaW5kKHRoaXMsYikpfSxpc0hvc3RSdWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuc2VsZWN0b3JUZXh0JiZiLnNlbGVjdG9yVGV4dC5tYXRjaChhKXx8Yi5jc3NSdWxlcyYmdGhpcy5maW5kQXRIb3N0UnVsZXMoYi5jc3NSdWxlcyxhKS5sZW5ndGh8fGIudHlwZT09Q1NTUnVsZS5XRUJLSVRfS0VZRlJBTUVTX1JVTEV9LHNoaW1TY29waW5nOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYT90aGlzLmNvbnZlcnRTY29wZWRTdHlsZXMoYSxiLGMpOnZvaWQgMH0sY29udmVydFNjb3BlZFN0eWxlczpmdW5jdGlvbihhLGMsZSl7dmFyIGY9YihhKS5yZXBsYWNlKGksIiIpO2Y9dGhpcy5pbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQoZiksZj10aGlzLmNvbnZlcnRDb2xvbkhvc3QoZiksZj10aGlzLmNvbnZlcnRDb2xvbkFuY2VzdG9yKGYpLGY9dGhpcy5jb252ZXJ0UHNldWRvcyhmKSxmPXRoaXMuY29udmVydFBhcnRzKGYpLGY9dGhpcy5jb252ZXJ0Q29tYmluYXRvcnMoZik7dmFyIGc9ZChmKTtyZXR1cm4gYyYmKGY9dGhpcy5zY29wZVJ1bGVzKGcsYyxlKSksZn0sY29udmVydFBzZXVkb3M6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShxLCIgW3BzZXVkbz0kMV0iKX0sY29udmVydFBhcnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UociwiIFtwYXJ0PSQxXSIpfSxjb252ZXJ0Q29sb25Ib3N0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RSZSx0aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvbkFuY2VzdG9yOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkFuY2VzdG9yUmUsdGhpcy5jb2xvbkFuY2VzdG9yUGFydFJlcGxhY2VyKX0sY29udmVydENvbG9uUnVsZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixkLGUpe2lmKGI9cG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGQpe2Zvcih2YXIgZixnPWQuc3BsaXQoIiwiKSxoPVtdLGk9MCxqPWcubGVuZ3RoO2o+aSYmKGY9Z1tpXSk7aSsrKWY9Zi50cmltKCksaC5wdXNoKGMoYixmLGUpKTtyZXR1cm4gaC5qb2luKCIsIil9cmV0dXJuIGIrZX0pfSxjb2xvbkFuY2VzdG9yUGFydFJlcGxhY2VyOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYi5tYXRjaChzKT90aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcihhLGIsYyk6YStiK2MrIiwgIitiKyIgIithK2N9LGNvbG9uSG9zdFBhcnRSZXBsYWNlcjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGErYi5yZXBsYWNlKHMsIiIpK2N9LGNvbnZlcnRDb21iaW5hdG9yczpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXlxeL2csIiAiKS5yZXBsYWNlKC9cXi9nLCIgIil9LHNjb3BlUnVsZXM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSIiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS5zZWxlY3RvclRleHQmJmEuc3R5bGUmJmEuc3R5bGUuY3NzVGV4dD8oZCs9dGhpcy5zY29wZVNlbGVjdG9yKGEuc2VsZWN0b3JUZXh0LGIsYyx0aGlzLnN0cmljdFN0eWxpbmcpKyIge1xuCSIsZCs9dGhpcy5wcm9wZXJ0aWVzRnJvbVJ1bGUoYSkrIlxufVxuXG4iKTphLm1lZGlhPyhkKz0iQG1lZGlhICIrYS5tZWRpYS5tZWRpYVRleHQrIiB7XG4iLGQrPXRoaXMuc2NvcGVSdWxlcyhhLmNzc1J1bGVzLGIsYyksZCs9IlxufVxuXG4iKTphLmNzc1RleHQmJihkKz1hLmNzc1RleHQrIlxuXG4iKX0sdGhpcyksZH0sc2NvcGVTZWxlY3RvcjpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXSxmPWEuc3BsaXQoIiwiKTtyZXR1cm4gZi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhhLGIsYykmJihhPWQmJiFhLm1hdGNoKHBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcik/dGhpcy5hcHBseVN0cmljdFNlbGVjdG9yU2NvcGUoYSxiKTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGIsYykpLGUucHVzaChhKX0sdGhpcyksZS5qb2luKCIsICIpfSxzZWxlY3Rvck5lZWRzU2NvcGluZzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5tYWtlU2NvcGVNYXRjaGVyKGIsYyk7cmV0dXJuIWEubWF0Y2goZCl9LG1ha2VTY29wZU1hdGNoZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iPyJcXFtpcz1bJ1wiXT8iK2ErIlsnXCJdP1xcXSI6YTtyZXR1cm4gbmV3IFJlZ0V4cCgiXigiK2MrIikiK3NlbGVjdG9yUmVTdWZmaXgsIm0iKX0sYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jPyJbaXM9IitiKyJdIjpiO3JldHVybiBhLm1hdGNoKHBvbHlmaWxsSG9zdFJlKT8oYT1hLnJlcGxhY2UocG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGQpLGEucmVwbGFjZShwb2x5ZmlsbEhvc3RSZSxkKyIgIikpOmQrIiAiK2F9LGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3ZhciBjPVsiICIsIj4iLCIrIiwifiJdLGQ9YSxlPSJbIitiKyJdIjtyZXR1cm4gYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWQuc3BsaXQoYSk7ZD1iLm1hcChmdW5jdGlvbihhKXt2YXIgYj1hLnRyaW0oKS5yZXBsYWNlKHBvbHlmaWxsSG9zdFJlLCIiKTtyZXR1cm4gYiYmYy5pbmRleE9mKGIpPDAmJmIuaW5kZXhPZihlKTwwJiYoYT1iLnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sIiQxIitlKyIkMiQzIikpLGF9KS5qb2luKGEpfSksZH0saW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoaG9zdFJlLHMpLnJlcGxhY2UoY29sb25Ib3N0UmUscykucmVwbGFjZShjb2xvbkFuY2VzdG9yUmUsdCl9LHByb3BlcnRpZXNGcm9tUnVsZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jb250ZW50JiYhYS5zdHlsZS5jb250ZW50Lm1hdGNoKC9bJyJdKy8pP2Euc3R5bGUuY3NzVGV4dC5yZXBsYWNlKC9jb250ZW50OlteO10qOy9nLCJjb250ZW50OiAnIithLnN0eWxlLmNvbnRlbnQrIic7Iik6YS5zdHlsZS5jc3NUZXh0fX0pLGk9L0Bob3N0W157XSp7KChbXn1dKj97W157XSo/fVtcc1xTXSo/KSspfS9naW0saj0vKFtee10qKSh7W1xzXFNdKj99KS9naW0saz0vKC4qKSgoPzpcKil8KD86XDpzY29wZSkpKC4qKS8sbD0vXlsuXFs6XS8sbT0vXC9cKlteKl0qXCorKFteLypdW14qXSpcKispKlwvL2dpbSxuPS9cL1wqXHMqQHBvbHlmaWxsIChbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLykoW157XSo/KXsvZ2ltLG89L1wvXCpcc0Bwb2x5ZmlsbC1ydWxlKFteKl0qXCorKFteLypdW14qXSpcKispKilcLy9naW0scD0vXC9cKlxzQHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxxPS86Oih4LVteXHN7LChdKikvZ2ltLHI9Lzo6cGFydFwoKFteKV0qKVwpL2dpbSxzPSItc2hhZG93Y3NzaG9zdCIsdD0iLXNoYWRvd2Nzc2FuY2VzdG9yIix1PSIpKD86XFwoKCg/OlxcKFteKShdKlxcKXxbXikoXSopKz8pXFwpKT8oW14se10qKSI7Y3NzQ29sb25Ib3N0UmU9bmV3IFJlZ0V4cCgiKCIrcyt1LCJnaW0iKSxjc3NDb2xvbkFuY2VzdG9yUmU9bmV3IFJlZ0V4cCgiKCIrdCt1LCJnaW0iKSxzZWxlY3RvclJlU3VmZml4PSIoWz5cXHN+K1suLHs6XVtcXHNcXFNdKik/JCIsaG9zdFJlPS9AaG9zdC9naW0sY29sb25Ib3N0UmU9L1w6aG9zdC9naW0sY29sb25BbmNlc3RvclJlPS9cOmFuY2VzdG9yL2dpbSxwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3I9cysiLW5vLWNvbWJpbmF0b3IiLHBvbHlmaWxsSG9zdFJlPW5ldyBSZWdFeHAocywiZ2ltIikscG9seWZpbGxBbmNlc3RvclJlPW5ldyBSZWdFeHAodCwiZ2ltIik7dmFyIHY7aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXtmKCJzdHlsZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxuIik7dmFyIHc9d3JhcChkb2N1bWVudCkseD13LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTt4Lmluc2VydEJlZm9yZShnKCkseC5jaGlsZE5vZGVzWzBdKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe3dpbmRvdy5IVE1MSW1wb3J0cyYmIUhUTUxJbXBvcnRzLnVzZU5hdGl2ZSYmKEhUTUxJbXBvcnRzLmltcG9ydGVyLnByZWxvYWRTZWxlY3RvcnMrPSIsIGxpbmtbcmVsPXN0eWxlc2hlZXRdOm5vdChbbm9wb2x5ZmlsbF0pIixIVE1MSW1wb3J0cy5wYXJzZXIucGFyc2VHZW5lcmljPWZ1bmN0aW9uKGEpe2lmKCFhLnNoYWRvd0Nzc1NoaW0pe3ZhciBiPWE7aWYoIWEuaGFzQXR0cmlidXRlKCJub3BvbHlmaWxsIikpe2EuX19yZXNvdXJjZT8oYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSxiLnRleHRDb250ZW50PVBsYXRmb3JtLmxvYWRlci5yZXNvbHZlVXJsc0luQ3NzVGV4dChhLl9fcmVzb3VyY2UsYS5ocmVmKSxhLm93bmVyRG9jdW1lbnQ9PT13JiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSkpOlBsYXRmb3JtLmxvYWRlci5yZXNvbHZlVXJsc0luU3R5bGUoYik7dmFyIGM9W2JdO2IudGV4dENvbnRlbnQ9aC5zdHlsZXNUb1NoaW1tZWRDc3NUZXh0KGMsYyksYi5zaGFkb3dDc3NTaGltPSEwfWIucGFyZW50Tm9kZSE9PXgmJnguYXBwZW5kQ2hpbGQoYil9fSl9KX1hLlNoYWRvd0NTUz1ofSh3aW5kb3cuUGxhdGZvcm0pKTohZnVuY3Rpb24oKXt3aW5kb3cudGVtcGxhdGVDb250ZW50PXdpbmRvdy50ZW1wbGF0ZUNvbnRlbnR8fGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnR9LHdpbmRvdy53cmFwPXdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9O3ZhciBhPUVsZW1lbnQucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3Q7RWxlbWVudC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBiPXRoaXMud2Via2l0U2hhZG93Um9vdCxjPWEuY2FsbCh0aGlzKTtyZXR1cm4gYy5vbGRlclNoYWRvd1Jvb3Q9YixjLmhvc3Q9dGhpcyxDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFbGVtZW50LnByb3RvdHlwZSx7c2hhZG93Um9vdDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Via2l0U2hhZG93Um9vdH19LGNyZWF0ZVNoYWRvd1Jvb3Q6e3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Via2l0Q3JlYXRlU2hhZG93Um9vdCgpfX19KSx3aW5kb3cudGVtcGxhdGVDb250ZW50PWZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYSksIWEuY29udGVudCYmIWEuX2NvbnRlbnQpe2Zvcih2YXIgYj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5maXJzdENoaWxkOyliLmFwcGVuZENoaWxkKGEuZmlyc3RDaGlsZCk7YS5fY29udGVudD1ifXJldHVybiBhLmNvbnRlbnR8fGEuX2NvbnRlbnR9fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zm9yKHZhciBiPWF8fHt9LGQ9MTtkPGFyZ3VtZW50cy5sZW5ndGg7ZCsrKXt2YXIgZT1hcmd1bWVudHNbZF07dHJ5e2Zvcih2YXIgZiBpbiBlKWMoZixlLGIpfWNhdGNoKGcpe319cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGU9ZChiLGEpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGEsZSl9ZnVuY3Rpb24gZChhLGIpe2lmKGEpe3ZhciBjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKTtyZXR1cm4gY3x8ZChPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYil9fUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7cmV0dXJuIGQucHVzaC5hcHBseShkLGFyZ3VtZW50cyksYi5hcHBseShhLGQpfX0pLGEubWl4aW49Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIsYyl7dmFyIGQ9InN0cmluZyI9PXR5cGVvZiBhP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk6YS5jbG9uZU5vZGUoITApO2lmKGQuaW5uZXJIVE1MPWIsYylmb3IodmFyIGUgaW4gYylkLnNldEF0dHJpYnV0ZShlLGNbZV0pO3JldHVybiBkfXZhciBjPURPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkLGQ9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWMuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylkLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGIpezE9PWFyZ3VtZW50cy5sZW5ndGgmJihiPSF0aGlzLmNvbnRhaW5zKGEpKSxiP3RoaXMuYWRkKGEpOnRoaXMucmVtb3ZlKGEpfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnN3aXRjaD1mdW5jdGlvbihhLGIpe2EmJnRoaXMucmVtb3ZlKGEpLGImJnRoaXMuYWRkKGIpfTt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzKX0sZj13aW5kb3cuTmFtZWROb2RlTWFwfHx3aW5kb3cuTW96TmFtZWRBdHRyTWFwfHx7fTtpZihOb2RlTGlzdC5wcm90b3R5cGUuYXJyYXk9ZSxmLnByb3RvdHlwZS5hcnJheT1lLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5hcnJheT1lLCF3aW5kb3cucGVyZm9ybWFuY2Upe3ZhciBnPURhdGUubm93KCk7d2luZG93LnBlcmZvcm1hbmNlPXtub3c6ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3coKS1nfX19d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXt2YXIgYT13aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lO3JldHVybiBhP2Z1bmN0aW9uKGIpe3JldHVybiBhKGZ1bmN0aW9uKCl7YihwZXJmb3JtYW5jZS5ub3coKSl9KX06ZnVuY3Rpb24oYSl7cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGEsMWUzLzYwKX19KCkpLHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pDYW5jZWxBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oYSl7Y2xlYXJUaW1lb3V0KGEpfX0oKSk7dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtpLmhyZWY9ZG9jdW1lbnQuYmFzZVVSSSxoLmNvbnRlbnQub3duZXJEb2N1bWVudC5hcHBlbmRDaGlsZChpKTt2YXIgaj1bXSxrPWZ1bmN0aW9uKCl7ai5wdXNoKGFyZ3VtZW50cyl9O3dpbmRvdy5Qb2x5bWVyPWssYS5kZWxpdmVyRGVjbGFyYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIGEuZGVsaXZlckRlY2xhcmF0aW9ucz1udWxsLGp9LHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe3dpbmRvdy5Qb2x5bWVyPT09ayYmKHdpbmRvdy5Qb2x5bWVyPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignWW91IHRyaWVkIHRvIHVzZSBwb2x5bWVyIHdpdGhvdXQgbG9hZGluZyBpdCBmaXJzdC4gVG8gbG9hZCBwb2x5bWVyLCA8bGluayByZWw9ImltcG9ydCIgaHJlZj0iY29tcG9uZW50cy9wb2x5bWVyL3BvbHltZXIuaHRtbCI+Jyl9KX0pLGEuY3JlYXRlRE9NPWJ9KHdpbmRvdy5QbGF0Zm9ybSksd2luZG93LnRlbXBsYXRlQ29udGVudD13aW5kb3cudGVtcGxhdGVDb250ZW50fHxmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50fSxmdW5jdGlvbihhKXthPWF8fCh3aW5kb3cuSW5zcGVjdG9yPXt9KTt2YXIgYjt3aW5kb3cuc2luc3BlY3Q9ZnVuY3Rpb24oYSxkKXtifHwoYj13aW5kb3cub3BlbigiIiwiU2hhZG93RE9NIEluc3BlY3RvciIsbnVsbCwhMCksYi5kb2N1bWVudC53cml0ZShjKSxiLmFwaT17c2hhZG93aXplOnNoYWRvd2l6ZX0pLGYoYXx8d3JhcChkb2N1bWVudC5ib2R5KSxkKX07dmFyIGM9WyI8IURPQ1RZUEUgaHRtbD4iLCI8aHRtbD4iLCIgIDxoZWFkPiIsIiAgICA8dGl0bGU+U2hhZG93RE9NIEluc3BlY3RvcjwvdGl0bGU+IiwiICAgIDxzdHlsZT4iLCIgICAgICBib2R5IHsiLCIgICAgICB9IiwiICAgICAgcHJlIHsiLCcgICAgICAgIGZvbnQ6IDlwdCAiQ291cmllciBOZXciLCBtb25vc3BhY2U7JywiICAgICAgICBsaW5lLWhlaWdodDogMS41ZW07IiwiICAgICAgfSIsIiAgICAgIHRhZyB7IiwiICAgICAgICBjb2xvcjogcHVycGxlOyIsIiAgICAgIH0iLCIgICAgICB1bCB7IiwiICAgICAgICAgbWFyZ2luOiAwOyIsIiAgICAgICAgIHBhZGRpbmc6IDA7IiwiICAgICAgICAgbGlzdC1zdHlsZTogbm9uZTsiLCIgICAgICB9IiwiICAgICAgbGkgeyIsIiAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsiLCIgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFmMWYxOyIsIiAgICAgICAgIHBhZGRpbmc6IDRweCA2cHg7IiwiICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OyIsIiAgICAgICAgIG1hcmdpbi1yaWdodDogNHB4OyIsIiAgICAgIH0iLCIgICAgPC9zdHlsZT4iLCIgIDwvaGVhZD4iLCIgIDxib2R5PiIsJyAgICA8dWwgaWQ9ImNydW1icyI+JywiICAgIDwvdWw+IiwnICAgIDxkaXYgaWQ9InRyZWUiPjwvZGl2PicsIiAgPC9ib2R5PiIsIjwvaHRtbD4iXS5qb2luKCJcbiIpLGQ9W10sZT1mdW5jdGlvbigpe3ZhciBhPWIuZG9jdW1lbnQsYz1hLnF1ZXJ5U2VsZWN0b3IoIiNjcnVtYnMiKTtjLnRleHRDb250ZW50PSIiO2Zvcih2YXIgZSxnPTA7ZT1kW2ddO2crKyl7dmFyIGg9YS5jcmVhdGVFbGVtZW50KCJhIik7aC5ocmVmPSIjIixoLnRleHRDb250ZW50PWUubG9jYWxOYW1lLGguaWR4PWcsaC5vbmNsaWNrPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYjtkLmxlbmd0aD50aGlzLmlkeDspYj1kLnBvcCgpO2YoYi5zaGFkb3d8fGIsYiksYS5wcmV2ZW50RGVmYXVsdCgpfSxjLmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudCgibGkiKSkuYXBwZW5kQ2hpbGQoaCl9fSxmPWZ1bmN0aW9uKGEsYyl7dmFyIGY9Yi5kb2N1bWVudDtrPVtdO3ZhciBnPWN8fGE7ZC5wdXNoKGcpLGUoKSxmLmJvZHkucXVlcnlTZWxlY3RvcigiI3RyZWUiKS5pbm5lckhUTUw9IjxwcmU+IitqKGEsYS5jaGlsZE5vZGVzKSsiPC9wcmU+In0sZz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGg9e1NUWUxFOjEsU0NSSVBUOjEsIiNjb21tZW50IjoxLFRFTVBMQVRFOjF9LGk9ZnVuY3Rpb24oYSl7cmV0dXJuIGhbYS5ub2RlTmFtZV19LGo9ZnVuY3Rpb24oYSxiLGMpe2lmKGkoYSkpcmV0dXJuIiI7dmFyIGQ9Y3x8IiI7aWYoYS5sb2NhbE5hbWV8fDExPT1hLm5vZGVUeXBlKXt2YXIgZT1hLmxvY2FsTmFtZXx8InNoYWRvdy1yb290IixmPWQrbChhKTsiY29udGVudCI9PWUmJihiPWEuZ2V0RGlzdHJpYnV0ZWROb2RlcygpKSxmKz0iPGJyLz4iO3ZhciBoPWQrIiZuYnNwOyZuYnNwOyI7ZyhiLGZ1bmN0aW9uKGEpe2YrPWooYSxhLmNoaWxkTm9kZXMsaCl9KSxmKz1kLHticjoxfVtlXXx8KGYrPSI8dGFnPiZsdDsvIitlKyImZ3Q7PC90YWc+IixmKz0iPGJyLz4iKX1lbHNle3ZhciBrPWEudGV4dENvbnRlbnQudHJpbSgpO2Y9az9kKyciJytrKyciPGJyLz4nOiIifXJldHVybiBmfSxrPVtdLGw9ZnVuY3Rpb24oYSl7dmFyIGI9Ijx0YWc+Jmx0OyIsYz1hLmxvY2FsTmFtZXx8InNoYWRvdy1yb290IjtyZXR1cm4gYS53ZWJraXRTaGFkb3dSb290fHxhLnNoYWRvd1Jvb3Q/KGIrPScgPGJ1dHRvbiBpZHg9Iicray5sZW5ndGgrJyIgb25jbGljaz0iYXBpLnNoYWRvd2l6ZS5jYWxsKHRoaXMpIj4nK2MrIjwvYnV0dG9uPiIsay5wdXNoKGEpKTpiKz1jfHwic2hhZG93LXJvb3QiLGEuYXR0cmlidXRlcyYmZyhhLmF0dHJpYnV0ZXMsZnVuY3Rpb24oYSl7Yis9IiAiK2EubmFtZSsoYS52YWx1ZT8nPSInK2EudmFsdWUrJyInOiIiKX0pLGIrPSImZ3Q7PC90YWc+In07c2hhZG93aXplPWZ1bmN0aW9uKCl7dmFyIGE9TnVtYmVyKHRoaXMuYXR0cmlidXRlcy5pZHgudmFsdWUpLGI9a1thXTtiP2YoYi53ZWJraXRTaGFkb3dSb290fHxiLnNoYWRvd1Jvb3QsYik6KGNvbnNvbGUubG9nKCJiYWQgc2hhZG93aXplIG5vZGUiKSxjb25zb2xlLmRpcih0aGlzKSl9LGEub3V0cHV0PWp9KHdpbmRvdy5JbnNwZWN0b3IpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3JlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe2Zvcih2YXIgYSxiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZSksZj0wLGc9Yi5sZW5ndGg7Zz5mJiYoYT1iW2ZdKTtmKyspYS5yZW1vdmVBdHRyaWJ1dGUoYyksYS5zZXRBdHRyaWJ1dGUoZCwiIik7aWYoYi5sZW5ndGgpe3ZhciBoPWZ1bmN0aW9uKCl7Zm9yKHZhciBhLGM9MCxlPWIubGVuZ3RoO2U+YyYmKGE9YltjXSk7YysrKWEucmVtb3ZlQXR0cmlidXRlKGQpO2RvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLGgsITEpfTtkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoaSxoLCExKX19KX12YXIgYj0uMixjPSJ1bnJlc29sdmVkIixkPSJyZXNvbHZlZCIsZT0iWyIrYysiXSIsZj0iWyIrZCsiXSIsZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2cudGV4dENvbnRlbnQ9ZSsiIHsgb3BhY2l0eTogMDsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47IH0gXG4iK2YrInsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47XG4td2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgIitiKyJzOyB0cmFuc2l0aW9uOiBvcGFjaXR5ICIrYisiczsgfVxuIjt2YXIgaD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7aC5pbnNlcnRCZWZvcmUoZyxoLmZpcnN0Q2hpbGQpO3ZhciBpPXZvaWQgMCE9PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS53ZWJraXRUcmFuc2l0aW9uPyJ3ZWJraXRUcmFuc2l0aW9uRW5kIjoidHJhbnNpdGlvbmVuZCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIldlYkNvbXBvbmVudHNSZWFkeSIsYSl9KFBsYXRmb3JtKSx3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe3ZhciBiPShhLnBhdGgsYS54aHIpLGM9ZnVuY3Rpb24oYSxiKXt0aGlzLmNhY2hlPXt9LHRoaXMub25sb2FkPWEsdGhpcy5vbmNvbXBsZXRlPWIsdGhpcy5pbmZsaWdodD0wLHRoaXMucGVuZGluZz17fX07Yy5wcm90b3R5cGU9e2FkZE5vZGVzOmZ1bmN0aW9uKGEpe3RoaXMuaW5mbGlnaHQrPWEubGVuZ3RoLGQoYSx0aGlzLnJlcXVpcmUsdGhpcyksdGhpcy5jaGVja0RvbmUoKX0scmVxdWlyZTpmdW5jdGlvbihhKXt2YXIgYj1hLnNyY3x8YS5ocmVmO2EuX19ub2RlVXJsPWIsdGhpcy5kZWR1cGUoYixhKXx8dGhpcy5mZXRjaChiLGEpfSxkZWR1cGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wZW5kaW5nW2FdPyh0aGlzLnBlbmRpbmdbYV0ucHVzaChiKSwhMCk6dGhpcy5jYWNoZVthXT8odGhpcy5vbmxvYWQoYSxiLHRoaXMuY2FjaGVbYV0pLHRoaXMudGFpbCgpLCEwKToodGhpcy5wZW5kaW5nW2FdPVtiXSwhMSl9LGZldGNoOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9ZnVuY3Rpb24oYixkKXt0aGlzLnJlY2VpdmUoYSxjLGIsZCl9LmJpbmQodGhpcyk7Yi5sb2FkKGEsZCl9LHJlY2VpdmU6ZnVuY3Rpb24oYSxiLGMsZCl7Y3x8KHRoaXMuY2FjaGVbYV09ZCksdGhpcy5wZW5kaW5nW2FdLmZvckVhY2goZnVuY3Rpb24oYil7Y3x8dGhpcy5vbmxvYWQoYSxiLGQpLHRoaXMudGFpbCgpfSx0aGlzKSx0aGlzLnBlbmRpbmdbYV09bnVsbH0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19LGI9Ynx8e2FzeW5jOiEwLG9rOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fDMwND09PWEuc3RhdHVzfHwwPT09YS5zdGF0dXN9LGxvYWQ6ZnVuY3Rpb24oYyxkLGUpe3ZhciBmPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4oYS5mbGFncy5kZWJ1Z3x8YS5mbGFncy5idXN0KSYmKGMrPSI/IitNYXRoLnJhbmRvbSgpKSxmLm9wZW4oIkdFVCIsYyxiLmFzeW5jKSxmLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGZ1bmN0aW9uKCl7ND09PWYucmVhZHlTdGF0ZSYmZC5jYWxsKGUsIWIub2soZikmJmYsZi5yZXNwb25zZXx8Zi5yZXNwb25zZVRleHQsYyl9KSxmLnNlbmQoKSxmfSxsb2FkRG9jdW1lbnQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMubG9hZChhLGIsYykucmVzcG9uc2VUeXBlPSJkb2N1bWVudCJ9fTt2YXIgZD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EueGhyPWIsYS5Mb2FkZXI9Y30od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBjKGEsail9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGQoYSl7cmV0dXJuInNjcmlwdCI9PT1hLmxvY2FsTmFtZX1mdW5jdGlvbiBlKGEsYil7dmFyIGM9YTtjIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChqKSksYy5fVVJMPWI7dmFyIGQ9Yy5jcmVhdGVFbGVtZW50KCJiYXNlIik7cmV0dXJuIGQuc2V0QXR0cmlidXRlKCJocmVmIixiKSxjLmJhc2VVUkl8fChjLmJhc2VVUkk9YiksYy5oZWFkLmFwcGVuZENoaWxkKGQpLGEgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGMuYm9keS5pbm5lckhUTUw9YSksd2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChjKSxjfWZ1bmN0aW9uIGYoYSxiKXtmdW5jdGlvbiBjKCl7az09bCYmcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGEpfWZ1bmN0aW9uIGQoKXtrKyssYygpfWI9Ynx8bzt2YXIgZT1IVE1MSW1wb3J0cy5pc0lFPyJjb21wbGV0ZSI6ImludGVyYWN0aXZlIixoPSJjb21wbGV0ZSI9PT1iLnJlYWR5U3RhdGV8fGIucmVhZHlTdGF0ZT09PWU7aWYoIWgpe3ZhciBpPWZ1bmN0aW9uKCl7KCJjb21wbGV0ZSI9PT1iLnJlYWR5U3RhdGV8fGIucmVhZHlTdGF0ZT09PWUpJiYoYi5yZW1vdmVFdmVudExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixpKSxmKGEsYikpfTtyZXR1cm4gdm9pZCBiLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGkpfXZhciBqPWIucXVlcnlTZWxlY3RvckFsbCgibGlua1tyZWw9aW1wb3J0XSIpLGs9MCxsPWoubGVuZ3RoO2lmKGwpZm9yKHZhciBtLG49MDtsPm4mJihtPWpbbl0pO24rKylnKG0pP2QuY2FsbChtKToobS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixkKSxtLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixkKSk7ZWxzZSBjKCl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gaT9hLmltcG9ydCYmImxvYWRpbmciIT09YS5pbXBvcnQucmVhZHlTdGF0ZTphLl9faW1wb3J0UGFyc2VkfXZhciBoPSJpbXBvcnQiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpLGk9IWEuZmxhZ3MuaW1wb3J0cyYmaCxqPSJpbXBvcnQiO2lmKCFpKXt2YXIgayxsPWEuTG9hZGVyLG09KGEueGhyLHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD93aW5kb3cuU2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKGRvY3VtZW50KTpkb2N1bWVudCksbj17ZG9jdW1lbnRzOnt9LGNhY2hlOnt9LHByZWxvYWRTZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2orIl0iLCJzY3JpcHRbc3JjXTpub3QoW3R5cGVdKSIsJ3NjcmlwdFtzcmNdW3R5cGU9InRleHQvamF2YXNjcmlwdCJdJ10uam9pbigiLCIpLGxvYWRlcjpmdW5jdGlvbihhKXtpZihrJiZrLmluZmxpZ2h0KXt2YXIgYj1rLm9uY29tcGxldGU7cmV0dXJuIGsub25jb21wbGV0ZT1mdW5jdGlvbigpe2IoKSxhKCl9LGt9cmV0dXJuIGs9bmV3IGwobi5sb2FkZWQsYSksay5jYWNoZT1uLmNhY2hlLGt9LGxvYWQ6ZnVuY3Rpb24oYSxiKXtrPW4ubG9hZGVyKGIpLG4ucHJlbG9hZChhKX0scHJlbG9hZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcnNoYWxOb2RlcyhhKTtrLmFkZE5vZGVzKGIpfSxtYXJzaGFsTm9kZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKG4ucHJlbG9hZFNlbGVjdG9ycyk7cmV0dXJuIGI9dGhpcy5maWx0ZXJNYWluRG9jdW1lbnROb2RlcyhhLGIpfSxmaWx0ZXJNYWluRG9jdW1lbnROb2RlczpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09bSYmKGI9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGIsZnVuY3Rpb24oYSl7cmV0dXJuIWQoYSl9KSksYn0sbG9hZGVkOmZ1bmN0aW9uKGEsYyxkKXtpZihiKGMpKXt2YXIgZj1uLmRvY3VtZW50c1thXTtmfHwoZj1lKGQsYSksbi5kb2N1bWVudHNbYV09ZixuLnByZWxvYWQoZikpLGMuaW1wb3J0PWMuY29udGVudD1kPWZ9Yy5fX3Jlc291cmNlPWR9fTtBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGEuaW1wb3J0ZXI9bn12YXIgbz13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d3JhcChkb2N1bWVudCk6ZG9jdW1lbnQ7T2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIl9jdXJyZW50U2NyaXB0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEhUTUxJbXBvcnRzLmN1cnJlbnRTY3JpcHR8fG8uY3VycmVudFNjcmlwdH0sd3JpdGVhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGEuaGFzTmF0aXZlPWgsYS51c2VOYXRpdmU9aSxhLndoZW5JbXBvcnRzUmVhZHk9ZixhLklNUE9SVF9MSU5LX1RZUEU9aixhLmlzSW1wb3J0TG9hZGVkPWd9KHdpbmRvdy5IVE1MSW1wb3J0cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi50ZXh0Q29udGVudD1hLnRleHRDb250ZW50LGcucmVzb2x2ZVVybHNJblN0eWxlKGIpLGJ9ZnVuY3Rpb24gYyhhLGIpe3RoaXMuZG9jPWEsdGhpcy5kb2MuX19sb2FkVHJhY2tlcj10aGlzLHRoaXMuY2FsbGJhY2s9Yn1mdW5jdGlvbiBkKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ofWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmIWYoYSl9ZnVuY3Rpb24gZihhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50PT09ZG9jdW1lbnR8fGEub3duZXJEb2N1bWVudC5pbXBsPT09ZG9jdW1lbnR9dmFyIGc9YS5wYXRoLGg9ImltcG9ydCIsaT0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxqPXtzZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2grIl0iLCJsaW5rW3JlbD1zdHlsZXNoZWV0XSIsInN0eWxlIiwic2NyaXB0Om5vdChbdHlwZV0pIiwnc2NyaXB0W3R5cGU9InRleHQvamF2YXNjcmlwdCJdJ10sbWFwOntsaW5rOiJwYXJzZUxpbmsiLHNjcmlwdDoicGFyc2VTY3JpcHQiLHN0eWxlOiJwYXJzZVN0eWxlIn0scGFyc2U6ZnVuY3Rpb24oYSxiKXtpZihhLl9faW1wb3J0UGFyc2VkKWImJmIoKTtlbHNle2EuX19pbXBvcnRQYXJzZWQ9ITA7Zm9yKHZhciBkLGU9bmV3IGMoYSxiKSxmPWEucXVlcnlTZWxlY3RvckFsbChqLnNlbGVjdG9ycyksZz1hLnNjcmlwdHM/YS5zY3JpcHRzLmxlbmd0aDowLGg9MDtoPGYubGVuZ3RoJiYoZD1mW2hdKTtoKyspaltqLm1hcFtkLmxvY2FsTmFtZV1dKGQpLGEuc2NyaXB0cyYmZyE9PWEuc2NyaXB0cy5sZW5ndGgmJihnPWEuc2NyaXB0cy5sZW5ndGgsZj1hLnF1ZXJ5U2VsZWN0b3JBbGwoai5zZWxlY3RvcnMpKTtlLm9wZW4oKX19LHBhcnNlTGluazpmdW5jdGlvbihhKXtpZihkKGEpKXtpZih0aGlzLnRyYWNrRWxlbWVudChhKSxhLl9fcmVzb3VyY2U/ai5wYXJzZShhLl9fcmVzb3VyY2UsZnVuY3Rpb24oKXthLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJsb2FkIix7YnViYmxlczohMX0pKX0pOmEuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoImVycm9yIix7YnViYmxlczohMX0pKSxhLl9fcGVuZGluZylmb3IodmFyIGI7YS5fX3BlbmRpbmcubGVuZ3RoOyliPWEuX19wZW5kaW5nLnNoaWZ0KCksYiYmYih7dGFyZ2V0OmF9KTthLl9faW1wb3J0UGFyc2VkPSEwfWVsc2UgZShhKSYmKGEuaHJlZj1hLmhyZWYpLHRoaXMucGFyc2VHZW5lcmljKGEpfSx0cmFja0VsZW1lbnQ6ZnVuY3Rpb24oYSl7aSYmInN0eWxlIj09PWEubG9jYWxOYW1lfHxhLm93bmVyRG9jdW1lbnQuX19sb2FkVHJhY2tlci5yZXF1aXJlKGEpfSxwYXJzZVN0eWxlOmZ1bmN0aW9uKGEpe2E9ZShhKT9iKGEpOmEsdGhpcy5wYXJzZUdlbmVyaWMoYSl9LHBhcnNlR2VuZXJpYzpmdW5jdGlvbihhKXtmKGEpfHwodGhpcy50cmFja0VsZW1lbnQoYSksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChhKSl9LHBhcnNlU2NyaXB0OmZ1bmN0aW9uKGIpe2lmKGUoYikpe3ZhciBjPShiLl9fcmVzb3VyY2V8fGIudGV4dENvbnRlbnQpLnRyaW0oKTtpZihjKXt2YXIgZD1iLl9fbm9kZVVybDtpZighZCl7ZD1iLm93bmVyRG9jdW1lbnQuYmFzZVVSSTt2YXIgZj0iWyIrTWF0aC5mbG9vcigxZTMqKE1hdGgucmFuZG9tKCkrMSkpKyJdIixnPWMubWF0Y2goL1BvbHltZXJcKFsnIl0oW14nIl0qKS8pO2Y9ZyYmZ1sxXXx8ZixkKz0iLyIrZisiLmpzIn1jKz0iXG4vLyMgc291cmNlVVJMPSIrZCsiXG4iLGEuY3VycmVudFNjcmlwdD1iLGV2YWwuY2FsbCh3aW5kb3csYyksYS5jdXJyZW50U2NyaXB0PW51bGx9fX19LGs9Lyh1cmxcKCkoW14pXSopKFwpKS9nLGw9LyhAaW1wb3J0W1xzXSopKFteO10qKSg7KS9nLGc9e3Jlc29sdmVVcmxzSW5TdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQsYz1iLmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVVcmxzSW5Dc3NUZXh0KGEudGV4dENvbnRlbnQsYyksYX0scmVzb2x2ZVVybHNJbkNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlcGxhY2VVcmxzKGEsYixrKTtyZXR1cm4gYz10aGlzLnJlcGxhY2VVcmxzKGMsYixsKX0scmVwbGFjZVVybHM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnJlcGxhY2UoYyxmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1kLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGIuaHJlZj1mLGY9Yi5ocmVmLGMrIiciK2YrIiciK2V9KX19O2MucHJvdG90eXBlPXtwZW5kaW5nOjAsaXNPcGVuOiExLG9wZW46ZnVuY3Rpb24oKXt0aGlzLmlzT3Blbj0hMCx0aGlzLmNoZWNrRG9uZSgpfSxhZGQ6ZnVuY3Rpb24oKXt0aGlzLnBlbmRpbmcrK30scmVxdWlyZTpmdW5jdGlvbihhKXt0aGlzLmFkZCgpO3ZhciBiPXRoaXMsYz1mdW5jdGlvbihhKXtiLnJlY2VpdmUoYSl9O2lmKGQoYSkpYS5fX3BlbmRpbmc9YS5fX3BlbmRpbmd8fFtdLGEuX19wZW5kaW5nLnB1c2goYyk7ZWxzZSBmb3IodmFyIGUsZj1bImxvYWQiLCJlcnJvciJdLGc9MCxoPWYubGVuZ3RoO2g+ZyYmKGU9ZltnXSk7ZysrKWEuYWRkRXZlbnRMaXN0ZW5lcihlLGMpfSxyZWNlaXZlOmZ1bmN0aW9uKCl7dGhpcy5wZW5kaW5nLS0sdGhpcy5jaGVja0RvbmUoKX0sY2hlY2tEb25lOmZ1bmN0aW9uKCl7dGhpcy5pc09wZW4mJnRoaXMucGVuZGluZzw9MCYmdGhpcy5jYWxsYmFjayYmKHRoaXMuaXNPcGVuPSExLHRoaXMuY2FsbGJhY2soKSl9fSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGEucGFyc2VyPWosYS5wYXRoPWcsYS5pc0lFPWl9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5yZWFkeT0hMCxIVE1MSW1wb3J0cy5yZWFkeVRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCksYy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiSFRNTEltcG9ydHNMb2FkZWQiLHtidWJibGVzOiEwfSkpfWZ1bmN0aW9uIGIoKXtIVE1MSW1wb3J0cy51c2VOYXRpdmV8fEhUTUxJbXBvcnRzLmltcG9ydGVyLmxvYWQoYyxmdW5jdGlvbigpe0hUTUxJbXBvcnRzLnBhcnNlci5wYXJzZShjKX0pfSJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO3JldHVybiBjLmluaXRFdmVudChhLGIuYnViYmxlcz09PSExPyExOiEwLGIuY2FuY2VsYWJsZT09PSExPyExOiEwLGIuZGV0YWlsKSxjfSk7dmFyIGM9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP3dpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoZG9jdW1lbnQpOmRvY3VtZW50O0hUTUxJbXBvcnRzLnVzZU5hdGl2ZXx8KCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHwiaW50ZXJhY3RpdmUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmIXdpbmRvdy5hdHRhY2hFdmVudD9iKCk6ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsYikpLEhUTUxJbXBvcnRzLndoZW5JbXBvcnRzUmVhZHkoZnVuY3Rpb24oKXthKCl9KX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3UucHVzaChhKSx0fHwodD0hMCxxKGQpKX1mdW5jdGlvbiBjKGEpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSl8fGF9ZnVuY3Rpb24gZCgpe3Q9ITE7dmFyIGE9dTt1PVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7dmFyIGI9ITE7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEudGFrZVJlY29yZHMoKTtlKGEpLGMubGVuZ3RoJiYoYS5jYWxsYmFja18oYyxhKSxiPSEwKX0pLGImJmQoKX1mdW5jdGlvbiBlKGEpe2Eubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9cC5nZXQoYik7YyYmYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Iub2JzZXJ2ZXI9PT1hJiZiLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPWE7YztjPWMucGFyZW50Tm9kZSl7dmFyIGQ9cC5nZXQoYyk7aWYoZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXSxnPWYub3B0aW9ucztpZihjPT09YXx8Zy5zdWJ0cmVlKXt2YXIgaD1iKGcpO2gmJmYuZW5xdWV1ZShoKX19fX1mdW5jdGlvbiBnKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89Kyt2fWZ1bmN0aW9uIGgoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1bXSx0aGlzLnJlbW92ZWROb2Rlcz1bXSx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBpKGEpe3ZhciBiPW5ldyBoKGEudHlwZSxhLnRhcmdldCk7cmV0dXJuIGIuYWRkZWROb2Rlcz1hLmFkZGVkTm9kZXMuc2xpY2UoKSxiLnJlbW92ZWROb2Rlcz1hLnJlbW92ZWROb2Rlcy5zbGljZSgpLGIucHJldmlvdXNTaWJsaW5nPWEucHJldmlvdXNTaWJsaW5nLGIubmV4dFNpYmxpbmc9YS5uZXh0U2libGluZyxiLmF0dHJpYnV0ZU5hbWU9YS5hdHRyaWJ1dGVOYW1lLGIuYXR0cmlidXRlTmFtZXNwYWNlPWEuYXR0cmlidXRlTmFtZXNwYWNlLGIub2xkVmFsdWU9YS5vbGRWYWx1ZSxifWZ1bmN0aW9uIGooYSxiKXtyZXR1cm4gdz1uZXcgaChhLGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIHg/eDooeD1pKHcpLHgub2xkVmFsdWU9YSx4KX1mdW5jdGlvbiBsKCl7dz14PXZvaWQgMH1mdW5jdGlvbiBtKGEpe3JldHVybiBhPT09eHx8YT09PXd9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgV2Vha01hcCxxPXdpbmRvdy5tc1NldEltbWVkaWF0ZTsKaWYoIXEpe3ZhciByPVtdLHM9U3RyaW5nKE1hdGgucmFuZG9tKCkpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixmdW5jdGlvbihhKXtpZihhLmRhdGE9PT1zKXt2YXIgYj1yO3I9W10sYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EoKX0pfX0pLHE9ZnVuY3Rpb24oYSl7ci5wdXNoKGEpLHdpbmRvdy5wb3N0TWVzc2FnZShzLCIqIil9fXZhciB0PSExLHU9W10sdj0wO2cucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGEsYil7aWYoYT1jKGEpLCFiLmNoaWxkTGlzdCYmIWIuYXR0cmlidXRlcyYmIWIuY2hhcmFjdGVyRGF0YXx8Yi5hdHRyaWJ1dGVPbGRWYWx1ZSYmIWIuYXR0cmlidXRlc3x8Yi5hdHRyaWJ1dGVGaWx0ZXImJmIuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmIWIuYXR0cmlidXRlc3x8Yi5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUmJiFiLmNoYXJhY3RlckRhdGEpdGhyb3cgbmV3IFN5bnRheEVycm9yO3ZhciBkPXAuZ2V0KGEpO2R8fHAuc2V0KGEsZD1bXSk7Zm9yKHZhciBlLGY9MDtmPGQubGVuZ3RoO2YrKylpZihkW2ZdLm9ic2VydmVyPT09dGhpcyl7ZT1kW2ZdLGUucmVtb3ZlTGlzdGVuZXJzKCksZS5vcHRpb25zPWI7YnJlYWt9ZXx8KGU9bmV3IG8odGhpcyxhLGIpLGQucHVzaChlKSx0aGlzLm5vZGVzXy5wdXNoKGEpKSxlLmFkZExpc3RlbmVycygpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9cC5nZXQoYSksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdO2lmKGQub2JzZXJ2ZXI9PT10aGlzKXtkLnJlbW92ZUxpc3RlbmVycygpLGIuc3BsaWNlKGMsMSk7YnJlYWt9fX0sdGhpcyksdGhpcy5yZWNvcmRzXz1bXX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlY29yZHNfO3JldHVybiB0aGlzLnJlY29yZHNfPVtdLGF9fTt2YXIgdyx4O28ucHJvdG90eXBlPXtlbnF1ZXVlOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMub2JzZXJ2ZXIucmVjb3Jkc18sZD1jLmxlbmd0aDtpZihjLmxlbmd0aD4wKXt2YXIgZT1jW2QtMV0sZj1uKGUsYSk7aWYoZilyZXR1cm4gdm9pZChjW2QtMV09Zil9ZWxzZSBiKHRoaXMub2JzZXJ2ZXIpO2NbZF09YX0sYWRkTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5hZGRMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0sYWRkTGlzdGVuZXJzXzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnM7Yi5hdHRyaWJ1dGVzJiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUF0dHJNb2RpZmllZCIsdGhpcywhMCksYi5jaGFyYWN0ZXJEYXRhJiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcywhMCksYi5jaGlsZExpc3QmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NTm9kZUluc2VydGVkIix0aGlzLCEwKSwoYi5jaGlsZExpc3R8fGIuc3VidHJlZSkmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NTm9kZVJlbW92ZWQiLHRoaXMsITApfSxyZW1vdmVMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18odGhpcy50YXJnZXQpfSxyZW1vdmVMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LGFkZFRyYW5zaWVudE9ic2VydmVyOmZ1bmN0aW9uKGEpe2lmKGEhPT10aGlzLnRhcmdldCl7dGhpcy5hZGRMaXN0ZW5lcnNfKGEpLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGEpO3ZhciBiPXAuZ2V0KGEpO2J8fHAuc2V0KGEsYj1bXSksYi5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXSxhLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKGEpO2Zvcih2YXIgYj1wLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXT09PXRoaXMpe2Iuc3BsaWNlKGMsMSk7YnJlYWt9fSx0aGlzKX0saGFuZGxlRXZlbnQ6ZnVuY3Rpb24oYSl7c3dpdGNoKGEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksYS50eXBlKXtjYXNlIkRPTUF0dHJNb2RpZmllZCI6dmFyIGI9YS5hdHRyTmFtZSxjPWEucmVsYXRlZE5vZGUubmFtZXNwYWNlVVJJLGQ9YS50YXJnZXQsZT1uZXcgaigiYXR0cmlidXRlcyIsZCk7ZS5hdHRyaWJ1dGVOYW1lPWIsZS5hdHRyaWJ1dGVOYW1lc3BhY2U9Yzt2YXIgZz1hLmF0dHJDaGFuZ2U9PT1NdXRhdGlvbkV2ZW50LkFERElUSU9OP251bGw6YS5wcmV2VmFsdWU7ZihkLGZ1bmN0aW9uKGEpe3JldHVybiFhLmF0dHJpYnV0ZXN8fGEuYXR0cmlidXRlRmlsdGVyJiZhLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJi0xPT09YS5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihiKSYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGMpP3ZvaWQgMDphLmF0dHJpYnV0ZU9sZFZhbHVlP2soZyk6ZX0pO2JyZWFrO2Nhc2UiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIjp2YXIgZD1hLnRhcmdldCxlPWooImNoYXJhY3RlckRhdGEiLGQpLGc9YS5wcmV2VmFsdWU7ZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoYXJhY3RlckRhdGE/YS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWU/ayhnKTplOnZvaWQgMH0pO2JyZWFrO2Nhc2UiRE9NTm9kZVJlbW92ZWQiOnRoaXMuYWRkVHJhbnNpZW50T2JzZXJ2ZXIoYS50YXJnZXQpO2Nhc2UiRE9NTm9kZUluc2VydGVkIjp2YXIgaCxpLGQ9YS5yZWxhdGVkTm9kZSxtPWEudGFyZ2V0OyJET01Ob2RlSW5zZXJ0ZWQiPT09YS50eXBlPyhoPVttXSxpPVtdKTooaD1bXSxpPVttXSk7dmFyIG49bS5wcmV2aW91c1NpYmxpbmcsbz1tLm5leHRTaWJsaW5nLGU9aigiY2hpbGRMaXN0IixkKTtlLmFkZGVkTm9kZXM9aCxlLnJlbW92ZWROb2Rlcz1pLGUucHJldmlvdXNTaWJsaW5nPW4sZS5uZXh0U2libGluZz1vLGYoZCxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGlsZExpc3Q/ZTp2b2lkIDB9KX1sKCl9fSxhLkpzTXV0YXRpb25PYnNlcnZlcj1nLGEuTXV0YXRpb25PYnNlcnZlcnx8KGEuTXV0YXRpb25PYnNlcnZlcj1nKX0odGhpcyksd2luZG93LkN1c3RvbUVsZW1lbnRzPXdpbmRvdy5DdXN0b21FbGVtZW50c3x8e2ZsYWdzOnt9fSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyxkKXt2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2lmKCFlKWZvcihlPWEuZmlyc3RDaGlsZDtlJiZlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWU9ZS5uZXh0U2libGluZztmb3IoO2U7KWMoZSxkKSE9PSEwJiZiKGUsYyxkKSxlPWUubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiKXtmb3IodmFyIGM9YS5zaGFkb3dSb290O2M7KWQoYyxiKSxjPWMub2xkZXJTaGFkb3dSb290fWZ1bmN0aW9uIGQoYSxkKXtiKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSk/ITA6dm9pZCBjKGEsZCl9KSxjKGEsZCl9ZnVuY3Rpb24gZShhKXtyZXR1cm4gaChhKT8oaShhKSwhMCk6dm9pZCBsKGEpfWZ1bmN0aW9uIGYoYSl7ZChhLGZ1bmN0aW9uKGEpe3JldHVybiBlKGEpPyEwOnZvaWQgMH0pfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIGUoYSl8fGYoYSl9ZnVuY3Rpb24gaChiKXtpZighYi5fX3VwZ3JhZGVkX18mJmIubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoImlzIil8fGIubG9jYWxOYW1lLGQ9YS5yZWdpc3RyeVtjXTtpZihkKXJldHVybiBBLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZToiLGIubG9jYWxOYW1lKSxhLnVwZ3JhZGUoYiksQS5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSwhMH19ZnVuY3Rpb24gaShhKXtsKGEpLHIoYSkmJmQoYSxmdW5jdGlvbihhKXtsKGEpfSl9ZnVuY3Rpb24gaihhKXtpZihFLnB1c2goYSksIUQpe0Q9ITA7dmFyIGI9d2luZG93LlBsYXRmb3JtJiZ3aW5kb3cuUGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2t8fHNldFRpbWVvdXQ7YihrKX19ZnVuY3Rpb24gaygpe0Q9ITE7Zm9yKHZhciBhLGI9RSxjPTAsZD1iLmxlbmd0aDtkPmMmJihhPWJbY10pO2MrKylhKCk7RT1bXX1mdW5jdGlvbiBsKGEpe0M/aihmdW5jdGlvbigpe20oYSl9KTptKGEpfWZ1bmN0aW9uIG0oYSl7KGEuYXR0YWNoZWRDYWxsYmFja3x8YS5kZXRhY2hlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmQS5kb20pJiYoQS5kb20mJmNvbnNvbGUuZ3JvdXAoImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLHIoYSkmJihhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCkrMSxhLl9faW5zZXJ0ZWQ8MSYmKGEuX19pbnNlcnRlZD0xKSxhLl9faW5zZXJ0ZWQ+MT9BLmRvbSYmY29uc29sZS53YXJuKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLmF0dGFjaGVkQ2FsbGJhY2smJihBLmRvbSYmY29uc29sZS5sb2coImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLGEuYXR0YWNoZWRDYWxsYmFjaygpKSksQS5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gbihhKXtvKGEpLGQoYSxmdW5jdGlvbihhKXtvKGEpfSl9ZnVuY3Rpb24gbyhhKXtDP2ooZnVuY3Rpb24oKXtwKGEpfSk6cChhKX1mdW5jdGlvbiBwKGEpeyhhLmF0dGFjaGVkQ2FsbGJhY2t8fGEuZGV0YWNoZWRDYWxsYmFja3x8YS5fX3VwZ3JhZGVkX18mJkEuZG9tKSYmKEEuZG9tJiZjb25zb2xlLmdyb3VwKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUpLHIoYSl8fChhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCktMSxhLl9faW5zZXJ0ZWQ+MCYmKGEuX19pbnNlcnRlZD0wKSxhLl9faW5zZXJ0ZWQ8MD9BLmRvbSYmY29uc29sZS53YXJuKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuZGV0YWNoZWRDYWxsYmFjayYmYS5kZXRhY2hlZENhbGxiYWNrKCkpLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCkpfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD9TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSk6YX1mdW5jdGlvbiByKGEpe2Zvcih2YXIgYj1hLGM9cShkb2N1bWVudCk7Yjspe2lmKGI9PWMpcmV0dXJuITA7Yj1iLnBhcmVudE5vZGV8fGIuaG9zdH19ZnVuY3Rpb24gcyhhKXtpZihhLnNoYWRvd1Jvb3QmJiFhLnNoYWRvd1Jvb3QuX193YXRjaGVkKXtBLmRvbSYmY29uc29sZS5sb2coIndhdGNoaW5nIHNoYWRvdy1yb290IGZvcjogIixhLmxvY2FsTmFtZSk7Zm9yKHZhciBiPWEuc2hhZG93Um9vdDtiOyl0KGIpLGI9Yi5vbGRlclNoYWRvd1Jvb3R9fWZ1bmN0aW9uIHQoYSl7YS5fX3dhdGNoZWR8fCh3KGEpLGEuX193YXRjaGVkPSEwKX1mdW5jdGlvbiB1KGEpe2lmKEEuZG9tKXt2YXIgYj1hWzBdO2lmKGImJiJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMmJmIuYWRkZWROb2Rlcyl7Zm9yKHZhciBjPWIuYWRkZWROb2Rlc1swXTtjJiZjIT09ZG9jdW1lbnQmJiFjLmhvc3Q7KWM9Yy5wYXJlbnROb2RlO3ZhciBkPWMmJihjLlVSTHx8Yy5fVVJMfHxjLmhvc3QmJmMuaG9zdC5sb2NhbE5hbWUpfHwiIjtkPWQuc3BsaXQoIi8/Iikuc2hpZnQoKS5zcGxpdCgiLyIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoIm11dGF0aW9ucyAoJWQpIFslc10iLGEubGVuZ3RoLGR8fCIiKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7ImNoaWxkTGlzdCI9PT1hLnR5cGUmJihHKGEuYWRkZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmZyhhKX0pLEcoYS5yZW1vdmVkTm9kZXMsZnVuY3Rpb24oYSl7YS5sb2NhbE5hbWUmJm4oYSl9KSl9KSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHYoKXt1KEYudGFrZVJlY29yZHMoKSksaygpfWZ1bmN0aW9uIHcoYSl7Ri5vYnNlcnZlKGEse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9ZnVuY3Rpb24geChhKXt3KGEpfWZ1bmN0aW9uIHkoYSl7QS5kb20mJmNvbnNvbGUuZ3JvdXAoInVwZ3JhZGVEb2N1bWVudDogIixhLmJhc2VVUkkuc3BsaXQoIi8iKS5wb3AoKSksZyhhKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHooYSl7YT1xKGEpLHkoYSk7Zm9yKHZhciBiLGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK0IrIl0iKSxkPTAsZT1jLmxlbmd0aDtlPmQmJihiPWNbZF0pO2QrKyliLmltcG9ydCYmYi5pbXBvcnQuX19wYXJzZWQmJnooYi5pbXBvcnQpfXZhciBBPXdpbmRvdy5sb2dGbGFnc3x8e30sQj13aW5kb3cuSFRNTEltcG9ydHM/SFRNTEltcG9ydHMuSU1QT1JUX0xJTktfVFlQRToibm9uZSIsQz0hd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyPT09d2luZG93LkpzTXV0YXRpb25PYnNlcnZlcjthLmhhc1BvbHlmaWxsTXV0YXRpb25zPUM7dmFyIEQ9ITEsRT1bXSxGPW5ldyBNdXRhdGlvbk9ic2VydmVyKHUpLEc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLklNUE9SVF9MSU5LX1RZUEU9QixhLndhdGNoU2hhZG93PXMsYS51cGdyYWRlRG9jdW1lbnRUcmVlPXosYS51cGdyYWRlQWxsPWcsYS51cGdyYWRlU3VidHJlZT1mLGEub2JzZXJ2ZURvY3VtZW50PXgsYS51cGdyYWRlRG9jdW1lbnQ9eSxhLnRha2VSZWNvcmRzPXZ9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiLGYpe3ZhciBnPWZ8fHt9O2lmKCFiKXRocm93IG5ldyBFcnJvcigiZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50OiBmaXJzdCBhcmd1bWVudCBgbmFtZWAgbXVzdCBub3QgYmUgZW1wdHkiKTtpZihiLmluZGV4T2YoIi0iKTwwKXRocm93IG5ldyBFcnJvcigiZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50OiBmaXJzdCBhcmd1bWVudCAoJ25hbWUnKSBtdXN0IGNvbnRhaW4gYSBkYXNoICgnLScpLiBBcmd1bWVudCBwcm92aWRlZCB3YXMgJyIrU3RyaW5nKGIpKyInLiIpO2lmKG0oYikpdGhyb3cgbmV3IEVycm9yKCJEdXBsaWNhdGVEZWZpbml0aW9uRXJyb3I6IGEgdHlwZSB3aXRoIG5hbWUgJyIrU3RyaW5nKGIpKyInIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCIpO2lmKCFnLnByb3RvdHlwZSl0aHJvdyBuZXcgRXJyb3IoIk9wdGlvbnMgbWlzc2luZyByZXF1aXJlZCBwcm90b3R5cGUgcHJvcGVydHkiKTtyZXR1cm4gZy5fX25hbWU9Yi50b0xvd2VyQ2FzZSgpLGcubGlmZWN5Y2xlPWcubGlmZWN5Y2xlfHx7fSxnLmFuY2VzdHJ5PWMoZy5leHRlbmRzKSxkKGcpLGUoZyksayhnLnByb3RvdHlwZSksbihnLl9fbmFtZSxnKSxnLmN0b3I9byhnKSxnLmN0b3IucHJvdG90eXBlPWcucHJvdG90eXBlLGcucHJvdG90eXBlLmNvbnN0cnVjdG9yPWcuY3RvcixhLnJlYWR5JiZhLnVwZ3JhZGVEb2N1bWVudFRyZWUoZG9jdW1lbnQpLGcuY3Rvcn1mdW5jdGlvbiBjKGEpe3ZhciBiPW0oYSk7cmV0dXJuIGI/YyhiLmV4dGVuZHMpLmNvbmNhdChbYl0pOltdfWZ1bmN0aW9uIGQoYSl7Zm9yKHZhciBiLGM9YS5leHRlbmRzLGQ9MDtiPWEuYW5jZXN0cnlbZF07ZCsrKWM9Yi5pcyYmYi50YWc7YS50YWc9Y3x8YS5fX25hbWUsYyYmKGEuaXM9YS5fX25hbWUpfWZ1bmN0aW9uIGUoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKTtiPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKX1mb3IodmFyIGQsZT1hLnByb3RvdHlwZTtlJiZlIT09Yjspe3ZhciBkPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtlLl9fcHJvdG9fXz1kLGU9ZH19YS5uYXRpdmU9Yn1mdW5jdGlvbiBmKGEpe3JldHVybiBnKHgoYS50YWcpLGEpfWZ1bmN0aW9uIGcoYixjKXtyZXR1cm4gYy5pcyYmYi5zZXRBdHRyaWJ1dGUoImlzIixjLmlzKSxiLnJlbW92ZUF0dHJpYnV0ZSgidW5yZXNvbHZlZCIpLGgoYixjKSxiLl9fdXBncmFkZWRfXz0hMCxhLnVwZ3JhZGVTdWJ0cmVlKGIpLGooYiksYn1mdW5jdGlvbiBoKGEsYil7T2JqZWN0Ll9fcHJvdG9fXz9hLl9fcHJvdG9fXz1iLnByb3RvdHlwZTooaShhLGIucHJvdG90eXBlLGIubmF0aXZlKSxhLl9fcHJvdG9fXz1iLnByb3RvdHlwZSl9ZnVuY3Rpb24gaShhLGIsYyl7Zm9yKHZhciBkPXt9LGU9YjtlIT09YyYmZSE9PUhUTUxVbmtub3duRWxlbWVudC5wcm90b3R5cGU7KXtmb3IodmFyIGYsZz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKSxoPTA7Zj1nW2hdO2grKylkW2ZdfHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsZixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsZikpLGRbZl09MSk7ZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9fWZ1bmN0aW9uIGooYSl7YS5jcmVhdGVkQ2FsbGJhY2smJmEuY3JlYXRlZENhbGxiYWNrKCl9ZnVuY3Rpb24gayhhKXtpZighYS5zZXRBdHRyaWJ1dGUuX3BvbHlmaWxsZWQpe3ZhciBiPWEuc2V0QXR0cmlidXRlO2Euc2V0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYyl7bC5jYWxsKHRoaXMsYSxjLGIpfTt2YXIgYz1hLnJlbW92ZUF0dHJpYnV0ZTthLnJlbW92ZUF0dHJpYnV0ZT1mdW5jdGlvbihhKXtsLmNhbGwodGhpcyxhLG51bGwsYyl9LGEuc2V0QXR0cmlidXRlLl9wb2x5ZmlsbGVkPSEwfX1mdW5jdGlvbiBsKGEsYixjKXt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShhKTtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT10aGlzLmdldEF0dHJpYnV0ZShhKTt0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmZSE9PWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGEsZCxlKX1mdW5jdGlvbiBtKGEpe3JldHVybiBhP3dbYS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9ZnVuY3Rpb24gbihhLGIpe3dbYV09Yn1mdW5jdGlvbiBvKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBmKGEpfX1mdW5jdGlvbiBwKGEsYil7dmFyIGM9bShifHxhKTtyZXR1cm4gYz9uZXcgYy5jdG9yOngoYSl9ZnVuY3Rpb24gcShhKXtpZighYS5fX3VwZ3JhZGVkX18mJmEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoImlzIil8fGEubG9jYWxOYW1lLGM9bShiKTtyZXR1cm4gYyYmZyhhLGMpfX1mdW5jdGlvbiByKGIpe3ZhciBjPXkuY2FsbCh0aGlzLGIpO3JldHVybiBhLnVwZ3JhZGVBbGwoYyksY31hfHwoYT13aW5kb3cuQ3VzdG9tRWxlbWVudHM9e2ZsYWdzOnt9fSk7dmFyIHM9YS5mbGFncyx0PUJvb2xlYW4oZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KSx1PSFzLnJlZ2lzdGVyJiZ0JiYhd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsO2lmKHUpe3ZhciB2PWZ1bmN0aW9uKCl7fTthLnJlZ2lzdHJ5PXt9LGEudXBncmFkZUVsZW1lbnQ9dixhLndhdGNoU2hhZG93PXYsYS51cGdyYWRlPXYsYS51cGdyYWRlQWxsPXYsYS51cGdyYWRlU3VidHJlZT12LGEub2JzZXJ2ZURvY3VtZW50PXYsYS51cGdyYWRlRG9jdW1lbnQ9dixhLnVwZ3JhZGVEb2N1bWVudFRyZWU9dixhLnRha2VSZWNvcmRzPXZ9ZWxzZXt2YXIgdz17fSx4PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYmluZChkb2N1bWVudCkseT1Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGU7ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50PWIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudD1wLE5vZGUucHJvdG90eXBlLmNsb25lTm9kZT1yLGEucmVnaXN0cnk9dyxhLnVwZ3JhZGU9cX1kb2N1bWVudC5yZWdpc3Rlcj1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQsYS5oYXNOYXRpdmU9dCxhLnVzZU5hdGl2ZT11fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWN9dmFyIGM9YS5JTVBPUlRfTElOS19UWVBFLGQ9e3NlbGVjdG9yczpbImxpbmtbcmVsPSIrYysiXSJdLG1hcDp7bGluazoicGFyc2VMaW5rIn0scGFyc2U6ZnVuY3Rpb24oYSl7aWYoIWEuX19wYXJzZWQpe2EuX19wYXJzZWQ9ITA7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGQuc2VsZWN0b3JzKTtlKGIsZnVuY3Rpb24oYSl7ZFtkLm1hcFthLmxvY2FsTmFtZV1dKGEpfSksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGEpLEN1c3RvbUVsZW1lbnRzLm9ic2VydmVEb2N1bWVudChhKX19LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpJiZ0aGlzLnBhcnNlSW1wb3J0KGEpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXthLmltcG9ydCYmZC5wYXJzZShhLmltcG9ydCl9fSxlPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS5wYXJzZXI9ZCxhLklNUE9SVF9MSU5LX1RZUEU9Y30od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoZG9jdW1lbnQpO3ZhciBhPXdpbmRvdy5QbGF0Zm9ybSYmUGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s/UGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s6c2V0VGltZW91dDthKGZ1bmN0aW9uKCl7Q3VzdG9tRWxlbWVudHMucmVhZHk9ITAsQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lPURhdGUubm93KCksd2luZG93LkhUTUxJbXBvcnRzJiYoQ3VzdG9tRWxlbWVudHMuZWxhcHNlZD1DdXN0b21FbGVtZW50cy5yZWFkeVRpbWUtSFRNTEltcG9ydHMucmVhZHlUaW1lKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiV2ViQ29tcG9uZW50c1JlYWR5Iix7YnViYmxlczohMH0pKX0pfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYi5pbml0RXZlbnQoYSwhMCwhMCksYn0pLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHxhLmZsYWdzLmVhZ2VyKWIoKTtlbHNlIGlmKCJpbnRlcmFjdGl2ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlfHx3aW5kb3cuYXR0YWNoRXZlbnR8fHdpbmRvdy5IVE1MSW1wb3J0cyYmIXdpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeSl7dmFyIGM9d2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMucmVhZHk/IkhUTUxJbXBvcnRzTG9hZGVkIjoiRE9NQ29udGVudExvYWRlZCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYyxiKX1lbHNlIGIoKX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7YS50ZXh0Q29udGVudD0iZWxlbWVudCB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30gLyogaW5qZWN0ZWQgYnkgcGxhdGZvcm0uanMgKi8iO3ZhciBiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtpZihiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCksd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXt2YXIgYz1bInVwZ3JhZGVBbGwiLCJ1cGdyYWRlU3VidHJlZSIsIm9ic2VydmVEb2N1bWVudCIsInVwZ3JhZGVEb2N1bWVudCJdLGQ9e307Yy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2RbYV09Q3VzdG9tRWxlbWVudHNbYV19KSxjLmZvckVhY2goZnVuY3Rpb24oYSl7Q3VzdG9tRWxlbWVudHNbYV09ZnVuY3Rpb24oYil7cmV0dXJuIGRbYV0od3JhcChiKSl9fSl9fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zi50ZXh0Q29udGVudD1kKyssZS5wdXNoKGEpfWZ1bmN0aW9uIGMoKXtmb3IoO2UubGVuZ3RoOyllLnNoaWZ0KCkoKX12YXIgZD0wLGU9W10sZj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3KHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHxKc011dGF0aW9uT2JzZXJ2ZXIpKGMpLm9ic2VydmUoZix7Y2hhcmFjdGVyRGF0YTohMH0pLGEuZW5kT2ZNaWNyb3Rhc2s9Yn0oUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgZD1jKGEpO2ImJihkLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGIpLGQuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGIpKSxsLmFwcGVuZENoaWxkKGQpfWZ1bmN0aW9uIGMoYSxiKXtiPWJ8fGRvY3VtZW50LGI9Yi5jcmVhdGVFbGVtZW50P2I6Yi5vd25lckRvY3VtZW50O3ZhciBjPWIuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYy50ZXh0Q29udGVudD1hLGN9ZnVuY3Rpb24gZChhLGIpe2I9Ynx8IiI7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtpZihhKXt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtkLmhyZWY9YSxjLmhlYWQuYXBwZW5kQ2hpbGQoZCl9dmFyIGU9Yy5jcmVhdGVFbGVtZW50KCJhIik7cmV0dXJuIGUuaHJlZj1iLGMuYm9keS5hcHBlbmRDaGlsZChlKSxlfWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gSFRNTEltcG9ydHMucGF0aC5yZXNvbHZlVXJsc0luQ3NzVGV4dChhLGQoYikpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIEhUTUxJbXBvcnRzLnBhdGgucmVzb2x2ZVVybHNJblN0eWxlKGEpfWZ1bmN0aW9uIGcoYSxiKXtIVE1MSW1wb3J0cy54aHIubG9hZChoKGEpLGZ1bmN0aW9uKGEsYyxkKXtpKHRoaXMsZCxjKSx0aGlzLnRleHRDb250ZW50PWUodGhpcy50ZXh0Q29udGVudCxkKSxiJiZiKHRoaXMpfSxhKX1mdW5jdGlvbiBoKGEpe3ZhciBiPWEudGV4dENvbnRlbnQubWF0Y2gobSk7cmV0dXJuIGImJmJbMV19ZnVuY3Rpb24gaShhLGIsYyl7dmFyIGQ9bmV3IFJlZ0V4cCgiQGltcG9ydFteO10qIitiKyJbXjtdKjsiLCJpIik7YS50ZXh0Q29udGVudD1hLnRleHRDb250ZW50LnJlcGxhY2UoZCxjKX12YXIgaj17Y2FjaGVTdHlsZXM6ZnVuY3Rpb24oYSxjKXtmb3IodmFyIGQsZT1bXSxmPTAsZz1hLmxlbmd0aDtnPmYmJihkPWFbZl0pO2YrKyllLnB1c2goZC50ZXh0Q29udGVudCk7YihlLmpvaW4oIlxuIiksYyl9LHhoclN0eWxlczpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXtlKyssZT09PWYmJmImJmIoKX1mb3IodmFyIGQsZT0wLGY9YS5sZW5ndGgsaD0wO2Y+aCYmKGQ9YVtoXSk7aCsrKWcoZCxjKX19LGs9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgicHJlbG9hZGVyIik7ay5zdHlsZS5kaXNwbGF5PSJub25lIjt2YXIgbD1rLmNyZWF0ZVNoYWRvd1Jvb3QoKTtkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGspO3ZhciBtPS9AaW1wb3J0XHNbKF0/WyciXT8oW15ccyciOyldKikvO2oucmVzb2x2ZVVybHNJbkNzc1RleHQ9ZSxqLnJlc29sdmVVcmxzSW5TdHlsZT1mLGEubG9hZGVyPWp9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7YT1hfHx7fSxhLmV4dGVybmFsPWEuZXh0ZXJuYWx8fHt9O3ZhciBiPXtzaGFkb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS5zaGFkb3dSb290fHxhLndlYmtpdFNoYWRvd1Jvb3Q6dm9pZCAwfSxjYW5UYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJkJvb2xlYW4oYS5lbGVtZW50RnJvbVBvaW50KX0sdGFyZ2V0aW5nU2hhZG93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2hhZG93KGEpO3JldHVybiB0aGlzLmNhblRhcmdldChiKT9iOnZvaWQgMH0sb2xkZXJTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoIWIpe3ZhciBjPWEucXVlcnlTZWxlY3Rvcigic2hhZG93Iik7YyYmKGI9Yy5vbGRlclNoYWRvd1Jvb3QpfXJldHVybiBifSxhbGxTaGFkb3dzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPXRoaXMuc2hhZG93KGEpO2M7KWIucHVzaChjKSxjPXRoaXMub2xkZXJTaGFkb3coYyk7cmV0dXJuIGJ9LHNlYXJjaFJvb3Q6ZnVuY3Rpb24oYSxiLGMpe2lmKGEpe3ZhciBkLGUsZj1hLmVsZW1lbnRGcm9tUG9pbnQoYixjKTtmb3IoZT10aGlzLnRhcmdldGluZ1NoYWRvdyhmKTtlOyl7aWYoZD1lLmVsZW1lbnRGcm9tUG9pbnQoYixjKSl7dmFyIGc9dGhpcy50YXJnZXRpbmdTaGFkb3coZCk7cmV0dXJuIHRoaXMuc2VhcmNoUm9vdChnLGIsYyl8fGR9ZT10aGlzLm9sZGVyU2hhZG93KGUpfXJldHVybiBmfX0sb3duZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWE7Yi5wYXJlbnROb2RlOyliPWIucGFyZW50Tm9kZTtyZXR1cm4gYi5ub2RlVHlwZSE9Tm9kZS5ET0NVTUVOVF9OT0RFJiZiLm5vZGVUeXBlIT1Ob2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUmJihiPWRvY3VtZW50KSxifSxmaW5kVGFyZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuY2xpZW50WCxjPWEuY2xpZW50WSxkPXRoaXMub3duZXIoYS50YXJnZXQpO3JldHVybiBkLmVsZW1lbnRGcm9tUG9pbnQoYixjKXx8KGQ9ZG9jdW1lbnQpLHRoaXMuc2VhcmNoUm9vdChkLGIsYyl9fTthLnRhcmdldEZpbmRpbmc9YixhLmZpbmRUYXJnZXQ9Yi5maW5kVGFyZ2V0LmJpbmQoYiksd2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbD1hfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuImJvZHkgXl4gIitiKGEpfWZ1bmN0aW9uIGIoYSl7cmV0dXJuJ1t0b3VjaC1hY3Rpb249IicrYSsnIl0nfWZ1bmN0aW9uIGMoYSl7cmV0dXJuInsgLW1zLXRvdWNoLWFjdGlvbjogIithKyI7IHRvdWNoLWFjdGlvbjogIithKyI7IHRvdWNoLWFjdGlvbi1kZWxheTogbm9uZTsgfSJ9dmFyIGQ9WyJub25lIiwiYXV0byIsInBhbi14IiwicGFuLXkiLHtydWxlOiJwYW4teCBwYW4teSIsc2VsZWN0b3JzOlsicGFuLXggcGFuLXkiLCJwYW4teSBwYW4teCJdfV0sZT0iIjtkLmZvckVhY2goZnVuY3Rpb24oZCl7U3RyaW5nKGQpPT09ZD8oZSs9YihkKStjKGQpKyJcbiIsZSs9YShkKStjKGQpKyJcbiIpOihlKz1kLnNlbGVjdG9ycy5tYXAoYikrYyhkLnJ1bGUpKyJcbiIsZSs9ZC5zZWxlY3RvcnMubWFwKGEpK2MoZC5ydWxlKSsiXG4iKX0pO3ZhciBmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7Zi50ZXh0Q29udGVudD1lLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZil9KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGUpe2U9ZXx8e307dmFyIGY7aWYoZS5idXR0b25zfHxkKWY9ZS5idXR0b25zO2Vsc2Ugc3dpdGNoKGUud2hpY2gpe2Nhc2UgMTpmPTE7YnJlYWs7Y2FzZSAyOmY9NDticmVhaztjYXNlIDM6Zj0yO2JyZWFrO2RlZmF1bHQ6Zj0wfXZhciBpO2lmKGMpaT1uZXcgTW91c2VFdmVudChhLGUpO2Vsc2V7aT1kb2N1bWVudC5jcmVhdGVFdmVudCgiTW91c2VFdmVudCIpO2Zvcih2YXIgaixrPXt9LGw9MDtsPGcubGVuZ3RoO2wrKylqPWdbbF0sa1tqXT1lW2pdfHxoW2xdO2kuaW5pdE1vdXNlRXZlbnQoYSxrLmJ1YmJsZXMsay5jYW5jZWxhYmxlLGsudmlldyxrLmRldGFpbCxrLnNjcmVlblgsay5zY3JlZW5ZLGsuY2xpZW50WCxrLmNsaWVudFksay5jdHJsS2V5LGsuYWx0S2V5LGsuc2hpZnRLZXksay5tZXRhS2V5LGsuYnV0dG9uLGsucmVsYXRlZFRhcmdldCl9aS5fX3Byb3RvX189Yi5wcm90b3R5cGUsZHx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGksImJ1dHRvbnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZn0sZW51bWVyYWJsZTohMH0pO3ZhciBtPTA7cmV0dXJuIG09ZS5wcmVzc3VyZT9lLnByZXNzdXJlOmY/LjU6MCxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhpLHtwb2ludGVySWQ6e3ZhbHVlOmUucG9pbnRlcklkfHwwLGVudW1lcmFibGU6ITB9LHdpZHRoOnt2YWx1ZTplLndpZHRofHwwLGVudW1lcmFibGU6ITB9LGhlaWdodDp7dmFsdWU6ZS5oZWlnaHR8fDAsZW51bWVyYWJsZTohMH0scHJlc3N1cmU6e3ZhbHVlOm0sZW51bWVyYWJsZTohMH0sdGlsdFg6e3ZhbHVlOmUudGlsdFh8fDAsZW51bWVyYWJsZTohMH0sdGlsdFk6e3ZhbHVlOmUudGlsdFl8fDAsZW51bWVyYWJsZTohMH0scG9pbnRlclR5cGU6e3ZhbHVlOmUucG9pbnRlclR5cGV8fCIiLGVudW1lcmFibGU6ITB9LGh3VGltZXN0YW1wOnt2YWx1ZTplLmh3VGltZXN0YW1wfHwwLGVudW1lcmFibGU6ITB9LGlzUHJpbWFyeTp7dmFsdWU6ZS5pc1ByaW1hcnl8fCExLGVudW1lcmFibGU6ITB9fSksaX12YXIgYz0hMSxkPSExO3RyeXt2YXIgZT1uZXcgTW91c2VFdmVudCgiY2xpY2siLHtidXR0b25zOjF9KTtjPSEwLGQ9MT09PWUuYnV0dG9uc31jYXRjaChmKXt9dmFyIGc9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiXSxoPVshMSwhMSxudWxsLG51bGwsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGxdO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTW91c2VFdmVudC5wcm90b3R5cGUpLGEuUG9pbnRlckV2ZW50fHwoYS5Qb2ludGVyRXZlbnQ9Yil9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2lmKGMpe3ZhciBhPW5ldyBNYXA7cmV0dXJuIGEucG9pbnRlcnM9ZCxhfXRoaXMua2V5cz1bXSx0aGlzLnZhbHVlcz1bXX12YXIgYz13aW5kb3cuTWFwJiZ3aW5kb3cuTWFwLnByb3RvdHlwZS5mb3JFYWNoLGQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfTtiLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5rZXlzLmluZGV4T2YoYSk7Yz4tMT90aGlzLnZhbHVlc1tjXT1iOih0aGlzLmtleXMucHVzaChhKSx0aGlzLnZhbHVlcy5wdXNoKGIpKX0saGFzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmtleXMuaW5kZXhPZihhKT4tMX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5rZXlzLmluZGV4T2YoYSk7Yj4tMSYmKHRoaXMua2V5cy5zcGxpY2UoYiwxKSx0aGlzLnZhbHVlcy5zcGxpY2UoYiwxKSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gdGhpcy52YWx1ZXNbYl19LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5rZXlzLmxlbmd0aD0wLHRoaXMudmFsdWVzLmxlbmd0aD0wfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7dGhpcy52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbihjLGQpe2EuY2FsbChiLGMsdGhpcy5rZXlzW2RdLHRoaXMpfSx0aGlzKX0scG9pbnRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5rZXlzLmxlbmd0aH19LGEuUG9pbnRlck1hcD1ifSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYj1bImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwidmlldyIsImRldGFpbCIsInNjcmVlblgiLCJzY3JlZW5ZIiwiY2xpZW50WCIsImNsaWVudFkiLCJjdHJsS2V5IiwiYWx0S2V5Iiwic2hpZnRLZXkiLCJtZXRhS2V5IiwiYnV0dG9uIiwicmVsYXRlZFRhcmdldCIsImJ1dHRvbnMiLCJwb2ludGVySWQiLCJ3aWR0aCIsImhlaWdodCIsInByZXNzdXJlIiwidGlsdFgiLCJ0aWx0WSIsInBvaW50ZXJUeXBlIiwiaHdUaW1lc3RhbXAiLCJpc1ByaW1hcnkiLCJ0eXBlIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIndoaWNoIl0sYz1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMCwwLDAsMCwwLDAsIiIsMCwhMSwiIixudWxsLG51bGwsMF0sZD17dGFyZ2V0czpuZXcgV2Vha01hcCxoYW5kbGVkRXZlbnRzOm5ldyBXZWFrTWFwLHBvaW50ZXJtYXA6bmV3IGEuUG9pbnRlck1hcCxldmVudE1hcDp7fSxldmVudFNvdXJjZXM6e30sZXZlbnRTb3VyY2VMaXN0OltdLHJlZ2lzdGVyU291cmNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YixkPWMuZXZlbnRzO2QmJihkLmZvckVhY2goZnVuY3Rpb24oYSl7Y1thXSYmKHRoaXMuZXZlbnRNYXBbYV09Y1thXS5iaW5kKGMpKX0sdGhpcyksdGhpcy5ldmVudFNvdXJjZXNbYV09Yyx0aGlzLmV2ZW50U291cmNlTGlzdC5wdXNoKGMpKX0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5ldmVudFNvdXJjZUxpc3QubGVuZ3RoLGQ9MDtjPmQmJihiPXRoaXMuZXZlbnRTb3VyY2VMaXN0W2RdKTtkKyspYi5yZWdpc3Rlci5jYWxsKGIsYSl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5ldmVudFNvdXJjZUxpc3QubGVuZ3RoLGQ9MDtjPmQmJihiPXRoaXMuZXZlbnRTb3VyY2VMaXN0W2RdKTtkKyspYi51bnJlZ2lzdGVyLmNhbGwoYixhKX0sY29udGFpbnM6YS5leHRlcm5hbC5jb250YWluc3x8ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5jb250YWlucyhiKX0sZG93bjpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcmRvd24iLGEpfSxtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJwb2ludGVybW92ZSIsYSl9LHVwOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJwb2ludGVydXAiLGEpfSxlbnRlcjpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITEsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJlbnRlciIsYSl9LGxlYXZlOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMSx0aGlzLmZpcmVFdmVudCgicG9pbnRlcmxlYXZlIixhKX0sb3ZlcjpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITAsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJvdmVyIixhKX0sb3V0OmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcm91dCIsYSl9LGNhbmNlbDpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcmNhbmNlbCIsYSl9LGxlYXZlT3V0OmZ1bmN0aW9uKGEpe3RoaXMuY29udGFpbnMoYS50YXJnZXQsYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5sZWF2ZShhKSx0aGlzLm91dChhKX0sZW50ZXJPdmVyOmZ1bmN0aW9uKGEpe3RoaXMuY29udGFpbnMoYS50YXJnZXQsYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5lbnRlcihhKSx0aGlzLm92ZXIoYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGI9YS50eXBlLGM9dGhpcy5ldmVudE1hcCYmdGhpcy5ldmVudE1hcFtiXTtjJiZjKGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxsaXN0ZW46ZnVuY3Rpb24oYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5hZGRFdmVudChhLGIpfSx0aGlzKX0sdW5saXN0ZW46ZnVuY3Rpb24oYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5yZW1vdmVFdmVudChhLGIpfSx0aGlzKX0sYWRkRXZlbnQ6YS5leHRlcm5hbC5hZGRFdmVudHx8ZnVuY3Rpb24oYSxiKXthLmFkZEV2ZW50TGlzdGVuZXIoYix0aGlzLmJvdW5kSGFuZGxlcil9LHJlbW92ZUV2ZW50OmEuZXh0ZXJuYWwucmVtb3ZlRXZlbnR8fGZ1bmN0aW9uKGEsYil7YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxtYWtlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhcHR1cmVJbmZvJiYoYi5yZWxhdGVkVGFyZ2V0PW51bGwpO3ZhciBjPW5ldyBQb2ludGVyRXZlbnQoYSxiKTtyZXR1cm4gYi5wcmV2ZW50RGVmYXVsdCYmKGMucHJldmVudERlZmF1bHQ9Yi5wcmV2ZW50RGVmYXVsdCksdGhpcy50YXJnZXRzLnNldChjLHRoaXMudGFyZ2V0cy5nZXQoYil8fGIudGFyZ2V0KSxjfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1ha2VFdmVudChhLGIpO3JldHVybiB0aGlzLmRpc3BhdGNoRXZlbnQoYyl9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBkLGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKWQ9YltmXSxlW2RdPWFbZF18fGNbZl07cmV0dXJuIGEucHJldmVudERlZmF1bHQmJihlLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7YS5wcmV2ZW50RGVmYXVsdCgpfSksZX0sZ2V0VGFyZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNhcHR1cmVJbmZvJiZ0aGlzLmNhcHR1cmVJbmZvLmlkPT09YS5wb2ludGVySWQ/dGhpcy5jYXB0dXJlSW5mby50YXJnZXQ6dGhpcy50YXJnZXRzLmdldChhKX0sc2V0Q2FwdHVyZTpmdW5jdGlvbihhLGIpe3RoaXMuY2FwdHVyZUluZm8mJnRoaXMucmVsZWFzZUNhcHR1cmUodGhpcy5jYXB0dXJlSW5mby5pZCksdGhpcy5jYXB0dXJlSW5mbz17aWQ6YSx0YXJnZXQ6Yn07dmFyIGM9bmV3IFBvaW50ZXJFdmVudCgiZ290cG9pbnRlcmNhcHR1cmUiLHtidWJibGVzOiEwfSk7dGhpcy5pbXBsaWNpdFJlbGVhc2U9dGhpcy5yZWxlYXNlQ2FwdHVyZS5iaW5kKHRoaXMsYSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIix0aGlzLmltcGxpY2l0UmVsZWFzZSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmNhbmNlbCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLHRoaXMudGFyZ2V0cy5zZXQoYyxiKSx0aGlzLmFzeW5jRGlzcGF0Y2hFdmVudChjKX0scmVsZWFzZUNhcHR1cmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5jYXB0dXJlSW5mbyYmdGhpcy5jYXB0dXJlSW5mby5pZD09PWEpe3ZhciBiPW5ldyBQb2ludGVyRXZlbnQoImxvc3Rwb2ludGVyY2FwdHVyZSIse2J1YmJsZXM6ITB9KSxjPXRoaXMuY2FwdHVyZUluZm8udGFyZ2V0O3RoaXMuY2FwdHVyZUluZm89bnVsbCxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyY2FuY2VsIix0aGlzLmltcGxpY2l0UmVsZWFzZSksdGhpcy50YXJnZXRzLnNldChiLGMpLHRoaXMuYXN5bmNEaXNwYXRjaEV2ZW50KGIpfX0sZGlzcGF0Y2hFdmVudDphLmV4dGVybmFsLmRpc3BhdGNoRXZlbnR8fGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0VGFyZ2V0KGEpO3JldHVybiBiP2IuZGlzcGF0Y2hFdmVudChhKTp2b2lkIDB9LGFzeW5jRGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXtzZXRUaW1lb3V0KHRoaXMuZGlzcGF0Y2hFdmVudC5iaW5kKHRoaXMsYSksMCl9fTtkLmJvdW5kSGFuZGxlcj1kLmV2ZW50SGFuZGxlci5iaW5kKGQpLGEuZGlzcGF0Y2hlcj1kLGEucmVnaXN0ZXI9ZC5yZWdpc3Rlci5iaW5kKGQpLGEudW5yZWdpc3Rlcj1kLnVucmVnaXN0ZXIuYmluZChkKX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyxkKXt0aGlzLmFkZENhbGxiYWNrPWEuYmluZChkKSx0aGlzLnJlbW92ZUNhbGxiYWNrPWIuYmluZChkKSx0aGlzLmNoYW5nZWRDYWxsYmFjaz1jLmJpbmQoZCksZyYmKHRoaXMub2JzZXJ2ZXI9bmV3IGcodGhpcy5tdXRhdGlvbldhdGNoZXIuYmluZCh0aGlzKSkpfXZhciBjPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCksZD1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUubWFwKSxlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLnNsaWNlKSxmPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5maWx0ZXIpLGc9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGg9Ilt0b3VjaC1hY3Rpb25dIixpPXtzdWJ0cmVlOiEwLGNoaWxkTGlzdDohMCxhdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZU9sZFZhbHVlOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInRvdWNoLWFjdGlvbiJdfTtiLnByb3RvdHlwZT17d2F0Y2hTdWJ0cmVlOmZ1bmN0aW9uKGIpe2EudGFyZ2V0RmluZGluZy5jYW5UYXJnZXQoYikmJnRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShiLGkpfSxlbmFibGVPblN1YnRyZWU6ZnVuY3Rpb24oYSl7dGhpcy53YXRjaFN1YnRyZWUoYSksYT09PWRvY3VtZW50JiYiY29tcGxldGUiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZT90aGlzLmluc3RhbGxPbkxvYWQoKTp0aGlzLmluc3RhbGxOZXdTdWJ0cmVlKGEpfSxpbnN0YWxsTmV3U3VidHJlZTpmdW5jdGlvbihhKXtjKHRoaXMuZmluZEVsZW1lbnRzKGEpLHRoaXMuYWRkRWxlbWVudCx0aGlzKX0sZmluZEVsZW1lbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnF1ZXJ5U2VsZWN0b3JBbGw/YS5xdWVyeVNlbGVjdG9yQWxsKGgpOltdfSxyZW1vdmVFbGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQ2FsbGJhY2soYSl9LGFkZEVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5hZGRDYWxsYmFjayhhKX0sZWxlbWVudENoYW5nZWQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmNoYW5nZWRDYWxsYmFjayhhLGIpfSxjb25jYXRMaXN0czpmdW5jdGlvbihhLGIpe3JldHVybiBhLmNvbmNhdChlKGIpKX0saW5zdGFsbE9uTG9hZDpmdW5jdGlvbigpe2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLHRoaXMuaW5zdGFsbE5ld1N1YnRyZWUuYmluZCh0aGlzLGRvY3VtZW50KSl9LGlzRWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFfSxmbGF0dGVuTXV0YXRpb25UcmVlOmZ1bmN0aW9uKGEpe3ZhciBiPWQoYSx0aGlzLmZpbmRFbGVtZW50cyx0aGlzKTtyZXR1cm4gYi5wdXNoKGYoYSx0aGlzLmlzRWxlbWVudCkpLGIucmVkdWNlKHRoaXMuY29uY2F0TGlzdHMsW10pfSxtdXRhdGlvbldhdGNoZXI6ZnVuY3Rpb24oYSl7YS5mb3JFYWNoKHRoaXMubXV0YXRpb25IYW5kbGVyLHRoaXMpfSxtdXRhdGlvbkhhbmRsZXI6ZnVuY3Rpb24oYSl7aWYoImNoaWxkTGlzdCI9PT1hLnR5cGUpe3ZhciBiPXRoaXMuZmxhdHRlbk11dGF0aW9uVHJlZShhLmFkZGVkTm9kZXMpO2IuZm9yRWFjaCh0aGlzLmFkZEVsZW1lbnQsdGhpcyk7dmFyIGM9dGhpcy5mbGF0dGVuTXV0YXRpb25UcmVlKGEucmVtb3ZlZE5vZGVzKTtjLmZvckVhY2godGhpcy5yZW1vdmVFbGVtZW50LHRoaXMpfWVsc2UiYXR0cmlidXRlcyI9PT1hLnR5cGUmJnRoaXMuZWxlbWVudENoYW5nZWQoYS50YXJnZXQsYS5vbGRWYWx1ZSl9fSxnfHwoYi5wcm90b3R5cGUud2F0Y2hTdWJ0cmVlPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCJQb2ludGVyRXZlbnRzUG9seWZpbGw6IE11dGF0aW9uT2JzZXJ2ZXJzIG5vdCBmb3VuZCwgdG91Y2gtYWN0aW9uIHdpbGwgbm90IGJlIGR5bmFtaWNhbGx5IGRldGVjdGVkIil9KSxhLkluc3RhbGxlcj1ifSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1iLnBvaW50ZXJtYXAsZD0yNSxlPXtQT0lOVEVSX0lEOjEsUE9JTlRFUl9UWVBFOiJtb3VzZSIsZXZlbnRzOlsibW91c2Vkb3duIiwibW91c2Vtb3ZlIiwibW91c2V1cCIsIm1vdXNlb3ZlciIsIm1vdXNlb3V0Il0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sbGFzdFRvdWNoZXM6W10saXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmxhc3RUb3VjaGVzLGU9YS5jbGllbnRYLGY9YS5jbGllbnRZLGc9MCxoPWMubGVuZ3RoO2g+ZyYmKGI9Y1tnXSk7ZysrKXt2YXIgaT1NYXRoLmFicyhlLWIueCksaj1NYXRoLmFicyhmLWIueSk7aWYoZD49aSYmZD49ailyZXR1cm4hMH19LHByZXBhcmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYz1iLmNsb25lRXZlbnQoYSksZD1jLnByZXZlbnREZWZhdWx0O3JldHVybiBjLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7YS5wcmV2ZW50RGVmYXVsdCgpLGQoKX0sYy5wb2ludGVySWQ9dGhpcy5QT0lOVEVSX0lELGMuaXNQcmltYXJ5PSEwLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEUsY30sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuaGFzKHRoaXMuUE9JTlRFUl9JRCk7ZCYmdGhpcy5jYW5jZWwoYSk7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yy5zZXQodGhpcy5QT0lOVEVSX0lELGEpLGIuZG93bihlKX19LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9fSxtb3VzZXVwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuZ2V0KHRoaXMuUE9JTlRFUl9JRCk7aWYoZCYmZC5idXR0b249PT1hLmJ1dHRvbil7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi51cChlKSx0aGlzLmNsZWFudXBNb3VzZSgpfX19LG1vdXNlb3ZlcjpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmVudGVyT3ZlcihjKX19LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9fSxjYW5jZWw6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5jYW5jZWwoYyksdGhpcy5jbGVhbnVwTW91c2UoKX0sY2xlYW51cE1vdXNlOmZ1bmN0aW9uKCl7Y1siZGVsZXRlIl0odGhpcy5QT0lOVEVSX0lEKX19O2EubW91c2VFdmVudHM9ZX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGIsYz1hLmRpc3BhdGNoZXIsZD1hLmZpbmRUYXJnZXQsZT1hLnRhcmdldEZpbmRpbmcuYWxsU2hhZG93cy5iaW5kKGEudGFyZ2V0RmluZGluZyksZj1jLnBvaW50ZXJtYXAsZz1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUubWFwKSxoPTI1MDAsaT0yMDAsaj0idG91Y2gtYWN0aW9uIixrPSExLGw9e3Njcm9sbFR5cGU6bmV3IFdlYWtNYXAsZXZlbnRzOlsidG91Y2hzdGFydCIsInRvdWNobW92ZSIsInRvdWNoZW5kIiwidG91Y2hjYW5jZWwiXSxyZWdpc3RlcjpmdW5jdGlvbihhKXtrP2MubGlzdGVuKGEsdGhpcy5ldmVudHMpOmIuZW5hYmxlT25TdWJ0cmVlKGEpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2smJmMudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LGVsZW1lbnRBZGRlZDpmdW5jdGlvbihhKXt2YXIgYj1hLmdldEF0dHJpYnV0ZShqKSxkPXRoaXMudG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGUoYik7ZCYmKHRoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKSxjLmxpc3RlbihhLHRoaXMuZXZlbnRzKSxlKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxUeXBlLnNldChhLGQpLGMubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx0aGlzKSl9LGVsZW1lbnRSZW1vdmVkOmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZVsiZGVsZXRlIl0oYSksYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKSxlKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxUeXBlWyJkZWxldGUiXShhKSxjLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx0aGlzKX0sZWxlbWVudENoYW5nZWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZShqKSxkPXRoaXMudG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGUoYyksZj10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGIpO2QmJmY/KHRoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKSxlKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxUeXBlLnNldChhLGQpfSx0aGlzKSk6Zj90aGlzLmVsZW1lbnRSZW1vdmVkKGEpOmQmJnRoaXMuZWxlbWVudEFkZGVkKGEpfSxzY3JvbGxUeXBlczp7RU1JVFRFUjoibm9uZSIsWFNDUk9MTEVSOiJwYW4teCIsWVNDUk9MTEVSOiJwYW4teSIsU0NST0xMRVI6L14oPzpwYW4teCBwYW4teSl8KD86cGFuLXkgcGFuLXgpfGF1dG8kL30sdG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9YSxjPXRoaXMuc2Nyb2xsVHlwZXM7cmV0dXJuIm5vbmUiPT09Yj8ibm9uZSI6Yj09PWMuWFNDUk9MTEVSPyJYIjpiPT09Yy5ZU0NST0xMRVI/IlkiOmMuU0NST0xMRVIuZXhlYyhiKT8iWFkiOnZvaWQgMH0sUE9JTlRFUl9UWVBFOiJ0b3VjaCIsZmlyc3RUb3VjaDpudWxsLGlzUHJpbWFyeVRvdWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZpcnN0VG91Y2g9PT1hLmlkZW50aWZpZXJ9LHNldFByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXsoMD09PWYucG9pbnRlcnMoKXx8MT09PWYucG9pbnRlcnMoKSYmZi5oYXMoMSkpJiYodGhpcy5maXJzdFRvdWNoPWEuaWRlbnRpZmllcix0aGlzLmZpcnN0WFk9e1g6YS5jbGllbnRYLFk6YS5jbGllbnRZfSx0aGlzLnNjcm9sbGluZz0hMSx0aGlzLmNhbmNlbFJlc2V0Q2xpY2tDb3VudCgpKX0scmVtb3ZlUHJpbWFyeVBvaW50ZXI6ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJih0aGlzLmZpcnN0VG91Y2g9bnVsbCx0aGlzLmZpcnN0WFk9bnVsbCx0aGlzLnJlc2V0Q2xpY2tDb3VudCgpKX0sY2xpY2tDb3VudDowLHJlc2V0SWQ6bnVsbCxyZXNldENsaWNrQ291bnQ6ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbigpe3RoaXMuY2xpY2tDb3VudD0wLHRoaXMucmVzZXRJZD1udWxsfS5iaW5kKHRoaXMpO3RoaXMucmVzZXRJZD1zZXRUaW1lb3V0KGEsaSl9LGNhbmNlbFJlc2V0Q2xpY2tDb3VudDpmdW5jdGlvbigpe3RoaXMucmVzZXRJZCYmY2xlYXJUaW1lb3V0KHRoaXMucmVzZXRJZCl9LHRvdWNoVG9Qb2ludGVyOmZ1bmN0aW9uKGEpe3ZhciBiPWMuY2xvbmVFdmVudChhKTtyZXR1cm4gYi5wb2ludGVySWQ9YS5pZGVudGlmaWVyKzIsYi50YXJnZXQ9ZChiKSxiLmJ1YmJsZXM9ITAsYi5jYW5jZWxhYmxlPSEwLGIuZGV0YWlsPXRoaXMuY2xpY2tDb3VudCxiLmJ1dHRvbj0wLGIuYnV0dG9ucz0xLGIud2lkdGg9YS53ZWJraXRSYWRpdXNYfHxhLnJhZGl1c1h8fDAsYi5oZWlnaHQ9YS53ZWJraXRSYWRpdXNZfHxhLnJhZGl1c1l8fDAsYi5wcmVzc3VyZT1hLndlYmtpdEZvcmNlfHxhLmZvcmNlfHwuNSxiLmlzUHJpbWFyeT10aGlzLmlzUHJpbWFyeVRvdWNoKGEpLGIucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEUsYn0scHJvY2Vzc1RvdWNoZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNoYW5nZWRUb3VjaGVzLGQ9ZyhjLHRoaXMudG91Y2hUb1BvaW50ZXIsdGhpcyk7ZC5mb3JFYWNoKGZ1bmN0aW9uKGIpe2IucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbGluZz0hMSx0aGlzLmZpcnN0WFk9bnVsbCxhLnByZXZlbnREZWZhdWx0KCl9fSx0aGlzKSxkLmZvckVhY2goYix0aGlzKX0sc2hvdWxkU2Nyb2xsOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZmlyc3RYWSl7dmFyIGIsYz10aGlzLnNjcm9sbFR5cGUuZ2V0KGEuY3VycmVudFRhcmdldCk7aWYoIm5vbmUiPT09YyliPSExO2Vsc2UgaWYoIlhZIj09PWMpYj0hMDtlbHNle3ZhciBkPWEuY2hhbmdlZFRvdWNoZXNbMF0sZT1jLGY9IlkiPT09Yz8iWCI6IlkiLGc9TWF0aC5hYnMoZFsiY2xpZW50IitlXS10aGlzLmZpcnN0WFlbZV0pLGg9TWF0aC5hYnMoZFsiY2xpZW50IitmXS10aGlzLmZpcnN0WFlbZl0pO2I9Zz49aH1yZXR1cm4gdGhpcy5maXJzdFhZPW51bGwsYn19LGZpbmRUb3VjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKylpZihjLmlkZW50aWZpZXI9PT1iKXJldHVybiEwfSx2YWN1dW1Ub3VjaGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcztpZihmLnBvaW50ZXJzKCk+PWIubGVuZ3RoKXt2YXIgYz1bXTtmLmZvckVhY2goZnVuY3Rpb24oYSxkKXtpZigxIT09ZCYmIXRoaXMuZmluZFRvdWNoKGIsZC0yKSl7dmFyIGU9YS5vdXQ7Yy5wdXNoKHRoaXMudG91Y2hUb1BvaW50ZXIoZSkpfX0sdGhpcyksYy5mb3JFYWNoKHRoaXMuY2FuY2VsT3V0LHRoaXMpfX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnZhY3V1bVRvdWNoZXMoYSksdGhpcy5zZXRQcmltYXJ5VG91Y2goYS5jaGFuZ2VkVG91Y2hlc1swXSksdGhpcy5kZWR1cFN5bnRoTW91c2UoYSksdGhpcy5zY3JvbGxpbmd8fCh0aGlzLmNsaWNrQ291bnQrKyx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy5vdmVyRG93bikpfSxvdmVyRG93bjpmdW5jdGlvbihhKXtmLnNldChhLnBvaW50ZXJJZCx7dGFyZ2V0OmEudGFyZ2V0LG91dDphLG91dFRhcmdldDphLnRhcmdldH0pLGMub3ZlcihhKSxjLmRvd24oYSl9LHRvdWNobW92ZTpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbGluZ3x8KHRoaXMuc2hvdWxkU2Nyb2xsKGEpPyh0aGlzLnNjcm9sbGluZz0hMCx0aGlzLnRvdWNoY2FuY2VsKGEpKTooYS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLm1vdmVPdmVyT3V0KSkpfSxtb3ZlT3Zlck91dDpmdW5jdGlvbihhKXt2YXIgYj1hLGQ9Zi5nZXQoYi5wb2ludGVySWQpO2lmKGQpe3ZhciBlPWQub3V0LGc9ZC5vdXRUYXJnZXQ7Yy5tb3ZlKGIpLGUmJmchPT1iLnRhcmdldCYmKGUucmVsYXRlZFRhcmdldD1iLnRhcmdldCxiLnJlbGF0ZWRUYXJnZXQ9ZyxlLnRhcmdldD1nLGIudGFyZ2V0PyhjLmxlYXZlT3V0KGUpLGMuZW50ZXJPdmVyKGIpKTooYi50YXJnZXQ9ZyxiLnJlbGF0ZWRUYXJnZXQ9bnVsbCx0aGlzLmNhbmNlbE91dChiKSkpLGQub3V0PWIsZC5vdXRUYXJnZXQ9Yi50YXJnZXR9fSx0b3VjaGVuZDpmdW5jdGlvbihhKXt0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy51cE91dCl9LHVwT3V0OmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsaW5nfHwoYy51cChhKSxjLm91dChhKSksdGhpcy5jbGVhblVwUG9pbnRlcihhKX0sdG91Y2hjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMuY2FuY2VsT3V0KX0sY2FuY2VsT3V0OmZ1bmN0aW9uKGEpe2MuY2FuY2VsKGEpLGMub3V0KGEpLHRoaXMuY2xlYW5VcFBvaW50ZXIoYSl9LGNsZWFuVXBQb2ludGVyOmZ1bmN0aW9uKGEpe2ZbImRlbGV0ZSJdKGEucG9pbnRlcklkKSx0aGlzLnJlbW92ZVByaW1hcnlQb2ludGVyKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxkPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChkKSl7dmFyIGU9e3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZfTtjLnB1c2goZSk7dmFyIGY9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZSk7c2V0VGltZW91dChmLGgpfX19O2t8fChiPW5ldyBhLkluc3RhbGxlcihsLmVsZW1lbnRBZGRlZCxsLmVsZW1lbnRSZW1vdmVkLGwuZWxlbWVudENoYW5nZWQsbCkpLGEudG91Y2hFdmVudHM9bH0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyT3V0IiwiTVNQb2ludGVyT3ZlciIsIk1TUG9pbnRlckNhbmNlbCIsIk1TR290UG9pbnRlckNhcHR1cmUiLCJNU0xvc3RQb2ludGVyQ2FwdHVyZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LFBPSU5URVJfVFlQRVM6WyIiLCJ1bmF2YWlsYWJsZSIsInRvdWNoIiwicGVuIiwibW91c2UiXSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9YTtyZXR1cm4gZCYmKGM9Yi5jbG9uZUV2ZW50KGEpLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEVTW2EucG9pbnRlclR5cGVdKSxjfSxjbGVhbnVwOmZ1bmN0aW9uKGEpe2NbImRlbGV0ZSJdKGEpfSxNU1BvaW50ZXJEb3duOmZ1bmN0aW9uKGEpe2Muc2V0KGEucG9pbnRlcklkLGEpO3ZhciBkPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZG93bihkKX0sTVNQb2ludGVyTW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9LE1TUG9pbnRlclVwOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IudXAoYyksdGhpcy5jbGVhbnVwKGEucG9pbnRlcklkKX0sTVNQb2ludGVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9LE1TUG9pbnRlck92ZXI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5lbnRlck92ZXIoYyl9LE1TUG9pbnRlckNhbmNlbDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmNhbmNlbChjKSx0aGlzLmNsZWFudXAoYS5wb2ludGVySWQpfSxNU0xvc3RQb2ludGVyQ2FwdHVyZTpmdW5jdGlvbihhKXt2YXIgYz1iLm1ha2VFdmVudCgibG9zdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9LE1TR290UG9pbnRlckNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5tYWtlRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9fTthLm1zRXZlbnRzPWV9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcjtpZih2b2lkIDA9PT13aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKXtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93Lm5hdmlnYXRvciwicG9pbnRlckVuYWJsZWQiLHt2YWx1ZTohMCxlbnVtZXJhYmxlOiEwfSksd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKXt2YXIgYz13aW5kb3cubmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHM7T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5uYXZpZ2F0b3IsIm1heFRvdWNoUG9pbnRzIix7dmFsdWU6YyxlbnVtZXJhYmxlOiEwfSksYi5yZWdpc3RlclNvdXJjZSgibXMiLGEubXNFdmVudHMpfWVsc2UgYi5yZWdpc3RlclNvdXJjZSgibW91c2UiLGEubW91c2VFdmVudHMpLHZvaWQgMCE9PXdpbmRvdy5vbnRvdWNoc3RhcnQmJmIucmVnaXN0ZXJTb3VyY2UoInRvdWNoIixhLnRvdWNoRXZlbnRzKTtiLnJlZ2lzdGVyKGRvY3VtZW50KX19KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7aWYoIWUucG9pbnRlcm1hcC5oYXMoYSkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkUG9pbnRlcklkIil9dmFyIGMsZCxlPWEuZGlzcGF0Y2hlcixmPXdpbmRvdy5uYXZpZ2F0b3I7Zi5tc1BvaW50ZXJFbmFibGVkPyhjPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1NldFBvaW50ZXJDYXB0dXJlKGEpfSxkPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1JlbGVhc2VQb2ludGVyQ2FwdHVyZShhKX0pOihjPWZ1bmN0aW9uKGEpe2IoYSksZS5zZXRDYXB0dXJlKGEsdGhpcyl9LGQ9ZnVuY3Rpb24oYSl7YihhKSxlLnJlbGVhc2VDYXB0dXJlKGEsdGhpcyl9KSx3aW5kb3cuRWxlbWVudCYmIUVsZW1lbnQucHJvdG90eXBlLnNldFBvaW50ZXJDYXB0dXJlJiZPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFbGVtZW50LnByb3RvdHlwZSx7c2V0UG9pbnRlckNhcHR1cmU6e3ZhbHVlOmN9LHJlbGVhc2VQb2ludGVyQ2FwdHVyZTp7dmFsdWU6ZH19KX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksUG9pbnRlckdlc3R1cmVFdmVudC5wcm90b3R5cGUucHJldmVudFRhcD1mdW5jdGlvbigpe3RoaXMudGFwUHJldmVudGVkPSEwfSxmdW5jdGlvbihhKXthPWF8fHt9LGEudXRpbHM9e0xDQTp7ZmluZDpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBhO2lmKGEuY29udGFpbnMpe2lmKGEuY29udGFpbnMoYikpcmV0dXJuIGE7aWYoYi5jb250YWlucyhhKSlyZXR1cm4gYn12YXIgYz10aGlzLmRlcHRoKGEpLGQ9dGhpcy5kZXB0aChiKSxlPWMtZDtmb3IoZT4wP2E9dGhpcy53YWxrKGEsZSk6Yj10aGlzLndhbGsoYiwtZSk7YSYmYiYmYSE9PWI7KWE9dGhpcy53YWxrKGEsMSksYj10aGlzLndhbGsoYiwxKTtyZXR1cm4gYX0sd2FsazpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2I+YztjKyspYT1hLnBhcmVudE5vZGU7cmV0dXJuIGF9LGRlcHRoOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2E7KWIrKyxhPWEucGFyZW50Tm9kZTtyZXR1cm4gYn19fSxhLmZpbmRMQ0E9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS51dGlscy5MQ0EuZmluZChiLGMpCn0sd2luZG93LlBvaW50ZXJHZXN0dXJlcz1hfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoYyl7dmFyIGE9bmV3IE1hcDtyZXR1cm4gYS5wb2ludGVycz1kLGF9dGhpcy5rZXlzPVtdLHRoaXMudmFsdWVzPVtdfXZhciBjPXdpbmRvdy5NYXAmJndpbmRvdy5NYXAucHJvdG90eXBlLmZvckVhY2gsZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9O2IucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTtjPi0xP3RoaXMudmFsdWVzW2NdPWI6KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMua2V5cy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnZhbHVlc1tiXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmtleXMubGVuZ3RoPTAsdGhpcy52YWx1ZXMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLmtleXNbZF0sdGhpcyl9LHRoaXMpfSxwb2ludGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleXMubGVuZ3RofX0sYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPVsiYnViYmxlcyIsImNhbmNlbGFibGUiLCJ2aWV3IiwiZGV0YWlsIiwic2NyZWVuWCIsInNjcmVlblkiLCJjbGllbnRYIiwiY2xpZW50WSIsImN0cmxLZXkiLCJhbHRLZXkiLCJzaGlmdEtleSIsIm1ldGFLZXkiLCJidXR0b24iLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9ucyIsInBvaW50ZXJJZCIsIndpZHRoIiwiaGVpZ2h0IiwicHJlc3N1cmUiLCJ0aWx0WCIsInRpbHRZIiwicG9pbnRlclR5cGUiLCJod1RpbWVzdGFtcCIsImlzUHJpbWFyeSIsInR5cGUiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0Iiwic2NyZWVuWCIsInNjcmVlblkiLCJwYWdlWCIsInBhZ2VZIiwidGFwUHJldmVudGVkIl0sYz1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMCwwLDAsMCwwLDAsIiIsMCwhMSwiIixudWxsLG51bGwsMCwwLDAsMF0sZD17aGFuZGxlZEV2ZW50czpuZXcgV2Vha01hcCx0YXJnZXRzOm5ldyBXZWFrTWFwLGhhbmRsZXJzOnt9LHJlY29nbml6ZXJzOnt9LGV2ZW50czp7fSxyZWdpc3RlclJlY29nbml6ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iO3RoaXMucmVjb2duaXplcnNbYV09YyxjLmV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKGNbYV0pe3RoaXMuZXZlbnRzW2FdPSEwO3ZhciBiPWNbYV0uYmluZChjKTt0aGlzLmFkZEhhbmRsZXIoYSxiKX19LHRoaXMpfSxhZGRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTt0aGlzLmhhbmRsZXJzW2NdfHwodGhpcy5oYW5kbGVyc1tjXT1bXSksdGhpcy5oYW5kbGVyc1tjXS5wdXNoKGIpfSxyZWdpc3RlclRhcmdldDpmdW5jdGlvbihhKXt0aGlzLmxpc3RlbihPYmplY3Qua2V5cyh0aGlzLmV2ZW50cyksYSl9LHVucmVnaXN0ZXJUYXJnZXQ6ZnVuY3Rpb24oYSl7dGhpcy51bmxpc3RlbihPYmplY3Qua2V5cyh0aGlzLmV2ZW50cyksYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGI9YS50eXBlLGM9dGhpcy5oYW5kbGVyc1tiXTtjJiZ0aGlzLm1ha2VRdWV1ZShjLGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxtYWtlUXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNsb25lRXZlbnQoYik7c2V0VGltZW91dCh0aGlzLnJ1blF1ZXVlLmJpbmQodGhpcyxhLGMpLDApfSxydW5RdWV1ZTpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBvaW50ZXJJZD1iLnBvaW50ZXJJZDtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspYyhiKTt0aGlzLmN1cnJlbnRQb2ludGVySWQ9MH0sbGlzdGVuOmZ1bmN0aW9uKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuYWRkRXZlbnQoYSx0aGlzLmJvdW5kSGFuZGxlciwhMSxiKX0sdGhpcyl9LHVubGlzdGVuOmZ1bmN0aW9uKGEpe2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUV2ZW50KGEsdGhpcy5ib3VuZEhhbmRsZXIsITEsaW5UYXJnZXQpfSx0aGlzKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRFdmVudExpc3RlbmVyKGEsYixjKX0scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYixjKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBQb2ludGVyR2VzdHVyZUV2ZW50KGEsYil9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBkLGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKWQ9YltmXSxlW2RdPWFbZF18fGNbZl07cmV0dXJuIGV9LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHx0aGlzLnRhcmdldHMuZ2V0KGEpO2MmJihjLmRpc3BhdGNoRXZlbnQoYSksYS50YXBQcmV2ZW50ZWQmJnRoaXMucHJldmVudFRhcCh0aGlzLmN1cnJlbnRQb2ludGVySWQpKX0sYXN5bmNEaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoYSxiKX0uYmluZCh0aGlzKTtzZXRUaW1lb3V0KGMsMCl9LHByZXZlbnRUYXA6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yZWNvZ25pemVycy50YXA7YiYmYi5wcmV2ZW50VGFwKGEpfX07ZC5ib3VuZEhhbmRsZXI9ZC5ldmVudEhhbmRsZXIuYmluZChkKSxhLmRpc3BhdGNoZXI9ZDt2YXIgZT1bXSxmPSExO2EucmVnaXN0ZXI9ZnVuY3Rpb24oYil7aWYoZil7dmFyIGM9d2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbDtjJiZjLnJlZ2lzdGVyKGIpLGEuZGlzcGF0Y2hlci5yZWdpc3RlclRhcmdldChiKX1lbHNlIGUucHVzaChiKX0sZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtmPSEwLGUucHVzaChkb2N1bWVudCksZS5mb3JFYWNoKGEucmVnaXN0ZXIpfSl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPXtIT0xEX0RFTEFZOjIwMCxXSUdHTEVfVEhSRVNIT0xEOjE2LGV2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0saGVsZFBvaW50ZXI6bnVsbCxob2xkSm9iOm51bGwscHVsc2U6ZnVuY3Rpb24oKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMuaGVsZFBvaW50ZXIudGltZVN0YW1wLGI9dGhpcy5oZWxkPyJob2xkcHVsc2UiOiJob2xkIjt0aGlzLmZpcmVIb2xkKGIsYSksdGhpcy5oZWxkPSEwfSxjYW5jZWw6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuaG9sZEpvYiksdGhpcy5oZWxkJiZ0aGlzLmZpcmVIb2xkKCJyZWxlYXNlIiksdGhpcy5oZWxkPSExLHRoaXMuaGVsZFBvaW50ZXI9bnVsbCx0aGlzLnRhcmdldD1udWxsLHRoaXMuaG9sZEpvYj1udWxsfSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIXRoaXMuaGVsZFBvaW50ZXImJih0aGlzLmhlbGRQb2ludGVyPWEsdGhpcy50YXJnZXQ9YS50YXJnZXQsdGhpcy5ob2xkSm9iPXNldEludGVydmFsKHRoaXMucHVsc2UuYmluZCh0aGlzKSx0aGlzLkhPTERfREVMQVkpKX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe3RoaXMuaGVsZFBvaW50ZXImJnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkPT09YS5wb2ludGVySWQmJnRoaXMuY2FuY2VsKCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbCgpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkKXt2YXIgYj1hLmNsaWVudFgtdGhpcy5oZWxkUG9pbnRlci5jbGllbnRYLGM9YS5jbGllbnRZLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WTtiKmIrYypjPnRoaXMuV0lHR0xFX1RIUkVTSE9MRCYmdGhpcy5jYW5jZWwoKX19LGZpcmVIb2xkOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9e3BvaW50ZXJUeXBlOnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlclR5cGV9O2MmJihkLmhvbGRUaW1lPWMpO3ZhciBlPWIubWFrZUV2ZW50KGEsZCk7Yi5kaXNwYXRjaEV2ZW50KGUsdGhpcy50YXJnZXQpLGUudGFwUHJldmVudGVkJiZiLnByZXZlbnRUYXAodGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoImhvbGQiLGMpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1uZXcgYS5Qb2ludGVyTWFwLGQ9e2V2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0sV0lHR0xFX1RIUkVTSE9MRDo0LGNsYW1wRGlyOmZ1bmN0aW9uKGEpe3JldHVybiBhPjA/MTotMX0sY2FsY1Bvc2l0aW9uRGVsdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYz0wLGQ9MDtyZXR1cm4gYSYmYiYmKGM9Yi5wYWdlWC1hLnBhZ2VYLGQ9Yi5wYWdlWS1hLnBhZ2VZKSx7eDpjLHk6ZH19LGZpcmVUcmFjazpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCxmPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoZS5kb3duRXZlbnQsYyksZz10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUubGFzdE1vdmVFdmVudCxjKTtnLngmJihlLnhEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLngpKSxnLnkmJihlLnlEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLnkpKTt2YXIgaD17ZHg6Zi54LGR5OmYueSxkZHg6Zy54LGRkeTpnLnksY2xpZW50WDpjLmNsaWVudFgsY2xpZW50WTpjLmNsaWVudFkscGFnZVg6Yy5wYWdlWCxwYWdlWTpjLnBhZ2VZLHNjcmVlblg6Yy5zY3JlZW5YLHNjcmVlblk6Yy5zY3JlZW5ZLHhEaXJlY3Rpb246ZS54RGlyZWN0aW9uLHlEaXJlY3Rpb246ZS55RGlyZWN0aW9uLHRyYWNrSW5mbzplLnRyYWNrSW5mbyxyZWxhdGVkVGFyZ2V0OmMudGFyZ2V0LHBvaW50ZXJUeXBlOmMucG9pbnRlclR5cGV9LGk9Yi5tYWtlRXZlbnQoYSxoKTtlLmxhc3RNb3ZlRXZlbnQ9YyxiLmRpc3BhdGNoRXZlbnQoaSxlLmRvd25UYXJnZXQpfSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSYmKCJtb3VzZSI9PT1hLnBvaW50ZXJUeXBlPzE9PT1hLmJ1dHRvbnM6ITApKXt2YXIgYj17ZG93bkV2ZW50OmEsZG93blRhcmdldDphLnRhcmdldCx0cmFja0luZm86e30sbGFzdE1vdmVFdmVudDpudWxsLHhEaXJlY3Rpb246MCx5RGlyZWN0aW9uOjAsdHJhY2tpbmc6ITF9O2Muc2V0KGEucG9pbnRlcklkLGIpfX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2lmKGIpaWYoYi50cmFja2luZyl0aGlzLmZpcmVUcmFjaygidHJhY2siLGEsYik7ZWxzZXt2YXIgZD10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGIuZG93bkV2ZW50LGEpLGU9ZC54KmQueCtkLnkqZC55O2U+dGhpcy5XSUdHTEVfVEhSRVNIT0xEJiYoYi50cmFja2luZz0hMCx0aGlzLmZpcmVUcmFjaygidHJhY2tzdGFydCIsYi5kb3duRXZlbnQsYiksdGhpcy5maXJlVHJhY2soInRyYWNrIixhLGIpKX19LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXt2YXIgYj1jLmdldChhLnBvaW50ZXJJZCk7YiYmKGIudHJhY2tpbmcmJnRoaXMuZmlyZVRyYWNrKCJ0cmFja2VuZCIsYSxiKSxjLmRlbGV0ZShhLnBvaW50ZXJJZCkpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKGEpe3RoaXMucG9pbnRlcnVwKGEpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoInRyYWNrIixkKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9e01JTl9WRUxPQ0lUWTouNSxNQVhfUVVFVUU6NCxtb3ZlUXVldWU6W10sdGFyZ2V0Om51bGwscG9pbnRlcklkOm51bGwsZXZlbnRzOlsicG9pbnRlcmRvd24iLCJwb2ludGVybW92ZSIsInBvaW50ZXJ1cCIsInBvaW50ZXJjYW5jZWwiXSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIXRoaXMucG9pbnRlcklkJiYodGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWQsdGhpcy50YXJnZXQ9YS50YXJnZXQsdGhpcy5hZGRNb3ZlKGEpKX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7YS5wb2ludGVySWQ9PT10aGlzLnBvaW50ZXJJZCYmdGhpcy5hZGRNb3ZlKGEpfSxwb2ludGVydXA6ZnVuY3Rpb24oYSl7YS5wb2ludGVySWQ9PT10aGlzLnBvaW50ZXJJZCYmdGhpcy5maXJlRmxpY2soYSksdGhpcy5jbGVhbnVwKCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNsZWFudXAoKX0sY2xlYW51cDpmdW5jdGlvbigpe3RoaXMubW92ZVF1ZXVlPVtdLHRoaXMudGFyZ2V0PW51bGwsdGhpcy5wb2ludGVySWQ9bnVsbH0sYWRkTW92ZTpmdW5jdGlvbihhKXt0aGlzLm1vdmVRdWV1ZS5sZW5ndGg+PXRoaXMuTUFYX1FVRVVFJiZ0aGlzLm1vdmVRdWV1ZS5zaGlmdCgpLHRoaXMubW92ZVF1ZXVlLnB1c2goYSl9LGZpcmVGbGljazpmdW5jdGlvbihhKXtmb3IodmFyIGMsZCxlLGYsZyxoLGksaj1hLGs9dGhpcy5tb3ZlUXVldWUubGVuZ3RoLGw9MCxtPTAsbj0wLG89MDtrPm8mJihpPXRoaXMubW92ZVF1ZXVlW29dKTtvKyspYz1qLnRpbWVTdGFtcC1pLnRpbWVTdGFtcCxkPWouY2xpZW50WC1pLmNsaWVudFgsZT1qLmNsaWVudFktaS5jbGllbnRZLGY9ZC9jLGc9ZS9jLGg9TWF0aC5zcXJ0KGYqZitnKmcpLGg+biYmKGw9ZixtPWcsbj1oKTt2YXIgcD1NYXRoLmFicyhsKT5NYXRoLmFicyhtKT8ieCI6InkiLHE9dGhpcy5jYWxjQW5nbGUobCxtKTtpZihNYXRoLmFicyhuKT49dGhpcy5NSU5fVkVMT0NJVFkpe3ZhciByPWIubWFrZUV2ZW50KCJmbGljayIse3hWZWxvY2l0eTpsLHlWZWxvY2l0eTptLHZlbG9jaXR5Om4sYW5nbGU6cSxtYWpvckF4aXM6cCxwb2ludGVyVHlwZTphLnBvaW50ZXJUeXBlfSk7Yi5kaXNwYXRjaEV2ZW50KHIsdGhpcy50YXJnZXQpfX0sY2FsY0FuZ2xlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDE4MCpNYXRoLmF0YW4yKGIsYSkvTWF0aC5QSX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJmbGljayIsYyl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPW5ldyBhLlBvaW50ZXJNYXAsZD0xODAvTWF0aC5QSSxlPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLHJlZmVyZW5jZTp7fSxwb2ludGVyZG93bjpmdW5jdGlvbihiKXtpZihjLnNldChiLnBvaW50ZXJJZCxiKSwyPT1jLnBvaW50ZXJzKCkpe3ZhciBkPXRoaXMuY2FsY0Nob3JkKCksZT10aGlzLmNhbGNBbmdsZShkKTt0aGlzLnJlZmVyZW5jZT17YW5nbGU6ZSxkaWFtZXRlcjpkLmRpYW1ldGVyLHRhcmdldDphLmZpbmRMQ0EoZC5hLnRhcmdldCxkLmIudGFyZ2V0KX19fSxwb2ludGVydXA6ZnVuY3Rpb24oYSl7Yy5kZWxldGUoYS5wb2ludGVySWQpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtjLmhhcyhhLnBvaW50ZXJJZCkmJihjLnNldChhLnBvaW50ZXJJZCxhKSxjLnBvaW50ZXJzKCk+MSYmdGhpcy5jYWxjUGluY2hSb3RhdGUoKSl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludGVydXAoYSl9LGRpc3BhdGNoUGluY2g6ZnVuY3Rpb24oYSxjKXt2YXIgZD1hL3RoaXMucmVmZXJlbmNlLmRpYW1ldGVyLGU9Yi5tYWtlRXZlbnQoInBpbmNoIix7c2NhbGU6ZCxjZW50ZXJYOmMuY2VudGVyLngsY2VudGVyWTpjLmNlbnRlci55fSk7Yi5kaXNwYXRjaEV2ZW50KGUsdGhpcy5yZWZlcmVuY2UudGFyZ2V0KX0sZGlzcGF0Y2hSb3RhdGU6ZnVuY3Rpb24oYSxjKXt2YXIgZD1NYXRoLnJvdW5kKChhLXRoaXMucmVmZXJlbmNlLmFuZ2xlKSUzNjApLGU9Yi5tYWtlRXZlbnQoInJvdGF0ZSIse2FuZ2xlOmQsY2VudGVyWDpjLmNlbnRlci54LGNlbnRlclk6Yy5jZW50ZXIueX0pO2IuZGlzcGF0Y2hFdmVudChlLHRoaXMucmVmZXJlbmNlLnRhcmdldCl9LGNhbGNQaW5jaFJvdGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2FsY0Nob3JkKCksYj1hLmRpYW1ldGVyLGM9dGhpcy5jYWxjQW5nbGUoYSk7YiE9dGhpcy5yZWZlcmVuY2UuZGlhbWV0ZXImJnRoaXMuZGlzcGF0Y2hQaW5jaChiLGEpLGMhPXRoaXMucmVmZXJlbmNlLmFuZ2xlJiZ0aGlzLmRpc3BhdGNoUm90YXRlKGMsYSl9LGNhbGNDaG9yZDpmdW5jdGlvbigpe3ZhciBhPVtdO2MuZm9yRWFjaChmdW5jdGlvbihiKXthLnB1c2goYil9KTtmb3IodmFyIGIsZCxlLGY9MCxnPXt9LGg9MDtoPGEubGVuZ3RoO2grKylmb3IodmFyIGk9YVtoXSxqPWgrMTtqPGEubGVuZ3RoO2orKyl7dmFyIGs9YVtqXTtiPU1hdGguYWJzKGkuY2xpZW50WC1rLmNsaWVudFgpLGQ9TWF0aC5hYnMoaS5jbGllbnRZLWsuY2xpZW50WSksZT1iK2QsZT5mJiYoZj1lLGc9e2E6aSxiOmt9KX1yZXR1cm4gYj1NYXRoLmFicyhnLmEuY2xpZW50WCtnLmIuY2xpZW50WCkvMixkPU1hdGguYWJzKGcuYS5jbGllbnRZK2cuYi5jbGllbnRZKS8yLGcuY2VudGVyPXt4OmIseTpkfSxnLmRpYW1ldGVyPWYsZ30sY2FsY0FuZ2xlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuYS5jbGllbnRYLWEuYi5jbGllbnRYLGM9YS5hLmNsaWVudFktYS5iLmNsaWVudFk7cmV0dXJuKDM2MCtNYXRoLmF0YW4yKGMsYikqZCklMzYwfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoInBpbmNoIixlKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9bmV3IGEuUG9pbnRlck1hcCxkPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCIsImtleXVwIl0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiFhLnRhcFByZXZlbnRlZCYmYy5zZXQoYS5wb2ludGVySWQse3RhcmdldDphLnRhcmdldCx4OmEuY2xpZW50WCx5OmEuY2xpZW50WX0pfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2ImJmEudGFwUHJldmVudGVkJiZjLmRlbGV0ZShhLnBvaW50ZXJJZCl9fSxwb2ludGVydXA6ZnVuY3Rpb24oZCl7dmFyIGU9Yy5nZXQoZC5wb2ludGVySWQpO2lmKGUmJiFkLnRhcFByZXZlbnRlZCl7dmFyIGY9YS5maW5kTENBKGUudGFyZ2V0LGQudGFyZ2V0KTtpZihmKXt2YXIgZz1iLm1ha2VFdmVudCgidGFwIix7eDpkLmNsaWVudFgseTpkLmNsaWVudFksZGV0YWlsOmQuZGV0YWlsLHBvaW50ZXJUeXBlOmQucG9pbnRlclR5cGV9KTtiLmRpc3BhdGNoRXZlbnQoZyxmKX19Yy5kZWxldGUoZC5wb2ludGVySWQpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEucG9pbnRlcklkKX0sa2V5dXA6ZnVuY3Rpb24oYSl7dmFyIGM9YS5rZXlDb2RlO2lmKDMyPT09Yyl7dmFyIGQ9YS50YXJnZXQ7ZCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnR8fGQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50fHxiLmRpc3BhdGNoRXZlbnQoYi5tYWtlRXZlbnQoInRhcCIse3g6MCx5OjAsZGV0YWlsOjAscG9pbnRlclR5cGU6InVuYXZhaWxhYmxlIn0pLGQpfX0scHJldmVudFRhcDpmdW5jdGlvbihhKXtjLmRlbGV0ZShhKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJ0YXAiLGQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBhKGEpe2Zvcig7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYS5nZXRFbGVtZW50QnlJZD9hOm51bGx9ZnVuY3Rpb24gYihhLGIpe3ZhciBjPWEuYmluZGluZ3M7aWYoIWMpcmV0dXJuIHZvaWQoYS5iaW5kaW5ncz17fSk7dmFyIGQ9Y1tiXTtkJiYoZC5jbG9zZSgpLGNbYl09dm9pZCAwKX1mdW5jdGlvbiBjKGEpe3JldHVybiBudWxsPT1hPyIiOmF9ZnVuY3Rpb24gZChhLGIpe2EuZGF0YT1jKGIpfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBkKGEsYil9fWZ1bmN0aW9uIGYoYSxiLGQsZSl7cmV0dXJuIGQ/dm9pZChlP2Euc2V0QXR0cmlidXRlKGIsIiIpOmEucmVtb3ZlQXR0cmlidXRlKGIpKTp2b2lkIGEuc2V0QXR0cmlidXRlKGIsYyhlKSl9ZnVuY3Rpb24gZyhhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe2YoYSxiLGMsZCl9fWZ1bmN0aW9uIGgoYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIHM7Y2FzZSJyYWRpbyI6Y2FzZSJzZWxlY3QtbXVsdGlwbGUiOmNhc2Uic2VsZWN0LW9uZSI6cmV0dXJuImNoYW5nZSI7ZGVmYXVsdDpyZXR1cm4iaW5wdXQifX1mdW5jdGlvbiBpKGEsYixkLGUpe2FbYl09KGV8fGMpKGQpfWZ1bmN0aW9uIGooYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtyZXR1cm4gaShhLGIsZCxjKX19ZnVuY3Rpb24gaygpe31mdW5jdGlvbiBsKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtjLnNldFZhbHVlKGFbYl0pLGMuZGlzY2FyZENoYW5nZXMoKSwoZHx8aykoYSksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX12YXIgZj1oKGEpO2EuYWRkRXZlbnRMaXN0ZW5lcihmLGUpO3ZhciBnPWMuY2xvc2U7Yy5jbG9zZT1mdW5jdGlvbigpe2cmJihhLnJlbW92ZUV2ZW50TGlzdGVuZXIoZixlKSxjLmNsb3NlPWcsYy5jbG9zZSgpLGc9dm9pZCAwKX19ZnVuY3Rpb24gbShhKXtyZXR1cm4gQm9vbGVhbihhKX1mdW5jdGlvbiBuKGIpe2lmKGIuZm9ybSlyZXR1cm4gcihiLmZvcm0uZWxlbWVudHMsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiJJTlBVVCI9PWEudGFnTmFtZSYmInJhZGlvIj09YS50eXBlJiZhLm5hbWU9PWIubmFtZX0pO3ZhciBjPWEoYik7aWYoIWMpcmV0dXJuW107dmFyIGQ9Yy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJyYWRpbyJdW25hbWU9IicrYi5uYW1lKyciXScpO3JldHVybiByKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiFhLmZvcm19KX1mdW5jdGlvbiBvKGEpeyJJTlBVVCI9PT1hLnRhZ05hbWUmJiJyYWRpbyI9PT1hLnR5cGUmJm4oYSkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLmJpbmRpbmdzLmNoZWNrZWQ7YiYmYi5zZXRWYWx1ZSghMSl9KX1mdW5jdGlvbiBwKGEsYil7dmFyIGQsZSxmLGc9YS5wYXJlbnROb2RlO2cgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCYmZy5iaW5kaW5ncyYmZy5iaW5kaW5ncy52YWx1ZSYmKGQ9ZyxlPWQuYmluZGluZ3MudmFsdWUsZj1kLnZhbHVlKSxhLnZhbHVlPWMoYiksZCYmZC52YWx1ZSE9ZiYmKGUuc2V0VmFsdWUoZC52YWx1ZSksZS5kaXNjYXJkQ2hhbmdlcygpLFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCkpfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3AoYSxiKX19dmFyIHI9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZpbHRlcik7ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pLE5vZGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLmVycm9yKCJVbmhhbmRsZWQgYmluZGluZyB0byBOb2RlOiAiLHRoaXMsYSxiKX0sTm9kZS5wcm90b3R5cGUudW5iaW5kPWZ1bmN0aW9uKGEpe2IodGhpcyxhKX0sTm9kZS5wcm90b3R5cGUudW5iaW5kQWxsPWZ1bmN0aW9uKCl7aWYodGhpcy5iaW5kaW5ncyl7Zm9yKHZhciBhPU9iamVjdC5rZXlzKHRoaXMuYmluZGluZ3MpLGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9dGhpcy5iaW5kaW5nc1thW2JdXTtjJiZjLmNsb3NlKCl9dGhpcy5iaW5kaW5ncz17fX19LFRleHQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxjLGYpe3JldHVybiJ0ZXh0Q29udGVudCIhPT1hP05vZGUucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxmKTpmP2QodGhpcyxjKTooYih0aGlzLCJ0ZXh0Q29udGVudCIpLGQodGhpcyxjLm9wZW4oZSh0aGlzKSkpLHRoaXMuYmluZGluZ3MudGV4dENvbnRlbnQ9Yyl9LEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPSI/Ij09YVthLmxlbmd0aC0xXTtyZXR1cm4gZSYmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLGE9YS5zbGljZSgwLC0xKSksZD9mKHRoaXMsYSxlLGMpOihiKHRoaXMsYSksZih0aGlzLGEsZSxjLm9wZW4oZyh0aGlzLGEsZSkpKSx0aGlzLmJpbmRpbmdzW2FdPWMpfTt2YXIgczshZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiPWEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSk7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJjaGVja2JveCIpO3ZhciBjLGQ9MDtiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjbGljayJ9KSxiLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24oKXtkKyssYz1jfHwiY2hhbmdlIn0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7ZS5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCEwLHdpbmRvdywwLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsKSxiLmRpc3BhdGNoRXZlbnQoZSkscz0xPT1kPyJjaGFuZ2UiOmN9KCksSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGQsZSl7aWYoInZhbHVlIiE9PWEmJiJjaGVja2VkIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGQsZSk7dGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSk7dmFyIGY9ImNoZWNrZWQiPT1hP206YyxnPSJjaGVja2VkIj09YT9vOms7cmV0dXJuIGU/aSh0aGlzLGEsZCxmKTooYih0aGlzLGEpLGwodGhpcyxhLGQsZyksaSh0aGlzLGEsZC5vcGVuKGoodGhpcyxhLGYpKSxmKSx0aGlzLmJpbmRpbmdzW2FdPWQpfSxIVE1MVGV4dEFyZWFFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4idmFsdWUiIT09YT9IVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxkLGUpOih0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKSxlP2kodGhpcywidmFsdWUiLGQpOihiKHRoaXMsInZhbHVlIiksbCh0aGlzLCJ2YWx1ZSIsZCksaSh0aGlzLCJ2YWx1ZSIsZC5vcGVuKGoodGhpcywidmFsdWUiLGMpKSksdGhpcy5iaW5kaW5ncy52YWx1ZT1kKSl9LEhUTUxPcHRpb25FbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4idmFsdWUiIT09YT9IVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxjLGQpOih0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKSxkP3AodGhpcyxjKTooYih0aGlzLCJ2YWx1ZSIpLGwodGhpcywidmFsdWUiLGMpLHAodGhpcyxjLm9wZW4ocSh0aGlzKSkpLHRoaXMuYmluZGluZ3MudmFsdWU9YykpfSxIVE1MU2VsZWN0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZCl7cmV0dXJuInNlbGVjdGVkaW5kZXgiPT09YSYmKGE9InNlbGVjdGVkSW5kZXgiKSwic2VsZWN0ZWRJbmRleCIhPT1hJiYidmFsdWUiIT09YT9IVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxjLGQpOih0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSxkP2kodGhpcyxhLGMpOihiKHRoaXMsYSksbCh0aGlzLGEsYyksaSh0aGlzLGEsYy5vcGVuKGoodGhpcyxhKSkpLHRoaXMuYmluZGluZ3NbYV09YykpfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBkKGEsYil7aWYoYil7Zm9yKHZhciBkLGU9IiMiK2I7IWQmJihhPWMoYSksYS5wcm90b0NvbnRlbnRfP2Q9YS5wcm90b0NvbnRlbnRfLnF1ZXJ5U2VsZWN0b3IoZSk6YS5nZXRFbGVtZW50QnlJZCYmKGQ9YS5nZXRFbGVtZW50QnlJZChiKSksIWQmJmEudGVtcGxhdGVDcmVhdG9yXyk7KWE9YS50ZW1wbGF0ZUNyZWF0b3JfO3JldHVybiBkfX1mdW5jdGlvbiBlKGEpe3JldHVybiJ0ZW1wbGF0ZSI9PWEudGFnTmFtZSYmImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZihhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gQm9vbGVhbihKW2EudGFnTmFtZV0mJmEuaGFzQXR0cmlidXRlKCJ0ZW1wbGF0ZSIpKX1mdW5jdGlvbiBoKGEpe3JldHVybiB2b2lkIDA9PT1hLmlzVGVtcGxhdGVfJiYoYS5pc1RlbXBsYXRlXz0iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGcoYSkpLGEuaXNUZW1wbGF0ZV99ZnVuY3Rpb24gaShhLGIpe3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbChMKTtoKGEpJiZiKGEpLEUoYyxiKX1mdW5jdGlvbiBqKGEpe2Z1bmN0aW9uIGIoYSl7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhKXx8aihhLmNvbnRlbnQpfWkoYSxiKX1mdW5jdGlvbiBrKGEsYil7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKSl9KX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudDtpZighYi5kZWZhdWx0VmlldylyZXR1cm4gYjt2YXIgYz1iLnRlbXBsYXRlQ29udGVudHNPd25lcl87aWYoIWMpe2ZvcihjPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtjLmxhc3RDaGlsZDspYy5yZW1vdmVDaGlsZChjLmxhc3RDaGlsZCk7Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfPWN9cmV0dXJuIGN9ZnVuY3Rpb24gbShhKXtpZighYS5zdGFnaW5nRG9jdW1lbnRfKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7Yi5zdGFnaW5nRG9jdW1lbnRffHwoYi5zdGFnaW5nRG9jdW1lbnRfPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSxiLnN0YWdpbmdEb2N1bWVudF8uc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF8pLGEuc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF99cmV0dXJuIGEuc3RhZ2luZ0RvY3VtZW50X31mdW5jdGlvbiBuKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO0lbZS5uYW1lXSYmKCJ0ZW1wbGF0ZSIhPT1lLm5hbWUmJmIuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpKX1yZXR1cm4gYn1mdW5jdGlvbiBvKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO2Iuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpfXJldHVybiBhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksYn1mdW5jdGlvbiBwKGEsYixjKXt2YXIgZD1hLmNvbnRlbnQ7aWYoYylyZXR1cm4gdm9pZCBkLmFwcGVuZENoaWxkKGIpO2Zvcih2YXIgZTtlPWIuZmlyc3RDaGlsZDspZC5hcHBlbmRDaGlsZChlKX1mdW5jdGlvbiBxKGEpe00/YS5fX3Byb3RvX189SFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU6ayhhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKX1mdW5jdGlvbiByKGEpe2Euc2V0TW9kZWxGbl98fChhLnNldE1vZGVsRm5fPWZ1bmN0aW9uKCl7YS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMTt2YXIgYj16KGEsYS5kZWxlZ2F0ZV8mJmEuZGVsZWdhdGVfLnByZXBhcmVCaW5kaW5nKTt3KGEsYixhLm1vZGVsXyl9KSxhLnNldE1vZGVsRm5TY2hlZHVsZWRffHwoYS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMCxPYnNlcnZlci5ydW5FT01fKGEuc2V0TW9kZWxGbl8pKX1mdW5jdGlvbiBzKGEsYixjLGQpe2lmKGEmJmEubGVuZ3RoKXtmb3IodmFyIGUsZj1hLmxlbmd0aCxnPTAsaD0wLGk9MCxqPSEwO2Y+aDspe3ZhciBnPWEuaW5kZXhPZigie3siLGgpLGs9YS5pbmRleE9mKCJbWyIsaCksbD0hMSxtPSJ9fSI7aWYoaz49MCYmKDA+Z3x8Zz5rKSYmKGc9ayxsPSEwLG09Il1dIiksaT0wPmc/LTE6YS5pbmRleE9mKG0sZysyKSwwPmkpe2lmKCFlKXJldHVybjtlLnB1c2goYS5zbGljZShoKSk7YnJlYWt9ZT1lfHxbXSxlLnB1c2goYS5zbGljZShoLGcpKTt2YXIgbj1hLnNsaWNlKGcrMixpKS50cmltKCk7ZS5wdXNoKGwpLGo9aiYmbCxlLnB1c2goUGF0aC5nZXQobikpO3ZhciBvPWQmJmQobixiLGMpO2UucHVzaChvKSxoPWkrMn1yZXR1cm4gaD09PWYmJmUucHVzaCgiIiksZS5oYXNPbmVQYXRoPTU9PT1lLmxlbmd0aCxlLmlzU2ltcGxlUGF0aD1lLmhhc09uZVBhdGgmJiIiPT1lWzBdJiYiIj09ZVs0XSxlLm9ubHlPbmVUaW1lPWosZS5jb21iaW5hdG9yPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1lWzBdLGM9MTtjPGUubGVuZ3RoO2MrPTQpe3ZhciBkPWUuaGFzT25lUGF0aD9hOmFbKGMtMSkvNF07dm9pZCAwIT09ZCYmKGIrPWQpLGIrPWVbYyszXX1yZXR1cm4gYn0sZX19ZnVuY3Rpb24gdChhLGIsYyxkKXtpZihiLmhhc09uZVBhdGgpe3ZhciBlPWJbM10sZj1lP2UoZCxjLCEwKTpiWzJdLmdldFZhbHVlRnJvbShkKTtyZXR1cm4gYi5pc1NpbXBsZVBhdGg/ZjpiLmNvbWJpbmF0b3IoZil9Zm9yKHZhciBnPVtdLGg9MTtoPGIubGVuZ3RoO2grPTQpe3ZhciBlPWJbaCsyXTtnWyhoLTEpLzRdPWU/ZShkLGMpOmJbaCsxXS5nZXRWYWx1ZUZyb20oZCl9cmV0dXJuIGIuY29tYmluYXRvcihnKX1mdW5jdGlvbiB1KGEsYixjLGQpe3ZhciBlPWJbM10sZj1lP2UoZCxjLCExKTpuZXcgUGF0aE9ic2VydmVyKGQsYlsyXSk7cmV0dXJuIGIuaXNTaW1wbGVQYXRoP2Y6bmV3IE9ic2VydmVyVHJhbnNmb3JtKGYsYi5jb21iaW5hdG9yKX1mdW5jdGlvbiB2KGEsYixjLGQpe2lmKGIub25seU9uZVRpbWUpcmV0dXJuIHQoYSxiLGMsZCk7aWYoYi5oYXNPbmVQYXRoKXJldHVybiB1KGEsYixjLGQpO2Zvcih2YXIgZT1uZXcgQ29tcG91bmRPYnNlcnZlcixmPTE7ZjxiLmxlbmd0aDtmKz00KXt2YXIgZz1iW2ZdLGg9YltmKzJdO2lmKGgpe3ZhciBpPWgoZCxjLGcpO2c/ZS5hZGRQYXRoKGkpOmUuYWRkT2JzZXJ2ZXIoaSl9ZWxzZXt2YXIgaj1iW2YrMV07Zz9lLmFkZFBhdGgoai5nZXRWYWx1ZUZyb20oZCkpOmUuYWRkUGF0aChkLGopfX1yZXR1cm4gbmV3IE9ic2VydmVyVHJhbnNmb3JtKGUsYi5jb21iaW5hdG9yKX1mdW5jdGlvbiB3KGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8Yi5sZW5ndGg7ZSs9Mil7dmFyIGY9YltlXSxnPWJbZSsxXSxoPXYoZixnLGEsYyksaT1hLmJpbmQoZixoLGcub25seU9uZVRpbWUpO2kmJmQmJmQucHVzaChpKX1pZihiLmlzVGVtcGxhdGUpe2EubW9kZWxfPWM7dmFyIGo9YS5wcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfKGIpO2QmJmomJmQucHVzaChqKX19ZnVuY3Rpb24geChhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoYik7cmV0dXJuIHMoIiI9PWQ/Int7fX0iOmQsYixhLGMpfWZ1bmN0aW9uIHkoYSxjKXtiKGEpO2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmF0dHJpYnV0ZXMubGVuZ3RoO2UrKyl7Zm9yKHZhciBmPWEuYXR0cmlidXRlc1tlXSxnPWYubmFtZSxpPWYudmFsdWU7Il8iPT09Z1swXTspZz1nLnN1YnN0cmluZygxKTtpZighaChhKXx8ZyE9PUgmJmchPT1GJiZnIT09Ryl7dmFyIGo9cyhpLGcsYSxjKTtqJiZkLnB1c2goZyxqKX19cmV0dXJuIGgoYSkmJihkLmlzVGVtcGxhdGU9ITAsZC5pZj14KGEsSCxjKSxkLmJpbmQ9eChhLEYsYyksZC5yZXBlYXQ9eChhLEcsYyksIWQuaWZ8fGQuYmluZHx8ZC5yZXBlYXR8fChkLmJpbmQ9cygie3t9fSIsRixhLGMpKSksZH1mdW5jdGlvbiB6KGEsYil7aWYoYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiB5KGEsYik7aWYoYS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFKXt2YXIgYz1zKGEuZGF0YSwidGV4dENvbnRlbnQiLGEsYik7aWYoYylyZXR1cm5bInRleHRDb250ZW50IixjXX1yZXR1cm5bXX1mdW5jdGlvbiBBKGEsYixjLGQsZSxmLGcpe2Zvcih2YXIgaD1iLmFwcGVuZENoaWxkKGMuaW1wb3J0Tm9kZShhLCExKSksaT0wLGo9YS5maXJzdENoaWxkO2o7aj1qLm5leHRTaWJsaW5nKUEoaixoLGMsZC5jaGlsZHJlbltpKytdLGUsZixnKTtyZXR1cm4gZC5pc1RlbXBsYXRlJiYoSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShoLGEpLGYmJmguc2V0RGVsZWdhdGVfKGYpKSx3KGgsZCxlLGcpLGh9ZnVuY3Rpb24gQihhLGIpe3ZhciBjPXooYSxiKTtjLmNoaWxkcmVuPXt9O2Zvcih2YXIgZD0wLGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWMuY2hpbGRyZW5bZCsrXT1CKGUsYik7cmV0dXJuIGN9ZnVuY3Rpb24gQyhhKXt0aGlzLmNsb3NlZD0hMSx0aGlzLnRlbXBsYXRlRWxlbWVudF89YSx0aGlzLnRlcm1pbmF0b3JzPVtdLHRoaXMuZGVwcz12b2lkIDAsdGhpcy5pdGVyYXRlZFZhbHVlPVtdLHRoaXMucHJlc2VudFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwfXZhciBELEU9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP0Q9YS5NYXA6KEQ9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LEQucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iP3ZvaWQgMDp0aGlzLnZhbHVlc1tiXX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5rZXlzLmluZGV4T2YoYSk7cmV0dXJuIDA+Yj8hMToodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpLCEwKX0sZm9yRWFjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8dGhpcy5rZXlzLmxlbmd0aDtjKyspYS5jYWxsKGJ8fHRoaXMsdGhpcy52YWx1ZXNbY10sdGhpcy5rZXlzW2NdLHRoaXMpfX0pLCJmdW5jdGlvbiIhPXR5cGVvZiBkb2N1bWVudC5jb250YWlucyYmKERvY3VtZW50LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbihhKXtyZXR1cm4gYT09PXRoaXN8fGEucGFyZW50Tm9kZT09PXRoaXM/ITA6dGhpcy5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMoYSl9KTt2YXIgRj0iYmluZCIsRz0icmVwZWF0IixIPSJpZiIsST17dGVtcGxhdGU6ITAscmVwZWF0OiEwLGJpbmQ6ITAscmVmOiEwfSxKPXtUSEVBRDohMCxUQk9EWTohMCxURk9PVDohMCxUSDohMCxUUjohMCxURDohMCxDT0xHUk9VUDohMCxDT0w6ITAsQ0FQVElPTjohMCxPUFRJT046ITAsT1BUR1JPVVA6ITB9LEs9InVuZGVmaW5lZCIhPXR5cGVvZiBIVE1MVGVtcGxhdGVFbGVtZW50LEw9InRlbXBsYXRlLCAiK09iamVjdC5rZXlzKEopLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpKyJbdGVtcGxhdGVdIn0pLmpvaW4oIiwgIik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtqKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksS3x8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIE09Il9fcHJvdG9fXyJpbnt9O0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGU9ZnVuY3Rpb24oYSxjKXtpZihhLnRlbXBsYXRlSXNEZWNvcmF0ZWRfKXJldHVybiExO3ZhciBkPWE7ZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMDt2YXIgaD1mKGQpJiZLLGk9aCxrPSFoLG09ITE7aWYoaHx8KGcoZCk/KGIoIWMpLGQ9bihhKSxkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwLGg9SyxtPSEwKTplKGQpJiYoZD1vKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsaD1LKSksIWgpe3EoZCk7dmFyIHI9bChkKTtkLmNvbnRlbnRfPXIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpfXJldHVybiBjP2QuaW5zdGFuY2VSZWZfPWM6az9wKGQsYSxtKTppJiZqKGQuY29udGVudCksITB9LEhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwPWo7dmFyIE49YS5IVE1MVW5rbm93bkVsZW1lbnR8fEhUTUxFbGVtZW50LE89e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRffSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH07S3x8KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTi5wcm90b3R5cGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSwiY29udGVudCIsTykpLGsoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUse3Byb2Nlc3NCaW5kaW5nRGlyZWN0aXZlc186ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXRlcmF0b3JfJiZ0aGlzLml0ZXJhdG9yXy5jbG9zZURlcHMoKSxhLmlmfHxhLmJpbmR8fGEucmVwZWF0Pyh0aGlzLml0ZXJhdG9yX3x8KHRoaXMuaXRlcmF0b3JfPW5ldyBDKHRoaXMpLHRoaXMuYmluZGluZ3M9dGhpcy5iaW5kaW5nc3x8e30sdGhpcy5iaW5kaW5ncy5pdGVyYXRvcj10aGlzLml0ZXJhdG9yXyksdGhpcy5pdGVyYXRvcl8udXBkYXRlRGVwZW5kZW5jaWVzKGEsdGhpcy5tb2RlbF8pLHRoaXMuaXRlcmF0b3JfKTp2b2lkKHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8uY2xvc2UoKSx0aGlzLml0ZXJhdG9yXz12b2lkIDAsdGhpcy5iaW5kaW5ncy5pdGVyYXRvcj12b2lkIDApKX0sY3JlYXRlSW5zdGFuY2U6ZnVuY3Rpb24oYSxiLGMsZCl7YiYmKGM9dGhpcy5uZXdEZWxlZ2F0ZV8oYikpO3ZhciBlPXRoaXMucmVmLmNvbnRlbnQsZj10aGlzLmJpbmRpbmdNYXBfO2YmJmYuY29udGVudD09PWV8fChmPUIoZSxjJiZjLnByZXBhcmVCaW5kaW5nKXx8W10sZi5jb250ZW50PWUsdGhpcy5iaW5kaW5nTWFwXz1mKTt2YXIgZz1tKHRoaXMpLGg9Zy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aC50ZW1wbGF0ZUNyZWF0b3JfPXRoaXMsaC5wcm90b0NvbnRlbnRfPWU7Zm9yKHZhciBpPXtmaXJzdE5vZGU6bnVsbCxsYXN0Tm9kZTpudWxsLG1vZGVsOmF9LGo9MCxrPWUuZmlyc3RDaGlsZDtrO2s9ay5uZXh0U2libGluZyl7dmFyIGw9QShrLGgsZyxmLmNoaWxkcmVuW2orK10sYSxjLGQpO2wudGVtcGxhdGVJbnN0YW5jZV89aX1yZXR1cm4gaS5maXJzdE5vZGU9aC5maXJzdENoaWxkLGkubGFzdE5vZGU9aC5sYXN0Q2hpbGQsaC50ZW1wbGF0ZUNyZWF0b3JfPXZvaWQgMCxoLnByb3RvQ29udGVudF89dm9pZCAwLGh9LGdldCBtb2RlbCgpe3JldHVybiB0aGlzLm1vZGVsX30sc2V0IG1vZGVsKGEpe3RoaXMubW9kZWxfPWEscih0aGlzKX0sZ2V0IGJpbmRpbmdEZWxlZ2F0ZSgpe3JldHVybiB0aGlzLmRlbGVnYXRlXyYmdGhpcy5kZWxlZ2F0ZV8ucmF3fSxzZXREZWxlZ2F0ZV86ZnVuY3Rpb24oYSl7dGhpcy5kZWxlZ2F0ZV89YSx0aGlzLmJpbmRpbmdNYXBfPXZvaWQgMCx0aGlzLml0ZXJhdG9yXyYmKHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5pbnN0YW5jZU1vZGVsRm5fPXZvaWQgMCl9LG5ld0RlbGVnYXRlXzpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZhciBjPWEmJmFbYl07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGM/ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShhLGFyZ3VtZW50cyl9OnZvaWQgMH1yZXR1cm4gYT97cmF3OmEscHJlcGFyZUJpbmRpbmc6YigicHJlcGFyZUJpbmRpbmciKSxwcmVwYXJlSW5zdGFuY2VNb2RlbDpiKCJwcmVwYXJlSW5zdGFuY2VNb2RlbCIpLHByZXBhcmVJbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZDpiKCJwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQiKX06e319LHNldCBiaW5kaW5nRGVsZWdhdGUoYSl7dGhpcy5zZXREZWxlZ2F0ZV8odGhpcy5uZXdEZWxlZ2F0ZV8oYSkpfSxnZXQgcmVmKCl7dmFyIGE9ZCh0aGlzLHRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKSk7aWYoYXx8KGE9dGhpcy5pbnN0YW5jZVJlZl8pLCFhKXJldHVybiB0aGlzO3ZhciBiPWEucmVmO3JldHVybiBiP2I6YX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlbXBsYXRlSW5zdGFuY2VfO3JldHVybiBhP2E6dGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS50ZW1wbGF0ZUluc3RhbmNlOnZvaWQgMH19KSxDLnByb3RvdHlwZT17Y2xvc2VEZXBzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5kZXBzO2EmJihhLmlmT25lVGltZT09PSExJiZhLmlmVmFsdWUuY2xvc2UoKSxhLm9uZVRpbWU9PT0hMSYmYS52YWx1ZS5jbG9zZSgpKX0sdXBkYXRlRGVwZW5kZW5jaWVzOmZ1bmN0aW9uKGEsYil7dGhpcy5jbG9zZURlcHMoKTt2YXIgYz10aGlzLmRlcHM9e30sZD10aGlzLnRlbXBsYXRlRWxlbWVudF87aWYoYS5pZil7aWYoYy5oYXNJZj0hMCxjLmlmT25lVGltZT1hLmlmLm9ubHlPbmVUaW1lLGMuaWZWYWx1ZT12KEgsYS5pZixkLGIpLGMuaWZPbmVUaW1lJiYhYy5pZlZhbHVlKXJldHVybiB2b2lkIHRoaXMudXBkYXRlSXRlcmF0ZWRWYWx1ZSgpO2MuaWZPbmVUaW1lfHxjLmlmVmFsdWUub3Blbih0aGlzLnVwZGF0ZUl0ZXJhdGVkVmFsdWUsdGhpcyl9YS5yZXBlYXQ/KGMucmVwZWF0PSEwLGMub25lVGltZT1hLnJlcGVhdC5vbmx5T25lVGltZSxjLnZhbHVlPXYoRyxhLnJlcGVhdCxkLGIpKTooYy5yZXBlYXQ9ITEsYy5vbmVUaW1lPWEuYmluZC5vbmx5T25lVGltZSxjLnZhbHVlPXYoRixhLmJpbmQsZCxiKSksYy5vbmVUaW1lfHxjLnZhbHVlLm9wZW4odGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlLHRoaXMpLHRoaXMudXBkYXRlSXRlcmF0ZWRWYWx1ZSgpfSx1cGRhdGVJdGVyYXRlZFZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5kZXBzLmhhc0lmKXt2YXIgYT10aGlzLmRlcHMuaWZWYWx1ZTtpZih0aGlzLmRlcHMuaWZPbmVUaW1lfHwoYT1hLmRpc2NhcmRDaGFuZ2VzKCkpLCFhKXJldHVybiB2b2lkIHRoaXMudmFsdWVDaGFuZ2VkKCl9dmFyIGI9dGhpcy5kZXBzLnZhbHVlO3RoaXMuZGVwcy5vbmVUaW1lfHwoYj1iLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMuZGVwcy5yZXBlYXR8fChiPVtiXSk7dmFyIGM9dGhpcy5kZXBzLnJlcGVhdCYmIXRoaXMuZGVwcy5vbmVUaW1lJiZBcnJheS5pc0FycmF5KGIpO3RoaXMudmFsdWVDaGFuZ2VkKGIsYyl9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIpe0FycmF5LmlzQXJyYXkoYSl8fChhPVtdKSxhIT09dGhpcy5pdGVyYXRlZFZhbHVlJiYodGhpcy51bm9ic2VydmUoKSx0aGlzLnByZXNlbnRWYWx1ZT1hLGImJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5wcmVzZW50VmFsdWUpLHRoaXMuYXJyYXlPYnNlcnZlci5vcGVuKHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSksdGhpcy5oYW5kbGVTcGxpY2VzKEFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcyh0aGlzLnByZXNlbnRWYWx1ZSx0aGlzLml0ZXJhdGVkVmFsdWUpKSl9LGdldFRlcm1pbmF0b3JBdDpmdW5jdGlvbihhKXtpZigtMT09YSlyZXR1cm4gdGhpcy50ZW1wbGF0ZUVsZW1lbnRfO3ZhciBiPXRoaXMudGVybWluYXRvcnNbMiphXTtpZihiLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fHRoaXMudGVtcGxhdGVFbGVtZW50Xz09PWIpcmV0dXJuIGI7dmFyIGM9Yi5pdGVyYXRvcl87cmV0dXJuIGM/Yy5nZXRUZXJtaW5hdG9yQXQoYy50ZXJtaW5hdG9ycy5sZW5ndGgvMi0xKTpifSxpbnNlcnRJbnN0YW5jZUF0OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuZ2V0VGVybWluYXRvckF0KGEtMSksZj1lO2I/Zj1iLmxhc3RDaGlsZHx8ZjpjJiYoZj1jW2MubGVuZ3RoLTFdfHxmKSx0aGlzLnRlcm1pbmF0b3JzLnNwbGljZSgyKmEsMCxmLGQpO3ZhciBnPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlLGg9ZS5uZXh0U2libGluZztpZihiKWcuaW5zZXJ0QmVmb3JlKGIsaCk7ZWxzZSBpZihjKWZvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKWcuaW5zZXJ0QmVmb3JlKGNbaV0saCl9LGV4dHJhY3RJbnN0YW5jZUF0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9dGhpcy5nZXRUZXJtaW5hdG9yQXQoYS0xKSxkPXRoaXMuZ2V0VGVybWluYXRvckF0KGEpO2IuaW5zdGFuY2VCaW5kaW5ncz10aGlzLnRlcm1pbmF0b3JzWzIqYSsxXSx0aGlzLnRlcm1pbmF0b3JzLnNwbGljZSgyKmEsMik7Zm9yKHZhciBlPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlO2QhPT1jOyl7dmFyIGY9Yy5uZXh0U2libGluZztmPT1kJiYoZD1jKSxlLnJlbW92ZUNoaWxkKGYpLGIucHVzaChmKX1yZXR1cm4gYn0sZ2V0RGVsZWdhdGVGbjpmdW5jdGlvbihhKXtyZXR1cm4gYT1hJiZhKHRoaXMudGVtcGxhdGVFbGVtZW50XyksImZ1bmN0aW9uIj09dHlwZW9mIGE/YTpudWxsfSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCYmYS5sZW5ndGgpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZighYi5wYXJlbnROb2RlKXJldHVybiB2b2lkIHRoaXMuY2xvc2UoKTtBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcyh0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5wcmVzZW50VmFsdWUsYSk7dmFyIGM9Yi5kZWxlZ2F0ZV87dm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPXRoaXMuZ2V0RGVsZWdhdGVGbihjJiZjLnByZXBhcmVJbnN0YW5jZU1vZGVsKSksdm9pZCAwPT09dGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmKHRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dGhpcy5nZXREZWxlZ2F0ZUZuKGMmJmMucHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkKSk7dmFyIGQ9bmV3IEQsZT0wO2EuZm9yRWFjaChmdW5jdGlvbihhKXthLnJlbW92ZWQuZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz10aGlzLmV4dHJhY3RJbnN0YW5jZUF0KGEuaW5kZXgrZSk7ZC5zZXQoYixjKX0sdGhpcyksZS09YS5hZGRlZENvdW50fSx0aGlzKSxhLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBlPWEuaW5kZXg7ZTxhLmluZGV4K2EuYWRkZWRDb3VudDtlKyspe3ZhciBmLGc9dGhpcy5pdGVyYXRlZFZhbHVlW2VdLGg9dm9pZCAwLGk9ZC5nZXQoZyk7aT8oZC5kZWxldGUoZyksZj1pLmluc3RhbmNlQmluZGluZ3MpOihmPVtdLHRoaXMuaW5zdGFuY2VNb2RlbEZuXyYmKGc9dGhpcy5pbnN0YW5jZU1vZGVsRm5fKGcpKSx2b2lkIDAhPT1nJiYoaD1iLmNyZWF0ZUluc3RhbmNlKGcsdm9pZCAwLGMsZikpKSx0aGlzLmluc2VydEluc3RhbmNlQXQoZSxoLGksZil9fSx0aGlzKSxkLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5jbG9zZUluc3RhbmNlQmluZGluZ3MoYS5pbnN0YW5jZUJpbmRpbmdzKX0sdGhpcyksdGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmdGhpcy5yZXBvcnRJbnN0YW5jZXNNb3ZlZChhKX19LHJlcG9ydEluc3RhbmNlTW92ZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRUZXJtaW5hdG9yQXQoYS0xKSxjPXRoaXMuZ2V0VGVybWluYXRvckF0KGEpO2lmKGIhPT1jKXt2YXIgZD1iLm5leHRTaWJsaW5nLnRlbXBsYXRlSW5zdGFuY2U7dGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyhkLGEpfX0scmVwb3J0SW5zdGFuY2VzTW92ZWQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz0wLGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGU9YVtkXTtpZigwIT1jKWZvcig7YjxlLmluZGV4Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2Vsc2UgYj1lLmluZGV4O2Zvcig7YjxlLmluZGV4K2UuYWRkZWRDb3VudDspdGhpcy5yZXBvcnRJbnN0YW5jZU1vdmVkKGIpLGIrKztjKz1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aH1pZigwIT1jKWZvcih2YXIgZj10aGlzLnRlcm1pbmF0b3JzLmxlbmd0aC8yO2Y+YjspdGhpcy5yZXBvcnRJbnN0YW5jZU1vdmVkKGIpLGIrK30sY2xvc2VJbnN0YW5jZUJpbmRpbmdzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0uY2xvc2UoKX0sdW5vYnNlcnZlOmZ1bmN0aW9uKCl7dGhpcy5hcnJheU9ic2VydmVyJiYodGhpcy5hcnJheU9ic2VydmVyLmNsb3NlKCksdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXt0aGlzLnVub2JzZXJ2ZSgpO2Zvcih2YXIgYT0xO2E8dGhpcy50ZXJtaW5hdG9ycy5sZW5ndGg7YSs9Mil0aGlzLmNsb3NlSW5zdGFuY2VCaW5kaW5ncyh0aGlzLnRlcm1pbmF0b3JzW2FdKTt0aGlzLnRlcm1pbmF0b3JzLmxlbmd0aD0wLHRoaXMuY2xvc2VEZXBzKCksdGhpcy50ZW1wbGF0ZUVsZW1lbnRfLml0ZXJhdG9yXz12b2lkIDAsdGhpcy5jbG9zZWQ9ITB9fX0sSFRNTFRlbXBsYXRlRWxlbWVudC5mb3JBbGxUZW1wbGF0ZXNGcm9tXz1pfSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQVNTRVJUOiAiK2IpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGE+PTQ4JiY1Nz49YX1mdW5jdGlvbiBkKGEpe3JldHVybiAzMj09PWF8fDk9PT1hfHwxMT09PWF8fDEyPT09YXx8MTYwPT09YXx8YT49NTc2MCYmIuGagOGgjuKAgOKAgeKAguKAg+KAhOKAheKAhuKAh+KAiOKAieKAiuKAr+KBn+OAgCIuaW5kZXhPZihTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKT4wfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIDEwPT09YXx8MTM9PT1hfHw4MjMyPT09YXx8ODIzMz09PWF9ZnVuY3Rpb24gZihhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YX1mdW5jdGlvbiBnKGEpe3JldHVybiAzNj09PWF8fDk1PT09YXx8YT49NjUmJjkwPj1hfHxhPj05NyYmMTIyPj1hfHxhPj00OCYmNTc+PWF9ZnVuY3Rpb24gaChhKXtyZXR1cm4idGhpcyI9PT1hfWZ1bmN0aW9uIGkoKXtmb3IoO1k+WCYmZChXLmNoYXJDb2RlQXQoWCkpOykrK1h9ZnVuY3Rpb24gaigpe3ZhciBhLGI7Zm9yKGE9WCsrO1k+WCYmKGI9Vy5jaGFyQ29kZUF0KFgpLGcoYikpOykrK1g7cmV0dXJuIFcuc2xpY2UoYSxYKX1mdW5jdGlvbiBrKCl7dmFyIGEsYixjO3JldHVybiBhPVgsYj1qKCksYz0xPT09Yi5sZW5ndGg/Uy5JZGVudGlmaWVyOmgoYik/Uy5LZXl3b3JkOiJudWxsIj09PWI/Uy5OdWxsTGl0ZXJhbDoidHJ1ZSI9PT1ifHwiZmFsc2UiPT09Yj9TLkJvb2xlYW5MaXRlcmFsOlMuSWRlbnRpZmllcix7dHlwZTpjLHZhbHVlOmIscmFuZ2U6W2EsWF19fWZ1bmN0aW9uIGwoKXt2YXIgYSxiLGM9WCxkPVcuY2hhckNvZGVBdChYKSxlPVdbWF07c3dpdGNoKGQpe2Nhc2UgNDY6Y2FzZSA0MDpjYXNlIDQxOmNhc2UgNTk6Y2FzZSA0NDpjYXNlIDEyMzpjYXNlIDEyNTpjYXNlIDkxOmNhc2UgOTM6Y2FzZSA1ODpjYXNlIDYzOnJldHVybisrWCx7dHlwZTpTLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShkKSxyYW5nZTpbYyxYXX07ZGVmYXVsdDppZihhPVcuY2hhckNvZGVBdChYKzEpLDYxPT09YSlzd2l0Y2goZCl7Y2FzZSAzNzpjYXNlIDM4OmNhc2UgNDI6Y2FzZSA0MzpjYXNlIDQ1OmNhc2UgNDc6Y2FzZSA2MDpjYXNlIDYyOmNhc2UgMTI0OnJldHVybiBYKz0yLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQpK1N0cmluZy5mcm9tQ2hhckNvZGUoYSkscmFuZ2U6W2MsWF19O2Nhc2UgMzM6Y2FzZSA2MTpyZXR1cm4gWCs9Miw2MT09PVcuY2hhckNvZGVBdChYKSYmKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpXLnNsaWNlKGMsWCkscmFuZ2U6W2MsWF19fX1yZXR1cm4gYj1XW1grMV0sZT09PWImJiImfCIuaW5kZXhPZihlKT49MD8oWCs9Mix7dHlwZTpTLlB1bmN0dWF0b3IsdmFsdWU6ZStiLHJhbmdlOltjLFhdfSk6Ijw+PSErLSolJnxeLyIuaW5kZXhPZihlKT49MD8oKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTplLHJhbmdlOltjLFhdfSk6dm9pZCBzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIil9ZnVuY3Rpb24gbSgpe3ZhciBhLGQsZTtpZihlPVdbWF0sYihjKGUuY2hhckNvZGVBdCgwKSl8fCIuIj09PWUsIk51bWVyaWMgbGl0ZXJhbCBtdXN0IHN0YXJ0IHdpdGggYSBkZWNpbWFsIGRpZ2l0IG9yIGEgZGVjaW1hbCBwb2ludCIpLGQ9WCxhPSIiLCIuIiE9PWUpe2ZvcihhPVdbWCsrXSxlPVdbWF0sIjAiPT09YSYmZSYmYyhlLmNoYXJDb2RlQXQoMCkpJiZzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIik7YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZT1XW1hdfWlmKCIuIj09PWUpe2ZvcihhKz1XW1grK107YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZT1XW1hdfWlmKCJlIj09PWV8fCJFIj09PWUpaWYoYSs9V1tYKytdLGU9V1tYXSwoIisiPT09ZXx8Ii0iPT09ZSkmJihhKz1XW1grK10pLGMoVy5jaGFyQ29kZUF0KFgpKSlmb3IoO2MoVy5jaGFyQ29kZUF0KFgpKTspYSs9V1tYKytdO2Vsc2Ugcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpO3JldHVybiBmKFcuY2hhckNvZGVBdChYKSkmJnMoe30sVi5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx7dHlwZTpTLk51bWVyaWNMaXRlcmFsLHZhbHVlOnBhcnNlRmxvYXQoYSkscmFuZ2U6W2QsWF19fWZ1bmN0aW9uIG4oKXt2YXIgYSxjLGQsZj0iIixnPSExO2ZvcihhPVdbWF0sYigiJyI9PT1hfHwnIic9PT1hLCJTdHJpbmcgbGl0ZXJhbCBtdXN0IHN0YXJ0cyB3aXRoIGEgcXVvdGUiKSxjPVgsKytYO1k+WDspe2lmKGQ9V1tYKytdLGQ9PT1hKXthPSIiO2JyZWFrfWlmKCJcXCI9PT1kKWlmKGQ9V1tYKytdLGQmJmUoZC5jaGFyQ29kZUF0KDApKSkiXHIiPT09ZCYmIlxuIj09PVdbWF0mJisrWDtlbHNlIHN3aXRjaChkKXtjYXNlIm4iOmYrPSJcbiI7YnJlYWs7Y2FzZSJyIjpmKz0iXHIiO2JyZWFrO2Nhc2UidCI6Zis9IgkiO2JyZWFrO2Nhc2UiYiI6Zis9IlxiIjticmVhaztjYXNlImYiOmYrPSJcZiI7YnJlYWs7Y2FzZSJ2IjpmKz0iCyI7YnJlYWs7ZGVmYXVsdDpmKz1kfWVsc2V7aWYoZShkLmNoYXJDb2RlQXQoMCkpKWJyZWFrO2YrPWR9fXJldHVybiIiIT09YSYmcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHt0eXBlOlMuU3RyaW5nTGl0ZXJhbCx2YWx1ZTpmLG9jdGFsOmcscmFuZ2U6W2MsWF19fWZ1bmN0aW9uIG8oYSl7cmV0dXJuIGEudHlwZT09PVMuSWRlbnRpZmllcnx8YS50eXBlPT09Uy5LZXl3b3JkfHxhLnR5cGU9PT1TLkJvb2xlYW5MaXRlcmFsfHxhLnR5cGU9PT1TLk51bGxMaXRlcmFsfWZ1bmN0aW9uIHAoKXt2YXIgYTtyZXR1cm4gaSgpLFg+PVk/e3R5cGU6Uy5FT0YscmFuZ2U6W1gsWF19OihhPVcuY2hhckNvZGVBdChYKSw0MD09PWF8fDQxPT09YXx8NTg9PT1hP2woKTozOT09PWF8fDM0PT09YT9uKCk6ZihhKT9rKCk6NDY9PT1hP2MoVy5jaGFyQ29kZUF0KFgrMSkpP20oKTpsKCk6YyhhKT9tKCk6bCgpKX1mdW5jdGlvbiBxKCl7dmFyIGE7cmV0dXJuIGE9JCxYPWEucmFuZ2VbMV0sJD1wKCksWD1hLnJhbmdlWzFdLGF9ZnVuY3Rpb24gcigpe3ZhciBhO2E9WCwkPXAoKSxYPWF9ZnVuY3Rpb24gcyhhLGMpe3ZhciBkLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpLGY9Yy5yZXBsYWNlKC8lKFxkKS9nLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIoYzxlLmxlbmd0aCwiTWVzc2FnZSByZWZlcmVuY2UgbXVzdCBiZSBpbiByYW5nZSIpLGVbY119KTt0aHJvdyBkPW5ldyBFcnJvcihmKSxkLmluZGV4PVgsZC5kZXNjcmlwdGlvbj1mLGR9ZnVuY3Rpb24gdChhKXtzKGEsVi5VbmV4cGVjdGVkVG9rZW4sYS52YWx1ZSl9ZnVuY3Rpb24gdShhKXt2YXIgYj1xKCk7KGIudHlwZSE9PVMuUHVuY3R1YXRvcnx8Yi52YWx1ZSE9PWEpJiZ0KGIpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuICQudHlwZT09PVMuUHVuY3R1YXRvciYmJC52YWx1ZT09PWF9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gJC50eXBlPT09Uy5LZXl3b3JkJiYkLnZhbHVlPT09YX1mdW5jdGlvbiB4KCl7dmFyIGE9W107Zm9yKHUoIlsiKTshdigiXSIpOyl2KCIsIik/KHEoKSxhLnB1c2gobnVsbCkpOihhLnB1c2goYmIoKSksdigiXSIpfHx1KCIsIikpO3JldHVybiB1KCJdIiksWi5jcmVhdGVBcnJheUV4cHJlc3Npb24oYSl9ZnVuY3Rpb24geSgpe3ZhciBhO3JldHVybiBpKCksYT1xKCksYS50eXBlPT09Uy5TdHJpbmdMaXRlcmFsfHxhLnR5cGU9PT1TLk51bWVyaWNMaXRlcmFsP1ouY3JlYXRlTGl0ZXJhbChhKTpaLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24geigpe3ZhciBhLGI7cmV0dXJuIGE9JCxpKCksKGEudHlwZT09PVMuRU9GfHxhLnR5cGU9PT1TLlB1bmN0dWF0b3IpJiZ0KGEpLGI9eSgpLHUoIjoiKSxaLmNyZWF0ZVByb3BlcnR5KCJpbml0IixiLGJiKCkpfWZ1bmN0aW9uIEEoKXt2YXIgYT1bXTtmb3IodSgieyIpOyF2KCJ9Iik7KWEucHVzaCh6KCkpLHYoIn0iKXx8dSgiLCIpO3JldHVybiB1KCJ9IiksWi5jcmVhdGVPYmplY3RFeHByZXNzaW9uKGEpfWZ1bmN0aW9uIEIoKXt2YXIgYTtyZXR1cm4gdSgiKCIpLGE9YmIoKSx1KCIpIiksYX1mdW5jdGlvbiBDKCl7dmFyIGEsYixjO3JldHVybiB2KCIoIik/QigpOihhPSQudHlwZSxhPT09Uy5JZGVudGlmaWVyP2M9Wi5jcmVhdGVJZGVudGlmaWVyKHEoKS52YWx1ZSk6YT09PVMuU3RyaW5nTGl0ZXJhbHx8YT09PVMuTnVtZXJpY0xpdGVyYWw/Yz1aLmNyZWF0ZUxpdGVyYWwocSgpKTphPT09Uy5LZXl3b3JkP3coInRoaXMiKSYmKHEoKSxjPVouY3JlYXRlVGhpc0V4cHJlc3Npb24oKSk6YT09PVMuQm9vbGVhbkxpdGVyYWw/KGI9cSgpLGIudmFsdWU9InRydWUiPT09Yi52YWx1ZSxjPVouY3JlYXRlTGl0ZXJhbChiKSk6YT09PVMuTnVsbExpdGVyYWw/KGI9cSgpLGIudmFsdWU9bnVsbCxjPVouY3JlYXRlTGl0ZXJhbChiKSk6digiWyIpP2M9eCgpOnYoInsiKSYmKGM9QSgpKSxjP2M6dm9pZCB0KHEoKSkpfWZ1bmN0aW9uIEQoKXt2YXIgYT1bXTtpZih1KCIoIiksIXYoIikiKSlmb3IoO1k+WCYmKGEucHVzaChiYigpKSwhdigiKSIpKTspdSgiLCIpO3JldHVybiB1KCIpIiksYX1mdW5jdGlvbiBFKCl7dmFyIGE7cmV0dXJuIGE9cSgpLG8oYSl8fHQoYSksWi5jcmVhdGVJZGVudGlmaWVyKGEudmFsdWUpfWZ1bmN0aW9uIEYoKXtyZXR1cm4gdSgiLiIpLEUoKX1mdW5jdGlvbiBHKCl7dmFyIGE7cmV0dXJuIHUoIlsiKSxhPWJiKCksdSgiXSIpLGF9ZnVuY3Rpb24gSCgpe3ZhciBhLGI7Zm9yKGE9QygpO3YoIi4iKXx8digiWyIpOyl2KCJbIik/KGI9RygpLGE9Wi5jcmVhdGVNZW1iZXJFeHByZXNzaW9uKCJbIixhLGIpKTooYj1GKCksYT1aLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIi4iLGEsYikpO3JldHVybiBhfWZ1bmN0aW9uIEkoKXt2YXIgYSxiO3JldHVybiAkLnR5cGUhPT1TLlB1bmN0dWF0b3ImJiQudHlwZSE9PVMuS2V5d29yZD9iPWFiKCk6digiKyIpfHx2KCItIil8fHYoIiEiKT8oYT1xKCksYj1JKCksYj1aLmNyZWF0ZVVuYXJ5RXhwcmVzc2lvbihhLnZhbHVlLGIpKTp3KCJkZWxldGUiKXx8dygidm9pZCIpfHx3KCJ0eXBlb2YiKT9zKHt9LFYuVW5leHBlY3RlZFRva2VuKTpiPWFiKCksYn1mdW5jdGlvbiBKKGEpe3ZhciBiPTA7aWYoYS50eXBlIT09Uy5QdW5jdHVhdG9yJiZhLnR5cGUhPT1TLktleXdvcmQpcmV0dXJuIDA7CnN3aXRjaChhLnZhbHVlKXtjYXNlInx8IjpiPTE7YnJlYWs7Y2FzZSImJiI6Yj0yO2JyZWFrO2Nhc2UiPT0iOmNhc2UiIT0iOmNhc2UiPT09IjpjYXNlIiE9PSI6Yj02O2JyZWFrO2Nhc2UiPCI6Y2FzZSI+IjpjYXNlIjw9IjpjYXNlIj49IjpjYXNlImluc3RhbmNlb2YiOmI9NzticmVhaztjYXNlImluIjpiPTc7YnJlYWs7Y2FzZSIrIjpjYXNlIi0iOmI9OTticmVhaztjYXNlIioiOmNhc2UiLyI6Y2FzZSIlIjpiPTExfXJldHVybiBifWZ1bmN0aW9uIEsoKXt2YXIgYSxiLGMsZCxlLGYsZyxoO2lmKGc9SSgpLGI9JCxjPUooYiksMD09PWMpcmV0dXJuIGc7Zm9yKGIucHJlYz1jLHEoKSxlPUkoKSxkPVtnLGIsZV07KGM9SigkKSk+MDspe2Zvcig7ZC5sZW5ndGg+MiYmYzw9ZFtkLmxlbmd0aC0yXS5wcmVjOyllPWQucG9wKCksZj1kLnBvcCgpLnZhbHVlLGc9ZC5wb3AoKSxhPVouY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihmLGcsZSksZC5wdXNoKGEpO2I9cSgpLGIucHJlYz1jLGQucHVzaChiKSxhPUkoKSxkLnB1c2goYSl9Zm9yKGg9ZC5sZW5ndGgtMSxhPWRbaF07aD4xOylhPVouY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihkW2gtMV0udmFsdWUsZFtoLTJdLGEpLGgtPTI7cmV0dXJuIGF9ZnVuY3Rpb24gTCgpe3ZhciBhLGIsYztyZXR1cm4gYT1LKCksdigiPyIpJiYocSgpLGI9TCgpLHUoIjoiKSxjPUwoKSxhPVouY3JlYXRlQ29uZGl0aW9uYWxFeHByZXNzaW9uKGEsYixjKSksYX1mdW5jdGlvbiBNKCl7dmFyIGEsYjtyZXR1cm4gYT1xKCksYS50eXBlIT09Uy5JZGVudGlmaWVyJiZ0KGEpLGI9digiKCIpP0QoKTpbXSxaLmNyZWF0ZUZpbHRlcihhLnZhbHVlLGIpfWZ1bmN0aW9uIE4oKXtmb3IoO3YoInwiKTspcSgpLE0oKX1mdW5jdGlvbiBPKCl7aSgpLHIoKTt2YXIgYT1iYigpO2EmJigiLCI9PT0kLnZhbHVlfHwiaW4iPT0kLnZhbHVlJiZhLnR5cGU9PT1VLklkZW50aWZpZXI/UShhKTooTigpLCJhcyI9PT0kLnZhbHVlP1AoYSk6Wi5jcmVhdGVUb3BMZXZlbChhKSkpLCQudHlwZSE9PVMuRU9GJiZ0KCQpfWZ1bmN0aW9uIFAoYSl7cSgpO3ZhciBiPXEoKS52YWx1ZTtaLmNyZWF0ZUFzRXhwcmVzc2lvbihhLGIpfWZ1bmN0aW9uIFEoYSl7dmFyIGI7IiwiPT09JC52YWx1ZSYmKHEoKSwkLnR5cGUhPT1TLklkZW50aWZpZXImJnQoJCksYj1xKCkudmFsdWUpLHEoKTt2YXIgYz1iYigpO04oKSxaLmNyZWF0ZUluRXhwcmVzc2lvbihhLm5hbWUsYixjKX1mdW5jdGlvbiBSKGEsYil7cmV0dXJuIFo9YixXPWEsWD0wLFk9Vy5sZW5ndGgsJD1udWxsLF89e2xhYmVsU2V0Ont9fSxPKCl9dmFyIFMsVCxVLFYsVyxYLFksWiwkLF87Uz17Qm9vbGVhbkxpdGVyYWw6MSxFT0Y6MixJZGVudGlmaWVyOjMsS2V5d29yZDo0LE51bGxMaXRlcmFsOjUsTnVtZXJpY0xpdGVyYWw6NixQdW5jdHVhdG9yOjcsU3RyaW5nTGl0ZXJhbDo4fSxUPXt9LFRbUy5Cb29sZWFuTGl0ZXJhbF09IkJvb2xlYW4iLFRbUy5FT0ZdPSI8ZW5kPiIsVFtTLklkZW50aWZpZXJdPSJJZGVudGlmaWVyIixUW1MuS2V5d29yZF09IktleXdvcmQiLFRbUy5OdWxsTGl0ZXJhbF09Ik51bGwiLFRbUy5OdW1lcmljTGl0ZXJhbF09Ik51bWVyaWMiLFRbUy5QdW5jdHVhdG9yXT0iUHVuY3R1YXRvciIsVFtTLlN0cmluZ0xpdGVyYWxdPSJTdHJpbmciLFU9e0FycmF5RXhwcmVzc2lvbjoiQXJyYXlFeHByZXNzaW9uIixCaW5hcnlFeHByZXNzaW9uOiJCaW5hcnlFeHByZXNzaW9uIixDYWxsRXhwcmVzc2lvbjoiQ2FsbEV4cHJlc3Npb24iLENvbmRpdGlvbmFsRXhwcmVzc2lvbjoiQ29uZGl0aW9uYWxFeHByZXNzaW9uIixFbXB0eVN0YXRlbWVudDoiRW1wdHlTdGF0ZW1lbnQiLEV4cHJlc3Npb25TdGF0ZW1lbnQ6IkV4cHJlc3Npb25TdGF0ZW1lbnQiLElkZW50aWZpZXI6IklkZW50aWZpZXIiLExpdGVyYWw6IkxpdGVyYWwiLExhYmVsZWRTdGF0ZW1lbnQ6IkxhYmVsZWRTdGF0ZW1lbnQiLExvZ2ljYWxFeHByZXNzaW9uOiJMb2dpY2FsRXhwcmVzc2lvbiIsTWVtYmVyRXhwcmVzc2lvbjoiTWVtYmVyRXhwcmVzc2lvbiIsT2JqZWN0RXhwcmVzc2lvbjoiT2JqZWN0RXhwcmVzc2lvbiIsUHJvZ3JhbToiUHJvZ3JhbSIsUHJvcGVydHk6IlByb3BlcnR5IixUaGlzRXhwcmVzc2lvbjoiVGhpc0V4cHJlc3Npb24iLFVuYXJ5RXhwcmVzc2lvbjoiVW5hcnlFeHByZXNzaW9uIn0sVj17VW5leHBlY3RlZFRva2VuOiJVbmV4cGVjdGVkIHRva2VuICUwIixVbmtub3duTGFiZWw6IlVuZGVmaW5lZCBsYWJlbCAnJTAnIixSZWRlY2xhcmF0aW9uOiIlMCAnJTEnIGhhcyBhbHJlYWR5IGJlZW4gZGVjbGFyZWQifTt2YXIgYWI9SCxiYj1MO2EuZXNwcmltYT17cGFyc2U6Un19KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixkLGUpe3ZhciBmO3RyeXtpZihmPWMoYSksZi5zY29wZUlkZW50JiYoZC5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFfHwiVEVNUExBVEUiIT09ZC50YWdOYW1lfHwiYmluZCIhPT1iJiYicmVwZWF0IiE9PWIpKXRocm93IEVycm9yKCJhcyBhbmQgaW4gY2FuIG9ubHkgYmUgdXNlZCB3aXRoaW4gPHRlbXBsYXRlIGJpbmQvcmVwZWF0PiIpfWNhdGNoKGcpe3JldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoIkludmFsaWQgZXhwcmVzc2lvbiBzeW50YXg6ICIrYSxnKX1yZXR1cm4gZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWYuZ2V0QmluZGluZyhhLGUsYyk7cmV0dXJuIGYuc2NvcGVJZGVudCYmZCYmKGIucG9seW1lckV4cHJlc3Npb25TY29wZUlkZW50Xz1mLnNjb3BlSWRlbnQsZi5pbmRleElkZW50JiYoYi5wb2x5bWVyRXhwcmVzc2lvbkluZGV4SWRlbnRfPWYuaW5kZXhJZGVudCkpLGR9fWZ1bmN0aW9uIGMoYSl7dmFyIGI9cVthXTtpZighYil7dmFyIGM9bmV3IGo7ZXNwcmltYS5wYXJzZShhLGMpLGI9bmV3IGwoYykscVthXT1ifXJldHVybiBifWZ1bmN0aW9uIGQoYSl7dGhpcy52YWx1ZT1hLHRoaXMudmFsdWVGbl89dm9pZCAwfWZ1bmN0aW9uIGUoYSl7dGhpcy5uYW1lPWEsdGhpcy5wYXRoPVBhdGguZ2V0KGEpfWZ1bmN0aW9uIGYoYSxiLGMpeyJbIj09YyYmYiBpbnN0YW5jZW9mIGQmJlBhdGguZ2V0KGIudmFsdWUpLnZhbGlkJiYoYz0iLiIsYj1uZXcgZShiLnZhbHVlKSksdGhpcy5keW5hbWljRGVwcz0iZnVuY3Rpb24iPT10eXBlb2YgYXx8YS5keW5hbWljLHRoaXMuZHluYW1pYz0iZnVuY3Rpb24iPT10eXBlb2YgYnx8Yi5keW5hbWljfHwiWyI9PWMsdGhpcy5zaW1wbGVQYXRoPSF0aGlzLmR5bmFtaWMmJiF0aGlzLmR5bmFtaWNEZXBzJiZiIGluc3RhbmNlb2YgZSYmKGEgaW5zdGFuY2VvZiBmfHxhIGluc3RhbmNlb2YgZSksdGhpcy5vYmplY3Q9dGhpcy5zaW1wbGVQYXRoP2E6aShhKSx0aGlzLnByb3BlcnR5PSIuIj09Yz9iOmkoYil9ZnVuY3Rpb24gZyhhLGIpe3RoaXMubmFtZT1hLHRoaXMuYXJncz1bXTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl0aGlzLmFyZ3NbY109aShiW2NdKX1mdW5jdGlvbiBoKCl7dGhyb3cgRXJyb3IoIk5vdCBJbXBsZW1lbnRlZCIpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGE/YTphLnZhbHVlRm4oKX1mdW5jdGlvbiBqKCl7dGhpcy5leHByZXNzaW9uPW51bGwsdGhpcy5maWx0ZXJzPVtdLHRoaXMuZGVwcz17fSx0aGlzLmN1cnJlbnRQYXRoPXZvaWQgMCx0aGlzLnNjb3BlSWRlbnQ9dm9pZCAwLHRoaXMuaW5kZXhJZGVudD12b2lkIDAsdGhpcy5keW5hbWljRGVwcz0hMX1mdW5jdGlvbiBrKGEpe3RoaXMudmFsdWVfPWF9ZnVuY3Rpb24gbChhKXtpZih0aGlzLnNjb3BlSWRlbnQ9YS5zY29wZUlkZW50LHRoaXMuaW5kZXhJZGVudD1hLmluZGV4SWRlbnQsIWEuZXhwcmVzc2lvbil0aHJvdyBFcnJvcigiTm8gZXhwcmVzc2lvbiBmb3VuZC4iKTt0aGlzLmV4cHJlc3Npb249YS5leHByZXNzaW9uLGkodGhpcy5leHByZXNzaW9uKSx0aGlzLmZpbHRlcnM9YS5maWx0ZXJzLHRoaXMuZHluYW1pY0RlcHM9YS5keW5hbWljRGVwc31mdW5jdGlvbiBtKGEpe3JldHVybiBTdHJpbmcoYSkucmVwbGFjZSgvW0EtWl0vZyxmdW5jdGlvbihhKXtyZXR1cm4iLSIrYS50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gbihhKXtyZXR1cm4ibyI9PT1hWzBdJiYibiI9PT1hWzFdJiYiLSI9PT1hWzJdfWZ1bmN0aW9uIG8oYSxiKXt2YXIgYz1iLnN1YnN0cmluZygzKTtyZXR1cm4gZnVuY3Rpb24oYixkLGUpe2Z1bmN0aW9uIGYoKXtlfHwoaD1hLmdldFZhbHVlRnJvbShiKSksaC5hcHBseShiLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZygpe3JldHVybiJ7eyAiK2ErIiB9fSJ9dmFyIGg9YS5nZXRWYWx1ZUZyb20oYik7cmV0dXJuIGQuYWRkRXZlbnRMaXN0ZW5lcihjLGYpLGU/dm9pZCAwOntvcGVuOmcsZGlzY2FyZENoYW5nZXM6ZyxjbG9zZTpmdW5jdGlvbigpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGYpfX19fWZ1bmN0aW9uIHAoKXt9dmFyIHE9T2JqZWN0LmNyZWF0ZShudWxsKTtkLnByb3RvdHlwZT17dmFsdWVGbjpmdW5jdGlvbigpe2lmKCF0aGlzLnZhbHVlRm5fKXt2YXIgYT10aGlzLnZhbHVlO3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oKXtyZXR1cm4gYX19cmV0dXJuIHRoaXMudmFsdWVGbl99fSxlLnByb3RvdHlwZT17dmFsdWVGbjpmdW5jdGlvbigpe2lmKCF0aGlzLnZhbHVlRm5fKXt2YXIgYT0odGhpcy5uYW1lLHRoaXMucGF0aCk7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbihiLGMpe3JldHVybiBjJiZjLmFkZFBhdGgoYixhKSxhLmdldFZhbHVlRnJvbShiKX19cmV0dXJuIHRoaXMudmFsdWVGbl99LHNldFZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucGF0aC5zZXRWYWx1ZUZyb20oYSxiKX19LGYucHJvdG90eXBlPXtnZXQgZnVsbFBhdGgoKXtpZighdGhpcy5mdWxsUGF0aF8pe3ZhciBhPXRoaXMub2JqZWN0IGluc3RhbmNlb2YgZT90aGlzLm9iamVjdC5uYW1lOnRoaXMub2JqZWN0LmZ1bGxQYXRoO3RoaXMuZnVsbFBhdGhfPVBhdGguZ2V0KGErIi4iK3RoaXMucHJvcGVydHkubmFtZSl9cmV0dXJuIHRoaXMuZnVsbFBhdGhffSx2YWx1ZUZuOmZ1bmN0aW9uKCl7aWYoIXRoaXMudmFsdWVGbl8pe3ZhciBhPXRoaXMub2JqZWN0O2lmKHRoaXMuc2ltcGxlUGF0aCl7dmFyIGI9dGhpcy5mdWxsUGF0aDt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGMmJmMuYWRkUGF0aChhLGIpLGIuZ2V0VmFsdWVGcm9tKGEpfX1lbHNlIGlmKHRoaXMucHJvcGVydHkgaW5zdGFuY2VvZiBlKXt2YXIgYj1QYXRoLmdldCh0aGlzLnByb3BlcnR5Lm5hbWUpO3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oYyxkKXt2YXIgZT1hKGMsZCk7cmV0dXJuIGQmJmQuYWRkUGF0aChlLGIpLGIuZ2V0VmFsdWVGcm9tKGUpfX1lbHNle3ZhciBjPXRoaXMucHJvcGVydHk7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbihiLGQpe3ZhciBlPWEoYixkKSxmPWMoYixkKTtyZXR1cm4gZCYmZC5hZGRQYXRoKGUsZiksZT9lW2ZdOnZvaWQgMH19fXJldHVybiB0aGlzLnZhbHVlRm5ffSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc2ltcGxlUGF0aClyZXR1cm4gdGhpcy5mdWxsUGF0aC5zZXRWYWx1ZUZyb20oYSxiKSxiO3ZhciBjPXRoaXMub2JqZWN0KGEpLGQ9dGhpcy5wcm9wZXJ0eSBpbnN0YW5jZW9mIGU/dGhpcy5wcm9wZXJ0eS5uYW1lOnRoaXMucHJvcGVydHkoYSk7cmV0dXJuIGNbZF09Yn19LGcucHJvdG90eXBlPXt0cmFuc2Zvcm06ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1jW3RoaXMubmFtZV0sZz1kO2lmKGYpZz12b2lkIDA7ZWxzZSBpZihmPWdbdGhpcy5uYW1lXSwhZilyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJDYW5ub3QgZmluZCBmaWx0ZXI6ICIrdGhpcy5uYW1lKTtpZihiP2Y9Zi50b01vZGVsOiJmdW5jdGlvbiI9PXR5cGVvZiBmLnRvRE9NJiYoZj1mLnRvRE9NKSwiZnVuY3Rpb24iIT10eXBlb2YgZilyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJObyAiKyhiPyJ0b01vZGVsIjoidG9ET00iKSsiIGZvdW5kIG9uIit0aGlzLm5hbWUpO2Zvcih2YXIgaD1bYV0saj0wO2o8dGhpcy5hcmdzLmxlbmd0aDtqKyspaFtqKzFdPWkodGhpcy5hcmdzW2pdKShkLGUpO3JldHVybiBmLmFwcGx5KGcsaCl9fTt2YXIgcj17IisiOmZ1bmN0aW9uKGEpe3JldHVybithfSwiLSI6ZnVuY3Rpb24oYSl7cmV0dXJuLWF9LCIhIjpmdW5jdGlvbihhKXtyZXR1cm4hYX19LHM9eyIrIjpmdW5jdGlvbihhLGIpe3JldHVybiBhK2J9LCItIjpmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LCIqIjpmdW5jdGlvbihhLGIpe3JldHVybiBhKmJ9LCIvIjpmdW5jdGlvbihhLGIpe3JldHVybiBhL2J9LCIlIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJWJ9LCI8IjpmdW5jdGlvbihhLGIpe3JldHVybiBiPmF9LCI+IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPmJ9LCI8PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj49YX0sIj49IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPj1ifSwiPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PWJ9LCIhPSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9Yn0sIj09PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9LCIhPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPT1ifSwiJiYiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmJ9LCJ8fCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn19O2oucHJvdG90eXBlPXtjcmVhdGVVbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXtpZighclthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj1pKGIpLGZ1bmN0aW9uKGMsZCl7cmV0dXJuIHJbYV0oYihjLGQpKX19LGNyZWF0ZUJpbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiLGMpe2lmKCFzW2FdKXRocm93IEVycm9yKCJEaXNhbGxvd2VkIG9wZXJhdG9yOiAiK2EpO3JldHVybiBiPWkoYiksYz1pKGMpLGZ1bmN0aW9uKGQsZSl7cmV0dXJuIHNbYV0oYihkLGUpLGMoZCxlKSl9fSxjcmVhdGVDb25kaXRpb25hbEV4cHJlc3Npb246ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhPWkoYSksYj1pKGIpLGM9aShjKSxmdW5jdGlvbihkLGUpe3JldHVybiBhKGQsZSk/YihkLGUpOmMoZCxlKX19LGNyZWF0ZUlkZW50aWZpZXI6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGUoYSk7cmV0dXJuIGIudHlwZT0iSWRlbnRpZmllciIsYn0sY3JlYXRlTWVtYmVyRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9bmV3IGYoYixjLGEpO3JldHVybiBkLmR5bmFtaWNEZXBzJiYodGhpcy5keW5hbWljRGVwcz0hMCksZH0sY3JlYXRlTGl0ZXJhbDpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGQoYS52YWx1ZSl9LGNyZWF0ZUFycmF5RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdPWkoYVtiXSk7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Zm9yKHZhciBkPVtdLGU9MDtlPGEubGVuZ3RoO2UrKylkLnB1c2goYVtlXShiLGMpKTtyZXR1cm4gZH19LGNyZWF0ZVByb3BlcnR5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm57a2V5OmIgaW5zdGFuY2VvZiBlP2IubmFtZTpiLnZhbHVlLHZhbHVlOmN9fSxjcmVhdGVPYmplY3RFeHByZXNzaW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udmFsdWU9aShhW2JdLnZhbHVlKTtyZXR1cm4gZnVuY3Rpb24oYixjKXtmb3IodmFyIGQ9e30sZT0wO2U8YS5sZW5ndGg7ZSsrKWRbYVtlXS5rZXldPWFbZV0udmFsdWUoYixjKTtyZXR1cm4gZH19LGNyZWF0ZUZpbHRlcjpmdW5jdGlvbihhLGIpe3RoaXMuZmlsdGVycy5wdXNoKG5ldyBnKGEsYikpfSxjcmVhdGVBc0V4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXt0aGlzLmV4cHJlc3Npb249YSx0aGlzLnNjb3BlSWRlbnQ9Yn0sY3JlYXRlSW5FeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmV4cHJlc3Npb249Yyx0aGlzLnNjb3BlSWRlbnQ9YSx0aGlzLmluZGV4SWRlbnQ9Yn0sY3JlYXRlVG9wTGV2ZWw6ZnVuY3Rpb24oYSl7dGhpcy5leHByZXNzaW9uPWF9LGNyZWF0ZVRoaXNFeHByZXNzaW9uOmh9LGsucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVffSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlX30sZGVsaXZlcjpmdW5jdGlvbigpe30sY2xvc2U6ZnVuY3Rpb24oKXt9fSxsLnByb3RvdHlwZT17Z2V0QmluZGluZzpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe2cuZHluYW1pY0RlcHMmJmYuc3RhcnRSZXNldCgpO3ZhciBjPWcuZ2V0VmFsdWUoYSxnLmR5bmFtaWNEZXBzP2Y6dm9pZCAwLGIpO3JldHVybiBnLmR5bmFtaWNEZXBzJiZmLmZpbmlzaFJlc2V0KCksY31mdW5jdGlvbiBlKGMpe3JldHVybiBnLnNldFZhbHVlKGEsYyxiKSxjfWlmKGMpcmV0dXJuIHRoaXMuZ2V0VmFsdWUoYSx2b2lkIDAsYik7dmFyIGY9bmV3IENvbXBvdW5kT2JzZXJ2ZXI7dGhpcy5nZXRWYWx1ZShhLGYsYik7dmFyIGc9dGhpcztyZXR1cm4gbmV3IE9ic2VydmVyVHJhbnNmb3JtKGYsZCxlLCEwKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1pKHRoaXMuZXhwcmVzc2lvbikoYSxiKSxlPTA7ZTx0aGlzLmZpbHRlcnMubGVuZ3RoO2UrKylkPXRoaXMuZmlsdGVyc1tlXS50cmFuc2Zvcm0oZCwhMSxjLGEsYik7cmV0dXJuIGR9LHNldFZhbHVlOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9dGhpcy5maWx0ZXJzP3RoaXMuZmlsdGVycy5sZW5ndGg6MDtkLS0+MDspYj10aGlzLmZpbHRlcnNbZF0udHJhbnNmb3JtKGIsITAsYyxhKTtyZXR1cm4gdGhpcy5leHByZXNzaW9uLnNldFZhbHVlP3RoaXMuZXhwcmVzc2lvbi5zZXRWYWx1ZShhLGIpOnZvaWQgMH19LHAucHJvdG90eXBlPXtzdHlsZU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSliLnB1c2gobShjKSsiOiAiK2FbY10pO3JldHVybiBiLmpvaW4oIjsgIil9LHRva2VuTGlzdDpmdW5jdGlvbihhKXt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSlhW2NdJiZiLnB1c2goYyk7cmV0dXJuIGIuam9pbigiICIpfSxwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wb2x5bWVyRXhwcmVzc2lvbkluZGV4SWRlbnRfO3JldHVybiBiP2Z1bmN0aW9uKGEsYyl7YS5tb2RlbFtiXT1jfTp2b2lkIDB9LHByZXBhcmVCaW5kaW5nOmZ1bmN0aW9uKGEsYyxkKXtpZihuKGMpKXt2YXIgZT1QYXRoLmdldChhKTtyZXR1cm4gZS52YWxpZD9vKGUsYyk6dm9pZCBjb25zb2xlLmVycm9yKCJvbi0qIGJpbmRpbmdzIG11c3QgYmUgc2ltcGxlIHBhdGggZXhwcmVzc2lvbnMiKX1yZXR1cm4gUGF0aC5nZXQoYSkudmFsaWQ/dm9pZCAwOmIoYSxjLGQsdGhpcyl9LHByZXBhcmVJbnN0YW5jZU1vZGVsOmZ1bmN0aW9uKGEpe3ZhciBiPWEucG9seW1lckV4cHJlc3Npb25TY29wZUlkZW50XztpZihiKXt2YXIgYz1hLnRlbXBsYXRlSW5zdGFuY2U/YS50ZW1wbGF0ZUluc3RhbmNlLm1vZGVsOmEubW9kZWw7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBkPU9iamVjdC5jcmVhdGUoYyk7cmV0dXJuIGRbYl09YSxkfX19fSxhLlBvbHltZXJFeHByZXNzaW9ucz1wLGEuZXhwb3NlR2V0RXhwcmVzc2lvbiYmKGEuZ2V0RXhwcmVzc2lvbl89Yyl9KHRoaXMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtlfHwoZT0hMCxhLmVuZE9mTWljcm90YXNrKGZ1bmN0aW9uKCl7ZT0hMSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwKCJQbGF0Zm9ybS5mbHVzaCgpIiksYS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXBFbmQoKX0pKX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2MudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2QuaW5zZXJ0QmVmb3JlKGMsZC5maXJzdENoaWxkKTt2YXIgZSxmPTEyNTtpZih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiV2ViQ29tcG9uZW50c1JlYWR5IixmdW5jdGlvbigpe2IoKSxPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlfHwoYS5mbHVzaFBvbGw9c2V0SW50ZXJ2YWwoYixmKSl9KSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMmJiFDdXN0b21FbGVtZW50cy51c2VOYXRpdmUpe3ZhciBnPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlO0RvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Zy5jYWxsKHRoaXMsYSxiKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChjKSxjfX1hLmZsdXNoPWJ9KHdpbmRvdy5QbGF0Zm9ybSk7",
                "body": "ZnVuY3Rpb24gUG9pbnRlckdlc3R1cmVFdmVudChhLGIpe3ZhciBjPWJ8fHt9LGQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50IiksZT17YnViYmxlczpCb29sZWFuKGMuYnViYmxlcyk9PT1jLmJ1YmJsZXN8fCEwLGNhbmNlbGFibGU6Qm9vbGVhbihjLmNhbmNlbGFibGUpPT09Yy5jYW5jZWxhYmxlfHwhMH07ZC5pbml0RXZlbnQoYSxlLmJ1YmJsZXMsZS5jYW5jZWxhYmxlKTtmb3IodmFyIGYsZz1PYmplY3Qua2V5cyhjKSxoPTA7aDxnLmxlbmd0aDtoKyspZj1nW2hdLGRbZl09Y1tmXTtyZXR1cm4gZC5wcmV2ZW50VGFwPXRoaXMucHJldmVudFRhcCxkfSJ1bmRlZmluZWQiPT10eXBlb2YgV2Vha01hcCYmIWZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9RGF0ZS5ub3coKSUxZTksYz1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGIrKyArIl9fIil9O2MucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYixjKXt2YXIgZD1iW3RoaXMubmFtZV07ZCYmZFswXT09PWI/ZFsxXT1jOmEoYix0aGlzLm5hbWUse3ZhbHVlOltiLGNdLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4oYj1hW3RoaXMubmFtZV0pJiZiWzBdPT09YT9iWzFdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX0sd2luZG93LldlYWtNYXA9Y30oKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe2Z1bmN0aW9uIGEoYSl7Yj1hfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiBPYmplY3Qub2JzZXJ2ZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIEFycmF5Lm9ic2VydmUpcmV0dXJuITE7dmFyIGI9W10sYz17fTtpZihPYmplY3Qub2JzZXJ2ZShjLGEpLGMuaWQ9MSxjLmlkPTIsZGVsZXRlIGMuaWQsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLDMhPT1iLmxlbmd0aClyZXR1cm4hMTtpZigibmV3Ij09YlswXS50eXBlJiYidXBkYXRlZCI9PWJbMV0udHlwZSYmImRlbGV0ZWQiPT1iWzJdLnR5cGUpTD0ibmV3IixNPSJ1cGRhdGVkIixOPSJyZWNvbmZpZ3VyZWQiLE89ImRlbGV0ZWQiO2Vsc2UgaWYoImFkZCIhPWJbMF0udHlwZXx8InVwZGF0ZSIhPWJbMV0udHlwZXx8ImRlbGV0ZSIhPWJbMl0udHlwZSlyZXR1cm4gY29uc29sZS5lcnJvcigiVW5leHBlY3RlZCBjaGFuZ2UgcmVjb3JkIG5hbWVzIGZvciBPYmplY3Qub2JzZXJ2ZS4gVXNpbmcgZGlydHktY2hlY2tpbmcgaW5zdGVhZCIpLCExO3JldHVybiBPYmplY3QudW5vYnNlcnZlKGMsYSksYz1bMF0sQXJyYXkub2JzZXJ2ZShjLGEpLGNbMV09MSxjLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSwyIT1iLmxlbmd0aD8hMTpiWzBdLnR5cGUhPVB8fGJbMV0udHlwZSE9UD8hMTooQXJyYXkudW5vYnNlcnZlKGMsYSksITApfWZ1bmN0aW9uIGMoKXtpZihhLmRvY3VtZW50JiYic2VjdXJpdHlQb2xpY3kiaW4gYS5kb2N1bWVudCYmIWEuZG9jdW1lbnQuc2VjdXJpdHlQb2xpY3kuYWxsb3dzRXZhbClyZXR1cm4hMTt0cnl7dmFyIGI9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtyZXR1cm4gYigpfWNhdGNoKGMpe3JldHVybiExfX1mdW5jdGlvbiBkKGEpe3JldHVybithPT09YT4+PjB9ZnVuY3Rpb24gZShhKXtyZXR1cm4rYX1mdW5jdGlvbiBmKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYT09PWI/MCE9PWF8fDEvYT09PTEvYjpTKGEpJiZTKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBoKGEpe3JldHVybiJzdHJpbmciIT10eXBlb2YgYT8hMTooYT1hLnRyaW0oKSwiIj09YT8hMDoiLiI9PWFbMF0/ITE6JC50ZXN0KGEpKX1mdW5jdGlvbiBpKGEsYil7aWYoYiE9PV8pdGhyb3cgRXJyb3IoIlVzZSBQYXRoLmdldCB0byByZXRyaWV2ZSBwYXRoIG9iamVjdHMiKTtyZXR1cm4iIj09YS50cmltKCk/dGhpczpkKGEpPyh0aGlzLnB1c2goYSksdGhpcyk6KGEuc3BsaXQoL1xzKlwuXHMqLykuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhfSkuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnB1c2goYSl9LHRoaXMpLHZvaWQoUiYmdGhpcy5sZW5ndGgmJih0aGlzLmdldFZhbHVlRnJvbT10aGlzLmNvbXBpbGVkR2V0VmFsdWVGcm9tRm4oKSkpKX1mdW5jdGlvbiBqKGEpe2lmKGEgaW5zdGFuY2VvZiBpKXJldHVybiBhO251bGw9PWEmJihhPSIiKSwic3RyaW5nIiE9dHlwZW9mIGEmJihhPVN0cmluZyhhKSk7dmFyIGI9YWJbYV07aWYoYilyZXR1cm4gYjtpZighaChhKSlyZXR1cm4gYmI7dmFyIGI9bmV3IGkoYSxfKTtyZXR1cm4gYWJbYV09YixifWZ1bmN0aW9uIGsoYil7Zm9yKHZhciBjPTA7ZGI+YyYmYi5jaGVja18oKTspYysrO3JldHVybiBhLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50JiYoYS5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1jKSxjPjB9ZnVuY3Rpb24gbChhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBtKGEpe3JldHVybiBsKGEuYWRkZWQpJiZsKGEucmVtb3ZlZCkmJmwoYS5jaGFuZ2VkKX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9e30sZD17fSxlPXt9O2Zvcih2YXIgZiBpbiBiKXt2YXIgZz1hW2ZdOyh2b2lkIDA9PT1nfHxnIT09YltmXSkmJihmIGluIGE/ZyE9PWJbZl0mJihlW2ZdPWcpOmRbZl09dm9pZCAwKX1mb3IodmFyIGYgaW4gYSlmIGluIGJ8fChjW2ZdPWFbZl0pO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiZhLmxlbmd0aCE9PWIubGVuZ3RoJiYoZS5sZW5ndGg9YS5sZW5ndGgpLHthZGRlZDpjLHJlbW92ZWQ6ZCxjaGFuZ2VkOmV9fWZ1bmN0aW9uIG8oKXtpZighZWIubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYT0wO2E8ZWIubGVuZ3RoO2ErKyllYlthXSgpO3JldHVybiBlYi5sZW5ndGg9MCwhMH1mdW5jdGlvbiBwKCl7ZnVuY3Rpb24gYShhKXtiJiZiLnN0YXRlXz09PWtiJiYhZCYmYi5jaGVja18oYSl9dmFyIGIsYyxkPSExLGU9ITA7cmV0dXJue29wZW46ZnVuY3Rpb24oYyl7aWYoYil0aHJvdyBFcnJvcigiT2JzZXJ2ZWRPYmplY3QgaW4gdXNlIik7ZXx8T2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGI9YyxlPSExfSxvYnNlcnZlOmZ1bmN0aW9uKGIsZCl7Yz1iLGQ/QXJyYXkub2JzZXJ2ZShjLGEpOk9iamVjdC5vYnNlcnZlKGMsYSl9LGRlbGl2ZXI6ZnVuY3Rpb24oYil7ZD1iLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxkPSExfSxjbG9zZTpmdW5jdGlvbigpe2I9dm9pZCAwLE9iamVjdC51bm9ic2VydmUoYyxhKSxnYi5wdXNoKHRoaXMpfX19ZnVuY3Rpb24gcShhLGIsYyl7dmFyIGQ9Z2IucG9wKCl8fHAoKTtyZXR1cm4gZC5vcGVuKGEpLGQub2JzZXJ2ZShiLGMpLGR9ZnVuY3Rpb24gcigpe2Z1bmN0aW9uIGEoYil7aWYoZihiKSl7dmFyIGM9aS5pbmRleE9mKGIpO2M+PTA/KGlbY109dm9pZCAwLGgucHVzaChiKSk6aC5pbmRleE9mKGIpPDAmJihoLnB1c2goYiksT2JqZWN0Lm9ic2VydmUoYixkKSksYShPYmplY3QuZ2V0UHJvdG90eXBlT2YoYikpfX1mdW5jdGlvbiBiKCl7aWYoaz0hMSxqKXt2YXIgYj1pPT09aGI/W106aTtpPWgsaD1iO3ZhciBjO2Zvcih2YXIgZiBpbiBlKWM9ZVtmXSxjJiZjLnN0YXRlXz09a2ImJmMuaXRlcmF0ZU9iamVjdHNfKGEpO2Zvcih2YXIgZz0wO2c8aS5sZW5ndGg7ZysrKXt2YXIgbD1pW2ddO2wmJk9iamVjdC51bm9ic2VydmUobCxkKX1pLmxlbmd0aD0wfX1mdW5jdGlvbiBjKCl7a3x8KGo9ITAsaz0hMCxmYihiKSl9ZnVuY3Rpb24gZCgpe3ZhciBhO2Zvcih2YXIgYiBpbiBlKWE9ZVtiXSxhJiZhLnN0YXRlXz09a2ImJmEuY2hlY2tfKCk7YygpfXZhciBlPVtdLGc9MCxoPVtdLGk9aGIsaj0hMSxrPSExLGw9e29iamVjdDp2b2lkIDAsb2JqZWN0czpoLG9wZW46ZnVuY3Rpb24oYil7ZVtiLmlkX109YixnKyssYi5pdGVyYXRlT2JqZWN0c18oYSl9LGNsb3NlOmZ1bmN0aW9uKGEpe2lmKGVbYS5pZF9dPXZvaWQgMCxnLS0sZylyZXR1cm4gdm9pZCBjKCk7aj0hMTtmb3IodmFyIGI9MDtiPGgubGVuZ3RoO2IrKylPYmplY3QudW5vYnNlcnZlKGhbYl0sZCksdC51bm9ic2VydmVkQ291bnQrKztlLmxlbmd0aD0wLGgubGVuZ3RoPTAsaWIucHVzaCh0aGlzKX0scmVzZXQ6Y307cmV0dXJuIGx9ZnVuY3Rpb24gcyhhLGIpe3JldHVybiBjYiYmY2Iub2JqZWN0PT09Ynx8KGNiPWliLnBvcCgpfHxyKCksY2Iub2JqZWN0PWIpLGNiLm9wZW4oYSksY2J9ZnVuY3Rpb24gdCgpe3RoaXMuc3RhdGVfPWpiLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5pZF89bmIrK31mdW5jdGlvbiB1KGEpe3QuX2FsbE9ic2VydmVyc0NvdW50KysscGImJm9iLnB1c2goYSl9ZnVuY3Rpb24gdigpe3QuX2FsbE9ic2VydmVyc0NvdW50LS19ZnVuY3Rpb24gdyhhKXt0LmNhbGwodGhpcyksdGhpcy52YWx1ZV89YSx0aGlzLm9sZE9iamVjdF89dm9pZCAwfWZ1bmN0aW9uIHgoYSl7aWYoIUFycmF5LmlzQXJyYXkoYSkpdGhyb3cgRXJyb3IoIlByb3ZpZGVkIG9iamVjdCBpcyBub3QgYW4gQXJyYXkiKTt3LmNhbGwodGhpcyxhKX1mdW5jdGlvbiB5KGEsYil7dC5jYWxsKHRoaXMpLHRoaXMub2JqZWN0Xz1hLHRoaXMucGF0aF89YiBpbnN0YW5jZW9mIGk/YjpqKGIpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMH1mdW5jdGlvbiB6KCl7dC5jYWxsKHRoaXMpLHRoaXMudmFsdWVfPVtdLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCx0aGlzLm9ic2VydmVkXz1bXX1mdW5jdGlvbiBBKGEpe3JldHVybiBhfWZ1bmN0aW9uIEIoYSxiLGMsZCl7dGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89YSx0aGlzLmdldFZhbHVlRm5fPWJ8fEEsdGhpcy5zZXRWYWx1ZUZuXz1jfHxBLHRoaXMuZG9udFBhc3NUaHJvdWdoU2V0Xz1kfWZ1bmN0aW9uIEMoYSxiKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0Lm9ic2VydmUpe3ZhciBjPU9iamVjdC5nZXROb3RpZmllcihhKTtyZXR1cm4gZnVuY3Rpb24oZCxlKXt2YXIgZj17b2JqZWN0OmEsdHlwZTpkLG5hbWU6Yn07Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihmLm9sZFZhbHVlPWUpLGMubm90aWZ5KGYpfX19ZnVuY3Rpb24gRChhLGIsYyl7Zm9yKHZhciBkPXt9LGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO3RiW2cudHlwZV0/KGcubmFtZSBpbiBjfHwoY1tnLm5hbWVdPWcub2xkVmFsdWUpLGcudHlwZSE9TSYmKGcudHlwZSE9TD9nLm5hbWUgaW4gZD8oZGVsZXRlIGRbZy5uYW1lXSxkZWxldGUgY1tnLm5hbWVdKTplW2cubmFtZV09ITA6Zy5uYW1lIGluIGU/ZGVsZXRlIGVbZy5uYW1lXTpkW2cubmFtZV09ITApKTooY29uc29sZS5lcnJvcigiVW5rbm93biBjaGFuZ2VSZWNvcmQgdHlwZTogIitnLnR5cGUpLGNvbnNvbGUuZXJyb3IoZykpfWZvcih2YXIgaCBpbiBkKWRbaF09YVtoXTtmb3IodmFyIGggaW4gZSllW2hdPXZvaWQgMDt2YXIgaT17fTtmb3IodmFyIGggaW4gYylpZighKGggaW4gZHx8aCBpbiBlKSl7dmFyIGo9YVtoXTtjW2hdIT09aiYmKGlbaF09ail9cmV0dXJue2FkZGVkOmQscmVtb3ZlZDplLGNoYW5nZWQ6aX19ZnVuY3Rpb24gRShhLGIsYyl7cmV0dXJue2luZGV4OmEscmVtb3ZlZDpiLGFkZGVkQ291bnQ6Y319ZnVuY3Rpb24gRigpe31mdW5jdGlvbiBHKGEsYixjLGQsZSxmKXtyZXR1cm4geWIuY2FsY1NwbGljZXMoYSxiLGMsZCxlLGYpfWZ1bmN0aW9uIEgoYSxiLGMsZCl7cmV0dXJuIGM+Ynx8YT5kPy0xOmI9PWN8fGQ9PWE/MDpjPmE/ZD5iP2ItYzpkLWM6Yj5kP2QtYTpiLWF9ZnVuY3Rpb24gSShhLGIsYyxkKXtmb3IodmFyIGU9RShiLGMsZCksZj0hMSxnPTAsaD0wO2g8YS5sZW5ndGg7aCsrKXt2YXIgaT1hW2hdO2lmKGkuaW5kZXgrPWcsIWYpe3ZhciBqPUgoZS5pbmRleCxlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGgsaS5pbmRleCxpLmluZGV4K2kuYWRkZWRDb3VudCk7aWYoaj49MCl7YS5zcGxpY2UoaCwxKSxoLS0sZy09aS5hZGRlZENvdW50LWkucmVtb3ZlZC5sZW5ndGgsZS5hZGRlZENvdW50Kz1pLmFkZGVkQ291bnQtajt2YXIgaz1lLnJlbW92ZWQubGVuZ3RoK2kucmVtb3ZlZC5sZW5ndGgtajtpZihlLmFkZGVkQ291bnR8fGspe3ZhciBjPWkucmVtb3ZlZDtpZihlLmluZGV4PGkuaW5kZXgpe3ZhciBsPWUucmVtb3ZlZC5zbGljZSgwLGkuaW5kZXgtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobCxjKSxjPWx9aWYoZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoPmkuaW5kZXgraS5hZGRlZENvdW50KXt2YXIgbT1lLnJlbW92ZWQuc2xpY2UoaS5pbmRleCtpLmFkZGVkQ291bnQtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYyxtKX1lLnJlbW92ZWQ9YyxpLmluZGV4PGUuaW5kZXgmJihlLmluZGV4PWkuaW5kZXgpfWVsc2UgZj0hMH1lbHNlIGlmKGUuaW5kZXg8aS5pbmRleCl7Zj0hMCxhLnNwbGljZShoLDAsZSksaCsrO3ZhciBuPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RoO2kuaW5kZXgrPW4sZys9bn19fWZ8fGEucHVzaChlKX1mdW5jdGlvbiBKKGEsYil7Zm9yKHZhciBjPVtdLGY9MDtmPGIubGVuZ3RoO2YrKyl7dmFyIGc9YltmXTtzd2l0Y2goZy50eXBlKXtjYXNlIFA6SShjLGcuaW5kZXgsZy5yZW1vdmVkLnNsaWNlKCksZy5hZGRlZENvdW50KTticmVhaztjYXNlIEw6Y2FzZSBNOmNhc2UgTzppZighZChnLm5hbWUpKWNvbnRpbnVlO3ZhciBoPWUoZy5uYW1lKTtpZigwPmgpY29udGludWU7SShjLGgsW2cub2xkVmFsdWVdLDEpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiVW5leHBlY3RlZCByZWNvcmQgdHlwZTogIitKU09OLnN0cmluZ2lmeShnKSl9fXJldHVybiBjfWZ1bmN0aW9uIEsoYSxiKXt2YXIgYz1bXTtyZXR1cm4gSihhLGIpLmZvckVhY2goZnVuY3Rpb24oYil7cmV0dXJuIDE9PWIuYWRkZWRDb3VudCYmMT09Yi5yZW1vdmVkLmxlbmd0aD92b2lkKGIucmVtb3ZlZFswXSE9PWFbYi5pbmRleF0mJmMucHVzaChiKSk6dm9pZChjPWMuY29uY2F0KEcoYSxiLmluZGV4LGIuaW5kZXgrYi5hZGRlZENvdW50LGIucmVtb3ZlZCwwLGIucmVtb3ZlZC5sZW5ndGgpKSl9KSxjfXZhciBMPSJhZGQiLE09InVwZGF0ZSIsTj0icmVjb25maWd1cmUiLE89ImRlbGV0ZSIsUD0ic3BsaWNlIixRPWIoKSxSPWMoKSxTPWEuTnVtYmVyLmlzTmFOfHxmdW5jdGlvbihiKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGImJmEuaXNOYU4oYil9LFQ9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LFU9IlskX2EtekEtWl0iLFY9IlskX2EtekEtWjAtOV0iLFc9VSsiKyIrVisiKiIsWD0iKD86WzAtOV18WzEtOV0rWzAtOV0rKSIsWT0iKD86IitXKyJ8IitYKyIpIixaPSIoPzoiK1krIikoPzpcXHMqXFwuXFxzKiIrWSsiKSoiLCQ9bmV3IFJlZ0V4cCgiXiIrWisiJCIpLF89e30sYWI9e307aS5nZXQ9aixpLnByb3RvdHlwZT1UKHtfX3Byb3RvX186W10sdmFsaWQ6ITAsdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qb2luKCIuIil9LGdldFZhbHVlRnJvbTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7aWYobnVsbD09YSlyZXR1cm47YT1hW3RoaXNbYl1dfXJldHVybiBhfSxpdGVyYXRlT2JqZWN0czpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGg7YysrKXtpZihjJiYoYT1hW3RoaXNbYy0xXV0pLCFhKXJldHVybjtiKGEpfX0sY29tcGlsZWRHZXRWYWx1ZUZyb21GbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBkKGEpPydbIicrYSsnIl0nOiIuIithfSksYj0iIixjPSJvYmoiO2IrPSJpZiAob2JqICE9IG51bGwiO2Zvcih2YXIgZT0wO2U8dGhpcy5sZW5ndGgtMTtlKyspdGhpc1tlXSxjKz1hW2VdLGIrPSIgJiZcbiAgICAgIitjKyIgIT0gbnVsbCI7cmV0dXJuIGIrPSIpXG4iLGMrPWFbZV0sYis9IiAgcmV0dXJuICIrYysiO1xuZWxzZVxuICByZXR1cm4gdW5kZWZpbmVkOyIsbmV3IEZ1bmN0aW9uKCJvYmoiLGIpfSxzZXRWYWx1ZUZyb206ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aC0xO2MrKyl7aWYoIWYoYSkpcmV0dXJuITE7YT1hW3RoaXNbY11dfXJldHVybiBmKGEpPyhhW3RoaXNbY11dPWIsITApOiExfX0pO3ZhciBiYj1uZXcgaSgiIixfKTtiYi52YWxpZD0hMSxiYi5nZXRWYWx1ZUZyb209YmIuc2V0VmFsdWVGcm9tPWZ1bmN0aW9uKCl7fTt2YXIgY2IsZGI9MWUzLGViPVtdLGZiPVE/ZnVuY3Rpb24oKXt2YXIgYT17cGluZ1Bvbmc6ITB9LGI9ITE7cmV0dXJuIE9iamVjdC5vYnNlcnZlKGEsZnVuY3Rpb24oKXtvKCksYj0hMX0pLGZ1bmN0aW9uKGMpe2ViLnB1c2goYyksYnx8KGI9ITAsYS5waW5nUG9uZz0hYS5waW5nUG9uZyl9fSgpOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEpe2ViLnB1c2goYSl9fSgpLGdiPVtdLGhiPVtdLGliPVtdLGpiPTAsa2I9MSxsYj0yLG1iPTMsbmI9MTt0LnByb3RvdHlwZT17b3BlbjpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc3RhdGVfIT1qYil0aHJvdyBFcnJvcigiT2JzZXJ2ZXIgaGFzIGFscmVhZHkgYmVlbiBvcGVuZWQuIik7cmV0dXJuIHUodGhpcyksdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLnN0YXRlXz1rYix0aGlzLmNvbm5lY3RfKCksdGhpcy52YWx1ZV99LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZV89PWtiJiYodih0aGlzKSx0aGlzLnN0YXRlXz1sYix0aGlzLmRpc2Nvbm5lY3RfKCksdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwKX0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1rYiYmayh0aGlzKX0scmVwb3J0XzpmdW5jdGlvbihhKXt0cnl7dGhpcy5jYWxsYmFja18uYXBwbHkodGhpcy50YXJnZXRfLGEpfWNhdGNoKGIpe3QuX2Vycm9yVGhyb3duRHVyaW5nQ2FsbGJhY2s9ITAsY29uc29sZS5lcnJvcigiRXhjZXB0aW9uIGNhdWdodCBkdXJpbmcgb2JzZXJ2ZXIgY2FsbGJhY2s6ICIrKGIuc3RhY2t8fGIpKX19LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hlY2tfKHZvaWQgMCwhMCksdGhpcy52YWx1ZV99fTt2YXIgb2IscGI9IVE7dC5fYWxsT2JzZXJ2ZXJzQ291bnQ9MCxwYiYmKG9iPVtdKTt2YXIgcWI9ITEscmI9ImZ1bmN0aW9uIj09dHlwZW9mIE9iamVjdC5kZWxpdmVyQWxsQ2hhbmdlUmVjb3JkczthLlBsYXRmb3JtPWEuUGxhdGZvcm18fHt9LGEuUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQ9ZnVuY3Rpb24oKXtpZighcWIpe2lmKHJiKXJldHVybiB2b2lkIE9iamVjdC5kZWxpdmVyQWxsQ2hhbmdlUmVjb3JkcygpO2lmKHBiKXtxYj0hMDt2YXIgYixjLGQ9MDtkb3tkKyssYz1vYixvYj1bXSxiPSExO2Zvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKXt2YXIgZj1jW2VdO2Yuc3RhdGVfPT1rYiYmKGYuY2hlY2tfKCkmJihiPSEwKSxvYi5wdXNoKGYpKX1vKCkmJihiPSEwKX13aGlsZShkYj5kJiZiKTthLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50JiYoYS5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1kKSxxYj0hMX19fSxwYiYmKGEuUGxhdGZvcm0uY2xlYXJPYnNlcnZlcnM9ZnVuY3Rpb24oKXtvYj1bXX0pLHcucHJvdG90eXBlPVQoe19fcHJvdG9fXzp0LnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITEsY29ubmVjdF86ZnVuY3Rpb24oKXtRP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfPXEodGhpcyx0aGlzLnZhbHVlXyx0aGlzLmFycmF5T2JzZXJ2ZSk6dGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXyl9LGNvcHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkuaXNBcnJheShhKT9bXTp7fTtmb3IodmFyIGMgaW4gYSliW2NdPWFbY107cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJihiLmxlbmd0aD1hLmxlbmd0aCksYn0sY2hlY2tfOmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoUSl7aWYoIWEpcmV0dXJuITE7Yz17fSxiPUQodGhpcy52YWx1ZV8sYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3RfLGI9bih0aGlzLnZhbHVlXyx0aGlzLm9sZE9iamVjdF8pO3JldHVybiBtKGIpPyExOihRfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYi5hZGRlZHx8e30sYi5yZW1vdmVkfHx7fSxiLmNoYW5nZWR8fHt9LGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfV0pLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXtRPyh0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSgpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCk6dGhpcy5vbGRPYmplY3RfPXZvaWQgMH0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1rYiYmKFE/dGhpcy5kaXJlY3RPYnNlcnZlcl8uZGVsaXZlcighMSk6ayh0aGlzKSl9LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyZWN0T2JzZXJ2ZXJfP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITApOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pLHRoaXMudmFsdWVffX0pLHgucHJvdG90eXBlPVQoe19fcHJvdG9fXzp3LnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITAsY29weU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZSgpfSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGI7aWYoUSl7aWYoIWEpcmV0dXJuITE7Yj1LKHRoaXMudmFsdWVfLGEpfWVsc2UgYj1HKHRoaXMudmFsdWVfLDAsdGhpcy52YWx1ZV8ubGVuZ3RoLHRoaXMub2xkT2JqZWN0XywwLHRoaXMub2xkT2JqZWN0Xy5sZW5ndGgpO3JldHVybiBiJiZiLmxlbmd0aD8oUXx8KHRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pKSx0aGlzLnJlcG9ydF8oW2JdKSwhMCk6ITF9fSkseC5hcHBseVNwbGljZXM9ZnVuY3Rpb24oYSxiLGMpe2MuZm9yRWFjaChmdW5jdGlvbihjKXtmb3IodmFyIGQ9W2MuaW5kZXgsYy5yZW1vdmVkLmxlbmd0aF0sZT1jLmluZGV4O2U8Yy5pbmRleCtjLmFkZGVkQ291bnQ7KWQucHVzaChiW2VdKSxlKys7QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhLGQpfSl9LHkucHJvdG90eXBlPVQoe19fcHJvdG9fXzp0LnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe1EmJih0aGlzLmRpcmVjdE9ic2VydmVyXz1zKHRoaXMsdGhpcy5vYmplY3RfKSksdGhpcy5jaGVja18odm9pZCAwLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXt0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXy5pdGVyYXRlT2JqZWN0cyh0aGlzLm9iamVjdF8sYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMudmFsdWVfO3JldHVybiB0aGlzLnZhbHVlXz10aGlzLnBhdGhfLmdldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8pLGJ8fGcodGhpcy52YWx1ZV8sYyk/ITE6KHRoaXMucmVwb3J0XyhbdGhpcy52YWx1ZV8sY10pLCEwKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXyYmdGhpcy5wYXRoXy5zZXRWYWx1ZUZyb20odGhpcy5vYmplY3RfLGEpfX0pO3ZhciBzYj17fTt6LnByb3RvdHlwZT1UKHtfX3Byb3RvX186dC5wcm90b3R5cGUsY29ubmVjdF86ZnVuY3Rpb24oKXtpZih0aGlzLmNoZWNrXyh2b2lkIDAsITApLFEpe2Zvcih2YXIgYSxiPSExLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWlmKGE9dGhpcy5vYnNlcnZlZF9bY10sYSE9PXNiKXtiPSEwO2JyZWFrfXJldHVybiB0aGlzLmRpcmVjdE9ic2VydmVyXz9iP3ZvaWQgdGhpcy5kaXJlY3RPYnNlcnZlcl8ucmVzZXQoKToodGhpcy5kaXJlY3RPYnNlcnZlcl8uY2xvc2UoKSx2b2lkKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCkpOnZvaWQoYiYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXModGhpcyxhKSkpfX0sY2xvc2VPYnNlcnZlcnNfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLm9ic2VydmVkXy5sZW5ndGg7YSs9Mil0aGlzLm9ic2VydmVkX1thXT09PXNiJiZ0aGlzLm9ic2VydmVkX1thKzFdLmNsb3NlKCk7dGhpcy5vYnNlcnZlZF8ubGVuZ3RoPTB9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7dGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfJiYodGhpcy5kaXJlY3RPYnNlcnZlcl8uY2xvc2UodGhpcyksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwKSx0aGlzLmNsb3NlT2JzZXJ2ZXJzXygpfSxhZGRQYXRoOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPWpiJiZ0aGlzLnN0YXRlXyE9bWIpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgcGF0aHMgb25jZSBzdGFydGVkLiIpO3RoaXMub2JzZXJ2ZWRfLnB1c2goYSxiIGluc3RhbmNlb2YgaT9iOmooYikpfSxhZGRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXRlXyE9amImJnRoaXMuc3RhdGVfIT1tYil0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBvYnNlcnZlcnMgb25jZSBzdGFydGVkLiIpO2Eub3Blbih0aGlzLmRlbGl2ZXIsdGhpcyksdGhpcy5vYnNlcnZlZF8ucHVzaChzYixhKX0sc3RhcnRSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1rYil0aHJvdyBFcnJvcigiQ2FuIG9ubHkgcmVzZXQgd2hpbGUgb3BlbiIpO3RoaXMuc3RhdGVfPW1iLHRoaXMuY2xvc2VPYnNlcnZlcnNfKCl9LGZpbmlzaFJlc2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5zdGF0ZV8hPW1iKXRocm93IEVycm9yKCJDYW4gb25seSBmaW5pc2hSZXNldCBhZnRlciBzdGFydFJlc2V0Iik7cmV0dXJuIHRoaXMuc3RhdGVfPWtiLHRoaXMuY29ubmVjdF8oKSx0aGlzLnZhbHVlX30saXRlcmF0ZU9iamVjdHNfOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTA7Yzx0aGlzLm9ic2VydmVkXy5sZW5ndGg7Yys9MiliPXRoaXMub2JzZXJ2ZWRfW2NdLGIhPT1zYiYmdGhpcy5vYnNlcnZlZF9bYysxXS5pdGVyYXRlT2JqZWN0cyhiLGEpfSxjaGVja186ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wO2Q8dGhpcy5vYnNlcnZlZF8ubGVuZ3RoO2QrPTIpe3ZhciBlPXRoaXMub2JzZXJ2ZWRfW2QrMV0sZj10aGlzLm9ic2VydmVkX1tkXSxoPWY9PT1zYj9lLmRpc2NhcmRDaGFuZ2VzKCk6ZS5nZXRWYWx1ZUZyb20oZik7Yj90aGlzLnZhbHVlX1tkLzJdPWg6ZyhoLHRoaXMudmFsdWVfW2QvMl0pfHwoYz1jfHxbXSxjW2QvMl09dGhpcy52YWx1ZV9bZC8yXSx0aGlzLnZhbHVlX1tkLzJdPWgpfXJldHVybiBjPyh0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpcy5vYnNlcnZlZF9dKSwhMCk6ITF9fSksQi5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLnZhbHVlXz10aGlzLmdldFZhbHVlRm5fKHRoaXMub2JzZXJ2YWJsZV8ub3Blbih0aGlzLm9ic2VydmVkQ2FsbGJhY2tfLHRoaXMpKSx0aGlzLnZhbHVlX30sb2JzZXJ2ZWRDYWxsYmFja186ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmdldFZhbHVlRm5fKGEpLCFnKGEsdGhpcy52YWx1ZV8pKXt2YXIgYj10aGlzLnZhbHVlXzt0aGlzLnZhbHVlXz1hLHRoaXMuY2FsbGJhY2tfLmNhbGwodGhpcy50YXJnZXRfLHRoaXMudmFsdWVfLGIpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMudmFsdWVffSxkZWxpdmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JzZXJ2YWJsZV8uZGVsaXZlcigpfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLnNldFZhbHVlRm5fKGEpLCF0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF8mJnRoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWU/dGhpcy5vYnNlcnZhYmxlXy5zZXRWYWx1ZShhKTp2b2lkIDB9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZhYmxlXyYmdGhpcy5vYnNlcnZhYmxlXy5jbG9zZSgpLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmdldFZhbHVlRm5fPXZvaWQgMCx0aGlzLnNldFZhbHVlRm5fPXZvaWQgMH19O3ZhciB0Yj17fTt0YltMXT0hMCx0YltNXT0hMCx0YltPXT0hMCx0LmRlZmluZUNvbXB1dGVkUHJvcGVydHk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPUMoYSxiKSxlPWMub3BlbihmdW5jdGlvbihhLGIpe2U9YSxkJiZkKE0sYil9KTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGMuZGVsaXZlcigpLGV9LHNldDpmdW5jdGlvbihhKXtyZXR1cm4gYy5zZXRWYWx1ZShhKSxhfSxjb25maWd1cmFibGU6ITB9KSx7Y2xvc2U6ZnVuY3Rpb24oKXtjLmNsb3NlKCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19fTt2YXIgdWI9MCx2Yj0xLHdiPTIseGI9MztGLnByb3RvdHlwZT17Y2FsY0VkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mLWUrMSxoPWMtYisxLGk9bmV3IEFycmF5KGcpLGo9MDtnPmo7aisrKWlbal09bmV3IEFycmF5KGgpLGlbal1bMF09ajtmb3IodmFyIGs9MDtoPms7aysrKWlbMF1ba109aztmb3IodmFyIGo9MTtnPmo7aisrKWZvcih2YXIgaz0xO2g+aztrKyspaWYodGhpcy5lcXVhbHMoYVtiK2stMV0sZFtlK2otMV0pKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX0sc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaCh1Yik6KGUucHVzaCh2YiksZD1nKSxiLS0sYy0tKTpmPT1oPyhlLnB1c2goeGIpLGItLSxkPWgpOihlLnB1c2god2IpLGMtLSxkPWkpfWVsc2UgZS5wdXNoKHhiKSxiLS07ZWxzZSBlLnB1c2god2IpLGMtLTtyZXR1cm4gZS5yZXZlcnNlKCksZX0sY2FsY1NwbGljZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPTAsaD0wLGk9TWF0aC5taW4oYy1iLGYtZSk7aWYoMD09YiYmMD09ZSYmKGc9dGhpcy5zaGFyZWRQcmVmaXgoYSxkLGkpKSxjPT1hLmxlbmd0aCYmZj09ZC5sZW5ndGgmJihoPXRoaXMuc2hhcmVkU3VmZml4KGEsZCxpLWcpKSxiKz1nLGUrPWcsYy09aCxmLT1oLGMtYj09MCYmZi1lPT0wKXJldHVybltdO2lmKGI9PWMpe2Zvcih2YXIgaj1FKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltFKGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIHViOmomJihsLnB1c2goaiksaj12b2lkIDApLG0rKyxuKys7YnJlYWs7Y2FzZSB2YjpqfHwoaj1FKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSB3YjpqfHwoaj1FKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIHhiOmp8fChqPUUobSxbXSwwKSksai5yZW1vdmVkLnB1c2goZFtuXSksbisrfXJldHVybiBqJiZsLnB1c2goaiksbH0sc2hhcmVkUHJlZml4OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MDtjPmQ7ZCsrKWlmKCF0aGlzLmVxdWFscyhhW2RdLGJbZF0pKXJldHVybiBkO3JldHVybiBjfSxzaGFyZWRTdWZmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPWIubGVuZ3RoLGY9MDtjPmYmJnRoaXMuZXF1YWxzKGFbLS1kXSxiWy0tZV0pOylmKys7cmV0dXJuIGZ9LGNhbGN1bGF0ZVNwbGljZXM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxjU3BsaWNlcyhhLDAsYS5sZW5ndGgsYiwwLGIubGVuZ3RoKX0sZXF1YWxzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifX07dmFyIHliPW5ldyBGO2EuT2JzZXJ2ZXI9dCxhLk9ic2VydmVyLnJ1bkVPTV89ZmIsYS5PYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlPVEsYS5BcnJheU9ic2VydmVyPXgsYS5BcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4geWIuY2FsY3VsYXRlU3BsaWNlcyhhLGIpfSxhLkFycmF5U3BsaWNlPUYsYS5PYmplY3RPYnNlcnZlcj13LGEuUGF0aE9ic2VydmVyPXksYS5Db21wb3VuZE9ic2VydmVyPXosYS5QYXRoPWksYS5PYnNlcnZlclRyYW5zZm9ybT1CLGEuT2JzZXJ2ZXIuY2hhbmdlUmVjb3JkVHlwZXM9e2FkZDpMLHVwZGF0ZTpNLHJlY29uZmlndXJlOk4sImRlbGV0ZSI6TyxzcGxpY2U6UH19KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGU/Z2xvYmFsOnRoaXN8fHdpbmRvdyksd2luZG93LlBsYXRmb3JtPXdpbmRvdy5QbGF0Zm9ybXx8e30sd2luZG93LmxvZ0ZsYWdzPXdpbmRvdy5sb2dGbGFnc3x8e30sZnVuY3Rpb24oYSl7dmFyIGI9YS5mbGFnc3x8e307bG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihhKXthPWEuc3BsaXQoIj0iKSxhWzBdJiYoYlthWzBdXT1hWzFdfHwhMCl9KSxiLnNoYWRvdz1iLnNoYWRvd3x8Yi5zaGFkb3dkb218fGIucG9seWZpbGwsYi5zaGFkb3c9Im5hdGl2ZSI9PT1iLnNoYWRvdz8hMTpiLnNoYWRvd3x8IUhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290JiYicG9seWZpbGwiLGEuZmxhZ3M9Yn0oUGxhdGZvcm0pLCJwb2x5ZmlsbCI9PT1QbGF0Zm9ybS5mbGFncy5zaGFkb3c/KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD17fSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIEwoYikuZm9yRWFjaChmdW5jdGlvbihjKXtLKGEsYyxNKGIsYykpfSksYX1mdW5jdGlvbiBkKGEsYil7cmV0dXJuIEwoYikuZm9yRWFjaChmdW5jdGlvbihjKXtzd2l0Y2goYyl7Y2FzZSJhcmd1bWVudHMiOmNhc2UiY2FsbGVyIjpjYXNlImxlbmd0aCI6Y2FzZSJuYW1lIjpjYXNlInByb3RvdHlwZSI6Y2FzZSJ0b1N0cmluZyI6cmV0dXJufUsoYSxjLE0oYixjKSl9KSxhfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdaW4gYSlyZXR1cm4gYltjXX1mdW5jdGlvbiBmKGEpe3ZhciBiPWEuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYz1FLmdldChiKTtpZihjKXJldHVybiBjO3ZhciBkPWYoYiksZT10KGQpO3JldHVybiBxKGIsZSxhKSxlfWZ1bmN0aW9uIGcoYSxiKXtvKGEsYiwhMCl9ZnVuY3Rpb24gaChhLGIpe28oYixhLCExKX1mdW5jdGlvbiBpKGEpe3JldHVybi9eb25bYS16XSskLy50ZXN0KGEpfWZ1bmN0aW9uIGooYSl7cmV0dXJuL15cd1thLXpBLVpfMC05XSokLy50ZXN0KGEpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIEgmJmooYSk/bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcy5pbXBsLiIrYSk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdfX1mdW5jdGlvbiBsKGEpe3JldHVybiBIJiZqKGEpP25ldyBGdW5jdGlvbigidiIsInRoaXMuaW1wbC4iK2ErIiA9IHYiKTpmdW5jdGlvbihiKXt0aGlzLmltcGxbYV09Yn19ZnVuY3Rpb24gbShhKXtyZXR1cm4gSCYmaihhKT9uZXcgRnVuY3Rpb24oInJldHVybiB0aGlzLmltcGwuIithKyIuYXBwbHkodGhpcy5pbXBsLCBhcmd1bWVudHMpIik6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX1mdW5jdGlvbiBuKGEsYil7dHJ5e3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYil9Y2F0Y2goYyl7cmV0dXJuIE99fWZ1bmN0aW9uIG8oYixjLGQpe2Zvcih2YXIgZT1MKGIpLGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGc9ZVtmXTtpZigicG9seW1lckJsYWNrTGlzdF8iIT09ZyYmIShnIGluIGN8fGIucG9seW1lckJsYWNrTGlzdF8mJmIucG9seW1lckJsYWNrTGlzdF9bZ10pKXtOJiZiLl9fbG9va3VwR2V0dGVyX18oZyk7dmFyIGgsaixvPW4oYixnKTtpZihkJiYiZnVuY3Rpb24iPT10eXBlb2Ygby52YWx1ZSljW2ddPW0oZyk7ZWxzZXt2YXIgcD1pKGcpO2g9cD9hLmdldEV2ZW50SGFuZGxlckdldHRlcihnKTprKGcpLChvLndyaXRhYmxlfHxvLnNldCkmJihqPXA/YS5nZXRFdmVudEhhbmRsZXJTZXR0ZXIoZyk6bChnKSksSyhjLGcse2dldDpoLHNldDpqLGNvbmZpZ3VyYWJsZTpvLmNvbmZpZ3VyYWJsZSxlbnVtZXJhYmxlOm8uZW51bWVyYWJsZX0pfX19fWZ1bmN0aW9uIHAoYSxiLGMpe3ZhciBlPWEucHJvdG90eXBlO3EoZSxiLGMpLGQoYixhKX1mdW5jdGlvbiBxKGEsYyxkKXt2YXIgZT1jLnByb3RvdHlwZTtiKHZvaWQgMD09PUUuZ2V0KGEpKSxFLnNldChhLGMpLEYuc2V0KGUsYSksZyhhLGUpLGQmJmgoZSxkKSxLKGUsImNvbnN0cnVjdG9yIix7dmFsdWU6Yyxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMH0pfWZ1bmN0aW9uIHIoYSxiKXtyZXR1cm4gRS5nZXQoYi5wcm90b3R5cGUpPT09YX1mdW5jdGlvbiBzKGEpe3ZhciBiPU9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxjPWYoYiksZD10KGMpO3JldHVybiBxKGIsZCxhKSxkfWZ1bmN0aW9uIHQoYSl7ZnVuY3Rpb24gYihiKXthLmNhbGwodGhpcyxiKX1yZXR1cm4gYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSksYi5wcm90b3R5cGUuY29uc3RydWN0b3I9YixifWZ1bmN0aW9uIHUoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBHLkV2ZW50VGFyZ2V0fHxhIGluc3RhbmNlb2YgRy5FdmVudHx8YSBpbnN0YW5jZW9mIEcuUmFuZ2V8fGEgaW5zdGFuY2VvZiBHLkRPTUltcGxlbWVudGF0aW9ufHxhIGluc3RhbmNlb2YgRy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8fEcuV2ViR0xSZW5kZXJpbmdDb250ZXh0JiZhIGluc3RhbmNlb2YgRy5XZWJHTFJlbmRlcmluZ0NvbnRleHR9ZnVuY3Rpb24gdihhKXtyZXR1cm4gUSYmYSBpbnN0YW5jZW9mIFF8fGEgaW5zdGFuY2VvZiBTfHxhIGluc3RhbmNlb2YgUnx8YSBpbnN0YW5jZW9mIFR8fGEgaW5zdGFuY2VvZiBVfHxhIGluc3RhbmNlb2YgUHx8YSBpbnN0YW5jZW9mIFZ8fFcmJmEgaW5zdGFuY2VvZiBXfHxYJiZhIGluc3RhbmNlb2YgWH1mdW5jdGlvbiB3KGEpe3JldHVybiBudWxsPT09YT9udWxsOihiKHYoYSkpLGEucG9seW1lcldyYXBwZXJffHwoYS5wb2x5bWVyV3JhcHBlcl89bmV3KGYoYSkpKGEpKSl9ZnVuY3Rpb24geChhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYih1KGEpKSxhLmltcGwpfWZ1bmN0aW9uIHkoYSl7cmV0dXJuIGEmJnUoYSk/eChhKTphfWZ1bmN0aW9uIHooYSl7cmV0dXJuIGEmJiF1KGEpP3coYSk6YX1mdW5jdGlvbiBBKGEsYyl7bnVsbCE9PWMmJihiKHYoYSkpLGIodm9pZCAwPT09Y3x8dShjKSksYS5wb2x5bWVyV3JhcHBlcl89Yyl9ZnVuY3Rpb24gQihhLGIsYyl7SyhhLnByb3RvdHlwZSxiLHtnZXQ6Yyxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfWZ1bmN0aW9uIEMoYSxiKXtCKGEsYixmdW5jdGlvbigpe3JldHVybiB3KHRoaXMuaW1wbFtiXSl9KX1mdW5jdGlvbiBEKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IuZm9yRWFjaChmdW5jdGlvbihiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3ZhciBhPXoodGhpcyk7cmV0dXJuIGFbYl0uYXBwbHkoYSxhcmd1bWVudHMpfX0pfSl9dmFyIEU9bmV3IFdlYWtNYXAsRj1uZXcgV2Vha01hcCxHPU9iamVjdC5jcmVhdGUobnVsbCksSD0hKCJzZWN1cml0eVBvbGljeSJpbiBkb2N1bWVudCl8fGRvY3VtZW50LnNlY3VyaXR5UG9saWN5LmFsbG93c0V2YWw7aWYoSCl0cnl7dmFyIEk9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtIPUkoKX1jYXRjaChKKXtIPSExfXZhciBLPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxMPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLE09T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtMKHdpbmRvdyk7dmFyIE49L0ZpcmVmb3gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksTz17Z2V0OmZ1bmN0aW9uKCl7fSxzZXQ6ZnVuY3Rpb24oKXt9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSxQPXdpbmRvdy5ET01JbXBsZW1lbnRhdGlvbixRPXdpbmRvdy5FdmVudFRhcmdldCxSPXdpbmRvdy5FdmVudCxTPXdpbmRvdy5Ob2RlLFQ9d2luZG93LldpbmRvdyxVPXdpbmRvdy5SYW5nZSxWPXdpbmRvdy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsVz13aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0LFg9d2luZG93LlNWR0VsZW1lbnRJbnN0YW5jZTthLmFzc2VydD1iLGEuY29uc3RydWN0b3JUYWJsZT1FLGEuZGVmaW5lR2V0dGVyPUIsYS5kZWZpbmVXcmFwR2V0dGVyPUMsYS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcj1ELGEuaXNXcmFwcGVyPXUsYS5pc1dyYXBwZXJGb3I9cixhLm1peGluPWMsYS5uYXRpdmVQcm90b3R5cGVUYWJsZT1GLGEub25lT2Y9ZSxhLnJlZ2lzdGVyT2JqZWN0PXMsYS5yZWdpc3RlcldyYXBwZXI9cCxhLnJld3JhcD1BLGEudW53cmFwPXgsYS51bndyYXBJZk5lZWRlZD15LGEud3JhcD13LGEud3JhcElmTmVlZGVkPXosYS53cmFwcGVycz1HfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKCl7Zz0hMTt2YXIgYT1mLnNsaWNlKDApO2Y9W107Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXSgpfWZ1bmN0aW9uIGMoYSl7Zi5wdXNoKGEpLGd8fChnPSEwLGQoYiwwKSl9dmFyIGQsZT13aW5kb3cuTXV0YXRpb25PYnNlcnZlcixmPVtdLGc9ITE7aWYoZSl7dmFyIGg9MSxpPW5ldyBlKGIpLGo9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaCk7aS5vYnNlcnZlKGose2NoYXJhY3RlckRhdGE6ITB9KSxkPWZ1bmN0aW9uKCl7aD0oaCsxKSUyLGouZGF0YT1ofX1lbHNlIGQ9d2luZG93LnNldEltbWVkaWF0ZXx8d2luZG93LnNldFRpbWVvdXQ7YS5zZXRFbmRPZk1pY3JvdGFzaz1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKCl7cHx8KGsoYykscD0hMCl9ZnVuY3Rpb24gYygpe3A9ITE7ZG8gZm9yKHZhciBhPW8uc2xpY2UoKSxiPSExLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXSxlPWQudGFrZVJlY29yZHMoKTtmKGQpLGUubGVuZ3RoJiYoZC5jYWxsYmFja18oZSxkKSxiPSEwKX13aGlsZShiKX1mdW5jdGlvbiBkKGEsYil7dGhpcy50eXBlPWEsdGhpcy50YXJnZXQ9Yix0aGlzLmFkZGVkTm9kZXM9bmV3IG0uTm9kZUxpc3QsdGhpcy5yZW1vdmVkTm9kZXM9bmV3IG0uTm9kZUxpc3QsdGhpcy5wcmV2aW91c1NpYmxpbmc9bnVsbCx0aGlzLm5leHRTaWJsaW5nPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lc3BhY2U9bnVsbCx0aGlzLm9sZFZhbHVlPW51bGx9ZnVuY3Rpb24gZShhLGIpe2Zvcig7YTthPWEucGFyZW50Tm9kZSl7dmFyIGM9bi5nZXQoYSk7aWYoYylmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtlLm9wdGlvbnMuc3VidHJlZSYmZS5hZGRUcmFuc2llbnRPYnNlcnZlcihiKX19fWZ1bmN0aW9uIGYoYSl7Zm9yKHZhciBiPTA7YjxhLm5vZGVzXy5sZW5ndGg7YisrKXt2YXIgYz1hLm5vZGVzX1tiXSxkPW4uZ2V0KGMpO2lmKCFkKXJldHVybjtmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXTtmLm9ic2VydmVyPT09YSYmZi5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKX19fWZ1bmN0aW9uIGcoYSxjLGUpe2Zvcih2YXIgZj1PYmplY3QuY3JlYXRlKG51bGwpLGc9T2JqZWN0LmNyZWF0ZShudWxsKSxoPWE7aDtoPWgucGFyZW50Tm9kZSl7dmFyIGk9bi5nZXQoaCk7aWYoaSlmb3IodmFyIGo9MDtqPGkubGVuZ3RoO2orKyl7dmFyIGs9aVtqXSxsPWsub3B0aW9ucztpZigoaD09PWF8fGwuc3VidHJlZSkmJiEoImF0dHJpYnV0ZXMiPT09YyYmIWwuYXR0cmlidXRlc3x8ImF0dHJpYnV0ZXMiPT09YyYmbC5hdHRyaWJ1dGVGaWx0ZXImJihudWxsIT09ZS5uYW1lc3BhY2V8fC0xPT09bC5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihlLm5hbWUpKXx8ImNoYXJhY3RlckRhdGEiPT09YyYmIWwuY2hhcmFjdGVyRGF0YXx8ImNoaWxkTGlzdCI9PT1jJiYhbC5jaGlsZExpc3QpKXt2YXIgbT1rLm9ic2VydmVyO2ZbbS51aWRfXT1tLCgiYXR0cmlidXRlcyI9PT1jJiZsLmF0dHJpYnV0ZU9sZFZhbHVlfHwiY2hhcmFjdGVyRGF0YSI9PT1jJiZsLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSkmJihnW20udWlkX109ZS5vbGRWYWx1ZSl9fX12YXIgbz0hMTtmb3IodmFyIHAgaW4gZil7dmFyIG09ZltwXSxxPW5ldyBkKGMsYSk7Im5hbWUiaW4gZSYmIm5hbWVzcGFjZSJpbiBlJiYocS5hdHRyaWJ1dGVOYW1lPWUubmFtZSxxLmF0dHJpYnV0ZU5hbWVzcGFjZT1lLm5hbWVzcGFjZSksZS5hZGRlZE5vZGVzJiYocS5hZGRlZE5vZGVzPWUuYWRkZWROb2RlcyksZS5yZW1vdmVkTm9kZXMmJihxLnJlbW92ZWROb2Rlcz1lLnJlbW92ZWROb2RlcyksZS5wcmV2aW91c1NpYmxpbmcmJihxLnByZXZpb3VzU2libGluZz1lLnByZXZpb3VzU2libGluZyksZS5uZXh0U2libGluZyYmKHEubmV4dFNpYmxpbmc9ZS5uZXh0U2libGluZyksdm9pZCAwIT09Z1twXSYmKHEub2xkVmFsdWU9Z1twXSksbS5yZWNvcmRzXy5wdXNoKHEpLG89ITB9byYmYigpfWZ1bmN0aW9uIGgoYSl7aWYodGhpcy5jaGlsZExpc3Q9ISFhLmNoaWxkTGlzdCx0aGlzLnN1YnRyZWU9ISFhLnN1YnRyZWUsdGhpcy5hdHRyaWJ1dGVzPSJhdHRyaWJ1dGVzImluIGF8fCEoImF0dHJpYnV0ZU9sZFZhbHVlImluIGF8fCJhdHRyaWJ1dGVGaWx0ZXIiaW4gYSk/ISFhLmF0dHJpYnV0ZXM6ITAsdGhpcy5jaGFyYWN0ZXJEYXRhPSJjaGFyYWN0ZXJEYXRhT2xkVmFsdWUiaW4gYSYmISgiY2hhcmFjdGVyRGF0YSJpbiBhKT8hMDohIWEuY2hhcmFjdGVyRGF0YSwhdGhpcy5hdHRyaWJ1dGVzJiYoYS5hdHRyaWJ1dGVPbGRWYWx1ZXx8ImF0dHJpYnV0ZUZpbHRlciJpbiBhKXx8IXRoaXMuY2hhcmFjdGVyRGF0YSYmYS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpdGhyb3cgbmV3IFR5cGVFcnJvcjtpZih0aGlzLmNoYXJhY3RlckRhdGE9ISFhLmNoYXJhY3RlckRhdGEsdGhpcy5hdHRyaWJ1dGVPbGRWYWx1ZT0hIWEuYXR0cmlidXRlT2xkVmFsdWUsdGhpcy5jaGFyYWN0ZXJEYXRhT2xkVmFsdWU9ISFhLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSwiYXR0cmlidXRlRmlsdGVyImluIGEpe2lmKG51bGw9PWEuYXR0cmlidXRlRmlsdGVyfHwib2JqZWN0IiE9dHlwZW9mIGEuYXR0cmlidXRlRmlsdGVyKXRocm93IG5ldyBUeXBlRXJyb3I7dGhpcy5hdHRyaWJ1dGVGaWx0ZXI9cS5jYWxsKGEuYXR0cmlidXRlRmlsdGVyKX1lbHNlIHRoaXMuYXR0cmlidXRlRmlsdGVyPW51bGx9ZnVuY3Rpb24gaShhKXt0aGlzLmNhbGxiYWNrXz1hLHRoaXMubm9kZXNfPVtdLHRoaXMucmVjb3Jkc189W10sdGhpcy51aWRfPSsrcixvLnB1c2godGhpcyl9ZnVuY3Rpb24gaihhLGIsYyl7dGhpcy5vYnNlcnZlcj1hLHRoaXMudGFyZ2V0PWIsdGhpcy5vcHRpb25zPWMsdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdfXZhciBrPWEuc2V0RW5kT2ZNaWNyb3Rhc2ssbD1hLndyYXBJZk5lZWRlZCxtPWEud3JhcHBlcnMsbj1uZXcgV2Vha01hcCxvPVtdLHA9ITEscT1BcnJheS5wcm90b3R5cGUuc2xpY2Uscj0wO2kucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGEsYil7YT1sKGEpO3ZhciBjLGQ9bmV3IGgoYiksZT1uLmdldChhKTtlfHxuLnNldChhLGU9W10pO2Zvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKWVbZl0ub2JzZXJ2ZXI9PT10aGlzJiYoYz1lW2ZdLGMucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCksYy5vcHRpb25zPWQpO2N8fChjPW5ldyBqKHRoaXMsYSxkKSxlLnB1c2goYyksdGhpcy5ub2Rlc18ucHVzaChhKSl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1uLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107aWYoZC5vYnNlcnZlcj09PXRoaXMpe2Iuc3BsaWNlKGMsMSk7YnJlYWt9fX0sdGhpcyksdGhpcy5yZWNvcmRzXz1bXX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlY29yZHNfO3JldHVybiB0aGlzLnJlY29yZHNfPVtdLGF9fSxqLnByb3RvdHlwZT17YWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXMucHVzaChhKTt2YXIgYj1uLmdldChhKTtifHxuLnNldChhLGI9W10pLGIucHVzaCh0aGlzKX19LHJlbW92ZVRyYW5zaWVudE9ic2VydmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlczt0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W107Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspZm9yKHZhciBjPWFbYl0sZD1uLmdldChjKSxlPTA7ZTxkLmxlbmd0aDtlKyspaWYoZFtlXT09PXRoaXMpe2Quc3BsaWNlKGUsMSk7YnJlYWt9fX0sYS5lbnF1ZXVlTXV0YXRpb249ZyxhLnJlZ2lzdGVyVHJhbnNpZW50T2JzZXJ2ZXJzPWUsYS53cmFwcGVycy5NdXRhdGlvbk9ic2VydmVyPWksYS53cmFwcGVycy5NdXRhdGlvblJlY29yZD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhIGluc3RhbmNlb2YgUS5TaGFkb3dSb290fWZ1bmN0aW9uIGMoYSl7dmFyIGI9YS5sb2NhbE5hbWU7cmV0dXJuImNvbnRlbnQiPT09Ynx8InNoYWRvdyI9PT1ifWZ1bmN0aW9uIGQoYSl7cmV0dXJuISFhLnNoYWRvd1Jvb3R9ZnVuY3Rpb24gZShhKXt2YXIgYjtyZXR1cm4gYS5wYXJlbnROb2RlfHwoYj1hLmRlZmF1bHRWaWV3KSYmUChiKXx8bnVsbH1mdW5jdGlvbiBmKGYsZyxoKXtpZihoLmxlbmd0aClyZXR1cm4gaC5zaGlmdCgpO2lmKGIoZikpcmV0dXJuIGooZil8fGYuaG9zdDt2YXIgaT1hLmV2ZW50UGFyZW50c1RhYmxlLmdldChmKTtpZihpKXtmb3IodmFyIGs9MTtrPGkubGVuZ3RoO2srKyloW2stMV09aVtrXTtyZXR1cm4gaVswXX1pZihnJiZjKGYpKXt2YXIgbD1mLnBhcmVudE5vZGU7aWYobCYmZChsKSlmb3IodmFyIG09YS5nZXRTaGFkb3dUcmVlcyhsKSxuPWooZyksaz0wO2s8bS5sZW5ndGg7aysrKWlmKG1ba10uY29udGFpbnMobikpcmV0dXJuIG59cmV0dXJuIGUoZil9ZnVuY3Rpb24gZyhhKXtmb3IodmFyIGQ9W10sZT1hLGc9W10saT1bXTtlOyl7dmFyIGo9bnVsbDtpZihjKGUpKXtqPWgoZCk7dmFyIGs9ZFtkLmxlbmd0aC0xXXx8ZTtkLnB1c2goayl9ZWxzZSBkLmxlbmd0aHx8ZC5wdXNoKGUpO3ZhciBsPWRbZC5sZW5ndGgtMV07Zy5wdXNoKHt0YXJnZXQ6bCxjdXJyZW50VGFyZ2V0OmV9KSxiKGUpJiZkLnBvcCgpLGU9ZihlLGosaSl9cmV0dXJuIGd9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9YS5sZW5ndGgtMTtiPj0wO2ItLSlpZighYyhhW2JdKSlyZXR1cm4gYVtiXTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBpKGEsZCl7Zm9yKHZhciBlPVtdO2E7KXtmb3IodmFyIGc9W10saT1kLGo9dm9pZCAwO2k7KXt2YXIgbD1udWxsO2lmKGcubGVuZ3RoKXtpZihjKGkpJiYobD1oKGcpLGsoaikpKXt2YXIgbj1nW2cubGVuZ3RoLTFdO2cucHVzaChuKX19ZWxzZSBnLnB1c2goaSk7aWYobShpLGEpKXJldHVybiBnW2cubGVuZ3RoLTFdO2IoaSkmJmcucG9wKCksaj1pLGk9ZihpLGwsZSl9YT1iKGEpP2EuaG9zdDphLnBhcmVudE5vZGV9fWZ1bmN0aW9uIGooYil7cmV0dXJuIGEuaW5zZXJ0aW9uUGFyZW50VGFibGUuZ2V0KGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIGooYSl9ZnVuY3Rpb24gbChhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBtKGEsYil7cmV0dXJuIGwoYSk9PT1sKGIpfWZ1bmN0aW9uIG4oYSxiKXtyZXR1cm4gYT09PWI/ITA6YSBpbnN0YW5jZW9mIFEuU2hhZG93Um9vdD9uKGwoYS5ob3N0KSxiKTohMX1mdW5jdGlvbiBvKGEpe3JldHVybiBTLmdldChhKT92b2lkIDA6KFMuc2V0KGEsITApLHAoUChhKSxQKGEudGFyZ2V0KSkpfWZ1bmN0aW9uIHAoYixjKXtpZihULmdldChiKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWRTdGF0ZUVycm9yIik7VC5zZXQoYiwhMCksYS5yZW5kZXJBbGxQZW5kaW5nKCk7dmFyIGQ9ZyhjKTtyZXR1cm4ibG9hZCI9PT1iLnR5cGUmJjI9PT1kLmxlbmd0aCYmZFswXS50YXJnZXQgaW5zdGFuY2VvZiBRLkRvY3VtZW50JiZkLnNoaWZ0KCksXy5zZXQoYixkKSxxKGIsZCkmJnIoYixkKSYmcyhiLGQpLFguc2V0KGIsdi5OT05FKSxWLmRlbGV0ZShiLG51bGwpLFQuZGVsZXRlKGIpLGIuZGVmYXVsdFByZXZlbnRlZH1mdW5jdGlvbiBxKGEsYil7Zm9yKHZhciBjLGQ9Yi5sZW5ndGgtMTtkPjA7ZC0tKXt2YXIgZT1iW2RdLnRhcmdldCxmPWJbZF0uY3VycmVudFRhcmdldDtpZihlIT09ZiYmKGM9di5DQVBUVVJJTkdfUEhBU0UsIXQoYltkXSxhLGMpKSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiByKGEsYil7dmFyIGM9di5BVF9UQVJHRVQ7cmV0dXJuIHQoYlswXSxhLGMpfWZ1bmN0aW9uIHMoYSxiKXtmb3IodmFyIGMsZD1hLmJ1YmJsZXMsZT0xO2U8Yi5sZW5ndGg7ZSsrKXt2YXIgZj1iW2VdLnRhcmdldCxnPWJbZV0uY3VycmVudFRhcmdldDtpZihmPT09ZyljPXYuQVRfVEFSR0VUO2Vsc2V7aWYoIWR8fFouZ2V0KGEpKWNvbnRpbnVlO2M9di5CVUJCTElOR19QSEFTRX1pZighdChiW2VdLGEsYykpcmV0dXJufX1mdW5jdGlvbiB0KGEsYixjKXt2YXIgZD1hLnRhcmdldCxlPWEuY3VycmVudFRhcmdldCxmPVIuZ2V0KGUpO2lmKCFmKXJldHVybiEwO2lmKCJyZWxhdGVkVGFyZ2V0ImluIGIpe3ZhciBnPU8oYik7aWYoZy5yZWxhdGVkVGFyZ2V0KXt2YXIgaD1QKGcucmVsYXRlZFRhcmdldCksaj1pKGUsaCk7aWYoaj09PWQpcmV0dXJuITA7Vy5zZXQoYixqKX19WC5zZXQoYixjKTt2YXIgaz1iLnR5cGUsbD0hMTtVLnNldChiLGQpLFYuc2V0KGIsZSk7Zm9yKHZhciBtPTA7bTxmLmxlbmd0aDttKyspe3ZhciBuPWZbbV07aWYobi5yZW1vdmVkKWw9ITA7ZWxzZSBpZighKG4udHlwZSE9PWt8fCFuLmNhcHR1cmUmJmM9PT12LkNBUFRVUklOR19QSEFTRXx8bi5jYXB0dXJlJiZjPT09di5CVUJCTElOR19QSEFTRSkpdHJ5e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuLmhhbmRsZXI/bi5oYW5kbGVyLmNhbGwoZSxiKTpuLmhhbmRsZXIuaGFuZGxlRXZlbnQoYiksWi5nZXQoYikpcmV0dXJuITF9Y2F0Y2gobyl7d2luZG93Lm9uZXJyb3I/d2luZG93Lm9uZXJyb3Ioby5tZXNzYWdlKTpjb25zb2xlLmVycm9yKG8sby5zdGFjayl9fWlmKGwpe3ZhciBwPWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgbT0wO208cC5sZW5ndGg7bSsrKXBbbV0ucmVtb3ZlZHx8Zi5wdXNoKHBbbV0pfXJldHVybiFZLmdldChiKX1mdW5jdGlvbiB1KGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB2KGEsYil7cmV0dXJuIGEgaW5zdGFuY2VvZiBhYj92b2lkKHRoaXMuaW1wbD1hKTpQKHooYWIsIkV2ZW50IixhLGIpKX1mdW5jdGlvbiB3KGEpe3JldHVybiBhJiZhLnJlbGF0ZWRUYXJnZXQ/T2JqZWN0LmNyZWF0ZShhLHtyZWxhdGVkVGFyZ2V0Ont2YWx1ZTpPKGEucmVsYXRlZFRhcmdldCl9fSk6YX1mdW5jdGlvbiB4KGEsYixjKXt2YXIgZD13aW5kb3dbYV0sZT1mdW5jdGlvbihiLGMpe3JldHVybiBiIGluc3RhbmNlb2YgZD92b2lkKHRoaXMuaW1wbD1iKTpQKHooZCxhLGIsYykpfTtpZihlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxjJiZNKGUucHJvdG90eXBlLGMpLGQpdHJ5e04oZCxlLG5ldyBkKCJ0ZW1wIikpfWNhdGNoKGYpe04oZCxlLGRvY3VtZW50LmNyZWF0ZUV2ZW50KGEpKX1yZXR1cm4gZX1mdW5jdGlvbiB5KGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7YXJndW1lbnRzW2JdPU8oYXJndW1lbnRzW2JdKTt2YXIgYz1PKHRoaXMpO2NbYV0uYXBwbHkoYyxhcmd1bWVudHMpfX1mdW5jdGlvbiB6KGEsYixjLGQpe2lmKGpiKXJldHVybiBuZXcgYShjLHcoZCkpO3ZhciBlPU8oZG9jdW1lbnQuY3JlYXRlRXZlbnQoYikpLGY9aWJbYl0sZz1bY107cmV0dXJuIE9iamVjdC5rZXlzKGYpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9bnVsbCE9ZCYmYSBpbiBkP2RbYV06ZlthXTsicmVsYXRlZFRhcmdldCI9PT1hJiYoYj1PKGIpKSxnLnB1c2goYil9KSxlWyJpbml0IitiXS5hcHBseShlLGcpLGV9ZnVuY3Rpb24gQSgpe3YuY2FsbCh0aGlzKX1mdW5jdGlvbiBCKGEpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhPyEwOmEmJmEuaGFuZGxlRXZlbnR9ZnVuY3Rpb24gQyhhKXtzd2l0Y2goYSl7Y2FzZSJET01BdHRyTW9kaWZpZWQiOmNhc2UiRE9NQXR0cmlidXRlTmFtZUNoYW5nZWQiOmNhc2UiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIjpjYXNlIkRPTUVsZW1lbnROYW1lQ2hhbmdlZCI6Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOmNhc2UiRE9NTm9kZUluc2VydGVkSW50b0RvY3VtZW50IjpjYXNlIkRPTU5vZGVSZW1vdmVkIjpjYXNlIkRPTU5vZGVSZW1vdmVkRnJvbURvY3VtZW50IjpjYXNlIkRPTVN1YnRyZWVNb2RpZmllZCI6cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gRChhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBFKGEpe3JldHVybiBhIGluc3RhbmNlb2YgUS5TaGFkb3dSb290JiYoYT1hLmhvc3QpLE8oYSl9ZnVuY3Rpb24gRihhLGIpe3ZhciBjPVIuZ2V0KGEpO2lmKGMpZm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspaWYoIWNbZF0ucmVtb3ZlZCYmY1tkXS50eXBlPT09YilyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBHKGEsYil7Zm9yKHZhciBjPU8oYSk7YztjPWMucGFyZW50Tm9kZSlpZihGKFAoYyksYikpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gSChhKXtMKGEsbWIpfWZ1bmN0aW9uIEkoYixjLGQsZSl7YS5yZW5kZXJBbGxQZW5kaW5nKCk7Zm9yKHZhciBmPVAobmIuY2FsbChjLmltcGwsZCxlKSksaD1nKGYsdGhpcyksaT0wO2k8aC5sZW5ndGg7aSsrKXt2YXIgaj1oW2ldO2lmKGouY3VycmVudFRhcmdldD09PWIpcmV0dXJuIGoudGFyZ2V0fXJldHVybiBudWxsfWZ1bmN0aW9uIEooYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9JC5nZXQodGhpcyk7cmV0dXJuIGImJmJbYV0mJmJbYV0udmFsdWV8fG51bGx9fWZ1bmN0aW9uIEsoYSl7dmFyIGI9YS5zbGljZSgyKTtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9JC5nZXQodGhpcyk7ZHx8KGQ9T2JqZWN0LmNyZWF0ZShudWxsKSwkLnNldCh0aGlzLGQpKTt2YXIgZT1kW2FdO2lmKGUmJnRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGUud3JhcHBlZCwhMSksImZ1bmN0aW9uIj09dHlwZW9mIGMpe3ZhciBmPWZ1bmN0aW9uKGIpe3ZhciBkPWMuY2FsbCh0aGlzLGIpO2Q9PT0hMT9iLnByZXZlbnREZWZhdWx0KCk6Im9uYmVmb3JldW5sb2FkIj09PWEmJiJzdHJpbmciPT10eXBlb2YgZCYmKGIucmV0dXJuVmFsdWU9ZCl9O3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihiLGYsITEpLGRbYV09e3ZhbHVlOmMsd3JhcHBlZDpmfX19fXZhciBMPWEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIsTT1hLm1peGluLE49YS5yZWdpc3RlcldyYXBwZXIsTz1hLnVud3JhcCxQPWEud3JhcCxRPWEud3JhcHBlcnMsUj0obmV3IFdlYWtNYXAsbmV3IFdlYWtNYXApLFM9bmV3IFdlYWtNYXAsVD1uZXcgV2Vha01hcCxVPW5ldyBXZWFrTWFwLFY9bmV3IFdlYWtNYXAsVz1uZXcgV2Vha01hcCxYPW5ldyBXZWFrTWFwLFk9bmV3IFdlYWtNYXAsWj1uZXcgV2Vha01hcCwkPW5ldyBXZWFrTWFwLF89bmV3IFdlYWtNYXA7dS5wcm90b3R5cGU9e2VxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGVyPT09YS5oYW5kbGVyJiZ0aGlzLnR5cGU9PT1hLnR5cGUmJnRoaXMuY2FwdHVyZT09PWEuY2FwdHVyZX0sZ2V0IHJlbW92ZWQoKXtyZXR1cm4gbnVsbD09PXRoaXMuaGFuZGxlcn0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW51bGx9fTt2YXIgYWI9d2luZG93LkV2ZW50O2FiLnByb3RvdHlwZS5wb2x5bWVyQmxhY2tMaXN0Xz17cmV0dXJuVmFsdWU6ITAsa2V5TG9jYXRpb246ITB9LHYucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIFUuZ2V0KHRoaXMpfSxnZXQgY3VycmVudFRhcmdldCgpe3JldHVybiBWLmdldCh0aGlzKX0sZ2V0IGV2ZW50UGhhc2UoKXtyZXR1cm4gWC5nZXQodGhpcyl9LGdldCBwYXRoKCl7dmFyIGE9bmV3IFEuTm9kZUxpc3QsYj1fLmdldCh0aGlzKTtpZihiKXtmb3IodmFyIGM9MCxkPWIubGVuZ3RoLTEsZT1sKFYuZ2V0KHRoaXMpKSxmPTA7ZD49ZjtmKyspe3ZhciBnPWJbZl0uY3VycmVudFRhcmdldCxoPWwoZyk7bihlLGgpJiYoZiE9PWR8fGcgaW5zdGFuY2VvZiBRLk5vZGUpJiYoYVtjKytdPWcpfWEubGVuZ3RoPWN9cmV0dXJuIGF9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe1kuc2V0KHRoaXMsITApfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtZLnNldCh0aGlzLCEwKSxaLnNldCh0aGlzLCEwKX19LE4oYWIsdixkb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSk7dmFyIGJiPXgoIlVJRXZlbnQiLHYpLGNiPXgoIkN1c3RvbUV2ZW50Iix2KSxkYj17Z2V0IHJlbGF0ZWRUYXJnZXQoKXtyZXR1cm4gVy5nZXQodGhpcyl8fFAoTyh0aGlzKS5yZWxhdGVkVGFyZ2V0KX19LGViPU0oe2luaXRNb3VzZUV2ZW50OnkoImluaXRNb3VzZUV2ZW50IiwxNCl9LGRiKSxmYj1NKHtpbml0Rm9jdXNFdmVudDp5KCJpbml0Rm9jdXNFdmVudCIsNSl9LGRiKSxnYj14KCJNb3VzZUV2ZW50IixiYixlYiksaGI9eCgiRm9jdXNFdmVudCIsYmIsZmIpLGliPU9iamVjdC5jcmVhdGUobnVsbCksamI9ZnVuY3Rpb24oKXt0cnl7bmV3IHdpbmRvdy5Gb2N1c0V2ZW50KCJmb2N1cyIpfWNhdGNoKGEpe3JldHVybiExfXJldHVybiEwfSgpO2lmKCFqYil7dmFyIGtiPWZ1bmN0aW9uKGEsYixjKXtpZihjKXt2YXIgZD1pYltjXTtiPU0oTSh7fSxkKSxiKX1pYlthXT1ifTtrYigiRXZlbnQiLHtidWJibGVzOiExLGNhbmNlbGFibGU6ITF9KSxrYigiQ3VzdG9tRXZlbnQiLHtkZXRhaWw6bnVsbH0sIkV2ZW50Iiksa2IoIlVJRXZlbnQiLHt2aWV3Om51bGwsZGV0YWlsOjB9LCJFdmVudCIpLGtiKCJNb3VzZUV2ZW50Iix7c2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpLGtiKCJGb2N1c0V2ZW50Iix7cmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpfUEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodi5wcm90b3R5cGUpLE0oQS5wcm90b3R5cGUse2dldCByZXR1cm5WYWx1ZSgpe3JldHVybiB0aGlzLmltcGwucmV0dXJuVmFsdWV9LHNldCByZXR1cm5WYWx1ZShhKXt0aGlzLmltcGwucmV0dXJuVmFsdWU9YQp9fSk7dmFyIGxiPXdpbmRvdy5FdmVudFRhcmdldCxtYj1bImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdO1tOb2RlLFdpbmRvd10uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnByb3RvdHlwZTttYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLGErIl8iLHt2YWx1ZTpiW2FdfSl9KX0pLEQucHJvdG90eXBlPXthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtpZihCKGIpJiYhQyhhKSl7dmFyIGQ9bmV3IHUoYSxiLGMpLGU9Ui5nZXQodGhpcyk7aWYoZSl7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspaWYoZC5lcXVhbHMoZVtmXSkpcmV0dXJufWVsc2UgZT1bXSxSLnNldCh0aGlzLGUpO2UucHVzaChkKTt2YXIgZz1FKHRoaXMpO2cuYWRkRXZlbnRMaXN0ZW5lcl8oYSxvLCEwKX19LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2M9Qm9vbGVhbihjKTt2YXIgZD1SLmdldCh0aGlzKTtpZihkKXtmb3IodmFyIGU9MCxmPSExLGc9MDtnPGQubGVuZ3RoO2crKylkW2ddLnR5cGU9PT1hJiZkW2ddLmNhcHR1cmU9PT1jJiYoZSsrLGRbZ10uaGFuZGxlcj09PWImJihmPSEwLGRbZ10ucmVtb3ZlKCkpKTtpZihmJiYxPT09ZSl7dmFyIGg9RSh0aGlzKTtoLnJlbW92ZUV2ZW50TGlzdGVuZXJfKGEsbywhMCl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihiKXt2YXIgYz1PKGIpLGQ9Yy50eXBlO1Muc2V0KGMsITEpLGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBlO0codGhpcyxkKXx8KGU9ZnVuY3Rpb24oKXt9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkLGUsITApKTt0cnl7cmV0dXJuIE8odGhpcykuZGlzcGF0Y2hFdmVudF8oYyl9ZmluYWxseXtlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxlLCEwKX19fSxsYiYmTihsYixEKTt2YXIgbmI9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludDthLmFkanVzdFJlbGF0ZWRUYXJnZXQ9aSxhLmVsZW1lbnRGcm9tUG9pbnQ9SSxhLmdldEV2ZW50SGFuZGxlckdldHRlcj1KLGEuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyPUssYS53cmFwRXZlbnRUYXJnZXRNZXRob2RzPUgsYS53cmFwcGVycy5CZWZvcmVVbmxvYWRFdmVudD1BLGEud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9Y2IsYS53cmFwcGVycy5FdmVudD12LGEud3JhcHBlcnMuRXZlbnRUYXJnZXQ9RCxhLndyYXBwZXJzLkZvY3VzRXZlbnQ9aGIsYS53cmFwcGVycy5Nb3VzZUV2ZW50PWdiLGEud3JhcHBlcnMuVUlFdmVudD1iYn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse2VudW1lcmFibGU6ITF9KX1mdW5jdGlvbiBjKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGQoYSl7aWYobnVsbD09YSlyZXR1cm4gYTtmb3IodmFyIGI9bmV3IGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyliW2RdPWYoYVtkXSk7cmV0dXJuIGIubGVuZ3RoPWUsYn1mdW5jdGlvbiBlKGEsYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX12YXIgZj1hLndyYXA7Yy5wcm90b3R5cGU9e2l0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19fSxiKGMucHJvdG90eXBlLCJpdGVtIiksYS53cmFwcGVycy5Ob2RlTGlzdD1jLGEuYWRkV3JhcE5vZGVMaXN0TWV0aG9kPWUsYS53cmFwTm9kZUxpc3Q9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt3KGEgaW5zdGFuY2VvZiB0KX1mdW5jdGlvbiBjKGEpe3ZhciBiPW5ldyB2O3JldHVybiBiWzBdPWEsYi5sZW5ndGg9MSxifWZ1bmN0aW9uIGQoYSxiLGMpe3koYiwiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmMscHJldmlvdXNTaWJsaW5nOmEucHJldmlvdXNTaWJsaW5nLG5leHRTaWJsaW5nOmEubmV4dFNpYmxpbmd9KX1mdW5jdGlvbiBlKGEsYil7eShhLCJjaGlsZExpc3QiLHtyZW1vdmVkTm9kZXM6Yn0pfWZ1bmN0aW9uIGYoYSxiLGQsZSl7aWYoYSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpe3ZhciBmPWgoYSk7Rz0hMDtmb3IodmFyIGc9Zi5sZW5ndGgtMTtnPj0wO2ctLSlhLnJlbW92ZUNoaWxkKGZbZ10pLGZbZ10ucGFyZW50Tm9kZV89YjtHPSExO2Zvcih2YXIgZz0wO2c8Zi5sZW5ndGg7ZysrKWZbZ10ucHJldmlvdXNTaWJsaW5nXz1mW2ctMV18fGQsZltnXS5uZXh0U2libGluZ189ZltnKzFdfHxlO3JldHVybiBkJiYoZC5uZXh0U2libGluZ189ZlswXSksZSYmKGUucHJldmlvdXNTaWJsaW5nXz1mW2YubGVuZ3RoLTFdKSxmfXZhciBmPWMoYSksaT1hLnBhcmVudE5vZGU7cmV0dXJuIGkmJmkucmVtb3ZlQ2hpbGQoYSksYS5wYXJlbnROb2RlXz1iLGEucHJldmlvdXNTaWJsaW5nXz1kLGEubmV4dFNpYmxpbmdfPWUsZCYmKGQubmV4dFNpYmxpbmdfPWEpLGUmJihlLnByZXZpb3VzU2libGluZ189YSksZn1mdW5jdGlvbiBnKGEpe2lmKGEgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXJldHVybiBoKGEpO3ZhciBiPWMoYSksZT1hLnBhcmVudE5vZGU7cmV0dXJuIGUmJmQoYSxlLGIpLGJ9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9bmV3IHYsYz0wLGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWJbYysrXT1kO3JldHVybiBiLmxlbmd0aD1jLGUoYSxiKSxifWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gaihhKXthLm5vZGVJc0luc2VydGVkXygpfWZ1bmN0aW9uIGsoYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspaihhW2JdKX1mdW5jdGlvbiBsKCl7fWZ1bmN0aW9uIG0oKXt9ZnVuY3Rpb24gbihhLGIpe3ZhciBjPWEubm9kZVR5cGU9PT10LkRPQ1VNRU5UX05PREU/YTphLm93bmVyRG9jdW1lbnQ7YyE9PWIub3duZXJEb2N1bWVudCYmYy5hZG9wdE5vZGUoYil9ZnVuY3Rpb24gbyhiLGMpe2lmKGMubGVuZ3RoKXt2YXIgZD1iLm93bmVyRG9jdW1lbnQ7aWYoZCE9PWNbMF0ub3duZXJEb2N1bWVudClmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKylhLmFkb3B0Tm9kZU5vUmVtb3ZlKGNbZV0sZCl9fWZ1bmN0aW9uIHAoYSxiKXtvKGEsYik7dmFyIGM9Yi5sZW5ndGg7aWYoMT09PWMpcmV0dXJuIEQoYlswXSk7Zm9yKHZhciBkPUQoYS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZT0wO2M+ZTtlKyspZC5hcHBlbmRDaGlsZChEKGJbZV0pKTtyZXR1cm4gZH1mdW5jdGlvbiBxKGEpe2lmKHZvaWQgMCE9PWEuZmlyc3RDaGlsZF8pZm9yKHZhciBiPWEuZmlyc3RDaGlsZF87Yjspe3ZhciBjPWI7Yj1iLm5leHRTaWJsaW5nXyxjLnBhcmVudE5vZGVfPWMucHJldmlvdXNTaWJsaW5nXz1jLm5leHRTaWJsaW5nXz12b2lkIDB9YS5maXJzdENoaWxkXz1hLmxhc3RDaGlsZF89dm9pZCAwfWZ1bmN0aW9uIHIoYSl7aWYoYS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7Zm9yKHZhciBiPWEuZmlyc3RDaGlsZDtiOyl7dyhiLnBhcmVudE5vZGU9PT1hKTt2YXIgYz1iLm5leHRTaWJsaW5nLGQ9RChiKSxlPWQucGFyZW50Tm9kZTtlJiZMLmNhbGwoZSxkKSxiLnByZXZpb3VzU2libGluZ189Yi5uZXh0U2libGluZ189Yi5wYXJlbnROb2RlXz1udWxsLGI9Y31hLmZpcnN0Q2hpbGRfPWEubGFzdENoaWxkXz1udWxsfWVsc2UgZm9yKHZhciBjLGY9RChhKSxnPWYuZmlyc3RDaGlsZDtnOyljPWcubmV4dFNpYmxpbmcsTC5jYWxsKGYsZyksZz1jfWZ1bmN0aW9uIHMoYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiZiLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfWZ1bmN0aW9uIHQoYSl7dyhhIGluc3RhbmNlb2YgSCksdS5jYWxsKHRoaXMsYSksdGhpcy5wYXJlbnROb2RlXz12b2lkIDAsdGhpcy5maXJzdENoaWxkXz12b2lkIDAsdGhpcy5sYXN0Q2hpbGRfPXZvaWQgMCx0aGlzLm5leHRTaWJsaW5nXz12b2lkIDAsdGhpcy5wcmV2aW91c1NpYmxpbmdfPXZvaWQgMH12YXIgdT1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LHY9YS53cmFwcGVycy5Ob2RlTGlzdCx3PWEuYXNzZXJ0LHg9YS5kZWZpbmVXcmFwR2V0dGVyLHk9YS5lbnF1ZXVlTXV0YXRpb24sej1hLmlzV3JhcHBlcixBPWEubWl4aW4sQj1hLnJlZ2lzdGVyVHJhbnNpZW50T2JzZXJ2ZXJzLEM9YS5yZWdpc3RlcldyYXBwZXIsRD1hLnVud3JhcCxFPWEud3JhcCxGPWEud3JhcElmTmVlZGVkLEc9ITEsSD13aW5kb3cuTm9kZSxJPXdpbmRvdy5Eb2N1bWVudEZyYWdtZW50LEo9KEgucHJvdG90eXBlLmFwcGVuZENoaWxkLEgucHJvdG90eXBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSxLPUgucHJvdG90eXBlLmluc2VydEJlZm9yZSxMPUgucHJvdG90eXBlLnJlbW92ZUNoaWxkLE09SC5wcm90b3R5cGUucmVwbGFjZUNoaWxkLE49L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksTz1OP2Z1bmN0aW9uKGEsYil7dHJ5e0wuY2FsbChhLGIpfWNhdGNoKGMpe2lmKCEoYSBpbnN0YW5jZW9mIEkpKXRocm93IGN9fTpmdW5jdGlvbihhLGIpe0wuY2FsbChhLGIpfTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxBKHQucHJvdG90eXBlLHthcHBlbmRDaGlsZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUoYSxudWxsKX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGEsYyl7YihhKTt2YXIgZDtjP3ooYyk/ZD1EKGMpOihkPWMsYz1FKGQpKTooYz1udWxsLGQ9bnVsbCksYyYmdyhjLnBhcmVudE5vZGU9PT10aGlzKTt2YXIgZSxoPWM/Yy5wcmV2aW91c1NpYmxpbmc6dGhpcy5sYXN0Q2hpbGQsaT0hdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSYmIXMoYSk7aWYoZT1pP2coYSk6ZihhLHRoaXMsaCxjKSxpKW4odGhpcyxhKSxxKHRoaXMpLEsuY2FsbCh0aGlzLmltcGwsRChhKSxkKTtlbHNle2h8fCh0aGlzLmZpcnN0Q2hpbGRfPWVbMF0pLGN8fCh0aGlzLmxhc3RDaGlsZF89ZVtlLmxlbmd0aC0xXSk7dmFyIGo9ZD9kLnBhcmVudE5vZGU6dGhpcy5pbXBsO2o/Sy5jYWxsKGoscCh0aGlzLGUpLGQpOm8odGhpcyxlKX1yZXR1cm4geSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmUsbmV4dFNpYmxpbmc6YyxwcmV2aW91c1NpYmxpbmc6aH0pLGsoZSksYX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSl7aWYoYihhKSxhLnBhcmVudE5vZGUhPT10aGlzKXtmb3IodmFyIGQ9ITEsZT0odGhpcy5jaGlsZE5vZGVzLHRoaXMuZmlyc3RDaGlsZCk7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZT09PWEpe2Q9ITA7YnJlYWt9aWYoIWQpdGhyb3cgbmV3IEVycm9yKCJOb3RGb3VuZEVycm9yIil9dmFyIGY9RChhKSxnPWEubmV4dFNpYmxpbmcsaD1hLnByZXZpb3VzU2libGluZztpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXt2YXIgaT10aGlzLmZpcnN0Q2hpbGQsaj10aGlzLmxhc3RDaGlsZCxrPWYucGFyZW50Tm9kZTtrJiZPKGssZiksaT09PWEmJih0aGlzLmZpcnN0Q2hpbGRfPWcpLGo9PT1hJiYodGhpcy5sYXN0Q2hpbGRfPWgpLGgmJihoLm5leHRTaWJsaW5nXz1nKSxnJiYoZy5wcmV2aW91c1NpYmxpbmdfPWgpLGEucHJldmlvdXNTaWJsaW5nXz1hLm5leHRTaWJsaW5nXz1hLnBhcmVudE5vZGVfPXZvaWQgMH1lbHNlIHEodGhpcyksTyh0aGlzLmltcGwsZik7cmV0dXJuIEd8fHkodGhpcywiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmMoYSksbmV4dFNpYmxpbmc6ZyxwcmV2aW91c1NpYmxpbmc6aH0pLEIodGhpcyxhKSxhfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxkKXtiKGEpO3ZhciBlO2lmKHooZCk/ZT1EKGQpOihlPWQsZD1FKGUpKSxkLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3ZhciBoLGk9ZC5uZXh0U2libGluZyxqPWQucHJldmlvdXNTaWJsaW5nLG09IXRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkmJiFzKGEpO3JldHVybiBtP2g9ZyhhKTooaT09PWEmJihpPWEubmV4dFNpYmxpbmcpLGg9ZihhLHRoaXMsaixpKSksbT8obih0aGlzLGEpLHEodGhpcyksTS5jYWxsKHRoaXMuaW1wbCxEKGEpLGUpKToodGhpcy5maXJzdENoaWxkPT09ZCYmKHRoaXMuZmlyc3RDaGlsZF89aFswXSksdGhpcy5sYXN0Q2hpbGQ9PT1kJiYodGhpcy5sYXN0Q2hpbGRfPWhbaC5sZW5ndGgtMV0pLGQucHJldmlvdXNTaWJsaW5nXz1kLm5leHRTaWJsaW5nXz1kLnBhcmVudE5vZGVfPXZvaWQgMCxlLnBhcmVudE5vZGUmJk0uY2FsbChlLnBhcmVudE5vZGUscCh0aGlzLGgpLGUpKSx5KHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6aCxyZW1vdmVkTm9kZXM6YyhkKSxuZXh0U2libGluZzppLHByZXZpb3VzU2libGluZzpqfSksbChkKSxrKGgpLGR9LG5vZGVJc0luc2VydGVkXzpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYS5ub2RlSXNJbnNlcnRlZF8oKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86RSh0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBmaXJzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZmlyc3RDaGlsZF8/dGhpcy5maXJzdENoaWxkXzpFKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmxhc3RDaGlsZF8/dGhpcy5sYXN0Q2hpbGRfOkUodGhpcy5pbXBsLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpFKHRoaXMuaW1wbC5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5wcmV2aW91c1NpYmxpbmdfP3RoaXMucHJldmlvdXNTaWJsaW5nXzpFKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgcGFyZW50RWxlbWVudCgpe2Zvcih2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5ub2RlVHlwZSE9PXQuRUxFTUVOVF9OT0RFOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX0sZ2V0IHRleHRDb250ZW50KCl7Zm9yKHZhciBhPSIiLGI9dGhpcy5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKWIubm9kZVR5cGUhPXQuQ09NTUVOVF9OT0RFJiYoYSs9Yi50ZXh0Q29udGVudCk7cmV0dXJuIGF9LHNldCB0ZXh0Q29udGVudChhKXt2YXIgYj1pKHRoaXMuY2hpbGROb2Rlcyk7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7aWYocih0aGlzKSwiIiE9PWEpe3ZhciBjPXRoaXMuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpO3RoaXMuYXBwZW5kQ2hpbGQoYyl9fWVsc2UgcSh0aGlzKSx0aGlzLmltcGwudGV4dENvbnRlbnQ9YTt2YXIgZD1pKHRoaXMuY2hpbGROb2Rlcyk7eSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmQscmVtb3ZlZE5vZGVzOmJ9KSxtKGIpLGsoZCl9LGdldCBjaGlsZE5vZGVzKCl7Zm9yKHZhciBhPW5ldyB2LGI9MCxjPXRoaXMuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZylhW2IrK109YztyZXR1cm4gYS5sZW5ndGg9YixhfSxjbG9uZU5vZGU6ZnVuY3Rpb24oYSl7dmFyIGI9RSh0aGlzLmltcGwuY2xvbmVOb2RlKCExKSk7aWYoYSlmb3IodmFyIGM9dGhpcy5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWIuYXBwZW5kQ2hpbGQoYy5jbG9uZU5vZGUoITApKTtyZXR1cm4gYn0sY29udGFpbnM6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuITE7aWYoYT1GKGEpLGE9PT10aGlzKXJldHVybiEwO3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYj90aGlzLmNvbnRhaW5zKGIpOiExfSxjb21wYXJlRG9jdW1lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gSi5jYWxsKHRoaXMuaW1wbCxEKGEpKX19KSx4KHQsIm93bmVyRG9jdW1lbnQiKSxDKEgsdCxkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGRlbGV0ZSB0LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yLGRlbGV0ZSB0LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLHQucHJvdG90eXBlPUEoT2JqZWN0LmNyZWF0ZSh1LnByb3RvdHlwZSksdC5wcm90b3R5cGUpLGEubm9kZVdhc0FkZGVkPWosYS5ub2RlV2FzUmVtb3ZlZD1sLGEubm9kZXNXZXJlQWRkZWQ9ayxhLm5vZGVzV2VyZVJlbW92ZWQ9bSxhLnNuYXBzaG90Tm9kZUxpc3Q9aSxhLndyYXBwZXJzLk5vZGU9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGMpe2Zvcih2YXIgZCxlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7ZTspe2lmKGUubWF0Y2hlcyhjKSlyZXR1cm4gZTtpZihkPWIoZSxjKSlyZXR1cm4gZDtlPWUubmV4dEVsZW1lbnRTaWJsaW5nfXJldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiLGQpe2Zvcih2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KWUubWF0Y2hlcyhiKSYmKGRbZC5sZW5ndGgrK109ZSksYyhlLGIsZCksZT1lLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gZH12YXIgZD17cXVlcnlTZWxlY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gYih0aGlzLGEpfSxxdWVyeVNlbGVjdG9yQWxsOmZ1bmN0aW9uKGEpe3JldHVybiBjKHRoaXMsYSxuZXcgTm9kZUxpc3QpfX0sZT17Z2V0RWxlbWVudHNCeVRhZ05hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbChhKX0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCIuIithKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWVOUzpmdW5jdGlvbihhLGIpe2lmKCIqIj09PWEpcmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYik7Zm9yKHZhciBjPW5ldyBOb2RlTGlzdCxkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYiksZT0wLGY9MDtlPGQubGVuZ3RoO2UrKylkW2VdLm5hbWVzcGFjZVVSST09PWEmJihjW2YrK109ZFtlXSk7cmV0dXJuIGMubGVuZ3RoPWYsY319O2EuR2V0RWxlbWVudHNCeUludGVyZmFjZT1lLGEuU2VsZWN0b3JzSW50ZXJmYWNlPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Zm9yKDthJiZhLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWE9YS5uZXh0U2libGluZztyZXR1cm4gYX1mdW5jdGlvbiBjKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEucHJldmlvdXNTaWJsaW5nO3JldHVybiBhfXZhciBkPWEud3JhcHBlcnMuTm9kZUxpc3QsZT17Z2V0IGZpcnN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGIodGhpcy5maXJzdENoaWxkKX0sZ2V0IGxhc3RFbGVtZW50Q2hpbGQoKXtyZXR1cm4gYyh0aGlzLmxhc3RDaGlsZCl9LGdldCBjaGlsZEVsZW1lbnRDb3VudCgpe2Zvcih2YXIgYT0wLGI9dGhpcy5maXJzdEVsZW1lbnRDaGlsZDtiO2I9Yi5uZXh0RWxlbWVudFNpYmxpbmcpYSsrO3JldHVybiBhfSxnZXQgY2hpbGRyZW4oKXtmb3IodmFyIGE9bmV3IGQsYj0wLGM9dGhpcy5maXJzdEVsZW1lbnRDaGlsZDtjO2M9Yy5uZXh0RWxlbWVudFNpYmxpbmcpYVtiKytdPWM7cmV0dXJuIGEubGVuZ3RoPWIsYX19LGY9e2dldCBuZXh0RWxlbWVudFNpYmxpbmcoKXtyZXR1cm4gYih0aGlzLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzRWxlbWVudFNpYmxpbmcoKXtyZXR1cm4gYyh0aGlzLnByZXZpb3VzU2libGluZyl9fTthLkNoaWxkTm9kZUludGVyZmFjZT1mLGEuUGFyZW50Tm9kZUludGVyZmFjZT1lfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfXZhciBjPWEuQ2hpbGROb2RlSW50ZXJmYWNlLGQ9YS53cmFwcGVycy5Ob2RlLGU9YS5lbnF1ZXVlTXV0YXRpb24sZj1hLm1peGluLGc9YS5yZWdpc3RlcldyYXBwZXIsaD13aW5kb3cuQ2hhcmFjdGVyRGF0YTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxmKGIucHJvdG90eXBlLHtnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoYSl7dGhpcy5kYXRhPWF9LGdldCBkYXRhKCl7cmV0dXJuIHRoaXMuaW1wbC5kYXRhfSxzZXQgZGF0YShhKXt2YXIgYj10aGlzLmltcGwuZGF0YTtlKHRoaXMsImNoYXJhY3RlckRhdGEiLHtvbGRWYWx1ZTpifSksdGhpcy5pbXBsLmRhdGE9YX19KSxmKGIucHJvdG90eXBlLGMpLGcoaCxiLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGE+Pj4wfWZ1bmN0aW9uIGMoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGQ9YS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhLGU9KGEuZW5xdWV1ZU11dGF0aW9uLGEubWl4aW4pLGY9YS5yZWdpc3RlcldyYXBwZXIsZz13aW5kb3cuVGV4dDtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGMucHJvdG90eXBlLHtzcGxpdFRleHQ6ZnVuY3Rpb24oYSl7YT1iKGEpO3ZhciBjPXRoaXMuZGF0YTtpZihhPmMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW5kZXhTaXplRXJyb3IiKTt2YXIgZD1jLnNsaWNlKDAsYSksZT1jLnNsaWNlKGEpO3RoaXMuZGF0YT1kO3ZhciBmPXRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKTtyZXR1cm4gdGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYsdGhpcy5uZXh0U2libGluZyksZn19KSxmKGcsYyxkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGEud3JhcHBlcnMuVGV4dD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIsYyl7dmFyIGQ9Yi5wYXJlbnROb2RlO2lmKGQmJmQuc2hhZG93Um9vdCl7dmFyIGU9YS5nZXRSZW5kZXJlckZvckhvc3QoZCk7ZS5kZXBlbmRzT25BdHRyaWJ1dGUoYykmJmUuaW52YWxpZGF0ZSgpfX1mdW5jdGlvbiBjKGEsYixjKXtrKGEsImF0dHJpYnV0ZXMiLHtuYW1lOmIsbmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6Y30pfWZ1bmN0aW9uIGQoYSl7aC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gZShhLGMsZCl7dmFyIGU9ZHx8YztPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2NdfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsW2NdPWEsYih0aGlzLGUpfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfXZhciBmPWEuQ2hpbGROb2RlSW50ZXJmYWNlLGc9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGg9YS53cmFwcGVycy5Ob2RlLGk9YS5QYXJlbnROb2RlSW50ZXJmYWNlLGo9YS5TZWxlY3RvcnNJbnRlcmZhY2Usaz0oYS5hZGRXcmFwTm9kZUxpc3RNZXRob2QsYS5lbnF1ZXVlTXV0YXRpb24pLGw9YS5taXhpbixtPShhLm9uZU9mLGEucmVnaXN0ZXJXcmFwcGVyKSxuPWEud3JhcHBlcnMsbz13aW5kb3cuRWxlbWVudCxwPVsibWF0Y2hlcyIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIl0uZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBvLnByb3RvdHlwZVthXX0pLHE9cFswXSxyPW8ucHJvdG90eXBlW3FdO2QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpLGwoZC5wcm90b3R5cGUse2NyZWF0ZVNoYWRvd1Jvb3Q6ZnVuY3Rpb24oKXt2YXIgYj1uZXcgbi5TaGFkb3dSb290KHRoaXMpO3RoaXMuaW1wbC5wb2x5bWVyU2hhZG93Um9vdF89Yjt2YXIgYz1hLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzKTtyZXR1cm4gYy5pbnZhbGlkYXRlKCksYn0sZ2V0IHNoYWRvd1Jvb3QoKXtyZXR1cm4gdGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSb290X3x8bnVsbH0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsZCl7dmFyIGU9dGhpcy5pbXBsLmdldEF0dHJpYnV0ZShhKTt0aGlzLmltcGwuc2V0QXR0cmlidXRlKGEsZCksYyh0aGlzLGEsZSksYih0aGlzLGEpfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5pbXBsLmdldEF0dHJpYnV0ZShhKTt0aGlzLmltcGwucmVtb3ZlQXR0cmlidXRlKGEpLGModGhpcyxhLGQpLGIodGhpcyxhKX0sbWF0Y2hlczpmdW5jdGlvbihhKXtyZXR1cm4gci5jYWxsKHRoaXMuaW1wbCxhKX19KSxwLmZvckVhY2goZnVuY3Rpb24oYSl7Im1hdGNoZXMiIT09YSYmKGQucHJvdG90eXBlW2FdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1hdGNoZXMoYSl9KX0pLG8ucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QmJihkLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PWQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QpLGUoZC5wcm90b3R5cGUsImlkIiksZShkLnByb3RvdHlwZSwiY2xhc3NOYW1lIiwiY2xhc3MiKSxsKGQucHJvdG90eXBlLGYpLGwoZC5wcm90b3R5cGUsZyksbChkLnByb3RvdHlwZSxpKSxsKGQucHJvdG90eXBlLGopLG0obyxkLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhudWxsLCJ4IikpLGEubWF0Y2hlc05hbWVzPXAsYS53cmFwcGVycy5FbGVtZW50PWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7c3dpdGNoKGEpe2Nhc2UiJiI6cmV0dXJuIiZhbXA7IjtjYXNlIjwiOnJldHVybiImbHQ7IjtjYXNlIj4iOnJldHVybiImZ3Q7IjtjYXNlJyInOnJldHVybiImcXVvdDsiO2Nhc2UiwqAiOnJldHVybiImbmJzcDsifX1mdW5jdGlvbiBjKGEpe3JldHVybiBhLnJlcGxhY2UoeSxiKX1mdW5jdGlvbiBkKGEpe3JldHVybiBhLnJlcGxhY2UoeixiKX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYj17fSxjPTA7YzxhLmxlbmd0aDtjKyspYlthW2NdXT0hMDtyZXR1cm4gYn1mdW5jdGlvbiBmKGEsYil7c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgTm9kZS5FTEVNRU5UX05PREU6Zm9yKHZhciBlLGY9YS50YWdOYW1lLnRvTG93ZXJDYXNlKCksaD0iPCIrZixpPWEuYXR0cmlidXRlcyxqPTA7ZT1pW2pdO2orKyloKz0iICIrZS5uYW1lKyc9IicrYyhlLnZhbHVlKSsnIic7cmV0dXJuIGgrPSI+IixBW2ZdP2g6aCtnKGEpKyI8LyIrZisiPiI7Y2FzZSBOb2RlLlRFWFRfTk9ERTp2YXIgaz1hLmRhdGE7cmV0dXJuIGImJkJbYi5sb2NhbE5hbWVdP2s6ZChrKTtjYXNlIE5vZGUuQ09NTUVOVF9OT0RFOnJldHVybiI8IS0tIithLmRhdGErIi0tPiI7ZGVmYXVsdDp0aHJvdyBjb25zb2xlLmVycm9yKGEpLG5ldyBFcnJvcigibm90IGltcGxlbWVudGVkIil9fWZ1bmN0aW9uIGcoYSl7Zm9yKHZhciBiPSIiLGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWIrPWYoYyxhKTtyZXR1cm4gYn1mdW5jdGlvbiBoKGEsYixjKXt2YXIgZD1jfHwiZGl2IjthLnRleHRDb250ZW50PSIiO3ZhciBlPXcoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZCkpO2UuaW5uZXJIVE1MPWI7Zm9yKHZhciBmO2Y9ZS5maXJzdENoaWxkOylhLmFwcGVuZENoaWxkKHgoZikpfWZ1bmN0aW9uIGkoYSl7by5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gaihhLGIpe3ZhciBjPXcoYS5jbG9uZU5vZGUoITEpKTtjLmlubmVySFRNTD1iO2Zvcih2YXIgZCxlPXcoZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtkPWMuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChkKTtyZXR1cm4geChlKX1mdW5jdGlvbiBrKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl19fWZ1bmN0aW9uIGwoYSl7cChpLGEsayhhKSl9ZnVuY3Rpb24gbShiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsYix7Z2V0OmsoYiksc2V0OmZ1bmN0aW9uKGMpe2EucmVuZGVyQWxsUGVuZGluZygpLHRoaXMuaW1wbFtiXT1jfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfWZ1bmN0aW9uIG4oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLGIse3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGEucmVuZGVyQWxsUGVuZGluZygpLHRoaXMuaW1wbFtiXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX0sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX12YXIgbz1hLndyYXBwZXJzLkVsZW1lbnQscD1hLmRlZmluZUdldHRlcixxPWEuZW5xdWV1ZU11dGF0aW9uLHI9YS5taXhpbixzPWEubm9kZXNXZXJlQWRkZWQsdD1hLm5vZGVzV2VyZVJlbW92ZWQsdT1hLnJlZ2lzdGVyV3JhcHBlcix2PWEuc25hcHNob3ROb2RlTGlzdCx3PWEudW53cmFwLHg9YS53cmFwLHk9L1smXHUwMEEwIl0vZyx6PS9bJlx1MDBBMDw+XS9nLEE9ZShbImFyZWEiLCJiYXNlIiwiYnIiLCJjb2wiLCJjb21tYW5kIiwiZW1iZWQiLCJociIsImltZyIsImlucHV0Iiwia2V5Z2VuIiwibGluayIsIm1ldGEiLCJwYXJhbSIsInNvdXJjZSIsInRyYWNrIiwid2JyIl0pLEI9ZShbInN0eWxlIiwic2NyaXB0IiwieG1wIiwiaWZyYW1lIiwibm9lbWJlZCIsIm5vZnJhbWVzIiwicGxhaW50ZXh0Iiwibm9zY3JpcHQiXSksQz0vTVNJRS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxEPXdpbmRvdy5IVE1MRWxlbWVudDtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxyKGkucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGcodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7aWYoQyYmQlt0aGlzLmxvY2FsTmFtZV0pcmV0dXJuIHZvaWQodGhpcy50ZXh0Q29udGVudD1hKTt2YXIgYj12KHRoaXMuY2hpbGROb2Rlcyk7dGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKT9oKHRoaXMsYSx0aGlzLnRhZ05hbWUpOnRoaXMuaW1wbC5pbm5lckhUTUw9YTt2YXIgYz12KHRoaXMuY2hpbGROb2Rlcyk7cSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmMscmVtb3ZlZE5vZGVzOmJ9KSx0KGIpLHMoYyl9LGdldCBvdXRlckhUTUwoKXtyZXR1cm4gZih0aGlzLHRoaXMucGFyZW50Tm9kZSl9LHNldCBvdXRlckhUTUwoYSl7dmFyIGI9dGhpcy5wYXJlbnROb2RlO2lmKGIpe2IuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGM9aihiLGEpO2IucmVwbGFjZUNoaWxkKGMsdGhpcyl9fSxpbnNlcnRBZGphY2VudEhUTUw6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO3N3aXRjaChTdHJpbmcoYSkudG9Mb3dlckNhc2UoKSl7Y2FzZSJiZWZvcmViZWdpbiI6Yz10aGlzLnBhcmVudE5vZGUsZD10aGlzO2JyZWFrO2Nhc2UiYWZ0ZXJlbmQiOmM9dGhpcy5wYXJlbnROb2RlLGQ9dGhpcy5uZXh0U2libGluZzticmVhaztjYXNlImFmdGVyYmVnaW4iOmM9dGhpcyxkPXRoaXMuZmlyc3RDaGlsZDticmVhaztjYXNlImJlZm9yZWVuZCI6Yz10aGlzLGQ9bnVsbDticmVhaztkZWZhdWx0OnJldHVybn12YXIgZT1qKGMsYik7Yy5pbnNlcnRCZWZvcmUoZSxkKX19KSxbImNsaWVudEhlaWdodCIsImNsaWVudExlZnQiLCJjbGllbnRUb3AiLCJjbGllbnRXaWR0aCIsIm9mZnNldEhlaWdodCIsIm9mZnNldExlZnQiLCJvZmZzZXRUb3AiLCJvZmZzZXRXaWR0aCIsInNjcm9sbEhlaWdodCIsInNjcm9sbFdpZHRoIl0uZm9yRWFjaChsKSxbInNjcm9sbExlZnQiLCJzY3JvbGxUb3AiXS5mb3JFYWNoKG0pLFsiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZ2V0Q2xpZW50UmVjdHMiLCJzY3JvbGxJbnRvVmlldyJdLmZvckVhY2gobiksdShELGksZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYiIpKSxhLndyYXBwZXJzLkhUTUxFbGVtZW50PWksYS5nZXRJbm5lckhUTUw9ZyxhLnNldElubmVySFRNTD1ofSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXAsZz13aW5kb3cuSFRNTENhbnZhc0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0Q29udGV4dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW1wbC5nZXRDb250ZXh0LmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpO3JldHVybiBhJiZmKGEpfX0pLGUoZyxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpKSxhLndyYXBwZXJzLkhUTUxDYW52YXNFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPXdpbmRvdy5IVE1MQ29udGVudEVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IHNlbGVjdCgpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgic2VsZWN0Iil9LHNldCBzZWxlY3QoYSl7dGhpcy5zZXRBdHRyaWJ1dGUoInNlbGVjdCIsYSl9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbihhLGIpe2MucHJvdG90eXBlLnNldEF0dHJpYnV0ZS5jYWxsKHRoaXMsYSxiKSwic2VsZWN0Ij09PVN0cmluZyhhKS50b0xvd2VyQ2FzZSgpJiZ0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcighMCl9fSksZiYmZShmLGIpLGEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGMpKXRocm93IG5ldyBUeXBlRXJyb3IoIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3ZhciBlPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpO2QuY2FsbCh0aGlzLGUpLGcoZSx0aGlzKSx2b2lkIDAhPT1hJiYoZS53aWR0aD1hKSx2b2lkIDAhPT1iJiYoZS5oZWlnaHQ9Yil9dmFyIGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLnJld3JhcCxoPXdpbmRvdy5IVE1MSW1hZ2VFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpKSxjLnByb3RvdHlwZT1iLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxJbWFnZUVsZW1lbnQ9YixhLndyYXBwZXJzLkltYWdlPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPXdpbmRvdy5IVE1MU2hhZG93RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHt9KSxmJiZlKGYsYiksYS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhLmRlZmF1bHRWaWV3KXJldHVybiBhO3ZhciBiPW0uZ2V0KGEpO2lmKCFiKXtmb3IoYj1hLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yi5sYXN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5sYXN0Q2hpbGQpO20uc2V0KGEsYil9cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGMsZD1iKGEub3duZXJEb2N1bWVudCksZT1qKGQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtjPWEuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChjKTtyZXR1cm4gZX1mdW5jdGlvbiBkKGEpe2lmKGUuY2FsbCh0aGlzLGEpLCFuKXt2YXIgYj1jKGEpO2wuc2V0KHRoaXMsayhiKSl9fXZhciBlPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZj1hLmdldElubmVySFRNTCxnPWEubWl4aW4saD1hLnJlZ2lzdGVyV3JhcHBlcixpPWEuc2V0SW5uZXJIVE1MLGo9YS51bndyYXAsaz1hLndyYXAsbD1uZXcgV2Vha01hcCxtPW5ldyBXZWFrTWFwLG49d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZyhkLnByb3RvdHlwZSx7Z2V0IGNvbnRlbnQoKXtyZXR1cm4gbj9rKHRoaXMuaW1wbC5jb250ZW50KTpsLmdldCh0aGlzKX0sZ2V0IGlubmVySFRNTCgpe3JldHVybiBmKHRoaXMuY29udGVudCl9LHNldCBpbm5lckhUTUwoYSl7aSh0aGlzLmNvbnRlbnQsYSl9fSksbiYmaChuLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLnJlZ2lzdGVyV3JhcHBlcixlPXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoZSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIikpLGEud3JhcHBlcnMuSFRNTE1lZGlhRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGMoYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGI9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpKTtkLmNhbGwodGhpcyxiKSxnKGIsdGhpcyksYi5zZXRBdHRyaWJ1dGUoInByZWxvYWQiLCJhdXRvIiksdm9pZCAwIT09YSYmYi5zZXRBdHRyaWJ1dGUoInNyYyIsYSl9dmFyIGQ9YS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxBdWRpb0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSksYy5wcm90b3R5cGU9Yi5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MQXVkaW9FbGVtZW50PWIsYS53cmFwcGVycy5BdWRpbz1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhLnJlcGxhY2UoL1xzKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uIGMoYSl7ZS5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gZChhLGIsYyxmKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt2YXIgZz1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtlLmNhbGwodGhpcyxnKSxoKGcsdGhpcyksdm9pZCAwIT09YSYmKGcudGV4dD1hKSx2b2lkIDAhPT1iJiZnLnNldEF0dHJpYnV0ZSgidmFsdWUiLGIpLGM9PT0hMCYmZy5zZXRBdHRyaWJ1dGUoInNlbGVjdGVkIiwiIiksZy5zZWxlY3RlZD1mPT09ITB9dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEucmV3cmFwLGk9YS51bndyYXAsaj1hLndyYXAsaz13aW5kb3cuSFRNTE9wdGlvbkVsZW1lbnQ7Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZihjLnByb3RvdHlwZSx7Z2V0IHRleHQoKXtyZXR1cm4gYih0aGlzLnRleHRDb250ZW50KX0sc2V0IHRleHQoYSl7dGhpcy50ZXh0Q29udGVudD1iKFN0cmluZyhhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGooaSh0aGlzKS5mb3JtKX19KSxnKGssYyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSksZC5wcm90b3R5cGU9Yy5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MT3B0aW9uRWxlbWVudD1jLGEud3JhcHBlcnMuT3B0aW9uPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7c3dpdGNoKGEubG9jYWxOYW1lKXtjYXNlImNvbnRlbnQiOnJldHVybiBuZXcgYyhhKTtjYXNlInNoYWRvdyI6cmV0dXJuIG5ldyBlKGEpO2Nhc2UidGVtcGxhdGUiOnJldHVybiBuZXcgZihhKX1kLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxkPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZT1hLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50LGY9YS53cmFwcGVycy5IVE1MVGVtcGxhdGVFbGVtZW50LGc9KGEubWl4aW4sYS5yZWdpc3RlcldyYXBwZXIpLGg9d2luZG93LkhUTUxVbmtub3duRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxnKGgsYiksYS53cmFwcGVycy5IVE1MVW5rbm93bkVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7dmFyIGI9YS5yZWdpc3Rlck9iamVjdCxjPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoYywidGl0bGUiKSxlPWIoZCksZj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLmNvbnN0cnVjdG9yO2Eud3JhcHBlcnMuU1ZHRWxlbWVudD1mfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe20uY2FsbCh0aGlzLGEpfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEudW53cmFwLGY9YS53cmFwLGc9d2luZG93LlNWR1VzZUVsZW1lbnQsaD0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLGk9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoaCwiZyIpKSxqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhoLCJ1c2UiKSxrPWkuY29uc3RydWN0b3IsbD1PYmplY3QuZ2V0UHJvdG90eXBlT2Yoay5wcm90b3R5cGUpLG09bC5jb25zdHJ1Y3RvcjtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGwpLCJpbnN0YW5jZVJvb3QiaW4gaiYmYyhiLnByb3RvdHlwZSx7Z2V0IGluc3RhbmNlUm9vdCgpe3JldHVybiBmKGUodGhpcykuaW5zdGFuY2VSb290KX0sZ2V0IGFuaW1hdGVkSW5zdGFuY2VSb290KCl7cmV0dXJuIGYoZSh0aGlzKS5hbmltYXRlZEluc3RhbmNlUm9vdCl9fSksZChnLGIsaiksYS53cmFwcGVycy5TVkdVc2VFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5FdmVudFRhcmdldCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcCxnPXdpbmRvdy5TVkdFbGVtZW50SW5zdGFuY2U7ZyYmKGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCBjb3JyZXNwb25kaW5nRWxlbWVudCgpe3JldHVybiBmKHRoaXMuaW1wbC5jb3JyZXNwb25kaW5nRWxlbWVudCl9LGdldCBjb3JyZXNwb25kaW5nVXNlRWxlbWVudCgpe3JldHVybiBmKHRoaXMuaW1wbC5jb3JyZXNwb25kaW5nVXNlRWxlbWVudCl9LGdldCBwYXJlbnROb2RlKCl7cmV0dXJuIGYodGhpcy5pbXBsLnBhcmVudE5vZGUpfSxnZXQgY2hpbGROb2Rlcygpe3Rocm93IG5ldyBFcnJvcigiTm90IGltcGxlbWVudGVkIil9LGdldCBmaXJzdENoaWxkKCl7cmV0dXJuIGYodGhpcy5pbXBsLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIGYodGhpcy5pbXBsLmxhc3RDaGlsZCl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gZih0aGlzLmltcGwucHJldmlvdXNTaWJsaW5nKX0sZ2V0IG5leHRTaWJsaW5nKCl7cmV0dXJuIGYodGhpcy5pbXBsLm5leHRTaWJsaW5nKX19KSxlKGcsYiksYS53cmFwcGVycy5TVkdFbGVtZW50SW5zdGFuY2U9Yil9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPWF9dmFyIGM9YS5taXhpbixkPWEucmVnaXN0ZXJXcmFwcGVyLGU9YS51bndyYXAsZj1hLnVud3JhcElmTmVlZGVkLGc9YS53cmFwLGg9d2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtjKGIucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGcodGhpcy5pbXBsLmNhbnZhcyl9LGRyYXdJbWFnZTpmdW5jdGlvbigpe2FyZ3VtZW50c1swXT1mKGFyZ3VtZW50c1swXSksdGhpcy5pbXBsLmRyYXdJbWFnZS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX0sY3JlYXRlUGF0dGVybjpmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09ZShhcmd1bWVudHNbMF0pLHRoaXMuaW1wbC5jcmVhdGVQYXR0ZXJuLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX0pLGQoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLmdldENvbnRleHQoIjJkIikpLGEud3JhcHBlcnMuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPWF9dmFyIGM9YS5taXhpbixkPWEucmVnaXN0ZXJXcmFwcGVyLGU9YS51bndyYXBJZk5lZWRlZCxmPWEud3JhcCxnPXdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQ7aWYoZyl7YyhiLnByb3RvdHlwZSx7Z2V0IGNhbnZhcygpe3JldHVybiBmKHRoaXMuaW1wbC5jYW52YXMpfSx0ZXhJbWFnZTJEOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzVdPWUoYXJndW1lbnRzWzVdKSx0aGlzLmltcGwudGV4SW1hZ2UyRC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX0sdGV4U3ViSW1hZ2UyRDpmdW5jdGlvbigpe2FyZ3VtZW50c1s2XT1lKGFyZ3VtZW50c1s2XSksdGhpcy5pbXBsLnRleFN1YkltYWdlMkQuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9fSk7dmFyIGg9L1dlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KT97ZHJhd2luZ0J1ZmZlckhlaWdodDpudWxsLGRyYXdpbmdCdWZmZXJXaWR0aDpudWxsfTp7fTtkKGcsYixoKSxhLndyYXBwZXJzLldlYkdMUmVuZGVyaW5nQ29udGV4dD1ifX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLnJlZ2lzdGVyV3JhcHBlcixkPWEudW53cmFwLGU9YS51bndyYXBJZk5lZWRlZCxmPWEud3JhcCxnPXdpbmRvdy5SYW5nZTtiLnByb3RvdHlwZT17Z2V0IHN0YXJ0Q29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLnN0YXJ0Q29udGFpbmVyKX0sZ2V0IGVuZENvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5lbmRDb250YWluZXIpfSxnZXQgY29tbW9uQW5jZXN0b3JDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuY29tbW9uQW5jZXN0b3JDb250YWluZXIpfSxzZXRTdGFydDpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5zZXRTdGFydChlKGEpLGIpfSxzZXRFbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuc2V0RW5kKGUoYSksYil9LHNldFN0YXJ0QmVmb3JlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRTdGFydEJlZm9yZShlKGEpKX0sc2V0U3RhcnRBZnRlcjpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0U3RhcnRBZnRlcihlKGEpKX0sc2V0RW5kQmVmb3JlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRFbmRCZWZvcmUoZShhKSl9LHNldEVuZEFmdGVyOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRFbmRBZnRlcihlKGEpKX0sc2VsZWN0Tm9kZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2VsZWN0Tm9kZShlKGEpKX0sc2VsZWN0Tm9kZUNvbnRlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3ROb2RlQ29udGVudHMoZShhKSl9LGNvbXBhcmVCb3VuZGFyeVBvaW50czpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmltcGwuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKGEsZChiKSl9LGV4dHJhY3RDb250ZW50czpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5leHRyYWN0Q29udGVudHMoKSl9LGNsb25lQ29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLmltcGwuY2xvbmVDb250ZW50cygpKX0saW5zZXJ0Tm9kZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuaW5zZXJ0Tm9kZShlKGEpKX0sc3Vycm91bmRDb250ZW50czpmdW5jdGlvbihhKXt0aGlzLmltcGwuc3Vycm91bmRDb250ZW50cyhlKGEpKX0sY2xvbmVSYW5nZTpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5jbG9uZVJhbmdlKCkpfSxpc1BvaW50SW5SYW5nZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmltcGwuaXNQb2ludEluUmFuZ2UoZShhKSxiKX0sY29tcGFyZVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5jb21wYXJlUG9pbnQoZShhKSxiKX0saW50ZXJzZWN0c05vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1wbC5pbnRlcnNlY3RzTm9kZShlKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxnLnByb3RvdHlwZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQmJihiLnByb3RvdHlwZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcy5pbXBsLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChhKSl9KSxjKHdpbmRvdy5SYW5nZSxiLGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkpLGEud3JhcHBlcnMuUmFuZ2U9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7dmFyIGI9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGM9YS5QYXJlbnROb2RlSW50ZXJmYWNlLGQ9YS5TZWxlY3RvcnNJbnRlcmZhY2UsZT1hLm1peGluLGY9YS5yZWdpc3Rlck9iamVjdCxnPWYoZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtlKGcucHJvdG90eXBlLGMpLGUoZy5wcm90b3R5cGUsZCksZShnLnByb3RvdHlwZSxiKTt2YXIgaD1mKGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoIiIpKTthLndyYXBwZXJzLkNvbW1lbnQ9aCxhLndyYXBwZXJzLkRvY3VtZW50RnJhZ21lbnQ9Z30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt2YXIgYj1pKGEuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Yy5jYWxsKHRoaXMsYiksZyhiLHRoaXMpO3ZhciBkPWEuc2hhZG93Um9vdDtrLnNldCh0aGlzLGQpLGouc2V0KHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50LGQ9YS5lbGVtZW50RnJvbVBvaW50LGU9YS5nZXRJbm5lckhUTUwsZj1hLm1peGluLGc9YS5yZXdyYXAsaD1hLnNldElubmVySFRNTCxpPWEudW53cmFwLGo9bmV3IFdlYWtNYXAsaz1uZXcgV2Vha01hcCxsPS9bIFx0XG5cclxmXS87Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZihiLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBlKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2godGhpcyxhKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxnZXQgb2xkZXJTaGFkb3dSb290KCl7cmV0dXJuIGsuZ2V0KHRoaXMpfHxudWxsfSxnZXQgaG9zdCgpe3JldHVybiBqLmdldCh0aGlzKXx8bnVsbH0saW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyOmZ1bmN0aW9uKCl7cmV0dXJuIGouZ2V0KHRoaXMpLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGQodGhpcyx0aGlzLm93bmVyRG9jdW1lbnQsYSxiKX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGwudGVzdChhKT9udWxsOnRoaXMucXVlcnlTZWxlY3RvcignW2lkPSInK2ErJyJdJyl9fSksYS53cmFwcGVycy5TaGFkb3dSb290PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7YS5wcmV2aW91c1NpYmxpbmdfPWEucHJldmlvdXNTaWJsaW5nLGEubmV4dFNpYmxpbmdfPWEubmV4dFNpYmxpbmcsYS5wYXJlbnROb2RlXz1hLnBhcmVudE5vZGV9ZnVuY3Rpb24gYyhhLGMsZSl7dmFyIGY9RihhKSxnPUYoYyksaD1lP0YoZSk6bnVsbDtpZihkKGMpLGIoYyksZSlhLmZpcnN0Q2hpbGQ9PT1lJiYoYS5maXJzdENoaWxkXz1lKSxlLnByZXZpb3VzU2libGluZ189ZS5wcmV2aW91c1NpYmxpbmc7ZWxzZXthLmxhc3RDaGlsZF89YS5sYXN0Q2hpbGQsYS5sYXN0Q2hpbGQ9PT1hLmZpcnN0Q2hpbGQmJihhLmZpcnN0Q2hpbGRfPWEuZmlyc3RDaGlsZCk7dmFyIGk9RyhmLmxhc3RDaGlsZCk7aSYmKGkubmV4dFNpYmxpbmdfPWkubmV4dFNpYmxpbmcpfWYuaW5zZXJ0QmVmb3JlKGcsaCl9ZnVuY3Rpb24gZChhKXt2YXIgYz1GKGEpLGQ9Yy5wYXJlbnROb2RlO2lmKGQpe3ZhciBlPUcoZCk7YihhKSxhLnByZXZpb3VzU2libGluZyYmKGEucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1hKSxhLm5leHRTaWJsaW5nJiYoYS5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPWEpLGUubGFzdENoaWxkPT09YSYmKGUubGFzdENoaWxkXz1hKSxlLmZpcnN0Q2hpbGQ9PT1hJiYoZS5maXJzdENoaWxkXz1hKSxkLnJlbW92ZUNoaWxkKGMpfX1mdW5jdGlvbiBlKGEsYil7ZyhiKS5wdXNoKGEpLHgoYSxiKTt2YXIgYz1JLmdldChhKTtjfHxJLnNldChhLGM9W10pLGMucHVzaChiKX1mdW5jdGlvbiBmKGEpe0guc2V0KGEsW10pfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIEguZ2V0KGEpfWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYn1mdW5jdGlvbiBpKGEsYixjKXtmb3IodmFyIGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWlmKGIoZCkpe2lmKGMoZCk9PT0hMSlyZXR1cm59ZWxzZSBpKGQsYixjKX1mdW5jdGlvbiBqKGEsYil7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpO2lmKCFjKXJldHVybiEwO2lmKGM9Yy50cmltKCksIWMpcmV0dXJuITA7aWYoIShhIGluc3RhbmNlb2YgeikpcmV0dXJuITE7aWYoIioiPT09Y3x8Yz09PWEubG9jYWxOYW1lKXJldHVybiEwO2lmKCFMLnRlc3QoYykpcmV0dXJuITE7aWYoIjoiPT09Y1swXSYmIU0udGVzdChjKSlyZXR1cm4hMTt0cnl7cmV0dXJuIGEubWF0Y2hlcyhjKX1jYXRjaChkKXtyZXR1cm4hMX19ZnVuY3Rpb24gaygpe2Zvcih2YXIgYT0wO2E8Ty5sZW5ndGg7YSsrKU9bYV0ucmVuZGVyKCk7Tz1bXX1mdW5jdGlvbiBsKCl7eT1udWxsLGsoKX1mdW5jdGlvbiBtKGEpe3ZhciBiPUsuZ2V0KGEpO3JldHVybiBifHwoYj1uZXcgcShhKSxLLnNldChhLGIpKSxifWZ1bmN0aW9uIG4oYSl7Zm9yKDthO2E9YS5wYXJlbnROb2RlKWlmKGEgaW5zdGFuY2VvZiBEKXJldHVybiBhO3JldHVybiBudWxsfWZ1bmN0aW9uIG8oYSl7cmV0dXJuIG0oYS5ob3N0KX1mdW5jdGlvbiBwKGEpe3RoaXMuc2tpcD0hMSx0aGlzLm5vZGU9YSx0aGlzLmNoaWxkTm9kZXM9W119ZnVuY3Rpb24gcShhKXt0aGlzLmhvc3Q9YSx0aGlzLmRpcnR5PSExLHRoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKSx0aGlzLmFzc29jaWF0ZU5vZGUoYSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEF9ZnVuY3Rpb24gcyhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEF9ZnVuY3Rpb24gdChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEJ9ZnVuY3Rpb24gdShhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEJ9ZnVuY3Rpb24gdihhKXtyZXR1cm4gYS5zaGFkb3dSb290fWZ1bmN0aW9uIHcoYSl7Zm9yKHZhciBiPVtdLGM9YS5zaGFkb3dSb290O2M7Yz1jLm9sZGVyU2hhZG93Um9vdCliLnB1c2goYyk7cmV0dXJuIGJ9ZnVuY3Rpb24geChhLGIpe0ouc2V0KGEsYil9dmFyIHksej1hLndyYXBwZXJzLkVsZW1lbnQsQT1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxCPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsQz1hLndyYXBwZXJzLk5vZGUsRD1hLndyYXBwZXJzLlNoYWRvd1Jvb3QsRT0oYS5hc3NlcnQsYS5taXhpbixhLm9uZU9mKSxGPWEudW53cmFwLEc9YS53cmFwLEg9bmV3IFdlYWtNYXAsST1uZXcgV2Vha01hcCxKPW5ldyBXZWFrTWFwLEs9bmV3IFdlYWtNYXAsTD0vXlsqLjojW2EtekEtWl98XS8sTT1uZXcgUmVnRXhwKCJeOigiK1sibGluayIsInZpc2l0ZWQiLCJ0YXJnZXQiLCJlbmFibGVkIiwiZGlzYWJsZWQiLCJjaGVja2VkIiwiaW5kZXRlcm1pbmF0ZSIsIm50aC1jaGlsZCIsIm50aC1sYXN0LWNoaWxkIiwibnRoLW9mLXR5cGUiLCJudGgtbGFzdC1vZi10eXBlIiwiZmlyc3QtY2hpbGQiLCJsYXN0LWNoaWxkIiwiZmlyc3Qtb2YtdHlwZSIsImxhc3Qtb2YtdHlwZSIsIm9ubHktb2YtdHlwZSJdLmpvaW4oInwiKSsiKSIpLE49RSh3aW5kb3csWyJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzZXRUaW1lb3V0Il0pLE89W10sUD1uZXcgQXJyYXlTcGxpY2U7UC5lcXVhbHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRihhLm5vZGUpPT09Yn0scC5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgcChhKTtyZXR1cm4gdGhpcy5jaGlsZE5vZGVzLnB1c2goYiksYn0sc3luYzpmdW5jdGlvbihhKXtpZighdGhpcy5za2lwKXtmb3IodmFyIGI9dGhpcy5ub2RlLGU9dGhpcy5jaGlsZE5vZGVzLGY9aChGKGIpKSxnPWF8fG5ldyBXZWFrTWFwLGk9UC5jYWxjdWxhdGVTcGxpY2VzKGUsZiksaj0wLGs9MCxsPTAsbT0wO208aS5sZW5ndGg7bSsrKXtmb3IodmFyIG49aVttXTtsPG4uaW5kZXg7bCsrKWsrKyxlW2orK10uc3luYyhnKTtmb3IodmFyIG89bi5yZW1vdmVkLmxlbmd0aCxwPTA7bz5wO3ArKyl7dmFyIHE9RyhmW2srK10pO2cuZ2V0KHEpfHxkKHEpfWZvcih2YXIgcj1uLmFkZGVkQ291bnQscz1mW2tdJiZHKGZba10pLHA9MDtyPnA7cCsrKXt2YXIgdD1lW2orK10sdT10Lm5vZGU7YyhiLHUscyksZy5zZXQodSwhMCksdC5zeW5jKGcpfWwrPXJ9Zm9yKHZhciBtPWw7bTxlLmxlbmd0aDttKyspZVttXS5zeW5jKGcpfX19LHEucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5kaXJ0eSl7dGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpLHRoaXMudHJlZUNvbXBvc2l0aW9uKCk7dmFyIGI9dGhpcy5ob3N0LGM9Yi5zaGFkb3dSb290O3RoaXMuYXNzb2NpYXRlTm9kZShiKTtmb3IodmFyIGQ9IWUsZT1hfHxuZXcgcChiKSxmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZyl0aGlzLnJlbmRlck5vZGUoYyxlLGYsITEpO2QmJmUuc3luYygpLHRoaXMuZGlydHk9ITF9fSxpbnZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZGlydHkpe2lmKHRoaXMuZGlydHk9ITAsTy5wdXNoKHRoaXMpLHkpcmV0dXJuO3k9d2luZG93W05dKGwsMCl9fSxyZW5kZXJOb2RlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKHYoYykpe2I9Yi5hcHBlbmQoYyk7dmFyIGU9bShjKTtlLmRpcnR5PSEwLGUucmVuZGVyKGIpfWVsc2UgcihjKT90aGlzLnJlbmRlckluc2VydGlvblBvaW50KGEsYixjLGQpOnQoYyk/dGhpcy5yZW5kZXJTaGFkb3dJbnNlcnRpb25Qb2ludChhLGIsYyk6dGhpcy5yZW5kZXJBc0FueURvbVRyZWUoYSxiLGMsZCl9LHJlbmRlckFzQW55RG9tVHJlZTpmdW5jdGlvbihhLGIsYyxkKXtpZihiPWIuYXBwZW5kKGMpLHYoYykpe3ZhciBlPW0oYyk7Yi5za2lwPSFlLmRpcnR5LGUucmVuZGVyKGIpfWVsc2UgZm9yKHZhciBmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZyl0aGlzLnJlbmRlck5vZGUoYSxiLGYsZCl9LHJlbmRlckluc2VydGlvblBvaW50OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWcoYyk7aWYoZS5sZW5ndGgpe3RoaXMuYXNzb2NpYXRlTm9kZShjKTtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGg9ZVtmXTtyKGgpJiZkP3RoaXMucmVuZGVySW5zZXJ0aW9uUG9pbnQoYSxiLGgsZCk6dGhpcy5yZW5kZXJBc0FueURvbVRyZWUoYSxiLGgsZCl9fWVsc2UgdGhpcy5yZW5kZXJGYWxsYmFja0NvbnRlbnQoYSxiLGMpO3RoaXMuYXNzb2NpYXRlTm9kZShjLnBhcmVudE5vZGUpfSxyZW5kZXJTaGFkb3dJbnNlcnRpb25Qb2ludDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoZCl7eChkLGMpLHRoaXMuYXNzb2NpYXRlTm9kZShjLnBhcmVudE5vZGUpO2Zvcih2YXIgZT1kLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpdGhpcy5yZW5kZXJOb2RlKGQsYixlLCEwKX1lbHNlIHRoaXMucmVuZGVyRmFsbGJhY2tDb250ZW50KGEsYixjKX0scmVuZGVyRmFsbGJhY2tDb250ZW50OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmFzc29jaWF0ZU5vZGUoYyksdGhpcy5hc3NvY2lhdGVOb2RlKGMucGFyZW50Tm9kZSk7Zm9yKHZhciBkPWMuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyl0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsZCwhMSl9LGludmFsaWRhdGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dGhpcy5hdHRyaWJ1dGVzPU9iamVjdC5jcmVhdGUobnVsbCl9LHVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzOy9cLlx3Ky8udGVzdChhKSYmKGJbImNsYXNzIl09ITApLC8jXHcrLy50ZXN0KGEpJiYoYi5pZD0hMCksYS5yZXBsYWNlKC9cW1xzKihbXlxzPVx8flxdXSspL2csZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSl9fSxkZXBlbmRzT25BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXX0sZGlzdHJpYnV0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7aShhLHMsZnVuY3Rpb24oYSl7ZihhKSxjLnVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXMoYS5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpKTtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGc9YltkXTt2b2lkIDAhPT1nJiZqKGcsYSkmJihlKGcsYSksYltkXT12b2lkIDApfX0pfSx0cmVlQ29tcG9zaXRpb246ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5ob3N0LGI9YS5zaGFkb3dSb290LGM9W10sZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpaWYocihkKSl7dmFyIGU9ZyhkKTtlJiZlLmxlbmd0aHx8KGU9aChkKSksYy5wdXNoLmFwcGx5KGMsZSl9ZWxzZSBjLnB1c2goZCk7Zm9yKHZhciBmLGo7Yjspe2lmKGY9dm9pZCAwLGkoYix1LGZ1bmN0aW9uKGEpe3JldHVybiBmPWEsITF9KSxqPWYsdGhpcy5kaXN0cmlidXRlKGIsYyksail7dmFyIGs9Yi5vbGRlclNoYWRvd1Jvb3Q7aWYoayl7Yj1rLHgoYixqKTtjb250aW51ZX1icmVha31icmVha319LGFzc29jaWF0ZU5vZGU6ZnVuY3Rpb24oYSl7YS5pbXBsLnBvbHltZXJTaGFkb3dSZW5kZXJlcl89dGhpc319LEMucHJvdG90eXBlLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaW1wbC5wb2x5bWVyU2hhZG93UmVuZGVyZXJfO3JldHVybiBhPyhhLmludmFsaWRhdGUoKSwhMCk6ITF9LEEucHJvdG90eXBlLmdldERpc3RyaWJ1dGVkTm9kZXM9ZnVuY3Rpb24oKXtyZXR1cm4gaygpLGcodGhpcyl9LEIucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1BLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBhLGI9bih0aGlzKTtiJiYoYT1vKGIpKSx0aGlzLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz1hLGEmJmEuaW52YWxpZGF0ZSgpfSxhLmV2ZW50UGFyZW50c1RhYmxlPUksYS5nZXRSZW5kZXJlckZvckhvc3Q9bSxhLmdldFNoYWRvd1RyZWVzPXcsYS5pbnNlcnRpb25QYXJlbnRUYWJsZT1KLGEucmVuZGVyQWxsUGVuZGluZz1rLGEudmlzdWFsPXtpbnNlcnRCZWZvcmU6YyxyZW1vdmU6ZH19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7aWYod2luZG93W2JdKXtkKCFhLndyYXBwZXJzW2JdKTt2YXIgaT1mdW5jdGlvbihhKXtjLmNhbGwodGhpcyxhKQp9O2kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUoaS5wcm90b3R5cGUse2dldCBmb3JtKCl7cmV0dXJuIGgoZyh0aGlzKS5mb3JtKX19KSxmKHdpbmRvd1tiXSxpLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYi5zbGljZSg0LC03KSkpLGEud3JhcHBlcnNbYl09aX19dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEuYXNzZXJ0LGU9YS5taXhpbixmPWEucmVnaXN0ZXJXcmFwcGVyLGc9YS51bndyYXAsaD1hLndyYXAsaT1bIkhUTUxCdXR0b25FbGVtZW50IiwiSFRNTEZpZWxkU2V0RWxlbWVudCIsIkhUTUxJbnB1dEVsZW1lbnQiLCJIVE1MS2V5Z2VuRWxlbWVudCIsIkhUTUxMYWJlbEVsZW1lbnQiLCJIVE1MTGVnZW5kRWxlbWVudCIsIkhUTUxPYmplY3RFbGVtZW50IiwiSFRNTE91dHB1dEVsZW1lbnQiLCJIVE1MU2VsZWN0RWxlbWVudCIsIkhUTUxUZXh0QXJlYUVsZW1lbnQiXTtpLmZvckVhY2goYil9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPWF9dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXA7d2luZG93LlNlbGVjdGlvbixiLnByb3RvdHlwZT17Z2V0IGFuY2hvck5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuYW5jaG9yTm9kZSl9LGdldCBmb2N1c05vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmFkZFJhbmdlKGQoYSkpfSxjb2xsYXBzZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5jb2xsYXBzZShlKGEpLGIpfSxjb250YWluc05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbnRhaW5zTm9kZShlKGEpLGIpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuZXh0ZW5kKGUoYSksYil9LGdldFJhbmdlQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcy5pbXBsLmdldFJhbmdlQXQoYSkpfSxyZW1vdmVSYW5nZTpmdW5jdGlvbihhKXt0aGlzLmltcGwucmVtb3ZlUmFuZ2UoZChhKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3RBbGxDaGlsZHJlbihlKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxjKHdpbmRvdy5TZWxlY3Rpb24sYix3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLGEud3JhcHBlcnMuU2VsZWN0aW9uPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ay5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1kb2N1bWVudFthXTtiLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiB5KGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7Qi5jYWxsKGIuaW1wbCx4KGEpKSxlKGEsYil9ZnVuY3Rpb24gZShhLGIpe2Euc2hhZG93Um9vdCYmYi5hZG9wdE5vZGUoYS5zaGFkb3dSb290KSxhIGluc3RhbmNlb2YgbyYmZihhLGIpO2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpZShjLGIpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLm9sZGVyU2hhZG93Um9vdDtjJiZiLmFkb3B0Tm9kZShjKX1mdW5jdGlvbiBnKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiB5KGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19dmFyIGo9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGs9YS53cmFwcGVycy5Ob2RlLGw9YS5QYXJlbnROb2RlSW50ZXJmYWNlLG09YS53cmFwcGVycy5TZWxlY3Rpb24sbj1hLlNlbGVjdG9yc0ludGVyZmFjZSxvPWEud3JhcHBlcnMuU2hhZG93Um9vdCxwPWEuZGVmaW5lV3JhcEdldHRlcixxPWEuZWxlbWVudEZyb21Qb2ludCxyPWEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIscz1hLm1hdGNoZXNOYW1lcyx0PWEubWl4aW4sdT1hLnJlZ2lzdGVyV3JhcHBlcix2PWEucmVuZGVyQWxsUGVuZGluZyx3PWEucmV3cmFwLHg9YS51bndyYXAseT1hLndyYXAsej1hLndyYXBFdmVudFRhcmdldE1ldGhvZHMsQT0oYS53cmFwTm9kZUxpc3QsbmV3IFdlYWtNYXApO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoay5wcm90b3R5cGUpLHAoYiwiZG9jdW1lbnRFbGVtZW50IikscChiLCJib2R5IikscChiLCJoZWFkIiksWyJjcmVhdGVDb21tZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJjcmVhdGVFdmVudCIsImNyZWF0ZUV2ZW50TlMiLCJjcmVhdGVSYW5nZSIsImNyZWF0ZVRleHROb2RlIiwiZ2V0RWxlbWVudEJ5SWQiXS5mb3JFYWNoKGMpO3ZhciBCPWRvY3VtZW50LmFkb3B0Tm9kZSxDPWRvY3VtZW50LmltcG9ydE5vZGUsRD1kb2N1bWVudC5nZXRTZWxlY3Rpb247aWYodChiLnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkKGEsdGhpcyksYX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBxKHRoaXMsdGhpcyxhLGIpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7dmFyIGM9eShDLmNhbGwodGhpcy5pbXBsLHgoYSksITEpKTtpZihiKWZvcih2YXIgZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYy5hcHBlbmRDaGlsZCh0aGlzLmltcG9ydE5vZGUoZCwhMCkpO3JldHVybiBjfSxnZXRTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdigpLG5ldyBtKEQuY2FsbCh4KHRoaXMpKSl9fSksZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KXt2YXIgRT1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ7Yi5wcm90b3R5cGUucmVnaXN0ZXJFbGVtZW50PWZ1bmN0aW9uKGIsYyl7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYT92b2lkKHRoaXMuaW1wbD1hKTpjLmV4dGVuZHM/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChjLmV4dGVuZHMsYik6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiKX12YXIgZT1jLnByb3RvdHlwZTtpZihhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChlKSl0aHJvdyBuZXcgRXJyb3IoIk5vdFN1cHBvcnRlZEVycm9yIik7Zm9yKHZhciBmLGc9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLGg9W107ZyYmIShmPWEubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KGcpKTspaC5wdXNoKGcpLGc9T2JqZWN0LmdldFByb3RvdHlwZU9mKGcpO2lmKCFmKXRocm93IG5ldyBFcnJvcigiTm90U3VwcG9ydGVkRXJyb3IiKTtmb3IodmFyIGk9T2JqZWN0LmNyZWF0ZShmKSxqPWgubGVuZ3RoLTE7aj49MDtqLS0paT1PYmplY3QuY3JlYXRlKGkpO1siY3JlYXRlZENhbGxiYWNrIiwiYXR0YWNoZWRDYWxsYmFjayIsImRldGFjaGVkQ2FsbGJhY2siLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWVbYV07YiYmKGlbYV09ZnVuY3Rpb24oKXt5KHRoaXMpaW5zdGFuY2VvZiBkfHx3KHRoaXMpLGIuYXBwbHkoeSh0aGlzKSxhcmd1bWVudHMpfSl9KTt2YXIgaz17cHJvdG90eXBlOml9O3JldHVybiBjLmV4dGVuZHMmJihrLmV4dGVuZHM9Yy5leHRlbmRzKSxkLnByb3RvdHlwZT1lLGQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWQsYS5jb25zdHJ1Y3RvclRhYmxlLnNldChpLGQpLGEubmF0aXZlUHJvdG90eXBlVGFibGUuc2V0KGUsaSksRS5jYWxsKHgodGhpcyksYixrKSxkfSxyKFt3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnRdLFsicmVnaXN0ZXJFbGVtZW50Il0pfXIoW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnQsd2luZG93LkhUTUxIdG1sRWxlbWVudF0sWyJhcHBlbmRDaGlsZCIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwiY29udGFpbnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZU5TIiwiaW5zZXJ0QmVmb3JlIiwicXVlcnlTZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZW1vdmVDaGlsZCIsInJlcGxhY2VDaGlsZCJdLmNvbmNhdChzKSkscihbd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50XSxbImFkb3B0Tm9kZSIsImltcG9ydE5vZGUiLCJjb250YWlucyIsImNyZWF0ZUNvbW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUV2ZW50IiwiY3JlYXRlRXZlbnROUyIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlVGV4dE5vZGUiLCJlbGVtZW50RnJvbVBvaW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRTZWxlY3Rpb24iXSksdChiLnByb3RvdHlwZSxqKSx0KGIucHJvdG90eXBlLGwpLHQoYi5wcm90b3R5cGUsbiksdChiLnByb3RvdHlwZSx7Z2V0IGltcGxlbWVudGF0aW9uKCl7dmFyIGE9QS5nZXQodGhpcyk7cmV0dXJuIGE/YTooYT1uZXcgZyh4KHRoaXMpLmltcGxlbWVudGF0aW9uKSxBLnNldCh0aGlzLGEpLGEpfX0pLHUod2luZG93LkRvY3VtZW50LGIsZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSksd2luZG93LkhUTUxEb2N1bWVudCYmdSh3aW5kb3cuSFRNTERvY3VtZW50LGIpLHooW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnRdKSxoKGcsImNyZWF0ZURvY3VtZW50VHlwZSIpLGgoZywiY3JlYXRlRG9jdW1lbnQiKSxoKGcsImNyZWF0ZUhUTUxEb2N1bWVudCIpLGkoZywiaGFzRmVhdHVyZSIpLHUod2luZG93LkRPTUltcGxlbWVudGF0aW9uLGcpLHIoW3dpbmRvdy5ET01JbXBsZW1lbnRhdGlvbl0sWyJjcmVhdGVEb2N1bWVudFR5cGUiLCJjcmVhdGVEb2N1bWVudCIsImNyZWF0ZUhUTUxEb2N1bWVudCIsImhhc0ZlYXR1cmUiXSksYS5hZG9wdE5vZGVOb1JlbW92ZT1kLGEud3JhcHBlcnMuRE9NSW1wbGVtZW50YXRpb249ZyxhLndyYXBwZXJzLkRvY3VtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5FdmVudFRhcmdldCxkPWEud3JhcHBlcnMuU2VsZWN0aW9uLGU9YS5taXhpbixmPWEucmVnaXN0ZXJXcmFwcGVyLGc9YS5yZW5kZXJBbGxQZW5kaW5nLGg9YS51bndyYXAsaT1hLnVud3JhcElmTmVlZGVkLGo9YS53cmFwLGs9d2luZG93LldpbmRvdyxsPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLG09d2luZG93LmdldFNlbGVjdGlvbjtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxrLnByb3RvdHlwZS5nZXRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGoodGhpc3x8d2luZG93KS5nZXRDb21wdXRlZFN0eWxlKGkoYSksYil9LGsucHJvdG90eXBlLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiBqKHRoaXN8fHdpbmRvdykuZ2V0U2VsZWN0aW9uKCl9LGRlbGV0ZSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSxkZWxldGUgd2luZG93LmdldFNlbGVjdGlvbixbImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdLmZvckVhY2goZnVuY3Rpb24oYSl7ay5wcm90b3R5cGVbYV09ZnVuY3Rpb24oKXt2YXIgYj1qKHRoaXN8fHdpbmRvdyk7cmV0dXJuIGJbYV0uYXBwbHkoYixhcmd1bWVudHMpfSxkZWxldGUgd2luZG93W2FdfSksZShiLnByb3RvdHlwZSx7Z2V0Q29tcHV0ZWRTdHlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBnKCksbC5jYWxsKGgodGhpcyksaShhKSxiKX0sZ2V0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoKSxuZXcgZChtLmNhbGwoaCh0aGlzKSkpfX0pLGYoayxiKSxhLndyYXBwZXJzLldpbmRvdz1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWNbYV0sZD13aW5kb3dbYl07aWYoZCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKSxmPWUuY29uc3RydWN0b3I7d2luZG93W2JdPWZ9fXZhciBjPShhLmlzV3JhcHBlckZvcix7YToiSFRNTEFuY2hvckVsZW1lbnQiLGFyZWE6IkhUTUxBcmVhRWxlbWVudCIsYnI6IkhUTUxCUkVsZW1lbnQiLGJhc2U6IkhUTUxCYXNlRWxlbWVudCIsYm9keToiSFRNTEJvZHlFbGVtZW50IixidXR0b246IkhUTUxCdXR0b25FbGVtZW50IixkbDoiSFRNTERMaXN0RWxlbWVudCIsZGF0YWxpc3Q6IkhUTUxEYXRhTGlzdEVsZW1lbnQiLGRhdGE6IkhUTUxEYXRhRWxlbWVudCIsZGlyOiJIVE1MRGlyZWN0b3J5RWxlbWVudCIsZGl2OiJIVE1MRGl2RWxlbWVudCIsZW1iZWQ6IkhUTUxFbWJlZEVsZW1lbnQiLGZpZWxkc2V0OiJIVE1MRmllbGRTZXRFbGVtZW50Iixmb250OiJIVE1MRm9udEVsZW1lbnQiLGZvcm06IkhUTUxGb3JtRWxlbWVudCIsZnJhbWU6IkhUTUxGcmFtZUVsZW1lbnQiLGZyYW1lc2V0OiJIVE1MRnJhbWVTZXRFbGVtZW50IixocjoiSFRNTEhSRWxlbWVudCIsaGVhZDoiSFRNTEhlYWRFbGVtZW50IixoMToiSFRNTEhlYWRpbmdFbGVtZW50IixodG1sOiJIVE1MSHRtbEVsZW1lbnQiLGlmcmFtZToiSFRNTElGcmFtZUVsZW1lbnQiLGlucHV0OiJIVE1MSW5wdXRFbGVtZW50IixsaToiSFRNTExJRWxlbWVudCIsbGFiZWw6IkhUTUxMYWJlbEVsZW1lbnQiLGxlZ2VuZDoiSFRNTExlZ2VuZEVsZW1lbnQiLGxpbms6IkhUTUxMaW5rRWxlbWVudCIsbWFwOiJIVE1MTWFwRWxlbWVudCIsbWFycXVlZToiSFRNTE1hcnF1ZWVFbGVtZW50IixtZW51OiJIVE1MTWVudUVsZW1lbnQiLG1lbnVpdGVtOiJIVE1MTWVudUl0ZW1FbGVtZW50IixtZXRhOiJIVE1MTWV0YUVsZW1lbnQiLG1ldGVyOiJIVE1MTWV0ZXJFbGVtZW50IixkZWw6IkhUTUxNb2RFbGVtZW50IixvbDoiSFRNTE9MaXN0RWxlbWVudCIsb2JqZWN0OiJIVE1MT2JqZWN0RWxlbWVudCIsb3B0Z3JvdXA6IkhUTUxPcHRHcm91cEVsZW1lbnQiLG9wdGlvbjoiSFRNTE9wdGlvbkVsZW1lbnQiLG91dHB1dDoiSFRNTE91dHB1dEVsZW1lbnQiLHA6IkhUTUxQYXJhZ3JhcGhFbGVtZW50IixwYXJhbToiSFRNTFBhcmFtRWxlbWVudCIscHJlOiJIVE1MUHJlRWxlbWVudCIscHJvZ3Jlc3M6IkhUTUxQcm9ncmVzc0VsZW1lbnQiLHE6IkhUTUxRdW90ZUVsZW1lbnQiLHNjcmlwdDoiSFRNTFNjcmlwdEVsZW1lbnQiLHNlbGVjdDoiSFRNTFNlbGVjdEVsZW1lbnQiLHNvdXJjZToiSFRNTFNvdXJjZUVsZW1lbnQiLHNwYW46IkhUTUxTcGFuRWxlbWVudCIsc3R5bGU6IkhUTUxTdHlsZUVsZW1lbnQiLHRpbWU6IkhUTUxUaW1lRWxlbWVudCIsY2FwdGlvbjoiSFRNTFRhYmxlQ2FwdGlvbkVsZW1lbnQiLGNvbDoiSFRNTFRhYmxlQ29sRWxlbWVudCIsdGFibGU6IkhUTUxUYWJsZUVsZW1lbnQiLHRyOiJIVE1MVGFibGVSb3dFbGVtZW50Iix0aGVhZDoiSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQiLHRib2R5OiJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsdGV4dGFyZWE6IkhUTUxUZXh0QXJlYUVsZW1lbnQiLHRyYWNrOiJIVE1MVHJhY2tFbGVtZW50Iix0aXRsZToiSFRNTFRpdGxlRWxlbWVudCIsdWw6IkhUTUxVTGlzdEVsZW1lbnQiLHZpZGVvOiJIVE1MVmlkZW9FbGVtZW50In0pO09iamVjdC5rZXlzKGMpLmZvckVhY2goYiksT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYS53cmFwcGVycykuZm9yRWFjaChmdW5jdGlvbihiKXt3aW5kb3dbYl09YS53cmFwcGVyc1tiXX0pLGEua25vd25FbGVtZW50cz1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKCl7d2luZG93LndyYXA9U2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkLHdpbmRvdy51bndyYXA9U2hhZG93RE9NUG9seWZpbGwudW53cmFwSWZOZWVkZWQsT2JqZWN0LmRlZmluZVByb3BlcnR5KEVsZW1lbnQucHJvdG90eXBlLCJ3ZWJraXRTaGFkb3dSb290IixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEVsZW1lbnQucHJvdG90eXBlLCJzaGFkb3dSb290IikpO3ZhciBhPUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q7RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBiPWEuY2FsbCh0aGlzKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMud2F0Y2hTaGFkb3codGhpcyksYn0sRWxlbWVudC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1FbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz0iIjtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2MrPWEudGV4dENvbnRlbnQrIlxuXG4ifSksYnx8KGM9Yy5yZXBsYWNlKG0sIiIpKSxjfWZ1bmN0aW9uIGMoYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi50ZXh0Q29udGVudD1hLGJ9ZnVuY3Rpb24gZChhKXt2YXIgYj1jKGEpO2RvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYik7dmFyIGQ9Yi5zaGVldC5jc3NSdWxlcztyZXR1cm4gYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGR9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9MCxjPVtdO2I8YS5sZW5ndGg7YisrKWMucHVzaChhW2JdLmNzc1RleHQpO3JldHVybiBjLmpvaW4oIlxuXG4iKX1mdW5jdGlvbiBmKGEpe2EmJmcoKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9ZnVuY3Rpb24gZygpe3JldHVybiB2fHwodj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLHYuc2V0QXR0cmlidXRlKCJTaGFkb3dDU1NTaGltIiwiIiksdi5zaGFkb3dDc3NTaGltPSEwKSx2fXZhciBoPShhLmxvYWRlcix7c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihhLGIsZCl7dmFyIGU9dGhpcy5pc1R5cGVFeHRlbnNpb24oZCksZz10aGlzLnJlZ2lzdGVyRGVmaW5pdGlvbihhLGIsZCk7dGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYSxiKTt2YXIgaD10aGlzLnN0eWxlc1RvU2hpbW1lZENzc1RleHQoZy5yb290U3R5bGVzLGcuc2NvcGVTdHlsZXMsYixlKTtnLnNoaW1tZWRTdHlsZT1jKGgpLGEmJihhLnNoaW1tZWRTdHlsZT1nLnNoaW1tZWRTdHlsZSk7Zm9yKHZhciBpLGo9MCxrPWcucm9vdFN0eWxlcy5sZW5ndGg7az5qJiYoaT1nLnJvb3RTdHlsZXNbal0pO2orKylpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaSk7ZihoKX0sc3R5bGVzVG9TaGltbWVkQ3NzVGV4dDpmdW5jdGlvbihhLGIsYyxkKXtjPWN8fCIiLHRoaXMuaW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzKGEpLHRoaXMuaW5zZXJ0UG9seWZpbGxSdWxlcyhhKTt2YXIgZT10aGlzLnNoaW1BdEhvc3QoYixjLGQpK3RoaXMuc2hpbVNjb3BpbmcoYixjLGQpO3JldHVybiBlKz10aGlzLmV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXMoYSl9LHJlZ2lzdGVyRGVmaW5pdGlvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZWdpc3RyeVtiXT17cm9vdDphLG5hbWU6YixleHRlbmRzTmFtZTpjfSxlPWE/YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpOltdO2U9ZT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLDApOltdLGQucm9vdFN0eWxlcz1lLGQuc2NvcGVTdHlsZXM9ZC5yb290U3R5bGVzO3ZhciBmPXRoaXMucmVnaXN0cnlbZC5leHRlbmRzTmFtZV07cmV0dXJuIWZ8fGEmJiFhLnF1ZXJ5U2VsZWN0b3IoInNoYWRvdyIpfHwoZC5zY29wZVN0eWxlcz1mLnNjb3BlU3R5bGVzLmNvbmNhdChkLnNjb3BlU3R5bGVzKSksZH0saXNUeXBlRXh0ZW5zaW9uOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLmluZGV4T2YoIi0iKTwwfSxhcHBseVNjb3BlVG9Db250ZW50OmZ1bmN0aW9uKGEsYil7YSYmKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYS5xdWVyeVNlbGVjdG9yQWxsKCIqIiksZnVuY3Rpb24oYSl7YS5zZXRBdHRyaWJ1dGUoYiwiIil9KSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKSxmdW5jdGlvbihhKXt0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYS5jb250ZW50LGIpfSx0aGlzKSl9LGluc2VydFBvbHlmaWxsRGlyZWN0aXZlczpmdW5jdGlvbihhKXthJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD10aGlzLmluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dChhLnRleHRDb250ZW50KX0sdGhpcyl9LGluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKG4sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5zbGljZSgwLC0yKSsieyJ9KX0saW5zZXJ0UG9seWZpbGxSdWxlczpmdW5jdGlvbihhKXthJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD10aGlzLmluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQoYS50ZXh0Q29udGVudCl9LHRoaXMpfSxpbnNlcnRQb2x5ZmlsbFJ1bGVzSW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UobyxmdW5jdGlvbihhLGIpe3JldHVybiBiLnNsaWNlKDAsLTEpfSl9LGV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXM6ZnVuY3Rpb24oYSl7dmFyIGI9IiI7cmV0dXJuIGEmJkFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXtiKz10aGlzLmV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dChhLnRleHRDb250ZW50KSsiXG5cbiJ9LHRoaXMpLGJ9LGV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0iIjtiPXAuZXhlYyhhKTspYys9YlsxXS5zbGljZSgwLC0xKSsiXG5cbiI7cmV0dXJuIGN9LHNoaW1BdEhvc3Q6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhP3RoaXMuY29udmVydEF0SG9zdFN0eWxlcyhhLGIsYyk6dm9pZCAwfSxjb252ZXJ0QXRIb3N0U3R5bGVzOmZ1bmN0aW9uKGEsYyxmKXt2YXIgZz1iKGEpLGg9dGhpcztyZXR1cm4gZz1nLnJlcGxhY2UoaSxmdW5jdGlvbihhLGIpe3JldHVybiBoLnNjb3BlSG9zdENzcyhiLGMsZil9KSxnPWUodGhpcy5maW5kQXRIb3N0UnVsZXMoZChnKSx0aGlzLm1ha2VTY29wZU1hdGNoZXIoYyxmKSkpfSxzY29wZUhvc3RDc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXM7cmV0dXJuIGEucmVwbGFjZShqLGZ1bmN0aW9uKGEsZSxmKXtyZXR1cm4gZC5zY29wZUhvc3RTZWxlY3RvcihlLGIsYykrIiAiK2YrIlxuCSJ9KX0sc2NvcGVIb3N0U2VsZWN0b3I6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9YS5zcGxpdCgiLCIpLGY9Iltpcz0iK2IrIl0iO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnRyaW0oKSxhLm1hdGNoKGspP2E9YS5yZXBsYWNlKGssYz9mKyIkMSQzIjpiKyIkMSQzIik6YS5tYXRjaChsKSYmKGE9Yz9mK2E6YithKSxkLnB1c2goYSl9LHRoaXMpLGQuam9pbigiLCAiKX0sZmluZEF0SG9zdFJ1bGVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChhLHRoaXMuaXNIb3N0UnVsZS5iaW5kKHRoaXMsYikpfSxpc0hvc3RSdWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuc2VsZWN0b3JUZXh0JiZiLnNlbGVjdG9yVGV4dC5tYXRjaChhKXx8Yi5jc3NSdWxlcyYmdGhpcy5maW5kQXRIb3N0UnVsZXMoYi5jc3NSdWxlcyxhKS5sZW5ndGh8fGIudHlwZT09Q1NTUnVsZS5XRUJLSVRfS0VZRlJBTUVTX1JVTEV9LHNoaW1TY29waW5nOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYT90aGlzLmNvbnZlcnRTY29wZWRTdHlsZXMoYSxiLGMpOnZvaWQgMH0sY29udmVydFNjb3BlZFN0eWxlczpmdW5jdGlvbihhLGMsZSl7dmFyIGY9YihhKS5yZXBsYWNlKGksIiIpO2Y9dGhpcy5pbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQoZiksZj10aGlzLmNvbnZlcnRDb2xvbkhvc3QoZiksZj10aGlzLmNvbnZlcnRDb2xvbkFuY2VzdG9yKGYpLGY9dGhpcy5jb252ZXJ0UHNldWRvcyhmKSxmPXRoaXMuY29udmVydFBhcnRzKGYpLGY9dGhpcy5jb252ZXJ0Q29tYmluYXRvcnMoZik7dmFyIGc9ZChmKTtyZXR1cm4gYyYmKGY9dGhpcy5zY29wZVJ1bGVzKGcsYyxlKSksZn0sY29udmVydFBzZXVkb3M6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShxLCIgW3BzZXVkbz0kMV0iKX0sY29udmVydFBhcnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UociwiIFtwYXJ0PSQxXSIpfSxjb252ZXJ0Q29sb25Ib3N0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RSZSx0aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvbkFuY2VzdG9yOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkFuY2VzdG9yUmUsdGhpcy5jb2xvbkFuY2VzdG9yUGFydFJlcGxhY2VyKX0sY29udmVydENvbG9uUnVsZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixkLGUpe2lmKGI9cG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGQpe2Zvcih2YXIgZixnPWQuc3BsaXQoIiwiKSxoPVtdLGk9MCxqPWcubGVuZ3RoO2o+aSYmKGY9Z1tpXSk7aSsrKWY9Zi50cmltKCksaC5wdXNoKGMoYixmLGUpKTtyZXR1cm4gaC5qb2luKCIsIil9cmV0dXJuIGIrZX0pfSxjb2xvbkFuY2VzdG9yUGFydFJlcGxhY2VyOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYi5tYXRjaChzKT90aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcihhLGIsYyk6YStiK2MrIiwgIitiKyIgIithK2N9LGNvbG9uSG9zdFBhcnRSZXBsYWNlcjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGErYi5yZXBsYWNlKHMsIiIpK2N9LGNvbnZlcnRDb21iaW5hdG9yczpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXlxeL2csIiAiKS5yZXBsYWNlKC9cXi9nLCIgIil9LHNjb3BlUnVsZXM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSIiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS5zZWxlY3RvclRleHQmJmEuc3R5bGUmJmEuc3R5bGUuY3NzVGV4dD8oZCs9dGhpcy5zY29wZVNlbGVjdG9yKGEuc2VsZWN0b3JUZXh0LGIsYyx0aGlzLnN0cmljdFN0eWxpbmcpKyIge1xuCSIsZCs9dGhpcy5wcm9wZXJ0aWVzRnJvbVJ1bGUoYSkrIlxufVxuXG4iKTphLm1lZGlhPyhkKz0iQG1lZGlhICIrYS5tZWRpYS5tZWRpYVRleHQrIiB7XG4iLGQrPXRoaXMuc2NvcGVSdWxlcyhhLmNzc1J1bGVzLGIsYyksZCs9IlxufVxuXG4iKTphLmNzc1RleHQmJihkKz1hLmNzc1RleHQrIlxuXG4iKX0sdGhpcyksZH0sc2NvcGVTZWxlY3RvcjpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXSxmPWEuc3BsaXQoIiwiKTtyZXR1cm4gZi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhhLGIsYykmJihhPWQmJiFhLm1hdGNoKHBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcik/dGhpcy5hcHBseVN0cmljdFNlbGVjdG9yU2NvcGUoYSxiKTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGIsYykpLGUucHVzaChhKX0sdGhpcyksZS5qb2luKCIsICIpfSxzZWxlY3Rvck5lZWRzU2NvcGluZzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5tYWtlU2NvcGVNYXRjaGVyKGIsYyk7cmV0dXJuIWEubWF0Y2goZCl9LG1ha2VTY29wZU1hdGNoZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iPyJcXFtpcz1bJ1wiXT8iK2ErIlsnXCJdP1xcXSI6YTtyZXR1cm4gbmV3IFJlZ0V4cCgiXigiK2MrIikiK3NlbGVjdG9yUmVTdWZmaXgsIm0iKX0sYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jPyJbaXM9IitiKyJdIjpiO3JldHVybiBhLm1hdGNoKHBvbHlmaWxsSG9zdFJlKT8oYT1hLnJlcGxhY2UocG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGQpLGEucmVwbGFjZShwb2x5ZmlsbEhvc3RSZSxkKyIgIikpOmQrIiAiK2F9LGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3ZhciBjPVsiICIsIj4iLCIrIiwifiJdLGQ9YSxlPSJbIitiKyJdIjtyZXR1cm4gYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWQuc3BsaXQoYSk7ZD1iLm1hcChmdW5jdGlvbihhKXt2YXIgYj1hLnRyaW0oKS5yZXBsYWNlKHBvbHlmaWxsSG9zdFJlLCIiKTtyZXR1cm4gYiYmYy5pbmRleE9mKGIpPDAmJmIuaW5kZXhPZihlKTwwJiYoYT1iLnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sIiQxIitlKyIkMiQzIikpLGF9KS5qb2luKGEpfSksZH0saW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoaG9zdFJlLHMpLnJlcGxhY2UoY29sb25Ib3N0UmUscykucmVwbGFjZShjb2xvbkFuY2VzdG9yUmUsdCl9LHByb3BlcnRpZXNGcm9tUnVsZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jb250ZW50JiYhYS5zdHlsZS5jb250ZW50Lm1hdGNoKC9bJyJdKy8pP2Euc3R5bGUuY3NzVGV4dC5yZXBsYWNlKC9jb250ZW50OlteO10qOy9nLCJjb250ZW50OiAnIithLnN0eWxlLmNvbnRlbnQrIic7Iik6YS5zdHlsZS5jc3NUZXh0fX0pLGk9L0Bob3N0W157XSp7KChbXn1dKj97W157XSo/fVtcc1xTXSo/KSspfS9naW0saj0vKFtee10qKSh7W1xzXFNdKj99KS9naW0saz0vKC4qKSgoPzpcKil8KD86XDpzY29wZSkpKC4qKS8sbD0vXlsuXFs6XS8sbT0vXC9cKlteKl0qXCorKFteLypdW14qXSpcKispKlwvL2dpbSxuPS9cL1wqXHMqQHBvbHlmaWxsIChbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLykoW157XSo/KXsvZ2ltLG89L1wvXCpcc0Bwb2x5ZmlsbC1ydWxlKFteKl0qXCorKFteLypdW14qXSpcKispKilcLy9naW0scD0vXC9cKlxzQHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxxPS86Oih4LVteXHN7LChdKikvZ2ltLHI9Lzo6cGFydFwoKFteKV0qKVwpL2dpbSxzPSItc2hhZG93Y3NzaG9zdCIsdD0iLXNoYWRvd2Nzc2FuY2VzdG9yIix1PSIpKD86XFwoKCg/OlxcKFteKShdKlxcKXxbXikoXSopKz8pXFwpKT8oW14se10qKSI7Y3NzQ29sb25Ib3N0UmU9bmV3IFJlZ0V4cCgiKCIrcyt1LCJnaW0iKSxjc3NDb2xvbkFuY2VzdG9yUmU9bmV3IFJlZ0V4cCgiKCIrdCt1LCJnaW0iKSxzZWxlY3RvclJlU3VmZml4PSIoWz5cXHN+K1suLHs6XVtcXHNcXFNdKik/JCIsaG9zdFJlPS9AaG9zdC9naW0sY29sb25Ib3N0UmU9L1w6aG9zdC9naW0sY29sb25BbmNlc3RvclJlPS9cOmFuY2VzdG9yL2dpbSxwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3I9cysiLW5vLWNvbWJpbmF0b3IiLHBvbHlmaWxsSG9zdFJlPW5ldyBSZWdFeHAocywiZ2ltIikscG9seWZpbGxBbmNlc3RvclJlPW5ldyBSZWdFeHAodCwiZ2ltIik7dmFyIHY7aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXtmKCJzdHlsZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxuIik7dmFyIHc9d3JhcChkb2N1bWVudCkseD13LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTt4Lmluc2VydEJlZm9yZShnKCkseC5jaGlsZE5vZGVzWzBdKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe3dpbmRvdy5IVE1MSW1wb3J0cyYmIUhUTUxJbXBvcnRzLnVzZU5hdGl2ZSYmKEhUTUxJbXBvcnRzLmltcG9ydGVyLnByZWxvYWRTZWxlY3RvcnMrPSIsIGxpbmtbcmVsPXN0eWxlc2hlZXRdOm5vdChbbm9wb2x5ZmlsbF0pIixIVE1MSW1wb3J0cy5wYXJzZXIucGFyc2VHZW5lcmljPWZ1bmN0aW9uKGEpe2lmKCFhLnNoYWRvd0Nzc1NoaW0pe3ZhciBiPWE7aWYoIWEuaGFzQXR0cmlidXRlKCJub3BvbHlmaWxsIikpe2EuX19yZXNvdXJjZT8oYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSxiLnRleHRDb250ZW50PVBsYXRmb3JtLmxvYWRlci5yZXNvbHZlVXJsc0luQ3NzVGV4dChhLl9fcmVzb3VyY2UsYS5ocmVmKSxhLm93bmVyRG9jdW1lbnQ9PT13JiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSkpOlBsYXRmb3JtLmxvYWRlci5yZXNvbHZlVXJsc0luU3R5bGUoYik7dmFyIGM9W2JdO2IudGV4dENvbnRlbnQ9aC5zdHlsZXNUb1NoaW1tZWRDc3NUZXh0KGMsYyksYi5zaGFkb3dDc3NTaGltPSEwfWIucGFyZW50Tm9kZSE9PXgmJnguYXBwZW5kQ2hpbGQoYil9fSl9KX1hLlNoYWRvd0NTUz1ofSh3aW5kb3cuUGxhdGZvcm0pKTohZnVuY3Rpb24oKXt3aW5kb3cudGVtcGxhdGVDb250ZW50PXdpbmRvdy50ZW1wbGF0ZUNvbnRlbnR8fGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnR9LHdpbmRvdy53cmFwPXdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9O3ZhciBhPUVsZW1lbnQucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3Q7RWxlbWVudC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBiPXRoaXMud2Via2l0U2hhZG93Um9vdCxjPWEuY2FsbCh0aGlzKTtyZXR1cm4gYy5vbGRlclNoYWRvd1Jvb3Q9YixjLmhvc3Q9dGhpcyxDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFbGVtZW50LnByb3RvdHlwZSx7c2hhZG93Um9vdDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Via2l0U2hhZG93Um9vdH19LGNyZWF0ZVNoYWRvd1Jvb3Q6e3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Via2l0Q3JlYXRlU2hhZG93Um9vdCgpfX19KSx3aW5kb3cudGVtcGxhdGVDb250ZW50PWZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYSksIWEuY29udGVudCYmIWEuX2NvbnRlbnQpe2Zvcih2YXIgYj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5maXJzdENoaWxkOyliLmFwcGVuZENoaWxkKGEuZmlyc3RDaGlsZCk7YS5fY29udGVudD1ifXJldHVybiBhLmNvbnRlbnR8fGEuX2NvbnRlbnR9fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zm9yKHZhciBiPWF8fHt9LGQ9MTtkPGFyZ3VtZW50cy5sZW5ndGg7ZCsrKXt2YXIgZT1hcmd1bWVudHNbZF07dHJ5e2Zvcih2YXIgZiBpbiBlKWMoZixlLGIpfWNhdGNoKGcpe319cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGU9ZChiLGEpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGEsZSl9ZnVuY3Rpb24gZChhLGIpe2lmKGEpe3ZhciBjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKTtyZXR1cm4gY3x8ZChPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYil9fUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7cmV0dXJuIGQucHVzaC5hcHBseShkLGFyZ3VtZW50cyksYi5hcHBseShhLGQpfX0pLGEubWl4aW49Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIsYyl7dmFyIGQ9InN0cmluZyI9PXR5cGVvZiBhP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk6YS5jbG9uZU5vZGUoITApO2lmKGQuaW5uZXJIVE1MPWIsYylmb3IodmFyIGUgaW4gYylkLnNldEF0dHJpYnV0ZShlLGNbZV0pO3JldHVybiBkfXZhciBjPURPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkLGQ9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWMuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylkLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGIpezE9PWFyZ3VtZW50cy5sZW5ndGgmJihiPSF0aGlzLmNvbnRhaW5zKGEpKSxiP3RoaXMuYWRkKGEpOnRoaXMucmVtb3ZlKGEpfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnN3aXRjaD1mdW5jdGlvbihhLGIpe2EmJnRoaXMucmVtb3ZlKGEpLGImJnRoaXMuYWRkKGIpfTt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzKX0sZj13aW5kb3cuTmFtZWROb2RlTWFwfHx3aW5kb3cuTW96TmFtZWRBdHRyTWFwfHx7fTtpZihOb2RlTGlzdC5wcm90b3R5cGUuYXJyYXk9ZSxmLnByb3RvdHlwZS5hcnJheT1lLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5hcnJheT1lLCF3aW5kb3cucGVyZm9ybWFuY2Upe3ZhciBnPURhdGUubm93KCk7d2luZG93LnBlcmZvcm1hbmNlPXtub3c6ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3coKS1nfX19d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXt2YXIgYT13aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lO3JldHVybiBhP2Z1bmN0aW9uKGIpe3JldHVybiBhKGZ1bmN0aW9uKCl7YihwZXJmb3JtYW5jZS5ub3coKSl9KX06ZnVuY3Rpb24oYSl7cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGEsMWUzLzYwKX19KCkpLHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pDYW5jZWxBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oYSl7Y2xlYXJUaW1lb3V0KGEpfX0oKSk7dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtpLmhyZWY9ZG9jdW1lbnQuYmFzZVVSSSxoLmNvbnRlbnQub3duZXJEb2N1bWVudC5hcHBlbmRDaGlsZChpKTt2YXIgaj1bXSxrPWZ1bmN0aW9uKCl7ai5wdXNoKGFyZ3VtZW50cyl9O3dpbmRvdy5Qb2x5bWVyPWssYS5kZWxpdmVyRGVjbGFyYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIGEuZGVsaXZlckRlY2xhcmF0aW9ucz1udWxsLGp9LHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe3dpbmRvdy5Qb2x5bWVyPT09ayYmKHdpbmRvdy5Qb2x5bWVyPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignWW91IHRyaWVkIHRvIHVzZSBwb2x5bWVyIHdpdGhvdXQgbG9hZGluZyBpdCBmaXJzdC4gVG8gbG9hZCBwb2x5bWVyLCA8bGluayByZWw9ImltcG9ydCIgaHJlZj0iY29tcG9uZW50cy9wb2x5bWVyL3BvbHltZXIuaHRtbCI+Jyl9KX0pLGEuY3JlYXRlRE9NPWJ9KHdpbmRvdy5QbGF0Zm9ybSksd2luZG93LnRlbXBsYXRlQ29udGVudD13aW5kb3cudGVtcGxhdGVDb250ZW50fHxmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50fSxmdW5jdGlvbihhKXthPWF8fCh3aW5kb3cuSW5zcGVjdG9yPXt9KTt2YXIgYjt3aW5kb3cuc2luc3BlY3Q9ZnVuY3Rpb24oYSxkKXtifHwoYj13aW5kb3cub3BlbigiIiwiU2hhZG93RE9NIEluc3BlY3RvciIsbnVsbCwhMCksYi5kb2N1bWVudC53cml0ZShjKSxiLmFwaT17c2hhZG93aXplOnNoYWRvd2l6ZX0pLGYoYXx8d3JhcChkb2N1bWVudC5ib2R5KSxkKX07dmFyIGM9WyI8IURPQ1RZUEUgaHRtbD4iLCI8aHRtbD4iLCIgIDxoZWFkPiIsIiAgICA8dGl0bGU+U2hhZG93RE9NIEluc3BlY3RvcjwvdGl0bGU+IiwiICAgIDxzdHlsZT4iLCIgICAgICBib2R5IHsiLCIgICAgICB9IiwiICAgICAgcHJlIHsiLCcgICAgICAgIGZvbnQ6IDlwdCAiQ291cmllciBOZXciLCBtb25vc3BhY2U7JywiICAgICAgICBsaW5lLWhlaWdodDogMS41ZW07IiwiICAgICAgfSIsIiAgICAgIHRhZyB7IiwiICAgICAgICBjb2xvcjogcHVycGxlOyIsIiAgICAgIH0iLCIgICAgICB1bCB7IiwiICAgICAgICAgbWFyZ2luOiAwOyIsIiAgICAgICAgIHBhZGRpbmc6IDA7IiwiICAgICAgICAgbGlzdC1zdHlsZTogbm9uZTsiLCIgICAgICB9IiwiICAgICAgbGkgeyIsIiAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsiLCIgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFmMWYxOyIsIiAgICAgICAgIHBhZGRpbmc6IDRweCA2cHg7IiwiICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OyIsIiAgICAgICAgIG1hcmdpbi1yaWdodDogNHB4OyIsIiAgICAgIH0iLCIgICAgPC9zdHlsZT4iLCIgIDwvaGVhZD4iLCIgIDxib2R5PiIsJyAgICA8dWwgaWQ9ImNydW1icyI+JywiICAgIDwvdWw+IiwnICAgIDxkaXYgaWQ9InRyZWUiPjwvZGl2PicsIiAgPC9ib2R5PiIsIjwvaHRtbD4iXS5qb2luKCJcbiIpLGQ9W10sZT1mdW5jdGlvbigpe3ZhciBhPWIuZG9jdW1lbnQsYz1hLnF1ZXJ5U2VsZWN0b3IoIiNjcnVtYnMiKTtjLnRleHRDb250ZW50PSIiO2Zvcih2YXIgZSxnPTA7ZT1kW2ddO2crKyl7dmFyIGg9YS5jcmVhdGVFbGVtZW50KCJhIik7aC5ocmVmPSIjIixoLnRleHRDb250ZW50PWUubG9jYWxOYW1lLGguaWR4PWcsaC5vbmNsaWNrPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYjtkLmxlbmd0aD50aGlzLmlkeDspYj1kLnBvcCgpO2YoYi5zaGFkb3d8fGIsYiksYS5wcmV2ZW50RGVmYXVsdCgpfSxjLmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudCgibGkiKSkuYXBwZW5kQ2hpbGQoaCl9fSxmPWZ1bmN0aW9uKGEsYyl7dmFyIGY9Yi5kb2N1bWVudDtrPVtdO3ZhciBnPWN8fGE7ZC5wdXNoKGcpLGUoKSxmLmJvZHkucXVlcnlTZWxlY3RvcigiI3RyZWUiKS5pbm5lckhUTUw9IjxwcmU+IitqKGEsYS5jaGlsZE5vZGVzKSsiPC9wcmU+In0sZz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGg9e1NUWUxFOjEsU0NSSVBUOjEsIiNjb21tZW50IjoxLFRFTVBMQVRFOjF9LGk9ZnVuY3Rpb24oYSl7cmV0dXJuIGhbYS5ub2RlTmFtZV19LGo9ZnVuY3Rpb24oYSxiLGMpe2lmKGkoYSkpcmV0dXJuIiI7dmFyIGQ9Y3x8IiI7aWYoYS5sb2NhbE5hbWV8fDExPT1hLm5vZGVUeXBlKXt2YXIgZT1hLmxvY2FsTmFtZXx8InNoYWRvdy1yb290IixmPWQrbChhKTsiY29udGVudCI9PWUmJihiPWEuZ2V0RGlzdHJpYnV0ZWROb2RlcygpKSxmKz0iPGJyLz4iO3ZhciBoPWQrIiZuYnNwOyZuYnNwOyI7ZyhiLGZ1bmN0aW9uKGEpe2YrPWooYSxhLmNoaWxkTm9kZXMsaCl9KSxmKz1kLHticjoxfVtlXXx8KGYrPSI8dGFnPiZsdDsvIitlKyImZ3Q7PC90YWc+IixmKz0iPGJyLz4iKX1lbHNle3ZhciBrPWEudGV4dENvbnRlbnQudHJpbSgpO2Y9az9kKyciJytrKyciPGJyLz4nOiIifXJldHVybiBmfSxrPVtdLGw9ZnVuY3Rpb24oYSl7dmFyIGI9Ijx0YWc+Jmx0OyIsYz1hLmxvY2FsTmFtZXx8InNoYWRvdy1yb290IjtyZXR1cm4gYS53ZWJraXRTaGFkb3dSb290fHxhLnNoYWRvd1Jvb3Q/KGIrPScgPGJ1dHRvbiBpZHg9Iicray5sZW5ndGgrJyIgb25jbGljaz0iYXBpLnNoYWRvd2l6ZS5jYWxsKHRoaXMpIj4nK2MrIjwvYnV0dG9uPiIsay5wdXNoKGEpKTpiKz1jfHwic2hhZG93LXJvb3QiLGEuYXR0cmlidXRlcyYmZyhhLmF0dHJpYnV0ZXMsZnVuY3Rpb24oYSl7Yis9IiAiK2EubmFtZSsoYS52YWx1ZT8nPSInK2EudmFsdWUrJyInOiIiKX0pLGIrPSImZ3Q7PC90YWc+In07c2hhZG93aXplPWZ1bmN0aW9uKCl7dmFyIGE9TnVtYmVyKHRoaXMuYXR0cmlidXRlcy5pZHgudmFsdWUpLGI9a1thXTtiP2YoYi53ZWJraXRTaGFkb3dSb290fHxiLnNoYWRvd1Jvb3QsYik6KGNvbnNvbGUubG9nKCJiYWQgc2hhZG93aXplIG5vZGUiKSxjb25zb2xlLmRpcih0aGlzKSl9LGEub3V0cHV0PWp9KHdpbmRvdy5JbnNwZWN0b3IpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3JlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe2Zvcih2YXIgYSxiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZSksZj0wLGc9Yi5sZW5ndGg7Zz5mJiYoYT1iW2ZdKTtmKyspYS5yZW1vdmVBdHRyaWJ1dGUoYyksYS5zZXRBdHRyaWJ1dGUoZCwiIik7aWYoYi5sZW5ndGgpe3ZhciBoPWZ1bmN0aW9uKCl7Zm9yKHZhciBhLGM9MCxlPWIubGVuZ3RoO2U+YyYmKGE9YltjXSk7YysrKWEucmVtb3ZlQXR0cmlidXRlKGQpO2RvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLGgsITEpfTtkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoaSxoLCExKX19KX12YXIgYj0uMixjPSJ1bnJlc29sdmVkIixkPSJyZXNvbHZlZCIsZT0iWyIrYysiXSIsZj0iWyIrZCsiXSIsZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2cudGV4dENvbnRlbnQ9ZSsiIHsgb3BhY2l0eTogMDsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47IH0gXG4iK2YrInsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47XG4td2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgIitiKyJzOyB0cmFuc2l0aW9uOiBvcGFjaXR5ICIrYisiczsgfVxuIjt2YXIgaD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7aC5pbnNlcnRCZWZvcmUoZyxoLmZpcnN0Q2hpbGQpO3ZhciBpPXZvaWQgMCE9PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS53ZWJraXRUcmFuc2l0aW9uPyJ3ZWJraXRUcmFuc2l0aW9uRW5kIjoidHJhbnNpdGlvbmVuZCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIldlYkNvbXBvbmVudHNSZWFkeSIsYSl9KFBsYXRmb3JtKSx3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe3ZhciBiPShhLnBhdGgsYS54aHIpLGM9ZnVuY3Rpb24oYSxiKXt0aGlzLmNhY2hlPXt9LHRoaXMub25sb2FkPWEsdGhpcy5vbmNvbXBsZXRlPWIsdGhpcy5pbmZsaWdodD0wLHRoaXMucGVuZGluZz17fX07Yy5wcm90b3R5cGU9e2FkZE5vZGVzOmZ1bmN0aW9uKGEpe3RoaXMuaW5mbGlnaHQrPWEubGVuZ3RoLGQoYSx0aGlzLnJlcXVpcmUsdGhpcyksdGhpcy5jaGVja0RvbmUoKX0scmVxdWlyZTpmdW5jdGlvbihhKXt2YXIgYj1hLnNyY3x8YS5ocmVmO2EuX19ub2RlVXJsPWIsdGhpcy5kZWR1cGUoYixhKXx8dGhpcy5mZXRjaChiLGEpfSxkZWR1cGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wZW5kaW5nW2FdPyh0aGlzLnBlbmRpbmdbYV0ucHVzaChiKSwhMCk6dGhpcy5jYWNoZVthXT8odGhpcy5vbmxvYWQoYSxiLHRoaXMuY2FjaGVbYV0pLHRoaXMudGFpbCgpLCEwKToodGhpcy5wZW5kaW5nW2FdPVtiXSwhMSl9LGZldGNoOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9ZnVuY3Rpb24oYixkKXt0aGlzLnJlY2VpdmUoYSxjLGIsZCl9LmJpbmQodGhpcyk7Yi5sb2FkKGEsZCl9LHJlY2VpdmU6ZnVuY3Rpb24oYSxiLGMsZCl7Y3x8KHRoaXMuY2FjaGVbYV09ZCksdGhpcy5wZW5kaW5nW2FdLmZvckVhY2goZnVuY3Rpb24oYil7Y3x8dGhpcy5vbmxvYWQoYSxiLGQpLHRoaXMudGFpbCgpfSx0aGlzKSx0aGlzLnBlbmRpbmdbYV09bnVsbH0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19LGI9Ynx8e2FzeW5jOiEwLG9rOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fDMwND09PWEuc3RhdHVzfHwwPT09YS5zdGF0dXN9LGxvYWQ6ZnVuY3Rpb24oYyxkLGUpe3ZhciBmPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4oYS5mbGFncy5kZWJ1Z3x8YS5mbGFncy5idXN0KSYmKGMrPSI/IitNYXRoLnJhbmRvbSgpKSxmLm9wZW4oIkdFVCIsYyxiLmFzeW5jKSxmLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGZ1bmN0aW9uKCl7ND09PWYucmVhZHlTdGF0ZSYmZC5jYWxsKGUsIWIub2soZikmJmYsZi5yZXNwb25zZXx8Zi5yZXNwb25zZVRleHQsYyl9KSxmLnNlbmQoKSxmfSxsb2FkRG9jdW1lbnQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMubG9hZChhLGIsYykucmVzcG9uc2VUeXBlPSJkb2N1bWVudCJ9fTt2YXIgZD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EueGhyPWIsYS5Mb2FkZXI9Y30od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBjKGEsail9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGQoYSl7cmV0dXJuInNjcmlwdCI9PT1hLmxvY2FsTmFtZX1mdW5jdGlvbiBlKGEsYil7dmFyIGM9YTtjIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChqKSksYy5fVVJMPWI7dmFyIGQ9Yy5jcmVhdGVFbGVtZW50KCJiYXNlIik7cmV0dXJuIGQuc2V0QXR0cmlidXRlKCJocmVmIixiKSxjLmJhc2VVUkl8fChjLmJhc2VVUkk9YiksYy5oZWFkLmFwcGVuZENoaWxkKGQpLGEgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGMuYm9keS5pbm5lckhUTUw9YSksd2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChjKSxjfWZ1bmN0aW9uIGYoYSxiKXtmdW5jdGlvbiBjKCl7az09bCYmcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGEpfWZ1bmN0aW9uIGQoKXtrKyssYygpfWI9Ynx8bzt2YXIgZT1IVE1MSW1wb3J0cy5pc0lFPyJjb21wbGV0ZSI6ImludGVyYWN0aXZlIixoPSJjb21wbGV0ZSI9PT1iLnJlYWR5U3RhdGV8fGIucmVhZHlTdGF0ZT09PWU7aWYoIWgpe3ZhciBpPWZ1bmN0aW9uKCl7KCJjb21wbGV0ZSI9PT1iLnJlYWR5U3RhdGV8fGIucmVhZHlTdGF0ZT09PWUpJiYoYi5yZW1vdmVFdmVudExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixpKSxmKGEsYikpfTtyZXR1cm4gdm9pZCBiLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGkpfXZhciBqPWIucXVlcnlTZWxlY3RvckFsbCgibGlua1tyZWw9aW1wb3J0XSIpLGs9MCxsPWoubGVuZ3RoO2lmKGwpZm9yKHZhciBtLG49MDtsPm4mJihtPWpbbl0pO24rKylnKG0pP2QuY2FsbChtKToobS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixkKSxtLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixkKSk7ZWxzZSBjKCl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gaT9hLmltcG9ydCYmImxvYWRpbmciIT09YS5pbXBvcnQucmVhZHlTdGF0ZTphLl9faW1wb3J0UGFyc2VkfXZhciBoPSJpbXBvcnQiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpLGk9IWEuZmxhZ3MuaW1wb3J0cyYmaCxqPSJpbXBvcnQiO2lmKCFpKXt2YXIgayxsPWEuTG9hZGVyLG09KGEueGhyLHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD93aW5kb3cuU2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKGRvY3VtZW50KTpkb2N1bWVudCksbj17ZG9jdW1lbnRzOnt9LGNhY2hlOnt9LHByZWxvYWRTZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2orIl0iLCJzY3JpcHRbc3JjXTpub3QoW3R5cGVdKSIsJ3NjcmlwdFtzcmNdW3R5cGU9InRleHQvamF2YXNjcmlwdCJdJ10uam9pbigiLCIpLGxvYWRlcjpmdW5jdGlvbihhKXtpZihrJiZrLmluZmxpZ2h0KXt2YXIgYj1rLm9uY29tcGxldGU7cmV0dXJuIGsub25jb21wbGV0ZT1mdW5jdGlvbigpe2IoKSxhKCl9LGt9cmV0dXJuIGs9bmV3IGwobi5sb2FkZWQsYSksay5jYWNoZT1uLmNhY2hlLGt9LGxvYWQ6ZnVuY3Rpb24oYSxiKXtrPW4ubG9hZGVyKGIpLG4ucHJlbG9hZChhKX0scHJlbG9hZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcnNoYWxOb2RlcyhhKTtrLmFkZE5vZGVzKGIpfSxtYXJzaGFsTm9kZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKG4ucHJlbG9hZFNlbGVjdG9ycyk7cmV0dXJuIGI9dGhpcy5maWx0ZXJNYWluRG9jdW1lbnROb2RlcyhhLGIpfSxmaWx0ZXJNYWluRG9jdW1lbnROb2RlczpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09bSYmKGI9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGIsZnVuY3Rpb24oYSl7cmV0dXJuIWQoYSl9KSksYn0sbG9hZGVkOmZ1bmN0aW9uKGEsYyxkKXtpZihiKGMpKXt2YXIgZj1uLmRvY3VtZW50c1thXTtmfHwoZj1lKGQsYSksbi5kb2N1bWVudHNbYV09ZixuLnByZWxvYWQoZikpLGMuaW1wb3J0PWMuY29udGVudD1kPWZ9Yy5fX3Jlc291cmNlPWR9fTtBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGEuaW1wb3J0ZXI9bn12YXIgbz13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d3JhcChkb2N1bWVudCk6ZG9jdW1lbnQ7T2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIl9jdXJyZW50U2NyaXB0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEhUTUxJbXBvcnRzLmN1cnJlbnRTY3JpcHR8fG8uY3VycmVudFNjcmlwdH0sd3JpdGVhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGEuaGFzTmF0aXZlPWgsYS51c2VOYXRpdmU9aSxhLndoZW5JbXBvcnRzUmVhZHk9ZixhLklNUE9SVF9MSU5LX1RZUEU9aixhLmlzSW1wb3J0TG9hZGVkPWd9KHdpbmRvdy5IVE1MSW1wb3J0cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi50ZXh0Q29udGVudD1hLnRleHRDb250ZW50LGcucmVzb2x2ZVVybHNJblN0eWxlKGIpLGJ9ZnVuY3Rpb24gYyhhLGIpe3RoaXMuZG9jPWEsdGhpcy5kb2MuX19sb2FkVHJhY2tlcj10aGlzLHRoaXMuY2FsbGJhY2s9Yn1mdW5jdGlvbiBkKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ofWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmIWYoYSl9ZnVuY3Rpb24gZihhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50PT09ZG9jdW1lbnR8fGEub3duZXJEb2N1bWVudC5pbXBsPT09ZG9jdW1lbnR9dmFyIGc9YS5wYXRoLGg9ImltcG9ydCIsaT0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxqPXtzZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2grIl0iLCJsaW5rW3JlbD1zdHlsZXNoZWV0XSIsInN0eWxlIiwic2NyaXB0Om5vdChbdHlwZV0pIiwnc2NyaXB0W3R5cGU9InRleHQvamF2YXNjcmlwdCJdJ10sbWFwOntsaW5rOiJwYXJzZUxpbmsiLHNjcmlwdDoicGFyc2VTY3JpcHQiLHN0eWxlOiJwYXJzZVN0eWxlIn0scGFyc2U6ZnVuY3Rpb24oYSxiKXtpZihhLl9faW1wb3J0UGFyc2VkKWImJmIoKTtlbHNle2EuX19pbXBvcnRQYXJzZWQ9ITA7Zm9yKHZhciBkLGU9bmV3IGMoYSxiKSxmPWEucXVlcnlTZWxlY3RvckFsbChqLnNlbGVjdG9ycyksZz1hLnNjcmlwdHM/YS5zY3JpcHRzLmxlbmd0aDowLGg9MDtoPGYubGVuZ3RoJiYoZD1mW2hdKTtoKyspaltqLm1hcFtkLmxvY2FsTmFtZV1dKGQpLGEuc2NyaXB0cyYmZyE9PWEuc2NyaXB0cy5sZW5ndGgmJihnPWEuc2NyaXB0cy5sZW5ndGgsZj1hLnF1ZXJ5U2VsZWN0b3JBbGwoai5zZWxlY3RvcnMpKTtlLm9wZW4oKX19LHBhcnNlTGluazpmdW5jdGlvbihhKXtpZihkKGEpKXtpZih0aGlzLnRyYWNrRWxlbWVudChhKSxhLl9fcmVzb3VyY2U/ai5wYXJzZShhLl9fcmVzb3VyY2UsZnVuY3Rpb24oKXthLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJsb2FkIix7YnViYmxlczohMX0pKX0pOmEuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoImVycm9yIix7YnViYmxlczohMX0pKSxhLl9fcGVuZGluZylmb3IodmFyIGI7YS5fX3BlbmRpbmcubGVuZ3RoOyliPWEuX19wZW5kaW5nLnNoaWZ0KCksYiYmYih7dGFyZ2V0OmF9KTthLl9faW1wb3J0UGFyc2VkPSEwfWVsc2UgZShhKSYmKGEuaHJlZj1hLmhyZWYpLHRoaXMucGFyc2VHZW5lcmljKGEpfSx0cmFja0VsZW1lbnQ6ZnVuY3Rpb24oYSl7aSYmInN0eWxlIj09PWEubG9jYWxOYW1lfHxhLm93bmVyRG9jdW1lbnQuX19sb2FkVHJhY2tlci5yZXF1aXJlKGEpfSxwYXJzZVN0eWxlOmZ1bmN0aW9uKGEpe2E9ZShhKT9iKGEpOmEsdGhpcy5wYXJzZUdlbmVyaWMoYSl9LHBhcnNlR2VuZXJpYzpmdW5jdGlvbihhKXtmKGEpfHwodGhpcy50cmFja0VsZW1lbnQoYSksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChhKSl9LHBhcnNlU2NyaXB0OmZ1bmN0aW9uKGIpe2lmKGUoYikpe3ZhciBjPShiLl9fcmVzb3VyY2V8fGIudGV4dENvbnRlbnQpLnRyaW0oKTtpZihjKXt2YXIgZD1iLl9fbm9kZVVybDtpZighZCl7ZD1iLm93bmVyRG9jdW1lbnQuYmFzZVVSSTt2YXIgZj0iWyIrTWF0aC5mbG9vcigxZTMqKE1hdGgucmFuZG9tKCkrMSkpKyJdIixnPWMubWF0Y2goL1BvbHltZXJcKFsnIl0oW14nIl0qKS8pO2Y9ZyYmZ1sxXXx8ZixkKz0iLyIrZisiLmpzIn1jKz0iXG4vLyMgc291cmNlVVJMPSIrZCsiXG4iLGEuY3VycmVudFNjcmlwdD1iLGV2YWwuY2FsbCh3aW5kb3csYyksYS5jdXJyZW50U2NyaXB0PW51bGx9fX19LGs9Lyh1cmxcKCkoW14pXSopKFwpKS9nLGw9LyhAaW1wb3J0W1xzXSopKFteO10qKSg7KS9nLGc9e3Jlc29sdmVVcmxzSW5TdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQsYz1iLmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVVcmxzSW5Dc3NUZXh0KGEudGV4dENvbnRlbnQsYyksYX0scmVzb2x2ZVVybHNJbkNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlcGxhY2VVcmxzKGEsYixrKTtyZXR1cm4gYz10aGlzLnJlcGxhY2VVcmxzKGMsYixsKX0scmVwbGFjZVVybHM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnJlcGxhY2UoYyxmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1kLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGIuaHJlZj1mLGY9Yi5ocmVmLGMrIiciK2YrIiciK2V9KX19O2MucHJvdG90eXBlPXtwZW5kaW5nOjAsaXNPcGVuOiExLG9wZW46ZnVuY3Rpb24oKXt0aGlzLmlzT3Blbj0hMCx0aGlzLmNoZWNrRG9uZSgpfSxhZGQ6ZnVuY3Rpb24oKXt0aGlzLnBlbmRpbmcrK30scmVxdWlyZTpmdW5jdGlvbihhKXt0aGlzLmFkZCgpO3ZhciBiPXRoaXMsYz1mdW5jdGlvbihhKXtiLnJlY2VpdmUoYSl9O2lmKGQoYSkpYS5fX3BlbmRpbmc9YS5fX3BlbmRpbmd8fFtdLGEuX19wZW5kaW5nLnB1c2goYyk7ZWxzZSBmb3IodmFyIGUsZj1bImxvYWQiLCJlcnJvciJdLGc9MCxoPWYubGVuZ3RoO2g+ZyYmKGU9ZltnXSk7ZysrKWEuYWRkRXZlbnRMaXN0ZW5lcihlLGMpfSxyZWNlaXZlOmZ1bmN0aW9uKCl7dGhpcy5wZW5kaW5nLS0sdGhpcy5jaGVja0RvbmUoKX0sY2hlY2tEb25lOmZ1bmN0aW9uKCl7dGhpcy5pc09wZW4mJnRoaXMucGVuZGluZzw9MCYmdGhpcy5jYWxsYmFjayYmKHRoaXMuaXNPcGVuPSExLHRoaXMuY2FsbGJhY2soKSl9fSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLGEucGFyc2VyPWosYS5wYXRoPWcsYS5pc0lFPWl9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5yZWFkeT0hMCxIVE1MSW1wb3J0cy5yZWFkeVRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCksYy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiSFRNTEltcG9ydHNMb2FkZWQiLHtidWJibGVzOiEwfSkpfWZ1bmN0aW9uIGIoKXtIVE1MSW1wb3J0cy51c2VOYXRpdmV8fEhUTUxJbXBvcnRzLmltcG9ydGVyLmxvYWQoYyxmdW5jdGlvbigpe0hUTUxJbXBvcnRzLnBhcnNlci5wYXJzZShjKX0pfSJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO3JldHVybiBjLmluaXRFdmVudChhLGIuYnViYmxlcz09PSExPyExOiEwLGIuY2FuY2VsYWJsZT09PSExPyExOiEwLGIuZGV0YWlsKSxjfSk7dmFyIGM9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP3dpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoZG9jdW1lbnQpOmRvY3VtZW50O0hUTUxJbXBvcnRzLnVzZU5hdGl2ZXx8KCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHwiaW50ZXJhY3RpdmUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmIXdpbmRvdy5hdHRhY2hFdmVudD9iKCk6ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsYikpLEhUTUxJbXBvcnRzLndoZW5JbXBvcnRzUmVhZHkoZnVuY3Rpb24oKXthKCl9KX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3UucHVzaChhKSx0fHwodD0hMCxxKGQpKX1mdW5jdGlvbiBjKGEpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSl8fGF9ZnVuY3Rpb24gZCgpe3Q9ITE7dmFyIGE9dTt1PVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7dmFyIGI9ITE7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEudGFrZVJlY29yZHMoKTtlKGEpLGMubGVuZ3RoJiYoYS5jYWxsYmFja18oYyxhKSxiPSEwKX0pLGImJmQoKX1mdW5jdGlvbiBlKGEpe2Eubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9cC5nZXQoYik7YyYmYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Iub2JzZXJ2ZXI9PT1hJiZiLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPWE7YztjPWMucGFyZW50Tm9kZSl7dmFyIGQ9cC5nZXQoYyk7aWYoZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXSxnPWYub3B0aW9ucztpZihjPT09YXx8Zy5zdWJ0cmVlKXt2YXIgaD1iKGcpO2gmJmYuZW5xdWV1ZShoKX19fX1mdW5jdGlvbiBnKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89Kyt2fWZ1bmN0aW9uIGgoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1bXSx0aGlzLnJlbW92ZWROb2Rlcz1bXSx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBpKGEpe3ZhciBiPW5ldyBoKGEudHlwZSxhLnRhcmdldCk7cmV0dXJuIGIuYWRkZWROb2Rlcz1hLmFkZGVkTm9kZXMuc2xpY2UoKSxiLnJlbW92ZWROb2Rlcz1hLnJlbW92ZWROb2Rlcy5zbGljZSgpLGIucHJldmlvdXNTaWJsaW5nPWEucHJldmlvdXNTaWJsaW5nLGIubmV4dFNpYmxpbmc9YS5uZXh0U2libGluZyxiLmF0dHJpYnV0ZU5hbWU9YS5hdHRyaWJ1dGVOYW1lLGIuYXR0cmlidXRlTmFtZXNwYWNlPWEuYXR0cmlidXRlTmFtZXNwYWNlLGIub2xkVmFsdWU9YS5vbGRWYWx1ZSxifWZ1bmN0aW9uIGooYSxiKXtyZXR1cm4gdz1uZXcgaChhLGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIHg/eDooeD1pKHcpLHgub2xkVmFsdWU9YSx4KX1mdW5jdGlvbiBsKCl7dz14PXZvaWQgMH1mdW5jdGlvbiBtKGEpe3JldHVybiBhPT09eHx8YT09PXd9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgV2Vha01hcCxxPXdpbmRvdy5tc1NldEltbWVkaWF0ZTsKaWYoIXEpe3ZhciByPVtdLHM9U3RyaW5nKE1hdGgucmFuZG9tKCkpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixmdW5jdGlvbihhKXtpZihhLmRhdGE9PT1zKXt2YXIgYj1yO3I9W10sYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EoKX0pfX0pLHE9ZnVuY3Rpb24oYSl7ci5wdXNoKGEpLHdpbmRvdy5wb3N0TWVzc2FnZShzLCIqIil9fXZhciB0PSExLHU9W10sdj0wO2cucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGEsYil7aWYoYT1jKGEpLCFiLmNoaWxkTGlzdCYmIWIuYXR0cmlidXRlcyYmIWIuY2hhcmFjdGVyRGF0YXx8Yi5hdHRyaWJ1dGVPbGRWYWx1ZSYmIWIuYXR0cmlidXRlc3x8Yi5hdHRyaWJ1dGVGaWx0ZXImJmIuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmIWIuYXR0cmlidXRlc3x8Yi5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUmJiFiLmNoYXJhY3RlckRhdGEpdGhyb3cgbmV3IFN5bnRheEVycm9yO3ZhciBkPXAuZ2V0KGEpO2R8fHAuc2V0KGEsZD1bXSk7Zm9yKHZhciBlLGY9MDtmPGQubGVuZ3RoO2YrKylpZihkW2ZdLm9ic2VydmVyPT09dGhpcyl7ZT1kW2ZdLGUucmVtb3ZlTGlzdGVuZXJzKCksZS5vcHRpb25zPWI7YnJlYWt9ZXx8KGU9bmV3IG8odGhpcyxhLGIpLGQucHVzaChlKSx0aGlzLm5vZGVzXy5wdXNoKGEpKSxlLmFkZExpc3RlbmVycygpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9cC5nZXQoYSksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdO2lmKGQub2JzZXJ2ZXI9PT10aGlzKXtkLnJlbW92ZUxpc3RlbmVycygpLGIuc3BsaWNlKGMsMSk7YnJlYWt9fX0sdGhpcyksdGhpcy5yZWNvcmRzXz1bXX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlY29yZHNfO3JldHVybiB0aGlzLnJlY29yZHNfPVtdLGF9fTt2YXIgdyx4O28ucHJvdG90eXBlPXtlbnF1ZXVlOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMub2JzZXJ2ZXIucmVjb3Jkc18sZD1jLmxlbmd0aDtpZihjLmxlbmd0aD4wKXt2YXIgZT1jW2QtMV0sZj1uKGUsYSk7aWYoZilyZXR1cm4gdm9pZChjW2QtMV09Zil9ZWxzZSBiKHRoaXMub2JzZXJ2ZXIpO2NbZF09YX0sYWRkTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5hZGRMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0sYWRkTGlzdGVuZXJzXzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnM7Yi5hdHRyaWJ1dGVzJiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUF0dHJNb2RpZmllZCIsdGhpcywhMCksYi5jaGFyYWN0ZXJEYXRhJiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcywhMCksYi5jaGlsZExpc3QmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NTm9kZUluc2VydGVkIix0aGlzLCEwKSwoYi5jaGlsZExpc3R8fGIuc3VidHJlZSkmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NTm9kZVJlbW92ZWQiLHRoaXMsITApfSxyZW1vdmVMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18odGhpcy50YXJnZXQpfSxyZW1vdmVMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LGFkZFRyYW5zaWVudE9ic2VydmVyOmZ1bmN0aW9uKGEpe2lmKGEhPT10aGlzLnRhcmdldCl7dGhpcy5hZGRMaXN0ZW5lcnNfKGEpLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGEpO3ZhciBiPXAuZ2V0KGEpO2J8fHAuc2V0KGEsYj1bXSksYi5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXSxhLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKGEpO2Zvcih2YXIgYj1wLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXT09PXRoaXMpe2Iuc3BsaWNlKGMsMSk7YnJlYWt9fSx0aGlzKX0saGFuZGxlRXZlbnQ6ZnVuY3Rpb24oYSl7c3dpdGNoKGEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksYS50eXBlKXtjYXNlIkRPTUF0dHJNb2RpZmllZCI6dmFyIGI9YS5hdHRyTmFtZSxjPWEucmVsYXRlZE5vZGUubmFtZXNwYWNlVVJJLGQ9YS50YXJnZXQsZT1uZXcgaigiYXR0cmlidXRlcyIsZCk7ZS5hdHRyaWJ1dGVOYW1lPWIsZS5hdHRyaWJ1dGVOYW1lc3BhY2U9Yzt2YXIgZz1hLmF0dHJDaGFuZ2U9PT1NdXRhdGlvbkV2ZW50LkFERElUSU9OP251bGw6YS5wcmV2VmFsdWU7ZihkLGZ1bmN0aW9uKGEpe3JldHVybiFhLmF0dHJpYnV0ZXN8fGEuYXR0cmlidXRlRmlsdGVyJiZhLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJi0xPT09YS5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihiKSYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGMpP3ZvaWQgMDphLmF0dHJpYnV0ZU9sZFZhbHVlP2soZyk6ZX0pO2JyZWFrO2Nhc2UiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIjp2YXIgZD1hLnRhcmdldCxlPWooImNoYXJhY3RlckRhdGEiLGQpLGc9YS5wcmV2VmFsdWU7ZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoYXJhY3RlckRhdGE/YS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWU/ayhnKTplOnZvaWQgMH0pO2JyZWFrO2Nhc2UiRE9NTm9kZVJlbW92ZWQiOnRoaXMuYWRkVHJhbnNpZW50T2JzZXJ2ZXIoYS50YXJnZXQpO2Nhc2UiRE9NTm9kZUluc2VydGVkIjp2YXIgaCxpLGQ9YS5yZWxhdGVkTm9kZSxtPWEudGFyZ2V0OyJET01Ob2RlSW5zZXJ0ZWQiPT09YS50eXBlPyhoPVttXSxpPVtdKTooaD1bXSxpPVttXSk7dmFyIG49bS5wcmV2aW91c1NpYmxpbmcsbz1tLm5leHRTaWJsaW5nLGU9aigiY2hpbGRMaXN0IixkKTtlLmFkZGVkTm9kZXM9aCxlLnJlbW92ZWROb2Rlcz1pLGUucHJldmlvdXNTaWJsaW5nPW4sZS5uZXh0U2libGluZz1vLGYoZCxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGlsZExpc3Q/ZTp2b2lkIDB9KX1sKCl9fSxhLkpzTXV0YXRpb25PYnNlcnZlcj1nLGEuTXV0YXRpb25PYnNlcnZlcnx8KGEuTXV0YXRpb25PYnNlcnZlcj1nKX0odGhpcyksd2luZG93LkN1c3RvbUVsZW1lbnRzPXdpbmRvdy5DdXN0b21FbGVtZW50c3x8e2ZsYWdzOnt9fSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyxkKXt2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2lmKCFlKWZvcihlPWEuZmlyc3RDaGlsZDtlJiZlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWU9ZS5uZXh0U2libGluZztmb3IoO2U7KWMoZSxkKSE9PSEwJiZiKGUsYyxkKSxlPWUubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiKXtmb3IodmFyIGM9YS5zaGFkb3dSb290O2M7KWQoYyxiKSxjPWMub2xkZXJTaGFkb3dSb290fWZ1bmN0aW9uIGQoYSxkKXtiKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSk/ITA6dm9pZCBjKGEsZCl9KSxjKGEsZCl9ZnVuY3Rpb24gZShhKXtyZXR1cm4gaChhKT8oaShhKSwhMCk6dm9pZCBsKGEpfWZ1bmN0aW9uIGYoYSl7ZChhLGZ1bmN0aW9uKGEpe3JldHVybiBlKGEpPyEwOnZvaWQgMH0pfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIGUoYSl8fGYoYSl9ZnVuY3Rpb24gaChiKXtpZighYi5fX3VwZ3JhZGVkX18mJmIubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoImlzIil8fGIubG9jYWxOYW1lLGQ9YS5yZWdpc3RyeVtjXTtpZihkKXJldHVybiBBLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZToiLGIubG9jYWxOYW1lKSxhLnVwZ3JhZGUoYiksQS5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSwhMH19ZnVuY3Rpb24gaShhKXtsKGEpLHIoYSkmJmQoYSxmdW5jdGlvbihhKXtsKGEpfSl9ZnVuY3Rpb24gaihhKXtpZihFLnB1c2goYSksIUQpe0Q9ITA7dmFyIGI9d2luZG93LlBsYXRmb3JtJiZ3aW5kb3cuUGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2t8fHNldFRpbWVvdXQ7YihrKX19ZnVuY3Rpb24gaygpe0Q9ITE7Zm9yKHZhciBhLGI9RSxjPTAsZD1iLmxlbmd0aDtkPmMmJihhPWJbY10pO2MrKylhKCk7RT1bXX1mdW5jdGlvbiBsKGEpe0M/aihmdW5jdGlvbigpe20oYSl9KTptKGEpfWZ1bmN0aW9uIG0oYSl7KGEuYXR0YWNoZWRDYWxsYmFja3x8YS5kZXRhY2hlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmQS5kb20pJiYoQS5kb20mJmNvbnNvbGUuZ3JvdXAoImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLHIoYSkmJihhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCkrMSxhLl9faW5zZXJ0ZWQ8MSYmKGEuX19pbnNlcnRlZD0xKSxhLl9faW5zZXJ0ZWQ+MT9BLmRvbSYmY29uc29sZS53YXJuKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLmF0dGFjaGVkQ2FsbGJhY2smJihBLmRvbSYmY29uc29sZS5sb2coImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLGEuYXR0YWNoZWRDYWxsYmFjaygpKSksQS5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gbihhKXtvKGEpLGQoYSxmdW5jdGlvbihhKXtvKGEpfSl9ZnVuY3Rpb24gbyhhKXtDP2ooZnVuY3Rpb24oKXtwKGEpfSk6cChhKX1mdW5jdGlvbiBwKGEpeyhhLmF0dGFjaGVkQ2FsbGJhY2t8fGEuZGV0YWNoZWRDYWxsYmFja3x8YS5fX3VwZ3JhZGVkX18mJkEuZG9tKSYmKEEuZG9tJiZjb25zb2xlLmdyb3VwKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUpLHIoYSl8fChhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCktMSxhLl9faW5zZXJ0ZWQ+MCYmKGEuX19pbnNlcnRlZD0wKSxhLl9faW5zZXJ0ZWQ8MD9BLmRvbSYmY29uc29sZS53YXJuKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuZGV0YWNoZWRDYWxsYmFjayYmYS5kZXRhY2hlZENhbGxiYWNrKCkpLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCkpfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD9TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSk6YX1mdW5jdGlvbiByKGEpe2Zvcih2YXIgYj1hLGM9cShkb2N1bWVudCk7Yjspe2lmKGI9PWMpcmV0dXJuITA7Yj1iLnBhcmVudE5vZGV8fGIuaG9zdH19ZnVuY3Rpb24gcyhhKXtpZihhLnNoYWRvd1Jvb3QmJiFhLnNoYWRvd1Jvb3QuX193YXRjaGVkKXtBLmRvbSYmY29uc29sZS5sb2coIndhdGNoaW5nIHNoYWRvdy1yb290IGZvcjogIixhLmxvY2FsTmFtZSk7Zm9yKHZhciBiPWEuc2hhZG93Um9vdDtiOyl0KGIpLGI9Yi5vbGRlclNoYWRvd1Jvb3R9fWZ1bmN0aW9uIHQoYSl7YS5fX3dhdGNoZWR8fCh3KGEpLGEuX193YXRjaGVkPSEwKX1mdW5jdGlvbiB1KGEpe2lmKEEuZG9tKXt2YXIgYj1hWzBdO2lmKGImJiJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMmJmIuYWRkZWROb2Rlcyl7Zm9yKHZhciBjPWIuYWRkZWROb2Rlc1swXTtjJiZjIT09ZG9jdW1lbnQmJiFjLmhvc3Q7KWM9Yy5wYXJlbnROb2RlO3ZhciBkPWMmJihjLlVSTHx8Yy5fVVJMfHxjLmhvc3QmJmMuaG9zdC5sb2NhbE5hbWUpfHwiIjtkPWQuc3BsaXQoIi8/Iikuc2hpZnQoKS5zcGxpdCgiLyIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoIm11dGF0aW9ucyAoJWQpIFslc10iLGEubGVuZ3RoLGR8fCIiKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7ImNoaWxkTGlzdCI9PT1hLnR5cGUmJihHKGEuYWRkZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmZyhhKX0pLEcoYS5yZW1vdmVkTm9kZXMsZnVuY3Rpb24oYSl7YS5sb2NhbE5hbWUmJm4oYSl9KSl9KSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHYoKXt1KEYudGFrZVJlY29yZHMoKSksaygpfWZ1bmN0aW9uIHcoYSl7Ri5vYnNlcnZlKGEse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9ZnVuY3Rpb24geChhKXt3KGEpfWZ1bmN0aW9uIHkoYSl7QS5kb20mJmNvbnNvbGUuZ3JvdXAoInVwZ3JhZGVEb2N1bWVudDogIixhLmJhc2VVUkkuc3BsaXQoIi8iKS5wb3AoKSksZyhhKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHooYSl7YT1xKGEpLHkoYSk7Zm9yKHZhciBiLGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK0IrIl0iKSxkPTAsZT1jLmxlbmd0aDtlPmQmJihiPWNbZF0pO2QrKyliLmltcG9ydCYmYi5pbXBvcnQuX19wYXJzZWQmJnooYi5pbXBvcnQpfXZhciBBPXdpbmRvdy5sb2dGbGFnc3x8e30sQj13aW5kb3cuSFRNTEltcG9ydHM/SFRNTEltcG9ydHMuSU1QT1JUX0xJTktfVFlQRToibm9uZSIsQz0hd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyPT09d2luZG93LkpzTXV0YXRpb25PYnNlcnZlcjthLmhhc1BvbHlmaWxsTXV0YXRpb25zPUM7dmFyIEQ9ITEsRT1bXSxGPW5ldyBNdXRhdGlvbk9ic2VydmVyKHUpLEc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLklNUE9SVF9MSU5LX1RZUEU9QixhLndhdGNoU2hhZG93PXMsYS51cGdyYWRlRG9jdW1lbnRUcmVlPXosYS51cGdyYWRlQWxsPWcsYS51cGdyYWRlU3VidHJlZT1mLGEub2JzZXJ2ZURvY3VtZW50PXgsYS51cGdyYWRlRG9jdW1lbnQ9eSxhLnRha2VSZWNvcmRzPXZ9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiLGYpe3ZhciBnPWZ8fHt9O2lmKCFiKXRocm93IG5ldyBFcnJvcigiZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50OiBmaXJzdCBhcmd1bWVudCBgbmFtZWAgbXVzdCBub3QgYmUgZW1wdHkiKTtpZihiLmluZGV4T2YoIi0iKTwwKXRocm93IG5ldyBFcnJvcigiZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50OiBmaXJzdCBhcmd1bWVudCAoJ25hbWUnKSBtdXN0IGNvbnRhaW4gYSBkYXNoICgnLScpLiBBcmd1bWVudCBwcm92aWRlZCB3YXMgJyIrU3RyaW5nKGIpKyInLiIpO2lmKG0oYikpdGhyb3cgbmV3IEVycm9yKCJEdXBsaWNhdGVEZWZpbml0aW9uRXJyb3I6IGEgdHlwZSB3aXRoIG5hbWUgJyIrU3RyaW5nKGIpKyInIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCIpO2lmKCFnLnByb3RvdHlwZSl0aHJvdyBuZXcgRXJyb3IoIk9wdGlvbnMgbWlzc2luZyByZXF1aXJlZCBwcm90b3R5cGUgcHJvcGVydHkiKTtyZXR1cm4gZy5fX25hbWU9Yi50b0xvd2VyQ2FzZSgpLGcubGlmZWN5Y2xlPWcubGlmZWN5Y2xlfHx7fSxnLmFuY2VzdHJ5PWMoZy5leHRlbmRzKSxkKGcpLGUoZyksayhnLnByb3RvdHlwZSksbihnLl9fbmFtZSxnKSxnLmN0b3I9byhnKSxnLmN0b3IucHJvdG90eXBlPWcucHJvdG90eXBlLGcucHJvdG90eXBlLmNvbnN0cnVjdG9yPWcuY3RvcixhLnJlYWR5JiZhLnVwZ3JhZGVEb2N1bWVudFRyZWUoZG9jdW1lbnQpLGcuY3Rvcn1mdW5jdGlvbiBjKGEpe3ZhciBiPW0oYSk7cmV0dXJuIGI/YyhiLmV4dGVuZHMpLmNvbmNhdChbYl0pOltdfWZ1bmN0aW9uIGQoYSl7Zm9yKHZhciBiLGM9YS5leHRlbmRzLGQ9MDtiPWEuYW5jZXN0cnlbZF07ZCsrKWM9Yi5pcyYmYi50YWc7YS50YWc9Y3x8YS5fX25hbWUsYyYmKGEuaXM9YS5fX25hbWUpfWZ1bmN0aW9uIGUoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKTtiPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKX1mb3IodmFyIGQsZT1hLnByb3RvdHlwZTtlJiZlIT09Yjspe3ZhciBkPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtlLl9fcHJvdG9fXz1kLGU9ZH19YS5uYXRpdmU9Yn1mdW5jdGlvbiBmKGEpe3JldHVybiBnKHgoYS50YWcpLGEpfWZ1bmN0aW9uIGcoYixjKXtyZXR1cm4gYy5pcyYmYi5zZXRBdHRyaWJ1dGUoImlzIixjLmlzKSxiLnJlbW92ZUF0dHJpYnV0ZSgidW5yZXNvbHZlZCIpLGgoYixjKSxiLl9fdXBncmFkZWRfXz0hMCxhLnVwZ3JhZGVTdWJ0cmVlKGIpLGooYiksYn1mdW5jdGlvbiBoKGEsYil7T2JqZWN0Ll9fcHJvdG9fXz9hLl9fcHJvdG9fXz1iLnByb3RvdHlwZTooaShhLGIucHJvdG90eXBlLGIubmF0aXZlKSxhLl9fcHJvdG9fXz1iLnByb3RvdHlwZSl9ZnVuY3Rpb24gaShhLGIsYyl7Zm9yKHZhciBkPXt9LGU9YjtlIT09YyYmZSE9PUhUTUxVbmtub3duRWxlbWVudC5wcm90b3R5cGU7KXtmb3IodmFyIGYsZz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKSxoPTA7Zj1nW2hdO2grKylkW2ZdfHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsZixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsZikpLGRbZl09MSk7ZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9fWZ1bmN0aW9uIGooYSl7YS5jcmVhdGVkQ2FsbGJhY2smJmEuY3JlYXRlZENhbGxiYWNrKCl9ZnVuY3Rpb24gayhhKXtpZighYS5zZXRBdHRyaWJ1dGUuX3BvbHlmaWxsZWQpe3ZhciBiPWEuc2V0QXR0cmlidXRlO2Euc2V0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYyl7bC5jYWxsKHRoaXMsYSxjLGIpfTt2YXIgYz1hLnJlbW92ZUF0dHJpYnV0ZTthLnJlbW92ZUF0dHJpYnV0ZT1mdW5jdGlvbihhKXtsLmNhbGwodGhpcyxhLG51bGwsYyl9LGEuc2V0QXR0cmlidXRlLl9wb2x5ZmlsbGVkPSEwfX1mdW5jdGlvbiBsKGEsYixjKXt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShhKTtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT10aGlzLmdldEF0dHJpYnV0ZShhKTt0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmZSE9PWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGEsZCxlKX1mdW5jdGlvbiBtKGEpe3JldHVybiBhP3dbYS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9ZnVuY3Rpb24gbihhLGIpe3dbYV09Yn1mdW5jdGlvbiBvKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBmKGEpfX1mdW5jdGlvbiBwKGEsYil7dmFyIGM9bShifHxhKTtyZXR1cm4gYz9uZXcgYy5jdG9yOngoYSl9ZnVuY3Rpb24gcShhKXtpZighYS5fX3VwZ3JhZGVkX18mJmEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoImlzIil8fGEubG9jYWxOYW1lLGM9bShiKTtyZXR1cm4gYyYmZyhhLGMpfX1mdW5jdGlvbiByKGIpe3ZhciBjPXkuY2FsbCh0aGlzLGIpO3JldHVybiBhLnVwZ3JhZGVBbGwoYyksY31hfHwoYT13aW5kb3cuQ3VzdG9tRWxlbWVudHM9e2ZsYWdzOnt9fSk7dmFyIHM9YS5mbGFncyx0PUJvb2xlYW4oZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KSx1PSFzLnJlZ2lzdGVyJiZ0JiYhd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsO2lmKHUpe3ZhciB2PWZ1bmN0aW9uKCl7fTthLnJlZ2lzdHJ5PXt9LGEudXBncmFkZUVsZW1lbnQ9dixhLndhdGNoU2hhZG93PXYsYS51cGdyYWRlPXYsYS51cGdyYWRlQWxsPXYsYS51cGdyYWRlU3VidHJlZT12LGEub2JzZXJ2ZURvY3VtZW50PXYsYS51cGdyYWRlRG9jdW1lbnQ9dixhLnVwZ3JhZGVEb2N1bWVudFRyZWU9dixhLnRha2VSZWNvcmRzPXZ9ZWxzZXt2YXIgdz17fSx4PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYmluZChkb2N1bWVudCkseT1Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGU7ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50PWIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudD1wLE5vZGUucHJvdG90eXBlLmNsb25lTm9kZT1yLGEucmVnaXN0cnk9dyxhLnVwZ3JhZGU9cX1kb2N1bWVudC5yZWdpc3Rlcj1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQsYS5oYXNOYXRpdmU9dCxhLnVzZU5hdGl2ZT11fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWN9dmFyIGM9YS5JTVBPUlRfTElOS19UWVBFLGQ9e3NlbGVjdG9yczpbImxpbmtbcmVsPSIrYysiXSJdLG1hcDp7bGluazoicGFyc2VMaW5rIn0scGFyc2U6ZnVuY3Rpb24oYSl7aWYoIWEuX19wYXJzZWQpe2EuX19wYXJzZWQ9ITA7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGQuc2VsZWN0b3JzKTtlKGIsZnVuY3Rpb24oYSl7ZFtkLm1hcFthLmxvY2FsTmFtZV1dKGEpfSksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGEpLEN1c3RvbUVsZW1lbnRzLm9ic2VydmVEb2N1bWVudChhKX19LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpJiZ0aGlzLnBhcnNlSW1wb3J0KGEpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXthLmltcG9ydCYmZC5wYXJzZShhLmltcG9ydCl9fSxlPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS5wYXJzZXI9ZCxhLklNUE9SVF9MSU5LX1RZUEU9Y30od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoZG9jdW1lbnQpO3ZhciBhPXdpbmRvdy5QbGF0Zm9ybSYmUGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s/UGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s6c2V0VGltZW91dDthKGZ1bmN0aW9uKCl7Q3VzdG9tRWxlbWVudHMucmVhZHk9ITAsQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lPURhdGUubm93KCksd2luZG93LkhUTUxJbXBvcnRzJiYoQ3VzdG9tRWxlbWVudHMuZWxhcHNlZD1DdXN0b21FbGVtZW50cy5yZWFkeVRpbWUtSFRNTEltcG9ydHMucmVhZHlUaW1lKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiV2ViQ29tcG9uZW50c1JlYWR5Iix7YnViYmxlczohMH0pKX0pfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYi5pbml0RXZlbnQoYSwhMCwhMCksYn0pLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHxhLmZsYWdzLmVhZ2VyKWIoKTtlbHNlIGlmKCJpbnRlcmFjdGl2ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlfHx3aW5kb3cuYXR0YWNoRXZlbnR8fHdpbmRvdy5IVE1MSW1wb3J0cyYmIXdpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeSl7dmFyIGM9d2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMucmVhZHk/IkhUTUxJbXBvcnRzTG9hZGVkIjoiRE9NQ29udGVudExvYWRlZCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYyxiKX1lbHNlIGIoKX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7YS50ZXh0Q29udGVudD0iZWxlbWVudCB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30gLyogaW5qZWN0ZWQgYnkgcGxhdGZvcm0uanMgKi8iO3ZhciBiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtpZihiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCksd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXt2YXIgYz1bInVwZ3JhZGVBbGwiLCJ1cGdyYWRlU3VidHJlZSIsIm9ic2VydmVEb2N1bWVudCIsInVwZ3JhZGVEb2N1bWVudCJdLGQ9e307Yy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2RbYV09Q3VzdG9tRWxlbWVudHNbYV19KSxjLmZvckVhY2goZnVuY3Rpb24oYSl7Q3VzdG9tRWxlbWVudHNbYV09ZnVuY3Rpb24oYil7cmV0dXJuIGRbYV0od3JhcChiKSl9fSl9fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zi50ZXh0Q29udGVudD1kKyssZS5wdXNoKGEpfWZ1bmN0aW9uIGMoKXtmb3IoO2UubGVuZ3RoOyllLnNoaWZ0KCkoKX12YXIgZD0wLGU9W10sZj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3KHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHxKc011dGF0aW9uT2JzZXJ2ZXIpKGMpLm9ic2VydmUoZix7Y2hhcmFjdGVyRGF0YTohMH0pLGEuZW5kT2ZNaWNyb3Rhc2s9Yn0oUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgZD1jKGEpO2ImJihkLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGIpLGQuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGIpKSxsLmFwcGVuZENoaWxkKGQpfWZ1bmN0aW9uIGMoYSxiKXtiPWJ8fGRvY3VtZW50LGI9Yi5jcmVhdGVFbGVtZW50P2I6Yi5vd25lckRvY3VtZW50O3ZhciBjPWIuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYy50ZXh0Q29udGVudD1hLGN9ZnVuY3Rpb24gZChhLGIpe2I9Ynx8IiI7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtpZihhKXt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtkLmhyZWY9YSxjLmhlYWQuYXBwZW5kQ2hpbGQoZCl9dmFyIGU9Yy5jcmVhdGVFbGVtZW50KCJhIik7cmV0dXJuIGUuaHJlZj1iLGMuYm9keS5hcHBlbmRDaGlsZChlKSxlfWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gSFRNTEltcG9ydHMucGF0aC5yZXNvbHZlVXJsc0luQ3NzVGV4dChhLGQoYikpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIEhUTUxJbXBvcnRzLnBhdGgucmVzb2x2ZVVybHNJblN0eWxlKGEpfWZ1bmN0aW9uIGcoYSxiKXtIVE1MSW1wb3J0cy54aHIubG9hZChoKGEpLGZ1bmN0aW9uKGEsYyxkKXtpKHRoaXMsZCxjKSx0aGlzLnRleHRDb250ZW50PWUodGhpcy50ZXh0Q29udGVudCxkKSxiJiZiKHRoaXMpfSxhKX1mdW5jdGlvbiBoKGEpe3ZhciBiPWEudGV4dENvbnRlbnQubWF0Y2gobSk7cmV0dXJuIGImJmJbMV19ZnVuY3Rpb24gaShhLGIsYyl7dmFyIGQ9bmV3IFJlZ0V4cCgiQGltcG9ydFteO10qIitiKyJbXjtdKjsiLCJpIik7YS50ZXh0Q29udGVudD1hLnRleHRDb250ZW50LnJlcGxhY2UoZCxjKX12YXIgaj17Y2FjaGVTdHlsZXM6ZnVuY3Rpb24oYSxjKXtmb3IodmFyIGQsZT1bXSxmPTAsZz1hLmxlbmd0aDtnPmYmJihkPWFbZl0pO2YrKyllLnB1c2goZC50ZXh0Q29udGVudCk7YihlLmpvaW4oIlxuIiksYyl9LHhoclN0eWxlczpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXtlKyssZT09PWYmJmImJmIoKX1mb3IodmFyIGQsZT0wLGY9YS5sZW5ndGgsaD0wO2Y+aCYmKGQ9YVtoXSk7aCsrKWcoZCxjKX19LGs9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgicHJlbG9hZGVyIik7ay5zdHlsZS5kaXNwbGF5PSJub25lIjt2YXIgbD1rLmNyZWF0ZVNoYWRvd1Jvb3QoKTtkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGspO3ZhciBtPS9AaW1wb3J0XHNbKF0/WyciXT8oW15ccyciOyldKikvO2oucmVzb2x2ZVVybHNJbkNzc1RleHQ9ZSxqLnJlc29sdmVVcmxzSW5TdHlsZT1mLGEubG9hZGVyPWp9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7YT1hfHx7fSxhLmV4dGVybmFsPWEuZXh0ZXJuYWx8fHt9O3ZhciBiPXtzaGFkb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS5zaGFkb3dSb290fHxhLndlYmtpdFNoYWRvd1Jvb3Q6dm9pZCAwfSxjYW5UYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJkJvb2xlYW4oYS5lbGVtZW50RnJvbVBvaW50KX0sdGFyZ2V0aW5nU2hhZG93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2hhZG93KGEpO3JldHVybiB0aGlzLmNhblRhcmdldChiKT9iOnZvaWQgMH0sb2xkZXJTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoIWIpe3ZhciBjPWEucXVlcnlTZWxlY3Rvcigic2hhZG93Iik7YyYmKGI9Yy5vbGRlclNoYWRvd1Jvb3QpfXJldHVybiBifSxhbGxTaGFkb3dzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPXRoaXMuc2hhZG93KGEpO2M7KWIucHVzaChjKSxjPXRoaXMub2xkZXJTaGFkb3coYyk7cmV0dXJuIGJ9LHNlYXJjaFJvb3Q6ZnVuY3Rpb24oYSxiLGMpe2lmKGEpe3ZhciBkLGUsZj1hLmVsZW1lbnRGcm9tUG9pbnQoYixjKTtmb3IoZT10aGlzLnRhcmdldGluZ1NoYWRvdyhmKTtlOyl7aWYoZD1lLmVsZW1lbnRGcm9tUG9pbnQoYixjKSl7dmFyIGc9dGhpcy50YXJnZXRpbmdTaGFkb3coZCk7cmV0dXJuIHRoaXMuc2VhcmNoUm9vdChnLGIsYyl8fGR9ZT10aGlzLm9sZGVyU2hhZG93KGUpfXJldHVybiBmfX0sb3duZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWE7Yi5wYXJlbnROb2RlOyliPWIucGFyZW50Tm9kZTtyZXR1cm4gYi5ub2RlVHlwZSE9Tm9kZS5ET0NVTUVOVF9OT0RFJiZiLm5vZGVUeXBlIT1Ob2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUmJihiPWRvY3VtZW50KSxifSxmaW5kVGFyZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuY2xpZW50WCxjPWEuY2xpZW50WSxkPXRoaXMub3duZXIoYS50YXJnZXQpO3JldHVybiBkLmVsZW1lbnRGcm9tUG9pbnQoYixjKXx8KGQ9ZG9jdW1lbnQpLHRoaXMuc2VhcmNoUm9vdChkLGIsYyl9fTthLnRhcmdldEZpbmRpbmc9YixhLmZpbmRUYXJnZXQ9Yi5maW5kVGFyZ2V0LmJpbmQoYiksd2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbD1hfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuImJvZHkgXl4gIitiKGEpfWZ1bmN0aW9uIGIoYSl7cmV0dXJuJ1t0b3VjaC1hY3Rpb249IicrYSsnIl0nfWZ1bmN0aW9uIGMoYSl7cmV0dXJuInsgLW1zLXRvdWNoLWFjdGlvbjogIithKyI7IHRvdWNoLWFjdGlvbjogIithKyI7IHRvdWNoLWFjdGlvbi1kZWxheTogbm9uZTsgfSJ9dmFyIGQ9WyJub25lIiwiYXV0byIsInBhbi14IiwicGFuLXkiLHtydWxlOiJwYW4teCBwYW4teSIsc2VsZWN0b3JzOlsicGFuLXggcGFuLXkiLCJwYW4teSBwYW4teCJdfV0sZT0iIjtkLmZvckVhY2goZnVuY3Rpb24oZCl7U3RyaW5nKGQpPT09ZD8oZSs9YihkKStjKGQpKyJcbiIsZSs9YShkKStjKGQpKyJcbiIpOihlKz1kLnNlbGVjdG9ycy5tYXAoYikrYyhkLnJ1bGUpKyJcbiIsZSs9ZC5zZWxlY3RvcnMubWFwKGEpK2MoZC5ydWxlKSsiXG4iKX0pO3ZhciBmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7Zi50ZXh0Q29udGVudD1lLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZil9KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGUpe2U9ZXx8e307dmFyIGY7aWYoZS5idXR0b25zfHxkKWY9ZS5idXR0b25zO2Vsc2Ugc3dpdGNoKGUud2hpY2gpe2Nhc2UgMTpmPTE7YnJlYWs7Y2FzZSAyOmY9NDticmVhaztjYXNlIDM6Zj0yO2JyZWFrO2RlZmF1bHQ6Zj0wfXZhciBpO2lmKGMpaT1uZXcgTW91c2VFdmVudChhLGUpO2Vsc2V7aT1kb2N1bWVudC5jcmVhdGVFdmVudCgiTW91c2VFdmVudCIpO2Zvcih2YXIgaixrPXt9LGw9MDtsPGcubGVuZ3RoO2wrKylqPWdbbF0sa1tqXT1lW2pdfHxoW2xdO2kuaW5pdE1vdXNlRXZlbnQoYSxrLmJ1YmJsZXMsay5jYW5jZWxhYmxlLGsudmlldyxrLmRldGFpbCxrLnNjcmVlblgsay5zY3JlZW5ZLGsuY2xpZW50WCxrLmNsaWVudFksay5jdHJsS2V5LGsuYWx0S2V5LGsuc2hpZnRLZXksay5tZXRhS2V5LGsuYnV0dG9uLGsucmVsYXRlZFRhcmdldCl9aS5fX3Byb3RvX189Yi5wcm90b3R5cGUsZHx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGksImJ1dHRvbnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZn0sZW51bWVyYWJsZTohMH0pO3ZhciBtPTA7cmV0dXJuIG09ZS5wcmVzc3VyZT9lLnByZXNzdXJlOmY/LjU6MCxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhpLHtwb2ludGVySWQ6e3ZhbHVlOmUucG9pbnRlcklkfHwwLGVudW1lcmFibGU6ITB9LHdpZHRoOnt2YWx1ZTplLndpZHRofHwwLGVudW1lcmFibGU6ITB9LGhlaWdodDp7dmFsdWU6ZS5oZWlnaHR8fDAsZW51bWVyYWJsZTohMH0scHJlc3N1cmU6e3ZhbHVlOm0sZW51bWVyYWJsZTohMH0sdGlsdFg6e3ZhbHVlOmUudGlsdFh8fDAsZW51bWVyYWJsZTohMH0sdGlsdFk6e3ZhbHVlOmUudGlsdFl8fDAsZW51bWVyYWJsZTohMH0scG9pbnRlclR5cGU6e3ZhbHVlOmUucG9pbnRlclR5cGV8fCIiLGVudW1lcmFibGU6ITB9LGh3VGltZXN0YW1wOnt2YWx1ZTplLmh3VGltZXN0YW1wfHwwLGVudW1lcmFibGU6ITB9LGlzUHJpbWFyeTp7dmFsdWU6ZS5pc1ByaW1hcnl8fCExLGVudW1lcmFibGU6ITB9fSksaX12YXIgYz0hMSxkPSExO3RyeXt2YXIgZT1uZXcgTW91c2VFdmVudCgiY2xpY2siLHtidXR0b25zOjF9KTtjPSEwLGQ9MT09PWUuYnV0dG9uc31jYXRjaChmKXt9dmFyIGc9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiXSxoPVshMSwhMSxudWxsLG51bGwsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGxdO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTW91c2VFdmVudC5wcm90b3R5cGUpLGEuUG9pbnRlckV2ZW50fHwoYS5Qb2ludGVyRXZlbnQ9Yil9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2lmKGMpe3ZhciBhPW5ldyBNYXA7cmV0dXJuIGEucG9pbnRlcnM9ZCxhfXRoaXMua2V5cz1bXSx0aGlzLnZhbHVlcz1bXX12YXIgYz13aW5kb3cuTWFwJiZ3aW5kb3cuTWFwLnByb3RvdHlwZS5mb3JFYWNoLGQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfTtiLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5rZXlzLmluZGV4T2YoYSk7Yz4tMT90aGlzLnZhbHVlc1tjXT1iOih0aGlzLmtleXMucHVzaChhKSx0aGlzLnZhbHVlcy5wdXNoKGIpKX0saGFzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmtleXMuaW5kZXhPZihhKT4tMX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5rZXlzLmluZGV4T2YoYSk7Yj4tMSYmKHRoaXMua2V5cy5zcGxpY2UoYiwxKSx0aGlzLnZhbHVlcy5zcGxpY2UoYiwxKSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gdGhpcy52YWx1ZXNbYl19LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5rZXlzLmxlbmd0aD0wLHRoaXMudmFsdWVzLmxlbmd0aD0wfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7dGhpcy52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbihjLGQpe2EuY2FsbChiLGMsdGhpcy5rZXlzW2RdLHRoaXMpfSx0aGlzKX0scG9pbnRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5rZXlzLmxlbmd0aH19LGEuUG9pbnRlck1hcD1ifSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYj1bImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwidmlldyIsImRldGFpbCIsInNjcmVlblgiLCJzY3JlZW5ZIiwiY2xpZW50WCIsImNsaWVudFkiLCJjdHJsS2V5IiwiYWx0S2V5Iiwic2hpZnRLZXkiLCJtZXRhS2V5IiwiYnV0dG9uIiwicmVsYXRlZFRhcmdldCIsImJ1dHRvbnMiLCJwb2ludGVySWQiLCJ3aWR0aCIsImhlaWdodCIsInByZXNzdXJlIiwidGlsdFgiLCJ0aWx0WSIsInBvaW50ZXJUeXBlIiwiaHdUaW1lc3RhbXAiLCJpc1ByaW1hcnkiLCJ0eXBlIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIndoaWNoIl0sYz1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMCwwLDAsMCwwLDAsIiIsMCwhMSwiIixudWxsLG51bGwsMF0sZD17dGFyZ2V0czpuZXcgV2Vha01hcCxoYW5kbGVkRXZlbnRzOm5ldyBXZWFrTWFwLHBvaW50ZXJtYXA6bmV3IGEuUG9pbnRlck1hcCxldmVudE1hcDp7fSxldmVudFNvdXJjZXM6e30sZXZlbnRTb3VyY2VMaXN0OltdLHJlZ2lzdGVyU291cmNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YixkPWMuZXZlbnRzO2QmJihkLmZvckVhY2goZnVuY3Rpb24oYSl7Y1thXSYmKHRoaXMuZXZlbnRNYXBbYV09Y1thXS5iaW5kKGMpKX0sdGhpcyksdGhpcy5ldmVudFNvdXJjZXNbYV09Yyx0aGlzLmV2ZW50U291cmNlTGlzdC5wdXNoKGMpKX0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5ldmVudFNvdXJjZUxpc3QubGVuZ3RoLGQ9MDtjPmQmJihiPXRoaXMuZXZlbnRTb3VyY2VMaXN0W2RdKTtkKyspYi5yZWdpc3Rlci5jYWxsKGIsYSl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5ldmVudFNvdXJjZUxpc3QubGVuZ3RoLGQ9MDtjPmQmJihiPXRoaXMuZXZlbnRTb3VyY2VMaXN0W2RdKTtkKyspYi51bnJlZ2lzdGVyLmNhbGwoYixhKX0sY29udGFpbnM6YS5leHRlcm5hbC5jb250YWluc3x8ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5jb250YWlucyhiKX0sZG93bjpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcmRvd24iLGEpfSxtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJwb2ludGVybW92ZSIsYSl9LHVwOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJwb2ludGVydXAiLGEpfSxlbnRlcjpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITEsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJlbnRlciIsYSl9LGxlYXZlOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMSx0aGlzLmZpcmVFdmVudCgicG9pbnRlcmxlYXZlIixhKX0sb3ZlcjpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITAsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJvdmVyIixhKX0sb3V0OmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcm91dCIsYSl9LGNhbmNlbDpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcmNhbmNlbCIsYSl9LGxlYXZlT3V0OmZ1bmN0aW9uKGEpe3RoaXMuY29udGFpbnMoYS50YXJnZXQsYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5sZWF2ZShhKSx0aGlzLm91dChhKX0sZW50ZXJPdmVyOmZ1bmN0aW9uKGEpe3RoaXMuY29udGFpbnMoYS50YXJnZXQsYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5lbnRlcihhKSx0aGlzLm92ZXIoYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGI9YS50eXBlLGM9dGhpcy5ldmVudE1hcCYmdGhpcy5ldmVudE1hcFtiXTtjJiZjKGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxsaXN0ZW46ZnVuY3Rpb24oYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5hZGRFdmVudChhLGIpfSx0aGlzKX0sdW5saXN0ZW46ZnVuY3Rpb24oYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5yZW1vdmVFdmVudChhLGIpfSx0aGlzKX0sYWRkRXZlbnQ6YS5leHRlcm5hbC5hZGRFdmVudHx8ZnVuY3Rpb24oYSxiKXthLmFkZEV2ZW50TGlzdGVuZXIoYix0aGlzLmJvdW5kSGFuZGxlcil9LHJlbW92ZUV2ZW50OmEuZXh0ZXJuYWwucmVtb3ZlRXZlbnR8fGZ1bmN0aW9uKGEsYil7YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxtYWtlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhcHR1cmVJbmZvJiYoYi5yZWxhdGVkVGFyZ2V0PW51bGwpO3ZhciBjPW5ldyBQb2ludGVyRXZlbnQoYSxiKTtyZXR1cm4gYi5wcmV2ZW50RGVmYXVsdCYmKGMucHJldmVudERlZmF1bHQ9Yi5wcmV2ZW50RGVmYXVsdCksdGhpcy50YXJnZXRzLnNldChjLHRoaXMudGFyZ2V0cy5nZXQoYil8fGIudGFyZ2V0KSxjfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1ha2VFdmVudChhLGIpO3JldHVybiB0aGlzLmRpc3BhdGNoRXZlbnQoYyl9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBkLGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKWQ9YltmXSxlW2RdPWFbZF18fGNbZl07cmV0dXJuIGEucHJldmVudERlZmF1bHQmJihlLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7YS5wcmV2ZW50RGVmYXVsdCgpfSksZX0sZ2V0VGFyZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNhcHR1cmVJbmZvJiZ0aGlzLmNhcHR1cmVJbmZvLmlkPT09YS5wb2ludGVySWQ/dGhpcy5jYXB0dXJlSW5mby50YXJnZXQ6dGhpcy50YXJnZXRzLmdldChhKX0sc2V0Q2FwdHVyZTpmdW5jdGlvbihhLGIpe3RoaXMuY2FwdHVyZUluZm8mJnRoaXMucmVsZWFzZUNhcHR1cmUodGhpcy5jYXB0dXJlSW5mby5pZCksdGhpcy5jYXB0dXJlSW5mbz17aWQ6YSx0YXJnZXQ6Yn07dmFyIGM9bmV3IFBvaW50ZXJFdmVudCgiZ290cG9pbnRlcmNhcHR1cmUiLHtidWJibGVzOiEwfSk7dGhpcy5pbXBsaWNpdFJlbGVhc2U9dGhpcy5yZWxlYXNlQ2FwdHVyZS5iaW5kKHRoaXMsYSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIix0aGlzLmltcGxpY2l0UmVsZWFzZSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmNhbmNlbCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLHRoaXMudGFyZ2V0cy5zZXQoYyxiKSx0aGlzLmFzeW5jRGlzcGF0Y2hFdmVudChjKX0scmVsZWFzZUNhcHR1cmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5jYXB0dXJlSW5mbyYmdGhpcy5jYXB0dXJlSW5mby5pZD09PWEpe3ZhciBiPW5ldyBQb2ludGVyRXZlbnQoImxvc3Rwb2ludGVyY2FwdHVyZSIse2J1YmJsZXM6ITB9KSxjPXRoaXMuY2FwdHVyZUluZm8udGFyZ2V0O3RoaXMuY2FwdHVyZUluZm89bnVsbCxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyY2FuY2VsIix0aGlzLmltcGxpY2l0UmVsZWFzZSksdGhpcy50YXJnZXRzLnNldChiLGMpLHRoaXMuYXN5bmNEaXNwYXRjaEV2ZW50KGIpfX0sZGlzcGF0Y2hFdmVudDphLmV4dGVybmFsLmRpc3BhdGNoRXZlbnR8fGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0VGFyZ2V0KGEpO3JldHVybiBiP2IuZGlzcGF0Y2hFdmVudChhKTp2b2lkIDB9LGFzeW5jRGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXtzZXRUaW1lb3V0KHRoaXMuZGlzcGF0Y2hFdmVudC5iaW5kKHRoaXMsYSksMCl9fTtkLmJvdW5kSGFuZGxlcj1kLmV2ZW50SGFuZGxlci5iaW5kKGQpLGEuZGlzcGF0Y2hlcj1kLGEucmVnaXN0ZXI9ZC5yZWdpc3Rlci5iaW5kKGQpLGEudW5yZWdpc3Rlcj1kLnVucmVnaXN0ZXIuYmluZChkKX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyxkKXt0aGlzLmFkZENhbGxiYWNrPWEuYmluZChkKSx0aGlzLnJlbW92ZUNhbGxiYWNrPWIuYmluZChkKSx0aGlzLmNoYW5nZWRDYWxsYmFjaz1jLmJpbmQoZCksZyYmKHRoaXMub2JzZXJ2ZXI9bmV3IGcodGhpcy5tdXRhdGlvbldhdGNoZXIuYmluZCh0aGlzKSkpfXZhciBjPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCksZD1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUubWFwKSxlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLnNsaWNlKSxmPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5maWx0ZXIpLGc9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGg9Ilt0b3VjaC1hY3Rpb25dIixpPXtzdWJ0cmVlOiEwLGNoaWxkTGlzdDohMCxhdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZU9sZFZhbHVlOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInRvdWNoLWFjdGlvbiJdfTtiLnByb3RvdHlwZT17d2F0Y2hTdWJ0cmVlOmZ1bmN0aW9uKGIpe2EudGFyZ2V0RmluZGluZy5jYW5UYXJnZXQoYikmJnRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShiLGkpfSxlbmFibGVPblN1YnRyZWU6ZnVuY3Rpb24oYSl7dGhpcy53YXRjaFN1YnRyZWUoYSksYT09PWRvY3VtZW50JiYiY29tcGxldGUiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZT90aGlzLmluc3RhbGxPbkxvYWQoKTp0aGlzLmluc3RhbGxOZXdTdWJ0cmVlKGEpfSxpbnN0YWxsTmV3U3VidHJlZTpmdW5jdGlvbihhKXtjKHRoaXMuZmluZEVsZW1lbnRzKGEpLHRoaXMuYWRkRWxlbWVudCx0aGlzKX0sZmluZEVsZW1lbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnF1ZXJ5U2VsZWN0b3JBbGw/YS5xdWVyeVNlbGVjdG9yQWxsKGgpOltdfSxyZW1vdmVFbGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQ2FsbGJhY2soYSl9LGFkZEVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5hZGRDYWxsYmFjayhhKX0sZWxlbWVudENoYW5nZWQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmNoYW5nZWRDYWxsYmFjayhhLGIpfSxjb25jYXRMaXN0czpmdW5jdGlvbihhLGIpe3JldHVybiBhLmNvbmNhdChlKGIpKX0saW5zdGFsbE9uTG9hZDpmdW5jdGlvbigpe2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLHRoaXMuaW5zdGFsbE5ld1N1YnRyZWUuYmluZCh0aGlzLGRvY3VtZW50KSl9LGlzRWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFfSxmbGF0dGVuTXV0YXRpb25UcmVlOmZ1bmN0aW9uKGEpe3ZhciBiPWQoYSx0aGlzLmZpbmRFbGVtZW50cyx0aGlzKTtyZXR1cm4gYi5wdXNoKGYoYSx0aGlzLmlzRWxlbWVudCkpLGIucmVkdWNlKHRoaXMuY29uY2F0TGlzdHMsW10pfSxtdXRhdGlvbldhdGNoZXI6ZnVuY3Rpb24oYSl7YS5mb3JFYWNoKHRoaXMubXV0YXRpb25IYW5kbGVyLHRoaXMpfSxtdXRhdGlvbkhhbmRsZXI6ZnVuY3Rpb24oYSl7aWYoImNoaWxkTGlzdCI9PT1hLnR5cGUpe3ZhciBiPXRoaXMuZmxhdHRlbk11dGF0aW9uVHJlZShhLmFkZGVkTm9kZXMpO2IuZm9yRWFjaCh0aGlzLmFkZEVsZW1lbnQsdGhpcyk7dmFyIGM9dGhpcy5mbGF0dGVuTXV0YXRpb25UcmVlKGEucmVtb3ZlZE5vZGVzKTtjLmZvckVhY2godGhpcy5yZW1vdmVFbGVtZW50LHRoaXMpfWVsc2UiYXR0cmlidXRlcyI9PT1hLnR5cGUmJnRoaXMuZWxlbWVudENoYW5nZWQoYS50YXJnZXQsYS5vbGRWYWx1ZSl9fSxnfHwoYi5wcm90b3R5cGUud2F0Y2hTdWJ0cmVlPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCJQb2ludGVyRXZlbnRzUG9seWZpbGw6IE11dGF0aW9uT2JzZXJ2ZXJzIG5vdCBmb3VuZCwgdG91Y2gtYWN0aW9uIHdpbGwgbm90IGJlIGR5bmFtaWNhbGx5IGRldGVjdGVkIil9KSxhLkluc3RhbGxlcj1ifSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1iLnBvaW50ZXJtYXAsZD0yNSxlPXtQT0lOVEVSX0lEOjEsUE9JTlRFUl9UWVBFOiJtb3VzZSIsZXZlbnRzOlsibW91c2Vkb3duIiwibW91c2Vtb3ZlIiwibW91c2V1cCIsIm1vdXNlb3ZlciIsIm1vdXNlb3V0Il0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sbGFzdFRvdWNoZXM6W10saXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmxhc3RUb3VjaGVzLGU9YS5jbGllbnRYLGY9YS5jbGllbnRZLGc9MCxoPWMubGVuZ3RoO2g+ZyYmKGI9Y1tnXSk7ZysrKXt2YXIgaT1NYXRoLmFicyhlLWIueCksaj1NYXRoLmFicyhmLWIueSk7aWYoZD49aSYmZD49ailyZXR1cm4hMH19LHByZXBhcmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYz1iLmNsb25lRXZlbnQoYSksZD1jLnByZXZlbnREZWZhdWx0O3JldHVybiBjLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7YS5wcmV2ZW50RGVmYXVsdCgpLGQoKX0sYy5wb2ludGVySWQ9dGhpcy5QT0lOVEVSX0lELGMuaXNQcmltYXJ5PSEwLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEUsY30sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuaGFzKHRoaXMuUE9JTlRFUl9JRCk7ZCYmdGhpcy5jYW5jZWwoYSk7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yy5zZXQodGhpcy5QT0lOVEVSX0lELGEpLGIuZG93bihlKX19LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9fSxtb3VzZXVwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuZ2V0KHRoaXMuUE9JTlRFUl9JRCk7aWYoZCYmZC5idXR0b249PT1hLmJ1dHRvbil7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi51cChlKSx0aGlzLmNsZWFudXBNb3VzZSgpfX19LG1vdXNlb3ZlcjpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmVudGVyT3ZlcihjKX19LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9fSxjYW5jZWw6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5jYW5jZWwoYyksdGhpcy5jbGVhbnVwTW91c2UoKX0sY2xlYW51cE1vdXNlOmZ1bmN0aW9uKCl7Y1siZGVsZXRlIl0odGhpcy5QT0lOVEVSX0lEKX19O2EubW91c2VFdmVudHM9ZX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGIsYz1hLmRpc3BhdGNoZXIsZD1hLmZpbmRUYXJnZXQsZT1hLnRhcmdldEZpbmRpbmcuYWxsU2hhZG93cy5iaW5kKGEudGFyZ2V0RmluZGluZyksZj1jLnBvaW50ZXJtYXAsZz1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUubWFwKSxoPTI1MDAsaT0yMDAsaj0idG91Y2gtYWN0aW9uIixrPSExLGw9e3Njcm9sbFR5cGU6bmV3IFdlYWtNYXAsZXZlbnRzOlsidG91Y2hzdGFydCIsInRvdWNobW92ZSIsInRvdWNoZW5kIiwidG91Y2hjYW5jZWwiXSxyZWdpc3RlcjpmdW5jdGlvbihhKXtrP2MubGlzdGVuKGEsdGhpcy5ldmVudHMpOmIuZW5hYmxlT25TdWJ0cmVlKGEpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2smJmMudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LGVsZW1lbnRBZGRlZDpmdW5jdGlvbihhKXt2YXIgYj1hLmdldEF0dHJpYnV0ZShqKSxkPXRoaXMudG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGUoYik7ZCYmKHRoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKSxjLmxpc3RlbihhLHRoaXMuZXZlbnRzKSxlKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxUeXBlLnNldChhLGQpLGMubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx0aGlzKSl9LGVsZW1lbnRSZW1vdmVkOmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZVsiZGVsZXRlIl0oYSksYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKSxlKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxUeXBlWyJkZWxldGUiXShhKSxjLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx0aGlzKX0sZWxlbWVudENoYW5nZWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZShqKSxkPXRoaXMudG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGUoYyksZj10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGIpO2QmJmY/KHRoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKSxlKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxUeXBlLnNldChhLGQpfSx0aGlzKSk6Zj90aGlzLmVsZW1lbnRSZW1vdmVkKGEpOmQmJnRoaXMuZWxlbWVudEFkZGVkKGEpfSxzY3JvbGxUeXBlczp7RU1JVFRFUjoibm9uZSIsWFNDUk9MTEVSOiJwYW4teCIsWVNDUk9MTEVSOiJwYW4teSIsU0NST0xMRVI6L14oPzpwYW4teCBwYW4teSl8KD86cGFuLXkgcGFuLXgpfGF1dG8kL30sdG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9YSxjPXRoaXMuc2Nyb2xsVHlwZXM7cmV0dXJuIm5vbmUiPT09Yj8ibm9uZSI6Yj09PWMuWFNDUk9MTEVSPyJYIjpiPT09Yy5ZU0NST0xMRVI/IlkiOmMuU0NST0xMRVIuZXhlYyhiKT8iWFkiOnZvaWQgMH0sUE9JTlRFUl9UWVBFOiJ0b3VjaCIsZmlyc3RUb3VjaDpudWxsLGlzUHJpbWFyeVRvdWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZpcnN0VG91Y2g9PT1hLmlkZW50aWZpZXJ9LHNldFByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXsoMD09PWYucG9pbnRlcnMoKXx8MT09PWYucG9pbnRlcnMoKSYmZi5oYXMoMSkpJiYodGhpcy5maXJzdFRvdWNoPWEuaWRlbnRpZmllcix0aGlzLmZpcnN0WFk9e1g6YS5jbGllbnRYLFk6YS5jbGllbnRZfSx0aGlzLnNjcm9sbGluZz0hMSx0aGlzLmNhbmNlbFJlc2V0Q2xpY2tDb3VudCgpKX0scmVtb3ZlUHJpbWFyeVBvaW50ZXI6ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJih0aGlzLmZpcnN0VG91Y2g9bnVsbCx0aGlzLmZpcnN0WFk9bnVsbCx0aGlzLnJlc2V0Q2xpY2tDb3VudCgpKX0sY2xpY2tDb3VudDowLHJlc2V0SWQ6bnVsbCxyZXNldENsaWNrQ291bnQ6ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbigpe3RoaXMuY2xpY2tDb3VudD0wLHRoaXMucmVzZXRJZD1udWxsfS5iaW5kKHRoaXMpO3RoaXMucmVzZXRJZD1zZXRUaW1lb3V0KGEsaSl9LGNhbmNlbFJlc2V0Q2xpY2tDb3VudDpmdW5jdGlvbigpe3RoaXMucmVzZXRJZCYmY2xlYXJUaW1lb3V0KHRoaXMucmVzZXRJZCl9LHRvdWNoVG9Qb2ludGVyOmZ1bmN0aW9uKGEpe3ZhciBiPWMuY2xvbmVFdmVudChhKTtyZXR1cm4gYi5wb2ludGVySWQ9YS5pZGVudGlmaWVyKzIsYi50YXJnZXQ9ZChiKSxiLmJ1YmJsZXM9ITAsYi5jYW5jZWxhYmxlPSEwLGIuZGV0YWlsPXRoaXMuY2xpY2tDb3VudCxiLmJ1dHRvbj0wLGIuYnV0dG9ucz0xLGIud2lkdGg9YS53ZWJraXRSYWRpdXNYfHxhLnJhZGl1c1h8fDAsYi5oZWlnaHQ9YS53ZWJraXRSYWRpdXNZfHxhLnJhZGl1c1l8fDAsYi5wcmVzc3VyZT1hLndlYmtpdEZvcmNlfHxhLmZvcmNlfHwuNSxiLmlzUHJpbWFyeT10aGlzLmlzUHJpbWFyeVRvdWNoKGEpLGIucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEUsYn0scHJvY2Vzc1RvdWNoZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNoYW5nZWRUb3VjaGVzLGQ9ZyhjLHRoaXMudG91Y2hUb1BvaW50ZXIsdGhpcyk7ZC5mb3JFYWNoKGZ1bmN0aW9uKGIpe2IucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbGluZz0hMSx0aGlzLmZpcnN0WFk9bnVsbCxhLnByZXZlbnREZWZhdWx0KCl9fSx0aGlzKSxkLmZvckVhY2goYix0aGlzKX0sc2hvdWxkU2Nyb2xsOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZmlyc3RYWSl7dmFyIGIsYz10aGlzLnNjcm9sbFR5cGUuZ2V0KGEuY3VycmVudFRhcmdldCk7aWYoIm5vbmUiPT09YyliPSExO2Vsc2UgaWYoIlhZIj09PWMpYj0hMDtlbHNle3ZhciBkPWEuY2hhbmdlZFRvdWNoZXNbMF0sZT1jLGY9IlkiPT09Yz8iWCI6IlkiLGc9TWF0aC5hYnMoZFsiY2xpZW50IitlXS10aGlzLmZpcnN0WFlbZV0pLGg9TWF0aC5hYnMoZFsiY2xpZW50IitmXS10aGlzLmZpcnN0WFlbZl0pO2I9Zz49aH1yZXR1cm4gdGhpcy5maXJzdFhZPW51bGwsYn19LGZpbmRUb3VjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKylpZihjLmlkZW50aWZpZXI9PT1iKXJldHVybiEwfSx2YWN1dW1Ub3VjaGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcztpZihmLnBvaW50ZXJzKCk+PWIubGVuZ3RoKXt2YXIgYz1bXTtmLmZvckVhY2goZnVuY3Rpb24oYSxkKXtpZigxIT09ZCYmIXRoaXMuZmluZFRvdWNoKGIsZC0yKSl7dmFyIGU9YS5vdXQ7Yy5wdXNoKHRoaXMudG91Y2hUb1BvaW50ZXIoZSkpfX0sdGhpcyksYy5mb3JFYWNoKHRoaXMuY2FuY2VsT3V0LHRoaXMpfX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnZhY3V1bVRvdWNoZXMoYSksdGhpcy5zZXRQcmltYXJ5VG91Y2goYS5jaGFuZ2VkVG91Y2hlc1swXSksdGhpcy5kZWR1cFN5bnRoTW91c2UoYSksdGhpcy5zY3JvbGxpbmd8fCh0aGlzLmNsaWNrQ291bnQrKyx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy5vdmVyRG93bikpfSxvdmVyRG93bjpmdW5jdGlvbihhKXtmLnNldChhLnBvaW50ZXJJZCx7dGFyZ2V0OmEudGFyZ2V0LG91dDphLG91dFRhcmdldDphLnRhcmdldH0pLGMub3ZlcihhKSxjLmRvd24oYSl9LHRvdWNobW92ZTpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbGluZ3x8KHRoaXMuc2hvdWxkU2Nyb2xsKGEpPyh0aGlzLnNjcm9sbGluZz0hMCx0aGlzLnRvdWNoY2FuY2VsKGEpKTooYS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLm1vdmVPdmVyT3V0KSkpfSxtb3ZlT3Zlck91dDpmdW5jdGlvbihhKXt2YXIgYj1hLGQ9Zi5nZXQoYi5wb2ludGVySWQpO2lmKGQpe3ZhciBlPWQub3V0LGc9ZC5vdXRUYXJnZXQ7Yy5tb3ZlKGIpLGUmJmchPT1iLnRhcmdldCYmKGUucmVsYXRlZFRhcmdldD1iLnRhcmdldCxiLnJlbGF0ZWRUYXJnZXQ9ZyxlLnRhcmdldD1nLGIudGFyZ2V0PyhjLmxlYXZlT3V0KGUpLGMuZW50ZXJPdmVyKGIpKTooYi50YXJnZXQ9ZyxiLnJlbGF0ZWRUYXJnZXQ9bnVsbCx0aGlzLmNhbmNlbE91dChiKSkpLGQub3V0PWIsZC5vdXRUYXJnZXQ9Yi50YXJnZXR9fSx0b3VjaGVuZDpmdW5jdGlvbihhKXt0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy51cE91dCl9LHVwT3V0OmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsaW5nfHwoYy51cChhKSxjLm91dChhKSksdGhpcy5jbGVhblVwUG9pbnRlcihhKX0sdG91Y2hjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMuY2FuY2VsT3V0KX0sY2FuY2VsT3V0OmZ1bmN0aW9uKGEpe2MuY2FuY2VsKGEpLGMub3V0KGEpLHRoaXMuY2xlYW5VcFBvaW50ZXIoYSl9LGNsZWFuVXBQb2ludGVyOmZ1bmN0aW9uKGEpe2ZbImRlbGV0ZSJdKGEucG9pbnRlcklkKSx0aGlzLnJlbW92ZVByaW1hcnlQb2ludGVyKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxkPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChkKSl7dmFyIGU9e3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZfTtjLnB1c2goZSk7dmFyIGY9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZSk7c2V0VGltZW91dChmLGgpfX19O2t8fChiPW5ldyBhLkluc3RhbGxlcihsLmVsZW1lbnRBZGRlZCxsLmVsZW1lbnRSZW1vdmVkLGwuZWxlbWVudENoYW5nZWQsbCkpLGEudG91Y2hFdmVudHM9bH0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyT3V0IiwiTVNQb2ludGVyT3ZlciIsIk1TUG9pbnRlckNhbmNlbCIsIk1TR290UG9pbnRlckNhcHR1cmUiLCJNU0xvc3RQb2ludGVyQ2FwdHVyZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LFBPSU5URVJfVFlQRVM6WyIiLCJ1bmF2YWlsYWJsZSIsInRvdWNoIiwicGVuIiwibW91c2UiXSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9YTtyZXR1cm4gZCYmKGM9Yi5jbG9uZUV2ZW50KGEpLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEVTW2EucG9pbnRlclR5cGVdKSxjfSxjbGVhbnVwOmZ1bmN0aW9uKGEpe2NbImRlbGV0ZSJdKGEpfSxNU1BvaW50ZXJEb3duOmZ1bmN0aW9uKGEpe2Muc2V0KGEucG9pbnRlcklkLGEpO3ZhciBkPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZG93bihkKX0sTVNQb2ludGVyTW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9LE1TUG9pbnRlclVwOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IudXAoYyksdGhpcy5jbGVhbnVwKGEucG9pbnRlcklkKX0sTVNQb2ludGVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9LE1TUG9pbnRlck92ZXI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5lbnRlck92ZXIoYyl9LE1TUG9pbnRlckNhbmNlbDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmNhbmNlbChjKSx0aGlzLmNsZWFudXAoYS5wb2ludGVySWQpfSxNU0xvc3RQb2ludGVyQ2FwdHVyZTpmdW5jdGlvbihhKXt2YXIgYz1iLm1ha2VFdmVudCgibG9zdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9LE1TR290UG9pbnRlckNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5tYWtlRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9fTthLm1zRXZlbnRzPWV9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcjtpZih2b2lkIDA9PT13aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKXtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93Lm5hdmlnYXRvciwicG9pbnRlckVuYWJsZWQiLHt2YWx1ZTohMCxlbnVtZXJhYmxlOiEwfSksd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKXt2YXIgYz13aW5kb3cubmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHM7T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5uYXZpZ2F0b3IsIm1heFRvdWNoUG9pbnRzIix7dmFsdWU6YyxlbnVtZXJhYmxlOiEwfSksYi5yZWdpc3RlclNvdXJjZSgibXMiLGEubXNFdmVudHMpfWVsc2UgYi5yZWdpc3RlclNvdXJjZSgibW91c2UiLGEubW91c2VFdmVudHMpLHZvaWQgMCE9PXdpbmRvdy5vbnRvdWNoc3RhcnQmJmIucmVnaXN0ZXJTb3VyY2UoInRvdWNoIixhLnRvdWNoRXZlbnRzKTtiLnJlZ2lzdGVyKGRvY3VtZW50KX19KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7aWYoIWUucG9pbnRlcm1hcC5oYXMoYSkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkUG9pbnRlcklkIil9dmFyIGMsZCxlPWEuZGlzcGF0Y2hlcixmPXdpbmRvdy5uYXZpZ2F0b3I7Zi5tc1BvaW50ZXJFbmFibGVkPyhjPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1NldFBvaW50ZXJDYXB0dXJlKGEpfSxkPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1JlbGVhc2VQb2ludGVyQ2FwdHVyZShhKX0pOihjPWZ1bmN0aW9uKGEpe2IoYSksZS5zZXRDYXB0dXJlKGEsdGhpcyl9LGQ9ZnVuY3Rpb24oYSl7YihhKSxlLnJlbGVhc2VDYXB0dXJlKGEsdGhpcyl9KSx3aW5kb3cuRWxlbWVudCYmIUVsZW1lbnQucHJvdG90eXBlLnNldFBvaW50ZXJDYXB0dXJlJiZPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFbGVtZW50LnByb3RvdHlwZSx7c2V0UG9pbnRlckNhcHR1cmU6e3ZhbHVlOmN9LHJlbGVhc2VQb2ludGVyQ2FwdHVyZTp7dmFsdWU6ZH19KX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksUG9pbnRlckdlc3R1cmVFdmVudC5wcm90b3R5cGUucHJldmVudFRhcD1mdW5jdGlvbigpe3RoaXMudGFwUHJldmVudGVkPSEwfSxmdW5jdGlvbihhKXthPWF8fHt9LGEudXRpbHM9e0xDQTp7ZmluZDpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBhO2lmKGEuY29udGFpbnMpe2lmKGEuY29udGFpbnMoYikpcmV0dXJuIGE7aWYoYi5jb250YWlucyhhKSlyZXR1cm4gYn12YXIgYz10aGlzLmRlcHRoKGEpLGQ9dGhpcy5kZXB0aChiKSxlPWMtZDtmb3IoZT4wP2E9dGhpcy53YWxrKGEsZSk6Yj10aGlzLndhbGsoYiwtZSk7YSYmYiYmYSE9PWI7KWE9dGhpcy53YWxrKGEsMSksYj10aGlzLndhbGsoYiwxKTtyZXR1cm4gYX0sd2FsazpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2I+YztjKyspYT1hLnBhcmVudE5vZGU7cmV0dXJuIGF9LGRlcHRoOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2E7KWIrKyxhPWEucGFyZW50Tm9kZTtyZXR1cm4gYn19fSxhLmZpbmRMQ0E9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS51dGlscy5MQ0EuZmluZChiLGMpCn0sd2luZG93LlBvaW50ZXJHZXN0dXJlcz1hfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoYyl7dmFyIGE9bmV3IE1hcDtyZXR1cm4gYS5wb2ludGVycz1kLGF9dGhpcy5rZXlzPVtdLHRoaXMudmFsdWVzPVtdfXZhciBjPXdpbmRvdy5NYXAmJndpbmRvdy5NYXAucHJvdG90eXBlLmZvckVhY2gsZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9O2IucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTtjPi0xP3RoaXMudmFsdWVzW2NdPWI6KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMua2V5cy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnZhbHVlc1tiXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmtleXMubGVuZ3RoPTAsdGhpcy52YWx1ZXMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLmtleXNbZF0sdGhpcyl9LHRoaXMpfSxwb2ludGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleXMubGVuZ3RofX0sYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPVsiYnViYmxlcyIsImNhbmNlbGFibGUiLCJ2aWV3IiwiZGV0YWlsIiwic2NyZWVuWCIsInNjcmVlblkiLCJjbGllbnRYIiwiY2xpZW50WSIsImN0cmxLZXkiLCJhbHRLZXkiLCJzaGlmdEtleSIsIm1ldGFLZXkiLCJidXR0b24iLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9ucyIsInBvaW50ZXJJZCIsIndpZHRoIiwiaGVpZ2h0IiwicHJlc3N1cmUiLCJ0aWx0WCIsInRpbHRZIiwicG9pbnRlclR5cGUiLCJod1RpbWVzdGFtcCIsImlzUHJpbWFyeSIsInR5cGUiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0Iiwic2NyZWVuWCIsInNjcmVlblkiLCJwYWdlWCIsInBhZ2VZIiwidGFwUHJldmVudGVkIl0sYz1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMCwwLDAsMCwwLDAsIiIsMCwhMSwiIixudWxsLG51bGwsMCwwLDAsMF0sZD17aGFuZGxlZEV2ZW50czpuZXcgV2Vha01hcCx0YXJnZXRzOm5ldyBXZWFrTWFwLGhhbmRsZXJzOnt9LHJlY29nbml6ZXJzOnt9LGV2ZW50czp7fSxyZWdpc3RlclJlY29nbml6ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iO3RoaXMucmVjb2duaXplcnNbYV09YyxjLmV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKGNbYV0pe3RoaXMuZXZlbnRzW2FdPSEwO3ZhciBiPWNbYV0uYmluZChjKTt0aGlzLmFkZEhhbmRsZXIoYSxiKX19LHRoaXMpfSxhZGRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTt0aGlzLmhhbmRsZXJzW2NdfHwodGhpcy5oYW5kbGVyc1tjXT1bXSksdGhpcy5oYW5kbGVyc1tjXS5wdXNoKGIpfSxyZWdpc3RlclRhcmdldDpmdW5jdGlvbihhKXt0aGlzLmxpc3RlbihPYmplY3Qua2V5cyh0aGlzLmV2ZW50cyksYSl9LHVucmVnaXN0ZXJUYXJnZXQ6ZnVuY3Rpb24oYSl7dGhpcy51bmxpc3RlbihPYmplY3Qua2V5cyh0aGlzLmV2ZW50cyksYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGI9YS50eXBlLGM9dGhpcy5oYW5kbGVyc1tiXTtjJiZ0aGlzLm1ha2VRdWV1ZShjLGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxtYWtlUXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNsb25lRXZlbnQoYik7c2V0VGltZW91dCh0aGlzLnJ1blF1ZXVlLmJpbmQodGhpcyxhLGMpLDApfSxydW5RdWV1ZTpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBvaW50ZXJJZD1iLnBvaW50ZXJJZDtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspYyhiKTt0aGlzLmN1cnJlbnRQb2ludGVySWQ9MH0sbGlzdGVuOmZ1bmN0aW9uKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuYWRkRXZlbnQoYSx0aGlzLmJvdW5kSGFuZGxlciwhMSxiKX0sdGhpcyl9LHVubGlzdGVuOmZ1bmN0aW9uKGEpe2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUV2ZW50KGEsdGhpcy5ib3VuZEhhbmRsZXIsITEsaW5UYXJnZXQpfSx0aGlzKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRFdmVudExpc3RlbmVyKGEsYixjKX0scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYixjKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBQb2ludGVyR2VzdHVyZUV2ZW50KGEsYil9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBkLGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKWQ9YltmXSxlW2RdPWFbZF18fGNbZl07cmV0dXJuIGV9LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHx0aGlzLnRhcmdldHMuZ2V0KGEpO2MmJihjLmRpc3BhdGNoRXZlbnQoYSksYS50YXBQcmV2ZW50ZWQmJnRoaXMucHJldmVudFRhcCh0aGlzLmN1cnJlbnRQb2ludGVySWQpKX0sYXN5bmNEaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoYSxiKX0uYmluZCh0aGlzKTtzZXRUaW1lb3V0KGMsMCl9LHByZXZlbnRUYXA6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yZWNvZ25pemVycy50YXA7YiYmYi5wcmV2ZW50VGFwKGEpfX07ZC5ib3VuZEhhbmRsZXI9ZC5ldmVudEhhbmRsZXIuYmluZChkKSxhLmRpc3BhdGNoZXI9ZDt2YXIgZT1bXSxmPSExO2EucmVnaXN0ZXI9ZnVuY3Rpb24oYil7aWYoZil7dmFyIGM9d2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbDtjJiZjLnJlZ2lzdGVyKGIpLGEuZGlzcGF0Y2hlci5yZWdpc3RlclRhcmdldChiKX1lbHNlIGUucHVzaChiKX0sZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtmPSEwLGUucHVzaChkb2N1bWVudCksZS5mb3JFYWNoKGEucmVnaXN0ZXIpfSl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPXtIT0xEX0RFTEFZOjIwMCxXSUdHTEVfVEhSRVNIT0xEOjE2LGV2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0saGVsZFBvaW50ZXI6bnVsbCxob2xkSm9iOm51bGwscHVsc2U6ZnVuY3Rpb24oKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMuaGVsZFBvaW50ZXIudGltZVN0YW1wLGI9dGhpcy5oZWxkPyJob2xkcHVsc2UiOiJob2xkIjt0aGlzLmZpcmVIb2xkKGIsYSksdGhpcy5oZWxkPSEwfSxjYW5jZWw6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuaG9sZEpvYiksdGhpcy5oZWxkJiZ0aGlzLmZpcmVIb2xkKCJyZWxlYXNlIiksdGhpcy5oZWxkPSExLHRoaXMuaGVsZFBvaW50ZXI9bnVsbCx0aGlzLnRhcmdldD1udWxsLHRoaXMuaG9sZEpvYj1udWxsfSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIXRoaXMuaGVsZFBvaW50ZXImJih0aGlzLmhlbGRQb2ludGVyPWEsdGhpcy50YXJnZXQ9YS50YXJnZXQsdGhpcy5ob2xkSm9iPXNldEludGVydmFsKHRoaXMucHVsc2UuYmluZCh0aGlzKSx0aGlzLkhPTERfREVMQVkpKX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe3RoaXMuaGVsZFBvaW50ZXImJnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkPT09YS5wb2ludGVySWQmJnRoaXMuY2FuY2VsKCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbCgpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkKXt2YXIgYj1hLmNsaWVudFgtdGhpcy5oZWxkUG9pbnRlci5jbGllbnRYLGM9YS5jbGllbnRZLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WTtiKmIrYypjPnRoaXMuV0lHR0xFX1RIUkVTSE9MRCYmdGhpcy5jYW5jZWwoKX19LGZpcmVIb2xkOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9e3BvaW50ZXJUeXBlOnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlclR5cGV9O2MmJihkLmhvbGRUaW1lPWMpO3ZhciBlPWIubWFrZUV2ZW50KGEsZCk7Yi5kaXNwYXRjaEV2ZW50KGUsdGhpcy50YXJnZXQpLGUudGFwUHJldmVudGVkJiZiLnByZXZlbnRUYXAodGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoImhvbGQiLGMpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1uZXcgYS5Qb2ludGVyTWFwLGQ9e2V2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0sV0lHR0xFX1RIUkVTSE9MRDo0LGNsYW1wRGlyOmZ1bmN0aW9uKGEpe3JldHVybiBhPjA/MTotMX0sY2FsY1Bvc2l0aW9uRGVsdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYz0wLGQ9MDtyZXR1cm4gYSYmYiYmKGM9Yi5wYWdlWC1hLnBhZ2VYLGQ9Yi5wYWdlWS1hLnBhZ2VZKSx7eDpjLHk6ZH19LGZpcmVUcmFjazpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCxmPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoZS5kb3duRXZlbnQsYyksZz10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUubGFzdE1vdmVFdmVudCxjKTtnLngmJihlLnhEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLngpKSxnLnkmJihlLnlEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLnkpKTt2YXIgaD17ZHg6Zi54LGR5OmYueSxkZHg6Zy54LGRkeTpnLnksY2xpZW50WDpjLmNsaWVudFgsY2xpZW50WTpjLmNsaWVudFkscGFnZVg6Yy5wYWdlWCxwYWdlWTpjLnBhZ2VZLHNjcmVlblg6Yy5zY3JlZW5YLHNjcmVlblk6Yy5zY3JlZW5ZLHhEaXJlY3Rpb246ZS54RGlyZWN0aW9uLHlEaXJlY3Rpb246ZS55RGlyZWN0aW9uLHRyYWNrSW5mbzplLnRyYWNrSW5mbyxyZWxhdGVkVGFyZ2V0OmMudGFyZ2V0LHBvaW50ZXJUeXBlOmMucG9pbnRlclR5cGV9LGk9Yi5tYWtlRXZlbnQoYSxoKTtlLmxhc3RNb3ZlRXZlbnQ9YyxiLmRpc3BhdGNoRXZlbnQoaSxlLmRvd25UYXJnZXQpfSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSYmKCJtb3VzZSI9PT1hLnBvaW50ZXJUeXBlPzE9PT1hLmJ1dHRvbnM6ITApKXt2YXIgYj17ZG93bkV2ZW50OmEsZG93blRhcmdldDphLnRhcmdldCx0cmFja0luZm86e30sbGFzdE1vdmVFdmVudDpudWxsLHhEaXJlY3Rpb246MCx5RGlyZWN0aW9uOjAsdHJhY2tpbmc6ITF9O2Muc2V0KGEucG9pbnRlcklkLGIpfX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2lmKGIpaWYoYi50cmFja2luZyl0aGlzLmZpcmVUcmFjaygidHJhY2siLGEsYik7ZWxzZXt2YXIgZD10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGIuZG93bkV2ZW50LGEpLGU9ZC54KmQueCtkLnkqZC55O2U+dGhpcy5XSUdHTEVfVEhSRVNIT0xEJiYoYi50cmFja2luZz0hMCx0aGlzLmZpcmVUcmFjaygidHJhY2tzdGFydCIsYi5kb3duRXZlbnQsYiksdGhpcy5maXJlVHJhY2soInRyYWNrIixhLGIpKX19LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXt2YXIgYj1jLmdldChhLnBvaW50ZXJJZCk7YiYmKGIudHJhY2tpbmcmJnRoaXMuZmlyZVRyYWNrKCJ0cmFja2VuZCIsYSxiKSxjLmRlbGV0ZShhLnBvaW50ZXJJZCkpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKGEpe3RoaXMucG9pbnRlcnVwKGEpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoInRyYWNrIixkKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9e01JTl9WRUxPQ0lUWTouNSxNQVhfUVVFVUU6NCxtb3ZlUXVldWU6W10sdGFyZ2V0Om51bGwscG9pbnRlcklkOm51bGwsZXZlbnRzOlsicG9pbnRlcmRvd24iLCJwb2ludGVybW92ZSIsInBvaW50ZXJ1cCIsInBvaW50ZXJjYW5jZWwiXSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIXRoaXMucG9pbnRlcklkJiYodGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWQsdGhpcy50YXJnZXQ9YS50YXJnZXQsdGhpcy5hZGRNb3ZlKGEpKX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7YS5wb2ludGVySWQ9PT10aGlzLnBvaW50ZXJJZCYmdGhpcy5hZGRNb3ZlKGEpfSxwb2ludGVydXA6ZnVuY3Rpb24oYSl7YS5wb2ludGVySWQ9PT10aGlzLnBvaW50ZXJJZCYmdGhpcy5maXJlRmxpY2soYSksdGhpcy5jbGVhbnVwKCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNsZWFudXAoKX0sY2xlYW51cDpmdW5jdGlvbigpe3RoaXMubW92ZVF1ZXVlPVtdLHRoaXMudGFyZ2V0PW51bGwsdGhpcy5wb2ludGVySWQ9bnVsbH0sYWRkTW92ZTpmdW5jdGlvbihhKXt0aGlzLm1vdmVRdWV1ZS5sZW5ndGg+PXRoaXMuTUFYX1FVRVVFJiZ0aGlzLm1vdmVRdWV1ZS5zaGlmdCgpLHRoaXMubW92ZVF1ZXVlLnB1c2goYSl9LGZpcmVGbGljazpmdW5jdGlvbihhKXtmb3IodmFyIGMsZCxlLGYsZyxoLGksaj1hLGs9dGhpcy5tb3ZlUXVldWUubGVuZ3RoLGw9MCxtPTAsbj0wLG89MDtrPm8mJihpPXRoaXMubW92ZVF1ZXVlW29dKTtvKyspYz1qLnRpbWVTdGFtcC1pLnRpbWVTdGFtcCxkPWouY2xpZW50WC1pLmNsaWVudFgsZT1qLmNsaWVudFktaS5jbGllbnRZLGY9ZC9jLGc9ZS9jLGg9TWF0aC5zcXJ0KGYqZitnKmcpLGg+biYmKGw9ZixtPWcsbj1oKTt2YXIgcD1NYXRoLmFicyhsKT5NYXRoLmFicyhtKT8ieCI6InkiLHE9dGhpcy5jYWxjQW5nbGUobCxtKTtpZihNYXRoLmFicyhuKT49dGhpcy5NSU5fVkVMT0NJVFkpe3ZhciByPWIubWFrZUV2ZW50KCJmbGljayIse3hWZWxvY2l0eTpsLHlWZWxvY2l0eTptLHZlbG9jaXR5Om4sYW5nbGU6cSxtYWpvckF4aXM6cCxwb2ludGVyVHlwZTphLnBvaW50ZXJUeXBlfSk7Yi5kaXNwYXRjaEV2ZW50KHIsdGhpcy50YXJnZXQpfX0sY2FsY0FuZ2xlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDE4MCpNYXRoLmF0YW4yKGIsYSkvTWF0aC5QSX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJmbGljayIsYyl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPW5ldyBhLlBvaW50ZXJNYXAsZD0xODAvTWF0aC5QSSxlPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLHJlZmVyZW5jZTp7fSxwb2ludGVyZG93bjpmdW5jdGlvbihiKXtpZihjLnNldChiLnBvaW50ZXJJZCxiKSwyPT1jLnBvaW50ZXJzKCkpe3ZhciBkPXRoaXMuY2FsY0Nob3JkKCksZT10aGlzLmNhbGNBbmdsZShkKTt0aGlzLnJlZmVyZW5jZT17YW5nbGU6ZSxkaWFtZXRlcjpkLmRpYW1ldGVyLHRhcmdldDphLmZpbmRMQ0EoZC5hLnRhcmdldCxkLmIudGFyZ2V0KX19fSxwb2ludGVydXA6ZnVuY3Rpb24oYSl7Yy5kZWxldGUoYS5wb2ludGVySWQpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtjLmhhcyhhLnBvaW50ZXJJZCkmJihjLnNldChhLnBvaW50ZXJJZCxhKSxjLnBvaW50ZXJzKCk+MSYmdGhpcy5jYWxjUGluY2hSb3RhdGUoKSl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludGVydXAoYSl9LGRpc3BhdGNoUGluY2g6ZnVuY3Rpb24oYSxjKXt2YXIgZD1hL3RoaXMucmVmZXJlbmNlLmRpYW1ldGVyLGU9Yi5tYWtlRXZlbnQoInBpbmNoIix7c2NhbGU6ZCxjZW50ZXJYOmMuY2VudGVyLngsY2VudGVyWTpjLmNlbnRlci55fSk7Yi5kaXNwYXRjaEV2ZW50KGUsdGhpcy5yZWZlcmVuY2UudGFyZ2V0KX0sZGlzcGF0Y2hSb3RhdGU6ZnVuY3Rpb24oYSxjKXt2YXIgZD1NYXRoLnJvdW5kKChhLXRoaXMucmVmZXJlbmNlLmFuZ2xlKSUzNjApLGU9Yi5tYWtlRXZlbnQoInJvdGF0ZSIse2FuZ2xlOmQsY2VudGVyWDpjLmNlbnRlci54LGNlbnRlclk6Yy5jZW50ZXIueX0pO2IuZGlzcGF0Y2hFdmVudChlLHRoaXMucmVmZXJlbmNlLnRhcmdldCl9LGNhbGNQaW5jaFJvdGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2FsY0Nob3JkKCksYj1hLmRpYW1ldGVyLGM9dGhpcy5jYWxjQW5nbGUoYSk7YiE9dGhpcy5yZWZlcmVuY2UuZGlhbWV0ZXImJnRoaXMuZGlzcGF0Y2hQaW5jaChiLGEpLGMhPXRoaXMucmVmZXJlbmNlLmFuZ2xlJiZ0aGlzLmRpc3BhdGNoUm90YXRlKGMsYSl9LGNhbGNDaG9yZDpmdW5jdGlvbigpe3ZhciBhPVtdO2MuZm9yRWFjaChmdW5jdGlvbihiKXthLnB1c2goYil9KTtmb3IodmFyIGIsZCxlLGY9MCxnPXt9LGg9MDtoPGEubGVuZ3RoO2grKylmb3IodmFyIGk9YVtoXSxqPWgrMTtqPGEubGVuZ3RoO2orKyl7dmFyIGs9YVtqXTtiPU1hdGguYWJzKGkuY2xpZW50WC1rLmNsaWVudFgpLGQ9TWF0aC5hYnMoaS5jbGllbnRZLWsuY2xpZW50WSksZT1iK2QsZT5mJiYoZj1lLGc9e2E6aSxiOmt9KX1yZXR1cm4gYj1NYXRoLmFicyhnLmEuY2xpZW50WCtnLmIuY2xpZW50WCkvMixkPU1hdGguYWJzKGcuYS5jbGllbnRZK2cuYi5jbGllbnRZKS8yLGcuY2VudGVyPXt4OmIseTpkfSxnLmRpYW1ldGVyPWYsZ30sY2FsY0FuZ2xlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuYS5jbGllbnRYLWEuYi5jbGllbnRYLGM9YS5hLmNsaWVudFktYS5iLmNsaWVudFk7cmV0dXJuKDM2MCtNYXRoLmF0YW4yKGMsYikqZCklMzYwfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoInBpbmNoIixlKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9bmV3IGEuUG9pbnRlck1hcCxkPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCIsImtleXVwIl0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiFhLnRhcFByZXZlbnRlZCYmYy5zZXQoYS5wb2ludGVySWQse3RhcmdldDphLnRhcmdldCx4OmEuY2xpZW50WCx5OmEuY2xpZW50WX0pfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2ImJmEudGFwUHJldmVudGVkJiZjLmRlbGV0ZShhLnBvaW50ZXJJZCl9fSxwb2ludGVydXA6ZnVuY3Rpb24oZCl7dmFyIGU9Yy5nZXQoZC5wb2ludGVySWQpO2lmKGUmJiFkLnRhcFByZXZlbnRlZCl7dmFyIGY9YS5maW5kTENBKGUudGFyZ2V0LGQudGFyZ2V0KTtpZihmKXt2YXIgZz1iLm1ha2VFdmVudCgidGFwIix7eDpkLmNsaWVudFgseTpkLmNsaWVudFksZGV0YWlsOmQuZGV0YWlsLHBvaW50ZXJUeXBlOmQucG9pbnRlclR5cGV9KTtiLmRpc3BhdGNoRXZlbnQoZyxmKX19Yy5kZWxldGUoZC5wb2ludGVySWQpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEucG9pbnRlcklkKX0sa2V5dXA6ZnVuY3Rpb24oYSl7dmFyIGM9YS5rZXlDb2RlO2lmKDMyPT09Yyl7dmFyIGQ9YS50YXJnZXQ7ZCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnR8fGQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50fHxiLmRpc3BhdGNoRXZlbnQoYi5tYWtlRXZlbnQoInRhcCIse3g6MCx5OjAsZGV0YWlsOjAscG9pbnRlclR5cGU6InVuYXZhaWxhYmxlIn0pLGQpfX0scHJldmVudFRhcDpmdW5jdGlvbihhKXtjLmRlbGV0ZShhKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJ0YXAiLGQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBhKGEpe2Zvcig7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYS5nZXRFbGVtZW50QnlJZD9hOm51bGx9ZnVuY3Rpb24gYihhLGIpe3ZhciBjPWEuYmluZGluZ3M7aWYoIWMpcmV0dXJuIHZvaWQoYS5iaW5kaW5ncz17fSk7dmFyIGQ9Y1tiXTtkJiYoZC5jbG9zZSgpLGNbYl09dm9pZCAwKX1mdW5jdGlvbiBjKGEpe3JldHVybiBudWxsPT1hPyIiOmF9ZnVuY3Rpb24gZChhLGIpe2EuZGF0YT1jKGIpfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBkKGEsYil9fWZ1bmN0aW9uIGYoYSxiLGQsZSl7cmV0dXJuIGQ/dm9pZChlP2Euc2V0QXR0cmlidXRlKGIsIiIpOmEucmVtb3ZlQXR0cmlidXRlKGIpKTp2b2lkIGEuc2V0QXR0cmlidXRlKGIsYyhlKSl9ZnVuY3Rpb24gZyhhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe2YoYSxiLGMsZCl9fWZ1bmN0aW9uIGgoYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIHM7Y2FzZSJyYWRpbyI6Y2FzZSJzZWxlY3QtbXVsdGlwbGUiOmNhc2Uic2VsZWN0LW9uZSI6cmV0dXJuImNoYW5nZSI7ZGVmYXVsdDpyZXR1cm4iaW5wdXQifX1mdW5jdGlvbiBpKGEsYixkLGUpe2FbYl09KGV8fGMpKGQpfWZ1bmN0aW9uIGooYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtyZXR1cm4gaShhLGIsZCxjKX19ZnVuY3Rpb24gaygpe31mdW5jdGlvbiBsKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtjLnNldFZhbHVlKGFbYl0pLGMuZGlzY2FyZENoYW5nZXMoKSwoZHx8aykoYSksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX12YXIgZj1oKGEpO2EuYWRkRXZlbnRMaXN0ZW5lcihmLGUpO3ZhciBnPWMuY2xvc2U7Yy5jbG9zZT1mdW5jdGlvbigpe2cmJihhLnJlbW92ZUV2ZW50TGlzdGVuZXIoZixlKSxjLmNsb3NlPWcsYy5jbG9zZSgpLGc9dm9pZCAwKX19ZnVuY3Rpb24gbShhKXtyZXR1cm4gQm9vbGVhbihhKX1mdW5jdGlvbiBuKGIpe2lmKGIuZm9ybSlyZXR1cm4gcihiLmZvcm0uZWxlbWVudHMsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiJJTlBVVCI9PWEudGFnTmFtZSYmInJhZGlvIj09YS50eXBlJiZhLm5hbWU9PWIubmFtZX0pO3ZhciBjPWEoYik7aWYoIWMpcmV0dXJuW107dmFyIGQ9Yy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJyYWRpbyJdW25hbWU9IicrYi5uYW1lKyciXScpO3JldHVybiByKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiFhLmZvcm19KX1mdW5jdGlvbiBvKGEpeyJJTlBVVCI9PT1hLnRhZ05hbWUmJiJyYWRpbyI9PT1hLnR5cGUmJm4oYSkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLmJpbmRpbmdzLmNoZWNrZWQ7YiYmYi5zZXRWYWx1ZSghMSl9KX1mdW5jdGlvbiBwKGEsYil7dmFyIGQsZSxmLGc9YS5wYXJlbnROb2RlO2cgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCYmZy5iaW5kaW5ncyYmZy5iaW5kaW5ncy52YWx1ZSYmKGQ9ZyxlPWQuYmluZGluZ3MudmFsdWUsZj1kLnZhbHVlKSxhLnZhbHVlPWMoYiksZCYmZC52YWx1ZSE9ZiYmKGUuc2V0VmFsdWUoZC52YWx1ZSksZS5kaXNjYXJkQ2hhbmdlcygpLFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCkpfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3AoYSxiKX19dmFyIHI9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZpbHRlcik7ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pLE5vZGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLmVycm9yKCJVbmhhbmRsZWQgYmluZGluZyB0byBOb2RlOiAiLHRoaXMsYSxiKX0sTm9kZS5wcm90b3R5cGUudW5iaW5kPWZ1bmN0aW9uKGEpe2IodGhpcyxhKX0sTm9kZS5wcm90b3R5cGUudW5iaW5kQWxsPWZ1bmN0aW9uKCl7aWYodGhpcy5iaW5kaW5ncyl7Zm9yKHZhciBhPU9iamVjdC5rZXlzKHRoaXMuYmluZGluZ3MpLGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9dGhpcy5iaW5kaW5nc1thW2JdXTtjJiZjLmNsb3NlKCl9dGhpcy5iaW5kaW5ncz17fX19LFRleHQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxjLGYpe3JldHVybiJ0ZXh0Q29udGVudCIhPT1hP05vZGUucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxmKTpmP2QodGhpcyxjKTooYih0aGlzLCJ0ZXh0Q29udGVudCIpLGQodGhpcyxjLm9wZW4oZSh0aGlzKSkpLHRoaXMuYmluZGluZ3MudGV4dENvbnRlbnQ9Yyl9LEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPSI/Ij09YVthLmxlbmd0aC0xXTtyZXR1cm4gZSYmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLGE9YS5zbGljZSgwLC0xKSksZD9mKHRoaXMsYSxlLGMpOihiKHRoaXMsYSksZih0aGlzLGEsZSxjLm9wZW4oZyh0aGlzLGEsZSkpKSx0aGlzLmJpbmRpbmdzW2FdPWMpfTt2YXIgczshZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiPWEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSk7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJjaGVja2JveCIpO3ZhciBjLGQ9MDtiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjbGljayJ9KSxiLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24oKXtkKyssYz1jfHwiY2hhbmdlIn0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7ZS5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCEwLHdpbmRvdywwLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsKSxiLmRpc3BhdGNoRXZlbnQoZSkscz0xPT1kPyJjaGFuZ2UiOmN9KCksSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGQsZSl7aWYoInZhbHVlIiE9PWEmJiJjaGVja2VkIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGQsZSk7dGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSk7dmFyIGY9ImNoZWNrZWQiPT1hP206YyxnPSJjaGVja2VkIj09YT9vOms7cmV0dXJuIGU/aSh0aGlzLGEsZCxmKTooYih0aGlzLGEpLGwodGhpcyxhLGQsZyksaSh0aGlzLGEsZC5vcGVuKGoodGhpcyxhLGYpKSxmKSx0aGlzLmJpbmRpbmdzW2FdPWQpfSxIVE1MVGV4dEFyZWFFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4idmFsdWUiIT09YT9IVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxkLGUpOih0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKSxlP2kodGhpcywidmFsdWUiLGQpOihiKHRoaXMsInZhbHVlIiksbCh0aGlzLCJ2YWx1ZSIsZCksaSh0aGlzLCJ2YWx1ZSIsZC5vcGVuKGoodGhpcywidmFsdWUiLGMpKSksdGhpcy5iaW5kaW5ncy52YWx1ZT1kKSl9LEhUTUxPcHRpb25FbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4idmFsdWUiIT09YT9IVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxjLGQpOih0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKSxkP3AodGhpcyxjKTooYih0aGlzLCJ2YWx1ZSIpLGwodGhpcywidmFsdWUiLGMpLHAodGhpcyxjLm9wZW4ocSh0aGlzKSkpLHRoaXMuYmluZGluZ3MudmFsdWU9YykpfSxIVE1MU2VsZWN0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZCl7cmV0dXJuInNlbGVjdGVkaW5kZXgiPT09YSYmKGE9InNlbGVjdGVkSW5kZXgiKSwic2VsZWN0ZWRJbmRleCIhPT1hJiYidmFsdWUiIT09YT9IVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxjLGQpOih0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSxkP2kodGhpcyxhLGMpOihiKHRoaXMsYSksbCh0aGlzLGEsYyksaSh0aGlzLGEsYy5vcGVuKGoodGhpcyxhKSkpLHRoaXMuYmluZGluZ3NbYV09YykpfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBkKGEsYil7aWYoYil7Zm9yKHZhciBkLGU9IiMiK2I7IWQmJihhPWMoYSksYS5wcm90b0NvbnRlbnRfP2Q9YS5wcm90b0NvbnRlbnRfLnF1ZXJ5U2VsZWN0b3IoZSk6YS5nZXRFbGVtZW50QnlJZCYmKGQ9YS5nZXRFbGVtZW50QnlJZChiKSksIWQmJmEudGVtcGxhdGVDcmVhdG9yXyk7KWE9YS50ZW1wbGF0ZUNyZWF0b3JfO3JldHVybiBkfX1mdW5jdGlvbiBlKGEpe3JldHVybiJ0ZW1wbGF0ZSI9PWEudGFnTmFtZSYmImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZihhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gQm9vbGVhbihKW2EudGFnTmFtZV0mJmEuaGFzQXR0cmlidXRlKCJ0ZW1wbGF0ZSIpKX1mdW5jdGlvbiBoKGEpe3JldHVybiB2b2lkIDA9PT1hLmlzVGVtcGxhdGVfJiYoYS5pc1RlbXBsYXRlXz0iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGcoYSkpLGEuaXNUZW1wbGF0ZV99ZnVuY3Rpb24gaShhLGIpe3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbChMKTtoKGEpJiZiKGEpLEUoYyxiKX1mdW5jdGlvbiBqKGEpe2Z1bmN0aW9uIGIoYSl7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhKXx8aihhLmNvbnRlbnQpfWkoYSxiKX1mdW5jdGlvbiBrKGEsYil7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKSl9KX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudDtpZighYi5kZWZhdWx0VmlldylyZXR1cm4gYjt2YXIgYz1iLnRlbXBsYXRlQ29udGVudHNPd25lcl87aWYoIWMpe2ZvcihjPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtjLmxhc3RDaGlsZDspYy5yZW1vdmVDaGlsZChjLmxhc3RDaGlsZCk7Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfPWN9cmV0dXJuIGN9ZnVuY3Rpb24gbShhKXtpZighYS5zdGFnaW5nRG9jdW1lbnRfKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7Yi5zdGFnaW5nRG9jdW1lbnRffHwoYi5zdGFnaW5nRG9jdW1lbnRfPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSxiLnN0YWdpbmdEb2N1bWVudF8uc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF8pLGEuc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF99cmV0dXJuIGEuc3RhZ2luZ0RvY3VtZW50X31mdW5jdGlvbiBuKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO0lbZS5uYW1lXSYmKCJ0ZW1wbGF0ZSIhPT1lLm5hbWUmJmIuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpKX1yZXR1cm4gYn1mdW5jdGlvbiBvKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO2Iuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpfXJldHVybiBhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksYn1mdW5jdGlvbiBwKGEsYixjKXt2YXIgZD1hLmNvbnRlbnQ7aWYoYylyZXR1cm4gdm9pZCBkLmFwcGVuZENoaWxkKGIpO2Zvcih2YXIgZTtlPWIuZmlyc3RDaGlsZDspZC5hcHBlbmRDaGlsZChlKX1mdW5jdGlvbiBxKGEpe00/YS5fX3Byb3RvX189SFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU6ayhhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKX1mdW5jdGlvbiByKGEpe2Euc2V0TW9kZWxGbl98fChhLnNldE1vZGVsRm5fPWZ1bmN0aW9uKCl7YS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMTt2YXIgYj16KGEsYS5kZWxlZ2F0ZV8mJmEuZGVsZWdhdGVfLnByZXBhcmVCaW5kaW5nKTt3KGEsYixhLm1vZGVsXyl9KSxhLnNldE1vZGVsRm5TY2hlZHVsZWRffHwoYS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMCxPYnNlcnZlci5ydW5FT01fKGEuc2V0TW9kZWxGbl8pKX1mdW5jdGlvbiBzKGEsYixjLGQpe2lmKGEmJmEubGVuZ3RoKXtmb3IodmFyIGUsZj1hLmxlbmd0aCxnPTAsaD0wLGk9MCxqPSEwO2Y+aDspe3ZhciBnPWEuaW5kZXhPZigie3siLGgpLGs9YS5pbmRleE9mKCJbWyIsaCksbD0hMSxtPSJ9fSI7aWYoaz49MCYmKDA+Z3x8Zz5rKSYmKGc9ayxsPSEwLG09Il1dIiksaT0wPmc/LTE6YS5pbmRleE9mKG0sZysyKSwwPmkpe2lmKCFlKXJldHVybjtlLnB1c2goYS5zbGljZShoKSk7YnJlYWt9ZT1lfHxbXSxlLnB1c2goYS5zbGljZShoLGcpKTt2YXIgbj1hLnNsaWNlKGcrMixpKS50cmltKCk7ZS5wdXNoKGwpLGo9aiYmbCxlLnB1c2goUGF0aC5nZXQobikpO3ZhciBvPWQmJmQobixiLGMpO2UucHVzaChvKSxoPWkrMn1yZXR1cm4gaD09PWYmJmUucHVzaCgiIiksZS5oYXNPbmVQYXRoPTU9PT1lLmxlbmd0aCxlLmlzU2ltcGxlUGF0aD1lLmhhc09uZVBhdGgmJiIiPT1lWzBdJiYiIj09ZVs0XSxlLm9ubHlPbmVUaW1lPWosZS5jb21iaW5hdG9yPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1lWzBdLGM9MTtjPGUubGVuZ3RoO2MrPTQpe3ZhciBkPWUuaGFzT25lUGF0aD9hOmFbKGMtMSkvNF07dm9pZCAwIT09ZCYmKGIrPWQpLGIrPWVbYyszXX1yZXR1cm4gYn0sZX19ZnVuY3Rpb24gdChhLGIsYyxkKXtpZihiLmhhc09uZVBhdGgpe3ZhciBlPWJbM10sZj1lP2UoZCxjLCEwKTpiWzJdLmdldFZhbHVlRnJvbShkKTtyZXR1cm4gYi5pc1NpbXBsZVBhdGg/ZjpiLmNvbWJpbmF0b3IoZil9Zm9yKHZhciBnPVtdLGg9MTtoPGIubGVuZ3RoO2grPTQpe3ZhciBlPWJbaCsyXTtnWyhoLTEpLzRdPWU/ZShkLGMpOmJbaCsxXS5nZXRWYWx1ZUZyb20oZCl9cmV0dXJuIGIuY29tYmluYXRvcihnKX1mdW5jdGlvbiB1KGEsYixjLGQpe3ZhciBlPWJbM10sZj1lP2UoZCxjLCExKTpuZXcgUGF0aE9ic2VydmVyKGQsYlsyXSk7cmV0dXJuIGIuaXNTaW1wbGVQYXRoP2Y6bmV3IE9ic2VydmVyVHJhbnNmb3JtKGYsYi5jb21iaW5hdG9yKX1mdW5jdGlvbiB2KGEsYixjLGQpe2lmKGIub25seU9uZVRpbWUpcmV0dXJuIHQoYSxiLGMsZCk7aWYoYi5oYXNPbmVQYXRoKXJldHVybiB1KGEsYixjLGQpO2Zvcih2YXIgZT1uZXcgQ29tcG91bmRPYnNlcnZlcixmPTE7ZjxiLmxlbmd0aDtmKz00KXt2YXIgZz1iW2ZdLGg9YltmKzJdO2lmKGgpe3ZhciBpPWgoZCxjLGcpO2c/ZS5hZGRQYXRoKGkpOmUuYWRkT2JzZXJ2ZXIoaSl9ZWxzZXt2YXIgaj1iW2YrMV07Zz9lLmFkZFBhdGgoai5nZXRWYWx1ZUZyb20oZCkpOmUuYWRkUGF0aChkLGopfX1yZXR1cm4gbmV3IE9ic2VydmVyVHJhbnNmb3JtKGUsYi5jb21iaW5hdG9yKX1mdW5jdGlvbiB3KGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8Yi5sZW5ndGg7ZSs9Mil7dmFyIGY9YltlXSxnPWJbZSsxXSxoPXYoZixnLGEsYyksaT1hLmJpbmQoZixoLGcub25seU9uZVRpbWUpO2kmJmQmJmQucHVzaChpKX1pZihiLmlzVGVtcGxhdGUpe2EubW9kZWxfPWM7dmFyIGo9YS5wcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfKGIpO2QmJmomJmQucHVzaChqKX19ZnVuY3Rpb24geChhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoYik7cmV0dXJuIHMoIiI9PWQ/Int7fX0iOmQsYixhLGMpfWZ1bmN0aW9uIHkoYSxjKXtiKGEpO2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmF0dHJpYnV0ZXMubGVuZ3RoO2UrKyl7Zm9yKHZhciBmPWEuYXR0cmlidXRlc1tlXSxnPWYubmFtZSxpPWYudmFsdWU7Il8iPT09Z1swXTspZz1nLnN1YnN0cmluZygxKTtpZighaChhKXx8ZyE9PUgmJmchPT1GJiZnIT09Ryl7dmFyIGo9cyhpLGcsYSxjKTtqJiZkLnB1c2goZyxqKX19cmV0dXJuIGgoYSkmJihkLmlzVGVtcGxhdGU9ITAsZC5pZj14KGEsSCxjKSxkLmJpbmQ9eChhLEYsYyksZC5yZXBlYXQ9eChhLEcsYyksIWQuaWZ8fGQuYmluZHx8ZC5yZXBlYXR8fChkLmJpbmQ9cygie3t9fSIsRixhLGMpKSksZH1mdW5jdGlvbiB6KGEsYil7aWYoYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiB5KGEsYik7aWYoYS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFKXt2YXIgYz1zKGEuZGF0YSwidGV4dENvbnRlbnQiLGEsYik7aWYoYylyZXR1cm5bInRleHRDb250ZW50IixjXX1yZXR1cm5bXX1mdW5jdGlvbiBBKGEsYixjLGQsZSxmLGcpe2Zvcih2YXIgaD1iLmFwcGVuZENoaWxkKGMuaW1wb3J0Tm9kZShhLCExKSksaT0wLGo9YS5maXJzdENoaWxkO2o7aj1qLm5leHRTaWJsaW5nKUEoaixoLGMsZC5jaGlsZHJlbltpKytdLGUsZixnKTtyZXR1cm4gZC5pc1RlbXBsYXRlJiYoSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShoLGEpLGYmJmguc2V0RGVsZWdhdGVfKGYpKSx3KGgsZCxlLGcpLGh9ZnVuY3Rpb24gQihhLGIpe3ZhciBjPXooYSxiKTtjLmNoaWxkcmVuPXt9O2Zvcih2YXIgZD0wLGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWMuY2hpbGRyZW5bZCsrXT1CKGUsYik7cmV0dXJuIGN9ZnVuY3Rpb24gQyhhKXt0aGlzLmNsb3NlZD0hMSx0aGlzLnRlbXBsYXRlRWxlbWVudF89YSx0aGlzLnRlcm1pbmF0b3JzPVtdLHRoaXMuZGVwcz12b2lkIDAsdGhpcy5pdGVyYXRlZFZhbHVlPVtdLHRoaXMucHJlc2VudFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwfXZhciBELEU9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP0Q9YS5NYXA6KEQ9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LEQucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iP3ZvaWQgMDp0aGlzLnZhbHVlc1tiXX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5rZXlzLmluZGV4T2YoYSk7cmV0dXJuIDA+Yj8hMToodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpLCEwKX0sZm9yRWFjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8dGhpcy5rZXlzLmxlbmd0aDtjKyspYS5jYWxsKGJ8fHRoaXMsdGhpcy52YWx1ZXNbY10sdGhpcy5rZXlzW2NdLHRoaXMpfX0pLCJmdW5jdGlvbiIhPXR5cGVvZiBkb2N1bWVudC5jb250YWlucyYmKERvY3VtZW50LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbihhKXtyZXR1cm4gYT09PXRoaXN8fGEucGFyZW50Tm9kZT09PXRoaXM/ITA6dGhpcy5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMoYSl9KTt2YXIgRj0iYmluZCIsRz0icmVwZWF0IixIPSJpZiIsST17dGVtcGxhdGU6ITAscmVwZWF0OiEwLGJpbmQ6ITAscmVmOiEwfSxKPXtUSEVBRDohMCxUQk9EWTohMCxURk9PVDohMCxUSDohMCxUUjohMCxURDohMCxDT0xHUk9VUDohMCxDT0w6ITAsQ0FQVElPTjohMCxPUFRJT046ITAsT1BUR1JPVVA6ITB9LEs9InVuZGVmaW5lZCIhPXR5cGVvZiBIVE1MVGVtcGxhdGVFbGVtZW50LEw9InRlbXBsYXRlLCAiK09iamVjdC5rZXlzKEopLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpKyJbdGVtcGxhdGVdIn0pLmpvaW4oIiwgIik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtqKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksS3x8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIE09Il9fcHJvdG9fXyJpbnt9O0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGU9ZnVuY3Rpb24oYSxjKXtpZihhLnRlbXBsYXRlSXNEZWNvcmF0ZWRfKXJldHVybiExO3ZhciBkPWE7ZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMDt2YXIgaD1mKGQpJiZLLGk9aCxrPSFoLG09ITE7aWYoaHx8KGcoZCk/KGIoIWMpLGQ9bihhKSxkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwLGg9SyxtPSEwKTplKGQpJiYoZD1vKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsaD1LKSksIWgpe3EoZCk7dmFyIHI9bChkKTtkLmNvbnRlbnRfPXIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpfXJldHVybiBjP2QuaW5zdGFuY2VSZWZfPWM6az9wKGQsYSxtKTppJiZqKGQuY29udGVudCksITB9LEhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwPWo7dmFyIE49YS5IVE1MVW5rbm93bkVsZW1lbnR8fEhUTUxFbGVtZW50LE89e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRffSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH07S3x8KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTi5wcm90b3R5cGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSwiY29udGVudCIsTykpLGsoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUse3Byb2Nlc3NCaW5kaW5nRGlyZWN0aXZlc186ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXRlcmF0b3JfJiZ0aGlzLml0ZXJhdG9yXy5jbG9zZURlcHMoKSxhLmlmfHxhLmJpbmR8fGEucmVwZWF0Pyh0aGlzLml0ZXJhdG9yX3x8KHRoaXMuaXRlcmF0b3JfPW5ldyBDKHRoaXMpLHRoaXMuYmluZGluZ3M9dGhpcy5iaW5kaW5nc3x8e30sdGhpcy5iaW5kaW5ncy5pdGVyYXRvcj10aGlzLml0ZXJhdG9yXyksdGhpcy5pdGVyYXRvcl8udXBkYXRlRGVwZW5kZW5jaWVzKGEsdGhpcy5tb2RlbF8pLHRoaXMuaXRlcmF0b3JfKTp2b2lkKHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8uY2xvc2UoKSx0aGlzLml0ZXJhdG9yXz12b2lkIDAsdGhpcy5iaW5kaW5ncy5pdGVyYXRvcj12b2lkIDApKX0sY3JlYXRlSW5zdGFuY2U6ZnVuY3Rpb24oYSxiLGMsZCl7YiYmKGM9dGhpcy5uZXdEZWxlZ2F0ZV8oYikpO3ZhciBlPXRoaXMucmVmLmNvbnRlbnQsZj10aGlzLmJpbmRpbmdNYXBfO2YmJmYuY29udGVudD09PWV8fChmPUIoZSxjJiZjLnByZXBhcmVCaW5kaW5nKXx8W10sZi5jb250ZW50PWUsdGhpcy5iaW5kaW5nTWFwXz1mKTt2YXIgZz1tKHRoaXMpLGg9Zy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aC50ZW1wbGF0ZUNyZWF0b3JfPXRoaXMsaC5wcm90b0NvbnRlbnRfPWU7Zm9yKHZhciBpPXtmaXJzdE5vZGU6bnVsbCxsYXN0Tm9kZTpudWxsLG1vZGVsOmF9LGo9MCxrPWUuZmlyc3RDaGlsZDtrO2s9ay5uZXh0U2libGluZyl7dmFyIGw9QShrLGgsZyxmLmNoaWxkcmVuW2orK10sYSxjLGQpO2wudGVtcGxhdGVJbnN0YW5jZV89aX1yZXR1cm4gaS5maXJzdE5vZGU9aC5maXJzdENoaWxkLGkubGFzdE5vZGU9aC5sYXN0Q2hpbGQsaC50ZW1wbGF0ZUNyZWF0b3JfPXZvaWQgMCxoLnByb3RvQ29udGVudF89dm9pZCAwLGh9LGdldCBtb2RlbCgpe3JldHVybiB0aGlzLm1vZGVsX30sc2V0IG1vZGVsKGEpe3RoaXMubW9kZWxfPWEscih0aGlzKX0sZ2V0IGJpbmRpbmdEZWxlZ2F0ZSgpe3JldHVybiB0aGlzLmRlbGVnYXRlXyYmdGhpcy5kZWxlZ2F0ZV8ucmF3fSxzZXREZWxlZ2F0ZV86ZnVuY3Rpb24oYSl7dGhpcy5kZWxlZ2F0ZV89YSx0aGlzLmJpbmRpbmdNYXBfPXZvaWQgMCx0aGlzLml0ZXJhdG9yXyYmKHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5pbnN0YW5jZU1vZGVsRm5fPXZvaWQgMCl9LG5ld0RlbGVnYXRlXzpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZhciBjPWEmJmFbYl07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGM/ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShhLGFyZ3VtZW50cyl9OnZvaWQgMH1yZXR1cm4gYT97cmF3OmEscHJlcGFyZUJpbmRpbmc6YigicHJlcGFyZUJpbmRpbmciKSxwcmVwYXJlSW5zdGFuY2VNb2RlbDpiKCJwcmVwYXJlSW5zdGFuY2VNb2RlbCIpLHByZXBhcmVJbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZDpiKCJwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQiKX06e319LHNldCBiaW5kaW5nRGVsZWdhdGUoYSl7dGhpcy5zZXREZWxlZ2F0ZV8odGhpcy5uZXdEZWxlZ2F0ZV8oYSkpfSxnZXQgcmVmKCl7dmFyIGE9ZCh0aGlzLHRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKSk7aWYoYXx8KGE9dGhpcy5pbnN0YW5jZVJlZl8pLCFhKXJldHVybiB0aGlzO3ZhciBiPWEucmVmO3JldHVybiBiP2I6YX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlbXBsYXRlSW5zdGFuY2VfO3JldHVybiBhP2E6dGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS50ZW1wbGF0ZUluc3RhbmNlOnZvaWQgMH19KSxDLnByb3RvdHlwZT17Y2xvc2VEZXBzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5kZXBzO2EmJihhLmlmT25lVGltZT09PSExJiZhLmlmVmFsdWUuY2xvc2UoKSxhLm9uZVRpbWU9PT0hMSYmYS52YWx1ZS5jbG9zZSgpKX0sdXBkYXRlRGVwZW5kZW5jaWVzOmZ1bmN0aW9uKGEsYil7dGhpcy5jbG9zZURlcHMoKTt2YXIgYz10aGlzLmRlcHM9e30sZD10aGlzLnRlbXBsYXRlRWxlbWVudF87aWYoYS5pZil7aWYoYy5oYXNJZj0hMCxjLmlmT25lVGltZT1hLmlmLm9ubHlPbmVUaW1lLGMuaWZWYWx1ZT12KEgsYS5pZixkLGIpLGMuaWZPbmVUaW1lJiYhYy5pZlZhbHVlKXJldHVybiB2b2lkIHRoaXMudXBkYXRlSXRlcmF0ZWRWYWx1ZSgpO2MuaWZPbmVUaW1lfHxjLmlmVmFsdWUub3Blbih0aGlzLnVwZGF0ZUl0ZXJhdGVkVmFsdWUsdGhpcyl9YS5yZXBlYXQ/KGMucmVwZWF0PSEwLGMub25lVGltZT1hLnJlcGVhdC5vbmx5T25lVGltZSxjLnZhbHVlPXYoRyxhLnJlcGVhdCxkLGIpKTooYy5yZXBlYXQ9ITEsYy5vbmVUaW1lPWEuYmluZC5vbmx5T25lVGltZSxjLnZhbHVlPXYoRixhLmJpbmQsZCxiKSksYy5vbmVUaW1lfHxjLnZhbHVlLm9wZW4odGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlLHRoaXMpLHRoaXMudXBkYXRlSXRlcmF0ZWRWYWx1ZSgpfSx1cGRhdGVJdGVyYXRlZFZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5kZXBzLmhhc0lmKXt2YXIgYT10aGlzLmRlcHMuaWZWYWx1ZTtpZih0aGlzLmRlcHMuaWZPbmVUaW1lfHwoYT1hLmRpc2NhcmRDaGFuZ2VzKCkpLCFhKXJldHVybiB2b2lkIHRoaXMudmFsdWVDaGFuZ2VkKCl9dmFyIGI9dGhpcy5kZXBzLnZhbHVlO3RoaXMuZGVwcy5vbmVUaW1lfHwoYj1iLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMuZGVwcy5yZXBlYXR8fChiPVtiXSk7dmFyIGM9dGhpcy5kZXBzLnJlcGVhdCYmIXRoaXMuZGVwcy5vbmVUaW1lJiZBcnJheS5pc0FycmF5KGIpO3RoaXMudmFsdWVDaGFuZ2VkKGIsYyl9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIpe0FycmF5LmlzQXJyYXkoYSl8fChhPVtdKSxhIT09dGhpcy5pdGVyYXRlZFZhbHVlJiYodGhpcy51bm9ic2VydmUoKSx0aGlzLnByZXNlbnRWYWx1ZT1hLGImJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5wcmVzZW50VmFsdWUpLHRoaXMuYXJyYXlPYnNlcnZlci5vcGVuKHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSksdGhpcy5oYW5kbGVTcGxpY2VzKEFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcyh0aGlzLnByZXNlbnRWYWx1ZSx0aGlzLml0ZXJhdGVkVmFsdWUpKSl9LGdldFRlcm1pbmF0b3JBdDpmdW5jdGlvbihhKXtpZigtMT09YSlyZXR1cm4gdGhpcy50ZW1wbGF0ZUVsZW1lbnRfO3ZhciBiPXRoaXMudGVybWluYXRvcnNbMiphXTtpZihiLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fHRoaXMudGVtcGxhdGVFbGVtZW50Xz09PWIpcmV0dXJuIGI7dmFyIGM9Yi5pdGVyYXRvcl87cmV0dXJuIGM/Yy5nZXRUZXJtaW5hdG9yQXQoYy50ZXJtaW5hdG9ycy5sZW5ndGgvMi0xKTpifSxpbnNlcnRJbnN0YW5jZUF0OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuZ2V0VGVybWluYXRvckF0KGEtMSksZj1lO2I/Zj1iLmxhc3RDaGlsZHx8ZjpjJiYoZj1jW2MubGVuZ3RoLTFdfHxmKSx0aGlzLnRlcm1pbmF0b3JzLnNwbGljZSgyKmEsMCxmLGQpO3ZhciBnPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlLGg9ZS5uZXh0U2libGluZztpZihiKWcuaW5zZXJ0QmVmb3JlKGIsaCk7ZWxzZSBpZihjKWZvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKWcuaW5zZXJ0QmVmb3JlKGNbaV0saCl9LGV4dHJhY3RJbnN0YW5jZUF0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9dGhpcy5nZXRUZXJtaW5hdG9yQXQoYS0xKSxkPXRoaXMuZ2V0VGVybWluYXRvckF0KGEpO2IuaW5zdGFuY2VCaW5kaW5ncz10aGlzLnRlcm1pbmF0b3JzWzIqYSsxXSx0aGlzLnRlcm1pbmF0b3JzLnNwbGljZSgyKmEsMik7Zm9yKHZhciBlPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlO2QhPT1jOyl7dmFyIGY9Yy5uZXh0U2libGluZztmPT1kJiYoZD1jKSxlLnJlbW92ZUNoaWxkKGYpLGIucHVzaChmKX1yZXR1cm4gYn0sZ2V0RGVsZWdhdGVGbjpmdW5jdGlvbihhKXtyZXR1cm4gYT1hJiZhKHRoaXMudGVtcGxhdGVFbGVtZW50XyksImZ1bmN0aW9uIj09dHlwZW9mIGE/YTpudWxsfSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCYmYS5sZW5ndGgpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZighYi5wYXJlbnROb2RlKXJldHVybiB2b2lkIHRoaXMuY2xvc2UoKTtBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcyh0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5wcmVzZW50VmFsdWUsYSk7dmFyIGM9Yi5kZWxlZ2F0ZV87dm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPXRoaXMuZ2V0RGVsZWdhdGVGbihjJiZjLnByZXBhcmVJbnN0YW5jZU1vZGVsKSksdm9pZCAwPT09dGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmKHRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dGhpcy5nZXREZWxlZ2F0ZUZuKGMmJmMucHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkKSk7dmFyIGQ9bmV3IEQsZT0wO2EuZm9yRWFjaChmdW5jdGlvbihhKXthLnJlbW92ZWQuZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz10aGlzLmV4dHJhY3RJbnN0YW5jZUF0KGEuaW5kZXgrZSk7ZC5zZXQoYixjKX0sdGhpcyksZS09YS5hZGRlZENvdW50fSx0aGlzKSxhLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBlPWEuaW5kZXg7ZTxhLmluZGV4K2EuYWRkZWRDb3VudDtlKyspe3ZhciBmLGc9dGhpcy5pdGVyYXRlZFZhbHVlW2VdLGg9dm9pZCAwLGk9ZC5nZXQoZyk7aT8oZC5kZWxldGUoZyksZj1pLmluc3RhbmNlQmluZGluZ3MpOihmPVtdLHRoaXMuaW5zdGFuY2VNb2RlbEZuXyYmKGc9dGhpcy5pbnN0YW5jZU1vZGVsRm5fKGcpKSx2b2lkIDAhPT1nJiYoaD1iLmNyZWF0ZUluc3RhbmNlKGcsdm9pZCAwLGMsZikpKSx0aGlzLmluc2VydEluc3RhbmNlQXQoZSxoLGksZil9fSx0aGlzKSxkLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5jbG9zZUluc3RhbmNlQmluZGluZ3MoYS5pbnN0YW5jZUJpbmRpbmdzKX0sdGhpcyksdGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmdGhpcy5yZXBvcnRJbnN0YW5jZXNNb3ZlZChhKX19LHJlcG9ydEluc3RhbmNlTW92ZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRUZXJtaW5hdG9yQXQoYS0xKSxjPXRoaXMuZ2V0VGVybWluYXRvckF0KGEpO2lmKGIhPT1jKXt2YXIgZD1iLm5leHRTaWJsaW5nLnRlbXBsYXRlSW5zdGFuY2U7dGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyhkLGEpfX0scmVwb3J0SW5zdGFuY2VzTW92ZWQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz0wLGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGU9YVtkXTtpZigwIT1jKWZvcig7YjxlLmluZGV4Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2Vsc2UgYj1lLmluZGV4O2Zvcig7YjxlLmluZGV4K2UuYWRkZWRDb3VudDspdGhpcy5yZXBvcnRJbnN0YW5jZU1vdmVkKGIpLGIrKztjKz1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aH1pZigwIT1jKWZvcih2YXIgZj10aGlzLnRlcm1pbmF0b3JzLmxlbmd0aC8yO2Y+YjspdGhpcy5yZXBvcnRJbnN0YW5jZU1vdmVkKGIpLGIrK30sY2xvc2VJbnN0YW5jZUJpbmRpbmdzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0uY2xvc2UoKX0sdW5vYnNlcnZlOmZ1bmN0aW9uKCl7dGhpcy5hcnJheU9ic2VydmVyJiYodGhpcy5hcnJheU9ic2VydmVyLmNsb3NlKCksdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXt0aGlzLnVub2JzZXJ2ZSgpO2Zvcih2YXIgYT0xO2E8dGhpcy50ZXJtaW5hdG9ycy5sZW5ndGg7YSs9Mil0aGlzLmNsb3NlSW5zdGFuY2VCaW5kaW5ncyh0aGlzLnRlcm1pbmF0b3JzW2FdKTt0aGlzLnRlcm1pbmF0b3JzLmxlbmd0aD0wLHRoaXMuY2xvc2VEZXBzKCksdGhpcy50ZW1wbGF0ZUVsZW1lbnRfLml0ZXJhdG9yXz12b2lkIDAsdGhpcy5jbG9zZWQ9ITB9fX0sSFRNTFRlbXBsYXRlRWxlbWVudC5mb3JBbGxUZW1wbGF0ZXNGcm9tXz1pfSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQVNTRVJUOiAiK2IpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGE+PTQ4JiY1Nz49YX1mdW5jdGlvbiBkKGEpe3JldHVybiAzMj09PWF8fDk9PT1hfHwxMT09PWF8fDEyPT09YXx8MTYwPT09YXx8YT49NTc2MCYmIuGagOGgjuKAgOKAgeKAguKAg+KAhOKAheKAhuKAh+KAiOKAieKAiuKAr+KBn+OAgCIuaW5kZXhPZihTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKT4wfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIDEwPT09YXx8MTM9PT1hfHw4MjMyPT09YXx8ODIzMz09PWF9ZnVuY3Rpb24gZihhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YX1mdW5jdGlvbiBnKGEpe3JldHVybiAzNj09PWF8fDk1PT09YXx8YT49NjUmJjkwPj1hfHxhPj05NyYmMTIyPj1hfHxhPj00OCYmNTc+PWF9ZnVuY3Rpb24gaChhKXtyZXR1cm4idGhpcyI9PT1hfWZ1bmN0aW9uIGkoKXtmb3IoO1k+WCYmZChXLmNoYXJDb2RlQXQoWCkpOykrK1h9ZnVuY3Rpb24gaigpe3ZhciBhLGI7Zm9yKGE9WCsrO1k+WCYmKGI9Vy5jaGFyQ29kZUF0KFgpLGcoYikpOykrK1g7cmV0dXJuIFcuc2xpY2UoYSxYKX1mdW5jdGlvbiBrKCl7dmFyIGEsYixjO3JldHVybiBhPVgsYj1qKCksYz0xPT09Yi5sZW5ndGg/Uy5JZGVudGlmaWVyOmgoYik/Uy5LZXl3b3JkOiJudWxsIj09PWI/Uy5OdWxsTGl0ZXJhbDoidHJ1ZSI9PT1ifHwiZmFsc2UiPT09Yj9TLkJvb2xlYW5MaXRlcmFsOlMuSWRlbnRpZmllcix7dHlwZTpjLHZhbHVlOmIscmFuZ2U6W2EsWF19fWZ1bmN0aW9uIGwoKXt2YXIgYSxiLGM9WCxkPVcuY2hhckNvZGVBdChYKSxlPVdbWF07c3dpdGNoKGQpe2Nhc2UgNDY6Y2FzZSA0MDpjYXNlIDQxOmNhc2UgNTk6Y2FzZSA0NDpjYXNlIDEyMzpjYXNlIDEyNTpjYXNlIDkxOmNhc2UgOTM6Y2FzZSA1ODpjYXNlIDYzOnJldHVybisrWCx7dHlwZTpTLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShkKSxyYW5nZTpbYyxYXX07ZGVmYXVsdDppZihhPVcuY2hhckNvZGVBdChYKzEpLDYxPT09YSlzd2l0Y2goZCl7Y2FzZSAzNzpjYXNlIDM4OmNhc2UgNDI6Y2FzZSA0MzpjYXNlIDQ1OmNhc2UgNDc6Y2FzZSA2MDpjYXNlIDYyOmNhc2UgMTI0OnJldHVybiBYKz0yLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQpK1N0cmluZy5mcm9tQ2hhckNvZGUoYSkscmFuZ2U6W2MsWF19O2Nhc2UgMzM6Y2FzZSA2MTpyZXR1cm4gWCs9Miw2MT09PVcuY2hhckNvZGVBdChYKSYmKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpXLnNsaWNlKGMsWCkscmFuZ2U6W2MsWF19fX1yZXR1cm4gYj1XW1grMV0sZT09PWImJiImfCIuaW5kZXhPZihlKT49MD8oWCs9Mix7dHlwZTpTLlB1bmN0dWF0b3IsdmFsdWU6ZStiLHJhbmdlOltjLFhdfSk6Ijw+PSErLSolJnxeLyIuaW5kZXhPZihlKT49MD8oKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTplLHJhbmdlOltjLFhdfSk6dm9pZCBzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIil9ZnVuY3Rpb24gbSgpe3ZhciBhLGQsZTtpZihlPVdbWF0sYihjKGUuY2hhckNvZGVBdCgwKSl8fCIuIj09PWUsIk51bWVyaWMgbGl0ZXJhbCBtdXN0IHN0YXJ0IHdpdGggYSBkZWNpbWFsIGRpZ2l0IG9yIGEgZGVjaW1hbCBwb2ludCIpLGQ9WCxhPSIiLCIuIiE9PWUpe2ZvcihhPVdbWCsrXSxlPVdbWF0sIjAiPT09YSYmZSYmYyhlLmNoYXJDb2RlQXQoMCkpJiZzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIik7YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZT1XW1hdfWlmKCIuIj09PWUpe2ZvcihhKz1XW1grK107YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZT1XW1hdfWlmKCJlIj09PWV8fCJFIj09PWUpaWYoYSs9V1tYKytdLGU9V1tYXSwoIisiPT09ZXx8Ii0iPT09ZSkmJihhKz1XW1grK10pLGMoVy5jaGFyQ29kZUF0KFgpKSlmb3IoO2MoVy5jaGFyQ29kZUF0KFgpKTspYSs9V1tYKytdO2Vsc2Ugcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpO3JldHVybiBmKFcuY2hhckNvZGVBdChYKSkmJnMoe30sVi5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx7dHlwZTpTLk51bWVyaWNMaXRlcmFsLHZhbHVlOnBhcnNlRmxvYXQoYSkscmFuZ2U6W2QsWF19fWZ1bmN0aW9uIG4oKXt2YXIgYSxjLGQsZj0iIixnPSExO2ZvcihhPVdbWF0sYigiJyI9PT1hfHwnIic9PT1hLCJTdHJpbmcgbGl0ZXJhbCBtdXN0IHN0YXJ0cyB3aXRoIGEgcXVvdGUiKSxjPVgsKytYO1k+WDspe2lmKGQ9V1tYKytdLGQ9PT1hKXthPSIiO2JyZWFrfWlmKCJcXCI9PT1kKWlmKGQ9V1tYKytdLGQmJmUoZC5jaGFyQ29kZUF0KDApKSkiXHIiPT09ZCYmIlxuIj09PVdbWF0mJisrWDtlbHNlIHN3aXRjaChkKXtjYXNlIm4iOmYrPSJcbiI7YnJlYWs7Y2FzZSJyIjpmKz0iXHIiO2JyZWFrO2Nhc2UidCI6Zis9IgkiO2JyZWFrO2Nhc2UiYiI6Zis9IlxiIjticmVhaztjYXNlImYiOmYrPSJcZiI7YnJlYWs7Y2FzZSJ2IjpmKz0iCyI7YnJlYWs7ZGVmYXVsdDpmKz1kfWVsc2V7aWYoZShkLmNoYXJDb2RlQXQoMCkpKWJyZWFrO2YrPWR9fXJldHVybiIiIT09YSYmcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHt0eXBlOlMuU3RyaW5nTGl0ZXJhbCx2YWx1ZTpmLG9jdGFsOmcscmFuZ2U6W2MsWF19fWZ1bmN0aW9uIG8oYSl7cmV0dXJuIGEudHlwZT09PVMuSWRlbnRpZmllcnx8YS50eXBlPT09Uy5LZXl3b3JkfHxhLnR5cGU9PT1TLkJvb2xlYW5MaXRlcmFsfHxhLnR5cGU9PT1TLk51bGxMaXRlcmFsfWZ1bmN0aW9uIHAoKXt2YXIgYTtyZXR1cm4gaSgpLFg+PVk/e3R5cGU6Uy5FT0YscmFuZ2U6W1gsWF19OihhPVcuY2hhckNvZGVBdChYKSw0MD09PWF8fDQxPT09YXx8NTg9PT1hP2woKTozOT09PWF8fDM0PT09YT9uKCk6ZihhKT9rKCk6NDY9PT1hP2MoVy5jaGFyQ29kZUF0KFgrMSkpP20oKTpsKCk6YyhhKT9tKCk6bCgpKX1mdW5jdGlvbiBxKCl7dmFyIGE7cmV0dXJuIGE9JCxYPWEucmFuZ2VbMV0sJD1wKCksWD1hLnJhbmdlWzFdLGF9ZnVuY3Rpb24gcigpe3ZhciBhO2E9WCwkPXAoKSxYPWF9ZnVuY3Rpb24gcyhhLGMpe3ZhciBkLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpLGY9Yy5yZXBsYWNlKC8lKFxkKS9nLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIoYzxlLmxlbmd0aCwiTWVzc2FnZSByZWZlcmVuY2UgbXVzdCBiZSBpbiByYW5nZSIpLGVbY119KTt0aHJvdyBkPW5ldyBFcnJvcihmKSxkLmluZGV4PVgsZC5kZXNjcmlwdGlvbj1mLGR9ZnVuY3Rpb24gdChhKXtzKGEsVi5VbmV4cGVjdGVkVG9rZW4sYS52YWx1ZSl9ZnVuY3Rpb24gdShhKXt2YXIgYj1xKCk7KGIudHlwZSE9PVMuUHVuY3R1YXRvcnx8Yi52YWx1ZSE9PWEpJiZ0KGIpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuICQudHlwZT09PVMuUHVuY3R1YXRvciYmJC52YWx1ZT09PWF9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gJC50eXBlPT09Uy5LZXl3b3JkJiYkLnZhbHVlPT09YX1mdW5jdGlvbiB4KCl7dmFyIGE9W107Zm9yKHUoIlsiKTshdigiXSIpOyl2KCIsIik/KHEoKSxhLnB1c2gobnVsbCkpOihhLnB1c2goYmIoKSksdigiXSIpfHx1KCIsIikpO3JldHVybiB1KCJdIiksWi5jcmVhdGVBcnJheUV4cHJlc3Npb24oYSl9ZnVuY3Rpb24geSgpe3ZhciBhO3JldHVybiBpKCksYT1xKCksYS50eXBlPT09Uy5TdHJpbmdMaXRlcmFsfHxhLnR5cGU9PT1TLk51bWVyaWNMaXRlcmFsP1ouY3JlYXRlTGl0ZXJhbChhKTpaLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24geigpe3ZhciBhLGI7cmV0dXJuIGE9JCxpKCksKGEudHlwZT09PVMuRU9GfHxhLnR5cGU9PT1TLlB1bmN0dWF0b3IpJiZ0KGEpLGI9eSgpLHUoIjoiKSxaLmNyZWF0ZVByb3BlcnR5KCJpbml0IixiLGJiKCkpfWZ1bmN0aW9uIEEoKXt2YXIgYT1bXTtmb3IodSgieyIpOyF2KCJ9Iik7KWEucHVzaCh6KCkpLHYoIn0iKXx8dSgiLCIpO3JldHVybiB1KCJ9IiksWi5jcmVhdGVPYmplY3RFeHByZXNzaW9uKGEpfWZ1bmN0aW9uIEIoKXt2YXIgYTtyZXR1cm4gdSgiKCIpLGE9YmIoKSx1KCIpIiksYX1mdW5jdGlvbiBDKCl7dmFyIGEsYixjO3JldHVybiB2KCIoIik/QigpOihhPSQudHlwZSxhPT09Uy5JZGVudGlmaWVyP2M9Wi5jcmVhdGVJZGVudGlmaWVyKHEoKS52YWx1ZSk6YT09PVMuU3RyaW5nTGl0ZXJhbHx8YT09PVMuTnVtZXJpY0xpdGVyYWw/Yz1aLmNyZWF0ZUxpdGVyYWwocSgpKTphPT09Uy5LZXl3b3JkP3coInRoaXMiKSYmKHEoKSxjPVouY3JlYXRlVGhpc0V4cHJlc3Npb24oKSk6YT09PVMuQm9vbGVhbkxpdGVyYWw/KGI9cSgpLGIudmFsdWU9InRydWUiPT09Yi52YWx1ZSxjPVouY3JlYXRlTGl0ZXJhbChiKSk6YT09PVMuTnVsbExpdGVyYWw/KGI9cSgpLGIudmFsdWU9bnVsbCxjPVouY3JlYXRlTGl0ZXJhbChiKSk6digiWyIpP2M9eCgpOnYoInsiKSYmKGM9QSgpKSxjP2M6dm9pZCB0KHEoKSkpfWZ1bmN0aW9uIEQoKXt2YXIgYT1bXTtpZih1KCIoIiksIXYoIikiKSlmb3IoO1k+WCYmKGEucHVzaChiYigpKSwhdigiKSIpKTspdSgiLCIpO3JldHVybiB1KCIpIiksYX1mdW5jdGlvbiBFKCl7dmFyIGE7cmV0dXJuIGE9cSgpLG8oYSl8fHQoYSksWi5jcmVhdGVJZGVudGlmaWVyKGEudmFsdWUpfWZ1bmN0aW9uIEYoKXtyZXR1cm4gdSgiLiIpLEUoKX1mdW5jdGlvbiBHKCl7dmFyIGE7cmV0dXJuIHUoIlsiKSxhPWJiKCksdSgiXSIpLGF9ZnVuY3Rpb24gSCgpe3ZhciBhLGI7Zm9yKGE9QygpO3YoIi4iKXx8digiWyIpOyl2KCJbIik/KGI9RygpLGE9Wi5jcmVhdGVNZW1iZXJFeHByZXNzaW9uKCJbIixhLGIpKTooYj1GKCksYT1aLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIi4iLGEsYikpO3JldHVybiBhfWZ1bmN0aW9uIEkoKXt2YXIgYSxiO3JldHVybiAkLnR5cGUhPT1TLlB1bmN0dWF0b3ImJiQudHlwZSE9PVMuS2V5d29yZD9iPWFiKCk6digiKyIpfHx2KCItIil8fHYoIiEiKT8oYT1xKCksYj1JKCksYj1aLmNyZWF0ZVVuYXJ5RXhwcmVzc2lvbihhLnZhbHVlLGIpKTp3KCJkZWxldGUiKXx8dygidm9pZCIpfHx3KCJ0eXBlb2YiKT9zKHt9LFYuVW5leHBlY3RlZFRva2VuKTpiPWFiKCksYn1mdW5jdGlvbiBKKGEpe3ZhciBiPTA7aWYoYS50eXBlIT09Uy5QdW5jdHVhdG9yJiZhLnR5cGUhPT1TLktleXdvcmQpcmV0dXJuIDA7CnN3aXRjaChhLnZhbHVlKXtjYXNlInx8IjpiPTE7YnJlYWs7Y2FzZSImJiI6Yj0yO2JyZWFrO2Nhc2UiPT0iOmNhc2UiIT0iOmNhc2UiPT09IjpjYXNlIiE9PSI6Yj02O2JyZWFrO2Nhc2UiPCI6Y2FzZSI+IjpjYXNlIjw9IjpjYXNlIj49IjpjYXNlImluc3RhbmNlb2YiOmI9NzticmVhaztjYXNlImluIjpiPTc7YnJlYWs7Y2FzZSIrIjpjYXNlIi0iOmI9OTticmVhaztjYXNlIioiOmNhc2UiLyI6Y2FzZSIlIjpiPTExfXJldHVybiBifWZ1bmN0aW9uIEsoKXt2YXIgYSxiLGMsZCxlLGYsZyxoO2lmKGc9SSgpLGI9JCxjPUooYiksMD09PWMpcmV0dXJuIGc7Zm9yKGIucHJlYz1jLHEoKSxlPUkoKSxkPVtnLGIsZV07KGM9SigkKSk+MDspe2Zvcig7ZC5sZW5ndGg+MiYmYzw9ZFtkLmxlbmd0aC0yXS5wcmVjOyllPWQucG9wKCksZj1kLnBvcCgpLnZhbHVlLGc9ZC5wb3AoKSxhPVouY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihmLGcsZSksZC5wdXNoKGEpO2I9cSgpLGIucHJlYz1jLGQucHVzaChiKSxhPUkoKSxkLnB1c2goYSl9Zm9yKGg9ZC5sZW5ndGgtMSxhPWRbaF07aD4xOylhPVouY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihkW2gtMV0udmFsdWUsZFtoLTJdLGEpLGgtPTI7cmV0dXJuIGF9ZnVuY3Rpb24gTCgpe3ZhciBhLGIsYztyZXR1cm4gYT1LKCksdigiPyIpJiYocSgpLGI9TCgpLHUoIjoiKSxjPUwoKSxhPVouY3JlYXRlQ29uZGl0aW9uYWxFeHByZXNzaW9uKGEsYixjKSksYX1mdW5jdGlvbiBNKCl7dmFyIGEsYjtyZXR1cm4gYT1xKCksYS50eXBlIT09Uy5JZGVudGlmaWVyJiZ0KGEpLGI9digiKCIpP0QoKTpbXSxaLmNyZWF0ZUZpbHRlcihhLnZhbHVlLGIpfWZ1bmN0aW9uIE4oKXtmb3IoO3YoInwiKTspcSgpLE0oKX1mdW5jdGlvbiBPKCl7aSgpLHIoKTt2YXIgYT1iYigpO2EmJigiLCI9PT0kLnZhbHVlfHwiaW4iPT0kLnZhbHVlJiZhLnR5cGU9PT1VLklkZW50aWZpZXI/UShhKTooTigpLCJhcyI9PT0kLnZhbHVlP1AoYSk6Wi5jcmVhdGVUb3BMZXZlbChhKSkpLCQudHlwZSE9PVMuRU9GJiZ0KCQpfWZ1bmN0aW9uIFAoYSl7cSgpO3ZhciBiPXEoKS52YWx1ZTtaLmNyZWF0ZUFzRXhwcmVzc2lvbihhLGIpfWZ1bmN0aW9uIFEoYSl7dmFyIGI7IiwiPT09JC52YWx1ZSYmKHEoKSwkLnR5cGUhPT1TLklkZW50aWZpZXImJnQoJCksYj1xKCkudmFsdWUpLHEoKTt2YXIgYz1iYigpO04oKSxaLmNyZWF0ZUluRXhwcmVzc2lvbihhLm5hbWUsYixjKX1mdW5jdGlvbiBSKGEsYil7cmV0dXJuIFo9YixXPWEsWD0wLFk9Vy5sZW5ndGgsJD1udWxsLF89e2xhYmVsU2V0Ont9fSxPKCl9dmFyIFMsVCxVLFYsVyxYLFksWiwkLF87Uz17Qm9vbGVhbkxpdGVyYWw6MSxFT0Y6MixJZGVudGlmaWVyOjMsS2V5d29yZDo0LE51bGxMaXRlcmFsOjUsTnVtZXJpY0xpdGVyYWw6NixQdW5jdHVhdG9yOjcsU3RyaW5nTGl0ZXJhbDo4fSxUPXt9LFRbUy5Cb29sZWFuTGl0ZXJhbF09IkJvb2xlYW4iLFRbUy5FT0ZdPSI8ZW5kPiIsVFtTLklkZW50aWZpZXJdPSJJZGVudGlmaWVyIixUW1MuS2V5d29yZF09IktleXdvcmQiLFRbUy5OdWxsTGl0ZXJhbF09Ik51bGwiLFRbUy5OdW1lcmljTGl0ZXJhbF09Ik51bWVyaWMiLFRbUy5QdW5jdHVhdG9yXT0iUHVuY3R1YXRvciIsVFtTLlN0cmluZ0xpdGVyYWxdPSJTdHJpbmciLFU9e0FycmF5RXhwcmVzc2lvbjoiQXJyYXlFeHByZXNzaW9uIixCaW5hcnlFeHByZXNzaW9uOiJCaW5hcnlFeHByZXNzaW9uIixDYWxsRXhwcmVzc2lvbjoiQ2FsbEV4cHJlc3Npb24iLENvbmRpdGlvbmFsRXhwcmVzc2lvbjoiQ29uZGl0aW9uYWxFeHByZXNzaW9uIixFbXB0eVN0YXRlbWVudDoiRW1wdHlTdGF0ZW1lbnQiLEV4cHJlc3Npb25TdGF0ZW1lbnQ6IkV4cHJlc3Npb25TdGF0ZW1lbnQiLElkZW50aWZpZXI6IklkZW50aWZpZXIiLExpdGVyYWw6IkxpdGVyYWwiLExhYmVsZWRTdGF0ZW1lbnQ6IkxhYmVsZWRTdGF0ZW1lbnQiLExvZ2ljYWxFeHByZXNzaW9uOiJMb2dpY2FsRXhwcmVzc2lvbiIsTWVtYmVyRXhwcmVzc2lvbjoiTWVtYmVyRXhwcmVzc2lvbiIsT2JqZWN0RXhwcmVzc2lvbjoiT2JqZWN0RXhwcmVzc2lvbiIsUHJvZ3JhbToiUHJvZ3JhbSIsUHJvcGVydHk6IlByb3BlcnR5IixUaGlzRXhwcmVzc2lvbjoiVGhpc0V4cHJlc3Npb24iLFVuYXJ5RXhwcmVzc2lvbjoiVW5hcnlFeHByZXNzaW9uIn0sVj17VW5leHBlY3RlZFRva2VuOiJVbmV4cGVjdGVkIHRva2VuICUwIixVbmtub3duTGFiZWw6IlVuZGVmaW5lZCBsYWJlbCAnJTAnIixSZWRlY2xhcmF0aW9uOiIlMCAnJTEnIGhhcyBhbHJlYWR5IGJlZW4gZGVjbGFyZWQifTt2YXIgYWI9SCxiYj1MO2EuZXNwcmltYT17cGFyc2U6Un19KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixkLGUpe3ZhciBmO3RyeXtpZihmPWMoYSksZi5zY29wZUlkZW50JiYoZC5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFfHwiVEVNUExBVEUiIT09ZC50YWdOYW1lfHwiYmluZCIhPT1iJiYicmVwZWF0IiE9PWIpKXRocm93IEVycm9yKCJhcyBhbmQgaW4gY2FuIG9ubHkgYmUgdXNlZCB3aXRoaW4gPHRlbXBsYXRlIGJpbmQvcmVwZWF0PiIpfWNhdGNoKGcpe3JldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoIkludmFsaWQgZXhwcmVzc2lvbiBzeW50YXg6ICIrYSxnKX1yZXR1cm4gZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWYuZ2V0QmluZGluZyhhLGUsYyk7cmV0dXJuIGYuc2NvcGVJZGVudCYmZCYmKGIucG9seW1lckV4cHJlc3Npb25TY29wZUlkZW50Xz1mLnNjb3BlSWRlbnQsZi5pbmRleElkZW50JiYoYi5wb2x5bWVyRXhwcmVzc2lvbkluZGV4SWRlbnRfPWYuaW5kZXhJZGVudCkpLGR9fWZ1bmN0aW9uIGMoYSl7dmFyIGI9cVthXTtpZighYil7dmFyIGM9bmV3IGo7ZXNwcmltYS5wYXJzZShhLGMpLGI9bmV3IGwoYykscVthXT1ifXJldHVybiBifWZ1bmN0aW9uIGQoYSl7dGhpcy52YWx1ZT1hLHRoaXMudmFsdWVGbl89dm9pZCAwfWZ1bmN0aW9uIGUoYSl7dGhpcy5uYW1lPWEsdGhpcy5wYXRoPVBhdGguZ2V0KGEpfWZ1bmN0aW9uIGYoYSxiLGMpeyJbIj09YyYmYiBpbnN0YW5jZW9mIGQmJlBhdGguZ2V0KGIudmFsdWUpLnZhbGlkJiYoYz0iLiIsYj1uZXcgZShiLnZhbHVlKSksdGhpcy5keW5hbWljRGVwcz0iZnVuY3Rpb24iPT10eXBlb2YgYXx8YS5keW5hbWljLHRoaXMuZHluYW1pYz0iZnVuY3Rpb24iPT10eXBlb2YgYnx8Yi5keW5hbWljfHwiWyI9PWMsdGhpcy5zaW1wbGVQYXRoPSF0aGlzLmR5bmFtaWMmJiF0aGlzLmR5bmFtaWNEZXBzJiZiIGluc3RhbmNlb2YgZSYmKGEgaW5zdGFuY2VvZiBmfHxhIGluc3RhbmNlb2YgZSksdGhpcy5vYmplY3Q9dGhpcy5zaW1wbGVQYXRoP2E6aShhKSx0aGlzLnByb3BlcnR5PSIuIj09Yz9iOmkoYil9ZnVuY3Rpb24gZyhhLGIpe3RoaXMubmFtZT1hLHRoaXMuYXJncz1bXTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl0aGlzLmFyZ3NbY109aShiW2NdKX1mdW5jdGlvbiBoKCl7dGhyb3cgRXJyb3IoIk5vdCBJbXBsZW1lbnRlZCIpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGE/YTphLnZhbHVlRm4oKX1mdW5jdGlvbiBqKCl7dGhpcy5leHByZXNzaW9uPW51bGwsdGhpcy5maWx0ZXJzPVtdLHRoaXMuZGVwcz17fSx0aGlzLmN1cnJlbnRQYXRoPXZvaWQgMCx0aGlzLnNjb3BlSWRlbnQ9dm9pZCAwLHRoaXMuaW5kZXhJZGVudD12b2lkIDAsdGhpcy5keW5hbWljRGVwcz0hMX1mdW5jdGlvbiBrKGEpe3RoaXMudmFsdWVfPWF9ZnVuY3Rpb24gbChhKXtpZih0aGlzLnNjb3BlSWRlbnQ9YS5zY29wZUlkZW50LHRoaXMuaW5kZXhJZGVudD1hLmluZGV4SWRlbnQsIWEuZXhwcmVzc2lvbil0aHJvdyBFcnJvcigiTm8gZXhwcmVzc2lvbiBmb3VuZC4iKTt0aGlzLmV4cHJlc3Npb249YS5leHByZXNzaW9uLGkodGhpcy5leHByZXNzaW9uKSx0aGlzLmZpbHRlcnM9YS5maWx0ZXJzLHRoaXMuZHluYW1pY0RlcHM9YS5keW5hbWljRGVwc31mdW5jdGlvbiBtKGEpe3JldHVybiBTdHJpbmcoYSkucmVwbGFjZSgvW0EtWl0vZyxmdW5jdGlvbihhKXtyZXR1cm4iLSIrYS50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gbihhKXtyZXR1cm4ibyI9PT1hWzBdJiYibiI9PT1hWzFdJiYiLSI9PT1hWzJdfWZ1bmN0aW9uIG8oYSxiKXt2YXIgYz1iLnN1YnN0cmluZygzKTtyZXR1cm4gZnVuY3Rpb24oYixkLGUpe2Z1bmN0aW9uIGYoKXtlfHwoaD1hLmdldFZhbHVlRnJvbShiKSksaC5hcHBseShiLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZygpe3JldHVybiJ7eyAiK2ErIiB9fSJ9dmFyIGg9YS5nZXRWYWx1ZUZyb20oYik7cmV0dXJuIGQuYWRkRXZlbnRMaXN0ZW5lcihjLGYpLGU/dm9pZCAwOntvcGVuOmcsZGlzY2FyZENoYW5nZXM6ZyxjbG9zZTpmdW5jdGlvbigpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGYpfX19fWZ1bmN0aW9uIHAoKXt9dmFyIHE9T2JqZWN0LmNyZWF0ZShudWxsKTtkLnByb3RvdHlwZT17dmFsdWVGbjpmdW5jdGlvbigpe2lmKCF0aGlzLnZhbHVlRm5fKXt2YXIgYT10aGlzLnZhbHVlO3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oKXtyZXR1cm4gYX19cmV0dXJuIHRoaXMudmFsdWVGbl99fSxlLnByb3RvdHlwZT17dmFsdWVGbjpmdW5jdGlvbigpe2lmKCF0aGlzLnZhbHVlRm5fKXt2YXIgYT0odGhpcy5uYW1lLHRoaXMucGF0aCk7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbihiLGMpe3JldHVybiBjJiZjLmFkZFBhdGgoYixhKSxhLmdldFZhbHVlRnJvbShiKX19cmV0dXJuIHRoaXMudmFsdWVGbl99LHNldFZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucGF0aC5zZXRWYWx1ZUZyb20oYSxiKX19LGYucHJvdG90eXBlPXtnZXQgZnVsbFBhdGgoKXtpZighdGhpcy5mdWxsUGF0aF8pe3ZhciBhPXRoaXMub2JqZWN0IGluc3RhbmNlb2YgZT90aGlzLm9iamVjdC5uYW1lOnRoaXMub2JqZWN0LmZ1bGxQYXRoO3RoaXMuZnVsbFBhdGhfPVBhdGguZ2V0KGErIi4iK3RoaXMucHJvcGVydHkubmFtZSl9cmV0dXJuIHRoaXMuZnVsbFBhdGhffSx2YWx1ZUZuOmZ1bmN0aW9uKCl7aWYoIXRoaXMudmFsdWVGbl8pe3ZhciBhPXRoaXMub2JqZWN0O2lmKHRoaXMuc2ltcGxlUGF0aCl7dmFyIGI9dGhpcy5mdWxsUGF0aDt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGMmJmMuYWRkUGF0aChhLGIpLGIuZ2V0VmFsdWVGcm9tKGEpfX1lbHNlIGlmKHRoaXMucHJvcGVydHkgaW5zdGFuY2VvZiBlKXt2YXIgYj1QYXRoLmdldCh0aGlzLnByb3BlcnR5Lm5hbWUpO3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oYyxkKXt2YXIgZT1hKGMsZCk7cmV0dXJuIGQmJmQuYWRkUGF0aChlLGIpLGIuZ2V0VmFsdWVGcm9tKGUpfX1lbHNle3ZhciBjPXRoaXMucHJvcGVydHk7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbihiLGQpe3ZhciBlPWEoYixkKSxmPWMoYixkKTtyZXR1cm4gZCYmZC5hZGRQYXRoKGUsZiksZT9lW2ZdOnZvaWQgMH19fXJldHVybiB0aGlzLnZhbHVlRm5ffSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc2ltcGxlUGF0aClyZXR1cm4gdGhpcy5mdWxsUGF0aC5zZXRWYWx1ZUZyb20oYSxiKSxiO3ZhciBjPXRoaXMub2JqZWN0KGEpLGQ9dGhpcy5wcm9wZXJ0eSBpbnN0YW5jZW9mIGU/dGhpcy5wcm9wZXJ0eS5uYW1lOnRoaXMucHJvcGVydHkoYSk7cmV0dXJuIGNbZF09Yn19LGcucHJvdG90eXBlPXt0cmFuc2Zvcm06ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1jW3RoaXMubmFtZV0sZz1kO2lmKGYpZz12b2lkIDA7ZWxzZSBpZihmPWdbdGhpcy5uYW1lXSwhZilyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJDYW5ub3QgZmluZCBmaWx0ZXI6ICIrdGhpcy5uYW1lKTtpZihiP2Y9Zi50b01vZGVsOiJmdW5jdGlvbiI9PXR5cGVvZiBmLnRvRE9NJiYoZj1mLnRvRE9NKSwiZnVuY3Rpb24iIT10eXBlb2YgZilyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJObyAiKyhiPyJ0b01vZGVsIjoidG9ET00iKSsiIGZvdW5kIG9uIit0aGlzLm5hbWUpO2Zvcih2YXIgaD1bYV0saj0wO2o8dGhpcy5hcmdzLmxlbmd0aDtqKyspaFtqKzFdPWkodGhpcy5hcmdzW2pdKShkLGUpO3JldHVybiBmLmFwcGx5KGcsaCl9fTt2YXIgcj17IisiOmZ1bmN0aW9uKGEpe3JldHVybithfSwiLSI6ZnVuY3Rpb24oYSl7cmV0dXJuLWF9LCIhIjpmdW5jdGlvbihhKXtyZXR1cm4hYX19LHM9eyIrIjpmdW5jdGlvbihhLGIpe3JldHVybiBhK2J9LCItIjpmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LCIqIjpmdW5jdGlvbihhLGIpe3JldHVybiBhKmJ9LCIvIjpmdW5jdGlvbihhLGIpe3JldHVybiBhL2J9LCIlIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJWJ9LCI8IjpmdW5jdGlvbihhLGIpe3JldHVybiBiPmF9LCI+IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPmJ9LCI8PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj49YX0sIj49IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPj1ifSwiPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PWJ9LCIhPSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9Yn0sIj09PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9LCIhPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPT1ifSwiJiYiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmJ9LCJ8fCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn19O2oucHJvdG90eXBlPXtjcmVhdGVVbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXtpZighclthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj1pKGIpLGZ1bmN0aW9uKGMsZCl7cmV0dXJuIHJbYV0oYihjLGQpKX19LGNyZWF0ZUJpbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiLGMpe2lmKCFzW2FdKXRocm93IEVycm9yKCJEaXNhbGxvd2VkIG9wZXJhdG9yOiAiK2EpO3JldHVybiBiPWkoYiksYz1pKGMpLGZ1bmN0aW9uKGQsZSl7cmV0dXJuIHNbYV0oYihkLGUpLGMoZCxlKSl9fSxjcmVhdGVDb25kaXRpb25hbEV4cHJlc3Npb246ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhPWkoYSksYj1pKGIpLGM9aShjKSxmdW5jdGlvbihkLGUpe3JldHVybiBhKGQsZSk/YihkLGUpOmMoZCxlKX19LGNyZWF0ZUlkZW50aWZpZXI6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGUoYSk7cmV0dXJuIGIudHlwZT0iSWRlbnRpZmllciIsYn0sY3JlYXRlTWVtYmVyRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9bmV3IGYoYixjLGEpO3JldHVybiBkLmR5bmFtaWNEZXBzJiYodGhpcy5keW5hbWljRGVwcz0hMCksZH0sY3JlYXRlTGl0ZXJhbDpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGQoYS52YWx1ZSl9LGNyZWF0ZUFycmF5RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdPWkoYVtiXSk7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Zm9yKHZhciBkPVtdLGU9MDtlPGEubGVuZ3RoO2UrKylkLnB1c2goYVtlXShiLGMpKTtyZXR1cm4gZH19LGNyZWF0ZVByb3BlcnR5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm57a2V5OmIgaW5zdGFuY2VvZiBlP2IubmFtZTpiLnZhbHVlLHZhbHVlOmN9fSxjcmVhdGVPYmplY3RFeHByZXNzaW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udmFsdWU9aShhW2JdLnZhbHVlKTtyZXR1cm4gZnVuY3Rpb24oYixjKXtmb3IodmFyIGQ9e30sZT0wO2U8YS5sZW5ndGg7ZSsrKWRbYVtlXS5rZXldPWFbZV0udmFsdWUoYixjKTtyZXR1cm4gZH19LGNyZWF0ZUZpbHRlcjpmdW5jdGlvbihhLGIpe3RoaXMuZmlsdGVycy5wdXNoKG5ldyBnKGEsYikpfSxjcmVhdGVBc0V4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXt0aGlzLmV4cHJlc3Npb249YSx0aGlzLnNjb3BlSWRlbnQ9Yn0sY3JlYXRlSW5FeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmV4cHJlc3Npb249Yyx0aGlzLnNjb3BlSWRlbnQ9YSx0aGlzLmluZGV4SWRlbnQ9Yn0sY3JlYXRlVG9wTGV2ZWw6ZnVuY3Rpb24oYSl7dGhpcy5leHByZXNzaW9uPWF9LGNyZWF0ZVRoaXNFeHByZXNzaW9uOmh9LGsucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVffSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlX30sZGVsaXZlcjpmdW5jdGlvbigpe30sY2xvc2U6ZnVuY3Rpb24oKXt9fSxsLnByb3RvdHlwZT17Z2V0QmluZGluZzpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe2cuZHluYW1pY0RlcHMmJmYuc3RhcnRSZXNldCgpO3ZhciBjPWcuZ2V0VmFsdWUoYSxnLmR5bmFtaWNEZXBzP2Y6dm9pZCAwLGIpO3JldHVybiBnLmR5bmFtaWNEZXBzJiZmLmZpbmlzaFJlc2V0KCksY31mdW5jdGlvbiBlKGMpe3JldHVybiBnLnNldFZhbHVlKGEsYyxiKSxjfWlmKGMpcmV0dXJuIHRoaXMuZ2V0VmFsdWUoYSx2b2lkIDAsYik7dmFyIGY9bmV3IENvbXBvdW5kT2JzZXJ2ZXI7dGhpcy5nZXRWYWx1ZShhLGYsYik7dmFyIGc9dGhpcztyZXR1cm4gbmV3IE9ic2VydmVyVHJhbnNmb3JtKGYsZCxlLCEwKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1pKHRoaXMuZXhwcmVzc2lvbikoYSxiKSxlPTA7ZTx0aGlzLmZpbHRlcnMubGVuZ3RoO2UrKylkPXRoaXMuZmlsdGVyc1tlXS50cmFuc2Zvcm0oZCwhMSxjLGEsYik7cmV0dXJuIGR9LHNldFZhbHVlOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9dGhpcy5maWx0ZXJzP3RoaXMuZmlsdGVycy5sZW5ndGg6MDtkLS0+MDspYj10aGlzLmZpbHRlcnNbZF0udHJhbnNmb3JtKGIsITAsYyxhKTtyZXR1cm4gdGhpcy5leHByZXNzaW9uLnNldFZhbHVlP3RoaXMuZXhwcmVzc2lvbi5zZXRWYWx1ZShhLGIpOnZvaWQgMH19LHAucHJvdG90eXBlPXtzdHlsZU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSliLnB1c2gobShjKSsiOiAiK2FbY10pO3JldHVybiBiLmpvaW4oIjsgIil9LHRva2VuTGlzdDpmdW5jdGlvbihhKXt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSlhW2NdJiZiLnB1c2goYyk7cmV0dXJuIGIuam9pbigiICIpfSxwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wb2x5bWVyRXhwcmVzc2lvbkluZGV4SWRlbnRfO3JldHVybiBiP2Z1bmN0aW9uKGEsYyl7YS5tb2RlbFtiXT1jfTp2b2lkIDB9LHByZXBhcmVCaW5kaW5nOmZ1bmN0aW9uKGEsYyxkKXtpZihuKGMpKXt2YXIgZT1QYXRoLmdldChhKTtyZXR1cm4gZS52YWxpZD9vKGUsYyk6dm9pZCBjb25zb2xlLmVycm9yKCJvbi0qIGJpbmRpbmdzIG11c3QgYmUgc2ltcGxlIHBhdGggZXhwcmVzc2lvbnMiKX1yZXR1cm4gUGF0aC5nZXQoYSkudmFsaWQ/dm9pZCAwOmIoYSxjLGQsdGhpcyl9LHByZXBhcmVJbnN0YW5jZU1vZGVsOmZ1bmN0aW9uKGEpe3ZhciBiPWEucG9seW1lckV4cHJlc3Npb25TY29wZUlkZW50XztpZihiKXt2YXIgYz1hLnRlbXBsYXRlSW5zdGFuY2U/YS50ZW1wbGF0ZUluc3RhbmNlLm1vZGVsOmEubW9kZWw7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBkPU9iamVjdC5jcmVhdGUoYyk7cmV0dXJuIGRbYl09YSxkfX19fSxhLlBvbHltZXJFeHByZXNzaW9ucz1wLGEuZXhwb3NlR2V0RXhwcmVzc2lvbiYmKGEuZ2V0RXhwcmVzc2lvbl89Yyl9KHRoaXMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtlfHwoZT0hMCxhLmVuZE9mTWljcm90YXNrKGZ1bmN0aW9uKCl7ZT0hMSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwKCJQbGF0Zm9ybS5mbHVzaCgpIiksYS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXBFbmQoKX0pKX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2MudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2QuaW5zZXJ0QmVmb3JlKGMsZC5maXJzdENoaWxkKTt2YXIgZSxmPTEyNTtpZih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiV2ViQ29tcG9uZW50c1JlYWR5IixmdW5jdGlvbigpe2IoKSxPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlfHwoYS5mbHVzaFBvbGw9c2V0SW50ZXJ2YWwoYixmKSl9KSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMmJiFDdXN0b21FbGVtZW50cy51c2VOYXRpdmUpe3ZhciBnPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlO0RvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Zy5jYWxsKHRoaXMsYSxiKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChjKSxjfX1hLmZsdXNoPWJ9KHdpbmRvdy5QbGF0Zm9ybSk7",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 02:23:00 GMT",
                    "Content-Length": "170358",
                    "Date": "Fri, 07 Nov 2014 02:23:00 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}