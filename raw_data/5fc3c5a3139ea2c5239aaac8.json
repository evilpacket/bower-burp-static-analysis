{
    "url": "http://localhost:9999/Jupiterrr/column-view-component/bower_components/platform/platform.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Link manipulation (DOM-based)",
    "issueType": 5246976,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based link manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a navigation target within the current page, such as a clickable link or the submission URL of a form. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the target of links within the response. An attacker may be able to leverage this to perform various attacks, including:<ul><li>Causing the user to redirect to an arbitrary external URL, to facilitate a phishing attack.</li><li>Causing the user to submit sensitive form data to a server controlled by the attacker.</li><li>Causing the user to perform an unintended action within the application, by changing the file or query string associated with a link.</li><li>Bypassing browser anti-XSS defenses by injecting on-site links containing XSS exploits, since browser anti-XSS defenses typically do not operate on on-site links.</li></ul>",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based link manipulation vulnerabilities is not to dynamically set the target URLs of links or forms using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a link target. In general, this is best achieved by using a whitelist of URLs that are permitted link targets, and strictly validating the target against this list before setting the link target.",
    "issueDetail": "The application may be vulnerable to DOM-based link manipulation. Data is read from <b>the 'baseURI' property of a DOM element</b> and written to <b>the 'href' property of a DOM element</b> via the following statement:<ul><li>b.href=document.baseURI,a.head.appendChild(b)</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/Jupiterrr/column-view-component/bower_components/platform/platform.js",
                "path": "/Jupiterrr/column-view-component/bower_components/platform/platform.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9KdXBpdGVycnIvY29sdW1uLXZpZXctY29tcG9uZW50L2Jvd2VyX2NvbXBvbmVudHMvcGxhdGZvcm0vcGxhdGZvcm0uanMgSFRUUC8xLjENCkhvc3Q6IGxvY2FsaG9zdDo5OTk5DQoNCg==",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTU0NTI0DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBUaHUsIDA2IE5vdiAyMDE0IDE1OjU2OjUyIEdNVA0KTGFzdC1Nb2RpZmllZDogVGh1LCAwNiBOb3YgMjAxNCAxNTo1Njo0OCBHTVQNCg0KLyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbjogMC4zLjEKCndpbmRvdy5QbGF0Zm9ybT13aW5kb3cuUGxhdGZvcm18fHt9LHdpbmRvdy5sb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LGZ1bmN0aW9uKGEpe3ZhciBiPWEuZmxhZ3N8fHt9O2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9IiksYVswXSYmKGJbYVswXV09YVsxXXx8ITApfSk7dmFyIGM9ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0W3NyYyo9InBsYXRmb3JtLmpzIl0nKTtpZihjKWZvcih2YXIgZCxlPWMuYXR0cmlidXRlcyxmPTA7ZjxlLmxlbmd0aDtmKyspZD1lW2ZdLCJzcmMiIT09ZC5uYW1lJiYoYltkLm5hbWVdPWQudmFsdWV8fCEwKTtiLmxvZyYmYi5sb2cuc3BsaXQoIiwiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3dpbmRvdy5sb2dGbGFnc1thXT0hMH0pLGIuc2hhZG93PWIuc2hhZG93fHxiLnNoYWRvd2RvbXx8Yi5wb2x5ZmlsbCxiLnNoYWRvdz0ibmF0aXZlIj09PWIuc2hhZG93PyExOmIuc2hhZG93fHwhSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QsYi5zaGFkb3cmJmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInNjcmlwdCIpLmxlbmd0aD4xJiZjb25zb2xlLndhcm4oInBsYXRmb3JtLmpzIGlzIG5vdCB0aGUgZmlyc3Qgc2NyaXB0IG9uIHRoZSBwYWdlLiBTZWUgaHR0cDovL3d3dy5wb2x5bWVyLXByb2plY3Qub3JnL2RvY3Mvc3RhcnQvcGxhdGZvcm0uaHRtbCNzZXR1cCBmb3IgZGV0YWlscy4iKSxiLnJlZ2lzdGVyJiYod2luZG93LkN1c3RvbUVsZW1lbnRzPXdpbmRvdy5DdXN0b21FbGVtZW50c3x8e2ZsYWdzOnt9fSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuZmxhZ3MucmVnaXN0ZXI9Yi5yZWdpc3RlciksYi5pbXBvcnRzJiYod2luZG93LkhUTUxJbXBvcnRzPXdpbmRvdy5IVE1MSW1wb3J0c3x8e2ZsYWdzOnt9fSx3aW5kb3cuSFRNTEltcG9ydHMuZmxhZ3MuaW1wb3J0cz1iLmltcG9ydHMpLGEuZmxhZ3M9Yn0oUGxhdGZvcm0pLCJ1bmRlZmluZWQiPT10eXBlb2YgV2Vha01hcCYmIWZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9RGF0ZS5ub3coKSUxZTksYz1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGIrKyArIl9fIil9O2MucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYixjKXt2YXIgZD1iW3RoaXMubmFtZV07ZCYmZFswXT09PWI/ZFsxXT1jOmEoYix0aGlzLm5hbWUse3ZhbHVlOltiLGNdLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4oYj1hW3RoaXMubmFtZV0pJiZiWzBdPT09YT9iWzFdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX0sd2luZG93LldlYWtNYXA9Y30oKSxmdW5jdGlvbihnbG9iYWwpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkZXRlY3RPYmplY3RPYnNlcnZlKCl7ZnVuY3Rpb24gYShhKXtiPWF9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIE9iamVjdC5vYnNlcnZlfHwiZnVuY3Rpb24iIT10eXBlb2YgQXJyYXkub2JzZXJ2ZSlyZXR1cm4hMTt2YXIgYj1bXSxjPXt9LGQ9W107cmV0dXJuIE9iamVjdC5vYnNlcnZlKGMsYSksQXJyYXkub2JzZXJ2ZShkLGEpLGMuaWQ9MSxjLmlkPTIsZGVsZXRlIGMuaWQsZC5wdXNoKDEsMiksZC5sZW5ndGg9MCxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksNSE9PWIubGVuZ3RoPyExOiJhZGQiIT1iWzBdLnR5cGV8fCJ1cGRhdGUiIT1iWzFdLnR5cGV8fCJkZWxldGUiIT1iWzJdLnR5cGV8fCJzcGxpY2UiIT1iWzNdLnR5cGV8fCJzcGxpY2UiIT1iWzRdLnR5cGU/ITE6KE9iamVjdC51bm9ic2VydmUoYyxhKSxBcnJheS51bm9ic2VydmUoZCxhKSwhMCl9ZnVuY3Rpb24gZGV0ZWN0RXZhbCgpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgY2hyb21lJiZjaHJvbWUuYXBwJiZjaHJvbWUuYXBwLnJ1bnRpbWUpcmV0dXJuITE7dHJ5e3ZhciBhPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7cmV0dXJuIGEoKX1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gaXNJbmRleChhKXtyZXR1cm4rYT09PWE+Pj4wfWZ1bmN0aW9uIHRvTnVtYmVyKGEpe3JldHVybithfWZ1bmN0aW9uIGlzT2JqZWN0KGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGFyZVNhbWVWYWx1ZShhLGIpe3JldHVybiBhPT09Yj8wIT09YXx8MS9hPT09MS9iOm51bWJlcklzTmFOKGEpJiZudW1iZXJJc05hTihiKT8hMDphIT09YSYmYiE9PWJ9ZnVuY3Rpb24gZ2V0UGF0aENoYXJUeXBlKGEpe2lmKHZvaWQgMD09PWEpcmV0dXJuImVvZiI7dmFyIGI9YS5jaGFyQ29kZUF0KDApO3N3aXRjaChiKXtjYXNlIDkxOmNhc2UgOTM6Y2FzZSA0NjpjYXNlIDM0OmNhc2UgMzk6Y2FzZSA0ODpyZXR1cm4gYTtjYXNlIDk1OmNhc2UgMzY6cmV0dXJuImlkZW50IjtjYXNlIDMyOmNhc2UgOTpjYXNlIDEwOmNhc2UgMTM6Y2FzZSAxNjA6Y2FzZSA2NTI3OTpjYXNlIDgyMzI6Y2FzZSA4MjMzOnJldHVybiJ3cyJ9cmV0dXJuIGI+PTk3JiYxMjI+PWJ8fGI+PTY1JiY5MD49Yj8iaWRlbnQiOmI+PTQ5JiY1Nz49Yj8ibnVtYmVyIjoiZWxzZSJ9ZnVuY3Rpb24gbm9vcCgpe31mdW5jdGlvbiBwYXJzZVBhdGgoYSl7ZnVuY3Rpb24gYigpe2lmKCEoaz49YS5sZW5ndGgpKXt2YXIgYj1hW2srMV07cmV0dXJuImluU2luZ2xlUXVvdGUiPT1sJiYiJyI9PWJ8fCJpbkRvdWJsZVF1b3RlIj09bCYmJyInPT1iPyhrKyssZD1iLG0uYXBwZW5kKCksITApOnZvaWQgMH19Zm9yKHZhciBjLGQsZSxmLGcsaCxpLGo9W10saz0tMSxsPSJiZWZvcmVQYXRoIixtPXtwdXNoOmZ1bmN0aW9uKCl7dm9pZCAwIT09ZSYmKGoucHVzaChlKSxlPXZvaWQgMCl9LGFwcGVuZDpmdW5jdGlvbigpe3ZvaWQgMD09PWU/ZT1kOmUrPWR9fTtsOylpZihrKyssYz1hW2tdLCJcXCIhPWN8fCFiKGwpKXtpZihmPWdldFBhdGhDaGFyVHlwZShjKSxpPXBhdGhTdGF0ZU1hY2hpbmVbbF0sZz1pW2ZdfHxpWyJlbHNlIl18fCJlcnJvciIsImVycm9yIj09ZylyZXR1cm47aWYobD1nWzBdLGg9bVtnWzFdXXx8bm9vcCxkPXZvaWQgMD09PWdbMl0/YzpnWzJdLGgoKSwiYWZ0ZXJQYXRoIj09PWwpcmV0dXJuIGp9fWZ1bmN0aW9uIGlzSWRlbnQoYSl7cmV0dXJuIGlkZW50UmVnRXhwLnRlc3QoYSl9ZnVuY3Rpb24gUGF0aChhLGIpe2lmKGIhPT1jb25zdHJ1Y3RvcklzUHJpdmF0ZSl0aHJvdyBFcnJvcigiVXNlIFBhdGguZ2V0IHRvIHJldHJpZXZlIHBhdGggb2JqZWN0cyIpO2EubGVuZ3RoJiZBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLGEuc2xpY2UoKSksaGFzRXZhbCYmdGhpcy5sZW5ndGgmJih0aGlzLmdldFZhbHVlRnJvbT10aGlzLmNvbXBpbGVkR2V0VmFsdWVGcm9tRm4oKSl9ZnVuY3Rpb24gZ2V0UGF0aChhKXtpZihhIGluc3RhbmNlb2YgUGF0aClyZXR1cm4gYTtpZigobnVsbD09YXx8MD09YS5sZW5ndGgpJiYoYT0iIiksInN0cmluZyIhPXR5cGVvZiBhKXtpZihpc0luZGV4KGEubGVuZ3RoKSlyZXR1cm4gbmV3IFBhdGgoYSxjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7YT1TdHJpbmcoYSl9dmFyIGI9cGF0aENhY2hlW2FdO2lmKGIpcmV0dXJuIGI7dmFyIGM9cGFyc2VQYXRoKGEpO2lmKCFjKXJldHVybiBpbnZhbGlkUGF0aDt2YXIgYj1uZXcgUGF0aChjLGNvbnN0cnVjdG9ySXNQcml2YXRlKTtyZXR1cm4gcGF0aENhY2hlW2FdPWIsYn1mdW5jdGlvbiBmb3JtYXRBY2Nlc3NvcihhKXtyZXR1cm4gaXNJbmRleChhKT8iWyIrYSsiXSI6J1siJythLnJlcGxhY2UoLyIvZywnXFwiJykrJyJdJ31mdW5jdGlvbiBkaXJ0eUNoZWNrKGEpe2Zvcih2YXIgYj0wO01BWF9ESVJUWV9DSEVDS19DWUNMRVM+YiYmYS5jaGVja18oKTspYisrO3JldHVybiBnbG9iYWwudGVzdGluZ0V4cG9zZUN5Y2xlQ291bnQmJihnbG9iYWwuZGlydHlDaGVja0N5Y2xlQ291bnQ9YiksYj4wfWZ1bmN0aW9uIG9iamVjdElzRW1wdHkoYSl7Zm9yKHZhciBiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gZGlmZklzRW1wdHkoYSl7cmV0dXJuIG9iamVjdElzRW1wdHkoYS5hZGRlZCkmJm9iamVjdElzRW1wdHkoYS5yZW1vdmVkKSYmb2JqZWN0SXNFbXB0eShhLmNoYW5nZWQpfWZ1bmN0aW9uIGRpZmZPYmplY3RGcm9tT2xkT2JqZWN0KGEsYil7dmFyIGM9e30sZD17fSxlPXt9O2Zvcih2YXIgZiBpbiBiKXt2YXIgZz1hW2ZdOyh2b2lkIDA9PT1nfHxnIT09YltmXSkmJihmIGluIGE/ZyE9PWJbZl0mJihlW2ZdPWcpOmRbZl09dm9pZCAwKX1mb3IodmFyIGYgaW4gYSlmIGluIGJ8fChjW2ZdPWFbZl0pO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiZhLmxlbmd0aCE9PWIubGVuZ3RoJiYoZS5sZW5ndGg9YS5sZW5ndGgpLHthZGRlZDpjLHJlbW92ZWQ6ZCxjaGFuZ2VkOmV9fWZ1bmN0aW9uIHJ1bkVPTVRhc2tzKCl7aWYoIWVvbVRhc2tzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGE9MDthPGVvbVRhc2tzLmxlbmd0aDthKyspZW9tVGFza3NbYV0oKTtyZXR1cm4gZW9tVGFza3MubGVuZ3RoPTAsITB9ZnVuY3Rpb24gbmV3T2JzZXJ2ZWRPYmplY3QoKXtmdW5jdGlvbiBhKGEpe2ImJmIuc3RhdGVfPT09T1BFTkVEJiYhZCYmYi5jaGVja18oYSl9dmFyIGIsYyxkPSExLGU9ITA7cmV0dXJue29wZW46ZnVuY3Rpb24oYyl7aWYoYil0aHJvdyBFcnJvcigiT2JzZXJ2ZWRPYmplY3QgaW4gdXNlIik7ZXx8T2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGI9YyxlPSExfSxvYnNlcnZlOmZ1bmN0aW9uKGIsZCl7Yz1iLGQ/QXJyYXkub2JzZXJ2ZShjLGEpOk9iamVjdC5vYnNlcnZlKGMsYSl9LGRlbGl2ZXI6ZnVuY3Rpb24oYil7ZD1iLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxkPSExfSxjbG9zZTpmdW5jdGlvbigpe2I9dm9pZCAwLE9iamVjdC51bm9ic2VydmUoYyxhKSxvYnNlcnZlZE9iamVjdENhY2hlLnB1c2godGhpcyl9fX1mdW5jdGlvbiBnZXRPYnNlcnZlZE9iamVjdChhLGIsYyl7dmFyIGQ9b2JzZXJ2ZWRPYmplY3RDYWNoZS5wb3AoKXx8bmV3T2JzZXJ2ZWRPYmplY3QoKTtyZXR1cm4gZC5vcGVuKGEpLGQub2JzZXJ2ZShiLGMpLGR9ZnVuY3Rpb24gbmV3T2JzZXJ2ZWRTZXQoKXtmdW5jdGlvbiBhKGIsZil7YiYmKGI9PT1kJiYoZVtmXT0hMCksaC5pbmRleE9mKGIpPDAmJihoLnB1c2goYiksT2JqZWN0Lm9ic2VydmUoYixjKSksYShPYmplY3QuZ2V0UHJvdG90eXBlT2YoYiksZikpfWZ1bmN0aW9uIGIoYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07aWYoYy5vYmplY3QhPT1kfHxlW2MubmFtZV18fCJzZXRQcm90b3R5cGUiPT09Yy50eXBlKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIGMoYyl7aWYoIWIoYykpe2Zvcih2YXIgZCxlPTA7ZTxnLmxlbmd0aDtlKyspZD1nW2VdLGQuc3RhdGVfPT1PUEVORUQmJmQuaXRlcmF0ZU9iamVjdHNfKGEpO2Zvcih2YXIgZT0wO2U8Zy5sZW5ndGg7ZSsrKWQ9Z1tlXSxkLnN0YXRlXz09T1BFTkVEJiZkLmNoZWNrXygpfX12YXIgZCxlLGY9MCxnPVtdLGg9W10saT17b2JqZWN0OnZvaWQgMCxvYmplY3RzOmgsb3BlbjpmdW5jdGlvbihiLGMpe2R8fChkPWMsZT17fSksZy5wdXNoKGIpLGYrKyxiLml0ZXJhdGVPYmplY3RzXyhhKX0sY2xvc2U6ZnVuY3Rpb24oKXtpZihmLS0sIShmPjApKXtmb3IodmFyIGE9MDthPGgubGVuZ3RoO2ErKylPYmplY3QudW5vYnNlcnZlKGhbYV0sYyksT2JzZXJ2ZXIudW5vYnNlcnZlZENvdW50Kys7Zy5sZW5ndGg9MCxoLmxlbmd0aD0wLGQ9dm9pZCAwLGU9dm9pZCAwLG9ic2VydmVkU2V0Q2FjaGUucHVzaCh0aGlzKX19fTtyZXR1cm4gaX1mdW5jdGlvbiBnZXRPYnNlcnZlZFNldChhLGIpe3JldHVybiBsYXN0T2JzZXJ2ZWRTZXQmJmxhc3RPYnNlcnZlZFNldC5vYmplY3Q9PT1ifHwobGFzdE9ic2VydmVkU2V0PW9ic2VydmVkU2V0Q2FjaGUucG9wKCl8fG5ld09ic2VydmVkU2V0KCksbGFzdE9ic2VydmVkU2V0Lm9iamVjdD1iKSxsYXN0T2JzZXJ2ZWRTZXQub3BlbihhLGIpLGxhc3RPYnNlcnZlZFNldH1mdW5jdGlvbiBPYnNlcnZlcigpe3RoaXMuc3RhdGVfPVVOT1BFTkVELHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5pZF89bmV4dE9ic2VydmVySWQrK31mdW5jdGlvbiBhZGRUb0FsbChhKXtPYnNlcnZlci5fYWxsT2JzZXJ2ZXJzQ291bnQrKyxjb2xsZWN0T2JzZXJ2ZXJzJiZhbGxPYnNlcnZlcnMucHVzaChhKX1mdW5jdGlvbiByZW1vdmVGcm9tQWxsKCl7T2JzZXJ2ZXIuX2FsbE9ic2VydmVyc0NvdW50LS19ZnVuY3Rpb24gT2JqZWN0T2JzZXJ2ZXIoYSl7T2JzZXJ2ZXIuY2FsbCh0aGlzKSx0aGlzLnZhbHVlXz1hLHRoaXMub2xkT2JqZWN0Xz12b2lkIDB9ZnVuY3Rpb24gQXJyYXlPYnNlcnZlcihhKXtpZighQXJyYXkuaXNBcnJheShhKSl0aHJvdyBFcnJvcigiUHJvdmlkZWQgb2JqZWN0IGlzIG5vdCBhbiBBcnJheSIpO09iamVjdE9ic2VydmVyLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBQYXRoT2JzZXJ2ZXIoYSxiKXtPYnNlcnZlci5jYWxsKHRoaXMpLHRoaXMub2JqZWN0Xz1hLHRoaXMucGF0aF89Z2V0UGF0aChiKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDB9ZnVuY3Rpb24gQ29tcG91bmRPYnNlcnZlcihhKXtPYnNlcnZlci5jYWxsKHRoaXMpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl89YSx0aGlzLnZhbHVlXz1bXSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy5vYnNlcnZlZF89W119ZnVuY3Rpb24gaWRlbnRGbihhKXtyZXR1cm4gYX1mdW5jdGlvbiBPYnNlcnZlclRyYW5zZm9ybShhLGIsYyxkKXt0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5vYnNlcnZhYmxlXz1hLHRoaXMuZ2V0VmFsdWVGbl89Ynx8aWRlbnRGbix0aGlzLnNldFZhbHVlRm5fPWN8fGlkZW50Rm4sdGhpcy5kb250UGFzc1Rocm91Z2hTZXRfPWR9ZnVuY3Rpb24gbm90aWZ5KGEsYixjLGQpe2lmKCFhcmVTYW1lVmFsdWUoYyxkKSYmKCJmdW5jdGlvbiI9PXR5cGVvZiBhLnByb3BlcnR5Q2hhbmdlZF8mJmEucHJvcGVydHlDaGFuZ2VkXyhiLGMsZCksaGFzT2JzZXJ2ZSkpe3ZhciBlPWEubm90aWZpZXJfO2V8fChlPWEubm90aWZpZXJfPU9iamVjdC5nZXROb3RpZmllcihhKSksdXBkYXRlUmVjb3JkLm9iamVjdD1hLHVwZGF0ZVJlY29yZC5uYW1lPWIsdXBkYXRlUmVjb3JkLm9sZFZhbHVlPWQsZS5ub3RpZnkodXBkYXRlUmVjb3JkKX19ZnVuY3Rpb24gZGlmZk9iamVjdEZyb21DaGFuZ2VSZWNvcmRzKGEsYixjKXtmb3IodmFyIGQ9e30sZT17fSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07ZXhwZWN0ZWRSZWNvcmRUeXBlc1tnLnR5cGVdPyhnLm5hbWUgaW4gY3x8KGNbZy5uYW1lXT1nLm9sZFZhbHVlKSwidXBkYXRlIiE9Zy50eXBlJiYoImFkZCIhPWcudHlwZT9nLm5hbWUgaW4gZD8oZGVsZXRlIGRbZy5uYW1lXSxkZWxldGUgY1tnLm5hbWVdKTplW2cubmFtZV09ITA6Zy5uYW1lIGluIGU/ZGVsZXRlIGVbZy5uYW1lXTpkW2cubmFtZV09ITApKTooY29uc29sZS5lcnJvcigiVW5rbm93biBjaGFuZ2VSZWNvcmQgdHlwZTogIitnLnR5cGUpLGNvbnNvbGUuZXJyb3IoZykpfWZvcih2YXIgaCBpbiBkKWRbaF09YVtoXTtmb3IodmFyIGggaW4gZSllW2hdPXZvaWQgMDt2YXIgaT17fTtmb3IodmFyIGggaW4gYylpZighKGggaW4gZHx8aCBpbiBlKSl7dmFyIGo9YVtoXTtjW2hdIT09aiYmKGlbaF09ail9cmV0dXJue2FkZGVkOmQscmVtb3ZlZDplLGNoYW5nZWQ6aX19ZnVuY3Rpb24gbmV3U3BsaWNlKGEsYixjKXtyZXR1cm57aW5kZXg6YSxyZW1vdmVkOmIsYWRkZWRDb3VudDpjfX1mdW5jdGlvbiBBcnJheVNwbGljZSgpe31mdW5jdGlvbiBjYWxjU3BsaWNlcyhhLGIsYyxkLGUsZil7cmV0dXJuIGFycmF5U3BsaWNlLmNhbGNTcGxpY2VzKGEsYixjLGQsZSxmKX1mdW5jdGlvbiBpbnRlcnNlY3QoYSxiLGMsZCl7cmV0dXJuIGM+Ynx8YT5kPy0xOmI9PWN8fGQ9PWE/MDpjPmE/ZD5iP2ItYzpkLWM6Yj5kP2QtYTpiLWF9ZnVuY3Rpb24gbWVyZ2VTcGxpY2UoYSxiLGMsZCl7Zm9yKHZhciBlPW5ld1NwbGljZShiLGMsZCksZj0hMSxnPTAsaD0wO2g8YS5sZW5ndGg7aCsrKXt2YXIgaT1hW2hdO2lmKGkuaW5kZXgrPWcsIWYpe3ZhciBqPWludGVyc2VjdChlLmluZGV4LGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aCxpLmluZGV4LGkuaW5kZXgraS5hZGRlZENvdW50KTtpZihqPj0wKXthLnNwbGljZShoLDEpLGgtLSxnLT1pLmFkZGVkQ291bnQtaS5yZW1vdmVkLmxlbmd0aCxlLmFkZGVkQ291bnQrPWkuYWRkZWRDb3VudC1qO3ZhciBrPWUucmVtb3ZlZC5sZW5ndGgraS5yZW1vdmVkLmxlbmd0aC1qO2lmKGUuYWRkZWRDb3VudHx8ayl7dmFyIGM9aS5yZW1vdmVkO2lmKGUuaW5kZXg8aS5pbmRleCl7dmFyIGw9ZS5yZW1vdmVkLnNsaWNlKDAsaS5pbmRleC1lLmluZGV4KTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShsLGMpLGM9bH1pZihlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGg+aS5pbmRleCtpLmFkZGVkQ291bnQpe3ZhciBtPWUucmVtb3ZlZC5zbGljZShpLmluZGV4K2kuYWRkZWRDb3VudC1lLmluZGV4KTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjLG0pfWUucmVtb3ZlZD1jLGkuaW5kZXg8ZS5pbmRleCYmKGUuaW5kZXg9aS5pbmRleCl9ZWxzZSBmPSEwfWVsc2UgaWYoZS5pbmRleDxpLmluZGV4KXtmPSEwLGEuc3BsaWNlKGgsMCxlKSxoKys7dmFyIG49ZS5hZGRlZENvdW50LWUucmVtb3ZlZC5sZW5ndGg7aS5pbmRleCs9bixnKz1ufX19Znx8YS5wdXNoKGUpfWZ1bmN0aW9uIGNyZWF0ZUluaXRpYWxTcGxpY2VzKGEsYil7Zm9yKHZhciBjPVtdLGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGU9YltkXTtzd2l0Y2goZS50eXBlKXtjYXNlInNwbGljZSI6bWVyZ2VTcGxpY2UoYyxlLmluZGV4LGUucmVtb3ZlZC5zbGljZSgpLGUuYWRkZWRDb3VudCk7YnJlYWs7Y2FzZSJhZGQiOmNhc2UidXBkYXRlIjpjYXNlImRlbGV0ZSI6aWYoIWlzSW5kZXgoZS5uYW1lKSljb250aW51ZTt2YXIgZj10b051bWJlcihlLm5hbWUpO2lmKDA+Ziljb250aW51ZTttZXJnZVNwbGljZShjLGYsW2Uub2xkVmFsdWVdLDEpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiVW5leHBlY3RlZCByZWNvcmQgdHlwZTogIitKU09OLnN0cmluZ2lmeShlKSl9fXJldHVybiBjfWZ1bmN0aW9uIHByb2plY3RBcnJheVNwbGljZXMoYSxiKXt2YXIgYz1bXTtyZXR1cm4gY3JlYXRlSW5pdGlhbFNwbGljZXMoYSxiKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3JldHVybiAxPT1iLmFkZGVkQ291bnQmJjE9PWIucmVtb3ZlZC5sZW5ndGg/dm9pZChiLnJlbW92ZWRbMF0hPT1hW2IuaW5kZXhdJiZjLnB1c2goYikpOnZvaWQoYz1jLmNvbmNhdChjYWxjU3BsaWNlcyhhLGIuaW5kZXgsYi5pbmRleCtiLmFkZGVkQ291bnQsYi5yZW1vdmVkLDAsYi5yZW1vdmVkLmxlbmd0aCkpKX0pLGN9dmFyIGhhc09ic2VydmU9ZGV0ZWN0T2JqZWN0T2JzZXJ2ZSgpLGhhc0V2YWw9ZGV0ZWN0RXZhbCgpLG51bWJlcklzTmFOPWdsb2JhbC5OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGEpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYSYmZ2xvYmFsLmlzTmFOKGEpfSxjcmVhdGVPYmplY3Q9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LGlkZW50U3RhcnQ9IlskX2EtekEtWl0iLGlkZW50UGFydD0iWyRfYS16QS1aMC05XSIsaWRlbnRSZWdFeHA9bmV3IFJlZ0V4cCgiXiIraWRlbnRTdGFydCsiKyIraWRlbnRQYXJ0KyIqJCIpLHBhdGhTdGF0ZU1hY2hpbmU9e2JlZm9yZVBhdGg6e3dzOlsiYmVmb3JlUGF0aCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdLCJbIjpbImJlZm9yZUVsZW1lbnQiXSxlb2Y6WyJhZnRlclBhdGgiXX0saW5QYXRoOnt3czpbImluUGF0aCJdLCIuIjpbImJlZm9yZUlkZW50Il0sIlsiOlsiYmVmb3JlRWxlbWVudCJdLGVvZjpbImFmdGVyUGF0aCJdfSxiZWZvcmVJZGVudDp7d3M6WyJiZWZvcmVJZGVudCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdfSxpbklkZW50OntpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXSwwOlsiaW5JZGVudCIsImFwcGVuZCJdLG51bWJlcjpbImluSWRlbnQiLCJhcHBlbmQiXSx3czpbImluUGF0aCIsInB1c2giXSwiLiI6WyJiZWZvcmVJZGVudCIsInB1c2giXSwiWyI6WyJiZWZvcmVFbGVtZW50IiwicHVzaCJdLGVvZjpbImFmdGVyUGF0aCIsInB1c2giXX0sYmVmb3JlRWxlbWVudDp7d3M6WyJiZWZvcmVFbGVtZW50Il0sMDpbImFmdGVyWmVybyIsImFwcGVuZCJdLG51bWJlcjpbImluSW5kZXgiLCJhcHBlbmQiXSwiJyI6WyJpblNpbmdsZVF1b3RlIiwiYXBwZW5kIiwiIl0sJyInOlsiaW5Eb3VibGVRdW90ZSIsImFwcGVuZCIsIiJdfSxhZnRlclplcm86e3dzOlsiYWZ0ZXJFbGVtZW50IiwicHVzaCJdLCJdIjpbImluUGF0aCIsInB1c2giXX0saW5JbmRleDp7MDpbImluSW5kZXgiLCJhcHBlbmQiXSxudW1iZXI6WyJpbkluZGV4IiwiYXBwZW5kIl0sd3M6WyJhZnRlckVsZW1lbnQiXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19LGluU2luZ2xlUXVvdGU6eyInIjpbImFmdGVyRWxlbWVudCJdLGVvZjpbImVycm9yIl0sImVsc2UiOlsiaW5TaW5nbGVRdW90ZSIsImFwcGVuZCJdfSxpbkRvdWJsZVF1b3RlOnsnIic6WyJhZnRlckVsZW1lbnQiXSxlb2Y6WyJlcnJvciJdLCJlbHNlIjpbImluRG91YmxlUXVvdGUiLCJhcHBlbmQiXX0sYWZ0ZXJFbGVtZW50Ont3czpbImFmdGVyRWxlbWVudCJdLCJdIjpbImluUGF0aCIsInB1c2giXX19LGNvbnN0cnVjdG9ySXNQcml2YXRlPXt9LHBhdGhDYWNoZT17fTtQYXRoLmdldD1nZXRQYXRoLFBhdGgucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOltdLHZhbGlkOiEwLHRvU3RyaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPSIiLGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7dmFyIGM9dGhpc1tiXTthKz1pc0lkZW50KGMpP2I/Ii4iK2M6Yzpmb3JtYXRBY2Nlc3NvcihjKX1yZXR1cm4gYX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZihudWxsPT1hKXJldHVybjthPWFbdGhpc1tiXV19cmV0dXJuIGF9LGl0ZXJhdGVPYmplY3RzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKGMmJihhPWFbdGhpc1tjLTFdXSksIWlzT2JqZWN0KGEpKXJldHVybjtiKGEsdGhpc1swXSl9fSxjb21waWxlZEdldFZhbHVlRnJvbUZuOmZ1bmN0aW9uKCl7dmFyIGE9IiIsYj0ib2JqIjthKz0iaWYgKG9iaiAhPSBudWxsIjtmb3IodmFyIGMsZD0wO2Q8dGhpcy5sZW5ndGgtMTtkKyspYz10aGlzW2RdLGIrPWlzSWRlbnQoYyk/Ii4iK2M6Zm9ybWF0QWNjZXNzb3IoYyksYSs9IiAmJlxuICAgICAiK2IrIiAhPSBudWxsIjthKz0iKVxuIjt2YXIgYz10aGlzW2RdO3JldHVybiBiKz1pc0lkZW50KGMpPyIuIitjOmZvcm1hdEFjY2Vzc29yKGMpLGErPSIgIHJldHVybiAiK2IrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixhKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKCFpc09iamVjdChhKSlyZXR1cm4hMTthPWFbdGhpc1tjXV19cmV0dXJuIGlzT2JqZWN0KGEpPyhhW3RoaXNbY11dPWIsITApOiExfX0pO3ZhciBpbnZhbGlkUGF0aD1uZXcgUGF0aCgiIixjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7aW52YWxpZFBhdGgudmFsaWQ9ITEsaW52YWxpZFBhdGguZ2V0VmFsdWVGcm9tPWludmFsaWRQYXRoLnNldFZhbHVlRnJvbT1mdW5jdGlvbigpe307dmFyIE1BWF9ESVJUWV9DSEVDS19DWUNMRVM9MWUzLGVvbVRhc2tzPVtdLHJ1bkVPTT1oYXNPYnNlcnZlP2Z1bmN0aW9uKCl7dmFyIGE9e3BpbmdQb25nOiEwfSxiPSExO3JldHVybiBPYmplY3Qub2JzZXJ2ZShhLGZ1bmN0aW9uKCl7cnVuRU9NVGFza3MoKSxiPSExfSksZnVuY3Rpb24oYyl7ZW9tVGFza3MucHVzaChjKSxifHwoYj0hMCxhLnBpbmdQb25nPSFhLnBpbmdQb25nKX19KCk6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZW9tVGFza3MucHVzaChhKX19KCksb2JzZXJ2ZWRPYmplY3RDYWNoZT1bXSxvYnNlcnZlZFNldENhY2hlPVtdLGxhc3RPYnNlcnZlZFNldCxVTk9QRU5FRD0wLE9QRU5FRD0xLENMT1NFRD0yLFJFU0VUVElORz0zLG5leHRPYnNlcnZlcklkPTE7T2JzZXJ2ZXIucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPVVOT1BFTkVEKXRocm93IEVycm9yKCJPYnNlcnZlciBoYXMgYWxyZWFkeSBiZWVuIG9wZW5lZC4iKTtyZXR1cm4gYWRkVG9BbGwodGhpcyksdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLmNvbm5lY3RfKCksdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMudmFsdWVffSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJihyZW1vdmVGcm9tQWxsKHRoaXMpLHRoaXMuZGlzY29ubmVjdF8oKSx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy5zdGF0ZV89Q0xPU0VEKX0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJmRpcnR5Q2hlY2sodGhpcyl9LHJlcG9ydF86ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuY2FsbGJhY2tfLmFwcGx5KHRoaXMudGFyZ2V0XyxhKX1jYXRjaChiKXtPYnNlcnZlci5fZXJyb3JUaHJvd25EdXJpbmdDYWxsYmFjaz0hMCxjb25zb2xlLmVycm9yKCJFeGNlcHRpb24gY2F1Z2h0IGR1cmluZyBvYnNlcnZlciBjYWxsYmFjazogIisoYi5zdGFja3x8YikpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja18odm9pZCAwLCEwKSx0aGlzLnZhbHVlX319O3ZhciBjb2xsZWN0T2JzZXJ2ZXJzPSFoYXNPYnNlcnZlLGFsbE9ic2VydmVycztPYnNlcnZlci5fYWxsT2JzZXJ2ZXJzQ291bnQ9MCxjb2xsZWN0T2JzZXJ2ZXJzJiYoYWxsT2JzZXJ2ZXJzPVtdKTt2YXIgcnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITEsaGFzRGVidWdGb3JjZUZ1bGxEZWxpdmVyeT1oYXNPYnNlcnZlJiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gZXZhbCgiJVJ1bk1pY3JvdGFza3MoKSIpLCEwfWNhdGNoKGV4KXtyZXR1cm4hMX19KCk7Z2xvYmFsLlBsYXRmb3JtPWdsb2JhbC5QbGF0Zm9ybXx8e30sZ2xvYmFsLlBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50PWZ1bmN0aW9uKCl7aWYoIXJ1bm5pbmdNaWNyb3Rhc2tDaGVja3BvaW50KXtpZihoYXNEZWJ1Z0ZvcmNlRnVsbERlbGl2ZXJ5KXJldHVybiB2b2lkIGV2YWwoIiVSdW5NaWNyb3Rhc2tzKCkiKTtpZihjb2xsZWN0T2JzZXJ2ZXJzKXtydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludD0hMDt2YXIgY3ljbGVzPTAsYW55Q2hhbmdlZCx0b0NoZWNrO2Rve2N5Y2xlcysrLHRvQ2hlY2s9YWxsT2JzZXJ2ZXJzLGFsbE9ic2VydmVycz1bXSxhbnlDaGFuZ2VkPSExO2Zvcih2YXIgaT0wO2k8dG9DaGVjay5sZW5ndGg7aSsrKXt2YXIgb2JzZXJ2ZXI9dG9DaGVja1tpXTtvYnNlcnZlci5zdGF0ZV89PU9QRU5FRCYmKG9ic2VydmVyLmNoZWNrXygpJiYoYW55Q2hhbmdlZD0hMCksYWxsT2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpKX1ydW5FT01UYXNrcygpJiYoYW55Q2hhbmdlZD0hMCl9d2hpbGUoTUFYX0RJUlRZX0NIRUNLX0NZQ0xFUz5jeWNsZXMmJmFueUNoYW5nZWQpO2dsb2JhbC50ZXN0aW5nRXhwb3NlQ3ljbGVDb3VudCYmKGdsb2JhbC5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1jeWNsZXMpLHJ1bm5pbmdNaWNyb3Rhc2tDaGVja3BvaW50PSExfX19LGNvbGxlY3RPYnNlcnZlcnMmJihnbG9iYWwuUGxhdGZvcm0uY2xlYXJPYnNlcnZlcnM9ZnVuY3Rpb24oKXthbGxPYnNlcnZlcnM9W119KSxPYmplY3RPYnNlcnZlci5wcm90b3R5cGU9Y3JlYXRlT2JqZWN0KHtfX3Byb3RvX186T2JzZXJ2ZXIucHJvdG90eXBlLGFycmF5T2JzZXJ2ZTohMSxjb25uZWN0XzpmdW5jdGlvbigpe2hhc09ic2VydmU/dGhpcy5kaXJlY3RPYnNlcnZlcl89Z2V0T2JzZXJ2ZWRPYmplY3QodGhpcyx0aGlzLnZhbHVlXyx0aGlzLmFycmF5T2JzZXJ2ZSk6dGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXyl9LGNvcHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkuaXNBcnJheShhKT9bXTp7fTtmb3IodmFyIGMgaW4gYSliW2NdPWFbY107cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJihiLmxlbmd0aD1hLmxlbmd0aCksYn0sY2hlY2tfOmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoaGFzT2JzZXJ2ZSl7aWYoIWEpcmV0dXJuITE7Yz17fSxiPWRpZmZPYmplY3RGcm9tQ2hhbmdlUmVjb3Jkcyh0aGlzLnZhbHVlXyxhLGMpfWVsc2UgYz10aGlzLm9sZE9iamVjdF8sYj1kaWZmT2JqZWN0RnJvbU9sZE9iamVjdCh0aGlzLnZhbHVlXyx0aGlzLm9sZE9iamVjdF8pO3JldHVybiBkaWZmSXNFbXB0eShiKT8hMTooaGFzT2JzZXJ2ZXx8KHRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pKSx0aGlzLnJlcG9ydF8oW2IuYWRkZWR8fHt9LGIucmVtb3ZlZHx8e30sYi5jaGFuZ2VkfHx7fSxmdW5jdGlvbihhKXtyZXR1cm4gY1thXX1dKSwhMCl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7aGFzT2JzZXJ2ZT8odGhpcy5kaXJlY3RPYnNlcnZlcl8uY2xvc2UoKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApOnRoaXMub2xkT2JqZWN0Xz12b2lkIDB9LGRlbGl2ZXI6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09T1BFTkVEJiYoaGFzT2JzZXJ2ZT90aGlzLmRpcmVjdE9ic2VydmVyXy5kZWxpdmVyKCExKTpkaXJ0eUNoZWNrKHRoaXMpKX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXJlY3RPYnNlcnZlcl8/dGhpcy5kaXJlY3RPYnNlcnZlcl8uZGVsaXZlcighMCk6dGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXyksdGhpcy52YWx1ZV99fSksQXJyYXlPYnNlcnZlci5wcm90b3R5cGU9Y3JlYXRlT2JqZWN0KHtfX3Byb3RvX186T2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlLGFycmF5T2JzZXJ2ZTohMCxjb3B5T2JqZWN0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnNsaWNlKCl9LGNoZWNrXzpmdW5jdGlvbihhKXt2YXIgYjtpZihoYXNPYnNlcnZlKXtpZighYSlyZXR1cm4hMTtiPXByb2plY3RBcnJheVNwbGljZXModGhpcy52YWx1ZV8sYSl9ZWxzZSBiPWNhbGNTcGxpY2VzKHRoaXMudmFsdWVfLDAsdGhpcy52YWx1ZV8ubGVuZ3RoLHRoaXMub2xkT2JqZWN0XywwLHRoaXMub2xkT2JqZWN0Xy5sZW5ndGgpO3JldHVybiBiJiZiLmxlbmd0aD8oaGFzT2JzZXJ2ZXx8KHRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pKSx0aGlzLnJlcG9ydF8oW2JdKSwhMCk6ITF9fSksQXJyYXlPYnNlcnZlci5hcHBseVNwbGljZXM9ZnVuY3Rpb24oYSxiLGMpe2MuZm9yRWFjaChmdW5jdGlvbihjKXtmb3IodmFyIGQ9W2MuaW5kZXgsYy5yZW1vdmVkLmxlbmd0aF0sZT1jLmluZGV4O2U8Yy5pbmRleCtjLmFkZGVkQ291bnQ7KWQucHVzaChiW2VdKSxlKys7QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhLGQpfSl9LFBhdGhPYnNlcnZlci5wcm90b3R5cGU9Y3JlYXRlT2JqZWN0KHtfX3Byb3RvX186T2JzZXJ2ZXIucHJvdG90eXBlLGdldCBwYXRoKCl7cmV0dXJuIHRoaXMucGF0aF99LGNvbm5lY3RfOmZ1bmN0aW9uKCl7aGFzT2JzZXJ2ZSYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPWdldE9ic2VydmVkU2V0KHRoaXMsdGhpcy5vYmplY3RfKSksdGhpcy5jaGVja18odm9pZCAwLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXt0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXy5pdGVyYXRlT2JqZWN0cyh0aGlzLm9iamVjdF8sYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMudmFsdWVfO3JldHVybiB0aGlzLnZhbHVlXz10aGlzLnBhdGhfLmdldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8pLGJ8fGFyZVNhbWVWYWx1ZSh0aGlzLnZhbHVlXyxjKT8hMToodGhpcy5yZXBvcnRfKFt0aGlzLnZhbHVlXyxjLHRoaXNdKSwhMCl9LHNldFZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMucGF0aF8mJnRoaXMucGF0aF8uc2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0XyxhKX19KTt2YXIgb2JzZXJ2ZXJTZW50aW5lbD17fTtDb21wb3VuZE9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYnNlcnZlci5wcm90b3R5cGUsY29ubmVjdF86ZnVuY3Rpb24oKXtpZihoYXNPYnNlcnZlKXtmb3IodmFyIGEsYj0hMSxjPTA7Yzx0aGlzLm9ic2VydmVkXy5sZW5ndGg7Yys9MilpZihhPXRoaXMub2JzZXJ2ZWRfW2NdLGEhPT1vYnNlcnZlclNlbnRpbmVsKXtiPSEwO2JyZWFrfWImJih0aGlzLmRpcmVjdE9ic2VydmVyXz1nZXRPYnNlcnZlZFNldCh0aGlzLGEpKX10aGlzLmNoZWNrXyh2b2lkIDAsIXRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl8pfSxkaXNjb25uZWN0XzpmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8dGhpcy5vYnNlcnZlZF8ubGVuZ3RoO2ErPTIpdGhpcy5vYnNlcnZlZF9bYV09PT1vYnNlcnZlclNlbnRpbmVsJiZ0aGlzLm9ic2VydmVkX1thKzFdLmNsb3NlKCk7dGhpcy5vYnNlcnZlZF8ubGVuZ3RoPTAsdGhpcy52YWx1ZV8ubGVuZ3RoPTAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxhZGRQYXRoOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPVVOT1BFTkVEJiZ0aGlzLnN0YXRlXyE9UkVTRVRUSU5HKXRocm93IEVycm9yKCJDYW5ub3QgYWRkIHBhdGhzIG9uY2Ugc3RhcnRlZC4iKTt2YXIgYj1nZXRQYXRoKGIpO2lmKHRoaXMub2JzZXJ2ZWRfLnB1c2goYSxiKSx0aGlzLnJlcG9ydENoYW5nZXNPbk9wZW5fKXt2YXIgYz10aGlzLm9ic2VydmVkXy5sZW5ndGgvMi0xO3RoaXMudmFsdWVfW2NdPWIuZ2V0VmFsdWVGcm9tKGEpfX0sYWRkT2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdGF0ZV8hPVVOT1BFTkVEJiZ0aGlzLnN0YXRlXyE9UkVTRVRUSU5HKXRocm93IEVycm9yKCJDYW5ub3QgYWRkIG9ic2VydmVycyBvbmNlIHN0YXJ0ZWQuIik7aWYodGhpcy5vYnNlcnZlZF8ucHVzaChvYnNlcnZlclNlbnRpbmVsLGEpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl8pe3ZhciBiPXRoaXMub2JzZXJ2ZWRfLmxlbmd0aC8yLTE7dGhpcy52YWx1ZV9bYl09YS5vcGVuKHRoaXMuZGVsaXZlcix0aGlzKX19LHN0YXJ0UmVzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLnN0YXRlXyE9T1BFTkVEKXRocm93IEVycm9yKCJDYW4gb25seSByZXNldCB3aGlsZSBvcGVuIik7dGhpcy5zdGF0ZV89UkVTRVRUSU5HLHRoaXMuZGlzY29ubmVjdF8oKX0sZmluaXNoUmVzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLnN0YXRlXyE9UkVTRVRUSU5HKXRocm93IEVycm9yKCJDYW4gb25seSBmaW5pc2hSZXNldCBhZnRlciBzdGFydFJlc2V0Iik7cmV0dXJuIHRoaXMuc3RhdGVfPU9QRU5FRCx0aGlzLmNvbm5lY3RfKCksdGhpcy52YWx1ZV99LGl0ZXJhdGVPYmplY3RzXzpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0wO2M8dGhpcy5vYnNlcnZlZF8ubGVuZ3RoO2MrPTIpYj10aGlzLm9ic2VydmVkX1tjXSxiIT09b2JzZXJ2ZXJTZW50aW5lbCYmdGhpcy5vYnNlcnZlZF9bYysxXS5pdGVyYXRlT2JqZWN0cyhiLGEpfSxjaGVja186ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wO2Q8dGhpcy5vYnNlcnZlZF8ubGVuZ3RoO2QrPTIpe3ZhciBlLGY9dGhpcy5vYnNlcnZlZF9bZF0sZz10aGlzLm9ic2VydmVkX1tkKzFdO2lmKGY9PT1vYnNlcnZlclNlbnRpbmVsKXt2YXIgaD1nO2U9dGhpcy5zdGF0ZV89PT1VTk9QRU5FRD9oLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpOmguZGlzY2FyZENoYW5nZXMoKX1lbHNlIGU9Zy5nZXRWYWx1ZUZyb20oZik7Yj90aGlzLnZhbHVlX1tkLzJdPWU6YXJlU2FtZVZhbHVlKGUsdGhpcy52YWx1ZV9bZC8yXSl8fChjPWN8fFtdLGNbZC8yXT10aGlzLnZhbHVlX1tkLzJdLHRoaXMudmFsdWVfW2QvMl09ZSl9cmV0dXJuIGM/KHRoaXMucmVwb3J0XyhbdGhpcy52YWx1ZV8sYyx0aGlzLm9ic2VydmVkX10pLCEwKTohMX19KSxPYnNlcnZlclRyYW5zZm9ybS5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLnZhbHVlXz10aGlzLmdldFZhbHVlRm5fKHRoaXMub2JzZXJ2YWJsZV8ub3Blbih0aGlzLm9ic2VydmVkQ2FsbGJhY2tfLHRoaXMpKSx0aGlzLnZhbHVlX30sb2JzZXJ2ZWRDYWxsYmFja186ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmdldFZhbHVlRm5fKGEpLCFhcmVTYW1lVmFsdWUoYSx0aGlzLnZhbHVlXykpe3ZhciBiPXRoaXMudmFsdWVfO3RoaXMudmFsdWVfPWEsdGhpcy5jYWxsYmFja18uY2FsbCh0aGlzLnRhcmdldF8sdGhpcy52YWx1ZV8sYil9fSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlXz10aGlzLmdldFZhbHVlRm5fKHRoaXMub2JzZXJ2YWJsZV8uZGlzY2FyZENoYW5nZXMoKSksdGhpcy52YWx1ZV99LGRlbGl2ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYnNlcnZhYmxlXy5kZWxpdmVyKCl9LHNldFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBhPXRoaXMuc2V0VmFsdWVGbl8oYSksIXRoaXMuZG9udFBhc3NUaHJvdWdoU2V0XyYmdGhpcy5vYnNlcnZhYmxlXy5zZXRWYWx1ZT90aGlzLm9ic2VydmFibGVfLnNldFZhbHVlKGEpOnZvaWQgMH0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmFibGVfJiZ0aGlzLm9ic2VydmFibGVfLmNsb3NlKCksdGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy5vYnNlcnZhYmxlXz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuZ2V0VmFsdWVGbl89dm9pZCAwLHRoaXMuc2V0VmFsdWVGbl89dm9pZCAwfX07dmFyIGV4cGVjdGVkUmVjb3JkVHlwZXM9e2FkZDohMCx1cGRhdGU6ITAsImRlbGV0ZSI6ITB9LHVwZGF0ZVJlY29yZD17b2JqZWN0OnZvaWQgMCx0eXBlOiJ1cGRhdGUiLG5hbWU6dm9pZCAwLG9sZFZhbHVlOnZvaWQgMH07T2JzZXJ2ZXIuY3JlYXRlQmluZGFibGVQcm90b3R5cGVBY2Nlc3Nvcj1mdW5jdGlvbihhLGIpe3ZhciBjPWIrIl8iLGQ9YisiT2JzZXJ2YWJsZV8iO2FbY109YVtiXSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzW2RdO3JldHVybiBhJiZhLmRlbGl2ZXIoKSx0aGlzW2NdfSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGU9dGhpc1tkXTtpZihlKXJldHVybiB2b2lkIGUuc2V0VmFsdWUoYSk7dmFyIGY9dGhpc1tjXTtyZXR1cm4gdGhpc1tjXT1hLG5vdGlmeSh0aGlzLGIsYSxmKSxhfSxjb25maWd1cmFibGU6ITB9KX0sT2JzZXJ2ZXIuYmluZFRvSW5zdGFuY2U9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YisiXyIsZj1iKyJPYnNlcnZhYmxlXyI7YVtmXT1jO3ZhciBnPWFbZV0saD1jLm9wZW4oZnVuY3Rpb24oYyxkKXthW2VdPWMsbm90aWZ5KGEsYixjLGQpfSk7aWYoZCYmIWFyZVNhbWVWYWx1ZShnLGgpKXt2YXIgaT1kKGcsaCk7YXJlU2FtZVZhbHVlKGgsaSl8fChoPWksYy5zZXRWYWx1ZSYmYy5zZXRWYWx1ZShoKSl9cmV0dXJuIGFbZV09aCxub3RpZnkoYSxiLGgsZykse2Nsb3NlOmZ1bmN0aW9uKCl7Yy5jbG9zZSgpLGFbZl09dm9pZCAwfX19O3ZhciBFRElUX0xFQVZFPTAsRURJVF9VUERBVEU9MSxFRElUX0FERD0yLEVESVRfREVMRVRFPTM7QXJyYXlTcGxpY2UucHJvdG90eXBlPXtjYWxjRWRpdERpc3RhbmNlczpmdW5jdGlvbihhLGIsYyxkLGUsZil7Zm9yKHZhciBnPWYtZSsxLGg9Yy1iKzEsaT1uZXcgQXJyYXkoZyksaj0wO2c+ajtqKyspaVtqXT1uZXcgQXJyYXkoaCksaVtqXVswXT1qO2Zvcih2YXIgaz0wO2g+aztrKyspaVswXVtrXT1rO2Zvcih2YXIgaj0xO2c+ajtqKyspZm9yKHZhciBrPTE7aD5rO2srKylpZih0aGlzLmVxdWFscyhhW2Iray0xXSxkW2Urai0xXSkpaVtqXVtrXT1pW2otMV1bay0xXTtlbHNle3ZhciBsPWlbai0xXVtrXSsxLG09aVtqXVtrLTFdKzE7aVtqXVtrXT1tPmw/bDptfXJldHVybiBpfSxzcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTEsYz1hWzBdLmxlbmd0aC0xLGQ9YVtiXVtjXSxlPVtdO2I+MHx8Yz4wOylpZigwIT1iKWlmKDAhPWMpe3ZhciBmLGc9YVtiLTFdW2MtMV0saD1hW2ItMV1bY10saT1hW2JdW2MtMV07Zj1pPmg/Zz5oP2g6ZzpnPmk/aTpnLGY9PWc/KGc9PWQ/ZS5wdXNoKEVESVRfTEVBVkUpOihlLnB1c2goRURJVF9VUERBVEUpLGQ9ZyksYi0tLGMtLSk6Zj09aD8oZS5wdXNoKEVESVRfREVMRVRFKSxiLS0sZD1oKTooZS5wdXNoKEVESVRfQUREKSxjLS0sZD1pKX1lbHNlIGUucHVzaChFRElUX0RFTEVURSksYi0tO2Vsc2UgZS5wdXNoKEVESVRfQUREKSxjLS07cmV0dXJuIGUucmV2ZXJzZSgpLGV9LGNhbGNTcGxpY2VzOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz0wLGg9MCxpPU1hdGgubWluKGMtYixmLWUpO2lmKDA9PWImJjA9PWUmJihnPXRoaXMuc2hhcmVkUHJlZml4KGEsZCxpKSksYz09YS5sZW5ndGgmJmY9PWQubGVuZ3RoJiYoaD10aGlzLnNoYXJlZFN1ZmZpeChhLGQsaS1nKSksYis9ZyxlKz1nLGMtPWgsZi09aCxjLWI9PTAmJmYtZT09MClyZXR1cm5bXTtpZihiPT1jKXtmb3IodmFyIGo9bmV3U3BsaWNlKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltuZXdTcGxpY2UoYixbXSxjLWIpXTtmb3IodmFyIGs9dGhpcy5zcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXModGhpcy5jYWxjRWRpdERpc3RhbmNlcyhhLGIsYyxkLGUsZikpLGo9dm9pZCAwLGw9W10sbT1iLG49ZSxvPTA7bzxrLmxlbmd0aDtvKyspc3dpdGNoKGtbb10pe2Nhc2UgRURJVF9MRUFWRTpqJiYobC5wdXNoKGopLGo9dm9pZCAwKSxtKyssbisrO2JyZWFrO2Nhc2UgRURJVF9VUERBVEU6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSBFRElUX0FERDpqfHwoaj1uZXdTcGxpY2UobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrO2JyZWFrO2Nhc2UgRURJVF9ERUxFVEU6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGoucmVtb3ZlZC5wdXNoKGRbbl0pLG4rK31yZXR1cm4gaiYmbC5wdXNoKGopLGx9LHNoYXJlZFByZWZpeDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA7Yz5kO2QrKylpZighdGhpcy5lcXVhbHMoYVtkXSxiW2RdKSlyZXR1cm4gZDtyZXR1cm4gY30sc2hhcmVkU3VmZml4OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YS5sZW5ndGgsZT1iLmxlbmd0aCxmPTA7Yz5mJiZ0aGlzLmVxdWFscyhhWy0tZF0sYlstLWVdKTspZisrO3JldHVybiBmfSxjYWxjdWxhdGVTcGxpY2VzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY2FsY1NwbGljZXMoYSwwLGEubGVuZ3RoLGIsMCxiLmxlbmd0aCl9LGVxdWFsczpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Yn19O3ZhciBhcnJheVNwbGljZT1uZXcgQXJyYXlTcGxpY2U7Z2xvYmFsLk9ic2VydmVyPU9ic2VydmVyLGdsb2JhbC5PYnNlcnZlci5ydW5FT01fPXJ1bkVPTSxnbG9iYWwuT2JzZXJ2ZXIub2JzZXJ2ZXJTZW50aW5lbF89b2JzZXJ2ZXJTZW50aW5lbCxnbG9iYWwuT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZT1oYXNPYnNlcnZlLGdsb2JhbC5BcnJheU9ic2VydmVyPUFycmF5T2JzZXJ2ZXIsZ2xvYmFsLkFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcz1mdW5jdGlvbihhLGIpe3JldHVybiBhcnJheVNwbGljZS5jYWxjdWxhdGVTcGxpY2VzKGEsYil9LGdsb2JhbC5BcnJheVNwbGljZT1BcnJheVNwbGljZSxnbG9iYWwuT2JqZWN0T2JzZXJ2ZXI9T2JqZWN0T2JzZXJ2ZXIsZ2xvYmFsLlBhdGhPYnNlcnZlcj1QYXRoT2JzZXJ2ZXIsZ2xvYmFsLkNvbXBvdW5kT2JzZXJ2ZXI9Q29tcG91bmRPYnNlcnZlcixnbG9iYWwuUGF0aD1QYXRoLGdsb2JhbC5PYnNlcnZlclRyYW5zZm9ybT1PYnNlcnZlclRyYW5zZm9ybX0oInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJmdsb2JhbCYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZT9nbG9iYWw6dGhpc3x8d2luZG93KSxQbGF0Zm9ybS5mbGFncy5zaGFkb3c/KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD17fSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgY2hyb21lJiZjaHJvbWUuYXBwJiZjaHJvbWUuYXBwLnJ1bnRpbWUpcmV0dXJuITE7dHJ5e3ZhciBhPW5ldyBGdW5jdGlvbigicmV0dXJuIHRydWU7Iik7cmV0dXJuIGEoKX1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gYyhhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBkKGEsYil7Zm9yKHZhciBjPUwoYiksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO0soYSxlLE0oYixlKSl9cmV0dXJuIGF9ZnVuY3Rpb24gZShhLGIpe2Zvcih2YXIgYz1MKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtzd2l0Y2goZSl7Y2FzZSJhcmd1bWVudHMiOmNhc2UiY2FsbGVyIjpjYXNlImxlbmd0aCI6Y2FzZSJuYW1lIjpjYXNlInByb3RvdHlwZSI6Y2FzZSJ0b1N0cmluZyI6Y29udGludWV9SyhhLGUsTShiLGUpKX1yZXR1cm4gYX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXWluIGEpcmV0dXJuIGJbY119ZnVuY3Rpb24gZyhhLGIsYyl7Ti52YWx1ZT1jLEsoYSxiLE4pfWZ1bmN0aW9uIGgoYSl7dmFyIGI9YS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxjPUcuZ2V0KGIpO2lmKGMpcmV0dXJuIGM7dmFyIGQ9aChiKSxlPXYoZCk7cmV0dXJuIHMoYixlLGEpLGV9ZnVuY3Rpb24gaShhLGIpe3EoYSxiLCEwKX1mdW5jdGlvbiBqKGEsYil7cShiLGEsITEpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuL15vblthLXpdKyQvLnRlc3QoYSl9ZnVuY3Rpb24gbChhKXtyZXR1cm4vXlx3W2EtekEtWl8wLTldKiQvLnRlc3QoYSl9ZnVuY3Rpb24gbShhKXtyZXR1cm4gSiYmbChhKT9uZXcgRnVuY3Rpb24oInJldHVybiB0aGlzLmltcGwuIithKTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV19fWZ1bmN0aW9uIG4oYSl7cmV0dXJuIEomJmwoYSk/bmV3IEZ1bmN0aW9uKCJ2IiwidGhpcy5pbXBsLiIrYSsiID0gdiIpOmZ1bmN0aW9uKGIpe3RoaXMuaW1wbFthXT1ifX1mdW5jdGlvbiBvKGEpe3JldHVybiBKJiZsKGEpP25ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMuaW1wbC4iK2ErIi5hcHBseSh0aGlzLmltcGwsIGFyZ3VtZW50cykiKTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHAoYSxiKXt0cnl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKX1jYXRjaChjKXtyZXR1cm4gUH19ZnVuY3Rpb24gcShiLGMsZCl7Zm9yKHZhciBlPUwoYiksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1lW2ZdO2lmKCJwb2x5bWVyQmxhY2tMaXN0XyIhPT1nJiYhKGcgaW4gY3x8Yi5wb2x5bWVyQmxhY2tMaXN0XyYmYi5wb2x5bWVyQmxhY2tMaXN0X1tnXSkpe08mJmIuX19sb29rdXBHZXR0ZXJfXyhnKTt2YXIgaCxpLGo9cChiLGcpO2lmKGQmJiJmdW5jdGlvbiI9PXR5cGVvZiBqLnZhbHVlKWNbZ109byhnKTtlbHNle3ZhciBsPWsoZyk7aD1sP2EuZ2V0RXZlbnRIYW5kbGVyR2V0dGVyKGcpOm0oZyksKGoud3JpdGFibGV8fGouc2V0KSYmKGk9bD9hLmdldEV2ZW50SGFuZGxlclNldHRlcihnKTpuKGcpKSxLKGMsZyx7Z2V0Omgsc2V0OmksY29uZmlndXJhYmxlOmouY29uZmlndXJhYmxlLGVudW1lcmFibGU6ai5lbnVtZXJhYmxlfSl9fX19ZnVuY3Rpb24gcihhLGIsYyl7dmFyIGQ9YS5wcm90b3R5cGU7cyhkLGIsYyksZShiLGEpfWZ1bmN0aW9uIHMoYSxiLGQpe3ZhciBlPWIucHJvdG90eXBlO2Modm9pZCAwPT09Ry5nZXQoYSkpLEcuc2V0KGEsYiksSC5zZXQoZSxhKSxpKGEsZSksZCYmaihlLGQpLGcoZSwiY29uc3RydWN0b3IiLGIpLGIucHJvdG90eXBlPWV9ZnVuY3Rpb24gdChhLGIpe3JldHVybiBHLmdldChiLnByb3RvdHlwZSk9PT1hfWZ1bmN0aW9uIHUoYSl7dmFyIGI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9aChiKSxkPXYoYyk7cmV0dXJuIHMoYixkLGEpLGR9ZnVuY3Rpb24gdihhKXtmdW5jdGlvbiBiKGIpe2EuY2FsbCh0aGlzLGIpfXZhciBjPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpO3JldHVybiBjLmNvbnN0cnVjdG9yPWIsYi5wcm90b3R5cGU9YyxifWZ1bmN0aW9uIHcoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBJLkV2ZW50VGFyZ2V0fHxhIGluc3RhbmNlb2YgSS5FdmVudHx8YSBpbnN0YW5jZW9mIEkuUmFuZ2V8fGEgaW5zdGFuY2VvZiBJLkRPTUltcGxlbWVudGF0aW9ufHxhIGluc3RhbmNlb2YgSS5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8fEkuV2ViR0xSZW5kZXJpbmdDb250ZXh0JiZhIGluc3RhbmNlb2YgSS5XZWJHTFJlbmRlcmluZ0NvbnRleHR9ZnVuY3Rpb24geChhKXtyZXR1cm4gUiYmYSBpbnN0YW5jZW9mIFJ8fGEgaW5zdGFuY2VvZiBUfHxhIGluc3RhbmNlb2YgU3x8YSBpbnN0YW5jZW9mIFV8fGEgaW5zdGFuY2VvZiBWfHxhIGluc3RhbmNlb2YgUXx8YSBpbnN0YW5jZW9mIFd8fFgmJmEgaW5zdGFuY2VvZiBYfHxZJiZhIGluc3RhbmNlb2YgWX1mdW5jdGlvbiB5KGEpe3JldHVybiBudWxsPT09YT9udWxsOihjKHgoYSkpLGEucG9seW1lcldyYXBwZXJffHwoYS5wb2x5bWVyV3JhcHBlcl89bmV3KGgoYSkpKGEpKSl9ZnVuY3Rpb24geihhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYyh3KGEpKSxhLmltcGwpfWZ1bmN0aW9uIEEoYSl7cmV0dXJuIGEmJncoYSk/eihhKTphfWZ1bmN0aW9uIEIoYSl7cmV0dXJuIGEmJiF3KGEpP3koYSk6YX1mdW5jdGlvbiBDKGEsYil7bnVsbCE9PWImJihjKHgoYSkpLGModm9pZCAwPT09Ynx8dyhiKSksYS5wb2x5bWVyV3JhcHBlcl89Yil9ZnVuY3Rpb24gRChhLGIsYyl7Wi5nZXQ9YyxLKGEucHJvdG90eXBlLGIsWil9ZnVuY3Rpb24gRShhLGIpe0QoYSxiLGZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5pbXBsW2JdKX0pfWZ1bmN0aW9uIEYoYSxiKXthLmZvckVhY2goZnVuY3Rpb24oYSl7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7dmFyIGE9Qih0aGlzKTtyZXR1cm4gYVtiXS5hcHBseShhLGFyZ3VtZW50cyl9fSl9KX12YXIgRz1uZXcgV2Vha01hcCxIPW5ldyBXZWFrTWFwLEk9T2JqZWN0LmNyZWF0ZShudWxsKSxKPWIoKSxLPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxMPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLE09T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixOPXt2YWx1ZTp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITB9O0wod2luZG93KTt2YXIgTz0vRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxQPXtnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5jdGlvbigpe30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9LFE9d2luZG93LkRPTUltcGxlbWVudGF0aW9uLFI9d2luZG93LkV2ZW50VGFyZ2V0LFM9d2luZG93LkV2ZW50LFQ9d2luZG93Lk5vZGUsVT13aW5kb3cuV2luZG93LFY9d2luZG93LlJhbmdlLFc9d2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxYPXdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQsWT13aW5kb3cuU1ZHRWxlbWVudEluc3RhbmNlLFo9e2dldDp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9O2EuYXNzZXJ0PWMsYS5jb25zdHJ1Y3RvclRhYmxlPUcsYS5kZWZpbmVHZXR0ZXI9RCxhLmRlZmluZVdyYXBHZXR0ZXI9RSxhLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyPUYsYS5pc1dyYXBwZXI9dyxhLmlzV3JhcHBlckZvcj10LGEubWl4aW49ZCxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlPUgsYS5vbmVPZj1mLGEucmVnaXN0ZXJPYmplY3Q9dSxhLnJlZ2lzdGVyV3JhcHBlcj1yLGEucmV3cmFwPUMsYS51bndyYXA9eixhLnVud3JhcElmTmVlZGVkPUEsYS53cmFwPXksYS53cmFwSWZOZWVkZWQ9QixhLndyYXBwZXJzPUl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtnPSExO3ZhciBhPWYuc2xpY2UoMCk7Zj1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdKCl9ZnVuY3Rpb24gYyhhKXtmLnB1c2goYSksZ3x8KGc9ITAsZChiLDApKX12YXIgZCxlPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyLGY9W10sZz0hMTtpZihlKXt2YXIgaD0xLGk9bmV3IGUoYiksaj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShoKTtpLm9ic2VydmUoaix7Y2hhcmFjdGVyRGF0YTohMH0pLGQ9ZnVuY3Rpb24oKXtoPShoKzEpJTIsai5kYXRhPWh9fWVsc2UgZD13aW5kb3cuc2V0SW1tZWRpYXRlfHx3aW5kb3cuc2V0VGltZW91dDthLnNldEVuZE9mTWljcm90YXNrPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtwfHwoayhjKSxwPSEwKX1mdW5jdGlvbiBjKCl7cD0hMTtkbyBmb3IodmFyIGE9by5zbGljZSgpLGI9ITEsYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLGU9ZC50YWtlUmVjb3JkcygpO2YoZCksZS5sZW5ndGgmJihkLmNhbGxiYWNrXyhlLGQpLGI9ITApfXdoaWxlKGIpfWZ1bmN0aW9uIGQoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1uZXcgbS5Ob2RlTGlzdCx0aGlzLnJlbW92ZWROb2Rlcz1uZXcgbS5Ob2RlTGlzdCx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBlKGEsYil7Zm9yKDthO2E9YS5wYXJlbnROb2RlKXt2YXIgYz1uLmdldChhKTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO2Uub3B0aW9ucy5zdWJ0cmVlJiZlLmFkZFRyYW5zaWVudE9ic2VydmVyKGIpfX19ZnVuY3Rpb24gZihhKXtmb3IodmFyIGI9MDtiPGEubm9kZXNfLmxlbmd0aDtiKyspe3ZhciBjPWEubm9kZXNfW2JdLGQ9bi5nZXQoYyk7aWYoIWQpcmV0dXJuO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2Yub2JzZXJ2ZXI9PT1hJiZmLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfX19ZnVuY3Rpb24gZyhhLGMsZSl7Zm9yKHZhciBmPU9iamVjdC5jcmVhdGUobnVsbCksZz1PYmplY3QuY3JlYXRlKG51bGwpLGg9YTtoO2g9aC5wYXJlbnROb2RlKXt2YXIgaT1uLmdldChoKTtpZihpKWZvcih2YXIgaj0wO2o8aS5sZW5ndGg7aisrKXt2YXIgaz1pW2pdLGw9ay5vcHRpb25zO2lmKChoPT09YXx8bC5zdWJ0cmVlKSYmISgiYXR0cmlidXRlcyI9PT1jJiYhbC5hdHRyaWJ1dGVzfHwiYXR0cmlidXRlcyI9PT1jJiZsLmF0dHJpYnV0ZUZpbHRlciYmKG51bGwhPT1lLm5hbWVzcGFjZXx8LTE9PT1sLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGUubmFtZSkpfHwiY2hhcmFjdGVyRGF0YSI9PT1jJiYhbC5jaGFyYWN0ZXJEYXRhfHwiY2hpbGRMaXN0Ij09PWMmJiFsLmNoaWxkTGlzdCkpe3ZhciBtPWsub2JzZXJ2ZXI7ZlttLnVpZF9dPW0sKCJhdHRyaWJ1dGVzIj09PWMmJmwuYXR0cmlidXRlT2xkVmFsdWV8fCJjaGFyYWN0ZXJEYXRhIj09PWMmJmwuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKSYmKGdbbS51aWRfXT1lLm9sZFZhbHVlKX19fXZhciBvPSExO2Zvcih2YXIgcCBpbiBmKXt2YXIgbT1mW3BdLHE9bmV3IGQoYyxhKTsibmFtZSJpbiBlJiYibmFtZXNwYWNlImluIGUmJihxLmF0dHJpYnV0ZU5hbWU9ZS5uYW1lLHEuYXR0cmlidXRlTmFtZXNwYWNlPWUubmFtZXNwYWNlKSxlLmFkZGVkTm9kZXMmJihxLmFkZGVkTm9kZXM9ZS5hZGRlZE5vZGVzKSxlLnJlbW92ZWROb2RlcyYmKHEucmVtb3ZlZE5vZGVzPWUucmVtb3ZlZE5vZGVzKSxlLnByZXZpb3VzU2libGluZyYmKHEucHJldmlvdXNTaWJsaW5nPWUucHJldmlvdXNTaWJsaW5nKSxlLm5leHRTaWJsaW5nJiYocS5uZXh0U2libGluZz1lLm5leHRTaWJsaW5nKSx2b2lkIDAhPT1nW3BdJiYocS5vbGRWYWx1ZT1nW3BdKSxtLnJlY29yZHNfLnB1c2gocSksbz0hMH1vJiZiKCl9ZnVuY3Rpb24gaChhKXtpZih0aGlzLmNoaWxkTGlzdD0hIWEuY2hpbGRMaXN0LHRoaXMuc3VidHJlZT0hIWEuc3VidHJlZSx0aGlzLmF0dHJpYnV0ZXM9ImF0dHJpYnV0ZXMiaW4gYXx8ISgiYXR0cmlidXRlT2xkVmFsdWUiaW4gYXx8ImF0dHJpYnV0ZUZpbHRlciJpbiBhKT8hIWEuYXR0cmlidXRlczohMCx0aGlzLmNoYXJhY3RlckRhdGE9ImNoYXJhY3RlckRhdGFPbGRWYWx1ZSJpbiBhJiYhKCJjaGFyYWN0ZXJEYXRhImluIGEpPyEwOiEhYS5jaGFyYWN0ZXJEYXRhLCF0aGlzLmF0dHJpYnV0ZXMmJihhLmF0dHJpYnV0ZU9sZFZhbHVlfHwiYXR0cmlidXRlRmlsdGVyImluIGEpfHwhdGhpcy5jaGFyYWN0ZXJEYXRhJiZhLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSl0aHJvdyBuZXcgVHlwZUVycm9yO2lmKHRoaXMuY2hhcmFjdGVyRGF0YT0hIWEuY2hhcmFjdGVyRGF0YSx0aGlzLmF0dHJpYnV0ZU9sZFZhbHVlPSEhYS5hdHRyaWJ1dGVPbGRWYWx1ZSx0aGlzLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT0hIWEuY2hhcmFjdGVyRGF0YU9sZFZhbHVlLCJhdHRyaWJ1dGVGaWx0ZXIiaW4gYSl7aWYobnVsbD09YS5hdHRyaWJ1dGVGaWx0ZXJ8fCJvYmplY3QiIT10eXBlb2YgYS5hdHRyaWJ1dGVGaWx0ZXIpdGhyb3cgbmV3IFR5cGVFcnJvcjt0aGlzLmF0dHJpYnV0ZUZpbHRlcj1xLmNhbGwoYS5hdHRyaWJ1dGVGaWx0ZXIpfWVsc2UgdGhpcy5hdHRyaWJ1dGVGaWx0ZXI9bnVsbH1mdW5jdGlvbiBpKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89KytyLG8ucHVzaCh0aGlzKX1mdW5jdGlvbiBqKGEsYixjKXt0aGlzLm9ic2VydmVyPWEsdGhpcy50YXJnZXQ9Yix0aGlzLm9wdGlvbnM9Yyx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W119dmFyIGs9YS5zZXRFbmRPZk1pY3JvdGFzayxsPWEud3JhcElmTmVlZGVkLG09YS53cmFwcGVycyxuPW5ldyBXZWFrTWFwLG89W10scD0hMSxxPUFycmF5LnByb3RvdHlwZS5zbGljZSxyPTA7aS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXthPWwoYSk7dmFyIGMsZD1uZXcgaChiKSxlPW4uZ2V0KGEpO2V8fG4uc2V0KGEsZT1bXSk7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspZVtmXS5vYnNlcnZlcj09PXRoaXMmJihjPWVbZl0sYy5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKSxjLm9wdGlvbnM9ZCk7Y3x8KGM9bmV3IGoodGhpcyxhLGQpLGUucHVzaChjKSx0aGlzLm5vZGVzXy5wdXNoKGEpKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW4uZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19LGoucHJvdG90eXBlPXthZGRUcmFuc2llbnRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZihhIT09dGhpcy50YXJnZXQpe3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGEpO3ZhciBiPW4uZ2V0KGEpO2J8fG4uc2V0KGEsYj1bXSksYi5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylmb3IodmFyIGM9YVtiXSxkPW4uZ2V0KGMpLGU9MDtlPGQubGVuZ3RoO2UrKylpZihkW2VdPT09dGhpcyl7ZC5zcGxpY2UoZSwxKTticmVha319fSxhLmVucXVldWVNdXRhdGlvbj1nLGEucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnM9ZSxhLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9aSxhLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXt0aGlzLnJvb3Q9YSx0aGlzLnBhcmVudD1ifWZ1bmN0aW9uIGMoYSxiKXtpZihhLnRyZWVTY29wZV8hPT1iKXthLnRyZWVTY29wZV89Yjtmb3IodmFyIGQ9YS5zaGFkb3dSb290O2Q7ZD1kLm9sZGVyU2hhZG93Um9vdClkLnRyZWVTY29wZV8ucGFyZW50PWI7Zm9yKHZhciBlPWEuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyljKGUsYil9fWZ1bmN0aW9uIGQoYyl7aWYoYyBpbnN0YW5jZW9mIGEud3JhcHBlcnMuV2luZG93LGMudHJlZVNjb3BlXylyZXR1cm4gYy50cmVlU2NvcGVfO3ZhciBlLGY9Yy5wYXJlbnROb2RlO3JldHVybiBlPWY/ZChmKTpuZXcgYihjLG51bGwpLGMudHJlZVNjb3BlXz1lfWIucHJvdG90eXBlPXtnZXQgcmVuZGVyZXIoKXtyZXR1cm4gdGhpcy5yb290IGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290P2EuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMucm9vdC5ob3N0KTpudWxsfSxjb250YWluczpmdW5jdGlvbihhKXtmb3IoO2E7YT1hLnBhcmVudClpZihhPT09dGhpcylyZXR1cm4hMDtyZXR1cm4hMX19LGEuVHJlZVNjb3BlPWIsYS5nZXRUcmVlU2NvcGU9ZCxhLnNldFRyZWVTY29wZT1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhIGluc3RhbmNlb2YgUS5TaGFkb3dSb290fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIEwoYSkucm9vdH1mdW5jdGlvbiBkKGEsZCl7dmFyIGg9W10saT1hO2ZvcihoLnB1c2goaSk7aTspe3ZhciBqPWcoaSk7aWYoaiYmai5sZW5ndGg+MCl7Zm9yKHZhciBrPTA7azxqLmxlbmd0aDtrKyspe3ZhciBtPWpba107aWYoZihtKSl7dmFyIG49YyhtKSxvPW4ub2xkZXJTaGFkb3dSb290O28mJmgucHVzaChvKX1oLnB1c2gobSl9aT1qW2oubGVuZ3RoLTFdfWVsc2UgaWYoYihpKSl7aWYobChhLGkpJiZlKGQpKWJyZWFrO2k9aS5ob3N0LGgucHVzaChpKX1lbHNlIGk9aS5wYXJlbnROb2RlLGkmJmgucHVzaChpKX1yZXR1cm4gaH1mdW5jdGlvbiBlKGEpe2lmKCFhKXJldHVybiExO3N3aXRjaChhLnR5cGUpe2Nhc2UiYWJvcnQiOmNhc2UiZXJyb3IiOmNhc2Uic2VsZWN0IjpjYXNlImNoYW5nZSI6Y2FzZSJsb2FkIjpjYXNlInJlc2V0IjpjYXNlInJlc2l6ZSI6Y2FzZSJzY3JvbGwiOmNhc2Uic2VsZWN0c3RhcnQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBIVE1MU2hhZG93RWxlbWVudH1mdW5jdGlvbiBnKGIpe3JldHVybiBhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzKGIpfWZ1bmN0aW9uIGgoYSxiKXtpZigwPT09YS5sZW5ndGgpcmV0dXJuIGI7YiBpbnN0YW5jZW9mIFEuV2luZG93JiYoYj1iLmRvY3VtZW50KTtmb3IodmFyIGM9TChiKSxkPWFbMF0sZT1MKGQpLGY9aihjLGUpLGc9MDtnPGEubGVuZ3RoO2crKyl7dmFyIGg9YVtnXTsKaWYoTChoKT09PWYpcmV0dXJuIGh9cmV0dXJuIGFbYS5sZW5ndGgtMV19ZnVuY3Rpb24gaShhKXtmb3IodmFyIGI9W107YTthPWEucGFyZW50KWIucHVzaChhKTtyZXR1cm4gYn1mdW5jdGlvbiBqKGEsYil7Zm9yKHZhciBjPWkoYSksZD1pKGIpLGU9bnVsbDtjLmxlbmd0aD4wJiZkLmxlbmd0aD4wOyl7dmFyIGY9Yy5wb3AoKSxnPWQucG9wKCk7aWYoZiE9PWcpYnJlYWs7ZT1mfXJldHVybiBlfWZ1bmN0aW9uIGsoYSxiLGMpe2IgaW5zdGFuY2VvZiBRLldpbmRvdyYmKGI9Yi5kb2N1bWVudCk7dmFyIGUsZj1MKGIpLGc9TChjKSxoPWQoYyxhKSxlPWooZixnKTtlfHwoZT1nLnJvb3QpO2Zvcih2YXIgaT1lO2k7aT1pLnBhcmVudClmb3IodmFyIGs9MDtrPGgubGVuZ3RoO2srKyl7dmFyIGw9aFtrXTtpZihMKGwpPT09aSlyZXR1cm4gbH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBsKGEsYil7cmV0dXJuIEwoYSk9PT1MKGIpfWZ1bmN0aW9uIG0oYSl7aWYoIVMuZ2V0KGEpJiYoUy5zZXQoYSwhMCksbihQKGEpLFAoYS50YXJnZXQpKSxKKSl7dmFyIGI9Sjt0aHJvdyBKPW51bGwsYn19ZnVuY3Rpb24gbihiLGMpe2lmKFQuZ2V0KGIpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZFN0YXRlRXJyb3IiKTtULnNldChiLCEwKSxhLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgZSxmLGcsaD1iLnR5cGU7aWYoImxvYWQiPT09aCYmIWIuYnViYmxlcyl7dmFyIGk9YztpIGluc3RhbmNlb2YgUS5Eb2N1bWVudCYmKGc9aS5kZWZhdWx0VmlldykmJihmPWksZT1bXSl9aWYoIWUpaWYoYyBpbnN0YW5jZW9mIFEuV2luZG93KWc9YyxlPVtdO2Vsc2UgaWYoZT1kKGMsYiksImxvYWQiIT09Yi50eXBlKXt2YXIgaT1lW2UubGVuZ3RoLTFdO2kgaW5zdGFuY2VvZiBRLkRvY3VtZW50JiYoZz1pLmRlZmF1bHRWaWV3KX1yZXR1cm4gXy5zZXQoYixlKSxvKGIsZSxnLGYpJiZwKGIsZSxnLGYpJiZxKGIsZSxnLGYpLFguc2V0KGIsYWIpLFYuZGVsZXRlKGIsbnVsbCksVC5kZWxldGUoYiksYi5kZWZhdWx0UHJldmVudGVkfWZ1bmN0aW9uIG8oYSxiLGMsZCl7dmFyIGU9YmI7aWYoYyYmIXIoYyxhLGUsYixkKSlyZXR1cm4hMTtmb3IodmFyIGY9Yi5sZW5ndGgtMTtmPjA7Zi0tKWlmKCFyKGJbZl0sYSxlLGIsZCkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gcChhLGIsYyxkKXt2YXIgZT1jYixmPWJbMF18fGM7cmV0dXJuIHIoZixhLGUsYixkKX1mdW5jdGlvbiBxKGEsYixjLGQpe2Zvcih2YXIgZT1kYixmPTE7ZjxiLmxlbmd0aDtmKyspaWYoIXIoYltmXSxhLGUsYixkKSlyZXR1cm47YyYmYi5sZW5ndGg+MCYmcihjLGEsZSxiLGQpfWZ1bmN0aW9uIHIoYSxiLGMsZCxlKXt2YXIgZj1SLmdldChhKTtpZighZilyZXR1cm4hMDt2YXIgZz1lfHxoKGQsYSk7aWYoZz09PWEpe2lmKGM9PT1iYilyZXR1cm4hMDtjPT09ZGImJihjPWNiKX1lbHNlIGlmKGM9PT1kYiYmIWIuYnViYmxlcylyZXR1cm4hMDtpZigicmVsYXRlZFRhcmdldCJpbiBiKXt2YXIgaT1PKGIpLGo9aS5yZWxhdGVkVGFyZ2V0O2lmKGope2lmKGogaW5zdGFuY2VvZiBPYmplY3QmJmouYWRkRXZlbnRMaXN0ZW5lcil7dmFyIGw9UChqKSxtPWsoYixhLGwpO2lmKG09PT1nKXJldHVybiEwfWVsc2UgbT1udWxsO1cuc2V0KGIsbSl9fVguc2V0KGIsYyk7dmFyIG49Yi50eXBlLG89ITE7VS5zZXQoYixnKSxWLnNldChiLGEpO2Zvcih2YXIgcD0wLHE9Zi5sZW5ndGg7cT5wO3ArKyl7dmFyIHI9ZltwXTtpZihyLnJlbW92ZWQpbz0hMDtlbHNlIGlmKCEoci50eXBlIT09bnx8IXIuY2FwdHVyZSYmYz09PWJifHxyLmNhcHR1cmUmJmM9PT1kYikpdHJ5e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiByLmhhbmRsZXI/ci5oYW5kbGVyLmNhbGwoYSxiKTpyLmhhbmRsZXIuaGFuZGxlRXZlbnQoYiksWi5nZXQoYikpcmV0dXJuITF9Y2F0Y2gocyl7Snx8KEo9cyl9fWlmKG8pe3ZhciB0PWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgcD0wO3A8dC5sZW5ndGg7cCsrKXRbcF0ucmVtb3ZlZHx8Zi5wdXNoKHRbcF0pfXJldHVybiFZLmdldChiKX1mdW5jdGlvbiBzKGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB0KGEsYil7aWYoIShhIGluc3RhbmNlb2YgZWIpKXJldHVybiBQKHgoZWIsIkV2ZW50IixhLGIpKTt2YXIgYz1hO3JldHVybiBwYnx8ImJlZm9yZXVubG9hZCIhPT1jLnR5cGU/dm9pZCh0aGlzLmltcGw9Yyk6bmV3IHkoYyl9ZnVuY3Rpb24gdShhKXtyZXR1cm4gYSYmYS5yZWxhdGVkVGFyZ2V0P09iamVjdC5jcmVhdGUoYSx7cmVsYXRlZFRhcmdldDp7dmFsdWU6TyhhLnJlbGF0ZWRUYXJnZXQpfX0pOmF9ZnVuY3Rpb24gdihhLGIsYyl7dmFyIGQ9d2luZG93W2FdLGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYiBpbnN0YW5jZW9mIGQ/dm9pZCh0aGlzLmltcGw9Yik6UCh4KGQsYSxiLGMpKX07aWYoZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksYyYmTShlLnByb3RvdHlwZSxjKSxkKXRyeXtOKGQsZSxuZXcgZCgidGVtcCIpKX1jYXRjaChmKXtOKGQsZSxkb2N1bWVudC5jcmVhdGVFdmVudChhKSl9cmV0dXJuIGV9ZnVuY3Rpb24gdyhhLGIpe3JldHVybiBmdW5jdGlvbigpe2FyZ3VtZW50c1tiXT1PKGFyZ3VtZW50c1tiXSk7dmFyIGM9Tyh0aGlzKTtjW2FdLmFwcGx5KGMsYXJndW1lbnRzKX19ZnVuY3Rpb24geChhLGIsYyxkKXtpZihuYilyZXR1cm4gbmV3IGEoYyx1KGQpKTt2YXIgZT1PKGRvY3VtZW50LmNyZWF0ZUV2ZW50KGIpKSxmPW1iW2JdLGc9W2NdO3JldHVybiBPYmplY3Qua2V5cyhmKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPW51bGwhPWQmJmEgaW4gZD9kW2FdOmZbYV07InJlbGF0ZWRUYXJnZXQiPT09YSYmKGI9TyhiKSksZy5wdXNoKGIpfSksZVsiaW5pdCIrYl0uYXBwbHkoZSxnKSxlfWZ1bmN0aW9uIHkoYSl7dC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24geihhKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYT8hMDphJiZhLmhhbmRsZUV2ZW50fWZ1bmN0aW9uIEEoYSl7c3dpdGNoKGEpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjpjYXNlIkRPTUF0dHJpYnV0ZU5hbWVDaGFuZ2VkIjpjYXNlIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCI6Y2FzZSJET01FbGVtZW50TmFtZUNoYW5nZWQiOmNhc2UiRE9NTm9kZUluc2VydGVkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZEludG9Eb2N1bWVudCI6Y2FzZSJET01Ob2RlUmVtb3ZlZCI6Y2FzZSJET01Ob2RlUmVtb3ZlZEZyb21Eb2N1bWVudCI6Y2FzZSJET01TdWJ0cmVlTW9kaWZpZWQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIEIoYSl7dGhpcy5pbXBsPWF9ZnVuY3Rpb24gQyhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFEuU2hhZG93Um9vdCYmKGE9YS5ob3N0KSxPKGEpfWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1SLmdldChhKTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKCFjW2RdLnJlbW92ZWQmJmNbZF0udHlwZT09PWIpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gRShhLGIpe2Zvcih2YXIgYz1PKGEpO2M7Yz1jLnBhcmVudE5vZGUpaWYoRChQKGMpLGIpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEYoYSl7SyhhLHJiKX1mdW5jdGlvbiBHKGIsYyxlLGYpe2EucmVuZGVyQWxsUGVuZGluZygpO3ZhciBnPVAoc2IuY2FsbChjLmltcGwsZSxmKSk7aWYoIWcpcmV0dXJuIG51bGw7dmFyIGk9ZChnLG51bGwpO3JldHVybiBoKGksYil9ZnVuY3Rpb24gSChhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj0kLmdldCh0aGlzKTtyZXR1cm4gYiYmYlthXSYmYlthXS52YWx1ZXx8bnVsbH19ZnVuY3Rpb24gSShhKXt2YXIgYj1hLnNsaWNlKDIpO3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD0kLmdldCh0aGlzKTtkfHwoZD1PYmplY3QuY3JlYXRlKG51bGwpLCQuc2V0KHRoaXMsZCkpO3ZhciBlPWRbYV07aWYoZSYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGIsZS53cmFwcGVkLCExKSwiZnVuY3Rpb24iPT10eXBlb2YgYyl7dmFyIGY9ZnVuY3Rpb24oYil7dmFyIGQ9Yy5jYWxsKHRoaXMsYik7ZD09PSExP2IucHJldmVudERlZmF1bHQoKToib25iZWZvcmV1bmxvYWQiPT09YSYmInN0cmluZyI9PXR5cGVvZiBkJiYoYi5yZXR1cm5WYWx1ZT1kKX07dGhpcy5hZGRFdmVudExpc3RlbmVyKGIsZiwhMSksZFthXT17dmFsdWU6Yyx3cmFwcGVkOmZ9fX19dmFyIEosSz1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLEw9YS5nZXRUcmVlU2NvcGUsTT1hLm1peGluLE49YS5yZWdpc3RlcldyYXBwZXIsTz1hLnVud3JhcCxQPWEud3JhcCxRPWEud3JhcHBlcnMsUj0obmV3IFdlYWtNYXAsbmV3IFdlYWtNYXApLFM9bmV3IFdlYWtNYXAsVD1uZXcgV2Vha01hcCxVPW5ldyBXZWFrTWFwLFY9bmV3IFdlYWtNYXAsVz1uZXcgV2Vha01hcCxYPW5ldyBXZWFrTWFwLFk9bmV3IFdlYWtNYXAsWj1uZXcgV2Vha01hcCwkPW5ldyBXZWFrTWFwLF89bmV3IFdlYWtNYXAsYWI9MCxiYj0xLGNiPTIsZGI9MztzLnByb3RvdHlwZT17ZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmhhbmRsZXI9PT1hLmhhbmRsZXImJnRoaXMudHlwZT09PWEudHlwZSYmdGhpcy5jYXB0dXJlPT09YS5jYXB0dXJlfSxnZXQgcmVtb3ZlZCgpe3JldHVybiBudWxsPT09dGhpcy5oYW5kbGVyfSxyZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXI9bnVsbH19O3ZhciBlYj13aW5kb3cuRXZlbnQ7ZWIucHJvdG90eXBlLnBvbHltZXJCbGFja0xpc3RfPXtyZXR1cm5WYWx1ZTohMCxrZXlMb2NhdGlvbjohMH0sdC5wcm90b3R5cGU9e2dldCB0YXJnZXQoKXtyZXR1cm4gVS5nZXQodGhpcyl9LGdldCBjdXJyZW50VGFyZ2V0KCl7cmV0dXJuIFYuZ2V0KHRoaXMpfSxnZXQgZXZlbnRQaGFzZSgpe3JldHVybiBYLmdldCh0aGlzKX0sZ2V0IHBhdGgoKXt2YXIgYT1fLmdldCh0aGlzKTtyZXR1cm4gYT9hLnNsaWNlKCk6W119LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe1kuc2V0KHRoaXMsITApfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtZLnNldCh0aGlzLCEwKSxaLnNldCh0aGlzLCEwKX19LE4oZWIsdCxkb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSk7dmFyIGZiPXYoIlVJRXZlbnQiLHQpLGdiPXYoIkN1c3RvbUV2ZW50Iix0KSxoYj17Z2V0IHJlbGF0ZWRUYXJnZXQoKXt2YXIgYT1XLmdldCh0aGlzKTtyZXR1cm4gdm9pZCAwIT09YT9hOlAoTyh0aGlzKS5yZWxhdGVkVGFyZ2V0KX19LGliPU0oe2luaXRNb3VzZUV2ZW50OncoImluaXRNb3VzZUV2ZW50IiwxNCl9LGhiKSxqYj1NKHtpbml0Rm9jdXNFdmVudDp3KCJpbml0Rm9jdXNFdmVudCIsNSl9LGhiKSxrYj12KCJNb3VzZUV2ZW50IixmYixpYiksbGI9digiRm9jdXNFdmVudCIsZmIsamIpLG1iPU9iamVjdC5jcmVhdGUobnVsbCksbmI9ZnVuY3Rpb24oKXt0cnl7bmV3IHdpbmRvdy5Gb2N1c0V2ZW50KCJmb2N1cyIpfWNhdGNoKGEpe3JldHVybiExfXJldHVybiEwfSgpO2lmKCFuYil7dmFyIG9iPWZ1bmN0aW9uKGEsYixjKXtpZihjKXt2YXIgZD1tYltjXTtiPU0oTSh7fSxkKSxiKX1tYlthXT1ifTtvYigiRXZlbnQiLHtidWJibGVzOiExLGNhbmNlbGFibGU6ITF9KSxvYigiQ3VzdG9tRXZlbnQiLHtkZXRhaWw6bnVsbH0sIkV2ZW50Iiksb2IoIlVJRXZlbnQiLHt2aWV3Om51bGwsZGV0YWlsOjB9LCJFdmVudCIpLG9iKCJNb3VzZUV2ZW50Iix7c2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpLG9iKCJGb2N1c0V2ZW50Iix7cmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpfXZhciBwYj13aW5kb3cuQmVmb3JlVW5sb2FkRXZlbnQ7eS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSksTSh5LnByb3RvdHlwZSx7Z2V0IHJldHVyblZhbHVlKCl7cmV0dXJuIHRoaXMuaW1wbC5yZXR1cm5WYWx1ZX0sc2V0IHJldHVyblZhbHVlKGEpe3RoaXMuaW1wbC5yZXR1cm5WYWx1ZT1hfX0pLHBiJiZOKHBiLHkpO3ZhciBxYj13aW5kb3cuRXZlbnRUYXJnZXQscmI9WyJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiXTtbTm9kZSxXaW5kb3ddLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5wcm90b3R5cGU7cmIuZm9yRWFjaChmdW5jdGlvbihhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYixhKyJfIix7dmFsdWU6YlthXX0pfSl9KSxCLnByb3RvdHlwZT17YWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7aWYoeihiKSYmIUEoYSkpe3ZhciBkPW5ldyBzKGEsYixjKSxlPVIuZ2V0KHRoaXMpO2lmKGUpe2Zvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKWlmKGQuZXF1YWxzKGVbZl0pKXJldHVybn1lbHNlIGU9W10sUi5zZXQodGhpcyxlKTtlLnB1c2goZCk7dmFyIGc9Qyh0aGlzKTtnLmFkZEV2ZW50TGlzdGVuZXJfKGEsbSwhMCl9fSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtjPUJvb2xlYW4oYyk7dmFyIGQ9Ui5nZXQodGhpcyk7aWYoZCl7Zm9yKHZhciBlPTAsZj0hMSxnPTA7ZzxkLmxlbmd0aDtnKyspZFtnXS50eXBlPT09YSYmZFtnXS5jYXB0dXJlPT09YyYmKGUrKyxkW2ddLmhhbmRsZXI9PT1iJiYoZj0hMCxkW2ddLnJlbW92ZSgpKSk7aWYoZiYmMT09PWUpe3ZhciBoPUModGhpcyk7aC5yZW1vdmVFdmVudExpc3RlbmVyXyhhLG0sITApfX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYil7dmFyIGM9TyhiKSxkPWMudHlwZTtTLnNldChjLCExKSxhLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgZTtFKHRoaXMsZCl8fChlPWZ1bmN0aW9uKCl7fSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZCxlLCEwKSk7dHJ5e3JldHVybiBPKHRoaXMpLmRpc3BhdGNoRXZlbnRfKGMpfWZpbmFsbHl7ZSYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGQsZSwhMCl9fX0scWImJk4ocWIsQik7dmFyIHNiPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQ7YS5lbGVtZW50RnJvbVBvaW50PUcsYS5nZXRFdmVudEhhbmRsZXJHZXR0ZXI9SCxhLmdldEV2ZW50SGFuZGxlclNldHRlcj1JLGEud3JhcEV2ZW50VGFyZ2V0TWV0aG9kcz1GLGEud3JhcHBlcnMuQmVmb3JlVW5sb2FkRXZlbnQ9eSxhLndyYXBwZXJzLkN1c3RvbUV2ZW50PWdiLGEud3JhcHBlcnMuRXZlbnQ9dCxhLndyYXBwZXJzLkV2ZW50VGFyZ2V0PUIsYS53cmFwcGVycy5Gb2N1c0V2ZW50PWxiLGEud3JhcHBlcnMuTW91c2VFdmVudD1rYixhLndyYXBwZXJzLlVJRXZlbnQ9ZmJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLG8pfWZ1bmN0aW9uIGMoYSl7dGhpcy5pbXBsPWF9ZnVuY3Rpb24gZCgpe3RoaXMubGVuZ3RoPTAsYih0aGlzLCJsZW5ndGgiKX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYj1uZXcgZCxlPTA7ZTxhLmxlbmd0aDtlKyspYltlXT1uZXcgYyhhW2VdKTtyZXR1cm4gYi5sZW5ndGg9ZSxifWZ1bmN0aW9uIGYoYSl7Zy5jYWxsKHRoaXMsYSl9dmFyIGc9YS53cmFwcGVycy5VSUV2ZW50LGg9YS5taXhpbixpPWEucmVnaXN0ZXJXcmFwcGVyLGo9YS51bndyYXAsaz1hLndyYXAsbD13aW5kb3cuVG91Y2hFdmVudDtpZihsKXt2YXIgbTt0cnl7bT1kb2N1bWVudC5jcmVhdGVFdmVudCgiVG91Y2hFdmVudCIpfWNhdGNoKG4pe3JldHVybn12YXIgbz17ZW51bWVyYWJsZTohMX07Yy5wcm90b3R5cGU9e2dldCB0YXJnZXQoKXtyZXR1cm4gayh0aGlzLmltcGwudGFyZ2V0KX19O3ZhciBwPXtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxnZXQ6bnVsbH07WyJjbGllbnRYIiwiY2xpZW50WSIsInNjcmVlblgiLCJzY3JlZW5ZIiwicGFnZVgiLCJwYWdlWSIsImlkZW50aWZpZXIiLCJ3ZWJraXRSYWRpdXNYIiwid2Via2l0UmFkaXVzWSIsIndlYmtpdFJvdGF0aW9uQW5nbGUiLCJ3ZWJraXRGb3JjZSJdLmZvckVhY2goZnVuY3Rpb24oYSl7cC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYy5wcm90b3R5cGUsYSxwKX0pLGQucHJvdG90eXBlPXtpdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzW2FdfX0sZi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSksaChmLnByb3RvdHlwZSx7Z2V0IHRvdWNoZXMoKXtyZXR1cm4gZShqKHRoaXMpLnRvdWNoZXMpfSxnZXQgdGFyZ2V0VG91Y2hlcygpe3JldHVybiBlKGoodGhpcykudGFyZ2V0VG91Y2hlcyl9LGdldCBjaGFuZ2VkVG91Y2hlcygpe3JldHVybiBlKGoodGhpcykuY2hhbmdlZFRvdWNoZXMpfSxpbml0VG91Y2hFdmVudDpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiTm90IGltcGxlbWVudGVkIil9fSksaShsLGYsbSksYS53cmFwcGVycy5Ub3VjaD1jLGEud3JhcHBlcnMuVG91Y2hFdmVudD1mLGEud3JhcHBlcnMuVG91Y2hMaXN0PWR9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYixnKX1mdW5jdGlvbiBjKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGQoYSl7aWYobnVsbD09YSlyZXR1cm4gYTtmb3IodmFyIGI9bmV3IGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyliW2RdPWYoYVtkXSk7cmV0dXJuIGIubGVuZ3RoPWUsYn1mdW5jdGlvbiBlKGEsYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX12YXIgZj1hLndyYXAsZz17ZW51bWVyYWJsZTohMX07Yy5wcm90b3R5cGU9e2l0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19fSxiKGMucHJvdG90eXBlLCJpdGVtIiksYS53cmFwcGVycy5Ob2RlTGlzdD1jLGEuYWRkV3JhcE5vZGVMaXN0TWV0aG9kPWUsYS53cmFwTm9kZUxpc3Q9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7YS53cmFwSFRNTENvbGxlY3Rpb249YS53cmFwTm9kZUxpc3QsYS53cmFwcGVycy5IVE1MQ29sbGVjdGlvbj1hLndyYXBwZXJzLk5vZGVMaXN0fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe0EoYSBpbnN0YW5jZW9mIHcpfWZ1bmN0aW9uIGMoYSl7dmFyIGI9bmV3IHk7cmV0dXJuIGJbMF09YSxiLmxlbmd0aD0xLGJ9ZnVuY3Rpb24gZChhLGIsYyl7QyhiLCJjaGlsZExpc3QiLHtyZW1vdmVkTm9kZXM6YyxwcmV2aW91c1NpYmxpbmc6YS5wcmV2aW91c1NpYmxpbmcsbmV4dFNpYmxpbmc6YS5uZXh0U2libGluZ30pfWZ1bmN0aW9uIGUoYSxiKXtDKGEsImNoaWxkTGlzdCIse3JlbW92ZWROb2RlczpifSl9ZnVuY3Rpb24gZihhLGIsZCxlKXtpZihhIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7dmFyIGY9aChhKTtPPSEwO2Zvcih2YXIgZz1mLmxlbmd0aC0xO2c+PTA7Zy0tKWEucmVtb3ZlQ2hpbGQoZltnXSksZltnXS5wYXJlbnROb2RlXz1iO089ITE7Zm9yKHZhciBnPTA7ZzxmLmxlbmd0aDtnKyspZltnXS5wcmV2aW91c1NpYmxpbmdfPWZbZy0xXXx8ZCxmW2ddLm5leHRTaWJsaW5nXz1mW2crMV18fGU7cmV0dXJuIGQmJihkLm5leHRTaWJsaW5nXz1mWzBdKSxlJiYoZS5wcmV2aW91c1NpYmxpbmdfPWZbZi5sZW5ndGgtMV0pLGZ9dmFyIGY9YyhhKSxpPWEucGFyZW50Tm9kZTtyZXR1cm4gaSYmaS5yZW1vdmVDaGlsZChhKSxhLnBhcmVudE5vZGVfPWIsYS5wcmV2aW91c1NpYmxpbmdfPWQsYS5uZXh0U2libGluZ189ZSxkJiYoZC5uZXh0U2libGluZ189YSksZSYmKGUucHJldmlvdXNTaWJsaW5nXz1hKSxmfWZ1bmN0aW9uIGcoYSl7aWYoYSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpcmV0dXJuIGgoYSk7dmFyIGI9YyhhKSxlPWEucGFyZW50Tm9kZTtyZXR1cm4gZSYmZChhLGUsYiksYn1mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYj1uZXcgeSxjPTAsZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYltjKytdPWQ7cmV0dXJuIGIubGVuZ3RoPWMsZShhLGIpLGJ9ZnVuY3Rpb24gaShhKXtyZXR1cm4gYX1mdW5jdGlvbiBqKGEsYil7SShhLGIpLGEubm9kZUlzSW5zZXJ0ZWRfKCl9ZnVuY3Rpb24gayhhLGIpe2Zvcih2YXIgYz1EKGIpLGQ9MDtkPGEubGVuZ3RoO2QrKylqKGFbZF0sYyl9ZnVuY3Rpb24gbChhKXtJKGEsbmV3IHooYSxudWxsKSl9ZnVuY3Rpb24gbShhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylsKGFbYl0pfWZ1bmN0aW9uIG4oYSxiKXt2YXIgYz1hLm5vZGVUeXBlPT09dy5ET0NVTUVOVF9OT0RFP2E6YS5vd25lckRvY3VtZW50O2MhPT1iLm93bmVyRG9jdW1lbnQmJmMuYWRvcHROb2RlKGIpfWZ1bmN0aW9uIG8oYixjKXtpZihjLmxlbmd0aCl7dmFyIGQ9Yi5vd25lckRvY3VtZW50O2lmKGQhPT1jWzBdLm93bmVyRG9jdW1lbnQpZm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspYS5hZG9wdE5vZGVOb1JlbW92ZShjW2VdLGQpfX1mdW5jdGlvbiBwKGEsYil7byhhLGIpO3ZhciBjPWIubGVuZ3RoO2lmKDE9PT1jKXJldHVybiBKKGJbMF0pO2Zvcih2YXIgZD1KKGEub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGU9MDtjPmU7ZSsrKWQuYXBwZW5kQ2hpbGQoSihiW2VdKSk7cmV0dXJuIGR9ZnVuY3Rpb24gcShhKXtpZih2b2lkIDAhPT1hLmZpcnN0Q2hpbGRfKWZvcih2YXIgYj1hLmZpcnN0Q2hpbGRfO2I7KXt2YXIgYz1iO2I9Yi5uZXh0U2libGluZ18sYy5wYXJlbnROb2RlXz1jLnByZXZpb3VzU2libGluZ189Yy5uZXh0U2libGluZ189dm9pZCAwfWEuZmlyc3RDaGlsZF89YS5sYXN0Q2hpbGRfPXZvaWQgMH1mdW5jdGlvbiByKGEpe2lmKGEuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7Yjspe0EoYi5wYXJlbnROb2RlPT09YSk7dmFyIGM9Yi5uZXh0U2libGluZyxkPUooYiksZT1kLnBhcmVudE5vZGU7ZSYmVi5jYWxsKGUsZCksYi5wcmV2aW91c1NpYmxpbmdfPWIubmV4dFNpYmxpbmdfPWIucGFyZW50Tm9kZV89bnVsbCxiPWN9YS5maXJzdENoaWxkXz1hLmxhc3RDaGlsZF89bnVsbH1lbHNlIGZvcih2YXIgYyxmPUooYSksZz1mLmZpcnN0Q2hpbGQ7ZzspYz1nLm5leHRTaWJsaW5nLFYuY2FsbChmLGcpLGc9Y31mdW5jdGlvbiBzKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX1mdW5jdGlvbiB0KGEpe2Zvcih2YXIgYixjPTA7YzxhLmxlbmd0aDtjKyspYj1hW2NdLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKX1mdW5jdGlvbiB1KGEsYixjKXt2YXIgZDtpZihkPUwoYz9QLmNhbGwoYyxhLmltcGwsITEpOlEuY2FsbChhLmltcGwsITEpKSxiKXtmb3IodmFyIGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWQuYXBwZW5kQ2hpbGQodShlLCEwLGMpKTtpZihhIGluc3RhbmNlb2YgTi5IVE1MVGVtcGxhdGVFbGVtZW50KWZvcih2YXIgZj1kLmNvbnRlbnQsZT1hLmNvbnRlbnQuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylmLmFwcGVuZENoaWxkKHUoZSwhMCxjKSl9cmV0dXJuIGR9ZnVuY3Rpb24gdihhLGIpe2lmKCFifHxEKGEpIT09RChiKSlyZXR1cm4hMTtmb3IodmFyIGM9YjtjO2M9Yy5wYXJlbnROb2RlKWlmKGM9PT1hKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHcoYSl7QShhIGluc3RhbmNlb2YgUikseC5jYWxsKHRoaXMsYSksdGhpcy5wYXJlbnROb2RlXz12b2lkIDAsdGhpcy5maXJzdENoaWxkXz12b2lkIDAsdGhpcy5sYXN0Q2hpbGRfPXZvaWQgMCx0aGlzLm5leHRTaWJsaW5nXz12b2lkIDAsdGhpcy5wcmV2aW91c1NpYmxpbmdfPXZvaWQgMCx0aGlzLnRyZWVTY29wZV89dm9pZCAwfXZhciB4PWEud3JhcHBlcnMuRXZlbnRUYXJnZXQseT1hLndyYXBwZXJzLk5vZGVMaXN0LHo9YS5UcmVlU2NvcGUsQT1hLmFzc2VydCxCPWEuZGVmaW5lV3JhcEdldHRlcixDPWEuZW5xdWV1ZU11dGF0aW9uLEQ9YS5nZXRUcmVlU2NvcGUsRT1hLmlzV3JhcHBlcixGPWEubWl4aW4sRz1hLnJlZ2lzdGVyVHJhbnNpZW50T2JzZXJ2ZXJzLEg9YS5yZWdpc3RlcldyYXBwZXIsST1hLnNldFRyZWVTY29wZSxKPWEudW53cmFwLEs9YS51bndyYXBJZk5lZWRlZCxMPWEud3JhcCxNPWEud3JhcElmTmVlZGVkLE49YS53cmFwcGVycyxPPSExLFA9ZG9jdW1lbnQuaW1wb3J0Tm9kZSxRPXdpbmRvdy5Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGUsUj13aW5kb3cuTm9kZSxTPXdpbmRvdy5Eb2N1bWVudEZyYWdtZW50LFQ9KFIucHJvdG90eXBlLmFwcGVuZENoaWxkLFIucHJvdG90eXBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSxVPVIucHJvdG90eXBlLmluc2VydEJlZm9yZSxWPVIucHJvdG90eXBlLnJlbW92ZUNoaWxkLFc9Ui5wcm90b3R5cGUucmVwbGFjZUNoaWxkLFg9L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksWT1YP2Z1bmN0aW9uKGEsYil7dHJ5e1YuY2FsbChhLGIpfWNhdGNoKGMpe2lmKCEoYSBpbnN0YW5jZW9mIFMpKXRocm93IGN9fTpmdW5jdGlvbihhLGIpe1YuY2FsbChhLGIpfTt3LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSxGKHcucHJvdG90eXBlLHthcHBlbmRDaGlsZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUoYSxudWxsKX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGEsYyl7YihhKTt2YXIgZDtjP0UoYyk/ZD1KKGMpOihkPWMsYz1MKGQpKTooYz1udWxsLGQ9bnVsbCksYyYmQShjLnBhcmVudE5vZGU9PT10aGlzKTt2YXIgZSxoPWM/Yy5wcmV2aW91c1NpYmxpbmc6dGhpcy5sYXN0Q2hpbGQsaT0hdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSYmIXMoYSk7aWYoZT1pP2coYSk6ZihhLHRoaXMsaCxjKSxpKW4odGhpcyxhKSxxKHRoaXMpLFUuY2FsbCh0aGlzLmltcGwsSihhKSxkKTtlbHNle2h8fCh0aGlzLmZpcnN0Q2hpbGRfPWVbMF0pLGN8fCh0aGlzLmxhc3RDaGlsZF89ZVtlLmxlbmd0aC0xXSx2b2lkIDA9PT10aGlzLmZpcnN0Q2hpbGRfJiYodGhpcy5maXJzdENoaWxkXz10aGlzLmZpcnN0Q2hpbGQpKTt2YXIgaj1kP2QucGFyZW50Tm9kZTp0aGlzLmltcGw7aj9VLmNhbGwoaixwKHRoaXMsZSksZCk6byh0aGlzLGUpfXJldHVybiBDKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6ZSxuZXh0U2libGluZzpjLHByZXZpb3VzU2libGluZzpofSksayhlLHRoaXMpLGF9LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGEpe2lmKGIoYSksYS5wYXJlbnROb2RlIT09dGhpcyl7Zm9yKHZhciBkPSExLGU9KHRoaXMuY2hpbGROb2Rlcyx0aGlzLmZpcnN0Q2hpbGQpO2U7ZT1lLm5leHRTaWJsaW5nKWlmKGU9PT1hKXtkPSEwO2JyZWFrfWlmKCFkKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpfXZhciBmPUooYSksZz1hLm5leHRTaWJsaW5nLGg9YS5wcmV2aW91c1NpYmxpbmc7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7dmFyIGk9dGhpcy5maXJzdENoaWxkLGo9dGhpcy5sYXN0Q2hpbGQsaz1mLnBhcmVudE5vZGU7ayYmWShrLGYpLGk9PT1hJiYodGhpcy5maXJzdENoaWxkXz1nKSxqPT09YSYmKHRoaXMubGFzdENoaWxkXz1oKSxoJiYoaC5uZXh0U2libGluZ189ZyksZyYmKGcucHJldmlvdXNTaWJsaW5nXz1oKSxhLnByZXZpb3VzU2libGluZ189YS5uZXh0U2libGluZ189YS5wYXJlbnROb2RlXz12b2lkIDB9ZWxzZSBxKHRoaXMpLFkodGhpcy5pbXBsLGYpO3JldHVybiBPfHxDKHRoaXMsImNoaWxkTGlzdCIse3JlbW92ZWROb2RlczpjKGEpLG5leHRTaWJsaW5nOmcscHJldmlvdXNTaWJsaW5nOmh9KSxHKHRoaXMsYSksYX0scmVwbGFjZUNoaWxkOmZ1bmN0aW9uKGEsZCl7YihhKTt2YXIgZTtpZihFKGQpP2U9SihkKTooZT1kLGQ9TChlKSksZC5wYXJlbnROb2RlIT09dGhpcyl0aHJvdyBuZXcgRXJyb3IoIk5vdEZvdW5kRXJyb3IiKTt2YXIgaCxpPWQubmV4dFNpYmxpbmcsaj1kLnByZXZpb3VzU2libGluZyxtPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhcyhhKTtyZXR1cm4gbT9oPWcoYSk6KGk9PT1hJiYoaT1hLm5leHRTaWJsaW5nKSxoPWYoYSx0aGlzLGosaSkpLG0/KG4odGhpcyxhKSxxKHRoaXMpLFcuY2FsbCh0aGlzLmltcGwsSihhKSxlKSk6KHRoaXMuZmlyc3RDaGlsZD09PWQmJih0aGlzLmZpcnN0Q2hpbGRfPWhbMF0pLHRoaXMubGFzdENoaWxkPT09ZCYmKHRoaXMubGFzdENoaWxkXz1oW2gubGVuZ3RoLTFdKSxkLnByZXZpb3VzU2libGluZ189ZC5uZXh0U2libGluZ189ZC5wYXJlbnROb2RlXz12b2lkIDAsZS5wYXJlbnROb2RlJiZXLmNhbGwoZS5wYXJlbnROb2RlLHAodGhpcyxoKSxlKSksQyh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmgscmVtb3ZlZE5vZGVzOmMoZCksbmV4dFNpYmxpbmc6aSxwcmV2aW91c1NpYmxpbmc6an0pLGwoZCksayhoLHRoaXMpLGR9LG5vZGVJc0luc2VydGVkXzpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYS5ub2RlSXNJbnNlcnRlZF8oKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86TCh0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBmaXJzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZmlyc3RDaGlsZF8/dGhpcy5maXJzdENoaWxkXzpMKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmxhc3RDaGlsZF8/dGhpcy5sYXN0Q2hpbGRfOkwodGhpcy5pbXBsLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpMKHRoaXMuaW1wbC5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5wcmV2aW91c1NpYmxpbmdfP3RoaXMucHJldmlvdXNTaWJsaW5nXzpMKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgcGFyZW50RWxlbWVudCgpe2Zvcih2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5ub2RlVHlwZSE9PXcuRUxFTUVOVF9OT0RFOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX0sZ2V0IHRleHRDb250ZW50KCl7Zm9yKHZhciBhPSIiLGI9dGhpcy5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKWIubm9kZVR5cGUhPXcuQ09NTUVOVF9OT0RFJiYoYSs9Yi50ZXh0Q29udGVudCk7cmV0dXJuIGF9LHNldCB0ZXh0Q29udGVudChhKXt2YXIgYj1pKHRoaXMuY2hpbGROb2Rlcyk7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7aWYocih0aGlzKSwiIiE9PWEpe3ZhciBjPXRoaXMuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpO3RoaXMuYXBwZW5kQ2hpbGQoYyl9fWVsc2UgcSh0aGlzKSx0aGlzLmltcGwudGV4dENvbnRlbnQ9YTt2YXIgZD1pKHRoaXMuY2hpbGROb2Rlcyk7Qyh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmQscmVtb3ZlZE5vZGVzOmJ9KSxtKGIpLGsoZCx0aGlzKX0sZ2V0IGNoaWxkTm9kZXMoKXtmb3IodmFyIGE9bmV3IHksYj0wLGM9dGhpcy5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9LGNsb25lTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdSh0aGlzLGEpfSxjb250YWluczpmdW5jdGlvbihhKXtyZXR1cm4gdih0aGlzLE0oYSkpfSxjb21wYXJlRG9jdW1lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gVC5jYWxsKHRoaXMuaW1wbCxLKGEpKX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz1pKHRoaXMuY2hpbGROb2RlcyksZD1bXSxlPSIiLGY9MDtmPGMubGVuZ3RoO2YrKyliPWNbZl0sYi5ub2RlVHlwZT09PXcuVEVYVF9OT0RFP2F8fGIuZGF0YS5sZW5ndGg/YT8oZSs9Yi5kYXRhLGQucHVzaChiKSk6YT1iOnRoaXMucmVtb3ZlTm9kZShiKTooYSYmZC5sZW5ndGgmJihhLmRhdGErPWUsdChkKSksZD1bXSxlPSIiLGE9bnVsbCxiLmNoaWxkTm9kZXMubGVuZ3RoJiZiLm5vcm1hbGl6ZSgpKTthJiZkLmxlbmd0aCYmKGEuZGF0YSs9ZSx0KGQpKX19KSxCKHcsIm93bmVyRG9jdW1lbnQiKSxIKFIsdyxkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGRlbGV0ZSB3LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yLGRlbGV0ZSB3LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLHcucHJvdG90eXBlPUYoT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSksdy5wcm90b3R5cGUpLGEuY2xvbmVOb2RlPXUsYS5ub2RlV2FzQWRkZWQ9aixhLm5vZGVXYXNSZW1vdmVkPWwsYS5ub2Rlc1dlcmVBZGRlZD1rLGEubm9kZXNXZXJlUmVtb3ZlZD1tLGEuc25hcHNob3ROb2RlTGlzdD1pLGEud3JhcHBlcnMuTm9kZT13fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYyl7Zm9yKHZhciBkLGU9YS5maXJzdEVsZW1lbnRDaGlsZDtlOyl7aWYoZS5tYXRjaGVzKGMpKXJldHVybiBlO2lmKGQ9YihlLGMpKXJldHVybiBkO2U9ZS5uZXh0RWxlbWVudFNpYmxpbmd9cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBhLm1hdGNoZXMoYil9ZnVuY3Rpb24gZChhLGIsYyl7dmFyIGQ9YS5sb2NhbE5hbWU7cmV0dXJuIGQ9PT1ifHxkPT09YyYmYS5uYW1lc3BhY2VVUkk9PT1sfWZ1bmN0aW9uIGUoKXtyZXR1cm4hMH1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIGEubG9jYWxOYW1lPT09Yn1mdW5jdGlvbiBnKGEsYil7cmV0dXJuIGEubmFtZXNwYWNlVVJJPT09Yn1mdW5jdGlvbiBoKGEsYixjKXtyZXR1cm4gYS5uYW1lc3BhY2VVUkk9PT1iJiZhLmxvY2FsTmFtZT09PWN9ZnVuY3Rpb24gaShhLGIsYyxkLGUpe2Zvcih2YXIgZj1hLmZpcnN0RWxlbWVudENoaWxkO2Y7KWMoZixkLGUpJiYoYltiLmxlbmd0aCsrXT1mKSxpKGYsYixjLGQsZSksZj1mLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gYn12YXIgaj1hLndyYXBwZXJzLkhUTUxDb2xsZWN0aW9uLGs9YS53cmFwcGVycy5Ob2RlTGlzdCxsPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIixtPXtxdWVyeVNlbGVjdG9yOmZ1bmN0aW9uKGEpe3JldHVybiBiKHRoaXMsYSl9LHF1ZXJ5U2VsZWN0b3JBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIGkodGhpcyxuZXcgayxjLGEpfX0sbj17Z2V0RWxlbWVudHNCeVRhZ05hbWU6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGo7cmV0dXJuIioiPT09YT9pKHRoaXMsYixlKTppKHRoaXMsYixkLGEsYS50b0xvd2VyQ2FzZSgpKX0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCIuIithKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWVOUzpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBqO2lmKCIiPT09YSlhPW51bGw7ZWxzZSBpZigiKiI9PT1hKXJldHVybiIqIj09PWI/aSh0aGlzLGMsZSk6aSh0aGlzLGMsZixiKTtyZXR1cm4iKiI9PT1iP2kodGhpcyxjLGcsYSk6aSh0aGlzLGMsaCxhLGIpfX07YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlPW4sYS5TZWxlY3RvcnNJbnRlcmZhY2U9bX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLm5leHRTaWJsaW5nO3JldHVybiBhfWZ1bmN0aW9uIGMoYSl7Zm9yKDthJiZhLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWE9YS5wcmV2aW91c1NpYmxpbmc7cmV0dXJuIGF9dmFyIGQ9YS53cmFwcGVycy5Ob2RlTGlzdCxlPXtnZXQgZmlyc3RFbGVtZW50Q2hpbGQoKXtyZXR1cm4gYih0aGlzLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBjKHRoaXMubGFzdENoaWxkKX0sZ2V0IGNoaWxkRWxlbWVudENvdW50KCl7Zm9yKHZhciBhPTAsYj10aGlzLmZpcnN0RWxlbWVudENoaWxkO2I7Yj1iLm5leHRFbGVtZW50U2libGluZylhKys7cmV0dXJuIGF9LGdldCBjaGlsZHJlbigpe2Zvcih2YXIgYT1uZXcgZCxiPTAsYz10aGlzLmZpcnN0RWxlbWVudENoaWxkO2M7Yz1jLm5leHRFbGVtZW50U2libGluZylhW2IrK109YztyZXR1cm4gYS5sZW5ndGg9YixhfSxyZW1vdmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5yZW1vdmVDaGlsZCh0aGlzKX19LGY9e2dldCBuZXh0RWxlbWVudFNpYmxpbmcoKXtyZXR1cm4gYih0aGlzLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzRWxlbWVudFNpYmxpbmcoKXtyZXR1cm4gYyh0aGlzLnByZXZpb3VzU2libGluZyl9fTthLkNoaWxkTm9kZUludGVyZmFjZT1mLGEuUGFyZW50Tm9kZUludGVyZmFjZT1lfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfXZhciBjPWEuQ2hpbGROb2RlSW50ZXJmYWNlLGQ9YS53cmFwcGVycy5Ob2RlLGU9YS5lbnF1ZXVlTXV0YXRpb24sZj1hLm1peGluLGc9YS5yZWdpc3RlcldyYXBwZXIsaD13aW5kb3cuQ2hhcmFjdGVyRGF0YTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxmKGIucHJvdG90eXBlLHtnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoYSl7dGhpcy5kYXRhPWF9LGdldCBkYXRhKCl7cmV0dXJuIHRoaXMuaW1wbC5kYXRhfSxzZXQgZGF0YShhKXt2YXIgYj10aGlzLmltcGwuZGF0YTtlKHRoaXMsImNoYXJhY3RlckRhdGEiLHtvbGRWYWx1ZTpifSksdGhpcy5pbXBsLmRhdGE9YX19KSxmKGIucHJvdG90eXBlLGMpLGcoaCxiLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGE+Pj4wfWZ1bmN0aW9uIGMoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGQ9YS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhLGU9KGEuZW5xdWV1ZU11dGF0aW9uLGEubWl4aW4pLGY9YS5yZWdpc3RlcldyYXBwZXIsZz13aW5kb3cuVGV4dDtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGMucHJvdG90eXBlLHtzcGxpdFRleHQ6ZnVuY3Rpb24oYSl7YT1iKGEpO3ZhciBjPXRoaXMuZGF0YTtpZihhPmMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW5kZXhTaXplRXJyb3IiKTt2YXIgZD1jLnNsaWNlKDAsYSksZT1jLnNsaWNlKGEpO3RoaXMuZGF0YT1kO3ZhciBmPXRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKTtyZXR1cm4gdGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYsdGhpcy5uZXh0U2libGluZyksZn19KSxmKGcsYyxkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGEud3JhcHBlcnMuVGV4dD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIpe2EuaW52YWxpZGF0ZVJlbmRlcmVyQmFzZWRPbkF0dHJpYnV0ZShiLCJjbGFzcyIpfWZ1bmN0aW9uIGMoYSxiKXt0aGlzLmltcGw9YSx0aGlzLm93bmVyRWxlbWVudF89Yn1jLnByb3RvdHlwZT17Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLmltcGwubGVuZ3RofSxpdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmltcGwuaXRlbShhKX0sY29udGFpbnM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1wbC5jb250YWlucyhhKX0sYWRkOmZ1bmN0aW9uKCl7dGhpcy5pbXBsLmFkZC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSxiKHRoaXMub3duZXJFbGVtZW50Xyl9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuaW1wbC5yZW1vdmUuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyksYih0aGlzLm93bmVyRWxlbWVudF8pfSx0b2dnbGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltcGwudG9nZ2xlLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpO3JldHVybiBiKHRoaXMub3duZXJFbGVtZW50XyksYX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxhLndyYXBwZXJzLkRPTVRva2VuTGlzdD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIsYyl7dmFyIGQ9Yi5wYXJlbnROb2RlO2lmKGQmJmQuc2hhZG93Um9vdCl7dmFyIGU9YS5nZXRSZW5kZXJlckZvckhvc3QoZCk7ZS5kZXBlbmRzT25BdHRyaWJ1dGUoYykmJmUuaW52YWxpZGF0ZSgpfX1mdW5jdGlvbiBjKGEsYixjKXtrKGEsImF0dHJpYnV0ZXMiLHtuYW1lOmIsbmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6Y30pfWZ1bmN0aW9uIGQoYSl7Zy5jYWxsKHRoaXMsYSl9dmFyIGU9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsZz1hLndyYXBwZXJzLk5vZGUsaD1hLndyYXBwZXJzLkRPTVRva2VuTGlzdCxpPWEuUGFyZW50Tm9kZUludGVyZmFjZSxqPWEuU2VsZWN0b3JzSW50ZXJmYWNlLGs9KGEuYWRkV3JhcE5vZGVMaXN0TWV0aG9kLGEuZW5xdWV1ZU11dGF0aW9uKSxsPWEubWl4aW4sbT0oYS5vbmVPZixhLnJlZ2lzdGVyV3JhcHBlciksbj1hLnVud3JhcCxvPWEud3JhcHBlcnMscD13aW5kb3cuRWxlbWVudCxxPVsibWF0Y2hlcyIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIl0uZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBwLnByb3RvdHlwZVthXX0pLHI9cVswXSxzPXAucHJvdG90eXBlW3JdLHQ9bmV3IFdlYWtNYXA7ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSksbChkLnByb3RvdHlwZSx7Y3JlYXRlU2hhZG93Um9vdDpmdW5jdGlvbigpe3ZhciBiPW5ldyBvLlNoYWRvd1Jvb3QodGhpcyk7dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSb290Xz1iO3ZhciBjPWEuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMpO3JldHVybiBjLmludmFsaWRhdGUoKSxifSxnZXQgc2hhZG93Um9vdCgpe3JldHVybiB0aGlzLmltcGwucG9seW1lclNoYWRvd1Jvb3RffHxudWxsfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxkKXt2YXIgZT10aGlzLmltcGwuZ2V0QXR0cmlidXRlKGEpO3RoaXMuaW1wbC5zZXRBdHRyaWJ1dGUoYSxkKSxjKHRoaXMsYSxlKSxiKHRoaXMsYSl9LHJlbW92ZUF0dHJpYnV0ZTpmdW5jdGlvbihhKXt2YXIgZD10aGlzLmltcGwuZ2V0QXR0cmlidXRlKGEpO3RoaXMuaW1wbC5yZW1vdmVBdHRyaWJ1dGUoYSksYyh0aGlzLGEsZCksYih0aGlzLGEpfSxtYXRjaGVzOmZ1bmN0aW9uKGEpe3JldHVybiBzLmNhbGwodGhpcy5pbXBsLGEpfSxnZXQgY2xhc3NMaXN0KCl7dmFyIGE9dC5nZXQodGhpcyk7cmV0dXJuIGF8fHQuc2V0KHRoaXMsYT1uZXcgaChuKHRoaXMpLmNsYXNzTGlzdCx0aGlzKSksYX0sZ2V0IGNsYXNzTmFtZSgpe3JldHVybiBuKHRoaXMpLmNsYXNzTmFtZX0sc2V0IGNsYXNzTmFtZShhKXt0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGEpfSxnZXQgaWQoKXtyZXR1cm4gbih0aGlzKS5pZH0sc2V0IGlkKGEpe3RoaXMuc2V0QXR0cmlidXRlKCJpZCIsYSl9fSkscS5mb3JFYWNoKGZ1bmN0aW9uKGEpeyJtYXRjaGVzIiE9PWEmJihkLnByb3RvdHlwZVthXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXRjaGVzKGEpfSl9KSxwLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290JiYoZC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1kLnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290KSxsKGQucHJvdG90eXBlLGUpLGwoZC5wcm90b3R5cGUsZiksbChkLnByb3RvdHlwZSxpKSxsKGQucHJvdG90eXBlLGopLG0ocCxkLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhudWxsLCJ4IikpLGEuaW52YWxpZGF0ZVJlbmRlcmVyQmFzZWRPbkF0dHJpYnV0ZT1iLGEubWF0Y2hlc05hbWVzPXEsYS53cmFwcGVycy5FbGVtZW50PWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7c3dpdGNoKGEpe2Nhc2UiJiI6cmV0dXJuIiZhbXA7IjtjYXNlIjwiOnJldHVybiImbHQ7IjtjYXNlIj4iOnJldHVybiImZ3Q7IjtjYXNlJyInOnJldHVybiImcXVvdDsiO2Nhc2UiXHhhMCI6cmV0dXJuIiZuYnNwOyJ9fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucmVwbGFjZSh6LGIpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEucmVwbGFjZShBLGIpfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPXt9LGM9MDtjPGEubGVuZ3RoO2MrKyliW2FbY11dPSEwO3JldHVybiBifWZ1bmN0aW9uIGYoYSxiKXtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmb3IodmFyIGUsZj1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxoPSI8IitmLGk9YS5hdHRyaWJ1dGVzLGo9MDtlPWlbal07aisrKWgrPSIgIitlLm5hbWUrJz0iJytjKGUudmFsdWUpKyciJztyZXR1cm4gaCs9Ij4iLEJbZl0/aDpoK2coYSkrIjwvIitmKyI+IjtjYXNlIE5vZGUuVEVYVF9OT0RFOnZhciBrPWEuZGF0YTtyZXR1cm4gYiYmQ1tiLmxvY2FsTmFtZV0/azpkKGspO2Nhc2UgTm9kZS5DT01NRU5UX05PREU6cmV0dXJuIjwhLS0iK2EuZGF0YSsiLS0+IjtkZWZhdWx0OnRocm93IGNvbnNvbGUuZXJyb3IoYSksbmV3IEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKX19ZnVuY3Rpb24gZyhhKXthIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50JiYoYT1hLmNvbnRlbnQpO2Zvcih2YXIgYj0iIixjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyliKz1mKGMsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGQ9Y3x8ImRpdiI7YS50ZXh0Q29udGVudD0iIjt2YXIgZT13KGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KGQpKTtlLmlubmVySFRNTD1iO2Zvcih2YXIgZjtmPWUuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZCh4KGYpKX1mdW5jdGlvbiBpKGEpe28uY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz13KGEuY2xvbmVOb2RlKCExKSk7Yy5pbm5lckhUTUw9Yjtmb3IodmFyIGQsZT13KGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7ZD1jLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoZCk7cmV0dXJuIHgoZSl9ZnVuY3Rpb24gayhiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdfX1mdW5jdGlvbiBsKGEpe3AoaSxhLGsoYSkpfWZ1bmN0aW9uIG0oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLGIse2dldDprKGIpLHNldDpmdW5jdGlvbihjKXthLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl09Y30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBuKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxiLHt2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIG89YS53cmFwcGVycy5FbGVtZW50LHA9YS5kZWZpbmVHZXR0ZXIscT1hLmVucXVldWVNdXRhdGlvbixyPWEubWl4aW4scz1hLm5vZGVzV2VyZUFkZGVkLHQ9YS5ub2Rlc1dlcmVSZW1vdmVkLHU9YS5yZWdpc3RlcldyYXBwZXIsdj1hLnNuYXBzaG90Tm9kZUxpc3Qsdz1hLnVud3JhcCx4PWEud3JhcCx5PWEud3JhcHBlcnMsej0vWyZcdTAwQTAiXS9nLEE9L1smXHUwMEEwPD5dL2csQj1lKFsiYXJlYSIsImJhc2UiLCJiciIsImNvbCIsImNvbW1hbmQiLCJlbWJlZCIsImhyIiwiaW1nIiwiaW5wdXQiLCJrZXlnZW4iLCJsaW5rIiwibWV0YSIsInBhcmFtIiwic291cmNlIiwidHJhY2siLCJ3YnIiXSksQz1lKFsic3R5bGUiLCJzY3JpcHQiLCJ4bXAiLCJpZnJhbWUiLCJub2VtYmVkIiwibm9mcmFtZXMiLCJwbGFpbnRleHQiLCJub3NjcmlwdCJdKSxEPS9NU0lFLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLEU9d2luZG93LkhUTUxFbGVtZW50LEY9d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSkscihpLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBnKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2lmKEQmJkNbdGhpcy5sb2NhbE5hbWVdKXJldHVybiB2b2lkKHRoaXMudGV4dENvbnRlbnQ9YSk7dmFyIGI9dih0aGlzLmNoaWxkTm9kZXMpO3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk/dGhpcyBpbnN0YW5jZW9mIHkuSFRNTFRlbXBsYXRlRWxlbWVudD9oKHRoaXMuY29udGVudCxhKTpoKHRoaXMsYSx0aGlzLnRhZ05hbWUpOiFGJiZ0aGlzIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50P2godGhpcy5jb250ZW50LGEpOnRoaXMuaW1wbC5pbm5lckhUTUw9YTt2YXIgYz12KHRoaXMuY2hpbGROb2Rlcyk7cSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmMscmVtb3ZlZE5vZGVzOmJ9KSx0KGIpLHMoYyx0aGlzKX0sZ2V0IG91dGVySFRNTCgpe3JldHVybiBmKHRoaXMsdGhpcy5wYXJlbnROb2RlKX0sc2V0IG91dGVySFRNTChhKXt2YXIgYj10aGlzLnBhcmVudE5vZGU7aWYoYil7Yi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKTt2YXIgYz1qKGIsYSk7Yi5yZXBsYWNlQ2hpbGQoYyx0aGlzKX19LGluc2VydEFkamFjZW50SFRNTDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7c3dpdGNoKFN0cmluZyhhKS50b0xvd2VyQ2FzZSgpKXtjYXNlImJlZm9yZWJlZ2luIjpjPXRoaXMucGFyZW50Tm9kZSxkPXRoaXM7YnJlYWs7Y2FzZSJhZnRlcmVuZCI6Yz10aGlzLnBhcmVudE5vZGUsZD10aGlzLm5leHRTaWJsaW5nO2JyZWFrO2Nhc2UiYWZ0ZXJiZWdpbiI6Yz10aGlzLGQ9dGhpcy5maXJzdENoaWxkO2JyZWFrO2Nhc2UiYmVmb3JlZW5kIjpjPXRoaXMsZD1udWxsO2JyZWFrO2RlZmF1bHQ6cmV0dXJufXZhciBlPWooYyxiKTtjLmluc2VydEJlZm9yZShlLGQpfX0pLFsiY2xpZW50SGVpZ2h0IiwiY2xpZW50TGVmdCIsImNsaWVudFRvcCIsImNsaWVudFdpZHRoIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFdpZHRoIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsV2lkdGgiXS5mb3JFYWNoKGwpLFsic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCJdLmZvckVhY2gobSksWyJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXRDbGllbnRSZWN0cyIsInNjcm9sbEludG9WaWV3Il0uZm9yRWFjaChuKSx1KEUsaSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiIikpLGEud3JhcHBlcnMuSFRNTEVsZW1lbnQ9aSxhLmdldElubmVySFRNTD1nLGEuc2V0SW5uZXJIVE1MPWh9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcCxnPXdpbmRvdy5IVE1MQ2FudmFzRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXRDb250ZXh0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbXBsLmdldENvbnRleHQuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyk7cmV0dXJuIGEmJmYoYSl9fSksZShnLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikpLGEud3JhcHBlcnMuSFRNTENhbnZhc0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9d2luZG93LkhUTUxDb250ZW50RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgc2VsZWN0KCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKX0sc2V0IHNlbGVjdChhKXt0aGlzLnNldEF0dHJpYnV0ZSgic2VsZWN0IixhKX0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7Yy5wcm90b3R5cGUuc2V0QXR0cmlidXRlLmNhbGwodGhpcyxhLGIpLCJzZWxlY3QiPT09U3RyaW5nKGEpLnRvTG93ZXJDYXNlKCkmJnRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCEwKX19KSxmJiZlKGYsYiksYS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtkLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBjKGEsYil7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGU9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKSk7ZC5jYWxsKHRoaXMsZSksZyhlLHRoaXMpLHZvaWQgMCE9PWEmJihlLndpZHRoPWEpLHZvaWQgMCE9PWImJihlLmhlaWdodD1iKX12YXIgZD1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxJbWFnZUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpLGMucHJvdG90eXBlPWIucHJvdG90eXBlLGEud3JhcHBlcnMuSFRNTEltYWdlRWxlbWVudD1iLGEud3JhcHBlcnMuSW1hZ2U9Y30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9KGEubWl4aW4sYS53cmFwcGVycy5Ob2RlTGlzdCxhLnJlZ2lzdGVyV3JhcHBlciksZT13aW5kb3cuSFRNTFNoYWRvd0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZSYmZChlLGIpLGEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYS5kZWZhdWx0VmlldylyZXR1cm4gYTt2YXIgYj1rLmdldChhKTtpZighYil7Zm9yKGI9YS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpO2IubGFzdENoaWxkOyliLnJlbW92ZUNoaWxkKGIubGFzdENoaWxkKTtrLnNldChhLGIpfXJldHVybiBifWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBjLGQ9YihhLm93bmVyRG9jdW1lbnQpLGU9aChkLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Yz1hLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGV9ZnVuY3Rpb24gZChhKXtpZihlLmNhbGwodGhpcyxhKSwhbCl7dmFyIGI9YyhhKTtqLnNldCh0aGlzLGkoYikpfX12YXIgZT1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGY9YS5taXhpbixnPWEucmVnaXN0ZXJXcmFwcGVyLGg9YS51bndyYXAsaT1hLndyYXAsaj1uZXcgV2Vha01hcCxrPW5ldyBXZWFrTWFwLGw9d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZihkLnByb3RvdHlwZSx7Z2V0IGNvbnRlbnQoKXtyZXR1cm4gbD9pKHRoaXMuaW1wbC5jb250ZW50KTpqLmdldCh0aGlzKX19KSxsJiZnKGwsZCksYS53cmFwcGVycy5IVE1MVGVtcGxhdGVFbGVtZW50PWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEucmVnaXN0ZXJXcmFwcGVyLGU9d2luZG93LkhUTUxNZWRpYUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChlLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSksYS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhKXtpZighKHRoaXMgaW5zdGFuY2VvZiBjKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt2YXIgYj1mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIikpO2QuY2FsbCh0aGlzLGIpLGcoYix0aGlzKSxiLnNldEF0dHJpYnV0ZSgicHJlbG9hZCIsImF1dG8iKSx2b2lkIDAhPT1hJiZiLnNldEF0dHJpYnV0ZSgic3JjIixhKX12YXIgZD1hLndyYXBwZXJzLkhUTUxNZWRpYUVsZW1lbnQsZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS5yZXdyYXAsaD13aW5kb3cuSFRNTEF1ZGlvRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpKSxjLnByb3RvdHlwZT1iLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxBdWRpb0VsZW1lbnQ9YixhLndyYXBwZXJzLkF1ZGlvPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEucmVwbGFjZSgvXHMrL2csIiAiKS50cmltKCl9ZnVuY3Rpb24gYyhhKXtlLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBkKGEsYixjLGYpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3ZhciBnPWkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO2UuY2FsbCh0aGlzLGcpLGgoZyx0aGlzKSx2b2lkIDAhPT1hJiYoZy50ZXh0PWEpLHZvaWQgMCE9PWImJmcuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsYiksYz09PSEwJiZnLnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCIiKSxnLnNlbGVjdGVkPWY9PT0hMH12YXIgZT1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGY9YS5taXhpbixnPWEucmVnaXN0ZXJXcmFwcGVyLGg9YS5yZXdyYXAsaT1hLnVud3JhcCxqPWEud3JhcCxrPXdpbmRvdy5IVE1MT3B0aW9uRWxlbWVudDtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSxmKGMucHJvdG90eXBlLHtnZXQgdGV4dCgpe3JldHVybiBiKHRoaXMudGV4dENvbnRlbnQpfSxzZXQgdGV4dChhKXt0aGlzLnRleHRDb250ZW50PWIoU3RyaW5nKGEpKX0sZ2V0IGZvcm0oKXtyZXR1cm4gaihpKHRoaXMpLmZvcm0pfX0pLGcoayxjLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKSxkLnByb3RvdHlwZT1jLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxPcHRpb25FbGVtZW50PWMsYS53cmFwcGVycy5PcHRpb249ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLndyYXAsaD13aW5kb3cuSFRNTFNlbGVjdEVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7YWRkOmZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBiJiYoYj1mKGIpKSxmKHRoaXMpLmFkZChmKGEpLGIpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/dm9pZCBjLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKTooIm9iamVjdCI9PXR5cGVvZiBhJiYoYT1mKGEpKSx2b2lkIGYodGhpcykucmVtb3ZlKGEpKX0sZ2V0IGZvcm0oKXtyZXR1cm4gZyhmKHRoaXMpLmZvcm0pfX0pLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpKSxhLndyYXBwZXJzLkhUTUxTZWxlY3RFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS53cmFwLGg9YS53cmFwSFRNTENvbGxlY3Rpb24saT13aW5kb3cuSFRNTFRhYmxlRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY2FwdGlvbigpe3JldHVybiBnKGYodGhpcykuY2FwdGlvbil9LGNyZWF0ZUNhcHRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZUNhcHRpb24oKSl9LGdldCB0SGVhZCgpe3JldHVybiBnKGYodGhpcykudEhlYWQpfSxjcmVhdGVUSGVhZDpmdW5jdGlvbigpe3JldHVybiBnKGYodGhpcykuY3JlYXRlVEhlYWQoKSl9LGNyZWF0ZVRGb290OmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVURm9vdCgpKX0sZ2V0IHRGb290KCl7cmV0dXJuIGcoZih0aGlzKS50Rm9vdCl9LGdldCB0Qm9kaWVzKCl7cmV0dXJuIGgoZih0aGlzKS50Qm9kaWVzKX0sY3JlYXRlVEJvZHk6ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZVRCb2R5KCkpfSxnZXQgcm93cygpe3JldHVybiBoKGYodGhpcykucm93cyl9LGluc2VydFJvdzpmdW5jdGlvbihhKXtyZXR1cm4gZyhmKHRoaXMpLmluc2VydFJvdyhhKSl9fSksZShpLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKSksYS53cmFwcGVycy5IVE1MVGFibGVFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcEhUTUxDb2xsZWN0aW9uLGc9YS51bndyYXAsaD1hLndyYXAsaT13aW5kb3cuSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IHJvd3MoKXtyZXR1cm4gZihnKHRoaXMpLnJvd3MpfSxpbnNlcnRSb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGgoZyh0aGlzKS5pbnNlcnRSb3coYSkpfX0pLGUoaSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRoZWFkIikpLGEud3JhcHBlcnMuSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS53cmFwSFRNTENvbGxlY3Rpb24sZz1hLnVud3JhcCxoPWEud3JhcCxpPXdpbmRvdy5IVE1MVGFibGVSb3dFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCBjZWxscygpe3JldHVybiBmKGcodGhpcykuY2VsbHMpfSxpbnNlcnRDZWxsOmZ1bmN0aW9uKGEpe3JldHVybiBoKGcodGhpcykuaW5zZXJ0Q2VsbChhKSl9fSksZShpLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKSksYS53cmFwcGVycy5IVE1MVGFibGVSb3dFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7c3dpdGNoKGEubG9jYWxOYW1lKXtjYXNlImNvbnRlbnQiOnJldHVybiBuZXcgYyhhKTtjYXNlInNoYWRvdyI6cmV0dXJuIG5ldyBlKGEpO2Nhc2UidGVtcGxhdGUiOnJldHVybiBuZXcgZihhKX1kLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxkPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZT1hLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50LGY9YS53cmFwcGVycy5IVE1MVGVtcGxhdGVFbGVtZW50LGc9KGEubWl4aW4sYS5yZWdpc3RlcldyYXBwZXIpLGg9d2luZG93LkhUTUxVbmtub3duRWxlbWVudDsKYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZyhoLGIpLGEud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEucmVnaXN0ZXJPYmplY3QsYz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGMsInRpdGxlIiksZT1iKGQpLGY9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKS5jb25zdHJ1Y3RvcjthLndyYXBwZXJzLlNWR0VsZW1lbnQ9Zn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXttLmNhbGwodGhpcyxhKX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcCxmPWEud3JhcCxnPXdpbmRvdy5TVkdVc2VFbGVtZW50LGg9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIixpPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGgsImciKSksaj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoaCwidXNlIiksaz1pLmNvbnN0cnVjdG9yLGw9T2JqZWN0LmdldFByb3RvdHlwZU9mKGsucHJvdG90eXBlKSxtPWwuY29uc3RydWN0b3I7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShsKSwiaW5zdGFuY2VSb290ImluIGomJmMoYi5wcm90b3R5cGUse2dldCBpbnN0YW5jZVJvb3QoKXtyZXR1cm4gZihlKHRoaXMpLmluc3RhbmNlUm9vdCl9LGdldCBhbmltYXRlZEluc3RhbmNlUm9vdCgpe3JldHVybiBmKGUodGhpcykuYW5pbWF0ZWRJbnN0YW5jZVJvb3QpfX0pLGQoZyxiLGopLGEud3JhcHBlcnMuU1ZHVXNlRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuRXZlbnRUYXJnZXQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXAsZz13aW5kb3cuU1ZHRWxlbWVudEluc3RhbmNlO2cmJihiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY29ycmVzcG9uZGluZ0VsZW1lbnQoKXtyZXR1cm4gZih0aGlzLmltcGwuY29ycmVzcG9uZGluZ0VsZW1lbnQpfSxnZXQgY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQoKXtyZXR1cm4gZih0aGlzLmltcGwuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQpfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiBmKHRoaXMuaW1wbC5wYXJlbnROb2RlKX0sZ2V0IGNoaWxkTm9kZXMoKXt0aHJvdyBuZXcgRXJyb3IoIk5vdCBpbXBsZW1lbnRlZCIpfSxnZXQgZmlyc3RDaGlsZCgpe3JldHVybiBmKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiBmKHRoaXMuaW1wbC5sYXN0Q2hpbGQpfSxnZXQgcHJldmlvdXNTaWJsaW5nKCl7cmV0dXJuIGYodGhpcy5pbXBsLnByZXZpb3VzU2libGluZyl9LGdldCBuZXh0U2libGluZygpe3JldHVybiBmKHRoaXMuaW1wbC5uZXh0U2libGluZyl9fSksZShnLGIpLGEud3JhcHBlcnMuU1ZHRWxlbWVudEluc3RhbmNlPWIpfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEudW53cmFwLGY9YS51bndyYXBJZk5lZWRlZCxnPWEud3JhcCxoPXdpbmRvdy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7YyhiLnByb3RvdHlwZSx7Z2V0IGNhbnZhcygpe3JldHVybiBnKHRoaXMuaW1wbC5jYW52YXMpfSxkcmF3SW1hZ2U6ZnVuY3Rpb24oKXthcmd1bWVudHNbMF09Zihhcmd1bWVudHNbMF0pLHRoaXMuaW1wbC5kcmF3SW1hZ2UuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LGNyZWF0ZVBhdHRlcm46ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzWzBdPWUoYXJndW1lbnRzWzBdKSx0aGlzLmltcGwuY3JlYXRlUGF0dGVybi5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19KSxkKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKS5nZXRDb250ZXh0KCIyZCIpKSxhLndyYXBwZXJzLkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXAsZz13aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0O2lmKGcpe2MoYi5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gZih0aGlzLmltcGwuY2FudmFzKX0sdGV4SW1hZ2UyRDpmdW5jdGlvbigpe2FyZ3VtZW50c1s1XT1lKGFyZ3VtZW50c1s1XSksdGhpcy5pbXBsLnRleEltYWdlMkQuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LHRleFN1YkltYWdlMkQ6ZnVuY3Rpb24oKXthcmd1bWVudHNbNl09ZShhcmd1bWVudHNbNl0pLHRoaXMuaW1wbC50ZXhTdWJJbWFnZTJELmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX0pO3ZhciBoPS9XZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk/e2RyYXdpbmdCdWZmZXJIZWlnaHQ6bnVsbCxkcmF3aW5nQnVmZmVyV2lkdGg6bnVsbH06e307ZChnLGIsaCksYS53cmFwcGVycy5XZWJHTFJlbmRlcmluZ0NvbnRleHQ9Yn19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPWF9dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXAsZz13aW5kb3cuUmFuZ2U7Yi5wcm90b3R5cGU9e2dldCBzdGFydENvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5zdGFydENvbnRhaW5lcil9LGdldCBlbmRDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuZW5kQ29udGFpbmVyKX0sZ2V0IGNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKX0sc2V0U3RhcnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuc2V0U3RhcnQoZShhKSxiKX0sc2V0RW5kOmZ1bmN0aW9uKGEsYil7dGhpcy5pbXBsLnNldEVuZChlKGEpLGIpfSxzZXRTdGFydEJlZm9yZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0U3RhcnRCZWZvcmUoZShhKSl9LHNldFN0YXJ0QWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldFN0YXJ0QWZ0ZXIoZShhKSl9LHNldEVuZEJlZm9yZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0RW5kQmVmb3JlKGUoYSkpfSxzZXRFbmRBZnRlcjpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0RW5kQWZ0ZXIoZShhKSl9LHNlbGVjdE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNlbGVjdE5vZGUoZShhKSl9LHNlbGVjdE5vZGVDb250ZW50czpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2VsZWN0Tm9kZUNvbnRlbnRzKGUoYSkpfSxjb21wYXJlQm91bmRhcnlQb2ludHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLGQoYikpfSxleHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLmltcGwuZXh0cmFjdENvbnRlbnRzKCkpfSxjbG9uZUNvbnRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNsb25lQ29udGVudHMoKSl9LGluc2VydE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmluc2VydE5vZGUoZShhKSl9LHN1cnJvdW5kQ29udGVudHM6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnN1cnJvdW5kQ29udGVudHMoZShhKSl9LGNsb25lUmFuZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLmltcGwuY2xvbmVSYW5nZSgpKX0saXNQb2ludEluUmFuZ2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmlzUG9pbnRJblJhbmdlKGUoYSksYil9LGNvbXBhcmVQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmltcGwuY29tcGFyZVBvaW50KGUoYSksYil9LGludGVyc2VjdHNOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmltcGwuaW50ZXJzZWN0c05vZGUoZShhKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbC50b1N0cmluZygpfX0sZy5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JiYoYi5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBmKHRoaXMuaW1wbC5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoYSkpfSksYyh3aW5kb3cuUmFuZ2UsYixkb2N1bWVudC5jcmVhdGVSYW5nZSgpKSxhLndyYXBwZXJzLlJhbmdlPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEuR2V0RWxlbWVudHNCeUludGVyZmFjZSxjPWEuUGFyZW50Tm9kZUludGVyZmFjZSxkPWEuU2VsZWN0b3JzSW50ZXJmYWNlLGU9YS5taXhpbixmPWEucmVnaXN0ZXJPYmplY3QsZz1mKGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7ZShnLnByb3RvdHlwZSxjKSxlKGcucHJvdG90eXBlLGQpLGUoZy5wcm90b3R5cGUsYik7dmFyIGg9Zihkb2N1bWVudC5jcmVhdGVDb21tZW50KCIiKSk7YS53cmFwcGVycy5Db21tZW50PWgsYS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50PWd9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFyIGI9ayhhLmltcGwub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2MuY2FsbCh0aGlzLGIpLGkoYix0aGlzKTt2YXIgZT1hLnNoYWRvd1Jvb3Q7bS5zZXQodGhpcyxlKSx0aGlzLnRyZWVTY29wZV89bmV3IGQodGhpcyxnKGV8fGEpKSxsLnNldCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudCxkPWEuVHJlZVNjb3BlLGU9YS5lbGVtZW50RnJvbVBvaW50LGY9YS5nZXRJbm5lckhUTUwsZz1hLmdldFRyZWVTY29wZSxoPWEubWl4aW4saT1hLnJld3JhcCxqPWEuc2V0SW5uZXJIVE1MLGs9YS51bndyYXAsbD1uZXcgV2Vha01hcCxtPW5ldyBXZWFrTWFwLG49L1sgXHRcblxyXGZdLztiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxoKGIucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGYodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7aih0aGlzLGEpLHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9LGdldCBvbGRlclNoYWRvd1Jvb3QoKXtyZXR1cm4gbS5nZXQodGhpcyl8fG51bGx9LGdldCBob3N0KCl7cmV0dXJuIGwuZ2V0KHRoaXMpfHxudWxsfSxpbnZhbGlkYXRlU2hhZG93UmVuZGVyZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbC5nZXQodGhpcykuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9LGVsZW1lbnRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZSh0aGlzLHRoaXMub3duZXJEb2N1bWVudCxhLGIpfSxnZXRFbGVtZW50QnlJZDpmdW5jdGlvbihhKXtyZXR1cm4gbi50ZXN0KGEpP251bGw6dGhpcy5xdWVyeVNlbGVjdG9yKCdbaWQ9IicrYSsnIl0nKX19KSxhLndyYXBwZXJzLlNoYWRvd1Jvb3Q9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXthLnByZXZpb3VzU2libGluZ189YS5wcmV2aW91c1NpYmxpbmcsYS5uZXh0U2libGluZ189YS5uZXh0U2libGluZyxhLnBhcmVudE5vZGVfPWEucGFyZW50Tm9kZX1mdW5jdGlvbiBjKGEsYyxlKXt2YXIgZj1HKGEpLGc9RyhjKSxoPWU/RyhlKTpudWxsO2lmKGQoYyksYihjKSxlKWEuZmlyc3RDaGlsZD09PWUmJihhLmZpcnN0Q2hpbGRfPWUpLGUucHJldmlvdXNTaWJsaW5nXz1lLnByZXZpb3VzU2libGluZztlbHNle2EubGFzdENoaWxkXz1hLmxhc3RDaGlsZCxhLmxhc3RDaGlsZD09PWEuZmlyc3RDaGlsZCYmKGEuZmlyc3RDaGlsZF89YS5maXJzdENoaWxkKTt2YXIgaT1IKGYubGFzdENoaWxkKTtpJiYoaS5uZXh0U2libGluZ189aS5uZXh0U2libGluZyl9Zi5pbnNlcnRCZWZvcmUoZyxoKX1mdW5jdGlvbiBkKGEpe3ZhciBjPUcoYSksZD1jLnBhcmVudE5vZGU7aWYoZCl7dmFyIGU9SChkKTtiKGEpLGEucHJldmlvdXNTaWJsaW5nJiYoYS5wcmV2aW91c1NpYmxpbmcubmV4dFNpYmxpbmdfPWEpLGEubmV4dFNpYmxpbmcmJihhLm5leHRTaWJsaW5nLnByZXZpb3VzU2libGluZ189YSksZS5sYXN0Q2hpbGQ9PT1hJiYoZS5sYXN0Q2hpbGRfPWEpLGUuZmlyc3RDaGlsZD09PWEmJihlLmZpcnN0Q2hpbGRfPWEpLGQucmVtb3ZlQ2hpbGQoYyl9fWZ1bmN0aW9uIGUoYSl7SS5zZXQoYSxbXSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1JLmdldChhKTtyZXR1cm4gYnx8SS5zZXQoYSxiPVtdKSxifWZ1bmN0aW9uIGcoYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYn1mdW5jdGlvbiBoKCl7Zm9yKHZhciBhPTA7YTxNLmxlbmd0aDthKyspe3ZhciBiPU1bYV0sYz1iLnBhcmVudFJlbmRlcmVyO2MmJmMuZGlydHl8fGIucmVuZGVyKCl9TT1bXX1mdW5jdGlvbiBpKCl7eT1udWxsLGgoKX1mdW5jdGlvbiBqKGEpe3ZhciBiPUsuZ2V0KGEpO3JldHVybiBifHwoYj1uZXcgbihhKSxLLnNldChhLGIpKSxifWZ1bmN0aW9uIGsoYSl7dmFyIGI9RShhKS5yb290O3JldHVybiBiIGluc3RhbmNlb2YgRD9iOm51bGx9ZnVuY3Rpb24gbChhKXtyZXR1cm4gaihhLmhvc3QpfWZ1bmN0aW9uIG0oYSl7dGhpcy5za2lwPSExLHRoaXMubm9kZT1hLHRoaXMuY2hpbGROb2Rlcz1bXX1mdW5jdGlvbiBuKGEpe3RoaXMuaG9zdD1hLHRoaXMuZGlydHk9ITEsdGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpLHRoaXMuYXNzb2NpYXRlTm9kZShhKX1mdW5jdGlvbiBvKGEpe2Zvcih2YXIgYj1bXSxjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyl2KGMpP2IucHVzaC5hcHBseShiLGYoYykpOmIucHVzaChjKTtyZXR1cm4gYn1mdW5jdGlvbiBwKGEpe2lmKGEgaW5zdGFuY2VvZiBCKXJldHVybiBhO2lmKGEgaW5zdGFuY2VvZiBBKXJldHVybiBudWxsO2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpe3ZhciBjPXAoYik7aWYoYylyZXR1cm4gY31yZXR1cm4gbnVsbH1mdW5jdGlvbiBxKGEsYil7ZihiKS5wdXNoKGEpO3ZhciBjPUouZ2V0KGEpO2M/Yy5wdXNoKGIpOkouc2V0KGEsW2JdKX1mdW5jdGlvbiByKGEpe3JldHVybiBKLmdldChhKX1mdW5jdGlvbiBzKGEpe0ouc2V0KGEsdm9pZCAwKX1mdW5jdGlvbiB0KGEsYil7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpO2lmKCFjKXJldHVybiEwO2lmKGM9Yy50cmltKCksIWMpcmV0dXJuITA7aWYoIShhIGluc3RhbmNlb2YgeikpcmV0dXJuITE7aWYoIU8udGVzdChjKSlyZXR1cm4hMTt0cnl7cmV0dXJuIGEubWF0Y2hlcyhjKX1jYXRjaChkKXtyZXR1cm4hMX19ZnVuY3Rpb24gdShhLGIpe3ZhciBjPXIoYik7cmV0dXJuIGMmJmNbYy5sZW5ndGgtMV09PT1hfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBBfHxhIGluc3RhbmNlb2YgQn1mdW5jdGlvbiB3KGEpe3JldHVybiBhLnNoYWRvd1Jvb3R9ZnVuY3Rpb24geChhKXtmb3IodmFyIGI9W10sYz1hLnNoYWRvd1Jvb3Q7YztjPWMub2xkZXJTaGFkb3dSb290KWIucHVzaChjKTtyZXR1cm4gYn12YXIgeSx6PWEud3JhcHBlcnMuRWxlbWVudCxBPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LEI9YS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudCxDPWEud3JhcHBlcnMuTm9kZSxEPWEud3JhcHBlcnMuU2hhZG93Um9vdCxFPShhLmFzc2VydCxhLmdldFRyZWVTY29wZSksRj0oYS5taXhpbixhLm9uZU9mKSxHPWEudW53cmFwLEg9YS53cmFwLEk9bmV3IFdlYWtNYXAsSj1uZXcgV2Vha01hcCxLPW5ldyBXZWFrTWFwLEw9Rih3aW5kb3csWyJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzZXRUaW1lb3V0Il0pLE09W10sTj1uZXcgQXJyYXlTcGxpY2U7Ti5lcXVhbHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRyhhLm5vZGUpPT09Yn0sbS5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgbShhKTtyZXR1cm4gdGhpcy5jaGlsZE5vZGVzLnB1c2goYiksYn0sc3luYzpmdW5jdGlvbihhKXtpZighdGhpcy5za2lwKXtmb3IodmFyIGI9dGhpcy5ub2RlLGU9dGhpcy5jaGlsZE5vZGVzLGY9ZyhHKGIpKSxoPWF8fG5ldyBXZWFrTWFwLGk9Ti5jYWxjdWxhdGVTcGxpY2VzKGUsZiksaj0wLGs9MCxsPTAsbT0wO208aS5sZW5ndGg7bSsrKXtmb3IodmFyIG49aVttXTtsPG4uaW5kZXg7bCsrKWsrKyxlW2orK10uc3luYyhoKTtmb3IodmFyIG89bi5yZW1vdmVkLmxlbmd0aCxwPTA7bz5wO3ArKyl7dmFyIHE9SChmW2srK10pO2guZ2V0KHEpfHxkKHEpfWZvcih2YXIgcj1uLmFkZGVkQ291bnQscz1mW2tdJiZIKGZba10pLHA9MDtyPnA7cCsrKXt2YXIgdD1lW2orK10sdT10Lm5vZGU7YyhiLHUscyksaC5zZXQodSwhMCksdC5zeW5jKGgpfWwrPXJ9Zm9yKHZhciBtPWw7bTxlLmxlbmd0aDttKyspZVttXS5zeW5jKGgpfX19LG4ucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5kaXJ0eSl7dGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpO3ZhciBiPXRoaXMuaG9zdDt0aGlzLmRpc3RyaWJ1dGlvbihiKTt2YXIgYz1hfHxuZXcgbShiKTt0aGlzLmJ1aWxkUmVuZGVyVHJlZShjLGIpO3ZhciBkPSFhO2QmJmMuc3luYygpLHRoaXMuZGlydHk9ITF9fSxnZXQgcGFyZW50UmVuZGVyZXIoKXtyZXR1cm4gRSh0aGlzLmhvc3QpLnJlbmRlcmVyfSxpbnZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZGlydHkpe2lmKHRoaXMuZGlydHk9ITAsTS5wdXNoKHRoaXMpLHkpcmV0dXJuO3k9d2luZG93W0xdKGksMCl9fSxkaXN0cmlidXRpb246ZnVuY3Rpb24oYSl7dGhpcy5yZXNldEFsbChhKSx0aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oYSl9LHJlc2V0QWxsOmZ1bmN0aW9uKGEpe3YoYSk/ZShhKTpzKGEpO2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpdGhpcy5yZXNldEFsbChiKTthLnNoYWRvd1Jvb3QmJnRoaXMucmVzZXRBbGwoYS5zaGFkb3dSb290KSxhLm9sZGVyU2hhZG93Um9vdCYmdGhpcy5yZXNldEFsbChhLm9sZGVyU2hhZG93Um9vdCl9LGRpc3RyaWJ1dGlvblJlc29sdXRpb246ZnVuY3Rpb24oYSl7aWYodyhhKSl7Zm9yKHZhciBiPWEsYz1vKGIpLGQ9eChiKSxlPTA7ZTxkLmxlbmd0aDtlKyspdGhpcy5wb29sRGlzdHJpYnV0aW9uKGRbZV0sYyk7Zm9yKHZhciBlPWQubGVuZ3RoLTE7ZT49MDtlLS0pe3ZhciBmPWRbZV0sZz1wKGYpO2lmKGcpe3ZhciBoPWYub2xkZXJTaGFkb3dSb290O2gmJihjPW8oaCkpO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXEoY1tpXSxnKX10aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oZil9fWZvcih2YXIgaj1hLmZpcnN0Q2hpbGQ7ajtqPWoubmV4dFNpYmxpbmcpdGhpcy5kaXN0cmlidXRpb25SZXNvbHV0aW9uKGopfSxwb29sRGlzdHJpYnV0aW9uOmZ1bmN0aW9uKGEsYil7aWYoIShhIGluc3RhbmNlb2YgQikpaWYoYSBpbnN0YW5jZW9mIEEpe3ZhciBjPWE7dGhpcy51cGRhdGVEZXBlbmRlbnRBdHRyaWJ1dGVzKGMuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKSk7Zm9yKHZhciBkPSExLGU9MDtlPGIubGVuZ3RoO2UrKyl7dmFyIGE9YltlXTthJiZ0KGEsYykmJihxKGEsYyksYltlXT12b2lkIDAsZD0hMCl9aWYoIWQpZm9yKHZhciBmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZylxKGYsYyl9ZWxzZSBmb3IodmFyIGY9YS5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucG9vbERpc3RyaWJ1dGlvbihmLGIpfSxidWlsZFJlbmRlclRyZWU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5jb21wb3NlKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXSxmPWEuYXBwZW5kKGUpO3RoaXMuYnVpbGRSZW5kZXJUcmVlKGYsZSl9aWYodyhiKSl7dmFyIGc9aihiKTtnLmRpcnR5PSExfX0sY29tcG9zZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1hLnNoYWRvd1Jvb3R8fGEsZD1jLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpaWYodihkKSl7dGhpcy5hc3NvY2lhdGVOb2RlKGMpO2Zvcih2YXIgZT1mKGQpLGc9MDtnPGUubGVuZ3RoO2crKyl7dmFyIGg9ZVtnXTt1KGQsaCkmJmIucHVzaChoKX19ZWxzZSBiLnB1c2goZCk7cmV0dXJuIGJ9LGludmFsaWRhdGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dGhpcy5hdHRyaWJ1dGVzPU9iamVjdC5jcmVhdGUobnVsbCl9LHVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzOy9cLlx3Ky8udGVzdChhKSYmKGJbImNsYXNzIl09ITApLC8jXHcrLy50ZXN0KGEpJiYoYi5pZD0hMCksYS5yZXBsYWNlKC9cW1xzKihbXlxzPVx8flxdXSspL2csZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSl9fSxkZXBlbmRzT25BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXX0sYXNzb2NpYXRlTm9kZTpmdW5jdGlvbihhKXthLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz10aGlzfX07dmFyIE89L15bKi4jW2EtekEtWl98XS87Qy5wcm90b3R5cGUuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSZW5kZXJlcl87cmV0dXJuIGE/KGEuaW52YWxpZGF0ZSgpLCEwKTohMX0sQS5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1CLnByb3RvdHlwZS5nZXREaXN0cmlidXRlZE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxmKHRoaXMpfSx6LnByb3RvdHlwZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz1mdW5jdGlvbigpe3JldHVybiBoKCkscih0aGlzKXx8W119LEEucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1CLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBhLGI9ayh0aGlzKTtiJiYoYT1sKGIpKSx0aGlzLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz1hLGEmJmEuaW52YWxpZGF0ZSgpfSxhLmdldFJlbmRlcmVyRm9ySG9zdD1qLGEuZ2V0U2hhZG93VHJlZXM9eCxhLnJlbmRlckFsbFBlbmRpbmc9aCxhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzPXIsYS52aXN1YWw9e2luc2VydEJlZm9yZTpjLHJlbW92ZTpkfX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXtpZih3aW5kb3dbYl0pe2QoIWEud3JhcHBlcnNbYl0pO3ZhciBpPWZ1bmN0aW9uKGEpe2MuY2FsbCh0aGlzLGEpfTtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxlKGkucHJvdG90eXBlLHtnZXQgZm9ybSgpe3JldHVybiBoKGcodGhpcykuZm9ybSl9fSksZih3aW5kb3dbYl0saSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KGIuc2xpY2UoNCwtNykpKSxhLndyYXBwZXJzW2JdPWl9fXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLmFzc2VydCxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPWEudW53cmFwLGg9YS53cmFwLGk9WyJIVE1MQnV0dG9uRWxlbWVudCIsIkhUTUxGaWVsZFNldEVsZW1lbnQiLCJIVE1MSW5wdXRFbGVtZW50IiwiSFRNTEtleWdlbkVsZW1lbnQiLCJIVE1MTGFiZWxFbGVtZW50IiwiSFRNTExlZ2VuZEVsZW1lbnQiLCJIVE1MT2JqZWN0RWxlbWVudCIsIkhUTUxPdXRwdXRFbGVtZW50IiwiSFRNTFRleHRBcmVhRWxlbWVudCJdO2kuZm9yRWFjaChiKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX17dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXA7d2luZG93LlNlbGVjdGlvbn1iLnByb3RvdHlwZT17Z2V0IGFuY2hvck5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuYW5jaG9yTm9kZSl9LGdldCBmb2N1c05vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmFkZFJhbmdlKGQoYSkpfSxjb2xsYXBzZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5jb2xsYXBzZShlKGEpLGIpfSxjb250YWluc05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbnRhaW5zTm9kZShlKGEpLGIpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuZXh0ZW5kKGUoYSksYil9LGdldFJhbmdlQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcy5pbXBsLmdldFJhbmdlQXQoYSkpfSxyZW1vdmVSYW5nZTpmdW5jdGlvbihhKXt0aGlzLmltcGwucmVtb3ZlUmFuZ2UoZChhKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3RBbGxDaGlsZHJlbihlKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxjKHdpbmRvdy5TZWxlY3Rpb24sYix3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLGEud3JhcHBlcnMuU2VsZWN0aW9uPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ay5jYWxsKHRoaXMsYSksdGhpcy50cmVlU2NvcGVfPW5ldyBwKHRoaXMsbnVsbCl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1kb2N1bWVudFthXTtiLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7RC5jYWxsKGIuaW1wbCx6KGEpKSxlKGEsYil9ZnVuY3Rpb24gZShhLGIpe2Euc2hhZG93Um9vdCYmYi5hZG9wdE5vZGUoYS5zaGFkb3dSb290KSxhIGluc3RhbmNlb2YgbyYmZihhLGIpO2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpZShjLGIpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLm9sZGVyU2hhZG93Um9vdDtjJiZiLmFkb3B0Tm9kZShjKX1mdW5jdGlvbiBnKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19dmFyIGo9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGs9YS53cmFwcGVycy5Ob2RlLGw9YS5QYXJlbnROb2RlSW50ZXJmYWNlLG09YS53cmFwcGVycy5TZWxlY3Rpb24sbj1hLlNlbGVjdG9yc0ludGVyZmFjZSxvPWEud3JhcHBlcnMuU2hhZG93Um9vdCxwPWEuVHJlZVNjb3BlLHE9YS5jbG9uZU5vZGUscj1hLmRlZmluZVdyYXBHZXR0ZXIscz1hLmVsZW1lbnRGcm9tUG9pbnQsdD1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLHU9YS5tYXRjaGVzTmFtZXMsdj1hLm1peGluLHc9YS5yZWdpc3RlcldyYXBwZXIseD1hLnJlbmRlckFsbFBlbmRpbmcseT1hLnJld3JhcCx6PWEudW53cmFwLEE9YS53cmFwLEI9YS53cmFwRXZlbnRUYXJnZXRNZXRob2RzLEM9KGEud3JhcE5vZGVMaXN0LG5ldyBXZWFrTWFwKTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGsucHJvdG90eXBlKSxyKGIsImRvY3VtZW50RWxlbWVudCIpLHIoYiwiYm9keSIpLHIoYiwiaGVhZCIpLFsiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImdldEVsZW1lbnRCeUlkIl0uZm9yRWFjaChjKTt2YXIgRD1kb2N1bWVudC5hZG9wdE5vZGUsRT1kb2N1bWVudC5nZXRTZWxlY3Rpb247aWYodihiLnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkKGEsdGhpcyksYX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBzKHRoaXMsdGhpcyxhLGIpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHEoYSxiLHRoaXMuaW1wbCl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB4KCksbmV3IG0oRS5jYWxsKHoodGhpcykpKX19KSxkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQpe3ZhciBGPWRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDtiLnByb3RvdHlwZS5yZWdpc3RlckVsZW1lbnQ9ZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhP3ZvaWQodGhpcy5pbXBsPWEpOmY/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChmLGIpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYil9dmFyIGUsZjtpZih2b2lkIDAhPT1jJiYoZT1jLnByb3RvdHlwZSxmPWMuZXh0ZW5kcyksZXx8KGU9T2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChlKSl0aHJvdyBuZXcgRXJyb3IoIk5vdFN1cHBvcnRlZEVycm9yIik7Zm9yKHZhciBnLGg9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLGk9W107aCYmIShnPWEubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KGgpKTspaS5wdXNoKGgpLGg9T2JqZWN0LmdldFByb3RvdHlwZU9mKGgpO2lmKCFnKXRocm93IG5ldyBFcnJvcigiTm90U3VwcG9ydGVkRXJyb3IiKTtmb3IodmFyIGo9T2JqZWN0LmNyZWF0ZShnKSxrPWkubGVuZ3RoLTE7az49MDtrLS0paj1PYmplY3QuY3JlYXRlKGopO1siY3JlYXRlZENhbGxiYWNrIiwiYXR0YWNoZWRDYWxsYmFjayIsImRldGFjaGVkQ2FsbGJhY2siLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWVbYV07YiYmKGpbYV09ZnVuY3Rpb24oKXtBKHRoaXMpaW5zdGFuY2VvZiBkfHx5KHRoaXMpLGIuYXBwbHkoQSh0aGlzKSxhcmd1bWVudHMpfSl9KTt2YXIgbD17cHJvdG90eXBlOmp9O2YmJihsLmV4dGVuZHM9ZiksZC5wcm90b3R5cGU9ZSxkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kLGEuY29uc3RydWN0b3JUYWJsZS5zZXQoaixkKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLnNldChlLGopO0YuY2FsbCh6KHRoaXMpLGIsbCk7cmV0dXJuIGR9LHQoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJyZWdpc3RlckVsZW1lbnQiXSl9dChbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudCx3aW5kb3cuSFRNTEh0bWxFbGVtZW50XSxbImFwcGVuZENoaWxkIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJjb250YWlucyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lTlMiLCJpbnNlcnRCZWZvcmUiLCJxdWVyeVNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZUNoaWxkIiwicmVwbGFjZUNoaWxkIl0uY29uY2F0KHUpKSx0KFt3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnRdLFsiYWRvcHROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRhaW5zIiwiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImVsZW1lbnRGcm9tUG9pbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldFNlbGVjdGlvbiJdKSx2KGIucHJvdG90eXBlLGopLHYoYi5wcm90b3R5cGUsbCksdihiLnByb3RvdHlwZSxuKSx2KGIucHJvdG90eXBlLHtnZXQgaW1wbGVtZW50YXRpb24oKXt2YXIgYT1DLmdldCh0aGlzKTtyZXR1cm4gYT9hOihhPW5ldyBnKHoodGhpcykuaW1wbGVtZW50YXRpb24pLEMuc2V0KHRoaXMsYSksYSl9LGdldCBkZWZhdWx0Vmlldygpe3JldHVybiBBKHoodGhpcykuZGVmYXVsdFZpZXcpfX0pLHcod2luZG93LkRvY3VtZW50LGIsZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSksd2luZG93LkhUTUxEb2N1bWVudCYmdyh3aW5kb3cuSFRNTERvY3VtZW50LGIpLEIoW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnRdKSxoKGcsImNyZWF0ZURvY3VtZW50VHlwZSIpLGgoZywiY3JlYXRlRG9jdW1lbnQiKSxoKGcsImNyZWF0ZUhUTUxEb2N1bWVudCIpLGkoZywiaGFzRmVhdHVyZSIpLHcod2luZG93LkRPTUltcGxlbWVudGF0aW9uLGcpLHQoW3dpbmRvdy5ET01JbXBsZW1lbnRhdGlvbl0sWyJjcmVhdGVEb2N1bWVudFR5cGUiLCJjcmVhdGVEb2N1bWVudCIsImNyZWF0ZUhUTUxEb2N1bWVudCIsImhhc0ZlYXR1cmUiXSksYS5hZG9wdE5vZGVOb1JlbW92ZT1kLGEud3JhcHBlcnMuRE9NSW1wbGVtZW50YXRpb249ZyxhLndyYXBwZXJzLkRvY3VtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5FdmVudFRhcmdldCxkPWEud3JhcHBlcnMuU2VsZWN0aW9uLGU9YS5taXhpbixmPWEucmVnaXN0ZXJXcmFwcGVyLGc9YS5yZW5kZXJBbGxQZW5kaW5nLGg9YS51bndyYXAsaT1hLnVud3JhcElmTmVlZGVkLGo9YS53cmFwLGs9d2luZG93LldpbmRvdyxsPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLG09d2luZG93LmdldFNlbGVjdGlvbjtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxrLnByb3RvdHlwZS5nZXRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGoodGhpc3x8d2luZG93KS5nZXRDb21wdXRlZFN0eWxlKGkoYSksYil9LGsucHJvdG90eXBlLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiBqKHRoaXN8fHdpbmRvdykuZ2V0U2VsZWN0aW9uKCl9LGRlbGV0ZSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSxkZWxldGUgd2luZG93LmdldFNlbGVjdGlvbixbImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdLmZvckVhY2goZnVuY3Rpb24oYSl7ay5wcm90b3R5cGVbYV09ZnVuY3Rpb24oKXt2YXIgYj1qKHRoaXN8fHdpbmRvdyk7cmV0dXJuIGJbYV0uYXBwbHkoYixhcmd1bWVudHMpfSxkZWxldGUgd2luZG93W2FdfSksZShiLnByb3RvdHlwZSx7Z2V0Q29tcHV0ZWRTdHlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBnKCksbC5jYWxsKGgodGhpcyksaShhKSxiKX0sZ2V0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoKSxuZXcgZChtLmNhbGwoaCh0aGlzKSkpfSxnZXQgZG9jdW1lbnQoKXtyZXR1cm4gaihoKHRoaXMpLmRvY3VtZW50KX19KSxmKGssYix3aW5kb3cpLGEud3JhcHBlcnMuV2luZG93PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEudW53cmFwLGM9d2luZG93LkRhdGFUcmFuc2Zlcnx8d2luZG93LkNsaXBib2FyZCxkPWMucHJvdG90eXBlLnNldERyYWdJbWFnZTtjLnByb3RvdHlwZS5zZXREcmFnSW1hZ2U9ZnVuY3Rpb24oYSxjLGUpe2QuY2FsbCh0aGlzLGIoYSksYyxlKX19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFyIGI9Y1thXSxkPXdpbmRvd1tiXTtpZihkKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpLGY9ZS5jb25zdHJ1Y3Rvcjt3aW5kb3dbYl09Zn19dmFyIGM9KGEuaXNXcmFwcGVyRm9yLHthOiJIVE1MQW5jaG9yRWxlbWVudCIsYXJlYToiSFRNTEFyZWFFbGVtZW50IixhdWRpbzoiSFRNTEF1ZGlvRWxlbWVudCIsYmFzZToiSFRNTEJhc2VFbGVtZW50Iixib2R5OiJIVE1MQm9keUVsZW1lbnQiLGJyOiJIVE1MQlJFbGVtZW50IixidXR0b246IkhUTUxCdXR0b25FbGVtZW50IixjYW52YXM6IkhUTUxDYW52YXNFbGVtZW50IixjYXB0aW9uOiJIVE1MVGFibGVDYXB0aW9uRWxlbWVudCIsY29sOiJIVE1MVGFibGVDb2xFbGVtZW50Iixjb250ZW50OiJIVE1MQ29udGVudEVsZW1lbnQiLGRhdGE6IkhUTUxEYXRhRWxlbWVudCIsZGF0YWxpc3Q6IkhUTUxEYXRhTGlzdEVsZW1lbnQiLGRlbDoiSFRNTE1vZEVsZW1lbnQiLGRpcjoiSFRNTERpcmVjdG9yeUVsZW1lbnQiLGRpdjoiSFRNTERpdkVsZW1lbnQiLGRsOiJIVE1MRExpc3RFbGVtZW50IixlbWJlZDoiSFRNTEVtYmVkRWxlbWVudCIsZmllbGRzZXQ6IkhUTUxGaWVsZFNldEVsZW1lbnQiLGZvbnQ6IkhUTUxGb250RWxlbWVudCIsZm9ybToiSFRNTEZvcm1FbGVtZW50IixmcmFtZToiSFRNTEZyYW1lRWxlbWVudCIsZnJhbWVzZXQ6IkhUTUxGcmFtZVNldEVsZW1lbnQiLGgxOiJIVE1MSGVhZGluZ0VsZW1lbnQiLGhlYWQ6IkhUTUxIZWFkRWxlbWVudCIsaHI6IkhUTUxIUkVsZW1lbnQiLGh0bWw6IkhUTUxIdG1sRWxlbWVudCIsaWZyYW1lOiJIVE1MSUZyYW1lRWxlbWVudCIsaW1nOiJIVE1MSW1hZ2VFbGVtZW50IixpbnB1dDoiSFRNTElucHV0RWxlbWVudCIsa2V5Z2VuOiJIVE1MS2V5Z2VuRWxlbWVudCIsbGFiZWw6IkhUTUxMYWJlbEVsZW1lbnQiLGxlZ2VuZDoiSFRNTExlZ2VuZEVsZW1lbnQiLGxpOiJIVE1MTElFbGVtZW50IixsaW5rOiJIVE1MTGlua0VsZW1lbnQiLG1hcDoiSFRNTE1hcEVsZW1lbnQiLG1hcnF1ZWU6IkhUTUxNYXJxdWVlRWxlbWVudCIsbWVudToiSFRNTE1lbnVFbGVtZW50IixtZW51aXRlbToiSFRNTE1lbnVJdGVtRWxlbWVudCIsbWV0YToiSFRNTE1ldGFFbGVtZW50IixtZXRlcjoiSFRNTE1ldGVyRWxlbWVudCIsb2JqZWN0OiJIVE1MT2JqZWN0RWxlbWVudCIsb2w6IkhUTUxPTGlzdEVsZW1lbnQiLG9wdGdyb3VwOiJIVE1MT3B0R3JvdXBFbGVtZW50IixvcHRpb246IkhUTUxPcHRpb25FbGVtZW50IixvdXRwdXQ6IkhUTUxPdXRwdXRFbGVtZW50IixwOiJIVE1MUGFyYWdyYXBoRWxlbWVudCIscGFyYW06IkhUTUxQYXJhbUVsZW1lbnQiLHByZToiSFRNTFByZUVsZW1lbnQiLHByb2dyZXNzOiJIVE1MUHJvZ3Jlc3NFbGVtZW50IixxOiJIVE1MUXVvdGVFbGVtZW50IixzY3JpcHQ6IkhUTUxTY3JpcHRFbGVtZW50IixzZWxlY3Q6IkhUTUxTZWxlY3RFbGVtZW50IixzaGFkb3c6IkhUTUxTaGFkb3dFbGVtZW50Iixzb3VyY2U6IkhUTUxTb3VyY2VFbGVtZW50IixzcGFuOiJIVE1MU3BhbkVsZW1lbnQiLHN0eWxlOiJIVE1MU3R5bGVFbGVtZW50Iix0YWJsZToiSFRNTFRhYmxlRWxlbWVudCIsdGJvZHk6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0ZW1wbGF0ZToiSFRNTFRlbXBsYXRlRWxlbWVudCIsdGV4dGFyZWE6IkhUTUxUZXh0QXJlYUVsZW1lbnQiLHRoZWFkOiJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsdGltZToiSFRNTFRpbWVFbGVtZW50Iix0aXRsZToiSFRNTFRpdGxlRWxlbWVudCIsdHI6IkhUTUxUYWJsZVJvd0VsZW1lbnQiLHRyYWNrOiJIVE1MVHJhY2tFbGVtZW50Iix1bDoiSFRNTFVMaXN0RWxlbWVudCIsdmlkZW86IkhUTUxWaWRlb0VsZW1lbnQifSk7T2JqZWN0LmtleXMoYykuZm9yRWFjaChiKSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhLndyYXBwZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3dpbmRvd1tiXT1hLndyYXBwZXJzW2JdfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oKXt3aW5kb3cud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQsd2luZG93LnVud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC51bndyYXBJZk5lZWRlZCxPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsIndlYmtpdFNoYWRvd1Jvb3QiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRWxlbWVudC5wcm90b3R5cGUsInNoYWRvd1Jvb3QiKSk7dmFyIGE9RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdDtFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGI9YS5jYWxsKHRoaXMpO3JldHVybiBDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxifSxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3R9KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPSIiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7Yys9YS50ZXh0Q29udGVudCsiXG5cbiJ9KSxifHwoYz1jLnJlcGxhY2UobCwiIikpLGN9ZnVuY3Rpb24gYyhhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3JldHVybiBiLnRleHRDb250ZW50PWEsYn1mdW5jdGlvbiBkKGEpe3ZhciBiPWMoYSk7ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChiKTt2YXIgZD1bXTtpZihiLnNoZWV0KXRyeXtkPWIuc2hlZXQuY3NzUnVsZXN9Y2F0Y2goZSl7fWVsc2UgY29uc29sZS53YXJuKCJzaGVldCBub3QgZm91bmQiLGIpO3JldHVybiBiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksZH1mdW5jdGlvbiBlKCl7di5pbml0aWFsaXplZD0hMCxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHYpO3ZhciBhPXYuY29udGVudERvY3VtZW50LGI9YS5jcmVhdGVFbGVtZW50KCJiYXNlIik7Yi5ocmVmPWRvY3VtZW50LmJhc2VVUkksYS5oZWFkLmFwcGVuZENoaWxkKGIpfWZ1bmN0aW9uIGYoYSl7di5pbml0aWFsaXplZHx8ZSgpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodiksYSh2LmNvbnRlbnREb2N1bWVudCksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh2KX1mdW5jdGlvbiBnKGEsYil7aWYoYil7dmFyIGU7aWYoYS5tYXRjaCgiQGltcG9ydCIpJiZ4KXt2YXIgZz1jKGEpO2YoZnVuY3Rpb24oYSl7YS5oZWFkLmFwcGVuZENoaWxkKGcuaW1wbCksZT1nLnNoZWV0LmNzc1J1bGVzLGIoZSl9KX1lbHNlIGU9ZChhKSxiKGUpfX1mdW5jdGlvbiBoKGEpe2EmJmooKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9ZnVuY3Rpb24gaShhLGIpe3ZhciBkPWMoYSk7ZC5zZXRBdHRyaWJ1dGUoYiwiIiksZC5zZXRBdHRyaWJ1dGUoeiwiIiksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChkKX1mdW5jdGlvbiBqKCl7cmV0dXJuIHd8fCh3PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksdy5zZXRBdHRyaWJ1dGUoeiwiIiksd1t6XT0hMCksd312YXIgaz17c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihhLGMsZCl7dmFyIGU9dGhpcy5wcmVwYXJlUm9vdChhLGMsZCksZj10aGlzLmlzVHlwZUV4dGVuc2lvbihkKSxnPXRoaXMubWFrZVNjb3BlU2VsZWN0b3IoYyxmKSxoPWIoZSwhMCk7aD10aGlzLnNjb3BlQ3NzVGV4dChoLGcpLGEmJihhLnNoaW1tZWRTdHlsZT1oKSx0aGlzLmFkZENzc1RvRG9jdW1lbnQoaCxjKX0sc2hpbVN0eWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc2hpbUNzc1RleHQoYS50ZXh0Q29udGVudCxiKX0sc2hpbUNzc1RleHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT10aGlzLmluc2VydERpcmVjdGl2ZXMoYSksdGhpcy5zY29wZUNzc1RleHQoYSxiKX0sbWFrZVNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9iPyJbaXM9IithKyJdIjphOiIifSxpc1R5cGVFeHRlbnNpb246ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEuaW5kZXhPZigiLSIpPDB9LHByZXBhcmVSb290OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlZ2lzdGVyUm9vdChhLGIsYyk7cmV0dXJuIHRoaXMucmVwbGFjZVRleHRJblN0eWxlcyhkLnJvb3RTdHlsZXMsdGhpcy5pbnNlcnREaXJlY3RpdmVzKSx0aGlzLnJlbW92ZVN0eWxlcyhhLGQucm9vdFN0eWxlcyksdGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYSxiKSxkLnNjb3BlU3R5bGVzfSxyZW1vdmVTdHlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpfSxyZWdpc3RlclJvb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVnaXN0cnlbYl09e3Jvb3Q6YSxuYW1lOmIsZXh0ZW5kc05hbWU6Y30sZT10aGlzLmZpbmRTdHlsZXMoYSk7ZC5yb290U3R5bGVzPWUsZC5zY29wZVN0eWxlcz1kLnJvb3RTdHlsZXM7dmFyIGY9dGhpcy5yZWdpc3RyeVtkLmV4dGVuZHNOYW1lXTtyZXR1cm4gZiYmKGQuc2NvcGVTdHlsZXM9Zi5zY29wZVN0eWxlcy5jb25jYXQoZC5zY29wZVN0eWxlcykpLGR9LGZpbmRTdHlsZXM6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuW107dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYixmdW5jdGlvbihhKXtyZXR1cm4hYS5oYXNBdHRyaWJ1dGUoQSl9KX0sYXBwbHlTY29wZVRvQ29udGVudDpmdW5jdGlvbihhLGIpe2EmJihBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgiKiIpLGZ1bmN0aW9uKGEpe2Euc2V0QXR0cmlidXRlKGIsIiIpfSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIiksZnVuY3Rpb24oYSl7dGhpcy5hcHBseVNjb3BlVG9Db250ZW50KGEuY29udGVudCxiKX0sdGhpcykpfSxpbnNlcnREaXJlY3RpdmVzOmZ1bmN0aW9uKGEpe3JldHVybiBhPXRoaXMuaW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzSW5Dc3NUZXh0KGEpLHRoaXMuaW5zZXJ0UG9seWZpbGxSdWxlc0luQ3NzVGV4dChhKX0saW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzSW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShtLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuc2xpY2UoMCwtMikrInsifSksYS5yZXBsYWNlKG4sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYisiIHsifSl9LGluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKG8sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5zbGljZSgwLC0xKX0pLGEucmVwbGFjZShwLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEucmVwbGFjZShiLCIiKS5yZXBsYWNlKGMsIiIpO3JldHVybiBkK2V9KX0sc2NvcGVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5leHRyYWN0VW5zY29wZWRSdWxlc0Zyb21Dc3NUZXh0KGEpO2lmKGE9dGhpcy5pbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQoYSksYT10aGlzLmNvbnZlcnRDb2xvbkhvc3QoYSksYT10aGlzLmNvbnZlcnRDb2xvbkhvc3RDb250ZXh0KGEpLGE9dGhpcy5jb252ZXJ0Q29tYmluYXRvcnMoYSksYil7dmFyIGEsZD10aGlzO2coYSxmdW5jdGlvbihjKXthPWQuc2NvcGVSdWxlcyhjLGIpfSl9cmV0dXJuIGE9YSsiXG4iK2MsYS50cmltKCl9LGV4dHJhY3RVbnNjb3BlZFJ1bGVzRnJvbUNzc1RleHQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9IiI7Yj1xLmV4ZWMoYSk7KWMrPWJbMV0uc2xpY2UoMCwtMSkrIlxuXG4iO2Zvcig7Yj1yLmV4ZWMoYSk7KWMrPWJbMF0ucmVwbGFjZShiWzJdLCIiKS5yZXBsYWNlKGJbMV0sYlszXSkrIlxuXG4iO3JldHVybiBjfSxjb252ZXJ0Q29sb25Ib3N0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RSZSx0aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvbkhvc3RDb250ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RDb250ZXh0UmUsdGhpcy5jb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyKX0sY29udmVydENvbG9uUnVsZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixkLGUpe2lmKGI9cG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGQpe2Zvcih2YXIgZixnPWQuc3BsaXQoIiwiKSxoPVtdLGk9MCxqPWcubGVuZ3RoO2o+aSYmKGY9Z1tpXSk7aSsrKWY9Zi50cmltKCksaC5wdXNoKGMoYixmLGUpKTtyZXR1cm4gaC5qb2luKCIsIil9cmV0dXJuIGIrZX0pfSxjb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYi5tYXRjaChzKT90aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcihhLGIsYyk6YStiK2MrIiwgIitiKyIgIithK2N9LGNvbG9uSG9zdFBhcnRSZXBsYWNlcjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGErYi5yZXBsYWNlKHMsIiIpK2N9LGNvbnZlcnRDb21iaW5hdG9yczpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGNvbWJpbmF0b3JzUmUubGVuZ3RoO2IrKylhPWEucmVwbGFjZShjb21iaW5hdG9yc1JlW2JdLCIgIik7cmV0dXJuIGF9LHNjb3BlUnVsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz0iIjtyZXR1cm4gYSYmQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2Euc2VsZWN0b3JUZXh0JiZhLnN0eWxlJiZhLnN0eWxlLmNzc1RleHQ/KGMrPXRoaXMuc2NvcGVTZWxlY3RvcihhLnNlbGVjdG9yVGV4dCxiLHRoaXMuc3RyaWN0U3R5bGluZykrIiB7XG4JIixjKz10aGlzLnByb3BlcnRpZXNGcm9tUnVsZShhKSsiXG59XG5cbiIpOmEudHlwZT09PUNTU1J1bGUuTUVESUFfUlVMRT8oYys9IkBtZWRpYSAiK2EubWVkaWEubWVkaWFUZXh0KyIge1xuIixjKz10aGlzLnNjb3BlUnVsZXMoYS5jc3NSdWxlcyxiKSxjKz0iXG59XG5cbiIpOmEuY3NzVGV4dCYmKGMrPWEuY3NzVGV4dCsiXG5cbiIpfSx0aGlzKSxjfSxzY29wZVNlbGVjdG9yOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPWEuc3BsaXQoIiwiKTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhhLGIpJiYoYT1jJiYhYS5tYXRjaChwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IpP3RoaXMuYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlKGEsYik6dGhpcy5hcHBseVNlbGVjdG9yU2NvcGUoYSxiKSksZC5wdXNoKGEpfSx0aGlzKSxkLmpvaW4oIiwgIil9LHNlbGVjdG9yTmVlZHNTY29waW5nOmZ1bmN0aW9uKGEsYil7aWYoQXJyYXkuaXNBcnJheShiKSlyZXR1cm4hMDt2YXIgYz10aGlzLm1ha2VTY29wZU1hdGNoZXIoYik7cmV0dXJuIWEubWF0Y2goYyl9LG1ha2VTY29wZU1hdGNoZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKC9cWy9nLCJcXFsiKS5yZXBsYWNlKC9cWy9nLCJcXF0iKSxuZXcgUmVnRXhwKCJeKCIrYSsiKSIrc2VsZWN0b3JSZVN1ZmZpeCwibSIpfSxhcHBseVNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQXJyYXkuaXNBcnJheShiKT90aGlzLmFwcGx5U2VsZWN0b3JTY29wZUxpc3QoYSxiKTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGIpfSxhcHBseVNlbGVjdG9yU2NvcGVMaXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9W10sZT0wO2M9YltlXTtlKyspZC5wdXNoKHRoaXMuYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlKGEsYykpO3JldHVybiBkLmpvaW4oIiwgIil9LGFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm1hdGNoKHBvbHlmaWxsSG9zdFJlKT8oYT1hLnJlcGxhY2UocG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGIpLGEucmVwbGFjZShwb2x5ZmlsbEhvc3RSZSxiKyIgIikpOmIrIiAiK2F9LGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe2I9Yi5yZXBsYWNlKC9cW2lzPShbXlxdXSopXF0vZywiJDEiKTt2YXIgYz1bIiAiLCI+IiwiKyIsIn4iXSxkPWEsZT0iWyIrYisiXSI7cmV0dXJuIGMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1kLnNwbGl0KGEpO2Q9Yi5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9YS50cmltKCkucmVwbGFjZShwb2x5ZmlsbEhvc3RSZSwiIik7cmV0dXJuIGImJmMuaW5kZXhPZihiKTwwJiZiLmluZGV4T2YoZSk8MCYmKGE9Yi5yZXBsYWNlKC8oW146XSopKDoqKSguKikvLCIkMSIrZSsiJDIkMyIpKSxhfSkuam9pbihhKX0pLGR9LGluc2VydFBvbHlmaWxsSG9zdEluQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKGNvbG9uSG9zdENvbnRleHRSZSx0KS5yZXBsYWNlKGNvbG9uSG9zdFJlLHMpfSxwcm9wZXJ0aWVzRnJvbVJ1bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdHlsZS5jc3NUZXh0O2Euc3R5bGUuY29udGVudCYmIWEuc3R5bGUuY29udGVudC5tYXRjaCgvWyciXSt8YXR0ci8pJiYoYj1iLnJlcGxhY2UoL2NvbnRlbnQ6W147XSo7L2csImNvbnRlbnQ6ICciK2Euc3R5bGUuY29udGVudCsiJzsiKSk7dmFyIGM9YS5zdHlsZTtmb3IodmFyIGQgaW4gYykiaW5pdGlhbCI9PT1jW2RdJiYoYis9ZCsiOiBpbml0aWFsOyAiKTtyZXR1cm4gYn0scmVwbGFjZVRleHRJblN0eWxlczpmdW5jdGlvbihhLGIpe2EmJmImJihhIGluc3RhbmNlb2YgQXJyYXl8fChhPVthXSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9Yi5jYWxsKHRoaXMsYS50ZXh0Q29udGVudCl9LHRoaXMpKX0sYWRkQ3NzVG9Eb2N1bWVudDpmdW5jdGlvbihhLGIpe2EubWF0Y2goIkBpbXBvcnQiKT9pKGEsYik6aChhKX19LGw9L1wvXCpbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLy9naW0sbT0vXC9cKlxzKkBwb2x5ZmlsbCAoW14qXSpcKisoW14vKl1bXipdKlwqKykqXC8pKFtee10qPyl7L2dpbSxuPS9wb2x5ZmlsbC1uZXh0LXNlbGVjdG9yW159XSpjb250ZW50XDpbXHNdKicoW14nXSopJ1tefV0qfShbXntdKj8pey9naW0sbz0vXC9cKlxzQHBvbHlmaWxsLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxwPS8ocG9seWZpbGwtcnVsZSlbXn1dKihjb250ZW50XDpbXHNdKicoW14nXSopJ1teO10qOylbXn1dKn0vZ2ltLHE9L1wvXCpcc0Bwb2x5ZmlsbC11bnNjb3BlZC1ydWxlKFteKl0qXCorKFteLypdW14qXSpcKispKilcLy9naW0scj0vKHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUpW159XSooY29udGVudFw6W1xzXSonKFteJ10qKSdbXjtdKjspW159XSp9L2dpbSxzPSItc2hhZG93Y3NzaG9zdCIsdD0iLXNoYWRvd2Nzc2NvbnRleHQiLHU9IikoPzpcXCgoKD86XFwoW14pKF0qXFwpfFteKShdKikrPylcXCkpPyhbXix7XSopIjtjc3NDb2xvbkhvc3RSZT1uZXcgUmVnRXhwKCIoIitzK3UsImdpbSIpLGNzc0NvbG9uSG9zdENvbnRleHRSZT1uZXcgUmVnRXhwKCIoIit0K3UsImdpbSIpLHNlbGVjdG9yUmVTdWZmaXg9IihbPlxcc34rWy4sezpdW1xcc1xcU10qKT8kIixjb2xvbkhvc3RSZT0vXDpob3N0L2dpbSxjb2xvbkhvc3RDb250ZXh0UmU9L1w6aG9zdC1jb250ZXh0L2dpbSxwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3I9cysiLW5vLWNvbWJpbmF0b3IiLHBvbHlmaWxsSG9zdFJlPW5ldyBSZWdFeHAocywiZ2ltIikscG9seWZpbGxIb3N0Q29udGV4dFJlPW5ldyBSZWdFeHAodCwiZ2ltIiksY29tYmluYXRvcnNSZT1bL1xeXF4vZywvXF4vZywvXC9zaGFkb3dcLy9nLC9cL3NoYWRvdy1kZWVwXC8vZywvOjpzaGFkb3cvZywvXC9kZWVwXC8vZ107dmFyIHY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7di5zdHlsZS5kaXNwbGF5PSJub25lIjt2YXIgdyx4PW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goIkNocm9tZSIpLHk9InNoaW0tc2hhZG93ZG9tIix6PSJzaGltLXNoYWRvd2RvbS1jc3MiLEE9Im5vLXNoaW0iO2lmKHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCl7aCgic3R5bGUgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1cbiIpO3ZhciBCPXdyYXAoZG9jdW1lbnQpLEM9Qi5xdWVyeVNlbGVjdG9yKCJoZWFkIik7Qy5pbnNlcnRCZWZvcmUoaigpLEMuY2hpbGROb2Rlc1swXSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXt2YXIgYj1hLnVybFJlc29sdmVyO2lmKHdpbmRvdy5IVE1MSW1wb3J0cyYmIUhUTUxJbXBvcnRzLnVzZU5hdGl2ZSl7dmFyIGM9ImxpbmtbcmVsPXN0eWxlc2hlZXRdWyIreSsiXSIsZD0ic3R5bGVbIit5KyJdIjtIVE1MSW1wb3J0cy5pbXBvcnRlci5kb2N1bWVudFByZWxvYWRTZWxlY3RvcnMrPSIsIitjLEhUTUxJbXBvcnRzLmltcG9ydGVyLmltcG9ydHNQcmVsb2FkU2VsZWN0b3JzKz0iLCIrYyxIVE1MSW1wb3J0cy5wYXJzZXIuZG9jdW1lbnRTZWxlY3RvcnM9W0hUTUxJbXBvcnRzLnBhcnNlci5kb2N1bWVudFNlbGVjdG9ycyxjLGRdLmpvaW4oIiwiKTt2YXIgZT1IVE1MSW1wb3J0cy5wYXJzZXIucGFyc2VHZW5lcmljO0hUTUxJbXBvcnRzLnBhcnNlci5wYXJzZUdlbmVyaWM9ZnVuY3Rpb24oYSl7aWYoIWFbel0pe3ZhciBjPWEuX19pbXBvcnRFbGVtZW50fHxhO2lmKCFjLmhhc0F0dHJpYnV0ZSh5KSlyZXR1cm4gdm9pZCBlLmNhbGwodGhpcyxhKTthLl9fcmVzb3VyY2U/KGM9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksYy50ZXh0Q29udGVudD1iLnJlc29sdmVDc3NUZXh0KGEuX19yZXNvdXJjZSxhLmhyZWYpKTpiLnJlc29sdmVTdHlsZShjKSxjLnRleHRDb250ZW50PWsuc2hpbVN0eWxlKGMpLGMucmVtb3ZlQXR0cmlidXRlKHksIiIpLGMuc2V0QXR0cmlidXRlKHosIiIpLGNbel09ITAsYy5wYXJlbnROb2RlIT09QyYmKGEucGFyZW50Tm9kZT09PUM/Qy5yZXBsYWNlQ2hpbGQoYyxhKTpDLmFwcGVuZENoaWxkKGMpKSxjLl9faW1wb3J0UGFyc2VkPSEwLHRoaXMubWFya1BhcnNpbmdDb21wbGV0ZShhKSx0aGlzLnBhcnNlTmV4dCgpfX07dmFyIGY9SFRNTEltcG9ydHMucGFyc2VyLmhhc1Jlc291cmNlO0hUTUxJbXBvcnRzLnBhcnNlci5oYXNSZXNvdXJjZT1mdW5jdGlvbihhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmInN0eWxlc2hlZXQiPT09YS5yZWwmJmEuaGFzQXR0cmlidXRlKHkpP2EuX19yZXNvdXJjZTpmLmNhbGwodGhpcyxhKX19fSl9YS5TaGFkb3dDU1M9a30od2luZG93LlBsYXRmb3JtKSk6IWZ1bmN0aW9uKCl7d2luZG93LndyYXA9d2luZG93LnVud3JhcD1mdW5jdGlvbihhKXtyZXR1cm4gYX0sYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtpZihDdXN0b21FbGVtZW50cy51c2VOYXRpdmU9PT0hMSl7dmFyIGE9RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdDtFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGI9YS5jYWxsKHRoaXMpO3JldHVybiBDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxifX19KSxQbGF0Zm9ybS50ZW1wbGF0ZUNvbnRlbnQ9ZnVuY3Rpb24oYSl7aWYod2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChhKSwhYS5jb250ZW50JiYhYS5fY29udGVudCl7Zm9yKHZhciBiPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTthLmZpcnN0Q2hpbGQ7KWIuYXBwZW5kQ2hpbGQoYS5maXJzdENoaWxkKTthLl9jb250ZW50PWJ9cmV0dXJuIGEuY29udGVudHx8YS5fY29udGVudH19KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIHZvaWQgMCE9PW1bYV19ZnVuY3Rpb24gYygpe2guY2FsbCh0aGlzKSx0aGlzLl9pc0ludmFsaWQ9ITB9ZnVuY3Rpb24gZChhKXtyZXR1cm4iIj09YSYmYy5jYWxsKHRoaXMpLGEudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gYj4zMiYmMTI3PmImJi0xPT1bMzQsMzUsNjAsNjIsNjMsOTZdLmluZGV4T2YoYik/YTplbmNvZGVVUklDb21wb25lbnQoYSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGI+MzImJjEyNz5iJiYtMT09WzM0LDM1LDYwLDYyLDk2XS5pbmRleE9mKGIpP2E6ZW5jb2RlVVJJQ29tcG9uZW50KGEpfWZ1bmN0aW9uIGcoYSxnLGgpe2Z1bmN0aW9uIGkoYSl7dC5wdXNoKGEpfXZhciBqPWd8fCJzY2hlbWUgc3RhcnQiLGs9MCxsPSIiLHI9ITEscz0hMSx0PVtdO2E6Zm9yKDsoYVtrLTFdIT1vfHwwPT1rKSYmIXRoaXMuX2lzSW52YWxpZDspe3ZhciB1PWFba107c3dpdGNoKGope2Nhc2Uic2NoZW1lIHN0YXJ0IjppZighdXx8IXAudGVzdCh1KSl7aWYoZyl7aSgiSW52YWxpZCBzY2hlbWUuIik7YnJlYWsgYX1sPSIiLGo9Im5vIHNjaGVtZSI7Y29udGludWV9bCs9dS50b0xvd2VyQ2FzZSgpLGo9InNjaGVtZSI7YnJlYWs7Y2FzZSJzY2hlbWUiOmlmKHUmJnEudGVzdCh1KSlsKz11LnRvTG93ZXJDYXNlKCk7ZWxzZXtpZigiOiIhPXUpe2lmKGcpe2lmKG89PXUpYnJlYWsgYTtpKCJDb2RlIHBvaW50IG5vdCBhbGxvd2VkIGluIHNjaGVtZTogIit1KTticmVhayBhfWw9IiIsaz0wLGo9Im5vIHNjaGVtZSI7Y29udGludWV9aWYodGhpcy5fc2NoZW1lPWwsbD0iIixnKWJyZWFrIGE7Yih0aGlzLl9zY2hlbWUpJiYodGhpcy5faXNSZWxhdGl2ZT0hMCksaj0iZmlsZSI9PXRoaXMuX3NjaGVtZT8icmVsYXRpdmUiOnRoaXMuX2lzUmVsYXRpdmUmJmgmJmguX3NjaGVtZT09dGhpcy5fc2NoZW1lPyJyZWxhdGl2ZSBvciBhdXRob3JpdHkiOnRoaXMuX2lzUmVsYXRpdmU/ImF1dGhvcml0eSBmaXJzdCBzbGFzaCI6InNjaGVtZSBkYXRhIn1icmVhaztjYXNlInNjaGVtZSBkYXRhIjoiPyI9PXU/KHF1ZXJ5PSI/IixqPSJxdWVyeSIpOiIjIj09dT8odGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iik6byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fc2NoZW1lRGF0YSs9ZSh1KSk7YnJlYWs7Y2FzZSJubyBzY2hlbWUiOmlmKGgmJmIoaC5fc2NoZW1lKSl7aj0icmVsYXRpdmUiO2NvbnRpbnVlfWkoIk1pc3Npbmcgc2NoZW1lLiIpLGMuY2FsbCh0aGlzKTticmVhaztjYXNlInJlbGF0aXZlIG9yIGF1dGhvcml0eSI6aWYoIi8iIT11fHwiLyIhPWFbaysxXSl7aSgiRXhwZWN0ZWQgLywgZ290OiAiK3UpLGo9InJlbGF0aXZlIjtjb250aW51ZX1qPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2JyZWFrO2Nhc2UicmVsYXRpdmUiOmlmKHRoaXMuX2lzUmVsYXRpdmU9ITAsImZpbGUiIT10aGlzLl9zY2hlbWUmJih0aGlzLl9zY2hlbWU9aC5fc2NoZW1lKSxvPT11KXt0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PWguX3F1ZXJ5O2JyZWFrIGF9aWYoIi8iPT11fHwiXFwiPT11KSJcXCI9PXUmJmkoIlxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC4iKSxqPSJyZWxhdGl2ZSBzbGFzaCI7ZWxzZSBpZigiPyI9PXUpdGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT0iPyIsaj0icXVlcnkiO2Vsc2V7aWYoIiMiIT11KXt2YXIgdj1hW2srMV0sdz1hW2srMl07KCJmaWxlIiE9dGhpcy5fc2NoZW1lfHwhcC50ZXN0KHUpfHwiOiIhPXYmJiJ8IiE9dnx8byE9dyYmIi8iIT13JiYiXFwiIT13JiYiPyIhPXcmJiIjIiE9dykmJih0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3BhdGgucG9wKCkpLGo9InJlbGF0aXZlIHBhdGgiO2NvbnRpbnVlfXRoaXMuX2hvc3Q9aC5faG9zdCx0aGlzLl9wb3J0PWguX3BvcnQsdGhpcy5fcGF0aD1oLl9wYXRoLnNsaWNlKCksdGhpcy5fcXVlcnk9aC5fcXVlcnksdGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50In1icmVhaztjYXNlInJlbGF0aXZlIHNsYXNoIjppZigiLyIhPXUmJiJcXCIhPXUpeyJmaWxlIiE9dGhpcy5fc2NoZW1lJiYodGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCksaj0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9IlxcIj09dSYmaSgiXFwgaXMgYW4gaW52YWxpZCBjb2RlIHBvaW50LiIpLGo9ImZpbGUiPT10aGlzLl9zY2hlbWU/ImZpbGUgaG9zdCI6ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI7CmJyZWFrO2Nhc2UiYXV0aG9yaXR5IGZpcnN0IHNsYXNoIjppZigiLyIhPXUpe2koIkV4cGVjdGVkICcvJywgZ290OiAiK3UpLGo9ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI7Y29udGludWV9aj0iYXV0aG9yaXR5IHNlY29uZCBzbGFzaCI7YnJlYWs7Y2FzZSJhdXRob3JpdHkgc2Vjb25kIHNsYXNoIjppZihqPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiLCIvIiE9dSl7aSgiRXhwZWN0ZWQgJy8nLCBnb3Q6ICIrdSk7Y29udGludWV9YnJlYWs7Y2FzZSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiOmlmKCIvIiE9dSYmIlxcIiE9dSl7aj0iYXV0aG9yaXR5Ijtjb250aW51ZX1pKCJFeHBlY3RlZCBhdXRob3JpdHksIGdvdDogIit1KTticmVhaztjYXNlImF1dGhvcml0eSI6aWYoIkAiPT11KXtyJiYoaSgiQCBhbHJlYWR5IHNlZW4uIiksbCs9IiU0MCIpLHI9ITA7Zm9yKHZhciB4PTA7eDxsLmxlbmd0aDt4Kyspe3ZhciB5PWxbeF07aWYoIgkiIT15JiYiXG4iIT15JiYiXHIiIT15KWlmKCI6IiE9eXx8bnVsbCE9PXRoaXMuX3Bhc3N3b3JkKXt2YXIgej1lKHkpO251bGwhPT10aGlzLl9wYXNzd29yZD90aGlzLl9wYXNzd29yZCs9ejp0aGlzLl91c2VybmFtZSs9en1lbHNlIHRoaXMuX3Bhc3N3b3JkPSIiO2Vsc2UgaSgiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGF1dGhvcml0eS4iKX1sPSIifWVsc2V7aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dSl7ay09bC5sZW5ndGgsbD0iIixqPSJob3N0Ijtjb250aW51ZX1sKz11fWJyZWFrO2Nhc2UiZmlsZSBob3N0IjppZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11KXsyIT1sLmxlbmd0aHx8IXAudGVzdChsWzBdKXx8IjoiIT1sWzFdJiYifCIhPWxbMV0/MD09bC5sZW5ndGg/aj0icmVsYXRpdmUgcGF0aCBzdGFydCI6KHRoaXMuX2hvc3Q9ZC5jYWxsKHRoaXMsbCksbD0iIixqPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0Iik6aj0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9IgkiPT11fHwiXG4iPT11fHwiXHIiPT11P2koIkludmFsaWQgd2hpdGVzcGFjZSBpbiBmaWxlIGhvc3QuIik6bCs9dTticmVhaztjYXNlImhvc3QiOmNhc2UiaG9zdG5hbWUiOmlmKCI6IiE9dXx8cyl7aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dSl7aWYodGhpcy5faG9zdD1kLmNhbGwodGhpcyxsKSxsPSIiLGo9InJlbGF0aXZlIHBhdGggc3RhcnQiLGcpYnJlYWsgYTtjb250aW51ZX0iCSIhPXUmJiJcbiIhPXUmJiJcciIhPXU/KCJbIj09dT9zPSEwOiJdIj09dSYmKHM9ITEpLGwrPXUpOmkoIkludmFsaWQgY29kZSBwb2ludCBpbiBob3N0L2hvc3RuYW1lOiAiK3UpfWVsc2UgaWYodGhpcy5faG9zdD1kLmNhbGwodGhpcyxsKSxsPSIiLGo9InBvcnQiLCJob3N0bmFtZSI9PWcpYnJlYWsgYTticmVhaztjYXNlInBvcnQiOmlmKC9bMC05XS8udGVzdCh1KSlsKz11O2Vsc2V7aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dXx8Zyl7aWYoIiIhPWwpe3ZhciBBPXBhcnNlSW50KGwsMTApO0EhPW1bdGhpcy5fc2NoZW1lXSYmKHRoaXMuX3BvcnQ9QSsiIiksbD0iIn1pZihnKWJyZWFrIGE7aj0icmVsYXRpdmUgcGF0aCBzdGFydCI7Y29udGludWV9IgkiPT11fHwiXG4iPT11fHwiXHIiPT11P2koIkludmFsaWQgY29kZSBwb2ludCBpbiBwb3J0OiAiK3UpOmMuY2FsbCh0aGlzKX1icmVhaztjYXNlInJlbGF0aXZlIHBhdGggc3RhcnQiOmlmKCJcXCI9PXUmJmkoIidcXCcgbm90IGFsbG93ZWQgaW4gcGF0aC4iKSxqPSJyZWxhdGl2ZSBwYXRoIiwiLyIhPXUmJiJcXCIhPXUpY29udGludWU7YnJlYWs7Y2FzZSJyZWxhdGl2ZSBwYXRoIjppZihvIT11JiYiLyIhPXUmJiJcXCIhPXUmJihnfHwiPyIhPXUmJiIjIiE9dSkpIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYobCs9ZSh1KSk7ZWxzZXsiXFwiPT11JiZpKCJcXCBub3QgYWxsb3dlZCBpbiByZWxhdGl2ZSBwYXRoLiIpO3ZhciBCOyhCPW5bbC50b0xvd2VyQ2FzZSgpXSkmJihsPUIpLCIuLiI9PWw/KHRoaXMuX3BhdGgucG9wKCksIi8iIT11JiYiXFwiIT11JiZ0aGlzLl9wYXRoLnB1c2goIiIpKToiLiI9PWwmJiIvIiE9dSYmIlxcIiE9dT90aGlzLl9wYXRoLnB1c2goIiIpOiIuIiE9bCYmKCJmaWxlIj09dGhpcy5fc2NoZW1lJiYwPT10aGlzLl9wYXRoLmxlbmd0aCYmMj09bC5sZW5ndGgmJnAudGVzdChsWzBdKSYmInwiPT1sWzFdJiYobD1sWzBdKyI6IiksdGhpcy5fcGF0aC5wdXNoKGwpKSxsPSIiLCI/Ij09dT8odGhpcy5fcXVlcnk9Ij8iLGo9InF1ZXJ5Iik6IiMiPT11JiYodGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iil9YnJlYWs7Y2FzZSJxdWVyeSI6Z3x8IiMiIT11P28hPXUmJiIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dSYmKHRoaXMuX3F1ZXJ5Kz1mKHUpKToodGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iik7YnJlYWs7Y2FzZSJmcmFnbWVudCI6byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fZnJhZ21lbnQrPXUpfWsrK319ZnVuY3Rpb24gaCgpe3RoaXMuX3NjaGVtZT0iIix0aGlzLl9zY2hlbWVEYXRhPSIiLHRoaXMuX3VzZXJuYW1lPSIiLHRoaXMuX3Bhc3N3b3JkPW51bGwsdGhpcy5faG9zdD0iIix0aGlzLl9wb3J0PSIiLHRoaXMuX3BhdGg9W10sdGhpcy5fcXVlcnk9IiIsdGhpcy5fZnJhZ21lbnQ9IiIsdGhpcy5faXNJbnZhbGlkPSExLHRoaXMuX2lzUmVsYXRpdmU9ITF9ZnVuY3Rpb24gaShhLGIpe3ZvaWQgMD09PWJ8fGIgaW5zdGFuY2VvZiBpfHwoYj1uZXcgaShTdHJpbmcoYikpKSx0aGlzLl91cmw9YSxoLmNhbGwodGhpcyk7dmFyIGM9YS5yZXBsYWNlKC9eWyBcdFxyXG5cZl0rfFsgXHRcclxuXGZdKyQvZywiIik7Zy5jYWxsKHRoaXMsYyxudWxsLGIpfXZhciBqPSExO2lmKCFhLmZvcmNlSlVSTCl0cnl7dmFyIGs9bmV3IFVSTCgiYiIsImh0dHA6Ly9hIik7aj0iaHR0cDovL2EvYiI9PT1rLmhyZWZ9Y2F0Y2gobCl7fWlmKCFqKXt2YXIgbT1PYmplY3QuY3JlYXRlKG51bGwpO20uZnRwPTIxLG0uZmlsZT0wLG0uZ29waGVyPTcwLG0uaHR0cD04MCxtLmh0dHBzPTQ0MyxtLndzPTgwLG0ud3NzPTQ0Mzt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO25bIiUyZSJdPSIuIixuWyIuJTJlIl09Ii4uIixuWyIlMmUuIl09Ii4uIixuWyIlMmUlMmUiXT0iLi4iO3ZhciBvPXZvaWQgMCxwPS9bYS16QS1aXS8scT0vW2EtekEtWjAtOVwrXC1cLl0vO2kucHJvdG90eXBlPXtnZXQgaHJlZigpe2lmKHRoaXMuX2lzSW52YWxpZClyZXR1cm4gdGhpcy5fdXJsO3ZhciBhPSIiO3JldHVybigiIiE9dGhpcy5fdXNlcm5hbWV8fG51bGwhPXRoaXMuX3Bhc3N3b3JkKSYmKGE9dGhpcy5fdXNlcm5hbWUrKG51bGwhPXRoaXMuX3Bhc3N3b3JkPyI6Iit0aGlzLl9wYXNzd29yZDoiIikrIkAiKSx0aGlzLnByb3RvY29sKyh0aGlzLl9pc1JlbGF0aXZlPyIvLyIrYSt0aGlzLmhvc3Q6IiIpK3RoaXMucGF0aG5hbWUrdGhpcy5fcXVlcnkrdGhpcy5fZnJhZ21lbnR9LHNldCBocmVmKGEpe2guY2FsbCh0aGlzKSxnLmNhbGwodGhpcyxhKX0sZ2V0IHByb3RvY29sKCl7cmV0dXJuIHRoaXMuX3NjaGVtZSsiOiJ9LHNldCBwcm90b2NvbChhKXt0aGlzLl9pc0ludmFsaWR8fGcuY2FsbCh0aGlzLGErIjoiLCJzY2hlbWUgc3RhcnQiKX0sZ2V0IGhvc3QoKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkPyIiOnRoaXMuX3BvcnQ/dGhpcy5faG9zdCsiOiIrdGhpcy5fcG9ydDp0aGlzLl9ob3N0fSxzZXQgaG9zdChhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZnLmNhbGwodGhpcyxhLCJob3N0Iil9LGdldCBob3N0bmFtZSgpe3JldHVybiB0aGlzLl9ob3N0fSxzZXQgaG9zdG5hbWUoYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmZy5jYWxsKHRoaXMsYSwiaG9zdG5hbWUiKX0sZ2V0IHBvcnQoKXtyZXR1cm4gdGhpcy5fcG9ydH0sc2V0IHBvcnQoYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmZy5jYWxsKHRoaXMsYSwicG9ydCIpfSxnZXQgcGF0aG5hbWUoKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkPyIiOnRoaXMuX2lzUmVsYXRpdmU/Ii8iK3RoaXMuX3BhdGguam9pbigiLyIpOnRoaXMuX3NjaGVtZURhdGF9LHNldCBwYXRobmFtZShhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiYodGhpcy5fcGF0aD1bXSxnLmNhbGwodGhpcyxhLCJyZWxhdGl2ZSBwYXRoIHN0YXJ0IikpfSxnZXQgc2VhcmNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX3F1ZXJ5fHwiPyI9PXRoaXMuX3F1ZXJ5PyIiOnRoaXMuX3F1ZXJ5fSxzZXQgc2VhcmNoKGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJih0aGlzLl9xdWVyeT0iPyIsIj8iPT1hWzBdJiYoYT1hLnNsaWNlKDEpKSxnLmNhbGwodGhpcyxhLCJxdWVyeSIpKX0sZ2V0IGhhc2goKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkfHwhdGhpcy5fZnJhZ21lbnR8fCIjIj09dGhpcy5fZnJhZ21lbnQ/IiI6dGhpcy5fZnJhZ21lbnR9LHNldCBoYXNoKGEpe3RoaXMuX2lzSW52YWxpZHx8KHRoaXMuX2ZyYWdtZW50PSIjIiwiIyI9PWFbMF0mJihhPWEuc2xpY2UoMSkpLGcuY2FsbCh0aGlzLGEsImZyYWdtZW50IikpfX0sYS5VUkw9aX19KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9YXx8e30sZD0xO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspe3ZhciBlPWFyZ3VtZW50c1tkXTt0cnl7Zm9yKHZhciBmIGluIGUpYyhmLGUsYil9Y2F0Y2goZyl7fX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEsYixjKXt2YXIgZT1kKGIsYSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSxlKX1mdW5jdGlvbiBkKGEsYil7aWYoYSl7dmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpO3JldHVybiBjfHxkKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxiKX19RnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fChGdW5jdGlvbi5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtyZXR1cm4gZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKSxiLmFwcGx5KGEsZCl9fSksYS5taXhpbj1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixjKXt2YXIgZD0ic3RyaW5nIj09dHlwZW9mIGE/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKTphLmNsb25lTm9kZSghMCk7aWYoZC5pbm5lckhUTUw9YixjKWZvcih2YXIgZSBpbiBjKWQuc2V0QXR0cmlidXRlKGUsY1tlXSk7cmV0dXJuIGR9dmFyIGM9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQsZD1ET01Ub2tlbkxpc3QucHJvdG90eXBlLnJlbW92ZTtET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspYy5jYWxsKHRoaXMsYXJndW1lbnRzW2FdKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWQuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGEsYil7MT09YXJndW1lbnRzLmxlbmd0aCYmKGI9IXRoaXMuY29udGFpbnMoYSkpLGI/dGhpcy5hZGQoYSk6dGhpcy5yZW1vdmUoYSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUuc3dpdGNoPWZ1bmN0aW9uKGEsYil7YSYmdGhpcy5yZW1vdmUoYSksYiYmdGhpcy5hZGQoYil9O3ZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMpfSxmPXdpbmRvdy5OYW1lZE5vZGVNYXB8fHdpbmRvdy5Nb3pOYW1lZEF0dHJNYXB8fHt9O2lmKE5vZGVMaXN0LnByb3RvdHlwZS5hcnJheT1lLGYucHJvdG90eXBlLmFycmF5PWUsSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmFycmF5PWUsIXdpbmRvdy5wZXJmb3JtYW5jZSl7dmFyIGc9RGF0ZS5ub3coKTt3aW5kb3cucGVyZm9ybWFuY2U9e25vdzpmdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLWd9fX13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7cmV0dXJuIGE/ZnVuY3Rpb24oYil7cmV0dXJuIGEoZnVuY3Rpb24oKXtiKHBlcmZvcm1hbmNlLm5vdygpKX0pfTpmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9fSgpKTt2YXIgaD1bXSxpPWZ1bmN0aW9uKCl7aC5wdXNoKGFyZ3VtZW50cyl9O3dpbmRvdy5Qb2x5bWVyPWksYS5kZWxpdmVyRGVjbGFyYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIGEuZGVsaXZlckRlY2xhcmF0aW9ucz1mdW5jdGlvbigpe3Rocm93IlBvc3NpYmxlIGF0dGVtcHQgdG8gbG9hZCBQb2x5bWVyIHR3aWNlIn0saH0sd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7d2luZG93LlBvbHltZXI9PT1pJiYod2luZG93LlBvbHltZXI9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdZb3UgdHJpZWQgdG8gdXNlIHBvbHltZXIgd2l0aG91dCBsb2FkaW5nIGl0IGZpcnN0LiBUbyBsb2FkIHBvbHltZXIsIDxsaW5rIHJlbD0iaW1wb3J0IiBocmVmPSJjb21wb25lbnRzL3BvbHltZXIvcG9seW1lci5odG1sIj4nKX0pfSksYS5jcmVhdGVET009Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXthLnRlbXBsYXRlQ29udGVudD1hLnRlbXBsYXRlQ29udGVudHx8ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudH19KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7YT1hfHwod2luZG93Lkluc3BlY3Rvcj17fSk7dmFyIGI7d2luZG93LnNpbnNwZWN0PWZ1bmN0aW9uKGEsZCl7Ynx8KGI9d2luZG93Lm9wZW4oIiIsIlNoYWRvd0RPTSBJbnNwZWN0b3IiLG51bGwsITApLGIuZG9jdW1lbnQud3JpdGUoYyksYi5hcGk9e3NoYWRvd2l6ZTpzaGFkb3dpemV9KSxmKGF8fHdyYXAoZG9jdW1lbnQuYm9keSksZCl9O3ZhciBjPVsiPCFET0NUWVBFIGh0bWw+IiwiPGh0bWw+IiwiICA8aGVhZD4iLCIgICAgPHRpdGxlPlNoYWRvd0RPTSBJbnNwZWN0b3I8L3RpdGxlPiIsIiAgICA8c3R5bGU+IiwiICAgICAgYm9keSB7IiwiICAgICAgfSIsIiAgICAgIHByZSB7IiwnICAgICAgICBmb250OiA5cHQgIkNvdXJpZXIgTmV3IiwgbW9ub3NwYWNlOycsIiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNWVtOyIsIiAgICAgIH0iLCIgICAgICB0YWcgeyIsIiAgICAgICAgY29sb3I6IHB1cnBsZTsiLCIgICAgICB9IiwiICAgICAgdWwgeyIsIiAgICAgICAgIG1hcmdpbjogMDsiLCIgICAgICAgICBwYWRkaW5nOiAwOyIsIiAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7IiwiICAgICAgfSIsIiAgICAgIGxpIHsiLCIgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwiICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjFmMTsiLCIgICAgICAgICBwYWRkaW5nOiA0cHggNnB4OyIsIiAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsiLCIgICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDsiLCIgICAgICB9IiwiICAgIDwvc3R5bGU+IiwiICA8L2hlYWQ+IiwiICA8Ym9keT4iLCcgICAgPHVsIGlkPSJjcnVtYnMiPicsIiAgICA8L3VsPiIsJyAgICA8ZGl2IGlkPSJ0cmVlIj48L2Rpdj4nLCIgIDwvYm9keT4iLCI8L2h0bWw+Il0uam9pbigiXG4iKSxkPVtdLGU9ZnVuY3Rpb24oKXt2YXIgYT1iLmRvY3VtZW50LGM9YS5xdWVyeVNlbGVjdG9yKCIjY3J1bWJzIik7Yy50ZXh0Q29udGVudD0iIjtmb3IodmFyIGUsZz0wO2U9ZFtnXTtnKyspe3ZhciBoPWEuY3JlYXRlRWxlbWVudCgiYSIpO2guaHJlZj0iIyIsaC50ZXh0Q29udGVudD1lLmxvY2FsTmFtZSxoLmlkeD1nLGgub25jbGljaz1mdW5jdGlvbihhKXtmb3IodmFyIGI7ZC5sZW5ndGg+dGhpcy5pZHg7KWI9ZC5wb3AoKTtmKGIuc2hhZG93fHxiLGIpLGEucHJldmVudERlZmF1bHQoKX0sYy5hcHBlbmRDaGlsZChhLmNyZWF0ZUVsZW1lbnQoImxpIikpLmFwcGVuZENoaWxkKGgpfX0sZj1mdW5jdGlvbihhLGMpe3ZhciBmPWIuZG9jdW1lbnQ7az1bXTt2YXIgZz1jfHxhO2QucHVzaChnKSxlKCksZi5ib2R5LnF1ZXJ5U2VsZWN0b3IoIiN0cmVlIikuaW5uZXJIVE1MPSI8cHJlPiIraihhLGEuY2hpbGROb2RlcykrIjwvcHJlPiJ9LGc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxoPXtTVFlMRToxLFNDUklQVDoxLCIjY29tbWVudCI6MSxURU1QTEFURToxfSxpPWZ1bmN0aW9uKGEpe3JldHVybiBoW2Eubm9kZU5hbWVdfSxqPWZ1bmN0aW9uKGEsYixjKXtpZihpKGEpKXJldHVybiIiO3ZhciBkPWN8fCIiO2lmKGEubG9jYWxOYW1lfHwxMT09YS5ub2RlVHlwZSl7dmFyIGU9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCIsZj1kK2woYSk7ImNvbnRlbnQiPT1lJiYoYj1hLmdldERpc3RyaWJ1dGVkTm9kZXMoKSksZis9Ijxici8+Ijt2YXIgaD1kKyImbmJzcDsmbmJzcDsiO2coYixmdW5jdGlvbihhKXtmKz1qKGEsYS5jaGlsZE5vZGVzLGgpfSksZis9ZCx7YnI6MX1bZV18fChmKz0iPHRhZz4mbHQ7LyIrZSsiJmd0OzwvdGFnPiIsZis9Ijxici8+Iil9ZWxzZXt2YXIgaz1hLnRleHRDb250ZW50LnRyaW0oKTtmPWs/ZCsnIicraysnIjxici8+JzoiIn1yZXR1cm4gZn0saz1bXSxsPWZ1bmN0aW9uKGEpe3ZhciBiPSI8dGFnPiZsdDsiLGM9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCI7cmV0dXJuIGEud2Via2l0U2hhZG93Um9vdHx8YS5zaGFkb3dSb290PyhiKz0nIDxidXR0b24gaWR4PSInK2subGVuZ3RoKyciIG9uY2xpY2s9ImFwaS5zaGFkb3dpemUuY2FsbCh0aGlzKSI+JytjKyI8L2J1dHRvbj4iLGsucHVzaChhKSk6Yis9Y3x8InNoYWRvdy1yb290IixhLmF0dHJpYnV0ZXMmJmcoYS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGEpe2IrPSIgIithLm5hbWUrKGEudmFsdWU/Jz0iJythLnZhbHVlKyciJzoiIil9KSxiKz0iJmd0OzwvdGFnPiJ9O3NoYWRvd2l6ZT1mdW5jdGlvbigpe3ZhciBhPU51bWJlcih0aGlzLmF0dHJpYnV0ZXMuaWR4LnZhbHVlKSxiPWtbYV07Yj9mKGIud2Via2l0U2hhZG93Um9vdHx8Yi5zaGFkb3dSb290LGIpOihjb25zb2xlLmxvZygiYmFkIHNoYWRvd2l6ZSBub2RlIiksY29uc29sZS5kaXIodGhpcykpfSxhLm91dHB1dD1qfSh3aW5kb3cuSW5zcGVjdG9yKSxmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7YS50ZXh0Q29udGVudD0iYm9keSB7dHJhbnNpdGlvbjogb3BhY2l0eSBlYXNlLWluIDAuMnM7IH0gXG5ib2R5W3VucmVzb2x2ZWRdIHtvcGFjaXR5OiAwOyBkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsgfSBcbiI7dmFyIGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX0oUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYj1ifHxbXSxiLm1hcHx8KGI9W2JdKSxhLmFwcGx5KHRoaXMsYi5tYXAoZCkpfWZ1bmN0aW9uIGMoYSxjLGQpe3ZhciBlO3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuO2Nhc2UgMTplPW51bGw7YnJlYWs7Y2FzZSAyOmU9Yy5hcHBseSh0aGlzKTticmVhaztkZWZhdWx0OmU9YihkLGMpfWZbYV09ZX1mdW5jdGlvbiBkKGEpe3JldHVybiBmW2FdfWZ1bmN0aW9uIGUoYSxjKXtIVE1MSW1wb3J0cy53aGVuSW1wb3J0c1JlYWR5KGZ1bmN0aW9uKCl7YihjLGEpfSl9dmFyIGY9e307YS5tYXJzaGFsPWQsYS5tb2R1bGU9YyxhLnVzaW5nPWV9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmLnRleHRDb250ZW50PWQrKyxlLnB1c2goYSl9ZnVuY3Rpb24gYygpe2Zvcig7ZS5sZW5ndGg7KWUuc2hpZnQoKSgpfXZhciBkPTAsZT1bXSxmPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcod2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fEpzTXV0YXRpb25PYnNlcnZlcikoYykub2JzZXJ2ZShmLHtjaGFyYWN0ZXJEYXRhOiEwfSksYS5lbmRPZk1pY3JvdGFzaz1ifShQbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCxlKXtyZXR1cm4gYS5yZXBsYWNlKGUsZnVuY3Rpb24oYSxlLGYsZyl7dmFyIGg9Zi5yZXBsYWNlKC9bIiddL2csIiIpO3JldHVybiBoPWMoYixoLGQpLGUrIiciK2grIiciK2d9KX1mdW5jdGlvbiBjKGEsYixjKXtpZihiJiYiLyI9PT1iWzBdKXJldHVybiBiO3ZhciBlPW5ldyBVUkwoYixhKTtyZXR1cm4gYz9lLmhyZWY6ZChlLmhyZWYpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9bmV3IFVSTChkb2N1bWVudC5iYXNlVVJJKSxjPW5ldyBVUkwoYSxiKTtyZXR1cm4gYy5ob3N0PT09Yi5ob3N0JiZjLnBvcnQ9PT1iLnBvcnQmJmMucHJvdG9jb2w9PT1iLnByb3RvY29sP2UoYixjKTphfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9YS5wYXRobmFtZSxkPWIucGF0aG5hbWUsZT1jLnNwbGl0KCIvIiksZj1kLnNwbGl0KCIvIik7ZS5sZW5ndGgmJmVbMF09PT1mWzBdOyllLnNoaWZ0KCksZi5zaGlmdCgpO2Zvcih2YXIgZz0wLGg9ZS5sZW5ndGgtMTtoPmc7ZysrKWYudW5zaGlmdCgiLi4iKTtyZXR1cm4gZi5qb2luKCIvIikrYi5zZWFyY2grYi5oYXNofXZhciBmPXtyZXNvbHZlRG9tOmZ1bmN0aW9uKGEsYil7Yj1ifHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSx0aGlzLnJlc29sdmVBdHRyaWJ1dGVzKGEsYiksdGhpcy5yZXNvbHZlU3R5bGVzKGEsYik7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJ0ZW1wbGF0ZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKWQuY29udGVudCYmdGhpcy5yZXNvbHZlRG9tKGQuY29udGVudCxiKX0scmVzb2x2ZVRlbXBsYXRlOmZ1bmN0aW9uKGEpe3RoaXMucmVzb2x2ZURvbShhLmNvbnRlbnQsYS5vd25lckRvY3VtZW50LmJhc2VVUkkpfSxyZXNvbHZlU3R5bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKXRoaXMucmVzb2x2ZVN0eWxlKGQsYil9LHJlc29sdmVTdHlsZTpmdW5jdGlvbihhLGIpe2I9Ynx8YS5vd25lckRvY3VtZW50LmJhc2VVUkksYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVDc3NUZXh0KGEudGV4dENvbnRlbnQsYil9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYT1iKGEsYyxkLGcpLGIoYSxjLGQsaCl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7YS5oYXNBdHRyaWJ1dGVzJiZhLmhhc0F0dHJpYnV0ZXMoKSYmdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoYSxiKTt2YXIgYz1hJiZhLnF1ZXJ5U2VsZWN0b3JBbGwoaik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoZCxiKX0scmVzb2x2ZUVsZW1lbnRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsZCl7ZD1kfHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIGYsaD1hLmF0dHJpYnV0ZXNbZV0saT1oJiZoLnZhbHVlO2kmJmkuc2VhcmNoKGspPDAmJihmPSJzdHlsZSI9PT1lP2IoaSxkLGcpOmMoZCxpKSxoLnZhbHVlPWYpfSl9fSxnPS8odXJsXCgpKFteKV0qKShcKSkvZyxoPS8oQGltcG9ydFtcc10rKD8hdXJsXCgpKShbXjtdKikoOykvZyxpPVsiaHJlZiIsInNyYyIsImFjdGlvbiIsInN0eWxlIl0saj0iWyIraS5qb2luKCJdLFsiKSsiXSIsaz0ie3suKn19IjthLnVybFJlc29sdmVyPWZ9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3UucHVzaChhKSx0fHwodD0hMCxxKGQpKX1mdW5jdGlvbiBjKGEpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSl8fGF9ZnVuY3Rpb24gZCgpe3Q9ITE7dmFyIGE9dTt1PVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7dmFyIGI9ITE7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEudGFrZVJlY29yZHMoKTtlKGEpLGMubGVuZ3RoJiYoYS5jYWxsYmFja18oYyxhKSxiPSEwKX0pLGImJmQoKX1mdW5jdGlvbiBlKGEpe2Eubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9cC5nZXQoYik7YyYmYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Iub2JzZXJ2ZXI9PT1hJiZiLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPWE7YztjPWMucGFyZW50Tm9kZSl7dmFyIGQ9cC5nZXQoYyk7aWYoZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXSxnPWYub3B0aW9ucztpZihjPT09YXx8Zy5zdWJ0cmVlKXt2YXIgaD1iKGcpO2gmJmYuZW5xdWV1ZShoKX19fX1mdW5jdGlvbiBnKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89Kyt2fWZ1bmN0aW9uIGgoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1bXSx0aGlzLnJlbW92ZWROb2Rlcz1bXSx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBpKGEpe3ZhciBiPW5ldyBoKGEudHlwZSxhLnRhcmdldCk7cmV0dXJuIGIuYWRkZWROb2Rlcz1hLmFkZGVkTm9kZXMuc2xpY2UoKSxiLnJlbW92ZWROb2Rlcz1hLnJlbW92ZWROb2Rlcy5zbGljZSgpLGIucHJldmlvdXNTaWJsaW5nPWEucHJldmlvdXNTaWJsaW5nLGIubmV4dFNpYmxpbmc9YS5uZXh0U2libGluZyxiLmF0dHJpYnV0ZU5hbWU9YS5hdHRyaWJ1dGVOYW1lLGIuYXR0cmlidXRlTmFtZXNwYWNlPWEuYXR0cmlidXRlTmFtZXNwYWNlLGIub2xkVmFsdWU9YS5vbGRWYWx1ZSxifWZ1bmN0aW9uIGooYSxiKXtyZXR1cm4gdz1uZXcgaChhLGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIHg/eDooeD1pKHcpLHgub2xkVmFsdWU9YSx4KX1mdW5jdGlvbiBsKCl7dz14PXZvaWQgMH1mdW5jdGlvbiBtKGEpe3JldHVybiBhPT09eHx8YT09PXd9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgV2Vha01hcCxxPXdpbmRvdy5tc1NldEltbWVkaWF0ZTtpZighcSl7dmFyIHI9W10scz1TdHJpbmcoTWF0aC5yYW5kb20oKSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKGEpe2lmKGEuZGF0YT09PXMpe3ZhciBiPXI7cj1bXSxiLmZvckVhY2goZnVuY3Rpb24oYSl7YSgpfSl9fSkscT1mdW5jdGlvbihhKXtyLnB1c2goYSksd2luZG93LnBvc3RNZXNzYWdlKHMsIioiKX19dmFyIHQ9ITEsdT1bXSx2PTA7Zy5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXtpZihhPWMoYSksIWIuY2hpbGRMaXN0JiYhYi5hdHRyaWJ1dGVzJiYhYi5jaGFyYWN0ZXJEYXRhfHxiLmF0dHJpYnV0ZU9sZFZhbHVlJiYhYi5hdHRyaWJ1dGVzfHxiLmF0dHJpYnV0ZUZpbHRlciYmYi5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYhYi5hdHRyaWJ1dGVzfHxiLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSYmIWIuY2hhcmFjdGVyRGF0YSl0aHJvdyBuZXcgU3ludGF4RXJyb3I7dmFyIGQ9cC5nZXQoYSk7ZHx8cC5zZXQoYSxkPVtdKTtmb3IodmFyIGUsZj0wO2Y8ZC5sZW5ndGg7ZisrKWlmKGRbZl0ub2JzZXJ2ZXI9PT10aGlzKXtlPWRbZl0sZS5yZW1vdmVMaXN0ZW5lcnMoKSxlLm9wdGlvbnM9YjticmVha31lfHwoZT1uZXcgbyh0aGlzLGEsYiksZC5wdXNoKGUpLHRoaXMubm9kZXNfLnB1c2goYSkpLGUuYWRkTGlzdGVuZXJzKCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1wLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107aWYoZC5vYnNlcnZlcj09PXRoaXMpe2QucmVtb3ZlTGlzdGVuZXJzKCksYi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19O3ZhciB3LHg7by5wcm90b3R5cGU9e2VucXVldWU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5vYnNlcnZlci5yZWNvcmRzXyxkPWMubGVuZ3RoO2lmKGMubGVuZ3RoPjApe3ZhciBlPWNbZC0xXSxmPW4oZSxhKTtpZihmKXJldHVybiB2b2lkKGNbZC0xXT1mKX1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWcsYS5NdXRhdGlvbk9ic2VydmVyfHwoYS5NdXRhdGlvbk9ic2VydmVyPWcpfSh0aGlzKSx3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe3ZhciBiPShhLnBhdGgsYS54aHIpLGM9YS5mbGFncyxkPWZ1bmN0aW9uKGEsYil7dGhpcy5jYWNoZT17fSx0aGlzLm9ubG9hZD1hLHRoaXMub25jb21wbGV0ZT1iLHRoaXMuaW5mbGlnaHQ9MCx0aGlzLnBlbmRpbmc9e319O2QucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0Kz1hLmxlbmd0aDtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspdGhpcy5yZXF1aXJlKGIpO3RoaXMuY2hlY2tEb25lKCl9LGFkZE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbmZsaWdodCsrLHRoaXMucmVxdWlyZShhKSx0aGlzLmNoZWNrRG9uZSgpfSxyZXF1aXJlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc3JjfHxhLmhyZWY7YS5fX25vZGVVcmw9Yix0aGlzLmRlZHVwZShiLGEpfHx0aGlzLmZldGNoKGIsYSl9LGRlZHVwZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMucGVuZGluZ1thXSlyZXR1cm4gdGhpcy5wZW5kaW5nW2FdLnB1c2goYiksITA7cmV0dXJuIHRoaXMuY2FjaGVbYV0/KHRoaXMub25sb2FkKGEsYix0aGlzLmNhY2hlW2FdKSx0aGlzLnRhaWwoKSwhMCk6KHRoaXMucGVuZGluZ1thXT1bYl0sITEpfSxmZXRjaDpmdW5jdGlvbihhLGQpe2lmKGMubG9hZCYmY29uc29sZS5sb2coImZldGNoIixhLGQpLGEubWF0Y2goL15kYXRhOi8pKXt2YXIgZT1hLnNwbGl0KCIsIiksZj1lWzBdLGc9ZVsxXTtnPWYuaW5kZXhPZigiO2Jhc2U2NCIpPi0xP2F0b2IoZyk6ZGVjb2RlVVJJQ29tcG9uZW50KGcpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnJlY2VpdmUoYSxkLG51bGwsZyl9LmJpbmQodGhpcyksMCl9ZWxzZXt2YXIgaD1mdW5jdGlvbihiLGMsZSl7dGhpcy5yZWNlaXZlKGEsZCxiLGMsZSl9LmJpbmQodGhpcyk7Yi5sb2FkKGEsaCl9fSxyZWNlaXZlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy5jYWNoZVthXT1kO3ZhciBmPXRoaXMucGVuZGluZ1thXTtlJiZlIT09YSYmKHRoaXMuY2FjaGVbZV09ZCxmPWYuY29uY2F0KHRoaXMucGVuZGluZ1tlXSkpO2Zvcih2YXIgZyxoPTAsaT1mLmxlbmd0aDtpPmgmJihnPWZbaF0pO2grKyl0aGlzLm9ubG9hZChlfHxhLGcsZCksdGhpcy50YWlsKCk7dGhpcy5wZW5kaW5nW2FdPW51bGwsZSYmZSE9PWEmJih0aGlzLnBlbmRpbmdbZV09bnVsbCl9LHRhaWw6ZnVuY3Rpb24oKXstLXRoaXMuaW5mbGlnaHQsdGhpcy5jaGVja0RvbmUoKX0sY2hlY2tEb25lOmZ1bmN0aW9uKCl7dGhpcy5pbmZsaWdodHx8dGhpcy5vbmNvbXBsZXRlKCl9fSxiPWJ8fHthc3luYzohMCxvazpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdGF0dXM+PTIwMCYmYS5zdGF0dXM8MzAwfHwzMDQ9PT1hLnN0YXR1c3x8MD09PWEuc3RhdHVzfSxsb2FkOmZ1bmN0aW9uKGMsZCxlKXt2YXIgZj1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuKGEuZmxhZ3MuZGVidWd8fGEuZmxhZ3MuYnVzdCkmJihjKz0iPyIrTWF0aC5yYW5kb20oKSksZi5vcGVuKCJHRVQiLGMsYi5hc3luYyksZi5hZGRFdmVudExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixmdW5jdGlvbigpe2lmKDQ9PT1mLnJlYWR5U3RhdGUpe3ZhciBhPWYuZ2V0UmVzcG9uc2VIZWFkZXIoIkxvY2F0aW9uIiksYz1udWxsO2lmKGEpdmFyIGM9Ii8iPT09YS5zdWJzdHIoMCwxKT9sb2NhdGlvbi5vcmlnaW4rYTpjO2QuY2FsbChlLCFiLm9rKGYpJiZmLGYucmVzcG9uc2V8fGYucmVzcG9uc2VUZXh0LGMpfX0pLGYuc2VuZCgpLGZ9LGxvYWREb2N1bWVudDpmdW5jdGlvbihhLGIsYyl7dGhpcy5sb2FkKGEsYixjKS5yZXNwb25zZVR5cGU9ImRvY3VtZW50In19LGEueGhyPWIsYS5Mb2FkZXI9ZH0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLnJlbD09PWd9ZnVuY3Rpb24gYyhhKXt2YXIgYixjPWQoYSk7dHJ5e2I9YnRvYShjKX1jYXRjaChlKXtiPWJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGMpKSksY29uc29sZS53YXJuKCJTY3JpcHQgY29udGFpbmVkIG5vbi1sYXRpbiBjaGFyYWN0ZXJzIHRoYXQgd2VyZSBmb3JjZWQgdG8gbGF0aW4uIFNvbWUgY2hhcmFjdGVycyBtYXkgYmUgd3JvbmcuIixhKX1yZXR1cm4iZGF0YTp0ZXh0L2phdmFzY3JpcHQ7YmFzZTY0LCIrYn1mdW5jdGlvbiBkKGEpe3JldHVybiBhLnRleHRDb250ZW50K2UoYSl9ZnVuY3Rpb24gZShhKXt2YXIgYj1hLl9fbm9kZVVybDtpZighYil7Yj1hLm93bmVyRG9jdW1lbnQuYmFzZVVSSTt2YXIgYz0iWyIrTWF0aC5mbG9vcigxZTMqKE1hdGgucmFuZG9tKCkrMSkpKyJdIixkPWEudGV4dENvbnRlbnQubWF0Y2goL1BvbHltZXJcKFsnIl0oW14nIl0qKS8pO2M9ZCYmZFsxXXx8YyxiKz0iLyIrYysiLmpzIn1yZXR1cm4iXG4vLyMgc291cmNlVVJMPSIrYisiXG4ifWZ1bmN0aW9uIGYoYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGIudGV4dENvbnRlbnQ9YS50ZXh0Q29udGVudCxuLnJlc29sdmVVcmxzSW5TdHlsZShiKSxifXZhciBnPSJpbXBvcnQiLGg9YS5mbGFncyxpPS9UcmlkZW50Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGo9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP3dpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoZG9jdW1lbnQpOmRvY3VtZW50LGs9e2RvY3VtZW50U2VsZWN0b3JzOiJsaW5rW3JlbD0iK2crIl0iLGltcG9ydHNTZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2crIl0iLCJsaW5rW3JlbD1zdHlsZXNoZWV0XSIsInN0eWxlIiwic2NyaXB0Om5vdChbdHlwZV0pIiwnc2NyaXB0W3R5cGU9InRleHQvamF2YXNjcmlwdCJdJ10uam9pbigiLCIpLG1hcDp7bGluazoicGFyc2VMaW5rIixzY3JpcHQ6InBhcnNlU2NyaXB0IixzdHlsZToicGFyc2VTdHlsZSJ9LHBhcnNlTmV4dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubmV4dFRvUGFyc2UoKTthJiZ0aGlzLnBhcnNlKGEpfSxwYXJzZTpmdW5jdGlvbihhKXtpZih0aGlzLmlzUGFyc2VkKGEpKXJldHVybiB2b2lkKGgucGFyc2UmJmNvbnNvbGUubG9nKCJbJXNdIGlzIGFscmVhZHkgcGFyc2VkIixhLmxvY2FsTmFtZSkpO3ZhciBiPXRoaXNbdGhpcy5tYXBbYS5sb2NhbE5hbWVdXTtiJiYodGhpcy5tYXJrUGFyc2luZyhhKSxiLmNhbGwodGhpcyxhKSl9LG1hcmtQYXJzaW5nOmZ1bmN0aW9uKGEpe2gucGFyc2UmJmNvbnNvbGUubG9nKCJwYXJzaW5nIixhKSx0aGlzLnBhcnNpbmdFbGVtZW50PWF9LG1hcmtQYXJzaW5nQ29tcGxldGU6ZnVuY3Rpb24oYSl7YS5fX2ltcG9ydFBhcnNlZD0hMCxhLl9faW1wb3J0RWxlbWVudCYmKGEuX19pbXBvcnRFbGVtZW50Ll9faW1wb3J0UGFyc2VkPSEwKSx0aGlzLnBhcnNpbmdFbGVtZW50PW51bGwsaC5wYXJzZSYmY29uc29sZS5sb2coImNvbXBsZXRlZCIsYSl9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGEpe2lmKEhUTUxJbXBvcnRzLl9faW1wb3J0c1BhcnNpbmdIb29rJiZIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vayhhKSxhLmltcG9ydC5fX2ltcG9ydFBhcnNlZD0hMCx0aGlzLm1hcmtQYXJzaW5nQ29tcGxldGUoYSksYS5kaXNwYXRjaEV2ZW50KGEuX19yZXNvdXJjZT9uZXcgQ3VzdG9tRXZlbnQoImxvYWQiLHtidWJibGVzOiExfSk6bmV3IEN1c3RvbUV2ZW50KCJlcnJvciIse2J1YmJsZXM6ITF9KSksYS5fX3BlbmRpbmcpZm9yKHZhciBiO2EuX19wZW5kaW5nLmxlbmd0aDspYj1hLl9fcGVuZGluZy5zaGlmdCgpLGImJmIoe3RhcmdldDphfSk7dGhpcy5wYXJzZU5leHQoKX0scGFyc2VMaW5rOmZ1bmN0aW9uKGEpe2IoYSk/dGhpcy5wYXJzZUltcG9ydChhKTooYS5ocmVmPWEuaHJlZix0aGlzLnBhcnNlR2VuZXJpYyhhKSl9LHBhcnNlU3R5bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YTthPWYoYSksYS5fX2ltcG9ydEVsZW1lbnQ9Yix0aGlzLnBhcnNlR2VuZXJpYyhhKX0scGFyc2VHZW5lcmljOmZ1bmN0aW9uKGEpe3RoaXMudHJhY2tFbGVtZW50KGEpLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYSl9LHRyYWNrRWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1mdW5jdGlvbihkKXtiJiZiKGQpLGMubWFya1BhcnNpbmdDb21wbGV0ZShhKSxjLnBhcnNlTmV4dCgpfTtpZihhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGQpLGEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQpLGkmJiJzdHlsZSI9PT1hLmxvY2FsTmFtZSl7dmFyIGU9ITE7aWYoLTE9PWEudGV4dENvbnRlbnQuaW5kZXhPZigiQGltcG9ydCIpKWU9ITA7ZWxzZSBpZihhLnNoZWV0KXtlPSEwO2Zvcih2YXIgZixnPWEuc2hlZXQuY3NzUnVsZXMsaD1nP2cubGVuZ3RoOjAsaj0wO2g+aiYmKGY9Z1tqXSk7aisrKWYudHlwZT09PUNTU1J1bGUuSU1QT1JUX1JVTEUmJihlPWUmJkJvb2xlYW4oZi5zdHlsZVNoZWV0KSl9ZSYmYS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgibG9hZCIse2J1YmJsZXM6ITF9KSl9fSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLl9faW1wb3J0RWxlbWVudD1iLGQuc3JjPWIuc3JjP2Iuc3JjOmMoYiksYS5jdXJyZW50U2NyaXB0PWIsdGhpcy50cmFja0VsZW1lbnQoZCxmdW5jdGlvbigpe2QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSxhLmN1cnJlbnRTY3JpcHQ9bnVsbH0pLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZCl9LG5leHRUb1BhcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMucGFyc2luZ0VsZW1lbnQmJnRoaXMubmV4dFRvUGFyc2VJbkRvYyhqKX0sbmV4dFRvUGFyc2VJbkRvYzpmdW5jdGlvbihhLGMpe2Zvcih2YXIgZCxlPWEucXVlcnlTZWxlY3RvckFsbCh0aGlzLnBhcnNlU2VsZWN0b3JzRm9yTm9kZShhKSksZj0wLGc9ZS5sZW5ndGg7Zz5mJiYoZD1lW2ZdKTtmKyspaWYoIXRoaXMuaXNQYXJzZWQoZCkpcmV0dXJuIHRoaXMuaGFzUmVzb3VyY2UoZCk/YihkKT90aGlzLm5leHRUb1BhcnNlSW5Eb2MoZC5pbXBvcnQsZCk6ZDp2b2lkIDA7cmV0dXJuIGN9LHBhcnNlU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGE7cmV0dXJuIGI9PT1qP3RoaXMuZG9jdW1lbnRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzU2VsZWN0b3JzfSxpc1BhcnNlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5fX2ltcG9ydFBhcnNlZH0saGFzUmVzb3VyY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSkmJiFhLmltcG9ydD8hMTohMH19LGw9Lyh1cmxcKCkoW14pXSopKFwpKS9nLG09LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLG49e3Jlc29sdmVVcmxzSW5TdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQsYz1iLmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVVcmxzSW5Dc3NUZXh0KGEudGV4dENvbnRlbnQsYyksYX0scmVzb2x2ZVVybHNJbkNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlcGxhY2VVcmxzKGEsYixsKTtyZXR1cm4gYz10aGlzLnJlcGxhY2VVcmxzKGMsYixtKX0scmVwbGFjZVVybHM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnJlcGxhY2UoYyxmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1kLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGIuaHJlZj1mLGY9Yi5ocmVmLGMrIiciK2YrIiciK2V9KX19O2EucGFyc2VyPWssYS5wYXRoPW4sYS5pc0lFPWl9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBjKGEscSl9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGQoYSxiKXt2YXIgYz1hO2MgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KHEpKSxjLl9VUkw9Yjt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtkLnNldEF0dHJpYnV0ZSgiaHJlZiIsYiksYy5iYXNlVVJJfHwoYy5iYXNlVVJJPWIpO3ZhciBlPWMuY3JlYXRlRWxlbWVudCgibWV0YSIpO3JldHVybiBlLnNldEF0dHJpYnV0ZSgiY2hhcnNldCIsInV0Zi04IiksYy5oZWFkLmFwcGVuZENoaWxkKGUpLGMuaGVhZC5hcHBlbmRDaGlsZChkKSxhIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjLmJvZHkuaW5uZXJIVE1MPWEpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31mdW5jdGlvbiBlKGEsYil7Yj1ifHxyLGcoZnVuY3Rpb24oKXtoKGEsYil9LGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuImNvbXBsZXRlIj09PWEucmVhZHlTdGF0ZXx8YS5yZWFkeVN0YXRlPT09eX1mdW5jdGlvbiBnKGEsYil7aWYoZihiKSlhJiZhKCk7ZWxzZXt2YXIgYz1mdW5jdGlvbigpeygiY29tcGxldGUiPT09Yi5yZWFkeVN0YXRlfHxiLnJlYWR5U3RhdGU9PT15KSYmKGIucmVtb3ZlRXZlbnRMaXN0ZW5lcih6LGMpLGcoYSxiKSl9O2IuYWRkRXZlbnRMaXN0ZW5lcih6LGMpfX1mdW5jdGlvbiBoKGEsYil7ZnVuY3Rpb24gYygpe2Y9PWcmJmEmJmEoKX1mdW5jdGlvbiBkKCl7ZisrLGMoKX12YXIgZT1iLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxmPTAsZz1lLmxlbmd0aDtpZihnKWZvcih2YXIgaCxqPTA7Zz5qJiYoaD1lW2pdKTtqKyspaShoKT9kLmNhbGwoaCk6KGguYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZCksaC5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsZCkpO2Vsc2UgYygpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIG8/YS5pbXBvcnQmJiJsb2FkaW5nIiE9PWEuaW1wb3J0LnJlYWR5U3RhdGV8fGEuX19sb2FkZWQ6YS5fX2ltcG9ydFBhcnNlZH1mdW5jdGlvbiBqKGEpe2Zvcih2YXIgYixjPTAsZD1hLmxlbmd0aDtkPmMmJihiPWFbY10pO2MrKylrKGIpJiZsKGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJiJpbXBvcnQiPT09YS5yZWx9ZnVuY3Rpb24gbChhKXt2YXIgYj1hLmltcG9ydDtiP20oe3RhcmdldDphfSk6KGEuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsbSksYS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsbSkpfWZ1bmN0aW9uIG0oYSl7YS50YXJnZXQuX19sb2FkZWQ9ITB9dmFyIG49ImltcG9ydCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksbz1uLHA9YS5mbGFncyxxPSJpbXBvcnQiLHI9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7aWYobyl2YXIgcz17fTtlbHNlIHZhciB0PShhLnhocixhLkxvYWRlciksdT1hLnBhcnNlcixzPXtkb2N1bWVudHM6e30sZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzOiJsaW5rW3JlbD0iK3ErIl0iLGltcG9ydHNQcmVsb2FkU2VsZWN0b3JzOlsibGlua1tyZWw9IitxKyJdIl0uam9pbigiLCIpLGxvYWROb2RlOmZ1bmN0aW9uKGEpe3YuYWRkTm9kZShhKX0sbG9hZFN1YnRyZWU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXJzaGFsTm9kZXMoYSk7di5hZGROb2RlcyhiKX0sbWFyc2hhbE5vZGVzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5sb2FkU2VsZWN0b3JzRm9yTm9kZShhKSl9LGxvYWRTZWxlY3RvcnNGb3JOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudHx8YTtyZXR1cm4gYj09PXI/dGhpcy5kb2N1bWVudFByZWxvYWRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzUHJlbG9hZFNlbGVjdG9yc30sbG9hZGVkOmZ1bmN0aW9uKGEsYyxlKXtpZihwLmxvYWQmJmNvbnNvbGUubG9nKCJsb2FkZWQiLGEsYyksYy5fX3Jlc291cmNlPWUsYihjKSl7dmFyIGY9dGhpcy5kb2N1bWVudHNbYV07Znx8KGY9ZChlLGEpLGYuX19pbXBvcnRMaW5rPWMsdGhpcy5ib290RG9jdW1lbnQoZiksdGhpcy5kb2N1bWVudHNbYV09ZiksYy5pbXBvcnQ9Zn11LnBhcnNlTmV4dCgpfSxib290RG9jdW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5sb2FkU3VidHJlZShhKSx0aGlzLm9ic2VydmUoYSksdS5wYXJzZU5leHQoKX0sbG9hZGVkQWxsOmZ1bmN0aW9uKCl7dS5wYXJzZU5leHQoKX19LHY9bmV3IHQocy5sb2FkZWQuYmluZChzKSxzLmxvYWRlZEFsbC5iaW5kKHMpKTt2YXIgdz17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEhUTUxJbXBvcnRzLmN1cnJlbnRTY3JpcHR8fGRvY3VtZW50LmN1cnJlbnRTY3JpcHR9LGNvbmZpZ3VyYWJsZTohMH07aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCJfY3VycmVudFNjcmlwdCIsdyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9jdXJyZW50U2NyaXB0Iix3KSwhZG9jdW1lbnQuYmFzZVVSSSl7dmFyIHg9e2dldDpmdW5jdGlvbigpe3JldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZn0sY29uZmlndXJhYmxlOiEwfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsImJhc2VVUkkiLHgpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJiYXNlVVJJIix4KX12YXIgeT1IVE1MSW1wb3J0cy5pc0lFPyJjb21wbGV0ZSI6ImludGVyYWN0aXZlIix6PSJyZWFkeXN0YXRlY2hhbmdlIjtvJiZuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspYi5hZGRlZE5vZGVzJiZqKGIuYWRkZWROb2Rlcyl9KS5vYnNlcnZlKGRvY3VtZW50LmhlYWQse2NoaWxkTGlzdDohMH0pLGEuaGFzTmF0aXZlPW4sYS51c2VOYXRpdmU9byxhLmltcG9ydGVyPXMsYS53aGVuSW1wb3J0c1JlYWR5PWUsYS5JTVBPUlRfTElOS19UWVBFPXEsYS5pc0ltcG9ydExvYWRlZD1pLGEuaW1wb3J0TG9hZGVyPXZ9KHdpbmRvdy5IVE1MSW1wb3J0cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGIsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYj1hW2RdKTtkKyspImNoaWxkTGlzdCI9PT1iLnR5cGUmJmIuYWRkZWROb2Rlcy5sZW5ndGgmJmMoYi5hZGRlZE5vZGVzKX1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYixlPTAsZz1hLmxlbmd0aDtnPmUmJihiPWFbZV0pO2UrKylkKGIpJiZmLmxvYWROb2RlKGIpLGIuY2hpbGRyZW4mJmIuY2hpbGRyZW4ubGVuZ3RoJiZjKGIuY2hpbGRyZW4pfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlJiZnLmNhbGwoYSxmLmxvYWRTZWxlY3RvcnNGb3JOb2RlKGEpKX1mdW5jdGlvbiBlKGEpe2gub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfXZhciBmPShhLklNUE9SVF9MSU5LX1RZUEUsYS5pbXBvcnRlciksZz1IVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc3x8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yLGg9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoYik7YS5vYnNlcnZlPWUsZi5vYnNlcnZlPWV9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5pbXBvcnRlci5ib290RG9jdW1lbnQoYil9ImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGMuaW5pdEV2ZW50KGEsYi5idWJibGVzPT09ITE/ITE6ITAsYi5jYW5jZWxhYmxlPT09ITE/ITE6ITAsYi5kZXRhaWwpLGN9KTt2YXIgYj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe0hUTUxJbXBvcnRzLnJlYWR5PSEwLEhUTUxJbXBvcnRzLnJlYWR5VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxiLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJIVE1MSW1wb3J0c0xvYWRlZCIse2J1YmJsZXM6ITB9KSl9KSxIVE1MSW1wb3J0cy51c2VOYXRpdmV8fCgiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8ImludGVyYWN0aXZlIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJiF3aW5kb3cuYXR0YWNoRXZlbnQ/YSgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEpKX0oKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxjLGQpe3ZhciBlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7aWYoIWUpZm9yKGU9YS5maXJzdENoaWxkO2UmJmUubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspZT1lLm5leHRTaWJsaW5nO2Zvcig7ZTspYyhlLGQpIT09ITAmJmIoZSxjLGQpLGU9ZS5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhhLGIpe2Zvcih2YXIgYz1hLnNoYWRvd1Jvb3Q7YzspZChjLGIpLGM9Yy5vbGRlclNoYWRvd1Jvb3R9ZnVuY3Rpb24gZChhLGQpe2IoYSxmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8hMDp2b2lkIGMoYSxkKX0pLGMoYSxkKX1mdW5jdGlvbiBlKGEpe3JldHVybiBoKGEpPyhpKGEpLCEwKTp2b2lkIGwoYSl9ZnVuY3Rpb24gZihhKXtkKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSk/ITA6dm9pZCAwfSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gZShhKXx8ZihhKX1mdW5jdGlvbiBoKGIpe2lmKCFiLl9fdXBncmFkZWRfXyYmYi5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgiaXMiKXx8Yi5sb2NhbE5hbWUsZD1hLnJlZ2lzdHJ5W2NdO2lmKGQpcmV0dXJuIEEuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpLCEwfX1mdW5jdGlvbiBpKGEpe2woYSkscihhKSYmZChhLGZ1bmN0aW9uKGEpe2woYSl9KX1mdW5jdGlvbiBqKGEpe2lmKEUucHVzaChhKSwhRCl7RD0hMDt2YXIgYj13aW5kb3cuUGxhdGZvcm0mJndpbmRvdy5QbGF0Zm9ybS5lbmRPZk1pY3JvdGFza3x8c2V0VGltZW91dDtiKGspfX1mdW5jdGlvbiBrKCl7RD0hMTtmb3IodmFyIGEsYj1FLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWEoKTtFPVtdfWZ1bmN0aW9uIGwoYSl7Qz9qKGZ1bmN0aW9uKCl7bShhKX0pOm0oYSl9ZnVuY3Rpb24gbShhKXsoYS5hdHRhY2hlZENhbGxiYWNrfHxhLmRldGFjaGVkQ2FsbGJhY2t8fGEuX191cGdyYWRlZF9fJiZBLmRvbSkmJihBLmRvbSYmY29uc29sZS5ncm91cCgiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSkscihhKSYmKGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKSsxLGEuX19pbnNlcnRlZDwxJiYoYS5fX2luc2VydGVkPTEpLGEuX19pbnNlcnRlZD4xP0EuZG9tJiZjb25zb2xlLndhcm4oImluc2VydGVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuYXR0YWNoZWRDYWxsYmFjayYmKEEuZG9tJiZjb25zb2xlLmxvZygiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSksYS5hdHRhY2hlZENhbGxiYWNrKCkpKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpKX1mdW5jdGlvbiBuKGEpe28oYSksZChhLGZ1bmN0aW9uKGEpe28oYSl9KX1mdW5jdGlvbiBvKGEpe0M/aihmdW5jdGlvbigpe3AoYSl9KTpwKGEpfWZ1bmN0aW9uIHAoYSl7KGEuYXR0YWNoZWRDYWxsYmFja3x8YS5kZXRhY2hlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmQS5kb20pJiYoQS5kb20mJmNvbnNvbGUuZ3JvdXAoInJlbW92ZWQ6IixhLmxvY2FsTmFtZSkscihhKXx8KGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKS0xLGEuX19pbnNlcnRlZD4wJiYoYS5fX2luc2VydGVkPTApLGEuX19pbnNlcnRlZDwwP0EuZG9tJiZjb25zb2xlLndhcm4oInJlbW92ZWQ6IixhLmxvY2FsTmFtZSwiaW5zZXJ0L3JlbW92ZSBjb3VudDoiLGEuX19pbnNlcnRlZCk6YS5kZXRhY2hlZENhbGxiYWNrJiZhLmRldGFjaGVkQ2FsbGJhY2soKSksQS5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gcShhKXtyZXR1cm4gd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKTphfWZ1bmN0aW9uIHIoYSl7Zm9yKHZhciBiPWEsYz1xKGRvY3VtZW50KTtiOyl7aWYoYj09YylyZXR1cm4hMDtiPWIucGFyZW50Tm9kZXx8Yi5ob3N0fX1mdW5jdGlvbiBzKGEpe2lmKGEuc2hhZG93Um9vdCYmIWEuc2hhZG93Um9vdC5fX3dhdGNoZWQpe0EuZG9tJiZjb25zb2xlLmxvZygid2F0Y2hpbmcgc2hhZG93LXJvb3QgZm9yOiAiLGEubG9jYWxOYW1lKTtmb3IodmFyIGI9YS5zaGFkb3dSb290O2I7KXQoYiksYj1iLm9sZGVyU2hhZG93Um9vdH19ZnVuY3Rpb24gdChhKXthLl9fd2F0Y2hlZHx8KHcoYSksYS5fX3dhdGNoZWQ9ITApfWZ1bmN0aW9uIHUoYSl7aWYoQS5kb20pe3ZhciBiPWFbMF07aWYoYiYmImNoaWxkTGlzdCI9PT1iLnR5cGUmJmIuYWRkZWROb2RlcyYmYi5hZGRlZE5vZGVzKXtmb3IodmFyIGM9Yi5hZGRlZE5vZGVzWzBdO2MmJmMhPT1kb2N1bWVudCYmIWMuaG9zdDspYz1jLnBhcmVudE5vZGU7dmFyIGQ9YyYmKGMuVVJMfHxjLl9VUkx8fGMuaG9zdCYmYy5ob3N0LmxvY2FsTmFtZSl8fCIiO2Q9ZC5zcGxpdCgiLz8iKS5zaGlmdCgpLnNwbGl0KCIvIikucG9wKCl9Y29uc29sZS5ncm91cCgibXV0YXRpb25zICglZCkgWyVzXSIsYS5sZW5ndGgsZHx8IiIpfWEuZm9yRWFjaChmdW5jdGlvbihhKXsiY2hpbGRMaXN0Ij09PWEudHlwZSYmKEcoYS5hZGRlZE5vZGVzLGZ1bmN0aW9uKGEpe2EubG9jYWxOYW1lJiZnKGEpfSksRyhhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmbihhKX0pKX0pLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gdigpe3UoRi50YWtlUmVjb3JkcygpKSxrKCl9ZnVuY3Rpb24gdyhhKXtGLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX1mdW5jdGlvbiB4KGEpe3coYSl9ZnVuY3Rpb24geShhKXtBLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZURvY3VtZW50OiAiLGEuYmFzZVVSSS5zcGxpdCgiLyIpLnBvcCgpKSxnKGEpLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24geihhKXthPXEoYSk7Zm9yKHZhciBiLGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK0IrIl0iKSxkPTAsZT1jLmxlbmd0aDtlPmQmJihiPWNbZF0pO2QrKyliLmltcG9ydCYmYi5pbXBvcnQuX19wYXJzZWQmJnooYi5pbXBvcnQpO3koYSl9dmFyIEE9d2luZG93LmxvZ0ZsYWdzfHx7fSxCPXdpbmRvdy5IVE1MSW1wb3J0cz9IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOiJub25lIixDPSF3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9PT13aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyO2EuaGFzUG9seWZpbGxNdXRhdGlvbnM9Qzt2YXIgRD0hMSxFPVtdLEY9bmV3IE11dGF0aW9uT2JzZXJ2ZXIodSksRz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EuSU1QT1JUX0xJTktfVFlQRT1CLGEud2F0Y2hTaGFkb3c9cyxhLnVwZ3JhZGVEb2N1bWVudFRyZWU9eixhLnVwZ3JhZGVBbGw9ZyxhLnVwZ3JhZGVTdWJ0cmVlPWYsYS5pbnNlcnRlZE5vZGU9aSxhLm9ic2VydmVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50PXksYS50YWtlUmVjb3Jkcz12fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixnKXt2YXIgaD1nfHx7fTtpZighYil0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgYG5hbWVgIG11c3Qgbm90IGJlIGVtcHR5Iik7aWYoYi5pbmRleE9mKCItIik8MCl0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgKCduYW1lJykgbXVzdCBjb250YWluIGEgZGFzaCAoJy0nKS4gQXJndW1lbnQgcHJvdmlkZWQgd2FzICciK1N0cmluZyhiKSsiJy4iKTtpZihjKGIpKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGV4ZWN1dGUgJ3JlZ2lzdGVyRWxlbWVudCcgb24gJ0RvY3VtZW50JzogUmVnaXN0cmF0aW9uIGZhaWxlZCBmb3IgdHlwZSAnIitTdHJpbmcoYikrIicuIFRoZSB0eXBlIG5hbWUgaXMgaW52YWxpZC4iKTtpZihuKGIpKXRocm93IG5ldyBFcnJvcigiRHVwbGljYXRlRGVmaW5pdGlvbkVycm9yOiBhIHR5cGUgd2l0aCBuYW1lICciK1N0cmluZyhiKSsiJyBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQiKTtpZighaC5wcm90b3R5cGUpdGhyb3cgbmV3IEVycm9yKCJPcHRpb25zIG1pc3NpbmcgcmVxdWlyZWQgcHJvdG90eXBlIHByb3BlcnR5Iik7cmV0dXJuIGguX19uYW1lPWIudG9Mb3dlckNhc2UoKSxoLmxpZmVjeWNsZT1oLmxpZmVjeWNsZXx8e30saC5hbmNlc3RyeT1kKGguZXh0ZW5kcyksZShoKSxmKGgpLGwoaC5wcm90b3R5cGUpLG8oaC5fX25hbWUsaCksaC5jdG9yPXAoaCksaC5jdG9yLnByb3RvdHlwZT1oLnByb3RvdHlwZSxoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oLmN0b3IsYS5yZWFkeSYmYS51cGdyYWRlRG9jdW1lbnRUcmVlKGRvY3VtZW50KSxoLmN0b3J9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9MDtiPHkubGVuZ3RoO2IrKylpZihhPT09eVtiXSlyZXR1cm4hMH1mdW5jdGlvbiBkKGEpe3ZhciBiPW4oYSk7cmV0dXJuIGI/ZChiLmV4dGVuZHMpLmNvbmNhdChbYl0pOltdfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiLGM9YS5leHRlbmRzLGQ9MDtiPWEuYW5jZXN0cnlbZF07ZCsrKWM9Yi5pcyYmYi50YWc7YS50YWc9Y3x8YS5fX25hbWUsYyYmKGEuaXM9YS5fX25hbWUpfWZ1bmN0aW9uIGYoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKSxkPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKTtkPT09YS5wcm90b3R5cGUmJihiPWQpfWZvcih2YXIgZSxmPWEucHJvdG90eXBlO2YmJmYhPT1iOyllPU9iamVjdC5nZXRQcm90b3R5cGVPZihmKSxmLl9fcHJvdG9fXz1lLGY9ZTsKYS5uYXRpdmU9Yn19ZnVuY3Rpb24gZyhhKXtyZXR1cm4gaChCKGEudGFnKSxhKX1mdW5jdGlvbiBoKGIsYyl7cmV0dXJuIGMuaXMmJmIuc2V0QXR0cmlidXRlKCJpcyIsYy5pcyksYi5yZW1vdmVBdHRyaWJ1dGUoInVucmVzb2x2ZWQiKSxpKGIsYyksYi5fX3VwZ3JhZGVkX189ITAsayhiKSxhLmluc2VydGVkTm9kZShiKSxhLnVwZ3JhZGVTdWJ0cmVlKGIpLGJ9ZnVuY3Rpb24gaShhLGIpe09iamVjdC5fX3Byb3RvX18/YS5fX3Byb3RvX189Yi5wcm90b3R5cGU6KGooYSxiLnByb3RvdHlwZSxiLm5hdGl2ZSksYS5fX3Byb3RvX189Yi5wcm90b3R5cGUpfWZ1bmN0aW9uIGooYSxiLGMpe2Zvcih2YXIgZD17fSxlPWI7ZSE9PWMmJmUhPT1IVE1MRWxlbWVudC5wcm90b3R5cGU7KXtmb3IodmFyIGYsZz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKSxoPTA7Zj1nW2hdO2grKylkW2ZdfHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsZixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsZikpLGRbZl09MSk7ZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9fWZ1bmN0aW9uIGsoYSl7YS5jcmVhdGVkQ2FsbGJhY2smJmEuY3JlYXRlZENhbGxiYWNrKCl9ZnVuY3Rpb24gbChhKXtpZighYS5zZXRBdHRyaWJ1dGUuX3BvbHlmaWxsZWQpe3ZhciBiPWEuc2V0QXR0cmlidXRlO2Euc2V0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYyl7bS5jYWxsKHRoaXMsYSxjLGIpfTt2YXIgYz1hLnJlbW92ZUF0dHJpYnV0ZTthLnJlbW92ZUF0dHJpYnV0ZT1mdW5jdGlvbihhKXttLmNhbGwodGhpcyxhLG51bGwsYyl9LGEuc2V0QXR0cmlidXRlLl9wb2x5ZmlsbGVkPSEwfX1mdW5jdGlvbiBtKGEsYixjKXthPWEudG9Mb3dlckNhc2UoKTt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShhKTtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT10aGlzLmdldEF0dHJpYnV0ZShhKTt0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmZSE9PWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGEsZCxlKX1mdW5jdGlvbiBuKGEpe3JldHVybiBhP3pbYS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9ZnVuY3Rpb24gbyhhLGIpe3pbYV09Yn1mdW5jdGlvbiBwKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBnKGEpfX1mdW5jdGlvbiBxKGEsYixjKXtyZXR1cm4gYT09PUE/cihiLGMpOkMoYSxiKX1mdW5jdGlvbiByKGEsYil7dmFyIGM9bihifHxhKTtpZihjKXtpZihhPT1jLnRhZyYmYj09Yy5pcylyZXR1cm4gbmV3IGMuY3RvcjtpZighYiYmIWMuaXMpcmV0dXJuIG5ldyBjLmN0b3J9aWYoYil7dmFyIGQ9cihhKTtyZXR1cm4gZC5zZXRBdHRyaWJ1dGUoImlzIixiKSxkfXZhciBkPUIoYSk7cmV0dXJuIGEuaW5kZXhPZigiLSIpPj0wJiZpKGQsSFRNTEVsZW1lbnQpLGR9ZnVuY3Rpb24gcyhhKXtpZighYS5fX3VwZ3JhZGVkX18mJmEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoImlzIiksYz1uKGJ8fGEubG9jYWxOYW1lKTtpZihjKXtpZihiJiZjLnRhZz09YS5sb2NhbE5hbWUpcmV0dXJuIGgoYSxjKTtpZighYiYmIWMuZXh0ZW5kcylyZXR1cm4gaChhLGMpfX19ZnVuY3Rpb24gdChiKXt2YXIgYz1ELmNhbGwodGhpcyxiKTtyZXR1cm4gYS51cGdyYWRlQWxsKGMpLGN9YXx8KGE9d2luZG93LkN1c3RvbUVsZW1lbnRzPXtmbGFnczp7fX0pO3ZhciB1PWEuZmxhZ3Msdj1Cb29sZWFuKGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCksdz0hdS5yZWdpc3RlciYmdiYmIXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbDtpZih3KXt2YXIgeD1mdW5jdGlvbigpe307YS5yZWdpc3RyeT17fSxhLnVwZ3JhZGVFbGVtZW50PXgsYS53YXRjaFNoYWRvdz14LGEudXBncmFkZT14LGEudXBncmFkZUFsbD14LGEudXBncmFkZVN1YnRyZWU9eCxhLm9ic2VydmVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50PXgsYS51cGdyYWRlRG9jdW1lbnRUcmVlPXgsYS50YWtlUmVjb3Jkcz14LGEucmVzZXJ2ZWRUYWdMaXN0PVtdfWVsc2V7dmFyIHk9WyJhbm5vdGF0aW9uLXhtbCIsImNvbG9yLXByb2ZpbGUiLCJmb250LWZhY2UiLCJmb250LWZhY2Utc3JjIiwiZm9udC1mYWNlLXVyaSIsImZvbnQtZmFjZS1mb3JtYXQiLCJmb250LWZhY2UtbmFtZSIsIm1pc3NpbmctZ2x5cGgiXSx6PXt9LEE9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiLEI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudC5iaW5kKGRvY3VtZW50KSxDPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUy5iaW5kKGRvY3VtZW50KSxEPU5vZGUucHJvdG90eXBlLmNsb25lTm9kZTtkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ9Yixkb2N1bWVudC5jcmVhdGVFbGVtZW50PXIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TPXEsTm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlPXQsYS5yZWdpc3RyeT16LGEudXBncmFkZT1zfXZhciBFO0U9T2JqZWN0Ll9fcHJvdG9fX3x8dz9mdW5jdGlvbihhLGIpe3JldHVybiBhIGluc3RhbmNlb2YgYn06ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YTtjOyl7aWYoYz09PWIucHJvdG90eXBlKXJldHVybiEwO2M9Yy5fX3Byb3RvX199cmV0dXJuITF9LGEuaW5zdGFuY2VvZj1FLGEucmVzZXJ2ZWRUYWdMaXN0PXksZG9jdW1lbnQucmVnaXN0ZXI9ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50LGEuaGFzTmF0aXZlPXYsYS51c2VOYXRpdmU9d30od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1jfXZhciBjPWEuSU1QT1JUX0xJTktfVFlQRSxkPXtzZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2MrIl0iXSxtYXA6e2xpbms6InBhcnNlTGluayJ9LHBhcnNlOmZ1bmN0aW9uKGEpe2lmKCFhLl9fcGFyc2VkKXthLl9fcGFyc2VkPSEwO3ZhciBiPWEucXVlcnlTZWxlY3RvckFsbChkLnNlbGVjdG9ycyk7ZShiLGZ1bmN0aW9uKGEpe2RbZC5tYXBbYS5sb2NhbE5hbWVdXShhKX0pLEN1c3RvbUVsZW1lbnRzLnVwZ3JhZGVEb2N1bWVudChhKSxDdXN0b21FbGVtZW50cy5vYnNlcnZlRG9jdW1lbnQoYSl9fSxwYXJzZUxpbms6ZnVuY3Rpb24oYSl7YihhKSYmdGhpcy5wYXJzZUltcG9ydChhKX0scGFyc2VJbXBvcnQ6ZnVuY3Rpb24oYSl7YS5pbXBvcnQmJmQucGFyc2UoYS5pbXBvcnQpfX0sZT1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EucGFyc2VyPWQsYS5JTVBPUlRfTElOS19UWVBFPWN9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe0N1c3RvbUVsZW1lbnRzLnBhcnNlci5wYXJzZShkb2N1bWVudCksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGRvY3VtZW50KTt2YXIgYT13aW5kb3cuUGxhdGZvcm0mJlBsYXRmb3JtLmVuZE9mTWljcm90YXNrP1BsYXRmb3JtLmVuZE9mTWljcm90YXNrOnNldFRpbWVvdXQ7YShmdW5jdGlvbigpe0N1c3RvbUVsZW1lbnRzLnJlYWR5PSEwLEN1c3RvbUVsZW1lbnRzLnJlYWR5VGltZT1EYXRlLm5vdygpLHdpbmRvdy5IVE1MSW1wb3J0cyYmKEN1c3RvbUVsZW1lbnRzLmVsYXBzZWQ9Q3VzdG9tRWxlbWVudHMucmVhZHlUaW1lLUhUTUxJbXBvcnRzLnJlYWR5VGltZSksZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoIldlYkNvbXBvbmVudHNSZWFkeSIse2J1YmJsZXM6ITB9KSksd2luZG93LkhUTUxJbXBvcnRzJiYoSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2s9ZnVuY3Rpb24oYSl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGEuaW1wb3J0KX0pfSl9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO3JldHVybiBiLmluaXRFdmVudChhLCEwLCEwKSxifSksImNvbXBsZXRlIj09PWRvY3VtZW50LnJlYWR5U3RhdGV8fGEuZmxhZ3MuZWFnZXIpYigpO2Vsc2UgaWYoImludGVyYWN0aXZlIiE9PWRvY3VtZW50LnJlYWR5U3RhdGV8fHdpbmRvdy5hdHRhY2hFdmVudHx8d2luZG93LkhUTUxJbXBvcnRzJiYhd2luZG93LkhUTUxJbXBvcnRzLnJlYWR5KXt2YXIgYz13aW5kb3cuSFRNTEltcG9ydHMmJiFIVE1MSW1wb3J0cy5yZWFkeT8iSFRNTEltcG9ydHNMb2FkZWQiOiJET01Db250ZW50TG9hZGVkIjt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihjLGIpfWVsc2UgYigpfSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKCl7aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXt2YXIgYT1bInVwZ3JhZGVBbGwiLCJ1cGdyYWRlU3VidHJlZSIsIm9ic2VydmVEb2N1bWVudCIsInVwZ3JhZGVEb2N1bWVudCJdLGI9e307YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2JbYV09Q3VzdG9tRWxlbWVudHNbYV19KSxhLmZvckVhY2goZnVuY3Rpb24oYSl7Q3VzdG9tRWxlbWVudHNbYV09ZnVuY3Rpb24oYyl7cmV0dXJuIGJbYV0od3JhcChjKSl9fSl9fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dGhpcy5jYWNoZT1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMubWFwPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5yZXF1ZXN0cz0wLHRoaXMucmVnZXg9YX12YXIgYz1hLmVuZE9mTWljcm90YXNrO2IucHJvdG90eXBlPXtleHRyYWN0VXJsczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkLGU9W107Yz10aGlzLnJlZ2V4LmV4ZWMoYSk7KWQ9bmV3IFVSTChjWzFdLGIpLGUucHVzaCh7bWF0Y2hlZDpjWzBdLHVybDpkLmhyZWZ9KTtyZXR1cm4gZX0scHJvY2VzczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5leHRyYWN0VXJscyhhLGIpLGU9Yy5iaW5kKG51bGwsdGhpcy5tYXApO3RoaXMuZmV0Y2goZCxlKX0sZmV0Y2g6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aDtpZighYylyZXR1cm4gYigpO2Zvcih2YXIgZCxlLGYsZz1mdW5jdGlvbigpezA9PT0tLWMmJmIoKX0saD0wO2M+aDtoKyspZD1hW2hdLGY9ZC51cmwsZT10aGlzLmNhY2hlW2ZdLGV8fChlPXRoaXMueGhyKGYpLGUubWF0Y2g9ZCx0aGlzLmNhY2hlW2ZdPWUpLGUud2FpdChnKX0saGFuZGxlWGhyOmZ1bmN0aW9uKGEpe3ZhciBiPWEubWF0Y2gsYz1iLnVybCxkPWEucmVzcG9uc2V8fGEucmVzcG9uc2VUZXh0fHwiIjt0aGlzLm1hcFtjXT1kLHRoaXMuZmV0Y2godGhpcy5leHRyYWN0VXJscyhkLGMpLGEucmVzb2x2ZSl9LHhocjpmdW5jdGlvbihhKXt0aGlzLnJlcXVlc3RzKys7dmFyIGI9bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiBiLm9wZW4oIkdFVCIsYSwhMCksYi5zZW5kKCksYi5vbmVycm9yPWIub25sb2FkPXRoaXMuaGFuZGxlWGhyLmJpbmQodGhpcyxiKSxiLnBlbmRpbmc9W10sYi5yZXNvbHZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPWIucGVuZGluZyxjPTA7YzxhLmxlbmd0aDtjKyspYVtjXSgpO2IucGVuZGluZz1udWxsfSxiLndhaXQ9ZnVuY3Rpb24oYSl7Yi5wZW5kaW5nP2IucGVuZGluZy5wdXNoKGEpOmMoYSl9LGJ9fSxhLkxvYWRlcj1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLmxvYWRlcj1uZXcgZCh0aGlzLnJlZ2V4KX12YXIgYz1hLnVybFJlc29sdmVyLGQ9YS5Mb2FkZXI7Yi5wcm90b3R5cGU9e3JlZ2V4Oi9AaW1wb3J0XHMrKD86dXJsKT9bIidcKF0qKFteJyJcKV0qKVsnIlwpXSo7L2cscmVzb2x2ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oZCl7Yyh0aGlzLmZsYXR0ZW4oYSxiLGQpKX0uYmluZCh0aGlzKTt0aGlzLmxvYWRlci5wcm9jZXNzKGEsYixkKX0scmVzb2x2ZU5vZGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEudGV4dENvbnRlbnQsZT1mdW5jdGlvbihiKXthLnRleHRDb250ZW50PWIsYyhhKX07dGhpcy5yZXNvbHZlKGQsYixlKX0sZmxhdHRlbjpmdW5jdGlvbihhLGIsZCl7Zm9yKHZhciBlLGYsZyxoPXRoaXMubG9hZGVyLmV4dHJhY3RVcmxzKGEsYiksaT0wO2k8aC5sZW5ndGg7aSsrKWU9aFtpXSxmPWUudXJsLGc9Yy5yZXNvbHZlQ3NzVGV4dChkW2ZdLGYsITApLGc9dGhpcy5mbGF0dGVuKGcsYixkKSxhPWEucmVwbGFjZShlLm1hdGNoZWQsZyk7cmV0dXJuIGF9LGxvYWRTdHlsZXM6ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXtmKyssZj09PWcmJmMmJmMoKX1mb3IodmFyIGUsZj0wLGc9YS5sZW5ndGgsaD0wO2c+aCYmKGU9YVtoXSk7aCsrKXRoaXMucmVzb2x2ZU5vZGUoZSxiLGQpfX07dmFyIGU9bmV3IGI7YS5zdHlsZVJlc29sdmVyPWV9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYShhKXtmb3IoO2EucGFyZW50Tm9kZTspYT1hLnBhcmVudE5vZGU7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGEuZ2V0RWxlbWVudEJ5SWQ/YTpudWxsfWZ1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPWEuYmluZGluZ3NfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdzXz17fSksZFtiXSYmY1tiXS5jbG9zZSgpLGRbYl09Y31mdW5jdGlvbiBjKGEsYixjKXtyZXR1cm4gY31mdW5jdGlvbiBkKGEpe3JldHVybiBudWxsPT1hPyIiOmF9ZnVuY3Rpb24gZShhLGIpe2EuZGF0YT1kKGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBlKGEsYil9fWZ1bmN0aW9uIGcoYSxiLGMsZSl7cmV0dXJuIGM/dm9pZChlP2Euc2V0QXR0cmlidXRlKGIsIiIpOmEucmVtb3ZlQXR0cmlidXRlKGIpKTp2b2lkIGEuc2V0QXR0cmlidXRlKGIsZChlKSl9ZnVuY3Rpb24gaChhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe2coYSxiLGMsZCl9fWZ1bmN0aW9uIGkoYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIHU7Y2FzZSJyYWRpbyI6Y2FzZSJzZWxlY3QtbXVsdGlwbGUiOmNhc2Uic2VsZWN0LW9uZSI6cmV0dXJuImNoYW5nZSI7Y2FzZSJyYW5nZSI6aWYoL1RyaWRlbnR8TVNJRS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSlyZXR1cm4iY2hhbmdlIjtkZWZhdWx0OnJldHVybiJpbnB1dCJ9fWZ1bmN0aW9uIGooYSxiLGMsZSl7YVtiXT0oZXx8ZCkoYyl9ZnVuY3Rpb24gayhhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3JldHVybiBqKGEsYixkLGMpfX1mdW5jdGlvbiBsKCl7fWZ1bmN0aW9uIG0oYSxiLGMsZCl7ZnVuY3Rpb24gZSgpe2Muc2V0VmFsdWUoYVtiXSksYy5kaXNjYXJkQ2hhbmdlcygpLChkfHxsKShhKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfXZhciBmPWkoYSk7cmV0dXJuIGEuYWRkRXZlbnRMaXN0ZW5lcihmLGUpLHtjbG9zZTpmdW5jdGlvbigpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihmLGUpLGMuY2xvc2UoKX0sb2JzZXJ2YWJsZV86Y319ZnVuY3Rpb24gbihhKXtyZXR1cm4gQm9vbGVhbihhKX1mdW5jdGlvbiBvKGIpe2lmKGIuZm9ybSlyZXR1cm4gcyhiLmZvcm0uZWxlbWVudHMsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiJJTlBVVCI9PWEudGFnTmFtZSYmInJhZGlvIj09YS50eXBlJiZhLm5hbWU9PWIubmFtZX0pO3ZhciBjPWEoYik7aWYoIWMpcmV0dXJuW107dmFyIGQ9Yy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJyYWRpbyJdW25hbWU9IicrYi5uYW1lKyciXScpO3JldHVybiBzKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiFhLmZvcm19KX1mdW5jdGlvbiBwKGEpeyJJTlBVVCI9PT1hLnRhZ05hbWUmJiJyYWRpbyI9PT1hLnR5cGUmJm8oYSkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLmJpbmRpbmdzXy5jaGVja2VkO2ImJmIub2JzZXJ2YWJsZV8uc2V0VmFsdWUoITEpfSl9ZnVuY3Rpb24gcShhLGIpe3ZhciBjLGUsZixnPWEucGFyZW50Tm9kZTtnIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQmJmcuYmluZGluZ3NfJiZnLmJpbmRpbmdzXy52YWx1ZSYmKGM9ZyxlPWMuYmluZGluZ3NfLnZhbHVlLGY9Yy52YWx1ZSksYS52YWx1ZT1kKGIpLGMmJmMudmFsdWUhPWYmJihlLm9ic2VydmFibGVfLnNldFZhbHVlKGMudmFsdWUpLGUub2JzZXJ2YWJsZV8uZGlzY2FyZENoYW5nZXMoKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpKX1mdW5jdGlvbiByKGEpe3JldHVybiBmdW5jdGlvbihiKXtxKGEsYil9fXZhciBzPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5maWx0ZXIpO05vZGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLmVycm9yKCJVbmhhbmRsZWQgYmluZGluZyB0byBOb2RlOiAiLHRoaXMsYSxiKX0sTm9kZS5wcm90b3R5cGUuYmluZEZpbmlzaGVkPWZ1bmN0aW9uKCl7fTt2YXIgdD1jO09iamVjdC5kZWZpbmVQcm9wZXJ0eShQbGF0Zm9ybSwiZW5hYmxlQmluZGluZ3NSZWZsZWN0aW9uIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQ9PT1ifSxzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHQ9YT9iOmMsYX0sY29uZmlndXJhYmxlOiEwfSksVGV4dC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInRleHRDb250ZW50IiE9PWEpcmV0dXJuIE5vZGUucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZihjKXJldHVybiBlKHRoaXMsYik7dmFyIGQ9YjtyZXR1cm4gZSh0aGlzLGQub3BlbihmKHRoaXMpKSksdCh0aGlzLGEsZCl9LEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSI/Ij09YVthLmxlbmd0aC0xXTtpZihkJiYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksYT1hLnNsaWNlKDAsLTEpKSxjKXJldHVybiBnKHRoaXMsYSxkLGIpO3ZhciBlPWI7cmV0dXJuIGcodGhpcyxhLGQsZS5vcGVuKGgodGhpcyxhLGQpKSksdCh0aGlzLGEsZSl9O3ZhciB1OyFmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGI9YS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94Iik7dmFyIGMsZD0wO2IuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7ZCsrLGM9Y3x8ImNsaWNrIn0pLGIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjaGFuZ2UifSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnQiKTtlLmluaXRNb3VzZUV2ZW50KCJjbGljayIsITAsITAsd2luZG93LDAsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGwpLGIuZGlzcGF0Y2hFdmVudChlKSx1PTE9PWQ/ImNoYW5nZSI6Y30oKSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxlKXtpZigidmFsdWUiIT09YSYmImNoZWNrZWQiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxlKTt0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKTt2YXIgZj0iY2hlY2tlZCI9PWE/bjpkLGc9ImNoZWNrZWQiPT1hP3A6bDtpZihlKXJldHVybiBqKHRoaXMsYSxjLGYpO3ZhciBoPWMsaT1tKHRoaXMsYSxoLGcpO3JldHVybiBqKHRoaXMsYSxoLm9wZW4oayh0aGlzLGEsZikpLGYpLGIodGhpcyxhLGkpfSxIVE1MVGV4dEFyZWFFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtpZigidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKSxjKXJldHVybiBqKHRoaXMsInZhbHVlIixiKTt2YXIgZT1iLGY9bSh0aGlzLCJ2YWx1ZSIsZSk7cmV0dXJuIGoodGhpcywidmFsdWUiLGUub3BlbihrKHRoaXMsInZhbHVlIixkKSkpLHQodGhpcyxhLGYpfSxIVE1MT3B0aW9uRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInZhbHVlIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIiksYylyZXR1cm4gcSh0aGlzLGIpO3ZhciBkPWIsZT1tKHRoaXMsInZhbHVlIixkKTtyZXR1cm4gcSh0aGlzLGQub3BlbihyKHRoaXMpKSksdCh0aGlzLGEsZSl9LEhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxkKXtpZigic2VsZWN0ZWRpbmRleCI9PT1hJiYoYT0ic2VsZWN0ZWRJbmRleCIpLCJzZWxlY3RlZEluZGV4IiE9PWEmJiJ2YWx1ZSIhPT1hKXJldHVybiBIVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxjLGQpO2lmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLGQpcmV0dXJuIGoodGhpcyxhLGMpO3ZhciBlPWMsZj1tKHRoaXMsYSxlKTtyZXR1cm4gaih0aGlzLGEsZS5vcGVuKGsodGhpcyxhKSkpLGIodGhpcyxhLGYpfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBkKGEsYil7aWYoYil7Zm9yKHZhciBkLGU9IiMiK2I7IWQmJihhPWMoYSksYS5wcm90b0NvbnRlbnRfP2Q9YS5wcm90b0NvbnRlbnRfLnF1ZXJ5U2VsZWN0b3IoZSk6YS5nZXRFbGVtZW50QnlJZCYmKGQ9YS5nZXRFbGVtZW50QnlJZChiKSksIWQmJmEudGVtcGxhdGVDcmVhdG9yXyk7KWE9YS50ZW1wbGF0ZUNyZWF0b3JfO3JldHVybiBkfX1mdW5jdGlvbiBlKGEpe3JldHVybiJ0ZW1wbGF0ZSI9PWEudGFnTmFtZSYmImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZihhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gQm9vbGVhbihMW2EudGFnTmFtZV0mJmEuaGFzQXR0cmlidXRlKCJ0ZW1wbGF0ZSIpKX1mdW5jdGlvbiBoKGEpe3JldHVybiB2b2lkIDA9PT1hLmlzVGVtcGxhdGVfJiYoYS5pc1RlbXBsYXRlXz0iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGcoYSkpLGEuaXNUZW1wbGF0ZV99ZnVuY3Rpb24gaShhLGIpe3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbChOKTtoKGEpJiZiKGEpLEcoYyxiKX1mdW5jdGlvbiBqKGEpe2Z1bmN0aW9uIGIoYSl7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhKXx8aihhLmNvbnRlbnQpfWkoYSxiKX1mdW5jdGlvbiBrKGEsYil7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKSl9KX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudDtpZighYi5kZWZhdWx0VmlldylyZXR1cm4gYjt2YXIgYz1iLnRlbXBsYXRlQ29udGVudHNPd25lcl87aWYoIWMpe2ZvcihjPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtjLmxhc3RDaGlsZDspYy5yZW1vdmVDaGlsZChjLmxhc3RDaGlsZCk7Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfPWN9cmV0dXJuIGN9ZnVuY3Rpb24gbShhKXtpZighYS5zdGFnaW5nRG9jdW1lbnRfKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7aWYoIWIuc3RhZ2luZ0RvY3VtZW50Xyl7Yi5zdGFnaW5nRG9jdW1lbnRfPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSxiLnN0YWdpbmdEb2N1bWVudF8uaXNTdGFnaW5nRG9jdW1lbnQ9ITA7dmFyIGM9Yi5zdGFnaW5nRG9jdW1lbnRfLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtjLmhyZWY9ZG9jdW1lbnQuYmFzZVVSSSxiLnN0YWdpbmdEb2N1bWVudF8uaGVhZC5hcHBlbmRDaGlsZChjKSxiLnN0YWdpbmdEb2N1bWVudF8uc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF99YS5zdGFnaW5nRG9jdW1lbnRfPWIuc3RhZ2luZ0RvY3VtZW50X31yZXR1cm4gYS5zdGFnaW5nRG9jdW1lbnRffWZ1bmN0aW9uIG4oYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD1jLmxlbmd0aDtkLS0+MDspe3ZhciBlPWNbZF07S1tlLm5hbWVdJiYoInRlbXBsYXRlIiE9PWUubmFtZSYmYi5zZXRBdHRyaWJ1dGUoZS5uYW1lLGUudmFsdWUpLGEucmVtb3ZlQXR0cmlidXRlKGUubmFtZSkpfXJldHVybiBifWZ1bmN0aW9uIG8oYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD1jLmxlbmd0aDtkLS0+MDspe3ZhciBlPWNbZF07Yi5zZXRBdHRyaWJ1dGUoZS5uYW1lLGUudmFsdWUpLGEucmVtb3ZlQXR0cmlidXRlKGUubmFtZSl9cmV0dXJuIGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxifWZ1bmN0aW9uIHAoYSxiLGMpe3ZhciBkPWEuY29udGVudDtpZihjKXJldHVybiB2b2lkIGQuYXBwZW5kQ2hpbGQoYik7Zm9yKHZhciBlO2U9Yi5maXJzdENoaWxkOylkLmFwcGVuZENoaWxkKGUpfWZ1bmN0aW9uIHEoYSl7UD9hLl9fcHJvdG9fXz1IVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZTprKGEsSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUpfWZ1bmN0aW9uIHIoYSl7YS5zZXRNb2RlbEZuX3x8KGEuc2V0TW9kZWxGbl89ZnVuY3Rpb24oKXthLnNldE1vZGVsRm5TY2hlZHVsZWRfPSExO3ZhciBiPXooYSxhLmRlbGVnYXRlXyYmYS5kZWxlZ2F0ZV8ucHJlcGFyZUJpbmRpbmcpO3coYSxiLGEubW9kZWxfKX0pLGEuc2V0TW9kZWxGblNjaGVkdWxlZF98fChhLnNldE1vZGVsRm5TY2hlZHVsZWRfPSEwLE9ic2VydmVyLnJ1bkVPTV8oYS5zZXRNb2RlbEZuXykpfWZ1bmN0aW9uIHMoYSxiLGMsZCl7aWYoYSYmYS5sZW5ndGgpe2Zvcih2YXIgZSxmPWEubGVuZ3RoLGc9MCxoPTAsaT0wLGo9ITA7Zj5oOyl7dmFyIGc9YS5pbmRleE9mKCJ7eyIsaCksaz1hLmluZGV4T2YoIltbIixoKSxsPSExLG09In19IjtpZihrPj0wJiYoMD5nfHxnPmspJiYoZz1rLGw9ITAsbT0iXV0iKSxpPTA+Zz8tMTphLmluZGV4T2YobSxnKzIpLDA+aSl7aWYoIWUpcmV0dXJuO2UucHVzaChhLnNsaWNlKGgpKTticmVha31lPWV8fFtdLGUucHVzaChhLnNsaWNlKGgsZykpO3ZhciBuPWEuc2xpY2UoZysyLGkpLnRyaW0oKTtlLnB1c2gobCksaj1qJiZsO3ZhciBvPWQmJmQobixiLGMpO2UucHVzaChudWxsPT1vP1BhdGguZ2V0KG4pOm51bGwpLGUucHVzaChvKSxoPWkrMn1yZXR1cm4gaD09PWYmJmUucHVzaCgiIiksZS5oYXNPbmVQYXRoPTU9PT1lLmxlbmd0aCxlLmlzU2ltcGxlUGF0aD1lLmhhc09uZVBhdGgmJiIiPT1lWzBdJiYiIj09ZVs0XSxlLm9ubHlPbmVUaW1lPWosZS5jb21iaW5hdG9yPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1lWzBdLGM9MTtjPGUubGVuZ3RoO2MrPTQpe3ZhciBkPWUuaGFzT25lUGF0aD9hOmFbKGMtMSkvNF07dm9pZCAwIT09ZCYmKGIrPWQpLGIrPWVbYyszXX1yZXR1cm4gYn0sZX19ZnVuY3Rpb24gdChhLGIsYyxkKXtpZihiLmhhc09uZVBhdGgpe3ZhciBlPWJbM10sZj1lP2UoZCxjLCEwKTpiWzJdLmdldFZhbHVlRnJvbShkKTtyZXR1cm4gYi5pc1NpbXBsZVBhdGg/ZjpiLmNvbWJpbmF0b3IoZil9Zm9yKHZhciBnPVtdLGg9MTtoPGIubGVuZ3RoO2grPTQpe3ZhciBlPWJbaCsyXTtnWyhoLTEpLzRdPWU/ZShkLGMpOmJbaCsxXS5nZXRWYWx1ZUZyb20oZCl9cmV0dXJuIGIuY29tYmluYXRvcihnKX1mdW5jdGlvbiB1KGEsYixjLGQpe3ZhciBlPWJbM10sZj1lP2UoZCxjLCExKTpuZXcgUGF0aE9ic2VydmVyKGQsYlsyXSk7cmV0dXJuIGIuaXNTaW1wbGVQYXRoP2Y6bmV3IE9ic2VydmVyVHJhbnNmb3JtKGYsYi5jb21iaW5hdG9yKX1mdW5jdGlvbiB2KGEsYixjLGQpe2lmKGIub25seU9uZVRpbWUpcmV0dXJuIHQoYSxiLGMsZCk7aWYoYi5oYXNPbmVQYXRoKXJldHVybiB1KGEsYixjLGQpO2Zvcih2YXIgZT1uZXcgQ29tcG91bmRPYnNlcnZlcixmPTE7ZjxiLmxlbmd0aDtmKz00KXt2YXIgZz1iW2ZdLGg9YltmKzJdO2lmKGgpe3ZhciBpPWgoZCxjLGcpO2c/ZS5hZGRQYXRoKGkpOmUuYWRkT2JzZXJ2ZXIoaSl9ZWxzZXt2YXIgaj1iW2YrMV07Zz9lLmFkZFBhdGgoai5nZXRWYWx1ZUZyb20oZCkpOmUuYWRkUGF0aChkLGopfX1yZXR1cm4gbmV3IE9ic2VydmVyVHJhbnNmb3JtKGUsYi5jb21iaW5hdG9yKX1mdW5jdGlvbiB3KGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8Yi5sZW5ndGg7ZSs9Mil7dmFyIGY9YltlXSxnPWJbZSsxXSxoPXYoZixnLGEsYyksaT1hLmJpbmQoZixoLGcub25seU9uZVRpbWUpO2kmJmQmJmQucHVzaChpKX1pZihhLmJpbmRGaW5pc2hlZCgpLGIuaXNUZW1wbGF0ZSl7YS5tb2RlbF89Yzt2YXIgaj1hLnByb2Nlc3NCaW5kaW5nRGlyZWN0aXZlc18oYik7ZCYmaiYmZC5wdXNoKGopfX1mdW5jdGlvbiB4KGEsYixjKXt2YXIgZD1hLmdldEF0dHJpYnV0ZShiKTtyZXR1cm4gcygiIj09ZD8ie3t9fSI6ZCxiLGEsYyl9ZnVuY3Rpb24geShhLGMpe2IoYSk7Zm9yKHZhciBkPVtdLGU9MDtlPGEuYXR0cmlidXRlcy5sZW5ndGg7ZSsrKXtmb3IodmFyIGY9YS5hdHRyaWJ1dGVzW2VdLGc9Zi5uYW1lLGk9Zi52YWx1ZTsiXyI9PT1nWzBdOylnPWcuc3Vic3RyaW5nKDEpO2lmKCFoKGEpfHxnIT09SiYmZyE9PUgmJmchPT1JKXt2YXIgaj1zKGksZyxhLGMpO2omJmQucHVzaChnLGopfX1yZXR1cm4gaChhKSYmKGQuaXNUZW1wbGF0ZT0hMCxkLmlmPXgoYSxKLGMpLGQuYmluZD14KGEsSCxjKSxkLnJlcGVhdD14KGEsSSxjKSwhZC5pZnx8ZC5iaW5kfHxkLnJlcGVhdHx8KGQuYmluZD1zKCJ7e319IixILGEsYykpKSxkfWZ1bmN0aW9uIHooYSxiKXtpZihhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpcmV0dXJuIHkoYSxiKTtpZihhLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUpe3ZhciBjPXMoYS5kYXRhLCJ0ZXh0Q29udGVudCIsYSxiKTtpZihjKXJldHVyblsidGV4dENvbnRlbnQiLGNdfXJldHVybltdfWZ1bmN0aW9uIEEoYSxiLGMsZCxlLGYsZyl7Zm9yKHZhciBoPWIuYXBwZW5kQ2hpbGQoYy5pbXBvcnROb2RlKGEsITEpKSxpPTAsaj1hLmZpcnN0Q2hpbGQ7ajtqPWoubmV4dFNpYmxpbmcpQShqLGgsYyxkLmNoaWxkcmVuW2krK10sZSxmLGcpO3JldHVybiBkLmlzVGVtcGxhdGUmJihIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlKGgsYSksZiYmaC5zZXREZWxlZ2F0ZV8oZikpLHcoaCxkLGUsZyksaH1mdW5jdGlvbiBCKGEsYil7dmFyIGM9eihhLGIpO2MuY2hpbGRyZW49e307Zm9yKHZhciBkPTAsZT1hLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpYy5jaGlsZHJlbltkKytdPUIoZSxiKTtyZXR1cm4gY31mdW5jdGlvbiBDKGEpe3ZhciBiPWEuaWRfO3JldHVybiBifHwoYj1hLmlkXz1TKyspLGJ9ZnVuY3Rpb24gRChhLGIpe3ZhciBjPUMoYSk7aWYoYil7dmFyIGQ9Yi5iaW5kaW5nTWFwc1tjXTtyZXR1cm4gZHx8KGQ9Yi5iaW5kaW5nTWFwc1tjXT1CKGEsYi5wcmVwYXJlQmluZGluZyl8fFtdKSxkfXZhciBkPWEuYmluZGluZ01hcF87cmV0dXJuIGR8fChkPWEuYmluZGluZ01hcF89QihhLHZvaWQgMCl8fFtdKSxkfWZ1bmN0aW9uIEUoYSl7dGhpcy5jbG9zZWQ9ITEsdGhpcy50ZW1wbGF0ZUVsZW1lbnRfPWEsdGhpcy5pbnN0YW5jZXM9W10sdGhpcy5kZXBzPXZvaWQgMCx0aGlzLml0ZXJhdGVkVmFsdWU9W10sdGhpcy5wcmVzZW50VmFsdWU9dm9pZCAwLHRoaXMuYXJyYXlPYnNlcnZlcj12b2lkIDB9dmFyIEYsRz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EuTWFwJiYiZnVuY3Rpb24iPT10eXBlb2YgYS5NYXAucHJvdG90eXBlLmZvckVhY2g/Rj1hLk1hcDooRj1mdW5jdGlvbigpe3RoaXMua2V5cz1bXSx0aGlzLnZhbHVlcz1bXX0sRi5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMua2V5cy5pbmRleE9mKGEpOzA+Yz8odGhpcy5rZXlzLnB1c2goYSksdGhpcy52YWx1ZXMucHVzaChiKSk6dGhpcy52YWx1ZXNbY109Yn0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO2lmKCEoMD5iKSlyZXR1cm4gdGhpcy52YWx1ZXNbYl19LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiAwPmI/ITE6KHRoaXMua2V5cy5zcGxpY2UoYiwxKSx0aGlzLnZhbHVlcy5zcGxpY2UoYiwxKSwhMCl9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtjPHRoaXMua2V5cy5sZW5ndGg7YysrKWEuY2FsbChifHx0aGlzLHRoaXMudmFsdWVzW2NdLHRoaXMua2V5c1tjXSx0aGlzKX19KTsiZnVuY3Rpb24iIT10eXBlb2YgZG9jdW1lbnQuY29udGFpbnMmJihEb2N1bWVudC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT10aGlzfHxhLnBhcmVudE5vZGU9PT10aGlzPyEwOnRoaXMuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGEpfSk7dmFyIEg9ImJpbmQiLEk9InJlcGVhdCIsSj0iaWYiLEs9e3RlbXBsYXRlOiEwLHJlcGVhdDohMCxiaW5kOiEwLHJlZjohMH0sTD17VEhFQUQ6ITAsVEJPRFk6ITAsVEZPT1Q6ITAsVEg6ITAsVFI6ITAsVEQ6ITAsQ09MR1JPVVA6ITAsQ09MOiEwLENBUFRJT046ITAsT1BUSU9OOiEwLE9QVEdST1VQOiEwfSxNPSJ1bmRlZmluZWQiIT10eXBlb2YgSFRNTFRlbXBsYXRlRWxlbWVudDtNJiYhZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpLGI9YS5jb250ZW50Lm93bmVyRG9jdW1lbnQsYz1iLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiaHRtbCIpKSxkPWMuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJoZWFkIikpLGU9Yi5jcmVhdGVFbGVtZW50KCJiYXNlIik7ZS5ocmVmPWRvY3VtZW50LmJhc2VVUkksZC5hcHBlbmRDaGlsZChlKX0oKTt2YXIgTj0idGVtcGxhdGUsICIrT2JqZWN0LmtleXMoTCkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvTG93ZXJDYXNlKCkrIlt0ZW1wbGF0ZV0ifSkuam9pbigiLCAiKTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe2ooZG9jdW1lbnQpLFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCl9LCExKSxNfHwoYS5IVE1MVGVtcGxhdGVFbGVtZW50PWZ1bmN0aW9uKCl7dGhyb3cgVHlwZUVycm9yKCJJbGxlZ2FsIGNvbnN0cnVjdG9yIil9KTt2YXIgTyxQPSJfX3Byb3RvX18iaW57fTsiZnVuY3Rpb24iPT10eXBlb2YgTXV0YXRpb25PYnNlcnZlciYmKE89bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXS50YXJnZXQucmVmQ2hhbmdlZF8oKX0pKSxIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlPWZ1bmN0aW9uKGEsYyl7aWYoYS50ZW1wbGF0ZUlzRGVjb3JhdGVkXylyZXR1cm4hMTt2YXIgZD1hO2QudGVtcGxhdGVJc0RlY29yYXRlZF89ITA7dmFyIGg9ZihkKSYmTSxpPWgsaz0haCxtPSExO2lmKGh8fChnKGQpPyhiKCFjKSxkPW4oYSksZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxoPU0sbT0hMCk6ZShkKSYmKGQ9byhhKSxkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwLGg9TSkpLCFoKXtxKGQpO3ZhciByPWwoZCk7ZC5jb250ZW50Xz1yLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKX1yZXR1cm4gYz9kLmluc3RhbmNlUmVmXz1jOms/cChkLGEsbSk6aSYmaihkLmNvbnRlbnQpLCEwfSxIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcD1qO3ZhciBRPWEuSFRNTFVua25vd25FbGVtZW50fHxIVE1MRWxlbWVudCxSPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50X30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9O018fChIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFEucHJvdG90eXBlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUsImNvbnRlbnQiLFIpKSxrKEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLHtiaW5kOmZ1bmN0aW9uKGEsYixjKXtpZigicmVmIiE9YSlyZXR1cm4gRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpO3ZhciBkPXRoaXMsZT1jP2I6Yi5vcGVuKGZ1bmN0aW9uKGEpe2Quc2V0QXR0cmlidXRlKCJyZWYiLGEpLGQucmVmQ2hhbmdlZF8oKX0pO3JldHVybiB0aGlzLnNldEF0dHJpYnV0ZSgicmVmIixlKSx0aGlzLnJlZkNoYW5nZWRfKCksYz92b2lkIDA6KHRoaXMuYmluZGluZ3NfP3RoaXMuYmluZGluZ3NfLnJlZj1iOnRoaXMuYmluZGluZ3NfPXtyZWY6Yn0sYil9LHByb2Nlc3NCaW5kaW5nRGlyZWN0aXZlc186ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXRlcmF0b3JfJiZ0aGlzLml0ZXJhdG9yXy5jbG9zZURlcHMoKSxhLmlmfHxhLmJpbmR8fGEucmVwZWF0Pyh0aGlzLml0ZXJhdG9yX3x8KHRoaXMuaXRlcmF0b3JfPW5ldyBFKHRoaXMpKSx0aGlzLml0ZXJhdG9yXy51cGRhdGVEZXBlbmRlbmNpZXMoYSx0aGlzLm1vZGVsXyksTyYmTy5vYnNlcnZlKHRoaXMse2F0dHJpYnV0ZXM6ITAsYXR0cmlidXRlRmlsdGVyOlsicmVmIl19KSx0aGlzLml0ZXJhdG9yXyk6dm9pZCh0aGlzLml0ZXJhdG9yXyYmKHRoaXMuaXRlcmF0b3JfLmNsb3NlKCksdGhpcy5pdGVyYXRvcl89dm9pZCAwKSl9LGNyZWF0ZUluc3RhbmNlOmZ1bmN0aW9uKGEsYixjKXtiP2M9dGhpcy5uZXdEZWxlZ2F0ZV8oYik6Y3x8KGM9dGhpcy5kZWxlZ2F0ZV8pLHRoaXMucmVmQ29udGVudF98fCh0aGlzLnJlZkNvbnRlbnRfPXRoaXMucmVmXy5jb250ZW50KTt2YXIgZD10aGlzLnJlZkNvbnRlbnRfO2lmKG51bGw9PT1kLmZpcnN0Q2hpbGQpcmV0dXJuIFQ7dmFyIGU9RChkLGMpLGY9bSh0aGlzKSxnPWYuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2cudGVtcGxhdGVDcmVhdG9yXz10aGlzLGcucHJvdG9Db250ZW50Xz1kLGcuYmluZGluZ3NfPVtdLGcudGVybWluYXRvcl89bnVsbDtmb3IodmFyIGg9Zy50ZW1wbGF0ZUluc3RhbmNlXz17Zmlyc3ROb2RlOm51bGwsbGFzdE5vZGU6bnVsbCxtb2RlbDphfSxpPTAsaj0hMSxrPWQuZmlyc3RDaGlsZDtrO2s9ay5uZXh0U2libGluZyl7bnVsbD09PWsubmV4dFNpYmxpbmcmJihqPSEwKTt2YXIgbD1BKGssZyxmLGUuY2hpbGRyZW5baSsrXSxhLGMsZy5iaW5kaW5nc18pO2wudGVtcGxhdGVJbnN0YW5jZV89aCxqJiYoZy50ZXJtaW5hdG9yXz1sKX1yZXR1cm4gaC5maXJzdE5vZGU9Zy5maXJzdENoaWxkLGgubGFzdE5vZGU9Zy5sYXN0Q2hpbGQsZy50ZW1wbGF0ZUNyZWF0b3JfPXZvaWQgMCxnLnByb3RvQ29udGVudF89dm9pZCAwLGd9LGdldCBtb2RlbCgpe3JldHVybiB0aGlzLm1vZGVsX30sc2V0IG1vZGVsKGEpe3RoaXMubW9kZWxfPWEscih0aGlzKX0sZ2V0IGJpbmRpbmdEZWxlZ2F0ZSgpe3JldHVybiB0aGlzLmRlbGVnYXRlXyYmdGhpcy5kZWxlZ2F0ZV8ucmF3fSxyZWZDaGFuZ2VkXzpmdW5jdGlvbigpe3RoaXMuaXRlcmF0b3JfJiZ0aGlzLnJlZkNvbnRlbnRfIT09dGhpcy5yZWZfLmNvbnRlbnQmJih0aGlzLnJlZkNvbnRlbnRfPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy51cGRhdGVJdGVyYXRlZFZhbHVlKCkpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubW9kZWxfPXZvaWQgMCx0aGlzLmRlbGVnYXRlXz12b2lkIDAsdGhpcy5iaW5kaW5nc18mJnRoaXMuYmluZGluZ3NfLnJlZiYmdGhpcy5iaW5kaW5nc18ucmVmLmNsb3NlKCksdGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCl9LHNldERlbGVnYXRlXzpmdW5jdGlvbihhKXt0aGlzLmRlbGVnYXRlXz1hLHRoaXMuYmluZGluZ01hcF89dm9pZCAwLHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8uaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlTW9kZWxGbl89dm9pZCAwKX0sbmV3RGVsZWdhdGVfOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YSYmYVtiXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYylyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShhLGFyZ3VtZW50cyl9fWlmKGEpcmV0dXJue2JpbmRpbmdNYXBzOnt9LHJhdzphLHByZXBhcmVCaW5kaW5nOmIoInByZXBhcmVCaW5kaW5nIikscHJlcGFyZUluc3RhbmNlTW9kZWw6YigicHJlcGFyZUluc3RhbmNlTW9kZWwiKSxwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6YigicHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkIil9fSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe2lmKHRoaXMuZGVsZWdhdGVfKXRocm93IEVycm9yKCJUZW1wbGF0ZSBtdXN0IGJlIGNsZWFyZWQgYmVmb3JlIGEgbmV3IGJpbmRpbmdEZWxlZ2F0ZSBjYW4gYmUgYXNzaWduZWQiKTt0aGlzLnNldERlbGVnYXRlXyh0aGlzLm5ld0RlbGVnYXRlXyhhKSl9LGdldCByZWZfKCl7dmFyIGE9ZCh0aGlzLHRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKSk7aWYoYXx8KGE9dGhpcy5pbnN0YW5jZVJlZl8pLCFhKXJldHVybiB0aGlzO3ZhciBiPWEucmVmXztyZXR1cm4gYj9iOmF9fSk7dmFyIFM9MTtPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlbXBsYXRlSW5zdGFuY2VfO3JldHVybiBhP2E6dGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS50ZW1wbGF0ZUluc3RhbmNlOnZvaWQgMH19KTt2YXIgVD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7VC5iaW5kaW5nc189W10sVC50ZXJtaW5hdG9yXz1udWxsLEUucHJvdG90eXBlPXtjbG9zZURlcHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRlcHM7YSYmKGEuaWZPbmVUaW1lPT09ITEmJmEuaWZWYWx1ZS5jbG9zZSgpLGEub25lVGltZT09PSExJiZhLnZhbHVlLmNsb3NlKCkpfSx1cGRhdGVEZXBlbmRlbmNpZXM6ZnVuY3Rpb24oYSxiKXt0aGlzLmNsb3NlRGVwcygpO3ZhciBjPXRoaXMuZGVwcz17fSxkPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZihhLmlmKXtpZihjLmhhc0lmPSEwLGMuaWZPbmVUaW1lPWEuaWYub25seU9uZVRpbWUsYy5pZlZhbHVlPXYoSixhLmlmLGQsYiksYy5pZk9uZVRpbWUmJiFjLmlmVmFsdWUpcmV0dXJuIHZvaWQgdGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlKCk7Yy5pZk9uZVRpbWV8fGMuaWZWYWx1ZS5vcGVuKHRoaXMudXBkYXRlSXRlcmF0ZWRWYWx1ZSx0aGlzKX1hLnJlcGVhdD8oYy5yZXBlYXQ9ITAsYy5vbmVUaW1lPWEucmVwZWF0Lm9ubHlPbmVUaW1lLGMudmFsdWU9dihJLGEucmVwZWF0LGQsYikpOihjLnJlcGVhdD0hMSxjLm9uZVRpbWU9YS5iaW5kLm9ubHlPbmVUaW1lLGMudmFsdWU9dihILGEuYmluZCxkLGIpKSxjLm9uZVRpbWV8fGMudmFsdWUub3Blbih0aGlzLnVwZGF0ZUl0ZXJhdGVkVmFsdWUsdGhpcyksdGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlKCl9LHVwZGF0ZUl0ZXJhdGVkVmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLmRlcHMuaGFzSWYpe3ZhciBhPXRoaXMuZGVwcy5pZlZhbHVlO2lmKHRoaXMuZGVwcy5pZk9uZVRpbWV8fChhPWEuZGlzY2FyZENoYW5nZXMoKSksIWEpcmV0dXJuIHZvaWQgdGhpcy52YWx1ZUNoYW5nZWQoKX12YXIgYj10aGlzLmRlcHMudmFsdWU7dGhpcy5kZXBzLm9uZVRpbWV8fChiPWIuZGlzY2FyZENoYW5nZXMoKSksdGhpcy5kZXBzLnJlcGVhdHx8KGI9W2JdKTt2YXIgYz10aGlzLmRlcHMucmVwZWF0JiYhdGhpcy5kZXBzLm9uZVRpbWUmJkFycmF5LmlzQXJyYXkoYik7dGhpcy52YWx1ZUNoYW5nZWQoYixjKX0sdmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEsYil7QXJyYXkuaXNBcnJheShhKXx8KGE9W10pLGEhPT10aGlzLml0ZXJhdGVkVmFsdWUmJih0aGlzLnVub2JzZXJ2ZSgpLHRoaXMucHJlc2VudFZhbHVlPWEsYiYmKHRoaXMuYXJyYXlPYnNlcnZlcj1uZXcgQXJyYXlPYnNlcnZlcih0aGlzLnByZXNlbnRWYWx1ZSksdGhpcy5hcnJheU9ic2VydmVyLm9wZW4odGhpcy5oYW5kbGVTcGxpY2VzLHRoaXMpKSx0aGlzLmhhbmRsZVNwbGljZXMoQXJyYXlPYnNlcnZlci5jYWxjdWxhdGVTcGxpY2VzKHRoaXMucHJlc2VudFZhbHVlLHRoaXMuaXRlcmF0ZWRWYWx1ZSkpKX0sZ2V0TGFzdEluc3RhbmNlTm9kZTpmdW5jdGlvbihhKXtpZigtMT09YSlyZXR1cm4gdGhpcy50ZW1wbGF0ZUVsZW1lbnRfO3ZhciBiPXRoaXMuaW5zdGFuY2VzW2FdLGM9Yi50ZXJtaW5hdG9yXztpZighYylyZXR1cm4gdGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEtMSk7aWYoYy5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFfHx0aGlzLnRlbXBsYXRlRWxlbWVudF89PT1jKXJldHVybiBjO3ZhciBkPWMuaXRlcmF0b3JfO3JldHVybiBkP2QuZ2V0TGFzdFRlbXBsYXRlTm9kZSgpOmN9LGdldExhc3RUZW1wbGF0ZU5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKHRoaXMuaW5zdGFuY2VzLmxlbmd0aC0xKX0saW5zZXJ0SW5zdGFuY2VBdDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpLGQ9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGU7dGhpcy5pbnN0YW5jZXMuc3BsaWNlKGEsMCxiKSxkLmluc2VydEJlZm9yZShiLGMubmV4dFNpYmxpbmcpfSxleHRyYWN0SW5zdGFuY2VBdDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEtMSksYz10aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYSksZD10aGlzLnRlbXBsYXRlRWxlbWVudF8ucGFyZW50Tm9kZSxlPXRoaXMuaW5zdGFuY2VzLnNwbGljZShhLDEpWzBdO2MhPT1iOyl7dmFyIGY9Yi5uZXh0U2libGluZztmPT1jJiYoYz1iKSxlLmFwcGVuZENoaWxkKGQucmVtb3ZlQ2hpbGQoZikpfXJldHVybiBlfSxnZXREZWxlZ2F0ZUZuOmZ1bmN0aW9uKGEpe3JldHVybiBhPWEmJmEodGhpcy50ZW1wbGF0ZUVsZW1lbnRfKSwiZnVuY3Rpb24iPT10eXBlb2YgYT9hOm51bGx9LGhhbmRsZVNwbGljZXM6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuY2xvc2VkJiZhLmxlbmd0aCl7dmFyIGI9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfO2lmKCFiLnBhcmVudE5vZGUpcmV0dXJuIHZvaWQgdGhpcy5jbG9zZSgpO0FycmF5T2JzZXJ2ZXIuYXBwbHlTcGxpY2VzKHRoaXMuaXRlcmF0ZWRWYWx1ZSx0aGlzLnByZXNlbnRWYWx1ZSxhKTt2YXIgYz1iLmRlbGVnYXRlXzt2b2lkIDA9PT10aGlzLmluc3RhbmNlTW9kZWxGbl8mJih0aGlzLmluc3RhbmNlTW9kZWxGbl89dGhpcy5nZXREZWxlZ2F0ZUZuKGMmJmMucHJlcGFyZUluc3RhbmNlTW9kZWwpKSx2b2lkIDA9PT10aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fJiYodGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXz10aGlzLmdldERlbGVnYXRlRm4oYyYmYy5wcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQpKTtmb3IodmFyIGQ9bmV3IEYsZT0wLGY9MDtmPGEubGVuZ3RoO2YrKyl7Zm9yKHZhciBnPWFbZl0saD1nLnJlbW92ZWQsaT0wO2k8aC5sZW5ndGg7aSsrKXt2YXIgaj1oW2ldLGs9dGhpcy5leHRyYWN0SW5zdGFuY2VBdChnLmluZGV4K2UpO2shPT1UJiZkLnNldChqLGspfWUtPWcuYWRkZWRDb3VudH1mb3IodmFyIGY9MDtmPGEubGVuZ3RoO2YrKylmb3IodmFyIGc9YVtmXSxsPWcuaW5kZXg7bDxnLmluZGV4K2cuYWRkZWRDb3VudDtsKyspe3ZhciBqPXRoaXMuaXRlcmF0ZWRWYWx1ZVtsXSxrPWQuZ2V0KGopO2s/ZC5kZWxldGUoaik6KHRoaXMuaW5zdGFuY2VNb2RlbEZuXyYmKGo9dGhpcy5pbnN0YW5jZU1vZGVsRm5fKGopKSxrPXZvaWQgMD09PWo/VDpiLmNyZWF0ZUluc3RhbmNlKGosdm9pZCAwLGMpKSx0aGlzLmluc2VydEluc3RhbmNlQXQobCxrKX1kLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5jbG9zZUluc3RhbmNlQmluZGluZ3MoYSl9LHRoaXMpLHRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl8mJnRoaXMucmVwb3J0SW5zdGFuY2VzTW92ZWQoYSl9fSxyZXBvcnRJbnN0YW5jZU1vdmVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW5zdGFuY2VzW2FdO2IhPT1UJiZ0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fKGIudGVtcGxhdGVJbnN0YW5jZV8sYSl9LHJlcG9ydEluc3RhbmNlc01vdmVkOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9MCxkPTA7ZDxhLmxlbmd0aDtkKyspe3ZhciBlPWFbZF07aWYoMCE9Yylmb3IoO2I8ZS5pbmRleDspdGhpcy5yZXBvcnRJbnN0YW5jZU1vdmVkKGIpLGIrKztlbHNlIGI9ZS5pbmRleDtmb3IoO2I8ZS5pbmRleCtlLmFkZGVkQ291bnQ7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKys7Yys9ZS5hZGRlZENvdW50LWUucmVtb3ZlZC5sZW5ndGh9aWYoMCE9Yylmb3IodmFyIGY9dGhpcy5pbnN0YW5jZXMubGVuZ3RoO2Y+YjspdGhpcy5yZXBvcnRJbnN0YW5jZU1vdmVkKGIpLGIrK30sY2xvc2VJbnN0YW5jZUJpbmRpbmdzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmJpbmRpbmdzXyxjPTA7YzxiLmxlbmd0aDtjKyspYltjXS5jbG9zZSgpfSx1bm9ic2VydmU6ZnVuY3Rpb24oKXt0aGlzLmFycmF5T2JzZXJ2ZXImJih0aGlzLmFycmF5T2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwKX0sY2xvc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5jbG9zZWQpe3RoaXMudW5vYnNlcnZlKCk7Zm9yKHZhciBhPTA7YTx0aGlzLmluc3RhbmNlcy5sZW5ndGg7YSsrKXRoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKHRoaXMuaW5zdGFuY2VzW2FdKTt0aGlzLmluc3RhbmNlcy5sZW5ndGg9MCx0aGlzLmNsb3NlRGVwcygpLHRoaXMudGVtcGxhdGVFbGVtZW50Xy5pdGVyYXRvcl89dm9pZCAwLHRoaXMuY2xvc2VkPSEwfX19LEhUTUxUZW1wbGF0ZUVsZW1lbnQuZm9yQWxsVGVtcGxhdGVzRnJvbV89aX0odGhpcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2V8fChlPSEwLGEuZW5kT2ZNaWNyb3Rhc2soZnVuY3Rpb24oKXtlPSExLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXAoIlBsYXRmb3JtLmZsdXNoKCkiKSxhLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCksbG9nRmxhZ3MuZGF0YSYmY29uc29sZS5ncm91cEVuZCgpfSkpfXZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7Yy50ZXh0Q29udGVudD0idGVtcGxhdGUge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9IC8qIGluamVjdGVkIGJ5IHBsYXRmb3JtLmpzICovIjt2YXIgZD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7ZC5pbnNlcnRCZWZvcmUoYyxkLmZpcnN0Q2hpbGQpO3ZhciBlO2lmKE9ic2VydmVyLmhhc09iamVjdE9ic2VydmUpYj1mdW5jdGlvbigpe307ZWxzZXt2YXIgZj0xMjU7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIldlYkNvbXBvbmVudHNSZWFkeSIsZnVuY3Rpb24oKXtiKCksYS5mbHVzaFBvbGw9c2V0SW50ZXJ2YWwoYixmKX0pfWlmKHdpbmRvdy5DdXN0b21FbGVtZW50cyYmIUN1c3RvbUVsZW1lbnRzLnVzZU5hdGl2ZSl7dmFyIGc9RG9jdW1lbnQucHJvdG90eXBlLmltcG9ydE5vZGU7RG9jdW1lbnQucHJvdG90eXBlLmltcG9ydE5vZGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1nLmNhbGwodGhpcyxhLGIpO3JldHVybiBDdXN0b21FbGVtZW50cy51cGdyYWRlQWxsKGMpLGN9fWEuZmx1c2g9Yn0od2luZG93LlBsYXRmb3JtKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGxhdGZvcm0uanMubWFw",
                "body": "LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbjogMC4zLjEKCndpbmRvdy5QbGF0Zm9ybT13aW5kb3cuUGxhdGZvcm18fHt9LHdpbmRvdy5sb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LGZ1bmN0aW9uKGEpe3ZhciBiPWEuZmxhZ3N8fHt9O2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9IiksYVswXSYmKGJbYVswXV09YVsxXXx8ITApfSk7dmFyIGM9ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0W3NyYyo9InBsYXRmb3JtLmpzIl0nKTtpZihjKWZvcih2YXIgZCxlPWMuYXR0cmlidXRlcyxmPTA7ZjxlLmxlbmd0aDtmKyspZD1lW2ZdLCJzcmMiIT09ZC5uYW1lJiYoYltkLm5hbWVdPWQudmFsdWV8fCEwKTtiLmxvZyYmYi5sb2cuc3BsaXQoIiwiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3dpbmRvdy5sb2dGbGFnc1thXT0hMH0pLGIuc2hhZG93PWIuc2hhZG93fHxiLnNoYWRvd2RvbXx8Yi5wb2x5ZmlsbCxiLnNoYWRvdz0ibmF0aXZlIj09PWIuc2hhZG93PyExOmIuc2hhZG93fHwhSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QsYi5zaGFkb3cmJmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInNjcmlwdCIpLmxlbmd0aD4xJiZjb25zb2xlLndhcm4oInBsYXRmb3JtLmpzIGlzIG5vdCB0aGUgZmlyc3Qgc2NyaXB0IG9uIHRoZSBwYWdlLiBTZWUgaHR0cDovL3d3dy5wb2x5bWVyLXByb2plY3Qub3JnL2RvY3Mvc3RhcnQvcGxhdGZvcm0uaHRtbCNzZXR1cCBmb3IgZGV0YWlscy4iKSxiLnJlZ2lzdGVyJiYod2luZG93LkN1c3RvbUVsZW1lbnRzPXdpbmRvdy5DdXN0b21FbGVtZW50c3x8e2ZsYWdzOnt9fSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuZmxhZ3MucmVnaXN0ZXI9Yi5yZWdpc3RlciksYi5pbXBvcnRzJiYod2luZG93LkhUTUxJbXBvcnRzPXdpbmRvdy5IVE1MSW1wb3J0c3x8e2ZsYWdzOnt9fSx3aW5kb3cuSFRNTEltcG9ydHMuZmxhZ3MuaW1wb3J0cz1iLmltcG9ydHMpLGEuZmxhZ3M9Yn0oUGxhdGZvcm0pLCJ1bmRlZmluZWQiPT10eXBlb2YgV2Vha01hcCYmIWZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9RGF0ZS5ub3coKSUxZTksYz1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGIrKyArIl9fIil9O2MucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYixjKXt2YXIgZD1iW3RoaXMubmFtZV07ZCYmZFswXT09PWI/ZFsxXT1jOmEoYix0aGlzLm5hbWUse3ZhbHVlOltiLGNdLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4oYj1hW3RoaXMubmFtZV0pJiZiWzBdPT09YT9iWzFdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX0sd2luZG93LldlYWtNYXA9Y30oKSxmdW5jdGlvbihnbG9iYWwpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkZXRlY3RPYmplY3RPYnNlcnZlKCl7ZnVuY3Rpb24gYShhKXtiPWF9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIE9iamVjdC5vYnNlcnZlfHwiZnVuY3Rpb24iIT10eXBlb2YgQXJyYXkub2JzZXJ2ZSlyZXR1cm4hMTt2YXIgYj1bXSxjPXt9LGQ9W107cmV0dXJuIE9iamVjdC5vYnNlcnZlKGMsYSksQXJyYXkub2JzZXJ2ZShkLGEpLGMuaWQ9MSxjLmlkPTIsZGVsZXRlIGMuaWQsZC5wdXNoKDEsMiksZC5sZW5ndGg9MCxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksNSE9PWIubGVuZ3RoPyExOiJhZGQiIT1iWzBdLnR5cGV8fCJ1cGRhdGUiIT1iWzFdLnR5cGV8fCJkZWxldGUiIT1iWzJdLnR5cGV8fCJzcGxpY2UiIT1iWzNdLnR5cGV8fCJzcGxpY2UiIT1iWzRdLnR5cGU/ITE6KE9iamVjdC51bm9ic2VydmUoYyxhKSxBcnJheS51bm9ic2VydmUoZCxhKSwhMCl9ZnVuY3Rpb24gZGV0ZWN0RXZhbCgpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgY2hyb21lJiZjaHJvbWUuYXBwJiZjaHJvbWUuYXBwLnJ1bnRpbWUpcmV0dXJuITE7dHJ5e3ZhciBhPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7cmV0dXJuIGEoKX1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gaXNJbmRleChhKXtyZXR1cm4rYT09PWE+Pj4wfWZ1bmN0aW9uIHRvTnVtYmVyKGEpe3JldHVybithfWZ1bmN0aW9uIGlzT2JqZWN0KGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGFyZVNhbWVWYWx1ZShhLGIpe3JldHVybiBhPT09Yj8wIT09YXx8MS9hPT09MS9iOm51bWJlcklzTmFOKGEpJiZudW1iZXJJc05hTihiKT8hMDphIT09YSYmYiE9PWJ9ZnVuY3Rpb24gZ2V0UGF0aENoYXJUeXBlKGEpe2lmKHZvaWQgMD09PWEpcmV0dXJuImVvZiI7dmFyIGI9YS5jaGFyQ29kZUF0KDApO3N3aXRjaChiKXtjYXNlIDkxOmNhc2UgOTM6Y2FzZSA0NjpjYXNlIDM0OmNhc2UgMzk6Y2FzZSA0ODpyZXR1cm4gYTtjYXNlIDk1OmNhc2UgMzY6cmV0dXJuImlkZW50IjtjYXNlIDMyOmNhc2UgOTpjYXNlIDEwOmNhc2UgMTM6Y2FzZSAxNjA6Y2FzZSA2NTI3OTpjYXNlIDgyMzI6Y2FzZSA4MjMzOnJldHVybiJ3cyJ9cmV0dXJuIGI+PTk3JiYxMjI+PWJ8fGI+PTY1JiY5MD49Yj8iaWRlbnQiOmI+PTQ5JiY1Nz49Yj8ibnVtYmVyIjoiZWxzZSJ9ZnVuY3Rpb24gbm9vcCgpe31mdW5jdGlvbiBwYXJzZVBhdGgoYSl7ZnVuY3Rpb24gYigpe2lmKCEoaz49YS5sZW5ndGgpKXt2YXIgYj1hW2srMV07cmV0dXJuImluU2luZ2xlUXVvdGUiPT1sJiYiJyI9PWJ8fCJpbkRvdWJsZVF1b3RlIj09bCYmJyInPT1iPyhrKyssZD1iLG0uYXBwZW5kKCksITApOnZvaWQgMH19Zm9yKHZhciBjLGQsZSxmLGcsaCxpLGo9W10saz0tMSxsPSJiZWZvcmVQYXRoIixtPXtwdXNoOmZ1bmN0aW9uKCl7dm9pZCAwIT09ZSYmKGoucHVzaChlKSxlPXZvaWQgMCl9LGFwcGVuZDpmdW5jdGlvbigpe3ZvaWQgMD09PWU/ZT1kOmUrPWR9fTtsOylpZihrKyssYz1hW2tdLCJcXCIhPWN8fCFiKGwpKXtpZihmPWdldFBhdGhDaGFyVHlwZShjKSxpPXBhdGhTdGF0ZU1hY2hpbmVbbF0sZz1pW2ZdfHxpWyJlbHNlIl18fCJlcnJvciIsImVycm9yIj09ZylyZXR1cm47aWYobD1nWzBdLGg9bVtnWzFdXXx8bm9vcCxkPXZvaWQgMD09PWdbMl0/YzpnWzJdLGgoKSwiYWZ0ZXJQYXRoIj09PWwpcmV0dXJuIGp9fWZ1bmN0aW9uIGlzSWRlbnQoYSl7cmV0dXJuIGlkZW50UmVnRXhwLnRlc3QoYSl9ZnVuY3Rpb24gUGF0aChhLGIpe2lmKGIhPT1jb25zdHJ1Y3RvcklzUHJpdmF0ZSl0aHJvdyBFcnJvcigiVXNlIFBhdGguZ2V0IHRvIHJldHJpZXZlIHBhdGggb2JqZWN0cyIpO2EubGVuZ3RoJiZBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLGEuc2xpY2UoKSksaGFzRXZhbCYmdGhpcy5sZW5ndGgmJih0aGlzLmdldFZhbHVlRnJvbT10aGlzLmNvbXBpbGVkR2V0VmFsdWVGcm9tRm4oKSl9ZnVuY3Rpb24gZ2V0UGF0aChhKXtpZihhIGluc3RhbmNlb2YgUGF0aClyZXR1cm4gYTtpZigobnVsbD09YXx8MD09YS5sZW5ndGgpJiYoYT0iIiksInN0cmluZyIhPXR5cGVvZiBhKXtpZihpc0luZGV4KGEubGVuZ3RoKSlyZXR1cm4gbmV3IFBhdGgoYSxjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7YT1TdHJpbmcoYSl9dmFyIGI9cGF0aENhY2hlW2FdO2lmKGIpcmV0dXJuIGI7dmFyIGM9cGFyc2VQYXRoKGEpO2lmKCFjKXJldHVybiBpbnZhbGlkUGF0aDt2YXIgYj1uZXcgUGF0aChjLGNvbnN0cnVjdG9ySXNQcml2YXRlKTtyZXR1cm4gcGF0aENhY2hlW2FdPWIsYn1mdW5jdGlvbiBmb3JtYXRBY2Nlc3NvcihhKXtyZXR1cm4gaXNJbmRleChhKT8iWyIrYSsiXSI6J1siJythLnJlcGxhY2UoLyIvZywnXFwiJykrJyJdJ31mdW5jdGlvbiBkaXJ0eUNoZWNrKGEpe2Zvcih2YXIgYj0wO01BWF9ESVJUWV9DSEVDS19DWUNMRVM+YiYmYS5jaGVja18oKTspYisrO3JldHVybiBnbG9iYWwudGVzdGluZ0V4cG9zZUN5Y2xlQ291bnQmJihnbG9iYWwuZGlydHlDaGVja0N5Y2xlQ291bnQ9YiksYj4wfWZ1bmN0aW9uIG9iamVjdElzRW1wdHkoYSl7Zm9yKHZhciBiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gZGlmZklzRW1wdHkoYSl7cmV0dXJuIG9iamVjdElzRW1wdHkoYS5hZGRlZCkmJm9iamVjdElzRW1wdHkoYS5yZW1vdmVkKSYmb2JqZWN0SXNFbXB0eShhLmNoYW5nZWQpfWZ1bmN0aW9uIGRpZmZPYmplY3RGcm9tT2xkT2JqZWN0KGEsYil7dmFyIGM9e30sZD17fSxlPXt9O2Zvcih2YXIgZiBpbiBiKXt2YXIgZz1hW2ZdOyh2b2lkIDA9PT1nfHxnIT09YltmXSkmJihmIGluIGE/ZyE9PWJbZl0mJihlW2ZdPWcpOmRbZl09dm9pZCAwKX1mb3IodmFyIGYgaW4gYSlmIGluIGJ8fChjW2ZdPWFbZl0pO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiZhLmxlbmd0aCE9PWIubGVuZ3RoJiYoZS5sZW5ndGg9YS5sZW5ndGgpLHthZGRlZDpjLHJlbW92ZWQ6ZCxjaGFuZ2VkOmV9fWZ1bmN0aW9uIHJ1bkVPTVRhc2tzKCl7aWYoIWVvbVRhc2tzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGE9MDthPGVvbVRhc2tzLmxlbmd0aDthKyspZW9tVGFza3NbYV0oKTtyZXR1cm4gZW9tVGFza3MubGVuZ3RoPTAsITB9ZnVuY3Rpb24gbmV3T2JzZXJ2ZWRPYmplY3QoKXtmdW5jdGlvbiBhKGEpe2ImJmIuc3RhdGVfPT09T1BFTkVEJiYhZCYmYi5jaGVja18oYSl9dmFyIGIsYyxkPSExLGU9ITA7cmV0dXJue29wZW46ZnVuY3Rpb24oYyl7aWYoYil0aHJvdyBFcnJvcigiT2JzZXJ2ZWRPYmplY3QgaW4gdXNlIik7ZXx8T2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGI9YyxlPSExfSxvYnNlcnZlOmZ1bmN0aW9uKGIsZCl7Yz1iLGQ/QXJyYXkub2JzZXJ2ZShjLGEpOk9iamVjdC5vYnNlcnZlKGMsYSl9LGRlbGl2ZXI6ZnVuY3Rpb24oYil7ZD1iLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxkPSExfSxjbG9zZTpmdW5jdGlvbigpe2I9dm9pZCAwLE9iamVjdC51bm9ic2VydmUoYyxhKSxvYnNlcnZlZE9iamVjdENhY2hlLnB1c2godGhpcyl9fX1mdW5jdGlvbiBnZXRPYnNlcnZlZE9iamVjdChhLGIsYyl7dmFyIGQ9b2JzZXJ2ZWRPYmplY3RDYWNoZS5wb3AoKXx8bmV3T2JzZXJ2ZWRPYmplY3QoKTtyZXR1cm4gZC5vcGVuKGEpLGQub2JzZXJ2ZShiLGMpLGR9ZnVuY3Rpb24gbmV3T2JzZXJ2ZWRTZXQoKXtmdW5jdGlvbiBhKGIsZil7YiYmKGI9PT1kJiYoZVtmXT0hMCksaC5pbmRleE9mKGIpPDAmJihoLnB1c2goYiksT2JqZWN0Lm9ic2VydmUoYixjKSksYShPYmplY3QuZ2V0UHJvdG90eXBlT2YoYiksZikpfWZ1bmN0aW9uIGIoYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07aWYoYy5vYmplY3QhPT1kfHxlW2MubmFtZV18fCJzZXRQcm90b3R5cGUiPT09Yy50eXBlKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIGMoYyl7aWYoIWIoYykpe2Zvcih2YXIgZCxlPTA7ZTxnLmxlbmd0aDtlKyspZD1nW2VdLGQuc3RhdGVfPT1PUEVORUQmJmQuaXRlcmF0ZU9iamVjdHNfKGEpO2Zvcih2YXIgZT0wO2U8Zy5sZW5ndGg7ZSsrKWQ9Z1tlXSxkLnN0YXRlXz09T1BFTkVEJiZkLmNoZWNrXygpfX12YXIgZCxlLGY9MCxnPVtdLGg9W10saT17b2JqZWN0OnZvaWQgMCxvYmplY3RzOmgsb3BlbjpmdW5jdGlvbihiLGMpe2R8fChkPWMsZT17fSksZy5wdXNoKGIpLGYrKyxiLml0ZXJhdGVPYmplY3RzXyhhKX0sY2xvc2U6ZnVuY3Rpb24oKXtpZihmLS0sIShmPjApKXtmb3IodmFyIGE9MDthPGgubGVuZ3RoO2ErKylPYmplY3QudW5vYnNlcnZlKGhbYV0sYyksT2JzZXJ2ZXIudW5vYnNlcnZlZENvdW50Kys7Zy5sZW5ndGg9MCxoLmxlbmd0aD0wLGQ9dm9pZCAwLGU9dm9pZCAwLG9ic2VydmVkU2V0Q2FjaGUucHVzaCh0aGlzKX19fTtyZXR1cm4gaX1mdW5jdGlvbiBnZXRPYnNlcnZlZFNldChhLGIpe3JldHVybiBsYXN0T2JzZXJ2ZWRTZXQmJmxhc3RPYnNlcnZlZFNldC5vYmplY3Q9PT1ifHwobGFzdE9ic2VydmVkU2V0PW9ic2VydmVkU2V0Q2FjaGUucG9wKCl8fG5ld09ic2VydmVkU2V0KCksbGFzdE9ic2VydmVkU2V0Lm9iamVjdD1iKSxsYXN0T2JzZXJ2ZWRTZXQub3BlbihhLGIpLGxhc3RPYnNlcnZlZFNldH1mdW5jdGlvbiBPYnNlcnZlcigpe3RoaXMuc3RhdGVfPVVOT1BFTkVELHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5pZF89bmV4dE9ic2VydmVySWQrK31mdW5jdGlvbiBhZGRUb0FsbChhKXtPYnNlcnZlci5fYWxsT2JzZXJ2ZXJzQ291bnQrKyxjb2xsZWN0T2JzZXJ2ZXJzJiZhbGxPYnNlcnZlcnMucHVzaChhKX1mdW5jdGlvbiByZW1vdmVGcm9tQWxsKCl7T2JzZXJ2ZXIuX2FsbE9ic2VydmVyc0NvdW50LS19ZnVuY3Rpb24gT2JqZWN0T2JzZXJ2ZXIoYSl7T2JzZXJ2ZXIuY2FsbCh0aGlzKSx0aGlzLnZhbHVlXz1hLHRoaXMub2xkT2JqZWN0Xz12b2lkIDB9ZnVuY3Rpb24gQXJyYXlPYnNlcnZlcihhKXtpZighQXJyYXkuaXNBcnJheShhKSl0aHJvdyBFcnJvcigiUHJvdmlkZWQgb2JqZWN0IGlzIG5vdCBhbiBBcnJheSIpO09iamVjdE9ic2VydmVyLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBQYXRoT2JzZXJ2ZXIoYSxiKXtPYnNlcnZlci5jYWxsKHRoaXMpLHRoaXMub2JqZWN0Xz1hLHRoaXMucGF0aF89Z2V0UGF0aChiKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDB9ZnVuY3Rpb24gQ29tcG91bmRPYnNlcnZlcihhKXtPYnNlcnZlci5jYWxsKHRoaXMpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl89YSx0aGlzLnZhbHVlXz1bXSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy5vYnNlcnZlZF89W119ZnVuY3Rpb24gaWRlbnRGbihhKXtyZXR1cm4gYX1mdW5jdGlvbiBPYnNlcnZlclRyYW5zZm9ybShhLGIsYyxkKXt0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5vYnNlcnZhYmxlXz1hLHRoaXMuZ2V0VmFsdWVGbl89Ynx8aWRlbnRGbix0aGlzLnNldFZhbHVlRm5fPWN8fGlkZW50Rm4sdGhpcy5kb250UGFzc1Rocm91Z2hTZXRfPWR9ZnVuY3Rpb24gbm90aWZ5KGEsYixjLGQpe2lmKCFhcmVTYW1lVmFsdWUoYyxkKSYmKCJmdW5jdGlvbiI9PXR5cGVvZiBhLnByb3BlcnR5Q2hhbmdlZF8mJmEucHJvcGVydHlDaGFuZ2VkXyhiLGMsZCksaGFzT2JzZXJ2ZSkpe3ZhciBlPWEubm90aWZpZXJfO2V8fChlPWEubm90aWZpZXJfPU9iamVjdC5nZXROb3RpZmllcihhKSksdXBkYXRlUmVjb3JkLm9iamVjdD1hLHVwZGF0ZVJlY29yZC5uYW1lPWIsdXBkYXRlUmVjb3JkLm9sZFZhbHVlPWQsZS5ub3RpZnkodXBkYXRlUmVjb3JkKX19ZnVuY3Rpb24gZGlmZk9iamVjdEZyb21DaGFuZ2VSZWNvcmRzKGEsYixjKXtmb3IodmFyIGQ9e30sZT17fSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07ZXhwZWN0ZWRSZWNvcmRUeXBlc1tnLnR5cGVdPyhnLm5hbWUgaW4gY3x8KGNbZy5uYW1lXT1nLm9sZFZhbHVlKSwidXBkYXRlIiE9Zy50eXBlJiYoImFkZCIhPWcudHlwZT9nLm5hbWUgaW4gZD8oZGVsZXRlIGRbZy5uYW1lXSxkZWxldGUgY1tnLm5hbWVdKTplW2cubmFtZV09ITA6Zy5uYW1lIGluIGU/ZGVsZXRlIGVbZy5uYW1lXTpkW2cubmFtZV09ITApKTooY29uc29sZS5lcnJvcigiVW5rbm93biBjaGFuZ2VSZWNvcmQgdHlwZTogIitnLnR5cGUpLGNvbnNvbGUuZXJyb3IoZykpfWZvcih2YXIgaCBpbiBkKWRbaF09YVtoXTtmb3IodmFyIGggaW4gZSllW2hdPXZvaWQgMDt2YXIgaT17fTtmb3IodmFyIGggaW4gYylpZighKGggaW4gZHx8aCBpbiBlKSl7dmFyIGo9YVtoXTtjW2hdIT09aiYmKGlbaF09ail9cmV0dXJue2FkZGVkOmQscmVtb3ZlZDplLGNoYW5nZWQ6aX19ZnVuY3Rpb24gbmV3U3BsaWNlKGEsYixjKXtyZXR1cm57aW5kZXg6YSxyZW1vdmVkOmIsYWRkZWRDb3VudDpjfX1mdW5jdGlvbiBBcnJheVNwbGljZSgpe31mdW5jdGlvbiBjYWxjU3BsaWNlcyhhLGIsYyxkLGUsZil7cmV0dXJuIGFycmF5U3BsaWNlLmNhbGNTcGxpY2VzKGEsYixjLGQsZSxmKX1mdW5jdGlvbiBpbnRlcnNlY3QoYSxiLGMsZCl7cmV0dXJuIGM+Ynx8YT5kPy0xOmI9PWN8fGQ9PWE/MDpjPmE/ZD5iP2ItYzpkLWM6Yj5kP2QtYTpiLWF9ZnVuY3Rpb24gbWVyZ2VTcGxpY2UoYSxiLGMsZCl7Zm9yKHZhciBlPW5ld1NwbGljZShiLGMsZCksZj0hMSxnPTAsaD0wO2g8YS5sZW5ndGg7aCsrKXt2YXIgaT1hW2hdO2lmKGkuaW5kZXgrPWcsIWYpe3ZhciBqPWludGVyc2VjdChlLmluZGV4LGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aCxpLmluZGV4LGkuaW5kZXgraS5hZGRlZENvdW50KTtpZihqPj0wKXthLnNwbGljZShoLDEpLGgtLSxnLT1pLmFkZGVkQ291bnQtaS5yZW1vdmVkLmxlbmd0aCxlLmFkZGVkQ291bnQrPWkuYWRkZWRDb3VudC1qO3ZhciBrPWUucmVtb3ZlZC5sZW5ndGgraS5yZW1vdmVkLmxlbmd0aC1qO2lmKGUuYWRkZWRDb3VudHx8ayl7dmFyIGM9aS5yZW1vdmVkO2lmKGUuaW5kZXg8aS5pbmRleCl7dmFyIGw9ZS5yZW1vdmVkLnNsaWNlKDAsaS5pbmRleC1lLmluZGV4KTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShsLGMpLGM9bH1pZihlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGg+aS5pbmRleCtpLmFkZGVkQ291bnQpe3ZhciBtPWUucmVtb3ZlZC5zbGljZShpLmluZGV4K2kuYWRkZWRDb3VudC1lLmluZGV4KTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjLG0pfWUucmVtb3ZlZD1jLGkuaW5kZXg8ZS5pbmRleCYmKGUuaW5kZXg9aS5pbmRleCl9ZWxzZSBmPSEwfWVsc2UgaWYoZS5pbmRleDxpLmluZGV4KXtmPSEwLGEuc3BsaWNlKGgsMCxlKSxoKys7dmFyIG49ZS5hZGRlZENvdW50LWUucmVtb3ZlZC5sZW5ndGg7aS5pbmRleCs9bixnKz1ufX19Znx8YS5wdXNoKGUpfWZ1bmN0aW9uIGNyZWF0ZUluaXRpYWxTcGxpY2VzKGEsYil7Zm9yKHZhciBjPVtdLGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGU9YltkXTtzd2l0Y2goZS50eXBlKXtjYXNlInNwbGljZSI6bWVyZ2VTcGxpY2UoYyxlLmluZGV4LGUucmVtb3ZlZC5zbGljZSgpLGUuYWRkZWRDb3VudCk7YnJlYWs7Y2FzZSJhZGQiOmNhc2UidXBkYXRlIjpjYXNlImRlbGV0ZSI6aWYoIWlzSW5kZXgoZS5uYW1lKSljb250aW51ZTt2YXIgZj10b051bWJlcihlLm5hbWUpO2lmKDA+Ziljb250aW51ZTttZXJnZVNwbGljZShjLGYsW2Uub2xkVmFsdWVdLDEpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiVW5leHBlY3RlZCByZWNvcmQgdHlwZTogIitKU09OLnN0cmluZ2lmeShlKSl9fXJldHVybiBjfWZ1bmN0aW9uIHByb2plY3RBcnJheVNwbGljZXMoYSxiKXt2YXIgYz1bXTtyZXR1cm4gY3JlYXRlSW5pdGlhbFNwbGljZXMoYSxiKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3JldHVybiAxPT1iLmFkZGVkQ291bnQmJjE9PWIucmVtb3ZlZC5sZW5ndGg/dm9pZChiLnJlbW92ZWRbMF0hPT1hW2IuaW5kZXhdJiZjLnB1c2goYikpOnZvaWQoYz1jLmNvbmNhdChjYWxjU3BsaWNlcyhhLGIuaW5kZXgsYi5pbmRleCtiLmFkZGVkQ291bnQsYi5yZW1vdmVkLDAsYi5yZW1vdmVkLmxlbmd0aCkpKX0pLGN9dmFyIGhhc09ic2VydmU9ZGV0ZWN0T2JqZWN0T2JzZXJ2ZSgpLGhhc0V2YWw9ZGV0ZWN0RXZhbCgpLG51bWJlcklzTmFOPWdsb2JhbC5OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGEpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYSYmZ2xvYmFsLmlzTmFOKGEpfSxjcmVhdGVPYmplY3Q9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LGlkZW50U3RhcnQ9IlskX2EtekEtWl0iLGlkZW50UGFydD0iWyRfYS16QS1aMC05XSIsaWRlbnRSZWdFeHA9bmV3IFJlZ0V4cCgiXiIraWRlbnRTdGFydCsiKyIraWRlbnRQYXJ0KyIqJCIpLHBhdGhTdGF0ZU1hY2hpbmU9e2JlZm9yZVBhdGg6e3dzOlsiYmVmb3JlUGF0aCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdLCJbIjpbImJlZm9yZUVsZW1lbnQiXSxlb2Y6WyJhZnRlclBhdGgiXX0saW5QYXRoOnt3czpbImluUGF0aCJdLCIuIjpbImJlZm9yZUlkZW50Il0sIlsiOlsiYmVmb3JlRWxlbWVudCJdLGVvZjpbImFmdGVyUGF0aCJdfSxiZWZvcmVJZGVudDp7d3M6WyJiZWZvcmVJZGVudCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdfSxpbklkZW50OntpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXSwwOlsiaW5JZGVudCIsImFwcGVuZCJdLG51bWJlcjpbImluSWRlbnQiLCJhcHBlbmQiXSx3czpbImluUGF0aCIsInB1c2giXSwiLiI6WyJiZWZvcmVJZGVudCIsInB1c2giXSwiWyI6WyJiZWZvcmVFbGVtZW50IiwicHVzaCJdLGVvZjpbImFmdGVyUGF0aCIsInB1c2giXX0sYmVmb3JlRWxlbWVudDp7d3M6WyJiZWZvcmVFbGVtZW50Il0sMDpbImFmdGVyWmVybyIsImFwcGVuZCJdLG51bWJlcjpbImluSW5kZXgiLCJhcHBlbmQiXSwiJyI6WyJpblNpbmdsZVF1b3RlIiwiYXBwZW5kIiwiIl0sJyInOlsiaW5Eb3VibGVRdW90ZSIsImFwcGVuZCIsIiJdfSxhZnRlclplcm86e3dzOlsiYWZ0ZXJFbGVtZW50IiwicHVzaCJdLCJdIjpbImluUGF0aCIsInB1c2giXX0saW5JbmRleDp7MDpbImluSW5kZXgiLCJhcHBlbmQiXSxudW1iZXI6WyJpbkluZGV4IiwiYXBwZW5kIl0sd3M6WyJhZnRlckVsZW1lbnQiXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19LGluU2luZ2xlUXVvdGU6eyInIjpbImFmdGVyRWxlbWVudCJdLGVvZjpbImVycm9yIl0sImVsc2UiOlsiaW5TaW5nbGVRdW90ZSIsImFwcGVuZCJdfSxpbkRvdWJsZVF1b3RlOnsnIic6WyJhZnRlckVsZW1lbnQiXSxlb2Y6WyJlcnJvciJdLCJlbHNlIjpbImluRG91YmxlUXVvdGUiLCJhcHBlbmQiXX0sYWZ0ZXJFbGVtZW50Ont3czpbImFmdGVyRWxlbWVudCJdLCJdIjpbImluUGF0aCIsInB1c2giXX19LGNvbnN0cnVjdG9ySXNQcml2YXRlPXt9LHBhdGhDYWNoZT17fTtQYXRoLmdldD1nZXRQYXRoLFBhdGgucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOltdLHZhbGlkOiEwLHRvU3RyaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPSIiLGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7dmFyIGM9dGhpc1tiXTthKz1pc0lkZW50KGMpP2I/Ii4iK2M6Yzpmb3JtYXRBY2Nlc3NvcihjKX1yZXR1cm4gYX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZihudWxsPT1hKXJldHVybjthPWFbdGhpc1tiXV19cmV0dXJuIGF9LGl0ZXJhdGVPYmplY3RzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKGMmJihhPWFbdGhpc1tjLTFdXSksIWlzT2JqZWN0KGEpKXJldHVybjtiKGEsdGhpc1swXSl9fSxjb21waWxlZEdldFZhbHVlRnJvbUZuOmZ1bmN0aW9uKCl7dmFyIGE9IiIsYj0ib2JqIjthKz0iaWYgKG9iaiAhPSBudWxsIjtmb3IodmFyIGMsZD0wO2Q8dGhpcy5sZW5ndGgtMTtkKyspYz10aGlzW2RdLGIrPWlzSWRlbnQoYyk/Ii4iK2M6Zm9ybWF0QWNjZXNzb3IoYyksYSs9IiAmJlxuICAgICAiK2IrIiAhPSBudWxsIjthKz0iKVxuIjt2YXIgYz10aGlzW2RdO3JldHVybiBiKz1pc0lkZW50KGMpPyIuIitjOmZvcm1hdEFjY2Vzc29yKGMpLGErPSIgIHJldHVybiAiK2IrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixhKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKCFpc09iamVjdChhKSlyZXR1cm4hMTthPWFbdGhpc1tjXV19cmV0dXJuIGlzT2JqZWN0KGEpPyhhW3RoaXNbY11dPWIsITApOiExfX0pO3ZhciBpbnZhbGlkUGF0aD1uZXcgUGF0aCgiIixjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7aW52YWxpZFBhdGgudmFsaWQ9ITEsaW52YWxpZFBhdGguZ2V0VmFsdWVGcm9tPWludmFsaWRQYXRoLnNldFZhbHVlRnJvbT1mdW5jdGlvbigpe307dmFyIE1BWF9ESVJUWV9DSEVDS19DWUNMRVM9MWUzLGVvbVRhc2tzPVtdLHJ1bkVPTT1oYXNPYnNlcnZlP2Z1bmN0aW9uKCl7dmFyIGE9e3BpbmdQb25nOiEwfSxiPSExO3JldHVybiBPYmplY3Qub2JzZXJ2ZShhLGZ1bmN0aW9uKCl7cnVuRU9NVGFza3MoKSxiPSExfSksZnVuY3Rpb24oYyl7ZW9tVGFza3MucHVzaChjKSxifHwoYj0hMCxhLnBpbmdQb25nPSFhLnBpbmdQb25nKX19KCk6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZW9tVGFza3MucHVzaChhKX19KCksb2JzZXJ2ZWRPYmplY3RDYWNoZT1bXSxvYnNlcnZlZFNldENhY2hlPVtdLGxhc3RPYnNlcnZlZFNldCxVTk9QRU5FRD0wLE9QRU5FRD0xLENMT1NFRD0yLFJFU0VUVElORz0zLG5leHRPYnNlcnZlcklkPTE7T2JzZXJ2ZXIucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPVVOT1BFTkVEKXRocm93IEVycm9yKCJPYnNlcnZlciBoYXMgYWxyZWFkeSBiZWVuIG9wZW5lZC4iKTtyZXR1cm4gYWRkVG9BbGwodGhpcyksdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLmNvbm5lY3RfKCksdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMudmFsdWVffSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJihyZW1vdmVGcm9tQWxsKHRoaXMpLHRoaXMuZGlzY29ubmVjdF8oKSx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy5zdGF0ZV89Q0xPU0VEKX0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJmRpcnR5Q2hlY2sodGhpcyl9LHJlcG9ydF86ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuY2FsbGJhY2tfLmFwcGx5KHRoaXMudGFyZ2V0XyxhKX1jYXRjaChiKXtPYnNlcnZlci5fZXJyb3JUaHJvd25EdXJpbmdDYWxsYmFjaz0hMCxjb25zb2xlLmVycm9yKCJFeGNlcHRpb24gY2F1Z2h0IGR1cmluZyBvYnNlcnZlciBjYWxsYmFjazogIisoYi5zdGFja3x8YikpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja18odm9pZCAwLCEwKSx0aGlzLnZhbHVlX319O3ZhciBjb2xsZWN0T2JzZXJ2ZXJzPSFoYXNPYnNlcnZlLGFsbE9ic2VydmVycztPYnNlcnZlci5fYWxsT2JzZXJ2ZXJzQ291bnQ9MCxjb2xsZWN0T2JzZXJ2ZXJzJiYoYWxsT2JzZXJ2ZXJzPVtdKTt2YXIgcnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITEsaGFzRGVidWdGb3JjZUZ1bGxEZWxpdmVyeT1oYXNPYnNlcnZlJiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gZXZhbCgiJVJ1bk1pY3JvdGFza3MoKSIpLCEwfWNhdGNoKGV4KXtyZXR1cm4hMX19KCk7Z2xvYmFsLlBsYXRmb3JtPWdsb2JhbC5QbGF0Zm9ybXx8e30sZ2xvYmFsLlBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50PWZ1bmN0aW9uKCl7aWYoIXJ1bm5pbmdNaWNyb3Rhc2tDaGVja3BvaW50KXtpZihoYXNEZWJ1Z0ZvcmNlRnVsbERlbGl2ZXJ5KXJldHVybiB2b2lkIGV2YWwoIiVSdW5NaWNyb3Rhc2tzKCkiKTtpZihjb2xsZWN0T2JzZXJ2ZXJzKXtydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludD0hMDt2YXIgY3ljbGVzPTAsYW55Q2hhbmdlZCx0b0NoZWNrO2Rve2N5Y2xlcysrLHRvQ2hlY2s9YWxsT2JzZXJ2ZXJzLGFsbE9ic2VydmVycz1bXSxhbnlDaGFuZ2VkPSExO2Zvcih2YXIgaT0wO2k8dG9DaGVjay5sZW5ndGg7aSsrKXt2YXIgb2JzZXJ2ZXI9dG9DaGVja1tpXTtvYnNlcnZlci5zdGF0ZV89PU9QRU5FRCYmKG9ic2VydmVyLmNoZWNrXygpJiYoYW55Q2hhbmdlZD0hMCksYWxsT2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpKX1ydW5FT01UYXNrcygpJiYoYW55Q2hhbmdlZD0hMCl9d2hpbGUoTUFYX0RJUlRZX0NIRUNLX0NZQ0xFUz5jeWNsZXMmJmFueUNoYW5nZWQpO2dsb2JhbC50ZXN0aW5nRXhwb3NlQ3ljbGVDb3VudCYmKGdsb2JhbC5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1jeWNsZXMpLHJ1bm5pbmdNaWNyb3Rhc2tDaGVja3BvaW50PSExfX19LGNvbGxlY3RPYnNlcnZlcnMmJihnbG9iYWwuUGxhdGZvcm0uY2xlYXJPYnNlcnZlcnM9ZnVuY3Rpb24oKXthbGxPYnNlcnZlcnM9W119KSxPYmplY3RPYnNlcnZlci5wcm90b3R5cGU9Y3JlYXRlT2JqZWN0KHtfX3Byb3RvX186T2JzZXJ2ZXIucHJvdG90eXBlLGFycmF5T2JzZXJ2ZTohMSxjb25uZWN0XzpmdW5jdGlvbigpe2hhc09ic2VydmU/dGhpcy5kaXJlY3RPYnNlcnZlcl89Z2V0T2JzZXJ2ZWRPYmplY3QodGhpcyx0aGlzLnZhbHVlXyx0aGlzLmFycmF5T2JzZXJ2ZSk6dGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXyl9LGNvcHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkuaXNBcnJheShhKT9bXTp7fTtmb3IodmFyIGMgaW4gYSliW2NdPWFbY107cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJihiLmxlbmd0aD1hLmxlbmd0aCksYn0sY2hlY2tfOmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoaGFzT2JzZXJ2ZSl7aWYoIWEpcmV0dXJuITE7Yz17fSxiPWRpZmZPYmplY3RGcm9tQ2hhbmdlUmVjb3Jkcyh0aGlzLnZhbHVlXyxhLGMpfWVsc2UgYz10aGlzLm9sZE9iamVjdF8sYj1kaWZmT2JqZWN0RnJvbU9sZE9iamVjdCh0aGlzLnZhbHVlXyx0aGlzLm9sZE9iamVjdF8pO3JldHVybiBkaWZmSXNFbXB0eShiKT8hMTooaGFzT2JzZXJ2ZXx8KHRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pKSx0aGlzLnJlcG9ydF8oW2IuYWRkZWR8fHt9LGIucmVtb3ZlZHx8e30sYi5jaGFuZ2VkfHx7fSxmdW5jdGlvbihhKXtyZXR1cm4gY1thXX1dKSwhMCl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7aGFzT2JzZXJ2ZT8odGhpcy5kaXJlY3RPYnNlcnZlcl8uY2xvc2UoKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApOnRoaXMub2xkT2JqZWN0Xz12b2lkIDB9LGRlbGl2ZXI6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09T1BFTkVEJiYoaGFzT2JzZXJ2ZT90aGlzLmRpcmVjdE9ic2VydmVyXy5kZWxpdmVyKCExKTpkaXJ0eUNoZWNrKHRoaXMpKX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXJlY3RPYnNlcnZlcl8/dGhpcy5kaXJlY3RPYnNlcnZlcl8uZGVsaXZlcighMCk6dGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXyksdGhpcy52YWx1ZV99fSksQXJyYXlPYnNlcnZlci5wcm90b3R5cGU9Y3JlYXRlT2JqZWN0KHtfX3Byb3RvX186T2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlLGFycmF5T2JzZXJ2ZTohMCxjb3B5T2JqZWN0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnNsaWNlKCl9LGNoZWNrXzpmdW5jdGlvbihhKXt2YXIgYjtpZihoYXNPYnNlcnZlKXtpZighYSlyZXR1cm4hMTtiPXByb2plY3RBcnJheVNwbGljZXModGhpcy52YWx1ZV8sYSl9ZWxzZSBiPWNhbGNTcGxpY2VzKHRoaXMudmFsdWVfLDAsdGhpcy52YWx1ZV8ubGVuZ3RoLHRoaXMub2xkT2JqZWN0XywwLHRoaXMub2xkT2JqZWN0Xy5sZW5ndGgpO3JldHVybiBiJiZiLmxlbmd0aD8oaGFzT2JzZXJ2ZXx8KHRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pKSx0aGlzLnJlcG9ydF8oW2JdKSwhMCk6ITF9fSksQXJyYXlPYnNlcnZlci5hcHBseVNwbGljZXM9ZnVuY3Rpb24oYSxiLGMpe2MuZm9yRWFjaChmdW5jdGlvbihjKXtmb3IodmFyIGQ9W2MuaW5kZXgsYy5yZW1vdmVkLmxlbmd0aF0sZT1jLmluZGV4O2U8Yy5pbmRleCtjLmFkZGVkQ291bnQ7KWQucHVzaChiW2VdKSxlKys7QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhLGQpfSl9LFBhdGhPYnNlcnZlci5wcm90b3R5cGU9Y3JlYXRlT2JqZWN0KHtfX3Byb3RvX186T2JzZXJ2ZXIucHJvdG90eXBlLGdldCBwYXRoKCl7cmV0dXJuIHRoaXMucGF0aF99LGNvbm5lY3RfOmZ1bmN0aW9uKCl7aGFzT2JzZXJ2ZSYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPWdldE9ic2VydmVkU2V0KHRoaXMsdGhpcy5vYmplY3RfKSksdGhpcy5jaGVja18odm9pZCAwLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXt0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXy5pdGVyYXRlT2JqZWN0cyh0aGlzLm9iamVjdF8sYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMudmFsdWVfO3JldHVybiB0aGlzLnZhbHVlXz10aGlzLnBhdGhfLmdldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8pLGJ8fGFyZVNhbWVWYWx1ZSh0aGlzLnZhbHVlXyxjKT8hMToodGhpcy5yZXBvcnRfKFt0aGlzLnZhbHVlXyxjLHRoaXNdKSwhMCl9LHNldFZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMucGF0aF8mJnRoaXMucGF0aF8uc2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0XyxhKX19KTt2YXIgb2JzZXJ2ZXJTZW50aW5lbD17fTtDb21wb3VuZE9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYnNlcnZlci5wcm90b3R5cGUsY29ubmVjdF86ZnVuY3Rpb24oKXtpZihoYXNPYnNlcnZlKXtmb3IodmFyIGEsYj0hMSxjPTA7Yzx0aGlzLm9ic2VydmVkXy5sZW5ndGg7Yys9MilpZihhPXRoaXMub2JzZXJ2ZWRfW2NdLGEhPT1vYnNlcnZlclNlbnRpbmVsKXtiPSEwO2JyZWFrfWImJih0aGlzLmRpcmVjdE9ic2VydmVyXz1nZXRPYnNlcnZlZFNldCh0aGlzLGEpKX10aGlzLmNoZWNrXyh2b2lkIDAsIXRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl8pfSxkaXNjb25uZWN0XzpmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8dGhpcy5vYnNlcnZlZF8ubGVuZ3RoO2ErPTIpdGhpcy5vYnNlcnZlZF9bYV09PT1vYnNlcnZlclNlbnRpbmVsJiZ0aGlzLm9ic2VydmVkX1thKzFdLmNsb3NlKCk7dGhpcy5vYnNlcnZlZF8ubGVuZ3RoPTAsdGhpcy52YWx1ZV8ubGVuZ3RoPTAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxhZGRQYXRoOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPVVOT1BFTkVEJiZ0aGlzLnN0YXRlXyE9UkVTRVRUSU5HKXRocm93IEVycm9yKCJDYW5ub3QgYWRkIHBhdGhzIG9uY2Ugc3RhcnRlZC4iKTt2YXIgYj1nZXRQYXRoKGIpO2lmKHRoaXMub2JzZXJ2ZWRfLnB1c2goYSxiKSx0aGlzLnJlcG9ydENoYW5nZXNPbk9wZW5fKXt2YXIgYz10aGlzLm9ic2VydmVkXy5sZW5ndGgvMi0xO3RoaXMudmFsdWVfW2NdPWIuZ2V0VmFsdWVGcm9tKGEpfX0sYWRkT2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdGF0ZV8hPVVOT1BFTkVEJiZ0aGlzLnN0YXRlXyE9UkVTRVRUSU5HKXRocm93IEVycm9yKCJDYW5ub3QgYWRkIG9ic2VydmVycyBvbmNlIHN0YXJ0ZWQuIik7aWYodGhpcy5vYnNlcnZlZF8ucHVzaChvYnNlcnZlclNlbnRpbmVsLGEpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl8pe3ZhciBiPXRoaXMub2JzZXJ2ZWRfLmxlbmd0aC8yLTE7dGhpcy52YWx1ZV9bYl09YS5vcGVuKHRoaXMuZGVsaXZlcix0aGlzKX19LHN0YXJ0UmVzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLnN0YXRlXyE9T1BFTkVEKXRocm93IEVycm9yKCJDYW4gb25seSByZXNldCB3aGlsZSBvcGVuIik7dGhpcy5zdGF0ZV89UkVTRVRUSU5HLHRoaXMuZGlzY29ubmVjdF8oKX0sZmluaXNoUmVzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLnN0YXRlXyE9UkVTRVRUSU5HKXRocm93IEVycm9yKCJDYW4gb25seSBmaW5pc2hSZXNldCBhZnRlciBzdGFydFJlc2V0Iik7cmV0dXJuIHRoaXMuc3RhdGVfPU9QRU5FRCx0aGlzLmNvbm5lY3RfKCksdGhpcy52YWx1ZV99LGl0ZXJhdGVPYmplY3RzXzpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0wO2M8dGhpcy5vYnNlcnZlZF8ubGVuZ3RoO2MrPTIpYj10aGlzLm9ic2VydmVkX1tjXSxiIT09b2JzZXJ2ZXJTZW50aW5lbCYmdGhpcy5vYnNlcnZlZF9bYysxXS5pdGVyYXRlT2JqZWN0cyhiLGEpfSxjaGVja186ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wO2Q8dGhpcy5vYnNlcnZlZF8ubGVuZ3RoO2QrPTIpe3ZhciBlLGY9dGhpcy5vYnNlcnZlZF9bZF0sZz10aGlzLm9ic2VydmVkX1tkKzFdO2lmKGY9PT1vYnNlcnZlclNlbnRpbmVsKXt2YXIgaD1nO2U9dGhpcy5zdGF0ZV89PT1VTk9QRU5FRD9oLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpOmguZGlzY2FyZENoYW5nZXMoKX1lbHNlIGU9Zy5nZXRWYWx1ZUZyb20oZik7Yj90aGlzLnZhbHVlX1tkLzJdPWU6YXJlU2FtZVZhbHVlKGUsdGhpcy52YWx1ZV9bZC8yXSl8fChjPWN8fFtdLGNbZC8yXT10aGlzLnZhbHVlX1tkLzJdLHRoaXMudmFsdWVfW2QvMl09ZSl9cmV0dXJuIGM/KHRoaXMucmVwb3J0XyhbdGhpcy52YWx1ZV8sYyx0aGlzLm9ic2VydmVkX10pLCEwKTohMX19KSxPYnNlcnZlclRyYW5zZm9ybS5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLnZhbHVlXz10aGlzLmdldFZhbHVlRm5fKHRoaXMub2JzZXJ2YWJsZV8ub3Blbih0aGlzLm9ic2VydmVkQ2FsbGJhY2tfLHRoaXMpKSx0aGlzLnZhbHVlX30sb2JzZXJ2ZWRDYWxsYmFja186ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmdldFZhbHVlRm5fKGEpLCFhcmVTYW1lVmFsdWUoYSx0aGlzLnZhbHVlXykpe3ZhciBiPXRoaXMudmFsdWVfO3RoaXMudmFsdWVfPWEsdGhpcy5jYWxsYmFja18uY2FsbCh0aGlzLnRhcmdldF8sdGhpcy52YWx1ZV8sYil9fSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlXz10aGlzLmdldFZhbHVlRm5fKHRoaXMub2JzZXJ2YWJsZV8uZGlzY2FyZENoYW5nZXMoKSksdGhpcy52YWx1ZV99LGRlbGl2ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYnNlcnZhYmxlXy5kZWxpdmVyKCl9LHNldFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBhPXRoaXMuc2V0VmFsdWVGbl8oYSksIXRoaXMuZG9udFBhc3NUaHJvdWdoU2V0XyYmdGhpcy5vYnNlcnZhYmxlXy5zZXRWYWx1ZT90aGlzLm9ic2VydmFibGVfLnNldFZhbHVlKGEpOnZvaWQgMH0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmFibGVfJiZ0aGlzLm9ic2VydmFibGVfLmNsb3NlKCksdGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy5vYnNlcnZhYmxlXz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuZ2V0VmFsdWVGbl89dm9pZCAwLHRoaXMuc2V0VmFsdWVGbl89dm9pZCAwfX07dmFyIGV4cGVjdGVkUmVjb3JkVHlwZXM9e2FkZDohMCx1cGRhdGU6ITAsImRlbGV0ZSI6ITB9LHVwZGF0ZVJlY29yZD17b2JqZWN0OnZvaWQgMCx0eXBlOiJ1cGRhdGUiLG5hbWU6dm9pZCAwLG9sZFZhbHVlOnZvaWQgMH07T2JzZXJ2ZXIuY3JlYXRlQmluZGFibGVQcm90b3R5cGVBY2Nlc3Nvcj1mdW5jdGlvbihhLGIpe3ZhciBjPWIrIl8iLGQ9YisiT2JzZXJ2YWJsZV8iO2FbY109YVtiXSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzW2RdO3JldHVybiBhJiZhLmRlbGl2ZXIoKSx0aGlzW2NdfSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGU9dGhpc1tkXTtpZihlKXJldHVybiB2b2lkIGUuc2V0VmFsdWUoYSk7dmFyIGY9dGhpc1tjXTtyZXR1cm4gdGhpc1tjXT1hLG5vdGlmeSh0aGlzLGIsYSxmKSxhfSxjb25maWd1cmFibGU6ITB9KX0sT2JzZXJ2ZXIuYmluZFRvSW5zdGFuY2U9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YisiXyIsZj1iKyJPYnNlcnZhYmxlXyI7YVtmXT1jO3ZhciBnPWFbZV0saD1jLm9wZW4oZnVuY3Rpb24oYyxkKXthW2VdPWMsbm90aWZ5KGEsYixjLGQpfSk7aWYoZCYmIWFyZVNhbWVWYWx1ZShnLGgpKXt2YXIgaT1kKGcsaCk7YXJlU2FtZVZhbHVlKGgsaSl8fChoPWksYy5zZXRWYWx1ZSYmYy5zZXRWYWx1ZShoKSl9cmV0dXJuIGFbZV09aCxub3RpZnkoYSxiLGgsZykse2Nsb3NlOmZ1bmN0aW9uKCl7Yy5jbG9zZSgpLGFbZl09dm9pZCAwfX19O3ZhciBFRElUX0xFQVZFPTAsRURJVF9VUERBVEU9MSxFRElUX0FERD0yLEVESVRfREVMRVRFPTM7QXJyYXlTcGxpY2UucHJvdG90eXBlPXtjYWxjRWRpdERpc3RhbmNlczpmdW5jdGlvbihhLGIsYyxkLGUsZil7Zm9yKHZhciBnPWYtZSsxLGg9Yy1iKzEsaT1uZXcgQXJyYXkoZyksaj0wO2c+ajtqKyspaVtqXT1uZXcgQXJyYXkoaCksaVtqXVswXT1qO2Zvcih2YXIgaz0wO2g+aztrKyspaVswXVtrXT1rO2Zvcih2YXIgaj0xO2c+ajtqKyspZm9yKHZhciBrPTE7aD5rO2srKylpZih0aGlzLmVxdWFscyhhW2Iray0xXSxkW2Urai0xXSkpaVtqXVtrXT1pW2otMV1bay0xXTtlbHNle3ZhciBsPWlbai0xXVtrXSsxLG09aVtqXVtrLTFdKzE7aVtqXVtrXT1tPmw/bDptfXJldHVybiBpfSxzcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTEsYz1hWzBdLmxlbmd0aC0xLGQ9YVtiXVtjXSxlPVtdO2I+MHx8Yz4wOylpZigwIT1iKWlmKDAhPWMpe3ZhciBmLGc9YVtiLTFdW2MtMV0saD1hW2ItMV1bY10saT1hW2JdW2MtMV07Zj1pPmg/Zz5oP2g6ZzpnPmk/aTpnLGY9PWc/KGc9PWQ/ZS5wdXNoKEVESVRfTEVBVkUpOihlLnB1c2goRURJVF9VUERBVEUpLGQ9ZyksYi0tLGMtLSk6Zj09aD8oZS5wdXNoKEVESVRfREVMRVRFKSxiLS0sZD1oKTooZS5wdXNoKEVESVRfQUREKSxjLS0sZD1pKX1lbHNlIGUucHVzaChFRElUX0RFTEVURSksYi0tO2Vsc2UgZS5wdXNoKEVESVRfQUREKSxjLS07cmV0dXJuIGUucmV2ZXJzZSgpLGV9LGNhbGNTcGxpY2VzOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz0wLGg9MCxpPU1hdGgubWluKGMtYixmLWUpO2lmKDA9PWImJjA9PWUmJihnPXRoaXMuc2hhcmVkUHJlZml4KGEsZCxpKSksYz09YS5sZW5ndGgmJmY9PWQubGVuZ3RoJiYoaD10aGlzLnNoYXJlZFN1ZmZpeChhLGQsaS1nKSksYis9ZyxlKz1nLGMtPWgsZi09aCxjLWI9PTAmJmYtZT09MClyZXR1cm5bXTtpZihiPT1jKXtmb3IodmFyIGo9bmV3U3BsaWNlKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltuZXdTcGxpY2UoYixbXSxjLWIpXTtmb3IodmFyIGs9dGhpcy5zcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXModGhpcy5jYWxjRWRpdERpc3RhbmNlcyhhLGIsYyxkLGUsZikpLGo9dm9pZCAwLGw9W10sbT1iLG49ZSxvPTA7bzxrLmxlbmd0aDtvKyspc3dpdGNoKGtbb10pe2Nhc2UgRURJVF9MRUFWRTpqJiYobC5wdXNoKGopLGo9dm9pZCAwKSxtKyssbisrO2JyZWFrO2Nhc2UgRURJVF9VUERBVEU6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSBFRElUX0FERDpqfHwoaj1uZXdTcGxpY2UobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrO2JyZWFrO2Nhc2UgRURJVF9ERUxFVEU6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGoucmVtb3ZlZC5wdXNoKGRbbl0pLG4rK31yZXR1cm4gaiYmbC5wdXNoKGopLGx9LHNoYXJlZFByZWZpeDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA7Yz5kO2QrKylpZighdGhpcy5lcXVhbHMoYVtkXSxiW2RdKSlyZXR1cm4gZDtyZXR1cm4gY30sc2hhcmVkU3VmZml4OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YS5sZW5ndGgsZT1iLmxlbmd0aCxmPTA7Yz5mJiZ0aGlzLmVxdWFscyhhWy0tZF0sYlstLWVdKTspZisrO3JldHVybiBmfSxjYWxjdWxhdGVTcGxpY2VzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY2FsY1NwbGljZXMoYSwwLGEubGVuZ3RoLGIsMCxiLmxlbmd0aCl9LGVxdWFsczpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Yn19O3ZhciBhcnJheVNwbGljZT1uZXcgQXJyYXlTcGxpY2U7Z2xvYmFsLk9ic2VydmVyPU9ic2VydmVyLGdsb2JhbC5PYnNlcnZlci5ydW5FT01fPXJ1bkVPTSxnbG9iYWwuT2JzZXJ2ZXIub2JzZXJ2ZXJTZW50aW5lbF89b2JzZXJ2ZXJTZW50aW5lbCxnbG9iYWwuT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZT1oYXNPYnNlcnZlLGdsb2JhbC5BcnJheU9ic2VydmVyPUFycmF5T2JzZXJ2ZXIsZ2xvYmFsLkFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcz1mdW5jdGlvbihhLGIpe3JldHVybiBhcnJheVNwbGljZS5jYWxjdWxhdGVTcGxpY2VzKGEsYil9LGdsb2JhbC5BcnJheVNwbGljZT1BcnJheVNwbGljZSxnbG9iYWwuT2JqZWN0T2JzZXJ2ZXI9T2JqZWN0T2JzZXJ2ZXIsZ2xvYmFsLlBhdGhPYnNlcnZlcj1QYXRoT2JzZXJ2ZXIsZ2xvYmFsLkNvbXBvdW5kT2JzZXJ2ZXI9Q29tcG91bmRPYnNlcnZlcixnbG9iYWwuUGF0aD1QYXRoLGdsb2JhbC5PYnNlcnZlclRyYW5zZm9ybT1PYnNlcnZlclRyYW5zZm9ybX0oInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJmdsb2JhbCYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZT9nbG9iYWw6dGhpc3x8d2luZG93KSxQbGF0Zm9ybS5mbGFncy5zaGFkb3c/KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD17fSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgY2hyb21lJiZjaHJvbWUuYXBwJiZjaHJvbWUuYXBwLnJ1bnRpbWUpcmV0dXJuITE7dHJ5e3ZhciBhPW5ldyBGdW5jdGlvbigicmV0dXJuIHRydWU7Iik7cmV0dXJuIGEoKX1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gYyhhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBkKGEsYil7Zm9yKHZhciBjPUwoYiksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO0soYSxlLE0oYixlKSl9cmV0dXJuIGF9ZnVuY3Rpb24gZShhLGIpe2Zvcih2YXIgYz1MKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtzd2l0Y2goZSl7Y2FzZSJhcmd1bWVudHMiOmNhc2UiY2FsbGVyIjpjYXNlImxlbmd0aCI6Y2FzZSJuYW1lIjpjYXNlInByb3RvdHlwZSI6Y2FzZSJ0b1N0cmluZyI6Y29udGludWV9SyhhLGUsTShiLGUpKX1yZXR1cm4gYX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXWluIGEpcmV0dXJuIGJbY119ZnVuY3Rpb24gZyhhLGIsYyl7Ti52YWx1ZT1jLEsoYSxiLE4pfWZ1bmN0aW9uIGgoYSl7dmFyIGI9YS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxjPUcuZ2V0KGIpO2lmKGMpcmV0dXJuIGM7dmFyIGQ9aChiKSxlPXYoZCk7cmV0dXJuIHMoYixlLGEpLGV9ZnVuY3Rpb24gaShhLGIpe3EoYSxiLCEwKX1mdW5jdGlvbiBqKGEsYil7cShiLGEsITEpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuL15vblthLXpdKyQvLnRlc3QoYSl9ZnVuY3Rpb24gbChhKXtyZXR1cm4vXlx3W2EtekEtWl8wLTldKiQvLnRlc3QoYSl9ZnVuY3Rpb24gbShhKXtyZXR1cm4gSiYmbChhKT9uZXcgRnVuY3Rpb24oInJldHVybiB0aGlzLmltcGwuIithKTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV19fWZ1bmN0aW9uIG4oYSl7cmV0dXJuIEomJmwoYSk/bmV3IEZ1bmN0aW9uKCJ2IiwidGhpcy5pbXBsLiIrYSsiID0gdiIpOmZ1bmN0aW9uKGIpe3RoaXMuaW1wbFthXT1ifX1mdW5jdGlvbiBvKGEpe3JldHVybiBKJiZsKGEpP25ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMuaW1wbC4iK2ErIi5hcHBseSh0aGlzLmltcGwsIGFyZ3VtZW50cykiKTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHAoYSxiKXt0cnl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKX1jYXRjaChjKXtyZXR1cm4gUH19ZnVuY3Rpb24gcShiLGMsZCl7Zm9yKHZhciBlPUwoYiksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1lW2ZdO2lmKCJwb2x5bWVyQmxhY2tMaXN0XyIhPT1nJiYhKGcgaW4gY3x8Yi5wb2x5bWVyQmxhY2tMaXN0XyYmYi5wb2x5bWVyQmxhY2tMaXN0X1tnXSkpe08mJmIuX19sb29rdXBHZXR0ZXJfXyhnKTt2YXIgaCxpLGo9cChiLGcpO2lmKGQmJiJmdW5jdGlvbiI9PXR5cGVvZiBqLnZhbHVlKWNbZ109byhnKTtlbHNle3ZhciBsPWsoZyk7aD1sP2EuZ2V0RXZlbnRIYW5kbGVyR2V0dGVyKGcpOm0oZyksKGoud3JpdGFibGV8fGouc2V0KSYmKGk9bD9hLmdldEV2ZW50SGFuZGxlclNldHRlcihnKTpuKGcpKSxLKGMsZyx7Z2V0Omgsc2V0OmksY29uZmlndXJhYmxlOmouY29uZmlndXJhYmxlLGVudW1lcmFibGU6ai5lbnVtZXJhYmxlfSl9fX19ZnVuY3Rpb24gcihhLGIsYyl7dmFyIGQ9YS5wcm90b3R5cGU7cyhkLGIsYyksZShiLGEpfWZ1bmN0aW9uIHMoYSxiLGQpe3ZhciBlPWIucHJvdG90eXBlO2Modm9pZCAwPT09Ry5nZXQoYSkpLEcuc2V0KGEsYiksSC5zZXQoZSxhKSxpKGEsZSksZCYmaihlLGQpLGcoZSwiY29uc3RydWN0b3IiLGIpLGIucHJvdG90eXBlPWV9ZnVuY3Rpb24gdChhLGIpe3JldHVybiBHLmdldChiLnByb3RvdHlwZSk9PT1hfWZ1bmN0aW9uIHUoYSl7dmFyIGI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9aChiKSxkPXYoYyk7cmV0dXJuIHMoYixkLGEpLGR9ZnVuY3Rpb24gdihhKXtmdW5jdGlvbiBiKGIpe2EuY2FsbCh0aGlzLGIpfXZhciBjPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpO3JldHVybiBjLmNvbnN0cnVjdG9yPWIsYi5wcm90b3R5cGU9YyxifWZ1bmN0aW9uIHcoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBJLkV2ZW50VGFyZ2V0fHxhIGluc3RhbmNlb2YgSS5FdmVudHx8YSBpbnN0YW5jZW9mIEkuUmFuZ2V8fGEgaW5zdGFuY2VvZiBJLkRPTUltcGxlbWVudGF0aW9ufHxhIGluc3RhbmNlb2YgSS5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8fEkuV2ViR0xSZW5kZXJpbmdDb250ZXh0JiZhIGluc3RhbmNlb2YgSS5XZWJHTFJlbmRlcmluZ0NvbnRleHR9ZnVuY3Rpb24geChhKXtyZXR1cm4gUiYmYSBpbnN0YW5jZW9mIFJ8fGEgaW5zdGFuY2VvZiBUfHxhIGluc3RhbmNlb2YgU3x8YSBpbnN0YW5jZW9mIFV8fGEgaW5zdGFuY2VvZiBWfHxhIGluc3RhbmNlb2YgUXx8YSBpbnN0YW5jZW9mIFd8fFgmJmEgaW5zdGFuY2VvZiBYfHxZJiZhIGluc3RhbmNlb2YgWX1mdW5jdGlvbiB5KGEpe3JldHVybiBudWxsPT09YT9udWxsOihjKHgoYSkpLGEucG9seW1lcldyYXBwZXJffHwoYS5wb2x5bWVyV3JhcHBlcl89bmV3KGgoYSkpKGEpKSl9ZnVuY3Rpb24geihhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYyh3KGEpKSxhLmltcGwpfWZ1bmN0aW9uIEEoYSl7cmV0dXJuIGEmJncoYSk/eihhKTphfWZ1bmN0aW9uIEIoYSl7cmV0dXJuIGEmJiF3KGEpP3koYSk6YX1mdW5jdGlvbiBDKGEsYil7bnVsbCE9PWImJihjKHgoYSkpLGModm9pZCAwPT09Ynx8dyhiKSksYS5wb2x5bWVyV3JhcHBlcl89Yil9ZnVuY3Rpb24gRChhLGIsYyl7Wi5nZXQ9YyxLKGEucHJvdG90eXBlLGIsWil9ZnVuY3Rpb24gRShhLGIpe0QoYSxiLGZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5pbXBsW2JdKX0pfWZ1bmN0aW9uIEYoYSxiKXthLmZvckVhY2goZnVuY3Rpb24oYSl7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7dmFyIGE9Qih0aGlzKTtyZXR1cm4gYVtiXS5hcHBseShhLGFyZ3VtZW50cyl9fSl9KX12YXIgRz1uZXcgV2Vha01hcCxIPW5ldyBXZWFrTWFwLEk9T2JqZWN0LmNyZWF0ZShudWxsKSxKPWIoKSxLPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxMPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLE09T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixOPXt2YWx1ZTp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITB9O0wod2luZG93KTt2YXIgTz0vRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxQPXtnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5jdGlvbigpe30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9LFE9d2luZG93LkRPTUltcGxlbWVudGF0aW9uLFI9d2luZG93LkV2ZW50VGFyZ2V0LFM9d2luZG93LkV2ZW50LFQ9d2luZG93Lk5vZGUsVT13aW5kb3cuV2luZG93LFY9d2luZG93LlJhbmdlLFc9d2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxYPXdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQsWT13aW5kb3cuU1ZHRWxlbWVudEluc3RhbmNlLFo9e2dldDp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9O2EuYXNzZXJ0PWMsYS5jb25zdHJ1Y3RvclRhYmxlPUcsYS5kZWZpbmVHZXR0ZXI9RCxhLmRlZmluZVdyYXBHZXR0ZXI9RSxhLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyPUYsYS5pc1dyYXBwZXI9dyxhLmlzV3JhcHBlckZvcj10LGEubWl4aW49ZCxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlPUgsYS5vbmVPZj1mLGEucmVnaXN0ZXJPYmplY3Q9dSxhLnJlZ2lzdGVyV3JhcHBlcj1yLGEucmV3cmFwPUMsYS51bndyYXA9eixhLnVud3JhcElmTmVlZGVkPUEsYS53cmFwPXksYS53cmFwSWZOZWVkZWQ9QixhLndyYXBwZXJzPUl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtnPSExO3ZhciBhPWYuc2xpY2UoMCk7Zj1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdKCl9ZnVuY3Rpb24gYyhhKXtmLnB1c2goYSksZ3x8KGc9ITAsZChiLDApKX12YXIgZCxlPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyLGY9W10sZz0hMTtpZihlKXt2YXIgaD0xLGk9bmV3IGUoYiksaj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShoKTtpLm9ic2VydmUoaix7Y2hhcmFjdGVyRGF0YTohMH0pLGQ9ZnVuY3Rpb24oKXtoPShoKzEpJTIsai5kYXRhPWh9fWVsc2UgZD13aW5kb3cuc2V0SW1tZWRpYXRlfHx3aW5kb3cuc2V0VGltZW91dDthLnNldEVuZE9mTWljcm90YXNrPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtwfHwoayhjKSxwPSEwKX1mdW5jdGlvbiBjKCl7cD0hMTtkbyBmb3IodmFyIGE9by5zbGljZSgpLGI9ITEsYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLGU9ZC50YWtlUmVjb3JkcygpO2YoZCksZS5sZW5ndGgmJihkLmNhbGxiYWNrXyhlLGQpLGI9ITApfXdoaWxlKGIpfWZ1bmN0aW9uIGQoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1uZXcgbS5Ob2RlTGlzdCx0aGlzLnJlbW92ZWROb2Rlcz1uZXcgbS5Ob2RlTGlzdCx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBlKGEsYil7Zm9yKDthO2E9YS5wYXJlbnROb2RlKXt2YXIgYz1uLmdldChhKTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO2Uub3B0aW9ucy5zdWJ0cmVlJiZlLmFkZFRyYW5zaWVudE9ic2VydmVyKGIpfX19ZnVuY3Rpb24gZihhKXtmb3IodmFyIGI9MDtiPGEubm9kZXNfLmxlbmd0aDtiKyspe3ZhciBjPWEubm9kZXNfW2JdLGQ9bi5nZXQoYyk7aWYoIWQpcmV0dXJuO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2Yub2JzZXJ2ZXI9PT1hJiZmLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfX19ZnVuY3Rpb24gZyhhLGMsZSl7Zm9yKHZhciBmPU9iamVjdC5jcmVhdGUobnVsbCksZz1PYmplY3QuY3JlYXRlKG51bGwpLGg9YTtoO2g9aC5wYXJlbnROb2RlKXt2YXIgaT1uLmdldChoKTtpZihpKWZvcih2YXIgaj0wO2o8aS5sZW5ndGg7aisrKXt2YXIgaz1pW2pdLGw9ay5vcHRpb25zO2lmKChoPT09YXx8bC5zdWJ0cmVlKSYmISgiYXR0cmlidXRlcyI9PT1jJiYhbC5hdHRyaWJ1dGVzfHwiYXR0cmlidXRlcyI9PT1jJiZsLmF0dHJpYnV0ZUZpbHRlciYmKG51bGwhPT1lLm5hbWVzcGFjZXx8LTE9PT1sLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGUubmFtZSkpfHwiY2hhcmFjdGVyRGF0YSI9PT1jJiYhbC5jaGFyYWN0ZXJEYXRhfHwiY2hpbGRMaXN0Ij09PWMmJiFsLmNoaWxkTGlzdCkpe3ZhciBtPWsub2JzZXJ2ZXI7ZlttLnVpZF9dPW0sKCJhdHRyaWJ1dGVzIj09PWMmJmwuYXR0cmlidXRlT2xkVmFsdWV8fCJjaGFyYWN0ZXJEYXRhIj09PWMmJmwuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKSYmKGdbbS51aWRfXT1lLm9sZFZhbHVlKX19fXZhciBvPSExO2Zvcih2YXIgcCBpbiBmKXt2YXIgbT1mW3BdLHE9bmV3IGQoYyxhKTsibmFtZSJpbiBlJiYibmFtZXNwYWNlImluIGUmJihxLmF0dHJpYnV0ZU5hbWU9ZS5uYW1lLHEuYXR0cmlidXRlTmFtZXNwYWNlPWUubmFtZXNwYWNlKSxlLmFkZGVkTm9kZXMmJihxLmFkZGVkTm9kZXM9ZS5hZGRlZE5vZGVzKSxlLnJlbW92ZWROb2RlcyYmKHEucmVtb3ZlZE5vZGVzPWUucmVtb3ZlZE5vZGVzKSxlLnByZXZpb3VzU2libGluZyYmKHEucHJldmlvdXNTaWJsaW5nPWUucHJldmlvdXNTaWJsaW5nKSxlLm5leHRTaWJsaW5nJiYocS5uZXh0U2libGluZz1lLm5leHRTaWJsaW5nKSx2b2lkIDAhPT1nW3BdJiYocS5vbGRWYWx1ZT1nW3BdKSxtLnJlY29yZHNfLnB1c2gocSksbz0hMH1vJiZiKCl9ZnVuY3Rpb24gaChhKXtpZih0aGlzLmNoaWxkTGlzdD0hIWEuY2hpbGRMaXN0LHRoaXMuc3VidHJlZT0hIWEuc3VidHJlZSx0aGlzLmF0dHJpYnV0ZXM9ImF0dHJpYnV0ZXMiaW4gYXx8ISgiYXR0cmlidXRlT2xkVmFsdWUiaW4gYXx8ImF0dHJpYnV0ZUZpbHRlciJpbiBhKT8hIWEuYXR0cmlidXRlczohMCx0aGlzLmNoYXJhY3RlckRhdGE9ImNoYXJhY3RlckRhdGFPbGRWYWx1ZSJpbiBhJiYhKCJjaGFyYWN0ZXJEYXRhImluIGEpPyEwOiEhYS5jaGFyYWN0ZXJEYXRhLCF0aGlzLmF0dHJpYnV0ZXMmJihhLmF0dHJpYnV0ZU9sZFZhbHVlfHwiYXR0cmlidXRlRmlsdGVyImluIGEpfHwhdGhpcy5jaGFyYWN0ZXJEYXRhJiZhLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSl0aHJvdyBuZXcgVHlwZUVycm9yO2lmKHRoaXMuY2hhcmFjdGVyRGF0YT0hIWEuY2hhcmFjdGVyRGF0YSx0aGlzLmF0dHJpYnV0ZU9sZFZhbHVlPSEhYS5hdHRyaWJ1dGVPbGRWYWx1ZSx0aGlzLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT0hIWEuY2hhcmFjdGVyRGF0YU9sZFZhbHVlLCJhdHRyaWJ1dGVGaWx0ZXIiaW4gYSl7aWYobnVsbD09YS5hdHRyaWJ1dGVGaWx0ZXJ8fCJvYmplY3QiIT10eXBlb2YgYS5hdHRyaWJ1dGVGaWx0ZXIpdGhyb3cgbmV3IFR5cGVFcnJvcjt0aGlzLmF0dHJpYnV0ZUZpbHRlcj1xLmNhbGwoYS5hdHRyaWJ1dGVGaWx0ZXIpfWVsc2UgdGhpcy5hdHRyaWJ1dGVGaWx0ZXI9bnVsbH1mdW5jdGlvbiBpKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89KytyLG8ucHVzaCh0aGlzKX1mdW5jdGlvbiBqKGEsYixjKXt0aGlzLm9ic2VydmVyPWEsdGhpcy50YXJnZXQ9Yix0aGlzLm9wdGlvbnM9Yyx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W119dmFyIGs9YS5zZXRFbmRPZk1pY3JvdGFzayxsPWEud3JhcElmTmVlZGVkLG09YS53cmFwcGVycyxuPW5ldyBXZWFrTWFwLG89W10scD0hMSxxPUFycmF5LnByb3RvdHlwZS5zbGljZSxyPTA7aS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXthPWwoYSk7dmFyIGMsZD1uZXcgaChiKSxlPW4uZ2V0KGEpO2V8fG4uc2V0KGEsZT1bXSk7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspZVtmXS5vYnNlcnZlcj09PXRoaXMmJihjPWVbZl0sYy5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKSxjLm9wdGlvbnM9ZCk7Y3x8KGM9bmV3IGoodGhpcyxhLGQpLGUucHVzaChjKSx0aGlzLm5vZGVzXy5wdXNoKGEpKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW4uZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19LGoucHJvdG90eXBlPXthZGRUcmFuc2llbnRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZihhIT09dGhpcy50YXJnZXQpe3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGEpO3ZhciBiPW4uZ2V0KGEpO2J8fG4uc2V0KGEsYj1bXSksYi5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylmb3IodmFyIGM9YVtiXSxkPW4uZ2V0KGMpLGU9MDtlPGQubGVuZ3RoO2UrKylpZihkW2VdPT09dGhpcyl7ZC5zcGxpY2UoZSwxKTticmVha319fSxhLmVucXVldWVNdXRhdGlvbj1nLGEucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnM9ZSxhLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9aSxhLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXt0aGlzLnJvb3Q9YSx0aGlzLnBhcmVudD1ifWZ1bmN0aW9uIGMoYSxiKXtpZihhLnRyZWVTY29wZV8hPT1iKXthLnRyZWVTY29wZV89Yjtmb3IodmFyIGQ9YS5zaGFkb3dSb290O2Q7ZD1kLm9sZGVyU2hhZG93Um9vdClkLnRyZWVTY29wZV8ucGFyZW50PWI7Zm9yKHZhciBlPWEuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyljKGUsYil9fWZ1bmN0aW9uIGQoYyl7aWYoYyBpbnN0YW5jZW9mIGEud3JhcHBlcnMuV2luZG93LGMudHJlZVNjb3BlXylyZXR1cm4gYy50cmVlU2NvcGVfO3ZhciBlLGY9Yy5wYXJlbnROb2RlO3JldHVybiBlPWY/ZChmKTpuZXcgYihjLG51bGwpLGMudHJlZVNjb3BlXz1lfWIucHJvdG90eXBlPXtnZXQgcmVuZGVyZXIoKXtyZXR1cm4gdGhpcy5yb290IGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290P2EuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMucm9vdC5ob3N0KTpudWxsfSxjb250YWluczpmdW5jdGlvbihhKXtmb3IoO2E7YT1hLnBhcmVudClpZihhPT09dGhpcylyZXR1cm4hMDtyZXR1cm4hMX19LGEuVHJlZVNjb3BlPWIsYS5nZXRUcmVlU2NvcGU9ZCxhLnNldFRyZWVTY29wZT1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhIGluc3RhbmNlb2YgUS5TaGFkb3dSb290fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIEwoYSkucm9vdH1mdW5jdGlvbiBkKGEsZCl7dmFyIGg9W10saT1hO2ZvcihoLnB1c2goaSk7aTspe3ZhciBqPWcoaSk7aWYoaiYmai5sZW5ndGg+MCl7Zm9yKHZhciBrPTA7azxqLmxlbmd0aDtrKyspe3ZhciBtPWpba107aWYoZihtKSl7dmFyIG49YyhtKSxvPW4ub2xkZXJTaGFkb3dSb290O28mJmgucHVzaChvKX1oLnB1c2gobSl9aT1qW2oubGVuZ3RoLTFdfWVsc2UgaWYoYihpKSl7aWYobChhLGkpJiZlKGQpKWJyZWFrO2k9aS5ob3N0LGgucHVzaChpKX1lbHNlIGk9aS5wYXJlbnROb2RlLGkmJmgucHVzaChpKX1yZXR1cm4gaH1mdW5jdGlvbiBlKGEpe2lmKCFhKXJldHVybiExO3N3aXRjaChhLnR5cGUpe2Nhc2UiYWJvcnQiOmNhc2UiZXJyb3IiOmNhc2Uic2VsZWN0IjpjYXNlImNoYW5nZSI6Y2FzZSJsb2FkIjpjYXNlInJlc2V0IjpjYXNlInJlc2l6ZSI6Y2FzZSJzY3JvbGwiOmNhc2Uic2VsZWN0c3RhcnQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBIVE1MU2hhZG93RWxlbWVudH1mdW5jdGlvbiBnKGIpe3JldHVybiBhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzKGIpfWZ1bmN0aW9uIGgoYSxiKXtpZigwPT09YS5sZW5ndGgpcmV0dXJuIGI7YiBpbnN0YW5jZW9mIFEuV2luZG93JiYoYj1iLmRvY3VtZW50KTtmb3IodmFyIGM9TChiKSxkPWFbMF0sZT1MKGQpLGY9aihjLGUpLGc9MDtnPGEubGVuZ3RoO2crKyl7dmFyIGg9YVtnXTsKaWYoTChoKT09PWYpcmV0dXJuIGh9cmV0dXJuIGFbYS5sZW5ndGgtMV19ZnVuY3Rpb24gaShhKXtmb3IodmFyIGI9W107YTthPWEucGFyZW50KWIucHVzaChhKTtyZXR1cm4gYn1mdW5jdGlvbiBqKGEsYil7Zm9yKHZhciBjPWkoYSksZD1pKGIpLGU9bnVsbDtjLmxlbmd0aD4wJiZkLmxlbmd0aD4wOyl7dmFyIGY9Yy5wb3AoKSxnPWQucG9wKCk7aWYoZiE9PWcpYnJlYWs7ZT1mfXJldHVybiBlfWZ1bmN0aW9uIGsoYSxiLGMpe2IgaW5zdGFuY2VvZiBRLldpbmRvdyYmKGI9Yi5kb2N1bWVudCk7dmFyIGUsZj1MKGIpLGc9TChjKSxoPWQoYyxhKSxlPWooZixnKTtlfHwoZT1nLnJvb3QpO2Zvcih2YXIgaT1lO2k7aT1pLnBhcmVudClmb3IodmFyIGs9MDtrPGgubGVuZ3RoO2srKyl7dmFyIGw9aFtrXTtpZihMKGwpPT09aSlyZXR1cm4gbH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBsKGEsYil7cmV0dXJuIEwoYSk9PT1MKGIpfWZ1bmN0aW9uIG0oYSl7aWYoIVMuZ2V0KGEpJiYoUy5zZXQoYSwhMCksbihQKGEpLFAoYS50YXJnZXQpKSxKKSl7dmFyIGI9Sjt0aHJvdyBKPW51bGwsYn19ZnVuY3Rpb24gbihiLGMpe2lmKFQuZ2V0KGIpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZFN0YXRlRXJyb3IiKTtULnNldChiLCEwKSxhLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgZSxmLGcsaD1iLnR5cGU7aWYoImxvYWQiPT09aCYmIWIuYnViYmxlcyl7dmFyIGk9YztpIGluc3RhbmNlb2YgUS5Eb2N1bWVudCYmKGc9aS5kZWZhdWx0VmlldykmJihmPWksZT1bXSl9aWYoIWUpaWYoYyBpbnN0YW5jZW9mIFEuV2luZG93KWc9YyxlPVtdO2Vsc2UgaWYoZT1kKGMsYiksImxvYWQiIT09Yi50eXBlKXt2YXIgaT1lW2UubGVuZ3RoLTFdO2kgaW5zdGFuY2VvZiBRLkRvY3VtZW50JiYoZz1pLmRlZmF1bHRWaWV3KX1yZXR1cm4gXy5zZXQoYixlKSxvKGIsZSxnLGYpJiZwKGIsZSxnLGYpJiZxKGIsZSxnLGYpLFguc2V0KGIsYWIpLFYuZGVsZXRlKGIsbnVsbCksVC5kZWxldGUoYiksYi5kZWZhdWx0UHJldmVudGVkfWZ1bmN0aW9uIG8oYSxiLGMsZCl7dmFyIGU9YmI7aWYoYyYmIXIoYyxhLGUsYixkKSlyZXR1cm4hMTtmb3IodmFyIGY9Yi5sZW5ndGgtMTtmPjA7Zi0tKWlmKCFyKGJbZl0sYSxlLGIsZCkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gcChhLGIsYyxkKXt2YXIgZT1jYixmPWJbMF18fGM7cmV0dXJuIHIoZixhLGUsYixkKX1mdW5jdGlvbiBxKGEsYixjLGQpe2Zvcih2YXIgZT1kYixmPTE7ZjxiLmxlbmd0aDtmKyspaWYoIXIoYltmXSxhLGUsYixkKSlyZXR1cm47YyYmYi5sZW5ndGg+MCYmcihjLGEsZSxiLGQpfWZ1bmN0aW9uIHIoYSxiLGMsZCxlKXt2YXIgZj1SLmdldChhKTtpZighZilyZXR1cm4hMDt2YXIgZz1lfHxoKGQsYSk7aWYoZz09PWEpe2lmKGM9PT1iYilyZXR1cm4hMDtjPT09ZGImJihjPWNiKX1lbHNlIGlmKGM9PT1kYiYmIWIuYnViYmxlcylyZXR1cm4hMDtpZigicmVsYXRlZFRhcmdldCJpbiBiKXt2YXIgaT1PKGIpLGo9aS5yZWxhdGVkVGFyZ2V0O2lmKGope2lmKGogaW5zdGFuY2VvZiBPYmplY3QmJmouYWRkRXZlbnRMaXN0ZW5lcil7dmFyIGw9UChqKSxtPWsoYixhLGwpO2lmKG09PT1nKXJldHVybiEwfWVsc2UgbT1udWxsO1cuc2V0KGIsbSl9fVguc2V0KGIsYyk7dmFyIG49Yi50eXBlLG89ITE7VS5zZXQoYixnKSxWLnNldChiLGEpO2Zvcih2YXIgcD0wLHE9Zi5sZW5ndGg7cT5wO3ArKyl7dmFyIHI9ZltwXTtpZihyLnJlbW92ZWQpbz0hMDtlbHNlIGlmKCEoci50eXBlIT09bnx8IXIuY2FwdHVyZSYmYz09PWJifHxyLmNhcHR1cmUmJmM9PT1kYikpdHJ5e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiByLmhhbmRsZXI/ci5oYW5kbGVyLmNhbGwoYSxiKTpyLmhhbmRsZXIuaGFuZGxlRXZlbnQoYiksWi5nZXQoYikpcmV0dXJuITF9Y2F0Y2gocyl7Snx8KEo9cyl9fWlmKG8pe3ZhciB0PWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgcD0wO3A8dC5sZW5ndGg7cCsrKXRbcF0ucmVtb3ZlZHx8Zi5wdXNoKHRbcF0pfXJldHVybiFZLmdldChiKX1mdW5jdGlvbiBzKGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB0KGEsYil7aWYoIShhIGluc3RhbmNlb2YgZWIpKXJldHVybiBQKHgoZWIsIkV2ZW50IixhLGIpKTt2YXIgYz1hO3JldHVybiBwYnx8ImJlZm9yZXVubG9hZCIhPT1jLnR5cGU/dm9pZCh0aGlzLmltcGw9Yyk6bmV3IHkoYyl9ZnVuY3Rpb24gdShhKXtyZXR1cm4gYSYmYS5yZWxhdGVkVGFyZ2V0P09iamVjdC5jcmVhdGUoYSx7cmVsYXRlZFRhcmdldDp7dmFsdWU6TyhhLnJlbGF0ZWRUYXJnZXQpfX0pOmF9ZnVuY3Rpb24gdihhLGIsYyl7dmFyIGQ9d2luZG93W2FdLGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYiBpbnN0YW5jZW9mIGQ/dm9pZCh0aGlzLmltcGw9Yik6UCh4KGQsYSxiLGMpKX07aWYoZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksYyYmTShlLnByb3RvdHlwZSxjKSxkKXRyeXtOKGQsZSxuZXcgZCgidGVtcCIpKX1jYXRjaChmKXtOKGQsZSxkb2N1bWVudC5jcmVhdGVFdmVudChhKSl9cmV0dXJuIGV9ZnVuY3Rpb24gdyhhLGIpe3JldHVybiBmdW5jdGlvbigpe2FyZ3VtZW50c1tiXT1PKGFyZ3VtZW50c1tiXSk7dmFyIGM9Tyh0aGlzKTtjW2FdLmFwcGx5KGMsYXJndW1lbnRzKX19ZnVuY3Rpb24geChhLGIsYyxkKXtpZihuYilyZXR1cm4gbmV3IGEoYyx1KGQpKTt2YXIgZT1PKGRvY3VtZW50LmNyZWF0ZUV2ZW50KGIpKSxmPW1iW2JdLGc9W2NdO3JldHVybiBPYmplY3Qua2V5cyhmKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPW51bGwhPWQmJmEgaW4gZD9kW2FdOmZbYV07InJlbGF0ZWRUYXJnZXQiPT09YSYmKGI9TyhiKSksZy5wdXNoKGIpfSksZVsiaW5pdCIrYl0uYXBwbHkoZSxnKSxlfWZ1bmN0aW9uIHkoYSl7dC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24geihhKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYT8hMDphJiZhLmhhbmRsZUV2ZW50fWZ1bmN0aW9uIEEoYSl7c3dpdGNoKGEpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjpjYXNlIkRPTUF0dHJpYnV0ZU5hbWVDaGFuZ2VkIjpjYXNlIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCI6Y2FzZSJET01FbGVtZW50TmFtZUNoYW5nZWQiOmNhc2UiRE9NTm9kZUluc2VydGVkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZEludG9Eb2N1bWVudCI6Y2FzZSJET01Ob2RlUmVtb3ZlZCI6Y2FzZSJET01Ob2RlUmVtb3ZlZEZyb21Eb2N1bWVudCI6Y2FzZSJET01TdWJ0cmVlTW9kaWZpZWQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIEIoYSl7dGhpcy5pbXBsPWF9ZnVuY3Rpb24gQyhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFEuU2hhZG93Um9vdCYmKGE9YS5ob3N0KSxPKGEpfWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1SLmdldChhKTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKCFjW2RdLnJlbW92ZWQmJmNbZF0udHlwZT09PWIpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gRShhLGIpe2Zvcih2YXIgYz1PKGEpO2M7Yz1jLnBhcmVudE5vZGUpaWYoRChQKGMpLGIpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEYoYSl7SyhhLHJiKX1mdW5jdGlvbiBHKGIsYyxlLGYpe2EucmVuZGVyQWxsUGVuZGluZygpO3ZhciBnPVAoc2IuY2FsbChjLmltcGwsZSxmKSk7aWYoIWcpcmV0dXJuIG51bGw7dmFyIGk9ZChnLG51bGwpO3JldHVybiBoKGksYil9ZnVuY3Rpb24gSChhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj0kLmdldCh0aGlzKTtyZXR1cm4gYiYmYlthXSYmYlthXS52YWx1ZXx8bnVsbH19ZnVuY3Rpb24gSShhKXt2YXIgYj1hLnNsaWNlKDIpO3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD0kLmdldCh0aGlzKTtkfHwoZD1PYmplY3QuY3JlYXRlKG51bGwpLCQuc2V0KHRoaXMsZCkpO3ZhciBlPWRbYV07aWYoZSYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGIsZS53cmFwcGVkLCExKSwiZnVuY3Rpb24iPT10eXBlb2YgYyl7dmFyIGY9ZnVuY3Rpb24oYil7dmFyIGQ9Yy5jYWxsKHRoaXMsYik7ZD09PSExP2IucHJldmVudERlZmF1bHQoKToib25iZWZvcmV1bmxvYWQiPT09YSYmInN0cmluZyI9PXR5cGVvZiBkJiYoYi5yZXR1cm5WYWx1ZT1kKX07dGhpcy5hZGRFdmVudExpc3RlbmVyKGIsZiwhMSksZFthXT17dmFsdWU6Yyx3cmFwcGVkOmZ9fX19dmFyIEosSz1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLEw9YS5nZXRUcmVlU2NvcGUsTT1hLm1peGluLE49YS5yZWdpc3RlcldyYXBwZXIsTz1hLnVud3JhcCxQPWEud3JhcCxRPWEud3JhcHBlcnMsUj0obmV3IFdlYWtNYXAsbmV3IFdlYWtNYXApLFM9bmV3IFdlYWtNYXAsVD1uZXcgV2Vha01hcCxVPW5ldyBXZWFrTWFwLFY9bmV3IFdlYWtNYXAsVz1uZXcgV2Vha01hcCxYPW5ldyBXZWFrTWFwLFk9bmV3IFdlYWtNYXAsWj1uZXcgV2Vha01hcCwkPW5ldyBXZWFrTWFwLF89bmV3IFdlYWtNYXAsYWI9MCxiYj0xLGNiPTIsZGI9MztzLnByb3RvdHlwZT17ZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmhhbmRsZXI9PT1hLmhhbmRsZXImJnRoaXMudHlwZT09PWEudHlwZSYmdGhpcy5jYXB0dXJlPT09YS5jYXB0dXJlfSxnZXQgcmVtb3ZlZCgpe3JldHVybiBudWxsPT09dGhpcy5oYW5kbGVyfSxyZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXI9bnVsbH19O3ZhciBlYj13aW5kb3cuRXZlbnQ7ZWIucHJvdG90eXBlLnBvbHltZXJCbGFja0xpc3RfPXtyZXR1cm5WYWx1ZTohMCxrZXlMb2NhdGlvbjohMH0sdC5wcm90b3R5cGU9e2dldCB0YXJnZXQoKXtyZXR1cm4gVS5nZXQodGhpcyl9LGdldCBjdXJyZW50VGFyZ2V0KCl7cmV0dXJuIFYuZ2V0KHRoaXMpfSxnZXQgZXZlbnRQaGFzZSgpe3JldHVybiBYLmdldCh0aGlzKX0sZ2V0IHBhdGgoKXt2YXIgYT1fLmdldCh0aGlzKTtyZXR1cm4gYT9hLnNsaWNlKCk6W119LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe1kuc2V0KHRoaXMsITApfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtZLnNldCh0aGlzLCEwKSxaLnNldCh0aGlzLCEwKX19LE4oZWIsdCxkb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSk7dmFyIGZiPXYoIlVJRXZlbnQiLHQpLGdiPXYoIkN1c3RvbUV2ZW50Iix0KSxoYj17Z2V0IHJlbGF0ZWRUYXJnZXQoKXt2YXIgYT1XLmdldCh0aGlzKTtyZXR1cm4gdm9pZCAwIT09YT9hOlAoTyh0aGlzKS5yZWxhdGVkVGFyZ2V0KX19LGliPU0oe2luaXRNb3VzZUV2ZW50OncoImluaXRNb3VzZUV2ZW50IiwxNCl9LGhiKSxqYj1NKHtpbml0Rm9jdXNFdmVudDp3KCJpbml0Rm9jdXNFdmVudCIsNSl9LGhiKSxrYj12KCJNb3VzZUV2ZW50IixmYixpYiksbGI9digiRm9jdXNFdmVudCIsZmIsamIpLG1iPU9iamVjdC5jcmVhdGUobnVsbCksbmI9ZnVuY3Rpb24oKXt0cnl7bmV3IHdpbmRvdy5Gb2N1c0V2ZW50KCJmb2N1cyIpfWNhdGNoKGEpe3JldHVybiExfXJldHVybiEwfSgpO2lmKCFuYil7dmFyIG9iPWZ1bmN0aW9uKGEsYixjKXtpZihjKXt2YXIgZD1tYltjXTtiPU0oTSh7fSxkKSxiKX1tYlthXT1ifTtvYigiRXZlbnQiLHtidWJibGVzOiExLGNhbmNlbGFibGU6ITF9KSxvYigiQ3VzdG9tRXZlbnQiLHtkZXRhaWw6bnVsbH0sIkV2ZW50Iiksb2IoIlVJRXZlbnQiLHt2aWV3Om51bGwsZGV0YWlsOjB9LCJFdmVudCIpLG9iKCJNb3VzZUV2ZW50Iix7c2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpLG9iKCJGb2N1c0V2ZW50Iix7cmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpfXZhciBwYj13aW5kb3cuQmVmb3JlVW5sb2FkRXZlbnQ7eS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSksTSh5LnByb3RvdHlwZSx7Z2V0IHJldHVyblZhbHVlKCl7cmV0dXJuIHRoaXMuaW1wbC5yZXR1cm5WYWx1ZX0sc2V0IHJldHVyblZhbHVlKGEpe3RoaXMuaW1wbC5yZXR1cm5WYWx1ZT1hfX0pLHBiJiZOKHBiLHkpO3ZhciBxYj13aW5kb3cuRXZlbnRUYXJnZXQscmI9WyJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiXTtbTm9kZSxXaW5kb3ddLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5wcm90b3R5cGU7cmIuZm9yRWFjaChmdW5jdGlvbihhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYixhKyJfIix7dmFsdWU6YlthXX0pfSl9KSxCLnByb3RvdHlwZT17YWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7aWYoeihiKSYmIUEoYSkpe3ZhciBkPW5ldyBzKGEsYixjKSxlPVIuZ2V0KHRoaXMpO2lmKGUpe2Zvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKWlmKGQuZXF1YWxzKGVbZl0pKXJldHVybn1lbHNlIGU9W10sUi5zZXQodGhpcyxlKTtlLnB1c2goZCk7dmFyIGc9Qyh0aGlzKTtnLmFkZEV2ZW50TGlzdGVuZXJfKGEsbSwhMCl9fSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtjPUJvb2xlYW4oYyk7dmFyIGQ9Ui5nZXQodGhpcyk7aWYoZCl7Zm9yKHZhciBlPTAsZj0hMSxnPTA7ZzxkLmxlbmd0aDtnKyspZFtnXS50eXBlPT09YSYmZFtnXS5jYXB0dXJlPT09YyYmKGUrKyxkW2ddLmhhbmRsZXI9PT1iJiYoZj0hMCxkW2ddLnJlbW92ZSgpKSk7aWYoZiYmMT09PWUpe3ZhciBoPUModGhpcyk7aC5yZW1vdmVFdmVudExpc3RlbmVyXyhhLG0sITApfX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYil7dmFyIGM9TyhiKSxkPWMudHlwZTtTLnNldChjLCExKSxhLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgZTtFKHRoaXMsZCl8fChlPWZ1bmN0aW9uKCl7fSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZCxlLCEwKSk7dHJ5e3JldHVybiBPKHRoaXMpLmRpc3BhdGNoRXZlbnRfKGMpfWZpbmFsbHl7ZSYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGQsZSwhMCl9fX0scWImJk4ocWIsQik7dmFyIHNiPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQ7YS5lbGVtZW50RnJvbVBvaW50PUcsYS5nZXRFdmVudEhhbmRsZXJHZXR0ZXI9SCxhLmdldEV2ZW50SGFuZGxlclNldHRlcj1JLGEud3JhcEV2ZW50VGFyZ2V0TWV0aG9kcz1GLGEud3JhcHBlcnMuQmVmb3JlVW5sb2FkRXZlbnQ9eSxhLndyYXBwZXJzLkN1c3RvbUV2ZW50PWdiLGEud3JhcHBlcnMuRXZlbnQ9dCxhLndyYXBwZXJzLkV2ZW50VGFyZ2V0PUIsYS53cmFwcGVycy5Gb2N1c0V2ZW50PWxiLGEud3JhcHBlcnMuTW91c2VFdmVudD1rYixhLndyYXBwZXJzLlVJRXZlbnQ9ZmJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLG8pfWZ1bmN0aW9uIGMoYSl7dGhpcy5pbXBsPWF9ZnVuY3Rpb24gZCgpe3RoaXMubGVuZ3RoPTAsYih0aGlzLCJsZW5ndGgiKX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYj1uZXcgZCxlPTA7ZTxhLmxlbmd0aDtlKyspYltlXT1uZXcgYyhhW2VdKTtyZXR1cm4gYi5sZW5ndGg9ZSxifWZ1bmN0aW9uIGYoYSl7Zy5jYWxsKHRoaXMsYSl9dmFyIGc9YS53cmFwcGVycy5VSUV2ZW50LGg9YS5taXhpbixpPWEucmVnaXN0ZXJXcmFwcGVyLGo9YS51bndyYXAsaz1hLndyYXAsbD13aW5kb3cuVG91Y2hFdmVudDtpZihsKXt2YXIgbTt0cnl7bT1kb2N1bWVudC5jcmVhdGVFdmVudCgiVG91Y2hFdmVudCIpfWNhdGNoKG4pe3JldHVybn12YXIgbz17ZW51bWVyYWJsZTohMX07Yy5wcm90b3R5cGU9e2dldCB0YXJnZXQoKXtyZXR1cm4gayh0aGlzLmltcGwudGFyZ2V0KX19O3ZhciBwPXtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxnZXQ6bnVsbH07WyJjbGllbnRYIiwiY2xpZW50WSIsInNjcmVlblgiLCJzY3JlZW5ZIiwicGFnZVgiLCJwYWdlWSIsImlkZW50aWZpZXIiLCJ3ZWJraXRSYWRpdXNYIiwid2Via2l0UmFkaXVzWSIsIndlYmtpdFJvdGF0aW9uQW5nbGUiLCJ3ZWJraXRGb3JjZSJdLmZvckVhY2goZnVuY3Rpb24oYSl7cC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYy5wcm90b3R5cGUsYSxwKX0pLGQucHJvdG90eXBlPXtpdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzW2FdfX0sZi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSksaChmLnByb3RvdHlwZSx7Z2V0IHRvdWNoZXMoKXtyZXR1cm4gZShqKHRoaXMpLnRvdWNoZXMpfSxnZXQgdGFyZ2V0VG91Y2hlcygpe3JldHVybiBlKGoodGhpcykudGFyZ2V0VG91Y2hlcyl9LGdldCBjaGFuZ2VkVG91Y2hlcygpe3JldHVybiBlKGoodGhpcykuY2hhbmdlZFRvdWNoZXMpfSxpbml0VG91Y2hFdmVudDpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiTm90IGltcGxlbWVudGVkIil9fSksaShsLGYsbSksYS53cmFwcGVycy5Ub3VjaD1jLGEud3JhcHBlcnMuVG91Y2hFdmVudD1mLGEud3JhcHBlcnMuVG91Y2hMaXN0PWR9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYixnKX1mdW5jdGlvbiBjKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGQoYSl7aWYobnVsbD09YSlyZXR1cm4gYTtmb3IodmFyIGI9bmV3IGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyliW2RdPWYoYVtkXSk7cmV0dXJuIGIubGVuZ3RoPWUsYn1mdW5jdGlvbiBlKGEsYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX12YXIgZj1hLndyYXAsZz17ZW51bWVyYWJsZTohMX07Yy5wcm90b3R5cGU9e2l0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19fSxiKGMucHJvdG90eXBlLCJpdGVtIiksYS53cmFwcGVycy5Ob2RlTGlzdD1jLGEuYWRkV3JhcE5vZGVMaXN0TWV0aG9kPWUsYS53cmFwTm9kZUxpc3Q9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7YS53cmFwSFRNTENvbGxlY3Rpb249YS53cmFwTm9kZUxpc3QsYS53cmFwcGVycy5IVE1MQ29sbGVjdGlvbj1hLndyYXBwZXJzLk5vZGVMaXN0fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe0EoYSBpbnN0YW5jZW9mIHcpfWZ1bmN0aW9uIGMoYSl7dmFyIGI9bmV3IHk7cmV0dXJuIGJbMF09YSxiLmxlbmd0aD0xLGJ9ZnVuY3Rpb24gZChhLGIsYyl7QyhiLCJjaGlsZExpc3QiLHtyZW1vdmVkTm9kZXM6YyxwcmV2aW91c1NpYmxpbmc6YS5wcmV2aW91c1NpYmxpbmcsbmV4dFNpYmxpbmc6YS5uZXh0U2libGluZ30pfWZ1bmN0aW9uIGUoYSxiKXtDKGEsImNoaWxkTGlzdCIse3JlbW92ZWROb2RlczpifSl9ZnVuY3Rpb24gZihhLGIsZCxlKXtpZihhIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7dmFyIGY9aChhKTtPPSEwO2Zvcih2YXIgZz1mLmxlbmd0aC0xO2c+PTA7Zy0tKWEucmVtb3ZlQ2hpbGQoZltnXSksZltnXS5wYXJlbnROb2RlXz1iO089ITE7Zm9yKHZhciBnPTA7ZzxmLmxlbmd0aDtnKyspZltnXS5wcmV2aW91c1NpYmxpbmdfPWZbZy0xXXx8ZCxmW2ddLm5leHRTaWJsaW5nXz1mW2crMV18fGU7cmV0dXJuIGQmJihkLm5leHRTaWJsaW5nXz1mWzBdKSxlJiYoZS5wcmV2aW91c1NpYmxpbmdfPWZbZi5sZW5ndGgtMV0pLGZ9dmFyIGY9YyhhKSxpPWEucGFyZW50Tm9kZTtyZXR1cm4gaSYmaS5yZW1vdmVDaGlsZChhKSxhLnBhcmVudE5vZGVfPWIsYS5wcmV2aW91c1NpYmxpbmdfPWQsYS5uZXh0U2libGluZ189ZSxkJiYoZC5uZXh0U2libGluZ189YSksZSYmKGUucHJldmlvdXNTaWJsaW5nXz1hKSxmfWZ1bmN0aW9uIGcoYSl7aWYoYSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpcmV0dXJuIGgoYSk7dmFyIGI9YyhhKSxlPWEucGFyZW50Tm9kZTtyZXR1cm4gZSYmZChhLGUsYiksYn1mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYj1uZXcgeSxjPTAsZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYltjKytdPWQ7cmV0dXJuIGIubGVuZ3RoPWMsZShhLGIpLGJ9ZnVuY3Rpb24gaShhKXtyZXR1cm4gYX1mdW5jdGlvbiBqKGEsYil7SShhLGIpLGEubm9kZUlzSW5zZXJ0ZWRfKCl9ZnVuY3Rpb24gayhhLGIpe2Zvcih2YXIgYz1EKGIpLGQ9MDtkPGEubGVuZ3RoO2QrKylqKGFbZF0sYyl9ZnVuY3Rpb24gbChhKXtJKGEsbmV3IHooYSxudWxsKSl9ZnVuY3Rpb24gbShhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylsKGFbYl0pfWZ1bmN0aW9uIG4oYSxiKXt2YXIgYz1hLm5vZGVUeXBlPT09dy5ET0NVTUVOVF9OT0RFP2E6YS5vd25lckRvY3VtZW50O2MhPT1iLm93bmVyRG9jdW1lbnQmJmMuYWRvcHROb2RlKGIpfWZ1bmN0aW9uIG8oYixjKXtpZihjLmxlbmd0aCl7dmFyIGQ9Yi5vd25lckRvY3VtZW50O2lmKGQhPT1jWzBdLm93bmVyRG9jdW1lbnQpZm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspYS5hZG9wdE5vZGVOb1JlbW92ZShjW2VdLGQpfX1mdW5jdGlvbiBwKGEsYil7byhhLGIpO3ZhciBjPWIubGVuZ3RoO2lmKDE9PT1jKXJldHVybiBKKGJbMF0pO2Zvcih2YXIgZD1KKGEub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGU9MDtjPmU7ZSsrKWQuYXBwZW5kQ2hpbGQoSihiW2VdKSk7cmV0dXJuIGR9ZnVuY3Rpb24gcShhKXtpZih2b2lkIDAhPT1hLmZpcnN0Q2hpbGRfKWZvcih2YXIgYj1hLmZpcnN0Q2hpbGRfO2I7KXt2YXIgYz1iO2I9Yi5uZXh0U2libGluZ18sYy5wYXJlbnROb2RlXz1jLnByZXZpb3VzU2libGluZ189Yy5uZXh0U2libGluZ189dm9pZCAwfWEuZmlyc3RDaGlsZF89YS5sYXN0Q2hpbGRfPXZvaWQgMH1mdW5jdGlvbiByKGEpe2lmKGEuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7Yjspe0EoYi5wYXJlbnROb2RlPT09YSk7dmFyIGM9Yi5uZXh0U2libGluZyxkPUooYiksZT1kLnBhcmVudE5vZGU7ZSYmVi5jYWxsKGUsZCksYi5wcmV2aW91c1NpYmxpbmdfPWIubmV4dFNpYmxpbmdfPWIucGFyZW50Tm9kZV89bnVsbCxiPWN9YS5maXJzdENoaWxkXz1hLmxhc3RDaGlsZF89bnVsbH1lbHNlIGZvcih2YXIgYyxmPUooYSksZz1mLmZpcnN0Q2hpbGQ7ZzspYz1nLm5leHRTaWJsaW5nLFYuY2FsbChmLGcpLGc9Y31mdW5jdGlvbiBzKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX1mdW5jdGlvbiB0KGEpe2Zvcih2YXIgYixjPTA7YzxhLmxlbmd0aDtjKyspYj1hW2NdLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKX1mdW5jdGlvbiB1KGEsYixjKXt2YXIgZDtpZihkPUwoYz9QLmNhbGwoYyxhLmltcGwsITEpOlEuY2FsbChhLmltcGwsITEpKSxiKXtmb3IodmFyIGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWQuYXBwZW5kQ2hpbGQodShlLCEwLGMpKTtpZihhIGluc3RhbmNlb2YgTi5IVE1MVGVtcGxhdGVFbGVtZW50KWZvcih2YXIgZj1kLmNvbnRlbnQsZT1hLmNvbnRlbnQuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylmLmFwcGVuZENoaWxkKHUoZSwhMCxjKSl9cmV0dXJuIGR9ZnVuY3Rpb24gdihhLGIpe2lmKCFifHxEKGEpIT09RChiKSlyZXR1cm4hMTtmb3IodmFyIGM9YjtjO2M9Yy5wYXJlbnROb2RlKWlmKGM9PT1hKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHcoYSl7QShhIGluc3RhbmNlb2YgUikseC5jYWxsKHRoaXMsYSksdGhpcy5wYXJlbnROb2RlXz12b2lkIDAsdGhpcy5maXJzdENoaWxkXz12b2lkIDAsdGhpcy5sYXN0Q2hpbGRfPXZvaWQgMCx0aGlzLm5leHRTaWJsaW5nXz12b2lkIDAsdGhpcy5wcmV2aW91c1NpYmxpbmdfPXZvaWQgMCx0aGlzLnRyZWVTY29wZV89dm9pZCAwfXZhciB4PWEud3JhcHBlcnMuRXZlbnRUYXJnZXQseT1hLndyYXBwZXJzLk5vZGVMaXN0LHo9YS5UcmVlU2NvcGUsQT1hLmFzc2VydCxCPWEuZGVmaW5lV3JhcEdldHRlcixDPWEuZW5xdWV1ZU11dGF0aW9uLEQ9YS5nZXRUcmVlU2NvcGUsRT1hLmlzV3JhcHBlcixGPWEubWl4aW4sRz1hLnJlZ2lzdGVyVHJhbnNpZW50T2JzZXJ2ZXJzLEg9YS5yZWdpc3RlcldyYXBwZXIsST1hLnNldFRyZWVTY29wZSxKPWEudW53cmFwLEs9YS51bndyYXBJZk5lZWRlZCxMPWEud3JhcCxNPWEud3JhcElmTmVlZGVkLE49YS53cmFwcGVycyxPPSExLFA9ZG9jdW1lbnQuaW1wb3J0Tm9kZSxRPXdpbmRvdy5Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGUsUj13aW5kb3cuTm9kZSxTPXdpbmRvdy5Eb2N1bWVudEZyYWdtZW50LFQ9KFIucHJvdG90eXBlLmFwcGVuZENoaWxkLFIucHJvdG90eXBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSxVPVIucHJvdG90eXBlLmluc2VydEJlZm9yZSxWPVIucHJvdG90eXBlLnJlbW92ZUNoaWxkLFc9Ui5wcm90b3R5cGUucmVwbGFjZUNoaWxkLFg9L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksWT1YP2Z1bmN0aW9uKGEsYil7dHJ5e1YuY2FsbChhLGIpfWNhdGNoKGMpe2lmKCEoYSBpbnN0YW5jZW9mIFMpKXRocm93IGN9fTpmdW5jdGlvbihhLGIpe1YuY2FsbChhLGIpfTt3LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSxGKHcucHJvdG90eXBlLHthcHBlbmRDaGlsZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUoYSxudWxsKX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGEsYyl7YihhKTt2YXIgZDtjP0UoYyk/ZD1KKGMpOihkPWMsYz1MKGQpKTooYz1udWxsLGQ9bnVsbCksYyYmQShjLnBhcmVudE5vZGU9PT10aGlzKTt2YXIgZSxoPWM/Yy5wcmV2aW91c1NpYmxpbmc6dGhpcy5sYXN0Q2hpbGQsaT0hdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSYmIXMoYSk7aWYoZT1pP2coYSk6ZihhLHRoaXMsaCxjKSxpKW4odGhpcyxhKSxxKHRoaXMpLFUuY2FsbCh0aGlzLmltcGwsSihhKSxkKTtlbHNle2h8fCh0aGlzLmZpcnN0Q2hpbGRfPWVbMF0pLGN8fCh0aGlzLmxhc3RDaGlsZF89ZVtlLmxlbmd0aC0xXSx2b2lkIDA9PT10aGlzLmZpcnN0Q2hpbGRfJiYodGhpcy5maXJzdENoaWxkXz10aGlzLmZpcnN0Q2hpbGQpKTt2YXIgaj1kP2QucGFyZW50Tm9kZTp0aGlzLmltcGw7aj9VLmNhbGwoaixwKHRoaXMsZSksZCk6byh0aGlzLGUpfXJldHVybiBDKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6ZSxuZXh0U2libGluZzpjLHByZXZpb3VzU2libGluZzpofSksayhlLHRoaXMpLGF9LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGEpe2lmKGIoYSksYS5wYXJlbnROb2RlIT09dGhpcyl7Zm9yKHZhciBkPSExLGU9KHRoaXMuY2hpbGROb2Rlcyx0aGlzLmZpcnN0Q2hpbGQpO2U7ZT1lLm5leHRTaWJsaW5nKWlmKGU9PT1hKXtkPSEwO2JyZWFrfWlmKCFkKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpfXZhciBmPUooYSksZz1hLm5leHRTaWJsaW5nLGg9YS5wcmV2aW91c1NpYmxpbmc7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7dmFyIGk9dGhpcy5maXJzdENoaWxkLGo9dGhpcy5sYXN0Q2hpbGQsaz1mLnBhcmVudE5vZGU7ayYmWShrLGYpLGk9PT1hJiYodGhpcy5maXJzdENoaWxkXz1nKSxqPT09YSYmKHRoaXMubGFzdENoaWxkXz1oKSxoJiYoaC5uZXh0U2libGluZ189ZyksZyYmKGcucHJldmlvdXNTaWJsaW5nXz1oKSxhLnByZXZpb3VzU2libGluZ189YS5uZXh0U2libGluZ189YS5wYXJlbnROb2RlXz12b2lkIDB9ZWxzZSBxKHRoaXMpLFkodGhpcy5pbXBsLGYpO3JldHVybiBPfHxDKHRoaXMsImNoaWxkTGlzdCIse3JlbW92ZWROb2RlczpjKGEpLG5leHRTaWJsaW5nOmcscHJldmlvdXNTaWJsaW5nOmh9KSxHKHRoaXMsYSksYX0scmVwbGFjZUNoaWxkOmZ1bmN0aW9uKGEsZCl7YihhKTt2YXIgZTtpZihFKGQpP2U9SihkKTooZT1kLGQ9TChlKSksZC5wYXJlbnROb2RlIT09dGhpcyl0aHJvdyBuZXcgRXJyb3IoIk5vdEZvdW5kRXJyb3IiKTt2YXIgaCxpPWQubmV4dFNpYmxpbmcsaj1kLnByZXZpb3VzU2libGluZyxtPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhcyhhKTtyZXR1cm4gbT9oPWcoYSk6KGk9PT1hJiYoaT1hLm5leHRTaWJsaW5nKSxoPWYoYSx0aGlzLGosaSkpLG0/KG4odGhpcyxhKSxxKHRoaXMpLFcuY2FsbCh0aGlzLmltcGwsSihhKSxlKSk6KHRoaXMuZmlyc3RDaGlsZD09PWQmJih0aGlzLmZpcnN0Q2hpbGRfPWhbMF0pLHRoaXMubGFzdENoaWxkPT09ZCYmKHRoaXMubGFzdENoaWxkXz1oW2gubGVuZ3RoLTFdKSxkLnByZXZpb3VzU2libGluZ189ZC5uZXh0U2libGluZ189ZC5wYXJlbnROb2RlXz12b2lkIDAsZS5wYXJlbnROb2RlJiZXLmNhbGwoZS5wYXJlbnROb2RlLHAodGhpcyxoKSxlKSksQyh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmgscmVtb3ZlZE5vZGVzOmMoZCksbmV4dFNpYmxpbmc6aSxwcmV2aW91c1NpYmxpbmc6an0pLGwoZCksayhoLHRoaXMpLGR9LG5vZGVJc0luc2VydGVkXzpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYS5ub2RlSXNJbnNlcnRlZF8oKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86TCh0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBmaXJzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZmlyc3RDaGlsZF8/dGhpcy5maXJzdENoaWxkXzpMKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmxhc3RDaGlsZF8/dGhpcy5sYXN0Q2hpbGRfOkwodGhpcy5pbXBsLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpMKHRoaXMuaW1wbC5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5wcmV2aW91c1NpYmxpbmdfP3RoaXMucHJldmlvdXNTaWJsaW5nXzpMKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgcGFyZW50RWxlbWVudCgpe2Zvcih2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5ub2RlVHlwZSE9PXcuRUxFTUVOVF9OT0RFOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX0sZ2V0IHRleHRDb250ZW50KCl7Zm9yKHZhciBhPSIiLGI9dGhpcy5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKWIubm9kZVR5cGUhPXcuQ09NTUVOVF9OT0RFJiYoYSs9Yi50ZXh0Q29udGVudCk7cmV0dXJuIGF9LHNldCB0ZXh0Q29udGVudChhKXt2YXIgYj1pKHRoaXMuY2hpbGROb2Rlcyk7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7aWYocih0aGlzKSwiIiE9PWEpe3ZhciBjPXRoaXMuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpO3RoaXMuYXBwZW5kQ2hpbGQoYyl9fWVsc2UgcSh0aGlzKSx0aGlzLmltcGwudGV4dENvbnRlbnQ9YTt2YXIgZD1pKHRoaXMuY2hpbGROb2Rlcyk7Qyh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmQscmVtb3ZlZE5vZGVzOmJ9KSxtKGIpLGsoZCx0aGlzKX0sZ2V0IGNoaWxkTm9kZXMoKXtmb3IodmFyIGE9bmV3IHksYj0wLGM9dGhpcy5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9LGNsb25lTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdSh0aGlzLGEpfSxjb250YWluczpmdW5jdGlvbihhKXtyZXR1cm4gdih0aGlzLE0oYSkpfSxjb21wYXJlRG9jdW1lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gVC5jYWxsKHRoaXMuaW1wbCxLKGEpKX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz1pKHRoaXMuY2hpbGROb2RlcyksZD1bXSxlPSIiLGY9MDtmPGMubGVuZ3RoO2YrKyliPWNbZl0sYi5ub2RlVHlwZT09PXcuVEVYVF9OT0RFP2F8fGIuZGF0YS5sZW5ndGg/YT8oZSs9Yi5kYXRhLGQucHVzaChiKSk6YT1iOnRoaXMucmVtb3ZlTm9kZShiKTooYSYmZC5sZW5ndGgmJihhLmRhdGErPWUsdChkKSksZD1bXSxlPSIiLGE9bnVsbCxiLmNoaWxkTm9kZXMubGVuZ3RoJiZiLm5vcm1hbGl6ZSgpKTthJiZkLmxlbmd0aCYmKGEuZGF0YSs9ZSx0KGQpKX19KSxCKHcsIm93bmVyRG9jdW1lbnQiKSxIKFIsdyxkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGRlbGV0ZSB3LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yLGRlbGV0ZSB3LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLHcucHJvdG90eXBlPUYoT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSksdy5wcm90b3R5cGUpLGEuY2xvbmVOb2RlPXUsYS5ub2RlV2FzQWRkZWQ9aixhLm5vZGVXYXNSZW1vdmVkPWwsYS5ub2Rlc1dlcmVBZGRlZD1rLGEubm9kZXNXZXJlUmVtb3ZlZD1tLGEuc25hcHNob3ROb2RlTGlzdD1pLGEud3JhcHBlcnMuTm9kZT13fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYyl7Zm9yKHZhciBkLGU9YS5maXJzdEVsZW1lbnRDaGlsZDtlOyl7aWYoZS5tYXRjaGVzKGMpKXJldHVybiBlO2lmKGQ9YihlLGMpKXJldHVybiBkO2U9ZS5uZXh0RWxlbWVudFNpYmxpbmd9cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBhLm1hdGNoZXMoYil9ZnVuY3Rpb24gZChhLGIsYyl7dmFyIGQ9YS5sb2NhbE5hbWU7cmV0dXJuIGQ9PT1ifHxkPT09YyYmYS5uYW1lc3BhY2VVUkk9PT1sfWZ1bmN0aW9uIGUoKXtyZXR1cm4hMH1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIGEubG9jYWxOYW1lPT09Yn1mdW5jdGlvbiBnKGEsYil7cmV0dXJuIGEubmFtZXNwYWNlVVJJPT09Yn1mdW5jdGlvbiBoKGEsYixjKXtyZXR1cm4gYS5uYW1lc3BhY2VVUkk9PT1iJiZhLmxvY2FsTmFtZT09PWN9ZnVuY3Rpb24gaShhLGIsYyxkLGUpe2Zvcih2YXIgZj1hLmZpcnN0RWxlbWVudENoaWxkO2Y7KWMoZixkLGUpJiYoYltiLmxlbmd0aCsrXT1mKSxpKGYsYixjLGQsZSksZj1mLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gYn12YXIgaj1hLndyYXBwZXJzLkhUTUxDb2xsZWN0aW9uLGs9YS53cmFwcGVycy5Ob2RlTGlzdCxsPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIixtPXtxdWVyeVNlbGVjdG9yOmZ1bmN0aW9uKGEpe3JldHVybiBiKHRoaXMsYSl9LHF1ZXJ5U2VsZWN0b3JBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIGkodGhpcyxuZXcgayxjLGEpfX0sbj17Z2V0RWxlbWVudHNCeVRhZ05hbWU6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGo7cmV0dXJuIioiPT09YT9pKHRoaXMsYixlKTppKHRoaXMsYixkLGEsYS50b0xvd2VyQ2FzZSgpKX0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCIuIithKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWVOUzpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBqO2lmKCIiPT09YSlhPW51bGw7ZWxzZSBpZigiKiI9PT1hKXJldHVybiIqIj09PWI/aSh0aGlzLGMsZSk6aSh0aGlzLGMsZixiKTtyZXR1cm4iKiI9PT1iP2kodGhpcyxjLGcsYSk6aSh0aGlzLGMsaCxhLGIpfX07YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlPW4sYS5TZWxlY3RvcnNJbnRlcmZhY2U9bX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLm5leHRTaWJsaW5nO3JldHVybiBhfWZ1bmN0aW9uIGMoYSl7Zm9yKDthJiZhLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWE9YS5wcmV2aW91c1NpYmxpbmc7cmV0dXJuIGF9dmFyIGQ9YS53cmFwcGVycy5Ob2RlTGlzdCxlPXtnZXQgZmlyc3RFbGVtZW50Q2hpbGQoKXtyZXR1cm4gYih0aGlzLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBjKHRoaXMubGFzdENoaWxkKX0sZ2V0IGNoaWxkRWxlbWVudENvdW50KCl7Zm9yKHZhciBhPTAsYj10aGlzLmZpcnN0RWxlbWVudENoaWxkO2I7Yj1iLm5leHRFbGVtZW50U2libGluZylhKys7cmV0dXJuIGF9LGdldCBjaGlsZHJlbigpe2Zvcih2YXIgYT1uZXcgZCxiPTAsYz10aGlzLmZpcnN0RWxlbWVudENoaWxkO2M7Yz1jLm5leHRFbGVtZW50U2libGluZylhW2IrK109YztyZXR1cm4gYS5sZW5ndGg9YixhfSxyZW1vdmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5yZW1vdmVDaGlsZCh0aGlzKX19LGY9e2dldCBuZXh0RWxlbWVudFNpYmxpbmcoKXtyZXR1cm4gYih0aGlzLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzRWxlbWVudFNpYmxpbmcoKXtyZXR1cm4gYyh0aGlzLnByZXZpb3VzU2libGluZyl9fTthLkNoaWxkTm9kZUludGVyZmFjZT1mLGEuUGFyZW50Tm9kZUludGVyZmFjZT1lfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfXZhciBjPWEuQ2hpbGROb2RlSW50ZXJmYWNlLGQ9YS53cmFwcGVycy5Ob2RlLGU9YS5lbnF1ZXVlTXV0YXRpb24sZj1hLm1peGluLGc9YS5yZWdpc3RlcldyYXBwZXIsaD13aW5kb3cuQ2hhcmFjdGVyRGF0YTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxmKGIucHJvdG90eXBlLHtnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoYSl7dGhpcy5kYXRhPWF9LGdldCBkYXRhKCl7cmV0dXJuIHRoaXMuaW1wbC5kYXRhfSxzZXQgZGF0YShhKXt2YXIgYj10aGlzLmltcGwuZGF0YTtlKHRoaXMsImNoYXJhY3RlckRhdGEiLHtvbGRWYWx1ZTpifSksdGhpcy5pbXBsLmRhdGE9YX19KSxmKGIucHJvdG90eXBlLGMpLGcoaCxiLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGE+Pj4wfWZ1bmN0aW9uIGMoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGQ9YS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhLGU9KGEuZW5xdWV1ZU11dGF0aW9uLGEubWl4aW4pLGY9YS5yZWdpc3RlcldyYXBwZXIsZz13aW5kb3cuVGV4dDtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGMucHJvdG90eXBlLHtzcGxpdFRleHQ6ZnVuY3Rpb24oYSl7YT1iKGEpO3ZhciBjPXRoaXMuZGF0YTtpZihhPmMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW5kZXhTaXplRXJyb3IiKTt2YXIgZD1jLnNsaWNlKDAsYSksZT1jLnNsaWNlKGEpO3RoaXMuZGF0YT1kO3ZhciBmPXRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKTtyZXR1cm4gdGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYsdGhpcy5uZXh0U2libGluZyksZn19KSxmKGcsYyxkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGEud3JhcHBlcnMuVGV4dD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIpe2EuaW52YWxpZGF0ZVJlbmRlcmVyQmFzZWRPbkF0dHJpYnV0ZShiLCJjbGFzcyIpfWZ1bmN0aW9uIGMoYSxiKXt0aGlzLmltcGw9YSx0aGlzLm93bmVyRWxlbWVudF89Yn1jLnByb3RvdHlwZT17Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLmltcGwubGVuZ3RofSxpdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmltcGwuaXRlbShhKX0sY29udGFpbnM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1wbC5jb250YWlucyhhKX0sYWRkOmZ1bmN0aW9uKCl7dGhpcy5pbXBsLmFkZC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSxiKHRoaXMub3duZXJFbGVtZW50Xyl9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuaW1wbC5yZW1vdmUuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyksYih0aGlzLm93bmVyRWxlbWVudF8pfSx0b2dnbGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltcGwudG9nZ2xlLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpO3JldHVybiBiKHRoaXMub3duZXJFbGVtZW50XyksYX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxhLndyYXBwZXJzLkRPTVRva2VuTGlzdD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIsYyl7dmFyIGQ9Yi5wYXJlbnROb2RlO2lmKGQmJmQuc2hhZG93Um9vdCl7dmFyIGU9YS5nZXRSZW5kZXJlckZvckhvc3QoZCk7ZS5kZXBlbmRzT25BdHRyaWJ1dGUoYykmJmUuaW52YWxpZGF0ZSgpfX1mdW5jdGlvbiBjKGEsYixjKXtrKGEsImF0dHJpYnV0ZXMiLHtuYW1lOmIsbmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6Y30pfWZ1bmN0aW9uIGQoYSl7Zy5jYWxsKHRoaXMsYSl9dmFyIGU9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsZz1hLndyYXBwZXJzLk5vZGUsaD1hLndyYXBwZXJzLkRPTVRva2VuTGlzdCxpPWEuUGFyZW50Tm9kZUludGVyZmFjZSxqPWEuU2VsZWN0b3JzSW50ZXJmYWNlLGs9KGEuYWRkV3JhcE5vZGVMaXN0TWV0aG9kLGEuZW5xdWV1ZU11dGF0aW9uKSxsPWEubWl4aW4sbT0oYS5vbmVPZixhLnJlZ2lzdGVyV3JhcHBlciksbj1hLnVud3JhcCxvPWEud3JhcHBlcnMscD13aW5kb3cuRWxlbWVudCxxPVsibWF0Y2hlcyIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIl0uZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBwLnByb3RvdHlwZVthXX0pLHI9cVswXSxzPXAucHJvdG90eXBlW3JdLHQ9bmV3IFdlYWtNYXA7ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSksbChkLnByb3RvdHlwZSx7Y3JlYXRlU2hhZG93Um9vdDpmdW5jdGlvbigpe3ZhciBiPW5ldyBvLlNoYWRvd1Jvb3QodGhpcyk7dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSb290Xz1iO3ZhciBjPWEuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMpO3JldHVybiBjLmludmFsaWRhdGUoKSxifSxnZXQgc2hhZG93Um9vdCgpe3JldHVybiB0aGlzLmltcGwucG9seW1lclNoYWRvd1Jvb3RffHxudWxsfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxkKXt2YXIgZT10aGlzLmltcGwuZ2V0QXR0cmlidXRlKGEpO3RoaXMuaW1wbC5zZXRBdHRyaWJ1dGUoYSxkKSxjKHRoaXMsYSxlKSxiKHRoaXMsYSl9LHJlbW92ZUF0dHJpYnV0ZTpmdW5jdGlvbihhKXt2YXIgZD10aGlzLmltcGwuZ2V0QXR0cmlidXRlKGEpO3RoaXMuaW1wbC5yZW1vdmVBdHRyaWJ1dGUoYSksYyh0aGlzLGEsZCksYih0aGlzLGEpfSxtYXRjaGVzOmZ1bmN0aW9uKGEpe3JldHVybiBzLmNhbGwodGhpcy5pbXBsLGEpfSxnZXQgY2xhc3NMaXN0KCl7dmFyIGE9dC5nZXQodGhpcyk7cmV0dXJuIGF8fHQuc2V0KHRoaXMsYT1uZXcgaChuKHRoaXMpLmNsYXNzTGlzdCx0aGlzKSksYX0sZ2V0IGNsYXNzTmFtZSgpe3JldHVybiBuKHRoaXMpLmNsYXNzTmFtZX0sc2V0IGNsYXNzTmFtZShhKXt0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGEpfSxnZXQgaWQoKXtyZXR1cm4gbih0aGlzKS5pZH0sc2V0IGlkKGEpe3RoaXMuc2V0QXR0cmlidXRlKCJpZCIsYSl9fSkscS5mb3JFYWNoKGZ1bmN0aW9uKGEpeyJtYXRjaGVzIiE9PWEmJihkLnByb3RvdHlwZVthXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXRjaGVzKGEpfSl9KSxwLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290JiYoZC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1kLnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290KSxsKGQucHJvdG90eXBlLGUpLGwoZC5wcm90b3R5cGUsZiksbChkLnByb3RvdHlwZSxpKSxsKGQucHJvdG90eXBlLGopLG0ocCxkLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhudWxsLCJ4IikpLGEuaW52YWxpZGF0ZVJlbmRlcmVyQmFzZWRPbkF0dHJpYnV0ZT1iLGEubWF0Y2hlc05hbWVzPXEsYS53cmFwcGVycy5FbGVtZW50PWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7c3dpdGNoKGEpe2Nhc2UiJiI6cmV0dXJuIiZhbXA7IjtjYXNlIjwiOnJldHVybiImbHQ7IjtjYXNlIj4iOnJldHVybiImZ3Q7IjtjYXNlJyInOnJldHVybiImcXVvdDsiO2Nhc2UiXHhhMCI6cmV0dXJuIiZuYnNwOyJ9fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucmVwbGFjZSh6LGIpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEucmVwbGFjZShBLGIpfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPXt9LGM9MDtjPGEubGVuZ3RoO2MrKyliW2FbY11dPSEwO3JldHVybiBifWZ1bmN0aW9uIGYoYSxiKXtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmb3IodmFyIGUsZj1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxoPSI8IitmLGk9YS5hdHRyaWJ1dGVzLGo9MDtlPWlbal07aisrKWgrPSIgIitlLm5hbWUrJz0iJytjKGUudmFsdWUpKyciJztyZXR1cm4gaCs9Ij4iLEJbZl0/aDpoK2coYSkrIjwvIitmKyI+IjtjYXNlIE5vZGUuVEVYVF9OT0RFOnZhciBrPWEuZGF0YTtyZXR1cm4gYiYmQ1tiLmxvY2FsTmFtZV0/azpkKGspO2Nhc2UgTm9kZS5DT01NRU5UX05PREU6cmV0dXJuIjwhLS0iK2EuZGF0YSsiLS0+IjtkZWZhdWx0OnRocm93IGNvbnNvbGUuZXJyb3IoYSksbmV3IEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKX19ZnVuY3Rpb24gZyhhKXthIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50JiYoYT1hLmNvbnRlbnQpO2Zvcih2YXIgYj0iIixjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyliKz1mKGMsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGQ9Y3x8ImRpdiI7YS50ZXh0Q29udGVudD0iIjt2YXIgZT13KGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KGQpKTtlLmlubmVySFRNTD1iO2Zvcih2YXIgZjtmPWUuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZCh4KGYpKX1mdW5jdGlvbiBpKGEpe28uY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz13KGEuY2xvbmVOb2RlKCExKSk7Yy5pbm5lckhUTUw9Yjtmb3IodmFyIGQsZT13KGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7ZD1jLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoZCk7cmV0dXJuIHgoZSl9ZnVuY3Rpb24gayhiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdfX1mdW5jdGlvbiBsKGEpe3AoaSxhLGsoYSkpfWZ1bmN0aW9uIG0oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLGIse2dldDprKGIpLHNldDpmdW5jdGlvbihjKXthLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl09Y30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBuKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxiLHt2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIG89YS53cmFwcGVycy5FbGVtZW50LHA9YS5kZWZpbmVHZXR0ZXIscT1hLmVucXVldWVNdXRhdGlvbixyPWEubWl4aW4scz1hLm5vZGVzV2VyZUFkZGVkLHQ9YS5ub2Rlc1dlcmVSZW1vdmVkLHU9YS5yZWdpc3RlcldyYXBwZXIsdj1hLnNuYXBzaG90Tm9kZUxpc3Qsdz1hLnVud3JhcCx4PWEud3JhcCx5PWEud3JhcHBlcnMsej0vWyZcdTAwQTAiXS9nLEE9L1smXHUwMEEwPD5dL2csQj1lKFsiYXJlYSIsImJhc2UiLCJiciIsImNvbCIsImNvbW1hbmQiLCJlbWJlZCIsImhyIiwiaW1nIiwiaW5wdXQiLCJrZXlnZW4iLCJsaW5rIiwibWV0YSIsInBhcmFtIiwic291cmNlIiwidHJhY2siLCJ3YnIiXSksQz1lKFsic3R5bGUiLCJzY3JpcHQiLCJ4bXAiLCJpZnJhbWUiLCJub2VtYmVkIiwibm9mcmFtZXMiLCJwbGFpbnRleHQiLCJub3NjcmlwdCJdKSxEPS9NU0lFLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLEU9d2luZG93LkhUTUxFbGVtZW50LEY9d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSkscihpLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBnKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2lmKEQmJkNbdGhpcy5sb2NhbE5hbWVdKXJldHVybiB2b2lkKHRoaXMudGV4dENvbnRlbnQ9YSk7dmFyIGI9dih0aGlzLmNoaWxkTm9kZXMpO3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk/dGhpcyBpbnN0YW5jZW9mIHkuSFRNTFRlbXBsYXRlRWxlbWVudD9oKHRoaXMuY29udGVudCxhKTpoKHRoaXMsYSx0aGlzLnRhZ05hbWUpOiFGJiZ0aGlzIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50P2godGhpcy5jb250ZW50LGEpOnRoaXMuaW1wbC5pbm5lckhUTUw9YTt2YXIgYz12KHRoaXMuY2hpbGROb2Rlcyk7cSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmMscmVtb3ZlZE5vZGVzOmJ9KSx0KGIpLHMoYyx0aGlzKX0sZ2V0IG91dGVySFRNTCgpe3JldHVybiBmKHRoaXMsdGhpcy5wYXJlbnROb2RlKX0sc2V0IG91dGVySFRNTChhKXt2YXIgYj10aGlzLnBhcmVudE5vZGU7aWYoYil7Yi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKTt2YXIgYz1qKGIsYSk7Yi5yZXBsYWNlQ2hpbGQoYyx0aGlzKX19LGluc2VydEFkamFjZW50SFRNTDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7c3dpdGNoKFN0cmluZyhhKS50b0xvd2VyQ2FzZSgpKXtjYXNlImJlZm9yZWJlZ2luIjpjPXRoaXMucGFyZW50Tm9kZSxkPXRoaXM7YnJlYWs7Y2FzZSJhZnRlcmVuZCI6Yz10aGlzLnBhcmVudE5vZGUsZD10aGlzLm5leHRTaWJsaW5nO2JyZWFrO2Nhc2UiYWZ0ZXJiZWdpbiI6Yz10aGlzLGQ9dGhpcy5maXJzdENoaWxkO2JyZWFrO2Nhc2UiYmVmb3JlZW5kIjpjPXRoaXMsZD1udWxsO2JyZWFrO2RlZmF1bHQ6cmV0dXJufXZhciBlPWooYyxiKTtjLmluc2VydEJlZm9yZShlLGQpfX0pLFsiY2xpZW50SGVpZ2h0IiwiY2xpZW50TGVmdCIsImNsaWVudFRvcCIsImNsaWVudFdpZHRoIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFdpZHRoIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsV2lkdGgiXS5mb3JFYWNoKGwpLFsic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCJdLmZvckVhY2gobSksWyJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXRDbGllbnRSZWN0cyIsInNjcm9sbEludG9WaWV3Il0uZm9yRWFjaChuKSx1KEUsaSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiIikpLGEud3JhcHBlcnMuSFRNTEVsZW1lbnQ9aSxhLmdldElubmVySFRNTD1nLGEuc2V0SW5uZXJIVE1MPWh9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcCxnPXdpbmRvdy5IVE1MQ2FudmFzRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXRDb250ZXh0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbXBsLmdldENvbnRleHQuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyk7cmV0dXJuIGEmJmYoYSl9fSksZShnLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikpLGEud3JhcHBlcnMuSFRNTENhbnZhc0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9d2luZG93LkhUTUxDb250ZW50RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgc2VsZWN0KCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKX0sc2V0IHNlbGVjdChhKXt0aGlzLnNldEF0dHJpYnV0ZSgic2VsZWN0IixhKX0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7Yy5wcm90b3R5cGUuc2V0QXR0cmlidXRlLmNhbGwodGhpcyxhLGIpLCJzZWxlY3QiPT09U3RyaW5nKGEpLnRvTG93ZXJDYXNlKCkmJnRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCEwKX19KSxmJiZlKGYsYiksYS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtkLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBjKGEsYil7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGU9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKSk7ZC5jYWxsKHRoaXMsZSksZyhlLHRoaXMpLHZvaWQgMCE9PWEmJihlLndpZHRoPWEpLHZvaWQgMCE9PWImJihlLmhlaWdodD1iKX12YXIgZD1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxJbWFnZUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpLGMucHJvdG90eXBlPWIucHJvdG90eXBlLGEud3JhcHBlcnMuSFRNTEltYWdlRWxlbWVudD1iLGEud3JhcHBlcnMuSW1hZ2U9Y30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9KGEubWl4aW4sYS53cmFwcGVycy5Ob2RlTGlzdCxhLnJlZ2lzdGVyV3JhcHBlciksZT13aW5kb3cuSFRNTFNoYWRvd0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZSYmZChlLGIpLGEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYS5kZWZhdWx0VmlldylyZXR1cm4gYTt2YXIgYj1rLmdldChhKTtpZighYil7Zm9yKGI9YS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpO2IubGFzdENoaWxkOyliLnJlbW92ZUNoaWxkKGIubGFzdENoaWxkKTtrLnNldChhLGIpfXJldHVybiBifWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBjLGQ9YihhLm93bmVyRG9jdW1lbnQpLGU9aChkLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Yz1hLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGV9ZnVuY3Rpb24gZChhKXtpZihlLmNhbGwodGhpcyxhKSwhbCl7dmFyIGI9YyhhKTtqLnNldCh0aGlzLGkoYikpfX12YXIgZT1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGY9YS5taXhpbixnPWEucmVnaXN0ZXJXcmFwcGVyLGg9YS51bndyYXAsaT1hLndyYXAsaj1uZXcgV2Vha01hcCxrPW5ldyBXZWFrTWFwLGw9d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZihkLnByb3RvdHlwZSx7Z2V0IGNvbnRlbnQoKXtyZXR1cm4gbD9pKHRoaXMuaW1wbC5jb250ZW50KTpqLmdldCh0aGlzKX19KSxsJiZnKGwsZCksYS53cmFwcGVycy5IVE1MVGVtcGxhdGVFbGVtZW50PWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEucmVnaXN0ZXJXcmFwcGVyLGU9d2luZG93LkhUTUxNZWRpYUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChlLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSksYS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhKXtpZighKHRoaXMgaW5zdGFuY2VvZiBjKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt2YXIgYj1mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIikpO2QuY2FsbCh0aGlzLGIpLGcoYix0aGlzKSxiLnNldEF0dHJpYnV0ZSgicHJlbG9hZCIsImF1dG8iKSx2b2lkIDAhPT1hJiZiLnNldEF0dHJpYnV0ZSgic3JjIixhKX12YXIgZD1hLndyYXBwZXJzLkhUTUxNZWRpYUVsZW1lbnQsZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS5yZXdyYXAsaD13aW5kb3cuSFRNTEF1ZGlvRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpKSxjLnByb3RvdHlwZT1iLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxBdWRpb0VsZW1lbnQ9YixhLndyYXBwZXJzLkF1ZGlvPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEucmVwbGFjZSgvXHMrL2csIiAiKS50cmltKCl9ZnVuY3Rpb24gYyhhKXtlLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBkKGEsYixjLGYpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3ZhciBnPWkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO2UuY2FsbCh0aGlzLGcpLGgoZyx0aGlzKSx2b2lkIDAhPT1hJiYoZy50ZXh0PWEpLHZvaWQgMCE9PWImJmcuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsYiksYz09PSEwJiZnLnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCIiKSxnLnNlbGVjdGVkPWY9PT0hMH12YXIgZT1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGY9YS5taXhpbixnPWEucmVnaXN0ZXJXcmFwcGVyLGg9YS5yZXdyYXAsaT1hLnVud3JhcCxqPWEud3JhcCxrPXdpbmRvdy5IVE1MT3B0aW9uRWxlbWVudDtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSxmKGMucHJvdG90eXBlLHtnZXQgdGV4dCgpe3JldHVybiBiKHRoaXMudGV4dENvbnRlbnQpfSxzZXQgdGV4dChhKXt0aGlzLnRleHRDb250ZW50PWIoU3RyaW5nKGEpKX0sZ2V0IGZvcm0oKXtyZXR1cm4gaihpKHRoaXMpLmZvcm0pfX0pLGcoayxjLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKSxkLnByb3RvdHlwZT1jLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxPcHRpb25FbGVtZW50PWMsYS53cmFwcGVycy5PcHRpb249ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLndyYXAsaD13aW5kb3cuSFRNTFNlbGVjdEVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7YWRkOmZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBiJiYoYj1mKGIpKSxmKHRoaXMpLmFkZChmKGEpLGIpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/dm9pZCBjLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKTooIm9iamVjdCI9PXR5cGVvZiBhJiYoYT1mKGEpKSx2b2lkIGYodGhpcykucmVtb3ZlKGEpKX0sZ2V0IGZvcm0oKXtyZXR1cm4gZyhmKHRoaXMpLmZvcm0pfX0pLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpKSxhLndyYXBwZXJzLkhUTUxTZWxlY3RFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS53cmFwLGg9YS53cmFwSFRNTENvbGxlY3Rpb24saT13aW5kb3cuSFRNTFRhYmxlRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY2FwdGlvbigpe3JldHVybiBnKGYodGhpcykuY2FwdGlvbil9LGNyZWF0ZUNhcHRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZUNhcHRpb24oKSl9LGdldCB0SGVhZCgpe3JldHVybiBnKGYodGhpcykudEhlYWQpfSxjcmVhdGVUSGVhZDpmdW5jdGlvbigpe3JldHVybiBnKGYodGhpcykuY3JlYXRlVEhlYWQoKSl9LGNyZWF0ZVRGb290OmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVURm9vdCgpKX0sZ2V0IHRGb290KCl7cmV0dXJuIGcoZih0aGlzKS50Rm9vdCl9LGdldCB0Qm9kaWVzKCl7cmV0dXJuIGgoZih0aGlzKS50Qm9kaWVzKX0sY3JlYXRlVEJvZHk6ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZVRCb2R5KCkpfSxnZXQgcm93cygpe3JldHVybiBoKGYodGhpcykucm93cyl9LGluc2VydFJvdzpmdW5jdGlvbihhKXtyZXR1cm4gZyhmKHRoaXMpLmluc2VydFJvdyhhKSl9fSksZShpLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKSksYS53cmFwcGVycy5IVE1MVGFibGVFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcEhUTUxDb2xsZWN0aW9uLGc9YS51bndyYXAsaD1hLndyYXAsaT13aW5kb3cuSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IHJvd3MoKXtyZXR1cm4gZihnKHRoaXMpLnJvd3MpfSxpbnNlcnRSb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGgoZyh0aGlzKS5pbnNlcnRSb3coYSkpfX0pLGUoaSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRoZWFkIikpLGEud3JhcHBlcnMuSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS53cmFwSFRNTENvbGxlY3Rpb24sZz1hLnVud3JhcCxoPWEud3JhcCxpPXdpbmRvdy5IVE1MVGFibGVSb3dFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCBjZWxscygpe3JldHVybiBmKGcodGhpcykuY2VsbHMpfSxpbnNlcnRDZWxsOmZ1bmN0aW9uKGEpe3JldHVybiBoKGcodGhpcykuaW5zZXJ0Q2VsbChhKSl9fSksZShpLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKSksYS53cmFwcGVycy5IVE1MVGFibGVSb3dFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7c3dpdGNoKGEubG9jYWxOYW1lKXtjYXNlImNvbnRlbnQiOnJldHVybiBuZXcgYyhhKTtjYXNlInNoYWRvdyI6cmV0dXJuIG5ldyBlKGEpO2Nhc2UidGVtcGxhdGUiOnJldHVybiBuZXcgZihhKX1kLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxkPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZT1hLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50LGY9YS53cmFwcGVycy5IVE1MVGVtcGxhdGVFbGVtZW50LGc9KGEubWl4aW4sYS5yZWdpc3RlcldyYXBwZXIpLGg9d2luZG93LkhUTUxVbmtub3duRWxlbWVudDsKYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZyhoLGIpLGEud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEucmVnaXN0ZXJPYmplY3QsYz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGMsInRpdGxlIiksZT1iKGQpLGY9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKS5jb25zdHJ1Y3RvcjthLndyYXBwZXJzLlNWR0VsZW1lbnQ9Zn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXttLmNhbGwodGhpcyxhKX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcCxmPWEud3JhcCxnPXdpbmRvdy5TVkdVc2VFbGVtZW50LGg9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIixpPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGgsImciKSksaj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoaCwidXNlIiksaz1pLmNvbnN0cnVjdG9yLGw9T2JqZWN0LmdldFByb3RvdHlwZU9mKGsucHJvdG90eXBlKSxtPWwuY29uc3RydWN0b3I7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShsKSwiaW5zdGFuY2VSb290ImluIGomJmMoYi5wcm90b3R5cGUse2dldCBpbnN0YW5jZVJvb3QoKXtyZXR1cm4gZihlKHRoaXMpLmluc3RhbmNlUm9vdCl9LGdldCBhbmltYXRlZEluc3RhbmNlUm9vdCgpe3JldHVybiBmKGUodGhpcykuYW5pbWF0ZWRJbnN0YW5jZVJvb3QpfX0pLGQoZyxiLGopLGEud3JhcHBlcnMuU1ZHVXNlRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuRXZlbnRUYXJnZXQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXAsZz13aW5kb3cuU1ZHRWxlbWVudEluc3RhbmNlO2cmJihiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY29ycmVzcG9uZGluZ0VsZW1lbnQoKXtyZXR1cm4gZih0aGlzLmltcGwuY29ycmVzcG9uZGluZ0VsZW1lbnQpfSxnZXQgY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQoKXtyZXR1cm4gZih0aGlzLmltcGwuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQpfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiBmKHRoaXMuaW1wbC5wYXJlbnROb2RlKX0sZ2V0IGNoaWxkTm9kZXMoKXt0aHJvdyBuZXcgRXJyb3IoIk5vdCBpbXBsZW1lbnRlZCIpfSxnZXQgZmlyc3RDaGlsZCgpe3JldHVybiBmKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiBmKHRoaXMuaW1wbC5sYXN0Q2hpbGQpfSxnZXQgcHJldmlvdXNTaWJsaW5nKCl7cmV0dXJuIGYodGhpcy5pbXBsLnByZXZpb3VzU2libGluZyl9LGdldCBuZXh0U2libGluZygpe3JldHVybiBmKHRoaXMuaW1wbC5uZXh0U2libGluZyl9fSksZShnLGIpLGEud3JhcHBlcnMuU1ZHRWxlbWVudEluc3RhbmNlPWIpfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEudW53cmFwLGY9YS51bndyYXBJZk5lZWRlZCxnPWEud3JhcCxoPXdpbmRvdy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7YyhiLnByb3RvdHlwZSx7Z2V0IGNhbnZhcygpe3JldHVybiBnKHRoaXMuaW1wbC5jYW52YXMpfSxkcmF3SW1hZ2U6ZnVuY3Rpb24oKXthcmd1bWVudHNbMF09Zihhcmd1bWVudHNbMF0pLHRoaXMuaW1wbC5kcmF3SW1hZ2UuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LGNyZWF0ZVBhdHRlcm46ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzWzBdPWUoYXJndW1lbnRzWzBdKSx0aGlzLmltcGwuY3JlYXRlUGF0dGVybi5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19KSxkKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKS5nZXRDb250ZXh0KCIyZCIpKSxhLndyYXBwZXJzLkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXAsZz13aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0O2lmKGcpe2MoYi5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gZih0aGlzLmltcGwuY2FudmFzKX0sdGV4SW1hZ2UyRDpmdW5jdGlvbigpe2FyZ3VtZW50c1s1XT1lKGFyZ3VtZW50c1s1XSksdGhpcy5pbXBsLnRleEltYWdlMkQuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LHRleFN1YkltYWdlMkQ6ZnVuY3Rpb24oKXthcmd1bWVudHNbNl09ZShhcmd1bWVudHNbNl0pLHRoaXMuaW1wbC50ZXhTdWJJbWFnZTJELmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX0pO3ZhciBoPS9XZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk/e2RyYXdpbmdCdWZmZXJIZWlnaHQ6bnVsbCxkcmF3aW5nQnVmZmVyV2lkdGg6bnVsbH06e307ZChnLGIsaCksYS53cmFwcGVycy5XZWJHTFJlbmRlcmluZ0NvbnRleHQ9Yn19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPWF9dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXAsZz13aW5kb3cuUmFuZ2U7Yi5wcm90b3R5cGU9e2dldCBzdGFydENvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5zdGFydENvbnRhaW5lcil9LGdldCBlbmRDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuZW5kQ29udGFpbmVyKX0sZ2V0IGNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKX0sc2V0U3RhcnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuc2V0U3RhcnQoZShhKSxiKX0sc2V0RW5kOmZ1bmN0aW9uKGEsYil7dGhpcy5pbXBsLnNldEVuZChlKGEpLGIpfSxzZXRTdGFydEJlZm9yZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0U3RhcnRCZWZvcmUoZShhKSl9LHNldFN0YXJ0QWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldFN0YXJ0QWZ0ZXIoZShhKSl9LHNldEVuZEJlZm9yZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0RW5kQmVmb3JlKGUoYSkpfSxzZXRFbmRBZnRlcjpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0RW5kQWZ0ZXIoZShhKSl9LHNlbGVjdE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNlbGVjdE5vZGUoZShhKSl9LHNlbGVjdE5vZGVDb250ZW50czpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2VsZWN0Tm9kZUNvbnRlbnRzKGUoYSkpfSxjb21wYXJlQm91bmRhcnlQb2ludHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLGQoYikpfSxleHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLmltcGwuZXh0cmFjdENvbnRlbnRzKCkpfSxjbG9uZUNvbnRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNsb25lQ29udGVudHMoKSl9LGluc2VydE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmluc2VydE5vZGUoZShhKSl9LHN1cnJvdW5kQ29udGVudHM6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnN1cnJvdW5kQ29udGVudHMoZShhKSl9LGNsb25lUmFuZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLmltcGwuY2xvbmVSYW5nZSgpKX0saXNQb2ludEluUmFuZ2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmlzUG9pbnRJblJhbmdlKGUoYSksYil9LGNvbXBhcmVQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmltcGwuY29tcGFyZVBvaW50KGUoYSksYil9LGludGVyc2VjdHNOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmltcGwuaW50ZXJzZWN0c05vZGUoZShhKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbC50b1N0cmluZygpfX0sZy5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JiYoYi5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBmKHRoaXMuaW1wbC5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoYSkpfSksYyh3aW5kb3cuUmFuZ2UsYixkb2N1bWVudC5jcmVhdGVSYW5nZSgpKSxhLndyYXBwZXJzLlJhbmdlPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEuR2V0RWxlbWVudHNCeUludGVyZmFjZSxjPWEuUGFyZW50Tm9kZUludGVyZmFjZSxkPWEuU2VsZWN0b3JzSW50ZXJmYWNlLGU9YS5taXhpbixmPWEucmVnaXN0ZXJPYmplY3QsZz1mKGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7ZShnLnByb3RvdHlwZSxjKSxlKGcucHJvdG90eXBlLGQpLGUoZy5wcm90b3R5cGUsYik7dmFyIGg9Zihkb2N1bWVudC5jcmVhdGVDb21tZW50KCIiKSk7YS53cmFwcGVycy5Db21tZW50PWgsYS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50PWd9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFyIGI9ayhhLmltcGwub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2MuY2FsbCh0aGlzLGIpLGkoYix0aGlzKTt2YXIgZT1hLnNoYWRvd1Jvb3Q7bS5zZXQodGhpcyxlKSx0aGlzLnRyZWVTY29wZV89bmV3IGQodGhpcyxnKGV8fGEpKSxsLnNldCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudCxkPWEuVHJlZVNjb3BlLGU9YS5lbGVtZW50RnJvbVBvaW50LGY9YS5nZXRJbm5lckhUTUwsZz1hLmdldFRyZWVTY29wZSxoPWEubWl4aW4saT1hLnJld3JhcCxqPWEuc2V0SW5uZXJIVE1MLGs9YS51bndyYXAsbD1uZXcgV2Vha01hcCxtPW5ldyBXZWFrTWFwLG49L1sgXHRcblxyXGZdLztiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxoKGIucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGYodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7aih0aGlzLGEpLHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9LGdldCBvbGRlclNoYWRvd1Jvb3QoKXtyZXR1cm4gbS5nZXQodGhpcyl8fG51bGx9LGdldCBob3N0KCl7cmV0dXJuIGwuZ2V0KHRoaXMpfHxudWxsfSxpbnZhbGlkYXRlU2hhZG93UmVuZGVyZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbC5nZXQodGhpcykuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9LGVsZW1lbnRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZSh0aGlzLHRoaXMub3duZXJEb2N1bWVudCxhLGIpfSxnZXRFbGVtZW50QnlJZDpmdW5jdGlvbihhKXtyZXR1cm4gbi50ZXN0KGEpP251bGw6dGhpcy5xdWVyeVNlbGVjdG9yKCdbaWQ9IicrYSsnIl0nKX19KSxhLndyYXBwZXJzLlNoYWRvd1Jvb3Q9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXthLnByZXZpb3VzU2libGluZ189YS5wcmV2aW91c1NpYmxpbmcsYS5uZXh0U2libGluZ189YS5uZXh0U2libGluZyxhLnBhcmVudE5vZGVfPWEucGFyZW50Tm9kZX1mdW5jdGlvbiBjKGEsYyxlKXt2YXIgZj1HKGEpLGc9RyhjKSxoPWU/RyhlKTpudWxsO2lmKGQoYyksYihjKSxlKWEuZmlyc3RDaGlsZD09PWUmJihhLmZpcnN0Q2hpbGRfPWUpLGUucHJldmlvdXNTaWJsaW5nXz1lLnByZXZpb3VzU2libGluZztlbHNle2EubGFzdENoaWxkXz1hLmxhc3RDaGlsZCxhLmxhc3RDaGlsZD09PWEuZmlyc3RDaGlsZCYmKGEuZmlyc3RDaGlsZF89YS5maXJzdENoaWxkKTt2YXIgaT1IKGYubGFzdENoaWxkKTtpJiYoaS5uZXh0U2libGluZ189aS5uZXh0U2libGluZyl9Zi5pbnNlcnRCZWZvcmUoZyxoKX1mdW5jdGlvbiBkKGEpe3ZhciBjPUcoYSksZD1jLnBhcmVudE5vZGU7aWYoZCl7dmFyIGU9SChkKTtiKGEpLGEucHJldmlvdXNTaWJsaW5nJiYoYS5wcmV2aW91c1NpYmxpbmcubmV4dFNpYmxpbmdfPWEpLGEubmV4dFNpYmxpbmcmJihhLm5leHRTaWJsaW5nLnByZXZpb3VzU2libGluZ189YSksZS5sYXN0Q2hpbGQ9PT1hJiYoZS5sYXN0Q2hpbGRfPWEpLGUuZmlyc3RDaGlsZD09PWEmJihlLmZpcnN0Q2hpbGRfPWEpLGQucmVtb3ZlQ2hpbGQoYyl9fWZ1bmN0aW9uIGUoYSl7SS5zZXQoYSxbXSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1JLmdldChhKTtyZXR1cm4gYnx8SS5zZXQoYSxiPVtdKSxifWZ1bmN0aW9uIGcoYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYn1mdW5jdGlvbiBoKCl7Zm9yKHZhciBhPTA7YTxNLmxlbmd0aDthKyspe3ZhciBiPU1bYV0sYz1iLnBhcmVudFJlbmRlcmVyO2MmJmMuZGlydHl8fGIucmVuZGVyKCl9TT1bXX1mdW5jdGlvbiBpKCl7eT1udWxsLGgoKX1mdW5jdGlvbiBqKGEpe3ZhciBiPUsuZ2V0KGEpO3JldHVybiBifHwoYj1uZXcgbihhKSxLLnNldChhLGIpKSxifWZ1bmN0aW9uIGsoYSl7dmFyIGI9RShhKS5yb290O3JldHVybiBiIGluc3RhbmNlb2YgRD9iOm51bGx9ZnVuY3Rpb24gbChhKXtyZXR1cm4gaihhLmhvc3QpfWZ1bmN0aW9uIG0oYSl7dGhpcy5za2lwPSExLHRoaXMubm9kZT1hLHRoaXMuY2hpbGROb2Rlcz1bXX1mdW5jdGlvbiBuKGEpe3RoaXMuaG9zdD1hLHRoaXMuZGlydHk9ITEsdGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpLHRoaXMuYXNzb2NpYXRlTm9kZShhKX1mdW5jdGlvbiBvKGEpe2Zvcih2YXIgYj1bXSxjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyl2KGMpP2IucHVzaC5hcHBseShiLGYoYykpOmIucHVzaChjKTtyZXR1cm4gYn1mdW5jdGlvbiBwKGEpe2lmKGEgaW5zdGFuY2VvZiBCKXJldHVybiBhO2lmKGEgaW5zdGFuY2VvZiBBKXJldHVybiBudWxsO2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpe3ZhciBjPXAoYik7aWYoYylyZXR1cm4gY31yZXR1cm4gbnVsbH1mdW5jdGlvbiBxKGEsYil7ZihiKS5wdXNoKGEpO3ZhciBjPUouZ2V0KGEpO2M/Yy5wdXNoKGIpOkouc2V0KGEsW2JdKX1mdW5jdGlvbiByKGEpe3JldHVybiBKLmdldChhKX1mdW5jdGlvbiBzKGEpe0ouc2V0KGEsdm9pZCAwKX1mdW5jdGlvbiB0KGEsYil7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpO2lmKCFjKXJldHVybiEwO2lmKGM9Yy50cmltKCksIWMpcmV0dXJuITA7aWYoIShhIGluc3RhbmNlb2YgeikpcmV0dXJuITE7aWYoIU8udGVzdChjKSlyZXR1cm4hMTt0cnl7cmV0dXJuIGEubWF0Y2hlcyhjKX1jYXRjaChkKXtyZXR1cm4hMX19ZnVuY3Rpb24gdShhLGIpe3ZhciBjPXIoYik7cmV0dXJuIGMmJmNbYy5sZW5ndGgtMV09PT1hfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBBfHxhIGluc3RhbmNlb2YgQn1mdW5jdGlvbiB3KGEpe3JldHVybiBhLnNoYWRvd1Jvb3R9ZnVuY3Rpb24geChhKXtmb3IodmFyIGI9W10sYz1hLnNoYWRvd1Jvb3Q7YztjPWMub2xkZXJTaGFkb3dSb290KWIucHVzaChjKTtyZXR1cm4gYn12YXIgeSx6PWEud3JhcHBlcnMuRWxlbWVudCxBPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LEI9YS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudCxDPWEud3JhcHBlcnMuTm9kZSxEPWEud3JhcHBlcnMuU2hhZG93Um9vdCxFPShhLmFzc2VydCxhLmdldFRyZWVTY29wZSksRj0oYS5taXhpbixhLm9uZU9mKSxHPWEudW53cmFwLEg9YS53cmFwLEk9bmV3IFdlYWtNYXAsSj1uZXcgV2Vha01hcCxLPW5ldyBXZWFrTWFwLEw9Rih3aW5kb3csWyJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzZXRUaW1lb3V0Il0pLE09W10sTj1uZXcgQXJyYXlTcGxpY2U7Ti5lcXVhbHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRyhhLm5vZGUpPT09Yn0sbS5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgbShhKTtyZXR1cm4gdGhpcy5jaGlsZE5vZGVzLnB1c2goYiksYn0sc3luYzpmdW5jdGlvbihhKXtpZighdGhpcy5za2lwKXtmb3IodmFyIGI9dGhpcy5ub2RlLGU9dGhpcy5jaGlsZE5vZGVzLGY9ZyhHKGIpKSxoPWF8fG5ldyBXZWFrTWFwLGk9Ti5jYWxjdWxhdGVTcGxpY2VzKGUsZiksaj0wLGs9MCxsPTAsbT0wO208aS5sZW5ndGg7bSsrKXtmb3IodmFyIG49aVttXTtsPG4uaW5kZXg7bCsrKWsrKyxlW2orK10uc3luYyhoKTtmb3IodmFyIG89bi5yZW1vdmVkLmxlbmd0aCxwPTA7bz5wO3ArKyl7dmFyIHE9SChmW2srK10pO2guZ2V0KHEpfHxkKHEpfWZvcih2YXIgcj1uLmFkZGVkQ291bnQscz1mW2tdJiZIKGZba10pLHA9MDtyPnA7cCsrKXt2YXIgdD1lW2orK10sdT10Lm5vZGU7YyhiLHUscyksaC5zZXQodSwhMCksdC5zeW5jKGgpfWwrPXJ9Zm9yKHZhciBtPWw7bTxlLmxlbmd0aDttKyspZVttXS5zeW5jKGgpfX19LG4ucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5kaXJ0eSl7dGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpO3ZhciBiPXRoaXMuaG9zdDt0aGlzLmRpc3RyaWJ1dGlvbihiKTt2YXIgYz1hfHxuZXcgbShiKTt0aGlzLmJ1aWxkUmVuZGVyVHJlZShjLGIpO3ZhciBkPSFhO2QmJmMuc3luYygpLHRoaXMuZGlydHk9ITF9fSxnZXQgcGFyZW50UmVuZGVyZXIoKXtyZXR1cm4gRSh0aGlzLmhvc3QpLnJlbmRlcmVyfSxpbnZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZGlydHkpe2lmKHRoaXMuZGlydHk9ITAsTS5wdXNoKHRoaXMpLHkpcmV0dXJuO3k9d2luZG93W0xdKGksMCl9fSxkaXN0cmlidXRpb246ZnVuY3Rpb24oYSl7dGhpcy5yZXNldEFsbChhKSx0aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oYSl9LHJlc2V0QWxsOmZ1bmN0aW9uKGEpe3YoYSk/ZShhKTpzKGEpO2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpdGhpcy5yZXNldEFsbChiKTthLnNoYWRvd1Jvb3QmJnRoaXMucmVzZXRBbGwoYS5zaGFkb3dSb290KSxhLm9sZGVyU2hhZG93Um9vdCYmdGhpcy5yZXNldEFsbChhLm9sZGVyU2hhZG93Um9vdCl9LGRpc3RyaWJ1dGlvblJlc29sdXRpb246ZnVuY3Rpb24oYSl7aWYodyhhKSl7Zm9yKHZhciBiPWEsYz1vKGIpLGQ9eChiKSxlPTA7ZTxkLmxlbmd0aDtlKyspdGhpcy5wb29sRGlzdHJpYnV0aW9uKGRbZV0sYyk7Zm9yKHZhciBlPWQubGVuZ3RoLTE7ZT49MDtlLS0pe3ZhciBmPWRbZV0sZz1wKGYpO2lmKGcpe3ZhciBoPWYub2xkZXJTaGFkb3dSb290O2gmJihjPW8oaCkpO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXEoY1tpXSxnKX10aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oZil9fWZvcih2YXIgaj1hLmZpcnN0Q2hpbGQ7ajtqPWoubmV4dFNpYmxpbmcpdGhpcy5kaXN0cmlidXRpb25SZXNvbHV0aW9uKGopfSxwb29sRGlzdHJpYnV0aW9uOmZ1bmN0aW9uKGEsYil7aWYoIShhIGluc3RhbmNlb2YgQikpaWYoYSBpbnN0YW5jZW9mIEEpe3ZhciBjPWE7dGhpcy51cGRhdGVEZXBlbmRlbnRBdHRyaWJ1dGVzKGMuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKSk7Zm9yKHZhciBkPSExLGU9MDtlPGIubGVuZ3RoO2UrKyl7dmFyIGE9YltlXTthJiZ0KGEsYykmJihxKGEsYyksYltlXT12b2lkIDAsZD0hMCl9aWYoIWQpZm9yKHZhciBmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZylxKGYsYyl9ZWxzZSBmb3IodmFyIGY9YS5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucG9vbERpc3RyaWJ1dGlvbihmLGIpfSxidWlsZFJlbmRlclRyZWU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5jb21wb3NlKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXSxmPWEuYXBwZW5kKGUpO3RoaXMuYnVpbGRSZW5kZXJUcmVlKGYsZSl9aWYodyhiKSl7dmFyIGc9aihiKTtnLmRpcnR5PSExfX0sY29tcG9zZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1hLnNoYWRvd1Jvb3R8fGEsZD1jLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpaWYodihkKSl7dGhpcy5hc3NvY2lhdGVOb2RlKGMpO2Zvcih2YXIgZT1mKGQpLGc9MDtnPGUubGVuZ3RoO2crKyl7dmFyIGg9ZVtnXTt1KGQsaCkmJmIucHVzaChoKX19ZWxzZSBiLnB1c2goZCk7cmV0dXJuIGJ9LGludmFsaWRhdGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dGhpcy5hdHRyaWJ1dGVzPU9iamVjdC5jcmVhdGUobnVsbCl9LHVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzOy9cLlx3Ky8udGVzdChhKSYmKGJbImNsYXNzIl09ITApLC8jXHcrLy50ZXN0KGEpJiYoYi5pZD0hMCksYS5yZXBsYWNlKC9cW1xzKihbXlxzPVx8flxdXSspL2csZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSl9fSxkZXBlbmRzT25BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXX0sYXNzb2NpYXRlTm9kZTpmdW5jdGlvbihhKXthLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz10aGlzfX07dmFyIE89L15bKi4jW2EtekEtWl98XS87Qy5wcm90b3R5cGUuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSZW5kZXJlcl87cmV0dXJuIGE/KGEuaW52YWxpZGF0ZSgpLCEwKTohMX0sQS5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1CLnByb3RvdHlwZS5nZXREaXN0cmlidXRlZE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxmKHRoaXMpfSx6LnByb3RvdHlwZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz1mdW5jdGlvbigpe3JldHVybiBoKCkscih0aGlzKXx8W119LEEucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1CLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBhLGI9ayh0aGlzKTtiJiYoYT1sKGIpKSx0aGlzLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz1hLGEmJmEuaW52YWxpZGF0ZSgpfSxhLmdldFJlbmRlcmVyRm9ySG9zdD1qLGEuZ2V0U2hhZG93VHJlZXM9eCxhLnJlbmRlckFsbFBlbmRpbmc9aCxhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzPXIsYS52aXN1YWw9e2luc2VydEJlZm9yZTpjLHJlbW92ZTpkfX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXtpZih3aW5kb3dbYl0pe2QoIWEud3JhcHBlcnNbYl0pO3ZhciBpPWZ1bmN0aW9uKGEpe2MuY2FsbCh0aGlzLGEpfTtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxlKGkucHJvdG90eXBlLHtnZXQgZm9ybSgpe3JldHVybiBoKGcodGhpcykuZm9ybSl9fSksZih3aW5kb3dbYl0saSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KGIuc2xpY2UoNCwtNykpKSxhLndyYXBwZXJzW2JdPWl9fXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLmFzc2VydCxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPWEudW53cmFwLGg9YS53cmFwLGk9WyJIVE1MQnV0dG9uRWxlbWVudCIsIkhUTUxGaWVsZFNldEVsZW1lbnQiLCJIVE1MSW5wdXRFbGVtZW50IiwiSFRNTEtleWdlbkVsZW1lbnQiLCJIVE1MTGFiZWxFbGVtZW50IiwiSFRNTExlZ2VuZEVsZW1lbnQiLCJIVE1MT2JqZWN0RWxlbWVudCIsIkhUTUxPdXRwdXRFbGVtZW50IiwiSFRNTFRleHRBcmVhRWxlbWVudCJdO2kuZm9yRWFjaChiKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX17dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXA7d2luZG93LlNlbGVjdGlvbn1iLnByb3RvdHlwZT17Z2V0IGFuY2hvck5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuYW5jaG9yTm9kZSl9LGdldCBmb2N1c05vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmFkZFJhbmdlKGQoYSkpfSxjb2xsYXBzZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5jb2xsYXBzZShlKGEpLGIpfSxjb250YWluc05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbnRhaW5zTm9kZShlKGEpLGIpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuZXh0ZW5kKGUoYSksYil9LGdldFJhbmdlQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcy5pbXBsLmdldFJhbmdlQXQoYSkpfSxyZW1vdmVSYW5nZTpmdW5jdGlvbihhKXt0aGlzLmltcGwucmVtb3ZlUmFuZ2UoZChhKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3RBbGxDaGlsZHJlbihlKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxjKHdpbmRvdy5TZWxlY3Rpb24sYix3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLGEud3JhcHBlcnMuU2VsZWN0aW9uPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ay5jYWxsKHRoaXMsYSksdGhpcy50cmVlU2NvcGVfPW5ldyBwKHRoaXMsbnVsbCl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1kb2N1bWVudFthXTtiLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7RC5jYWxsKGIuaW1wbCx6KGEpKSxlKGEsYil9ZnVuY3Rpb24gZShhLGIpe2Euc2hhZG93Um9vdCYmYi5hZG9wdE5vZGUoYS5zaGFkb3dSb290KSxhIGluc3RhbmNlb2YgbyYmZihhLGIpO2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpZShjLGIpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLm9sZGVyU2hhZG93Um9vdDtjJiZiLmFkb3B0Tm9kZShjKX1mdW5jdGlvbiBnKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19dmFyIGo9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGs9YS53cmFwcGVycy5Ob2RlLGw9YS5QYXJlbnROb2RlSW50ZXJmYWNlLG09YS53cmFwcGVycy5TZWxlY3Rpb24sbj1hLlNlbGVjdG9yc0ludGVyZmFjZSxvPWEud3JhcHBlcnMuU2hhZG93Um9vdCxwPWEuVHJlZVNjb3BlLHE9YS5jbG9uZU5vZGUscj1hLmRlZmluZVdyYXBHZXR0ZXIscz1hLmVsZW1lbnRGcm9tUG9pbnQsdD1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLHU9YS5tYXRjaGVzTmFtZXMsdj1hLm1peGluLHc9YS5yZWdpc3RlcldyYXBwZXIseD1hLnJlbmRlckFsbFBlbmRpbmcseT1hLnJld3JhcCx6PWEudW53cmFwLEE9YS53cmFwLEI9YS53cmFwRXZlbnRUYXJnZXRNZXRob2RzLEM9KGEud3JhcE5vZGVMaXN0LG5ldyBXZWFrTWFwKTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGsucHJvdG90eXBlKSxyKGIsImRvY3VtZW50RWxlbWVudCIpLHIoYiwiYm9keSIpLHIoYiwiaGVhZCIpLFsiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImdldEVsZW1lbnRCeUlkIl0uZm9yRWFjaChjKTt2YXIgRD1kb2N1bWVudC5hZG9wdE5vZGUsRT1kb2N1bWVudC5nZXRTZWxlY3Rpb247aWYodihiLnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkKGEsdGhpcyksYX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBzKHRoaXMsdGhpcyxhLGIpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHEoYSxiLHRoaXMuaW1wbCl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB4KCksbmV3IG0oRS5jYWxsKHoodGhpcykpKX19KSxkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQpe3ZhciBGPWRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDtiLnByb3RvdHlwZS5yZWdpc3RlckVsZW1lbnQ9ZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhP3ZvaWQodGhpcy5pbXBsPWEpOmY/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChmLGIpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYil9dmFyIGUsZjtpZih2b2lkIDAhPT1jJiYoZT1jLnByb3RvdHlwZSxmPWMuZXh0ZW5kcyksZXx8KGU9T2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChlKSl0aHJvdyBuZXcgRXJyb3IoIk5vdFN1cHBvcnRlZEVycm9yIik7Zm9yKHZhciBnLGg9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLGk9W107aCYmIShnPWEubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KGgpKTspaS5wdXNoKGgpLGg9T2JqZWN0LmdldFByb3RvdHlwZU9mKGgpO2lmKCFnKXRocm93IG5ldyBFcnJvcigiTm90U3VwcG9ydGVkRXJyb3IiKTtmb3IodmFyIGo9T2JqZWN0LmNyZWF0ZShnKSxrPWkubGVuZ3RoLTE7az49MDtrLS0paj1PYmplY3QuY3JlYXRlKGopO1siY3JlYXRlZENhbGxiYWNrIiwiYXR0YWNoZWRDYWxsYmFjayIsImRldGFjaGVkQ2FsbGJhY2siLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWVbYV07YiYmKGpbYV09ZnVuY3Rpb24oKXtBKHRoaXMpaW5zdGFuY2VvZiBkfHx5KHRoaXMpLGIuYXBwbHkoQSh0aGlzKSxhcmd1bWVudHMpfSl9KTt2YXIgbD17cHJvdG90eXBlOmp9O2YmJihsLmV4dGVuZHM9ZiksZC5wcm90b3R5cGU9ZSxkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kLGEuY29uc3RydWN0b3JUYWJsZS5zZXQoaixkKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLnNldChlLGopO0YuY2FsbCh6KHRoaXMpLGIsbCk7cmV0dXJuIGR9LHQoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJyZWdpc3RlckVsZW1lbnQiXSl9dChbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudCx3aW5kb3cuSFRNTEh0bWxFbGVtZW50XSxbImFwcGVuZENoaWxkIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJjb250YWlucyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lTlMiLCJpbnNlcnRCZWZvcmUiLCJxdWVyeVNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZUNoaWxkIiwicmVwbGFjZUNoaWxkIl0uY29uY2F0KHUpKSx0KFt3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnRdLFsiYWRvcHROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRhaW5zIiwiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImVsZW1lbnRGcm9tUG9pbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldFNlbGVjdGlvbiJdKSx2KGIucHJvdG90eXBlLGopLHYoYi5wcm90b3R5cGUsbCksdihiLnByb3RvdHlwZSxuKSx2KGIucHJvdG90eXBlLHtnZXQgaW1wbGVtZW50YXRpb24oKXt2YXIgYT1DLmdldCh0aGlzKTtyZXR1cm4gYT9hOihhPW5ldyBnKHoodGhpcykuaW1wbGVtZW50YXRpb24pLEMuc2V0KHRoaXMsYSksYSl9LGdldCBkZWZhdWx0Vmlldygpe3JldHVybiBBKHoodGhpcykuZGVmYXVsdFZpZXcpfX0pLHcod2luZG93LkRvY3VtZW50LGIsZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSksd2luZG93LkhUTUxEb2N1bWVudCYmdyh3aW5kb3cuSFRNTERvY3VtZW50LGIpLEIoW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnRdKSxoKGcsImNyZWF0ZURvY3VtZW50VHlwZSIpLGgoZywiY3JlYXRlRG9jdW1lbnQiKSxoKGcsImNyZWF0ZUhUTUxEb2N1bWVudCIpLGkoZywiaGFzRmVhdHVyZSIpLHcod2luZG93LkRPTUltcGxlbWVudGF0aW9uLGcpLHQoW3dpbmRvdy5ET01JbXBsZW1lbnRhdGlvbl0sWyJjcmVhdGVEb2N1bWVudFR5cGUiLCJjcmVhdGVEb2N1bWVudCIsImNyZWF0ZUhUTUxEb2N1bWVudCIsImhhc0ZlYXR1cmUiXSksYS5hZG9wdE5vZGVOb1JlbW92ZT1kLGEud3JhcHBlcnMuRE9NSW1wbGVtZW50YXRpb249ZyxhLndyYXBwZXJzLkRvY3VtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5FdmVudFRhcmdldCxkPWEud3JhcHBlcnMuU2VsZWN0aW9uLGU9YS5taXhpbixmPWEucmVnaXN0ZXJXcmFwcGVyLGc9YS5yZW5kZXJBbGxQZW5kaW5nLGg9YS51bndyYXAsaT1hLnVud3JhcElmTmVlZGVkLGo9YS53cmFwLGs9d2luZG93LldpbmRvdyxsPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLG09d2luZG93LmdldFNlbGVjdGlvbjtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxrLnByb3RvdHlwZS5nZXRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGoodGhpc3x8d2luZG93KS5nZXRDb21wdXRlZFN0eWxlKGkoYSksYil9LGsucHJvdG90eXBlLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiBqKHRoaXN8fHdpbmRvdykuZ2V0U2VsZWN0aW9uKCl9LGRlbGV0ZSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSxkZWxldGUgd2luZG93LmdldFNlbGVjdGlvbixbImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdLmZvckVhY2goZnVuY3Rpb24oYSl7ay5wcm90b3R5cGVbYV09ZnVuY3Rpb24oKXt2YXIgYj1qKHRoaXN8fHdpbmRvdyk7cmV0dXJuIGJbYV0uYXBwbHkoYixhcmd1bWVudHMpfSxkZWxldGUgd2luZG93W2FdfSksZShiLnByb3RvdHlwZSx7Z2V0Q29tcHV0ZWRTdHlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBnKCksbC5jYWxsKGgodGhpcyksaShhKSxiKX0sZ2V0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoKSxuZXcgZChtLmNhbGwoaCh0aGlzKSkpfSxnZXQgZG9jdW1lbnQoKXtyZXR1cm4gaihoKHRoaXMpLmRvY3VtZW50KX19KSxmKGssYix3aW5kb3cpLGEud3JhcHBlcnMuV2luZG93PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEudW53cmFwLGM9d2luZG93LkRhdGFUcmFuc2Zlcnx8d2luZG93LkNsaXBib2FyZCxkPWMucHJvdG90eXBlLnNldERyYWdJbWFnZTtjLnByb3RvdHlwZS5zZXREcmFnSW1hZ2U9ZnVuY3Rpb24oYSxjLGUpe2QuY2FsbCh0aGlzLGIoYSksYyxlKX19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFyIGI9Y1thXSxkPXdpbmRvd1tiXTtpZihkKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpLGY9ZS5jb25zdHJ1Y3Rvcjt3aW5kb3dbYl09Zn19dmFyIGM9KGEuaXNXcmFwcGVyRm9yLHthOiJIVE1MQW5jaG9yRWxlbWVudCIsYXJlYToiSFRNTEFyZWFFbGVtZW50IixhdWRpbzoiSFRNTEF1ZGlvRWxlbWVudCIsYmFzZToiSFRNTEJhc2VFbGVtZW50Iixib2R5OiJIVE1MQm9keUVsZW1lbnQiLGJyOiJIVE1MQlJFbGVtZW50IixidXR0b246IkhUTUxCdXR0b25FbGVtZW50IixjYW52YXM6IkhUTUxDYW52YXNFbGVtZW50IixjYXB0aW9uOiJIVE1MVGFibGVDYXB0aW9uRWxlbWVudCIsY29sOiJIVE1MVGFibGVDb2xFbGVtZW50Iixjb250ZW50OiJIVE1MQ29udGVudEVsZW1lbnQiLGRhdGE6IkhUTUxEYXRhRWxlbWVudCIsZGF0YWxpc3Q6IkhUTUxEYXRhTGlzdEVsZW1lbnQiLGRlbDoiSFRNTE1vZEVsZW1lbnQiLGRpcjoiSFRNTERpcmVjdG9yeUVsZW1lbnQiLGRpdjoiSFRNTERpdkVsZW1lbnQiLGRsOiJIVE1MRExpc3RFbGVtZW50IixlbWJlZDoiSFRNTEVtYmVkRWxlbWVudCIsZmllbGRzZXQ6IkhUTUxGaWVsZFNldEVsZW1lbnQiLGZvbnQ6IkhUTUxGb250RWxlbWVudCIsZm9ybToiSFRNTEZvcm1FbGVtZW50IixmcmFtZToiSFRNTEZyYW1lRWxlbWVudCIsZnJhbWVzZXQ6IkhUTUxGcmFtZVNldEVsZW1lbnQiLGgxOiJIVE1MSGVhZGluZ0VsZW1lbnQiLGhlYWQ6IkhUTUxIZWFkRWxlbWVudCIsaHI6IkhUTUxIUkVsZW1lbnQiLGh0bWw6IkhUTUxIdG1sRWxlbWVudCIsaWZyYW1lOiJIVE1MSUZyYW1lRWxlbWVudCIsaW1nOiJIVE1MSW1hZ2VFbGVtZW50IixpbnB1dDoiSFRNTElucHV0RWxlbWVudCIsa2V5Z2VuOiJIVE1MS2V5Z2VuRWxlbWVudCIsbGFiZWw6IkhUTUxMYWJlbEVsZW1lbnQiLGxlZ2VuZDoiSFRNTExlZ2VuZEVsZW1lbnQiLGxpOiJIVE1MTElFbGVtZW50IixsaW5rOiJIVE1MTGlua0VsZW1lbnQiLG1hcDoiSFRNTE1hcEVsZW1lbnQiLG1hcnF1ZWU6IkhUTUxNYXJxdWVlRWxlbWVudCIsbWVudToiSFRNTE1lbnVFbGVtZW50IixtZW51aXRlbToiSFRNTE1lbnVJdGVtRWxlbWVudCIsbWV0YToiSFRNTE1ldGFFbGVtZW50IixtZXRlcjoiSFRNTE1ldGVyRWxlbWVudCIsb2JqZWN0OiJIVE1MT2JqZWN0RWxlbWVudCIsb2w6IkhUTUxPTGlzdEVsZW1lbnQiLG9wdGdyb3VwOiJIVE1MT3B0R3JvdXBFbGVtZW50IixvcHRpb246IkhUTUxPcHRpb25FbGVtZW50IixvdXRwdXQ6IkhUTUxPdXRwdXRFbGVtZW50IixwOiJIVE1MUGFyYWdyYXBoRWxlbWVudCIscGFyYW06IkhUTUxQYXJhbUVsZW1lbnQiLHByZToiSFRNTFByZUVsZW1lbnQiLHByb2dyZXNzOiJIVE1MUHJvZ3Jlc3NFbGVtZW50IixxOiJIVE1MUXVvdGVFbGVtZW50IixzY3JpcHQ6IkhUTUxTY3JpcHRFbGVtZW50IixzZWxlY3Q6IkhUTUxTZWxlY3RFbGVtZW50IixzaGFkb3c6IkhUTUxTaGFkb3dFbGVtZW50Iixzb3VyY2U6IkhUTUxTb3VyY2VFbGVtZW50IixzcGFuOiJIVE1MU3BhbkVsZW1lbnQiLHN0eWxlOiJIVE1MU3R5bGVFbGVtZW50Iix0YWJsZToiSFRNTFRhYmxlRWxlbWVudCIsdGJvZHk6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0ZW1wbGF0ZToiSFRNTFRlbXBsYXRlRWxlbWVudCIsdGV4dGFyZWE6IkhUTUxUZXh0QXJlYUVsZW1lbnQiLHRoZWFkOiJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsdGltZToiSFRNTFRpbWVFbGVtZW50Iix0aXRsZToiSFRNTFRpdGxlRWxlbWVudCIsdHI6IkhUTUxUYWJsZVJvd0VsZW1lbnQiLHRyYWNrOiJIVE1MVHJhY2tFbGVtZW50Iix1bDoiSFRNTFVMaXN0RWxlbWVudCIsdmlkZW86IkhUTUxWaWRlb0VsZW1lbnQifSk7T2JqZWN0LmtleXMoYykuZm9yRWFjaChiKSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhLndyYXBwZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3dpbmRvd1tiXT1hLndyYXBwZXJzW2JdfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oKXt3aW5kb3cud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQsd2luZG93LnVud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC51bndyYXBJZk5lZWRlZCxPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsIndlYmtpdFNoYWRvd1Jvb3QiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRWxlbWVudC5wcm90b3R5cGUsInNoYWRvd1Jvb3QiKSk7dmFyIGE9RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdDtFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGI9YS5jYWxsKHRoaXMpO3JldHVybiBDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxifSxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3R9KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPSIiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7Yys9YS50ZXh0Q29udGVudCsiXG5cbiJ9KSxifHwoYz1jLnJlcGxhY2UobCwiIikpLGN9ZnVuY3Rpb24gYyhhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3JldHVybiBiLnRleHRDb250ZW50PWEsYn1mdW5jdGlvbiBkKGEpe3ZhciBiPWMoYSk7ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChiKTt2YXIgZD1bXTtpZihiLnNoZWV0KXRyeXtkPWIuc2hlZXQuY3NzUnVsZXN9Y2F0Y2goZSl7fWVsc2UgY29uc29sZS53YXJuKCJzaGVldCBub3QgZm91bmQiLGIpO3JldHVybiBiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksZH1mdW5jdGlvbiBlKCl7di5pbml0aWFsaXplZD0hMCxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHYpO3ZhciBhPXYuY29udGVudERvY3VtZW50LGI9YS5jcmVhdGVFbGVtZW50KCJiYXNlIik7Yi5ocmVmPWRvY3VtZW50LmJhc2VVUkksYS5oZWFkLmFwcGVuZENoaWxkKGIpfWZ1bmN0aW9uIGYoYSl7di5pbml0aWFsaXplZHx8ZSgpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodiksYSh2LmNvbnRlbnREb2N1bWVudCksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh2KX1mdW5jdGlvbiBnKGEsYil7aWYoYil7dmFyIGU7aWYoYS5tYXRjaCgiQGltcG9ydCIpJiZ4KXt2YXIgZz1jKGEpO2YoZnVuY3Rpb24oYSl7YS5oZWFkLmFwcGVuZENoaWxkKGcuaW1wbCksZT1nLnNoZWV0LmNzc1J1bGVzLGIoZSl9KX1lbHNlIGU9ZChhKSxiKGUpfX1mdW5jdGlvbiBoKGEpe2EmJmooKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9ZnVuY3Rpb24gaShhLGIpe3ZhciBkPWMoYSk7ZC5zZXRBdHRyaWJ1dGUoYiwiIiksZC5zZXRBdHRyaWJ1dGUoeiwiIiksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChkKX1mdW5jdGlvbiBqKCl7cmV0dXJuIHd8fCh3PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksdy5zZXRBdHRyaWJ1dGUoeiwiIiksd1t6XT0hMCksd312YXIgaz17c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihhLGMsZCl7dmFyIGU9dGhpcy5wcmVwYXJlUm9vdChhLGMsZCksZj10aGlzLmlzVHlwZUV4dGVuc2lvbihkKSxnPXRoaXMubWFrZVNjb3BlU2VsZWN0b3IoYyxmKSxoPWIoZSwhMCk7aD10aGlzLnNjb3BlQ3NzVGV4dChoLGcpLGEmJihhLnNoaW1tZWRTdHlsZT1oKSx0aGlzLmFkZENzc1RvRG9jdW1lbnQoaCxjKX0sc2hpbVN0eWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc2hpbUNzc1RleHQoYS50ZXh0Q29udGVudCxiKX0sc2hpbUNzc1RleHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT10aGlzLmluc2VydERpcmVjdGl2ZXMoYSksdGhpcy5zY29wZUNzc1RleHQoYSxiKX0sbWFrZVNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9iPyJbaXM9IithKyJdIjphOiIifSxpc1R5cGVFeHRlbnNpb246ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEuaW5kZXhPZigiLSIpPDB9LHByZXBhcmVSb290OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlZ2lzdGVyUm9vdChhLGIsYyk7cmV0dXJuIHRoaXMucmVwbGFjZVRleHRJblN0eWxlcyhkLnJvb3RTdHlsZXMsdGhpcy5pbnNlcnREaXJlY3RpdmVzKSx0aGlzLnJlbW92ZVN0eWxlcyhhLGQucm9vdFN0eWxlcyksdGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYSxiKSxkLnNjb3BlU3R5bGVzfSxyZW1vdmVTdHlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpfSxyZWdpc3RlclJvb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVnaXN0cnlbYl09e3Jvb3Q6YSxuYW1lOmIsZXh0ZW5kc05hbWU6Y30sZT10aGlzLmZpbmRTdHlsZXMoYSk7ZC5yb290U3R5bGVzPWUsZC5zY29wZVN0eWxlcz1kLnJvb3RTdHlsZXM7dmFyIGY9dGhpcy5yZWdpc3RyeVtkLmV4dGVuZHNOYW1lXTtyZXR1cm4gZiYmKGQuc2NvcGVTdHlsZXM9Zi5zY29wZVN0eWxlcy5jb25jYXQoZC5zY29wZVN0eWxlcykpLGR9LGZpbmRTdHlsZXM6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuW107dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYixmdW5jdGlvbihhKXtyZXR1cm4hYS5oYXNBdHRyaWJ1dGUoQSl9KX0sYXBwbHlTY29wZVRvQ29udGVudDpmdW5jdGlvbihhLGIpe2EmJihBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgiKiIpLGZ1bmN0aW9uKGEpe2Euc2V0QXR0cmlidXRlKGIsIiIpfSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIiksZnVuY3Rpb24oYSl7dGhpcy5hcHBseVNjb3BlVG9Db250ZW50KGEuY29udGVudCxiKX0sdGhpcykpfSxpbnNlcnREaXJlY3RpdmVzOmZ1bmN0aW9uKGEpe3JldHVybiBhPXRoaXMuaW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzSW5Dc3NUZXh0KGEpLHRoaXMuaW5zZXJ0UG9seWZpbGxSdWxlc0luQ3NzVGV4dChhKX0saW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzSW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShtLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuc2xpY2UoMCwtMikrInsifSksYS5yZXBsYWNlKG4sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYisiIHsifSl9LGluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKG8sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5zbGljZSgwLC0xKX0pLGEucmVwbGFjZShwLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEucmVwbGFjZShiLCIiKS5yZXBsYWNlKGMsIiIpO3JldHVybiBkK2V9KX0sc2NvcGVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5leHRyYWN0VW5zY29wZWRSdWxlc0Zyb21Dc3NUZXh0KGEpO2lmKGE9dGhpcy5pbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQoYSksYT10aGlzLmNvbnZlcnRDb2xvbkhvc3QoYSksYT10aGlzLmNvbnZlcnRDb2xvbkhvc3RDb250ZXh0KGEpLGE9dGhpcy5jb252ZXJ0Q29tYmluYXRvcnMoYSksYil7dmFyIGEsZD10aGlzO2coYSxmdW5jdGlvbihjKXthPWQuc2NvcGVSdWxlcyhjLGIpfSl9cmV0dXJuIGE9YSsiXG4iK2MsYS50cmltKCl9LGV4dHJhY3RVbnNjb3BlZFJ1bGVzRnJvbUNzc1RleHQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9IiI7Yj1xLmV4ZWMoYSk7KWMrPWJbMV0uc2xpY2UoMCwtMSkrIlxuXG4iO2Zvcig7Yj1yLmV4ZWMoYSk7KWMrPWJbMF0ucmVwbGFjZShiWzJdLCIiKS5yZXBsYWNlKGJbMV0sYlszXSkrIlxuXG4iO3JldHVybiBjfSxjb252ZXJ0Q29sb25Ib3N0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RSZSx0aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvbkhvc3RDb250ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RDb250ZXh0UmUsdGhpcy5jb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyKX0sY29udmVydENvbG9uUnVsZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixkLGUpe2lmKGI9cG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGQpe2Zvcih2YXIgZixnPWQuc3BsaXQoIiwiKSxoPVtdLGk9MCxqPWcubGVuZ3RoO2o+aSYmKGY9Z1tpXSk7aSsrKWY9Zi50cmltKCksaC5wdXNoKGMoYixmLGUpKTtyZXR1cm4gaC5qb2luKCIsIil9cmV0dXJuIGIrZX0pfSxjb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYi5tYXRjaChzKT90aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcihhLGIsYyk6YStiK2MrIiwgIitiKyIgIithK2N9LGNvbG9uSG9zdFBhcnRSZXBsYWNlcjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGErYi5yZXBsYWNlKHMsIiIpK2N9LGNvbnZlcnRDb21iaW5hdG9yczpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGNvbWJpbmF0b3JzUmUubGVuZ3RoO2IrKylhPWEucmVwbGFjZShjb21iaW5hdG9yc1JlW2JdLCIgIik7cmV0dXJuIGF9LHNjb3BlUnVsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz0iIjtyZXR1cm4gYSYmQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2Euc2VsZWN0b3JUZXh0JiZhLnN0eWxlJiZhLnN0eWxlLmNzc1RleHQ/KGMrPXRoaXMuc2NvcGVTZWxlY3RvcihhLnNlbGVjdG9yVGV4dCxiLHRoaXMuc3RyaWN0U3R5bGluZykrIiB7XG4JIixjKz10aGlzLnByb3BlcnRpZXNGcm9tUnVsZShhKSsiXG59XG5cbiIpOmEudHlwZT09PUNTU1J1bGUuTUVESUFfUlVMRT8oYys9IkBtZWRpYSAiK2EubWVkaWEubWVkaWFUZXh0KyIge1xuIixjKz10aGlzLnNjb3BlUnVsZXMoYS5jc3NSdWxlcyxiKSxjKz0iXG59XG5cbiIpOmEuY3NzVGV4dCYmKGMrPWEuY3NzVGV4dCsiXG5cbiIpfSx0aGlzKSxjfSxzY29wZVNlbGVjdG9yOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPWEuc3BsaXQoIiwiKTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhhLGIpJiYoYT1jJiYhYS5tYXRjaChwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IpP3RoaXMuYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlKGEsYik6dGhpcy5hcHBseVNlbGVjdG9yU2NvcGUoYSxiKSksZC5wdXNoKGEpfSx0aGlzKSxkLmpvaW4oIiwgIil9LHNlbGVjdG9yTmVlZHNTY29waW5nOmZ1bmN0aW9uKGEsYil7aWYoQXJyYXkuaXNBcnJheShiKSlyZXR1cm4hMDt2YXIgYz10aGlzLm1ha2VTY29wZU1hdGNoZXIoYik7cmV0dXJuIWEubWF0Y2goYyl9LG1ha2VTY29wZU1hdGNoZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKC9cWy9nLCJcXFsiKS5yZXBsYWNlKC9cWy9nLCJcXF0iKSxuZXcgUmVnRXhwKCJeKCIrYSsiKSIrc2VsZWN0b3JSZVN1ZmZpeCwibSIpfSxhcHBseVNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQXJyYXkuaXNBcnJheShiKT90aGlzLmFwcGx5U2VsZWN0b3JTY29wZUxpc3QoYSxiKTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGIpfSxhcHBseVNlbGVjdG9yU2NvcGVMaXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9W10sZT0wO2M9YltlXTtlKyspZC5wdXNoKHRoaXMuYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlKGEsYykpO3JldHVybiBkLmpvaW4oIiwgIil9LGFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm1hdGNoKHBvbHlmaWxsSG9zdFJlKT8oYT1hLnJlcGxhY2UocG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGIpLGEucmVwbGFjZShwb2x5ZmlsbEhvc3RSZSxiKyIgIikpOmIrIiAiK2F9LGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe2I9Yi5yZXBsYWNlKC9cW2lzPShbXlxdXSopXF0vZywiJDEiKTt2YXIgYz1bIiAiLCI+IiwiKyIsIn4iXSxkPWEsZT0iWyIrYisiXSI7cmV0dXJuIGMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1kLnNwbGl0KGEpO2Q9Yi5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9YS50cmltKCkucmVwbGFjZShwb2x5ZmlsbEhvc3RSZSwiIik7cmV0dXJuIGImJmMuaW5kZXhPZihiKTwwJiZiLmluZGV4T2YoZSk8MCYmKGE9Yi5yZXBsYWNlKC8oW146XSopKDoqKSguKikvLCIkMSIrZSsiJDIkMyIpKSxhfSkuam9pbihhKX0pLGR9LGluc2VydFBvbHlmaWxsSG9zdEluQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKGNvbG9uSG9zdENvbnRleHRSZSx0KS5yZXBsYWNlKGNvbG9uSG9zdFJlLHMpfSxwcm9wZXJ0aWVzRnJvbVJ1bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdHlsZS5jc3NUZXh0O2Euc3R5bGUuY29udGVudCYmIWEuc3R5bGUuY29udGVudC5tYXRjaCgvWyciXSt8YXR0ci8pJiYoYj1iLnJlcGxhY2UoL2NvbnRlbnQ6W147XSo7L2csImNvbnRlbnQ6ICciK2Euc3R5bGUuY29udGVudCsiJzsiKSk7dmFyIGM9YS5zdHlsZTtmb3IodmFyIGQgaW4gYykiaW5pdGlhbCI9PT1jW2RdJiYoYis9ZCsiOiBpbml0aWFsOyAiKTtyZXR1cm4gYn0scmVwbGFjZVRleHRJblN0eWxlczpmdW5jdGlvbihhLGIpe2EmJmImJihhIGluc3RhbmNlb2YgQXJyYXl8fChhPVthXSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9Yi5jYWxsKHRoaXMsYS50ZXh0Q29udGVudCl9LHRoaXMpKX0sYWRkQ3NzVG9Eb2N1bWVudDpmdW5jdGlvbihhLGIpe2EubWF0Y2goIkBpbXBvcnQiKT9pKGEsYik6aChhKX19LGw9L1wvXCpbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLy9naW0sbT0vXC9cKlxzKkBwb2x5ZmlsbCAoW14qXSpcKisoW14vKl1bXipdKlwqKykqXC8pKFtee10qPyl7L2dpbSxuPS9wb2x5ZmlsbC1uZXh0LXNlbGVjdG9yW159XSpjb250ZW50XDpbXHNdKicoW14nXSopJ1tefV0qfShbXntdKj8pey9naW0sbz0vXC9cKlxzQHBvbHlmaWxsLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxwPS8ocG9seWZpbGwtcnVsZSlbXn1dKihjb250ZW50XDpbXHNdKicoW14nXSopJ1teO10qOylbXn1dKn0vZ2ltLHE9L1wvXCpcc0Bwb2x5ZmlsbC11bnNjb3BlZC1ydWxlKFteKl0qXCorKFteLypdW14qXSpcKispKilcLy9naW0scj0vKHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUpW159XSooY29udGVudFw6W1xzXSonKFteJ10qKSdbXjtdKjspW159XSp9L2dpbSxzPSItc2hhZG93Y3NzaG9zdCIsdD0iLXNoYWRvd2Nzc2NvbnRleHQiLHU9IikoPzpcXCgoKD86XFwoW14pKF0qXFwpfFteKShdKikrPylcXCkpPyhbXix7XSopIjtjc3NDb2xvbkhvc3RSZT1uZXcgUmVnRXhwKCIoIitzK3UsImdpbSIpLGNzc0NvbG9uSG9zdENvbnRleHRSZT1uZXcgUmVnRXhwKCIoIit0K3UsImdpbSIpLHNlbGVjdG9yUmVTdWZmaXg9IihbPlxcc34rWy4sezpdW1xcc1xcU10qKT8kIixjb2xvbkhvc3RSZT0vXDpob3N0L2dpbSxjb2xvbkhvc3RDb250ZXh0UmU9L1w6aG9zdC1jb250ZXh0L2dpbSxwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3I9cysiLW5vLWNvbWJpbmF0b3IiLHBvbHlmaWxsSG9zdFJlPW5ldyBSZWdFeHAocywiZ2ltIikscG9seWZpbGxIb3N0Q29udGV4dFJlPW5ldyBSZWdFeHAodCwiZ2ltIiksY29tYmluYXRvcnNSZT1bL1xeXF4vZywvXF4vZywvXC9zaGFkb3dcLy9nLC9cL3NoYWRvdy1kZWVwXC8vZywvOjpzaGFkb3cvZywvXC9kZWVwXC8vZ107dmFyIHY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7di5zdHlsZS5kaXNwbGF5PSJub25lIjt2YXIgdyx4PW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goIkNocm9tZSIpLHk9InNoaW0tc2hhZG93ZG9tIix6PSJzaGltLXNoYWRvd2RvbS1jc3MiLEE9Im5vLXNoaW0iO2lmKHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCl7aCgic3R5bGUgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1cbiIpO3ZhciBCPXdyYXAoZG9jdW1lbnQpLEM9Qi5xdWVyeVNlbGVjdG9yKCJoZWFkIik7Qy5pbnNlcnRCZWZvcmUoaigpLEMuY2hpbGROb2Rlc1swXSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXt2YXIgYj1hLnVybFJlc29sdmVyO2lmKHdpbmRvdy5IVE1MSW1wb3J0cyYmIUhUTUxJbXBvcnRzLnVzZU5hdGl2ZSl7dmFyIGM9ImxpbmtbcmVsPXN0eWxlc2hlZXRdWyIreSsiXSIsZD0ic3R5bGVbIit5KyJdIjtIVE1MSW1wb3J0cy5pbXBvcnRlci5kb2N1bWVudFByZWxvYWRTZWxlY3RvcnMrPSIsIitjLEhUTUxJbXBvcnRzLmltcG9ydGVyLmltcG9ydHNQcmVsb2FkU2VsZWN0b3JzKz0iLCIrYyxIVE1MSW1wb3J0cy5wYXJzZXIuZG9jdW1lbnRTZWxlY3RvcnM9W0hUTUxJbXBvcnRzLnBhcnNlci5kb2N1bWVudFNlbGVjdG9ycyxjLGRdLmpvaW4oIiwiKTt2YXIgZT1IVE1MSW1wb3J0cy5wYXJzZXIucGFyc2VHZW5lcmljO0hUTUxJbXBvcnRzLnBhcnNlci5wYXJzZUdlbmVyaWM9ZnVuY3Rpb24oYSl7aWYoIWFbel0pe3ZhciBjPWEuX19pbXBvcnRFbGVtZW50fHxhO2lmKCFjLmhhc0F0dHJpYnV0ZSh5KSlyZXR1cm4gdm9pZCBlLmNhbGwodGhpcyxhKTthLl9fcmVzb3VyY2U/KGM9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksYy50ZXh0Q29udGVudD1iLnJlc29sdmVDc3NUZXh0KGEuX19yZXNvdXJjZSxhLmhyZWYpKTpiLnJlc29sdmVTdHlsZShjKSxjLnRleHRDb250ZW50PWsuc2hpbVN0eWxlKGMpLGMucmVtb3ZlQXR0cmlidXRlKHksIiIpLGMuc2V0QXR0cmlidXRlKHosIiIpLGNbel09ITAsYy5wYXJlbnROb2RlIT09QyYmKGEucGFyZW50Tm9kZT09PUM/Qy5yZXBsYWNlQ2hpbGQoYyxhKTpDLmFwcGVuZENoaWxkKGMpKSxjLl9faW1wb3J0UGFyc2VkPSEwLHRoaXMubWFya1BhcnNpbmdDb21wbGV0ZShhKSx0aGlzLnBhcnNlTmV4dCgpfX07dmFyIGY9SFRNTEltcG9ydHMucGFyc2VyLmhhc1Jlc291cmNlO0hUTUxJbXBvcnRzLnBhcnNlci5oYXNSZXNvdXJjZT1mdW5jdGlvbihhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmInN0eWxlc2hlZXQiPT09YS5yZWwmJmEuaGFzQXR0cmlidXRlKHkpP2EuX19yZXNvdXJjZTpmLmNhbGwodGhpcyxhKX19fSl9YS5TaGFkb3dDU1M9a30od2luZG93LlBsYXRmb3JtKSk6IWZ1bmN0aW9uKCl7d2luZG93LndyYXA9d2luZG93LnVud3JhcD1mdW5jdGlvbihhKXtyZXR1cm4gYX0sYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtpZihDdXN0b21FbGVtZW50cy51c2VOYXRpdmU9PT0hMSl7dmFyIGE9RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdDtFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGI9YS5jYWxsKHRoaXMpO3JldHVybiBDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxifX19KSxQbGF0Zm9ybS50ZW1wbGF0ZUNvbnRlbnQ9ZnVuY3Rpb24oYSl7aWYod2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChhKSwhYS5jb250ZW50JiYhYS5fY29udGVudCl7Zm9yKHZhciBiPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTthLmZpcnN0Q2hpbGQ7KWIuYXBwZW5kQ2hpbGQoYS5maXJzdENoaWxkKTthLl9jb250ZW50PWJ9cmV0dXJuIGEuY29udGVudHx8YS5fY29udGVudH19KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIHZvaWQgMCE9PW1bYV19ZnVuY3Rpb24gYygpe2guY2FsbCh0aGlzKSx0aGlzLl9pc0ludmFsaWQ9ITB9ZnVuY3Rpb24gZChhKXtyZXR1cm4iIj09YSYmYy5jYWxsKHRoaXMpLGEudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gYj4zMiYmMTI3PmImJi0xPT1bMzQsMzUsNjAsNjIsNjMsOTZdLmluZGV4T2YoYik/YTplbmNvZGVVUklDb21wb25lbnQoYSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGI+MzImJjEyNz5iJiYtMT09WzM0LDM1LDYwLDYyLDk2XS5pbmRleE9mKGIpP2E6ZW5jb2RlVVJJQ29tcG9uZW50KGEpfWZ1bmN0aW9uIGcoYSxnLGgpe2Z1bmN0aW9uIGkoYSl7dC5wdXNoKGEpfXZhciBqPWd8fCJzY2hlbWUgc3RhcnQiLGs9MCxsPSIiLHI9ITEscz0hMSx0PVtdO2E6Zm9yKDsoYVtrLTFdIT1vfHwwPT1rKSYmIXRoaXMuX2lzSW52YWxpZDspe3ZhciB1PWFba107c3dpdGNoKGope2Nhc2Uic2NoZW1lIHN0YXJ0IjppZighdXx8IXAudGVzdCh1KSl7aWYoZyl7aSgiSW52YWxpZCBzY2hlbWUuIik7YnJlYWsgYX1sPSIiLGo9Im5vIHNjaGVtZSI7Y29udGludWV9bCs9dS50b0xvd2VyQ2FzZSgpLGo9InNjaGVtZSI7YnJlYWs7Y2FzZSJzY2hlbWUiOmlmKHUmJnEudGVzdCh1KSlsKz11LnRvTG93ZXJDYXNlKCk7ZWxzZXtpZigiOiIhPXUpe2lmKGcpe2lmKG89PXUpYnJlYWsgYTtpKCJDb2RlIHBvaW50IG5vdCBhbGxvd2VkIGluIHNjaGVtZTogIit1KTticmVhayBhfWw9IiIsaz0wLGo9Im5vIHNjaGVtZSI7Y29udGludWV9aWYodGhpcy5fc2NoZW1lPWwsbD0iIixnKWJyZWFrIGE7Yih0aGlzLl9zY2hlbWUpJiYodGhpcy5faXNSZWxhdGl2ZT0hMCksaj0iZmlsZSI9PXRoaXMuX3NjaGVtZT8icmVsYXRpdmUiOnRoaXMuX2lzUmVsYXRpdmUmJmgmJmguX3NjaGVtZT09dGhpcy5fc2NoZW1lPyJyZWxhdGl2ZSBvciBhdXRob3JpdHkiOnRoaXMuX2lzUmVsYXRpdmU/ImF1dGhvcml0eSBmaXJzdCBzbGFzaCI6InNjaGVtZSBkYXRhIn1icmVhaztjYXNlInNjaGVtZSBkYXRhIjoiPyI9PXU/KHF1ZXJ5PSI/IixqPSJxdWVyeSIpOiIjIj09dT8odGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iik6byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fc2NoZW1lRGF0YSs9ZSh1KSk7YnJlYWs7Y2FzZSJubyBzY2hlbWUiOmlmKGgmJmIoaC5fc2NoZW1lKSl7aj0icmVsYXRpdmUiO2NvbnRpbnVlfWkoIk1pc3Npbmcgc2NoZW1lLiIpLGMuY2FsbCh0aGlzKTticmVhaztjYXNlInJlbGF0aXZlIG9yIGF1dGhvcml0eSI6aWYoIi8iIT11fHwiLyIhPWFbaysxXSl7aSgiRXhwZWN0ZWQgLywgZ290OiAiK3UpLGo9InJlbGF0aXZlIjtjb250aW51ZX1qPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2JyZWFrO2Nhc2UicmVsYXRpdmUiOmlmKHRoaXMuX2lzUmVsYXRpdmU9ITAsImZpbGUiIT10aGlzLl9zY2hlbWUmJih0aGlzLl9zY2hlbWU9aC5fc2NoZW1lKSxvPT11KXt0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PWguX3F1ZXJ5O2JyZWFrIGF9aWYoIi8iPT11fHwiXFwiPT11KSJcXCI9PXUmJmkoIlxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC4iKSxqPSJyZWxhdGl2ZSBzbGFzaCI7ZWxzZSBpZigiPyI9PXUpdGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT0iPyIsaj0icXVlcnkiO2Vsc2V7aWYoIiMiIT11KXt2YXIgdj1hW2srMV0sdz1hW2srMl07KCJmaWxlIiE9dGhpcy5fc2NoZW1lfHwhcC50ZXN0KHUpfHwiOiIhPXYmJiJ8IiE9dnx8byE9dyYmIi8iIT13JiYiXFwiIT13JiYiPyIhPXcmJiIjIiE9dykmJih0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3BhdGgucG9wKCkpLGo9InJlbGF0aXZlIHBhdGgiO2NvbnRpbnVlfXRoaXMuX2hvc3Q9aC5faG9zdCx0aGlzLl9wb3J0PWguX3BvcnQsdGhpcy5fcGF0aD1oLl9wYXRoLnNsaWNlKCksdGhpcy5fcXVlcnk9aC5fcXVlcnksdGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50In1icmVhaztjYXNlInJlbGF0aXZlIHNsYXNoIjppZigiLyIhPXUmJiJcXCIhPXUpeyJmaWxlIiE9dGhpcy5fc2NoZW1lJiYodGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCksaj0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9IlxcIj09dSYmaSgiXFwgaXMgYW4gaW52YWxpZCBjb2RlIHBvaW50LiIpLGo9ImZpbGUiPT10aGlzLl9zY2hlbWU/ImZpbGUgaG9zdCI6ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI7CmJyZWFrO2Nhc2UiYXV0aG9yaXR5IGZpcnN0IHNsYXNoIjppZigiLyIhPXUpe2koIkV4cGVjdGVkICcvJywgZ290OiAiK3UpLGo9ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI7Y29udGludWV9aj0iYXV0aG9yaXR5IHNlY29uZCBzbGFzaCI7YnJlYWs7Y2FzZSJhdXRob3JpdHkgc2Vjb25kIHNsYXNoIjppZihqPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiLCIvIiE9dSl7aSgiRXhwZWN0ZWQgJy8nLCBnb3Q6ICIrdSk7Y29udGludWV9YnJlYWs7Y2FzZSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiOmlmKCIvIiE9dSYmIlxcIiE9dSl7aj0iYXV0aG9yaXR5Ijtjb250aW51ZX1pKCJFeHBlY3RlZCBhdXRob3JpdHksIGdvdDogIit1KTticmVhaztjYXNlImF1dGhvcml0eSI6aWYoIkAiPT11KXtyJiYoaSgiQCBhbHJlYWR5IHNlZW4uIiksbCs9IiU0MCIpLHI9ITA7Zm9yKHZhciB4PTA7eDxsLmxlbmd0aDt4Kyspe3ZhciB5PWxbeF07aWYoIgkiIT15JiYiXG4iIT15JiYiXHIiIT15KWlmKCI6IiE9eXx8bnVsbCE9PXRoaXMuX3Bhc3N3b3JkKXt2YXIgej1lKHkpO251bGwhPT10aGlzLl9wYXNzd29yZD90aGlzLl9wYXNzd29yZCs9ejp0aGlzLl91c2VybmFtZSs9en1lbHNlIHRoaXMuX3Bhc3N3b3JkPSIiO2Vsc2UgaSgiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGF1dGhvcml0eS4iKX1sPSIifWVsc2V7aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dSl7ay09bC5sZW5ndGgsbD0iIixqPSJob3N0Ijtjb250aW51ZX1sKz11fWJyZWFrO2Nhc2UiZmlsZSBob3N0IjppZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11KXsyIT1sLmxlbmd0aHx8IXAudGVzdChsWzBdKXx8IjoiIT1sWzFdJiYifCIhPWxbMV0/MD09bC5sZW5ndGg/aj0icmVsYXRpdmUgcGF0aCBzdGFydCI6KHRoaXMuX2hvc3Q9ZC5jYWxsKHRoaXMsbCksbD0iIixqPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0Iik6aj0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9IgkiPT11fHwiXG4iPT11fHwiXHIiPT11P2koIkludmFsaWQgd2hpdGVzcGFjZSBpbiBmaWxlIGhvc3QuIik6bCs9dTticmVhaztjYXNlImhvc3QiOmNhc2UiaG9zdG5hbWUiOmlmKCI6IiE9dXx8cyl7aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dSl7aWYodGhpcy5faG9zdD1kLmNhbGwodGhpcyxsKSxsPSIiLGo9InJlbGF0aXZlIHBhdGggc3RhcnQiLGcpYnJlYWsgYTtjb250aW51ZX0iCSIhPXUmJiJcbiIhPXUmJiJcciIhPXU/KCJbIj09dT9zPSEwOiJdIj09dSYmKHM9ITEpLGwrPXUpOmkoIkludmFsaWQgY29kZSBwb2ludCBpbiBob3N0L2hvc3RuYW1lOiAiK3UpfWVsc2UgaWYodGhpcy5faG9zdD1kLmNhbGwodGhpcyxsKSxsPSIiLGo9InBvcnQiLCJob3N0bmFtZSI9PWcpYnJlYWsgYTticmVhaztjYXNlInBvcnQiOmlmKC9bMC05XS8udGVzdCh1KSlsKz11O2Vsc2V7aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dXx8Zyl7aWYoIiIhPWwpe3ZhciBBPXBhcnNlSW50KGwsMTApO0EhPW1bdGhpcy5fc2NoZW1lXSYmKHRoaXMuX3BvcnQ9QSsiIiksbD0iIn1pZihnKWJyZWFrIGE7aj0icmVsYXRpdmUgcGF0aCBzdGFydCI7Y29udGludWV9IgkiPT11fHwiXG4iPT11fHwiXHIiPT11P2koIkludmFsaWQgY29kZSBwb2ludCBpbiBwb3J0OiAiK3UpOmMuY2FsbCh0aGlzKX1icmVhaztjYXNlInJlbGF0aXZlIHBhdGggc3RhcnQiOmlmKCJcXCI9PXUmJmkoIidcXCcgbm90IGFsbG93ZWQgaW4gcGF0aC4iKSxqPSJyZWxhdGl2ZSBwYXRoIiwiLyIhPXUmJiJcXCIhPXUpY29udGludWU7YnJlYWs7Y2FzZSJyZWxhdGl2ZSBwYXRoIjppZihvIT11JiYiLyIhPXUmJiJcXCIhPXUmJihnfHwiPyIhPXUmJiIjIiE9dSkpIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYobCs9ZSh1KSk7ZWxzZXsiXFwiPT11JiZpKCJcXCBub3QgYWxsb3dlZCBpbiByZWxhdGl2ZSBwYXRoLiIpO3ZhciBCOyhCPW5bbC50b0xvd2VyQ2FzZSgpXSkmJihsPUIpLCIuLiI9PWw/KHRoaXMuX3BhdGgucG9wKCksIi8iIT11JiYiXFwiIT11JiZ0aGlzLl9wYXRoLnB1c2goIiIpKToiLiI9PWwmJiIvIiE9dSYmIlxcIiE9dT90aGlzLl9wYXRoLnB1c2goIiIpOiIuIiE9bCYmKCJmaWxlIj09dGhpcy5fc2NoZW1lJiYwPT10aGlzLl9wYXRoLmxlbmd0aCYmMj09bC5sZW5ndGgmJnAudGVzdChsWzBdKSYmInwiPT1sWzFdJiYobD1sWzBdKyI6IiksdGhpcy5fcGF0aC5wdXNoKGwpKSxsPSIiLCI/Ij09dT8odGhpcy5fcXVlcnk9Ij8iLGo9InF1ZXJ5Iik6IiMiPT11JiYodGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iil9YnJlYWs7Y2FzZSJxdWVyeSI6Z3x8IiMiIT11P28hPXUmJiIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dSYmKHRoaXMuX3F1ZXJ5Kz1mKHUpKToodGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iik7YnJlYWs7Y2FzZSJmcmFnbWVudCI6byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fZnJhZ21lbnQrPXUpfWsrK319ZnVuY3Rpb24gaCgpe3RoaXMuX3NjaGVtZT0iIix0aGlzLl9zY2hlbWVEYXRhPSIiLHRoaXMuX3VzZXJuYW1lPSIiLHRoaXMuX3Bhc3N3b3JkPW51bGwsdGhpcy5faG9zdD0iIix0aGlzLl9wb3J0PSIiLHRoaXMuX3BhdGg9W10sdGhpcy5fcXVlcnk9IiIsdGhpcy5fZnJhZ21lbnQ9IiIsdGhpcy5faXNJbnZhbGlkPSExLHRoaXMuX2lzUmVsYXRpdmU9ITF9ZnVuY3Rpb24gaShhLGIpe3ZvaWQgMD09PWJ8fGIgaW5zdGFuY2VvZiBpfHwoYj1uZXcgaShTdHJpbmcoYikpKSx0aGlzLl91cmw9YSxoLmNhbGwodGhpcyk7dmFyIGM9YS5yZXBsYWNlKC9eWyBcdFxyXG5cZl0rfFsgXHRcclxuXGZdKyQvZywiIik7Zy5jYWxsKHRoaXMsYyxudWxsLGIpfXZhciBqPSExO2lmKCFhLmZvcmNlSlVSTCl0cnl7dmFyIGs9bmV3IFVSTCgiYiIsImh0dHA6Ly9hIik7aj0iaHR0cDovL2EvYiI9PT1rLmhyZWZ9Y2F0Y2gobCl7fWlmKCFqKXt2YXIgbT1PYmplY3QuY3JlYXRlKG51bGwpO20uZnRwPTIxLG0uZmlsZT0wLG0uZ29waGVyPTcwLG0uaHR0cD04MCxtLmh0dHBzPTQ0MyxtLndzPTgwLG0ud3NzPTQ0Mzt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO25bIiUyZSJdPSIuIixuWyIuJTJlIl09Ii4uIixuWyIlMmUuIl09Ii4uIixuWyIlMmUlMmUiXT0iLi4iO3ZhciBvPXZvaWQgMCxwPS9bYS16QS1aXS8scT0vW2EtekEtWjAtOVwrXC1cLl0vO2kucHJvdG90eXBlPXtnZXQgaHJlZigpe2lmKHRoaXMuX2lzSW52YWxpZClyZXR1cm4gdGhpcy5fdXJsO3ZhciBhPSIiO3JldHVybigiIiE9dGhpcy5fdXNlcm5hbWV8fG51bGwhPXRoaXMuX3Bhc3N3b3JkKSYmKGE9dGhpcy5fdXNlcm5hbWUrKG51bGwhPXRoaXMuX3Bhc3N3b3JkPyI6Iit0aGlzLl9wYXNzd29yZDoiIikrIkAiKSx0aGlzLnByb3RvY29sKyh0aGlzLl9pc1JlbGF0aXZlPyIvLyIrYSt0aGlzLmhvc3Q6IiIpK3RoaXMucGF0aG5hbWUrdGhpcy5fcXVlcnkrdGhpcy5fZnJhZ21lbnR9LHNldCBocmVmKGEpe2guY2FsbCh0aGlzKSxnLmNhbGwodGhpcyxhKX0sZ2V0IHByb3RvY29sKCl7cmV0dXJuIHRoaXMuX3NjaGVtZSsiOiJ9LHNldCBwcm90b2NvbChhKXt0aGlzLl9pc0ludmFsaWR8fGcuY2FsbCh0aGlzLGErIjoiLCJzY2hlbWUgc3RhcnQiKX0sZ2V0IGhvc3QoKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkPyIiOnRoaXMuX3BvcnQ/dGhpcy5faG9zdCsiOiIrdGhpcy5fcG9ydDp0aGlzLl9ob3N0fSxzZXQgaG9zdChhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZnLmNhbGwodGhpcyxhLCJob3N0Iil9LGdldCBob3N0bmFtZSgpe3JldHVybiB0aGlzLl9ob3N0fSxzZXQgaG9zdG5hbWUoYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmZy5jYWxsKHRoaXMsYSwiaG9zdG5hbWUiKX0sZ2V0IHBvcnQoKXtyZXR1cm4gdGhpcy5fcG9ydH0sc2V0IHBvcnQoYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmZy5jYWxsKHRoaXMsYSwicG9ydCIpfSxnZXQgcGF0aG5hbWUoKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkPyIiOnRoaXMuX2lzUmVsYXRpdmU/Ii8iK3RoaXMuX3BhdGguam9pbigiLyIpOnRoaXMuX3NjaGVtZURhdGF9LHNldCBwYXRobmFtZShhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiYodGhpcy5fcGF0aD1bXSxnLmNhbGwodGhpcyxhLCJyZWxhdGl2ZSBwYXRoIHN0YXJ0IikpfSxnZXQgc2VhcmNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX3F1ZXJ5fHwiPyI9PXRoaXMuX3F1ZXJ5PyIiOnRoaXMuX3F1ZXJ5fSxzZXQgc2VhcmNoKGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJih0aGlzLl9xdWVyeT0iPyIsIj8iPT1hWzBdJiYoYT1hLnNsaWNlKDEpKSxnLmNhbGwodGhpcyxhLCJxdWVyeSIpKX0sZ2V0IGhhc2goKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkfHwhdGhpcy5fZnJhZ21lbnR8fCIjIj09dGhpcy5fZnJhZ21lbnQ/IiI6dGhpcy5fZnJhZ21lbnR9LHNldCBoYXNoKGEpe3RoaXMuX2lzSW52YWxpZHx8KHRoaXMuX2ZyYWdtZW50PSIjIiwiIyI9PWFbMF0mJihhPWEuc2xpY2UoMSkpLGcuY2FsbCh0aGlzLGEsImZyYWdtZW50IikpfX0sYS5VUkw9aX19KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9YXx8e30sZD0xO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspe3ZhciBlPWFyZ3VtZW50c1tkXTt0cnl7Zm9yKHZhciBmIGluIGUpYyhmLGUsYil9Y2F0Y2goZyl7fX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEsYixjKXt2YXIgZT1kKGIsYSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSxlKX1mdW5jdGlvbiBkKGEsYil7aWYoYSl7dmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpO3JldHVybiBjfHxkKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxiKX19RnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fChGdW5jdGlvbi5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtyZXR1cm4gZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKSxiLmFwcGx5KGEsZCl9fSksYS5taXhpbj1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixjKXt2YXIgZD0ic3RyaW5nIj09dHlwZW9mIGE/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKTphLmNsb25lTm9kZSghMCk7aWYoZC5pbm5lckhUTUw9YixjKWZvcih2YXIgZSBpbiBjKWQuc2V0QXR0cmlidXRlKGUsY1tlXSk7cmV0dXJuIGR9dmFyIGM9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQsZD1ET01Ub2tlbkxpc3QucHJvdG90eXBlLnJlbW92ZTtET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspYy5jYWxsKHRoaXMsYXJndW1lbnRzW2FdKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWQuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGEsYil7MT09YXJndW1lbnRzLmxlbmd0aCYmKGI9IXRoaXMuY29udGFpbnMoYSkpLGI/dGhpcy5hZGQoYSk6dGhpcy5yZW1vdmUoYSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUuc3dpdGNoPWZ1bmN0aW9uKGEsYil7YSYmdGhpcy5yZW1vdmUoYSksYiYmdGhpcy5hZGQoYil9O3ZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMpfSxmPXdpbmRvdy5OYW1lZE5vZGVNYXB8fHdpbmRvdy5Nb3pOYW1lZEF0dHJNYXB8fHt9O2lmKE5vZGVMaXN0LnByb3RvdHlwZS5hcnJheT1lLGYucHJvdG90eXBlLmFycmF5PWUsSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmFycmF5PWUsIXdpbmRvdy5wZXJmb3JtYW5jZSl7dmFyIGc9RGF0ZS5ub3coKTt3aW5kb3cucGVyZm9ybWFuY2U9e25vdzpmdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLWd9fX13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7cmV0dXJuIGE/ZnVuY3Rpb24oYil7cmV0dXJuIGEoZnVuY3Rpb24oKXtiKHBlcmZvcm1hbmNlLm5vdygpKX0pfTpmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9fSgpKTt2YXIgaD1bXSxpPWZ1bmN0aW9uKCl7aC5wdXNoKGFyZ3VtZW50cyl9O3dpbmRvdy5Qb2x5bWVyPWksYS5kZWxpdmVyRGVjbGFyYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIGEuZGVsaXZlckRlY2xhcmF0aW9ucz1mdW5jdGlvbigpe3Rocm93IlBvc3NpYmxlIGF0dGVtcHQgdG8gbG9hZCBQb2x5bWVyIHR3aWNlIn0saH0sd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7d2luZG93LlBvbHltZXI9PT1pJiYod2luZG93LlBvbHltZXI9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdZb3UgdHJpZWQgdG8gdXNlIHBvbHltZXIgd2l0aG91dCBsb2FkaW5nIGl0IGZpcnN0LiBUbyBsb2FkIHBvbHltZXIsIDxsaW5rIHJlbD0iaW1wb3J0IiBocmVmPSJjb21wb25lbnRzL3BvbHltZXIvcG9seW1lci5odG1sIj4nKX0pfSksYS5jcmVhdGVET009Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXthLnRlbXBsYXRlQ29udGVudD1hLnRlbXBsYXRlQ29udGVudHx8ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudH19KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7YT1hfHwod2luZG93Lkluc3BlY3Rvcj17fSk7dmFyIGI7d2luZG93LnNpbnNwZWN0PWZ1bmN0aW9uKGEsZCl7Ynx8KGI9d2luZG93Lm9wZW4oIiIsIlNoYWRvd0RPTSBJbnNwZWN0b3IiLG51bGwsITApLGIuZG9jdW1lbnQud3JpdGUoYyksYi5hcGk9e3NoYWRvd2l6ZTpzaGFkb3dpemV9KSxmKGF8fHdyYXAoZG9jdW1lbnQuYm9keSksZCl9O3ZhciBjPVsiPCFET0NUWVBFIGh0bWw+IiwiPGh0bWw+IiwiICA8aGVhZD4iLCIgICAgPHRpdGxlPlNoYWRvd0RPTSBJbnNwZWN0b3I8L3RpdGxlPiIsIiAgICA8c3R5bGU+IiwiICAgICAgYm9keSB7IiwiICAgICAgfSIsIiAgICAgIHByZSB7IiwnICAgICAgICBmb250OiA5cHQgIkNvdXJpZXIgTmV3IiwgbW9ub3NwYWNlOycsIiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNWVtOyIsIiAgICAgIH0iLCIgICAgICB0YWcgeyIsIiAgICAgICAgY29sb3I6IHB1cnBsZTsiLCIgICAgICB9IiwiICAgICAgdWwgeyIsIiAgICAgICAgIG1hcmdpbjogMDsiLCIgICAgICAgICBwYWRkaW5nOiAwOyIsIiAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7IiwiICAgICAgfSIsIiAgICAgIGxpIHsiLCIgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwiICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjFmMTsiLCIgICAgICAgICBwYWRkaW5nOiA0cHggNnB4OyIsIiAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsiLCIgICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDsiLCIgICAgICB9IiwiICAgIDwvc3R5bGU+IiwiICA8L2hlYWQ+IiwiICA8Ym9keT4iLCcgICAgPHVsIGlkPSJjcnVtYnMiPicsIiAgICA8L3VsPiIsJyAgICA8ZGl2IGlkPSJ0cmVlIj48L2Rpdj4nLCIgIDwvYm9keT4iLCI8L2h0bWw+Il0uam9pbigiXG4iKSxkPVtdLGU9ZnVuY3Rpb24oKXt2YXIgYT1iLmRvY3VtZW50LGM9YS5xdWVyeVNlbGVjdG9yKCIjY3J1bWJzIik7Yy50ZXh0Q29udGVudD0iIjtmb3IodmFyIGUsZz0wO2U9ZFtnXTtnKyspe3ZhciBoPWEuY3JlYXRlRWxlbWVudCgiYSIpO2guaHJlZj0iIyIsaC50ZXh0Q29udGVudD1lLmxvY2FsTmFtZSxoLmlkeD1nLGgub25jbGljaz1mdW5jdGlvbihhKXtmb3IodmFyIGI7ZC5sZW5ndGg+dGhpcy5pZHg7KWI9ZC5wb3AoKTtmKGIuc2hhZG93fHxiLGIpLGEucHJldmVudERlZmF1bHQoKX0sYy5hcHBlbmRDaGlsZChhLmNyZWF0ZUVsZW1lbnQoImxpIikpLmFwcGVuZENoaWxkKGgpfX0sZj1mdW5jdGlvbihhLGMpe3ZhciBmPWIuZG9jdW1lbnQ7az1bXTt2YXIgZz1jfHxhO2QucHVzaChnKSxlKCksZi5ib2R5LnF1ZXJ5U2VsZWN0b3IoIiN0cmVlIikuaW5uZXJIVE1MPSI8cHJlPiIraihhLGEuY2hpbGROb2RlcykrIjwvcHJlPiJ9LGc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxoPXtTVFlMRToxLFNDUklQVDoxLCIjY29tbWVudCI6MSxURU1QTEFURToxfSxpPWZ1bmN0aW9uKGEpe3JldHVybiBoW2Eubm9kZU5hbWVdfSxqPWZ1bmN0aW9uKGEsYixjKXtpZihpKGEpKXJldHVybiIiO3ZhciBkPWN8fCIiO2lmKGEubG9jYWxOYW1lfHwxMT09YS5ub2RlVHlwZSl7dmFyIGU9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCIsZj1kK2woYSk7ImNvbnRlbnQiPT1lJiYoYj1hLmdldERpc3RyaWJ1dGVkTm9kZXMoKSksZis9Ijxici8+Ijt2YXIgaD1kKyImbmJzcDsmbmJzcDsiO2coYixmdW5jdGlvbihhKXtmKz1qKGEsYS5jaGlsZE5vZGVzLGgpfSksZis9ZCx7YnI6MX1bZV18fChmKz0iPHRhZz4mbHQ7LyIrZSsiJmd0OzwvdGFnPiIsZis9Ijxici8+Iil9ZWxzZXt2YXIgaz1hLnRleHRDb250ZW50LnRyaW0oKTtmPWs/ZCsnIicraysnIjxici8+JzoiIn1yZXR1cm4gZn0saz1bXSxsPWZ1bmN0aW9uKGEpe3ZhciBiPSI8dGFnPiZsdDsiLGM9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCI7cmV0dXJuIGEud2Via2l0U2hhZG93Um9vdHx8YS5zaGFkb3dSb290PyhiKz0nIDxidXR0b24gaWR4PSInK2subGVuZ3RoKyciIG9uY2xpY2s9ImFwaS5zaGFkb3dpemUuY2FsbCh0aGlzKSI+JytjKyI8L2J1dHRvbj4iLGsucHVzaChhKSk6Yis9Y3x8InNoYWRvdy1yb290IixhLmF0dHJpYnV0ZXMmJmcoYS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGEpe2IrPSIgIithLm5hbWUrKGEudmFsdWU/Jz0iJythLnZhbHVlKyciJzoiIil9KSxiKz0iJmd0OzwvdGFnPiJ9O3NoYWRvd2l6ZT1mdW5jdGlvbigpe3ZhciBhPU51bWJlcih0aGlzLmF0dHJpYnV0ZXMuaWR4LnZhbHVlKSxiPWtbYV07Yj9mKGIud2Via2l0U2hhZG93Um9vdHx8Yi5zaGFkb3dSb290LGIpOihjb25zb2xlLmxvZygiYmFkIHNoYWRvd2l6ZSBub2RlIiksY29uc29sZS5kaXIodGhpcykpfSxhLm91dHB1dD1qfSh3aW5kb3cuSW5zcGVjdG9yKSxmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7YS50ZXh0Q29udGVudD0iYm9keSB7dHJhbnNpdGlvbjogb3BhY2l0eSBlYXNlLWluIDAuMnM7IH0gXG5ib2R5W3VucmVzb2x2ZWRdIHtvcGFjaXR5OiAwOyBkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsgfSBcbiI7dmFyIGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX0oUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYj1ifHxbXSxiLm1hcHx8KGI9W2JdKSxhLmFwcGx5KHRoaXMsYi5tYXAoZCkpfWZ1bmN0aW9uIGMoYSxjLGQpe3ZhciBlO3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuO2Nhc2UgMTplPW51bGw7YnJlYWs7Y2FzZSAyOmU9Yy5hcHBseSh0aGlzKTticmVhaztkZWZhdWx0OmU9YihkLGMpfWZbYV09ZX1mdW5jdGlvbiBkKGEpe3JldHVybiBmW2FdfWZ1bmN0aW9uIGUoYSxjKXtIVE1MSW1wb3J0cy53aGVuSW1wb3J0c1JlYWR5KGZ1bmN0aW9uKCl7YihjLGEpfSl9dmFyIGY9e307YS5tYXJzaGFsPWQsYS5tb2R1bGU9YyxhLnVzaW5nPWV9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmLnRleHRDb250ZW50PWQrKyxlLnB1c2goYSl9ZnVuY3Rpb24gYygpe2Zvcig7ZS5sZW5ndGg7KWUuc2hpZnQoKSgpfXZhciBkPTAsZT1bXSxmPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcod2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fEpzTXV0YXRpb25PYnNlcnZlcikoYykub2JzZXJ2ZShmLHtjaGFyYWN0ZXJEYXRhOiEwfSksYS5lbmRPZk1pY3JvdGFzaz1ifShQbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCxlKXtyZXR1cm4gYS5yZXBsYWNlKGUsZnVuY3Rpb24oYSxlLGYsZyl7dmFyIGg9Zi5yZXBsYWNlKC9bIiddL2csIiIpO3JldHVybiBoPWMoYixoLGQpLGUrIiciK2grIiciK2d9KX1mdW5jdGlvbiBjKGEsYixjKXtpZihiJiYiLyI9PT1iWzBdKXJldHVybiBiO3ZhciBlPW5ldyBVUkwoYixhKTtyZXR1cm4gYz9lLmhyZWY6ZChlLmhyZWYpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9bmV3IFVSTChkb2N1bWVudC5iYXNlVVJJKSxjPW5ldyBVUkwoYSxiKTtyZXR1cm4gYy5ob3N0PT09Yi5ob3N0JiZjLnBvcnQ9PT1iLnBvcnQmJmMucHJvdG9jb2w9PT1iLnByb3RvY29sP2UoYixjKTphfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9YS5wYXRobmFtZSxkPWIucGF0aG5hbWUsZT1jLnNwbGl0KCIvIiksZj1kLnNwbGl0KCIvIik7ZS5sZW5ndGgmJmVbMF09PT1mWzBdOyllLnNoaWZ0KCksZi5zaGlmdCgpO2Zvcih2YXIgZz0wLGg9ZS5sZW5ndGgtMTtoPmc7ZysrKWYudW5zaGlmdCgiLi4iKTtyZXR1cm4gZi5qb2luKCIvIikrYi5zZWFyY2grYi5oYXNofXZhciBmPXtyZXNvbHZlRG9tOmZ1bmN0aW9uKGEsYil7Yj1ifHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSx0aGlzLnJlc29sdmVBdHRyaWJ1dGVzKGEsYiksdGhpcy5yZXNvbHZlU3R5bGVzKGEsYik7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJ0ZW1wbGF0ZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKWQuY29udGVudCYmdGhpcy5yZXNvbHZlRG9tKGQuY29udGVudCxiKX0scmVzb2x2ZVRlbXBsYXRlOmZ1bmN0aW9uKGEpe3RoaXMucmVzb2x2ZURvbShhLmNvbnRlbnQsYS5vd25lckRvY3VtZW50LmJhc2VVUkkpfSxyZXNvbHZlU3R5bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKXRoaXMucmVzb2x2ZVN0eWxlKGQsYil9LHJlc29sdmVTdHlsZTpmdW5jdGlvbihhLGIpe2I9Ynx8YS5vd25lckRvY3VtZW50LmJhc2VVUkksYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVDc3NUZXh0KGEudGV4dENvbnRlbnQsYil9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYT1iKGEsYyxkLGcpLGIoYSxjLGQsaCl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7YS5oYXNBdHRyaWJ1dGVzJiZhLmhhc0F0dHJpYnV0ZXMoKSYmdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoYSxiKTt2YXIgYz1hJiZhLnF1ZXJ5U2VsZWN0b3JBbGwoaik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoZCxiKX0scmVzb2x2ZUVsZW1lbnRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsZCl7ZD1kfHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIGYsaD1hLmF0dHJpYnV0ZXNbZV0saT1oJiZoLnZhbHVlO2kmJmkuc2VhcmNoKGspPDAmJihmPSJzdHlsZSI9PT1lP2IoaSxkLGcpOmMoZCxpKSxoLnZhbHVlPWYpfSl9fSxnPS8odXJsXCgpKFteKV0qKShcKSkvZyxoPS8oQGltcG9ydFtcc10rKD8hdXJsXCgpKShbXjtdKikoOykvZyxpPVsiaHJlZiIsInNyYyIsImFjdGlvbiIsInN0eWxlIl0saj0iWyIraS5qb2luKCJdLFsiKSsiXSIsaz0ie3suKn19IjthLnVybFJlc29sdmVyPWZ9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3UucHVzaChhKSx0fHwodD0hMCxxKGQpKX1mdW5jdGlvbiBjKGEpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSl8fGF9ZnVuY3Rpb24gZCgpe3Q9ITE7dmFyIGE9dTt1PVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7dmFyIGI9ITE7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEudGFrZVJlY29yZHMoKTtlKGEpLGMubGVuZ3RoJiYoYS5jYWxsYmFja18oYyxhKSxiPSEwKX0pLGImJmQoKX1mdW5jdGlvbiBlKGEpe2Eubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9cC5nZXQoYik7YyYmYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Iub2JzZXJ2ZXI9PT1hJiZiLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPWE7YztjPWMucGFyZW50Tm9kZSl7dmFyIGQ9cC5nZXQoYyk7aWYoZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXSxnPWYub3B0aW9ucztpZihjPT09YXx8Zy5zdWJ0cmVlKXt2YXIgaD1iKGcpO2gmJmYuZW5xdWV1ZShoKX19fX1mdW5jdGlvbiBnKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89Kyt2fWZ1bmN0aW9uIGgoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1bXSx0aGlzLnJlbW92ZWROb2Rlcz1bXSx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBpKGEpe3ZhciBiPW5ldyBoKGEudHlwZSxhLnRhcmdldCk7cmV0dXJuIGIuYWRkZWROb2Rlcz1hLmFkZGVkTm9kZXMuc2xpY2UoKSxiLnJlbW92ZWROb2Rlcz1hLnJlbW92ZWROb2Rlcy5zbGljZSgpLGIucHJldmlvdXNTaWJsaW5nPWEucHJldmlvdXNTaWJsaW5nLGIubmV4dFNpYmxpbmc9YS5uZXh0U2libGluZyxiLmF0dHJpYnV0ZU5hbWU9YS5hdHRyaWJ1dGVOYW1lLGIuYXR0cmlidXRlTmFtZXNwYWNlPWEuYXR0cmlidXRlTmFtZXNwYWNlLGIub2xkVmFsdWU9YS5vbGRWYWx1ZSxifWZ1bmN0aW9uIGooYSxiKXtyZXR1cm4gdz1uZXcgaChhLGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIHg/eDooeD1pKHcpLHgub2xkVmFsdWU9YSx4KX1mdW5jdGlvbiBsKCl7dz14PXZvaWQgMH1mdW5jdGlvbiBtKGEpe3JldHVybiBhPT09eHx8YT09PXd9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgV2Vha01hcCxxPXdpbmRvdy5tc1NldEltbWVkaWF0ZTtpZighcSl7dmFyIHI9W10scz1TdHJpbmcoTWF0aC5yYW5kb20oKSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKGEpe2lmKGEuZGF0YT09PXMpe3ZhciBiPXI7cj1bXSxiLmZvckVhY2goZnVuY3Rpb24oYSl7YSgpfSl9fSkscT1mdW5jdGlvbihhKXtyLnB1c2goYSksd2luZG93LnBvc3RNZXNzYWdlKHMsIioiKX19dmFyIHQ9ITEsdT1bXSx2PTA7Zy5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXtpZihhPWMoYSksIWIuY2hpbGRMaXN0JiYhYi5hdHRyaWJ1dGVzJiYhYi5jaGFyYWN0ZXJEYXRhfHxiLmF0dHJpYnV0ZU9sZFZhbHVlJiYhYi5hdHRyaWJ1dGVzfHxiLmF0dHJpYnV0ZUZpbHRlciYmYi5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYhYi5hdHRyaWJ1dGVzfHxiLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSYmIWIuY2hhcmFjdGVyRGF0YSl0aHJvdyBuZXcgU3ludGF4RXJyb3I7dmFyIGQ9cC5nZXQoYSk7ZHx8cC5zZXQoYSxkPVtdKTtmb3IodmFyIGUsZj0wO2Y8ZC5sZW5ndGg7ZisrKWlmKGRbZl0ub2JzZXJ2ZXI9PT10aGlzKXtlPWRbZl0sZS5yZW1vdmVMaXN0ZW5lcnMoKSxlLm9wdGlvbnM9YjticmVha31lfHwoZT1uZXcgbyh0aGlzLGEsYiksZC5wdXNoKGUpLHRoaXMubm9kZXNfLnB1c2goYSkpLGUuYWRkTGlzdGVuZXJzKCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1wLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107aWYoZC5vYnNlcnZlcj09PXRoaXMpe2QucmVtb3ZlTGlzdGVuZXJzKCksYi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19O3ZhciB3LHg7by5wcm90b3R5cGU9e2VucXVldWU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5vYnNlcnZlci5yZWNvcmRzXyxkPWMubGVuZ3RoO2lmKGMubGVuZ3RoPjApe3ZhciBlPWNbZC0xXSxmPW4oZSxhKTtpZihmKXJldHVybiB2b2lkKGNbZC0xXT1mKX1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWcsYS5NdXRhdGlvbk9ic2VydmVyfHwoYS5NdXRhdGlvbk9ic2VydmVyPWcpfSh0aGlzKSx3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe3ZhciBiPShhLnBhdGgsYS54aHIpLGM9YS5mbGFncyxkPWZ1bmN0aW9uKGEsYil7dGhpcy5jYWNoZT17fSx0aGlzLm9ubG9hZD1hLHRoaXMub25jb21wbGV0ZT1iLHRoaXMuaW5mbGlnaHQ9MCx0aGlzLnBlbmRpbmc9e319O2QucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0Kz1hLmxlbmd0aDtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspdGhpcy5yZXF1aXJlKGIpO3RoaXMuY2hlY2tEb25lKCl9LGFkZE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbmZsaWdodCsrLHRoaXMucmVxdWlyZShhKSx0aGlzLmNoZWNrRG9uZSgpfSxyZXF1aXJlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc3JjfHxhLmhyZWY7YS5fX25vZGVVcmw9Yix0aGlzLmRlZHVwZShiLGEpfHx0aGlzLmZldGNoKGIsYSl9LGRlZHVwZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMucGVuZGluZ1thXSlyZXR1cm4gdGhpcy5wZW5kaW5nW2FdLnB1c2goYiksITA7cmV0dXJuIHRoaXMuY2FjaGVbYV0/KHRoaXMub25sb2FkKGEsYix0aGlzLmNhY2hlW2FdKSx0aGlzLnRhaWwoKSwhMCk6KHRoaXMucGVuZGluZ1thXT1bYl0sITEpfSxmZXRjaDpmdW5jdGlvbihhLGQpe2lmKGMubG9hZCYmY29uc29sZS5sb2coImZldGNoIixhLGQpLGEubWF0Y2goL15kYXRhOi8pKXt2YXIgZT1hLnNwbGl0KCIsIiksZj1lWzBdLGc9ZVsxXTtnPWYuaW5kZXhPZigiO2Jhc2U2NCIpPi0xP2F0b2IoZyk6ZGVjb2RlVVJJQ29tcG9uZW50KGcpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnJlY2VpdmUoYSxkLG51bGwsZyl9LmJpbmQodGhpcyksMCl9ZWxzZXt2YXIgaD1mdW5jdGlvbihiLGMsZSl7dGhpcy5yZWNlaXZlKGEsZCxiLGMsZSl9LmJpbmQodGhpcyk7Yi5sb2FkKGEsaCl9fSxyZWNlaXZlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy5jYWNoZVthXT1kO3ZhciBmPXRoaXMucGVuZGluZ1thXTtlJiZlIT09YSYmKHRoaXMuY2FjaGVbZV09ZCxmPWYuY29uY2F0KHRoaXMucGVuZGluZ1tlXSkpO2Zvcih2YXIgZyxoPTAsaT1mLmxlbmd0aDtpPmgmJihnPWZbaF0pO2grKyl0aGlzLm9ubG9hZChlfHxhLGcsZCksdGhpcy50YWlsKCk7dGhpcy5wZW5kaW5nW2FdPW51bGwsZSYmZSE9PWEmJih0aGlzLnBlbmRpbmdbZV09bnVsbCl9LHRhaWw6ZnVuY3Rpb24oKXstLXRoaXMuaW5mbGlnaHQsdGhpcy5jaGVja0RvbmUoKX0sY2hlY2tEb25lOmZ1bmN0aW9uKCl7dGhpcy5pbmZsaWdodHx8dGhpcy5vbmNvbXBsZXRlKCl9fSxiPWJ8fHthc3luYzohMCxvazpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdGF0dXM+PTIwMCYmYS5zdGF0dXM8MzAwfHwzMDQ9PT1hLnN0YXR1c3x8MD09PWEuc3RhdHVzfSxsb2FkOmZ1bmN0aW9uKGMsZCxlKXt2YXIgZj1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuKGEuZmxhZ3MuZGVidWd8fGEuZmxhZ3MuYnVzdCkmJihjKz0iPyIrTWF0aC5yYW5kb20oKSksZi5vcGVuKCJHRVQiLGMsYi5hc3luYyksZi5hZGRFdmVudExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixmdW5jdGlvbigpe2lmKDQ9PT1mLnJlYWR5U3RhdGUpe3ZhciBhPWYuZ2V0UmVzcG9uc2VIZWFkZXIoIkxvY2F0aW9uIiksYz1udWxsO2lmKGEpdmFyIGM9Ii8iPT09YS5zdWJzdHIoMCwxKT9sb2NhdGlvbi5vcmlnaW4rYTpjO2QuY2FsbChlLCFiLm9rKGYpJiZmLGYucmVzcG9uc2V8fGYucmVzcG9uc2VUZXh0LGMpfX0pLGYuc2VuZCgpLGZ9LGxvYWREb2N1bWVudDpmdW5jdGlvbihhLGIsYyl7dGhpcy5sb2FkKGEsYixjKS5yZXNwb25zZVR5cGU9ImRvY3VtZW50In19LGEueGhyPWIsYS5Mb2FkZXI9ZH0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLnJlbD09PWd9ZnVuY3Rpb24gYyhhKXt2YXIgYixjPWQoYSk7dHJ5e2I9YnRvYShjKX1jYXRjaChlKXtiPWJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGMpKSksY29uc29sZS53YXJuKCJTY3JpcHQgY29udGFpbmVkIG5vbi1sYXRpbiBjaGFyYWN0ZXJzIHRoYXQgd2VyZSBmb3JjZWQgdG8gbGF0aW4uIFNvbWUgY2hhcmFjdGVycyBtYXkgYmUgd3JvbmcuIixhKX1yZXR1cm4iZGF0YTp0ZXh0L2phdmFzY3JpcHQ7YmFzZTY0LCIrYn1mdW5jdGlvbiBkKGEpe3JldHVybiBhLnRleHRDb250ZW50K2UoYSl9ZnVuY3Rpb24gZShhKXt2YXIgYj1hLl9fbm9kZVVybDtpZighYil7Yj1hLm93bmVyRG9jdW1lbnQuYmFzZVVSSTt2YXIgYz0iWyIrTWF0aC5mbG9vcigxZTMqKE1hdGgucmFuZG9tKCkrMSkpKyJdIixkPWEudGV4dENvbnRlbnQubWF0Y2goL1BvbHltZXJcKFsnIl0oW14nIl0qKS8pO2M9ZCYmZFsxXXx8YyxiKz0iLyIrYysiLmpzIn1yZXR1cm4iXG4vLyMgc291cmNlVVJMPSIrYisiXG4ifWZ1bmN0aW9uIGYoYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGIudGV4dENvbnRlbnQ9YS50ZXh0Q29udGVudCxuLnJlc29sdmVVcmxzSW5TdHlsZShiKSxifXZhciBnPSJpbXBvcnQiLGg9YS5mbGFncyxpPS9UcmlkZW50Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGo9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP3dpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoZG9jdW1lbnQpOmRvY3VtZW50LGs9e2RvY3VtZW50U2VsZWN0b3JzOiJsaW5rW3JlbD0iK2crIl0iLGltcG9ydHNTZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2crIl0iLCJsaW5rW3JlbD1zdHlsZXNoZWV0XSIsInN0eWxlIiwic2NyaXB0Om5vdChbdHlwZV0pIiwnc2NyaXB0W3R5cGU9InRleHQvamF2YXNjcmlwdCJdJ10uam9pbigiLCIpLG1hcDp7bGluazoicGFyc2VMaW5rIixzY3JpcHQ6InBhcnNlU2NyaXB0IixzdHlsZToicGFyc2VTdHlsZSJ9LHBhcnNlTmV4dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubmV4dFRvUGFyc2UoKTthJiZ0aGlzLnBhcnNlKGEpfSxwYXJzZTpmdW5jdGlvbihhKXtpZih0aGlzLmlzUGFyc2VkKGEpKXJldHVybiB2b2lkKGgucGFyc2UmJmNvbnNvbGUubG9nKCJbJXNdIGlzIGFscmVhZHkgcGFyc2VkIixhLmxvY2FsTmFtZSkpO3ZhciBiPXRoaXNbdGhpcy5tYXBbYS5sb2NhbE5hbWVdXTtiJiYodGhpcy5tYXJrUGFyc2luZyhhKSxiLmNhbGwodGhpcyxhKSl9LG1hcmtQYXJzaW5nOmZ1bmN0aW9uKGEpe2gucGFyc2UmJmNvbnNvbGUubG9nKCJwYXJzaW5nIixhKSx0aGlzLnBhcnNpbmdFbGVtZW50PWF9LG1hcmtQYXJzaW5nQ29tcGxldGU6ZnVuY3Rpb24oYSl7YS5fX2ltcG9ydFBhcnNlZD0hMCxhLl9faW1wb3J0RWxlbWVudCYmKGEuX19pbXBvcnRFbGVtZW50Ll9faW1wb3J0UGFyc2VkPSEwKSx0aGlzLnBhcnNpbmdFbGVtZW50PW51bGwsaC5wYXJzZSYmY29uc29sZS5sb2coImNvbXBsZXRlZCIsYSl9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGEpe2lmKEhUTUxJbXBvcnRzLl9faW1wb3J0c1BhcnNpbmdIb29rJiZIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vayhhKSxhLmltcG9ydC5fX2ltcG9ydFBhcnNlZD0hMCx0aGlzLm1hcmtQYXJzaW5nQ29tcGxldGUoYSksYS5kaXNwYXRjaEV2ZW50KGEuX19yZXNvdXJjZT9uZXcgQ3VzdG9tRXZlbnQoImxvYWQiLHtidWJibGVzOiExfSk6bmV3IEN1c3RvbUV2ZW50KCJlcnJvciIse2J1YmJsZXM6ITF9KSksYS5fX3BlbmRpbmcpZm9yKHZhciBiO2EuX19wZW5kaW5nLmxlbmd0aDspYj1hLl9fcGVuZGluZy5zaGlmdCgpLGImJmIoe3RhcmdldDphfSk7dGhpcy5wYXJzZU5leHQoKX0scGFyc2VMaW5rOmZ1bmN0aW9uKGEpe2IoYSk/dGhpcy5wYXJzZUltcG9ydChhKTooYS5ocmVmPWEuaHJlZix0aGlzLnBhcnNlR2VuZXJpYyhhKSl9LHBhcnNlU3R5bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YTthPWYoYSksYS5fX2ltcG9ydEVsZW1lbnQ9Yix0aGlzLnBhcnNlR2VuZXJpYyhhKX0scGFyc2VHZW5lcmljOmZ1bmN0aW9uKGEpe3RoaXMudHJhY2tFbGVtZW50KGEpLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYSl9LHRyYWNrRWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1mdW5jdGlvbihkKXtiJiZiKGQpLGMubWFya1BhcnNpbmdDb21wbGV0ZShhKSxjLnBhcnNlTmV4dCgpfTtpZihhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGQpLGEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQpLGkmJiJzdHlsZSI9PT1hLmxvY2FsTmFtZSl7dmFyIGU9ITE7aWYoLTE9PWEudGV4dENvbnRlbnQuaW5kZXhPZigiQGltcG9ydCIpKWU9ITA7ZWxzZSBpZihhLnNoZWV0KXtlPSEwO2Zvcih2YXIgZixnPWEuc2hlZXQuY3NzUnVsZXMsaD1nP2cubGVuZ3RoOjAsaj0wO2g+aiYmKGY9Z1tqXSk7aisrKWYudHlwZT09PUNTU1J1bGUuSU1QT1JUX1JVTEUmJihlPWUmJkJvb2xlYW4oZi5zdHlsZVNoZWV0KSl9ZSYmYS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgibG9hZCIse2J1YmJsZXM6ITF9KSl9fSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLl9faW1wb3J0RWxlbWVudD1iLGQuc3JjPWIuc3JjP2Iuc3JjOmMoYiksYS5jdXJyZW50U2NyaXB0PWIsdGhpcy50cmFja0VsZW1lbnQoZCxmdW5jdGlvbigpe2QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSxhLmN1cnJlbnRTY3JpcHQ9bnVsbH0pLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZCl9LG5leHRUb1BhcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMucGFyc2luZ0VsZW1lbnQmJnRoaXMubmV4dFRvUGFyc2VJbkRvYyhqKX0sbmV4dFRvUGFyc2VJbkRvYzpmdW5jdGlvbihhLGMpe2Zvcih2YXIgZCxlPWEucXVlcnlTZWxlY3RvckFsbCh0aGlzLnBhcnNlU2VsZWN0b3JzRm9yTm9kZShhKSksZj0wLGc9ZS5sZW5ndGg7Zz5mJiYoZD1lW2ZdKTtmKyspaWYoIXRoaXMuaXNQYXJzZWQoZCkpcmV0dXJuIHRoaXMuaGFzUmVzb3VyY2UoZCk/YihkKT90aGlzLm5leHRUb1BhcnNlSW5Eb2MoZC5pbXBvcnQsZCk6ZDp2b2lkIDA7cmV0dXJuIGN9LHBhcnNlU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGE7cmV0dXJuIGI9PT1qP3RoaXMuZG9jdW1lbnRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzU2VsZWN0b3JzfSxpc1BhcnNlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5fX2ltcG9ydFBhcnNlZH0saGFzUmVzb3VyY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSkmJiFhLmltcG9ydD8hMTohMH19LGw9Lyh1cmxcKCkoW14pXSopKFwpKS9nLG09LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLG49e3Jlc29sdmVVcmxzSW5TdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQsYz1iLmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVVcmxzSW5Dc3NUZXh0KGEudGV4dENvbnRlbnQsYyksYX0scmVzb2x2ZVVybHNJbkNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlcGxhY2VVcmxzKGEsYixsKTtyZXR1cm4gYz10aGlzLnJlcGxhY2VVcmxzKGMsYixtKX0scmVwbGFjZVVybHM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnJlcGxhY2UoYyxmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1kLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGIuaHJlZj1mLGY9Yi5ocmVmLGMrIiciK2YrIiciK2V9KX19O2EucGFyc2VyPWssYS5wYXRoPW4sYS5pc0lFPWl9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBjKGEscSl9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGQoYSxiKXt2YXIgYz1hO2MgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KHEpKSxjLl9VUkw9Yjt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtkLnNldEF0dHJpYnV0ZSgiaHJlZiIsYiksYy5iYXNlVVJJfHwoYy5iYXNlVVJJPWIpO3ZhciBlPWMuY3JlYXRlRWxlbWVudCgibWV0YSIpO3JldHVybiBlLnNldEF0dHJpYnV0ZSgiY2hhcnNldCIsInV0Zi04IiksYy5oZWFkLmFwcGVuZENoaWxkKGUpLGMuaGVhZC5hcHBlbmRDaGlsZChkKSxhIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjLmJvZHkuaW5uZXJIVE1MPWEpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31mdW5jdGlvbiBlKGEsYil7Yj1ifHxyLGcoZnVuY3Rpb24oKXtoKGEsYil9LGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuImNvbXBsZXRlIj09PWEucmVhZHlTdGF0ZXx8YS5yZWFkeVN0YXRlPT09eX1mdW5jdGlvbiBnKGEsYil7aWYoZihiKSlhJiZhKCk7ZWxzZXt2YXIgYz1mdW5jdGlvbigpeygiY29tcGxldGUiPT09Yi5yZWFkeVN0YXRlfHxiLnJlYWR5U3RhdGU9PT15KSYmKGIucmVtb3ZlRXZlbnRMaXN0ZW5lcih6LGMpLGcoYSxiKSl9O2IuYWRkRXZlbnRMaXN0ZW5lcih6LGMpfX1mdW5jdGlvbiBoKGEsYil7ZnVuY3Rpb24gYygpe2Y9PWcmJmEmJmEoKX1mdW5jdGlvbiBkKCl7ZisrLGMoKX12YXIgZT1iLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxmPTAsZz1lLmxlbmd0aDtpZihnKWZvcih2YXIgaCxqPTA7Zz5qJiYoaD1lW2pdKTtqKyspaShoKT9kLmNhbGwoaCk6KGguYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZCksaC5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsZCkpO2Vsc2UgYygpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIG8/YS5pbXBvcnQmJiJsb2FkaW5nIiE9PWEuaW1wb3J0LnJlYWR5U3RhdGV8fGEuX19sb2FkZWQ6YS5fX2ltcG9ydFBhcnNlZH1mdW5jdGlvbiBqKGEpe2Zvcih2YXIgYixjPTAsZD1hLmxlbmd0aDtkPmMmJihiPWFbY10pO2MrKylrKGIpJiZsKGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJiJpbXBvcnQiPT09YS5yZWx9ZnVuY3Rpb24gbChhKXt2YXIgYj1hLmltcG9ydDtiP20oe3RhcmdldDphfSk6KGEuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsbSksYS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsbSkpfWZ1bmN0aW9uIG0oYSl7YS50YXJnZXQuX19sb2FkZWQ9ITB9dmFyIG49ImltcG9ydCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksbz1uLHA9YS5mbGFncyxxPSJpbXBvcnQiLHI9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7aWYobyl2YXIgcz17fTtlbHNlIHZhciB0PShhLnhocixhLkxvYWRlciksdT1hLnBhcnNlcixzPXtkb2N1bWVudHM6e30sZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzOiJsaW5rW3JlbD0iK3ErIl0iLGltcG9ydHNQcmVsb2FkU2VsZWN0b3JzOlsibGlua1tyZWw9IitxKyJdIl0uam9pbigiLCIpLGxvYWROb2RlOmZ1bmN0aW9uKGEpe3YuYWRkTm9kZShhKX0sbG9hZFN1YnRyZWU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXJzaGFsTm9kZXMoYSk7di5hZGROb2RlcyhiKX0sbWFyc2hhbE5vZGVzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5sb2FkU2VsZWN0b3JzRm9yTm9kZShhKSl9LGxvYWRTZWxlY3RvcnNGb3JOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudHx8YTtyZXR1cm4gYj09PXI/dGhpcy5kb2N1bWVudFByZWxvYWRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzUHJlbG9hZFNlbGVjdG9yc30sbG9hZGVkOmZ1bmN0aW9uKGEsYyxlKXtpZihwLmxvYWQmJmNvbnNvbGUubG9nKCJsb2FkZWQiLGEsYyksYy5fX3Jlc291cmNlPWUsYihjKSl7dmFyIGY9dGhpcy5kb2N1bWVudHNbYV07Znx8KGY9ZChlLGEpLGYuX19pbXBvcnRMaW5rPWMsdGhpcy5ib290RG9jdW1lbnQoZiksdGhpcy5kb2N1bWVudHNbYV09ZiksYy5pbXBvcnQ9Zn11LnBhcnNlTmV4dCgpfSxib290RG9jdW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5sb2FkU3VidHJlZShhKSx0aGlzLm9ic2VydmUoYSksdS5wYXJzZU5leHQoKX0sbG9hZGVkQWxsOmZ1bmN0aW9uKCl7dS5wYXJzZU5leHQoKX19LHY9bmV3IHQocy5sb2FkZWQuYmluZChzKSxzLmxvYWRlZEFsbC5iaW5kKHMpKTt2YXIgdz17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEhUTUxJbXBvcnRzLmN1cnJlbnRTY3JpcHR8fGRvY3VtZW50LmN1cnJlbnRTY3JpcHR9LGNvbmZpZ3VyYWJsZTohMH07aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCJfY3VycmVudFNjcmlwdCIsdyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9jdXJyZW50U2NyaXB0Iix3KSwhZG9jdW1lbnQuYmFzZVVSSSl7dmFyIHg9e2dldDpmdW5jdGlvbigpe3JldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZn0sY29uZmlndXJhYmxlOiEwfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsImJhc2VVUkkiLHgpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJiYXNlVVJJIix4KX12YXIgeT1IVE1MSW1wb3J0cy5pc0lFPyJjb21wbGV0ZSI6ImludGVyYWN0aXZlIix6PSJyZWFkeXN0YXRlY2hhbmdlIjtvJiZuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspYi5hZGRlZE5vZGVzJiZqKGIuYWRkZWROb2Rlcyl9KS5vYnNlcnZlKGRvY3VtZW50LmhlYWQse2NoaWxkTGlzdDohMH0pLGEuaGFzTmF0aXZlPW4sYS51c2VOYXRpdmU9byxhLmltcG9ydGVyPXMsYS53aGVuSW1wb3J0c1JlYWR5PWUsYS5JTVBPUlRfTElOS19UWVBFPXEsYS5pc0ltcG9ydExvYWRlZD1pLGEuaW1wb3J0TG9hZGVyPXZ9KHdpbmRvdy5IVE1MSW1wb3J0cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGIsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYj1hW2RdKTtkKyspImNoaWxkTGlzdCI9PT1iLnR5cGUmJmIuYWRkZWROb2Rlcy5sZW5ndGgmJmMoYi5hZGRlZE5vZGVzKX1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYixlPTAsZz1hLmxlbmd0aDtnPmUmJihiPWFbZV0pO2UrKylkKGIpJiZmLmxvYWROb2RlKGIpLGIuY2hpbGRyZW4mJmIuY2hpbGRyZW4ubGVuZ3RoJiZjKGIuY2hpbGRyZW4pfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlJiZnLmNhbGwoYSxmLmxvYWRTZWxlY3RvcnNGb3JOb2RlKGEpKX1mdW5jdGlvbiBlKGEpe2gub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfXZhciBmPShhLklNUE9SVF9MSU5LX1RZUEUsYS5pbXBvcnRlciksZz1IVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc3x8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yLGg9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoYik7YS5vYnNlcnZlPWUsZi5vYnNlcnZlPWV9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5pbXBvcnRlci5ib290RG9jdW1lbnQoYil9ImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGMuaW5pdEV2ZW50KGEsYi5idWJibGVzPT09ITE/ITE6ITAsYi5jYW5jZWxhYmxlPT09ITE/ITE6ITAsYi5kZXRhaWwpLGN9KTt2YXIgYj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe0hUTUxJbXBvcnRzLnJlYWR5PSEwLEhUTUxJbXBvcnRzLnJlYWR5VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxiLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJIVE1MSW1wb3J0c0xvYWRlZCIse2J1YmJsZXM6ITB9KSl9KSxIVE1MSW1wb3J0cy51c2VOYXRpdmV8fCgiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8ImludGVyYWN0aXZlIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJiF3aW5kb3cuYXR0YWNoRXZlbnQ/YSgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEpKX0oKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxjLGQpe3ZhciBlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7aWYoIWUpZm9yKGU9YS5maXJzdENoaWxkO2UmJmUubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspZT1lLm5leHRTaWJsaW5nO2Zvcig7ZTspYyhlLGQpIT09ITAmJmIoZSxjLGQpLGU9ZS5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhhLGIpe2Zvcih2YXIgYz1hLnNoYWRvd1Jvb3Q7YzspZChjLGIpLGM9Yy5vbGRlclNoYWRvd1Jvb3R9ZnVuY3Rpb24gZChhLGQpe2IoYSxmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8hMDp2b2lkIGMoYSxkKX0pLGMoYSxkKX1mdW5jdGlvbiBlKGEpe3JldHVybiBoKGEpPyhpKGEpLCEwKTp2b2lkIGwoYSl9ZnVuY3Rpb24gZihhKXtkKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSk/ITA6dm9pZCAwfSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gZShhKXx8ZihhKX1mdW5jdGlvbiBoKGIpe2lmKCFiLl9fdXBncmFkZWRfXyYmYi5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgiaXMiKXx8Yi5sb2NhbE5hbWUsZD1hLnJlZ2lzdHJ5W2NdO2lmKGQpcmV0dXJuIEEuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpLCEwfX1mdW5jdGlvbiBpKGEpe2woYSkscihhKSYmZChhLGZ1bmN0aW9uKGEpe2woYSl9KX1mdW5jdGlvbiBqKGEpe2lmKEUucHVzaChhKSwhRCl7RD0hMDt2YXIgYj13aW5kb3cuUGxhdGZvcm0mJndpbmRvdy5QbGF0Zm9ybS5lbmRPZk1pY3JvdGFza3x8c2V0VGltZW91dDtiKGspfX1mdW5jdGlvbiBrKCl7RD0hMTtmb3IodmFyIGEsYj1FLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWEoKTtFPVtdfWZ1bmN0aW9uIGwoYSl7Qz9qKGZ1bmN0aW9uKCl7bShhKX0pOm0oYSl9ZnVuY3Rpb24gbShhKXsoYS5hdHRhY2hlZENhbGxiYWNrfHxhLmRldGFjaGVkQ2FsbGJhY2t8fGEuX191cGdyYWRlZF9fJiZBLmRvbSkmJihBLmRvbSYmY29uc29sZS5ncm91cCgiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSkscihhKSYmKGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKSsxLGEuX19pbnNlcnRlZDwxJiYoYS5fX2luc2VydGVkPTEpLGEuX19pbnNlcnRlZD4xP0EuZG9tJiZjb25zb2xlLndhcm4oImluc2VydGVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuYXR0YWNoZWRDYWxsYmFjayYmKEEuZG9tJiZjb25zb2xlLmxvZygiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSksYS5hdHRhY2hlZENhbGxiYWNrKCkpKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpKX1mdW5jdGlvbiBuKGEpe28oYSksZChhLGZ1bmN0aW9uKGEpe28oYSl9KX1mdW5jdGlvbiBvKGEpe0M/aihmdW5jdGlvbigpe3AoYSl9KTpwKGEpfWZ1bmN0aW9uIHAoYSl7KGEuYXR0YWNoZWRDYWxsYmFja3x8YS5kZXRhY2hlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmQS5kb20pJiYoQS5kb20mJmNvbnNvbGUuZ3JvdXAoInJlbW92ZWQ6IixhLmxvY2FsTmFtZSkscihhKXx8KGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKS0xLGEuX19pbnNlcnRlZD4wJiYoYS5fX2luc2VydGVkPTApLGEuX19pbnNlcnRlZDwwP0EuZG9tJiZjb25zb2xlLndhcm4oInJlbW92ZWQ6IixhLmxvY2FsTmFtZSwiaW5zZXJ0L3JlbW92ZSBjb3VudDoiLGEuX19pbnNlcnRlZCk6YS5kZXRhY2hlZENhbGxiYWNrJiZhLmRldGFjaGVkQ2FsbGJhY2soKSksQS5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gcShhKXtyZXR1cm4gd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKTphfWZ1bmN0aW9uIHIoYSl7Zm9yKHZhciBiPWEsYz1xKGRvY3VtZW50KTtiOyl7aWYoYj09YylyZXR1cm4hMDtiPWIucGFyZW50Tm9kZXx8Yi5ob3N0fX1mdW5jdGlvbiBzKGEpe2lmKGEuc2hhZG93Um9vdCYmIWEuc2hhZG93Um9vdC5fX3dhdGNoZWQpe0EuZG9tJiZjb25zb2xlLmxvZygid2F0Y2hpbmcgc2hhZG93LXJvb3QgZm9yOiAiLGEubG9jYWxOYW1lKTtmb3IodmFyIGI9YS5zaGFkb3dSb290O2I7KXQoYiksYj1iLm9sZGVyU2hhZG93Um9vdH19ZnVuY3Rpb24gdChhKXthLl9fd2F0Y2hlZHx8KHcoYSksYS5fX3dhdGNoZWQ9ITApfWZ1bmN0aW9uIHUoYSl7aWYoQS5kb20pe3ZhciBiPWFbMF07aWYoYiYmImNoaWxkTGlzdCI9PT1iLnR5cGUmJmIuYWRkZWROb2RlcyYmYi5hZGRlZE5vZGVzKXtmb3IodmFyIGM9Yi5hZGRlZE5vZGVzWzBdO2MmJmMhPT1kb2N1bWVudCYmIWMuaG9zdDspYz1jLnBhcmVudE5vZGU7dmFyIGQ9YyYmKGMuVVJMfHxjLl9VUkx8fGMuaG9zdCYmYy5ob3N0LmxvY2FsTmFtZSl8fCIiO2Q9ZC5zcGxpdCgiLz8iKS5zaGlmdCgpLnNwbGl0KCIvIikucG9wKCl9Y29uc29sZS5ncm91cCgibXV0YXRpb25zICglZCkgWyVzXSIsYS5sZW5ndGgsZHx8IiIpfWEuZm9yRWFjaChmdW5jdGlvbihhKXsiY2hpbGRMaXN0Ij09PWEudHlwZSYmKEcoYS5hZGRlZE5vZGVzLGZ1bmN0aW9uKGEpe2EubG9jYWxOYW1lJiZnKGEpfSksRyhhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmbihhKX0pKX0pLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gdigpe3UoRi50YWtlUmVjb3JkcygpKSxrKCl9ZnVuY3Rpb24gdyhhKXtGLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX1mdW5jdGlvbiB4KGEpe3coYSl9ZnVuY3Rpb24geShhKXtBLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZURvY3VtZW50OiAiLGEuYmFzZVVSSS5zcGxpdCgiLyIpLnBvcCgpKSxnKGEpLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24geihhKXthPXEoYSk7Zm9yKHZhciBiLGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK0IrIl0iKSxkPTAsZT1jLmxlbmd0aDtlPmQmJihiPWNbZF0pO2QrKyliLmltcG9ydCYmYi5pbXBvcnQuX19wYXJzZWQmJnooYi5pbXBvcnQpO3koYSl9dmFyIEE9d2luZG93LmxvZ0ZsYWdzfHx7fSxCPXdpbmRvdy5IVE1MSW1wb3J0cz9IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOiJub25lIixDPSF3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9PT13aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyO2EuaGFzUG9seWZpbGxNdXRhdGlvbnM9Qzt2YXIgRD0hMSxFPVtdLEY9bmV3IE11dGF0aW9uT2JzZXJ2ZXIodSksRz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EuSU1QT1JUX0xJTktfVFlQRT1CLGEud2F0Y2hTaGFkb3c9cyxhLnVwZ3JhZGVEb2N1bWVudFRyZWU9eixhLnVwZ3JhZGVBbGw9ZyxhLnVwZ3JhZGVTdWJ0cmVlPWYsYS5pbnNlcnRlZE5vZGU9aSxhLm9ic2VydmVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50PXksYS50YWtlUmVjb3Jkcz12fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixnKXt2YXIgaD1nfHx7fTtpZighYil0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgYG5hbWVgIG11c3Qgbm90IGJlIGVtcHR5Iik7aWYoYi5pbmRleE9mKCItIik8MCl0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgKCduYW1lJykgbXVzdCBjb250YWluIGEgZGFzaCAoJy0nKS4gQXJndW1lbnQgcHJvdmlkZWQgd2FzICciK1N0cmluZyhiKSsiJy4iKTtpZihjKGIpKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGV4ZWN1dGUgJ3JlZ2lzdGVyRWxlbWVudCcgb24gJ0RvY3VtZW50JzogUmVnaXN0cmF0aW9uIGZhaWxlZCBmb3IgdHlwZSAnIitTdHJpbmcoYikrIicuIFRoZSB0eXBlIG5hbWUgaXMgaW52YWxpZC4iKTtpZihuKGIpKXRocm93IG5ldyBFcnJvcigiRHVwbGljYXRlRGVmaW5pdGlvbkVycm9yOiBhIHR5cGUgd2l0aCBuYW1lICciK1N0cmluZyhiKSsiJyBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQiKTtpZighaC5wcm90b3R5cGUpdGhyb3cgbmV3IEVycm9yKCJPcHRpb25zIG1pc3NpbmcgcmVxdWlyZWQgcHJvdG90eXBlIHByb3BlcnR5Iik7cmV0dXJuIGguX19uYW1lPWIudG9Mb3dlckNhc2UoKSxoLmxpZmVjeWNsZT1oLmxpZmVjeWNsZXx8e30saC5hbmNlc3RyeT1kKGguZXh0ZW5kcyksZShoKSxmKGgpLGwoaC5wcm90b3R5cGUpLG8oaC5fX25hbWUsaCksaC5jdG9yPXAoaCksaC5jdG9yLnByb3RvdHlwZT1oLnByb3RvdHlwZSxoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oLmN0b3IsYS5yZWFkeSYmYS51cGdyYWRlRG9jdW1lbnRUcmVlKGRvY3VtZW50KSxoLmN0b3J9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9MDtiPHkubGVuZ3RoO2IrKylpZihhPT09eVtiXSlyZXR1cm4hMH1mdW5jdGlvbiBkKGEpe3ZhciBiPW4oYSk7cmV0dXJuIGI/ZChiLmV4dGVuZHMpLmNvbmNhdChbYl0pOltdfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiLGM9YS5leHRlbmRzLGQ9MDtiPWEuYW5jZXN0cnlbZF07ZCsrKWM9Yi5pcyYmYi50YWc7YS50YWc9Y3x8YS5fX25hbWUsYyYmKGEuaXM9YS5fX25hbWUpfWZ1bmN0aW9uIGYoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKSxkPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKTtkPT09YS5wcm90b3R5cGUmJihiPWQpfWZvcih2YXIgZSxmPWEucHJvdG90eXBlO2YmJmYhPT1iOyllPU9iamVjdC5nZXRQcm90b3R5cGVPZihmKSxmLl9fcHJvdG9fXz1lLGY9ZTsKYS5uYXRpdmU9Yn19ZnVuY3Rpb24gZyhhKXtyZXR1cm4gaChCKGEudGFnKSxhKX1mdW5jdGlvbiBoKGIsYyl7cmV0dXJuIGMuaXMmJmIuc2V0QXR0cmlidXRlKCJpcyIsYy5pcyksYi5yZW1vdmVBdHRyaWJ1dGUoInVucmVzb2x2ZWQiKSxpKGIsYyksYi5fX3VwZ3JhZGVkX189ITAsayhiKSxhLmluc2VydGVkTm9kZShiKSxhLnVwZ3JhZGVTdWJ0cmVlKGIpLGJ9ZnVuY3Rpb24gaShhLGIpe09iamVjdC5fX3Byb3RvX18/YS5fX3Byb3RvX189Yi5wcm90b3R5cGU6KGooYSxiLnByb3RvdHlwZSxiLm5hdGl2ZSksYS5fX3Byb3RvX189Yi5wcm90b3R5cGUpfWZ1bmN0aW9uIGooYSxiLGMpe2Zvcih2YXIgZD17fSxlPWI7ZSE9PWMmJmUhPT1IVE1MRWxlbWVudC5wcm90b3R5cGU7KXtmb3IodmFyIGYsZz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKSxoPTA7Zj1nW2hdO2grKylkW2ZdfHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsZixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsZikpLGRbZl09MSk7ZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9fWZ1bmN0aW9uIGsoYSl7YS5jcmVhdGVkQ2FsbGJhY2smJmEuY3JlYXRlZENhbGxiYWNrKCl9ZnVuY3Rpb24gbChhKXtpZighYS5zZXRBdHRyaWJ1dGUuX3BvbHlmaWxsZWQpe3ZhciBiPWEuc2V0QXR0cmlidXRlO2Euc2V0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYyl7bS5jYWxsKHRoaXMsYSxjLGIpfTt2YXIgYz1hLnJlbW92ZUF0dHJpYnV0ZTthLnJlbW92ZUF0dHJpYnV0ZT1mdW5jdGlvbihhKXttLmNhbGwodGhpcyxhLG51bGwsYyl9LGEuc2V0QXR0cmlidXRlLl9wb2x5ZmlsbGVkPSEwfX1mdW5jdGlvbiBtKGEsYixjKXthPWEudG9Mb3dlckNhc2UoKTt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShhKTtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT10aGlzLmdldEF0dHJpYnV0ZShhKTt0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmZSE9PWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGEsZCxlKX1mdW5jdGlvbiBuKGEpe3JldHVybiBhP3pbYS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9ZnVuY3Rpb24gbyhhLGIpe3pbYV09Yn1mdW5jdGlvbiBwKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBnKGEpfX1mdW5jdGlvbiBxKGEsYixjKXtyZXR1cm4gYT09PUE/cihiLGMpOkMoYSxiKX1mdW5jdGlvbiByKGEsYil7dmFyIGM9bihifHxhKTtpZihjKXtpZihhPT1jLnRhZyYmYj09Yy5pcylyZXR1cm4gbmV3IGMuY3RvcjtpZighYiYmIWMuaXMpcmV0dXJuIG5ldyBjLmN0b3J9aWYoYil7dmFyIGQ9cihhKTtyZXR1cm4gZC5zZXRBdHRyaWJ1dGUoImlzIixiKSxkfXZhciBkPUIoYSk7cmV0dXJuIGEuaW5kZXhPZigiLSIpPj0wJiZpKGQsSFRNTEVsZW1lbnQpLGR9ZnVuY3Rpb24gcyhhKXtpZighYS5fX3VwZ3JhZGVkX18mJmEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoImlzIiksYz1uKGJ8fGEubG9jYWxOYW1lKTtpZihjKXtpZihiJiZjLnRhZz09YS5sb2NhbE5hbWUpcmV0dXJuIGgoYSxjKTtpZighYiYmIWMuZXh0ZW5kcylyZXR1cm4gaChhLGMpfX19ZnVuY3Rpb24gdChiKXt2YXIgYz1ELmNhbGwodGhpcyxiKTtyZXR1cm4gYS51cGdyYWRlQWxsKGMpLGN9YXx8KGE9d2luZG93LkN1c3RvbUVsZW1lbnRzPXtmbGFnczp7fX0pO3ZhciB1PWEuZmxhZ3Msdj1Cb29sZWFuKGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCksdz0hdS5yZWdpc3RlciYmdiYmIXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbDtpZih3KXt2YXIgeD1mdW5jdGlvbigpe307YS5yZWdpc3RyeT17fSxhLnVwZ3JhZGVFbGVtZW50PXgsYS53YXRjaFNoYWRvdz14LGEudXBncmFkZT14LGEudXBncmFkZUFsbD14LGEudXBncmFkZVN1YnRyZWU9eCxhLm9ic2VydmVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50PXgsYS51cGdyYWRlRG9jdW1lbnRUcmVlPXgsYS50YWtlUmVjb3Jkcz14LGEucmVzZXJ2ZWRUYWdMaXN0PVtdfWVsc2V7dmFyIHk9WyJhbm5vdGF0aW9uLXhtbCIsImNvbG9yLXByb2ZpbGUiLCJmb250LWZhY2UiLCJmb250LWZhY2Utc3JjIiwiZm9udC1mYWNlLXVyaSIsImZvbnQtZmFjZS1mb3JtYXQiLCJmb250LWZhY2UtbmFtZSIsIm1pc3NpbmctZ2x5cGgiXSx6PXt9LEE9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiLEI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudC5iaW5kKGRvY3VtZW50KSxDPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUy5iaW5kKGRvY3VtZW50KSxEPU5vZGUucHJvdG90eXBlLmNsb25lTm9kZTtkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ9Yixkb2N1bWVudC5jcmVhdGVFbGVtZW50PXIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TPXEsTm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlPXQsYS5yZWdpc3RyeT16LGEudXBncmFkZT1zfXZhciBFO0U9T2JqZWN0Ll9fcHJvdG9fX3x8dz9mdW5jdGlvbihhLGIpe3JldHVybiBhIGluc3RhbmNlb2YgYn06ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YTtjOyl7aWYoYz09PWIucHJvdG90eXBlKXJldHVybiEwO2M9Yy5fX3Byb3RvX199cmV0dXJuITF9LGEuaW5zdGFuY2VvZj1FLGEucmVzZXJ2ZWRUYWdMaXN0PXksZG9jdW1lbnQucmVnaXN0ZXI9ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50LGEuaGFzTmF0aXZlPXYsYS51c2VOYXRpdmU9d30od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1jfXZhciBjPWEuSU1QT1JUX0xJTktfVFlQRSxkPXtzZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2MrIl0iXSxtYXA6e2xpbms6InBhcnNlTGluayJ9LHBhcnNlOmZ1bmN0aW9uKGEpe2lmKCFhLl9fcGFyc2VkKXthLl9fcGFyc2VkPSEwO3ZhciBiPWEucXVlcnlTZWxlY3RvckFsbChkLnNlbGVjdG9ycyk7ZShiLGZ1bmN0aW9uKGEpe2RbZC5tYXBbYS5sb2NhbE5hbWVdXShhKX0pLEN1c3RvbUVsZW1lbnRzLnVwZ3JhZGVEb2N1bWVudChhKSxDdXN0b21FbGVtZW50cy5vYnNlcnZlRG9jdW1lbnQoYSl9fSxwYXJzZUxpbms6ZnVuY3Rpb24oYSl7YihhKSYmdGhpcy5wYXJzZUltcG9ydChhKX0scGFyc2VJbXBvcnQ6ZnVuY3Rpb24oYSl7YS5pbXBvcnQmJmQucGFyc2UoYS5pbXBvcnQpfX0sZT1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EucGFyc2VyPWQsYS5JTVBPUlRfTElOS19UWVBFPWN9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe0N1c3RvbUVsZW1lbnRzLnBhcnNlci5wYXJzZShkb2N1bWVudCksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGRvY3VtZW50KTt2YXIgYT13aW5kb3cuUGxhdGZvcm0mJlBsYXRmb3JtLmVuZE9mTWljcm90YXNrP1BsYXRmb3JtLmVuZE9mTWljcm90YXNrOnNldFRpbWVvdXQ7YShmdW5jdGlvbigpe0N1c3RvbUVsZW1lbnRzLnJlYWR5PSEwLEN1c3RvbUVsZW1lbnRzLnJlYWR5VGltZT1EYXRlLm5vdygpLHdpbmRvdy5IVE1MSW1wb3J0cyYmKEN1c3RvbUVsZW1lbnRzLmVsYXBzZWQ9Q3VzdG9tRWxlbWVudHMucmVhZHlUaW1lLUhUTUxJbXBvcnRzLnJlYWR5VGltZSksZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoIldlYkNvbXBvbmVudHNSZWFkeSIse2J1YmJsZXM6ITB9KSksd2luZG93LkhUTUxJbXBvcnRzJiYoSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2s9ZnVuY3Rpb24oYSl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGEuaW1wb3J0KX0pfSl9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO3JldHVybiBiLmluaXRFdmVudChhLCEwLCEwKSxifSksImNvbXBsZXRlIj09PWRvY3VtZW50LnJlYWR5U3RhdGV8fGEuZmxhZ3MuZWFnZXIpYigpO2Vsc2UgaWYoImludGVyYWN0aXZlIiE9PWRvY3VtZW50LnJlYWR5U3RhdGV8fHdpbmRvdy5hdHRhY2hFdmVudHx8d2luZG93LkhUTUxJbXBvcnRzJiYhd2luZG93LkhUTUxJbXBvcnRzLnJlYWR5KXt2YXIgYz13aW5kb3cuSFRNTEltcG9ydHMmJiFIVE1MSW1wb3J0cy5yZWFkeT8iSFRNTEltcG9ydHNMb2FkZWQiOiJET01Db250ZW50TG9hZGVkIjt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihjLGIpfWVsc2UgYigpfSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKCl7aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXt2YXIgYT1bInVwZ3JhZGVBbGwiLCJ1cGdyYWRlU3VidHJlZSIsIm9ic2VydmVEb2N1bWVudCIsInVwZ3JhZGVEb2N1bWVudCJdLGI9e307YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2JbYV09Q3VzdG9tRWxlbWVudHNbYV19KSxhLmZvckVhY2goZnVuY3Rpb24oYSl7Q3VzdG9tRWxlbWVudHNbYV09ZnVuY3Rpb24oYyl7cmV0dXJuIGJbYV0od3JhcChjKSl9fSl9fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dGhpcy5jYWNoZT1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMubWFwPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5yZXF1ZXN0cz0wLHRoaXMucmVnZXg9YX12YXIgYz1hLmVuZE9mTWljcm90YXNrO2IucHJvdG90eXBlPXtleHRyYWN0VXJsczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkLGU9W107Yz10aGlzLnJlZ2V4LmV4ZWMoYSk7KWQ9bmV3IFVSTChjWzFdLGIpLGUucHVzaCh7bWF0Y2hlZDpjWzBdLHVybDpkLmhyZWZ9KTtyZXR1cm4gZX0scHJvY2VzczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5leHRyYWN0VXJscyhhLGIpLGU9Yy5iaW5kKG51bGwsdGhpcy5tYXApO3RoaXMuZmV0Y2goZCxlKX0sZmV0Y2g6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aDtpZighYylyZXR1cm4gYigpO2Zvcih2YXIgZCxlLGYsZz1mdW5jdGlvbigpezA9PT0tLWMmJmIoKX0saD0wO2M+aDtoKyspZD1hW2hdLGY9ZC51cmwsZT10aGlzLmNhY2hlW2ZdLGV8fChlPXRoaXMueGhyKGYpLGUubWF0Y2g9ZCx0aGlzLmNhY2hlW2ZdPWUpLGUud2FpdChnKX0saGFuZGxlWGhyOmZ1bmN0aW9uKGEpe3ZhciBiPWEubWF0Y2gsYz1iLnVybCxkPWEucmVzcG9uc2V8fGEucmVzcG9uc2VUZXh0fHwiIjt0aGlzLm1hcFtjXT1kLHRoaXMuZmV0Y2godGhpcy5leHRyYWN0VXJscyhkLGMpLGEucmVzb2x2ZSl9LHhocjpmdW5jdGlvbihhKXt0aGlzLnJlcXVlc3RzKys7dmFyIGI9bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiBiLm9wZW4oIkdFVCIsYSwhMCksYi5zZW5kKCksYi5vbmVycm9yPWIub25sb2FkPXRoaXMuaGFuZGxlWGhyLmJpbmQodGhpcyxiKSxiLnBlbmRpbmc9W10sYi5yZXNvbHZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPWIucGVuZGluZyxjPTA7YzxhLmxlbmd0aDtjKyspYVtjXSgpO2IucGVuZGluZz1udWxsfSxiLndhaXQ9ZnVuY3Rpb24oYSl7Yi5wZW5kaW5nP2IucGVuZGluZy5wdXNoKGEpOmMoYSl9LGJ9fSxhLkxvYWRlcj1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLmxvYWRlcj1uZXcgZCh0aGlzLnJlZ2V4KX12YXIgYz1hLnVybFJlc29sdmVyLGQ9YS5Mb2FkZXI7Yi5wcm90b3R5cGU9e3JlZ2V4Oi9AaW1wb3J0XHMrKD86dXJsKT9bIidcKF0qKFteJyJcKV0qKVsnIlwpXSo7L2cscmVzb2x2ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oZCl7Yyh0aGlzLmZsYXR0ZW4oYSxiLGQpKX0uYmluZCh0aGlzKTt0aGlzLmxvYWRlci5wcm9jZXNzKGEsYixkKX0scmVzb2x2ZU5vZGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEudGV4dENvbnRlbnQsZT1mdW5jdGlvbihiKXthLnRleHRDb250ZW50PWIsYyhhKX07dGhpcy5yZXNvbHZlKGQsYixlKX0sZmxhdHRlbjpmdW5jdGlvbihhLGIsZCl7Zm9yKHZhciBlLGYsZyxoPXRoaXMubG9hZGVyLmV4dHJhY3RVcmxzKGEsYiksaT0wO2k8aC5sZW5ndGg7aSsrKWU9aFtpXSxmPWUudXJsLGc9Yy5yZXNvbHZlQ3NzVGV4dChkW2ZdLGYsITApLGc9dGhpcy5mbGF0dGVuKGcsYixkKSxhPWEucmVwbGFjZShlLm1hdGNoZWQsZyk7cmV0dXJuIGF9LGxvYWRTdHlsZXM6ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXtmKyssZj09PWcmJmMmJmMoKX1mb3IodmFyIGUsZj0wLGc9YS5sZW5ndGgsaD0wO2c+aCYmKGU9YVtoXSk7aCsrKXRoaXMucmVzb2x2ZU5vZGUoZSxiLGQpfX07dmFyIGU9bmV3IGI7YS5zdHlsZVJlc29sdmVyPWV9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYShhKXtmb3IoO2EucGFyZW50Tm9kZTspYT1hLnBhcmVudE5vZGU7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGEuZ2V0RWxlbWVudEJ5SWQ/YTpudWxsfWZ1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPWEuYmluZGluZ3NfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdzXz17fSksZFtiXSYmY1tiXS5jbG9zZSgpLGRbYl09Y31mdW5jdGlvbiBjKGEsYixjKXtyZXR1cm4gY31mdW5jdGlvbiBkKGEpe3JldHVybiBudWxsPT1hPyIiOmF9ZnVuY3Rpb24gZShhLGIpe2EuZGF0YT1kKGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBlKGEsYil9fWZ1bmN0aW9uIGcoYSxiLGMsZSl7cmV0dXJuIGM/dm9pZChlP2Euc2V0QXR0cmlidXRlKGIsIiIpOmEucmVtb3ZlQXR0cmlidXRlKGIpKTp2b2lkIGEuc2V0QXR0cmlidXRlKGIsZChlKSl9ZnVuY3Rpb24gaChhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe2coYSxiLGMsZCl9fWZ1bmN0aW9uIGkoYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIHU7Y2FzZSJyYWRpbyI6Y2FzZSJzZWxlY3QtbXVsdGlwbGUiOmNhc2Uic2VsZWN0LW9uZSI6cmV0dXJuImNoYW5nZSI7Y2FzZSJyYW5nZSI6aWYoL1RyaWRlbnR8TVNJRS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSlyZXR1cm4iY2hhbmdlIjtkZWZhdWx0OnJldHVybiJpbnB1dCJ9fWZ1bmN0aW9uIGooYSxiLGMsZSl7YVtiXT0oZXx8ZCkoYyl9ZnVuY3Rpb24gayhhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3JldHVybiBqKGEsYixkLGMpfX1mdW5jdGlvbiBsKCl7fWZ1bmN0aW9uIG0oYSxiLGMsZCl7ZnVuY3Rpb24gZSgpe2Muc2V0VmFsdWUoYVtiXSksYy5kaXNjYXJkQ2hhbmdlcygpLChkfHxsKShhKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfXZhciBmPWkoYSk7cmV0dXJuIGEuYWRkRXZlbnRMaXN0ZW5lcihmLGUpLHtjbG9zZTpmdW5jdGlvbigpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihmLGUpLGMuY2xvc2UoKX0sb2JzZXJ2YWJsZV86Y319ZnVuY3Rpb24gbihhKXtyZXR1cm4gQm9vbGVhbihhKX1mdW5jdGlvbiBvKGIpe2lmKGIuZm9ybSlyZXR1cm4gcyhiLmZvcm0uZWxlbWVudHMsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiJJTlBVVCI9PWEudGFnTmFtZSYmInJhZGlvIj09YS50eXBlJiZhLm5hbWU9PWIubmFtZX0pO3ZhciBjPWEoYik7aWYoIWMpcmV0dXJuW107dmFyIGQ9Yy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJyYWRpbyJdW25hbWU9IicrYi5uYW1lKyciXScpO3JldHVybiBzKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiFhLmZvcm19KX1mdW5jdGlvbiBwKGEpeyJJTlBVVCI9PT1hLnRhZ05hbWUmJiJyYWRpbyI9PT1hLnR5cGUmJm8oYSkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLmJpbmRpbmdzXy5jaGVja2VkO2ImJmIub2JzZXJ2YWJsZV8uc2V0VmFsdWUoITEpfSl9ZnVuY3Rpb24gcShhLGIpe3ZhciBjLGUsZixnPWEucGFyZW50Tm9kZTtnIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQmJmcuYmluZGluZ3NfJiZnLmJpbmRpbmdzXy52YWx1ZSYmKGM9ZyxlPWMuYmluZGluZ3NfLnZhbHVlLGY9Yy52YWx1ZSksYS52YWx1ZT1kKGIpLGMmJmMudmFsdWUhPWYmJihlLm9ic2VydmFibGVfLnNldFZhbHVlKGMudmFsdWUpLGUub2JzZXJ2YWJsZV8uZGlzY2FyZENoYW5nZXMoKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpKX1mdW5jdGlvbiByKGEpe3JldHVybiBmdW5jdGlvbihiKXtxKGEsYil9fXZhciBzPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5maWx0ZXIpO05vZGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLmVycm9yKCJVbmhhbmRsZWQgYmluZGluZyB0byBOb2RlOiAiLHRoaXMsYSxiKX0sTm9kZS5wcm90b3R5cGUuYmluZEZpbmlzaGVkPWZ1bmN0aW9uKCl7fTt2YXIgdD1jO09iamVjdC5kZWZpbmVQcm9wZXJ0eShQbGF0Zm9ybSwiZW5hYmxlQmluZGluZ3NSZWZsZWN0aW9uIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQ9PT1ifSxzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHQ9YT9iOmMsYX0sY29uZmlndXJhYmxlOiEwfSksVGV4dC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInRleHRDb250ZW50IiE9PWEpcmV0dXJuIE5vZGUucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZihjKXJldHVybiBlKHRoaXMsYik7dmFyIGQ9YjtyZXR1cm4gZSh0aGlzLGQub3BlbihmKHRoaXMpKSksdCh0aGlzLGEsZCl9LEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSI/Ij09YVthLmxlbmd0aC0xXTtpZihkJiYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksYT1hLnNsaWNlKDAsLTEpKSxjKXJldHVybiBnKHRoaXMsYSxkLGIpO3ZhciBlPWI7cmV0dXJuIGcodGhpcyxhLGQsZS5vcGVuKGgodGhpcyxhLGQpKSksdCh0aGlzLGEsZSl9O3ZhciB1OyFmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGI9YS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94Iik7dmFyIGMsZD0wO2IuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7ZCsrLGM9Y3x8ImNsaWNrIn0pLGIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjaGFuZ2UifSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnQiKTtlLmluaXRNb3VzZUV2ZW50KCJjbGljayIsITAsITAsd2luZG93LDAsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGwpLGIuZGlzcGF0Y2hFdmVudChlKSx1PTE9PWQ/ImNoYW5nZSI6Y30oKSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxlKXtpZigidmFsdWUiIT09YSYmImNoZWNrZWQiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxlKTt0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKTt2YXIgZj0iY2hlY2tlZCI9PWE/bjpkLGc9ImNoZWNrZWQiPT1hP3A6bDtpZihlKXJldHVybiBqKHRoaXMsYSxjLGYpO3ZhciBoPWMsaT1tKHRoaXMsYSxoLGcpO3JldHVybiBqKHRoaXMsYSxoLm9wZW4oayh0aGlzLGEsZikpLGYpLGIodGhpcyxhLGkpfSxIVE1MVGV4dEFyZWFFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtpZigidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKSxjKXJldHVybiBqKHRoaXMsInZhbHVlIixiKTt2YXIgZT1iLGY9bSh0aGlzLCJ2YWx1ZSIsZSk7cmV0dXJuIGoodGhpcywidmFsdWUiLGUub3BlbihrKHRoaXMsInZhbHVlIixkKSkpLHQodGhpcyxhLGYpfSxIVE1MT3B0aW9uRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInZhbHVlIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIiksYylyZXR1cm4gcSh0aGlzLGIpO3ZhciBkPWIsZT1tKHRoaXMsInZhbHVlIixkKTtyZXR1cm4gcSh0aGlzLGQub3BlbihyKHRoaXMpKSksdCh0aGlzLGEsZSl9LEhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxkKXtpZigic2VsZWN0ZWRpbmRleCI9PT1hJiYoYT0ic2VsZWN0ZWRJbmRleCIpLCJzZWxlY3RlZEluZGV4IiE9PWEmJiJ2YWx1ZSIhPT1hKXJldHVybiBIVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxjLGQpO2lmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLGQpcmV0dXJuIGoodGhpcyxhLGMpO3ZhciBlPWMsZj1tKHRoaXMsYSxlKTtyZXR1cm4gaih0aGlzLGEsZS5vcGVuKGsodGhpcyxhKSkpLGIodGhpcyxhLGYpfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBkKGEsYil7aWYoYil7Zm9yKHZhciBkLGU9IiMiK2I7IWQmJihhPWMoYSksYS5wcm90b0NvbnRlbnRfP2Q9YS5wcm90b0NvbnRlbnRfLnF1ZXJ5U2VsZWN0b3IoZSk6YS5nZXRFbGVtZW50QnlJZCYmKGQ9YS5nZXRFbGVtZW50QnlJZChiKSksIWQmJmEudGVtcGxhdGVDcmVhdG9yXyk7KWE9YS50ZW1wbGF0ZUNyZWF0b3JfO3JldHVybiBkfX1mdW5jdGlvbiBlKGEpe3JldHVybiJ0ZW1wbGF0ZSI9PWEudGFnTmFtZSYmImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZihhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gQm9vbGVhbihMW2EudGFnTmFtZV0mJmEuaGFzQXR0cmlidXRlKCJ0ZW1wbGF0ZSIpKX1mdW5jdGlvbiBoKGEpe3JldHVybiB2b2lkIDA9PT1hLmlzVGVtcGxhdGVfJiYoYS5pc1RlbXBsYXRlXz0iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGcoYSkpLGEuaXNUZW1wbGF0ZV99ZnVuY3Rpb24gaShhLGIpe3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbChOKTtoKGEpJiZiKGEpLEcoYyxiKX1mdW5jdGlvbiBqKGEpe2Z1bmN0aW9uIGIoYSl7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhKXx8aihhLmNvbnRlbnQpfWkoYSxiKX1mdW5jdGlvbiBrKGEsYil7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKSl9KX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudDtpZighYi5kZWZhdWx0VmlldylyZXR1cm4gYjt2YXIgYz1iLnRlbXBsYXRlQ29udGVudHNPd25lcl87aWYoIWMpe2ZvcihjPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtjLmxhc3RDaGlsZDspYy5yZW1vdmVDaGlsZChjLmxhc3RDaGlsZCk7Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfPWN9cmV0dXJuIGN9ZnVuY3Rpb24gbShhKXtpZighYS5zdGFnaW5nRG9jdW1lbnRfKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7aWYoIWIuc3RhZ2luZ0RvY3VtZW50Xyl7Yi5zdGFnaW5nRG9jdW1lbnRfPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSxiLnN0YWdpbmdEb2N1bWVudF8uaXNTdGFnaW5nRG9jdW1lbnQ9ITA7dmFyIGM9Yi5zdGFnaW5nRG9jdW1lbnRfLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtjLmhyZWY9ZG9jdW1lbnQuYmFzZVVSSSxiLnN0YWdpbmdEb2N1bWVudF8uaGVhZC5hcHBlbmRDaGlsZChjKSxiLnN0YWdpbmdEb2N1bWVudF8uc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF99YS5zdGFnaW5nRG9jdW1lbnRfPWIuc3RhZ2luZ0RvY3VtZW50X31yZXR1cm4gYS5zdGFnaW5nRG9jdW1lbnRffWZ1bmN0aW9uIG4oYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD1jLmxlbmd0aDtkLS0+MDspe3ZhciBlPWNbZF07S1tlLm5hbWVdJiYoInRlbXBsYXRlIiE9PWUubmFtZSYmYi5zZXRBdHRyaWJ1dGUoZS5uYW1lLGUudmFsdWUpLGEucmVtb3ZlQXR0cmlidXRlKGUubmFtZSkpfXJldHVybiBifWZ1bmN0aW9uIG8oYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD1jLmxlbmd0aDtkLS0+MDspe3ZhciBlPWNbZF07Yi5zZXRBdHRyaWJ1dGUoZS5uYW1lLGUudmFsdWUpLGEucmVtb3ZlQXR0cmlidXRlKGUubmFtZSl9cmV0dXJuIGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxifWZ1bmN0aW9uIHAoYSxiLGMpe3ZhciBkPWEuY29udGVudDtpZihjKXJldHVybiB2b2lkIGQuYXBwZW5kQ2hpbGQoYik7Zm9yKHZhciBlO2U9Yi5maXJzdENoaWxkOylkLmFwcGVuZENoaWxkKGUpfWZ1bmN0aW9uIHEoYSl7UD9hLl9fcHJvdG9fXz1IVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZTprKGEsSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUpfWZ1bmN0aW9uIHIoYSl7YS5zZXRNb2RlbEZuX3x8KGEuc2V0TW9kZWxGbl89ZnVuY3Rpb24oKXthLnNldE1vZGVsRm5TY2hlZHVsZWRfPSExO3ZhciBiPXooYSxhLmRlbGVnYXRlXyYmYS5kZWxlZ2F0ZV8ucHJlcGFyZUJpbmRpbmcpO3coYSxiLGEubW9kZWxfKX0pLGEuc2V0TW9kZWxGblNjaGVkdWxlZF98fChhLnNldE1vZGVsRm5TY2hlZHVsZWRfPSEwLE9ic2VydmVyLnJ1bkVPTV8oYS5zZXRNb2RlbEZuXykpfWZ1bmN0aW9uIHMoYSxiLGMsZCl7aWYoYSYmYS5sZW5ndGgpe2Zvcih2YXIgZSxmPWEubGVuZ3RoLGc9MCxoPTAsaT0wLGo9ITA7Zj5oOyl7dmFyIGc9YS5pbmRleE9mKCJ7eyIsaCksaz1hLmluZGV4T2YoIltbIixoKSxsPSExLG09In19IjtpZihrPj0wJiYoMD5nfHxnPmspJiYoZz1rLGw9ITAsbT0iXV0iKSxpPTA+Zz8tMTphLmluZGV4T2YobSxnKzIpLDA+aSl7aWYoIWUpcmV0dXJuO2UucHVzaChhLnNsaWNlKGgpKTticmVha31lPWV8fFtdLGUucHVzaChhLnNsaWNlKGgsZykpO3ZhciBuPWEuc2xpY2UoZysyLGkpLnRyaW0oKTtlLnB1c2gobCksaj1qJiZsO3ZhciBvPWQmJmQobixiLGMpO2UucHVzaChudWxsPT1vP1BhdGguZ2V0KG4pOm51bGwpLGUucHVzaChvKSxoPWkrMn1yZXR1cm4gaD09PWYmJmUucHVzaCgiIiksZS5oYXNPbmVQYXRoPTU9PT1lLmxlbmd0aCxlLmlzU2ltcGxlUGF0aD1lLmhhc09uZVBhdGgmJiIiPT1lWzBdJiYiIj09ZVs0XSxlLm9ubHlPbmVUaW1lPWosZS5jb21iaW5hdG9yPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1lWzBdLGM9MTtjPGUubGVuZ3RoO2MrPTQpe3ZhciBkPWUuaGFzT25lUGF0aD9hOmFbKGMtMSkvNF07dm9pZCAwIT09ZCYmKGIrPWQpLGIrPWVbYyszXX1yZXR1cm4gYn0sZX19ZnVuY3Rpb24gdChhLGIsYyxkKXtpZihiLmhhc09uZVBhdGgpe3ZhciBlPWJbM10sZj1lP2UoZCxjLCEwKTpiWzJdLmdldFZhbHVlRnJvbShkKTtyZXR1cm4gYi5pc1NpbXBsZVBhdGg/ZjpiLmNvbWJpbmF0b3IoZil9Zm9yKHZhciBnPVtdLGg9MTtoPGIubGVuZ3RoO2grPTQpe3ZhciBlPWJbaCsyXTtnWyhoLTEpLzRdPWU/ZShkLGMpOmJbaCsxXS5nZXRWYWx1ZUZyb20oZCl9cmV0dXJuIGIuY29tYmluYXRvcihnKX1mdW5jdGlvbiB1KGEsYixjLGQpe3ZhciBlPWJbM10sZj1lP2UoZCxjLCExKTpuZXcgUGF0aE9ic2VydmVyKGQsYlsyXSk7cmV0dXJuIGIuaXNTaW1wbGVQYXRoP2Y6bmV3IE9ic2VydmVyVHJhbnNmb3JtKGYsYi5jb21iaW5hdG9yKX1mdW5jdGlvbiB2KGEsYixjLGQpe2lmKGIub25seU9uZVRpbWUpcmV0dXJuIHQoYSxiLGMsZCk7aWYoYi5oYXNPbmVQYXRoKXJldHVybiB1KGEsYixjLGQpO2Zvcih2YXIgZT1uZXcgQ29tcG91bmRPYnNlcnZlcixmPTE7ZjxiLmxlbmd0aDtmKz00KXt2YXIgZz1iW2ZdLGg9YltmKzJdO2lmKGgpe3ZhciBpPWgoZCxjLGcpO2c/ZS5hZGRQYXRoKGkpOmUuYWRkT2JzZXJ2ZXIoaSl9ZWxzZXt2YXIgaj1iW2YrMV07Zz9lLmFkZFBhdGgoai5nZXRWYWx1ZUZyb20oZCkpOmUuYWRkUGF0aChkLGopfX1yZXR1cm4gbmV3IE9ic2VydmVyVHJhbnNmb3JtKGUsYi5jb21iaW5hdG9yKX1mdW5jdGlvbiB3KGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8Yi5sZW5ndGg7ZSs9Mil7dmFyIGY9YltlXSxnPWJbZSsxXSxoPXYoZixnLGEsYyksaT1hLmJpbmQoZixoLGcub25seU9uZVRpbWUpO2kmJmQmJmQucHVzaChpKX1pZihhLmJpbmRGaW5pc2hlZCgpLGIuaXNUZW1wbGF0ZSl7YS5tb2RlbF89Yzt2YXIgaj1hLnByb2Nlc3NCaW5kaW5nRGlyZWN0aXZlc18oYik7ZCYmaiYmZC5wdXNoKGopfX1mdW5jdGlvbiB4KGEsYixjKXt2YXIgZD1hLmdldEF0dHJpYnV0ZShiKTtyZXR1cm4gcygiIj09ZD8ie3t9fSI6ZCxiLGEsYyl9ZnVuY3Rpb24geShhLGMpe2IoYSk7Zm9yKHZhciBkPVtdLGU9MDtlPGEuYXR0cmlidXRlcy5sZW5ndGg7ZSsrKXtmb3IodmFyIGY9YS5hdHRyaWJ1dGVzW2VdLGc9Zi5uYW1lLGk9Zi52YWx1ZTsiXyI9PT1nWzBdOylnPWcuc3Vic3RyaW5nKDEpO2lmKCFoKGEpfHxnIT09SiYmZyE9PUgmJmchPT1JKXt2YXIgaj1zKGksZyxhLGMpO2omJmQucHVzaChnLGopfX1yZXR1cm4gaChhKSYmKGQuaXNUZW1wbGF0ZT0hMCxkLmlmPXgoYSxKLGMpLGQuYmluZD14KGEsSCxjKSxkLnJlcGVhdD14KGEsSSxjKSwhZC5pZnx8ZC5iaW5kfHxkLnJlcGVhdHx8KGQuYmluZD1zKCJ7e319IixILGEsYykpKSxkfWZ1bmN0aW9uIHooYSxiKXtpZihhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpcmV0dXJuIHkoYSxiKTtpZihhLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUpe3ZhciBjPXMoYS5kYXRhLCJ0ZXh0Q29udGVudCIsYSxiKTtpZihjKXJldHVyblsidGV4dENvbnRlbnQiLGNdfXJldHVybltdfWZ1bmN0aW9uIEEoYSxiLGMsZCxlLGYsZyl7Zm9yKHZhciBoPWIuYXBwZW5kQ2hpbGQoYy5pbXBvcnROb2RlKGEsITEpKSxpPTAsaj1hLmZpcnN0Q2hpbGQ7ajtqPWoubmV4dFNpYmxpbmcpQShqLGgsYyxkLmNoaWxkcmVuW2krK10sZSxmLGcpO3JldHVybiBkLmlzVGVtcGxhdGUmJihIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlKGgsYSksZiYmaC5zZXREZWxlZ2F0ZV8oZikpLHcoaCxkLGUsZyksaH1mdW5jdGlvbiBCKGEsYil7dmFyIGM9eihhLGIpO2MuY2hpbGRyZW49e307Zm9yKHZhciBkPTAsZT1hLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpYy5jaGlsZHJlbltkKytdPUIoZSxiKTtyZXR1cm4gY31mdW5jdGlvbiBDKGEpe3ZhciBiPWEuaWRfO3JldHVybiBifHwoYj1hLmlkXz1TKyspLGJ9ZnVuY3Rpb24gRChhLGIpe3ZhciBjPUMoYSk7aWYoYil7dmFyIGQ9Yi5iaW5kaW5nTWFwc1tjXTtyZXR1cm4gZHx8KGQ9Yi5iaW5kaW5nTWFwc1tjXT1CKGEsYi5wcmVwYXJlQmluZGluZyl8fFtdKSxkfXZhciBkPWEuYmluZGluZ01hcF87cmV0dXJuIGR8fChkPWEuYmluZGluZ01hcF89QihhLHZvaWQgMCl8fFtdKSxkfWZ1bmN0aW9uIEUoYSl7dGhpcy5jbG9zZWQ9ITEsdGhpcy50ZW1wbGF0ZUVsZW1lbnRfPWEsdGhpcy5pbnN0YW5jZXM9W10sdGhpcy5kZXBzPXZvaWQgMCx0aGlzLml0ZXJhdGVkVmFsdWU9W10sdGhpcy5wcmVzZW50VmFsdWU9dm9pZCAwLHRoaXMuYXJyYXlPYnNlcnZlcj12b2lkIDB9dmFyIEYsRz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EuTWFwJiYiZnVuY3Rpb24iPT10eXBlb2YgYS5NYXAucHJvdG90eXBlLmZvckVhY2g/Rj1hLk1hcDooRj1mdW5jdGlvbigpe3RoaXMua2V5cz1bXSx0aGlzLnZhbHVlcz1bXX0sRi5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMua2V5cy5pbmRleE9mKGEpOzA+Yz8odGhpcy5rZXlzLnB1c2goYSksdGhpcy52YWx1ZXMucHVzaChiKSk6dGhpcy52YWx1ZXNbY109Yn0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO2lmKCEoMD5iKSlyZXR1cm4gdGhpcy52YWx1ZXNbYl19LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiAwPmI/ITE6KHRoaXMua2V5cy5zcGxpY2UoYiwxKSx0aGlzLnZhbHVlcy5zcGxpY2UoYiwxKSwhMCl9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtjPHRoaXMua2V5cy5sZW5ndGg7YysrKWEuY2FsbChifHx0aGlzLHRoaXMudmFsdWVzW2NdLHRoaXMua2V5c1tjXSx0aGlzKX19KTsiZnVuY3Rpb24iIT10eXBlb2YgZG9jdW1lbnQuY29udGFpbnMmJihEb2N1bWVudC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT10aGlzfHxhLnBhcmVudE5vZGU9PT10aGlzPyEwOnRoaXMuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGEpfSk7dmFyIEg9ImJpbmQiLEk9InJlcGVhdCIsSj0iaWYiLEs9e3RlbXBsYXRlOiEwLHJlcGVhdDohMCxiaW5kOiEwLHJlZjohMH0sTD17VEhFQUQ6ITAsVEJPRFk6ITAsVEZPT1Q6ITAsVEg6ITAsVFI6ITAsVEQ6ITAsQ09MR1JPVVA6ITAsQ09MOiEwLENBUFRJT046ITAsT1BUSU9OOiEwLE9QVEdST1VQOiEwfSxNPSJ1bmRlZmluZWQiIT10eXBlb2YgSFRNTFRlbXBsYXRlRWxlbWVudDtNJiYhZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpLGI9YS5jb250ZW50Lm93bmVyRG9jdW1lbnQsYz1iLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiaHRtbCIpKSxkPWMuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJoZWFkIikpLGU9Yi5jcmVhdGVFbGVtZW50KCJiYXNlIik7ZS5ocmVmPWRvY3VtZW50LmJhc2VVUkksZC5hcHBlbmRDaGlsZChlKX0oKTt2YXIgTj0idGVtcGxhdGUsICIrT2JqZWN0LmtleXMoTCkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvTG93ZXJDYXNlKCkrIlt0ZW1wbGF0ZV0ifSkuam9pbigiLCAiKTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe2ooZG9jdW1lbnQpLFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCl9LCExKSxNfHwoYS5IVE1MVGVtcGxhdGVFbGVtZW50PWZ1bmN0aW9uKCl7dGhyb3cgVHlwZUVycm9yKCJJbGxlZ2FsIGNvbnN0cnVjdG9yIil9KTt2YXIgTyxQPSJfX3Byb3RvX18iaW57fTsiZnVuY3Rpb24iPT10eXBlb2YgTXV0YXRpb25PYnNlcnZlciYmKE89bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXS50YXJnZXQucmVmQ2hhbmdlZF8oKX0pKSxIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlPWZ1bmN0aW9uKGEsYyl7aWYoYS50ZW1wbGF0ZUlzRGVjb3JhdGVkXylyZXR1cm4hMTt2YXIgZD1hO2QudGVtcGxhdGVJc0RlY29yYXRlZF89ITA7dmFyIGg9ZihkKSYmTSxpPWgsaz0haCxtPSExO2lmKGh8fChnKGQpPyhiKCFjKSxkPW4oYSksZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxoPU0sbT0hMCk6ZShkKSYmKGQ9byhhKSxkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwLGg9TSkpLCFoKXtxKGQpO3ZhciByPWwoZCk7ZC5jb250ZW50Xz1yLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKX1yZXR1cm4gYz9kLmluc3RhbmNlUmVmXz1jOms/cChkLGEsbSk6aSYmaihkLmNvbnRlbnQpLCEwfSxIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcD1qO3ZhciBRPWEuSFRNTFVua25vd25FbGVtZW50fHxIVE1MRWxlbWVudCxSPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50X30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9O018fChIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFEucHJvdG90eXBlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUsImNvbnRlbnQiLFIpKSxrKEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLHtiaW5kOmZ1bmN0aW9uKGEsYixjKXtpZigicmVmIiE9YSlyZXR1cm4gRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpO3ZhciBkPXRoaXMsZT1jP2I6Yi5vcGVuKGZ1bmN0aW9uKGEpe2Quc2V0QXR0cmlidXRlKCJyZWYiLGEpLGQucmVmQ2hhbmdlZF8oKX0pO3JldHVybiB0aGlzLnNldEF0dHJpYnV0ZSgicmVmIixlKSx0aGlzLnJlZkNoYW5nZWRfKCksYz92b2lkIDA6KHRoaXMuYmluZGluZ3NfP3RoaXMuYmluZGluZ3NfLnJlZj1iOnRoaXMuYmluZGluZ3NfPXtyZWY6Yn0sYil9LHByb2Nlc3NCaW5kaW5nRGlyZWN0aXZlc186ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXRlcmF0b3JfJiZ0aGlzLml0ZXJhdG9yXy5jbG9zZURlcHMoKSxhLmlmfHxhLmJpbmR8fGEucmVwZWF0Pyh0aGlzLml0ZXJhdG9yX3x8KHRoaXMuaXRlcmF0b3JfPW5ldyBFKHRoaXMpKSx0aGlzLml0ZXJhdG9yXy51cGRhdGVEZXBlbmRlbmNpZXMoYSx0aGlzLm1vZGVsXyksTyYmTy5vYnNlcnZlKHRoaXMse2F0dHJpYnV0ZXM6ITAsYXR0cmlidXRlRmlsdGVyOlsicmVmIl19KSx0aGlzLml0ZXJhdG9yXyk6dm9pZCh0aGlzLml0ZXJhdG9yXyYmKHRoaXMuaXRlcmF0b3JfLmNsb3NlKCksdGhpcy5pdGVyYXRvcl89dm9pZCAwKSl9LGNyZWF0ZUluc3RhbmNlOmZ1bmN0aW9uKGEsYixjKXtiP2M9dGhpcy5uZXdEZWxlZ2F0ZV8oYik6Y3x8KGM9dGhpcy5kZWxlZ2F0ZV8pLHRoaXMucmVmQ29udGVudF98fCh0aGlzLnJlZkNvbnRlbnRfPXRoaXMucmVmXy5jb250ZW50KTt2YXIgZD10aGlzLnJlZkNvbnRlbnRfO2lmKG51bGw9PT1kLmZpcnN0Q2hpbGQpcmV0dXJuIFQ7dmFyIGU9RChkLGMpLGY9bSh0aGlzKSxnPWYuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2cudGVtcGxhdGVDcmVhdG9yXz10aGlzLGcucHJvdG9Db250ZW50Xz1kLGcuYmluZGluZ3NfPVtdLGcudGVybWluYXRvcl89bnVsbDtmb3IodmFyIGg9Zy50ZW1wbGF0ZUluc3RhbmNlXz17Zmlyc3ROb2RlOm51bGwsbGFzdE5vZGU6bnVsbCxtb2RlbDphfSxpPTAsaj0hMSxrPWQuZmlyc3RDaGlsZDtrO2s9ay5uZXh0U2libGluZyl7bnVsbD09PWsubmV4dFNpYmxpbmcmJihqPSEwKTt2YXIgbD1BKGssZyxmLGUuY2hpbGRyZW5baSsrXSxhLGMsZy5iaW5kaW5nc18pO2wudGVtcGxhdGVJbnN0YW5jZV89aCxqJiYoZy50ZXJtaW5hdG9yXz1sKX1yZXR1cm4gaC5maXJzdE5vZGU9Zy5maXJzdENoaWxkLGgubGFzdE5vZGU9Zy5sYXN0Q2hpbGQsZy50ZW1wbGF0ZUNyZWF0b3JfPXZvaWQgMCxnLnByb3RvQ29udGVudF89dm9pZCAwLGd9LGdldCBtb2RlbCgpe3JldHVybiB0aGlzLm1vZGVsX30sc2V0IG1vZGVsKGEpe3RoaXMubW9kZWxfPWEscih0aGlzKX0sZ2V0IGJpbmRpbmdEZWxlZ2F0ZSgpe3JldHVybiB0aGlzLmRlbGVnYXRlXyYmdGhpcy5kZWxlZ2F0ZV8ucmF3fSxyZWZDaGFuZ2VkXzpmdW5jdGlvbigpe3RoaXMuaXRlcmF0b3JfJiZ0aGlzLnJlZkNvbnRlbnRfIT09dGhpcy5yZWZfLmNvbnRlbnQmJih0aGlzLnJlZkNvbnRlbnRfPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy51cGRhdGVJdGVyYXRlZFZhbHVlKCkpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubW9kZWxfPXZvaWQgMCx0aGlzLmRlbGVnYXRlXz12b2lkIDAsdGhpcy5iaW5kaW5nc18mJnRoaXMuYmluZGluZ3NfLnJlZiYmdGhpcy5iaW5kaW5nc18ucmVmLmNsb3NlKCksdGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCl9LHNldERlbGVnYXRlXzpmdW5jdGlvbihhKXt0aGlzLmRlbGVnYXRlXz1hLHRoaXMuYmluZGluZ01hcF89dm9pZCAwLHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8uaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlTW9kZWxGbl89dm9pZCAwKX0sbmV3RGVsZWdhdGVfOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YSYmYVtiXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYylyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShhLGFyZ3VtZW50cyl9fWlmKGEpcmV0dXJue2JpbmRpbmdNYXBzOnt9LHJhdzphLHByZXBhcmVCaW5kaW5nOmIoInByZXBhcmVCaW5kaW5nIikscHJlcGFyZUluc3RhbmNlTW9kZWw6YigicHJlcGFyZUluc3RhbmNlTW9kZWwiKSxwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6YigicHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkIil9fSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe2lmKHRoaXMuZGVsZWdhdGVfKXRocm93IEVycm9yKCJUZW1wbGF0ZSBtdXN0IGJlIGNsZWFyZWQgYmVmb3JlIGEgbmV3IGJpbmRpbmdEZWxlZ2F0ZSBjYW4gYmUgYXNzaWduZWQiKTt0aGlzLnNldERlbGVnYXRlXyh0aGlzLm5ld0RlbGVnYXRlXyhhKSl9LGdldCByZWZfKCl7dmFyIGE9ZCh0aGlzLHRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKSk7aWYoYXx8KGE9dGhpcy5pbnN0YW5jZVJlZl8pLCFhKXJldHVybiB0aGlzO3ZhciBiPWEucmVmXztyZXR1cm4gYj9iOmF9fSk7dmFyIFM9MTtPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlbXBsYXRlSW5zdGFuY2VfO3JldHVybiBhP2E6dGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS50ZW1wbGF0ZUluc3RhbmNlOnZvaWQgMH19KTt2YXIgVD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7VC5iaW5kaW5nc189W10sVC50ZXJtaW5hdG9yXz1udWxsLEUucHJvdG90eXBlPXtjbG9zZURlcHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRlcHM7YSYmKGEuaWZPbmVUaW1lPT09ITEmJmEuaWZWYWx1ZS5jbG9zZSgpLGEub25lVGltZT09PSExJiZhLnZhbHVlLmNsb3NlKCkpfSx1cGRhdGVEZXBlbmRlbmNpZXM6ZnVuY3Rpb24oYSxiKXt0aGlzLmNsb3NlRGVwcygpO3ZhciBjPXRoaXMuZGVwcz17fSxkPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZihhLmlmKXtpZihjLmhhc0lmPSEwLGMuaWZPbmVUaW1lPWEuaWYub25seU9uZVRpbWUsYy5pZlZhbHVlPXYoSixhLmlmLGQsYiksYy5pZk9uZVRpbWUmJiFjLmlmVmFsdWUpcmV0dXJuIHZvaWQgdGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlKCk7Yy5pZk9uZVRpbWV8fGMuaWZWYWx1ZS5vcGVuKHRoaXMudXBkYXRlSXRlcmF0ZWRWYWx1ZSx0aGlzKX1hLnJlcGVhdD8oYy5yZXBlYXQ9ITAsYy5vbmVUaW1lPWEucmVwZWF0Lm9ubHlPbmVUaW1lLGMudmFsdWU9dihJLGEucmVwZWF0LGQsYikpOihjLnJlcGVhdD0hMSxjLm9uZVRpbWU9YS5iaW5kLm9ubHlPbmVUaW1lLGMudmFsdWU9dihILGEuYmluZCxkLGIpKSxjLm9uZVRpbWV8fGMudmFsdWUub3Blbih0aGlzLnVwZGF0ZUl0ZXJhdGVkVmFsdWUsdGhpcyksdGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlKCl9LHVwZGF0ZUl0ZXJhdGVkVmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLmRlcHMuaGFzSWYpe3ZhciBhPXRoaXMuZGVwcy5pZlZhbHVlO2lmKHRoaXMuZGVwcy5pZk9uZVRpbWV8fChhPWEuZGlzY2FyZENoYW5nZXMoKSksIWEpcmV0dXJuIHZvaWQgdGhpcy52YWx1ZUNoYW5nZWQoKX12YXIgYj10aGlzLmRlcHMudmFsdWU7dGhpcy5kZXBzLm9uZVRpbWV8fChiPWIuZGlzY2FyZENoYW5nZXMoKSksdGhpcy5kZXBzLnJlcGVhdHx8KGI9W2JdKTt2YXIgYz10aGlzLmRlcHMucmVwZWF0JiYhdGhpcy5kZXBzLm9uZVRpbWUmJkFycmF5LmlzQXJyYXkoYik7dGhpcy52YWx1ZUNoYW5nZWQoYixjKX0sdmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEsYil7QXJyYXkuaXNBcnJheShhKXx8KGE9W10pLGEhPT10aGlzLml0ZXJhdGVkVmFsdWUmJih0aGlzLnVub2JzZXJ2ZSgpLHRoaXMucHJlc2VudFZhbHVlPWEsYiYmKHRoaXMuYXJyYXlPYnNlcnZlcj1uZXcgQXJyYXlPYnNlcnZlcih0aGlzLnByZXNlbnRWYWx1ZSksdGhpcy5hcnJheU9ic2VydmVyLm9wZW4odGhpcy5oYW5kbGVTcGxpY2VzLHRoaXMpKSx0aGlzLmhhbmRsZVNwbGljZXMoQXJyYXlPYnNlcnZlci5jYWxjdWxhdGVTcGxpY2VzKHRoaXMucHJlc2VudFZhbHVlLHRoaXMuaXRlcmF0ZWRWYWx1ZSkpKX0sZ2V0TGFzdEluc3RhbmNlTm9kZTpmdW5jdGlvbihhKXtpZigtMT09YSlyZXR1cm4gdGhpcy50ZW1wbGF0ZUVsZW1lbnRfO3ZhciBiPXRoaXMuaW5zdGFuY2VzW2FdLGM9Yi50ZXJtaW5hdG9yXztpZighYylyZXR1cm4gdGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEtMSk7aWYoYy5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFfHx0aGlzLnRlbXBsYXRlRWxlbWVudF89PT1jKXJldHVybiBjO3ZhciBkPWMuaXRlcmF0b3JfO3JldHVybiBkP2QuZ2V0TGFzdFRlbXBsYXRlTm9kZSgpOmN9LGdldExhc3RUZW1wbGF0ZU5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKHRoaXMuaW5zdGFuY2VzLmxlbmd0aC0xKX0saW5zZXJ0SW5zdGFuY2VBdDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpLGQ9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGU7dGhpcy5pbnN0YW5jZXMuc3BsaWNlKGEsMCxiKSxkLmluc2VydEJlZm9yZShiLGMubmV4dFNpYmxpbmcpfSxleHRyYWN0SW5zdGFuY2VBdDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEtMSksYz10aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYSksZD10aGlzLnRlbXBsYXRlRWxlbWVudF8ucGFyZW50Tm9kZSxlPXRoaXMuaW5zdGFuY2VzLnNwbGljZShhLDEpWzBdO2MhPT1iOyl7dmFyIGY9Yi5uZXh0U2libGluZztmPT1jJiYoYz1iKSxlLmFwcGVuZENoaWxkKGQucmVtb3ZlQ2hpbGQoZikpfXJldHVybiBlfSxnZXREZWxlZ2F0ZUZuOmZ1bmN0aW9uKGEpe3JldHVybiBhPWEmJmEodGhpcy50ZW1wbGF0ZUVsZW1lbnRfKSwiZnVuY3Rpb24iPT10eXBlb2YgYT9hOm51bGx9LGhhbmRsZVNwbGljZXM6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuY2xvc2VkJiZhLmxlbmd0aCl7dmFyIGI9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfO2lmKCFiLnBhcmVudE5vZGUpcmV0dXJuIHZvaWQgdGhpcy5jbG9zZSgpO0FycmF5T2JzZXJ2ZXIuYXBwbHlTcGxpY2VzKHRoaXMuaXRlcmF0ZWRWYWx1ZSx0aGlzLnByZXNlbnRWYWx1ZSxhKTt2YXIgYz1iLmRlbGVnYXRlXzt2b2lkIDA9PT10aGlzLmluc3RhbmNlTW9kZWxGbl8mJih0aGlzLmluc3RhbmNlTW9kZWxGbl89dGhpcy5nZXREZWxlZ2F0ZUZuKGMmJmMucHJlcGFyZUluc3RhbmNlTW9kZWwpKSx2b2lkIDA9PT10aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fJiYodGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXz10aGlzLmdldERlbGVnYXRlRm4oYyYmYy5wcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQpKTtmb3IodmFyIGQ9bmV3IEYsZT0wLGY9MDtmPGEubGVuZ3RoO2YrKyl7Zm9yKHZhciBnPWFbZl0saD1nLnJlbW92ZWQsaT0wO2k8aC5sZW5ndGg7aSsrKXt2YXIgaj1oW2ldLGs9dGhpcy5leHRyYWN0SW5zdGFuY2VBdChnLmluZGV4K2UpO2shPT1UJiZkLnNldChqLGspfWUtPWcuYWRkZWRDb3VudH1mb3IodmFyIGY9MDtmPGEubGVuZ3RoO2YrKylmb3IodmFyIGc9YVtmXSxsPWcuaW5kZXg7bDxnLmluZGV4K2cuYWRkZWRDb3VudDtsKyspe3ZhciBqPXRoaXMuaXRlcmF0ZWRWYWx1ZVtsXSxrPWQuZ2V0KGopO2s/ZC5kZWxldGUoaik6KHRoaXMuaW5zdGFuY2VNb2RlbEZuXyYmKGo9dGhpcy5pbnN0YW5jZU1vZGVsRm5fKGopKSxrPXZvaWQgMD09PWo/VDpiLmNyZWF0ZUluc3RhbmNlKGosdm9pZCAwLGMpKSx0aGlzLmluc2VydEluc3RhbmNlQXQobCxrKX1kLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5jbG9zZUluc3RhbmNlQmluZGluZ3MoYSl9LHRoaXMpLHRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl8mJnRoaXMucmVwb3J0SW5zdGFuY2VzTW92ZWQoYSl9fSxyZXBvcnRJbnN0YW5jZU1vdmVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW5zdGFuY2VzW2FdO2IhPT1UJiZ0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fKGIudGVtcGxhdGVJbnN0YW5jZV8sYSl9LHJlcG9ydEluc3RhbmNlc01vdmVkOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9MCxkPTA7ZDxhLmxlbmd0aDtkKyspe3ZhciBlPWFbZF07aWYoMCE9Yylmb3IoO2I8ZS5pbmRleDspdGhpcy5yZXBvcnRJbnN0YW5jZU1vdmVkKGIpLGIrKztlbHNlIGI9ZS5pbmRleDtmb3IoO2I8ZS5pbmRleCtlLmFkZGVkQ291bnQ7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKys7Yys9ZS5hZGRlZENvdW50LWUucmVtb3ZlZC5sZW5ndGh9aWYoMCE9Yylmb3IodmFyIGY9dGhpcy5pbnN0YW5jZXMubGVuZ3RoO2Y+YjspdGhpcy5yZXBvcnRJbnN0YW5jZU1vdmVkKGIpLGIrK30sY2xvc2VJbnN0YW5jZUJpbmRpbmdzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmJpbmRpbmdzXyxjPTA7YzxiLmxlbmd0aDtjKyspYltjXS5jbG9zZSgpfSx1bm9ic2VydmU6ZnVuY3Rpb24oKXt0aGlzLmFycmF5T2JzZXJ2ZXImJih0aGlzLmFycmF5T2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwKX0sY2xvc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5jbG9zZWQpe3RoaXMudW5vYnNlcnZlKCk7Zm9yKHZhciBhPTA7YTx0aGlzLmluc3RhbmNlcy5sZW5ndGg7YSsrKXRoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKHRoaXMuaW5zdGFuY2VzW2FdKTt0aGlzLmluc3RhbmNlcy5sZW5ndGg9MCx0aGlzLmNsb3NlRGVwcygpLHRoaXMudGVtcGxhdGVFbGVtZW50Xy5pdGVyYXRvcl89dm9pZCAwLHRoaXMuY2xvc2VkPSEwfX19LEhUTUxUZW1wbGF0ZUVsZW1lbnQuZm9yQWxsVGVtcGxhdGVzRnJvbV89aX0odGhpcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2V8fChlPSEwLGEuZW5kT2ZNaWNyb3Rhc2soZnVuY3Rpb24oKXtlPSExLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXAoIlBsYXRmb3JtLmZsdXNoKCkiKSxhLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCksbG9nRmxhZ3MuZGF0YSYmY29uc29sZS5ncm91cEVuZCgpfSkpfXZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7Yy50ZXh0Q29udGVudD0idGVtcGxhdGUge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9IC8qIGluamVjdGVkIGJ5IHBsYXRmb3JtLmpzICovIjt2YXIgZD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7ZC5pbnNlcnRCZWZvcmUoYyxkLmZpcnN0Q2hpbGQpO3ZhciBlO2lmKE9ic2VydmVyLmhhc09iamVjdE9ic2VydmUpYj1mdW5jdGlvbigpe307ZWxzZXt2YXIgZj0xMjU7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIldlYkNvbXBvbmVudHNSZWFkeSIsZnVuY3Rpb24oKXtiKCksYS5mbHVzaFBvbGw9c2V0SW50ZXJ2YWwoYixmKX0pfWlmKHdpbmRvdy5DdXN0b21FbGVtZW50cyYmIUN1c3RvbUVsZW1lbnRzLnVzZU5hdGl2ZSl7dmFyIGc9RG9jdW1lbnQucHJvdG90eXBlLmltcG9ydE5vZGU7RG9jdW1lbnQucHJvdG90eXBlLmltcG9ydE5vZGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1nLmNhbGwodGhpcyxhLGIpO3JldHVybiBDdXN0b21FbGVtZW50cy51cGdyYWRlQWxsKGMpLGN9fWEuZmx1c2g9Yn0od2luZG93LlBsYXRmb3JtKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGxhdGZvcm0uanMubWFw",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Thu, 06 Nov 2014 15:56:48 GMT",
                    "Content-Length": "154524",
                    "Date": "Thu, 06 Nov 2014 15:56:52 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}