{
    "url": "http://localhost:9999/paul-hoehne/mljs-bower/dev/js/OpenLayers-2.13.1/OpenLayers.mobile.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Link manipulation (DOM-based)",
    "issueType": 5246976,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based link manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a navigation target within the current page, such as a clickable link or the submission URL of a form. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the target of links within the response. An attacker may be able to leverage this to perform various attacks, including:<ul><li>Causing the user to redirect to an arbitrary external URL, to facilitate a phishing attack.</li><li>Causing the user to submit sensitive form data to a server controlled by the attacker.</li><li>Causing the user to perform an unintended action within the application, by changing the file or query string associated with a link.</li><li>Bypassing browser anti-XSS defenses by injecting on-site links containing XSS exploits, since browser anti-XSS defenses typically do not operate on on-site links.</li></ul>",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based link manipulation vulnerabilities is not to dynamically set the target URLs of links or forms using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a link target. In general, this is best achieved by using a whitelist of URLs that are permitted link targets, and strictly validating the target against this list before setting the link target.",
    "issueDetail": "The application may be vulnerable to DOM-based link manipulation. Data is read from <b>window.location</b> and written to <b>the 'href' property of a DOM element</b> via the following statements:<ul><li>var c=window.location,d=c.port?\":\"+c.port:\"\",d=c.protocol+\"//\"+c.host.split(\":\").shift()+d;</li><li>0===a.indexOf(\"/\")?a=d+a:(c=c.pathname.split(\"/\"),c.pop(),a=d+c.join(\"/\")+\"/\"+a)</li><li>b.ignoreCase&amp;&amp;(a=a.toLowerCase());</li><li>c.href=a;</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/paul-hoehne/mljs-bower/dev/js/OpenLayers-2.13.1/OpenLayers.mobile.js",
                "path": "/paul-hoehne/mljs-bower/dev/js/OpenLayers-2.13.1/OpenLayers.mobile.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9wYXVsLWhvZWhuZS9tbGpzLWJvd2VyL2Rldi9qcy9PcGVuTGF5ZXJzLTIuMTMuMS9PcGVuTGF5ZXJzLm1vYmlsZS5qcyBIVFRQLzEuMQ0KSG9zdDogbG9jYWxob3N0Ojk5OTkNCg0K",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMzQyMzI3DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBGcmksIDA3IE5vdiAyMDE0IDE2OjE0OjEyIEdNVA0KTGFzdC1Nb2RpZmllZDogRnJpLCAwNyBOb3YgMjAxNCAxNjoxNDoxMiBHTVQNCg0KLyoKCiAgT3BlbkxheWVycy5qcyAtLSBPcGVuTGF5ZXJzIE1hcCBWaWV3ZXIgTGlicmFyeQoKICBDb3B5cmlnaHQgKGMpIDIwMDYtMjAxMyBieSBPcGVuTGF5ZXJzIENvbnRyaWJ1dG9ycwogIFB1Ymxpc2hlZCB1bmRlciB0aGUgMi1jbGF1c2UgQlNEIGxpY2Vuc2UuCiAgU2VlIGh0dHA6Ly9vcGVubGF5ZXJzLm9yZy9kZXYvbGljZW5zZS50eHQgZm9yIHRoZSBmdWxsIHRleHQgb2YgdGhlIGxpY2Vuc2UsIGFuZCBodHRwOi8vb3BlbmxheWVycy5vcmcvZGV2L2F1dGhvcnMudHh0IGZvciBmdWxsIGxpc3Qgb2YgY29udHJpYnV0b3JzLgoKICBJbmNsdWRlcyBjb21wcmVzc2VkIGNvZGUgdW5kZXIgdGhlIGZvbGxvd2luZyBsaWNlbnNlczoKCiAgKEZvciB1bmNvbXByZXNzZWQgdmVyc2lvbnMgb2YgdGhlIGNvZGUgdXNlZCwgcGxlYXNlIHNlZSB0aGUKICBPcGVuTGF5ZXJzIEdpdGh1YiByZXBvc2l0b3J5OiA8aHR0cHM6Ly9naXRodWIuY29tL29wZW5sYXllcnMvb3BlbmxheWVycz4pCgoqLwoKLyoqCiAqIENvbnRhaW5zIFhNTEh0dHBSZXF1ZXN0LmpzIDxodHRwOi8vY29kZS5nb29nbGUuY29tL3AveG1saHR0cHJlcXVlc3QvPgogKiBDb3B5cmlnaHQgMjAwNyBTZXJnZXkgSWxpbnNreSAoaHR0cDovL3d3dy5pbGluc2t5LmNvbSkKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKi8KCi8qKgogKiBPcGVuTGF5ZXJzLlV0aWwucGFnZVBvc2l0aW9uIGlzIGJhc2VkIG9uIFlhaG9vJ3MgZ2V0WFkgbWV0aG9kLCB3aGljaCBpcwogKiBDb3B5cmlnaHQgKGMpIDIwMDYsIFlhaG9vISBJbmMuCiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIAogKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIG9mIHRoaXMgc29mdHdhcmUgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3IKICogd2l0aG91dCBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMKICogYXJlIG1ldDoKICogCiAqICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLAogKiAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAqIAogKiAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwKICogICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uCiAqICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCiAqIAogKiAqIE5laXRoZXIgdGhlIG5hbWUgb2YgWWFob28hIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIG1heSBiZQogKiAgIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQKICogICBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24gb2YgWWFob28hIEluYy4KICogCiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTIElTIgogKiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFCiAqIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFCiAqIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRQogKiBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SCiAqIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GCiAqIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUwogKiBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTgogKiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKQogKiBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSAKICogUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiAqLwp2YXIgT3BlbkxheWVycz17VkVSU0lPTl9OVU1CRVI6IlJlbGVhc2UgMi4xMy4xIixzaW5nbGVGaWxlOiEwLF9nZXRTY3JpcHRMb2NhdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT0vKF58KC4qP1wvKSkoT3BlbkxheWVyc1teXC9dKj9cLmpzKShcP3wkKS8sYj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IiksYyxkPSIiLGU9MCxmPWIubGVuZ3RoO2U8ZjtlKyspaWYoYz1iW2VdLmdldEF0dHJpYnV0ZSgic3JjIikpaWYoYz1jLm1hdGNoKGEpKXtkPWNbMV07YnJlYWt9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGR9fSgpLEltZ1BhdGg6IiJ9O09wZW5MYXllcnMuU3RyaW5nPXtzdGFydHNXaXRoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDA9PWEuaW5kZXhPZihiKX0sY29udGFpbnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4tMSE9YS5pbmRleE9mKGIpfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL15cc1xzKi8sIiIpLnJlcGxhY2UoL1xzXHMqJC8sIiIpfSxjYW1lbGl6ZTpmdW5jdGlvbihhKXthPWEuc3BsaXQoIi0iKTtmb3IodmFyIGI9YVswXSxjPTEsZD1hLmxlbmd0aDtjPGQ7YysrKXZhciBlPWFbY10sYj1iKyhlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyaW5nKDEpKTtyZXR1cm4gYn0sZm9ybWF0OmZ1bmN0aW9uKGEsYixjKXtifHwoYj13aW5kb3cpO3JldHVybiBhLnJlcGxhY2UoT3BlbkxheWVycy5TdHJpbmcudG9rZW5SZWdFeCxmdW5jdGlvbihhLGUpe2Zvcih2YXIgZixnPWUuc3BsaXQoL1wuKy8pLGg9MDtoPGcubGVuZ3RoO2grKyl7MD09aCYmKGY9Yik7aWYodm9pZCAwPT09ZilicmVhazsKZj1mW2dbaF1dfSJmdW5jdGlvbiI9PXR5cGVvZiBmJiYoZj1jP2YuYXBwbHkobnVsbCxjKTpmKCkpO3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZj8idW5kZWZpbmVkIjpmfSl9LHRva2VuUmVnRXg6L1wkXHsoW1x3Ll0rPylcfS9nLG51bWJlclJlZ0V4Oi9eKFsrLV0/KSg/PVxkfFwuXGQpXGQqKFwuXGQqKT8oW0VlXShbKy1dP1xkKykpPyQvLGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcubnVtYmVyUmVnRXgudGVzdChhKX0sbnVtZXJpY0lmOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTshMD09PWImJihudWxsIT1hJiZhLnJlcGxhY2UpJiYoYT1hLnJlcGxhY2UoL15ccyp8XHMqJC9nLCIiKSk7cmV0dXJuIE9wZW5MYXllcnMuU3RyaW5nLmlzTnVtZXJpYyhhKT9wYXJzZUZsb2F0KGEpOmN9fTsKT3BlbkxheWVycy5OdW1iZXI9e2RlY2ltYWxTZXBhcmF0b3I6Ii4iLHRob3VzYW5kc1NlcGFyYXRvcjoiLCIsbGltaXRTaWdEaWdzOmZ1bmN0aW9uKGEsYil7dmFyIGM9MDswPGImJihjPXBhcnNlRmxvYXQoYS50b1ByZWNpc2lvbihiKSkpO3JldHVybiBjfSxmb3JtYXQ6ZnVuY3Rpb24oYSxiLGMsZCl7Yj0idW5kZWZpbmVkIiE9dHlwZW9mIGI/YjowO2M9InVuZGVmaW5lZCIhPXR5cGVvZiBjP2M6T3BlbkxheWVycy5OdW1iZXIudGhvdXNhbmRzU2VwYXJhdG9yO2Q9InVuZGVmaW5lZCIhPXR5cGVvZiBkP2Q6T3BlbkxheWVycy5OdW1iZXIuZGVjaW1hbFNlcGFyYXRvcjtudWxsIT1iJiYoYT1wYXJzZUZsb2F0KGEudG9GaXhlZChiKSkpO3ZhciBlPWEudG9TdHJpbmcoKS5zcGxpdCgiLiIpOzE9PWUubGVuZ3RoJiZudWxsPT1iJiYoYj0wKTthPWVbMF07aWYoYylmb3IodmFyIGY9LygtP1swLTldKykoWzAtOV17M30pLztmLnRlc3QoYSk7KWE9YS5yZXBsYWNlKGYsIiQxIitjKyIkMiIpOwowPT1iP2I9YTooYz0xPGUubGVuZ3RoP2VbMV06IjAiLG51bGwhPWImJihjKz1BcnJheShiLWMubGVuZ3RoKzEpLmpvaW4oIjAiKSksYj1hK2QrYyk7cmV0dXJuIGJ9LHplcm9QYWQ6ZnVuY3Rpb24oYSxiLGMpe2ZvcihhPWEudG9TdHJpbmcoY3x8MTApO2EubGVuZ3RoPGI7KWE9IjAiK2E7cmV0dXJuIGF9fTsKT3BlbkxheWVycy5GdW5jdGlvbj17YmluZDpmdW5jdGlvbihhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMsWzJdKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzLFswXSkpO3JldHVybiBhLmFwcGx5KGIsZCl9fSxiaW5kQXNFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBhLmNhbGwoYixjfHx3aW5kb3cuZXZlbnQpfX0sRmFsc2U6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sVHJ1ZTpmdW5jdGlvbigpe3JldHVybiEwfSxWb2lkOmZ1bmN0aW9uKCl7fX07Ck9wZW5MYXllcnMuQXJyYXk9e2ZpbHRlcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W107aWYoQXJyYXkucHJvdG90eXBlLmZpbHRlcilkPWEuZmlsdGVyKGIsYyk7ZWxzZXt2YXIgZT1hLmxlbmd0aDtpZigiZnVuY3Rpb24iIT10eXBlb2YgYil0aHJvdyBuZXcgVHlwZUVycm9yO2Zvcih2YXIgZj0wO2Y8ZTtmKyspaWYoZiBpbiBhKXt2YXIgZz1hW2ZdO2IuY2FsbChjLGcsZixhKSYmZC5wdXNoKGcpfX1yZXR1cm4gZH19O09wZW5MYXllcnMuQ2xhc3M9ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoLGI9YXJndW1lbnRzWzBdLGM9YXJndW1lbnRzW2EtMV0sZD0iZnVuY3Rpb24iPT10eXBlb2YgYy5pbml0aWFsaXplP2MuaW5pdGlhbGl6ZTpmdW5jdGlvbigpe2IucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTsxPGE/KGE9W2QsYl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuc2xpY2UoMSxhLTEpLGMpLE9wZW5MYXllcnMuaW5oZXJpdC5hcHBseShudWxsLGEpKTpkLnByb3RvdHlwZT1jO3JldHVybiBkfTsKT3BlbkxheWVycy5pbmhlcml0PWZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt9O2MucHJvdG90eXBlPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO3ZhciBkLGUsYz0yO2ZvcihkPWFyZ3VtZW50cy5sZW5ndGg7YzxkO2MrKyllPWFyZ3VtZW50c1tjXSwiZnVuY3Rpb24iPT09dHlwZW9mIGUmJihlPWUucHJvdG90eXBlKSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEucHJvdG90eXBlLGUpfTtPcGVuTGF5ZXJzLlV0aWw9T3BlbkxheWVycy5VdGlsfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kPWZ1bmN0aW9uKGEsYil7YT1hfHx7fTtpZihiKXtmb3IodmFyIGMgaW4gYil7dmFyIGQ9YltjXTt2b2lkIDAhPT1kJiYoYVtjXT1kKX0iZnVuY3Rpb24iPT10eXBlb2Ygd2luZG93LkV2ZW50JiZiIGluc3RhbmNlb2Ygd2luZG93LkV2ZW50fHwoIWIuaGFzT3duUHJvcGVydHl8fCFiLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpKXx8KGEudG9TdHJpbmc9Yi50b1N0cmluZyl9cmV0dXJuIGF9O09wZW5MYXllcnMuQm91bmRzPU9wZW5MYXllcnMuQ2xhc3Moe2xlZnQ6bnVsbCxib3R0b206bnVsbCxyaWdodDpudWxsLHRvcDpudWxsLGNlbnRlckxvbkxhdDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkmJihkPWFbM10sYz1hWzJdLGI9YVsxXSxhPWFbMF0pO251bGwhPWEmJih0aGlzLmxlZnQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSkpO251bGwhPWImJih0aGlzLmJvdHRvbT1PcGVuTGF5ZXJzLlV0aWwudG9GbG9hdChiKSk7bnVsbCE9YyYmKHRoaXMucmlnaHQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYykpO251bGwhPWQmJih0aGlzLnRvcD1PcGVuTGF5ZXJzLlV0aWwudG9GbG9hdChkKSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmxlZnQsdGhpcy5ib3R0b20sdGhpcy5yaWdodCx0aGlzLnRvcCl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT0KYSYmKGI9dGhpcy5sZWZ0PT1hLmxlZnQmJnRoaXMucmlnaHQ9PWEucmlnaHQmJnRoaXMudG9wPT1hLnRvcCYmdGhpcy5ib3R0b209PWEuYm90dG9tKTtyZXR1cm4gYn0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5sZWZ0LHRoaXMuYm90dG9tLHRoaXMucmlnaHQsdGhpcy50b3BdLmpvaW4oKX0sdG9BcnJheTpmdW5jdGlvbihhKXtyZXR1cm4hMD09PWE/W3RoaXMuYm90dG9tLHRoaXMubGVmdCx0aGlzLnRvcCx0aGlzLnJpZ2h0XTpbdGhpcy5sZWZ0LHRoaXMuYm90dG9tLHRoaXMucmlnaHQsdGhpcy50b3BdfSx0b0JCT1g6ZnVuY3Rpb24oYSxiKXtudWxsPT1hJiYoYT02KTt2YXIgYz1NYXRoLnBvdygxMCxhKSxkPU1hdGgucm91bmQodGhpcy5sZWZ0KmMpL2MsZT1NYXRoLnJvdW5kKHRoaXMuYm90dG9tKmMpL2MsZj1NYXRoLnJvdW5kKHRoaXMucmlnaHQqYykvYyxjPU1hdGgucm91bmQodGhpcy50b3AqYykvYztyZXR1cm4hMD09PWI/ZSsiLCIrZCsiLCIrYysiLCIrZjpkKwoiLCIrZSsiLCIrZisiLCIrY30sdG9HZW9tZXRyeTpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCh0aGlzLmxlZnQsdGhpcy5ib3R0b20pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMucmlnaHQsdGhpcy5ib3R0b20pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMucmlnaHQsdGhpcy50b3ApLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMubGVmdCx0aGlzLnRvcCldKV0pfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0LXRoaXMubGVmdH0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9wLXRoaXMuYm90dG9tfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUodGhpcy5nZXRXaWR0aCgpLHRoaXMuZ2V0SGVpZ2h0KCkpfSwKZ2V0Q2VudGVyUGl4ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUGl4ZWwoKHRoaXMubGVmdCt0aGlzLnJpZ2h0KS8yLCh0aGlzLmJvdHRvbSt0aGlzLnRvcCkvMil9LGdldENlbnRlckxvbkxhdDpmdW5jdGlvbigpe3RoaXMuY2VudGVyTG9uTGF0fHwodGhpcy5jZW50ZXJMb25MYXQ9bmV3IE9wZW5MYXllcnMuTG9uTGF0KCh0aGlzLmxlZnQrdGhpcy5yaWdodCkvMiwodGhpcy5ib3R0b20rdGhpcy50b3ApLzIpKTtyZXR1cm4gdGhpcy5jZW50ZXJMb25MYXR9LHNjYWxlOmZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9dGhpcy5nZXRDZW50ZXJMb25MYXQoKSk7dmFyIGMsZDsiT3BlbkxheWVycy5Mb25MYXQiPT1iLkNMQVNTX05BTUU/KGM9Yi5sb24sZD1iLmxhdCk6KGM9Yi54LGQ9Yi55KTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKCh0aGlzLmxlZnQtYykqYStjLCh0aGlzLmJvdHRvbS1kKSphK2QsKHRoaXMucmlnaHQtYykqYStjLCh0aGlzLnRvcC1kKSphKwpkKX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJCb3VuZHMuYWRkIGNhbm5vdCByZWNlaXZlIG51bGwgdmFsdWVzIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmxlZnQrYSx0aGlzLmJvdHRvbStiLHRoaXMucmlnaHQrYSx0aGlzLnRvcCtiKX0sZXh0ZW5kOmZ1bmN0aW9uKGEpe2lmKGEpc3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5Mb25MYXQiOnRoaXMuZXh0ZW5kWFkoYS5sb24sYS5sYXQpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOnRoaXMuZXh0ZW5kWFkoYS54LGEueSk7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5Cb3VuZHMiOnRoaXMuY2VudGVyTG9uTGF0PW51bGw7aWYobnVsbD09dGhpcy5sZWZ0fHxhLmxlZnQ8dGhpcy5sZWZ0KXRoaXMubGVmdD1hLmxlZnQ7aWYobnVsbD09dGhpcy5ib3R0b218fGEuYm90dG9tPHRoaXMuYm90dG9tKXRoaXMuYm90dG9tPQphLmJvdHRvbTtpZihudWxsPT10aGlzLnJpZ2h0fHxhLnJpZ2h0PnRoaXMucmlnaHQpdGhpcy5yaWdodD1hLnJpZ2h0O2lmKG51bGw9PXRoaXMudG9wfHxhLnRvcD50aGlzLnRvcCl0aGlzLnRvcD1hLnRvcH19LGV4dGVuZFhZOmZ1bmN0aW9uKGEsYil7dGhpcy5jZW50ZXJMb25MYXQ9bnVsbDtpZihudWxsPT10aGlzLmxlZnR8fGE8dGhpcy5sZWZ0KXRoaXMubGVmdD1hO2lmKG51bGw9PXRoaXMuYm90dG9tfHxiPHRoaXMuYm90dG9tKXRoaXMuYm90dG9tPWI7aWYobnVsbD09dGhpcy5yaWdodHx8YT50aGlzLnJpZ2h0KXRoaXMucmlnaHQ9YTtpZihudWxsPT10aGlzLnRvcHx8Yj50aGlzLnRvcCl0aGlzLnRvcD1ifSxjb250YWluc0xvbkxhdDpmdW5jdGlvbihhLGIpeyJib29sZWFuIj09PXR5cGVvZiBiJiYoYj17aW5jbHVzaXZlOmJ9KTtiPWJ8fHt9O3ZhciBjPXRoaXMuY29udGFpbnMoYS5sb24sYS5sYXQsYi5pbmNsdXNpdmUpLGQ9Yi53b3JsZEJvdW5kcztkJiYhYyYmKGM9ZC5nZXRXaWR0aCgpLApkPU1hdGgucm91bmQoKGEubG9uLShkLmxlZnQrZC5yaWdodCkvMikvYyksYz10aGlzLmNvbnRhaW5zTG9uTGF0KHtsb246YS5sb24tZCpjLGxhdDphLmxhdH0se2luY2x1c2l2ZTpiLmluY2x1c2l2ZX0pKTtyZXR1cm4gY30sY29udGFpbnNQaXhlbDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNvbnRhaW5zKGEueCxhLnksYil9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1jJiYoYz0hMCk7aWYobnVsbD09YXx8bnVsbD09YilyZXR1cm4hMTthPU9wZW5MYXllcnMuVXRpbC50b0Zsb2F0KGEpO2I9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYik7dmFyIGQ9ITE7cmV0dXJuIGQ9Yz9hPj10aGlzLmxlZnQmJmE8PXRoaXMucmlnaHQmJmI+PXRoaXMuYm90dG9tJiZiPD10aGlzLnRvcDphPnRoaXMubGVmdCYmYTx0aGlzLnJpZ2h0JiZiPnRoaXMuYm90dG9tJiZiPHRoaXMudG9wfSxpbnRlcnNlY3RzQm91bmRzOmZ1bmN0aW9uKGEsYil7ImJvb2xlYW4iPT09dHlwZW9mIGImJihiPQp7aW5jbHVzaXZlOmJ9KTtiPWJ8fHt9O2lmKGIud29ybGRCb3VuZHMpe3ZhciBjPXRoaXMud3JhcERhdGVMaW5lKGIud29ybGRCb3VuZHMpO2E9YS53cmFwRGF0ZUxpbmUoYi53b3JsZEJvdW5kcyl9ZWxzZSBjPXRoaXM7bnVsbD09Yi5pbmNsdXNpdmUmJihiLmluY2x1c2l2ZT0hMCk7dmFyIGQ9ITEsZT1jLmxlZnQ9PWEucmlnaHR8fGMucmlnaHQ9PWEubGVmdHx8Yy50b3A9PWEuYm90dG9tfHxjLmJvdHRvbT09YS50b3A7aWYoYi5pbmNsdXNpdmV8fCFlKXZhciBkPWEudG9wPj1jLmJvdHRvbSYmYS50b3A8PWMudG9wfHxjLnRvcD5hLmJvdHRvbSYmYy50b3A8YS50b3AsZT1hLmxlZnQ+PWMubGVmdCYmYS5sZWZ0PD1jLnJpZ2h0fHxjLmxlZnQ+PWEubGVmdCYmYy5sZWZ0PD1hLnJpZ2h0LGY9YS5yaWdodD49Yy5sZWZ0JiZhLnJpZ2h0PD1jLnJpZ2h0fHxjLnJpZ2h0Pj1hLmxlZnQmJmMucmlnaHQ8PWEucmlnaHQsZD0oYS5ib3R0b20+PWMuYm90dG9tJiZhLmJvdHRvbTw9Yy50b3B8fGMuYm90dG9tPj0KYS5ib3R0b20mJmMuYm90dG9tPD1hLnRvcHx8ZCkmJihlfHxmKTtpZihiLndvcmxkQm91bmRzJiYhZCl7dmFyIGc9Yi53b3JsZEJvdW5kcyxlPWcuZ2V0V2lkdGgoKSxmPSFnLmNvbnRhaW5zQm91bmRzKGMpLGc9IWcuY29udGFpbnNCb3VuZHMoYSk7ZiYmIWc/KGE9YS5hZGQoLWUsMCksZD1jLmludGVyc2VjdHNCb3VuZHMoYSx7aW5jbHVzaXZlOmIuaW5jbHVzaXZlfSkpOmcmJiFmJiYoYz1jLmFkZCgtZSwwKSxkPWEuaW50ZXJzZWN0c0JvdW5kcyhjLHtpbmNsdXNpdmU6Yi5pbmNsdXNpdmV9KSl9cmV0dXJuIGR9LGNvbnRhaW5zQm91bmRzOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1iJiYoYj0hMSk7bnVsbD09YyYmKGM9ITApO3ZhciBkPXRoaXMuY29udGFpbnMoYS5sZWZ0LGEuYm90dG9tLGMpLGU9dGhpcy5jb250YWlucyhhLnJpZ2h0LGEuYm90dG9tLGMpLGY9dGhpcy5jb250YWlucyhhLmxlZnQsYS50b3AsYyk7YT10aGlzLmNvbnRhaW5zKGEucmlnaHQsYS50b3AsYyk7cmV0dXJuIGI/CmR8fGV8fGZ8fGE6ZCYmZSYmZiYmYX0sZGV0ZXJtaW5lUXVhZHJhbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYz10aGlzLmdldENlbnRlckxvbkxhdCgpLGI9YisoYS5sYXQ8Yy5sYXQ/ImIiOiJ0Iik7cmV0dXJuIGIrPWEubG9uPGMubG9uPyJsIjoiciJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe3RoaXMuY2VudGVyTG9uTGF0PW51bGw7dmFyIGM9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh7eDp0aGlzLmxlZnQseTp0aGlzLmJvdHRvbX0sYSxiKSxkPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5yaWdodCx5OnRoaXMuYm90dG9tfSxhLGIpLGU9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh7eDp0aGlzLmxlZnQseTp0aGlzLnRvcH0sYSxiKSxmPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5yaWdodCx5OnRoaXMudG9wfSxhLGIpO3RoaXMubGVmdD1NYXRoLm1pbihjLngsZS54KTt0aGlzLmJvdHRvbT1NYXRoLm1pbihjLnksCmQueSk7dGhpcy5yaWdodD1NYXRoLm1heChkLngsZi54KTt0aGlzLnRvcD1NYXRoLm1heChlLnksZi55KTtyZXR1cm4gdGhpc30sd3JhcERhdGVMaW5lOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLmxlZnRUb2xlcmFuY2V8fDAsZD1iLnJpZ2h0VG9sZXJhbmNlfHwwLGU9dGhpcy5jbG9uZSgpO2lmKGEpe2Zvcih2YXIgZj1hLmdldFdpZHRoKCk7ZS5sZWZ0PGEubGVmdCYmZS5yaWdodC1kPD1hLmxlZnQ7KWU9ZS5hZGQoZiwwKTtmb3IoO2UubGVmdCtjPj1hLnJpZ2h0JiZlLnJpZ2h0PmEucmlnaHQ7KWU9ZS5hZGQoLWYsMCk7Yz1lLmxlZnQrYztjPGEucmlnaHQmJihjPmEubGVmdCYmZS5yaWdodC1kPmEucmlnaHQpJiYoZT1lLmFkZCgtZiwwKSl9cmV0dXJuIGV9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQm91bmRzIn0pOwpPcGVuTGF5ZXJzLkJvdW5kcy5mcm9tU3RyaW5nPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zcGxpdCgiLCIpO3JldHVybiBPcGVuTGF5ZXJzLkJvdW5kcy5mcm9tQXJyYXkoYyxiKX07T3BlbkxheWVycy5Cb3VuZHMuZnJvbUFycmF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuITA9PT1iP25ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhWzFdLGFbMF0sYVszXSxhWzJdKTpuZXcgT3BlbkxheWVycy5Cb3VuZHMoYVswXSxhWzFdLGFbMl0sYVszXSl9O09wZW5MYXllcnMuQm91bmRzLmZyb21TaXplPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCxhLmgsYS53LDApfTtPcGVuTGF5ZXJzLkJvdW5kcy5vcHBvc2l0ZVF1YWRyYW50PWZ1bmN0aW9uKGEpe3ZhciBiO2I9IiIrKCJ0Ij09YS5jaGFyQXQoMCk/ImIiOiJ0Iik7cmV0dXJuIGIrPSJsIj09YS5jaGFyQXQoMSk/InIiOiJsIn07T3BlbkxheWVycy5FbGVtZW50PXt2aXNpYmxlOmZ1bmN0aW9uKGEpe3JldHVybiJub25lIiE9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSkuc3R5bGUuZGlzcGxheX0sdG9nZ2xlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj1hcmd1bWVudHMubGVuZ3RoO2E8YjthKyspe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGFyZ3VtZW50c1thXSksZD1PcGVuTGF5ZXJzLkVsZW1lbnQudmlzaWJsZShjKT8ibm9uZSI6IiI7Yy5zdHlsZS5kaXNwbGF5PWR9fSxyZW1vdmU6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9LGdldEhlaWdodDpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3JldHVybiBhLm9mZnNldEhlaWdodH0saGFzQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNsYXNzTmFtZTtyZXR1cm4hIWMmJlJlZ0V4cCgiKF58XFxzKSIrYisiKFxcc3wkKSIpLnRlc3QoYyl9LAphZGRDbGFzczpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuRWxlbWVudC5oYXNDbGFzcyhhLGIpfHwoYS5jbGFzc05hbWUrPShhLmNsYXNzTmFtZT8iICI6IiIpK2IpO3JldHVybiBhfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuY2xhc3NOYW1lO2MmJihhLmNsYXNzTmFtZT1PcGVuTGF5ZXJzLlN0cmluZy50cmltKGMucmVwbGFjZShSZWdFeHAoIihefFxccyspIitiKyIoXFxzK3wkKSIpLCIgIikpKTtyZXR1cm4gYX0sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkVsZW1lbnQuaGFzQ2xhc3MoYSxiKT9PcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoYSxiKTpPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoYSxiKTtyZXR1cm4gYX0sZ2V0U3R5bGU6ZnVuY3Rpb24oYSxiKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3ZhciBjPW51bGw7aWYoYSYmYS5zdHlsZSl7Yz1hLnN0eWxlW09wZW5MYXllcnMuU3RyaW5nLmNhbWVsaXplKGIpXTsKY3x8KGRvY3VtZW50LmRlZmF1bHRWaWV3JiZkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlP2M9KGM9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpKT9jLmdldFByb3BlcnR5VmFsdWUoYik6bnVsbDphLmN1cnJlbnRTdHlsZSYmKGM9YS5jdXJyZW50U3R5bGVbT3BlbkxheWVycy5TdHJpbmcuY2FtZWxpemUoYildKSk7dmFyIGQ9WyJsZWZ0IiwidG9wIiwicmlnaHQiLCJib3R0b20iXTt3aW5kb3cub3BlcmEmJigtMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YoZCxiKSYmInN0YXRpYyI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpKSYmKGM9ImF1dG8iKX1yZXR1cm4iYXV0byI9PWM/bnVsbDpjfX07T3BlbkxheWVycy5Mb25MYXQ9T3BlbkxheWVycy5DbGFzcyh7bG9uOjAsbGF0OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpJiYoYj1hWzFdLGE9YVswXSk7dGhpcy5sb249T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSk7dGhpcy5sYXQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYil9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuImxvbj0iK3RoaXMubG9uKyIsbGF0PSIrdGhpcy5sYXR9LHRvU2hvcnRTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb24rIiwgIit0aGlzLmxhdH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuTG9uTGF0KHRoaXMubG9uLHRoaXMubGF0KX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJMb25MYXQuYWRkIGNhbm5vdCByZWNlaXZlIG51bGwgdmFsdWVzIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdCh0aGlzLmxvbisKT3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSksdGhpcy5sYXQrT3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYikpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7bnVsbCE9YSYmKGI9dGhpcy5sb249PWEubG9uJiZ0aGlzLmxhdD09YS5sYXR8fGlzTmFOKHRoaXMubG9uKSYmaXNOYU4odGhpcy5sYXQpJiZpc05hTihhLmxvbikmJmlzTmFOKGEubGF0KSk7cmV0dXJuIGJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5sb24seTp0aGlzLmxhdH0sYSxiKTt0aGlzLmxvbj1jLng7dGhpcy5sYXQ9Yy55O3JldHVybiB0aGlzfSx3cmFwRGF0ZUxpbmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jbG9uZSgpO2lmKGEpe2Zvcig7Yi5sb248YS5sZWZ0OyliLmxvbis9YS5nZXRXaWR0aCgpO2Zvcig7Yi5sb24+YS5yaWdodDspYi5sb24tPWEuZ2V0V2lkdGgoKX1yZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Mb25MYXQifSk7Ck9wZW5MYXllcnMuTG9uTGF0LmZyb21TdHJpbmc9ZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCIsIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhWzBdLGFbMV0pfTtPcGVuTGF5ZXJzLkxvbkxhdC5mcm9tQXJyYXk9ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChiJiZhWzBdLGImJmFbMV0pfTtPcGVuTGF5ZXJzLlBpeGVsPU9wZW5MYXllcnMuQ2xhc3Moe3g6MCx5OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMueD1wYXJzZUZsb2F0KGEpO3RoaXMueT1wYXJzZUZsb2F0KGIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ4PSIrdGhpcy54KyIseT0iK3RoaXMueX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUGl4ZWwodGhpcy54LHRoaXMueSl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT1hJiYoYj10aGlzLng9PWEueCYmdGhpcy55PT1hLnl8fGlzTmFOKHRoaXMueCkmJmlzTmFOKHRoaXMueSkmJmlzTmFOKGEueCkmJmlzTmFOKGEueSkpO3JldHVybiBifSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codGhpcy54LWEueCwyKStNYXRoLnBvdyh0aGlzLnktYS55LDIpKX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJQaXhlbC5hZGQgY2Fubm90IHJlY2VpdmUgbnVsbCB2YWx1ZXMiKTsKcmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlBpeGVsKHRoaXMueCthLHRoaXMueStiKX0sb2Zmc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2xvbmUoKTthJiYoYj10aGlzLmFkZChhLngsYS55KSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUGl4ZWwifSk7T3BlbkxheWVycy5TaXplPU9wZW5MYXllcnMuQ2xhc3Moe3c6MCxoOjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMudz1wYXJzZUZsb2F0KGEpO3RoaXMuaD1wYXJzZUZsb2F0KGIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ3PSIrdGhpcy53KyIsaD0iK3RoaXMuaH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuU2l6ZSh0aGlzLncsdGhpcy5oKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO251bGwhPWEmJihiPXRoaXMudz09YS53JiZ0aGlzLmg9PWEuaHx8aXNOYU4odGhpcy53KSYmaXNOYU4odGhpcy5oKSYmaXNOYU4oYS53KSYmaXNOYU4oYS5oKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU2l6ZSJ9KTtPcGVuTGF5ZXJzLkNvbnNvbGU9e2xvZzpmdW5jdGlvbigpe30sZGVidWc6ZnVuY3Rpb24oKXt9LGluZm86ZnVuY3Rpb24oKXt9LHdhcm46ZnVuY3Rpb24oKXt9LGVycm9yOmZ1bmN0aW9uKCl7fSx1c2VyRXJyb3I6ZnVuY3Rpb24oYSl7YWxlcnQoYSl9LGFzc2VydDpmdW5jdGlvbigpe30sZGlyOmZ1bmN0aW9uKCl7fSxkaXJ4bWw6ZnVuY3Rpb24oKXt9LHRyYWNlOmZ1bmN0aW9uKCl7fSxncm91cDpmdW5jdGlvbigpe30sZ3JvdXBFbmQ6ZnVuY3Rpb24oKXt9LHRpbWU6ZnVuY3Rpb24oKXt9LHRpbWVFbmQ6ZnVuY3Rpb24oKXt9LHByb2ZpbGU6ZnVuY3Rpb24oKXt9LHByb2ZpbGVFbmQ6ZnVuY3Rpb24oKXt9LGNvdW50OmZ1bmN0aW9uKCl7fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnNvbGUifTsKKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKSxiPTAsYz1hLmxlbmd0aDtiPGM7KytiKWlmKC0xIT1hW2JdLnNyYy5pbmRleE9mKCJmaXJlYnVnLmpzIikmJmNvbnNvbGUpe09wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5Db25zb2xlLGNvbnNvbGUpO2JyZWFrfX0pKCk7T3BlbkxheWVycy5MYW5nPXtjb2RlOm51bGwsZGVmYXVsdENvZGU6ImVuIixnZXRDb2RlOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYW5nLmNvZGV8fE9wZW5MYXllcnMuTGFuZy5zZXRDb2RlKCk7cmV0dXJuIE9wZW5MYXllcnMuTGFuZy5jb2RlfSxzZXRDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2F8fChhPSJtc2llIj09T3BlbkxheWVycy5CUk9XU0VSX05BTUU/bmF2aWdhdG9yLnVzZXJMYW5ndWFnZTpuYXZpZ2F0b3IubGFuZ3VhZ2UpO2E9YS5zcGxpdCgiLSIpO2FbMF09YVswXS50b0xvd2VyQ2FzZSgpOyJvYmplY3QiPT10eXBlb2YgT3BlbkxheWVycy5MYW5nW2FbMF1dJiYoYj1hWzBdKTtpZihhWzFdKXt2YXIgYz1hWzBdKyItIithWzFdLnRvVXBwZXJDYXNlKCk7Im9iamVjdCI9PXR5cGVvZiBPcGVuTGF5ZXJzLkxhbmdbY10mJihiPWMpfWJ8fChPcGVuTGF5ZXJzLkNvbnNvbGUud2FybigiRmFpbGVkIHRvIGZpbmQgT3BlbkxheWVycy5MYW5nLiIrYS5qb2luKCItIikrIiBkaWN0aW9uYXJ5LCBmYWxsaW5nIGJhY2sgdG8gZGVmYXVsdCBsYW5ndWFnZSIpLApiPU9wZW5MYXllcnMuTGFuZy5kZWZhdWx0Q29kZSk7T3BlbkxheWVycy5MYW5nLmNvZGU9Yn0sdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5MYW5nW09wZW5MYXllcnMuTGFuZy5nZXRDb2RlKCldOyhjPWMmJmNbYV0pfHwoYz1hKTtiJiYoYz1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQoYyxiKSk7cmV0dXJuIGN9fTtPcGVuTGF5ZXJzLmkxOG49T3BlbkxheWVycy5MYW5nLnRyYW5zbGF0ZTtPcGVuTGF5ZXJzLlV0aWw9T3BlbkxheWVycy5VdGlsfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFyZ3VtZW50c1tiXTsic3RyaW5nIj09dHlwZW9mIGQmJihkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGQpKTtpZigxPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkO2EucHVzaChkKX1yZXR1cm4gYX07T3BlbkxheWVycy5VdGlsLmlzRWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm4hKCFhfHwxIT09YS5ub2RlVHlwZSl9O09wZW5MYXllcnMuVXRpbC5pc0FycmF5PWZ1bmN0aW9uKGEpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9O09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEubGVuZ3RoLTE7MDw9YztjLS0pYVtjXT09YiYmYS5zcGxpY2UoYywxKTtyZXR1cm4gYX07Ck9wZW5MYXllcnMuVXRpbC5pbmRleE9mPWZ1bmN0aW9uKGEsYil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGEuaW5kZXhPZilyZXR1cm4gYS5pbmRleE9mKGIpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT1iKXJldHVybiBjO3JldHVybi0xfTtPcGVuTGF5ZXJzLlV0aWwuZG90bGVzcz0vXC4vZzsKT3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXtiJiYoYS5pZD1iLnJlcGxhY2UoT3BlbkxheWVycy5VdGlsLmRvdGxlc3MsIl8iKSk7YyYmKGEuc3R5bGUubGVmdD1jLngrInB4IixhLnN0eWxlLnRvcD1jLnkrInB4Iik7ZCYmKGEuc3R5bGUud2lkdGg9ZC53KyJweCIsYS5zdHlsZS5oZWlnaHQ9ZC5oKyJweCIpO2UmJihhLnN0eWxlLnBvc2l0aW9uPWUpO2YmJihhLnN0eWxlLmJvcmRlcj1mKTtnJiYoYS5zdHlsZS5vdmVyZmxvdz1nKTswPD1wYXJzZUZsb2F0KGgpJiYxPnBhcnNlRmxvYXQoaCk/KGEuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrMTAwKmgrIikiLGEuc3R5bGUub3BhY2l0eT1oKToxPT1wYXJzZUZsb2F0KGgpJiYoYS5zdHlsZS5maWx0ZXI9IiIsYS5zdHlsZS5vcGFjaXR5PSIiKX07Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXY9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXt2YXIgaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtkJiYoay5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9InVybCgiK2QrIikiKTthfHwoYT1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQoIk9wZW5MYXllcnNEaXYiKSk7ZXx8KGU9ImFic29sdXRlIik7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoayxhLGIsYyxlLGYsZyxoKTtyZXR1cm4ga307Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVJbWFnZT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgpe3ZhciBrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpO2F8fChhPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiT3BlbkxheWVyc0RpdiIpKTtlfHwoZT0icmVsYXRpdmUiKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5RE9NRWxlbWVudChrLGEsYixjLGUsZixudWxsLGcpO2gmJihrLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGI9ZnVuY3Rpb24oKXtrLnN0eWxlLmRpc3BsYXk9IiI7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudChrKX0sT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGssImxvYWQiLGIpLE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShrLCJlcnJvciIsYikpO2suc3R5bGUuYWx0PWE7ay5nYWxsZXJ5SW1nPSJubyI7ZCYmKGsuc3JjPWQpO3JldHVybiBrfTtPcGVuTGF5ZXJzLklNQUdFX1JFTE9BRF9BVFRFTVBUUz0wOwpPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrTmVlZGVkPW51bGw7T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaz1mdW5jdGlvbigpe2lmKG51bGw9PU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWQpe3ZhciBhPW5hdmlnYXRvci5hcHBWZXJzaW9uLnNwbGl0KCJNU0lFIiksYT1wYXJzZUZsb2F0KGFbMV0pLGI9ITE7dHJ5e2I9ISFkb2N1bWVudC5ib2R5LmZpbHRlcnN9Y2F0Y2goYyl7fU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWQ9YiYmNS41PD1hJiY3PmF9cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWR9OwpPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdj1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayl7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYSxiLGMsZCxmLG51bGwsbnVsbCxrKTtiPWEuY2hpbGROb2Rlc1swXTtlJiYoYi5zcmM9ZSk7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYixhLmlkKyJfaW5uZXJJbWFnZSIsbnVsbCxkLCJyZWxhdGl2ZSIsZyk7T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaygpJiYoIm5vbmUiIT1hLnN0eWxlLmRpc3BsYXkmJihhLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIpLG51bGw9PWgmJihoPSJzY2FsZSIpLGEuc3R5bGUuZmlsdGVyPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGFJbWFnZUxvYWRlcihzcmM9JyIrYi5zcmMrIicsIHNpemluZ01ldGhvZD0nIitoKyInKSIsMDw9cGFyc2VGbG9hdChhLnN0eWxlLm9wYWNpdHkpJiYxPnBhcnNlRmxvYXQoYS5zdHlsZS5vcGFjaXR5KSYmCihhLnN0eWxlLmZpbHRlcis9IiBhbHBoYShvcGFjaXR5PSIrMTAwKmEuc3R5bGUub3BhY2l0eSsiKSIpLGIuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PTApIil9O09wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrKXt2YXIgbD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KCk7az1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlSW1hZ2UobnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxrKTtrLmNsYXNzTmFtZT0ib2xBbHBoYUltZyI7bC5hcHBlbmRDaGlsZChrKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdihsLGEsYixjLGQsZSxmLGcsaCk7cmV0dXJuIGx9O09wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3Q9ZnVuY3Rpb24oYSl7dmFyIGI9e30sYztmb3IoYyBpbiBhKWJbYy50b1VwcGVyQ2FzZSgpXT1hW2NdO3JldHVybiBifTsKT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHM9ZnVuY3Rpb24oYSxiKXthPWF8fHt9O3ZhciBjPSJmdW5jdGlvbiI9PXR5cGVvZiB3aW5kb3cuRXZlbnQmJmIgaW5zdGFuY2VvZiB3aW5kb3cuRXZlbnQsZDtmb3IoZCBpbiBiKWlmKHZvaWQgMD09PWFbZF18fCFjJiZiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KGQpJiYhYS5oYXNPd25Qcm9wZXJ0eShkKSlhW2RdPWJbZF07IWMmJihiJiZiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpJiYhYS5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSkmJihhLnRvU3RyaW5nPWIudG9TdHJpbmcpO3JldHVybiBhfTsKT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlclN0cmluZz1mdW5jdGlvbihhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107aWYobnVsbCE9ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGQpe2lmKCJvYmplY3QiPT10eXBlb2YgZCYmZC5jb25zdHJ1Y3Rvcj09QXJyYXkpe2Zvcih2YXIgZT1bXSxmLGc9MCxoPWQubGVuZ3RoO2c8aDtnKyspZj1kW2ddLGUucHVzaChlbmNvZGVVUklDb21wb25lbnQobnVsbD09PWZ8fHZvaWQgMD09PWY/IiI6ZikpO2Q9ZS5qb2luKCIsIil9ZWxzZSBkPWVuY29kZVVSSUNvbXBvbmVudChkKTtiLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGMpKyI9IitkKX19cmV0dXJuIGIuam9pbigiJiIpfTtPcGVuTGF5ZXJzLlV0aWwudXJsQXBwZW5kPWZ1bmN0aW9uKGEsYil7dmFyIGM9YTtpZihiKXZhciBkPShhKyIgIikuc3BsaXQoL1s/Jl0vKSxjPWMrKCIgIj09PWQucG9wKCk/YjpkLmxlbmd0aD8iJiIrYjoiPyIrYik7cmV0dXJuIGN9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VzTG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5JbWdQYXRofHxPcGVuTGF5ZXJzLl9nZXRTY3JpcHRMb2NhdGlvbigpKyJpbWcvIn07T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZXNMb2NhdGlvbigpK2F9O09wZW5MYXllcnMuVXRpbC5Ucnk9ZnVuY3Rpb24oKXtmb3IodmFyIGE9bnVsbCxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFyZ3VtZW50c1tiXTt0cnl7YT1kKCk7YnJlYWt9Y2F0Y2goZSl7fX1yZXR1cm4gYX07Ck9wZW5MYXllcnMuVXRpbC5nZXRYbWxOb2RlVmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtPcGVuTGF5ZXJzLlV0aWwuVHJ5KGZ1bmN0aW9uKCl7Yj1hLnRleHQ7Ynx8KGI9YS50ZXh0Q29udGVudCk7Ynx8KGI9YS5maXJzdENoaWxkLm5vZGVWYWx1ZSl9LGZ1bmN0aW9uKCl7Yj1hLnRleHRDb250ZW50fSk7cmV0dXJuIGJ9O09wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5yZWxhdGVkVGFyZ2V0P2EucmVsYXRlZFRhcmdldDphLnRvRWxlbWVudDtjIT1iJiZudWxsIT1jOyljPWMucGFyZW50Tm9kZTtyZXR1cm4gYyE9Yn07T3BlbkxheWVycy5VdGlsLkRFRkFVTFRfUFJFQ0lTSU9OPTE0O09wZW5MYXllcnMuVXRpbC50b0Zsb2F0PWZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9T3BlbkxheWVycy5VdGlsLkRFRkFVTFRfUFJFQ0lTSU9OKTsibnVtYmVyIiE9PXR5cGVvZiBhJiYoYT1wYXJzZUZsb2F0KGEpKTtyZXR1cm4gMD09PWI/YTpwYXJzZUZsb2F0KGEudG9QcmVjaXNpb24oYikpfTsKT3BlbkxheWVycy5VdGlsLnJhZD1mdW5jdGlvbihhKXtyZXR1cm4gYSpNYXRoLlBJLzE4MH07T3BlbkxheWVycy5VdGlsLmRlZz1mdW5jdGlvbihhKXtyZXR1cm4gMTgwKmEvTWF0aC5QSX07T3BlbkxheWVycy5VdGlsLlZpbmNlbnR5Q29uc3RhbnRzPXthOjYzNzgxMzcsYjo2MzU2NzUyLjMxNDIsZjoxLzI5OC4yNTcyMjM1NjN9OwpPcGVuTGF5ZXJzLlV0aWwuZGlzdFZpbmNlbnR5PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPU9wZW5MYXllcnMuVXRpbC5WaW5jZW50eUNvbnN0YW50cyxkPWMuYSxlPWMuYixjPWMuZixmPU9wZW5MYXllcnMuVXRpbC5yYWQoYi5sb24tYS5sb24pLGc9TWF0aC5hdGFuKCgxLWMpKk1hdGgudGFuKE9wZW5MYXllcnMuVXRpbC5yYWQoYS5sYXQpKSksaD1NYXRoLmF0YW4oKDEtYykqTWF0aC50YW4oT3BlbkxheWVycy5VdGlsLnJhZChiLmxhdCkpKSxrPU1hdGguc2luKGcpLGc9TWF0aC5jb3MoZyksbD1NYXRoLnNpbihoKSxoPU1hdGguY29zKGgpLG09ZixwPTIqTWF0aC5QSSxuPTIwOzFFLTEyPE1hdGguYWJzKG0tcCkmJjA8LS1uOyl7dmFyIHE9TWF0aC5zaW4obSkscj1NYXRoLmNvcyhtKSxzPU1hdGguc3FydChoKnEqaCpxKyhnKmwtaypoKnIpKihnKmwtaypoKnIpKTtpZigwPT1zKXJldHVybiAwO3ZhciByPWsqbCtnKmgqcix0PU1hdGguYXRhbjIocyxyKSx1PU1hdGguYXNpbihnKmgqCnEvcyksdj1NYXRoLmNvcyh1KSpNYXRoLmNvcyh1KSxxPXItMiprKmwvdix3PWMvMTYqdiooNCtjKig0LTMqdikpLHA9bSxtPWYrKDEtdykqYypNYXRoLnNpbih1KSoodCt3KnMqKHErdypyKigtMSsyKnEqcSkpKX1pZigwPT1uKXJldHVybiBOYU47ZD12KihkKmQtZSplKS8oZSplKTtjPWQvMTAyNCooMjU2K2QqKC0xMjgrZCooNzQtNDcqZCkpKTtyZXR1cm4oZSooMStkLzE2Mzg0Kig0MDk2K2QqKC03NjgrZCooMzIwLTE3NSpkKSkpKSoodC1jKnMqKHErYy80KihyKigtMSsyKnEqcSktYy82KnEqKC0zKzQqcypzKSooLTMrNCpxKnEpKSkpKS50b0ZpeGVkKDMpLzFFM307Ck9wZW5MYXllcnMuVXRpbC5kZXN0aW5hdGlvblZpbmNlbnR5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1PcGVuTGF5ZXJzLlV0aWwsZT1kLlZpbmNlbnR5Q29uc3RhbnRzLGY9ZS5hLGc9ZS5iLGg9ZS5mLGU9YS5sb247YT1hLmxhdDt2YXIgaz1kLnJhZChiKTtiPU1hdGguc2luKGspO2s9TWF0aC5jb3Moayk7YT0oMS1oKSpNYXRoLnRhbihkLnJhZChhKSk7dmFyIGw9MS9NYXRoLnNxcnQoMSthKmEpLG09YSpsLHA9TWF0aC5hdGFuMihhLGspO2E9bCpiO2Zvcih2YXIgbj0xLWEqYSxmPW4qKGYqZi1nKmcpLyhnKmcpLHE9MStmLzE2Mzg0Kig0MDk2K2YqKC03NjgrZiooMzIwLTE3NSpmKSkpLHI9Zi8xMDI0KigyNTYrZiooLTEyOCtmKig3NC00NypmKSkpLGY9Yy8oZypxKSxzPTIqTWF0aC5QSTsxRS0xMjxNYXRoLmFicyhmLXMpOyl2YXIgdD1NYXRoLmNvcygyKnArZiksdT1NYXRoLnNpbihmKSx2PU1hdGguY29zKGYpLHc9cip1Kih0K3IvNCoodiooLTErMip0KnQpLXIvNip0KigtMys0Kgp1KnUpKigtMys0KnQqdCkpKSxzPWYsZj1jLyhnKnEpK3c7Yz1tKnUtbCp2Kms7Zz1NYXRoLmF0YW4yKG0qditsKnUqaywoMS1oKSpNYXRoLnNxcnQoYSphK2MqYykpO2I9TWF0aC5hdGFuMih1KmIsbCp2LW0qdSprKTtrPWgvMTYqbiooNCtoKig0LTMqbikpO3Q9Yi0oMS1rKSpoKmEqKGYrayp1Kih0K2sqdiooLTErMip0KnQpKSk7TWF0aC5hdGFuMihhLC1jKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuTG9uTGF0KGUrZC5kZWcodCksZC5kZWcoZykpfTsKT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnM9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2E9bnVsbD09PWF8fHZvaWQgMD09PWE/d2luZG93LmxvY2F0aW9uLmhyZWY6YTt2YXIgYz0iIjtpZihPcGVuTGF5ZXJzLlN0cmluZy5jb250YWlucyhhLCI/IikpdmFyIGQ9YS5pbmRleE9mKCI/IikrMSxjPU9wZW5MYXllcnMuU3RyaW5nLmNvbnRhaW5zKGEsIiMiKT9hLmluZGV4T2YoIiMiKTphLmxlbmd0aCxjPWEuc3Vic3RyaW5nKGQsYyk7Zm9yKHZhciBkPXt9LGM9Yy5zcGxpdCgvWyY7XS8pLGU9MCxmPWMubGVuZ3RoO2U8ZjsrK2Upe3ZhciBnPWNbZV0uc3BsaXQoIj0iKTtpZihnWzBdKXt2YXIgaD1nWzBdO3RyeXtoPWRlY29kZVVSSUNvbXBvbmVudChoKX1jYXRjaChrKXtoPXVuZXNjYXBlKGgpfWc9KGdbMV18fCIiKS5yZXBsYWNlKC9cKy9nLCIgIik7dHJ5e2c9ZGVjb2RlVVJJQ29tcG9uZW50KGcpfWNhdGNoKGwpe2c9dW5lc2NhcGUoZyl9ITEhPT1iLnNwbGl0QXJncyYmKGc9Zy5zcGxpdCgiLCIpKTsKMT09Zy5sZW5ndGgmJihnPWdbMF0pO2RbaF09Z319cmV0dXJuIGR9O09wZW5MYXllcnMuVXRpbC5sYXN0U2VxSUQ9MDtPcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQ9ZnVuY3Rpb24oYSl7YT1udWxsPT1hPyJpZF8iOmEucmVwbGFjZShPcGVuTGF5ZXJzLlV0aWwuZG90bGVzcywiXyIpO09wZW5MYXllcnMuVXRpbC5sYXN0U2VxSUQrPTE7cmV0dXJuIGErT3BlbkxheWVycy5VdGlsLmxhc3RTZXFJRH07T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQ9e2luY2hlczoxLGZ0OjEyLG1pOjYzMzYwLG06MzkuMzcsa206MzkzNzAsZGQ6NDM3NDc1NCx5ZDozNn07T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVRbImluIl09T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuaW5jaGVzO09wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULmRlZ3JlZXM9T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuZGQ7T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubm1pPTE4NTIqT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubTsKT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0g9MC4wMjU0MDAwNTA4MDAxMDE2OwpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKE9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULHtJbmNoOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULmluY2hlcyxNZXRlcjoxL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEZvb3Q6MC4zMDQ4MDA2MDk2MDEyMTkyL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILElGb290OjAuMzA0OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxDbGFya2VGb290OjAuMzA0Nzk3MjY1MTE1MS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxTZWFyc0Zvb3Q6MC4zMDQ3OTk0NzE1Mzg2NzYyNi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxHb2xkQ29hc3RGb290OjAuMzA0Nzk5NzEwMTgxNTA4OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJSW5jaDowLjAyNTQvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWljcm9JbmNoOjIuNTRFLTUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWlsOjIuNTRFLTgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsCkNlbnRpbWV0ZXI6MC4wMS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxLaWxvbWV0ZXI6MUUzL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFlhcmQ6MC45MTQ0MDE4Mjg4MDM2NTc2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFNlYXJzWWFyZDowLjkxNDM5ODQxNDYxNjAyOS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5ZYXJkOjAuOTE0Mzk4NTMwNzQ0NDQwOC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5ZZDM3OjAuOTE0Mzk1MjMvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuWWQ2MjowLjkxNDM5ODgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuWWQ3NTowLjkxNDM5ODUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuRm9vdDowLjMwNDc5OTUxL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEluZGlhbkZ0Mzc6MC4zMDQ3OTg0MS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5GdDYyOjAuMzA0Nzk5Ni8KT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuRnQ3NTowLjMwNDc5OTUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWlsZToxNjA5LjM0NzIxODY5NDQzNzMvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSVlhcmQ6MC45MTQ0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILElNaWxlOjE2MDkuMzQ0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILE5hdXRNOjE4NTIvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsIkxhdC02NiI6MTEwOTQzLjMxNjQ4ODkzMjczL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCJMYXQtODMiOjExMDk0Ni4yNTczNjg3MjIzNS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxEZWNpbWV0ZXI6MC4xL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILE1pbGxpbWV0ZXI6MC4wMDEvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsRGVrYW1ldGVyOjEwL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILERlY2FtZXRlcjoxMC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCwKSGVjdG9tZXRlcjoxMDAvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsR2VybWFuTWV0ZXI6MS4wMDAwMTM1OTY1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENhR3JpZDowLjk5OTczOC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxDbGFya2VDaGFpbjoyMC4xMTY2MTk0OTc2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEd1bnRlckNoYWluOjIwLjExNjg0MDIzMzY4MDQ3L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEJlbm9pdENoYWluOjIwLjExNjc4MjQ5NDM3NTg3Mi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxTZWFyc0NoYWluOjIwLjExNjc2NTEyMTU1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENsYXJrZUxpbms6MC4yMDExNjYxOTQ5NzYvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsR3VudGVyTGluazowLjIwMTE2ODQwMjMzNjgwNDcvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsQmVub2l0TGluazowLjIwMTE2NzgyNDk0Mzc1ODczL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILApTZWFyc0xpbms6MC4yMDExNjc2NTEyMTU1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFJvZDo1LjAyOTIxMDA1ODQyMDEyL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEludG5sQ2hhaW46MjAuMTE2OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbnRubExpbms6MC4yMDExNjgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsUGVyY2g6NS4wMjkyMTAwNTg0MjAxMi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxQb2xlOjUuMDI5MjEwMDU4NDIwMTIvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsRnVybG9uZzoyMDEuMTY4NDAyMzM2ODA0Ni9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxSb29kOjMuNzc4MjY2ODk4L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENhcGVGb290OjAuMzA0Nzk3MjYxNS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxCcmVhbGV5OjM3NS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxNb2RBbUZ0OjAuMzA0ODEyMjUyOTg0NTA2LwpPcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxGYXRob206MS44Mjg4L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCJOYXV0TS1VSyI6MTg1My4xODQvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsIjUwa2lsb21ldGVycyI6NUU0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCIxNTBraWxvbWV0ZXJzIjoxNUU0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNIfSk7Ck9wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQse21tOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1ldGVyLzFFMyxjbTpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5NZXRlci8xMDAsZG06MTAwKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1ldGVyLGttOjFFMypPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5NZXRlcixrbWk6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubm1pLGZhdGg6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuRmF0aG9tLGNoOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULkludG5sQ2hhaW4sbGluazpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5JbnRubExpbmssInVzLWluIjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5pbmNoZXMsInVzLWZ0IjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5Gb290LCJ1cy15ZCI6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuWWFyZCwidXMtY2giOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULkd1bnRlckNoYWluLAoidXMtbWkiOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1pbGUsImluZC15ZCI6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuSW5kaWFuWWQzNywiaW5kLWZ0IjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5JbmRpYW5GdDM3LCJpbmQtY2giOjIwLjExNjY5NTA2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNIfSk7T3BlbkxheWVycy5ET1RTX1BFUl9JTkNIPTcyO09wZW5MYXllcnMuVXRpbC5ub3JtYWxpemVTY2FsZT1mdW5jdGlvbihhKXtyZXR1cm4gMTxhPzEvYTphfTtPcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZT1mdW5jdGlvbihhLGIpe3ZhciBjO2EmJihudWxsPT1iJiYoYj0iZGVncmVlcyIpLGM9MS8oT3BlbkxheWVycy5VdGlsLm5vcm1hbGl6ZVNjYWxlKGEpKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdKk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSCkpO3JldHVybiBjfTsKT3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb249ZnVuY3Rpb24oYSxiKXtudWxsPT1iJiYoYj0iZGVncmVlcyIpO3JldHVybiBhKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdKk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSH07Ck9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9WzAsMF0sYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0Vmlld3BvcnRFbGVtZW50KCk7aWYoIWF8fGE9PXdpbmRvd3x8YT09YylyZXR1cm4gYjt2YXIgZD1PcGVuTGF5ZXJzLklTX0dFQ0tPJiZkb2N1bWVudC5nZXRCb3hPYmplY3RGb3ImJiJhYnNvbHV0ZSI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpJiYoIiI9PWEuc3R5bGUudG9wfHwiIj09YS5zdHlsZS5sZWZ0KSxlPW51bGw7aWYoYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QpYT1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGU9d2luZG93LnBhZ2VZT2Zmc2V0fHxjLnNjcm9sbFRvcCxiWzBdPWEubGVmdCsod2luZG93LnBhZ2VYT2Zmc2V0fHxjLnNjcm9sbExlZnQpLGJbMV09YS50b3ArZTtlbHNlIGlmKGRvY3VtZW50LmdldEJveE9iamVjdEZvciYmIWQpYT1kb2N1bWVudC5nZXRCb3hPYmplY3RGb3IoYSksYz1kb2N1bWVudC5nZXRCb3hPYmplY3RGb3IoYyksCmJbMF09YS5zY3JlZW5YLWMuc2NyZWVuWCxiWzFdPWEuc2NyZWVuWS1jLnNjcmVlblk7ZWxzZXtiWzBdPWEub2Zmc2V0TGVmdDtiWzFdPWEub2Zmc2V0VG9wO2U9YS5vZmZzZXRQYXJlbnQ7aWYoZSE9YSlmb3IoO2U7KWJbMF0rPWUub2Zmc2V0TGVmdCxiWzFdKz1lLm9mZnNldFRvcCxlPWUub2Zmc2V0UGFyZW50O2M9T3BlbkxheWVycy5CUk9XU0VSX05BTUU7aWYoIm9wZXJhIj09Y3x8InNhZmFyaSI9PWMmJiJhYnNvbHV0ZSI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpKWJbMV0tPWRvY3VtZW50LmJvZHkub2Zmc2V0VG9wO2ZvcihlPWEub2Zmc2V0UGFyZW50O2UmJmUhPWRvY3VtZW50LmJvZHk7KXtiWzBdLT1lLnNjcm9sbExlZnQ7aWYoIm9wZXJhIiE9Y3x8IlRSIiE9ZS50YWdOYW1lKWJbMV0tPWUuc2Nyb2xsVG9wO2U9ZS5vZmZzZXRQYXJlbnR9fXJldHVybiBifTsKT3BlbkxheWVycy5VdGlsLmdldFZpZXdwb3J0RWxlbWVudD1mdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cy5jYWxsZWUudmlld3BvcnRFbGVtZW50O3ZvaWQgMD09YSYmKGE9Im1zaWUiPT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRSYmIkNTUzFDb21wYXQiIT1kb2N1bWVudC5jb21wYXRNb2RlP2RvY3VtZW50LmJvZHk6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGFyZ3VtZW50cy5jYWxsZWUudmlld3BvcnRFbGVtZW50PWEpO3JldHVybiBhfTsKT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybD1mdW5jdGlvbihhLGIsYyl7Yz1jfHx7fTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLHtpZ25vcmVDYXNlOiEwLGlnbm9yZVBvcnQ4MDohMCxpZ25vcmVIYXNoOiEwLHNwbGl0QXJnczohMX0pO2E9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChhLGMpO2I9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChiLGMpO2Zvcih2YXIgZCBpbiBhKWlmKCJhcmdzIiE9PWQmJmFbZF0hPWJbZF0pcmV0dXJuITE7Zm9yKGQgaW4gYS5hcmdzKXtpZihhLmFyZ3NbZF0hPWIuYXJnc1tkXSlyZXR1cm4hMTtkZWxldGUgYi5hcmdzW2RdfWZvcihkIGluIGIuYXJncylyZXR1cm4hMTtyZXR1cm4hMH07Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVVcmxPYmplY3Q9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2lmKCEvXlx3KzpcL1wvLy50ZXN0KGEpKXt2YXIgYz13aW5kb3cubG9jYXRpb24sZD1jLnBvcnQ/IjoiK2MucG9ydDoiIixkPWMucHJvdG9jb2wrIi8vIitjLmhvc3Quc3BsaXQoIjoiKS5zaGlmdCgpK2Q7MD09PWEuaW5kZXhPZigiLyIpP2E9ZCthOihjPWMucGF0aG5hbWUuc3BsaXQoIi8iKSxjLnBvcCgpLGE9ZCtjLmpvaW4oIi8iKSsiLyIrYSl9Yi5pZ25vcmVDYXNlJiYoYT1hLnRvTG93ZXJDYXNlKCkpO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO2MuaHJlZj1hO2Q9e307ZC5ob3N0PWMuaG9zdC5zcGxpdCgiOiIpLnNoaWZ0KCk7ZC5wcm90b2NvbD1jLnByb3RvY29sO2QucG9ydD1iLmlnbm9yZVBvcnQ4MD8iODAiPT1jLnBvcnR8fCIwIj09Yy5wb3J0PyIiOmMucG9ydDoiIj09Yy5wb3J0fHwiMCI9PWMucG9ydD8iODAiOmMucG9ydDtkLmhhc2g9Yi5pZ25vcmVIYXNofHwiIyI9PT0KYy5oYXNoPyIiOmMuaGFzaDt2YXIgZT1jLnNlYXJjaDtlfHwoZT1hLmluZGV4T2YoIj8iKSxlPS0xIT1lP2Euc3Vic3RyKGUpOiIiKTtkLmFyZ3M9T3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoZSx7c3BsaXRBcmdzOmIuc3BsaXRBcmdzfSk7ZC5wYXRobmFtZT0iLyI9PWMucGF0aG5hbWUuY2hhckF0KDApP2MucGF0aG5hbWU6Ii8iK2MucGF0aG5hbWU7cmV0dXJuIGR9O09wZW5MYXllcnMuVXRpbC5yZW1vdmVUYWlsPWZ1bmN0aW9uKGEpe3ZhciBiPW51bGwsYj1hLmluZGV4T2YoIj8iKSxjPWEuaW5kZXhPZigiIyIpO3JldHVybiBiPS0xPT1iPy0xIT1jP2Euc3Vic3RyKDAsYyk6YTotMSE9Yz9hLnN1YnN0cigwLE1hdGgubWluKGIsYykpOmEuc3Vic3RyKDAsYil9O09wZW5MYXllcnMuSVNfR0VDS089ZnVuY3Rpb24oKXt2YXIgYT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7cmV0dXJuLTE9PWEuaW5kZXhPZigid2Via2l0IikmJi0xIT1hLmluZGV4T2YoImdlY2tvIil9KCk7Ck9wZW5MYXllcnMuQ0FOVkFTX1NVUFBPUlRFRD1mdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO3JldHVybiEoIWEuZ2V0Q29udGV4dHx8IWEuZ2V0Q29udGV4dCgiMmQiKSl9KCk7T3BlbkxheWVycy5CUk9XU0VSX05BTUU9ZnVuY3Rpb24oKXt2YXIgYT0iIixiPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTstMSE9Yi5pbmRleE9mKCJvcGVyYSIpP2E9Im9wZXJhIjotMSE9Yi5pbmRleE9mKCJtc2llIik/YT0ibXNpZSI6LTEhPWIuaW5kZXhPZigic2FmYXJpIik/YT0ic2FmYXJpIjotMSE9Yi5pbmRleE9mKCJtb3ppbGxhIikmJihhPS0xIT1iLmluZGV4T2YoImZpcmVmb3giKT8iZmlyZWZveCI6Im1vemlsbGEiKTtyZXR1cm4gYX0oKTtPcGVuTGF5ZXJzLlV0aWwuZ2V0QnJvd3Nlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5CUk9XU0VSX05BTUV9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0UmVuZGVyZWREaW1lbnNpb25zPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2Zvcih2YXIgZz1jJiZjLmNvbnRhaW5lckVsZW1lbnQ/Yy5jb250YWluZXJFbGVtZW50OmRvY3VtZW50LmJvZHksaD0hMSxrPW51bGwsbD1nO2wmJiJib2R5IiE9bC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7KXt2YXIgbT1PcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUobCwicG9zaXRpb24iKTtpZigiYWJzb2x1dGUiPT1tKXtoPSEwO2JyZWFrfWVsc2UgaWYobSYmInN0YXRpYyIhPW0pYnJlYWs7bD1sLnBhcmVudE5vZGV9IWh8fDAhPT1nLmNsaWVudEhlaWdodCYmMCE9PWcuY2xpZW50V2lkdGh8fChrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGsuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIixrLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIsay5zdHlsZS5vdmVyZmxvdz0KInZpc2libGUiLGsuc3R5bGUud2lkdGg9ZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCsicHgiLGsuc3R5bGUuaGVpZ2h0PWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KyJweCIsay5hcHBlbmRDaGlsZChmKSk7Zi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2ImJihiLnc/KGQ9Yi53LGYuc3R5bGUud2lkdGg9ZCsicHgiKTpiLmgmJihlPWIuaCxmLnN0eWxlLmhlaWdodD1lKyJweCIpKTtjJiZjLmRpc3BsYXlDbGFzcyYmKGYuY2xhc3NOYW1lPWMuZGlzcGxheUNsYXNzKTtiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2IuaW5uZXJIVE1MPWE7Yi5zdHlsZS5vdmVyZmxvdz0idmlzaWJsZSI7aWYoYi5jaGlsZE5vZGVzKWZvcihhPTAsYz1iLmNoaWxkTm9kZXMubGVuZ3RoO2E8YzthKyspYi5jaGlsZE5vZGVzW2FdLnN0eWxlJiYoYi5jaGlsZE5vZGVzW2FdLnN0eWxlLm92ZXJmbG93PSJ2aXNpYmxlIik7Zi5hcHBlbmRDaGlsZChiKTtrP2cuYXBwZW5kQ2hpbGQoayk6Zy5hcHBlbmRDaGlsZChmKTsKZHx8KGQ9cGFyc2VJbnQoYi5zY3JvbGxXaWR0aCksZi5zdHlsZS53aWR0aD1kKyJweCIpO2V8fChlPXBhcnNlSW50KGIuc2Nyb2xsSGVpZ2h0KSk7Zi5yZW1vdmVDaGlsZChiKTtrPyhrLnJlbW92ZUNoaWxkKGYpLGcucmVtb3ZlQ2hpbGQoaykpOmcucmVtb3ZlQ2hpbGQoZik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUoZCxlKX07Ck9wZW5MYXllcnMuVXRpbC5nZXRTY3JvbGxiYXJXaWR0aD1mdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuVXRpbC5fc2Nyb2xsYmFyV2lkdGg7aWYobnVsbD09YSl7dmFyIGI9bnVsbCxjPW51bGwsYj1hPTAsYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtiLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Yi5zdHlsZS50b3A9Ii0xMDAwcHgiO2Iuc3R5bGUubGVmdD0iLTEwMDBweCI7Yi5zdHlsZS53aWR0aD0iMTAwcHgiO2Iuc3R5bGUuaGVpZ2h0PSI1MHB4IjtiLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yy5zdHlsZS53aWR0aD0iMTAwJSI7Yy5zdHlsZS5oZWlnaHQ9IjIwMHB4IjtiLmFwcGVuZENoaWxkKGMpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYik7YT1jLm9mZnNldFdpZHRoO2Iuc3R5bGUub3ZlcmZsb3c9InNjcm9sbCI7Yj1jLm9mZnNldFdpZHRoO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuYm9keS5sYXN0Q2hpbGQpOwpPcGVuTGF5ZXJzLlV0aWwuX3Njcm9sbGJhcldpZHRoPWEtYjthPU9wZW5MYXllcnMuVXRpbC5fc2Nyb2xsYmFyV2lkdGh9cmV0dXJuIGF9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0Rm9ybWF0dGVkTG9uTGF0PWZ1bmN0aW9uKGEsYixjKXtjfHwoYz0iZG1zIik7YT0oYSs1NDApJTM2MC0xODA7dmFyIGQ9TWF0aC5hYnMoYSksZT1NYXRoLmZsb29yKGQpLGY9ZD0oZC1lKS8oMS82MCksZD1NYXRoLmZsb29yKGQpLGY9TWF0aC5yb3VuZCgxMCooKGYtZCkvKDEvNjApKSksZj1mLzEwOzYwPD1mJiYoZi09NjAsZCs9MSw2MDw9ZCYmKGQtPTYwLGUrPTEpKTsxMD5lJiYoZT0iMCIrZSk7ZSs9Ilx1MDBiMCI7MDw9Yy5pbmRleE9mKCJkbSIpJiYoMTA+ZCYmKGQ9IjAiK2QpLGUrPWQrIiciLDA8PWMuaW5kZXhPZigiZG1zIikmJigxMD5mJiYoZj0iMCIrZiksZSs9ZisnIicpKTtyZXR1cm4gZT0ibG9uIj09Yj9lKygwPmE/T3BlbkxheWVycy5pMThuKCJXIik6T3BlbkxheWVycy5pMThuKCJFIikpOmUrKDA+YT9PcGVuTGF5ZXJzLmkxOG4oIlMiKTpPcGVuTGF5ZXJzLmkxOG4oIk4iKSl9O09wZW5MYXllcnMuRXZlbnQ9e29ic2VydmVyczohMSxLRVlfU1BBQ0U6MzIsS0VZX0JBQ0tTUEFDRTo4LEtFWV9UQUI6OSxLRVlfUkVUVVJOOjEzLEtFWV9FU0M6MjcsS0VZX0xFRlQ6MzcsS0VZX1VQOjM4LEtFWV9SSUdIVDozOSxLRVlfRE9XTjo0MCxLRVlfREVMRVRFOjQ2LGVsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudGFyZ2V0fHxhLnNyY0VsZW1lbnR9LGlzU2luZ2xlVG91Y2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudG91Y2hlcyYmMT09YS50b3VjaGVzLmxlbmd0aH0saXNNdWx0aVRvdWNoOmZ1bmN0aW9uKGEpe3JldHVybiBhLnRvdWNoZXMmJjE8YS50b3VjaGVzLmxlbmd0aH0saXNMZWZ0Q2xpY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIGEud2hpY2gmJjE9PWEud2hpY2h8fGEuYnV0dG9uJiYxPT1hLmJ1dHRvbn0saXNSaWdodENsaWNrOmZ1bmN0aW9uKGEpe3JldHVybiBhLndoaWNoJiYzPT1hLndoaWNofHxhLmJ1dHRvbiYmMj09YS5idXR0b259LHN0b3A6ZnVuY3Rpb24oYSwKYil7Ynx8T3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKTthLnN0b3BQcm9wYWdhdGlvbj9hLnN0b3BQcm9wYWdhdGlvbigpOmEuY2FuY2VsQnViYmxlPSEwfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExfSxmaW5kRWxlbWVudDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1PcGVuTGF5ZXJzLkV2ZW50LmVsZW1lbnQoYSk7Yy5wYXJlbnROb2RlJiYoIWMudGFnTmFtZXx8Yy50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPWIudG9VcHBlckNhc2UoKSk7KWM9Yy5wYXJlbnROb2RlO3JldHVybiBjfSxvYnNlcnZlOmZ1bmN0aW9uKGEsYixjLGQpe2E9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7ZD1kfHwhMTsia2V5cHJlc3MiPT1iJiYobmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL0tvbnF1ZXJvcnxTYWZhcml8S0hUTUwvKXx8YS5hdHRhY2hFdmVudCkmJihiPSJrZXlkb3duIik7CnRoaXMub2JzZXJ2ZXJzfHwodGhpcy5vYnNlcnZlcnM9e30pO2lmKCFhLl9ldmVudENhY2hlSUQpe3ZhciBlPSJldmVudENhY2hlSURfIjthLmlkJiYoZT1hLmlkKyJfIitlKTthLl9ldmVudENhY2hlSUQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKGUpfWU9YS5fZXZlbnRDYWNoZUlEO3RoaXMub2JzZXJ2ZXJzW2VdfHwodGhpcy5vYnNlcnZlcnNbZV09W10pO3RoaXMub2JzZXJ2ZXJzW2VdLnB1c2goe2VsZW1lbnQ6YSxuYW1lOmIsb2JzZXJ2ZXI6Yyx1c2VDYXB0dXJlOmR9KTthLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKGIsYyxkKTphLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KCJvbiIrYixjKX0sc3RvcE9ic2VydmluZ0VsZW1lbnQ6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKS5fZXZlbnRDYWNoZUlEO3RoaXMuX3JlbW92ZUVsZW1lbnRPYnNlcnZlcnMoT3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnNbYV0pfSwKX3JlbW92ZUVsZW1lbnRPYnNlcnZlcnM6ZnVuY3Rpb24oYSl7aWYoYSlmb3IodmFyIGI9YS5sZW5ndGgtMTswPD1iO2ItLSl7dmFyIGM9YVtiXTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcuYXBwbHkodGhpcyxbYy5lbGVtZW50LGMubmFtZSxjLm9ic2VydmVyLGMudXNlQ2FwdHVyZV0pfX0sc3RvcE9ic2VydmluZzpmdW5jdGlvbihhLGIsYyxkKXtkPWR8fCExO2E9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7dmFyIGU9YS5fZXZlbnRDYWNoZUlEOyJrZXlwcmVzcyI9PWImJihuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvS29ucXVlcm9yfFNhZmFyaXxLSFRNTC8pfHxhLmRldGFjaEV2ZW50KSYmKGI9ImtleWRvd24iKTt2YXIgZj0hMSxnPU9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzW2VdO2lmKGcpZm9yKHZhciBoPTA7IWYmJmg8Zy5sZW5ndGg7KXt2YXIgaz1nW2hdO2lmKGsubmFtZT09YiYmay5vYnNlcnZlcj09YyYmay51c2VDYXB0dXJlPT1kKXtnLnNwbGljZShoLAoxKTswPT1nLmxlbmd0aCYmZGVsZXRlIE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzW2VdO2Y9ITA7YnJlYWt9aCsrfWYmJihhLnJlbW92ZUV2ZW50TGlzdGVuZXI/YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyxkKTphJiZhLmRldGFjaEV2ZW50JiZhLmRldGFjaEV2ZW50KCJvbiIrYixjKSk7cmV0dXJuIGZ9LHVubG9hZENhY2hlOmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5FdmVudCYmT3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnMpe2Zvcih2YXIgYSBpbiBPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmVycylPcGVuTGF5ZXJzLkV2ZW50Ll9yZW1vdmVFbGVtZW50T2JzZXJ2ZXJzLmFwcGx5KHRoaXMsW09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzW2FdXSk7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnM9ITF9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkV2ZW50In07Ck9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh3aW5kb3csInVubG9hZCIsT3BlbkxheWVycy5FdmVudC51bmxvYWRDYWNoZSwhMSk7Ck9wZW5MYXllcnMuRXZlbnRzPU9wZW5MYXllcnMuQ2xhc3Moe0JST1dTRVJfRVZFTlRTOiJtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIGNsaWNrIGRibGNsaWNrIHJpZ2h0Y2xpY2sgZGJscmlnaHRjbGljayByZXNpemUgZm9jdXMgYmx1ciB0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCBrZXlkb3duIi5zcGxpdCgiICIpLGxpc3RlbmVyczpudWxsLG9iamVjdDpudWxsLGVsZW1lbnQ6bnVsbCxldmVudEhhbmRsZXI6bnVsbCxmYWxsVGhyb3VnaDpudWxsLGluY2x1ZGVYWTohMSxleHRlbnNpb25zOm51bGwsZXh0ZW5zaW9uQ291bnQ6bnVsbCxjbGVhck1vdXNlTGlzdGVuZXI6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGUpO3RoaXMub2JqZWN0PWE7dGhpcy5mYWxsVGhyb3VnaD1kO3RoaXMubGlzdGVuZXJzPXt9O3RoaXMuZXh0ZW5zaW9ucz17fTt0aGlzLmV4dGVuc2lvbkNvdW50PQp7fTt0aGlzLl9tc1RvdWNoZXM9W107bnVsbCE9YiYmdGhpcy5hdHRhY2hUb0VsZW1lbnQoYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5leHRlbnNpb25zKSJib29sZWFuIiE9PXR5cGVvZiB0aGlzLmV4dGVuc2lvbnNbYV0mJnRoaXMuZXh0ZW5zaW9uc1thXS5kZXN0cm95KCk7dGhpcy5leHRlbnNpb25zPW51bGw7dGhpcy5lbGVtZW50JiYoT3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudCh0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudC5oYXNTY3JvbGxFdmVudCYmT3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKHdpbmRvdywic2Nyb2xsIix0aGlzLmNsZWFyTW91c2VMaXN0ZW5lcikpO3RoaXMuZXZlbnRIYW5kbGVyPXRoaXMuZmFsbFRocm91Z2g9dGhpcy5vYmplY3Q9dGhpcy5saXN0ZW5lcnM9dGhpcy5lbGVtZW50PW51bGx9LGFkZEV2ZW50VHlwZTpmdW5jdGlvbihhKXt9LGF0dGFjaFRvRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQ/Ck9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZ0VsZW1lbnQodGhpcy5lbGVtZW50KToodGhpcy5ldmVudEhhbmRsZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kQXNFdmVudExpc3RlbmVyKHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LHRoaXMpLHRoaXMuY2xlYXJNb3VzZUxpc3RlbmVyPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLmNsZWFyTW91c2VDYWNoZSx0aGlzKSk7dGhpcy5lbGVtZW50PWE7Zm9yKHZhciBiPSEhd2luZG93Lm5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzLGMsZD0wLGU9dGhpcy5CUk9XU0VSX0VWRU5UUy5sZW5ndGg7ZDxlO2QrKyljPXRoaXMuQlJPV1NFUl9FVkVOVFNbZF0sT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsYyx0aGlzLmV2ZW50SGFuZGxlciksYiYmMD09PWMuaW5kZXhPZigidG91Y2giKSYmdGhpcy5hZGRNc1RvdWNoTGlzdGVuZXIoYSxjLHRoaXMuZXZlbnRIYW5kbGVyKTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiZHJhZ3N0YXJ0IiwKT3BlbkxheWVycy5FdmVudC5zdG9wKX0sb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpInNjb3BlIiE9YiYmYS5oYXNPd25Qcm9wZXJ0eShiKSYmdGhpcy5yZWdpc3RlcihiLGEuc2NvcGUsYVtiXSl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEsYixjLGQpe2EgaW4gT3BlbkxheWVycy5FdmVudHMmJiF0aGlzLmV4dGVuc2lvbnNbYV0mJih0aGlzLmV4dGVuc2lvbnNbYV09bmV3IE9wZW5MYXllcnMuRXZlbnRzW2FdKHRoaXMpKTtpZihudWxsIT1jKXtudWxsPT1iJiYoYj10aGlzLm9iamVjdCk7dmFyIGU9dGhpcy5saXN0ZW5lcnNbYV07ZXx8KGU9W10sdGhpcy5saXN0ZW5lcnNbYV09ZSx0aGlzLmV4dGVuc2lvbkNvdW50W2FdPTApO2I9e29iajpiLGZ1bmM6Y307ZD8oZS5zcGxpY2UodGhpcy5leHRlbnNpb25Db3VudFthXSwwLGIpLCJvYmplY3QiPT09dHlwZW9mIGQmJmQuZXh0ZW5zaW9uJiZ0aGlzLmV4dGVuc2lvbkNvdW50W2FdKyspOmUucHVzaChiKX19LHJlZ2lzdGVyUHJpb3JpdHk6ZnVuY3Rpb24oYSwKYixjKXt0aGlzLnJlZ2lzdGVyKGEsYixjLCEwKX0sdW46ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpInNjb3BlIiE9YiYmYS5oYXNPd25Qcm9wZXJ0eShiKSYmdGhpcy51bnJlZ2lzdGVyKGIsYS5zY29wZSxhW2JdKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhLGIsYyl7bnVsbD09YiYmKGI9dGhpcy5vYmplY3QpO2E9dGhpcy5saXN0ZW5lcnNbYV07aWYobnVsbCE9YSlmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspaWYoYVtkXS5vYmo9PWImJmFbZF0uZnVuYz09Yyl7YS5zcGxpY2UoZCwxKTticmVha319LHJlbW92ZTpmdW5jdGlvbihhKXtudWxsIT10aGlzLmxpc3RlbmVyc1thXSYmKHRoaXMubGlzdGVuZXJzW2FdPVtdKX0sdHJpZ2dlckV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5saXN0ZW5lcnNbYV07aWYoYyYmMCE9Yy5sZW5ndGgpe251bGw9PWImJihiPXt9KTtiLm9iamVjdD10aGlzLm9iamVjdDtiLmVsZW1lbnQ9dGhpcy5lbGVtZW50O2IudHlwZXx8KGIudHlwZT0KYSk7Zm9yKHZhciBjPWMuc2xpY2UoKSxkLGU9MCxmPWMubGVuZ3RoO2U8ZiYmKGQ9Y1tlXSxkPWQuZnVuYy5hcHBseShkLm9iaixbYl0pLHZvaWQgMD09ZHx8ITEhPWQpO2UrKyk7dGhpcy5mYWxsVGhyb3VnaHx8T3BlbkxheWVycy5FdmVudC5zdG9wKGIsITApO3JldHVybiBkfX0saGFuZGxlQnJvd3NlckV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEudHlwZSxjPXRoaXMubGlzdGVuZXJzW2JdO2lmKGMmJjAhPWMubGVuZ3RoKXtpZigoYz1hLnRvdWNoZXMpJiZjWzBdKXtmb3IodmFyIGQ9MCxlPTAsZj1jLmxlbmd0aCxnLGg9MDtoPGY7KytoKWc9dGhpcy5nZXRUb3VjaENsaWVudFhZKGNbaF0pLGQrPWcuY2xpZW50WCxlKz1nLmNsaWVudFk7YS5jbGllbnRYPWQvZjthLmNsaWVudFk9ZS9mfXRoaXMuaW5jbHVkZVhZJiYoYS54eT10aGlzLmdldE1vdXNlUG9zaXRpb24oYSkpO3RoaXMudHJpZ2dlckV2ZW50KGIsYSl9fSxnZXRUb3VjaENsaWVudFhZOmZ1bmN0aW9uKGEpe3ZhciBiPXdpbmRvdy5vbE1vY2tXaW58fAp3aW5kb3csYz1iLnBhZ2VYT2Zmc2V0LGI9Yi5wYWdlWU9mZnNldCxkPWEuY2xpZW50WCxlPWEuY2xpZW50WTtpZigwPT09YS5wYWdlWSYmTWF0aC5mbG9vcihlKT5NYXRoLmZsb29yKGEucGFnZVkpfHwwPT09YS5wYWdlWCYmTWF0aC5mbG9vcihkKT5NYXRoLmZsb29yKGEucGFnZVgpKWQtPWMsZS09YjtlbHNlIGlmKGU8YS5wYWdlWS1ifHxkPGEucGFnZVgtYylkPWEucGFnZVgtYyxlPWEucGFnZVktYjthLm9sQ2xpZW50WD1kO2Eub2xDbGllbnRZPWU7cmV0dXJue2NsaWVudFg6ZCxjbGllbnRZOmV9fSxjbGVhck1vdXNlQ2FjaGU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc2Nyb2xscz1udWxsO3RoaXMuZWxlbWVudC5sZWZ0dG9wPW51bGw7dGhpcy5lbGVtZW50Lm9mZnNldHM9bnVsbH0sZ2V0TW91c2VQb3NpdGlvbjpmdW5jdGlvbihhKXt0aGlzLmluY2x1ZGVYWT90aGlzLmVsZW1lbnQuaGFzU2Nyb2xsRXZlbnR8fChPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUod2luZG93LCJzY3JvbGwiLAp0aGlzLmNsZWFyTW91c2VMaXN0ZW5lciksdGhpcy5lbGVtZW50Lmhhc1Njcm9sbEV2ZW50PSEwKTp0aGlzLmNsZWFyTW91c2VDYWNoZSgpO2lmKCF0aGlzLmVsZW1lbnQuc2Nyb2xscyl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmdldFZpZXdwb3J0RWxlbWVudCgpO3RoaXMuZWxlbWVudC5zY3JvbGxzPVt3aW5kb3cucGFnZVhPZmZzZXR8fGIuc2Nyb2xsTGVmdCx3aW5kb3cucGFnZVlPZmZzZXR8fGIuc2Nyb2xsVG9wXX10aGlzLmVsZW1lbnQubGVmdHRvcHx8KHRoaXMuZWxlbWVudC5sZWZ0dG9wPVtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50TGVmdHx8MCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50VG9wfHwwXSk7dGhpcy5lbGVtZW50Lm9mZnNldHN8fCh0aGlzLmVsZW1lbnQub2Zmc2V0cz1PcGVuTGF5ZXJzLlV0aWwucGFnZVBvc2l0aW9uKHRoaXMuZWxlbWVudCkpO3JldHVybiBuZXcgT3BlbkxheWVycy5QaXhlbChhLmNsaWVudFgrdGhpcy5lbGVtZW50LnNjcm9sbHNbMF0tCnRoaXMuZWxlbWVudC5vZmZzZXRzWzBdLXRoaXMuZWxlbWVudC5sZWZ0dG9wWzBdLGEuY2xpZW50WSt0aGlzLmVsZW1lbnQuc2Nyb2xsc1sxXS10aGlzLmVsZW1lbnQub2Zmc2V0c1sxXS10aGlzLmVsZW1lbnQubGVmdHRvcFsxXSl9LGFkZE1zVG91Y2hMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtjKE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtmb3IodmFyIGE9ZS5sZW5ndGgtMTswPD1hOy0tYSllW2FdLnN0b3BQcm9wYWdhdGlvbigpfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2Zvcih2YXIgYT1lLmxlbmd0aC0xOzA8PWE7LS1hKWVbYV0ucHJldmVudERlZmF1bHQoKX0sdHlwZTpifSxhKSl9dmFyIGU9dGhpcy5fbXNUb3VjaGVzO3N3aXRjaChiKXtjYXNlICJ0b3VjaHN0YXJ0IjpyZXR1cm4gdGhpcy5hZGRNc1RvdWNoTGlzdGVuZXJTdGFydChhLGIsZCk7Y2FzZSAidG91Y2hlbmQiOnJldHVybiB0aGlzLmFkZE1zVG91Y2hMaXN0ZW5lckVuZChhLApiLGQpO2Nhc2UgInRvdWNobW92ZSI6cmV0dXJuIHRoaXMuYWRkTXNUb3VjaExpc3RlbmVyTW92ZShhLGIsZCk7ZGVmYXVsdDp0aHJvdyJVbmtub3duIHRvdWNoIGV2ZW50IHR5cGUiO319LGFkZE1zVG91Y2hMaXN0ZW5lclN0YXJ0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9tc1RvdWNoZXM7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsIk1TUG9pbnRlckRvd24iLGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0hMSxnPTAsaD1kLmxlbmd0aDtnPGg7KytnKWlmKGRbZ10ucG9pbnRlcklkPT1hLnBvaW50ZXJJZCl7Yj0hMDticmVha31ifHxkLnB1c2goYSk7YS50b3VjaGVzPWQuc2xpY2UoKTtjKGEpfSk7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsIk1TUG9pbnRlclVwIixmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWQubGVuZ3RoO2I8YzsrK2IpaWYoZFtiXS5wb2ludGVySWQ9PWEucG9pbnRlcklkKXtkLnNwbGljZShiLDEpO2JyZWFrfX0pfSxhZGRNc1RvdWNoTGlzdGVuZXJNb3ZlOmZ1bmN0aW9uKGEsCmIsYyl7dmFyIGQ9dGhpcy5fbXNUb3VjaGVzO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShhLCJNU1BvaW50ZXJNb3ZlIixmdW5jdGlvbihhKXtpZihhLnBvaW50ZXJUeXBlIT1hLk1TUE9JTlRFUl9UWVBFX01PVVNFfHwwIT1hLmJ1dHRvbnMpaWYoMSE9ZC5sZW5ndGh8fGRbMF0ucGFnZVghPWEucGFnZVh8fGRbMF0ucGFnZVkhPWEucGFnZVkpe2Zvcih2YXIgYj0wLGc9ZC5sZW5ndGg7YjxnOysrYilpZihkW2JdLnBvaW50ZXJJZD09YS5wb2ludGVySWQpe2RbYl09YTticmVha31hLnRvdWNoZXM9ZC5zbGljZSgpO2MoYSl9fSl9LGFkZE1zVG91Y2hMaXN0ZW5lckVuZDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5fbXNUb3VjaGVzO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShhLCJNU1BvaW50ZXJVcCIsZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsZz1kLmxlbmd0aDtiPGc7KytiKWlmKGRbYl0ucG9pbnRlcklkPT1hLnBvaW50ZXJJZCl7ZC5zcGxpY2UoYiwxKTticmVha31hLnRvdWNoZXM9CmQuc2xpY2UoKTtjKGEpfSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRXZlbnRzIn0pO09wZW5MYXllcnMuRXZlbnRzLmJ1dHRvbmNsaWNrPU9wZW5MYXllcnMuQ2xhc3Moe3RhcmdldDpudWxsLGV2ZW50czoibW91c2Vkb3duIG1vdXNldXAgY2xpY2sgZGJsY2xpY2sgdG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQga2V5ZG93biIuc3BsaXQoIiAiKSxzdGFydFJlZ0V4Oi9ebW91c2Vkb3dufHRvdWNoc3RhcnQkLyxjYW5jZWxSZWdFeDovXnRvdWNobW92ZSQvLGNvbXBsZXRlUmVnRXg6L15tb3VzZXVwfHRvdWNoZW5kJC8saW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLnRhcmdldD1hO2ZvcihhPXRoaXMuZXZlbnRzLmxlbmd0aC0xOzA8PWE7LS1hKXRoaXMudGFyZ2V0LnJlZ2lzdGVyKHRoaXMuZXZlbnRzW2FdLHRoaXMsdGhpcy5idXR0b25DbGljayx7ZXh0ZW5zaW9uOiEwfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5ldmVudHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy50YXJnZXQudW5yZWdpc3Rlcih0aGlzLmV2ZW50c1thXSx0aGlzLHRoaXMuYnV0dG9uQ2xpY2spOwpkZWxldGUgdGhpcy50YXJnZXR9LGdldFByZXNzZWRCdXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9MyxjO2Rve2lmKE9wZW5MYXllcnMuRWxlbWVudC5oYXNDbGFzcyhhLCJvbEJ1dHRvbiIpKXtjPWE7YnJlYWt9YT1hLnBhcmVudE5vZGV9d2hpbGUoMDwtLWImJmEpO3JldHVybiBjfSxpZ25vcmU6ZnVuY3Rpb24oYSl7dmFyIGI9MyxjPSExO2Rve2lmKCJhIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7Yz0hMDticmVha31hPWEucGFyZW50Tm9kZX13aGlsZSgwPC0tYiYmYSk7cmV0dXJuIGN9LGJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGEpe3ZhciBiPSEwLGM9T3BlbkxheWVycy5FdmVudC5lbGVtZW50KGEpO2lmKGMmJihPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHwhfmEudHlwZS5pbmRleE9mKCJtb3VzZSIpKSlpZihjPXRoaXMuZ2V0UHJlc3NlZEJ1dHRvbihjKSl7aWYoImtleWRvd24iPT09YS50eXBlKXN3aXRjaChhLmtleUNvZGUpe2Nhc2UgT3BlbkxheWVycy5FdmVudC5LRVlfUkVUVVJOOmNhc2UgT3BlbkxheWVycy5FdmVudC5LRVlfU1BBQ0U6dGhpcy50YXJnZXQudHJpZ2dlckV2ZW50KCJidXR0b25jbGljayIsCntidXR0b25FbGVtZW50OmN9KSxPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSksYj0hMX1lbHNlIGlmKHRoaXMuc3RhcnRFdnQpe2lmKHRoaXMuY29tcGxldGVSZWdFeC50ZXN0KGEudHlwZSkpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb24oYyksZD1PcGVuTGF5ZXJzLlV0aWwuZ2V0Vmlld3BvcnRFbGVtZW50KCksZT13aW5kb3cucGFnZVlPZmZzZXR8fGQuc2Nyb2xsVG9wO2JbMF0tPXdpbmRvdy5wYWdlWE9mZnNldHx8ZC5zY3JvbGxMZWZ0O2JbMV0tPWU7dGhpcy50YXJnZXQudHJpZ2dlckV2ZW50KCJidXR0b25jbGljayIse2J1dHRvbkVsZW1lbnQ6YyxidXR0b25YWTp7eDp0aGlzLnN0YXJ0RXZ0LmNsaWVudFgtYlswXSx5OnRoaXMuc3RhcnRFdnQuY2xpZW50WS1iWzFdfX0pfXRoaXMuY2FuY2VsUmVnRXgudGVzdChhLnR5cGUpJiZkZWxldGUgdGhpcy5zdGFydEV2dDtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSk7Yj0hMX10aGlzLnN0YXJ0UmVnRXgudGVzdChhLnR5cGUpJiYKKHRoaXMuc3RhcnRFdnQ9YSxPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSksYj0hMSl9ZWxzZSBiPSF0aGlzLmlnbm9yZShPcGVuTGF5ZXJzLkV2ZW50LmVsZW1lbnQoYSkpLGRlbGV0ZSB0aGlzLnN0YXJ0RXZ0O3JldHVybiBifX0pO09wZW5MYXllcnMuQ29udHJvbD1PcGVuTGF5ZXJzLkNsYXNzKHtpZDpudWxsLG1hcDpudWxsLGRpdjpudWxsLHR5cGU6bnVsbCxhbGxvd1NlbGVjdGlvbjohMSxkaXNwbGF5Q2xhc3M6IiIsdGl0bGU6IiIsYXV0b0FjdGl2YXRlOiExLGFjdGl2ZTpudWxsLGhhbmRsZXJPcHRpb25zOm51bGwsaGFuZGxlcjpudWxsLGV2ZW50TGlzdGVuZXJzOm51bGwsZXZlbnRzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmRpc3BsYXlDbGFzcz10aGlzLkNMQVNTX05BTUUucmVwbGFjZSgiT3BlbkxheWVycy4iLCJvbCIpLnJlcGxhY2UoL1wuL2csIiIpO09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTt0aGlzLmV2ZW50cz1uZXcgT3BlbkxheWVycy5FdmVudHModGhpcyk7aWYodGhpcy5ldmVudExpc3RlbmVycyBpbnN0YW5jZW9mIE9iamVjdCl0aGlzLmV2ZW50cy5vbih0aGlzLmV2ZW50TGlzdGVuZXJzKTtudWxsPT10aGlzLmlkJiYodGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKwoiXyIpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZXZlbnRzJiYodGhpcy5ldmVudExpc3RlbmVycyYmdGhpcy5ldmVudHMudW4odGhpcy5ldmVudExpc3RlbmVycyksdGhpcy5ldmVudHMuZGVzdHJveSgpLHRoaXMuZXZlbnRzPW51bGwpO3RoaXMuZXZlbnRMaXN0ZW5lcnM9bnVsbDt0aGlzLmhhbmRsZXImJih0aGlzLmhhbmRsZXIuZGVzdHJveSgpLHRoaXMuaGFuZGxlcj1udWxsKTtpZih0aGlzLmhhbmRsZXJzKXtmb3IodmFyIGEgaW4gdGhpcy5oYW5kbGVycyl0aGlzLmhhbmRsZXJzLmhhc093blByb3BlcnR5KGEpJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5oYW5kbGVyc1thXS5kZXN0cm95JiZ0aGlzLmhhbmRsZXJzW2FdLmRlc3Ryb3koKTt0aGlzLmhhbmRsZXJzPW51bGx9dGhpcy5tYXAmJih0aGlzLm1hcC5yZW1vdmVDb250cm9sKHRoaXMpLHRoaXMubWFwPW51bGwpO3RoaXMuZGl2PW51bGx9LHNldE1hcDpmdW5jdGlvbihhKXt0aGlzLm1hcD1hO3RoaXMuaGFuZGxlciYmCnRoaXMuaGFuZGxlci5zZXRNYXAoYSl9LGRyYXc6ZnVuY3Rpb24oYSl7bnVsbD09dGhpcy5kaXYmJih0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuaWQpLHRoaXMuZGl2LmNsYXNzTmFtZT10aGlzLmRpc3BsYXlDbGFzcyx0aGlzLmFsbG93U2VsZWN0aW9ufHwodGhpcy5kaXYuY2xhc3NOYW1lKz0iIG9sQ29udHJvbE5vU2VsZWN0Iix0aGlzLmRpdi5zZXRBdHRyaWJ1dGUoInVuc2VsZWN0YWJsZSIsIm9uIiwwKSx0aGlzLmRpdi5vbnNlbGVjdHN0YXJ0PU9wZW5MYXllcnMuRnVuY3Rpb24uRmFsc2UpLCIiIT10aGlzLnRpdGxlJiYodGhpcy5kaXYudGl0bGU9dGhpcy50aXRsZSkpO251bGwhPWEmJih0aGlzLnBvc2l0aW9uPWEuY2xvbmUoKSk7dGhpcy5tb3ZlVG8odGhpcy5wb3NpdGlvbik7cmV0dXJuIHRoaXMuZGl2fSxtb3ZlVG86ZnVuY3Rpb24oYSl7bnVsbCE9YSYmbnVsbCE9dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS5sZWZ0PWEueCsicHgiLHRoaXMuZGl2LnN0eWxlLnRvcD0KYS55KyJweCIpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXJldHVybiExO3RoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmFjdGl2YXRlKCk7dGhpcy5hY3RpdmU9ITA7dGhpcy5tYXAmJk9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdix0aGlzLmRpc3BsYXlDbGFzcy5yZXBsYWNlKC8gL2csIiIpKyJBY3RpdmUiKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImFjdGl2YXRlIik7cmV0dXJuITB9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmU/KHRoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmRlYWN0aXZhdGUoKSx0aGlzLmFjdGl2ZT0hMSx0aGlzLm1hcCYmT3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LHRoaXMuZGlzcGxheUNsYXNzLnJlcGxhY2UoLyAvZywiIikrIkFjdGl2ZSIpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZGVhY3RpdmF0ZSIpLAohMCk6ITF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9CVVRUT049MTtPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT0dHTEU9MjtPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT09MPTM7T3BlbkxheWVycy5HZW9tZXRyeT1PcGVuTGF5ZXJzLkNsYXNzKHtpZDpudWxsLHBhcmVudDpudWxsLGJvdW5kczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYm91bmRzPXRoaXMuaWQ9bnVsbH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnl9LHNldEJvdW5kczpmdW5jdGlvbihhKXthJiYodGhpcy5ib3VuZHM9YS5jbG9uZSgpKX0sY2xlYXJCb3VuZHM6ZnVuY3Rpb24oKXt0aGlzLmJvdW5kcz1udWxsO3RoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5jbGVhckJvdW5kcygpfSxleHRlbmRCb3VuZHM6ZnVuY3Rpb24oYSl7dGhpcy5nZXRCb3VuZHMoKT90aGlzLmJvdW5kcy5leHRlbmQoYSk6dGhpcy5zZXRCb3VuZHMoYSl9LGdldEJvdW5kczpmdW5jdGlvbigpe251bGw9PXRoaXMuYm91bmRzJiZ0aGlzLmNhbGN1bGF0ZUJvdW5kcygpOwpyZXR1cm4gdGhpcy5ib3VuZHN9LGNhbGN1bGF0ZUJvdW5kczpmdW5jdGlvbigpe30sZGlzdGFuY2VUbzpmdW5jdGlvbihhLGIpe30sZ2V0VmVydGljZXM6ZnVuY3Rpb24oYSl7fSxhdFBvaW50OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0hMTtudWxsIT10aGlzLmdldEJvdW5kcygpJiZudWxsIT1hJiYoYj1udWxsIT1iP2I6MCxjPW51bGwhPWM/YzowLGQ9KG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmJvdW5kcy5sZWZ0LWIsdGhpcy5ib3VuZHMuYm90dG9tLWMsdGhpcy5ib3VuZHMucmlnaHQrYix0aGlzLmJvdW5kcy50b3ArYykpLmNvbnRhaW5zTG9uTGF0KGEpKTtyZXR1cm4gZH0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGdldEFyZWE6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sZ2V0Q2VudHJvaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQmJk9wZW5MYXllcnMuRm9ybWF0LldLVD9PcGVuTGF5ZXJzLkZvcm1hdC5XS1QucHJvdG90eXBlLndyaXRlKG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKHRoaXMpKToKT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5In0pO09wZW5MYXllcnMuR2VvbWV0cnkuZnJvbVdLVD1mdW5jdGlvbihhKXt2YXIgYjtpZihPcGVuTGF5ZXJzLkZvcm1hdCYmT3BlbkxheWVycy5Gb3JtYXQuV0tUKXt2YXIgYz1PcGVuTGF5ZXJzLkdlb21ldHJ5LmZyb21XS1QuZm9ybWF0O2N8fChjPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5XS1QsT3BlbkxheWVycy5HZW9tZXRyeS5mcm9tV0tULmZvcm1hdD1jKTthPWMucmVhZChhKTtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvciliPWEuZ2VvbWV0cnk7ZWxzZSBpZihPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKSl7Yj1hLmxlbmd0aDtmb3IodmFyIGM9QXJyYXkoYiksZD0wO2Q8YjsrK2QpY1tkXT1hW2RdLmdlb21ldHJ5O2I9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbihjKX19cmV0dXJuIGJ9OwpPcGVuTGF5ZXJzLkdlb21ldHJ5LnNlZ21lbnRzSW50ZXJzZWN0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jJiZjLnBvaW50O2M9YyYmYy50b2xlcmFuY2U7dmFyIGU9ITEsZj1hLngxLWIueDEsZz1hLnkxLWIueTEsaD1hLngyLWEueDEsaz1hLnkyLWEueTEsbD1iLnkyLWIueTEsbT1iLngyLWIueDEscD1sKmgtbSprLGw9bSpnLWwqZixnPWgqZy1rKmY7MD09cD8wPT1sJiYwPT1nJiYoZT0hMCk6KGY9bC9wLHA9Zy9wLDA8PWYmJigxPj1mJiYwPD1wJiYxPj1wKSYmKGQ/KGg9YS54MStmKmgscD1hLnkxK2YqayxlPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGgscCkpOmU9ITApKTtpZihjKWlmKGUpe2lmKGQpYTpmb3IoYT1bYSxiXSxiPTA7Mj5iOysrYilmb3IoZj1hW2JdLGs9MTszPms7KytrKWlmKGg9ZlsieCIra10scD1mWyJ5IitrXSxkPU1hdGguc3FydChNYXRoLnBvdyhoLWUueCwyKStNYXRoLnBvdyhwLWUueSwyKSksZDxjKXtlLng9aDtlLnk9cDticmVhayBhfX1lbHNlIGE6Zm9yKGE9ClthLGJdLGI9MDsyPmI7KytiKWZvcihoPWFbYl0scD1hWyhiKzEpJTJdLGs9MTszPms7KytrKWlmKGY9e3g6aFsieCIra10seTpoWyJ5IitrXX0sZz1PcGVuTGF5ZXJzLkdlb21ldHJ5LmRpc3RhbmNlVG9TZWdtZW50KGYscCksZy5kaXN0YW5jZTxjKXtlPWQ/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZi54LGYueSk6ITA7YnJlYWsgYX1yZXR1cm4gZX07T3BlbkxheWVycy5HZW9tZXRyeS5kaXN0YW5jZVRvU2VnbWVudD1mdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuR2VvbWV0cnkuZGlzdGFuY2VTcXVhcmVkVG9TZWdtZW50KGEsYik7Yy5kaXN0YW5jZT1NYXRoLnNxcnQoYy5kaXN0YW5jZSk7cmV0dXJuIGN9OwpPcGVuTGF5ZXJzLkdlb21ldHJ5LmRpc3RhbmNlU3F1YXJlZFRvU2VnbWVudD1mdW5jdGlvbihhLGIpe3ZhciBjPWEueCxkPWEueSxlPWIueDEsZj1iLnkxLGc9Yi54MixoPWIueTIsaz1nLWUsbD1oLWYsbT0oayooYy1lKStsKihkLWYpKS8oTWF0aC5wb3coaywyKStNYXRoLnBvdyhsLDIpKTswPj1tfHwoMTw9bT8oZT1nLGY9aCk6KGUrPW0qayxmKz1tKmwpKTtyZXR1cm57ZGlzdGFuY2U6TWF0aC5wb3coZS1jLDIpK01hdGgucG93KGYtZCwyKSx4OmUseTpmLGFsb25nOm19fTtPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LHtjb21wb25lbnRzOm51bGwsY29tcG9uZW50VHlwZXM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuR2VvbWV0cnkucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuY29tcG9uZW50cz1bXTtudWxsIT1hJiZ0aGlzLmFkZENvbXBvbmVudHMoYSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNvbXBvbmVudHMubGVuZ3RoPTA7dGhpcy5jb21wb25lbnRzPW51bGw7T3BlbkxheWVycy5HZW9tZXRyeS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWV2YWwoIm5ldyAiK3RoaXMuQ0xBU1NfTkFNRSsiKCkiKSxiPTAsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYS5hZGRDb21wb25lbnQodGhpcy5jb21wb25lbnRzW2JdLmNsb25lKCkpOwpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMpO3JldHVybiBhfSxnZXRDb21wb25lbnRzU3RyaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5jb21wb25lbnRzW2JdLnRvU2hvcnRTdHJpbmcoKSk7cmV0dXJuIGEuam9pbigiLCIpfSxjYWxjdWxhdGVCb3VuZHM6ZnVuY3Rpb24oKXt0aGlzLmJvdW5kcz1udWxsO3ZhciBhPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyxiPXRoaXMuY29tcG9uZW50cztpZihiKWZvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKylhLmV4dGVuZChiW2NdLmdldEJvdW5kcygpKTtudWxsIT1hLmxlZnQmJihudWxsIT1hLmJvdHRvbSYmbnVsbCE9YS5yaWdodCYmbnVsbCE9YS50b3ApJiZ0aGlzLnNldEJvdW5kcyhhKX0sYWRkQ29tcG9uZW50czpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8CmM7YisrKXRoaXMuYWRkQ29tcG9uZW50KGFbYl0pfSxhZGRDb21wb25lbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz0hMTtpZihhJiYobnVsbD09dGhpcy5jb21wb25lbnRUeXBlc3x8LTE8T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5jb21wb25lbnRUeXBlcyxhLkNMQVNTX05BTUUpKSl7aWYobnVsbCE9YiYmYjx0aGlzLmNvbXBvbmVudHMubGVuZ3RoKXt2YXIgYz10aGlzLmNvbXBvbmVudHMuc2xpY2UoMCxiKSxkPXRoaXMuY29tcG9uZW50cy5zbGljZShiLHRoaXMuY29tcG9uZW50cy5sZW5ndGgpO2MucHVzaChhKTt0aGlzLmNvbXBvbmVudHM9Yy5jb25jYXQoZCl9ZWxzZSB0aGlzLmNvbXBvbmVudHMucHVzaChhKTthLnBhcmVudD10aGlzO3RoaXMuY2xlYXJCb3VuZHMoKTtjPSEwfXJldHVybiBjfSxyZW1vdmVDb21wb25lbnRzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2Zvcih2YXIgYz1hLmxlbmd0aC0xOzA8PWM7LS1jKWI9CnRoaXMucmVtb3ZlQ29tcG9uZW50KGFbY10pfHxiO3JldHVybiBifSxyZW1vdmVDb21wb25lbnQ6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5jb21wb25lbnRzLGEpO3RoaXMuY2xlYXJCb3VuZHMoKTtyZXR1cm4hMH0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj0wLGM9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtiPGM7YisrKWErPXRoaXMuY29tcG9uZW50c1tiXS5nZXRMZW5ndGgoKTtyZXR1cm4gYX0sZ2V0QXJlYTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhKz10aGlzLmNvbXBvbmVudHNbYl0uZ2V0QXJlYSgpO3JldHVybiBhfSxnZXRHZW9kZXNpY0FyZWE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7YysrKWIrPXRoaXMuY29tcG9uZW50c1tjXS5nZXRHZW9kZXNpY0FyZWEoYSk7cmV0dXJuIGJ9LGdldENlbnRyb2lkOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiB0aGlzLmNvbXBvbmVudHMubGVuZ3RoJiYKdGhpcy5jb21wb25lbnRzWzBdLmdldENlbnRyb2lkKCk7YT10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2lmKCFhKXJldHVybiExO2Zvcih2YXIgYj1bXSxjPVtdLGQ9MCxlPU51bWJlci5NQVhfVkFMVUUsZixnPTA7ZzxhOysrZyl7Zj10aGlzLmNvbXBvbmVudHNbZ107dmFyIGg9Zi5nZXRBcmVhKCk7Zj1mLmdldENlbnRyb2lkKCEwKTtpc05hTihoKXx8KGlzTmFOKGYueCl8fGlzTmFOKGYueSkpfHwoYi5wdXNoKGgpLGQrPWgsZT1oPGUmJjA8aD9oOmUsYy5wdXNoKGYpKX1hPWIubGVuZ3RoO2lmKDA9PT1kKXtmb3IoZz0wO2c8YTsrK2cpYltnXT0xO2Q9Yi5sZW5ndGh9ZWxzZXtmb3IoZz0wO2c8YTsrK2cpYltnXS89ZTtkLz1lfWZvcih2YXIgaz1lPTAsZz0wO2c8YTsrK2cpZj1jW2ddLGg9YltnXSxlKz1mLngqaCxrKz1mLnkqaDtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZS9kLGsvZCl9LGdldEdlb2Rlc2ljTGVuZ3RoOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLApjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspYis9dGhpcy5jb21wb25lbnRzW2NdLmdldEdlb2Rlc2ljTGVuZ3RoKGEpO3JldHVybiBifSxtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspdGhpcy5jb21wb25lbnRzW2NdLm1vdmUoYSxiKX0scm90YXRlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpdGhpcy5jb21wb25lbnRzW2NdLnJvdGF0ZShhLGIpfSxyZXNpemU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wO2Q8dGhpcy5jb21wb25lbnRzLmxlbmd0aDsrK2QpdGhpcy5jb21wb25lbnRzW2RdLnJlc2l6ZShhLGIsYyk7cmV0dXJuIHRoaXN9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9IShiJiYhMT09PWIuZWRnZSkmJmImJmIuZGV0YWlscyxkLGUsZixnPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxoPTAsaz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2g8CmsmJiEoZD10aGlzLmNvbXBvbmVudHNbaF0uZGlzdGFuY2VUbyhhLGIpLGY9Yz9kLmRpc3RhbmNlOmQsZjxnJiYoZz1mLGU9ZCwwPT1nKSk7KytoKTtyZXR1cm4gZX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPSEwO2lmKGEmJmEuQ0xBU1NfTkFNRSYmdGhpcy5DTEFTU19OQU1FPT1hLkNMQVNTX05BTUUpaWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYS5jb21wb25lbnRzKSYmYS5jb21wb25lbnRzLmxlbmd0aD09dGhpcy5jb21wb25lbnRzLmxlbmd0aClmb3IodmFyIGM9MCxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyl7aWYoIXRoaXMuY29tcG9uZW50c1tjXS5lcXVhbHMoYS5jb21wb25lbnRzW2NdKSl7Yj0hMTticmVha319ZWxzZSBiPSExO2Vsc2UgYj0hMTtyZXR1cm4gYn0sdHJhbnNmb3JtOmZ1bmN0aW9uKGEsYil7aWYoYSYmYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspdGhpcy5jb21wb25lbnRzW2NdLnRyYW5zZm9ybShhLApiKTt0aGlzLmJvdW5kcz1udWxsfXJldHVybiB0aGlzfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0hMSxjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZCYmIShiPWEuaW50ZXJzZWN0cyh0aGlzLmNvbXBvbmVudHNbY10pKTsrK2MpO3JldHVybiBifSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGIsdGhpcy5jb21wb25lbnRzW2NdLmdldFZlcnRpY2VzKGEpKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LHt4Om51bGwseTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkdlb21ldHJ5LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLng9cGFyc2VGbG9hdChhKTt0aGlzLnk9cGFyc2VGbG9hdChiKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQodGhpcy54LHRoaXMueSkpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsdGhpcyk7cmV0dXJuIGF9LGNhbGN1bGF0ZUJvdW5kczpmdW5jdGlvbigpe3RoaXMuYm91bmRzPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLngsdGhpcy55LHRoaXMueCx0aGlzLnkpfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9IShiJiYhMT09PWIuZWRnZSkmJmImJmIuZGV0YWlscyxkLGUsZixnLGg7YSBpbnN0YW5jZW9mCk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQ/KGU9dGhpcy54LGY9dGhpcy55LGc9YS54LGg9YS55LGQ9TWF0aC5zcXJ0KE1hdGgucG93KGUtZywyKStNYXRoLnBvdyhmLWgsMikpLGQ9Yz97eDA6ZSx5MDpmLHgxOmcseTE6aCxkaXN0YW5jZTpkfTpkKTooZD1hLmRpc3RhbmNlVG8odGhpcyxiKSxjJiYoZD17eDA6ZC54MSx5MDpkLnkxLHgxOmQueDAseTE6ZC55MCxkaXN0YW5jZTpkLmRpc3RhbmNlfSkpO3JldHVybiBkfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7bnVsbCE9YSYmKGI9dGhpcy54PT1hLngmJnRoaXMueT09YS55fHxpc05hTih0aGlzLngpJiZpc05hTih0aGlzLnkpJiZpc05hTihhLngpJiZpc05hTihhLnkpKTtyZXR1cm4gYn0sdG9TaG9ydFN0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLngrIiwgIit0aGlzLnl9LG1vdmU6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPWE7dGhpcy55Kz1iO3RoaXMuY2xlYXJCb3VuZHMoKX0scm90YXRlOmZ1bmN0aW9uKGEsYil7YSo9Ck1hdGguUEkvMTgwO3ZhciBjPXRoaXMuZGlzdGFuY2VUbyhiKSxkPWErTWF0aC5hdGFuMih0aGlzLnktYi55LHRoaXMueC1iLngpO3RoaXMueD1iLngrYypNYXRoLmNvcyhkKTt0aGlzLnk9Yi55K2MqTWF0aC5zaW4oZCk7dGhpcy5jbGVhckJvdW5kcygpfSxnZXRDZW50cm9pZDpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCh0aGlzLngsdGhpcy55KX0scmVzaXplOmZ1bmN0aW9uKGEsYixjKXt0aGlzLng9Yi54K2EqKHZvaWQgMD09Yz8xOmMpKih0aGlzLngtYi54KTt0aGlzLnk9Yi55K2EqKHRoaXMueS1iLnkpO3RoaXMuY2xlYXJCb3VuZHMoKTtyZXR1cm4gdGhpc30saW50ZXJzZWN0czpmdW5jdGlvbihhKXt2YXIgYj0hMTtyZXR1cm4gYj0iT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWEuQ0xBU1NfTkFNRT90aGlzLmVxdWFscyhhKTphLmludGVyc2VjdHModGhpcyl9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe2EmJmImJihPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKHRoaXMsCmEsYiksdGhpcy5ib3VuZHM9bnVsbCk7cmV0dXJuIHRoaXN9LGdldFZlcnRpY2VzOmZ1bmN0aW9uKGEpe3JldHVyblt0aGlzXX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24se2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCJdLGFkZFBvaW50OmZ1bmN0aW9uKGEsYil7dGhpcy5hZGRDb21wb25lbnQoYSxiKX0scmVtb3ZlUG9pbnQ6ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVDb21wb25lbnQoYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LkN1cnZlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50LHtjb21wb25lbnRUeXBlczpbIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiXSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgYT0wO2lmKHRoaXMuY29tcG9uZW50cyYmMTx0aGlzLmNvbXBvbmVudHMubGVuZ3RoKWZvcih2YXIgYj0xLGM9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtiPGM7YisrKWErPXRoaXMuY29tcG9uZW50c1tiLTFdLmRpc3RhbmNlVG8odGhpcy5jb21wb25lbnRzW2JdKTtyZXR1cm4gYX0sZ2V0R2VvZGVzaWNMZW5ndGg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihhKXt2YXIgYz1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjQzMjYiKTtjLmVxdWFscyhhKXx8KGI9dGhpcy5jbG9uZSgpLnRyYW5zZm9ybShhLGMpKX1hPTA7aWYoYi5jb21wb25lbnRzJiYxPGIuY29tcG9uZW50cy5sZW5ndGgpZm9yKHZhciBkLGU9MSxmPWIuY29tcG9uZW50cy5sZW5ndGg7ZTwKZjtlKyspYz1iLmNvbXBvbmVudHNbZS0xXSxkPWIuY29tcG9uZW50c1tlXSxhKz1PcGVuTGF5ZXJzLlV0aWwuZGlzdFZpbmNlbnR5KHtsb246Yy54LGxhdDpjLnl9LHtsb246ZC54LGxhdDpkLnl9KTtyZXR1cm4gMUUzKmF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuQ3VydmUifSk7T3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZSx7cmVtb3ZlQ29tcG9uZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29tcG9uZW50cyYmMjx0aGlzLmNvbXBvbmVudHMubGVuZ3RoO2ImJk9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlQ29tcG9uZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gYn0saW50ZXJzZWN0czpmdW5jdGlvbihhKXt2YXIgYj0hMSxjPWEuQ0xBU1NfTkFNRTtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIj09Y3x8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyI9PWN8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09Yyl7dmFyIGQ9dGhpcy5nZXRTb3J0ZWRTZWdtZW50cygpO2E9Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1jP1t7eDE6YS54LHkxOmEueSx4MjphLngseTI6YS55fV06YS5nZXRTb3J0ZWRTZWdtZW50cygpOwp2YXIgZSxmLGcsaCxrLGwsbSxwPTAsbj1kLmxlbmd0aDthOmZvcig7cDxuOysrcCl7Yz1kW3BdO2U9Yy54MTtmPWMueDI7Zz1jLnkxO2g9Yy55Mjt2YXIgcT0wLHI9YS5sZW5ndGg7Zm9yKDtxPHI7KytxKXtrPWFbcV07aWYoay54MT5mKWJyZWFrO2lmKCEoay54MjxlfHwobD1rLnkxLG09ay55MixNYXRoLm1pbihsLG0pPk1hdGgubWF4KGcsaCl8fE1hdGgubWF4KGwsbSk8TWF0aC5taW4oZyxoKXx8IU9wZW5MYXllcnMuR2VvbWV0cnkuc2VnbWVudHNJbnRlcnNlY3QoYyxrKSkpKXtiPSEwO2JyZWFrIGF9fX19ZWxzZSBiPWEuaW50ZXJzZWN0cyh0aGlzKTtyZXR1cm4gYn0sZ2V0U29ydGVkU2VnbWVudHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5jb21wb25lbnRzLmxlbmd0aC0xLGI9QXJyYXkoYSksYyxkLGU9MDtlPGE7KytlKWM9dGhpcy5jb21wb25lbnRzW2VdLGQ9dGhpcy5jb21wb25lbnRzW2UrMV0sYltlXT1jLng8ZC54P3t4MTpjLngseTE6Yy55LHgyOmQueCx5MjpkLnl9Ogp7eDE6ZC54LHkxOmQueSx4MjpjLngseTI6Yy55fTtyZXR1cm4gYi5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEueDEtYi54MX0pfSxzcGxpdFdpdGhTZWdtZW50OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPSEoYiYmITE9PT1iLmVkZ2UpLGQ9YiYmYi50b2xlcmFuY2UsZT1bXSxmPXRoaXMuZ2V0VmVydGljZXMoKSxnPVtdLGg9W10saz0hMSxsLG0scCxuPXtwb2ludDohMCx0b2xlcmFuY2U6ZH0scT1udWxsLHI9MCxzPWYubGVuZ3RoLTI7cjw9czsrK3IpaWYoZD1mW3JdLGcucHVzaChkLmNsb25lKCkpLGw9ZltyKzFdLG09e3gxOmQueCx5MTpkLnkseDI6bC54LHkyOmwueX0sbT1PcGVuTGF5ZXJzLkdlb21ldHJ5LnNlZ21lbnRzSW50ZXJzZWN0KGEsbSxuKSxtIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCYmKChwPW0ueD09PWEueDEmJm0ueT09PWEueTF8fG0ueD09PWEueDImJm0ueT09PWEueTJ8fG0uZXF1YWxzKGQpfHxtLmVxdWFscyhsKT8hMDohMSl8fGMpKW0uZXF1YWxzKGhbaC5sZW5ndGgtCjFdKXx8aC5wdXNoKG0uY2xvbmUoKSksMD09PXImJm0uZXF1YWxzKGQpfHxtLmVxdWFscyhsKXx8KGs9ITAsbS5lcXVhbHMoZCl8fGcucHVzaChtKSxlLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhnKSksZz1bbS5jbG9uZSgpXSk7ayYmKGcucHVzaChsLmNsb25lKCkpLGUucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGcpKSk7aWYoMDxoLmxlbmd0aCl2YXIgdD1hLngxPGEueDI/MTotMSx1PWEueTE8YS55Mj8xOi0xLHE9e2xpbmVzOmUscG9pbnRzOmguc29ydChmdW5jdGlvbihhLGIpe3JldHVybiB0KmEueC10KmIueHx8dSphLnktdSpiLnl9KX07cmV0dXJuIHF9LHNwbGl0OmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbCxkPWImJmIubXV0dWFsLGUsZixnLGg7aWYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyl7dmFyIGs9dGhpcy5nZXRWZXJ0aWNlcygpLGwsbSxwLG4scSxyPVtdO2c9W107Zm9yKHZhciBzPQowLHQ9ay5sZW5ndGgtMjtzPD10Oysrcyl7bD1rW3NdO209a1tzKzFdO3A9e3gxOmwueCx5MTpsLnkseDI6bS54LHkyOm0ueX07aD1ofHxbYV07ZCYmci5wdXNoKGwuY2xvbmUoKSk7Zm9yKHZhciB1PTA7dTxoLmxlbmd0aDsrK3UpaWYobj1oW3VdLnNwbGl0V2l0aFNlZ21lbnQocCxiKSlpZihxPW4ubGluZXMsMDxxLmxlbmd0aCYmKHEudW5zaGlmdCh1LDEpLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoaCxxKSx1Kz1xLmxlbmd0aC0yKSxkKWZvcih2YXIgdj0wLHc9bi5wb2ludHMubGVuZ3RoO3Y8dzsrK3YpcT1uLnBvaW50c1t2XSxxLmVxdWFscyhsKXx8KHIucHVzaChxKSxnLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhyKSkscj1xLmVxdWFscyhtKT9bXTpbcS5jbG9uZSgpXSl9ZCYmKDA8Zy5sZW5ndGgmJjA8ci5sZW5ndGgpJiYoci5wdXNoKG0uY2xvbmUoKSksZy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcocikpKX1lbHNlIGM9CmEuc3BsaXRXaXRoKHRoaXMsYik7aCYmMTxoLmxlbmd0aD9mPSEwOmg9W107ZyYmMTxnLmxlbmd0aD9lPSEwOmc9W107aWYoZnx8ZSljPWQ/W2csaF06aDtyZXR1cm4gY30sc3BsaXRXaXRoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuc3BsaXQodGhpcyxiKX0sZ2V0VmVydGljZXM6ZnVuY3Rpb24oYSl7cmV0dXJuITA9PT1hP1t0aGlzLmNvbXBvbmVudHNbMF0sdGhpcy5jb21wb25lbnRzW3RoaXMuY29tcG9uZW50cy5sZW5ndGgtMV1dOiExPT09YT90aGlzLmNvbXBvbmVudHMuc2xpY2UoMSx0aGlzLmNvbXBvbmVudHMubGVuZ3RoLTEpOnRoaXMuY29tcG9uZW50cy5zbGljZSgpfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9IShiJiYhMT09PWIuZWRnZSkmJmImJmIuZGV0YWlscyxkLGU9e30sZj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7aWYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQpe2Zvcih2YXIgZz10aGlzLmdldFNvcnRlZFNlZ21lbnRzKCksCmg9YS54LGs9YS55LGwsbT0wLHA9Zy5sZW5ndGg7bTxwOysrbSlpZihsPWdbbV0sZD1PcGVuTGF5ZXJzLkdlb21ldHJ5LmRpc3RhbmNlVG9TZWdtZW50KGEsbCksZC5kaXN0YW5jZTxmKXtpZihmPWQuZGlzdGFuY2UsZT1kLDA9PT1mKWJyZWFrfWVsc2UgaWYobC54Mj5oJiYoaz5sLnkxJiZrPGwueTJ8fGs8bC55MSYmaz5sLnkyKSlicmVhaztlPWM/e2Rpc3RhbmNlOmUuZGlzdGFuY2UseDA6ZS54LHkwOmUueSx4MTpoLHkxOmt9OmUuZGlzdGFuY2V9ZWxzZSBpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKXt2YXIgZz10aGlzLmdldFNvcnRlZFNlZ21lbnRzKCksaD1hLmdldFNvcnRlZFNlZ21lbnRzKCksbixxLHI9aC5sZW5ndGgscz17cG9pbnQ6ITB9LG09MCxwPWcubGVuZ3RoO2E6Zm9yKDttPHA7KyttKXtrPWdbbV07bD1rLngxO3E9ay55MTtmb3IodmFyIHQ9MDt0PHI7Kyt0KWlmKGQ9aFt0XSxuPU9wZW5MYXllcnMuR2VvbWV0cnkuc2VnbWVudHNJbnRlcnNlY3QoaywKZCxzKSl7Zj0wO2U9e2Rpc3RhbmNlOjAseDA6bi54LHkwOm4ueSx4MTpuLngseTE6bi55fTticmVhayBhfWVsc2UgZD1PcGVuTGF5ZXJzLkdlb21ldHJ5LmRpc3RhbmNlVG9TZWdtZW50KHt4OmwseTpxfSxkKSxkLmRpc3RhbmNlPGYmJihmPWQuZGlzdGFuY2UsZT17ZGlzdGFuY2U6Zix4MDpsLHkwOnEseDE6ZC54LHkxOmQueX0pfWN8fChlPWUuZGlzdGFuY2UpOzAhPT1mJiZrJiYoZD1hLmRpc3RhbmNlVG8obmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoay54MixrLnkyKSxiKSxtPWM/ZC5kaXN0YW5jZTpkLG08ZiYmKGU9Yz97ZGlzdGFuY2U6Zix4MDpkLngxLHkwOmQueTEseDE6ZC54MCx5MTpkLnkwfTptKSl9ZWxzZSBlPWEuZGlzdGFuY2VUbyh0aGlzLGIpLGMmJihlPXtkaXN0YW5jZTplLmRpc3RhbmNlLHgwOmUueDEseTA6ZS55MSx4MTplLngwLHkxOmUueTB9KTtyZXR1cm4gZX0sc2ltcGxpZnk6ZnVuY3Rpb24oYSl7aWYodGhpcyYmbnVsbCE9PXRoaXMpe3ZhciBiPXRoaXMuZ2V0VmVydGljZXMoKTsKaWYoMz5iLmxlbmd0aClyZXR1cm4gdGhpczt2YXIgYz1mdW5jdGlvbihhLGIsZCxrKXtmb3IodmFyIGw9MCxtPTAscD1iLG47cDxkO3ArKyl7bj1hW2JdO3ZhciBxPWFbZF0scj1hW3BdLHI9TWF0aC5hYnMoMC41KihuLngqcS55K3EueCpyLnkrci54Km4ueS1xLngqbi55LXIueCpxLnktbi54KnIueSkpO249TWF0aC5zcXJ0KE1hdGgucG93KG4ueC1xLngsMikrTWF0aC5wb3cobi55LXEueSwyKSk7bj0yKihyL24pO24+bCYmKGw9bixtPXApfWw+ayYmbSE9YiYmKGUucHVzaChtKSxjKGEsYixtLGspLGMoYSxtLGQsaykpfSxkPWIubGVuZ3RoLTEsZT1bXTtlLnB1c2goMCk7Zm9yKGUucHVzaChkKTtiWzBdLmVxdWFscyhiW2RdKTspZC0tLGUucHVzaChkKTtjKGIsMCxkLGEpO2E9W107ZS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEtYn0pO2ZvcihkPTA7ZDxlLmxlbmd0aDtkKyspYS5wdXNoKGJbZVtkXV0pO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGEpfXJldHVybiB0aGlzfSwKQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyx7Y29tcG9uZW50VHlwZXM6WyJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Il0sYWRkQ29tcG9uZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9ITEsZD10aGlzLmNvbXBvbmVudHMucG9wKCk7bnVsbD09YiYmYS5lcXVhbHMoZCl8fChjPU9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkQ29tcG9uZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKSk7T3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLnByb3RvdHlwZS5hZGRDb21wb25lbnQuYXBwbHkodGhpcyxbdGhpcy5jb21wb25lbnRzWzBdXSk7cmV0dXJuIGN9LHJlbW92ZUNvbXBvbmVudDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNvbXBvbmVudHMmJjM8dGhpcy5jb21wb25lbnRzLmxlbmd0aDtiJiYodGhpcy5jb21wb25lbnRzLnBvcCgpLE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlQ29tcG9uZW50LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyksT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLnByb3RvdHlwZS5hZGRDb21wb25lbnQuYXBwbHkodGhpcyxbdGhpcy5jb21wb25lbnRzWzBdXSkpO3JldHVybiBifSxtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZC0xO2MrKyl0aGlzLmNvbXBvbmVudHNbY10ubW92ZShhLGIpfSxyb3RhdGU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkLTE7KytjKXRoaXMuY29tcG9uZW50c1tjXS5yb3RhdGUoYSxiKX0scmVzaXplOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MCxlPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7ZDxlLTE7KytkKXRoaXMuY29tcG9uZW50c1tkXS5yZXNpemUoYSxiLGMpO3JldHVybiB0aGlzfSx0cmFuc2Zvcm06ZnVuY3Rpb24oYSxiKXtpZihhJiZiKXtmb3IodmFyIGM9MCxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkLTE7YysrKXRoaXMuY29tcG9uZW50c1tjXS50cmFuc2Zvcm0oYSwKYik7dGhpcy5ib3VuZHM9bnVsbH1yZXR1cm4gdGhpc30sZ2V0Q2VudHJvaWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmNvbXBvbmVudHMpe3ZhciBhPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7aWYoMDxhJiYyPj1hKXJldHVybiB0aGlzLmNvbXBvbmVudHNbMF0uY2xvbmUoKTtpZigyPGEpe3ZhciBiPTAsYz0wLGQ9dGhpcy5jb21wb25lbnRzWzBdLngsZT10aGlzLmNvbXBvbmVudHNbMF0ueSxmPS0xKnRoaXMuZ2V0QXJlYSgpO2lmKDAhPWYpe2Zvcih2YXIgZz0wO2c8YS0xO2crKyl2YXIgaD10aGlzLmNvbXBvbmVudHNbZ10saz10aGlzLmNvbXBvbmVudHNbZysxXSxiPWIrKGgueCtrLngtMipkKSooKGgueC1kKSooay55LWUpLShrLngtZCkqKGgueS1lKSksYz1jKyhoLnkray55LTIqZSkqKChoLngtZCkqKGsueS1lKS0oay54LWQpKihoLnktZSkpO2I9ZCtiLyg2KmYpO2E9ZStjLyg2KmYpfWVsc2V7Zm9yKGc9MDtnPGEtMTtnKyspYis9dGhpcy5jb21wb25lbnRzW2ddLngsYys9dGhpcy5jb21wb25lbnRzW2ddLnk7CmIvPWEtMTthPWMvKGEtMSl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGIsYSl9cmV0dXJuIG51bGx9fSxnZXRBcmVhOmZ1bmN0aW9uKCl7dmFyIGE9MDtpZih0aGlzLmNvbXBvbmVudHMmJjI8dGhpcy5jb21wb25lbnRzLmxlbmd0aCl7Zm9yKHZhciBiPWE9MCxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjLTE7YisrKXZhciBkPXRoaXMuY29tcG9uZW50c1tiXSxlPXRoaXMuY29tcG9uZW50c1tiKzFdLGE9YSsoZC54K2UueCkqKGUueS1kLnkpO2E9LWEvMn1yZXR1cm4gYX0sZ2V0R2VvZGVzaWNBcmVhOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYSl7dmFyIGM9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2Iik7Yy5lcXVhbHMoYSl8fChiPXRoaXMuY2xvbmUoKS50cmFuc2Zvcm0oYSxjKSl9YT0wO2M9Yi5jb21wb25lbnRzJiZiLmNvbXBvbmVudHMubGVuZ3RoO2lmKDI8Yyl7Zm9yKHZhciBkLGUsZj0wO2Y8Yy0xO2YrKylkPWIuY29tcG9uZW50c1tmXSwKZT1iLmNvbXBvbmVudHNbZisxXSxhKz1PcGVuTGF5ZXJzLlV0aWwucmFkKGUueC1kLngpKigyK01hdGguc2luKE9wZW5MYXllcnMuVXRpbC5yYWQoZC55KSkrTWF0aC5zaW4oT3BlbkxheWVycy5VdGlsLnJhZChlLnkpKSk7YT00MDY4MDYzMTU5MDc2OSphLzJ9cmV0dXJuIGF9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5OdW1iZXIubGltaXRTaWdEaWdzLGM9YihhLngsMTQpO2E9YihhLnksMTQpO2Zvcih2YXIgZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoLTEsZSxmLGcsaCxrLGw9MCxtPTA7bTxkOysrbSlpZihlPXRoaXMuY29tcG9uZW50c1ttXSxnPWIoZS54LDE0KSxlPWIoZS55LDE0KSxmPXRoaXMuY29tcG9uZW50c1ttKzFdLGg9YihmLngsMTQpLGY9YihmLnksMTQpLGU9PWYpe2lmKGE9PWUmJihnPD1oJiZjPj1nJiZjPD1ofHxnPj1oJiZjPD1nJiZjPj1oKSl7bD0tMTticmVha319ZWxzZXtrPWIoKGEtZikqKChoLWcpLyhmLWUpKStoLDE0KTtpZihrPT0KYyYmKGU8ZiYmYT49ZSYmYTw9Znx8ZT5mJiZhPD1lJiZhPj1mKSl7bD0tMTticmVha31rPD1jfHxnIT1oJiYoazxNYXRoLm1pbihnLGgpfHxrPk1hdGgubWF4KGcsaCkpfHwoZTxmJiZhPj1lJiZhPGZ8fGU+ZiYmYTxlJiZhPj1mKSYmKytsfXJldHVybi0xPT1sPzE6ISEobCYxKX0saW50ZXJzZWN0czpmdW5jdGlvbihhKXt2YXIgYj0hMTtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWEuQ0xBU1NfTkFNRSliPXRoaXMuY29udGFpbnNQb2ludChhKTtlbHNlIGlmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciPT1hLkNMQVNTX05BTUUpYj1hLmludGVyc2VjdHModGhpcyk7ZWxzZSBpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIj09YS5DTEFTU19OQU1FKWI9T3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nLnByb3RvdHlwZS5pbnRlcnNlY3RzLmFwcGx5KHRoaXMsW2FdKTtlbHNlIGZvcih2YXIgYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPApkJiYhKGI9YS5jb21wb25lbnRzW2NdLmludGVyc2VjdHModGhpcykpOysrYyk7cmV0dXJuIGJ9LGdldFZlcnRpY2VzOmZ1bmN0aW9uKGEpe3JldHVybiEwPT09YT9bXTp0aGlzLmNvbXBvbmVudHMuc2xpY2UoMCx0aGlzLmNvbXBvbmVudHMubGVuZ3RoLTEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcifSk7T3BlbkxheWVycy5VdGlsPU9wZW5MYXllcnMuVXRpbHx8e307Ck9wZW5MYXllcnMuVXRpbC52ZW5kb3JQcmVmaXg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiBhP2EucmVwbGFjZSgvKFtBLVpdKS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KS5yZXBsYWNlKC9ebXMtLywiLW1zLSIpOm51bGx9ZnVuY3Rpb24gYihhLGIpe2lmKHZvaWQgMD09PWdbYl0pe3ZhciBjLGU9MCxmPWQubGVuZ3RoLG49InVuZGVmaW5lZCIhPT10eXBlb2YgYS5jc3NUZXh0O2ZvcihnW2JdPW51bGw7ZTxmO2UrKylpZigoYz1kW2VdKT8obnx8KGM9Yy50b0xvd2VyQ2FzZSgpKSxjPWMrYi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStiLnNsaWNlKDEpKTpjPWIsdm9pZCAwIT09YVtjXSl7Z1tiXT1jO2JyZWFrfX1yZXR1cm4gZ1tiXX1mdW5jdGlvbiBjKGEpe3JldHVybiBiKGUsYSl9dmFyIGQ9WyIiLCJPIiwibXMiLCJNb3oiLCJXZWJraXQiXSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLGY9e30sZz17fTtyZXR1cm57Y3NzOmZ1bmN0aW9uKGIpe2lmKHZvaWQgMD09PQpmW2JdKXt2YXIgZD1iLnJlcGxhY2UoLygtW1xzXFNdKS9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpfSksZD1jKGQpO2ZbYl09YShkKX1yZXR1cm4gZltiXX0sanM6YixzdHlsZTpjLGNzc0NhY2hlOmYsanNDYWNoZTpnfX0oKTtPcGVuTGF5ZXJzLkFuaW1hdGlvbj1mdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwudmVuZG9yUHJlZml4LmpzKGEsInJlcXVlc3RBbmltYXRpb25GcmFtZSIpLGM9ISFiLGQ9ZnVuY3Rpb24oKXt2YXIgYz1hW2JdfHxmdW5jdGlvbihiLGMpe2Euc2V0VGltZW91dChiLDE2KX07cmV0dXJuIGZ1bmN0aW9uKGIsZCl7Yy5hcHBseShhLFtiLGRdKX19KCksZT0wLGY9e307cmV0dXJue2lzTmF0aXZlOmMscmVxdWVzdEZyYW1lOmQsc3RhcnQ6ZnVuY3Rpb24oYSxiLGMpe2I9MDxiP2I6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO3ZhciBsPSsrZSxtPStuZXcgRGF0ZTtmW2xdPWZ1bmN0aW9uKCl7ZltsXSYmK25ldyBEYXRlLW08PWI/KGEoKSxmW2xdJiZkKGZbbF0sYykpOmRlbGV0ZSBmW2xdfTtkKGZbbF0sYyk7cmV0dXJuIGx9LHN0b3A6ZnVuY3Rpb24oYSl7ZGVsZXRlIGZbYV19fX0od2luZG93KTtPcGVuTGF5ZXJzLlR3ZWVuPU9wZW5MYXllcnMuQ2xhc3Moe2Vhc2luZzpudWxsLGJlZ2luOm51bGwsZmluaXNoOm51bGwsZHVyYXRpb246bnVsbCxjYWxsYmFja3M6bnVsbCx0aW1lOm51bGwsbWluRnJhbWVSYXRlOm51bGwsc3RhcnRUaW1lOm51bGwsYW5pbWF0aW9uSWQ6bnVsbCxwbGF5aW5nOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5lYXNpbmc9YT9hOk9wZW5MYXllcnMuRWFzaW5nLkV4cG8uZWFzZU91dH0sc3RhcnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5wbGF5aW5nPSEwO3RoaXMuYmVnaW49YTt0aGlzLmZpbmlzaD1iO3RoaXMuZHVyYXRpb249Yzt0aGlzLmNhbGxiYWNrcz1kLmNhbGxiYWNrczt0aGlzLm1pbkZyYW1lUmF0ZT1kLm1pbkZyYW1lUmF0ZXx8MzA7dGhpcy50aW1lPTA7dGhpcy5zdGFydFRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCk7T3BlbkxheWVycy5BbmltYXRpb24uc3RvcCh0aGlzLmFuaW1hdGlvbklkKTt0aGlzLmFuaW1hdGlvbklkPW51bGw7CnRoaXMuY2FsbGJhY2tzJiZ0aGlzLmNhbGxiYWNrcy5zdGFydCYmdGhpcy5jYWxsYmFja3Muc3RhcnQuY2FsbCh0aGlzLHRoaXMuYmVnaW4pO3RoaXMuYW5pbWF0aW9uSWQ9T3BlbkxheWVycy5BbmltYXRpb24uc3RhcnQoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucGxheSx0aGlzKSl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLnBsYXlpbmcmJih0aGlzLmNhbGxiYWNrcyYmdGhpcy5jYWxsYmFja3MuZG9uZSYmdGhpcy5jYWxsYmFja3MuZG9uZS5jYWxsKHRoaXMsdGhpcy5maW5pc2gpLE9wZW5MYXllcnMuQW5pbWF0aW9uLnN0b3AodGhpcy5hbmltYXRpb25JZCksdGhpcy5hbmltYXRpb25JZD1udWxsLHRoaXMucGxheWluZz0hMSl9LHBsYXk6ZnVuY3Rpb24oKXt2YXIgYT17fSxiO2ZvcihiIGluIHRoaXMuYmVnaW4pe3ZhciBjPXRoaXMuYmVnaW5bYl0sZD10aGlzLmZpbmlzaFtiXTtpZihudWxsPT1jfHxudWxsPT1kfHxpc05hTihjKXx8aXNOYU4oZCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiaW52YWxpZCB2YWx1ZSBmb3IgVHdlZW4iKTsKYVtiXT10aGlzLmVhc2luZy5hcHBseSh0aGlzLFt0aGlzLnRpbWUsYyxkLWMsdGhpcy5kdXJhdGlvbl0pfXRoaXMudGltZSsrO3RoaXMuY2FsbGJhY2tzJiZ0aGlzLmNhbGxiYWNrcy5lYWNoU3RlcCYmKChuZXcgRGF0ZSkuZ2V0VGltZSgpLXRoaXMuc3RhcnRUaW1lKS90aGlzLnRpbWU8PTFFMy90aGlzLm1pbkZyYW1lUmF0ZSYmdGhpcy5jYWxsYmFja3MuZWFjaFN0ZXAuY2FsbCh0aGlzLGEpO3RoaXMudGltZT50aGlzLmR1cmF0aW9uJiZ0aGlzLnN0b3AoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Ud2VlbiJ9KTtPcGVuTGF5ZXJzLkVhc2luZz17Q0xBU1NfTkFNRToiT3BlbkxheWVycy5FYXNpbmcifTtPcGVuTGF5ZXJzLkVhc2luZy5MaW5lYXI9e2Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyphL2QrYn0sZWFzZU91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyphL2QrYn0sZWFzZUluT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBjKmEvZCtifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVhc2luZy5MaW5lYXIifTsKT3BlbkxheWVycy5FYXNpbmcuRXhwbz17ZWFzZUluOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiAwPT1hP2I6YypNYXRoLnBvdygyLDEwKihhL2QtMSkpK2J9LGVhc2VPdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGE9PWQ/YitjOmMqKC1NYXRoLnBvdygyLC0xMCphL2QpKzEpK2J9LGVhc2VJbk91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gMD09YT9iOmE9PWQ/YitjOjE+KGEvPWQvMik/Yy8yKk1hdGgucG93KDIsMTAqKGEtMSkpK2I6Yy8yKigtTWF0aC5wb3coMiwtMTAqLS1hKSsyKStifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVhc2luZy5FeHBvIn07Ck9wZW5MYXllcnMuRWFzaW5nLlF1YWQ9e2Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyooYS89ZCkqYStifSxlYXNlT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybi1jKihhLz1kKSooYS0yKStifSxlYXNlSW5PdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIDE+KGEvPWQvMik/Yy8yKmEqYStiOi1jLzIqKC0tYSooYS0yKS0xKStifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVhc2luZy5RdWFkIn07T3BlbkxheWVycy5Qcm9qZWN0aW9uPU9wZW5MYXllcnMuQ2xhc3Moe3Byb2o6bnVsbCxwcm9qQ29kZTpudWxsLHRpdGxlUmVnRXg6L1wrdGl0bGU9W15cK10qLyxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGIpO3RoaXMucHJvakNvZGU9YTsib2JqZWN0Ij09dHlwZW9mIFByb2o0anMmJih0aGlzLnByb2o9bmV3IFByb2o0anMuUHJvaihhKSl9LGdldENvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9qP3RoaXMucHJvai5zcnNDb2RlOnRoaXMucHJvakNvZGV9LGdldFVuaXRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvaj90aGlzLnByb2oudW5pdHM6bnVsbH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRDb2RlKCl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTthJiYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuUHJvamVjdGlvbnx8KGE9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbihhKSksIm9iamVjdCI9PQp0eXBlb2YgUHJvajRqcyYmdGhpcy5wcm9qLmRlZkRhdGEmJmEucHJvai5kZWZEYXRhP2I9dGhpcy5wcm9qLmRlZkRhdGEucmVwbGFjZSh0aGlzLnRpdGxlUmVnRXgsIiIpPT1hLnByb2ouZGVmRGF0YS5yZXBsYWNlKHRoaXMudGl0bGVSZWdFeCwiIik6YS5nZXRDb2RlJiYoYj10aGlzLmdldENvZGUoKSxhPWEuZ2V0Q29kZSgpLGI9Yj09YXx8ISFPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3Jtc1tiXSYmT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybXNbYl1bYV09PT1PcGVuTGF5ZXJzLlByb2plY3Rpb24ubnVsbFRyYW5zZm9ybSkpO3JldHVybiBifSxkZXN0cm95OmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMucHJvajtkZWxldGUgdGhpcy5wcm9qQ29kZX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qcm9qZWN0aW9uIn0pO09wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zPXt9OwpPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHM9eyJFUFNHOjQzMjYiOnt1bml0czoiZGVncmVlcyIsbWF4RXh0ZW50OlstMTgwLC05MCwxODAsOTBdLHl4OiEwfSwiQ1JTOjg0Ijp7dW5pdHM6ImRlZ3JlZXMiLG1heEV4dGVudDpbLTE4MCwtOTAsMTgwLDkwXX0sIkVQU0c6OTAwOTEzIjp7dW5pdHM6Im0iLG1heEV4dGVudDpbLTIuMDAzNzUwODM0RTcsLTIuMDAzNzUwODM0RTcsMi4wMDM3NTA4MzRFNywyLjAwMzc1MDgzNEU3XX19OwpPcGVuTGF5ZXJzLlByb2plY3Rpb24uYWRkVHJhbnNmb3JtPWZ1bmN0aW9uKGEsYixjKXtpZihjPT09T3BlbkxheWVycy5Qcm9qZWN0aW9uLm51bGxUcmFuc2Zvcm0pe3ZhciBkPU9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1thXTtkJiYhT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2JdJiYoT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2JdPWQpfU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zW2FdfHwoT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybXNbYV09e30pO09wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zW2FdW2JdPWN9OwpPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtPWZ1bmN0aW9uKGEsYixjKXtpZihiJiZjKWlmKGIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb258fChiPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oYikpLGMgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb258fChjPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oYykpLGIucHJvaiYmYy5wcm9qKWE9UHJvajRqcy50cmFuc2Zvcm0oYi5wcm9qLGMucHJvaixhKTtlbHNle2I9Yi5nZXRDb2RlKCk7Yz1jLmdldENvZGUoKTt2YXIgZD1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtcztpZihkW2JdJiZkW2JdW2NdKWRbYl1bY10oYSl9cmV0dXJuIGF9O09wZW5MYXllcnMuUHJvamVjdGlvbi5udWxsVHJhbnNmb3JtPWZ1bmN0aW9uKGEpe3JldHVybiBhfTsKKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXthLng9MTgwKmEueC9kO2EueT0xODAvTWF0aC5QSSooMipNYXRoLmF0YW4oTWF0aC5leHAoYS55L2QqTWF0aC5QSSkpLU1hdGguUEkvMik7cmV0dXJuIGF9ZnVuY3Rpb24gYihhKXthLng9YS54KmQvMTgwO3ZhciBiPU1hdGgubG9nKE1hdGgudGFuKCg5MCthLnkpKk1hdGguUEkvMzYwKSkvTWF0aC5QSSpkO2EueT1NYXRoLm1heCgtMi4wMDM3NTA4MzRFNyxNYXRoLm1pbihiLDIuMDAzNzUwODM0RTcpKTtyZXR1cm4gYX1mdW5jdGlvbiBjKGMsZCl7dmFyIGU9T3BlbkxheWVycy5Qcm9qZWN0aW9uLmFkZFRyYW5zZm9ybSxmPU9wZW5MYXllcnMuUHJvamVjdGlvbi5udWxsVHJhbnNmb3JtLGcsbixxLHIscztnPTA7Zm9yKG49ZC5sZW5ndGg7ZzxuOysrZylmb3IocT1kW2ddLGUoYyxxLGIpLGUocSxjLGEpLHM9ZysxO3M8bjsrK3Mpcj1kW3NdLGUocSxyLGYpLGUocixxLGYpfXZhciBkPTIuMDAzNzUwODM0RTcsZT1bIkVQU0c6OTAwOTEzIiwiRVBTRzozODU3IiwKIkVQU0c6MTAyMTEzIiwiRVBTRzoxMDIxMDAiXSxmPVsiQ1JTOjg0IiwidXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni42OjQzMjYiLCJFUFNHOjQzMjYiXSxnO2ZvcihnPWUubGVuZ3RoLTE7MDw9ZzstLWcpYyhlW2ddLGYpO2ZvcihnPWYubGVuZ3RoLTE7MDw9ZzstLWcpYyhmW2ddLGUpfSkoKTtPcGVuTGF5ZXJzLk1hcD1PcGVuTGF5ZXJzLkNsYXNzKHtaX0lOREVYX0JBU0U6e0Jhc2VMYXllcjoxMDAsT3ZlcmxheTozMjUsRmVhdHVyZTo3MjUsUG9wdXA6NzUwLENvbnRyb2w6MUUzfSxpZDpudWxsLGZyYWN0aW9uYWxab29tOiExLGV2ZW50czpudWxsLGFsbE92ZXJsYXlzOiExLGRpdjpudWxsLGRyYWdnaW5nOiExLHNpemU6bnVsbCx2aWV3UG9ydERpdjpudWxsLGxheWVyQ29udGFpbmVyT3JpZ2luOm51bGwsbGF5ZXJDb250YWluZXJEaXY6bnVsbCxsYXllcnM6bnVsbCxjb250cm9sczpudWxsLHBvcHVwczpudWxsLGJhc2VMYXllcjpudWxsLGNlbnRlcjpudWxsLHJlc29sdXRpb246bnVsbCx6b29tOjAscGFuUmF0aW86MS41LG9wdGlvbnM6bnVsbCx0aWxlU2l6ZTpudWxsLHByb2plY3Rpb246IkVQU0c6NDMyNiIsdW5pdHM6bnVsbCxyZXNvbHV0aW9uczpudWxsLG1heFJlc29sdXRpb246bnVsbCxtaW5SZXNvbHV0aW9uOm51bGwsbWF4U2NhbGU6bnVsbCxtaW5TY2FsZTpudWxsLAptYXhFeHRlbnQ6bnVsbCxtaW5FeHRlbnQ6bnVsbCxyZXN0cmljdGVkRXh0ZW50Om51bGwsbnVtWm9vbUxldmVsczoxNix0aGVtZTpudWxsLGRpc3BsYXlQcm9qZWN0aW9uOm51bGwsZmFsbFRocm91Z2g6ITEsYXV0b1VwZGF0ZVNpemU6ITAsZXZlbnRMaXN0ZW5lcnM6bnVsbCxwYW5Ud2VlbjpudWxsLHBhbk1ldGhvZDpPcGVuTGF5ZXJzLkVhc2luZy5FeHBvLmVhc2VPdXQscGFuRHVyYXRpb246NTAsem9vbVR3ZWVuOm51bGwsem9vbU1ldGhvZDpPcGVuTGF5ZXJzLkVhc2luZy5RdWFkLmVhc2VPdXQsem9vbUR1cmF0aW9uOjIwLHBhZGRpbmdGb3JQb3B1cHM6bnVsbCxsYXllckNvbnRhaW5lck9yaWdpblB4Om51bGwsbWluUHg6bnVsbCxtYXhQeDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXsxPT09YXJndW1lbnRzLmxlbmd0aCYmIm9iamVjdCI9PT10eXBlb2YgYSYmKGE9KGI9YSkmJmIuZGl2KTt0aGlzLnRpbGVTaXplPW5ldyBPcGVuTGF5ZXJzLlNpemUoT3BlbkxheWVycy5NYXAuVElMRV9XSURUSCwKT3BlbkxheWVycy5NYXAuVElMRV9IRUlHSFQpO3RoaXMucGFkZGluZ0ZvclBvcHVwcz1uZXcgT3BlbkxheWVycy5Cb3VuZHMoMTUsMTUsMTUsMTUpO3RoaXMudGhlbWU9T3BlbkxheWVycy5fZ2V0U2NyaXB0TG9jYXRpb24oKSsidGhlbWUvZGVmYXVsdC9zdHlsZS5jc3MiO3RoaXMub3B0aW9ucz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxiKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLE9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1t0aGlzLnByb2plY3Rpb24gaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb24/dGhpcy5wcm9qZWN0aW9uLnByb2pDb2RlOnRoaXMucHJvamVjdGlvbl0pOyF0aGlzLm1heEV4dGVudHx8dGhpcy5tYXhFeHRlbnQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kc3x8KHRoaXMubWF4RXh0ZW50PW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLm1heEV4dGVudCkpOwohdGhpcy5taW5FeHRlbnR8fHRoaXMubWluRXh0ZW50IGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHN8fCh0aGlzLm1pbkV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5taW5FeHRlbnQpKTshdGhpcy5yZXN0cmljdGVkRXh0ZW50fHx0aGlzLnJlc3RyaWN0ZWRFeHRlbnQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kc3x8KHRoaXMucmVzdHJpY3RlZEV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5yZXN0cmljdGVkRXh0ZW50KSk7IXRoaXMuY2VudGVyfHx0aGlzLmNlbnRlciBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTG9uTGF0fHwodGhpcy5jZW50ZXI9bmV3IE9wZW5MYXllcnMuTG9uTGF0KHRoaXMuY2VudGVyKSk7dGhpcy5sYXllcnM9W107dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQoIk9wZW5MYXllcnMuTWFwXyIpO3RoaXMuZGl2PU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3RoaXMuZGl2fHwodGhpcy5kaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksCnRoaXMuZGl2LnN0eWxlLmhlaWdodD0iMXB4Iix0aGlzLmRpdi5zdHlsZS53aWR0aD0iMXB4Iik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGl2LCJvbE1hcCIpO3ZhciBjPXRoaXMuaWQrIl9PcGVuTGF5ZXJzX1ZpZXdQb3J0Ijt0aGlzLnZpZXdQb3J0RGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYoYyxudWxsLG51bGwsbnVsbCwicmVsYXRpdmUiLG51bGwsImhpZGRlbiIpO3RoaXMudmlld1BvcnREaXYuc3R5bGUud2lkdGg9IjEwMCUiO3RoaXMudmlld1BvcnREaXYuc3R5bGUuaGVpZ2h0PSIxMDAlIjt0aGlzLnZpZXdQb3J0RGl2LmNsYXNzTmFtZT0ib2xNYXBWaWV3cG9ydCI7dGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy52aWV3UG9ydERpdik7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMsdGhpcy52aWV3UG9ydERpdixudWxsLHRoaXMuZmFsbFRocm91Z2gse2luY2x1ZGVYWTohMH0pO09wZW5MYXllcnMuVGlsZU1hbmFnZXImJm51bGwhPT0KdGhpcy50aWxlTWFuYWdlciYmKHRoaXMudGlsZU1hbmFnZXIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlRpbGVNYW5hZ2VyfHwodGhpcy50aWxlTWFuYWdlcj1uZXcgT3BlbkxheWVycy5UaWxlTWFuYWdlcih0aGlzLnRpbGVNYW5hZ2VyKSksdGhpcy50aWxlTWFuYWdlci5hZGRNYXAodGhpcykpO2M9dGhpcy5pZCsiX09wZW5MYXllcnNfQ29udGFpbmVyIjt0aGlzLmxheWVyQ29udGFpbmVyRGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYoYyk7dGhpcy5sYXllckNvbnRhaW5lckRpdi5zdHlsZS56SW5kZXg9dGhpcy5aX0lOREVYX0JBU0UuUG9wdXAtMTt0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHg9e3g6MCx5OjB9O3RoaXMuYXBwbHlUcmFuc2Zvcm0oKTt0aGlzLnZpZXdQb3J0RGl2LmFwcGVuZENoaWxkKHRoaXMubGF5ZXJDb250YWluZXJEaXYpO3RoaXMudXBkYXRlU2l6ZSgpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpdGhpcy5ldmVudHMub24odGhpcy5ldmVudExpc3RlbmVycyk7CiEwPT09dGhpcy5hdXRvVXBkYXRlU2l6ZSYmKHRoaXMudXBkYXRlU2l6ZURlc3Ryb3k9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMudXBkYXRlU2l6ZSx0aGlzKSxPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUod2luZG93LCJyZXNpemUiLHRoaXMudXBkYXRlU2l6ZURlc3Ryb3kpKTtpZih0aGlzLnRoZW1lKXtmb3IodmFyIGM9ITAsZD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLGU9MCxmPWQubGVuZ3RoO2U8ZjsrK2UpaWYoT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybChkLml0ZW0oZSkuaHJlZix0aGlzLnRoZW1lKSl7Yz0hMTticmVha31jJiYoYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksYy5zZXRBdHRyaWJ1dGUoInJlbCIsInN0eWxlc2hlZXQiKSxjLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvY3NzIiksYy5zZXRBdHRyaWJ1dGUoImhyZWYiLHRoaXMudGhlbWUpLGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoYykpfW51bGw9PQp0aGlzLmNvbnRyb2xzJiYodGhpcy5jb250cm9scz1bXSxudWxsIT1PcGVuTGF5ZXJzLkNvbnRyb2wmJihPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2aWdhdGlvbj90aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5OYXZpZ2F0aW9uKTpPcGVuTGF5ZXJzLkNvbnRyb2wuVG91Y2hOYXZpZ2F0aW9uJiZ0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5Ub3VjaE5hdmlnYXRpb24pLE9wZW5MYXllcnMuQ29udHJvbC5ab29tP3RoaXMuY29udHJvbHMucHVzaChuZXcgT3BlbkxheWVycy5Db250cm9sLlpvb20pOk9wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tJiZ0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tKSxPcGVuTGF5ZXJzLkNvbnRyb2wuQXJnUGFyc2VyJiZ0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5BcmdQYXJzZXIpLE9wZW5MYXllcnMuQ29udHJvbC5BdHRyaWJ1dGlvbiYmCnRoaXMuY29udHJvbHMucHVzaChuZXcgT3BlbkxheWVycy5Db250cm9sLkF0dHJpYnV0aW9uKSkpO2U9MDtmb3IoZj10aGlzLmNvbnRyb2xzLmxlbmd0aDtlPGY7ZSsrKXRoaXMuYWRkQ29udHJvbFRvTWFwKHRoaXMuY29udHJvbHNbZV0pO3RoaXMucG9wdXBzPVtdO3RoaXMudW5sb2FkRGVzdHJveT1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5kZXN0cm95LHRoaXMpO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh3aW5kb3csInVubG9hZCIsdGhpcy51bmxvYWREZXN0cm95KTtiJiZiLmxheWVycyYmKGRlbGV0ZSB0aGlzLmNlbnRlcixkZWxldGUgdGhpcy56b29tLHRoaXMuYWRkTGF5ZXJzKGIubGF5ZXJzKSxiLmNlbnRlciYmIXRoaXMuZ2V0Q2VudGVyKCkmJnRoaXMuc2V0Q2VudGVyKGIuY2VudGVyLGIuem9vbSkpO3RoaXMucGFuTWV0aG9kJiYodGhpcy5wYW5Ud2Vlbj1uZXcgT3BlbkxheWVycy5Ud2Vlbih0aGlzLnBhbk1ldGhvZCkpO3RoaXMuem9vbU1ldGhvZCYmdGhpcy5hcHBseVRyYW5zZm9ybS50cmFuc2Zvcm0mJgoodGhpcy56b29tVHdlZW49bmV3IE9wZW5MYXllcnMuVHdlZW4odGhpcy56b29tTWV0aG9kKSl9LGdldFZpZXdwb3J0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlld1BvcnREaXZ9LHJlbmRlcjpmdW5jdGlvbihhKXt0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5kaXYsIm9sTWFwIik7dGhpcy52aWV3UG9ydERpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMudmlld1BvcnREaXYpO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMudmlld1BvcnREaXYpO3RoaXMudXBkYXRlU2l6ZSgpfSx1bmxvYWREZXN0cm95Om51bGwsdXBkYXRlU2l6ZURlc3Ryb3k6bnVsbCxkZXN0cm95OmZ1bmN0aW9uKCl7aWYoIXRoaXMudW5sb2FkRGVzdHJveSlyZXR1cm4hMTt0aGlzLnBhblR3ZWVuJiYodGhpcy5wYW5Ud2Vlbi5zdG9wKCksdGhpcy5wYW5Ud2Vlbj1udWxsKTt0aGlzLnpvb21Ud2VlbiYmKHRoaXMuem9vbVR3ZWVuLnN0b3AoKSwKdGhpcy56b29tVHdlZW49bnVsbCk7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKHdpbmRvdywidW5sb2FkIix0aGlzLnVubG9hZERlc3Ryb3kpO3RoaXMudW5sb2FkRGVzdHJveT1udWxsO3RoaXMudXBkYXRlU2l6ZURlc3Ryb3kmJk9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh3aW5kb3csInJlc2l6ZSIsdGhpcy51cGRhdGVTaXplRGVzdHJveSk7dGhpcy5wYWRkaW5nRm9yUG9wdXBzPW51bGw7aWYobnVsbCE9dGhpcy5jb250cm9scyl7Zm9yKHZhciBhPXRoaXMuY29udHJvbHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy5jb250cm9sc1thXS5kZXN0cm95KCk7dGhpcy5jb250cm9scz1udWxsfWlmKG51bGwhPXRoaXMubGF5ZXJzKXtmb3IoYT10aGlzLmxheWVycy5sZW5ndGgtMTswPD1hOy0tYSl0aGlzLmxheWVyc1thXS5kZXN0cm95KCExKTt0aGlzLmxheWVycz1udWxsfXRoaXMudmlld1BvcnREaXYmJnRoaXMudmlld1BvcnREaXYucGFyZW50Tm9kZSYmdGhpcy52aWV3UG9ydERpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMudmlld1BvcnREaXYpOwp0aGlzLnZpZXdQb3J0RGl2PW51bGw7dGhpcy50aWxlTWFuYWdlciYmKHRoaXMudGlsZU1hbmFnZXIucmVtb3ZlTWFwKHRoaXMpLHRoaXMudGlsZU1hbmFnZXI9bnVsbCk7dGhpcy5ldmVudExpc3RlbmVycyYmKHRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpLHRoaXMuZXZlbnRMaXN0ZW5lcnM9bnVsbCk7dGhpcy5ldmVudHMuZGVzdHJveSgpO3RoaXMub3B0aW9ucz10aGlzLmV2ZW50cz1udWxsfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubWluUHgmJmEucmVzdHJpY3RlZEV4dGVudCE9dGhpcy5yZXN0cmljdGVkRXh0ZW50O09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTtiJiZ0aGlzLm1vdmVUbyh0aGlzLmdldENhY2hlZENlbnRlcigpLHRoaXMuem9vbSx7Zm9yY2Vab29tQ2hhbmdlOiEwfSl9LGdldFRpbGVTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGlsZVNpemV9LGdldEJ5OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iZnVuY3Rpb24iPT0KdHlwZW9mIGMudGVzdDtyZXR1cm4gT3BlbkxheWVycy5BcnJheS5maWx0ZXIodGhpc1thXSxmdW5jdGlvbihhKXtyZXR1cm4gYVtiXT09Y3x8ZCYmYy50ZXN0KGFbYl0pfSl9LGdldExheWVyc0J5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0QnkoImxheWVycyIsYSxiKX0sZ2V0TGF5ZXJzQnlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldExheWVyc0J5KCJuYW1lIixhKX0sZ2V0TGF5ZXJzQnlDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRMYXllcnNCeSgiQ0xBU1NfTkFNRSIsYSl9LGdldENvbnRyb2xzQnk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nZXRCeSgiY29udHJvbHMiLGEsYil9LGdldENvbnRyb2xzQnlDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRDb250cm9sc0J5KCJDTEFTU19OQU1FIixhKX0sZ2V0TGF5ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW51bGwsYz0wLGQ9dGhpcy5sYXllcnMubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPQp0aGlzLmxheWVyc1tjXTtpZihlLmlkPT1hKXtiPWU7YnJlYWt9fXJldHVybiBifSxzZXRMYXllclpJbmRleDpmdW5jdGlvbihhLGIpe2Euc2V0WkluZGV4KHRoaXMuWl9JTkRFWF9CQVNFW2EuaXNCYXNlTGF5ZXI/IkJhc2VMYXllciI6Ik92ZXJsYXkiXSs1KmIpfSxyZXNldExheWVyc1pJbmRleDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5sYXllcnMubGVuZ3RoO2E8YjthKyspdGhpcy5zZXRMYXllclpJbmRleCh0aGlzLmxheWVyc1thXSxhKX0sYWRkTGF5ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmxheWVycy5sZW5ndGg7YjxjO2IrKylpZih0aGlzLmxheWVyc1tiXT09YSlyZXR1cm4hMTtpZighMT09PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicHJlYWRkbGF5ZXIiLHtsYXllcjphfSkpcmV0dXJuITE7dGhpcy5hbGxPdmVybGF5cyYmKGEuaXNCYXNlTGF5ZXI9ITEpO2EuZGl2LmNsYXNzTmFtZT0ib2xMYXllckRpdiI7YS5kaXYuc3R5bGUub3ZlcmZsb3c9CiIiO3RoaXMuc2V0TGF5ZXJaSW5kZXgoYSx0aGlzLmxheWVycy5sZW5ndGgpO2EuaXNGaXhlZD90aGlzLnZpZXdQb3J0RGl2LmFwcGVuZENoaWxkKGEuZGl2KTp0aGlzLmxheWVyQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKGEuZGl2KTt0aGlzLmxheWVycy5wdXNoKGEpO2Euc2V0TWFwKHRoaXMpO2EuaXNCYXNlTGF5ZXJ8fHRoaXMuYWxsT3ZlcmxheXMmJiF0aGlzLmJhc2VMYXllcj9udWxsPT10aGlzLmJhc2VMYXllcj90aGlzLnNldEJhc2VMYXllcihhKTphLnNldFZpc2liaWxpdHkoITEpOmEucmVkcmF3KCk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJhZGRsYXllciIse2xheWVyOmF9KTthLmV2ZW50cy50cmlnZ2VyRXZlbnQoImFkZGVkIix7bWFwOnRoaXMsbGF5ZXI6YX0pO2EuYWZ0ZXJBZGQoKTtyZXR1cm4hMH0sYWRkTGF5ZXJzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmFkZExheWVyKGFbYl0pfSxyZW1vdmVMYXllcjpmdW5jdGlvbihhLApiKXtpZighMSE9PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicHJlcmVtb3ZlbGF5ZXIiLHtsYXllcjphfSkpe251bGw9PWImJihiPSEwKTthLmlzRml4ZWQ/dGhpcy52aWV3UG9ydERpdi5yZW1vdmVDaGlsZChhLmRpdik6dGhpcy5sYXllckNvbnRhaW5lckRpdi5yZW1vdmVDaGlsZChhLmRpdik7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5sYXllcnMsYSk7YS5yZW1vdmVNYXAodGhpcyk7YS5tYXA9bnVsbDtpZih0aGlzLmJhc2VMYXllcj09YSYmKHRoaXMuYmFzZUxheWVyPW51bGwsYikpZm9yKHZhciBjPTAsZD10aGlzLmxheWVycy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5sYXllcnNbY107aWYoZS5pc0Jhc2VMYXllcnx8dGhpcy5hbGxPdmVybGF5cyl7dGhpcy5zZXRCYXNlTGF5ZXIoZSk7YnJlYWt9fXRoaXMucmVzZXRMYXllcnNaSW5kZXgoKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInJlbW92ZWxheWVyIix7bGF5ZXI6YX0pO2EuZXZlbnRzLnRyaWdnZXJFdmVudCgicmVtb3ZlZCIsCnttYXA6dGhpcyxsYXllcjphfSl9fSxnZXROdW1MYXllcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXllcnMubGVuZ3RofSxnZXRMYXllckluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBPcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmxheWVycyxhKX0sc2V0TGF5ZXJJbmRleDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGF5ZXJJbmRleChhKTswPmI/Yj0wOmI+dGhpcy5sYXllcnMubGVuZ3RoJiYoYj10aGlzLmxheWVycy5sZW5ndGgpO2lmKGMhPWIpe3RoaXMubGF5ZXJzLnNwbGljZShjLDEpO3RoaXMubGF5ZXJzLnNwbGljZShiLDAsYSk7Zm9yKHZhciBjPTAsZD10aGlzLmxheWVycy5sZW5ndGg7YzxkO2MrKyl0aGlzLnNldExheWVyWkluZGV4KHRoaXMubGF5ZXJzW2NdLGMpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjphLHByb3BlcnR5OiJvcmRlciJ9KTt0aGlzLmFsbE92ZXJsYXlzJiYoMD09PWI/dGhpcy5zZXRCYXNlTGF5ZXIoYSk6CnRoaXMuYmFzZUxheWVyIT09dGhpcy5sYXllcnNbMF0mJnRoaXMuc2V0QmFzZUxheWVyKHRoaXMubGF5ZXJzWzBdKSl9fSxyYWlzZUxheWVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMYXllckluZGV4KGEpK2I7dGhpcy5zZXRMYXllckluZGV4KGEsYyl9LHNldEJhc2VMYXllcjpmdW5jdGlvbihhKXtpZihhIT10aGlzLmJhc2VMYXllciYmLTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMubGF5ZXJzLGEpKXt2YXIgYj10aGlzLmdldENhY2hlZENlbnRlcigpLGM9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUodGhpcy5nZXRTY2FsZSgpLGEudW5pdHMpO251bGw9PXRoaXMuYmFzZUxheWVyfHx0aGlzLmFsbE92ZXJsYXlzfHx0aGlzLmJhc2VMYXllci5zZXRWaXNpYmlsaXR5KCExKTt0aGlzLmJhc2VMYXllcj1hO2lmKCF0aGlzLmFsbE92ZXJsYXlzfHx0aGlzLmJhc2VMYXllci52aXNpYmlsaXR5KXRoaXMuYmFzZUxheWVyLnNldFZpc2liaWxpdHkoITApLAohMT09PXRoaXMuYmFzZUxheWVyLmluUmFuZ2UmJnRoaXMuYmFzZUxheWVyLnJlZHJhdygpO251bGwhPWImJihhPXRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oY3x8dGhpcy5yZXNvbHV0aW9uLCEwKSx0aGlzLnNldENlbnRlcihiLGEsITEsITApKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWJhc2VsYXllciIse2xheWVyOnRoaXMuYmFzZUxheWVyfSl9fSxhZGRDb250cm9sOmZ1bmN0aW9uKGEsYil7dGhpcy5jb250cm9scy5wdXNoKGEpO3RoaXMuYWRkQ29udHJvbFRvTWFwKGEsYil9LGFkZENvbnRyb2xzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE9PT1hcmd1bWVudHMubGVuZ3RoP1tdOmIsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl0aGlzLmFkZENvbnRyb2woYVtkXSxjW2RdP2NbZF06bnVsbCl9LGFkZENvbnRyb2xUb01hcDpmdW5jdGlvbihhLGIpe2Eub3V0c2lkZVZpZXdwb3J0PW51bGwhPWEuZGl2O3RoaXMuZGlzcGxheVByb2plY3Rpb24mJiFhLmRpc3BsYXlQcm9qZWN0aW9uJiYKKGEuZGlzcGxheVByb2plY3Rpb249dGhpcy5kaXNwbGF5UHJvamVjdGlvbik7YS5zZXRNYXAodGhpcyk7dmFyIGM9YS5kcmF3KGIpO2MmJiFhLm91dHNpZGVWaWV3cG9ydCYmKGMuc3R5bGUuekluZGV4PXRoaXMuWl9JTkRFWF9CQVNFLkNvbnRyb2wrdGhpcy5jb250cm9scy5sZW5ndGgsdGhpcy52aWV3UG9ydERpdi5hcHBlbmRDaGlsZChjKSk7YS5hdXRvQWN0aXZhdGUmJmEuYWN0aXZhdGUoKX0sZ2V0Q29udHJvbDpmdW5jdGlvbihhKXtmb3IodmFyIGI9bnVsbCxjPTAsZD10aGlzLmNvbnRyb2xzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmNvbnRyb2xzW2NdO2lmKGUuaWQ9PWEpe2I9ZTticmVha319cmV0dXJuIGJ9LHJlbW92ZUNvbnRyb2w6ZnVuY3Rpb24oYSl7YSYmYT09dGhpcy5nZXRDb250cm9sKGEuaWQpJiYoYS5kaXYmJmEuZGl2LnBhcmVudE5vZGU9PXRoaXMudmlld1BvcnREaXYmJnRoaXMudmlld1BvcnREaXYucmVtb3ZlQ2hpbGQoYS5kaXYpLE9wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMuY29udHJvbHMsCmEpKX0sYWRkUG9wdXA6ZnVuY3Rpb24oYSxiKXtpZihiKWZvcih2YXIgYz10aGlzLnBvcHVwcy5sZW5ndGgtMTswPD1jOy0tYyl0aGlzLnJlbW92ZVBvcHVwKHRoaXMucG9wdXBzW2NdKTthLm1hcD10aGlzO3RoaXMucG9wdXBzLnB1c2goYSk7aWYoYz1hLmRyYXcoKSljLnN0eWxlLnpJbmRleD10aGlzLlpfSU5ERVhfQkFTRS5Qb3B1cCt0aGlzLnBvcHVwcy5sZW5ndGgsdGhpcy5sYXllckNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChjKX0scmVtb3ZlUG9wdXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5wb3B1cHMsYSk7aWYoYS5kaXYpdHJ5e3RoaXMubGF5ZXJDb250YWluZXJEaXYucmVtb3ZlQ2hpbGQoYS5kaXYpfWNhdGNoKGIpe31hLm1hcD1udWxsfSxnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLnNpemUmJihhPXRoaXMuc2l6ZS5jbG9uZSgpKTtyZXR1cm4gYX0sdXBkYXRlU2l6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q3VycmVudFNpemUoKTsKaWYoYSYmIWlzTmFOKGEuaCkmJiFpc05hTihhLncpKXt0aGlzLmV2ZW50cy5jbGVhck1vdXNlQ2FjaGUoKTt2YXIgYj10aGlzLmdldFNpemUoKTtudWxsPT1iJiYodGhpcy5zaXplPWI9YSk7aWYoIWEuZXF1YWxzKGIpKXt0aGlzLnNpemU9YTthPTA7Zm9yKGI9dGhpcy5sYXllcnMubGVuZ3RoO2E8YjthKyspdGhpcy5sYXllcnNbYV0ub25NYXBSZXNpemUoKTthPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJm51bGwhPWEmJihiPXRoaXMuZ2V0Wm9vbSgpLHRoaXMuem9vbT1udWxsLHRoaXMuc2V0Q2VudGVyKGEsYikpfX10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInVwZGF0ZXNpemUiKX0sZ2V0Q3VycmVudFNpemU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgT3BlbkxheWVycy5TaXplKHRoaXMuZGl2LmNsaWVudFdpZHRoLHRoaXMuZGl2LmNsaWVudEhlaWdodCk7aWYoMD09YS53JiYwPT1hLmh8fGlzTmFOKGEudykmJmlzTmFOKGEuaCkpYS53PXRoaXMuZGl2Lm9mZnNldFdpZHRoLAphLmg9dGhpcy5kaXYub2Zmc2V0SGVpZ2h0O2lmKDA9PWEudyYmMD09YS5ofHxpc05hTihhLncpJiZpc05hTihhLmgpKWEudz1wYXJzZUludCh0aGlzLmRpdi5zdHlsZS53aWR0aCksYS5oPXBhcnNlSW50KHRoaXMuZGl2LnN0eWxlLmhlaWdodCk7cmV0dXJuIGF9LGNhbGN1bGF0ZUJvdW5kczpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7bnVsbD09YSYmKGE9dGhpcy5nZXRDYWNoZWRDZW50ZXIoKSk7bnVsbD09YiYmKGI9dGhpcy5nZXRSZXNvbHV0aW9uKCkpO2lmKG51bGwhPWEmJm51bGwhPWIpdmFyIGM9dGhpcy5zaXplLncqYi8yLGQ9dGhpcy5zaXplLmgqYi8yLGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKGEubG9uLWMsYS5sYXQtZCxhLmxvbitjLGEubGF0K2QpO3JldHVybiBjfSxnZXRDZW50ZXI6ZnVuY3Rpb24oKXt2YXIgYT1udWxsLGI9dGhpcy5nZXRDYWNoZWRDZW50ZXIoKTtiJiYoYT1iLmNsb25lKCkpO3JldHVybiBhfSxnZXRDYWNoZWRDZW50ZXI6ZnVuY3Rpb24oKXshdGhpcy5jZW50ZXImJgp0aGlzLnNpemUmJih0aGlzLmNlbnRlcj10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KHt4OnRoaXMuc2l6ZS53LzIseTp0aGlzLnNpemUuaC8yfSkpO3JldHVybiB0aGlzLmNlbnRlcn0sZ2V0Wm9vbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnpvb219LHBhbjpmdW5jdGlvbihhLGIsYyl7Yz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLHthbmltYXRlOiEwLGRyYWdnaW5nOiExfSk7aWYoYy5kcmFnZ2luZykwPT1hJiYwPT1ifHx0aGlzLm1vdmVCeVB4KGEsYik7ZWxzZXt2YXIgZD10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCkpO2E9ZC5hZGQoYSxiKTtpZih0aGlzLmRyYWdnaW5nfHwhYS5lcXVhbHMoZCkpZD10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpLGMuYW5pbWF0ZT90aGlzLnBhblRvKGQpOih0aGlzLm1vdmVUbyhkKSx0aGlzLmRyYWdnaW5nJiYodGhpcy5kcmFnZ2luZz0hMSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmVlbmQiKSkpfX0sCnBhblRvOmZ1bmN0aW9uKGEpe2lmKHRoaXMucGFuVHdlZW4mJnRoaXMuZ2V0RXh0ZW50KCkuc2NhbGUodGhpcy5wYW5SYXRpbykuY29udGFpbnNMb25MYXQoYSkpe3ZhciBiPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7aWYoIWEuZXF1YWxzKGIpKXt2YXIgYj10aGlzLmdldFBpeGVsRnJvbUxvbkxhdChiKSxjPXRoaXMuZ2V0UGl4ZWxGcm9tTG9uTGF0KGEpLGQ9MCxlPTA7dGhpcy5wYW5Ud2Vlbi5zdGFydCh7eDowLHk6MH0se3g6Yy54LWIueCx5OmMueS1iLnl9LHRoaXMucGFuRHVyYXRpb24se2NhbGxiYWNrczp7ZWFjaFN0ZXA6T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKGEpe3RoaXMubW92ZUJ5UHgoYS54LWQsYS55LWUpO2Q9TWF0aC5yb3VuZChhLngpO2U9TWF0aC5yb3VuZChhLnkpfSx0aGlzKSxkb25lOk9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbihiKXt0aGlzLm1vdmVUbyhhKTt0aGlzLmRyYWdnaW5nPSExO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIpfSwKdGhpcyl9fSl9fWVsc2UgdGhpcy5zZXRDZW50ZXIoYSl9LHNldENlbnRlcjpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLnBhblR3ZWVuJiZ0aGlzLnBhblR3ZWVuLnN0b3AoKTt0aGlzLnpvb21Ud2VlbiYmdGhpcy56b29tVHdlZW4uc3RvcCgpO3RoaXMubW92ZVRvKGEsYix7ZHJhZ2dpbmc6Yyxmb3JjZVpvb21DaGFuZ2U6ZH0pfSxtb3ZlQnlQeDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2l6ZS53LzIsZD10aGlzLnNpemUuaC8yLGU9YythLGY9ZCtiLGc9dGhpcy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lLGg9MCxrPTA7dGhpcy5yZXN0cmljdGVkRXh0ZW50JiYoaD1jLGs9ZCxnPSExKTthPWd8fGU8PXRoaXMubWF4UHgueC1oJiZlPj10aGlzLm1pblB4LngraD9NYXRoLnJvdW5kKGEpOjA7Yj1mPD10aGlzLm1heFB4LnktayYmZj49dGhpcy5taW5QeC55K2s/TWF0aC5yb3VuZChiKTowO2lmKGF8fGIpe3RoaXMuZHJhZ2dpbmd8fCh0aGlzLmRyYWdnaW5nPSEwLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZXN0YXJ0IikpOwp0aGlzLmNlbnRlcj1udWxsO2EmJih0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueC09YSx0aGlzLm1pblB4LngtPWEsdGhpcy5tYXhQeC54LT1hKTtiJiYodGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4LnktPWIsdGhpcy5taW5QeC55LT1iLHRoaXMubWF4UHgueS09Yik7dGhpcy5hcHBseVRyYW5zZm9ybSgpO2Q9MDtmb3IoZT10aGlzLmxheWVycy5sZW5ndGg7ZDxlOysrZCljPXRoaXMubGF5ZXJzW2RdLGMudmlzaWJpbGl0eSYmKGM9PT10aGlzLmJhc2VMYXllcnx8Yy5pblJhbmdlKSYmKGMubW92ZUJ5UHgoYSxiKSxjLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmUiKSk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlIil9fSxhZGp1c3Rab29tOmZ1bmN0aW9uKGEpe2lmKHRoaXMuYmFzZUxheWVyJiZ0aGlzLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpe3ZhciBiPXRoaXMuYmFzZUxheWVyLnJlc29sdXRpb25zLGM9dGhpcy5nZXRNYXhFeHRlbnQoKS5nZXRXaWR0aCgpL3RoaXMuc2l6ZS53OwppZih0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGEpPmMpaWYodGhpcy5mcmFjdGlvbmFsWm9vbSlhPXRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oYyk7ZWxzZSBmb3IodmFyIGQ9YXwwLGU9Yi5sZW5ndGg7ZDxlOysrZClpZihiW2RdPD1jKXthPWQ7YnJlYWt9fXJldHVybiBhfSxnZXRNaW5ab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWRqdXN0Wm9vbSgwKX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1hfHxhIGluc3RhbmNlb2YgT3BlbkxheWVycy5Mb25MYXR8fChhPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhKSk7Y3x8KGM9e30pO251bGwhPWImJihiPXBhcnNlRmxvYXQoYiksdGhpcy5mcmFjdGlvbmFsWm9vbXx8KGI9TWF0aC5yb3VuZChiKSkpO3ZhciBkPWI7Yj10aGlzLmFkanVzdFpvb20oYik7YiE9PWQmJihhPXRoaXMuZ2V0Q2VudGVyKCkpO3ZhciBkPWMuZHJhZ2dpbmd8fHRoaXMuZHJhZ2dpbmcsZT1jLmZvcmNlWm9vbUNoYW5nZTt0aGlzLmdldENhY2hlZENlbnRlcigpfHwKdGhpcy5pc1ZhbGlkTG9uTGF0KGEpfHwoYT10aGlzLm1heEV4dGVudC5nZXRDZW50ZXJMb25MYXQoKSx0aGlzLmNlbnRlcj1hLmNsb25lKCkpO2lmKG51bGwhPXRoaXMucmVzdHJpY3RlZEV4dGVudCl7bnVsbD09YSYmKGE9dGhpcy5jZW50ZXIpO251bGw9PWImJihiPXRoaXMuZ2V0Wm9vbSgpKTt2YXIgZj10aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGIpLGY9dGhpcy5jYWxjdWxhdGVCb3VuZHMoYSxmKTtpZighdGhpcy5yZXN0cmljdGVkRXh0ZW50LmNvbnRhaW5zQm91bmRzKGYpKXt2YXIgZz10aGlzLnJlc3RyaWN0ZWRFeHRlbnQuZ2V0Q2VudGVyTG9uTGF0KCk7Zi5nZXRXaWR0aCgpPnRoaXMucmVzdHJpY3RlZEV4dGVudC5nZXRXaWR0aCgpP2E9bmV3IE9wZW5MYXllcnMuTG9uTGF0KGcubG9uLGEubGF0KTpmLmxlZnQ8dGhpcy5yZXN0cmljdGVkRXh0ZW50LmxlZnQ/YT1hLmFkZCh0aGlzLnJlc3RyaWN0ZWRFeHRlbnQubGVmdC1mLmxlZnQsMCk6Zi5yaWdodD50aGlzLnJlc3RyaWN0ZWRFeHRlbnQucmlnaHQmJgooYT1hLmFkZCh0aGlzLnJlc3RyaWN0ZWRFeHRlbnQucmlnaHQtZi5yaWdodCwwKSk7Zi5nZXRIZWlnaHQoKT50aGlzLnJlc3RyaWN0ZWRFeHRlbnQuZ2V0SGVpZ2h0KCk/YT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYS5sb24sZy5sYXQpOmYuYm90dG9tPHRoaXMucmVzdHJpY3RlZEV4dGVudC5ib3R0b20/YT1hLmFkZCgwLHRoaXMucmVzdHJpY3RlZEV4dGVudC5ib3R0b20tZi5ib3R0b20pOmYudG9wPnRoaXMucmVzdHJpY3RlZEV4dGVudC50b3AmJihhPWEuYWRkKDAsdGhpcy5yZXN0cmljdGVkRXh0ZW50LnRvcC1mLnRvcCkpfX1lPWV8fHRoaXMuaXNWYWxpZFpvb21MZXZlbChiKSYmYiE9dGhpcy5nZXRab29tKCk7Zj10aGlzLmlzVmFsaWRMb25MYXQoYSkmJiFhLmVxdWFscyh0aGlzLmNlbnRlcik7aWYoZXx8Znx8ZCl7ZHx8dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3Zlc3RhcnQiLHt6b29tQ2hhbmdlZDplfSk7ZiYmKCFlJiZ0aGlzLmNlbnRlciYmdGhpcy5jZW50ZXJMYXllckNvbnRhaW5lcihhKSwKdGhpcy5jZW50ZXI9YS5jbG9uZSgpKTthPWU/dGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShiKTp0aGlzLmdldFJlc29sdXRpb24oKTtpZihlfHxudWxsPT10aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luKXt0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7dGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lng9MDt0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueT0wO3RoaXMuYXBwbHlUcmFuc2Zvcm0oKTt2YXIgZj10aGlzLmdldE1heEV4dGVudCh7cmVzdHJpY3RlZDohMH0pLGg9Zi5nZXRDZW50ZXJMb25MYXQoKSxnPXRoaXMuY2VudGVyLmxvbi1oLmxvbixoPWgubGF0LXRoaXMuY2VudGVyLmxhdCxrPU1hdGgucm91bmQoZi5nZXRXaWR0aCgpL2EpLGw9TWF0aC5yb3VuZChmLmdldEhlaWdodCgpL2EpO3RoaXMubWluUHg9e3g6KHRoaXMuc2l6ZS53LWspLzItZy9hLHk6KHRoaXMuc2l6ZS5oLWwpLzItaC9hfTt0aGlzLm1heFB4PXt4OnRoaXMubWluUHgueCsKTWF0aC5yb3VuZChmLmdldFdpZHRoKCkvYSkseTp0aGlzLm1pblB4LnkrTWF0aC5yb3VuZChmLmdldEhlaWdodCgpL2EpfX1lJiYodGhpcy56b29tPWIsdGhpcy5yZXNvbHV0aW9uPWEpO2E9dGhpcy5nZXRFeHRlbnQoKTt0aGlzLmJhc2VMYXllci52aXNpYmlsaXR5JiYodGhpcy5iYXNlTGF5ZXIubW92ZVRvKGEsZSxjLmRyYWdnaW5nKSxjLmRyYWdnaW5nfHx0aGlzLmJhc2VMYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlZW5kIix7em9vbUNoYW5nZWQ6ZX0pKTthPXRoaXMuYmFzZUxheWVyLmdldEV4dGVudCgpO2ZvcihiPXRoaXMubGF5ZXJzLmxlbmd0aC0xOzA8PWI7LS1iKWY9dGhpcy5sYXllcnNbYl0sZj09PXRoaXMuYmFzZUxheWVyfHxmLmlzQmFzZUxheWVyfHwoZz1mLmNhbGN1bGF0ZUluUmFuZ2UoKSxmLmluUmFuZ2UhPWcmJigoZi5pblJhbmdlPWcpfHxmLmRpc3BsYXkoITEpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjpmLHByb3BlcnR5OiJ2aXNpYmlsaXR5In0pKSwKZyYmZi52aXNpYmlsaXR5JiYoZi5tb3ZlVG8oYSxlLGMuZHJhZ2dpbmcpLGMuZHJhZ2dpbmd8fGYuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIse3pvb21DaGFuZ2VkOmV9KSkpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZSIpO2R8fHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIpO2lmKGUpe2I9MDtmb3IoYz10aGlzLnBvcHVwcy5sZW5ndGg7YjxjO2IrKyl0aGlzLnBvcHVwc1tiXS51cGRhdGVQb3NpdGlvbigpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiem9vbWVuZCIpfX19LGNlbnRlckxheWVyQ29udGFpbmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQodGhpcy5sYXllckNvbnRhaW5lck9yaWdpbiksYz10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KGEpO2lmKG51bGwhPWImJm51bGwhPWMpe3ZhciBkPXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54O2E9dGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lnk7CnZhciBlPU1hdGgucm91bmQoYi54LWMueCksYj1NYXRoLnJvdW5kKGIueS1jLnkpO3RoaXMuYXBwbHlUcmFuc2Zvcm0odGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lng9ZSx0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueT1iKTtkLT1lO2EtPWI7dGhpcy5taW5QeC54LT1kO3RoaXMubWF4UHgueC09ZDt0aGlzLm1pblB4LnktPWE7dGhpcy5tYXhQeC55LT1hfX0saXNWYWxpZFpvb21MZXZlbDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmMDw9YSYmYTx0aGlzLmdldE51bVpvb21MZXZlbHMoKX0saXNWYWxpZExvbkxhdDpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT1hJiYoYj10aGlzLmdldE1heEV4dGVudCgpLGI9Yi5jb250YWluc0xvbkxhdChhLHt3b3JsZEJvdW5kczp0aGlzLmJhc2VMYXllci53cmFwRGF0ZUxpbmUmJmJ9KSk7cmV0dXJuIGJ9LGdldFByb2plY3Rpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFByb2plY3Rpb25PYmplY3QoKTtyZXR1cm4gYT9hLmdldENvZGUoKToKbnVsbH0sZ2V0UHJvamVjdGlvbk9iamVjdDpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuYmFzZUxheWVyLnByb2plY3Rpb24pO3JldHVybiBhfSxnZXRNYXhSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIubWF4UmVzb2x1dGlvbik7cmV0dXJuIGF9LGdldE1heEV4dGVudDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO2EmJmEucmVzdHJpY3RlZCYmdGhpcy5yZXN0cmljdGVkRXh0ZW50P2I9dGhpcy5yZXN0cmljdGVkRXh0ZW50Om51bGwhPXRoaXMuYmFzZUxheWVyJiYoYj10aGlzLmJhc2VMYXllci5tYXhFeHRlbnQpO3JldHVybiBifSxnZXROdW1ab29tTGV2ZWxzOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIubnVtWm9vbUxldmVscyk7cmV0dXJuIGF9LGdldEV4dGVudDpmdW5jdGlvbigpe3ZhciBhPQpudWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYT10aGlzLmJhc2VMYXllci5nZXRFeHRlbnQoKSk7cmV0dXJuIGF9LGdldFJlc29sdXRpb246ZnVuY3Rpb24oKXt2YXIgYT1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyP2E9dGhpcy5iYXNlTGF5ZXIuZ2V0UmVzb2x1dGlvbigpOiEwPT09dGhpcy5hbGxPdmVybGF5cyYmMDx0aGlzLmxheWVycy5sZW5ndGgmJihhPXRoaXMubGF5ZXJzWzBdLmdldFJlc29sdXRpb24oKSk7cmV0dXJuIGF9LGdldFVuaXRzOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIudW5pdHMpO3JldHVybiBhfSxnZXRTY2FsZTpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGE9T3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb24oYSx0aGlzLmJhc2VMYXllci51bml0cykpO3JldHVybiBhfSxnZXRab29tRm9yRXh0ZW50OmZ1bmN0aW9uKGEsCmIpe3ZhciBjPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihjPXRoaXMuYmFzZUxheWVyLmdldFpvb21Gb3JFeHRlbnQoYSxiKSk7cmV0dXJuIGN9LGdldFJlc29sdXRpb25Gb3Jab29tOmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7dGhpcy5iYXNlTGF5ZXImJihiPXRoaXMuYmFzZUxheWVyLmdldFJlc29sdXRpb25Gb3Jab29tKGEpKTtyZXR1cm4gYn0sZ2V0Wm9vbUZvclJlc29sdXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYz10aGlzLmJhc2VMYXllci5nZXRab29tRm9yUmVzb2x1dGlvbihhLGIpKTtyZXR1cm4gY30sem9vbVRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztpZihjLmlzVmFsaWRab29tTGV2ZWwoYSkpaWYoYy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lJiYoYT1jLmFkanVzdFpvb20oYSkpLGMuem9vbVR3ZWVuKXt2YXIgZD1jLmdldFJlc29sdXRpb24oKSxlPWMuZ2V0UmVzb2x1dGlvbkZvclpvb20oYSksZj17c2NhbGU6MX0sCmQ9e3NjYWxlOmQvZX07Yy56b29tVHdlZW4ucGxheWluZyYmYy56b29tVHdlZW4uZHVyYXRpb248MypjLnpvb21EdXJhdGlvbj9jLnpvb21Ud2Vlbi5maW5pc2g9e3NjYWxlOmMuem9vbVR3ZWVuLmZpbmlzaC5zY2FsZSpkLnNjYWxlfTooYnx8KGU9Yy5nZXRTaXplKCksYj17eDplLncvMix5OmUuaC8yfSksYy56b29tVHdlZW4uc3RhcnQoZixkLGMuem9vbUR1cmF0aW9uLHttaW5GcmFtZVJhdGU6NTAsY2FsbGJhY2tzOntlYWNoU3RlcDpmdW5jdGlvbihhKXt2YXIgZD1jLmxheWVyQ29udGFpbmVyT3JpZ2luUHg7YT1hLnNjYWxlO2MuYXBwbHlUcmFuc2Zvcm0oZC54KygoYS0xKSooZC54LWIueCl8MCksZC55KygoYS0xKSooZC55LWIueSl8MCksYSl9LGRvbmU6ZnVuY3Rpb24oYSl7Yy5hcHBseVRyYW5zZm9ybSgpO2E9Yy5nZXRSZXNvbHV0aW9uKCkvYS5zY2FsZTt2YXIgZD1jLmdldFpvb21Gb3JSZXNvbHV0aW9uKGEsITApO2MubW92ZVRvKGMuZ2V0Wm9vbVRhcmdldENlbnRlcihiLAphKSxkLCEwKX19fSkpfWVsc2UgZj1iP2MuZ2V0Wm9vbVRhcmdldENlbnRlcihiLGMuZ2V0UmVzb2x1dGlvbkZvclpvb20oYSkpOm51bGwsYy5zZXRDZW50ZXIoZixhKX0sem9vbUluOmZ1bmN0aW9uKCl7dGhpcy56b29tVG8odGhpcy5nZXRab29tKCkrMSl9LHpvb21PdXQ6ZnVuY3Rpb24oKXt0aGlzLnpvb21Ubyh0aGlzLmdldFpvb20oKS0xKX0sem9vbVRvRXh0ZW50OmZ1bmN0aW9uKGEsYil7YSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuQm91bmRzfHwoYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYSkpO3ZhciBjPWEuZ2V0Q2VudGVyTG9uTGF0KCk7aWYodGhpcy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXtjPXRoaXMuZ2V0TWF4RXh0ZW50KCk7Zm9yKGE9YS5jbG9uZSgpO2EucmlnaHQ8YS5sZWZ0OylhLnJpZ2h0Kz1jLmdldFdpZHRoKCk7Yz1hLmdldENlbnRlckxvbkxhdCgpLndyYXBEYXRlTGluZShjKX10aGlzLnNldENlbnRlcihjLHRoaXMuZ2V0Wm9vbUZvckV4dGVudChhLGIpKX0sCnpvb21Ub01heEV4dGVudDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0TWF4RXh0ZW50KHtyZXN0cmljdGVkOmE/YS5yZXN0cmljdGVkOiEwfSk7dGhpcy56b29tVG9FeHRlbnQoYSl9LHpvb21Ub1NjYWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUoYSx0aGlzLmJhc2VMYXllci51bml0cyksZD10aGlzLnNpemUudypjLzIsYz10aGlzLnNpemUuaCpjLzIsZT10aGlzLmdldENhY2hlZENlbnRlcigpLGQ9bmV3IE9wZW5MYXllcnMuQm91bmRzKGUubG9uLWQsZS5sYXQtYyxlLmxvbitkLGUubGF0K2MpO3RoaXMuem9vbVRvRXh0ZW50KGQsYil9LGdldExvbkxhdEZyb21WaWV3UG9ydFB4OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihiPXRoaXMuYmFzZUxheWVyLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpKTtyZXR1cm4gYn0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9Cm51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihiPXRoaXMuYmFzZUxheWVyLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KGEpKTtyZXR1cm4gYn0sZ2V0Wm9vbVRhcmdldENlbnRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGwsZD10aGlzLmdldFNpemUoKSxlPWQudy8yLWEueCxkPWEueS1kLmgvMixmPXRoaXMuZ2V0TG9uTGF0RnJvbVBpeGVsKGEpO2YmJihjPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChmLmxvbitlKmIsZi5sYXQrZCpiKSk7cmV0dXJuIGN9LGdldExvbkxhdEZyb21QaXhlbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKX0sZ2V0UGl4ZWxGcm9tTG9uTGF0OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChhKTthLng9TWF0aC5yb3VuZChhLngpO2EueT1NYXRoLnJvdW5kKGEueSk7cmV0dXJuIGF9LGdldEdlb2Rlc2ljUGl4ZWxTaXplOmZ1bmN0aW9uKGEpe3ZhciBiPWE/dGhpcy5nZXRMb25MYXRGcm9tUGl4ZWwoYSk6CnRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCl8fG5ldyBPcGVuTGF5ZXJzLkxvbkxhdCgwLDApLGM9dGhpcy5nZXRSZXNvbHV0aW9uKCk7YT1iLmFkZCgtYy8yLDApO3ZhciBkPWIuYWRkKGMvMiwwKSxlPWIuYWRkKDAsLWMvMiksYj1iLmFkZCgwLGMvMiksYz1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjQzMjYiKSxmPXRoaXMuZ2V0UHJvamVjdGlvbk9iamVjdCgpfHxjO2YuZXF1YWxzKGMpfHwoYS50cmFuc2Zvcm0oZixjKSxkLnRyYW5zZm9ybShmLGMpLGUudHJhbnNmb3JtKGYsYyksYi50cmFuc2Zvcm0oZixjKSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUoT3BlbkxheWVycy5VdGlsLmRpc3RWaW5jZW50eShhLGQpLE9wZW5MYXllcnMuVXRpbC5kaXN0VmluY2VudHkoZSxiKSl9LGdldFZpZXdQb3J0UHhGcm9tTGF5ZXJQeDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPWEuYWRkKHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54LHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC55KSk7CnJldHVybiBifSxnZXRMYXllclB4RnJvbVZpZXdQb3J0UHg6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj1hLmFkZCgtdGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4LngsLXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC55KSxpc05hTihiLngpfHxpc05hTihiLnkpKSYmKGI9bnVsbCk7cmV0dXJuIGJ9LGdldExvbkxhdEZyb21MYXllclB4OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRWaWV3UG9ydFB4RnJvbUxheWVyUHgoYSk7cmV0dXJuIHRoaXMuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSl9LGdldExheWVyUHhGcm9tTG9uTGF0OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRQaXhlbEZyb21Mb25MYXQoYSk7cmV0dXJuIHRoaXMuZ2V0TGF5ZXJQeEZyb21WaWV3UG9ydFB4KGEpfSxhcHBseVRyYW5zZm9ybTpmdW5jdGlvbihhLGIsYyl7Yz1jfHwxO3ZhciBkPXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeCxlPTEhPT1jO2E9YXx8ZC54O2I9Ynx8ZC55O3ZhciBmPXRoaXMubGF5ZXJDb250YWluZXJEaXYuc3R5bGUsCmc9dGhpcy5hcHBseVRyYW5zZm9ybS50cmFuc2Zvcm0saD10aGlzLmFwcGx5VHJhbnNmb3JtLnRlbXBsYXRlO2lmKHZvaWQgMD09PWcmJihnPU9wZW5MYXllcnMuVXRpbC52ZW5kb3JQcmVmaXguc3R5bGUoInRyYW5zZm9ybSIpLHRoaXMuYXBwbHlUcmFuc2Zvcm0udHJhbnNmb3JtPWcpKXt2YXIgaz1PcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy52aWV3UG9ydERpdixPcGVuTGF5ZXJzLlV0aWwudmVuZG9yUHJlZml4LmNzcygidHJhbnNmb3JtIikpO2smJiJub25lIj09PWt8fChoPVsidHJhbnNsYXRlM2QoIiwiLDApICIsInNjYWxlM2QoIiwiLDEpIl0sZltnXT1baFswXSwiMCwwIixoWzFdXS5qb2luKCIiKSk7aCYmfmZbZ10uaW5kZXhPZihoWzBdKXx8KGg9WyJ0cmFuc2xhdGUoIiwiKSAiLCJzY2FsZSgiLCIpIl0pO3RoaXMuYXBwbHlUcmFuc2Zvcm0udGVtcGxhdGU9aH1udWxsPT09Z3x8InRyYW5zbGF0ZTNkKCIhPT1oWzBdJiYhMCE9PWU/KGYubGVmdD1hKyJweCIsZi50b3A9CmIrInB4IixudWxsIT09ZyYmKGZbZ109IiIpKTooITA9PT1lJiYidHJhbnNsYXRlKCI9PT1oWzBdJiYoYS09ZC54LGItPWQueSxmLmxlZnQ9ZC54KyJweCIsZi50b3A9ZC55KyJweCIpLGZbZ109W2hbMF0sYSwicHgsIixiLCJweCIsaFsxXSxoWzJdLGMsIiwiLGMsaFszXV0uam9pbigiIikpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLk1hcCJ9KTtPcGVuTGF5ZXJzLk1hcC5USUxFX1dJRFRIPTI1NjtPcGVuTGF5ZXJzLk1hcC5USUxFX0hFSUdIVD0yNTY7T3BlbkxheWVycy5MYXllcj1PcGVuTGF5ZXJzLkNsYXNzKHtpZDpudWxsLG5hbWU6bnVsbCxkaXY6bnVsbCxvcGFjaXR5OjEsYWx3YXlzSW5SYW5nZTpudWxsLFJFU09MVVRJT05fUFJPUEVSVElFUzoic2NhbGVzIHJlc29sdXRpb25zIG1heFNjYWxlIG1pblNjYWxlIG1heFJlc29sdXRpb24gbWluUmVzb2x1dGlvbiBudW1ab29tTGV2ZWxzIG1heFpvb21MZXZlbCIuc3BsaXQoIiAiKSxldmVudHM6bnVsbCxtYXA6bnVsbCxpc0Jhc2VMYXllcjohMSxhbHBoYTohMSxkaXNwbGF5SW5MYXllclN3aXRjaGVyOiEwLHZpc2liaWxpdHk6ITAsYXR0cmlidXRpb246bnVsbCxpblJhbmdlOiExLGltYWdlU2l6ZTpudWxsLG9wdGlvbnM6bnVsbCxldmVudExpc3RlbmVyczpudWxsLGd1dHRlcjowLHByb2plY3Rpb246bnVsbCx1bml0czpudWxsLHNjYWxlczpudWxsLHJlc29sdXRpb25zOm51bGwsbWF4RXh0ZW50Om51bGwsbWluRXh0ZW50Om51bGwsbWF4UmVzb2x1dGlvbjpudWxsLG1pblJlc29sdXRpb246bnVsbCwKbnVtWm9vbUxldmVsczpudWxsLG1pblNjYWxlOm51bGwsbWF4U2NhbGU6bnVsbCxkaXNwbGF5T3V0c2lkZU1heEV4dGVudDohMSx3cmFwRGF0ZUxpbmU6ITEsbWV0YWRhdGE6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7dGhpcy5tZXRhZGF0YT17fTtiPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYik7bnVsbCE9dGhpcy5hbHdheXNJblJhbmdlJiYoYi5hbHdheXNJblJhbmdlPXRoaXMuYWx3YXlzSW5SYW5nZSk7dGhpcy5hZGRPcHRpb25zKGIpO3RoaXMubmFtZT1hO2lmKG51bGw9PXRoaXMuaWQmJih0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKSx0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuaWQpLHRoaXMuZGl2LnN0eWxlLndpZHRoPSIxMDAlIix0aGlzLmRpdi5zdHlsZS5oZWlnaHQ9IjEwMCUiLHRoaXMuZGl2LmRpcj0ibHRyIix0aGlzLmV2ZW50cz1uZXcgT3BlbkxheWVycy5FdmVudHModGhpcywKdGhpcy5kaXYpLHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpKXRoaXMuZXZlbnRzLm9uKHRoaXMuZXZlbnRMaXN0ZW5lcnMpfSxkZXN0cm95OmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPSEwKTtudWxsIT10aGlzLm1hcCYmdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcyxhKTt0aGlzLm9wdGlvbnM9dGhpcy5kaXY9dGhpcy5uYW1lPXRoaXMubWFwPXRoaXMucHJvamVjdGlvbj1udWxsO3RoaXMuZXZlbnRzJiYodGhpcy5ldmVudExpc3RlbmVycyYmdGhpcy5ldmVudHMudW4odGhpcy5ldmVudExpc3RlbmVycyksdGhpcy5ldmVudHMuZGVzdHJveSgpKTt0aGlzLmV2ZW50cz10aGlzLmV2ZW50TGlzdGVuZXJzPW51bGx9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyKHRoaXMubmFtZSx0aGlzLmdldE9wdGlvbnMoKSkpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsdGhpcyk7YS5tYXA9bnVsbDtyZXR1cm4gYX0sCmdldE9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgYT17fSxiO2ZvcihiIGluIHRoaXMub3B0aW9ucylhW2JdPXRoaXNbYl07cmV0dXJuIGF9LHNldE5hbWU6ZnVuY3Rpb24oYSl7YSE9dGhpcy5uYW1lJiYodGhpcy5uYW1lPWEsbnVsbCE9dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWxheWVyIix7bGF5ZXI6dGhpcyxwcm9wZXJ0eToibmFtZSJ9KSl9LGFkZE9wdGlvbnM6ZnVuY3Rpb24oYSxiKXtudWxsPT10aGlzLm9wdGlvbnMmJih0aGlzLm9wdGlvbnM9e30pO2EmJigic3RyaW5nIj09dHlwZW9mIGEucHJvamVjdGlvbiYmKGEucHJvamVjdGlvbj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKGEucHJvamVjdGlvbikpLGEucHJvamVjdGlvbiYmT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSxPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHNbYS5wcm9qZWN0aW9uLmdldENvZGUoKV0pLCFhLm1heEV4dGVudHx8YS5tYXhFeHRlbnQgaW5zdGFuY2VvZgpPcGVuTGF5ZXJzLkJvdW5kc3x8KGEubWF4RXh0ZW50PW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLm1heEV4dGVudCkpLCFhLm1pbkV4dGVudHx8YS5taW5FeHRlbnQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kc3x8KGEubWluRXh0ZW50PW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLm1pbkV4dGVudCkpKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMub3B0aW9ucyxhKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5wcm9qZWN0aW9uJiZ0aGlzLnByb2plY3Rpb24uZ2V0VW5pdHMoKSYmKHRoaXMudW5pdHM9dGhpcy5wcm9qZWN0aW9uLmdldFVuaXRzKCkpO2lmKHRoaXMubWFwKXt2YXIgYz10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCksZD10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFUy5jb25jYXQoWyJwcm9qZWN0aW9uIiwidW5pdHMiLCJtaW5FeHRlbnQiLCJtYXhFeHRlbnQiXSksZTtmb3IoZSBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoZSkmJjA8PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGQsCmUpKXt0aGlzLmluaXRSZXNvbHV0aW9ucygpO2ImJnRoaXMubWFwLmJhc2VMYXllcj09PXRoaXMmJih0aGlzLm1hcC5zZXRDZW50ZXIodGhpcy5tYXAuZ2V0Q2VudGVyKCksdGhpcy5tYXAuZ2V0Wm9vbUZvclJlc29sdXRpb24oYyksITEsITApLHRoaXMubWFwLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWJhc2VsYXllciIse2xheWVyOnRoaXN9KSk7YnJlYWt9fX0sb25NYXBSZXNpemU6ZnVuY3Rpb24oKXt9LHJlZHJhdzpmdW5jdGlvbigpe3ZhciBhPSExO2lmKHRoaXMubWFwKXt0aGlzLmluUmFuZ2U9dGhpcy5jYWxjdWxhdGVJblJhbmdlKCk7dmFyIGI9dGhpcy5nZXRFeHRlbnQoKTtiJiYodGhpcy5pblJhbmdlJiZ0aGlzLnZpc2liaWxpdHkpJiYodGhpcy5tb3ZlVG8oYiwhMCwhMSksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlZW5kIix7em9vbUNoYW5nZWQ6ITB9KSxhPSEwKX1yZXR1cm4gYX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXthPXRoaXMudmlzaWJpbGl0eTsKdGhpcy5pc0Jhc2VMYXllcnx8KGE9YSYmdGhpcy5pblJhbmdlKTt0aGlzLmRpc3BsYXkoYSl9LG1vdmVCeVB4OmZ1bmN0aW9uKGEsYil7fSxzZXRNYXA6ZnVuY3Rpb24oYSl7bnVsbD09dGhpcy5tYXAmJih0aGlzLm1hcD1hLHRoaXMubWF4RXh0ZW50PXRoaXMubWF4RXh0ZW50fHx0aGlzLm1hcC5tYXhFeHRlbnQsdGhpcy5taW5FeHRlbnQ9dGhpcy5taW5FeHRlbnR8fHRoaXMubWFwLm1pbkV4dGVudCx0aGlzLnByb2plY3Rpb249dGhpcy5wcm9qZWN0aW9ufHx0aGlzLm1hcC5wcm9qZWN0aW9uLCJzdHJpbmciPT10eXBlb2YgdGhpcy5wcm9qZWN0aW9uJiYodGhpcy5wcm9qZWN0aW9uPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24odGhpcy5wcm9qZWN0aW9uKSksdGhpcy51bml0cz10aGlzLnByb2plY3Rpb24uZ2V0VW5pdHMoKXx8dGhpcy51bml0c3x8dGhpcy5tYXAudW5pdHMsdGhpcy5pbml0UmVzb2x1dGlvbnMoKSx0aGlzLmlzQmFzZUxheWVyfHwodGhpcy5pblJhbmdlPXRoaXMuY2FsY3VsYXRlSW5SYW5nZSgpLAp0aGlzLmRpdi5zdHlsZS5kaXNwbGF5PXRoaXMudmlzaWJpbGl0eSYmdGhpcy5pblJhbmdlPyIiOiJub25lIiksdGhpcy5zZXRUaWxlU2l6ZSgpKX0sYWZ0ZXJBZGQ6ZnVuY3Rpb24oKXt9LHJlbW92ZU1hcDpmdW5jdGlvbihhKXt9LGdldEltYWdlU2l6ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbWFnZVNpemV8fHRoaXMudGlsZVNpemV9LHNldFRpbGVTaXplOmZ1bmN0aW9uKGEpe3RoaXMudGlsZVNpemU9YT1hP2E6dGhpcy50aWxlU2l6ZT90aGlzLnRpbGVTaXplOnRoaXMubWFwLmdldFRpbGVTaXplKCk7dGhpcy5ndXR0ZXImJih0aGlzLmltYWdlU2l6ZT1uZXcgT3BlbkxheWVycy5TaXplKGEudysyKnRoaXMuZ3V0dGVyLGEuaCsyKnRoaXMuZ3V0dGVyKSl9LGdldFZpc2liaWxpdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aXNpYmlsaXR5fSxzZXRWaXNpYmlsaXR5OmZ1bmN0aW9uKGEpe2EhPXRoaXMudmlzaWJpbGl0eSYmKHRoaXMudmlzaWJpbGl0eT1hLHRoaXMuZGlzcGxheShhKSwKdGhpcy5yZWRyYXcoKSxudWxsIT10aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjp0aGlzLHByb3BlcnR5OiJ2aXNpYmlsaXR5In0pLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidmlzaWJpbGl0eWNoYW5nZWQiKSl9LGRpc3BsYXk6ZnVuY3Rpb24oYSl7YSE9KCJub25lIiE9dGhpcy5kaXYuc3R5bGUuZGlzcGxheSkmJih0aGlzLmRpdi5zdHlsZS5kaXNwbGF5PWEmJnRoaXMuY2FsY3VsYXRlSW5SYW5nZSgpPyJibG9jayI6Im5vbmUiKX0sY2FsY3VsYXRlSW5SYW5nZTpmdW5jdGlvbigpe3ZhciBhPSExO3RoaXMuYWx3YXlzSW5SYW5nZT9hPSEwOnRoaXMubWFwJiYoYT10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCksYT1hPj10aGlzLm1pblJlc29sdXRpb24mJmE8PXRoaXMubWF4UmVzb2x1dGlvbik7cmV0dXJuIGF9LHNldElzQmFzZUxheWVyOmZ1bmN0aW9uKGEpe2EhPXRoaXMuaXNCYXNlTGF5ZXImJih0aGlzLmlzQmFzZUxheWVyPQphLG51bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2ViYXNlbGF5ZXIiLHtsYXllcjp0aGlzfSkpfSxpbml0UmVzb2x1dGlvbnM6ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZD17fSxlPSEwO2E9MDtmb3IoYj10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFUy5sZW5ndGg7YTxiO2ErKyljPXRoaXMuUkVTT0xVVElPTl9QUk9QRVJUSUVTW2FdLGRbY109dGhpcy5vcHRpb25zW2NdLGUmJnRoaXMub3B0aW9uc1tjXSYmKGU9ITEpO251bGw9PXRoaXMub3B0aW9ucy5hbHdheXNJblJhbmdlJiYodGhpcy5hbHdheXNJblJhbmdlPWUpO251bGw9PWQucmVzb2x1dGlvbnMmJihkLnJlc29sdXRpb25zPXRoaXMucmVzb2x1dGlvbnNGcm9tU2NhbGVzKGQuc2NhbGVzKSk7bnVsbD09ZC5yZXNvbHV0aW9ucyYmKGQucmVzb2x1dGlvbnM9dGhpcy5jYWxjdWxhdGVSZXNvbHV0aW9ucyhkKSk7aWYobnVsbD09ZC5yZXNvbHV0aW9ucyl7YT0wO2ZvcihiPXRoaXMuUkVTT0xVVElPTl9QUk9QRVJUSUVTLmxlbmd0aDthPApiO2ErKyljPXRoaXMuUkVTT0xVVElPTl9QUk9QRVJUSUVTW2FdLGRbY109bnVsbCE9dGhpcy5vcHRpb25zW2NdP3RoaXMub3B0aW9uc1tjXTp0aGlzLm1hcFtjXTtudWxsPT1kLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucz10aGlzLnJlc29sdXRpb25zRnJvbVNjYWxlcyhkLnNjYWxlcykpO251bGw9PWQucmVzb2x1dGlvbnMmJihkLnJlc29sdXRpb25zPXRoaXMuY2FsY3VsYXRlUmVzb2x1dGlvbnMoZCkpfXZhciBmO3RoaXMub3B0aW9ucy5tYXhSZXNvbHV0aW9uJiYiYXV0byIhPT10aGlzLm9wdGlvbnMubWF4UmVzb2x1dGlvbiYmKGY9dGhpcy5vcHRpb25zLm1heFJlc29sdXRpb24pO3RoaXMub3B0aW9ucy5taW5TY2FsZSYmKGY9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUodGhpcy5vcHRpb25zLm1pblNjYWxlLHRoaXMudW5pdHMpKTt2YXIgZzt0aGlzLm9wdGlvbnMubWluUmVzb2x1dGlvbiYmImF1dG8iIT09dGhpcy5vcHRpb25zLm1pblJlc29sdXRpb24mJgooZz10aGlzLm9wdGlvbnMubWluUmVzb2x1dGlvbik7dGhpcy5vcHRpb25zLm1heFNjYWxlJiYoZz1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZSh0aGlzLm9wdGlvbnMubWF4U2NhbGUsdGhpcy51bml0cykpO2QucmVzb2x1dGlvbnMmJihkLnJlc29sdXRpb25zLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi1hfSksZnx8KGY9ZC5yZXNvbHV0aW9uc1swXSksZ3x8KGc9ZC5yZXNvbHV0aW9uc1tkLnJlc29sdXRpb25zLmxlbmd0aC0xXSkpO2lmKHRoaXMucmVzb2x1dGlvbnM9ZC5yZXNvbHV0aW9ucyl7Yj10aGlzLnJlc29sdXRpb25zLmxlbmd0aDt0aGlzLnNjYWxlcz1BcnJheShiKTtmb3IoYT0wO2E8YjthKyspdGhpcy5zY2FsZXNbYV09T3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb24odGhpcy5yZXNvbHV0aW9uc1thXSx0aGlzLnVuaXRzKTt0aGlzLm51bVpvb21MZXZlbHM9Yn1pZih0aGlzLm1pblJlc29sdXRpb249Zyl0aGlzLm1heFNjYWxlPQpPcGVuTGF5ZXJzLlV0aWwuZ2V0U2NhbGVGcm9tUmVzb2x1dGlvbihnLHRoaXMudW5pdHMpO2lmKHRoaXMubWF4UmVzb2x1dGlvbj1mKXRoaXMubWluU2NhbGU9T3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb24oZix0aGlzLnVuaXRzKX0scmVzb2x1dGlvbnNGcm9tU2NhbGVzOmZ1bmN0aW9uKGEpe2lmKG51bGwhPWEpe3ZhciBiLGMsZDtkPWEubGVuZ3RoO2I9QXJyYXkoZCk7Zm9yKGM9MDtjPGQ7YysrKWJbY109T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUoYVtjXSx0aGlzLnVuaXRzKTtyZXR1cm4gYn19LGNhbGN1bGF0ZVJlc29sdXRpb25zOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD1hLm1heFJlc29sdXRpb247bnVsbCE9YS5taW5TY2FsZT9kPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKGEubWluU2NhbGUsdGhpcy51bml0cyk6ImF1dG8iPT1kJiZudWxsIT10aGlzLm1heEV4dGVudCYmKGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLApjPXRoaXMubWF4RXh0ZW50LmdldFdpZHRoKCkvYi53LGI9dGhpcy5tYXhFeHRlbnQuZ2V0SGVpZ2h0KCkvYi5oLGQ9TWF0aC5tYXgoYyxiKSk7Yz1hLm1pblJlc29sdXRpb247bnVsbCE9YS5tYXhTY2FsZT9jPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKGEubWF4U2NhbGUsdGhpcy51bml0cyk6ImF1dG8iPT1hLm1pblJlc29sdXRpb24mJm51bGwhPXRoaXMubWluRXh0ZW50JiYoYj10aGlzLm1hcC5nZXRTaXplKCksYz10aGlzLm1pbkV4dGVudC5nZXRXaWR0aCgpL2IudyxiPXRoaXMubWluRXh0ZW50LmdldEhlaWdodCgpL2IuaCxjPU1hdGgubWF4KGMsYikpOyJudW1iZXIiIT09dHlwZW9mIGQmJigibnVtYmVyIiE9PXR5cGVvZiBjJiZudWxsIT10aGlzLm1heEV4dGVudCkmJihkPXRoaXMubWFwLmdldFRpbGVTaXplKCksZD1NYXRoLm1heCh0aGlzLm1heEV4dGVudC5nZXRXaWR0aCgpL2Qudyx0aGlzLm1heEV4dGVudC5nZXRIZWlnaHQoKS9kLmgpKTtiPWEubWF4Wm9vbUxldmVsOwphPWEubnVtWm9vbUxldmVsczsibnVtYmVyIj09PXR5cGVvZiBjJiYibnVtYmVyIj09PXR5cGVvZiBkJiZ2b2lkIDA9PT1hP2E9TWF0aC5mbG9vcihNYXRoLmxvZyhkL2MpL01hdGgubG9nKDIpKSsxOnZvaWQgMD09PWEmJm51bGwhPWImJihhPWIrMSk7aWYoISgibnVtYmVyIiE9PXR5cGVvZiBhfHwwPj1hfHwibnVtYmVyIiE9PXR5cGVvZiBkJiYibnVtYmVyIiE9PXR5cGVvZiBjKSl7Yj1BcnJheShhKTt2YXIgZT0yOyJudW1iZXIiPT10eXBlb2YgYyYmIm51bWJlciI9PXR5cGVvZiBkJiYoZT1NYXRoLnBvdyhkL2MsMS8oYS0xKSkpO3ZhciBmO2lmKCJudW1iZXIiPT09dHlwZW9mIGQpZm9yKGY9MDtmPGE7ZisrKWJbZl09ZC9NYXRoLnBvdyhlLGYpO2Vsc2UgZm9yKGY9MDtmPGE7ZisrKWJbYS0xLWZdPWMqTWF0aC5wb3coZSxmKTtyZXR1cm4gYn19LGdldFJlc29sdXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcC5nZXRab29tKCk7cmV0dXJuIHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20oYSl9LApnZXRFeHRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAuY2FsY3VsYXRlQm91bmRzKCl9LGdldFpvb21Gb3JFeHRlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1hcC5nZXRTaXplKCksYz1NYXRoLm1heChhLmdldFdpZHRoKCkvYy53LGEuZ2V0SGVpZ2h0KCkvYy5oKTtyZXR1cm4gdGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbihjLGIpfSxnZXREYXRhRXh0ZW50OmZ1bmN0aW9uKCl7fSxnZXRSZXNvbHV0aW9uRm9yWm9vbTpmdW5jdGlvbihhKXthPU1hdGgubWF4KDAsTWF0aC5taW4oYSx0aGlzLnJlc29sdXRpb25zLmxlbmd0aC0xKSk7aWYodGhpcy5tYXAuZnJhY3Rpb25hbFpvb20pe3ZhciBiPU1hdGguZmxvb3IoYSksYz1NYXRoLmNlaWwoYSk7YT10aGlzLnJlc29sdXRpb25zW2JdLShhLWIpKih0aGlzLnJlc29sdXRpb25zW2JdLXRoaXMucmVzb2x1dGlvbnNbY10pfWVsc2UgYT10aGlzLnJlc29sdXRpb25zW01hdGgucm91bmQoYSldO3JldHVybiBhfSxnZXRab29tRm9yUmVzb2x1dGlvbjpmdW5jdGlvbihhLApiKXt2YXIgYyxkO2lmKHRoaXMubWFwLmZyYWN0aW9uYWxab29tKXt2YXIgZT0wLGY9dGhpcy5yZXNvbHV0aW9uc1tlXSxnPXRoaXMucmVzb2x1dGlvbnNbdGhpcy5yZXNvbHV0aW9ucy5sZW5ndGgtMV0saDtjPTA7Zm9yKGQ9dGhpcy5yZXNvbHV0aW9ucy5sZW5ndGg7YzxkOysrYylpZihoPXRoaXMucmVzb2x1dGlvbnNbY10saD49YSYmKGY9aCxlPWMpLGg8PWEpe2c9aDticmVha31jPWYtZztjPTA8Yz9lKyhmLWEpL2M6ZX1lbHNle2Y9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO2M9MDtmb3IoZD10aGlzLnJlc29sdXRpb25zLmxlbmd0aDtjPGQ7YysrKWlmKGIpe2U9TWF0aC5hYnModGhpcy5yZXNvbHV0aW9uc1tjXS1hKTtpZihlPmYpYnJlYWs7Zj1lfWVsc2UgaWYodGhpcy5yZXNvbHV0aW9uc1tjXTxhKWJyZWFrO2M9TWF0aC5tYXgoMCxjLTEpfXJldHVybiBjfSxnZXRMb25MYXRGcm9tVmlld1BvcnRQeDpmdW5jdGlvbihhKXt2YXIgYj1udWxsLGM9dGhpcy5tYXA7aWYobnVsbCE9CmEmJmMubWluUHgpe3ZhciBiPWMuZ2V0UmVzb2x1dGlvbigpLGQ9Yy5nZXRNYXhFeHRlbnQoe3Jlc3RyaWN0ZWQ6ITB9KSxiPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdCgoYS54LWMubWluUHgueCkqYitkLmxlZnQsKGMubWluUHgueS1hLnkpKmIrZC50b3ApO3RoaXMud3JhcERhdGVMaW5lJiYoYj1iLndyYXBEYXRlTGluZSh0aGlzLm1heEV4dGVudCkpfXJldHVybiBifSxnZXRWaWV3UG9ydFB4RnJvbUxvbkxhdDpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7bnVsbCE9YSYmKGI9Ynx8dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGM9dGhpcy5tYXAuY2FsY3VsYXRlQm91bmRzKG51bGwsYiksYz1uZXcgT3BlbkxheWVycy5QaXhlbCgxL2IqKGEubG9uLWMubGVmdCksMS9iKihjLnRvcC1hLmxhdCkpKTtyZXR1cm4gY30sc2V0T3BhY2l0eTpmdW5jdGlvbihhKXtpZihhIT10aGlzLm9wYWNpdHkpe3RoaXMub3BhY2l0eT1hO2Zvcih2YXIgYj10aGlzLmRpdi5jaGlsZE5vZGVzLGM9MCxkPWIubGVuZ3RoO2M8CmQ7KytjKXt2YXIgZT1iW2NdLmZpcnN0Q2hpbGR8fGJbY10sZj1iW2NdLmxhc3RDaGlsZDtmJiYiaWZyYW1lIj09PWYubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmKGU9Zi5wYXJlbnROb2RlKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5RE9NRWxlbWVudChlLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLGEpfW51bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6Im9wYWNpdHkifSl9fSxnZXRaSW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXYuc3R5bGUuekluZGV4fSxzZXRaSW5kZXg6ZnVuY3Rpb24oYSl7dGhpcy5kaXYuc3R5bGUuekluZGV4PWF9LGFkanVzdEJvdW5kczpmdW5jdGlvbihhKXtpZih0aGlzLmd1dHRlcil7dmFyIGI9dGhpcy5ndXR0ZXIqdGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO2E9bmV3IE9wZW5MYXllcnMuQm91bmRzKGEubGVmdC1iLGEuYm90dG9tLWIsYS5yaWdodCsKYixhLnRvcCtiKX10aGlzLndyYXBEYXRlTGluZSYmKGI9e3JpZ2h0VG9sZXJhbmNlOnRoaXMuZ2V0UmVzb2x1dGlvbigpLGxlZnRUb2xlcmFuY2U6dGhpcy5nZXRSZXNvbHV0aW9uKCl9LGE9YS53cmFwRGF0ZUxpbmUodGhpcy5tYXhFeHRlbnQsYikpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyIn0pO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3Q9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLHtVUkxfSEFTSF9GQUNUT1I6KE1hdGguc3FydCg1KS0xKS8yLHVybDpudWxsLHBhcmFtczpudWxsLHJlcHJvamVjdDohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxkXSk7dGhpcy51cmw9Yjt0aGlzLnBhcmFtc3x8KHRoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYykpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXM9dGhpcy51cmw9bnVsbDtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7CnJldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sc2V0VXJsOmZ1bmN0aW9uKGEpe3RoaXMudXJsPWF9LG1lcmdlTmV3UGFyYW1zOmZ1bmN0aW9uKGEpe3RoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5wYXJhbXMsYSk7YT10aGlzLnJlZHJhdygpO251bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6InBhcmFtcyJ9KTtyZXR1cm4gYX0scmVkcmF3OmZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMubWVyZ2VOZXdQYXJhbXMoe19vbFNhbHQ6TWF0aC5yYW5kb20oKX0pOk9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLnJlZHJhdy5hcHBseSh0aGlzLFtdKX0sc2VsZWN0VXJsOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTEsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyljKj1hLmNoYXJDb2RlQXQoZCkqdGhpcy5VUkxfSEFTSF9GQUNUT1IsCmMtPU1hdGguZmxvb3IoYyk7cmV0dXJuIGJbTWF0aC5mbG9vcihjKmIubGVuZ3RoKV19LGdldEZ1bGxSZXF1ZXN0U3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy51cmwsZD1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMucGFyYW1zKSxkPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoZCxhKSxlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYykmJihjPXRoaXMuc2VsZWN0VXJsKGUsYykpO3ZhciBlPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoYykpLGY7Zm9yKGYgaW4gZClmLnRvVXBwZXJDYXNlKClpbiBlJiZkZWxldGUgZFtmXTtlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC51cmxBcHBlbmQoYyxlKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdCJ9KTtPcGVuTGF5ZXJzLlRpbGU9T3BlbkxheWVycy5DbGFzcyh7ZXZlbnRzOm51bGwsZXZlbnRMaXN0ZW5lcnM6bnVsbCxpZDpudWxsLGxheWVyOm51bGwsdXJsOm51bGwsYm91bmRzOm51bGwsc2l6ZTpudWxsLHBvc2l0aW9uOm51bGwsaXNMb2FkaW5nOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMubGF5ZXI9YTt0aGlzLnBvc2l0aW9uPWIuY2xvbmUoKTt0aGlzLnNldEJvdW5kcyhjKTt0aGlzLnVybD1kO2UmJih0aGlzLnNpemU9ZS5jbG9uZSgpKTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiVGlsZV8iKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsZik7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpdGhpcy5ldmVudHMub24odGhpcy5ldmVudExpc3RlbmVycyl9LHVubG9hZDpmdW5jdGlvbigpe3RoaXMuaXNMb2FkaW5nJiYodGhpcy5pc0xvYWRpbmc9CiExLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidW5sb2FkIikpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wb3NpdGlvbj10aGlzLnNpemU9dGhpcy5ib3VuZHM9dGhpcy5sYXllcj1udWxsO3RoaXMuZXZlbnRMaXN0ZW5lcnMmJnRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpO3RoaXMuZXZlbnRzLmRlc3Ryb3koKTt0aGlzLmV2ZW50cz10aGlzLmV2ZW50TGlzdGVuZXJzPW51bGx9LGRyYXc6ZnVuY3Rpb24oYSl7YXx8dGhpcy5jbGVhcigpO3ZhciBiPXRoaXMuc2hvdWxkRHJhdygpO2ImJighYSYmITE9PT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWRyYXciKSkmJihiPW51bGwpO3JldHVybiBifSxzaG91bGREcmF3OmZ1bmN0aW9uKCl7dmFyIGE9ITEsYj10aGlzLmxheWVyLm1heEV4dGVudDtpZihiKXt2YXIgYz10aGlzLmxheWVyLm1hcCxjPWMuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmYy5nZXRNYXhFeHRlbnQoKTt0aGlzLmJvdW5kcy5pbnRlcnNlY3RzQm91bmRzKGIsCntpbmNsdXNpdmU6ITEsd29ybGRCb3VuZHM6Y30pJiYoYT0hMCl9cmV0dXJuIGF8fHRoaXMubGF5ZXIuZGlzcGxheU91dHNpZGVNYXhFeHRlbnR9LHNldEJvdW5kczpmdW5jdGlvbihhKXthPWEuY2xvbmUoKTtpZih0aGlzLmxheWVyLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgYj10aGlzLmxheWVyLm1hcC5nZXRNYXhFeHRlbnQoKSxjPXRoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKTthPWEud3JhcERhdGVMaW5lKGIse2xlZnRUb2xlcmFuY2U6YyxyaWdodFRvbGVyYW5jZTpjfSl9dGhpcy5ib3VuZHM9YX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1jJiYoYz0hMCk7dGhpcy5zZXRCb3VuZHMoYSk7dGhpcy5wb3NpdGlvbj1iLmNsb25lKCk7YyYmdGhpcy5kcmF3KCl9LGNsZWFyOmZ1bmN0aW9uKGEpe30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5UaWxlIn0pO09wZW5MYXllcnMuVGlsZS5JbWFnZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuVGlsZSx7dXJsOm51bGwsaW1nRGl2Om51bGwsZnJhbWU6bnVsbCxpbWFnZVJlbG9hZEF0dGVtcHRzOm51bGwsbGF5ZXJBbHBoYUhhY2s6bnVsbCxhc3luY1JlcXVlc3RJZDpudWxsLG1heEdldFVybExlbmd0aDpudWxsLGNhbnZhc0NvbnRleHQ6bnVsbCxjcm9zc09yaWdpbktleXdvcmQ6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudXJsPWQ7dGhpcy5sYXllckFscGhhSGFjaz10aGlzLmxheWVyLmFscGhhJiZPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrKCk7aWYobnVsbCE9dGhpcy5tYXhHZXRVcmxMZW5ndGh8fHRoaXMubGF5ZXIuZ3V0dGVyfHx0aGlzLmxheWVyQWxwaGFIYWNrKXRoaXMuZnJhbWU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5mcmFtZS5zdHlsZS5wb3NpdGlvbj0KImFic29sdXRlIix0aGlzLmZyYW1lLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO251bGwhPXRoaXMubWF4R2V0VXJsTGVuZ3RoJiZPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsT3BlbkxheWVycy5UaWxlLkltYWdlLklGcmFtZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmltZ0RpdiYmKHRoaXMuY2xlYXIoKSx0aGlzLmZyYW1lPXRoaXMuaW1nRGl2PW51bGwpO3RoaXMuYXN5bmNSZXF1ZXN0SWQ9bnVsbDtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkcmF3OmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5UaWxlLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPyh0aGlzLmxheWVyIT10aGlzLmxheWVyLm1hcC5iYXNlTGF5ZXImJnRoaXMubGF5ZXIucmVwcm9qZWN0JiYodGhpcy5ib3VuZHM9dGhpcy5nZXRCb3VuZHNGcm9tQmFzZUxheWVyKHRoaXMucG9zaXRpb24pKSx0aGlzLmlzTG9hZGluZz90aGlzLl9sb2FkRXZlbnQ9CiJyZWxvYWQiOih0aGlzLmlzTG9hZGluZz0hMCx0aGlzLl9sb2FkRXZlbnQ9ImxvYWRzdGFydCIpLHRoaXMucmVuZGVyVGlsZSgpLHRoaXMucG9zaXRpb25UaWxlKCkpOiExPT09YSYmdGhpcy51bmxvYWQoKTtyZXR1cm4gYX0scmVuZGVyVGlsZTpmdW5jdGlvbigpe2lmKHRoaXMubGF5ZXIuYXN5bmMpe3ZhciBhPXRoaXMuYXN5bmNSZXF1ZXN0SWQ9KHRoaXMuYXN5bmNSZXF1ZXN0SWR8fDApKzE7dGhpcy5sYXllci5nZXRVUkxhc3luYyh0aGlzLmJvdW5kcyxmdW5jdGlvbihiKXthPT10aGlzLmFzeW5jUmVxdWVzdElkJiYodGhpcy51cmw9Yix0aGlzLmluaXRJbWFnZSgpKX0sdGhpcyl9ZWxzZSB0aGlzLnVybD10aGlzLmxheWVyLmdldFVSTCh0aGlzLmJvdW5kcyksdGhpcy5pbml0SW1hZ2UoKX0scG9zaXRpb25UaWxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRUaWxlKCkuc3R5bGUsYj10aGlzLmZyYW1lP3RoaXMuc2l6ZTp0aGlzLmxheWVyLmdldEltYWdlU2l6ZSh0aGlzLmJvdW5kcyksCmM9MTt0aGlzLmxheWVyIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5HcmlkJiYoYz10aGlzLmxheWVyLmdldFNlcnZlclJlc29sdXRpb24oKS90aGlzLmxheWVyLm1hcC5nZXRSZXNvbHV0aW9uKCkpO2EubGVmdD10aGlzLnBvc2l0aW9uLngrInB4IjthLnRvcD10aGlzLnBvc2l0aW9uLnkrInB4IjthLndpZHRoPU1hdGgucm91bmQoYypiLncpKyJweCI7YS5oZWlnaHQ9TWF0aC5yb3VuZChjKmIuaCkrInB4In0sY2xlYXI6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmNsZWFyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYT10aGlzLmltZ0RpdjtpZihhKXt2YXIgYj10aGlzLmdldFRpbGUoKTtiLnBhcmVudE5vZGU9PT10aGlzLmxheWVyLmRpdiYmdGhpcy5sYXllci5kaXYucmVtb3ZlQ2hpbGQoYik7dGhpcy5zZXRJbWdTcmMoKTshMD09PXRoaXMubGF5ZXJBbHBoYUhhY2smJihhLnN0eWxlLmZpbHRlcj0iIik7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKGEsCiJvbEltYWdlTG9hZEVycm9yIil9dGhpcy5jYW52YXNDb250ZXh0PW51bGx9LGdldEltYWdlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaW1nRGl2KXt0aGlzLmltZ0Rpdj1PcGVuTGF5ZXJzLlRpbGUuSW1hZ2UuSU1BR0UuY2xvbmVOb2RlKCExKTt2YXIgYT10aGlzLmltZ0Rpdi5zdHlsZTtpZih0aGlzLmZyYW1lKXt2YXIgYj0wLGM9MDt0aGlzLmxheWVyLmd1dHRlciYmKGI9MTAwKih0aGlzLmxheWVyLmd1dHRlci90aGlzLmxheWVyLnRpbGVTaXplLncpLGM9MTAwKih0aGlzLmxheWVyLmd1dHRlci90aGlzLmxheWVyLnRpbGVTaXplLmgpKTthLmxlZnQ9LWIrIiUiO2EudG9wPS1jKyIlIjthLndpZHRoPTIqYisxMDArIiUiO2EuaGVpZ2h0PTIqYysxMDArIiUifWEudmlzaWJpbGl0eT0iaGlkZGVuIjthLm9wYWNpdHk9MDsxPnRoaXMubGF5ZXIub3BhY2l0eSYmKGEuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrMTAwKnRoaXMubGF5ZXIub3BhY2l0eSsiKSIpO2EucG9zaXRpb249ImFic29sdXRlIjsKdGhpcy5sYXllckFscGhhSGFjayYmKGEucGFkZGluZ1RvcD1hLmhlaWdodCxhLmhlaWdodD0iMCIsYS53aWR0aD0iMTAwJSIpO3RoaXMuZnJhbWUmJnRoaXMuZnJhbWUuYXBwZW5kQ2hpbGQodGhpcy5pbWdEaXYpfXJldHVybiB0aGlzLmltZ0Rpdn0sc2V0SW1hZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbWdEaXY9YX0saW5pdEltYWdlOmZ1bmN0aW9uKCl7aWYodGhpcy51cmx8fHRoaXMuaW1nRGl2KXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWxvYWQiKTt0aGlzLmxheWVyLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmdldFRpbGUoKSk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KHRoaXMuX2xvYWRFdmVudCk7dmFyIGE9dGhpcy5nZXRJbWFnZSgpLGI9YS5nZXRBdHRyaWJ1dGUoInNyYyIpfHwiIjt0aGlzLnVybCYmT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybChiLHRoaXMudXJsKT90aGlzLl9sb2FkVGltZW91dD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5vbkltYWdlTG9hZCwKdGhpcyksMCk6KHRoaXMuc3RvcExvYWRpbmcoKSx0aGlzLmNyb3NzT3JpZ2luS2V5d29yZCYmYS5yZW1vdmVBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIiksT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsImxvYWQiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLm9uSW1hZ2VMb2FkLHRoaXMpKSxPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiZXJyb3IiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLm9uSW1hZ2VFcnJvcix0aGlzKSksdGhpcy5pbWFnZVJlbG9hZEF0dGVtcHRzPTAsdGhpcy5zZXRJbWdTcmModGhpcy51cmwpKX1lbHNlIHRoaXMuaXNMb2FkaW5nPSExfSxzZXRJbWdTcmM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbWdEaXY7YT8oYi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iLGIuc3R5bGUub3BhY2l0eT0wLHRoaXMuY3Jvc3NPcmlnaW5LZXl3b3JkJiYoImRhdGE6IiE9PWEuc3Vic3RyKDAsNSk/Yi5zZXRBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIix0aGlzLmNyb3NzT3JpZ2luS2V5d29yZCk6CmIucmVtb3ZlQXR0cmlidXRlKCJjcm9zc29yaWdpbiIpKSxiLnNyYz1hKToodGhpcy5zdG9wTG9hZGluZygpLHRoaXMuaW1nRGl2PW51bGwsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpfSxnZXRUaWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnJhbWU/dGhpcy5mcmFtZTp0aGlzLmdldEltYWdlKCl9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXtpZih0aGlzLmltZ0RpdiYmIXRoaXMuaXNMb2FkaW5nKXt2YXIgYTt0aGlzLmZyYW1lPyhhPXRoaXMuZnJhbWUuY2xvbmVOb2RlKCExKSxhLmFwcGVuZENoaWxkKHRoaXMuaW1nRGl2KSk6YT10aGlzLmltZ0Rpdjt0aGlzLmltZ0Rpdj1udWxsO3JldHVybiBhfX0sb25JbWFnZUxvYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltZ0Rpdjt0aGlzLnN0b3BMb2FkaW5nKCk7YS5zdHlsZS52aXNpYmlsaXR5PSJpbmhlcml0IjthLnN0eWxlLm9wYWNpdHk9dGhpcy5sYXllci5vcGFjaXR5O3RoaXMuaXNMb2FkaW5nPQohMTt0aGlzLmNhbnZhc0NvbnRleHQ9bnVsbDt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKTshMD09PXRoaXMubGF5ZXJBbHBoYUhhY2smJihhLnN0eWxlLmZpbHRlcj0icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhSW1hZ2VMb2FkZXIoc3JjPSciK2Euc3JjKyInLCBzaXppbmdNZXRob2Q9J3NjYWxlJykiKX0sb25JbWFnZUVycm9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbWdEaXY7bnVsbCE9YS5zcmMmJih0aGlzLmltYWdlUmVsb2FkQXR0ZW1wdHMrKyx0aGlzLmltYWdlUmVsb2FkQXR0ZW1wdHM8PU9wZW5MYXllcnMuSU1BR0VfUkVMT0FEX0FUVEVNUFRTP3RoaXMuc2V0SW1nU3JjKHRoaXMubGF5ZXIuZ2V0VVJMKHRoaXMuYm91bmRzKSk6KE9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhhLCJvbEltYWdlTG9hZEVycm9yIiksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZXJyb3IiKSx0aGlzLm9uSW1hZ2VMb2FkKCkpKX0sc3RvcExvYWRpbmc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmdFbGVtZW50KHRoaXMuaW1nRGl2KTsKd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9sb2FkVGltZW91dCk7ZGVsZXRlIHRoaXMuX2xvYWRUaW1lb3V0fSxnZXRDYW52YXNDb250ZXh0OmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5DQU5WQVNfU1VQUE9SVEVEJiZ0aGlzLmltZ0RpdiYmIXRoaXMuaXNMb2FkaW5nKXtpZighdGhpcy5jYW52YXNDb250ZXh0KXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTthLndpZHRoPXRoaXMuc2l6ZS53O2EuaGVpZ2h0PXRoaXMuc2l6ZS5oO3RoaXMuY2FudmFzQ29udGV4dD1hLmdldENvbnRleHQoIjJkIik7dGhpcy5jYW52YXNDb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltZ0RpdiwwLDApfXJldHVybiB0aGlzLmNhbnZhc0NvbnRleHR9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UifSk7Ck9wZW5MYXllcnMuVGlsZS5JbWFnZS5JTUFHRT1mdW5jdGlvbigpe3ZhciBhPW5ldyBJbWFnZTthLmNsYXNzTmFtZT0ib2xUaWxlSW1hZ2UiO2EuZ2FsbGVyeUltZz0ibm8iO3JldHVybiBhfSgpO09wZW5MYXllcnMuTGF5ZXIuR3JpZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3Qse3RpbGVTaXplOm51bGwsdGlsZU9yaWdpbkNvcm5lcjoiYmwiLHRpbGVPcmlnaW46bnVsbCx0aWxlT3B0aW9uczpudWxsLHRpbGVDbGFzczpPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UsZ3JpZDpudWxsLHNpbmdsZVRpbGU6ITEscmF0aW86MS41LGJ1ZmZlcjowLHRyYW5zaXRpb25FZmZlY3Q6InJlc2l6ZSIsbnVtTG9hZGluZ1RpbGVzOjAsc2VydmVyUmVzb2x1dGlvbnM6bnVsbCxsb2FkaW5nOiExLGJhY2tCdWZmZXI6bnVsbCxncmlkUmVzb2x1dGlvbjpudWxsLGJhY2tCdWZmZXJSZXNvbHV0aW9uOm51bGwsYmFja0J1ZmZlckxvbkxhdDpudWxsLGJhY2tCdWZmZXJUaW1lcklkOm51bGwscmVtb3ZlQmFja0J1ZmZlckRlbGF5Om51bGwsY2xhc3NOYW1lOm51bGwsZ3JpZExheW91dDpudWxsLHJvd1NpZ246bnVsbCx0cmFuc2l0aW9uZW5kRXZlbnRzOlsidHJhbnNpdGlvbmVuZCIsCiJ3ZWJraXRUcmFuc2l0aW9uRW5kIiwib3RyYW5zaXRpb25lbmQiLCJvVHJhbnNpdGlvbkVuZCJdLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5ncmlkPVtdO3RoaXMuX3JlbW92ZUJhY2tCdWZmZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucmVtb3ZlQmFja0J1ZmZlcix0aGlzKTt0aGlzLmluaXRQcm9wZXJ0aWVzKCk7dGhpcy5yb3dTaWduPSJ0Ij09PXRoaXMudGlsZU9yaWdpbkNvcm5lci5zdWJzdHIoMCwxKT8xOi0xfSxpbml0UHJvcGVydGllczpmdW5jdGlvbigpe3ZvaWQgMD09PXRoaXMub3B0aW9ucy5yZW1vdmVCYWNrQnVmZmVyRGVsYXkmJih0aGlzLnJlbW92ZUJhY2tCdWZmZXJEZWxheT10aGlzLnNpbmdsZVRpbGU/MDoyNTAwKTt2b2lkIDA9PT10aGlzLm9wdGlvbnMuY2xhc3NOYW1lJiYodGhpcy5jbGFzc05hbWU9dGhpcy5zaW5nbGVUaWxlPwoib2xMYXllckdyaWRTaW5nbGVUaWxlIjoib2xMYXllckdyaWQiKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsYSk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGl2LHRoaXMuY2xhc3NOYW1lKX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQmFja0J1ZmZlcigpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVCYWNrQnVmZmVyKCk7dGhpcy5jbGVhckdyaWQoKTt0aGlzLnRpbGVTaXplPXRoaXMuZ3JpZD1udWxsO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbGVhckdyaWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmdyaWQpe2Zvcih2YXIgYT0wLGI9dGhpcy5ncmlkLmxlbmd0aDthPGI7YSsrKWZvcih2YXIgYz10aGlzLmdyaWRbYV0sZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyl0aGlzLmRlc3Ryb3lUaWxlKGNbZF0pOwp0aGlzLmdyaWQ9W107dGhpcy5ncmlkTGF5b3V0PXRoaXMuZ3JpZFJlc29sdXRpb249bnVsbH19LGFkZE9wdGlvbnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz12b2lkIDAhPT1hLnNpbmdsZVRpbGUmJmEuc2luZ2xlVGlsZSE9PXRoaXMuc2luZ2xlVGlsZTtPcGVuTGF5ZXJzLkxheWVyLkhUVFBSZXF1ZXN0LnByb3RvdHlwZS5hZGRPcHRpb25zLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1hcCYmYyYmKHRoaXMuaW5pdFByb3BlcnRpZXMoKSx0aGlzLmNsZWFyR3JpZCgpLHRoaXMudGlsZVNpemU9dGhpcy5vcHRpb25zLnRpbGVTaXplLHRoaXMuc2V0VGlsZVNpemUoKSx0aGlzLm1vdmVUbyhudWxsLCEwKSl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLkdyaWQodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7YT1PcGVuTGF5ZXJzLkxheWVyLkhUVFBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLApbYV0pO251bGwhPXRoaXMudGlsZVNpemUmJihhLnRpbGVTaXplPXRoaXMudGlsZVNpemUuY2xvbmUoKSk7YS5ncmlkPVtdO2EuZ3JpZFJlc29sdXRpb249bnVsbDthLmJhY2tCdWZmZXI9bnVsbDthLmJhY2tCdWZmZXJUaW1lcklkPW51bGw7YS5sb2FkaW5nPSExO2EubnVtTG9hZGluZ1RpbGVzPTA7cmV0dXJuIGF9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdC5wcm90b3R5cGUubW92ZVRvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPWF8fHRoaXMubWFwLmdldEV4dGVudCgpO2lmKG51bGwhPWEpe3ZhciBkPSF0aGlzLmdyaWQubGVuZ3RofHxiLGU9dGhpcy5nZXRUaWxlc0JvdW5kcygpLGY9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO3RoaXMuZ2V0U2VydmVyUmVzb2x1dGlvbihmKTtpZih0aGlzLnNpbmdsZVRpbGUpe2lmKGR8fCFjJiYhZS5jb250YWluc0JvdW5kcyhhKSliJiYicmVzaXplIiE9PXRoaXMudHJhbnNpdGlvbkVmZmVjdCYmCnRoaXMucmVtb3ZlQmFja0J1ZmZlcigpLGImJiJyZXNpemUiIT09dGhpcy50cmFuc2l0aW9uRWZmZWN0fHx0aGlzLmFwcGx5QmFja0J1ZmZlcihmKSx0aGlzLmluaXRTaW5nbGVUaWxlKGEpfWVsc2UoZD1kfHwhZS5pbnRlcnNlY3RzQm91bmRzKGEse3dvcmxkQm91bmRzOnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUmJnRoaXMubWFwLmdldE1heEV4dGVudCgpfSkpPyghYnx8InJlc2l6ZSIhPT10aGlzLnRyYW5zaXRpb25FZmZlY3QmJnRoaXMuZ3JpZFJlc29sdXRpb24hPT1mfHx0aGlzLmFwcGx5QmFja0J1ZmZlcihmKSx0aGlzLmluaXRHcmlkZGVkVGlsZXMoYSkpOnRoaXMubW92ZUdyaWRkZWRUaWxlcygpfX0sZ2V0VGlsZURhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbCxjPWEubG9uLGQ9YS5sYXQsZT10aGlzLmdyaWQubGVuZ3RoO2lmKHRoaXMubWFwJiZlKXt2YXIgZj10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7YT10aGlzLnRpbGVTaXplLnc7dmFyIGc9dGhpcy50aWxlU2l6ZS5oLApoPXRoaXMuZ3JpZFswXVswXS5ib3VuZHMsaz1oLmxlZnQsaD1oLnRvcDtpZihjPGsmJnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpdmFyIGw9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCkuZ2V0V2lkdGgoKSxtPU1hdGguY2VpbCgoay1jKS9sKSxjPWMrbCptO2M9KGMtaykvKGYqYSk7ZD0oaC1kKS8oZipnKTtmPU1hdGguZmxvb3IoYyk7az1NYXRoLmZsb29yKGQpOzA8PWsmJms8ZSYmKGU9dGhpcy5ncmlkW2tdW2ZdKSYmKGI9e3RpbGU6ZSxpOk1hdGguZmxvb3IoKGMtZikqYSksajpNYXRoLmZsb29yKChkLWspKmcpfSl9cmV0dXJuIGJ9LGRlc3Ryb3lUaWxlOmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlVGlsZU1vbml0b3JpbmdIb29rcyhhKTthLmRlc3Ryb3koKX0sZ2V0U2VydmVyUmVzb2x1dGlvbjpmdW5jdGlvbihhKXt2YXIgYj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7YT1hfHx0aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7aWYodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyYmCi0xPT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyxhKSl7dmFyIGMsZCxlLGY7Zm9yKGM9dGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucy5sZW5ndGgtMTswPD1jO2MtLSl7ZT10aGlzLnNlcnZlclJlc29sdXRpb25zW2NdO2Q9TWF0aC5hYnMoZS1hKTtpZihkPmIpYnJlYWs7Yj1kO2Y9ZX1hPWZ9cmV0dXJuIGF9LGdldFNlcnZlclpvb206ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKTtyZXR1cm4gdGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucz9PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLnNlcnZlclJlc29sdXRpb25zLGEpOnRoaXMubWFwLmdldFpvb21Gb3JSZXNvbHV0aW9uKGEpKyh0aGlzLnpvb21PZmZzZXR8fDApfSxhcHBseUJhY2tCdWZmZXI6ZnVuY3Rpb24oYSl7bnVsbCE9PXRoaXMuYmFja0J1ZmZlclRpbWVySWQmJnRoaXMucmVtb3ZlQmFja0J1ZmZlcigpO3ZhciBiPXRoaXMuYmFja0J1ZmZlcjtpZighYil7Yj0KdGhpcy5jcmVhdGVCYWNrQnVmZmVyKCk7aWYoIWIpcmV0dXJuO2E9PT10aGlzLmdyaWRSZXNvbHV0aW9uP3RoaXMuZGl2Lmluc2VydEJlZm9yZShiLHRoaXMuZGl2LmZpcnN0Q2hpbGQpOnRoaXMubWFwLmJhc2VMYXllci5kaXYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYix0aGlzLm1hcC5iYXNlTGF5ZXIuZGl2KTt0aGlzLmJhY2tCdWZmZXI9Yjt2YXIgYz10aGlzLmdyaWRbMF1bMF0uYm91bmRzO3RoaXMuYmFja0J1ZmZlckxvbkxhdD17bG9uOmMubGVmdCxsYXQ6Yy50b3B9O3RoaXMuYmFja0J1ZmZlclJlc29sdXRpb249dGhpcy5ncmlkUmVzb2x1dGlvbn1mb3IodmFyIGM9dGhpcy5iYWNrQnVmZmVyUmVzb2x1dGlvbi9hLGQ9Yi5jaGlsZE5vZGVzLGUsZj1kLmxlbmd0aC0xOzA8PWY7LS1mKWU9ZFtmXSxlLnN0eWxlLnRvcD0oYyplLl9pKmUuX2h8MCkrInB4IixlLnN0eWxlLmxlZnQ9KGMqZS5faiplLl93fDApKyJweCIsZS5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKGMqZS5fdykrCiJweCIsZS5zdHlsZS5oZWlnaHQ9TWF0aC5yb3VuZChjKmUuX2gpKyJweCI7YT10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMuYmFja0J1ZmZlckxvbkxhdCxhKTtjPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueTtiLnN0eWxlLmxlZnQ9TWF0aC5yb3VuZChhLngtdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC54KSsicHgiO2Iuc3R5bGUudG9wPU1hdGgucm91bmQoYS55LWMpKyJweCJ9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXt2YXIgYTtpZigwPHRoaXMuZ3JpZC5sZW5ndGgpe2E9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7YS5pZD10aGlzLmRpdi5pZCsiX2JiIjthLmNsYXNzTmFtZT0ib2xCYWNrQnVmZmVyIjthLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7dmFyIGI9dGhpcy5tYXA7YS5zdHlsZS56SW5kZXg9InJlc2l6ZSI9PT10aGlzLnRyYW5zaXRpb25FZmZlY3Q/dGhpcy5nZXRaSW5kZXgoKS0xOmIuWl9JTkRFWF9CQVNFLkJhc2VMYXllci0KKGIuZ2V0TnVtTGF5ZXJzKCktYi5nZXRMYXllckluZGV4KHRoaXMpKTtmb3IodmFyIGI9MCxjPXRoaXMuZ3JpZC5sZW5ndGg7YjxjO2IrKylmb3IodmFyIGQ9MCxlPXRoaXMuZ3JpZFtiXS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9dGhpcy5ncmlkW2JdW2RdLGc9dGhpcy5ncmlkW2JdW2RdLmNyZWF0ZUJhY2tCdWZmZXIoKTtnJiYoZy5faT1iLGcuX2o9ZCxnLl93PWYuc2l6ZS53LGcuX2g9Zi5zaXplLmgsZy5pZD1mLmlkKyJfYmIiLGEuYXBwZW5kQ2hpbGQoZykpfX1yZXR1cm4gYX0scmVtb3ZlQmFja0J1ZmZlcjpmdW5jdGlvbigpe2lmKHRoaXMuX3RyYW5zaXRpb25FbGVtZW50KXtmb3IodmFyIGE9dGhpcy50cmFuc2l0aW9uZW5kRXZlbnRzLmxlbmd0aC0xOzA8PWE7LS1hKU9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh0aGlzLl90cmFuc2l0aW9uRWxlbWVudCx0aGlzLnRyYW5zaXRpb25lbmRFdmVudHNbYV0sdGhpcy5fcmVtb3ZlQmFja0J1ZmZlcik7ZGVsZXRlIHRoaXMuX3RyYW5zaXRpb25FbGVtZW50fXRoaXMuYmFja0J1ZmZlciYmCih0aGlzLmJhY2tCdWZmZXIucGFyZW50Tm9kZSYmdGhpcy5iYWNrQnVmZmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5iYWNrQnVmZmVyKSx0aGlzLmJhY2tCdWZmZXJSZXNvbHV0aW9uPXRoaXMuYmFja0J1ZmZlcj1udWxsLG51bGwhPT10aGlzLmJhY2tCdWZmZXJUaW1lcklkJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLmJhY2tCdWZmZXJUaW1lcklkKSx0aGlzLmJhY2tCdWZmZXJUaW1lcklkPW51bGwpKX0sbW92ZUJ5UHg6ZnVuY3Rpb24oYSxiKXt0aGlzLnNpbmdsZVRpbGV8fHRoaXMubW92ZUdyaWRkZWRUaWxlcygpfSxzZXRUaWxlU2l6ZTpmdW5jdGlvbihhKXt0aGlzLnNpbmdsZVRpbGUmJihhPXRoaXMubWFwLmdldFNpemUoKSxhLmg9cGFyc2VJbnQoYS5oKnRoaXMucmF0aW8sMTApLGEudz1wYXJzZUludChhLncqdGhpcy5yYXRpbywxMCkpO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLnNldFRpbGVTaXplLmFwcGx5KHRoaXMsW2FdKX0sZ2V0VGlsZXNCb3VuZHM6ZnVuY3Rpb24oKXt2YXIgYT0KbnVsbCxiPXRoaXMuZ3JpZC5sZW5ndGg7aWYoYil2YXIgYT10aGlzLmdyaWRbYi0xXVswXS5ib3VuZHMsYj10aGlzLmdyaWRbMF0ubGVuZ3RoKmEuZ2V0V2lkdGgoKSxjPXRoaXMuZ3JpZC5sZW5ndGgqYS5nZXRIZWlnaHQoKSxhPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLmxlZnQsYS5ib3R0b20sYS5sZWZ0K2IsYS5ib3R0b20rYyk7cmV0dXJuIGF9LGluaXRTaW5nbGVUaWxlOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmV0aWxlIik7dmFyIGI9YS5nZXRDZW50ZXJMb25MYXQoKSxjPWEuZ2V0V2lkdGgoKSp0aGlzLnJhdGlvO2E9YS5nZXRIZWlnaHQoKSp0aGlzLnJhdGlvO2I9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIubG9uLWMvMixiLmxhdC1hLzIsYi5sb24rYy8yLGIubGF0K2EvMik7Yz10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh7bG9uOmIubGVmdCxsYXQ6Yi50b3B9KTt0aGlzLmdyaWQubGVuZ3RofHwodGhpcy5ncmlkWzBdPVtdKTsoYT10aGlzLmdyaWRbMF1bMF0pPwphLm1vdmVUbyhiLGMpOihhPXRoaXMuYWRkVGlsZShiLGMpLHRoaXMuYWRkVGlsZU1vbml0b3JpbmdIb29rcyhhKSxhLmRyYXcoKSx0aGlzLmdyaWRbMF1bMF09YSk7dGhpcy5yZW1vdmVFeGNlc3NUaWxlcygxLDEpO3RoaXMuZ3JpZFJlc29sdXRpb249dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCl9LGNhbGN1bGF0ZUdyaWRMYXlvdXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMqdGhpcy50aWxlU2l6ZS53O2MqPXRoaXMudGlsZVNpemUuaDt2YXIgZT1NYXRoLmZsb29yKChhLmxlZnQtYi5sb24pL2QpLXRoaXMuYnVmZmVyLGY9dGhpcy5yb3dTaWduO2E9TWF0aFt+Zj8iZmxvb3IiOiJjZWlsIl0oZiooYi5sYXQtYS50b3ArYykvYyktdGhpcy5idWZmZXIqZjtyZXR1cm57dGlsZWxvbjpkLHRpbGVsYXQ6YyxzdGFydGNvbDplLHN0YXJ0cm93OmF9fSxnZXRUaWxlT3JpZ2luOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50aWxlT3JpZ2luO2lmKCFhKXZhciBhPXRoaXMuZ2V0TWF4RXh0ZW50KCksCmI9e3RsOlsibGVmdCIsInRvcCJdLHRyOlsicmlnaHQiLCJ0b3AiXSxibDpbImxlZnQiLCJib3R0b20iXSxicjpbInJpZ2h0IiwiYm90dG9tIl19W3RoaXMudGlsZU9yaWdpbkNvcm5lcl0sYT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYVtiWzBdXSxhW2JbMV1dKTtyZXR1cm4gYX0sZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0VGlsZU9yaWdpbigpLGQ9dGhpcy5ncmlkTGF5b3V0LGU9ZC50aWxlbG9uLGY9ZC50aWxlbGF0LGc9ZC5zdGFydGNvbCxkPWQuc3RhcnRyb3csaD10aGlzLnJvd1NpZ247cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhjLmxvbisoZytiKSplLGMubGF0LShkK2EqaCkqZipoLGMubG9uKyhnK2IrMSkqZSxjLmxhdC0oZCsoYS0xKSpoKSpmKmgpfSxpbml0R3JpZGRlZFRpbGVzOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmV0aWxlIik7dmFyIGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9dGhpcy5nZXRUaWxlT3JpZ2luKCksCmQ9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGU9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCksZj1kL2UsZD10aGlzLnRpbGVTaXplLncvZixmPXRoaXMudGlsZVNpemUuaC9mLGc9TWF0aC5jZWlsKGIuaC9mKSsyKnRoaXMuYnVmZmVyKzEsYj1NYXRoLmNlaWwoYi53L2QpKzIqdGhpcy5idWZmZXIrMTt0aGlzLmdyaWRMYXlvdXQ9ZT10aGlzLmNhbGN1bGF0ZUdyaWRMYXlvdXQoYSxjLGUpO3ZhciBjPWUudGlsZWxvbixoPWUudGlsZWxhdCxlPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueCxrPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSxsPXRoaXMuZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleCgwLDApLG09dGhpcy5tYXAuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQobmV3IE9wZW5MYXllcnMuTG9uTGF0KGwubGVmdCxsLnRvcCkpO20ueD1NYXRoLnJvdW5kKG0ueCktZTttLnk9TWF0aC5yb3VuZChtLnkpLWs7dmFyIGU9W10saz10aGlzLm1hcC5nZXRDZW50ZXIoKSwKcD0wO2Rve3ZhciBuPXRoaXMuZ3JpZFtwXTtufHwobj1bXSx0aGlzLmdyaWQucHVzaChuKSk7dmFyIHE9MDtkb3t2YXIgbD10aGlzLmdldFRpbGVCb3VuZHNGb3JHcmlkSW5kZXgocCxxKSxyPW0uY2xvbmUoKTtyLngrPXEqTWF0aC5yb3VuZChkKTtyLnkrPXAqTWF0aC5yb3VuZChmKTt2YXIgcz1uW3FdO3M/cy5tb3ZlVG8obCxyLCExKToocz10aGlzLmFkZFRpbGUobCxyKSx0aGlzLmFkZFRpbGVNb25pdG9yaW5nSG9va3Mocyksbi5wdXNoKHMpKTtyPWwuZ2V0Q2VudGVyTG9uTGF0KCk7ZS5wdXNoKHt0aWxlOnMsZGlzdGFuY2U6TWF0aC5wb3coci5sb24tay5sb24sMikrTWF0aC5wb3coci5sYXQtay5sYXQsMil9KTtxKz0xfXdoaWxlKGwucmlnaHQ8PWEucmlnaHQrYyp0aGlzLmJ1ZmZlcnx8cTxiKTtwKz0xfXdoaWxlKGwuYm90dG9tPj1hLmJvdHRvbS1oKnRoaXMuYnVmZmVyfHxwPGcpO3RoaXMucmVtb3ZlRXhjZXNzVGlsZXMocCxxKTt0aGlzLmdyaWRSZXNvbHV0aW9uPWQ9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCk7CmUuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLmRpc3RhbmNlLWIuZGlzdGFuY2V9KTthPTA7Zm9yKGQ9ZS5sZW5ndGg7YTxkOysrYSllW2FdLnRpbGUuZHJhdygpfSxnZXRNYXhFeHRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXhFeHRlbnR9LGFkZFRpbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgdGhpcy50aWxlQ2xhc3ModGhpcyxiLGEsbnVsbCx0aGlzLnRpbGVTaXplLHRoaXMudGlsZU9wdGlvbnMpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYWRkdGlsZSIse3RpbGU6Y30pO3JldHVybiBjfSxhZGRUaWxlTW9uaXRvcmluZ0hvb2tzOmZ1bmN0aW9uKGEpe2Eub25Mb2FkU3RhcnQ9ZnVuY3Rpb24oKXshMT09PXRoaXMubG9hZGluZyYmKHRoaXMubG9hZGluZz0hMCx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIpKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInRpbGVsb2Fkc3RhcnQiLHt0aWxlOmF9KTt0aGlzLm51bUxvYWRpbmdUaWxlcysrOwohdGhpcy5zaW5nbGVUaWxlJiYodGhpcy5iYWNrQnVmZmVyJiZ0aGlzLmdyaWRSZXNvbHV0aW9uPT09dGhpcy5iYWNrQnVmZmVyUmVzb2x1dGlvbikmJk9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhhLmdldFRpbGUoKSwib2xUaWxlUmVwbGFjaW5nIil9O2Eub25Mb2FkRW5kPWZ1bmN0aW9uKGIpe3RoaXMubnVtTG9hZGluZ1RpbGVzLS07Yj0idW5sb2FkIj09PWIudHlwZTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInRpbGVsb2FkZWQiLHt0aWxlOmEsYWJvcnRlZDpifSk7aWYoIXRoaXMuc2luZ2xlVGlsZSYmIWImJnRoaXMuYmFja0J1ZmZlciYmdGhpcy5ncmlkUmVzb2x1dGlvbj09PXRoaXMuYmFja0J1ZmZlclJlc29sdXRpb24pe3ZhciBjPWEuZ2V0VGlsZSgpO2lmKCJub25lIj09PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShjLCJkaXNwbGF5Iikpe3ZhciBkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQrIl9iYiIpO2QmJmQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKX1PcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoYywKIm9sVGlsZVJlcGxhY2luZyIpfWlmKDA9PT10aGlzLm51bUxvYWRpbmdUaWxlcyl7aWYodGhpcy5iYWNrQnVmZmVyKWlmKDA9PT10aGlzLmJhY2tCdWZmZXIuY2hpbGROb2Rlcy5sZW5ndGgpdGhpcy5yZW1vdmVCYWNrQnVmZmVyKCk7ZWxzZXt0aGlzLl90cmFuc2l0aW9uRWxlbWVudD1iP3RoaXMuZGl2Lmxhc3RDaGlsZDphLmltZ0RpdjtiPXRoaXMudHJhbnNpdGlvbmVuZEV2ZW50cztmb3IoYz1iLmxlbmd0aC0xOzA8PWM7LS1jKU9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh0aGlzLl90cmFuc2l0aW9uRWxlbWVudCxiW2NdLHRoaXMuX3JlbW92ZUJhY2tCdWZmZXIpO3RoaXMuYmFja0J1ZmZlclRpbWVySWQ9d2luZG93LnNldFRpbWVvdXQodGhpcy5fcmVtb3ZlQmFja0J1ZmZlcix0aGlzLnJlbW92ZUJhY2tCdWZmZXJEZWxheSl9dGhpcy5sb2FkaW5nPSExO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZGVuZCIpfX07YS5vbkxvYWRFcnJvcj1mdW5jdGlvbigpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidGlsZWVycm9yIiwKe3RpbGU6YX0pfTthLmV2ZW50cy5vbih7bG9hZHN0YXJ0OmEub25Mb2FkU3RhcnQsbG9hZGVuZDphLm9uTG9hZEVuZCx1bmxvYWQ6YS5vbkxvYWRFbmQsbG9hZGVycm9yOmEub25Mb2FkRXJyb3Isc2NvcGU6dGhpc30pfSxyZW1vdmVUaWxlTW9uaXRvcmluZ0hvb2tzOmZ1bmN0aW9uKGEpe2EudW5sb2FkKCk7YS5ldmVudHMudW4oe2xvYWRzdGFydDphLm9uTG9hZFN0YXJ0LGxvYWRlbmQ6YS5vbkxvYWRFbmQsdW5sb2FkOmEub25Mb2FkRW5kLGxvYWRlcnJvcjphLm9uTG9hZEVycm9yLHNjb3BlOnRoaXN9KX0sbW92ZUdyaWRkZWRUaWxlczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmJ1ZmZlcisxOzspe3ZhciBiPXRoaXMuZ3JpZFswXVswXSxjPWIucG9zaXRpb24ueCt0aGlzLm1hcC5sYXllckNvbnRhaW5lck9yaWdpblB4LngsYj1iLnBvc2l0aW9uLnkrdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC55LGQ9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCkvdGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLApkPXt3Ok1hdGgucm91bmQodGhpcy50aWxlU2l6ZS53KmQpLGg6TWF0aC5yb3VuZCh0aGlzLnRpbGVTaXplLmgqZCl9O2lmKGM+LWQudyooYS0xKSl0aGlzLnNoaWZ0Q29sdW1uKCEwLGQpO2Vsc2UgaWYoYzwtZC53KmEpdGhpcy5zaGlmdENvbHVtbighMSxkKTtlbHNlIGlmKGI+LWQuaCooYS0xKSl0aGlzLnNoaWZ0Um93KCEwLGQpO2Vsc2UgaWYoYjwtZC5oKmEpdGhpcy5zaGlmdFJvdyghMSxkKTtlbHNlIGJyZWFrfX0sc2hpZnRSb3c6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdyaWQsZD1hPzA6Yy5sZW5ndGgtMSxlPWE/LTE6MTt0aGlzLmdyaWRMYXlvdXQuc3RhcnRyb3crPWUqdGhpcy5yb3dTaWduO2Zvcih2YXIgZj1jW2RdLGc9Y1thPyJwb3AiOiJzaGlmdCJdKCksaD0wLGs9Zy5sZW5ndGg7aDxrO2grKyl7dmFyIGw9Z1toXSxtPWZbaF0ucG9zaXRpb24uY2xvbmUoKTttLnkrPWIuaCplO2wubW92ZVRvKHRoaXMuZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleChkLGgpLG0pfWNbYT8KInVuc2hpZnQiOiJwdXNoIl0oZyl9LHNoaWZ0Q29sdW1uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5ncmlkLGQ9YT8wOmNbMF0ubGVuZ3RoLTEsZT1hPy0xOjE7dGhpcy5ncmlkTGF5b3V0LnN0YXJ0Y29sKz1lO2Zvcih2YXIgZj0wLGc9Yy5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9Y1tmXSxrPWhbZF0ucG9zaXRpb24uY2xvbmUoKSxsPWhbYT8icG9wIjoic2hpZnQiXSgpO2sueCs9Yi53KmU7bC5tb3ZlVG8odGhpcy5nZXRUaWxlQm91bmRzRm9yR3JpZEluZGV4KGYsZCksayk7aFthPyJ1bnNoaWZ0IjoicHVzaCJdKGwpfX0scmVtb3ZlRXhjZXNzVGlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZDt0aGlzLmdyaWQubGVuZ3RoPmE7KXt2YXIgZT10aGlzLmdyaWQucG9wKCk7Yz0wO2ZvcihkPWUubGVuZ3RoO2M8ZDtjKyspe3ZhciBmPWVbY107dGhpcy5kZXN0cm95VGlsZShmKX19Yz0wO2ZvcihkPXRoaXMuZ3JpZC5sZW5ndGg7YzxkO2MrKylmb3IoO3RoaXMuZ3JpZFtjXS5sZW5ndGg+CmI7KWU9dGhpcy5ncmlkW2NdLGY9ZS5wb3AoKSx0aGlzLmRlc3Ryb3lUaWxlKGYpfSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe3RoaXMuc2luZ2xlVGlsZSYmKHRoaXMuY2xlYXJHcmlkKCksdGhpcy5zZXRUaWxlU2l6ZSgpKX0sZ2V0VGlsZUJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1heEV4dGVudCxjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9Yyp0aGlzLnRpbGVTaXplLncsYz1jKnRoaXMudGlsZVNpemUuaCxlPXRoaXMuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1iLmxlZnQrZCpNYXRoLmZsb29yKChlLmxvbi1iLmxlZnQpL2QpO2I9Yi5ib3R0b20rYypNYXRoLmZsb29yKChlLmxhdC1iLmJvdHRvbSkvYyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLGIsYStkLGIrYyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuR3JpZCJ9KTtPcGVuTGF5ZXJzLkxheWVyLlhZWj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuR3JpZCx7aXNCYXNlTGF5ZXI6ITAsc3BoZXJpY2FsTWVyY2F0b3I6ITEsem9vbU9mZnNldDowLHNlcnZlclJlc29sdXRpb25zOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7aWYoYyYmYy5zcGhlcmljYWxNZXJjYXRvcnx8dGhpcy5zcGhlcmljYWxNZXJjYXRvciljPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe3Byb2plY3Rpb246IkVQU0c6OTAwOTEzIixudW1ab29tTGV2ZWxzOjE5fSxjKTtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYXx8dGhpcy5uYW1lLGJ8fHRoaXMudXJsLHt9LGNdKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuWFlaKHRoaXMubmFtZSx0aGlzLnVybCx0aGlzLmdldE9wdGlvbnMoKSkpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcywKW2FdKX0sZ2V0VVJMOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRYWVooYSk7dmFyIGI9dGhpcy51cmw7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYikmJihiPXRoaXMuc2VsZWN0VXJsKCIiK2EueCthLnkrYS56LGIpKTtyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KGIsYSl9LGdldFhZWjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKSxjPU1hdGgucm91bmQoKGEubGVmdC10aGlzLm1heEV4dGVudC5sZWZ0KS8oYip0aGlzLnRpbGVTaXplLncpKTthPU1hdGgucm91bmQoKHRoaXMubWF4RXh0ZW50LnRvcC1hLnRvcCkvKGIqdGhpcy50aWxlU2l6ZS5oKSk7Yj10aGlzLmdldFNlcnZlclpvb20oKTtpZih0aGlzLndyYXBEYXRlTGluZSl2YXIgZD1NYXRoLnBvdygyLGIpLGM9KGMlZCtkKSVkO3JldHVybnt4OmMseTphLHo6Yn19LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLAphcmd1bWVudHMpO3RoaXMudGlsZU9yaWdpbnx8KHRoaXMudGlsZU9yaWdpbj1uZXcgT3BlbkxheWVycy5Mb25MYXQodGhpcy5tYXhFeHRlbnQubGVmdCx0aGlzLm1heEV4dGVudC5ib3R0b20pKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5YWVoifSk7T3BlbkxheWVycy5MYXllci5PU009T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLlhZWix7bmFtZToiT3BlblN0cmVldE1hcCIsdXJsOlsiaHR0cDovL2EudGlsZS5vcGVuc3RyZWV0bWFwLm9yZy8ke3p9LyR7eH0vJHt5fS5wbmciLCJodHRwOi8vYi50aWxlLm9wZW5zdHJlZXRtYXAub3JnLyR7en0vJHt4fS8ke3l9LnBuZyIsImh0dHA6Ly9jLnRpbGUub3BlbnN0cmVldG1hcC5vcmcvJHt6fS8ke3h9LyR7eX0ucG5nIl0sYXR0cmlidXRpb246IiZjb3B5OyA8YSBocmVmPSdodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodCc+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzIixzcGhlcmljYWxNZXJjYXRvcjohMCx3cmFwRGF0ZUxpbmU6ITAsdGlsZU9wdGlvbnM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy50aWxlT3B0aW9ucz0KT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7Y3Jvc3NPcmlnaW5LZXl3b3JkOiJhbm9ueW1vdXMifSx0aGlzLm9wdGlvbnMmJnRoaXMub3B0aW9ucy50aWxlT3B0aW9ucyl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLk9TTSh0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLk9TTSJ9KTtPcGVuTGF5ZXJzLlJlbmRlcmVyPU9wZW5MYXllcnMuQ2xhc3Moe2NvbnRhaW5lcjpudWxsLHJvb3Q6bnVsbCxleHRlbnQ6bnVsbCxsb2NrZWQ6ITEsc2l6ZTpudWxsLHJlc29sdXRpb246bnVsbCxtYXA6bnVsbCxmZWF0dXJlRHg6MCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7dGhpcy5jb250YWluZXI9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXA9dGhpcy5yZXNvbHV0aW9uPXRoaXMuc2l6ZT10aGlzLmV4dGVudD10aGlzLmNvbnRhaW5lcj1udWxsfSxzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sc2V0RXh0ZW50OmZ1bmN0aW9uKGEsYil7dGhpcy5leHRlbnQ9YS5jbG9uZSgpO2lmKHRoaXMubWFwLmJhc2VMYXllciYmdGhpcy5tYXAuYmFzZUxheWVyLndyYXBEYXRlTGluZSl7dmFyIGM9YS5nZXRXaWR0aCgpL3RoaXMubWFwLmdldEV4dGVudCgpLmdldFdpZHRoKCk7CmE9YS5zY2FsZSgxL2MpO3RoaXMuZXh0ZW50PWEud3JhcERhdGVMaW5lKHRoaXMubWFwLmdldE1heEV4dGVudCgpKS5zY2FsZShjKX1iJiYodGhpcy5yZXNvbHV0aW9uPW51bGwpO3JldHVybiEwfSxzZXRTaXplOmZ1bmN0aW9uKGEpe3RoaXMuc2l6ZT1hLmNsb25lKCk7dGhpcy5yZXNvbHV0aW9uPW51bGx9LGdldFJlc29sdXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXNvbHV0aW9uPXRoaXMucmVzb2x1dGlvbnx8dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpfSxkcmF3RmVhdHVyZTpmdW5jdGlvbihhLGIpe251bGw9PWImJihiPWEuc3R5bGUpO2lmKGEuZ2VvbWV0cnkpe3ZhciBjPWEuZ2VvbWV0cnkuZ2V0Qm91bmRzKCk7aWYoYyl7dmFyIGQ7dGhpcy5tYXAuYmFzZUxheWVyJiZ0aGlzLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lJiYoZD10aGlzLm1hcC5nZXRNYXhFeHRlbnQoKSk7Yy5pbnRlcnNlY3RzQm91bmRzKHRoaXMuZXh0ZW50LHt3b3JsZEJvdW5kczpkfSk/dGhpcy5jYWxjdWxhdGVGZWF0dXJlRHgoYywKZCk6Yj17ZGlzcGxheToibm9uZSJ9O2M9dGhpcy5kcmF3R2VvbWV0cnkoYS5nZW9tZXRyeSxiLGEuaWQpO2lmKCJub25lIiE9Yi5kaXNwbGF5JiZiLmxhYmVsJiYhMSE9PWMpe2Q9YS5nZW9tZXRyeS5nZXRDZW50cm9pZCgpO2lmKGIubGFiZWxYT2Zmc2V0fHxiLmxhYmVsWU9mZnNldCl7dmFyIGU9aXNOYU4oYi5sYWJlbFhPZmZzZXQpPzA6Yi5sYWJlbFhPZmZzZXQsZj1pc05hTihiLmxhYmVsWU9mZnNldCk/MDpiLmxhYmVsWU9mZnNldCxnPXRoaXMuZ2V0UmVzb2x1dGlvbigpO2QubW92ZShlKmcsZipnKX10aGlzLmRyYXdUZXh0KGEuaWQsYixkKX1lbHNlIHRoaXMucmVtb3ZlVGV4dChhLmlkKTtyZXR1cm4gY319fSxjYWxjdWxhdGVGZWF0dXJlRHg6ZnVuY3Rpb24oYSxiKXt0aGlzLmZlYXR1cmVEeD0wO2lmKGIpe3ZhciBjPWIuZ2V0V2lkdGgoKTt0aGlzLmZlYXR1cmVEeD1NYXRoLnJvdW5kKCgoYS5sZWZ0K2EucmlnaHQpLzItKHRoaXMuZXh0ZW50LmxlZnQrdGhpcy5leHRlbnQucmlnaHQpLwoyKS9jKSpjfX0sZHJhd0dlb21ldHJ5OmZ1bmN0aW9uKGEsYixjKXt9LGRyYXdUZXh0OmZ1bmN0aW9uKGEsYixjKXt9LHJlbW92ZVRleHQ6ZnVuY3Rpb24oYSl7fSxjbGVhcjpmdW5jdGlvbigpe30sZ2V0RmVhdHVyZUlkRnJvbUV2ZW50OmZ1bmN0aW9uKGEpe30sZXJhc2VGZWF0dXJlczpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YzsrK2Ipe3ZhciBkPWFbYl07dGhpcy5lcmFzZUdlb21ldHJ5KGQuZ2VvbWV0cnksZC5pZCk7dGhpcy5yZW1vdmVUZXh0KGQuaWQpfX0sZXJhc2VHZW9tZXRyeTpmdW5jdGlvbihhLGIpe30sbW92ZVJvb3Q6ZnVuY3Rpb24oYSl7fSxnZXRSZW5kZXJMYXllcklkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGFpbmVyLmlkfSxhcHBseURlZmF1bHRTeW1ib2xpemVyOmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sT3BlbkxheWVycy5SZW5kZXJlci5kZWZhdWx0U3ltYm9saXplcik7CiExPT09YS5zdHJva2UmJihkZWxldGUgYi5zdHJva2VXaWR0aCxkZWxldGUgYi5zdHJva2VDb2xvcik7ITE9PT1hLmZpbGwmJmRlbGV0ZSBiLmZpbGxDb2xvcjtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGIsYSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUmVuZGVyZXIifSk7T3BlbkxheWVycy5SZW5kZXJlci5kZWZhdWx0U3ltYm9saXplcj17ZmlsbENvbG9yOiIjMDAwMDAwIixzdHJva2VDb2xvcjoiIzAwMDAwMCIsc3Ryb2tlV2lkdGg6MixmaWxsT3BhY2l0eToxLHN0cm9rZU9wYWNpdHk6MSxwb2ludFJhZGl1czowLGxhYmVsQWxpZ246ImNtIn07Ck9wZW5MYXllcnMuUmVuZGVyZXIuc3ltYm9sPXtzdGFyOlszNTAsNzUsMzc5LDE2MSw0NjksMTYxLDM5NywyMTUsNDIzLDMwMSwzNTAsMjUwLDI3NywzMDEsMzAzLDIxNSwyMzEsMTYxLDMyMSwxNjEsMzUwLDc1XSxjcm9zczpbNCwwLDYsMCw2LDQsMTAsNCwxMCw2LDYsNiw2LDEwLDQsMTAsNCw2LDAsNiwwLDQsNCw0LDQsMF0seDpbMCwwLDI1LDAsNTAsMzUsNzUsMCwxMDAsMCw2NSw1MCwxMDAsMTAwLDc1LDEwMCw1MCw2NSwyNSwxMDAsMCwxMDAsMzUsNTAsMCwwXSxzcXVhcmU6WzAsMCwwLDEsMSwxLDEsMCwwLDBdLHRyaWFuZ2xlOlswLDEwLDEwLDEwLDUsMCwwLDEwXX07T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlJlbmRlcmVyLHtoaXREZXRlY3Rpb246ITAsaGl0T3ZlcmZsb3c6MCxjYW52YXM6bnVsbCxmZWF0dXJlczpudWxsLHBlbmRpbmdSZWRyYXc6ITEsY2FjaGVkU3ltYm9sQm91bmRzOnt9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnJvb3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5yb290KTt0aGlzLmNhbnZhcz10aGlzLnJvb3QuZ2V0Q29udGV4dCgiMmQiKTt0aGlzLmZlYXR1cmVzPXt9O3RoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5oaXRDYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIiksdGhpcy5oaXRDb250ZXh0PXRoaXMuaGl0Q2FudmFzLmdldENvbnRleHQoIjJkIikpfSwKc2V0RXh0ZW50OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5SZW5kZXJlci5wcm90b3R5cGUuc2V0RXh0ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4hMX0sZXJhc2VHZW9tZXRyeTpmdW5jdGlvbihhLGIpe3RoaXMuZXJhc2VGZWF0dXJlcyh0aGlzLmZlYXR1cmVzW2JdWzBdKX0sc3VwcG9ydGVkOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuQ0FOVkFTX1NVUFBPUlRFRH0sc2V0U2l6ZTpmdW5jdGlvbihhKXt0aGlzLnNpemU9YS5jbG9uZSgpO3ZhciBiPXRoaXMucm9vdDtiLnN0eWxlLndpZHRoPWEudysicHgiO2Iuc3R5bGUuaGVpZ2h0PWEuaCsicHgiO2Iud2lkdGg9YS53O2IuaGVpZ2h0PWEuaDt0aGlzLnJlc29sdXRpb249bnVsbDt0aGlzLmhpdERldGVjdGlvbiYmKGI9dGhpcy5oaXRDYW52YXMsYi5zdHlsZS53aWR0aD1hLncrInB4IixiLnN0eWxlLmhlaWdodD1hLmgrInB4IixiLndpZHRoPWEudyxiLmhlaWdodD1hLmgpfSxkcmF3RmVhdHVyZTpmdW5jdGlvbihhLApiKXt2YXIgYztpZihhLmdlb21ldHJ5KXtiPXRoaXMuYXBwbHlEZWZhdWx0U3ltYm9saXplcihifHxhLnN0eWxlKTtjPWEuZ2VvbWV0cnkuZ2V0Qm91bmRzKCk7dmFyIGQ7dGhpcy5tYXAuYmFzZUxheWVyJiZ0aGlzLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lJiYoZD10aGlzLm1hcC5nZXRNYXhFeHRlbnQoKSk7ZD1jJiZjLmludGVyc2VjdHNCb3VuZHModGhpcy5leHRlbnQse3dvcmxkQm91bmRzOmR9KTsoYz0ibm9uZSIhPT1iLmRpc3BsYXkmJiEhYyYmZCk/dGhpcy5mZWF0dXJlc1thLmlkXT1bYSxiXTpkZWxldGUgdGhpcy5mZWF0dXJlc1thLmlkXTt0aGlzLnBlbmRpbmdSZWRyYXc9ITB9dGhpcy5wZW5kaW5nUmVkcmF3JiYhdGhpcy5sb2NrZWQmJih0aGlzLnJlZHJhdygpLHRoaXMucGVuZGluZ1JlZHJhdz0hMSk7cmV0dXJuIGN9LGRyYXdHZW9tZXRyeTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5DTEFTU19OQU1FO2lmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24iPT0KZHx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCI9PWR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyI9PWR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI9PWQpZm9yKGQ9MDtkPGEuY29tcG9uZW50cy5sZW5ndGg7ZCsrKXRoaXMuZHJhd0dlb21ldHJ5KGEuY29tcG9uZW50c1tkXSxiLGMpO2Vsc2Ugc3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6dGhpcy5kcmF3UG9pbnQoYSxiLGMpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyI6dGhpcy5kcmF3TGluZVN0cmluZyhhLGIsYyk7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIjp0aGlzLmRyYXdMaW5lYXJSaW5nKGEsYixjKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iOnRoaXMuZHJhd1BvbHlnb24oYSxiLGMpfX0sZHJhd0V4dGVybmFsR3JhcGhpYzpmdW5jdGlvbihhLApiLGMpe3ZhciBkPW5ldyBJbWFnZSxlPWIudGl0bGV8fGIuZ3JhcGhpY1RpdGxlO2UmJihkLnRpdGxlPWUpO3ZhciBmPWIuZ3JhcGhpY1dpZHRofHxiLmdyYXBoaWNIZWlnaHQsZz1iLmdyYXBoaWNIZWlnaHR8fGIuZ3JhcGhpY1dpZHRoLGY9Zj9mOjIqYi5wb2ludFJhZGl1cyxnPWc/ZzoyKmIucG9pbnRSYWRpdXMsaD12b2lkIDAhPWIuZ3JhcGhpY1hPZmZzZXQ/Yi5ncmFwaGljWE9mZnNldDotKDAuNSpmKSxrPXZvaWQgMCE9Yi5ncmFwaGljWU9mZnNldD9iLmdyYXBoaWNZT2Zmc2V0Oi0oMC41KmcpLGw9Yi5ncmFwaGljT3BhY2l0eXx8Yi5maWxsT3BhY2l0eTtkLm9ubG9hZD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXtpZih0aGlzLmZlYXR1cmVzW2NdKXt2YXIgYj10aGlzLmdldExvY2FsWFkoYSksZT1iWzBdLGI9YlsxXTtpZighaXNOYU4oZSkmJiFpc05hTihiKSl7dmFyIGU9ZStofDAsYj1iK2t8MCxuPXRoaXMuY2FudmFzO24uZ2xvYmFsQWxwaGE9bDt2YXIgcT0KT3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuZHJhd0ltYWdlU2NhbGVGYWN0b3J8fChPcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcy5kcmF3SW1hZ2VTY2FsZUZhY3Rvcj0vYW5kcm9pZCAyLjEvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKT8zMjAvd2luZG93LnNjcmVlbi53aWR0aDoxKTtuLmRyYXdJbWFnZShkLGUqcSxiKnEsZipxLGcqcSk7dGhpcy5oaXREZXRlY3Rpb24mJih0aGlzLnNldEhpdENvbnRleHRTdHlsZSgiZmlsbCIsYyksdGhpcy5oaXRDb250ZXh0LmZpbGxSZWN0KGUsYixmLGcpKX19fSx0aGlzKTtkLnNyYz1iLmV4dGVybmFsR3JhcGhpY30sZHJhd05hbWVkU3ltYm9sOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZztmPU1hdGguUEkvMTgwO3ZhciBoPU9wZW5MYXllcnMuUmVuZGVyZXIuc3ltYm9sW2IuZ3JhcGhpY05hbWVdO2lmKCFoKXRocm93IEVycm9yKGIuZ3JhcGhpY05hbWUrIiBpcyBub3QgYSB2YWxpZCBzeW1ib2wgbmFtZSIpOwppZighKCFoLmxlbmd0aHx8Mj5oLmxlbmd0aHx8KGE9dGhpcy5nZXRMb2NhbFhZKGEpLGU9YVswXSxnPWFbMV0saXNOYU4oZSl8fGlzTmFOKGcpKSkpe3RoaXMuY2FudmFzLmxpbmVDYXA9InJvdW5kIjt0aGlzLmNhbnZhcy5saW5lSm9pbj0icm91bmQiO3RoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5oaXRDb250ZXh0LmxpbmVDYXA9InJvdW5kIix0aGlzLmhpdENvbnRleHQubGluZUpvaW49InJvdW5kIik7aWYoYi5ncmFwaGljTmFtZSBpbiB0aGlzLmNhY2hlZFN5bWJvbEJvdW5kcylkPXRoaXMuY2FjaGVkU3ltYm9sQm91bmRzW2IuZ3JhcGhpY05hbWVdO2Vsc2V7ZD1uZXcgT3BlbkxheWVycy5Cb3VuZHM7Zm9yKGE9MDthPGgubGVuZ3RoO2ErPTIpZC5leHRlbmQobmV3IE9wZW5MYXllcnMuTG9uTGF0KGhbYV0saFthKzFdKSk7dGhpcy5jYWNoZWRTeW1ib2xCb3VuZHNbYi5ncmFwaGljTmFtZV09ZH10aGlzLmNhbnZhcy5zYXZlKCk7dGhpcy5oaXREZXRlY3Rpb24mJnRoaXMuaGl0Q29udGV4dC5zYXZlKCk7CnRoaXMuY2FudmFzLnRyYW5zbGF0ZShlLGcpO3RoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQudHJhbnNsYXRlKGUsZyk7YT1mKmIucm90YXRpb247aXNOYU4oYSl8fCh0aGlzLmNhbnZhcy5yb3RhdGUoYSksdGhpcy5oaXREZXRlY3Rpb24mJnRoaXMuaGl0Q29udGV4dC5yb3RhdGUoYSkpO2Y9MipiLnBvaW50UmFkaXVzL01hdGgubWF4KGQuZ2V0V2lkdGgoKSxkLmdldEhlaWdodCgpKTt0aGlzLmNhbnZhcy5zY2FsZShmLGYpO3RoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQuc2NhbGUoZixmKTthPWQuZ2V0Q2VudGVyTG9uTGF0KCkubG9uO2Q9ZC5nZXRDZW50ZXJMb25MYXQoKS5sYXQ7dGhpcy5jYW52YXMudHJhbnNsYXRlKC1hLC1kKTt0aGlzLmhpdERldGVjdGlvbiYmdGhpcy5oaXRDb250ZXh0LnRyYW5zbGF0ZSgtYSwtZCk7Zz1iLnN0cm9rZVdpZHRoO2Iuc3Ryb2tlV2lkdGg9Zy9mO2lmKCExIT09Yi5maWxsKXt0aGlzLnNldENhbnZhc1N0eWxlKCJmaWxsIiwKYik7dGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7Zm9yKGE9MDthPGgubGVuZ3RoO2ErPTIpZD1oW2FdLGU9aFthKzFdLDA9PWEmJnRoaXMuY2FudmFzLm1vdmVUbyhkLGUpLHRoaXMuY2FudmFzLmxpbmVUbyhkLGUpO3RoaXMuY2FudmFzLmNsb3NlUGF0aCgpO3RoaXMuY2FudmFzLmZpbGwoKTtpZih0aGlzLmhpdERldGVjdGlvbil7dGhpcy5zZXRIaXRDb250ZXh0U3R5bGUoImZpbGwiLGMsYik7dGhpcy5oaXRDb250ZXh0LmJlZ2luUGF0aCgpO2ZvcihhPTA7YTxoLmxlbmd0aDthKz0yKWQ9aFthXSxlPWhbYSsxXSwwPT1hJiZ0aGlzLmNhbnZhcy5tb3ZlVG8oZCxlKSx0aGlzLmhpdENvbnRleHQubGluZVRvKGQsZSk7dGhpcy5oaXRDb250ZXh0LmNsb3NlUGF0aCgpO3RoaXMuaGl0Q29udGV4dC5maWxsKCl9fWlmKCExIT09Yi5zdHJva2Upe3RoaXMuc2V0Q2FudmFzU3R5bGUoInN0cm9rZSIsYik7dGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7Zm9yKGE9MDthPGgubGVuZ3RoO2ErPTIpZD1oW2FdLAplPWhbYSsxXSwwPT1hJiZ0aGlzLmNhbnZhcy5tb3ZlVG8oZCxlKSx0aGlzLmNhbnZhcy5saW5lVG8oZCxlKTt0aGlzLmNhbnZhcy5jbG9zZVBhdGgoKTt0aGlzLmNhbnZhcy5zdHJva2UoKTtpZih0aGlzLmhpdERldGVjdGlvbil7dGhpcy5zZXRIaXRDb250ZXh0U3R5bGUoInN0cm9rZSIsYyxiLGYpO3RoaXMuaGl0Q29udGV4dC5iZWdpblBhdGgoKTtmb3IoYT0wO2E8aC5sZW5ndGg7YSs9MilkPWhbYV0sZT1oW2ErMV0sMD09YSYmdGhpcy5oaXRDb250ZXh0Lm1vdmVUbyhkLGUpLHRoaXMuaGl0Q29udGV4dC5saW5lVG8oZCxlKTt0aGlzLmhpdENvbnRleHQuY2xvc2VQYXRoKCk7dGhpcy5oaXRDb250ZXh0LnN0cm9rZSgpfX1iLnN0cm9rZVdpZHRoPWc7dGhpcy5jYW52YXMucmVzdG9yZSgpO3RoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQucmVzdG9yZSgpO3RoaXMuc2V0Q2FudmFzU3R5bGUoInJlc2V0Iil9fSxzZXRDYW52YXNTdHlsZTpmdW5jdGlvbihhLGIpeyJmaWxsIj09PQphPyh0aGlzLmNhbnZhcy5nbG9iYWxBbHBoYT1iLmZpbGxPcGFjaXR5LHRoaXMuY2FudmFzLmZpbGxTdHlsZT1iLmZpbGxDb2xvcik6InN0cm9rZSI9PT1hPyh0aGlzLmNhbnZhcy5nbG9iYWxBbHBoYT1iLnN0cm9rZU9wYWNpdHksdGhpcy5jYW52YXMuc3Ryb2tlU3R5bGU9Yi5zdHJva2VDb2xvcix0aGlzLmNhbnZhcy5saW5lV2lkdGg9Yi5zdHJva2VXaWR0aCk6KHRoaXMuY2FudmFzLmdsb2JhbEFscGhhPTAsdGhpcy5jYW52YXMubGluZVdpZHRoPTEpfSxmZWF0dXJlSWRUb0hleDpmdW5jdGlvbihhKXthPU51bWJlcihhLnNwbGl0KCJfIikucG9wKCkpKzE7MTY3NzcyMTY8PWEmJih0aGlzLmhpdE92ZXJmbG93PWEtMTY3NzcyMTUsYT1hJTE2Nzc3MjE2KzEpO2E9IjAwMDAwMCIrYS50b1N0cmluZygxNik7dmFyIGI9YS5sZW5ndGg7cmV0dXJuIGE9IiMiK2Euc3Vic3RyaW5nKGItNixiKX0sc2V0SGl0Q29udGV4dFN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2I9dGhpcy5mZWF0dXJlSWRUb0hleChiKTsKImZpbGwiPT1hPyh0aGlzLmhpdENvbnRleHQuZ2xvYmFsQWxwaGE9MSx0aGlzLmhpdENvbnRleHQuZmlsbFN0eWxlPWIpOiJzdHJva2UiPT1hPyh0aGlzLmhpdENvbnRleHQuZ2xvYmFsQWxwaGE9MSx0aGlzLmhpdENvbnRleHQuc3Ryb2tlU3R5bGU9YiwidW5kZWZpbmVkIj09PXR5cGVvZiBkP3RoaXMuaGl0Q29udGV4dC5saW5lV2lkdGg9Yy5zdHJva2VXaWR0aCsyOmlzTmFOKGQpfHwodGhpcy5oaXRDb250ZXh0LmxpbmVXaWR0aD1jLnN0cm9rZVdpZHRoKzIvZCkpOih0aGlzLmhpdENvbnRleHQuZ2xvYmFsQWxwaGE9MCx0aGlzLmhpdENvbnRleHQubGluZVdpZHRoPTEpfSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiLGMpe2lmKCExIT09Yi5ncmFwaGljKWlmKGIuZXh0ZXJuYWxHcmFwaGljKXRoaXMuZHJhd0V4dGVybmFsR3JhcGhpYyhhLGIsYyk7ZWxzZSBpZihiLmdyYXBoaWNOYW1lJiYiY2lyY2xlIiE9Yi5ncmFwaGljTmFtZSl0aGlzLmRyYXdOYW1lZFN5bWJvbChhLGIsYyk7ZWxzZXt2YXIgZD0KdGhpcy5nZXRMb2NhbFhZKGEpO2E9ZFswXTtkPWRbMV07aWYoIWlzTmFOKGEpJiYhaXNOYU4oZCkpe3ZhciBlPTIqTWF0aC5QSSxmPWIucG9pbnRSYWRpdXM7ITEhPT1iLmZpbGwmJih0aGlzLnNldENhbnZhc1N0eWxlKCJmaWxsIixiKSx0aGlzLmNhbnZhcy5iZWdpblBhdGgoKSx0aGlzLmNhbnZhcy5hcmMoYSxkLGYsMCxlLCEwKSx0aGlzLmNhbnZhcy5maWxsKCksdGhpcy5oaXREZXRlY3Rpb24mJih0aGlzLnNldEhpdENvbnRleHRTdHlsZSgiZmlsbCIsYyxiKSx0aGlzLmhpdENvbnRleHQuYmVnaW5QYXRoKCksdGhpcy5oaXRDb250ZXh0LmFyYyhhLGQsZiwwLGUsITApLHRoaXMuaGl0Q29udGV4dC5maWxsKCkpKTshMSE9PWIuc3Ryb2tlJiYodGhpcy5zZXRDYW52YXNTdHlsZSgic3Ryb2tlIixiKSx0aGlzLmNhbnZhcy5iZWdpblBhdGgoKSx0aGlzLmNhbnZhcy5hcmMoYSxkLGYsMCxlLCEwKSx0aGlzLmNhbnZhcy5zdHJva2UoKSx0aGlzLmhpdERldGVjdGlvbiYmKHRoaXMuc2V0SGl0Q29udGV4dFN0eWxlKCJzdHJva2UiLApjLGIpLHRoaXMuaGl0Q29udGV4dC5iZWdpblBhdGgoKSx0aGlzLmhpdENvbnRleHQuYXJjKGEsZCxmLDAsZSwhMCksdGhpcy5oaXRDb250ZXh0LnN0cm9rZSgpKSx0aGlzLnNldENhbnZhc1N0eWxlKCJyZXNldCIpKX19fSxkcmF3TGluZVN0cmluZzpmdW5jdGlvbihhLGIsYyl7Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7ZmlsbDohMX0sYik7dGhpcy5kcmF3TGluZWFyUmluZyhhLGIsYyl9LGRyYXdMaW5lYXJSaW5nOmZ1bmN0aW9uKGEsYixjKXshMSE9PWIuZmlsbCYmKHRoaXMuc2V0Q2FudmFzU3R5bGUoImZpbGwiLGIpLHRoaXMucmVuZGVyUGF0aCh0aGlzLmNhbnZhcyxhLGIsYywiZmlsbCIpLHRoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5zZXRIaXRDb250ZXh0U3R5bGUoImZpbGwiLGMsYiksdGhpcy5yZW5kZXJQYXRoKHRoaXMuaGl0Q29udGV4dCxhLGIsYywiZmlsbCIpKSk7ITEhPT1iLnN0cm9rZSYmKHRoaXMuc2V0Q2FudmFzU3R5bGUoInN0cm9rZSIsYiksdGhpcy5yZW5kZXJQYXRoKHRoaXMuY2FudmFzLAphLGIsYywic3Ryb2tlIiksdGhpcy5oaXREZXRlY3Rpb24mJih0aGlzLnNldEhpdENvbnRleHRTdHlsZSgic3Ryb2tlIixjLGIpLHRoaXMucmVuZGVyUGF0aCh0aGlzLmhpdENvbnRleHQsYSxiLGMsInN0cm9rZSIpKSk7dGhpcy5zZXRDYW52YXNTdHlsZSgicmVzZXQiKX0scmVuZGVyUGF0aDpmdW5jdGlvbihhLGIsYyxkLGUpe2I9Yi5jb21wb25lbnRzO2M9Yi5sZW5ndGg7YS5iZWdpblBhdGgoKTtkPXRoaXMuZ2V0TG9jYWxYWShiWzBdKTt2YXIgZj1kWzFdO2lmKCFpc05hTihkWzBdKSYmIWlzTmFOKGYpKXthLm1vdmVUbyhkWzBdLGRbMV0pO2ZvcihkPTE7ZDxjOysrZClmPXRoaXMuZ2V0TG9jYWxYWShiW2RdKSxhLmxpbmVUbyhmWzBdLGZbMV0pOyJmaWxsIj09PWU/YS5maWxsKCk6YS5zdHJva2UoKX19LGRyYXdQb2x5Z29uOmZ1bmN0aW9uKGEsYixjKXthPWEuY29tcG9uZW50czt2YXIgZD1hLmxlbmd0aDt0aGlzLmRyYXdMaW5lYXJSaW5nKGFbMF0sYixjKTtmb3IodmFyIGU9MTtlPApkOysrZSl0aGlzLmNhbnZhcy5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249ImRlc3RpbmF0aW9uLW91dCIsdGhpcy5oaXREZXRlY3Rpb24mJih0aGlzLmhpdENvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJkZXN0aW5hdGlvbi1vdXQiKSx0aGlzLmRyYXdMaW5lYXJSaW5nKGFbZV0sT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe3N0cm9rZTohMSxmaWxsT3BhY2l0eToxfSxiKSxjKSx0aGlzLmNhbnZhcy5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249InNvdXJjZS1vdmVyIix0aGlzLmhpdERldGVjdGlvbiYmKHRoaXMuaGl0Q29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249InNvdXJjZS1vdmVyIiksdGhpcy5kcmF3TGluZWFyUmluZyhhW2VdLE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtmaWxsOiExfSxiKSxjKX0sZHJhd1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExvY2FsWFkoYSk7dGhpcy5zZXRDYW52YXNTdHlsZSgicmVzZXQiKTsKdGhpcy5jYW52YXMuZmlsbFN0eWxlPWIuZm9udENvbG9yO3RoaXMuY2FudmFzLmdsb2JhbEFscGhhPWIuZm9udE9wYWNpdHl8fDE7dmFyIGQ9W2IuZm9udFN0eWxlP2IuZm9udFN0eWxlOiJub3JtYWwiLCJub3JtYWwiLGIuZm9udFdlaWdodD9iLmZvbnRXZWlnaHQ6Im5vcm1hbCIsYi5mb250U2l6ZT9iLmZvbnRTaXplOiIxZW0iLGIuZm9udEZhbWlseT9iLmZvbnRGYW1pbHk6InNhbnMtc2VyaWYiXS5qb2luKCIgIiksZT1iLmxhYmVsLnNwbGl0KCJcbiIpLGY9ZS5sZW5ndGg7aWYodGhpcy5jYW52YXMuZmlsbFRleHQpe3RoaXMuY2FudmFzLmZvbnQ9ZDt0aGlzLmNhbnZhcy50ZXh0QWxpZ249T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuTEFCRUxfQUxJR05bYi5sYWJlbEFsaWduWzBdXXx8ImNlbnRlciI7dGhpcy5jYW52YXMudGV4dEJhc2VsaW5lPU9wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzLkxBQkVMX0FMSUdOW2IubGFiZWxBbGlnblsxXV18fCJtaWRkbGUiO3ZhciBnPU9wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzLkxBQkVMX0ZBQ1RPUltiLmxhYmVsQWxpZ25bMV1dOwpudWxsPT1nJiYoZz0tMC41KTtkPXRoaXMuY2FudmFzLm1lYXN1cmVUZXh0KCJNZyIpLmhlaWdodHx8dGhpcy5jYW52YXMubWVhc3VyZVRleHQoInh4Iikud2lkdGg7Y1sxXSs9ZCpnKihmLTEpO2ZvcihnPTA7ZzxmO2crKyliLmxhYmVsT3V0bGluZVdpZHRoJiYodGhpcy5jYW52YXMuc2F2ZSgpLHRoaXMuY2FudmFzLmdsb2JhbEFscGhhPWIubGFiZWxPdXRsaW5lT3BhY2l0eXx8Yi5mb250T3BhY2l0eXx8MSx0aGlzLmNhbnZhcy5zdHJva2VTdHlsZT1iLmxhYmVsT3V0bGluZUNvbG9yLHRoaXMuY2FudmFzLmxpbmVXaWR0aD1iLmxhYmVsT3V0bGluZVdpZHRoLHRoaXMuY2FudmFzLnN0cm9rZVRleHQoZVtnXSxjWzBdLGNbMV0rZCpnKzEpLHRoaXMuY2FudmFzLnJlc3RvcmUoKSksdGhpcy5jYW52YXMuZmlsbFRleHQoZVtnXSxjWzBdLGNbMV0rZCpnKX1lbHNlIGlmKHRoaXMuY2FudmFzLm1vekRyYXdUZXh0KXt0aGlzLmNhbnZhcy5tb3pUZXh0U3R5bGU9ZDt2YXIgaD1PcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcy5MQUJFTF9GQUNUT1JbYi5sYWJlbEFsaWduWzBdXTsKbnVsbD09aCYmKGg9LTAuNSk7Zz1PcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcy5MQUJFTF9GQUNUT1JbYi5sYWJlbEFsaWduWzFdXTtudWxsPT1nJiYoZz0tMC41KTtkPXRoaXMuY2FudmFzLm1vek1lYXN1cmVUZXh0KCJ4eCIpO2NbMV0rPWQqKDErZypmKTtmb3IoZz0wO2c8ZjtnKyspe3ZhciBrPWNbMF0raCp0aGlzLmNhbnZhcy5tb3pNZWFzdXJlVGV4dChlW2ddKSxsPWNbMV0rZypkO3RoaXMuY2FudmFzLnRyYW5zbGF0ZShrLGwpO3RoaXMuY2FudmFzLm1vekRyYXdUZXh0KGVbZ10pO3RoaXMuY2FudmFzLnRyYW5zbGF0ZSgtaywtbCl9fXRoaXMuc2V0Q2FudmFzU3R5bGUoInJlc2V0Iil9LGdldExvY2FsWFk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRSZXNvbHV0aW9uKCksYz10aGlzLmV4dGVudDtyZXR1cm5bKGEueC10aGlzLmZlYXR1cmVEeCkvYistYy5sZWZ0L2IsYy50b3AvYi1hLnkvYl19LGNsZWFyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yb290LmhlaWdodCxiPXRoaXMucm9vdC53aWR0aDsKdGhpcy5jYW52YXMuY2xlYXJSZWN0KDAsMCxiLGEpO3RoaXMuZmVhdHVyZXM9e307dGhpcy5oaXREZXRlY3Rpb24mJnRoaXMuaGl0Q29udGV4dC5jbGVhclJlY3QoMCwwLGIsYSl9LGdldEZlYXR1cmVJZEZyb21FdmVudDpmdW5jdGlvbihhKXt2YXIgYjtpZih0aGlzLmhpdERldGVjdGlvbiYmIm5vbmUiIT09dGhpcy5yb290LnN0eWxlLmRpc3BsYXkmJiF0aGlzLm1hcC5kcmFnZ2luZyYmKGE9YS54eSxhPXRoaXMuaGl0Q29udGV4dC5nZXRJbWFnZURhdGEoYS54fDAsYS55fDAsMSwxKS5kYXRhLDI1NT09PWFbM10mJihhPWFbMl0rMjU2KihhWzFdKzI1NiphWzBdKSkpKXthPSJPcGVuTGF5ZXJzX0ZlYXR1cmVfVmVjdG9yXyIrKGEtMSt0aGlzLmhpdE92ZXJmbG93KTt0cnl7Yj10aGlzLmZlYXR1cmVzW2FdWzBdfWNhdGNoKGMpe319cmV0dXJuIGJ9LGVyYXNlRmVhdHVyZXM6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDsrK2IpZGVsZXRlIHRoaXMuZmVhdHVyZXNbYVtiXS5pZF07CnRoaXMucmVkcmF3KCl9LHJlZHJhdzpmdW5jdGlvbigpe2lmKCF0aGlzLmxvY2tlZCl7dmFyIGE9dGhpcy5yb290LmhlaWdodCxiPXRoaXMucm9vdC53aWR0aDt0aGlzLmNhbnZhcy5jbGVhclJlY3QoMCwwLGIsYSk7dGhpcy5oaXREZXRlY3Rpb24mJnRoaXMuaGl0Q29udGV4dC5jbGVhclJlY3QoMCwwLGIsYSk7dmFyIGE9W10sYyxkLGU9dGhpcy5tYXAuYmFzZUxheWVyJiZ0aGlzLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lJiZ0aGlzLm1hcC5nZXRNYXhFeHRlbnQoKSxmO2ZvcihmIGluIHRoaXMuZmVhdHVyZXMpdGhpcy5mZWF0dXJlcy5oYXNPd25Qcm9wZXJ0eShmKSYmKGI9dGhpcy5mZWF0dXJlc1tmXVswXSxjPWIuZ2VvbWV0cnksdGhpcy5jYWxjdWxhdGVGZWF0dXJlRHgoYy5nZXRCb3VuZHMoKSxlKSxkPXRoaXMuZmVhdHVyZXNbZl1bMV0sdGhpcy5kcmF3R2VvbWV0cnkoYyxkLGIuaWQpLGQubGFiZWwmJmEucHVzaChbYixkXSkpO2I9MDtmb3IoYz1hLmxlbmd0aDtiPGM7KytiKWY9CmFbYl0sdGhpcy5kcmF3VGV4dChmWzBdLmdlb21ldHJ5LmdldENlbnRyb2lkKCksZlsxXSl9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcyJ9KTtPcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcy5MQUJFTF9BTElHTj17bDoibGVmdCIscjoicmlnaHQiLHQ6InRvcCIsYjoiYm90dG9tIn07T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuTEFCRUxfRkFDVE9SPXtsOjAscjotMSx0OjAsYjotMX07T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuZHJhd0ltYWdlU2NhbGVGYWN0b3I9bnVsbDtPcGVuTGF5ZXJzLkhhbmRsZXI9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxjb250cm9sOm51bGwsbWFwOm51bGwsa2V5TWFzazpudWxsLGFjdGl2ZTohMSxldnQ6bnVsbCx0b3VjaDohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYyk7dGhpcy5jb250cm9sPWE7dGhpcy5jYWxsYmFja3M9YjsoYT10aGlzLm1hcHx8YS5tYXApJiZ0aGlzLnNldE1hcChhKTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe3RoaXMubWFwPWF9LGNoZWNrTW9kaWZpZXJzOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT10aGlzLmtleU1hc2s/ITA6KChhLnNoaWZ0S2V5P09wZW5MYXllcnMuSGFuZGxlci5NT0RfU0hJRlQ6MCl8KGEuY3RybEtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0NUUkw6MCl8KGEuYWx0S2V5P09wZW5MYXllcnMuSGFuZGxlci5NT0RfQUxUOgowKXwoYS5tZXRhS2V5P09wZW5MYXllcnMuSGFuZGxlci5NT0RfTUVUQTowKSk9PXRoaXMua2V5TWFza30sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLmFjdGl2ZSlyZXR1cm4hMTtmb3IodmFyIGE9T3BlbkxheWVycy5FdmVudHMucHJvdG90eXBlLkJST1dTRVJfRVZFTlRTLGI9MCxjPWEubGVuZ3RoO2I8YztiKyspdGhpc1thW2JdXSYmdGhpcy5yZWdpc3RlcihhW2JdLHRoaXNbYVtiXV0pO3JldHVybiB0aGlzLmFjdGl2ZT0hMH0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmFjdGl2ZSlyZXR1cm4hMTtmb3IodmFyIGE9T3BlbkxheWVycy5FdmVudHMucHJvdG90eXBlLkJST1dTRVJfRVZFTlRTLGI9MCxjPWEubGVuZ3RoO2I8YztiKyspdGhpc1thW2JdXSYmdGhpcy51bnJlZ2lzdGVyKGFbYl0sdGhpc1thW2JdXSk7dGhpcy5hY3RpdmU9dGhpcy50b3VjaD0hMTtyZXR1cm4hMH0sc3RhcnRUb3VjaDpmdW5jdGlvbigpe2lmKCF0aGlzLnRvdWNoKXt0aGlzLnRvdWNoPSEwOwpmb3IodmFyIGE9Im1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBjbGljayBkYmxjbGljayBtb3VzZW91dCIuc3BsaXQoIiAiKSxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXNbYVtiXV0mJnRoaXMudW5yZWdpc3RlcihhW2JdLHRoaXNbYVtiXV0pfX0sY2FsbGJhY2s6ZnVuY3Rpb24oYSxiKXthJiZ0aGlzLmNhbGxiYWNrc1thXSYmdGhpcy5jYWxsYmFja3NbYV0uYXBwbHkodGhpcy5jb250cm9sLGIpfSxyZWdpc3RlcjpmdW5jdGlvbihhLGIpe3RoaXMubWFwLmV2ZW50cy5yZWdpc3RlclByaW9yaXR5KGEsdGhpcyxiKTt0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXJQcmlvcml0eShhLHRoaXMsdGhpcy5zZXRFdmVudCl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLm1hcC5ldmVudHMudW5yZWdpc3RlcihhLHRoaXMsYik7dGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoYSx0aGlzLHRoaXMuc2V0RXZlbnQpfSxzZXRFdmVudDpmdW5jdGlvbihhKXt0aGlzLmV2dD1hO3JldHVybiEwfSwKZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpO3RoaXMuY29udHJvbD10aGlzLm1hcD1udWxsfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIifSk7T3BlbkxheWVycy5IYW5kbGVyLk1PRF9OT05FPTA7T3BlbkxheWVycy5IYW5kbGVyLk1PRF9TSElGVD0xO09wZW5MYXllcnMuSGFuZGxlci5NT0RfQ1RSTD0yO09wZW5MYXllcnMuSGFuZGxlci5NT0RfQUxUPTQ7T3BlbkxheWVycy5IYW5kbGVyLk1PRF9NRVRBPTg7T3BlbkxheWVycy5IYW5kbGVyLkRyYWc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIse3N0YXJ0ZWQ6ITEsc3RvcERvd246ITAsZHJhZ2dpbmc6ITEsbGFzdDpudWxsLHN0YXJ0Om51bGwsbGFzdE1vdmVFdnQ6bnVsbCxvbGRPbnNlbGVjdHN0YXJ0Om51bGwsaW50ZXJ2YWw6MCx0aW1lb3V0SWQ6bnVsbCxkb2N1bWVudERyYWc6ITEsZG9jdW1lbnRFdmVudHM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCEwPT09dGhpcy5kb2N1bWVudERyYWcpe3ZhciBkPXRoaXM7dGhpcy5fZG9jTW92ZT1mdW5jdGlvbihhKXtkLm1vdXNlbW92ZSh7eHk6e3g6YS5jbGllbnRYLHk6YS5jbGllbnRZfSxlbGVtZW50OmRvY3VtZW50fSl9O3RoaXMuX2RvY1VwPWZ1bmN0aW9uKGEpe2QubW91c2V1cCh7eHk6e3g6YS5jbGllbnRYLHk6YS5jbGllbnRZfX0pfX19LApkcmFnc3RhcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9ITA7dGhpcy5kcmFnZ2luZz0hMTt0aGlzLmNoZWNrTW9kaWZpZXJzKGEpJiYoT3BlbkxheWVycy5FdmVudC5pc0xlZnRDbGljayhhKXx8T3BlbkxheWVycy5FdmVudC5pc1NpbmdsZVRvdWNoKGEpKT8odGhpcy5zdGFydGVkPSEwLHRoaXMubGFzdD10aGlzLnN0YXJ0PWEueHksT3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbERyYWdEb3duIiksdGhpcy5kb3duKGEpLHRoaXMuY2FsbGJhY2soImRvd24iLFthLnh5XSksT3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKSx0aGlzLm9sZE9uc2VsZWN0c3RhcnR8fCh0aGlzLm9sZE9uc2VsZWN0c3RhcnQ9ZG9jdW1lbnQub25zZWxlY3RzdGFydD9kb2N1bWVudC5vbnNlbGVjdHN0YXJ0Ok9wZW5MYXllcnMuRnVuY3Rpb24uVHJ1ZSksZG9jdW1lbnQub25zZWxlY3RzdGFydD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLkZhbHNlLGI9IXRoaXMuc3RvcERvd24pOgoodGhpcy5zdGFydGVkPSExLHRoaXMubGFzdD10aGlzLnN0YXJ0PW51bGwpO3JldHVybiBifSxkcmFnbW92ZTpmdW5jdGlvbihhKXt0aGlzLmxhc3RNb3ZlRXZ0PWE7IXRoaXMuc3RhcnRlZHx8KHRoaXMudGltZW91dElkfHxhLnh5Lng9PXRoaXMubGFzdC54JiZhLnh5Lnk9PXRoaXMubGFzdC55KXx8KCEwPT09dGhpcy5kb2N1bWVudERyYWcmJnRoaXMuZG9jdW1lbnRFdmVudHMmJihhLmVsZW1lbnQ9PT1kb2N1bWVudD8odGhpcy5hZGp1c3RYWShhKSx0aGlzLnNldEV2ZW50KGEpKTp0aGlzLnJlbW92ZURvY3VtZW50RXZlbnRzKCkpLDA8dGhpcy5pbnRlcnZhbCYmKHRoaXMudGltZW91dElkPXNldFRpbWVvdXQoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucmVtb3ZlVGltZW91dCx0aGlzKSx0aGlzLmludGVydmFsKSksdGhpcy5kcmFnZ2luZz0hMCx0aGlzLm1vdmUoYSksdGhpcy5jYWxsYmFjaygibW92ZSIsW2EueHldKSx0aGlzLm9sZE9uc2VsZWN0c3RhcnR8fCh0aGlzLm9sZE9uc2VsZWN0c3RhcnQ9CmRvY3VtZW50Lm9uc2VsZWN0c3RhcnQsZG9jdW1lbnQub25zZWxlY3RzdGFydD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLkZhbHNlKSx0aGlzLmxhc3Q9YS54eSk7cmV0dXJuITB9LGRyYWdlbmQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdGFydGVkKXshMD09PXRoaXMuZG9jdW1lbnREcmFnJiZ0aGlzLmRvY3VtZW50RXZlbnRzJiYodGhpcy5hZGp1c3RYWShhKSx0aGlzLnJlbW92ZURvY3VtZW50RXZlbnRzKCkpO3ZhciBiPXRoaXMuc3RhcnQhPXRoaXMubGFzdDt0aGlzLmRyYWdnaW5nPXRoaXMuc3RhcnRlZD0hMTtPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sRHJhZ0Rvd24iKTt0aGlzLnVwKGEpO3RoaXMuY2FsbGJhY2soInVwIixbYS54eV0pO2ImJnRoaXMuY2FsbGJhY2soImRvbmUiLFthLnh5XSk7ZG9jdW1lbnQub25zZWxlY3RzdGFydD10aGlzLm9sZE9uc2VsZWN0c3RhcnR9cmV0dXJuITB9LGRvd246ZnVuY3Rpb24oYSl7fSxtb3ZlOmZ1bmN0aW9uKGEpe30sCnVwOmZ1bmN0aW9uKGEpe30sb3V0OmZ1bmN0aW9uKGEpe30sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRyYWdzdGFydChhKX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0VG91Y2goKTtyZXR1cm4gdGhpcy5kcmFnc3RhcnQoYSl9LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kcmFnbW92ZShhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRyYWdtb3ZlKGEpfSxyZW1vdmVUaW1lb3V0OmZ1bmN0aW9uKCl7dGhpcy50aW1lb3V0SWQ9bnVsbDt0aGlzLmRyYWdnaW5nJiZ0aGlzLm1vdXNlbW92ZSh0aGlzLmxhc3RNb3ZlRXZ0KX0sbW91c2V1cDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kcmFnZW5kKGEpfSx0b3VjaGVuZDpmdW5jdGlvbihhKXthLnh5PXRoaXMubGFzdDtyZXR1cm4gdGhpcy5kcmFnZW5kKGEpfSxtb3VzZW91dDpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXJ0ZWQmJk9wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQoYSwKdGhpcy5tYXAudmlld1BvcnREaXYpKWlmKCEwPT09dGhpcy5kb2N1bWVudERyYWcpdGhpcy5hZGREb2N1bWVudEV2ZW50cygpO2Vsc2V7dmFyIGI9dGhpcy5zdGFydCE9dGhpcy5sYXN0O3RoaXMuZHJhZ2dpbmc9dGhpcy5zdGFydGVkPSExO09wZW5MYXllcnMuRWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xEcmFnRG93biIpO3RoaXMub3V0KGEpO3RoaXMuY2FsbGJhY2soIm91dCIsW10pO2ImJnRoaXMuY2FsbGJhY2soImRvbmUiLFthLnh5XSk7ZG9jdW1lbnQub25zZWxlY3RzdGFydCYmKGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQ9dGhpcy5vbGRPbnNlbGVjdHN0YXJ0KX1yZXR1cm4hMH0sY2xpY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhcnQ9PXRoaXMubGFzdH0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMuZHJhZ2dpbmc9CiExLGE9ITApO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMuZHJhZ2dpbmc9dGhpcy5zdGFydGVkPSExLHRoaXMubGFzdD10aGlzLnN0YXJ0PW51bGwsYT0hMCxPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sRHJhZ0Rvd24iKSk7cmV0dXJuIGF9LGFkanVzdFhZOmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb24odGhpcy5tYXAudmlld1BvcnREaXYpO2EueHkueC09YlswXTthLnh5LnktPWJbMV19LGFkZERvY3VtZW50RXZlbnRzOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKGRvY3VtZW50LmJvZHksIm9sRHJhZ0Rvd24iKTt0aGlzLmRvY3VtZW50RXZlbnRzPSEwO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShkb2N1bWVudCwibW91c2Vtb3ZlIiwKdGhpcy5fZG9jTW92ZSk7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGRvY3VtZW50LCJtb3VzZXVwIix0aGlzLl9kb2NVcCl9LHJlbW92ZURvY3VtZW50RXZlbnRzOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKGRvY3VtZW50LmJvZHksIm9sRHJhZ0Rvd24iKTt0aGlzLmRvY3VtZW50RXZlbnRzPSExO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyhkb2N1bWVudCwibW91c2Vtb3ZlIix0aGlzLl9kb2NNb3ZlKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcoZG9jdW1lbnQsIm1vdXNldXAiLHRoaXMuX2RvY1VwKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLkRyYWcifSk7T3BlbkxheWVycy5IYW5kbGVyLktleWJvYXJkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtLRVlfRVZFTlRTOlsia2V5ZG93biIsImtleXVwIl0sZXZlbnRMaXN0ZW5lcjpudWxsLG9ic2VydmVFbGVtZW50Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmV2ZW50TGlzdGVuZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kQXNFdmVudExpc3RlbmVyKHRoaXMuaGFuZGxlS2V5RXZlbnQsdGhpcyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmV2ZW50TGlzdGVuZXI9bnVsbDtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKE9wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcywKYXJndW1lbnRzKSl7dGhpcy5vYnNlcnZlRWxlbWVudD10aGlzLm9ic2VydmVFbGVtZW50fHxkb2N1bWVudDtmb3IodmFyIGE9MCxiPXRoaXMuS0VZX0VWRU5UUy5sZW5ndGg7YTxiO2ErKylPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUodGhpcy5vYnNlcnZlRWxlbWVudCx0aGlzLktFWV9FVkVOVFNbYV0sdGhpcy5ldmVudExpc3RlbmVyKTtyZXR1cm4hMH1yZXR1cm4hMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO2lmKE9wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpe2Zvcih2YXIgYT0wLGI9dGhpcy5LRVlfRVZFTlRTLmxlbmd0aDthPGI7YSsrKU9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh0aGlzLm9ic2VydmVFbGVtZW50LHRoaXMuS0VZX0VWRU5UU1thXSx0aGlzLmV2ZW50TGlzdGVuZXIpO2E9ITB9cmV0dXJuIGF9LGhhbmRsZUtleUV2ZW50OmZ1bmN0aW9uKGEpe3RoaXMuY2hlY2tNb2RpZmllcnMoYSkmJgp0aGlzLmNhbGxiYWNrKGEudHlwZSxbYV0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuS2V5Ym9hcmQifSk7T3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2RvY3VtZW50RHJhZzohMSxnZW9tZXRyeVR5cGVzOm51bGwsY2xpY2tvdXQ6ITAsdG9nZ2xlOiEwLHN0YW5kYWxvbmU6ITEsbGF5ZXI6bnVsbCxmZWF0dXJlOm51bGwsdmVydGV4Om51bGwsdmVydGljZXM6bnVsbCx2aXJ0dWFsVmVydGljZXM6bnVsbCxoYW5kbGVyczpudWxsLGRlbGV0ZUNvZGVzOm51bGwsdmlydHVhbFN0eWxlOm51bGwsdmVydGV4UmVuZGVySW50ZW50Om51bGwsbW9kZTpudWxsLGNyZWF0ZVZlcnRpY2VzOiEwLG1vZGlmaWVkOiExLHJhZGl1c0hhbmRsZTpudWxsLGRyYWdIYW5kbGU6bnVsbCxvbk1vZGlmaWNhdGlvblN0YXJ0OmZ1bmN0aW9uKCl7fSxvbk1vZGlmaWNhdGlvbjpmdW5jdGlvbigpe30sb25Nb2RpZmljYXRpb25FbmQ6ZnVuY3Rpb24oKXt9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O3RoaXMubGF5ZXI9YTt0aGlzLnZlcnRpY2VzPQpbXTt0aGlzLnZpcnR1YWxWZXJ0aWNlcz1bXTt0aGlzLnZpcnR1YWxTdHlsZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMubGF5ZXIuc3R5bGV8fHRoaXMubGF5ZXIuc3R5bGVNYXAuY3JlYXRlU3ltYm9saXplcihudWxsLGIudmVydGV4UmVuZGVySW50ZW50KSk7dGhpcy52aXJ0dWFsU3R5bGUuZmlsbE9wYWNpdHk9MC4zO3RoaXMudmlydHVhbFN0eWxlLnN0cm9rZU9wYWNpdHk9MC4zO3RoaXMuZGVsZXRlQ29kZXM9WzQ2LDY4XTt0aGlzLm1vZGU9T3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUkVTSEFQRTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYl0pO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KHRoaXMuZGVsZXRlQ29kZXMpfHwodGhpcy5kZWxldGVDb2Rlcz1bdGhpcy5kZWxldGVDb2Rlc10pO3ZhciBjPXtkb2N1bWVudERyYWc6dGhpcy5kb2N1bWVudERyYWcsc3RvcERvd246ITF9O3RoaXMuaGFuZGxlcnM9CntrZXlib2FyZDpuZXcgT3BlbkxheWVycy5IYW5kbGVyLktleWJvYXJkKHRoaXMse2tleWRvd246dGhpcy5oYW5kbGVLZXlwcmVzc30pLGRyYWc6bmV3IE9wZW5MYXllcnMuSGFuZGxlci5EcmFnKHRoaXMse2Rvd246ZnVuY3Rpb24oYSl7dGhpcy52ZXJ0ZXg9bnVsbDsoYT10aGlzLmxheWVyLmdldEZlYXR1cmVGcm9tRXZlbnQodGhpcy5oYW5kbGVycy5kcmFnLmV2dCkpP3RoaXMuZHJhZ1N0YXJ0KGEpOnRoaXMuY2xpY2tvdXQmJih0aGlzLl91bnNlbGVjdD10aGlzLmZlYXR1cmUpfSxtb3ZlOmZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLl91bnNlbGVjdDt0aGlzLnZlcnRleCYmdGhpcy5kcmFnVmVydGV4KHRoaXMudmVydGV4LGEpfSx1cDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlcnMuZHJhZy5zdG9wRG93bj0hMTt0aGlzLl91bnNlbGVjdCYmKHRoaXMudW5zZWxlY3RGZWF0dXJlKHRoaXMuX3Vuc2VsZWN0KSxkZWxldGUgdGhpcy5fdW5zZWxlY3QpfSxkb25lOmZ1bmN0aW9uKGEpe3RoaXMudmVydGV4JiYKdGhpcy5kcmFnQ29tcGxldGUodGhpcy52ZXJ0ZXgpfX0sYyl9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pO3RoaXMubGF5ZXI9bnVsbDtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxbXSl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5tb3ZlTGF5ZXJUb1RvcCgpO3RoaXMubWFwLmV2ZW50cy5vbih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pO3JldHVybiB0aGlzLmhhbmRsZXJzLmtleWJvYXJkLmFjdGl2YXRlKCkmJnRoaXMuaGFuZGxlcnMuZHJhZy5hY3RpdmF0ZSgpJiZPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sCmRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5tb3ZlTGF5ZXJCYWNrKCksdGhpcy5tYXAuZXZlbnRzLnVuKHtyZW1vdmVsYXllcjp0aGlzLmhhbmRsZU1hcEV2ZW50cyxjaGFuZ2VsYXllcjp0aGlzLmhhbmRsZU1hcEV2ZW50cyxzY29wZTp0aGlzfSksdGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzLnZlcnRpY2VzLHtzaWxlbnQ6ITB9KSx0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMudmlydHVhbFZlcnRpY2VzLHtzaWxlbnQ6ITB9KSx0aGlzLnZlcnRpY2VzPVtdLHRoaXMuaGFuZGxlcnMuZHJhZy5kZWFjdGl2YXRlKCksdGhpcy5oYW5kbGVycy5rZXlib2FyZC5kZWFjdGl2YXRlKCksKGE9dGhpcy5mZWF0dXJlKSYmKGEuZ2VvbWV0cnkmJmEubGF5ZXIpJiZ0aGlzLnVuc2VsZWN0RmVhdHVyZShhKSxhPSEwKTtyZXR1cm4gYX0sYmVmb3JlU2VsZWN0RmVhdHVyZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVmZWF0dXJlbW9kaWZpZWQiLAp7ZmVhdHVyZTphfSl9LHNlbGVjdEZlYXR1cmU6ZnVuY3Rpb24oYSl7aWYoISh0aGlzLmZlYXR1cmU9PT1hfHx0aGlzLmdlb21ldHJ5VHlwZXMmJi0xPT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmdlb21ldHJ5VHlwZXMsYS5nZW9tZXRyeS5DTEFTU19OQU1FKSkpeyExIT09dGhpcy5iZWZvcmVTZWxlY3RGZWF0dXJlKGEpJiYodGhpcy5mZWF0dXJlJiZ0aGlzLnVuc2VsZWN0RmVhdHVyZSh0aGlzLmZlYXR1cmUpLHRoaXMuZmVhdHVyZT1hLHRoaXMubGF5ZXIuc2VsZWN0ZWRGZWF0dXJlcy5wdXNoKGEpLHRoaXMubGF5ZXIuZHJhd0ZlYXR1cmUoYSwic2VsZWN0IiksdGhpcy5tb2RpZmllZD0hMSx0aGlzLnJlc2V0VmVydGljZXMoKSx0aGlzLm9uTW9kaWZpY2F0aW9uU3RhcnQodGhpcy5mZWF0dXJlKSk7dmFyIGI9YS5tb2RpZmllZDshYS5nZW9tZXRyeXx8YiYmYi5nZW9tZXRyeXx8KHRoaXMuX29yaWdpbmFsR2VvbWV0cnk9YS5nZW9tZXRyeS5jbG9uZSgpKX19LHVuc2VsZWN0RmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMudmVydGljZXMsCntzaWxlbnQ6ITB9KTt0aGlzLnZlcnRpY2VzPVtdO3RoaXMubGF5ZXIuZGVzdHJveUZlYXR1cmVzKHRoaXMudmlydHVhbFZlcnRpY2VzLHtzaWxlbnQ6ITB9KTt0aGlzLnZpcnR1YWxWZXJ0aWNlcz1bXTt0aGlzLmRyYWdIYW5kbGUmJih0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyhbdGhpcy5kcmFnSGFuZGxlXSx7c2lsZW50OiEwfSksZGVsZXRlIHRoaXMuZHJhZ0hhbmRsZSk7dGhpcy5yYWRpdXNIYW5kbGUmJih0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyhbdGhpcy5yYWRpdXNIYW5kbGVdLHtzaWxlbnQ6ITB9KSxkZWxldGUgdGhpcy5yYWRpdXNIYW5kbGUpO3RoaXMubGF5ZXIuZHJhd0ZlYXR1cmUodGhpcy5mZWF0dXJlLCJkZWZhdWx0Iik7dGhpcy5mZWF0dXJlPW51bGw7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5sYXllci5zZWxlY3RlZEZlYXR1cmVzLGEpO3RoaXMub25Nb2RpZmljYXRpb25FbmQoYSk7dGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJhZnRlcmZlYXR1cmVtb2RpZmllZCIsCntmZWF0dXJlOmEsbW9kaWZpZWQ6dGhpcy5tb2RpZmllZH0pO3RoaXMubW9kaWZpZWQ9ITF9LGRyYWdTdGFydDpmdW5jdGlvbihhKXt2YXIgYj0iT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWEuZ2VvbWV0cnkuQ0xBU1NfTkFNRTt0aGlzLnN0YW5kYWxvbmV8fChhLl9za2V0Y2h8fCFiKSYmYS5fc2tldGNofHwodGhpcy50b2dnbGUmJnRoaXMuZmVhdHVyZT09PWEmJih0aGlzLl91bnNlbGVjdD1hKSx0aGlzLnNlbGVjdEZlYXR1cmUoYSkpO2lmKGEuX3NrZXRjaHx8Yil0aGlzLnZlcnRleD1hLHRoaXMuaGFuZGxlcnMuZHJhZy5zdG9wRG93bj0hMH0sZHJhZ1ZlcnRleDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubWFwLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGIpLGQ9YS5nZW9tZXRyeTtkLm1vdmUoYy5sb24tZC54LGMubGF0LWQueSk7dGhpcy5tb2RpZmllZD0hMDsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PXRoaXMuZmVhdHVyZS5nZW9tZXRyeS5DTEFTU19OQU1FPwp0aGlzLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoInZlcnRleG1vZGlmaWVkIix7dmVydGV4OmEuZ2VvbWV0cnksZmVhdHVyZTp0aGlzLmZlYXR1cmUscGl4ZWw6Yn0pOihhLl9pbmRleD8oYS5nZW9tZXRyeS5wYXJlbnQuYWRkQ29tcG9uZW50KGEuZ2VvbWV0cnksYS5faW5kZXgpLGRlbGV0ZSBhLl9pbmRleCxPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnZpcnR1YWxWZXJ0aWNlcyxhKSx0aGlzLnZlcnRpY2VzLnB1c2goYSkpOmE9PXRoaXMuZHJhZ0hhbmRsZT8odGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzLnZlcnRpY2VzLHtzaWxlbnQ6ITB9KSx0aGlzLnZlcnRpY2VzPVtdLHRoaXMucmFkaXVzSGFuZGxlJiYodGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXMoW3RoaXMucmFkaXVzSGFuZGxlXSx7c2lsZW50OiEwfSksdGhpcy5yYWRpdXNIYW5kbGU9bnVsbCkpOmEhPT10aGlzLnJhZGl1c0hhbmRsZSYmdGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJ2ZXJ0ZXhtb2RpZmllZCIsCnt2ZXJ0ZXg6YS5nZW9tZXRyeSxmZWF0dXJlOnRoaXMuZmVhdHVyZSxwaXhlbDpifSksMDx0aGlzLnZpcnR1YWxWZXJ0aWNlcy5sZW5ndGgmJih0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyh0aGlzLnZpcnR1YWxWZXJ0aWNlcyx7c2lsZW50OiEwfSksdGhpcy52aXJ0dWFsVmVydGljZXM9W10pLHRoaXMubGF5ZXIuZHJhd0ZlYXR1cmUodGhpcy5mZWF0dXJlLHRoaXMuc3RhbmRhbG9uZT92b2lkIDA6InNlbGVjdCIpKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKGEpfSxkcmFnQ29tcGxldGU6ZnVuY3Rpb24oYSl7dGhpcy5yZXNldFZlcnRpY2VzKCk7dGhpcy5zZXRGZWF0dXJlU3RhdGUoKTt0aGlzLm9uTW9kaWZpY2F0aW9uKHRoaXMuZmVhdHVyZSk7dGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlbW9kaWZpZWQiLHtmZWF0dXJlOnRoaXMuZmVhdHVyZX0pfSxzZXRGZWF0dXJlU3RhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLmZlYXR1cmUuc3RhdGUhPU9wZW5MYXllcnMuU3RhdGUuSU5TRVJUJiYKdGhpcy5mZWF0dXJlLnN0YXRlIT1PcGVuTGF5ZXJzLlN0YXRlLkRFTEVURSYmKHRoaXMuZmVhdHVyZS5zdGF0ZT1PcGVuTGF5ZXJzLlN0YXRlLlVQREFURSx0aGlzLm1vZGlmaWVkJiZ0aGlzLl9vcmlnaW5hbEdlb21ldHJ5KSl7dmFyIGE9dGhpcy5mZWF0dXJlO2EubW9kaWZpZWQ9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLm1vZGlmaWVkLHtnZW9tZXRyeTp0aGlzLl9vcmlnaW5hbEdlb21ldHJ5fSk7ZGVsZXRlIHRoaXMuX29yaWdpbmFsR2VvbWV0cnl9fSxyZXNldFZlcnRpY2VzOmZ1bmN0aW9uKCl7MDx0aGlzLnZlcnRpY2VzLmxlbmd0aCYmKHRoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXModGhpcy52ZXJ0aWNlcyx7c2lsZW50OiEwfSksdGhpcy52ZXJ0aWNlcz1bXSk7MDx0aGlzLnZpcnR1YWxWZXJ0aWNlcy5sZW5ndGgmJih0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMudmlydHVhbFZlcnRpY2VzLHtzaWxlbnQ6ITB9KSx0aGlzLnZpcnR1YWxWZXJ0aWNlcz1bXSk7dGhpcy5kcmFnSGFuZGxlJiYKKHRoaXMubGF5ZXIuZGVzdHJveUZlYXR1cmVzKFt0aGlzLmRyYWdIYW5kbGVdLHtzaWxlbnQ6ITB9KSx0aGlzLmRyYWdIYW5kbGU9bnVsbCk7dGhpcy5yYWRpdXNIYW5kbGUmJih0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyhbdGhpcy5yYWRpdXNIYW5kbGVdLHtzaWxlbnQ6ITB9KSx0aGlzLnJhZGl1c0hhbmRsZT1udWxsKTt0aGlzLmZlYXR1cmUmJiJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50IiE9dGhpcy5mZWF0dXJlLmdlb21ldHJ5LkNMQVNTX05BTUUmJih0aGlzLm1vZGUmT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuRFJBRyYmdGhpcy5jb2xsZWN0RHJhZ0hhbmRsZSgpLHRoaXMubW9kZSYoT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUk9UQVRFfE9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJFU0laRSkmJnRoaXMuY29sbGVjdFJhZGl1c0hhbmRsZSgpLHRoaXMubW9kZSZPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5SRVNIQVBFJiYKKHRoaXMubW9kZSZPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5SRVNJWkV8fHRoaXMuY29sbGVjdFZlcnRpY2VzKCkpKX0saGFuZGxlS2V5cHJlc3M6ZnVuY3Rpb24oYSl7dmFyIGI9YS5rZXlDb2RlO3RoaXMuZmVhdHVyZSYmLTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuZGVsZXRlQ29kZXMsYikmJihiPXRoaXMubGF5ZXIuZ2V0RmVhdHVyZUZyb21FdmVudCh0aGlzLmhhbmRsZXJzLmRyYWcuZXZ0KSkmJigtMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy52ZXJ0aWNlcyxiKSYmIXRoaXMuaGFuZGxlcnMuZHJhZy5kcmFnZ2luZyYmYi5nZW9tZXRyeS5wYXJlbnQpJiYoYi5nZW9tZXRyeS5wYXJlbnQucmVtb3ZlQ29tcG9uZW50KGIuZ2VvbWV0cnkpLHRoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgidmVydGV4cmVtb3ZlZCIse3ZlcnRleDpiLmdlb21ldHJ5LGZlYXR1cmU6dGhpcy5mZWF0dXJlLHBpeGVsOmEueHl9KSx0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMuZmVhdHVyZSwKdGhpcy5zdGFuZGFsb25lP3ZvaWQgMDoic2VsZWN0IiksdGhpcy5tb2RpZmllZD0hMCx0aGlzLnJlc2V0VmVydGljZXMoKSx0aGlzLnNldEZlYXR1cmVTdGF0ZSgpLHRoaXMub25Nb2RpZmljYXRpb24odGhpcy5mZWF0dXJlKSx0aGlzLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoImZlYXR1cmVtb2RpZmllZCIse2ZlYXR1cmU6dGhpcy5mZWF0dXJlfSkpfSxjb2xsZWN0VmVydGljZXM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGMpe3ZhciBkLGUsZjtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWMuQ0xBU1NfTkFNRSllPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGMpLGUuX3NrZXRjaD0hMCxlLnJlbmRlckludGVudD1iLnZlcnRleFJlbmRlckludGVudCxiLnZlcnRpY2VzLnB1c2goZSk7ZWxzZXtmPWMuY29tcG9uZW50cy5sZW5ndGg7Ik9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyI9PWMuQ0xBU1NfTkFNRSYmKGYtPTEpO2ZvcihkPTA7ZDxmOysrZCllPQpjLmNvbXBvbmVudHNbZF0sIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1lLkNMQVNTX05BTUU/KGU9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoZSksZS5fc2tldGNoPSEwLGUucmVuZGVySW50ZW50PWIudmVydGV4UmVuZGVySW50ZW50LGIudmVydGljZXMucHVzaChlKSk6YShlKTtpZihiLmNyZWF0ZVZlcnRpY2VzJiYiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50IiE9Yy5DTEFTU19OQU1FKWZvcihkPTAsZj1jLmNvbXBvbmVudHMubGVuZ3RoO2Q8Zi0xOysrZCl7ZT1jLmNvbXBvbmVudHNbZF07dmFyIGc9Yy5jb21wb25lbnRzW2QrMV07Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1lLkNMQVNTX05BTUUmJiJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09Zy5DTEFTU19OQU1FJiYoZT1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCgoZS54K2cueCkvMiwoZS55K2cueSkvMiksbnVsbCxiLnZpcnR1YWxTdHlsZSksCmUuZ2VvbWV0cnkucGFyZW50PWMsZS5faW5kZXg9ZCsxLGUuX3NrZXRjaD0hMCxiLnZpcnR1YWxWZXJ0aWNlcy5wdXNoKGUpKX19fXRoaXMudmVydGljZXM9W107dGhpcy52aXJ0dWFsVmVydGljZXM9W107dmFyIGI9dGhpczthLmNhbGwodGhpcyx0aGlzLmZlYXR1cmUuZ2VvbWV0cnkpO3RoaXMubGF5ZXIuYWRkRmVhdHVyZXModGhpcy52aXJ0dWFsVmVydGljZXMse3NpbGVudDohMH0pO3RoaXMubGF5ZXIuYWRkRmVhdHVyZXModGhpcy52ZXJ0aWNlcyx7c2lsZW50OiEwfSl9LGNvbGxlY3REcmFnSGFuZGxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5mZWF0dXJlLmdlb21ldHJ5LGI9YS5nZXRCb3VuZHMoKS5nZXRDZW50ZXJMb25MYXQoKSxiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGIubG9uLGIubGF0KSxjPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGIpO2IubW92ZT1mdW5jdGlvbihiLGMpe09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQucHJvdG90eXBlLm1vdmUuY2FsbCh0aGlzLApiLGMpO2EubW92ZShiLGMpfTtjLl9za2V0Y2g9ITA7dGhpcy5kcmFnSGFuZGxlPWM7dGhpcy5kcmFnSGFuZGxlLnJlbmRlckludGVudD10aGlzLnZlcnRleFJlbmRlckludGVudDt0aGlzLmxheWVyLmFkZEZlYXR1cmVzKFt0aGlzLmRyYWdIYW5kbGVdLHtzaWxlbnQ6ITB9KX0sY29sbGVjdFJhZGl1c0hhbmRsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZmVhdHVyZS5nZW9tZXRyeSxiPWEuZ2V0Qm91bmRzKCksYz1iLmdldENlbnRlckxvbkxhdCgpLGQ9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYy5sb24sYy5sYXQpLGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYi5yaWdodCxiLmJvdHRvbSksYz1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihiKSxlPXRoaXMubW9kZSZPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5SRVNJWkUsZj10aGlzLm1vZGUmT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUkVTSEFQRSxnPXRoaXMubW9kZSYKT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUk9UQVRFO2IubW92ZT1mdW5jdGlvbihiLGMpe09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQucHJvdG90eXBlLm1vdmUuY2FsbCh0aGlzLGIsYyk7dmFyIGw9dGhpcy54LWQueCxtPXRoaXMueS1kLnkscD1sLWIsbj1tLWM7aWYoZyl7dmFyIHE9TWF0aC5hdGFuMihuLHApLHE9TWF0aC5hdGFuMihtLGwpLXEscT1xKigxODAvTWF0aC5QSSk7YS5yb3RhdGUocSxkKX1pZihlKXt2YXIgcjtmPyhtLz1uLHI9bC9wL20pOihwPU1hdGguc3FydChwKnArbipuKSxtPU1hdGguc3FydChsKmwrbSptKS9wKTthLnJlc2l6ZShtLGQscil9fTtjLl9za2V0Y2g9ITA7dGhpcy5yYWRpdXNIYW5kbGU9Yzt0aGlzLnJhZGl1c0hhbmRsZS5yZW5kZXJJbnRlbnQ9dGhpcy52ZXJ0ZXhSZW5kZXJJbnRlbnQ7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5yYWRpdXNIYW5kbGVdLHtzaWxlbnQ6ITB9KX0sc2V0TWFwOmZ1bmN0aW9uKGEpe3RoaXMuaGFuZGxlcnMuZHJhZy5zZXRNYXAoYSk7Ck9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saGFuZGxlTWFwRXZlbnRzOmZ1bmN0aW9uKGEpeyJyZW1vdmVsYXllciIhPWEudHlwZSYmIm9yZGVyIiE9YS5wcm9wZXJ0eXx8dGhpcy5tb3ZlTGF5ZXJUb1RvcCgpfSxtb3ZlTGF5ZXJUb1RvcDpmdW5jdGlvbigpe3ZhciBhPU1hdGgubWF4KHRoaXMubWFwLlpfSU5ERVhfQkFTRS5GZWF0dXJlLTEsdGhpcy5sYXllci5nZXRaSW5kZXgoKSkrMTt0aGlzLmxheWVyLnNldFpJbmRleChhKX0sbW92ZUxheWVyQmFjazpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5ZXIuZ2V0WkluZGV4KCktMTthPj10aGlzLm1hcC5aX0lOREVYX0JBU0UuRmVhdHVyZT90aGlzLmxheWVyLnNldFpJbmRleChhKTp0aGlzLm1hcC5zZXRMYXllclpJbmRleCh0aGlzLmxheWVyLHRoaXMubWFwLmdldExheWVySW5kZXgodGhpcy5sYXllcikpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZSJ9KTsKT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUkVTSEFQRT0xO09wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJFU0laRT0yO09wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJPVEFURT00O09wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLkRSQUc9ODtPcGVuTGF5ZXJzLkxheWVyLkJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLlhZWix7a2V5Om51bGwsc2VydmVyUmVzb2x1dGlvbnM6WzE1NjU0My4wMzM5MDYyNSw3ODI3MS41MTY5NTMxMjUsMzkxMzUuNzU4NDc2NTYyNSwxOTU2Ny44NzkyMzgyODEyNSw5NzgzLjkzOTYxOTE0MDYyNSw0ODkxLjk2OTgwOTU3MDMxMjUsMjQ0NS45ODQ5MDQ3ODUxNTYyLDEyMjIuOTkyNDUyMzkyNTc4MSw2MTEuNDk2MjI2MTk2Mjg5MSwzMDUuNzQ4MTEzMDk4MTQ0NTMsMTUyLjg3NDA1NjU0OTA3MjI2LDc2LjQzNzAyODI3NDUzNjEzLDM4LjIxODUxNDEzNzI2ODA2NiwxOS4xMDkyNTcwNjg2MzQwMzMsOS41NTQ2Mjg1MzQzMTcwMTcsNC43NzczMTQyNjcxNTg1MDgsMi4zODg2NTcxMzM1NzkyNTQsMS4xOTQzMjg1NjY3ODk2MjcsMC41OTcxNjQyODMzOTQ4MTM1LDAuMjk4NTgyMTQxNjk3NDA2NzcsMC4xNDkyOTEwNzA4NDg3MDMzOCwwLjA3NDY0NTUzNTQyNDM1MTY5XSxhdHRyaWJ1dGlvblRlbXBsYXRlOic8c3BhbiBjbGFzcz0ib2xCaW5nQXR0cmlidXRpb24gJHt0eXBlfSI+PGRpdj48YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cDovL3d3dy5iaW5nLmNvbS9tYXBzLyI+PGltZyBzcmM9IiR7bG9nb30iIC8+PC9hPjwvZGl2PiR7Y29weXJpZ2h0c308YSBzdHlsZT0id2hpdGUtc3BhY2U6IG5vd3JhcCIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHA6Ly93d3cubWljcm9zb2Z0LmNvbS9tYXBzL3Byb2R1Y3QvdGVybXMuaHRtbCI+VGVybXMgb2YgVXNlPC9hPjwvc3Bhbj4nLAptZXRhZGF0YTpudWxsLHByb3RvY29sUmVnZXg6L15odHRwOi9pLHR5cGU6IlJvYWQiLGN1bHR1cmU6ImVuLVVTIixtZXRhZGF0YVBhcmFtczpudWxsLHRpbGVPcHRpb25zOm51bGwscHJvdG9jb2w6fndpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoImh0dHAiKT8iIjoiaHR0cDoiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7c3BoZXJpY2FsTWVyY2F0b3I6ITB9LGEpO09wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2EubmFtZXx8IkJpbmcgIisoYS50eXBlfHx0aGlzLnR5cGUpLG51bGwsYV0pO3RoaXMudGlsZU9wdGlvbnM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7Y3Jvc3NPcmlnaW5LZXl3b3JkOiJhbm9ueW1vdXMifSx0aGlzLm9wdGlvbnMudGlsZU9wdGlvbnMpO3RoaXMubG9hZE1ldGFkYXRhKCl9LGxvYWRNZXRhZGF0YTpmdW5jdGlvbigpe3RoaXMuX2NhbGxiYWNrSWQ9CiJfY2FsbGJhY2tfIit0aGlzLmlkLnJlcGxhY2UoL1wuL2csIl8iKTt3aW5kb3dbdGhpcy5fY2FsbGJhY2tJZF09T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKE9wZW5MYXllcnMuTGF5ZXIuQmluZy5wcm9jZXNzTWV0YWRhdGEsdGhpcyk7dmFyIGE9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2tleTp0aGlzLmtleSxqc29ucDp0aGlzLl9jYWxsYmFja0lkLGluY2x1ZGU6IkltYWdlcnlQcm92aWRlcnMifSx0aGlzLm1ldGFkYXRhUGFyYW1zKSxhPXRoaXMucHJvdG9jb2wrIi8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9JbWFnZXJ5L01ldGFkYXRhLyIrdGhpcy50eXBlKyI/IitPcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKGEpLGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7Yi50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO2Iuc3JjPWE7Yi5pZD10aGlzLl9jYWxsYmFja0lkO2RvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoYil9LAppbml0TGF5ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1ldGFkYXRhLnJlc291cmNlU2V0c1swXS5yZXNvdXJjZXNbMF0sYj1hLmltYWdlVXJsLnJlcGxhY2UoIntxdWFka2V5fSIsIiR7cXVhZGtleX0iKSxiPWIucmVwbGFjZSgie2N1bHR1cmV9Iix0aGlzLmN1bHR1cmUpLGI9Yi5yZXBsYWNlKHRoaXMucHJvdG9jb2xSZWdleCx0aGlzLnByb3RvY29sKTt0aGlzLnVybD1bXTtmb3IodmFyIGM9MDtjPGEuaW1hZ2VVcmxTdWJkb21haW5zLmxlbmd0aDsrK2MpdGhpcy51cmwucHVzaChiLnJlcGxhY2UoIntzdWJkb21haW59IixhLmltYWdlVXJsU3ViZG9tYWluc1tjXSkpO3RoaXMuYWRkT3B0aW9ucyh7bWF4UmVzb2x1dGlvbjpNYXRoLm1pbih0aGlzLnNlcnZlclJlc29sdXRpb25zW2Euem9vbU1pbl0sdGhpcy5tYXhSZXNvbHV0aW9ufHxOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLG51bVpvb21MZXZlbHM6TWF0aC5taW4oYS56b29tTWF4KzEtYS56b29tTWluLHRoaXMubnVtWm9vbUxldmVscyl9LAohMCk7dGhpcy5pc0Jhc2VMYXllcnx8dGhpcy5yZWRyYXcoKTt0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uKCl9LGdldFVSTDpmdW5jdGlvbihhKXtpZih0aGlzLnVybCl7dmFyIGI9dGhpcy5nZXRYWVooYSk7YT1iLng7Zm9yKHZhciBjPWIueSxiPWIueixkPVtdLGU9YjswPGU7LS1lKXt2YXIgZj0iMCIsZz0xPDxlLTE7MCE9KGEmZykmJmYrKzswIT0oYyZnKSYmKGYrKyxmKyspO2QucHVzaChmKX1kPWQuam9pbigiIik7YT10aGlzLnNlbGVjdFVybCgiIithK2MrYix0aGlzLnVybCk7cmV0dXJuIE9wZW5MYXllcnMuU3RyaW5nLmZvcm1hdChhLHtxdWFka2V5OmR9KX19LHVwZGF0ZUF0dHJpYnV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tZXRhZGF0YTtpZihhLnJlc291cmNlU2V0cyYmdGhpcy5tYXAmJnRoaXMubWFwLmNlbnRlcil7dmFyIGI9YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzWzBdLGM9dGhpcy5tYXAuZ2V0RXh0ZW50KCkudHJhbnNmb3JtKHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSwKbmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IikpLGQ9Yi5pbWFnZXJ5UHJvdmlkZXJzfHxbXSxlPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuc2VydmVyUmVzb2x1dGlvbnMsdGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCkpLGI9IiIsZixnLGgsayxsLG0scDtnPTA7Zm9yKGg9ZC5sZW5ndGg7ZzxoOysrZylmb3IoZj1kW2ddLGs9MCxsPWYuY292ZXJhZ2VBcmVhcy5sZW5ndGg7azxsOysraylwPWYuY292ZXJhZ2VBcmVhc1trXSxtPU9wZW5MYXllcnMuQm91bmRzLmZyb21BcnJheShwLmJib3gsITApLGMuaW50ZXJzZWN0c0JvdW5kcyhtKSYmKGU8PXAuem9vbU1heCYmZT49cC56b29tTWluKSYmKGIrPWYuYXR0cmlidXRpb24rIiAiKTthPWEuYnJhbmRMb2dvVXJpLnJlcGxhY2UodGhpcy5wcm90b2NvbFJlZ2V4LHRoaXMucHJvdG9jb2wpO3RoaXMuYXR0cmlidXRpb249T3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KHRoaXMuYXR0cmlidXRpb25UZW1wbGF0ZSx7dHlwZTp0aGlzLnR5cGUudG9Mb3dlckNhc2UoKSwKbG9nbzphLGNvcHlyaWdodHM6Yn0pO3RoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6ImF0dHJpYnV0aW9uIn0pfX0sc2V0TWFwOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYXllci5YWVoucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3ZlZW5kIix0aGlzLHRoaXMudXBkYXRlQXR0cmlidXRpb24pfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5CaW5nKHRoaXMub3B0aW9ucykpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLFthXSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdmVlbmQiLHRoaXMsdGhpcy51cGRhdGVBdHRyaWJ1dGlvbik7T3BlbkxheWVycy5MYXllci5YWVoucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5CaW5nIn0pO09wZW5MYXllcnMuTGF5ZXIuQmluZy5wcm9jZXNzTWV0YWRhdGE9ZnVuY3Rpb24oYSl7dGhpcy5tZXRhZGF0YT1hO3RoaXMuaW5pdExheWVyKCk7YT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9jYWxsYmFja0lkKTthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk7d2luZG93W3RoaXMuX2NhbGxiYWNrSWRdPXZvaWQgMDtkZWxldGUgdGhpcy5fY2FsbGJhY2tJZH07T3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24se2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIl0sc3BsaXQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9bnVsbCxkPWImJmIubXV0dWFsLGUsZixnLGgsaz1bXSxsPVthXSxtPTAscD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO208cDsrK20pe2Y9dGhpcy5jb21wb25lbnRzW21dO2c9ITE7Zm9yKHZhciBuPTA7bjxsLmxlbmd0aDsrK24paWYoZT1mLnNwbGl0KGxbbl0sYikpe2lmKGQpe2c9ZVswXTtmb3IodmFyIHE9MCxyPWcubGVuZ3RoO3E8cjsrK3EpMD09PXEmJmsubGVuZ3RoP2tbay5sZW5ndGgtMV0uYWRkQ29tcG9uZW50KGdbcV0pOmsucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoW2dbcV1dKSk7Zz0hMDtlPWVbMV19aWYoZS5sZW5ndGgpe2UudW5zaGlmdChuLAoxKTtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGwsZSk7YnJlYWt9fWd8fChrLmxlbmd0aD9rW2subGVuZ3RoLTFdLmFkZENvbXBvbmVudChmLmNsb25lKCkpOms9W25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhmLmNsb25lKCkpXSl9ayYmMTxrLmxlbmd0aD9nPSEwOms9W107bCYmMTxsLmxlbmd0aD9oPSEwOmw9W107aWYoZ3x8aCljPWQ/W2ssbF06bDtyZXR1cm4gY30sc3BsaXRXaXRoOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbCxkPWImJmIubXV0dWFsLGUsZixnLGgsayxsO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcpe2w9W107az1bYV07Zm9yKHZhciBtPTAscD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO208cDsrK20pe2c9ITE7Zj10aGlzLmNvbXBvbmVudHNbbV07Zm9yKHZhciBuPTA7bjxrLmxlbmd0aDsrK24paWYoZT1rW25dLnNwbGl0KGYsYikpe2QmJihnPWVbMF0sZy5sZW5ndGgmJihnLnVuc2hpZnQobiwKMSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShrLGcpLG4rPWcubGVuZ3RoLTIpLGU9ZVsxXSwwPT09ZS5sZW5ndGgmJihlPVtmLmNsb25lKCldKSk7Zz0wO2Zvcih2YXIgcT1lLmxlbmd0aDtnPHE7KytnKTA9PT1nJiZsLmxlbmd0aD9sW2wubGVuZ3RoLTFdLmFkZENvbXBvbmVudChlW2ddKTpsLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKFtlW2ddXSkpO2c9ITB9Z3x8KGwubGVuZ3RoP2xbbC5sZW5ndGgtMV0uYWRkQ29tcG9uZW50KGYuY2xvbmUoKSk6bD1bbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKFtmLmNsb25lKCldKV0pfX1lbHNlIGM9YS5zcGxpdCh0aGlzKTtrJiYxPGsubGVuZ3RoP2g9ITA6az1bXTtsJiYxPGwubGVuZ3RoP2c9ITA6bD1bXTtpZihofHxnKWM9ZD9bayxsXTpsO3JldHVybiBjfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdD1PcGVuTGF5ZXJzLkNsYXNzKHtvcHRpb25zOm51bGwsZXh0ZXJuYWxQcm9qZWN0aW9uOm51bGwsaW50ZXJuYWxQcm9qZWN0aW9uOm51bGwsZGF0YTpudWxsLGtlZXBEYXRhOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMub3B0aW9ucz1hfSxkZXN0cm95OmZ1bmN0aW9uKCl7fSxyZWFkOmZ1bmN0aW9uKGEpe3Rocm93IEVycm9yKCJSZWFkIG5vdCBpbXBsZW1lbnRlZC4iKTt9LHdyaXRlOmZ1bmN0aW9uKGEpe3Rocm93IEVycm9yKCJXcml0ZSBub3QgaW1wbGVtZW50ZWQuIik7fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5YTUw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdCx7bmFtZXNwYWNlczpudWxsLG5hbWVzcGFjZUFsaWFzOm51bGwsZGVmYXVsdFByZWZpeDpudWxsLHJlYWRlcnM6e30sd3JpdGVyczp7fSx4bWxkb206bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3dpbmRvdy5BY3RpdmVYT2JqZWN0JiYodGhpcy54bWxkb209bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSk7T3BlbkxheWVycy5Gb3JtYXQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMubmFtZXNwYWNlcz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMubmFtZXNwYWNlcyk7dGhpcy5uYW1lc3BhY2VBbGlhcz17fTtmb3IodmFyIGIgaW4gdGhpcy5uYW1lc3BhY2VzKXRoaXMubmFtZXNwYWNlQWxpYXNbdGhpcy5uYW1lc3BhY2VzW2JdXT1ifSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy54bWxkb209bnVsbDtPcGVuTGF5ZXJzLkZvcm1hdC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLAphcmd1bWVudHMpfSxzZXROYW1lc3BhY2U6ZnVuY3Rpb24oYSxiKXt0aGlzLm5hbWVzcGFjZXNbYV09Yjt0aGlzLm5hbWVzcGFjZUFsaWFzW2JdPWF9LHJlYWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5pbmRleE9mKCI8Iik7MDxiJiYoYT1hLnN1YnN0cmluZyhiKSk7Yj1PcGVuTGF5ZXJzLlV0aWwuVHJ5KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe3ZhciBiO2I9d2luZG93LkFjdGl2ZVhPYmplY3QmJiF0aGlzLnhtbGRvbT9uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpOnRoaXMueG1sZG9tO2IubG9hZFhNTChhKTtyZXR1cm4gYn0sdGhpcyksZnVuY3Rpb24oKXtyZXR1cm4obmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKGEsInRleHQveG1sIil9LGZ1bmN0aW9uKCl7dmFyIGI9bmV3IFhNTEh0dHBSZXF1ZXN0O2Iub3BlbigiR0VUIiwiZGF0YTp0ZXh0L3htbDtjaGFyc2V0PXV0Zi04LCIrZW5jb2RlVVJJQ29tcG9uZW50KGEpLCExKTtiLm92ZXJyaWRlTWltZVR5cGUmJgpiLm92ZXJyaWRlTWltZVR5cGUoInRleHQveG1sIik7Yi5zZW5kKG51bGwpO3JldHVybiBiLnJlc3BvbnNlWE1MfSk7dGhpcy5rZWVwRGF0YSYmKHRoaXMuZGF0YT1iKTtyZXR1cm4gYn0sd3JpdGU6ZnVuY3Rpb24oYSl7aWYodGhpcy54bWxkb20pYT1hLnhtbDtlbHNle3ZhciBiPW5ldyBYTUxTZXJpYWxpemVyO2lmKDE9PWEubm9kZVR5cGUpe3ZhciBjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50KCIiLCIiLG51bGwpO2MuaW1wb3J0Tm9kZSYmKGE9Yy5pbXBvcnROb2RlKGEsITApKTtjLmFwcGVuZENoaWxkKGEpO2E9Yi5zZXJpYWxpemVUb1N0cmluZyhjKX1lbHNlIGE9Yi5zZXJpYWxpemVUb1N0cmluZyhhKX1yZXR1cm4gYX0sY3JlYXRlRWxlbWVudE5TOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMueG1sZG9tPyJzdHJpbmciPT10eXBlb2YgYT90aGlzLnhtbGRvbS5jcmVhdGVOb2RlKDEsYixhKTp0aGlzLnhtbGRvbS5jcmVhdGVOb2RlKDEsYiwiIik6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGEsCmIpfSxjcmVhdGVEb2N1bWVudEZyYWdtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueG1sZG9tP3RoaXMueG1sZG9tLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTpkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9LGNyZWF0ZVRleHROb2RlOmZ1bmN0aW9uKGEpeyJzdHJpbmciIT09dHlwZW9mIGEmJihhPVN0cmluZyhhKSk7cmV0dXJuIHRoaXMueG1sZG9tP3RoaXMueG1sZG9tLmNyZWF0ZVRleHROb2RlKGEpOmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpfSxnZXRFbGVtZW50c0J5VGFnTmFtZU5TOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXTtpZihhLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMpZD1hLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYixjKTtlbHNle2E9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpO2Zvcih2YXIgZSxmLGc9MCxoPWEubGVuZ3RoO2c8aDsrK2cpaWYoZT1hW2ddLGY9ZS5wcmVmaXg/ZS5wcmVmaXgrIjoiK2M6YywiKiI9PWN8fGY9PWUubm9kZU5hbWUpIioiIT0KYiYmYiE9ZS5uYW1lc3BhY2VVUkl8fGQucHVzaChlKX1yZXR1cm4gZH0sZ2V0QXR0cmlidXRlTm9kZU5TOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1udWxsO2lmKGEuZ2V0QXR0cmlidXRlTm9kZU5TKWQ9YS5nZXRBdHRyaWJ1dGVOb2RlTlMoYixjKTtlbHNle2E9YS5hdHRyaWJ1dGVzO2Zvcih2YXIgZSxmLGc9MCxoPWEubGVuZ3RoO2c8aDsrK2cpaWYoZT1hW2ddLGUubmFtZXNwYWNlVVJJPT1iJiYoZj1lLnByZWZpeD9lLnByZWZpeCsiOiIrYzpjLGY9PWUubm9kZU5hbWUpKXtkPWU7YnJlYWt9fXJldHVybiBkfSxnZXRBdHRyaWJ1dGVOUzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9IiI7aWYoYS5nZXRBdHRyaWJ1dGVOUylkPWEuZ2V0QXR0cmlidXRlTlMoYixjKXx8IiI7ZWxzZSBpZihhPXRoaXMuZ2V0QXR0cmlidXRlTm9kZU5TKGEsYixjKSlkPWEubm9kZVZhbHVlO3JldHVybiBkfSxnZXRDaGlsZFZhbHVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8IiI7aWYoYSlmb3IodmFyIGQ9YS5maXJzdENoaWxkO2Q7ZD0KZC5uZXh0U2libGluZylzd2l0Y2goZC5ub2RlVHlwZSl7Y2FzZSAzOmNhc2UgNDpjKz1kLm5vZGVWYWx1ZX1yZXR1cm4gY30saXNTaW1wbGVDb250ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPSEwO2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZigxPT09YS5ub2RlVHlwZSl7Yj0hMTticmVha31yZXR1cm4gYn0sY29udGVudFR5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9ITEsYz0hMSxkPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5DT05URU5UX1RZUEUuRU1QVFk7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKXtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSAxOmM9ITA7YnJlYWs7Y2FzZSA4OmJyZWFrO2RlZmF1bHQ6Yj0hMH1pZihjJiZiKWJyZWFrfWlmKGMmJmIpZD1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwuQ09OVEVOVF9UWVBFLk1JWEVEO2Vsc2V7aWYoYylyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLkNPTlRFTlRfVFlQRS5DT01QTEVYO2lmKGIpcmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5DT05URU5UX1RZUEUuU0lNUExFfXJldHVybiBkfSwKaGFzQXR0cmlidXRlTlM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSExO3JldHVybiBkPWEuaGFzQXR0cmlidXRlTlM/YS5oYXNBdHRyaWJ1dGVOUyhiLGMpOiEhdGhpcy5nZXRBdHRyaWJ1dGVOb2RlTlMoYSxiLGMpfSxzZXRBdHRyaWJ1dGVOUzpmdW5jdGlvbihhLGIsYyxkKXtpZihhLnNldEF0dHJpYnV0ZU5TKWEuc2V0QXR0cmlidXRlTlMoYixjLGQpO2Vsc2UgaWYodGhpcy54bWxkb20pYj8oYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlTm9kZSgyLGMsYiksYi5ub2RlVmFsdWU9ZCxhLnNldEF0dHJpYnV0ZU5vZGUoYikpOmEuc2V0QXR0cmlidXRlKGMsZCk7ZWxzZSB0aHJvdyJzZXRBdHRyaWJ1dGVOUyBub3QgaW1wbGVtZW50ZWQiO30sY3JlYXRlRWxlbWVudE5TUGx1czpmdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9Yi51cml8fHRoaXMubmFtZXNwYWNlc1tiLnByZWZpeF07Y3x8KGM9YS5pbmRleE9mKCI6IiksYz10aGlzLm5hbWVzcGFjZXNbYS5zdWJzdHJpbmcoMCxjKV0pO2N8fAooYz10aGlzLm5hbWVzcGFjZXNbdGhpcy5kZWZhdWx0UHJlZml4XSk7Yz10aGlzLmNyZWF0ZUVsZW1lbnROUyhjLGEpO2IuYXR0cmlidXRlcyYmdGhpcy5zZXRBdHRyaWJ1dGVzKGMsYi5hdHRyaWJ1dGVzKTt2YXIgZD1iLnZhbHVlO251bGwhPWQmJmMuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShkKSk7cmV0dXJuIGN9LHNldEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU7Zm9yKGUgaW4gYiludWxsIT1iW2VdJiZiW2VdLnRvU3RyaW5nJiYoYz1iW2VdLnRvU3RyaW5nKCksZD10aGlzLm5hbWVzcGFjZXNbZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoIjoiKSldfHxudWxsLHRoaXMuc2V0QXR0cmlidXRlTlMoYSxkLGUsYykpfSxyZWFkTm9kZTpmdW5jdGlvbihhLGIpe2J8fChiPXt9KTt2YXIgYz10aGlzLnJlYWRlcnNbYS5uYW1lc3BhY2VVUkk/dGhpcy5uYW1lc3BhY2VBbGlhc1thLm5hbWVzcGFjZVVSSV06dGhpcy5kZWZhdWx0UHJlZml4XTtpZihjKXt2YXIgZD0KYS5sb2NhbE5hbWV8fGEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKTsoYz1jW2RdfHxjWyIqIl0pJiZjLmFwcGx5KHRoaXMsW2EsYl0pfXJldHVybiBifSxyZWFkQ2hpbGROb2RlczpmdW5jdGlvbihhLGIpe2J8fChiPXt9KTtmb3IodmFyIGM9YS5jaGlsZE5vZGVzLGQsZT0wLGY9Yy5sZW5ndGg7ZTxmOysrZSlkPWNbZV0sMT09ZC5ub2RlVHlwZSYmdGhpcy5yZWFkTm9kZShkLGIpO3JldHVybiBifSx3cml0ZU5vZGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9YS5pbmRleE9mKCI6Iik7MDxlPyhkPWEuc3Vic3RyaW5nKDAsZSksYT1hLnN1YnN0cmluZyhlKzEpKTpkPWM/dGhpcy5uYW1lc3BhY2VBbGlhc1tjLm5hbWVzcGFjZVVSSV06dGhpcy5kZWZhdWx0UHJlZml4O2I9dGhpcy53cml0ZXJzW2RdW2FdLmFwcGx5KHRoaXMsW2JdKTtjJiZjLmFwcGVuZENoaWxkKGIpO3JldHVybiBifSxnZXRDaGlsZEVsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYSYmdGhpcy5nZXRUaGlzT3JOZXh0RWwoYS5maXJzdENoaWxkLApiLGMpfSxnZXROZXh0RWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhJiZ0aGlzLmdldFRoaXNPck5leHRFbChhLm5leHRTaWJsaW5nLGIsYyl9LGdldFRoaXNPck5leHRFbDpmdW5jdGlvbihhLGIsYyl7YTpmb3IoO2E7YT1hLm5leHRTaWJsaW5nKXN3aXRjaChhLm5vZGVUeXBlKXtjYXNlIDE6aWYoIShiJiZiIT09KGEubG9jYWxOYW1lfHxhLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCkpfHxjJiZjIT09YS5uYW1lc3BhY2VVUkkpKWJyZWFrIGE7YT1udWxsO2JyZWFrIGE7Y2FzZSAzOmlmKC9eXHMqJC8udGVzdChhLm5vZGVWYWx1ZSkpYnJlYWs7Y2FzZSA0OmNhc2UgNjpjYXNlIDEyOmNhc2UgMTA6Y2FzZSAxMTphPW51bGw7YnJlYWsgYX1yZXR1cm4gYXx8bnVsbH0sbG9va3VwTmFtZXNwYWNlVVJJOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbDtpZihhKWlmKGEubG9va3VwTmFtZXNwYWNlVVJJKWM9YS5sb29rdXBOYW1lc3BhY2VVUkkoYik7ZWxzZSBhOnN3aXRjaChhLm5vZGVUeXBlKXtjYXNlIDE6aWYobnVsbCE9PQphLm5hbWVzcGFjZVVSSSYmYS5wcmVmaXg9PT1iKXtjPWEubmFtZXNwYWNlVVJJO2JyZWFrIGF9aWYoYz1hLmF0dHJpYnV0ZXMubGVuZ3RoKWZvcih2YXIgZCxlPTA7ZTxjOysrZSlpZihkPWEuYXR0cmlidXRlc1tlXSwieG1sbnMiPT09ZC5wcmVmaXgmJmQubmFtZT09PSJ4bWxuczoiK2Ipe2M9ZC52YWx1ZXx8bnVsbDticmVhayBhfWVsc2UgaWYoInhtbG5zIj09PWQubmFtZSYmbnVsbD09PWIpe2M9ZC52YWx1ZXx8bnVsbDticmVhayBhfWM9dGhpcy5sb29rdXBOYW1lc3BhY2VVUkkoYS5wYXJlbnROb2RlLGIpO2JyZWFrIGE7Y2FzZSAyOmM9dGhpcy5sb29rdXBOYW1lc3BhY2VVUkkoYS5vd25lckVsZW1lbnQsYik7YnJlYWsgYTtjYXNlIDk6Yz10aGlzLmxvb2t1cE5hbWVzcGFjZVVSSShhLmRvY3VtZW50RWxlbWVudCxiKTticmVhayBhO2Nhc2UgNjpjYXNlIDEyOmNhc2UgMTA6Y2FzZSAxMTpicmVhayBhO2RlZmF1bHQ6Yz10aGlzLmxvb2t1cE5hbWVzcGFjZVVSSShhLnBhcmVudE5vZGUsCmIpfXJldHVybiBjfSxnZXRYTUxEb2M6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuZG9jdW1lbnR8fHRoaXMueG1sZG9tfHwoZG9jdW1lbnQuaW1wbGVtZW50YXRpb24mJmRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50P09wZW5MYXllcnMuRm9ybWF0LlhNTC5kb2N1bWVudD1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudCgiIiwiIixudWxsKTohdGhpcy54bWxkb20mJndpbmRvdy5BY3RpdmVYT2JqZWN0JiYodGhpcy54bWxkb209bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSkpO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuZG9jdW1lbnR8fHRoaXMueG1sZG9tfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5YTUwifSk7T3BlbkxheWVycy5Gb3JtYXQuWE1MLkNPTlRFTlRfVFlQRT17RU1QVFk6MCxTSU1QTEU6MSxDT01QTEVYOjIsTUlYRUQ6M307Ck9wZW5MYXllcnMuRm9ybWF0LlhNTC5sb29rdXBOYW1lc3BhY2VVUkk9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUubG9va3VwTmFtZXNwYWNlVVJJLE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUpO09wZW5MYXllcnMuRm9ybWF0LlhNTC5kb2N1bWVudD1udWxsO09wZW5MYXllcnMuRm9ybWF0Lk9HQ0V4Y2VwdGlvblJlcG9ydD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7bmFtZXNwYWNlczp7b2djOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nYyJ9LHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2d9LGRlZmF1bHRQcmVmaXg6Im9nYyIscmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO3ZhciBiPXtleGNlcHRpb25SZXBvcnQ6bnVsbH07YS5kb2N1bWVudEVsZW1lbnQmJih0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYiksbnVsbD09PWIuZXhjZXB0aW9uUmVwb3J0JiYoYj0obmV3IE9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbikucmVhZChhKSkpO3JldHVybiBifSxyZWFkZXJzOntvZ2M6e1NlcnZpY2VFeGNlcHRpb25SZXBvcnQ6ZnVuY3Rpb24oYSwKYil7Yi5leGNlcHRpb25SZXBvcnQ9e2V4Y2VwdGlvbnM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmV4Y2VwdGlvblJlcG9ydCl9LFNlcnZpY2VFeGNlcHRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y29kZTphLmdldEF0dHJpYnV0ZSgiY29kZSIpLGxvY2F0b3I6YS5nZXRBdHRyaWJ1dGUoImxvY2F0b3IiKSx0ZXh0OnRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX07Yi5leGNlcHRpb25zLnB1c2goYyl9fX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuT0dDRXhjZXB0aW9uUmVwb3J0In0pO09wZW5MYXllcnMuRm9ybWF0LlhNTC5WZXJzaW9uZWRPR0M9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse2RlZmF1bHRWZXJzaW9uOm51bGwsdmVyc2lvbjpudWxsLHByb2ZpbGU6bnVsbCxhbGxvd0ZhbGxiYWNrOiExLG5hbWU6bnVsbCxzdHJpbmdpZnlPdXRwdXQ6ITEscGFyc2VyOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO2E9dGhpcy5DTEFTU19OQU1FO3RoaXMubmFtZT1hLnN1YnN0cmluZyhhLmxhc3RJbmRleE9mKCIuIikrMSl9LGdldFZlcnNpb246ZnVuY3Rpb24oYSxiKXt2YXIgYzthPyhjPXRoaXMudmVyc2lvbixjfHwoYz1hLmdldEF0dHJpYnV0ZSgidmVyc2lvbiIpLGN8fChjPXRoaXMuZGVmYXVsdFZlcnNpb24pKSk6Yz1iJiZiLnZlcnNpb258fHRoaXMudmVyc2lvbnx8dGhpcy5kZWZhdWx0VmVyc2lvbjtyZXR1cm4gY30sZ2V0UGFyc2VyOmZ1bmN0aW9uKGEpe2E9CmF8fHRoaXMuZGVmYXVsdFZlcnNpb247dmFyIGI9dGhpcy5wcm9maWxlPyJfIit0aGlzLnByb2ZpbGU6IiI7aWYoIXRoaXMucGFyc2VyfHx0aGlzLnBhcnNlci5WRVJTSU9OIT1hKXt2YXIgYz1PcGVuTGF5ZXJzLkZvcm1hdFt0aGlzLm5hbWVdWyJ2IithLnJlcGxhY2UoL1wuL2csIl8iKStiXTtpZighYyYmKCIiIT09YiYmdGhpcy5hbGxvd0ZhbGxiYWNrJiYoYj0iIixjPU9wZW5MYXllcnMuRm9ybWF0W3RoaXMubmFtZV1bInYiK2EucmVwbGFjZSgvXC4vZywiXyIpXSksIWMpKXRocm93IkNhbid0IGZpbmQgYSAiK3RoaXMubmFtZSsiIHBhcnNlciBmb3IgdmVyc2lvbiAiK2ErYjt0aGlzLnBhcnNlcj1uZXcgYyh0aGlzLm9wdGlvbnMpfXJldHVybiB0aGlzLnBhcnNlcn0sd3JpdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldFZlcnNpb24obnVsbCxiKTt0aGlzLnBhcnNlcj10aGlzLmdldFBhcnNlcihjKTtjPXRoaXMucGFyc2VyLndyaXRlKGEsYik7cmV0dXJuITE9PT10aGlzLnN0cmluZ2lmeU91dHB1dD8KYzpPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2NdKX0scmVhZDpmdW5jdGlvbihhLGIpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7dmFyIGM9dGhpcy5nZXRWZXJzaW9uKGEuZG9jdW1lbnRFbGVtZW50KTt0aGlzLnBhcnNlcj10aGlzLmdldFBhcnNlcihjKTt2YXIgZD10aGlzLnBhcnNlci5yZWFkKGEsYiksZT10aGlzLnBhcnNlci5lcnJvclByb3BlcnR5fHxudWxsO251bGwhPT1lJiZ2b2lkIDA9PT1kW2VdJiYoZT1uZXcgT3BlbkxheWVycy5Gb3JtYXQuT0dDRXhjZXB0aW9uUmVwb3J0LGQuZXJyb3I9ZS5yZWFkKGEpKTtkLnZlcnNpb249YztyZXR1cm4gZH0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQyJ9KTtPcGVuTGF5ZXJzLkZlYXR1cmU9T3BlbkxheWVycy5DbGFzcyh7bGF5ZXI6bnVsbCxpZDpudWxsLGxvbmxhdDpudWxsLGRhdGE6bnVsbCxtYXJrZXI6bnVsbCxwb3B1cENsYXNzOm51bGwscG9wdXA6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmxheWVyPWE7dGhpcy5sb25sYXQ9Yjt0aGlzLmRhdGE9bnVsbCE9Yz9jOnt9O3RoaXMuaWQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuQ0xBU1NfTkFNRSsiXyIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7bnVsbCE9dGhpcy5sYXllciYmbnVsbCE9dGhpcy5sYXllci5tYXAmJm51bGwhPXRoaXMucG9wdXAmJnRoaXMubGF5ZXIubWFwLnJlbW92ZVBvcHVwKHRoaXMucG9wdXApO251bGwhPXRoaXMubGF5ZXImJm51bGwhPXRoaXMubWFya2VyJiZ0aGlzLmxheWVyLnJlbW92ZU1hcmtlcih0aGlzLm1hcmtlcik7dGhpcy5kYXRhPXRoaXMubG9ubGF0PXRoaXMuaWQ9dGhpcy5sYXllcj1udWxsO251bGwhPXRoaXMubWFya2VyJiYKKHRoaXMuZGVzdHJveU1hcmtlcih0aGlzLm1hcmtlciksdGhpcy5tYXJrZXI9bnVsbCk7bnVsbCE9dGhpcy5wb3B1cCYmKHRoaXMuZGVzdHJveVBvcHVwKHRoaXMucG9wdXApLHRoaXMucG9wdXA9bnVsbCl9LG9uU2NyZWVuOmZ1bmN0aW9uKCl7dmFyIGE9ITE7bnVsbCE9dGhpcy5sYXllciYmbnVsbCE9dGhpcy5sYXllci5tYXAmJihhPXRoaXMubGF5ZXIubWFwLmdldEV4dGVudCgpLmNvbnRhaW5zTG9uTGF0KHRoaXMubG9ubGF0KSk7cmV0dXJuIGF9LGNyZWF0ZU1hcmtlcjpmdW5jdGlvbigpe251bGwhPXRoaXMubG9ubGF0JiYodGhpcy5tYXJrZXI9bmV3IE9wZW5MYXllcnMuTWFya2VyKHRoaXMubG9ubGF0LHRoaXMuZGF0YS5pY29uKSk7cmV0dXJuIHRoaXMubWFya2VyfSxkZXN0cm95TWFya2VyOmZ1bmN0aW9uKCl7dGhpcy5tYXJrZXIuZGVzdHJveSgpfSxjcmVhdGVQb3B1cDpmdW5jdGlvbihhKXtudWxsIT10aGlzLmxvbmxhdCYmKHRoaXMucG9wdXB8fCh0aGlzLnBvcHVwPW5ldyAodGhpcy5wb3B1cENsYXNzPwp0aGlzLnBvcHVwQ2xhc3M6T3BlbkxheWVycy5Qb3B1cC5BbmNob3JlZCkodGhpcy5pZCsiX3BvcHVwIix0aGlzLmxvbmxhdCx0aGlzLmRhdGEucG9wdXBTaXplLHRoaXMuZGF0YS5wb3B1cENvbnRlbnRIVE1MLHRoaXMubWFya2VyP3RoaXMubWFya2VyLmljb246bnVsbCxhKSksbnVsbCE9dGhpcy5kYXRhLm92ZXJmbG93JiYodGhpcy5wb3B1cC5jb250ZW50RGl2LnN0eWxlLm92ZXJmbG93PXRoaXMuZGF0YS5vdmVyZmxvdyksdGhpcy5wb3B1cC5mZWF0dXJlPXRoaXMpO3JldHVybiB0aGlzLnBvcHVwfSxkZXN0cm95UG9wdXA6ZnVuY3Rpb24oKXt0aGlzLnBvcHVwJiYodGhpcy5wb3B1cC5mZWF0dXJlPW51bGwsdGhpcy5wb3B1cC5kZXN0cm95KCksdGhpcy5wb3B1cD1udWxsKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5GZWF0dXJlIn0pO09wZW5MYXllcnMuU3RhdGU9e1VOS05PV046IlVua25vd24iLElOU0VSVDoiSW5zZXJ0IixVUERBVEU6IlVwZGF0ZSIsREVMRVRFOiJEZWxldGUifTsKT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvcj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRmVhdHVyZSx7ZmlkOm51bGwsZ2VvbWV0cnk6bnVsbCxhdHRyaWJ1dGVzOm51bGwsYm91bmRzOm51bGwsc3RhdGU6bnVsbCxzdHlsZTpudWxsLHVybDpudWxsLHJlbmRlckludGVudDoiZGVmYXVsdCIsbW9kaWZpZWQ6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkZlYXR1cmUucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbbnVsbCxudWxsLGJdKTt0aGlzLmxvbmxhdD1udWxsO3RoaXMuZ2VvbWV0cnk9YT9hOm51bGw7dGhpcy5zdGF0ZT1udWxsO3RoaXMuYXR0cmlidXRlcz17fTtiJiYodGhpcy5hdHRyaWJ1dGVzPU9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5hdHRyaWJ1dGVzLGIpKTt0aGlzLnN0eWxlPWM/YzpudWxsfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5sYXllciYmKHRoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXModGhpcyksdGhpcy5sYXllcj0KbnVsbCk7dGhpcy5tb2RpZmllZD10aGlzLmdlb21ldHJ5PW51bGw7T3BlbkxheWVycy5GZWF0dXJlLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IodGhpcy5nZW9tZXRyeT90aGlzLmdlb21ldHJ5LmNsb25lKCk6bnVsbCx0aGlzLmF0dHJpYnV0ZXMsdGhpcy5zdHlsZSl9LG9uU2NyZWVuOmZ1bmN0aW9uKGEpe3ZhciBiPSExO3RoaXMubGF5ZXImJnRoaXMubGF5ZXIubWFwJiYoYj10aGlzLmxheWVyLm1hcC5nZXRFeHRlbnQoKSxhPyhhPXRoaXMuZ2VvbWV0cnkuZ2V0Qm91bmRzKCksYj1iLmludGVyc2VjdHNCb3VuZHMoYSkpOmI9Yi50b0dlb21ldHJ5KCkuaW50ZXJzZWN0cyh0aGlzLmdlb21ldHJ5KSk7cmV0dXJuIGJ9LGdldFZpc2liaWxpdHk6ZnVuY3Rpb24oKXtyZXR1cm4hKHRoaXMuc3R5bGUmJiJub25lIj09dGhpcy5zdHlsZS5kaXNwbGF5fHwhdGhpcy5sYXllcnx8CnRoaXMubGF5ZXImJnRoaXMubGF5ZXIuc3R5bGVNYXAmJiJub25lIj09dGhpcy5sYXllci5zdHlsZU1hcC5jcmVhdGVTeW1ib2xpemVyKHRoaXMsdGhpcy5yZW5kZXJJbnRlbnQpLmRpc3BsYXl8fHRoaXMubGF5ZXImJiF0aGlzLmxheWVyLmdldFZpc2liaWxpdHkoKSl9LGNyZWF0ZU1hcmtlcjpmdW5jdGlvbigpe3JldHVybiBudWxsfSxkZXN0cm95TWFya2VyOmZ1bmN0aW9uKCl7fSxjcmVhdGVQb3B1cDpmdW5jdGlvbigpe3JldHVybiBudWxsfSxhdFBvaW50OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0hMTt0aGlzLmdlb21ldHJ5JiYoZD10aGlzLmdlb21ldHJ5LmF0UG9pbnQoYSxiLGMpKTtyZXR1cm4gZH0sZGVzdHJveVBvcHVwOmZ1bmN0aW9uKCl7fSxtb3ZlOmZ1bmN0aW9uKGEpe2lmKHRoaXMubGF5ZXImJnRoaXMuZ2VvbWV0cnkubW92ZSl7YT0iT3BlbkxheWVycy5Mb25MYXQiPT1hLkNMQVNTX05BTUU/dGhpcy5sYXllci5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChhKTphO3ZhciBiPQp0aGlzLmxheWVyLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMuZ2VvbWV0cnkuZ2V0Qm91bmRzKCkuZ2V0Q2VudGVyTG9uTGF0KCkpLGM9dGhpcy5sYXllci5tYXAuZ2V0UmVzb2x1dGlvbigpO3RoaXMuZ2VvbWV0cnkubW92ZShjKihhLngtYi54KSxjKihiLnktYS55KSk7dGhpcy5sYXllci5kcmF3RmVhdHVyZSh0aGlzKTtyZXR1cm4gYn19LHRvU3RhdGU6ZnVuY3Rpb24oYSl7aWYoYT09T3BlbkxheWVycy5TdGF0ZS5VUERBVEUpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgT3BlbkxheWVycy5TdGF0ZS5VTktOT1dOOmNhc2UgT3BlbkxheWVycy5TdGF0ZS5ERUxFVEU6dGhpcy5zdGF0ZT1hfWVsc2UgaWYoYT09T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgT3BlbkxheWVycy5TdGF0ZS5VTktOT1dOOmJyZWFrO2RlZmF1bHQ6dGhpcy5zdGF0ZT1hfWVsc2UgaWYoYT09T3BlbkxheWVycy5TdGF0ZS5ERUxFVEUpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgT3BlbkxheWVycy5TdGF0ZS5VTktOT1dOOmNhc2UgT3BlbkxheWVycy5TdGF0ZS5VUERBVEU6dGhpcy5zdGF0ZT0KYX1lbHNlIGE9PU9wZW5MYXllcnMuU3RhdGUuVU5LTk9XTiYmKHRoaXMuc3RhdGU9YSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IifSk7Ck9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Iuc3R5bGU9eyJkZWZhdWx0Ijp7ZmlsbENvbG9yOiIjZWU5OTAwIixmaWxsT3BhY2l0eTowLjQsaG92ZXJGaWxsQ29sb3I6IndoaXRlIixob3ZlckZpbGxPcGFjaXR5OjAuOCxzdHJva2VDb2xvcjoiI2VlOTkwMCIsc3Ryb2tlT3BhY2l0eToxLHN0cm9rZVdpZHRoOjEsc3Ryb2tlTGluZWNhcDoicm91bmQiLHN0cm9rZURhc2hzdHlsZToic29saWQiLGhvdmVyU3Ryb2tlQ29sb3I6InJlZCIsaG92ZXJTdHJva2VPcGFjaXR5OjEsaG92ZXJTdHJva2VXaWR0aDowLjIscG9pbnRSYWRpdXM6Nixob3ZlclBvaW50UmFkaXVzOjEsaG92ZXJQb2ludFVuaXQ6IiUiLHBvaW50ZXJFdmVudHM6InZpc2libGVQYWludGVkIixjdXJzb3I6ImluaGVyaXQiLGZvbnRDb2xvcjoiIzAwMDAwMCIsbGFiZWxBbGlnbjoiY20iLGxhYmVsT3V0bGluZUNvbG9yOiJ3aGl0ZSIsbGFiZWxPdXRsaW5lV2lkdGg6M30sc2VsZWN0OntmaWxsQ29sb3I6ImJsdWUiLGZpbGxPcGFjaXR5OjAuNCwKaG92ZXJGaWxsQ29sb3I6IndoaXRlIixob3ZlckZpbGxPcGFjaXR5OjAuOCxzdHJva2VDb2xvcjoiYmx1ZSIsc3Ryb2tlT3BhY2l0eToxLHN0cm9rZVdpZHRoOjIsc3Ryb2tlTGluZWNhcDoicm91bmQiLHN0cm9rZURhc2hzdHlsZToic29saWQiLGhvdmVyU3Ryb2tlQ29sb3I6InJlZCIsaG92ZXJTdHJva2VPcGFjaXR5OjEsaG92ZXJTdHJva2VXaWR0aDowLjIscG9pbnRSYWRpdXM6Nixob3ZlclBvaW50UmFkaXVzOjEsaG92ZXJQb2ludFVuaXQ6IiUiLHBvaW50ZXJFdmVudHM6InZpc2libGVQYWludGVkIixjdXJzb3I6InBvaW50ZXIiLGZvbnRDb2xvcjoiIzAwMDAwMCIsbGFiZWxBbGlnbjoiY20iLGxhYmVsT3V0bGluZUNvbG9yOiJ3aGl0ZSIsbGFiZWxPdXRsaW5lV2lkdGg6M30sdGVtcG9yYXJ5OntmaWxsQ29sb3I6IiM2NmNjY2MiLGZpbGxPcGFjaXR5OjAuMixob3ZlckZpbGxDb2xvcjoid2hpdGUiLGhvdmVyRmlsbE9wYWNpdHk6MC44LHN0cm9rZUNvbG9yOiIjNjZjY2NjIixzdHJva2VPcGFjaXR5OjEsCnN0cm9rZUxpbmVjYXA6InJvdW5kIixzdHJva2VXaWR0aDoyLHN0cm9rZURhc2hzdHlsZToic29saWQiLGhvdmVyU3Ryb2tlQ29sb3I6InJlZCIsaG92ZXJTdHJva2VPcGFjaXR5OjEsaG92ZXJTdHJva2VXaWR0aDowLjIscG9pbnRSYWRpdXM6Nixob3ZlclBvaW50UmFkaXVzOjEsaG92ZXJQb2ludFVuaXQ6IiUiLHBvaW50ZXJFdmVudHM6InZpc2libGVQYWludGVkIixjdXJzb3I6ImluaGVyaXQiLGZvbnRDb2xvcjoiIzAwMDAwMCIsbGFiZWxBbGlnbjoiY20iLGxhYmVsT3V0bGluZUNvbG9yOiJ3aGl0ZSIsbGFiZWxPdXRsaW5lV2lkdGg6M30sImRlbGV0ZSI6e2Rpc3BsYXk6Im5vbmUifX07T3BlbkxheWVycy5TdHlsZT1PcGVuTGF5ZXJzLkNsYXNzKHtpZDpudWxsLG5hbWU6bnVsbCx0aXRsZTpudWxsLGRlc2NyaXB0aW9uOm51bGwsbGF5ZXJOYW1lOm51bGwsaXNEZWZhdWx0OiExLHJ1bGVzOm51bGwsY29udGV4dDpudWxsLGRlZmF1bHRTdHlsZTpudWxsLGRlZmF1bHRzUGVyU3ltYm9saXplcjohMSxwcm9wZXJ0eVN0eWxlczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYik7dGhpcy5ydWxlcz1bXTtiJiZiLnJ1bGVzJiZ0aGlzLmFkZFJ1bGVzKGIucnVsZXMpO3RoaXMuc2V0RGVmYXVsdFN0eWxlKGF8fE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Iuc3R5bGVbImRlZmF1bHQiXSk7dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMucnVsZXMubGVuZ3RoO2E8YjthKyspdGhpcy5ydWxlc1thXS5kZXN0cm95KCksCnRoaXMucnVsZXNbYV09bnVsbDt0aGlzLmRlZmF1bHRTdHlsZT10aGlzLnJ1bGVzPW51bGx9LGNyZWF0ZVN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZGVmYXVsdHNQZXJTeW1ib2xpemVyP3t9OnRoaXMuY3JlYXRlTGl0ZXJhbHMoT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLmRlZmF1bHRTdHlsZSksYSksYz10aGlzLnJ1bGVzLGQsZT1bXSxmPSExLGc9MCxoPWMubGVuZ3RoO2c8aDtnKyspZD1jW2ddLGQuZXZhbHVhdGUoYSkmJihkIGluc3RhbmNlb2YgT3BlbkxheWVycy5SdWxlJiZkLmVsc2VGaWx0ZXI/ZS5wdXNoKGQpOihmPSEwLHRoaXMuYXBwbHlTeW1ib2xpemVyKGQsYixhKSkpO2lmKCExPT1mJiYwPGUubGVuZ3RoKWZvcihmPSEwLGc9MCxoPWUubGVuZ3RoO2c8aDtnKyspdGhpcy5hcHBseVN5bWJvbGl6ZXIoZVtnXSxiLGEpOzA8Yy5sZW5ndGgmJiExPT1mJiYoYi5kaXNwbGF5PSJub25lIik7bnVsbCE9Yi5sYWJlbCYmInN0cmluZyIhPT10eXBlb2YgYi5sYWJlbCYmCihiLmxhYmVsPVN0cmluZyhiLmxhYmVsKSk7cmV0dXJuIGJ9LGFwcGx5U3ltYm9saXplcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yy5nZW9tZXRyeT90aGlzLmdldFN5bWJvbGl6ZXJQcmVmaXgoYy5nZW9tZXRyeSk6T3BlbkxheWVycy5TdHlsZS5TWU1CT0xJWkVSX1BSRUZJWEVTWzBdO2E9YS5zeW1ib2xpemVyW2RdfHxhLnN5bWJvbGl6ZXI7ITA9PT10aGlzLmRlZmF1bHRzUGVyU3ltYm9saXplciYmKGQ9dGhpcy5kZWZhdWx0U3R5bGUsT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx7cG9pbnRSYWRpdXM6ZC5wb2ludFJhZGl1c30pLCEwIT09YS5zdHJva2UmJiEwIT09YS5ncmFwaGljfHxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHtzdHJva2VXaWR0aDpkLnN0cm9rZVdpZHRoLHN0cm9rZUNvbG9yOmQuc3Ryb2tlQ29sb3Isc3Ryb2tlT3BhY2l0eTpkLnN0cm9rZU9wYWNpdHksc3Ryb2tlRGFzaHN0eWxlOmQuc3Ryb2tlRGFzaHN0eWxlLHN0cm9rZUxpbmVjYXA6ZC5zdHJva2VMaW5lY2FwfSksCiEwIT09YS5maWxsJiYhMCE9PWEuZ3JhcGhpY3x8T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx7ZmlsbENvbG9yOmQuZmlsbENvbG9yLGZpbGxPcGFjaXR5OmQuZmlsbE9wYWNpdHl9KSwhMD09PWEuZ3JhcGhpYyYmT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx7cG9pbnRSYWRpdXM6dGhpcy5kZWZhdWx0U3R5bGUucG9pbnRSYWRpdXMsZXh0ZXJuYWxHcmFwaGljOnRoaXMuZGVmYXVsdFN0eWxlLmV4dGVybmFsR3JhcGhpYyxncmFwaGljTmFtZTp0aGlzLmRlZmF1bHRTdHlsZS5ncmFwaGljTmFtZSxncmFwaGljT3BhY2l0eTp0aGlzLmRlZmF1bHRTdHlsZS5ncmFwaGljT3BhY2l0eSxncmFwaGljV2lkdGg6dGhpcy5kZWZhdWx0U3R5bGUuZ3JhcGhpY1dpZHRoLGdyYXBoaWNIZWlnaHQ6dGhpcy5kZWZhdWx0U3R5bGUuZ3JhcGhpY0hlaWdodCxncmFwaGljWE9mZnNldDp0aGlzLmRlZmF1bHRTdHlsZS5ncmFwaGljWE9mZnNldCxncmFwaGljWU9mZnNldDp0aGlzLmRlZmF1bHRTdHlsZS5ncmFwaGljWU9mZnNldH0pKTsKcmV0dXJuIHRoaXMuY3JlYXRlTGl0ZXJhbHMoT3BlbkxheWVycy5VdGlsLmV4dGVuZChiLGEpLGMpfSxjcmVhdGVMaXRlcmFsczpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYi5hdHRyaWJ1dGVzfHxiLmRhdGEpO09wZW5MYXllcnMuVXRpbC5leHRlbmQoYyx0aGlzLmNvbnRleHQpO2Zvcih2YXIgZCBpbiB0aGlzLnByb3BlcnR5U3R5bGVzKWFbZF09T3BlbkxheWVycy5TdHlsZS5jcmVhdGVMaXRlcmFsKGFbZF0sYyxiLGQpO3JldHVybiBhfSxmaW5kUHJvcGVydHlTdHlsZXM6ZnVuY3Rpb24oKXt2YXIgYT17fTt0aGlzLmFkZFByb3BlcnR5U3R5bGVzKGEsdGhpcy5kZWZhdWx0U3R5bGUpO2Zvcih2YXIgYj10aGlzLnJ1bGVzLGMsZCxlPTAsZj1iLmxlbmd0aDtlPGY7ZSsrKXtjPWJbZV0uc3ltYm9saXplcjtmb3IodmFyIGcgaW4gYylpZihkPWNbZ10sIm9iamVjdCI9PXR5cGVvZiBkKXRoaXMuYWRkUHJvcGVydHlTdHlsZXMoYSxkKTtlbHNle3RoaXMuYWRkUHJvcGVydHlTdHlsZXMoYSwKYyk7YnJlYWt9fXJldHVybiBhfSxhZGRQcm9wZXJ0eVN0eWxlczpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7Zm9yKGQgaW4gYiljPWJbZF0sInN0cmluZyI9PXR5cGVvZiBjJiZjLm1hdGNoKC9cJFx7XHcrXH0vKSYmKGFbZF09ITApO3JldHVybiBhfSxhZGRSdWxlczpmdW5jdGlvbihhKXtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnJ1bGVzLGEpO3RoaXMucHJvcGVydHlTdHlsZXM9dGhpcy5maW5kUHJvcGVydHlTdHlsZXMoKX0sc2V0RGVmYXVsdFN0eWxlOmZ1bmN0aW9uKGEpe3RoaXMuZGVmYXVsdFN0eWxlPWE7dGhpcy5wcm9wZXJ0eVN0eWxlcz10aGlzLmZpbmRQcm9wZXJ0eVN0eWxlcygpfSxnZXRTeW1ib2xpemVyUHJlZml4OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1PcGVuTGF5ZXJzLlN0eWxlLlNZTUJPTElaRVJfUFJFRklYRVMsYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKylpZigtMSE9YS5DTEFTU19OQU1FLmluZGV4T2YoYltjXSkpcmV0dXJuIGJbY119LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9Ck9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcyk7aWYodGhpcy5ydWxlcyl7YS5ydWxlcz1bXTtmb3IodmFyIGI9MCxjPXRoaXMucnVsZXMubGVuZ3RoO2I8YzsrK2IpYS5ydWxlcy5wdXNoKHRoaXMucnVsZXNbYl0uY2xvbmUoKSl9YS5jb250ZXh0PXRoaXMuY29udGV4dCYmT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLmNvbnRleHQpO2I9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLmRlZmF1bHRTdHlsZSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlN0eWxlKGIsYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3R5bGUifSk7T3BlbkxheWVycy5TdHlsZS5jcmVhdGVMaXRlcmFsPWZ1bmN0aW9uKGEsYixjLGQpeyJzdHJpbmciPT10eXBlb2YgYSYmLTEhPWEuaW5kZXhPZigiJHsiKSYmKGE9T3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KGEsYixbYyxkXSksYT1pc05hTihhKXx8IWE/YTpwYXJzZUZsb2F0KGEpKTtyZXR1cm4gYX07Ck9wZW5MYXllcnMuU3R5bGUuU1lNQk9MSVpFUl9QUkVGSVhFUz1bIlBvaW50IiwiTGluZSIsIlBvbHlnb24iLCJUZXh0IiwiUmFzdGVyIl07T3BlbkxheWVycy5GaWx0ZXI9T3BlbkxheWVycy5DbGFzcyh7aW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt9LGV2YWx1YXRlOmZ1bmN0aW9uKGEpe3JldHVybiEwfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBudWxsfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdCYmT3BlbkxheWVycy5Gb3JtYXQuQ1FMP09wZW5MYXllcnMuRm9ybWF0LkNRTC5wcm90b3R5cGUud3JpdGUodGhpcyk6T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlciJ9KTtPcGVuTGF5ZXJzLkZpbHRlci5GZWF0dXJlSWQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7ZmlkczpudWxsLHR5cGU6IkZJRCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmZpZHM9W107T3BlbkxheWVycy5GaWx0ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxldmFsdWF0ZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMuZmlkcy5sZW5ndGg7YjxjO2IrKylpZigoYS5maWR8fGEuaWQpPT10aGlzLmZpZHNbYl0pcmV0dXJuITA7cmV0dXJuITF9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkZlYXR1cmVJZDtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEsdGhpcyk7YS5maWRzPXRoaXMuZmlkcy5zbGljZSgpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlci5GZWF0dXJlSWQifSk7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRmlsdGVyLHtmaWx0ZXJzOm51bGwsdHlwZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5maWx0ZXJzPVtdO09wZW5MYXllcnMuRmlsdGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZmlsdGVycz1udWxsO09wZW5MYXllcnMuRmlsdGVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMpfSxldmFsdWF0ZTpmdW5jdGlvbihhKXt2YXIgYixjO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQ6Yj0wO2ZvcihjPXRoaXMuZmlsdGVycy5sZW5ndGg7YjxjO2IrKylpZighMT09dGhpcy5maWx0ZXJzW2JdLmV2YWx1YXRlKGEpKXJldHVybiExO3JldHVybiEwO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5PUjpiPTA7Zm9yKGM9dGhpcy5maWx0ZXJzLmxlbmd0aDtiPApjO2IrKylpZighMD09dGhpcy5maWx0ZXJzW2JdLmV2YWx1YXRlKGEpKXJldHVybiEwO3JldHVybiExO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5OT1Q6cmV0dXJuIXRoaXMuZmlsdGVyc1swXS5ldmFsdWF0ZShhKX19LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuZmlsdGVycy5sZW5ndGg7YjxjOysrYilhLnB1c2godGhpcy5maWx0ZXJzW2JdLmNsb25lKCkpO3JldHVybiBuZXcgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbCh7dHlwZTp0aGlzLnR5cGUsZmlsdGVyczphfSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwifSk7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQ9IiYmIjtPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLk9SPSJ8fCI7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5OT1Q9IiEiO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7dHlwZTpudWxsLHByb3BlcnR5Om51bGwsdmFsdWU6bnVsbCxtYXRjaENhc2U6ITAsbG93ZXJCb3VuZGFyeTpudWxsLHVwcGVyQm91bmRhcnk6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRmlsdGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTt0aGlzLnR5cGU9PT1PcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxJS0UmJnZvaWQgMD09PWEubWF0Y2hDYXNlJiYodGhpcy5tYXRjaENhc2U9bnVsbCl9LGV2YWx1YXRlOmZ1bmN0aW9uKGEpe2EgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yJiYoYT1hLmF0dHJpYnV0ZXMpO3ZhciBiPSExO2E9YVt0aGlzLnByb3BlcnR5XTtzd2l0Y2godGhpcy50eXBlKXtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE86Yj10aGlzLnZhbHVlOwpiPXRoaXMubWF0Y2hDYXNlfHwic3RyaW5nIiE9dHlwZW9mIGF8fCJzdHJpbmciIT10eXBlb2YgYj9hPT1iOmEudG9VcHBlckNhc2UoKT09Yi50b1VwcGVyQ2FzZSgpO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5OT1RfRVFVQUxfVE86Yj10aGlzLnZhbHVlO2I9dGhpcy5tYXRjaENhc2V8fCJzdHJpbmciIT10eXBlb2YgYXx8InN0cmluZyIhPXR5cGVvZiBiP2EhPWI6YS50b1VwcGVyQ2FzZSgpIT1iLnRvVXBwZXJDYXNlKCk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTjpiPWE8dGhpcy52YWx1ZTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uR1JFQVRFUl9USEFOOmI9YT50aGlzLnZhbHVlO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MRVNTX1RIQU5fT1JfRVFVQUxfVE86Yj1hPD10aGlzLnZhbHVlO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5HUkVBVEVSX1RIQU5fT1JfRVFVQUxfVE86Yj0KYT49dGhpcy52YWx1ZTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uQkVUV0VFTjpiPWE+PXRoaXMubG93ZXJCb3VuZGFyeSYmYTw9dGhpcy51cHBlckJvdW5kYXJ5O2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MSUtFOmI9UmVnRXhwKHRoaXMudmFsdWUsImdpIikudGVzdChhKTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uSVNfTlVMTDpiPW51bGw9PT1hfXJldHVybiBifSx2YWx1ZTJyZWdleDpmdW5jdGlvbihhLGIsYyl7aWYoIi4iPT1hKXRocm93IEVycm9yKCInLicgaXMgYW4gdW5zdXBwb3J0ZWQgd2lsZENhcmQgY2hhcmFjdGVyIGZvciBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uIik7YT1hP2E6IioiO2I9Yj9iOiIuIjt0aGlzLnZhbHVlPXRoaXMudmFsdWUucmVwbGFjZShSZWdFeHAoIlxcIisoYz9jOiIhIikrIigufCQpIiwiZyIpLCJcXCQxIik7dGhpcy52YWx1ZT10aGlzLnZhbHVlLnJlcGxhY2UoUmVnRXhwKCJcXCIrCmIsImciKSwiLiIpO3RoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKFJlZ0V4cCgiXFwiK2EsImciKSwiLioiKTt0aGlzLnZhbHVlPXRoaXMudmFsdWUucmVwbGFjZShSZWdFeHAoIlxcXFwuXFwqIiwiZyIpLCJcXCIrYSk7cmV0dXJuIHRoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKFJlZ0V4cCgiXFxcXFxcLiIsImciKSwiXFwiK2IpfSxyZWdleDJ2YWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMudmFsdWUsYT1hLnJlcGxhY2UoLyEvZywiISEiKSxhPWEucmVwbGFjZSgvKFxcKT9cXFwuL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz9hOiIhLiJ9KSxhPWEucmVwbGFjZSgvKFxcKT9cXFwqL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz9hOiIhKiJ9KSxhPWEucmVwbGFjZSgvXFxcXC9nLCJcXCIpO3JldHVybiBhPWEucmVwbGFjZSgvXC5cKi9nLCIqIil9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5leHRlbmQobmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24sCnRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uIn0pO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE89Ij09IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLk5PVF9FUVVBTF9UTz0iIT0iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOPSI8IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTj0iPiI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MRVNTX1RIQU5fT1JfRVFVQUxfVE89Ijw9IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UTz0iPj0iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uQkVUV0VFTj0iLi4iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRT0ifiI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5JU19OVUxMPSJOVUxMIjtPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDLHtkZWZhdWx0VmVyc2lvbjoiMS4wLjAiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkZpbHRlciJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNUPWZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSxPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULkRFRkFVTFRTKTt2YXIgYj1PcGVuTGF5ZXJzLkZvcm1hdC5XRlNUWyJ2IithLnZlcnNpb24ucmVwbGFjZSgvXC4vZywiXyIpXTtpZighYil0aHJvdyJVbnN1cHBvcnRlZCBXRlNUIHZlcnNpb246ICIrYS52ZXJzaW9uO3JldHVybiBuZXcgYihhKX07T3BlbkxheWVycy5Gb3JtYXQuV0ZTVC5ERUZBVUxUUz17dmVyc2lvbjoiMS4wLjAifTtPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5GaWx0ZXIse3R5cGU6bnVsbCxwcm9wZXJ0eTpudWxsLHZhbHVlOm51bGwsZGlzdGFuY2U6bnVsbCxkaXN0YW5jZVVuaXRzOm51bGwsZXZhbHVhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkJCT1g6Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLklOVEVSU0VDVFM6aWYoYS5nZW9tZXRyeSl7dmFyIGM9dGhpcy52YWx1ZTsiT3BlbkxheWVycy5Cb3VuZHMiPT10aGlzLnZhbHVlLkNMQVNTX05BTUUmJihjPXRoaXMudmFsdWUudG9HZW9tZXRyeSgpKTthLmdlb21ldHJ5LmludGVyc2VjdHMoYykmJihiPSEwKX1icmVhaztkZWZhdWx0OnRocm93IEVycm9yKCJldmFsdWF0ZSBpcyBub3QgaW1wbGVtZW50ZWQgZm9yIHRoaXMgZmlsdGVyIHR5cGUuIik7fXJldHVybiBifSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPQpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7dmFsdWU6dGhpcy52YWx1ZSYmdGhpcy52YWx1ZS5jbG9uZSYmdGhpcy52YWx1ZS5jbG9uZSgpfSx0aGlzKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwifSk7T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5CQk9YPSJCQk9YIjtPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLklOVEVSU0VDVFM9IklOVEVSU0VDVFMiO09wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuRFdJVEhJTj0iRFdJVEhJTiI7T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5XSVRISU49IldJVEhJTiI7T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5DT05UQUlOUz0iQ09OVEFJTlMiO09wZW5MYXllcnMuRm9ybWF0LldGU1QudjE9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e3hsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIix3ZnM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzIixnbWw6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIixvZ2M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb2djIixvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzIn0sZGVmYXVsdFByZWZpeDoid2ZzIix2ZXJzaW9uOm51bGwsc2NoZW1hTG9jYXRpb25zOm51bGwsc3JzTmFtZTpudWxsLGV4dHJhY3RBdHRyaWJ1dGVzOiEwLHh5OiEwLHN0YXRlTmFtZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5zdGF0ZU5hbWU9e307dGhpcy5zdGF0ZU5hbWVbT3BlbkxheWVycy5TdGF0ZS5JTlNFUlRdPSJ3ZnM6SW5zZXJ0Ijt0aGlzLnN0YXRlTmFtZVtPcGVuTGF5ZXJzLlN0YXRlLlVQREFURV09CiJ3ZnM6VXBkYXRlIjt0aGlzLnN0YXRlTmFtZVtPcGVuTGF5ZXJzLlN0YXRlLkRFTEVURV09IndmczpEZWxldGUiO09wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LGdldFNyc05hbWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iJiZiLnNyc05hbWU7Y3x8KGM9YSYmYS5sYXllcj9hLmxheWVyLnByb2plY3Rpb24uZ2V0Q29kZSgpOnRoaXMuc3JzTmFtZSk7cmV0dXJuIGN9LHJlYWQ6ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIse291dHB1dDoiZmVhdHVyZXMifSk7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTthJiY5PT1hLm5vZGVUeXBlJiYoYT1hLmRvY3VtZW50RWxlbWVudCk7dmFyIGM9e307YSYmdGhpcy5yZWFkTm9kZShhLGMsITApO2MuZmVhdHVyZXMmJiJmZWF0dXJlcyI9PT1iLm91dHB1dCYmCihjPWMuZmVhdHVyZXMpO3JldHVybiBjfSxyZWFkZXJzOnt3ZnM6e0ZlYXR1cmVDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsYil7Yi5mZWF0dXJlcz1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9fX0sd3JpdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLndyaXRlTm9kZSgid2ZzOlRyYW5zYWN0aW9uIix7ZmVhdHVyZXM6YSxvcHRpb25zOmJ9KSxkPXRoaXMuc2NoZW1hTG9jYXRpb25BdHRyKCk7ZCYmdGhpcy5zZXRBdHRyaWJ1dGVOUyhjLHRoaXMubmFtZXNwYWNlcy54c2ksInhzaTpzY2hlbWFMb2NhdGlvbiIsZCk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbY10pfSx3cml0ZXJzOnt3ZnM6e0dldEZlYXR1cmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6R2V0RmVhdHVyZSIse2F0dHJpYnV0ZXM6e3NlcnZpY2U6IldGUyIsdmVyc2lvbjp0aGlzLnZlcnNpb24saGFuZGxlOmEmJmEuaGFuZGxlLApvdXRwdXRGb3JtYXQ6YSYmYS5vdXRwdXRGb3JtYXQsbWF4RmVhdHVyZXM6YSYmYS5tYXhGZWF0dXJlcywieHNpOnNjaGVtYUxvY2F0aW9uIjp0aGlzLnNjaGVtYUxvY2F0aW9uQXR0cihhKX19KTtpZigic3RyaW5nIj09dHlwZW9mIHRoaXMuZmVhdHVyZVR5cGUpdGhpcy53cml0ZU5vZGUoIlF1ZXJ5IixhLGIpO2Vsc2UgZm9yKHZhciBjPTAsZD10aGlzLmZlYXR1cmVUeXBlLmxlbmd0aDtjPGQ7YysrKWEuZmVhdHVyZVR5cGU9dGhpcy5mZWF0dXJlVHlwZVtjXSx0aGlzLndyaXRlTm9kZSgiUXVlcnkiLGEsYik7cmV0dXJuIGJ9LFRyYW5zYWN0aW9uOmZ1bmN0aW9uKGEpe2E9YXx8e307dmFyIGI9YS5vcHRpb25zfHx7fSxjPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOlRyYW5zYWN0aW9uIix7YXR0cmlidXRlczp7c2VydmljZToiV0ZTIix2ZXJzaW9uOnRoaXMudmVyc2lvbixoYW5kbGU6Yi5oYW5kbGV9fSksZCxlPWEuZmVhdHVyZXM7aWYoZSl7ITA9PT1iLm11bHRpJiZPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMuZ2VvbWV0cnlUeXBlcywKeyJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50IjoiTXVsdGlQb2ludCIsIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyI6ITA9PT10aGlzLm11bHRpQ3VydmU/Ik11bHRpQ3VydmUiOiJNdWx0aUxpbmVTdHJpbmciLCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iOiEwPT09dGhpcy5tdWx0aVN1cmZhY2U/Ik11bHRpU3VyZmFjZSI6Ik11bHRpUG9seWdvbiJ9KTt2YXIgZixnO2E9MDtmb3IoZD1lLmxlbmd0aDthPGQ7KythKWc9ZVthXSwoZj10aGlzLnN0YXRlTmFtZVtnLnN0YXRlXSkmJnRoaXMud3JpdGVOb2RlKGYse2ZlYXR1cmU6ZyxvcHRpb25zOmJ9LGMpOyEwPT09Yi5tdWx0aSYmdGhpcy5zZXRHZW9tZXRyeVR5cGVzKCl9aWYoYi5uYXRpdmVFbGVtZW50cylmb3IoYT0wLGQ9Yi5uYXRpdmVFbGVtZW50cy5sZW5ndGg7YTxkOysrYSl0aGlzLndyaXRlTm9kZSgid2ZzOk5hdGl2ZSIsYi5uYXRpdmVFbGVtZW50c1thXSxjKTtyZXR1cm4gY30sTmF0aXZlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpOYXRpdmUiLAp7YXR0cmlidXRlczp7dmVuZG9ySWQ6YS52ZW5kb3JJZCxzYWZlVG9JZ25vcmU6YS5zYWZlVG9JZ25vcmV9LHZhbHVlOmEudmFsdWV9KX0sSW5zZXJ0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZmVhdHVyZTthPWEub3B0aW9uczthPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOkluc2VydCIse2F0dHJpYnV0ZXM6e2hhbmRsZTphJiZhLmhhbmRsZX19KTt0aGlzLnNyc05hbWU9dGhpcy5nZXRTcnNOYW1lKGIpO3RoaXMud3JpdGVOb2RlKCJmZWF0dXJlOl90eXBlTmFtZSIsYixhKTtyZXR1cm4gYX0sVXBkYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZmVhdHVyZTthPWEub3B0aW9uczthPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOlVwZGF0ZSIse2F0dHJpYnV0ZXM6e2hhbmRsZTphJiZhLmhhbmRsZSx0eXBlTmFtZToodGhpcy5mZWF0dXJlTlM/dGhpcy5mZWF0dXJlUHJlZml4KyI6IjoiIikrdGhpcy5mZWF0dXJlVHlwZX19KTt0aGlzLmZlYXR1cmVOUyYmYS5zZXRBdHRyaWJ1dGUoInhtbG5zOiIrCnRoaXMuZmVhdHVyZVByZWZpeCx0aGlzLmZlYXR1cmVOUyk7dmFyIGM9Yi5tb2RpZmllZDtudWxsPT09dGhpcy5nZW9tZXRyeU5hbWV8fGMmJnZvaWQgMD09PWMuZ2VvbWV0cnl8fCh0aGlzLnNyc05hbWU9dGhpcy5nZXRTcnNOYW1lKGIpLHRoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eSIse25hbWU6dGhpcy5nZW9tZXRyeU5hbWUsdmFsdWU6Yi5nZW9tZXRyeX0sYSkpO2Zvcih2YXIgZCBpbiBiLmF0dHJpYnV0ZXMpdm9pZCAwPT09Yi5hdHRyaWJ1dGVzW2RdfHxjJiZjLmF0dHJpYnV0ZXMmJighYy5hdHRyaWJ1dGVzfHx2b2lkIDA9PT1jLmF0dHJpYnV0ZXNbZF0pfHx0aGlzLndyaXRlTm9kZSgiUHJvcGVydHkiLHtuYW1lOmQsdmFsdWU6Yi5hdHRyaWJ1dGVzW2RdfSxhKTt0aGlzLndyaXRlTm9kZSgib2djOkZpbHRlciIsbmV3IE9wZW5MYXllcnMuRmlsdGVyLkZlYXR1cmVJZCh7ZmlkczpbYi5maWRdfSksYSk7cmV0dXJuIGF9LFByb3BlcnR5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOlByb3BlcnR5Iik7CnRoaXMud3JpdGVOb2RlKCJOYW1lIixhLm5hbWUsYik7bnVsbCE9PWEudmFsdWUmJnRoaXMud3JpdGVOb2RlKCJWYWx1ZSIsYS52YWx1ZSxiKTtyZXR1cm4gYn0sTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6TmFtZSIse3ZhbHVlOmF9KX0sVmFsdWU6ZnVuY3Rpb24oYSl7dmFyIGI7YSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnk/KGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6VmFsdWUiKSxhPXRoaXMud3JpdGVOb2RlKCJmZWF0dXJlOl9nZW9tZXRyeSIsYSkuZmlyc3RDaGlsZCxiLmFwcGVuZENoaWxkKGEpKTpiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOlZhbHVlIix7dmFsdWU6YX0pO3JldHVybiBifSxEZWxldGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5mZWF0dXJlO2E9YS5vcHRpb25zO2E9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6RGVsZXRlIix7YXR0cmlidXRlczp7aGFuZGxlOmEmJgphLmhhbmRsZSx0eXBlTmFtZToodGhpcy5mZWF0dXJlTlM/dGhpcy5mZWF0dXJlUHJlZml4KyI6IjoiIikrdGhpcy5mZWF0dXJlVHlwZX19KTt0aGlzLmZlYXR1cmVOUyYmYS5zZXRBdHRyaWJ1dGUoInhtbG5zOiIrdGhpcy5mZWF0dXJlUHJlZml4LHRoaXMuZmVhdHVyZU5TKTt0aGlzLndyaXRlTm9kZSgib2djOkZpbHRlciIsbmV3IE9wZW5MYXllcnMuRmlsdGVyLkZlYXR1cmVJZCh7ZmlkczpbYi5maWRdfSksYSk7cmV0dXJuIGF9fX0sc2NoZW1hTG9jYXRpb25BdHRyOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7ZmVhdHVyZVByZWZpeDp0aGlzLmZlYXR1cmVQcmVmaXgsc2NoZW1hOnRoaXMuc2NoZW1hfSxhKTt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuc2NoZW1hTG9jYXRpb25zKTthLnNjaGVtYSYmKGJbYS5mZWF0dXJlUHJlZml4XT1hLnNjaGVtYSk7YT1bXTt2YXIgYyxkO2ZvcihkIGluIGIpKGM9dGhpcy5uYW1lc3BhY2VzW2RdKSYmCmEucHVzaChjKyIgIitiW2RdKTtyZXR1cm4gYS5qb2luKCIgIil8fHZvaWQgMH0sc2V0RmlsdGVyUHJvcGVydHk6ZnVuY3Rpb24oYSl7aWYoYS5maWx0ZXJzKWZvcih2YXIgYj0wLGM9YS5maWx0ZXJzLmxlbmd0aDtiPGM7KytiKU9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLnNldEZpbHRlclByb3BlcnR5LmNhbGwodGhpcyxhLmZpbHRlcnNbYl0pO2Vsc2UgYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwmJiFhLnByb3BlcnR5JiYoYS5wcm9wZXJ0eT10aGlzLmdlb21ldHJ5TmFtZSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEifSk7T3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLHtjb21wb25lbnRUeXBlczpbIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyJdLGdldEFyZWE6ZnVuY3Rpb24oKXt2YXIgYT0wO2lmKHRoaXMuY29tcG9uZW50cyYmMDx0aGlzLmNvbXBvbmVudHMubGVuZ3RoKWZvcih2YXIgYT1hK01hdGguYWJzKHRoaXMuY29tcG9uZW50c1swXS5nZXRBcmVhKCkpLGI9MSxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhLT1NYXRoLmFicyh0aGlzLmNvbXBvbmVudHNbYl0uZ2V0QXJlYSgpKTtyZXR1cm4gYX0sZ2V0R2VvZGVzaWNBcmVhOmZ1bmN0aW9uKGEpe3ZhciBiPTA7aWYodGhpcy5jb21wb25lbnRzJiYwPHRoaXMuY29tcG9uZW50cy5sZW5ndGgpZm9yKHZhciBiPWIrTWF0aC5hYnModGhpcy5jb21wb25lbnRzWzBdLmdldEdlb2Rlc2ljQXJlYShhKSksYz0xLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPApkO2MrKyliLT1NYXRoLmFicyh0aGlzLmNvbXBvbmVudHNbY10uZ2V0R2VvZGVzaWNBcmVhKGEpKTtyZXR1cm4gYn0sY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNvbXBvbmVudHMubGVuZ3RoLGM9ITE7aWYoMDxiJiYoYz10aGlzLmNvbXBvbmVudHNbMF0uY29udGFpbnNQb2ludChhKSwxIT09YyYmYyYmMTxiKSlmb3IodmFyIGQsZT0xO2U8YjsrK2UpaWYoZD10aGlzLmNvbXBvbmVudHNbZV0uY29udGFpbnNQb2ludChhKSl7Yz0xPT09ZD8xOiExO2JyZWFrfXJldHVybiBjfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKGEpe3ZhciBiPSExLGMsZDtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWEuQ0xBU1NfTkFNRSliPXRoaXMuY29udGFpbnNQb2ludChhKTtlbHNlIGlmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciPT1hLkNMQVNTX05BTUV8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciPT1hLkNMQVNTX05BTUUpe2M9MDtmb3IoZD0KdGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQmJiEoYj1hLmludGVyc2VjdHModGhpcy5jb21wb25lbnRzW2NdKSk7KytjKTtpZighYilmb3IoYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQmJiEoYj10aGlzLmNvbnRhaW5zUG9pbnQoYS5jb21wb25lbnRzW2NdKSk7KytjKTt9ZWxzZSBmb3IoYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQmJiEoYj10aGlzLmludGVyc2VjdHMoYS5jb21wb25lbnRzW2NdKSk7KytjKTtpZighYiYmIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI9PWEuQ0xBU1NfTkFNRSl7dmFyIGU9dGhpcy5jb21wb25lbnRzWzBdO2M9MDtmb3IoZD1lLmNvbXBvbmVudHMubGVuZ3RoO2M8ZCYmIShiPWEuY29udGFpbnNQb2ludChlLmNvbXBvbmVudHNbY10pKTsrK2MpO31yZXR1cm4gYn0sZGlzdGFuY2VUbzpmdW5jdGlvbihhLGIpe3JldHVybiBiJiYhMT09PWIuZWRnZSYmdGhpcy5pbnRlcnNlY3RzKGEpPzA6T3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLnByb3RvdHlwZS5kaXN0YW5jZVRvLmFwcGx5KHRoaXMsClthLGJdKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbi5jcmVhdGVSZWd1bGFyUG9seWdvbj1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1NYXRoLlBJKigxL2MtMC41KTtkJiYoZSs9ZC8xODAqTWF0aC5QSSk7Zm9yKHZhciBmLGc9W10saD0wO2g8YzsrK2gpZj1lKzIqaCpNYXRoLlBJL2MsZD1hLngrYipNYXRoLmNvcyhmKSxmPWEueStiKk1hdGguc2luKGYpLGcucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChkLGYpKTthPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcoZyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24oW2FdKX07T3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24se2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uIl0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24ifSk7T3BlbkxheWVycy5Gb3JtYXQuR01MPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtmZWF0dXJlTlM6Imh0dHA6Ly9tYXBzZXJ2ZXIuZ2lzLnVtbi5lZHUvbWFwc2VydmVyIixmZWF0dXJlUHJlZml4OiJmZWF0dXJlIixmZWF0dXJlTmFtZToiZmVhdHVyZU1lbWJlciIsbGF5ZXJOYW1lOiJmZWF0dXJlcyIsZ2VvbWV0cnlOYW1lOiJnZW9tZXRyeSIsY29sbGVjdGlvbk5hbWU6IkZlYXR1cmVDb2xsZWN0aW9uIixnbWxuczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwiLGV4dHJhY3RBdHRyaWJ1dGVzOiEwLHh5OiEwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5yZWdFeGVzPXt0cmltU3BhY2U6L15ccyp8XHMqJC9nLHJlbW92ZVNwYWNlOi9ccyovZyxzcGxpdFNwYWNlOi9ccysvLHRyaW1Db21tYTovXHMqLFxzKi9nfTtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT0KdHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEuZG9jdW1lbnRFbGVtZW50LHRoaXMuZ21sbnMsdGhpcy5mZWF0dXJlTmFtZSk7Zm9yKHZhciBiPVtdLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9dGhpcy5wYXJzZUZlYXR1cmUoYVtjXSk7ZCYmYi5wdXNoKGQpfXJldHVybiBifSxwYXJzZUZlYXR1cmU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSJNdWx0aVBvbHlnb24gUG9seWdvbiBNdWx0aUxpbmVTdHJpbmcgTGluZVN0cmluZyBNdWx0aVBvaW50IFBvaW50IEVudmVsb3BlIi5zcGxpdCgiICIpLGMsZCxlLGY9MDtmPGIubGVuZ3RoOysrZilpZihjPWJbZl0sZD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLGMpLDA8ZC5sZW5ndGgpe2lmKGU9dGhpcy5wYXJzZUdlb21ldHJ5W2MudG9Mb3dlckNhc2UoKV0pZT1lLmFwcGx5KHRoaXMsCltkWzBdXSksdGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiZlLnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7ZWxzZSB0aHJvdyBuZXcgVHlwZUVycm9yKCJVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAiK2MpO2JyZWFrfXZhciBnO2M9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywiQm94Iik7Zm9yKGY9MDtmPGMubGVuZ3RoOysrZiliPWNbZl0sZD10aGlzLnBhcnNlR2VvbWV0cnkuYm94LmFwcGx5KHRoaXMsW2JdKSxiPWIucGFyZW50Tm9kZSwiYm91bmRlZEJ5Ij09PShiLmxvY2FsTmFtZXx8Yi5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpKT9nPWQ6ZT1kLnRvR2VvbWV0cnkoKTt2YXIgaDt0aGlzLmV4dHJhY3RBdHRyaWJ1dGVzJiYoaD10aGlzLnBhcnNlQXR0cmlidXRlcyhhKSk7aD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihlLGgpO2guYm91bmRzPQpnO2guZ21sPXtmZWF0dXJlVHlwZTphLmZpcnN0Q2hpbGQubm9kZU5hbWUuc3BsaXQoIjoiKVsxXSxmZWF0dXJlTlM6YS5maXJzdENoaWxkLm5hbWVzcGFjZVVSSSxmZWF0dXJlTlNQcmVmaXg6YS5maXJzdENoaWxkLnByZWZpeH07YT1hLmZpcnN0Q2hpbGQ7Zm9yKHZhciBrO2EmJigxIT1hLm5vZGVUeXBlfHwhKGs9YS5nZXRBdHRyaWJ1dGUoImZpZCIpfHxhLmdldEF0dHJpYnV0ZSgiaWQiKSkpOylhPWEubmV4dFNpYmxpbmc7aC5maWQ9aztyZXR1cm4gaH0scGFyc2VHZW9tZXRyeTp7cG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGIsYztjPVtdO2I9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywicG9zIik7MDxiLmxlbmd0aCYmKGM9YlswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSxjPWMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxjPWMuc3BsaXQodGhpcy5yZWdFeGVzLnNwbGl0U3BhY2UpKTswPT1jLmxlbmd0aCYmKGI9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsCnRoaXMuZ21sbnMsImNvb3JkaW5hdGVzIiksMDxiLmxlbmd0aCYmKGM9YlswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSxjPWMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMucmVtb3ZlU3BhY2UsIiIpLGM9Yy5zcGxpdCgiLCIpKSk7MD09Yy5sZW5ndGgmJihiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsImNvb3JkIiksMDxiLmxlbmd0aCYmKGE9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGJbMF0sdGhpcy5nbWxucywiWCIpLGI9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGJbMF0sdGhpcy5nbWxucywiWSIpLDA8YS5sZW5ndGgmJjA8Yi5sZW5ndGgmJihjPVthWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlLGJbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWVdKSkpOzI9PWMubGVuZ3RoJiYoY1syXT1udWxsKTtyZXR1cm4gdGhpcy54eT9uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjWzBdLGNbMV0sY1syXSk6bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1sxXSwKY1swXSxjWzJdKX0sbXVsdGlwb2ludDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsIlBvaW50Iik7dmFyIGI9W107aWYoMDxhLmxlbmd0aClmb3IodmFyIGMsZD0wO2Q8YS5sZW5ndGg7KytkKShjPXRoaXMucGFyc2VHZW9tZXRyeS5wb2ludC5hcHBseSh0aGlzLFthW2RdXSkpJiZiLnB1c2goYyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQoYil9LGxpbmVzdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2Q9W107dmFyIGU9W107Yz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJwb3NMaXN0Iik7aWYoMDxjLmxlbmd0aCl7ZD10aGlzLmdldENoaWxkVmFsdWUoY1swXSk7ZD1kLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIik7ZD1kLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKTt2YXIgZj1wYXJzZUludChjWzBdLmdldEF0dHJpYnV0ZSgiZGltZW5zaW9uIikpLApnLGgsaztmb3IoYz0wO2M8ZC5sZW5ndGgvZjsrK2MpZz1jKmYsaD1kW2ddLGs9ZFtnKzFdLGc9Mj09Zj9udWxsOmRbZysyXSx0aGlzLnh5P2UucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChoLGssZykpOmUucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChrLGgsZykpfWlmKDA9PWQubGVuZ3RoJiYoYz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJjb29yZGluYXRlcyIpLDA8Yy5sZW5ndGgpKWZvcihkPXRoaXMuZ2V0Q2hpbGRWYWx1ZShjWzBdKSxkPWQucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxkPWQucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbUNvbW1hLCIsIiksZj1kLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSxjPTA7YzxmLmxlbmd0aDsrK2MpZD1mW2NdLnNwbGl0KCIsIiksMj09ZC5sZW5ndGgmJihkWzJdPW51bGwpLHRoaXMueHk/ZS5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGRbMF0sCmRbMV0sZFsyXSkpOmUucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChkWzFdLGRbMF0sZFsyXSkpO2Q9bnVsbDswIT1lLmxlbmd0aCYmKGQ9Yj9uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGUpOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoZSkpO3JldHVybiBkfSxtdWx0aWxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7YT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJMaW5lU3RyaW5nIik7dmFyIGI9W107aWYoMDxhLmxlbmd0aClmb3IodmFyIGMsZD0wO2Q8YS5sZW5ndGg7KytkKShjPXRoaXMucGFyc2VHZW9tZXRyeS5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2FbZF1dKSkmJmIucHVzaChjKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKGIpfSxwb2x5Z29uOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywiTGluZWFyUmluZyIpOwp2YXIgYj1bXTtpZigwPGEubGVuZ3RoKWZvcih2YXIgYyxkPTA7ZDxhLmxlbmd0aDsrK2QpKGM9dGhpcy5wYXJzZUdlb21ldHJ5LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYVtkXSwhMF0pKSYmYi5wdXNoKGMpO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKGIpfSxtdWx0aXBvbHlnb246ZnVuY3Rpb24oYSl7YT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJQb2x5Z29uIik7dmFyIGI9W107aWYoMDxhLmxlbmd0aClmb3IodmFyIGMsZD0wO2Q8YS5sZW5ndGg7KytkKShjPXRoaXMucGFyc2VHZW9tZXRyeS5wb2x5Z29uLmFwcGx5KHRoaXMsW2FbZF1dKSkmJmIucHVzaChjKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKGIpfSxlbnZlbG9wZTpmdW5jdGlvbihhKXt2YXIgYj1bXSxjLGQsZT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJsb3dlckNvcm5lciIpO2lmKDA8ZS5sZW5ndGgpe2M9CltdOzA8ZS5sZW5ndGgmJihjPWVbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUsYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIiksYz1jLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSk7Mj09Yy5sZW5ndGgmJihjWzJdPW51bGwpO3ZhciBmPXRoaXMueHk/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1swXSxjWzFdLGNbMl0pOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMV0sY1swXSxjWzJdKX1hPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsInVwcGVyQ29ybmVyIik7aWYoMDxhLmxlbmd0aCl7Yz1bXTswPGEubGVuZ3RoJiYoYz1hWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlLGM9Yy5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLGM9Yy5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSkpOzI9PWMubGVuZ3RoJiYoY1syXT1udWxsKTt2YXIgZz10aGlzLnh5P25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMF0sCmNbMV0sY1syXSk6bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1sxXSxjWzBdLGNbMl0pfWYmJmcmJihiLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZi54LGYueSkpLGIucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChnLngsZi55KSksYi5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGcueCxnLnkpKSxiLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZi54LGcueSkpLGIucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChmLngsZi55KSksYj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGIpLGQ9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbYl0pKTtyZXR1cm4gZH0sYm94OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsImNvb3JkaW5hdGVzIiksYz1hPW51bGw7MDxiLmxlbmd0aCYmKGI9YlswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSwKYj1iLnNwbGl0KCIgIiksMj09Yi5sZW5ndGgmJihhPWJbMF0uc3BsaXQoIiwiKSxjPWJbMV0uc3BsaXQoIiwiKSkpO2lmKG51bGwhPT1hJiZudWxsIT09YylyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKHBhcnNlRmxvYXQoYVswXSkscGFyc2VGbG9hdChhWzFdKSxwYXJzZUZsb2F0KGNbMF0pLHBhcnNlRmxvYXQoY1sxXSkpfX0scGFyc2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2E9YS5maXJzdENoaWxkO2Zvcih2YXIgYyxkLGU7YTspe2lmKDE9PWEubm9kZVR5cGUpe2E9YS5jaGlsZE5vZGVzO2ZvcihjPTA7YzxhLmxlbmd0aDsrK2MpaWYoZD1hW2NdLDE9PWQubm9kZVR5cGUpaWYoZT1kLmNoaWxkTm9kZXMsMT09ZS5sZW5ndGgpe2lmKGU9ZVswXSwzPT1lLm5vZGVUeXBlfHw0PT1lLm5vZGVUeXBlKWQ9ZC5wcmVmaXg/ZC5ub2RlTmFtZS5zcGxpdCgiOiIpWzFdOmQubm9kZU5hbWUsZT1lLm5vZGVWYWx1ZS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsCiIiKSxiW2RdPWV9ZWxzZSBiW2Qubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKV09bnVsbDticmVha31hPWEubmV4dFNpYmxpbmd9cmV0dXJuIGJ9LHdyaXRlOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnMiLCJ3ZnM6Iit0aGlzLmNvbGxlY3Rpb25OYW1lKSxjPTA7YzxhLmxlbmd0aDtjKyspYi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUZlYXR1cmVYTUwoYVtjXSkpO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2JdKX0sY3JlYXRlRmVhdHVyZVhNTDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmJ1aWxkR2VvbWV0cnlOb2RlKGEuZ2VvbWV0cnkpLGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5mZWF0dXJlTlMsdGhpcy5mZWF0dXJlUHJlZml4KyI6Iit0aGlzLmdlb21ldHJ5TmFtZSk7Yy5hcHBlbmRDaGlsZChiKTsKdmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOiIrdGhpcy5mZWF0dXJlTmFtZSksZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmZlYXR1cmVOUyx0aGlzLmZlYXR1cmVQcmVmaXgrIjoiK3RoaXMubGF5ZXJOYW1lKTtkLnNldEF0dHJpYnV0ZSgiZmlkIixhLmZpZHx8YS5pZCk7ZC5hcHBlbmRDaGlsZChjKTtmb3IodmFyIGUgaW4gYS5hdHRyaWJ1dGVzKXt2YXIgYz10aGlzLmNyZWF0ZVRleHROb2RlKGEuYXR0cmlidXRlc1tlXSksZj1lLnN1YnN0cmluZyhlLmxhc3RJbmRleE9mKCI6IikrMSksZj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmZlYXR1cmVOUyx0aGlzLmZlYXR1cmVQcmVmaXgrIjoiK2YpO2YuYXBwZW5kQ2hpbGQoYyk7ZC5hcHBlbmRDaGlsZChmKX1iLmFwcGVuZENoaWxkKGQpO3JldHVybiBifSxidWlsZEdlb21ldHJ5Tm9kZTpmdW5jdGlvbihhKXt0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmdGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJgooYT1hLmNsb25lKCksYS50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pKTt2YXIgYj1hLkNMQVNTX05BTUUsYj1iLnN1YnN0cmluZyhiLmxhc3RJbmRleE9mKCIuIikrMSk7cmV0dXJuIHRoaXMuYnVpbGRHZW9tZXRyeVtiLnRvTG93ZXJDYXNlKCldLmFwcGx5KHRoaXMsW2FdKX0sYnVpbGRHZW9tZXRyeTp7cG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOlBvaW50Iik7Yi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtyZXR1cm4gYn0sbXVsdGlwb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6TXVsdGlQb2ludCIpO2E9YS5jb21wb25lbnRzO2Zvcih2YXIgYyxkLGU9MDtlPGEubGVuZ3RoO2UrKyljPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpwb2ludE1lbWJlciIpLApkPXRoaXMuYnVpbGRHZW9tZXRyeS5wb2ludC5hcHBseSh0aGlzLFthW2VdXSksYy5hcHBlbmRDaGlsZChkKSxiLmFwcGVuZENoaWxkKGMpO3JldHVybiBifSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpMaW5lU3RyaW5nIik7Yi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtyZXR1cm4gYn0sbXVsdGlsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpNdWx0aUxpbmVTdHJpbmciKTthPWEuY29tcG9uZW50cztmb3IodmFyIGMsZCxlPTA7ZTxhLmxlbmd0aDsrK2UpYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6bGluZVN0cmluZ01lbWJlciIpLGQ9dGhpcy5idWlsZEdlb21ldHJ5LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYVtlXV0pLGMuYXBwZW5kQ2hpbGQoZCksYi5hcHBlbmRDaGlsZChjKTsKcmV0dXJuIGJ9LGxpbmVhcnJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOkxpbmVhclJpbmciKTtiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRDb29yZGluYXRlc05vZGUoYSkpO3JldHVybiBifSxwb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpQb2x5Z29uIik7YT1hLmNvbXBvbmVudHM7Zm9yKHZhciBjLGQsZT0wO2U8YS5sZW5ndGg7KytlKWM9MD09ZT8ib3V0ZXJCb3VuZGFyeUlzIjoiaW5uZXJCb3VuZGFyeUlzIixjPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDoiK2MpLGQ9dGhpcy5idWlsZEdlb21ldHJ5LmxpbmVhcnJpbmcuYXBwbHkodGhpcyxbYVtlXV0pLGMuYXBwZW5kQ2hpbGQoZCksYi5hcHBlbmRDaGlsZChjKTtyZXR1cm4gYn0sbXVsdGlwb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsCiJnbWw6TXVsdGlQb2x5Z29uIik7YT1hLmNvbXBvbmVudHM7Zm9yKHZhciBjLGQsZT0wO2U8YS5sZW5ndGg7KytlKWM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOnBvbHlnb25NZW1iZXIiKSxkPXRoaXMuYnVpbGRHZW9tZXRyeS5wb2x5Z29uLmFwcGx5KHRoaXMsW2FbZV1dKSxjLmFwcGVuZENoaWxkKGQpLGIuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LGJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6Qm94Iik7Yi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtyZXR1cm4gYn19LGJ1aWxkQ29vcmRpbmF0ZXNOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpjb29yZGluYXRlcyIpO2Iuc2V0QXR0cmlidXRlKCJkZWNpbWFsIiwiLiIpO2Iuc2V0QXR0cmlidXRlKCJjcyIsIiwiKTtiLnNldEF0dHJpYnV0ZSgidHMiLAoiICIpO3ZhciBjPVtdO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kcyljLnB1c2goYS5sZWZ0KyIsIithLmJvdHRvbSksYy5wdXNoKGEucmlnaHQrIiwiK2EudG9wKTtlbHNle2E9YS5jb21wb25lbnRzP2EuY29tcG9uZW50czpbYV07Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDtkKyspYy5wdXNoKGFbZF0ueCsiLCIrYVtkXS55KX1jPXRoaXMuY3JlYXRlVGV4dE5vZGUoYy5qb2luKCIgIikpO2IuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkdNTCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5HTUx8fChPcGVuTGF5ZXJzLkZvcm1hdC5HTUw9e30pOwpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7bmFtZXNwYWNlczp7Z21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCIseGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLHhzaToiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiLHdmczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnMifSxkZWZhdWx0UHJlZml4OiJnbWwiLHNjaGVtYUxvY2F0aW9uOm51bGwsZmVhdHVyZVR5cGU6bnVsbCxmZWF0dXJlTlM6bnVsbCxnZW9tZXRyeU5hbWU6Imdlb21ldHJ5IixleHRyYWN0QXR0cmlidXRlczohMCxzcnNOYW1lOm51bGwseHk6ITAsZ2VvbWV0cnlUeXBlczpudWxsLHNpbmdsZUZlYXR1cmVUeXBlOm51bGwscmVnRXhlczp7dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZyxmZWF0dXJlTWVtYmVyOi9eKC4qOik/ZmVhdHVyZU1lbWJlcnM/JC99LAppbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7dGhpcy5zZXRHZW9tZXRyeVR5cGVzKCk7YSYmYS5mZWF0dXJlTlMmJnRoaXMuc2V0TmFtZXNwYWNlKCJmZWF0dXJlIixhLmZlYXR1cmVOUyk7dGhpcy5zaW5nbGVGZWF0dXJlVHlwZT0hYXx8InN0cmluZyI9PT10eXBlb2YgYS5mZWF0dXJlVHlwZX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYj1bXTt0aGlzLnJlYWROb2RlKGEse2ZlYXR1cmVzOmJ9LCEwKTtpZigwPT1iLmxlbmd0aCl7dmFyIGM9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5uYW1lc3BhY2VzLmdtbCwiZmVhdHVyZU1lbWJlciIpO2lmKGMubGVuZ3RoKXthPQowO2Zvcih2YXIgZD1jLmxlbmd0aDthPGQ7KythKXRoaXMucmVhZE5vZGUoY1thXSx7ZmVhdHVyZXM6Yn0sITApfWVsc2UgYz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLm5hbWVzcGFjZXMuZ21sLCJmZWF0dXJlTWVtYmVycyIpLGMubGVuZ3RoJiZ0aGlzLnJlYWROb2RlKGNbMF0se2ZlYXR1cmVzOmJ9LCEwKX1yZXR1cm4gYn0scmVhZE5vZGU6ZnVuY3Rpb24oYSxiLGMpeyEwPT09YyYmITA9PT10aGlzLmF1dG9Db25maWcmJih0aGlzLmZlYXR1cmVUeXBlPW51bGwsZGVsZXRlIHRoaXMubmFtZXNwYWNlQWxpYXNbdGhpcy5mZWF0dXJlTlNdLGRlbGV0ZSB0aGlzLm5hbWVzcGFjZXMuZmVhdHVyZSx0aGlzLmZlYXR1cmVOUz1udWxsKTt0aGlzLmZlYXR1cmVOU3x8KGEucHJlZml4IGluIHRoaXMubmFtZXNwYWNlc3x8YS5wYXJlbnROb2RlLm5hbWVzcGFjZVVSSSE9dGhpcy5uYW1lc3BhY2VzLmdtbHx8IXRoaXMucmVnRXhlcy5mZWF0dXJlTWVtYmVyLnRlc3QoYS5wYXJlbnROb2RlLm5vZGVOYW1lKSl8fAoodGhpcy5mZWF0dXJlVHlwZT1hLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCksdGhpcy5zZXROYW1lc3BhY2UoImZlYXR1cmUiLGEubmFtZXNwYWNlVVJJKSx0aGlzLmZlYXR1cmVOUz1hLm5hbWVzcGFjZVVSSSx0aGlzLmF1dG9Db25maWc9ITApO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWROb2RlLmFwcGx5KHRoaXMsW2EsYl0pfSxyZWFkZXJzOntnbWw6e19pbmhlcml0OmZ1bmN0aW9uKGEsYixjKXt9LGZlYXR1cmVNZW1iZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LGZlYXR1cmVNZW1iZXJzOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxuYW1lOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sYm91bmRlZEJ5OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2MuY29tcG9uZW50cyYmMDxjLmNvbXBvbmVudHMubGVuZ3RoJiYKKGIuYm91bmRzPWMuY29tcG9uZW50c1swXSl9LFBvaW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9e3BvaW50czpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuY29tcG9uZW50c3x8KGIuY29tcG9uZW50cz1bXSk7Yi5jb21wb25lbnRzLnB1c2goYy5wb2ludHNbMF0pfSxjb29yZGluYXRlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYSkucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxjPWMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbUNvbW1hLCIsIiksYz1jLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSxkLGU9Yy5sZW5ndGgsZj1BcnJheShlKSxnPTA7ZzxlOysrZylkPWNbZ10uc3BsaXQoIiwiKSxmW2ddPXRoaXMueHk/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZFswXSxkWzFdLGRbMl0pOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGRbMV0sZFswXSxkWzJdKTtiLnBvaW50cz1mfSxjb29yZDpmdW5jdGlvbihhLApiKXt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5wb2ludHN8fChiLnBvaW50cz1bXSk7Yi5wb2ludHMucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjLngsYy55LGMueikpfSxYOmZ1bmN0aW9uKGEsYil7Yi54PXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sWTpmdW5jdGlvbihhLGIpe2IueT10aGlzLmdldENoaWxkVmFsdWUoYSl9LFo6ZnVuY3Rpb24oYSxiKXtiLno9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxNdWx0aVBvaW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvbXBvbmVudHM6W119O3RoaXMucmVhZGVycy5nbWwuX2luaGVyaXQuYXBwbHkodGhpcyxbYSxjLGJdKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5jb21wb25lbnRzPVtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50KGMuY29tcG9uZW50cyldfSxwb2ludE1lbWJlcjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTGluZVN0cmluZzpmdW5jdGlvbihhLApiKXt2YXIgYz17fTt0aGlzLnJlYWRlcnMuZ21sLl9pbmhlcml0LmFwcGx5KHRoaXMsW2EsYyxiXSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuY29tcG9uZW50c3x8KGIuY29tcG9uZW50cz1bXSk7Yi5jb21wb25lbnRzLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhjLnBvaW50cykpfSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y29tcG9uZW50czpbXX07dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLFthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHM9W25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhjLmNvbXBvbmVudHMpXX0sbGluZVN0cmluZ01lbWJlcjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sUG9seWdvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXtvdXRlcjpudWxsLGlubmVyOltdfTt0aGlzLnJlYWRlcnMuZ21sLl9pbmhlcml0LmFwcGx5KHRoaXMsClthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtjLmlubmVyLnVuc2hpZnQoYy5vdXRlcik7Yi5jb21wb25lbnRzfHwoYi5jb21wb25lbnRzPVtdKTtiLmNvbXBvbmVudHMucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKGMuaW5uZXIpKX0sTGluZWFyUmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZGVycy5nbWwuX2luaGVyaXQuYXBwbHkodGhpcyxbYSxjXSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuY29tcG9uZW50cz1bbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhjLnBvaW50cyldfSxNdWx0aVBvbHlnb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y29tcG9uZW50czpbXX07dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLFthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHM9W25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbihjLmNvbXBvbmVudHMpXX0sCnBvbHlnb25NZW1iZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXtjb21wb25lbnRzOltdfTt0aGlzLnJlYWRlcnMuZ21sLl9pbmhlcml0LmFwcGx5KHRoaXMsW2EsYyxiXSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuY29tcG9uZW50cz1bbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbihjLmNvbXBvbmVudHMpXX0sZ2VvbWV0cnlNZW1iZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9fSxmZWF0dXJlOnsiKiI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPWEubG9jYWxOYW1lfHxhLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCk7Yi5mZWF0dXJlcz90aGlzLnNpbmdsZUZlYXR1cmVUeXBlfHwtMT09PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuZmVhdHVyZVR5cGUsZCk/ZD09PXRoaXMuZmVhdHVyZVR5cGUmJihjPSJfdHlwZU5hbWUiKTpjPQoiX3R5cGVOYW1lIjowPT1hLmNoaWxkTm9kZXMubGVuZ3RofHwxPT1hLmNoaWxkTm9kZXMubGVuZ3RoJiYzPT1hLmZpcnN0Q2hpbGQubm9kZVR5cGU/dGhpcy5leHRyYWN0QXR0cmlidXRlcyYmKGM9Il9hdHRyaWJ1dGUiKTpjPSJfZ2VvbWV0cnkiO2MmJnRoaXMucmVhZGVycy5mZWF0dXJlW2NdLmFwcGx5KHRoaXMsW2EsYl0pfSxfdHlwZU5hbWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y29tcG9uZW50czpbXSxhdHRyaWJ1dGVzOnt9fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yy5uYW1lJiYoYy5hdHRyaWJ1dGVzLm5hbWU9Yy5uYW1lKTt2YXIgZD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihjLmNvbXBvbmVudHNbMF0sYy5hdHRyaWJ1dGVzKTt0aGlzLnNpbmdsZUZlYXR1cmVUeXBlfHwoZC50eXBlPWEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKSxkLm5hbWVzcGFjZT1hLm5hbWVzcGFjZVVSSSk7dmFyIGU9YS5nZXRBdHRyaWJ1dGUoImZpZCIpfHx0aGlzLmdldEF0dHJpYnV0ZU5TKGEsCnRoaXMubmFtZXNwYWNlcy5nbWwsImlkIik7ZSYmKGQuZmlkPWUpO3RoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiYodGhpcy5leHRlcm5hbFByb2plY3Rpb24mJmQuZ2VvbWV0cnkpJiZkLmdlb21ldHJ5LnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7Yy5ib3VuZHMmJihkLmJvdW5kcz1jLmJvdW5kcyk7Yi5mZWF0dXJlcy5wdXNoKGQpfSxfZ2VvbWV0cnk6ZnVuY3Rpb24oYSxiKXt0aGlzLmdlb21ldHJ5TmFtZXx8KHRoaXMuZ2VvbWV0cnlOYW1lPWEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxfYXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sb2NhbE5hbWV8fGEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKSxkPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtiLmF0dHJpYnV0ZXNbY109ZH19LHdmczp7RmVhdHVyZUNvbGxlY3Rpb246ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsCmIpfX19LHdyaXRlOmZ1bmN0aW9uKGEpe3ZhciBiO2I9T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk/ImZlYXR1cmVNZW1iZXJzIjoiZmVhdHVyZU1lbWJlciI7YT10aGlzLndyaXRlTm9kZSgiZ21sOiIrYixhKTt0aGlzLnNldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhzaSwieHNpOnNjaGVtYUxvY2F0aW9uIix0aGlzLnNjaGVtYUxvY2F0aW9uKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFthXSl9LHdyaXRlcnM6e2dtbDp7ZmVhdHVyZU1lbWJlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpmZWF0dXJlTWVtYmVyIik7dGhpcy53cml0ZU5vZGUoImZlYXR1cmU6X3R5cGVOYW1lIixhLGIpO3JldHVybiBifSxNdWx0aVBvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOk11bHRpUG9pbnQiKTthPWEuY29tcG9uZW50c3x8W2FdOwpmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpdGhpcy53cml0ZU5vZGUoInBvaW50TWVtYmVyIixhW2NdLGIpO3JldHVybiBifSxwb2ludE1lbWJlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpwb2ludE1lbWJlciIpO3RoaXMud3JpdGVOb2RlKCJQb2ludCIsYSxiKTtyZXR1cm4gYn0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOk11bHRpTGluZVN0cmluZyIpO2E9YS5jb21wb25lbnRzfHxbYV07Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJsaW5lU3RyaW5nTWVtYmVyIixhW2NdLGIpO3JldHVybiBifSxsaW5lU3RyaW5nTWVtYmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmxpbmVTdHJpbmdNZW1iZXIiKTt0aGlzLndyaXRlTm9kZSgiTGluZVN0cmluZyIsYSxiKTtyZXR1cm4gYn0sCk11bHRpUG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpNdWx0aVBvbHlnb24iKTthPWEuY29tcG9uZW50c3x8W2FdO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgicG9seWdvbk1lbWJlciIsYVtjXSxiKTtyZXR1cm4gYn0scG9seWdvbk1lbWJlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpwb2x5Z29uTWVtYmVyIik7dGhpcy53cml0ZU5vZGUoIlBvbHlnb24iLGEsYik7cmV0dXJuIGJ9LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6R2VvbWV0cnlDb2xsZWN0aW9uIiksYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJnZW9tZXRyeU1lbWJlciIsYS5jb21wb25lbnRzW2NdLGIpO3JldHVybiBifSxnZW9tZXRyeU1lbWJlcjpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6Z2VvbWV0cnlNZW1iZXIiKTthPXRoaXMud3JpdGVOb2RlKCJmZWF0dXJlOl9nZW9tZXRyeSIsYSk7Yi5hcHBlbmRDaGlsZChhLmZpcnN0Q2hpbGQpO3JldHVybiBifX0sZmVhdHVyZTp7X3R5cGVOYW1lOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZmVhdHVyZToiK3RoaXMuZmVhdHVyZVR5cGUse2F0dHJpYnV0ZXM6e2ZpZDphLmZpZH19KTthLmdlb21ldHJ5JiZ0aGlzLndyaXRlTm9kZSgiZmVhdHVyZTpfZ2VvbWV0cnkiLGEuZ2VvbWV0cnksYik7Zm9yKHZhciBjIGluIGEuYXR0cmlidXRlcyl7dmFyIGQ9YS5hdHRyaWJ1dGVzW2NdO251bGwhPWQmJnRoaXMud3JpdGVOb2RlKCJmZWF0dXJlOl9hdHRyaWJ1dGUiLHtuYW1lOmMsdmFsdWU6ZH0sYil9cmV0dXJuIGJ9LF9nZW9tZXRyeTpmdW5jdGlvbihhKXt0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmdGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJihhPQphLmNsb25lKCkudHJhbnNmb3JtKHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uLHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uKSk7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJmZWF0dXJlOiIrdGhpcy5nZW9tZXRyeU5hbWUpO2E9dGhpcy53cml0ZU5vZGUoImdtbDoiK3RoaXMuZ2VvbWV0cnlUeXBlc1thLkNMQVNTX05BTUVdLGEsYik7dGhpcy5zcnNOYW1lJiZhLnNldEF0dHJpYnV0ZSgic3JzTmFtZSIsdGhpcy5zcnNOYW1lKTtyZXR1cm4gYn0sX2F0dHJpYnV0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJmZWF0dXJlOiIrYS5uYW1lLHt2YWx1ZTphLnZhbHVlfSl9fSx3ZnM6e0ZlYXR1cmVDb2xsZWN0aW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpGZWF0dXJlQ29sbGVjdGlvbiIpLGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpdGhpcy53cml0ZU5vZGUoImdtbDpmZWF0dXJlTWVtYmVyIiwKYVtjXSxiKTtyZXR1cm4gYn19fSxzZXRHZW9tZXRyeVR5cGVzOmZ1bmN0aW9uKCl7dGhpcy5nZW9tZXRyeVR5cGVzPXsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6IlBvaW50IiwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50IjoiTXVsdGlQb2ludCIsIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyI6IkxpbmVTdHJpbmciLCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyI6Ik11bHRpTGluZVN0cmluZyIsIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6IlBvbHlnb24iLCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI6Ik11bHRpUG9seWdvbiIsIk9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbiI6Ikdlb21ldHJ5Q29sbGVjdGlvbiJ9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZSJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZSx7c2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L2dtbC8yLjEuMi9mZWF0dXJlLnhzZCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWRlcnM6e2dtbDpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7b3V0ZXJCb3VuZGFyeUlzOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2Iub3V0ZXI9Yy5jb21wb25lbnRzWzBdfSxpbm5lckJvdW5kYXJ5SXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5pbm5lci5wdXNoKGMuY29tcG9uZW50c1swXSl9LEJveDpmdW5jdGlvbihhLGIpe3ZhciBjPQp7fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5jb21wb25lbnRzfHwoYi5jb21wb25lbnRzPVtdKTt2YXIgZD1jLnBvaW50c1swXSxjPWMucG9pbnRzWzFdO2IuY29tcG9uZW50cy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhkLngsZC55LGMueCxjLnkpKX19LE9wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS5yZWFkZXJzLmdtbCksZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUucmVhZGVycy5mZWF0dXJlLHdmczpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUucmVhZGVycy53ZnN9LHdyaXRlOmZ1bmN0aW9uKGEpe3ZhciBiO2I9T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk/IndmczpGZWF0dXJlQ29sbGVjdGlvbiI6ImdtbDpmZWF0dXJlTWVtYmVyIjthPXRoaXMud3JpdGVOb2RlKGIsYSk7dGhpcy5zZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54c2ksInhzaTpzY2hlbWFMb2NhdGlvbiIsdGhpcy5zY2hlbWFMb2NhdGlvbik7CnJldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2FdKX0sd3JpdGVyczp7Z21sOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtQb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpQb2ludCIpO3RoaXMud3JpdGVOb2RlKCJjb29yZGluYXRlcyIsW2FdLGIpO3JldHVybiBifSxjb29yZGluYXRlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1BcnJheShiKSxkLGU9MDtlPGI7KytlKWQ9YVtlXSxjW2VdPXRoaXMueHk/ZC54KyIsIitkLnk6ZC55KyIsIitkLngsdm9pZCAwIT1kLnomJihjW2VdKz0iLCIrZC56KTtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6Y29vcmRpbmF0ZXMiLHthdHRyaWJ1dGVzOntkZWNpbWFsOiIuIixjczoiLCIsdHM6IiAifSx2YWx1ZToxPT1iP2NbMF06Yy5qb2luKCIgIil9KX0sTGluZVN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6TGluZVN0cmluZyIpO3RoaXMud3JpdGVOb2RlKCJjb29yZGluYXRlcyIsYS5jb21wb25lbnRzLGIpO3JldHVybiBifSxQb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOlBvbHlnb24iKTt0aGlzLndyaXRlTm9kZSgib3V0ZXJCb3VuZGFyeUlzIixhLmNvbXBvbmVudHNbMF0sYik7Zm9yKHZhciBjPTE7YzxhLmNvbXBvbmVudHMubGVuZ3RoOysrYyl0aGlzLndyaXRlTm9kZSgiaW5uZXJCb3VuZGFyeUlzIixhLmNvbXBvbmVudHNbY10sYik7cmV0dXJuIGJ9LG91dGVyQm91bmRhcnlJczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpvdXRlckJvdW5kYXJ5SXMiKTt0aGlzLndyaXRlTm9kZSgiTGluZWFyUmluZyIsYSxiKTtyZXR1cm4gYn0saW5uZXJCb3VuZGFyeUlzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmlubmVyQm91bmRhcnlJcyIpOwp0aGlzLndyaXRlTm9kZSgiTGluZWFyUmluZyIsYSxiKTtyZXR1cm4gYn0sTGluZWFyUmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpMaW5lYXJSaW5nIik7dGhpcy53cml0ZU5vZGUoImNvb3JkaW5hdGVzIixhLmNvbXBvbmVudHMsYik7cmV0dXJuIGJ9LEJveDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpCb3giKTt0aGlzLndyaXRlTm9kZSgiY29vcmRpbmF0ZXMiLFt7eDphLmxlZnQseTphLmJvdHRvbX0se3g6YS5yaWdodCx5OmEudG9wfV0sYik7dGhpcy5zcnNOYW1lJiZiLnNldEF0dHJpYnV0ZSgic3JzTmFtZSIsdGhpcy5zcnNOYW1lKTtyZXR1cm4gYn19LE9wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS53cml0ZXJzLmdtbCksZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUud3JpdGVycy5mZWF0dXJlLHdmczpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUud3JpdGVycy53ZnN9LApDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIifSk7T3BlbkxheWVycy5GaWx0ZXIuRnVuY3Rpb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7bmFtZTpudWxsLHBhcmFtczpudWxsLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmlsdGVyLkZ1bmN0aW9uIn0pO09wZW5MYXllcnMuRGF0ZT17ZGF0ZVJlZ0V4Oi9eKD86KFxkezR9KSg/Oi0oXGR7Mn0pKD86LShcZHsyfSkpPyk/KT8oPzooPzpUKFxkezEsMn0pOihcZHsyfSk6KFxkezJ9KD86XC5cZCspPykoWnwoPzpbKy1dXGR7MSwyfSg/OjooXGR7Mn0pKT8pKSl8Wik/JC8sdG9JU09TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4idG9JU09TdHJpbmciaW4gRGF0ZS5wcm90b3R5cGU/ZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9JU09TdHJpbmcoKX06ZnVuY3Rpb24oYSl7cmV0dXJuIGlzTmFOKGEuZ2V0VGltZSgpKT8iSW52YWxpZCBEYXRlIjphLmdldFVUQ0Z1bGxZZWFyKCkrIi0iK09wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQoYS5nZXRVVENNb250aCgpKzEsMikrIi0iK09wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQoYS5nZXRVVENEYXRlKCksMikrIlQiK09wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQoYS5nZXRVVENIb3VycygpLDIpKyI6IitPcGVuTGF5ZXJzLk51bWJlci56ZXJvUGFkKGEuZ2V0VVRDTWludXRlcygpLAoyKSsiOiIrT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChhLmdldFVUQ1NlY29uZHMoKSwyKSsiLiIrT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChhLmdldFVUQ01pbGxpc2Vjb25kcygpLDMpKyJaIn19KCkscGFyc2U6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoKGE9YS5tYXRjaCh0aGlzLmRhdGVSZWdFeCkpJiYoYVsxXXx8YVs3XSkpe2I9cGFyc2VJbnQoYVsxXSwxMCl8fDA7dmFyIGM9cGFyc2VJbnQoYVsyXSwxMCktMXx8MCxkPXBhcnNlSW50KGFbM10sMTApfHwxO2I9bmV3IERhdGUoRGF0ZS5VVEMoYixjLGQpKTtpZihjPWFbN10pe3ZhciBkPXBhcnNlSW50KGFbNF0sMTApLGU9cGFyc2VJbnQoYVs1XSwxMCksZj1wYXJzZUZsb2F0KGFbNl0pLGc9ZnwwLGY9TWF0aC5yb3VuZCgxRTMqKGYtZykpO2Iuc2V0VVRDSG91cnMoZCxlLGcsZik7IloiIT09YyYmKGM9cGFyc2VJbnQoYywxMCksYT1wYXJzZUludChhWzhdLDEwKXx8MCxhPS0xRTMqKDYwKjYwKmMrNjAqYSksYj1uZXcgRGF0ZShiLmdldFRpbWUoKSsKYSkpfX1lbHNlIGI9bmV3IERhdGUoImludmFsaWQiKTtyZXR1cm4gYn19O09wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7bmFtZXNwYWNlczp7b2djOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nYyIsZ21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCIseGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLHhzaToiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UifSxkZWZhdWx0UHJlZml4OiJvZ2MiLHNjaGVtYUxvY2F0aW9uOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O3RoaXMucmVhZGVycy5vZ2MuRmlsdGVyLmFwcGx5KHRoaXMsW2EsYl0pO3JldHVybiBiLmZpbHRlcn0scmVhZGVyczp7b2djOntfZXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9IiIsYz1hLmZpcnN0Q2hpbGQ7YztjPQpjLm5leHRTaWJsaW5nKXN3aXRjaChjLm5vZGVUeXBlKXtjYXNlIDE6YT10aGlzLnJlYWROb2RlKGMpO2EucHJvcGVydHk/Yis9IiR7IithLnByb3BlcnR5KyJ9Ijp2b2lkIDAhPT1hLnZhbHVlJiYoYis9YS52YWx1ZSk7YnJlYWs7Y2FzZSAzOmNhc2UgNDpiKz1jLm5vZGVWYWx1ZX1yZXR1cm4gYn0sRmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZpZHM6W10sZmlsdGVyczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpOzA8Yy5maWRzLmxlbmd0aD9iLmZpbHRlcj1uZXcgT3BlbkxheWVycy5GaWx0ZXIuRmVhdHVyZUlkKHtmaWRzOmMuZmlkc30pOjA8Yy5maWx0ZXJzLmxlbmd0aCYmKGIuZmlsdGVyPWMuZmlsdGVyc1swXSl9LEZlYXR1cmVJZDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKCJmaWQiKTtjJiZiLmZpZHMucHVzaChjKX0sQW5kOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkR9KTsKdGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxPcjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuT1J9KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LE5vdDpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuTk9UfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzTGVzc1RoYW46ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbih7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTn0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX0sUHJvcGVydHlJc0dyZWF0ZXJUaGFuOmZ1bmN0aW9uKGEsCmIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uR1JFQVRFUl9USEFOfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzTGVzc1RoYW5PckVxdWFsVG86ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbih7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTl9PUl9FUVVBTF9UT30pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX0sUHJvcGVydHlJc0dyZWF0ZXJUaGFuT3JFcXVhbFRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24oe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5HUkVBVEVSX1RIQU5fT1JfRVFVQUxfVE99KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LApQcm9wZXJ0eUlzQmV0d2VlbjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uQkVUV0VFTn0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX0sTGl0ZXJhbDpmdW5jdGlvbihhLGIpe2IudmFsdWU9T3BlbkxheWVycy5TdHJpbmcubnVtZXJpY0lmKHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSwhMCl9LFByb3BlcnR5TmFtZTpmdW5jdGlvbihhLGIpe2IucHJvcGVydHk9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxMb3dlckJvdW5kYXJ5OmZ1bmN0aW9uKGEsYil7Yi5sb3dlckJvdW5kYXJ5PU9wZW5MYXllcnMuU3RyaW5nLm51bWVyaWNJZih0aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKSwhMCl9LFVwcGVyQm91bmRhcnk6ZnVuY3Rpb24oYSxiKXtiLnVwcGVyQm91bmRhcnk9T3BlbkxheWVycy5TdHJpbmcubnVtZXJpY0lmKHRoaXMucmVhZGVycy5vZ2MuX2V4cHJlc3Npb24uY2FsbCh0aGlzLAphKSwhMCl9LEludGVyc2VjdHM6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRTcGF0aWFsKGEsYixPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLklOVEVSU0VDVFMpfSxXaXRoaW46ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRTcGF0aWFsKGEsYixPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLldJVEhJTil9LENvbnRhaW5zOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkU3BhdGlhbChhLGIsT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5DT05UQUlOUyl9LERXaXRoaW46ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRTcGF0aWFsKGEsYixPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkRXSVRISU4pfSxEaXN0YW5jZTpmdW5jdGlvbihhLGIpe2IuZGlzdGFuY2U9cGFyc2VJbnQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKTtiLmRpc3RhbmNlVW5pdHM9YS5nZXRBdHRyaWJ1dGUoInVuaXRzIil9LEZ1bmN0aW9uOmZ1bmN0aW9uKGEsYil7fSxQcm9wZXJ0eUlzTnVsbDpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uSVNfTlVMTH0pOwp0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9fX0scmVhZFNwYXRpYWw6ZnVuY3Rpb24oYSxiLGMpe2M9bmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoe3R5cGU6Y30pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtjLnZhbHVlPWMuY29tcG9uZW50c1swXTtkZWxldGUgYy5jb21wb25lbnRzO2IuZmlsdGVycy5wdXNoKGMpfSxlbmNvZGVMaXRlcmFsOmZ1bmN0aW9uKGEpe2EgaW5zdGFuY2VvZiBEYXRlJiYoYT1PcGVuTGF5ZXJzLkRhdGUudG9JU09TdHJpbmcoYSkpO3JldHVybiBhfSx3cml0ZU9nY0V4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXthIGluc3RhbmNlb2YgT3BlbkxheWVycy5GaWx0ZXIuRnVuY3Rpb24/dGhpcy53cml0ZU5vZGUoIkZ1bmN0aW9uIixhLGIpOnRoaXMud3JpdGVOb2RlKCJMaXRlcmFsIixhLGIpO3JldHVybiBifSx3cml0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53cml0ZXJzLm9nYy5GaWx0ZXIuYXBwbHkodGhpcyxbYV0pfSwKd3JpdGVyczp7b2djOntGaWx0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6RmlsdGVyIik7dGhpcy53cml0ZU5vZGUodGhpcy5nZXRGaWx0ZXJUeXBlKGEpLGEsYik7cmV0dXJuIGJ9LF9mZWF0dXJlSWRzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxjPTAsZD1hLmZpZHMubGVuZ3RoO2M8ZDsrK2MpdGhpcy53cml0ZU5vZGUoIm9nYzpGZWF0dXJlSWQiLGEuZmlkc1tjXSxiKTtyZXR1cm4gYn0sRmVhdHVyZUlkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpGZWF0dXJlSWQiLHthdHRyaWJ1dGVzOntmaWQ6YX19KX0sQW5kOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpBbmQiKSxjLGQ9MCxlPWEuZmlsdGVycy5sZW5ndGg7ZDxlOysrZCljPWEuZmlsdGVyc1tkXSx0aGlzLndyaXRlTm9kZSh0aGlzLmdldEZpbHRlclR5cGUoYyksCmMsYik7cmV0dXJuIGJ9LE9yOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpPciIpLGMsZD0wLGU9YS5maWx0ZXJzLmxlbmd0aDtkPGU7KytkKWM9YS5maWx0ZXJzW2RdLHRoaXMud3JpdGVOb2RlKHRoaXMuZ2V0RmlsdGVyVHlwZShjKSxjLGIpO3JldHVybiBifSxOb3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6Tm90Iik7YT1hLmZpbHRlcnNbMF07dGhpcy53cml0ZU5vZGUodGhpcy5nZXRGaWx0ZXJUeXBlKGEpLGEsYik7cmV0dXJuIGJ9LFByb3BlcnR5SXNMZXNzVGhhbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzTGVzc1RoYW4iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEudmFsdWUsYik7cmV0dXJuIGJ9LFByb3BlcnR5SXNHcmVhdGVyVGhhbjpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc0dyZWF0ZXJUaGFuIik7dGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxiKTt0aGlzLndyaXRlT2djRXhwcmVzc2lvbihhLnZhbHVlLGIpO3JldHVybiBifSxQcm9wZXJ0eUlzTGVzc1RoYW5PckVxdWFsVG86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc0xlc3NUaGFuT3JFcXVhbFRvIik7dGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxiKTt0aGlzLndyaXRlT2djRXhwcmVzc2lvbihhLnZhbHVlLGIpO3JldHVybiBifSxQcm9wZXJ0eUlzR3JlYXRlclRoYW5PckVxdWFsVG86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc0dyZWF0ZXJUaGFuT3JFcXVhbFRvIik7dGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxiKTt0aGlzLndyaXRlT2djRXhwcmVzc2lvbihhLnZhbHVlLGIpOwpyZXR1cm4gYn0sUHJvcGVydHlJc0JldHdlZW46ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc0JldHdlZW4iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVOb2RlKCJMb3dlckJvdW5kYXJ5IixhLGIpO3RoaXMud3JpdGVOb2RlKCJVcHBlckJvdW5kYXJ5IixhLGIpO3JldHVybiBifSxQcm9wZXJ0eU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlByb3BlcnR5TmFtZSIse3ZhbHVlOmEucHJvcGVydHl9KX0sTGl0ZXJhbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6TGl0ZXJhbCIse3ZhbHVlOih0aGlzLmVuY29kZUxpdGVyYWx8fE9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MS5wcm90b3R5cGUuZW5jb2RlTGl0ZXJhbCkoYSl9KX0sTG93ZXJCb3VuZGFyeTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpMb3dlckJvdW5kYXJ5Iik7CnRoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEubG93ZXJCb3VuZGFyeSxiKTtyZXR1cm4gYn0sVXBwZXJCb3VuZGFyeTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpVcHBlckJvdW5kYXJ5Iik7dGhpcy53cml0ZU5vZGUoIkxpdGVyYWwiLGEudXBwZXJCb3VuZGFyeSxiKTtyZXR1cm4gYn0sSU5URVJTRUNUUzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53cml0ZVNwYXRpYWwoYSwiSW50ZXJzZWN0cyIpfSxXSVRISU46ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud3JpdGVTcGF0aWFsKGEsIldpdGhpbiIpfSxDT05UQUlOUzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53cml0ZVNwYXRpYWwoYSwiQ29udGFpbnMiKX0sRFdJVEhJTjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndyaXRlU3BhdGlhbChhLCJEV2l0aGluIik7dGhpcy53cml0ZU5vZGUoIkRpc3RhbmNlIixhLGIpO3JldHVybiBifSxEaXN0YW5jZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6RGlzdGFuY2UiLAp7YXR0cmlidXRlczp7dW5pdHM6YS5kaXN0YW5jZVVuaXRzfSx2YWx1ZTphLmRpc3RhbmNlfSl9LEZ1bmN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOkZ1bmN0aW9uIix7YXR0cmlidXRlczp7bmFtZTphLm5hbWV9fSk7YT1hLnBhcmFtcztmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspdGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYVtjXSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc051bGw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc051bGwiKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3JldHVybiBifX19LGdldEZpbHRlclR5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5maWx0ZXJNYXBbYS50eXBlXTtpZighYil0aHJvdyJGaWx0ZXIgd3JpdGluZyBub3Qgc3VwcG9ydGVkIGZvciBydWxlIHR5cGU6ICIrYS50eXBlO3JldHVybiBifSxmaWx0ZXJNYXA6eyImJiI6IkFuZCIsCiJ8fCI6Ik9yIiwiISI6Ik5vdCIsIj09IjoiUHJvcGVydHlJc0VxdWFsVG8iLCIhPSI6IlByb3BlcnR5SXNOb3RFcXVhbFRvIiwiPCI6IlByb3BlcnR5SXNMZXNzVGhhbiIsIj4iOiJQcm9wZXJ0eUlzR3JlYXRlclRoYW4iLCI8PSI6IlByb3BlcnR5SXNMZXNzVGhhbk9yRXF1YWxUbyIsIj49IjoiUHJvcGVydHlJc0dyZWF0ZXJUaGFuT3JFcXVhbFRvIiwiLi4iOiJQcm9wZXJ0eUlzQmV0d2VlbiIsIn4iOiJQcm9wZXJ0eUlzTGlrZSIsTlVMTDoiUHJvcGVydHlJc051bGwiLEJCT1g6IkJCT1giLERXSVRISU46IkRXSVRISU4iLFdJVEhJTjoiV0lUSElOIixDT05UQUlOUzoiQ09OVEFJTlMiLElOVEVSU0VDVFM6IklOVEVSU0VDVFMiLEZJRDoiX2ZlYXR1cmVJZHMifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjEifSk7T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LkdNTC52MixPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjEse1ZFUlNJT046IjEuMC4wIixzY2hlbWFMb2NhdGlvbjoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MvZmlsdGVyLzEuMC4wL2ZpbHRlci54c2QiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZGVyczp7b2djOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtQcm9wZXJ0eUlzRXF1YWxUbzpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE99KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LFByb3BlcnR5SXNOb3RFcXVhbFRvOmZ1bmN0aW9uKGEsCmIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTk9UX0VRVUFMX1RPfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzTGlrZTpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRX0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTt2YXIgZD1hLmdldEF0dHJpYnV0ZSgid2lsZENhcmQiKSxlPWEuZ2V0QXR0cmlidXRlKCJzaW5nbGVDaGFyIiksZj1hLmdldEF0dHJpYnV0ZSgiZXNjYXBlIik7Yy52YWx1ZTJyZWdleChkLGUsZik7Yi5maWx0ZXJzLnB1c2goYyl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjEucHJvdG90eXBlLnJlYWRlcnMub2djKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5yZWFkZXJzLmdtbCwKZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIucHJvdG90eXBlLnJlYWRlcnMuZmVhdHVyZX0sd3JpdGVyczp7b2djOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtQcm9wZXJ0eUlzRXF1YWxUbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzRXF1YWxUbyIpO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYS52YWx1ZSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc05vdEVxdWFsVG86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc05vdEVxdWFsVG8iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEudmFsdWUsYik7cmV0dXJuIGJ9LFByb3BlcnR5SXNMaWtlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlByb3BlcnR5SXNMaWtlIiwKe2F0dHJpYnV0ZXM6e3dpbGRDYXJkOiIqIixzaW5nbGVDaGFyOiIuIixlc2NhcGU6IiEifX0pO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU5vZGUoIkxpdGVyYWwiLGEucmVnZXgydmFsdWUoKSxiKTtyZXR1cm4gYn0sQkJPWDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpCQk9YIik7YS5wcm9wZXJ0eSYmdGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxiKTt2YXIgYz10aGlzLndyaXRlTm9kZSgiZ21sOkJveCIsYS52YWx1ZSxiKTthLnByb2plY3Rpb24mJmMuc2V0QXR0cmlidXRlKCJzcnNOYW1lIixhLnByb2plY3Rpb24pO3JldHVybiBifX0sT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxLnByb3RvdHlwZS53cml0ZXJzLm9nYyksZ21sOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUud3JpdGVycy5nbWwsZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIucHJvdG90eXBlLndyaXRlcnMuZmVhdHVyZX0sCndyaXRlU3BhdGlhbDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOiIrYik7dGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxjKTtpZihhLnZhbHVlIGluc3RhbmNlb2YgT3BlbkxheWVycy5GaWx0ZXIuRnVuY3Rpb24pdGhpcy53cml0ZU5vZGUoIkZ1bmN0aW9uIixhLnZhbHVlLGMpO2Vsc2V7dmFyIGQ7ZD1hLnZhbHVlIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeT90aGlzLndyaXRlTm9kZSgiZmVhdHVyZTpfZ2VvbWV0cnkiLGEudmFsdWUpLmZpcnN0Q2hpbGQ6dGhpcy53cml0ZU5vZGUoImdtbDpCb3giLGEudmFsdWUpO2EucHJvamVjdGlvbiYmZC5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLGEucHJvamVjdGlvbik7Yy5hcHBlbmRDaGlsZChkKX1yZXR1cm4gY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MV8wXzAsT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MSx7dmVyc2lvbjoiMS4wLjAiLHNyc05hbWVJblF1ZXJ5OiExLHNjaGVtYUxvY2F0aW9uczp7d2ZzOiJodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC93ZnMvMS4wLjAvV0ZTLXRyYW5zYWN0aW9uLnhzZCJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7T3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWROb2RlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5yZWFkTm9kZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlYWRlcnM6e3dmczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7V0ZTX1RyYW5zYWN0aW9uUmVzcG9uc2U6ZnVuY3Rpb24oYSwKYil7Yi5pbnNlcnRJZHM9W107Yi5zdWNjZXNzPSExO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sSW5zZXJ0UmVzdWx0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZpZHM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmluc2VydElkcz1iLmluc2VydElkcy5jb25jYXQoYy5maWRzKX0sVHJhbnNhY3Rpb25SZXN1bHQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFN0YXR1czpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sU1VDQ0VTUzpmdW5jdGlvbihhLGIpe2Iuc3VjY2Vzcz0hMH19LE9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLnJlYWRlcnMud2ZzKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5yZWFkZXJzLmdtbCxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUucmVhZGVycy5mZWF0dXJlLG9nYzpPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMF8wLnByb3RvdHlwZS5yZWFkZXJzLm9nY30sCndyaXRlcnM6e3dmczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7UXVlcnk6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtmZWF0dXJlTlM6dGhpcy5mZWF0dXJlTlMsZmVhdHVyZVByZWZpeDp0aGlzLmZlYXR1cmVQcmVmaXgsZmVhdHVyZVR5cGU6dGhpcy5mZWF0dXJlVHlwZSxzcnNOYW1lOnRoaXMuc3JzTmFtZSxzcnNOYW1lSW5RdWVyeTp0aGlzLnNyc05hbWVJblF1ZXJ5fSxhKTt2YXIgYj1hLmZlYXR1cmVQcmVmaXgsYz10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpRdWVyeSIse2F0dHJpYnV0ZXM6e3R5cGVOYW1lOihiP2IrIjoiOiIiKSthLmZlYXR1cmVUeXBlfX0pO2Euc3JzTmFtZUluUXVlcnkmJmEuc3JzTmFtZSYmYy5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLGEuc3JzTmFtZSk7YS5mZWF0dXJlTlMmJmMuc2V0QXR0cmlidXRlKCJ4bWxuczoiK2IsYS5mZWF0dXJlTlMpO2lmKGEucHJvcGVydHlOYW1lcylmb3IodmFyIGI9MCxkPWEucHJvcGVydHlOYW1lcy5sZW5ndGg7YjwKZDtiKyspdGhpcy53cml0ZU5vZGUoIm9nYzpQcm9wZXJ0eU5hbWUiLHtwcm9wZXJ0eTphLnByb3BlcnR5TmFtZXNbYl19LGMpO2EuZmlsdGVyJiYodGhpcy5zZXRGaWx0ZXJQcm9wZXJ0eShhLmZpbHRlciksdGhpcy53cml0ZU5vZGUoIm9nYzpGaWx0ZXIiLGEuZmlsdGVyLGMpKTtyZXR1cm4gY319LE9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLndyaXRlcnMud2ZzKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS53cml0ZXJzLmdtbCxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUud3JpdGVycy5mZWF0dXJlLG9nYzpPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMF8wLnByb3RvdHlwZS53cml0ZXJzLm9nY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MV8wXzAifSk7T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXI9T3BlbkxheWVycy5DbGFzcyh7bWF4WkluZGV4Om51bGwsb3JkZXI6bnVsbCxpbmRpY2VzOm51bGwsY29tcGFyZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5jb21wYXJlPWE/T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzLlpfT1JERVJfWV9PUkRFUjpPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlci5JbmRleGluZ01ldGhvZHMuWl9PUkRFUl9EUkFXSU5HX09SREVSO3RoaXMuY2xlYXIoKX0saW5zZXJ0OmZ1bmN0aW9uKGEpe3RoaXMuZXhpc3RzKGEpJiZ0aGlzLnJlbW92ZShhKTt2YXIgYj1hLmlkO3RoaXMuZGV0ZXJtaW5lWkluZGV4KGEpO2Zvcih2YXIgYz0tMSxkPXRoaXMub3JkZXIubGVuZ3RoLGU7MTxkLWM7KWU9cGFyc2VJbnQoKGMrZCkvMiksMDx0aGlzLmNvbXBhcmUodGhpcyxhLE9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KHRoaXMub3JkZXJbZV0pKT9jPWU6ZD1lO3RoaXMub3JkZXIuc3BsaWNlKGQsCjAsYik7dGhpcy5pbmRpY2VzW2JdPXRoaXMuZ2V0WkluZGV4KGEpO3JldHVybiB0aGlzLmdldE5leHRFbGVtZW50KGQpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7YT1hLmlkO3ZhciBiPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMub3JkZXIsYSk7MDw9YiYmKHRoaXMub3JkZXIuc3BsaWNlKGIsMSksZGVsZXRlIHRoaXMuaW5kaWNlc1thXSx0aGlzLm1heFpJbmRleD0wPHRoaXMub3JkZXIubGVuZ3RoP3RoaXMuaW5kaWNlc1t0aGlzLm9yZGVyW3RoaXMub3JkZXIubGVuZ3RoLTFdXTowKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLm9yZGVyPVtdO3RoaXMuaW5kaWNlcz17fTt0aGlzLm1heFpJbmRleD0wfSxleGlzdHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPXRoaXMuaW5kaWNlc1thLmlkXX0sZ2V0WkluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhLl9zdHlsZS5ncmFwaGljWkluZGV4fSxkZXRlcm1pbmVaSW5kZXg6ZnVuY3Rpb24oYSl7dmFyIGI9YS5fc3R5bGUuZ3JhcGhpY1pJbmRleDsKbnVsbD09Yj8oYj10aGlzLm1heFpJbmRleCxhLl9zdHlsZS5ncmFwaGljWkluZGV4PWIpOmI+dGhpcy5tYXhaSW5kZXgmJih0aGlzLm1heFpJbmRleD1iKX0sZ2V0TmV4dEVsZW1lbnQ6ZnVuY3Rpb24oYSl7YSs9MTtpZihhPHRoaXMub3JkZXIubGVuZ3RoKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudCh0aGlzLm9yZGVyW2FdKTt2b2lkIDA9PWImJihiPXRoaXMuZ2V0TmV4dEVsZW1lbnQoYSkpO3JldHVybiBifXJldHVybiBudWxsfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlciJ9KTsKT3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzPXtaX09SREVSOmZ1bmN0aW9uKGEsYixjKXtiPWEuZ2V0WkluZGV4KGIpO3ZhciBkPTA7YyYmKGE9YS5nZXRaSW5kZXgoYyksZD1iLWEpO3JldHVybiBkfSxaX09SREVSX0RSQVdJTkdfT1JERVI6ZnVuY3Rpb24oYSxiLGMpe2E9T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzLlpfT1JERVIoYSxiLGMpO2MmJjA9PWEmJihhPTEpO3JldHVybiBhfSxaX09SREVSX1lfT1JERVI6ZnVuY3Rpb24oYSxiLGMpe2E9T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzLlpfT1JERVIoYSxiLGMpO2MmJjA9PT1hJiYoYj1jLl9ib3VuZHNCb3R0b20tYi5fYm91bmRzQm90dG9tLGE9MD09PWI/MTpiKTtyZXR1cm4gYX19OwpPcGVuTGF5ZXJzLlJlbmRlcmVyLkVsZW1lbnRzPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5SZW5kZXJlcix7cmVuZGVyZXJSb290Om51bGwscm9vdDpudWxsLHZlY3RvclJvb3Q6bnVsbCx0ZXh0Um9vdDpudWxsLHhtbG5zOm51bGwseE9mZnNldDowLGluZGV4ZXI6bnVsbCxCQUNLR1JPVU5EX0lEX1NVRkZJWDoiX2JhY2tncm91bmQiLExBQkVMX0lEX1NVRkZJWDoiX2xhYmVsIixMQUJFTF9PVVRMSU5FX1NVRkZJWDoiX291dGxpbmUiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnJlbmRlcmVyUm9vdD10aGlzLmNyZWF0ZVJlbmRlclJvb3QoKTt0aGlzLnJvb3Q9dGhpcy5jcmVhdGVSb290KCJfcm9vdCIpO3RoaXMudmVjdG9yUm9vdD10aGlzLmNyZWF0ZVJvb3QoIl92cm9vdCIpO3RoaXMudGV4dFJvb3Q9dGhpcy5jcmVhdGVSb290KCJfdHJvb3QiKTt0aGlzLnJvb3QuYXBwZW5kQ2hpbGQodGhpcy52ZWN0b3JSb290KTsKdGhpcy5yb290LmFwcGVuZENoaWxkKHRoaXMudGV4dFJvb3QpO3RoaXMucmVuZGVyZXJSb290LmFwcGVuZENoaWxkKHRoaXMucm9vdCk7dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlclJvb3QpO2ImJihiLnpJbmRleGluZ3x8Yi55T3JkZXJpbmcpJiYodGhpcy5pbmRleGVyPW5ldyBPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlcihiLnlPcmRlcmluZykpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jbGVhcigpO3RoaXMueG1sbnM9dGhpcy5yb290PXRoaXMucmVuZGVyZXJSb290PW51bGw7T3BlbkxheWVycy5SZW5kZXJlci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNsZWFyOmZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLnZlY3RvclJvb3Q7aWYoYilmb3IoO2E9Yi5maXJzdENoaWxkOyliLnJlbW92ZUNoaWxkKGEpO2lmKGI9dGhpcy50ZXh0Um9vdClmb3IoO2E9Yi5maXJzdENoaWxkOyliLnJlbW92ZUNoaWxkKGEpO3RoaXMuaW5kZXhlciYmCnRoaXMuaW5kZXhlci5jbGVhcigpfSxzZXRFeHRlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5zZXRFeHRlbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpLGQ9dGhpcy5nZXRSZXNvbHV0aW9uKCk7aWYodGhpcy5tYXAuYmFzZUxheWVyJiZ0aGlzLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgZSxmPWEuZ2V0V2lkdGgoKS90aGlzLm1hcC5nZXRFeHRlbnQoKS5nZXRXaWR0aCgpO2E9YS5zY2FsZSgxL2YpO2Y9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCk7Zi5yaWdodD5hLmxlZnQmJmYucmlnaHQ8YS5yaWdodD9lPSEwOmYubGVmdD5hLmxlZnQmJmYubGVmdDxhLnJpZ2h0JiYoZT0hMSk7aWYoZSE9PXRoaXMucmlnaHRPZkRhdGVMaW5lfHxiKWM9ITEsdGhpcy54T2Zmc2V0PSEwPT09ZT9mLmdldFdpZHRoKCkvZDowO3RoaXMucmlnaHRPZkRhdGVMaW5lPWV9cmV0dXJuIGN9LGdldE5vZGVUeXBlOmZ1bmN0aW9uKGEsYil7fSxkcmF3R2VvbWV0cnk6ZnVuY3Rpb24oYSwKYixjKXt2YXIgZD1hLkNMQVNTX05BTUUsZT0hMDtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIj09ZHx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCI9PWR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyI9PWR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI9PWQpe2Zvcih2YXIgZD0wLGY9YS5jb21wb25lbnRzLmxlbmd0aDtkPGY7ZCsrKWU9dGhpcy5kcmF3R2VvbWV0cnkoYS5jb21wb25lbnRzW2RdLGIsYykmJmU7cmV0dXJuIGV9ZD1lPSExOyJub25lIiE9Yi5kaXNwbGF5JiYoYi5iYWNrZ3JvdW5kR3JhcGhpYz90aGlzLnJlZHJhd0JhY2tncm91bmROb2RlKGEuaWQsYSxiLGMpOmQ9ITAsZT10aGlzLnJlZHJhd05vZGUoYS5pZCxhLGIsYykpOyExPT1lJiYoYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhLmlkKSkmJihiLl9zdHlsZS5iYWNrZ3JvdW5kR3JhcGhpYyYmKGQ9ITApLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSk7CmQmJihiPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQrdGhpcy5CQUNLR1JPVU5EX0lEX1NVRkZJWCkpJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7cmV0dXJuIGV9LHJlZHJhd05vZGU6ZnVuY3Rpb24oYSxiLGMsZCl7Yz10aGlzLmFwcGx5RGVmYXVsdFN5bWJvbGl6ZXIoYyk7YT10aGlzLm5vZGVGYWN0b3J5KGEsdGhpcy5nZXROb2RlVHlwZShiLGMpKTthLl9mZWF0dXJlSWQ9ZDthLl9ib3VuZHNCb3R0b209Yi5nZXRCb3VuZHMoKS5ib3R0b207YS5fZ2VvbWV0cnlDbGFzcz1iLkNMQVNTX05BTUU7YS5fc3R5bGU9YztiPXRoaXMuZHJhd0dlb21ldHJ5Tm9kZShhLGIsYyk7aWYoITE9PT1iKXJldHVybiExO2E9Yi5ub2RlO3RoaXMuaW5kZXhlcj8oYz10aGlzLmluZGV4ZXIuaW5zZXJ0KGEpKT90aGlzLnZlY3RvclJvb3QuaW5zZXJ0QmVmb3JlKGEsYyk6dGhpcy52ZWN0b3JSb290LmFwcGVuZENoaWxkKGEpOmEucGFyZW50Tm9kZSE9PXRoaXMudmVjdG9yUm9vdCYmdGhpcy52ZWN0b3JSb290LmFwcGVuZENoaWxkKGEpOwp0aGlzLnBvc3REcmF3KGEpO3JldHVybiBiLmNvbXBsZXRlfSxyZWRyYXdCYWNrZ3JvdW5kTm9kZTpmdW5jdGlvbihhLGIsYyxkKXtjPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYyk7Yy5leHRlcm5hbEdyYXBoaWM9Yy5iYWNrZ3JvdW5kR3JhcGhpYztjLmdyYXBoaWNYT2Zmc2V0PWMuYmFja2dyb3VuZFhPZmZzZXQ7Yy5ncmFwaGljWU9mZnNldD1jLmJhY2tncm91bmRZT2Zmc2V0O2MuZ3JhcGhpY1pJbmRleD1jLmJhY2tncm91bmRHcmFwaGljWkluZGV4O2MuZ3JhcGhpY1dpZHRoPWMuYmFja2dyb3VuZFdpZHRofHxjLmdyYXBoaWNXaWR0aDtjLmdyYXBoaWNIZWlnaHQ9Yy5iYWNrZ3JvdW5kSGVpZ2h0fHxjLmdyYXBoaWNIZWlnaHQ7Yy5iYWNrZ3JvdW5kR3JhcGhpYz1udWxsO2MuYmFja2dyb3VuZFhPZmZzZXQ9bnVsbDtjLmJhY2tncm91bmRZT2Zmc2V0PW51bGw7Yy5iYWNrZ3JvdW5kR3JhcGhpY1pJbmRleD1udWxsO3JldHVybiB0aGlzLnJlZHJhd05vZGUoYSt0aGlzLkJBQ0tHUk9VTkRfSURfU1VGRklYLApiLGMsbnVsbCl9LGRyYXdHZW9tZXRyeU5vZGU6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8YS5fc3R5bGU7dmFyIGQ9e2lzRmlsbGVkOnZvaWQgMD09PWMuZmlsbD8hMDpjLmZpbGwsaXNTdHJva2VkOnZvaWQgMD09PWMuc3Ryb2tlPyEhYy5zdHJva2VXaWR0aDpjLnN0cm9rZX0sZTtzd2l0Y2goYi5DTEFTU19OQU1FKXtjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50IjohMT09PWMuZ3JhcGhpYyYmKGQuaXNGaWxsZWQ9ITEsZC5pc1N0cm9rZWQ9ITEpO2U9dGhpcy5kcmF3UG9pbnQoYSxiKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOmQuaXNGaWxsZWQ9ITE7ZT10aGlzLmRyYXdMaW5lU3RyaW5nKGEsYik7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIjplPXRoaXMuZHJhd0xpbmVhclJpbmcoYSxiKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iOmU9dGhpcy5kcmF3UG9seWdvbihhLGIpO2JyZWFrOwpjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlJlY3RhbmdsZSI6ZT10aGlzLmRyYXdSZWN0YW5nbGUoYSxiKX1hLl9vcHRpb25zPWQ7cmV0dXJuITEhPWU/e25vZGU6dGhpcy5zZXRTdHlsZShhLGMsZCxiKSxjb21wbGV0ZTplfTohMX0scG9zdERyYXc6ZnVuY3Rpb24oYSl7fSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiKXt9LGRyYXdMaW5lU3RyaW5nOmZ1bmN0aW9uKGEsYil7fSxkcmF3TGluZWFyUmluZzpmdW5jdGlvbihhLGIpe30sZHJhd1BvbHlnb246ZnVuY3Rpb24oYSxiKXt9LGRyYXdSZWN0YW5nbGU6ZnVuY3Rpb24oYSxiKXt9LGRyYXdDaXJjbGU6ZnVuY3Rpb24oYSxiKXt9LHJlbW92ZVRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSt0aGlzLkxBQkVMX0lEX1NVRkZJWCk7YiYmdGhpcy50ZXh0Um9vdC5yZW1vdmVDaGlsZChiKTsoYT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhK3RoaXMuTEFCRUxfT1VUTElORV9TVUZGSVgpKSYmdGhpcy50ZXh0Um9vdC5yZW1vdmVDaGlsZChhKX0sCmdldEZlYXR1cmVJZEZyb21FdmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxjPWImJmIuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQ7cmV0dXJuKGM/YzpifHxhLnNyY0VsZW1lbnQpLl9mZWF0dXJlSWR9LGVyYXNlR2VvbWV0cnk6ZnVuY3Rpb24oYSxiKXtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50Ij09YS5DTEFTU19OQU1FfHwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmciPT1hLkNMQVNTX05BTUV8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI9PWEuQ0xBU1NfTkFNRXx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbiI9PWEuQ0xBU1NfTkFNRSlmb3IodmFyIGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkO2MrKyl0aGlzLmVyYXNlR2VvbWV0cnkoYS5jb21wb25lbnRzW2NdLGIpO2Vsc2UoYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhLmlkKSkmJmMucGFyZW50Tm9kZSYmKGMuZ2VvbWV0cnkmJihjLmdlb21ldHJ5LmRlc3Ryb3koKSwKYy5nZW9tZXRyeT1udWxsKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyksdGhpcy5pbmRleGVyJiZ0aGlzLmluZGV4ZXIucmVtb3ZlKGMpLGMuX3N0eWxlLmJhY2tncm91bmRHcmFwaGljJiYoYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhLmlkK3RoaXMuQkFDS0dST1VORF9JRF9TVUZGSVgpKSYmYy5wYXJlbnROb2RlJiZjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYykpfSxub2RlRmFjdG9yeTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO2M/dGhpcy5ub2RlVHlwZUNvbXBhcmUoYyxiKXx8KGMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSxjPXRoaXMubm9kZUZhY3RvcnkoYSxiKSk6Yz10aGlzLmNyZWF0ZU5vZGUoYixhKTtyZXR1cm4gY30sbm9kZVR5cGVDb21wYXJlOmZ1bmN0aW9uKGEsYil7fSxjcmVhdGVOb2RlOmZ1bmN0aW9uKGEsYil7fSxtb3ZlUm9vdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJvb3Q7YS5yb290LnBhcmVudE5vZGU9PQp0aGlzLnJlbmRlcmVyUm9vdCYmKGI9YS5yb290KTtiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7YS5yZW5kZXJlclJvb3QuYXBwZW5kQ2hpbGQoYil9LGdldFJlbmRlckxheWVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290LnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZH0saXNDb21wbGV4U3ltYm9sOmZ1bmN0aW9uKGEpe3JldHVybiJjaXJjbGUiIT1hJiYhIWF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMifSk7T3BlbkxheWVycy5Db250cm9sLlBhbmVsPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtjb250cm9sczpudWxsLGF1dG9BY3RpdmF0ZTohMCxkZWZhdWx0Q29udHJvbDpudWxsLHNhdmVTdGF0ZTohMSxhbGxvd0RlcHJlc3M6ITEsYWN0aXZlU3RhdGU6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7dGhpcy5jb250cm9scz1bXTt0aGlzLmFjdGl2ZVN0YXRlPXt9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uQnV0dG9uQ2xpY2spO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Zm9yKHZhciBhLGI9dGhpcy5jb250cm9scy5sZW5ndGgtMTswPD1iO2ItLSlhPXRoaXMuY29udHJvbHNbYl0sYS5ldmVudHMmJgphLmV2ZW50cy51bih7YWN0aXZhdGU6dGhpcy5pY29uT24sZGVhY3RpdmF0ZTp0aGlzLmljb25PZmZ9KSxhLnBhbmVsX2Rpdj1udWxsO3RoaXMuYWN0aXZlU3RhdGU9bnVsbH0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZihPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7Zm9yKHZhciBhLGI9MCxjPXRoaXMuY29udHJvbHMubGVuZ3RoO2I8YztiKyspYT10aGlzLmNvbnRyb2xzW2JdLChhPT09dGhpcy5kZWZhdWx0Q29udHJvbHx8dGhpcy5zYXZlU3RhdGUmJnRoaXMuYWN0aXZlU3RhdGVbYS5pZF0pJiZhLmFjdGl2YXRlKCk7ITA9PT10aGlzLnNhdmVTdGF0ZSYmKHRoaXMuZGVmYXVsdENvbnRyb2w9bnVsbCk7dGhpcy5yZWRyYXcoKTtyZXR1cm4hMH1yZXR1cm4hMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpe2Zvcih2YXIgYSwKYj0wLGM9dGhpcy5jb250cm9scy5sZW5ndGg7YjxjO2IrKylhPXRoaXMuY29udHJvbHNbYl0sdGhpcy5hY3RpdmVTdGF0ZVthLmlkXT1hLmRlYWN0aXZhdGUoKTt0aGlzLnJlZHJhdygpO3JldHVybiEwfXJldHVybiExfSxkcmF3OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm91dHNpZGVWaWV3cG9ydD8odGhpcy5ldmVudHMuYXR0YWNoVG9FbGVtZW50KHRoaXMuZGl2KSx0aGlzLmV2ZW50cy5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vbkJ1dHRvbkNsaWNrKSk6dGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uQnV0dG9uQ2xpY2spO3RoaXMuYWRkQ29udHJvbHNUb01hcCh0aGlzLmNvbnRyb2xzKTtyZXR1cm4gdGhpcy5kaXZ9LHJlZHJhdzpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmRpdi5jaGlsZE5vZGVzLmxlbmd0aC0xOzA8PWE7YS0tKXRoaXMuZGl2LnJlbW92ZUNoaWxkKHRoaXMuZGl2LmNoaWxkTm9kZXNbYV0pOwp0aGlzLmRpdi5pbm5lckhUTUw9IiI7aWYodGhpcy5hY3RpdmUpZm9yKHZhciBhPTAsYj10aGlzLmNvbnRyb2xzLmxlbmd0aDthPGI7YSsrKXRoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMuY29udHJvbHNbYV0ucGFuZWxfZGl2KX0sYWN0aXZhdGVDb250cm9sOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmFjdGl2ZSlyZXR1cm4hMTtpZihhLnR5cGU9PU9wZW5MYXllcnMuQ29udHJvbC5UWVBFX0JVVFRPTilhLnRyaWdnZXIoKTtlbHNlIGlmKGEudHlwZT09T3BlbkxheWVycy5Db250cm9sLlRZUEVfVE9HR0xFKWEuYWN0aXZlP2EuZGVhY3RpdmF0ZSgpOmEuYWN0aXZhdGUoKTtlbHNlIGlmKHRoaXMuYWxsb3dEZXByZXNzJiZhLmFjdGl2ZSlhLmRlYWN0aXZhdGUoKTtlbHNle2Zvcih2YXIgYixjPTAsZD10aGlzLmNvbnRyb2xzLmxlbmd0aDtjPGQ7YysrKWI9dGhpcy5jb250cm9sc1tjXSxiPT1hfHxiLnR5cGUhPT1PcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT09MJiZudWxsIT1iLnR5cGV8fGIuZGVhY3RpdmF0ZSgpOwphLmFjdGl2YXRlKCl9fSxhZGRDb250cm9sczpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTt0aGlzLmNvbnRyb2xzPXRoaXMuY29udHJvbHMuY29uY2F0KGEpO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9YVtiXSxlPXRoaXMuY3JlYXRlQ29udHJvbE1hcmt1cChkKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoZSxkLmRpc3BsYXlDbGFzcysiSXRlbUluYWN0aXZlIik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKGUsIm9sQnV0dG9uIik7IiI9PWQudGl0bGV8fGUudGl0bGV8fChlLnRpdGxlPWQudGl0bGUpO2QucGFuZWxfZGl2PWV9dGhpcy5tYXAmJih0aGlzLmFkZENvbnRyb2xzVG9NYXAoYSksdGhpcy5yZWRyYXcoKSl9LGNyZWF0ZUNvbnRyb2xNYXJrdXA6ZnVuY3Rpb24oYSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpfSxhZGRDb250cm9sc1RvTWFwOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiwKYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyliPWFbY10sITA9PT1iLmF1dG9BY3RpdmF0ZT8oYi5hdXRvQWN0aXZhdGU9ITEsdGhpcy5tYXAuYWRkQ29udHJvbChiKSxiLmF1dG9BY3RpdmF0ZT0hMCk6KHRoaXMubWFwLmFkZENvbnRyb2woYiksYi5kZWFjdGl2YXRlKCkpLGIuZXZlbnRzLm9uKHthY3RpdmF0ZTp0aGlzLmljb25PbixkZWFjdGl2YXRlOnRoaXMuaWNvbk9mZn0pfSxpY29uT246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhbmVsX2RpdjthLmNsYXNzTmFtZT1hLmNsYXNzTmFtZS5yZXBsYWNlKFJlZ0V4cCgiXFxiKCIrdGhpcy5kaXNwbGF5Q2xhc3MrIkl0ZW0pSW5hY3RpdmVcXGIiKSwiJDFBY3RpdmUiKX0saWNvbk9mZjpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFuZWxfZGl2O2EuY2xhc3NOYW1lPWEuY2xhc3NOYW1lLnJlcGxhY2UoUmVnRXhwKCJcXGIoIit0aGlzLmRpc3BsYXlDbGFzcysiSXRlbSlBY3RpdmVcXGIiKSwiJDFJbmFjdGl2ZSIpfSxvbkJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGEpe3ZhciBiPQp0aGlzLmNvbnRyb2xzO2E9YS5idXR0b25FbGVtZW50O2Zvcih2YXIgYz1iLmxlbmd0aC0xOzA8PWM7LS1jKWlmKGJbY10ucGFuZWxfZGl2PT09YSl7dGhpcy5hY3RpdmF0ZUNvbnRyb2woYltjXSk7YnJlYWt9fSxnZXRDb250cm9sc0J5OmZ1bmN0aW9uKGEsYil7dmFyIGM9ImZ1bmN0aW9uIj09dHlwZW9mIGIudGVzdDtyZXR1cm4gT3BlbkxheWVycy5BcnJheS5maWx0ZXIodGhpcy5jb250cm9scyxmdW5jdGlvbihkKXtyZXR1cm4gZFthXT09Ynx8YyYmYi50ZXN0KGRbYV0pfSl9LGdldENvbnRyb2xzQnlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldENvbnRyb2xzQnkoIm5hbWUiLGEpfSxnZXRDb250cm9sc0J5Q2xhc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q29udHJvbHNCeSgiQ0xBU1NfTkFNRSIsYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5QYW5lbCJ9KTtPcGVuTGF5ZXJzLlN0cmF0ZWd5PU9wZW5MYXllcnMuQ2xhc3Moe2xheWVyOm51bGwsb3B0aW9uczpudWxsLGFjdGl2ZTpudWxsLGF1dG9BY3RpdmF0ZTohMCxhdXRvRGVzdHJveTohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTt0aGlzLm9wdGlvbnM9YTt0aGlzLmFjdGl2ZT0hMX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpO3RoaXMub3B0aW9ucz10aGlzLmxheWVyPW51bGx9LHNldExheWVyOmZ1bmN0aW9uKGEpe3RoaXMubGF5ZXI9YX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmU/ITE6dGhpcy5hY3RpdmU9ITB9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmU/KHRoaXMuYWN0aXZlPSExLCEwKTohMX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TdHJhdGVneSJ9KTtPcGVuTGF5ZXJzLlN0cmF0ZWd5LkZpeGVkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TdHJhdGVneSx7cHJlbG9hZDohMSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuU3RyYXRlZ3kucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihhKWlmKHRoaXMubGF5ZXIuZXZlbnRzLm9uKHtyZWZyZXNoOnRoaXMubG9hZCxzY29wZTp0aGlzfSksITA9PXRoaXMubGF5ZXIudmlzaWJpbGl0eXx8dGhpcy5wcmVsb2FkKXRoaXMubG9hZCgpO2Vsc2UgdGhpcy5sYXllci5ldmVudHMub24oe3Zpc2liaWxpdHljaGFuZ2VkOnRoaXMubG9hZCxzY29wZTp0aGlzfSk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7YSYmdGhpcy5sYXllci5ldmVudHMudW4oe3JlZnJlc2g6dGhpcy5sb2FkLHZpc2liaWxpdHljaGFuZ2VkOnRoaXMubG9hZCwKc2NvcGU6dGhpc30pO3JldHVybiBhfSxsb2FkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGF5ZXI7Yi5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2Fkc3RhcnQiLHtmaWx0ZXI6Yi5maWx0ZXJ9KTtiLnByb3RvY29sLnJlYWQoT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2NhbGxiYWNrOnRoaXMubWVyZ2UsZmlsdGVyOmIuZmlsdGVyLHNjb3BlOnRoaXN9LGEpKTtiLmV2ZW50cy51bih7dmlzaWJpbGl0eWNoYW5nZWQ6dGhpcy5sb2FkLHNjb3BlOnRoaXN9KX0sbWVyZ2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sYXllcjtiLmRlc3Ryb3lGZWF0dXJlcygpO3ZhciBjPWEuZmVhdHVyZXM7aWYoYyYmMDxjLmxlbmd0aCl7dmFyIGQ9Yi5wcm9qZWN0aW9uLGU9Yi5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpO2lmKCFlLmVxdWFscyhkKSlmb3IodmFyIGYsZz0wLGg9Yy5sZW5ndGg7ZzxoOysrZykoZj1jW2ddLmdlb21ldHJ5KSYmZi50cmFuc2Zvcm0oZCxlKTtiLmFkZEZlYXR1cmVzKGMpfWIuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZGVuZCIsCntyZXNwb25zZTphfSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3RyYXRlZ3kuRml4ZWQifSk7T3BlbkxheWVycy5Db250cm9sLlpvb209T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3pvb21JblRleHQ6IisiLHpvb21JbklkOiJvbFpvb21JbkxpbmsiLHpvb21PdXRUZXh0OiJcdTIyMTIiLHpvb21PdXRJZDoib2xab29tT3V0TGluayIsZHJhdzpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzKSxiPXRoaXMuZ2V0T3JDcmVhdGVMaW5rcyhhKSxjPWIuem9vbUluLGI9Yi56b29tT3V0LGQ9dGhpcy5tYXAuZXZlbnRzO2IucGFyZW50Tm9kZSE9PWEmJihkPXRoaXMuZXZlbnRzLGQuYXR0YWNoVG9FbGVtZW50KGIucGFyZW50Tm9kZSkpO2QucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25ab29tQ2xpY2spO3RoaXMuem9vbUluTGluaz1jO3RoaXMuem9vbU91dExpbms9YjtyZXR1cm4gYX0sZ2V0T3JDcmVhdGVMaW5rczpmdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnpvb21JbklkKSwKYz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnpvb21PdXRJZCk7Ynx8KGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLGIuaHJlZj0iI3pvb21JbiIsYi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLnpvb21JblRleHQpKSxiLmNsYXNzTmFtZT0ib2xDb250cm9sWm9vbUluIixhLmFwcGVuZENoaWxkKGIpKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoYiwib2xCdXR0b24iKTtjfHwoYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIiksYy5ocmVmPSIjem9vbU91dCIsYy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLnpvb21PdXRUZXh0KSksYy5jbGFzc05hbWU9Im9sQ29udHJvbFpvb21PdXQiLGEuYXBwZW5kQ2hpbGQoYykpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhjLCJvbEJ1dHRvbiIpO3JldHVybnt6b29tSW46Yix6b29tT3V0OmN9fSxvblpvb21DbGljazpmdW5jdGlvbihhKXthPWEuYnV0dG9uRWxlbWVudDsKYT09PXRoaXMuem9vbUluTGluaz90aGlzLm1hcC56b29tSW4oKTphPT09dGhpcy56b29tT3V0TGluayYmdGhpcy5tYXAuem9vbU91dCgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uWm9vbUNsaWNrKTtkZWxldGUgdGhpcy56b29tSW5MaW5rO2RlbGV0ZSB0aGlzLnpvb21PdXRMaW5rO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlpvb20ifSk7T3BlbkxheWVycy5Qcm90b2NvbD1PcGVuTGF5ZXJzLkNsYXNzKHtmb3JtYXQ6bnVsbCxvcHRpb25zOm51bGwsYXV0b0Rlc3Ryb3k6ITAsZGVmYXVsdEZpbHRlcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7YT1hfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5vcHRpb25zPWF9LG1lcmdlV2l0aERlZmF1bHRGaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJnRoaXMuZGVmYXVsdEZpbHRlcj9uZXcgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLkFORCxmaWx0ZXJzOlt0aGlzLmRlZmF1bHRGaWx0ZXIsYV19KTphfHx0aGlzLmRlZmF1bHRGaWx0ZXJ8fHZvaWQgMH0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZm9ybWF0PXRoaXMub3B0aW9ucz1udWxsfSxyZWFkOmZ1bmN0aW9uKGEpe2E9YXx8e307YS5maWx0ZXI9dGhpcy5tZXJnZVdpdGhEZWZhdWx0RmlsdGVyKGEuZmlsdGVyKX0sY3JlYXRlOmZ1bmN0aW9uKCl7fSwKdXBkYXRlOmZ1bmN0aW9uKCl7fSwiZGVsZXRlIjpmdW5jdGlvbigpe30sY29tbWl0OmZ1bmN0aW9uKCl7fSxhYm9ydDpmdW5jdGlvbihhKXt9LGNyZWF0ZUNhbGxiYWNrOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKCl7YS5hcHBseSh0aGlzLFtiLGNdKX0sdGhpcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wifSk7T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZT1PcGVuTGF5ZXJzLkNsYXNzKHtjb2RlOm51bGwscmVxdWVzdFR5cGU6bnVsbCxsYXN0OiEwLGZlYXR1cmVzOm51bGwsZGF0YTpudWxsLHJlcUZlYXR1cmVzOm51bGwscHJpdjpudWxsLGVycm9yOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSl9LHN1Y2Nlc3M6ZnVuY3Rpb24oKXtyZXR1cm4gMDx0aGlzLmNvZGV9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UifSk7Ck9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuU1VDQ0VTUz0xO09wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRT0wO09wZW5MYXllcnMuUHJvdG9jb2wuV0ZTPWZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSxPcGVuTGF5ZXJzLlByb3RvY29sLldGUy5ERUZBVUxUUyk7dmFyIGI9T3BlbkxheWVycy5Qcm90b2NvbC5XRlNbInYiK2EudmVyc2lvbi5yZXBsYWNlKC9cLi9nLCJfIildO2lmKCFiKXRocm93IlVuc3VwcG9ydGVkIFdGUyB2ZXJzaW9uOiAiK2EudmVyc2lvbjtyZXR1cm4gbmV3IGIoYSl9OwpPcGVuTGF5ZXJzLlByb3RvY29sLldGUy5mcm9tV01TTGF5ZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2M9YS5wYXJhbXMuTEFZRVJTO2M9KE9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGMpP2NbMF06Yykuc3BsaXQoIjoiKTsxPGMubGVuZ3RoJiYoZD1jWzBdKTtjPWMucG9wKCk7ZD17dXJsOmEudXJsLGZlYXR1cmVUeXBlOmMsZmVhdHVyZVByZWZpeDpkLHNyc05hbWU6YS5wcm9qZWN0aW9uJiZhLnByb2plY3Rpb24uZ2V0Q29kZSgpfHxhLm1hcCYmYS5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpLmdldENvZGUoKSx2ZXJzaW9uOiIxLjEuMCJ9O3JldHVybiBuZXcgT3BlbkxheWVycy5Qcm90b2NvbC5XRlMoT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYixkKSl9O09wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLkRFRkFVTFRTPXt2ZXJzaW9uOiIxLjAuMCJ9O09wZW5MYXllcnMuUHJveHlIb3N0PSIiO09wZW5MYXllcnMuUmVxdWVzdHx8KE9wZW5MYXllcnMuUmVxdWVzdD17fSk7Ck9wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5SZXF1ZXN0LHtERUZBVUxUX0NPTkZJRzp7bWV0aG9kOiJHRVQiLHVybDp3aW5kb3cubG9jYXRpb24uaHJlZixhc3luYzohMCx1c2VyOnZvaWQgMCxwYXNzd29yZDp2b2lkIDAscGFyYW1zOm51bGwscHJveHk6T3BlbkxheWVycy5Qcm94eUhvc3QsaGVhZGVyczp7fSxkYXRhOm51bGwsY2FsbGJhY2s6ZnVuY3Rpb24oKXt9LHN1Y2Nlc3M6bnVsbCxmYWlsdXJlOm51bGwsc2NvcGU6bnVsbH0sVVJMX1NQTElUX1JFR0VYOi8oW146XSo6KVwvXC8oW146XSo6P1teQF0qQCk/KFteOlwvXD9dKik6PyhbXlwvXD9dKikvLGV2ZW50czpuZXcgT3BlbkxheWVycy5FdmVudHModGhpcyksbWFrZVNhbWVPcmlnaW46ZnVuY3Rpb24oYSxiKXt2YXIgYz0wIT09YS5pbmRleE9mKCJodHRwIiksZD0hYyYmYS5tYXRjaCh0aGlzLlVSTF9TUExJVF9SRUdFWCk7aWYoZCl7dmFyIGU9d2luZG93LmxvY2F0aW9uLGM9ZFsxXT09ZS5wcm90b2NvbCYmZFszXT09CmUuaG9zdG5hbWUsZD1kWzRdLGU9ZS5wb3J0O2lmKDgwIT1kJiYiIiE9ZHx8IjgwIiE9ZSYmIiIhPWUpYz1jJiZkPT1lfWN8fGImJihhPSJmdW5jdGlvbiI9PXR5cGVvZiBiP2IoYSk6YitlbmNvZGVVUklDb21wb25lbnQoYSkpO3JldHVybiBhfSxpc3N1ZTpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMuREVGQVVMVF9DT05GSUcse3Byb3h5Ok9wZW5MYXllcnMuUHJveHlIb3N0fSk7YT1hfHx7fTthLmhlYWRlcnM9YS5oZWFkZXJzfHx7fTthPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsYik7YS5oZWFkZXJzPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEuaGVhZGVycyxiLmhlYWRlcnMpO3ZhciBiPSExLGM7Zm9yKGMgaW4gYS5oZWFkZXJzKWEuaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShjKSYmIngtcmVxdWVzdGVkLXdpdGgiPT09Yy50b0xvd2VyQ2FzZSgpJiYoYj0hMCk7ITE9PT1iJiYoYS5oZWFkZXJzWyJYLVJlcXVlc3RlZC1XaXRoIl09CiJYTUxIdHRwUmVxdWVzdCIpO3ZhciBkPW5ldyBPcGVuTGF5ZXJzLlJlcXVlc3QuWE1MSHR0cFJlcXVlc3QsZT1PcGVuTGF5ZXJzLlV0aWwudXJsQXBwZW5kKGEudXJsLE9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoYS5wYXJhbXN8fHt9KSksZT1PcGVuTGF5ZXJzLlJlcXVlc3QubWFrZVNhbWVPcmlnaW4oZSxhLnByb3h5KTtkLm9wZW4oYS5tZXRob2QsZSxhLmFzeW5jLGEudXNlcixhLnBhc3N3b3JkKTtmb3IodmFyIGYgaW4gYS5oZWFkZXJzKWQuc2V0UmVxdWVzdEhlYWRlcihmLGEuaGVhZGVyc1tmXSk7dmFyIGc9dGhpcy5ldmVudHMsaD10aGlzO2Qub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ZC5yZWFkeVN0YXRlPT1PcGVuTGF5ZXJzLlJlcXVlc3QuWE1MSHR0cFJlcXVlc3QuRE9ORSYmITEhPT1nLnRyaWdnZXJFdmVudCgiY29tcGxldGUiLHtyZXF1ZXN0OmQsY29uZmlnOmEscmVxdWVzdFVybDplfSkmJmgucnVuQ2FsbGJhY2tzKHtyZXF1ZXN0OmQsY29uZmlnOmEsCnJlcXVlc3RVcmw6ZX0pfTshMT09PWEuYXN5bmM/ZC5zZW5kKGEuZGF0YSk6d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXswIT09ZC5yZWFkeVN0YXRlJiZkLnNlbmQoYS5kYXRhKX0sMCk7cmV0dXJuIGR9LHJ1bkNhbGxiYWNrczpmdW5jdGlvbihhKXt2YXIgYj1hLnJlcXVlc3QsYz1hLmNvbmZpZyxkPWMuc2NvcGU/T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGMuY2FsbGJhY2ssYy5zY29wZSk6Yy5jYWxsYmFjayxlO2Muc3VjY2VzcyYmKGU9Yy5zY29wZT9PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoYy5zdWNjZXNzLGMuc2NvcGUpOmMuc3VjY2Vzcyk7dmFyIGY7Yy5mYWlsdXJlJiYoZj1jLnNjb3BlP09wZW5MYXllcnMuRnVuY3Rpb24uYmluZChjLmZhaWx1cmUsYy5zY29wZSk6Yy5mYWlsdXJlKTsiZmlsZToiPT1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVXJsT2JqZWN0KGMudXJsKS5wcm90b2NvbCYmYi5yZXNwb25zZVRleHQmJihiLnN0YXR1cz0yMDApO2QoYik7aWYoIWIuc3RhdHVzfHwKMjAwPD1iLnN0YXR1cyYmMzAwPmIuc3RhdHVzKXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgic3VjY2VzcyIsYSksZSYmZShiKTtiLnN0YXR1cyYmKDIwMD5iLnN0YXR1c3x8MzAwPD1iLnN0YXR1cykmJih0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImZhaWx1cmUiLGEpLGYmJmYoYikpfSxHRVQ6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEse21ldGhvZDoiR0VUIn0pO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9LFBPU1Q6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEse21ldGhvZDoiUE9TVCJ9KTthLmhlYWRlcnM9YS5oZWFkZXJzP2EuaGVhZGVyczp7fTsiQ09OVEVOVC1UWVBFImluIE9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYS5oZWFkZXJzKXx8KGEuaGVhZGVyc1siQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL3htbCIpO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9LFBVVDpmdW5jdGlvbihhKXthPQpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEse21ldGhvZDoiUFVUIn0pO2EuaGVhZGVycz1hLmhlYWRlcnM/YS5oZWFkZXJzOnt9OyJDT05URU5ULVRZUEUiaW4gT3BlbkxheWVycy5VdGlsLnVwcGVyQ2FzZU9iamVjdChhLmhlYWRlcnMpfHwoYS5oZWFkZXJzWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24veG1sIik7cmV0dXJuIE9wZW5MYXllcnMuUmVxdWVzdC5pc3N1ZShhKX0sREVMRVRFOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IkRFTEVURSJ9KTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfSxIRUFEOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IkhFQUQifSk7cmV0dXJuIE9wZW5MYXllcnMuUmVxdWVzdC5pc3N1ZShhKX0sT1BUSU9OUzpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYSx7bWV0aG9kOiJPUFRJT05TIn0pO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9fSk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RoaXMuX29iamVjdD1mJiYhaz9uZXcgZjpuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7dGhpcy5fbGlzdGVuZXJzPVtdfWZ1bmN0aW9uIGIoKXtyZXR1cm4gbmV3IGF9ZnVuY3Rpb24gYyhhKXtiLm9ucmVhZHlzdGF0ZWNoYW5nZSYmYi5vbnJlYWR5c3RhdGVjaGFuZ2UuYXBwbHkoYSk7YS5kaXNwYXRjaEV2ZW50KHt0eXBlOiJyZWFkeXN0YXRlY2hhbmdlIixidWJibGVzOiExLGNhbmNlbGFibGU6ITEsdGltZVN0YW1wOm5ldyBEYXRlKzB9KX1mdW5jdGlvbiBkKGEpe3RyeXthLnJlc3BvbnNlVGV4dD1hLl9vYmplY3QucmVzcG9uc2VUZXh0fWNhdGNoKGIpe310cnl7dmFyIGM7dmFyIGQ9YS5fb2JqZWN0LGU9ZC5yZXNwb25zZVhNTCxmPWQucmVzcG9uc2VUZXh0O2gmJihmJiZlJiYhZS5kb2N1bWVudEVsZW1lbnQmJmQuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpLm1hdGNoKC9bXlwvXStcL1teXCtdK1wreG1sLykpJiYKKGU9bmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIiksZS5hc3luYz0hMSxlLnZhbGlkYXRlT25QYXJzZT0hMSxlLmxvYWRYTUwoZikpO2M9ZSYmKGgmJjAhPWUucGFyc2VFcnJvcnx8IWUuZG9jdW1lbnRFbGVtZW50fHxlLmRvY3VtZW50RWxlbWVudCYmInBhcnNlcmVycm9yIj09ZS5kb2N1bWVudEVsZW1lbnQudGFnTmFtZSk/bnVsbDplO2EucmVzcG9uc2VYTUw9Y31jYXRjaChnKXt9dHJ5e2Euc3RhdHVzPWEuX29iamVjdC5zdGF0dXN9Y2F0Y2goayl7fXRyeXthLnN0YXR1c1RleHQ9YS5fb2JqZWN0LnN0YXR1c1RleHR9Y2F0Y2godSl7fX1mdW5jdGlvbiBlKGEpe2EuX29iamVjdC5vbnJlYWR5c3RhdGVjaGFuZ2U9bmV3IHdpbmRvdy5GdW5jdGlvbn12YXIgZj13aW5kb3cuWE1MSHR0cFJlcXVlc3QsZz0hIXdpbmRvdy5jb250cm9sbGVycyxoPXdpbmRvdy5kb2N1bWVudC5hbGwmJiF3aW5kb3cub3BlcmEsaz1oJiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvTVNJRSA3LjAvKTsKYi5wcm90b3R5cGU9YS5wcm90b3R5cGU7ZyYmZi53cmFwcGVkJiYoYi53cmFwcGVkPWYud3JhcHBlZCk7Yi5VTlNFTlQ9MDtiLk9QRU5FRD0xO2IuSEVBREVSU19SRUNFSVZFRD0yO2IuTE9BRElORz0zO2IuRE9ORT00O2IucHJvdG90eXBlLnJlYWR5U3RhdGU9Yi5VTlNFTlQ7Yi5wcm90b3R5cGUucmVzcG9uc2VUZXh0PSIiO2IucHJvdG90eXBlLnJlc3BvbnNlWE1MPW51bGw7Yi5wcm90b3R5cGUuc3RhdHVzPTA7Yi5wcm90b3R5cGUuc3RhdHVzVGV4dD0iIjtiLnByb3RvdHlwZS5wcmlvcml0eT0iTk9STUFMIjtiLnByb3RvdHlwZS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtiLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO2Iub25vcGVuPW51bGw7Yi5vbnNlbmQ9bnVsbDtiLm9uYWJvcnQ9bnVsbDtiLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGEsZixrLG4scSl7ZGVsZXRlIHRoaXMuX2hlYWRlcnM7Mz5hcmd1bWVudHMubGVuZ3RoJiYoaz0hMCk7dGhpcy5fYXN5bmM9azt2YXIgcj10aGlzLApzPXRoaXMucmVhZHlTdGF0ZSx0O2gmJmsmJih0PWZ1bmN0aW9uKCl7cyE9Yi5ET05FJiYoZShyKSxyLmFib3J0KCkpfSx3aW5kb3cuYXR0YWNoRXZlbnQoIm9udW5sb2FkIix0KSk7Yi5vbm9wZW4mJmIub25vcGVuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTs0PGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5fb2JqZWN0Lm9wZW4oYSxmLGssbixxKTozPGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5fb2JqZWN0Lm9wZW4oYSxmLGssbik6dGhpcy5fb2JqZWN0Lm9wZW4oYSxmLGspO3RoaXMucmVhZHlTdGF0ZT1iLk9QRU5FRDtjKHRoaXMpO3RoaXMuX29iamVjdC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZighZ3x8aylyLnJlYWR5U3RhdGU9ci5fb2JqZWN0LnJlYWR5U3RhdGUsZChyKSxyLl9hYm9ydGVkP3IucmVhZHlTdGF0ZT1iLlVOU0VOVDooci5yZWFkeVN0YXRlPT1iLkRPTkUmJihkZWxldGUgci5fZGF0YSxlKHIpLGgmJmsmJndpbmRvdy5kZXRhY2hFdmVudCgib251bmxvYWQiLHQpKSwKcyE9ci5yZWFkeVN0YXRlJiZjKHIpLHM9ci5yZWFkeVN0YXRlKX19O2IucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oYSl7Yi5vbnNlbmQmJmIub25zZW5kLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthcmd1bWVudHMubGVuZ3RofHwoYT1udWxsKTthJiZhLm5vZGVUeXBlJiYoYT13aW5kb3cuWE1MU2VyaWFsaXplcj8obmV3IHdpbmRvdy5YTUxTZXJpYWxpemVyKS5zZXJpYWxpemVUb1N0cmluZyhhKTphLnhtbCx0aGlzLl9oZWFkZXJzWyJDb250ZW50LVR5cGUiXXx8dGhpcy5fb2JqZWN0LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsImFwcGxpY2F0aW9uL3htbCIpKTt0aGlzLl9kYXRhPWE7YTppZih0aGlzLl9vYmplY3Quc2VuZCh0aGlzLl9kYXRhKSxnJiYhdGhpcy5fYXN5bmMpZm9yKHRoaXMucmVhZHlTdGF0ZT1iLk9QRU5FRCxkKHRoaXMpO3RoaXMucmVhZHlTdGF0ZTxiLkRPTkU7KWlmKHRoaXMucmVhZHlTdGF0ZSsrLGModGhpcyksdGhpcy5fYWJvcnRlZClicmVhayBhfTsKYi5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24oKXtiLm9uYWJvcnQmJmIub25hYm9ydC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5yZWFkeVN0YXRlPmIuVU5TRU5UJiYodGhpcy5fYWJvcnRlZD0hMCk7dGhpcy5fb2JqZWN0LmFib3J0KCk7ZSh0aGlzKTt0aGlzLnJlYWR5U3RhdGU9Yi5VTlNFTlQ7ZGVsZXRlIHRoaXMuX2RhdGF9O2IucHJvdG90eXBlLmdldEFsbFJlc3BvbnNlSGVhZGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYmplY3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl9O2IucHJvdG90eXBlLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9vYmplY3QuZ2V0UmVzcG9uc2VIZWFkZXIoYSl9O2IucHJvdG90eXBlLnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLl9oZWFkZXJzfHwodGhpcy5faGVhZGVycz17fSk7dGhpcy5faGVhZGVyc1thXT1iO3JldHVybiB0aGlzLl9vYmplY3Quc2V0UmVxdWVzdEhlYWRlcihhLGIpfTsKYi5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTAsZTtlPXRoaXMuX2xpc3RlbmVyc1tkXTtkKyspaWYoZVswXT09YSYmZVsxXT09YiYmZVsyXT09YylyZXR1cm47dGhpcy5fbGlzdGVuZXJzLnB1c2goW2EsYixjXSl9O2IucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wLGU7KGU9dGhpcy5fbGlzdGVuZXJzW2RdKSYmKGVbMF0hPWF8fGVbMV0hPWJ8fGVbMl0hPWMpO2QrKyk7ZSYmdGhpcy5fbGlzdGVuZXJzLnNwbGljZShkLDEpfTtiLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGEpe2E9e3R5cGU6YS50eXBlLHRhcmdldDp0aGlzLGN1cnJlbnRUYXJnZXQ6dGhpcyxldmVudFBoYXNlOjIsYnViYmxlczphLmJ1YmJsZXMsY2FuY2VsYWJsZTphLmNhbmNlbGFibGUsdGltZVN0YW1wOmEudGltZVN0YW1wLHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe30scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt9LAppbml0RXZlbnQ6ZnVuY3Rpb24oKXt9fTsicmVhZHlzdGF0ZWNoYW5nZSI9PWEudHlwZSYmdGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UmJih0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZS5oYW5kbGVFdmVudHx8dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UpLmFwcGx5KHRoaXMsW2FdKTtmb3IodmFyIGI9MCxjO2M9dGhpcy5fbGlzdGVuZXJzW2JdO2IrKyljWzBdIT1hLnR5cGV8fGNbMl18fChjWzFdLmhhbmRsZUV2ZW50fHxjWzFdKS5hcHBseSh0aGlzLFthXSl9O2IucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgWE1MSHR0cFJlcXVlc3RdIn07Yi50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbWE1MSHR0cFJlcXVlc3RdIn07d2luZG93LkZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseXx8KHdpbmRvdy5GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24oYSxiKXtifHwoYj1bXSk7YS5fX2Z1bmM9dGhpczthLl9fZnVuYyhiWzBdLGJbMV0sYlsyXSxiWzNdLApiWzRdKTtkZWxldGUgYS5fX2Z1bmN9KTtPcGVuTGF5ZXJzLlJlcXVlc3R8fChPcGVuTGF5ZXJzLlJlcXVlc3Q9e30pO09wZW5MYXllcnMuUmVxdWVzdC5YTUxIdHRwUmVxdWVzdD1ifSkoKTtPcGVuTGF5ZXJzLkZvcm1hdC5LTUw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e2ttbDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9rbWwvMi4yIixneDoiaHR0cDovL3d3dy5nb29nbGUuY29tL2ttbC9leHQvMi4yIn0sa21sbnM6Imh0dHA6Ly9lYXJ0aC5nb29nbGUuY29tL2ttbC8yLjAiLHBsYWNlbWFya3NEZXNjOiJObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUiLGZvbGRlcnNOYW1lOiJPcGVuTGF5ZXJzIGV4cG9ydCIsZm9sZGVyc0Rlc2M6IkV4cG9ydGVkIG9uICIrbmV3IERhdGUsZXh0cmFjdEF0dHJpYnV0ZXM6ITAsa3ZwQXR0cmlidXRlczohMSxleHRyYWN0U3R5bGVzOiExLGV4dHJhY3RUcmFja3M6ITEsdHJhY2tBdHRyaWJ1dGVzOm51bGwsaW50ZXJuYWxuczpudWxsLGZlYXR1cmVzOm51bGwsc3R5bGVzOm51bGwsc3R5bGVCYXNlVXJsOiIiLGZldGNoZWQ6bnVsbCxtYXhEZXB0aDowLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5yZWdFeGVzPQp7dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZyxrbWxDb2xvcjovKFx3ezJ9KShcd3syfSkoXHd7Mn0pKFx3ezJ9KS8sa21sSWNvblBhbGV0dGU6L3Jvb3Q6XC9cL2ljb25zXC9wYWxldHRlLShcZCspKFwuXHcrKS8sc3RyYWlnaHRCcmFja2V0Oi9cJFxbKC4qPylcXS9nfTt0aGlzLmV4dGVybmFsUHJvamVjdGlvbj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjQzMjYiKTtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkOmZ1bmN0aW9uKGEpe3RoaXMuZmVhdHVyZXM9W107dGhpcy5zdHlsZXM9e307dGhpcy5mZXRjaGVkPXt9O3JldHVybiB0aGlzLnBhcnNlRGF0YShhLHtkZXB0aDowLHN0eWxlQmFzZVVybDp0aGlzLnN0eWxlQmFzZVVybH0pfSxwYXJzZURhdGE6ZnVuY3Rpb24oYSxiKXsic3RyaW5nIj09dHlwZW9mIGEmJgooYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTtmb3IodmFyIGM9WyJMaW5rIiwiTmV0d29ya0xpbmsiLCJTdHlsZSIsIlN0eWxlTWFwIiwiUGxhY2VtYXJrIl0sZD0wLGU9Yy5sZW5ndGg7ZDxlOysrZCl7dmFyIGY9Y1tkXSxnPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLCIqIixmKTtpZigwIT1nLmxlbmd0aClzd2l0Y2goZi50b0xvd2VyQ2FzZSgpKXtjYXNlICJsaW5rIjpjYXNlICJuZXR3b3JrbGluayI6dGhpcy5wYXJzZUxpbmtzKGcsYik7YnJlYWs7Y2FzZSAic3R5bGUiOnRoaXMuZXh0cmFjdFN0eWxlcyYmdGhpcy5wYXJzZVN0eWxlcyhnLGIpO2JyZWFrO2Nhc2UgInN0eWxlbWFwIjp0aGlzLmV4dHJhY3RTdHlsZXMmJnRoaXMucGFyc2VTdHlsZU1hcHMoZyxiKTticmVhaztjYXNlICJwbGFjZW1hcmsiOnRoaXMucGFyc2VGZWF0dXJlcyhnLGIpfX1yZXR1cm4gdGhpcy5mZWF0dXJlc30scGFyc2VMaW5rczpmdW5jdGlvbihhLApiKXtpZihiLmRlcHRoPj10aGlzLm1heERlcHRoKXJldHVybiExO3ZhciBjPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYik7Yy5kZXB0aCsrO2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9dGhpcy5wYXJzZVByb3BlcnR5KGFbZF0sIioiLCJocmVmIik7ZiYmIXRoaXMuZmV0Y2hlZFtmXSYmKHRoaXMuZmV0Y2hlZFtmXT0hMCwoZj10aGlzLmZldGNoTGluayhmKSkmJnRoaXMucGFyc2VEYXRhKGYsYykpfX0sZmV0Y2hMaW5rOmZ1bmN0aW9uKGEpe2lmKGE9T3BlbkxheWVycy5SZXF1ZXN0LkdFVCh7dXJsOmEsYXN5bmM6ITF9KSlyZXR1cm4gYS5yZXNwb25zZVRleHR9LHBhcnNlU3R5bGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLnBhcnNlU3R5bGUoYVtjXSk7ZSYmKHRoaXMuc3R5bGVzWyhiLnN0eWxlQmFzZVVybHx8IiIpKyIjIitlLmlkXT1lKX19LHBhcnNlS21sQ29sb3I6ZnVuY3Rpb24oYSl7dmFyIGI9Cm51bGw7YSYmKGE9YS5tYXRjaCh0aGlzLnJlZ0V4ZXMua21sQ29sb3IpKSYmKGI9e2NvbG9yOiIjIithWzRdK2FbM10rYVsyXSxvcGFjaXR5OnBhcnNlSW50KGFbMV0sMTYpLzI1NX0pO3JldHVybiBifSxwYXJzZVN0eWxlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj17fSxjPVsiTGluZVN0eWxlIiwiUG9seVN0eWxlIiwiSWNvblN0eWxlIiwiQmFsbG9vblN0eWxlIiwiTGFiZWxTdHlsZSJdLGQsZSxmPTAsZz1jLmxlbmd0aDtmPGc7KytmKWlmKGQ9Y1tmXSxlPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLCIqIixkKVswXSlzd2l0Y2goZC50b0xvd2VyQ2FzZSgpKXtjYXNlICJsaW5lc3R5bGUiOmQ9dGhpcy5wYXJzZVByb3BlcnR5KGUsIioiLCJjb2xvciIpO2lmKGQ9dGhpcy5wYXJzZUttbENvbG9yKGQpKWIuc3Ryb2tlQ29sb3I9ZC5jb2xvcixiLnN0cm9rZU9wYWNpdHk9ZC5vcGFjaXR5OyhkPXRoaXMucGFyc2VQcm9wZXJ0eShlLCIqIiwid2lkdGgiKSkmJihiLnN0cm9rZVdpZHRoPQpkKTticmVhaztjYXNlICJwb2x5c3R5bGUiOmQ9dGhpcy5wYXJzZVByb3BlcnR5KGUsIioiLCJjb2xvciIpO2lmKGQ9dGhpcy5wYXJzZUttbENvbG9yKGQpKWIuZmlsbE9wYWNpdHk9ZC5vcGFjaXR5LGIuZmlsbENvbG9yPWQuY29sb3I7IjAiPT10aGlzLnBhcnNlUHJvcGVydHkoZSwiKiIsImZpbGwiKSYmKGIuZmlsbENvbG9yPSJub25lIik7IjAiPT10aGlzLnBhcnNlUHJvcGVydHkoZSwiKiIsIm91dGxpbmUiKSYmKGIuc3Ryb2tlV2lkdGg9IjAiKTticmVhaztjYXNlICJpY29uc3R5bGUiOnZhciBoPXBhcnNlRmxvYXQodGhpcy5wYXJzZVByb3BlcnR5KGUsIioiLCJzY2FsZSIpfHwxKTtkPTMyKmg7dmFyIGs9MzIqaCxsPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhlLCIqIiwiSWNvbiIpWzBdO2lmKGwpe3ZhciBtPXRoaXMucGFyc2VQcm9wZXJ0eShsLCIqIiwiaHJlZiIpO2lmKG0pe3ZhciBwPXRoaXMucGFyc2VQcm9wZXJ0eShsLCIqIiwidyIpLG49dGhpcy5wYXJzZVByb3BlcnR5KGwsCiIqIiwiaCIpOyFPcGVuTGF5ZXJzLlN0cmluZy5zdGFydHNXaXRoKG0sImh0dHA6Ly9tYXBzLmdvb2dsZS5jb20vbWFwZmlsZXMva21sIil8fChwfHxuKXx8KG49cD02NCxoLz0yKTtwPXB8fG47bj1ufHxwO3AmJihkPXBhcnNlSW50KHApKmgpO24mJihrPXBhcnNlSW50KG4pKmgpO2lmKG49bS5tYXRjaCh0aGlzLnJlZ0V4ZXMua21sSWNvblBhbGV0dGUpKXA9blsxXSxuPW5bMl0sbT10aGlzLnBhcnNlUHJvcGVydHkobCwiKiIsIngiKSxsPXRoaXMucGFyc2VQcm9wZXJ0eShsLCIqIiwieSIpLG09Imh0dHA6Ly9tYXBzLmdvb2dsZS5jb20vbWFwZmlsZXMva21sL3BhbCIrcCsiL2ljb24iKyg4KihsPzctbC8zMjo3KSsobT9tLzMyOjApKStuO2IuZ3JhcGhpY09wYWNpdHk9MTtiLmV4dGVybmFsR3JhcGhpYz1tfX1pZihlPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhlLCIqIiwiaG90U3BvdCIpWzBdKW09cGFyc2VGbG9hdChlLmdldEF0dHJpYnV0ZSgieCIpKSxsPXBhcnNlRmxvYXQoZS5nZXRBdHRyaWJ1dGUoInkiKSksCnA9ZS5nZXRBdHRyaWJ1dGUoInh1bml0cyIpLCJwaXhlbHMiPT1wP2IuZ3JhcGhpY1hPZmZzZXQ9LW0qaDoiaW5zZXRQaXhlbHMiPT1wP2IuZ3JhcGhpY1hPZmZzZXQ9LWQrbSpoOiJmcmFjdGlvbiI9PXAmJihiLmdyYXBoaWNYT2Zmc2V0PS1kKm0pLGU9ZS5nZXRBdHRyaWJ1dGUoInl1bml0cyIpLCJwaXhlbHMiPT1lP2IuZ3JhcGhpY1lPZmZzZXQ9LWsrbCpoKzE6Imluc2V0UGl4ZWxzIj09ZT9iLmdyYXBoaWNZT2Zmc2V0PS0obCpoKSsxOiJmcmFjdGlvbiI9PWUmJihiLmdyYXBoaWNZT2Zmc2V0PS1rKigxLWwpKzEpO2IuZ3JhcGhpY1dpZHRoPWQ7Yi5ncmFwaGljSGVpZ2h0PWs7YnJlYWs7Y2FzZSAiYmFsbG9vbnN0eWxlIjooZT1PcGVuTGF5ZXJzLlV0aWwuZ2V0WG1sTm9kZVZhbHVlKGUpKSYmKGIuYmFsbG9vblN0eWxlPWUucmVwbGFjZSh0aGlzLnJlZ0V4ZXMuc3RyYWlnaHRCcmFja2V0LCIkeyQxfSIpKTticmVhaztjYXNlICJsYWJlbHN0eWxlIjppZihkPXRoaXMucGFyc2VQcm9wZXJ0eShlLAoiKiIsImNvbG9yIiksZD10aGlzLnBhcnNlS21sQ29sb3IoZCkpYi5mb250Q29sb3I9ZC5jb2xvcixiLmZvbnRPcGFjaXR5PWQub3BhY2l0eX0hYi5zdHJva2VDb2xvciYmYi5maWxsQ29sb3ImJihiLnN0cm9rZUNvbG9yPWIuZmlsbENvbG9yKTsoYT1hLmdldEF0dHJpYnV0ZSgiaWQiKSkmJmImJihiLmlkPWEpO3JldHVybiBifSxwYXJzZVN0eWxlTWFwczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylmb3IodmFyIGU9YVtjXSxmPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhlLCIqIiwiUGFpciIpLGU9ZS5nZXRBdHRyaWJ1dGUoImlkIiksZz0wLGg9Zi5sZW5ndGg7ZzxoO2crKyl7dmFyIGs9ZltnXSxsPXRoaXMucGFyc2VQcm9wZXJ0eShrLCIqIiwia2V5Iik7KGs9dGhpcy5wYXJzZVByb3BlcnR5KGssIioiLCJzdHlsZVVybCIpKSYmIm5vcm1hbCI9PWwmJih0aGlzLnN0eWxlc1soYi5zdHlsZUJhc2VVcmx8fCIiKSsiIyIrZV09dGhpcy5zdHlsZXNbKGIuc3R5bGVCYXNlVXJsfHwKIiIpK2tdKX19LHBhcnNlRmVhdHVyZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W10sZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YVtkXSxnPXRoaXMucGFyc2VGZWF0dXJlLmFwcGx5KHRoaXMsW2ZdKTtpZihnKXt0aGlzLmV4dHJhY3RTdHlsZXMmJihnLmF0dHJpYnV0ZXMmJmcuYXR0cmlidXRlcy5zdHlsZVVybCkmJihnLnN0eWxlPXRoaXMuZ2V0U3R5bGUoZy5hdHRyaWJ1dGVzLnN0eWxlVXJsLGIpKTtpZih0aGlzLmV4dHJhY3RTdHlsZXMpe3ZhciBoPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhmLCIqIiwiU3R5bGUiKVswXTtoJiYoaD10aGlzLnBhcnNlU3R5bGUoaCkpJiYoZy5zdHlsZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGcuc3R5bGUsaCkpfXRoaXMuZXh0cmFjdFRyYWNrcz8oZj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoZix0aGlzLm5hbWVzcGFjZXMuZ3gsIlRyYWNrIikpJiYwPGYubGVuZ3RoJiYoZz17ZmVhdHVyZXM6W10sZmVhdHVyZTpnfSwKdGhpcy5yZWFkTm9kZShmWzBdLGcpLDA8Zy5mZWF0dXJlcy5sZW5ndGgmJmMucHVzaC5hcHBseShjLGcuZmVhdHVyZXMpKTpjLnB1c2goZyl9ZWxzZSB0aHJvdyJCYWQgUGxhY2VtYXJrOiAiK2Q7fXRoaXMuZmVhdHVyZXM9dGhpcy5mZWF0dXJlcy5jb25jYXQoYyl9LHJlYWRlcnM6e2ttbDp7d2hlbjpmdW5jdGlvbihhLGIpe2Iud2hlbnMucHVzaChPcGVuTGF5ZXJzLkRhdGUucGFyc2UodGhpcy5nZXRDaGlsZFZhbHVlKGEpKSl9LF90cmFja1BvaW50QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpO2IuYXR0cmlidXRlc1tjXS5wdXNoKHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9fSxneDp7VHJhY2s6ZnVuY3Rpb24oYSxiKXt2YXIgYz17d2hlbnM6W10scG9pbnRzOltdLGFuZ2xlczpbXX07aWYodGhpcy50cmFja0F0dHJpYnV0ZXMpe3ZhciBkO2MuYXR0cmlidXRlcz17fTtmb3IodmFyIGU9MCxmPXRoaXMudHJhY2tBdHRyaWJ1dGVzLmxlbmd0aDtlPApmOysrZSlkPXRoaXMudHJhY2tBdHRyaWJ1dGVzW2VdLGMuYXR0cmlidXRlc1tkXT1bXSxkIGluIHRoaXMucmVhZGVycy5rbWx8fCh0aGlzLnJlYWRlcnMua21sW2RdPXRoaXMucmVhZGVycy5rbWwuX3RyYWNrUG9pbnRBdHRyaWJ1dGUpfXRoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtpZihjLndoZW5zLmxlbmd0aCE9PWMucG9pbnRzLmxlbmd0aCl0aHJvdyBFcnJvcigiZ3g6VHJhY2sgd2l0aCB1bmVxdWFsIG51bWJlciBvZiB3aGVuICgiK2Mud2hlbnMubGVuZ3RoKyIpIGFuZCBneDpjb29yZCAoIitjLnBvaW50cy5sZW5ndGgrIikgZWxlbWVudHMuIik7dmFyIGc9MDxjLmFuZ2xlcy5sZW5ndGg7aWYoZyYmYy53aGVucy5sZW5ndGghPT1jLmFuZ2xlcy5sZW5ndGgpdGhyb3cgRXJyb3IoImd4OlRyYWNrIHdpdGggdW5lcXVhbCBudW1iZXIgb2Ygd2hlbiAoIitjLndoZW5zLmxlbmd0aCsiKSBhbmQgZ3g6YW5nbGVzICgiK2MuYW5nbGVzLmxlbmd0aCsiKSBlbGVtZW50cy4iKTtmb3IodmFyIGgsCmU9MCxmPWMud2hlbnMubGVuZ3RoO2U8ZjsrK2Upe2g9Yi5mZWF0dXJlLmNsb25lKCk7aC5maWQ9Yi5mZWF0dXJlLmZpZHx8Yi5mZWF0dXJlLmlkO2Q9Yy5wb2ludHNbZV07aC5nZW9tZXRyeT1kOyJ6ImluIGQmJihoLmF0dHJpYnV0ZXMuYWx0aXR1ZGU9ZC56KTt0aGlzLmludGVybmFsUHJvamVjdGlvbiYmdGhpcy5leHRlcm5hbFByb2plY3Rpb24mJmguZ2VvbWV0cnkudHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKTtpZih0aGlzLnRyYWNrQXR0cmlidXRlcylmb3IodmFyIGs9MCxsPXRoaXMudHJhY2tBdHRyaWJ1dGVzLmxlbmd0aDtrPGw7KytrKWQ9dGhpcy50cmFja0F0dHJpYnV0ZXNba10saC5hdHRyaWJ1dGVzW2RdPWMuYXR0cmlidXRlc1tkXVtlXTtoLmF0dHJpYnV0ZXMud2hlbj1jLndoZW5zW2VdO2guYXR0cmlidXRlcy50cmFja0lkPWIuZmVhdHVyZS5pZDtnJiYoZD1jLmFuZ2xlc1tlXSxoLmF0dHJpYnV0ZXMuaGVhZGluZz0KcGFyc2VGbG9hdChkWzBdKSxoLmF0dHJpYnV0ZXMudGlsdD1wYXJzZUZsb2F0KGRbMV0pLGguYXR0cmlidXRlcy5yb2xsPXBhcnNlRmxvYXQoZFsyXSkpO2IuZmVhdHVyZXMucHVzaChoKX19LGNvb3JkOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIikuc3BsaXQoL1xzKy8pLGQ9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1swXSxjWzFdKTsyPGMubGVuZ3RoJiYoZC56PXBhcnNlRmxvYXQoY1syXSkpO2IucG9pbnRzLnB1c2goZCl9LGFuZ2xlczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLnNwbGl0KC9ccysvKTtiLmFuZ2xlcy5wdXNoKGMpfX19LHBhcnNlRmVhdHVyZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9WyJNdWx0aUdlb21ldHJ5IiwiUG9seWdvbiIsIkxpbmVTdHJpbmciLCJQb2ludCJdLApjLGQsZSxmPTAsZz1iLmxlbmd0aDtmPGc7KytmKWlmKGM9YltmXSx0aGlzLmludGVybmFsbnM9YS5uYW1lc3BhY2VVUkk/YS5uYW1lc3BhY2VVUkk6dGhpcy5rbWxucyxkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuaW50ZXJuYWxucyxjKSwwPGQubGVuZ3RoKXtpZihiPXRoaXMucGFyc2VHZW9tZXRyeVtjLnRvTG93ZXJDYXNlKCldKWU9Yi5hcHBseSh0aGlzLFtkWzBdXSksdGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiZlLnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7ZWxzZSB0aHJvdyBuZXcgVHlwZUVycm9yKCJVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAiK2MpO2JyZWFrfXZhciBoO3RoaXMuZXh0cmFjdEF0dHJpYnV0ZXMmJihoPXRoaXMucGFyc2VBdHRyaWJ1dGVzKGEpKTtjPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGUsaCk7YT1hLmdldEF0dHJpYnV0ZSgiaWQiKXx8CmEuZ2V0QXR0cmlidXRlKCJuYW1lIik7bnVsbCE9YSYmKGMuZmlkPWEpO3JldHVybiBjfSxnZXRTdHlsZTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5yZW1vdmVUYWlsKGEpLGQ9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxiKTtkLmRlcHRoKys7ZC5zdHlsZUJhc2VVcmw9YzshdGhpcy5zdHlsZXNbYV0mJiFPcGVuTGF5ZXJzLlN0cmluZy5zdGFydHNXaXRoKGEsIiMiKSYmZC5kZXB0aDw9dGhpcy5tYXhEZXB0aCYmIXRoaXMuZmV0Y2hlZFtjXSYmKGM9dGhpcy5mZXRjaExpbmsoYykpJiZ0aGlzLnBhcnNlRGF0YShjLGQpO3JldHVybiBPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuc3R5bGVzW2FdKX0scGFyc2VHZW9tZXRyeTp7cG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5pbnRlcm5hbG5zLCJjb29yZGluYXRlcyIpO2E9W107aWYoMDxiLmxlbmd0aCl7dmFyIGM9YlswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSwKYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnJlbW92ZVNwYWNlLCIiKTthPWMuc3BsaXQoIiwiKX1iPW51bGw7aWYoMTxhLmxlbmd0aCkyPT1hLmxlbmd0aCYmKGFbMl09bnVsbCksYj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzBdLGFbMV0sYVsyXSk7ZWxzZSB0aHJvdyJCYWQgY29vcmRpbmF0ZSBzdHJpbmc6ICIrYztyZXR1cm4gYn0sbGluZXN0cmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuaW50ZXJuYWxucywiY29vcmRpbmF0ZXMiKSxkPW51bGw7aWYoMDxjLmxlbmd0aCl7Zm9yKHZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShjWzBdKSxjPWMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxjPWMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbUNvbW1hLCIsIiksZD1jLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSxlPWQubGVuZ3RoLGY9QXJyYXkoZSksZyxoLGs9MDtrPGU7KytrKWlmKGc9CmRba10uc3BsaXQoIiwiKSxoPWcubGVuZ3RoLDE8aCkyPT1nLmxlbmd0aCYmKGdbMl09bnVsbCksZltrXT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChnWzBdLGdbMV0sZ1syXSk7ZWxzZSB0aHJvdyJCYWQgTGluZVN0cmluZyBwb2ludCBjb29yZGluYXRlczogIitkW2tdO2lmKGUpZD1iP25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcoZik6bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhmKTtlbHNlIHRocm93IkJhZCBMaW5lU3RyaW5nIGNvb3JkaW5hdGVzOiAiK2M7fXJldHVybiBkfSxwb2x5Z29uOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5pbnRlcm5hbG5zLCJMaW5lYXJSaW5nIik7dmFyIGI9YS5sZW5ndGgsYz1BcnJheShiKTtpZigwPGIpZm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7KytkKWlmKGI9dGhpcy5wYXJzZUdlb21ldHJ5LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYVtkXSwhMF0pKWNbZF09CmI7ZWxzZSB0aHJvdyJCYWQgTGluZWFyUmluZyBnZW9tZXRyeTogIitkO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKGMpfSxtdWx0aWdlb21ldHJ5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPVtdLGQ9YS5jaGlsZE5vZGVzLGU9MCxmPWQubGVuZ3RoO2U8ZjsrK2UpYT1kW2VdLDE9PWEubm9kZVR5cGUmJihiPWEucHJlZml4P2Eubm9kZU5hbWUuc3BsaXQoIjoiKVsxXTphLm5vZGVOYW1lLChiPXRoaXMucGFyc2VHZW9tZXRyeVtiLnRvTG93ZXJDYXNlKCldKSYmYy5wdXNoKGIuYXBwbHkodGhpcyxbYV0pKSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24oYyl9fSxwYXJzZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9e30sYz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJFeHRlbmRlZERhdGEiKTtjLmxlbmd0aCYmKGI9dGhpcy5wYXJzZUV4dGVuZGVkRGF0YShjWzBdKSk7dmFyIGQsZSxmO2E9YS5jaGlsZE5vZGVzO2Zvcih2YXIgYz0KMCxnPWEubGVuZ3RoO2M8ZzsrK2MpaWYoZD1hW2NdLDE9PWQubm9kZVR5cGUmJihlPWQuY2hpbGROb2RlcywxPD1lLmxlbmd0aCYmMz49ZS5sZW5ndGgpKXtzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgMTpmPWVbMF07YnJlYWs7Y2FzZSAyOmY9ZVswXTtlPWVbMV07Zj0zPT1mLm5vZGVUeXBlfHw0PT1mLm5vZGVUeXBlP2Y6ZTticmVhaztkZWZhdWx0OmY9ZVsxXX1pZigzPT1mLm5vZGVUeXBlfHw0PT1mLm5vZGVUeXBlKWlmKGQ9ZC5wcmVmaXg/ZC5ub2RlTmFtZS5zcGxpdCgiOiIpWzFdOmQubm9kZU5hbWUsZj1PcGVuTGF5ZXJzLlV0aWwuZ2V0WG1sTm9kZVZhbHVlKGYpKWY9Zi5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLGJbZF09Zn1yZXR1cm4gYn0scGFyc2VFeHRlbmRlZERhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9e30sYyxkLGUsZixnPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkRhdGEiKTtjPTA7Zm9yKGQ9Zy5sZW5ndGg7YzxkO2MrKyl7ZT1nW2NdO2Y9ZS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTsKdmFyIGg9e30saz1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ2YWx1ZSIpO2subGVuZ3RoJiYoaC52YWx1ZT10aGlzLmdldENoaWxkVmFsdWUoa1swXSkpO3RoaXMua3ZwQXR0cmlidXRlcz9iW2ZdPWgudmFsdWU6KGU9ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZGlzcGxheU5hbWUiKSxlLmxlbmd0aCYmKGguZGlzcGxheU5hbWU9dGhpcy5nZXRDaGlsZFZhbHVlKGVbMF0pKSxiW2ZdPWgpfWE9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiU2ltcGxlRGF0YSIpO2M9MDtmb3IoZD1hLmxlbmd0aDtjPGQ7YysrKWg9e30sZT1hW2NdLGY9ZS5nZXRBdHRyaWJ1dGUoIm5hbWUiKSxoLnZhbHVlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShlKSx0aGlzLmt2cEF0dHJpYnV0ZXM/YltmXT1oLnZhbHVlOihoLmRpc3BsYXlOYW1lPWYsYltmXT1oKTtyZXR1cm4gYn0scGFyc2VQcm9wZXJ0eTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7YT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSxiLGMpO3RyeXtkPU9wZW5MYXllcnMuVXRpbC5nZXRYbWxOb2RlVmFsdWUoYVswXSl9Y2F0Y2goZSl7ZD0KbnVsbH1yZXR1cm4gZH0sd3JpdGU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsImttbCIpLGM9dGhpcy5jcmVhdGVGb2xkZXJYTUwoKSxkPTAsZT1hLmxlbmd0aDtkPGU7KytkKWMuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVQbGFjZW1hcmtYTUwoYVtkXSkpO2IuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbYl0pfSxjcmVhdGVGb2xkZXJYTUw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJGb2xkZXIiKTtpZih0aGlzLmZvbGRlcnNOYW1lKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJuYW1lIiksYz10aGlzLmNyZWF0ZVRleHROb2RlKHRoaXMuZm9sZGVyc05hbWUpO2IuYXBwZW5kQ2hpbGQoYyk7YS5hcHBlbmRDaGlsZChiKX10aGlzLmZvbGRlcnNEZXNjJiYKKGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiZGVzY3JpcHRpb24iKSxjPXRoaXMuY3JlYXRlVGV4dE5vZGUodGhpcy5mb2xkZXJzRGVzYyksYi5hcHBlbmRDaGlsZChjKSxhLmFwcGVuZENoaWxkKGIpKTtyZXR1cm4gYX0sY3JlYXRlUGxhY2VtYXJrWE1MOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIm5hbWUiKSxjPWEuc3R5bGUmJmEuc3R5bGUubGFiZWw/YS5zdHlsZS5sYWJlbDphLmlkO2IuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXMubmFtZXx8YykpO3ZhciBkPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsImRlc2NyaXB0aW9uIik7ZC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGEuYXR0cmlidXRlcy5kZXNjcmlwdGlvbnx8dGhpcy5wbGFjZW1hcmtzRGVzYykpO2M9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiUGxhY2VtYXJrIik7bnVsbCE9CmEuZmlkJiZjLnNldEF0dHJpYnV0ZSgiaWQiLGEuZmlkKTtjLmFwcGVuZENoaWxkKGIpO2MuYXBwZW5kQ2hpbGQoZCk7Yj10aGlzLmJ1aWxkR2VvbWV0cnlOb2RlKGEuZ2VvbWV0cnkpO2MuYXBwZW5kQ2hpbGQoYik7YS5hdHRyaWJ1dGVzJiYoYT10aGlzLmJ1aWxkRXh0ZW5kZWREYXRhKGEuYXR0cmlidXRlcykpJiZjLmFwcGVuZENoaWxkKGEpO3JldHVybiBjfSxidWlsZEdlb21ldHJ5Tm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLkNMQVNTX05BTUUsYj1iLnN1YnN0cmluZyhiLmxhc3RJbmRleE9mKCIuIikrMSksYj10aGlzLmJ1aWxkR2VvbWV0cnlbYi50b0xvd2VyQ2FzZSgpXSxjPW51bGw7YiYmKGM9Yi5hcHBseSh0aGlzLFthXSkpO3JldHVybiBjfSxidWlsZEdlb21ldHJ5Ontwb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJQb2ludCIpO2IuYXBwZW5kQ2hpbGQodGhpcy5idWlsZENvb3JkaW5hdGVzTm9kZShhKSk7cmV0dXJuIGJ9LAptdWx0aXBvaW50OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmJ1aWxkR2VvbWV0cnkuY29sbGVjdGlvbi5hcHBseSh0aGlzLFthXSl9LGxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiTGluZVN0cmluZyIpO2IuYXBwZW5kQ2hpbGQodGhpcy5idWlsZENvb3JkaW5hdGVzTm9kZShhKSk7cmV0dXJuIGJ9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5idWlsZEdlb21ldHJ5LmNvbGxlY3Rpb24uYXBwbHkodGhpcyxbYV0pfSxsaW5lYXJyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIkxpbmVhclJpbmciKTtiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRDb29yZGluYXRlc05vZGUoYSkpO3JldHVybiBifSxwb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIlBvbHlnb24iKTthPWEuY29tcG9uZW50czsKZm9yKHZhciBjLGQsZT0wLGY9YS5sZW5ndGg7ZTxmOysrZSljPTA9PWU/Im91dGVyQm91bmRhcnlJcyI6ImlubmVyQm91bmRhcnlJcyIsYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLGMpLGQ9dGhpcy5idWlsZEdlb21ldHJ5LmxpbmVhcnJpbmcuYXBwbHkodGhpcyxbYVtlXV0pLGMuYXBwZW5kQ2hpbGQoZCksYi5hcHBlbmRDaGlsZChjKTtyZXR1cm4gYn0sbXVsdGlwb2x5Z29uOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmJ1aWxkR2VvbWV0cnkuY29sbGVjdGlvbi5hcHBseSh0aGlzLFthXSl9LGNvbGxlY3Rpb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIk11bHRpR2VvbWV0cnkiKSxjLGQ9MCxlPWEuY29tcG9uZW50cy5sZW5ndGg7ZDxlOysrZCkoYz10aGlzLmJ1aWxkR2VvbWV0cnlOb2RlLmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tkXV0pKSYmYi5hcHBlbmRDaGlsZChjKTtyZXR1cm4gYn19LGJ1aWxkQ29vcmRpbmF0ZXNOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPQp0aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJjb29yZGluYXRlcyIpLGM7aWYoYz1hLmNvbXBvbmVudHMpe2Zvcih2YXIgZD1jLmxlbmd0aCxlPUFycmF5KGQpLGY9MDtmPGQ7KytmKWE9Y1tmXSxlW2ZdPXRoaXMuYnVpbGRDb29yZGluYXRlcyhhKTtjPWUuam9pbigiICIpfWVsc2UgYz10aGlzLmJ1aWxkQ29vcmRpbmF0ZXMoYSk7Yz10aGlzLmNyZWF0ZVRleHROb2RlKGMpO2IuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LGJ1aWxkQ29vcmRpbmF0ZXM6ZnVuY3Rpb24oYSl7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiYoYT1hLmNsb25lKCksYS50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pKTtyZXR1cm4gYS54KyIsIithLnl9LGJ1aWxkRXh0ZW5kZWREYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIkV4dGVuZGVkRGF0YSIpLApjO2ZvcihjIGluIGEpaWYoYVtjXSYmIm5hbWUiIT1jJiYiZGVzY3JpcHRpb24iIT1jJiYic3R5bGVVcmwiIT1jKXt2YXIgZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJEYXRhIik7ZC5zZXRBdHRyaWJ1dGUoIm5hbWUiLGMpO3ZhciBlPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsInZhbHVlIik7aWYoIm9iamVjdCI9PXR5cGVvZiBhW2NdKXtpZihhW2NdLnZhbHVlJiZlLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlVGV4dE5vZGUoYVtjXS52YWx1ZSkpLGFbY10uZGlzcGxheU5hbWUpe3ZhciBmPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsImRpc3BsYXlOYW1lIik7Zi5hcHBlbmRDaGlsZCh0aGlzLmdldFhNTERvYygpLmNyZWF0ZUNEQVRBU2VjdGlvbihhW2NdLmRpc3BsYXlOYW1lKSk7ZC5hcHBlbmRDaGlsZChmKX19ZWxzZSBlLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlVGV4dE5vZGUoYVtjXSkpO2QuYXBwZW5kQ2hpbGQoZSk7Yi5hcHBlbmRDaGlsZChkKX1yZXR1cm4gdGhpcy5pc1NpbXBsZUNvbnRlbnQoYik/Cm51bGw6Yn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuS01MIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qcm90b2NvbCx7dmVyc2lvbjpudWxsLHNyc05hbWU6IkVQU0c6NDMyNiIsZmVhdHVyZVR5cGU6bnVsbCxmZWF0dXJlTlM6bnVsbCxnZW9tZXRyeU5hbWU6InRoZV9nZW9tIixzY2hlbWE6bnVsbCxmZWF0dXJlUHJlZml4OiJmZWF0dXJlIixmb3JtYXRPcHRpb25zOm51bGwscmVhZEZvcm1hdDpudWxsLHJlYWRPcHRpb25zOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTthLmZvcm1hdHx8KHRoaXMuZm9ybWF0PU9wZW5MYXllcnMuRm9ybWF0LldGU1QoT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7dmVyc2lvbjp0aGlzLnZlcnNpb24sZmVhdHVyZVR5cGU6dGhpcy5mZWF0dXJlVHlwZSxmZWF0dXJlTlM6dGhpcy5mZWF0dXJlTlMsZmVhdHVyZVByZWZpeDp0aGlzLmZlYXR1cmVQcmVmaXgsZ2VvbWV0cnlOYW1lOnRoaXMuZ2VvbWV0cnlOYW1lLApzcnNOYW1lOnRoaXMuc3JzTmFtZSxzY2hlbWE6dGhpcy5zY2hlbWF9LHRoaXMuZm9ybWF0T3B0aW9ucykpKTshYS5nZW9tZXRyeU5hbWUmJjE8cGFyc2VGbG9hdCh0aGlzLmZvcm1hdC52ZXJzaW9uKSYmdGhpcy5zZXRHZW9tZXRyeU5hbWUobnVsbCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMmJiF0aGlzLm9wdGlvbnMuZm9ybWF0JiZ0aGlzLmZvcm1hdC5kZXN0cm95KCk7dGhpcy5mb3JtYXQ9bnVsbDtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMpfSxyZWFkOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUHJvdG9jb2wucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxhKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMub3B0aW9uc3x8e30pO3ZhciBiPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXF1ZXN0VHlwZToicmVhZCJ9KSwKYz1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMuZm9ybWF0LFt0aGlzLmZvcm1hdC53cml0ZU5vZGUoIndmczpHZXRGZWF0dXJlIixhKV0pO2IucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOmEudXJsLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVSZWFkLGIsYSkscGFyYW1zOmEucGFyYW1zLGhlYWRlcnM6YS5oZWFkZXJzLGRhdGE6Y30pO3JldHVybiBifSxzZXRGZWF0dXJlVHlwZTpmdW5jdGlvbihhKXt0aGlzLmZlYXR1cmVUeXBlPWE7dGhpcy5mb3JtYXQuZmVhdHVyZVR5cGU9YX0sc2V0R2VvbWV0cnlOYW1lOmZ1bmN0aW9uKGEpe3RoaXMuZ2VvbWV0cnlOYW1lPWE7dGhpcy5mb3JtYXQuZ2VvbWV0cnlOYW1lPWF9LGhhbmRsZVJlYWQ6ZnVuY3Rpb24oYSxiKXtiPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYik7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix0aGlzLm9wdGlvbnMpO2lmKGIuY2FsbGJhY2spe3ZhciBjPQphLnByaXY7MjAwPD1jLnN0YXR1cyYmMzAwPmMuc3RhdHVzPyhjPXRoaXMucGFyc2VSZXNwb25zZShjLGIucmVhZE9wdGlvbnMpKSYmITEhPT1jLnN1Y2Nlc3M/KGIucmVhZE9wdGlvbnMmJiJvYmplY3QiPT1iLnJlYWRPcHRpb25zLm91dHB1dD9PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEsYyk6YS5mZWF0dXJlcz1jLGEuY29kZT1PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLlNVQ0NFU1MpOihhLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5GQUlMVVJFLGEuZXJyb3I9Yyk6YS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRTtiLmNhbGxiYWNrLmNhbGwoYi5zY29wZSxhKX19LHBhcnNlUmVzcG9uc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnJlc3BvbnNlWE1MO2MmJmMuZG9jdW1lbnRFbGVtZW50fHwoYz1hLnJlc3BvbnNlVGV4dCk7aWYoIWN8fDA+PWMubGVuZ3RoKXJldHVybiBudWxsO2M9bnVsbCE9PXRoaXMucmVhZEZvcm1hdD90aGlzLnJlYWRGb3JtYXQucmVhZChjKToKdGhpcy5mb3JtYXQucmVhZChjLGIpO2lmKCF0aGlzLmZlYXR1cmVOUyl7dmFyIGQ9dGhpcy5yZWFkRm9ybWF0fHx0aGlzLmZvcm1hdDt0aGlzLmZlYXR1cmVOUz1kLmZlYXR1cmVOUztkLmF1dG9Db25maWc9ITE7dGhpcy5nZW9tZXRyeU5hbWV8fHRoaXMuc2V0R2VvbWV0cnlOYW1lKGQuZ2VvbWV0cnlOYW1lKX1yZXR1cm4gY30sY29tbWl0OmZ1bmN0aW9uKGEsYil7Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgYz1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxdWVzdFR5cGU6ImNvbW1pdCIscmVxRmVhdHVyZXM6YX0pO2MucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOmIudXJsLGhlYWRlcnM6Yi5oZWFkZXJzLGRhdGE6dGhpcy5mb3JtYXQud3JpdGUoYSxiKSxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlQ29tbWl0LGMsYil9KTsKcmV0dXJuIGN9LGhhbmRsZUNvbW1pdDpmdW5jdGlvbihhLGIpe2lmKGIuY2FsbGJhY2spe3ZhciBjPWEucHJpdixkPWMucmVzcG9uc2VYTUw7ZCYmZC5kb2N1bWVudEVsZW1lbnR8fChkPWMucmVzcG9uc2VUZXh0KTtjPXRoaXMuZm9ybWF0LnJlYWQoZCl8fHt9O2EuaW5zZXJ0SWRzPWMuaW5zZXJ0SWRzfHxbXTtjLnN1Y2Nlc3M/YS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuU1VDQ0VTUzooYS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRSxhLmVycm9yPWMpO2IuY2FsbGJhY2suY2FsbChiLnNjb3BlLGEpfX0sZmlsdGVyRGVsZXRlOmZ1bmN0aW9uKGEsYil7Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTtuZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxdWVzdFR5cGU6ImNvbW1pdCJ9KTt2YXIgYz10aGlzLmZvcm1hdC5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6VHJhbnNhY3Rpb24iLAp7YXR0cmlidXRlczp7c2VydmljZToiV0ZTIix2ZXJzaW9uOnRoaXMudmVyc2lvbn19KSxkPXRoaXMuZm9ybWF0LmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpEZWxldGUiLHthdHRyaWJ1dGVzOnt0eXBlTmFtZTooYi5mZWF0dXJlTlM/dGhpcy5mZWF0dXJlUHJlZml4KyI6IjoiIikrYi5mZWF0dXJlVHlwZX19KTtiLmZlYXR1cmVOUyYmZC5zZXRBdHRyaWJ1dGUoInhtbG5zOiIrdGhpcy5mZWF0dXJlUHJlZml4LGIuZmVhdHVyZU5TKTt2YXIgZT10aGlzLmZvcm1hdC53cml0ZU5vZGUoIm9nYzpGaWx0ZXIiLGEpO2QuYXBwZW5kQ2hpbGQoZSk7Yy5hcHBlbmRDaGlsZChkKTtjPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcy5mb3JtYXQsW2NdKTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0LlBPU1Qoe3VybDp0aGlzLnVybCxjYWxsYmFjazpiLmNhbGxiYWNrfHxmdW5jdGlvbigpe30sZGF0YTpjfSl9LGFib3J0OmZ1bmN0aW9uKGEpe2EmJmEucHJpdi5hYm9ydCgpfSwKQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qcm90b2NvbC5XRlMudjEifSk7T3BlbkxheWVycy5IYW5kbGVyLkZlYXR1cmU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIse0VWRU5UTUFQOntjbGljazp7ImluIjoiY2xpY2siLG91dDoiY2xpY2tvdXQifSxtb3VzZW1vdmU6eyJpbiI6Im92ZXIiLG91dDoib3V0In0sZGJsY2xpY2s6eyJpbiI6ImRibGNsaWNrIixvdXQ6bnVsbH0sbW91c2Vkb3duOnsiaW4iOm51bGwsb3V0Om51bGx9LG1vdXNldXA6eyJpbiI6bnVsbCxvdXQ6bnVsbH0sdG91Y2hzdGFydDp7ImluIjoiY2xpY2siLG91dDoiY2xpY2tvdXQifX0sZmVhdHVyZTpudWxsLGxhc3RGZWF0dXJlOm51bGwsZG93bjpudWxsLHVwOm51bGwsY2xpY2tUb2xlcmFuY2U6NCxnZW9tZXRyeVR5cGVzOm51bGwsc3RvcENsaWNrOiEwLHN0b3BEb3duOiEwLHN0b3BVcDohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGMsZF0pO3RoaXMubGF5ZXI9CmJ9LHRvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydFRvdWNoKCk7cmV0dXJuIE9wZW5MYXllcnMuRXZlbnQuaXNNdWx0aVRvdWNoKGEpPyEwOnRoaXMubW91c2Vkb3duKGEpfSx0b3VjaG1vdmU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKX0sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe2lmKE9wZW5MYXllcnMuRXZlbnQuaXNMZWZ0Q2xpY2soYSl8fE9wZW5MYXllcnMuRXZlbnQuaXNTaW5nbGVUb3VjaChhKSl0aGlzLmRvd249YS54eTtyZXR1cm4gdGhpcy5oYW5kbGUoYSk/IXRoaXMuc3RvcERvd246ITB9LG1vdXNldXA6ZnVuY3Rpb24oYSl7dGhpcy51cD1hLnh5O3JldHVybiB0aGlzLmhhbmRsZShhKT8hdGhpcy5zdG9wVXA6ITB9LGNsaWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmhhbmRsZShhKT8hdGhpcy5zdG9wQ2xpY2s6ITB9LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtpZighdGhpcy5jYWxsYmFja3Mub3ZlciYmIXRoaXMuY2FsbGJhY2tzLm91dClyZXR1cm4hMDsKdGhpcy5oYW5kbGUoYSk7cmV0dXJuITB9LGRibGNsaWNrOmZ1bmN0aW9uKGEpe3JldHVybiF0aGlzLmhhbmRsZShhKX0sZ2VvbWV0cnlUeXBlTWF0Y2hlczpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09dGhpcy5nZW9tZXRyeVR5cGVzfHwtMTxPcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmdlb21ldHJ5VHlwZXMsYS5nZW9tZXRyeS5DTEFTU19OQU1FKX0saGFuZGxlOmZ1bmN0aW9uKGEpe3RoaXMuZmVhdHVyZSYmIXRoaXMuZmVhdHVyZS5sYXllciYmKHRoaXMuZmVhdHVyZT1udWxsKTt2YXIgYj1hLnR5cGUsYz0hMSxkPSEhdGhpcy5mZWF0dXJlLGU9ImNsaWNrIj09Ynx8ImRibGNsaWNrIj09Ynx8InRvdWNoc3RhcnQiPT1iOyh0aGlzLmZlYXR1cmU9dGhpcy5sYXllci5nZXRGZWF0dXJlRnJvbUV2ZW50KGEpKSYmIXRoaXMuZmVhdHVyZS5sYXllciYmKHRoaXMuZmVhdHVyZT1udWxsKTt0aGlzLmxhc3RGZWF0dXJlJiYhdGhpcy5sYXN0RmVhdHVyZS5sYXllciYmKHRoaXMubGFzdEZlYXR1cmU9Cm51bGwpO3RoaXMuZmVhdHVyZT8oInRvdWNoc3RhcnQiPT09YiYmT3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKSxhPXRoaXMuZmVhdHVyZSE9dGhpcy5sYXN0RmVhdHVyZSx0aGlzLmdlb21ldHJ5VHlwZU1hdGNoZXModGhpcy5mZWF0dXJlKT8oZCYmYT8odGhpcy5sYXN0RmVhdHVyZSYmdGhpcy50cmlnZ2VyQ2FsbGJhY2soYiwib3V0IixbdGhpcy5sYXN0RmVhdHVyZV0pLHRoaXMudHJpZ2dlckNhbGxiYWNrKGIsImluIixbdGhpcy5mZWF0dXJlXSkpOmQmJiFlfHx0aGlzLnRyaWdnZXJDYWxsYmFjayhiLCJpbiIsW3RoaXMuZmVhdHVyZV0pLHRoaXMubGFzdEZlYXR1cmU9dGhpcy5mZWF0dXJlLGM9ITApOih0aGlzLmxhc3RGZWF0dXJlJiYoZCYmYXx8ZSkmJnRoaXMudHJpZ2dlckNhbGxiYWNrKGIsIm91dCIsW3RoaXMubGFzdEZlYXR1cmVdKSx0aGlzLmZlYXR1cmU9bnVsbCkpOnRoaXMubGFzdEZlYXR1cmUmJihkfHxlKSYmdGhpcy50cmlnZ2VyQ2FsbGJhY2soYiwib3V0IiwKW3RoaXMubGFzdEZlYXR1cmVdKTtyZXR1cm4gY30sdHJpZ2dlckNhbGxiYWNrOmZ1bmN0aW9uKGEsYixjKXtpZihiPXRoaXMuRVZFTlRNQVBbYV1bYl0pImNsaWNrIj09YSYmdGhpcy51cCYmdGhpcy5kb3duPyhNYXRoLnNxcnQoTWF0aC5wb3codGhpcy51cC54LXRoaXMuZG93bi54LDIpK01hdGgucG93KHRoaXMudXAueS10aGlzLmRvd24ueSwyKSk8PXRoaXMuY2xpY2tUb2xlcmFuY2UmJnRoaXMuY2FsbGJhY2soYixjKSx0aGlzLnVwPXRoaXMuZG93bj1udWxsKTp0aGlzLmNhbGxiYWNrKGIsYyl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLm1vdmVMYXllclRvVG9wKCksdGhpcy5tYXAuZXZlbnRzLm9uKHtyZW1vdmVsYXllcjp0aGlzLmhhbmRsZU1hcEV2ZW50cyxjaGFuZ2VsYXllcjp0aGlzLmhhbmRsZU1hcEV2ZW50cyxzY29wZTp0aGlzfSksYT0hMCk7CnJldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMubW92ZUxheWVyQmFjaygpLHRoaXMudXA9dGhpcy5kb3duPXRoaXMubGFzdEZlYXR1cmU9dGhpcy5mZWF0dXJlPW51bGwsdGhpcy5tYXAuZXZlbnRzLnVuKHtyZW1vdmVsYXllcjp0aGlzLmhhbmRsZU1hcEV2ZW50cyxjaGFuZ2VsYXllcjp0aGlzLmhhbmRsZU1hcEV2ZW50cyxzY29wZTp0aGlzfSksYT0hMCk7cmV0dXJuIGF9LGhhbmRsZU1hcEV2ZW50czpmdW5jdGlvbihhKXsicmVtb3ZlbGF5ZXIiIT1hLnR5cGUmJiJvcmRlciIhPWEucHJvcGVydHl8fHRoaXMubW92ZUxheWVyVG9Ub3AoKX0sbW92ZUxheWVyVG9Ub3A6ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLm1heCh0aGlzLm1hcC5aX0lOREVYX0JBU0UuRmVhdHVyZS0xLHRoaXMubGF5ZXIuZ2V0WkluZGV4KCkpKzE7dGhpcy5sYXllci5zZXRaSW5kZXgoYSl9LAptb3ZlTGF5ZXJCYWNrOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sYXllci5nZXRaSW5kZXgoKS0xO2E+PXRoaXMubWFwLlpfSU5ERVhfQkFTRS5GZWF0dXJlP3RoaXMubGF5ZXIuc2V0WkluZGV4KGEpOnRoaXMubWFwLnNldExheWVyWkluZGV4KHRoaXMubGF5ZXIsdGhpcy5tYXAuZ2V0TGF5ZXJJbmRleCh0aGlzLmxheWVyKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuSGFuZGxlci5GZWF0dXJlIn0pO09wZW5MYXllcnMuU3R5bGVNYXA9T3BlbkxheWVycy5DbGFzcyh7c3R5bGVzOm51bGwsZXh0ZW5kRGVmYXVsdDohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7dGhpcy5zdHlsZXM9eyJkZWZhdWx0IjpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlWyJkZWZhdWx0Il0pLHNlbGVjdDpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlLnNlbGVjdCksdGVtcG9yYXJ5Om5ldyBPcGVuTGF5ZXJzLlN0eWxlKE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Iuc3R5bGUudGVtcG9yYXJ5KSwiZGVsZXRlIjpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlWyJkZWxldGUiXSl9O2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlN0eWxlKXRoaXMuc3R5bGVzWyJkZWZhdWx0Il09YSx0aGlzLnN0eWxlcy5zZWxlY3Q9YSx0aGlzLnN0eWxlcy50ZW1wb3Jhcnk9YSx0aGlzLnN0eWxlc1siZGVsZXRlIl09CmE7ZWxzZSBpZigib2JqZWN0Ij09dHlwZW9mIGEpZm9yKHZhciBjIGluIGEpaWYoYVtjXWluc3RhbmNlb2YgT3BlbkxheWVycy5TdHlsZSl0aGlzLnN0eWxlc1tjXT1hW2NdO2Vsc2UgaWYoIm9iamVjdCI9PXR5cGVvZiBhW2NdKXRoaXMuc3R5bGVzW2NdPW5ldyBPcGVuTGF5ZXJzLlN0eWxlKGFbY10pO2Vsc2V7dGhpcy5zdHlsZXNbImRlZmF1bHQiXT1uZXcgT3BlbkxheWVycy5TdHlsZShhKTt0aGlzLnN0eWxlcy5zZWxlY3Q9bmV3IE9wZW5MYXllcnMuU3R5bGUoYSk7dGhpcy5zdHlsZXMudGVtcG9yYXJ5PW5ldyBPcGVuTGF5ZXJzLlN0eWxlKGEpO3RoaXMuc3R5bGVzWyJkZWxldGUiXT1uZXcgT3BlbkxheWVycy5TdHlsZShhKTticmVha31PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5zdHlsZXMpdGhpcy5zdHlsZXNbYV0uZGVzdHJveSgpO3RoaXMuc3R5bGVzPW51bGx9LGNyZWF0ZVN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSwKYil7YXx8KGE9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IpO3RoaXMuc3R5bGVzW2JdfHwoYj0iZGVmYXVsdCIpO2EucmVuZGVySW50ZW50PWI7dmFyIGM9e307dGhpcy5leHRlbmREZWZhdWx0JiYiZGVmYXVsdCIhPWImJihjPXRoaXMuc3R5bGVzWyJkZWZhdWx0Il0uY3JlYXRlU3ltYm9saXplcihhKSk7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5leHRlbmQoYyx0aGlzLnN0eWxlc1tiXS5jcmVhdGVTeW1ib2xpemVyKGEpKX0sYWRkVW5pcXVlVmFsdWVSdWxlczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXSxmO2ZvcihmIGluIGMpZS5wdXNoKG5ldyBPcGVuTGF5ZXJzLlJ1bGUoe3N5bWJvbGl6ZXI6Y1tmXSxjb250ZXh0OmQsZmlsdGVyOm5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE8scHJvcGVydHk6Yix2YWx1ZTpmfSl9KSk7dGhpcy5zdHlsZXNbYV0uYWRkUnVsZXMoZSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3R5bGVNYXAifSk7T3BlbkxheWVycy5MYXllci5WZWN0b3I9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLHtpc0Jhc2VMYXllcjohMSxpc0ZpeGVkOiExLGZlYXR1cmVzOm51bGwsZmlsdGVyOm51bGwsc2VsZWN0ZWRGZWF0dXJlczpudWxsLHVucmVuZGVyZWRGZWF0dXJlczpudWxsLHJlcG9ydEVycm9yOiEwLHN0eWxlOm51bGwsc3R5bGVNYXA6bnVsbCxzdHJhdGVnaWVzOm51bGwscHJvdG9jb2w6bnVsbCxyZW5kZXJlcnM6WyJTVkciLCJWTUwiLCJDYW52YXMiXSxyZW5kZXJlcjpudWxsLHJlbmRlcmVyT3B0aW9uczpudWxsLGdlb21ldHJ5VHlwZTpudWxsLGRyYXduOiExLHJhdGlvOjEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVuZGVyZXImJnRoaXMucmVuZGVyZXIuc3VwcG9ydGVkKCl8fHRoaXMuYXNzaWduUmVuZGVyZXIoKTt0aGlzLnJlbmRlcmVyJiZ0aGlzLnJlbmRlcmVyLnN1cHBvcnRlZCgpfHwKKHRoaXMucmVuZGVyZXI9bnVsbCx0aGlzLmRpc3BsYXlFcnJvcigpKTt0aGlzLnN0eWxlTWFwfHwodGhpcy5zdHlsZU1hcD1uZXcgT3BlbkxheWVycy5TdHlsZU1hcCk7dGhpcy5mZWF0dXJlcz1bXTt0aGlzLnNlbGVjdGVkRmVhdHVyZXM9W107dGhpcy51bnJlbmRlcmVkRmVhdHVyZXM9e307aWYodGhpcy5zdHJhdGVnaWVzKWZvcih2YXIgYz0wLGQ9dGhpcy5zdHJhdGVnaWVzLmxlbmd0aDtjPGQ7YysrKXRoaXMuc3RyYXRlZ2llc1tjXS5zZXRMYXllcih0aGlzKX0sZGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMuc3RyYXRlZ2llcyl7dmFyIGEsYixjO2I9MDtmb3IoYz10aGlzLnN0cmF0ZWdpZXMubGVuZ3RoO2I8YztiKyspYT10aGlzLnN0cmF0ZWdpZXNbYl0sYS5hdXRvRGVzdHJveSYmYS5kZXN0cm95KCk7dGhpcy5zdHJhdGVnaWVzPW51bGx9dGhpcy5wcm90b2NvbCYmKHRoaXMucHJvdG9jb2wuYXV0b0Rlc3Ryb3kmJnRoaXMucHJvdG9jb2wuZGVzdHJveSgpLHRoaXMucHJvdG9jb2w9Cm51bGwpO3RoaXMuZGVzdHJveUZlYXR1cmVzKCk7dGhpcy51bnJlbmRlcmVkRmVhdHVyZXM9dGhpcy5zZWxlY3RlZEZlYXR1cmVzPXRoaXMuZmVhdHVyZXM9bnVsbDt0aGlzLnJlbmRlcmVyJiZ0aGlzLnJlbmRlcmVyLmRlc3Ryb3koKTt0aGlzLmRyYXduPXRoaXMuZ2VvbWV0cnlUeXBlPXRoaXMucmVuZGVyZXI9bnVsbDtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKHRoaXMubmFtZSx0aGlzLmdldE9wdGlvbnMoKSkpO2E9T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pO2Zvcih2YXIgYj10aGlzLmZlYXR1cmVzLGM9Yi5sZW5ndGgsZD1BcnJheShjKSxlPTA7ZTxjOysrZSlkW2VdPWJbZV0uY2xvbmUoKTthLmZlYXR1cmVzPWQ7cmV0dXJuIGF9LHJlZnJlc2g6ZnVuY3Rpb24oYSl7dGhpcy5jYWxjdWxhdGVJblJhbmdlKCkmJgp0aGlzLnZpc2liaWxpdHkmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmVmcmVzaCIsYSl9LGFzc2lnblJlbmRlcmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLnJlbmRlcmVycy5sZW5ndGg7YTxiO2ErKyl7dmFyIGM9dGhpcy5yZW5kZXJlcnNbYV07aWYoKGM9ImZ1bmN0aW9uIj09dHlwZW9mIGM/YzpPcGVuTGF5ZXJzLlJlbmRlcmVyW2NdKSYmYy5wcm90b3R5cGUuc3VwcG9ydGVkKCkpe3RoaXMucmVuZGVyZXI9bmV3IGModGhpcy5kaXYsdGhpcy5yZW5kZXJlck9wdGlvbnMpO2JyZWFrfX19LGRpc3BsYXlFcnJvcjpmdW5jdGlvbigpe3RoaXMucmVwb3J0RXJyb3ImJk9wZW5MYXllcnMuQ29uc29sZS51c2VyRXJyb3IoT3BlbkxheWVycy5pMThuKCJicm93c2VyTm90U3VwcG9ydGVkIix7cmVuZGVyZXJzOnRoaXMucmVuZGVyZXJzLmpvaW4oIlxuIil9KSl9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcywKYXJndW1lbnRzKTtpZih0aGlzLnJlbmRlcmVyKXt0aGlzLnJlbmRlcmVyLm1hcD10aGlzLm1hcDt2YXIgYj10aGlzLm1hcC5nZXRTaXplKCk7Yi53Kj10aGlzLnJhdGlvO2IuaCo9dGhpcy5yYXRpbzt0aGlzLnJlbmRlcmVyLnNldFNpemUoYil9ZWxzZSB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzKX0sYWZ0ZXJBZGQ6ZnVuY3Rpb24oKXtpZih0aGlzLnN0cmF0ZWdpZXMpe3ZhciBhLGIsYztiPTA7Zm9yKGM9dGhpcy5zdHJhdGVnaWVzLmxlbmd0aDtiPGM7YisrKWE9dGhpcy5zdHJhdGVnaWVzW2JdLGEuYXV0b0FjdGl2YXRlJiZhLmFjdGl2YXRlKCl9fSxyZW1vdmVNYXA6ZnVuY3Rpb24oYSl7dGhpcy5kcmF3bj0hMTtpZih0aGlzLnN0cmF0ZWdpZXMpe3ZhciBiLGM7Yj0wO2ZvcihjPXRoaXMuc3RyYXRlZ2llcy5sZW5ndGg7YjxjO2IrKylhPXRoaXMuc3RyYXRlZ2llc1tiXSxhLmF1dG9BY3RpdmF0ZSYmYS5kZWFjdGl2YXRlKCl9fSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLm9uTWFwUmVzaXplLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7dmFyIGE9dGhpcy5tYXAuZ2V0U2l6ZSgpO2Eudyo9dGhpcy5yYXRpbzthLmgqPXRoaXMucmF0aW87dGhpcy5yZW5kZXJlci5zZXRTaXplKGEpfSxtb3ZlVG86ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLm1vdmVUby5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQ9ITA7aWYoIWMpe3RoaXMucmVuZGVyZXIucm9vdC5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO3ZhciBkPXRoaXMubWFwLmdldFNpemUoKSxlPWQudyxkPWQuaCxlPWUvMip0aGlzLnJhdGlvLWUvMixkPWQvMip0aGlzLnJhdGlvLWQvMixlPWUrdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC54LGU9LU1hdGgucm91bmQoZSksZD1kK3RoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSxkPS1NYXRoLnJvdW5kKGQpO3RoaXMuZGl2LnN0eWxlLmxlZnQ9ZSsicHgiO3RoaXMuZGl2LnN0eWxlLnRvcD1kKyJweCI7ZT10aGlzLm1hcC5nZXRFeHRlbnQoKS5zY2FsZSh0aGlzLnJhdGlvKTsKZD10aGlzLnJlbmRlcmVyLnNldEV4dGVudChlLGIpO3RoaXMucmVuZGVyZXIucm9vdC5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjshMD09PU9wZW5MYXllcnMuSVNfR0VDS08mJih0aGlzLmRpdi5zY3JvbGxMZWZ0PXRoaXMuZGl2LnNjcm9sbExlZnQpO2lmKCFiJiZkKWZvcih2YXIgZiBpbiB0aGlzLnVucmVuZGVyZWRGZWF0dXJlcyllPXRoaXMudW5yZW5kZXJlZEZlYXR1cmVzW2ZdLHRoaXMuZHJhd0ZlYXR1cmUoZSl9aWYoIXRoaXMuZHJhd258fGJ8fCFkKWZvcih0aGlzLmRyYXduPSEwLGY9MCxkPXRoaXMuZmVhdHVyZXMubGVuZ3RoO2Y8ZDtmKyspdGhpcy5yZW5kZXJlci5sb2NrZWQ9ZiE9PWQtMSxlPXRoaXMuZmVhdHVyZXNbZl0sdGhpcy5kcmF3RmVhdHVyZShlKX0sZGlzcGxheTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kaXNwbGF5LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYj10aGlzLmRpdi5zdHlsZS5kaXNwbGF5O2IhPXRoaXMucmVuZGVyZXIucm9vdC5zdHlsZS5kaXNwbGF5JiYKKHRoaXMucmVuZGVyZXIucm9vdC5zdHlsZS5kaXNwbGF5PWIpfSxhZGRGZWF0dXJlczpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO3ZhciBjPSFifHwhYi5zaWxlbnQ7aWYoYyl7dmFyIGQ9e2ZlYXR1cmVzOmF9O2lmKCExPT09dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVmZWF0dXJlc2FkZGVkIixkKSlyZXR1cm47YT1kLmZlYXR1cmVzfWZvcih2YXIgZD1bXSxlPTAsZj1hLmxlbmd0aDtlPGY7ZSsrKXt0aGlzLnJlbmRlcmVyLmxvY2tlZD1lIT1hLmxlbmd0aC0xPyEwOiExO3ZhciBnPWFbZV07aWYodGhpcy5nZW9tZXRyeVR5cGUmJiEoZy5nZW9tZXRyeSBpbnN0YW5jZW9mIHRoaXMuZ2VvbWV0cnlUeXBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJhZGRGZWF0dXJlczogY29tcG9uZW50IHNob3VsZCBiZSBhbiAiK3RoaXMuZ2VvbWV0cnlUeXBlLnByb3RvdHlwZS5DTEFTU19OQU1FKTtnLmxheWVyPXRoaXM7IWcuc3R5bGUmJnRoaXMuc3R5bGUmJgooZy5zdHlsZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuc3R5bGUpKTtpZihjKXtpZighMT09PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZWFkZGVkIix7ZmVhdHVyZTpnfSkpY29udGludWU7dGhpcy5wcmVGZWF0dXJlSW5zZXJ0KGcpfWQucHVzaChnKTt0aGlzLmZlYXR1cmVzLnB1c2goZyk7dGhpcy5kcmF3RmVhdHVyZShnKTtjJiYodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlYWRkZWQiLHtmZWF0dXJlOmd9KSx0aGlzLm9uRmVhdHVyZUluc2VydChnKSl9YyYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc2FkZGVkIix7ZmVhdHVyZXM6ZH0pfSxyZW1vdmVGZWF0dXJlczpmdW5jdGlvbihhLGIpe2lmKGEmJjAhPT1hLmxlbmd0aCl7aWYoYT09PXRoaXMuZmVhdHVyZXMpcmV0dXJuIHRoaXMucmVtb3ZlQWxsRmVhdHVyZXMoYik7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7YT09PXRoaXMuc2VsZWN0ZWRGZWF0dXJlcyYmCihhPWEuc2xpY2UoKSk7dmFyIGM9IWJ8fCFiLnNpbGVudDtjJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVzcmVtb3ZlZCIse2ZlYXR1cmVzOmF9KTtmb3IodmFyIGQ9YS5sZW5ndGgtMTswPD1kO2QtLSl7dGhpcy5yZW5kZXJlci5sb2NrZWQ9MCE9ZCYmYVtkLTFdLmdlb21ldHJ5PyEwOiExO3ZhciBlPWFbZF07ZGVsZXRlIHRoaXMudW5yZW5kZXJlZEZlYXR1cmVzW2UuaWRdO2MmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmV9KTt0aGlzLmZlYXR1cmVzPU9wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMuZmVhdHVyZXMsZSk7ZS5sYXllcj1udWxsO2UuZ2VvbWV0cnkmJnRoaXMucmVuZGVyZXIuZXJhc2VGZWF0dXJlcyhlKTstMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5zZWxlY3RlZEZlYXR1cmVzLGUpJiZPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnNlbGVjdGVkRmVhdHVyZXMsCmUpO2MmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmV9KX1jJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImZlYXR1cmVzcmVtb3ZlZCIse2ZlYXR1cmVzOmF9KX19LHJlbW92ZUFsbEZlYXR1cmVzOmZ1bmN0aW9uKGEpe2E9IWF8fCFhLnNpbGVudDt2YXIgYj10aGlzLmZlYXR1cmVzO2EmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXNyZW1vdmVkIix7ZmVhdHVyZXM6Yn0pO2Zvcih2YXIgYyxkPWIubGVuZ3RoLTE7MDw9ZDtkLS0pYz1iW2RdLGEmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmN9KSxjLmxheWVyPW51bGwsYSYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlcmVtb3ZlZCIse2ZlYXR1cmU6Y30pO3RoaXMucmVuZGVyZXIuY2xlYXIoKTt0aGlzLmZlYXR1cmVzPVtdO3RoaXMudW5yZW5kZXJlZEZlYXR1cmVzPXt9O3RoaXMuc2VsZWN0ZWRGZWF0dXJlcz0KW107YSYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc3JlbW92ZWQiLHtmZWF0dXJlczpifSl9LGRlc3Ryb3lGZWF0dXJlczpmdW5jdGlvbihhLGIpe3ZvaWQgMD09YSYmKGE9dGhpcy5mZWF0dXJlcyk7aWYoYSl7dGhpcy5yZW1vdmVGZWF0dXJlcyhhLGIpO2Zvcih2YXIgYz1hLmxlbmd0aC0xOzA8PWM7Yy0tKWFbY10uZGVzdHJveSgpfX0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmRyYXduKXtpZigib2JqZWN0IiE9dHlwZW9mIGIpe2J8fGEuc3RhdGUhPT1PcGVuTGF5ZXJzLlN0YXRlLkRFTEVURXx8KGI9ImRlbGV0ZSIpO3ZhciBjPWJ8fGEucmVuZGVySW50ZW50OyhiPWEuc3R5bGV8fHRoaXMuc3R5bGUpfHwoYj10aGlzLnN0eWxlTWFwLmNyZWF0ZVN5bWJvbGl6ZXIoYSxjKSl9Yz10aGlzLnJlbmRlcmVyLmRyYXdGZWF0dXJlKGEsYik7ITE9PT1jfHxudWxsPT09Yz90aGlzLnVucmVuZGVyZWRGZWF0dXJlc1thLmlkXT1hOmRlbGV0ZSB0aGlzLnVucmVuZGVyZWRGZWF0dXJlc1thLmlkXX19LAplcmFzZUZlYXR1cmVzOmZ1bmN0aW9uKGEpe3RoaXMucmVuZGVyZXIuZXJhc2VGZWF0dXJlcyhhKX0sZ2V0RmVhdHVyZUZyb21FdmVudDpmdW5jdGlvbihhKXtpZighdGhpcy5yZW5kZXJlcil0aHJvdyBFcnJvcigiZ2V0RmVhdHVyZUZyb21FdmVudCBjYWxsZWQgb24gbGF5ZXIgd2l0aCBubyByZW5kZXJlci4gVGhpcyB1c3VhbGx5IG1lYW5zIHlvdSBkZXN0cm95ZWQgYSBsYXllciwgYnV0IG5vdCBzb21lIGhhbmRsZXIgd2hpY2ggaXMgYXNzb2NpYXRlZCB3aXRoIGl0LiIpO3ZhciBiPW51bGw7KGE9dGhpcy5yZW5kZXJlci5nZXRGZWF0dXJlSWRGcm9tRXZlbnQoYSkpJiYoYj0ic3RyaW5nIj09PXR5cGVvZiBhP3RoaXMuZ2V0RmVhdHVyZUJ5SWQoYSk6YSk7cmV0dXJuIGJ9LGdldEZlYXR1cmVCeTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1udWxsLGQ9MCxlPXRoaXMuZmVhdHVyZXMubGVuZ3RoO2Q8ZTsrK2QpaWYodGhpcy5mZWF0dXJlc1tkXVthXT09Yil7Yz10aGlzLmZlYXR1cmVzW2RdOwpicmVha31yZXR1cm4gY30sZ2V0RmVhdHVyZUJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0RmVhdHVyZUJ5KCJpZCIsYSl9LGdldEZlYXR1cmVCeUZpZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRGZWF0dXJlQnkoImZpZCIsYSl9LGdldEZlYXR1cmVzQnlBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9dGhpcy5mZWF0dXJlcy5sZW5ndGgsZj1bXTtmb3IoYz0wO2M8ZTtjKyspKGQ9dGhpcy5mZWF0dXJlc1tjXSkmJmQuYXR0cmlidXRlcyYmZC5hdHRyaWJ1dGVzW2FdPT09YiYmZi5wdXNoKGQpO3JldHVybiBmfSxvbkZlYXR1cmVJbnNlcnQ6ZnVuY3Rpb24oYSl7fSxwcmVGZWF0dXJlSW5zZXJ0OmZ1bmN0aW9uKGEpe30sZ2V0RGF0YUV4dGVudDpmdW5jdGlvbigpe3ZhciBhPW51bGwsYj10aGlzLmZlYXR1cmVzO2lmKGImJjA8Yi5sZW5ndGgpZm9yKHZhciBjPW51bGwsZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKylpZihjPWJbZF0uZ2VvbWV0cnkpbnVsbD09PWEmJgooYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMpLGEuZXh0ZW5kKGMuZ2V0Qm91bmRzKCkpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlZlY3RvciJ9KTtPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5Sb290Q29udGFpbmVyPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5WZWN0b3Ise2Rpc3BsYXlJbkxheWVyU3dpdGNoZXI6ITEsbGF5ZXJzOm51bGwsZGlzcGxheTpmdW5jdGlvbigpe30sZ2V0RmVhdHVyZUZyb21FdmVudDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5sYXllcnMsYyxkPTA7ZDxiLmxlbmd0aDtkKyspaWYoYz1iW2RdLmdldEZlYXR1cmVGcm9tRXZlbnQoYSkpcmV0dXJuIGN9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmNvbGxlY3RSb290cygpO2EuZXZlbnRzLnJlZ2lzdGVyKCJjaGFuZ2VsYXllciIsdGhpcyx0aGlzLmhhbmRsZUNoYW5nZUxheWVyKX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe2EuZXZlbnRzLnVucmVnaXN0ZXIoImNoYW5nZWxheWVyIix0aGlzLHRoaXMuaGFuZGxlQ2hhbmdlTGF5ZXIpOwp0aGlzLnJlc2V0Um9vdHMoKTtPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5wcm90b3R5cGUucmVtb3ZlTWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY29sbGVjdFJvb3RzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MDtiPHRoaXMubWFwLmxheWVycy5sZW5ndGg7KytiKWE9dGhpcy5tYXAubGF5ZXJzW2JdLC0xIT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmxheWVycyxhKSYmYS5yZW5kZXJlci5tb3ZlUm9vdCh0aGlzLnJlbmRlcmVyKX0scmVzZXRSb290czpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7Yjx0aGlzLmxheWVycy5sZW5ndGg7KytiKWE9dGhpcy5sYXllcnNbYl0sdGhpcy5yZW5kZXJlciYmYS5yZW5kZXJlci5nZXRSZW5kZXJMYXllcklkKCk9PXRoaXMuaWQmJnRoaXMucmVuZGVyZXIubW92ZVJvb3QoYS5yZW5kZXJlcil9LGhhbmRsZUNoYW5nZUxheWVyOmZ1bmN0aW9uKGEpe3ZhciBiPWEubGF5ZXI7Im9yZGVyIj09YS5wcm9wZXJ0eSYmLTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMubGF5ZXJzLApiKSYmKHRoaXMucmVzZXRSb290cygpLHRoaXMuY29sbGVjdFJvb3RzKCkpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5Sb290Q29udGFpbmVyIn0pO09wZW5MYXllcnMuQ29udHJvbC5TZWxlY3RGZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHttdWx0aXBsZUtleTpudWxsLHRvZ2dsZUtleTpudWxsLG11bHRpcGxlOiExLGNsaWNrb3V0OiEwLHRvZ2dsZTohMSxob3ZlcjohMSxoaWdobGlnaHRPbmx5OiExLGJveDohMSxvbkJlZm9yZVNlbGVjdDpmdW5jdGlvbigpe30sb25TZWxlY3Q6ZnVuY3Rpb24oKXt9LG9uVW5zZWxlY3Q6ZnVuY3Rpb24oKXt9LHNjb3BlOm51bGwsZ2VvbWV0cnlUeXBlczpudWxsLGxheWVyOm51bGwsbGF5ZXJzOm51bGwsY2FsbGJhY2tzOm51bGwsc2VsZWN0U3R5bGU6bnVsbCxyZW5kZXJJbnRlbnQ6InNlbGVjdCIsaGFuZGxlcnM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKTtudWxsPT09dGhpcy5zY29wZSYmKHRoaXMuc2NvcGU9dGhpcyk7dGhpcy5pbml0TGF5ZXIoYSk7dmFyIGM9CntjbGljazp0aGlzLmNsaWNrRmVhdHVyZSxjbGlja291dDp0aGlzLmNsaWNrb3V0RmVhdHVyZX07dGhpcy5ob3ZlciYmKGMub3Zlcj10aGlzLm92ZXJGZWF0dXJlLGMub3V0PXRoaXMub3V0RmVhdHVyZSk7dGhpcy5jYWxsYmFja3M9T3BlbkxheWVycy5VdGlsLmV4dGVuZChjLHRoaXMuY2FsbGJhY2tzKTt0aGlzLmhhbmRsZXJzPXtmZWF0dXJlOm5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuRmVhdHVyZSh0aGlzLHRoaXMubGF5ZXIsdGhpcy5jYWxsYmFja3Mse2dlb21ldHJ5VHlwZXM6dGhpcy5nZW9tZXRyeVR5cGVzfSl9O3RoaXMuYm94JiYodGhpcy5oYW5kbGVycy5ib3g9bmV3IE9wZW5MYXllcnMuSGFuZGxlci5Cb3godGhpcyx7ZG9uZTp0aGlzLnNlbGVjdEJveH0se2JveERpdkNsYXNzTmFtZToib2xIYW5kbGVyQm94U2VsZWN0RmVhdHVyZSJ9KSl9LGluaXRMYXllcjpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKT8odGhpcy5sYXllcnM9YSx0aGlzLmxheWVyPQpuZXcgT3BlbkxheWVycy5MYXllci5WZWN0b3IuUm9vdENvbnRhaW5lcih0aGlzLmlkKyJfY29udGFpbmVyIix7bGF5ZXJzOmF9KSk6dGhpcy5sYXllcj1hfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5hY3RpdmUmJnRoaXMubGF5ZXJzJiZ0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLmxheWVyKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMubGF5ZXJzJiZ0aGlzLmxheWVyLmRlc3Ryb3koKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZXx8KHRoaXMubGF5ZXJzJiZ0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKSx0aGlzLmhhbmRsZXJzLmZlYXR1cmUuYWN0aXZhdGUoKSx0aGlzLmJveCYmdGhpcy5oYW5kbGVycy5ib3gmJnRoaXMuaGFuZGxlcnMuYm94LmFjdGl2YXRlKCkpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlJiYKKHRoaXMuaGFuZGxlcnMuZmVhdHVyZS5kZWFjdGl2YXRlKCksdGhpcy5oYW5kbGVycy5ib3gmJnRoaXMuaGFuZGxlcnMuYm94LmRlYWN0aXZhdGUoKSx0aGlzLmxheWVycyYmdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5sYXllcikpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx1bnNlbGVjdEFsbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxheWVyc3x8W3RoaXMubGF5ZXJdLGMsZCxlLGY7Zm9yKGU9MDtlPGIubGVuZ3RoOysrZSlpZihjPWJbZV0sZj0wLG51bGwhPWMuc2VsZWN0ZWRGZWF0dXJlcylmb3IoO2Muc2VsZWN0ZWRGZWF0dXJlcy5sZW5ndGg+ZjspZD1jLnNlbGVjdGVkRmVhdHVyZXNbZl0sYSYmYS5leGNlcHQ9PWQ/KytmOnRoaXMudW5zZWxlY3QoZCl9LGNsaWNrRmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmhvdmVyfHwoLTE8T3BlbkxheWVycy5VdGlsLmluZGV4T2YoYS5sYXllci5zZWxlY3RlZEZlYXR1cmVzLAphKT90aGlzLnRvZ2dsZVNlbGVjdCgpP3RoaXMudW5zZWxlY3QoYSk6dGhpcy5tdWx0aXBsZVNlbGVjdCgpfHx0aGlzLnVuc2VsZWN0QWxsKHtleGNlcHQ6YX0pOih0aGlzLm11bHRpcGxlU2VsZWN0KCl8fHRoaXMudW5zZWxlY3RBbGwoe2V4Y2VwdDphfSksdGhpcy5zZWxlY3QoYSkpKX0sbXVsdGlwbGVTZWxlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdWx0aXBsZXx8dGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dCYmdGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dFt0aGlzLm11bHRpcGxlS2V5XX0sdG9nZ2xlU2VsZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9nZ2xlfHx0aGlzLmhhbmRsZXJzLmZlYXR1cmUuZXZ0JiZ0aGlzLmhhbmRsZXJzLmZlYXR1cmUuZXZ0W3RoaXMudG9nZ2xlS2V5XX0sY2xpY2tvdXRGZWF0dXJlOmZ1bmN0aW9uKGEpeyF0aGlzLmhvdmVyJiZ0aGlzLmNsaWNrb3V0JiZ0aGlzLnVuc2VsZWN0QWxsKCl9LG92ZXJGZWF0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiPQphLmxheWVyO3RoaXMuaG92ZXImJih0aGlzLmhpZ2hsaWdodE9ubHk/dGhpcy5oaWdobGlnaHQoYSk6LTE9PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGIuc2VsZWN0ZWRGZWF0dXJlcyxhKSYmdGhpcy5zZWxlY3QoYSkpfSxvdXRGZWF0dXJlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaG92ZXIpaWYodGhpcy5oaWdobGlnaHRPbmx5KXtpZihhLl9sYXN0SGlnaGxpZ2h0ZXI9PXRoaXMuaWQpaWYoYS5fcHJldkhpZ2hsaWdodGVyJiZhLl9wcmV2SGlnaGxpZ2h0ZXIhPXRoaXMuaWQpe2RlbGV0ZSBhLl9sYXN0SGlnaGxpZ2h0ZXI7dmFyIGI9dGhpcy5tYXAuZ2V0Q29udHJvbChhLl9wcmV2SGlnaGxpZ2h0ZXIpO2ImJmIuaGlnaGxpZ2h0KGEpfWVsc2UgdGhpcy51bmhpZ2hsaWdodChhKX1lbHNlIHRoaXMudW5zZWxlY3QoYSl9LGhpZ2hsaWdodDpmdW5jdGlvbihhKXt2YXIgYj1hLmxheWVyOyExIT09dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVmZWF0dXJlaGlnaGxpZ2h0ZWQiLHtmZWF0dXJlOmF9KSYmCihhLl9wcmV2SGlnaGxpZ2h0ZXI9YS5fbGFzdEhpZ2hsaWdodGVyLGEuX2xhc3RIaWdobGlnaHRlcj10aGlzLmlkLGIuZHJhd0ZlYXR1cmUoYSx0aGlzLnNlbGVjdFN0eWxlfHx0aGlzLnJlbmRlckludGVudCksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlaGlnaGxpZ2h0ZWQiLHtmZWF0dXJlOmF9KSl9LHVuaGlnaGxpZ2h0OmZ1bmN0aW9uKGEpe3ZhciBiPWEubGF5ZXI7dm9pZCAwPT1hLl9wcmV2SGlnaGxpZ2h0ZXI/ZGVsZXRlIGEuX2xhc3RIaWdobGlnaHRlcjooYS5fcHJldkhpZ2hsaWdodGVyIT10aGlzLmlkJiYoYS5fbGFzdEhpZ2hsaWdodGVyPWEuX3ByZXZIaWdobGlnaHRlciksZGVsZXRlIGEuX3ByZXZIaWdobGlnaHRlcik7Yi5kcmF3RmVhdHVyZShhLGEuc3R5bGV8fGEubGF5ZXIuc3R5bGV8fCJkZWZhdWx0Iik7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJldW5oaWdobGlnaHRlZCIse2ZlYXR1cmU6YX0pfSxzZWxlY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMub25CZWZvcmVTZWxlY3QuY2FsbCh0aGlzLnNjb3BlLGEpLGM9YS5sYXllcjshMSE9PWImJihiPWMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXNlbGVjdGVkIix7ZmVhdHVyZTphfSksITEhPT1iJiYoYy5zZWxlY3RlZEZlYXR1cmVzLnB1c2goYSksdGhpcy5oaWdobGlnaHQoYSksdGhpcy5oYW5kbGVycy5mZWF0dXJlLmxhc3RGZWF0dXJlfHwodGhpcy5oYW5kbGVycy5mZWF0dXJlLmxhc3RGZWF0dXJlPWMuc2VsZWN0ZWRGZWF0dXJlc1swXSksYy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc2VsZWN0ZWQiLHtmZWF0dXJlOmF9KSx0aGlzLm9uU2VsZWN0LmNhbGwodGhpcy5zY29wZSxhKSkpfSx1bnNlbGVjdDpmdW5jdGlvbihhKXt2YXIgYj1hLmxheWVyO3RoaXMudW5oaWdobGlnaHQoYSk7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0oYi5zZWxlY3RlZEZlYXR1cmVzLGEpO2IuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXVuc2VsZWN0ZWQiLAp7ZmVhdHVyZTphfSk7dGhpcy5vblVuc2VsZWN0LmNhbGwodGhpcy5zY29wZSxhKX0sc2VsZWN0Qm94OmZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kcyl7dmFyIGI9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKHt4OmEubGVmdCx5OmEuYm90dG9tfSk7YT10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoe3g6YS5yaWdodCx5OmEudG9wfSk7Yj1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYi5sb24sYi5sYXQsYS5sb24sYS5sYXQpO3RoaXMubXVsdGlwbGVTZWxlY3QoKXx8dGhpcy51bnNlbGVjdEFsbCgpO2E9dGhpcy5tdWx0aXBsZTt0aGlzLm11bHRpcGxlPSEwO3ZhciBjPXRoaXMubGF5ZXJzfHxbdGhpcy5sYXllcl07dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJib3hzZWxlY3Rpb25zdGFydCIse2xheWVyczpjfSk7Zm9yKHZhciBkLGU9MDtlPGMubGVuZ3RoOysrZSl7ZD1jW2VdO2Zvcih2YXIgZj0wLGc9ZC5mZWF0dXJlcy5sZW5ndGg7ZjxnOysrZil7dmFyIGg9CmQuZmVhdHVyZXNbZl07aC5nZXRWaXNpYmlsaXR5KCkmJihudWxsPT10aGlzLmdlb21ldHJ5VHlwZXN8fC0xPE9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuZ2VvbWV0cnlUeXBlcyxoLmdlb21ldHJ5LkNMQVNTX05BTUUpKSYmYi50b0dlb21ldHJ5KCkuaW50ZXJzZWN0cyhoLmdlb21ldHJ5KSYmLTE9PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGQuc2VsZWN0ZWRGZWF0dXJlcyxoKSYmdGhpcy5zZWxlY3QoaCl9fXRoaXMubXVsdGlwbGU9YTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJveHNlbGVjdGlvbmVuZCIse2xheWVyczpjfSl9fSxzZXRNYXA6ZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVycy5mZWF0dXJlLnNldE1hcChhKTt0aGlzLmJveCYmdGhpcy5oYW5kbGVycy5ib3guc2V0TWFwKGEpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2V0TGF5ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hY3RpdmU7dGhpcy51bnNlbGVjdEFsbCgpOwp0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmxheWVycyYmKHRoaXMubGF5ZXIuZGVzdHJveSgpLHRoaXMubGF5ZXJzPW51bGwpO3RoaXMuaW5pdExheWVyKGEpO3RoaXMuaGFuZGxlcnMuZmVhdHVyZS5sYXllcj10aGlzLmxheWVyO2ImJnRoaXMuYWN0aXZhdGUoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlNlbGVjdEZlYXR1cmUifSk7T3BlbkxheWVycy5IYW5kbGVyLlBvaW50PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtwb2ludDpudWxsLGxheWVyOm51bGwsbXVsdGk6ITEsY2l0ZUNvbXBsaWFudDohMSxtb3VzZURvd246ITEsc3RvcHBlZERvd246bnVsbCxsYXN0RG93bjpudWxsLGxhc3RVcDpudWxsLHBlcnNpc3Q6ITEsc3RvcERvd246ITEsc3RvcFVwOiExLGxheWVyT3B0aW9uczpudWxsLHBpeGVsVG9sZXJhbmNlOjUsbGFzdFRvdWNoUHg6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtjJiZjLmxheWVyT3B0aW9ucyYmYy5sYXllck9wdGlvbnMuc3R5bGVNYXB8fCh0aGlzLnN0eWxlPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZVsiZGVmYXVsdCJdLHt9KSk7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZighT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLAphcmd1bWVudHMpKXJldHVybiExO3ZhciBhPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe2Rpc3BsYXlJbkxheWVyU3dpdGNoZXI6ITEsY2FsY3VsYXRlSW5SYW5nZTpPcGVuTGF5ZXJzLkZ1bmN0aW9uLlRydWUsd3JhcERhdGVMaW5lOnRoaXMuY2l0ZUNvbXBsaWFudH0sdGhpcy5sYXllck9wdGlvbnMpO3RoaXMubGF5ZXI9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKHRoaXMuQ0xBU1NfTkFNRSxhKTt0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKTtyZXR1cm4hMH0sY3JlYXRlRmVhdHVyZTpmdW5jdGlvbihhKXthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLmxvbixhLmxhdCk7dGhpcy5wb2ludD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTt0aGlzLmNhbGxiYWNrKCJjcmVhdGUiLFt0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMucG9pbnRdKTt0aGlzLnBvaW50Lmdlb21ldHJ5LmNsZWFyQm91bmRzKCk7CnRoaXMubGF5ZXIuYWRkRmVhdHVyZXMoW3RoaXMucG9pbnRdLHtzaWxlbnQ6ITB9KX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKCFPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXJldHVybiExO3RoaXMuY2FuY2VsKCk7bnVsbCE9dGhpcy5sYXllci5tYXAmJih0aGlzLmRlc3Ryb3lGZWF0dXJlKCEwKSx0aGlzLmxheWVyLmRlc3Ryb3koITEpKTt0aGlzLmxheWVyPW51bGw7cmV0dXJuITB9LGRlc3Ryb3lGZWF0dXJlOmZ1bmN0aW9uKGEpeyF0aGlzLmxheWVyfHwhYSYmdGhpcy5wZXJzaXN0fHx0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcygpO3RoaXMucG9pbnQ9bnVsbH0sZGVzdHJveVBlcnNpc3RlZEZlYXR1cmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxheWVyO2EmJjE8YS5mZWF0dXJlcy5sZW5ndGgmJnRoaXMubGF5ZXIuZmVhdHVyZXNbMF0uZGVzdHJveSgpfSxmaW5hbGl6ZTpmdW5jdGlvbihhKXt0aGlzLm1vdXNlRG93bj0KITE7dGhpcy5sYXN0VG91Y2hQeD10aGlzLmxhc3RVcD10aGlzLmxhc3REb3duPW51bGw7dGhpcy5jYWxsYmFjayhhPyJjYW5jZWwiOiJkb25lIixbdGhpcy5nZW9tZXRyeUNsb25lKCldKTt0aGlzLmRlc3Ryb3lGZWF0dXJlKGEpfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmZpbmFsaXplKCEwKX0sY2xpY2s6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5zdG9wKGEpO3JldHVybiExfSxkYmxjbGljazpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSk7cmV0dXJuITF9LG1vZGlmeUZlYXR1cmU6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludHx8dGhpcy5jcmVhdGVGZWF0dXJlKGEpO2E9dGhpcy5sYXllci5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKTt0aGlzLnBvaW50Lmdlb21ldHJ5Lng9YS5sb247dGhpcy5wb2ludC5nZW9tZXRyeS55PWEubGF0O3RoaXMuY2FsbGJhY2soIm1vZGlmeSIsW3RoaXMucG9pbnQuZ2VvbWV0cnksdGhpcy5wb2ludCwhMV0pO3RoaXMucG9pbnQuZ2VvbWV0cnkuY2xlYXJCb3VuZHMoKTsKdGhpcy5kcmF3RmVhdHVyZSgpfSxkcmF3RmVhdHVyZTpmdW5jdGlvbigpe3RoaXMubGF5ZXIuZHJhd0ZlYXR1cmUodGhpcy5wb2ludCx0aGlzLnN0eWxlKX0sZ2V0R2VvbWV0cnk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBvaW50JiZ0aGlzLnBvaW50Lmdlb21ldHJ5O2EmJnRoaXMubXVsdGkmJihhPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQoW2FdKSk7cmV0dXJuIGF9LGdlb21ldHJ5Q2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEdlb21ldHJ5KCk7cmV0dXJuIGEmJmEuY2xvbmUoKX0sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRvd24oYSl9LHRvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydFRvdWNoKCk7dGhpcy5sYXN0VG91Y2hQeD1hLnh5O3JldHVybiB0aGlzLmRvd24oYSl9LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tb3ZlKGEpfSx0b3VjaG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5sYXN0VG91Y2hQeD1hLnh5OwpyZXR1cm4gdGhpcy5tb3ZlKGEpfSxtb3VzZXVwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnVwKGEpfSx0b3VjaGVuZDpmdW5jdGlvbihhKXthLnh5PXRoaXMubGFzdFRvdWNoUHg7cmV0dXJuIHRoaXMudXAoYSl9LGRvd246ZnVuY3Rpb24oYSl7dGhpcy5tb3VzZURvd249ITA7dGhpcy5sYXN0RG93bj1hLnh5O3RoaXMudG91Y2h8fHRoaXMubW9kaWZ5RmVhdHVyZShhLnh5KTt0aGlzLnN0b3BwZWREb3duPXRoaXMuc3RvcERvd247cmV0dXJuIXRoaXMuc3RvcERvd259LG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy50b3VjaHx8dGhpcy5tb3VzZURvd24mJiF0aGlzLnN0b3BwZWREb3dufHx0aGlzLm1vZGlmeUZlYXR1cmUoYS54eSk7cmV0dXJuITB9LHVwOmZ1bmN0aW9uKGEpe3RoaXMubW91c2VEb3duPSExO3RoaXMuc3RvcHBlZERvd249dGhpcy5zdG9wRG93bjtpZighdGhpcy5jaGVja01vZGlmaWVycyhhKXx8dGhpcy5sYXN0VXAmJnRoaXMubGFzdFVwLmVxdWFscyhhLnh5KXx8IXRoaXMubGFzdERvd258fAohdGhpcy5wYXNzZXNUb2xlcmFuY2UodGhpcy5sYXN0RG93bixhLnh5LHRoaXMucGl4ZWxUb2xlcmFuY2UpKXJldHVybiEwO3RoaXMudG91Y2gmJnRoaXMubW9kaWZ5RmVhdHVyZShhLnh5KTt0aGlzLnBlcnNpc3QmJnRoaXMuZGVzdHJveVBlcnNpc3RlZEZlYXR1cmUoKTt0aGlzLmxhc3RVcD1hLnh5O3RoaXMuZmluYWxpemUoKTtyZXR1cm4hdGhpcy5zdG9wVXB9LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQoYSx0aGlzLm1hcC52aWV3UG9ydERpdikmJih0aGlzLnN0b3BwZWREb3duPXRoaXMuc3RvcERvd24sdGhpcy5tb3VzZURvd249ITEpfSxwYXNzZXNUb2xlcmFuY2U6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSEwO251bGwhPWMmJmEmJmImJmEuZGlzdGFuY2VUbyhiKT5jJiYoZD0hMSk7cmV0dXJuIGR9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuSGFuZGxlci5Qb2ludCJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUGF0aD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlci5Qb2ludCx7bGluZTpudWxsLG1heFZlcnRpY2VzOm51bGwsZG91YmxlVG91Y2hUb2xlcmFuY2U6MjAsZnJlZWhhbmQ6ITEsZnJlZWhhbmRUb2dnbGU6InNoaWZ0S2V5Iix0aW1lcklkOm51bGwscmVkb1N0YWNrOm51bGwsY3JlYXRlRmVhdHVyZTpmdW5jdGlvbihhKXthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLmxvbixhLmxhdCk7dGhpcy5wb2ludD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTt0aGlzLmxpbmU9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhbdGhpcy5wb2ludC5nZW9tZXRyeV0pKTt0aGlzLmNhbGxiYWNrKCJjcmVhdGUiLFt0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMuZ2V0U2tldGNoKCldKTsKdGhpcy5wb2ludC5nZW9tZXRyeS5jbGVhckJvdW5kcygpO3RoaXMubGF5ZXIuYWRkRmVhdHVyZXMoW3RoaXMubGluZSx0aGlzLnBvaW50XSx7c2lsZW50OiEwfSl9LGRlc3Ryb3lGZWF0dXJlOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuSGFuZGxlci5Qb2ludC5wcm90b3R5cGUuZGVzdHJveUZlYXR1cmUuY2FsbCh0aGlzLGEpO3RoaXMubGluZT1udWxsfSxkZXN0cm95UGVyc2lzdGVkRmVhdHVyZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5ZXI7YSYmMjxhLmZlYXR1cmVzLmxlbmd0aCYmdGhpcy5sYXllci5mZWF0dXJlc1swXS5kZXN0cm95KCl9LHJlbW92ZVBvaW50OmZ1bmN0aW9uKCl7dGhpcy5wb2ludCYmdGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyhbdGhpcy5wb2ludF0pfSxhZGRQb2ludDpmdW5jdGlvbihhKXt0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKFt0aGlzLnBvaW50XSk7YT10aGlzLmxheWVyLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpO3RoaXMucG9pbnQ9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYS5sb24sCmEubGF0KSk7dGhpcy5saW5lLmdlb21ldHJ5LmFkZENvbXBvbmVudCh0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aCk7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5wb2ludF0pO3RoaXMuY2FsbGJhY2soInBvaW50IixbdGhpcy5wb2ludC5nZW9tZXRyeSx0aGlzLmdldEdlb21ldHJ5KCldKTt0aGlzLmNhbGxiYWNrKCJtb2RpZnkiLFt0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMuZ2V0U2tldGNoKCldKTt0aGlzLmRyYXdGZWF0dXJlKCk7ZGVsZXRlIHRoaXMucmVkb1N0YWNrfSxpbnNlcnRYWTpmdW5jdGlvbihhLGIpe3RoaXMubGluZS5nZW9tZXRyeS5hZGRDb21wb25lbnQobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYSxiKSx0aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCkpO3RoaXMuZHJhd0ZlYXR1cmUoKTtkZWxldGUgdGhpcy5yZWRvU3RhY2t9LGluc2VydERlbHRhWFk6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCktCjEsYz10aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50c1tjXTshY3x8KGlzTmFOKGMueCl8fGlzTmFOKGMueSkpfHx0aGlzLmluc2VydFhZKGMueCthLGMueStiKX0saW5zZXJ0RGlyZWN0aW9uTGVuZ3RoOmZ1bmN0aW9uKGEsYil7YSo9TWF0aC5QSS8xODA7dmFyIGM9YipNYXRoLmNvcyhhKSxkPWIqTWF0aC5zaW4oYSk7dGhpcy5pbnNlcnREZWx0YVhZKGMsZCl9LGluc2VydERlZmxlY3Rpb25MZW5ndGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCktMTtpZigwPGMpe3ZhciBkPXRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzW2NdLGM9dGhpcy5saW5lLmdlb21ldHJ5LmNvbXBvbmVudHNbYy0xXSxkPU1hdGguYXRhbjIoZC55LWMueSxkLngtYy54KTt0aGlzLmluc2VydERpcmVjdGlvbkxlbmd0aCgxODAqZC9NYXRoLlBJK2EsYil9fSxnZXRDdXJyZW50UG9pbnRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50cy5sZW5ndGgtCjF9LHVuZG86ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxpbmUuZ2VvbWV0cnksYj1hLmNvbXBvbmVudHMsYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCktMSxkPWJbY10sZT1hLnJlbW92ZUNvbXBvbmVudChkKTtlJiYodGhpcy50b3VjaCYmMDxjJiYoYj1hLmNvbXBvbmVudHMsYT1iW2MtMV0sYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCksYj1iW2NdLGIueD1hLngsYi55PWEueSksdGhpcy5yZWRvU3RhY2t8fCh0aGlzLnJlZG9TdGFjaz1bXSksdGhpcy5yZWRvU3RhY2sucHVzaChkKSx0aGlzLmRyYXdGZWF0dXJlKCkpO3JldHVybiBlfSxyZWRvOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWRvU3RhY2smJnRoaXMucmVkb1N0YWNrLnBvcCgpO2EmJih0aGlzLmxpbmUuZ2VvbWV0cnkuYWRkQ29tcG9uZW50KGEsdGhpcy5nZXRDdXJyZW50UG9pbnRJbmRleCgpKSx0aGlzLmRyYXdGZWF0dXJlKCkpO3JldHVybiEhYX0sZnJlZWhhbmRNb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZyZWVoYW5kVG9nZ2xlJiYKYVt0aGlzLmZyZWVoYW5kVG9nZ2xlXT8hdGhpcy5mcmVlaGFuZDp0aGlzLmZyZWVoYW5kfSxtb2RpZnlGZWF0dXJlOmZ1bmN0aW9uKGEsYil7dGhpcy5saW5lfHx0aGlzLmNyZWF0ZUZlYXR1cmUoYSk7dmFyIGM9dGhpcy5sYXllci5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKTt0aGlzLnBvaW50Lmdlb21ldHJ5Lng9Yy5sb247dGhpcy5wb2ludC5nZW9tZXRyeS55PWMubGF0O3RoaXMuY2FsbGJhY2soIm1vZGlmeSIsW3RoaXMucG9pbnQuZ2VvbWV0cnksdGhpcy5nZXRTa2V0Y2goKSxiXSk7dGhpcy5wb2ludC5nZW9tZXRyeS5jbGVhckJvdW5kcygpO3RoaXMuZHJhd0ZlYXR1cmUoKX0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oKXt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMubGluZSx0aGlzLnN0eWxlKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMucG9pbnQsdGhpcy5zdHlsZSl9LGdldFNrZXRjaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmV9LGdldEdlb21ldHJ5OmZ1bmN0aW9uKCl7dmFyIGE9CnRoaXMubGluZSYmdGhpcy5saW5lLmdlb21ldHJ5O2EmJnRoaXMubXVsdGkmJihhPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhbYV0pKTtyZXR1cm4gYX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXtpZih0aGlzLnRpbWVySWQmJnRoaXMucGFzc2VzVG9sZXJhbmNlKHRoaXMubGFzdFRvdWNoUHgsYS54eSx0aGlzLmRvdWJsZVRvdWNoVG9sZXJhbmNlKSlyZXR1cm4gdGhpcy5maW5pc2hHZW9tZXRyeSgpLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lcklkKSx0aGlzLnRpbWVySWQ9bnVsbCwhMTt0aGlzLnRpbWVySWQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCksdGhpcy50aW1lcklkPW51bGwpO3RoaXMudGltZXJJZD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXt0aGlzLnRpbWVySWQ9bnVsbH0sdGhpcyksMzAwKTtyZXR1cm4gT3BlbkxheWVycy5IYW5kbGVyLlBvaW50LnByb3RvdHlwZS50b3VjaHN0YXJ0LmNhbGwodGhpcywKYSl9LGRvd246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zdG9wRG93bjt0aGlzLmZyZWVoYW5kTW9kZShhKSYmKGI9ITAsdGhpcy50b3VjaCYmKHRoaXMubW9kaWZ5RmVhdHVyZShhLnh5LCEhdGhpcy5sYXN0VXApLE9wZW5MYXllcnMuRXZlbnQuc3RvcChhKSkpO3RoaXMudG91Y2h8fHRoaXMubGFzdERvd24mJnRoaXMucGFzc2VzVG9sZXJhbmNlKHRoaXMubGFzdERvd24sYS54eSx0aGlzLnBpeGVsVG9sZXJhbmNlKXx8dGhpcy5tb2RpZnlGZWF0dXJlKGEueHksISF0aGlzLmxhc3RVcCk7dGhpcy5tb3VzZURvd249ITA7dGhpcy5sYXN0RG93bj1hLnh5O3RoaXMuc3RvcHBlZERvd249YjtyZXR1cm4hYn0sbW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLnN0b3BwZWREb3duJiZ0aGlzLmZyZWVoYW5kTW9kZShhKSlyZXR1cm4gdGhpcy5wZXJzaXN0JiZ0aGlzLmRlc3Ryb3lQZXJzaXN0ZWRGZWF0dXJlKCksdGhpcy5tYXhWZXJ0aWNlcyYmdGhpcy5saW5lJiZ0aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50cy5sZW5ndGg9PT0KdGhpcy5tYXhWZXJ0aWNlcz8odGhpcy5yZW1vdmVQb2ludCgpLHRoaXMuZmluYWxpemUoKSk6dGhpcy5hZGRQb2ludChhLnh5KSwhMTt0aGlzLnRvdWNofHx0aGlzLm1vdXNlRG93biYmIXRoaXMuc3RvcHBlZERvd258fHRoaXMubW9kaWZ5RmVhdHVyZShhLnh5LCEhdGhpcy5sYXN0VXApO3JldHVybiEwfSx1cDpmdW5jdGlvbihhKXshdGhpcy5tb3VzZURvd258fHRoaXMubGFzdFVwJiZ0aGlzLmxhc3RVcC5lcXVhbHMoYS54eSl8fCh0aGlzLnN0b3BwZWREb3duJiZ0aGlzLmZyZWVoYW5kTW9kZShhKT8odGhpcy5wZXJzaXN0JiZ0aGlzLmRlc3Ryb3lQZXJzaXN0ZWRGZWF0dXJlKCksdGhpcy5yZW1vdmVQb2ludCgpLHRoaXMuZmluYWxpemUoKSk6dGhpcy5wYXNzZXNUb2xlcmFuY2UodGhpcy5sYXN0RG93bixhLnh5LHRoaXMucGl4ZWxUb2xlcmFuY2UpJiYodGhpcy50b3VjaCYmdGhpcy5tb2RpZnlGZWF0dXJlKGEueHkpLG51bGw9PXRoaXMubGFzdFVwJiZ0aGlzLnBlcnNpc3QmJnRoaXMuZGVzdHJveVBlcnNpc3RlZEZlYXR1cmUoKSwKdGhpcy5hZGRQb2ludChhLnh5KSx0aGlzLmxhc3RVcD1hLnh5LHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aD09PXRoaXMubWF4VmVydGljZXMrMSYmdGhpcy5maW5pc2hHZW9tZXRyeSgpKSk7dGhpcy5zdG9wcGVkRG93bj10aGlzLnN0b3BEb3duO3RoaXMubW91c2VEb3duPSExO3JldHVybiF0aGlzLnN0b3BVcH0sZmluaXNoR2VvbWV0cnk6ZnVuY3Rpb24oKXt0aGlzLmxpbmUuZ2VvbWV0cnkucmVtb3ZlQ29tcG9uZW50KHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzW3RoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aC0xXSk7dGhpcy5yZW1vdmVQb2ludCgpO3RoaXMuZmluYWxpemUoKX0sZGJsY2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5mcmVlaGFuZE1vZGUoYSl8fHRoaXMuZmluaXNoR2VvbWV0cnkoKTtyZXR1cm4hMX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLlBhdGgifSk7T3BlbkxheWVycy5Db250cm9sLkF0dHJpYnV0aW9uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtzZXBhcmF0b3I6IiwgIix0ZW1wbGF0ZToiJHtsYXllcnN9IixkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAuZXZlbnRzLnVuKHtyZW1vdmVsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLGFkZGxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sY2hhbmdlbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixjaGFuZ2ViYXNlbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixzY29wZTp0aGlzfSk7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZHJhdzpmdW5jdGlvbigpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5tYXAuZXZlbnRzLm9uKHtjaGFuZ2ViYXNlbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixjaGFuZ2VsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLAphZGRsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLHJlbW92ZWxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sc2NvcGU6dGhpc30pO3RoaXMudXBkYXRlQXR0cmlidXRpb24oKTtyZXR1cm4gdGhpcy5kaXZ9LHVwZGF0ZUF0dHJpYnV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9W107aWYodGhpcy5tYXAmJnRoaXMubWFwLmxheWVycyl7Zm9yKHZhciBiPTAsYz10aGlzLm1hcC5sYXllcnMubGVuZ3RoO2I8YztiKyspe3ZhciBkPXRoaXMubWFwLmxheWVyc1tiXTtkLmF0dHJpYnV0aW9uJiZkLmdldFZpc2liaWxpdHkoKSYmLTE9PT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihhLGQuYXR0cmlidXRpb24pJiZhLnB1c2goZC5hdHRyaWJ1dGlvbil9dGhpcy5kaXYuaW5uZXJIVE1MPU9wZW5MYXllcnMuU3RyaW5nLmZvcm1hdCh0aGlzLnRlbXBsYXRlLHtsYXllcnM6YS5qb2luKHRoaXMuc2VwYXJhdG9yKX0pfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLkF0dHJpYnV0aW9uIn0pO09wZW5MYXllcnMuS2luZXRpYz1PcGVuTGF5ZXJzLkNsYXNzKHt0aHJlc2hvbGQ6MCxkZWNlbGVyYXRpb246MC4wMDM1LG5iUG9pbnRzOjEwMCxkZWxheToyMDAscG9pbnRzOnZvaWQgMCx0aW1lcklkOnZvaWQgMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKX0sYmVnaW46ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkFuaW1hdGlvbi5zdG9wKHRoaXMudGltZXJJZCk7dGhpcy50aW1lcklkPXZvaWQgMDt0aGlzLnBvaW50cz1bXX0sdXBkYXRlOmZ1bmN0aW9uKGEpe3RoaXMucG9pbnRzLnVuc2hpZnQoe3h5OmEsdGljazoobmV3IERhdGUpLmdldFRpbWUoKX0pO3RoaXMucG9pbnRzLmxlbmd0aD50aGlzLm5iUG9pbnRzJiZ0aGlzLnBvaW50cy5wb3AoKX0sZW5kOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGQ9MCxlPXRoaXMucG9pbnRzLmxlbmd0aCxmO2Q8ZTtkKyspe2Y9dGhpcy5wb2ludHNbZF07aWYoYy0KZi50aWNrPnRoaXMuZGVsYXkpYnJlYWs7Yj1mfWlmKGImJihkPShuZXcgRGF0ZSkuZ2V0VGltZSgpLWIudGljayxjPU1hdGguc3FydChNYXRoLnBvdyhhLngtYi54eS54LDIpK01hdGgucG93KGEueS1iLnh5LnksMikpLGQ9Yy9kLCEoMD09ZHx8ZDx0aGlzLnRocmVzaG9sZCkpKXJldHVybiBjPU1hdGguYXNpbigoYS55LWIueHkueSkvYyksYi54eS54PD1hLngmJihjPU1hdGguUEktYykse3NwZWVkOmQsdGhldGE6Y319LG1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnNwZWVkLGQ9TWF0aC5jb3MoYS50aGV0YSksZT0tTWF0aC5zaW4oYS50aGV0YSksZj0obmV3IERhdGUpLmdldFRpbWUoKSxnPTAsaD0wO3RoaXMudGltZXJJZD1PcGVuTGF5ZXJzLkFuaW1hdGlvbi5zdGFydChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLnRpbWVySWQpe3ZhciBhPShuZXcgRGF0ZSkuZ2V0VGltZSgpLWYsbD0tdGhpcy5kZWNlbGVyYXRpb24qTWF0aC5wb3coYSwKMikvMitjKmEsbT1sKmQsbD1sKmUscCxuO3A9ITE7MD49LXRoaXMuZGVjZWxlcmF0aW9uKmErYyYmKE9wZW5MYXllcnMuQW5pbWF0aW9uLnN0b3AodGhpcy50aW1lcklkKSx0aGlzLnRpbWVySWQ9bnVsbCxwPSEwKTthPW0tZztuPWwtaDtnPW07aD1sO2IoYSxuLHApfX0sdGhpcykpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLktpbmV0aWMifSk7T3BlbkxheWVycy5MYXllci5XTVM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse0RFRkFVTFRfUEFSQU1TOntzZXJ2aWNlOiJXTVMiLHZlcnNpb246IjEuMS4xIixyZXF1ZXN0OiJHZXRNYXAiLHN0eWxlczoiIixmb3JtYXQ6ImltYWdlL2pwZWcifSxpc0Jhc2VMYXllcjohMCxlbmNvZGVCQk9YOiExLG5vTWFnaWM6ITEseXg6e30saW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXTtjPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYyk7MS4zPD1wYXJzZUZsb2F0KGMuVkVSU0lPTikmJiFjLkVYQ0VQVElPTlMmJihjLkVYQ0VQVElPTlM9IklOSU1BR0UiKTtlLnB1c2goYSxiLGMsZCk7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsZSk7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHModGhpcy5wYXJhbXMsT3BlbkxheWVycy5VdGlsLnVwcGVyQ2FzZU9iamVjdCh0aGlzLkRFRkFVTFRfUEFSQU1TKSk7CiF0aGlzLm5vTWFnaWMmJih0aGlzLnBhcmFtcy5UUkFOU1BBUkVOVCYmInRydWUiPT10aGlzLnBhcmFtcy5UUkFOU1BBUkVOVC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpJiYobnVsbCE9ZCYmZC5pc0Jhc2VMYXllcnx8KHRoaXMuaXNCYXNlTGF5ZXI9ITEpLCJpbWFnZS9qcGVnIj09dGhpcy5wYXJhbXMuRk9STUFUJiYodGhpcy5wYXJhbXMuRk9STUFUPU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2soKT8iaW1hZ2UvZ2lmIjoiaW1hZ2UvcG5nIikpfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5XTVModGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7cmV0dXJuIGE9T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLFthXSl9LHJldmVyc2VBeGlzT3JkZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb2plY3Rpb24uZ2V0Q29kZSgpO3JldHVybiAxLjM8PXBhcnNlRmxvYXQodGhpcy5wYXJhbXMuVkVSU0lPTikmJgohISh0aGlzLnl4W2FdfHxPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHNbYV0mJk9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1thXS55eCl9LGdldFVSTDpmdW5jdGlvbihhKXthPXRoaXMuYWRqdXN0Qm91bmRzKGEpO3ZhciBiPXRoaXMuZ2V0SW1hZ2VTaXplKCksYz17fSxkPXRoaXMucmV2ZXJzZUF4aXNPcmRlcigpO2MuQkJPWD10aGlzLmVuY29kZUJCT1g/YS50b0JCT1gobnVsbCxkKTphLnRvQXJyYXkoZCk7Yy5XSURUSD1iLnc7Yy5IRUlHSFQ9Yi5oO3JldHVybiB0aGlzLmdldEZ1bGxSZXF1ZXN0U3RyaW5nKGMpfSxtZXJnZU5ld1BhcmFtczpmdW5jdGlvbihhKXthPVtPcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGEpXTtyZXR1cm4gT3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5tZXJnZU5ld1BhcmFtcy5hcHBseSh0aGlzLGEpfSxnZXRGdWxsUmVxdWVzdFN0cmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSwKYz10aGlzLnByb2plY3Rpb24mJnRoaXMucHJvamVjdGlvbi5lcXVhbHMoYyk/dGhpcy5wcm9qZWN0aW9uLmdldENvZGUoKTpjLmdldENvZGUoKSxjPSJub25lIj09Yz9udWxsOmM7MS4zPD1wYXJzZUZsb2F0KHRoaXMucGFyYW1zLlZFUlNJT04pP3RoaXMucGFyYW1zLkNSUz1jOnRoaXMucGFyYW1zLlNSUz1jOyJib29sZWFuIj09dHlwZW9mIHRoaXMucGFyYW1zLlRSQU5TUEFSRU5UJiYoYS5UUkFOU1BBUkVOVD10aGlzLnBhcmFtcy5UUkFOU1BBUkVOVD8iVFJVRSI6IkZBTFNFIik7cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuZ2V0RnVsbFJlcXVlc3RTdHJpbmcuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLldNUyJ9KTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMse3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIseGxpbmtuczoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsTUFYX1BJWEVMOjE1RTMsdHJhbnNsYXRpb25QYXJhbWV0ZXJzOm51bGwsc3ltYm9sTWV0cmljczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5zdXBwb3J0ZWQoKSYmKE9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMudHJhbnNsYXRpb25QYXJhbWV0ZXJzPXt4OjAseTowfSx0aGlzLnN5bWJvbE1ldHJpY3M9e30pfSxzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24mJihkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJvcmcudzNjLnN2ZyIsIjEuMCIpfHxkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI1NWRyIsCiIxLjEiKXx8ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZSIsIjEuMSIpKX0saW5WYWxpZFJhbmdlOmZ1bmN0aW9uKGEsYixjKXthKz1jPzA6dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueDtiKz1jPzA6dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueTtyZXR1cm4gYT49LXRoaXMuTUFYX1BJWEVMJiZhPD10aGlzLk1BWF9QSVhFTCYmYj49LXRoaXMuTUFYX1BJWEVMJiZiPD10aGlzLk1BWF9QSVhFTH0sc2V0RXh0ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuc2V0RXh0ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9LWEubGVmdC9kLGQ9YS50b3AvZDtpZihiKXJldHVybiB0aGlzLmxlZnQ9ZSx0aGlzLnRvcD1kLHRoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsCiJ2aWV3Qm94IiwiMCAwICIrdGhpcy5zaXplLncrIiAiK3RoaXMuc2l6ZS5oKSx0aGlzLnRyYW5zbGF0ZSh0aGlzLnhPZmZzZXQsMCksITA7KGU9dGhpcy50cmFuc2xhdGUoZS10aGlzLmxlZnQrdGhpcy54T2Zmc2V0LGQtdGhpcy50b3ApKXx8dGhpcy5zZXRFeHRlbnQoYSwhMCk7cmV0dXJuIGMmJmV9LHRyYW5zbGF0ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMuaW5WYWxpZFJhbmdlKGEsYiwhMCkpe3ZhciBjPSIiO2lmKGF8fGIpYz0idHJhbnNsYXRlKCIrYSsiLCIrYisiKSI7dGhpcy5yb290LnNldEF0dHJpYnV0ZU5TKG51bGwsInRyYW5zZm9ybSIsYyk7dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnM9e3g6YSx5OmJ9O3JldHVybiEwfXJldHVybiExfSxzZXRTaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUmVuZGVyZXIucHJvdG90eXBlLnNldFNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIix0aGlzLnNpemUudyk7CnRoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsImhlaWdodCIsdGhpcy5zaXplLmgpfSxnZXROb2RlVHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7c3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6Yz1iLmV4dGVybmFsR3JhcGhpYz8iaW1hZ2UiOnRoaXMuaXNDb21wbGV4U3ltYm9sKGIuZ3JhcGhpY05hbWUpPyJzdmciOiJjaXJjbGUiO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUmVjdGFuZ2xlIjpjPSJyZWN0IjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOmM9InBvbHlsaW5lIjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciOmM9InBvbHlnb24iO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZSI6Yz0icGF0aCJ9cmV0dXJuIGN9LHNldFN0eWxlOmZ1bmN0aW9uKGEsCmIsYyl7Yj1ifHxhLl9zdHlsZTtjPWN8fGEuX29wdGlvbnM7dmFyIGQ9Yi50aXRsZXx8Yi5ncmFwaGljVGl0bGU7aWYoZCl7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0aXRsZSIsZCk7dmFyIGU9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGl0bGUiKTswPGUubGVuZ3RoP2VbMF0uZmlyc3RDaGlsZC50ZXh0Q29udGVudD1kOihlPXRoaXMubm9kZUZhY3RvcnkobnVsbCwidGl0bGUiKSxlLnRleHRDb250ZW50PWQsYS5hcHBlbmRDaGlsZChlKSl9dmFyIGU9cGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZU5TKG51bGwsInIiKSksZD0xLGY7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLl9nZW9tZXRyeUNsYXNzJiZlKXthLnN0eWxlLnZpc2liaWxpdHk9IiI7aWYoITE9PT1iLmdyYXBoaWMpYS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2Vsc2UgaWYoYi5leHRlcm5hbEdyYXBoaWMpe2Y9dGhpcy5nZXRQb3NpdGlvbihhKTtiLmdyYXBoaWNXaWR0aCYmYi5ncmFwaGljSGVpZ2h0JiYKYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwibm9uZSIpO3ZhciBlPWIuZ3JhcGhpY1dpZHRofHxiLmdyYXBoaWNIZWlnaHQsZz1iLmdyYXBoaWNIZWlnaHR8fGIuZ3JhcGhpY1dpZHRoLGU9ZT9lOjIqYi5wb2ludFJhZGl1cyxnPWc/ZzoyKmIucG9pbnRSYWRpdXMsaD12b2lkIDAhPWIuZ3JhcGhpY1lPZmZzZXQ/Yi5ncmFwaGljWU9mZnNldDotKDAuNSpnKSxrPWIuZ3JhcGhpY09wYWNpdHl8fGIuZmlsbE9wYWNpdHk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwoZi54Kyh2b2lkIDAhPWIuZ3JhcGhpY1hPZmZzZXQ/Yi5ncmFwaGljWE9mZnNldDotKDAuNSplKSkpLnRvRml4ZWQoKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IiwoZi55K2gpLnRvRml4ZWQoKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsZSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJoZWlnaHQiLGcpO2Euc2V0QXR0cmlidXRlTlModGhpcy54bGlua25zLCJ4bGluazpocmVmIiwKYi5leHRlcm5hbEdyYXBoaWMpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwic3R5bGUiLCJvcGFjaXR5OiAiK2spO2Eub25jbGljaz1PcGVuTGF5ZXJzLkV2ZW50LnByZXZlbnREZWZhdWx0fWVsc2UgaWYodGhpcy5pc0NvbXBsZXhTeW1ib2woYi5ncmFwaGljTmFtZSkpe3ZhciBlPTMqYi5wb2ludFJhZGl1cyxnPTIqZSxsPXRoaXMuaW1wb3J0U3ltYm9sKGIuZ3JhcGhpY05hbWUpO2Y9dGhpcy5nZXRQb3NpdGlvbihhKTtkPTMqdGhpcy5zeW1ib2xNZXRyaWNzW2wuaWRdWzBdL2c7aD1hLnBhcmVudE5vZGU7az1hLm5leHRTaWJsaW5nO2gmJmgucmVtb3ZlQ2hpbGQoYSk7YS5maXJzdENoaWxkJiZhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7YS5hcHBlbmRDaGlsZChsLmZpcnN0Q2hpbGQuY2xvbmVOb2RlKCEwKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ2aWV3Qm94IixsLmdldEF0dHJpYnV0ZU5TKG51bGwsInZpZXdCb3giKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsCmcpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IixnKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGYueC1lKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsInkiLGYueS1lKTtrP2guaW5zZXJ0QmVmb3JlKGEsayk6aCYmaC5hcHBlbmRDaGlsZChhKX1lbHNlIGEuc2V0QXR0cmlidXRlTlMobnVsbCwiciIsYi5wb2ludFJhZGl1cyk7ZT1iLnJvdGF0aW9uO3ZvaWQgMD09PWUmJnZvaWQgMD09PWEuX3JvdGF0aW9ufHwhZnx8KGEuX3JvdGF0aW9uPWUsZXw9MCwic3ZnIiE9PWEubm9kZU5hbWU/YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0cmFuc2Zvcm0iLCJyb3RhdGUoIitlKyIgIitmLngrIiAiK2YueSsiKSIpOihmPXRoaXMuc3ltYm9sTWV0cmljc1tsLmlkXSxhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlTlMobnVsbCwidHJhbnNmb3JtIiwicm90YXRlKCIrZSsiICIrZlsxXSsiICIrZlsyXSsiKSIpKSl9Yy5pc0ZpbGxlZD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIixiLmZpbGxDb2xvciksCmEuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1vcGFjaXR5IixiLmZpbGxPcGFjaXR5KSk6YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIiwibm9uZSIpO2MuaXNTdHJva2VkPyhhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZSIsYi5zdHJva2VDb2xvciksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2Utb3BhY2l0eSIsYi5zdHJva2VPcGFjaXR5KSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS13aWR0aCIsYi5zdHJva2VXaWR0aCpkKSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS1saW5lY2FwIixiLnN0cm9rZUxpbmVjYXB8fCJyb3VuZCIpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwic3Ryb2tlLWxpbmVqb2luIiwicm91bmQiKSxiLnN0cm9rZURhc2hzdHlsZSYmYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UtZGFzaGFycmF5Iix0aGlzLmRhc2hTdHlsZShiLGQpKSk6YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UiLCJub25lIik7Yi5wb2ludGVyRXZlbnRzJiYKYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwb2ludGVyLWV2ZW50cyIsYi5wb2ludGVyRXZlbnRzKTtudWxsIT1iLmN1cnNvciYmYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjdXJzb3IiLGIuY3Vyc29yKTtyZXR1cm4gYX0sZGFzaFN0eWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zdHJva2VXaWR0aCpiLGQ9YS5zdHJva2VEYXNoc3R5bGU7c3dpdGNoKGQpe2Nhc2UgInNvbGlkIjpyZXR1cm4ibm9uZSI7Y2FzZSAiZG90IjpyZXR1cm5bMSw0KmNdLmpvaW4oKTtjYXNlICJkYXNoIjpyZXR1cm5bNCpjLDQqY10uam9pbigpO2Nhc2UgImRhc2hkb3QiOnJldHVybls0KmMsNCpjLDEsNCpjXS5qb2luKCk7Y2FzZSAibG9uZ2Rhc2giOnJldHVybls4KmMsNCpjXS5qb2luKCk7Y2FzZSAibG9uZ2Rhc2hkb3QiOnJldHVybls4KmMsNCpjLDEsNCpjXS5qb2luKCk7ZGVmYXVsdDpyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcudHJpbShkKS5yZXBsYWNlKC9ccysvZywiLCIpfX0sY3JlYXRlTm9kZTpmdW5jdGlvbihhLApiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy54bWxucyxhKTtiJiZjLnNldEF0dHJpYnV0ZU5TKG51bGwsImlkIixiKTtyZXR1cm4gY30sbm9kZVR5cGVDb21wYXJlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9PWEubm9kZU5hbWV9LGNyZWF0ZVJlbmRlclJvb3Q6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkKyJfc3ZnUm9vdCIsInN2ZyIpO2Euc3R5bGUuZGlzcGxheT0iYmxvY2siO3JldHVybiBhfSxjcmVhdGVSb290OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkK2EsImciKX0sY3JlYXRlRGVmczpmdW5jdGlvbigpe3ZhciBhPXRoaXMubm9kZUZhY3RvcnkodGhpcy5jb250YWluZXIuaWQrIl9kZWZzIiwiZGVmcyIpO3RoaXMucmVuZGVyZXJSb290LmFwcGVuZENoaWxkKGEpO3JldHVybiBhfSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kcmF3Q2lyY2xlKGEsCmIsMSl9LGRyYXdDaXJjbGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9KGIueC10aGlzLmZlYXR1cmVEeCkvZCt0aGlzLmxlZnQ7Yj10aGlzLnRvcC1iLnkvZDtyZXR1cm4gdGhpcy5pblZhbGlkUmFuZ2UoZSxiKT8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIsZSksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIsYiksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJyIixjKSxhKTohMX0sZHJhd0xpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENvbXBvbmVudHNTdHJpbmcoYi5jb21wb25lbnRzKTtyZXR1cm4gYy5wYXRoPyhhLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50cyIsYy5wYXRoKSxjLmNvbXBsZXRlP2E6bnVsbCk6ITF9LGRyYXdMaW5lYXJSaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDb21wb25lbnRzU3RyaW5nKGIuY29tcG9uZW50cyk7cmV0dXJuIGMucGF0aD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLAoicG9pbnRzIixjLnBhdGgpLGMuY29tcGxldGU/YTpudWxsKTohMX0sZHJhd1BvbHlnb246ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9IiIsZD0hMCxlPSEwLGYsZyxoPTAsaz1iLmNvbXBvbmVudHMubGVuZ3RoO2g8aztoKyspYys9IiBNIixmPXRoaXMuZ2V0Q29tcG9uZW50c1N0cmluZyhiLmNvbXBvbmVudHNbaF0uY29tcG9uZW50cywiICIpLChnPWYucGF0aCk/KGMrPSIgIitnLGU9Zi5jb21wbGV0ZSYmZSk6ZD0hMTtyZXR1cm4gZD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJkIixjKyIgeiIpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1ydWxlIiwiZXZlbm9kZCIpLGU/YTpudWxsKTohMX0sZHJhd1JlY3RhbmdsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9KGIueC10aGlzLmZlYXR1cmVEeCkvYyt0aGlzLmxlZnQsZT10aGlzLnRvcC1iLnkvYztyZXR1cm4gdGhpcy5pblZhbGlkUmFuZ2UoZCxlKT8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwKZCksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IixlKSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIixiLndpZHRoL2MpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IixiLmhlaWdodC9jKSxhKTohMX0sZHJhd1RleHQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSEhYi5sYWJlbE91dGxpbmVXaWR0aDtpZihkKXt2YXIgZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO2UuZm9udENvbG9yPWUubGFiZWxPdXRsaW5lQ29sb3I7ZS5mb250U3Ryb2tlQ29sb3I9ZS5sYWJlbE91dGxpbmVDb2xvcjtlLmZvbnRTdHJva2VXaWR0aD1iLmxhYmVsT3V0bGluZVdpZHRoO2IubGFiZWxPdXRsaW5lT3BhY2l0eSYmKGUuZm9udE9wYWNpdHk9Yi5sYWJlbE91dGxpbmVPcGFjaXR5KTtkZWxldGUgZS5sYWJlbE91dGxpbmVXaWR0aDt0aGlzLmRyYXdUZXh0KGEsZSxjKX12YXIgZj10aGlzLmdldFJlc29sdXRpb24oKSxlPShjLngtdGhpcy5mZWF0dXJlRHgpL2YrdGhpcy5sZWZ0LGc9Yy55LwpmLXRoaXMudG9wLGQ9ZD90aGlzLkxBQkVMX09VVExJTkVfU1VGRklYOnRoaXMuTEFCRUxfSURfU1VGRklYLGY9dGhpcy5ub2RlRmFjdG9yeShhK2QsInRleHQiKTtmLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGUpO2Yuc2V0QXR0cmlidXRlTlMobnVsbCwieSIsLWcpO2IuZm9udENvbG9yJiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsImZpbGwiLGIuZm9udENvbG9yKTtiLmZvbnRTdHJva2VDb2xvciYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UiLGIuZm9udFN0cm9rZUNvbG9yKTtiLmZvbnRTdHJva2VXaWR0aCYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2Utd2lkdGgiLGIuZm9udFN0cm9rZVdpZHRoKTtiLmZvbnRPcGFjaXR5JiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsIm9wYWNpdHkiLGIuZm9udE9wYWNpdHkpO2IuZm9udEZhbWlseSYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LWZhbWlseSIsYi5mb250RmFtaWx5KTtiLmZvbnRTaXplJiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsCiJmb250LXNpemUiLGIuZm9udFNpemUpO2IuZm9udFdlaWdodCYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXdlaWdodCIsYi5mb250V2VpZ2h0KTtiLmZvbnRTdHlsZSYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXN0eWxlIixiLmZvbnRTdHlsZSk7ITA9PT1iLmxhYmVsU2VsZWN0PyhmLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50ZXItZXZlbnRzIiwidmlzaWJsZSIpLGYuX2ZlYXR1cmVJZD1hKTpmLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50ZXItZXZlbnRzIiwibm9uZSIpO2c9Yi5sYWJlbEFsaWdufHxPcGVuTGF5ZXJzLlJlbmRlcmVyLmRlZmF1bHRTeW1ib2xpemVyLmxhYmVsQWxpZ247Zi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0ZXh0LWFuY2hvciIsT3BlbkxheWVycy5SZW5kZXJlci5TVkcuTEFCRUxfQUxJR05bZ1swXV18fCJtaWRkbGUiKTshMD09PU9wZW5MYXllcnMuSVNfR0VDS08mJmYuc2V0QXR0cmlidXRlTlMobnVsbCwiZG9taW5hbnQtYmFzZWxpbmUiLApPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9BTElHTltnWzFdXXx8ImNlbnRyYWwiKTtmb3IodmFyIGg9Yi5sYWJlbC5zcGxpdCgiXG4iKSxrPWgubGVuZ3RoO2YuY2hpbGROb2Rlcy5sZW5ndGg+azspZi5yZW1vdmVDaGlsZChmLmxhc3RDaGlsZCk7Zm9yKHZhciBsPTA7bDxrO2wrKyl7dmFyIG09dGhpcy5ub2RlRmFjdG9yeShhK2QrIl90c3Bhbl8iK2wsInRzcGFuIik7ITA9PT1iLmxhYmVsU2VsZWN0JiYobS5fZmVhdHVyZUlkPWEsbS5fZ2VvbWV0cnk9YyxtLl9nZW9tZXRyeUNsYXNzPWMuQ0xBU1NfTkFNRSk7ITE9PT1PcGVuTGF5ZXJzLklTX0dFQ0tPJiZtLnNldEF0dHJpYnV0ZU5TKG51bGwsImJhc2VsaW5lLXNoaWZ0IixPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WU0hJRlRbZ1sxXV18fCItMzUlIik7bS5zZXRBdHRyaWJ1dGUoIngiLGUpO2lmKDA9PWwpe3ZhciBwPU9wZW5MYXllcnMuUmVuZGVyZXIuU1ZHLkxBQkVMX1ZGQUNUT1JbZ1sxXV07bnVsbD09cCYmCihwPS0wLjUpO20uc2V0QXR0cmlidXRlKCJkeSIscCooay0xKSsiZW0iKX1lbHNlIG0uc2V0QXR0cmlidXRlKCJkeSIsIjFlbSIpO20udGV4dENvbnRlbnQ9IiI9PT1oW2xdPyIgIjpoW2xdO20ucGFyZW50Tm9kZXx8Zi5hcHBlbmRDaGlsZChtKX1mLnBhcmVudE5vZGV8fHRoaXMudGV4dFJvb3QuYXBwZW5kQ2hpbGQoZil9LGdldENvbXBvbmVudHNTdHJpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W10sZD0hMCxlPWEubGVuZ3RoLGY9W10sZyxoPTA7aDxlO2grKylnPWFbaF0sYy5wdXNoKGcpLChnPXRoaXMuZ2V0U2hvcnRTdHJpbmcoZykpP2YucHVzaChnKTooMDxoJiZ0aGlzLmdldFNob3J0U3RyaW5nKGFbaC0xXSkmJmYucHVzaCh0aGlzLmNsaXBMaW5lKGFbaF0sYVtoLTFdKSksaDxlLTEmJnRoaXMuZ2V0U2hvcnRTdHJpbmcoYVtoKzFdKSYmZi5wdXNoKHRoaXMuY2xpcExpbmUoYVtoXSxhW2grMV0pKSxkPSExKTtyZXR1cm57cGF0aDpmLmpvaW4oYnx8IiwiKSxjb21wbGV0ZTpkfX0sCmNsaXBMaW5lOmZ1bmN0aW9uKGEsYil7aWYoYi5lcXVhbHMoYSkpcmV0dXJuIiI7dmFyIGM9dGhpcy5nZXRSZXNvbHV0aW9uKCksZD10aGlzLk1BWF9QSVhFTC10aGlzLnRyYW5zbGF0aW9uUGFyYW1ldGVycy54LGU9dGhpcy5NQVhfUElYRUwtdGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueSxmPShiLngtdGhpcy5mZWF0dXJlRHgpL2MrdGhpcy5sZWZ0LGc9dGhpcy50b3AtYi55L2MsaD0oYS54LXRoaXMuZmVhdHVyZUR4KS9jK3RoaXMubGVmdCxjPXRoaXMudG9wLWEueS9jLGs7aWYoaDwtZHx8aD5kKWs9KGMtZykvKGgtZiksaD0wPmg/LWQ6ZCxjPWcrKGgtZikqaztpZihjPC1lfHxjPmUpaz0oaC1mKS8oYy1nKSxjPTA+Yz8tZTplLGg9ZisoYy1nKSprO3JldHVybiBoKyIsIitjfSxnZXRTaG9ydFN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFJlc29sdXRpb24oKSxjPShhLngtdGhpcy5mZWF0dXJlRHgpL2IrdGhpcy5sZWZ0O2E9dGhpcy50b3AtYS55L2I7cmV0dXJuIHRoaXMuaW5WYWxpZFJhbmdlKGMsCmEpP2MrIiwiK2E6ITF9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybnt4OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIpKSx5OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIpKX19LGltcG9ydFN5bWJvbDpmdW5jdGlvbihhKXt0aGlzLmRlZnN8fCh0aGlzLmRlZnM9dGhpcy5jcmVhdGVEZWZzKCkpO3ZhciBiPXRoaXMuY29udGFpbmVyLmlkKyItIithLGM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYik7aWYobnVsbCE9YylyZXR1cm4gYzt2YXIgZD1PcGVuTGF5ZXJzLlJlbmRlcmVyLnN5bWJvbFthXTtpZighZCl0aHJvdyBFcnJvcihhKyIgaXMgbm90IGEgdmFsaWQgc3ltYm9sIG5hbWUiKTthPXRoaXMubm9kZUZhY3RvcnkoYiwic3ltYm9sIik7dmFyIGU9dGhpcy5ub2RlRmFjdG9yeShudWxsLCJwb2x5Z29uIik7YS5hcHBlbmRDaGlsZChlKTtmb3IodmFyIGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKE51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1BWF9WQUxVRSwKMCwwKSxmPVtdLGcsaCxrPTA7azxkLmxlbmd0aDtrKz0yKWc9ZFtrXSxoPWRbaysxXSxjLmxlZnQ9TWF0aC5taW4oYy5sZWZ0LGcpLGMuYm90dG9tPU1hdGgubWluKGMuYm90dG9tLGgpLGMucmlnaHQ9TWF0aC5tYXgoYy5yaWdodCxnKSxjLnRvcD1NYXRoLm1heChjLnRvcCxoKSxmLnB1c2goZywiLCIsaCk7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwb2ludHMiLGYuam9pbigiICIpKTtkPWMuZ2V0V2lkdGgoKTtlPWMuZ2V0SGVpZ2h0KCk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ2aWV3Qm94IixbYy5sZWZ0LWQsYy5ib3R0b20tZSwzKmQsMyplXS5qb2luKCIgIikpO3RoaXMuc3ltYm9sTWV0cmljc1tiXT1bTWF0aC5tYXgoZCxlKSxjLmdldENlbnRlckxvbkxhdCgpLmxvbixjLmdldENlbnRlckxvbkxhdCgpLmxhdF07dGhpcy5kZWZzLmFwcGVuZENoaWxkKGEpO3JldHVybiBhfSxnZXRGZWF0dXJlSWRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuZ2V0RmVhdHVyZUlkRnJvbUV2ZW50LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7Ynx8KGI9YS50YXJnZXQsYj1iLnBhcmVudE5vZGUmJmIhPXRoaXMucmVuZGVyZXJSb290P2IucGFyZW50Tm9kZS5fZmVhdHVyZUlkOnZvaWQgMCk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUmVuZGVyZXIuU1ZHIn0pO09wZW5MYXllcnMuUmVuZGVyZXIuU1ZHLkxBQkVMX0FMSUdOPXtsOiJzdGFydCIscjoiZW5kIixiOiJib3R0b20iLHQ6ImhhbmdpbmcifTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WU0hJRlQ9e3Q6Ii03MCUiLGI6IjAifTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WRkFDVE9SPXt0OjAsYjotMX07T3BlbkxheWVycy5SZW5kZXJlci5TVkcucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKX07T3BlbkxheWVycy5Gb3JtYXQuSlNPTj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LHtpbmRlbnQ6IiAgICAiLHNwYWNlOiIgIixuZXdsaW5lOiJcbiIsbGV2ZWw6MCxwcmV0dHk6ITEsbmF0aXZlSlNPTjpmdW5jdGlvbigpe3JldHVybiEoIXdpbmRvdy5KU09OfHwiZnVuY3Rpb24iIT10eXBlb2YgSlNPTi5wYXJzZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIEpTT04uc3RyaW5naWZ5KX0oKSxyZWFkOmZ1bmN0aW9uKGEsYil7dmFyIGM7aWYodGhpcy5uYXRpdmVKU09OKWM9SlNPTi5wYXJzZShhLGIpO2Vsc2UgdHJ5e2lmKC9eW1xdLDp7fVxzXSokLy50ZXN0KGEucmVwbGFjZSgvXFxbIlxcXC9iZm5ydHVdL2csIkAiKS5yZXBsYWNlKC8iW14iXFxcblxyXSoifHRydWV8ZmFsc2V8bnVsbHwtP1xkKyg/OlwuXGQqKT8oPzpbZUVdWytcLV0/XGQrKT8vZywiXSIpLnJlcGxhY2UoLyg/Ol58OnwsKSg/OlxzKlxbKSsvZywiIikpJiYoYz1ldmFsKCIoIithKyIpIiksImZ1bmN0aW9uIj09PQp0eXBlb2YgYikpe3ZhciBkPWZ1bmN0aW9uKGEsYyl7aWYoYyYmIm9iamVjdCI9PT10eXBlb2YgYylmb3IodmFyIGUgaW4gYyljLmhhc093blByb3BlcnR5KGUpJiYoY1tlXT1kKGUsY1tlXSkpO3JldHVybiBiKGEsYyl9O2M9ZCgiIixjKX19Y2F0Y2goZSl7fXRoaXMua2VlcERhdGEmJih0aGlzLmRhdGE9Yyk7cmV0dXJuIGN9LHdyaXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5wcmV0dHk9ISFiO3ZhciBjPW51bGwsZD10eXBlb2YgYTtpZih0aGlzLnNlcmlhbGl6ZVtkXSl0cnl7Yz0hdGhpcy5wcmV0dHkmJnRoaXMubmF0aXZlSlNPTj9KU09OLnN0cmluZ2lmeShhKTp0aGlzLnNlcmlhbGl6ZVtkXS5hcHBseSh0aGlzLFthXSl9Y2F0Y2goZSl7T3BlbkxheWVycy5Db25zb2xlLmVycm9yKCJUcm91YmxlIHNlcmlhbGl6aW5nOiAiK2UpfXJldHVybiBjfSx3cml0ZUluZGVudDpmdW5jdGlvbigpe3ZhciBhPVtdO2lmKHRoaXMucHJldHR5KWZvcih2YXIgYj0wO2I8dGhpcy5sZXZlbDsrK2IpYS5wdXNoKHRoaXMuaW5kZW50KTsKcmV0dXJuIGEuam9pbigiIil9LHdyaXRlTmV3bGluZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXR0eT90aGlzLm5ld2xpbmU6IiJ9LHdyaXRlU3BhY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV0dHk/dGhpcy5zcGFjZToiIn0sc2VyaWFsaXplOntvYmplY3Q6ZnVuY3Rpb24oYSl7aWYobnVsbD09YSlyZXR1cm4ibnVsbCI7aWYoYS5jb25zdHJ1Y3Rvcj09RGF0ZSlyZXR1cm4gdGhpcy5zZXJpYWxpemUuZGF0ZS5hcHBseSh0aGlzLFthXSk7aWYoYS5jb25zdHJ1Y3Rvcj09QXJyYXkpcmV0dXJuIHRoaXMuc2VyaWFsaXplLmFycmF5LmFwcGx5KHRoaXMsW2FdKTt2YXIgYj1bInsiXTt0aGlzLmxldmVsKz0xO3ZhciBjLGQsZSxmPSExO2ZvcihjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmKGQ9T3BlbkxheWVycy5Gb3JtYXQuSlNPTi5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbYyx0aGlzLnByZXR0eV0pLGU9T3BlbkxheWVycy5Gb3JtYXQuSlNPTi5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcywKW2FbY10sdGhpcy5wcmV0dHldKSxudWxsIT1kJiZudWxsIT1lJiYoZiYmYi5wdXNoKCIsIiksYi5wdXNoKHRoaXMud3JpdGVOZXdsaW5lKCksdGhpcy53cml0ZUluZGVudCgpLGQsIjoiLHRoaXMud3JpdGVTcGFjZSgpLGUpLGY9ITApKTt0aGlzLmxldmVsLT0xO2IucHVzaCh0aGlzLndyaXRlTmV3bGluZSgpLHRoaXMud3JpdGVJbmRlbnQoKSwifSIpO3JldHVybiBiLmpvaW4oIiIpfSxhcnJheTpmdW5jdGlvbihhKXt2YXIgYixjPVsiWyJdO3RoaXMubGV2ZWwrPTE7Zm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7KytkKWI9T3BlbkxheWVycy5Gb3JtYXQuSlNPTi5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbYVtkXSx0aGlzLnByZXR0eV0pLG51bGwhPWImJigwPGQmJmMucHVzaCgiLCIpLGMucHVzaCh0aGlzLndyaXRlTmV3bGluZSgpLHRoaXMud3JpdGVJbmRlbnQoKSxiKSk7dGhpcy5sZXZlbC09MTtjLnB1c2godGhpcy53cml0ZU5ld2xpbmUoKSx0aGlzLndyaXRlSW5kZW50KCksCiJdIik7cmV0dXJuIGMuam9pbigiIil9LHN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj17IlxiIjoiXFxiIiwiXHQiOiJcXHQiLCJcbiI6IlxcbiIsIlxmIjoiXFxmIiwiXHIiOiJcXHIiLCciJzonXFwiJywiXFwiOiJcXFxcIn07cmV0dXJuL1siXFxceDAwLVx4MWZdLy50ZXN0KGEpPyciJythLnJlcGxhY2UoLyhbXHgwMC1ceDFmXFwiXSkvZyxmdW5jdGlvbihhLGQpe3ZhciBlPWJbZF07aWYoZSlyZXR1cm4gZTtlPWQuY2hhckNvZGVBdCgpO3JldHVybiJcXHUwMCIrTWF0aC5mbG9vcihlLzE2KS50b1N0cmluZygxNikrKGUlMTYpLnRvU3RyaW5nKDE2KX0pKyciJzonIicrYSsnIid9LG51bWJlcjpmdW5jdGlvbihhKXtyZXR1cm4gaXNGaW5pdGUoYSk/U3RyaW5nKGEpOiJudWxsIn0sImJvb2xlYW4iOmZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcoYSl9LGRhdGU6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gMTA+YT8iMCIrYTphfXJldHVybiciJythLmdldEZ1bGxZZWFyKCkrCiItIitiKGEuZ2V0TW9udGgoKSsxKSsiLSIrYihhLmdldERhdGUoKSkrIlQiK2IoYS5nZXRIb3VycygpKSsiOiIrYihhLmdldE1pbnV0ZXMoKSkrIjoiK2IoYS5nZXRTZWNvbmRzKCkpKyciJ319LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkpTT04ifSk7T3BlbkxheWVycy5Gb3JtYXQuR2VvSlNPTj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LkpTT04se2lnbm9yZUV4dHJhRGltczohMSxyZWFkOmZ1bmN0aW9uKGEsYixjKXtiPWI/YjoiRmVhdHVyZUNvbGxlY3Rpb24iO3ZhciBkPW51bGwsZT1udWxsLGU9InN0cmluZyI9PXR5cGVvZiBhP09wZW5MYXllcnMuRm9ybWF0LkpTT04ucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYSxjXSk6YTtpZighZSlPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoIkJhZCBKU09OOiAiK2EpO2Vsc2UgaWYoInN0cmluZyIhPXR5cGVvZiBlLnR5cGUpT3BlbkxheWVycy5Db25zb2xlLmVycm9yKCJCYWQgR2VvSlNPTiAtIG5vIHR5cGU6ICIrYSk7ZWxzZSBpZih0aGlzLmlzVmFsaWRUeXBlKGUsYikpc3dpdGNoKGIpe2Nhc2UgIkdlb21ldHJ5Ijp0cnl7ZD10aGlzLnBhcnNlR2VvbWV0cnkoZSl9Y2F0Y2goZil7T3BlbkxheWVycy5Db25zb2xlLmVycm9yKGYpfWJyZWFrO2Nhc2UgIkZlYXR1cmUiOnRyeXtkPQp0aGlzLnBhcnNlRmVhdHVyZShlKSxkLnR5cGU9IkZlYXR1cmUifWNhdGNoKGcpe09wZW5MYXllcnMuQ29uc29sZS5lcnJvcihnKX1icmVhaztjYXNlICJGZWF0dXJlQ29sbGVjdGlvbiI6c3dpdGNoKGQ9W10sZS50eXBlKXtjYXNlICJGZWF0dXJlIjp0cnl7ZC5wdXNoKHRoaXMucGFyc2VGZWF0dXJlKGUpKX1jYXRjaChoKXtkPW51bGwsT3BlbkxheWVycy5Db25zb2xlLmVycm9yKGgpfWJyZWFrO2Nhc2UgIkZlYXR1cmVDb2xsZWN0aW9uIjphPTA7Zm9yKGI9ZS5mZWF0dXJlcy5sZW5ndGg7YTxiOysrYSl0cnl7ZC5wdXNoKHRoaXMucGFyc2VGZWF0dXJlKGUuZmVhdHVyZXNbYV0pKX1jYXRjaChrKXtkPW51bGwsT3BlbkxheWVycy5Db25zb2xlLmVycm9yKGspfWJyZWFrO2RlZmF1bHQ6dHJ5e3ZhciBsPXRoaXMucGFyc2VHZW9tZXRyeShlKTtkLnB1c2gobmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobCkpfWNhdGNoKG0pe2Q9bnVsbCxPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IobSl9fX1yZXR1cm4gZH0sCmlzVmFsaWRUeXBlOmZ1bmN0aW9uKGEsYil7dmFyIGM9ITE7c3dpdGNoKGIpe2Nhc2UgIkdlb21ldHJ5IjotMT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YoIlBvaW50IE11bHRpUG9pbnQgTGluZVN0cmluZyBNdWx0aUxpbmVTdHJpbmcgUG9seWdvbiBNdWx0aVBvbHlnb24gQm94IEdlb21ldHJ5Q29sbGVjdGlvbiIuc3BsaXQoIiAiKSxhLnR5cGUpP09wZW5MYXllcnMuQ29uc29sZS5lcnJvcigiVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogIithLnR5cGUpOmM9ITA7YnJlYWs7Y2FzZSAiRmVhdHVyZUNvbGxlY3Rpb24iOmM9ITA7YnJlYWs7ZGVmYXVsdDphLnR5cGU9PWI/Yz0hMDpPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoIkNhbm5vdCBjb252ZXJ0IHR5cGVzIGZyb20gIithLnR5cGUrIiB0byAiK2IpfXJldHVybiBjfSxwYXJzZUZlYXR1cmU6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkO2M9YS5wcm9wZXJ0aWVzP2EucHJvcGVydGllczp7fTtkPWEuZ2VvbWV0cnkmJmEuZ2VvbWV0cnkuYmJveHx8CmEuYmJveDt0cnl7Yj10aGlzLnBhcnNlR2VvbWV0cnkoYS5nZW9tZXRyeSl9Y2F0Y2goZSl7dGhyb3cgZTt9Yj1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihiLGMpO2QmJihiLmJvdW5kcz1PcGVuTGF5ZXJzLkJvdW5kcy5mcm9tQXJyYXkoZCkpO2EuaWQmJihiLmZpZD1hLmlkKTtyZXR1cm4gYn0scGFyc2VHZW9tZXRyeTpmdW5jdGlvbihhKXtpZihudWxsPT1hKXJldHVybiBudWxsO3ZhciBiLGM9ITE7aWYoIkdlb21ldHJ5Q29sbGVjdGlvbiI9PWEudHlwZSl7aWYoIU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEuZ2VvbWV0cmllcykpdGhyb3ciR2VvbWV0cnlDb2xsZWN0aW9uIG11c3QgaGF2ZSBnZW9tZXRyaWVzIGFycmF5OiAiK2E7Yj1hLmdlb21ldHJpZXMubGVuZ3RoO2Zvcih2YXIgYz1BcnJheShiKSxkPTA7ZDxiOysrZCljW2RdPXRoaXMucGFyc2VHZW9tZXRyeS5hcHBseSh0aGlzLFthLmdlb21ldHJpZXNbZF1dKTtiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24oYyk7CmM9ITB9ZWxzZXtpZighT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYS5jb29yZGluYXRlcykpdGhyb3ciR2VvbWV0cnkgbXVzdCBoYXZlIGNvb3JkaW5hdGVzIGFycmF5OiAiK2E7aWYoIXRoaXMucGFyc2VDb29yZHNbYS50eXBlLnRvTG93ZXJDYXNlKCldKXRocm93IlVuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6ICIrYS50eXBlO3RyeXtiPXRoaXMucGFyc2VDb29yZHNbYS50eXBlLnRvTG93ZXJDYXNlKCldLmFwcGx5KHRoaXMsW2EuY29vcmRpbmF0ZXNdKX1jYXRjaChlKXt0aHJvdyBlO319dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJih0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmIWMpJiZiLnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7cmV0dXJuIGJ9LHBhcnNlQ29vcmRzOntwb2ludDpmdW5jdGlvbihhKXtpZighMT09dGhpcy5pZ25vcmVFeHRyYURpbXMmJjIhPWEubGVuZ3RoKXRocm93Ik9ubHkgMkQgcG9pbnRzIGFyZSBzdXBwb3J0ZWQ6ICIrCmE7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGFbMF0sYVsxXSl9LG11bHRpcG9pbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9bnVsbCxkPTAsZT1hLmxlbmd0aDtkPGU7KytkKXt0cnl7Yz10aGlzLnBhcnNlQ29vcmRzLnBvaW50LmFwcGx5KHRoaXMsW2FbZF1dKX1jYXRjaChmKXt0aHJvdyBmO31iLnB1c2goYyl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQoYil9LGxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9bnVsbCxkPTAsZT1hLmxlbmd0aDtkPGU7KytkKXt0cnl7Yz10aGlzLnBhcnNlQ29vcmRzLnBvaW50LmFwcGx5KHRoaXMsW2FbZF1dKX1jYXRjaChmKXt0aHJvdyBmO31iLnB1c2goYyl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoYil9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1udWxsLGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2Qpe3RyeXtjPQp0aGlzLnBhcnNlQ29vcmRzLmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYVtkXV0pfWNhdGNoKGYpe3Rocm93IGY7fWIucHVzaChjKX1yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKGIpfSxwb2x5Z29uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjLGQsZT0wLGY9YS5sZW5ndGg7ZTxmOysrZSl7dHJ5e2Q9dGhpcy5wYXJzZUNvb3Jkcy5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2FbZV1dKX1jYXRjaChnKXt0aHJvdyBnO31jPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcoZC5jb21wb25lbnRzKTtiLnB1c2goYyl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24oYil9LG11bHRpcG9seWdvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1udWxsLGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2Qpe3RyeXtjPXRoaXMucGFyc2VDb29yZHMucG9seWdvbi5hcHBseSh0aGlzLFthW2RdXSl9Y2F0Y2goZil7dGhyb3cgZjt9Yi5wdXNoKGMpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24oYil9LApib3g6ZnVuY3Rpb24oYSl7aWYoMiE9YS5sZW5ndGgpdGhyb3ciR2VvSlNPTiBib3ggY29vcmRpbmF0ZXMgbXVzdCBoYXZlIDIgZWxlbWVudHMiO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzBdWzBdLGFbMF1bMV0pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGFbMV1bMF0sYVswXVsxXSksbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVsxXVswXSxhWzFdWzFdKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzBdWzBdLGFbMV1bMV0pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGFbMF1bMF0sYVswXVsxXSldKV0pfX0sd3JpdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17dHlwZTpudWxsfTtpZihPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKSl7Yy50eXBlPSJGZWF0dXJlQ29sbGVjdGlvbiI7dmFyIGQ9CmEubGVuZ3RoO2MuZmVhdHVyZXM9QXJyYXkoZCk7Zm9yKHZhciBlPTA7ZTxkOysrZSl7dmFyIGY9YVtlXTtpZighZiBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IpdGhyb3ciRmVhdHVyZUNvbGxlY3Rpb24gb25seSBzdXBwb3J0cyBjb2xsZWN0aW9ucyBvZiBmZWF0dXJlczogIitmO2MuZmVhdHVyZXNbZV09dGhpcy5leHRyYWN0LmZlYXR1cmUuYXBwbHkodGhpcyxbZl0pfX1lbHNlIDA9PWEuQ0xBU1NfTkFNRS5pbmRleE9mKCJPcGVuTGF5ZXJzLkdlb21ldHJ5Iik/Yz10aGlzLmV4dHJhY3QuZ2VvbWV0cnkuYXBwbHkodGhpcyxbYV0pOmEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yJiYoYz10aGlzLmV4dHJhY3QuZmVhdHVyZS5hcHBseSh0aGlzLFthXSksYS5sYXllciYmYS5sYXllci5wcm9qZWN0aW9uJiYoYy5jcnM9dGhpcy5jcmVhdGVDUlNPYmplY3QoYSkpKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuSlNPTi5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcywKW2MsYl0pfSxjcmVhdGVDUlNPYmplY3Q6ZnVuY3Rpb24oYSl7YT1hLmxheWVyLnByb2plY3Rpb24udG9TdHJpbmcoKTt2YXIgYj17fTthLm1hdGNoKC9lcHNnOi9pKSYmKGE9cGFyc2VJbnQoYS5zdWJzdHJpbmcoYS5pbmRleE9mKCI6IikrMSkpLGI9NDMyNj09YT97dHlwZToibmFtZSIscHJvcGVydGllczp7bmFtZToidXJuOm9nYzpkZWY6Y3JzOk9HQzoxLjM6Q1JTODQifX06e3R5cGU6Im5hbWUiLHByb3BlcnRpZXM6e25hbWU6IkVQU0c6IithfX0pO3JldHVybiBifSxleHRyYWN0OntmZWF0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZXh0cmFjdC5nZW9tZXRyeS5hcHBseSh0aGlzLFthLmdlb21ldHJ5XSksYj17dHlwZToiRmVhdHVyZSIscHJvcGVydGllczphLmF0dHJpYnV0ZXMsZ2VvbWV0cnk6Yn07bnVsbCE9YS5maWQmJihiLmlkPWEuZmlkKTtyZXR1cm4gYn0sZ2VvbWV0cnk6ZnVuY3Rpb24oYSl7aWYobnVsbD09YSlyZXR1cm4gbnVsbDt0aGlzLmludGVybmFsUHJvamVjdGlvbiYmCnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiYoYT1hLmNsb25lKCksYS50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pKTt2YXIgYj1hLkNMQVNTX05BTUUuc3BsaXQoIi4iKVsyXTthPXRoaXMuZXh0cmFjdFtiLnRvTG93ZXJDYXNlKCldLmFwcGx5KHRoaXMsW2FdKTtyZXR1cm4iQ29sbGVjdGlvbiI9PWI/e3R5cGU6Ikdlb21ldHJ5Q29sbGVjdGlvbiIsZ2VvbWV0cmllczphfTp7dHlwZTpiLGNvb3JkaW5hdGVzOmF9fSxwb2ludDpmdW5jdGlvbihhKXtyZXR1cm5bYS54LGEueV19LG11bHRpcG9pbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2godGhpcy5leHRyYWN0LnBvaW50LmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKTtyZXR1cm4gYn0sbGluZXN0cmluZzpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPApkOysrYyliLnB1c2godGhpcy5leHRyYWN0LnBvaW50LmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKTtyZXR1cm4gYn0sbXVsdGlsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKHRoaXMuZXh0cmFjdC5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKTtyZXR1cm4gYn0scG9seWdvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKWIucHVzaCh0aGlzLmV4dHJhY3QubGluZXN0cmluZy5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSk7cmV0dXJuIGJ9LG11bHRpcG9seWdvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKWIucHVzaCh0aGlzLmV4dHJhY3QucG9seWdvbi5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSk7cmV0dXJuIGJ9LGNvbGxlY3Rpb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPQphLmNvbXBvbmVudHMubGVuZ3RoLGM9QXJyYXkoYiksZD0wO2Q8YjsrK2QpY1tkXT10aGlzLmV4dHJhY3QuZ2VvbWV0cnkuYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2RdXSk7cmV0dXJuIGN9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5HZW9KU09OIn0pO09wZW5MYXllcnMuQ29udHJvbC5EcmF3RmVhdHVyZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7bGF5ZXI6bnVsbCxjYWxsYmFja3M6bnVsbCxtdWx0aTohMSxmZWF0dXJlQWRkZWQ6ZnVuY3Rpb24oKXt9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtjXSk7dGhpcy5jYWxsYmFja3M9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7ZG9uZTp0aGlzLmRyYXdGZWF0dXJlLG1vZGlmeTpmdW5jdGlvbihhLGIpe3RoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgic2tldGNobW9kaWZpZWQiLHt2ZXJ0ZXg6YSxmZWF0dXJlOmJ9KX0sY3JlYXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJza2V0Y2hzdGFydGVkIix7dmVydGV4OmEsZmVhdHVyZTpifSl9fSx0aGlzLmNhbGxiYWNrcyk7dGhpcy5sYXllcj1hO3RoaXMuaGFuZGxlck9wdGlvbnM9CnRoaXMuaGFuZGxlck9wdGlvbnN8fHt9O3RoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zLHtyZW5kZXJlcnM6YS5yZW5kZXJlcnMscmVuZGVyZXJPcHRpb25zOmEucmVuZGVyZXJPcHRpb25zfSk7Im11bHRpImluIHRoaXMuaGFuZGxlck9wdGlvbnN8fCh0aGlzLmhhbmRsZXJPcHRpb25zLm11bHRpPXRoaXMubXVsdGkpO2lmKGE9dGhpcy5sYXllci5zdHlsZU1hcCYmdGhpcy5sYXllci5zdHlsZU1hcC5zdHlsZXMudGVtcG9yYXJ5KXRoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zLHtzdHlsZU1hcDpuZXcgT3BlbkxheWVycy5TdHlsZU1hcCh7ImRlZmF1bHQiOmF9KX0pO3RoaXMuaGFuZGxlcj1uZXcgYih0aGlzLHRoaXMuY2FsbGJhY2tzLHRoaXMuaGFuZGxlck9wdGlvbnMpfSwKZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oYSl7YT1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTshMSE9PXRoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgic2tldGNoY29tcGxldGUiLHtmZWF0dXJlOmF9KSYmKGEuc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQsdGhpcy5sYXllci5hZGRGZWF0dXJlcyhbYV0pLHRoaXMuZmVhdHVyZUFkZGVkKGEpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZWFkZGVkIix7ZmVhdHVyZTphfSkpfSxpbnNlcnRYWTpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmxpbmUmJnRoaXMuaGFuZGxlci5pbnNlcnRYWShhLGIpfSxpbnNlcnREZWx0YVhZOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVyJiZ0aGlzLmhhbmRsZXIubGluZSYmdGhpcy5oYW5kbGVyLmluc2VydERlbHRhWFkoYSxiKX0saW5zZXJ0RGlyZWN0aW9uTGVuZ3RoOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVyJiZ0aGlzLmhhbmRsZXIubGluZSYmCnRoaXMuaGFuZGxlci5pbnNlcnREaXJlY3Rpb25MZW5ndGgoYSxiKX0saW5zZXJ0RGVmbGVjdGlvbkxlbmd0aDpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmxpbmUmJnRoaXMuaGFuZGxlci5pbnNlcnREZWZsZWN0aW9uTGVuZ3RoKGEsYil9LHVuZG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYW5kbGVyLnVuZG8mJnRoaXMuaGFuZGxlci51bmRvKCl9LHJlZG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYW5kbGVyLnJlZG8mJnRoaXMuaGFuZGxlci5yZWRvKCl9LGZpbmlzaFNrZXRjaDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlci5maW5pc2hHZW9tZXRyeSgpfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXIuY2FuY2VsKCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5EcmF3RmVhdHVyZSJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUGluY2g9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIse3N0YXJ0ZWQ6ITEsc3RvcERvd246ITEscGluY2hpbmc6ITEsbGFzdDpudWxsLHN0YXJ0Om51bGwsdG91Y2hzdGFydDpmdW5jdGlvbihhKXt2YXIgYj0hMDt0aGlzLnBpbmNoaW5nPSExO2lmKE9wZW5MYXllcnMuRXZlbnQuaXNNdWx0aVRvdWNoKGEpKXRoaXMuc3RhcnRlZD0hMCx0aGlzLmxhc3Q9dGhpcy5zdGFydD17ZGlzdGFuY2U6dGhpcy5nZXREaXN0YW5jZShhLnRvdWNoZXMpLGRlbHRhOjAsc2NhbGU6MX0sdGhpcy5jYWxsYmFjaygic3RhcnQiLFthLHRoaXMuc3RhcnRdKSxiPSF0aGlzLnN0b3BEb3duO2Vsc2V7aWYodGhpcy5zdGFydGVkKXJldHVybiExO3RoaXMuc3RhcnRlZD0hMTt0aGlzLmxhc3Q9dGhpcy5zdGFydD1udWxsfU9wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSk7cmV0dXJuIGJ9LHRvdWNobW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXJ0ZWQmJgpPcGVuTGF5ZXJzLkV2ZW50LmlzTXVsdGlUb3VjaChhKSl7dGhpcy5waW5jaGluZz0hMDt2YXIgYj10aGlzLmdldFBpbmNoRGF0YShhKTt0aGlzLmNhbGxiYWNrKCJtb3ZlIixbYSxiXSk7dGhpcy5sYXN0PWI7T3BlbkxheWVycy5FdmVudC5zdG9wKGEpfWVsc2UgaWYodGhpcy5zdGFydGVkKXJldHVybiExO3JldHVybiEwfSx0b3VjaGVuZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdGFydGVkJiYhT3BlbkxheWVycy5FdmVudC5pc011bHRpVG91Y2goYSk/KHRoaXMucGluY2hpbmc9dGhpcy5zdGFydGVkPSExLHRoaXMuY2FsbGJhY2soImRvbmUiLFthLHRoaXMuc3RhcnQsdGhpcy5sYXN0XSksdGhpcy5sYXN0PXRoaXMuc3RhcnQ9bnVsbCwhMSk6ITB9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLnBpbmNoaW5nPSExLGE9ITApO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9CiExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLnBpbmNoaW5nPXRoaXMuc3RhcnRlZD0hMSx0aGlzLmxhc3Q9dGhpcy5zdGFydD1udWxsLGE9ITApO3JldHVybiBhfSxnZXREaXN0YW5jZTpmdW5jdGlvbihhKXt2YXIgYj1hWzBdO2E9YVsxXTtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGIub2xDbGllbnRYLWEub2xDbGllbnRYLDIpK01hdGgucG93KGIub2xDbGllbnRZLWEub2xDbGllbnRZLDIpKX0sZ2V0UGluY2hEYXRhOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXREaXN0YW5jZShhLnRvdWNoZXMpO3JldHVybntkaXN0YW5jZTphLGRlbHRhOnRoaXMubGFzdC5kaXN0YW5jZS1hLHNjYWxlOmEvdGhpcy5zdGFydC5kaXN0YW5jZX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuSGFuZGxlci5QaW5jaCJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUG9seWdvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlci5QYXRoLHtob2xlTW9kaWZpZXI6bnVsbCxkcmF3aW5nSG9sZTohMSxwb2x5Z29uOm51bGwsY3JlYXRlRmVhdHVyZTpmdW5jdGlvbihhKXthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLmxvbixhLmxhdCk7dGhpcy5wb2ludD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTt0aGlzLmxpbmU9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhbdGhpcy5wb2ludC5nZW9tZXRyeV0pKTt0aGlzLnBvbHlnb249bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbdGhpcy5saW5lLmdlb21ldHJ5XSkpO3RoaXMuY2FsbGJhY2soImNyZWF0ZSIsW3RoaXMucG9pbnQuZ2VvbWV0cnksCnRoaXMuZ2V0U2tldGNoKCldKTt0aGlzLnBvaW50Lmdlb21ldHJ5LmNsZWFyQm91bmRzKCk7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5wb2x5Z29uLHRoaXMucG9pbnRdLHtzaWxlbnQ6ITB9KX0sYWRkUG9pbnQ6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuZHJhd2luZ0hvbGUmJnRoaXMuaG9sZU1vZGlmaWVyJiZ0aGlzLmV2dCYmdGhpcy5ldnRbdGhpcy5ob2xlTW9kaWZpZXJdKWZvcih2YXIgYj10aGlzLnBvaW50Lmdlb21ldHJ5LGM9dGhpcy5jb250cm9sLmxheWVyLmZlYXR1cmVzLGQsZT1jLmxlbmd0aC0xOzA8PWU7LS1lKWlmKGQ9Y1tlXS5nZW9tZXRyeSwoZCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbnx8ZCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKSYmZC5pbnRlcnNlY3RzKGIpKXtiPWNbZV07dGhpcy5jb250cm9sLmxheWVyLnJlbW92ZUZlYXR1cmVzKFtiXSx7c2lsZW50OiEwfSk7dGhpcy5jb250cm9sLmxheWVyLmV2ZW50cy5yZWdpc3RlclByaW9yaXR5KCJza2V0Y2hjb21wbGV0ZSIsCnRoaXMsdGhpcy5maW5hbGl6ZUludGVyaW9yUmluZyk7dGhpcy5jb250cm9sLmxheWVyLmV2ZW50cy5yZWdpc3RlclByaW9yaXR5KCJza2V0Y2htb2RpZmllZCIsdGhpcyx0aGlzLmVuZm9yY2VUb3BvbG9neSk7Yi5nZW9tZXRyeS5hZGRDb21wb25lbnQodGhpcy5saW5lLmdlb21ldHJ5KTt0aGlzLnBvbHlnb249Yjt0aGlzLmRyYXdpbmdIb2xlPSEwO2JyZWFrfU9wZW5MYXllcnMuSGFuZGxlci5QYXRoLnByb3RvdHlwZS5hZGRQb2ludC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldEN1cnJlbnRQb2ludEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aC0yfSxlbmZvcmNlVG9wb2xvZ3k6ZnVuY3Rpb24oYSl7YT1hLnZlcnRleDt2YXIgYj10aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50czt0aGlzLnBvbHlnb24uZ2VvbWV0cnkuaW50ZXJzZWN0cyhhKXx8KGI9YltiLmxlbmd0aC0zXSxhLng9Yi54LGEueT1iLnkpfSxmaW5pc2hHZW9tZXRyeTpmdW5jdGlvbigpe3RoaXMubGluZS5nZW9tZXRyeS5yZW1vdmVDb21wb25lbnQodGhpcy5saW5lLmdlb21ldHJ5LmNvbXBvbmVudHNbdGhpcy5saW5lLmdlb21ldHJ5LmNvbXBvbmVudHMubGVuZ3RoLQoyXSk7dGhpcy5yZW1vdmVQb2ludCgpO3RoaXMuZmluYWxpemUoKX0sZmluYWxpemVJbnRlcmlvclJpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxpbmUuZ2VvbWV0cnksYj0wIT09YS5nZXRBcmVhKCk7aWYoYil7Zm9yKHZhciBjPXRoaXMucG9seWdvbi5nZW9tZXRyeS5jb21wb25lbnRzLGQ9Yy5sZW5ndGgtMjswPD1kOy0tZClpZihhLmludGVyc2VjdHMoY1tkXSkpe2I9ITE7YnJlYWt9aWYoYilhOmZvcihkPWMubGVuZ3RoLTI7MDxkOy0tZClmb3IodmFyIGU9Y1tkXS5jb21wb25lbnRzLGY9MCxnPWUubGVuZ3RoO2Y8ZzsrK2YpaWYoYS5jb250YWluc1BvaW50KGVbZl0pKXtiPSExO2JyZWFrIGF9fWI/dGhpcy5wb2x5Z29uLnN0YXRlIT09T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQmJih0aGlzLnBvbHlnb24uc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5VUERBVEUpOnRoaXMucG9seWdvbi5nZW9tZXRyeS5yZW1vdmVDb21wb25lbnQoYSk7dGhpcy5yZXN0b3JlRmVhdHVyZSgpO3JldHVybiExfSwKY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5kcmF3aW5nSG9sZSYmKHRoaXMucG9seWdvbi5nZW9tZXRyeS5yZW1vdmVDb21wb25lbnQodGhpcy5saW5lLmdlb21ldHJ5KSx0aGlzLnJlc3RvcmVGZWF0dXJlKCEwKSk7cmV0dXJuIE9wZW5MYXllcnMuSGFuZGxlci5QYXRoLnByb3RvdHlwZS5jYW5jZWwuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZXN0b3JlRmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmNvbnRyb2wubGF5ZXIuZXZlbnRzLnVucmVnaXN0ZXIoInNrZXRjaGNvbXBsZXRlIix0aGlzLHRoaXMuZmluYWxpemVJbnRlcmlvclJpbmcpO3RoaXMuY29udHJvbC5sYXllci5ldmVudHMudW5yZWdpc3Rlcigic2tldGNobW9kaWZpZWQiLHRoaXMsdGhpcy5lbmZvcmNlVG9wb2xvZ3kpO3RoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXMoW3RoaXMucG9seWdvbl0se3NpbGVudDohMH0pO3RoaXMuY29udHJvbC5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5wb2x5Z29uXSx7c2lsZW50OiEwfSk7dGhpcy5kcmF3aW5nSG9sZT0KITE7YXx8dGhpcy5jb250cm9sLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoInNrZXRjaGNvbXBsZXRlIix7ZmVhdHVyZTp0aGlzLnBvbHlnb259KX0sZGVzdHJveUZlYXR1cmU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5IYW5kbGVyLlBhdGgucHJvdG90eXBlLmRlc3Ryb3lGZWF0dXJlLmNhbGwodGhpcyxhKTt0aGlzLnBvbHlnb249bnVsbH0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oKXt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMucG9seWdvbix0aGlzLnN0eWxlKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMucG9pbnQsdGhpcy5zdHlsZSl9LGdldFNrZXRjaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvbHlnb259LGdldEdlb21ldHJ5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wb2x5Z29uJiZ0aGlzLnBvbHlnb24uZ2VvbWV0cnk7YSYmdGhpcy5tdWx0aSYmKGE9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKFthXSkpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuUG9seWdvbiJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuR2VvbG9jYXRlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtnZW9sb2NhdGlvbjpudWxsLGF2YWlsYWJsZToiZ2VvbG9jYXRpb24iaW4gbmF2aWdhdG9yLGJpbmQ6ITAsd2F0Y2g6ITEsZ2VvbG9jYXRpb25PcHRpb25zOm51bGwsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5hdmFpbGFibGUmJiF0aGlzLmdlb2xvY2F0aW9uJiYodGhpcy5nZW9sb2NhdGlvbj1uYXZpZ2F0b3IuZ2VvbG9jYXRpb24pO3JldHVybiB0aGlzLmdlb2xvY2F0aW9uP09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpPyh0aGlzLndhdGNoP3RoaXMud2F0Y2hJZD10aGlzLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24oT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMuZ2VvbG9jYXRlLAp0aGlzKSxPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5mYWlsdXJlLHRoaXMpLHRoaXMuZ2VvbG9jYXRpb25PcHRpb25zKTp0aGlzLmdldEN1cnJlbnRMb2NhdGlvbigpLCEwKTohMToodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2NhdGlvbnVuY2FwYWJsZSIpLCExKX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlJiZudWxsIT09dGhpcy53YXRjaElkJiZ0aGlzLmdlb2xvY2F0aW9uLmNsZWFyV2F0Y2godGhpcy53YXRjaElkKTtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2VvbG9jYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPShuZXcgT3BlbkxheWVycy5Mb25MYXQoYS5jb29yZHMubG9uZ2l0dWRlLGEuY29vcmRzLmxhdGl0dWRlKSkudHJhbnNmb3JtKG5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpLHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSk7dGhpcy5iaW5kJiYKdGhpcy5tYXAuc2V0Q2VudGVyKGIpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9jYXRpb251cGRhdGVkIix7cG9zaXRpb246YSxwb2ludDpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChiLmxvbixiLmxhdCl9KX0sZ2V0Q3VycmVudExvY2F0aW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXMuYWN0aXZlfHx0aGlzLndhdGNoKXJldHVybiExO3RoaXMuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLmdlb2xvY2F0ZSx0aGlzKSxPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5mYWlsdXJlLHRoaXMpLHRoaXMuZ2VvbG9jYXRpb25PcHRpb25zKTtyZXR1cm4hMH0sZmFpbHVyZTpmdW5jdGlvbihhKXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvY2F0aW9uZmFpbGVkIix7ZXJyb3I6YX0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuR2VvbG9jYXRlIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuSFRUUD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUHJvdG9jb2wse3VybDpudWxsLGhlYWRlcnM6bnVsbCxwYXJhbXM6bnVsbCxjYWxsYmFjazpudWxsLHNjb3BlOm51bGwscmVhZFdpdGhQT1NUOiExLHVwZGF0ZVdpdGhQT1NUOiExLGRlbGV0ZVdpdGhQT1NUOiExLHdpbGRjYXJkZWQ6ITEsc3JzSW5CQk9YOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7YT1hfHx7fTt0aGlzLnBhcmFtcz17fTt0aGlzLmhlYWRlcnM9e307T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIXRoaXMuZmlsdGVyVG9QYXJhbXMmJk9wZW5MYXllcnMuRm9ybWF0LlF1ZXJ5U3RyaW5nRmlsdGVyKXt2YXIgYj1uZXcgT3BlbkxheWVycy5Gb3JtYXQuUXVlcnlTdHJpbmdGaWx0ZXIoe3dpbGRjYXJkZWQ6dGhpcy53aWxkY2FyZGVkLHNyc0luQkJPWDp0aGlzLnNyc0luQkJPWH0pO3RoaXMuZmlsdGVyVG9QYXJhbXM9CmZ1bmN0aW9uKGEsZCl7cmV0dXJuIGIud3JpdGUoYSxkKX19fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5oZWFkZXJzPXRoaXMucGFyYW1zPW51bGw7T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKX0scmVhZDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPWF8fHt9O2EucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEucGFyYW1zLHRoaXMub3B0aW9ucy5wYXJhbXMpO2E9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx0aGlzLm9wdGlvbnMpO2EuZmlsdGVyJiZ0aGlzLmZpbHRlclRvUGFyYW1zJiYoYS5wYXJhbXM9dGhpcy5maWx0ZXJUb1BhcmFtcyhhLmZpbHRlcixhLnBhcmFtcykpO3ZhciBiPXZvaWQgMCE9PWEucmVhZFdpdGhQT1NUP2EucmVhZFdpdGhQT1NUOnRoaXMucmVhZFdpdGhQT1NULGM9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcXVlc3RUeXBlOiJyZWFkIn0pOwpiPyhiPWEuaGVhZGVyc3x8e30sYlsiQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsYy5wcml2PU9wZW5MYXllcnMuUmVxdWVzdC5QT1NUKHt1cmw6YS51cmwsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZVJlYWQsYyxhKSxkYXRhOk9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoYS5wYXJhbXMpLGhlYWRlcnM6Yn0pKTpjLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0LkdFVCh7dXJsOmEudXJsLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVSZWFkLGMsYSkscGFyYW1zOmEucGFyYW1zLGhlYWRlcnM6YS5oZWFkZXJzfSk7cmV0dXJuIGN9LGhhbmRsZVJlYWQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZVJlc3BvbnNlKGEsYil9LGNyZWF0ZTpmdW5jdGlvbihhLGIpe2I9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix0aGlzLm9wdGlvbnMpO3ZhciBjPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXFGZWF0dXJlczphLApyZXF1ZXN0VHlwZToiY3JlYXRlIn0pO2MucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOmIudXJsLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVDcmVhdGUsYyxiKSxoZWFkZXJzOmIuaGVhZGVycyxkYXRhOnRoaXMuZm9ybWF0LndyaXRlKGEpfSk7cmV0dXJuIGN9LGhhbmRsZUNyZWF0ZTpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlUmVzcG9uc2UoYSxiKX0sdXBkYXRlOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLnVybHx8YS51cmx8fHRoaXMub3B0aW9ucy51cmwrIi8iK2EuZmlkO2I9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix0aGlzLm9wdGlvbnMpO3ZhciBkPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXFGZWF0dXJlczphLHJlcXVlc3RUeXBlOiJ1cGRhdGUifSk7ZC5wcml2PU9wZW5MYXllcnMuUmVxdWVzdFt0aGlzLnVwZGF0ZVdpdGhQT1NUPyJQT1NUIjoiUFVUIl0oe3VybDpjLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVVcGRhdGUsCmQsYiksaGVhZGVyczpiLmhlYWRlcnMsZGF0YTp0aGlzLmZvcm1hdC53cml0ZShhKX0pO3JldHVybiBkfSxoYW5kbGVVcGRhdGU6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZVJlc3BvbnNlKGEsYil9LCJkZWxldGUiOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLnVybHx8YS51cmx8fHRoaXMub3B0aW9ucy51cmwrIi8iK2EuZmlkO2I9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix0aGlzLm9wdGlvbnMpO3ZhciBkPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXFGZWF0dXJlczphLHJlcXVlc3RUeXBlOiJkZWxldGUifSksZT10aGlzLmRlbGV0ZVdpdGhQT1NUPyJQT1NUIjoiREVMRVRFIixjPXt1cmw6YyxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlRGVsZXRlLGQsYiksaGVhZGVyczpiLmhlYWRlcnN9O3RoaXMuZGVsZXRlV2l0aFBPU1QmJihjLmRhdGE9dGhpcy5mb3JtYXQud3JpdGUoYSkpO2QucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3RbZV0oYyk7CnJldHVybiBkfSxoYW5kbGVEZWxldGU6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZVJlc3BvbnNlKGEsYil9LGhhbmRsZVJlc3BvbnNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5wcml2O2IuY2FsbGJhY2smJigyMDA8PWMuc3RhdHVzJiYzMDA+Yy5zdGF0dXM/KCJkZWxldGUiIT1hLnJlcXVlc3RUeXBlJiYoYS5mZWF0dXJlcz10aGlzLnBhcnNlRmVhdHVyZXMoYykpLGEuY29kZT1PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLlNVQ0NFU1MpOmEuY29kZT1PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLkZBSUxVUkUsYi5jYWxsYmFjay5jYWxsKGIuc2NvcGUsYSkpfSxwYXJzZUZlYXR1cmVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVzcG9uc2VYTUw7YiYmYi5kb2N1bWVudEVsZW1lbnR8fChiPWEucmVzcG9uc2VUZXh0KTtyZXR1cm4hYnx8MD49Yi5sZW5ndGg/bnVsbDp0aGlzLmZvcm1hdC5yZWFkKGIpfSxjb21taXQ6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2Zvcih2YXIgYj0KYS5mZWF0dXJlcz9hLmZlYXR1cmVzLmxlbmd0aDowLGM9QXJyYXkoYiksZT0wO2U8YjsrK2UpY1tlXT1hLmZlYXR1cmVzW2VdLmZpZDtyLmluc2VydElkcz1jO2QuYXBwbHkodGhpcyxbYV0pfWZ1bmN0aW9uIGQoYSl7dGhpcy5jYWxsVXNlckNhbGxiYWNrKGEsYik7cT1xJiZhLnN1Y2Nlc3MoKTtmKys7Zj49biYmYi5jYWxsYmFjayYmKHIuY29kZT1xP09wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuU1VDQ0VTUzpPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLkZBSUxVUkUsYi5jYWxsYmFjay5hcHBseShiLnNjb3BlLFtyXSkpfWI9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix0aGlzLm9wdGlvbnMpO3ZhciBlPVtdLGY9MCxnPXt9O2dbT3BlbkxheWVycy5TdGF0ZS5JTlNFUlRdPVtdO2dbT3BlbkxheWVycy5TdGF0ZS5VUERBVEVdPVtdO2dbT3BlbkxheWVycy5TdGF0ZS5ERUxFVEVdPVtdO2Zvcih2YXIgaCxrLGw9W10sbT0wLHA9YS5sZW5ndGg7bTxwOysrbSlpZihoPQphW21dLGs9Z1toLnN0YXRlXSlrLnB1c2goaCksbC5wdXNoKGgpO3ZhciBuPSgwPGdbT3BlbkxheWVycy5TdGF0ZS5JTlNFUlRdLmxlbmd0aD8xOjApK2dbT3BlbkxheWVycy5TdGF0ZS5VUERBVEVdLmxlbmd0aCtnW09wZW5MYXllcnMuU3RhdGUuREVMRVRFXS5sZW5ndGgscT0hMCxyPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXFGZWF0dXJlczpsfSk7aD1nW09wZW5MYXllcnMuU3RhdGUuSU5TRVJUXTswPGgubGVuZ3RoJiZlLnB1c2godGhpcy5jcmVhdGUoaCxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7Y2FsbGJhY2s6YyxzY29wZTp0aGlzfSxiLmNyZWF0ZSkpKTtoPWdbT3BlbkxheWVycy5TdGF0ZS5VUERBVEVdO2ZvcihtPWgubGVuZ3RoLTE7MDw9bTstLW0pZS5wdXNoKHRoaXMudXBkYXRlKGhbbV0sT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2NhbGxiYWNrOmQsc2NvcGU6dGhpc30sYi51cGRhdGUpKSk7aD1nW09wZW5MYXllcnMuU3RhdGUuREVMRVRFXTsKZm9yKG09aC5sZW5ndGgtMTswPD1tOy0tbSllLnB1c2godGhpc1siZGVsZXRlIl0oaFttXSxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7Y2FsbGJhY2s6ZCxzY29wZTp0aGlzfSxiWyJkZWxldGUiXSkpKTtyZXR1cm4gZX0sYWJvcnQ6ZnVuY3Rpb24oYSl7YSYmYS5wcml2LmFib3J0KCl9LGNhbGxVc2VyQ2FsbGJhY2s6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iW2EucmVxdWVzdFR5cGVdO2MmJmMuY2FsbGJhY2smJmMuY2FsbGJhY2suY2FsbChjLnNjb3BlLGEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlByb3RvY29sLkhUVFAifSk7T3BlbkxheWVycy5Db250cm9sLkRyYWdQYW49T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3R5cGU6T3BlbkxheWVycy5Db250cm9sLlRZUEVfVE9PTCxwYW5uZWQ6ITEsaW50ZXJ2YWw6MCxkb2N1bWVudERyYWc6ITEsa2luZXRpYzpudWxsLGVuYWJsZUtpbmV0aWM6ITAsa2luZXRpY0ludGVydmFsOjEwLGRyYXc6ZnVuY3Rpb24oKXtpZih0aGlzLmVuYWJsZUtpbmV0aWMmJk9wZW5MYXllcnMuS2luZXRpYyl7dmFyIGE9e2ludGVydmFsOnRoaXMua2luZXRpY0ludGVydmFsfTsib2JqZWN0Ij09PXR5cGVvZiB0aGlzLmVuYWJsZUtpbmV0aWMmJihhPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYSx0aGlzLmVuYWJsZUtpbmV0aWMpKTt0aGlzLmtpbmV0aWM9bmV3IE9wZW5MYXllcnMuS2luZXRpYyhhKX10aGlzLmhhbmRsZXI9bmV3IE9wZW5MYXllcnMuSGFuZGxlci5EcmFnKHRoaXMse21vdmU6dGhpcy5wYW5NYXAsZG9uZTp0aGlzLnBhbk1hcERvbmUsZG93bjp0aGlzLnBhbk1hcFN0YXJ0fSwKe2ludGVydmFsOnRoaXMuaW50ZXJ2YWwsZG9jdW1lbnREcmFnOnRoaXMuZG9jdW1lbnREcmFnfSl9LHBhbk1hcFN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5raW5ldGljJiZ0aGlzLmtpbmV0aWMuYmVnaW4oKX0scGFuTWFwOmZ1bmN0aW9uKGEpe3RoaXMua2luZXRpYyYmdGhpcy5raW5ldGljLnVwZGF0ZShhKTt0aGlzLnBhbm5lZD0hMDt0aGlzLm1hcC5wYW4odGhpcy5oYW5kbGVyLmxhc3QueC1hLngsdGhpcy5oYW5kbGVyLmxhc3QueS1hLnkse2RyYWdnaW5nOiEwLGFuaW1hdGU6ITF9KX0scGFuTWFwRG9uZTpmdW5jdGlvbihhKXtpZih0aGlzLnBhbm5lZCl7dmFyIGI9bnVsbDt0aGlzLmtpbmV0aWMmJihiPXRoaXMua2luZXRpYy5lbmQoYSkpO3RoaXMubWFwLnBhbih0aGlzLmhhbmRsZXIubGFzdC54LWEueCx0aGlzLmhhbmRsZXIubGFzdC55LWEueSx7ZHJhZ2dpbmc6ISFiLGFuaW1hdGU6ITF9KTtpZihiKXt2YXIgYz10aGlzO3RoaXMua2luZXRpYy5tb3ZlKGIsZnVuY3Rpb24oYSxiLApmKXtjLm1hcC5wYW4oYSxiLHtkcmFnZ2luZzohZixhbmltYXRlOiExfSl9KX10aGlzLnBhbm5lZD0hMX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5EcmFnUGFuIn0pO09wZW5MYXllcnMuQ29udHJvbC5QaW5jaFpvb209T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3R5cGU6T3BlbkxheWVycy5Db250cm9sLlRZUEVfVE9PTCxwaW5jaE9yaWdpbjpudWxsLGN1cnJlbnRDZW50ZXI6bnVsbCxhdXRvQWN0aXZhdGU6ITAscHJlc2VydmVDZW50ZXI6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuaGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLlBpbmNoKHRoaXMse3N0YXJ0OnRoaXMucGluY2hTdGFydCxtb3ZlOnRoaXMucGluY2hNb3ZlLGRvbmU6dGhpcy5waW5jaERvbmV9LHRoaXMuaGFuZGxlck9wdGlvbnMpfSxwaW5jaFN0YXJ0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5wcmVzZXJ2ZUNlbnRlcj90aGlzLm1hcC5nZXRQaXhlbEZyb21Mb25MYXQodGhpcy5tYXAuZ2V0Q2VudGVyKCkpOmEueHk7dGhpcy5jdXJyZW50Q2VudGVyPQp0aGlzLnBpbmNoT3JpZ2luPWN9LHBpbmNoTW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjPWIuc2NhbGUsZD10aGlzLm1hcC5sYXllckNvbnRhaW5lck9yaWdpblB4LGU9dGhpcy5waW5jaE9yaWdpbixmPXRoaXMucHJlc2VydmVDZW50ZXI/dGhpcy5tYXAuZ2V0UGl4ZWxGcm9tTG9uTGF0KHRoaXMubWFwLmdldENlbnRlcigpKTphLnh5LGc9TWF0aC5yb3VuZChkLngrZi54LWUueCsoYy0xKSooZC54LWUueCkpLGQ9TWF0aC5yb3VuZChkLnkrZi55LWUueSsoYy0xKSooZC55LWUueSkpO3RoaXMubWFwLmFwcGx5VHJhbnNmb3JtKGcsZCxjKTt0aGlzLmN1cnJlbnRDZW50ZXI9Zn0scGluY2hEb25lOmZ1bmN0aW9uKGEsYixjKXt0aGlzLm1hcC5hcHBseVRyYW5zZm9ybSgpO2E9dGhpcy5tYXAuZ2V0Wm9vbUZvclJlc29sdXRpb24odGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpL2Muc2NhbGUsITApO2lmKGEhPT10aGlzLm1hcC5nZXRab29tKCl8fCF0aGlzLmN1cnJlbnRDZW50ZXIuZXF1YWxzKHRoaXMucGluY2hPcmlnaW4pKXtiPQp0aGlzLm1hcC5nZXRSZXNvbHV0aW9uRm9yWm9vbShhKTtjPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbCh0aGlzLnBpbmNoT3JpZ2luKTt2YXIgZD10aGlzLmN1cnJlbnRDZW50ZXIsZT10aGlzLm1hcC5nZXRTaXplKCk7Yy5sb24rPWIqKGUudy8yLWQueCk7Yy5sYXQtPWIqKGUuaC8yLWQueSk7dGhpcy5tYXAuZGl2LmNsaWVudFdpZHRoPXRoaXMubWFwLmRpdi5jbGllbnRXaWR0aDt0aGlzLm1hcC5zZXRDZW50ZXIoYyxhKX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5QaW5jaFpvb20ifSk7T3BlbkxheWVycy5IYW5kbGVyLkNsaWNrPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtkZWxheTozMDAsc2luZ2xlOiEwLCJkb3VibGUiOiExLHBpeGVsVG9sZXJhbmNlOjAsZGJsY2xpY2tUb2xlcmFuY2U6MTMsc3RvcFNpbmdsZTohMSxzdG9wRG91YmxlOiExLHRpbWVySWQ6bnVsbCxkb3duOm51bGwsbGFzdDpudWxsLGZpcnN0Om51bGwscmlnaHRjbGlja1RpbWVySWQ6bnVsbCx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnRUb3VjaCgpO3RoaXMuZG93bj10aGlzLmdldEV2ZW50SW5mbyhhKTt0aGlzLmxhc3Q9dGhpcy5nZXRFdmVudEluZm8oYSk7cmV0dXJuITB9LHRvdWNobW92ZTpmdW5jdGlvbihhKXt0aGlzLmxhc3Q9dGhpcy5nZXRFdmVudEluZm8oYSk7cmV0dXJuITB9LHRvdWNoZW5kOmZ1bmN0aW9uKGEpe3RoaXMuZG93biYmKGEueHk9dGhpcy5sYXN0Lnh5LGEubGFzdFRvdWNoZXM9dGhpcy5sYXN0LnRvdWNoZXMsdGhpcy5oYW5kbGVTaW5nbGUoYSksCnRoaXMuZG93bj1udWxsKTtyZXR1cm4hMH0sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe3RoaXMuZG93bj10aGlzLmdldEV2ZW50SW5mbyhhKTt0aGlzLmxhc3Q9dGhpcy5nZXRFdmVudEluZm8oYSk7cmV0dXJuITB9LG1vdXNldXA6ZnVuY3Rpb24oYSl7dmFyIGI9ITA7dGhpcy5jaGVja01vZGlmaWVycyhhKSYmKHRoaXMuY29udHJvbC5oYW5kbGVSaWdodENsaWNrcyYmT3BlbkxheWVycy5FdmVudC5pc1JpZ2h0Q2xpY2soYSkpJiYoYj10aGlzLnJpZ2h0Y2xpY2soYSkpO3JldHVybiBifSxyaWdodGNsaWNrOmZ1bmN0aW9uKGEpe2lmKHRoaXMucGFzc2VzVG9sZXJhbmNlKGEpKXtpZihudWxsIT10aGlzLnJpZ2h0Y2xpY2tUaW1lcklkKXJldHVybiB0aGlzLmNsZWFyVGltZXIoKSx0aGlzLmNhbGxiYWNrKCJkYmxyaWdodGNsaWNrIixbYV0pLCF0aGlzLnN0b3BEb3VibGU7YT10aGlzWyJkb3VibGUiXT9PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGEpOnRoaXMuY2FsbGJhY2soInJpZ2h0Y2xpY2siLApbYV0pO2E9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMuZGVsYXllZFJpZ2h0Q2FsbCx0aGlzLGEpO3RoaXMucmlnaHRjbGlja1RpbWVySWQ9d2luZG93LnNldFRpbWVvdXQoYSx0aGlzLmRlbGF5KX1yZXR1cm4hdGhpcy5zdG9wU2luZ2xlfSxkZWxheWVkUmlnaHRDYWxsOmZ1bmN0aW9uKGEpe3RoaXMucmlnaHRjbGlja1RpbWVySWQ9bnVsbDthJiZ0aGlzLmNhbGxiYWNrKCJyaWdodGNsaWNrIixbYV0pfSxjbGljazpmdW5jdGlvbihhKXt0aGlzLmxhc3R8fCh0aGlzLmxhc3Q9dGhpcy5nZXRFdmVudEluZm8oYSkpO3RoaXMuaGFuZGxlU2luZ2xlKGEpO3JldHVybiF0aGlzLnN0b3BTaW5nbGV9LGRibGNsaWNrOmZ1bmN0aW9uKGEpe3RoaXMuaGFuZGxlRG91YmxlKGEpO3JldHVybiF0aGlzLnN0b3BEb3VibGV9LGhhbmRsZURvdWJsZTpmdW5jdGlvbihhKXt0aGlzLnBhc3Nlc0RibGNsaWNrVG9sZXJhbmNlKGEpJiYodGhpc1siZG91YmxlIl0mJnRoaXMuY2FsbGJhY2soImRibGNsaWNrIiwKW2FdKSx0aGlzLmNsZWFyVGltZXIoKSl9LGhhbmRsZVNpbmdsZTpmdW5jdGlvbihhKXt0aGlzLnBhc3Nlc1RvbGVyYW5jZShhKSYmKG51bGwhPXRoaXMudGltZXJJZD8odGhpcy5sYXN0LnRvdWNoZXMmJjE9PT10aGlzLmxhc3QudG91Y2hlcy5sZW5ndGgmJih0aGlzWyJkb3VibGUiXSYmT3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKSx0aGlzLmhhbmRsZURvdWJsZShhKSksdGhpcy5sYXN0LnRvdWNoZXMmJjI9PT10aGlzLmxhc3QudG91Y2hlcy5sZW5ndGh8fHRoaXMuY2xlYXJUaW1lcigpKToodGhpcy5maXJzdD10aGlzLmdldEV2ZW50SW5mbyhhKSxhPXRoaXMuc2luZ2xlP09wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYSk6bnVsbCx0aGlzLnF1ZXVlUG90ZW50aWFsQ2xpY2soYSkpKX0scXVldWVQb3RlbnRpYWxDbGljazpmdW5jdGlvbihhKXt0aGlzLnRpbWVySWQ9d2luZG93LnNldFRpbWVvdXQoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMuZGVsYXllZENhbGwsCnRoaXMsYSksdGhpcy5kZWxheSl9LHBhc3Nlc1RvbGVyYW5jZTpmdW5jdGlvbihhKXt2YXIgYj0hMDtpZihudWxsIT10aGlzLnBpeGVsVG9sZXJhbmNlJiZ0aGlzLmRvd24mJnRoaXMuZG93bi54eSYmKGI9dGhpcy5waXhlbFRvbGVyYW5jZT49dGhpcy5kb3duLnh5LmRpc3RhbmNlVG8oYS54eSkpJiZ0aGlzLnRvdWNoJiZ0aGlzLmRvd24udG91Y2hlcy5sZW5ndGg9PT10aGlzLmxhc3QudG91Y2hlcy5sZW5ndGgpe2E9MDtmb3IodmFyIGM9dGhpcy5kb3duLnRvdWNoZXMubGVuZ3RoO2E8YzsrK2EpaWYodGhpcy5nZXRUb3VjaERpc3RhbmNlKHRoaXMuZG93bi50b3VjaGVzW2FdLHRoaXMubGFzdC50b3VjaGVzW2FdKT50aGlzLnBpeGVsVG9sZXJhbmNlKXtiPSExO2JyZWFrfX1yZXR1cm4gYn0sZ2V0VG91Y2hEaXN0YW5jZTpmdW5jdGlvbihhLGIpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coYS5jbGllbnRYLWIuY2xpZW50WCwyKStNYXRoLnBvdyhhLmNsaWVudFktYi5jbGllbnRZLAoyKSl9LHBhc3Nlc0RibGNsaWNrVG9sZXJhbmNlOmZ1bmN0aW9uKGEpe2E9ITA7dGhpcy5kb3duJiZ0aGlzLmZpcnN0JiYoYT10aGlzLmRvd24ueHkuZGlzdGFuY2VUbyh0aGlzLmZpcnN0Lnh5KTw9dGhpcy5kYmxjbGlja1RvbGVyYW5jZSk7cmV0dXJuIGF9LGNsZWFyVGltZXI6ZnVuY3Rpb24oKXtudWxsIT10aGlzLnRpbWVySWQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCksdGhpcy50aW1lcklkPW51bGwpO251bGwhPXRoaXMucmlnaHRjbGlja1RpbWVySWQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucmlnaHRjbGlja1RpbWVySWQpLHRoaXMucmlnaHRjbGlja1RpbWVySWQ9bnVsbCl9LGRlbGF5ZWRDYWxsOmZ1bmN0aW9uKGEpe3RoaXMudGltZXJJZD1udWxsO2EmJnRoaXMuY2FsbGJhY2soImNsaWNrIixbYV0pfSxnZXRFdmVudEluZm86ZnVuY3Rpb24oYSl7dmFyIGI7aWYoYS50b3VjaGVzKXt2YXIgYz1hLnRvdWNoZXMubGVuZ3RoO2I9QXJyYXkoYyk7Zm9yKHZhciBkLAplPTA7ZTxjO2UrKylkPWEudG91Y2hlc1tlXSxiW2VdPXtjbGllbnRYOmQub2xDbGllbnRYLGNsaWVudFk6ZC5vbENsaWVudFl9fXJldHVybnt4eTphLnh5LHRvdWNoZXM6Yn19LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5jbGVhclRpbWVyKCksdGhpcy5sYXN0PXRoaXMuZmlyc3Q9dGhpcy5kb3duPW51bGwsYT0hMCk7cmV0dXJuIGF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuSGFuZGxlci5DbGljayJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuVG91Y2hOYXZpZ2F0aW9uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtkcmFnUGFuOm51bGwsZHJhZ1Bhbk9wdGlvbnM6bnVsbCxwaW5jaFpvb206bnVsbCxwaW5jaFpvb21PcHRpb25zOm51bGwsY2xpY2tIYW5kbGVyT3B0aW9uczpudWxsLGRvY3VtZW50RHJhZzohMSxhdXRvQWN0aXZhdGU6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzPXt9O09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmRyYWdQYW4mJnRoaXMuZHJhZ1Bhbi5kZXN0cm95KCk7dGhpcy5kcmFnUGFuPW51bGw7dGhpcy5waW5jaFpvb20mJih0aGlzLnBpbmNoWm9vbS5kZXN0cm95KCksZGVsZXRlIHRoaXMucGluY2hab29tKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk/KHRoaXMuZHJhZ1Bhbi5hY3RpdmF0ZSgpLHRoaXMuaGFuZGxlcnMuY2xpY2suYWN0aXZhdGUoKSx0aGlzLnBpbmNoWm9vbS5hY3RpdmF0ZSgpLCEwKTohMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpPyh0aGlzLmRyYWdQYW4uZGVhY3RpdmF0ZSgpLHRoaXMuaGFuZGxlcnMuY2xpY2suZGVhY3RpdmF0ZSgpLHRoaXMucGluY2hab29tLmRlYWN0aXZhdGUoKSwhMCk6ITF9LGRyYXc6ZnVuY3Rpb24oKXt2YXIgYT17Y2xpY2s6dGhpcy5kZWZhdWx0Q2xpY2ssZGJsY2xpY2s6dGhpcy5kZWZhdWx0RGJsQ2xpY2t9LGI9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7ImRvdWJsZSI6ITAsc3RvcERvdWJsZTohMCwKcGl4ZWxUb2xlcmFuY2U6Mn0sdGhpcy5jbGlja0hhbmRsZXJPcHRpb25zKTt0aGlzLmhhbmRsZXJzLmNsaWNrPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuQ2xpY2sodGhpcyxhLGIpO3RoaXMuZHJhZ1Bhbj1uZXcgT3BlbkxheWVycy5Db250cm9sLkRyYWdQYW4oT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7bWFwOnRoaXMubWFwLGRvY3VtZW50RHJhZzp0aGlzLmRvY3VtZW50RHJhZ30sdGhpcy5kcmFnUGFuT3B0aW9ucykpO3RoaXMuZHJhZ1Bhbi5kcmF3KCk7dGhpcy5waW5jaFpvb209bmV3IE9wZW5MYXllcnMuQ29udHJvbC5QaW5jaFpvb20oT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7bWFwOnRoaXMubWFwfSx0aGlzLnBpbmNoWm9vbU9wdGlvbnMpKX0sZGVmYXVsdENsaWNrOmZ1bmN0aW9uKGEpe2EubGFzdFRvdWNoZXMmJjI9PWEubGFzdFRvdWNoZXMubGVuZ3RoJiZ0aGlzLm1hcC56b29tT3V0KCl9LGRlZmF1bHREYmxDbGljazpmdW5jdGlvbihhKXt0aGlzLm1hcC56b29tVG8odGhpcy5tYXAuem9vbSsKMSxhLnh5KX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlRvdWNoTmF2aWdhdGlvbiJ9KTtPcGVuTGF5ZXJzLlByb3RvY29sLldGUy52MV8wXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlByb3RvY29sLldGUy52MSx7dmVyc2lvbjoiMS4wLjAiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLlRpbGVNYW5hZ2VyPU9wZW5MYXllcnMuQ2xhc3Moe2NhY2hlU2l6ZToyNTYsdGlsZXNQZXJGcmFtZToyLGZyYW1lRGVsYXk6MTYsbW92ZURlbGF5OjEwMCx6b29tRGVsYXk6MjAwLG1hcHM6bnVsbCx0aWxlUXVldWVJZDpudWxsLHRpbGVRdWV1ZTpudWxsLHRpbGVDYWNoZTpudWxsLHRpbGVDYWNoZUluZGV4Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5tYXBzPVtdO3RoaXMudGlsZVF1ZXVlSWQ9e307dGhpcy50aWxlUXVldWU9e307dGhpcy50aWxlQ2FjaGU9e307dGhpcy50aWxlQ2FjaGVJbmRleD1bXX0sYWRkTWFwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9kZXN0cm95ZWQmJk9wZW5MYXllcnMuTGF5ZXIuR3JpZCl7dGhpcy5tYXBzLnB1c2goYSk7dGhpcy50aWxlUXVldWVbYS5pZF09W107Zm9yKHZhciBiPTAsYz1hLmxheWVycy5sZW5ndGg7YjxjOysrYil0aGlzLmFkZExheWVyKHtsYXllcjphLmxheWVyc1tiXX0pOwphLmV2ZW50cy5vbih7bW92ZTp0aGlzLm1vdmUsem9vbWVuZDp0aGlzLnpvb21FbmQsY2hhbmdlbGF5ZXI6dGhpcy5jaGFuZ2VMYXllcixhZGRsYXllcjp0aGlzLmFkZExheWVyLHByZXJlbW92ZWxheWVyOnRoaXMucmVtb3ZlTGF5ZXIsc2NvcGU6dGhpc30pfX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9kZXN0cm95ZWQmJk9wZW5MYXllcnMuTGF5ZXIuR3JpZCl7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbGVRdWV1ZUlkW2EuaWRdKTtpZihhLmxheWVycylmb3IodmFyIGI9MCxjPWEubGF5ZXJzLmxlbmd0aDtiPGM7KytiKXRoaXMucmVtb3ZlTGF5ZXIoe2xheWVyOmEubGF5ZXJzW2JdfSk7YS5ldmVudHMmJmEuZXZlbnRzLnVuKHttb3ZlOnRoaXMubW92ZSx6b29tZW5kOnRoaXMuem9vbUVuZCxjaGFuZ2VsYXllcjp0aGlzLmNoYW5nZUxheWVyLGFkZGxheWVyOnRoaXMuYWRkTGF5ZXIscHJlcmVtb3ZlbGF5ZXI6dGhpcy5yZW1vdmVMYXllcixzY29wZTp0aGlzfSk7CmRlbGV0ZSB0aGlzLnRpbGVRdWV1ZVthLmlkXTtkZWxldGUgdGhpcy50aWxlUXVldWVJZFthLmlkXTtPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLm1hcHMsYSl9fSxtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMudXBkYXRlVGltZW91dChhLm9iamVjdCx0aGlzLm1vdmVEZWxheSwhMCl9LHpvb21FbmQ6ZnVuY3Rpb24oYSl7dGhpcy51cGRhdGVUaW1lb3V0KGEub2JqZWN0LHRoaXMuem9vbURlbGF5KX0sY2hhbmdlTGF5ZXI6ZnVuY3Rpb24oYSl7InZpc2liaWxpdHkiIT09YS5wcm9wZXJ0eSYmInBhcmFtcyIhPT1hLnByb3BlcnR5fHx0aGlzLnVwZGF0ZVRpbWVvdXQoYS5vYmplY3QsMCl9LGFkZExheWVyOmZ1bmN0aW9uKGEpe2E9YS5sYXllcjtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5HcmlkKXthLmV2ZW50cy5vbih7YWRkdGlsZTp0aGlzLmFkZFRpbGUscmV0aWxlOnRoaXMuY2xlYXJUaWxlUXVldWUsc2NvcGU6dGhpc30pO3ZhciBiLGMsZDtmb3IoYj1hLmdyaWQubGVuZ3RoLQoxOzA8PWI7LS1iKWZvcihjPWEuZ3JpZFtiXS5sZW5ndGgtMTswPD1jOy0tYylkPWEuZ3JpZFtiXVtjXSx0aGlzLmFkZFRpbGUoe3RpbGU6ZH0pLGQudXJsJiYhZC5pbWdEaXYmJnRoaXMubWFuYWdlVGlsZUNhY2hlKHtvYmplY3Q6ZH0pfX0scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24oYSl7YT1hLmxheWVyO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLkdyaWQmJih0aGlzLmNsZWFyVGlsZVF1ZXVlKHtvYmplY3Q6YX0pLGEuZXZlbnRzJiZhLmV2ZW50cy51bih7YWRkdGlsZTp0aGlzLmFkZFRpbGUscmV0aWxlOnRoaXMuY2xlYXJUaWxlUXVldWUsc2NvcGU6dGhpc30pLGEuZ3JpZCkpe3ZhciBiLGMsZDtmb3IoYj1hLmdyaWQubGVuZ3RoLTE7MDw9YjstLWIpZm9yKGM9YS5ncmlkW2JdLmxlbmd0aC0xOzA8PWM7LS1jKWQ9YS5ncmlkW2JdW2NdLHRoaXMudW5sb2FkVGlsZSh7b2JqZWN0OmR9KX19LHVwZGF0ZVRpbWVvdXQ6ZnVuY3Rpb24oYSxiLGMpe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aWxlUXVldWVJZFthLmlkXSk7CnZhciBkPXRoaXMudGlsZVF1ZXVlW2EuaWRdO2lmKCFjfHxkLmxlbmd0aCl0aGlzLnRpbGVRdWV1ZUlkW2EuaWRdPXdpbmRvdy5zZXRUaW1lb3V0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe3RoaXMuZHJhd1RpbGVzRnJvbVF1ZXVlKGEpO2QubGVuZ3RoJiZ0aGlzLnVwZGF0ZVRpbWVvdXQoYSx0aGlzLmZyYW1lRGVsYXkpfSx0aGlzKSxiKX0sYWRkVGlsZTpmdW5jdGlvbihhKXtpZihhLnRpbGUgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UpYS50aWxlLmV2ZW50cy5vbih7YmVmb3JlZHJhdzp0aGlzLnF1ZXVlVGlsZURyYXcsYmVmb3JlbG9hZDp0aGlzLm1hbmFnZVRpbGVDYWNoZSxsb2FkZW5kOnRoaXMuYWRkVG9DYWNoZSx1bmxvYWQ6dGhpcy51bmxvYWRUaWxlLHNjb3BlOnRoaXN9KTtlbHNlIHRoaXMucmVtb3ZlTGF5ZXIoe2xheWVyOmEudGlsZS5sYXllcn0pfSx1bmxvYWRUaWxlOmZ1bmN0aW9uKGEpe2E9YS5vYmplY3Q7YS5ldmVudHMudW4oe2JlZm9yZWRyYXc6dGhpcy5xdWV1ZVRpbGVEcmF3LApiZWZvcmVsb2FkOnRoaXMubWFuYWdlVGlsZUNhY2hlLGxvYWRlbmQ6dGhpcy5hZGRUb0NhY2hlLHVubG9hZDp0aGlzLnVubG9hZFRpbGUsc2NvcGU6dGhpc30pO09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMudGlsZVF1ZXVlW2EubGF5ZXIubWFwLmlkXSxhKX0scXVldWVUaWxlRHJhdzpmdW5jdGlvbihhKXthPWEub2JqZWN0O3ZhciBiPSExLGM9YS5sYXllcixkPWMuZ2V0VVJMKGEuYm91bmRzKSxlPXRoaXMudGlsZUNhY2hlW2RdO2UmJiJvbFRpbGVJbWFnZSIhPT1lLmNsYXNzTmFtZSYmKGRlbGV0ZSB0aGlzLnRpbGVDYWNoZVtkXSxPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnRpbGVDYWNoZUluZGV4LGQpLGU9bnVsbCk7IWMudXJsfHwhYy5hc3luYyYmZXx8KGI9dGhpcy50aWxlUXVldWVbYy5tYXAuaWRdLH5PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihiLGEpfHxiLnB1c2goYSksYj0hMCk7cmV0dXJuIWJ9LGRyYXdUaWxlc0Zyb21RdWV1ZTpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy50aWxlUXVldWVbYS5pZF0sYz10aGlzLnRpbGVzUGVyRnJhbWU7Zm9yKGE9YS56b29tVHdlZW4mJmEuem9vbVR3ZWVuLnBsYXlpbmc7IWEmJmIubGVuZ3RoJiZjOyliLnNoaWZ0KCkuZHJhdyghMCksLS1jfSxtYW5hZ2VUaWxlQ2FjaGU6ZnVuY3Rpb24oYSl7YT1hLm9iamVjdDt2YXIgYj10aGlzLnRpbGVDYWNoZVthLnVybF07YiYmKGIucGFyZW50Tm9kZSYmT3BlbkxheWVycy5FbGVtZW50Lmhhc0NsYXNzKGIucGFyZW50Tm9kZSwib2xCYWNrQnVmZmVyIikmJihiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYi5pZD1udWxsKSxiLnBhcmVudE5vZGV8fChiLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiIsYi5zdHlsZS5vcGFjaXR5PTAsYS5zZXRJbWFnZShiKSxPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnRpbGVDYWNoZUluZGV4LGEudXJsKSx0aGlzLnRpbGVDYWNoZUluZGV4LnB1c2goYS51cmwpKSl9LGFkZFRvQ2FjaGU6ZnVuY3Rpb24oYSl7YT1hLm9iamVjdDsKdGhpcy50aWxlQ2FjaGVbYS51cmxdfHxPcGVuTGF5ZXJzLkVsZW1lbnQuaGFzQ2xhc3MoYS5pbWdEaXYsIm9sSW1hZ2VMb2FkRXJyb3IiKXx8KHRoaXMudGlsZUNhY2hlSW5kZXgubGVuZ3RoPj10aGlzLmNhY2hlU2l6ZSYmKGRlbGV0ZSB0aGlzLnRpbGVDYWNoZVt0aGlzLnRpbGVDYWNoZUluZGV4WzBdXSx0aGlzLnRpbGVDYWNoZUluZGV4LnNoaWZ0KCkpLHRoaXMudGlsZUNhY2hlW2EudXJsXT1hLmltZ0Rpdix0aGlzLnRpbGVDYWNoZUluZGV4LnB1c2goYS51cmwpKX0sY2xlYXJUaWxlUXVldWU6ZnVuY3Rpb24oYSl7YT1hLm9iamVjdDtmb3IodmFyIGI9dGhpcy50aWxlUXVldWVbYS5tYXAuaWRdLGM9Yi5sZW5ndGgtMTswPD1jOy0tYyliW2NdLmxheWVyPT09YSYmYi5zcGxpY2UoYywxKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLm1hcHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy5yZW1vdmVNYXAodGhpcy5tYXBzW2FdKTt0aGlzLnRpbGVDYWNoZUluZGV4PXRoaXMudGlsZUNhY2hlPQp0aGlzLnRpbGVRdWV1ZUlkPXRoaXMudGlsZVF1ZXVlPXRoaXMubWFwcz1udWxsO3RoaXMuX2Rlc3Ryb3llZD0hMH19KTsK",
                "body": "LyoKCiAgT3BlbkxheWVycy5qcyAtLSBPcGVuTGF5ZXJzIE1hcCBWaWV3ZXIgTGlicmFyeQoKICBDb3B5cmlnaHQgKGMpIDIwMDYtMjAxMyBieSBPcGVuTGF5ZXJzIENvbnRyaWJ1dG9ycwogIFB1Ymxpc2hlZCB1bmRlciB0aGUgMi1jbGF1c2UgQlNEIGxpY2Vuc2UuCiAgU2VlIGh0dHA6Ly9vcGVubGF5ZXJzLm9yZy9kZXYvbGljZW5zZS50eHQgZm9yIHRoZSBmdWxsIHRleHQgb2YgdGhlIGxpY2Vuc2UsIGFuZCBodHRwOi8vb3BlbmxheWVycy5vcmcvZGV2L2F1dGhvcnMudHh0IGZvciBmdWxsIGxpc3Qgb2YgY29udHJpYnV0b3JzLgoKICBJbmNsdWRlcyBjb21wcmVzc2VkIGNvZGUgdW5kZXIgdGhlIGZvbGxvd2luZyBsaWNlbnNlczoKCiAgKEZvciB1bmNvbXByZXNzZWQgdmVyc2lvbnMgb2YgdGhlIGNvZGUgdXNlZCwgcGxlYXNlIHNlZSB0aGUKICBPcGVuTGF5ZXJzIEdpdGh1YiByZXBvc2l0b3J5OiA8aHR0cHM6Ly9naXRodWIuY29tL29wZW5sYXllcnMvb3BlbmxheWVycz4pCgoqLwoKLyoqCiAqIENvbnRhaW5zIFhNTEh0dHBSZXF1ZXN0LmpzIDxodHRwOi8vY29kZS5nb29nbGUuY29tL3AveG1saHR0cHJlcXVlc3QvPgogKiBDb3B5cmlnaHQgMjAwNyBTZXJnZXkgSWxpbnNreSAoaHR0cDovL3d3dy5pbGluc2t5LmNvbSkKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKi8KCi8qKgogKiBPcGVuTGF5ZXJzLlV0aWwucGFnZVBvc2l0aW9uIGlzIGJhc2VkIG9uIFlhaG9vJ3MgZ2V0WFkgbWV0aG9kLCB3aGljaCBpcwogKiBDb3B5cmlnaHQgKGMpIDIwMDYsIFlhaG9vISBJbmMuCiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIAogKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIG9mIHRoaXMgc29mdHdhcmUgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3IKICogd2l0aG91dCBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMKICogYXJlIG1ldDoKICogCiAqICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLAogKiAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAqIAogKiAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwKICogICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uCiAqICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCiAqIAogKiAqIE5laXRoZXIgdGhlIG5hbWUgb2YgWWFob28hIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIG1heSBiZQogKiAgIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQKICogICBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24gb2YgWWFob28hIEluYy4KICogCiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTIElTIgogKiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFCiAqIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFCiAqIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRQogKiBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SCiAqIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GCiAqIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUwogKiBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTgogKiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKQogKiBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSAKICogUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiAqLwp2YXIgT3BlbkxheWVycz17VkVSU0lPTl9OVU1CRVI6IlJlbGVhc2UgMi4xMy4xIixzaW5nbGVGaWxlOiEwLF9nZXRTY3JpcHRMb2NhdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT0vKF58KC4qP1wvKSkoT3BlbkxheWVyc1teXC9dKj9cLmpzKShcP3wkKS8sYj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IiksYyxkPSIiLGU9MCxmPWIubGVuZ3RoO2U8ZjtlKyspaWYoYz1iW2VdLmdldEF0dHJpYnV0ZSgic3JjIikpaWYoYz1jLm1hdGNoKGEpKXtkPWNbMV07YnJlYWt9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGR9fSgpLEltZ1BhdGg6IiJ9O09wZW5MYXllcnMuU3RyaW5nPXtzdGFydHNXaXRoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDA9PWEuaW5kZXhPZihiKX0sY29udGFpbnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4tMSE9YS5pbmRleE9mKGIpfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL15cc1xzKi8sIiIpLnJlcGxhY2UoL1xzXHMqJC8sIiIpfSxjYW1lbGl6ZTpmdW5jdGlvbihhKXthPWEuc3BsaXQoIi0iKTtmb3IodmFyIGI9YVswXSxjPTEsZD1hLmxlbmd0aDtjPGQ7YysrKXZhciBlPWFbY10sYj1iKyhlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyaW5nKDEpKTtyZXR1cm4gYn0sZm9ybWF0OmZ1bmN0aW9uKGEsYixjKXtifHwoYj13aW5kb3cpO3JldHVybiBhLnJlcGxhY2UoT3BlbkxheWVycy5TdHJpbmcudG9rZW5SZWdFeCxmdW5jdGlvbihhLGUpe2Zvcih2YXIgZixnPWUuc3BsaXQoL1wuKy8pLGg9MDtoPGcubGVuZ3RoO2grKyl7MD09aCYmKGY9Yik7aWYodm9pZCAwPT09ZilicmVhazsKZj1mW2dbaF1dfSJmdW5jdGlvbiI9PXR5cGVvZiBmJiYoZj1jP2YuYXBwbHkobnVsbCxjKTpmKCkpO3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZj8idW5kZWZpbmVkIjpmfSl9LHRva2VuUmVnRXg6L1wkXHsoW1x3Ll0rPylcfS9nLG51bWJlclJlZ0V4Oi9eKFsrLV0/KSg/PVxkfFwuXGQpXGQqKFwuXGQqKT8oW0VlXShbKy1dP1xkKykpPyQvLGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcubnVtYmVyUmVnRXgudGVzdChhKX0sbnVtZXJpY0lmOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTshMD09PWImJihudWxsIT1hJiZhLnJlcGxhY2UpJiYoYT1hLnJlcGxhY2UoL15ccyp8XHMqJC9nLCIiKSk7cmV0dXJuIE9wZW5MYXllcnMuU3RyaW5nLmlzTnVtZXJpYyhhKT9wYXJzZUZsb2F0KGEpOmN9fTsKT3BlbkxheWVycy5OdW1iZXI9e2RlY2ltYWxTZXBhcmF0b3I6Ii4iLHRob3VzYW5kc1NlcGFyYXRvcjoiLCIsbGltaXRTaWdEaWdzOmZ1bmN0aW9uKGEsYil7dmFyIGM9MDswPGImJihjPXBhcnNlRmxvYXQoYS50b1ByZWNpc2lvbihiKSkpO3JldHVybiBjfSxmb3JtYXQ6ZnVuY3Rpb24oYSxiLGMsZCl7Yj0idW5kZWZpbmVkIiE9dHlwZW9mIGI/YjowO2M9InVuZGVmaW5lZCIhPXR5cGVvZiBjP2M6T3BlbkxheWVycy5OdW1iZXIudGhvdXNhbmRzU2VwYXJhdG9yO2Q9InVuZGVmaW5lZCIhPXR5cGVvZiBkP2Q6T3BlbkxheWVycy5OdW1iZXIuZGVjaW1hbFNlcGFyYXRvcjtudWxsIT1iJiYoYT1wYXJzZUZsb2F0KGEudG9GaXhlZChiKSkpO3ZhciBlPWEudG9TdHJpbmcoKS5zcGxpdCgiLiIpOzE9PWUubGVuZ3RoJiZudWxsPT1iJiYoYj0wKTthPWVbMF07aWYoYylmb3IodmFyIGY9LygtP1swLTldKykoWzAtOV17M30pLztmLnRlc3QoYSk7KWE9YS5yZXBsYWNlKGYsIiQxIitjKyIkMiIpOwowPT1iP2I9YTooYz0xPGUubGVuZ3RoP2VbMV06IjAiLG51bGwhPWImJihjKz1BcnJheShiLWMubGVuZ3RoKzEpLmpvaW4oIjAiKSksYj1hK2QrYyk7cmV0dXJuIGJ9LHplcm9QYWQ6ZnVuY3Rpb24oYSxiLGMpe2ZvcihhPWEudG9TdHJpbmcoY3x8MTApO2EubGVuZ3RoPGI7KWE9IjAiK2E7cmV0dXJuIGF9fTsKT3BlbkxheWVycy5GdW5jdGlvbj17YmluZDpmdW5jdGlvbihhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMsWzJdKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzLFswXSkpO3JldHVybiBhLmFwcGx5KGIsZCl9fSxiaW5kQXNFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBhLmNhbGwoYixjfHx3aW5kb3cuZXZlbnQpfX0sRmFsc2U6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sVHJ1ZTpmdW5jdGlvbigpe3JldHVybiEwfSxWb2lkOmZ1bmN0aW9uKCl7fX07Ck9wZW5MYXllcnMuQXJyYXk9e2ZpbHRlcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W107aWYoQXJyYXkucHJvdG90eXBlLmZpbHRlcilkPWEuZmlsdGVyKGIsYyk7ZWxzZXt2YXIgZT1hLmxlbmd0aDtpZigiZnVuY3Rpb24iIT10eXBlb2YgYil0aHJvdyBuZXcgVHlwZUVycm9yO2Zvcih2YXIgZj0wO2Y8ZTtmKyspaWYoZiBpbiBhKXt2YXIgZz1hW2ZdO2IuY2FsbChjLGcsZixhKSYmZC5wdXNoKGcpfX1yZXR1cm4gZH19O09wZW5MYXllcnMuQ2xhc3M9ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoLGI9YXJndW1lbnRzWzBdLGM9YXJndW1lbnRzW2EtMV0sZD0iZnVuY3Rpb24iPT10eXBlb2YgYy5pbml0aWFsaXplP2MuaW5pdGlhbGl6ZTpmdW5jdGlvbigpe2IucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTsxPGE/KGE9W2QsYl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuc2xpY2UoMSxhLTEpLGMpLE9wZW5MYXllcnMuaW5oZXJpdC5hcHBseShudWxsLGEpKTpkLnByb3RvdHlwZT1jO3JldHVybiBkfTsKT3BlbkxheWVycy5pbmhlcml0PWZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt9O2MucHJvdG90eXBlPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO3ZhciBkLGUsYz0yO2ZvcihkPWFyZ3VtZW50cy5sZW5ndGg7YzxkO2MrKyllPWFyZ3VtZW50c1tjXSwiZnVuY3Rpb24iPT09dHlwZW9mIGUmJihlPWUucHJvdG90eXBlKSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEucHJvdG90eXBlLGUpfTtPcGVuTGF5ZXJzLlV0aWw9T3BlbkxheWVycy5VdGlsfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kPWZ1bmN0aW9uKGEsYil7YT1hfHx7fTtpZihiKXtmb3IodmFyIGMgaW4gYil7dmFyIGQ9YltjXTt2b2lkIDAhPT1kJiYoYVtjXT1kKX0iZnVuY3Rpb24iPT10eXBlb2Ygd2luZG93LkV2ZW50JiZiIGluc3RhbmNlb2Ygd2luZG93LkV2ZW50fHwoIWIuaGFzT3duUHJvcGVydHl8fCFiLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpKXx8KGEudG9TdHJpbmc9Yi50b1N0cmluZyl9cmV0dXJuIGF9O09wZW5MYXllcnMuQm91bmRzPU9wZW5MYXllcnMuQ2xhc3Moe2xlZnQ6bnVsbCxib3R0b206bnVsbCxyaWdodDpudWxsLHRvcDpudWxsLGNlbnRlckxvbkxhdDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkmJihkPWFbM10sYz1hWzJdLGI9YVsxXSxhPWFbMF0pO251bGwhPWEmJih0aGlzLmxlZnQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSkpO251bGwhPWImJih0aGlzLmJvdHRvbT1PcGVuTGF5ZXJzLlV0aWwudG9GbG9hdChiKSk7bnVsbCE9YyYmKHRoaXMucmlnaHQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYykpO251bGwhPWQmJih0aGlzLnRvcD1PcGVuTGF5ZXJzLlV0aWwudG9GbG9hdChkKSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmxlZnQsdGhpcy5ib3R0b20sdGhpcy5yaWdodCx0aGlzLnRvcCl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT0KYSYmKGI9dGhpcy5sZWZ0PT1hLmxlZnQmJnRoaXMucmlnaHQ9PWEucmlnaHQmJnRoaXMudG9wPT1hLnRvcCYmdGhpcy5ib3R0b209PWEuYm90dG9tKTtyZXR1cm4gYn0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5sZWZ0LHRoaXMuYm90dG9tLHRoaXMucmlnaHQsdGhpcy50b3BdLmpvaW4oKX0sdG9BcnJheTpmdW5jdGlvbihhKXtyZXR1cm4hMD09PWE/W3RoaXMuYm90dG9tLHRoaXMubGVmdCx0aGlzLnRvcCx0aGlzLnJpZ2h0XTpbdGhpcy5sZWZ0LHRoaXMuYm90dG9tLHRoaXMucmlnaHQsdGhpcy50b3BdfSx0b0JCT1g6ZnVuY3Rpb24oYSxiKXtudWxsPT1hJiYoYT02KTt2YXIgYz1NYXRoLnBvdygxMCxhKSxkPU1hdGgucm91bmQodGhpcy5sZWZ0KmMpL2MsZT1NYXRoLnJvdW5kKHRoaXMuYm90dG9tKmMpL2MsZj1NYXRoLnJvdW5kKHRoaXMucmlnaHQqYykvYyxjPU1hdGgucm91bmQodGhpcy50b3AqYykvYztyZXR1cm4hMD09PWI/ZSsiLCIrZCsiLCIrYysiLCIrZjpkKwoiLCIrZSsiLCIrZisiLCIrY30sdG9HZW9tZXRyeTpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCh0aGlzLmxlZnQsdGhpcy5ib3R0b20pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMucmlnaHQsdGhpcy5ib3R0b20pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMucmlnaHQsdGhpcy50b3ApLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMubGVmdCx0aGlzLnRvcCldKV0pfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0LXRoaXMubGVmdH0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9wLXRoaXMuYm90dG9tfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUodGhpcy5nZXRXaWR0aCgpLHRoaXMuZ2V0SGVpZ2h0KCkpfSwKZ2V0Q2VudGVyUGl4ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUGl4ZWwoKHRoaXMubGVmdCt0aGlzLnJpZ2h0KS8yLCh0aGlzLmJvdHRvbSt0aGlzLnRvcCkvMil9LGdldENlbnRlckxvbkxhdDpmdW5jdGlvbigpe3RoaXMuY2VudGVyTG9uTGF0fHwodGhpcy5jZW50ZXJMb25MYXQ9bmV3IE9wZW5MYXllcnMuTG9uTGF0KCh0aGlzLmxlZnQrdGhpcy5yaWdodCkvMiwodGhpcy5ib3R0b20rdGhpcy50b3ApLzIpKTtyZXR1cm4gdGhpcy5jZW50ZXJMb25MYXR9LHNjYWxlOmZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9dGhpcy5nZXRDZW50ZXJMb25MYXQoKSk7dmFyIGMsZDsiT3BlbkxheWVycy5Mb25MYXQiPT1iLkNMQVNTX05BTUU/KGM9Yi5sb24sZD1iLmxhdCk6KGM9Yi54LGQ9Yi55KTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKCh0aGlzLmxlZnQtYykqYStjLCh0aGlzLmJvdHRvbS1kKSphK2QsKHRoaXMucmlnaHQtYykqYStjLCh0aGlzLnRvcC1kKSphKwpkKX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJCb3VuZHMuYWRkIGNhbm5vdCByZWNlaXZlIG51bGwgdmFsdWVzIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmxlZnQrYSx0aGlzLmJvdHRvbStiLHRoaXMucmlnaHQrYSx0aGlzLnRvcCtiKX0sZXh0ZW5kOmZ1bmN0aW9uKGEpe2lmKGEpc3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5Mb25MYXQiOnRoaXMuZXh0ZW5kWFkoYS5sb24sYS5sYXQpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOnRoaXMuZXh0ZW5kWFkoYS54LGEueSk7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5Cb3VuZHMiOnRoaXMuY2VudGVyTG9uTGF0PW51bGw7aWYobnVsbD09dGhpcy5sZWZ0fHxhLmxlZnQ8dGhpcy5sZWZ0KXRoaXMubGVmdD1hLmxlZnQ7aWYobnVsbD09dGhpcy5ib3R0b218fGEuYm90dG9tPHRoaXMuYm90dG9tKXRoaXMuYm90dG9tPQphLmJvdHRvbTtpZihudWxsPT10aGlzLnJpZ2h0fHxhLnJpZ2h0PnRoaXMucmlnaHQpdGhpcy5yaWdodD1hLnJpZ2h0O2lmKG51bGw9PXRoaXMudG9wfHxhLnRvcD50aGlzLnRvcCl0aGlzLnRvcD1hLnRvcH19LGV4dGVuZFhZOmZ1bmN0aW9uKGEsYil7dGhpcy5jZW50ZXJMb25MYXQ9bnVsbDtpZihudWxsPT10aGlzLmxlZnR8fGE8dGhpcy5sZWZ0KXRoaXMubGVmdD1hO2lmKG51bGw9PXRoaXMuYm90dG9tfHxiPHRoaXMuYm90dG9tKXRoaXMuYm90dG9tPWI7aWYobnVsbD09dGhpcy5yaWdodHx8YT50aGlzLnJpZ2h0KXRoaXMucmlnaHQ9YTtpZihudWxsPT10aGlzLnRvcHx8Yj50aGlzLnRvcCl0aGlzLnRvcD1ifSxjb250YWluc0xvbkxhdDpmdW5jdGlvbihhLGIpeyJib29sZWFuIj09PXR5cGVvZiBiJiYoYj17aW5jbHVzaXZlOmJ9KTtiPWJ8fHt9O3ZhciBjPXRoaXMuY29udGFpbnMoYS5sb24sYS5sYXQsYi5pbmNsdXNpdmUpLGQ9Yi53b3JsZEJvdW5kcztkJiYhYyYmKGM9ZC5nZXRXaWR0aCgpLApkPU1hdGgucm91bmQoKGEubG9uLShkLmxlZnQrZC5yaWdodCkvMikvYyksYz10aGlzLmNvbnRhaW5zTG9uTGF0KHtsb246YS5sb24tZCpjLGxhdDphLmxhdH0se2luY2x1c2l2ZTpiLmluY2x1c2l2ZX0pKTtyZXR1cm4gY30sY29udGFpbnNQaXhlbDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNvbnRhaW5zKGEueCxhLnksYil9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1jJiYoYz0hMCk7aWYobnVsbD09YXx8bnVsbD09YilyZXR1cm4hMTthPU9wZW5MYXllcnMuVXRpbC50b0Zsb2F0KGEpO2I9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYik7dmFyIGQ9ITE7cmV0dXJuIGQ9Yz9hPj10aGlzLmxlZnQmJmE8PXRoaXMucmlnaHQmJmI+PXRoaXMuYm90dG9tJiZiPD10aGlzLnRvcDphPnRoaXMubGVmdCYmYTx0aGlzLnJpZ2h0JiZiPnRoaXMuYm90dG9tJiZiPHRoaXMudG9wfSxpbnRlcnNlY3RzQm91bmRzOmZ1bmN0aW9uKGEsYil7ImJvb2xlYW4iPT09dHlwZW9mIGImJihiPQp7aW5jbHVzaXZlOmJ9KTtiPWJ8fHt9O2lmKGIud29ybGRCb3VuZHMpe3ZhciBjPXRoaXMud3JhcERhdGVMaW5lKGIud29ybGRCb3VuZHMpO2E9YS53cmFwRGF0ZUxpbmUoYi53b3JsZEJvdW5kcyl9ZWxzZSBjPXRoaXM7bnVsbD09Yi5pbmNsdXNpdmUmJihiLmluY2x1c2l2ZT0hMCk7dmFyIGQ9ITEsZT1jLmxlZnQ9PWEucmlnaHR8fGMucmlnaHQ9PWEubGVmdHx8Yy50b3A9PWEuYm90dG9tfHxjLmJvdHRvbT09YS50b3A7aWYoYi5pbmNsdXNpdmV8fCFlKXZhciBkPWEudG9wPj1jLmJvdHRvbSYmYS50b3A8PWMudG9wfHxjLnRvcD5hLmJvdHRvbSYmYy50b3A8YS50b3AsZT1hLmxlZnQ+PWMubGVmdCYmYS5sZWZ0PD1jLnJpZ2h0fHxjLmxlZnQ+PWEubGVmdCYmYy5sZWZ0PD1hLnJpZ2h0LGY9YS5yaWdodD49Yy5sZWZ0JiZhLnJpZ2h0PD1jLnJpZ2h0fHxjLnJpZ2h0Pj1hLmxlZnQmJmMucmlnaHQ8PWEucmlnaHQsZD0oYS5ib3R0b20+PWMuYm90dG9tJiZhLmJvdHRvbTw9Yy50b3B8fGMuYm90dG9tPj0KYS5ib3R0b20mJmMuYm90dG9tPD1hLnRvcHx8ZCkmJihlfHxmKTtpZihiLndvcmxkQm91bmRzJiYhZCl7dmFyIGc9Yi53b3JsZEJvdW5kcyxlPWcuZ2V0V2lkdGgoKSxmPSFnLmNvbnRhaW5zQm91bmRzKGMpLGc9IWcuY29udGFpbnNCb3VuZHMoYSk7ZiYmIWc/KGE9YS5hZGQoLWUsMCksZD1jLmludGVyc2VjdHNCb3VuZHMoYSx7aW5jbHVzaXZlOmIuaW5jbHVzaXZlfSkpOmcmJiFmJiYoYz1jLmFkZCgtZSwwKSxkPWEuaW50ZXJzZWN0c0JvdW5kcyhjLHtpbmNsdXNpdmU6Yi5pbmNsdXNpdmV9KSl9cmV0dXJuIGR9LGNvbnRhaW5zQm91bmRzOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1iJiYoYj0hMSk7bnVsbD09YyYmKGM9ITApO3ZhciBkPXRoaXMuY29udGFpbnMoYS5sZWZ0LGEuYm90dG9tLGMpLGU9dGhpcy5jb250YWlucyhhLnJpZ2h0LGEuYm90dG9tLGMpLGY9dGhpcy5jb250YWlucyhhLmxlZnQsYS50b3AsYyk7YT10aGlzLmNvbnRhaW5zKGEucmlnaHQsYS50b3AsYyk7cmV0dXJuIGI/CmR8fGV8fGZ8fGE6ZCYmZSYmZiYmYX0sZGV0ZXJtaW5lUXVhZHJhbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYz10aGlzLmdldENlbnRlckxvbkxhdCgpLGI9YisoYS5sYXQ8Yy5sYXQ/ImIiOiJ0Iik7cmV0dXJuIGIrPWEubG9uPGMubG9uPyJsIjoiciJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe3RoaXMuY2VudGVyTG9uTGF0PW51bGw7dmFyIGM9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh7eDp0aGlzLmxlZnQseTp0aGlzLmJvdHRvbX0sYSxiKSxkPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5yaWdodCx5OnRoaXMuYm90dG9tfSxhLGIpLGU9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh7eDp0aGlzLmxlZnQseTp0aGlzLnRvcH0sYSxiKSxmPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5yaWdodCx5OnRoaXMudG9wfSxhLGIpO3RoaXMubGVmdD1NYXRoLm1pbihjLngsZS54KTt0aGlzLmJvdHRvbT1NYXRoLm1pbihjLnksCmQueSk7dGhpcy5yaWdodD1NYXRoLm1heChkLngsZi54KTt0aGlzLnRvcD1NYXRoLm1heChlLnksZi55KTtyZXR1cm4gdGhpc30sd3JhcERhdGVMaW5lOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLmxlZnRUb2xlcmFuY2V8fDAsZD1iLnJpZ2h0VG9sZXJhbmNlfHwwLGU9dGhpcy5jbG9uZSgpO2lmKGEpe2Zvcih2YXIgZj1hLmdldFdpZHRoKCk7ZS5sZWZ0PGEubGVmdCYmZS5yaWdodC1kPD1hLmxlZnQ7KWU9ZS5hZGQoZiwwKTtmb3IoO2UubGVmdCtjPj1hLnJpZ2h0JiZlLnJpZ2h0PmEucmlnaHQ7KWU9ZS5hZGQoLWYsMCk7Yz1lLmxlZnQrYztjPGEucmlnaHQmJihjPmEubGVmdCYmZS5yaWdodC1kPmEucmlnaHQpJiYoZT1lLmFkZCgtZiwwKSl9cmV0dXJuIGV9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQm91bmRzIn0pOwpPcGVuTGF5ZXJzLkJvdW5kcy5mcm9tU3RyaW5nPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zcGxpdCgiLCIpO3JldHVybiBPcGVuTGF5ZXJzLkJvdW5kcy5mcm9tQXJyYXkoYyxiKX07T3BlbkxheWVycy5Cb3VuZHMuZnJvbUFycmF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuITA9PT1iP25ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhWzFdLGFbMF0sYVszXSxhWzJdKTpuZXcgT3BlbkxheWVycy5Cb3VuZHMoYVswXSxhWzFdLGFbMl0sYVszXSl9O09wZW5MYXllcnMuQm91bmRzLmZyb21TaXplPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCxhLmgsYS53LDApfTtPcGVuTGF5ZXJzLkJvdW5kcy5vcHBvc2l0ZVF1YWRyYW50PWZ1bmN0aW9uKGEpe3ZhciBiO2I9IiIrKCJ0Ij09YS5jaGFyQXQoMCk/ImIiOiJ0Iik7cmV0dXJuIGIrPSJsIj09YS5jaGFyQXQoMSk/InIiOiJsIn07T3BlbkxheWVycy5FbGVtZW50PXt2aXNpYmxlOmZ1bmN0aW9uKGEpe3JldHVybiJub25lIiE9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSkuc3R5bGUuZGlzcGxheX0sdG9nZ2xlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj1hcmd1bWVudHMubGVuZ3RoO2E8YjthKyspe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGFyZ3VtZW50c1thXSksZD1PcGVuTGF5ZXJzLkVsZW1lbnQudmlzaWJsZShjKT8ibm9uZSI6IiI7Yy5zdHlsZS5kaXNwbGF5PWR9fSxyZW1vdmU6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9LGdldEhlaWdodDpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3JldHVybiBhLm9mZnNldEhlaWdodH0saGFzQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNsYXNzTmFtZTtyZXR1cm4hIWMmJlJlZ0V4cCgiKF58XFxzKSIrYisiKFxcc3wkKSIpLnRlc3QoYyl9LAphZGRDbGFzczpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuRWxlbWVudC5oYXNDbGFzcyhhLGIpfHwoYS5jbGFzc05hbWUrPShhLmNsYXNzTmFtZT8iICI6IiIpK2IpO3JldHVybiBhfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuY2xhc3NOYW1lO2MmJihhLmNsYXNzTmFtZT1PcGVuTGF5ZXJzLlN0cmluZy50cmltKGMucmVwbGFjZShSZWdFeHAoIihefFxccyspIitiKyIoXFxzK3wkKSIpLCIgIikpKTtyZXR1cm4gYX0sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkVsZW1lbnQuaGFzQ2xhc3MoYSxiKT9PcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoYSxiKTpPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoYSxiKTtyZXR1cm4gYX0sZ2V0U3R5bGU6ZnVuY3Rpb24oYSxiKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3ZhciBjPW51bGw7aWYoYSYmYS5zdHlsZSl7Yz1hLnN0eWxlW09wZW5MYXllcnMuU3RyaW5nLmNhbWVsaXplKGIpXTsKY3x8KGRvY3VtZW50LmRlZmF1bHRWaWV3JiZkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlP2M9KGM9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpKT9jLmdldFByb3BlcnR5VmFsdWUoYik6bnVsbDphLmN1cnJlbnRTdHlsZSYmKGM9YS5jdXJyZW50U3R5bGVbT3BlbkxheWVycy5TdHJpbmcuY2FtZWxpemUoYildKSk7dmFyIGQ9WyJsZWZ0IiwidG9wIiwicmlnaHQiLCJib3R0b20iXTt3aW5kb3cub3BlcmEmJigtMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YoZCxiKSYmInN0YXRpYyI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpKSYmKGM9ImF1dG8iKX1yZXR1cm4iYXV0byI9PWM/bnVsbDpjfX07T3BlbkxheWVycy5Mb25MYXQ9T3BlbkxheWVycy5DbGFzcyh7bG9uOjAsbGF0OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpJiYoYj1hWzFdLGE9YVswXSk7dGhpcy5sb249T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSk7dGhpcy5sYXQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYil9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuImxvbj0iK3RoaXMubG9uKyIsbGF0PSIrdGhpcy5sYXR9LHRvU2hvcnRTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb24rIiwgIit0aGlzLmxhdH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuTG9uTGF0KHRoaXMubG9uLHRoaXMubGF0KX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJMb25MYXQuYWRkIGNhbm5vdCByZWNlaXZlIG51bGwgdmFsdWVzIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdCh0aGlzLmxvbisKT3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSksdGhpcy5sYXQrT3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYikpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7bnVsbCE9YSYmKGI9dGhpcy5sb249PWEubG9uJiZ0aGlzLmxhdD09YS5sYXR8fGlzTmFOKHRoaXMubG9uKSYmaXNOYU4odGhpcy5sYXQpJiZpc05hTihhLmxvbikmJmlzTmFOKGEubGF0KSk7cmV0dXJuIGJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5sb24seTp0aGlzLmxhdH0sYSxiKTt0aGlzLmxvbj1jLng7dGhpcy5sYXQ9Yy55O3JldHVybiB0aGlzfSx3cmFwRGF0ZUxpbmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jbG9uZSgpO2lmKGEpe2Zvcig7Yi5sb248YS5sZWZ0OyliLmxvbis9YS5nZXRXaWR0aCgpO2Zvcig7Yi5sb24+YS5yaWdodDspYi5sb24tPWEuZ2V0V2lkdGgoKX1yZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Mb25MYXQifSk7Ck9wZW5MYXllcnMuTG9uTGF0LmZyb21TdHJpbmc9ZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCIsIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhWzBdLGFbMV0pfTtPcGVuTGF5ZXJzLkxvbkxhdC5mcm9tQXJyYXk9ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChiJiZhWzBdLGImJmFbMV0pfTtPcGVuTGF5ZXJzLlBpeGVsPU9wZW5MYXllcnMuQ2xhc3Moe3g6MCx5OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMueD1wYXJzZUZsb2F0KGEpO3RoaXMueT1wYXJzZUZsb2F0KGIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ4PSIrdGhpcy54KyIseT0iK3RoaXMueX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUGl4ZWwodGhpcy54LHRoaXMueSl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT1hJiYoYj10aGlzLng9PWEueCYmdGhpcy55PT1hLnl8fGlzTmFOKHRoaXMueCkmJmlzTmFOKHRoaXMueSkmJmlzTmFOKGEueCkmJmlzTmFOKGEueSkpO3JldHVybiBifSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codGhpcy54LWEueCwyKStNYXRoLnBvdyh0aGlzLnktYS55LDIpKX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJQaXhlbC5hZGQgY2Fubm90IHJlY2VpdmUgbnVsbCB2YWx1ZXMiKTsKcmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlBpeGVsKHRoaXMueCthLHRoaXMueStiKX0sb2Zmc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2xvbmUoKTthJiYoYj10aGlzLmFkZChhLngsYS55KSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUGl4ZWwifSk7T3BlbkxheWVycy5TaXplPU9wZW5MYXllcnMuQ2xhc3Moe3c6MCxoOjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMudz1wYXJzZUZsb2F0KGEpO3RoaXMuaD1wYXJzZUZsb2F0KGIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ3PSIrdGhpcy53KyIsaD0iK3RoaXMuaH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuU2l6ZSh0aGlzLncsdGhpcy5oKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO251bGwhPWEmJihiPXRoaXMudz09YS53JiZ0aGlzLmg9PWEuaHx8aXNOYU4odGhpcy53KSYmaXNOYU4odGhpcy5oKSYmaXNOYU4oYS53KSYmaXNOYU4oYS5oKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU2l6ZSJ9KTtPcGVuTGF5ZXJzLkNvbnNvbGU9e2xvZzpmdW5jdGlvbigpe30sZGVidWc6ZnVuY3Rpb24oKXt9LGluZm86ZnVuY3Rpb24oKXt9LHdhcm46ZnVuY3Rpb24oKXt9LGVycm9yOmZ1bmN0aW9uKCl7fSx1c2VyRXJyb3I6ZnVuY3Rpb24oYSl7YWxlcnQoYSl9LGFzc2VydDpmdW5jdGlvbigpe30sZGlyOmZ1bmN0aW9uKCl7fSxkaXJ4bWw6ZnVuY3Rpb24oKXt9LHRyYWNlOmZ1bmN0aW9uKCl7fSxncm91cDpmdW5jdGlvbigpe30sZ3JvdXBFbmQ6ZnVuY3Rpb24oKXt9LHRpbWU6ZnVuY3Rpb24oKXt9LHRpbWVFbmQ6ZnVuY3Rpb24oKXt9LHByb2ZpbGU6ZnVuY3Rpb24oKXt9LHByb2ZpbGVFbmQ6ZnVuY3Rpb24oKXt9LGNvdW50OmZ1bmN0aW9uKCl7fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnNvbGUifTsKKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKSxiPTAsYz1hLmxlbmd0aDtiPGM7KytiKWlmKC0xIT1hW2JdLnNyYy5pbmRleE9mKCJmaXJlYnVnLmpzIikmJmNvbnNvbGUpe09wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5Db25zb2xlLGNvbnNvbGUpO2JyZWFrfX0pKCk7T3BlbkxheWVycy5MYW5nPXtjb2RlOm51bGwsZGVmYXVsdENvZGU6ImVuIixnZXRDb2RlOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYW5nLmNvZGV8fE9wZW5MYXllcnMuTGFuZy5zZXRDb2RlKCk7cmV0dXJuIE9wZW5MYXllcnMuTGFuZy5jb2RlfSxzZXRDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2F8fChhPSJtc2llIj09T3BlbkxheWVycy5CUk9XU0VSX05BTUU/bmF2aWdhdG9yLnVzZXJMYW5ndWFnZTpuYXZpZ2F0b3IubGFuZ3VhZ2UpO2E9YS5zcGxpdCgiLSIpO2FbMF09YVswXS50b0xvd2VyQ2FzZSgpOyJvYmplY3QiPT10eXBlb2YgT3BlbkxheWVycy5MYW5nW2FbMF1dJiYoYj1hWzBdKTtpZihhWzFdKXt2YXIgYz1hWzBdKyItIithWzFdLnRvVXBwZXJDYXNlKCk7Im9iamVjdCI9PXR5cGVvZiBPcGVuTGF5ZXJzLkxhbmdbY10mJihiPWMpfWJ8fChPcGVuTGF5ZXJzLkNvbnNvbGUud2FybigiRmFpbGVkIHRvIGZpbmQgT3BlbkxheWVycy5MYW5nLiIrYS5qb2luKCItIikrIiBkaWN0aW9uYXJ5LCBmYWxsaW5nIGJhY2sgdG8gZGVmYXVsdCBsYW5ndWFnZSIpLApiPU9wZW5MYXllcnMuTGFuZy5kZWZhdWx0Q29kZSk7T3BlbkxheWVycy5MYW5nLmNvZGU9Yn0sdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5MYW5nW09wZW5MYXllcnMuTGFuZy5nZXRDb2RlKCldOyhjPWMmJmNbYV0pfHwoYz1hKTtiJiYoYz1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQoYyxiKSk7cmV0dXJuIGN9fTtPcGVuTGF5ZXJzLmkxOG49T3BlbkxheWVycy5MYW5nLnRyYW5zbGF0ZTtPcGVuTGF5ZXJzLlV0aWw9T3BlbkxheWVycy5VdGlsfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFyZ3VtZW50c1tiXTsic3RyaW5nIj09dHlwZW9mIGQmJihkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGQpKTtpZigxPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkO2EucHVzaChkKX1yZXR1cm4gYX07T3BlbkxheWVycy5VdGlsLmlzRWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm4hKCFhfHwxIT09YS5ub2RlVHlwZSl9O09wZW5MYXllcnMuVXRpbC5pc0FycmF5PWZ1bmN0aW9uKGEpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9O09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEubGVuZ3RoLTE7MDw9YztjLS0pYVtjXT09YiYmYS5zcGxpY2UoYywxKTtyZXR1cm4gYX07Ck9wZW5MYXllcnMuVXRpbC5pbmRleE9mPWZ1bmN0aW9uKGEsYil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGEuaW5kZXhPZilyZXR1cm4gYS5pbmRleE9mKGIpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT1iKXJldHVybiBjO3JldHVybi0xfTtPcGVuTGF5ZXJzLlV0aWwuZG90bGVzcz0vXC4vZzsKT3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXtiJiYoYS5pZD1iLnJlcGxhY2UoT3BlbkxheWVycy5VdGlsLmRvdGxlc3MsIl8iKSk7YyYmKGEuc3R5bGUubGVmdD1jLngrInB4IixhLnN0eWxlLnRvcD1jLnkrInB4Iik7ZCYmKGEuc3R5bGUud2lkdGg9ZC53KyJweCIsYS5zdHlsZS5oZWlnaHQ9ZC5oKyJweCIpO2UmJihhLnN0eWxlLnBvc2l0aW9uPWUpO2YmJihhLnN0eWxlLmJvcmRlcj1mKTtnJiYoYS5zdHlsZS5vdmVyZmxvdz1nKTswPD1wYXJzZUZsb2F0KGgpJiYxPnBhcnNlRmxvYXQoaCk/KGEuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrMTAwKmgrIikiLGEuc3R5bGUub3BhY2l0eT1oKToxPT1wYXJzZUZsb2F0KGgpJiYoYS5zdHlsZS5maWx0ZXI9IiIsYS5zdHlsZS5vcGFjaXR5PSIiKX07Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXY9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXt2YXIgaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtkJiYoay5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9InVybCgiK2QrIikiKTthfHwoYT1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQoIk9wZW5MYXllcnNEaXYiKSk7ZXx8KGU9ImFic29sdXRlIik7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoayxhLGIsYyxlLGYsZyxoKTtyZXR1cm4ga307Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVJbWFnZT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgpe3ZhciBrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpO2F8fChhPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiT3BlbkxheWVyc0RpdiIpKTtlfHwoZT0icmVsYXRpdmUiKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5RE9NRWxlbWVudChrLGEsYixjLGUsZixudWxsLGcpO2gmJihrLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGI9ZnVuY3Rpb24oKXtrLnN0eWxlLmRpc3BsYXk9IiI7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudChrKX0sT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGssImxvYWQiLGIpLE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShrLCJlcnJvciIsYikpO2suc3R5bGUuYWx0PWE7ay5nYWxsZXJ5SW1nPSJubyI7ZCYmKGsuc3JjPWQpO3JldHVybiBrfTtPcGVuTGF5ZXJzLklNQUdFX1JFTE9BRF9BVFRFTVBUUz0wOwpPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrTmVlZGVkPW51bGw7T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaz1mdW5jdGlvbigpe2lmKG51bGw9PU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWQpe3ZhciBhPW5hdmlnYXRvci5hcHBWZXJzaW9uLnNwbGl0KCJNU0lFIiksYT1wYXJzZUZsb2F0KGFbMV0pLGI9ITE7dHJ5e2I9ISFkb2N1bWVudC5ib2R5LmZpbHRlcnN9Y2F0Y2goYyl7fU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWQ9YiYmNS41PD1hJiY3PmF9cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWR9OwpPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdj1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayl7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYSxiLGMsZCxmLG51bGwsbnVsbCxrKTtiPWEuY2hpbGROb2Rlc1swXTtlJiYoYi5zcmM9ZSk7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYixhLmlkKyJfaW5uZXJJbWFnZSIsbnVsbCxkLCJyZWxhdGl2ZSIsZyk7T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaygpJiYoIm5vbmUiIT1hLnN0eWxlLmRpc3BsYXkmJihhLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIpLG51bGw9PWgmJihoPSJzY2FsZSIpLGEuc3R5bGUuZmlsdGVyPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGFJbWFnZUxvYWRlcihzcmM9JyIrYi5zcmMrIicsIHNpemluZ01ldGhvZD0nIitoKyInKSIsMDw9cGFyc2VGbG9hdChhLnN0eWxlLm9wYWNpdHkpJiYxPnBhcnNlRmxvYXQoYS5zdHlsZS5vcGFjaXR5KSYmCihhLnN0eWxlLmZpbHRlcis9IiBhbHBoYShvcGFjaXR5PSIrMTAwKmEuc3R5bGUub3BhY2l0eSsiKSIpLGIuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PTApIil9O09wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrKXt2YXIgbD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KCk7az1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlSW1hZ2UobnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxrKTtrLmNsYXNzTmFtZT0ib2xBbHBoYUltZyI7bC5hcHBlbmRDaGlsZChrKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdihsLGEsYixjLGQsZSxmLGcsaCk7cmV0dXJuIGx9O09wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3Q9ZnVuY3Rpb24oYSl7dmFyIGI9e30sYztmb3IoYyBpbiBhKWJbYy50b1VwcGVyQ2FzZSgpXT1hW2NdO3JldHVybiBifTsKT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHM9ZnVuY3Rpb24oYSxiKXthPWF8fHt9O3ZhciBjPSJmdW5jdGlvbiI9PXR5cGVvZiB3aW5kb3cuRXZlbnQmJmIgaW5zdGFuY2VvZiB3aW5kb3cuRXZlbnQsZDtmb3IoZCBpbiBiKWlmKHZvaWQgMD09PWFbZF18fCFjJiZiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KGQpJiYhYS5oYXNPd25Qcm9wZXJ0eShkKSlhW2RdPWJbZF07IWMmJihiJiZiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpJiYhYS5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSkmJihhLnRvU3RyaW5nPWIudG9TdHJpbmcpO3JldHVybiBhfTsKT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlclN0cmluZz1mdW5jdGlvbihhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107aWYobnVsbCE9ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGQpe2lmKCJvYmplY3QiPT10eXBlb2YgZCYmZC5jb25zdHJ1Y3Rvcj09QXJyYXkpe2Zvcih2YXIgZT1bXSxmLGc9MCxoPWQubGVuZ3RoO2c8aDtnKyspZj1kW2ddLGUucHVzaChlbmNvZGVVUklDb21wb25lbnQobnVsbD09PWZ8fHZvaWQgMD09PWY/IiI6ZikpO2Q9ZS5qb2luKCIsIil9ZWxzZSBkPWVuY29kZVVSSUNvbXBvbmVudChkKTtiLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGMpKyI9IitkKX19cmV0dXJuIGIuam9pbigiJiIpfTtPcGVuTGF5ZXJzLlV0aWwudXJsQXBwZW5kPWZ1bmN0aW9uKGEsYil7dmFyIGM9YTtpZihiKXZhciBkPShhKyIgIikuc3BsaXQoL1s/Jl0vKSxjPWMrKCIgIj09PWQucG9wKCk/YjpkLmxlbmd0aD8iJiIrYjoiPyIrYik7cmV0dXJuIGN9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VzTG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5JbWdQYXRofHxPcGVuTGF5ZXJzLl9nZXRTY3JpcHRMb2NhdGlvbigpKyJpbWcvIn07T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZXNMb2NhdGlvbigpK2F9O09wZW5MYXllcnMuVXRpbC5Ucnk9ZnVuY3Rpb24oKXtmb3IodmFyIGE9bnVsbCxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFyZ3VtZW50c1tiXTt0cnl7YT1kKCk7YnJlYWt9Y2F0Y2goZSl7fX1yZXR1cm4gYX07Ck9wZW5MYXllcnMuVXRpbC5nZXRYbWxOb2RlVmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtPcGVuTGF5ZXJzLlV0aWwuVHJ5KGZ1bmN0aW9uKCl7Yj1hLnRleHQ7Ynx8KGI9YS50ZXh0Q29udGVudCk7Ynx8KGI9YS5maXJzdENoaWxkLm5vZGVWYWx1ZSl9LGZ1bmN0aW9uKCl7Yj1hLnRleHRDb250ZW50fSk7cmV0dXJuIGJ9O09wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5yZWxhdGVkVGFyZ2V0P2EucmVsYXRlZFRhcmdldDphLnRvRWxlbWVudDtjIT1iJiZudWxsIT1jOyljPWMucGFyZW50Tm9kZTtyZXR1cm4gYyE9Yn07T3BlbkxheWVycy5VdGlsLkRFRkFVTFRfUFJFQ0lTSU9OPTE0O09wZW5MYXllcnMuVXRpbC50b0Zsb2F0PWZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9T3BlbkxheWVycy5VdGlsLkRFRkFVTFRfUFJFQ0lTSU9OKTsibnVtYmVyIiE9PXR5cGVvZiBhJiYoYT1wYXJzZUZsb2F0KGEpKTtyZXR1cm4gMD09PWI/YTpwYXJzZUZsb2F0KGEudG9QcmVjaXNpb24oYikpfTsKT3BlbkxheWVycy5VdGlsLnJhZD1mdW5jdGlvbihhKXtyZXR1cm4gYSpNYXRoLlBJLzE4MH07T3BlbkxheWVycy5VdGlsLmRlZz1mdW5jdGlvbihhKXtyZXR1cm4gMTgwKmEvTWF0aC5QSX07T3BlbkxheWVycy5VdGlsLlZpbmNlbnR5Q29uc3RhbnRzPXthOjYzNzgxMzcsYjo2MzU2NzUyLjMxNDIsZjoxLzI5OC4yNTcyMjM1NjN9OwpPcGVuTGF5ZXJzLlV0aWwuZGlzdFZpbmNlbnR5PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPU9wZW5MYXllcnMuVXRpbC5WaW5jZW50eUNvbnN0YW50cyxkPWMuYSxlPWMuYixjPWMuZixmPU9wZW5MYXllcnMuVXRpbC5yYWQoYi5sb24tYS5sb24pLGc9TWF0aC5hdGFuKCgxLWMpKk1hdGgudGFuKE9wZW5MYXllcnMuVXRpbC5yYWQoYS5sYXQpKSksaD1NYXRoLmF0YW4oKDEtYykqTWF0aC50YW4oT3BlbkxheWVycy5VdGlsLnJhZChiLmxhdCkpKSxrPU1hdGguc2luKGcpLGc9TWF0aC5jb3MoZyksbD1NYXRoLnNpbihoKSxoPU1hdGguY29zKGgpLG09ZixwPTIqTWF0aC5QSSxuPTIwOzFFLTEyPE1hdGguYWJzKG0tcCkmJjA8LS1uOyl7dmFyIHE9TWF0aC5zaW4obSkscj1NYXRoLmNvcyhtKSxzPU1hdGguc3FydChoKnEqaCpxKyhnKmwtaypoKnIpKihnKmwtaypoKnIpKTtpZigwPT1zKXJldHVybiAwO3ZhciByPWsqbCtnKmgqcix0PU1hdGguYXRhbjIocyxyKSx1PU1hdGguYXNpbihnKmgqCnEvcyksdj1NYXRoLmNvcyh1KSpNYXRoLmNvcyh1KSxxPXItMiprKmwvdix3PWMvMTYqdiooNCtjKig0LTMqdikpLHA9bSxtPWYrKDEtdykqYypNYXRoLnNpbih1KSoodCt3KnMqKHErdypyKigtMSsyKnEqcSkpKX1pZigwPT1uKXJldHVybiBOYU47ZD12KihkKmQtZSplKS8oZSplKTtjPWQvMTAyNCooMjU2K2QqKC0xMjgrZCooNzQtNDcqZCkpKTtyZXR1cm4oZSooMStkLzE2Mzg0Kig0MDk2K2QqKC03NjgrZCooMzIwLTE3NSpkKSkpKSoodC1jKnMqKHErYy80KihyKigtMSsyKnEqcSktYy82KnEqKC0zKzQqcypzKSooLTMrNCpxKnEpKSkpKS50b0ZpeGVkKDMpLzFFM307Ck9wZW5MYXllcnMuVXRpbC5kZXN0aW5hdGlvblZpbmNlbnR5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1PcGVuTGF5ZXJzLlV0aWwsZT1kLlZpbmNlbnR5Q29uc3RhbnRzLGY9ZS5hLGc9ZS5iLGg9ZS5mLGU9YS5sb247YT1hLmxhdDt2YXIgaz1kLnJhZChiKTtiPU1hdGguc2luKGspO2s9TWF0aC5jb3Moayk7YT0oMS1oKSpNYXRoLnRhbihkLnJhZChhKSk7dmFyIGw9MS9NYXRoLnNxcnQoMSthKmEpLG09YSpsLHA9TWF0aC5hdGFuMihhLGspO2E9bCpiO2Zvcih2YXIgbj0xLWEqYSxmPW4qKGYqZi1nKmcpLyhnKmcpLHE9MStmLzE2Mzg0Kig0MDk2K2YqKC03NjgrZiooMzIwLTE3NSpmKSkpLHI9Zi8xMDI0KigyNTYrZiooLTEyOCtmKig3NC00NypmKSkpLGY9Yy8oZypxKSxzPTIqTWF0aC5QSTsxRS0xMjxNYXRoLmFicyhmLXMpOyl2YXIgdD1NYXRoLmNvcygyKnArZiksdT1NYXRoLnNpbihmKSx2PU1hdGguY29zKGYpLHc9cip1Kih0K3IvNCoodiooLTErMip0KnQpLXIvNip0KigtMys0Kgp1KnUpKigtMys0KnQqdCkpKSxzPWYsZj1jLyhnKnEpK3c7Yz1tKnUtbCp2Kms7Zz1NYXRoLmF0YW4yKG0qditsKnUqaywoMS1oKSpNYXRoLnNxcnQoYSphK2MqYykpO2I9TWF0aC5hdGFuMih1KmIsbCp2LW0qdSprKTtrPWgvMTYqbiooNCtoKig0LTMqbikpO3Q9Yi0oMS1rKSpoKmEqKGYrayp1Kih0K2sqdiooLTErMip0KnQpKSk7TWF0aC5hdGFuMihhLC1jKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuTG9uTGF0KGUrZC5kZWcodCksZC5kZWcoZykpfTsKT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnM9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2E9bnVsbD09PWF8fHZvaWQgMD09PWE/d2luZG93LmxvY2F0aW9uLmhyZWY6YTt2YXIgYz0iIjtpZihPcGVuTGF5ZXJzLlN0cmluZy5jb250YWlucyhhLCI/IikpdmFyIGQ9YS5pbmRleE9mKCI/IikrMSxjPU9wZW5MYXllcnMuU3RyaW5nLmNvbnRhaW5zKGEsIiMiKT9hLmluZGV4T2YoIiMiKTphLmxlbmd0aCxjPWEuc3Vic3RyaW5nKGQsYyk7Zm9yKHZhciBkPXt9LGM9Yy5zcGxpdCgvWyY7XS8pLGU9MCxmPWMubGVuZ3RoO2U8ZjsrK2Upe3ZhciBnPWNbZV0uc3BsaXQoIj0iKTtpZihnWzBdKXt2YXIgaD1nWzBdO3RyeXtoPWRlY29kZVVSSUNvbXBvbmVudChoKX1jYXRjaChrKXtoPXVuZXNjYXBlKGgpfWc9KGdbMV18fCIiKS5yZXBsYWNlKC9cKy9nLCIgIik7dHJ5e2c9ZGVjb2RlVVJJQ29tcG9uZW50KGcpfWNhdGNoKGwpe2c9dW5lc2NhcGUoZyl9ITEhPT1iLnNwbGl0QXJncyYmKGc9Zy5zcGxpdCgiLCIpKTsKMT09Zy5sZW5ndGgmJihnPWdbMF0pO2RbaF09Z319cmV0dXJuIGR9O09wZW5MYXllcnMuVXRpbC5sYXN0U2VxSUQ9MDtPcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQ9ZnVuY3Rpb24oYSl7YT1udWxsPT1hPyJpZF8iOmEucmVwbGFjZShPcGVuTGF5ZXJzLlV0aWwuZG90bGVzcywiXyIpO09wZW5MYXllcnMuVXRpbC5sYXN0U2VxSUQrPTE7cmV0dXJuIGErT3BlbkxheWVycy5VdGlsLmxhc3RTZXFJRH07T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQ9e2luY2hlczoxLGZ0OjEyLG1pOjYzMzYwLG06MzkuMzcsa206MzkzNzAsZGQ6NDM3NDc1NCx5ZDozNn07T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVRbImluIl09T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuaW5jaGVzO09wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULmRlZ3JlZXM9T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuZGQ7T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubm1pPTE4NTIqT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubTsKT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0g9MC4wMjU0MDAwNTA4MDAxMDE2OwpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKE9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULHtJbmNoOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULmluY2hlcyxNZXRlcjoxL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEZvb3Q6MC4zMDQ4MDA2MDk2MDEyMTkyL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILElGb290OjAuMzA0OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxDbGFya2VGb290OjAuMzA0Nzk3MjY1MTE1MS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxTZWFyc0Zvb3Q6MC4zMDQ3OTk0NzE1Mzg2NzYyNi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxHb2xkQ29hc3RGb290OjAuMzA0Nzk5NzEwMTgxNTA4OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJSW5jaDowLjAyNTQvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWljcm9JbmNoOjIuNTRFLTUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWlsOjIuNTRFLTgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsCkNlbnRpbWV0ZXI6MC4wMS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxLaWxvbWV0ZXI6MUUzL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFlhcmQ6MC45MTQ0MDE4Mjg4MDM2NTc2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFNlYXJzWWFyZDowLjkxNDM5ODQxNDYxNjAyOS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5ZYXJkOjAuOTE0Mzk4NTMwNzQ0NDQwOC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5ZZDM3OjAuOTE0Mzk1MjMvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuWWQ2MjowLjkxNDM5ODgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuWWQ3NTowLjkxNDM5ODUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuRm9vdDowLjMwNDc5OTUxL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEluZGlhbkZ0Mzc6MC4zMDQ3OTg0MS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5GdDYyOjAuMzA0Nzk5Ni8KT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuRnQ3NTowLjMwNDc5OTUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWlsZToxNjA5LjM0NzIxODY5NDQzNzMvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSVlhcmQ6MC45MTQ0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILElNaWxlOjE2MDkuMzQ0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILE5hdXRNOjE4NTIvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsIkxhdC02NiI6MTEwOTQzLjMxNjQ4ODkzMjczL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCJMYXQtODMiOjExMDk0Ni4yNTczNjg3MjIzNS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxEZWNpbWV0ZXI6MC4xL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILE1pbGxpbWV0ZXI6MC4wMDEvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsRGVrYW1ldGVyOjEwL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILERlY2FtZXRlcjoxMC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCwKSGVjdG9tZXRlcjoxMDAvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsR2VybWFuTWV0ZXI6MS4wMDAwMTM1OTY1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENhR3JpZDowLjk5OTczOC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxDbGFya2VDaGFpbjoyMC4xMTY2MTk0OTc2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEd1bnRlckNoYWluOjIwLjExNjg0MDIzMzY4MDQ3L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEJlbm9pdENoYWluOjIwLjExNjc4MjQ5NDM3NTg3Mi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxTZWFyc0NoYWluOjIwLjExNjc2NTEyMTU1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENsYXJrZUxpbms6MC4yMDExNjYxOTQ5NzYvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsR3VudGVyTGluazowLjIwMTE2ODQwMjMzNjgwNDcvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsQmVub2l0TGluazowLjIwMTE2NzgyNDk0Mzc1ODczL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILApTZWFyc0xpbms6MC4yMDExNjc2NTEyMTU1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFJvZDo1LjAyOTIxMDA1ODQyMDEyL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEludG5sQ2hhaW46MjAuMTE2OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbnRubExpbms6MC4yMDExNjgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsUGVyY2g6NS4wMjkyMTAwNTg0MjAxMi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxQb2xlOjUuMDI5MjEwMDU4NDIwMTIvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsRnVybG9uZzoyMDEuMTY4NDAyMzM2ODA0Ni9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxSb29kOjMuNzc4MjY2ODk4L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENhcGVGb290OjAuMzA0Nzk3MjYxNS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxCcmVhbGV5OjM3NS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxNb2RBbUZ0OjAuMzA0ODEyMjUyOTg0NTA2LwpPcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxGYXRob206MS44Mjg4L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCJOYXV0TS1VSyI6MTg1My4xODQvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsIjUwa2lsb21ldGVycyI6NUU0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCIxNTBraWxvbWV0ZXJzIjoxNUU0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNIfSk7Ck9wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQse21tOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1ldGVyLzFFMyxjbTpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5NZXRlci8xMDAsZG06MTAwKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1ldGVyLGttOjFFMypPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5NZXRlcixrbWk6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubm1pLGZhdGg6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuRmF0aG9tLGNoOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULkludG5sQ2hhaW4sbGluazpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5JbnRubExpbmssInVzLWluIjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5pbmNoZXMsInVzLWZ0IjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5Gb290LCJ1cy15ZCI6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuWWFyZCwidXMtY2giOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULkd1bnRlckNoYWluLAoidXMtbWkiOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1pbGUsImluZC15ZCI6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuSW5kaWFuWWQzNywiaW5kLWZ0IjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5JbmRpYW5GdDM3LCJpbmQtY2giOjIwLjExNjY5NTA2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNIfSk7T3BlbkxheWVycy5ET1RTX1BFUl9JTkNIPTcyO09wZW5MYXllcnMuVXRpbC5ub3JtYWxpemVTY2FsZT1mdW5jdGlvbihhKXtyZXR1cm4gMTxhPzEvYTphfTtPcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZT1mdW5jdGlvbihhLGIpe3ZhciBjO2EmJihudWxsPT1iJiYoYj0iZGVncmVlcyIpLGM9MS8oT3BlbkxheWVycy5VdGlsLm5vcm1hbGl6ZVNjYWxlKGEpKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdKk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSCkpO3JldHVybiBjfTsKT3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb249ZnVuY3Rpb24oYSxiKXtudWxsPT1iJiYoYj0iZGVncmVlcyIpO3JldHVybiBhKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdKk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSH07Ck9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9WzAsMF0sYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0Vmlld3BvcnRFbGVtZW50KCk7aWYoIWF8fGE9PXdpbmRvd3x8YT09YylyZXR1cm4gYjt2YXIgZD1PcGVuTGF5ZXJzLklTX0dFQ0tPJiZkb2N1bWVudC5nZXRCb3hPYmplY3RGb3ImJiJhYnNvbHV0ZSI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpJiYoIiI9PWEuc3R5bGUudG9wfHwiIj09YS5zdHlsZS5sZWZ0KSxlPW51bGw7aWYoYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QpYT1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGU9d2luZG93LnBhZ2VZT2Zmc2V0fHxjLnNjcm9sbFRvcCxiWzBdPWEubGVmdCsod2luZG93LnBhZ2VYT2Zmc2V0fHxjLnNjcm9sbExlZnQpLGJbMV09YS50b3ArZTtlbHNlIGlmKGRvY3VtZW50LmdldEJveE9iamVjdEZvciYmIWQpYT1kb2N1bWVudC5nZXRCb3hPYmplY3RGb3IoYSksYz1kb2N1bWVudC5nZXRCb3hPYmplY3RGb3IoYyksCmJbMF09YS5zY3JlZW5YLWMuc2NyZWVuWCxiWzFdPWEuc2NyZWVuWS1jLnNjcmVlblk7ZWxzZXtiWzBdPWEub2Zmc2V0TGVmdDtiWzFdPWEub2Zmc2V0VG9wO2U9YS5vZmZzZXRQYXJlbnQ7aWYoZSE9YSlmb3IoO2U7KWJbMF0rPWUub2Zmc2V0TGVmdCxiWzFdKz1lLm9mZnNldFRvcCxlPWUub2Zmc2V0UGFyZW50O2M9T3BlbkxheWVycy5CUk9XU0VSX05BTUU7aWYoIm9wZXJhIj09Y3x8InNhZmFyaSI9PWMmJiJhYnNvbHV0ZSI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpKWJbMV0tPWRvY3VtZW50LmJvZHkub2Zmc2V0VG9wO2ZvcihlPWEub2Zmc2V0UGFyZW50O2UmJmUhPWRvY3VtZW50LmJvZHk7KXtiWzBdLT1lLnNjcm9sbExlZnQ7aWYoIm9wZXJhIiE9Y3x8IlRSIiE9ZS50YWdOYW1lKWJbMV0tPWUuc2Nyb2xsVG9wO2U9ZS5vZmZzZXRQYXJlbnR9fXJldHVybiBifTsKT3BlbkxheWVycy5VdGlsLmdldFZpZXdwb3J0RWxlbWVudD1mdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cy5jYWxsZWUudmlld3BvcnRFbGVtZW50O3ZvaWQgMD09YSYmKGE9Im1zaWUiPT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRSYmIkNTUzFDb21wYXQiIT1kb2N1bWVudC5jb21wYXRNb2RlP2RvY3VtZW50LmJvZHk6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGFyZ3VtZW50cy5jYWxsZWUudmlld3BvcnRFbGVtZW50PWEpO3JldHVybiBhfTsKT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybD1mdW5jdGlvbihhLGIsYyl7Yz1jfHx7fTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLHtpZ25vcmVDYXNlOiEwLGlnbm9yZVBvcnQ4MDohMCxpZ25vcmVIYXNoOiEwLHNwbGl0QXJnczohMX0pO2E9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChhLGMpO2I9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChiLGMpO2Zvcih2YXIgZCBpbiBhKWlmKCJhcmdzIiE9PWQmJmFbZF0hPWJbZF0pcmV0dXJuITE7Zm9yKGQgaW4gYS5hcmdzKXtpZihhLmFyZ3NbZF0hPWIuYXJnc1tkXSlyZXR1cm4hMTtkZWxldGUgYi5hcmdzW2RdfWZvcihkIGluIGIuYXJncylyZXR1cm4hMTtyZXR1cm4hMH07Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVVcmxPYmplY3Q9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2lmKCEvXlx3KzpcL1wvLy50ZXN0KGEpKXt2YXIgYz13aW5kb3cubG9jYXRpb24sZD1jLnBvcnQ/IjoiK2MucG9ydDoiIixkPWMucHJvdG9jb2wrIi8vIitjLmhvc3Quc3BsaXQoIjoiKS5zaGlmdCgpK2Q7MD09PWEuaW5kZXhPZigiLyIpP2E9ZCthOihjPWMucGF0aG5hbWUuc3BsaXQoIi8iKSxjLnBvcCgpLGE9ZCtjLmpvaW4oIi8iKSsiLyIrYSl9Yi5pZ25vcmVDYXNlJiYoYT1hLnRvTG93ZXJDYXNlKCkpO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO2MuaHJlZj1hO2Q9e307ZC5ob3N0PWMuaG9zdC5zcGxpdCgiOiIpLnNoaWZ0KCk7ZC5wcm90b2NvbD1jLnByb3RvY29sO2QucG9ydD1iLmlnbm9yZVBvcnQ4MD8iODAiPT1jLnBvcnR8fCIwIj09Yy5wb3J0PyIiOmMucG9ydDoiIj09Yy5wb3J0fHwiMCI9PWMucG9ydD8iODAiOmMucG9ydDtkLmhhc2g9Yi5pZ25vcmVIYXNofHwiIyI9PT0KYy5oYXNoPyIiOmMuaGFzaDt2YXIgZT1jLnNlYXJjaDtlfHwoZT1hLmluZGV4T2YoIj8iKSxlPS0xIT1lP2Euc3Vic3RyKGUpOiIiKTtkLmFyZ3M9T3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoZSx7c3BsaXRBcmdzOmIuc3BsaXRBcmdzfSk7ZC5wYXRobmFtZT0iLyI9PWMucGF0aG5hbWUuY2hhckF0KDApP2MucGF0aG5hbWU6Ii8iK2MucGF0aG5hbWU7cmV0dXJuIGR9O09wZW5MYXllcnMuVXRpbC5yZW1vdmVUYWlsPWZ1bmN0aW9uKGEpe3ZhciBiPW51bGwsYj1hLmluZGV4T2YoIj8iKSxjPWEuaW5kZXhPZigiIyIpO3JldHVybiBiPS0xPT1iPy0xIT1jP2Euc3Vic3RyKDAsYyk6YTotMSE9Yz9hLnN1YnN0cigwLE1hdGgubWluKGIsYykpOmEuc3Vic3RyKDAsYil9O09wZW5MYXllcnMuSVNfR0VDS089ZnVuY3Rpb24oKXt2YXIgYT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7cmV0dXJuLTE9PWEuaW5kZXhPZigid2Via2l0IikmJi0xIT1hLmluZGV4T2YoImdlY2tvIil9KCk7Ck9wZW5MYXllcnMuQ0FOVkFTX1NVUFBPUlRFRD1mdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO3JldHVybiEoIWEuZ2V0Q29udGV4dHx8IWEuZ2V0Q29udGV4dCgiMmQiKSl9KCk7T3BlbkxheWVycy5CUk9XU0VSX05BTUU9ZnVuY3Rpb24oKXt2YXIgYT0iIixiPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTstMSE9Yi5pbmRleE9mKCJvcGVyYSIpP2E9Im9wZXJhIjotMSE9Yi5pbmRleE9mKCJtc2llIik/YT0ibXNpZSI6LTEhPWIuaW5kZXhPZigic2FmYXJpIik/YT0ic2FmYXJpIjotMSE9Yi5pbmRleE9mKCJtb3ppbGxhIikmJihhPS0xIT1iLmluZGV4T2YoImZpcmVmb3giKT8iZmlyZWZveCI6Im1vemlsbGEiKTtyZXR1cm4gYX0oKTtPcGVuTGF5ZXJzLlV0aWwuZ2V0QnJvd3Nlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5CUk9XU0VSX05BTUV9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0UmVuZGVyZWREaW1lbnNpb25zPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2Zvcih2YXIgZz1jJiZjLmNvbnRhaW5lckVsZW1lbnQ/Yy5jb250YWluZXJFbGVtZW50OmRvY3VtZW50LmJvZHksaD0hMSxrPW51bGwsbD1nO2wmJiJib2R5IiE9bC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7KXt2YXIgbT1PcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUobCwicG9zaXRpb24iKTtpZigiYWJzb2x1dGUiPT1tKXtoPSEwO2JyZWFrfWVsc2UgaWYobSYmInN0YXRpYyIhPW0pYnJlYWs7bD1sLnBhcmVudE5vZGV9IWh8fDAhPT1nLmNsaWVudEhlaWdodCYmMCE9PWcuY2xpZW50V2lkdGh8fChrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGsuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIixrLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIsay5zdHlsZS5vdmVyZmxvdz0KInZpc2libGUiLGsuc3R5bGUud2lkdGg9ZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCsicHgiLGsuc3R5bGUuaGVpZ2h0PWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KyJweCIsay5hcHBlbmRDaGlsZChmKSk7Zi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2ImJihiLnc/KGQ9Yi53LGYuc3R5bGUud2lkdGg9ZCsicHgiKTpiLmgmJihlPWIuaCxmLnN0eWxlLmhlaWdodD1lKyJweCIpKTtjJiZjLmRpc3BsYXlDbGFzcyYmKGYuY2xhc3NOYW1lPWMuZGlzcGxheUNsYXNzKTtiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2IuaW5uZXJIVE1MPWE7Yi5zdHlsZS5vdmVyZmxvdz0idmlzaWJsZSI7aWYoYi5jaGlsZE5vZGVzKWZvcihhPTAsYz1iLmNoaWxkTm9kZXMubGVuZ3RoO2E8YzthKyspYi5jaGlsZE5vZGVzW2FdLnN0eWxlJiYoYi5jaGlsZE5vZGVzW2FdLnN0eWxlLm92ZXJmbG93PSJ2aXNpYmxlIik7Zi5hcHBlbmRDaGlsZChiKTtrP2cuYXBwZW5kQ2hpbGQoayk6Zy5hcHBlbmRDaGlsZChmKTsKZHx8KGQ9cGFyc2VJbnQoYi5zY3JvbGxXaWR0aCksZi5zdHlsZS53aWR0aD1kKyJweCIpO2V8fChlPXBhcnNlSW50KGIuc2Nyb2xsSGVpZ2h0KSk7Zi5yZW1vdmVDaGlsZChiKTtrPyhrLnJlbW92ZUNoaWxkKGYpLGcucmVtb3ZlQ2hpbGQoaykpOmcucmVtb3ZlQ2hpbGQoZik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUoZCxlKX07Ck9wZW5MYXllcnMuVXRpbC5nZXRTY3JvbGxiYXJXaWR0aD1mdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuVXRpbC5fc2Nyb2xsYmFyV2lkdGg7aWYobnVsbD09YSl7dmFyIGI9bnVsbCxjPW51bGwsYj1hPTAsYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtiLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Yi5zdHlsZS50b3A9Ii0xMDAwcHgiO2Iuc3R5bGUubGVmdD0iLTEwMDBweCI7Yi5zdHlsZS53aWR0aD0iMTAwcHgiO2Iuc3R5bGUuaGVpZ2h0PSI1MHB4IjtiLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yy5zdHlsZS53aWR0aD0iMTAwJSI7Yy5zdHlsZS5oZWlnaHQ9IjIwMHB4IjtiLmFwcGVuZENoaWxkKGMpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYik7YT1jLm9mZnNldFdpZHRoO2Iuc3R5bGUub3ZlcmZsb3c9InNjcm9sbCI7Yj1jLm9mZnNldFdpZHRoO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuYm9keS5sYXN0Q2hpbGQpOwpPcGVuTGF5ZXJzLlV0aWwuX3Njcm9sbGJhcldpZHRoPWEtYjthPU9wZW5MYXllcnMuVXRpbC5fc2Nyb2xsYmFyV2lkdGh9cmV0dXJuIGF9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0Rm9ybWF0dGVkTG9uTGF0PWZ1bmN0aW9uKGEsYixjKXtjfHwoYz0iZG1zIik7YT0oYSs1NDApJTM2MC0xODA7dmFyIGQ9TWF0aC5hYnMoYSksZT1NYXRoLmZsb29yKGQpLGY9ZD0oZC1lKS8oMS82MCksZD1NYXRoLmZsb29yKGQpLGY9TWF0aC5yb3VuZCgxMCooKGYtZCkvKDEvNjApKSksZj1mLzEwOzYwPD1mJiYoZi09NjAsZCs9MSw2MDw9ZCYmKGQtPTYwLGUrPTEpKTsxMD5lJiYoZT0iMCIrZSk7ZSs9Ilx1MDBiMCI7MDw9Yy5pbmRleE9mKCJkbSIpJiYoMTA+ZCYmKGQ9IjAiK2QpLGUrPWQrIiciLDA8PWMuaW5kZXhPZigiZG1zIikmJigxMD5mJiYoZj0iMCIrZiksZSs9ZisnIicpKTtyZXR1cm4gZT0ibG9uIj09Yj9lKygwPmE/T3BlbkxheWVycy5pMThuKCJXIik6T3BlbkxheWVycy5pMThuKCJFIikpOmUrKDA+YT9PcGVuTGF5ZXJzLmkxOG4oIlMiKTpPcGVuTGF5ZXJzLmkxOG4oIk4iKSl9O09wZW5MYXllcnMuRXZlbnQ9e29ic2VydmVyczohMSxLRVlfU1BBQ0U6MzIsS0VZX0JBQ0tTUEFDRTo4LEtFWV9UQUI6OSxLRVlfUkVUVVJOOjEzLEtFWV9FU0M6MjcsS0VZX0xFRlQ6MzcsS0VZX1VQOjM4LEtFWV9SSUdIVDozOSxLRVlfRE9XTjo0MCxLRVlfREVMRVRFOjQ2LGVsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudGFyZ2V0fHxhLnNyY0VsZW1lbnR9LGlzU2luZ2xlVG91Y2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudG91Y2hlcyYmMT09YS50b3VjaGVzLmxlbmd0aH0saXNNdWx0aVRvdWNoOmZ1bmN0aW9uKGEpe3JldHVybiBhLnRvdWNoZXMmJjE8YS50b3VjaGVzLmxlbmd0aH0saXNMZWZ0Q2xpY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIGEud2hpY2gmJjE9PWEud2hpY2h8fGEuYnV0dG9uJiYxPT1hLmJ1dHRvbn0saXNSaWdodENsaWNrOmZ1bmN0aW9uKGEpe3JldHVybiBhLndoaWNoJiYzPT1hLndoaWNofHxhLmJ1dHRvbiYmMj09YS5idXR0b259LHN0b3A6ZnVuY3Rpb24oYSwKYil7Ynx8T3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKTthLnN0b3BQcm9wYWdhdGlvbj9hLnN0b3BQcm9wYWdhdGlvbigpOmEuY2FuY2VsQnViYmxlPSEwfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExfSxmaW5kRWxlbWVudDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1PcGVuTGF5ZXJzLkV2ZW50LmVsZW1lbnQoYSk7Yy5wYXJlbnROb2RlJiYoIWMudGFnTmFtZXx8Yy50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPWIudG9VcHBlckNhc2UoKSk7KWM9Yy5wYXJlbnROb2RlO3JldHVybiBjfSxvYnNlcnZlOmZ1bmN0aW9uKGEsYixjLGQpe2E9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7ZD1kfHwhMTsia2V5cHJlc3MiPT1iJiYobmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL0tvbnF1ZXJvcnxTYWZhcml8S0hUTUwvKXx8YS5hdHRhY2hFdmVudCkmJihiPSJrZXlkb3duIik7CnRoaXMub2JzZXJ2ZXJzfHwodGhpcy5vYnNlcnZlcnM9e30pO2lmKCFhLl9ldmVudENhY2hlSUQpe3ZhciBlPSJldmVudENhY2hlSURfIjthLmlkJiYoZT1hLmlkKyJfIitlKTthLl9ldmVudENhY2hlSUQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKGUpfWU9YS5fZXZlbnRDYWNoZUlEO3RoaXMub2JzZXJ2ZXJzW2VdfHwodGhpcy5vYnNlcnZlcnNbZV09W10pO3RoaXMub2JzZXJ2ZXJzW2VdLnB1c2goe2VsZW1lbnQ6YSxuYW1lOmIsb2JzZXJ2ZXI6Yyx1c2VDYXB0dXJlOmR9KTthLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKGIsYyxkKTphLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KCJvbiIrYixjKX0sc3RvcE9ic2VydmluZ0VsZW1lbnQ6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKS5fZXZlbnRDYWNoZUlEO3RoaXMuX3JlbW92ZUVsZW1lbnRPYnNlcnZlcnMoT3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnNbYV0pfSwKX3JlbW92ZUVsZW1lbnRPYnNlcnZlcnM6ZnVuY3Rpb24oYSl7aWYoYSlmb3IodmFyIGI9YS5sZW5ndGgtMTswPD1iO2ItLSl7dmFyIGM9YVtiXTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcuYXBwbHkodGhpcyxbYy5lbGVtZW50LGMubmFtZSxjLm9ic2VydmVyLGMudXNlQ2FwdHVyZV0pfX0sc3RvcE9ic2VydmluZzpmdW5jdGlvbihhLGIsYyxkKXtkPWR8fCExO2E9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7dmFyIGU9YS5fZXZlbnRDYWNoZUlEOyJrZXlwcmVzcyI9PWImJihuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvS29ucXVlcm9yfFNhZmFyaXxLSFRNTC8pfHxhLmRldGFjaEV2ZW50KSYmKGI9ImtleWRvd24iKTt2YXIgZj0hMSxnPU9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzW2VdO2lmKGcpZm9yKHZhciBoPTA7IWYmJmg8Zy5sZW5ndGg7KXt2YXIgaz1nW2hdO2lmKGsubmFtZT09YiYmay5vYnNlcnZlcj09YyYmay51c2VDYXB0dXJlPT1kKXtnLnNwbGljZShoLAoxKTswPT1nLmxlbmd0aCYmZGVsZXRlIE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzW2VdO2Y9ITA7YnJlYWt9aCsrfWYmJihhLnJlbW92ZUV2ZW50TGlzdGVuZXI/YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyxkKTphJiZhLmRldGFjaEV2ZW50JiZhLmRldGFjaEV2ZW50KCJvbiIrYixjKSk7cmV0dXJuIGZ9LHVubG9hZENhY2hlOmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5FdmVudCYmT3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnMpe2Zvcih2YXIgYSBpbiBPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmVycylPcGVuTGF5ZXJzLkV2ZW50Ll9yZW1vdmVFbGVtZW50T2JzZXJ2ZXJzLmFwcGx5KHRoaXMsW09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzW2FdXSk7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnM9ITF9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkV2ZW50In07Ck9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh3aW5kb3csInVubG9hZCIsT3BlbkxheWVycy5FdmVudC51bmxvYWRDYWNoZSwhMSk7Ck9wZW5MYXllcnMuRXZlbnRzPU9wZW5MYXllcnMuQ2xhc3Moe0JST1dTRVJfRVZFTlRTOiJtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIGNsaWNrIGRibGNsaWNrIHJpZ2h0Y2xpY2sgZGJscmlnaHRjbGljayByZXNpemUgZm9jdXMgYmx1ciB0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCBrZXlkb3duIi5zcGxpdCgiICIpLGxpc3RlbmVyczpudWxsLG9iamVjdDpudWxsLGVsZW1lbnQ6bnVsbCxldmVudEhhbmRsZXI6bnVsbCxmYWxsVGhyb3VnaDpudWxsLGluY2x1ZGVYWTohMSxleHRlbnNpb25zOm51bGwsZXh0ZW5zaW9uQ291bnQ6bnVsbCxjbGVhck1vdXNlTGlzdGVuZXI6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGUpO3RoaXMub2JqZWN0PWE7dGhpcy5mYWxsVGhyb3VnaD1kO3RoaXMubGlzdGVuZXJzPXt9O3RoaXMuZXh0ZW5zaW9ucz17fTt0aGlzLmV4dGVuc2lvbkNvdW50PQp7fTt0aGlzLl9tc1RvdWNoZXM9W107bnVsbCE9YiYmdGhpcy5hdHRhY2hUb0VsZW1lbnQoYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5leHRlbnNpb25zKSJib29sZWFuIiE9PXR5cGVvZiB0aGlzLmV4dGVuc2lvbnNbYV0mJnRoaXMuZXh0ZW5zaW9uc1thXS5kZXN0cm95KCk7dGhpcy5leHRlbnNpb25zPW51bGw7dGhpcy5lbGVtZW50JiYoT3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudCh0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudC5oYXNTY3JvbGxFdmVudCYmT3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKHdpbmRvdywic2Nyb2xsIix0aGlzLmNsZWFyTW91c2VMaXN0ZW5lcikpO3RoaXMuZXZlbnRIYW5kbGVyPXRoaXMuZmFsbFRocm91Z2g9dGhpcy5vYmplY3Q9dGhpcy5saXN0ZW5lcnM9dGhpcy5lbGVtZW50PW51bGx9LGFkZEV2ZW50VHlwZTpmdW5jdGlvbihhKXt9LGF0dGFjaFRvRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQ/Ck9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZ0VsZW1lbnQodGhpcy5lbGVtZW50KToodGhpcy5ldmVudEhhbmRsZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kQXNFdmVudExpc3RlbmVyKHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LHRoaXMpLHRoaXMuY2xlYXJNb3VzZUxpc3RlbmVyPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLmNsZWFyTW91c2VDYWNoZSx0aGlzKSk7dGhpcy5lbGVtZW50PWE7Zm9yKHZhciBiPSEhd2luZG93Lm5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzLGMsZD0wLGU9dGhpcy5CUk9XU0VSX0VWRU5UUy5sZW5ndGg7ZDxlO2QrKyljPXRoaXMuQlJPV1NFUl9FVkVOVFNbZF0sT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsYyx0aGlzLmV2ZW50SGFuZGxlciksYiYmMD09PWMuaW5kZXhPZigidG91Y2giKSYmdGhpcy5hZGRNc1RvdWNoTGlzdGVuZXIoYSxjLHRoaXMuZXZlbnRIYW5kbGVyKTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiZHJhZ3N0YXJ0IiwKT3BlbkxheWVycy5FdmVudC5zdG9wKX0sb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpInNjb3BlIiE9YiYmYS5oYXNPd25Qcm9wZXJ0eShiKSYmdGhpcy5yZWdpc3RlcihiLGEuc2NvcGUsYVtiXSl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEsYixjLGQpe2EgaW4gT3BlbkxheWVycy5FdmVudHMmJiF0aGlzLmV4dGVuc2lvbnNbYV0mJih0aGlzLmV4dGVuc2lvbnNbYV09bmV3IE9wZW5MYXllcnMuRXZlbnRzW2FdKHRoaXMpKTtpZihudWxsIT1jKXtudWxsPT1iJiYoYj10aGlzLm9iamVjdCk7dmFyIGU9dGhpcy5saXN0ZW5lcnNbYV07ZXx8KGU9W10sdGhpcy5saXN0ZW5lcnNbYV09ZSx0aGlzLmV4dGVuc2lvbkNvdW50W2FdPTApO2I9e29iajpiLGZ1bmM6Y307ZD8oZS5zcGxpY2UodGhpcy5leHRlbnNpb25Db3VudFthXSwwLGIpLCJvYmplY3QiPT09dHlwZW9mIGQmJmQuZXh0ZW5zaW9uJiZ0aGlzLmV4dGVuc2lvbkNvdW50W2FdKyspOmUucHVzaChiKX19LHJlZ2lzdGVyUHJpb3JpdHk6ZnVuY3Rpb24oYSwKYixjKXt0aGlzLnJlZ2lzdGVyKGEsYixjLCEwKX0sdW46ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpInNjb3BlIiE9YiYmYS5oYXNPd25Qcm9wZXJ0eShiKSYmdGhpcy51bnJlZ2lzdGVyKGIsYS5zY29wZSxhW2JdKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhLGIsYyl7bnVsbD09YiYmKGI9dGhpcy5vYmplY3QpO2E9dGhpcy5saXN0ZW5lcnNbYV07aWYobnVsbCE9YSlmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspaWYoYVtkXS5vYmo9PWImJmFbZF0uZnVuYz09Yyl7YS5zcGxpY2UoZCwxKTticmVha319LHJlbW92ZTpmdW5jdGlvbihhKXtudWxsIT10aGlzLmxpc3RlbmVyc1thXSYmKHRoaXMubGlzdGVuZXJzW2FdPVtdKX0sdHJpZ2dlckV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5saXN0ZW5lcnNbYV07aWYoYyYmMCE9Yy5sZW5ndGgpe251bGw9PWImJihiPXt9KTtiLm9iamVjdD10aGlzLm9iamVjdDtiLmVsZW1lbnQ9dGhpcy5lbGVtZW50O2IudHlwZXx8KGIudHlwZT0KYSk7Zm9yKHZhciBjPWMuc2xpY2UoKSxkLGU9MCxmPWMubGVuZ3RoO2U8ZiYmKGQ9Y1tlXSxkPWQuZnVuYy5hcHBseShkLm9iaixbYl0pLHZvaWQgMD09ZHx8ITEhPWQpO2UrKyk7dGhpcy5mYWxsVGhyb3VnaHx8T3BlbkxheWVycy5FdmVudC5zdG9wKGIsITApO3JldHVybiBkfX0saGFuZGxlQnJvd3NlckV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEudHlwZSxjPXRoaXMubGlzdGVuZXJzW2JdO2lmKGMmJjAhPWMubGVuZ3RoKXtpZigoYz1hLnRvdWNoZXMpJiZjWzBdKXtmb3IodmFyIGQ9MCxlPTAsZj1jLmxlbmd0aCxnLGg9MDtoPGY7KytoKWc9dGhpcy5nZXRUb3VjaENsaWVudFhZKGNbaF0pLGQrPWcuY2xpZW50WCxlKz1nLmNsaWVudFk7YS5jbGllbnRYPWQvZjthLmNsaWVudFk9ZS9mfXRoaXMuaW5jbHVkZVhZJiYoYS54eT10aGlzLmdldE1vdXNlUG9zaXRpb24oYSkpO3RoaXMudHJpZ2dlckV2ZW50KGIsYSl9fSxnZXRUb3VjaENsaWVudFhZOmZ1bmN0aW9uKGEpe3ZhciBiPXdpbmRvdy5vbE1vY2tXaW58fAp3aW5kb3csYz1iLnBhZ2VYT2Zmc2V0LGI9Yi5wYWdlWU9mZnNldCxkPWEuY2xpZW50WCxlPWEuY2xpZW50WTtpZigwPT09YS5wYWdlWSYmTWF0aC5mbG9vcihlKT5NYXRoLmZsb29yKGEucGFnZVkpfHwwPT09YS5wYWdlWCYmTWF0aC5mbG9vcihkKT5NYXRoLmZsb29yKGEucGFnZVgpKWQtPWMsZS09YjtlbHNlIGlmKGU8YS5wYWdlWS1ifHxkPGEucGFnZVgtYylkPWEucGFnZVgtYyxlPWEucGFnZVktYjthLm9sQ2xpZW50WD1kO2Eub2xDbGllbnRZPWU7cmV0dXJue2NsaWVudFg6ZCxjbGllbnRZOmV9fSxjbGVhck1vdXNlQ2FjaGU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc2Nyb2xscz1udWxsO3RoaXMuZWxlbWVudC5sZWZ0dG9wPW51bGw7dGhpcy5lbGVtZW50Lm9mZnNldHM9bnVsbH0sZ2V0TW91c2VQb3NpdGlvbjpmdW5jdGlvbihhKXt0aGlzLmluY2x1ZGVYWT90aGlzLmVsZW1lbnQuaGFzU2Nyb2xsRXZlbnR8fChPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUod2luZG93LCJzY3JvbGwiLAp0aGlzLmNsZWFyTW91c2VMaXN0ZW5lciksdGhpcy5lbGVtZW50Lmhhc1Njcm9sbEV2ZW50PSEwKTp0aGlzLmNsZWFyTW91c2VDYWNoZSgpO2lmKCF0aGlzLmVsZW1lbnQuc2Nyb2xscyl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmdldFZpZXdwb3J0RWxlbWVudCgpO3RoaXMuZWxlbWVudC5zY3JvbGxzPVt3aW5kb3cucGFnZVhPZmZzZXR8fGIuc2Nyb2xsTGVmdCx3aW5kb3cucGFnZVlPZmZzZXR8fGIuc2Nyb2xsVG9wXX10aGlzLmVsZW1lbnQubGVmdHRvcHx8KHRoaXMuZWxlbWVudC5sZWZ0dG9wPVtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50TGVmdHx8MCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50VG9wfHwwXSk7dGhpcy5lbGVtZW50Lm9mZnNldHN8fCh0aGlzLmVsZW1lbnQub2Zmc2V0cz1PcGVuTGF5ZXJzLlV0aWwucGFnZVBvc2l0aW9uKHRoaXMuZWxlbWVudCkpO3JldHVybiBuZXcgT3BlbkxheWVycy5QaXhlbChhLmNsaWVudFgrdGhpcy5lbGVtZW50LnNjcm9sbHNbMF0tCnRoaXMuZWxlbWVudC5vZmZzZXRzWzBdLXRoaXMuZWxlbWVudC5sZWZ0dG9wWzBdLGEuY2xpZW50WSt0aGlzLmVsZW1lbnQuc2Nyb2xsc1sxXS10aGlzLmVsZW1lbnQub2Zmc2V0c1sxXS10aGlzLmVsZW1lbnQubGVmdHRvcFsxXSl9LGFkZE1zVG91Y2hMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtjKE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtmb3IodmFyIGE9ZS5sZW5ndGgtMTswPD1hOy0tYSllW2FdLnN0b3BQcm9wYWdhdGlvbigpfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2Zvcih2YXIgYT1lLmxlbmd0aC0xOzA8PWE7LS1hKWVbYV0ucHJldmVudERlZmF1bHQoKX0sdHlwZTpifSxhKSl9dmFyIGU9dGhpcy5fbXNUb3VjaGVzO3N3aXRjaChiKXtjYXNlICJ0b3VjaHN0YXJ0IjpyZXR1cm4gdGhpcy5hZGRNc1RvdWNoTGlzdGVuZXJTdGFydChhLGIsZCk7Y2FzZSAidG91Y2hlbmQiOnJldHVybiB0aGlzLmFkZE1zVG91Y2hMaXN0ZW5lckVuZChhLApiLGQpO2Nhc2UgInRvdWNobW92ZSI6cmV0dXJuIHRoaXMuYWRkTXNUb3VjaExpc3RlbmVyTW92ZShhLGIsZCk7ZGVmYXVsdDp0aHJvdyJVbmtub3duIHRvdWNoIGV2ZW50IHR5cGUiO319LGFkZE1zVG91Y2hMaXN0ZW5lclN0YXJ0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9tc1RvdWNoZXM7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsIk1TUG9pbnRlckRvd24iLGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0hMSxnPTAsaD1kLmxlbmd0aDtnPGg7KytnKWlmKGRbZ10ucG9pbnRlcklkPT1hLnBvaW50ZXJJZCl7Yj0hMDticmVha31ifHxkLnB1c2goYSk7YS50b3VjaGVzPWQuc2xpY2UoKTtjKGEpfSk7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsIk1TUG9pbnRlclVwIixmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWQubGVuZ3RoO2I8YzsrK2IpaWYoZFtiXS5wb2ludGVySWQ9PWEucG9pbnRlcklkKXtkLnNwbGljZShiLDEpO2JyZWFrfX0pfSxhZGRNc1RvdWNoTGlzdGVuZXJNb3ZlOmZ1bmN0aW9uKGEsCmIsYyl7dmFyIGQ9dGhpcy5fbXNUb3VjaGVzO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShhLCJNU1BvaW50ZXJNb3ZlIixmdW5jdGlvbihhKXtpZihhLnBvaW50ZXJUeXBlIT1hLk1TUE9JTlRFUl9UWVBFX01PVVNFfHwwIT1hLmJ1dHRvbnMpaWYoMSE9ZC5sZW5ndGh8fGRbMF0ucGFnZVghPWEucGFnZVh8fGRbMF0ucGFnZVkhPWEucGFnZVkpe2Zvcih2YXIgYj0wLGc9ZC5sZW5ndGg7YjxnOysrYilpZihkW2JdLnBvaW50ZXJJZD09YS5wb2ludGVySWQpe2RbYl09YTticmVha31hLnRvdWNoZXM9ZC5zbGljZSgpO2MoYSl9fSl9LGFkZE1zVG91Y2hMaXN0ZW5lckVuZDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5fbXNUb3VjaGVzO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShhLCJNU1BvaW50ZXJVcCIsZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsZz1kLmxlbmd0aDtiPGc7KytiKWlmKGRbYl0ucG9pbnRlcklkPT1hLnBvaW50ZXJJZCl7ZC5zcGxpY2UoYiwxKTticmVha31hLnRvdWNoZXM9CmQuc2xpY2UoKTtjKGEpfSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRXZlbnRzIn0pO09wZW5MYXllcnMuRXZlbnRzLmJ1dHRvbmNsaWNrPU9wZW5MYXllcnMuQ2xhc3Moe3RhcmdldDpudWxsLGV2ZW50czoibW91c2Vkb3duIG1vdXNldXAgY2xpY2sgZGJsY2xpY2sgdG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQga2V5ZG93biIuc3BsaXQoIiAiKSxzdGFydFJlZ0V4Oi9ebW91c2Vkb3dufHRvdWNoc3RhcnQkLyxjYW5jZWxSZWdFeDovXnRvdWNobW92ZSQvLGNvbXBsZXRlUmVnRXg6L15tb3VzZXVwfHRvdWNoZW5kJC8saW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLnRhcmdldD1hO2ZvcihhPXRoaXMuZXZlbnRzLmxlbmd0aC0xOzA8PWE7LS1hKXRoaXMudGFyZ2V0LnJlZ2lzdGVyKHRoaXMuZXZlbnRzW2FdLHRoaXMsdGhpcy5idXR0b25DbGljayx7ZXh0ZW5zaW9uOiEwfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5ldmVudHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy50YXJnZXQudW5yZWdpc3Rlcih0aGlzLmV2ZW50c1thXSx0aGlzLHRoaXMuYnV0dG9uQ2xpY2spOwpkZWxldGUgdGhpcy50YXJnZXR9LGdldFByZXNzZWRCdXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9MyxjO2Rve2lmKE9wZW5MYXllcnMuRWxlbWVudC5oYXNDbGFzcyhhLCJvbEJ1dHRvbiIpKXtjPWE7YnJlYWt9YT1hLnBhcmVudE5vZGV9d2hpbGUoMDwtLWImJmEpO3JldHVybiBjfSxpZ25vcmU6ZnVuY3Rpb24oYSl7dmFyIGI9MyxjPSExO2Rve2lmKCJhIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7Yz0hMDticmVha31hPWEucGFyZW50Tm9kZX13aGlsZSgwPC0tYiYmYSk7cmV0dXJuIGN9LGJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGEpe3ZhciBiPSEwLGM9T3BlbkxheWVycy5FdmVudC5lbGVtZW50KGEpO2lmKGMmJihPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHwhfmEudHlwZS5pbmRleE9mKCJtb3VzZSIpKSlpZihjPXRoaXMuZ2V0UHJlc3NlZEJ1dHRvbihjKSl7aWYoImtleWRvd24iPT09YS50eXBlKXN3aXRjaChhLmtleUNvZGUpe2Nhc2UgT3BlbkxheWVycy5FdmVudC5LRVlfUkVUVVJOOmNhc2UgT3BlbkxheWVycy5FdmVudC5LRVlfU1BBQ0U6dGhpcy50YXJnZXQudHJpZ2dlckV2ZW50KCJidXR0b25jbGljayIsCntidXR0b25FbGVtZW50OmN9KSxPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSksYj0hMX1lbHNlIGlmKHRoaXMuc3RhcnRFdnQpe2lmKHRoaXMuY29tcGxldGVSZWdFeC50ZXN0KGEudHlwZSkpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb24oYyksZD1PcGVuTGF5ZXJzLlV0aWwuZ2V0Vmlld3BvcnRFbGVtZW50KCksZT13aW5kb3cucGFnZVlPZmZzZXR8fGQuc2Nyb2xsVG9wO2JbMF0tPXdpbmRvdy5wYWdlWE9mZnNldHx8ZC5zY3JvbGxMZWZ0O2JbMV0tPWU7dGhpcy50YXJnZXQudHJpZ2dlckV2ZW50KCJidXR0b25jbGljayIse2J1dHRvbkVsZW1lbnQ6YyxidXR0b25YWTp7eDp0aGlzLnN0YXJ0RXZ0LmNsaWVudFgtYlswXSx5OnRoaXMuc3RhcnRFdnQuY2xpZW50WS1iWzFdfX0pfXRoaXMuY2FuY2VsUmVnRXgudGVzdChhLnR5cGUpJiZkZWxldGUgdGhpcy5zdGFydEV2dDtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSk7Yj0hMX10aGlzLnN0YXJ0UmVnRXgudGVzdChhLnR5cGUpJiYKKHRoaXMuc3RhcnRFdnQ9YSxPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSksYj0hMSl9ZWxzZSBiPSF0aGlzLmlnbm9yZShPcGVuTGF5ZXJzLkV2ZW50LmVsZW1lbnQoYSkpLGRlbGV0ZSB0aGlzLnN0YXJ0RXZ0O3JldHVybiBifX0pO09wZW5MYXllcnMuQ29udHJvbD1PcGVuTGF5ZXJzLkNsYXNzKHtpZDpudWxsLG1hcDpudWxsLGRpdjpudWxsLHR5cGU6bnVsbCxhbGxvd1NlbGVjdGlvbjohMSxkaXNwbGF5Q2xhc3M6IiIsdGl0bGU6IiIsYXV0b0FjdGl2YXRlOiExLGFjdGl2ZTpudWxsLGhhbmRsZXJPcHRpb25zOm51bGwsaGFuZGxlcjpudWxsLGV2ZW50TGlzdGVuZXJzOm51bGwsZXZlbnRzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmRpc3BsYXlDbGFzcz10aGlzLkNMQVNTX05BTUUucmVwbGFjZSgiT3BlbkxheWVycy4iLCJvbCIpLnJlcGxhY2UoL1wuL2csIiIpO09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTt0aGlzLmV2ZW50cz1uZXcgT3BlbkxheWVycy5FdmVudHModGhpcyk7aWYodGhpcy5ldmVudExpc3RlbmVycyBpbnN0YW5jZW9mIE9iamVjdCl0aGlzLmV2ZW50cy5vbih0aGlzLmV2ZW50TGlzdGVuZXJzKTtudWxsPT10aGlzLmlkJiYodGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKwoiXyIpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZXZlbnRzJiYodGhpcy5ldmVudExpc3RlbmVycyYmdGhpcy5ldmVudHMudW4odGhpcy5ldmVudExpc3RlbmVycyksdGhpcy5ldmVudHMuZGVzdHJveSgpLHRoaXMuZXZlbnRzPW51bGwpO3RoaXMuZXZlbnRMaXN0ZW5lcnM9bnVsbDt0aGlzLmhhbmRsZXImJih0aGlzLmhhbmRsZXIuZGVzdHJveSgpLHRoaXMuaGFuZGxlcj1udWxsKTtpZih0aGlzLmhhbmRsZXJzKXtmb3IodmFyIGEgaW4gdGhpcy5oYW5kbGVycyl0aGlzLmhhbmRsZXJzLmhhc093blByb3BlcnR5KGEpJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5oYW5kbGVyc1thXS5kZXN0cm95JiZ0aGlzLmhhbmRsZXJzW2FdLmRlc3Ryb3koKTt0aGlzLmhhbmRsZXJzPW51bGx9dGhpcy5tYXAmJih0aGlzLm1hcC5yZW1vdmVDb250cm9sKHRoaXMpLHRoaXMubWFwPW51bGwpO3RoaXMuZGl2PW51bGx9LHNldE1hcDpmdW5jdGlvbihhKXt0aGlzLm1hcD1hO3RoaXMuaGFuZGxlciYmCnRoaXMuaGFuZGxlci5zZXRNYXAoYSl9LGRyYXc6ZnVuY3Rpb24oYSl7bnVsbD09dGhpcy5kaXYmJih0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuaWQpLHRoaXMuZGl2LmNsYXNzTmFtZT10aGlzLmRpc3BsYXlDbGFzcyx0aGlzLmFsbG93U2VsZWN0aW9ufHwodGhpcy5kaXYuY2xhc3NOYW1lKz0iIG9sQ29udHJvbE5vU2VsZWN0Iix0aGlzLmRpdi5zZXRBdHRyaWJ1dGUoInVuc2VsZWN0YWJsZSIsIm9uIiwwKSx0aGlzLmRpdi5vbnNlbGVjdHN0YXJ0PU9wZW5MYXllcnMuRnVuY3Rpb24uRmFsc2UpLCIiIT10aGlzLnRpdGxlJiYodGhpcy5kaXYudGl0bGU9dGhpcy50aXRsZSkpO251bGwhPWEmJih0aGlzLnBvc2l0aW9uPWEuY2xvbmUoKSk7dGhpcy5tb3ZlVG8odGhpcy5wb3NpdGlvbik7cmV0dXJuIHRoaXMuZGl2fSxtb3ZlVG86ZnVuY3Rpb24oYSl7bnVsbCE9YSYmbnVsbCE9dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS5sZWZ0PWEueCsicHgiLHRoaXMuZGl2LnN0eWxlLnRvcD0KYS55KyJweCIpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXJldHVybiExO3RoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmFjdGl2YXRlKCk7dGhpcy5hY3RpdmU9ITA7dGhpcy5tYXAmJk9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdix0aGlzLmRpc3BsYXlDbGFzcy5yZXBsYWNlKC8gL2csIiIpKyJBY3RpdmUiKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImFjdGl2YXRlIik7cmV0dXJuITB9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmU/KHRoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmRlYWN0aXZhdGUoKSx0aGlzLmFjdGl2ZT0hMSx0aGlzLm1hcCYmT3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LHRoaXMuZGlzcGxheUNsYXNzLnJlcGxhY2UoLyAvZywiIikrIkFjdGl2ZSIpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZGVhY3RpdmF0ZSIpLAohMCk6ITF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9CVVRUT049MTtPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT0dHTEU9MjtPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT09MPTM7T3BlbkxheWVycy5HZW9tZXRyeT1PcGVuTGF5ZXJzLkNsYXNzKHtpZDpudWxsLHBhcmVudDpudWxsLGJvdW5kczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYm91bmRzPXRoaXMuaWQ9bnVsbH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnl9LHNldEJvdW5kczpmdW5jdGlvbihhKXthJiYodGhpcy5ib3VuZHM9YS5jbG9uZSgpKX0sY2xlYXJCb3VuZHM6ZnVuY3Rpb24oKXt0aGlzLmJvdW5kcz1udWxsO3RoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5jbGVhckJvdW5kcygpfSxleHRlbmRCb3VuZHM6ZnVuY3Rpb24oYSl7dGhpcy5nZXRCb3VuZHMoKT90aGlzLmJvdW5kcy5leHRlbmQoYSk6dGhpcy5zZXRCb3VuZHMoYSl9LGdldEJvdW5kczpmdW5jdGlvbigpe251bGw9PXRoaXMuYm91bmRzJiZ0aGlzLmNhbGN1bGF0ZUJvdW5kcygpOwpyZXR1cm4gdGhpcy5ib3VuZHN9LGNhbGN1bGF0ZUJvdW5kczpmdW5jdGlvbigpe30sZGlzdGFuY2VUbzpmdW5jdGlvbihhLGIpe30sZ2V0VmVydGljZXM6ZnVuY3Rpb24oYSl7fSxhdFBvaW50OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0hMTtudWxsIT10aGlzLmdldEJvdW5kcygpJiZudWxsIT1hJiYoYj1udWxsIT1iP2I6MCxjPW51bGwhPWM/YzowLGQ9KG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmJvdW5kcy5sZWZ0LWIsdGhpcy5ib3VuZHMuYm90dG9tLWMsdGhpcy5ib3VuZHMucmlnaHQrYix0aGlzLmJvdW5kcy50b3ArYykpLmNvbnRhaW5zTG9uTGF0KGEpKTtyZXR1cm4gZH0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGdldEFyZWE6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sZ2V0Q2VudHJvaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQmJk9wZW5MYXllcnMuRm9ybWF0LldLVD9PcGVuTGF5ZXJzLkZvcm1hdC5XS1QucHJvdG90eXBlLndyaXRlKG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKHRoaXMpKToKT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5In0pO09wZW5MYXllcnMuR2VvbWV0cnkuZnJvbVdLVD1mdW5jdGlvbihhKXt2YXIgYjtpZihPcGVuTGF5ZXJzLkZvcm1hdCYmT3BlbkxheWVycy5Gb3JtYXQuV0tUKXt2YXIgYz1PcGVuTGF5ZXJzLkdlb21ldHJ5LmZyb21XS1QuZm9ybWF0O2N8fChjPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5XS1QsT3BlbkxheWVycy5HZW9tZXRyeS5mcm9tV0tULmZvcm1hdD1jKTthPWMucmVhZChhKTtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvciliPWEuZ2VvbWV0cnk7ZWxzZSBpZihPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKSl7Yj1hLmxlbmd0aDtmb3IodmFyIGM9QXJyYXkoYiksZD0wO2Q8YjsrK2QpY1tkXT1hW2RdLmdlb21ldHJ5O2I9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbihjKX19cmV0dXJuIGJ9OwpPcGVuTGF5ZXJzLkdlb21ldHJ5LnNlZ21lbnRzSW50ZXJzZWN0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jJiZjLnBvaW50O2M9YyYmYy50b2xlcmFuY2U7dmFyIGU9ITEsZj1hLngxLWIueDEsZz1hLnkxLWIueTEsaD1hLngyLWEueDEsaz1hLnkyLWEueTEsbD1iLnkyLWIueTEsbT1iLngyLWIueDEscD1sKmgtbSprLGw9bSpnLWwqZixnPWgqZy1rKmY7MD09cD8wPT1sJiYwPT1nJiYoZT0hMCk6KGY9bC9wLHA9Zy9wLDA8PWYmJigxPj1mJiYwPD1wJiYxPj1wKSYmKGQ/KGg9YS54MStmKmgscD1hLnkxK2YqayxlPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGgscCkpOmU9ITApKTtpZihjKWlmKGUpe2lmKGQpYTpmb3IoYT1bYSxiXSxiPTA7Mj5iOysrYilmb3IoZj1hW2JdLGs9MTszPms7KytrKWlmKGg9ZlsieCIra10scD1mWyJ5IitrXSxkPU1hdGguc3FydChNYXRoLnBvdyhoLWUueCwyKStNYXRoLnBvdyhwLWUueSwyKSksZDxjKXtlLng9aDtlLnk9cDticmVhayBhfX1lbHNlIGE6Zm9yKGE9ClthLGJdLGI9MDsyPmI7KytiKWZvcihoPWFbYl0scD1hWyhiKzEpJTJdLGs9MTszPms7KytrKWlmKGY9e3g6aFsieCIra10seTpoWyJ5IitrXX0sZz1PcGVuTGF5ZXJzLkdlb21ldHJ5LmRpc3RhbmNlVG9TZWdtZW50KGYscCksZy5kaXN0YW5jZTxjKXtlPWQ/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZi54LGYueSk6ITA7YnJlYWsgYX1yZXR1cm4gZX07T3BlbkxheWVycy5HZW9tZXRyeS5kaXN0YW5jZVRvU2VnbWVudD1mdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuR2VvbWV0cnkuZGlzdGFuY2VTcXVhcmVkVG9TZWdtZW50KGEsYik7Yy5kaXN0YW5jZT1NYXRoLnNxcnQoYy5kaXN0YW5jZSk7cmV0dXJuIGN9OwpPcGVuTGF5ZXJzLkdlb21ldHJ5LmRpc3RhbmNlU3F1YXJlZFRvU2VnbWVudD1mdW5jdGlvbihhLGIpe3ZhciBjPWEueCxkPWEueSxlPWIueDEsZj1iLnkxLGc9Yi54MixoPWIueTIsaz1nLWUsbD1oLWYsbT0oayooYy1lKStsKihkLWYpKS8oTWF0aC5wb3coaywyKStNYXRoLnBvdyhsLDIpKTswPj1tfHwoMTw9bT8oZT1nLGY9aCk6KGUrPW0qayxmKz1tKmwpKTtyZXR1cm57ZGlzdGFuY2U6TWF0aC5wb3coZS1jLDIpK01hdGgucG93KGYtZCwyKSx4OmUseTpmLGFsb25nOm19fTtPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LHtjb21wb25lbnRzOm51bGwsY29tcG9uZW50VHlwZXM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuR2VvbWV0cnkucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuY29tcG9uZW50cz1bXTtudWxsIT1hJiZ0aGlzLmFkZENvbXBvbmVudHMoYSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNvbXBvbmVudHMubGVuZ3RoPTA7dGhpcy5jb21wb25lbnRzPW51bGw7T3BlbkxheWVycy5HZW9tZXRyeS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWV2YWwoIm5ldyAiK3RoaXMuQ0xBU1NfTkFNRSsiKCkiKSxiPTAsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYS5hZGRDb21wb25lbnQodGhpcy5jb21wb25lbnRzW2JdLmNsb25lKCkpOwpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMpO3JldHVybiBhfSxnZXRDb21wb25lbnRzU3RyaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5jb21wb25lbnRzW2JdLnRvU2hvcnRTdHJpbmcoKSk7cmV0dXJuIGEuam9pbigiLCIpfSxjYWxjdWxhdGVCb3VuZHM6ZnVuY3Rpb24oKXt0aGlzLmJvdW5kcz1udWxsO3ZhciBhPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyxiPXRoaXMuY29tcG9uZW50cztpZihiKWZvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKylhLmV4dGVuZChiW2NdLmdldEJvdW5kcygpKTtudWxsIT1hLmxlZnQmJihudWxsIT1hLmJvdHRvbSYmbnVsbCE9YS5yaWdodCYmbnVsbCE9YS50b3ApJiZ0aGlzLnNldEJvdW5kcyhhKX0sYWRkQ29tcG9uZW50czpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8CmM7YisrKXRoaXMuYWRkQ29tcG9uZW50KGFbYl0pfSxhZGRDb21wb25lbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz0hMTtpZihhJiYobnVsbD09dGhpcy5jb21wb25lbnRUeXBlc3x8LTE8T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5jb21wb25lbnRUeXBlcyxhLkNMQVNTX05BTUUpKSl7aWYobnVsbCE9YiYmYjx0aGlzLmNvbXBvbmVudHMubGVuZ3RoKXt2YXIgYz10aGlzLmNvbXBvbmVudHMuc2xpY2UoMCxiKSxkPXRoaXMuY29tcG9uZW50cy5zbGljZShiLHRoaXMuY29tcG9uZW50cy5sZW5ndGgpO2MucHVzaChhKTt0aGlzLmNvbXBvbmVudHM9Yy5jb25jYXQoZCl9ZWxzZSB0aGlzLmNvbXBvbmVudHMucHVzaChhKTthLnBhcmVudD10aGlzO3RoaXMuY2xlYXJCb3VuZHMoKTtjPSEwfXJldHVybiBjfSxyZW1vdmVDb21wb25lbnRzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2Zvcih2YXIgYz1hLmxlbmd0aC0xOzA8PWM7LS1jKWI9CnRoaXMucmVtb3ZlQ29tcG9uZW50KGFbY10pfHxiO3JldHVybiBifSxyZW1vdmVDb21wb25lbnQ6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5jb21wb25lbnRzLGEpO3RoaXMuY2xlYXJCb3VuZHMoKTtyZXR1cm4hMH0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj0wLGM9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtiPGM7YisrKWErPXRoaXMuY29tcG9uZW50c1tiXS5nZXRMZW5ndGgoKTtyZXR1cm4gYX0sZ2V0QXJlYTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhKz10aGlzLmNvbXBvbmVudHNbYl0uZ2V0QXJlYSgpO3JldHVybiBhfSxnZXRHZW9kZXNpY0FyZWE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7YysrKWIrPXRoaXMuY29tcG9uZW50c1tjXS5nZXRHZW9kZXNpY0FyZWEoYSk7cmV0dXJuIGJ9LGdldENlbnRyb2lkOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiB0aGlzLmNvbXBvbmVudHMubGVuZ3RoJiYKdGhpcy5jb21wb25lbnRzWzBdLmdldENlbnRyb2lkKCk7YT10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2lmKCFhKXJldHVybiExO2Zvcih2YXIgYj1bXSxjPVtdLGQ9MCxlPU51bWJlci5NQVhfVkFMVUUsZixnPTA7ZzxhOysrZyl7Zj10aGlzLmNvbXBvbmVudHNbZ107dmFyIGg9Zi5nZXRBcmVhKCk7Zj1mLmdldENlbnRyb2lkKCEwKTtpc05hTihoKXx8KGlzTmFOKGYueCl8fGlzTmFOKGYueSkpfHwoYi5wdXNoKGgpLGQrPWgsZT1oPGUmJjA8aD9oOmUsYy5wdXNoKGYpKX1hPWIubGVuZ3RoO2lmKDA9PT1kKXtmb3IoZz0wO2c8YTsrK2cpYltnXT0xO2Q9Yi5sZW5ndGh9ZWxzZXtmb3IoZz0wO2c8YTsrK2cpYltnXS89ZTtkLz1lfWZvcih2YXIgaz1lPTAsZz0wO2c8YTsrK2cpZj1jW2ddLGg9YltnXSxlKz1mLngqaCxrKz1mLnkqaDtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZS9kLGsvZCl9LGdldEdlb2Rlc2ljTGVuZ3RoOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLApjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspYis9dGhpcy5jb21wb25lbnRzW2NdLmdldEdlb2Rlc2ljTGVuZ3RoKGEpO3JldHVybiBifSxtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspdGhpcy5jb21wb25lbnRzW2NdLm1vdmUoYSxiKX0scm90YXRlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpdGhpcy5jb21wb25lbnRzW2NdLnJvdGF0ZShhLGIpfSxyZXNpemU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wO2Q8dGhpcy5jb21wb25lbnRzLmxlbmd0aDsrK2QpdGhpcy5jb21wb25lbnRzW2RdLnJlc2l6ZShhLGIsYyk7cmV0dXJuIHRoaXN9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9IShiJiYhMT09PWIuZWRnZSkmJmImJmIuZGV0YWlscyxkLGUsZixnPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxoPTAsaz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2g8CmsmJiEoZD10aGlzLmNvbXBvbmVudHNbaF0uZGlzdGFuY2VUbyhhLGIpLGY9Yz9kLmRpc3RhbmNlOmQsZjxnJiYoZz1mLGU9ZCwwPT1nKSk7KytoKTtyZXR1cm4gZX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPSEwO2lmKGEmJmEuQ0xBU1NfTkFNRSYmdGhpcy5DTEFTU19OQU1FPT1hLkNMQVNTX05BTUUpaWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYS5jb21wb25lbnRzKSYmYS5jb21wb25lbnRzLmxlbmd0aD09dGhpcy5jb21wb25lbnRzLmxlbmd0aClmb3IodmFyIGM9MCxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyl7aWYoIXRoaXMuY29tcG9uZW50c1tjXS5lcXVhbHMoYS5jb21wb25lbnRzW2NdKSl7Yj0hMTticmVha319ZWxzZSBiPSExO2Vsc2UgYj0hMTtyZXR1cm4gYn0sdHJhbnNmb3JtOmZ1bmN0aW9uKGEsYil7aWYoYSYmYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspdGhpcy5jb21wb25lbnRzW2NdLnRyYW5zZm9ybShhLApiKTt0aGlzLmJvdW5kcz1udWxsfXJldHVybiB0aGlzfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0hMSxjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZCYmIShiPWEuaW50ZXJzZWN0cyh0aGlzLmNvbXBvbmVudHNbY10pKTsrK2MpO3JldHVybiBifSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGIsdGhpcy5jb21wb25lbnRzW2NdLmdldFZlcnRpY2VzKGEpKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LHt4Om51bGwseTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkdlb21ldHJ5LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLng9cGFyc2VGbG9hdChhKTt0aGlzLnk9cGFyc2VGbG9hdChiKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQodGhpcy54LHRoaXMueSkpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsdGhpcyk7cmV0dXJuIGF9LGNhbGN1bGF0ZUJvdW5kczpmdW5jdGlvbigpe3RoaXMuYm91bmRzPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLngsdGhpcy55LHRoaXMueCx0aGlzLnkpfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9IShiJiYhMT09PWIuZWRnZSkmJmImJmIuZGV0YWlscyxkLGUsZixnLGg7YSBpbnN0YW5jZW9mCk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQ/KGU9dGhpcy54LGY9dGhpcy55LGc9YS54LGg9YS55LGQ9TWF0aC5zcXJ0KE1hdGgucG93KGUtZywyKStNYXRoLnBvdyhmLWgsMikpLGQ9Yz97eDA6ZSx5MDpmLHgxOmcseTE6aCxkaXN0YW5jZTpkfTpkKTooZD1hLmRpc3RhbmNlVG8odGhpcyxiKSxjJiYoZD17eDA6ZC54MSx5MDpkLnkxLHgxOmQueDAseTE6ZC55MCxkaXN0YW5jZTpkLmRpc3RhbmNlfSkpO3JldHVybiBkfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7bnVsbCE9YSYmKGI9dGhpcy54PT1hLngmJnRoaXMueT09YS55fHxpc05hTih0aGlzLngpJiZpc05hTih0aGlzLnkpJiZpc05hTihhLngpJiZpc05hTihhLnkpKTtyZXR1cm4gYn0sdG9TaG9ydFN0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLngrIiwgIit0aGlzLnl9LG1vdmU6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPWE7dGhpcy55Kz1iO3RoaXMuY2xlYXJCb3VuZHMoKX0scm90YXRlOmZ1bmN0aW9uKGEsYil7YSo9Ck1hdGguUEkvMTgwO3ZhciBjPXRoaXMuZGlzdGFuY2VUbyhiKSxkPWErTWF0aC5hdGFuMih0aGlzLnktYi55LHRoaXMueC1iLngpO3RoaXMueD1iLngrYypNYXRoLmNvcyhkKTt0aGlzLnk9Yi55K2MqTWF0aC5zaW4oZCk7dGhpcy5jbGVhckJvdW5kcygpfSxnZXRDZW50cm9pZDpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCh0aGlzLngsdGhpcy55KX0scmVzaXplOmZ1bmN0aW9uKGEsYixjKXt0aGlzLng9Yi54K2EqKHZvaWQgMD09Yz8xOmMpKih0aGlzLngtYi54KTt0aGlzLnk9Yi55K2EqKHRoaXMueS1iLnkpO3RoaXMuY2xlYXJCb3VuZHMoKTtyZXR1cm4gdGhpc30saW50ZXJzZWN0czpmdW5jdGlvbihhKXt2YXIgYj0hMTtyZXR1cm4gYj0iT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWEuQ0xBU1NfTkFNRT90aGlzLmVxdWFscyhhKTphLmludGVyc2VjdHModGhpcyl9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe2EmJmImJihPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKHRoaXMsCmEsYiksdGhpcy5ib3VuZHM9bnVsbCk7cmV0dXJuIHRoaXN9LGdldFZlcnRpY2VzOmZ1bmN0aW9uKGEpe3JldHVyblt0aGlzXX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24se2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCJdLGFkZFBvaW50OmZ1bmN0aW9uKGEsYil7dGhpcy5hZGRDb21wb25lbnQoYSxiKX0scmVtb3ZlUG9pbnQ6ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVDb21wb25lbnQoYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LkN1cnZlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50LHtjb21wb25lbnRUeXBlczpbIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiXSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgYT0wO2lmKHRoaXMuY29tcG9uZW50cyYmMTx0aGlzLmNvbXBvbmVudHMubGVuZ3RoKWZvcih2YXIgYj0xLGM9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtiPGM7YisrKWErPXRoaXMuY29tcG9uZW50c1tiLTFdLmRpc3RhbmNlVG8odGhpcy5jb21wb25lbnRzW2JdKTtyZXR1cm4gYX0sZ2V0R2VvZGVzaWNMZW5ndGg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihhKXt2YXIgYz1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjQzMjYiKTtjLmVxdWFscyhhKXx8KGI9dGhpcy5jbG9uZSgpLnRyYW5zZm9ybShhLGMpKX1hPTA7aWYoYi5jb21wb25lbnRzJiYxPGIuY29tcG9uZW50cy5sZW5ndGgpZm9yKHZhciBkLGU9MSxmPWIuY29tcG9uZW50cy5sZW5ndGg7ZTwKZjtlKyspYz1iLmNvbXBvbmVudHNbZS0xXSxkPWIuY29tcG9uZW50c1tlXSxhKz1PcGVuTGF5ZXJzLlV0aWwuZGlzdFZpbmNlbnR5KHtsb246Yy54LGxhdDpjLnl9LHtsb246ZC54LGxhdDpkLnl9KTtyZXR1cm4gMUUzKmF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuQ3VydmUifSk7T3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZSx7cmVtb3ZlQ29tcG9uZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29tcG9uZW50cyYmMjx0aGlzLmNvbXBvbmVudHMubGVuZ3RoO2ImJk9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlQ29tcG9uZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gYn0saW50ZXJzZWN0czpmdW5jdGlvbihhKXt2YXIgYj0hMSxjPWEuQ0xBU1NfTkFNRTtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIj09Y3x8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyI9PWN8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09Yyl7dmFyIGQ9dGhpcy5nZXRTb3J0ZWRTZWdtZW50cygpO2E9Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1jP1t7eDE6YS54LHkxOmEueSx4MjphLngseTI6YS55fV06YS5nZXRTb3J0ZWRTZWdtZW50cygpOwp2YXIgZSxmLGcsaCxrLGwsbSxwPTAsbj1kLmxlbmd0aDthOmZvcig7cDxuOysrcCl7Yz1kW3BdO2U9Yy54MTtmPWMueDI7Zz1jLnkxO2g9Yy55Mjt2YXIgcT0wLHI9YS5sZW5ndGg7Zm9yKDtxPHI7KytxKXtrPWFbcV07aWYoay54MT5mKWJyZWFrO2lmKCEoay54MjxlfHwobD1rLnkxLG09ay55MixNYXRoLm1pbihsLG0pPk1hdGgubWF4KGcsaCl8fE1hdGgubWF4KGwsbSk8TWF0aC5taW4oZyxoKXx8IU9wZW5MYXllcnMuR2VvbWV0cnkuc2VnbWVudHNJbnRlcnNlY3QoYyxrKSkpKXtiPSEwO2JyZWFrIGF9fX19ZWxzZSBiPWEuaW50ZXJzZWN0cyh0aGlzKTtyZXR1cm4gYn0sZ2V0U29ydGVkU2VnbWVudHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5jb21wb25lbnRzLmxlbmd0aC0xLGI9QXJyYXkoYSksYyxkLGU9MDtlPGE7KytlKWM9dGhpcy5jb21wb25lbnRzW2VdLGQ9dGhpcy5jb21wb25lbnRzW2UrMV0sYltlXT1jLng8ZC54P3t4MTpjLngseTE6Yy55LHgyOmQueCx5MjpkLnl9Ogp7eDE6ZC54LHkxOmQueSx4MjpjLngseTI6Yy55fTtyZXR1cm4gYi5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEueDEtYi54MX0pfSxzcGxpdFdpdGhTZWdtZW50OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPSEoYiYmITE9PT1iLmVkZ2UpLGQ9YiYmYi50b2xlcmFuY2UsZT1bXSxmPXRoaXMuZ2V0VmVydGljZXMoKSxnPVtdLGg9W10saz0hMSxsLG0scCxuPXtwb2ludDohMCx0b2xlcmFuY2U6ZH0scT1udWxsLHI9MCxzPWYubGVuZ3RoLTI7cjw9czsrK3IpaWYoZD1mW3JdLGcucHVzaChkLmNsb25lKCkpLGw9ZltyKzFdLG09e3gxOmQueCx5MTpkLnkseDI6bC54LHkyOmwueX0sbT1PcGVuTGF5ZXJzLkdlb21ldHJ5LnNlZ21lbnRzSW50ZXJzZWN0KGEsbSxuKSxtIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCYmKChwPW0ueD09PWEueDEmJm0ueT09PWEueTF8fG0ueD09PWEueDImJm0ueT09PWEueTJ8fG0uZXF1YWxzKGQpfHxtLmVxdWFscyhsKT8hMDohMSl8fGMpKW0uZXF1YWxzKGhbaC5sZW5ndGgtCjFdKXx8aC5wdXNoKG0uY2xvbmUoKSksMD09PXImJm0uZXF1YWxzKGQpfHxtLmVxdWFscyhsKXx8KGs9ITAsbS5lcXVhbHMoZCl8fGcucHVzaChtKSxlLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhnKSksZz1bbS5jbG9uZSgpXSk7ayYmKGcucHVzaChsLmNsb25lKCkpLGUucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGcpKSk7aWYoMDxoLmxlbmd0aCl2YXIgdD1hLngxPGEueDI/MTotMSx1PWEueTE8YS55Mj8xOi0xLHE9e2xpbmVzOmUscG9pbnRzOmguc29ydChmdW5jdGlvbihhLGIpe3JldHVybiB0KmEueC10KmIueHx8dSphLnktdSpiLnl9KX07cmV0dXJuIHF9LHNwbGl0OmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbCxkPWImJmIubXV0dWFsLGUsZixnLGg7aWYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyl7dmFyIGs9dGhpcy5nZXRWZXJ0aWNlcygpLGwsbSxwLG4scSxyPVtdO2c9W107Zm9yKHZhciBzPQowLHQ9ay5sZW5ndGgtMjtzPD10Oysrcyl7bD1rW3NdO209a1tzKzFdO3A9e3gxOmwueCx5MTpsLnkseDI6bS54LHkyOm0ueX07aD1ofHxbYV07ZCYmci5wdXNoKGwuY2xvbmUoKSk7Zm9yKHZhciB1PTA7dTxoLmxlbmd0aDsrK3UpaWYobj1oW3VdLnNwbGl0V2l0aFNlZ21lbnQocCxiKSlpZihxPW4ubGluZXMsMDxxLmxlbmd0aCYmKHEudW5zaGlmdCh1LDEpLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoaCxxKSx1Kz1xLmxlbmd0aC0yKSxkKWZvcih2YXIgdj0wLHc9bi5wb2ludHMubGVuZ3RoO3Y8dzsrK3YpcT1uLnBvaW50c1t2XSxxLmVxdWFscyhsKXx8KHIucHVzaChxKSxnLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhyKSkscj1xLmVxdWFscyhtKT9bXTpbcS5jbG9uZSgpXSl9ZCYmKDA8Zy5sZW5ndGgmJjA8ci5sZW5ndGgpJiYoci5wdXNoKG0uY2xvbmUoKSksZy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcocikpKX1lbHNlIGM9CmEuc3BsaXRXaXRoKHRoaXMsYik7aCYmMTxoLmxlbmd0aD9mPSEwOmg9W107ZyYmMTxnLmxlbmd0aD9lPSEwOmc9W107aWYoZnx8ZSljPWQ/W2csaF06aDtyZXR1cm4gY30sc3BsaXRXaXRoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuc3BsaXQodGhpcyxiKX0sZ2V0VmVydGljZXM6ZnVuY3Rpb24oYSl7cmV0dXJuITA9PT1hP1t0aGlzLmNvbXBvbmVudHNbMF0sdGhpcy5jb21wb25lbnRzW3RoaXMuY29tcG9uZW50cy5sZW5ndGgtMV1dOiExPT09YT90aGlzLmNvbXBvbmVudHMuc2xpY2UoMSx0aGlzLmNvbXBvbmVudHMubGVuZ3RoLTEpOnRoaXMuY29tcG9uZW50cy5zbGljZSgpfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9IShiJiYhMT09PWIuZWRnZSkmJmImJmIuZGV0YWlscyxkLGU9e30sZj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7aWYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQpe2Zvcih2YXIgZz10aGlzLmdldFNvcnRlZFNlZ21lbnRzKCksCmg9YS54LGs9YS55LGwsbT0wLHA9Zy5sZW5ndGg7bTxwOysrbSlpZihsPWdbbV0sZD1PcGVuTGF5ZXJzLkdlb21ldHJ5LmRpc3RhbmNlVG9TZWdtZW50KGEsbCksZC5kaXN0YW5jZTxmKXtpZihmPWQuZGlzdGFuY2UsZT1kLDA9PT1mKWJyZWFrfWVsc2UgaWYobC54Mj5oJiYoaz5sLnkxJiZrPGwueTJ8fGs8bC55MSYmaz5sLnkyKSlicmVhaztlPWM/e2Rpc3RhbmNlOmUuZGlzdGFuY2UseDA6ZS54LHkwOmUueSx4MTpoLHkxOmt9OmUuZGlzdGFuY2V9ZWxzZSBpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKXt2YXIgZz10aGlzLmdldFNvcnRlZFNlZ21lbnRzKCksaD1hLmdldFNvcnRlZFNlZ21lbnRzKCksbixxLHI9aC5sZW5ndGgscz17cG9pbnQ6ITB9LG09MCxwPWcubGVuZ3RoO2E6Zm9yKDttPHA7KyttKXtrPWdbbV07bD1rLngxO3E9ay55MTtmb3IodmFyIHQ9MDt0PHI7Kyt0KWlmKGQ9aFt0XSxuPU9wZW5MYXllcnMuR2VvbWV0cnkuc2VnbWVudHNJbnRlcnNlY3QoaywKZCxzKSl7Zj0wO2U9e2Rpc3RhbmNlOjAseDA6bi54LHkwOm4ueSx4MTpuLngseTE6bi55fTticmVhayBhfWVsc2UgZD1PcGVuTGF5ZXJzLkdlb21ldHJ5LmRpc3RhbmNlVG9TZWdtZW50KHt4OmwseTpxfSxkKSxkLmRpc3RhbmNlPGYmJihmPWQuZGlzdGFuY2UsZT17ZGlzdGFuY2U6Zix4MDpsLHkwOnEseDE6ZC54LHkxOmQueX0pfWN8fChlPWUuZGlzdGFuY2UpOzAhPT1mJiZrJiYoZD1hLmRpc3RhbmNlVG8obmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoay54MixrLnkyKSxiKSxtPWM/ZC5kaXN0YW5jZTpkLG08ZiYmKGU9Yz97ZGlzdGFuY2U6Zix4MDpkLngxLHkwOmQueTEseDE6ZC54MCx5MTpkLnkwfTptKSl9ZWxzZSBlPWEuZGlzdGFuY2VUbyh0aGlzLGIpLGMmJihlPXtkaXN0YW5jZTplLmRpc3RhbmNlLHgwOmUueDEseTA6ZS55MSx4MTplLngwLHkxOmUueTB9KTtyZXR1cm4gZX0sc2ltcGxpZnk6ZnVuY3Rpb24oYSl7aWYodGhpcyYmbnVsbCE9PXRoaXMpe3ZhciBiPXRoaXMuZ2V0VmVydGljZXMoKTsKaWYoMz5iLmxlbmd0aClyZXR1cm4gdGhpczt2YXIgYz1mdW5jdGlvbihhLGIsZCxrKXtmb3IodmFyIGw9MCxtPTAscD1iLG47cDxkO3ArKyl7bj1hW2JdO3ZhciBxPWFbZF0scj1hW3BdLHI9TWF0aC5hYnMoMC41KihuLngqcS55K3EueCpyLnkrci54Km4ueS1xLngqbi55LXIueCpxLnktbi54KnIueSkpO249TWF0aC5zcXJ0KE1hdGgucG93KG4ueC1xLngsMikrTWF0aC5wb3cobi55LXEueSwyKSk7bj0yKihyL24pO24+bCYmKGw9bixtPXApfWw+ayYmbSE9YiYmKGUucHVzaChtKSxjKGEsYixtLGspLGMoYSxtLGQsaykpfSxkPWIubGVuZ3RoLTEsZT1bXTtlLnB1c2goMCk7Zm9yKGUucHVzaChkKTtiWzBdLmVxdWFscyhiW2RdKTspZC0tLGUucHVzaChkKTtjKGIsMCxkLGEpO2E9W107ZS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEtYn0pO2ZvcihkPTA7ZDxlLmxlbmd0aDtkKyspYS5wdXNoKGJbZVtkXV0pO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGEpfXJldHVybiB0aGlzfSwKQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyx7Y29tcG9uZW50VHlwZXM6WyJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Il0sYWRkQ29tcG9uZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9ITEsZD10aGlzLmNvbXBvbmVudHMucG9wKCk7bnVsbD09YiYmYS5lcXVhbHMoZCl8fChjPU9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkQ29tcG9uZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKSk7T3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLnByb3RvdHlwZS5hZGRDb21wb25lbnQuYXBwbHkodGhpcyxbdGhpcy5jb21wb25lbnRzWzBdXSk7cmV0dXJuIGN9LHJlbW92ZUNvbXBvbmVudDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNvbXBvbmVudHMmJjM8dGhpcy5jb21wb25lbnRzLmxlbmd0aDtiJiYodGhpcy5jb21wb25lbnRzLnBvcCgpLE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlQ29tcG9uZW50LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyksT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLnByb3RvdHlwZS5hZGRDb21wb25lbnQuYXBwbHkodGhpcyxbdGhpcy5jb21wb25lbnRzWzBdXSkpO3JldHVybiBifSxtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZC0xO2MrKyl0aGlzLmNvbXBvbmVudHNbY10ubW92ZShhLGIpfSxyb3RhdGU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkLTE7KytjKXRoaXMuY29tcG9uZW50c1tjXS5yb3RhdGUoYSxiKX0scmVzaXplOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MCxlPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7ZDxlLTE7KytkKXRoaXMuY29tcG9uZW50c1tkXS5yZXNpemUoYSxiLGMpO3JldHVybiB0aGlzfSx0cmFuc2Zvcm06ZnVuY3Rpb24oYSxiKXtpZihhJiZiKXtmb3IodmFyIGM9MCxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkLTE7YysrKXRoaXMuY29tcG9uZW50c1tjXS50cmFuc2Zvcm0oYSwKYik7dGhpcy5ib3VuZHM9bnVsbH1yZXR1cm4gdGhpc30sZ2V0Q2VudHJvaWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmNvbXBvbmVudHMpe3ZhciBhPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7aWYoMDxhJiYyPj1hKXJldHVybiB0aGlzLmNvbXBvbmVudHNbMF0uY2xvbmUoKTtpZigyPGEpe3ZhciBiPTAsYz0wLGQ9dGhpcy5jb21wb25lbnRzWzBdLngsZT10aGlzLmNvbXBvbmVudHNbMF0ueSxmPS0xKnRoaXMuZ2V0QXJlYSgpO2lmKDAhPWYpe2Zvcih2YXIgZz0wO2c8YS0xO2crKyl2YXIgaD10aGlzLmNvbXBvbmVudHNbZ10saz10aGlzLmNvbXBvbmVudHNbZysxXSxiPWIrKGgueCtrLngtMipkKSooKGgueC1kKSooay55LWUpLShrLngtZCkqKGgueS1lKSksYz1jKyhoLnkray55LTIqZSkqKChoLngtZCkqKGsueS1lKS0oay54LWQpKihoLnktZSkpO2I9ZCtiLyg2KmYpO2E9ZStjLyg2KmYpfWVsc2V7Zm9yKGc9MDtnPGEtMTtnKyspYis9dGhpcy5jb21wb25lbnRzW2ddLngsYys9dGhpcy5jb21wb25lbnRzW2ddLnk7CmIvPWEtMTthPWMvKGEtMSl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGIsYSl9cmV0dXJuIG51bGx9fSxnZXRBcmVhOmZ1bmN0aW9uKCl7dmFyIGE9MDtpZih0aGlzLmNvbXBvbmVudHMmJjI8dGhpcy5jb21wb25lbnRzLmxlbmd0aCl7Zm9yKHZhciBiPWE9MCxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjLTE7YisrKXZhciBkPXRoaXMuY29tcG9uZW50c1tiXSxlPXRoaXMuY29tcG9uZW50c1tiKzFdLGE9YSsoZC54K2UueCkqKGUueS1kLnkpO2E9LWEvMn1yZXR1cm4gYX0sZ2V0R2VvZGVzaWNBcmVhOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYSl7dmFyIGM9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2Iik7Yy5lcXVhbHMoYSl8fChiPXRoaXMuY2xvbmUoKS50cmFuc2Zvcm0oYSxjKSl9YT0wO2M9Yi5jb21wb25lbnRzJiZiLmNvbXBvbmVudHMubGVuZ3RoO2lmKDI8Yyl7Zm9yKHZhciBkLGUsZj0wO2Y8Yy0xO2YrKylkPWIuY29tcG9uZW50c1tmXSwKZT1iLmNvbXBvbmVudHNbZisxXSxhKz1PcGVuTGF5ZXJzLlV0aWwucmFkKGUueC1kLngpKigyK01hdGguc2luKE9wZW5MYXllcnMuVXRpbC5yYWQoZC55KSkrTWF0aC5zaW4oT3BlbkxheWVycy5VdGlsLnJhZChlLnkpKSk7YT00MDY4MDYzMTU5MDc2OSphLzJ9cmV0dXJuIGF9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5OdW1iZXIubGltaXRTaWdEaWdzLGM9YihhLngsMTQpO2E9YihhLnksMTQpO2Zvcih2YXIgZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoLTEsZSxmLGcsaCxrLGw9MCxtPTA7bTxkOysrbSlpZihlPXRoaXMuY29tcG9uZW50c1ttXSxnPWIoZS54LDE0KSxlPWIoZS55LDE0KSxmPXRoaXMuY29tcG9uZW50c1ttKzFdLGg9YihmLngsMTQpLGY9YihmLnksMTQpLGU9PWYpe2lmKGE9PWUmJihnPD1oJiZjPj1nJiZjPD1ofHxnPj1oJiZjPD1nJiZjPj1oKSl7bD0tMTticmVha319ZWxzZXtrPWIoKGEtZikqKChoLWcpLyhmLWUpKStoLDE0KTtpZihrPT0KYyYmKGU8ZiYmYT49ZSYmYTw9Znx8ZT5mJiZhPD1lJiZhPj1mKSl7bD0tMTticmVha31rPD1jfHxnIT1oJiYoazxNYXRoLm1pbihnLGgpfHxrPk1hdGgubWF4KGcsaCkpfHwoZTxmJiZhPj1lJiZhPGZ8fGU+ZiYmYTxlJiZhPj1mKSYmKytsfXJldHVybi0xPT1sPzE6ISEobCYxKX0saW50ZXJzZWN0czpmdW5jdGlvbihhKXt2YXIgYj0hMTtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWEuQ0xBU1NfTkFNRSliPXRoaXMuY29udGFpbnNQb2ludChhKTtlbHNlIGlmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciPT1hLkNMQVNTX05BTUUpYj1hLmludGVyc2VjdHModGhpcyk7ZWxzZSBpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIj09YS5DTEFTU19OQU1FKWI9T3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nLnByb3RvdHlwZS5pbnRlcnNlY3RzLmFwcGx5KHRoaXMsW2FdKTtlbHNlIGZvcih2YXIgYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPApkJiYhKGI9YS5jb21wb25lbnRzW2NdLmludGVyc2VjdHModGhpcykpOysrYyk7cmV0dXJuIGJ9LGdldFZlcnRpY2VzOmZ1bmN0aW9uKGEpe3JldHVybiEwPT09YT9bXTp0aGlzLmNvbXBvbmVudHMuc2xpY2UoMCx0aGlzLmNvbXBvbmVudHMubGVuZ3RoLTEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcifSk7T3BlbkxheWVycy5VdGlsPU9wZW5MYXllcnMuVXRpbHx8e307Ck9wZW5MYXllcnMuVXRpbC52ZW5kb3JQcmVmaXg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiBhP2EucmVwbGFjZSgvKFtBLVpdKS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KS5yZXBsYWNlKC9ebXMtLywiLW1zLSIpOm51bGx9ZnVuY3Rpb24gYihhLGIpe2lmKHZvaWQgMD09PWdbYl0pe3ZhciBjLGU9MCxmPWQubGVuZ3RoLG49InVuZGVmaW5lZCIhPT10eXBlb2YgYS5jc3NUZXh0O2ZvcihnW2JdPW51bGw7ZTxmO2UrKylpZigoYz1kW2VdKT8obnx8KGM9Yy50b0xvd2VyQ2FzZSgpKSxjPWMrYi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStiLnNsaWNlKDEpKTpjPWIsdm9pZCAwIT09YVtjXSl7Z1tiXT1jO2JyZWFrfX1yZXR1cm4gZ1tiXX1mdW5jdGlvbiBjKGEpe3JldHVybiBiKGUsYSl9dmFyIGQ9WyIiLCJPIiwibXMiLCJNb3oiLCJXZWJraXQiXSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLGY9e30sZz17fTtyZXR1cm57Y3NzOmZ1bmN0aW9uKGIpe2lmKHZvaWQgMD09PQpmW2JdKXt2YXIgZD1iLnJlcGxhY2UoLygtW1xzXFNdKS9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpfSksZD1jKGQpO2ZbYl09YShkKX1yZXR1cm4gZltiXX0sanM6YixzdHlsZTpjLGNzc0NhY2hlOmYsanNDYWNoZTpnfX0oKTtPcGVuTGF5ZXJzLkFuaW1hdGlvbj1mdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwudmVuZG9yUHJlZml4LmpzKGEsInJlcXVlc3RBbmltYXRpb25GcmFtZSIpLGM9ISFiLGQ9ZnVuY3Rpb24oKXt2YXIgYz1hW2JdfHxmdW5jdGlvbihiLGMpe2Euc2V0VGltZW91dChiLDE2KX07cmV0dXJuIGZ1bmN0aW9uKGIsZCl7Yy5hcHBseShhLFtiLGRdKX19KCksZT0wLGY9e307cmV0dXJue2lzTmF0aXZlOmMscmVxdWVzdEZyYW1lOmQsc3RhcnQ6ZnVuY3Rpb24oYSxiLGMpe2I9MDxiP2I6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO3ZhciBsPSsrZSxtPStuZXcgRGF0ZTtmW2xdPWZ1bmN0aW9uKCl7ZltsXSYmK25ldyBEYXRlLW08PWI/KGEoKSxmW2xdJiZkKGZbbF0sYykpOmRlbGV0ZSBmW2xdfTtkKGZbbF0sYyk7cmV0dXJuIGx9LHN0b3A6ZnVuY3Rpb24oYSl7ZGVsZXRlIGZbYV19fX0od2luZG93KTtPcGVuTGF5ZXJzLlR3ZWVuPU9wZW5MYXllcnMuQ2xhc3Moe2Vhc2luZzpudWxsLGJlZ2luOm51bGwsZmluaXNoOm51bGwsZHVyYXRpb246bnVsbCxjYWxsYmFja3M6bnVsbCx0aW1lOm51bGwsbWluRnJhbWVSYXRlOm51bGwsc3RhcnRUaW1lOm51bGwsYW5pbWF0aW9uSWQ6bnVsbCxwbGF5aW5nOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5lYXNpbmc9YT9hOk9wZW5MYXllcnMuRWFzaW5nLkV4cG8uZWFzZU91dH0sc3RhcnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5wbGF5aW5nPSEwO3RoaXMuYmVnaW49YTt0aGlzLmZpbmlzaD1iO3RoaXMuZHVyYXRpb249Yzt0aGlzLmNhbGxiYWNrcz1kLmNhbGxiYWNrczt0aGlzLm1pbkZyYW1lUmF0ZT1kLm1pbkZyYW1lUmF0ZXx8MzA7dGhpcy50aW1lPTA7dGhpcy5zdGFydFRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCk7T3BlbkxheWVycy5BbmltYXRpb24uc3RvcCh0aGlzLmFuaW1hdGlvbklkKTt0aGlzLmFuaW1hdGlvbklkPW51bGw7CnRoaXMuY2FsbGJhY2tzJiZ0aGlzLmNhbGxiYWNrcy5zdGFydCYmdGhpcy5jYWxsYmFja3Muc3RhcnQuY2FsbCh0aGlzLHRoaXMuYmVnaW4pO3RoaXMuYW5pbWF0aW9uSWQ9T3BlbkxheWVycy5BbmltYXRpb24uc3RhcnQoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucGxheSx0aGlzKSl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLnBsYXlpbmcmJih0aGlzLmNhbGxiYWNrcyYmdGhpcy5jYWxsYmFja3MuZG9uZSYmdGhpcy5jYWxsYmFja3MuZG9uZS5jYWxsKHRoaXMsdGhpcy5maW5pc2gpLE9wZW5MYXllcnMuQW5pbWF0aW9uLnN0b3AodGhpcy5hbmltYXRpb25JZCksdGhpcy5hbmltYXRpb25JZD1udWxsLHRoaXMucGxheWluZz0hMSl9LHBsYXk6ZnVuY3Rpb24oKXt2YXIgYT17fSxiO2ZvcihiIGluIHRoaXMuYmVnaW4pe3ZhciBjPXRoaXMuYmVnaW5bYl0sZD10aGlzLmZpbmlzaFtiXTtpZihudWxsPT1jfHxudWxsPT1kfHxpc05hTihjKXx8aXNOYU4oZCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiaW52YWxpZCB2YWx1ZSBmb3IgVHdlZW4iKTsKYVtiXT10aGlzLmVhc2luZy5hcHBseSh0aGlzLFt0aGlzLnRpbWUsYyxkLWMsdGhpcy5kdXJhdGlvbl0pfXRoaXMudGltZSsrO3RoaXMuY2FsbGJhY2tzJiZ0aGlzLmNhbGxiYWNrcy5lYWNoU3RlcCYmKChuZXcgRGF0ZSkuZ2V0VGltZSgpLXRoaXMuc3RhcnRUaW1lKS90aGlzLnRpbWU8PTFFMy90aGlzLm1pbkZyYW1lUmF0ZSYmdGhpcy5jYWxsYmFja3MuZWFjaFN0ZXAuY2FsbCh0aGlzLGEpO3RoaXMudGltZT50aGlzLmR1cmF0aW9uJiZ0aGlzLnN0b3AoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Ud2VlbiJ9KTtPcGVuTGF5ZXJzLkVhc2luZz17Q0xBU1NfTkFNRToiT3BlbkxheWVycy5FYXNpbmcifTtPcGVuTGF5ZXJzLkVhc2luZy5MaW5lYXI9e2Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyphL2QrYn0sZWFzZU91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyphL2QrYn0sZWFzZUluT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBjKmEvZCtifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVhc2luZy5MaW5lYXIifTsKT3BlbkxheWVycy5FYXNpbmcuRXhwbz17ZWFzZUluOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiAwPT1hP2I6YypNYXRoLnBvdygyLDEwKihhL2QtMSkpK2J9LGVhc2VPdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGE9PWQ/YitjOmMqKC1NYXRoLnBvdygyLC0xMCphL2QpKzEpK2J9LGVhc2VJbk91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gMD09YT9iOmE9PWQ/YitjOjE+KGEvPWQvMik/Yy8yKk1hdGgucG93KDIsMTAqKGEtMSkpK2I6Yy8yKigtTWF0aC5wb3coMiwtMTAqLS1hKSsyKStifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVhc2luZy5FeHBvIn07Ck9wZW5MYXllcnMuRWFzaW5nLlF1YWQ9e2Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyooYS89ZCkqYStifSxlYXNlT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybi1jKihhLz1kKSooYS0yKStifSxlYXNlSW5PdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIDE+KGEvPWQvMik/Yy8yKmEqYStiOi1jLzIqKC0tYSooYS0yKS0xKStifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVhc2luZy5RdWFkIn07T3BlbkxheWVycy5Qcm9qZWN0aW9uPU9wZW5MYXllcnMuQ2xhc3Moe3Byb2o6bnVsbCxwcm9qQ29kZTpudWxsLHRpdGxlUmVnRXg6L1wrdGl0bGU9W15cK10qLyxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGIpO3RoaXMucHJvakNvZGU9YTsib2JqZWN0Ij09dHlwZW9mIFByb2o0anMmJih0aGlzLnByb2o9bmV3IFByb2o0anMuUHJvaihhKSl9LGdldENvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9qP3RoaXMucHJvai5zcnNDb2RlOnRoaXMucHJvakNvZGV9LGdldFVuaXRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvaj90aGlzLnByb2oudW5pdHM6bnVsbH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRDb2RlKCl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTthJiYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuUHJvamVjdGlvbnx8KGE9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbihhKSksIm9iamVjdCI9PQp0eXBlb2YgUHJvajRqcyYmdGhpcy5wcm9qLmRlZkRhdGEmJmEucHJvai5kZWZEYXRhP2I9dGhpcy5wcm9qLmRlZkRhdGEucmVwbGFjZSh0aGlzLnRpdGxlUmVnRXgsIiIpPT1hLnByb2ouZGVmRGF0YS5yZXBsYWNlKHRoaXMudGl0bGVSZWdFeCwiIik6YS5nZXRDb2RlJiYoYj10aGlzLmdldENvZGUoKSxhPWEuZ2V0Q29kZSgpLGI9Yj09YXx8ISFPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3Jtc1tiXSYmT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybXNbYl1bYV09PT1PcGVuTGF5ZXJzLlByb2plY3Rpb24ubnVsbFRyYW5zZm9ybSkpO3JldHVybiBifSxkZXN0cm95OmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMucHJvajtkZWxldGUgdGhpcy5wcm9qQ29kZX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qcm9qZWN0aW9uIn0pO09wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zPXt9OwpPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHM9eyJFUFNHOjQzMjYiOnt1bml0czoiZGVncmVlcyIsbWF4RXh0ZW50OlstMTgwLC05MCwxODAsOTBdLHl4OiEwfSwiQ1JTOjg0Ijp7dW5pdHM6ImRlZ3JlZXMiLG1heEV4dGVudDpbLTE4MCwtOTAsMTgwLDkwXX0sIkVQU0c6OTAwOTEzIjp7dW5pdHM6Im0iLG1heEV4dGVudDpbLTIuMDAzNzUwODM0RTcsLTIuMDAzNzUwODM0RTcsMi4wMDM3NTA4MzRFNywyLjAwMzc1MDgzNEU3XX19OwpPcGVuTGF5ZXJzLlByb2plY3Rpb24uYWRkVHJhbnNmb3JtPWZ1bmN0aW9uKGEsYixjKXtpZihjPT09T3BlbkxheWVycy5Qcm9qZWN0aW9uLm51bGxUcmFuc2Zvcm0pe3ZhciBkPU9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1thXTtkJiYhT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2JdJiYoT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2JdPWQpfU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zW2FdfHwoT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybXNbYV09e30pO09wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zW2FdW2JdPWN9OwpPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtPWZ1bmN0aW9uKGEsYixjKXtpZihiJiZjKWlmKGIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb258fChiPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oYikpLGMgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb258fChjPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oYykpLGIucHJvaiYmYy5wcm9qKWE9UHJvajRqcy50cmFuc2Zvcm0oYi5wcm9qLGMucHJvaixhKTtlbHNle2I9Yi5nZXRDb2RlKCk7Yz1jLmdldENvZGUoKTt2YXIgZD1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtcztpZihkW2JdJiZkW2JdW2NdKWRbYl1bY10oYSl9cmV0dXJuIGF9O09wZW5MYXllcnMuUHJvamVjdGlvbi5udWxsVHJhbnNmb3JtPWZ1bmN0aW9uKGEpe3JldHVybiBhfTsKKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXthLng9MTgwKmEueC9kO2EueT0xODAvTWF0aC5QSSooMipNYXRoLmF0YW4oTWF0aC5leHAoYS55L2QqTWF0aC5QSSkpLU1hdGguUEkvMik7cmV0dXJuIGF9ZnVuY3Rpb24gYihhKXthLng9YS54KmQvMTgwO3ZhciBiPU1hdGgubG9nKE1hdGgudGFuKCg5MCthLnkpKk1hdGguUEkvMzYwKSkvTWF0aC5QSSpkO2EueT1NYXRoLm1heCgtMi4wMDM3NTA4MzRFNyxNYXRoLm1pbihiLDIuMDAzNzUwODM0RTcpKTtyZXR1cm4gYX1mdW5jdGlvbiBjKGMsZCl7dmFyIGU9T3BlbkxheWVycy5Qcm9qZWN0aW9uLmFkZFRyYW5zZm9ybSxmPU9wZW5MYXllcnMuUHJvamVjdGlvbi5udWxsVHJhbnNmb3JtLGcsbixxLHIscztnPTA7Zm9yKG49ZC5sZW5ndGg7ZzxuOysrZylmb3IocT1kW2ddLGUoYyxxLGIpLGUocSxjLGEpLHM9ZysxO3M8bjsrK3Mpcj1kW3NdLGUocSxyLGYpLGUocixxLGYpfXZhciBkPTIuMDAzNzUwODM0RTcsZT1bIkVQU0c6OTAwOTEzIiwiRVBTRzozODU3IiwKIkVQU0c6MTAyMTEzIiwiRVBTRzoxMDIxMDAiXSxmPVsiQ1JTOjg0IiwidXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni42OjQzMjYiLCJFUFNHOjQzMjYiXSxnO2ZvcihnPWUubGVuZ3RoLTE7MDw9ZzstLWcpYyhlW2ddLGYpO2ZvcihnPWYubGVuZ3RoLTE7MDw9ZzstLWcpYyhmW2ddLGUpfSkoKTtPcGVuTGF5ZXJzLk1hcD1PcGVuTGF5ZXJzLkNsYXNzKHtaX0lOREVYX0JBU0U6e0Jhc2VMYXllcjoxMDAsT3ZlcmxheTozMjUsRmVhdHVyZTo3MjUsUG9wdXA6NzUwLENvbnRyb2w6MUUzfSxpZDpudWxsLGZyYWN0aW9uYWxab29tOiExLGV2ZW50czpudWxsLGFsbE92ZXJsYXlzOiExLGRpdjpudWxsLGRyYWdnaW5nOiExLHNpemU6bnVsbCx2aWV3UG9ydERpdjpudWxsLGxheWVyQ29udGFpbmVyT3JpZ2luOm51bGwsbGF5ZXJDb250YWluZXJEaXY6bnVsbCxsYXllcnM6bnVsbCxjb250cm9sczpudWxsLHBvcHVwczpudWxsLGJhc2VMYXllcjpudWxsLGNlbnRlcjpudWxsLHJlc29sdXRpb246bnVsbCx6b29tOjAscGFuUmF0aW86MS41LG9wdGlvbnM6bnVsbCx0aWxlU2l6ZTpudWxsLHByb2plY3Rpb246IkVQU0c6NDMyNiIsdW5pdHM6bnVsbCxyZXNvbHV0aW9uczpudWxsLG1heFJlc29sdXRpb246bnVsbCxtaW5SZXNvbHV0aW9uOm51bGwsbWF4U2NhbGU6bnVsbCxtaW5TY2FsZTpudWxsLAptYXhFeHRlbnQ6bnVsbCxtaW5FeHRlbnQ6bnVsbCxyZXN0cmljdGVkRXh0ZW50Om51bGwsbnVtWm9vbUxldmVsczoxNix0aGVtZTpudWxsLGRpc3BsYXlQcm9qZWN0aW9uOm51bGwsZmFsbFRocm91Z2g6ITEsYXV0b1VwZGF0ZVNpemU6ITAsZXZlbnRMaXN0ZW5lcnM6bnVsbCxwYW5Ud2VlbjpudWxsLHBhbk1ldGhvZDpPcGVuTGF5ZXJzLkVhc2luZy5FeHBvLmVhc2VPdXQscGFuRHVyYXRpb246NTAsem9vbVR3ZWVuOm51bGwsem9vbU1ldGhvZDpPcGVuTGF5ZXJzLkVhc2luZy5RdWFkLmVhc2VPdXQsem9vbUR1cmF0aW9uOjIwLHBhZGRpbmdGb3JQb3B1cHM6bnVsbCxsYXllckNvbnRhaW5lck9yaWdpblB4Om51bGwsbWluUHg6bnVsbCxtYXhQeDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXsxPT09YXJndW1lbnRzLmxlbmd0aCYmIm9iamVjdCI9PT10eXBlb2YgYSYmKGE9KGI9YSkmJmIuZGl2KTt0aGlzLnRpbGVTaXplPW5ldyBPcGVuTGF5ZXJzLlNpemUoT3BlbkxheWVycy5NYXAuVElMRV9XSURUSCwKT3BlbkxheWVycy5NYXAuVElMRV9IRUlHSFQpO3RoaXMucGFkZGluZ0ZvclBvcHVwcz1uZXcgT3BlbkxheWVycy5Cb3VuZHMoMTUsMTUsMTUsMTUpO3RoaXMudGhlbWU9T3BlbkxheWVycy5fZ2V0U2NyaXB0TG9jYXRpb24oKSsidGhlbWUvZGVmYXVsdC9zdHlsZS5jc3MiO3RoaXMub3B0aW9ucz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxiKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLE9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1t0aGlzLnByb2plY3Rpb24gaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb24/dGhpcy5wcm9qZWN0aW9uLnByb2pDb2RlOnRoaXMucHJvamVjdGlvbl0pOyF0aGlzLm1heEV4dGVudHx8dGhpcy5tYXhFeHRlbnQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kc3x8KHRoaXMubWF4RXh0ZW50PW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLm1heEV4dGVudCkpOwohdGhpcy5taW5FeHRlbnR8fHRoaXMubWluRXh0ZW50IGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHN8fCh0aGlzLm1pbkV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5taW5FeHRlbnQpKTshdGhpcy5yZXN0cmljdGVkRXh0ZW50fHx0aGlzLnJlc3RyaWN0ZWRFeHRlbnQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kc3x8KHRoaXMucmVzdHJpY3RlZEV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5yZXN0cmljdGVkRXh0ZW50KSk7IXRoaXMuY2VudGVyfHx0aGlzLmNlbnRlciBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTG9uTGF0fHwodGhpcy5jZW50ZXI9bmV3IE9wZW5MYXllcnMuTG9uTGF0KHRoaXMuY2VudGVyKSk7dGhpcy5sYXllcnM9W107dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQoIk9wZW5MYXllcnMuTWFwXyIpO3RoaXMuZGl2PU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3RoaXMuZGl2fHwodGhpcy5kaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksCnRoaXMuZGl2LnN0eWxlLmhlaWdodD0iMXB4Iix0aGlzLmRpdi5zdHlsZS53aWR0aD0iMXB4Iik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGl2LCJvbE1hcCIpO3ZhciBjPXRoaXMuaWQrIl9PcGVuTGF5ZXJzX1ZpZXdQb3J0Ijt0aGlzLnZpZXdQb3J0RGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYoYyxudWxsLG51bGwsbnVsbCwicmVsYXRpdmUiLG51bGwsImhpZGRlbiIpO3RoaXMudmlld1BvcnREaXYuc3R5bGUud2lkdGg9IjEwMCUiO3RoaXMudmlld1BvcnREaXYuc3R5bGUuaGVpZ2h0PSIxMDAlIjt0aGlzLnZpZXdQb3J0RGl2LmNsYXNzTmFtZT0ib2xNYXBWaWV3cG9ydCI7dGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy52aWV3UG9ydERpdik7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMsdGhpcy52aWV3UG9ydERpdixudWxsLHRoaXMuZmFsbFRocm91Z2gse2luY2x1ZGVYWTohMH0pO09wZW5MYXllcnMuVGlsZU1hbmFnZXImJm51bGwhPT0KdGhpcy50aWxlTWFuYWdlciYmKHRoaXMudGlsZU1hbmFnZXIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlRpbGVNYW5hZ2VyfHwodGhpcy50aWxlTWFuYWdlcj1uZXcgT3BlbkxheWVycy5UaWxlTWFuYWdlcih0aGlzLnRpbGVNYW5hZ2VyKSksdGhpcy50aWxlTWFuYWdlci5hZGRNYXAodGhpcykpO2M9dGhpcy5pZCsiX09wZW5MYXllcnNfQ29udGFpbmVyIjt0aGlzLmxheWVyQ29udGFpbmVyRGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYoYyk7dGhpcy5sYXllckNvbnRhaW5lckRpdi5zdHlsZS56SW5kZXg9dGhpcy5aX0lOREVYX0JBU0UuUG9wdXAtMTt0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHg9e3g6MCx5OjB9O3RoaXMuYXBwbHlUcmFuc2Zvcm0oKTt0aGlzLnZpZXdQb3J0RGl2LmFwcGVuZENoaWxkKHRoaXMubGF5ZXJDb250YWluZXJEaXYpO3RoaXMudXBkYXRlU2l6ZSgpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpdGhpcy5ldmVudHMub24odGhpcy5ldmVudExpc3RlbmVycyk7CiEwPT09dGhpcy5hdXRvVXBkYXRlU2l6ZSYmKHRoaXMudXBkYXRlU2l6ZURlc3Ryb3k9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMudXBkYXRlU2l6ZSx0aGlzKSxPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUod2luZG93LCJyZXNpemUiLHRoaXMudXBkYXRlU2l6ZURlc3Ryb3kpKTtpZih0aGlzLnRoZW1lKXtmb3IodmFyIGM9ITAsZD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLGU9MCxmPWQubGVuZ3RoO2U8ZjsrK2UpaWYoT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybChkLml0ZW0oZSkuaHJlZix0aGlzLnRoZW1lKSl7Yz0hMTticmVha31jJiYoYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksYy5zZXRBdHRyaWJ1dGUoInJlbCIsInN0eWxlc2hlZXQiKSxjLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvY3NzIiksYy5zZXRBdHRyaWJ1dGUoImhyZWYiLHRoaXMudGhlbWUpLGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoYykpfW51bGw9PQp0aGlzLmNvbnRyb2xzJiYodGhpcy5jb250cm9scz1bXSxudWxsIT1PcGVuTGF5ZXJzLkNvbnRyb2wmJihPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2aWdhdGlvbj90aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5OYXZpZ2F0aW9uKTpPcGVuTGF5ZXJzLkNvbnRyb2wuVG91Y2hOYXZpZ2F0aW9uJiZ0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5Ub3VjaE5hdmlnYXRpb24pLE9wZW5MYXllcnMuQ29udHJvbC5ab29tP3RoaXMuY29udHJvbHMucHVzaChuZXcgT3BlbkxheWVycy5Db250cm9sLlpvb20pOk9wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tJiZ0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tKSxPcGVuTGF5ZXJzLkNvbnRyb2wuQXJnUGFyc2VyJiZ0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5BcmdQYXJzZXIpLE9wZW5MYXllcnMuQ29udHJvbC5BdHRyaWJ1dGlvbiYmCnRoaXMuY29udHJvbHMucHVzaChuZXcgT3BlbkxheWVycy5Db250cm9sLkF0dHJpYnV0aW9uKSkpO2U9MDtmb3IoZj10aGlzLmNvbnRyb2xzLmxlbmd0aDtlPGY7ZSsrKXRoaXMuYWRkQ29udHJvbFRvTWFwKHRoaXMuY29udHJvbHNbZV0pO3RoaXMucG9wdXBzPVtdO3RoaXMudW5sb2FkRGVzdHJveT1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5kZXN0cm95LHRoaXMpO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh3aW5kb3csInVubG9hZCIsdGhpcy51bmxvYWREZXN0cm95KTtiJiZiLmxheWVycyYmKGRlbGV0ZSB0aGlzLmNlbnRlcixkZWxldGUgdGhpcy56b29tLHRoaXMuYWRkTGF5ZXJzKGIubGF5ZXJzKSxiLmNlbnRlciYmIXRoaXMuZ2V0Q2VudGVyKCkmJnRoaXMuc2V0Q2VudGVyKGIuY2VudGVyLGIuem9vbSkpO3RoaXMucGFuTWV0aG9kJiYodGhpcy5wYW5Ud2Vlbj1uZXcgT3BlbkxheWVycy5Ud2Vlbih0aGlzLnBhbk1ldGhvZCkpO3RoaXMuem9vbU1ldGhvZCYmdGhpcy5hcHBseVRyYW5zZm9ybS50cmFuc2Zvcm0mJgoodGhpcy56b29tVHdlZW49bmV3IE9wZW5MYXllcnMuVHdlZW4odGhpcy56b29tTWV0aG9kKSl9LGdldFZpZXdwb3J0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlld1BvcnREaXZ9LHJlbmRlcjpmdW5jdGlvbihhKXt0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5kaXYsIm9sTWFwIik7dGhpcy52aWV3UG9ydERpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMudmlld1BvcnREaXYpO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMudmlld1BvcnREaXYpO3RoaXMudXBkYXRlU2l6ZSgpfSx1bmxvYWREZXN0cm95Om51bGwsdXBkYXRlU2l6ZURlc3Ryb3k6bnVsbCxkZXN0cm95OmZ1bmN0aW9uKCl7aWYoIXRoaXMudW5sb2FkRGVzdHJveSlyZXR1cm4hMTt0aGlzLnBhblR3ZWVuJiYodGhpcy5wYW5Ud2Vlbi5zdG9wKCksdGhpcy5wYW5Ud2Vlbj1udWxsKTt0aGlzLnpvb21Ud2VlbiYmKHRoaXMuem9vbVR3ZWVuLnN0b3AoKSwKdGhpcy56b29tVHdlZW49bnVsbCk7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKHdpbmRvdywidW5sb2FkIix0aGlzLnVubG9hZERlc3Ryb3kpO3RoaXMudW5sb2FkRGVzdHJveT1udWxsO3RoaXMudXBkYXRlU2l6ZURlc3Ryb3kmJk9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh3aW5kb3csInJlc2l6ZSIsdGhpcy51cGRhdGVTaXplRGVzdHJveSk7dGhpcy5wYWRkaW5nRm9yUG9wdXBzPW51bGw7aWYobnVsbCE9dGhpcy5jb250cm9scyl7Zm9yKHZhciBhPXRoaXMuY29udHJvbHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy5jb250cm9sc1thXS5kZXN0cm95KCk7dGhpcy5jb250cm9scz1udWxsfWlmKG51bGwhPXRoaXMubGF5ZXJzKXtmb3IoYT10aGlzLmxheWVycy5sZW5ndGgtMTswPD1hOy0tYSl0aGlzLmxheWVyc1thXS5kZXN0cm95KCExKTt0aGlzLmxheWVycz1udWxsfXRoaXMudmlld1BvcnREaXYmJnRoaXMudmlld1BvcnREaXYucGFyZW50Tm9kZSYmdGhpcy52aWV3UG9ydERpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMudmlld1BvcnREaXYpOwp0aGlzLnZpZXdQb3J0RGl2PW51bGw7dGhpcy50aWxlTWFuYWdlciYmKHRoaXMudGlsZU1hbmFnZXIucmVtb3ZlTWFwKHRoaXMpLHRoaXMudGlsZU1hbmFnZXI9bnVsbCk7dGhpcy5ldmVudExpc3RlbmVycyYmKHRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpLHRoaXMuZXZlbnRMaXN0ZW5lcnM9bnVsbCk7dGhpcy5ldmVudHMuZGVzdHJveSgpO3RoaXMub3B0aW9ucz10aGlzLmV2ZW50cz1udWxsfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubWluUHgmJmEucmVzdHJpY3RlZEV4dGVudCE9dGhpcy5yZXN0cmljdGVkRXh0ZW50O09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTtiJiZ0aGlzLm1vdmVUbyh0aGlzLmdldENhY2hlZENlbnRlcigpLHRoaXMuem9vbSx7Zm9yY2Vab29tQ2hhbmdlOiEwfSl9LGdldFRpbGVTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGlsZVNpemV9LGdldEJ5OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iZnVuY3Rpb24iPT0KdHlwZW9mIGMudGVzdDtyZXR1cm4gT3BlbkxheWVycy5BcnJheS5maWx0ZXIodGhpc1thXSxmdW5jdGlvbihhKXtyZXR1cm4gYVtiXT09Y3x8ZCYmYy50ZXN0KGFbYl0pfSl9LGdldExheWVyc0J5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0QnkoImxheWVycyIsYSxiKX0sZ2V0TGF5ZXJzQnlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldExheWVyc0J5KCJuYW1lIixhKX0sZ2V0TGF5ZXJzQnlDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRMYXllcnNCeSgiQ0xBU1NfTkFNRSIsYSl9LGdldENvbnRyb2xzQnk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nZXRCeSgiY29udHJvbHMiLGEsYil9LGdldENvbnRyb2xzQnlDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRDb250cm9sc0J5KCJDTEFTU19OQU1FIixhKX0sZ2V0TGF5ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW51bGwsYz0wLGQ9dGhpcy5sYXllcnMubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPQp0aGlzLmxheWVyc1tjXTtpZihlLmlkPT1hKXtiPWU7YnJlYWt9fXJldHVybiBifSxzZXRMYXllclpJbmRleDpmdW5jdGlvbihhLGIpe2Euc2V0WkluZGV4KHRoaXMuWl9JTkRFWF9CQVNFW2EuaXNCYXNlTGF5ZXI/IkJhc2VMYXllciI6Ik92ZXJsYXkiXSs1KmIpfSxyZXNldExheWVyc1pJbmRleDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5sYXllcnMubGVuZ3RoO2E8YjthKyspdGhpcy5zZXRMYXllclpJbmRleCh0aGlzLmxheWVyc1thXSxhKX0sYWRkTGF5ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmxheWVycy5sZW5ndGg7YjxjO2IrKylpZih0aGlzLmxheWVyc1tiXT09YSlyZXR1cm4hMTtpZighMT09PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicHJlYWRkbGF5ZXIiLHtsYXllcjphfSkpcmV0dXJuITE7dGhpcy5hbGxPdmVybGF5cyYmKGEuaXNCYXNlTGF5ZXI9ITEpO2EuZGl2LmNsYXNzTmFtZT0ib2xMYXllckRpdiI7YS5kaXYuc3R5bGUub3ZlcmZsb3c9CiIiO3RoaXMuc2V0TGF5ZXJaSW5kZXgoYSx0aGlzLmxheWVycy5sZW5ndGgpO2EuaXNGaXhlZD90aGlzLnZpZXdQb3J0RGl2LmFwcGVuZENoaWxkKGEuZGl2KTp0aGlzLmxheWVyQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKGEuZGl2KTt0aGlzLmxheWVycy5wdXNoKGEpO2Euc2V0TWFwKHRoaXMpO2EuaXNCYXNlTGF5ZXJ8fHRoaXMuYWxsT3ZlcmxheXMmJiF0aGlzLmJhc2VMYXllcj9udWxsPT10aGlzLmJhc2VMYXllcj90aGlzLnNldEJhc2VMYXllcihhKTphLnNldFZpc2liaWxpdHkoITEpOmEucmVkcmF3KCk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJhZGRsYXllciIse2xheWVyOmF9KTthLmV2ZW50cy50cmlnZ2VyRXZlbnQoImFkZGVkIix7bWFwOnRoaXMsbGF5ZXI6YX0pO2EuYWZ0ZXJBZGQoKTtyZXR1cm4hMH0sYWRkTGF5ZXJzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmFkZExheWVyKGFbYl0pfSxyZW1vdmVMYXllcjpmdW5jdGlvbihhLApiKXtpZighMSE9PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicHJlcmVtb3ZlbGF5ZXIiLHtsYXllcjphfSkpe251bGw9PWImJihiPSEwKTthLmlzRml4ZWQ/dGhpcy52aWV3UG9ydERpdi5yZW1vdmVDaGlsZChhLmRpdik6dGhpcy5sYXllckNvbnRhaW5lckRpdi5yZW1vdmVDaGlsZChhLmRpdik7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5sYXllcnMsYSk7YS5yZW1vdmVNYXAodGhpcyk7YS5tYXA9bnVsbDtpZih0aGlzLmJhc2VMYXllcj09YSYmKHRoaXMuYmFzZUxheWVyPW51bGwsYikpZm9yKHZhciBjPTAsZD10aGlzLmxheWVycy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5sYXllcnNbY107aWYoZS5pc0Jhc2VMYXllcnx8dGhpcy5hbGxPdmVybGF5cyl7dGhpcy5zZXRCYXNlTGF5ZXIoZSk7YnJlYWt9fXRoaXMucmVzZXRMYXllcnNaSW5kZXgoKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInJlbW92ZWxheWVyIix7bGF5ZXI6YX0pO2EuZXZlbnRzLnRyaWdnZXJFdmVudCgicmVtb3ZlZCIsCnttYXA6dGhpcyxsYXllcjphfSl9fSxnZXROdW1MYXllcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXllcnMubGVuZ3RofSxnZXRMYXllckluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBPcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmxheWVycyxhKX0sc2V0TGF5ZXJJbmRleDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGF5ZXJJbmRleChhKTswPmI/Yj0wOmI+dGhpcy5sYXllcnMubGVuZ3RoJiYoYj10aGlzLmxheWVycy5sZW5ndGgpO2lmKGMhPWIpe3RoaXMubGF5ZXJzLnNwbGljZShjLDEpO3RoaXMubGF5ZXJzLnNwbGljZShiLDAsYSk7Zm9yKHZhciBjPTAsZD10aGlzLmxheWVycy5sZW5ndGg7YzxkO2MrKyl0aGlzLnNldExheWVyWkluZGV4KHRoaXMubGF5ZXJzW2NdLGMpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjphLHByb3BlcnR5OiJvcmRlciJ9KTt0aGlzLmFsbE92ZXJsYXlzJiYoMD09PWI/dGhpcy5zZXRCYXNlTGF5ZXIoYSk6CnRoaXMuYmFzZUxheWVyIT09dGhpcy5sYXllcnNbMF0mJnRoaXMuc2V0QmFzZUxheWVyKHRoaXMubGF5ZXJzWzBdKSl9fSxyYWlzZUxheWVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMYXllckluZGV4KGEpK2I7dGhpcy5zZXRMYXllckluZGV4KGEsYyl9LHNldEJhc2VMYXllcjpmdW5jdGlvbihhKXtpZihhIT10aGlzLmJhc2VMYXllciYmLTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMubGF5ZXJzLGEpKXt2YXIgYj10aGlzLmdldENhY2hlZENlbnRlcigpLGM9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUodGhpcy5nZXRTY2FsZSgpLGEudW5pdHMpO251bGw9PXRoaXMuYmFzZUxheWVyfHx0aGlzLmFsbE92ZXJsYXlzfHx0aGlzLmJhc2VMYXllci5zZXRWaXNpYmlsaXR5KCExKTt0aGlzLmJhc2VMYXllcj1hO2lmKCF0aGlzLmFsbE92ZXJsYXlzfHx0aGlzLmJhc2VMYXllci52aXNpYmlsaXR5KXRoaXMuYmFzZUxheWVyLnNldFZpc2liaWxpdHkoITApLAohMT09PXRoaXMuYmFzZUxheWVyLmluUmFuZ2UmJnRoaXMuYmFzZUxheWVyLnJlZHJhdygpO251bGwhPWImJihhPXRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oY3x8dGhpcy5yZXNvbHV0aW9uLCEwKSx0aGlzLnNldENlbnRlcihiLGEsITEsITApKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWJhc2VsYXllciIse2xheWVyOnRoaXMuYmFzZUxheWVyfSl9fSxhZGRDb250cm9sOmZ1bmN0aW9uKGEsYil7dGhpcy5jb250cm9scy5wdXNoKGEpO3RoaXMuYWRkQ29udHJvbFRvTWFwKGEsYil9LGFkZENvbnRyb2xzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE9PT1hcmd1bWVudHMubGVuZ3RoP1tdOmIsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl0aGlzLmFkZENvbnRyb2woYVtkXSxjW2RdP2NbZF06bnVsbCl9LGFkZENvbnRyb2xUb01hcDpmdW5jdGlvbihhLGIpe2Eub3V0c2lkZVZpZXdwb3J0PW51bGwhPWEuZGl2O3RoaXMuZGlzcGxheVByb2plY3Rpb24mJiFhLmRpc3BsYXlQcm9qZWN0aW9uJiYKKGEuZGlzcGxheVByb2plY3Rpb249dGhpcy5kaXNwbGF5UHJvamVjdGlvbik7YS5zZXRNYXAodGhpcyk7dmFyIGM9YS5kcmF3KGIpO2MmJiFhLm91dHNpZGVWaWV3cG9ydCYmKGMuc3R5bGUuekluZGV4PXRoaXMuWl9JTkRFWF9CQVNFLkNvbnRyb2wrdGhpcy5jb250cm9scy5sZW5ndGgsdGhpcy52aWV3UG9ydERpdi5hcHBlbmRDaGlsZChjKSk7YS5hdXRvQWN0aXZhdGUmJmEuYWN0aXZhdGUoKX0sZ2V0Q29udHJvbDpmdW5jdGlvbihhKXtmb3IodmFyIGI9bnVsbCxjPTAsZD10aGlzLmNvbnRyb2xzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmNvbnRyb2xzW2NdO2lmKGUuaWQ9PWEpe2I9ZTticmVha319cmV0dXJuIGJ9LHJlbW92ZUNvbnRyb2w6ZnVuY3Rpb24oYSl7YSYmYT09dGhpcy5nZXRDb250cm9sKGEuaWQpJiYoYS5kaXYmJmEuZGl2LnBhcmVudE5vZGU9PXRoaXMudmlld1BvcnREaXYmJnRoaXMudmlld1BvcnREaXYucmVtb3ZlQ2hpbGQoYS5kaXYpLE9wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMuY29udHJvbHMsCmEpKX0sYWRkUG9wdXA6ZnVuY3Rpb24oYSxiKXtpZihiKWZvcih2YXIgYz10aGlzLnBvcHVwcy5sZW5ndGgtMTswPD1jOy0tYyl0aGlzLnJlbW92ZVBvcHVwKHRoaXMucG9wdXBzW2NdKTthLm1hcD10aGlzO3RoaXMucG9wdXBzLnB1c2goYSk7aWYoYz1hLmRyYXcoKSljLnN0eWxlLnpJbmRleD10aGlzLlpfSU5ERVhfQkFTRS5Qb3B1cCt0aGlzLnBvcHVwcy5sZW5ndGgsdGhpcy5sYXllckNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChjKX0scmVtb3ZlUG9wdXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5wb3B1cHMsYSk7aWYoYS5kaXYpdHJ5e3RoaXMubGF5ZXJDb250YWluZXJEaXYucmVtb3ZlQ2hpbGQoYS5kaXYpfWNhdGNoKGIpe31hLm1hcD1udWxsfSxnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLnNpemUmJihhPXRoaXMuc2l6ZS5jbG9uZSgpKTtyZXR1cm4gYX0sdXBkYXRlU2l6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q3VycmVudFNpemUoKTsKaWYoYSYmIWlzTmFOKGEuaCkmJiFpc05hTihhLncpKXt0aGlzLmV2ZW50cy5jbGVhck1vdXNlQ2FjaGUoKTt2YXIgYj10aGlzLmdldFNpemUoKTtudWxsPT1iJiYodGhpcy5zaXplPWI9YSk7aWYoIWEuZXF1YWxzKGIpKXt0aGlzLnNpemU9YTthPTA7Zm9yKGI9dGhpcy5sYXllcnMubGVuZ3RoO2E8YjthKyspdGhpcy5sYXllcnNbYV0ub25NYXBSZXNpemUoKTthPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJm51bGwhPWEmJihiPXRoaXMuZ2V0Wm9vbSgpLHRoaXMuem9vbT1udWxsLHRoaXMuc2V0Q2VudGVyKGEsYikpfX10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInVwZGF0ZXNpemUiKX0sZ2V0Q3VycmVudFNpemU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgT3BlbkxheWVycy5TaXplKHRoaXMuZGl2LmNsaWVudFdpZHRoLHRoaXMuZGl2LmNsaWVudEhlaWdodCk7aWYoMD09YS53JiYwPT1hLmh8fGlzTmFOKGEudykmJmlzTmFOKGEuaCkpYS53PXRoaXMuZGl2Lm9mZnNldFdpZHRoLAphLmg9dGhpcy5kaXYub2Zmc2V0SGVpZ2h0O2lmKDA9PWEudyYmMD09YS5ofHxpc05hTihhLncpJiZpc05hTihhLmgpKWEudz1wYXJzZUludCh0aGlzLmRpdi5zdHlsZS53aWR0aCksYS5oPXBhcnNlSW50KHRoaXMuZGl2LnN0eWxlLmhlaWdodCk7cmV0dXJuIGF9LGNhbGN1bGF0ZUJvdW5kczpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7bnVsbD09YSYmKGE9dGhpcy5nZXRDYWNoZWRDZW50ZXIoKSk7bnVsbD09YiYmKGI9dGhpcy5nZXRSZXNvbHV0aW9uKCkpO2lmKG51bGwhPWEmJm51bGwhPWIpdmFyIGM9dGhpcy5zaXplLncqYi8yLGQ9dGhpcy5zaXplLmgqYi8yLGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKGEubG9uLWMsYS5sYXQtZCxhLmxvbitjLGEubGF0K2QpO3JldHVybiBjfSxnZXRDZW50ZXI6ZnVuY3Rpb24oKXt2YXIgYT1udWxsLGI9dGhpcy5nZXRDYWNoZWRDZW50ZXIoKTtiJiYoYT1iLmNsb25lKCkpO3JldHVybiBhfSxnZXRDYWNoZWRDZW50ZXI6ZnVuY3Rpb24oKXshdGhpcy5jZW50ZXImJgp0aGlzLnNpemUmJih0aGlzLmNlbnRlcj10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KHt4OnRoaXMuc2l6ZS53LzIseTp0aGlzLnNpemUuaC8yfSkpO3JldHVybiB0aGlzLmNlbnRlcn0sZ2V0Wm9vbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnpvb219LHBhbjpmdW5jdGlvbihhLGIsYyl7Yz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLHthbmltYXRlOiEwLGRyYWdnaW5nOiExfSk7aWYoYy5kcmFnZ2luZykwPT1hJiYwPT1ifHx0aGlzLm1vdmVCeVB4KGEsYik7ZWxzZXt2YXIgZD10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCkpO2E9ZC5hZGQoYSxiKTtpZih0aGlzLmRyYWdnaW5nfHwhYS5lcXVhbHMoZCkpZD10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpLGMuYW5pbWF0ZT90aGlzLnBhblRvKGQpOih0aGlzLm1vdmVUbyhkKSx0aGlzLmRyYWdnaW5nJiYodGhpcy5kcmFnZ2luZz0hMSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmVlbmQiKSkpfX0sCnBhblRvOmZ1bmN0aW9uKGEpe2lmKHRoaXMucGFuVHdlZW4mJnRoaXMuZ2V0RXh0ZW50KCkuc2NhbGUodGhpcy5wYW5SYXRpbykuY29udGFpbnNMb25MYXQoYSkpe3ZhciBiPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7aWYoIWEuZXF1YWxzKGIpKXt2YXIgYj10aGlzLmdldFBpeGVsRnJvbUxvbkxhdChiKSxjPXRoaXMuZ2V0UGl4ZWxGcm9tTG9uTGF0KGEpLGQ9MCxlPTA7dGhpcy5wYW5Ud2Vlbi5zdGFydCh7eDowLHk6MH0se3g6Yy54LWIueCx5OmMueS1iLnl9LHRoaXMucGFuRHVyYXRpb24se2NhbGxiYWNrczp7ZWFjaFN0ZXA6T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKGEpe3RoaXMubW92ZUJ5UHgoYS54LWQsYS55LWUpO2Q9TWF0aC5yb3VuZChhLngpO2U9TWF0aC5yb3VuZChhLnkpfSx0aGlzKSxkb25lOk9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbihiKXt0aGlzLm1vdmVUbyhhKTt0aGlzLmRyYWdnaW5nPSExO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIpfSwKdGhpcyl9fSl9fWVsc2UgdGhpcy5zZXRDZW50ZXIoYSl9LHNldENlbnRlcjpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLnBhblR3ZWVuJiZ0aGlzLnBhblR3ZWVuLnN0b3AoKTt0aGlzLnpvb21Ud2VlbiYmdGhpcy56b29tVHdlZW4uc3RvcCgpO3RoaXMubW92ZVRvKGEsYix7ZHJhZ2dpbmc6Yyxmb3JjZVpvb21DaGFuZ2U6ZH0pfSxtb3ZlQnlQeDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2l6ZS53LzIsZD10aGlzLnNpemUuaC8yLGU9YythLGY9ZCtiLGc9dGhpcy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lLGg9MCxrPTA7dGhpcy5yZXN0cmljdGVkRXh0ZW50JiYoaD1jLGs9ZCxnPSExKTthPWd8fGU8PXRoaXMubWF4UHgueC1oJiZlPj10aGlzLm1pblB4LngraD9NYXRoLnJvdW5kKGEpOjA7Yj1mPD10aGlzLm1heFB4LnktayYmZj49dGhpcy5taW5QeC55K2s/TWF0aC5yb3VuZChiKTowO2lmKGF8fGIpe3RoaXMuZHJhZ2dpbmd8fCh0aGlzLmRyYWdnaW5nPSEwLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZXN0YXJ0IikpOwp0aGlzLmNlbnRlcj1udWxsO2EmJih0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueC09YSx0aGlzLm1pblB4LngtPWEsdGhpcy5tYXhQeC54LT1hKTtiJiYodGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4LnktPWIsdGhpcy5taW5QeC55LT1iLHRoaXMubWF4UHgueS09Yik7dGhpcy5hcHBseVRyYW5zZm9ybSgpO2Q9MDtmb3IoZT10aGlzLmxheWVycy5sZW5ndGg7ZDxlOysrZCljPXRoaXMubGF5ZXJzW2RdLGMudmlzaWJpbGl0eSYmKGM9PT10aGlzLmJhc2VMYXllcnx8Yy5pblJhbmdlKSYmKGMubW92ZUJ5UHgoYSxiKSxjLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmUiKSk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlIil9fSxhZGp1c3Rab29tOmZ1bmN0aW9uKGEpe2lmKHRoaXMuYmFzZUxheWVyJiZ0aGlzLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpe3ZhciBiPXRoaXMuYmFzZUxheWVyLnJlc29sdXRpb25zLGM9dGhpcy5nZXRNYXhFeHRlbnQoKS5nZXRXaWR0aCgpL3RoaXMuc2l6ZS53OwppZih0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGEpPmMpaWYodGhpcy5mcmFjdGlvbmFsWm9vbSlhPXRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oYyk7ZWxzZSBmb3IodmFyIGQ9YXwwLGU9Yi5sZW5ndGg7ZDxlOysrZClpZihiW2RdPD1jKXthPWQ7YnJlYWt9fXJldHVybiBhfSxnZXRNaW5ab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWRqdXN0Wm9vbSgwKX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1hfHxhIGluc3RhbmNlb2YgT3BlbkxheWVycy5Mb25MYXR8fChhPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhKSk7Y3x8KGM9e30pO251bGwhPWImJihiPXBhcnNlRmxvYXQoYiksdGhpcy5mcmFjdGlvbmFsWm9vbXx8KGI9TWF0aC5yb3VuZChiKSkpO3ZhciBkPWI7Yj10aGlzLmFkanVzdFpvb20oYik7YiE9PWQmJihhPXRoaXMuZ2V0Q2VudGVyKCkpO3ZhciBkPWMuZHJhZ2dpbmd8fHRoaXMuZHJhZ2dpbmcsZT1jLmZvcmNlWm9vbUNoYW5nZTt0aGlzLmdldENhY2hlZENlbnRlcigpfHwKdGhpcy5pc1ZhbGlkTG9uTGF0KGEpfHwoYT10aGlzLm1heEV4dGVudC5nZXRDZW50ZXJMb25MYXQoKSx0aGlzLmNlbnRlcj1hLmNsb25lKCkpO2lmKG51bGwhPXRoaXMucmVzdHJpY3RlZEV4dGVudCl7bnVsbD09YSYmKGE9dGhpcy5jZW50ZXIpO251bGw9PWImJihiPXRoaXMuZ2V0Wm9vbSgpKTt2YXIgZj10aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGIpLGY9dGhpcy5jYWxjdWxhdGVCb3VuZHMoYSxmKTtpZighdGhpcy5yZXN0cmljdGVkRXh0ZW50LmNvbnRhaW5zQm91bmRzKGYpKXt2YXIgZz10aGlzLnJlc3RyaWN0ZWRFeHRlbnQuZ2V0Q2VudGVyTG9uTGF0KCk7Zi5nZXRXaWR0aCgpPnRoaXMucmVzdHJpY3RlZEV4dGVudC5nZXRXaWR0aCgpP2E9bmV3IE9wZW5MYXllcnMuTG9uTGF0KGcubG9uLGEubGF0KTpmLmxlZnQ8dGhpcy5yZXN0cmljdGVkRXh0ZW50LmxlZnQ/YT1hLmFkZCh0aGlzLnJlc3RyaWN0ZWRFeHRlbnQubGVmdC1mLmxlZnQsMCk6Zi5yaWdodD50aGlzLnJlc3RyaWN0ZWRFeHRlbnQucmlnaHQmJgooYT1hLmFkZCh0aGlzLnJlc3RyaWN0ZWRFeHRlbnQucmlnaHQtZi5yaWdodCwwKSk7Zi5nZXRIZWlnaHQoKT50aGlzLnJlc3RyaWN0ZWRFeHRlbnQuZ2V0SGVpZ2h0KCk/YT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYS5sb24sZy5sYXQpOmYuYm90dG9tPHRoaXMucmVzdHJpY3RlZEV4dGVudC5ib3R0b20/YT1hLmFkZCgwLHRoaXMucmVzdHJpY3RlZEV4dGVudC5ib3R0b20tZi5ib3R0b20pOmYudG9wPnRoaXMucmVzdHJpY3RlZEV4dGVudC50b3AmJihhPWEuYWRkKDAsdGhpcy5yZXN0cmljdGVkRXh0ZW50LnRvcC1mLnRvcCkpfX1lPWV8fHRoaXMuaXNWYWxpZFpvb21MZXZlbChiKSYmYiE9dGhpcy5nZXRab29tKCk7Zj10aGlzLmlzVmFsaWRMb25MYXQoYSkmJiFhLmVxdWFscyh0aGlzLmNlbnRlcik7aWYoZXx8Znx8ZCl7ZHx8dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3Zlc3RhcnQiLHt6b29tQ2hhbmdlZDplfSk7ZiYmKCFlJiZ0aGlzLmNlbnRlciYmdGhpcy5jZW50ZXJMYXllckNvbnRhaW5lcihhKSwKdGhpcy5jZW50ZXI9YS5jbG9uZSgpKTthPWU/dGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShiKTp0aGlzLmdldFJlc29sdXRpb24oKTtpZihlfHxudWxsPT10aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luKXt0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7dGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lng9MDt0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueT0wO3RoaXMuYXBwbHlUcmFuc2Zvcm0oKTt2YXIgZj10aGlzLmdldE1heEV4dGVudCh7cmVzdHJpY3RlZDohMH0pLGg9Zi5nZXRDZW50ZXJMb25MYXQoKSxnPXRoaXMuY2VudGVyLmxvbi1oLmxvbixoPWgubGF0LXRoaXMuY2VudGVyLmxhdCxrPU1hdGgucm91bmQoZi5nZXRXaWR0aCgpL2EpLGw9TWF0aC5yb3VuZChmLmdldEhlaWdodCgpL2EpO3RoaXMubWluUHg9e3g6KHRoaXMuc2l6ZS53LWspLzItZy9hLHk6KHRoaXMuc2l6ZS5oLWwpLzItaC9hfTt0aGlzLm1heFB4PXt4OnRoaXMubWluUHgueCsKTWF0aC5yb3VuZChmLmdldFdpZHRoKCkvYSkseTp0aGlzLm1pblB4LnkrTWF0aC5yb3VuZChmLmdldEhlaWdodCgpL2EpfX1lJiYodGhpcy56b29tPWIsdGhpcy5yZXNvbHV0aW9uPWEpO2E9dGhpcy5nZXRFeHRlbnQoKTt0aGlzLmJhc2VMYXllci52aXNpYmlsaXR5JiYodGhpcy5iYXNlTGF5ZXIubW92ZVRvKGEsZSxjLmRyYWdnaW5nKSxjLmRyYWdnaW5nfHx0aGlzLmJhc2VMYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlZW5kIix7em9vbUNoYW5nZWQ6ZX0pKTthPXRoaXMuYmFzZUxheWVyLmdldEV4dGVudCgpO2ZvcihiPXRoaXMubGF5ZXJzLmxlbmd0aC0xOzA8PWI7LS1iKWY9dGhpcy5sYXllcnNbYl0sZj09PXRoaXMuYmFzZUxheWVyfHxmLmlzQmFzZUxheWVyfHwoZz1mLmNhbGN1bGF0ZUluUmFuZ2UoKSxmLmluUmFuZ2UhPWcmJigoZi5pblJhbmdlPWcpfHxmLmRpc3BsYXkoITEpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjpmLHByb3BlcnR5OiJ2aXNpYmlsaXR5In0pKSwKZyYmZi52aXNpYmlsaXR5JiYoZi5tb3ZlVG8oYSxlLGMuZHJhZ2dpbmcpLGMuZHJhZ2dpbmd8fGYuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIse3pvb21DaGFuZ2VkOmV9KSkpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZSIpO2R8fHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIpO2lmKGUpe2I9MDtmb3IoYz10aGlzLnBvcHVwcy5sZW5ndGg7YjxjO2IrKyl0aGlzLnBvcHVwc1tiXS51cGRhdGVQb3NpdGlvbigpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiem9vbWVuZCIpfX19LGNlbnRlckxheWVyQ29udGFpbmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQodGhpcy5sYXllckNvbnRhaW5lck9yaWdpbiksYz10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KGEpO2lmKG51bGwhPWImJm51bGwhPWMpe3ZhciBkPXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54O2E9dGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lnk7CnZhciBlPU1hdGgucm91bmQoYi54LWMueCksYj1NYXRoLnJvdW5kKGIueS1jLnkpO3RoaXMuYXBwbHlUcmFuc2Zvcm0odGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lng9ZSx0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueT1iKTtkLT1lO2EtPWI7dGhpcy5taW5QeC54LT1kO3RoaXMubWF4UHgueC09ZDt0aGlzLm1pblB4LnktPWE7dGhpcy5tYXhQeC55LT1hfX0saXNWYWxpZFpvb21MZXZlbDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmMDw9YSYmYTx0aGlzLmdldE51bVpvb21MZXZlbHMoKX0saXNWYWxpZExvbkxhdDpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT1hJiYoYj10aGlzLmdldE1heEV4dGVudCgpLGI9Yi5jb250YWluc0xvbkxhdChhLHt3b3JsZEJvdW5kczp0aGlzLmJhc2VMYXllci53cmFwRGF0ZUxpbmUmJmJ9KSk7cmV0dXJuIGJ9LGdldFByb2plY3Rpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFByb2plY3Rpb25PYmplY3QoKTtyZXR1cm4gYT9hLmdldENvZGUoKToKbnVsbH0sZ2V0UHJvamVjdGlvbk9iamVjdDpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuYmFzZUxheWVyLnByb2plY3Rpb24pO3JldHVybiBhfSxnZXRNYXhSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIubWF4UmVzb2x1dGlvbik7cmV0dXJuIGF9LGdldE1heEV4dGVudDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO2EmJmEucmVzdHJpY3RlZCYmdGhpcy5yZXN0cmljdGVkRXh0ZW50P2I9dGhpcy5yZXN0cmljdGVkRXh0ZW50Om51bGwhPXRoaXMuYmFzZUxheWVyJiYoYj10aGlzLmJhc2VMYXllci5tYXhFeHRlbnQpO3JldHVybiBifSxnZXROdW1ab29tTGV2ZWxzOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIubnVtWm9vbUxldmVscyk7cmV0dXJuIGF9LGdldEV4dGVudDpmdW5jdGlvbigpe3ZhciBhPQpudWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYT10aGlzLmJhc2VMYXllci5nZXRFeHRlbnQoKSk7cmV0dXJuIGF9LGdldFJlc29sdXRpb246ZnVuY3Rpb24oKXt2YXIgYT1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyP2E9dGhpcy5iYXNlTGF5ZXIuZ2V0UmVzb2x1dGlvbigpOiEwPT09dGhpcy5hbGxPdmVybGF5cyYmMDx0aGlzLmxheWVycy5sZW5ndGgmJihhPXRoaXMubGF5ZXJzWzBdLmdldFJlc29sdXRpb24oKSk7cmV0dXJuIGF9LGdldFVuaXRzOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIudW5pdHMpO3JldHVybiBhfSxnZXRTY2FsZTpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGE9T3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb24oYSx0aGlzLmJhc2VMYXllci51bml0cykpO3JldHVybiBhfSxnZXRab29tRm9yRXh0ZW50OmZ1bmN0aW9uKGEsCmIpe3ZhciBjPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihjPXRoaXMuYmFzZUxheWVyLmdldFpvb21Gb3JFeHRlbnQoYSxiKSk7cmV0dXJuIGN9LGdldFJlc29sdXRpb25Gb3Jab29tOmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7dGhpcy5iYXNlTGF5ZXImJihiPXRoaXMuYmFzZUxheWVyLmdldFJlc29sdXRpb25Gb3Jab29tKGEpKTtyZXR1cm4gYn0sZ2V0Wm9vbUZvclJlc29sdXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYz10aGlzLmJhc2VMYXllci5nZXRab29tRm9yUmVzb2x1dGlvbihhLGIpKTtyZXR1cm4gY30sem9vbVRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztpZihjLmlzVmFsaWRab29tTGV2ZWwoYSkpaWYoYy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lJiYoYT1jLmFkanVzdFpvb20oYSkpLGMuem9vbVR3ZWVuKXt2YXIgZD1jLmdldFJlc29sdXRpb24oKSxlPWMuZ2V0UmVzb2x1dGlvbkZvclpvb20oYSksZj17c2NhbGU6MX0sCmQ9e3NjYWxlOmQvZX07Yy56b29tVHdlZW4ucGxheWluZyYmYy56b29tVHdlZW4uZHVyYXRpb248MypjLnpvb21EdXJhdGlvbj9jLnpvb21Ud2Vlbi5maW5pc2g9e3NjYWxlOmMuem9vbVR3ZWVuLmZpbmlzaC5zY2FsZSpkLnNjYWxlfTooYnx8KGU9Yy5nZXRTaXplKCksYj17eDplLncvMix5OmUuaC8yfSksYy56b29tVHdlZW4uc3RhcnQoZixkLGMuem9vbUR1cmF0aW9uLHttaW5GcmFtZVJhdGU6NTAsY2FsbGJhY2tzOntlYWNoU3RlcDpmdW5jdGlvbihhKXt2YXIgZD1jLmxheWVyQ29udGFpbmVyT3JpZ2luUHg7YT1hLnNjYWxlO2MuYXBwbHlUcmFuc2Zvcm0oZC54KygoYS0xKSooZC54LWIueCl8MCksZC55KygoYS0xKSooZC55LWIueSl8MCksYSl9LGRvbmU6ZnVuY3Rpb24oYSl7Yy5hcHBseVRyYW5zZm9ybSgpO2E9Yy5nZXRSZXNvbHV0aW9uKCkvYS5zY2FsZTt2YXIgZD1jLmdldFpvb21Gb3JSZXNvbHV0aW9uKGEsITApO2MubW92ZVRvKGMuZ2V0Wm9vbVRhcmdldENlbnRlcihiLAphKSxkLCEwKX19fSkpfWVsc2UgZj1iP2MuZ2V0Wm9vbVRhcmdldENlbnRlcihiLGMuZ2V0UmVzb2x1dGlvbkZvclpvb20oYSkpOm51bGwsYy5zZXRDZW50ZXIoZixhKX0sem9vbUluOmZ1bmN0aW9uKCl7dGhpcy56b29tVG8odGhpcy5nZXRab29tKCkrMSl9LHpvb21PdXQ6ZnVuY3Rpb24oKXt0aGlzLnpvb21Ubyh0aGlzLmdldFpvb20oKS0xKX0sem9vbVRvRXh0ZW50OmZ1bmN0aW9uKGEsYil7YSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuQm91bmRzfHwoYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYSkpO3ZhciBjPWEuZ2V0Q2VudGVyTG9uTGF0KCk7aWYodGhpcy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXtjPXRoaXMuZ2V0TWF4RXh0ZW50KCk7Zm9yKGE9YS5jbG9uZSgpO2EucmlnaHQ8YS5sZWZ0OylhLnJpZ2h0Kz1jLmdldFdpZHRoKCk7Yz1hLmdldENlbnRlckxvbkxhdCgpLndyYXBEYXRlTGluZShjKX10aGlzLnNldENlbnRlcihjLHRoaXMuZ2V0Wm9vbUZvckV4dGVudChhLGIpKX0sCnpvb21Ub01heEV4dGVudDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0TWF4RXh0ZW50KHtyZXN0cmljdGVkOmE/YS5yZXN0cmljdGVkOiEwfSk7dGhpcy56b29tVG9FeHRlbnQoYSl9LHpvb21Ub1NjYWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUoYSx0aGlzLmJhc2VMYXllci51bml0cyksZD10aGlzLnNpemUudypjLzIsYz10aGlzLnNpemUuaCpjLzIsZT10aGlzLmdldENhY2hlZENlbnRlcigpLGQ9bmV3IE9wZW5MYXllcnMuQm91bmRzKGUubG9uLWQsZS5sYXQtYyxlLmxvbitkLGUubGF0K2MpO3RoaXMuem9vbVRvRXh0ZW50KGQsYil9LGdldExvbkxhdEZyb21WaWV3UG9ydFB4OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihiPXRoaXMuYmFzZUxheWVyLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpKTtyZXR1cm4gYn0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9Cm51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihiPXRoaXMuYmFzZUxheWVyLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KGEpKTtyZXR1cm4gYn0sZ2V0Wm9vbVRhcmdldENlbnRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGwsZD10aGlzLmdldFNpemUoKSxlPWQudy8yLWEueCxkPWEueS1kLmgvMixmPXRoaXMuZ2V0TG9uTGF0RnJvbVBpeGVsKGEpO2YmJihjPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChmLmxvbitlKmIsZi5sYXQrZCpiKSk7cmV0dXJuIGN9LGdldExvbkxhdEZyb21QaXhlbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKX0sZ2V0UGl4ZWxGcm9tTG9uTGF0OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChhKTthLng9TWF0aC5yb3VuZChhLngpO2EueT1NYXRoLnJvdW5kKGEueSk7cmV0dXJuIGF9LGdldEdlb2Rlc2ljUGl4ZWxTaXplOmZ1bmN0aW9uKGEpe3ZhciBiPWE/dGhpcy5nZXRMb25MYXRGcm9tUGl4ZWwoYSk6CnRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCl8fG5ldyBPcGVuTGF5ZXJzLkxvbkxhdCgwLDApLGM9dGhpcy5nZXRSZXNvbHV0aW9uKCk7YT1iLmFkZCgtYy8yLDApO3ZhciBkPWIuYWRkKGMvMiwwKSxlPWIuYWRkKDAsLWMvMiksYj1iLmFkZCgwLGMvMiksYz1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjQzMjYiKSxmPXRoaXMuZ2V0UHJvamVjdGlvbk9iamVjdCgpfHxjO2YuZXF1YWxzKGMpfHwoYS50cmFuc2Zvcm0oZixjKSxkLnRyYW5zZm9ybShmLGMpLGUudHJhbnNmb3JtKGYsYyksYi50cmFuc2Zvcm0oZixjKSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUoT3BlbkxheWVycy5VdGlsLmRpc3RWaW5jZW50eShhLGQpLE9wZW5MYXllcnMuVXRpbC5kaXN0VmluY2VudHkoZSxiKSl9LGdldFZpZXdQb3J0UHhGcm9tTGF5ZXJQeDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPWEuYWRkKHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54LHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC55KSk7CnJldHVybiBifSxnZXRMYXllclB4RnJvbVZpZXdQb3J0UHg6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj1hLmFkZCgtdGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4LngsLXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC55KSxpc05hTihiLngpfHxpc05hTihiLnkpKSYmKGI9bnVsbCk7cmV0dXJuIGJ9LGdldExvbkxhdEZyb21MYXllclB4OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRWaWV3UG9ydFB4RnJvbUxheWVyUHgoYSk7cmV0dXJuIHRoaXMuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSl9LGdldExheWVyUHhGcm9tTG9uTGF0OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRQaXhlbEZyb21Mb25MYXQoYSk7cmV0dXJuIHRoaXMuZ2V0TGF5ZXJQeEZyb21WaWV3UG9ydFB4KGEpfSxhcHBseVRyYW5zZm9ybTpmdW5jdGlvbihhLGIsYyl7Yz1jfHwxO3ZhciBkPXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeCxlPTEhPT1jO2E9YXx8ZC54O2I9Ynx8ZC55O3ZhciBmPXRoaXMubGF5ZXJDb250YWluZXJEaXYuc3R5bGUsCmc9dGhpcy5hcHBseVRyYW5zZm9ybS50cmFuc2Zvcm0saD10aGlzLmFwcGx5VHJhbnNmb3JtLnRlbXBsYXRlO2lmKHZvaWQgMD09PWcmJihnPU9wZW5MYXllcnMuVXRpbC52ZW5kb3JQcmVmaXguc3R5bGUoInRyYW5zZm9ybSIpLHRoaXMuYXBwbHlUcmFuc2Zvcm0udHJhbnNmb3JtPWcpKXt2YXIgaz1PcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy52aWV3UG9ydERpdixPcGVuTGF5ZXJzLlV0aWwudmVuZG9yUHJlZml4LmNzcygidHJhbnNmb3JtIikpO2smJiJub25lIj09PWt8fChoPVsidHJhbnNsYXRlM2QoIiwiLDApICIsInNjYWxlM2QoIiwiLDEpIl0sZltnXT1baFswXSwiMCwwIixoWzFdXS5qb2luKCIiKSk7aCYmfmZbZ10uaW5kZXhPZihoWzBdKXx8KGg9WyJ0cmFuc2xhdGUoIiwiKSAiLCJzY2FsZSgiLCIpIl0pO3RoaXMuYXBwbHlUcmFuc2Zvcm0udGVtcGxhdGU9aH1udWxsPT09Z3x8InRyYW5zbGF0ZTNkKCIhPT1oWzBdJiYhMCE9PWU/KGYubGVmdD1hKyJweCIsZi50b3A9CmIrInB4IixudWxsIT09ZyYmKGZbZ109IiIpKTooITA9PT1lJiYidHJhbnNsYXRlKCI9PT1oWzBdJiYoYS09ZC54LGItPWQueSxmLmxlZnQ9ZC54KyJweCIsZi50b3A9ZC55KyJweCIpLGZbZ109W2hbMF0sYSwicHgsIixiLCJweCIsaFsxXSxoWzJdLGMsIiwiLGMsaFszXV0uam9pbigiIikpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLk1hcCJ9KTtPcGVuTGF5ZXJzLk1hcC5USUxFX1dJRFRIPTI1NjtPcGVuTGF5ZXJzLk1hcC5USUxFX0hFSUdIVD0yNTY7T3BlbkxheWVycy5MYXllcj1PcGVuTGF5ZXJzLkNsYXNzKHtpZDpudWxsLG5hbWU6bnVsbCxkaXY6bnVsbCxvcGFjaXR5OjEsYWx3YXlzSW5SYW5nZTpudWxsLFJFU09MVVRJT05fUFJPUEVSVElFUzoic2NhbGVzIHJlc29sdXRpb25zIG1heFNjYWxlIG1pblNjYWxlIG1heFJlc29sdXRpb24gbWluUmVzb2x1dGlvbiBudW1ab29tTGV2ZWxzIG1heFpvb21MZXZlbCIuc3BsaXQoIiAiKSxldmVudHM6bnVsbCxtYXA6bnVsbCxpc0Jhc2VMYXllcjohMSxhbHBoYTohMSxkaXNwbGF5SW5MYXllclN3aXRjaGVyOiEwLHZpc2liaWxpdHk6ITAsYXR0cmlidXRpb246bnVsbCxpblJhbmdlOiExLGltYWdlU2l6ZTpudWxsLG9wdGlvbnM6bnVsbCxldmVudExpc3RlbmVyczpudWxsLGd1dHRlcjowLHByb2plY3Rpb246bnVsbCx1bml0czpudWxsLHNjYWxlczpudWxsLHJlc29sdXRpb25zOm51bGwsbWF4RXh0ZW50Om51bGwsbWluRXh0ZW50Om51bGwsbWF4UmVzb2x1dGlvbjpudWxsLG1pblJlc29sdXRpb246bnVsbCwKbnVtWm9vbUxldmVsczpudWxsLG1pblNjYWxlOm51bGwsbWF4U2NhbGU6bnVsbCxkaXNwbGF5T3V0c2lkZU1heEV4dGVudDohMSx3cmFwRGF0ZUxpbmU6ITEsbWV0YWRhdGE6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7dGhpcy5tZXRhZGF0YT17fTtiPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYik7bnVsbCE9dGhpcy5hbHdheXNJblJhbmdlJiYoYi5hbHdheXNJblJhbmdlPXRoaXMuYWx3YXlzSW5SYW5nZSk7dGhpcy5hZGRPcHRpb25zKGIpO3RoaXMubmFtZT1hO2lmKG51bGw9PXRoaXMuaWQmJih0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKSx0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuaWQpLHRoaXMuZGl2LnN0eWxlLndpZHRoPSIxMDAlIix0aGlzLmRpdi5zdHlsZS5oZWlnaHQ9IjEwMCUiLHRoaXMuZGl2LmRpcj0ibHRyIix0aGlzLmV2ZW50cz1uZXcgT3BlbkxheWVycy5FdmVudHModGhpcywKdGhpcy5kaXYpLHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpKXRoaXMuZXZlbnRzLm9uKHRoaXMuZXZlbnRMaXN0ZW5lcnMpfSxkZXN0cm95OmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPSEwKTtudWxsIT10aGlzLm1hcCYmdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcyxhKTt0aGlzLm9wdGlvbnM9dGhpcy5kaXY9dGhpcy5uYW1lPXRoaXMubWFwPXRoaXMucHJvamVjdGlvbj1udWxsO3RoaXMuZXZlbnRzJiYodGhpcy5ldmVudExpc3RlbmVycyYmdGhpcy5ldmVudHMudW4odGhpcy5ldmVudExpc3RlbmVycyksdGhpcy5ldmVudHMuZGVzdHJveSgpKTt0aGlzLmV2ZW50cz10aGlzLmV2ZW50TGlzdGVuZXJzPW51bGx9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyKHRoaXMubmFtZSx0aGlzLmdldE9wdGlvbnMoKSkpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsdGhpcyk7YS5tYXA9bnVsbDtyZXR1cm4gYX0sCmdldE9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgYT17fSxiO2ZvcihiIGluIHRoaXMub3B0aW9ucylhW2JdPXRoaXNbYl07cmV0dXJuIGF9LHNldE5hbWU6ZnVuY3Rpb24oYSl7YSE9dGhpcy5uYW1lJiYodGhpcy5uYW1lPWEsbnVsbCE9dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWxheWVyIix7bGF5ZXI6dGhpcyxwcm9wZXJ0eToibmFtZSJ9KSl9LGFkZE9wdGlvbnM6ZnVuY3Rpb24oYSxiKXtudWxsPT10aGlzLm9wdGlvbnMmJih0aGlzLm9wdGlvbnM9e30pO2EmJigic3RyaW5nIj09dHlwZW9mIGEucHJvamVjdGlvbiYmKGEucHJvamVjdGlvbj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKGEucHJvamVjdGlvbikpLGEucHJvamVjdGlvbiYmT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSxPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHNbYS5wcm9qZWN0aW9uLmdldENvZGUoKV0pLCFhLm1heEV4dGVudHx8YS5tYXhFeHRlbnQgaW5zdGFuY2VvZgpPcGVuTGF5ZXJzLkJvdW5kc3x8KGEubWF4RXh0ZW50PW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLm1heEV4dGVudCkpLCFhLm1pbkV4dGVudHx8YS5taW5FeHRlbnQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kc3x8KGEubWluRXh0ZW50PW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLm1pbkV4dGVudCkpKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMub3B0aW9ucyxhKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5wcm9qZWN0aW9uJiZ0aGlzLnByb2plY3Rpb24uZ2V0VW5pdHMoKSYmKHRoaXMudW5pdHM9dGhpcy5wcm9qZWN0aW9uLmdldFVuaXRzKCkpO2lmKHRoaXMubWFwKXt2YXIgYz10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCksZD10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFUy5jb25jYXQoWyJwcm9qZWN0aW9uIiwidW5pdHMiLCJtaW5FeHRlbnQiLCJtYXhFeHRlbnQiXSksZTtmb3IoZSBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoZSkmJjA8PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGQsCmUpKXt0aGlzLmluaXRSZXNvbHV0aW9ucygpO2ImJnRoaXMubWFwLmJhc2VMYXllcj09PXRoaXMmJih0aGlzLm1hcC5zZXRDZW50ZXIodGhpcy5tYXAuZ2V0Q2VudGVyKCksdGhpcy5tYXAuZ2V0Wm9vbUZvclJlc29sdXRpb24oYyksITEsITApLHRoaXMubWFwLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWJhc2VsYXllciIse2xheWVyOnRoaXN9KSk7YnJlYWt9fX0sb25NYXBSZXNpemU6ZnVuY3Rpb24oKXt9LHJlZHJhdzpmdW5jdGlvbigpe3ZhciBhPSExO2lmKHRoaXMubWFwKXt0aGlzLmluUmFuZ2U9dGhpcy5jYWxjdWxhdGVJblJhbmdlKCk7dmFyIGI9dGhpcy5nZXRFeHRlbnQoKTtiJiYodGhpcy5pblJhbmdlJiZ0aGlzLnZpc2liaWxpdHkpJiYodGhpcy5tb3ZlVG8oYiwhMCwhMSksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlZW5kIix7em9vbUNoYW5nZWQ6ITB9KSxhPSEwKX1yZXR1cm4gYX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXthPXRoaXMudmlzaWJpbGl0eTsKdGhpcy5pc0Jhc2VMYXllcnx8KGE9YSYmdGhpcy5pblJhbmdlKTt0aGlzLmRpc3BsYXkoYSl9LG1vdmVCeVB4OmZ1bmN0aW9uKGEsYil7fSxzZXRNYXA6ZnVuY3Rpb24oYSl7bnVsbD09dGhpcy5tYXAmJih0aGlzLm1hcD1hLHRoaXMubWF4RXh0ZW50PXRoaXMubWF4RXh0ZW50fHx0aGlzLm1hcC5tYXhFeHRlbnQsdGhpcy5taW5FeHRlbnQ9dGhpcy5taW5FeHRlbnR8fHRoaXMubWFwLm1pbkV4dGVudCx0aGlzLnByb2plY3Rpb249dGhpcy5wcm9qZWN0aW9ufHx0aGlzLm1hcC5wcm9qZWN0aW9uLCJzdHJpbmciPT10eXBlb2YgdGhpcy5wcm9qZWN0aW9uJiYodGhpcy5wcm9qZWN0aW9uPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24odGhpcy5wcm9qZWN0aW9uKSksdGhpcy51bml0cz10aGlzLnByb2plY3Rpb24uZ2V0VW5pdHMoKXx8dGhpcy51bml0c3x8dGhpcy5tYXAudW5pdHMsdGhpcy5pbml0UmVzb2x1dGlvbnMoKSx0aGlzLmlzQmFzZUxheWVyfHwodGhpcy5pblJhbmdlPXRoaXMuY2FsY3VsYXRlSW5SYW5nZSgpLAp0aGlzLmRpdi5zdHlsZS5kaXNwbGF5PXRoaXMudmlzaWJpbGl0eSYmdGhpcy5pblJhbmdlPyIiOiJub25lIiksdGhpcy5zZXRUaWxlU2l6ZSgpKX0sYWZ0ZXJBZGQ6ZnVuY3Rpb24oKXt9LHJlbW92ZU1hcDpmdW5jdGlvbihhKXt9LGdldEltYWdlU2l6ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbWFnZVNpemV8fHRoaXMudGlsZVNpemV9LHNldFRpbGVTaXplOmZ1bmN0aW9uKGEpe3RoaXMudGlsZVNpemU9YT1hP2E6dGhpcy50aWxlU2l6ZT90aGlzLnRpbGVTaXplOnRoaXMubWFwLmdldFRpbGVTaXplKCk7dGhpcy5ndXR0ZXImJih0aGlzLmltYWdlU2l6ZT1uZXcgT3BlbkxheWVycy5TaXplKGEudysyKnRoaXMuZ3V0dGVyLGEuaCsyKnRoaXMuZ3V0dGVyKSl9LGdldFZpc2liaWxpdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aXNpYmlsaXR5fSxzZXRWaXNpYmlsaXR5OmZ1bmN0aW9uKGEpe2EhPXRoaXMudmlzaWJpbGl0eSYmKHRoaXMudmlzaWJpbGl0eT1hLHRoaXMuZGlzcGxheShhKSwKdGhpcy5yZWRyYXcoKSxudWxsIT10aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjp0aGlzLHByb3BlcnR5OiJ2aXNpYmlsaXR5In0pLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidmlzaWJpbGl0eWNoYW5nZWQiKSl9LGRpc3BsYXk6ZnVuY3Rpb24oYSl7YSE9KCJub25lIiE9dGhpcy5kaXYuc3R5bGUuZGlzcGxheSkmJih0aGlzLmRpdi5zdHlsZS5kaXNwbGF5PWEmJnRoaXMuY2FsY3VsYXRlSW5SYW5nZSgpPyJibG9jayI6Im5vbmUiKX0sY2FsY3VsYXRlSW5SYW5nZTpmdW5jdGlvbigpe3ZhciBhPSExO3RoaXMuYWx3YXlzSW5SYW5nZT9hPSEwOnRoaXMubWFwJiYoYT10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCksYT1hPj10aGlzLm1pblJlc29sdXRpb24mJmE8PXRoaXMubWF4UmVzb2x1dGlvbik7cmV0dXJuIGF9LHNldElzQmFzZUxheWVyOmZ1bmN0aW9uKGEpe2EhPXRoaXMuaXNCYXNlTGF5ZXImJih0aGlzLmlzQmFzZUxheWVyPQphLG51bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2ViYXNlbGF5ZXIiLHtsYXllcjp0aGlzfSkpfSxpbml0UmVzb2x1dGlvbnM6ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZD17fSxlPSEwO2E9MDtmb3IoYj10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFUy5sZW5ndGg7YTxiO2ErKyljPXRoaXMuUkVTT0xVVElPTl9QUk9QRVJUSUVTW2FdLGRbY109dGhpcy5vcHRpb25zW2NdLGUmJnRoaXMub3B0aW9uc1tjXSYmKGU9ITEpO251bGw9PXRoaXMub3B0aW9ucy5hbHdheXNJblJhbmdlJiYodGhpcy5hbHdheXNJblJhbmdlPWUpO251bGw9PWQucmVzb2x1dGlvbnMmJihkLnJlc29sdXRpb25zPXRoaXMucmVzb2x1dGlvbnNGcm9tU2NhbGVzKGQuc2NhbGVzKSk7bnVsbD09ZC5yZXNvbHV0aW9ucyYmKGQucmVzb2x1dGlvbnM9dGhpcy5jYWxjdWxhdGVSZXNvbHV0aW9ucyhkKSk7aWYobnVsbD09ZC5yZXNvbHV0aW9ucyl7YT0wO2ZvcihiPXRoaXMuUkVTT0xVVElPTl9QUk9QRVJUSUVTLmxlbmd0aDthPApiO2ErKyljPXRoaXMuUkVTT0xVVElPTl9QUk9QRVJUSUVTW2FdLGRbY109bnVsbCE9dGhpcy5vcHRpb25zW2NdP3RoaXMub3B0aW9uc1tjXTp0aGlzLm1hcFtjXTtudWxsPT1kLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucz10aGlzLnJlc29sdXRpb25zRnJvbVNjYWxlcyhkLnNjYWxlcykpO251bGw9PWQucmVzb2x1dGlvbnMmJihkLnJlc29sdXRpb25zPXRoaXMuY2FsY3VsYXRlUmVzb2x1dGlvbnMoZCkpfXZhciBmO3RoaXMub3B0aW9ucy5tYXhSZXNvbHV0aW9uJiYiYXV0byIhPT10aGlzLm9wdGlvbnMubWF4UmVzb2x1dGlvbiYmKGY9dGhpcy5vcHRpb25zLm1heFJlc29sdXRpb24pO3RoaXMub3B0aW9ucy5taW5TY2FsZSYmKGY9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUodGhpcy5vcHRpb25zLm1pblNjYWxlLHRoaXMudW5pdHMpKTt2YXIgZzt0aGlzLm9wdGlvbnMubWluUmVzb2x1dGlvbiYmImF1dG8iIT09dGhpcy5vcHRpb25zLm1pblJlc29sdXRpb24mJgooZz10aGlzLm9wdGlvbnMubWluUmVzb2x1dGlvbik7dGhpcy5vcHRpb25zLm1heFNjYWxlJiYoZz1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZSh0aGlzLm9wdGlvbnMubWF4U2NhbGUsdGhpcy51bml0cykpO2QucmVzb2x1dGlvbnMmJihkLnJlc29sdXRpb25zLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi1hfSksZnx8KGY9ZC5yZXNvbHV0aW9uc1swXSksZ3x8KGc9ZC5yZXNvbHV0aW9uc1tkLnJlc29sdXRpb25zLmxlbmd0aC0xXSkpO2lmKHRoaXMucmVzb2x1dGlvbnM9ZC5yZXNvbHV0aW9ucyl7Yj10aGlzLnJlc29sdXRpb25zLmxlbmd0aDt0aGlzLnNjYWxlcz1BcnJheShiKTtmb3IoYT0wO2E8YjthKyspdGhpcy5zY2FsZXNbYV09T3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb24odGhpcy5yZXNvbHV0aW9uc1thXSx0aGlzLnVuaXRzKTt0aGlzLm51bVpvb21MZXZlbHM9Yn1pZih0aGlzLm1pblJlc29sdXRpb249Zyl0aGlzLm1heFNjYWxlPQpPcGVuTGF5ZXJzLlV0aWwuZ2V0U2NhbGVGcm9tUmVzb2x1dGlvbihnLHRoaXMudW5pdHMpO2lmKHRoaXMubWF4UmVzb2x1dGlvbj1mKXRoaXMubWluU2NhbGU9T3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb24oZix0aGlzLnVuaXRzKX0scmVzb2x1dGlvbnNGcm9tU2NhbGVzOmZ1bmN0aW9uKGEpe2lmKG51bGwhPWEpe3ZhciBiLGMsZDtkPWEubGVuZ3RoO2I9QXJyYXkoZCk7Zm9yKGM9MDtjPGQ7YysrKWJbY109T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUoYVtjXSx0aGlzLnVuaXRzKTtyZXR1cm4gYn19LGNhbGN1bGF0ZVJlc29sdXRpb25zOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD1hLm1heFJlc29sdXRpb247bnVsbCE9YS5taW5TY2FsZT9kPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKGEubWluU2NhbGUsdGhpcy51bml0cyk6ImF1dG8iPT1kJiZudWxsIT10aGlzLm1heEV4dGVudCYmKGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLApjPXRoaXMubWF4RXh0ZW50LmdldFdpZHRoKCkvYi53LGI9dGhpcy5tYXhFeHRlbnQuZ2V0SGVpZ2h0KCkvYi5oLGQ9TWF0aC5tYXgoYyxiKSk7Yz1hLm1pblJlc29sdXRpb247bnVsbCE9YS5tYXhTY2FsZT9jPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKGEubWF4U2NhbGUsdGhpcy51bml0cyk6ImF1dG8iPT1hLm1pblJlc29sdXRpb24mJm51bGwhPXRoaXMubWluRXh0ZW50JiYoYj10aGlzLm1hcC5nZXRTaXplKCksYz10aGlzLm1pbkV4dGVudC5nZXRXaWR0aCgpL2IudyxiPXRoaXMubWluRXh0ZW50LmdldEhlaWdodCgpL2IuaCxjPU1hdGgubWF4KGMsYikpOyJudW1iZXIiIT09dHlwZW9mIGQmJigibnVtYmVyIiE9PXR5cGVvZiBjJiZudWxsIT10aGlzLm1heEV4dGVudCkmJihkPXRoaXMubWFwLmdldFRpbGVTaXplKCksZD1NYXRoLm1heCh0aGlzLm1heEV4dGVudC5nZXRXaWR0aCgpL2Qudyx0aGlzLm1heEV4dGVudC5nZXRIZWlnaHQoKS9kLmgpKTtiPWEubWF4Wm9vbUxldmVsOwphPWEubnVtWm9vbUxldmVsczsibnVtYmVyIj09PXR5cGVvZiBjJiYibnVtYmVyIj09PXR5cGVvZiBkJiZ2b2lkIDA9PT1hP2E9TWF0aC5mbG9vcihNYXRoLmxvZyhkL2MpL01hdGgubG9nKDIpKSsxOnZvaWQgMD09PWEmJm51bGwhPWImJihhPWIrMSk7aWYoISgibnVtYmVyIiE9PXR5cGVvZiBhfHwwPj1hfHwibnVtYmVyIiE9PXR5cGVvZiBkJiYibnVtYmVyIiE9PXR5cGVvZiBjKSl7Yj1BcnJheShhKTt2YXIgZT0yOyJudW1iZXIiPT10eXBlb2YgYyYmIm51bWJlciI9PXR5cGVvZiBkJiYoZT1NYXRoLnBvdyhkL2MsMS8oYS0xKSkpO3ZhciBmO2lmKCJudW1iZXIiPT09dHlwZW9mIGQpZm9yKGY9MDtmPGE7ZisrKWJbZl09ZC9NYXRoLnBvdyhlLGYpO2Vsc2UgZm9yKGY9MDtmPGE7ZisrKWJbYS0xLWZdPWMqTWF0aC5wb3coZSxmKTtyZXR1cm4gYn19LGdldFJlc29sdXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcC5nZXRab29tKCk7cmV0dXJuIHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20oYSl9LApnZXRFeHRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAuY2FsY3VsYXRlQm91bmRzKCl9LGdldFpvb21Gb3JFeHRlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1hcC5nZXRTaXplKCksYz1NYXRoLm1heChhLmdldFdpZHRoKCkvYy53LGEuZ2V0SGVpZ2h0KCkvYy5oKTtyZXR1cm4gdGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbihjLGIpfSxnZXREYXRhRXh0ZW50OmZ1bmN0aW9uKCl7fSxnZXRSZXNvbHV0aW9uRm9yWm9vbTpmdW5jdGlvbihhKXthPU1hdGgubWF4KDAsTWF0aC5taW4oYSx0aGlzLnJlc29sdXRpb25zLmxlbmd0aC0xKSk7aWYodGhpcy5tYXAuZnJhY3Rpb25hbFpvb20pe3ZhciBiPU1hdGguZmxvb3IoYSksYz1NYXRoLmNlaWwoYSk7YT10aGlzLnJlc29sdXRpb25zW2JdLShhLWIpKih0aGlzLnJlc29sdXRpb25zW2JdLXRoaXMucmVzb2x1dGlvbnNbY10pfWVsc2UgYT10aGlzLnJlc29sdXRpb25zW01hdGgucm91bmQoYSldO3JldHVybiBhfSxnZXRab29tRm9yUmVzb2x1dGlvbjpmdW5jdGlvbihhLApiKXt2YXIgYyxkO2lmKHRoaXMubWFwLmZyYWN0aW9uYWxab29tKXt2YXIgZT0wLGY9dGhpcy5yZXNvbHV0aW9uc1tlXSxnPXRoaXMucmVzb2x1dGlvbnNbdGhpcy5yZXNvbHV0aW9ucy5sZW5ndGgtMV0saDtjPTA7Zm9yKGQ9dGhpcy5yZXNvbHV0aW9ucy5sZW5ndGg7YzxkOysrYylpZihoPXRoaXMucmVzb2x1dGlvbnNbY10saD49YSYmKGY9aCxlPWMpLGg8PWEpe2c9aDticmVha31jPWYtZztjPTA8Yz9lKyhmLWEpL2M6ZX1lbHNle2Y9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO2M9MDtmb3IoZD10aGlzLnJlc29sdXRpb25zLmxlbmd0aDtjPGQ7YysrKWlmKGIpe2U9TWF0aC5hYnModGhpcy5yZXNvbHV0aW9uc1tjXS1hKTtpZihlPmYpYnJlYWs7Zj1lfWVsc2UgaWYodGhpcy5yZXNvbHV0aW9uc1tjXTxhKWJyZWFrO2M9TWF0aC5tYXgoMCxjLTEpfXJldHVybiBjfSxnZXRMb25MYXRGcm9tVmlld1BvcnRQeDpmdW5jdGlvbihhKXt2YXIgYj1udWxsLGM9dGhpcy5tYXA7aWYobnVsbCE9CmEmJmMubWluUHgpe3ZhciBiPWMuZ2V0UmVzb2x1dGlvbigpLGQ9Yy5nZXRNYXhFeHRlbnQoe3Jlc3RyaWN0ZWQ6ITB9KSxiPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdCgoYS54LWMubWluUHgueCkqYitkLmxlZnQsKGMubWluUHgueS1hLnkpKmIrZC50b3ApO3RoaXMud3JhcERhdGVMaW5lJiYoYj1iLndyYXBEYXRlTGluZSh0aGlzLm1heEV4dGVudCkpfXJldHVybiBifSxnZXRWaWV3UG9ydFB4RnJvbUxvbkxhdDpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7bnVsbCE9YSYmKGI9Ynx8dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGM9dGhpcy5tYXAuY2FsY3VsYXRlQm91bmRzKG51bGwsYiksYz1uZXcgT3BlbkxheWVycy5QaXhlbCgxL2IqKGEubG9uLWMubGVmdCksMS9iKihjLnRvcC1hLmxhdCkpKTtyZXR1cm4gY30sc2V0T3BhY2l0eTpmdW5jdGlvbihhKXtpZihhIT10aGlzLm9wYWNpdHkpe3RoaXMub3BhY2l0eT1hO2Zvcih2YXIgYj10aGlzLmRpdi5jaGlsZE5vZGVzLGM9MCxkPWIubGVuZ3RoO2M8CmQ7KytjKXt2YXIgZT1iW2NdLmZpcnN0Q2hpbGR8fGJbY10sZj1iW2NdLmxhc3RDaGlsZDtmJiYiaWZyYW1lIj09PWYubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmKGU9Zi5wYXJlbnROb2RlKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5RE9NRWxlbWVudChlLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLGEpfW51bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6Im9wYWNpdHkifSl9fSxnZXRaSW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXYuc3R5bGUuekluZGV4fSxzZXRaSW5kZXg6ZnVuY3Rpb24oYSl7dGhpcy5kaXYuc3R5bGUuekluZGV4PWF9LGFkanVzdEJvdW5kczpmdW5jdGlvbihhKXtpZih0aGlzLmd1dHRlcil7dmFyIGI9dGhpcy5ndXR0ZXIqdGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO2E9bmV3IE9wZW5MYXllcnMuQm91bmRzKGEubGVmdC1iLGEuYm90dG9tLWIsYS5yaWdodCsKYixhLnRvcCtiKX10aGlzLndyYXBEYXRlTGluZSYmKGI9e3JpZ2h0VG9sZXJhbmNlOnRoaXMuZ2V0UmVzb2x1dGlvbigpLGxlZnRUb2xlcmFuY2U6dGhpcy5nZXRSZXNvbHV0aW9uKCl9LGE9YS53cmFwRGF0ZUxpbmUodGhpcy5tYXhFeHRlbnQsYikpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyIn0pO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3Q9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLHtVUkxfSEFTSF9GQUNUT1I6KE1hdGguc3FydCg1KS0xKS8yLHVybDpudWxsLHBhcmFtczpudWxsLHJlcHJvamVjdDohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxkXSk7dGhpcy51cmw9Yjt0aGlzLnBhcmFtc3x8KHRoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYykpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXM9dGhpcy51cmw9bnVsbDtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7CnJldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sc2V0VXJsOmZ1bmN0aW9uKGEpe3RoaXMudXJsPWF9LG1lcmdlTmV3UGFyYW1zOmZ1bmN0aW9uKGEpe3RoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5wYXJhbXMsYSk7YT10aGlzLnJlZHJhdygpO251bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6InBhcmFtcyJ9KTtyZXR1cm4gYX0scmVkcmF3OmZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMubWVyZ2VOZXdQYXJhbXMoe19vbFNhbHQ6TWF0aC5yYW5kb20oKX0pOk9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLnJlZHJhdy5hcHBseSh0aGlzLFtdKX0sc2VsZWN0VXJsOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTEsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyljKj1hLmNoYXJDb2RlQXQoZCkqdGhpcy5VUkxfSEFTSF9GQUNUT1IsCmMtPU1hdGguZmxvb3IoYyk7cmV0dXJuIGJbTWF0aC5mbG9vcihjKmIubGVuZ3RoKV19LGdldEZ1bGxSZXF1ZXN0U3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy51cmwsZD1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMucGFyYW1zKSxkPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoZCxhKSxlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYykmJihjPXRoaXMuc2VsZWN0VXJsKGUsYykpO3ZhciBlPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoYykpLGY7Zm9yKGYgaW4gZClmLnRvVXBwZXJDYXNlKClpbiBlJiZkZWxldGUgZFtmXTtlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC51cmxBcHBlbmQoYyxlKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdCJ9KTtPcGVuTGF5ZXJzLlRpbGU9T3BlbkxheWVycy5DbGFzcyh7ZXZlbnRzOm51bGwsZXZlbnRMaXN0ZW5lcnM6bnVsbCxpZDpudWxsLGxheWVyOm51bGwsdXJsOm51bGwsYm91bmRzOm51bGwsc2l6ZTpudWxsLHBvc2l0aW9uOm51bGwsaXNMb2FkaW5nOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMubGF5ZXI9YTt0aGlzLnBvc2l0aW9uPWIuY2xvbmUoKTt0aGlzLnNldEJvdW5kcyhjKTt0aGlzLnVybD1kO2UmJih0aGlzLnNpemU9ZS5jbG9uZSgpKTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiVGlsZV8iKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsZik7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpdGhpcy5ldmVudHMub24odGhpcy5ldmVudExpc3RlbmVycyl9LHVubG9hZDpmdW5jdGlvbigpe3RoaXMuaXNMb2FkaW5nJiYodGhpcy5pc0xvYWRpbmc9CiExLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidW5sb2FkIikpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wb3NpdGlvbj10aGlzLnNpemU9dGhpcy5ib3VuZHM9dGhpcy5sYXllcj1udWxsO3RoaXMuZXZlbnRMaXN0ZW5lcnMmJnRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpO3RoaXMuZXZlbnRzLmRlc3Ryb3koKTt0aGlzLmV2ZW50cz10aGlzLmV2ZW50TGlzdGVuZXJzPW51bGx9LGRyYXc6ZnVuY3Rpb24oYSl7YXx8dGhpcy5jbGVhcigpO3ZhciBiPXRoaXMuc2hvdWxkRHJhdygpO2ImJighYSYmITE9PT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWRyYXciKSkmJihiPW51bGwpO3JldHVybiBifSxzaG91bGREcmF3OmZ1bmN0aW9uKCl7dmFyIGE9ITEsYj10aGlzLmxheWVyLm1heEV4dGVudDtpZihiKXt2YXIgYz10aGlzLmxheWVyLm1hcCxjPWMuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmYy5nZXRNYXhFeHRlbnQoKTt0aGlzLmJvdW5kcy5pbnRlcnNlY3RzQm91bmRzKGIsCntpbmNsdXNpdmU6ITEsd29ybGRCb3VuZHM6Y30pJiYoYT0hMCl9cmV0dXJuIGF8fHRoaXMubGF5ZXIuZGlzcGxheU91dHNpZGVNYXhFeHRlbnR9LHNldEJvdW5kczpmdW5jdGlvbihhKXthPWEuY2xvbmUoKTtpZih0aGlzLmxheWVyLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgYj10aGlzLmxheWVyLm1hcC5nZXRNYXhFeHRlbnQoKSxjPXRoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKTthPWEud3JhcERhdGVMaW5lKGIse2xlZnRUb2xlcmFuY2U6YyxyaWdodFRvbGVyYW5jZTpjfSl9dGhpcy5ib3VuZHM9YX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1jJiYoYz0hMCk7dGhpcy5zZXRCb3VuZHMoYSk7dGhpcy5wb3NpdGlvbj1iLmNsb25lKCk7YyYmdGhpcy5kcmF3KCl9LGNsZWFyOmZ1bmN0aW9uKGEpe30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5UaWxlIn0pO09wZW5MYXllcnMuVGlsZS5JbWFnZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuVGlsZSx7dXJsOm51bGwsaW1nRGl2Om51bGwsZnJhbWU6bnVsbCxpbWFnZVJlbG9hZEF0dGVtcHRzOm51bGwsbGF5ZXJBbHBoYUhhY2s6bnVsbCxhc3luY1JlcXVlc3RJZDpudWxsLG1heEdldFVybExlbmd0aDpudWxsLGNhbnZhc0NvbnRleHQ6bnVsbCxjcm9zc09yaWdpbktleXdvcmQ6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudXJsPWQ7dGhpcy5sYXllckFscGhhSGFjaz10aGlzLmxheWVyLmFscGhhJiZPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrKCk7aWYobnVsbCE9dGhpcy5tYXhHZXRVcmxMZW5ndGh8fHRoaXMubGF5ZXIuZ3V0dGVyfHx0aGlzLmxheWVyQWxwaGFIYWNrKXRoaXMuZnJhbWU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5mcmFtZS5zdHlsZS5wb3NpdGlvbj0KImFic29sdXRlIix0aGlzLmZyYW1lLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO251bGwhPXRoaXMubWF4R2V0VXJsTGVuZ3RoJiZPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsT3BlbkxheWVycy5UaWxlLkltYWdlLklGcmFtZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmltZ0RpdiYmKHRoaXMuY2xlYXIoKSx0aGlzLmZyYW1lPXRoaXMuaW1nRGl2PW51bGwpO3RoaXMuYXN5bmNSZXF1ZXN0SWQ9bnVsbDtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkcmF3OmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5UaWxlLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPyh0aGlzLmxheWVyIT10aGlzLmxheWVyLm1hcC5iYXNlTGF5ZXImJnRoaXMubGF5ZXIucmVwcm9qZWN0JiYodGhpcy5ib3VuZHM9dGhpcy5nZXRCb3VuZHNGcm9tQmFzZUxheWVyKHRoaXMucG9zaXRpb24pKSx0aGlzLmlzTG9hZGluZz90aGlzLl9sb2FkRXZlbnQ9CiJyZWxvYWQiOih0aGlzLmlzTG9hZGluZz0hMCx0aGlzLl9sb2FkRXZlbnQ9ImxvYWRzdGFydCIpLHRoaXMucmVuZGVyVGlsZSgpLHRoaXMucG9zaXRpb25UaWxlKCkpOiExPT09YSYmdGhpcy51bmxvYWQoKTtyZXR1cm4gYX0scmVuZGVyVGlsZTpmdW5jdGlvbigpe2lmKHRoaXMubGF5ZXIuYXN5bmMpe3ZhciBhPXRoaXMuYXN5bmNSZXF1ZXN0SWQ9KHRoaXMuYXN5bmNSZXF1ZXN0SWR8fDApKzE7dGhpcy5sYXllci5nZXRVUkxhc3luYyh0aGlzLmJvdW5kcyxmdW5jdGlvbihiKXthPT10aGlzLmFzeW5jUmVxdWVzdElkJiYodGhpcy51cmw9Yix0aGlzLmluaXRJbWFnZSgpKX0sdGhpcyl9ZWxzZSB0aGlzLnVybD10aGlzLmxheWVyLmdldFVSTCh0aGlzLmJvdW5kcyksdGhpcy5pbml0SW1hZ2UoKX0scG9zaXRpb25UaWxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRUaWxlKCkuc3R5bGUsYj10aGlzLmZyYW1lP3RoaXMuc2l6ZTp0aGlzLmxheWVyLmdldEltYWdlU2l6ZSh0aGlzLmJvdW5kcyksCmM9MTt0aGlzLmxheWVyIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5HcmlkJiYoYz10aGlzLmxheWVyLmdldFNlcnZlclJlc29sdXRpb24oKS90aGlzLmxheWVyLm1hcC5nZXRSZXNvbHV0aW9uKCkpO2EubGVmdD10aGlzLnBvc2l0aW9uLngrInB4IjthLnRvcD10aGlzLnBvc2l0aW9uLnkrInB4IjthLndpZHRoPU1hdGgucm91bmQoYypiLncpKyJweCI7YS5oZWlnaHQ9TWF0aC5yb3VuZChjKmIuaCkrInB4In0sY2xlYXI6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmNsZWFyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYT10aGlzLmltZ0RpdjtpZihhKXt2YXIgYj10aGlzLmdldFRpbGUoKTtiLnBhcmVudE5vZGU9PT10aGlzLmxheWVyLmRpdiYmdGhpcy5sYXllci5kaXYucmVtb3ZlQ2hpbGQoYik7dGhpcy5zZXRJbWdTcmMoKTshMD09PXRoaXMubGF5ZXJBbHBoYUhhY2smJihhLnN0eWxlLmZpbHRlcj0iIik7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKGEsCiJvbEltYWdlTG9hZEVycm9yIil9dGhpcy5jYW52YXNDb250ZXh0PW51bGx9LGdldEltYWdlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaW1nRGl2KXt0aGlzLmltZ0Rpdj1PcGVuTGF5ZXJzLlRpbGUuSW1hZ2UuSU1BR0UuY2xvbmVOb2RlKCExKTt2YXIgYT10aGlzLmltZ0Rpdi5zdHlsZTtpZih0aGlzLmZyYW1lKXt2YXIgYj0wLGM9MDt0aGlzLmxheWVyLmd1dHRlciYmKGI9MTAwKih0aGlzLmxheWVyLmd1dHRlci90aGlzLmxheWVyLnRpbGVTaXplLncpLGM9MTAwKih0aGlzLmxheWVyLmd1dHRlci90aGlzLmxheWVyLnRpbGVTaXplLmgpKTthLmxlZnQ9LWIrIiUiO2EudG9wPS1jKyIlIjthLndpZHRoPTIqYisxMDArIiUiO2EuaGVpZ2h0PTIqYysxMDArIiUifWEudmlzaWJpbGl0eT0iaGlkZGVuIjthLm9wYWNpdHk9MDsxPnRoaXMubGF5ZXIub3BhY2l0eSYmKGEuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrMTAwKnRoaXMubGF5ZXIub3BhY2l0eSsiKSIpO2EucG9zaXRpb249ImFic29sdXRlIjsKdGhpcy5sYXllckFscGhhSGFjayYmKGEucGFkZGluZ1RvcD1hLmhlaWdodCxhLmhlaWdodD0iMCIsYS53aWR0aD0iMTAwJSIpO3RoaXMuZnJhbWUmJnRoaXMuZnJhbWUuYXBwZW5kQ2hpbGQodGhpcy5pbWdEaXYpfXJldHVybiB0aGlzLmltZ0Rpdn0sc2V0SW1hZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbWdEaXY9YX0saW5pdEltYWdlOmZ1bmN0aW9uKCl7aWYodGhpcy51cmx8fHRoaXMuaW1nRGl2KXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWxvYWQiKTt0aGlzLmxheWVyLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmdldFRpbGUoKSk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KHRoaXMuX2xvYWRFdmVudCk7dmFyIGE9dGhpcy5nZXRJbWFnZSgpLGI9YS5nZXRBdHRyaWJ1dGUoInNyYyIpfHwiIjt0aGlzLnVybCYmT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybChiLHRoaXMudXJsKT90aGlzLl9sb2FkVGltZW91dD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5vbkltYWdlTG9hZCwKdGhpcyksMCk6KHRoaXMuc3RvcExvYWRpbmcoKSx0aGlzLmNyb3NzT3JpZ2luS2V5d29yZCYmYS5yZW1vdmVBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIiksT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsImxvYWQiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLm9uSW1hZ2VMb2FkLHRoaXMpKSxPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiZXJyb3IiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLm9uSW1hZ2VFcnJvcix0aGlzKSksdGhpcy5pbWFnZVJlbG9hZEF0dGVtcHRzPTAsdGhpcy5zZXRJbWdTcmModGhpcy51cmwpKX1lbHNlIHRoaXMuaXNMb2FkaW5nPSExfSxzZXRJbWdTcmM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbWdEaXY7YT8oYi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iLGIuc3R5bGUub3BhY2l0eT0wLHRoaXMuY3Jvc3NPcmlnaW5LZXl3b3JkJiYoImRhdGE6IiE9PWEuc3Vic3RyKDAsNSk/Yi5zZXRBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIix0aGlzLmNyb3NzT3JpZ2luS2V5d29yZCk6CmIucmVtb3ZlQXR0cmlidXRlKCJjcm9zc29yaWdpbiIpKSxiLnNyYz1hKToodGhpcy5zdG9wTG9hZGluZygpLHRoaXMuaW1nRGl2PW51bGwsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpfSxnZXRUaWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnJhbWU/dGhpcy5mcmFtZTp0aGlzLmdldEltYWdlKCl9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXtpZih0aGlzLmltZ0RpdiYmIXRoaXMuaXNMb2FkaW5nKXt2YXIgYTt0aGlzLmZyYW1lPyhhPXRoaXMuZnJhbWUuY2xvbmVOb2RlKCExKSxhLmFwcGVuZENoaWxkKHRoaXMuaW1nRGl2KSk6YT10aGlzLmltZ0Rpdjt0aGlzLmltZ0Rpdj1udWxsO3JldHVybiBhfX0sb25JbWFnZUxvYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltZ0Rpdjt0aGlzLnN0b3BMb2FkaW5nKCk7YS5zdHlsZS52aXNpYmlsaXR5PSJpbmhlcml0IjthLnN0eWxlLm9wYWNpdHk9dGhpcy5sYXllci5vcGFjaXR5O3RoaXMuaXNMb2FkaW5nPQohMTt0aGlzLmNhbnZhc0NvbnRleHQ9bnVsbDt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKTshMD09PXRoaXMubGF5ZXJBbHBoYUhhY2smJihhLnN0eWxlLmZpbHRlcj0icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhSW1hZ2VMb2FkZXIoc3JjPSciK2Euc3JjKyInLCBzaXppbmdNZXRob2Q9J3NjYWxlJykiKX0sb25JbWFnZUVycm9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbWdEaXY7bnVsbCE9YS5zcmMmJih0aGlzLmltYWdlUmVsb2FkQXR0ZW1wdHMrKyx0aGlzLmltYWdlUmVsb2FkQXR0ZW1wdHM8PU9wZW5MYXllcnMuSU1BR0VfUkVMT0FEX0FUVEVNUFRTP3RoaXMuc2V0SW1nU3JjKHRoaXMubGF5ZXIuZ2V0VVJMKHRoaXMuYm91bmRzKSk6KE9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhhLCJvbEltYWdlTG9hZEVycm9yIiksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZXJyb3IiKSx0aGlzLm9uSW1hZ2VMb2FkKCkpKX0sc3RvcExvYWRpbmc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmdFbGVtZW50KHRoaXMuaW1nRGl2KTsKd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9sb2FkVGltZW91dCk7ZGVsZXRlIHRoaXMuX2xvYWRUaW1lb3V0fSxnZXRDYW52YXNDb250ZXh0OmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5DQU5WQVNfU1VQUE9SVEVEJiZ0aGlzLmltZ0RpdiYmIXRoaXMuaXNMb2FkaW5nKXtpZighdGhpcy5jYW52YXNDb250ZXh0KXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTthLndpZHRoPXRoaXMuc2l6ZS53O2EuaGVpZ2h0PXRoaXMuc2l6ZS5oO3RoaXMuY2FudmFzQ29udGV4dD1hLmdldENvbnRleHQoIjJkIik7dGhpcy5jYW52YXNDb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltZ0RpdiwwLDApfXJldHVybiB0aGlzLmNhbnZhc0NvbnRleHR9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UifSk7Ck9wZW5MYXllcnMuVGlsZS5JbWFnZS5JTUFHRT1mdW5jdGlvbigpe3ZhciBhPW5ldyBJbWFnZTthLmNsYXNzTmFtZT0ib2xUaWxlSW1hZ2UiO2EuZ2FsbGVyeUltZz0ibm8iO3JldHVybiBhfSgpO09wZW5MYXllcnMuTGF5ZXIuR3JpZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3Qse3RpbGVTaXplOm51bGwsdGlsZU9yaWdpbkNvcm5lcjoiYmwiLHRpbGVPcmlnaW46bnVsbCx0aWxlT3B0aW9uczpudWxsLHRpbGVDbGFzczpPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UsZ3JpZDpudWxsLHNpbmdsZVRpbGU6ITEscmF0aW86MS41LGJ1ZmZlcjowLHRyYW5zaXRpb25FZmZlY3Q6InJlc2l6ZSIsbnVtTG9hZGluZ1RpbGVzOjAsc2VydmVyUmVzb2x1dGlvbnM6bnVsbCxsb2FkaW5nOiExLGJhY2tCdWZmZXI6bnVsbCxncmlkUmVzb2x1dGlvbjpudWxsLGJhY2tCdWZmZXJSZXNvbHV0aW9uOm51bGwsYmFja0J1ZmZlckxvbkxhdDpudWxsLGJhY2tCdWZmZXJUaW1lcklkOm51bGwscmVtb3ZlQmFja0J1ZmZlckRlbGF5Om51bGwsY2xhc3NOYW1lOm51bGwsZ3JpZExheW91dDpudWxsLHJvd1NpZ246bnVsbCx0cmFuc2l0aW9uZW5kRXZlbnRzOlsidHJhbnNpdGlvbmVuZCIsCiJ3ZWJraXRUcmFuc2l0aW9uRW5kIiwib3RyYW5zaXRpb25lbmQiLCJvVHJhbnNpdGlvbkVuZCJdLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5ncmlkPVtdO3RoaXMuX3JlbW92ZUJhY2tCdWZmZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucmVtb3ZlQmFja0J1ZmZlcix0aGlzKTt0aGlzLmluaXRQcm9wZXJ0aWVzKCk7dGhpcy5yb3dTaWduPSJ0Ij09PXRoaXMudGlsZU9yaWdpbkNvcm5lci5zdWJzdHIoMCwxKT8xOi0xfSxpbml0UHJvcGVydGllczpmdW5jdGlvbigpe3ZvaWQgMD09PXRoaXMub3B0aW9ucy5yZW1vdmVCYWNrQnVmZmVyRGVsYXkmJih0aGlzLnJlbW92ZUJhY2tCdWZmZXJEZWxheT10aGlzLnNpbmdsZVRpbGU/MDoyNTAwKTt2b2lkIDA9PT10aGlzLm9wdGlvbnMuY2xhc3NOYW1lJiYodGhpcy5jbGFzc05hbWU9dGhpcy5zaW5nbGVUaWxlPwoib2xMYXllckdyaWRTaW5nbGVUaWxlIjoib2xMYXllckdyaWQiKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsYSk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGl2LHRoaXMuY2xhc3NOYW1lKX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQmFja0J1ZmZlcigpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVCYWNrQnVmZmVyKCk7dGhpcy5jbGVhckdyaWQoKTt0aGlzLnRpbGVTaXplPXRoaXMuZ3JpZD1udWxsO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbGVhckdyaWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmdyaWQpe2Zvcih2YXIgYT0wLGI9dGhpcy5ncmlkLmxlbmd0aDthPGI7YSsrKWZvcih2YXIgYz10aGlzLmdyaWRbYV0sZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyl0aGlzLmRlc3Ryb3lUaWxlKGNbZF0pOwp0aGlzLmdyaWQ9W107dGhpcy5ncmlkTGF5b3V0PXRoaXMuZ3JpZFJlc29sdXRpb249bnVsbH19LGFkZE9wdGlvbnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz12b2lkIDAhPT1hLnNpbmdsZVRpbGUmJmEuc2luZ2xlVGlsZSE9PXRoaXMuc2luZ2xlVGlsZTtPcGVuTGF5ZXJzLkxheWVyLkhUVFBSZXF1ZXN0LnByb3RvdHlwZS5hZGRPcHRpb25zLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1hcCYmYyYmKHRoaXMuaW5pdFByb3BlcnRpZXMoKSx0aGlzLmNsZWFyR3JpZCgpLHRoaXMudGlsZVNpemU9dGhpcy5vcHRpb25zLnRpbGVTaXplLHRoaXMuc2V0VGlsZVNpemUoKSx0aGlzLm1vdmVUbyhudWxsLCEwKSl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLkdyaWQodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7YT1PcGVuTGF5ZXJzLkxheWVyLkhUVFBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLApbYV0pO251bGwhPXRoaXMudGlsZVNpemUmJihhLnRpbGVTaXplPXRoaXMudGlsZVNpemUuY2xvbmUoKSk7YS5ncmlkPVtdO2EuZ3JpZFJlc29sdXRpb249bnVsbDthLmJhY2tCdWZmZXI9bnVsbDthLmJhY2tCdWZmZXJUaW1lcklkPW51bGw7YS5sb2FkaW5nPSExO2EubnVtTG9hZGluZ1RpbGVzPTA7cmV0dXJuIGF9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdC5wcm90b3R5cGUubW92ZVRvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPWF8fHRoaXMubWFwLmdldEV4dGVudCgpO2lmKG51bGwhPWEpe3ZhciBkPSF0aGlzLmdyaWQubGVuZ3RofHxiLGU9dGhpcy5nZXRUaWxlc0JvdW5kcygpLGY9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO3RoaXMuZ2V0U2VydmVyUmVzb2x1dGlvbihmKTtpZih0aGlzLnNpbmdsZVRpbGUpe2lmKGR8fCFjJiYhZS5jb250YWluc0JvdW5kcyhhKSliJiYicmVzaXplIiE9PXRoaXMudHJhbnNpdGlvbkVmZmVjdCYmCnRoaXMucmVtb3ZlQmFja0J1ZmZlcigpLGImJiJyZXNpemUiIT09dGhpcy50cmFuc2l0aW9uRWZmZWN0fHx0aGlzLmFwcGx5QmFja0J1ZmZlcihmKSx0aGlzLmluaXRTaW5nbGVUaWxlKGEpfWVsc2UoZD1kfHwhZS5pbnRlcnNlY3RzQm91bmRzKGEse3dvcmxkQm91bmRzOnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUmJnRoaXMubWFwLmdldE1heEV4dGVudCgpfSkpPyghYnx8InJlc2l6ZSIhPT10aGlzLnRyYW5zaXRpb25FZmZlY3QmJnRoaXMuZ3JpZFJlc29sdXRpb24hPT1mfHx0aGlzLmFwcGx5QmFja0J1ZmZlcihmKSx0aGlzLmluaXRHcmlkZGVkVGlsZXMoYSkpOnRoaXMubW92ZUdyaWRkZWRUaWxlcygpfX0sZ2V0VGlsZURhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbCxjPWEubG9uLGQ9YS5sYXQsZT10aGlzLmdyaWQubGVuZ3RoO2lmKHRoaXMubWFwJiZlKXt2YXIgZj10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7YT10aGlzLnRpbGVTaXplLnc7dmFyIGc9dGhpcy50aWxlU2l6ZS5oLApoPXRoaXMuZ3JpZFswXVswXS5ib3VuZHMsaz1oLmxlZnQsaD1oLnRvcDtpZihjPGsmJnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpdmFyIGw9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCkuZ2V0V2lkdGgoKSxtPU1hdGguY2VpbCgoay1jKS9sKSxjPWMrbCptO2M9KGMtaykvKGYqYSk7ZD0oaC1kKS8oZipnKTtmPU1hdGguZmxvb3IoYyk7az1NYXRoLmZsb29yKGQpOzA8PWsmJms8ZSYmKGU9dGhpcy5ncmlkW2tdW2ZdKSYmKGI9e3RpbGU6ZSxpOk1hdGguZmxvb3IoKGMtZikqYSksajpNYXRoLmZsb29yKChkLWspKmcpfSl9cmV0dXJuIGJ9LGRlc3Ryb3lUaWxlOmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlVGlsZU1vbml0b3JpbmdIb29rcyhhKTthLmRlc3Ryb3koKX0sZ2V0U2VydmVyUmVzb2x1dGlvbjpmdW5jdGlvbihhKXt2YXIgYj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7YT1hfHx0aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7aWYodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyYmCi0xPT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyxhKSl7dmFyIGMsZCxlLGY7Zm9yKGM9dGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucy5sZW5ndGgtMTswPD1jO2MtLSl7ZT10aGlzLnNlcnZlclJlc29sdXRpb25zW2NdO2Q9TWF0aC5hYnMoZS1hKTtpZihkPmIpYnJlYWs7Yj1kO2Y9ZX1hPWZ9cmV0dXJuIGF9LGdldFNlcnZlclpvb206ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKTtyZXR1cm4gdGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucz9PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLnNlcnZlclJlc29sdXRpb25zLGEpOnRoaXMubWFwLmdldFpvb21Gb3JSZXNvbHV0aW9uKGEpKyh0aGlzLnpvb21PZmZzZXR8fDApfSxhcHBseUJhY2tCdWZmZXI6ZnVuY3Rpb24oYSl7bnVsbCE9PXRoaXMuYmFja0J1ZmZlclRpbWVySWQmJnRoaXMucmVtb3ZlQmFja0J1ZmZlcigpO3ZhciBiPXRoaXMuYmFja0J1ZmZlcjtpZighYil7Yj0KdGhpcy5jcmVhdGVCYWNrQnVmZmVyKCk7aWYoIWIpcmV0dXJuO2E9PT10aGlzLmdyaWRSZXNvbHV0aW9uP3RoaXMuZGl2Lmluc2VydEJlZm9yZShiLHRoaXMuZGl2LmZpcnN0Q2hpbGQpOnRoaXMubWFwLmJhc2VMYXllci5kaXYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYix0aGlzLm1hcC5iYXNlTGF5ZXIuZGl2KTt0aGlzLmJhY2tCdWZmZXI9Yjt2YXIgYz10aGlzLmdyaWRbMF1bMF0uYm91bmRzO3RoaXMuYmFja0J1ZmZlckxvbkxhdD17bG9uOmMubGVmdCxsYXQ6Yy50b3B9O3RoaXMuYmFja0J1ZmZlclJlc29sdXRpb249dGhpcy5ncmlkUmVzb2x1dGlvbn1mb3IodmFyIGM9dGhpcy5iYWNrQnVmZmVyUmVzb2x1dGlvbi9hLGQ9Yi5jaGlsZE5vZGVzLGUsZj1kLmxlbmd0aC0xOzA8PWY7LS1mKWU9ZFtmXSxlLnN0eWxlLnRvcD0oYyplLl9pKmUuX2h8MCkrInB4IixlLnN0eWxlLmxlZnQ9KGMqZS5faiplLl93fDApKyJweCIsZS5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKGMqZS5fdykrCiJweCIsZS5zdHlsZS5oZWlnaHQ9TWF0aC5yb3VuZChjKmUuX2gpKyJweCI7YT10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMuYmFja0J1ZmZlckxvbkxhdCxhKTtjPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueTtiLnN0eWxlLmxlZnQ9TWF0aC5yb3VuZChhLngtdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC54KSsicHgiO2Iuc3R5bGUudG9wPU1hdGgucm91bmQoYS55LWMpKyJweCJ9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXt2YXIgYTtpZigwPHRoaXMuZ3JpZC5sZW5ndGgpe2E9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7YS5pZD10aGlzLmRpdi5pZCsiX2JiIjthLmNsYXNzTmFtZT0ib2xCYWNrQnVmZmVyIjthLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7dmFyIGI9dGhpcy5tYXA7YS5zdHlsZS56SW5kZXg9InJlc2l6ZSI9PT10aGlzLnRyYW5zaXRpb25FZmZlY3Q/dGhpcy5nZXRaSW5kZXgoKS0xOmIuWl9JTkRFWF9CQVNFLkJhc2VMYXllci0KKGIuZ2V0TnVtTGF5ZXJzKCktYi5nZXRMYXllckluZGV4KHRoaXMpKTtmb3IodmFyIGI9MCxjPXRoaXMuZ3JpZC5sZW5ndGg7YjxjO2IrKylmb3IodmFyIGQ9MCxlPXRoaXMuZ3JpZFtiXS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9dGhpcy5ncmlkW2JdW2RdLGc9dGhpcy5ncmlkW2JdW2RdLmNyZWF0ZUJhY2tCdWZmZXIoKTtnJiYoZy5faT1iLGcuX2o9ZCxnLl93PWYuc2l6ZS53LGcuX2g9Zi5zaXplLmgsZy5pZD1mLmlkKyJfYmIiLGEuYXBwZW5kQ2hpbGQoZykpfX1yZXR1cm4gYX0scmVtb3ZlQmFja0J1ZmZlcjpmdW5jdGlvbigpe2lmKHRoaXMuX3RyYW5zaXRpb25FbGVtZW50KXtmb3IodmFyIGE9dGhpcy50cmFuc2l0aW9uZW5kRXZlbnRzLmxlbmd0aC0xOzA8PWE7LS1hKU9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh0aGlzLl90cmFuc2l0aW9uRWxlbWVudCx0aGlzLnRyYW5zaXRpb25lbmRFdmVudHNbYV0sdGhpcy5fcmVtb3ZlQmFja0J1ZmZlcik7ZGVsZXRlIHRoaXMuX3RyYW5zaXRpb25FbGVtZW50fXRoaXMuYmFja0J1ZmZlciYmCih0aGlzLmJhY2tCdWZmZXIucGFyZW50Tm9kZSYmdGhpcy5iYWNrQnVmZmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5iYWNrQnVmZmVyKSx0aGlzLmJhY2tCdWZmZXJSZXNvbHV0aW9uPXRoaXMuYmFja0J1ZmZlcj1udWxsLG51bGwhPT10aGlzLmJhY2tCdWZmZXJUaW1lcklkJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLmJhY2tCdWZmZXJUaW1lcklkKSx0aGlzLmJhY2tCdWZmZXJUaW1lcklkPW51bGwpKX0sbW92ZUJ5UHg6ZnVuY3Rpb24oYSxiKXt0aGlzLnNpbmdsZVRpbGV8fHRoaXMubW92ZUdyaWRkZWRUaWxlcygpfSxzZXRUaWxlU2l6ZTpmdW5jdGlvbihhKXt0aGlzLnNpbmdsZVRpbGUmJihhPXRoaXMubWFwLmdldFNpemUoKSxhLmg9cGFyc2VJbnQoYS5oKnRoaXMucmF0aW8sMTApLGEudz1wYXJzZUludChhLncqdGhpcy5yYXRpbywxMCkpO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLnNldFRpbGVTaXplLmFwcGx5KHRoaXMsW2FdKX0sZ2V0VGlsZXNCb3VuZHM6ZnVuY3Rpb24oKXt2YXIgYT0KbnVsbCxiPXRoaXMuZ3JpZC5sZW5ndGg7aWYoYil2YXIgYT10aGlzLmdyaWRbYi0xXVswXS5ib3VuZHMsYj10aGlzLmdyaWRbMF0ubGVuZ3RoKmEuZ2V0V2lkdGgoKSxjPXRoaXMuZ3JpZC5sZW5ndGgqYS5nZXRIZWlnaHQoKSxhPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLmxlZnQsYS5ib3R0b20sYS5sZWZ0K2IsYS5ib3R0b20rYyk7cmV0dXJuIGF9LGluaXRTaW5nbGVUaWxlOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmV0aWxlIik7dmFyIGI9YS5nZXRDZW50ZXJMb25MYXQoKSxjPWEuZ2V0V2lkdGgoKSp0aGlzLnJhdGlvO2E9YS5nZXRIZWlnaHQoKSp0aGlzLnJhdGlvO2I9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIubG9uLWMvMixiLmxhdC1hLzIsYi5sb24rYy8yLGIubGF0K2EvMik7Yz10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh7bG9uOmIubGVmdCxsYXQ6Yi50b3B9KTt0aGlzLmdyaWQubGVuZ3RofHwodGhpcy5ncmlkWzBdPVtdKTsoYT10aGlzLmdyaWRbMF1bMF0pPwphLm1vdmVUbyhiLGMpOihhPXRoaXMuYWRkVGlsZShiLGMpLHRoaXMuYWRkVGlsZU1vbml0b3JpbmdIb29rcyhhKSxhLmRyYXcoKSx0aGlzLmdyaWRbMF1bMF09YSk7dGhpcy5yZW1vdmVFeGNlc3NUaWxlcygxLDEpO3RoaXMuZ3JpZFJlc29sdXRpb249dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCl9LGNhbGN1bGF0ZUdyaWRMYXlvdXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMqdGhpcy50aWxlU2l6ZS53O2MqPXRoaXMudGlsZVNpemUuaDt2YXIgZT1NYXRoLmZsb29yKChhLmxlZnQtYi5sb24pL2QpLXRoaXMuYnVmZmVyLGY9dGhpcy5yb3dTaWduO2E9TWF0aFt+Zj8iZmxvb3IiOiJjZWlsIl0oZiooYi5sYXQtYS50b3ArYykvYyktdGhpcy5idWZmZXIqZjtyZXR1cm57dGlsZWxvbjpkLHRpbGVsYXQ6YyxzdGFydGNvbDplLHN0YXJ0cm93OmF9fSxnZXRUaWxlT3JpZ2luOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50aWxlT3JpZ2luO2lmKCFhKXZhciBhPXRoaXMuZ2V0TWF4RXh0ZW50KCksCmI9e3RsOlsibGVmdCIsInRvcCJdLHRyOlsicmlnaHQiLCJ0b3AiXSxibDpbImxlZnQiLCJib3R0b20iXSxicjpbInJpZ2h0IiwiYm90dG9tIl19W3RoaXMudGlsZU9yaWdpbkNvcm5lcl0sYT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYVtiWzBdXSxhW2JbMV1dKTtyZXR1cm4gYX0sZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0VGlsZU9yaWdpbigpLGQ9dGhpcy5ncmlkTGF5b3V0LGU9ZC50aWxlbG9uLGY9ZC50aWxlbGF0LGc9ZC5zdGFydGNvbCxkPWQuc3RhcnRyb3csaD10aGlzLnJvd1NpZ247cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhjLmxvbisoZytiKSplLGMubGF0LShkK2EqaCkqZipoLGMubG9uKyhnK2IrMSkqZSxjLmxhdC0oZCsoYS0xKSpoKSpmKmgpfSxpbml0R3JpZGRlZFRpbGVzOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmV0aWxlIik7dmFyIGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9dGhpcy5nZXRUaWxlT3JpZ2luKCksCmQ9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGU9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCksZj1kL2UsZD10aGlzLnRpbGVTaXplLncvZixmPXRoaXMudGlsZVNpemUuaC9mLGc9TWF0aC5jZWlsKGIuaC9mKSsyKnRoaXMuYnVmZmVyKzEsYj1NYXRoLmNlaWwoYi53L2QpKzIqdGhpcy5idWZmZXIrMTt0aGlzLmdyaWRMYXlvdXQ9ZT10aGlzLmNhbGN1bGF0ZUdyaWRMYXlvdXQoYSxjLGUpO3ZhciBjPWUudGlsZWxvbixoPWUudGlsZWxhdCxlPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueCxrPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSxsPXRoaXMuZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleCgwLDApLG09dGhpcy5tYXAuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQobmV3IE9wZW5MYXllcnMuTG9uTGF0KGwubGVmdCxsLnRvcCkpO20ueD1NYXRoLnJvdW5kKG0ueCktZTttLnk9TWF0aC5yb3VuZChtLnkpLWs7dmFyIGU9W10saz10aGlzLm1hcC5nZXRDZW50ZXIoKSwKcD0wO2Rve3ZhciBuPXRoaXMuZ3JpZFtwXTtufHwobj1bXSx0aGlzLmdyaWQucHVzaChuKSk7dmFyIHE9MDtkb3t2YXIgbD10aGlzLmdldFRpbGVCb3VuZHNGb3JHcmlkSW5kZXgocCxxKSxyPW0uY2xvbmUoKTtyLngrPXEqTWF0aC5yb3VuZChkKTtyLnkrPXAqTWF0aC5yb3VuZChmKTt2YXIgcz1uW3FdO3M/cy5tb3ZlVG8obCxyLCExKToocz10aGlzLmFkZFRpbGUobCxyKSx0aGlzLmFkZFRpbGVNb25pdG9yaW5nSG9va3Mocyksbi5wdXNoKHMpKTtyPWwuZ2V0Q2VudGVyTG9uTGF0KCk7ZS5wdXNoKHt0aWxlOnMsZGlzdGFuY2U6TWF0aC5wb3coci5sb24tay5sb24sMikrTWF0aC5wb3coci5sYXQtay5sYXQsMil9KTtxKz0xfXdoaWxlKGwucmlnaHQ8PWEucmlnaHQrYyp0aGlzLmJ1ZmZlcnx8cTxiKTtwKz0xfXdoaWxlKGwuYm90dG9tPj1hLmJvdHRvbS1oKnRoaXMuYnVmZmVyfHxwPGcpO3RoaXMucmVtb3ZlRXhjZXNzVGlsZXMocCxxKTt0aGlzLmdyaWRSZXNvbHV0aW9uPWQ9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCk7CmUuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLmRpc3RhbmNlLWIuZGlzdGFuY2V9KTthPTA7Zm9yKGQ9ZS5sZW5ndGg7YTxkOysrYSllW2FdLnRpbGUuZHJhdygpfSxnZXRNYXhFeHRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXhFeHRlbnR9LGFkZFRpbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgdGhpcy50aWxlQ2xhc3ModGhpcyxiLGEsbnVsbCx0aGlzLnRpbGVTaXplLHRoaXMudGlsZU9wdGlvbnMpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYWRkdGlsZSIse3RpbGU6Y30pO3JldHVybiBjfSxhZGRUaWxlTW9uaXRvcmluZ0hvb2tzOmZ1bmN0aW9uKGEpe2Eub25Mb2FkU3RhcnQ9ZnVuY3Rpb24oKXshMT09PXRoaXMubG9hZGluZyYmKHRoaXMubG9hZGluZz0hMCx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIpKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInRpbGVsb2Fkc3RhcnQiLHt0aWxlOmF9KTt0aGlzLm51bUxvYWRpbmdUaWxlcysrOwohdGhpcy5zaW5nbGVUaWxlJiYodGhpcy5iYWNrQnVmZmVyJiZ0aGlzLmdyaWRSZXNvbHV0aW9uPT09dGhpcy5iYWNrQnVmZmVyUmVzb2x1dGlvbikmJk9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhhLmdldFRpbGUoKSwib2xUaWxlUmVwbGFjaW5nIil9O2Eub25Mb2FkRW5kPWZ1bmN0aW9uKGIpe3RoaXMubnVtTG9hZGluZ1RpbGVzLS07Yj0idW5sb2FkIj09PWIudHlwZTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInRpbGVsb2FkZWQiLHt0aWxlOmEsYWJvcnRlZDpifSk7aWYoIXRoaXMuc2luZ2xlVGlsZSYmIWImJnRoaXMuYmFja0J1ZmZlciYmdGhpcy5ncmlkUmVzb2x1dGlvbj09PXRoaXMuYmFja0J1ZmZlclJlc29sdXRpb24pe3ZhciBjPWEuZ2V0VGlsZSgpO2lmKCJub25lIj09PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShjLCJkaXNwbGF5Iikpe3ZhciBkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQrIl9iYiIpO2QmJmQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKX1PcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoYywKIm9sVGlsZVJlcGxhY2luZyIpfWlmKDA9PT10aGlzLm51bUxvYWRpbmdUaWxlcyl7aWYodGhpcy5iYWNrQnVmZmVyKWlmKDA9PT10aGlzLmJhY2tCdWZmZXIuY2hpbGROb2Rlcy5sZW5ndGgpdGhpcy5yZW1vdmVCYWNrQnVmZmVyKCk7ZWxzZXt0aGlzLl90cmFuc2l0aW9uRWxlbWVudD1iP3RoaXMuZGl2Lmxhc3RDaGlsZDphLmltZ0RpdjtiPXRoaXMudHJhbnNpdGlvbmVuZEV2ZW50cztmb3IoYz1iLmxlbmd0aC0xOzA8PWM7LS1jKU9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh0aGlzLl90cmFuc2l0aW9uRWxlbWVudCxiW2NdLHRoaXMuX3JlbW92ZUJhY2tCdWZmZXIpO3RoaXMuYmFja0J1ZmZlclRpbWVySWQ9d2luZG93LnNldFRpbWVvdXQodGhpcy5fcmVtb3ZlQmFja0J1ZmZlcix0aGlzLnJlbW92ZUJhY2tCdWZmZXJEZWxheSl9dGhpcy5sb2FkaW5nPSExO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZGVuZCIpfX07YS5vbkxvYWRFcnJvcj1mdW5jdGlvbigpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidGlsZWVycm9yIiwKe3RpbGU6YX0pfTthLmV2ZW50cy5vbih7bG9hZHN0YXJ0OmEub25Mb2FkU3RhcnQsbG9hZGVuZDphLm9uTG9hZEVuZCx1bmxvYWQ6YS5vbkxvYWRFbmQsbG9hZGVycm9yOmEub25Mb2FkRXJyb3Isc2NvcGU6dGhpc30pfSxyZW1vdmVUaWxlTW9uaXRvcmluZ0hvb2tzOmZ1bmN0aW9uKGEpe2EudW5sb2FkKCk7YS5ldmVudHMudW4oe2xvYWRzdGFydDphLm9uTG9hZFN0YXJ0LGxvYWRlbmQ6YS5vbkxvYWRFbmQsdW5sb2FkOmEub25Mb2FkRW5kLGxvYWRlcnJvcjphLm9uTG9hZEVycm9yLHNjb3BlOnRoaXN9KX0sbW92ZUdyaWRkZWRUaWxlczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmJ1ZmZlcisxOzspe3ZhciBiPXRoaXMuZ3JpZFswXVswXSxjPWIucG9zaXRpb24ueCt0aGlzLm1hcC5sYXllckNvbnRhaW5lck9yaWdpblB4LngsYj1iLnBvc2l0aW9uLnkrdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC55LGQ9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCkvdGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLApkPXt3Ok1hdGgucm91bmQodGhpcy50aWxlU2l6ZS53KmQpLGg6TWF0aC5yb3VuZCh0aGlzLnRpbGVTaXplLmgqZCl9O2lmKGM+LWQudyooYS0xKSl0aGlzLnNoaWZ0Q29sdW1uKCEwLGQpO2Vsc2UgaWYoYzwtZC53KmEpdGhpcy5zaGlmdENvbHVtbighMSxkKTtlbHNlIGlmKGI+LWQuaCooYS0xKSl0aGlzLnNoaWZ0Um93KCEwLGQpO2Vsc2UgaWYoYjwtZC5oKmEpdGhpcy5zaGlmdFJvdyghMSxkKTtlbHNlIGJyZWFrfX0sc2hpZnRSb3c6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdyaWQsZD1hPzA6Yy5sZW5ndGgtMSxlPWE/LTE6MTt0aGlzLmdyaWRMYXlvdXQuc3RhcnRyb3crPWUqdGhpcy5yb3dTaWduO2Zvcih2YXIgZj1jW2RdLGc9Y1thPyJwb3AiOiJzaGlmdCJdKCksaD0wLGs9Zy5sZW5ndGg7aDxrO2grKyl7dmFyIGw9Z1toXSxtPWZbaF0ucG9zaXRpb24uY2xvbmUoKTttLnkrPWIuaCplO2wubW92ZVRvKHRoaXMuZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleChkLGgpLG0pfWNbYT8KInVuc2hpZnQiOiJwdXNoIl0oZyl9LHNoaWZ0Q29sdW1uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5ncmlkLGQ9YT8wOmNbMF0ubGVuZ3RoLTEsZT1hPy0xOjE7dGhpcy5ncmlkTGF5b3V0LnN0YXJ0Y29sKz1lO2Zvcih2YXIgZj0wLGc9Yy5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9Y1tmXSxrPWhbZF0ucG9zaXRpb24uY2xvbmUoKSxsPWhbYT8icG9wIjoic2hpZnQiXSgpO2sueCs9Yi53KmU7bC5tb3ZlVG8odGhpcy5nZXRUaWxlQm91bmRzRm9yR3JpZEluZGV4KGYsZCksayk7aFthPyJ1bnNoaWZ0IjoicHVzaCJdKGwpfX0scmVtb3ZlRXhjZXNzVGlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZDt0aGlzLmdyaWQubGVuZ3RoPmE7KXt2YXIgZT10aGlzLmdyaWQucG9wKCk7Yz0wO2ZvcihkPWUubGVuZ3RoO2M8ZDtjKyspe3ZhciBmPWVbY107dGhpcy5kZXN0cm95VGlsZShmKX19Yz0wO2ZvcihkPXRoaXMuZ3JpZC5sZW5ndGg7YzxkO2MrKylmb3IoO3RoaXMuZ3JpZFtjXS5sZW5ndGg+CmI7KWU9dGhpcy5ncmlkW2NdLGY9ZS5wb3AoKSx0aGlzLmRlc3Ryb3lUaWxlKGYpfSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe3RoaXMuc2luZ2xlVGlsZSYmKHRoaXMuY2xlYXJHcmlkKCksdGhpcy5zZXRUaWxlU2l6ZSgpKX0sZ2V0VGlsZUJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1heEV4dGVudCxjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9Yyp0aGlzLnRpbGVTaXplLncsYz1jKnRoaXMudGlsZVNpemUuaCxlPXRoaXMuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1iLmxlZnQrZCpNYXRoLmZsb29yKChlLmxvbi1iLmxlZnQpL2QpO2I9Yi5ib3R0b20rYypNYXRoLmZsb29yKChlLmxhdC1iLmJvdHRvbSkvYyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLGIsYStkLGIrYyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuR3JpZCJ9KTtPcGVuTGF5ZXJzLkxheWVyLlhZWj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuR3JpZCx7aXNCYXNlTGF5ZXI6ITAsc3BoZXJpY2FsTWVyY2F0b3I6ITEsem9vbU9mZnNldDowLHNlcnZlclJlc29sdXRpb25zOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7aWYoYyYmYy5zcGhlcmljYWxNZXJjYXRvcnx8dGhpcy5zcGhlcmljYWxNZXJjYXRvciljPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe3Byb2plY3Rpb246IkVQU0c6OTAwOTEzIixudW1ab29tTGV2ZWxzOjE5fSxjKTtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYXx8dGhpcy5uYW1lLGJ8fHRoaXMudXJsLHt9LGNdKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuWFlaKHRoaXMubmFtZSx0aGlzLnVybCx0aGlzLmdldE9wdGlvbnMoKSkpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcywKW2FdKX0sZ2V0VVJMOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRYWVooYSk7dmFyIGI9dGhpcy51cmw7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYikmJihiPXRoaXMuc2VsZWN0VXJsKCIiK2EueCthLnkrYS56LGIpKTtyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KGIsYSl9LGdldFhZWjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKSxjPU1hdGgucm91bmQoKGEubGVmdC10aGlzLm1heEV4dGVudC5sZWZ0KS8oYip0aGlzLnRpbGVTaXplLncpKTthPU1hdGgucm91bmQoKHRoaXMubWF4RXh0ZW50LnRvcC1hLnRvcCkvKGIqdGhpcy50aWxlU2l6ZS5oKSk7Yj10aGlzLmdldFNlcnZlclpvb20oKTtpZih0aGlzLndyYXBEYXRlTGluZSl2YXIgZD1NYXRoLnBvdygyLGIpLGM9KGMlZCtkKSVkO3JldHVybnt4OmMseTphLHo6Yn19LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLAphcmd1bWVudHMpO3RoaXMudGlsZU9yaWdpbnx8KHRoaXMudGlsZU9yaWdpbj1uZXcgT3BlbkxheWVycy5Mb25MYXQodGhpcy5tYXhFeHRlbnQubGVmdCx0aGlzLm1heEV4dGVudC5ib3R0b20pKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5YWVoifSk7T3BlbkxheWVycy5MYXllci5PU009T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLlhZWix7bmFtZToiT3BlblN0cmVldE1hcCIsdXJsOlsiaHR0cDovL2EudGlsZS5vcGVuc3RyZWV0bWFwLm9yZy8ke3p9LyR7eH0vJHt5fS5wbmciLCJodHRwOi8vYi50aWxlLm9wZW5zdHJlZXRtYXAub3JnLyR7en0vJHt4fS8ke3l9LnBuZyIsImh0dHA6Ly9jLnRpbGUub3BlbnN0cmVldG1hcC5vcmcvJHt6fS8ke3h9LyR7eX0ucG5nIl0sYXR0cmlidXRpb246IiZjb3B5OyA8YSBocmVmPSdodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodCc+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzIixzcGhlcmljYWxNZXJjYXRvcjohMCx3cmFwRGF0ZUxpbmU6ITAsdGlsZU9wdGlvbnM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy50aWxlT3B0aW9ucz0KT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7Y3Jvc3NPcmlnaW5LZXl3b3JkOiJhbm9ueW1vdXMifSx0aGlzLm9wdGlvbnMmJnRoaXMub3B0aW9ucy50aWxlT3B0aW9ucyl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLk9TTSh0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLk9TTSJ9KTtPcGVuTGF5ZXJzLlJlbmRlcmVyPU9wZW5MYXllcnMuQ2xhc3Moe2NvbnRhaW5lcjpudWxsLHJvb3Q6bnVsbCxleHRlbnQ6bnVsbCxsb2NrZWQ6ITEsc2l6ZTpudWxsLHJlc29sdXRpb246bnVsbCxtYXA6bnVsbCxmZWF0dXJlRHg6MCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7dGhpcy5jb250YWluZXI9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXA9dGhpcy5yZXNvbHV0aW9uPXRoaXMuc2l6ZT10aGlzLmV4dGVudD10aGlzLmNvbnRhaW5lcj1udWxsfSxzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sc2V0RXh0ZW50OmZ1bmN0aW9uKGEsYil7dGhpcy5leHRlbnQ9YS5jbG9uZSgpO2lmKHRoaXMubWFwLmJhc2VMYXllciYmdGhpcy5tYXAuYmFzZUxheWVyLndyYXBEYXRlTGluZSl7dmFyIGM9YS5nZXRXaWR0aCgpL3RoaXMubWFwLmdldEV4dGVudCgpLmdldFdpZHRoKCk7CmE9YS5zY2FsZSgxL2MpO3RoaXMuZXh0ZW50PWEud3JhcERhdGVMaW5lKHRoaXMubWFwLmdldE1heEV4dGVudCgpKS5zY2FsZShjKX1iJiYodGhpcy5yZXNvbHV0aW9uPW51bGwpO3JldHVybiEwfSxzZXRTaXplOmZ1bmN0aW9uKGEpe3RoaXMuc2l6ZT1hLmNsb25lKCk7dGhpcy5yZXNvbHV0aW9uPW51bGx9LGdldFJlc29sdXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXNvbHV0aW9uPXRoaXMucmVzb2x1dGlvbnx8dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpfSxkcmF3RmVhdHVyZTpmdW5jdGlvbihhLGIpe251bGw9PWImJihiPWEuc3R5bGUpO2lmKGEuZ2VvbWV0cnkpe3ZhciBjPWEuZ2VvbWV0cnkuZ2V0Qm91bmRzKCk7aWYoYyl7dmFyIGQ7dGhpcy5tYXAuYmFzZUxheWVyJiZ0aGlzLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lJiYoZD10aGlzLm1hcC5nZXRNYXhFeHRlbnQoKSk7Yy5pbnRlcnNlY3RzQm91bmRzKHRoaXMuZXh0ZW50LHt3b3JsZEJvdW5kczpkfSk/dGhpcy5jYWxjdWxhdGVGZWF0dXJlRHgoYywKZCk6Yj17ZGlzcGxheToibm9uZSJ9O2M9dGhpcy5kcmF3R2VvbWV0cnkoYS5nZW9tZXRyeSxiLGEuaWQpO2lmKCJub25lIiE9Yi5kaXNwbGF5JiZiLmxhYmVsJiYhMSE9PWMpe2Q9YS5nZW9tZXRyeS5nZXRDZW50cm9pZCgpO2lmKGIubGFiZWxYT2Zmc2V0fHxiLmxhYmVsWU9mZnNldCl7dmFyIGU9aXNOYU4oYi5sYWJlbFhPZmZzZXQpPzA6Yi5sYWJlbFhPZmZzZXQsZj1pc05hTihiLmxhYmVsWU9mZnNldCk/MDpiLmxhYmVsWU9mZnNldCxnPXRoaXMuZ2V0UmVzb2x1dGlvbigpO2QubW92ZShlKmcsZipnKX10aGlzLmRyYXdUZXh0KGEuaWQsYixkKX1lbHNlIHRoaXMucmVtb3ZlVGV4dChhLmlkKTtyZXR1cm4gY319fSxjYWxjdWxhdGVGZWF0dXJlRHg6ZnVuY3Rpb24oYSxiKXt0aGlzLmZlYXR1cmVEeD0wO2lmKGIpe3ZhciBjPWIuZ2V0V2lkdGgoKTt0aGlzLmZlYXR1cmVEeD1NYXRoLnJvdW5kKCgoYS5sZWZ0K2EucmlnaHQpLzItKHRoaXMuZXh0ZW50LmxlZnQrdGhpcy5leHRlbnQucmlnaHQpLwoyKS9jKSpjfX0sZHJhd0dlb21ldHJ5OmZ1bmN0aW9uKGEsYixjKXt9LGRyYXdUZXh0OmZ1bmN0aW9uKGEsYixjKXt9LHJlbW92ZVRleHQ6ZnVuY3Rpb24oYSl7fSxjbGVhcjpmdW5jdGlvbigpe30sZ2V0RmVhdHVyZUlkRnJvbUV2ZW50OmZ1bmN0aW9uKGEpe30sZXJhc2VGZWF0dXJlczpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YzsrK2Ipe3ZhciBkPWFbYl07dGhpcy5lcmFzZUdlb21ldHJ5KGQuZ2VvbWV0cnksZC5pZCk7dGhpcy5yZW1vdmVUZXh0KGQuaWQpfX0sZXJhc2VHZW9tZXRyeTpmdW5jdGlvbihhLGIpe30sbW92ZVJvb3Q6ZnVuY3Rpb24oYSl7fSxnZXRSZW5kZXJMYXllcklkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGFpbmVyLmlkfSxhcHBseURlZmF1bHRTeW1ib2xpemVyOmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sT3BlbkxheWVycy5SZW5kZXJlci5kZWZhdWx0U3ltYm9saXplcik7CiExPT09YS5zdHJva2UmJihkZWxldGUgYi5zdHJva2VXaWR0aCxkZWxldGUgYi5zdHJva2VDb2xvcik7ITE9PT1hLmZpbGwmJmRlbGV0ZSBiLmZpbGxDb2xvcjtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGIsYSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUmVuZGVyZXIifSk7T3BlbkxheWVycy5SZW5kZXJlci5kZWZhdWx0U3ltYm9saXplcj17ZmlsbENvbG9yOiIjMDAwMDAwIixzdHJva2VDb2xvcjoiIzAwMDAwMCIsc3Ryb2tlV2lkdGg6MixmaWxsT3BhY2l0eToxLHN0cm9rZU9wYWNpdHk6MSxwb2ludFJhZGl1czowLGxhYmVsQWxpZ246ImNtIn07Ck9wZW5MYXllcnMuUmVuZGVyZXIuc3ltYm9sPXtzdGFyOlszNTAsNzUsMzc5LDE2MSw0NjksMTYxLDM5NywyMTUsNDIzLDMwMSwzNTAsMjUwLDI3NywzMDEsMzAzLDIxNSwyMzEsMTYxLDMyMSwxNjEsMzUwLDc1XSxjcm9zczpbNCwwLDYsMCw2LDQsMTAsNCwxMCw2LDYsNiw2LDEwLDQsMTAsNCw2LDAsNiwwLDQsNCw0LDQsMF0seDpbMCwwLDI1LDAsNTAsMzUsNzUsMCwxMDAsMCw2NSw1MCwxMDAsMTAwLDc1LDEwMCw1MCw2NSwyNSwxMDAsMCwxMDAsMzUsNTAsMCwwXSxzcXVhcmU6WzAsMCwwLDEsMSwxLDEsMCwwLDBdLHRyaWFuZ2xlOlswLDEwLDEwLDEwLDUsMCwwLDEwXX07T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlJlbmRlcmVyLHtoaXREZXRlY3Rpb246ITAsaGl0T3ZlcmZsb3c6MCxjYW52YXM6bnVsbCxmZWF0dXJlczpudWxsLHBlbmRpbmdSZWRyYXc6ITEsY2FjaGVkU3ltYm9sQm91bmRzOnt9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnJvb3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5yb290KTt0aGlzLmNhbnZhcz10aGlzLnJvb3QuZ2V0Q29udGV4dCgiMmQiKTt0aGlzLmZlYXR1cmVzPXt9O3RoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5oaXRDYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIiksdGhpcy5oaXRDb250ZXh0PXRoaXMuaGl0Q2FudmFzLmdldENvbnRleHQoIjJkIikpfSwKc2V0RXh0ZW50OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5SZW5kZXJlci5wcm90b3R5cGUuc2V0RXh0ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4hMX0sZXJhc2VHZW9tZXRyeTpmdW5jdGlvbihhLGIpe3RoaXMuZXJhc2VGZWF0dXJlcyh0aGlzLmZlYXR1cmVzW2JdWzBdKX0sc3VwcG9ydGVkOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuQ0FOVkFTX1NVUFBPUlRFRH0sc2V0U2l6ZTpmdW5jdGlvbihhKXt0aGlzLnNpemU9YS5jbG9uZSgpO3ZhciBiPXRoaXMucm9vdDtiLnN0eWxlLndpZHRoPWEudysicHgiO2Iuc3R5bGUuaGVpZ2h0PWEuaCsicHgiO2Iud2lkdGg9YS53O2IuaGVpZ2h0PWEuaDt0aGlzLnJlc29sdXRpb249bnVsbDt0aGlzLmhpdERldGVjdGlvbiYmKGI9dGhpcy5oaXRDYW52YXMsYi5zdHlsZS53aWR0aD1hLncrInB4IixiLnN0eWxlLmhlaWdodD1hLmgrInB4IixiLndpZHRoPWEudyxiLmhlaWdodD1hLmgpfSxkcmF3RmVhdHVyZTpmdW5jdGlvbihhLApiKXt2YXIgYztpZihhLmdlb21ldHJ5KXtiPXRoaXMuYXBwbHlEZWZhdWx0U3ltYm9saXplcihifHxhLnN0eWxlKTtjPWEuZ2VvbWV0cnkuZ2V0Qm91bmRzKCk7dmFyIGQ7dGhpcy5tYXAuYmFzZUxheWVyJiZ0aGlzLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lJiYoZD10aGlzLm1hcC5nZXRNYXhFeHRlbnQoKSk7ZD1jJiZjLmludGVyc2VjdHNCb3VuZHModGhpcy5leHRlbnQse3dvcmxkQm91bmRzOmR9KTsoYz0ibm9uZSIhPT1iLmRpc3BsYXkmJiEhYyYmZCk/dGhpcy5mZWF0dXJlc1thLmlkXT1bYSxiXTpkZWxldGUgdGhpcy5mZWF0dXJlc1thLmlkXTt0aGlzLnBlbmRpbmdSZWRyYXc9ITB9dGhpcy5wZW5kaW5nUmVkcmF3JiYhdGhpcy5sb2NrZWQmJih0aGlzLnJlZHJhdygpLHRoaXMucGVuZGluZ1JlZHJhdz0hMSk7cmV0dXJuIGN9LGRyYXdHZW9tZXRyeTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5DTEFTU19OQU1FO2lmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24iPT0KZHx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCI9PWR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyI9PWR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI9PWQpZm9yKGQ9MDtkPGEuY29tcG9uZW50cy5sZW5ndGg7ZCsrKXRoaXMuZHJhd0dlb21ldHJ5KGEuY29tcG9uZW50c1tkXSxiLGMpO2Vsc2Ugc3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6dGhpcy5kcmF3UG9pbnQoYSxiLGMpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyI6dGhpcy5kcmF3TGluZVN0cmluZyhhLGIsYyk7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIjp0aGlzLmRyYXdMaW5lYXJSaW5nKGEsYixjKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iOnRoaXMuZHJhd1BvbHlnb24oYSxiLGMpfX0sZHJhd0V4dGVybmFsR3JhcGhpYzpmdW5jdGlvbihhLApiLGMpe3ZhciBkPW5ldyBJbWFnZSxlPWIudGl0bGV8fGIuZ3JhcGhpY1RpdGxlO2UmJihkLnRpdGxlPWUpO3ZhciBmPWIuZ3JhcGhpY1dpZHRofHxiLmdyYXBoaWNIZWlnaHQsZz1iLmdyYXBoaWNIZWlnaHR8fGIuZ3JhcGhpY1dpZHRoLGY9Zj9mOjIqYi5wb2ludFJhZGl1cyxnPWc/ZzoyKmIucG9pbnRSYWRpdXMsaD12b2lkIDAhPWIuZ3JhcGhpY1hPZmZzZXQ/Yi5ncmFwaGljWE9mZnNldDotKDAuNSpmKSxrPXZvaWQgMCE9Yi5ncmFwaGljWU9mZnNldD9iLmdyYXBoaWNZT2Zmc2V0Oi0oMC41KmcpLGw9Yi5ncmFwaGljT3BhY2l0eXx8Yi5maWxsT3BhY2l0eTtkLm9ubG9hZD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXtpZih0aGlzLmZlYXR1cmVzW2NdKXt2YXIgYj10aGlzLmdldExvY2FsWFkoYSksZT1iWzBdLGI9YlsxXTtpZighaXNOYU4oZSkmJiFpc05hTihiKSl7dmFyIGU9ZStofDAsYj1iK2t8MCxuPXRoaXMuY2FudmFzO24uZ2xvYmFsQWxwaGE9bDt2YXIgcT0KT3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuZHJhd0ltYWdlU2NhbGVGYWN0b3J8fChPcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcy5kcmF3SW1hZ2VTY2FsZUZhY3Rvcj0vYW5kcm9pZCAyLjEvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKT8zMjAvd2luZG93LnNjcmVlbi53aWR0aDoxKTtuLmRyYXdJbWFnZShkLGUqcSxiKnEsZipxLGcqcSk7dGhpcy5oaXREZXRlY3Rpb24mJih0aGlzLnNldEhpdENvbnRleHRTdHlsZSgiZmlsbCIsYyksdGhpcy5oaXRDb250ZXh0LmZpbGxSZWN0KGUsYixmLGcpKX19fSx0aGlzKTtkLnNyYz1iLmV4dGVybmFsR3JhcGhpY30sZHJhd05hbWVkU3ltYm9sOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZztmPU1hdGguUEkvMTgwO3ZhciBoPU9wZW5MYXllcnMuUmVuZGVyZXIuc3ltYm9sW2IuZ3JhcGhpY05hbWVdO2lmKCFoKXRocm93IEVycm9yKGIuZ3JhcGhpY05hbWUrIiBpcyBub3QgYSB2YWxpZCBzeW1ib2wgbmFtZSIpOwppZighKCFoLmxlbmd0aHx8Mj5oLmxlbmd0aHx8KGE9dGhpcy5nZXRMb2NhbFhZKGEpLGU9YVswXSxnPWFbMV0saXNOYU4oZSl8fGlzTmFOKGcpKSkpe3RoaXMuY2FudmFzLmxpbmVDYXA9InJvdW5kIjt0aGlzLmNhbnZhcy5saW5lSm9pbj0icm91bmQiO3RoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5oaXRDb250ZXh0LmxpbmVDYXA9InJvdW5kIix0aGlzLmhpdENvbnRleHQubGluZUpvaW49InJvdW5kIik7aWYoYi5ncmFwaGljTmFtZSBpbiB0aGlzLmNhY2hlZFN5bWJvbEJvdW5kcylkPXRoaXMuY2FjaGVkU3ltYm9sQm91bmRzW2IuZ3JhcGhpY05hbWVdO2Vsc2V7ZD1uZXcgT3BlbkxheWVycy5Cb3VuZHM7Zm9yKGE9MDthPGgubGVuZ3RoO2ErPTIpZC5leHRlbmQobmV3IE9wZW5MYXllcnMuTG9uTGF0KGhbYV0saFthKzFdKSk7dGhpcy5jYWNoZWRTeW1ib2xCb3VuZHNbYi5ncmFwaGljTmFtZV09ZH10aGlzLmNhbnZhcy5zYXZlKCk7dGhpcy5oaXREZXRlY3Rpb24mJnRoaXMuaGl0Q29udGV4dC5zYXZlKCk7CnRoaXMuY2FudmFzLnRyYW5zbGF0ZShlLGcpO3RoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQudHJhbnNsYXRlKGUsZyk7YT1mKmIucm90YXRpb247aXNOYU4oYSl8fCh0aGlzLmNhbnZhcy5yb3RhdGUoYSksdGhpcy5oaXREZXRlY3Rpb24mJnRoaXMuaGl0Q29udGV4dC5yb3RhdGUoYSkpO2Y9MipiLnBvaW50UmFkaXVzL01hdGgubWF4KGQuZ2V0V2lkdGgoKSxkLmdldEhlaWdodCgpKTt0aGlzLmNhbnZhcy5zY2FsZShmLGYpO3RoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQuc2NhbGUoZixmKTthPWQuZ2V0Q2VudGVyTG9uTGF0KCkubG9uO2Q9ZC5nZXRDZW50ZXJMb25MYXQoKS5sYXQ7dGhpcy5jYW52YXMudHJhbnNsYXRlKC1hLC1kKTt0aGlzLmhpdERldGVjdGlvbiYmdGhpcy5oaXRDb250ZXh0LnRyYW5zbGF0ZSgtYSwtZCk7Zz1iLnN0cm9rZVdpZHRoO2Iuc3Ryb2tlV2lkdGg9Zy9mO2lmKCExIT09Yi5maWxsKXt0aGlzLnNldENhbnZhc1N0eWxlKCJmaWxsIiwKYik7dGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7Zm9yKGE9MDthPGgubGVuZ3RoO2ErPTIpZD1oW2FdLGU9aFthKzFdLDA9PWEmJnRoaXMuY2FudmFzLm1vdmVUbyhkLGUpLHRoaXMuY2FudmFzLmxpbmVUbyhkLGUpO3RoaXMuY2FudmFzLmNsb3NlUGF0aCgpO3RoaXMuY2FudmFzLmZpbGwoKTtpZih0aGlzLmhpdERldGVjdGlvbil7dGhpcy5zZXRIaXRDb250ZXh0U3R5bGUoImZpbGwiLGMsYik7dGhpcy5oaXRDb250ZXh0LmJlZ2luUGF0aCgpO2ZvcihhPTA7YTxoLmxlbmd0aDthKz0yKWQ9aFthXSxlPWhbYSsxXSwwPT1hJiZ0aGlzLmNhbnZhcy5tb3ZlVG8oZCxlKSx0aGlzLmhpdENvbnRleHQubGluZVRvKGQsZSk7dGhpcy5oaXRDb250ZXh0LmNsb3NlUGF0aCgpO3RoaXMuaGl0Q29udGV4dC5maWxsKCl9fWlmKCExIT09Yi5zdHJva2Upe3RoaXMuc2V0Q2FudmFzU3R5bGUoInN0cm9rZSIsYik7dGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7Zm9yKGE9MDthPGgubGVuZ3RoO2ErPTIpZD1oW2FdLAplPWhbYSsxXSwwPT1hJiZ0aGlzLmNhbnZhcy5tb3ZlVG8oZCxlKSx0aGlzLmNhbnZhcy5saW5lVG8oZCxlKTt0aGlzLmNhbnZhcy5jbG9zZVBhdGgoKTt0aGlzLmNhbnZhcy5zdHJva2UoKTtpZih0aGlzLmhpdERldGVjdGlvbil7dGhpcy5zZXRIaXRDb250ZXh0U3R5bGUoInN0cm9rZSIsYyxiLGYpO3RoaXMuaGl0Q29udGV4dC5iZWdpblBhdGgoKTtmb3IoYT0wO2E8aC5sZW5ndGg7YSs9MilkPWhbYV0sZT1oW2ErMV0sMD09YSYmdGhpcy5oaXRDb250ZXh0Lm1vdmVUbyhkLGUpLHRoaXMuaGl0Q29udGV4dC5saW5lVG8oZCxlKTt0aGlzLmhpdENvbnRleHQuY2xvc2VQYXRoKCk7dGhpcy5oaXRDb250ZXh0LnN0cm9rZSgpfX1iLnN0cm9rZVdpZHRoPWc7dGhpcy5jYW52YXMucmVzdG9yZSgpO3RoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQucmVzdG9yZSgpO3RoaXMuc2V0Q2FudmFzU3R5bGUoInJlc2V0Iil9fSxzZXRDYW52YXNTdHlsZTpmdW5jdGlvbihhLGIpeyJmaWxsIj09PQphPyh0aGlzLmNhbnZhcy5nbG9iYWxBbHBoYT1iLmZpbGxPcGFjaXR5LHRoaXMuY2FudmFzLmZpbGxTdHlsZT1iLmZpbGxDb2xvcik6InN0cm9rZSI9PT1hPyh0aGlzLmNhbnZhcy5nbG9iYWxBbHBoYT1iLnN0cm9rZU9wYWNpdHksdGhpcy5jYW52YXMuc3Ryb2tlU3R5bGU9Yi5zdHJva2VDb2xvcix0aGlzLmNhbnZhcy5saW5lV2lkdGg9Yi5zdHJva2VXaWR0aCk6KHRoaXMuY2FudmFzLmdsb2JhbEFscGhhPTAsdGhpcy5jYW52YXMubGluZVdpZHRoPTEpfSxmZWF0dXJlSWRUb0hleDpmdW5jdGlvbihhKXthPU51bWJlcihhLnNwbGl0KCJfIikucG9wKCkpKzE7MTY3NzcyMTY8PWEmJih0aGlzLmhpdE92ZXJmbG93PWEtMTY3NzcyMTUsYT1hJTE2Nzc3MjE2KzEpO2E9IjAwMDAwMCIrYS50b1N0cmluZygxNik7dmFyIGI9YS5sZW5ndGg7cmV0dXJuIGE9IiMiK2Euc3Vic3RyaW5nKGItNixiKX0sc2V0SGl0Q29udGV4dFN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2I9dGhpcy5mZWF0dXJlSWRUb0hleChiKTsKImZpbGwiPT1hPyh0aGlzLmhpdENvbnRleHQuZ2xvYmFsQWxwaGE9MSx0aGlzLmhpdENvbnRleHQuZmlsbFN0eWxlPWIpOiJzdHJva2UiPT1hPyh0aGlzLmhpdENvbnRleHQuZ2xvYmFsQWxwaGE9MSx0aGlzLmhpdENvbnRleHQuc3Ryb2tlU3R5bGU9YiwidW5kZWZpbmVkIj09PXR5cGVvZiBkP3RoaXMuaGl0Q29udGV4dC5saW5lV2lkdGg9Yy5zdHJva2VXaWR0aCsyOmlzTmFOKGQpfHwodGhpcy5oaXRDb250ZXh0LmxpbmVXaWR0aD1jLnN0cm9rZVdpZHRoKzIvZCkpOih0aGlzLmhpdENvbnRleHQuZ2xvYmFsQWxwaGE9MCx0aGlzLmhpdENvbnRleHQubGluZVdpZHRoPTEpfSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiLGMpe2lmKCExIT09Yi5ncmFwaGljKWlmKGIuZXh0ZXJuYWxHcmFwaGljKXRoaXMuZHJhd0V4dGVybmFsR3JhcGhpYyhhLGIsYyk7ZWxzZSBpZihiLmdyYXBoaWNOYW1lJiYiY2lyY2xlIiE9Yi5ncmFwaGljTmFtZSl0aGlzLmRyYXdOYW1lZFN5bWJvbChhLGIsYyk7ZWxzZXt2YXIgZD0KdGhpcy5nZXRMb2NhbFhZKGEpO2E9ZFswXTtkPWRbMV07aWYoIWlzTmFOKGEpJiYhaXNOYU4oZCkpe3ZhciBlPTIqTWF0aC5QSSxmPWIucG9pbnRSYWRpdXM7ITEhPT1iLmZpbGwmJih0aGlzLnNldENhbnZhc1N0eWxlKCJmaWxsIixiKSx0aGlzLmNhbnZhcy5iZWdpblBhdGgoKSx0aGlzLmNhbnZhcy5hcmMoYSxkLGYsMCxlLCEwKSx0aGlzLmNhbnZhcy5maWxsKCksdGhpcy5oaXREZXRlY3Rpb24mJih0aGlzLnNldEhpdENvbnRleHRTdHlsZSgiZmlsbCIsYyxiKSx0aGlzLmhpdENvbnRleHQuYmVnaW5QYXRoKCksdGhpcy5oaXRDb250ZXh0LmFyYyhhLGQsZiwwLGUsITApLHRoaXMuaGl0Q29udGV4dC5maWxsKCkpKTshMSE9PWIuc3Ryb2tlJiYodGhpcy5zZXRDYW52YXNTdHlsZSgic3Ryb2tlIixiKSx0aGlzLmNhbnZhcy5iZWdpblBhdGgoKSx0aGlzLmNhbnZhcy5hcmMoYSxkLGYsMCxlLCEwKSx0aGlzLmNhbnZhcy5zdHJva2UoKSx0aGlzLmhpdERldGVjdGlvbiYmKHRoaXMuc2V0SGl0Q29udGV4dFN0eWxlKCJzdHJva2UiLApjLGIpLHRoaXMuaGl0Q29udGV4dC5iZWdpblBhdGgoKSx0aGlzLmhpdENvbnRleHQuYXJjKGEsZCxmLDAsZSwhMCksdGhpcy5oaXRDb250ZXh0LnN0cm9rZSgpKSx0aGlzLnNldENhbnZhc1N0eWxlKCJyZXNldCIpKX19fSxkcmF3TGluZVN0cmluZzpmdW5jdGlvbihhLGIsYyl7Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7ZmlsbDohMX0sYik7dGhpcy5kcmF3TGluZWFyUmluZyhhLGIsYyl9LGRyYXdMaW5lYXJSaW5nOmZ1bmN0aW9uKGEsYixjKXshMSE9PWIuZmlsbCYmKHRoaXMuc2V0Q2FudmFzU3R5bGUoImZpbGwiLGIpLHRoaXMucmVuZGVyUGF0aCh0aGlzLmNhbnZhcyxhLGIsYywiZmlsbCIpLHRoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5zZXRIaXRDb250ZXh0U3R5bGUoImZpbGwiLGMsYiksdGhpcy5yZW5kZXJQYXRoKHRoaXMuaGl0Q29udGV4dCxhLGIsYywiZmlsbCIpKSk7ITEhPT1iLnN0cm9rZSYmKHRoaXMuc2V0Q2FudmFzU3R5bGUoInN0cm9rZSIsYiksdGhpcy5yZW5kZXJQYXRoKHRoaXMuY2FudmFzLAphLGIsYywic3Ryb2tlIiksdGhpcy5oaXREZXRlY3Rpb24mJih0aGlzLnNldEhpdENvbnRleHRTdHlsZSgic3Ryb2tlIixjLGIpLHRoaXMucmVuZGVyUGF0aCh0aGlzLmhpdENvbnRleHQsYSxiLGMsInN0cm9rZSIpKSk7dGhpcy5zZXRDYW52YXNTdHlsZSgicmVzZXQiKX0scmVuZGVyUGF0aDpmdW5jdGlvbihhLGIsYyxkLGUpe2I9Yi5jb21wb25lbnRzO2M9Yi5sZW5ndGg7YS5iZWdpblBhdGgoKTtkPXRoaXMuZ2V0TG9jYWxYWShiWzBdKTt2YXIgZj1kWzFdO2lmKCFpc05hTihkWzBdKSYmIWlzTmFOKGYpKXthLm1vdmVUbyhkWzBdLGRbMV0pO2ZvcihkPTE7ZDxjOysrZClmPXRoaXMuZ2V0TG9jYWxYWShiW2RdKSxhLmxpbmVUbyhmWzBdLGZbMV0pOyJmaWxsIj09PWU/YS5maWxsKCk6YS5zdHJva2UoKX19LGRyYXdQb2x5Z29uOmZ1bmN0aW9uKGEsYixjKXthPWEuY29tcG9uZW50czt2YXIgZD1hLmxlbmd0aDt0aGlzLmRyYXdMaW5lYXJSaW5nKGFbMF0sYixjKTtmb3IodmFyIGU9MTtlPApkOysrZSl0aGlzLmNhbnZhcy5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249ImRlc3RpbmF0aW9uLW91dCIsdGhpcy5oaXREZXRlY3Rpb24mJih0aGlzLmhpdENvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJkZXN0aW5hdGlvbi1vdXQiKSx0aGlzLmRyYXdMaW5lYXJSaW5nKGFbZV0sT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe3N0cm9rZTohMSxmaWxsT3BhY2l0eToxfSxiKSxjKSx0aGlzLmNhbnZhcy5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249InNvdXJjZS1vdmVyIix0aGlzLmhpdERldGVjdGlvbiYmKHRoaXMuaGl0Q29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249InNvdXJjZS1vdmVyIiksdGhpcy5kcmF3TGluZWFyUmluZyhhW2VdLE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtmaWxsOiExfSxiKSxjKX0sZHJhd1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExvY2FsWFkoYSk7dGhpcy5zZXRDYW52YXNTdHlsZSgicmVzZXQiKTsKdGhpcy5jYW52YXMuZmlsbFN0eWxlPWIuZm9udENvbG9yO3RoaXMuY2FudmFzLmdsb2JhbEFscGhhPWIuZm9udE9wYWNpdHl8fDE7dmFyIGQ9W2IuZm9udFN0eWxlP2IuZm9udFN0eWxlOiJub3JtYWwiLCJub3JtYWwiLGIuZm9udFdlaWdodD9iLmZvbnRXZWlnaHQ6Im5vcm1hbCIsYi5mb250U2l6ZT9iLmZvbnRTaXplOiIxZW0iLGIuZm9udEZhbWlseT9iLmZvbnRGYW1pbHk6InNhbnMtc2VyaWYiXS5qb2luKCIgIiksZT1iLmxhYmVsLnNwbGl0KCJcbiIpLGY9ZS5sZW5ndGg7aWYodGhpcy5jYW52YXMuZmlsbFRleHQpe3RoaXMuY2FudmFzLmZvbnQ9ZDt0aGlzLmNhbnZhcy50ZXh0QWxpZ249T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuTEFCRUxfQUxJR05bYi5sYWJlbEFsaWduWzBdXXx8ImNlbnRlciI7dGhpcy5jYW52YXMudGV4dEJhc2VsaW5lPU9wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzLkxBQkVMX0FMSUdOW2IubGFiZWxBbGlnblsxXV18fCJtaWRkbGUiO3ZhciBnPU9wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzLkxBQkVMX0ZBQ1RPUltiLmxhYmVsQWxpZ25bMV1dOwpudWxsPT1nJiYoZz0tMC41KTtkPXRoaXMuY2FudmFzLm1lYXN1cmVUZXh0KCJNZyIpLmhlaWdodHx8dGhpcy5jYW52YXMubWVhc3VyZVRleHQoInh4Iikud2lkdGg7Y1sxXSs9ZCpnKihmLTEpO2ZvcihnPTA7ZzxmO2crKyliLmxhYmVsT3V0bGluZVdpZHRoJiYodGhpcy5jYW52YXMuc2F2ZSgpLHRoaXMuY2FudmFzLmdsb2JhbEFscGhhPWIubGFiZWxPdXRsaW5lT3BhY2l0eXx8Yi5mb250T3BhY2l0eXx8MSx0aGlzLmNhbnZhcy5zdHJva2VTdHlsZT1iLmxhYmVsT3V0bGluZUNvbG9yLHRoaXMuY2FudmFzLmxpbmVXaWR0aD1iLmxhYmVsT3V0bGluZVdpZHRoLHRoaXMuY2FudmFzLnN0cm9rZVRleHQoZVtnXSxjWzBdLGNbMV0rZCpnKzEpLHRoaXMuY2FudmFzLnJlc3RvcmUoKSksdGhpcy5jYW52YXMuZmlsbFRleHQoZVtnXSxjWzBdLGNbMV0rZCpnKX1lbHNlIGlmKHRoaXMuY2FudmFzLm1vekRyYXdUZXh0KXt0aGlzLmNhbnZhcy5tb3pUZXh0U3R5bGU9ZDt2YXIgaD1PcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcy5MQUJFTF9GQUNUT1JbYi5sYWJlbEFsaWduWzBdXTsKbnVsbD09aCYmKGg9LTAuNSk7Zz1PcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcy5MQUJFTF9GQUNUT1JbYi5sYWJlbEFsaWduWzFdXTtudWxsPT1nJiYoZz0tMC41KTtkPXRoaXMuY2FudmFzLm1vek1lYXN1cmVUZXh0KCJ4eCIpO2NbMV0rPWQqKDErZypmKTtmb3IoZz0wO2c8ZjtnKyspe3ZhciBrPWNbMF0raCp0aGlzLmNhbnZhcy5tb3pNZWFzdXJlVGV4dChlW2ddKSxsPWNbMV0rZypkO3RoaXMuY2FudmFzLnRyYW5zbGF0ZShrLGwpO3RoaXMuY2FudmFzLm1vekRyYXdUZXh0KGVbZ10pO3RoaXMuY2FudmFzLnRyYW5zbGF0ZSgtaywtbCl9fXRoaXMuc2V0Q2FudmFzU3R5bGUoInJlc2V0Iil9LGdldExvY2FsWFk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRSZXNvbHV0aW9uKCksYz10aGlzLmV4dGVudDtyZXR1cm5bKGEueC10aGlzLmZlYXR1cmVEeCkvYistYy5sZWZ0L2IsYy50b3AvYi1hLnkvYl19LGNsZWFyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yb290LmhlaWdodCxiPXRoaXMucm9vdC53aWR0aDsKdGhpcy5jYW52YXMuY2xlYXJSZWN0KDAsMCxiLGEpO3RoaXMuZmVhdHVyZXM9e307dGhpcy5oaXREZXRlY3Rpb24mJnRoaXMuaGl0Q29udGV4dC5jbGVhclJlY3QoMCwwLGIsYSl9LGdldEZlYXR1cmVJZEZyb21FdmVudDpmdW5jdGlvbihhKXt2YXIgYjtpZih0aGlzLmhpdERldGVjdGlvbiYmIm5vbmUiIT09dGhpcy5yb290LnN0eWxlLmRpc3BsYXkmJiF0aGlzLm1hcC5kcmFnZ2luZyYmKGE9YS54eSxhPXRoaXMuaGl0Q29udGV4dC5nZXRJbWFnZURhdGEoYS54fDAsYS55fDAsMSwxKS5kYXRhLDI1NT09PWFbM10mJihhPWFbMl0rMjU2KihhWzFdKzI1NiphWzBdKSkpKXthPSJPcGVuTGF5ZXJzX0ZlYXR1cmVfVmVjdG9yXyIrKGEtMSt0aGlzLmhpdE92ZXJmbG93KTt0cnl7Yj10aGlzLmZlYXR1cmVzW2FdWzBdfWNhdGNoKGMpe319cmV0dXJuIGJ9LGVyYXNlRmVhdHVyZXM6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDsrK2IpZGVsZXRlIHRoaXMuZmVhdHVyZXNbYVtiXS5pZF07CnRoaXMucmVkcmF3KCl9LHJlZHJhdzpmdW5jdGlvbigpe2lmKCF0aGlzLmxvY2tlZCl7dmFyIGE9dGhpcy5yb290LmhlaWdodCxiPXRoaXMucm9vdC53aWR0aDt0aGlzLmNhbnZhcy5jbGVhclJlY3QoMCwwLGIsYSk7dGhpcy5oaXREZXRlY3Rpb24mJnRoaXMuaGl0Q29udGV4dC5jbGVhclJlY3QoMCwwLGIsYSk7dmFyIGE9W10sYyxkLGU9dGhpcy5tYXAuYmFzZUxheWVyJiZ0aGlzLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lJiZ0aGlzLm1hcC5nZXRNYXhFeHRlbnQoKSxmO2ZvcihmIGluIHRoaXMuZmVhdHVyZXMpdGhpcy5mZWF0dXJlcy5oYXNPd25Qcm9wZXJ0eShmKSYmKGI9dGhpcy5mZWF0dXJlc1tmXVswXSxjPWIuZ2VvbWV0cnksdGhpcy5jYWxjdWxhdGVGZWF0dXJlRHgoYy5nZXRCb3VuZHMoKSxlKSxkPXRoaXMuZmVhdHVyZXNbZl1bMV0sdGhpcy5kcmF3R2VvbWV0cnkoYyxkLGIuaWQpLGQubGFiZWwmJmEucHVzaChbYixkXSkpO2I9MDtmb3IoYz1hLmxlbmd0aDtiPGM7KytiKWY9CmFbYl0sdGhpcy5kcmF3VGV4dChmWzBdLmdlb21ldHJ5LmdldENlbnRyb2lkKCksZlsxXSl9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcyJ9KTtPcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcy5MQUJFTF9BTElHTj17bDoibGVmdCIscjoicmlnaHQiLHQ6InRvcCIsYjoiYm90dG9tIn07T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuTEFCRUxfRkFDVE9SPXtsOjAscjotMSx0OjAsYjotMX07T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuZHJhd0ltYWdlU2NhbGVGYWN0b3I9bnVsbDtPcGVuTGF5ZXJzLkhhbmRsZXI9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxjb250cm9sOm51bGwsbWFwOm51bGwsa2V5TWFzazpudWxsLGFjdGl2ZTohMSxldnQ6bnVsbCx0b3VjaDohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYyk7dGhpcy5jb250cm9sPWE7dGhpcy5jYWxsYmFja3M9YjsoYT10aGlzLm1hcHx8YS5tYXApJiZ0aGlzLnNldE1hcChhKTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe3RoaXMubWFwPWF9LGNoZWNrTW9kaWZpZXJzOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT10aGlzLmtleU1hc2s/ITA6KChhLnNoaWZ0S2V5P09wZW5MYXllcnMuSGFuZGxlci5NT0RfU0hJRlQ6MCl8KGEuY3RybEtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0NUUkw6MCl8KGEuYWx0S2V5P09wZW5MYXllcnMuSGFuZGxlci5NT0RfQUxUOgowKXwoYS5tZXRhS2V5P09wZW5MYXllcnMuSGFuZGxlci5NT0RfTUVUQTowKSk9PXRoaXMua2V5TWFza30sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLmFjdGl2ZSlyZXR1cm4hMTtmb3IodmFyIGE9T3BlbkxheWVycy5FdmVudHMucHJvdG90eXBlLkJST1dTRVJfRVZFTlRTLGI9MCxjPWEubGVuZ3RoO2I8YztiKyspdGhpc1thW2JdXSYmdGhpcy5yZWdpc3RlcihhW2JdLHRoaXNbYVtiXV0pO3JldHVybiB0aGlzLmFjdGl2ZT0hMH0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmFjdGl2ZSlyZXR1cm4hMTtmb3IodmFyIGE9T3BlbkxheWVycy5FdmVudHMucHJvdG90eXBlLkJST1dTRVJfRVZFTlRTLGI9MCxjPWEubGVuZ3RoO2I8YztiKyspdGhpc1thW2JdXSYmdGhpcy51bnJlZ2lzdGVyKGFbYl0sdGhpc1thW2JdXSk7dGhpcy5hY3RpdmU9dGhpcy50b3VjaD0hMTtyZXR1cm4hMH0sc3RhcnRUb3VjaDpmdW5jdGlvbigpe2lmKCF0aGlzLnRvdWNoKXt0aGlzLnRvdWNoPSEwOwpmb3IodmFyIGE9Im1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBjbGljayBkYmxjbGljayBtb3VzZW91dCIuc3BsaXQoIiAiKSxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXNbYVtiXV0mJnRoaXMudW5yZWdpc3RlcihhW2JdLHRoaXNbYVtiXV0pfX0sY2FsbGJhY2s6ZnVuY3Rpb24oYSxiKXthJiZ0aGlzLmNhbGxiYWNrc1thXSYmdGhpcy5jYWxsYmFja3NbYV0uYXBwbHkodGhpcy5jb250cm9sLGIpfSxyZWdpc3RlcjpmdW5jdGlvbihhLGIpe3RoaXMubWFwLmV2ZW50cy5yZWdpc3RlclByaW9yaXR5KGEsdGhpcyxiKTt0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXJQcmlvcml0eShhLHRoaXMsdGhpcy5zZXRFdmVudCl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLm1hcC5ldmVudHMudW5yZWdpc3RlcihhLHRoaXMsYik7dGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoYSx0aGlzLHRoaXMuc2V0RXZlbnQpfSxzZXRFdmVudDpmdW5jdGlvbihhKXt0aGlzLmV2dD1hO3JldHVybiEwfSwKZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpO3RoaXMuY29udHJvbD10aGlzLm1hcD1udWxsfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIifSk7T3BlbkxheWVycy5IYW5kbGVyLk1PRF9OT05FPTA7T3BlbkxheWVycy5IYW5kbGVyLk1PRF9TSElGVD0xO09wZW5MYXllcnMuSGFuZGxlci5NT0RfQ1RSTD0yO09wZW5MYXllcnMuSGFuZGxlci5NT0RfQUxUPTQ7T3BlbkxheWVycy5IYW5kbGVyLk1PRF9NRVRBPTg7T3BlbkxheWVycy5IYW5kbGVyLkRyYWc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIse3N0YXJ0ZWQ6ITEsc3RvcERvd246ITAsZHJhZ2dpbmc6ITEsbGFzdDpudWxsLHN0YXJ0Om51bGwsbGFzdE1vdmVFdnQ6bnVsbCxvbGRPbnNlbGVjdHN0YXJ0Om51bGwsaW50ZXJ2YWw6MCx0aW1lb3V0SWQ6bnVsbCxkb2N1bWVudERyYWc6ITEsZG9jdW1lbnRFdmVudHM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCEwPT09dGhpcy5kb2N1bWVudERyYWcpe3ZhciBkPXRoaXM7dGhpcy5fZG9jTW92ZT1mdW5jdGlvbihhKXtkLm1vdXNlbW92ZSh7eHk6e3g6YS5jbGllbnRYLHk6YS5jbGllbnRZfSxlbGVtZW50OmRvY3VtZW50fSl9O3RoaXMuX2RvY1VwPWZ1bmN0aW9uKGEpe2QubW91c2V1cCh7eHk6e3g6YS5jbGllbnRYLHk6YS5jbGllbnRZfX0pfX19LApkcmFnc3RhcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9ITA7dGhpcy5kcmFnZ2luZz0hMTt0aGlzLmNoZWNrTW9kaWZpZXJzKGEpJiYoT3BlbkxheWVycy5FdmVudC5pc0xlZnRDbGljayhhKXx8T3BlbkxheWVycy5FdmVudC5pc1NpbmdsZVRvdWNoKGEpKT8odGhpcy5zdGFydGVkPSEwLHRoaXMubGFzdD10aGlzLnN0YXJ0PWEueHksT3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbERyYWdEb3duIiksdGhpcy5kb3duKGEpLHRoaXMuY2FsbGJhY2soImRvd24iLFthLnh5XSksT3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKSx0aGlzLm9sZE9uc2VsZWN0c3RhcnR8fCh0aGlzLm9sZE9uc2VsZWN0c3RhcnQ9ZG9jdW1lbnQub25zZWxlY3RzdGFydD9kb2N1bWVudC5vbnNlbGVjdHN0YXJ0Ok9wZW5MYXllcnMuRnVuY3Rpb24uVHJ1ZSksZG9jdW1lbnQub25zZWxlY3RzdGFydD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLkZhbHNlLGI9IXRoaXMuc3RvcERvd24pOgoodGhpcy5zdGFydGVkPSExLHRoaXMubGFzdD10aGlzLnN0YXJ0PW51bGwpO3JldHVybiBifSxkcmFnbW92ZTpmdW5jdGlvbihhKXt0aGlzLmxhc3RNb3ZlRXZ0PWE7IXRoaXMuc3RhcnRlZHx8KHRoaXMudGltZW91dElkfHxhLnh5Lng9PXRoaXMubGFzdC54JiZhLnh5Lnk9PXRoaXMubGFzdC55KXx8KCEwPT09dGhpcy5kb2N1bWVudERyYWcmJnRoaXMuZG9jdW1lbnRFdmVudHMmJihhLmVsZW1lbnQ9PT1kb2N1bWVudD8odGhpcy5hZGp1c3RYWShhKSx0aGlzLnNldEV2ZW50KGEpKTp0aGlzLnJlbW92ZURvY3VtZW50RXZlbnRzKCkpLDA8dGhpcy5pbnRlcnZhbCYmKHRoaXMudGltZW91dElkPXNldFRpbWVvdXQoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucmVtb3ZlVGltZW91dCx0aGlzKSx0aGlzLmludGVydmFsKSksdGhpcy5kcmFnZ2luZz0hMCx0aGlzLm1vdmUoYSksdGhpcy5jYWxsYmFjaygibW92ZSIsW2EueHldKSx0aGlzLm9sZE9uc2VsZWN0c3RhcnR8fCh0aGlzLm9sZE9uc2VsZWN0c3RhcnQ9CmRvY3VtZW50Lm9uc2VsZWN0c3RhcnQsZG9jdW1lbnQub25zZWxlY3RzdGFydD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLkZhbHNlKSx0aGlzLmxhc3Q9YS54eSk7cmV0dXJuITB9LGRyYWdlbmQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdGFydGVkKXshMD09PXRoaXMuZG9jdW1lbnREcmFnJiZ0aGlzLmRvY3VtZW50RXZlbnRzJiYodGhpcy5hZGp1c3RYWShhKSx0aGlzLnJlbW92ZURvY3VtZW50RXZlbnRzKCkpO3ZhciBiPXRoaXMuc3RhcnQhPXRoaXMubGFzdDt0aGlzLmRyYWdnaW5nPXRoaXMuc3RhcnRlZD0hMTtPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sRHJhZ0Rvd24iKTt0aGlzLnVwKGEpO3RoaXMuY2FsbGJhY2soInVwIixbYS54eV0pO2ImJnRoaXMuY2FsbGJhY2soImRvbmUiLFthLnh5XSk7ZG9jdW1lbnQub25zZWxlY3RzdGFydD10aGlzLm9sZE9uc2VsZWN0c3RhcnR9cmV0dXJuITB9LGRvd246ZnVuY3Rpb24oYSl7fSxtb3ZlOmZ1bmN0aW9uKGEpe30sCnVwOmZ1bmN0aW9uKGEpe30sb3V0OmZ1bmN0aW9uKGEpe30sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRyYWdzdGFydChhKX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0VG91Y2goKTtyZXR1cm4gdGhpcy5kcmFnc3RhcnQoYSl9LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kcmFnbW92ZShhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRyYWdtb3ZlKGEpfSxyZW1vdmVUaW1lb3V0OmZ1bmN0aW9uKCl7dGhpcy50aW1lb3V0SWQ9bnVsbDt0aGlzLmRyYWdnaW5nJiZ0aGlzLm1vdXNlbW92ZSh0aGlzLmxhc3RNb3ZlRXZ0KX0sbW91c2V1cDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kcmFnZW5kKGEpfSx0b3VjaGVuZDpmdW5jdGlvbihhKXthLnh5PXRoaXMubGFzdDtyZXR1cm4gdGhpcy5kcmFnZW5kKGEpfSxtb3VzZW91dDpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXJ0ZWQmJk9wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQoYSwKdGhpcy5tYXAudmlld1BvcnREaXYpKWlmKCEwPT09dGhpcy5kb2N1bWVudERyYWcpdGhpcy5hZGREb2N1bWVudEV2ZW50cygpO2Vsc2V7dmFyIGI9dGhpcy5zdGFydCE9dGhpcy5sYXN0O3RoaXMuZHJhZ2dpbmc9dGhpcy5zdGFydGVkPSExO09wZW5MYXllcnMuRWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xEcmFnRG93biIpO3RoaXMub3V0KGEpO3RoaXMuY2FsbGJhY2soIm91dCIsW10pO2ImJnRoaXMuY2FsbGJhY2soImRvbmUiLFthLnh5XSk7ZG9jdW1lbnQub25zZWxlY3RzdGFydCYmKGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQ9dGhpcy5vbGRPbnNlbGVjdHN0YXJ0KX1yZXR1cm4hMH0sY2xpY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhcnQ9PXRoaXMubGFzdH0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMuZHJhZ2dpbmc9CiExLGE9ITApO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMuZHJhZ2dpbmc9dGhpcy5zdGFydGVkPSExLHRoaXMubGFzdD10aGlzLnN0YXJ0PW51bGwsYT0hMCxPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sRHJhZ0Rvd24iKSk7cmV0dXJuIGF9LGFkanVzdFhZOmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb24odGhpcy5tYXAudmlld1BvcnREaXYpO2EueHkueC09YlswXTthLnh5LnktPWJbMV19LGFkZERvY3VtZW50RXZlbnRzOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKGRvY3VtZW50LmJvZHksIm9sRHJhZ0Rvd24iKTt0aGlzLmRvY3VtZW50RXZlbnRzPSEwO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShkb2N1bWVudCwibW91c2Vtb3ZlIiwKdGhpcy5fZG9jTW92ZSk7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGRvY3VtZW50LCJtb3VzZXVwIix0aGlzLl9kb2NVcCl9LHJlbW92ZURvY3VtZW50RXZlbnRzOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKGRvY3VtZW50LmJvZHksIm9sRHJhZ0Rvd24iKTt0aGlzLmRvY3VtZW50RXZlbnRzPSExO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyhkb2N1bWVudCwibW91c2Vtb3ZlIix0aGlzLl9kb2NNb3ZlKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcoZG9jdW1lbnQsIm1vdXNldXAiLHRoaXMuX2RvY1VwKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLkRyYWcifSk7T3BlbkxheWVycy5IYW5kbGVyLktleWJvYXJkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtLRVlfRVZFTlRTOlsia2V5ZG93biIsImtleXVwIl0sZXZlbnRMaXN0ZW5lcjpudWxsLG9ic2VydmVFbGVtZW50Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmV2ZW50TGlzdGVuZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kQXNFdmVudExpc3RlbmVyKHRoaXMuaGFuZGxlS2V5RXZlbnQsdGhpcyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmV2ZW50TGlzdGVuZXI9bnVsbDtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKE9wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcywKYXJndW1lbnRzKSl7dGhpcy5vYnNlcnZlRWxlbWVudD10aGlzLm9ic2VydmVFbGVtZW50fHxkb2N1bWVudDtmb3IodmFyIGE9MCxiPXRoaXMuS0VZX0VWRU5UUy5sZW5ndGg7YTxiO2ErKylPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUodGhpcy5vYnNlcnZlRWxlbWVudCx0aGlzLktFWV9FVkVOVFNbYV0sdGhpcy5ldmVudExpc3RlbmVyKTtyZXR1cm4hMH1yZXR1cm4hMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO2lmKE9wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpe2Zvcih2YXIgYT0wLGI9dGhpcy5LRVlfRVZFTlRTLmxlbmd0aDthPGI7YSsrKU9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh0aGlzLm9ic2VydmVFbGVtZW50LHRoaXMuS0VZX0VWRU5UU1thXSx0aGlzLmV2ZW50TGlzdGVuZXIpO2E9ITB9cmV0dXJuIGF9LGhhbmRsZUtleUV2ZW50OmZ1bmN0aW9uKGEpe3RoaXMuY2hlY2tNb2RpZmllcnMoYSkmJgp0aGlzLmNhbGxiYWNrKGEudHlwZSxbYV0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuS2V5Ym9hcmQifSk7T3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2RvY3VtZW50RHJhZzohMSxnZW9tZXRyeVR5cGVzOm51bGwsY2xpY2tvdXQ6ITAsdG9nZ2xlOiEwLHN0YW5kYWxvbmU6ITEsbGF5ZXI6bnVsbCxmZWF0dXJlOm51bGwsdmVydGV4Om51bGwsdmVydGljZXM6bnVsbCx2aXJ0dWFsVmVydGljZXM6bnVsbCxoYW5kbGVyczpudWxsLGRlbGV0ZUNvZGVzOm51bGwsdmlydHVhbFN0eWxlOm51bGwsdmVydGV4UmVuZGVySW50ZW50Om51bGwsbW9kZTpudWxsLGNyZWF0ZVZlcnRpY2VzOiEwLG1vZGlmaWVkOiExLHJhZGl1c0hhbmRsZTpudWxsLGRyYWdIYW5kbGU6bnVsbCxvbk1vZGlmaWNhdGlvblN0YXJ0OmZ1bmN0aW9uKCl7fSxvbk1vZGlmaWNhdGlvbjpmdW5jdGlvbigpe30sb25Nb2RpZmljYXRpb25FbmQ6ZnVuY3Rpb24oKXt9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O3RoaXMubGF5ZXI9YTt0aGlzLnZlcnRpY2VzPQpbXTt0aGlzLnZpcnR1YWxWZXJ0aWNlcz1bXTt0aGlzLnZpcnR1YWxTdHlsZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMubGF5ZXIuc3R5bGV8fHRoaXMubGF5ZXIuc3R5bGVNYXAuY3JlYXRlU3ltYm9saXplcihudWxsLGIudmVydGV4UmVuZGVySW50ZW50KSk7dGhpcy52aXJ0dWFsU3R5bGUuZmlsbE9wYWNpdHk9MC4zO3RoaXMudmlydHVhbFN0eWxlLnN0cm9rZU9wYWNpdHk9MC4zO3RoaXMuZGVsZXRlQ29kZXM9WzQ2LDY4XTt0aGlzLm1vZGU9T3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUkVTSEFQRTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYl0pO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KHRoaXMuZGVsZXRlQ29kZXMpfHwodGhpcy5kZWxldGVDb2Rlcz1bdGhpcy5kZWxldGVDb2Rlc10pO3ZhciBjPXtkb2N1bWVudERyYWc6dGhpcy5kb2N1bWVudERyYWcsc3RvcERvd246ITF9O3RoaXMuaGFuZGxlcnM9CntrZXlib2FyZDpuZXcgT3BlbkxheWVycy5IYW5kbGVyLktleWJvYXJkKHRoaXMse2tleWRvd246dGhpcy5oYW5kbGVLZXlwcmVzc30pLGRyYWc6bmV3IE9wZW5MYXllcnMuSGFuZGxlci5EcmFnKHRoaXMse2Rvd246ZnVuY3Rpb24oYSl7dGhpcy52ZXJ0ZXg9bnVsbDsoYT10aGlzLmxheWVyLmdldEZlYXR1cmVGcm9tRXZlbnQodGhpcy5oYW5kbGVycy5kcmFnLmV2dCkpP3RoaXMuZHJhZ1N0YXJ0KGEpOnRoaXMuY2xpY2tvdXQmJih0aGlzLl91bnNlbGVjdD10aGlzLmZlYXR1cmUpfSxtb3ZlOmZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLl91bnNlbGVjdDt0aGlzLnZlcnRleCYmdGhpcy5kcmFnVmVydGV4KHRoaXMudmVydGV4LGEpfSx1cDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlcnMuZHJhZy5zdG9wRG93bj0hMTt0aGlzLl91bnNlbGVjdCYmKHRoaXMudW5zZWxlY3RGZWF0dXJlKHRoaXMuX3Vuc2VsZWN0KSxkZWxldGUgdGhpcy5fdW5zZWxlY3QpfSxkb25lOmZ1bmN0aW9uKGEpe3RoaXMudmVydGV4JiYKdGhpcy5kcmFnQ29tcGxldGUodGhpcy52ZXJ0ZXgpfX0sYyl9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pO3RoaXMubGF5ZXI9bnVsbDtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxbXSl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5tb3ZlTGF5ZXJUb1RvcCgpO3RoaXMubWFwLmV2ZW50cy5vbih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pO3JldHVybiB0aGlzLmhhbmRsZXJzLmtleWJvYXJkLmFjdGl2YXRlKCkmJnRoaXMuaGFuZGxlcnMuZHJhZy5hY3RpdmF0ZSgpJiZPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sCmRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5tb3ZlTGF5ZXJCYWNrKCksdGhpcy5tYXAuZXZlbnRzLnVuKHtyZW1vdmVsYXllcjp0aGlzLmhhbmRsZU1hcEV2ZW50cyxjaGFuZ2VsYXllcjp0aGlzLmhhbmRsZU1hcEV2ZW50cyxzY29wZTp0aGlzfSksdGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzLnZlcnRpY2VzLHtzaWxlbnQ6ITB9KSx0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMudmlydHVhbFZlcnRpY2VzLHtzaWxlbnQ6ITB9KSx0aGlzLnZlcnRpY2VzPVtdLHRoaXMuaGFuZGxlcnMuZHJhZy5kZWFjdGl2YXRlKCksdGhpcy5oYW5kbGVycy5rZXlib2FyZC5kZWFjdGl2YXRlKCksKGE9dGhpcy5mZWF0dXJlKSYmKGEuZ2VvbWV0cnkmJmEubGF5ZXIpJiZ0aGlzLnVuc2VsZWN0RmVhdHVyZShhKSxhPSEwKTtyZXR1cm4gYX0sYmVmb3JlU2VsZWN0RmVhdHVyZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVmZWF0dXJlbW9kaWZpZWQiLAp7ZmVhdHVyZTphfSl9LHNlbGVjdEZlYXR1cmU6ZnVuY3Rpb24oYSl7aWYoISh0aGlzLmZlYXR1cmU9PT1hfHx0aGlzLmdlb21ldHJ5VHlwZXMmJi0xPT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmdlb21ldHJ5VHlwZXMsYS5nZW9tZXRyeS5DTEFTU19OQU1FKSkpeyExIT09dGhpcy5iZWZvcmVTZWxlY3RGZWF0dXJlKGEpJiYodGhpcy5mZWF0dXJlJiZ0aGlzLnVuc2VsZWN0RmVhdHVyZSh0aGlzLmZlYXR1cmUpLHRoaXMuZmVhdHVyZT1hLHRoaXMubGF5ZXIuc2VsZWN0ZWRGZWF0dXJlcy5wdXNoKGEpLHRoaXMubGF5ZXIuZHJhd0ZlYXR1cmUoYSwic2VsZWN0IiksdGhpcy5tb2RpZmllZD0hMSx0aGlzLnJlc2V0VmVydGljZXMoKSx0aGlzLm9uTW9kaWZpY2F0aW9uU3RhcnQodGhpcy5mZWF0dXJlKSk7dmFyIGI9YS5tb2RpZmllZDshYS5nZW9tZXRyeXx8YiYmYi5nZW9tZXRyeXx8KHRoaXMuX29yaWdpbmFsR2VvbWV0cnk9YS5nZW9tZXRyeS5jbG9uZSgpKX19LHVuc2VsZWN0RmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMudmVydGljZXMsCntzaWxlbnQ6ITB9KTt0aGlzLnZlcnRpY2VzPVtdO3RoaXMubGF5ZXIuZGVzdHJveUZlYXR1cmVzKHRoaXMudmlydHVhbFZlcnRpY2VzLHtzaWxlbnQ6ITB9KTt0aGlzLnZpcnR1YWxWZXJ0aWNlcz1bXTt0aGlzLmRyYWdIYW5kbGUmJih0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyhbdGhpcy5kcmFnSGFuZGxlXSx7c2lsZW50OiEwfSksZGVsZXRlIHRoaXMuZHJhZ0hhbmRsZSk7dGhpcy5yYWRpdXNIYW5kbGUmJih0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyhbdGhpcy5yYWRpdXNIYW5kbGVdLHtzaWxlbnQ6ITB9KSxkZWxldGUgdGhpcy5yYWRpdXNIYW5kbGUpO3RoaXMubGF5ZXIuZHJhd0ZlYXR1cmUodGhpcy5mZWF0dXJlLCJkZWZhdWx0Iik7dGhpcy5mZWF0dXJlPW51bGw7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5sYXllci5zZWxlY3RlZEZlYXR1cmVzLGEpO3RoaXMub25Nb2RpZmljYXRpb25FbmQoYSk7dGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJhZnRlcmZlYXR1cmVtb2RpZmllZCIsCntmZWF0dXJlOmEsbW9kaWZpZWQ6dGhpcy5tb2RpZmllZH0pO3RoaXMubW9kaWZpZWQ9ITF9LGRyYWdTdGFydDpmdW5jdGlvbihhKXt2YXIgYj0iT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWEuZ2VvbWV0cnkuQ0xBU1NfTkFNRTt0aGlzLnN0YW5kYWxvbmV8fChhLl9za2V0Y2h8fCFiKSYmYS5fc2tldGNofHwodGhpcy50b2dnbGUmJnRoaXMuZmVhdHVyZT09PWEmJih0aGlzLl91bnNlbGVjdD1hKSx0aGlzLnNlbGVjdEZlYXR1cmUoYSkpO2lmKGEuX3NrZXRjaHx8Yil0aGlzLnZlcnRleD1hLHRoaXMuaGFuZGxlcnMuZHJhZy5zdG9wRG93bj0hMH0sZHJhZ1ZlcnRleDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubWFwLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGIpLGQ9YS5nZW9tZXRyeTtkLm1vdmUoYy5sb24tZC54LGMubGF0LWQueSk7dGhpcy5tb2RpZmllZD0hMDsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PXRoaXMuZmVhdHVyZS5nZW9tZXRyeS5DTEFTU19OQU1FPwp0aGlzLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoInZlcnRleG1vZGlmaWVkIix7dmVydGV4OmEuZ2VvbWV0cnksZmVhdHVyZTp0aGlzLmZlYXR1cmUscGl4ZWw6Yn0pOihhLl9pbmRleD8oYS5nZW9tZXRyeS5wYXJlbnQuYWRkQ29tcG9uZW50KGEuZ2VvbWV0cnksYS5faW5kZXgpLGRlbGV0ZSBhLl9pbmRleCxPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnZpcnR1YWxWZXJ0aWNlcyxhKSx0aGlzLnZlcnRpY2VzLnB1c2goYSkpOmE9PXRoaXMuZHJhZ0hhbmRsZT8odGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzLnZlcnRpY2VzLHtzaWxlbnQ6ITB9KSx0aGlzLnZlcnRpY2VzPVtdLHRoaXMucmFkaXVzSGFuZGxlJiYodGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXMoW3RoaXMucmFkaXVzSGFuZGxlXSx7c2lsZW50OiEwfSksdGhpcy5yYWRpdXNIYW5kbGU9bnVsbCkpOmEhPT10aGlzLnJhZGl1c0hhbmRsZSYmdGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJ2ZXJ0ZXhtb2RpZmllZCIsCnt2ZXJ0ZXg6YS5nZW9tZXRyeSxmZWF0dXJlOnRoaXMuZmVhdHVyZSxwaXhlbDpifSksMDx0aGlzLnZpcnR1YWxWZXJ0aWNlcy5sZW5ndGgmJih0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyh0aGlzLnZpcnR1YWxWZXJ0aWNlcyx7c2lsZW50OiEwfSksdGhpcy52aXJ0dWFsVmVydGljZXM9W10pLHRoaXMubGF5ZXIuZHJhd0ZlYXR1cmUodGhpcy5mZWF0dXJlLHRoaXMuc3RhbmRhbG9uZT92b2lkIDA6InNlbGVjdCIpKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKGEpfSxkcmFnQ29tcGxldGU6ZnVuY3Rpb24oYSl7dGhpcy5yZXNldFZlcnRpY2VzKCk7dGhpcy5zZXRGZWF0dXJlU3RhdGUoKTt0aGlzLm9uTW9kaWZpY2F0aW9uKHRoaXMuZmVhdHVyZSk7dGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlbW9kaWZpZWQiLHtmZWF0dXJlOnRoaXMuZmVhdHVyZX0pfSxzZXRGZWF0dXJlU3RhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLmZlYXR1cmUuc3RhdGUhPU9wZW5MYXllcnMuU3RhdGUuSU5TRVJUJiYKdGhpcy5mZWF0dXJlLnN0YXRlIT1PcGVuTGF5ZXJzLlN0YXRlLkRFTEVURSYmKHRoaXMuZmVhdHVyZS5zdGF0ZT1PcGVuTGF5ZXJzLlN0YXRlLlVQREFURSx0aGlzLm1vZGlmaWVkJiZ0aGlzLl9vcmlnaW5hbEdlb21ldHJ5KSl7dmFyIGE9dGhpcy5mZWF0dXJlO2EubW9kaWZpZWQ9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLm1vZGlmaWVkLHtnZW9tZXRyeTp0aGlzLl9vcmlnaW5hbEdlb21ldHJ5fSk7ZGVsZXRlIHRoaXMuX29yaWdpbmFsR2VvbWV0cnl9fSxyZXNldFZlcnRpY2VzOmZ1bmN0aW9uKCl7MDx0aGlzLnZlcnRpY2VzLmxlbmd0aCYmKHRoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXModGhpcy52ZXJ0aWNlcyx7c2lsZW50OiEwfSksdGhpcy52ZXJ0aWNlcz1bXSk7MDx0aGlzLnZpcnR1YWxWZXJ0aWNlcy5sZW5ndGgmJih0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMudmlydHVhbFZlcnRpY2VzLHtzaWxlbnQ6ITB9KSx0aGlzLnZpcnR1YWxWZXJ0aWNlcz1bXSk7dGhpcy5kcmFnSGFuZGxlJiYKKHRoaXMubGF5ZXIuZGVzdHJveUZlYXR1cmVzKFt0aGlzLmRyYWdIYW5kbGVdLHtzaWxlbnQ6ITB9KSx0aGlzLmRyYWdIYW5kbGU9bnVsbCk7dGhpcy5yYWRpdXNIYW5kbGUmJih0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyhbdGhpcy5yYWRpdXNIYW5kbGVdLHtzaWxlbnQ6ITB9KSx0aGlzLnJhZGl1c0hhbmRsZT1udWxsKTt0aGlzLmZlYXR1cmUmJiJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50IiE9dGhpcy5mZWF0dXJlLmdlb21ldHJ5LkNMQVNTX05BTUUmJih0aGlzLm1vZGUmT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuRFJBRyYmdGhpcy5jb2xsZWN0RHJhZ0hhbmRsZSgpLHRoaXMubW9kZSYoT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUk9UQVRFfE9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJFU0laRSkmJnRoaXMuY29sbGVjdFJhZGl1c0hhbmRsZSgpLHRoaXMubW9kZSZPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5SRVNIQVBFJiYKKHRoaXMubW9kZSZPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5SRVNJWkV8fHRoaXMuY29sbGVjdFZlcnRpY2VzKCkpKX0saGFuZGxlS2V5cHJlc3M6ZnVuY3Rpb24oYSl7dmFyIGI9YS5rZXlDb2RlO3RoaXMuZmVhdHVyZSYmLTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuZGVsZXRlQ29kZXMsYikmJihiPXRoaXMubGF5ZXIuZ2V0RmVhdHVyZUZyb21FdmVudCh0aGlzLmhhbmRsZXJzLmRyYWcuZXZ0KSkmJigtMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy52ZXJ0aWNlcyxiKSYmIXRoaXMuaGFuZGxlcnMuZHJhZy5kcmFnZ2luZyYmYi5nZW9tZXRyeS5wYXJlbnQpJiYoYi5nZW9tZXRyeS5wYXJlbnQucmVtb3ZlQ29tcG9uZW50KGIuZ2VvbWV0cnkpLHRoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgidmVydGV4cmVtb3ZlZCIse3ZlcnRleDpiLmdlb21ldHJ5LGZlYXR1cmU6dGhpcy5mZWF0dXJlLHBpeGVsOmEueHl9KSx0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMuZmVhdHVyZSwKdGhpcy5zdGFuZGFsb25lP3ZvaWQgMDoic2VsZWN0IiksdGhpcy5tb2RpZmllZD0hMCx0aGlzLnJlc2V0VmVydGljZXMoKSx0aGlzLnNldEZlYXR1cmVTdGF0ZSgpLHRoaXMub25Nb2RpZmljYXRpb24odGhpcy5mZWF0dXJlKSx0aGlzLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoImZlYXR1cmVtb2RpZmllZCIse2ZlYXR1cmU6dGhpcy5mZWF0dXJlfSkpfSxjb2xsZWN0VmVydGljZXM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGMpe3ZhciBkLGUsZjtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWMuQ0xBU1NfTkFNRSllPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGMpLGUuX3NrZXRjaD0hMCxlLnJlbmRlckludGVudD1iLnZlcnRleFJlbmRlckludGVudCxiLnZlcnRpY2VzLnB1c2goZSk7ZWxzZXtmPWMuY29tcG9uZW50cy5sZW5ndGg7Ik9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyI9PWMuQ0xBU1NfTkFNRSYmKGYtPTEpO2ZvcihkPTA7ZDxmOysrZCllPQpjLmNvbXBvbmVudHNbZF0sIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1lLkNMQVNTX05BTUU/KGU9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoZSksZS5fc2tldGNoPSEwLGUucmVuZGVySW50ZW50PWIudmVydGV4UmVuZGVySW50ZW50LGIudmVydGljZXMucHVzaChlKSk6YShlKTtpZihiLmNyZWF0ZVZlcnRpY2VzJiYiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50IiE9Yy5DTEFTU19OQU1FKWZvcihkPTAsZj1jLmNvbXBvbmVudHMubGVuZ3RoO2Q8Zi0xOysrZCl7ZT1jLmNvbXBvbmVudHNbZF07dmFyIGc9Yy5jb21wb25lbnRzW2QrMV07Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1lLkNMQVNTX05BTUUmJiJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09Zy5DTEFTU19OQU1FJiYoZT1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCgoZS54K2cueCkvMiwoZS55K2cueSkvMiksbnVsbCxiLnZpcnR1YWxTdHlsZSksCmUuZ2VvbWV0cnkucGFyZW50PWMsZS5faW5kZXg9ZCsxLGUuX3NrZXRjaD0hMCxiLnZpcnR1YWxWZXJ0aWNlcy5wdXNoKGUpKX19fXRoaXMudmVydGljZXM9W107dGhpcy52aXJ0dWFsVmVydGljZXM9W107dmFyIGI9dGhpczthLmNhbGwodGhpcyx0aGlzLmZlYXR1cmUuZ2VvbWV0cnkpO3RoaXMubGF5ZXIuYWRkRmVhdHVyZXModGhpcy52aXJ0dWFsVmVydGljZXMse3NpbGVudDohMH0pO3RoaXMubGF5ZXIuYWRkRmVhdHVyZXModGhpcy52ZXJ0aWNlcyx7c2lsZW50OiEwfSl9LGNvbGxlY3REcmFnSGFuZGxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5mZWF0dXJlLmdlb21ldHJ5LGI9YS5nZXRCb3VuZHMoKS5nZXRDZW50ZXJMb25MYXQoKSxiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGIubG9uLGIubGF0KSxjPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGIpO2IubW92ZT1mdW5jdGlvbihiLGMpe09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQucHJvdG90eXBlLm1vdmUuY2FsbCh0aGlzLApiLGMpO2EubW92ZShiLGMpfTtjLl9za2V0Y2g9ITA7dGhpcy5kcmFnSGFuZGxlPWM7dGhpcy5kcmFnSGFuZGxlLnJlbmRlckludGVudD10aGlzLnZlcnRleFJlbmRlckludGVudDt0aGlzLmxheWVyLmFkZEZlYXR1cmVzKFt0aGlzLmRyYWdIYW5kbGVdLHtzaWxlbnQ6ITB9KX0sY29sbGVjdFJhZGl1c0hhbmRsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZmVhdHVyZS5nZW9tZXRyeSxiPWEuZ2V0Qm91bmRzKCksYz1iLmdldENlbnRlckxvbkxhdCgpLGQ9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYy5sb24sYy5sYXQpLGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYi5yaWdodCxiLmJvdHRvbSksYz1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihiKSxlPXRoaXMubW9kZSZPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5SRVNJWkUsZj10aGlzLm1vZGUmT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUkVTSEFQRSxnPXRoaXMubW9kZSYKT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUk9UQVRFO2IubW92ZT1mdW5jdGlvbihiLGMpe09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQucHJvdG90eXBlLm1vdmUuY2FsbCh0aGlzLGIsYyk7dmFyIGw9dGhpcy54LWQueCxtPXRoaXMueS1kLnkscD1sLWIsbj1tLWM7aWYoZyl7dmFyIHE9TWF0aC5hdGFuMihuLHApLHE9TWF0aC5hdGFuMihtLGwpLXEscT1xKigxODAvTWF0aC5QSSk7YS5yb3RhdGUocSxkKX1pZihlKXt2YXIgcjtmPyhtLz1uLHI9bC9wL20pOihwPU1hdGguc3FydChwKnArbipuKSxtPU1hdGguc3FydChsKmwrbSptKS9wKTthLnJlc2l6ZShtLGQscil9fTtjLl9za2V0Y2g9ITA7dGhpcy5yYWRpdXNIYW5kbGU9Yzt0aGlzLnJhZGl1c0hhbmRsZS5yZW5kZXJJbnRlbnQ9dGhpcy52ZXJ0ZXhSZW5kZXJJbnRlbnQ7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5yYWRpdXNIYW5kbGVdLHtzaWxlbnQ6ITB9KX0sc2V0TWFwOmZ1bmN0aW9uKGEpe3RoaXMuaGFuZGxlcnMuZHJhZy5zZXRNYXAoYSk7Ck9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saGFuZGxlTWFwRXZlbnRzOmZ1bmN0aW9uKGEpeyJyZW1vdmVsYXllciIhPWEudHlwZSYmIm9yZGVyIiE9YS5wcm9wZXJ0eXx8dGhpcy5tb3ZlTGF5ZXJUb1RvcCgpfSxtb3ZlTGF5ZXJUb1RvcDpmdW5jdGlvbigpe3ZhciBhPU1hdGgubWF4KHRoaXMubWFwLlpfSU5ERVhfQkFTRS5GZWF0dXJlLTEsdGhpcy5sYXllci5nZXRaSW5kZXgoKSkrMTt0aGlzLmxheWVyLnNldFpJbmRleChhKX0sbW92ZUxheWVyQmFjazpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5ZXIuZ2V0WkluZGV4KCktMTthPj10aGlzLm1hcC5aX0lOREVYX0JBU0UuRmVhdHVyZT90aGlzLmxheWVyLnNldFpJbmRleChhKTp0aGlzLm1hcC5zZXRMYXllclpJbmRleCh0aGlzLmxheWVyLHRoaXMubWFwLmdldExheWVySW5kZXgodGhpcy5sYXllcikpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZSJ9KTsKT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUkVTSEFQRT0xO09wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJFU0laRT0yO09wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJPVEFURT00O09wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLkRSQUc9ODtPcGVuTGF5ZXJzLkxheWVyLkJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLlhZWix7a2V5Om51bGwsc2VydmVyUmVzb2x1dGlvbnM6WzE1NjU0My4wMzM5MDYyNSw3ODI3MS41MTY5NTMxMjUsMzkxMzUuNzU4NDc2NTYyNSwxOTU2Ny44NzkyMzgyODEyNSw5NzgzLjkzOTYxOTE0MDYyNSw0ODkxLjk2OTgwOTU3MDMxMjUsMjQ0NS45ODQ5MDQ3ODUxNTYyLDEyMjIuOTkyNDUyMzkyNTc4MSw2MTEuNDk2MjI2MTk2Mjg5MSwzMDUuNzQ4MTEzMDk4MTQ0NTMsMTUyLjg3NDA1NjU0OTA3MjI2LDc2LjQzNzAyODI3NDUzNjEzLDM4LjIxODUxNDEzNzI2ODA2NiwxOS4xMDkyNTcwNjg2MzQwMzMsOS41NTQ2Mjg1MzQzMTcwMTcsNC43NzczMTQyNjcxNTg1MDgsMi4zODg2NTcxMzM1NzkyNTQsMS4xOTQzMjg1NjY3ODk2MjcsMC41OTcxNjQyODMzOTQ4MTM1LDAuMjk4NTgyMTQxNjk3NDA2NzcsMC4xNDkyOTEwNzA4NDg3MDMzOCwwLjA3NDY0NTUzNTQyNDM1MTY5XSxhdHRyaWJ1dGlvblRlbXBsYXRlOic8c3BhbiBjbGFzcz0ib2xCaW5nQXR0cmlidXRpb24gJHt0eXBlfSI+PGRpdj48YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cDovL3d3dy5iaW5nLmNvbS9tYXBzLyI+PGltZyBzcmM9IiR7bG9nb30iIC8+PC9hPjwvZGl2PiR7Y29weXJpZ2h0c308YSBzdHlsZT0id2hpdGUtc3BhY2U6IG5vd3JhcCIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHA6Ly93d3cubWljcm9zb2Z0LmNvbS9tYXBzL3Byb2R1Y3QvdGVybXMuaHRtbCI+VGVybXMgb2YgVXNlPC9hPjwvc3Bhbj4nLAptZXRhZGF0YTpudWxsLHByb3RvY29sUmVnZXg6L15odHRwOi9pLHR5cGU6IlJvYWQiLGN1bHR1cmU6ImVuLVVTIixtZXRhZGF0YVBhcmFtczpudWxsLHRpbGVPcHRpb25zOm51bGwscHJvdG9jb2w6fndpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoImh0dHAiKT8iIjoiaHR0cDoiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7c3BoZXJpY2FsTWVyY2F0b3I6ITB9LGEpO09wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2EubmFtZXx8IkJpbmcgIisoYS50eXBlfHx0aGlzLnR5cGUpLG51bGwsYV0pO3RoaXMudGlsZU9wdGlvbnM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7Y3Jvc3NPcmlnaW5LZXl3b3JkOiJhbm9ueW1vdXMifSx0aGlzLm9wdGlvbnMudGlsZU9wdGlvbnMpO3RoaXMubG9hZE1ldGFkYXRhKCl9LGxvYWRNZXRhZGF0YTpmdW5jdGlvbigpe3RoaXMuX2NhbGxiYWNrSWQ9CiJfY2FsbGJhY2tfIit0aGlzLmlkLnJlcGxhY2UoL1wuL2csIl8iKTt3aW5kb3dbdGhpcy5fY2FsbGJhY2tJZF09T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKE9wZW5MYXllcnMuTGF5ZXIuQmluZy5wcm9jZXNzTWV0YWRhdGEsdGhpcyk7dmFyIGE9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2tleTp0aGlzLmtleSxqc29ucDp0aGlzLl9jYWxsYmFja0lkLGluY2x1ZGU6IkltYWdlcnlQcm92aWRlcnMifSx0aGlzLm1ldGFkYXRhUGFyYW1zKSxhPXRoaXMucHJvdG9jb2wrIi8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9JbWFnZXJ5L01ldGFkYXRhLyIrdGhpcy50eXBlKyI/IitPcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKGEpLGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7Yi50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO2Iuc3JjPWE7Yi5pZD10aGlzLl9jYWxsYmFja0lkO2RvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoYil9LAppbml0TGF5ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1ldGFkYXRhLnJlc291cmNlU2V0c1swXS5yZXNvdXJjZXNbMF0sYj1hLmltYWdlVXJsLnJlcGxhY2UoIntxdWFka2V5fSIsIiR7cXVhZGtleX0iKSxiPWIucmVwbGFjZSgie2N1bHR1cmV9Iix0aGlzLmN1bHR1cmUpLGI9Yi5yZXBsYWNlKHRoaXMucHJvdG9jb2xSZWdleCx0aGlzLnByb3RvY29sKTt0aGlzLnVybD1bXTtmb3IodmFyIGM9MDtjPGEuaW1hZ2VVcmxTdWJkb21haW5zLmxlbmd0aDsrK2MpdGhpcy51cmwucHVzaChiLnJlcGxhY2UoIntzdWJkb21haW59IixhLmltYWdlVXJsU3ViZG9tYWluc1tjXSkpO3RoaXMuYWRkT3B0aW9ucyh7bWF4UmVzb2x1dGlvbjpNYXRoLm1pbih0aGlzLnNlcnZlclJlc29sdXRpb25zW2Euem9vbU1pbl0sdGhpcy5tYXhSZXNvbHV0aW9ufHxOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLG51bVpvb21MZXZlbHM6TWF0aC5taW4oYS56b29tTWF4KzEtYS56b29tTWluLHRoaXMubnVtWm9vbUxldmVscyl9LAohMCk7dGhpcy5pc0Jhc2VMYXllcnx8dGhpcy5yZWRyYXcoKTt0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uKCl9LGdldFVSTDpmdW5jdGlvbihhKXtpZih0aGlzLnVybCl7dmFyIGI9dGhpcy5nZXRYWVooYSk7YT1iLng7Zm9yKHZhciBjPWIueSxiPWIueixkPVtdLGU9YjswPGU7LS1lKXt2YXIgZj0iMCIsZz0xPDxlLTE7MCE9KGEmZykmJmYrKzswIT0oYyZnKSYmKGYrKyxmKyspO2QucHVzaChmKX1kPWQuam9pbigiIik7YT10aGlzLnNlbGVjdFVybCgiIithK2MrYix0aGlzLnVybCk7cmV0dXJuIE9wZW5MYXllcnMuU3RyaW5nLmZvcm1hdChhLHtxdWFka2V5OmR9KX19LHVwZGF0ZUF0dHJpYnV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tZXRhZGF0YTtpZihhLnJlc291cmNlU2V0cyYmdGhpcy5tYXAmJnRoaXMubWFwLmNlbnRlcil7dmFyIGI9YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzWzBdLGM9dGhpcy5tYXAuZ2V0RXh0ZW50KCkudHJhbnNmb3JtKHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSwKbmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IikpLGQ9Yi5pbWFnZXJ5UHJvdmlkZXJzfHxbXSxlPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuc2VydmVyUmVzb2x1dGlvbnMsdGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCkpLGI9IiIsZixnLGgsayxsLG0scDtnPTA7Zm9yKGg9ZC5sZW5ndGg7ZzxoOysrZylmb3IoZj1kW2ddLGs9MCxsPWYuY292ZXJhZ2VBcmVhcy5sZW5ndGg7azxsOysraylwPWYuY292ZXJhZ2VBcmVhc1trXSxtPU9wZW5MYXllcnMuQm91bmRzLmZyb21BcnJheShwLmJib3gsITApLGMuaW50ZXJzZWN0c0JvdW5kcyhtKSYmKGU8PXAuem9vbU1heCYmZT49cC56b29tTWluKSYmKGIrPWYuYXR0cmlidXRpb24rIiAiKTthPWEuYnJhbmRMb2dvVXJpLnJlcGxhY2UodGhpcy5wcm90b2NvbFJlZ2V4LHRoaXMucHJvdG9jb2wpO3RoaXMuYXR0cmlidXRpb249T3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KHRoaXMuYXR0cmlidXRpb25UZW1wbGF0ZSx7dHlwZTp0aGlzLnR5cGUudG9Mb3dlckNhc2UoKSwKbG9nbzphLGNvcHlyaWdodHM6Yn0pO3RoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6ImF0dHJpYnV0aW9uIn0pfX0sc2V0TWFwOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYXllci5YWVoucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3ZlZW5kIix0aGlzLHRoaXMudXBkYXRlQXR0cmlidXRpb24pfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5CaW5nKHRoaXMub3B0aW9ucykpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLFthXSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdmVlbmQiLHRoaXMsdGhpcy51cGRhdGVBdHRyaWJ1dGlvbik7T3BlbkxheWVycy5MYXllci5YWVoucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5CaW5nIn0pO09wZW5MYXllcnMuTGF5ZXIuQmluZy5wcm9jZXNzTWV0YWRhdGE9ZnVuY3Rpb24oYSl7dGhpcy5tZXRhZGF0YT1hO3RoaXMuaW5pdExheWVyKCk7YT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9jYWxsYmFja0lkKTthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk7d2luZG93W3RoaXMuX2NhbGxiYWNrSWRdPXZvaWQgMDtkZWxldGUgdGhpcy5fY2FsbGJhY2tJZH07T3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24se2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIl0sc3BsaXQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9bnVsbCxkPWImJmIubXV0dWFsLGUsZixnLGgsaz1bXSxsPVthXSxtPTAscD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO208cDsrK20pe2Y9dGhpcy5jb21wb25lbnRzW21dO2c9ITE7Zm9yKHZhciBuPTA7bjxsLmxlbmd0aDsrK24paWYoZT1mLnNwbGl0KGxbbl0sYikpe2lmKGQpe2c9ZVswXTtmb3IodmFyIHE9MCxyPWcubGVuZ3RoO3E8cjsrK3EpMD09PXEmJmsubGVuZ3RoP2tbay5sZW5ndGgtMV0uYWRkQ29tcG9uZW50KGdbcV0pOmsucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoW2dbcV1dKSk7Zz0hMDtlPWVbMV19aWYoZS5sZW5ndGgpe2UudW5zaGlmdChuLAoxKTtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGwsZSk7YnJlYWt9fWd8fChrLmxlbmd0aD9rW2subGVuZ3RoLTFdLmFkZENvbXBvbmVudChmLmNsb25lKCkpOms9W25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhmLmNsb25lKCkpXSl9ayYmMTxrLmxlbmd0aD9nPSEwOms9W107bCYmMTxsLmxlbmd0aD9oPSEwOmw9W107aWYoZ3x8aCljPWQ/W2ssbF06bDtyZXR1cm4gY30sc3BsaXRXaXRoOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbCxkPWImJmIubXV0dWFsLGUsZixnLGgsayxsO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcpe2w9W107az1bYV07Zm9yKHZhciBtPTAscD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO208cDsrK20pe2c9ITE7Zj10aGlzLmNvbXBvbmVudHNbbV07Zm9yKHZhciBuPTA7bjxrLmxlbmd0aDsrK24paWYoZT1rW25dLnNwbGl0KGYsYikpe2QmJihnPWVbMF0sZy5sZW5ndGgmJihnLnVuc2hpZnQobiwKMSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShrLGcpLG4rPWcubGVuZ3RoLTIpLGU9ZVsxXSwwPT09ZS5sZW5ndGgmJihlPVtmLmNsb25lKCldKSk7Zz0wO2Zvcih2YXIgcT1lLmxlbmd0aDtnPHE7KytnKTA9PT1nJiZsLmxlbmd0aD9sW2wubGVuZ3RoLTFdLmFkZENvbXBvbmVudChlW2ddKTpsLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKFtlW2ddXSkpO2c9ITB9Z3x8KGwubGVuZ3RoP2xbbC5sZW5ndGgtMV0uYWRkQ29tcG9uZW50KGYuY2xvbmUoKSk6bD1bbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKFtmLmNsb25lKCldKV0pfX1lbHNlIGM9YS5zcGxpdCh0aGlzKTtrJiYxPGsubGVuZ3RoP2g9ITA6az1bXTtsJiYxPGwubGVuZ3RoP2c9ITA6bD1bXTtpZihofHxnKWM9ZD9bayxsXTpsO3JldHVybiBjfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdD1PcGVuTGF5ZXJzLkNsYXNzKHtvcHRpb25zOm51bGwsZXh0ZXJuYWxQcm9qZWN0aW9uOm51bGwsaW50ZXJuYWxQcm9qZWN0aW9uOm51bGwsZGF0YTpudWxsLGtlZXBEYXRhOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMub3B0aW9ucz1hfSxkZXN0cm95OmZ1bmN0aW9uKCl7fSxyZWFkOmZ1bmN0aW9uKGEpe3Rocm93IEVycm9yKCJSZWFkIG5vdCBpbXBsZW1lbnRlZC4iKTt9LHdyaXRlOmZ1bmN0aW9uKGEpe3Rocm93IEVycm9yKCJXcml0ZSBub3QgaW1wbGVtZW50ZWQuIik7fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5YTUw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdCx7bmFtZXNwYWNlczpudWxsLG5hbWVzcGFjZUFsaWFzOm51bGwsZGVmYXVsdFByZWZpeDpudWxsLHJlYWRlcnM6e30sd3JpdGVyczp7fSx4bWxkb206bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3dpbmRvdy5BY3RpdmVYT2JqZWN0JiYodGhpcy54bWxkb209bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSk7T3BlbkxheWVycy5Gb3JtYXQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMubmFtZXNwYWNlcz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMubmFtZXNwYWNlcyk7dGhpcy5uYW1lc3BhY2VBbGlhcz17fTtmb3IodmFyIGIgaW4gdGhpcy5uYW1lc3BhY2VzKXRoaXMubmFtZXNwYWNlQWxpYXNbdGhpcy5uYW1lc3BhY2VzW2JdXT1ifSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy54bWxkb209bnVsbDtPcGVuTGF5ZXJzLkZvcm1hdC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLAphcmd1bWVudHMpfSxzZXROYW1lc3BhY2U6ZnVuY3Rpb24oYSxiKXt0aGlzLm5hbWVzcGFjZXNbYV09Yjt0aGlzLm5hbWVzcGFjZUFsaWFzW2JdPWF9LHJlYWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5pbmRleE9mKCI8Iik7MDxiJiYoYT1hLnN1YnN0cmluZyhiKSk7Yj1PcGVuTGF5ZXJzLlV0aWwuVHJ5KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe3ZhciBiO2I9d2luZG93LkFjdGl2ZVhPYmplY3QmJiF0aGlzLnhtbGRvbT9uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpOnRoaXMueG1sZG9tO2IubG9hZFhNTChhKTtyZXR1cm4gYn0sdGhpcyksZnVuY3Rpb24oKXtyZXR1cm4obmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKGEsInRleHQveG1sIil9LGZ1bmN0aW9uKCl7dmFyIGI9bmV3IFhNTEh0dHBSZXF1ZXN0O2Iub3BlbigiR0VUIiwiZGF0YTp0ZXh0L3htbDtjaGFyc2V0PXV0Zi04LCIrZW5jb2RlVVJJQ29tcG9uZW50KGEpLCExKTtiLm92ZXJyaWRlTWltZVR5cGUmJgpiLm92ZXJyaWRlTWltZVR5cGUoInRleHQveG1sIik7Yi5zZW5kKG51bGwpO3JldHVybiBiLnJlc3BvbnNlWE1MfSk7dGhpcy5rZWVwRGF0YSYmKHRoaXMuZGF0YT1iKTtyZXR1cm4gYn0sd3JpdGU6ZnVuY3Rpb24oYSl7aWYodGhpcy54bWxkb20pYT1hLnhtbDtlbHNle3ZhciBiPW5ldyBYTUxTZXJpYWxpemVyO2lmKDE9PWEubm9kZVR5cGUpe3ZhciBjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50KCIiLCIiLG51bGwpO2MuaW1wb3J0Tm9kZSYmKGE9Yy5pbXBvcnROb2RlKGEsITApKTtjLmFwcGVuZENoaWxkKGEpO2E9Yi5zZXJpYWxpemVUb1N0cmluZyhjKX1lbHNlIGE9Yi5zZXJpYWxpemVUb1N0cmluZyhhKX1yZXR1cm4gYX0sY3JlYXRlRWxlbWVudE5TOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMueG1sZG9tPyJzdHJpbmciPT10eXBlb2YgYT90aGlzLnhtbGRvbS5jcmVhdGVOb2RlKDEsYixhKTp0aGlzLnhtbGRvbS5jcmVhdGVOb2RlKDEsYiwiIik6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGEsCmIpfSxjcmVhdGVEb2N1bWVudEZyYWdtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueG1sZG9tP3RoaXMueG1sZG9tLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTpkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9LGNyZWF0ZVRleHROb2RlOmZ1bmN0aW9uKGEpeyJzdHJpbmciIT09dHlwZW9mIGEmJihhPVN0cmluZyhhKSk7cmV0dXJuIHRoaXMueG1sZG9tP3RoaXMueG1sZG9tLmNyZWF0ZVRleHROb2RlKGEpOmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpfSxnZXRFbGVtZW50c0J5VGFnTmFtZU5TOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXTtpZihhLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMpZD1hLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYixjKTtlbHNle2E9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpO2Zvcih2YXIgZSxmLGc9MCxoPWEubGVuZ3RoO2c8aDsrK2cpaWYoZT1hW2ddLGY9ZS5wcmVmaXg/ZS5wcmVmaXgrIjoiK2M6YywiKiI9PWN8fGY9PWUubm9kZU5hbWUpIioiIT0KYiYmYiE9ZS5uYW1lc3BhY2VVUkl8fGQucHVzaChlKX1yZXR1cm4gZH0sZ2V0QXR0cmlidXRlTm9kZU5TOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1udWxsO2lmKGEuZ2V0QXR0cmlidXRlTm9kZU5TKWQ9YS5nZXRBdHRyaWJ1dGVOb2RlTlMoYixjKTtlbHNle2E9YS5hdHRyaWJ1dGVzO2Zvcih2YXIgZSxmLGc9MCxoPWEubGVuZ3RoO2c8aDsrK2cpaWYoZT1hW2ddLGUubmFtZXNwYWNlVVJJPT1iJiYoZj1lLnByZWZpeD9lLnByZWZpeCsiOiIrYzpjLGY9PWUubm9kZU5hbWUpKXtkPWU7YnJlYWt9fXJldHVybiBkfSxnZXRBdHRyaWJ1dGVOUzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9IiI7aWYoYS5nZXRBdHRyaWJ1dGVOUylkPWEuZ2V0QXR0cmlidXRlTlMoYixjKXx8IiI7ZWxzZSBpZihhPXRoaXMuZ2V0QXR0cmlidXRlTm9kZU5TKGEsYixjKSlkPWEubm9kZVZhbHVlO3JldHVybiBkfSxnZXRDaGlsZFZhbHVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8IiI7aWYoYSlmb3IodmFyIGQ9YS5maXJzdENoaWxkO2Q7ZD0KZC5uZXh0U2libGluZylzd2l0Y2goZC5ub2RlVHlwZSl7Y2FzZSAzOmNhc2UgNDpjKz1kLm5vZGVWYWx1ZX1yZXR1cm4gY30saXNTaW1wbGVDb250ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPSEwO2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZigxPT09YS5ub2RlVHlwZSl7Yj0hMTticmVha31yZXR1cm4gYn0sY29udGVudFR5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9ITEsYz0hMSxkPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5DT05URU5UX1RZUEUuRU1QVFk7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKXtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSAxOmM9ITA7YnJlYWs7Y2FzZSA4OmJyZWFrO2RlZmF1bHQ6Yj0hMH1pZihjJiZiKWJyZWFrfWlmKGMmJmIpZD1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwuQ09OVEVOVF9UWVBFLk1JWEVEO2Vsc2V7aWYoYylyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLkNPTlRFTlRfVFlQRS5DT01QTEVYO2lmKGIpcmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5DT05URU5UX1RZUEUuU0lNUExFfXJldHVybiBkfSwKaGFzQXR0cmlidXRlTlM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSExO3JldHVybiBkPWEuaGFzQXR0cmlidXRlTlM/YS5oYXNBdHRyaWJ1dGVOUyhiLGMpOiEhdGhpcy5nZXRBdHRyaWJ1dGVOb2RlTlMoYSxiLGMpfSxzZXRBdHRyaWJ1dGVOUzpmdW5jdGlvbihhLGIsYyxkKXtpZihhLnNldEF0dHJpYnV0ZU5TKWEuc2V0QXR0cmlidXRlTlMoYixjLGQpO2Vsc2UgaWYodGhpcy54bWxkb20pYj8oYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlTm9kZSgyLGMsYiksYi5ub2RlVmFsdWU9ZCxhLnNldEF0dHJpYnV0ZU5vZGUoYikpOmEuc2V0QXR0cmlidXRlKGMsZCk7ZWxzZSB0aHJvdyJzZXRBdHRyaWJ1dGVOUyBub3QgaW1wbGVtZW50ZWQiO30sY3JlYXRlRWxlbWVudE5TUGx1czpmdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9Yi51cml8fHRoaXMubmFtZXNwYWNlc1tiLnByZWZpeF07Y3x8KGM9YS5pbmRleE9mKCI6IiksYz10aGlzLm5hbWVzcGFjZXNbYS5zdWJzdHJpbmcoMCxjKV0pO2N8fAooYz10aGlzLm5hbWVzcGFjZXNbdGhpcy5kZWZhdWx0UHJlZml4XSk7Yz10aGlzLmNyZWF0ZUVsZW1lbnROUyhjLGEpO2IuYXR0cmlidXRlcyYmdGhpcy5zZXRBdHRyaWJ1dGVzKGMsYi5hdHRyaWJ1dGVzKTt2YXIgZD1iLnZhbHVlO251bGwhPWQmJmMuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShkKSk7cmV0dXJuIGN9LHNldEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU7Zm9yKGUgaW4gYiludWxsIT1iW2VdJiZiW2VdLnRvU3RyaW5nJiYoYz1iW2VdLnRvU3RyaW5nKCksZD10aGlzLm5hbWVzcGFjZXNbZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoIjoiKSldfHxudWxsLHRoaXMuc2V0QXR0cmlidXRlTlMoYSxkLGUsYykpfSxyZWFkTm9kZTpmdW5jdGlvbihhLGIpe2J8fChiPXt9KTt2YXIgYz10aGlzLnJlYWRlcnNbYS5uYW1lc3BhY2VVUkk/dGhpcy5uYW1lc3BhY2VBbGlhc1thLm5hbWVzcGFjZVVSSV06dGhpcy5kZWZhdWx0UHJlZml4XTtpZihjKXt2YXIgZD0KYS5sb2NhbE5hbWV8fGEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKTsoYz1jW2RdfHxjWyIqIl0pJiZjLmFwcGx5KHRoaXMsW2EsYl0pfXJldHVybiBifSxyZWFkQ2hpbGROb2RlczpmdW5jdGlvbihhLGIpe2J8fChiPXt9KTtmb3IodmFyIGM9YS5jaGlsZE5vZGVzLGQsZT0wLGY9Yy5sZW5ndGg7ZTxmOysrZSlkPWNbZV0sMT09ZC5ub2RlVHlwZSYmdGhpcy5yZWFkTm9kZShkLGIpO3JldHVybiBifSx3cml0ZU5vZGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9YS5pbmRleE9mKCI6Iik7MDxlPyhkPWEuc3Vic3RyaW5nKDAsZSksYT1hLnN1YnN0cmluZyhlKzEpKTpkPWM/dGhpcy5uYW1lc3BhY2VBbGlhc1tjLm5hbWVzcGFjZVVSSV06dGhpcy5kZWZhdWx0UHJlZml4O2I9dGhpcy53cml0ZXJzW2RdW2FdLmFwcGx5KHRoaXMsW2JdKTtjJiZjLmFwcGVuZENoaWxkKGIpO3JldHVybiBifSxnZXRDaGlsZEVsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYSYmdGhpcy5nZXRUaGlzT3JOZXh0RWwoYS5maXJzdENoaWxkLApiLGMpfSxnZXROZXh0RWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhJiZ0aGlzLmdldFRoaXNPck5leHRFbChhLm5leHRTaWJsaW5nLGIsYyl9LGdldFRoaXNPck5leHRFbDpmdW5jdGlvbihhLGIsYyl7YTpmb3IoO2E7YT1hLm5leHRTaWJsaW5nKXN3aXRjaChhLm5vZGVUeXBlKXtjYXNlIDE6aWYoIShiJiZiIT09KGEubG9jYWxOYW1lfHxhLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCkpfHxjJiZjIT09YS5uYW1lc3BhY2VVUkkpKWJyZWFrIGE7YT1udWxsO2JyZWFrIGE7Y2FzZSAzOmlmKC9eXHMqJC8udGVzdChhLm5vZGVWYWx1ZSkpYnJlYWs7Y2FzZSA0OmNhc2UgNjpjYXNlIDEyOmNhc2UgMTA6Y2FzZSAxMTphPW51bGw7YnJlYWsgYX1yZXR1cm4gYXx8bnVsbH0sbG9va3VwTmFtZXNwYWNlVVJJOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbDtpZihhKWlmKGEubG9va3VwTmFtZXNwYWNlVVJJKWM9YS5sb29rdXBOYW1lc3BhY2VVUkkoYik7ZWxzZSBhOnN3aXRjaChhLm5vZGVUeXBlKXtjYXNlIDE6aWYobnVsbCE9PQphLm5hbWVzcGFjZVVSSSYmYS5wcmVmaXg9PT1iKXtjPWEubmFtZXNwYWNlVVJJO2JyZWFrIGF9aWYoYz1hLmF0dHJpYnV0ZXMubGVuZ3RoKWZvcih2YXIgZCxlPTA7ZTxjOysrZSlpZihkPWEuYXR0cmlidXRlc1tlXSwieG1sbnMiPT09ZC5wcmVmaXgmJmQubmFtZT09PSJ4bWxuczoiK2Ipe2M9ZC52YWx1ZXx8bnVsbDticmVhayBhfWVsc2UgaWYoInhtbG5zIj09PWQubmFtZSYmbnVsbD09PWIpe2M9ZC52YWx1ZXx8bnVsbDticmVhayBhfWM9dGhpcy5sb29rdXBOYW1lc3BhY2VVUkkoYS5wYXJlbnROb2RlLGIpO2JyZWFrIGE7Y2FzZSAyOmM9dGhpcy5sb29rdXBOYW1lc3BhY2VVUkkoYS5vd25lckVsZW1lbnQsYik7YnJlYWsgYTtjYXNlIDk6Yz10aGlzLmxvb2t1cE5hbWVzcGFjZVVSSShhLmRvY3VtZW50RWxlbWVudCxiKTticmVhayBhO2Nhc2UgNjpjYXNlIDEyOmNhc2UgMTA6Y2FzZSAxMTpicmVhayBhO2RlZmF1bHQ6Yz10aGlzLmxvb2t1cE5hbWVzcGFjZVVSSShhLnBhcmVudE5vZGUsCmIpfXJldHVybiBjfSxnZXRYTUxEb2M6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuZG9jdW1lbnR8fHRoaXMueG1sZG9tfHwoZG9jdW1lbnQuaW1wbGVtZW50YXRpb24mJmRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50P09wZW5MYXllcnMuRm9ybWF0LlhNTC5kb2N1bWVudD1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudCgiIiwiIixudWxsKTohdGhpcy54bWxkb20mJndpbmRvdy5BY3RpdmVYT2JqZWN0JiYodGhpcy54bWxkb209bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSkpO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuZG9jdW1lbnR8fHRoaXMueG1sZG9tfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5YTUwifSk7T3BlbkxheWVycy5Gb3JtYXQuWE1MLkNPTlRFTlRfVFlQRT17RU1QVFk6MCxTSU1QTEU6MSxDT01QTEVYOjIsTUlYRUQ6M307Ck9wZW5MYXllcnMuRm9ybWF0LlhNTC5sb29rdXBOYW1lc3BhY2VVUkk9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUubG9va3VwTmFtZXNwYWNlVVJJLE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUpO09wZW5MYXllcnMuRm9ybWF0LlhNTC5kb2N1bWVudD1udWxsO09wZW5MYXllcnMuRm9ybWF0Lk9HQ0V4Y2VwdGlvblJlcG9ydD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7bmFtZXNwYWNlczp7b2djOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nYyJ9LHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2d9LGRlZmF1bHRQcmVmaXg6Im9nYyIscmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO3ZhciBiPXtleGNlcHRpb25SZXBvcnQ6bnVsbH07YS5kb2N1bWVudEVsZW1lbnQmJih0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYiksbnVsbD09PWIuZXhjZXB0aW9uUmVwb3J0JiYoYj0obmV3IE9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbikucmVhZChhKSkpO3JldHVybiBifSxyZWFkZXJzOntvZ2M6e1NlcnZpY2VFeGNlcHRpb25SZXBvcnQ6ZnVuY3Rpb24oYSwKYil7Yi5leGNlcHRpb25SZXBvcnQ9e2V4Y2VwdGlvbnM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmV4Y2VwdGlvblJlcG9ydCl9LFNlcnZpY2VFeGNlcHRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y29kZTphLmdldEF0dHJpYnV0ZSgiY29kZSIpLGxvY2F0b3I6YS5nZXRBdHRyaWJ1dGUoImxvY2F0b3IiKSx0ZXh0OnRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX07Yi5leGNlcHRpb25zLnB1c2goYyl9fX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuT0dDRXhjZXB0aW9uUmVwb3J0In0pO09wZW5MYXllcnMuRm9ybWF0LlhNTC5WZXJzaW9uZWRPR0M9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse2RlZmF1bHRWZXJzaW9uOm51bGwsdmVyc2lvbjpudWxsLHByb2ZpbGU6bnVsbCxhbGxvd0ZhbGxiYWNrOiExLG5hbWU6bnVsbCxzdHJpbmdpZnlPdXRwdXQ6ITEscGFyc2VyOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO2E9dGhpcy5DTEFTU19OQU1FO3RoaXMubmFtZT1hLnN1YnN0cmluZyhhLmxhc3RJbmRleE9mKCIuIikrMSl9LGdldFZlcnNpb246ZnVuY3Rpb24oYSxiKXt2YXIgYzthPyhjPXRoaXMudmVyc2lvbixjfHwoYz1hLmdldEF0dHJpYnV0ZSgidmVyc2lvbiIpLGN8fChjPXRoaXMuZGVmYXVsdFZlcnNpb24pKSk6Yz1iJiZiLnZlcnNpb258fHRoaXMudmVyc2lvbnx8dGhpcy5kZWZhdWx0VmVyc2lvbjtyZXR1cm4gY30sZ2V0UGFyc2VyOmZ1bmN0aW9uKGEpe2E9CmF8fHRoaXMuZGVmYXVsdFZlcnNpb247dmFyIGI9dGhpcy5wcm9maWxlPyJfIit0aGlzLnByb2ZpbGU6IiI7aWYoIXRoaXMucGFyc2VyfHx0aGlzLnBhcnNlci5WRVJTSU9OIT1hKXt2YXIgYz1PcGVuTGF5ZXJzLkZvcm1hdFt0aGlzLm5hbWVdWyJ2IithLnJlcGxhY2UoL1wuL2csIl8iKStiXTtpZighYyYmKCIiIT09YiYmdGhpcy5hbGxvd0ZhbGxiYWNrJiYoYj0iIixjPU9wZW5MYXllcnMuRm9ybWF0W3RoaXMubmFtZV1bInYiK2EucmVwbGFjZSgvXC4vZywiXyIpXSksIWMpKXRocm93IkNhbid0IGZpbmQgYSAiK3RoaXMubmFtZSsiIHBhcnNlciBmb3IgdmVyc2lvbiAiK2ErYjt0aGlzLnBhcnNlcj1uZXcgYyh0aGlzLm9wdGlvbnMpfXJldHVybiB0aGlzLnBhcnNlcn0sd3JpdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldFZlcnNpb24obnVsbCxiKTt0aGlzLnBhcnNlcj10aGlzLmdldFBhcnNlcihjKTtjPXRoaXMucGFyc2VyLndyaXRlKGEsYik7cmV0dXJuITE9PT10aGlzLnN0cmluZ2lmeU91dHB1dD8KYzpPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2NdKX0scmVhZDpmdW5jdGlvbihhLGIpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7dmFyIGM9dGhpcy5nZXRWZXJzaW9uKGEuZG9jdW1lbnRFbGVtZW50KTt0aGlzLnBhcnNlcj10aGlzLmdldFBhcnNlcihjKTt2YXIgZD10aGlzLnBhcnNlci5yZWFkKGEsYiksZT10aGlzLnBhcnNlci5lcnJvclByb3BlcnR5fHxudWxsO251bGwhPT1lJiZ2b2lkIDA9PT1kW2VdJiYoZT1uZXcgT3BlbkxheWVycy5Gb3JtYXQuT0dDRXhjZXB0aW9uUmVwb3J0LGQuZXJyb3I9ZS5yZWFkKGEpKTtkLnZlcnNpb249YztyZXR1cm4gZH0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQyJ9KTtPcGVuTGF5ZXJzLkZlYXR1cmU9T3BlbkxheWVycy5DbGFzcyh7bGF5ZXI6bnVsbCxpZDpudWxsLGxvbmxhdDpudWxsLGRhdGE6bnVsbCxtYXJrZXI6bnVsbCxwb3B1cENsYXNzOm51bGwscG9wdXA6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmxheWVyPWE7dGhpcy5sb25sYXQ9Yjt0aGlzLmRhdGE9bnVsbCE9Yz9jOnt9O3RoaXMuaWQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuQ0xBU1NfTkFNRSsiXyIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7bnVsbCE9dGhpcy5sYXllciYmbnVsbCE9dGhpcy5sYXllci5tYXAmJm51bGwhPXRoaXMucG9wdXAmJnRoaXMubGF5ZXIubWFwLnJlbW92ZVBvcHVwKHRoaXMucG9wdXApO251bGwhPXRoaXMubGF5ZXImJm51bGwhPXRoaXMubWFya2VyJiZ0aGlzLmxheWVyLnJlbW92ZU1hcmtlcih0aGlzLm1hcmtlcik7dGhpcy5kYXRhPXRoaXMubG9ubGF0PXRoaXMuaWQ9dGhpcy5sYXllcj1udWxsO251bGwhPXRoaXMubWFya2VyJiYKKHRoaXMuZGVzdHJveU1hcmtlcih0aGlzLm1hcmtlciksdGhpcy5tYXJrZXI9bnVsbCk7bnVsbCE9dGhpcy5wb3B1cCYmKHRoaXMuZGVzdHJveVBvcHVwKHRoaXMucG9wdXApLHRoaXMucG9wdXA9bnVsbCl9LG9uU2NyZWVuOmZ1bmN0aW9uKCl7dmFyIGE9ITE7bnVsbCE9dGhpcy5sYXllciYmbnVsbCE9dGhpcy5sYXllci5tYXAmJihhPXRoaXMubGF5ZXIubWFwLmdldEV4dGVudCgpLmNvbnRhaW5zTG9uTGF0KHRoaXMubG9ubGF0KSk7cmV0dXJuIGF9LGNyZWF0ZU1hcmtlcjpmdW5jdGlvbigpe251bGwhPXRoaXMubG9ubGF0JiYodGhpcy5tYXJrZXI9bmV3IE9wZW5MYXllcnMuTWFya2VyKHRoaXMubG9ubGF0LHRoaXMuZGF0YS5pY29uKSk7cmV0dXJuIHRoaXMubWFya2VyfSxkZXN0cm95TWFya2VyOmZ1bmN0aW9uKCl7dGhpcy5tYXJrZXIuZGVzdHJveSgpfSxjcmVhdGVQb3B1cDpmdW5jdGlvbihhKXtudWxsIT10aGlzLmxvbmxhdCYmKHRoaXMucG9wdXB8fCh0aGlzLnBvcHVwPW5ldyAodGhpcy5wb3B1cENsYXNzPwp0aGlzLnBvcHVwQ2xhc3M6T3BlbkxheWVycy5Qb3B1cC5BbmNob3JlZCkodGhpcy5pZCsiX3BvcHVwIix0aGlzLmxvbmxhdCx0aGlzLmRhdGEucG9wdXBTaXplLHRoaXMuZGF0YS5wb3B1cENvbnRlbnRIVE1MLHRoaXMubWFya2VyP3RoaXMubWFya2VyLmljb246bnVsbCxhKSksbnVsbCE9dGhpcy5kYXRhLm92ZXJmbG93JiYodGhpcy5wb3B1cC5jb250ZW50RGl2LnN0eWxlLm92ZXJmbG93PXRoaXMuZGF0YS5vdmVyZmxvdyksdGhpcy5wb3B1cC5mZWF0dXJlPXRoaXMpO3JldHVybiB0aGlzLnBvcHVwfSxkZXN0cm95UG9wdXA6ZnVuY3Rpb24oKXt0aGlzLnBvcHVwJiYodGhpcy5wb3B1cC5mZWF0dXJlPW51bGwsdGhpcy5wb3B1cC5kZXN0cm95KCksdGhpcy5wb3B1cD1udWxsKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5GZWF0dXJlIn0pO09wZW5MYXllcnMuU3RhdGU9e1VOS05PV046IlVua25vd24iLElOU0VSVDoiSW5zZXJ0IixVUERBVEU6IlVwZGF0ZSIsREVMRVRFOiJEZWxldGUifTsKT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvcj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRmVhdHVyZSx7ZmlkOm51bGwsZ2VvbWV0cnk6bnVsbCxhdHRyaWJ1dGVzOm51bGwsYm91bmRzOm51bGwsc3RhdGU6bnVsbCxzdHlsZTpudWxsLHVybDpudWxsLHJlbmRlckludGVudDoiZGVmYXVsdCIsbW9kaWZpZWQ6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkZlYXR1cmUucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbbnVsbCxudWxsLGJdKTt0aGlzLmxvbmxhdD1udWxsO3RoaXMuZ2VvbWV0cnk9YT9hOm51bGw7dGhpcy5zdGF0ZT1udWxsO3RoaXMuYXR0cmlidXRlcz17fTtiJiYodGhpcy5hdHRyaWJ1dGVzPU9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5hdHRyaWJ1dGVzLGIpKTt0aGlzLnN0eWxlPWM/YzpudWxsfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5sYXllciYmKHRoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXModGhpcyksdGhpcy5sYXllcj0KbnVsbCk7dGhpcy5tb2RpZmllZD10aGlzLmdlb21ldHJ5PW51bGw7T3BlbkxheWVycy5GZWF0dXJlLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IodGhpcy5nZW9tZXRyeT90aGlzLmdlb21ldHJ5LmNsb25lKCk6bnVsbCx0aGlzLmF0dHJpYnV0ZXMsdGhpcy5zdHlsZSl9LG9uU2NyZWVuOmZ1bmN0aW9uKGEpe3ZhciBiPSExO3RoaXMubGF5ZXImJnRoaXMubGF5ZXIubWFwJiYoYj10aGlzLmxheWVyLm1hcC5nZXRFeHRlbnQoKSxhPyhhPXRoaXMuZ2VvbWV0cnkuZ2V0Qm91bmRzKCksYj1iLmludGVyc2VjdHNCb3VuZHMoYSkpOmI9Yi50b0dlb21ldHJ5KCkuaW50ZXJzZWN0cyh0aGlzLmdlb21ldHJ5KSk7cmV0dXJuIGJ9LGdldFZpc2liaWxpdHk6ZnVuY3Rpb24oKXtyZXR1cm4hKHRoaXMuc3R5bGUmJiJub25lIj09dGhpcy5zdHlsZS5kaXNwbGF5fHwhdGhpcy5sYXllcnx8CnRoaXMubGF5ZXImJnRoaXMubGF5ZXIuc3R5bGVNYXAmJiJub25lIj09dGhpcy5sYXllci5zdHlsZU1hcC5jcmVhdGVTeW1ib2xpemVyKHRoaXMsdGhpcy5yZW5kZXJJbnRlbnQpLmRpc3BsYXl8fHRoaXMubGF5ZXImJiF0aGlzLmxheWVyLmdldFZpc2liaWxpdHkoKSl9LGNyZWF0ZU1hcmtlcjpmdW5jdGlvbigpe3JldHVybiBudWxsfSxkZXN0cm95TWFya2VyOmZ1bmN0aW9uKCl7fSxjcmVhdGVQb3B1cDpmdW5jdGlvbigpe3JldHVybiBudWxsfSxhdFBvaW50OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0hMTt0aGlzLmdlb21ldHJ5JiYoZD10aGlzLmdlb21ldHJ5LmF0UG9pbnQoYSxiLGMpKTtyZXR1cm4gZH0sZGVzdHJveVBvcHVwOmZ1bmN0aW9uKCl7fSxtb3ZlOmZ1bmN0aW9uKGEpe2lmKHRoaXMubGF5ZXImJnRoaXMuZ2VvbWV0cnkubW92ZSl7YT0iT3BlbkxheWVycy5Mb25MYXQiPT1hLkNMQVNTX05BTUU/dGhpcy5sYXllci5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChhKTphO3ZhciBiPQp0aGlzLmxheWVyLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMuZ2VvbWV0cnkuZ2V0Qm91bmRzKCkuZ2V0Q2VudGVyTG9uTGF0KCkpLGM9dGhpcy5sYXllci5tYXAuZ2V0UmVzb2x1dGlvbigpO3RoaXMuZ2VvbWV0cnkubW92ZShjKihhLngtYi54KSxjKihiLnktYS55KSk7dGhpcy5sYXllci5kcmF3RmVhdHVyZSh0aGlzKTtyZXR1cm4gYn19LHRvU3RhdGU6ZnVuY3Rpb24oYSl7aWYoYT09T3BlbkxheWVycy5TdGF0ZS5VUERBVEUpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgT3BlbkxheWVycy5TdGF0ZS5VTktOT1dOOmNhc2UgT3BlbkxheWVycy5TdGF0ZS5ERUxFVEU6dGhpcy5zdGF0ZT1hfWVsc2UgaWYoYT09T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgT3BlbkxheWVycy5TdGF0ZS5VTktOT1dOOmJyZWFrO2RlZmF1bHQ6dGhpcy5zdGF0ZT1hfWVsc2UgaWYoYT09T3BlbkxheWVycy5TdGF0ZS5ERUxFVEUpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgT3BlbkxheWVycy5TdGF0ZS5VTktOT1dOOmNhc2UgT3BlbkxheWVycy5TdGF0ZS5VUERBVEU6dGhpcy5zdGF0ZT0KYX1lbHNlIGE9PU9wZW5MYXllcnMuU3RhdGUuVU5LTk9XTiYmKHRoaXMuc3RhdGU9YSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IifSk7Ck9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Iuc3R5bGU9eyJkZWZhdWx0Ijp7ZmlsbENvbG9yOiIjZWU5OTAwIixmaWxsT3BhY2l0eTowLjQsaG92ZXJGaWxsQ29sb3I6IndoaXRlIixob3ZlckZpbGxPcGFjaXR5OjAuOCxzdHJva2VDb2xvcjoiI2VlOTkwMCIsc3Ryb2tlT3BhY2l0eToxLHN0cm9rZVdpZHRoOjEsc3Ryb2tlTGluZWNhcDoicm91bmQiLHN0cm9rZURhc2hzdHlsZToic29saWQiLGhvdmVyU3Ryb2tlQ29sb3I6InJlZCIsaG92ZXJTdHJva2VPcGFjaXR5OjEsaG92ZXJTdHJva2VXaWR0aDowLjIscG9pbnRSYWRpdXM6Nixob3ZlclBvaW50UmFkaXVzOjEsaG92ZXJQb2ludFVuaXQ6IiUiLHBvaW50ZXJFdmVudHM6InZpc2libGVQYWludGVkIixjdXJzb3I6ImluaGVyaXQiLGZvbnRDb2xvcjoiIzAwMDAwMCIsbGFiZWxBbGlnbjoiY20iLGxhYmVsT3V0bGluZUNvbG9yOiJ3aGl0ZSIsbGFiZWxPdXRsaW5lV2lkdGg6M30sc2VsZWN0OntmaWxsQ29sb3I6ImJsdWUiLGZpbGxPcGFjaXR5OjAuNCwKaG92ZXJGaWxsQ29sb3I6IndoaXRlIixob3ZlckZpbGxPcGFjaXR5OjAuOCxzdHJva2VDb2xvcjoiYmx1ZSIsc3Ryb2tlT3BhY2l0eToxLHN0cm9rZVdpZHRoOjIsc3Ryb2tlTGluZWNhcDoicm91bmQiLHN0cm9rZURhc2hzdHlsZToic29saWQiLGhvdmVyU3Ryb2tlQ29sb3I6InJlZCIsaG92ZXJTdHJva2VPcGFjaXR5OjEsaG92ZXJTdHJva2VXaWR0aDowLjIscG9pbnRSYWRpdXM6Nixob3ZlclBvaW50UmFkaXVzOjEsaG92ZXJQb2ludFVuaXQ6IiUiLHBvaW50ZXJFdmVudHM6InZpc2libGVQYWludGVkIixjdXJzb3I6InBvaW50ZXIiLGZvbnRDb2xvcjoiIzAwMDAwMCIsbGFiZWxBbGlnbjoiY20iLGxhYmVsT3V0bGluZUNvbG9yOiJ3aGl0ZSIsbGFiZWxPdXRsaW5lV2lkdGg6M30sdGVtcG9yYXJ5OntmaWxsQ29sb3I6IiM2NmNjY2MiLGZpbGxPcGFjaXR5OjAuMixob3ZlckZpbGxDb2xvcjoid2hpdGUiLGhvdmVyRmlsbE9wYWNpdHk6MC44LHN0cm9rZUNvbG9yOiIjNjZjY2NjIixzdHJva2VPcGFjaXR5OjEsCnN0cm9rZUxpbmVjYXA6InJvdW5kIixzdHJva2VXaWR0aDoyLHN0cm9rZURhc2hzdHlsZToic29saWQiLGhvdmVyU3Ryb2tlQ29sb3I6InJlZCIsaG92ZXJTdHJva2VPcGFjaXR5OjEsaG92ZXJTdHJva2VXaWR0aDowLjIscG9pbnRSYWRpdXM6Nixob3ZlclBvaW50UmFkaXVzOjEsaG92ZXJQb2ludFVuaXQ6IiUiLHBvaW50ZXJFdmVudHM6InZpc2libGVQYWludGVkIixjdXJzb3I6ImluaGVyaXQiLGZvbnRDb2xvcjoiIzAwMDAwMCIsbGFiZWxBbGlnbjoiY20iLGxhYmVsT3V0bGluZUNvbG9yOiJ3aGl0ZSIsbGFiZWxPdXRsaW5lV2lkdGg6M30sImRlbGV0ZSI6e2Rpc3BsYXk6Im5vbmUifX07T3BlbkxheWVycy5TdHlsZT1PcGVuTGF5ZXJzLkNsYXNzKHtpZDpudWxsLG5hbWU6bnVsbCx0aXRsZTpudWxsLGRlc2NyaXB0aW9uOm51bGwsbGF5ZXJOYW1lOm51bGwsaXNEZWZhdWx0OiExLHJ1bGVzOm51bGwsY29udGV4dDpudWxsLGRlZmF1bHRTdHlsZTpudWxsLGRlZmF1bHRzUGVyU3ltYm9saXplcjohMSxwcm9wZXJ0eVN0eWxlczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYik7dGhpcy5ydWxlcz1bXTtiJiZiLnJ1bGVzJiZ0aGlzLmFkZFJ1bGVzKGIucnVsZXMpO3RoaXMuc2V0RGVmYXVsdFN0eWxlKGF8fE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Iuc3R5bGVbImRlZmF1bHQiXSk7dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMucnVsZXMubGVuZ3RoO2E8YjthKyspdGhpcy5ydWxlc1thXS5kZXN0cm95KCksCnRoaXMucnVsZXNbYV09bnVsbDt0aGlzLmRlZmF1bHRTdHlsZT10aGlzLnJ1bGVzPW51bGx9LGNyZWF0ZVN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZGVmYXVsdHNQZXJTeW1ib2xpemVyP3t9OnRoaXMuY3JlYXRlTGl0ZXJhbHMoT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLmRlZmF1bHRTdHlsZSksYSksYz10aGlzLnJ1bGVzLGQsZT1bXSxmPSExLGc9MCxoPWMubGVuZ3RoO2c8aDtnKyspZD1jW2ddLGQuZXZhbHVhdGUoYSkmJihkIGluc3RhbmNlb2YgT3BlbkxheWVycy5SdWxlJiZkLmVsc2VGaWx0ZXI/ZS5wdXNoKGQpOihmPSEwLHRoaXMuYXBwbHlTeW1ib2xpemVyKGQsYixhKSkpO2lmKCExPT1mJiYwPGUubGVuZ3RoKWZvcihmPSEwLGc9MCxoPWUubGVuZ3RoO2c8aDtnKyspdGhpcy5hcHBseVN5bWJvbGl6ZXIoZVtnXSxiLGEpOzA8Yy5sZW5ndGgmJiExPT1mJiYoYi5kaXNwbGF5PSJub25lIik7bnVsbCE9Yi5sYWJlbCYmInN0cmluZyIhPT10eXBlb2YgYi5sYWJlbCYmCihiLmxhYmVsPVN0cmluZyhiLmxhYmVsKSk7cmV0dXJuIGJ9LGFwcGx5U3ltYm9saXplcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yy5nZW9tZXRyeT90aGlzLmdldFN5bWJvbGl6ZXJQcmVmaXgoYy5nZW9tZXRyeSk6T3BlbkxheWVycy5TdHlsZS5TWU1CT0xJWkVSX1BSRUZJWEVTWzBdO2E9YS5zeW1ib2xpemVyW2RdfHxhLnN5bWJvbGl6ZXI7ITA9PT10aGlzLmRlZmF1bHRzUGVyU3ltYm9saXplciYmKGQ9dGhpcy5kZWZhdWx0U3R5bGUsT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx7cG9pbnRSYWRpdXM6ZC5wb2ludFJhZGl1c30pLCEwIT09YS5zdHJva2UmJiEwIT09YS5ncmFwaGljfHxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHtzdHJva2VXaWR0aDpkLnN0cm9rZVdpZHRoLHN0cm9rZUNvbG9yOmQuc3Ryb2tlQ29sb3Isc3Ryb2tlT3BhY2l0eTpkLnN0cm9rZU9wYWNpdHksc3Ryb2tlRGFzaHN0eWxlOmQuc3Ryb2tlRGFzaHN0eWxlLHN0cm9rZUxpbmVjYXA6ZC5zdHJva2VMaW5lY2FwfSksCiEwIT09YS5maWxsJiYhMCE9PWEuZ3JhcGhpY3x8T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx7ZmlsbENvbG9yOmQuZmlsbENvbG9yLGZpbGxPcGFjaXR5OmQuZmlsbE9wYWNpdHl9KSwhMD09PWEuZ3JhcGhpYyYmT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx7cG9pbnRSYWRpdXM6dGhpcy5kZWZhdWx0U3R5bGUucG9pbnRSYWRpdXMsZXh0ZXJuYWxHcmFwaGljOnRoaXMuZGVmYXVsdFN0eWxlLmV4dGVybmFsR3JhcGhpYyxncmFwaGljTmFtZTp0aGlzLmRlZmF1bHRTdHlsZS5ncmFwaGljTmFtZSxncmFwaGljT3BhY2l0eTp0aGlzLmRlZmF1bHRTdHlsZS5ncmFwaGljT3BhY2l0eSxncmFwaGljV2lkdGg6dGhpcy5kZWZhdWx0U3R5bGUuZ3JhcGhpY1dpZHRoLGdyYXBoaWNIZWlnaHQ6dGhpcy5kZWZhdWx0U3R5bGUuZ3JhcGhpY0hlaWdodCxncmFwaGljWE9mZnNldDp0aGlzLmRlZmF1bHRTdHlsZS5ncmFwaGljWE9mZnNldCxncmFwaGljWU9mZnNldDp0aGlzLmRlZmF1bHRTdHlsZS5ncmFwaGljWU9mZnNldH0pKTsKcmV0dXJuIHRoaXMuY3JlYXRlTGl0ZXJhbHMoT3BlbkxheWVycy5VdGlsLmV4dGVuZChiLGEpLGMpfSxjcmVhdGVMaXRlcmFsczpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYi5hdHRyaWJ1dGVzfHxiLmRhdGEpO09wZW5MYXllcnMuVXRpbC5leHRlbmQoYyx0aGlzLmNvbnRleHQpO2Zvcih2YXIgZCBpbiB0aGlzLnByb3BlcnR5U3R5bGVzKWFbZF09T3BlbkxheWVycy5TdHlsZS5jcmVhdGVMaXRlcmFsKGFbZF0sYyxiLGQpO3JldHVybiBhfSxmaW5kUHJvcGVydHlTdHlsZXM6ZnVuY3Rpb24oKXt2YXIgYT17fTt0aGlzLmFkZFByb3BlcnR5U3R5bGVzKGEsdGhpcy5kZWZhdWx0U3R5bGUpO2Zvcih2YXIgYj10aGlzLnJ1bGVzLGMsZCxlPTAsZj1iLmxlbmd0aDtlPGY7ZSsrKXtjPWJbZV0uc3ltYm9saXplcjtmb3IodmFyIGcgaW4gYylpZihkPWNbZ10sIm9iamVjdCI9PXR5cGVvZiBkKXRoaXMuYWRkUHJvcGVydHlTdHlsZXMoYSxkKTtlbHNle3RoaXMuYWRkUHJvcGVydHlTdHlsZXMoYSwKYyk7YnJlYWt9fXJldHVybiBhfSxhZGRQcm9wZXJ0eVN0eWxlczpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7Zm9yKGQgaW4gYiljPWJbZF0sInN0cmluZyI9PXR5cGVvZiBjJiZjLm1hdGNoKC9cJFx7XHcrXH0vKSYmKGFbZF09ITApO3JldHVybiBhfSxhZGRSdWxlczpmdW5jdGlvbihhKXtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnJ1bGVzLGEpO3RoaXMucHJvcGVydHlTdHlsZXM9dGhpcy5maW5kUHJvcGVydHlTdHlsZXMoKX0sc2V0RGVmYXVsdFN0eWxlOmZ1bmN0aW9uKGEpe3RoaXMuZGVmYXVsdFN0eWxlPWE7dGhpcy5wcm9wZXJ0eVN0eWxlcz10aGlzLmZpbmRQcm9wZXJ0eVN0eWxlcygpfSxnZXRTeW1ib2xpemVyUHJlZml4OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1PcGVuTGF5ZXJzLlN0eWxlLlNZTUJPTElaRVJfUFJFRklYRVMsYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKylpZigtMSE9YS5DTEFTU19OQU1FLmluZGV4T2YoYltjXSkpcmV0dXJuIGJbY119LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9Ck9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcyk7aWYodGhpcy5ydWxlcyl7YS5ydWxlcz1bXTtmb3IodmFyIGI9MCxjPXRoaXMucnVsZXMubGVuZ3RoO2I8YzsrK2IpYS5ydWxlcy5wdXNoKHRoaXMucnVsZXNbYl0uY2xvbmUoKSl9YS5jb250ZXh0PXRoaXMuY29udGV4dCYmT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLmNvbnRleHQpO2I9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLmRlZmF1bHRTdHlsZSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlN0eWxlKGIsYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3R5bGUifSk7T3BlbkxheWVycy5TdHlsZS5jcmVhdGVMaXRlcmFsPWZ1bmN0aW9uKGEsYixjLGQpeyJzdHJpbmciPT10eXBlb2YgYSYmLTEhPWEuaW5kZXhPZigiJHsiKSYmKGE9T3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KGEsYixbYyxkXSksYT1pc05hTihhKXx8IWE/YTpwYXJzZUZsb2F0KGEpKTtyZXR1cm4gYX07Ck9wZW5MYXllcnMuU3R5bGUuU1lNQk9MSVpFUl9QUkVGSVhFUz1bIlBvaW50IiwiTGluZSIsIlBvbHlnb24iLCJUZXh0IiwiUmFzdGVyIl07T3BlbkxheWVycy5GaWx0ZXI9T3BlbkxheWVycy5DbGFzcyh7aW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt9LGV2YWx1YXRlOmZ1bmN0aW9uKGEpe3JldHVybiEwfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBudWxsfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdCYmT3BlbkxheWVycy5Gb3JtYXQuQ1FMP09wZW5MYXllcnMuRm9ybWF0LkNRTC5wcm90b3R5cGUud3JpdGUodGhpcyk6T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlciJ9KTtPcGVuTGF5ZXJzLkZpbHRlci5GZWF0dXJlSWQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7ZmlkczpudWxsLHR5cGU6IkZJRCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmZpZHM9W107T3BlbkxheWVycy5GaWx0ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxldmFsdWF0ZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMuZmlkcy5sZW5ndGg7YjxjO2IrKylpZigoYS5maWR8fGEuaWQpPT10aGlzLmZpZHNbYl0pcmV0dXJuITA7cmV0dXJuITF9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkZlYXR1cmVJZDtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEsdGhpcyk7YS5maWRzPXRoaXMuZmlkcy5zbGljZSgpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlci5GZWF0dXJlSWQifSk7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRmlsdGVyLHtmaWx0ZXJzOm51bGwsdHlwZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5maWx0ZXJzPVtdO09wZW5MYXllcnMuRmlsdGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZmlsdGVycz1udWxsO09wZW5MYXllcnMuRmlsdGVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMpfSxldmFsdWF0ZTpmdW5jdGlvbihhKXt2YXIgYixjO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQ6Yj0wO2ZvcihjPXRoaXMuZmlsdGVycy5sZW5ndGg7YjxjO2IrKylpZighMT09dGhpcy5maWx0ZXJzW2JdLmV2YWx1YXRlKGEpKXJldHVybiExO3JldHVybiEwO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5PUjpiPTA7Zm9yKGM9dGhpcy5maWx0ZXJzLmxlbmd0aDtiPApjO2IrKylpZighMD09dGhpcy5maWx0ZXJzW2JdLmV2YWx1YXRlKGEpKXJldHVybiEwO3JldHVybiExO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5OT1Q6cmV0dXJuIXRoaXMuZmlsdGVyc1swXS5ldmFsdWF0ZShhKX19LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuZmlsdGVycy5sZW5ndGg7YjxjOysrYilhLnB1c2godGhpcy5maWx0ZXJzW2JdLmNsb25lKCkpO3JldHVybiBuZXcgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbCh7dHlwZTp0aGlzLnR5cGUsZmlsdGVyczphfSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwifSk7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQ9IiYmIjtPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLk9SPSJ8fCI7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5OT1Q9IiEiO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7dHlwZTpudWxsLHByb3BlcnR5Om51bGwsdmFsdWU6bnVsbCxtYXRjaENhc2U6ITAsbG93ZXJCb3VuZGFyeTpudWxsLHVwcGVyQm91bmRhcnk6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRmlsdGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTt0aGlzLnR5cGU9PT1PcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxJS0UmJnZvaWQgMD09PWEubWF0Y2hDYXNlJiYodGhpcy5tYXRjaENhc2U9bnVsbCl9LGV2YWx1YXRlOmZ1bmN0aW9uKGEpe2EgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yJiYoYT1hLmF0dHJpYnV0ZXMpO3ZhciBiPSExO2E9YVt0aGlzLnByb3BlcnR5XTtzd2l0Y2godGhpcy50eXBlKXtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE86Yj10aGlzLnZhbHVlOwpiPXRoaXMubWF0Y2hDYXNlfHwic3RyaW5nIiE9dHlwZW9mIGF8fCJzdHJpbmciIT10eXBlb2YgYj9hPT1iOmEudG9VcHBlckNhc2UoKT09Yi50b1VwcGVyQ2FzZSgpO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5OT1RfRVFVQUxfVE86Yj10aGlzLnZhbHVlO2I9dGhpcy5tYXRjaENhc2V8fCJzdHJpbmciIT10eXBlb2YgYXx8InN0cmluZyIhPXR5cGVvZiBiP2EhPWI6YS50b1VwcGVyQ2FzZSgpIT1iLnRvVXBwZXJDYXNlKCk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTjpiPWE8dGhpcy52YWx1ZTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uR1JFQVRFUl9USEFOOmI9YT50aGlzLnZhbHVlO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MRVNTX1RIQU5fT1JfRVFVQUxfVE86Yj1hPD10aGlzLnZhbHVlO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5HUkVBVEVSX1RIQU5fT1JfRVFVQUxfVE86Yj0KYT49dGhpcy52YWx1ZTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uQkVUV0VFTjpiPWE+PXRoaXMubG93ZXJCb3VuZGFyeSYmYTw9dGhpcy51cHBlckJvdW5kYXJ5O2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MSUtFOmI9UmVnRXhwKHRoaXMudmFsdWUsImdpIikudGVzdChhKTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uSVNfTlVMTDpiPW51bGw9PT1hfXJldHVybiBifSx2YWx1ZTJyZWdleDpmdW5jdGlvbihhLGIsYyl7aWYoIi4iPT1hKXRocm93IEVycm9yKCInLicgaXMgYW4gdW5zdXBwb3J0ZWQgd2lsZENhcmQgY2hhcmFjdGVyIGZvciBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uIik7YT1hP2E6IioiO2I9Yj9iOiIuIjt0aGlzLnZhbHVlPXRoaXMudmFsdWUucmVwbGFjZShSZWdFeHAoIlxcIisoYz9jOiIhIikrIigufCQpIiwiZyIpLCJcXCQxIik7dGhpcy52YWx1ZT10aGlzLnZhbHVlLnJlcGxhY2UoUmVnRXhwKCJcXCIrCmIsImciKSwiLiIpO3RoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKFJlZ0V4cCgiXFwiK2EsImciKSwiLioiKTt0aGlzLnZhbHVlPXRoaXMudmFsdWUucmVwbGFjZShSZWdFeHAoIlxcXFwuXFwqIiwiZyIpLCJcXCIrYSk7cmV0dXJuIHRoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKFJlZ0V4cCgiXFxcXFxcLiIsImciKSwiXFwiK2IpfSxyZWdleDJ2YWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMudmFsdWUsYT1hLnJlcGxhY2UoLyEvZywiISEiKSxhPWEucmVwbGFjZSgvKFxcKT9cXFwuL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz9hOiIhLiJ9KSxhPWEucmVwbGFjZSgvKFxcKT9cXFwqL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz9hOiIhKiJ9KSxhPWEucmVwbGFjZSgvXFxcXC9nLCJcXCIpO3JldHVybiBhPWEucmVwbGFjZSgvXC5cKi9nLCIqIil9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5leHRlbmQobmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24sCnRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uIn0pO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE89Ij09IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLk5PVF9FUVVBTF9UTz0iIT0iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOPSI8IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTj0iPiI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MRVNTX1RIQU5fT1JfRVFVQUxfVE89Ijw9IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UTz0iPj0iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uQkVUV0VFTj0iLi4iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRT0ifiI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5JU19OVUxMPSJOVUxMIjtPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDLHtkZWZhdWx0VmVyc2lvbjoiMS4wLjAiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkZpbHRlciJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNUPWZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSxPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULkRFRkFVTFRTKTt2YXIgYj1PcGVuTGF5ZXJzLkZvcm1hdC5XRlNUWyJ2IithLnZlcnNpb24ucmVwbGFjZSgvXC4vZywiXyIpXTtpZighYil0aHJvdyJVbnN1cHBvcnRlZCBXRlNUIHZlcnNpb246ICIrYS52ZXJzaW9uO3JldHVybiBuZXcgYihhKX07T3BlbkxheWVycy5Gb3JtYXQuV0ZTVC5ERUZBVUxUUz17dmVyc2lvbjoiMS4wLjAifTtPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5GaWx0ZXIse3R5cGU6bnVsbCxwcm9wZXJ0eTpudWxsLHZhbHVlOm51bGwsZGlzdGFuY2U6bnVsbCxkaXN0YW5jZVVuaXRzOm51bGwsZXZhbHVhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkJCT1g6Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLklOVEVSU0VDVFM6aWYoYS5nZW9tZXRyeSl7dmFyIGM9dGhpcy52YWx1ZTsiT3BlbkxheWVycy5Cb3VuZHMiPT10aGlzLnZhbHVlLkNMQVNTX05BTUUmJihjPXRoaXMudmFsdWUudG9HZW9tZXRyeSgpKTthLmdlb21ldHJ5LmludGVyc2VjdHMoYykmJihiPSEwKX1icmVhaztkZWZhdWx0OnRocm93IEVycm9yKCJldmFsdWF0ZSBpcyBub3QgaW1wbGVtZW50ZWQgZm9yIHRoaXMgZmlsdGVyIHR5cGUuIik7fXJldHVybiBifSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPQpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7dmFsdWU6dGhpcy52YWx1ZSYmdGhpcy52YWx1ZS5jbG9uZSYmdGhpcy52YWx1ZS5jbG9uZSgpfSx0aGlzKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwifSk7T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5CQk9YPSJCQk9YIjtPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLklOVEVSU0VDVFM9IklOVEVSU0VDVFMiO09wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuRFdJVEhJTj0iRFdJVEhJTiI7T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5XSVRISU49IldJVEhJTiI7T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5DT05UQUlOUz0iQ09OVEFJTlMiO09wZW5MYXllcnMuRm9ybWF0LldGU1QudjE9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e3hsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIix3ZnM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzIixnbWw6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIixvZ2M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb2djIixvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzIn0sZGVmYXVsdFByZWZpeDoid2ZzIix2ZXJzaW9uOm51bGwsc2NoZW1hTG9jYXRpb25zOm51bGwsc3JzTmFtZTpudWxsLGV4dHJhY3RBdHRyaWJ1dGVzOiEwLHh5OiEwLHN0YXRlTmFtZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5zdGF0ZU5hbWU9e307dGhpcy5zdGF0ZU5hbWVbT3BlbkxheWVycy5TdGF0ZS5JTlNFUlRdPSJ3ZnM6SW5zZXJ0Ijt0aGlzLnN0YXRlTmFtZVtPcGVuTGF5ZXJzLlN0YXRlLlVQREFURV09CiJ3ZnM6VXBkYXRlIjt0aGlzLnN0YXRlTmFtZVtPcGVuTGF5ZXJzLlN0YXRlLkRFTEVURV09IndmczpEZWxldGUiO09wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LGdldFNyc05hbWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iJiZiLnNyc05hbWU7Y3x8KGM9YSYmYS5sYXllcj9hLmxheWVyLnByb2plY3Rpb24uZ2V0Q29kZSgpOnRoaXMuc3JzTmFtZSk7cmV0dXJuIGN9LHJlYWQ6ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIse291dHB1dDoiZmVhdHVyZXMifSk7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTthJiY5PT1hLm5vZGVUeXBlJiYoYT1hLmRvY3VtZW50RWxlbWVudCk7dmFyIGM9e307YSYmdGhpcy5yZWFkTm9kZShhLGMsITApO2MuZmVhdHVyZXMmJiJmZWF0dXJlcyI9PT1iLm91dHB1dCYmCihjPWMuZmVhdHVyZXMpO3JldHVybiBjfSxyZWFkZXJzOnt3ZnM6e0ZlYXR1cmVDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsYil7Yi5mZWF0dXJlcz1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9fX0sd3JpdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLndyaXRlTm9kZSgid2ZzOlRyYW5zYWN0aW9uIix7ZmVhdHVyZXM6YSxvcHRpb25zOmJ9KSxkPXRoaXMuc2NoZW1hTG9jYXRpb25BdHRyKCk7ZCYmdGhpcy5zZXRBdHRyaWJ1dGVOUyhjLHRoaXMubmFtZXNwYWNlcy54c2ksInhzaTpzY2hlbWFMb2NhdGlvbiIsZCk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbY10pfSx3cml0ZXJzOnt3ZnM6e0dldEZlYXR1cmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6R2V0RmVhdHVyZSIse2F0dHJpYnV0ZXM6e3NlcnZpY2U6IldGUyIsdmVyc2lvbjp0aGlzLnZlcnNpb24saGFuZGxlOmEmJmEuaGFuZGxlLApvdXRwdXRGb3JtYXQ6YSYmYS5vdXRwdXRGb3JtYXQsbWF4RmVhdHVyZXM6YSYmYS5tYXhGZWF0dXJlcywieHNpOnNjaGVtYUxvY2F0aW9uIjp0aGlzLnNjaGVtYUxvY2F0aW9uQXR0cihhKX19KTtpZigic3RyaW5nIj09dHlwZW9mIHRoaXMuZmVhdHVyZVR5cGUpdGhpcy53cml0ZU5vZGUoIlF1ZXJ5IixhLGIpO2Vsc2UgZm9yKHZhciBjPTAsZD10aGlzLmZlYXR1cmVUeXBlLmxlbmd0aDtjPGQ7YysrKWEuZmVhdHVyZVR5cGU9dGhpcy5mZWF0dXJlVHlwZVtjXSx0aGlzLndyaXRlTm9kZSgiUXVlcnkiLGEsYik7cmV0dXJuIGJ9LFRyYW5zYWN0aW9uOmZ1bmN0aW9uKGEpe2E9YXx8e307dmFyIGI9YS5vcHRpb25zfHx7fSxjPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOlRyYW5zYWN0aW9uIix7YXR0cmlidXRlczp7c2VydmljZToiV0ZTIix2ZXJzaW9uOnRoaXMudmVyc2lvbixoYW5kbGU6Yi5oYW5kbGV9fSksZCxlPWEuZmVhdHVyZXM7aWYoZSl7ITA9PT1iLm11bHRpJiZPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMuZ2VvbWV0cnlUeXBlcywKeyJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50IjoiTXVsdGlQb2ludCIsIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyI6ITA9PT10aGlzLm11bHRpQ3VydmU/Ik11bHRpQ3VydmUiOiJNdWx0aUxpbmVTdHJpbmciLCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iOiEwPT09dGhpcy5tdWx0aVN1cmZhY2U/Ik11bHRpU3VyZmFjZSI6Ik11bHRpUG9seWdvbiJ9KTt2YXIgZixnO2E9MDtmb3IoZD1lLmxlbmd0aDthPGQ7KythKWc9ZVthXSwoZj10aGlzLnN0YXRlTmFtZVtnLnN0YXRlXSkmJnRoaXMud3JpdGVOb2RlKGYse2ZlYXR1cmU6ZyxvcHRpb25zOmJ9LGMpOyEwPT09Yi5tdWx0aSYmdGhpcy5zZXRHZW9tZXRyeVR5cGVzKCl9aWYoYi5uYXRpdmVFbGVtZW50cylmb3IoYT0wLGQ9Yi5uYXRpdmVFbGVtZW50cy5sZW5ndGg7YTxkOysrYSl0aGlzLndyaXRlTm9kZSgid2ZzOk5hdGl2ZSIsYi5uYXRpdmVFbGVtZW50c1thXSxjKTtyZXR1cm4gY30sTmF0aXZlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpOYXRpdmUiLAp7YXR0cmlidXRlczp7dmVuZG9ySWQ6YS52ZW5kb3JJZCxzYWZlVG9JZ25vcmU6YS5zYWZlVG9JZ25vcmV9LHZhbHVlOmEudmFsdWV9KX0sSW5zZXJ0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZmVhdHVyZTthPWEub3B0aW9uczthPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOkluc2VydCIse2F0dHJpYnV0ZXM6e2hhbmRsZTphJiZhLmhhbmRsZX19KTt0aGlzLnNyc05hbWU9dGhpcy5nZXRTcnNOYW1lKGIpO3RoaXMud3JpdGVOb2RlKCJmZWF0dXJlOl90eXBlTmFtZSIsYixhKTtyZXR1cm4gYX0sVXBkYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZmVhdHVyZTthPWEub3B0aW9uczthPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOlVwZGF0ZSIse2F0dHJpYnV0ZXM6e2hhbmRsZTphJiZhLmhhbmRsZSx0eXBlTmFtZToodGhpcy5mZWF0dXJlTlM/dGhpcy5mZWF0dXJlUHJlZml4KyI6IjoiIikrdGhpcy5mZWF0dXJlVHlwZX19KTt0aGlzLmZlYXR1cmVOUyYmYS5zZXRBdHRyaWJ1dGUoInhtbG5zOiIrCnRoaXMuZmVhdHVyZVByZWZpeCx0aGlzLmZlYXR1cmVOUyk7dmFyIGM9Yi5tb2RpZmllZDtudWxsPT09dGhpcy5nZW9tZXRyeU5hbWV8fGMmJnZvaWQgMD09PWMuZ2VvbWV0cnl8fCh0aGlzLnNyc05hbWU9dGhpcy5nZXRTcnNOYW1lKGIpLHRoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eSIse25hbWU6dGhpcy5nZW9tZXRyeU5hbWUsdmFsdWU6Yi5nZW9tZXRyeX0sYSkpO2Zvcih2YXIgZCBpbiBiLmF0dHJpYnV0ZXMpdm9pZCAwPT09Yi5hdHRyaWJ1dGVzW2RdfHxjJiZjLmF0dHJpYnV0ZXMmJighYy5hdHRyaWJ1dGVzfHx2b2lkIDA9PT1jLmF0dHJpYnV0ZXNbZF0pfHx0aGlzLndyaXRlTm9kZSgiUHJvcGVydHkiLHtuYW1lOmQsdmFsdWU6Yi5hdHRyaWJ1dGVzW2RdfSxhKTt0aGlzLndyaXRlTm9kZSgib2djOkZpbHRlciIsbmV3IE9wZW5MYXllcnMuRmlsdGVyLkZlYXR1cmVJZCh7ZmlkczpbYi5maWRdfSksYSk7cmV0dXJuIGF9LFByb3BlcnR5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOlByb3BlcnR5Iik7CnRoaXMud3JpdGVOb2RlKCJOYW1lIixhLm5hbWUsYik7bnVsbCE9PWEudmFsdWUmJnRoaXMud3JpdGVOb2RlKCJWYWx1ZSIsYS52YWx1ZSxiKTtyZXR1cm4gYn0sTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6TmFtZSIse3ZhbHVlOmF9KX0sVmFsdWU6ZnVuY3Rpb24oYSl7dmFyIGI7YSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnk/KGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6VmFsdWUiKSxhPXRoaXMud3JpdGVOb2RlKCJmZWF0dXJlOl9nZW9tZXRyeSIsYSkuZmlyc3RDaGlsZCxiLmFwcGVuZENoaWxkKGEpKTpiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOlZhbHVlIix7dmFsdWU6YX0pO3JldHVybiBifSxEZWxldGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5mZWF0dXJlO2E9YS5vcHRpb25zO2E9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6RGVsZXRlIix7YXR0cmlidXRlczp7aGFuZGxlOmEmJgphLmhhbmRsZSx0eXBlTmFtZToodGhpcy5mZWF0dXJlTlM/dGhpcy5mZWF0dXJlUHJlZml4KyI6IjoiIikrdGhpcy5mZWF0dXJlVHlwZX19KTt0aGlzLmZlYXR1cmVOUyYmYS5zZXRBdHRyaWJ1dGUoInhtbG5zOiIrdGhpcy5mZWF0dXJlUHJlZml4LHRoaXMuZmVhdHVyZU5TKTt0aGlzLndyaXRlTm9kZSgib2djOkZpbHRlciIsbmV3IE9wZW5MYXllcnMuRmlsdGVyLkZlYXR1cmVJZCh7ZmlkczpbYi5maWRdfSksYSk7cmV0dXJuIGF9fX0sc2NoZW1hTG9jYXRpb25BdHRyOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7ZmVhdHVyZVByZWZpeDp0aGlzLmZlYXR1cmVQcmVmaXgsc2NoZW1hOnRoaXMuc2NoZW1hfSxhKTt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuc2NoZW1hTG9jYXRpb25zKTthLnNjaGVtYSYmKGJbYS5mZWF0dXJlUHJlZml4XT1hLnNjaGVtYSk7YT1bXTt2YXIgYyxkO2ZvcihkIGluIGIpKGM9dGhpcy5uYW1lc3BhY2VzW2RdKSYmCmEucHVzaChjKyIgIitiW2RdKTtyZXR1cm4gYS5qb2luKCIgIil8fHZvaWQgMH0sc2V0RmlsdGVyUHJvcGVydHk6ZnVuY3Rpb24oYSl7aWYoYS5maWx0ZXJzKWZvcih2YXIgYj0wLGM9YS5maWx0ZXJzLmxlbmd0aDtiPGM7KytiKU9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLnNldEZpbHRlclByb3BlcnR5LmNhbGwodGhpcyxhLmZpbHRlcnNbYl0pO2Vsc2UgYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwmJiFhLnByb3BlcnR5JiYoYS5wcm9wZXJ0eT10aGlzLmdlb21ldHJ5TmFtZSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEifSk7T3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLHtjb21wb25lbnRUeXBlczpbIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyJdLGdldEFyZWE6ZnVuY3Rpb24oKXt2YXIgYT0wO2lmKHRoaXMuY29tcG9uZW50cyYmMDx0aGlzLmNvbXBvbmVudHMubGVuZ3RoKWZvcih2YXIgYT1hK01hdGguYWJzKHRoaXMuY29tcG9uZW50c1swXS5nZXRBcmVhKCkpLGI9MSxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhLT1NYXRoLmFicyh0aGlzLmNvbXBvbmVudHNbYl0uZ2V0QXJlYSgpKTtyZXR1cm4gYX0sZ2V0R2VvZGVzaWNBcmVhOmZ1bmN0aW9uKGEpe3ZhciBiPTA7aWYodGhpcy5jb21wb25lbnRzJiYwPHRoaXMuY29tcG9uZW50cy5sZW5ndGgpZm9yKHZhciBiPWIrTWF0aC5hYnModGhpcy5jb21wb25lbnRzWzBdLmdldEdlb2Rlc2ljQXJlYShhKSksYz0xLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPApkO2MrKyliLT1NYXRoLmFicyh0aGlzLmNvbXBvbmVudHNbY10uZ2V0R2VvZGVzaWNBcmVhKGEpKTtyZXR1cm4gYn0sY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNvbXBvbmVudHMubGVuZ3RoLGM9ITE7aWYoMDxiJiYoYz10aGlzLmNvbXBvbmVudHNbMF0uY29udGFpbnNQb2ludChhKSwxIT09YyYmYyYmMTxiKSlmb3IodmFyIGQsZT0xO2U8YjsrK2UpaWYoZD10aGlzLmNvbXBvbmVudHNbZV0uY29udGFpbnNQb2ludChhKSl7Yz0xPT09ZD8xOiExO2JyZWFrfXJldHVybiBjfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKGEpe3ZhciBiPSExLGMsZDtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWEuQ0xBU1NfTkFNRSliPXRoaXMuY29udGFpbnNQb2ludChhKTtlbHNlIGlmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciPT1hLkNMQVNTX05BTUV8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciPT1hLkNMQVNTX05BTUUpe2M9MDtmb3IoZD0KdGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQmJiEoYj1hLmludGVyc2VjdHModGhpcy5jb21wb25lbnRzW2NdKSk7KytjKTtpZighYilmb3IoYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQmJiEoYj10aGlzLmNvbnRhaW5zUG9pbnQoYS5jb21wb25lbnRzW2NdKSk7KytjKTt9ZWxzZSBmb3IoYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQmJiEoYj10aGlzLmludGVyc2VjdHMoYS5jb21wb25lbnRzW2NdKSk7KytjKTtpZighYiYmIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI9PWEuQ0xBU1NfTkFNRSl7dmFyIGU9dGhpcy5jb21wb25lbnRzWzBdO2M9MDtmb3IoZD1lLmNvbXBvbmVudHMubGVuZ3RoO2M8ZCYmIShiPWEuY29udGFpbnNQb2ludChlLmNvbXBvbmVudHNbY10pKTsrK2MpO31yZXR1cm4gYn0sZGlzdGFuY2VUbzpmdW5jdGlvbihhLGIpe3JldHVybiBiJiYhMT09PWIuZWRnZSYmdGhpcy5pbnRlcnNlY3RzKGEpPzA6T3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLnByb3RvdHlwZS5kaXN0YW5jZVRvLmFwcGx5KHRoaXMsClthLGJdKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbi5jcmVhdGVSZWd1bGFyUG9seWdvbj1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1NYXRoLlBJKigxL2MtMC41KTtkJiYoZSs9ZC8xODAqTWF0aC5QSSk7Zm9yKHZhciBmLGc9W10saD0wO2g8YzsrK2gpZj1lKzIqaCpNYXRoLlBJL2MsZD1hLngrYipNYXRoLmNvcyhmKSxmPWEueStiKk1hdGguc2luKGYpLGcucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChkLGYpKTthPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcoZyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24oW2FdKX07T3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24se2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uIl0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24ifSk7T3BlbkxheWVycy5Gb3JtYXQuR01MPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtmZWF0dXJlTlM6Imh0dHA6Ly9tYXBzZXJ2ZXIuZ2lzLnVtbi5lZHUvbWFwc2VydmVyIixmZWF0dXJlUHJlZml4OiJmZWF0dXJlIixmZWF0dXJlTmFtZToiZmVhdHVyZU1lbWJlciIsbGF5ZXJOYW1lOiJmZWF0dXJlcyIsZ2VvbWV0cnlOYW1lOiJnZW9tZXRyeSIsY29sbGVjdGlvbk5hbWU6IkZlYXR1cmVDb2xsZWN0aW9uIixnbWxuczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwiLGV4dHJhY3RBdHRyaWJ1dGVzOiEwLHh5OiEwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5yZWdFeGVzPXt0cmltU3BhY2U6L15ccyp8XHMqJC9nLHJlbW92ZVNwYWNlOi9ccyovZyxzcGxpdFNwYWNlOi9ccysvLHRyaW1Db21tYTovXHMqLFxzKi9nfTtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT0KdHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEuZG9jdW1lbnRFbGVtZW50LHRoaXMuZ21sbnMsdGhpcy5mZWF0dXJlTmFtZSk7Zm9yKHZhciBiPVtdLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9dGhpcy5wYXJzZUZlYXR1cmUoYVtjXSk7ZCYmYi5wdXNoKGQpfXJldHVybiBifSxwYXJzZUZlYXR1cmU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSJNdWx0aVBvbHlnb24gUG9seWdvbiBNdWx0aUxpbmVTdHJpbmcgTGluZVN0cmluZyBNdWx0aVBvaW50IFBvaW50IEVudmVsb3BlIi5zcGxpdCgiICIpLGMsZCxlLGY9MDtmPGIubGVuZ3RoOysrZilpZihjPWJbZl0sZD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLGMpLDA8ZC5sZW5ndGgpe2lmKGU9dGhpcy5wYXJzZUdlb21ldHJ5W2MudG9Mb3dlckNhc2UoKV0pZT1lLmFwcGx5KHRoaXMsCltkWzBdXSksdGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiZlLnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7ZWxzZSB0aHJvdyBuZXcgVHlwZUVycm9yKCJVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAiK2MpO2JyZWFrfXZhciBnO2M9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywiQm94Iik7Zm9yKGY9MDtmPGMubGVuZ3RoOysrZiliPWNbZl0sZD10aGlzLnBhcnNlR2VvbWV0cnkuYm94LmFwcGx5KHRoaXMsW2JdKSxiPWIucGFyZW50Tm9kZSwiYm91bmRlZEJ5Ij09PShiLmxvY2FsTmFtZXx8Yi5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpKT9nPWQ6ZT1kLnRvR2VvbWV0cnkoKTt2YXIgaDt0aGlzLmV4dHJhY3RBdHRyaWJ1dGVzJiYoaD10aGlzLnBhcnNlQXR0cmlidXRlcyhhKSk7aD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihlLGgpO2guYm91bmRzPQpnO2guZ21sPXtmZWF0dXJlVHlwZTphLmZpcnN0Q2hpbGQubm9kZU5hbWUuc3BsaXQoIjoiKVsxXSxmZWF0dXJlTlM6YS5maXJzdENoaWxkLm5hbWVzcGFjZVVSSSxmZWF0dXJlTlNQcmVmaXg6YS5maXJzdENoaWxkLnByZWZpeH07YT1hLmZpcnN0Q2hpbGQ7Zm9yKHZhciBrO2EmJigxIT1hLm5vZGVUeXBlfHwhKGs9YS5nZXRBdHRyaWJ1dGUoImZpZCIpfHxhLmdldEF0dHJpYnV0ZSgiaWQiKSkpOylhPWEubmV4dFNpYmxpbmc7aC5maWQ9aztyZXR1cm4gaH0scGFyc2VHZW9tZXRyeTp7cG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGIsYztjPVtdO2I9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywicG9zIik7MDxiLmxlbmd0aCYmKGM9YlswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSxjPWMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxjPWMuc3BsaXQodGhpcy5yZWdFeGVzLnNwbGl0U3BhY2UpKTswPT1jLmxlbmd0aCYmKGI9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsCnRoaXMuZ21sbnMsImNvb3JkaW5hdGVzIiksMDxiLmxlbmd0aCYmKGM9YlswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSxjPWMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMucmVtb3ZlU3BhY2UsIiIpLGM9Yy5zcGxpdCgiLCIpKSk7MD09Yy5sZW5ndGgmJihiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsImNvb3JkIiksMDxiLmxlbmd0aCYmKGE9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGJbMF0sdGhpcy5nbWxucywiWCIpLGI9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGJbMF0sdGhpcy5nbWxucywiWSIpLDA8YS5sZW5ndGgmJjA8Yi5sZW5ndGgmJihjPVthWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlLGJbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWVdKSkpOzI9PWMubGVuZ3RoJiYoY1syXT1udWxsKTtyZXR1cm4gdGhpcy54eT9uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjWzBdLGNbMV0sY1syXSk6bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1sxXSwKY1swXSxjWzJdKX0sbXVsdGlwb2ludDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsIlBvaW50Iik7dmFyIGI9W107aWYoMDxhLmxlbmd0aClmb3IodmFyIGMsZD0wO2Q8YS5sZW5ndGg7KytkKShjPXRoaXMucGFyc2VHZW9tZXRyeS5wb2ludC5hcHBseSh0aGlzLFthW2RdXSkpJiZiLnB1c2goYyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQoYil9LGxpbmVzdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2Q9W107dmFyIGU9W107Yz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJwb3NMaXN0Iik7aWYoMDxjLmxlbmd0aCl7ZD10aGlzLmdldENoaWxkVmFsdWUoY1swXSk7ZD1kLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIik7ZD1kLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKTt2YXIgZj1wYXJzZUludChjWzBdLmdldEF0dHJpYnV0ZSgiZGltZW5zaW9uIikpLApnLGgsaztmb3IoYz0wO2M8ZC5sZW5ndGgvZjsrK2MpZz1jKmYsaD1kW2ddLGs9ZFtnKzFdLGc9Mj09Zj9udWxsOmRbZysyXSx0aGlzLnh5P2UucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChoLGssZykpOmUucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChrLGgsZykpfWlmKDA9PWQubGVuZ3RoJiYoYz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJjb29yZGluYXRlcyIpLDA8Yy5sZW5ndGgpKWZvcihkPXRoaXMuZ2V0Q2hpbGRWYWx1ZShjWzBdKSxkPWQucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxkPWQucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbUNvbW1hLCIsIiksZj1kLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSxjPTA7YzxmLmxlbmd0aDsrK2MpZD1mW2NdLnNwbGl0KCIsIiksMj09ZC5sZW5ndGgmJihkWzJdPW51bGwpLHRoaXMueHk/ZS5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGRbMF0sCmRbMV0sZFsyXSkpOmUucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChkWzFdLGRbMF0sZFsyXSkpO2Q9bnVsbDswIT1lLmxlbmd0aCYmKGQ9Yj9uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGUpOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoZSkpO3JldHVybiBkfSxtdWx0aWxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7YT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJMaW5lU3RyaW5nIik7dmFyIGI9W107aWYoMDxhLmxlbmd0aClmb3IodmFyIGMsZD0wO2Q8YS5sZW5ndGg7KytkKShjPXRoaXMucGFyc2VHZW9tZXRyeS5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2FbZF1dKSkmJmIucHVzaChjKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKGIpfSxwb2x5Z29uOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywiTGluZWFyUmluZyIpOwp2YXIgYj1bXTtpZigwPGEubGVuZ3RoKWZvcih2YXIgYyxkPTA7ZDxhLmxlbmd0aDsrK2QpKGM9dGhpcy5wYXJzZUdlb21ldHJ5LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYVtkXSwhMF0pKSYmYi5wdXNoKGMpO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKGIpfSxtdWx0aXBvbHlnb246ZnVuY3Rpb24oYSl7YT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJQb2x5Z29uIik7dmFyIGI9W107aWYoMDxhLmxlbmd0aClmb3IodmFyIGMsZD0wO2Q8YS5sZW5ndGg7KytkKShjPXRoaXMucGFyc2VHZW9tZXRyeS5wb2x5Z29uLmFwcGx5KHRoaXMsW2FbZF1dKSkmJmIucHVzaChjKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKGIpfSxlbnZlbG9wZTpmdW5jdGlvbihhKXt2YXIgYj1bXSxjLGQsZT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJsb3dlckNvcm5lciIpO2lmKDA8ZS5sZW5ndGgpe2M9CltdOzA8ZS5sZW5ndGgmJihjPWVbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUsYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIiksYz1jLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSk7Mj09Yy5sZW5ndGgmJihjWzJdPW51bGwpO3ZhciBmPXRoaXMueHk/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1swXSxjWzFdLGNbMl0pOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMV0sY1swXSxjWzJdKX1hPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsInVwcGVyQ29ybmVyIik7aWYoMDxhLmxlbmd0aCl7Yz1bXTswPGEubGVuZ3RoJiYoYz1hWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlLGM9Yy5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLGM9Yy5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSkpOzI9PWMubGVuZ3RoJiYoY1syXT1udWxsKTt2YXIgZz10aGlzLnh5P25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMF0sCmNbMV0sY1syXSk6bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1sxXSxjWzBdLGNbMl0pfWYmJmcmJihiLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZi54LGYueSkpLGIucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChnLngsZi55KSksYi5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGcueCxnLnkpKSxiLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZi54LGcueSkpLGIucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChmLngsZi55KSksYj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGIpLGQ9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbYl0pKTtyZXR1cm4gZH0sYm94OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsImNvb3JkaW5hdGVzIiksYz1hPW51bGw7MDxiLmxlbmd0aCYmKGI9YlswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSwKYj1iLnNwbGl0KCIgIiksMj09Yi5sZW5ndGgmJihhPWJbMF0uc3BsaXQoIiwiKSxjPWJbMV0uc3BsaXQoIiwiKSkpO2lmKG51bGwhPT1hJiZudWxsIT09YylyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKHBhcnNlRmxvYXQoYVswXSkscGFyc2VGbG9hdChhWzFdKSxwYXJzZUZsb2F0KGNbMF0pLHBhcnNlRmxvYXQoY1sxXSkpfX0scGFyc2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2E9YS5maXJzdENoaWxkO2Zvcih2YXIgYyxkLGU7YTspe2lmKDE9PWEubm9kZVR5cGUpe2E9YS5jaGlsZE5vZGVzO2ZvcihjPTA7YzxhLmxlbmd0aDsrK2MpaWYoZD1hW2NdLDE9PWQubm9kZVR5cGUpaWYoZT1kLmNoaWxkTm9kZXMsMT09ZS5sZW5ndGgpe2lmKGU9ZVswXSwzPT1lLm5vZGVUeXBlfHw0PT1lLm5vZGVUeXBlKWQ9ZC5wcmVmaXg/ZC5ub2RlTmFtZS5zcGxpdCgiOiIpWzFdOmQubm9kZU5hbWUsZT1lLm5vZGVWYWx1ZS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsCiIiKSxiW2RdPWV9ZWxzZSBiW2Qubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKV09bnVsbDticmVha31hPWEubmV4dFNpYmxpbmd9cmV0dXJuIGJ9LHdyaXRlOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnMiLCJ3ZnM6Iit0aGlzLmNvbGxlY3Rpb25OYW1lKSxjPTA7YzxhLmxlbmd0aDtjKyspYi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUZlYXR1cmVYTUwoYVtjXSkpO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2JdKX0sY3JlYXRlRmVhdHVyZVhNTDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmJ1aWxkR2VvbWV0cnlOb2RlKGEuZ2VvbWV0cnkpLGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5mZWF0dXJlTlMsdGhpcy5mZWF0dXJlUHJlZml4KyI6Iit0aGlzLmdlb21ldHJ5TmFtZSk7Yy5hcHBlbmRDaGlsZChiKTsKdmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOiIrdGhpcy5mZWF0dXJlTmFtZSksZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmZlYXR1cmVOUyx0aGlzLmZlYXR1cmVQcmVmaXgrIjoiK3RoaXMubGF5ZXJOYW1lKTtkLnNldEF0dHJpYnV0ZSgiZmlkIixhLmZpZHx8YS5pZCk7ZC5hcHBlbmRDaGlsZChjKTtmb3IodmFyIGUgaW4gYS5hdHRyaWJ1dGVzKXt2YXIgYz10aGlzLmNyZWF0ZVRleHROb2RlKGEuYXR0cmlidXRlc1tlXSksZj1lLnN1YnN0cmluZyhlLmxhc3RJbmRleE9mKCI6IikrMSksZj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmZlYXR1cmVOUyx0aGlzLmZlYXR1cmVQcmVmaXgrIjoiK2YpO2YuYXBwZW5kQ2hpbGQoYyk7ZC5hcHBlbmRDaGlsZChmKX1iLmFwcGVuZENoaWxkKGQpO3JldHVybiBifSxidWlsZEdlb21ldHJ5Tm9kZTpmdW5jdGlvbihhKXt0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmdGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJgooYT1hLmNsb25lKCksYS50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pKTt2YXIgYj1hLkNMQVNTX05BTUUsYj1iLnN1YnN0cmluZyhiLmxhc3RJbmRleE9mKCIuIikrMSk7cmV0dXJuIHRoaXMuYnVpbGRHZW9tZXRyeVtiLnRvTG93ZXJDYXNlKCldLmFwcGx5KHRoaXMsW2FdKX0sYnVpbGRHZW9tZXRyeTp7cG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOlBvaW50Iik7Yi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtyZXR1cm4gYn0sbXVsdGlwb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6TXVsdGlQb2ludCIpO2E9YS5jb21wb25lbnRzO2Zvcih2YXIgYyxkLGU9MDtlPGEubGVuZ3RoO2UrKyljPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpwb2ludE1lbWJlciIpLApkPXRoaXMuYnVpbGRHZW9tZXRyeS5wb2ludC5hcHBseSh0aGlzLFthW2VdXSksYy5hcHBlbmRDaGlsZChkKSxiLmFwcGVuZENoaWxkKGMpO3JldHVybiBifSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpMaW5lU3RyaW5nIik7Yi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtyZXR1cm4gYn0sbXVsdGlsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpNdWx0aUxpbmVTdHJpbmciKTthPWEuY29tcG9uZW50cztmb3IodmFyIGMsZCxlPTA7ZTxhLmxlbmd0aDsrK2UpYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6bGluZVN0cmluZ01lbWJlciIpLGQ9dGhpcy5idWlsZEdlb21ldHJ5LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYVtlXV0pLGMuYXBwZW5kQ2hpbGQoZCksYi5hcHBlbmRDaGlsZChjKTsKcmV0dXJuIGJ9LGxpbmVhcnJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOkxpbmVhclJpbmciKTtiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRDb29yZGluYXRlc05vZGUoYSkpO3JldHVybiBifSxwb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpQb2x5Z29uIik7YT1hLmNvbXBvbmVudHM7Zm9yKHZhciBjLGQsZT0wO2U8YS5sZW5ndGg7KytlKWM9MD09ZT8ib3V0ZXJCb3VuZGFyeUlzIjoiaW5uZXJCb3VuZGFyeUlzIixjPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDoiK2MpLGQ9dGhpcy5idWlsZEdlb21ldHJ5LmxpbmVhcnJpbmcuYXBwbHkodGhpcyxbYVtlXV0pLGMuYXBwZW5kQ2hpbGQoZCksYi5hcHBlbmRDaGlsZChjKTtyZXR1cm4gYn0sbXVsdGlwb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsCiJnbWw6TXVsdGlQb2x5Z29uIik7YT1hLmNvbXBvbmVudHM7Zm9yKHZhciBjLGQsZT0wO2U8YS5sZW5ndGg7KytlKWM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOnBvbHlnb25NZW1iZXIiKSxkPXRoaXMuYnVpbGRHZW9tZXRyeS5wb2x5Z29uLmFwcGx5KHRoaXMsW2FbZV1dKSxjLmFwcGVuZENoaWxkKGQpLGIuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LGJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6Qm94Iik7Yi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtyZXR1cm4gYn19LGJ1aWxkQ29vcmRpbmF0ZXNOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpjb29yZGluYXRlcyIpO2Iuc2V0QXR0cmlidXRlKCJkZWNpbWFsIiwiLiIpO2Iuc2V0QXR0cmlidXRlKCJjcyIsIiwiKTtiLnNldEF0dHJpYnV0ZSgidHMiLAoiICIpO3ZhciBjPVtdO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kcyljLnB1c2goYS5sZWZ0KyIsIithLmJvdHRvbSksYy5wdXNoKGEucmlnaHQrIiwiK2EudG9wKTtlbHNle2E9YS5jb21wb25lbnRzP2EuY29tcG9uZW50czpbYV07Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDtkKyspYy5wdXNoKGFbZF0ueCsiLCIrYVtkXS55KX1jPXRoaXMuY3JlYXRlVGV4dE5vZGUoYy5qb2luKCIgIikpO2IuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkdNTCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5HTUx8fChPcGVuTGF5ZXJzLkZvcm1hdC5HTUw9e30pOwpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7bmFtZXNwYWNlczp7Z21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCIseGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLHhzaToiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiLHdmczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnMifSxkZWZhdWx0UHJlZml4OiJnbWwiLHNjaGVtYUxvY2F0aW9uOm51bGwsZmVhdHVyZVR5cGU6bnVsbCxmZWF0dXJlTlM6bnVsbCxnZW9tZXRyeU5hbWU6Imdlb21ldHJ5IixleHRyYWN0QXR0cmlidXRlczohMCxzcnNOYW1lOm51bGwseHk6ITAsZ2VvbWV0cnlUeXBlczpudWxsLHNpbmdsZUZlYXR1cmVUeXBlOm51bGwscmVnRXhlczp7dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZyxmZWF0dXJlTWVtYmVyOi9eKC4qOik/ZmVhdHVyZU1lbWJlcnM/JC99LAppbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7dGhpcy5zZXRHZW9tZXRyeVR5cGVzKCk7YSYmYS5mZWF0dXJlTlMmJnRoaXMuc2V0TmFtZXNwYWNlKCJmZWF0dXJlIixhLmZlYXR1cmVOUyk7dGhpcy5zaW5nbGVGZWF0dXJlVHlwZT0hYXx8InN0cmluZyI9PT10eXBlb2YgYS5mZWF0dXJlVHlwZX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYj1bXTt0aGlzLnJlYWROb2RlKGEse2ZlYXR1cmVzOmJ9LCEwKTtpZigwPT1iLmxlbmd0aCl7dmFyIGM9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5uYW1lc3BhY2VzLmdtbCwiZmVhdHVyZU1lbWJlciIpO2lmKGMubGVuZ3RoKXthPQowO2Zvcih2YXIgZD1jLmxlbmd0aDthPGQ7KythKXRoaXMucmVhZE5vZGUoY1thXSx7ZmVhdHVyZXM6Yn0sITApfWVsc2UgYz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLm5hbWVzcGFjZXMuZ21sLCJmZWF0dXJlTWVtYmVycyIpLGMubGVuZ3RoJiZ0aGlzLnJlYWROb2RlKGNbMF0se2ZlYXR1cmVzOmJ9LCEwKX1yZXR1cm4gYn0scmVhZE5vZGU6ZnVuY3Rpb24oYSxiLGMpeyEwPT09YyYmITA9PT10aGlzLmF1dG9Db25maWcmJih0aGlzLmZlYXR1cmVUeXBlPW51bGwsZGVsZXRlIHRoaXMubmFtZXNwYWNlQWxpYXNbdGhpcy5mZWF0dXJlTlNdLGRlbGV0ZSB0aGlzLm5hbWVzcGFjZXMuZmVhdHVyZSx0aGlzLmZlYXR1cmVOUz1udWxsKTt0aGlzLmZlYXR1cmVOU3x8KGEucHJlZml4IGluIHRoaXMubmFtZXNwYWNlc3x8YS5wYXJlbnROb2RlLm5hbWVzcGFjZVVSSSE9dGhpcy5uYW1lc3BhY2VzLmdtbHx8IXRoaXMucmVnRXhlcy5mZWF0dXJlTWVtYmVyLnRlc3QoYS5wYXJlbnROb2RlLm5vZGVOYW1lKSl8fAoodGhpcy5mZWF0dXJlVHlwZT1hLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCksdGhpcy5zZXROYW1lc3BhY2UoImZlYXR1cmUiLGEubmFtZXNwYWNlVVJJKSx0aGlzLmZlYXR1cmVOUz1hLm5hbWVzcGFjZVVSSSx0aGlzLmF1dG9Db25maWc9ITApO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWROb2RlLmFwcGx5KHRoaXMsW2EsYl0pfSxyZWFkZXJzOntnbWw6e19pbmhlcml0OmZ1bmN0aW9uKGEsYixjKXt9LGZlYXR1cmVNZW1iZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LGZlYXR1cmVNZW1iZXJzOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxuYW1lOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sYm91bmRlZEJ5OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2MuY29tcG9uZW50cyYmMDxjLmNvbXBvbmVudHMubGVuZ3RoJiYKKGIuYm91bmRzPWMuY29tcG9uZW50c1swXSl9LFBvaW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9e3BvaW50czpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuY29tcG9uZW50c3x8KGIuY29tcG9uZW50cz1bXSk7Yi5jb21wb25lbnRzLnB1c2goYy5wb2ludHNbMF0pfSxjb29yZGluYXRlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYSkucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxjPWMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbUNvbW1hLCIsIiksYz1jLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSxkLGU9Yy5sZW5ndGgsZj1BcnJheShlKSxnPTA7ZzxlOysrZylkPWNbZ10uc3BsaXQoIiwiKSxmW2ddPXRoaXMueHk/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZFswXSxkWzFdLGRbMl0pOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGRbMV0sZFswXSxkWzJdKTtiLnBvaW50cz1mfSxjb29yZDpmdW5jdGlvbihhLApiKXt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5wb2ludHN8fChiLnBvaW50cz1bXSk7Yi5wb2ludHMucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjLngsYy55LGMueikpfSxYOmZ1bmN0aW9uKGEsYil7Yi54PXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sWTpmdW5jdGlvbihhLGIpe2IueT10aGlzLmdldENoaWxkVmFsdWUoYSl9LFo6ZnVuY3Rpb24oYSxiKXtiLno9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxNdWx0aVBvaW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvbXBvbmVudHM6W119O3RoaXMucmVhZGVycy5nbWwuX2luaGVyaXQuYXBwbHkodGhpcyxbYSxjLGJdKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5jb21wb25lbnRzPVtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50KGMuY29tcG9uZW50cyldfSxwb2ludE1lbWJlcjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTGluZVN0cmluZzpmdW5jdGlvbihhLApiKXt2YXIgYz17fTt0aGlzLnJlYWRlcnMuZ21sLl9pbmhlcml0LmFwcGx5KHRoaXMsW2EsYyxiXSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuY29tcG9uZW50c3x8KGIuY29tcG9uZW50cz1bXSk7Yi5jb21wb25lbnRzLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhjLnBvaW50cykpfSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y29tcG9uZW50czpbXX07dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLFthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHM9W25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhjLmNvbXBvbmVudHMpXX0sbGluZVN0cmluZ01lbWJlcjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sUG9seWdvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXtvdXRlcjpudWxsLGlubmVyOltdfTt0aGlzLnJlYWRlcnMuZ21sLl9pbmhlcml0LmFwcGx5KHRoaXMsClthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtjLmlubmVyLnVuc2hpZnQoYy5vdXRlcik7Yi5jb21wb25lbnRzfHwoYi5jb21wb25lbnRzPVtdKTtiLmNvbXBvbmVudHMucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKGMuaW5uZXIpKX0sTGluZWFyUmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZGVycy5nbWwuX2luaGVyaXQuYXBwbHkodGhpcyxbYSxjXSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuY29tcG9uZW50cz1bbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhjLnBvaW50cyldfSxNdWx0aVBvbHlnb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y29tcG9uZW50czpbXX07dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLFthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHM9W25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbihjLmNvbXBvbmVudHMpXX0sCnBvbHlnb25NZW1iZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXtjb21wb25lbnRzOltdfTt0aGlzLnJlYWRlcnMuZ21sLl9pbmhlcml0LmFwcGx5KHRoaXMsW2EsYyxiXSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuY29tcG9uZW50cz1bbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbihjLmNvbXBvbmVudHMpXX0sZ2VvbWV0cnlNZW1iZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9fSxmZWF0dXJlOnsiKiI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPWEubG9jYWxOYW1lfHxhLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCk7Yi5mZWF0dXJlcz90aGlzLnNpbmdsZUZlYXR1cmVUeXBlfHwtMT09PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuZmVhdHVyZVR5cGUsZCk/ZD09PXRoaXMuZmVhdHVyZVR5cGUmJihjPSJfdHlwZU5hbWUiKTpjPQoiX3R5cGVOYW1lIjowPT1hLmNoaWxkTm9kZXMubGVuZ3RofHwxPT1hLmNoaWxkTm9kZXMubGVuZ3RoJiYzPT1hLmZpcnN0Q2hpbGQubm9kZVR5cGU/dGhpcy5leHRyYWN0QXR0cmlidXRlcyYmKGM9Il9hdHRyaWJ1dGUiKTpjPSJfZ2VvbWV0cnkiO2MmJnRoaXMucmVhZGVycy5mZWF0dXJlW2NdLmFwcGx5KHRoaXMsW2EsYl0pfSxfdHlwZU5hbWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y29tcG9uZW50czpbXSxhdHRyaWJ1dGVzOnt9fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yy5uYW1lJiYoYy5hdHRyaWJ1dGVzLm5hbWU9Yy5uYW1lKTt2YXIgZD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihjLmNvbXBvbmVudHNbMF0sYy5hdHRyaWJ1dGVzKTt0aGlzLnNpbmdsZUZlYXR1cmVUeXBlfHwoZC50eXBlPWEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKSxkLm5hbWVzcGFjZT1hLm5hbWVzcGFjZVVSSSk7dmFyIGU9YS5nZXRBdHRyaWJ1dGUoImZpZCIpfHx0aGlzLmdldEF0dHJpYnV0ZU5TKGEsCnRoaXMubmFtZXNwYWNlcy5nbWwsImlkIik7ZSYmKGQuZmlkPWUpO3RoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiYodGhpcy5leHRlcm5hbFByb2plY3Rpb24mJmQuZ2VvbWV0cnkpJiZkLmdlb21ldHJ5LnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7Yy5ib3VuZHMmJihkLmJvdW5kcz1jLmJvdW5kcyk7Yi5mZWF0dXJlcy5wdXNoKGQpfSxfZ2VvbWV0cnk6ZnVuY3Rpb24oYSxiKXt0aGlzLmdlb21ldHJ5TmFtZXx8KHRoaXMuZ2VvbWV0cnlOYW1lPWEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxfYXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sb2NhbE5hbWV8fGEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKSxkPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtiLmF0dHJpYnV0ZXNbY109ZH19LHdmczp7RmVhdHVyZUNvbGxlY3Rpb246ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsCmIpfX19LHdyaXRlOmZ1bmN0aW9uKGEpe3ZhciBiO2I9T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk/ImZlYXR1cmVNZW1iZXJzIjoiZmVhdHVyZU1lbWJlciI7YT10aGlzLndyaXRlTm9kZSgiZ21sOiIrYixhKTt0aGlzLnNldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhzaSwieHNpOnNjaGVtYUxvY2F0aW9uIix0aGlzLnNjaGVtYUxvY2F0aW9uKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFthXSl9LHdyaXRlcnM6e2dtbDp7ZmVhdHVyZU1lbWJlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpmZWF0dXJlTWVtYmVyIik7dGhpcy53cml0ZU5vZGUoImZlYXR1cmU6X3R5cGVOYW1lIixhLGIpO3JldHVybiBifSxNdWx0aVBvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOk11bHRpUG9pbnQiKTthPWEuY29tcG9uZW50c3x8W2FdOwpmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpdGhpcy53cml0ZU5vZGUoInBvaW50TWVtYmVyIixhW2NdLGIpO3JldHVybiBifSxwb2ludE1lbWJlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpwb2ludE1lbWJlciIpO3RoaXMud3JpdGVOb2RlKCJQb2ludCIsYSxiKTtyZXR1cm4gYn0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOk11bHRpTGluZVN0cmluZyIpO2E9YS5jb21wb25lbnRzfHxbYV07Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJsaW5lU3RyaW5nTWVtYmVyIixhW2NdLGIpO3JldHVybiBifSxsaW5lU3RyaW5nTWVtYmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmxpbmVTdHJpbmdNZW1iZXIiKTt0aGlzLndyaXRlTm9kZSgiTGluZVN0cmluZyIsYSxiKTtyZXR1cm4gYn0sCk11bHRpUG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpNdWx0aVBvbHlnb24iKTthPWEuY29tcG9uZW50c3x8W2FdO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgicG9seWdvbk1lbWJlciIsYVtjXSxiKTtyZXR1cm4gYn0scG9seWdvbk1lbWJlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpwb2x5Z29uTWVtYmVyIik7dGhpcy53cml0ZU5vZGUoIlBvbHlnb24iLGEsYik7cmV0dXJuIGJ9LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6R2VvbWV0cnlDb2xsZWN0aW9uIiksYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJnZW9tZXRyeU1lbWJlciIsYS5jb21wb25lbnRzW2NdLGIpO3JldHVybiBifSxnZW9tZXRyeU1lbWJlcjpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6Z2VvbWV0cnlNZW1iZXIiKTthPXRoaXMud3JpdGVOb2RlKCJmZWF0dXJlOl9nZW9tZXRyeSIsYSk7Yi5hcHBlbmRDaGlsZChhLmZpcnN0Q2hpbGQpO3JldHVybiBifX0sZmVhdHVyZTp7X3R5cGVOYW1lOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZmVhdHVyZToiK3RoaXMuZmVhdHVyZVR5cGUse2F0dHJpYnV0ZXM6e2ZpZDphLmZpZH19KTthLmdlb21ldHJ5JiZ0aGlzLndyaXRlTm9kZSgiZmVhdHVyZTpfZ2VvbWV0cnkiLGEuZ2VvbWV0cnksYik7Zm9yKHZhciBjIGluIGEuYXR0cmlidXRlcyl7dmFyIGQ9YS5hdHRyaWJ1dGVzW2NdO251bGwhPWQmJnRoaXMud3JpdGVOb2RlKCJmZWF0dXJlOl9hdHRyaWJ1dGUiLHtuYW1lOmMsdmFsdWU6ZH0sYil9cmV0dXJuIGJ9LF9nZW9tZXRyeTpmdW5jdGlvbihhKXt0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmdGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJihhPQphLmNsb25lKCkudHJhbnNmb3JtKHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uLHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uKSk7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJmZWF0dXJlOiIrdGhpcy5nZW9tZXRyeU5hbWUpO2E9dGhpcy53cml0ZU5vZGUoImdtbDoiK3RoaXMuZ2VvbWV0cnlUeXBlc1thLkNMQVNTX05BTUVdLGEsYik7dGhpcy5zcnNOYW1lJiZhLnNldEF0dHJpYnV0ZSgic3JzTmFtZSIsdGhpcy5zcnNOYW1lKTtyZXR1cm4gYn0sX2F0dHJpYnV0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJmZWF0dXJlOiIrYS5uYW1lLHt2YWx1ZTphLnZhbHVlfSl9fSx3ZnM6e0ZlYXR1cmVDb2xsZWN0aW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpGZWF0dXJlQ29sbGVjdGlvbiIpLGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpdGhpcy53cml0ZU5vZGUoImdtbDpmZWF0dXJlTWVtYmVyIiwKYVtjXSxiKTtyZXR1cm4gYn19fSxzZXRHZW9tZXRyeVR5cGVzOmZ1bmN0aW9uKCl7dGhpcy5nZW9tZXRyeVR5cGVzPXsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6IlBvaW50IiwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50IjoiTXVsdGlQb2ludCIsIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyI6IkxpbmVTdHJpbmciLCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyI6Ik11bHRpTGluZVN0cmluZyIsIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6IlBvbHlnb24iLCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI6Ik11bHRpUG9seWdvbiIsIk9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbiI6Ikdlb21ldHJ5Q29sbGVjdGlvbiJ9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZSJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZSx7c2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L2dtbC8yLjEuMi9mZWF0dXJlLnhzZCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWRlcnM6e2dtbDpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7b3V0ZXJCb3VuZGFyeUlzOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2Iub3V0ZXI9Yy5jb21wb25lbnRzWzBdfSxpbm5lckJvdW5kYXJ5SXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5pbm5lci5wdXNoKGMuY29tcG9uZW50c1swXSl9LEJveDpmdW5jdGlvbihhLGIpe3ZhciBjPQp7fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5jb21wb25lbnRzfHwoYi5jb21wb25lbnRzPVtdKTt2YXIgZD1jLnBvaW50c1swXSxjPWMucG9pbnRzWzFdO2IuY29tcG9uZW50cy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhkLngsZC55LGMueCxjLnkpKX19LE9wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS5yZWFkZXJzLmdtbCksZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUucmVhZGVycy5mZWF0dXJlLHdmczpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUucmVhZGVycy53ZnN9LHdyaXRlOmZ1bmN0aW9uKGEpe3ZhciBiO2I9T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk/IndmczpGZWF0dXJlQ29sbGVjdGlvbiI6ImdtbDpmZWF0dXJlTWVtYmVyIjthPXRoaXMud3JpdGVOb2RlKGIsYSk7dGhpcy5zZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54c2ksInhzaTpzY2hlbWFMb2NhdGlvbiIsdGhpcy5zY2hlbWFMb2NhdGlvbik7CnJldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2FdKX0sd3JpdGVyczp7Z21sOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtQb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpQb2ludCIpO3RoaXMud3JpdGVOb2RlKCJjb29yZGluYXRlcyIsW2FdLGIpO3JldHVybiBifSxjb29yZGluYXRlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1BcnJheShiKSxkLGU9MDtlPGI7KytlKWQ9YVtlXSxjW2VdPXRoaXMueHk/ZC54KyIsIitkLnk6ZC55KyIsIitkLngsdm9pZCAwIT1kLnomJihjW2VdKz0iLCIrZC56KTtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6Y29vcmRpbmF0ZXMiLHthdHRyaWJ1dGVzOntkZWNpbWFsOiIuIixjczoiLCIsdHM6IiAifSx2YWx1ZToxPT1iP2NbMF06Yy5qb2luKCIgIil9KX0sTGluZVN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6TGluZVN0cmluZyIpO3RoaXMud3JpdGVOb2RlKCJjb29yZGluYXRlcyIsYS5jb21wb25lbnRzLGIpO3JldHVybiBifSxQb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOlBvbHlnb24iKTt0aGlzLndyaXRlTm9kZSgib3V0ZXJCb3VuZGFyeUlzIixhLmNvbXBvbmVudHNbMF0sYik7Zm9yKHZhciBjPTE7YzxhLmNvbXBvbmVudHMubGVuZ3RoOysrYyl0aGlzLndyaXRlTm9kZSgiaW5uZXJCb3VuZGFyeUlzIixhLmNvbXBvbmVudHNbY10sYik7cmV0dXJuIGJ9LG91dGVyQm91bmRhcnlJczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpvdXRlckJvdW5kYXJ5SXMiKTt0aGlzLndyaXRlTm9kZSgiTGluZWFyUmluZyIsYSxiKTtyZXR1cm4gYn0saW5uZXJCb3VuZGFyeUlzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmlubmVyQm91bmRhcnlJcyIpOwp0aGlzLndyaXRlTm9kZSgiTGluZWFyUmluZyIsYSxiKTtyZXR1cm4gYn0sTGluZWFyUmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpMaW5lYXJSaW5nIik7dGhpcy53cml0ZU5vZGUoImNvb3JkaW5hdGVzIixhLmNvbXBvbmVudHMsYik7cmV0dXJuIGJ9LEJveDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpCb3giKTt0aGlzLndyaXRlTm9kZSgiY29vcmRpbmF0ZXMiLFt7eDphLmxlZnQseTphLmJvdHRvbX0se3g6YS5yaWdodCx5OmEudG9wfV0sYik7dGhpcy5zcnNOYW1lJiZiLnNldEF0dHJpYnV0ZSgic3JzTmFtZSIsdGhpcy5zcnNOYW1lKTtyZXR1cm4gYn19LE9wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS53cml0ZXJzLmdtbCksZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUud3JpdGVycy5mZWF0dXJlLHdmczpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUud3JpdGVycy53ZnN9LApDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIifSk7T3BlbkxheWVycy5GaWx0ZXIuRnVuY3Rpb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7bmFtZTpudWxsLHBhcmFtczpudWxsLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmlsdGVyLkZ1bmN0aW9uIn0pO09wZW5MYXllcnMuRGF0ZT17ZGF0ZVJlZ0V4Oi9eKD86KFxkezR9KSg/Oi0oXGR7Mn0pKD86LShcZHsyfSkpPyk/KT8oPzooPzpUKFxkezEsMn0pOihcZHsyfSk6KFxkezJ9KD86XC5cZCspPykoWnwoPzpbKy1dXGR7MSwyfSg/OjooXGR7Mn0pKT8pKSl8Wik/JC8sdG9JU09TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4idG9JU09TdHJpbmciaW4gRGF0ZS5wcm90b3R5cGU/ZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9JU09TdHJpbmcoKX06ZnVuY3Rpb24oYSl7cmV0dXJuIGlzTmFOKGEuZ2V0VGltZSgpKT8iSW52YWxpZCBEYXRlIjphLmdldFVUQ0Z1bGxZZWFyKCkrIi0iK09wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQoYS5nZXRVVENNb250aCgpKzEsMikrIi0iK09wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQoYS5nZXRVVENEYXRlKCksMikrIlQiK09wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQoYS5nZXRVVENIb3VycygpLDIpKyI6IitPcGVuTGF5ZXJzLk51bWJlci56ZXJvUGFkKGEuZ2V0VVRDTWludXRlcygpLAoyKSsiOiIrT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChhLmdldFVUQ1NlY29uZHMoKSwyKSsiLiIrT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChhLmdldFVUQ01pbGxpc2Vjb25kcygpLDMpKyJaIn19KCkscGFyc2U6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoKGE9YS5tYXRjaCh0aGlzLmRhdGVSZWdFeCkpJiYoYVsxXXx8YVs3XSkpe2I9cGFyc2VJbnQoYVsxXSwxMCl8fDA7dmFyIGM9cGFyc2VJbnQoYVsyXSwxMCktMXx8MCxkPXBhcnNlSW50KGFbM10sMTApfHwxO2I9bmV3IERhdGUoRGF0ZS5VVEMoYixjLGQpKTtpZihjPWFbN10pe3ZhciBkPXBhcnNlSW50KGFbNF0sMTApLGU9cGFyc2VJbnQoYVs1XSwxMCksZj1wYXJzZUZsb2F0KGFbNl0pLGc9ZnwwLGY9TWF0aC5yb3VuZCgxRTMqKGYtZykpO2Iuc2V0VVRDSG91cnMoZCxlLGcsZik7IloiIT09YyYmKGM9cGFyc2VJbnQoYywxMCksYT1wYXJzZUludChhWzhdLDEwKXx8MCxhPS0xRTMqKDYwKjYwKmMrNjAqYSksYj1uZXcgRGF0ZShiLmdldFRpbWUoKSsKYSkpfX1lbHNlIGI9bmV3IERhdGUoImludmFsaWQiKTtyZXR1cm4gYn19O09wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7bmFtZXNwYWNlczp7b2djOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nYyIsZ21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCIseGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLHhzaToiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UifSxkZWZhdWx0UHJlZml4OiJvZ2MiLHNjaGVtYUxvY2F0aW9uOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O3RoaXMucmVhZGVycy5vZ2MuRmlsdGVyLmFwcGx5KHRoaXMsW2EsYl0pO3JldHVybiBiLmZpbHRlcn0scmVhZGVyczp7b2djOntfZXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9IiIsYz1hLmZpcnN0Q2hpbGQ7YztjPQpjLm5leHRTaWJsaW5nKXN3aXRjaChjLm5vZGVUeXBlKXtjYXNlIDE6YT10aGlzLnJlYWROb2RlKGMpO2EucHJvcGVydHk/Yis9IiR7IithLnByb3BlcnR5KyJ9Ijp2b2lkIDAhPT1hLnZhbHVlJiYoYis9YS52YWx1ZSk7YnJlYWs7Y2FzZSAzOmNhc2UgNDpiKz1jLm5vZGVWYWx1ZX1yZXR1cm4gYn0sRmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZpZHM6W10sZmlsdGVyczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpOzA8Yy5maWRzLmxlbmd0aD9iLmZpbHRlcj1uZXcgT3BlbkxheWVycy5GaWx0ZXIuRmVhdHVyZUlkKHtmaWRzOmMuZmlkc30pOjA8Yy5maWx0ZXJzLmxlbmd0aCYmKGIuZmlsdGVyPWMuZmlsdGVyc1swXSl9LEZlYXR1cmVJZDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKCJmaWQiKTtjJiZiLmZpZHMucHVzaChjKX0sQW5kOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkR9KTsKdGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxPcjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuT1J9KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LE5vdDpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuTk9UfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzTGVzc1RoYW46ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbih7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTn0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX0sUHJvcGVydHlJc0dyZWF0ZXJUaGFuOmZ1bmN0aW9uKGEsCmIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uR1JFQVRFUl9USEFOfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzTGVzc1RoYW5PckVxdWFsVG86ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbih7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTl9PUl9FUVVBTF9UT30pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX0sUHJvcGVydHlJc0dyZWF0ZXJUaGFuT3JFcXVhbFRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24oe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5HUkVBVEVSX1RIQU5fT1JfRVFVQUxfVE99KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LApQcm9wZXJ0eUlzQmV0d2VlbjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uQkVUV0VFTn0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX0sTGl0ZXJhbDpmdW5jdGlvbihhLGIpe2IudmFsdWU9T3BlbkxheWVycy5TdHJpbmcubnVtZXJpY0lmKHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSwhMCl9LFByb3BlcnR5TmFtZTpmdW5jdGlvbihhLGIpe2IucHJvcGVydHk9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxMb3dlckJvdW5kYXJ5OmZ1bmN0aW9uKGEsYil7Yi5sb3dlckJvdW5kYXJ5PU9wZW5MYXllcnMuU3RyaW5nLm51bWVyaWNJZih0aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKSwhMCl9LFVwcGVyQm91bmRhcnk6ZnVuY3Rpb24oYSxiKXtiLnVwcGVyQm91bmRhcnk9T3BlbkxheWVycy5TdHJpbmcubnVtZXJpY0lmKHRoaXMucmVhZGVycy5vZ2MuX2V4cHJlc3Npb24uY2FsbCh0aGlzLAphKSwhMCl9LEludGVyc2VjdHM6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRTcGF0aWFsKGEsYixPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLklOVEVSU0VDVFMpfSxXaXRoaW46ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRTcGF0aWFsKGEsYixPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLldJVEhJTil9LENvbnRhaW5zOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkU3BhdGlhbChhLGIsT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5DT05UQUlOUyl9LERXaXRoaW46ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRTcGF0aWFsKGEsYixPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkRXSVRISU4pfSxEaXN0YW5jZTpmdW5jdGlvbihhLGIpe2IuZGlzdGFuY2U9cGFyc2VJbnQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKTtiLmRpc3RhbmNlVW5pdHM9YS5nZXRBdHRyaWJ1dGUoInVuaXRzIil9LEZ1bmN0aW9uOmZ1bmN0aW9uKGEsYil7fSxQcm9wZXJ0eUlzTnVsbDpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uSVNfTlVMTH0pOwp0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9fX0scmVhZFNwYXRpYWw6ZnVuY3Rpb24oYSxiLGMpe2M9bmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoe3R5cGU6Y30pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtjLnZhbHVlPWMuY29tcG9uZW50c1swXTtkZWxldGUgYy5jb21wb25lbnRzO2IuZmlsdGVycy5wdXNoKGMpfSxlbmNvZGVMaXRlcmFsOmZ1bmN0aW9uKGEpe2EgaW5zdGFuY2VvZiBEYXRlJiYoYT1PcGVuTGF5ZXJzLkRhdGUudG9JU09TdHJpbmcoYSkpO3JldHVybiBhfSx3cml0ZU9nY0V4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXthIGluc3RhbmNlb2YgT3BlbkxheWVycy5GaWx0ZXIuRnVuY3Rpb24/dGhpcy53cml0ZU5vZGUoIkZ1bmN0aW9uIixhLGIpOnRoaXMud3JpdGVOb2RlKCJMaXRlcmFsIixhLGIpO3JldHVybiBifSx3cml0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53cml0ZXJzLm9nYy5GaWx0ZXIuYXBwbHkodGhpcyxbYV0pfSwKd3JpdGVyczp7b2djOntGaWx0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6RmlsdGVyIik7dGhpcy53cml0ZU5vZGUodGhpcy5nZXRGaWx0ZXJUeXBlKGEpLGEsYik7cmV0dXJuIGJ9LF9mZWF0dXJlSWRzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxjPTAsZD1hLmZpZHMubGVuZ3RoO2M8ZDsrK2MpdGhpcy53cml0ZU5vZGUoIm9nYzpGZWF0dXJlSWQiLGEuZmlkc1tjXSxiKTtyZXR1cm4gYn0sRmVhdHVyZUlkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpGZWF0dXJlSWQiLHthdHRyaWJ1dGVzOntmaWQ6YX19KX0sQW5kOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpBbmQiKSxjLGQ9MCxlPWEuZmlsdGVycy5sZW5ndGg7ZDxlOysrZCljPWEuZmlsdGVyc1tkXSx0aGlzLndyaXRlTm9kZSh0aGlzLmdldEZpbHRlclR5cGUoYyksCmMsYik7cmV0dXJuIGJ9LE9yOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpPciIpLGMsZD0wLGU9YS5maWx0ZXJzLmxlbmd0aDtkPGU7KytkKWM9YS5maWx0ZXJzW2RdLHRoaXMud3JpdGVOb2RlKHRoaXMuZ2V0RmlsdGVyVHlwZShjKSxjLGIpO3JldHVybiBifSxOb3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6Tm90Iik7YT1hLmZpbHRlcnNbMF07dGhpcy53cml0ZU5vZGUodGhpcy5nZXRGaWx0ZXJUeXBlKGEpLGEsYik7cmV0dXJuIGJ9LFByb3BlcnR5SXNMZXNzVGhhbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzTGVzc1RoYW4iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEudmFsdWUsYik7cmV0dXJuIGJ9LFByb3BlcnR5SXNHcmVhdGVyVGhhbjpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc0dyZWF0ZXJUaGFuIik7dGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxiKTt0aGlzLndyaXRlT2djRXhwcmVzc2lvbihhLnZhbHVlLGIpO3JldHVybiBifSxQcm9wZXJ0eUlzTGVzc1RoYW5PckVxdWFsVG86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc0xlc3NUaGFuT3JFcXVhbFRvIik7dGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxiKTt0aGlzLndyaXRlT2djRXhwcmVzc2lvbihhLnZhbHVlLGIpO3JldHVybiBifSxQcm9wZXJ0eUlzR3JlYXRlclRoYW5PckVxdWFsVG86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc0dyZWF0ZXJUaGFuT3JFcXVhbFRvIik7dGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxiKTt0aGlzLndyaXRlT2djRXhwcmVzc2lvbihhLnZhbHVlLGIpOwpyZXR1cm4gYn0sUHJvcGVydHlJc0JldHdlZW46ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc0JldHdlZW4iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVOb2RlKCJMb3dlckJvdW5kYXJ5IixhLGIpO3RoaXMud3JpdGVOb2RlKCJVcHBlckJvdW5kYXJ5IixhLGIpO3JldHVybiBifSxQcm9wZXJ0eU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlByb3BlcnR5TmFtZSIse3ZhbHVlOmEucHJvcGVydHl9KX0sTGl0ZXJhbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6TGl0ZXJhbCIse3ZhbHVlOih0aGlzLmVuY29kZUxpdGVyYWx8fE9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MS5wcm90b3R5cGUuZW5jb2RlTGl0ZXJhbCkoYSl9KX0sTG93ZXJCb3VuZGFyeTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpMb3dlckJvdW5kYXJ5Iik7CnRoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEubG93ZXJCb3VuZGFyeSxiKTtyZXR1cm4gYn0sVXBwZXJCb3VuZGFyeTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpVcHBlckJvdW5kYXJ5Iik7dGhpcy53cml0ZU5vZGUoIkxpdGVyYWwiLGEudXBwZXJCb3VuZGFyeSxiKTtyZXR1cm4gYn0sSU5URVJTRUNUUzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53cml0ZVNwYXRpYWwoYSwiSW50ZXJzZWN0cyIpfSxXSVRISU46ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud3JpdGVTcGF0aWFsKGEsIldpdGhpbiIpfSxDT05UQUlOUzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53cml0ZVNwYXRpYWwoYSwiQ29udGFpbnMiKX0sRFdJVEhJTjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLndyaXRlU3BhdGlhbChhLCJEV2l0aGluIik7dGhpcy53cml0ZU5vZGUoIkRpc3RhbmNlIixhLGIpO3JldHVybiBifSxEaXN0YW5jZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6RGlzdGFuY2UiLAp7YXR0cmlidXRlczp7dW5pdHM6YS5kaXN0YW5jZVVuaXRzfSx2YWx1ZTphLmRpc3RhbmNlfSl9LEZ1bmN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOkZ1bmN0aW9uIix7YXR0cmlidXRlczp7bmFtZTphLm5hbWV9fSk7YT1hLnBhcmFtcztmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspdGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYVtjXSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc051bGw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc051bGwiKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3JldHVybiBifX19LGdldEZpbHRlclR5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5maWx0ZXJNYXBbYS50eXBlXTtpZighYil0aHJvdyJGaWx0ZXIgd3JpdGluZyBub3Qgc3VwcG9ydGVkIGZvciBydWxlIHR5cGU6ICIrYS50eXBlO3JldHVybiBifSxmaWx0ZXJNYXA6eyImJiI6IkFuZCIsCiJ8fCI6Ik9yIiwiISI6Ik5vdCIsIj09IjoiUHJvcGVydHlJc0VxdWFsVG8iLCIhPSI6IlByb3BlcnR5SXNOb3RFcXVhbFRvIiwiPCI6IlByb3BlcnR5SXNMZXNzVGhhbiIsIj4iOiJQcm9wZXJ0eUlzR3JlYXRlclRoYW4iLCI8PSI6IlByb3BlcnR5SXNMZXNzVGhhbk9yRXF1YWxUbyIsIj49IjoiUHJvcGVydHlJc0dyZWF0ZXJUaGFuT3JFcXVhbFRvIiwiLi4iOiJQcm9wZXJ0eUlzQmV0d2VlbiIsIn4iOiJQcm9wZXJ0eUlzTGlrZSIsTlVMTDoiUHJvcGVydHlJc051bGwiLEJCT1g6IkJCT1giLERXSVRISU46IkRXSVRISU4iLFdJVEhJTjoiV0lUSElOIixDT05UQUlOUzoiQ09OVEFJTlMiLElOVEVSU0VDVFM6IklOVEVSU0VDVFMiLEZJRDoiX2ZlYXR1cmVJZHMifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjEifSk7T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LkdNTC52MixPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjEse1ZFUlNJT046IjEuMC4wIixzY2hlbWFMb2NhdGlvbjoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MvZmlsdGVyLzEuMC4wL2ZpbHRlci54c2QiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZGVyczp7b2djOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtQcm9wZXJ0eUlzRXF1YWxUbzpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE99KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LFByb3BlcnR5SXNOb3RFcXVhbFRvOmZ1bmN0aW9uKGEsCmIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTk9UX0VRVUFMX1RPfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzTGlrZTpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRX0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTt2YXIgZD1hLmdldEF0dHJpYnV0ZSgid2lsZENhcmQiKSxlPWEuZ2V0QXR0cmlidXRlKCJzaW5nbGVDaGFyIiksZj1hLmdldEF0dHJpYnV0ZSgiZXNjYXBlIik7Yy52YWx1ZTJyZWdleChkLGUsZik7Yi5maWx0ZXJzLnB1c2goYyl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjEucHJvdG90eXBlLnJlYWRlcnMub2djKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5yZWFkZXJzLmdtbCwKZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIucHJvdG90eXBlLnJlYWRlcnMuZmVhdHVyZX0sd3JpdGVyczp7b2djOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtQcm9wZXJ0eUlzRXF1YWxUbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzRXF1YWxUbyIpO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYS52YWx1ZSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc05vdEVxdWFsVG86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc05vdEVxdWFsVG8iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEudmFsdWUsYik7cmV0dXJuIGJ9LFByb3BlcnR5SXNMaWtlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlByb3BlcnR5SXNMaWtlIiwKe2F0dHJpYnV0ZXM6e3dpbGRDYXJkOiIqIixzaW5nbGVDaGFyOiIuIixlc2NhcGU6IiEifX0pO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU5vZGUoIkxpdGVyYWwiLGEucmVnZXgydmFsdWUoKSxiKTtyZXR1cm4gYn0sQkJPWDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpCQk9YIik7YS5wcm9wZXJ0eSYmdGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxiKTt2YXIgYz10aGlzLndyaXRlTm9kZSgiZ21sOkJveCIsYS52YWx1ZSxiKTthLnByb2plY3Rpb24mJmMuc2V0QXR0cmlidXRlKCJzcnNOYW1lIixhLnByb2plY3Rpb24pO3JldHVybiBifX0sT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxLnByb3RvdHlwZS53cml0ZXJzLm9nYyksZ21sOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUud3JpdGVycy5nbWwsZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIucHJvdG90eXBlLndyaXRlcnMuZmVhdHVyZX0sCndyaXRlU3BhdGlhbDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOiIrYik7dGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxjKTtpZihhLnZhbHVlIGluc3RhbmNlb2YgT3BlbkxheWVycy5GaWx0ZXIuRnVuY3Rpb24pdGhpcy53cml0ZU5vZGUoIkZ1bmN0aW9uIixhLnZhbHVlLGMpO2Vsc2V7dmFyIGQ7ZD1hLnZhbHVlIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeT90aGlzLndyaXRlTm9kZSgiZmVhdHVyZTpfZ2VvbWV0cnkiLGEudmFsdWUpLmZpcnN0Q2hpbGQ6dGhpcy53cml0ZU5vZGUoImdtbDpCb3giLGEudmFsdWUpO2EucHJvamVjdGlvbiYmZC5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLGEucHJvamVjdGlvbik7Yy5hcHBlbmRDaGlsZChkKX1yZXR1cm4gY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MV8wXzAsT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MSx7dmVyc2lvbjoiMS4wLjAiLHNyc05hbWVJblF1ZXJ5OiExLHNjaGVtYUxvY2F0aW9uczp7d2ZzOiJodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC93ZnMvMS4wLjAvV0ZTLXRyYW5zYWN0aW9uLnhzZCJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7T3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWROb2RlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5yZWFkTm9kZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlYWRlcnM6e3dmczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7V0ZTX1RyYW5zYWN0aW9uUmVzcG9uc2U6ZnVuY3Rpb24oYSwKYil7Yi5pbnNlcnRJZHM9W107Yi5zdWNjZXNzPSExO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sSW5zZXJ0UmVzdWx0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZpZHM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmluc2VydElkcz1iLmluc2VydElkcy5jb25jYXQoYy5maWRzKX0sVHJhbnNhY3Rpb25SZXN1bHQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFN0YXR1czpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sU1VDQ0VTUzpmdW5jdGlvbihhLGIpe2Iuc3VjY2Vzcz0hMH19LE9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLnJlYWRlcnMud2ZzKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5yZWFkZXJzLmdtbCxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUucmVhZGVycy5mZWF0dXJlLG9nYzpPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMF8wLnByb3RvdHlwZS5yZWFkZXJzLm9nY30sCndyaXRlcnM6e3dmczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7UXVlcnk6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtmZWF0dXJlTlM6dGhpcy5mZWF0dXJlTlMsZmVhdHVyZVByZWZpeDp0aGlzLmZlYXR1cmVQcmVmaXgsZmVhdHVyZVR5cGU6dGhpcy5mZWF0dXJlVHlwZSxzcnNOYW1lOnRoaXMuc3JzTmFtZSxzcnNOYW1lSW5RdWVyeTp0aGlzLnNyc05hbWVJblF1ZXJ5fSxhKTt2YXIgYj1hLmZlYXR1cmVQcmVmaXgsYz10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpRdWVyeSIse2F0dHJpYnV0ZXM6e3R5cGVOYW1lOihiP2IrIjoiOiIiKSthLmZlYXR1cmVUeXBlfX0pO2Euc3JzTmFtZUluUXVlcnkmJmEuc3JzTmFtZSYmYy5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLGEuc3JzTmFtZSk7YS5mZWF0dXJlTlMmJmMuc2V0QXR0cmlidXRlKCJ4bWxuczoiK2IsYS5mZWF0dXJlTlMpO2lmKGEucHJvcGVydHlOYW1lcylmb3IodmFyIGI9MCxkPWEucHJvcGVydHlOYW1lcy5sZW5ndGg7YjwKZDtiKyspdGhpcy53cml0ZU5vZGUoIm9nYzpQcm9wZXJ0eU5hbWUiLHtwcm9wZXJ0eTphLnByb3BlcnR5TmFtZXNbYl19LGMpO2EuZmlsdGVyJiYodGhpcy5zZXRGaWx0ZXJQcm9wZXJ0eShhLmZpbHRlciksdGhpcy53cml0ZU5vZGUoIm9nYzpGaWx0ZXIiLGEuZmlsdGVyLGMpKTtyZXR1cm4gY319LE9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLndyaXRlcnMud2ZzKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS53cml0ZXJzLmdtbCxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUud3JpdGVycy5mZWF0dXJlLG9nYzpPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMF8wLnByb3RvdHlwZS53cml0ZXJzLm9nY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MV8wXzAifSk7T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXI9T3BlbkxheWVycy5DbGFzcyh7bWF4WkluZGV4Om51bGwsb3JkZXI6bnVsbCxpbmRpY2VzOm51bGwsY29tcGFyZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5jb21wYXJlPWE/T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzLlpfT1JERVJfWV9PUkRFUjpPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlci5JbmRleGluZ01ldGhvZHMuWl9PUkRFUl9EUkFXSU5HX09SREVSO3RoaXMuY2xlYXIoKX0saW5zZXJ0OmZ1bmN0aW9uKGEpe3RoaXMuZXhpc3RzKGEpJiZ0aGlzLnJlbW92ZShhKTt2YXIgYj1hLmlkO3RoaXMuZGV0ZXJtaW5lWkluZGV4KGEpO2Zvcih2YXIgYz0tMSxkPXRoaXMub3JkZXIubGVuZ3RoLGU7MTxkLWM7KWU9cGFyc2VJbnQoKGMrZCkvMiksMDx0aGlzLmNvbXBhcmUodGhpcyxhLE9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KHRoaXMub3JkZXJbZV0pKT9jPWU6ZD1lO3RoaXMub3JkZXIuc3BsaWNlKGQsCjAsYik7dGhpcy5pbmRpY2VzW2JdPXRoaXMuZ2V0WkluZGV4KGEpO3JldHVybiB0aGlzLmdldE5leHRFbGVtZW50KGQpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7YT1hLmlkO3ZhciBiPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMub3JkZXIsYSk7MDw9YiYmKHRoaXMub3JkZXIuc3BsaWNlKGIsMSksZGVsZXRlIHRoaXMuaW5kaWNlc1thXSx0aGlzLm1heFpJbmRleD0wPHRoaXMub3JkZXIubGVuZ3RoP3RoaXMuaW5kaWNlc1t0aGlzLm9yZGVyW3RoaXMub3JkZXIubGVuZ3RoLTFdXTowKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLm9yZGVyPVtdO3RoaXMuaW5kaWNlcz17fTt0aGlzLm1heFpJbmRleD0wfSxleGlzdHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPXRoaXMuaW5kaWNlc1thLmlkXX0sZ2V0WkluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhLl9zdHlsZS5ncmFwaGljWkluZGV4fSxkZXRlcm1pbmVaSW5kZXg6ZnVuY3Rpb24oYSl7dmFyIGI9YS5fc3R5bGUuZ3JhcGhpY1pJbmRleDsKbnVsbD09Yj8oYj10aGlzLm1heFpJbmRleCxhLl9zdHlsZS5ncmFwaGljWkluZGV4PWIpOmI+dGhpcy5tYXhaSW5kZXgmJih0aGlzLm1heFpJbmRleD1iKX0sZ2V0TmV4dEVsZW1lbnQ6ZnVuY3Rpb24oYSl7YSs9MTtpZihhPHRoaXMub3JkZXIubGVuZ3RoKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudCh0aGlzLm9yZGVyW2FdKTt2b2lkIDA9PWImJihiPXRoaXMuZ2V0TmV4dEVsZW1lbnQoYSkpO3JldHVybiBifXJldHVybiBudWxsfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlciJ9KTsKT3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzPXtaX09SREVSOmZ1bmN0aW9uKGEsYixjKXtiPWEuZ2V0WkluZGV4KGIpO3ZhciBkPTA7YyYmKGE9YS5nZXRaSW5kZXgoYyksZD1iLWEpO3JldHVybiBkfSxaX09SREVSX0RSQVdJTkdfT1JERVI6ZnVuY3Rpb24oYSxiLGMpe2E9T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzLlpfT1JERVIoYSxiLGMpO2MmJjA9PWEmJihhPTEpO3JldHVybiBhfSxaX09SREVSX1lfT1JERVI6ZnVuY3Rpb24oYSxiLGMpe2E9T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzLlpfT1JERVIoYSxiLGMpO2MmJjA9PT1hJiYoYj1jLl9ib3VuZHNCb3R0b20tYi5fYm91bmRzQm90dG9tLGE9MD09PWI/MTpiKTtyZXR1cm4gYX19OwpPcGVuTGF5ZXJzLlJlbmRlcmVyLkVsZW1lbnRzPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5SZW5kZXJlcix7cmVuZGVyZXJSb290Om51bGwscm9vdDpudWxsLHZlY3RvclJvb3Q6bnVsbCx0ZXh0Um9vdDpudWxsLHhtbG5zOm51bGwseE9mZnNldDowLGluZGV4ZXI6bnVsbCxCQUNLR1JPVU5EX0lEX1NVRkZJWDoiX2JhY2tncm91bmQiLExBQkVMX0lEX1NVRkZJWDoiX2xhYmVsIixMQUJFTF9PVVRMSU5FX1NVRkZJWDoiX291dGxpbmUiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnJlbmRlcmVyUm9vdD10aGlzLmNyZWF0ZVJlbmRlclJvb3QoKTt0aGlzLnJvb3Q9dGhpcy5jcmVhdGVSb290KCJfcm9vdCIpO3RoaXMudmVjdG9yUm9vdD10aGlzLmNyZWF0ZVJvb3QoIl92cm9vdCIpO3RoaXMudGV4dFJvb3Q9dGhpcy5jcmVhdGVSb290KCJfdHJvb3QiKTt0aGlzLnJvb3QuYXBwZW5kQ2hpbGQodGhpcy52ZWN0b3JSb290KTsKdGhpcy5yb290LmFwcGVuZENoaWxkKHRoaXMudGV4dFJvb3QpO3RoaXMucmVuZGVyZXJSb290LmFwcGVuZENoaWxkKHRoaXMucm9vdCk7dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlclJvb3QpO2ImJihiLnpJbmRleGluZ3x8Yi55T3JkZXJpbmcpJiYodGhpcy5pbmRleGVyPW5ldyBPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlcihiLnlPcmRlcmluZykpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jbGVhcigpO3RoaXMueG1sbnM9dGhpcy5yb290PXRoaXMucmVuZGVyZXJSb290PW51bGw7T3BlbkxheWVycy5SZW5kZXJlci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNsZWFyOmZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLnZlY3RvclJvb3Q7aWYoYilmb3IoO2E9Yi5maXJzdENoaWxkOyliLnJlbW92ZUNoaWxkKGEpO2lmKGI9dGhpcy50ZXh0Um9vdClmb3IoO2E9Yi5maXJzdENoaWxkOyliLnJlbW92ZUNoaWxkKGEpO3RoaXMuaW5kZXhlciYmCnRoaXMuaW5kZXhlci5jbGVhcigpfSxzZXRFeHRlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5zZXRFeHRlbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpLGQ9dGhpcy5nZXRSZXNvbHV0aW9uKCk7aWYodGhpcy5tYXAuYmFzZUxheWVyJiZ0aGlzLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgZSxmPWEuZ2V0V2lkdGgoKS90aGlzLm1hcC5nZXRFeHRlbnQoKS5nZXRXaWR0aCgpO2E9YS5zY2FsZSgxL2YpO2Y9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCk7Zi5yaWdodD5hLmxlZnQmJmYucmlnaHQ8YS5yaWdodD9lPSEwOmYubGVmdD5hLmxlZnQmJmYubGVmdDxhLnJpZ2h0JiYoZT0hMSk7aWYoZSE9PXRoaXMucmlnaHRPZkRhdGVMaW5lfHxiKWM9ITEsdGhpcy54T2Zmc2V0PSEwPT09ZT9mLmdldFdpZHRoKCkvZDowO3RoaXMucmlnaHRPZkRhdGVMaW5lPWV9cmV0dXJuIGN9LGdldE5vZGVUeXBlOmZ1bmN0aW9uKGEsYil7fSxkcmF3R2VvbWV0cnk6ZnVuY3Rpb24oYSwKYixjKXt2YXIgZD1hLkNMQVNTX05BTUUsZT0hMDtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIj09ZHx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCI9PWR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyI9PWR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI9PWQpe2Zvcih2YXIgZD0wLGY9YS5jb21wb25lbnRzLmxlbmd0aDtkPGY7ZCsrKWU9dGhpcy5kcmF3R2VvbWV0cnkoYS5jb21wb25lbnRzW2RdLGIsYykmJmU7cmV0dXJuIGV9ZD1lPSExOyJub25lIiE9Yi5kaXNwbGF5JiYoYi5iYWNrZ3JvdW5kR3JhcGhpYz90aGlzLnJlZHJhd0JhY2tncm91bmROb2RlKGEuaWQsYSxiLGMpOmQ9ITAsZT10aGlzLnJlZHJhd05vZGUoYS5pZCxhLGIsYykpOyExPT1lJiYoYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhLmlkKSkmJihiLl9zdHlsZS5iYWNrZ3JvdW5kR3JhcGhpYyYmKGQ9ITApLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSk7CmQmJihiPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQrdGhpcy5CQUNLR1JPVU5EX0lEX1NVRkZJWCkpJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7cmV0dXJuIGV9LHJlZHJhd05vZGU6ZnVuY3Rpb24oYSxiLGMsZCl7Yz10aGlzLmFwcGx5RGVmYXVsdFN5bWJvbGl6ZXIoYyk7YT10aGlzLm5vZGVGYWN0b3J5KGEsdGhpcy5nZXROb2RlVHlwZShiLGMpKTthLl9mZWF0dXJlSWQ9ZDthLl9ib3VuZHNCb3R0b209Yi5nZXRCb3VuZHMoKS5ib3R0b207YS5fZ2VvbWV0cnlDbGFzcz1iLkNMQVNTX05BTUU7YS5fc3R5bGU9YztiPXRoaXMuZHJhd0dlb21ldHJ5Tm9kZShhLGIsYyk7aWYoITE9PT1iKXJldHVybiExO2E9Yi5ub2RlO3RoaXMuaW5kZXhlcj8oYz10aGlzLmluZGV4ZXIuaW5zZXJ0KGEpKT90aGlzLnZlY3RvclJvb3QuaW5zZXJ0QmVmb3JlKGEsYyk6dGhpcy52ZWN0b3JSb290LmFwcGVuZENoaWxkKGEpOmEucGFyZW50Tm9kZSE9PXRoaXMudmVjdG9yUm9vdCYmdGhpcy52ZWN0b3JSb290LmFwcGVuZENoaWxkKGEpOwp0aGlzLnBvc3REcmF3KGEpO3JldHVybiBiLmNvbXBsZXRlfSxyZWRyYXdCYWNrZ3JvdW5kTm9kZTpmdW5jdGlvbihhLGIsYyxkKXtjPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYyk7Yy5leHRlcm5hbEdyYXBoaWM9Yy5iYWNrZ3JvdW5kR3JhcGhpYztjLmdyYXBoaWNYT2Zmc2V0PWMuYmFja2dyb3VuZFhPZmZzZXQ7Yy5ncmFwaGljWU9mZnNldD1jLmJhY2tncm91bmRZT2Zmc2V0O2MuZ3JhcGhpY1pJbmRleD1jLmJhY2tncm91bmRHcmFwaGljWkluZGV4O2MuZ3JhcGhpY1dpZHRoPWMuYmFja2dyb3VuZFdpZHRofHxjLmdyYXBoaWNXaWR0aDtjLmdyYXBoaWNIZWlnaHQ9Yy5iYWNrZ3JvdW5kSGVpZ2h0fHxjLmdyYXBoaWNIZWlnaHQ7Yy5iYWNrZ3JvdW5kR3JhcGhpYz1udWxsO2MuYmFja2dyb3VuZFhPZmZzZXQ9bnVsbDtjLmJhY2tncm91bmRZT2Zmc2V0PW51bGw7Yy5iYWNrZ3JvdW5kR3JhcGhpY1pJbmRleD1udWxsO3JldHVybiB0aGlzLnJlZHJhd05vZGUoYSt0aGlzLkJBQ0tHUk9VTkRfSURfU1VGRklYLApiLGMsbnVsbCl9LGRyYXdHZW9tZXRyeU5vZGU6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8YS5fc3R5bGU7dmFyIGQ9e2lzRmlsbGVkOnZvaWQgMD09PWMuZmlsbD8hMDpjLmZpbGwsaXNTdHJva2VkOnZvaWQgMD09PWMuc3Ryb2tlPyEhYy5zdHJva2VXaWR0aDpjLnN0cm9rZX0sZTtzd2l0Y2goYi5DTEFTU19OQU1FKXtjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50IjohMT09PWMuZ3JhcGhpYyYmKGQuaXNGaWxsZWQ9ITEsZC5pc1N0cm9rZWQ9ITEpO2U9dGhpcy5kcmF3UG9pbnQoYSxiKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOmQuaXNGaWxsZWQ9ITE7ZT10aGlzLmRyYXdMaW5lU3RyaW5nKGEsYik7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIjplPXRoaXMuZHJhd0xpbmVhclJpbmcoYSxiKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iOmU9dGhpcy5kcmF3UG9seWdvbihhLGIpO2JyZWFrOwpjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlJlY3RhbmdsZSI6ZT10aGlzLmRyYXdSZWN0YW5nbGUoYSxiKX1hLl9vcHRpb25zPWQ7cmV0dXJuITEhPWU/e25vZGU6dGhpcy5zZXRTdHlsZShhLGMsZCxiKSxjb21wbGV0ZTplfTohMX0scG9zdERyYXc6ZnVuY3Rpb24oYSl7fSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiKXt9LGRyYXdMaW5lU3RyaW5nOmZ1bmN0aW9uKGEsYil7fSxkcmF3TGluZWFyUmluZzpmdW5jdGlvbihhLGIpe30sZHJhd1BvbHlnb246ZnVuY3Rpb24oYSxiKXt9LGRyYXdSZWN0YW5nbGU6ZnVuY3Rpb24oYSxiKXt9LGRyYXdDaXJjbGU6ZnVuY3Rpb24oYSxiKXt9LHJlbW92ZVRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSt0aGlzLkxBQkVMX0lEX1NVRkZJWCk7YiYmdGhpcy50ZXh0Um9vdC5yZW1vdmVDaGlsZChiKTsoYT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhK3RoaXMuTEFCRUxfT1VUTElORV9TVUZGSVgpKSYmdGhpcy50ZXh0Um9vdC5yZW1vdmVDaGlsZChhKX0sCmdldEZlYXR1cmVJZEZyb21FdmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxjPWImJmIuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQ7cmV0dXJuKGM/YzpifHxhLnNyY0VsZW1lbnQpLl9mZWF0dXJlSWR9LGVyYXNlR2VvbWV0cnk6ZnVuY3Rpb24oYSxiKXtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50Ij09YS5DTEFTU19OQU1FfHwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmciPT1hLkNMQVNTX05BTUV8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI9PWEuQ0xBU1NfTkFNRXx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbiI9PWEuQ0xBU1NfTkFNRSlmb3IodmFyIGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkO2MrKyl0aGlzLmVyYXNlR2VvbWV0cnkoYS5jb21wb25lbnRzW2NdLGIpO2Vsc2UoYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhLmlkKSkmJmMucGFyZW50Tm9kZSYmKGMuZ2VvbWV0cnkmJihjLmdlb21ldHJ5LmRlc3Ryb3koKSwKYy5nZW9tZXRyeT1udWxsKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyksdGhpcy5pbmRleGVyJiZ0aGlzLmluZGV4ZXIucmVtb3ZlKGMpLGMuX3N0eWxlLmJhY2tncm91bmRHcmFwaGljJiYoYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhLmlkK3RoaXMuQkFDS0dST1VORF9JRF9TVUZGSVgpKSYmYy5wYXJlbnROb2RlJiZjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYykpfSxub2RlRmFjdG9yeTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO2M/dGhpcy5ub2RlVHlwZUNvbXBhcmUoYyxiKXx8KGMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSxjPXRoaXMubm9kZUZhY3RvcnkoYSxiKSk6Yz10aGlzLmNyZWF0ZU5vZGUoYixhKTtyZXR1cm4gY30sbm9kZVR5cGVDb21wYXJlOmZ1bmN0aW9uKGEsYil7fSxjcmVhdGVOb2RlOmZ1bmN0aW9uKGEsYil7fSxtb3ZlUm9vdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJvb3Q7YS5yb290LnBhcmVudE5vZGU9PQp0aGlzLnJlbmRlcmVyUm9vdCYmKGI9YS5yb290KTtiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7YS5yZW5kZXJlclJvb3QuYXBwZW5kQ2hpbGQoYil9LGdldFJlbmRlckxheWVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290LnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZH0saXNDb21wbGV4U3ltYm9sOmZ1bmN0aW9uKGEpe3JldHVybiJjaXJjbGUiIT1hJiYhIWF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMifSk7T3BlbkxheWVycy5Db250cm9sLlBhbmVsPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtjb250cm9sczpudWxsLGF1dG9BY3RpdmF0ZTohMCxkZWZhdWx0Q29udHJvbDpudWxsLHNhdmVTdGF0ZTohMSxhbGxvd0RlcHJlc3M6ITEsYWN0aXZlU3RhdGU6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7dGhpcy5jb250cm9scz1bXTt0aGlzLmFjdGl2ZVN0YXRlPXt9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uQnV0dG9uQ2xpY2spO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Zm9yKHZhciBhLGI9dGhpcy5jb250cm9scy5sZW5ndGgtMTswPD1iO2ItLSlhPXRoaXMuY29udHJvbHNbYl0sYS5ldmVudHMmJgphLmV2ZW50cy51bih7YWN0aXZhdGU6dGhpcy5pY29uT24sZGVhY3RpdmF0ZTp0aGlzLmljb25PZmZ9KSxhLnBhbmVsX2Rpdj1udWxsO3RoaXMuYWN0aXZlU3RhdGU9bnVsbH0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZihPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7Zm9yKHZhciBhLGI9MCxjPXRoaXMuY29udHJvbHMubGVuZ3RoO2I8YztiKyspYT10aGlzLmNvbnRyb2xzW2JdLChhPT09dGhpcy5kZWZhdWx0Q29udHJvbHx8dGhpcy5zYXZlU3RhdGUmJnRoaXMuYWN0aXZlU3RhdGVbYS5pZF0pJiZhLmFjdGl2YXRlKCk7ITA9PT10aGlzLnNhdmVTdGF0ZSYmKHRoaXMuZGVmYXVsdENvbnRyb2w9bnVsbCk7dGhpcy5yZWRyYXcoKTtyZXR1cm4hMH1yZXR1cm4hMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpe2Zvcih2YXIgYSwKYj0wLGM9dGhpcy5jb250cm9scy5sZW5ndGg7YjxjO2IrKylhPXRoaXMuY29udHJvbHNbYl0sdGhpcy5hY3RpdmVTdGF0ZVthLmlkXT1hLmRlYWN0aXZhdGUoKTt0aGlzLnJlZHJhdygpO3JldHVybiEwfXJldHVybiExfSxkcmF3OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm91dHNpZGVWaWV3cG9ydD8odGhpcy5ldmVudHMuYXR0YWNoVG9FbGVtZW50KHRoaXMuZGl2KSx0aGlzLmV2ZW50cy5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vbkJ1dHRvbkNsaWNrKSk6dGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uQnV0dG9uQ2xpY2spO3RoaXMuYWRkQ29udHJvbHNUb01hcCh0aGlzLmNvbnRyb2xzKTtyZXR1cm4gdGhpcy5kaXZ9LHJlZHJhdzpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmRpdi5jaGlsZE5vZGVzLmxlbmd0aC0xOzA8PWE7YS0tKXRoaXMuZGl2LnJlbW92ZUNoaWxkKHRoaXMuZGl2LmNoaWxkTm9kZXNbYV0pOwp0aGlzLmRpdi5pbm5lckhUTUw9IiI7aWYodGhpcy5hY3RpdmUpZm9yKHZhciBhPTAsYj10aGlzLmNvbnRyb2xzLmxlbmd0aDthPGI7YSsrKXRoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMuY29udHJvbHNbYV0ucGFuZWxfZGl2KX0sYWN0aXZhdGVDb250cm9sOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmFjdGl2ZSlyZXR1cm4hMTtpZihhLnR5cGU9PU9wZW5MYXllcnMuQ29udHJvbC5UWVBFX0JVVFRPTilhLnRyaWdnZXIoKTtlbHNlIGlmKGEudHlwZT09T3BlbkxheWVycy5Db250cm9sLlRZUEVfVE9HR0xFKWEuYWN0aXZlP2EuZGVhY3RpdmF0ZSgpOmEuYWN0aXZhdGUoKTtlbHNlIGlmKHRoaXMuYWxsb3dEZXByZXNzJiZhLmFjdGl2ZSlhLmRlYWN0aXZhdGUoKTtlbHNle2Zvcih2YXIgYixjPTAsZD10aGlzLmNvbnRyb2xzLmxlbmd0aDtjPGQ7YysrKWI9dGhpcy5jb250cm9sc1tjXSxiPT1hfHxiLnR5cGUhPT1PcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT09MJiZudWxsIT1iLnR5cGV8fGIuZGVhY3RpdmF0ZSgpOwphLmFjdGl2YXRlKCl9fSxhZGRDb250cm9sczpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTt0aGlzLmNvbnRyb2xzPXRoaXMuY29udHJvbHMuY29uY2F0KGEpO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9YVtiXSxlPXRoaXMuY3JlYXRlQ29udHJvbE1hcmt1cChkKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoZSxkLmRpc3BsYXlDbGFzcysiSXRlbUluYWN0aXZlIik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKGUsIm9sQnV0dG9uIik7IiI9PWQudGl0bGV8fGUudGl0bGV8fChlLnRpdGxlPWQudGl0bGUpO2QucGFuZWxfZGl2PWV9dGhpcy5tYXAmJih0aGlzLmFkZENvbnRyb2xzVG9NYXAoYSksdGhpcy5yZWRyYXcoKSl9LGNyZWF0ZUNvbnRyb2xNYXJrdXA6ZnVuY3Rpb24oYSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpfSxhZGRDb250cm9sc1RvTWFwOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiwKYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyliPWFbY10sITA9PT1iLmF1dG9BY3RpdmF0ZT8oYi5hdXRvQWN0aXZhdGU9ITEsdGhpcy5tYXAuYWRkQ29udHJvbChiKSxiLmF1dG9BY3RpdmF0ZT0hMCk6KHRoaXMubWFwLmFkZENvbnRyb2woYiksYi5kZWFjdGl2YXRlKCkpLGIuZXZlbnRzLm9uKHthY3RpdmF0ZTp0aGlzLmljb25PbixkZWFjdGl2YXRlOnRoaXMuaWNvbk9mZn0pfSxpY29uT246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhbmVsX2RpdjthLmNsYXNzTmFtZT1hLmNsYXNzTmFtZS5yZXBsYWNlKFJlZ0V4cCgiXFxiKCIrdGhpcy5kaXNwbGF5Q2xhc3MrIkl0ZW0pSW5hY3RpdmVcXGIiKSwiJDFBY3RpdmUiKX0saWNvbk9mZjpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFuZWxfZGl2O2EuY2xhc3NOYW1lPWEuY2xhc3NOYW1lLnJlcGxhY2UoUmVnRXhwKCJcXGIoIit0aGlzLmRpc3BsYXlDbGFzcysiSXRlbSlBY3RpdmVcXGIiKSwiJDFJbmFjdGl2ZSIpfSxvbkJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGEpe3ZhciBiPQp0aGlzLmNvbnRyb2xzO2E9YS5idXR0b25FbGVtZW50O2Zvcih2YXIgYz1iLmxlbmd0aC0xOzA8PWM7LS1jKWlmKGJbY10ucGFuZWxfZGl2PT09YSl7dGhpcy5hY3RpdmF0ZUNvbnRyb2woYltjXSk7YnJlYWt9fSxnZXRDb250cm9sc0J5OmZ1bmN0aW9uKGEsYil7dmFyIGM9ImZ1bmN0aW9uIj09dHlwZW9mIGIudGVzdDtyZXR1cm4gT3BlbkxheWVycy5BcnJheS5maWx0ZXIodGhpcy5jb250cm9scyxmdW5jdGlvbihkKXtyZXR1cm4gZFthXT09Ynx8YyYmYi50ZXN0KGRbYV0pfSl9LGdldENvbnRyb2xzQnlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldENvbnRyb2xzQnkoIm5hbWUiLGEpfSxnZXRDb250cm9sc0J5Q2xhc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q29udHJvbHNCeSgiQ0xBU1NfTkFNRSIsYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5QYW5lbCJ9KTtPcGVuTGF5ZXJzLlN0cmF0ZWd5PU9wZW5MYXllcnMuQ2xhc3Moe2xheWVyOm51bGwsb3B0aW9uczpudWxsLGFjdGl2ZTpudWxsLGF1dG9BY3RpdmF0ZTohMCxhdXRvRGVzdHJveTohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTt0aGlzLm9wdGlvbnM9YTt0aGlzLmFjdGl2ZT0hMX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpO3RoaXMub3B0aW9ucz10aGlzLmxheWVyPW51bGx9LHNldExheWVyOmZ1bmN0aW9uKGEpe3RoaXMubGF5ZXI9YX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmU/ITE6dGhpcy5hY3RpdmU9ITB9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmU/KHRoaXMuYWN0aXZlPSExLCEwKTohMX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TdHJhdGVneSJ9KTtPcGVuTGF5ZXJzLlN0cmF0ZWd5LkZpeGVkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TdHJhdGVneSx7cHJlbG9hZDohMSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuU3RyYXRlZ3kucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihhKWlmKHRoaXMubGF5ZXIuZXZlbnRzLm9uKHtyZWZyZXNoOnRoaXMubG9hZCxzY29wZTp0aGlzfSksITA9PXRoaXMubGF5ZXIudmlzaWJpbGl0eXx8dGhpcy5wcmVsb2FkKXRoaXMubG9hZCgpO2Vsc2UgdGhpcy5sYXllci5ldmVudHMub24oe3Zpc2liaWxpdHljaGFuZ2VkOnRoaXMubG9hZCxzY29wZTp0aGlzfSk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7YSYmdGhpcy5sYXllci5ldmVudHMudW4oe3JlZnJlc2g6dGhpcy5sb2FkLHZpc2liaWxpdHljaGFuZ2VkOnRoaXMubG9hZCwKc2NvcGU6dGhpc30pO3JldHVybiBhfSxsb2FkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGF5ZXI7Yi5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2Fkc3RhcnQiLHtmaWx0ZXI6Yi5maWx0ZXJ9KTtiLnByb3RvY29sLnJlYWQoT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2NhbGxiYWNrOnRoaXMubWVyZ2UsZmlsdGVyOmIuZmlsdGVyLHNjb3BlOnRoaXN9LGEpKTtiLmV2ZW50cy51bih7dmlzaWJpbGl0eWNoYW5nZWQ6dGhpcy5sb2FkLHNjb3BlOnRoaXN9KX0sbWVyZ2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sYXllcjtiLmRlc3Ryb3lGZWF0dXJlcygpO3ZhciBjPWEuZmVhdHVyZXM7aWYoYyYmMDxjLmxlbmd0aCl7dmFyIGQ9Yi5wcm9qZWN0aW9uLGU9Yi5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpO2lmKCFlLmVxdWFscyhkKSlmb3IodmFyIGYsZz0wLGg9Yy5sZW5ndGg7ZzxoOysrZykoZj1jW2ddLmdlb21ldHJ5KSYmZi50cmFuc2Zvcm0oZCxlKTtiLmFkZEZlYXR1cmVzKGMpfWIuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZGVuZCIsCntyZXNwb25zZTphfSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3RyYXRlZ3kuRml4ZWQifSk7T3BlbkxheWVycy5Db250cm9sLlpvb209T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3pvb21JblRleHQ6IisiLHpvb21JbklkOiJvbFpvb21JbkxpbmsiLHpvb21PdXRUZXh0OiJcdTIyMTIiLHpvb21PdXRJZDoib2xab29tT3V0TGluayIsZHJhdzpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzKSxiPXRoaXMuZ2V0T3JDcmVhdGVMaW5rcyhhKSxjPWIuem9vbUluLGI9Yi56b29tT3V0LGQ9dGhpcy5tYXAuZXZlbnRzO2IucGFyZW50Tm9kZSE9PWEmJihkPXRoaXMuZXZlbnRzLGQuYXR0YWNoVG9FbGVtZW50KGIucGFyZW50Tm9kZSkpO2QucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25ab29tQ2xpY2spO3RoaXMuem9vbUluTGluaz1jO3RoaXMuem9vbU91dExpbms9YjtyZXR1cm4gYX0sZ2V0T3JDcmVhdGVMaW5rczpmdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnpvb21JbklkKSwKYz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnpvb21PdXRJZCk7Ynx8KGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLGIuaHJlZj0iI3pvb21JbiIsYi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLnpvb21JblRleHQpKSxiLmNsYXNzTmFtZT0ib2xDb250cm9sWm9vbUluIixhLmFwcGVuZENoaWxkKGIpKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoYiwib2xCdXR0b24iKTtjfHwoYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIiksYy5ocmVmPSIjem9vbU91dCIsYy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLnpvb21PdXRUZXh0KSksYy5jbGFzc05hbWU9Im9sQ29udHJvbFpvb21PdXQiLGEuYXBwZW5kQ2hpbGQoYykpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhjLCJvbEJ1dHRvbiIpO3JldHVybnt6b29tSW46Yix6b29tT3V0OmN9fSxvblpvb21DbGljazpmdW5jdGlvbihhKXthPWEuYnV0dG9uRWxlbWVudDsKYT09PXRoaXMuem9vbUluTGluaz90aGlzLm1hcC56b29tSW4oKTphPT09dGhpcy56b29tT3V0TGluayYmdGhpcy5tYXAuem9vbU91dCgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uWm9vbUNsaWNrKTtkZWxldGUgdGhpcy56b29tSW5MaW5rO2RlbGV0ZSB0aGlzLnpvb21PdXRMaW5rO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlpvb20ifSk7T3BlbkxheWVycy5Qcm90b2NvbD1PcGVuTGF5ZXJzLkNsYXNzKHtmb3JtYXQ6bnVsbCxvcHRpb25zOm51bGwsYXV0b0Rlc3Ryb3k6ITAsZGVmYXVsdEZpbHRlcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7YT1hfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5vcHRpb25zPWF9LG1lcmdlV2l0aERlZmF1bHRGaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJnRoaXMuZGVmYXVsdEZpbHRlcj9uZXcgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLkFORCxmaWx0ZXJzOlt0aGlzLmRlZmF1bHRGaWx0ZXIsYV19KTphfHx0aGlzLmRlZmF1bHRGaWx0ZXJ8fHZvaWQgMH0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZm9ybWF0PXRoaXMub3B0aW9ucz1udWxsfSxyZWFkOmZ1bmN0aW9uKGEpe2E9YXx8e307YS5maWx0ZXI9dGhpcy5tZXJnZVdpdGhEZWZhdWx0RmlsdGVyKGEuZmlsdGVyKX0sY3JlYXRlOmZ1bmN0aW9uKCl7fSwKdXBkYXRlOmZ1bmN0aW9uKCl7fSwiZGVsZXRlIjpmdW5jdGlvbigpe30sY29tbWl0OmZ1bmN0aW9uKCl7fSxhYm9ydDpmdW5jdGlvbihhKXt9LGNyZWF0ZUNhbGxiYWNrOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKCl7YS5hcHBseSh0aGlzLFtiLGNdKX0sdGhpcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wifSk7T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZT1PcGVuTGF5ZXJzLkNsYXNzKHtjb2RlOm51bGwscmVxdWVzdFR5cGU6bnVsbCxsYXN0OiEwLGZlYXR1cmVzOm51bGwsZGF0YTpudWxsLHJlcUZlYXR1cmVzOm51bGwscHJpdjpudWxsLGVycm9yOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSl9LHN1Y2Nlc3M6ZnVuY3Rpb24oKXtyZXR1cm4gMDx0aGlzLmNvZGV9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UifSk7Ck9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuU1VDQ0VTUz0xO09wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRT0wO09wZW5MYXllcnMuUHJvdG9jb2wuV0ZTPWZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSxPcGVuTGF5ZXJzLlByb3RvY29sLldGUy5ERUZBVUxUUyk7dmFyIGI9T3BlbkxheWVycy5Qcm90b2NvbC5XRlNbInYiK2EudmVyc2lvbi5yZXBsYWNlKC9cLi9nLCJfIildO2lmKCFiKXRocm93IlVuc3VwcG9ydGVkIFdGUyB2ZXJzaW9uOiAiK2EudmVyc2lvbjtyZXR1cm4gbmV3IGIoYSl9OwpPcGVuTGF5ZXJzLlByb3RvY29sLldGUy5mcm9tV01TTGF5ZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2M9YS5wYXJhbXMuTEFZRVJTO2M9KE9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGMpP2NbMF06Yykuc3BsaXQoIjoiKTsxPGMubGVuZ3RoJiYoZD1jWzBdKTtjPWMucG9wKCk7ZD17dXJsOmEudXJsLGZlYXR1cmVUeXBlOmMsZmVhdHVyZVByZWZpeDpkLHNyc05hbWU6YS5wcm9qZWN0aW9uJiZhLnByb2plY3Rpb24uZ2V0Q29kZSgpfHxhLm1hcCYmYS5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpLmdldENvZGUoKSx2ZXJzaW9uOiIxLjEuMCJ9O3JldHVybiBuZXcgT3BlbkxheWVycy5Qcm90b2NvbC5XRlMoT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYixkKSl9O09wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLkRFRkFVTFRTPXt2ZXJzaW9uOiIxLjAuMCJ9O09wZW5MYXllcnMuUHJveHlIb3N0PSIiO09wZW5MYXllcnMuUmVxdWVzdHx8KE9wZW5MYXllcnMuUmVxdWVzdD17fSk7Ck9wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5SZXF1ZXN0LHtERUZBVUxUX0NPTkZJRzp7bWV0aG9kOiJHRVQiLHVybDp3aW5kb3cubG9jYXRpb24uaHJlZixhc3luYzohMCx1c2VyOnZvaWQgMCxwYXNzd29yZDp2b2lkIDAscGFyYW1zOm51bGwscHJveHk6T3BlbkxheWVycy5Qcm94eUhvc3QsaGVhZGVyczp7fSxkYXRhOm51bGwsY2FsbGJhY2s6ZnVuY3Rpb24oKXt9LHN1Y2Nlc3M6bnVsbCxmYWlsdXJlOm51bGwsc2NvcGU6bnVsbH0sVVJMX1NQTElUX1JFR0VYOi8oW146XSo6KVwvXC8oW146XSo6P1teQF0qQCk/KFteOlwvXD9dKik6PyhbXlwvXD9dKikvLGV2ZW50czpuZXcgT3BlbkxheWVycy5FdmVudHModGhpcyksbWFrZVNhbWVPcmlnaW46ZnVuY3Rpb24oYSxiKXt2YXIgYz0wIT09YS5pbmRleE9mKCJodHRwIiksZD0hYyYmYS5tYXRjaCh0aGlzLlVSTF9TUExJVF9SRUdFWCk7aWYoZCl7dmFyIGU9d2luZG93LmxvY2F0aW9uLGM9ZFsxXT09ZS5wcm90b2NvbCYmZFszXT09CmUuaG9zdG5hbWUsZD1kWzRdLGU9ZS5wb3J0O2lmKDgwIT1kJiYiIiE9ZHx8IjgwIiE9ZSYmIiIhPWUpYz1jJiZkPT1lfWN8fGImJihhPSJmdW5jdGlvbiI9PXR5cGVvZiBiP2IoYSk6YitlbmNvZGVVUklDb21wb25lbnQoYSkpO3JldHVybiBhfSxpc3N1ZTpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMuREVGQVVMVF9DT05GSUcse3Byb3h5Ok9wZW5MYXllcnMuUHJveHlIb3N0fSk7YT1hfHx7fTthLmhlYWRlcnM9YS5oZWFkZXJzfHx7fTthPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsYik7YS5oZWFkZXJzPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEuaGVhZGVycyxiLmhlYWRlcnMpO3ZhciBiPSExLGM7Zm9yKGMgaW4gYS5oZWFkZXJzKWEuaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShjKSYmIngtcmVxdWVzdGVkLXdpdGgiPT09Yy50b0xvd2VyQ2FzZSgpJiYoYj0hMCk7ITE9PT1iJiYoYS5oZWFkZXJzWyJYLVJlcXVlc3RlZC1XaXRoIl09CiJYTUxIdHRwUmVxdWVzdCIpO3ZhciBkPW5ldyBPcGVuTGF5ZXJzLlJlcXVlc3QuWE1MSHR0cFJlcXVlc3QsZT1PcGVuTGF5ZXJzLlV0aWwudXJsQXBwZW5kKGEudXJsLE9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoYS5wYXJhbXN8fHt9KSksZT1PcGVuTGF5ZXJzLlJlcXVlc3QubWFrZVNhbWVPcmlnaW4oZSxhLnByb3h5KTtkLm9wZW4oYS5tZXRob2QsZSxhLmFzeW5jLGEudXNlcixhLnBhc3N3b3JkKTtmb3IodmFyIGYgaW4gYS5oZWFkZXJzKWQuc2V0UmVxdWVzdEhlYWRlcihmLGEuaGVhZGVyc1tmXSk7dmFyIGc9dGhpcy5ldmVudHMsaD10aGlzO2Qub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ZC5yZWFkeVN0YXRlPT1PcGVuTGF5ZXJzLlJlcXVlc3QuWE1MSHR0cFJlcXVlc3QuRE9ORSYmITEhPT1nLnRyaWdnZXJFdmVudCgiY29tcGxldGUiLHtyZXF1ZXN0OmQsY29uZmlnOmEscmVxdWVzdFVybDplfSkmJmgucnVuQ2FsbGJhY2tzKHtyZXF1ZXN0OmQsY29uZmlnOmEsCnJlcXVlc3RVcmw6ZX0pfTshMT09PWEuYXN5bmM/ZC5zZW5kKGEuZGF0YSk6d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXswIT09ZC5yZWFkeVN0YXRlJiZkLnNlbmQoYS5kYXRhKX0sMCk7cmV0dXJuIGR9LHJ1bkNhbGxiYWNrczpmdW5jdGlvbihhKXt2YXIgYj1hLnJlcXVlc3QsYz1hLmNvbmZpZyxkPWMuc2NvcGU/T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGMuY2FsbGJhY2ssYy5zY29wZSk6Yy5jYWxsYmFjayxlO2Muc3VjY2VzcyYmKGU9Yy5zY29wZT9PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoYy5zdWNjZXNzLGMuc2NvcGUpOmMuc3VjY2Vzcyk7dmFyIGY7Yy5mYWlsdXJlJiYoZj1jLnNjb3BlP09wZW5MYXllcnMuRnVuY3Rpb24uYmluZChjLmZhaWx1cmUsYy5zY29wZSk6Yy5mYWlsdXJlKTsiZmlsZToiPT1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVXJsT2JqZWN0KGMudXJsKS5wcm90b2NvbCYmYi5yZXNwb25zZVRleHQmJihiLnN0YXR1cz0yMDApO2QoYik7aWYoIWIuc3RhdHVzfHwKMjAwPD1iLnN0YXR1cyYmMzAwPmIuc3RhdHVzKXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgic3VjY2VzcyIsYSksZSYmZShiKTtiLnN0YXR1cyYmKDIwMD5iLnN0YXR1c3x8MzAwPD1iLnN0YXR1cykmJih0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImZhaWx1cmUiLGEpLGYmJmYoYikpfSxHRVQ6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEse21ldGhvZDoiR0VUIn0pO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9LFBPU1Q6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEse21ldGhvZDoiUE9TVCJ9KTthLmhlYWRlcnM9YS5oZWFkZXJzP2EuaGVhZGVyczp7fTsiQ09OVEVOVC1UWVBFImluIE9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYS5oZWFkZXJzKXx8KGEuaGVhZGVyc1siQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL3htbCIpO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9LFBVVDpmdW5jdGlvbihhKXthPQpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEse21ldGhvZDoiUFVUIn0pO2EuaGVhZGVycz1hLmhlYWRlcnM/YS5oZWFkZXJzOnt9OyJDT05URU5ULVRZUEUiaW4gT3BlbkxheWVycy5VdGlsLnVwcGVyQ2FzZU9iamVjdChhLmhlYWRlcnMpfHwoYS5oZWFkZXJzWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24veG1sIik7cmV0dXJuIE9wZW5MYXllcnMuUmVxdWVzdC5pc3N1ZShhKX0sREVMRVRFOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IkRFTEVURSJ9KTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfSxIRUFEOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IkhFQUQifSk7cmV0dXJuIE9wZW5MYXllcnMuUmVxdWVzdC5pc3N1ZShhKX0sT1BUSU9OUzpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYSx7bWV0aG9kOiJPUFRJT05TIn0pO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9fSk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RoaXMuX29iamVjdD1mJiYhaz9uZXcgZjpuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7dGhpcy5fbGlzdGVuZXJzPVtdfWZ1bmN0aW9uIGIoKXtyZXR1cm4gbmV3IGF9ZnVuY3Rpb24gYyhhKXtiLm9ucmVhZHlzdGF0ZWNoYW5nZSYmYi5vbnJlYWR5c3RhdGVjaGFuZ2UuYXBwbHkoYSk7YS5kaXNwYXRjaEV2ZW50KHt0eXBlOiJyZWFkeXN0YXRlY2hhbmdlIixidWJibGVzOiExLGNhbmNlbGFibGU6ITEsdGltZVN0YW1wOm5ldyBEYXRlKzB9KX1mdW5jdGlvbiBkKGEpe3RyeXthLnJlc3BvbnNlVGV4dD1hLl9vYmplY3QucmVzcG9uc2VUZXh0fWNhdGNoKGIpe310cnl7dmFyIGM7dmFyIGQ9YS5fb2JqZWN0LGU9ZC5yZXNwb25zZVhNTCxmPWQucmVzcG9uc2VUZXh0O2gmJihmJiZlJiYhZS5kb2N1bWVudEVsZW1lbnQmJmQuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpLm1hdGNoKC9bXlwvXStcL1teXCtdK1wreG1sLykpJiYKKGU9bmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIiksZS5hc3luYz0hMSxlLnZhbGlkYXRlT25QYXJzZT0hMSxlLmxvYWRYTUwoZikpO2M9ZSYmKGgmJjAhPWUucGFyc2VFcnJvcnx8IWUuZG9jdW1lbnRFbGVtZW50fHxlLmRvY3VtZW50RWxlbWVudCYmInBhcnNlcmVycm9yIj09ZS5kb2N1bWVudEVsZW1lbnQudGFnTmFtZSk/bnVsbDplO2EucmVzcG9uc2VYTUw9Y31jYXRjaChnKXt9dHJ5e2Euc3RhdHVzPWEuX29iamVjdC5zdGF0dXN9Y2F0Y2goayl7fXRyeXthLnN0YXR1c1RleHQ9YS5fb2JqZWN0LnN0YXR1c1RleHR9Y2F0Y2godSl7fX1mdW5jdGlvbiBlKGEpe2EuX29iamVjdC5vbnJlYWR5c3RhdGVjaGFuZ2U9bmV3IHdpbmRvdy5GdW5jdGlvbn12YXIgZj13aW5kb3cuWE1MSHR0cFJlcXVlc3QsZz0hIXdpbmRvdy5jb250cm9sbGVycyxoPXdpbmRvdy5kb2N1bWVudC5hbGwmJiF3aW5kb3cub3BlcmEsaz1oJiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvTVNJRSA3LjAvKTsKYi5wcm90b3R5cGU9YS5wcm90b3R5cGU7ZyYmZi53cmFwcGVkJiYoYi53cmFwcGVkPWYud3JhcHBlZCk7Yi5VTlNFTlQ9MDtiLk9QRU5FRD0xO2IuSEVBREVSU19SRUNFSVZFRD0yO2IuTE9BRElORz0zO2IuRE9ORT00O2IucHJvdG90eXBlLnJlYWR5U3RhdGU9Yi5VTlNFTlQ7Yi5wcm90b3R5cGUucmVzcG9uc2VUZXh0PSIiO2IucHJvdG90eXBlLnJlc3BvbnNlWE1MPW51bGw7Yi5wcm90b3R5cGUuc3RhdHVzPTA7Yi5wcm90b3R5cGUuc3RhdHVzVGV4dD0iIjtiLnByb3RvdHlwZS5wcmlvcml0eT0iTk9STUFMIjtiLnByb3RvdHlwZS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtiLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO2Iub25vcGVuPW51bGw7Yi5vbnNlbmQ9bnVsbDtiLm9uYWJvcnQ9bnVsbDtiLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGEsZixrLG4scSl7ZGVsZXRlIHRoaXMuX2hlYWRlcnM7Mz5hcmd1bWVudHMubGVuZ3RoJiYoaz0hMCk7dGhpcy5fYXN5bmM9azt2YXIgcj10aGlzLApzPXRoaXMucmVhZHlTdGF0ZSx0O2gmJmsmJih0PWZ1bmN0aW9uKCl7cyE9Yi5ET05FJiYoZShyKSxyLmFib3J0KCkpfSx3aW5kb3cuYXR0YWNoRXZlbnQoIm9udW5sb2FkIix0KSk7Yi5vbm9wZW4mJmIub25vcGVuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTs0PGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5fb2JqZWN0Lm9wZW4oYSxmLGssbixxKTozPGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5fb2JqZWN0Lm9wZW4oYSxmLGssbik6dGhpcy5fb2JqZWN0Lm9wZW4oYSxmLGspO3RoaXMucmVhZHlTdGF0ZT1iLk9QRU5FRDtjKHRoaXMpO3RoaXMuX29iamVjdC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZighZ3x8aylyLnJlYWR5U3RhdGU9ci5fb2JqZWN0LnJlYWR5U3RhdGUsZChyKSxyLl9hYm9ydGVkP3IucmVhZHlTdGF0ZT1iLlVOU0VOVDooci5yZWFkeVN0YXRlPT1iLkRPTkUmJihkZWxldGUgci5fZGF0YSxlKHIpLGgmJmsmJndpbmRvdy5kZXRhY2hFdmVudCgib251bmxvYWQiLHQpKSwKcyE9ci5yZWFkeVN0YXRlJiZjKHIpLHM9ci5yZWFkeVN0YXRlKX19O2IucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oYSl7Yi5vbnNlbmQmJmIub25zZW5kLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthcmd1bWVudHMubGVuZ3RofHwoYT1udWxsKTthJiZhLm5vZGVUeXBlJiYoYT13aW5kb3cuWE1MU2VyaWFsaXplcj8obmV3IHdpbmRvdy5YTUxTZXJpYWxpemVyKS5zZXJpYWxpemVUb1N0cmluZyhhKTphLnhtbCx0aGlzLl9oZWFkZXJzWyJDb250ZW50LVR5cGUiXXx8dGhpcy5fb2JqZWN0LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsImFwcGxpY2F0aW9uL3htbCIpKTt0aGlzLl9kYXRhPWE7YTppZih0aGlzLl9vYmplY3Quc2VuZCh0aGlzLl9kYXRhKSxnJiYhdGhpcy5fYXN5bmMpZm9yKHRoaXMucmVhZHlTdGF0ZT1iLk9QRU5FRCxkKHRoaXMpO3RoaXMucmVhZHlTdGF0ZTxiLkRPTkU7KWlmKHRoaXMucmVhZHlTdGF0ZSsrLGModGhpcyksdGhpcy5fYWJvcnRlZClicmVhayBhfTsKYi5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24oKXtiLm9uYWJvcnQmJmIub25hYm9ydC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5yZWFkeVN0YXRlPmIuVU5TRU5UJiYodGhpcy5fYWJvcnRlZD0hMCk7dGhpcy5fb2JqZWN0LmFib3J0KCk7ZSh0aGlzKTt0aGlzLnJlYWR5U3RhdGU9Yi5VTlNFTlQ7ZGVsZXRlIHRoaXMuX2RhdGF9O2IucHJvdG90eXBlLmdldEFsbFJlc3BvbnNlSGVhZGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYmplY3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl9O2IucHJvdG90eXBlLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9vYmplY3QuZ2V0UmVzcG9uc2VIZWFkZXIoYSl9O2IucHJvdG90eXBlLnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLl9oZWFkZXJzfHwodGhpcy5faGVhZGVycz17fSk7dGhpcy5faGVhZGVyc1thXT1iO3JldHVybiB0aGlzLl9vYmplY3Quc2V0UmVxdWVzdEhlYWRlcihhLGIpfTsKYi5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTAsZTtlPXRoaXMuX2xpc3RlbmVyc1tkXTtkKyspaWYoZVswXT09YSYmZVsxXT09YiYmZVsyXT09YylyZXR1cm47dGhpcy5fbGlzdGVuZXJzLnB1c2goW2EsYixjXSl9O2IucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wLGU7KGU9dGhpcy5fbGlzdGVuZXJzW2RdKSYmKGVbMF0hPWF8fGVbMV0hPWJ8fGVbMl0hPWMpO2QrKyk7ZSYmdGhpcy5fbGlzdGVuZXJzLnNwbGljZShkLDEpfTtiLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGEpe2E9e3R5cGU6YS50eXBlLHRhcmdldDp0aGlzLGN1cnJlbnRUYXJnZXQ6dGhpcyxldmVudFBoYXNlOjIsYnViYmxlczphLmJ1YmJsZXMsY2FuY2VsYWJsZTphLmNhbmNlbGFibGUsdGltZVN0YW1wOmEudGltZVN0YW1wLHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe30scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt9LAppbml0RXZlbnQ6ZnVuY3Rpb24oKXt9fTsicmVhZHlzdGF0ZWNoYW5nZSI9PWEudHlwZSYmdGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UmJih0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZS5oYW5kbGVFdmVudHx8dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UpLmFwcGx5KHRoaXMsW2FdKTtmb3IodmFyIGI9MCxjO2M9dGhpcy5fbGlzdGVuZXJzW2JdO2IrKyljWzBdIT1hLnR5cGV8fGNbMl18fChjWzFdLmhhbmRsZUV2ZW50fHxjWzFdKS5hcHBseSh0aGlzLFthXSl9O2IucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgWE1MSHR0cFJlcXVlc3RdIn07Yi50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbWE1MSHR0cFJlcXVlc3RdIn07d2luZG93LkZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseXx8KHdpbmRvdy5GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24oYSxiKXtifHwoYj1bXSk7YS5fX2Z1bmM9dGhpczthLl9fZnVuYyhiWzBdLGJbMV0sYlsyXSxiWzNdLApiWzRdKTtkZWxldGUgYS5fX2Z1bmN9KTtPcGVuTGF5ZXJzLlJlcXVlc3R8fChPcGVuTGF5ZXJzLlJlcXVlc3Q9e30pO09wZW5MYXllcnMuUmVxdWVzdC5YTUxIdHRwUmVxdWVzdD1ifSkoKTtPcGVuTGF5ZXJzLkZvcm1hdC5LTUw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e2ttbDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9rbWwvMi4yIixneDoiaHR0cDovL3d3dy5nb29nbGUuY29tL2ttbC9leHQvMi4yIn0sa21sbnM6Imh0dHA6Ly9lYXJ0aC5nb29nbGUuY29tL2ttbC8yLjAiLHBsYWNlbWFya3NEZXNjOiJObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUiLGZvbGRlcnNOYW1lOiJPcGVuTGF5ZXJzIGV4cG9ydCIsZm9sZGVyc0Rlc2M6IkV4cG9ydGVkIG9uICIrbmV3IERhdGUsZXh0cmFjdEF0dHJpYnV0ZXM6ITAsa3ZwQXR0cmlidXRlczohMSxleHRyYWN0U3R5bGVzOiExLGV4dHJhY3RUcmFja3M6ITEsdHJhY2tBdHRyaWJ1dGVzOm51bGwsaW50ZXJuYWxuczpudWxsLGZlYXR1cmVzOm51bGwsc3R5bGVzOm51bGwsc3R5bGVCYXNlVXJsOiIiLGZldGNoZWQ6bnVsbCxtYXhEZXB0aDowLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5yZWdFeGVzPQp7dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZyxrbWxDb2xvcjovKFx3ezJ9KShcd3syfSkoXHd7Mn0pKFx3ezJ9KS8sa21sSWNvblBhbGV0dGU6L3Jvb3Q6XC9cL2ljb25zXC9wYWxldHRlLShcZCspKFwuXHcrKS8sc3RyYWlnaHRCcmFja2V0Oi9cJFxbKC4qPylcXS9nfTt0aGlzLmV4dGVybmFsUHJvamVjdGlvbj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjQzMjYiKTtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkOmZ1bmN0aW9uKGEpe3RoaXMuZmVhdHVyZXM9W107dGhpcy5zdHlsZXM9e307dGhpcy5mZXRjaGVkPXt9O3JldHVybiB0aGlzLnBhcnNlRGF0YShhLHtkZXB0aDowLHN0eWxlQmFzZVVybDp0aGlzLnN0eWxlQmFzZVVybH0pfSxwYXJzZURhdGE6ZnVuY3Rpb24oYSxiKXsic3RyaW5nIj09dHlwZW9mIGEmJgooYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTtmb3IodmFyIGM9WyJMaW5rIiwiTmV0d29ya0xpbmsiLCJTdHlsZSIsIlN0eWxlTWFwIiwiUGxhY2VtYXJrIl0sZD0wLGU9Yy5sZW5ndGg7ZDxlOysrZCl7dmFyIGY9Y1tkXSxnPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLCIqIixmKTtpZigwIT1nLmxlbmd0aClzd2l0Y2goZi50b0xvd2VyQ2FzZSgpKXtjYXNlICJsaW5rIjpjYXNlICJuZXR3b3JrbGluayI6dGhpcy5wYXJzZUxpbmtzKGcsYik7YnJlYWs7Y2FzZSAic3R5bGUiOnRoaXMuZXh0cmFjdFN0eWxlcyYmdGhpcy5wYXJzZVN0eWxlcyhnLGIpO2JyZWFrO2Nhc2UgInN0eWxlbWFwIjp0aGlzLmV4dHJhY3RTdHlsZXMmJnRoaXMucGFyc2VTdHlsZU1hcHMoZyxiKTticmVhaztjYXNlICJwbGFjZW1hcmsiOnRoaXMucGFyc2VGZWF0dXJlcyhnLGIpfX1yZXR1cm4gdGhpcy5mZWF0dXJlc30scGFyc2VMaW5rczpmdW5jdGlvbihhLApiKXtpZihiLmRlcHRoPj10aGlzLm1heERlcHRoKXJldHVybiExO3ZhciBjPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYik7Yy5kZXB0aCsrO2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9dGhpcy5wYXJzZVByb3BlcnR5KGFbZF0sIioiLCJocmVmIik7ZiYmIXRoaXMuZmV0Y2hlZFtmXSYmKHRoaXMuZmV0Y2hlZFtmXT0hMCwoZj10aGlzLmZldGNoTGluayhmKSkmJnRoaXMucGFyc2VEYXRhKGYsYykpfX0sZmV0Y2hMaW5rOmZ1bmN0aW9uKGEpe2lmKGE9T3BlbkxheWVycy5SZXF1ZXN0LkdFVCh7dXJsOmEsYXN5bmM6ITF9KSlyZXR1cm4gYS5yZXNwb25zZVRleHR9LHBhcnNlU3R5bGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLnBhcnNlU3R5bGUoYVtjXSk7ZSYmKHRoaXMuc3R5bGVzWyhiLnN0eWxlQmFzZVVybHx8IiIpKyIjIitlLmlkXT1lKX19LHBhcnNlS21sQ29sb3I6ZnVuY3Rpb24oYSl7dmFyIGI9Cm51bGw7YSYmKGE9YS5tYXRjaCh0aGlzLnJlZ0V4ZXMua21sQ29sb3IpKSYmKGI9e2NvbG9yOiIjIithWzRdK2FbM10rYVsyXSxvcGFjaXR5OnBhcnNlSW50KGFbMV0sMTYpLzI1NX0pO3JldHVybiBifSxwYXJzZVN0eWxlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj17fSxjPVsiTGluZVN0eWxlIiwiUG9seVN0eWxlIiwiSWNvblN0eWxlIiwiQmFsbG9vblN0eWxlIiwiTGFiZWxTdHlsZSJdLGQsZSxmPTAsZz1jLmxlbmd0aDtmPGc7KytmKWlmKGQ9Y1tmXSxlPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLCIqIixkKVswXSlzd2l0Y2goZC50b0xvd2VyQ2FzZSgpKXtjYXNlICJsaW5lc3R5bGUiOmQ9dGhpcy5wYXJzZVByb3BlcnR5KGUsIioiLCJjb2xvciIpO2lmKGQ9dGhpcy5wYXJzZUttbENvbG9yKGQpKWIuc3Ryb2tlQ29sb3I9ZC5jb2xvcixiLnN0cm9rZU9wYWNpdHk9ZC5vcGFjaXR5OyhkPXRoaXMucGFyc2VQcm9wZXJ0eShlLCIqIiwid2lkdGgiKSkmJihiLnN0cm9rZVdpZHRoPQpkKTticmVhaztjYXNlICJwb2x5c3R5bGUiOmQ9dGhpcy5wYXJzZVByb3BlcnR5KGUsIioiLCJjb2xvciIpO2lmKGQ9dGhpcy5wYXJzZUttbENvbG9yKGQpKWIuZmlsbE9wYWNpdHk9ZC5vcGFjaXR5LGIuZmlsbENvbG9yPWQuY29sb3I7IjAiPT10aGlzLnBhcnNlUHJvcGVydHkoZSwiKiIsImZpbGwiKSYmKGIuZmlsbENvbG9yPSJub25lIik7IjAiPT10aGlzLnBhcnNlUHJvcGVydHkoZSwiKiIsIm91dGxpbmUiKSYmKGIuc3Ryb2tlV2lkdGg9IjAiKTticmVhaztjYXNlICJpY29uc3R5bGUiOnZhciBoPXBhcnNlRmxvYXQodGhpcy5wYXJzZVByb3BlcnR5KGUsIioiLCJzY2FsZSIpfHwxKTtkPTMyKmg7dmFyIGs9MzIqaCxsPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhlLCIqIiwiSWNvbiIpWzBdO2lmKGwpe3ZhciBtPXRoaXMucGFyc2VQcm9wZXJ0eShsLCIqIiwiaHJlZiIpO2lmKG0pe3ZhciBwPXRoaXMucGFyc2VQcm9wZXJ0eShsLCIqIiwidyIpLG49dGhpcy5wYXJzZVByb3BlcnR5KGwsCiIqIiwiaCIpOyFPcGVuTGF5ZXJzLlN0cmluZy5zdGFydHNXaXRoKG0sImh0dHA6Ly9tYXBzLmdvb2dsZS5jb20vbWFwZmlsZXMva21sIil8fChwfHxuKXx8KG49cD02NCxoLz0yKTtwPXB8fG47bj1ufHxwO3AmJihkPXBhcnNlSW50KHApKmgpO24mJihrPXBhcnNlSW50KG4pKmgpO2lmKG49bS5tYXRjaCh0aGlzLnJlZ0V4ZXMua21sSWNvblBhbGV0dGUpKXA9blsxXSxuPW5bMl0sbT10aGlzLnBhcnNlUHJvcGVydHkobCwiKiIsIngiKSxsPXRoaXMucGFyc2VQcm9wZXJ0eShsLCIqIiwieSIpLG09Imh0dHA6Ly9tYXBzLmdvb2dsZS5jb20vbWFwZmlsZXMva21sL3BhbCIrcCsiL2ljb24iKyg4KihsPzctbC8zMjo3KSsobT9tLzMyOjApKStuO2IuZ3JhcGhpY09wYWNpdHk9MTtiLmV4dGVybmFsR3JhcGhpYz1tfX1pZihlPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhlLCIqIiwiaG90U3BvdCIpWzBdKW09cGFyc2VGbG9hdChlLmdldEF0dHJpYnV0ZSgieCIpKSxsPXBhcnNlRmxvYXQoZS5nZXRBdHRyaWJ1dGUoInkiKSksCnA9ZS5nZXRBdHRyaWJ1dGUoInh1bml0cyIpLCJwaXhlbHMiPT1wP2IuZ3JhcGhpY1hPZmZzZXQ9LW0qaDoiaW5zZXRQaXhlbHMiPT1wP2IuZ3JhcGhpY1hPZmZzZXQ9LWQrbSpoOiJmcmFjdGlvbiI9PXAmJihiLmdyYXBoaWNYT2Zmc2V0PS1kKm0pLGU9ZS5nZXRBdHRyaWJ1dGUoInl1bml0cyIpLCJwaXhlbHMiPT1lP2IuZ3JhcGhpY1lPZmZzZXQ9LWsrbCpoKzE6Imluc2V0UGl4ZWxzIj09ZT9iLmdyYXBoaWNZT2Zmc2V0PS0obCpoKSsxOiJmcmFjdGlvbiI9PWUmJihiLmdyYXBoaWNZT2Zmc2V0PS1rKigxLWwpKzEpO2IuZ3JhcGhpY1dpZHRoPWQ7Yi5ncmFwaGljSGVpZ2h0PWs7YnJlYWs7Y2FzZSAiYmFsbG9vbnN0eWxlIjooZT1PcGVuTGF5ZXJzLlV0aWwuZ2V0WG1sTm9kZVZhbHVlKGUpKSYmKGIuYmFsbG9vblN0eWxlPWUucmVwbGFjZSh0aGlzLnJlZ0V4ZXMuc3RyYWlnaHRCcmFja2V0LCIkeyQxfSIpKTticmVhaztjYXNlICJsYWJlbHN0eWxlIjppZihkPXRoaXMucGFyc2VQcm9wZXJ0eShlLAoiKiIsImNvbG9yIiksZD10aGlzLnBhcnNlS21sQ29sb3IoZCkpYi5mb250Q29sb3I9ZC5jb2xvcixiLmZvbnRPcGFjaXR5PWQub3BhY2l0eX0hYi5zdHJva2VDb2xvciYmYi5maWxsQ29sb3ImJihiLnN0cm9rZUNvbG9yPWIuZmlsbENvbG9yKTsoYT1hLmdldEF0dHJpYnV0ZSgiaWQiKSkmJmImJihiLmlkPWEpO3JldHVybiBifSxwYXJzZVN0eWxlTWFwczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylmb3IodmFyIGU9YVtjXSxmPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhlLCIqIiwiUGFpciIpLGU9ZS5nZXRBdHRyaWJ1dGUoImlkIiksZz0wLGg9Zi5sZW5ndGg7ZzxoO2crKyl7dmFyIGs9ZltnXSxsPXRoaXMucGFyc2VQcm9wZXJ0eShrLCIqIiwia2V5Iik7KGs9dGhpcy5wYXJzZVByb3BlcnR5KGssIioiLCJzdHlsZVVybCIpKSYmIm5vcm1hbCI9PWwmJih0aGlzLnN0eWxlc1soYi5zdHlsZUJhc2VVcmx8fCIiKSsiIyIrZV09dGhpcy5zdHlsZXNbKGIuc3R5bGVCYXNlVXJsfHwKIiIpK2tdKX19LHBhcnNlRmVhdHVyZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W10sZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YVtkXSxnPXRoaXMucGFyc2VGZWF0dXJlLmFwcGx5KHRoaXMsW2ZdKTtpZihnKXt0aGlzLmV4dHJhY3RTdHlsZXMmJihnLmF0dHJpYnV0ZXMmJmcuYXR0cmlidXRlcy5zdHlsZVVybCkmJihnLnN0eWxlPXRoaXMuZ2V0U3R5bGUoZy5hdHRyaWJ1dGVzLnN0eWxlVXJsLGIpKTtpZih0aGlzLmV4dHJhY3RTdHlsZXMpe3ZhciBoPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhmLCIqIiwiU3R5bGUiKVswXTtoJiYoaD10aGlzLnBhcnNlU3R5bGUoaCkpJiYoZy5zdHlsZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGcuc3R5bGUsaCkpfXRoaXMuZXh0cmFjdFRyYWNrcz8oZj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoZix0aGlzLm5hbWVzcGFjZXMuZ3gsIlRyYWNrIikpJiYwPGYubGVuZ3RoJiYoZz17ZmVhdHVyZXM6W10sZmVhdHVyZTpnfSwKdGhpcy5yZWFkTm9kZShmWzBdLGcpLDA8Zy5mZWF0dXJlcy5sZW5ndGgmJmMucHVzaC5hcHBseShjLGcuZmVhdHVyZXMpKTpjLnB1c2goZyl9ZWxzZSB0aHJvdyJCYWQgUGxhY2VtYXJrOiAiK2Q7fXRoaXMuZmVhdHVyZXM9dGhpcy5mZWF0dXJlcy5jb25jYXQoYyl9LHJlYWRlcnM6e2ttbDp7d2hlbjpmdW5jdGlvbihhLGIpe2Iud2hlbnMucHVzaChPcGVuTGF5ZXJzLkRhdGUucGFyc2UodGhpcy5nZXRDaGlsZFZhbHVlKGEpKSl9LF90cmFja1BvaW50QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpO2IuYXR0cmlidXRlc1tjXS5wdXNoKHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9fSxneDp7VHJhY2s6ZnVuY3Rpb24oYSxiKXt2YXIgYz17d2hlbnM6W10scG9pbnRzOltdLGFuZ2xlczpbXX07aWYodGhpcy50cmFja0F0dHJpYnV0ZXMpe3ZhciBkO2MuYXR0cmlidXRlcz17fTtmb3IodmFyIGU9MCxmPXRoaXMudHJhY2tBdHRyaWJ1dGVzLmxlbmd0aDtlPApmOysrZSlkPXRoaXMudHJhY2tBdHRyaWJ1dGVzW2VdLGMuYXR0cmlidXRlc1tkXT1bXSxkIGluIHRoaXMucmVhZGVycy5rbWx8fCh0aGlzLnJlYWRlcnMua21sW2RdPXRoaXMucmVhZGVycy5rbWwuX3RyYWNrUG9pbnRBdHRyaWJ1dGUpfXRoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtpZihjLndoZW5zLmxlbmd0aCE9PWMucG9pbnRzLmxlbmd0aCl0aHJvdyBFcnJvcigiZ3g6VHJhY2sgd2l0aCB1bmVxdWFsIG51bWJlciBvZiB3aGVuICgiK2Mud2hlbnMubGVuZ3RoKyIpIGFuZCBneDpjb29yZCAoIitjLnBvaW50cy5sZW5ndGgrIikgZWxlbWVudHMuIik7dmFyIGc9MDxjLmFuZ2xlcy5sZW5ndGg7aWYoZyYmYy53aGVucy5sZW5ndGghPT1jLmFuZ2xlcy5sZW5ndGgpdGhyb3cgRXJyb3IoImd4OlRyYWNrIHdpdGggdW5lcXVhbCBudW1iZXIgb2Ygd2hlbiAoIitjLndoZW5zLmxlbmd0aCsiKSBhbmQgZ3g6YW5nbGVzICgiK2MuYW5nbGVzLmxlbmd0aCsiKSBlbGVtZW50cy4iKTtmb3IodmFyIGgsCmU9MCxmPWMud2hlbnMubGVuZ3RoO2U8ZjsrK2Upe2g9Yi5mZWF0dXJlLmNsb25lKCk7aC5maWQ9Yi5mZWF0dXJlLmZpZHx8Yi5mZWF0dXJlLmlkO2Q9Yy5wb2ludHNbZV07aC5nZW9tZXRyeT1kOyJ6ImluIGQmJihoLmF0dHJpYnV0ZXMuYWx0aXR1ZGU9ZC56KTt0aGlzLmludGVybmFsUHJvamVjdGlvbiYmdGhpcy5leHRlcm5hbFByb2plY3Rpb24mJmguZ2VvbWV0cnkudHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKTtpZih0aGlzLnRyYWNrQXR0cmlidXRlcylmb3IodmFyIGs9MCxsPXRoaXMudHJhY2tBdHRyaWJ1dGVzLmxlbmd0aDtrPGw7KytrKWQ9dGhpcy50cmFja0F0dHJpYnV0ZXNba10saC5hdHRyaWJ1dGVzW2RdPWMuYXR0cmlidXRlc1tkXVtlXTtoLmF0dHJpYnV0ZXMud2hlbj1jLndoZW5zW2VdO2guYXR0cmlidXRlcy50cmFja0lkPWIuZmVhdHVyZS5pZDtnJiYoZD1jLmFuZ2xlc1tlXSxoLmF0dHJpYnV0ZXMuaGVhZGluZz0KcGFyc2VGbG9hdChkWzBdKSxoLmF0dHJpYnV0ZXMudGlsdD1wYXJzZUZsb2F0KGRbMV0pLGguYXR0cmlidXRlcy5yb2xsPXBhcnNlRmxvYXQoZFsyXSkpO2IuZmVhdHVyZXMucHVzaChoKX19LGNvb3JkOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIikuc3BsaXQoL1xzKy8pLGQ9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1swXSxjWzFdKTsyPGMubGVuZ3RoJiYoZC56PXBhcnNlRmxvYXQoY1syXSkpO2IucG9pbnRzLnB1c2goZCl9LGFuZ2xlczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLnNwbGl0KC9ccysvKTtiLmFuZ2xlcy5wdXNoKGMpfX19LHBhcnNlRmVhdHVyZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9WyJNdWx0aUdlb21ldHJ5IiwiUG9seWdvbiIsIkxpbmVTdHJpbmciLCJQb2ludCJdLApjLGQsZSxmPTAsZz1iLmxlbmd0aDtmPGc7KytmKWlmKGM9YltmXSx0aGlzLmludGVybmFsbnM9YS5uYW1lc3BhY2VVUkk/YS5uYW1lc3BhY2VVUkk6dGhpcy5rbWxucyxkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuaW50ZXJuYWxucyxjKSwwPGQubGVuZ3RoKXtpZihiPXRoaXMucGFyc2VHZW9tZXRyeVtjLnRvTG93ZXJDYXNlKCldKWU9Yi5hcHBseSh0aGlzLFtkWzBdXSksdGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiZlLnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7ZWxzZSB0aHJvdyBuZXcgVHlwZUVycm9yKCJVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAiK2MpO2JyZWFrfXZhciBoO3RoaXMuZXh0cmFjdEF0dHJpYnV0ZXMmJihoPXRoaXMucGFyc2VBdHRyaWJ1dGVzKGEpKTtjPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGUsaCk7YT1hLmdldEF0dHJpYnV0ZSgiaWQiKXx8CmEuZ2V0QXR0cmlidXRlKCJuYW1lIik7bnVsbCE9YSYmKGMuZmlkPWEpO3JldHVybiBjfSxnZXRTdHlsZTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5yZW1vdmVUYWlsKGEpLGQ9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxiKTtkLmRlcHRoKys7ZC5zdHlsZUJhc2VVcmw9YzshdGhpcy5zdHlsZXNbYV0mJiFPcGVuTGF5ZXJzLlN0cmluZy5zdGFydHNXaXRoKGEsIiMiKSYmZC5kZXB0aDw9dGhpcy5tYXhEZXB0aCYmIXRoaXMuZmV0Y2hlZFtjXSYmKGM9dGhpcy5mZXRjaExpbmsoYykpJiZ0aGlzLnBhcnNlRGF0YShjLGQpO3JldHVybiBPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuc3R5bGVzW2FdKX0scGFyc2VHZW9tZXRyeTp7cG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5pbnRlcm5hbG5zLCJjb29yZGluYXRlcyIpO2E9W107aWYoMDxiLmxlbmd0aCl7dmFyIGM9YlswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSwKYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnJlbW92ZVNwYWNlLCIiKTthPWMuc3BsaXQoIiwiKX1iPW51bGw7aWYoMTxhLmxlbmd0aCkyPT1hLmxlbmd0aCYmKGFbMl09bnVsbCksYj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzBdLGFbMV0sYVsyXSk7ZWxzZSB0aHJvdyJCYWQgY29vcmRpbmF0ZSBzdHJpbmc6ICIrYztyZXR1cm4gYn0sbGluZXN0cmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuaW50ZXJuYWxucywiY29vcmRpbmF0ZXMiKSxkPW51bGw7aWYoMDxjLmxlbmd0aCl7Zm9yKHZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShjWzBdKSxjPWMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxjPWMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbUNvbW1hLCIsIiksZD1jLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSxlPWQubGVuZ3RoLGY9QXJyYXkoZSksZyxoLGs9MDtrPGU7KytrKWlmKGc9CmRba10uc3BsaXQoIiwiKSxoPWcubGVuZ3RoLDE8aCkyPT1nLmxlbmd0aCYmKGdbMl09bnVsbCksZltrXT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChnWzBdLGdbMV0sZ1syXSk7ZWxzZSB0aHJvdyJCYWQgTGluZVN0cmluZyBwb2ludCBjb29yZGluYXRlczogIitkW2tdO2lmKGUpZD1iP25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcoZik6bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhmKTtlbHNlIHRocm93IkJhZCBMaW5lU3RyaW5nIGNvb3JkaW5hdGVzOiAiK2M7fXJldHVybiBkfSxwb2x5Z29uOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5pbnRlcm5hbG5zLCJMaW5lYXJSaW5nIik7dmFyIGI9YS5sZW5ndGgsYz1BcnJheShiKTtpZigwPGIpZm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7KytkKWlmKGI9dGhpcy5wYXJzZUdlb21ldHJ5LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYVtkXSwhMF0pKWNbZF09CmI7ZWxzZSB0aHJvdyJCYWQgTGluZWFyUmluZyBnZW9tZXRyeTogIitkO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKGMpfSxtdWx0aWdlb21ldHJ5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPVtdLGQ9YS5jaGlsZE5vZGVzLGU9MCxmPWQubGVuZ3RoO2U8ZjsrK2UpYT1kW2VdLDE9PWEubm9kZVR5cGUmJihiPWEucHJlZml4P2Eubm9kZU5hbWUuc3BsaXQoIjoiKVsxXTphLm5vZGVOYW1lLChiPXRoaXMucGFyc2VHZW9tZXRyeVtiLnRvTG93ZXJDYXNlKCldKSYmYy5wdXNoKGIuYXBwbHkodGhpcyxbYV0pKSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24oYyl9fSxwYXJzZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9e30sYz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJFeHRlbmRlZERhdGEiKTtjLmxlbmd0aCYmKGI9dGhpcy5wYXJzZUV4dGVuZGVkRGF0YShjWzBdKSk7dmFyIGQsZSxmO2E9YS5jaGlsZE5vZGVzO2Zvcih2YXIgYz0KMCxnPWEubGVuZ3RoO2M8ZzsrK2MpaWYoZD1hW2NdLDE9PWQubm9kZVR5cGUmJihlPWQuY2hpbGROb2RlcywxPD1lLmxlbmd0aCYmMz49ZS5sZW5ndGgpKXtzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgMTpmPWVbMF07YnJlYWs7Y2FzZSAyOmY9ZVswXTtlPWVbMV07Zj0zPT1mLm5vZGVUeXBlfHw0PT1mLm5vZGVUeXBlP2Y6ZTticmVhaztkZWZhdWx0OmY9ZVsxXX1pZigzPT1mLm5vZGVUeXBlfHw0PT1mLm5vZGVUeXBlKWlmKGQ9ZC5wcmVmaXg/ZC5ub2RlTmFtZS5zcGxpdCgiOiIpWzFdOmQubm9kZU5hbWUsZj1PcGVuTGF5ZXJzLlV0aWwuZ2V0WG1sTm9kZVZhbHVlKGYpKWY9Zi5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLGJbZF09Zn1yZXR1cm4gYn0scGFyc2VFeHRlbmRlZERhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9e30sYyxkLGUsZixnPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkRhdGEiKTtjPTA7Zm9yKGQ9Zy5sZW5ndGg7YzxkO2MrKyl7ZT1nW2NdO2Y9ZS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTsKdmFyIGg9e30saz1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ2YWx1ZSIpO2subGVuZ3RoJiYoaC52YWx1ZT10aGlzLmdldENoaWxkVmFsdWUoa1swXSkpO3RoaXMua3ZwQXR0cmlidXRlcz9iW2ZdPWgudmFsdWU6KGU9ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZGlzcGxheU5hbWUiKSxlLmxlbmd0aCYmKGguZGlzcGxheU5hbWU9dGhpcy5nZXRDaGlsZFZhbHVlKGVbMF0pKSxiW2ZdPWgpfWE9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiU2ltcGxlRGF0YSIpO2M9MDtmb3IoZD1hLmxlbmd0aDtjPGQ7YysrKWg9e30sZT1hW2NdLGY9ZS5nZXRBdHRyaWJ1dGUoIm5hbWUiKSxoLnZhbHVlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShlKSx0aGlzLmt2cEF0dHJpYnV0ZXM/YltmXT1oLnZhbHVlOihoLmRpc3BsYXlOYW1lPWYsYltmXT1oKTtyZXR1cm4gYn0scGFyc2VQcm9wZXJ0eTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7YT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSxiLGMpO3RyeXtkPU9wZW5MYXllcnMuVXRpbC5nZXRYbWxOb2RlVmFsdWUoYVswXSl9Y2F0Y2goZSl7ZD0KbnVsbH1yZXR1cm4gZH0sd3JpdGU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsImttbCIpLGM9dGhpcy5jcmVhdGVGb2xkZXJYTUwoKSxkPTAsZT1hLmxlbmd0aDtkPGU7KytkKWMuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVQbGFjZW1hcmtYTUwoYVtkXSkpO2IuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbYl0pfSxjcmVhdGVGb2xkZXJYTUw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJGb2xkZXIiKTtpZih0aGlzLmZvbGRlcnNOYW1lKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJuYW1lIiksYz10aGlzLmNyZWF0ZVRleHROb2RlKHRoaXMuZm9sZGVyc05hbWUpO2IuYXBwZW5kQ2hpbGQoYyk7YS5hcHBlbmRDaGlsZChiKX10aGlzLmZvbGRlcnNEZXNjJiYKKGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiZGVzY3JpcHRpb24iKSxjPXRoaXMuY3JlYXRlVGV4dE5vZGUodGhpcy5mb2xkZXJzRGVzYyksYi5hcHBlbmRDaGlsZChjKSxhLmFwcGVuZENoaWxkKGIpKTtyZXR1cm4gYX0sY3JlYXRlUGxhY2VtYXJrWE1MOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIm5hbWUiKSxjPWEuc3R5bGUmJmEuc3R5bGUubGFiZWw/YS5zdHlsZS5sYWJlbDphLmlkO2IuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXMubmFtZXx8YykpO3ZhciBkPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsImRlc2NyaXB0aW9uIik7ZC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGEuYXR0cmlidXRlcy5kZXNjcmlwdGlvbnx8dGhpcy5wbGFjZW1hcmtzRGVzYykpO2M9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiUGxhY2VtYXJrIik7bnVsbCE9CmEuZmlkJiZjLnNldEF0dHJpYnV0ZSgiaWQiLGEuZmlkKTtjLmFwcGVuZENoaWxkKGIpO2MuYXBwZW5kQ2hpbGQoZCk7Yj10aGlzLmJ1aWxkR2VvbWV0cnlOb2RlKGEuZ2VvbWV0cnkpO2MuYXBwZW5kQ2hpbGQoYik7YS5hdHRyaWJ1dGVzJiYoYT10aGlzLmJ1aWxkRXh0ZW5kZWREYXRhKGEuYXR0cmlidXRlcykpJiZjLmFwcGVuZENoaWxkKGEpO3JldHVybiBjfSxidWlsZEdlb21ldHJ5Tm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLkNMQVNTX05BTUUsYj1iLnN1YnN0cmluZyhiLmxhc3RJbmRleE9mKCIuIikrMSksYj10aGlzLmJ1aWxkR2VvbWV0cnlbYi50b0xvd2VyQ2FzZSgpXSxjPW51bGw7YiYmKGM9Yi5hcHBseSh0aGlzLFthXSkpO3JldHVybiBjfSxidWlsZEdlb21ldHJ5Ontwb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJQb2ludCIpO2IuYXBwZW5kQ2hpbGQodGhpcy5idWlsZENvb3JkaW5hdGVzTm9kZShhKSk7cmV0dXJuIGJ9LAptdWx0aXBvaW50OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmJ1aWxkR2VvbWV0cnkuY29sbGVjdGlvbi5hcHBseSh0aGlzLFthXSl9LGxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiTGluZVN0cmluZyIpO2IuYXBwZW5kQ2hpbGQodGhpcy5idWlsZENvb3JkaW5hdGVzTm9kZShhKSk7cmV0dXJuIGJ9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5idWlsZEdlb21ldHJ5LmNvbGxlY3Rpb24uYXBwbHkodGhpcyxbYV0pfSxsaW5lYXJyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIkxpbmVhclJpbmciKTtiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRDb29yZGluYXRlc05vZGUoYSkpO3JldHVybiBifSxwb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIlBvbHlnb24iKTthPWEuY29tcG9uZW50czsKZm9yKHZhciBjLGQsZT0wLGY9YS5sZW5ndGg7ZTxmOysrZSljPTA9PWU/Im91dGVyQm91bmRhcnlJcyI6ImlubmVyQm91bmRhcnlJcyIsYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLGMpLGQ9dGhpcy5idWlsZEdlb21ldHJ5LmxpbmVhcnJpbmcuYXBwbHkodGhpcyxbYVtlXV0pLGMuYXBwZW5kQ2hpbGQoZCksYi5hcHBlbmRDaGlsZChjKTtyZXR1cm4gYn0sbXVsdGlwb2x5Z29uOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmJ1aWxkR2VvbWV0cnkuY29sbGVjdGlvbi5hcHBseSh0aGlzLFthXSl9LGNvbGxlY3Rpb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIk11bHRpR2VvbWV0cnkiKSxjLGQ9MCxlPWEuY29tcG9uZW50cy5sZW5ndGg7ZDxlOysrZCkoYz10aGlzLmJ1aWxkR2VvbWV0cnlOb2RlLmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tkXV0pKSYmYi5hcHBlbmRDaGlsZChjKTtyZXR1cm4gYn19LGJ1aWxkQ29vcmRpbmF0ZXNOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPQp0aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJjb29yZGluYXRlcyIpLGM7aWYoYz1hLmNvbXBvbmVudHMpe2Zvcih2YXIgZD1jLmxlbmd0aCxlPUFycmF5KGQpLGY9MDtmPGQ7KytmKWE9Y1tmXSxlW2ZdPXRoaXMuYnVpbGRDb29yZGluYXRlcyhhKTtjPWUuam9pbigiICIpfWVsc2UgYz10aGlzLmJ1aWxkQ29vcmRpbmF0ZXMoYSk7Yz10aGlzLmNyZWF0ZVRleHROb2RlKGMpO2IuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LGJ1aWxkQ29vcmRpbmF0ZXM6ZnVuY3Rpb24oYSl7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiYoYT1hLmNsb25lKCksYS50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pKTtyZXR1cm4gYS54KyIsIithLnl9LGJ1aWxkRXh0ZW5kZWREYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIkV4dGVuZGVkRGF0YSIpLApjO2ZvcihjIGluIGEpaWYoYVtjXSYmIm5hbWUiIT1jJiYiZGVzY3JpcHRpb24iIT1jJiYic3R5bGVVcmwiIT1jKXt2YXIgZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJEYXRhIik7ZC5zZXRBdHRyaWJ1dGUoIm5hbWUiLGMpO3ZhciBlPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsInZhbHVlIik7aWYoIm9iamVjdCI9PXR5cGVvZiBhW2NdKXtpZihhW2NdLnZhbHVlJiZlLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlVGV4dE5vZGUoYVtjXS52YWx1ZSkpLGFbY10uZGlzcGxheU5hbWUpe3ZhciBmPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsImRpc3BsYXlOYW1lIik7Zi5hcHBlbmRDaGlsZCh0aGlzLmdldFhNTERvYygpLmNyZWF0ZUNEQVRBU2VjdGlvbihhW2NdLmRpc3BsYXlOYW1lKSk7ZC5hcHBlbmRDaGlsZChmKX19ZWxzZSBlLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlVGV4dE5vZGUoYVtjXSkpO2QuYXBwZW5kQ2hpbGQoZSk7Yi5hcHBlbmRDaGlsZChkKX1yZXR1cm4gdGhpcy5pc1NpbXBsZUNvbnRlbnQoYik/Cm51bGw6Yn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuS01MIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qcm90b2NvbCx7dmVyc2lvbjpudWxsLHNyc05hbWU6IkVQU0c6NDMyNiIsZmVhdHVyZVR5cGU6bnVsbCxmZWF0dXJlTlM6bnVsbCxnZW9tZXRyeU5hbWU6InRoZV9nZW9tIixzY2hlbWE6bnVsbCxmZWF0dXJlUHJlZml4OiJmZWF0dXJlIixmb3JtYXRPcHRpb25zOm51bGwscmVhZEZvcm1hdDpudWxsLHJlYWRPcHRpb25zOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTthLmZvcm1hdHx8KHRoaXMuZm9ybWF0PU9wZW5MYXllcnMuRm9ybWF0LldGU1QoT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7dmVyc2lvbjp0aGlzLnZlcnNpb24sZmVhdHVyZVR5cGU6dGhpcy5mZWF0dXJlVHlwZSxmZWF0dXJlTlM6dGhpcy5mZWF0dXJlTlMsZmVhdHVyZVByZWZpeDp0aGlzLmZlYXR1cmVQcmVmaXgsZ2VvbWV0cnlOYW1lOnRoaXMuZ2VvbWV0cnlOYW1lLApzcnNOYW1lOnRoaXMuc3JzTmFtZSxzY2hlbWE6dGhpcy5zY2hlbWF9LHRoaXMuZm9ybWF0T3B0aW9ucykpKTshYS5nZW9tZXRyeU5hbWUmJjE8cGFyc2VGbG9hdCh0aGlzLmZvcm1hdC52ZXJzaW9uKSYmdGhpcy5zZXRHZW9tZXRyeU5hbWUobnVsbCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMmJiF0aGlzLm9wdGlvbnMuZm9ybWF0JiZ0aGlzLmZvcm1hdC5kZXN0cm95KCk7dGhpcy5mb3JtYXQ9bnVsbDtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMpfSxyZWFkOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUHJvdG9jb2wucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxhKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMub3B0aW9uc3x8e30pO3ZhciBiPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXF1ZXN0VHlwZToicmVhZCJ9KSwKYz1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMuZm9ybWF0LFt0aGlzLmZvcm1hdC53cml0ZU5vZGUoIndmczpHZXRGZWF0dXJlIixhKV0pO2IucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOmEudXJsLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVSZWFkLGIsYSkscGFyYW1zOmEucGFyYW1zLGhlYWRlcnM6YS5oZWFkZXJzLGRhdGE6Y30pO3JldHVybiBifSxzZXRGZWF0dXJlVHlwZTpmdW5jdGlvbihhKXt0aGlzLmZlYXR1cmVUeXBlPWE7dGhpcy5mb3JtYXQuZmVhdHVyZVR5cGU9YX0sc2V0R2VvbWV0cnlOYW1lOmZ1bmN0aW9uKGEpe3RoaXMuZ2VvbWV0cnlOYW1lPWE7dGhpcy5mb3JtYXQuZ2VvbWV0cnlOYW1lPWF9LGhhbmRsZVJlYWQ6ZnVuY3Rpb24oYSxiKXtiPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYik7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix0aGlzLm9wdGlvbnMpO2lmKGIuY2FsbGJhY2spe3ZhciBjPQphLnByaXY7MjAwPD1jLnN0YXR1cyYmMzAwPmMuc3RhdHVzPyhjPXRoaXMucGFyc2VSZXNwb25zZShjLGIucmVhZE9wdGlvbnMpKSYmITEhPT1jLnN1Y2Nlc3M/KGIucmVhZE9wdGlvbnMmJiJvYmplY3QiPT1iLnJlYWRPcHRpb25zLm91dHB1dD9PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEsYyk6YS5mZWF0dXJlcz1jLGEuY29kZT1PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLlNVQ0NFU1MpOihhLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5GQUlMVVJFLGEuZXJyb3I9Yyk6YS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRTtiLmNhbGxiYWNrLmNhbGwoYi5zY29wZSxhKX19LHBhcnNlUmVzcG9uc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnJlc3BvbnNlWE1MO2MmJmMuZG9jdW1lbnRFbGVtZW50fHwoYz1hLnJlc3BvbnNlVGV4dCk7aWYoIWN8fDA+PWMubGVuZ3RoKXJldHVybiBudWxsO2M9bnVsbCE9PXRoaXMucmVhZEZvcm1hdD90aGlzLnJlYWRGb3JtYXQucmVhZChjKToKdGhpcy5mb3JtYXQucmVhZChjLGIpO2lmKCF0aGlzLmZlYXR1cmVOUyl7dmFyIGQ9dGhpcy5yZWFkRm9ybWF0fHx0aGlzLmZvcm1hdDt0aGlzLmZlYXR1cmVOUz1kLmZlYXR1cmVOUztkLmF1dG9Db25maWc9ITE7dGhpcy5nZW9tZXRyeU5hbWV8fHRoaXMuc2V0R2VvbWV0cnlOYW1lKGQuZ2VvbWV0cnlOYW1lKX1yZXR1cm4gY30sY29tbWl0OmZ1bmN0aW9uKGEsYil7Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgYz1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxdWVzdFR5cGU6ImNvbW1pdCIscmVxRmVhdHVyZXM6YX0pO2MucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOmIudXJsLGhlYWRlcnM6Yi5oZWFkZXJzLGRhdGE6dGhpcy5mb3JtYXQud3JpdGUoYSxiKSxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlQ29tbWl0LGMsYil9KTsKcmV0dXJuIGN9LGhhbmRsZUNvbW1pdDpmdW5jdGlvbihhLGIpe2lmKGIuY2FsbGJhY2spe3ZhciBjPWEucHJpdixkPWMucmVzcG9uc2VYTUw7ZCYmZC5kb2N1bWVudEVsZW1lbnR8fChkPWMucmVzcG9uc2VUZXh0KTtjPXRoaXMuZm9ybWF0LnJlYWQoZCl8fHt9O2EuaW5zZXJ0SWRzPWMuaW5zZXJ0SWRzfHxbXTtjLnN1Y2Nlc3M/YS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuU1VDQ0VTUzooYS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRSxhLmVycm9yPWMpO2IuY2FsbGJhY2suY2FsbChiLnNjb3BlLGEpfX0sZmlsdGVyRGVsZXRlOmZ1bmN0aW9uKGEsYil7Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTtuZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxdWVzdFR5cGU6ImNvbW1pdCJ9KTt2YXIgYz10aGlzLmZvcm1hdC5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6VHJhbnNhY3Rpb24iLAp7YXR0cmlidXRlczp7c2VydmljZToiV0ZTIix2ZXJzaW9uOnRoaXMudmVyc2lvbn19KSxkPXRoaXMuZm9ybWF0LmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpEZWxldGUiLHthdHRyaWJ1dGVzOnt0eXBlTmFtZTooYi5mZWF0dXJlTlM/dGhpcy5mZWF0dXJlUHJlZml4KyI6IjoiIikrYi5mZWF0dXJlVHlwZX19KTtiLmZlYXR1cmVOUyYmZC5zZXRBdHRyaWJ1dGUoInhtbG5zOiIrdGhpcy5mZWF0dXJlUHJlZml4LGIuZmVhdHVyZU5TKTt2YXIgZT10aGlzLmZvcm1hdC53cml0ZU5vZGUoIm9nYzpGaWx0ZXIiLGEpO2QuYXBwZW5kQ2hpbGQoZSk7Yy5hcHBlbmRDaGlsZChkKTtjPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcy5mb3JtYXQsW2NdKTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0LlBPU1Qoe3VybDp0aGlzLnVybCxjYWxsYmFjazpiLmNhbGxiYWNrfHxmdW5jdGlvbigpe30sZGF0YTpjfSl9LGFib3J0OmZ1bmN0aW9uKGEpe2EmJmEucHJpdi5hYm9ydCgpfSwKQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qcm90b2NvbC5XRlMudjEifSk7T3BlbkxheWVycy5IYW5kbGVyLkZlYXR1cmU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIse0VWRU5UTUFQOntjbGljazp7ImluIjoiY2xpY2siLG91dDoiY2xpY2tvdXQifSxtb3VzZW1vdmU6eyJpbiI6Im92ZXIiLG91dDoib3V0In0sZGJsY2xpY2s6eyJpbiI6ImRibGNsaWNrIixvdXQ6bnVsbH0sbW91c2Vkb3duOnsiaW4iOm51bGwsb3V0Om51bGx9LG1vdXNldXA6eyJpbiI6bnVsbCxvdXQ6bnVsbH0sdG91Y2hzdGFydDp7ImluIjoiY2xpY2siLG91dDoiY2xpY2tvdXQifX0sZmVhdHVyZTpudWxsLGxhc3RGZWF0dXJlOm51bGwsZG93bjpudWxsLHVwOm51bGwsY2xpY2tUb2xlcmFuY2U6NCxnZW9tZXRyeVR5cGVzOm51bGwsc3RvcENsaWNrOiEwLHN0b3BEb3duOiEwLHN0b3BVcDohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGMsZF0pO3RoaXMubGF5ZXI9CmJ9LHRvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydFRvdWNoKCk7cmV0dXJuIE9wZW5MYXllcnMuRXZlbnQuaXNNdWx0aVRvdWNoKGEpPyEwOnRoaXMubW91c2Vkb3duKGEpfSx0b3VjaG1vdmU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKX0sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe2lmKE9wZW5MYXllcnMuRXZlbnQuaXNMZWZ0Q2xpY2soYSl8fE9wZW5MYXllcnMuRXZlbnQuaXNTaW5nbGVUb3VjaChhKSl0aGlzLmRvd249YS54eTtyZXR1cm4gdGhpcy5oYW5kbGUoYSk/IXRoaXMuc3RvcERvd246ITB9LG1vdXNldXA6ZnVuY3Rpb24oYSl7dGhpcy51cD1hLnh5O3JldHVybiB0aGlzLmhhbmRsZShhKT8hdGhpcy5zdG9wVXA6ITB9LGNsaWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmhhbmRsZShhKT8hdGhpcy5zdG9wQ2xpY2s6ITB9LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtpZighdGhpcy5jYWxsYmFja3Mub3ZlciYmIXRoaXMuY2FsbGJhY2tzLm91dClyZXR1cm4hMDsKdGhpcy5oYW5kbGUoYSk7cmV0dXJuITB9LGRibGNsaWNrOmZ1bmN0aW9uKGEpe3JldHVybiF0aGlzLmhhbmRsZShhKX0sZ2VvbWV0cnlUeXBlTWF0Y2hlczpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09dGhpcy5nZW9tZXRyeVR5cGVzfHwtMTxPcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmdlb21ldHJ5VHlwZXMsYS5nZW9tZXRyeS5DTEFTU19OQU1FKX0saGFuZGxlOmZ1bmN0aW9uKGEpe3RoaXMuZmVhdHVyZSYmIXRoaXMuZmVhdHVyZS5sYXllciYmKHRoaXMuZmVhdHVyZT1udWxsKTt2YXIgYj1hLnR5cGUsYz0hMSxkPSEhdGhpcy5mZWF0dXJlLGU9ImNsaWNrIj09Ynx8ImRibGNsaWNrIj09Ynx8InRvdWNoc3RhcnQiPT1iOyh0aGlzLmZlYXR1cmU9dGhpcy5sYXllci5nZXRGZWF0dXJlRnJvbUV2ZW50KGEpKSYmIXRoaXMuZmVhdHVyZS5sYXllciYmKHRoaXMuZmVhdHVyZT1udWxsKTt0aGlzLmxhc3RGZWF0dXJlJiYhdGhpcy5sYXN0RmVhdHVyZS5sYXllciYmKHRoaXMubGFzdEZlYXR1cmU9Cm51bGwpO3RoaXMuZmVhdHVyZT8oInRvdWNoc3RhcnQiPT09YiYmT3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKSxhPXRoaXMuZmVhdHVyZSE9dGhpcy5sYXN0RmVhdHVyZSx0aGlzLmdlb21ldHJ5VHlwZU1hdGNoZXModGhpcy5mZWF0dXJlKT8oZCYmYT8odGhpcy5sYXN0RmVhdHVyZSYmdGhpcy50cmlnZ2VyQ2FsbGJhY2soYiwib3V0IixbdGhpcy5sYXN0RmVhdHVyZV0pLHRoaXMudHJpZ2dlckNhbGxiYWNrKGIsImluIixbdGhpcy5mZWF0dXJlXSkpOmQmJiFlfHx0aGlzLnRyaWdnZXJDYWxsYmFjayhiLCJpbiIsW3RoaXMuZmVhdHVyZV0pLHRoaXMubGFzdEZlYXR1cmU9dGhpcy5mZWF0dXJlLGM9ITApOih0aGlzLmxhc3RGZWF0dXJlJiYoZCYmYXx8ZSkmJnRoaXMudHJpZ2dlckNhbGxiYWNrKGIsIm91dCIsW3RoaXMubGFzdEZlYXR1cmVdKSx0aGlzLmZlYXR1cmU9bnVsbCkpOnRoaXMubGFzdEZlYXR1cmUmJihkfHxlKSYmdGhpcy50cmlnZ2VyQ2FsbGJhY2soYiwib3V0IiwKW3RoaXMubGFzdEZlYXR1cmVdKTtyZXR1cm4gY30sdHJpZ2dlckNhbGxiYWNrOmZ1bmN0aW9uKGEsYixjKXtpZihiPXRoaXMuRVZFTlRNQVBbYV1bYl0pImNsaWNrIj09YSYmdGhpcy51cCYmdGhpcy5kb3duPyhNYXRoLnNxcnQoTWF0aC5wb3codGhpcy51cC54LXRoaXMuZG93bi54LDIpK01hdGgucG93KHRoaXMudXAueS10aGlzLmRvd24ueSwyKSk8PXRoaXMuY2xpY2tUb2xlcmFuY2UmJnRoaXMuY2FsbGJhY2soYixjKSx0aGlzLnVwPXRoaXMuZG93bj1udWxsKTp0aGlzLmNhbGxiYWNrKGIsYyl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLm1vdmVMYXllclRvVG9wKCksdGhpcy5tYXAuZXZlbnRzLm9uKHtyZW1vdmVsYXllcjp0aGlzLmhhbmRsZU1hcEV2ZW50cyxjaGFuZ2VsYXllcjp0aGlzLmhhbmRsZU1hcEV2ZW50cyxzY29wZTp0aGlzfSksYT0hMCk7CnJldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMubW92ZUxheWVyQmFjaygpLHRoaXMudXA9dGhpcy5kb3duPXRoaXMubGFzdEZlYXR1cmU9dGhpcy5mZWF0dXJlPW51bGwsdGhpcy5tYXAuZXZlbnRzLnVuKHtyZW1vdmVsYXllcjp0aGlzLmhhbmRsZU1hcEV2ZW50cyxjaGFuZ2VsYXllcjp0aGlzLmhhbmRsZU1hcEV2ZW50cyxzY29wZTp0aGlzfSksYT0hMCk7cmV0dXJuIGF9LGhhbmRsZU1hcEV2ZW50czpmdW5jdGlvbihhKXsicmVtb3ZlbGF5ZXIiIT1hLnR5cGUmJiJvcmRlciIhPWEucHJvcGVydHl8fHRoaXMubW92ZUxheWVyVG9Ub3AoKX0sbW92ZUxheWVyVG9Ub3A6ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLm1heCh0aGlzLm1hcC5aX0lOREVYX0JBU0UuRmVhdHVyZS0xLHRoaXMubGF5ZXIuZ2V0WkluZGV4KCkpKzE7dGhpcy5sYXllci5zZXRaSW5kZXgoYSl9LAptb3ZlTGF5ZXJCYWNrOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sYXllci5nZXRaSW5kZXgoKS0xO2E+PXRoaXMubWFwLlpfSU5ERVhfQkFTRS5GZWF0dXJlP3RoaXMubGF5ZXIuc2V0WkluZGV4KGEpOnRoaXMubWFwLnNldExheWVyWkluZGV4KHRoaXMubGF5ZXIsdGhpcy5tYXAuZ2V0TGF5ZXJJbmRleCh0aGlzLmxheWVyKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuSGFuZGxlci5GZWF0dXJlIn0pO09wZW5MYXllcnMuU3R5bGVNYXA9T3BlbkxheWVycy5DbGFzcyh7c3R5bGVzOm51bGwsZXh0ZW5kRGVmYXVsdDohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7dGhpcy5zdHlsZXM9eyJkZWZhdWx0IjpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlWyJkZWZhdWx0Il0pLHNlbGVjdDpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlLnNlbGVjdCksdGVtcG9yYXJ5Om5ldyBPcGVuTGF5ZXJzLlN0eWxlKE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Iuc3R5bGUudGVtcG9yYXJ5KSwiZGVsZXRlIjpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlWyJkZWxldGUiXSl9O2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlN0eWxlKXRoaXMuc3R5bGVzWyJkZWZhdWx0Il09YSx0aGlzLnN0eWxlcy5zZWxlY3Q9YSx0aGlzLnN0eWxlcy50ZW1wb3Jhcnk9YSx0aGlzLnN0eWxlc1siZGVsZXRlIl09CmE7ZWxzZSBpZigib2JqZWN0Ij09dHlwZW9mIGEpZm9yKHZhciBjIGluIGEpaWYoYVtjXWluc3RhbmNlb2YgT3BlbkxheWVycy5TdHlsZSl0aGlzLnN0eWxlc1tjXT1hW2NdO2Vsc2UgaWYoIm9iamVjdCI9PXR5cGVvZiBhW2NdKXRoaXMuc3R5bGVzW2NdPW5ldyBPcGVuTGF5ZXJzLlN0eWxlKGFbY10pO2Vsc2V7dGhpcy5zdHlsZXNbImRlZmF1bHQiXT1uZXcgT3BlbkxheWVycy5TdHlsZShhKTt0aGlzLnN0eWxlcy5zZWxlY3Q9bmV3IE9wZW5MYXllcnMuU3R5bGUoYSk7dGhpcy5zdHlsZXMudGVtcG9yYXJ5PW5ldyBPcGVuTGF5ZXJzLlN0eWxlKGEpO3RoaXMuc3R5bGVzWyJkZWxldGUiXT1uZXcgT3BlbkxheWVycy5TdHlsZShhKTticmVha31PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5zdHlsZXMpdGhpcy5zdHlsZXNbYV0uZGVzdHJveSgpO3RoaXMuc3R5bGVzPW51bGx9LGNyZWF0ZVN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSwKYil7YXx8KGE9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IpO3RoaXMuc3R5bGVzW2JdfHwoYj0iZGVmYXVsdCIpO2EucmVuZGVySW50ZW50PWI7dmFyIGM9e307dGhpcy5leHRlbmREZWZhdWx0JiYiZGVmYXVsdCIhPWImJihjPXRoaXMuc3R5bGVzWyJkZWZhdWx0Il0uY3JlYXRlU3ltYm9saXplcihhKSk7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5leHRlbmQoYyx0aGlzLnN0eWxlc1tiXS5jcmVhdGVTeW1ib2xpemVyKGEpKX0sYWRkVW5pcXVlVmFsdWVSdWxlczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXSxmO2ZvcihmIGluIGMpZS5wdXNoKG5ldyBPcGVuTGF5ZXJzLlJ1bGUoe3N5bWJvbGl6ZXI6Y1tmXSxjb250ZXh0OmQsZmlsdGVyOm5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE8scHJvcGVydHk6Yix2YWx1ZTpmfSl9KSk7dGhpcy5zdHlsZXNbYV0uYWRkUnVsZXMoZSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3R5bGVNYXAifSk7T3BlbkxheWVycy5MYXllci5WZWN0b3I9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLHtpc0Jhc2VMYXllcjohMSxpc0ZpeGVkOiExLGZlYXR1cmVzOm51bGwsZmlsdGVyOm51bGwsc2VsZWN0ZWRGZWF0dXJlczpudWxsLHVucmVuZGVyZWRGZWF0dXJlczpudWxsLHJlcG9ydEVycm9yOiEwLHN0eWxlOm51bGwsc3R5bGVNYXA6bnVsbCxzdHJhdGVnaWVzOm51bGwscHJvdG9jb2w6bnVsbCxyZW5kZXJlcnM6WyJTVkciLCJWTUwiLCJDYW52YXMiXSxyZW5kZXJlcjpudWxsLHJlbmRlcmVyT3B0aW9uczpudWxsLGdlb21ldHJ5VHlwZTpudWxsLGRyYXduOiExLHJhdGlvOjEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVuZGVyZXImJnRoaXMucmVuZGVyZXIuc3VwcG9ydGVkKCl8fHRoaXMuYXNzaWduUmVuZGVyZXIoKTt0aGlzLnJlbmRlcmVyJiZ0aGlzLnJlbmRlcmVyLnN1cHBvcnRlZCgpfHwKKHRoaXMucmVuZGVyZXI9bnVsbCx0aGlzLmRpc3BsYXlFcnJvcigpKTt0aGlzLnN0eWxlTWFwfHwodGhpcy5zdHlsZU1hcD1uZXcgT3BlbkxheWVycy5TdHlsZU1hcCk7dGhpcy5mZWF0dXJlcz1bXTt0aGlzLnNlbGVjdGVkRmVhdHVyZXM9W107dGhpcy51bnJlbmRlcmVkRmVhdHVyZXM9e307aWYodGhpcy5zdHJhdGVnaWVzKWZvcih2YXIgYz0wLGQ9dGhpcy5zdHJhdGVnaWVzLmxlbmd0aDtjPGQ7YysrKXRoaXMuc3RyYXRlZ2llc1tjXS5zZXRMYXllcih0aGlzKX0sZGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMuc3RyYXRlZ2llcyl7dmFyIGEsYixjO2I9MDtmb3IoYz10aGlzLnN0cmF0ZWdpZXMubGVuZ3RoO2I8YztiKyspYT10aGlzLnN0cmF0ZWdpZXNbYl0sYS5hdXRvRGVzdHJveSYmYS5kZXN0cm95KCk7dGhpcy5zdHJhdGVnaWVzPW51bGx9dGhpcy5wcm90b2NvbCYmKHRoaXMucHJvdG9jb2wuYXV0b0Rlc3Ryb3kmJnRoaXMucHJvdG9jb2wuZGVzdHJveSgpLHRoaXMucHJvdG9jb2w9Cm51bGwpO3RoaXMuZGVzdHJveUZlYXR1cmVzKCk7dGhpcy51bnJlbmRlcmVkRmVhdHVyZXM9dGhpcy5zZWxlY3RlZEZlYXR1cmVzPXRoaXMuZmVhdHVyZXM9bnVsbDt0aGlzLnJlbmRlcmVyJiZ0aGlzLnJlbmRlcmVyLmRlc3Ryb3koKTt0aGlzLmRyYXduPXRoaXMuZ2VvbWV0cnlUeXBlPXRoaXMucmVuZGVyZXI9bnVsbDtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKHRoaXMubmFtZSx0aGlzLmdldE9wdGlvbnMoKSkpO2E9T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pO2Zvcih2YXIgYj10aGlzLmZlYXR1cmVzLGM9Yi5sZW5ndGgsZD1BcnJheShjKSxlPTA7ZTxjOysrZSlkW2VdPWJbZV0uY2xvbmUoKTthLmZlYXR1cmVzPWQ7cmV0dXJuIGF9LHJlZnJlc2g6ZnVuY3Rpb24oYSl7dGhpcy5jYWxjdWxhdGVJblJhbmdlKCkmJgp0aGlzLnZpc2liaWxpdHkmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmVmcmVzaCIsYSl9LGFzc2lnblJlbmRlcmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLnJlbmRlcmVycy5sZW5ndGg7YTxiO2ErKyl7dmFyIGM9dGhpcy5yZW5kZXJlcnNbYV07aWYoKGM9ImZ1bmN0aW9uIj09dHlwZW9mIGM/YzpPcGVuTGF5ZXJzLlJlbmRlcmVyW2NdKSYmYy5wcm90b3R5cGUuc3VwcG9ydGVkKCkpe3RoaXMucmVuZGVyZXI9bmV3IGModGhpcy5kaXYsdGhpcy5yZW5kZXJlck9wdGlvbnMpO2JyZWFrfX19LGRpc3BsYXlFcnJvcjpmdW5jdGlvbigpe3RoaXMucmVwb3J0RXJyb3ImJk9wZW5MYXllcnMuQ29uc29sZS51c2VyRXJyb3IoT3BlbkxheWVycy5pMThuKCJicm93c2VyTm90U3VwcG9ydGVkIix7cmVuZGVyZXJzOnRoaXMucmVuZGVyZXJzLmpvaW4oIlxuIil9KSl9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcywKYXJndW1lbnRzKTtpZih0aGlzLnJlbmRlcmVyKXt0aGlzLnJlbmRlcmVyLm1hcD10aGlzLm1hcDt2YXIgYj10aGlzLm1hcC5nZXRTaXplKCk7Yi53Kj10aGlzLnJhdGlvO2IuaCo9dGhpcy5yYXRpbzt0aGlzLnJlbmRlcmVyLnNldFNpemUoYil9ZWxzZSB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzKX0sYWZ0ZXJBZGQ6ZnVuY3Rpb24oKXtpZih0aGlzLnN0cmF0ZWdpZXMpe3ZhciBhLGIsYztiPTA7Zm9yKGM9dGhpcy5zdHJhdGVnaWVzLmxlbmd0aDtiPGM7YisrKWE9dGhpcy5zdHJhdGVnaWVzW2JdLGEuYXV0b0FjdGl2YXRlJiZhLmFjdGl2YXRlKCl9fSxyZW1vdmVNYXA6ZnVuY3Rpb24oYSl7dGhpcy5kcmF3bj0hMTtpZih0aGlzLnN0cmF0ZWdpZXMpe3ZhciBiLGM7Yj0wO2ZvcihjPXRoaXMuc3RyYXRlZ2llcy5sZW5ndGg7YjxjO2IrKylhPXRoaXMuc3RyYXRlZ2llc1tiXSxhLmF1dG9BY3RpdmF0ZSYmYS5kZWFjdGl2YXRlKCl9fSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLm9uTWFwUmVzaXplLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7dmFyIGE9dGhpcy5tYXAuZ2V0U2l6ZSgpO2Eudyo9dGhpcy5yYXRpbzthLmgqPXRoaXMucmF0aW87dGhpcy5yZW5kZXJlci5zZXRTaXplKGEpfSxtb3ZlVG86ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLm1vdmVUby5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQ9ITA7aWYoIWMpe3RoaXMucmVuZGVyZXIucm9vdC5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO3ZhciBkPXRoaXMubWFwLmdldFNpemUoKSxlPWQudyxkPWQuaCxlPWUvMip0aGlzLnJhdGlvLWUvMixkPWQvMip0aGlzLnJhdGlvLWQvMixlPWUrdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC54LGU9LU1hdGgucm91bmQoZSksZD1kK3RoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSxkPS1NYXRoLnJvdW5kKGQpO3RoaXMuZGl2LnN0eWxlLmxlZnQ9ZSsicHgiO3RoaXMuZGl2LnN0eWxlLnRvcD1kKyJweCI7ZT10aGlzLm1hcC5nZXRFeHRlbnQoKS5zY2FsZSh0aGlzLnJhdGlvKTsKZD10aGlzLnJlbmRlcmVyLnNldEV4dGVudChlLGIpO3RoaXMucmVuZGVyZXIucm9vdC5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjshMD09PU9wZW5MYXllcnMuSVNfR0VDS08mJih0aGlzLmRpdi5zY3JvbGxMZWZ0PXRoaXMuZGl2LnNjcm9sbExlZnQpO2lmKCFiJiZkKWZvcih2YXIgZiBpbiB0aGlzLnVucmVuZGVyZWRGZWF0dXJlcyllPXRoaXMudW5yZW5kZXJlZEZlYXR1cmVzW2ZdLHRoaXMuZHJhd0ZlYXR1cmUoZSl9aWYoIXRoaXMuZHJhd258fGJ8fCFkKWZvcih0aGlzLmRyYXduPSEwLGY9MCxkPXRoaXMuZmVhdHVyZXMubGVuZ3RoO2Y8ZDtmKyspdGhpcy5yZW5kZXJlci5sb2NrZWQ9ZiE9PWQtMSxlPXRoaXMuZmVhdHVyZXNbZl0sdGhpcy5kcmF3RmVhdHVyZShlKX0sZGlzcGxheTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kaXNwbGF5LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYj10aGlzLmRpdi5zdHlsZS5kaXNwbGF5O2IhPXRoaXMucmVuZGVyZXIucm9vdC5zdHlsZS5kaXNwbGF5JiYKKHRoaXMucmVuZGVyZXIucm9vdC5zdHlsZS5kaXNwbGF5PWIpfSxhZGRGZWF0dXJlczpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO3ZhciBjPSFifHwhYi5zaWxlbnQ7aWYoYyl7dmFyIGQ9e2ZlYXR1cmVzOmF9O2lmKCExPT09dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVmZWF0dXJlc2FkZGVkIixkKSlyZXR1cm47YT1kLmZlYXR1cmVzfWZvcih2YXIgZD1bXSxlPTAsZj1hLmxlbmd0aDtlPGY7ZSsrKXt0aGlzLnJlbmRlcmVyLmxvY2tlZD1lIT1hLmxlbmd0aC0xPyEwOiExO3ZhciBnPWFbZV07aWYodGhpcy5nZW9tZXRyeVR5cGUmJiEoZy5nZW9tZXRyeSBpbnN0YW5jZW9mIHRoaXMuZ2VvbWV0cnlUeXBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJhZGRGZWF0dXJlczogY29tcG9uZW50IHNob3VsZCBiZSBhbiAiK3RoaXMuZ2VvbWV0cnlUeXBlLnByb3RvdHlwZS5DTEFTU19OQU1FKTtnLmxheWVyPXRoaXM7IWcuc3R5bGUmJnRoaXMuc3R5bGUmJgooZy5zdHlsZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuc3R5bGUpKTtpZihjKXtpZighMT09PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZWFkZGVkIix7ZmVhdHVyZTpnfSkpY29udGludWU7dGhpcy5wcmVGZWF0dXJlSW5zZXJ0KGcpfWQucHVzaChnKTt0aGlzLmZlYXR1cmVzLnB1c2goZyk7dGhpcy5kcmF3RmVhdHVyZShnKTtjJiYodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlYWRkZWQiLHtmZWF0dXJlOmd9KSx0aGlzLm9uRmVhdHVyZUluc2VydChnKSl9YyYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc2FkZGVkIix7ZmVhdHVyZXM6ZH0pfSxyZW1vdmVGZWF0dXJlczpmdW5jdGlvbihhLGIpe2lmKGEmJjAhPT1hLmxlbmd0aCl7aWYoYT09PXRoaXMuZmVhdHVyZXMpcmV0dXJuIHRoaXMucmVtb3ZlQWxsRmVhdHVyZXMoYik7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7YT09PXRoaXMuc2VsZWN0ZWRGZWF0dXJlcyYmCihhPWEuc2xpY2UoKSk7dmFyIGM9IWJ8fCFiLnNpbGVudDtjJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVzcmVtb3ZlZCIse2ZlYXR1cmVzOmF9KTtmb3IodmFyIGQ9YS5sZW5ndGgtMTswPD1kO2QtLSl7dGhpcy5yZW5kZXJlci5sb2NrZWQ9MCE9ZCYmYVtkLTFdLmdlb21ldHJ5PyEwOiExO3ZhciBlPWFbZF07ZGVsZXRlIHRoaXMudW5yZW5kZXJlZEZlYXR1cmVzW2UuaWRdO2MmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmV9KTt0aGlzLmZlYXR1cmVzPU9wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMuZmVhdHVyZXMsZSk7ZS5sYXllcj1udWxsO2UuZ2VvbWV0cnkmJnRoaXMucmVuZGVyZXIuZXJhc2VGZWF0dXJlcyhlKTstMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5zZWxlY3RlZEZlYXR1cmVzLGUpJiZPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnNlbGVjdGVkRmVhdHVyZXMsCmUpO2MmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmV9KX1jJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImZlYXR1cmVzcmVtb3ZlZCIse2ZlYXR1cmVzOmF9KX19LHJlbW92ZUFsbEZlYXR1cmVzOmZ1bmN0aW9uKGEpe2E9IWF8fCFhLnNpbGVudDt2YXIgYj10aGlzLmZlYXR1cmVzO2EmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXNyZW1vdmVkIix7ZmVhdHVyZXM6Yn0pO2Zvcih2YXIgYyxkPWIubGVuZ3RoLTE7MDw9ZDtkLS0pYz1iW2RdLGEmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmN9KSxjLmxheWVyPW51bGwsYSYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlcmVtb3ZlZCIse2ZlYXR1cmU6Y30pO3RoaXMucmVuZGVyZXIuY2xlYXIoKTt0aGlzLmZlYXR1cmVzPVtdO3RoaXMudW5yZW5kZXJlZEZlYXR1cmVzPXt9O3RoaXMuc2VsZWN0ZWRGZWF0dXJlcz0KW107YSYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc3JlbW92ZWQiLHtmZWF0dXJlczpifSl9LGRlc3Ryb3lGZWF0dXJlczpmdW5jdGlvbihhLGIpe3ZvaWQgMD09YSYmKGE9dGhpcy5mZWF0dXJlcyk7aWYoYSl7dGhpcy5yZW1vdmVGZWF0dXJlcyhhLGIpO2Zvcih2YXIgYz1hLmxlbmd0aC0xOzA8PWM7Yy0tKWFbY10uZGVzdHJveSgpfX0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmRyYXduKXtpZigib2JqZWN0IiE9dHlwZW9mIGIpe2J8fGEuc3RhdGUhPT1PcGVuTGF5ZXJzLlN0YXRlLkRFTEVURXx8KGI9ImRlbGV0ZSIpO3ZhciBjPWJ8fGEucmVuZGVySW50ZW50OyhiPWEuc3R5bGV8fHRoaXMuc3R5bGUpfHwoYj10aGlzLnN0eWxlTWFwLmNyZWF0ZVN5bWJvbGl6ZXIoYSxjKSl9Yz10aGlzLnJlbmRlcmVyLmRyYXdGZWF0dXJlKGEsYik7ITE9PT1jfHxudWxsPT09Yz90aGlzLnVucmVuZGVyZWRGZWF0dXJlc1thLmlkXT1hOmRlbGV0ZSB0aGlzLnVucmVuZGVyZWRGZWF0dXJlc1thLmlkXX19LAplcmFzZUZlYXR1cmVzOmZ1bmN0aW9uKGEpe3RoaXMucmVuZGVyZXIuZXJhc2VGZWF0dXJlcyhhKX0sZ2V0RmVhdHVyZUZyb21FdmVudDpmdW5jdGlvbihhKXtpZighdGhpcy5yZW5kZXJlcil0aHJvdyBFcnJvcigiZ2V0RmVhdHVyZUZyb21FdmVudCBjYWxsZWQgb24gbGF5ZXIgd2l0aCBubyByZW5kZXJlci4gVGhpcyB1c3VhbGx5IG1lYW5zIHlvdSBkZXN0cm95ZWQgYSBsYXllciwgYnV0IG5vdCBzb21lIGhhbmRsZXIgd2hpY2ggaXMgYXNzb2NpYXRlZCB3aXRoIGl0LiIpO3ZhciBiPW51bGw7KGE9dGhpcy5yZW5kZXJlci5nZXRGZWF0dXJlSWRGcm9tRXZlbnQoYSkpJiYoYj0ic3RyaW5nIj09PXR5cGVvZiBhP3RoaXMuZ2V0RmVhdHVyZUJ5SWQoYSk6YSk7cmV0dXJuIGJ9LGdldEZlYXR1cmVCeTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1udWxsLGQ9MCxlPXRoaXMuZmVhdHVyZXMubGVuZ3RoO2Q8ZTsrK2QpaWYodGhpcy5mZWF0dXJlc1tkXVthXT09Yil7Yz10aGlzLmZlYXR1cmVzW2RdOwpicmVha31yZXR1cm4gY30sZ2V0RmVhdHVyZUJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0RmVhdHVyZUJ5KCJpZCIsYSl9LGdldEZlYXR1cmVCeUZpZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRGZWF0dXJlQnkoImZpZCIsYSl9LGdldEZlYXR1cmVzQnlBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9dGhpcy5mZWF0dXJlcy5sZW5ndGgsZj1bXTtmb3IoYz0wO2M8ZTtjKyspKGQ9dGhpcy5mZWF0dXJlc1tjXSkmJmQuYXR0cmlidXRlcyYmZC5hdHRyaWJ1dGVzW2FdPT09YiYmZi5wdXNoKGQpO3JldHVybiBmfSxvbkZlYXR1cmVJbnNlcnQ6ZnVuY3Rpb24oYSl7fSxwcmVGZWF0dXJlSW5zZXJ0OmZ1bmN0aW9uKGEpe30sZ2V0RGF0YUV4dGVudDpmdW5jdGlvbigpe3ZhciBhPW51bGwsYj10aGlzLmZlYXR1cmVzO2lmKGImJjA8Yi5sZW5ndGgpZm9yKHZhciBjPW51bGwsZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKylpZihjPWJbZF0uZ2VvbWV0cnkpbnVsbD09PWEmJgooYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMpLGEuZXh0ZW5kKGMuZ2V0Qm91bmRzKCkpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlZlY3RvciJ9KTtPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5Sb290Q29udGFpbmVyPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5WZWN0b3Ise2Rpc3BsYXlJbkxheWVyU3dpdGNoZXI6ITEsbGF5ZXJzOm51bGwsZGlzcGxheTpmdW5jdGlvbigpe30sZ2V0RmVhdHVyZUZyb21FdmVudDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5sYXllcnMsYyxkPTA7ZDxiLmxlbmd0aDtkKyspaWYoYz1iW2RdLmdldEZlYXR1cmVGcm9tRXZlbnQoYSkpcmV0dXJuIGN9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmNvbGxlY3RSb290cygpO2EuZXZlbnRzLnJlZ2lzdGVyKCJjaGFuZ2VsYXllciIsdGhpcyx0aGlzLmhhbmRsZUNoYW5nZUxheWVyKX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe2EuZXZlbnRzLnVucmVnaXN0ZXIoImNoYW5nZWxheWVyIix0aGlzLHRoaXMuaGFuZGxlQ2hhbmdlTGF5ZXIpOwp0aGlzLnJlc2V0Um9vdHMoKTtPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5wcm90b3R5cGUucmVtb3ZlTWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY29sbGVjdFJvb3RzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MDtiPHRoaXMubWFwLmxheWVycy5sZW5ndGg7KytiKWE9dGhpcy5tYXAubGF5ZXJzW2JdLC0xIT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmxheWVycyxhKSYmYS5yZW5kZXJlci5tb3ZlUm9vdCh0aGlzLnJlbmRlcmVyKX0scmVzZXRSb290czpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7Yjx0aGlzLmxheWVycy5sZW5ndGg7KytiKWE9dGhpcy5sYXllcnNbYl0sdGhpcy5yZW5kZXJlciYmYS5yZW5kZXJlci5nZXRSZW5kZXJMYXllcklkKCk9PXRoaXMuaWQmJnRoaXMucmVuZGVyZXIubW92ZVJvb3QoYS5yZW5kZXJlcil9LGhhbmRsZUNoYW5nZUxheWVyOmZ1bmN0aW9uKGEpe3ZhciBiPWEubGF5ZXI7Im9yZGVyIj09YS5wcm9wZXJ0eSYmLTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMubGF5ZXJzLApiKSYmKHRoaXMucmVzZXRSb290cygpLHRoaXMuY29sbGVjdFJvb3RzKCkpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5Sb290Q29udGFpbmVyIn0pO09wZW5MYXllcnMuQ29udHJvbC5TZWxlY3RGZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHttdWx0aXBsZUtleTpudWxsLHRvZ2dsZUtleTpudWxsLG11bHRpcGxlOiExLGNsaWNrb3V0OiEwLHRvZ2dsZTohMSxob3ZlcjohMSxoaWdobGlnaHRPbmx5OiExLGJveDohMSxvbkJlZm9yZVNlbGVjdDpmdW5jdGlvbigpe30sb25TZWxlY3Q6ZnVuY3Rpb24oKXt9LG9uVW5zZWxlY3Q6ZnVuY3Rpb24oKXt9LHNjb3BlOm51bGwsZ2VvbWV0cnlUeXBlczpudWxsLGxheWVyOm51bGwsbGF5ZXJzOm51bGwsY2FsbGJhY2tzOm51bGwsc2VsZWN0U3R5bGU6bnVsbCxyZW5kZXJJbnRlbnQ6InNlbGVjdCIsaGFuZGxlcnM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKTtudWxsPT09dGhpcy5zY29wZSYmKHRoaXMuc2NvcGU9dGhpcyk7dGhpcy5pbml0TGF5ZXIoYSk7dmFyIGM9CntjbGljazp0aGlzLmNsaWNrRmVhdHVyZSxjbGlja291dDp0aGlzLmNsaWNrb3V0RmVhdHVyZX07dGhpcy5ob3ZlciYmKGMub3Zlcj10aGlzLm92ZXJGZWF0dXJlLGMub3V0PXRoaXMub3V0RmVhdHVyZSk7dGhpcy5jYWxsYmFja3M9T3BlbkxheWVycy5VdGlsLmV4dGVuZChjLHRoaXMuY2FsbGJhY2tzKTt0aGlzLmhhbmRsZXJzPXtmZWF0dXJlOm5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuRmVhdHVyZSh0aGlzLHRoaXMubGF5ZXIsdGhpcy5jYWxsYmFja3Mse2dlb21ldHJ5VHlwZXM6dGhpcy5nZW9tZXRyeVR5cGVzfSl9O3RoaXMuYm94JiYodGhpcy5oYW5kbGVycy5ib3g9bmV3IE9wZW5MYXllcnMuSGFuZGxlci5Cb3godGhpcyx7ZG9uZTp0aGlzLnNlbGVjdEJveH0se2JveERpdkNsYXNzTmFtZToib2xIYW5kbGVyQm94U2VsZWN0RmVhdHVyZSJ9KSl9LGluaXRMYXllcjpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKT8odGhpcy5sYXllcnM9YSx0aGlzLmxheWVyPQpuZXcgT3BlbkxheWVycy5MYXllci5WZWN0b3IuUm9vdENvbnRhaW5lcih0aGlzLmlkKyJfY29udGFpbmVyIix7bGF5ZXJzOmF9KSk6dGhpcy5sYXllcj1hfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5hY3RpdmUmJnRoaXMubGF5ZXJzJiZ0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLmxheWVyKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMubGF5ZXJzJiZ0aGlzLmxheWVyLmRlc3Ryb3koKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZXx8KHRoaXMubGF5ZXJzJiZ0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKSx0aGlzLmhhbmRsZXJzLmZlYXR1cmUuYWN0aXZhdGUoKSx0aGlzLmJveCYmdGhpcy5oYW5kbGVycy5ib3gmJnRoaXMuaGFuZGxlcnMuYm94LmFjdGl2YXRlKCkpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlJiYKKHRoaXMuaGFuZGxlcnMuZmVhdHVyZS5kZWFjdGl2YXRlKCksdGhpcy5oYW5kbGVycy5ib3gmJnRoaXMuaGFuZGxlcnMuYm94LmRlYWN0aXZhdGUoKSx0aGlzLmxheWVycyYmdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5sYXllcikpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx1bnNlbGVjdEFsbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxheWVyc3x8W3RoaXMubGF5ZXJdLGMsZCxlLGY7Zm9yKGU9MDtlPGIubGVuZ3RoOysrZSlpZihjPWJbZV0sZj0wLG51bGwhPWMuc2VsZWN0ZWRGZWF0dXJlcylmb3IoO2Muc2VsZWN0ZWRGZWF0dXJlcy5sZW5ndGg+ZjspZD1jLnNlbGVjdGVkRmVhdHVyZXNbZl0sYSYmYS5leGNlcHQ9PWQ/KytmOnRoaXMudW5zZWxlY3QoZCl9LGNsaWNrRmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmhvdmVyfHwoLTE8T3BlbkxheWVycy5VdGlsLmluZGV4T2YoYS5sYXllci5zZWxlY3RlZEZlYXR1cmVzLAphKT90aGlzLnRvZ2dsZVNlbGVjdCgpP3RoaXMudW5zZWxlY3QoYSk6dGhpcy5tdWx0aXBsZVNlbGVjdCgpfHx0aGlzLnVuc2VsZWN0QWxsKHtleGNlcHQ6YX0pOih0aGlzLm11bHRpcGxlU2VsZWN0KCl8fHRoaXMudW5zZWxlY3RBbGwoe2V4Y2VwdDphfSksdGhpcy5zZWxlY3QoYSkpKX0sbXVsdGlwbGVTZWxlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdWx0aXBsZXx8dGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dCYmdGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dFt0aGlzLm11bHRpcGxlS2V5XX0sdG9nZ2xlU2VsZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9nZ2xlfHx0aGlzLmhhbmRsZXJzLmZlYXR1cmUuZXZ0JiZ0aGlzLmhhbmRsZXJzLmZlYXR1cmUuZXZ0W3RoaXMudG9nZ2xlS2V5XX0sY2xpY2tvdXRGZWF0dXJlOmZ1bmN0aW9uKGEpeyF0aGlzLmhvdmVyJiZ0aGlzLmNsaWNrb3V0JiZ0aGlzLnVuc2VsZWN0QWxsKCl9LG92ZXJGZWF0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiPQphLmxheWVyO3RoaXMuaG92ZXImJih0aGlzLmhpZ2hsaWdodE9ubHk/dGhpcy5oaWdobGlnaHQoYSk6LTE9PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGIuc2VsZWN0ZWRGZWF0dXJlcyxhKSYmdGhpcy5zZWxlY3QoYSkpfSxvdXRGZWF0dXJlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaG92ZXIpaWYodGhpcy5oaWdobGlnaHRPbmx5KXtpZihhLl9sYXN0SGlnaGxpZ2h0ZXI9PXRoaXMuaWQpaWYoYS5fcHJldkhpZ2hsaWdodGVyJiZhLl9wcmV2SGlnaGxpZ2h0ZXIhPXRoaXMuaWQpe2RlbGV0ZSBhLl9sYXN0SGlnaGxpZ2h0ZXI7dmFyIGI9dGhpcy5tYXAuZ2V0Q29udHJvbChhLl9wcmV2SGlnaGxpZ2h0ZXIpO2ImJmIuaGlnaGxpZ2h0KGEpfWVsc2UgdGhpcy51bmhpZ2hsaWdodChhKX1lbHNlIHRoaXMudW5zZWxlY3QoYSl9LGhpZ2hsaWdodDpmdW5jdGlvbihhKXt2YXIgYj1hLmxheWVyOyExIT09dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVmZWF0dXJlaGlnaGxpZ2h0ZWQiLHtmZWF0dXJlOmF9KSYmCihhLl9wcmV2SGlnaGxpZ2h0ZXI9YS5fbGFzdEhpZ2hsaWdodGVyLGEuX2xhc3RIaWdobGlnaHRlcj10aGlzLmlkLGIuZHJhd0ZlYXR1cmUoYSx0aGlzLnNlbGVjdFN0eWxlfHx0aGlzLnJlbmRlckludGVudCksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlaGlnaGxpZ2h0ZWQiLHtmZWF0dXJlOmF9KSl9LHVuaGlnaGxpZ2h0OmZ1bmN0aW9uKGEpe3ZhciBiPWEubGF5ZXI7dm9pZCAwPT1hLl9wcmV2SGlnaGxpZ2h0ZXI/ZGVsZXRlIGEuX2xhc3RIaWdobGlnaHRlcjooYS5fcHJldkhpZ2hsaWdodGVyIT10aGlzLmlkJiYoYS5fbGFzdEhpZ2hsaWdodGVyPWEuX3ByZXZIaWdobGlnaHRlciksZGVsZXRlIGEuX3ByZXZIaWdobGlnaHRlcik7Yi5kcmF3RmVhdHVyZShhLGEuc3R5bGV8fGEubGF5ZXIuc3R5bGV8fCJkZWZhdWx0Iik7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJldW5oaWdobGlnaHRlZCIse2ZlYXR1cmU6YX0pfSxzZWxlY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMub25CZWZvcmVTZWxlY3QuY2FsbCh0aGlzLnNjb3BlLGEpLGM9YS5sYXllcjshMSE9PWImJihiPWMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXNlbGVjdGVkIix7ZmVhdHVyZTphfSksITEhPT1iJiYoYy5zZWxlY3RlZEZlYXR1cmVzLnB1c2goYSksdGhpcy5oaWdobGlnaHQoYSksdGhpcy5oYW5kbGVycy5mZWF0dXJlLmxhc3RGZWF0dXJlfHwodGhpcy5oYW5kbGVycy5mZWF0dXJlLmxhc3RGZWF0dXJlPWMuc2VsZWN0ZWRGZWF0dXJlc1swXSksYy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc2VsZWN0ZWQiLHtmZWF0dXJlOmF9KSx0aGlzLm9uU2VsZWN0LmNhbGwodGhpcy5zY29wZSxhKSkpfSx1bnNlbGVjdDpmdW5jdGlvbihhKXt2YXIgYj1hLmxheWVyO3RoaXMudW5oaWdobGlnaHQoYSk7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0oYi5zZWxlY3RlZEZlYXR1cmVzLGEpO2IuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXVuc2VsZWN0ZWQiLAp7ZmVhdHVyZTphfSk7dGhpcy5vblVuc2VsZWN0LmNhbGwodGhpcy5zY29wZSxhKX0sc2VsZWN0Qm94OmZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kcyl7dmFyIGI9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKHt4OmEubGVmdCx5OmEuYm90dG9tfSk7YT10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoe3g6YS5yaWdodCx5OmEudG9wfSk7Yj1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYi5sb24sYi5sYXQsYS5sb24sYS5sYXQpO3RoaXMubXVsdGlwbGVTZWxlY3QoKXx8dGhpcy51bnNlbGVjdEFsbCgpO2E9dGhpcy5tdWx0aXBsZTt0aGlzLm11bHRpcGxlPSEwO3ZhciBjPXRoaXMubGF5ZXJzfHxbdGhpcy5sYXllcl07dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJib3hzZWxlY3Rpb25zdGFydCIse2xheWVyczpjfSk7Zm9yKHZhciBkLGU9MDtlPGMubGVuZ3RoOysrZSl7ZD1jW2VdO2Zvcih2YXIgZj0wLGc9ZC5mZWF0dXJlcy5sZW5ndGg7ZjxnOysrZil7dmFyIGg9CmQuZmVhdHVyZXNbZl07aC5nZXRWaXNpYmlsaXR5KCkmJihudWxsPT10aGlzLmdlb21ldHJ5VHlwZXN8fC0xPE9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuZ2VvbWV0cnlUeXBlcyxoLmdlb21ldHJ5LkNMQVNTX05BTUUpKSYmYi50b0dlb21ldHJ5KCkuaW50ZXJzZWN0cyhoLmdlb21ldHJ5KSYmLTE9PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGQuc2VsZWN0ZWRGZWF0dXJlcyxoKSYmdGhpcy5zZWxlY3QoaCl9fXRoaXMubXVsdGlwbGU9YTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJveHNlbGVjdGlvbmVuZCIse2xheWVyczpjfSl9fSxzZXRNYXA6ZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVycy5mZWF0dXJlLnNldE1hcChhKTt0aGlzLmJveCYmdGhpcy5oYW5kbGVycy5ib3guc2V0TWFwKGEpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2V0TGF5ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hY3RpdmU7dGhpcy51bnNlbGVjdEFsbCgpOwp0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmxheWVycyYmKHRoaXMubGF5ZXIuZGVzdHJveSgpLHRoaXMubGF5ZXJzPW51bGwpO3RoaXMuaW5pdExheWVyKGEpO3RoaXMuaGFuZGxlcnMuZmVhdHVyZS5sYXllcj10aGlzLmxheWVyO2ImJnRoaXMuYWN0aXZhdGUoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlNlbGVjdEZlYXR1cmUifSk7T3BlbkxheWVycy5IYW5kbGVyLlBvaW50PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtwb2ludDpudWxsLGxheWVyOm51bGwsbXVsdGk6ITEsY2l0ZUNvbXBsaWFudDohMSxtb3VzZURvd246ITEsc3RvcHBlZERvd246bnVsbCxsYXN0RG93bjpudWxsLGxhc3RVcDpudWxsLHBlcnNpc3Q6ITEsc3RvcERvd246ITEsc3RvcFVwOiExLGxheWVyT3B0aW9uczpudWxsLHBpeGVsVG9sZXJhbmNlOjUsbGFzdFRvdWNoUHg6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtjJiZjLmxheWVyT3B0aW9ucyYmYy5sYXllck9wdGlvbnMuc3R5bGVNYXB8fCh0aGlzLnN0eWxlPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZVsiZGVmYXVsdCJdLHt9KSk7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZighT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLAphcmd1bWVudHMpKXJldHVybiExO3ZhciBhPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe2Rpc3BsYXlJbkxheWVyU3dpdGNoZXI6ITEsY2FsY3VsYXRlSW5SYW5nZTpPcGVuTGF5ZXJzLkZ1bmN0aW9uLlRydWUsd3JhcERhdGVMaW5lOnRoaXMuY2l0ZUNvbXBsaWFudH0sdGhpcy5sYXllck9wdGlvbnMpO3RoaXMubGF5ZXI9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKHRoaXMuQ0xBU1NfTkFNRSxhKTt0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKTtyZXR1cm4hMH0sY3JlYXRlRmVhdHVyZTpmdW5jdGlvbihhKXthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLmxvbixhLmxhdCk7dGhpcy5wb2ludD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTt0aGlzLmNhbGxiYWNrKCJjcmVhdGUiLFt0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMucG9pbnRdKTt0aGlzLnBvaW50Lmdlb21ldHJ5LmNsZWFyQm91bmRzKCk7CnRoaXMubGF5ZXIuYWRkRmVhdHVyZXMoW3RoaXMucG9pbnRdLHtzaWxlbnQ6ITB9KX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKCFPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXJldHVybiExO3RoaXMuY2FuY2VsKCk7bnVsbCE9dGhpcy5sYXllci5tYXAmJih0aGlzLmRlc3Ryb3lGZWF0dXJlKCEwKSx0aGlzLmxheWVyLmRlc3Ryb3koITEpKTt0aGlzLmxheWVyPW51bGw7cmV0dXJuITB9LGRlc3Ryb3lGZWF0dXJlOmZ1bmN0aW9uKGEpeyF0aGlzLmxheWVyfHwhYSYmdGhpcy5wZXJzaXN0fHx0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcygpO3RoaXMucG9pbnQ9bnVsbH0sZGVzdHJveVBlcnNpc3RlZEZlYXR1cmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxheWVyO2EmJjE8YS5mZWF0dXJlcy5sZW5ndGgmJnRoaXMubGF5ZXIuZmVhdHVyZXNbMF0uZGVzdHJveSgpfSxmaW5hbGl6ZTpmdW5jdGlvbihhKXt0aGlzLm1vdXNlRG93bj0KITE7dGhpcy5sYXN0VG91Y2hQeD10aGlzLmxhc3RVcD10aGlzLmxhc3REb3duPW51bGw7dGhpcy5jYWxsYmFjayhhPyJjYW5jZWwiOiJkb25lIixbdGhpcy5nZW9tZXRyeUNsb25lKCldKTt0aGlzLmRlc3Ryb3lGZWF0dXJlKGEpfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmZpbmFsaXplKCEwKX0sY2xpY2s6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5zdG9wKGEpO3JldHVybiExfSxkYmxjbGljazpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSk7cmV0dXJuITF9LG1vZGlmeUZlYXR1cmU6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludHx8dGhpcy5jcmVhdGVGZWF0dXJlKGEpO2E9dGhpcy5sYXllci5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKTt0aGlzLnBvaW50Lmdlb21ldHJ5Lng9YS5sb247dGhpcy5wb2ludC5nZW9tZXRyeS55PWEubGF0O3RoaXMuY2FsbGJhY2soIm1vZGlmeSIsW3RoaXMucG9pbnQuZ2VvbWV0cnksdGhpcy5wb2ludCwhMV0pO3RoaXMucG9pbnQuZ2VvbWV0cnkuY2xlYXJCb3VuZHMoKTsKdGhpcy5kcmF3RmVhdHVyZSgpfSxkcmF3RmVhdHVyZTpmdW5jdGlvbigpe3RoaXMubGF5ZXIuZHJhd0ZlYXR1cmUodGhpcy5wb2ludCx0aGlzLnN0eWxlKX0sZ2V0R2VvbWV0cnk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBvaW50JiZ0aGlzLnBvaW50Lmdlb21ldHJ5O2EmJnRoaXMubXVsdGkmJihhPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQoW2FdKSk7cmV0dXJuIGF9LGdlb21ldHJ5Q2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEdlb21ldHJ5KCk7cmV0dXJuIGEmJmEuY2xvbmUoKX0sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRvd24oYSl9LHRvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydFRvdWNoKCk7dGhpcy5sYXN0VG91Y2hQeD1hLnh5O3JldHVybiB0aGlzLmRvd24oYSl9LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tb3ZlKGEpfSx0b3VjaG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5sYXN0VG91Y2hQeD1hLnh5OwpyZXR1cm4gdGhpcy5tb3ZlKGEpfSxtb3VzZXVwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnVwKGEpfSx0b3VjaGVuZDpmdW5jdGlvbihhKXthLnh5PXRoaXMubGFzdFRvdWNoUHg7cmV0dXJuIHRoaXMudXAoYSl9LGRvd246ZnVuY3Rpb24oYSl7dGhpcy5tb3VzZURvd249ITA7dGhpcy5sYXN0RG93bj1hLnh5O3RoaXMudG91Y2h8fHRoaXMubW9kaWZ5RmVhdHVyZShhLnh5KTt0aGlzLnN0b3BwZWREb3duPXRoaXMuc3RvcERvd247cmV0dXJuIXRoaXMuc3RvcERvd259LG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy50b3VjaHx8dGhpcy5tb3VzZURvd24mJiF0aGlzLnN0b3BwZWREb3dufHx0aGlzLm1vZGlmeUZlYXR1cmUoYS54eSk7cmV0dXJuITB9LHVwOmZ1bmN0aW9uKGEpe3RoaXMubW91c2VEb3duPSExO3RoaXMuc3RvcHBlZERvd249dGhpcy5zdG9wRG93bjtpZighdGhpcy5jaGVja01vZGlmaWVycyhhKXx8dGhpcy5sYXN0VXAmJnRoaXMubGFzdFVwLmVxdWFscyhhLnh5KXx8IXRoaXMubGFzdERvd258fAohdGhpcy5wYXNzZXNUb2xlcmFuY2UodGhpcy5sYXN0RG93bixhLnh5LHRoaXMucGl4ZWxUb2xlcmFuY2UpKXJldHVybiEwO3RoaXMudG91Y2gmJnRoaXMubW9kaWZ5RmVhdHVyZShhLnh5KTt0aGlzLnBlcnNpc3QmJnRoaXMuZGVzdHJveVBlcnNpc3RlZEZlYXR1cmUoKTt0aGlzLmxhc3RVcD1hLnh5O3RoaXMuZmluYWxpemUoKTtyZXR1cm4hdGhpcy5zdG9wVXB9LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQoYSx0aGlzLm1hcC52aWV3UG9ydERpdikmJih0aGlzLnN0b3BwZWREb3duPXRoaXMuc3RvcERvd24sdGhpcy5tb3VzZURvd249ITEpfSxwYXNzZXNUb2xlcmFuY2U6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSEwO251bGwhPWMmJmEmJmImJmEuZGlzdGFuY2VUbyhiKT5jJiYoZD0hMSk7cmV0dXJuIGR9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuSGFuZGxlci5Qb2ludCJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUGF0aD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlci5Qb2ludCx7bGluZTpudWxsLG1heFZlcnRpY2VzOm51bGwsZG91YmxlVG91Y2hUb2xlcmFuY2U6MjAsZnJlZWhhbmQ6ITEsZnJlZWhhbmRUb2dnbGU6InNoaWZ0S2V5Iix0aW1lcklkOm51bGwscmVkb1N0YWNrOm51bGwsY3JlYXRlRmVhdHVyZTpmdW5jdGlvbihhKXthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLmxvbixhLmxhdCk7dGhpcy5wb2ludD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTt0aGlzLmxpbmU9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhbdGhpcy5wb2ludC5nZW9tZXRyeV0pKTt0aGlzLmNhbGxiYWNrKCJjcmVhdGUiLFt0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMuZ2V0U2tldGNoKCldKTsKdGhpcy5wb2ludC5nZW9tZXRyeS5jbGVhckJvdW5kcygpO3RoaXMubGF5ZXIuYWRkRmVhdHVyZXMoW3RoaXMubGluZSx0aGlzLnBvaW50XSx7c2lsZW50OiEwfSl9LGRlc3Ryb3lGZWF0dXJlOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuSGFuZGxlci5Qb2ludC5wcm90b3R5cGUuZGVzdHJveUZlYXR1cmUuY2FsbCh0aGlzLGEpO3RoaXMubGluZT1udWxsfSxkZXN0cm95UGVyc2lzdGVkRmVhdHVyZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5ZXI7YSYmMjxhLmZlYXR1cmVzLmxlbmd0aCYmdGhpcy5sYXllci5mZWF0dXJlc1swXS5kZXN0cm95KCl9LHJlbW92ZVBvaW50OmZ1bmN0aW9uKCl7dGhpcy5wb2ludCYmdGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyhbdGhpcy5wb2ludF0pfSxhZGRQb2ludDpmdW5jdGlvbihhKXt0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKFt0aGlzLnBvaW50XSk7YT10aGlzLmxheWVyLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpO3RoaXMucG9pbnQ9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYS5sb24sCmEubGF0KSk7dGhpcy5saW5lLmdlb21ldHJ5LmFkZENvbXBvbmVudCh0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aCk7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5wb2ludF0pO3RoaXMuY2FsbGJhY2soInBvaW50IixbdGhpcy5wb2ludC5nZW9tZXRyeSx0aGlzLmdldEdlb21ldHJ5KCldKTt0aGlzLmNhbGxiYWNrKCJtb2RpZnkiLFt0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMuZ2V0U2tldGNoKCldKTt0aGlzLmRyYXdGZWF0dXJlKCk7ZGVsZXRlIHRoaXMucmVkb1N0YWNrfSxpbnNlcnRYWTpmdW5jdGlvbihhLGIpe3RoaXMubGluZS5nZW9tZXRyeS5hZGRDb21wb25lbnQobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYSxiKSx0aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCkpO3RoaXMuZHJhd0ZlYXR1cmUoKTtkZWxldGUgdGhpcy5yZWRvU3RhY2t9LGluc2VydERlbHRhWFk6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCktCjEsYz10aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50c1tjXTshY3x8KGlzTmFOKGMueCl8fGlzTmFOKGMueSkpfHx0aGlzLmluc2VydFhZKGMueCthLGMueStiKX0saW5zZXJ0RGlyZWN0aW9uTGVuZ3RoOmZ1bmN0aW9uKGEsYil7YSo9TWF0aC5QSS8xODA7dmFyIGM9YipNYXRoLmNvcyhhKSxkPWIqTWF0aC5zaW4oYSk7dGhpcy5pbnNlcnREZWx0YVhZKGMsZCl9LGluc2VydERlZmxlY3Rpb25MZW5ndGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCktMTtpZigwPGMpe3ZhciBkPXRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzW2NdLGM9dGhpcy5saW5lLmdlb21ldHJ5LmNvbXBvbmVudHNbYy0xXSxkPU1hdGguYXRhbjIoZC55LWMueSxkLngtYy54KTt0aGlzLmluc2VydERpcmVjdGlvbkxlbmd0aCgxODAqZC9NYXRoLlBJK2EsYil9fSxnZXRDdXJyZW50UG9pbnRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50cy5sZW5ndGgtCjF9LHVuZG86ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxpbmUuZ2VvbWV0cnksYj1hLmNvbXBvbmVudHMsYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCktMSxkPWJbY10sZT1hLnJlbW92ZUNvbXBvbmVudChkKTtlJiYodGhpcy50b3VjaCYmMDxjJiYoYj1hLmNvbXBvbmVudHMsYT1iW2MtMV0sYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCksYj1iW2NdLGIueD1hLngsYi55PWEueSksdGhpcy5yZWRvU3RhY2t8fCh0aGlzLnJlZG9TdGFjaz1bXSksdGhpcy5yZWRvU3RhY2sucHVzaChkKSx0aGlzLmRyYXdGZWF0dXJlKCkpO3JldHVybiBlfSxyZWRvOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWRvU3RhY2smJnRoaXMucmVkb1N0YWNrLnBvcCgpO2EmJih0aGlzLmxpbmUuZ2VvbWV0cnkuYWRkQ29tcG9uZW50KGEsdGhpcy5nZXRDdXJyZW50UG9pbnRJbmRleCgpKSx0aGlzLmRyYXdGZWF0dXJlKCkpO3JldHVybiEhYX0sZnJlZWhhbmRNb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZyZWVoYW5kVG9nZ2xlJiYKYVt0aGlzLmZyZWVoYW5kVG9nZ2xlXT8hdGhpcy5mcmVlaGFuZDp0aGlzLmZyZWVoYW5kfSxtb2RpZnlGZWF0dXJlOmZ1bmN0aW9uKGEsYil7dGhpcy5saW5lfHx0aGlzLmNyZWF0ZUZlYXR1cmUoYSk7dmFyIGM9dGhpcy5sYXllci5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKTt0aGlzLnBvaW50Lmdlb21ldHJ5Lng9Yy5sb247dGhpcy5wb2ludC5nZW9tZXRyeS55PWMubGF0O3RoaXMuY2FsbGJhY2soIm1vZGlmeSIsW3RoaXMucG9pbnQuZ2VvbWV0cnksdGhpcy5nZXRTa2V0Y2goKSxiXSk7dGhpcy5wb2ludC5nZW9tZXRyeS5jbGVhckJvdW5kcygpO3RoaXMuZHJhd0ZlYXR1cmUoKX0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oKXt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMubGluZSx0aGlzLnN0eWxlKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMucG9pbnQsdGhpcy5zdHlsZSl9LGdldFNrZXRjaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmV9LGdldEdlb21ldHJ5OmZ1bmN0aW9uKCl7dmFyIGE9CnRoaXMubGluZSYmdGhpcy5saW5lLmdlb21ldHJ5O2EmJnRoaXMubXVsdGkmJihhPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhbYV0pKTtyZXR1cm4gYX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXtpZih0aGlzLnRpbWVySWQmJnRoaXMucGFzc2VzVG9sZXJhbmNlKHRoaXMubGFzdFRvdWNoUHgsYS54eSx0aGlzLmRvdWJsZVRvdWNoVG9sZXJhbmNlKSlyZXR1cm4gdGhpcy5maW5pc2hHZW9tZXRyeSgpLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lcklkKSx0aGlzLnRpbWVySWQ9bnVsbCwhMTt0aGlzLnRpbWVySWQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCksdGhpcy50aW1lcklkPW51bGwpO3RoaXMudGltZXJJZD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXt0aGlzLnRpbWVySWQ9bnVsbH0sdGhpcyksMzAwKTtyZXR1cm4gT3BlbkxheWVycy5IYW5kbGVyLlBvaW50LnByb3RvdHlwZS50b3VjaHN0YXJ0LmNhbGwodGhpcywKYSl9LGRvd246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zdG9wRG93bjt0aGlzLmZyZWVoYW5kTW9kZShhKSYmKGI9ITAsdGhpcy50b3VjaCYmKHRoaXMubW9kaWZ5RmVhdHVyZShhLnh5LCEhdGhpcy5sYXN0VXApLE9wZW5MYXllcnMuRXZlbnQuc3RvcChhKSkpO3RoaXMudG91Y2h8fHRoaXMubGFzdERvd24mJnRoaXMucGFzc2VzVG9sZXJhbmNlKHRoaXMubGFzdERvd24sYS54eSx0aGlzLnBpeGVsVG9sZXJhbmNlKXx8dGhpcy5tb2RpZnlGZWF0dXJlKGEueHksISF0aGlzLmxhc3RVcCk7dGhpcy5tb3VzZURvd249ITA7dGhpcy5sYXN0RG93bj1hLnh5O3RoaXMuc3RvcHBlZERvd249YjtyZXR1cm4hYn0sbW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLnN0b3BwZWREb3duJiZ0aGlzLmZyZWVoYW5kTW9kZShhKSlyZXR1cm4gdGhpcy5wZXJzaXN0JiZ0aGlzLmRlc3Ryb3lQZXJzaXN0ZWRGZWF0dXJlKCksdGhpcy5tYXhWZXJ0aWNlcyYmdGhpcy5saW5lJiZ0aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50cy5sZW5ndGg9PT0KdGhpcy5tYXhWZXJ0aWNlcz8odGhpcy5yZW1vdmVQb2ludCgpLHRoaXMuZmluYWxpemUoKSk6dGhpcy5hZGRQb2ludChhLnh5KSwhMTt0aGlzLnRvdWNofHx0aGlzLm1vdXNlRG93biYmIXRoaXMuc3RvcHBlZERvd258fHRoaXMubW9kaWZ5RmVhdHVyZShhLnh5LCEhdGhpcy5sYXN0VXApO3JldHVybiEwfSx1cDpmdW5jdGlvbihhKXshdGhpcy5tb3VzZURvd258fHRoaXMubGFzdFVwJiZ0aGlzLmxhc3RVcC5lcXVhbHMoYS54eSl8fCh0aGlzLnN0b3BwZWREb3duJiZ0aGlzLmZyZWVoYW5kTW9kZShhKT8odGhpcy5wZXJzaXN0JiZ0aGlzLmRlc3Ryb3lQZXJzaXN0ZWRGZWF0dXJlKCksdGhpcy5yZW1vdmVQb2ludCgpLHRoaXMuZmluYWxpemUoKSk6dGhpcy5wYXNzZXNUb2xlcmFuY2UodGhpcy5sYXN0RG93bixhLnh5LHRoaXMucGl4ZWxUb2xlcmFuY2UpJiYodGhpcy50b3VjaCYmdGhpcy5tb2RpZnlGZWF0dXJlKGEueHkpLG51bGw9PXRoaXMubGFzdFVwJiZ0aGlzLnBlcnNpc3QmJnRoaXMuZGVzdHJveVBlcnNpc3RlZEZlYXR1cmUoKSwKdGhpcy5hZGRQb2ludChhLnh5KSx0aGlzLmxhc3RVcD1hLnh5LHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aD09PXRoaXMubWF4VmVydGljZXMrMSYmdGhpcy5maW5pc2hHZW9tZXRyeSgpKSk7dGhpcy5zdG9wcGVkRG93bj10aGlzLnN0b3BEb3duO3RoaXMubW91c2VEb3duPSExO3JldHVybiF0aGlzLnN0b3BVcH0sZmluaXNoR2VvbWV0cnk6ZnVuY3Rpb24oKXt0aGlzLmxpbmUuZ2VvbWV0cnkucmVtb3ZlQ29tcG9uZW50KHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzW3RoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aC0xXSk7dGhpcy5yZW1vdmVQb2ludCgpO3RoaXMuZmluYWxpemUoKX0sZGJsY2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5mcmVlaGFuZE1vZGUoYSl8fHRoaXMuZmluaXNoR2VvbWV0cnkoKTtyZXR1cm4hMX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLlBhdGgifSk7T3BlbkxheWVycy5Db250cm9sLkF0dHJpYnV0aW9uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtzZXBhcmF0b3I6IiwgIix0ZW1wbGF0ZToiJHtsYXllcnN9IixkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAuZXZlbnRzLnVuKHtyZW1vdmVsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLGFkZGxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sY2hhbmdlbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixjaGFuZ2ViYXNlbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixzY29wZTp0aGlzfSk7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZHJhdzpmdW5jdGlvbigpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5tYXAuZXZlbnRzLm9uKHtjaGFuZ2ViYXNlbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixjaGFuZ2VsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLAphZGRsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLHJlbW92ZWxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sc2NvcGU6dGhpc30pO3RoaXMudXBkYXRlQXR0cmlidXRpb24oKTtyZXR1cm4gdGhpcy5kaXZ9LHVwZGF0ZUF0dHJpYnV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9W107aWYodGhpcy5tYXAmJnRoaXMubWFwLmxheWVycyl7Zm9yKHZhciBiPTAsYz10aGlzLm1hcC5sYXllcnMubGVuZ3RoO2I8YztiKyspe3ZhciBkPXRoaXMubWFwLmxheWVyc1tiXTtkLmF0dHJpYnV0aW9uJiZkLmdldFZpc2liaWxpdHkoKSYmLTE9PT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihhLGQuYXR0cmlidXRpb24pJiZhLnB1c2goZC5hdHRyaWJ1dGlvbil9dGhpcy5kaXYuaW5uZXJIVE1MPU9wZW5MYXllcnMuU3RyaW5nLmZvcm1hdCh0aGlzLnRlbXBsYXRlLHtsYXllcnM6YS5qb2luKHRoaXMuc2VwYXJhdG9yKX0pfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLkF0dHJpYnV0aW9uIn0pO09wZW5MYXllcnMuS2luZXRpYz1PcGVuTGF5ZXJzLkNsYXNzKHt0aHJlc2hvbGQ6MCxkZWNlbGVyYXRpb246MC4wMDM1LG5iUG9pbnRzOjEwMCxkZWxheToyMDAscG9pbnRzOnZvaWQgMCx0aW1lcklkOnZvaWQgMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKX0sYmVnaW46ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkFuaW1hdGlvbi5zdG9wKHRoaXMudGltZXJJZCk7dGhpcy50aW1lcklkPXZvaWQgMDt0aGlzLnBvaW50cz1bXX0sdXBkYXRlOmZ1bmN0aW9uKGEpe3RoaXMucG9pbnRzLnVuc2hpZnQoe3h5OmEsdGljazoobmV3IERhdGUpLmdldFRpbWUoKX0pO3RoaXMucG9pbnRzLmxlbmd0aD50aGlzLm5iUG9pbnRzJiZ0aGlzLnBvaW50cy5wb3AoKX0sZW5kOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGQ9MCxlPXRoaXMucG9pbnRzLmxlbmd0aCxmO2Q8ZTtkKyspe2Y9dGhpcy5wb2ludHNbZF07aWYoYy0KZi50aWNrPnRoaXMuZGVsYXkpYnJlYWs7Yj1mfWlmKGImJihkPShuZXcgRGF0ZSkuZ2V0VGltZSgpLWIudGljayxjPU1hdGguc3FydChNYXRoLnBvdyhhLngtYi54eS54LDIpK01hdGgucG93KGEueS1iLnh5LnksMikpLGQ9Yy9kLCEoMD09ZHx8ZDx0aGlzLnRocmVzaG9sZCkpKXJldHVybiBjPU1hdGguYXNpbigoYS55LWIueHkueSkvYyksYi54eS54PD1hLngmJihjPU1hdGguUEktYykse3NwZWVkOmQsdGhldGE6Y319LG1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnNwZWVkLGQ9TWF0aC5jb3MoYS50aGV0YSksZT0tTWF0aC5zaW4oYS50aGV0YSksZj0obmV3IERhdGUpLmdldFRpbWUoKSxnPTAsaD0wO3RoaXMudGltZXJJZD1PcGVuTGF5ZXJzLkFuaW1hdGlvbi5zdGFydChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLnRpbWVySWQpe3ZhciBhPShuZXcgRGF0ZSkuZ2V0VGltZSgpLWYsbD0tdGhpcy5kZWNlbGVyYXRpb24qTWF0aC5wb3coYSwKMikvMitjKmEsbT1sKmQsbD1sKmUscCxuO3A9ITE7MD49LXRoaXMuZGVjZWxlcmF0aW9uKmErYyYmKE9wZW5MYXllcnMuQW5pbWF0aW9uLnN0b3AodGhpcy50aW1lcklkKSx0aGlzLnRpbWVySWQ9bnVsbCxwPSEwKTthPW0tZztuPWwtaDtnPW07aD1sO2IoYSxuLHApfX0sdGhpcykpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLktpbmV0aWMifSk7T3BlbkxheWVycy5MYXllci5XTVM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse0RFRkFVTFRfUEFSQU1TOntzZXJ2aWNlOiJXTVMiLHZlcnNpb246IjEuMS4xIixyZXF1ZXN0OiJHZXRNYXAiLHN0eWxlczoiIixmb3JtYXQ6ImltYWdlL2pwZWcifSxpc0Jhc2VMYXllcjohMCxlbmNvZGVCQk9YOiExLG5vTWFnaWM6ITEseXg6e30saW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXTtjPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYyk7MS4zPD1wYXJzZUZsb2F0KGMuVkVSU0lPTikmJiFjLkVYQ0VQVElPTlMmJihjLkVYQ0VQVElPTlM9IklOSU1BR0UiKTtlLnB1c2goYSxiLGMsZCk7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsZSk7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHModGhpcy5wYXJhbXMsT3BlbkxheWVycy5VdGlsLnVwcGVyQ2FzZU9iamVjdCh0aGlzLkRFRkFVTFRfUEFSQU1TKSk7CiF0aGlzLm5vTWFnaWMmJih0aGlzLnBhcmFtcy5UUkFOU1BBUkVOVCYmInRydWUiPT10aGlzLnBhcmFtcy5UUkFOU1BBUkVOVC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpJiYobnVsbCE9ZCYmZC5pc0Jhc2VMYXllcnx8KHRoaXMuaXNCYXNlTGF5ZXI9ITEpLCJpbWFnZS9qcGVnIj09dGhpcy5wYXJhbXMuRk9STUFUJiYodGhpcy5wYXJhbXMuRk9STUFUPU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2soKT8iaW1hZ2UvZ2lmIjoiaW1hZ2UvcG5nIikpfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5XTVModGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7cmV0dXJuIGE9T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLFthXSl9LHJldmVyc2VBeGlzT3JkZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb2plY3Rpb24uZ2V0Q29kZSgpO3JldHVybiAxLjM8PXBhcnNlRmxvYXQodGhpcy5wYXJhbXMuVkVSU0lPTikmJgohISh0aGlzLnl4W2FdfHxPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHNbYV0mJk9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1thXS55eCl9LGdldFVSTDpmdW5jdGlvbihhKXthPXRoaXMuYWRqdXN0Qm91bmRzKGEpO3ZhciBiPXRoaXMuZ2V0SW1hZ2VTaXplKCksYz17fSxkPXRoaXMucmV2ZXJzZUF4aXNPcmRlcigpO2MuQkJPWD10aGlzLmVuY29kZUJCT1g/YS50b0JCT1gobnVsbCxkKTphLnRvQXJyYXkoZCk7Yy5XSURUSD1iLnc7Yy5IRUlHSFQ9Yi5oO3JldHVybiB0aGlzLmdldEZ1bGxSZXF1ZXN0U3RyaW5nKGMpfSxtZXJnZU5ld1BhcmFtczpmdW5jdGlvbihhKXthPVtPcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGEpXTtyZXR1cm4gT3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5tZXJnZU5ld1BhcmFtcy5hcHBseSh0aGlzLGEpfSxnZXRGdWxsUmVxdWVzdFN0cmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSwKYz10aGlzLnByb2plY3Rpb24mJnRoaXMucHJvamVjdGlvbi5lcXVhbHMoYyk/dGhpcy5wcm9qZWN0aW9uLmdldENvZGUoKTpjLmdldENvZGUoKSxjPSJub25lIj09Yz9udWxsOmM7MS4zPD1wYXJzZUZsb2F0KHRoaXMucGFyYW1zLlZFUlNJT04pP3RoaXMucGFyYW1zLkNSUz1jOnRoaXMucGFyYW1zLlNSUz1jOyJib29sZWFuIj09dHlwZW9mIHRoaXMucGFyYW1zLlRSQU5TUEFSRU5UJiYoYS5UUkFOU1BBUkVOVD10aGlzLnBhcmFtcy5UUkFOU1BBUkVOVD8iVFJVRSI6IkZBTFNFIik7cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuZ2V0RnVsbFJlcXVlc3RTdHJpbmcuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLldNUyJ9KTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMse3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIseGxpbmtuczoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsTUFYX1BJWEVMOjE1RTMsdHJhbnNsYXRpb25QYXJhbWV0ZXJzOm51bGwsc3ltYm9sTWV0cmljczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5zdXBwb3J0ZWQoKSYmKE9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMudHJhbnNsYXRpb25QYXJhbWV0ZXJzPXt4OjAseTowfSx0aGlzLnN5bWJvbE1ldHJpY3M9e30pfSxzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24mJihkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJvcmcudzNjLnN2ZyIsIjEuMCIpfHxkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI1NWRyIsCiIxLjEiKXx8ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZSIsIjEuMSIpKX0saW5WYWxpZFJhbmdlOmZ1bmN0aW9uKGEsYixjKXthKz1jPzA6dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueDtiKz1jPzA6dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueTtyZXR1cm4gYT49LXRoaXMuTUFYX1BJWEVMJiZhPD10aGlzLk1BWF9QSVhFTCYmYj49LXRoaXMuTUFYX1BJWEVMJiZiPD10aGlzLk1BWF9QSVhFTH0sc2V0RXh0ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuc2V0RXh0ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9LWEubGVmdC9kLGQ9YS50b3AvZDtpZihiKXJldHVybiB0aGlzLmxlZnQ9ZSx0aGlzLnRvcD1kLHRoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsCiJ2aWV3Qm94IiwiMCAwICIrdGhpcy5zaXplLncrIiAiK3RoaXMuc2l6ZS5oKSx0aGlzLnRyYW5zbGF0ZSh0aGlzLnhPZmZzZXQsMCksITA7KGU9dGhpcy50cmFuc2xhdGUoZS10aGlzLmxlZnQrdGhpcy54T2Zmc2V0LGQtdGhpcy50b3ApKXx8dGhpcy5zZXRFeHRlbnQoYSwhMCk7cmV0dXJuIGMmJmV9LHRyYW5zbGF0ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMuaW5WYWxpZFJhbmdlKGEsYiwhMCkpe3ZhciBjPSIiO2lmKGF8fGIpYz0idHJhbnNsYXRlKCIrYSsiLCIrYisiKSI7dGhpcy5yb290LnNldEF0dHJpYnV0ZU5TKG51bGwsInRyYW5zZm9ybSIsYyk7dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnM9e3g6YSx5OmJ9O3JldHVybiEwfXJldHVybiExfSxzZXRTaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUmVuZGVyZXIucHJvdG90eXBlLnNldFNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIix0aGlzLnNpemUudyk7CnRoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsImhlaWdodCIsdGhpcy5zaXplLmgpfSxnZXROb2RlVHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7c3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6Yz1iLmV4dGVybmFsR3JhcGhpYz8iaW1hZ2UiOnRoaXMuaXNDb21wbGV4U3ltYm9sKGIuZ3JhcGhpY05hbWUpPyJzdmciOiJjaXJjbGUiO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUmVjdGFuZ2xlIjpjPSJyZWN0IjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOmM9InBvbHlsaW5lIjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciOmM9InBvbHlnb24iO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZSI6Yz0icGF0aCJ9cmV0dXJuIGN9LHNldFN0eWxlOmZ1bmN0aW9uKGEsCmIsYyl7Yj1ifHxhLl9zdHlsZTtjPWN8fGEuX29wdGlvbnM7dmFyIGQ9Yi50aXRsZXx8Yi5ncmFwaGljVGl0bGU7aWYoZCl7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0aXRsZSIsZCk7dmFyIGU9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGl0bGUiKTswPGUubGVuZ3RoP2VbMF0uZmlyc3RDaGlsZC50ZXh0Q29udGVudD1kOihlPXRoaXMubm9kZUZhY3RvcnkobnVsbCwidGl0bGUiKSxlLnRleHRDb250ZW50PWQsYS5hcHBlbmRDaGlsZChlKSl9dmFyIGU9cGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZU5TKG51bGwsInIiKSksZD0xLGY7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLl9nZW9tZXRyeUNsYXNzJiZlKXthLnN0eWxlLnZpc2liaWxpdHk9IiI7aWYoITE9PT1iLmdyYXBoaWMpYS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2Vsc2UgaWYoYi5leHRlcm5hbEdyYXBoaWMpe2Y9dGhpcy5nZXRQb3NpdGlvbihhKTtiLmdyYXBoaWNXaWR0aCYmYi5ncmFwaGljSGVpZ2h0JiYKYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwibm9uZSIpO3ZhciBlPWIuZ3JhcGhpY1dpZHRofHxiLmdyYXBoaWNIZWlnaHQsZz1iLmdyYXBoaWNIZWlnaHR8fGIuZ3JhcGhpY1dpZHRoLGU9ZT9lOjIqYi5wb2ludFJhZGl1cyxnPWc/ZzoyKmIucG9pbnRSYWRpdXMsaD12b2lkIDAhPWIuZ3JhcGhpY1lPZmZzZXQ/Yi5ncmFwaGljWU9mZnNldDotKDAuNSpnKSxrPWIuZ3JhcGhpY09wYWNpdHl8fGIuZmlsbE9wYWNpdHk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwoZi54Kyh2b2lkIDAhPWIuZ3JhcGhpY1hPZmZzZXQ/Yi5ncmFwaGljWE9mZnNldDotKDAuNSplKSkpLnRvRml4ZWQoKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IiwoZi55K2gpLnRvRml4ZWQoKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsZSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJoZWlnaHQiLGcpO2Euc2V0QXR0cmlidXRlTlModGhpcy54bGlua25zLCJ4bGluazpocmVmIiwKYi5leHRlcm5hbEdyYXBoaWMpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwic3R5bGUiLCJvcGFjaXR5OiAiK2spO2Eub25jbGljaz1PcGVuTGF5ZXJzLkV2ZW50LnByZXZlbnREZWZhdWx0fWVsc2UgaWYodGhpcy5pc0NvbXBsZXhTeW1ib2woYi5ncmFwaGljTmFtZSkpe3ZhciBlPTMqYi5wb2ludFJhZGl1cyxnPTIqZSxsPXRoaXMuaW1wb3J0U3ltYm9sKGIuZ3JhcGhpY05hbWUpO2Y9dGhpcy5nZXRQb3NpdGlvbihhKTtkPTMqdGhpcy5zeW1ib2xNZXRyaWNzW2wuaWRdWzBdL2c7aD1hLnBhcmVudE5vZGU7az1hLm5leHRTaWJsaW5nO2gmJmgucmVtb3ZlQ2hpbGQoYSk7YS5maXJzdENoaWxkJiZhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7YS5hcHBlbmRDaGlsZChsLmZpcnN0Q2hpbGQuY2xvbmVOb2RlKCEwKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ2aWV3Qm94IixsLmdldEF0dHJpYnV0ZU5TKG51bGwsInZpZXdCb3giKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsCmcpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IixnKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGYueC1lKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsInkiLGYueS1lKTtrP2guaW5zZXJ0QmVmb3JlKGEsayk6aCYmaC5hcHBlbmRDaGlsZChhKX1lbHNlIGEuc2V0QXR0cmlidXRlTlMobnVsbCwiciIsYi5wb2ludFJhZGl1cyk7ZT1iLnJvdGF0aW9uO3ZvaWQgMD09PWUmJnZvaWQgMD09PWEuX3JvdGF0aW9ufHwhZnx8KGEuX3JvdGF0aW9uPWUsZXw9MCwic3ZnIiE9PWEubm9kZU5hbWU/YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0cmFuc2Zvcm0iLCJyb3RhdGUoIitlKyIgIitmLngrIiAiK2YueSsiKSIpOihmPXRoaXMuc3ltYm9sTWV0cmljc1tsLmlkXSxhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlTlMobnVsbCwidHJhbnNmb3JtIiwicm90YXRlKCIrZSsiICIrZlsxXSsiICIrZlsyXSsiKSIpKSl9Yy5pc0ZpbGxlZD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIixiLmZpbGxDb2xvciksCmEuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1vcGFjaXR5IixiLmZpbGxPcGFjaXR5KSk6YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIiwibm9uZSIpO2MuaXNTdHJva2VkPyhhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZSIsYi5zdHJva2VDb2xvciksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2Utb3BhY2l0eSIsYi5zdHJva2VPcGFjaXR5KSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS13aWR0aCIsYi5zdHJva2VXaWR0aCpkKSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS1saW5lY2FwIixiLnN0cm9rZUxpbmVjYXB8fCJyb3VuZCIpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwic3Ryb2tlLWxpbmVqb2luIiwicm91bmQiKSxiLnN0cm9rZURhc2hzdHlsZSYmYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UtZGFzaGFycmF5Iix0aGlzLmRhc2hTdHlsZShiLGQpKSk6YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UiLCJub25lIik7Yi5wb2ludGVyRXZlbnRzJiYKYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwb2ludGVyLWV2ZW50cyIsYi5wb2ludGVyRXZlbnRzKTtudWxsIT1iLmN1cnNvciYmYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjdXJzb3IiLGIuY3Vyc29yKTtyZXR1cm4gYX0sZGFzaFN0eWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zdHJva2VXaWR0aCpiLGQ9YS5zdHJva2VEYXNoc3R5bGU7c3dpdGNoKGQpe2Nhc2UgInNvbGlkIjpyZXR1cm4ibm9uZSI7Y2FzZSAiZG90IjpyZXR1cm5bMSw0KmNdLmpvaW4oKTtjYXNlICJkYXNoIjpyZXR1cm5bNCpjLDQqY10uam9pbigpO2Nhc2UgImRhc2hkb3QiOnJldHVybls0KmMsNCpjLDEsNCpjXS5qb2luKCk7Y2FzZSAibG9uZ2Rhc2giOnJldHVybls4KmMsNCpjXS5qb2luKCk7Y2FzZSAibG9uZ2Rhc2hkb3QiOnJldHVybls4KmMsNCpjLDEsNCpjXS5qb2luKCk7ZGVmYXVsdDpyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcudHJpbShkKS5yZXBsYWNlKC9ccysvZywiLCIpfX0sY3JlYXRlTm9kZTpmdW5jdGlvbihhLApiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy54bWxucyxhKTtiJiZjLnNldEF0dHJpYnV0ZU5TKG51bGwsImlkIixiKTtyZXR1cm4gY30sbm9kZVR5cGVDb21wYXJlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9PWEubm9kZU5hbWV9LGNyZWF0ZVJlbmRlclJvb3Q6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkKyJfc3ZnUm9vdCIsInN2ZyIpO2Euc3R5bGUuZGlzcGxheT0iYmxvY2siO3JldHVybiBhfSxjcmVhdGVSb290OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkK2EsImciKX0sY3JlYXRlRGVmczpmdW5jdGlvbigpe3ZhciBhPXRoaXMubm9kZUZhY3RvcnkodGhpcy5jb250YWluZXIuaWQrIl9kZWZzIiwiZGVmcyIpO3RoaXMucmVuZGVyZXJSb290LmFwcGVuZENoaWxkKGEpO3JldHVybiBhfSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kcmF3Q2lyY2xlKGEsCmIsMSl9LGRyYXdDaXJjbGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9KGIueC10aGlzLmZlYXR1cmVEeCkvZCt0aGlzLmxlZnQ7Yj10aGlzLnRvcC1iLnkvZDtyZXR1cm4gdGhpcy5pblZhbGlkUmFuZ2UoZSxiKT8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIsZSksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIsYiksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJyIixjKSxhKTohMX0sZHJhd0xpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENvbXBvbmVudHNTdHJpbmcoYi5jb21wb25lbnRzKTtyZXR1cm4gYy5wYXRoPyhhLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50cyIsYy5wYXRoKSxjLmNvbXBsZXRlP2E6bnVsbCk6ITF9LGRyYXdMaW5lYXJSaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDb21wb25lbnRzU3RyaW5nKGIuY29tcG9uZW50cyk7cmV0dXJuIGMucGF0aD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLAoicG9pbnRzIixjLnBhdGgpLGMuY29tcGxldGU/YTpudWxsKTohMX0sZHJhd1BvbHlnb246ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9IiIsZD0hMCxlPSEwLGYsZyxoPTAsaz1iLmNvbXBvbmVudHMubGVuZ3RoO2g8aztoKyspYys9IiBNIixmPXRoaXMuZ2V0Q29tcG9uZW50c1N0cmluZyhiLmNvbXBvbmVudHNbaF0uY29tcG9uZW50cywiICIpLChnPWYucGF0aCk/KGMrPSIgIitnLGU9Zi5jb21wbGV0ZSYmZSk6ZD0hMTtyZXR1cm4gZD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJkIixjKyIgeiIpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1ydWxlIiwiZXZlbm9kZCIpLGU/YTpudWxsKTohMX0sZHJhd1JlY3RhbmdsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9KGIueC10aGlzLmZlYXR1cmVEeCkvYyt0aGlzLmxlZnQsZT10aGlzLnRvcC1iLnkvYztyZXR1cm4gdGhpcy5pblZhbGlkUmFuZ2UoZCxlKT8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwKZCksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IixlKSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIixiLndpZHRoL2MpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IixiLmhlaWdodC9jKSxhKTohMX0sZHJhd1RleHQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSEhYi5sYWJlbE91dGxpbmVXaWR0aDtpZihkKXt2YXIgZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO2UuZm9udENvbG9yPWUubGFiZWxPdXRsaW5lQ29sb3I7ZS5mb250U3Ryb2tlQ29sb3I9ZS5sYWJlbE91dGxpbmVDb2xvcjtlLmZvbnRTdHJva2VXaWR0aD1iLmxhYmVsT3V0bGluZVdpZHRoO2IubGFiZWxPdXRsaW5lT3BhY2l0eSYmKGUuZm9udE9wYWNpdHk9Yi5sYWJlbE91dGxpbmVPcGFjaXR5KTtkZWxldGUgZS5sYWJlbE91dGxpbmVXaWR0aDt0aGlzLmRyYXdUZXh0KGEsZSxjKX12YXIgZj10aGlzLmdldFJlc29sdXRpb24oKSxlPShjLngtdGhpcy5mZWF0dXJlRHgpL2YrdGhpcy5sZWZ0LGc9Yy55LwpmLXRoaXMudG9wLGQ9ZD90aGlzLkxBQkVMX09VVExJTkVfU1VGRklYOnRoaXMuTEFCRUxfSURfU1VGRklYLGY9dGhpcy5ub2RlRmFjdG9yeShhK2QsInRleHQiKTtmLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGUpO2Yuc2V0QXR0cmlidXRlTlMobnVsbCwieSIsLWcpO2IuZm9udENvbG9yJiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsImZpbGwiLGIuZm9udENvbG9yKTtiLmZvbnRTdHJva2VDb2xvciYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UiLGIuZm9udFN0cm9rZUNvbG9yKTtiLmZvbnRTdHJva2VXaWR0aCYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2Utd2lkdGgiLGIuZm9udFN0cm9rZVdpZHRoKTtiLmZvbnRPcGFjaXR5JiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsIm9wYWNpdHkiLGIuZm9udE9wYWNpdHkpO2IuZm9udEZhbWlseSYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LWZhbWlseSIsYi5mb250RmFtaWx5KTtiLmZvbnRTaXplJiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsCiJmb250LXNpemUiLGIuZm9udFNpemUpO2IuZm9udFdlaWdodCYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXdlaWdodCIsYi5mb250V2VpZ2h0KTtiLmZvbnRTdHlsZSYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXN0eWxlIixiLmZvbnRTdHlsZSk7ITA9PT1iLmxhYmVsU2VsZWN0PyhmLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50ZXItZXZlbnRzIiwidmlzaWJsZSIpLGYuX2ZlYXR1cmVJZD1hKTpmLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50ZXItZXZlbnRzIiwibm9uZSIpO2c9Yi5sYWJlbEFsaWdufHxPcGVuTGF5ZXJzLlJlbmRlcmVyLmRlZmF1bHRTeW1ib2xpemVyLmxhYmVsQWxpZ247Zi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0ZXh0LWFuY2hvciIsT3BlbkxheWVycy5SZW5kZXJlci5TVkcuTEFCRUxfQUxJR05bZ1swXV18fCJtaWRkbGUiKTshMD09PU9wZW5MYXllcnMuSVNfR0VDS08mJmYuc2V0QXR0cmlidXRlTlMobnVsbCwiZG9taW5hbnQtYmFzZWxpbmUiLApPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9BTElHTltnWzFdXXx8ImNlbnRyYWwiKTtmb3IodmFyIGg9Yi5sYWJlbC5zcGxpdCgiXG4iKSxrPWgubGVuZ3RoO2YuY2hpbGROb2Rlcy5sZW5ndGg+azspZi5yZW1vdmVDaGlsZChmLmxhc3RDaGlsZCk7Zm9yKHZhciBsPTA7bDxrO2wrKyl7dmFyIG09dGhpcy5ub2RlRmFjdG9yeShhK2QrIl90c3Bhbl8iK2wsInRzcGFuIik7ITA9PT1iLmxhYmVsU2VsZWN0JiYobS5fZmVhdHVyZUlkPWEsbS5fZ2VvbWV0cnk9YyxtLl9nZW9tZXRyeUNsYXNzPWMuQ0xBU1NfTkFNRSk7ITE9PT1PcGVuTGF5ZXJzLklTX0dFQ0tPJiZtLnNldEF0dHJpYnV0ZU5TKG51bGwsImJhc2VsaW5lLXNoaWZ0IixPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WU0hJRlRbZ1sxXV18fCItMzUlIik7bS5zZXRBdHRyaWJ1dGUoIngiLGUpO2lmKDA9PWwpe3ZhciBwPU9wZW5MYXllcnMuUmVuZGVyZXIuU1ZHLkxBQkVMX1ZGQUNUT1JbZ1sxXV07bnVsbD09cCYmCihwPS0wLjUpO20uc2V0QXR0cmlidXRlKCJkeSIscCooay0xKSsiZW0iKX1lbHNlIG0uc2V0QXR0cmlidXRlKCJkeSIsIjFlbSIpO20udGV4dENvbnRlbnQ9IiI9PT1oW2xdPyIgIjpoW2xdO20ucGFyZW50Tm9kZXx8Zi5hcHBlbmRDaGlsZChtKX1mLnBhcmVudE5vZGV8fHRoaXMudGV4dFJvb3QuYXBwZW5kQ2hpbGQoZil9LGdldENvbXBvbmVudHNTdHJpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W10sZD0hMCxlPWEubGVuZ3RoLGY9W10sZyxoPTA7aDxlO2grKylnPWFbaF0sYy5wdXNoKGcpLChnPXRoaXMuZ2V0U2hvcnRTdHJpbmcoZykpP2YucHVzaChnKTooMDxoJiZ0aGlzLmdldFNob3J0U3RyaW5nKGFbaC0xXSkmJmYucHVzaCh0aGlzLmNsaXBMaW5lKGFbaF0sYVtoLTFdKSksaDxlLTEmJnRoaXMuZ2V0U2hvcnRTdHJpbmcoYVtoKzFdKSYmZi5wdXNoKHRoaXMuY2xpcExpbmUoYVtoXSxhW2grMV0pKSxkPSExKTtyZXR1cm57cGF0aDpmLmpvaW4oYnx8IiwiKSxjb21wbGV0ZTpkfX0sCmNsaXBMaW5lOmZ1bmN0aW9uKGEsYil7aWYoYi5lcXVhbHMoYSkpcmV0dXJuIiI7dmFyIGM9dGhpcy5nZXRSZXNvbHV0aW9uKCksZD10aGlzLk1BWF9QSVhFTC10aGlzLnRyYW5zbGF0aW9uUGFyYW1ldGVycy54LGU9dGhpcy5NQVhfUElYRUwtdGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueSxmPShiLngtdGhpcy5mZWF0dXJlRHgpL2MrdGhpcy5sZWZ0LGc9dGhpcy50b3AtYi55L2MsaD0oYS54LXRoaXMuZmVhdHVyZUR4KS9jK3RoaXMubGVmdCxjPXRoaXMudG9wLWEueS9jLGs7aWYoaDwtZHx8aD5kKWs9KGMtZykvKGgtZiksaD0wPmg/LWQ6ZCxjPWcrKGgtZikqaztpZihjPC1lfHxjPmUpaz0oaC1mKS8oYy1nKSxjPTA+Yz8tZTplLGg9ZisoYy1nKSprO3JldHVybiBoKyIsIitjfSxnZXRTaG9ydFN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFJlc29sdXRpb24oKSxjPShhLngtdGhpcy5mZWF0dXJlRHgpL2IrdGhpcy5sZWZ0O2E9dGhpcy50b3AtYS55L2I7cmV0dXJuIHRoaXMuaW5WYWxpZFJhbmdlKGMsCmEpP2MrIiwiK2E6ITF9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybnt4OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIpKSx5OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIpKX19LGltcG9ydFN5bWJvbDpmdW5jdGlvbihhKXt0aGlzLmRlZnN8fCh0aGlzLmRlZnM9dGhpcy5jcmVhdGVEZWZzKCkpO3ZhciBiPXRoaXMuY29udGFpbmVyLmlkKyItIithLGM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYik7aWYobnVsbCE9YylyZXR1cm4gYzt2YXIgZD1PcGVuTGF5ZXJzLlJlbmRlcmVyLnN5bWJvbFthXTtpZighZCl0aHJvdyBFcnJvcihhKyIgaXMgbm90IGEgdmFsaWQgc3ltYm9sIG5hbWUiKTthPXRoaXMubm9kZUZhY3RvcnkoYiwic3ltYm9sIik7dmFyIGU9dGhpcy5ub2RlRmFjdG9yeShudWxsLCJwb2x5Z29uIik7YS5hcHBlbmRDaGlsZChlKTtmb3IodmFyIGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKE51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1BWF9WQUxVRSwKMCwwKSxmPVtdLGcsaCxrPTA7azxkLmxlbmd0aDtrKz0yKWc9ZFtrXSxoPWRbaysxXSxjLmxlZnQ9TWF0aC5taW4oYy5sZWZ0LGcpLGMuYm90dG9tPU1hdGgubWluKGMuYm90dG9tLGgpLGMucmlnaHQ9TWF0aC5tYXgoYy5yaWdodCxnKSxjLnRvcD1NYXRoLm1heChjLnRvcCxoKSxmLnB1c2goZywiLCIsaCk7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwb2ludHMiLGYuam9pbigiICIpKTtkPWMuZ2V0V2lkdGgoKTtlPWMuZ2V0SGVpZ2h0KCk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ2aWV3Qm94IixbYy5sZWZ0LWQsYy5ib3R0b20tZSwzKmQsMyplXS5qb2luKCIgIikpO3RoaXMuc3ltYm9sTWV0cmljc1tiXT1bTWF0aC5tYXgoZCxlKSxjLmdldENlbnRlckxvbkxhdCgpLmxvbixjLmdldENlbnRlckxvbkxhdCgpLmxhdF07dGhpcy5kZWZzLmFwcGVuZENoaWxkKGEpO3JldHVybiBhfSxnZXRGZWF0dXJlSWRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuZ2V0RmVhdHVyZUlkRnJvbUV2ZW50LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7Ynx8KGI9YS50YXJnZXQsYj1iLnBhcmVudE5vZGUmJmIhPXRoaXMucmVuZGVyZXJSb290P2IucGFyZW50Tm9kZS5fZmVhdHVyZUlkOnZvaWQgMCk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUmVuZGVyZXIuU1ZHIn0pO09wZW5MYXllcnMuUmVuZGVyZXIuU1ZHLkxBQkVMX0FMSUdOPXtsOiJzdGFydCIscjoiZW5kIixiOiJib3R0b20iLHQ6ImhhbmdpbmcifTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WU0hJRlQ9e3Q6Ii03MCUiLGI6IjAifTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WRkFDVE9SPXt0OjAsYjotMX07T3BlbkxheWVycy5SZW5kZXJlci5TVkcucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKX07T3BlbkxheWVycy5Gb3JtYXQuSlNPTj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LHtpbmRlbnQ6IiAgICAiLHNwYWNlOiIgIixuZXdsaW5lOiJcbiIsbGV2ZWw6MCxwcmV0dHk6ITEsbmF0aXZlSlNPTjpmdW5jdGlvbigpe3JldHVybiEoIXdpbmRvdy5KU09OfHwiZnVuY3Rpb24iIT10eXBlb2YgSlNPTi5wYXJzZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIEpTT04uc3RyaW5naWZ5KX0oKSxyZWFkOmZ1bmN0aW9uKGEsYil7dmFyIGM7aWYodGhpcy5uYXRpdmVKU09OKWM9SlNPTi5wYXJzZShhLGIpO2Vsc2UgdHJ5e2lmKC9eW1xdLDp7fVxzXSokLy50ZXN0KGEucmVwbGFjZSgvXFxbIlxcXC9iZm5ydHVdL2csIkAiKS5yZXBsYWNlKC8iW14iXFxcblxyXSoifHRydWV8ZmFsc2V8bnVsbHwtP1xkKyg/OlwuXGQqKT8oPzpbZUVdWytcLV0/XGQrKT8vZywiXSIpLnJlcGxhY2UoLyg/Ol58OnwsKSg/OlxzKlxbKSsvZywiIikpJiYoYz1ldmFsKCIoIithKyIpIiksImZ1bmN0aW9uIj09PQp0eXBlb2YgYikpe3ZhciBkPWZ1bmN0aW9uKGEsYyl7aWYoYyYmIm9iamVjdCI9PT10eXBlb2YgYylmb3IodmFyIGUgaW4gYyljLmhhc093blByb3BlcnR5KGUpJiYoY1tlXT1kKGUsY1tlXSkpO3JldHVybiBiKGEsYyl9O2M9ZCgiIixjKX19Y2F0Y2goZSl7fXRoaXMua2VlcERhdGEmJih0aGlzLmRhdGE9Yyk7cmV0dXJuIGN9LHdyaXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5wcmV0dHk9ISFiO3ZhciBjPW51bGwsZD10eXBlb2YgYTtpZih0aGlzLnNlcmlhbGl6ZVtkXSl0cnl7Yz0hdGhpcy5wcmV0dHkmJnRoaXMubmF0aXZlSlNPTj9KU09OLnN0cmluZ2lmeShhKTp0aGlzLnNlcmlhbGl6ZVtkXS5hcHBseSh0aGlzLFthXSl9Y2F0Y2goZSl7T3BlbkxheWVycy5Db25zb2xlLmVycm9yKCJUcm91YmxlIHNlcmlhbGl6aW5nOiAiK2UpfXJldHVybiBjfSx3cml0ZUluZGVudDpmdW5jdGlvbigpe3ZhciBhPVtdO2lmKHRoaXMucHJldHR5KWZvcih2YXIgYj0wO2I8dGhpcy5sZXZlbDsrK2IpYS5wdXNoKHRoaXMuaW5kZW50KTsKcmV0dXJuIGEuam9pbigiIil9LHdyaXRlTmV3bGluZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXR0eT90aGlzLm5ld2xpbmU6IiJ9LHdyaXRlU3BhY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV0dHk/dGhpcy5zcGFjZToiIn0sc2VyaWFsaXplOntvYmplY3Q6ZnVuY3Rpb24oYSl7aWYobnVsbD09YSlyZXR1cm4ibnVsbCI7aWYoYS5jb25zdHJ1Y3Rvcj09RGF0ZSlyZXR1cm4gdGhpcy5zZXJpYWxpemUuZGF0ZS5hcHBseSh0aGlzLFthXSk7aWYoYS5jb25zdHJ1Y3Rvcj09QXJyYXkpcmV0dXJuIHRoaXMuc2VyaWFsaXplLmFycmF5LmFwcGx5KHRoaXMsW2FdKTt2YXIgYj1bInsiXTt0aGlzLmxldmVsKz0xO3ZhciBjLGQsZSxmPSExO2ZvcihjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmKGQ9T3BlbkxheWVycy5Gb3JtYXQuSlNPTi5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbYyx0aGlzLnByZXR0eV0pLGU9T3BlbkxheWVycy5Gb3JtYXQuSlNPTi5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcywKW2FbY10sdGhpcy5wcmV0dHldKSxudWxsIT1kJiZudWxsIT1lJiYoZiYmYi5wdXNoKCIsIiksYi5wdXNoKHRoaXMud3JpdGVOZXdsaW5lKCksdGhpcy53cml0ZUluZGVudCgpLGQsIjoiLHRoaXMud3JpdGVTcGFjZSgpLGUpLGY9ITApKTt0aGlzLmxldmVsLT0xO2IucHVzaCh0aGlzLndyaXRlTmV3bGluZSgpLHRoaXMud3JpdGVJbmRlbnQoKSwifSIpO3JldHVybiBiLmpvaW4oIiIpfSxhcnJheTpmdW5jdGlvbihhKXt2YXIgYixjPVsiWyJdO3RoaXMubGV2ZWwrPTE7Zm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7KytkKWI9T3BlbkxheWVycy5Gb3JtYXQuSlNPTi5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbYVtkXSx0aGlzLnByZXR0eV0pLG51bGwhPWImJigwPGQmJmMucHVzaCgiLCIpLGMucHVzaCh0aGlzLndyaXRlTmV3bGluZSgpLHRoaXMud3JpdGVJbmRlbnQoKSxiKSk7dGhpcy5sZXZlbC09MTtjLnB1c2godGhpcy53cml0ZU5ld2xpbmUoKSx0aGlzLndyaXRlSW5kZW50KCksCiJdIik7cmV0dXJuIGMuam9pbigiIil9LHN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj17IlxiIjoiXFxiIiwiXHQiOiJcXHQiLCJcbiI6IlxcbiIsIlxmIjoiXFxmIiwiXHIiOiJcXHIiLCciJzonXFwiJywiXFwiOiJcXFxcIn07cmV0dXJuL1siXFxceDAwLVx4MWZdLy50ZXN0KGEpPyciJythLnJlcGxhY2UoLyhbXHgwMC1ceDFmXFwiXSkvZyxmdW5jdGlvbihhLGQpe3ZhciBlPWJbZF07aWYoZSlyZXR1cm4gZTtlPWQuY2hhckNvZGVBdCgpO3JldHVybiJcXHUwMCIrTWF0aC5mbG9vcihlLzE2KS50b1N0cmluZygxNikrKGUlMTYpLnRvU3RyaW5nKDE2KX0pKyciJzonIicrYSsnIid9LG51bWJlcjpmdW5jdGlvbihhKXtyZXR1cm4gaXNGaW5pdGUoYSk/U3RyaW5nKGEpOiJudWxsIn0sImJvb2xlYW4iOmZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcoYSl9LGRhdGU6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gMTA+YT8iMCIrYTphfXJldHVybiciJythLmdldEZ1bGxZZWFyKCkrCiItIitiKGEuZ2V0TW9udGgoKSsxKSsiLSIrYihhLmdldERhdGUoKSkrIlQiK2IoYS5nZXRIb3VycygpKSsiOiIrYihhLmdldE1pbnV0ZXMoKSkrIjoiK2IoYS5nZXRTZWNvbmRzKCkpKyciJ319LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkpTT04ifSk7T3BlbkxheWVycy5Gb3JtYXQuR2VvSlNPTj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LkpTT04se2lnbm9yZUV4dHJhRGltczohMSxyZWFkOmZ1bmN0aW9uKGEsYixjKXtiPWI/YjoiRmVhdHVyZUNvbGxlY3Rpb24iO3ZhciBkPW51bGwsZT1udWxsLGU9InN0cmluZyI9PXR5cGVvZiBhP09wZW5MYXllcnMuRm9ybWF0LkpTT04ucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYSxjXSk6YTtpZighZSlPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoIkJhZCBKU09OOiAiK2EpO2Vsc2UgaWYoInN0cmluZyIhPXR5cGVvZiBlLnR5cGUpT3BlbkxheWVycy5Db25zb2xlLmVycm9yKCJCYWQgR2VvSlNPTiAtIG5vIHR5cGU6ICIrYSk7ZWxzZSBpZih0aGlzLmlzVmFsaWRUeXBlKGUsYikpc3dpdGNoKGIpe2Nhc2UgIkdlb21ldHJ5Ijp0cnl7ZD10aGlzLnBhcnNlR2VvbWV0cnkoZSl9Y2F0Y2goZil7T3BlbkxheWVycy5Db25zb2xlLmVycm9yKGYpfWJyZWFrO2Nhc2UgIkZlYXR1cmUiOnRyeXtkPQp0aGlzLnBhcnNlRmVhdHVyZShlKSxkLnR5cGU9IkZlYXR1cmUifWNhdGNoKGcpe09wZW5MYXllcnMuQ29uc29sZS5lcnJvcihnKX1icmVhaztjYXNlICJGZWF0dXJlQ29sbGVjdGlvbiI6c3dpdGNoKGQ9W10sZS50eXBlKXtjYXNlICJGZWF0dXJlIjp0cnl7ZC5wdXNoKHRoaXMucGFyc2VGZWF0dXJlKGUpKX1jYXRjaChoKXtkPW51bGwsT3BlbkxheWVycy5Db25zb2xlLmVycm9yKGgpfWJyZWFrO2Nhc2UgIkZlYXR1cmVDb2xsZWN0aW9uIjphPTA7Zm9yKGI9ZS5mZWF0dXJlcy5sZW5ndGg7YTxiOysrYSl0cnl7ZC5wdXNoKHRoaXMucGFyc2VGZWF0dXJlKGUuZmVhdHVyZXNbYV0pKX1jYXRjaChrKXtkPW51bGwsT3BlbkxheWVycy5Db25zb2xlLmVycm9yKGspfWJyZWFrO2RlZmF1bHQ6dHJ5e3ZhciBsPXRoaXMucGFyc2VHZW9tZXRyeShlKTtkLnB1c2gobmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobCkpfWNhdGNoKG0pe2Q9bnVsbCxPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IobSl9fX1yZXR1cm4gZH0sCmlzVmFsaWRUeXBlOmZ1bmN0aW9uKGEsYil7dmFyIGM9ITE7c3dpdGNoKGIpe2Nhc2UgIkdlb21ldHJ5IjotMT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YoIlBvaW50IE11bHRpUG9pbnQgTGluZVN0cmluZyBNdWx0aUxpbmVTdHJpbmcgUG9seWdvbiBNdWx0aVBvbHlnb24gQm94IEdlb21ldHJ5Q29sbGVjdGlvbiIuc3BsaXQoIiAiKSxhLnR5cGUpP09wZW5MYXllcnMuQ29uc29sZS5lcnJvcigiVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogIithLnR5cGUpOmM9ITA7YnJlYWs7Y2FzZSAiRmVhdHVyZUNvbGxlY3Rpb24iOmM9ITA7YnJlYWs7ZGVmYXVsdDphLnR5cGU9PWI/Yz0hMDpPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoIkNhbm5vdCBjb252ZXJ0IHR5cGVzIGZyb20gIithLnR5cGUrIiB0byAiK2IpfXJldHVybiBjfSxwYXJzZUZlYXR1cmU6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkO2M9YS5wcm9wZXJ0aWVzP2EucHJvcGVydGllczp7fTtkPWEuZ2VvbWV0cnkmJmEuZ2VvbWV0cnkuYmJveHx8CmEuYmJveDt0cnl7Yj10aGlzLnBhcnNlR2VvbWV0cnkoYS5nZW9tZXRyeSl9Y2F0Y2goZSl7dGhyb3cgZTt9Yj1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihiLGMpO2QmJihiLmJvdW5kcz1PcGVuTGF5ZXJzLkJvdW5kcy5mcm9tQXJyYXkoZCkpO2EuaWQmJihiLmZpZD1hLmlkKTtyZXR1cm4gYn0scGFyc2VHZW9tZXRyeTpmdW5jdGlvbihhKXtpZihudWxsPT1hKXJldHVybiBudWxsO3ZhciBiLGM9ITE7aWYoIkdlb21ldHJ5Q29sbGVjdGlvbiI9PWEudHlwZSl7aWYoIU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEuZ2VvbWV0cmllcykpdGhyb3ciR2VvbWV0cnlDb2xsZWN0aW9uIG11c3QgaGF2ZSBnZW9tZXRyaWVzIGFycmF5OiAiK2E7Yj1hLmdlb21ldHJpZXMubGVuZ3RoO2Zvcih2YXIgYz1BcnJheShiKSxkPTA7ZDxiOysrZCljW2RdPXRoaXMucGFyc2VHZW9tZXRyeS5hcHBseSh0aGlzLFthLmdlb21ldHJpZXNbZF1dKTtiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24oYyk7CmM9ITB9ZWxzZXtpZighT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYS5jb29yZGluYXRlcykpdGhyb3ciR2VvbWV0cnkgbXVzdCBoYXZlIGNvb3JkaW5hdGVzIGFycmF5OiAiK2E7aWYoIXRoaXMucGFyc2VDb29yZHNbYS50eXBlLnRvTG93ZXJDYXNlKCldKXRocm93IlVuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6ICIrYS50eXBlO3RyeXtiPXRoaXMucGFyc2VDb29yZHNbYS50eXBlLnRvTG93ZXJDYXNlKCldLmFwcGx5KHRoaXMsW2EuY29vcmRpbmF0ZXNdKX1jYXRjaChlKXt0aHJvdyBlO319dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJih0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmIWMpJiZiLnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7cmV0dXJuIGJ9LHBhcnNlQ29vcmRzOntwb2ludDpmdW5jdGlvbihhKXtpZighMT09dGhpcy5pZ25vcmVFeHRyYURpbXMmJjIhPWEubGVuZ3RoKXRocm93Ik9ubHkgMkQgcG9pbnRzIGFyZSBzdXBwb3J0ZWQ6ICIrCmE7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGFbMF0sYVsxXSl9LG11bHRpcG9pbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9bnVsbCxkPTAsZT1hLmxlbmd0aDtkPGU7KytkKXt0cnl7Yz10aGlzLnBhcnNlQ29vcmRzLnBvaW50LmFwcGx5KHRoaXMsW2FbZF1dKX1jYXRjaChmKXt0aHJvdyBmO31iLnB1c2goYyl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQoYil9LGxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9bnVsbCxkPTAsZT1hLmxlbmd0aDtkPGU7KytkKXt0cnl7Yz10aGlzLnBhcnNlQ29vcmRzLnBvaW50LmFwcGx5KHRoaXMsW2FbZF1dKX1jYXRjaChmKXt0aHJvdyBmO31iLnB1c2goYyl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoYil9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1udWxsLGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2Qpe3RyeXtjPQp0aGlzLnBhcnNlQ29vcmRzLmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYVtkXV0pfWNhdGNoKGYpe3Rocm93IGY7fWIucHVzaChjKX1yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKGIpfSxwb2x5Z29uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjLGQsZT0wLGY9YS5sZW5ndGg7ZTxmOysrZSl7dHJ5e2Q9dGhpcy5wYXJzZUNvb3Jkcy5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2FbZV1dKX1jYXRjaChnKXt0aHJvdyBnO31jPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcoZC5jb21wb25lbnRzKTtiLnB1c2goYyl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24oYil9LG11bHRpcG9seWdvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1udWxsLGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2Qpe3RyeXtjPXRoaXMucGFyc2VDb29yZHMucG9seWdvbi5hcHBseSh0aGlzLFthW2RdXSl9Y2F0Y2goZil7dGhyb3cgZjt9Yi5wdXNoKGMpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24oYil9LApib3g6ZnVuY3Rpb24oYSl7aWYoMiE9YS5sZW5ndGgpdGhyb3ciR2VvSlNPTiBib3ggY29vcmRpbmF0ZXMgbXVzdCBoYXZlIDIgZWxlbWVudHMiO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzBdWzBdLGFbMF1bMV0pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGFbMV1bMF0sYVswXVsxXSksbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVsxXVswXSxhWzFdWzFdKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzBdWzBdLGFbMV1bMV0pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGFbMF1bMF0sYVswXVsxXSldKV0pfX0sd3JpdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17dHlwZTpudWxsfTtpZihPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKSl7Yy50eXBlPSJGZWF0dXJlQ29sbGVjdGlvbiI7dmFyIGQ9CmEubGVuZ3RoO2MuZmVhdHVyZXM9QXJyYXkoZCk7Zm9yKHZhciBlPTA7ZTxkOysrZSl7dmFyIGY9YVtlXTtpZighZiBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IpdGhyb3ciRmVhdHVyZUNvbGxlY3Rpb24gb25seSBzdXBwb3J0cyBjb2xsZWN0aW9ucyBvZiBmZWF0dXJlczogIitmO2MuZmVhdHVyZXNbZV09dGhpcy5leHRyYWN0LmZlYXR1cmUuYXBwbHkodGhpcyxbZl0pfX1lbHNlIDA9PWEuQ0xBU1NfTkFNRS5pbmRleE9mKCJPcGVuTGF5ZXJzLkdlb21ldHJ5Iik/Yz10aGlzLmV4dHJhY3QuZ2VvbWV0cnkuYXBwbHkodGhpcyxbYV0pOmEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yJiYoYz10aGlzLmV4dHJhY3QuZmVhdHVyZS5hcHBseSh0aGlzLFthXSksYS5sYXllciYmYS5sYXllci5wcm9qZWN0aW9uJiYoYy5jcnM9dGhpcy5jcmVhdGVDUlNPYmplY3QoYSkpKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuSlNPTi5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcywKW2MsYl0pfSxjcmVhdGVDUlNPYmplY3Q6ZnVuY3Rpb24oYSl7YT1hLmxheWVyLnByb2plY3Rpb24udG9TdHJpbmcoKTt2YXIgYj17fTthLm1hdGNoKC9lcHNnOi9pKSYmKGE9cGFyc2VJbnQoYS5zdWJzdHJpbmcoYS5pbmRleE9mKCI6IikrMSkpLGI9NDMyNj09YT97dHlwZToibmFtZSIscHJvcGVydGllczp7bmFtZToidXJuOm9nYzpkZWY6Y3JzOk9HQzoxLjM6Q1JTODQifX06e3R5cGU6Im5hbWUiLHByb3BlcnRpZXM6e25hbWU6IkVQU0c6IithfX0pO3JldHVybiBifSxleHRyYWN0OntmZWF0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZXh0cmFjdC5nZW9tZXRyeS5hcHBseSh0aGlzLFthLmdlb21ldHJ5XSksYj17dHlwZToiRmVhdHVyZSIscHJvcGVydGllczphLmF0dHJpYnV0ZXMsZ2VvbWV0cnk6Yn07bnVsbCE9YS5maWQmJihiLmlkPWEuZmlkKTtyZXR1cm4gYn0sZ2VvbWV0cnk6ZnVuY3Rpb24oYSl7aWYobnVsbD09YSlyZXR1cm4gbnVsbDt0aGlzLmludGVybmFsUHJvamVjdGlvbiYmCnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiYoYT1hLmNsb25lKCksYS50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pKTt2YXIgYj1hLkNMQVNTX05BTUUuc3BsaXQoIi4iKVsyXTthPXRoaXMuZXh0cmFjdFtiLnRvTG93ZXJDYXNlKCldLmFwcGx5KHRoaXMsW2FdKTtyZXR1cm4iQ29sbGVjdGlvbiI9PWI/e3R5cGU6Ikdlb21ldHJ5Q29sbGVjdGlvbiIsZ2VvbWV0cmllczphfTp7dHlwZTpiLGNvb3JkaW5hdGVzOmF9fSxwb2ludDpmdW5jdGlvbihhKXtyZXR1cm5bYS54LGEueV19LG11bHRpcG9pbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2godGhpcy5leHRyYWN0LnBvaW50LmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKTtyZXR1cm4gYn0sbGluZXN0cmluZzpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPApkOysrYyliLnB1c2godGhpcy5leHRyYWN0LnBvaW50LmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKTtyZXR1cm4gYn0sbXVsdGlsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKHRoaXMuZXh0cmFjdC5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKTtyZXR1cm4gYn0scG9seWdvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKWIucHVzaCh0aGlzLmV4dHJhY3QubGluZXN0cmluZy5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSk7cmV0dXJuIGJ9LG11bHRpcG9seWdvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKWIucHVzaCh0aGlzLmV4dHJhY3QucG9seWdvbi5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSk7cmV0dXJuIGJ9LGNvbGxlY3Rpb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPQphLmNvbXBvbmVudHMubGVuZ3RoLGM9QXJyYXkoYiksZD0wO2Q8YjsrK2QpY1tkXT10aGlzLmV4dHJhY3QuZ2VvbWV0cnkuYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2RdXSk7cmV0dXJuIGN9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5HZW9KU09OIn0pO09wZW5MYXllcnMuQ29udHJvbC5EcmF3RmVhdHVyZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7bGF5ZXI6bnVsbCxjYWxsYmFja3M6bnVsbCxtdWx0aTohMSxmZWF0dXJlQWRkZWQ6ZnVuY3Rpb24oKXt9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtjXSk7dGhpcy5jYWxsYmFja3M9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7ZG9uZTp0aGlzLmRyYXdGZWF0dXJlLG1vZGlmeTpmdW5jdGlvbihhLGIpe3RoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgic2tldGNobW9kaWZpZWQiLHt2ZXJ0ZXg6YSxmZWF0dXJlOmJ9KX0sY3JlYXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJza2V0Y2hzdGFydGVkIix7dmVydGV4OmEsZmVhdHVyZTpifSl9fSx0aGlzLmNhbGxiYWNrcyk7dGhpcy5sYXllcj1hO3RoaXMuaGFuZGxlck9wdGlvbnM9CnRoaXMuaGFuZGxlck9wdGlvbnN8fHt9O3RoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zLHtyZW5kZXJlcnM6YS5yZW5kZXJlcnMscmVuZGVyZXJPcHRpb25zOmEucmVuZGVyZXJPcHRpb25zfSk7Im11bHRpImluIHRoaXMuaGFuZGxlck9wdGlvbnN8fCh0aGlzLmhhbmRsZXJPcHRpb25zLm11bHRpPXRoaXMubXVsdGkpO2lmKGE9dGhpcy5sYXllci5zdHlsZU1hcCYmdGhpcy5sYXllci5zdHlsZU1hcC5zdHlsZXMudGVtcG9yYXJ5KXRoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zLHtzdHlsZU1hcDpuZXcgT3BlbkxheWVycy5TdHlsZU1hcCh7ImRlZmF1bHQiOmF9KX0pO3RoaXMuaGFuZGxlcj1uZXcgYih0aGlzLHRoaXMuY2FsbGJhY2tzLHRoaXMuaGFuZGxlck9wdGlvbnMpfSwKZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oYSl7YT1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTshMSE9PXRoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgic2tldGNoY29tcGxldGUiLHtmZWF0dXJlOmF9KSYmKGEuc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQsdGhpcy5sYXllci5hZGRGZWF0dXJlcyhbYV0pLHRoaXMuZmVhdHVyZUFkZGVkKGEpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZWFkZGVkIix7ZmVhdHVyZTphfSkpfSxpbnNlcnRYWTpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmxpbmUmJnRoaXMuaGFuZGxlci5pbnNlcnRYWShhLGIpfSxpbnNlcnREZWx0YVhZOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVyJiZ0aGlzLmhhbmRsZXIubGluZSYmdGhpcy5oYW5kbGVyLmluc2VydERlbHRhWFkoYSxiKX0saW5zZXJ0RGlyZWN0aW9uTGVuZ3RoOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVyJiZ0aGlzLmhhbmRsZXIubGluZSYmCnRoaXMuaGFuZGxlci5pbnNlcnREaXJlY3Rpb25MZW5ndGgoYSxiKX0saW5zZXJ0RGVmbGVjdGlvbkxlbmd0aDpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmxpbmUmJnRoaXMuaGFuZGxlci5pbnNlcnREZWZsZWN0aW9uTGVuZ3RoKGEsYil9LHVuZG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYW5kbGVyLnVuZG8mJnRoaXMuaGFuZGxlci51bmRvKCl9LHJlZG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYW5kbGVyLnJlZG8mJnRoaXMuaGFuZGxlci5yZWRvKCl9LGZpbmlzaFNrZXRjaDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlci5maW5pc2hHZW9tZXRyeSgpfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXIuY2FuY2VsKCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5EcmF3RmVhdHVyZSJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUGluY2g9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIse3N0YXJ0ZWQ6ITEsc3RvcERvd246ITEscGluY2hpbmc6ITEsbGFzdDpudWxsLHN0YXJ0Om51bGwsdG91Y2hzdGFydDpmdW5jdGlvbihhKXt2YXIgYj0hMDt0aGlzLnBpbmNoaW5nPSExO2lmKE9wZW5MYXllcnMuRXZlbnQuaXNNdWx0aVRvdWNoKGEpKXRoaXMuc3RhcnRlZD0hMCx0aGlzLmxhc3Q9dGhpcy5zdGFydD17ZGlzdGFuY2U6dGhpcy5nZXREaXN0YW5jZShhLnRvdWNoZXMpLGRlbHRhOjAsc2NhbGU6MX0sdGhpcy5jYWxsYmFjaygic3RhcnQiLFthLHRoaXMuc3RhcnRdKSxiPSF0aGlzLnN0b3BEb3duO2Vsc2V7aWYodGhpcy5zdGFydGVkKXJldHVybiExO3RoaXMuc3RhcnRlZD0hMTt0aGlzLmxhc3Q9dGhpcy5zdGFydD1udWxsfU9wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSk7cmV0dXJuIGJ9LHRvdWNobW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXJ0ZWQmJgpPcGVuTGF5ZXJzLkV2ZW50LmlzTXVsdGlUb3VjaChhKSl7dGhpcy5waW5jaGluZz0hMDt2YXIgYj10aGlzLmdldFBpbmNoRGF0YShhKTt0aGlzLmNhbGxiYWNrKCJtb3ZlIixbYSxiXSk7dGhpcy5sYXN0PWI7T3BlbkxheWVycy5FdmVudC5zdG9wKGEpfWVsc2UgaWYodGhpcy5zdGFydGVkKXJldHVybiExO3JldHVybiEwfSx0b3VjaGVuZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdGFydGVkJiYhT3BlbkxheWVycy5FdmVudC5pc011bHRpVG91Y2goYSk/KHRoaXMucGluY2hpbmc9dGhpcy5zdGFydGVkPSExLHRoaXMuY2FsbGJhY2soImRvbmUiLFthLHRoaXMuc3RhcnQsdGhpcy5sYXN0XSksdGhpcy5sYXN0PXRoaXMuc3RhcnQ9bnVsbCwhMSk6ITB9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLnBpbmNoaW5nPSExLGE9ITApO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9CiExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLnBpbmNoaW5nPXRoaXMuc3RhcnRlZD0hMSx0aGlzLmxhc3Q9dGhpcy5zdGFydD1udWxsLGE9ITApO3JldHVybiBhfSxnZXREaXN0YW5jZTpmdW5jdGlvbihhKXt2YXIgYj1hWzBdO2E9YVsxXTtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGIub2xDbGllbnRYLWEub2xDbGllbnRYLDIpK01hdGgucG93KGIub2xDbGllbnRZLWEub2xDbGllbnRZLDIpKX0sZ2V0UGluY2hEYXRhOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXREaXN0YW5jZShhLnRvdWNoZXMpO3JldHVybntkaXN0YW5jZTphLGRlbHRhOnRoaXMubGFzdC5kaXN0YW5jZS1hLHNjYWxlOmEvdGhpcy5zdGFydC5kaXN0YW5jZX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuSGFuZGxlci5QaW5jaCJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUG9seWdvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlci5QYXRoLHtob2xlTW9kaWZpZXI6bnVsbCxkcmF3aW5nSG9sZTohMSxwb2x5Z29uOm51bGwsY3JlYXRlRmVhdHVyZTpmdW5jdGlvbihhKXthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLmxvbixhLmxhdCk7dGhpcy5wb2ludD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTt0aGlzLmxpbmU9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhbdGhpcy5wb2ludC5nZW9tZXRyeV0pKTt0aGlzLnBvbHlnb249bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbdGhpcy5saW5lLmdlb21ldHJ5XSkpO3RoaXMuY2FsbGJhY2soImNyZWF0ZSIsW3RoaXMucG9pbnQuZ2VvbWV0cnksCnRoaXMuZ2V0U2tldGNoKCldKTt0aGlzLnBvaW50Lmdlb21ldHJ5LmNsZWFyQm91bmRzKCk7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5wb2x5Z29uLHRoaXMucG9pbnRdLHtzaWxlbnQ6ITB9KX0sYWRkUG9pbnQ6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuZHJhd2luZ0hvbGUmJnRoaXMuaG9sZU1vZGlmaWVyJiZ0aGlzLmV2dCYmdGhpcy5ldnRbdGhpcy5ob2xlTW9kaWZpZXJdKWZvcih2YXIgYj10aGlzLnBvaW50Lmdlb21ldHJ5LGM9dGhpcy5jb250cm9sLmxheWVyLmZlYXR1cmVzLGQsZT1jLmxlbmd0aC0xOzA8PWU7LS1lKWlmKGQ9Y1tlXS5nZW9tZXRyeSwoZCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbnx8ZCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKSYmZC5pbnRlcnNlY3RzKGIpKXtiPWNbZV07dGhpcy5jb250cm9sLmxheWVyLnJlbW92ZUZlYXR1cmVzKFtiXSx7c2lsZW50OiEwfSk7dGhpcy5jb250cm9sLmxheWVyLmV2ZW50cy5yZWdpc3RlclByaW9yaXR5KCJza2V0Y2hjb21wbGV0ZSIsCnRoaXMsdGhpcy5maW5hbGl6ZUludGVyaW9yUmluZyk7dGhpcy5jb250cm9sLmxheWVyLmV2ZW50cy5yZWdpc3RlclByaW9yaXR5KCJza2V0Y2htb2RpZmllZCIsdGhpcyx0aGlzLmVuZm9yY2VUb3BvbG9neSk7Yi5nZW9tZXRyeS5hZGRDb21wb25lbnQodGhpcy5saW5lLmdlb21ldHJ5KTt0aGlzLnBvbHlnb249Yjt0aGlzLmRyYXdpbmdIb2xlPSEwO2JyZWFrfU9wZW5MYXllcnMuSGFuZGxlci5QYXRoLnByb3RvdHlwZS5hZGRQb2ludC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldEN1cnJlbnRQb2ludEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aC0yfSxlbmZvcmNlVG9wb2xvZ3k6ZnVuY3Rpb24oYSl7YT1hLnZlcnRleDt2YXIgYj10aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50czt0aGlzLnBvbHlnb24uZ2VvbWV0cnkuaW50ZXJzZWN0cyhhKXx8KGI9YltiLmxlbmd0aC0zXSxhLng9Yi54LGEueT1iLnkpfSxmaW5pc2hHZW9tZXRyeTpmdW5jdGlvbigpe3RoaXMubGluZS5nZW9tZXRyeS5yZW1vdmVDb21wb25lbnQodGhpcy5saW5lLmdlb21ldHJ5LmNvbXBvbmVudHNbdGhpcy5saW5lLmdlb21ldHJ5LmNvbXBvbmVudHMubGVuZ3RoLQoyXSk7dGhpcy5yZW1vdmVQb2ludCgpO3RoaXMuZmluYWxpemUoKX0sZmluYWxpemVJbnRlcmlvclJpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxpbmUuZ2VvbWV0cnksYj0wIT09YS5nZXRBcmVhKCk7aWYoYil7Zm9yKHZhciBjPXRoaXMucG9seWdvbi5nZW9tZXRyeS5jb21wb25lbnRzLGQ9Yy5sZW5ndGgtMjswPD1kOy0tZClpZihhLmludGVyc2VjdHMoY1tkXSkpe2I9ITE7YnJlYWt9aWYoYilhOmZvcihkPWMubGVuZ3RoLTI7MDxkOy0tZClmb3IodmFyIGU9Y1tkXS5jb21wb25lbnRzLGY9MCxnPWUubGVuZ3RoO2Y8ZzsrK2YpaWYoYS5jb250YWluc1BvaW50KGVbZl0pKXtiPSExO2JyZWFrIGF9fWI/dGhpcy5wb2x5Z29uLnN0YXRlIT09T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQmJih0aGlzLnBvbHlnb24uc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5VUERBVEUpOnRoaXMucG9seWdvbi5nZW9tZXRyeS5yZW1vdmVDb21wb25lbnQoYSk7dGhpcy5yZXN0b3JlRmVhdHVyZSgpO3JldHVybiExfSwKY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5kcmF3aW5nSG9sZSYmKHRoaXMucG9seWdvbi5nZW9tZXRyeS5yZW1vdmVDb21wb25lbnQodGhpcy5saW5lLmdlb21ldHJ5KSx0aGlzLnJlc3RvcmVGZWF0dXJlKCEwKSk7cmV0dXJuIE9wZW5MYXllcnMuSGFuZGxlci5QYXRoLnByb3RvdHlwZS5jYW5jZWwuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZXN0b3JlRmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmNvbnRyb2wubGF5ZXIuZXZlbnRzLnVucmVnaXN0ZXIoInNrZXRjaGNvbXBsZXRlIix0aGlzLHRoaXMuZmluYWxpemVJbnRlcmlvclJpbmcpO3RoaXMuY29udHJvbC5sYXllci5ldmVudHMudW5yZWdpc3Rlcigic2tldGNobW9kaWZpZWQiLHRoaXMsdGhpcy5lbmZvcmNlVG9wb2xvZ3kpO3RoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXMoW3RoaXMucG9seWdvbl0se3NpbGVudDohMH0pO3RoaXMuY29udHJvbC5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5wb2x5Z29uXSx7c2lsZW50OiEwfSk7dGhpcy5kcmF3aW5nSG9sZT0KITE7YXx8dGhpcy5jb250cm9sLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoInNrZXRjaGNvbXBsZXRlIix7ZmVhdHVyZTp0aGlzLnBvbHlnb259KX0sZGVzdHJveUZlYXR1cmU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5IYW5kbGVyLlBhdGgucHJvdG90eXBlLmRlc3Ryb3lGZWF0dXJlLmNhbGwodGhpcyxhKTt0aGlzLnBvbHlnb249bnVsbH0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oKXt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMucG9seWdvbix0aGlzLnN0eWxlKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMucG9pbnQsdGhpcy5zdHlsZSl9LGdldFNrZXRjaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvbHlnb259LGdldEdlb21ldHJ5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wb2x5Z29uJiZ0aGlzLnBvbHlnb24uZ2VvbWV0cnk7YSYmdGhpcy5tdWx0aSYmKGE9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKFthXSkpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuUG9seWdvbiJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuR2VvbG9jYXRlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtnZW9sb2NhdGlvbjpudWxsLGF2YWlsYWJsZToiZ2VvbG9jYXRpb24iaW4gbmF2aWdhdG9yLGJpbmQ6ITAsd2F0Y2g6ITEsZ2VvbG9jYXRpb25PcHRpb25zOm51bGwsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5hdmFpbGFibGUmJiF0aGlzLmdlb2xvY2F0aW9uJiYodGhpcy5nZW9sb2NhdGlvbj1uYXZpZ2F0b3IuZ2VvbG9jYXRpb24pO3JldHVybiB0aGlzLmdlb2xvY2F0aW9uP09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpPyh0aGlzLndhdGNoP3RoaXMud2F0Y2hJZD10aGlzLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24oT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMuZ2VvbG9jYXRlLAp0aGlzKSxPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5mYWlsdXJlLHRoaXMpLHRoaXMuZ2VvbG9jYXRpb25PcHRpb25zKTp0aGlzLmdldEN1cnJlbnRMb2NhdGlvbigpLCEwKTohMToodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2NhdGlvbnVuY2FwYWJsZSIpLCExKX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlJiZudWxsIT09dGhpcy53YXRjaElkJiZ0aGlzLmdlb2xvY2F0aW9uLmNsZWFyV2F0Y2godGhpcy53YXRjaElkKTtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2VvbG9jYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPShuZXcgT3BlbkxheWVycy5Mb25MYXQoYS5jb29yZHMubG9uZ2l0dWRlLGEuY29vcmRzLmxhdGl0dWRlKSkudHJhbnNmb3JtKG5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpLHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSk7dGhpcy5iaW5kJiYKdGhpcy5tYXAuc2V0Q2VudGVyKGIpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9jYXRpb251cGRhdGVkIix7cG9zaXRpb246YSxwb2ludDpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChiLmxvbixiLmxhdCl9KX0sZ2V0Q3VycmVudExvY2F0aW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXMuYWN0aXZlfHx0aGlzLndhdGNoKXJldHVybiExO3RoaXMuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLmdlb2xvY2F0ZSx0aGlzKSxPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5mYWlsdXJlLHRoaXMpLHRoaXMuZ2VvbG9jYXRpb25PcHRpb25zKTtyZXR1cm4hMH0sZmFpbHVyZTpmdW5jdGlvbihhKXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvY2F0aW9uZmFpbGVkIix7ZXJyb3I6YX0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuR2VvbG9jYXRlIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuSFRUUD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUHJvdG9jb2wse3VybDpudWxsLGhlYWRlcnM6bnVsbCxwYXJhbXM6bnVsbCxjYWxsYmFjazpudWxsLHNjb3BlOm51bGwscmVhZFdpdGhQT1NUOiExLHVwZGF0ZVdpdGhQT1NUOiExLGRlbGV0ZVdpdGhQT1NUOiExLHdpbGRjYXJkZWQ6ITEsc3JzSW5CQk9YOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7YT1hfHx7fTt0aGlzLnBhcmFtcz17fTt0aGlzLmhlYWRlcnM9e307T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIXRoaXMuZmlsdGVyVG9QYXJhbXMmJk9wZW5MYXllcnMuRm9ybWF0LlF1ZXJ5U3RyaW5nRmlsdGVyKXt2YXIgYj1uZXcgT3BlbkxheWVycy5Gb3JtYXQuUXVlcnlTdHJpbmdGaWx0ZXIoe3dpbGRjYXJkZWQ6dGhpcy53aWxkY2FyZGVkLHNyc0luQkJPWDp0aGlzLnNyc0luQkJPWH0pO3RoaXMuZmlsdGVyVG9QYXJhbXM9CmZ1bmN0aW9uKGEsZCl7cmV0dXJuIGIud3JpdGUoYSxkKX19fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5oZWFkZXJzPXRoaXMucGFyYW1zPW51bGw7T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKX0scmVhZDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPWF8fHt9O2EucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEucGFyYW1zLHRoaXMub3B0aW9ucy5wYXJhbXMpO2E9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx0aGlzLm9wdGlvbnMpO2EuZmlsdGVyJiZ0aGlzLmZpbHRlclRvUGFyYW1zJiYoYS5wYXJhbXM9dGhpcy5maWx0ZXJUb1BhcmFtcyhhLmZpbHRlcixhLnBhcmFtcykpO3ZhciBiPXZvaWQgMCE9PWEucmVhZFdpdGhQT1NUP2EucmVhZFdpdGhQT1NUOnRoaXMucmVhZFdpdGhQT1NULGM9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcXVlc3RUeXBlOiJyZWFkIn0pOwpiPyhiPWEuaGVhZGVyc3x8e30sYlsiQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsYy5wcml2PU9wZW5MYXllcnMuUmVxdWVzdC5QT1NUKHt1cmw6YS51cmwsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZVJlYWQsYyxhKSxkYXRhOk9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoYS5wYXJhbXMpLGhlYWRlcnM6Yn0pKTpjLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0LkdFVCh7dXJsOmEudXJsLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVSZWFkLGMsYSkscGFyYW1zOmEucGFyYW1zLGhlYWRlcnM6YS5oZWFkZXJzfSk7cmV0dXJuIGN9LGhhbmRsZVJlYWQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZVJlc3BvbnNlKGEsYil9LGNyZWF0ZTpmdW5jdGlvbihhLGIpe2I9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix0aGlzLm9wdGlvbnMpO3ZhciBjPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXFGZWF0dXJlczphLApyZXF1ZXN0VHlwZToiY3JlYXRlIn0pO2MucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOmIudXJsLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVDcmVhdGUsYyxiKSxoZWFkZXJzOmIuaGVhZGVycyxkYXRhOnRoaXMuZm9ybWF0LndyaXRlKGEpfSk7cmV0dXJuIGN9LGhhbmRsZUNyZWF0ZTpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlUmVzcG9uc2UoYSxiKX0sdXBkYXRlOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLnVybHx8YS51cmx8fHRoaXMub3B0aW9ucy51cmwrIi8iK2EuZmlkO2I9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix0aGlzLm9wdGlvbnMpO3ZhciBkPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXFGZWF0dXJlczphLHJlcXVlc3RUeXBlOiJ1cGRhdGUifSk7ZC5wcml2PU9wZW5MYXllcnMuUmVxdWVzdFt0aGlzLnVwZGF0ZVdpdGhQT1NUPyJQT1NUIjoiUFVUIl0oe3VybDpjLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVVcGRhdGUsCmQsYiksaGVhZGVyczpiLmhlYWRlcnMsZGF0YTp0aGlzLmZvcm1hdC53cml0ZShhKX0pO3JldHVybiBkfSxoYW5kbGVVcGRhdGU6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZVJlc3BvbnNlKGEsYil9LCJkZWxldGUiOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLnVybHx8YS51cmx8fHRoaXMub3B0aW9ucy51cmwrIi8iK2EuZmlkO2I9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix0aGlzLm9wdGlvbnMpO3ZhciBkPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXFGZWF0dXJlczphLHJlcXVlc3RUeXBlOiJkZWxldGUifSksZT10aGlzLmRlbGV0ZVdpdGhQT1NUPyJQT1NUIjoiREVMRVRFIixjPXt1cmw6YyxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlRGVsZXRlLGQsYiksaGVhZGVyczpiLmhlYWRlcnN9O3RoaXMuZGVsZXRlV2l0aFBPU1QmJihjLmRhdGE9dGhpcy5mb3JtYXQud3JpdGUoYSkpO2QucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3RbZV0oYyk7CnJldHVybiBkfSxoYW5kbGVEZWxldGU6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZVJlc3BvbnNlKGEsYil9LGhhbmRsZVJlc3BvbnNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5wcml2O2IuY2FsbGJhY2smJigyMDA8PWMuc3RhdHVzJiYzMDA+Yy5zdGF0dXM/KCJkZWxldGUiIT1hLnJlcXVlc3RUeXBlJiYoYS5mZWF0dXJlcz10aGlzLnBhcnNlRmVhdHVyZXMoYykpLGEuY29kZT1PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLlNVQ0NFU1MpOmEuY29kZT1PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLkZBSUxVUkUsYi5jYWxsYmFjay5jYWxsKGIuc2NvcGUsYSkpfSxwYXJzZUZlYXR1cmVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVzcG9uc2VYTUw7YiYmYi5kb2N1bWVudEVsZW1lbnR8fChiPWEucmVzcG9uc2VUZXh0KTtyZXR1cm4hYnx8MD49Yi5sZW5ndGg/bnVsbDp0aGlzLmZvcm1hdC5yZWFkKGIpfSxjb21taXQ6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2Zvcih2YXIgYj0KYS5mZWF0dXJlcz9hLmZlYXR1cmVzLmxlbmd0aDowLGM9QXJyYXkoYiksZT0wO2U8YjsrK2UpY1tlXT1hLmZlYXR1cmVzW2VdLmZpZDtyLmluc2VydElkcz1jO2QuYXBwbHkodGhpcyxbYV0pfWZ1bmN0aW9uIGQoYSl7dGhpcy5jYWxsVXNlckNhbGxiYWNrKGEsYik7cT1xJiZhLnN1Y2Nlc3MoKTtmKys7Zj49biYmYi5jYWxsYmFjayYmKHIuY29kZT1xP09wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuU1VDQ0VTUzpPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLkZBSUxVUkUsYi5jYWxsYmFjay5hcHBseShiLnNjb3BlLFtyXSkpfWI9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix0aGlzLm9wdGlvbnMpO3ZhciBlPVtdLGY9MCxnPXt9O2dbT3BlbkxheWVycy5TdGF0ZS5JTlNFUlRdPVtdO2dbT3BlbkxheWVycy5TdGF0ZS5VUERBVEVdPVtdO2dbT3BlbkxheWVycy5TdGF0ZS5ERUxFVEVdPVtdO2Zvcih2YXIgaCxrLGw9W10sbT0wLHA9YS5sZW5ndGg7bTxwOysrbSlpZihoPQphW21dLGs9Z1toLnN0YXRlXSlrLnB1c2goaCksbC5wdXNoKGgpO3ZhciBuPSgwPGdbT3BlbkxheWVycy5TdGF0ZS5JTlNFUlRdLmxlbmd0aD8xOjApK2dbT3BlbkxheWVycy5TdGF0ZS5VUERBVEVdLmxlbmd0aCtnW09wZW5MYXllcnMuU3RhdGUuREVMRVRFXS5sZW5ndGgscT0hMCxyPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXFGZWF0dXJlczpsfSk7aD1nW09wZW5MYXllcnMuU3RhdGUuSU5TRVJUXTswPGgubGVuZ3RoJiZlLnB1c2godGhpcy5jcmVhdGUoaCxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7Y2FsbGJhY2s6YyxzY29wZTp0aGlzfSxiLmNyZWF0ZSkpKTtoPWdbT3BlbkxheWVycy5TdGF0ZS5VUERBVEVdO2ZvcihtPWgubGVuZ3RoLTE7MDw9bTstLW0pZS5wdXNoKHRoaXMudXBkYXRlKGhbbV0sT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2NhbGxiYWNrOmQsc2NvcGU6dGhpc30sYi51cGRhdGUpKSk7aD1nW09wZW5MYXllcnMuU3RhdGUuREVMRVRFXTsKZm9yKG09aC5sZW5ndGgtMTswPD1tOy0tbSllLnB1c2godGhpc1siZGVsZXRlIl0oaFttXSxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7Y2FsbGJhY2s6ZCxzY29wZTp0aGlzfSxiWyJkZWxldGUiXSkpKTtyZXR1cm4gZX0sYWJvcnQ6ZnVuY3Rpb24oYSl7YSYmYS5wcml2LmFib3J0KCl9LGNhbGxVc2VyQ2FsbGJhY2s6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iW2EucmVxdWVzdFR5cGVdO2MmJmMuY2FsbGJhY2smJmMuY2FsbGJhY2suY2FsbChjLnNjb3BlLGEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlByb3RvY29sLkhUVFAifSk7T3BlbkxheWVycy5Db250cm9sLkRyYWdQYW49T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3R5cGU6T3BlbkxheWVycy5Db250cm9sLlRZUEVfVE9PTCxwYW5uZWQ6ITEsaW50ZXJ2YWw6MCxkb2N1bWVudERyYWc6ITEsa2luZXRpYzpudWxsLGVuYWJsZUtpbmV0aWM6ITAsa2luZXRpY0ludGVydmFsOjEwLGRyYXc6ZnVuY3Rpb24oKXtpZih0aGlzLmVuYWJsZUtpbmV0aWMmJk9wZW5MYXllcnMuS2luZXRpYyl7dmFyIGE9e2ludGVydmFsOnRoaXMua2luZXRpY0ludGVydmFsfTsib2JqZWN0Ij09PXR5cGVvZiB0aGlzLmVuYWJsZUtpbmV0aWMmJihhPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYSx0aGlzLmVuYWJsZUtpbmV0aWMpKTt0aGlzLmtpbmV0aWM9bmV3IE9wZW5MYXllcnMuS2luZXRpYyhhKX10aGlzLmhhbmRsZXI9bmV3IE9wZW5MYXllcnMuSGFuZGxlci5EcmFnKHRoaXMse21vdmU6dGhpcy5wYW5NYXAsZG9uZTp0aGlzLnBhbk1hcERvbmUsZG93bjp0aGlzLnBhbk1hcFN0YXJ0fSwKe2ludGVydmFsOnRoaXMuaW50ZXJ2YWwsZG9jdW1lbnREcmFnOnRoaXMuZG9jdW1lbnREcmFnfSl9LHBhbk1hcFN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5raW5ldGljJiZ0aGlzLmtpbmV0aWMuYmVnaW4oKX0scGFuTWFwOmZ1bmN0aW9uKGEpe3RoaXMua2luZXRpYyYmdGhpcy5raW5ldGljLnVwZGF0ZShhKTt0aGlzLnBhbm5lZD0hMDt0aGlzLm1hcC5wYW4odGhpcy5oYW5kbGVyLmxhc3QueC1hLngsdGhpcy5oYW5kbGVyLmxhc3QueS1hLnkse2RyYWdnaW5nOiEwLGFuaW1hdGU6ITF9KX0scGFuTWFwRG9uZTpmdW5jdGlvbihhKXtpZih0aGlzLnBhbm5lZCl7dmFyIGI9bnVsbDt0aGlzLmtpbmV0aWMmJihiPXRoaXMua2luZXRpYy5lbmQoYSkpO3RoaXMubWFwLnBhbih0aGlzLmhhbmRsZXIubGFzdC54LWEueCx0aGlzLmhhbmRsZXIubGFzdC55LWEueSx7ZHJhZ2dpbmc6ISFiLGFuaW1hdGU6ITF9KTtpZihiKXt2YXIgYz10aGlzO3RoaXMua2luZXRpYy5tb3ZlKGIsZnVuY3Rpb24oYSxiLApmKXtjLm1hcC5wYW4oYSxiLHtkcmFnZ2luZzohZixhbmltYXRlOiExfSl9KX10aGlzLnBhbm5lZD0hMX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5EcmFnUGFuIn0pO09wZW5MYXllcnMuQ29udHJvbC5QaW5jaFpvb209T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3R5cGU6T3BlbkxheWVycy5Db250cm9sLlRZUEVfVE9PTCxwaW5jaE9yaWdpbjpudWxsLGN1cnJlbnRDZW50ZXI6bnVsbCxhdXRvQWN0aXZhdGU6ITAscHJlc2VydmVDZW50ZXI6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuaGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLlBpbmNoKHRoaXMse3N0YXJ0OnRoaXMucGluY2hTdGFydCxtb3ZlOnRoaXMucGluY2hNb3ZlLGRvbmU6dGhpcy5waW5jaERvbmV9LHRoaXMuaGFuZGxlck9wdGlvbnMpfSxwaW5jaFN0YXJ0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5wcmVzZXJ2ZUNlbnRlcj90aGlzLm1hcC5nZXRQaXhlbEZyb21Mb25MYXQodGhpcy5tYXAuZ2V0Q2VudGVyKCkpOmEueHk7dGhpcy5jdXJyZW50Q2VudGVyPQp0aGlzLnBpbmNoT3JpZ2luPWN9LHBpbmNoTW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjPWIuc2NhbGUsZD10aGlzLm1hcC5sYXllckNvbnRhaW5lck9yaWdpblB4LGU9dGhpcy5waW5jaE9yaWdpbixmPXRoaXMucHJlc2VydmVDZW50ZXI/dGhpcy5tYXAuZ2V0UGl4ZWxGcm9tTG9uTGF0KHRoaXMubWFwLmdldENlbnRlcigpKTphLnh5LGc9TWF0aC5yb3VuZChkLngrZi54LWUueCsoYy0xKSooZC54LWUueCkpLGQ9TWF0aC5yb3VuZChkLnkrZi55LWUueSsoYy0xKSooZC55LWUueSkpO3RoaXMubWFwLmFwcGx5VHJhbnNmb3JtKGcsZCxjKTt0aGlzLmN1cnJlbnRDZW50ZXI9Zn0scGluY2hEb25lOmZ1bmN0aW9uKGEsYixjKXt0aGlzLm1hcC5hcHBseVRyYW5zZm9ybSgpO2E9dGhpcy5tYXAuZ2V0Wm9vbUZvclJlc29sdXRpb24odGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpL2Muc2NhbGUsITApO2lmKGEhPT10aGlzLm1hcC5nZXRab29tKCl8fCF0aGlzLmN1cnJlbnRDZW50ZXIuZXF1YWxzKHRoaXMucGluY2hPcmlnaW4pKXtiPQp0aGlzLm1hcC5nZXRSZXNvbHV0aW9uRm9yWm9vbShhKTtjPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbCh0aGlzLnBpbmNoT3JpZ2luKTt2YXIgZD10aGlzLmN1cnJlbnRDZW50ZXIsZT10aGlzLm1hcC5nZXRTaXplKCk7Yy5sb24rPWIqKGUudy8yLWQueCk7Yy5sYXQtPWIqKGUuaC8yLWQueSk7dGhpcy5tYXAuZGl2LmNsaWVudFdpZHRoPXRoaXMubWFwLmRpdi5jbGllbnRXaWR0aDt0aGlzLm1hcC5zZXRDZW50ZXIoYyxhKX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5QaW5jaFpvb20ifSk7T3BlbkxheWVycy5IYW5kbGVyLkNsaWNrPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtkZWxheTozMDAsc2luZ2xlOiEwLCJkb3VibGUiOiExLHBpeGVsVG9sZXJhbmNlOjAsZGJsY2xpY2tUb2xlcmFuY2U6MTMsc3RvcFNpbmdsZTohMSxzdG9wRG91YmxlOiExLHRpbWVySWQ6bnVsbCxkb3duOm51bGwsbGFzdDpudWxsLGZpcnN0Om51bGwscmlnaHRjbGlja1RpbWVySWQ6bnVsbCx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnRUb3VjaCgpO3RoaXMuZG93bj10aGlzLmdldEV2ZW50SW5mbyhhKTt0aGlzLmxhc3Q9dGhpcy5nZXRFdmVudEluZm8oYSk7cmV0dXJuITB9LHRvdWNobW92ZTpmdW5jdGlvbihhKXt0aGlzLmxhc3Q9dGhpcy5nZXRFdmVudEluZm8oYSk7cmV0dXJuITB9LHRvdWNoZW5kOmZ1bmN0aW9uKGEpe3RoaXMuZG93biYmKGEueHk9dGhpcy5sYXN0Lnh5LGEubGFzdFRvdWNoZXM9dGhpcy5sYXN0LnRvdWNoZXMsdGhpcy5oYW5kbGVTaW5nbGUoYSksCnRoaXMuZG93bj1udWxsKTtyZXR1cm4hMH0sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe3RoaXMuZG93bj10aGlzLmdldEV2ZW50SW5mbyhhKTt0aGlzLmxhc3Q9dGhpcy5nZXRFdmVudEluZm8oYSk7cmV0dXJuITB9LG1vdXNldXA6ZnVuY3Rpb24oYSl7dmFyIGI9ITA7dGhpcy5jaGVja01vZGlmaWVycyhhKSYmKHRoaXMuY29udHJvbC5oYW5kbGVSaWdodENsaWNrcyYmT3BlbkxheWVycy5FdmVudC5pc1JpZ2h0Q2xpY2soYSkpJiYoYj10aGlzLnJpZ2h0Y2xpY2soYSkpO3JldHVybiBifSxyaWdodGNsaWNrOmZ1bmN0aW9uKGEpe2lmKHRoaXMucGFzc2VzVG9sZXJhbmNlKGEpKXtpZihudWxsIT10aGlzLnJpZ2h0Y2xpY2tUaW1lcklkKXJldHVybiB0aGlzLmNsZWFyVGltZXIoKSx0aGlzLmNhbGxiYWNrKCJkYmxyaWdodGNsaWNrIixbYV0pLCF0aGlzLnN0b3BEb3VibGU7YT10aGlzWyJkb3VibGUiXT9PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGEpOnRoaXMuY2FsbGJhY2soInJpZ2h0Y2xpY2siLApbYV0pO2E9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMuZGVsYXllZFJpZ2h0Q2FsbCx0aGlzLGEpO3RoaXMucmlnaHRjbGlja1RpbWVySWQ9d2luZG93LnNldFRpbWVvdXQoYSx0aGlzLmRlbGF5KX1yZXR1cm4hdGhpcy5zdG9wU2luZ2xlfSxkZWxheWVkUmlnaHRDYWxsOmZ1bmN0aW9uKGEpe3RoaXMucmlnaHRjbGlja1RpbWVySWQ9bnVsbDthJiZ0aGlzLmNhbGxiYWNrKCJyaWdodGNsaWNrIixbYV0pfSxjbGljazpmdW5jdGlvbihhKXt0aGlzLmxhc3R8fCh0aGlzLmxhc3Q9dGhpcy5nZXRFdmVudEluZm8oYSkpO3RoaXMuaGFuZGxlU2luZ2xlKGEpO3JldHVybiF0aGlzLnN0b3BTaW5nbGV9LGRibGNsaWNrOmZ1bmN0aW9uKGEpe3RoaXMuaGFuZGxlRG91YmxlKGEpO3JldHVybiF0aGlzLnN0b3BEb3VibGV9LGhhbmRsZURvdWJsZTpmdW5jdGlvbihhKXt0aGlzLnBhc3Nlc0RibGNsaWNrVG9sZXJhbmNlKGEpJiYodGhpc1siZG91YmxlIl0mJnRoaXMuY2FsbGJhY2soImRibGNsaWNrIiwKW2FdKSx0aGlzLmNsZWFyVGltZXIoKSl9LGhhbmRsZVNpbmdsZTpmdW5jdGlvbihhKXt0aGlzLnBhc3Nlc1RvbGVyYW5jZShhKSYmKG51bGwhPXRoaXMudGltZXJJZD8odGhpcy5sYXN0LnRvdWNoZXMmJjE9PT10aGlzLmxhc3QudG91Y2hlcy5sZW5ndGgmJih0aGlzWyJkb3VibGUiXSYmT3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKSx0aGlzLmhhbmRsZURvdWJsZShhKSksdGhpcy5sYXN0LnRvdWNoZXMmJjI9PT10aGlzLmxhc3QudG91Y2hlcy5sZW5ndGh8fHRoaXMuY2xlYXJUaW1lcigpKToodGhpcy5maXJzdD10aGlzLmdldEV2ZW50SW5mbyhhKSxhPXRoaXMuc2luZ2xlP09wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYSk6bnVsbCx0aGlzLnF1ZXVlUG90ZW50aWFsQ2xpY2soYSkpKX0scXVldWVQb3RlbnRpYWxDbGljazpmdW5jdGlvbihhKXt0aGlzLnRpbWVySWQ9d2luZG93LnNldFRpbWVvdXQoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMuZGVsYXllZENhbGwsCnRoaXMsYSksdGhpcy5kZWxheSl9LHBhc3Nlc1RvbGVyYW5jZTpmdW5jdGlvbihhKXt2YXIgYj0hMDtpZihudWxsIT10aGlzLnBpeGVsVG9sZXJhbmNlJiZ0aGlzLmRvd24mJnRoaXMuZG93bi54eSYmKGI9dGhpcy5waXhlbFRvbGVyYW5jZT49dGhpcy5kb3duLnh5LmRpc3RhbmNlVG8oYS54eSkpJiZ0aGlzLnRvdWNoJiZ0aGlzLmRvd24udG91Y2hlcy5sZW5ndGg9PT10aGlzLmxhc3QudG91Y2hlcy5sZW5ndGgpe2E9MDtmb3IodmFyIGM9dGhpcy5kb3duLnRvdWNoZXMubGVuZ3RoO2E8YzsrK2EpaWYodGhpcy5nZXRUb3VjaERpc3RhbmNlKHRoaXMuZG93bi50b3VjaGVzW2FdLHRoaXMubGFzdC50b3VjaGVzW2FdKT50aGlzLnBpeGVsVG9sZXJhbmNlKXtiPSExO2JyZWFrfX1yZXR1cm4gYn0sZ2V0VG91Y2hEaXN0YW5jZTpmdW5jdGlvbihhLGIpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coYS5jbGllbnRYLWIuY2xpZW50WCwyKStNYXRoLnBvdyhhLmNsaWVudFktYi5jbGllbnRZLAoyKSl9LHBhc3Nlc0RibGNsaWNrVG9sZXJhbmNlOmZ1bmN0aW9uKGEpe2E9ITA7dGhpcy5kb3duJiZ0aGlzLmZpcnN0JiYoYT10aGlzLmRvd24ueHkuZGlzdGFuY2VUbyh0aGlzLmZpcnN0Lnh5KTw9dGhpcy5kYmxjbGlja1RvbGVyYW5jZSk7cmV0dXJuIGF9LGNsZWFyVGltZXI6ZnVuY3Rpb24oKXtudWxsIT10aGlzLnRpbWVySWQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCksdGhpcy50aW1lcklkPW51bGwpO251bGwhPXRoaXMucmlnaHRjbGlja1RpbWVySWQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucmlnaHRjbGlja1RpbWVySWQpLHRoaXMucmlnaHRjbGlja1RpbWVySWQ9bnVsbCl9LGRlbGF5ZWRDYWxsOmZ1bmN0aW9uKGEpe3RoaXMudGltZXJJZD1udWxsO2EmJnRoaXMuY2FsbGJhY2soImNsaWNrIixbYV0pfSxnZXRFdmVudEluZm86ZnVuY3Rpb24oYSl7dmFyIGI7aWYoYS50b3VjaGVzKXt2YXIgYz1hLnRvdWNoZXMubGVuZ3RoO2I9QXJyYXkoYyk7Zm9yKHZhciBkLAplPTA7ZTxjO2UrKylkPWEudG91Y2hlc1tlXSxiW2VdPXtjbGllbnRYOmQub2xDbGllbnRYLGNsaWVudFk6ZC5vbENsaWVudFl9fXJldHVybnt4eTphLnh5LHRvdWNoZXM6Yn19LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5jbGVhclRpbWVyKCksdGhpcy5sYXN0PXRoaXMuZmlyc3Q9dGhpcy5kb3duPW51bGwsYT0hMCk7cmV0dXJuIGF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuSGFuZGxlci5DbGljayJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuVG91Y2hOYXZpZ2F0aW9uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtkcmFnUGFuOm51bGwsZHJhZ1Bhbk9wdGlvbnM6bnVsbCxwaW5jaFpvb206bnVsbCxwaW5jaFpvb21PcHRpb25zOm51bGwsY2xpY2tIYW5kbGVyT3B0aW9uczpudWxsLGRvY3VtZW50RHJhZzohMSxhdXRvQWN0aXZhdGU6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzPXt9O09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmRyYWdQYW4mJnRoaXMuZHJhZ1Bhbi5kZXN0cm95KCk7dGhpcy5kcmFnUGFuPW51bGw7dGhpcy5waW5jaFpvb20mJih0aGlzLnBpbmNoWm9vbS5kZXN0cm95KCksZGVsZXRlIHRoaXMucGluY2hab29tKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk/KHRoaXMuZHJhZ1Bhbi5hY3RpdmF0ZSgpLHRoaXMuaGFuZGxlcnMuY2xpY2suYWN0aXZhdGUoKSx0aGlzLnBpbmNoWm9vbS5hY3RpdmF0ZSgpLCEwKTohMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpPyh0aGlzLmRyYWdQYW4uZGVhY3RpdmF0ZSgpLHRoaXMuaGFuZGxlcnMuY2xpY2suZGVhY3RpdmF0ZSgpLHRoaXMucGluY2hab29tLmRlYWN0aXZhdGUoKSwhMCk6ITF9LGRyYXc6ZnVuY3Rpb24oKXt2YXIgYT17Y2xpY2s6dGhpcy5kZWZhdWx0Q2xpY2ssZGJsY2xpY2s6dGhpcy5kZWZhdWx0RGJsQ2xpY2t9LGI9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7ImRvdWJsZSI6ITAsc3RvcERvdWJsZTohMCwKcGl4ZWxUb2xlcmFuY2U6Mn0sdGhpcy5jbGlja0hhbmRsZXJPcHRpb25zKTt0aGlzLmhhbmRsZXJzLmNsaWNrPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuQ2xpY2sodGhpcyxhLGIpO3RoaXMuZHJhZ1Bhbj1uZXcgT3BlbkxheWVycy5Db250cm9sLkRyYWdQYW4oT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7bWFwOnRoaXMubWFwLGRvY3VtZW50RHJhZzp0aGlzLmRvY3VtZW50RHJhZ30sdGhpcy5kcmFnUGFuT3B0aW9ucykpO3RoaXMuZHJhZ1Bhbi5kcmF3KCk7dGhpcy5waW5jaFpvb209bmV3IE9wZW5MYXllcnMuQ29udHJvbC5QaW5jaFpvb20oT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7bWFwOnRoaXMubWFwfSx0aGlzLnBpbmNoWm9vbU9wdGlvbnMpKX0sZGVmYXVsdENsaWNrOmZ1bmN0aW9uKGEpe2EubGFzdFRvdWNoZXMmJjI9PWEubGFzdFRvdWNoZXMubGVuZ3RoJiZ0aGlzLm1hcC56b29tT3V0KCl9LGRlZmF1bHREYmxDbGljazpmdW5jdGlvbihhKXt0aGlzLm1hcC56b29tVG8odGhpcy5tYXAuem9vbSsKMSxhLnh5KX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlRvdWNoTmF2aWdhdGlvbiJ9KTtPcGVuTGF5ZXJzLlByb3RvY29sLldGUy52MV8wXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlByb3RvY29sLldGUy52MSx7dmVyc2lvbjoiMS4wLjAiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLlRpbGVNYW5hZ2VyPU9wZW5MYXllcnMuQ2xhc3Moe2NhY2hlU2l6ZToyNTYsdGlsZXNQZXJGcmFtZToyLGZyYW1lRGVsYXk6MTYsbW92ZURlbGF5OjEwMCx6b29tRGVsYXk6MjAwLG1hcHM6bnVsbCx0aWxlUXVldWVJZDpudWxsLHRpbGVRdWV1ZTpudWxsLHRpbGVDYWNoZTpudWxsLHRpbGVDYWNoZUluZGV4Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5tYXBzPVtdO3RoaXMudGlsZVF1ZXVlSWQ9e307dGhpcy50aWxlUXVldWU9e307dGhpcy50aWxlQ2FjaGU9e307dGhpcy50aWxlQ2FjaGVJbmRleD1bXX0sYWRkTWFwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9kZXN0cm95ZWQmJk9wZW5MYXllcnMuTGF5ZXIuR3JpZCl7dGhpcy5tYXBzLnB1c2goYSk7dGhpcy50aWxlUXVldWVbYS5pZF09W107Zm9yKHZhciBiPTAsYz1hLmxheWVycy5sZW5ndGg7YjxjOysrYil0aGlzLmFkZExheWVyKHtsYXllcjphLmxheWVyc1tiXX0pOwphLmV2ZW50cy5vbih7bW92ZTp0aGlzLm1vdmUsem9vbWVuZDp0aGlzLnpvb21FbmQsY2hhbmdlbGF5ZXI6dGhpcy5jaGFuZ2VMYXllcixhZGRsYXllcjp0aGlzLmFkZExheWVyLHByZXJlbW92ZWxheWVyOnRoaXMucmVtb3ZlTGF5ZXIsc2NvcGU6dGhpc30pfX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9kZXN0cm95ZWQmJk9wZW5MYXllcnMuTGF5ZXIuR3JpZCl7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbGVRdWV1ZUlkW2EuaWRdKTtpZihhLmxheWVycylmb3IodmFyIGI9MCxjPWEubGF5ZXJzLmxlbmd0aDtiPGM7KytiKXRoaXMucmVtb3ZlTGF5ZXIoe2xheWVyOmEubGF5ZXJzW2JdfSk7YS5ldmVudHMmJmEuZXZlbnRzLnVuKHttb3ZlOnRoaXMubW92ZSx6b29tZW5kOnRoaXMuem9vbUVuZCxjaGFuZ2VsYXllcjp0aGlzLmNoYW5nZUxheWVyLGFkZGxheWVyOnRoaXMuYWRkTGF5ZXIscHJlcmVtb3ZlbGF5ZXI6dGhpcy5yZW1vdmVMYXllcixzY29wZTp0aGlzfSk7CmRlbGV0ZSB0aGlzLnRpbGVRdWV1ZVthLmlkXTtkZWxldGUgdGhpcy50aWxlUXVldWVJZFthLmlkXTtPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLm1hcHMsYSl9fSxtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMudXBkYXRlVGltZW91dChhLm9iamVjdCx0aGlzLm1vdmVEZWxheSwhMCl9LHpvb21FbmQ6ZnVuY3Rpb24oYSl7dGhpcy51cGRhdGVUaW1lb3V0KGEub2JqZWN0LHRoaXMuem9vbURlbGF5KX0sY2hhbmdlTGF5ZXI6ZnVuY3Rpb24oYSl7InZpc2liaWxpdHkiIT09YS5wcm9wZXJ0eSYmInBhcmFtcyIhPT1hLnByb3BlcnR5fHx0aGlzLnVwZGF0ZVRpbWVvdXQoYS5vYmplY3QsMCl9LGFkZExheWVyOmZ1bmN0aW9uKGEpe2E9YS5sYXllcjtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5HcmlkKXthLmV2ZW50cy5vbih7YWRkdGlsZTp0aGlzLmFkZFRpbGUscmV0aWxlOnRoaXMuY2xlYXJUaWxlUXVldWUsc2NvcGU6dGhpc30pO3ZhciBiLGMsZDtmb3IoYj1hLmdyaWQubGVuZ3RoLQoxOzA8PWI7LS1iKWZvcihjPWEuZ3JpZFtiXS5sZW5ndGgtMTswPD1jOy0tYylkPWEuZ3JpZFtiXVtjXSx0aGlzLmFkZFRpbGUoe3RpbGU6ZH0pLGQudXJsJiYhZC5pbWdEaXYmJnRoaXMubWFuYWdlVGlsZUNhY2hlKHtvYmplY3Q6ZH0pfX0scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24oYSl7YT1hLmxheWVyO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLkdyaWQmJih0aGlzLmNsZWFyVGlsZVF1ZXVlKHtvYmplY3Q6YX0pLGEuZXZlbnRzJiZhLmV2ZW50cy51bih7YWRkdGlsZTp0aGlzLmFkZFRpbGUscmV0aWxlOnRoaXMuY2xlYXJUaWxlUXVldWUsc2NvcGU6dGhpc30pLGEuZ3JpZCkpe3ZhciBiLGMsZDtmb3IoYj1hLmdyaWQubGVuZ3RoLTE7MDw9YjstLWIpZm9yKGM9YS5ncmlkW2JdLmxlbmd0aC0xOzA8PWM7LS1jKWQ9YS5ncmlkW2JdW2NdLHRoaXMudW5sb2FkVGlsZSh7b2JqZWN0OmR9KX19LHVwZGF0ZVRpbWVvdXQ6ZnVuY3Rpb24oYSxiLGMpe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aWxlUXVldWVJZFthLmlkXSk7CnZhciBkPXRoaXMudGlsZVF1ZXVlW2EuaWRdO2lmKCFjfHxkLmxlbmd0aCl0aGlzLnRpbGVRdWV1ZUlkW2EuaWRdPXdpbmRvdy5zZXRUaW1lb3V0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe3RoaXMuZHJhd1RpbGVzRnJvbVF1ZXVlKGEpO2QubGVuZ3RoJiZ0aGlzLnVwZGF0ZVRpbWVvdXQoYSx0aGlzLmZyYW1lRGVsYXkpfSx0aGlzKSxiKX0sYWRkVGlsZTpmdW5jdGlvbihhKXtpZihhLnRpbGUgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UpYS50aWxlLmV2ZW50cy5vbih7YmVmb3JlZHJhdzp0aGlzLnF1ZXVlVGlsZURyYXcsYmVmb3JlbG9hZDp0aGlzLm1hbmFnZVRpbGVDYWNoZSxsb2FkZW5kOnRoaXMuYWRkVG9DYWNoZSx1bmxvYWQ6dGhpcy51bmxvYWRUaWxlLHNjb3BlOnRoaXN9KTtlbHNlIHRoaXMucmVtb3ZlTGF5ZXIoe2xheWVyOmEudGlsZS5sYXllcn0pfSx1bmxvYWRUaWxlOmZ1bmN0aW9uKGEpe2E9YS5vYmplY3Q7YS5ldmVudHMudW4oe2JlZm9yZWRyYXc6dGhpcy5xdWV1ZVRpbGVEcmF3LApiZWZvcmVsb2FkOnRoaXMubWFuYWdlVGlsZUNhY2hlLGxvYWRlbmQ6dGhpcy5hZGRUb0NhY2hlLHVubG9hZDp0aGlzLnVubG9hZFRpbGUsc2NvcGU6dGhpc30pO09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMudGlsZVF1ZXVlW2EubGF5ZXIubWFwLmlkXSxhKX0scXVldWVUaWxlRHJhdzpmdW5jdGlvbihhKXthPWEub2JqZWN0O3ZhciBiPSExLGM9YS5sYXllcixkPWMuZ2V0VVJMKGEuYm91bmRzKSxlPXRoaXMudGlsZUNhY2hlW2RdO2UmJiJvbFRpbGVJbWFnZSIhPT1lLmNsYXNzTmFtZSYmKGRlbGV0ZSB0aGlzLnRpbGVDYWNoZVtkXSxPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnRpbGVDYWNoZUluZGV4LGQpLGU9bnVsbCk7IWMudXJsfHwhYy5hc3luYyYmZXx8KGI9dGhpcy50aWxlUXVldWVbYy5tYXAuaWRdLH5PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihiLGEpfHxiLnB1c2goYSksYj0hMCk7cmV0dXJuIWJ9LGRyYXdUaWxlc0Zyb21RdWV1ZTpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy50aWxlUXVldWVbYS5pZF0sYz10aGlzLnRpbGVzUGVyRnJhbWU7Zm9yKGE9YS56b29tVHdlZW4mJmEuem9vbVR3ZWVuLnBsYXlpbmc7IWEmJmIubGVuZ3RoJiZjOyliLnNoaWZ0KCkuZHJhdyghMCksLS1jfSxtYW5hZ2VUaWxlQ2FjaGU6ZnVuY3Rpb24oYSl7YT1hLm9iamVjdDt2YXIgYj10aGlzLnRpbGVDYWNoZVthLnVybF07YiYmKGIucGFyZW50Tm9kZSYmT3BlbkxheWVycy5FbGVtZW50Lmhhc0NsYXNzKGIucGFyZW50Tm9kZSwib2xCYWNrQnVmZmVyIikmJihiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYi5pZD1udWxsKSxiLnBhcmVudE5vZGV8fChiLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiIsYi5zdHlsZS5vcGFjaXR5PTAsYS5zZXRJbWFnZShiKSxPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnRpbGVDYWNoZUluZGV4LGEudXJsKSx0aGlzLnRpbGVDYWNoZUluZGV4LnB1c2goYS51cmwpKSl9LGFkZFRvQ2FjaGU6ZnVuY3Rpb24oYSl7YT1hLm9iamVjdDsKdGhpcy50aWxlQ2FjaGVbYS51cmxdfHxPcGVuTGF5ZXJzLkVsZW1lbnQuaGFzQ2xhc3MoYS5pbWdEaXYsIm9sSW1hZ2VMb2FkRXJyb3IiKXx8KHRoaXMudGlsZUNhY2hlSW5kZXgubGVuZ3RoPj10aGlzLmNhY2hlU2l6ZSYmKGRlbGV0ZSB0aGlzLnRpbGVDYWNoZVt0aGlzLnRpbGVDYWNoZUluZGV4WzBdXSx0aGlzLnRpbGVDYWNoZUluZGV4LnNoaWZ0KCkpLHRoaXMudGlsZUNhY2hlW2EudXJsXT1hLmltZ0Rpdix0aGlzLnRpbGVDYWNoZUluZGV4LnB1c2goYS51cmwpKX0sY2xlYXJUaWxlUXVldWU6ZnVuY3Rpb24oYSl7YT1hLm9iamVjdDtmb3IodmFyIGI9dGhpcy50aWxlUXVldWVbYS5tYXAuaWRdLGM9Yi5sZW5ndGgtMTswPD1jOy0tYyliW2NdLmxheWVyPT09YSYmYi5zcGxpY2UoYywxKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLm1hcHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy5yZW1vdmVNYXAodGhpcy5tYXBzW2FdKTt0aGlzLnRpbGVDYWNoZUluZGV4PXRoaXMudGlsZUNhY2hlPQp0aGlzLnRpbGVRdWV1ZUlkPXRoaXMudGlsZVF1ZXVlPXRoaXMubWFwcz1udWxsO3RoaXMuX2Rlc3Ryb3llZD0hMH19KTsK",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 16:14:12 GMT",
                    "Content-Length": "342327",
                    "Date": "Fri, 07 Nov 2014 16:14:12 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}