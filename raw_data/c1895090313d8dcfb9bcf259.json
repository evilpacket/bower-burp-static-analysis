{
    "url": "http://localhost:9999/charbelrami/material-jekyll/bower_components/platform/platform.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Link manipulation (DOM-based)",
    "issueType": 5246976,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based link manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a navigation target within the current page, such as a clickable link or the submission URL of a form. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the target of links within the response. An attacker may be able to leverage this to perform various attacks, including:<ul><li>Causing the user to redirect to an arbitrary external URL, to facilitate a phishing attack.</li><li>Causing the user to submit sensitive form data to a server controlled by the attacker.</li><li>Causing the user to perform an unintended action within the application, by changing the file or query string associated with a link.</li><li>Bypassing browser anti-XSS defenses by injecting on-site links containing XSS exploits, since browser anti-XSS defenses typically do not operate on on-site links.</li></ul>",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based link manipulation vulnerabilities is not to dynamically set the target URLs of links or forms using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a link target. In general, this is best achieved by using a whitelist of URLs that are permitted link targets, and strictly validating the target against this list before setting the link target.",
    "issueDetail": "The application may be vulnerable to DOM-based link manipulation. Data is read from <b>the 'baseURI' property of a DOM element</b> and written to <b>the 'href' property of a DOM element</b> via the following statement:<ul><li>b.href=document.baseURI,a.head.appendChild(b)</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/charbelrami/material-jekyll/bower_components/platform/platform.js",
                "path": "/charbelrami/material-jekyll/bower_components/platform/platform.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9jaGFyYmVscmFtaS9tYXRlcmlhbC1qZWt5bGwvYm93ZXJfY29tcG9uZW50cy9wbGF0Zm9ybS9wbGF0Zm9ybS5qcyBIVFRQLzEuMQ0KSG9zdDogbG9jYWxob3N0Ojk5OTkNCg0K",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTMwMjMxDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBGcmksIDA3IE5vdiAyMDE0IDA5OjI2OjQyIEdNVA0KTGFzdC1Nb2RpZmllZDogRnJpLCAwNyBOb3YgMjAxNCAwOToyNjo0MCBHTVQNCg0KLyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbjogMC40LjIKCndpbmRvdy5QbGF0Zm9ybT13aW5kb3cuUGxhdGZvcm18fHt9LHdpbmRvdy5sb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LGZ1bmN0aW9uKGEpe3ZhciBiPWEuZmxhZ3N8fHt9O2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9IiksYVswXSYmKGJbYVswXV09YVsxXXx8ITApfSk7dmFyIGM9ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0W3NyYyo9InBsYXRmb3JtLmpzIl0nKTtpZihjKWZvcih2YXIgZCxlPWMuYXR0cmlidXRlcyxmPTA7ZjxlLmxlbmd0aDtmKyspZD1lW2ZdLCJzcmMiIT09ZC5uYW1lJiYoYltkLm5hbWVdPWQudmFsdWV8fCEwKTtiLmxvZyYmYi5sb2cuc3BsaXQoIiwiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3dpbmRvdy5sb2dGbGFnc1thXT0hMH0pLGIuc2hhZG93PWIuc2hhZG93fHxiLnNoYWRvd2RvbXx8Yi5wb2x5ZmlsbCxiLnNoYWRvdz0ibmF0aXZlIj09PWIuc2hhZG93PyExOmIuc2hhZG93fHwhSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QsYi5zaGFkb3cmJmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInNjcmlwdCIpLmxlbmd0aD4xJiZjb25zb2xlLmxvZygiV2FybmluZzogcGxhdGZvcm0uanMgaXMgbm90IHRoZSBmaXJzdCBzY3JpcHQgb24gdGhlIHBhZ2UuIFNlZSBodHRwOi8vd3d3LnBvbHltZXItcHJvamVjdC5vcmcvZG9jcy9zdGFydC9wbGF0Zm9ybS5odG1sI3NldHVwIGZvciBkZXRhaWxzLiIpLGIucmVnaXN0ZXImJih3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LHdpbmRvdy5DdXN0b21FbGVtZW50cy5mbGFncy5yZWdpc3Rlcj1iLnJlZ2lzdGVyKSxiLmltcG9ydHMmJih3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LHdpbmRvdy5IVE1MSW1wb3J0cy5mbGFncy5pbXBvcnRzPWIuaW1wb3J0cyksYS5mbGFncz1ifShQbGF0Zm9ybSksInVuZGVmaW5lZCI9PXR5cGVvZiBXZWFrTWFwJiYhZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1EYXRlLm5vdygpJTFlOSxjPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYisrICsiX18iKX07Yy5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihiLGMpe3ZhciBkPWJbdGhpcy5uYW1lXTtyZXR1cm4gZCYmZFswXT09PWI/ZFsxXT1jOmEoYix0aGlzLm5hbWUse3ZhbHVlOltiLGNdLHdyaXRhYmxlOiEwfSksdGhpc30sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybihiPWFbdGhpcy5uYW1lXSkmJmJbMF09PT1hP2JbMV06dm9pZCAwfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMubmFtZV07aWYoIWIpcmV0dXJuITE7dmFyIGM9YlswXT09PWE7cmV0dXJuIGJbMF09YlsxXT12b2lkIDAsY30saGFzOmZ1bmN0aW9uKGEpe3ZhciBiPWFbdGhpcy5uYW1lXTtyZXR1cm4gYj9iWzBdPT09YTohMX19LHdpbmRvdy5XZWFrTWFwPWN9KCksUGxhdGZvcm0uZmxhZ3Muc2hhZG93PyghZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtmdW5jdGlvbiBhKGEpe2I9YX1pZigiZnVuY3Rpb24iIT10eXBlb2YgT2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBBcnJheS5vYnNlcnZlKXJldHVybiExO3ZhciBiPVtdLGM9e30sZD1bXTtyZXR1cm4gT2JqZWN0Lm9ic2VydmUoYyxhKSxBcnJheS5vYnNlcnZlKGQsYSksYy5pZD0xLGMuaWQ9MixkZWxldGUgYy5pZCxkLnB1c2goMSwyKSxkLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSw1IT09Yi5sZW5ndGg/ITE6ImFkZCIhPWJbMF0udHlwZXx8InVwZGF0ZSIhPWJbMV0udHlwZXx8ImRlbGV0ZSIhPWJbMl0udHlwZXx8InNwbGljZSIhPWJbM10udHlwZXx8InNwbGljZSIhPWJbNF0udHlwZT8hMTooT2JqZWN0LnVub2JzZXJ2ZShjLGEpLEFycmF5LnVub2JzZXJ2ZShkLGEpLCEwKX1mdW5jdGlvbiBjKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBjaHJvbWUmJmNocm9tZS5hcHAmJmNocm9tZS5hcHAucnVudGltZSlyZXR1cm4hMTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmbmF2aWdhdG9yLmdldERldmljZVN0b3JhZ2UpcmV0dXJuITE7dHJ5e3ZhciBhPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7cmV0dXJuIGEoKX1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gZChhKXtyZXR1cm4rYT09PWE+Pj4wJiYiIiE9PWF9ZnVuY3Rpb24gZShhKXtyZXR1cm4rYX1mdW5jdGlvbiBmKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYT09PWI/MCE9PWF8fDEvYT09PTEvYjpSKGEpJiZSKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBoKGEpe2lmKHZvaWQgMD09PWEpcmV0dXJuImVvZiI7dmFyIGI9YS5jaGFyQ29kZUF0KDApO3N3aXRjaChiKXtjYXNlIDkxOmNhc2UgOTM6Y2FzZSA0NjpjYXNlIDM0OmNhc2UgMzk6Y2FzZSA0ODpyZXR1cm4gYTtjYXNlIDk1OmNhc2UgMzY6cmV0dXJuImlkZW50IjtjYXNlIDMyOmNhc2UgOTpjYXNlIDEwOmNhc2UgMTM6Y2FzZSAxNjA6Y2FzZSA2NTI3OTpjYXNlIDgyMzI6Y2FzZSA4MjMzOnJldHVybiJ3cyJ9cmV0dXJuIGI+PTk3JiYxMjI+PWJ8fGI+PTY1JiY5MD49Yj8iaWRlbnQiOmI+PTQ5JiY1Nz49Yj8ibnVtYmVyIjoiZWxzZSJ9ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBqKGEpe2Z1bmN0aW9uIGIoKXtpZighKG0+PWEubGVuZ3RoKSl7dmFyIGI9YVttKzFdO3JldHVybiJpblNpbmdsZVF1b3RlIj09biYmIiciPT1ifHwiaW5Eb3VibGVRdW90ZSI9PW4mJiciJz09Yj8obSsrLGQ9YixvLmFwcGVuZCgpLCEwKTp2b2lkIDB9fWZvcih2YXIgYyxkLGUsZixnLGosayxsPVtdLG09LTEsbj0iYmVmb3JlUGF0aCIsbz17cHVzaDpmdW5jdGlvbigpe3ZvaWQgMCE9PWUmJihsLnB1c2goZSksZT12b2lkIDApfSxhcHBlbmQ6ZnVuY3Rpb24oKXt2b2lkIDA9PT1lP2U9ZDplKz1kfX07bjspaWYobSsrLGM9YVttXSwiXFwiIT1jfHwhYihuKSl7aWYoZj1oKGMpLGs9V1tuXSxnPWtbZl18fGtbImVsc2UiXXx8ImVycm9yIiwiZXJyb3IiPT1nKXJldHVybjtpZihuPWdbMF0saj1vW2dbMV1dfHxpLGQ9dm9pZCAwPT09Z1syXT9jOmdbMl0saigpLCJhZnRlclBhdGgiPT09bilyZXR1cm4gbH19ZnVuY3Rpb24gayhhKXtyZXR1cm4gVi50ZXN0KGEpfWZ1bmN0aW9uIGwoYSxiKXtpZihiIT09WCl0aHJvdyBFcnJvcigiVXNlIFBhdGguZ2V0IHRvIHJldHJpZXZlIHBhdGggb2JqZWN0cyIpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXRoaXMucHVzaChTdHJpbmcoYVtjXSkpO1EmJnRoaXMubGVuZ3RoJiYodGhpcy5nZXRWYWx1ZUZyb209dGhpcy5jb21waWxlZEdldFZhbHVlRnJvbUZuKCkpfWZ1bmN0aW9uIG0oYSl7aWYoYSBpbnN0YW5jZW9mIGwpcmV0dXJuIGE7aWYoKG51bGw9PWF8fDA9PWEubGVuZ3RoKSYmKGE9IiIpLCJzdHJpbmciIT10eXBlb2YgYSl7aWYoZChhLmxlbmd0aCkpcmV0dXJuIG5ldyBsKGEsWCk7YT1TdHJpbmcoYSl9dmFyIGI9WVthXTtpZihiKXJldHVybiBiO3ZhciBjPWooYSk7aWYoIWMpcmV0dXJuIFo7dmFyIGI9bmV3IGwoYyxYKTtyZXR1cm4gWVthXT1iLGJ9ZnVuY3Rpb24gbihhKXtyZXR1cm4gZChhKT8iWyIrYSsiXSI6J1siJythLnJlcGxhY2UoLyIvZywnXFwiJykrJyJdJ31mdW5jdGlvbiBvKGIpe2Zvcih2YXIgYz0wO18+YyYmYi5jaGVja18oKTspYysrO3JldHVybiBPJiYoYS5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1jKSxjPjB9ZnVuY3Rpb24gcChhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBxKGEpe3JldHVybiBwKGEuYWRkZWQpJiZwKGEucmVtb3ZlZCkmJnAoYS5jaGFuZ2VkKX1mdW5jdGlvbiByKGEsYil7dmFyIGM9e30sZD17fSxlPXt9O2Zvcih2YXIgZiBpbiBiKXt2YXIgZz1hW2ZdOyh2b2lkIDA9PT1nfHxnIT09YltmXSkmJihmIGluIGE/ZyE9PWJbZl0mJihlW2ZdPWcpOmRbZl09dm9pZCAwKX1mb3IodmFyIGYgaW4gYSlmIGluIGJ8fChjW2ZdPWFbZl0pO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiZhLmxlbmd0aCE9PWIubGVuZ3RoJiYoZS5sZW5ndGg9YS5sZW5ndGgpLHthZGRlZDpjLHJlbW92ZWQ6ZCxjaGFuZ2VkOmV9fWZ1bmN0aW9uIHMoKXtpZighYWIubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYT0wO2E8YWIubGVuZ3RoO2ErKylhYlthXSgpO3JldHVybiBhYi5sZW5ndGg9MCwhMH1mdW5jdGlvbiB0KCl7ZnVuY3Rpb24gYShhKXtiJiZiLnN0YXRlXz09PWZiJiYhZCYmYi5jaGVja18oYSl9dmFyIGIsYyxkPSExLGU9ITA7cmV0dXJue29wZW46ZnVuY3Rpb24oYyl7aWYoYil0aHJvdyBFcnJvcigiT2JzZXJ2ZWRPYmplY3QgaW4gdXNlIik7ZXx8T2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGI9YyxlPSExfSxvYnNlcnZlOmZ1bmN0aW9uKGIsZCl7Yz1iLGQ/QXJyYXkub2JzZXJ2ZShjLGEpOk9iamVjdC5vYnNlcnZlKGMsYSl9LGRlbGl2ZXI6ZnVuY3Rpb24oYil7ZD1iLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxkPSExfSxjbG9zZTpmdW5jdGlvbigpe2I9dm9pZCAwLE9iamVjdC51bm9ic2VydmUoYyxhKSxjYi5wdXNoKHRoaXMpfX19ZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQ9Y2IucG9wKCl8fHQoKTtyZXR1cm4gZC5vcGVuKGEpLGQub2JzZXJ2ZShiLGMpLGR9ZnVuY3Rpb24gdigpe2Z1bmN0aW9uIGEoYixmKXtiJiYoYj09PWQmJihlW2ZdPSEwKSxoLmluZGV4T2YoYik8MCYmKGgucHVzaChiKSxPYmplY3Qub2JzZXJ2ZShiLGMpKSxhKE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSxmKSl9ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtpZihjLm9iamVjdCE9PWR8fGVbYy5uYW1lXXx8InNldFByb3RvdHlwZSI9PT1jLnR5cGUpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gYyhjKXtpZighYihjKSl7Zm9yKHZhciBkLGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PWZiJiZkLml0ZXJhdGVPYmplY3RzXyhhKTtmb3IodmFyIGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PWZiJiZkLmNoZWNrXygpfX12YXIgZCxlLGY9MCxnPVtdLGg9W10saT17b2JqZWN0OnZvaWQgMCxvYmplY3RzOmgsb3BlbjpmdW5jdGlvbihiLGMpe2R8fChkPWMsZT17fSksZy5wdXNoKGIpLGYrKyxiLml0ZXJhdGVPYmplY3RzXyhhKX0sY2xvc2U6ZnVuY3Rpb24oKXtpZihmLS0sIShmPjApKXtmb3IodmFyIGE9MDthPGgubGVuZ3RoO2ErKylPYmplY3QudW5vYnNlcnZlKGhbYV0sYykseC51bm9ic2VydmVkQ291bnQrKztnLmxlbmd0aD0wLGgubGVuZ3RoPTAsZD12b2lkIDAsZT12b2lkIDAsZGIucHVzaCh0aGlzKX19fTtyZXR1cm4gaX1mdW5jdGlvbiB3KGEsYil7cmV0dXJuICQmJiQub2JqZWN0PT09Ynx8KCQ9ZGIucG9wKCl8fHYoKSwkLm9iamVjdD1iKSwkLm9wZW4oYSxiKSwkfWZ1bmN0aW9uIHgoKXt0aGlzLnN0YXRlXz1lYix0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuaWRfPWliKyt9ZnVuY3Rpb24geShhKXt4Ll9hbGxPYnNlcnZlcnNDb3VudCsrLGtiJiZqYi5wdXNoKGEpfWZ1bmN0aW9uIHooKXt4Ll9hbGxPYnNlcnZlcnNDb3VudC0tfWZ1bmN0aW9uIEEoYSl7eC5jYWxsKHRoaXMpLHRoaXMudmFsdWVfPWEsdGhpcy5vbGRPYmplY3RfPXZvaWQgMH1mdW5jdGlvbiBCKGEpe2lmKCFBcnJheS5pc0FycmF5KGEpKXRocm93IEVycm9yKCJQcm92aWRlZCBvYmplY3QgaXMgbm90IGFuIEFycmF5Iik7QS5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gQyhhLGIpe3guY2FsbCh0aGlzKSx0aGlzLm9iamVjdF89YSx0aGlzLnBhdGhfPW0oYiksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwfWZ1bmN0aW9uIEQoYSl7eC5jYWxsKHRoaXMpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl89YSx0aGlzLnZhbHVlXz1bXSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy5vYnNlcnZlZF89W119ZnVuY3Rpb24gRShhKXtyZXR1cm4gYX1mdW5jdGlvbiBGKGEsYixjLGQpe3RoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLm9ic2VydmFibGVfPWEsdGhpcy5nZXRWYWx1ZUZuXz1ifHxFLHRoaXMuc2V0VmFsdWVGbl89Y3x8RSx0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF89ZH1mdW5jdGlvbiBHKGEsYixjKXtmb3IodmFyIGQ9e30sZT17fSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07bmJbZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZSIhPWcudHlwZSYmKCJhZGQiIT1nLnR5cGU/Zy5uYW1lIGluIGQ/KGRlbGV0ZSBkW2cubmFtZV0sZGVsZXRlIGNbZy5uYW1lXSk6ZVtnLm5hbWVdPSEwOmcubmFtZSBpbiBlP2RlbGV0ZSBlW2cubmFtZV06ZFtnLm5hbWVdPSEwKSk6KGNvbnNvbGUuZXJyb3IoIlVua25vd24gY2hhbmdlUmVjb3JkIHR5cGU6ICIrZy50eXBlKSxjb25zb2xlLmVycm9yKGcpKX1mb3IodmFyIGggaW4gZClkW2hdPWFbaF07Zm9yKHZhciBoIGluIGUpZVtoXT12b2lkIDA7dmFyIGk9e307Zm9yKHZhciBoIGluIGMpaWYoIShoIGluIGR8fGggaW4gZSkpe3ZhciBqPWFbaF07Y1toXSE9PWomJihpW2hdPWopfXJldHVybnthZGRlZDpkLHJlbW92ZWQ6ZSxjaGFuZ2VkOml9fWZ1bmN0aW9uIEgoYSxiLGMpe3JldHVybntpbmRleDphLHJlbW92ZWQ6YixhZGRlZENvdW50OmN9fWZ1bmN0aW9uIEkoKXt9ZnVuY3Rpb24gSihhLGIsYyxkLGUsZil7cmV0dXJuIHNiLmNhbGNTcGxpY2VzKGEsYixjLGQsZSxmKX1mdW5jdGlvbiBLKGEsYixjLGQpe3JldHVybiBjPmJ8fGE+ZD8tMTpiPT1jfHxkPT1hPzA6Yz5hP2Q+Yj9iLWM6ZC1jOmI+ZD9kLWE6Yi1hfWZ1bmN0aW9uIEwoYSxiLGMsZCl7Zm9yKHZhciBlPUgoYixjLGQpLGY9ITEsZz0wLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGk9YVtoXTtpZihpLmluZGV4Kz1nLCFmKXt2YXIgaj1LKGUuaW5kZXgsZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoLGkuaW5kZXgsaS5pbmRleCtpLmFkZGVkQ291bnQpO2lmKGo+PTApe2Euc3BsaWNlKGgsMSksaC0tLGctPWkuYWRkZWRDb3VudC1pLnJlbW92ZWQubGVuZ3RoLGUuYWRkZWRDb3VudCs9aS5hZGRlZENvdW50LWo7dmFyIGs9ZS5yZW1vdmVkLmxlbmd0aCtpLnJlbW92ZWQubGVuZ3RoLWo7aWYoZS5hZGRlZENvdW50fHxrKXt2YXIgYz1pLnJlbW92ZWQ7aWYoZS5pbmRleDxpLmluZGV4KXt2YXIgbD1lLnJlbW92ZWQuc2xpY2UoMCxpLmluZGV4LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGwsYyksYz1sfWlmKGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aD5pLmluZGV4K2kuYWRkZWRDb3VudCl7dmFyIG09ZS5yZW1vdmVkLnNsaWNlKGkuaW5kZXgraS5hZGRlZENvdW50LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsbSl9ZS5yZW1vdmVkPWMsaS5pbmRleDxlLmluZGV4JiYoZS5pbmRleD1pLmluZGV4KX1lbHNlIGY9ITB9ZWxzZSBpZihlLmluZGV4PGkuaW5kZXgpe2Y9ITAsYS5zcGxpY2UoaCwwLGUpLGgrKzt2YXIgbj1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aDtpLmluZGV4Kz1uLGcrPW59fX1mfHxhLnB1c2goZSl9ZnVuY3Rpb24gTShhLGIpe2Zvcih2YXIgYz1bXSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07c3dpdGNoKGcudHlwZSl7Y2FzZSJzcGxpY2UiOkwoYyxnLmluZGV4LGcucmVtb3ZlZC5zbGljZSgpLGcuYWRkZWRDb3VudCk7YnJlYWs7Y2FzZSJhZGQiOmNhc2UidXBkYXRlIjpjYXNlImRlbGV0ZSI6aWYoIWQoZy5uYW1lKSljb250aW51ZTt2YXIgaD1lKGcubmFtZSk7aWYoMD5oKWNvbnRpbnVlO0woYyxoLFtnLm9sZFZhbHVlXSwxKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoIlVuZXhwZWN0ZWQgcmVjb3JkIHR5cGU6ICIrSlNPTi5zdHJpbmdpZnkoZykpfX1yZXR1cm4gY31mdW5jdGlvbiBOKGEsYil7dmFyIGM9W107cmV0dXJuIE0oYSxiKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3JldHVybiAxPT1iLmFkZGVkQ291bnQmJjE9PWIucmVtb3ZlZC5sZW5ndGg/dm9pZChiLnJlbW92ZWRbMF0hPT1hW2IuaW5kZXhdJiZjLnB1c2goYikpOnZvaWQoYz1jLmNvbmNhdChKKGEsYi5pbmRleCxiLmluZGV4K2IuYWRkZWRDb3VudCxiLnJlbW92ZWQsMCxiLnJlbW92ZWQubGVuZ3RoKSkpfSksY312YXIgTz1hLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50LFA9YigpLFE9YygpLFI9YS5OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGIpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYiYmYS5pc05hTihiKX0sUz0iX19wcm90b19fImlue30/ZnVuY3Rpb24oYSl7cmV0dXJuIGF9OmZ1bmN0aW9uKGEpe3ZhciBiPWEuX19wcm90b19fO2lmKCFiKXJldHVybiBhO3ZhciBjPU9iamVjdC5jcmVhdGUoYik7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpLmZvckVhY2goZnVuY3Rpb24oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYikpfSksY30sVD0iWyRfYS16QS1aXSIsVT0iWyRfYS16QS1aMC05XSIsVj1uZXcgUmVnRXhwKCJeIitUKyIrIitVKyIqJCIpLFc9e2JlZm9yZVBhdGg6e3dzOlsiYmVmb3JlUGF0aCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdLCJbIjpbImJlZm9yZUVsZW1lbnQiXSxlb2Y6WyJhZnRlclBhdGgiXX0saW5QYXRoOnt3czpbImluUGF0aCJdLCIuIjpbImJlZm9yZUlkZW50Il0sIlsiOlsiYmVmb3JlRWxlbWVudCJdLGVvZjpbImFmdGVyUGF0aCJdfSxiZWZvcmVJZGVudDp7d3M6WyJiZWZvcmVJZGVudCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdfSxpbklkZW50OntpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXSwwOlsiaW5JZGVudCIsImFwcGVuZCJdLG51bWJlcjpbImluSWRlbnQiLCJhcHBlbmQiXSx3czpbImluUGF0aCIsInB1c2giXSwiLiI6WyJiZWZvcmVJZGVudCIsInB1c2giXSwiWyI6WyJiZWZvcmVFbGVtZW50IiwicHVzaCJdLGVvZjpbImFmdGVyUGF0aCIsInB1c2giXX0sYmVmb3JlRWxlbWVudDp7d3M6WyJiZWZvcmVFbGVtZW50Il0sMDpbImFmdGVyWmVybyIsImFwcGVuZCJdLG51bWJlcjpbImluSW5kZXgiLCJhcHBlbmQiXSwiJyI6WyJpblNpbmdsZVF1b3RlIiwiYXBwZW5kIiwiIl0sJyInOlsiaW5Eb3VibGVRdW90ZSIsImFwcGVuZCIsIiJdfSxhZnRlclplcm86e3dzOlsiYWZ0ZXJFbGVtZW50IiwicHVzaCJdLCJdIjpbImluUGF0aCIsInB1c2giXX0saW5JbmRleDp7MDpbImluSW5kZXgiLCJhcHBlbmQiXSxudW1iZXI6WyJpbkluZGV4IiwiYXBwZW5kIl0sd3M6WyJhZnRlckVsZW1lbnQiXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19LGluU2luZ2xlUXVvdGU6eyInIjpbImFmdGVyRWxlbWVudCJdLGVvZjpbImVycm9yIl0sImVsc2UiOlsiaW5TaW5nbGVRdW90ZSIsImFwcGVuZCJdfSxpbkRvdWJsZVF1b3RlOnsnIic6WyJhZnRlckVsZW1lbnQiXSxlb2Y6WyJlcnJvciJdLCJlbHNlIjpbImluRG91YmxlUXVvdGUiLCJhcHBlbmQiXX0sYWZ0ZXJFbGVtZW50Ont3czpbImFmdGVyRWxlbWVudCJdLCJdIjpbImluUGF0aCIsInB1c2giXX19LFg9e30sWT17fTtsLmdldD1tLGwucHJvdG90eXBlPVMoe19fcHJvdG9fXzpbXSx2YWxpZDohMCx0b1N0cmluZzpmdW5jdGlvbigpe2Zvcih2YXIgYT0iIixiPTA7Yjx0aGlzLmxlbmd0aDtiKyspe3ZhciBjPXRoaXNbYl07YSs9ayhjKT9iPyIuIitjOmM6bihjKX1yZXR1cm4gYX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZihudWxsPT1hKXJldHVybjthPWFbdGhpc1tiXV19cmV0dXJuIGF9LGl0ZXJhdGVPYmplY3RzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKGMmJihhPWFbdGhpc1tjLTFdXSksIWYoYSkpcmV0dXJuO2IoYSx0aGlzWzBdKX19LGNvbXBpbGVkR2V0VmFsdWVGcm9tRm46ZnVuY3Rpb24oKXt2YXIgYT0iIixiPSJvYmoiO2ErPSJpZiAob2JqICE9IG51bGwiO2Zvcih2YXIgYyxkPTA7ZDx0aGlzLmxlbmd0aC0xO2QrKyljPXRoaXNbZF0sYis9ayhjKT8iLiIrYzpuKGMpLGErPSIgJiZcbiAgICAgIitiKyIgIT0gbnVsbCI7YSs9IilcbiI7dmFyIGM9dGhpc1tkXTtyZXR1cm4gYis9ayhjKT8iLiIrYzpuKGMpLGErPSIgIHJldHVybiAiK2IrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixhKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKCFmKGEpKXJldHVybiExO2E9YVt0aGlzW2NdXX1yZXR1cm4gZihhKT8oYVt0aGlzW2NdXT1iLCEwKTohMX19KTt2YXIgWj1uZXcgbCgiIixYKTtaLnZhbGlkPSExLFouZ2V0VmFsdWVGcm9tPVouc2V0VmFsdWVGcm9tPWZ1bmN0aW9uKCl7fTt2YXIgJCxfPTFlMyxhYj1bXSxiYj1QP2Z1bmN0aW9uKCl7dmFyIGE9e3BpbmdQb25nOiEwfSxiPSExO3JldHVybiBPYmplY3Qub2JzZXJ2ZShhLGZ1bmN0aW9uKCl7cygpLGI9ITF9KSxmdW5jdGlvbihjKXthYi5wdXNoKGMpLGJ8fChiPSEwLGEucGluZ1Bvbmc9IWEucGluZ1BvbmcpfX0oKTpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXthYi5wdXNoKGEpfX0oKSxjYj1bXSxkYj1bXSxlYj0wLGZiPTEsZ2I9MixoYj0zLGliPTE7eC5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnN0YXRlXyE9ZWIpdGhyb3cgRXJyb3IoIk9ic2VydmVyIGhhcyBhbHJlYWR5IGJlZW4gb3BlbmVkLiIpO3JldHVybiB5KHRoaXMpLHRoaXMuY2FsbGJhY2tfPWEsdGhpcy50YXJnZXRfPWIsdGhpcy5jb25uZWN0XygpLHRoaXMuc3RhdGVfPWZiLHRoaXMudmFsdWVffSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1mYiYmKHoodGhpcyksdGhpcy5kaXNjb25uZWN0XygpLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLnN0YXRlXz1nYil9LGRlbGl2ZXI6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09ZmImJm8odGhpcyl9LHJlcG9ydF86ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuY2FsbGJhY2tfLmFwcGx5KHRoaXMudGFyZ2V0XyxhKX1jYXRjaChiKXt4Ll9lcnJvclRocm93bkR1cmluZ0NhbGxiYWNrPSEwLGNvbnNvbGUuZXJyb3IoIkV4Y2VwdGlvbiBjYXVnaHQgZHVyaW5nIG9ic2VydmVyIGNhbGxiYWNrOiAiKyhiLnN0YWNrfHxiKSl9fSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrXyh2b2lkIDAsITApLHRoaXMudmFsdWVffX07dmFyIGpiLGtiPSFQO3guX2FsbE9ic2VydmVyc0NvdW50PTAsa2ImJihqYj1bXSk7dmFyIGxiPSExO2EuUGxhdGZvcm09YS5QbGF0Zm9ybXx8e30sYS5QbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludD1mdW5jdGlvbigpe2lmKCFsYiYma2Ipe2xiPSEwO3ZhciBiLGMsZD0wO2Rve2QrKyxjPWpiLGpiPVtdLGI9ITE7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWNbZV07Zi5zdGF0ZV89PWZiJiYoZi5jaGVja18oKSYmKGI9ITApLGpiLnB1c2goZikpfXMoKSYmKGI9ITApfXdoaWxlKF8+ZCYmYik7TyYmKGEuZGlydHlDaGVja0N5Y2xlQ291bnQ9ZCksbGI9ITF9fSxrYiYmKGEuUGxhdGZvcm0uY2xlYXJPYnNlcnZlcnM9ZnVuY3Rpb24oKXtqYj1bXX0pLEEucHJvdG90eXBlPVMoe19fcHJvdG9fXzp4LnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITEsY29ubmVjdF86ZnVuY3Rpb24oKXtQP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfPXUodGhpcyx0aGlzLnZhbHVlXyx0aGlzLmFycmF5T2JzZXJ2ZSk6dGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXyl9LGNvcHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkuaXNBcnJheShhKT9bXTp7fTtmb3IodmFyIGMgaW4gYSliW2NdPWFbY107cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJihiLmxlbmd0aD1hLmxlbmd0aCksYn0sY2hlY2tfOmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoUCl7aWYoIWEpcmV0dXJuITE7Yz17fSxiPUcodGhpcy52YWx1ZV8sYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3RfLGI9cih0aGlzLnZhbHVlXyx0aGlzLm9sZE9iamVjdF8pO3JldHVybiBxKGIpPyExOihQfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYi5hZGRlZHx8e30sYi5yZW1vdmVkfHx7fSxiLmNoYW5nZWR8fHt9LGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfV0pLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXtQPyh0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSgpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCk6dGhpcy5vbGRPYmplY3RfPXZvaWQgMH0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1mYiYmKFA/dGhpcy5kaXJlY3RPYnNlcnZlcl8uZGVsaXZlcighMSk6byh0aGlzKSl9LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyZWN0T2JzZXJ2ZXJfP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITApOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pLHRoaXMudmFsdWVffX0pLEIucHJvdG90eXBlPVMoe19fcHJvdG9fXzpBLnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITAsY29weU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZSgpfSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGI7aWYoUCl7aWYoIWEpcmV0dXJuITE7Yj1OKHRoaXMudmFsdWVfLGEpfWVsc2UgYj1KKHRoaXMudmFsdWVfLDAsdGhpcy52YWx1ZV8ubGVuZ3RoLHRoaXMub2xkT2JqZWN0XywwLHRoaXMub2xkT2JqZWN0Xy5sZW5ndGgpO3JldHVybiBiJiZiLmxlbmd0aD8oUHx8KHRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pKSx0aGlzLnJlcG9ydF8oW2JdKSwhMCk6ITF9fSksQi5hcHBseVNwbGljZXM9ZnVuY3Rpb24oYSxiLGMpe2MuZm9yRWFjaChmdW5jdGlvbihjKXtmb3IodmFyIGQ9W2MuaW5kZXgsYy5yZW1vdmVkLmxlbmd0aF0sZT1jLmluZGV4O2U8Yy5pbmRleCtjLmFkZGVkQ291bnQ7KWQucHVzaChiW2VdKSxlKys7QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhLGQpfSl9LEMucHJvdG90eXBlPVMoe19fcHJvdG9fXzp4LnByb3RvdHlwZSxnZXQgcGF0aCgpe3JldHVybiB0aGlzLnBhdGhffSxjb25uZWN0XzpmdW5jdGlvbigpe1AmJih0aGlzLmRpcmVjdE9ic2VydmVyXz13KHRoaXMsdGhpcy5vYmplY3RfKSksdGhpcy5jaGVja18odm9pZCAwLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXt0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXy5pdGVyYXRlT2JqZWN0cyh0aGlzLm9iamVjdF8sYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMudmFsdWVfO3JldHVybiB0aGlzLnZhbHVlXz10aGlzLnBhdGhfLmdldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8pLGJ8fGcodGhpcy52YWx1ZV8sYyk/ITE6KHRoaXMucmVwb3J0XyhbdGhpcy52YWx1ZV8sYyx0aGlzXSksITApfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt0aGlzLnBhdGhfJiZ0aGlzLnBhdGhfLnNldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8sYSl9fSk7dmFyIG1iPXt9O0QucHJvdG90eXBlPVMoe19fcHJvdG9fXzp4LnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe2lmKFApe2Zvcih2YXIgYSxiPSExLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWlmKGE9dGhpcy5vYnNlcnZlZF9bY10sYSE9PW1iKXtiPSEwO2JyZWFrfWImJih0aGlzLmRpcmVjdE9ic2VydmVyXz13KHRoaXMsYSkpfXRoaXMuY2hlY2tfKHZvaWQgMCwhdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLm9ic2VydmVkXy5sZW5ndGg7YSs9Mil0aGlzLm9ic2VydmVkX1thXT09PW1iJiZ0aGlzLm9ic2VydmVkX1thKzFdLmNsb3NlKCk7dGhpcy5vYnNlcnZlZF8ubGVuZ3RoPTAsdGhpcy52YWx1ZV8ubGVuZ3RoPTAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxhZGRQYXRoOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPWViJiZ0aGlzLnN0YXRlXyE9aGIpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgcGF0aHMgb25jZSBzdGFydGVkLiIpO3ZhciBiPW0oYik7aWYodGhpcy5vYnNlcnZlZF8ucHVzaChhLGIpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl8pe3ZhciBjPXRoaXMub2JzZXJ2ZWRfLmxlbmd0aC8yLTE7dGhpcy52YWx1ZV9bY109Yi5nZXRWYWx1ZUZyb20oYSl9fSxhZGRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXRlXyE9ZWImJnRoaXMuc3RhdGVfIT1oYil0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBvYnNlcnZlcnMgb25jZSBzdGFydGVkLiIpO2lmKHRoaXMub2JzZXJ2ZWRfLnB1c2gobWIsYSksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl7dmFyIGI9dGhpcy5vYnNlcnZlZF8ubGVuZ3RoLzItMTt0aGlzLnZhbHVlX1tiXT1hLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpfX0sc3RhcnRSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1mYil0aHJvdyBFcnJvcigiQ2FuIG9ubHkgcmVzZXQgd2hpbGUgb3BlbiIpO3RoaXMuc3RhdGVfPWhiLHRoaXMuZGlzY29ubmVjdF8oKX0sZmluaXNoUmVzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLnN0YXRlXyE9aGIpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IGZpbmlzaFJlc2V0IGFmdGVyIHN0YXJ0UmVzZXQiKTtyZXR1cm4gdGhpcy5zdGF0ZV89ZmIsdGhpcy5jb25uZWN0XygpLHRoaXMudmFsdWVffSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWI9dGhpcy5vYnNlcnZlZF9bY10sYiE9PW1iJiZ0aGlzLm9ic2VydmVkX1tjKzFdLml0ZXJhdGVPYmplY3RzKGIsYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTA7ZDx0aGlzLm9ic2VydmVkXy5sZW5ndGg7ZCs9Mil7dmFyIGUsZj10aGlzLm9ic2VydmVkX1tkXSxoPXRoaXMub2JzZXJ2ZWRfW2QrMV07aWYoZj09PW1iKXt2YXIgaT1oO2U9dGhpcy5zdGF0ZV89PT1lYj9pLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpOmkuZGlzY2FyZENoYW5nZXMoKX1lbHNlIGU9aC5nZXRWYWx1ZUZyb20oZik7Yj90aGlzLnZhbHVlX1tkLzJdPWU6ZyhlLHRoaXMudmFsdWVfW2QvMl0pfHwoYz1jfHxbXSxjW2QvMl09dGhpcy52YWx1ZV9bZC8yXSx0aGlzLnZhbHVlX1tkLzJdPWUpfXJldHVybiBjPyh0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpcy5vYnNlcnZlZF9dKSwhMCk6ITF9fSksRi5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLnZhbHVlXz10aGlzLmdldFZhbHVlRm5fKHRoaXMub2JzZXJ2YWJsZV8ub3Blbih0aGlzLm9ic2VydmVkQ2FsbGJhY2tfLHRoaXMpKSx0aGlzLnZhbHVlX30sb2JzZXJ2ZWRDYWxsYmFja186ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmdldFZhbHVlRm5fKGEpLCFnKGEsdGhpcy52YWx1ZV8pKXt2YXIgYj10aGlzLnZhbHVlXzt0aGlzLnZhbHVlXz1hLHRoaXMuY2FsbGJhY2tfLmNhbGwodGhpcy50YXJnZXRfLHRoaXMudmFsdWVfLGIpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMudmFsdWVffSxkZWxpdmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JzZXJ2YWJsZV8uZGVsaXZlcigpfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLnNldFZhbHVlRm5fKGEpLCF0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF8mJnRoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWU/dGhpcy5vYnNlcnZhYmxlXy5zZXRWYWx1ZShhKTp2b2lkIDB9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZhYmxlXyYmdGhpcy5vYnNlcnZhYmxlXy5jbG9zZSgpLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmdldFZhbHVlRm5fPXZvaWQgMCx0aGlzLnNldFZhbHVlRm5fPXZvaWQgMH19O3ZhciBuYj17YWRkOiEwLHVwZGF0ZTohMCwiZGVsZXRlIjohMH0sb2I9MCxwYj0xLHFiPTIscmI9MztJLnByb3RvdHlwZT17Y2FsY0VkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mLWUrMSxoPWMtYisxLGk9bmV3IEFycmF5KGcpLGo9MDtnPmo7aisrKWlbal09bmV3IEFycmF5KGgpLGlbal1bMF09ajtmb3IodmFyIGs9MDtoPms7aysrKWlbMF1ba109aztmb3IodmFyIGo9MTtnPmo7aisrKWZvcih2YXIgaz0xO2g+aztrKyspaWYodGhpcy5lcXVhbHMoYVtiK2stMV0sZFtlK2otMV0pKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX0sc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaChvYik6KGUucHVzaChwYiksZD1nKSxiLS0sYy0tKTpmPT1oPyhlLnB1c2gocmIpLGItLSxkPWgpOihlLnB1c2gocWIpLGMtLSxkPWkpfWVsc2UgZS5wdXNoKHJiKSxiLS07ZWxzZSBlLnB1c2gocWIpLGMtLTtyZXR1cm4gZS5yZXZlcnNlKCksZX0sY2FsY1NwbGljZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPTAsaD0wLGk9TWF0aC5taW4oYy1iLGYtZSk7aWYoMD09YiYmMD09ZSYmKGc9dGhpcy5zaGFyZWRQcmVmaXgoYSxkLGkpKSxjPT1hLmxlbmd0aCYmZj09ZC5sZW5ndGgmJihoPXRoaXMuc2hhcmVkU3VmZml4KGEsZCxpLWcpKSxiKz1nLGUrPWcsYy09aCxmLT1oLGMtYj09MCYmZi1lPT0wKXJldHVybltdO2lmKGI9PWMpe2Zvcih2YXIgaj1IKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltIKGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIG9iOmomJihsLnB1c2goaiksaj12b2lkIDApLG0rKyxuKys7YnJlYWs7Y2FzZSBwYjpqfHwoaj1IKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSBxYjpqfHwoaj1IKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIHJiOmp8fChqPUgobSxbXSwwKSksai5yZW1vdmVkLnB1c2goZFtuXSksbisrfXJldHVybiBqJiZsLnB1c2goaiksbH0sc2hhcmVkUHJlZml4OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MDtjPmQ7ZCsrKWlmKCF0aGlzLmVxdWFscyhhW2RdLGJbZF0pKXJldHVybiBkO3JldHVybiBjfSxzaGFyZWRTdWZmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPWIubGVuZ3RoLGY9MDtjPmYmJnRoaXMuZXF1YWxzKGFbLS1kXSxiWy0tZV0pOylmKys7cmV0dXJuIGZ9LGNhbGN1bGF0ZVNwbGljZXM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxjU3BsaWNlcyhhLDAsYS5sZW5ndGgsYiwwLGIubGVuZ3RoKX0sZXF1YWxzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifX07dmFyIHNiPW5ldyBJO2EuT2JzZXJ2ZXI9eCxhLk9ic2VydmVyLnJ1bkVPTV89YmIsYS5PYnNlcnZlci5vYnNlcnZlclNlbnRpbmVsXz1tYixhLk9ic2VydmVyLmhhc09iamVjdE9ic2VydmU9UCxhLkFycmF5T2JzZXJ2ZXI9QixhLkFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcz1mdW5jdGlvbihhLGIpe3JldHVybiBzYi5jYWxjdWxhdGVTcGxpY2VzKGEsYil9LGEuQXJyYXlTcGxpY2U9SSxhLk9iamVjdE9ic2VydmVyPUEsYS5QYXRoT2JzZXJ2ZXI9QyxhLkNvbXBvdW5kT2JzZXJ2ZXI9RCxhLlBhdGg9bCxhLk9ic2VydmVyVHJhbnNmb3JtPUZ9KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGU/Z2xvYmFsOnRoaXN8fHdpbmRvdyksd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsPXt9LGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBjaHJvbWUmJmNocm9tZS5hcHAmJmNocm9tZS5hcHAucnVudGltZSlyZXR1cm4hMTtpZihuYXZpZ2F0b3IuZ2V0RGV2aWNlU3RvcmFnZSlyZXR1cm4hMTt0cnl7dmFyIGE9bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdHJ1ZTsiKTtyZXR1cm4gYSgpfWNhdGNoKGIpe3JldHVybiExfX1mdW5jdGlvbiBjKGEpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQXNzZXJ0aW9uIGZhaWxlZCIpfWZ1bmN0aW9uIGQoYSxiKXtmb3IodmFyIGM9TihiKSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07TShhLGUsTyhiLGUpKX1yZXR1cm4gYX1mdW5jdGlvbiBlKGEsYil7Zm9yKHZhciBjPU4oYiksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO3N3aXRjaChlKXtjYXNlImFyZ3VtZW50cyI6Y2FzZSJjYWxsZXIiOmNhc2UibGVuZ3RoIjpjYXNlIm5hbWUiOmNhc2UicHJvdG90eXBlIjpjYXNlInRvU3RyaW5nIjpjb250aW51ZX1NKGEsZSxPKGIsZSkpfXJldHVybiBhfWZ1bmN0aW9uIGYoYSxiKXtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdaW4gYSlyZXR1cm4gYltjXX1mdW5jdGlvbiBnKGEsYixjKXtQLnZhbHVlPWMsTShhLGIsUCl9ZnVuY3Rpb24gaChhKXt2YXIgYj1hLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9SS5nZXQoYik7aWYoYylyZXR1cm4gYzt2YXIgZD1oKGIpLGU9dihkKTtyZXR1cm4gcyhiLGUsYSksZX1mdW5jdGlvbiBpKGEsYil7cShhLGIsITApfWZ1bmN0aW9uIGooYSxiKXtxKGIsYSwhMSl9ZnVuY3Rpb24gayhhKXtyZXR1cm4vXm9uW2Etel0rJC8udGVzdChhKX1mdW5jdGlvbiBsKGEpe3JldHVybi9eXHdbYS16QS1aXzAtOV0qJC8udGVzdChhKX1mdW5jdGlvbiBtKGEpe3JldHVybiBMJiZsKGEpP25ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMuX19pbXBsNGNmMWU3ODJoZ19fLiIrYSk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fX2ltcGw0Y2YxZTc4MmhnX19bYV19fWZ1bmN0aW9uIG4oYSl7cmV0dXJuIEwmJmwoYSk/bmV3IEZ1bmN0aW9uKCJ2IiwidGhpcy5fX2ltcGw0Y2YxZTc4MmhnX18uIithKyIgPSB2Iik6ZnVuY3Rpb24oYil7dGhpcy5fX2ltcGw0Y2YxZTc4MmhnX19bYV09Yn19ZnVuY3Rpb24gbyhhKXtyZXR1cm4gTCYmbChhKT9uZXcgRnVuY3Rpb24oInJldHVybiB0aGlzLl9faW1wbDRjZjFlNzgyaGdfXy4iK2ErIi5hcHBseSh0aGlzLl9faW1wbDRjZjFlNzgyaGdfXywgYXJndW1lbnRzKSIpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19pbXBsNGNmMWU3ODJoZ19fW2FdLmFwcGx5KHRoaXMuX19pbXBsNGNmMWU3ODJoZ19fLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHAoYSxiKXt0cnl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKX1jYXRjaChjKXtyZXR1cm4gUn19ZnVuY3Rpb24gcShiLGMsZCl7Zm9yKHZhciBlPU4oYiksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1lW2ZdO2lmKCJwb2x5bWVyQmxhY2tMaXN0XyIhPT1nJiYhKGcgaW4gY3x8Yi5wb2x5bWVyQmxhY2tMaXN0XyYmYi5wb2x5bWVyQmxhY2tMaXN0X1tnXSkpe1EmJmIuX19sb29rdXBHZXR0ZXJfXyhnKTt2YXIgaCxpLGo9cChiLGcpO2lmKGQmJiJmdW5jdGlvbiI9PXR5cGVvZiBqLnZhbHVlKWNbZ109byhnKTtlbHNle3ZhciBsPWsoZyk7aD1sP2EuZ2V0RXZlbnRIYW5kbGVyR2V0dGVyKGcpOm0oZyksKGoud3JpdGFibGV8fGouc2V0fHxTKSYmKGk9bD9hLmdldEV2ZW50SGFuZGxlclNldHRlcihnKTpuKGcpKSxNKGMsZyx7Z2V0Omgsc2V0OmksY29uZmlndXJhYmxlOmouY29uZmlndXJhYmxlLGVudW1lcmFibGU6ai5lbnVtZXJhYmxlfSl9fX19ZnVuY3Rpb24gcihhLGIsYyl7dmFyIGQ9YS5wcm90b3R5cGU7cyhkLGIsYyksZShiLGEpfWZ1bmN0aW9uIHMoYSxiLGQpe3ZhciBlPWIucHJvdG90eXBlO2Modm9pZCAwPT09SS5nZXQoYSkpLEkuc2V0KGEsYiksSi5zZXQoZSxhKSxpKGEsZSksZCYmaihlLGQpLGcoZSwiY29uc3RydWN0b3IiLGIpLGIucHJvdG90eXBlPWV9ZnVuY3Rpb24gdChhLGIpe3JldHVybiBJLmdldChiLnByb3RvdHlwZSk9PT1hfWZ1bmN0aW9uIHUoYSl7dmFyIGI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9aChiKSxkPXYoYyk7cmV0dXJuIHMoYixkLGEpLGR9ZnVuY3Rpb24gdihhKXtmdW5jdGlvbiBiKGIpe2EuY2FsbCh0aGlzLGIpfXZhciBjPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpO3JldHVybiBjLmNvbnN0cnVjdG9yPWIsYi5wcm90b3R5cGU9YyxifWZ1bmN0aW9uIHcoYSl7cmV0dXJuIGEmJmEuX19pbXBsNGNmMWU3ODJoZ19ffWZ1bmN0aW9uIHgoYSl7cmV0dXJuIXcoYSl9ZnVuY3Rpb24geShhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYyh4KGEpKSxhLl9fd3JhcHBlcjhlM2RkOTNhNjBfX3x8KGEuX193cmFwcGVyOGUzZGQ5M2E2MF9fPW5ldyhoKGEpKShhKSkpfWZ1bmN0aW9uIHooYSl7cmV0dXJuIG51bGw9PT1hP251bGw6KGModyhhKSksYS5fX2ltcGw0Y2YxZTc4MmhnX18pfWZ1bmN0aW9uIEEoYSl7cmV0dXJuIGEuX19pbXBsNGNmMWU3ODJoZ19ffWZ1bmN0aW9uIEIoYSxiKXtiLl9faW1wbDRjZjFlNzgyaGdfXz1hLGEuX193cmFwcGVyOGUzZGQ5M2E2MF9fPWJ9ZnVuY3Rpb24gQyhhKXtyZXR1cm4gYSYmdyhhKT96KGEpOmF9ZnVuY3Rpb24gRChhKXtyZXR1cm4gYSYmIXcoYSk/eShhKTphfWZ1bmN0aW9uIEUoYSxiKXtudWxsIT09YiYmKGMoeChhKSksYyh2b2lkIDA9PT1ifHx3KGIpKSxhLl9fd3JhcHBlcjhlM2RkOTNhNjBfXz1iKX1mdW5jdGlvbiBGKGEsYixjKXtULmdldD1jLE0oYS5wcm90b3R5cGUsYixUKX1mdW5jdGlvbiBHKGEsYil7RihhLGIsZnVuY3Rpb24oKXtyZXR1cm4geSh0aGlzLl9faW1wbDRjZjFlNzgyaGdfX1tiXSl9KX1mdW5jdGlvbiBIKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IuZm9yRWFjaChmdW5jdGlvbihiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3ZhciBhPUQodGhpcyk7cmV0dXJuIGFbYl0uYXBwbHkoYSxhcmd1bWVudHMpfX0pfSl9dmFyIEk9bmV3IFdlYWtNYXAsSj1uZXcgV2Vha01hcCxLPU9iamVjdC5jcmVhdGUobnVsbCksTD1iKCksTT1PYmplY3QuZGVmaW5lUHJvcGVydHksTj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxPPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsUD17dmFsdWU6dm9pZCAwLGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwfTtOKHdpbmRvdyk7dmFyIFE9L0ZpcmVmb3gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksUj17Z2V0OmZ1bmN0aW9uKCl7fSxzZXQ6ZnVuY3Rpb24oKXt9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSxTPWZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihOb2RlLnByb3RvdHlwZSwibm9kZVR5cGUiKTtyZXR1cm4hIWEmJiJzZXQiaW4gYX0oKSxUPXtnZXQ6dm9pZCAwLGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfTthLmFzc2VydD1jLGEuY29uc3RydWN0b3JUYWJsZT1JLGEuZGVmaW5lR2V0dGVyPUYsYS5kZWZpbmVXcmFwR2V0dGVyPUcsYS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcj1ILGEuaXNXcmFwcGVyPXcsYS5pc1dyYXBwZXJGb3I9dCxhLm1peGluPWQsYS5uYXRpdmVQcm90b3R5cGVUYWJsZT1KLGEub25lT2Y9ZixhLnJlZ2lzdGVyT2JqZWN0PXUsYS5yZWdpc3RlcldyYXBwZXI9cixhLnJld3JhcD1FLGEuc2V0V3JhcHBlcj1CLGEudW5zYWZlVW53cmFwPUEsYS51bndyYXA9eixhLnVud3JhcElmTmVlZGVkPUMsYS53cmFwPXksYS53cmFwSWZOZWVkZWQ9RCxhLndyYXBwZXJzPUt9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtnPSExO3ZhciBhPWYuc2xpY2UoMCk7Zj1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdKCl9ZnVuY3Rpb24gYyhhKXtmLnB1c2goYSksZ3x8KGc9ITAsZChiLDApKX12YXIgZCxlPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyLGY9W10sZz0hMTtpZihlKXt2YXIgaD0xLGk9bmV3IGUoYiksaj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShoKTtpLm9ic2VydmUoaix7Y2hhcmFjdGVyRGF0YTohMH0pLGQ9ZnVuY3Rpb24oKXtoPShoKzEpJTIsai5kYXRhPWh9fWVsc2UgZD13aW5kb3cuc2V0SW1tZWRpYXRlfHx3aW5kb3cuc2V0VGltZW91dDthLnNldEVuZE9mTWljcm90YXNrPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7YS5zY2hlZHVsZWRffHwoYS5zY2hlZHVsZWRfPSEwLG8ucHVzaChhKSxwfHwoayhjKSxwPSEwKSl9ZnVuY3Rpb24gYygpe2ZvcihwPSExO28ubGVuZ3RoOyl7dmFyIGE9bztvPVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07Yy5zY2hlZHVsZWRfPSExO3ZhciBkPWMudGFrZVJlY29yZHMoKTtmKGMpLGQubGVuZ3RoJiZjLmNhbGxiYWNrXyhkLGMpfX19ZnVuY3Rpb24gZChhLGIpe3RoaXMudHlwZT1hLHRoaXMudGFyZ2V0PWIsdGhpcy5hZGRlZE5vZGVzPW5ldyBtLk5vZGVMaXN0LHRoaXMucmVtb3ZlZE5vZGVzPW5ldyBtLk5vZGVMaXN0LHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGUoYSxiKXtmb3IoO2E7YT1hLnBhcmVudE5vZGUpe3ZhciBjPW4uZ2V0KGEpO2lmKGMpZm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07ZS5vcHRpb25zLnN1YnRyZWUmJmUuYWRkVHJhbnNpZW50T2JzZXJ2ZXIoYil9fX1mdW5jdGlvbiBmKGEpe2Zvcih2YXIgYj0wO2I8YS5ub2Rlc18ubGVuZ3RoO2IrKyl7dmFyIGM9YS5ub2Rlc19bYl0sZD1uLmdldChjKTtpZighZClyZXR1cm47Zm9yKHZhciBlPTA7ZTxkLmxlbmd0aDtlKyspe3ZhciBmPWRbZV07Zi5vYnNlcnZlcj09PWEmJmYucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9fX1mdW5jdGlvbiBnKGEsYyxlKXtmb3IodmFyIGY9T2JqZWN0LmNyZWF0ZShudWxsKSxnPU9iamVjdC5jcmVhdGUobnVsbCksaD1hO2g7aD1oLnBhcmVudE5vZGUpe3ZhciBpPW4uZ2V0KGgpO2lmKGkpZm9yKHZhciBqPTA7ajxpLmxlbmd0aDtqKyspe3ZhciBrPWlbal0sbD1rLm9wdGlvbnM7aWYoKGg9PT1hfHxsLnN1YnRyZWUpJiYhKCJhdHRyaWJ1dGVzIj09PWMmJiFsLmF0dHJpYnV0ZXN8fCJhdHRyaWJ1dGVzIj09PWMmJmwuYXR0cmlidXRlRmlsdGVyJiYobnVsbCE9PWUubmFtZXNwYWNlfHwtMT09PWwuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoZS5uYW1lKSl8fCJjaGFyYWN0ZXJEYXRhIj09PWMmJiFsLmNoYXJhY3RlckRhdGF8fCJjaGlsZExpc3QiPT09YyYmIWwuY2hpbGRMaXN0KSl7dmFyIG09ay5vYnNlcnZlcjtmW20udWlkX109bSwoImF0dHJpYnV0ZXMiPT09YyYmbC5hdHRyaWJ1dGVPbGRWYWx1ZXx8ImNoYXJhY3RlckRhdGEiPT09YyYmbC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpJiYoZ1ttLnVpZF9dPWUub2xkVmFsdWUpfX19Zm9yKHZhciBvIGluIGYpe3ZhciBtPWZbb10scD1uZXcgZChjLGEpOyJuYW1lImluIGUmJiJuYW1lc3BhY2UiaW4gZSYmKHAuYXR0cmlidXRlTmFtZT1lLm5hbWUscC5hdHRyaWJ1dGVOYW1lc3BhY2U9ZS5uYW1lc3BhY2UpLGUuYWRkZWROb2RlcyYmKHAuYWRkZWROb2Rlcz1lLmFkZGVkTm9kZXMpLGUucmVtb3ZlZE5vZGVzJiYocC5yZW1vdmVkTm9kZXM9ZS5yZW1vdmVkTm9kZXMpLGUucHJldmlvdXNTaWJsaW5nJiYocC5wcmV2aW91c1NpYmxpbmc9ZS5wcmV2aW91c1NpYmxpbmcpLGUubmV4dFNpYmxpbmcmJihwLm5leHRTaWJsaW5nPWUubmV4dFNpYmxpbmcpLHZvaWQgMCE9PWdbb10mJihwLm9sZFZhbHVlPWdbb10pLGIobSksbS5yZWNvcmRzXy5wdXNoKHApfX1mdW5jdGlvbiBoKGEpe2lmKHRoaXMuY2hpbGRMaXN0PSEhYS5jaGlsZExpc3QsdGhpcy5zdWJ0cmVlPSEhYS5zdWJ0cmVlLHRoaXMuYXR0cmlidXRlcz0iYXR0cmlidXRlcyJpbiBhfHwhKCJhdHRyaWJ1dGVPbGRWYWx1ZSJpbiBhfHwiYXR0cmlidXRlRmlsdGVyImluIGEpPyEhYS5hdHRyaWJ1dGVzOiEwLHRoaXMuY2hhcmFjdGVyRGF0YT0iY2hhcmFjdGVyRGF0YU9sZFZhbHVlImluIGEmJiEoImNoYXJhY3RlckRhdGEiaW4gYSk/ITA6ISFhLmNoYXJhY3RlckRhdGEsIXRoaXMuYXR0cmlidXRlcyYmKGEuYXR0cmlidXRlT2xkVmFsdWV8fCJhdHRyaWJ1dGVGaWx0ZXIiaW4gYSl8fCF0aGlzLmNoYXJhY3RlckRhdGEmJmEuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKXRocm93IG5ldyBUeXBlRXJyb3I7aWYodGhpcy5jaGFyYWN0ZXJEYXRhPSEhYS5jaGFyYWN0ZXJEYXRhLHRoaXMuYXR0cmlidXRlT2xkVmFsdWU9ISFhLmF0dHJpYnV0ZU9sZFZhbHVlLHRoaXMuY2hhcmFjdGVyRGF0YU9sZFZhbHVlPSEhYS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUsImF0dHJpYnV0ZUZpbHRlciJpbiBhKXtpZihudWxsPT1hLmF0dHJpYnV0ZUZpbHRlcnx8Im9iamVjdCIhPXR5cGVvZiBhLmF0dHJpYnV0ZUZpbHRlcil0aHJvdyBuZXcgVHlwZUVycm9yO3RoaXMuYXR0cmlidXRlRmlsdGVyPXEuY2FsbChhLmF0dHJpYnV0ZUZpbHRlcil9ZWxzZSB0aGlzLmF0dHJpYnV0ZUZpbHRlcj1udWxsfWZ1bmN0aW9uIGkoYSl7dGhpcy5jYWxsYmFja189YSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3IsdGhpcy5zY2hlZHVsZWRfPSExfWZ1bmN0aW9uIGooYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgaz1hLnNldEVuZE9mTWljcm90YXNrLGw9YS53cmFwSWZOZWVkZWQsbT1hLndyYXBwZXJzLG49bmV3IFdlYWtNYXAsbz1bXSxwPSExLHE9QXJyYXkucHJvdG90eXBlLnNsaWNlLHI9MDtpLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aSxvYnNlcnZlOmZ1bmN0aW9uKGEsYil7YT1sKGEpO3ZhciBjLGQ9bmV3IGgoYiksZT1uLmdldChhKTtlfHxuLnNldChhLGU9W10pO2Zvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKWVbZl0ub2JzZXJ2ZXI9PT10aGlzJiYoYz1lW2ZdLGMucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCksYy5vcHRpb25zPWQpO2N8fChjPW5ldyBqKHRoaXMsYSxkKSxlLnB1c2goYyksdGhpcy5ub2Rlc18ucHVzaChhKSl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1uLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107aWYoZC5vYnNlcnZlcj09PXRoaXMpe2Iuc3BsaWNlKGMsMSk7YnJlYWt9fX0sdGhpcyksdGhpcy5yZWNvcmRzXz1bXX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlY29yZHNfO3JldHVybiB0aGlzLnJlY29yZHNfPVtdLGF9fSxqLnByb3RvdHlwZT17YWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXtiKHRoaXMub2JzZXJ2ZXIpLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGEpO3ZhciBjPW4uZ2V0KGEpO2N8fG4uc2V0KGEsYz1bXSksYy5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylmb3IodmFyIGM9YVtiXSxkPW4uZ2V0KGMpLGU9MDtlPGQubGVuZ3RoO2UrKylpZihkW2VdPT09dGhpcyl7ZC5zcGxpY2UoZSwxKTticmVha319fSxhLmVucXVldWVNdXRhdGlvbj1nLGEucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnM9ZSxhLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9aSxhLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXt0aGlzLnJvb3Q9YSx0aGlzLnBhcmVudD1ifWZ1bmN0aW9uIGMoYSxiKXtpZihhLnRyZWVTY29wZV8hPT1iKXthLnRyZWVTY29wZV89Yjtmb3IodmFyIGQ9YS5zaGFkb3dSb290O2Q7ZD1kLm9sZGVyU2hhZG93Um9vdClkLnRyZWVTY29wZV8ucGFyZW50PWI7Zm9yKHZhciBlPWEuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyljKGUsYil9fWZ1bmN0aW9uIGQoYyl7aWYoYyBpbnN0YW5jZW9mIGEud3JhcHBlcnMuV2luZG93LGMudHJlZVNjb3BlXylyZXR1cm4gYy50cmVlU2NvcGVfO3ZhciBlLGY9Yy5wYXJlbnROb2RlO3JldHVybiBlPWY/ZChmKTpuZXcgYihjLG51bGwpLGMudHJlZVNjb3BlXz1lfWIucHJvdG90eXBlPXtnZXQgcmVuZGVyZXIoKXtyZXR1cm4gdGhpcy5yb290IGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290P2EuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMucm9vdC5ob3N0KTpudWxsfSxjb250YWluczpmdW5jdGlvbihhKXtmb3IoO2E7YT1hLnBhcmVudClpZihhPT09dGhpcylyZXR1cm4hMDtyZXR1cm4hMX19LGEuVHJlZVNjb3BlPWIsYS5nZXRUcmVlU2NvcGU9ZCxhLnNldFRyZWVTY29wZT1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhIGluc3RhbmNlb2YgVC5TaGFkb3dSb290fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIE0oYSkucm9vdH1mdW5jdGlvbiBkKGEsZCl7dmFyIGg9W10saT1hO2ZvcihoLnB1c2goaSk7aTspe3ZhciBqPWcoaSk7aWYoaiYmai5sZW5ndGg+MCl7Zm9yKHZhciBrPTA7azxqLmxlbmd0aDtrKyspe3ZhciBtPWpba107aWYoZihtKSl7dmFyIG49YyhtKSxvPW4ub2xkZXJTaGFkb3dSb290O28mJmgucHVzaChvKX1oLnB1c2gobSl9aT1qW2oubGVuZ3RoLTFdfWVsc2UgaWYoYihpKSl7aWYobChhLGkpJiZlKGQpKWJyZWFrO2k9aS5ob3N0LGgucHVzaChpKX1lbHNlIGk9aS5wYXJlbnROb2RlLGkmJmgucHVzaChpKX1yZXR1cm4gaH1mdW5jdGlvbiBlKGEpe2lmKCFhKXJldHVybiExO3N3aXRjaChhLnR5cGUpe2Nhc2UiYWJvcnQiOmNhc2UiZXJyb3IiOmNhc2Uic2VsZWN0IjpjYXNlImNoYW5nZSI6Y2FzZSJsb2FkIjpjYXNlInJlc2V0IjpjYXNlInJlc2l6ZSI6Y2FzZSJzY3JvbGwiOmNhc2Uic2VsZWN0c3RhcnQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBIVE1MU2hhZG93RWxlbWVudH1mdW5jdGlvbiBnKGIpe3JldHVybiBhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzKGIpfWZ1bmN0aW9uIGgoYSxiKXtpZigwPT09YS5sZW5ndGgpcmV0dXJuIGI7YiBpbnN0YW5jZW9mIFQuV2luZG93JiYoYj1iLmRvY3VtZW50KTtmb3IodmFyIGM9TShiKSxkPWFbMF0sZT1NKGQpLGY9aihjLGUpLGc9MDtnPGEubGVuZ3RoO2crKyl7dmFyIGg9YVtnXTtpZihNKGgpPT09ZilyZXR1cm4gaH1yZXR1cm4gYVthLmxlbmd0aC0xXX1mdW5jdGlvbiBpKGEpe2Zvcih2YXIgYj1bXTthO2E9YS5wYXJlbnQpYi5wdXNoKGEpO3JldHVybiBifWZ1bmN0aW9uIGooYSxiKXtmb3IodmFyIGM9aShhKSxkPWkoYiksZT1udWxsO2MubGVuZ3RoPjAmJmQubGVuZ3RoPjA7KXt2YXIgZj1jLnBvcCgpLGc9ZC5wb3AoKTtpZihmIT09ZylicmVhaztlPWZ9cmV0dXJuIGV9ZnVuY3Rpb24gayhhLGIsYyl7YiBpbnN0YW5jZW9mIFQuV2luZG93JiYoYj1iLmRvY3VtZW50KTt2YXIgZSxmPU0oYiksZz1NKGMpLGg9ZChjLGEpLGU9aihmLGcpO2V8fChlPWcucm9vdCk7Zm9yKHZhciBpPWU7aTtpPWkucGFyZW50KWZvcih2YXIgaz0wO2s8aC5sZW5ndGg7aysrKXt2YXIgbD1oW2tdO2lmKE0obCk9PT1pKXJldHVybiBsfXJldHVybiBudWxsfWZ1bmN0aW9uIGwoYSxiKXtyZXR1cm4gTShhKT09PU0oYil9ZnVuY3Rpb24gbShhKXtpZighVi5nZXQoYSkmJihWLnNldChhLCEwKSxvKFMoYSksUyhhLnRhcmdldCkpLEspKXt2YXIgYj1LO3Rocm93IEs9bnVsbCxifX1mdW5jdGlvbiBuKGEpe3N3aXRjaChhLnR5cGUpe2Nhc2UibG9hZCI6Y2FzZSJiZWZvcmV1bmxvYWQiOmNhc2UidW5sb2FkIjpyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBvKGIsYyl7aWYoVy5nZXQoYikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkU3RhdGVFcnJvciIpO1cuc2V0KGIsITApLGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBlLGYsZztpZihuKGIpJiYhYi5idWJibGVzKXt2YXIgaD1jO2ggaW5zdGFuY2VvZiBULkRvY3VtZW50JiYoZz1oLmRlZmF1bHRWaWV3KSYmKGY9aCxlPVtdKX1pZighZSlpZihjIGluc3RhbmNlb2YgVC5XaW5kb3cpZz1jLGU9W107ZWxzZSBpZihlPWQoYyxiKSwhbihiKSl7dmFyIGg9ZVtlLmxlbmd0aC0xXTtoIGluc3RhbmNlb2YgVC5Eb2N1bWVudCYmKGc9aC5kZWZhdWx0Vmlldyl9cmV0dXJuIGNiLnNldChiLGUpLHAoYixlLGcsZikmJnEoYixlLGcsZikmJnIoYixlLGcsZiksJC5zZXQoYixkYiksWS5kZWxldGUoYixudWxsKSxXLmRlbGV0ZShiKSxiLmRlZmF1bHRQcmV2ZW50ZWR9ZnVuY3Rpb24gcChhLGIsYyxkKXt2YXIgZT1lYjtpZihjJiYhcyhjLGEsZSxiLGQpKXJldHVybiExO2Zvcih2YXIgZj1iLmxlbmd0aC0xO2Y+MDtmLS0paWYoIXMoYltmXSxhLGUsYixkKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBxKGEsYixjLGQpe3ZhciBlPWZiLGY9YlswXXx8YztyZXR1cm4gcyhmLGEsZSxiLGQpfWZ1bmN0aW9uIHIoYSxiLGMsZCl7Zm9yKHZhciBlPWdiLGY9MTtmPGIubGVuZ3RoO2YrKylpZighcyhiW2ZdLGEsZSxiLGQpKXJldHVybjtjJiZiLmxlbmd0aD4wJiZzKGMsYSxlLGIsZCl9ZnVuY3Rpb24gcyhhLGIsYyxkLGUpe3ZhciBmPVUuZ2V0KGEpO2lmKCFmKXJldHVybiEwO3ZhciBnPWV8fGgoZCxhKTtpZihnPT09YSl7aWYoYz09PWViKXJldHVybiEwO2M9PT1nYiYmKGM9ZmIpfWVsc2UgaWYoYz09PWdiJiYhYi5idWJibGVzKXJldHVybiEwO2lmKCJyZWxhdGVkVGFyZ2V0ImluIGIpe3ZhciBpPVIoYiksaj1pLnJlbGF0ZWRUYXJnZXQ7aWYoail7aWYoaiBpbnN0YW5jZW9mIE9iamVjdCYmai5hZGRFdmVudExpc3RlbmVyKXt2YXIgbD1TKGopLG09ayhiLGEsbCk7aWYobT09PWcpcmV0dXJuITB9ZWxzZSBtPW51bGw7Wi5zZXQoYixtKX19JC5zZXQoYixjKTt2YXIgbj1iLnR5cGUsbz0hMTtYLnNldChiLGcpLFkuc2V0KGIsYSksZi5kZXB0aCsrO2Zvcih2YXIgcD0wLHE9Zi5sZW5ndGg7cT5wO3ArKyl7dmFyIHI9ZltwXTtpZihyLnJlbW92ZWQpbz0hMDtlbHNlIGlmKCEoci50eXBlIT09bnx8IXIuY2FwdHVyZSYmYz09PWVifHxyLmNhcHR1cmUmJmM9PT1nYikpdHJ5e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiByLmhhbmRsZXI/ci5oYW5kbGVyLmNhbGwoYSxiKTpyLmhhbmRsZXIuaGFuZGxlRXZlbnQoYiksYWIuZ2V0KGIpKXJldHVybiExfWNhdGNoKHMpe0t8fChLPXMpfX1pZihmLmRlcHRoLS0sbyYmMD09PWYuZGVwdGgpe3ZhciB0PWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgcD0wO3A8dC5sZW5ndGg7cCsrKXRbcF0ucmVtb3ZlZHx8Zi5wdXNoKHRbcF0pfXJldHVybiFfLmdldChiKX1mdW5jdGlvbiB0KGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB1KGEsYil7aWYoIShhIGluc3RhbmNlb2YgaGIpKXJldHVybiBTKHkoaGIsIkV2ZW50IixhLGIpKTt2YXIgYz1hO3JldHVybiBzYnx8ImJlZm9yZXVubG9hZCIhPT1jLnR5cGV8fHRoaXMgaW5zdGFuY2VvZiB6P3ZvaWQgUChjLHRoaXMpOm5ldyB6KGMpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIGEmJmEucmVsYXRlZFRhcmdldD9PYmplY3QuY3JlYXRlKGEse3JlbGF0ZWRUYXJnZXQ6e3ZhbHVlOlIoYS5yZWxhdGVkVGFyZ2V0KX19KTphfWZ1bmN0aW9uIHcoYSxiLGMpe3ZhciBkPXdpbmRvd1thXSxlPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGIgaW5zdGFuY2VvZiBkP3ZvaWQgUChiLHRoaXMpOlMoeShkLGEsYixjKSl9O2lmKGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLGMmJk4oZS5wcm90b3R5cGUsYyksZCl0cnl7TyhkLGUsbmV3IGQoInRlbXAiKSl9Y2F0Y2goZil7TyhkLGUsZG9jdW1lbnQuY3JlYXRlRXZlbnQoYSkpfXJldHVybiBlfWZ1bmN0aW9uIHgoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXthcmd1bWVudHNbYl09Uihhcmd1bWVudHNbYl0pO3ZhciBjPVIodGhpcyk7Y1thXS5hcHBseShjLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHkoYSxiLGMsZCl7aWYocWIpcmV0dXJuIG5ldyBhKGMsdihkKSk7dmFyIGU9Uihkb2N1bWVudC5jcmVhdGVFdmVudChiKSksZj1wYltiXSxnPVtjXTtyZXR1cm4gT2JqZWN0LmtleXMoZikuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1udWxsIT1kJiZhIGluIGQ/ZFthXTpmW2FdOyJyZWxhdGVkVGFyZ2V0Ij09PWEmJihiPVIoYikpLGcucHVzaChiKX0pLGVbImluaXQiK2JdLmFwcGx5KGUsZyksZX1mdW5jdGlvbiB6KGEpe3UuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIEEoYSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGE/ITA6YSYmYS5oYW5kbGVFdmVudH1mdW5jdGlvbiBCKGEpe3N3aXRjaChhKXtjYXNlIkRPTUF0dHJNb2RpZmllZCI6Y2FzZSJET01BdHRyaWJ1dGVOYW1lQ2hhbmdlZCI6Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOmNhc2UiRE9NRWxlbWVudE5hbWVDaGFuZ2VkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZCI6Y2FzZSJET01Ob2RlSW5zZXJ0ZWRJbnRvRG9jdW1lbnQiOmNhc2UiRE9NTm9kZVJlbW92ZWQiOmNhc2UiRE9NTm9kZVJlbW92ZWRGcm9tRG9jdW1lbnQiOmNhc2UiRE9NU3VidHJlZU1vZGlmaWVkIjpyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBDKGEpe1AoYSx0aGlzKX1mdW5jdGlvbiBEKGEpe3JldHVybiBhIGluc3RhbmNlb2YgVC5TaGFkb3dSb290JiYoYT1hLmhvc3QpLFIoYSl9ZnVuY3Rpb24gRShhLGIpe3ZhciBjPVUuZ2V0KGEpO2lmKGMpZm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspaWYoIWNbZF0ucmVtb3ZlZCYmY1tkXS50eXBlPT09YilyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBGKGEsYil7Zm9yKHZhciBjPVIoYSk7YztjPWMucGFyZW50Tm9kZSlpZihFKFMoYyksYikpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gRyhhKXtMKGEsdWIpfWZ1bmN0aW9uIEgoYixjLGUsZil7YS5yZW5kZXJBbGxQZW5kaW5nKCk7dmFyIGc9Uyh2Yi5jYWxsKFEoYyksZSxmKSk7aWYoIWcpcmV0dXJuIG51bGw7dmFyIGk9ZChnLG51bGwpLGo9aS5sYXN0SW5kZXhPZihiKTtyZXR1cm4tMT09aj9udWxsOihpPWkuc2xpY2UoMCxqKSxoKGksYikpfWZ1bmN0aW9uIEkoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9YmIuZ2V0KHRoaXMpOwpyZXR1cm4gYiYmYlthXSYmYlthXS52YWx1ZXx8bnVsbH19ZnVuY3Rpb24gSihhKXt2YXIgYj1hLnNsaWNlKDIpO3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD1iYi5nZXQodGhpcyk7ZHx8KGQ9T2JqZWN0LmNyZWF0ZShudWxsKSxiYi5zZXQodGhpcyxkKSk7dmFyIGU9ZFthXTtpZihlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixlLndyYXBwZWQsITEpLCJmdW5jdGlvbiI9PXR5cGVvZiBjKXt2YXIgZj1mdW5jdGlvbihiKXt2YXIgZD1jLmNhbGwodGhpcyxiKTtkPT09ITE/Yi5wcmV2ZW50RGVmYXVsdCgpOiJvbmJlZm9yZXVubG9hZCI9PT1hJiYic3RyaW5nIj09dHlwZW9mIGQmJihiLnJldHVyblZhbHVlPWQpfTt0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYixmLCExKSxkW2FdPXt2YWx1ZTpjLHdyYXBwZWQ6Zn19fX12YXIgSyxMPWEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIsTT1hLmdldFRyZWVTY29wZSxOPWEubWl4aW4sTz1hLnJlZ2lzdGVyV3JhcHBlcixQPWEuc2V0V3JhcHBlcixRPWEudW5zYWZlVW53cmFwLFI9YS51bndyYXAsUz1hLndyYXAsVD1hLndyYXBwZXJzLFU9KG5ldyBXZWFrTWFwLG5ldyBXZWFrTWFwKSxWPW5ldyBXZWFrTWFwLFc9bmV3IFdlYWtNYXAsWD1uZXcgV2Vha01hcCxZPW5ldyBXZWFrTWFwLFo9bmV3IFdlYWtNYXAsJD1uZXcgV2Vha01hcCxfPW5ldyBXZWFrTWFwLGFiPW5ldyBXZWFrTWFwLGJiPW5ldyBXZWFrTWFwLGNiPW5ldyBXZWFrTWFwLGRiPTAsZWI9MSxmYj0yLGdiPTM7dC5wcm90b3R5cGU9e2VxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGVyPT09YS5oYW5kbGVyJiZ0aGlzLnR5cGU9PT1hLnR5cGUmJnRoaXMuY2FwdHVyZT09PWEuY2FwdHVyZX0sZ2V0IHJlbW92ZWQoKXtyZXR1cm4gbnVsbD09PXRoaXMuaGFuZGxlcn0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW51bGx9fTt2YXIgaGI9d2luZG93LkV2ZW50O2hiLnByb3RvdHlwZS5wb2x5bWVyQmxhY2tMaXN0Xz17cmV0dXJuVmFsdWU6ITAsa2V5TG9jYXRpb246ITB9LHUucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIFguZ2V0KHRoaXMpfSxnZXQgY3VycmVudFRhcmdldCgpe3JldHVybiBZLmdldCh0aGlzKX0sZ2V0IGV2ZW50UGhhc2UoKXtyZXR1cm4gJC5nZXQodGhpcyl9LGdldCBwYXRoKCl7dmFyIGE9Y2IuZ2V0KHRoaXMpO3JldHVybiBhP2Euc2xpY2UoKTpbXX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7Xy5zZXQodGhpcywhMCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe18uc2V0KHRoaXMsITApLGFiLnNldCh0aGlzLCEwKX19LE8oaGIsdSxkb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSk7dmFyIGliPXcoIlVJRXZlbnQiLHUpLGpiPXcoIkN1c3RvbUV2ZW50Iix1KSxrYj17Z2V0IHJlbGF0ZWRUYXJnZXQoKXt2YXIgYT1aLmdldCh0aGlzKTtyZXR1cm4gdm9pZCAwIT09YT9hOlMoUih0aGlzKS5yZWxhdGVkVGFyZ2V0KX19LGxiPU4oe2luaXRNb3VzZUV2ZW50OngoImluaXRNb3VzZUV2ZW50IiwxNCl9LGtiKSxtYj1OKHtpbml0Rm9jdXNFdmVudDp4KCJpbml0Rm9jdXNFdmVudCIsNSl9LGtiKSxuYj13KCJNb3VzZUV2ZW50IixpYixsYiksb2I9dygiRm9jdXNFdmVudCIsaWIsbWIpLHBiPU9iamVjdC5jcmVhdGUobnVsbCkscWI9ZnVuY3Rpb24oKXt0cnl7bmV3IHdpbmRvdy5Gb2N1c0V2ZW50KCJmb2N1cyIpfWNhdGNoKGEpe3JldHVybiExfXJldHVybiEwfSgpO2lmKCFxYil7dmFyIHJiPWZ1bmN0aW9uKGEsYixjKXtpZihjKXt2YXIgZD1wYltjXTtiPU4oTih7fSxkKSxiKX1wYlthXT1ifTtyYigiRXZlbnQiLHtidWJibGVzOiExLGNhbmNlbGFibGU6ITF9KSxyYigiQ3VzdG9tRXZlbnQiLHtkZXRhaWw6bnVsbH0sIkV2ZW50IikscmIoIlVJRXZlbnQiLHt2aWV3Om51bGwsZGV0YWlsOjB9LCJFdmVudCIpLHJiKCJNb3VzZUV2ZW50Iix7c2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpLHJiKCJGb2N1c0V2ZW50Iix7cmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpfXZhciBzYj13aW5kb3cuQmVmb3JlVW5sb2FkRXZlbnQ7ei5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh1LnByb3RvdHlwZSksTih6LnByb3RvdHlwZSx7Z2V0IHJldHVyblZhbHVlKCl7cmV0dXJuIFEodGhpcykucmV0dXJuVmFsdWV9LHNldCByZXR1cm5WYWx1ZShhKXtRKHRoaXMpLnJldHVyblZhbHVlPWF9fSksc2ImJk8oc2Iseik7dmFyIHRiPXdpbmRvdy5FdmVudFRhcmdldCx1Yj1bImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdO1tOb2RlLFdpbmRvd10uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnByb3RvdHlwZTt1Yi5mb3JFYWNoKGZ1bmN0aW9uKGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLGErIl8iLHt2YWx1ZTpiW2FdfSl9KX0pLEMucHJvdG90eXBlPXthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtpZihBKGIpJiYhQihhKSl7dmFyIGQ9bmV3IHQoYSxiLGMpLGU9VS5nZXQodGhpcyk7aWYoZSl7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspaWYoZC5lcXVhbHMoZVtmXSkpcmV0dXJufWVsc2UgZT1bXSxlLmRlcHRoPTAsVS5zZXQodGhpcyxlKTtlLnB1c2goZCk7dmFyIGc9RCh0aGlzKTtnLmFkZEV2ZW50TGlzdGVuZXJfKGEsbSwhMCl9fSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtjPUJvb2xlYW4oYyk7dmFyIGQ9VS5nZXQodGhpcyk7aWYoZCl7Zm9yKHZhciBlPTAsZj0hMSxnPTA7ZzxkLmxlbmd0aDtnKyspZFtnXS50eXBlPT09YSYmZFtnXS5jYXB0dXJlPT09YyYmKGUrKyxkW2ddLmhhbmRsZXI9PT1iJiYoZj0hMCxkW2ddLnJlbW92ZSgpKSk7aWYoZiYmMT09PWUpe3ZhciBoPUQodGhpcyk7aC5yZW1vdmVFdmVudExpc3RlbmVyXyhhLG0sITApfX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYil7dmFyIGM9UihiKSxkPWMudHlwZTtWLnNldChjLCExKSxhLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgZTtGKHRoaXMsZCl8fChlPWZ1bmN0aW9uKCl7fSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZCxlLCEwKSk7dHJ5e3JldHVybiBSKHRoaXMpLmRpc3BhdGNoRXZlbnRfKGMpfWZpbmFsbHl7ZSYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGQsZSwhMCl9fX0sdGImJk8odGIsQyk7dmFyIHZiPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQ7YS5lbGVtZW50RnJvbVBvaW50PUgsYS5nZXRFdmVudEhhbmRsZXJHZXR0ZXI9SSxhLmdldEV2ZW50SGFuZGxlclNldHRlcj1KLGEud3JhcEV2ZW50VGFyZ2V0TWV0aG9kcz1HLGEud3JhcHBlcnMuQmVmb3JlVW5sb2FkRXZlbnQ9eixhLndyYXBwZXJzLkN1c3RvbUV2ZW50PWpiLGEud3JhcHBlcnMuRXZlbnQ9dSxhLndyYXBwZXJzLkV2ZW50VGFyZ2V0PUMsYS53cmFwcGVycy5Gb2N1c0V2ZW50PW9iLGEud3JhcHBlcnMuTW91c2VFdmVudD1uYixhLndyYXBwZXJzLlVJRXZlbnQ9aWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLHApfWZ1bmN0aW9uIGMoYSl7aihhLHRoaXMpfWZ1bmN0aW9uIGQoKXt0aGlzLmxlbmd0aD0wLGIodGhpcywibGVuZ3RoIil9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9bmV3IGQsZT0wO2U8YS5sZW5ndGg7ZSsrKWJbZV09bmV3IGMoYVtlXSk7cmV0dXJuIGIubGVuZ3RoPWUsYn1mdW5jdGlvbiBmKGEpe2cuY2FsbCh0aGlzLGEpfXZhciBnPWEud3JhcHBlcnMuVUlFdmVudCxoPWEubWl4aW4saT1hLnJlZ2lzdGVyV3JhcHBlcixqPWEuc2V0V3JhcHBlcixrPWEudW5zYWZlVW53cmFwLGw9YS53cmFwLG09d2luZG93LlRvdWNoRXZlbnQ7aWYobSl7dmFyIG47dHJ5e249ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIlRvdWNoRXZlbnQiKX1jYXRjaChvKXtyZXR1cm59dmFyIHA9e2VudW1lcmFibGU6ITF9O2MucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIGwoayh0aGlzKS50YXJnZXQpfX07dmFyIHE9e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpudWxsfTtbImNsaWVudFgiLCJjbGllbnRZIiwic2NyZWVuWCIsInNjcmVlblkiLCJwYWdlWCIsInBhZ2VZIiwiaWRlbnRpZmllciIsIndlYmtpdFJhZGl1c1giLCJ3ZWJraXRSYWRpdXNZIiwid2Via2l0Um90YXRpb25BbmdsZSIsIndlYmtpdEZvcmNlIl0uZm9yRWFjaChmdW5jdGlvbihhKXtxLmdldD1mdW5jdGlvbigpe3JldHVybiBrKHRoaXMpW2FdfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYy5wcm90b3R5cGUsYSxxKX0pLGQucHJvdG90eXBlPXtpdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzW2FdfX0sZi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSksaChmLnByb3RvdHlwZSx7Z2V0IHRvdWNoZXMoKXtyZXR1cm4gZShrKHRoaXMpLnRvdWNoZXMpfSxnZXQgdGFyZ2V0VG91Y2hlcygpe3JldHVybiBlKGsodGhpcykudGFyZ2V0VG91Y2hlcyl9LGdldCBjaGFuZ2VkVG91Y2hlcygpe3JldHVybiBlKGsodGhpcykuY2hhbmdlZFRvdWNoZXMpfSxpbml0VG91Y2hFdmVudDpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiTm90IGltcGxlbWVudGVkIil9fSksaShtLGYsbiksYS53cmFwcGVycy5Ub3VjaD1jLGEud3JhcHBlcnMuVG91Y2hFdmVudD1mLGEud3JhcHBlcnMuVG91Y2hMaXN0PWR9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYixoKX1mdW5jdGlvbiBjKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGQoYSl7aWYobnVsbD09YSlyZXR1cm4gYTtmb3IodmFyIGI9bmV3IGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyliW2RdPWcoYVtkXSk7cmV0dXJuIGIubGVuZ3RoPWUsYn1mdW5jdGlvbiBlKGEsYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gZChmKHRoaXMpW2JdLmFwcGx5KGYodGhpcyksYXJndW1lbnRzKSl9fXZhciBmPWEudW5zYWZlVW53cmFwLGc9YS53cmFwLGg9e2VudW1lcmFibGU6ITF9O2MucHJvdG90eXBlPXtpdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzW2FdfX0sYihjLnByb3RvdHlwZSwiaXRlbSIpLGEud3JhcHBlcnMuTm9kZUxpc3Q9YyxhLmFkZFdyYXBOb2RlTGlzdE1ldGhvZD1lLGEud3JhcE5vZGVMaXN0PWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Eud3JhcEhUTUxDb2xsZWN0aW9uPWEud3JhcE5vZGVMaXN0LGEud3JhcHBlcnMuSFRNTENvbGxlY3Rpb249YS53cmFwcGVycy5Ob2RlTGlzdH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtBKGEgaW5zdGFuY2VvZiB3KX1mdW5jdGlvbiBjKGEpe3ZhciBiPW5ldyB5O3JldHVybiBiWzBdPWEsYi5sZW5ndGg9MSxifWZ1bmN0aW9uIGQoYSxiLGMpe0MoYiwiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmMscHJldmlvdXNTaWJsaW5nOmEucHJldmlvdXNTaWJsaW5nLG5leHRTaWJsaW5nOmEubmV4dFNpYmxpbmd9KX1mdW5jdGlvbiBlKGEsYil7QyhhLCJjaGlsZExpc3QiLHtyZW1vdmVkTm9kZXM6Yn0pfWZ1bmN0aW9uIGYoYSxiLGQsZSl7aWYoYSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpe3ZhciBmPWgoYSk7UD0hMDtmb3IodmFyIGc9Zi5sZW5ndGgtMTtnPj0wO2ctLSlhLnJlbW92ZUNoaWxkKGZbZ10pLGZbZ10ucGFyZW50Tm9kZV89YjtQPSExO2Zvcih2YXIgZz0wO2c8Zi5sZW5ndGg7ZysrKWZbZ10ucHJldmlvdXNTaWJsaW5nXz1mW2ctMV18fGQsZltnXS5uZXh0U2libGluZ189ZltnKzFdfHxlO3JldHVybiBkJiYoZC5uZXh0U2libGluZ189ZlswXSksZSYmKGUucHJldmlvdXNTaWJsaW5nXz1mW2YubGVuZ3RoLTFdKSxmfXZhciBmPWMoYSksaT1hLnBhcmVudE5vZGU7cmV0dXJuIGkmJmkucmVtb3ZlQ2hpbGQoYSksYS5wYXJlbnROb2RlXz1iLGEucHJldmlvdXNTaWJsaW5nXz1kLGEubmV4dFNpYmxpbmdfPWUsZCYmKGQubmV4dFNpYmxpbmdfPWEpLGUmJihlLnByZXZpb3VzU2libGluZ189YSksZn1mdW5jdGlvbiBnKGEpe2lmKGEgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXJldHVybiBoKGEpO3ZhciBiPWMoYSksZT1hLnBhcmVudE5vZGU7cmV0dXJuIGUmJmQoYSxlLGIpLGJ9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9bmV3IHksYz0wLGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWJbYysrXT1kO3JldHVybiBiLmxlbmd0aD1jLGUoYSxiKSxifWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gaihhLGIpe0koYSxiKSxhLm5vZGVJc0luc2VydGVkXygpfWZ1bmN0aW9uIGsoYSxiKXtmb3IodmFyIGM9RChiKSxkPTA7ZDxhLmxlbmd0aDtkKyspaihhW2RdLGMpfWZ1bmN0aW9uIGwoYSl7SShhLG5ldyB6KGEsbnVsbCkpfWZ1bmN0aW9uIG0oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspbChhW2JdKX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9YS5ub2RlVHlwZT09PXcuRE9DVU1FTlRfTk9ERT9hOmEub3duZXJEb2N1bWVudDtjIT09Yi5vd25lckRvY3VtZW50JiZjLmFkb3B0Tm9kZShiKX1mdW5jdGlvbiBvKGIsYyl7aWYoYy5sZW5ndGgpe3ZhciBkPWIub3duZXJEb2N1bWVudDtpZihkIT09Y1swXS5vd25lckRvY3VtZW50KWZvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKWEuYWRvcHROb2RlTm9SZW1vdmUoY1tlXSxkKX19ZnVuY3Rpb24gcChhLGIpe28oYSxiKTt2YXIgYz1iLmxlbmd0aDtpZigxPT09YylyZXR1cm4gSyhiWzBdKTtmb3IodmFyIGQ9SyhhLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKSxlPTA7Yz5lO2UrKylkLmFwcGVuZENoaWxkKEsoYltlXSkpO3JldHVybiBkfWZ1bmN0aW9uIHEoYSl7aWYodm9pZCAwIT09YS5maXJzdENoaWxkXylmb3IodmFyIGI9YS5maXJzdENoaWxkXztiOyl7dmFyIGM9YjtiPWIubmV4dFNpYmxpbmdfLGMucGFyZW50Tm9kZV89Yy5wcmV2aW91c1NpYmxpbmdfPWMubmV4dFNpYmxpbmdfPXZvaWQgMH1hLmZpcnN0Q2hpbGRfPWEubGFzdENoaWxkXz12b2lkIDB9ZnVuY3Rpb24gcihhKXtpZihhLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtmb3IodmFyIGI9YS5maXJzdENoaWxkO2I7KXtBKGIucGFyZW50Tm9kZT09PWEpO3ZhciBjPWIubmV4dFNpYmxpbmcsZD1LKGIpLGU9ZC5wYXJlbnROb2RlO2UmJlcuY2FsbChlLGQpLGIucHJldmlvdXNTaWJsaW5nXz1iLm5leHRTaWJsaW5nXz1iLnBhcmVudE5vZGVfPW51bGwsYj1jfWEuZmlyc3RDaGlsZF89YS5sYXN0Q2hpbGRfPW51bGx9ZWxzZSBmb3IodmFyIGMsZj1LKGEpLGc9Zi5maXJzdENoaWxkO2c7KWM9Zy5uZXh0U2libGluZyxXLmNhbGwoZixnKSxnPWN9ZnVuY3Rpb24gcyhhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9ZnVuY3Rpb24gdChhKXtmb3IodmFyIGIsYz0wO2M8YS5sZW5ndGg7YysrKWI9YVtjXSxiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYil9ZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQ7aWYoZD1NKGM/US5jYWxsKGMsSihhKSwhMSk6Ui5jYWxsKEooYSksITEpKSxiKXtmb3IodmFyIGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWQuYXBwZW5kQ2hpbGQodShlLCEwLGMpKTtpZihhIGluc3RhbmNlb2YgTy5IVE1MVGVtcGxhdGVFbGVtZW50KWZvcih2YXIgZj1kLmNvbnRlbnQsZT1hLmNvbnRlbnQuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylmLmFwcGVuZENoaWxkKHUoZSwhMCxjKSl9cmV0dXJuIGR9ZnVuY3Rpb24gdihhLGIpe2lmKCFifHxEKGEpIT09RChiKSlyZXR1cm4hMTtmb3IodmFyIGM9YjtjO2M9Yy5wYXJlbnROb2RlKWlmKGM9PT1hKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHcoYSl7QShhIGluc3RhbmNlb2YgUykseC5jYWxsKHRoaXMsYSksdGhpcy5wYXJlbnROb2RlXz12b2lkIDAsdGhpcy5maXJzdENoaWxkXz12b2lkIDAsdGhpcy5sYXN0Q2hpbGRfPXZvaWQgMCx0aGlzLm5leHRTaWJsaW5nXz12b2lkIDAsdGhpcy5wcmV2aW91c1NpYmxpbmdfPXZvaWQgMCx0aGlzLnRyZWVTY29wZV89dm9pZCAwfXZhciB4PWEud3JhcHBlcnMuRXZlbnRUYXJnZXQseT1hLndyYXBwZXJzLk5vZGVMaXN0LHo9YS5UcmVlU2NvcGUsQT1hLmFzc2VydCxCPWEuZGVmaW5lV3JhcEdldHRlcixDPWEuZW5xdWV1ZU11dGF0aW9uLEQ9YS5nZXRUcmVlU2NvcGUsRT1hLmlzV3JhcHBlcixGPWEubWl4aW4sRz1hLnJlZ2lzdGVyVHJhbnNpZW50T2JzZXJ2ZXJzLEg9YS5yZWdpc3RlcldyYXBwZXIsST1hLnNldFRyZWVTY29wZSxKPWEudW5zYWZlVW53cmFwLEs9YS51bndyYXAsTD1hLnVud3JhcElmTmVlZGVkLE09YS53cmFwLE49YS53cmFwSWZOZWVkZWQsTz1hLndyYXBwZXJzLFA9ITEsUT1kb2N1bWVudC5pbXBvcnROb2RlLFI9d2luZG93Lk5vZGUucHJvdG90eXBlLmNsb25lTm9kZSxTPXdpbmRvdy5Ob2RlLFQ9d2luZG93LkRvY3VtZW50RnJhZ21lbnQsVT0oUy5wcm90b3R5cGUuYXBwZW5kQ2hpbGQsUy5wcm90b3R5cGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24pLFY9Uy5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLFc9Uy5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsWD1TLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQsWT0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxaPVk/ZnVuY3Rpb24oYSxiKXt0cnl7Vy5jYWxsKGEsYil9Y2F0Y2goYyl7aWYoIShhIGluc3RhbmNlb2YgVCkpdGhyb3cgY319OmZ1bmN0aW9uKGEsYil7Vy5jYWxsKGEsYil9O3cucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLEYody5wcm90b3R5cGUse2FwcGVuZENoaWxkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluc2VydEJlZm9yZShhLG51bGwpfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSxjKXtiKGEpO3ZhciBkO2M/RShjKT9kPUsoYyk6KGQ9YyxjPU0oZCkpOihjPW51bGwsZD1udWxsKSxjJiZBKGMucGFyZW50Tm9kZT09PXRoaXMpO3ZhciBlLGg9Yz9jLnByZXZpb3VzU2libGluZzp0aGlzLmxhc3RDaGlsZCxpPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhcyhhKTtpZihlPWk/ZyhhKTpmKGEsdGhpcyxoLGMpLGkpbih0aGlzLGEpLHEodGhpcyksVi5jYWxsKEoodGhpcyksSyhhKSxkKTtlbHNle2h8fCh0aGlzLmZpcnN0Q2hpbGRfPWVbMF0pLGN8fCh0aGlzLmxhc3RDaGlsZF89ZVtlLmxlbmd0aC0xXSx2b2lkIDA9PT10aGlzLmZpcnN0Q2hpbGRfJiYodGhpcy5maXJzdENoaWxkXz10aGlzLmZpcnN0Q2hpbGQpKTt2YXIgaj1kP2QucGFyZW50Tm9kZTpKKHRoaXMpO2o/Vi5jYWxsKGoscCh0aGlzLGUpLGQpOm8odGhpcyxlKX1yZXR1cm4gQyh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmUsbmV4dFNpYmxpbmc6YyxwcmV2aW91c1NpYmxpbmc6aH0pLGsoZSx0aGlzKSxhfSxyZW1vdmVDaGlsZDpmdW5jdGlvbihhKXtpZihiKGEpLGEucGFyZW50Tm9kZSE9PXRoaXMpe2Zvcih2YXIgZD0hMSxlPSh0aGlzLmNoaWxkTm9kZXMsdGhpcy5maXJzdENoaWxkKTtlO2U9ZS5uZXh0U2libGluZylpZihlPT09YSl7ZD0hMDticmVha31pZighZCl0aHJvdyBuZXcgRXJyb3IoIk5vdEZvdW5kRXJyb3IiKX12YXIgZj1LKGEpLGc9YS5uZXh0U2libGluZyxoPWEucHJldmlvdXNTaWJsaW5nO2lmKHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe3ZhciBpPXRoaXMuZmlyc3RDaGlsZCxqPXRoaXMubGFzdENoaWxkLGs9Zi5wYXJlbnROb2RlO2smJlooayxmKSxpPT09YSYmKHRoaXMuZmlyc3RDaGlsZF89Zyksaj09PWEmJih0aGlzLmxhc3RDaGlsZF89aCksaCYmKGgubmV4dFNpYmxpbmdfPWcpLGcmJihnLnByZXZpb3VzU2libGluZ189aCksYS5wcmV2aW91c1NpYmxpbmdfPWEubmV4dFNpYmxpbmdfPWEucGFyZW50Tm9kZV89dm9pZCAwfWVsc2UgcSh0aGlzKSxaKEoodGhpcyksZik7cmV0dXJuIFB8fEModGhpcywiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmMoYSksbmV4dFNpYmxpbmc6ZyxwcmV2aW91c1NpYmxpbmc6aH0pLEcodGhpcyxhKSxhfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxkKXtiKGEpO3ZhciBlO2lmKEUoZCk/ZT1LKGQpOihlPWQsZD1NKGUpKSxkLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3ZhciBoLGk9ZC5uZXh0U2libGluZyxqPWQucHJldmlvdXNTaWJsaW5nLG09IXRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkmJiFzKGEpO3JldHVybiBtP2g9ZyhhKTooaT09PWEmJihpPWEubmV4dFNpYmxpbmcpLGg9ZihhLHRoaXMsaixpKSksbT8obih0aGlzLGEpLHEodGhpcyksWC5jYWxsKEoodGhpcyksSyhhKSxlKSk6KHRoaXMuZmlyc3RDaGlsZD09PWQmJih0aGlzLmZpcnN0Q2hpbGRfPWhbMF0pLHRoaXMubGFzdENoaWxkPT09ZCYmKHRoaXMubGFzdENoaWxkXz1oW2gubGVuZ3RoLTFdKSxkLnByZXZpb3VzU2libGluZ189ZC5uZXh0U2libGluZ189ZC5wYXJlbnROb2RlXz12b2lkIDAsZS5wYXJlbnROb2RlJiZYLmNhbGwoZS5wYXJlbnROb2RlLHAodGhpcyxoKSxlKSksQyh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmgscmVtb3ZlZE5vZGVzOmMoZCksbmV4dFNpYmxpbmc6aSxwcmV2aW91c1NpYmxpbmc6an0pLGwoZCksayhoLHRoaXMpLGR9LG5vZGVJc0luc2VydGVkXzpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYS5ub2RlSXNJbnNlcnRlZF8oKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86TShKKHRoaXMpLnBhcmVudE5vZGUpfSxnZXQgZmlyc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmZpcnN0Q2hpbGRfP3RoaXMuZmlyc3RDaGlsZF86TShKKHRoaXMpLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubGFzdENoaWxkXz90aGlzLmxhc3RDaGlsZF86TShKKHRoaXMpLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpNKEoodGhpcykubmV4dFNpYmxpbmcpfSxnZXQgcHJldmlvdXNTaWJsaW5nKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMucHJldmlvdXNTaWJsaW5nXz90aGlzLnByZXZpb3VzU2libGluZ186TShKKHRoaXMpLnByZXZpb3VzU2libGluZyl9LGdldCBwYXJlbnRFbGVtZW50KCl7Zm9yKHZhciBhPXRoaXMucGFyZW50Tm9kZTthJiZhLm5vZGVUeXBlIT09dy5FTEVNRU5UX05PREU7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxnZXQgdGV4dENvbnRlbnQoKXtmb3IodmFyIGE9IiIsYj10aGlzLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpYi5ub2RlVHlwZSE9dy5DT01NRU5UX05PREUmJihhKz1iLnRleHRDb250ZW50KTtyZXR1cm4gYX0sc2V0IHRleHRDb250ZW50KGEpe3ZhciBiPWkodGhpcy5jaGlsZE5vZGVzKTtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtpZihyKHRoaXMpLCIiIT09YSl7dmFyIGM9Sih0aGlzKS5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpO3RoaXMuYXBwZW5kQ2hpbGQoYyl9fWVsc2UgcSh0aGlzKSxKKHRoaXMpLnRleHRDb250ZW50PWE7dmFyIGQ9aSh0aGlzLmNoaWxkTm9kZXMpO0ModGhpcywiY2hpbGRMaXN0Iix7YWRkZWROb2RlczpkLHJlbW92ZWROb2RlczpifSksbShiKSxrKGQsdGhpcyl9LGdldCBjaGlsZE5vZGVzKCl7Zm9yKHZhciBhPW5ldyB5LGI9MCxjPXRoaXMuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZylhW2IrK109YztyZXR1cm4gYS5sZW5ndGg9YixhfSxjbG9uZU5vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHUodGhpcyxhKX0sY29udGFpbnM6ZnVuY3Rpb24oYSl7cmV0dXJuIHYodGhpcyxOKGEpKX0sY29tcGFyZURvY3VtZW50UG9zaXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIFUuY2FsbChKKHRoaXMpLEwoYSkpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPWkodGhpcy5jaGlsZE5vZGVzKSxkPVtdLGU9IiIsZj0wO2Y8Yy5sZW5ndGg7ZisrKWI9Y1tmXSxiLm5vZGVUeXBlPT09dy5URVhUX05PREU/YXx8Yi5kYXRhLmxlbmd0aD9hPyhlKz1iLmRhdGEsZC5wdXNoKGIpKTphPWI6dGhpcy5yZW1vdmVOb2RlKGIpOihhJiZkLmxlbmd0aCYmKGEuZGF0YSs9ZSx0KGQpKSxkPVtdLGU9IiIsYT1udWxsLGIuY2hpbGROb2Rlcy5sZW5ndGgmJmIubm9ybWFsaXplKCkpO2EmJmQubGVuZ3RoJiYoYS5kYXRhKz1lLHQoZCkpfX0pLEIodywib3duZXJEb2N1bWVudCIpLEgoUyx3LGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3IsZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwsdy5wcm90b3R5cGU9RihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx3LnByb3RvdHlwZSksYS5jbG9uZU5vZGU9dSxhLm5vZGVXYXNBZGRlZD1qLGEubm9kZVdhc1JlbW92ZWQ9bCxhLm5vZGVzV2VyZUFkZGVkPWssYS5ub2Rlc1dlcmVSZW1vdmVkPW0sYS5vcmlnaW5hbEluc2VydEJlZm9yZT1WLGEub3JpZ2luYWxSZW1vdmVDaGlsZD1XLGEuc25hcHNob3ROb2RlTGlzdD1pLGEud3JhcHBlcnMuTm9kZT13fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIsYyxkLGUpe2Zvcih2YXIgZj1udWxsLGc9bnVsbCxoPTAsaT1iLmxlbmd0aDtpPmg7aCsrKWY9cyhiW2hdKSwhZSYmKGc9cShmKS5yb290KSYmZyBpbnN0YW5jZW9mIGEud3JhcHBlcnMuU2hhZG93Um9vdHx8KGRbYysrXT1mKTtyZXR1cm4gY31mdW5jdGlvbiBjKGEpe3JldHVybiBTdHJpbmcoYSkucmVwbGFjZSgvXC9kZWVwXC8vZywiICIpfWZ1bmN0aW9uIGQoYSxiKXtmb3IodmFyIGMsZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KXtpZihlLm1hdGNoZXMoYikpcmV0dXJuIGU7aWYoYz1kKGUsYikpcmV0dXJuIGM7ZT1lLm5leHRFbGVtZW50U2libGluZ31yZXR1cm4gbnVsbH1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGEubWF0Y2hlcyhiKX1mdW5jdGlvbiBmKGEsYixjKXt2YXIgZD1hLmxvY2FsTmFtZTtyZXR1cm4gZD09PWJ8fGQ9PT1jJiZhLm5hbWVzcGFjZVVSST09PUR9ZnVuY3Rpb24gZygpe3JldHVybiEwfWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBhLmxvY2FsTmFtZT09PWN9ZnVuY3Rpb24gaShhLGIpe3JldHVybiBhLm5hbWVzcGFjZVVSST09PWJ9ZnVuY3Rpb24gaihhLGIsYyl7cmV0dXJuIGEubmFtZXNwYWNlVVJJPT09YiYmYS5sb2NhbE5hbWU9PT1jfWZ1bmN0aW9uIGsoYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1hLmZpcnN0RWxlbWVudENoaWxkO2c7KWQoZyxlLGYpJiYoY1tiKytdPWcpLGI9ayhnLGIsYyxkLGUsZiksZz1nLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gYn1mdW5jdGlvbiBsKGMsZCxlLGYsZyl7dmFyIGgsaT1yKHRoaXMpLGo9cSh0aGlzKS5yb290O2lmKGogaW5zdGFuY2VvZiBhLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIGsodGhpcyxkLGUsYyxmLG51bGwpO2lmKGkgaW5zdGFuY2VvZiBCKWg9dy5jYWxsKGksZik7ZWxzZXtpZighKGkgaW5zdGFuY2VvZiBDKSlyZXR1cm4gayh0aGlzLGQsZSxjLGYsbnVsbCk7aD12LmNhbGwoaSxmKX1yZXR1cm4gYihoLGQsZSxnKX1mdW5jdGlvbiBtKGMsZCxlLGYsZyl7dmFyIGgsaT1yKHRoaXMpLGo9cSh0aGlzKS5yb290O2lmKGogaW5zdGFuY2VvZiBhLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIGsodGhpcyxkLGUsYyxmLGcpO2lmKGkgaW5zdGFuY2VvZiBCKWg9eS5jYWxsKGksZixnKTtlbHNle2lmKCEoaSBpbnN0YW5jZW9mIEMpKXJldHVybiBrKHRoaXMsZCxlLGMsZixnKTtoPXguY2FsbChpLGYsZyl9cmV0dXJuIGIoaCxkLGUsITEpfWZ1bmN0aW9uIG4oYyxkLGUsZixnKXt2YXIgaCxpPXIodGhpcyksaj1xKHRoaXMpLnJvb3Q7aWYoaiBpbnN0YW5jZW9mIGEud3JhcHBlcnMuU2hhZG93Um9vdClyZXR1cm4gayh0aGlzLGQsZSxjLGYsZyk7aWYoaSBpbnN0YW5jZW9mIEIpaD1BLmNhbGwoaSxmLGcpO2Vsc2V7aWYoIShpIGluc3RhbmNlb2YgQykpcmV0dXJuIGsodGhpcyxkLGUsYyxmLGcpO2g9ei5jYWxsKGksZixnKX1yZXR1cm4gYihoLGQsZSwhMSl9dmFyIG89YS53cmFwcGVycy5IVE1MQ29sbGVjdGlvbixwPWEud3JhcHBlcnMuTm9kZUxpc3QscT1hLmdldFRyZWVTY29wZSxyPWEudW5zYWZlVW53cmFwLHM9YS53cmFwLHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcix1PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yLHY9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCx3PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsLHg9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUseT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUsej1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZU5TLEE9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lTlMsQj13aW5kb3cuRWxlbWVudCxDPXdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCxEPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIixFPXtxdWVyeVNlbGVjdG9yOmZ1bmN0aW9uKGIpe3ZhciBlPWMoYiksZj1lIT09YjtiPWU7dmFyIGcsaD1yKHRoaXMpLGk9cSh0aGlzKS5yb290O2lmKGkgaW5zdGFuY2VvZiBhLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIGQodGhpcyxiKTtpZihoIGluc3RhbmNlb2YgQilnPXModS5jYWxsKGgsYikpO2Vsc2V7aWYoIShoIGluc3RhbmNlb2YgQykpcmV0dXJuIGQodGhpcyxiKTtnPXModC5jYWxsKGgsYikpfXJldHVybiBnJiYhZiYmKGk9cShnKS5yb290KSYmaSBpbnN0YW5jZW9mIGEud3JhcHBlcnMuU2hhZG93Um9vdD9kKHRoaXMsYik6Z30scXVlcnlTZWxlY3RvckFsbDpmdW5jdGlvbihhKXt2YXIgYj1jKGEpLGQ9YiE9PWE7YT1iO3ZhciBmPW5ldyBwO3JldHVybiBmLmxlbmd0aD1sLmNhbGwodGhpcyxlLDAsZixhLGQpLGZ9fSxGPXtnZXRFbGVtZW50c0J5VGFnTmFtZTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgbyxjPSIqIj09PWE/ZzpmO3JldHVybiBiLmxlbmd0aD1tLmNhbGwodGhpcyxjLDAsYixhLGEudG9Mb3dlckNhc2UoKSksYn0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCIuIithKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWVOUzpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBvLGQ9bnVsbDtyZXR1cm4gZD0iKiI9PT1hPyIqIj09PWI/ZzpoOiIqIj09PWI/aTpqLGMubGVuZ3RoPW4uY2FsbCh0aGlzLGQsMCxjLGF8fG51bGwsYiksY319O2EuR2V0RWxlbWVudHNCeUludGVyZmFjZT1GLGEuU2VsZWN0b3JzSW50ZXJmYWNlPUV9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Zm9yKDthJiZhLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWE9YS5uZXh0U2libGluZztyZXR1cm4gYX1mdW5jdGlvbiBjKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEucHJldmlvdXNTaWJsaW5nO3JldHVybiBhfXZhciBkPWEud3JhcHBlcnMuTm9kZUxpc3QsZT17Z2V0IGZpcnN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGIodGhpcy5maXJzdENoaWxkKX0sZ2V0IGxhc3RFbGVtZW50Q2hpbGQoKXtyZXR1cm4gYyh0aGlzLmxhc3RDaGlsZCl9LGdldCBjaGlsZEVsZW1lbnRDb3VudCgpe2Zvcih2YXIgYT0wLGI9dGhpcy5maXJzdEVsZW1lbnRDaGlsZDtiO2I9Yi5uZXh0RWxlbWVudFNpYmxpbmcpYSsrO3JldHVybiBhfSxnZXQgY2hpbGRyZW4oKXtmb3IodmFyIGE9bmV3IGQsYj0wLGM9dGhpcy5maXJzdEVsZW1lbnRDaGlsZDtjO2M9Yy5uZXh0RWxlbWVudFNpYmxpbmcpYVtiKytdPWM7cmV0dXJuIGEubGVuZ3RoPWIsYX0scmVtb3ZlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYXJlbnROb2RlO2EmJmEucmVtb3ZlQ2hpbGQodGhpcyl9fSxmPXtnZXQgbmV4dEVsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGIodGhpcy5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c0VsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGModGhpcy5wcmV2aW91c1NpYmxpbmcpfX07YS5DaGlsZE5vZGVJbnRlcmZhY2U9ZixhLlBhcmVudE5vZGVJbnRlcmZhY2U9ZX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtkLmNhbGwodGhpcyxhKX12YXIgYz1hLkNoaWxkTm9kZUludGVyZmFjZSxkPWEud3JhcHBlcnMuTm9kZSxlPWEuZW5xdWV1ZU11dGF0aW9uLGY9YS5taXhpbixnPWEucmVnaXN0ZXJXcmFwcGVyLGg9YS51bnNhZmVVbndyYXAsaT13aW5kb3cuQ2hhcmFjdGVyRGF0YTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxmKGIucHJvdG90eXBlLHtnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoYSl7dGhpcy5kYXRhPWF9LGdldCBkYXRhKCl7cmV0dXJuIGgodGhpcykuZGF0YX0sc2V0IGRhdGEoYSl7dmFyIGI9aCh0aGlzKS5kYXRhO2UodGhpcywiY2hhcmFjdGVyRGF0YSIse29sZFZhbHVlOmJ9KSxoKHRoaXMpLmRhdGE9YX19KSxmKGIucHJvdG90eXBlLGMpLGcoaSxiLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGE+Pj4wfWZ1bmN0aW9uIGMoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGQ9YS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhLGU9KGEuZW5xdWV1ZU11dGF0aW9uLGEubWl4aW4pLGY9YS5yZWdpc3RlcldyYXBwZXIsZz13aW5kb3cuVGV4dDtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGMucHJvdG90eXBlLHtzcGxpdFRleHQ6ZnVuY3Rpb24oYSl7YT1iKGEpO3ZhciBjPXRoaXMuZGF0YTtpZihhPmMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW5kZXhTaXplRXJyb3IiKTt2YXIgZD1jLnNsaWNlKDAsYSksZT1jLnNsaWNlKGEpO3RoaXMuZGF0YT1kO3ZhciBmPXRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKTtyZXR1cm4gdGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYsdGhpcy5uZXh0U2libGluZyksZn19KSxmKGcsYyxkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGEud3JhcHBlcnMuVGV4dD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIpe2EuaW52YWxpZGF0ZVJlbmRlcmVyQmFzZWRPbkF0dHJpYnV0ZShiLCJjbGFzcyIpfWZ1bmN0aW9uIGMoYSxiKXtkKGEsdGhpcyksdGhpcy5vd25lckVsZW1lbnRfPWJ9dmFyIGQ9YS5zZXRXcmFwcGVyLGU9YS51bnNhZmVVbndyYXA7Yy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmMsZ2V0IGxlbmd0aCgpe3JldHVybiBlKHRoaXMpLmxlbmd0aH0saXRlbTpmdW5jdGlvbihhKXtyZXR1cm4gZSh0aGlzKS5pdGVtKGEpfSxjb250YWluczpmdW5jdGlvbihhKXtyZXR1cm4gZSh0aGlzKS5jb250YWlucyhhKX0sYWRkOmZ1bmN0aW9uKCl7ZSh0aGlzKS5hZGQuYXBwbHkoZSh0aGlzKSxhcmd1bWVudHMpLGIodGhpcy5vd25lckVsZW1lbnRfKX0scmVtb3ZlOmZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmUuYXBwbHkoZSh0aGlzKSxhcmd1bWVudHMpLGIodGhpcy5vd25lckVsZW1lbnRfKX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dmFyIGE9ZSh0aGlzKS50b2dnbGUuYXBwbHkoZSh0aGlzKSxhcmd1bWVudHMpO3JldHVybiBiKHRoaXMub3duZXJFbGVtZW50XyksYX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS50b1N0cmluZygpfX0sYS53cmFwcGVycy5ET01Ub2tlbkxpc3Q9Y30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiLGMpe3ZhciBkPWIucGFyZW50Tm9kZTtpZihkJiZkLnNoYWRvd1Jvb3Qpe3ZhciBlPWEuZ2V0UmVuZGVyZXJGb3JIb3N0KGQpO2UuZGVwZW5kc09uQXR0cmlidXRlKGMpJiZlLmludmFsaWRhdGUoKX19ZnVuY3Rpb24gYyhhLGIsYyl7ayhhLCJhdHRyaWJ1dGVzIix7bmFtZTpiLG5hbWVzcGFjZTpudWxsLG9sZFZhbHVlOmN9KX1mdW5jdGlvbiBkKGEpe2cuY2FsbCh0aGlzLGEpfXZhciBlPWEuQ2hpbGROb2RlSW50ZXJmYWNlLGY9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGc9YS53cmFwcGVycy5Ob2RlLGg9YS53cmFwcGVycy5ET01Ub2tlbkxpc3QsaT1hLlBhcmVudE5vZGVJbnRlcmZhY2Usaj1hLlNlbGVjdG9yc0ludGVyZmFjZSxrPShhLmFkZFdyYXBOb2RlTGlzdE1ldGhvZCxhLmVucXVldWVNdXRhdGlvbiksbD1hLm1peGluLG09KGEub25lT2YsYS5yZWdpc3RlcldyYXBwZXIpLG49YS51bnNhZmVVbndyYXAsbz1hLndyYXBwZXJzLHA9d2luZG93LkVsZW1lbnQscT1bIm1hdGNoZXMiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciJdLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gcC5wcm90b3R5cGVbYV19KSxyPXFbMF0scz1wLnByb3RvdHlwZVtyXSx0PW5ldyBXZWFrTWFwO2QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZy5wcm90b3R5cGUpLGwoZC5wcm90b3R5cGUse2NyZWF0ZVNoYWRvd1Jvb3Q6ZnVuY3Rpb24oKXt2YXIgYj1uZXcgby5TaGFkb3dSb290KHRoaXMpO24odGhpcykucG9seW1lclNoYWRvd1Jvb3RfPWI7dmFyIGM9YS5nZXRSZW5kZXJlckZvckhvc3QodGhpcyk7cmV0dXJuIGMuaW52YWxpZGF0ZSgpLGJ9LGdldCBzaGFkb3dSb290KCl7cmV0dXJuIG4odGhpcykucG9seW1lclNoYWRvd1Jvb3RffHxudWxsfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxkKXt2YXIgZT1uKHRoaXMpLmdldEF0dHJpYnV0ZShhKTtuKHRoaXMpLnNldEF0dHJpYnV0ZShhLGQpLGModGhpcyxhLGUpLGIodGhpcyxhKX0scmVtb3ZlQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3ZhciBkPW4odGhpcykuZ2V0QXR0cmlidXRlKGEpO24odGhpcykucmVtb3ZlQXR0cmlidXRlKGEpLGModGhpcyxhLGQpLGIodGhpcyxhKX0sbWF0Y2hlczpmdW5jdGlvbihhKXtyZXR1cm4gcy5jYWxsKG4odGhpcyksYSl9LGdldCBjbGFzc0xpc3QoKXt2YXIgYT10LmdldCh0aGlzKTtyZXR1cm4gYXx8dC5zZXQodGhpcyxhPW5ldyBoKG4odGhpcykuY2xhc3NMaXN0LHRoaXMpKSxhfSxnZXQgY2xhc3NOYW1lKCl7cmV0dXJuIG4odGhpcykuY2xhc3NOYW1lfSxzZXQgY2xhc3NOYW1lKGEpe3RoaXMuc2V0QXR0cmlidXRlKCJjbGFzcyIsYSl9LGdldCBpZCgpe3JldHVybiBuKHRoaXMpLmlkfSxzZXQgaWQoYSl7dGhpcy5zZXRBdHRyaWJ1dGUoImlkIixhKX19KSxxLmZvckVhY2goZnVuY3Rpb24oYSl7Im1hdGNoZXMiIT09YSYmKGQucHJvdG90eXBlW2FdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1hdGNoZXMoYSl9KX0pLHAucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QmJihkLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PWQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QpLGwoZC5wcm90b3R5cGUsZSksbChkLnByb3RvdHlwZSxmKSxsKGQucHJvdG90eXBlLGkpLGwoZC5wcm90b3R5cGUsaiksbShwLGQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG51bGwsIngiKSksYS5pbnZhbGlkYXRlUmVuZGVyZXJCYXNlZE9uQXR0cmlidXRlPWIsYS5tYXRjaGVzTmFtZXM9cSxhLndyYXBwZXJzLkVsZW1lbnQ9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYSl7Y2FzZSImIjpyZXR1cm4iJmFtcDsiO2Nhc2UiPCI6cmV0dXJuIiZsdDsiO2Nhc2UiPiI6cmV0dXJuIiZndDsiO2Nhc2UnIic6cmV0dXJuIiZxdW90OyI7Y2FzZSJceGEwIjpyZXR1cm4iJm5ic3A7In19ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5yZXBsYWNlKEEsYil9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5yZXBsYWNlKEIsYil9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9e30sYz0wO2M8YS5sZW5ndGg7YysrKWJbYVtjXV09ITA7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIpe3N3aXRjaChhLm5vZGVUeXBlKXtjYXNlIE5vZGUuRUxFTUVOVF9OT0RFOmZvcih2YXIgZSxmPWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpLGg9IjwiK2YsaT1hLmF0dHJpYnV0ZXMsaj0wO2U9aVtqXTtqKyspaCs9IiAiK2UubmFtZSsnPSInK2MoZS52YWx1ZSkrJyInO3JldHVybiBoKz0iPiIsQ1tmXT9oOmgrZyhhKSsiPC8iK2YrIj4iO2Nhc2UgTm9kZS5URVhUX05PREU6dmFyIGs9YS5kYXRhO3JldHVybiBiJiZEW2IubG9jYWxOYW1lXT9rOmQoayk7Y2FzZSBOb2RlLkNPTU1FTlRfTk9ERTpyZXR1cm4iPCEtLSIrYS5kYXRhKyItLT4iO2RlZmF1bHQ6dGhyb3cgY29uc29sZS5lcnJvcihhKSxuZXcgRXJyb3IoIm5vdCBpbXBsZW1lbnRlZCIpfX1mdW5jdGlvbiBnKGEpe2EgaW5zdGFuY2VvZiB6LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJihhPWEuY29udGVudCk7Zm9yKHZhciBiPSIiLGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWIrPWYoYyxhKTtyZXR1cm4gYn1mdW5jdGlvbiBoKGEsYixjKXt2YXIgZD1jfHwiZGl2IjthLnRleHRDb250ZW50PSIiO3ZhciBlPXgoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZCkpO2UuaW5uZXJIVE1MPWI7Zm9yKHZhciBmO2Y9ZS5maXJzdENoaWxkOylhLmFwcGVuZENoaWxkKHkoZikpfWZ1bmN0aW9uIGkoYSl7by5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gaihhLGIpe3ZhciBjPXgoYS5jbG9uZU5vZGUoITEpKTtjLmlubmVySFRNTD1iO2Zvcih2YXIgZCxlPXgoZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtkPWMuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChkKTtyZXR1cm4geShlKX1mdW5jdGlvbiBrKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx3KHRoaXMpW2JdfX1mdW5jdGlvbiBsKGEpe3AoaSxhLGsoYSkpfWZ1bmN0aW9uIG0oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLGIse2dldDprKGIpLHNldDpmdW5jdGlvbihjKXthLnJlbmRlckFsbFBlbmRpbmcoKSx3KHRoaXMpW2JdPWN9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9ZnVuY3Rpb24gbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsYix7dmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdyh0aGlzKVtiXS5hcHBseSh3KHRoaXMpLGFyZ3VtZW50cyl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIG89YS53cmFwcGVycy5FbGVtZW50LHA9YS5kZWZpbmVHZXR0ZXIscT1hLmVucXVldWVNdXRhdGlvbixyPWEubWl4aW4scz1hLm5vZGVzV2VyZUFkZGVkLHQ9YS5ub2Rlc1dlcmVSZW1vdmVkLHU9YS5yZWdpc3RlcldyYXBwZXIsdj1hLnNuYXBzaG90Tm9kZUxpc3Qsdz1hLnVuc2FmZVVud3JhcCx4PWEudW53cmFwLHk9YS53cmFwLHo9YS53cmFwcGVycyxBPS9bJlx1MDBBMCJdL2csQj0vWyZcdTAwQTA8Pl0vZyxDPWUoWyJhcmVhIiwiYmFzZSIsImJyIiwiY29sIiwiY29tbWFuZCIsImVtYmVkIiwiaHIiLCJpbWciLCJpbnB1dCIsImtleWdlbiIsImxpbmsiLCJtZXRhIiwicGFyYW0iLCJzb3VyY2UiLCJ0cmFjayIsIndiciJdKSxEPWUoWyJzdHlsZSIsInNjcmlwdCIsInhtcCIsImlmcmFtZSIsIm5vZW1iZWQiLCJub2ZyYW1lcyIsInBsYWludGV4dCIsIm5vc2NyaXB0Il0pLEU9L01TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksRj13aW5kb3cuSFRNTEVsZW1lbnQsRz13aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudDtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxyKGkucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGcodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7aWYoRSYmRFt0aGlzLmxvY2FsTmFtZV0pcmV0dXJuIHZvaWQodGhpcy50ZXh0Q29udGVudD1hKTt2YXIgYj12KHRoaXMuY2hpbGROb2Rlcyk7dGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKT90aGlzIGluc3RhbmNlb2Ygei5IVE1MVGVtcGxhdGVFbGVtZW50P2godGhpcy5jb250ZW50LGEpOmgodGhpcyxhLHRoaXMudGFnTmFtZSk6IUcmJnRoaXMgaW5zdGFuY2VvZiB6LkhUTUxUZW1wbGF0ZUVsZW1lbnQ/aCh0aGlzLmNvbnRlbnQsYSk6dyh0aGlzKS5pbm5lckhUTUw9YTt2YXIgYz12KHRoaXMuY2hpbGROb2Rlcyk7cSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmMscmVtb3ZlZE5vZGVzOmJ9KSx0KGIpLHMoYyx0aGlzKX0sZ2V0IG91dGVySFRNTCgpe3JldHVybiBmKHRoaXMsdGhpcy5wYXJlbnROb2RlKX0sc2V0IG91dGVySFRNTChhKXt2YXIgYj10aGlzLnBhcmVudE5vZGU7aWYoYil7Yi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKTt2YXIgYz1qKGIsYSk7Yi5yZXBsYWNlQ2hpbGQoYyx0aGlzKX19LGluc2VydEFkamFjZW50SFRNTDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7c3dpdGNoKFN0cmluZyhhKS50b0xvd2VyQ2FzZSgpKXtjYXNlImJlZm9yZWJlZ2luIjpjPXRoaXMucGFyZW50Tm9kZSxkPXRoaXM7YnJlYWs7Y2FzZSJhZnRlcmVuZCI6Yz10aGlzLnBhcmVudE5vZGUsZD10aGlzLm5leHRTaWJsaW5nO2JyZWFrO2Nhc2UiYWZ0ZXJiZWdpbiI6Yz10aGlzLGQ9dGhpcy5maXJzdENoaWxkO2JyZWFrO2Nhc2UiYmVmb3JlZW5kIjpjPXRoaXMsZD1udWxsO2JyZWFrO2RlZmF1bHQ6cmV0dXJufXZhciBlPWooYyxiKTtjLmluc2VydEJlZm9yZShlLGQpfSxnZXQgaGlkZGVuKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKCJoaWRkZW4iKX0sc2V0IGhpZGRlbihhKXthP3RoaXMuc2V0QXR0cmlidXRlKCJoaWRkZW4iLCIiKTp0aGlzLnJlbW92ZUF0dHJpYnV0ZSgiaGlkZGVuIil9fSksWyJjbGllbnRIZWlnaHQiLCJjbGllbnRMZWZ0IiwiY2xpZW50VG9wIiwiY2xpZW50V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0VG9wIiwib2Zmc2V0V2lkdGgiLCJzY3JvbGxIZWlnaHQiLCJzY3JvbGxXaWR0aCJdLmZvckVhY2gobCksWyJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIl0uZm9yRWFjaChtKSxbImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdldENsaWVudFJlY3RzIiwic2Nyb2xsSW50b1ZpZXciXS5mb3JFYWNoKG4pLHUoRixpLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImIiKSksYS53cmFwcGVycy5IVE1MRWxlbWVudD1pLGEuZ2V0SW5uZXJIVE1MPWcsYS5zZXRJbm5lckhUTUw9aH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bnNhZmVVbndyYXAsZz1hLndyYXAsaD13aW5kb3cuSFRNTENhbnZhc0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0Q29udGV4dDpmdW5jdGlvbigpe3ZhciBhPWYodGhpcykuZ2V0Q29udGV4dC5hcHBseShmKHRoaXMpLGFyZ3VtZW50cyk7cmV0dXJuIGEmJmcoYSl9fSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikpLGEud3JhcHBlcnMuSFRNTENhbnZhc0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9d2luZG93LkhUTUxDb250ZW50RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpiLGdldCBzZWxlY3QoKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpfSxzZXQgc2VsZWN0KGEpe3RoaXMuc2V0QXR0cmlidXRlKCJzZWxlY3QiLGEpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXtjLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGEsYiksInNlbGVjdCI9PT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKSYmdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoITApfX0pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9d2luZG93LkhUTUxGb3JtRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgZWxlbWVudHMoKXtyZXR1cm4gZihnKHRoaXMpLmVsZW1lbnRzKX19KSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIikpLGEud3JhcHBlcnMuSFRNTEZvcm1FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGMpKXRocm93IG5ldyBUeXBlRXJyb3IoIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3ZhciBlPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpO2QuY2FsbCh0aGlzLGUpLGcoZSx0aGlzKSx2b2lkIDAhPT1hJiYoZS53aWR0aD1hKSx2b2lkIDAhPT1iJiYoZS5oZWlnaHQ9Yil9dmFyIGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLnJld3JhcCxoPXdpbmRvdy5IVE1MSW1hZ2VFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpKSxjLnByb3RvdHlwZT1iLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxJbWFnZUVsZW1lbnQ9YixhLndyYXBwZXJzLkltYWdlPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPShhLm1peGluLGEud3JhcHBlcnMuTm9kZUxpc3QsYS5yZWdpc3RlcldyYXBwZXIpLGU9d2luZG93LkhUTUxTaGFkb3dFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWIsZSYmZChlLGIpLGEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYS5kZWZhdWx0VmlldylyZXR1cm4gYTt2YXIgYj1sLmdldChhKTtpZighYil7Zm9yKGI9YS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpO2IubGFzdENoaWxkOyliLnJlbW92ZUNoaWxkKGIubGFzdENoaWxkKTtsLnNldChhLGIpfXJldHVybiBifWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBjLGQ9YihhLm93bmVyRG9jdW1lbnQpLGU9aShkLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Yz1hLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGV9ZnVuY3Rpb24gZChhKXtpZihlLmNhbGwodGhpcyxhKSwhbSl7dmFyIGI9YyhhKTtrLnNldCh0aGlzLGooYikpfX12YXIgZT1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGY9YS5taXhpbixnPWEucmVnaXN0ZXJXcmFwcGVyLGg9YS51bnNhZmVVbndyYXAsaT1hLnVud3JhcCxqPWEud3JhcCxrPW5ldyBXZWFrTWFwLGw9bmV3IFdlYWtNYXAsbT13aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudDtkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSxmKGQucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpkLGdldCBjb250ZW50KCl7cmV0dXJuIG0/aihoKHRoaXMpLmNvbnRlbnQpOmsuZ2V0KHRoaXMpfX0pLG0mJmcobSxkKSxhLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQ9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5yZWdpc3RlcldyYXBwZXIsZT13aW5kb3cuSFRNTE1lZGlhRWxlbWVudDtlJiYoYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChlLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSksYS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50PWIpfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGMoYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGI9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpKTtkLmNhbGwodGhpcyxiKSxnKGIsdGhpcyksYi5zZXRBdHRyaWJ1dGUoInByZWxvYWQiLCJhdXRvIiksdm9pZCAwIT09YSYmYi5zZXRBdHRyaWJ1dGUoInNyYyIsYSl9dmFyIGQ9YS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxBdWRpb0VsZW1lbnQ7aCYmKGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIikpLGMucHJvdG90eXBlPWIucHJvdG90eXBlLGEud3JhcHBlcnMuSFRNTEF1ZGlvRWxlbWVudD1iLGEud3JhcHBlcnMuQXVkaW89Yyl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEucmVwbGFjZSgvXHMrL2csIiAiKS50cmltKCl9ZnVuY3Rpb24gYyhhKXtlLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBkKGEsYixjLGYpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3ZhciBnPWkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO2UuY2FsbCh0aGlzLGcpLGgoZyx0aGlzKSx2b2lkIDAhPT1hJiYoZy50ZXh0PWEpLHZvaWQgMCE9PWImJmcuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsYiksYz09PSEwJiZnLnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCIiKSxnLnNlbGVjdGVkPWY9PT0hMH12YXIgZT1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGY9YS5taXhpbixnPWEucmVnaXN0ZXJXcmFwcGVyLGg9YS5yZXdyYXAsaT1hLnVud3JhcCxqPWEud3JhcCxrPXdpbmRvdy5IVE1MT3B0aW9uRWxlbWVudDtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSxmKGMucHJvdG90eXBlLHtnZXQgdGV4dCgpe3JldHVybiBiKHRoaXMudGV4dENvbnRlbnQpfSxzZXQgdGV4dChhKXt0aGlzLnRleHRDb250ZW50PWIoU3RyaW5nKGEpKX0sZ2V0IGZvcm0oKXtyZXR1cm4gaihpKHRoaXMpLmZvcm0pfX0pLGcoayxjLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKSxkLnByb3RvdHlwZT1jLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxPcHRpb25FbGVtZW50PWMsYS53cmFwcGVycy5PcHRpb249ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLndyYXAsaD13aW5kb3cuSFRNTFNlbGVjdEVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7YWRkOmZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBiJiYoYj1mKGIpKSxmKHRoaXMpLmFkZChmKGEpLGIpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/dm9pZCBjLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKTooIm9iamVjdCI9PXR5cGVvZiBhJiYoYT1mKGEpKSx2b2lkIGYodGhpcykucmVtb3ZlKGEpKX0sZ2V0IGZvcm0oKXtyZXR1cm4gZyhmKHRoaXMpLmZvcm0pfX0pLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpKSxhLndyYXBwZXJzLkhUTUxTZWxlY3RFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS53cmFwLGg9YS53cmFwSFRNTENvbGxlY3Rpb24saT13aW5kb3cuSFRNTFRhYmxlRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY2FwdGlvbigpe3JldHVybiBnKGYodGhpcykuY2FwdGlvbil9LGNyZWF0ZUNhcHRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZUNhcHRpb24oKSl9LGdldCB0SGVhZCgpe3JldHVybiBnKGYodGhpcykudEhlYWQpfSxjcmVhdGVUSGVhZDpmdW5jdGlvbigpe3JldHVybiBnKGYodGhpcykuY3JlYXRlVEhlYWQoKSl9LGNyZWF0ZVRGb290OmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVURm9vdCgpKX0sZ2V0IHRGb290KCl7cmV0dXJuIGcoZih0aGlzKS50Rm9vdCl9LGdldCB0Qm9kaWVzKCl7cmV0dXJuIGgoZih0aGlzKS50Qm9kaWVzKX0sY3JlYXRlVEJvZHk6ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZVRCb2R5KCkpfSxnZXQgcm93cygpe3JldHVybiBoKGYodGhpcykucm93cyl9LGluc2VydFJvdzpmdW5jdGlvbihhKXtyZXR1cm4gZyhmKHRoaXMpLmluc2VydFJvdyhhKSl9fSksZShpLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKSksYS53cmFwcGVycy5IVE1MVGFibGVFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcEhUTUxDb2xsZWN0aW9uLGc9YS51bndyYXAsaD1hLndyYXAsaT13aW5kb3cuSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6YixnZXQgcm93cygpe3JldHVybiBmKGcodGhpcykucm93cyl9LGluc2VydFJvdzpmdW5jdGlvbihhKXtyZXR1cm4gaChnKHRoaXMpLmluc2VydFJvdyhhKSl9fSksZShpLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGhlYWQiKSksYS53cmFwcGVycy5IVE1MVGFibGVTZWN0aW9uRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9YS53cmFwLGk9d2luZG93LkhUTUxUYWJsZVJvd0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNlbGxzKCl7cmV0dXJuIGYoZyh0aGlzKS5jZWxscyl9LGluc2VydENlbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIGgoZyh0aGlzKS5pbnNlcnRDZWxsKGEpKX19KSxlKGksYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpKSxhLndyYXBwZXJzLkhUTUxUYWJsZVJvd0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYS5sb2NhbE5hbWUpe2Nhc2UiY29udGVudCI6cmV0dXJuIG5ldyBjKGEpO2Nhc2Uic2hhZG93IjpyZXR1cm4gbmV3IGUoYSk7Y2FzZSJ0ZW1wbGF0ZSI6cmV0dXJuIG5ldyBmKGEpfWQuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsZj1hLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQsZz0oYS5taXhpbixhLnJlZ2lzdGVyV3JhcHBlciksaD13aW5kb3cuSFRNTFVua25vd25FbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGcoaCxiKSxhLndyYXBwZXJzLkhUTUxVbmtub3duRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLndyYXBwZXJzLkVsZW1lbnQsYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5yZWdpc3Rlck9iamVjdCxlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZSwidGl0bGUiKSxnPWQoZiksaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZy5wcm90b3R5cGUpLmNvbnN0cnVjdG9yO2lmKCEoImNsYXNzTGlzdCJpbiBmKSl7dmFyIGk9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLnByb3RvdHlwZSwiY2xhc3NMaXN0Iik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMucHJvdG90eXBlLCJjbGFzc0xpc3QiLGkpLGRlbGV0ZSBiLnByb3RvdHlwZS5jbGFzc0xpc3R9YS53cmFwcGVycy5TVkdFbGVtZW50PWh9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7bS5jYWxsKHRoaXMsYSl9dmFyIGM9YS5taXhpbixkPWEucmVnaXN0ZXJXcmFwcGVyLGU9YS51bndyYXAsZj1hLndyYXAsZz13aW5kb3cuU1ZHVXNlRWxlbWVudCxoPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsaT1mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhoLCJnIikpLGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGgsInVzZSIpLGs9aS5jb25zdHJ1Y3RvcixsPU9iamVjdC5nZXRQcm90b3R5cGVPZihrLnByb3RvdHlwZSksbT1sLmNvbnN0cnVjdG9yO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobCksImluc3RhbmNlUm9vdCJpbiBqJiZjKGIucHJvdG90eXBlLHtnZXQgaW5zdGFuY2VSb290KCl7cmV0dXJuIGYoZSh0aGlzKS5pbnN0YW5jZVJvb3QpfSxnZXQgYW5pbWF0ZWRJbnN0YW5jZVJvb3QoKXtyZXR1cm4gZihlKHRoaXMpLmFuaW1hdGVkSW5zdGFuY2VSb290KX19KSxkKGcsYixqKSxhLndyYXBwZXJzLlNWR1VzZUVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bnNhZmVVbndyYXAsZz1hLndyYXAsaD13aW5kb3cuU1ZHRWxlbWVudEluc3RhbmNlO2gmJihiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY29ycmVzcG9uZGluZ0VsZW1lbnQoKXtyZXR1cm4gZyhmKHRoaXMpLmNvcnJlc3BvbmRpbmdFbGVtZW50KQp9LGdldCBjb3JyZXNwb25kaW5nVXNlRWxlbWVudCgpe3JldHVybiBnKGYodGhpcykuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQpfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiBnKGYodGhpcykucGFyZW50Tm9kZSl9LGdldCBjaGlsZE5vZGVzKCl7dGhyb3cgbmV3IEVycm9yKCJOb3QgaW1wbGVtZW50ZWQiKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gZyhmKHRoaXMpLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIGcoZih0aGlzKS5sYXN0Q2hpbGQpfSxnZXQgcHJldmlvdXNTaWJsaW5nKCl7cmV0dXJuIGcoZih0aGlzKS5wcmV2aW91c1NpYmxpbmcpfSxnZXQgbmV4dFNpYmxpbmcoKXtyZXR1cm4gZyhmKHRoaXMpLm5leHRTaWJsaW5nKX19KSxlKGgsYiksYS53cmFwcGVycy5TVkdFbGVtZW50SW5zdGFuY2U9Yil9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZShhLHRoaXMpfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEuc2V0V3JhcHBlcixmPWEudW5zYWZlVW53cmFwLGc9YS51bndyYXAsaD1hLnVud3JhcElmTmVlZGVkLGk9YS53cmFwLGo9d2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtjKGIucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGkoZih0aGlzKS5jYW52YXMpfSxkcmF3SW1hZ2U6ZnVuY3Rpb24oKXthcmd1bWVudHNbMF09aChhcmd1bWVudHNbMF0pLGYodGhpcykuZHJhd0ltYWdlLmFwcGx5KGYodGhpcyksYXJndW1lbnRzKX0sY3JlYXRlUGF0dGVybjpmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09Zyhhcmd1bWVudHNbMF0pLGYodGhpcykuY3JlYXRlUGF0dGVybi5hcHBseShmKHRoaXMpLGFyZ3VtZW50cyl9fSksZChqLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKSksYS53cmFwcGVycy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtlKGEsdGhpcyl9dmFyIGM9YS5taXhpbixkPWEucmVnaXN0ZXJXcmFwcGVyLGU9YS5zZXRXcmFwcGVyLGY9YS51bnNhZmVVbndyYXAsZz1hLnVud3JhcElmTmVlZGVkLGg9YS53cmFwLGk9d2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dDtpZihpKXtjKGIucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGgoZih0aGlzKS5jYW52YXMpfSx0ZXhJbWFnZTJEOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzVdPWcoYXJndW1lbnRzWzVdKSxmKHRoaXMpLnRleEltYWdlMkQuYXBwbHkoZih0aGlzKSxhcmd1bWVudHMpfSx0ZXhTdWJJbWFnZTJEOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzZdPWcoYXJndW1lbnRzWzZdKSxmKHRoaXMpLnRleFN1YkltYWdlMkQuYXBwbHkoZih0aGlzKSxhcmd1bWVudHMpfX0pO3ZhciBqPS9XZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk/e2RyYXdpbmdCdWZmZXJIZWlnaHQ6bnVsbCxkcmF3aW5nQnVmZmVyV2lkdGg6bnVsbH06e307ZChpLGIsaiksYS53cmFwcGVycy5XZWJHTFJlbmRlcmluZ0NvbnRleHQ9Yn19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZChhLHRoaXMpfXZhciBjPWEucmVnaXN0ZXJXcmFwcGVyLGQ9YS5zZXRXcmFwcGVyLGU9YS51bnNhZmVVbndyYXAsZj1hLnVud3JhcCxnPWEudW53cmFwSWZOZWVkZWQsaD1hLndyYXAsaT13aW5kb3cuUmFuZ2U7Yi5wcm90b3R5cGU9e2dldCBzdGFydENvbnRhaW5lcigpe3JldHVybiBoKGUodGhpcykuc3RhcnRDb250YWluZXIpfSxnZXQgZW5kQ29udGFpbmVyKCl7cmV0dXJuIGgoZSh0aGlzKS5lbmRDb250YWluZXIpfSxnZXQgY29tbW9uQW5jZXN0b3JDb250YWluZXIoKXtyZXR1cm4gaChlKHRoaXMpLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKX0sc2V0U3RhcnQ6ZnVuY3Rpb24oYSxiKXtlKHRoaXMpLnNldFN0YXJ0KGcoYSksYil9LHNldEVuZDpmdW5jdGlvbihhLGIpe2UodGhpcykuc2V0RW5kKGcoYSksYil9LHNldFN0YXJ0QmVmb3JlOmZ1bmN0aW9uKGEpe2UodGhpcykuc2V0U3RhcnRCZWZvcmUoZyhhKSl9LHNldFN0YXJ0QWZ0ZXI6ZnVuY3Rpb24oYSl7ZSh0aGlzKS5zZXRTdGFydEFmdGVyKGcoYSkpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oYSl7ZSh0aGlzKS5zZXRFbmRCZWZvcmUoZyhhKSl9LHNldEVuZEFmdGVyOmZ1bmN0aW9uKGEpe2UodGhpcykuc2V0RW5kQWZ0ZXIoZyhhKSl9LHNlbGVjdE5vZGU6ZnVuY3Rpb24oYSl7ZSh0aGlzKS5zZWxlY3ROb2RlKGcoYSkpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oYSl7ZSh0aGlzKS5zZWxlY3ROb2RlQ29udGVudHMoZyhhKSl9LGNvbXBhcmVCb3VuZGFyeVBvaW50czpmdW5jdGlvbihhLGIpe3JldHVybiBlKHRoaXMpLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLGYoYikpfSxleHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gaChlKHRoaXMpLmV4dHJhY3RDb250ZW50cygpKX0sY2xvbmVDb250ZW50czpmdW5jdGlvbigpe3JldHVybiBoKGUodGhpcykuY2xvbmVDb250ZW50cygpKX0saW5zZXJ0Tm9kZTpmdW5jdGlvbihhKXtlKHRoaXMpLmluc2VydE5vZGUoZyhhKSl9LHN1cnJvdW5kQ29udGVudHM6ZnVuY3Rpb24oYSl7ZSh0aGlzKS5zdXJyb3VuZENvbnRlbnRzKGcoYSkpfSxjbG9uZVJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuIGgoZSh0aGlzKS5jbG9uZVJhbmdlKCkpfSxpc1BvaW50SW5SYW5nZTpmdW5jdGlvbihhLGIpe3JldHVybiBlKHRoaXMpLmlzUG9pbnRJblJhbmdlKGcoYSksYil9LGNvbXBhcmVQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBlKHRoaXMpLmNvbXBhcmVQb2ludChnKGEpLGIpfSxpbnRlcnNlY3RzTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gZSh0aGlzKS5pbnRlcnNlY3RzTm9kZShnKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS50b1N0cmluZygpfX0saS5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JiYoYi5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBoKGUodGhpcykuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGEpKX0pLGMod2luZG93LlJhbmdlLGIsZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSksYS53cmFwcGVycy5SYW5nZT1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYz1hLlBhcmVudE5vZGVJbnRlcmZhY2UsZD1hLlNlbGVjdG9yc0ludGVyZmFjZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyT2JqZWN0LGc9Zihkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2UoZy5wcm90b3R5cGUsYyksZShnLnByb3RvdHlwZSxkKSxlKGcucHJvdG90eXBlLGIpO3ZhciBoPWYoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikpO2Eud3JhcHBlcnMuQ29tbWVudD1oLGEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudD1nfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWwoayhhKS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Yy5jYWxsKHRoaXMsYiksaShiLHRoaXMpO3ZhciBlPWEuc2hhZG93Um9vdDtuLnNldCh0aGlzLGUpLHRoaXMudHJlZVNjb3BlXz1uZXcgZCh0aGlzLGcoZXx8YSkpLG0uc2V0KHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50LGQ9YS5UcmVlU2NvcGUsZT1hLmVsZW1lbnRGcm9tUG9pbnQsZj1hLmdldElubmVySFRNTCxnPWEuZ2V0VHJlZVNjb3BlLGg9YS5taXhpbixpPWEucmV3cmFwLGo9YS5zZXRJbm5lckhUTUwsaz1hLnVuc2FmZVVud3JhcCxsPWEudW53cmFwLG09bmV3IFdlYWtNYXAsbj1uZXcgV2Vha01hcCxvPS9bIFx0XG5cclxmXS87Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksaChiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6YixnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGYodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7aih0aGlzLGEpLHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9LGdldCBvbGRlclNoYWRvd1Jvb3QoKXtyZXR1cm4gbi5nZXQodGhpcyl8fG51bGx9LGdldCBob3N0KCl7cmV0dXJuIG0uZ2V0KHRoaXMpfHxudWxsfSxpbnZhbGlkYXRlU2hhZG93UmVuZGVyZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbS5nZXQodGhpcykuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9LGVsZW1lbnRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZSh0aGlzLHRoaXMub3duZXJEb2N1bWVudCxhLGIpfSxnZXRFbGVtZW50QnlJZDpmdW5jdGlvbihhKXtyZXR1cm4gby50ZXN0KGEpP251bGw6dGhpcy5xdWVyeVNlbGVjdG9yKCdbaWQ9IicrYSsnIl0nKX19KSxhLndyYXBwZXJzLlNoYWRvd1Jvb3Q9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXthLnByZXZpb3VzU2libGluZ189YS5wcmV2aW91c1NpYmxpbmcsYS5uZXh0U2libGluZ189YS5uZXh0U2libGluZyxhLnBhcmVudE5vZGVfPWEucGFyZW50Tm9kZX1mdW5jdGlvbiBjKGMsZSxmKXt2YXIgZz1IKGMpLGg9SChlKSxpPWY/SChmKTpudWxsO2lmKGQoZSksYihlKSxmKWMuZmlyc3RDaGlsZD09PWYmJihjLmZpcnN0Q2hpbGRfPWYpLGYucHJldmlvdXNTaWJsaW5nXz1mLnByZXZpb3VzU2libGluZztlbHNle2MubGFzdENoaWxkXz1jLmxhc3RDaGlsZCxjLmxhc3RDaGlsZD09PWMuZmlyc3RDaGlsZCYmKGMuZmlyc3RDaGlsZF89Yy5maXJzdENoaWxkKTt2YXIgaj1JKGcubGFzdENoaWxkKTtqJiYoai5uZXh0U2libGluZ189ai5uZXh0U2libGluZyl9YS5vcmlnaW5hbEluc2VydEJlZm9yZS5jYWxsKGcsaCxpKX1mdW5jdGlvbiBkKGMpe3ZhciBkPUgoYyksZT1kLnBhcmVudE5vZGU7aWYoZSl7dmFyIGY9SShlKTtiKGMpLGMucHJldmlvdXNTaWJsaW5nJiYoYy5wcmV2aW91c1NpYmxpbmcubmV4dFNpYmxpbmdfPWMpLGMubmV4dFNpYmxpbmcmJihjLm5leHRTaWJsaW5nLnByZXZpb3VzU2libGluZ189YyksZi5sYXN0Q2hpbGQ9PT1jJiYoZi5sYXN0Q2hpbGRfPWMpLGYuZmlyc3RDaGlsZD09PWMmJihmLmZpcnN0Q2hpbGRfPWMpLGEub3JpZ2luYWxSZW1vdmVDaGlsZC5jYWxsKGUsZCl9fWZ1bmN0aW9uIGUoYSl7Si5zZXQoYSxbXSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1KLmdldChhKTtyZXR1cm4gYnx8Si5zZXQoYSxiPVtdKSxifWZ1bmN0aW9uIGcoYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYn1mdW5jdGlvbiBoKCl7Zm9yKHZhciBhPTA7YTxOLmxlbmd0aDthKyspe3ZhciBiPU5bYV0sYz1iLnBhcmVudFJlbmRlcmVyO2MmJmMuZGlydHl8fGIucmVuZGVyKCl9Tj1bXX1mdW5jdGlvbiBpKCl7eT1udWxsLGgoKX1mdW5jdGlvbiBqKGEpe3ZhciBiPUwuZ2V0KGEpO3JldHVybiBifHwoYj1uZXcgbihhKSxMLnNldChhLGIpKSxifWZ1bmN0aW9uIGsoYSl7dmFyIGI9RShhKS5yb290O3JldHVybiBiIGluc3RhbmNlb2YgRD9iOm51bGx9ZnVuY3Rpb24gbChhKXtyZXR1cm4gaihhLmhvc3QpfWZ1bmN0aW9uIG0oYSl7dGhpcy5za2lwPSExLHRoaXMubm9kZT1hLHRoaXMuY2hpbGROb2Rlcz1bXX1mdW5jdGlvbiBuKGEpe3RoaXMuaG9zdD1hLHRoaXMuZGlydHk9ITEsdGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpLHRoaXMuYXNzb2NpYXRlTm9kZShhKX1mdW5jdGlvbiBvKGEpe2Zvcih2YXIgYj1bXSxjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyl2KGMpP2IucHVzaC5hcHBseShiLGYoYykpOmIucHVzaChjKTtyZXR1cm4gYn1mdW5jdGlvbiBwKGEpe2lmKGEgaW5zdGFuY2VvZiBCKXJldHVybiBhO2lmKGEgaW5zdGFuY2VvZiBBKXJldHVybiBudWxsO2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpe3ZhciBjPXAoYik7aWYoYylyZXR1cm4gY31yZXR1cm4gbnVsbH1mdW5jdGlvbiBxKGEsYil7ZihiKS5wdXNoKGEpO3ZhciBjPUsuZ2V0KGEpO2M/Yy5wdXNoKGIpOksuc2V0KGEsW2JdKX1mdW5jdGlvbiByKGEpe3JldHVybiBLLmdldChhKX1mdW5jdGlvbiBzKGEpe0suc2V0KGEsdm9pZCAwKX1mdW5jdGlvbiB0KGEsYil7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpO2lmKCFjKXJldHVybiEwO2lmKGM9Yy50cmltKCksIWMpcmV0dXJuITA7aWYoIShhIGluc3RhbmNlb2YgeikpcmV0dXJuITE7aWYoIVAudGVzdChjKSlyZXR1cm4hMTt0cnl7cmV0dXJuIGEubWF0Y2hlcyhjKX1jYXRjaChkKXtyZXR1cm4hMX19ZnVuY3Rpb24gdShhLGIpe3ZhciBjPXIoYik7cmV0dXJuIGMmJmNbYy5sZW5ndGgtMV09PT1hfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBBfHxhIGluc3RhbmNlb2YgQn1mdW5jdGlvbiB3KGEpe3JldHVybiBhLnNoYWRvd1Jvb3R9ZnVuY3Rpb24geChhKXtmb3IodmFyIGI9W10sYz1hLnNoYWRvd1Jvb3Q7YztjPWMub2xkZXJTaGFkb3dSb290KWIucHVzaChjKTtyZXR1cm4gYn12YXIgeSx6PWEud3JhcHBlcnMuRWxlbWVudCxBPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LEI9YS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudCxDPWEud3JhcHBlcnMuTm9kZSxEPWEud3JhcHBlcnMuU2hhZG93Um9vdCxFPShhLmFzc2VydCxhLmdldFRyZWVTY29wZSksRj0oYS5taXhpbixhLm9uZU9mKSxHPWEudW5zYWZlVW53cmFwLEg9YS51bndyYXAsST1hLndyYXAsSj1uZXcgV2Vha01hcCxLPW5ldyBXZWFrTWFwLEw9bmV3IFdlYWtNYXAsTT1GKHdpbmRvdyxbInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNldFRpbWVvdXQiXSksTj1bXSxPPW5ldyBBcnJheVNwbGljZTtPLmVxdWFscz1mdW5jdGlvbihhLGIpe3JldHVybiBIKGEubm9kZSk9PT1ifSxtLnByb3RvdHlwZT17YXBwZW5kOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBtKGEpO3JldHVybiB0aGlzLmNoaWxkTm9kZXMucHVzaChiKSxifSxzeW5jOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLnNraXApe2Zvcih2YXIgYj10aGlzLm5vZGUsZT10aGlzLmNoaWxkTm9kZXMsZj1nKEgoYikpLGg9YXx8bmV3IFdlYWtNYXAsaT1PLmNhbGN1bGF0ZVNwbGljZXMoZSxmKSxqPTAsaz0wLGw9MCxtPTA7bTxpLmxlbmd0aDttKyspe2Zvcih2YXIgbj1pW21dO2w8bi5pbmRleDtsKyspaysrLGVbaisrXS5zeW5jKGgpO2Zvcih2YXIgbz1uLnJlbW92ZWQubGVuZ3RoLHA9MDtvPnA7cCsrKXt2YXIgcT1JKGZbaysrXSk7aC5nZXQocSl8fGQocSl9Zm9yKHZhciByPW4uYWRkZWRDb3VudCxzPWZba10mJkkoZltrXSkscD0wO3I+cDtwKyspe3ZhciB0PWVbaisrXSx1PXQubm9kZTtjKGIsdSxzKSxoLnNldCh1LCEwKSx0LnN5bmMoaCl9bCs9cn1mb3IodmFyIG09bDttPGUubGVuZ3RoO20rKyllW21dLnN5bmMoaCl9fX0sbi5wcm90b3R5cGU9e3JlbmRlcjpmdW5jdGlvbihhKXtpZih0aGlzLmRpcnR5KXt0aGlzLmludmFsaWRhdGVBdHRyaWJ1dGVzKCk7dmFyIGI9dGhpcy5ob3N0O3RoaXMuZGlzdHJpYnV0aW9uKGIpO3ZhciBjPWF8fG5ldyBtKGIpO3RoaXMuYnVpbGRSZW5kZXJUcmVlKGMsYik7dmFyIGQ9IWE7ZCYmYy5zeW5jKCksdGhpcy5kaXJ0eT0hMX19LGdldCBwYXJlbnRSZW5kZXJlcigpe3JldHVybiBFKHRoaXMuaG9zdCkucmVuZGVyZXJ9LGludmFsaWRhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5kaXJ0eSl7dGhpcy5kaXJ0eT0hMDt2YXIgYT10aGlzLnBhcmVudFJlbmRlcmVyO2lmKGEmJmEuaW52YWxpZGF0ZSgpLE4ucHVzaCh0aGlzKSx5KXJldHVybjt5PXdpbmRvd1tNXShpLDApfX0sZGlzdHJpYnV0aW9uOmZ1bmN0aW9uKGEpe3RoaXMucmVzZXRBbGxTdWJ0cmVlcyhhKSx0aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oYSl9LHJlc2V0QWxsOmZ1bmN0aW9uKGEpe3YoYSk/ZShhKTpzKGEpLHRoaXMucmVzZXRBbGxTdWJ0cmVlcyhhKX0scmVzZXRBbGxTdWJ0cmVlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKXRoaXMucmVzZXRBbGwoYik7YS5zaGFkb3dSb290JiZ0aGlzLnJlc2V0QWxsKGEuc2hhZG93Um9vdCksYS5vbGRlclNoYWRvd1Jvb3QmJnRoaXMucmVzZXRBbGwoYS5vbGRlclNoYWRvd1Jvb3QpfSxkaXN0cmlidXRpb25SZXNvbHV0aW9uOmZ1bmN0aW9uKGEpe2lmKHcoYSkpe2Zvcih2YXIgYj1hLGM9byhiKSxkPXgoYiksZT0wO2U8ZC5sZW5ndGg7ZSsrKXRoaXMucG9vbERpc3RyaWJ1dGlvbihkW2VdLGMpO2Zvcih2YXIgZT1kLmxlbmd0aC0xO2U+PTA7ZS0tKXt2YXIgZj1kW2VdLGc9cChmKTtpZihnKXt2YXIgaD1mLm9sZGVyU2hhZG93Um9vdDtoJiYoYz1vKGgpKTtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKylxKGNbaV0sZyl9dGhpcy5kaXN0cmlidXRpb25SZXNvbHV0aW9uKGYpfX1mb3IodmFyIGo9YS5maXJzdENoaWxkO2o7aj1qLm5leHRTaWJsaW5nKXRoaXMuZGlzdHJpYnV0aW9uUmVzb2x1dGlvbihqKX0scG9vbERpc3RyaWJ1dGlvbjpmdW5jdGlvbihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIEIpKWlmKGEgaW5zdGFuY2VvZiBBKXt2YXIgYz1hO3RoaXMudXBkYXRlRGVwZW5kZW50QXR0cmlidXRlcyhjLmdldEF0dHJpYnV0ZSgic2VsZWN0IikpO2Zvcih2YXIgZD0hMSxlPTA7ZTxiLmxlbmd0aDtlKyspe3ZhciBhPWJbZV07YSYmdChhLGMpJiYocShhLGMpLGJbZV09dm9pZCAwLGQ9ITApfWlmKCFkKWZvcih2YXIgZj1jLmZpcnN0Q2hpbGQ7ZjtmPWYubmV4dFNpYmxpbmcpcShmLGMpfWVsc2UgZm9yKHZhciBmPWEuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZyl0aGlzLnBvb2xEaXN0cmlidXRpb24oZixiKX0sYnVpbGRSZW5kZXJUcmVlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuY29tcG9zZShiKSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF0sZj1hLmFwcGVuZChlKTt0aGlzLmJ1aWxkUmVuZGVyVHJlZShmLGUpfWlmKHcoYikpe3ZhciBnPWooYik7Zy5kaXJ0eT0hMX19LGNvbXBvc2U6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9YS5zaGFkb3dSb290fHxhLGQ9Yy5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWlmKHYoZCkpe3RoaXMuYXNzb2NpYXRlTm9kZShjKTtmb3IodmFyIGU9ZihkKSxnPTA7ZzxlLmxlbmd0aDtnKyspe3ZhciBoPWVbZ107dShkLGgpJiZiLnB1c2goaCl9fWVsc2UgYi5wdXNoKGQpO3JldHVybiBifSxpbnZhbGlkYXRlQXR0cmlidXRlczpmdW5jdGlvbigpe3RoaXMuYXR0cmlidXRlcz1PYmplY3QuY3JlYXRlKG51bGwpfSx1cGRhdGVEZXBlbmRlbnRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXRoaXMuYXR0cmlidXRlczsvXC5cdysvLnRlc3QoYSkmJihiWyJjbGFzcyJdPSEwKSwvI1x3Ky8udGVzdChhKSYmKGIuaWQ9ITApLGEucmVwbGFjZSgvXFtccyooW15ccz1cfH5cXV0rKS9nLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pfX0sZGVwZW5kc09uQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmF0dHJpYnV0ZXNbYV19LGFzc29jaWF0ZU5vZGU6ZnVuY3Rpb24oYSl7RyhhKS5wb2x5bWVyU2hhZG93UmVuZGVyZXJfPXRoaXN9fTt2YXIgUD0vXig6bm90XCgpP1sqLiNbYS16QS1aX3xdLztDLnByb3RvdHlwZS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXI9ZnVuY3Rpb24oKXt2YXIgYT1HKHRoaXMpLnBvbHltZXJTaGFkb3dSZW5kZXJlcl87cmV0dXJuIGE/KGEuaW52YWxpZGF0ZSgpLCEwKTohMX0sQS5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1CLnByb3RvdHlwZS5nZXREaXN0cmlidXRlZE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxmKHRoaXMpfSx6LnByb3RvdHlwZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz1mdW5jdGlvbigpe3JldHVybiBoKCkscih0aGlzKXx8W119LEEucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1CLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBhLGI9ayh0aGlzKTtiJiYoYT1sKGIpKSxHKHRoaXMpLnBvbHltZXJTaGFkb3dSZW5kZXJlcl89YSxhJiZhLmludmFsaWRhdGUoKX0sYS5nZXRSZW5kZXJlckZvckhvc3Q9aixhLmdldFNoYWRvd1RyZWVzPXgsYS5yZW5kZXJBbGxQZW5kaW5nPWgsYS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz1yLGEudmlzdWFsPXtpbnNlcnRCZWZvcmU6YyxyZW1vdmU6ZH19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7aWYod2luZG93W2JdKXtkKCFhLndyYXBwZXJzW2JdKTt2YXIgaT1mdW5jdGlvbihhKXtjLmNhbGwodGhpcyxhKX07aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZShpLnByb3RvdHlwZSx7Z2V0IGZvcm0oKXtyZXR1cm4gaChnKHRoaXMpLmZvcm0pfX0pLGYod2luZG93W2JdLGksZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiLnNsaWNlKDQsLTcpKSksYS53cmFwcGVyc1tiXT1pfX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5hc3NlcnQsZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz1hLnVud3JhcCxoPWEud3JhcCxpPVsiSFRNTEJ1dHRvbkVsZW1lbnQiLCJIVE1MRmllbGRTZXRFbGVtZW50IiwiSFRNTElucHV0RWxlbWVudCIsIkhUTUxLZXlnZW5FbGVtZW50IiwiSFRNTExhYmVsRWxlbWVudCIsIkhUTUxMZWdlbmRFbGVtZW50IiwiSFRNTE9iamVjdEVsZW1lbnQiLCJIVE1MT3V0cHV0RWxlbWVudCIsIkhUTUxUZXh0QXJlYUVsZW1lbnQiXTtpLmZvckVhY2goYil9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZChhLHRoaXMpfXt2YXIgYz1hLnJlZ2lzdGVyV3JhcHBlcixkPWEuc2V0V3JhcHBlcixlPWEudW5zYWZlVW53cmFwLGY9YS51bndyYXAsZz1hLnVud3JhcElmTmVlZGVkLGg9YS53cmFwO3dpbmRvdy5TZWxlY3Rpb259Yi5wcm90b3R5cGU9e2dldCBhbmNob3JOb2RlKCl7cmV0dXJuIGgoZSh0aGlzKS5hbmNob3JOb2RlKX0sZ2V0IGZvY3VzTm9kZSgpe3JldHVybiBoKGUodGhpcykuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7ZSh0aGlzKS5hZGRSYW5nZShmKGEpKX0sY29sbGFwc2U6ZnVuY3Rpb24oYSxiKXtlKHRoaXMpLmNvbGxhcHNlKGcoYSksYil9LGNvbnRhaW5zTm9kZTpmdW5jdGlvbihhLGIpe3JldHVybiBlKHRoaXMpLmNvbnRhaW5zTm9kZShnKGEpLGIpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXtlKHRoaXMpLmV4dGVuZChnKGEpLGIpfSxnZXRSYW5nZUF0OmZ1bmN0aW9uKGEpe3JldHVybiBoKGUodGhpcykuZ2V0UmFuZ2VBdChhKSl9LHJlbW92ZVJhbmdlOmZ1bmN0aW9uKGEpe2UodGhpcykucmVtb3ZlUmFuZ2UoZihhKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGEpe2UodGhpcykuc2VsZWN0QWxsQ2hpbGRyZW4oZyhhKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcykudG9TdHJpbmcoKX19LGMod2luZG93LlNlbGVjdGlvbixiLHdpbmRvdy5nZXRTZWxlY3Rpb24oKSksYS53cmFwcGVycy5TZWxlY3Rpb249Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtrLmNhbGwodGhpcyxhKSx0aGlzLnRyZWVTY29wZV89bmV3IHAodGhpcyxudWxsKX1mdW5jdGlvbiBjKGEpe3ZhciBjPWRvY3VtZW50W2FdO2IucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIEMoYy5hcHBseShBKHRoaXMpLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7Ri5jYWxsKEEoYiksQihhKSksZShhLGIpfWZ1bmN0aW9uIGUoYSxiKXthLnNoYWRvd1Jvb3QmJmIuYWRvcHROb2RlKGEuc2hhZG93Um9vdCksYSBpbnN0YW5jZW9mIG8mJmYoYSxiKTtmb3IodmFyIGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWUoYyxiKX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9YS5vbGRlclNoYWRvd1Jvb3Q7YyYmYi5hZG9wdE5vZGUoYyl9ZnVuY3Rpb24gZyhhKXt6KGEsdGhpcyl9ZnVuY3Rpb24gaChhLGIpe3ZhciBjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uW2JdO2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7cmV0dXJuIEMoYy5hcHBseShBKHRoaXMpLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShBKHRoaXMpLGFyZ3VtZW50cyl9fXZhciBqPWEuR2V0RWxlbWVudHNCeUludGVyZmFjZSxrPWEud3JhcHBlcnMuTm9kZSxsPWEuUGFyZW50Tm9kZUludGVyZmFjZSxtPWEud3JhcHBlcnMuU2VsZWN0aW9uLG49YS5TZWxlY3RvcnNJbnRlcmZhY2Usbz1hLndyYXBwZXJzLlNoYWRvd1Jvb3QscD1hLlRyZWVTY29wZSxxPWEuY2xvbmVOb2RlLHI9YS5kZWZpbmVXcmFwR2V0dGVyLHM9YS5lbGVtZW50RnJvbVBvaW50LHQ9YS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcix1PWEubWF0Y2hlc05hbWVzLHY9YS5taXhpbix3PWEucmVnaXN0ZXJXcmFwcGVyLHg9YS5yZW5kZXJBbGxQZW5kaW5nLHk9YS5yZXdyYXAsej1hLnNldFdyYXBwZXIsQT1hLnVuc2FmZVVud3JhcCxCPWEudW53cmFwLEM9YS53cmFwLEQ9YS53cmFwRXZlbnRUYXJnZXRNZXRob2RzLEU9KGEud3JhcE5vZGVMaXN0LG5ldyBXZWFrTWFwKTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGsucHJvdG90eXBlKSxyKGIsImRvY3VtZW50RWxlbWVudCIpLHIoYiwiYm9keSIpLHIoYiwiaGVhZCIpLFsiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImdldEVsZW1lbnRCeUlkIl0uZm9yRWFjaChjKTt2YXIgRj1kb2N1bWVudC5hZG9wdE5vZGUsRz1kb2N1bWVudC5nZXRTZWxlY3Rpb247aWYodihiLnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkKGEsdGhpcyksYX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBzKHRoaXMsdGhpcyxhLGIpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHEoYSxiLEEodGhpcykpfSxnZXRTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4geCgpLG5ldyBtKEcuY2FsbChCKHRoaXMpKSl9LGdldEVsZW1lbnRzQnlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiBuLnF1ZXJ5U2VsZWN0b3JBbGwuY2FsbCh0aGlzLCJbbmFtZT0iK0pTT04uc3RyaW5naWZ5KFN0cmluZyhhKSkrIl0iKX19KSxkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQpe3ZhciBIPWRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDtiLnByb3RvdHlwZS5yZWdpc3RlckVsZW1lbnQ9ZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhP3ZvaWQgeihhLHRoaXMpOmY/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChmLGIpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYil9dmFyIGUsZjtpZih2b2lkIDAhPT1jJiYoZT1jLnByb3RvdHlwZSxmPWMuZXh0ZW5kcyksZXx8KGU9T2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChlKSl0aHJvdyBuZXcgRXJyb3IoIk5vdFN1cHBvcnRlZEVycm9yIik7Zm9yKHZhciBnLGg9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLGk9W107aCYmIShnPWEubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KGgpKTspaS5wdXNoKGgpLGg9T2JqZWN0LmdldFByb3RvdHlwZU9mKGgpO2lmKCFnKXRocm93IG5ldyBFcnJvcigiTm90U3VwcG9ydGVkRXJyb3IiKTtmb3IodmFyIGo9T2JqZWN0LmNyZWF0ZShnKSxrPWkubGVuZ3RoLTE7az49MDtrLS0paj1PYmplY3QuY3JlYXRlKGopO1siY3JlYXRlZENhbGxiYWNrIiwiYXR0YWNoZWRDYWxsYmFjayIsImRldGFjaGVkQ2FsbGJhY2siLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWVbYV07YiYmKGpbYV09ZnVuY3Rpb24oKXtDKHRoaXMpaW5zdGFuY2VvZiBkfHx5KHRoaXMpLGIuYXBwbHkoQyh0aGlzKSxhcmd1bWVudHMpfSl9KTt2YXIgbD17cHJvdG90eXBlOmp9O2YmJihsLmV4dGVuZHM9ZiksZC5wcm90b3R5cGU9ZSxkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kLGEuY29uc3RydWN0b3JUYWJsZS5zZXQoaixkKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLnNldChlLGopO0guY2FsbChCKHRoaXMpLGIsbCk7cmV0dXJuIGR9LHQoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJyZWdpc3RlckVsZW1lbnQiXSl9dChbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudCx3aW5kb3cuSFRNTEh0bWxFbGVtZW50XSxbImFwcGVuZENoaWxkIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJjb250YWlucyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lTlMiLCJpbnNlcnRCZWZvcmUiLCJxdWVyeVNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZUNoaWxkIiwicmVwbGFjZUNoaWxkIl0uY29uY2F0KHUpKSx0KFt3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnRdLFsiYWRvcHROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRhaW5zIiwiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImVsZW1lbnRGcm9tUG9pbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldEVsZW1lbnRzQnlOYW1lIiwiZ2V0U2VsZWN0aW9uIl0pLHYoYi5wcm90b3R5cGUsaiksdihiLnByb3RvdHlwZSxsKSx2KGIucHJvdG90eXBlLG4pLHYoYi5wcm90b3R5cGUse2dldCBpbXBsZW1lbnRhdGlvbigpe3ZhciBhPUUuZ2V0KHRoaXMpO3JldHVybiBhP2E6KGE9bmV3IGcoQih0aGlzKS5pbXBsZW1lbnRhdGlvbiksRS5zZXQodGhpcyxhKSxhKX0sZ2V0IGRlZmF1bHRWaWV3KCl7cmV0dXJuIEMoQih0aGlzKS5kZWZhdWx0Vmlldyl9fSksdyh3aW5kb3cuRG9jdW1lbnQsYixkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpKSx3aW5kb3cuSFRNTERvY3VtZW50JiZ3KHdpbmRvdy5IVE1MRG9jdW1lbnQsYiksRChbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudF0pLGgoZywiY3JlYXRlRG9jdW1lbnRUeXBlIiksaChnLCJjcmVhdGVEb2N1bWVudCIpLGgoZywiY3JlYXRlSFRNTERvY3VtZW50IiksaShnLCJoYXNGZWF0dXJlIiksdyh3aW5kb3cuRE9NSW1wbGVtZW50YXRpb24sZyksdChbd2luZG93LkRPTUltcGxlbWVudGF0aW9uXSxbImNyZWF0ZURvY3VtZW50VHlwZSIsImNyZWF0ZURvY3VtZW50IiwiY3JlYXRlSFRNTERvY3VtZW50IiwiaGFzRmVhdHVyZSJdKSxhLmFkb3B0Tm9kZU5vUmVtb3ZlPWQsYS53cmFwcGVycy5ET01JbXBsZW1lbnRhdGlvbj1nLGEud3JhcHBlcnMuRG9jdW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGQ9YS53cmFwcGVycy5TZWxlY3Rpb24sZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz1hLnJlbmRlckFsbFBlbmRpbmcsaD1hLnVud3JhcCxpPWEudW53cmFwSWZOZWVkZWQsaj1hLndyYXAsaz13aW5kb3cuV2luZG93LGw9d2luZG93LmdldENvbXB1dGVkU3R5bGUsbT13aW5kb3cuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUsbj13aW5kb3cuZ2V0U2VsZWN0aW9uO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGsucHJvdG90eXBlLmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaih0aGlzfHx3aW5kb3cpLmdldENvbXB1dGVkU3R5bGUoaShhKSxiKX0sbSYmKGsucHJvdG90eXBlLmdldERlZmF1bHRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGoodGhpc3x8d2luZG93KS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZShpKGEpLGIpfSksay5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGoodGhpc3x8d2luZG93KS5nZXRTZWxlY3Rpb24oKX0sZGVsZXRlIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLGRlbGV0ZSB3aW5kb3cuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUsZGVsZXRlIHdpbmRvdy5nZXRTZWxlY3Rpb24sWyJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2sucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7dmFyIGI9aih0aGlzfHx3aW5kb3cpO3JldHVybiBiW2FdLmFwcGx5KGIsYXJndW1lbnRzKX0sZGVsZXRlIHdpbmRvd1thXX0pLGUoYi5wcm90b3R5cGUse2dldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZygpLGwuY2FsbChoKHRoaXMpLGkoYSksYil9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBnKCksbmV3IGQobi5jYWxsKGgodGhpcykpKX0sZ2V0IGRvY3VtZW50KCl7cmV0dXJuIGooaCh0aGlzKS5kb2N1bWVudCl9fSksbSYmKGIucHJvdG90eXBlLmdldERlZmF1bHRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGcoKSxtLmNhbGwoaCh0aGlzKSxpKGEpLGIpfSksZihrLGIsd2luZG93KSxhLndyYXBwZXJzLldpbmRvdz1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLnVud3JhcCxjPXdpbmRvdy5EYXRhVHJhbnNmZXJ8fHdpbmRvdy5DbGlwYm9hcmQsZD1jLnByb3RvdHlwZS5zZXREcmFnSW1hZ2U7ZCYmKGMucHJvdG90eXBlLnNldERyYWdJbWFnZT1mdW5jdGlvbihhLGMsZSl7ZC5jYWxsKHRoaXMsYihhKSxjLGUpfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFyIGI7Yj1hIGluc3RhbmNlb2YgZj9hOm5ldyBmKGEmJmUoYSkpLGQoYix0aGlzKX12YXIgYz1hLnJlZ2lzdGVyV3JhcHBlcixkPWEuc2V0V3JhcHBlcixlPWEudW53cmFwLGY9d2luZG93LkZvcm1EYXRhO2YmJihjKGYsYixuZXcgZiksYS53cmFwcGVycy5Gb3JtRGF0YT1iKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7dmFyIGI9YS51bndyYXBJZk5lZWRlZCxjPVhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5zZW5kO1hNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGEpe3JldHVybiBjLmNhbGwodGhpcyxiKGEpKX19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFyIGI9Y1thXSxkPXdpbmRvd1tiXTtpZihkKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpLGY9ZS5jb25zdHJ1Y3Rvcjt3aW5kb3dbYl09Zn19dmFyIGM9KGEuaXNXcmFwcGVyRm9yLHthOiJIVE1MQW5jaG9yRWxlbWVudCIsYXJlYToiSFRNTEFyZWFFbGVtZW50IixhdWRpbzoiSFRNTEF1ZGlvRWxlbWVudCIsYmFzZToiSFRNTEJhc2VFbGVtZW50Iixib2R5OiJIVE1MQm9keUVsZW1lbnQiLGJyOiJIVE1MQlJFbGVtZW50IixidXR0b246IkhUTUxCdXR0b25FbGVtZW50IixjYW52YXM6IkhUTUxDYW52YXNFbGVtZW50IixjYXB0aW9uOiJIVE1MVGFibGVDYXB0aW9uRWxlbWVudCIsY29sOiJIVE1MVGFibGVDb2xFbGVtZW50Iixjb250ZW50OiJIVE1MQ29udGVudEVsZW1lbnQiLGRhdGE6IkhUTUxEYXRhRWxlbWVudCIsZGF0YWxpc3Q6IkhUTUxEYXRhTGlzdEVsZW1lbnQiLGRlbDoiSFRNTE1vZEVsZW1lbnQiLGRpcjoiSFRNTERpcmVjdG9yeUVsZW1lbnQiLGRpdjoiSFRNTERpdkVsZW1lbnQiLGRsOiJIVE1MRExpc3RFbGVtZW50IixlbWJlZDoiSFRNTEVtYmVkRWxlbWVudCIsZmllbGRzZXQ6IkhUTUxGaWVsZFNldEVsZW1lbnQiLGZvbnQ6IkhUTUxGb250RWxlbWVudCIsZm9ybToiSFRNTEZvcm1FbGVtZW50IixmcmFtZToiSFRNTEZyYW1lRWxlbWVudCIsZnJhbWVzZXQ6IkhUTUxGcmFtZVNldEVsZW1lbnQiLGgxOiJIVE1MSGVhZGluZ0VsZW1lbnQiLGhlYWQ6IkhUTUxIZWFkRWxlbWVudCIsaHI6IkhUTUxIUkVsZW1lbnQiLGh0bWw6IkhUTUxIdG1sRWxlbWVudCIsaWZyYW1lOiJIVE1MSUZyYW1lRWxlbWVudCIsaW1nOiJIVE1MSW1hZ2VFbGVtZW50IixpbnB1dDoiSFRNTElucHV0RWxlbWVudCIsa2V5Z2VuOiJIVE1MS2V5Z2VuRWxlbWVudCIsbGFiZWw6IkhUTUxMYWJlbEVsZW1lbnQiLGxlZ2VuZDoiSFRNTExlZ2VuZEVsZW1lbnQiLGxpOiJIVE1MTElFbGVtZW50IixsaW5rOiJIVE1MTGlua0VsZW1lbnQiLG1hcDoiSFRNTE1hcEVsZW1lbnQiLG1hcnF1ZWU6IkhUTUxNYXJxdWVlRWxlbWVudCIsbWVudToiSFRNTE1lbnVFbGVtZW50IixtZW51aXRlbToiSFRNTE1lbnVJdGVtRWxlbWVudCIsbWV0YToiSFRNTE1ldGFFbGVtZW50IixtZXRlcjoiSFRNTE1ldGVyRWxlbWVudCIsb2JqZWN0OiJIVE1MT2JqZWN0RWxlbWVudCIsb2w6IkhUTUxPTGlzdEVsZW1lbnQiLG9wdGdyb3VwOiJIVE1MT3B0R3JvdXBFbGVtZW50IixvcHRpb246IkhUTUxPcHRpb25FbGVtZW50IixvdXRwdXQ6IkhUTUxPdXRwdXRFbGVtZW50IixwOiJIVE1MUGFyYWdyYXBoRWxlbWVudCIscGFyYW06IkhUTUxQYXJhbUVsZW1lbnQiLHByZToiSFRNTFByZUVsZW1lbnQiLHByb2dyZXNzOiJIVE1MUHJvZ3Jlc3NFbGVtZW50IixxOiJIVE1MUXVvdGVFbGVtZW50IixzY3JpcHQ6IkhUTUxTY3JpcHRFbGVtZW50IixzZWxlY3Q6IkhUTUxTZWxlY3RFbGVtZW50IixzaGFkb3c6IkhUTUxTaGFkb3dFbGVtZW50Iixzb3VyY2U6IkhUTUxTb3VyY2VFbGVtZW50IixzcGFuOiJIVE1MU3BhbkVsZW1lbnQiLHN0eWxlOiJIVE1MU3R5bGVFbGVtZW50Iix0YWJsZToiSFRNTFRhYmxlRWxlbWVudCIsdGJvZHk6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0ZW1wbGF0ZToiSFRNTFRlbXBsYXRlRWxlbWVudCIsdGV4dGFyZWE6IkhUTUxUZXh0QXJlYUVsZW1lbnQiLHRoZWFkOiJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsdGltZToiSFRNTFRpbWVFbGVtZW50Iix0aXRsZToiSFRNTFRpdGxlRWxlbWVudCIsdHI6IkhUTUxUYWJsZVJvd0VsZW1lbnQiLHRyYWNrOiJIVE1MVHJhY2tFbGVtZW50Iix1bDoiSFRNTFVMaXN0RWxlbWVudCIsdmlkZW86IkhUTUxWaWRlb0VsZW1lbnQifSk7T2JqZWN0LmtleXMoYykuZm9yRWFjaChiKSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhLndyYXBwZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3dpbmRvd1tiXT1hLndyYXBwZXJzW2JdfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGMpe3ZhciBkLGUsZixnLGg9YS5maXJzdEVsZW1lbnRDaGlsZDtmb3IoZT1bXSxmPWEuc2hhZG93Um9vdDtmOyllLnB1c2goZiksZj1mLm9sZGVyU2hhZG93Um9vdDtmb3IoZz1lLmxlbmd0aC0xO2c+PTA7Zy0tKWlmKGQ9ZVtnXS5xdWVyeVNlbGVjdG9yKGMpKXJldHVybiBkO2Zvcig7aDspe2lmKGQ9YihoLGMpKXJldHVybiBkO2g9aC5uZXh0RWxlbWVudFNpYmxpbmd9cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhhLGIsZCl7dmFyIGUsZixnLGgsaSxqPWEuZmlyc3RFbGVtZW50Q2hpbGQ7Zm9yKGc9W10sZj1hLnNoYWRvd1Jvb3Q7ZjspZy5wdXNoKGYpLGY9Zi5vbGRlclNoYWRvd1Jvb3Q7Zm9yKGg9Zy5sZW5ndGgtMTtoPj0wO2gtLSlmb3IoZT1nW2hdLnF1ZXJ5U2VsZWN0b3JBbGwoYiksaT0wO2k8ZS5sZW5ndGg7aSsrKWQucHVzaChlW2ldKTtmb3IoO2o7KWMoaixiLGQpLGo9ai5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIGR9d2luZG93LndyYXA9U2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkLHdpbmRvdy51bndyYXA9U2hhZG93RE9NUG9seWZpbGwudW53cmFwSWZOZWVkZWQsT2JqZWN0LmRlZmluZVByb3BlcnR5KEVsZW1lbnQucHJvdG90eXBlLCJ3ZWJraXRTaGFkb3dSb290IixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEVsZW1lbnQucHJvdG90eXBlLCJzaGFkb3dSb290IikpO3ZhciBkPUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q7RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBhPWQuY2FsbCh0aGlzKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMud2F0Y2hTaGFkb3codGhpcyksYX0sRWxlbWVudC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1FbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290LGEucXVlcnlBbGxTaGFkb3dzPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gZT9jKGEsZCxbXSk6YihhLGQpfX0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7dmFyIGM9IiI7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXtjKz1hLnRleHRDb250ZW50KyJcblxuIn0pLGJ8fChjPWMucmVwbGFjZShsLCIiKSksY31mdW5jdGlvbiBjKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGIudGV4dENvbnRlbnQ9YSxifWZ1bmN0aW9uIGQoYSl7dmFyIGI9YyhhKTtkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGIpO3ZhciBkPVtdO2lmKGIuc2hlZXQpdHJ5e2Q9Yi5zaGVldC5jc3NSdWxlc31jYXRjaChlKXt9ZWxzZSBjb25zb2xlLndhcm4oInNoZWV0IG5vdCBmb3VuZCIsYik7cmV0dXJuIGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxkfWZ1bmN0aW9uIGUoKXt2LmluaXRpYWxpemVkPSEwLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodik7dmFyIGE9di5jb250ZW50RG9jdW1lbnQsYj1hLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtiLmhyZWY9ZG9jdW1lbnQuYmFzZVVSSSxhLmhlYWQuYXBwZW5kQ2hpbGQoYil9ZnVuY3Rpb24gZihhKXt2LmluaXRpYWxpemVkfHxlKCksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh2KSxhKHYuY29udGVudERvY3VtZW50KSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHYpfWZ1bmN0aW9uIGcoYSxiKXtpZihiKXt2YXIgZTtpZihhLm1hdGNoKCJAaW1wb3J0IikmJngpe3ZhciBnPWMoYSk7ZihmdW5jdGlvbihhKXthLmhlYWQuYXBwZW5kQ2hpbGQoZy5pbXBsKSxlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGcuc2hlZXQuY3NzUnVsZXMsMCksYihlKX0pfWVsc2UgZT1kKGEpLGIoZSl9fWZ1bmN0aW9uIGgoYSl7YSYmaigpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpKX1mdW5jdGlvbiBpKGEsYil7dmFyIGQ9YyhhKTtkLnNldEF0dHJpYnV0ZShiLCIiKSxkLnNldEF0dHJpYnV0ZSh6LCIiKSxkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGQpfWZ1bmN0aW9uIGooKXtyZXR1cm4gd3x8KHc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSx3LnNldEF0dHJpYnV0ZSh6LCIiKSx3W3pdPSEwKSx3fXZhciBrPXtzdHJpY3RTdHlsaW5nOiExLHJlZ2lzdHJ5Ont9LHNoaW1TdHlsaW5nOmZ1bmN0aW9uKGEsYyxkKXt2YXIgZT10aGlzLnByZXBhcmVSb290KGEsYyxkKSxmPXRoaXMuaXNUeXBlRXh0ZW5zaW9uKGQpLGc9dGhpcy5tYWtlU2NvcGVTZWxlY3RvcihjLGYpLGg9YihlLCEwKTtoPXRoaXMuc2NvcGVDc3NUZXh0KGgsZyksYSYmKGEuc2hpbW1lZFN0eWxlPWgpLHRoaXMuYWRkQ3NzVG9Eb2N1bWVudChoLGMpfSxzaGltU3R5bGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5zaGltQ3NzVGV4dChhLnRleHRDb250ZW50LGIpfSxzaGltQ3NzVGV4dDpmdW5jdGlvbihhLGIpe3JldHVybiBhPXRoaXMuaW5zZXJ0RGlyZWN0aXZlcyhhKSx0aGlzLnNjb3BlQ3NzVGV4dChhLGIpfSxtYWtlU2NvcGVTZWxlY3RvcjpmdW5jdGlvbihhLGIpe3JldHVybiBhP2I/Iltpcz0iK2ErIl0iOmE6IiJ9LGlzVHlwZUV4dGVuc2lvbjpmdW5jdGlvbihhKXtyZXR1cm4gYSYmYS5pbmRleE9mKCItIik8MH0scHJlcGFyZVJvb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVnaXN0ZXJSb290KGEsYixjKTtyZXR1cm4gdGhpcy5yZXBsYWNlVGV4dEluU3R5bGVzKGQucm9vdFN0eWxlcyx0aGlzLmluc2VydERpcmVjdGl2ZXMpLHRoaXMucmVtb3ZlU3R5bGVzKGEsZC5yb290U3R5bGVzKSx0aGlzLnN0cmljdFN0eWxpbmcmJnRoaXMuYXBwbHlTY29wZVRvQ29udGVudChhLGIpLGQuc2NvcGVTdHlsZXN9LHJlbW92ZVN0eWxlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1iLmxlbmd0aDtlPmQmJihjPWJbZF0pO2QrKyljLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyl9LHJlZ2lzdGVyUm9vdDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZWdpc3RyeVtiXT17cm9vdDphLG5hbWU6YixleHRlbmRzTmFtZTpjfSxlPXRoaXMuZmluZFN0eWxlcyhhKTtkLnJvb3RTdHlsZXM9ZSxkLnNjb3BlU3R5bGVzPWQucm9vdFN0eWxlczt2YXIgZj10aGlzLnJlZ2lzdHJ5W2QuZXh0ZW5kc05hbWVdO3JldHVybiBmJiYoZC5zY29wZVN0eWxlcz1mLnNjb3BlU3R5bGVzLmNvbmNhdChkLnNjb3BlU3R5bGVzKSksZH0sZmluZFN0eWxlczpmdW5jdGlvbihhKXtpZighYSlyZXR1cm5bXTt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChiLGZ1bmN0aW9uKGEpe3JldHVybiFhLmhhc0F0dHJpYnV0ZShBKX0pfSxhcHBseVNjb3BlVG9Db250ZW50OmZ1bmN0aW9uKGEsYil7YSYmKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYS5xdWVyeVNlbGVjdG9yQWxsKCIqIiksZnVuY3Rpb24oYSl7YS5zZXRBdHRyaWJ1dGUoYiwiIil9KSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKSxmdW5jdGlvbihhKXt0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYS5jb250ZW50LGIpfSx0aGlzKSl9LGluc2VydERpcmVjdGl2ZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dGhpcy5pbnNlcnRQb2x5ZmlsbERpcmVjdGl2ZXNJbkNzc1RleHQoYSksdGhpcy5pbnNlcnRQb2x5ZmlsbFJ1bGVzSW5Dc3NUZXh0KGEpfSxpbnNlcnRQb2x5ZmlsbERpcmVjdGl2ZXNJbkNzc1RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKG0sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5zbGljZSgwLC0yKSsieyJ9KSxhLnJlcGxhY2UobixmdW5jdGlvbihhLGIpe3JldHVybiBiKyIgeyJ9KX0saW5zZXJ0UG9seWZpbGxSdWxlc0luQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UobyxmdW5jdGlvbihhLGIpe3JldHVybiBiLnNsaWNlKDAsLTEpfSksYS5yZXBsYWNlKHAsZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YS5yZXBsYWNlKGIsIiIpLnJlcGxhY2UoYywiIik7cmV0dXJuIGQrZX0pfSxzY29wZUNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmV4dHJhY3RVbnNjb3BlZFJ1bGVzRnJvbUNzc1RleHQoYSk7aWYoYT10aGlzLmluc2VydFBvbHlmaWxsSG9zdEluQ3NzVGV4dChhKSxhPXRoaXMuY29udmVydENvbG9uSG9zdChhKSxhPXRoaXMuY29udmVydENvbG9uSG9zdENvbnRleHQoYSksYT10aGlzLmNvbnZlcnRTaGFkb3dET01TZWxlY3RvcnMoYSksYil7dmFyIGEsZD10aGlzO2coYSxmdW5jdGlvbihjKXthPWQuc2NvcGVSdWxlcyhjLGIpfSl9cmV0dXJuIGE9YSsiXG4iK2MsYS50cmltKCl9LGV4dHJhY3RVbnNjb3BlZFJ1bGVzRnJvbUNzc1RleHQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9IiI7Yj1xLmV4ZWMoYSk7KWMrPWJbMV0uc2xpY2UoMCwtMSkrIlxuXG4iO2Zvcig7Yj1yLmV4ZWMoYSk7KWMrPWJbMF0ucmVwbGFjZShiWzJdLCIiKS5yZXBsYWNlKGJbMV0sYlszXSkrIlxuXG4iO3JldHVybiBjfSxjb252ZXJ0Q29sb25Ib3N0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RSZSx0aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvbkhvc3RDb250ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RDb250ZXh0UmUsdGhpcy5jb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyKX0sY29udmVydENvbG9uUnVsZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixkLGUpe2lmKGI9cG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGQpe2Zvcih2YXIgZixnPWQuc3BsaXQoIiwiKSxoPVtdLGk9MCxqPWcubGVuZ3RoO2o+aSYmKGY9Z1tpXSk7aSsrKWY9Zi50cmltKCksaC5wdXNoKGMoYixmLGUpKTtyZXR1cm4gaC5qb2luKCIsIil9cmV0dXJuIGIrZX0pfSxjb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYi5tYXRjaChzKT90aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcihhLGIsYyk6YStiK2MrIiwgIitiKyIgIithK2N9LGNvbG9uSG9zdFBhcnRSZXBsYWNlcjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGErYi5yZXBsYWNlKHMsIiIpK2N9LGNvbnZlcnRTaGFkb3dET01TZWxlY3RvcnM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxzaGFkb3dET01TZWxlY3RvcnNSZS5sZW5ndGg7YisrKWE9YS5yZXBsYWNlKHNoYWRvd0RPTVNlbGVjdG9yc1JlW2JdLCIgIik7cmV0dXJuIGF9LHNjb3BlUnVsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz0iIjtyZXR1cm4gYSYmQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2lmKGEuc2VsZWN0b3JUZXh0JiZhLnN0eWxlJiZ2b2lkIDAhPT1hLnN0eWxlLmNzc1RleHQpYys9dGhpcy5zY29wZVNlbGVjdG9yKGEuc2VsZWN0b3JUZXh0LGIsdGhpcy5zdHJpY3RTdHlsaW5nKSsiIHtcbgkiLGMrPXRoaXMucHJvcGVydGllc0Zyb21SdWxlKGEpKyJcbn1cblxuIjtlbHNlIGlmKGEudHlwZT09PUNTU1J1bGUuTUVESUFfUlVMRSljKz0iQG1lZGlhICIrYS5tZWRpYS5tZWRpYVRleHQrIiB7XG4iLGMrPXRoaXMuc2NvcGVSdWxlcyhhLmNzc1J1bGVzLGIpLGMrPSJcbn1cblxuIjtlbHNlIHRyeXthLmNzc1RleHQmJihjKz1hLmNzc1RleHQrIlxuXG4iKX1jYXRjaChkKXthLnR5cGU9PT1DU1NSdWxlLktFWUZSQU1FU19SVUxFJiZhLmNzc1J1bGVzJiYoYys9dGhpcy5pZVNhZmVDc3NUZXh0RnJvbUtleUZyYW1lUnVsZShhKSl9fSx0aGlzKSxjfSxpZVNhZmVDc3NUZXh0RnJvbUtleUZyYW1lUnVsZTpmdW5jdGlvbihhKXt2YXIgYj0iQGtleWZyYW1lcyAiK2EubmFtZSsiIHsiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEuY3NzUnVsZXMsZnVuY3Rpb24oYSl7Yis9IiAiK2Eua2V5VGV4dCsiIHsiK2Euc3R5bGUuY3NzVGV4dCsifSJ9KSxiKz0iIH0ifSxzY29wZVNlbGVjdG9yOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPWEuc3BsaXQoIiwiKTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhhLGIpJiYoYT1jJiYhYS5tYXRjaChwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IpP3RoaXMuYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlKGEsYik6dGhpcy5hcHBseVNlbGVjdG9yU2NvcGUoYSxiKSksZC5wdXNoKGEpfSx0aGlzKSxkLmpvaW4oIiwgIil9LHNlbGVjdG9yTmVlZHNTY29waW5nOmZ1bmN0aW9uKGEsYil7aWYoQXJyYXkuaXNBcnJheShiKSlyZXR1cm4hMDt2YXIgYz10aGlzLm1ha2VTY29wZU1hdGNoZXIoYik7cmV0dXJuIWEubWF0Y2goYyl9LG1ha2VTY29wZU1hdGNoZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKC9cWy9nLCJcXFsiKS5yZXBsYWNlKC9cWy9nLCJcXF0iKSxuZXcgUmVnRXhwKCJeKCIrYSsiKSIrc2VsZWN0b3JSZVN1ZmZpeCwibSIpfSxhcHBseVNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQXJyYXkuaXNBcnJheShiKT90aGlzLmFwcGx5U2VsZWN0b3JTY29wZUxpc3QoYSxiKTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGIpfSxhcHBseVNlbGVjdG9yU2NvcGVMaXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9W10sZT0wO2M9YltlXTtlKyspZC5wdXNoKHRoaXMuYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlKGEsYykpO3JldHVybiBkLmpvaW4oIiwgIil9LGFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm1hdGNoKHBvbHlmaWxsSG9zdFJlKT8oYT1hLnJlcGxhY2UocG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGIpLGEucmVwbGFjZShwb2x5ZmlsbEhvc3RSZSxiKyIgIikpOmIrIiAiK2F9LGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe2I9Yi5yZXBsYWNlKC9cW2lzPShbXlxdXSopXF0vZywiJDEiKTt2YXIgYz1bIiAiLCI+IiwiKyIsIn4iXSxkPWEsZT0iWyIrYisiXSI7cmV0dXJuIGMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1kLnNwbGl0KGEpO2Q9Yi5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9YS50cmltKCkucmVwbGFjZShwb2x5ZmlsbEhvc3RSZSwiIik7cmV0dXJuIGImJmMuaW5kZXhPZihiKTwwJiZiLmluZGV4T2YoZSk8MCYmKGE9Yi5yZXBsYWNlKC8oW146XSopKDoqKSguKikvLCIkMSIrZSsiJDIkMyIpKSxhfSkuam9pbihhKX0pLGR9LGluc2VydFBvbHlmaWxsSG9zdEluQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKGNvbG9uSG9zdENvbnRleHRSZSx0KS5yZXBsYWNlKGNvbG9uSG9zdFJlLHMpfSxwcm9wZXJ0aWVzRnJvbVJ1bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdHlsZS5jc3NUZXh0O2Euc3R5bGUuY29udGVudCYmIWEuc3R5bGUuY29udGVudC5tYXRjaCgvWyciXSt8YXR0ci8pJiYoYj1iLnJlcGxhY2UoL2NvbnRlbnQ6W147XSo7L2csImNvbnRlbnQ6ICciK2Euc3R5bGUuY29udGVudCsiJzsiKSk7dmFyIGM9YS5zdHlsZTtmb3IodmFyIGQgaW4gYykiaW5pdGlhbCI9PT1jW2RdJiYoYis9ZCsiOiBpbml0aWFsOyAiKTtyZXR1cm4gYn0scmVwbGFjZVRleHRJblN0eWxlczpmdW5jdGlvbihhLGIpe2EmJmImJihhIGluc3RhbmNlb2YgQXJyYXl8fChhPVthXSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9Yi5jYWxsKHRoaXMsYS50ZXh0Q29udGVudCl9LHRoaXMpKX0sYWRkQ3NzVG9Eb2N1bWVudDpmdW5jdGlvbihhLGIpe2EubWF0Y2goIkBpbXBvcnQiKT9pKGEsYik6aChhKX19LGw9L1wvXCpbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLy9naW0sbT0vXC9cKlxzKkBwb2x5ZmlsbCAoW14qXSpcKisoW14vKl1bXipdKlwqKykqXC8pKFtee10qPyl7L2dpbSxuPS9wb2x5ZmlsbC1uZXh0LXNlbGVjdG9yW159XSpjb250ZW50XDpbXHNdKj9bJyJdKC4qPylbJyJdWztcc10qfShbXntdKj8pey9naW0sbz0vXC9cKlxzQHBvbHlmaWxsLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxwPS8ocG9seWZpbGwtcnVsZSlbXn1dKihjb250ZW50XDpbXHNdKlsnIl0oLio/KVsnIl0pWztcc10qW159XSp9L2dpbSxxPS9cL1wqXHNAcG9seWZpbGwtdW5zY29wZWQtcnVsZShbXipdKlwqKyhbXi8qXVteKl0qXCorKSopXC8vZ2ltLHI9Lyhwb2x5ZmlsbC11bnNjb3BlZC1ydWxlKVtefV0qKGNvbnRlbnRcOltcc10qWyciXSguKj8pWyciXSlbO1xzXSpbXn1dKn0vZ2ltLHM9Ii1zaGFkb3djc3Nob3N0Iix0PSItc2hhZG93Y3NzY29udGV4dCIsdT0iKSg/OlxcKCgoPzpcXChbXikoXSpcXCl8W14pKF0qKSs/KVxcKSk/KFteLHtdKikiO2Nzc0NvbG9uSG9zdFJlPW5ldyBSZWdFeHAoIigiK3MrdSwiZ2ltIiksY3NzQ29sb25Ib3N0Q29udGV4dFJlPW5ldyBSZWdFeHAoIigiK3QrdSwiZ2ltIiksc2VsZWN0b3JSZVN1ZmZpeD0iKFs+XFxzfitbLix7Ol1bXFxzXFxTXSopPyQiLGNvbG9uSG9zdFJlPS9cOmhvc3QvZ2ltLGNvbG9uSG9zdENvbnRleHRSZT0vXDpob3N0LWNvbnRleHQvZ2ltLHBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcj1zKyItbm8tY29tYmluYXRvciIscG9seWZpbGxIb3N0UmU9bmV3IFJlZ0V4cChzLCJnaW0iKSxwb2x5ZmlsbEhvc3RDb250ZXh0UmU9bmV3IFJlZ0V4cCh0LCJnaW0iKSxzaGFkb3dET01TZWxlY3RvcnNSZT1bL1xeXF4vZywvXF4vZywvXC9zaGFkb3dcLy9nLC9cL3NoYWRvdy1kZWVwXC8vZywvOjpzaGFkb3cvZywvXC9kZWVwXC8vZywvOjpjb250ZW50L2ddO3ZhciB2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO3Yuc3R5bGUuZGlzcGxheT0ibm9uZSI7dmFyIHcseD1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKCJDaHJvbWUiKSx5PSJzaGltLXNoYWRvd2RvbSIsej0ic2hpbS1zaGFkb3dkb20tY3NzIixBPSJuby1zaGltIjtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe2goInN0eWxlIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9XG4iKTt2YXIgQj13cmFwKGRvY3VtZW50KSxDPUIucXVlcnlTZWxlY3RvcigiaGVhZCIpO0MuaW5zZXJ0QmVmb3JlKGooKSxDLmNoaWxkTm9kZXNbMF0pLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7YS51cmxSZXNvbHZlcjtpZih3aW5kb3cuSFRNTEltcG9ydHMmJiFIVE1MSW1wb3J0cy51c2VOYXRpdmUpe3ZhciBiPSJsaW5rW3JlbD1zdHlsZXNoZWV0XVsiK3krIl0iLGM9InN0eWxlWyIreSsiXSI7SFRNTEltcG9ydHMuaW1wb3J0ZXIuZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzKz0iLCIrYixIVE1MSW1wb3J0cy5pbXBvcnRlci5pbXBvcnRzUHJlbG9hZFNlbGVjdG9ycys9IiwiK2IsSFRNTEltcG9ydHMucGFyc2VyLmRvY3VtZW50U2VsZWN0b3JzPVtIVE1MSW1wb3J0cy5wYXJzZXIuZG9jdW1lbnRTZWxlY3RvcnMsYixjXS5qb2luKCIsIik7dmFyIGQ9SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlR2VuZXJpYztIVE1MSW1wb3J0cy5wYXJzZXIucGFyc2VHZW5lcmljPWZ1bmN0aW9uKGEpe2lmKCFhW3pdKXt2YXIgYj1hLl9faW1wb3J0RWxlbWVudHx8YTtpZighYi5oYXNBdHRyaWJ1dGUoeSkpcmV0dXJuIHZvaWQgZC5jYWxsKHRoaXMsYSk7YS5fX3Jlc291cmNlJiYoYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSxiLnRleHRDb250ZW50PWEuX19yZXNvdXJjZSksSFRNTEltcG9ydHMucGF0aC5yZXNvbHZlVXJsc0luU3R5bGUoYiksYi50ZXh0Q29udGVudD1rLnNoaW1TdHlsZShiKSxiLnJlbW92ZUF0dHJpYnV0ZSh5LCIiKSxiLnNldEF0dHJpYnV0ZSh6LCIiKSxiW3pdPSEwLGIucGFyZW50Tm9kZSE9PUMmJihhLnBhcmVudE5vZGU9PT1DP0MucmVwbGFjZUNoaWxkKGIsYSk6dGhpcy5hZGRFbGVtZW50VG9Eb2N1bWVudChiKSksYi5fX2ltcG9ydFBhcnNlZD0hMCx0aGlzLm1hcmtQYXJzaW5nQ29tcGxldGUoYSksdGhpcy5wYXJzZU5leHQoKX19O3ZhciBlPUhUTUxJbXBvcnRzLnBhcnNlci5oYXNSZXNvdXJjZTtIVE1MSW1wb3J0cy5wYXJzZXIuaGFzUmVzb3VyY2U9ZnVuY3Rpb24oYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJiJzdHlsZXNoZWV0Ij09PWEucmVsJiZhLmhhc0F0dHJpYnV0ZSh5KT9hLl9fcmVzb3VyY2U6ZS5jYWxsKHRoaXMsYSl9fX0pfWEuU2hhZG93Q1NTPWt9KHdpbmRvdy5QbGF0Zm9ybSkpOiFmdW5jdGlvbigpe3dpbmRvdy53cmFwPXdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LGFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7aWYoQ3VzdG9tRWxlbWVudHMudXNlTmF0aXZlPT09ITEpe3ZhciBhPUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q7RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBiPWEuY2FsbCh0aGlzKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMud2F0Y2hTaGFkb3codGhpcyksYn19fSl9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIHZvaWQgMCE9PW1bYV19ZnVuY3Rpb24gYygpe2guY2FsbCh0aGlzKSx0aGlzLl9pc0ludmFsaWQ9ITB9ZnVuY3Rpb24gZChhKXtyZXR1cm4iIj09YSYmYy5jYWxsKHRoaXMpLGEudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gYj4zMiYmMTI3PmImJi0xPT1bMzQsMzUsNjAsNjIsNjMsOTZdLmluZGV4T2YoYik/YTplbmNvZGVVUklDb21wb25lbnQoYSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGI+MzImJjEyNz5iJiYtMT09WzM0LDM1LDYwLDYyLDk2XS5pbmRleE9mKGIpP2E6ZW5jb2RlVVJJQ29tcG9uZW50KGEpfWZ1bmN0aW9uIGcoYSxnLGgpe2Z1bmN0aW9uIGkoYSl7dC5wdXNoKGEpfXZhciBqPWd8fCJzY2hlbWUgc3RhcnQiLGs9MCxsPSIiLHI9ITEscz0hMSx0PVtdO2E6Zm9yKDsoYVtrLTFdIT1vfHwwPT1rKSYmIXRoaXMuX2lzSW52YWxpZDspe3ZhciB1PWFba107c3dpdGNoKGope2Nhc2Uic2NoZW1lIHN0YXJ0IjppZighdXx8IXAudGVzdCh1KSl7aWYoZyl7aSgiSW52YWxpZCBzY2hlbWUuIik7YnJlYWsgYX1sPSIiLGo9Im5vIHNjaGVtZSI7Y29udGludWV9bCs9dS50b0xvd2VyQ2FzZSgpLGo9InNjaGVtZSI7YnJlYWs7Y2FzZSJzY2hlbWUiOmlmKHUmJnEudGVzdCh1KSlsKz11LnRvTG93ZXJDYXNlKCk7ZWxzZXtpZigiOiIhPXUpe2lmKGcpe2lmKG89PXUpYnJlYWsgYTtpKCJDb2RlIHBvaW50IG5vdCBhbGxvd2VkIGluIHNjaGVtZTogIit1KTticmVhayBhfWw9IiIsaz0wLGo9Im5vIHNjaGVtZSI7Y29udGludWV9aWYodGhpcy5fc2NoZW1lPWwsbD0iIixnKWJyZWFrIGE7Yih0aGlzLl9zY2hlbWUpJiYodGhpcy5faXNSZWxhdGl2ZT0hMCksaj0iZmlsZSI9PXRoaXMuX3NjaGVtZT8icmVsYXRpdmUiOnRoaXMuX2lzUmVsYXRpdmUmJmgmJmguX3NjaGVtZT09dGhpcy5fc2NoZW1lPyJyZWxhdGl2ZSBvciBhdXRob3JpdHkiOnRoaXMuX2lzUmVsYXRpdmU/ImF1dGhvcml0eSBmaXJzdCBzbGFzaCI6InNjaGVtZSBkYXRhIn1icmVhaztjYXNlInNjaGVtZSBkYXRhIjoiPyI9PXU/KHF1ZXJ5PSI/IixqPSJxdWVyeSIpOiIjIj09dT8odGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iik6byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fc2NoZW1lRGF0YSs9ZSh1KSk7YnJlYWs7Y2FzZSJubyBzY2hlbWUiOmlmKGgmJmIoaC5fc2NoZW1lKSl7aj0icmVsYXRpdmUiO2NvbnRpbnVlfWkoIk1pc3Npbmcgc2NoZW1lLiIpLGMuY2FsbCh0aGlzKTticmVhaztjYXNlInJlbGF0aXZlIG9yIGF1dGhvcml0eSI6aWYoIi8iIT11fHwiLyIhPWFbaysxXSl7aSgiRXhwZWN0ZWQgLywgZ290OiAiK3UpLGo9InJlbGF0aXZlIjtjb250aW51ZX1qPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2JyZWFrO2Nhc2UicmVsYXRpdmUiOmlmKHRoaXMuX2lzUmVsYXRpdmU9ITAsImZpbGUiIT10aGlzLl9zY2hlbWUmJih0aGlzLl9zY2hlbWU9aC5fc2NoZW1lKSxvPT11KXt0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PWguX3F1ZXJ5O2JyZWFrIGF9aWYoIi8iPT11fHwiXFwiPT11KSJcXCI9PXUmJmkoIlxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC4iKSxqPSJyZWxhdGl2ZSBzbGFzaCI7ZWxzZSBpZigiPyI9PXUpdGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT0iPyIsaj0icXVlcnkiOwplbHNle2lmKCIjIiE9dSl7dmFyIHY9YVtrKzFdLHc9YVtrKzJdOygiZmlsZSIhPXRoaXMuX3NjaGVtZXx8IXAudGVzdCh1KXx8IjoiIT12JiYifCIhPXZ8fG8hPXcmJiIvIiE9dyYmIlxcIiE9dyYmIj8iIT13JiYiIyIhPXcpJiYodGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9wYXRoLnBvcCgpKSxqPSJyZWxhdGl2ZSBwYXRoIjtjb250aW51ZX10aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PWguX3F1ZXJ5LHRoaXMuX2ZyYWdtZW50PSIjIixqPSJmcmFnbWVudCJ9YnJlYWs7Y2FzZSJyZWxhdGl2ZSBzbGFzaCI6aWYoIi8iIT11JiYiXFwiIT11KXsiZmlsZSIhPXRoaXMuX3NjaGVtZSYmKHRoaXMuX2hvc3Q9aC5faG9zdCx0aGlzLl9wb3J0PWguX3BvcnQpLGo9InJlbGF0aXZlIHBhdGgiO2NvbnRpbnVlfSJcXCI9PXUmJmkoIlxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC4iKSxqPSJmaWxlIj09dGhpcy5fc2NoZW1lPyJmaWxlIGhvc3QiOiJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2JyZWFrO2Nhc2UiYXV0aG9yaXR5IGZpcnN0IHNsYXNoIjppZigiLyIhPXUpe2koIkV4cGVjdGVkICcvJywgZ290OiAiK3UpLGo9ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI7Y29udGludWV9aj0iYXV0aG9yaXR5IHNlY29uZCBzbGFzaCI7YnJlYWs7Y2FzZSJhdXRob3JpdHkgc2Vjb25kIHNsYXNoIjppZihqPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiLCIvIiE9dSl7aSgiRXhwZWN0ZWQgJy8nLCBnb3Q6ICIrdSk7Y29udGludWV9YnJlYWs7Y2FzZSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiOmlmKCIvIiE9dSYmIlxcIiE9dSl7aj0iYXV0aG9yaXR5Ijtjb250aW51ZX1pKCJFeHBlY3RlZCBhdXRob3JpdHksIGdvdDogIit1KTticmVhaztjYXNlImF1dGhvcml0eSI6aWYoIkAiPT11KXtyJiYoaSgiQCBhbHJlYWR5IHNlZW4uIiksbCs9IiU0MCIpLHI9ITA7Zm9yKHZhciB4PTA7eDxsLmxlbmd0aDt4Kyspe3ZhciB5PWxbeF07aWYoIgkiIT15JiYiXG4iIT15JiYiXHIiIT15KWlmKCI6IiE9eXx8bnVsbCE9PXRoaXMuX3Bhc3N3b3JkKXt2YXIgej1lKHkpO251bGwhPT10aGlzLl9wYXNzd29yZD90aGlzLl9wYXNzd29yZCs9ejp0aGlzLl91c2VybmFtZSs9en1lbHNlIHRoaXMuX3Bhc3N3b3JkPSIiO2Vsc2UgaSgiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGF1dGhvcml0eS4iKX1sPSIifWVsc2V7aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dSl7ay09bC5sZW5ndGgsbD0iIixqPSJob3N0Ijtjb250aW51ZX1sKz11fWJyZWFrO2Nhc2UiZmlsZSBob3N0IjppZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11KXsyIT1sLmxlbmd0aHx8IXAudGVzdChsWzBdKXx8IjoiIT1sWzFdJiYifCIhPWxbMV0/MD09bC5sZW5ndGg/aj0icmVsYXRpdmUgcGF0aCBzdGFydCI6KHRoaXMuX2hvc3Q9ZC5jYWxsKHRoaXMsbCksbD0iIixqPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0Iik6aj0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9IgkiPT11fHwiXG4iPT11fHwiXHIiPT11P2koIkludmFsaWQgd2hpdGVzcGFjZSBpbiBmaWxlIGhvc3QuIik6bCs9dTticmVhaztjYXNlImhvc3QiOmNhc2UiaG9zdG5hbWUiOmlmKCI6IiE9dXx8cyl7aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dSl7aWYodGhpcy5faG9zdD1kLmNhbGwodGhpcyxsKSxsPSIiLGo9InJlbGF0aXZlIHBhdGggc3RhcnQiLGcpYnJlYWsgYTtjb250aW51ZX0iCSIhPXUmJiJcbiIhPXUmJiJcciIhPXU/KCJbIj09dT9zPSEwOiJdIj09dSYmKHM9ITEpLGwrPXUpOmkoIkludmFsaWQgY29kZSBwb2ludCBpbiBob3N0L2hvc3RuYW1lOiAiK3UpfWVsc2UgaWYodGhpcy5faG9zdD1kLmNhbGwodGhpcyxsKSxsPSIiLGo9InBvcnQiLCJob3N0bmFtZSI9PWcpYnJlYWsgYTticmVhaztjYXNlInBvcnQiOmlmKC9bMC05XS8udGVzdCh1KSlsKz11O2Vsc2V7aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dXx8Zyl7aWYoIiIhPWwpe3ZhciBBPXBhcnNlSW50KGwsMTApO0EhPW1bdGhpcy5fc2NoZW1lXSYmKHRoaXMuX3BvcnQ9QSsiIiksbD0iIn1pZihnKWJyZWFrIGE7aj0icmVsYXRpdmUgcGF0aCBzdGFydCI7Y29udGludWV9IgkiPT11fHwiXG4iPT11fHwiXHIiPT11P2koIkludmFsaWQgY29kZSBwb2ludCBpbiBwb3J0OiAiK3UpOmMuY2FsbCh0aGlzKX1icmVhaztjYXNlInJlbGF0aXZlIHBhdGggc3RhcnQiOmlmKCJcXCI9PXUmJmkoIidcXCcgbm90IGFsbG93ZWQgaW4gcGF0aC4iKSxqPSJyZWxhdGl2ZSBwYXRoIiwiLyIhPXUmJiJcXCIhPXUpY29udGludWU7YnJlYWs7Y2FzZSJyZWxhdGl2ZSBwYXRoIjppZihvIT11JiYiLyIhPXUmJiJcXCIhPXUmJihnfHwiPyIhPXUmJiIjIiE9dSkpIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYobCs9ZSh1KSk7ZWxzZXsiXFwiPT11JiZpKCJcXCBub3QgYWxsb3dlZCBpbiByZWxhdGl2ZSBwYXRoLiIpO3ZhciBCOyhCPW5bbC50b0xvd2VyQ2FzZSgpXSkmJihsPUIpLCIuLiI9PWw/KHRoaXMuX3BhdGgucG9wKCksIi8iIT11JiYiXFwiIT11JiZ0aGlzLl9wYXRoLnB1c2goIiIpKToiLiI9PWwmJiIvIiE9dSYmIlxcIiE9dT90aGlzLl9wYXRoLnB1c2goIiIpOiIuIiE9bCYmKCJmaWxlIj09dGhpcy5fc2NoZW1lJiYwPT10aGlzLl9wYXRoLmxlbmd0aCYmMj09bC5sZW5ndGgmJnAudGVzdChsWzBdKSYmInwiPT1sWzFdJiYobD1sWzBdKyI6IiksdGhpcy5fcGF0aC5wdXNoKGwpKSxsPSIiLCI/Ij09dT8odGhpcy5fcXVlcnk9Ij8iLGo9InF1ZXJ5Iik6IiMiPT11JiYodGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iil9YnJlYWs7Y2FzZSJxdWVyeSI6Z3x8IiMiIT11P28hPXUmJiIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dSYmKHRoaXMuX3F1ZXJ5Kz1mKHUpKToodGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iik7YnJlYWs7Y2FzZSJmcmFnbWVudCI6byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fZnJhZ21lbnQrPXUpfWsrK319ZnVuY3Rpb24gaCgpe3RoaXMuX3NjaGVtZT0iIix0aGlzLl9zY2hlbWVEYXRhPSIiLHRoaXMuX3VzZXJuYW1lPSIiLHRoaXMuX3Bhc3N3b3JkPW51bGwsdGhpcy5faG9zdD0iIix0aGlzLl9wb3J0PSIiLHRoaXMuX3BhdGg9W10sdGhpcy5fcXVlcnk9IiIsdGhpcy5fZnJhZ21lbnQ9IiIsdGhpcy5faXNJbnZhbGlkPSExLHRoaXMuX2lzUmVsYXRpdmU9ITF9ZnVuY3Rpb24gaShhLGIpe3ZvaWQgMD09PWJ8fGIgaW5zdGFuY2VvZiBpfHwoYj1uZXcgaShTdHJpbmcoYikpKSx0aGlzLl91cmw9YSxoLmNhbGwodGhpcyk7dmFyIGM9YS5yZXBsYWNlKC9eWyBcdFxyXG5cZl0rfFsgXHRcclxuXGZdKyQvZywiIik7Zy5jYWxsKHRoaXMsYyxudWxsLGIpfXZhciBqPSExO2lmKCFhLmZvcmNlSlVSTCl0cnl7dmFyIGs9bmV3IFVSTCgiYiIsImh0dHA6Ly9hIik7aj0iaHR0cDovL2EvYiI9PT1rLmhyZWZ9Y2F0Y2gobCl7fWlmKCFqKXt2YXIgbT1PYmplY3QuY3JlYXRlKG51bGwpO20uZnRwPTIxLG0uZmlsZT0wLG0uZ29waGVyPTcwLG0uaHR0cD04MCxtLmh0dHBzPTQ0MyxtLndzPTgwLG0ud3NzPTQ0Mzt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO25bIiUyZSJdPSIuIixuWyIuJTJlIl09Ii4uIixuWyIlMmUuIl09Ii4uIixuWyIlMmUlMmUiXT0iLi4iO3ZhciBvPXZvaWQgMCxwPS9bYS16QS1aXS8scT0vW2EtekEtWjAtOVwrXC1cLl0vO2kucHJvdG90eXBlPXtnZXQgaHJlZigpe2lmKHRoaXMuX2lzSW52YWxpZClyZXR1cm4gdGhpcy5fdXJsO3ZhciBhPSIiO3JldHVybigiIiE9dGhpcy5fdXNlcm5hbWV8fG51bGwhPXRoaXMuX3Bhc3N3b3JkKSYmKGE9dGhpcy5fdXNlcm5hbWUrKG51bGwhPXRoaXMuX3Bhc3N3b3JkPyI6Iit0aGlzLl9wYXNzd29yZDoiIikrIkAiKSx0aGlzLnByb3RvY29sKyh0aGlzLl9pc1JlbGF0aXZlPyIvLyIrYSt0aGlzLmhvc3Q6IiIpK3RoaXMucGF0aG5hbWUrdGhpcy5fcXVlcnkrdGhpcy5fZnJhZ21lbnR9LHNldCBocmVmKGEpe2guY2FsbCh0aGlzKSxnLmNhbGwodGhpcyxhKX0sZ2V0IHByb3RvY29sKCl7cmV0dXJuIHRoaXMuX3NjaGVtZSsiOiJ9LHNldCBwcm90b2NvbChhKXt0aGlzLl9pc0ludmFsaWR8fGcuY2FsbCh0aGlzLGErIjoiLCJzY2hlbWUgc3RhcnQiKX0sZ2V0IGhvc3QoKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkPyIiOnRoaXMuX3BvcnQ/dGhpcy5faG9zdCsiOiIrdGhpcy5fcG9ydDp0aGlzLl9ob3N0fSxzZXQgaG9zdChhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZnLmNhbGwodGhpcyxhLCJob3N0Iil9LGdldCBob3N0bmFtZSgpe3JldHVybiB0aGlzLl9ob3N0fSxzZXQgaG9zdG5hbWUoYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmZy5jYWxsKHRoaXMsYSwiaG9zdG5hbWUiKX0sZ2V0IHBvcnQoKXtyZXR1cm4gdGhpcy5fcG9ydH0sc2V0IHBvcnQoYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmZy5jYWxsKHRoaXMsYSwicG9ydCIpfSxnZXQgcGF0aG5hbWUoKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkPyIiOnRoaXMuX2lzUmVsYXRpdmU/Ii8iK3RoaXMuX3BhdGguam9pbigiLyIpOnRoaXMuX3NjaGVtZURhdGF9LHNldCBwYXRobmFtZShhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiYodGhpcy5fcGF0aD1bXSxnLmNhbGwodGhpcyxhLCJyZWxhdGl2ZSBwYXRoIHN0YXJ0IikpfSxnZXQgc2VhcmNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX3F1ZXJ5fHwiPyI9PXRoaXMuX3F1ZXJ5PyIiOnRoaXMuX3F1ZXJ5fSxzZXQgc2VhcmNoKGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJih0aGlzLl9xdWVyeT0iPyIsIj8iPT1hWzBdJiYoYT1hLnNsaWNlKDEpKSxnLmNhbGwodGhpcyxhLCJxdWVyeSIpKX0sZ2V0IGhhc2goKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkfHwhdGhpcy5fZnJhZ21lbnR8fCIjIj09dGhpcy5fZnJhZ21lbnQ/IiI6dGhpcy5fZnJhZ21lbnR9LHNldCBoYXNoKGEpe3RoaXMuX2lzSW52YWxpZHx8KHRoaXMuX2ZyYWdtZW50PSIjIiwiIyI9PWFbMF0mJihhPWEuc2xpY2UoMSkpLGcuY2FsbCh0aGlzLGEsImZyYWdtZW50IikpfSxnZXQgb3JpZ2luKCl7dmFyIGE7aWYodGhpcy5faXNJbnZhbGlkfHwhdGhpcy5fc2NoZW1lKXJldHVybiIiO3N3aXRjaCh0aGlzLl9zY2hlbWUpe2Nhc2UiZGF0YSI6Y2FzZSJmaWxlIjpjYXNlImphdmFzY3JpcHQiOmNhc2UibWFpbHRvIjpyZXR1cm4ibnVsbCJ9cmV0dXJuIGE9dGhpcy5ob3N0LGE/dGhpcy5fc2NoZW1lKyI6Ly8iK2E6IiJ9fTt2YXIgcj1hLlVSTDtyJiYoaS5jcmVhdGVPYmplY3RVUkw9ZnVuY3Rpb24oKXtyZXR1cm4gci5jcmVhdGVPYmplY3RVUkwuYXBwbHkocixhcmd1bWVudHMpfSxpLnJldm9rZU9iamVjdFVSTD1mdW5jdGlvbihhKXtyLnJldm9rZU9iamVjdFVSTChhKX0pLGEuVVJMPWl9fSh0aGlzKSxmdW5jdGlvbigpe0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7cmV0dXJuIGQucHVzaC5hcHBseShkLGFyZ3VtZW50cyksYi5hcHBseShhLGQpfX0pfSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dS5wdXNoKGEpLHR8fCh0PSEwLHEoZCkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKXx8YX1mdW5jdGlvbiBkKCl7dD0hMTt2YXIgYT11O3U9W10sYS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEudWlkXy1iLnVpZF99KTt2YXIgYj0hMTthLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGM9YS50YWtlUmVjb3JkcygpO2UoYSksYy5sZW5ndGgmJihhLmNhbGxiYWNrXyhjLGEpLGI9ITApfSksYiYmZCgpfWZ1bmN0aW9uIGUoYSl7YS5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz1wLmdldChiKTtjJiZjLmZvckVhY2goZnVuY3Rpb24oYil7Yi5vYnNlcnZlcj09PWEmJmIucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9KX0pfWZ1bmN0aW9uIGYoYSxiKXtmb3IodmFyIGM9YTtjO2M9Yy5wYXJlbnROb2RlKXt2YXIgZD1wLmdldChjKTtpZihkKWZvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdLGc9Zi5vcHRpb25zO2lmKGM9PT1hfHxnLnN1YnRyZWUpe3ZhciBoPWIoZyk7aCYmZi5lbnF1ZXVlKGgpfX19fWZ1bmN0aW9uIGcoYSl7dGhpcy5jYWxsYmFja189YSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3Z9ZnVuY3Rpb24gaChhLGIpe3RoaXMudHlwZT1hLHRoaXMudGFyZ2V0PWIsdGhpcy5hZGRlZE5vZGVzPVtdLHRoaXMucmVtb3ZlZE5vZGVzPVtdLHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGkoYSl7dmFyIGI9bmV3IGgoYS50eXBlLGEudGFyZ2V0KTtyZXR1cm4gYi5hZGRlZE5vZGVzPWEuYWRkZWROb2Rlcy5zbGljZSgpLGIucmVtb3ZlZE5vZGVzPWEucmVtb3ZlZE5vZGVzLnNsaWNlKCksYi5wcmV2aW91c1NpYmxpbmc9YS5wcmV2aW91c1NpYmxpbmcsYi5uZXh0U2libGluZz1hLm5leHRTaWJsaW5nLGIuYXR0cmlidXRlTmFtZT1hLmF0dHJpYnV0ZU5hbWUsYi5hdHRyaWJ1dGVOYW1lc3BhY2U9YS5hdHRyaWJ1dGVOYW1lc3BhY2UsYi5vbGRWYWx1ZT1hLm9sZFZhbHVlLGJ9ZnVuY3Rpb24gaihhLGIpe3JldHVybiB3PW5ldyBoKGEsYil9ZnVuY3Rpb24gayhhKXtyZXR1cm4geD94Oih4PWkodykseC5vbGRWYWx1ZT1hLHgpfWZ1bmN0aW9uIGwoKXt3PXg9dm9pZCAwfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIGE9PT14fHxhPT09d31mdW5jdGlvbiBuKGEsYil7cmV0dXJuIGE9PT1iP2E6eCYmbShhKT94Om51bGx9ZnVuY3Rpb24gbyhhLGIsYyl7dGhpcy5vYnNlcnZlcj1hLHRoaXMudGFyZ2V0PWIsdGhpcy5vcHRpb25zPWMsdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdfXZhciBwPW5ldyBXZWFrTWFwLHE9d2luZG93Lm1zU2V0SW1tZWRpYXRlO2lmKCFxKXt2YXIgcj1bXSxzPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYSl7aWYoYS5kYXRhPT09cyl7dmFyIGI9cjtyPVtdLGIuZm9yRWFjaChmdW5jdGlvbihhKXthKCl9KX19KSxxPWZ1bmN0aW9uKGEpe3IucHVzaChhKSx3aW5kb3cucG9zdE1lc3NhZ2UocywiKiIpfX12YXIgdD0hMSx1PVtdLHY9MDtnLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2lmKGE9YyhhKSwhYi5jaGlsZExpc3QmJiFiLmF0dHJpYnV0ZXMmJiFiLmNoYXJhY3RlckRhdGF8fGIuYXR0cmlidXRlT2xkVmFsdWUmJiFiLmF0dHJpYnV0ZXN8fGIuYXR0cmlidXRlRmlsdGVyJiZiLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFiLmF0dHJpYnV0ZXN8fGIuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhYi5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgZD1wLmdldChhKTtkfHxwLnNldChhLGQ9W10pO2Zvcih2YXIgZSxmPTA7ZjxkLmxlbmd0aDtmKyspaWYoZFtmXS5vYnNlcnZlcj09PXRoaXMpe2U9ZFtmXSxlLnJlbW92ZUxpc3RlbmVycygpLGUub3B0aW9ucz1iO2JyZWFrfWV8fChlPW5ldyBvKHRoaXMsYSxiKSxkLnB1c2goZSksdGhpcy5ub2Rlc18ucHVzaChhKSksZS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7ZC5yZW1vdmVMaXN0ZW5lcnMoKSxiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX07dmFyIHcseDtvLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLm9ic2VydmVyLnJlY29yZHNfLGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+MCl7dmFyIGU9Y1tkLTFdLGY9bihlLGEpO2lmKGYpcmV0dXJuIHZvaWQoY1tkLTFdPWYpfWVsc2UgYih0aGlzLm9ic2VydmVyKTtjW2RdPWF9LGFkZExpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMuYWRkTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LGFkZExpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5hZGRFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0scmVtb3ZlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0scmVtb3ZlTGlzdGVuZXJzXzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnM7Yi5hdHRyaWJ1dGVzJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUF0dHJNb2RpZmllZCIsdGhpcywhMCksYi5jaGFyYWN0ZXJEYXRhJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcywhMCksYi5jaGlsZExpc3QmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NTm9kZUluc2VydGVkIix0aGlzLCEwKSwoYi5jaGlsZExpc3R8fGIuc3VidHJlZSkmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NTm9kZVJlbW92ZWQiLHRoaXMsITApfSxhZGRUcmFuc2llbnRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZihhIT09dGhpcy50YXJnZXQpe3RoaXMuYWRkTGlzdGVuZXJzXyhhKSx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXMucHVzaChhKTt2YXIgYj1wLmdldChhKTtifHxwLnNldChhLGI9W10pLGIucHVzaCh0aGlzKX19LHJlbW92ZVRyYW5zaWVudE9ic2VydmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlczt0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W10sYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyhhKTtmb3IodmFyIGI9cC5nZXQoYSksYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGJbY109PT10aGlzKXtiLnNwbGljZShjLDEpO2JyZWFrfX0sdGhpcyl9LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKGEpe3N3aXRjaChhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGEudHlwZSl7Y2FzZSJET01BdHRyTW9kaWZpZWQiOnZhciBiPWEuYXR0ck5hbWUsYz1hLnJlbGF0ZWROb2RlLm5hbWVzcGFjZVVSSSxkPWEudGFyZ2V0LGU9bmV3IGooImF0dHJpYnV0ZXMiLGQpO2UuYXR0cmlidXRlTmFtZT1iLGUuYXR0cmlidXRlTmFtZXNwYWNlPWM7dmFyIGc9YS5hdHRyQ2hhbmdlPT09TXV0YXRpb25FdmVudC5BRERJVElPTj9udWxsOmEucHJldlZhbHVlO2YoZCxmdW5jdGlvbihhKXtyZXR1cm4hYS5hdHRyaWJ1dGVzfHxhLmF0dHJpYnV0ZUZpbHRlciYmYS5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYikmJi0xPT09YS5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihjKT92b2lkIDA6YS5hdHRyaWJ1dGVPbGRWYWx1ZT9rKGcpOmV9KTticmVhaztjYXNlIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCI6dmFyIGQ9YS50YXJnZXQsZT1qKCJjaGFyYWN0ZXJEYXRhIixkKSxnPWEucHJldlZhbHVlO2YoZCxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGFyYWN0ZXJEYXRhP2EuY2hhcmFjdGVyRGF0YU9sZFZhbHVlP2soZyk6ZTp2b2lkIDB9KTticmVhaztjYXNlIkRPTU5vZGVSZW1vdmVkIjp0aGlzLmFkZFRyYW5zaWVudE9ic2VydmVyKGEudGFyZ2V0KTtjYXNlIkRPTU5vZGVJbnNlcnRlZCI6dmFyIGgsaSxkPWEucmVsYXRlZE5vZGUsbT1hLnRhcmdldDsiRE9NTm9kZUluc2VydGVkIj09PWEudHlwZT8oaD1bbV0saT1bXSk6KGg9W10saT1bbV0pO3ZhciBuPW0ucHJldmlvdXNTaWJsaW5nLG89bS5uZXh0U2libGluZyxlPWooImNoaWxkTGlzdCIsZCk7ZS5hZGRlZE5vZGVzPWgsZS5yZW1vdmVkTm9kZXM9aSxlLnByZXZpb3VzU2libGluZz1uLGUubmV4dFNpYmxpbmc9byxmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hpbGRMaXN0P2U6dm9pZCAwfSl9bCgpfX0sYS5Kc011dGF0aW9uT2JzZXJ2ZXI9ZyxhLk11dGF0aW9uT2JzZXJ2ZXJ8fChhLk11dGF0aW9uT2JzZXJ2ZXI9Zyl9KHRoaXMpLHdpbmRvdy5IVE1MSW1wb3J0cz13aW5kb3cuSFRNTEltcG9ydHN8fHtmbGFnczp7fX0sZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2I9Ynx8cSxkKGZ1bmN0aW9uKCl7ZihhLGIpfSxiKX1mdW5jdGlvbiBjKGEpe3JldHVybiJjb21wbGV0ZSI9PT1hLnJlYWR5U3RhdGV8fGEucmVhZHlTdGF0ZT09PXN9ZnVuY3Rpb24gZChhLGIpe2lmKGMoYikpYSYmYSgpO2Vsc2V7dmFyIGU9ZnVuY3Rpb24oKXsoImNvbXBsZXRlIj09PWIucmVhZHlTdGF0ZXx8Yi5yZWFkeVN0YXRlPT09cykmJihiLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxlKSxkKGEsYikpfTtiLmFkZEV2ZW50TGlzdGVuZXIodCxlKX19ZnVuY3Rpb24gZShhKXthLnRhcmdldC5fX2xvYWRlZD0hMH1mdW5jdGlvbiBmKGEsYil7ZnVuY3Rpb24gYygpe2g9PWkmJmEmJmEoKX1mdW5jdGlvbiBkKGEpe2UoYSksaCsrLGMoKX12YXIgZj1iLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxoPTAsaT1mLmxlbmd0aDtpZihpKWZvcih2YXIgaixrPTA7aT5rJiYoaj1mW2tdKTtrKyspZyhqKT9kLmNhbGwoaix7dGFyZ2V0Omp9KTooai5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixkKSxqLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixkKSk7ZWxzZSBjKCl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gbT9hLl9fbG9hZGVkfHxhLmltcG9ydCYmImxvYWRpbmciIT09YS5pbXBvcnQucmVhZHlTdGF0ZTphLl9faW1wb3J0UGFyc2VkfWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiLGM9MCxkPWEubGVuZ3RoO2Q+YyYmKGI9YVtjXSk7YysrKWkoYikmJmooYil9ZnVuY3Rpb24gaShhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmImltcG9ydCI9PT1hLnJlbH1mdW5jdGlvbiBqKGEpe3ZhciBiPWEuaW1wb3J0O2I/ZSh7dGFyZ2V0OmF9KTooYS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixlKSxhLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixlKSl9dmFyIGs9ImltcG9ydCIsbD1rIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKSxtPWwsbj0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxvPUJvb2xlYW4od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxwPWZ1bmN0aW9uKGEpe3JldHVybiBvP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKTphfSxxPXAoZG9jdW1lbnQpLHI9e2dldDpmdW5jdGlvbigpe3ZhciBhPUhUTUxJbXBvcnRzLmN1cnJlbnRTY3JpcHR8fGRvY3VtZW50LmN1cnJlbnRTY3JpcHR8fCgiY29tcGxldGUiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZT9kb2N1bWVudC5zY3JpcHRzW2RvY3VtZW50LnNjcmlwdHMubGVuZ3RoLTFdOm51bGwpO3JldHVybiBwKGEpfSxjb25maWd1cmFibGU6ITB9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudCwiX2N1cnJlbnRTY3JpcHQiLHIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShxLCJfY3VycmVudFNjcmlwdCIscik7dmFyIHM9bj8iY29tcGxldGUiOiJpbnRlcmFjdGl2ZSIsdD0icmVhZHlzdGF0ZWNoYW5nZSI7bSYmKG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTAsZD1hLmxlbmd0aDtkPmMmJihiPWFbY10pO2MrKyliLmFkZGVkTm9kZXMmJmgoYi5hZGRlZE5vZGVzKX0pLm9ic2VydmUoZG9jdW1lbnQuaGVhZCx7Y2hpbGRMaXN0OiEwfSksZnVuY3Rpb24oKXtpZigibG9hZGluZyI9PT1kb2N1bWVudC5yZWFkeVN0YXRlKWZvcih2YXIgYSxiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxjPTAsZD1iLmxlbmd0aDtkPmMmJihhPWJbY10pO2MrKylqKGEpfSgpKSxiKGZ1bmN0aW9uKCl7SFRNTEltcG9ydHMucmVhZHk9ITAsSFRNTEltcG9ydHMucmVhZHlUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHEuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoIkhUTUxJbXBvcnRzTG9hZGVkIix7YnViYmxlczohMH0pKX0pLGEudXNlTmF0aXZlPW0sYS5pc0ltcG9ydExvYWRlZD1nLGEud2hlblJlYWR5PWIsYS5yb290RG9jdW1lbnQ9cSxhLklNUE9SVF9MSU5LX1RZUEU9ayxhLmlzSUU9bn0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXt2YXIgYj0oYS5wYXRoLGEueGhyKSxjPWEuZmxhZ3MsZD1mdW5jdGlvbihhLGIpe3RoaXMuY2FjaGU9e30sdGhpcy5vbmxvYWQ9YSx0aGlzLm9uY29tcGxldGU9Yix0aGlzLmluZmxpZ2h0PTAsdGhpcy5wZW5kaW5nPXt9fTtkLnByb3RvdHlwZT17YWRkTm9kZXM6ZnVuY3Rpb24oYSl7dGhpcy5pbmZsaWdodCs9YS5sZW5ndGg7Zm9yKHZhciBiLGM9MCxkPWEubGVuZ3RoO2Q+YyYmKGI9YVtjXSk7YysrKXRoaXMucmVxdWlyZShiKTt0aGlzLmNoZWNrRG9uZSgpfSxhZGROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW5mbGlnaHQrKyx0aGlzLnJlcXVpcmUoYSksdGhpcy5jaGVja0RvbmUoKX0scmVxdWlyZTpmdW5jdGlvbihhKXt2YXIgYj1hLnNyY3x8YS5ocmVmO2EuX19ub2RlVXJsPWIsdGhpcy5kZWR1cGUoYixhKXx8dGhpcy5mZXRjaChiLGEpfSxkZWR1cGU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnBlbmRpbmdbYV0pcmV0dXJuIHRoaXMucGVuZGluZ1thXS5wdXNoKGIpLCEwO3JldHVybiB0aGlzLmNhY2hlW2FdPyh0aGlzLm9ubG9hZChhLGIsdGhpcy5jYWNoZVthXSksdGhpcy50YWlsKCksITApOih0aGlzLnBlbmRpbmdbYV09W2JdLCExKX0sZmV0Y2g6ZnVuY3Rpb24oYSxkKXtpZihjLmxvYWQmJmNvbnNvbGUubG9nKCJmZXRjaCIsYSxkKSxhLm1hdGNoKC9eZGF0YTovKSl7dmFyIGU9YS5zcGxpdCgiLCIpLGY9ZVswXSxnPWVbMV07Zz1mLmluZGV4T2YoIjtiYXNlNjQiKT4tMT9hdG9iKGcpOmRlY29kZVVSSUNvbXBvbmVudChnKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5yZWNlaXZlKGEsZCxudWxsLGcpfS5iaW5kKHRoaXMpLDApfWVsc2V7dmFyIGg9ZnVuY3Rpb24oYixjLGUpe3RoaXMucmVjZWl2ZShhLGQsYixjLGUpfS5iaW5kKHRoaXMpO2IubG9hZChhLGgpfX0scmVjZWl2ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3RoaXMuY2FjaGVbYV09ZDtmb3IodmFyIGYsZz10aGlzLnBlbmRpbmdbYV0saD0wLGk9Zy5sZW5ndGg7aT5oJiYoZj1nW2hdKTtoKyspdGhpcy5vbmxvYWQoYSxmLGQsYyxlKSx0aGlzLnRhaWwoKTt0aGlzLnBlbmRpbmdbYV09bnVsbH0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19LGI9Ynx8e2FzeW5jOiEwLG9rOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fDMwND09PWEuc3RhdHVzfHwwPT09YS5zdGF0dXN9LGxvYWQ6ZnVuY3Rpb24oYyxkLGUpe3ZhciBmPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4oYS5mbGFncy5kZWJ1Z3x8YS5mbGFncy5idXN0KSYmKGMrPSI/IitNYXRoLnJhbmRvbSgpKSxmLm9wZW4oIkdFVCIsYyxiLmFzeW5jKSxmLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGZ1bmN0aW9uKCl7aWYoND09PWYucmVhZHlTdGF0ZSl7dmFyIGE9Zi5nZXRSZXNwb25zZUhlYWRlcigiTG9jYXRpb24iKSxjPW51bGw7aWYoYSl2YXIgYz0iLyI9PT1hLnN1YnN0cigwLDEpP2xvY2F0aW9uLm9yaWdpbithOmE7ZC5jYWxsKGUsIWIub2soZikmJmYsZi5yZXNwb25zZXx8Zi5yZXNwb25zZVRleHQsYyl9fSksZi5zZW5kKCksZn0sbG9hZERvY3VtZW50OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmxvYWQoYSxiLGMpLnJlc3BvbnNlVHlwZT0iZG9jdW1lbnQifX0sYS54aHI9YixhLkxvYWRlcj1kfSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEucmVsPT09an1mdW5jdGlvbiBjKGEpe3ZhciBiPWQoYSk7cmV0dXJuImRhdGE6dGV4dC9qYXZhc2NyaXB0O2NoYXJzZXQ9dXRmLTgsIitlbmNvZGVVUklDb21wb25lbnQoYil9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS50ZXh0Q29udGVudCtlKGEpfWZ1bmN0aW9uIGUoYSl7dmFyIGI9YS5fX25vZGVVcmw7aWYoIWIpe2I9YS5vd25lckRvY3VtZW50LmJhc2VVUkk7dmFyIGM9IlsiK01hdGguZmxvb3IoMWUzKihNYXRoLnJhbmRvbSgpKzEpKSsiXSIsZD1hLnRleHRDb250ZW50Lm1hdGNoKC9Qb2x5bWVyXChbJyJdKFteJyJdKikvKTtjPWQmJmRbMV18fGMsYis9Ii8iK2MrIi5qcyJ9cmV0dXJuIlxuLy8jIHNvdXJjZVVSTD0iK2IrIlxuIn1mdW5jdGlvbiBmKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3JldHVybiBiLnRleHRDb250ZW50PWEudGV4dENvbnRlbnQsbi5yZXNvbHZlVXJsc0luU3R5bGUoYiksYn12YXIgZz1hLnJvb3REb2N1bWVudCxoPWEuZmxhZ3MsaT1hLmlzSUUsaj1hLklNUE9SVF9MSU5LX1RZUEUsaz17ZG9jdW1lbnRTZWxlY3RvcnM6ImxpbmtbcmVsPSIraisiXSIsaW1wb3J0c1NlbGVjdG9yczpbImxpbmtbcmVsPSIraisiXSIsImxpbmtbcmVsPXN0eWxlc2hlZXRdIiwic3R5bGUiLCJzY3JpcHQ6bm90KFt0eXBlXSkiLCdzY3JpcHRbdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXS5qb2luKCIsIiksbWFwOntsaW5rOiJwYXJzZUxpbmsiLHNjcmlwdDoicGFyc2VTY3JpcHQiLHN0eWxlOiJwYXJzZVN0eWxlIn0sZHluYW1pY0VsZW1lbnRzOltdLHBhcnNlTmV4dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubmV4dFRvUGFyc2UoKTthJiZ0aGlzLnBhcnNlKGEpfSxwYXJzZTpmdW5jdGlvbihhKXtpZih0aGlzLmlzUGFyc2VkKGEpKXJldHVybiB2b2lkKGgucGFyc2UmJmNvbnNvbGUubG9nKCJbJXNdIGlzIGFscmVhZHkgcGFyc2VkIixhLmxvY2FsTmFtZSkpO3ZhciBiPXRoaXNbdGhpcy5tYXBbYS5sb2NhbE5hbWVdXTtiJiYodGhpcy5tYXJrUGFyc2luZyhhKSxiLmNhbGwodGhpcyxhKSl9LHBhcnNlRHluYW1pYzpmdW5jdGlvbihhLGIpe3RoaXMuZHluYW1pY0VsZW1lbnRzLnB1c2goYSksYnx8dGhpcy5wYXJzZU5leHQoKX0sbWFya1BhcnNpbmc6ZnVuY3Rpb24oYSl7aC5wYXJzZSYmY29uc29sZS5sb2coInBhcnNpbmciLGEpLHRoaXMucGFyc2luZ0VsZW1lbnQ9YX0sbWFya1BhcnNpbmdDb21wbGV0ZTpmdW5jdGlvbihhKXthLl9faW1wb3J0UGFyc2VkPSEwLHRoaXMubWFya0R5bmFtaWNQYXJzaW5nQ29tcGxldGUoYSksYS5fX2ltcG9ydEVsZW1lbnQmJihhLl9faW1wb3J0RWxlbWVudC5fX2ltcG9ydFBhcnNlZD0hMCx0aGlzLm1hcmtEeW5hbWljUGFyc2luZ0NvbXBsZXRlKGEuX19pbXBvcnRFbGVtZW50KSksdGhpcy5wYXJzaW5nRWxlbWVudD1udWxsLGgucGFyc2UmJmNvbnNvbGUubG9nKCJjb21wbGV0ZWQiLGEpfSxtYXJrRHluYW1pY1BhcnNpbmdDb21wbGV0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmR5bmFtaWNFbGVtZW50cy5pbmRleE9mKGEpO2I+PTAmJnRoaXMuZHluYW1pY0VsZW1lbnRzLnNwbGljZShiLDEpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXtpZihIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vayYmSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2soYSksYS5pbXBvcnQmJihhLmltcG9ydC5fX2ltcG9ydFBhcnNlZD0hMCksdGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGEpLGEuZGlzcGF0Y2hFdmVudChhLl9fcmVzb3VyY2UmJiFhLl9fZXJyb3I/bmV3IEN1c3RvbUV2ZW50KCJsb2FkIix7YnViYmxlczohMX0pOm5ldyBDdXN0b21FdmVudCgiZXJyb3IiLHtidWJibGVzOiExfSkpLGEuX19wZW5kaW5nKWZvcih2YXIgYjthLl9fcGVuZGluZy5sZW5ndGg7KWI9YS5fX3BlbmRpbmcuc2hpZnQoKSxiJiZiKHt0YXJnZXQ6YX0pO3RoaXMucGFyc2VOZXh0KCl9LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpP3RoaXMucGFyc2VJbXBvcnQoYSk6KGEuaHJlZj1hLmhyZWYsdGhpcy5wYXJzZUdlbmVyaWMoYSkpfSxwYXJzZVN0eWxlOmZ1bmN0aW9uKGEpe3ZhciBiPWE7YT1mKGEpLGEuX19pbXBvcnRFbGVtZW50PWIsdGhpcy5wYXJzZUdlbmVyaWMoYSl9LHBhcnNlR2VuZXJpYzpmdW5jdGlvbihhKXt0aGlzLnRyYWNrRWxlbWVudChhKSx0aGlzLmFkZEVsZW1lbnRUb0RvY3VtZW50KGEpfSxyb290SW1wb3J0Rm9yRWxlbWVudDpmdW5jdGlvbihhKXtmb3IodmFyIGI9YTtiLm93bmVyRG9jdW1lbnQuX19pbXBvcnRMaW5rOyliPWIub3duZXJEb2N1bWVudC5fX2ltcG9ydExpbms7cmV0dXJuIGJ9LGFkZEVsZW1lbnRUb0RvY3VtZW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnJvb3RJbXBvcnRGb3JFbGVtZW50KGEuX19pbXBvcnRFbGVtZW50fHxhKSxjPWIuX19pbnNlcnRlZEVsZW1lbnRzPWIuX19pbnNlcnRlZEVsZW1lbnRzfHwwLGQ9Yi5uZXh0RWxlbWVudFNpYmxpbmcsZT0wO2M+ZTtlKyspZD1kJiZkLm5leHRFbGVtZW50U2libGluZztiLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsZCl9LHRyYWNrRWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1mdW5jdGlvbihkKXtiJiZiKGQpLGMubWFya1BhcnNpbmdDb21wbGV0ZShhKSxjLnBhcnNlTmV4dCgpfTtpZihhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGQpLGEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQpLGkmJiJzdHlsZSI9PT1hLmxvY2FsTmFtZSl7dmFyIGU9ITE7aWYoLTE9PWEudGV4dENvbnRlbnQuaW5kZXhPZigiQGltcG9ydCIpKWU9ITA7ZWxzZSBpZihhLnNoZWV0KXtlPSEwO2Zvcih2YXIgZixnPWEuc2hlZXQuY3NzUnVsZXMsaD1nP2cubGVuZ3RoOjAsaj0wO2g+aiYmKGY9Z1tqXSk7aisrKWYudHlwZT09PUNTU1J1bGUuSU1QT1JUX1JVTEUmJihlPWUmJkJvb2xlYW4oZi5zdHlsZVNoZWV0KSl9ZSYmYS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgibG9hZCIse2J1YmJsZXM6ITF9KSl9fSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLl9faW1wb3J0RWxlbWVudD1iLGQuc3JjPWIuc3JjP2Iuc3JjOmMoYiksYS5jdXJyZW50U2NyaXB0PWIsdGhpcy50cmFja0VsZW1lbnQoZCxmdW5jdGlvbigpe2QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSxhLmN1cnJlbnRTY3JpcHQ9bnVsbH0pLHRoaXMuYWRkRWxlbWVudFRvRG9jdW1lbnQoZCl9LG5leHRUb1BhcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heVBhcnNlPVtdLCF0aGlzLnBhcnNpbmdFbGVtZW50JiYodGhpcy5uZXh0VG9QYXJzZUluRG9jKGcpfHx0aGlzLm5leHRUb1BhcnNlRHluYW1pYygpKX0sbmV4dFRvUGFyc2VJbkRvYzpmdW5jdGlvbihhLGMpe2lmKGEmJnRoaXMuX21heVBhcnNlLmluZGV4T2YoYSk8MCl7dGhpcy5fbWF5UGFyc2UucHVzaChhKTtmb3IodmFyIGQsZT1hLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5wYXJzZVNlbGVjdG9yc0Zvck5vZGUoYSkpLGY9MCxnPWUubGVuZ3RoO2c+ZiYmKGQ9ZVtmXSk7ZisrKWlmKCF0aGlzLmlzUGFyc2VkKGQpKXJldHVybiB0aGlzLmhhc1Jlc291cmNlKGQpP2IoZCk/dGhpcy5uZXh0VG9QYXJzZUluRG9jKGQuaW1wb3J0LGQpOmQ6dm9pZCAwfXJldHVybiBjfSxuZXh0VG9QYXJzZUR5bmFtaWM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5keW5hbWljRWxlbWVudHNbMF19LHBhcnNlU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGE7cmV0dXJuIGI9PT1nP3RoaXMuZG9jdW1lbnRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzU2VsZWN0b3JzfSxpc1BhcnNlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5fX2ltcG9ydFBhcnNlZH0sbmVlZHNEeW5hbWljUGFyc2luZzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5keW5hbWljRWxlbWVudHMuaW5kZXhPZihhKT49MH0saGFzUmVzb3VyY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSkmJnZvaWQgMD09PWEuaW1wb3J0PyExOiEwfX0sbD0vKHVybFwoKShbXildKikoXCkpL2csbT0vKEBpbXBvcnRbXHNdKyg/IXVybFwoKSkoW147XSopKDspL2csbj17cmVzb2x2ZVVybHNJblN0eWxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudCxjPWIuY3JlYXRlRWxlbWVudCgiYSIpO3JldHVybiBhLnRleHRDb250ZW50PXRoaXMucmVzb2x2ZVVybHNJbkNzc1RleHQoYS50ZXh0Q29udGVudCxjKSxhfSxyZXNvbHZlVXJsc0luQ3NzVGV4dDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucmVwbGFjZVVybHMoYSxiLGwpO3JldHVybiBjPXRoaXMucmVwbGFjZVVybHMoYyxiLG0pfSxyZXBsYWNlVXJsczpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEucmVwbGFjZShjLGZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmPWQucmVwbGFjZSgvWyInXS9nLCIiKTtyZXR1cm4gYi5ocmVmPWYsZj1iLmhyZWYsYysiJyIrZisiJyIrZX0pfX07YS5wYXJzZXI9ayxhLnBhdGg9bn0oSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGMoYSxnKX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWJ9ZnVuY3Rpb24gZChhLGIpe3ZhciBjPWE7YyBpbnN0YW5jZW9mIERvY3VtZW50fHwoYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoZykpLGMuX1VSTD1iO3ZhciBkPWMuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2Quc2V0QXR0cmlidXRlKCJocmVmIixiKSxjLmJhc2VVUkl8fChjLmJhc2VVUkk9Yik7dmFyIGU9Yy5jcmVhdGVFbGVtZW50KCJtZXRhIik7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJjaGFyc2V0IiwidXRmLTgiKSxjLmhlYWQuYXBwZW5kQ2hpbGQoZSksYy5oZWFkLmFwcGVuZENoaWxkKGQpLGEgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGMuYm9keS5pbm5lckhUTUw9YSksd2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChjKSxjfXZhciBlPWEudXNlTmF0aXZlLGY9YS5mbGFncyxnPWEuSU1QT1JUX0xJTktfVFlQRTtpZihlKXZhciBoPXt9O2Vsc2V7dmFyIGk9YS5yb290RG9jdW1lbnQsaj0oYS54aHIsYS5Mb2FkZXIpLGs9YS5wYXJzZXIsaD17ZG9jdW1lbnRzOnt9LGRvY3VtZW50UHJlbG9hZFNlbGVjdG9yczoibGlua1tyZWw9IitnKyJdIixpbXBvcnRzUHJlbG9hZFNlbGVjdG9yczpbImxpbmtbcmVsPSIrZysiXSJdLmpvaW4oIiwiKSxsb2FkTm9kZTpmdW5jdGlvbihhKXtsLmFkZE5vZGUoYSl9LGxvYWRTdWJ0cmVlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubWFyc2hhbE5vZGVzKGEpO2wuYWRkTm9kZXMoYil9LG1hcnNoYWxOb2RlczpmdW5jdGlvbihhKXtyZXR1cm4gYS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMubG9hZFNlbGVjdG9yc0Zvck5vZGUoYSkpfSxsb2FkU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGE7cmV0dXJuIGI9PT1pP3RoaXMuZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzOnRoaXMuaW1wb3J0c1ByZWxvYWRTZWxlY3RvcnN9LGxvYWRlZDpmdW5jdGlvbihhLGMsZSxnLGgpe2lmKGYubG9hZCYmY29uc29sZS5sb2coImxvYWRlZCIsYSxjKSxjLl9fcmVzb3VyY2U9ZSxjLl9fZXJyb3I9ZyxiKGMpKXt2YXIgaT10aGlzLmRvY3VtZW50c1thXTt2b2lkIDA9PT1pJiYoaT1nP251bGw6ZChlLGh8fGEpLGkmJihpLl9faW1wb3J0TGluaz1jLHRoaXMuYm9vdERvY3VtZW50KGkpKSx0aGlzLmRvY3VtZW50c1thXT1pKSxjLmltcG9ydD1pfWsucGFyc2VOZXh0KCl9LGJvb3REb2N1bWVudDpmdW5jdGlvbihhKXt0aGlzLmxvYWRTdWJ0cmVlKGEpLHRoaXMub2JzZXJ2ZShhKSxrLnBhcnNlTmV4dCgpfSxsb2FkZWRBbGw6ZnVuY3Rpb24oKXtrLnBhcnNlTmV4dCgpfX0sbD1uZXcgaihoLmxvYWRlZC5iaW5kKGgpLGgubG9hZGVkQWxsLmJpbmQoaCkpO2lmKCFkb2N1bWVudC5iYXNlVVJJKXt2YXIgbT17Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYmFzZSIpO3JldHVybiBhP2EuaHJlZjp3aW5kb3cubG9jYXRpb24uaHJlZn0sY29uZmlndXJhYmxlOiEwfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsImJhc2VVUkkiLG0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLCJiYXNlVVJJIixtKX0iZnVuY3Rpb24iIT10eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50JiYod2luZG93LkN1c3RvbUV2ZW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYy5pbml0RXZlbnQoYSxiLmJ1YmJsZXM9PT0hMT8hMTohMCxiLmNhbmNlbGFibGU9PT0hMT8hMTohMCxiLmRldGFpbCksY30pfWEuaW1wb3J0ZXI9aCxhLklNUE9SVF9MSU5LX1RZUEU9ZyxhLmltcG9ydExvYWRlcj1sfSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zm9yKHZhciBiLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGI9YVtkXSk7ZCsrKSJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMubGVuZ3RoJiZjKGIuYWRkZWROb2Rlcyl9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGIsZixpLGosaz0wLGw9YS5sZW5ndGg7bD5rJiYoaT1hW2tdKTtrKyspYnx8KGI9aS5vd25lckRvY3VtZW50LGY9aC5pc1BhcnNlZChiKSksaj1kKGkpLGomJmcubG9hZE5vZGUoaSksZShpKSYmZiYmaC5wYXJzZUR5bmFtaWMoaSxqKSxpLmNoaWxkcmVuJiZpLmNoaWxkcmVuLmxlbmd0aCYmYyhpLmNoaWxkcmVuKX1mdW5jdGlvbiBkKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZSYmaS5jYWxsKGEsZy5sb2FkU2VsZWN0b3JzRm9yTm9kZShhKSl9ZnVuY3Rpb24gZShhKXtyZXR1cm4gMT09PWEubm9kZVR5cGUmJmkuY2FsbChhLGgucGFyc2VTZWxlY3RvcnNGb3JOb2RlKGEpKX1mdW5jdGlvbiBmKGEpe2oub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfXZhciBnPShhLklNUE9SVF9MSU5LX1RZUEUsYS5pbXBvcnRlciksaD1hLnBhcnNlcixpPUhUTUxFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3Isaj1uZXcgTXV0YXRpb25PYnNlcnZlcihiKTthLm9ic2VydmU9ZixnLm9ic2VydmU9Zn0oSFRNTEltcG9ydHMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe0hUTUxJbXBvcnRzLmltcG9ydGVyLmJvb3REb2N1bWVudChiKX12YXIgYj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7SFRNTEltcG9ydHMudXNlTmF0aXZlfHwoImNvbXBsZXRlIj09PWRvY3VtZW50LnJlYWR5U3RhdGV8fCJpbnRlcmFjdGl2ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlJiYhd2luZG93LmF0dGFjaEV2ZW50P2EoKTpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixhKSl9KCksd2luZG93LkN1c3RvbUVsZW1lbnRzPXdpbmRvdy5DdXN0b21FbGVtZW50c3x8e2ZsYWdzOnt9fSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyxkKXt2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2lmKCFlKWZvcihlPWEuZmlyc3RDaGlsZDtlJiZlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWU9ZS5uZXh0U2libGluZztmb3IoO2U7KWMoZSxkKSE9PSEwJiZiKGUsYyxkKSxlPWUubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiKXtmb3IodmFyIGM9YS5zaGFkb3dSb290O2M7KWQoYyxiKSxjPWMub2xkZXJTaGFkb3dSb290fWZ1bmN0aW9uIGQoYSxkKXtiKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSk/ITA6dm9pZCBjKGEsZCl9KSxjKGEsZCl9ZnVuY3Rpb24gZShhKXtyZXR1cm4gaChhKT8oaShhKSwhMCk6dm9pZCBsKGEpfWZ1bmN0aW9uIGYoYSl7ZChhLGZ1bmN0aW9uKGEpe3JldHVybiBlKGEpPyEwOnZvaWQgMH0pfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIGUoYSl8fGYoYSl9ZnVuY3Rpb24gaChiKXtpZighYi5fX3VwZ3JhZGVkX18mJmIubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoImlzIil8fGIubG9jYWxOYW1lLGQ9YS5yZWdpc3RyeVtjXTtpZihkKXJldHVybiBCLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZToiLGIubG9jYWxOYW1lKSxhLnVwZ3JhZGUoYiksQi5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSwhMH19ZnVuY3Rpb24gaShhKXtsKGEpLHIoYSkmJmQoYSxmdW5jdGlvbihhKXtsKGEpfSl9ZnVuY3Rpb24gaihhKXtpZihHLnB1c2goYSksIUYpe0Y9ITA7dmFyIGI9d2luZG93LlBsYXRmb3JtJiZ3aW5kb3cuUGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2t8fHNldFRpbWVvdXQ7YihrKX19ZnVuY3Rpb24gaygpe0Y9ITE7Zm9yKHZhciBhLGI9RyxjPTAsZD1iLmxlbmd0aDtkPmMmJihhPWJbY10pO2MrKylhKCk7Rz1bXX1mdW5jdGlvbiBsKGEpe0Q/aihmdW5jdGlvbigpe20oYSl9KTptKGEpfWZ1bmN0aW9uIG0oYSl7KGEuYXR0YWNoZWRDYWxsYmFja3x8YS5kZXRhY2hlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmQi5kb20pJiYoQi5kb20mJmNvbnNvbGUuZ3JvdXAoImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLHIoYSkmJihhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCkrMSxhLl9faW5zZXJ0ZWQ8MSYmKGEuX19pbnNlcnRlZD0xKSxhLl9faW5zZXJ0ZWQ+MT9CLmRvbSYmY29uc29sZS53YXJuKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLmF0dGFjaGVkQ2FsbGJhY2smJihCLmRvbSYmY29uc29sZS5sb2coImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLGEuYXR0YWNoZWRDYWxsYmFjaygpKSksQi5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gbihhKXtvKGEpLGQoYSxmdW5jdGlvbihhKXtvKGEpfSl9ZnVuY3Rpb24gbyhhKXtEP2ooZnVuY3Rpb24oKXtwKGEpfSk6cChhKX1mdW5jdGlvbiBwKGEpeyhhLmF0dGFjaGVkQ2FsbGJhY2t8fGEuZGV0YWNoZWRDYWxsYmFja3x8YS5fX3VwZ3JhZGVkX18mJkIuZG9tKSYmKEIuZG9tJiZjb25zb2xlLmdyb3VwKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUpLHIoYSl8fChhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCktMSxhLl9faW5zZXJ0ZWQ+MCYmKGEuX19pbnNlcnRlZD0wKSxhLl9faW5zZXJ0ZWQ8MD9CLmRvbSYmY29uc29sZS53YXJuKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuZGV0YWNoZWRDYWxsYmFjayYmYS5kZXRhY2hlZENhbGxiYWNrKCkpLEIuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCkpfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD9TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSk6YX1mdW5jdGlvbiByKGEpe2Zvcih2YXIgYj1hLGM9cShkb2N1bWVudCk7Yjspe2lmKGI9PWMpcmV0dXJuITA7Yj1iLnBhcmVudE5vZGV8fGIuaG9zdH19ZnVuY3Rpb24gcyhhKXtpZihhLnNoYWRvd1Jvb3QmJiFhLnNoYWRvd1Jvb3QuX193YXRjaGVkKXtCLmRvbSYmY29uc29sZS5sb2coIndhdGNoaW5nIHNoYWRvdy1yb290IGZvcjogIixhLmxvY2FsTmFtZSk7Zm9yKHZhciBiPWEuc2hhZG93Um9vdDtiOyl0KGIpLGI9Yi5vbGRlclNoYWRvd1Jvb3R9fWZ1bmN0aW9uIHQoYSl7dyhhKX1mdW5jdGlvbiB1KGEpe2lmKEIuZG9tKXt2YXIgYj1hWzBdO2lmKGImJiJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMmJmIuYWRkZWROb2Rlcyl7Zm9yKHZhciBjPWIuYWRkZWROb2Rlc1swXTtjJiZjIT09ZG9jdW1lbnQmJiFjLmhvc3Q7KWM9Yy5wYXJlbnROb2RlO3ZhciBkPWMmJihjLlVSTHx8Yy5fVVJMfHxjLmhvc3QmJmMuaG9zdC5sb2NhbE5hbWUpfHwiIjtkPWQuc3BsaXQoIi8/Iikuc2hpZnQoKS5zcGxpdCgiLyIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoIm11dGF0aW9ucyAoJWQpIFslc10iLGEubGVuZ3RoLGR8fCIiKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7ImNoaWxkTGlzdCI9PT1hLnR5cGUmJihIKGEuYWRkZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmZyhhKX0pLEgoYS5yZW1vdmVkTm9kZXMsZnVuY3Rpb24oYSl7YS5sb2NhbE5hbWUmJm4oYSl9KSl9KSxCLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHYoYSl7Zm9yKGF8fChhPXEoZG9jdW1lbnQpKTthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3ZhciBiPWEuX19vYnNlcnZlcjtiJiYodShiLnRha2VSZWNvcmRzKCkpLGsoKSl9ZnVuY3Rpb24gdyhhKXtpZighYS5fX29ic2VydmVyKXt2YXIgYj1uZXcgTXV0YXRpb25PYnNlcnZlcih1KTtiLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KSxhLl9fb2JzZXJ2ZXI9Yn19ZnVuY3Rpb24geChhKXt3KGEpfWZ1bmN0aW9uIHkoYSl7Qi5kb20mJmNvbnNvbGUuZ3JvdXAoInVwZ3JhZGVEb2N1bWVudDogIixhLmJhc2VVUkkuc3BsaXQoIi8iKS5wb3AoKSksZyhhKSxCLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHooYSl7RT1bXSxBKGEpLEU9bnVsbH1mdW5jdGlvbiBBKGEpe2lmKGE9cShhKSwhKEUuaW5kZXhPZihhKT49MCkpe0UucHVzaChhKTtmb3IodmFyIGIsYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPSIrQysiXSIpLGQ9MCxlPWMubGVuZ3RoO2U+ZCYmKGI9Y1tkXSk7ZCsrKWIuaW1wb3J0JiZiLmltcG9ydC5fX3BhcnNlZCYmQShiLmltcG9ydCk7eShhKX19dmFyIEI9d2luZG93LmxvZ0ZsYWdzfHx7fSxDPXdpbmRvdy5IVE1MSW1wb3J0cz9IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOiJub25lIixEPSF3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9PT13aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyO2EuaGFzUG9seWZpbGxNdXRhdGlvbnM9RDt2YXIgRSxGPSExLEc9W10sSD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EuSU1QT1JUX0xJTktfVFlQRT1DLGEud2F0Y2hTaGFkb3c9cyxhLnVwZ3JhZGVEb2N1bWVudFRyZWU9eixhLnVwZ3JhZGVBbGw9ZyxhLnVwZ3JhZGVTdWJ0cmVlPWYsYS5pbnNlcnRlZE5vZGU9aSxhLm9ic2VydmVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50PXksYS50YWtlUmVjb3Jkcz12fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixnKXt2YXIgaD1nfHx7fTtpZighYil0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgYG5hbWVgIG11c3Qgbm90IGJlIGVtcHR5Iik7aWYoYi5pbmRleE9mKCItIik8MCl0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgKCduYW1lJykgbXVzdCBjb250YWluIGEgZGFzaCAoJy0nKS4gQXJndW1lbnQgcHJvdmlkZWQgd2FzICciK1N0cmluZyhiKSsiJy4iKTtpZihjKGIpKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGV4ZWN1dGUgJ3JlZ2lzdGVyRWxlbWVudCcgb24gJ0RvY3VtZW50JzogUmVnaXN0cmF0aW9uIGZhaWxlZCBmb3IgdHlwZSAnIitTdHJpbmcoYikrIicuIFRoZSB0eXBlIG5hbWUgaXMgaW52YWxpZC4iKTtpZihuKGIpKXRocm93IG5ldyBFcnJvcigiRHVwbGljYXRlRGVmaW5pdGlvbkVycm9yOiBhIHR5cGUgd2l0aCBuYW1lICciK1N0cmluZyhiKSsiJyBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQiKTtpZighaC5wcm90b3R5cGUpdGhyb3cgbmV3IEVycm9yKCJPcHRpb25zIG1pc3NpbmcgcmVxdWlyZWQgcHJvdG90eXBlIHByb3BlcnR5Iik7cmV0dXJuIGguX19uYW1lPWIudG9Mb3dlckNhc2UoKSxoLmxpZmVjeWNsZT1oLmxpZmVjeWNsZXx8e30saC5hbmNlc3RyeT1kKGguZXh0ZW5kcyksZShoKSxmKGgpLGwoaC5wcm90b3R5cGUpLG8oaC5fX25hbWUsaCksaC5jdG9yPXAoaCksaC5jdG9yLnByb3RvdHlwZT1oLnByb3RvdHlwZSxoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oLmN0b3IsYS5yZWFkeSYmYS51cGdyYWRlRG9jdW1lbnRUcmVlKGRvY3VtZW50KSxoLmN0b3J9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9MDtiPHkubGVuZ3RoO2IrKylpZihhPT09eVtiXSlyZXR1cm4hMH1mdW5jdGlvbiBkKGEpe3ZhciBiPW4oYSk7cmV0dXJuIGI/ZChiLmV4dGVuZHMpLmNvbmNhdChbYl0pOltdfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiLGM9YS5leHRlbmRzLGQ9MDtiPWEuYW5jZXN0cnlbZF07ZCsrKWM9Yi5pcyYmYi50YWc7YS50YWc9Y3x8YS5fX25hbWUsYyYmKGEuaXM9YS5fX25hbWUpfWZ1bmN0aW9uIGYoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKSxkPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKTtkPT09YS5wcm90b3R5cGUmJihiPWQpfWZvcih2YXIgZSxmPWEucHJvdG90eXBlO2YmJmYhPT1iOyllPU9iamVjdC5nZXRQcm90b3R5cGVPZihmKSxmLl9fcHJvdG9fXz1lLGY9ZTthLm5hdGl2ZT1ifX1mdW5jdGlvbiBnKGEpe3JldHVybiBoKEIoYS50YWcpLGEpfWZ1bmN0aW9uIGgoYixjKXtyZXR1cm4gYy5pcyYmYi5zZXRBdHRyaWJ1dGUoImlzIixjLmlzKSxpKGIsYyksYi5fX3VwZ3JhZGVkX189ITAsayhiKSxhLmluc2VydGVkTm9kZShiKSxhLnVwZ3JhZGVTdWJ0cmVlKGIpLGJ9ZnVuY3Rpb24gaShhLGIpe09iamVjdC5fX3Byb3RvX18/YS5fX3Byb3RvX189Yi5wcm90b3R5cGU6KGooYSxiLnByb3RvdHlwZSxiLm5hdGl2ZSksYS5fX3Byb3RvX189Yi5wcm90b3R5cGUpfWZ1bmN0aW9uIGooYSxiLGMpe2Zvcih2YXIgZD17fSxlPWI7ZSE9PWMmJmUhPT1IVE1MRWxlbWVudC5wcm90b3R5cGU7KXtmb3IodmFyIGYsZz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKSxoPTA7Zj1nW2hdO2grKylkW2ZdfHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsZixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsZikpLGRbZl09MSk7ZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9fWZ1bmN0aW9uIGsoYSl7YS5jcmVhdGVkQ2FsbGJhY2smJmEuY3JlYXRlZENhbGxiYWNrKCl9ZnVuY3Rpb24gbChhKXtpZighYS5zZXRBdHRyaWJ1dGUuX3BvbHlmaWxsZWQpe3ZhciBiPWEuc2V0QXR0cmlidXRlO2Euc2V0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYyl7bS5jYWxsKHRoaXMsYSxjLGIpfTt2YXIgYz1hLnJlbW92ZUF0dHJpYnV0ZTthLnJlbW92ZUF0dHJpYnV0ZT1mdW5jdGlvbihhKXttLmNhbGwodGhpcyxhLG51bGwsYyl9LGEuc2V0QXR0cmlidXRlLl9wb2x5ZmlsbGVkPSEwfX1mdW5jdGlvbiBtKGEsYixjKXthPWEudG9Mb3dlckNhc2UoKTt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShhKTtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT10aGlzLmdldEF0dHJpYnV0ZShhKTt0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmZSE9PWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGEsZCxlKX1mdW5jdGlvbiBuKGEpe3JldHVybiBhP3pbYS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9ZnVuY3Rpb24gbyhhLGIpe3pbYV09Yn1mdW5jdGlvbiBwKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBnKGEpfX1mdW5jdGlvbiBxKGEsYixjKXtyZXR1cm4gYT09PUE/cihiLGMpOkMoYSxiKX1mdW5jdGlvbiByKGEsYil7dmFyIGM9bihifHxhKTtpZihjKXtpZihhPT1jLnRhZyYmYj09Yy5pcylyZXR1cm4gbmV3IGMuY3RvcjtpZighYiYmIWMuaXMpcmV0dXJuIG5ldyBjLmN0b3J9aWYoYil7dmFyIGQ9cihhKTtyZXR1cm4gZC5zZXRBdHRyaWJ1dGUoImlzIixiKSxkfXZhciBkPUIoYSk7cmV0dXJuIGEuaW5kZXhPZigiLSIpPj0wJiZpKGQsSFRNTEVsZW1lbnQpLGR9ZnVuY3Rpb24gcyhhKXtpZighYS5fX3VwZ3JhZGVkX18mJmEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoImlzIiksYz1uKGJ8fGEubG9jYWxOYW1lKTtpZihjKXtpZihiJiZjLnRhZz09YS5sb2NhbE5hbWUpcmV0dXJuIGgoYSxjKTtpZighYiYmIWMuZXh0ZW5kcylyZXR1cm4gaChhLGMpfX19ZnVuY3Rpb24gdChiKXt2YXIgYz1ELmNhbGwodGhpcyxiKTtyZXR1cm4gYS51cGdyYWRlQWxsKGMpLGN9YXx8KGE9d2luZG93LkN1c3RvbUVsZW1lbnRzPXtmbGFnczp7fX0pO3ZhciB1PWEuZmxhZ3Msdj1Cb29sZWFuKGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCksdz0hdS5yZWdpc3RlciYmdiYmIXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmKCF3aW5kb3cuSFRNTEltcG9ydHN8fEhUTUxJbXBvcnRzLnVzZU5hdGl2ZSk7aWYodyl7dmFyIHg9ZnVuY3Rpb24oKXt9O2EucmVnaXN0cnk9e30sYS51cGdyYWRlRWxlbWVudD14LGEud2F0Y2hTaGFkb3c9eCxhLnVwZ3JhZGU9eCxhLnVwZ3JhZGVBbGw9eCxhLnVwZ3JhZGVTdWJ0cmVlPXgsYS5vYnNlcnZlRG9jdW1lbnQ9eCxhLnVwZ3JhZGVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50VHJlZT14LGEudGFrZVJlY29yZHM9eCxhLnJlc2VydmVkVGFnTGlzdD1bXX1lbHNle3ZhciB5PVsiYW5ub3RhdGlvbi14bWwiLCJjb2xvci1wcm9maWxlIiwiZm9udC1mYWNlIiwiZm9udC1mYWNlLXNyYyIsImZvbnQtZmFjZS11cmkiLCJmb250LWZhY2UtZm9ybWF0IiwiZm9udC1mYWNlLW5hbWUiLCJtaXNzaW5nLWdseXBoIl0sej17fSxBPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIixCPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYmluZChkb2N1bWVudCksQz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMuYmluZChkb2N1bWVudCksRD1Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGU7ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50PWIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudD1yLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUz1xLE5vZGUucHJvdG90eXBlLmNsb25lTm9kZT10LGEucmVnaXN0cnk9eixhLnVwZ3JhZGU9c312YXIgRTtFPU9iamVjdC5fX3Byb3RvX198fHc/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGJ9OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWE7Yzspe2lmKGM9PT1iLnByb3RvdHlwZSlyZXR1cm4hMDtjPWMuX19wcm90b19ffXJldHVybiExfSxhLmluc3RhbmNlb2Y9RSxhLnJlc2VydmVkVGFnTGlzdD15LGRvY3VtZW50LnJlZ2lzdGVyPWRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCxhLmhhc05hdGl2ZT12LGEudXNlTmF0aXZlPXd9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmYS5nZXRBdHRyaWJ1dGUoInJlbCIpPT09Y312YXIgYz1hLklNUE9SVF9MSU5LX1RZUEUsZD17c2VsZWN0b3JzOlsibGlua1tyZWw9IitjKyJdIl0sbWFwOntsaW5rOiJwYXJzZUxpbmsifSxwYXJzZTpmdW5jdGlvbihhKXtpZighYS5fX3BhcnNlZCl7YS5fX3BhcnNlZD0hMDt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoZC5zZWxlY3RvcnMpO2UoYixmdW5jdGlvbihhKXtkW2QubWFwW2EubG9jYWxOYW1lXV0oYSl9KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoYSksQ3VzdG9tRWxlbWVudHMub2JzZXJ2ZURvY3VtZW50KGEpfX0scGFyc2VMaW5rOmZ1bmN0aW9uKGEpe2IoYSkmJnRoaXMucGFyc2VJbXBvcnQoYSl9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGEpe2EuaW1wb3J0JiZkLnBhcnNlKGEuaW1wb3J0KX19LGU9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLnBhcnNlcj1kLGEuSU1QT1JUX0xJTktfVFlQRT1jfSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtDdXN0b21FbGVtZW50cy5wYXJzZXIucGFyc2UoZG9jdW1lbnQpLEN1c3RvbUVsZW1lbnRzLnVwZ3JhZGVEb2N1bWVudChkb2N1bWVudCksd2luZG93LkhUTUxJbXBvcnRzJiYoSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2s9ZnVuY3Rpb24oYSl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGEuaW1wb3J0KX0pLEN1c3RvbUVsZW1lbnRzLnJlYWR5PSEwLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtDdXN0b21FbGVtZW50cy5yZWFkeVRpbWU9RGF0ZS5ub3coKSx3aW5kb3cuSFRNTEltcG9ydHMmJihDdXN0b21FbGVtZW50cy5lbGFwc2VkPUN1c3RvbUVsZW1lbnRzLnJlYWR5VGltZS1IVE1MSW1wb3J0cy5yZWFkeVRpbWUpLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJXZWJDb21wb25lbnRzUmVhZHkiLHtidWJibGVzOiEwfSkpfSl9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkN1c3RvbUV2ZW50Iik7cmV0dXJuIGMuaW5pdEN1c3RvbUV2ZW50KGEsQm9vbGVhbihiLmJ1YmJsZXMpLEJvb2xlYW4oYi5jYW5jZWxhYmxlKSxiLmRldGFpbCksY30sd2luZG93LkN1c3RvbUV2ZW50LnByb3RvdHlwZT13aW5kb3cuRXZlbnQucHJvdG90eXBlKSwiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8YS5mbGFncy5lYWdlciliKCk7ZWxzZSBpZigiaW50ZXJhY3RpdmUiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8d2luZG93LmF0dGFjaEV2ZW50fHx3aW5kb3cuSFRNTEltcG9ydHMmJiF3aW5kb3cuSFRNTEltcG9ydHMucmVhZHkpe3ZhciBjPXdpbmRvdy5IVE1MSW1wb3J0cyYmIUhUTUxJbXBvcnRzLnJlYWR5PyJIVE1MSW1wb3J0c0xvYWRlZCI6IkRPTUNvbnRlbnRMb2FkZWQiO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKGMsYil9ZWxzZSBiKCl9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oKXtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe3ZhciBhPVsidXBncmFkZUFsbCIsInVwZ3JhZGVTdWJ0cmVlIiwib2JzZXJ2ZURvY3VtZW50IiwidXBncmFkZURvY3VtZW50Il0sYj17fTthLmZvckVhY2goZnVuY3Rpb24oYSl7YlthXT1DdXN0b21FbGVtZW50c1thXX0pLGEuZm9yRWFjaChmdW5jdGlvbihhKXtDdXN0b21FbGVtZW50c1thXT1mdW5jdGlvbihjKXtyZXR1cm4gYlthXSh3cmFwKGMpKX19KX19KCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXt3aW5kb3cuUG9seW1lcj09PWUmJih3aW5kb3cuUG9seW1lcj1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcignWW91IHRyaWVkIHRvIHVzZSBwb2x5bWVyIHdpdGhvdXQgbG9hZGluZyBpdCBmaXJzdC4gVG8gbG9hZCBwb2x5bWVyLCA8bGluayByZWw9ImltcG9ydCIgaHJlZj0iY29tcG9uZW50cy9wb2x5bWVyL3BvbHltZXIuaHRtbCI+Jyl9KX1pZighd2luZG93LnBlcmZvcm1hbmNlKXt2YXIgYz1EYXRlLm5vdygpO3dpbmRvdy5wZXJmb3JtYW5jZT17bm93OmZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCktYwp9fX13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7cmV0dXJuIGE/ZnVuY3Rpb24oYil7cmV0dXJuIGEoZnVuY3Rpb24oKXtiKHBlcmZvcm1hbmNlLm5vdygpKX0pfTpmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9fSgpKTt2YXIgZD1bXSxlPWZ1bmN0aW9uKGEpeyJzdHJpbmciIT10eXBlb2YgYSYmMT09PWFyZ3VtZW50cy5sZW5ndGgmJkFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoYXJndW1lbnRzLGRvY3VtZW50Ll9jdXJyZW50U2NyaXB0KSxkLnB1c2goYXJndW1lbnRzKX07d2luZG93LlBvbHltZXI9ZSxhLmNvbnN1bWVEZWNsYXJhdGlvbnM9ZnVuY3Rpb24oYil7YS5jb25zdW1lRGVjbGFyYXRpb25zPWZ1bmN0aW9uKCl7dGhyb3ciUG9zc2libGUgYXR0ZW1wdCB0byBsb2FkIFBvbHltZXIgdHdpY2UifSxiJiZiKGQpLGQ9bnVsbH0sSFRNTEltcG9ydHMudXNlTmF0aXZlP2IoKTphZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixiKX0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7YS50ZXh0Q29udGVudD0iYm9keSB7dHJhbnNpdGlvbjogb3BhY2l0eSBlYXNlLWluIDAuMnM7IH0gXG5ib2R5W3VucmVzb2x2ZWRdIHtvcGFjaXR5OiAwOyBkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsgcG9zaXRpb246IHJlbGF0aXZlOyB9IFxuIjt2YXIgYj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfShQbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBiPWJ8fFtdLGIubWFwfHwoYj1bYl0pLGEuYXBwbHkodGhpcyxiLm1hcChkKSl9ZnVuY3Rpb24gYyhhLGMsZCl7dmFyIGU7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm47Y2FzZSAxOmU9bnVsbDticmVhaztjYXNlIDI6ZT1jLmFwcGx5KHRoaXMpO2JyZWFrO2RlZmF1bHQ6ZT1iKGQsYyl9ZlthXT1lfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZbYV19ZnVuY3Rpb24gZShhLGMpe0hUTUxJbXBvcnRzLndoZW5JbXBvcnRzUmVhZHkoZnVuY3Rpb24oKXtiKGMsYSl9KX12YXIgZj17fTthLm1hcnNoYWw9ZCxhLm1vZHVsYXJpemU9YyxhLnVzaW5nPWV9KHdpbmRvdyk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsYXRmb3JtLmpzLm1hcA==",
                "body": "LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbjogMC40LjIKCndpbmRvdy5QbGF0Zm9ybT13aW5kb3cuUGxhdGZvcm18fHt9LHdpbmRvdy5sb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LGZ1bmN0aW9uKGEpe3ZhciBiPWEuZmxhZ3N8fHt9O2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9IiksYVswXSYmKGJbYVswXV09YVsxXXx8ITApfSk7dmFyIGM9ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0W3NyYyo9InBsYXRmb3JtLmpzIl0nKTtpZihjKWZvcih2YXIgZCxlPWMuYXR0cmlidXRlcyxmPTA7ZjxlLmxlbmd0aDtmKyspZD1lW2ZdLCJzcmMiIT09ZC5uYW1lJiYoYltkLm5hbWVdPWQudmFsdWV8fCEwKTtiLmxvZyYmYi5sb2cuc3BsaXQoIiwiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3dpbmRvdy5sb2dGbGFnc1thXT0hMH0pLGIuc2hhZG93PWIuc2hhZG93fHxiLnNoYWRvd2RvbXx8Yi5wb2x5ZmlsbCxiLnNoYWRvdz0ibmF0aXZlIj09PWIuc2hhZG93PyExOmIuc2hhZG93fHwhSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QsYi5zaGFkb3cmJmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInNjcmlwdCIpLmxlbmd0aD4xJiZjb25zb2xlLmxvZygiV2FybmluZzogcGxhdGZvcm0uanMgaXMgbm90IHRoZSBmaXJzdCBzY3JpcHQgb24gdGhlIHBhZ2UuIFNlZSBodHRwOi8vd3d3LnBvbHltZXItcHJvamVjdC5vcmcvZG9jcy9zdGFydC9wbGF0Zm9ybS5odG1sI3NldHVwIGZvciBkZXRhaWxzLiIpLGIucmVnaXN0ZXImJih3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LHdpbmRvdy5DdXN0b21FbGVtZW50cy5mbGFncy5yZWdpc3Rlcj1iLnJlZ2lzdGVyKSxiLmltcG9ydHMmJih3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LHdpbmRvdy5IVE1MSW1wb3J0cy5mbGFncy5pbXBvcnRzPWIuaW1wb3J0cyksYS5mbGFncz1ifShQbGF0Zm9ybSksInVuZGVmaW5lZCI9PXR5cGVvZiBXZWFrTWFwJiYhZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1EYXRlLm5vdygpJTFlOSxjPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYisrICsiX18iKX07Yy5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihiLGMpe3ZhciBkPWJbdGhpcy5uYW1lXTtyZXR1cm4gZCYmZFswXT09PWI/ZFsxXT1jOmEoYix0aGlzLm5hbWUse3ZhbHVlOltiLGNdLHdyaXRhYmxlOiEwfSksdGhpc30sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybihiPWFbdGhpcy5uYW1lXSkmJmJbMF09PT1hP2JbMV06dm9pZCAwfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMubmFtZV07aWYoIWIpcmV0dXJuITE7dmFyIGM9YlswXT09PWE7cmV0dXJuIGJbMF09YlsxXT12b2lkIDAsY30saGFzOmZ1bmN0aW9uKGEpe3ZhciBiPWFbdGhpcy5uYW1lXTtyZXR1cm4gYj9iWzBdPT09YTohMX19LHdpbmRvdy5XZWFrTWFwPWN9KCksUGxhdGZvcm0uZmxhZ3Muc2hhZG93PyghZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtmdW5jdGlvbiBhKGEpe2I9YX1pZigiZnVuY3Rpb24iIT10eXBlb2YgT2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBBcnJheS5vYnNlcnZlKXJldHVybiExO3ZhciBiPVtdLGM9e30sZD1bXTtyZXR1cm4gT2JqZWN0Lm9ic2VydmUoYyxhKSxBcnJheS5vYnNlcnZlKGQsYSksYy5pZD0xLGMuaWQ9MixkZWxldGUgYy5pZCxkLnB1c2goMSwyKSxkLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSw1IT09Yi5sZW5ndGg/ITE6ImFkZCIhPWJbMF0udHlwZXx8InVwZGF0ZSIhPWJbMV0udHlwZXx8ImRlbGV0ZSIhPWJbMl0udHlwZXx8InNwbGljZSIhPWJbM10udHlwZXx8InNwbGljZSIhPWJbNF0udHlwZT8hMTooT2JqZWN0LnVub2JzZXJ2ZShjLGEpLEFycmF5LnVub2JzZXJ2ZShkLGEpLCEwKX1mdW5jdGlvbiBjKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBjaHJvbWUmJmNocm9tZS5hcHAmJmNocm9tZS5hcHAucnVudGltZSlyZXR1cm4hMTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmbmF2aWdhdG9yLmdldERldmljZVN0b3JhZ2UpcmV0dXJuITE7dHJ5e3ZhciBhPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7cmV0dXJuIGEoKX1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gZChhKXtyZXR1cm4rYT09PWE+Pj4wJiYiIiE9PWF9ZnVuY3Rpb24gZShhKXtyZXR1cm4rYX1mdW5jdGlvbiBmKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYT09PWI/MCE9PWF8fDEvYT09PTEvYjpSKGEpJiZSKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBoKGEpe2lmKHZvaWQgMD09PWEpcmV0dXJuImVvZiI7dmFyIGI9YS5jaGFyQ29kZUF0KDApO3N3aXRjaChiKXtjYXNlIDkxOmNhc2UgOTM6Y2FzZSA0NjpjYXNlIDM0OmNhc2UgMzk6Y2FzZSA0ODpyZXR1cm4gYTtjYXNlIDk1OmNhc2UgMzY6cmV0dXJuImlkZW50IjtjYXNlIDMyOmNhc2UgOTpjYXNlIDEwOmNhc2UgMTM6Y2FzZSAxNjA6Y2FzZSA2NTI3OTpjYXNlIDgyMzI6Y2FzZSA4MjMzOnJldHVybiJ3cyJ9cmV0dXJuIGI+PTk3JiYxMjI+PWJ8fGI+PTY1JiY5MD49Yj8iaWRlbnQiOmI+PTQ5JiY1Nz49Yj8ibnVtYmVyIjoiZWxzZSJ9ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBqKGEpe2Z1bmN0aW9uIGIoKXtpZighKG0+PWEubGVuZ3RoKSl7dmFyIGI9YVttKzFdO3JldHVybiJpblNpbmdsZVF1b3RlIj09biYmIiciPT1ifHwiaW5Eb3VibGVRdW90ZSI9PW4mJiciJz09Yj8obSsrLGQ9YixvLmFwcGVuZCgpLCEwKTp2b2lkIDB9fWZvcih2YXIgYyxkLGUsZixnLGosayxsPVtdLG09LTEsbj0iYmVmb3JlUGF0aCIsbz17cHVzaDpmdW5jdGlvbigpe3ZvaWQgMCE9PWUmJihsLnB1c2goZSksZT12b2lkIDApfSxhcHBlbmQ6ZnVuY3Rpb24oKXt2b2lkIDA9PT1lP2U9ZDplKz1kfX07bjspaWYobSsrLGM9YVttXSwiXFwiIT1jfHwhYihuKSl7aWYoZj1oKGMpLGs9V1tuXSxnPWtbZl18fGtbImVsc2UiXXx8ImVycm9yIiwiZXJyb3IiPT1nKXJldHVybjtpZihuPWdbMF0saj1vW2dbMV1dfHxpLGQ9dm9pZCAwPT09Z1syXT9jOmdbMl0saigpLCJhZnRlclBhdGgiPT09bilyZXR1cm4gbH19ZnVuY3Rpb24gayhhKXtyZXR1cm4gVi50ZXN0KGEpfWZ1bmN0aW9uIGwoYSxiKXtpZihiIT09WCl0aHJvdyBFcnJvcigiVXNlIFBhdGguZ2V0IHRvIHJldHJpZXZlIHBhdGggb2JqZWN0cyIpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXRoaXMucHVzaChTdHJpbmcoYVtjXSkpO1EmJnRoaXMubGVuZ3RoJiYodGhpcy5nZXRWYWx1ZUZyb209dGhpcy5jb21waWxlZEdldFZhbHVlRnJvbUZuKCkpfWZ1bmN0aW9uIG0oYSl7aWYoYSBpbnN0YW5jZW9mIGwpcmV0dXJuIGE7aWYoKG51bGw9PWF8fDA9PWEubGVuZ3RoKSYmKGE9IiIpLCJzdHJpbmciIT10eXBlb2YgYSl7aWYoZChhLmxlbmd0aCkpcmV0dXJuIG5ldyBsKGEsWCk7YT1TdHJpbmcoYSl9dmFyIGI9WVthXTtpZihiKXJldHVybiBiO3ZhciBjPWooYSk7aWYoIWMpcmV0dXJuIFo7dmFyIGI9bmV3IGwoYyxYKTtyZXR1cm4gWVthXT1iLGJ9ZnVuY3Rpb24gbihhKXtyZXR1cm4gZChhKT8iWyIrYSsiXSI6J1siJythLnJlcGxhY2UoLyIvZywnXFwiJykrJyJdJ31mdW5jdGlvbiBvKGIpe2Zvcih2YXIgYz0wO18+YyYmYi5jaGVja18oKTspYysrO3JldHVybiBPJiYoYS5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1jKSxjPjB9ZnVuY3Rpb24gcChhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBxKGEpe3JldHVybiBwKGEuYWRkZWQpJiZwKGEucmVtb3ZlZCkmJnAoYS5jaGFuZ2VkKX1mdW5jdGlvbiByKGEsYil7dmFyIGM9e30sZD17fSxlPXt9O2Zvcih2YXIgZiBpbiBiKXt2YXIgZz1hW2ZdOyh2b2lkIDA9PT1nfHxnIT09YltmXSkmJihmIGluIGE/ZyE9PWJbZl0mJihlW2ZdPWcpOmRbZl09dm9pZCAwKX1mb3IodmFyIGYgaW4gYSlmIGluIGJ8fChjW2ZdPWFbZl0pO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiZhLmxlbmd0aCE9PWIubGVuZ3RoJiYoZS5sZW5ndGg9YS5sZW5ndGgpLHthZGRlZDpjLHJlbW92ZWQ6ZCxjaGFuZ2VkOmV9fWZ1bmN0aW9uIHMoKXtpZighYWIubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYT0wO2E8YWIubGVuZ3RoO2ErKylhYlthXSgpO3JldHVybiBhYi5sZW5ndGg9MCwhMH1mdW5jdGlvbiB0KCl7ZnVuY3Rpb24gYShhKXtiJiZiLnN0YXRlXz09PWZiJiYhZCYmYi5jaGVja18oYSl9dmFyIGIsYyxkPSExLGU9ITA7cmV0dXJue29wZW46ZnVuY3Rpb24oYyl7aWYoYil0aHJvdyBFcnJvcigiT2JzZXJ2ZWRPYmplY3QgaW4gdXNlIik7ZXx8T2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGI9YyxlPSExfSxvYnNlcnZlOmZ1bmN0aW9uKGIsZCl7Yz1iLGQ/QXJyYXkub2JzZXJ2ZShjLGEpOk9iamVjdC5vYnNlcnZlKGMsYSl9LGRlbGl2ZXI6ZnVuY3Rpb24oYil7ZD1iLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxkPSExfSxjbG9zZTpmdW5jdGlvbigpe2I9dm9pZCAwLE9iamVjdC51bm9ic2VydmUoYyxhKSxjYi5wdXNoKHRoaXMpfX19ZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQ9Y2IucG9wKCl8fHQoKTtyZXR1cm4gZC5vcGVuKGEpLGQub2JzZXJ2ZShiLGMpLGR9ZnVuY3Rpb24gdigpe2Z1bmN0aW9uIGEoYixmKXtiJiYoYj09PWQmJihlW2ZdPSEwKSxoLmluZGV4T2YoYik8MCYmKGgucHVzaChiKSxPYmplY3Qub2JzZXJ2ZShiLGMpKSxhKE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSxmKSl9ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtpZihjLm9iamVjdCE9PWR8fGVbYy5uYW1lXXx8InNldFByb3RvdHlwZSI9PT1jLnR5cGUpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gYyhjKXtpZighYihjKSl7Zm9yKHZhciBkLGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PWZiJiZkLml0ZXJhdGVPYmplY3RzXyhhKTtmb3IodmFyIGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PWZiJiZkLmNoZWNrXygpfX12YXIgZCxlLGY9MCxnPVtdLGg9W10saT17b2JqZWN0OnZvaWQgMCxvYmplY3RzOmgsb3BlbjpmdW5jdGlvbihiLGMpe2R8fChkPWMsZT17fSksZy5wdXNoKGIpLGYrKyxiLml0ZXJhdGVPYmplY3RzXyhhKX0sY2xvc2U6ZnVuY3Rpb24oKXtpZihmLS0sIShmPjApKXtmb3IodmFyIGE9MDthPGgubGVuZ3RoO2ErKylPYmplY3QudW5vYnNlcnZlKGhbYV0sYykseC51bm9ic2VydmVkQ291bnQrKztnLmxlbmd0aD0wLGgubGVuZ3RoPTAsZD12b2lkIDAsZT12b2lkIDAsZGIucHVzaCh0aGlzKX19fTtyZXR1cm4gaX1mdW5jdGlvbiB3KGEsYil7cmV0dXJuICQmJiQub2JqZWN0PT09Ynx8KCQ9ZGIucG9wKCl8fHYoKSwkLm9iamVjdD1iKSwkLm9wZW4oYSxiKSwkfWZ1bmN0aW9uIHgoKXt0aGlzLnN0YXRlXz1lYix0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuaWRfPWliKyt9ZnVuY3Rpb24geShhKXt4Ll9hbGxPYnNlcnZlcnNDb3VudCsrLGtiJiZqYi5wdXNoKGEpfWZ1bmN0aW9uIHooKXt4Ll9hbGxPYnNlcnZlcnNDb3VudC0tfWZ1bmN0aW9uIEEoYSl7eC5jYWxsKHRoaXMpLHRoaXMudmFsdWVfPWEsdGhpcy5vbGRPYmplY3RfPXZvaWQgMH1mdW5jdGlvbiBCKGEpe2lmKCFBcnJheS5pc0FycmF5KGEpKXRocm93IEVycm9yKCJQcm92aWRlZCBvYmplY3QgaXMgbm90IGFuIEFycmF5Iik7QS5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gQyhhLGIpe3guY2FsbCh0aGlzKSx0aGlzLm9iamVjdF89YSx0aGlzLnBhdGhfPW0oYiksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwfWZ1bmN0aW9uIEQoYSl7eC5jYWxsKHRoaXMpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl89YSx0aGlzLnZhbHVlXz1bXSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy5vYnNlcnZlZF89W119ZnVuY3Rpb24gRShhKXtyZXR1cm4gYX1mdW5jdGlvbiBGKGEsYixjLGQpe3RoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLm9ic2VydmFibGVfPWEsdGhpcy5nZXRWYWx1ZUZuXz1ifHxFLHRoaXMuc2V0VmFsdWVGbl89Y3x8RSx0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF89ZH1mdW5jdGlvbiBHKGEsYixjKXtmb3IodmFyIGQ9e30sZT17fSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07bmJbZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZSIhPWcudHlwZSYmKCJhZGQiIT1nLnR5cGU/Zy5uYW1lIGluIGQ/KGRlbGV0ZSBkW2cubmFtZV0sZGVsZXRlIGNbZy5uYW1lXSk6ZVtnLm5hbWVdPSEwOmcubmFtZSBpbiBlP2RlbGV0ZSBlW2cubmFtZV06ZFtnLm5hbWVdPSEwKSk6KGNvbnNvbGUuZXJyb3IoIlVua25vd24gY2hhbmdlUmVjb3JkIHR5cGU6ICIrZy50eXBlKSxjb25zb2xlLmVycm9yKGcpKX1mb3IodmFyIGggaW4gZClkW2hdPWFbaF07Zm9yKHZhciBoIGluIGUpZVtoXT12b2lkIDA7dmFyIGk9e307Zm9yKHZhciBoIGluIGMpaWYoIShoIGluIGR8fGggaW4gZSkpe3ZhciBqPWFbaF07Y1toXSE9PWomJihpW2hdPWopfXJldHVybnthZGRlZDpkLHJlbW92ZWQ6ZSxjaGFuZ2VkOml9fWZ1bmN0aW9uIEgoYSxiLGMpe3JldHVybntpbmRleDphLHJlbW92ZWQ6YixhZGRlZENvdW50OmN9fWZ1bmN0aW9uIEkoKXt9ZnVuY3Rpb24gSihhLGIsYyxkLGUsZil7cmV0dXJuIHNiLmNhbGNTcGxpY2VzKGEsYixjLGQsZSxmKX1mdW5jdGlvbiBLKGEsYixjLGQpe3JldHVybiBjPmJ8fGE+ZD8tMTpiPT1jfHxkPT1hPzA6Yz5hP2Q+Yj9iLWM6ZC1jOmI+ZD9kLWE6Yi1hfWZ1bmN0aW9uIEwoYSxiLGMsZCl7Zm9yKHZhciBlPUgoYixjLGQpLGY9ITEsZz0wLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGk9YVtoXTtpZihpLmluZGV4Kz1nLCFmKXt2YXIgaj1LKGUuaW5kZXgsZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoLGkuaW5kZXgsaS5pbmRleCtpLmFkZGVkQ291bnQpO2lmKGo+PTApe2Euc3BsaWNlKGgsMSksaC0tLGctPWkuYWRkZWRDb3VudC1pLnJlbW92ZWQubGVuZ3RoLGUuYWRkZWRDb3VudCs9aS5hZGRlZENvdW50LWo7dmFyIGs9ZS5yZW1vdmVkLmxlbmd0aCtpLnJlbW92ZWQubGVuZ3RoLWo7aWYoZS5hZGRlZENvdW50fHxrKXt2YXIgYz1pLnJlbW92ZWQ7aWYoZS5pbmRleDxpLmluZGV4KXt2YXIgbD1lLnJlbW92ZWQuc2xpY2UoMCxpLmluZGV4LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGwsYyksYz1sfWlmKGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aD5pLmluZGV4K2kuYWRkZWRDb3VudCl7dmFyIG09ZS5yZW1vdmVkLnNsaWNlKGkuaW5kZXgraS5hZGRlZENvdW50LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsbSl9ZS5yZW1vdmVkPWMsaS5pbmRleDxlLmluZGV4JiYoZS5pbmRleD1pLmluZGV4KX1lbHNlIGY9ITB9ZWxzZSBpZihlLmluZGV4PGkuaW5kZXgpe2Y9ITAsYS5zcGxpY2UoaCwwLGUpLGgrKzt2YXIgbj1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aDtpLmluZGV4Kz1uLGcrPW59fX1mfHxhLnB1c2goZSl9ZnVuY3Rpb24gTShhLGIpe2Zvcih2YXIgYz1bXSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07c3dpdGNoKGcudHlwZSl7Y2FzZSJzcGxpY2UiOkwoYyxnLmluZGV4LGcucmVtb3ZlZC5zbGljZSgpLGcuYWRkZWRDb3VudCk7YnJlYWs7Y2FzZSJhZGQiOmNhc2UidXBkYXRlIjpjYXNlImRlbGV0ZSI6aWYoIWQoZy5uYW1lKSljb250aW51ZTt2YXIgaD1lKGcubmFtZSk7aWYoMD5oKWNvbnRpbnVlO0woYyxoLFtnLm9sZFZhbHVlXSwxKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoIlVuZXhwZWN0ZWQgcmVjb3JkIHR5cGU6ICIrSlNPTi5zdHJpbmdpZnkoZykpfX1yZXR1cm4gY31mdW5jdGlvbiBOKGEsYil7dmFyIGM9W107cmV0dXJuIE0oYSxiKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3JldHVybiAxPT1iLmFkZGVkQ291bnQmJjE9PWIucmVtb3ZlZC5sZW5ndGg/dm9pZChiLnJlbW92ZWRbMF0hPT1hW2IuaW5kZXhdJiZjLnB1c2goYikpOnZvaWQoYz1jLmNvbmNhdChKKGEsYi5pbmRleCxiLmluZGV4K2IuYWRkZWRDb3VudCxiLnJlbW92ZWQsMCxiLnJlbW92ZWQubGVuZ3RoKSkpfSksY312YXIgTz1hLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50LFA9YigpLFE9YygpLFI9YS5OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGIpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYiYmYS5pc05hTihiKX0sUz0iX19wcm90b19fImlue30/ZnVuY3Rpb24oYSl7cmV0dXJuIGF9OmZ1bmN0aW9uKGEpe3ZhciBiPWEuX19wcm90b19fO2lmKCFiKXJldHVybiBhO3ZhciBjPU9iamVjdC5jcmVhdGUoYik7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpLmZvckVhY2goZnVuY3Rpb24oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYikpfSksY30sVD0iWyRfYS16QS1aXSIsVT0iWyRfYS16QS1aMC05XSIsVj1uZXcgUmVnRXhwKCJeIitUKyIrIitVKyIqJCIpLFc9e2JlZm9yZVBhdGg6e3dzOlsiYmVmb3JlUGF0aCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdLCJbIjpbImJlZm9yZUVsZW1lbnQiXSxlb2Y6WyJhZnRlclBhdGgiXX0saW5QYXRoOnt3czpbImluUGF0aCJdLCIuIjpbImJlZm9yZUlkZW50Il0sIlsiOlsiYmVmb3JlRWxlbWVudCJdLGVvZjpbImFmdGVyUGF0aCJdfSxiZWZvcmVJZGVudDp7d3M6WyJiZWZvcmVJZGVudCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdfSxpbklkZW50OntpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXSwwOlsiaW5JZGVudCIsImFwcGVuZCJdLG51bWJlcjpbImluSWRlbnQiLCJhcHBlbmQiXSx3czpbImluUGF0aCIsInB1c2giXSwiLiI6WyJiZWZvcmVJZGVudCIsInB1c2giXSwiWyI6WyJiZWZvcmVFbGVtZW50IiwicHVzaCJdLGVvZjpbImFmdGVyUGF0aCIsInB1c2giXX0sYmVmb3JlRWxlbWVudDp7d3M6WyJiZWZvcmVFbGVtZW50Il0sMDpbImFmdGVyWmVybyIsImFwcGVuZCJdLG51bWJlcjpbImluSW5kZXgiLCJhcHBlbmQiXSwiJyI6WyJpblNpbmdsZVF1b3RlIiwiYXBwZW5kIiwiIl0sJyInOlsiaW5Eb3VibGVRdW90ZSIsImFwcGVuZCIsIiJdfSxhZnRlclplcm86e3dzOlsiYWZ0ZXJFbGVtZW50IiwicHVzaCJdLCJdIjpbImluUGF0aCIsInB1c2giXX0saW5JbmRleDp7MDpbImluSW5kZXgiLCJhcHBlbmQiXSxudW1iZXI6WyJpbkluZGV4IiwiYXBwZW5kIl0sd3M6WyJhZnRlckVsZW1lbnQiXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19LGluU2luZ2xlUXVvdGU6eyInIjpbImFmdGVyRWxlbWVudCJdLGVvZjpbImVycm9yIl0sImVsc2UiOlsiaW5TaW5nbGVRdW90ZSIsImFwcGVuZCJdfSxpbkRvdWJsZVF1b3RlOnsnIic6WyJhZnRlckVsZW1lbnQiXSxlb2Y6WyJlcnJvciJdLCJlbHNlIjpbImluRG91YmxlUXVvdGUiLCJhcHBlbmQiXX0sYWZ0ZXJFbGVtZW50Ont3czpbImFmdGVyRWxlbWVudCJdLCJdIjpbImluUGF0aCIsInB1c2giXX19LFg9e30sWT17fTtsLmdldD1tLGwucHJvdG90eXBlPVMoe19fcHJvdG9fXzpbXSx2YWxpZDohMCx0b1N0cmluZzpmdW5jdGlvbigpe2Zvcih2YXIgYT0iIixiPTA7Yjx0aGlzLmxlbmd0aDtiKyspe3ZhciBjPXRoaXNbYl07YSs9ayhjKT9iPyIuIitjOmM6bihjKX1yZXR1cm4gYX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZihudWxsPT1hKXJldHVybjthPWFbdGhpc1tiXV19cmV0dXJuIGF9LGl0ZXJhdGVPYmplY3RzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKGMmJihhPWFbdGhpc1tjLTFdXSksIWYoYSkpcmV0dXJuO2IoYSx0aGlzWzBdKX19LGNvbXBpbGVkR2V0VmFsdWVGcm9tRm46ZnVuY3Rpb24oKXt2YXIgYT0iIixiPSJvYmoiO2ErPSJpZiAob2JqICE9IG51bGwiO2Zvcih2YXIgYyxkPTA7ZDx0aGlzLmxlbmd0aC0xO2QrKyljPXRoaXNbZF0sYis9ayhjKT8iLiIrYzpuKGMpLGErPSIgJiZcbiAgICAgIitiKyIgIT0gbnVsbCI7YSs9IilcbiI7dmFyIGM9dGhpc1tkXTtyZXR1cm4gYis9ayhjKT8iLiIrYzpuKGMpLGErPSIgIHJldHVybiAiK2IrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixhKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKCFmKGEpKXJldHVybiExO2E9YVt0aGlzW2NdXX1yZXR1cm4gZihhKT8oYVt0aGlzW2NdXT1iLCEwKTohMX19KTt2YXIgWj1uZXcgbCgiIixYKTtaLnZhbGlkPSExLFouZ2V0VmFsdWVGcm9tPVouc2V0VmFsdWVGcm9tPWZ1bmN0aW9uKCl7fTt2YXIgJCxfPTFlMyxhYj1bXSxiYj1QP2Z1bmN0aW9uKCl7dmFyIGE9e3BpbmdQb25nOiEwfSxiPSExO3JldHVybiBPYmplY3Qub2JzZXJ2ZShhLGZ1bmN0aW9uKCl7cygpLGI9ITF9KSxmdW5jdGlvbihjKXthYi5wdXNoKGMpLGJ8fChiPSEwLGEucGluZ1Bvbmc9IWEucGluZ1BvbmcpfX0oKTpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXthYi5wdXNoKGEpfX0oKSxjYj1bXSxkYj1bXSxlYj0wLGZiPTEsZ2I9MixoYj0zLGliPTE7eC5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnN0YXRlXyE9ZWIpdGhyb3cgRXJyb3IoIk9ic2VydmVyIGhhcyBhbHJlYWR5IGJlZW4gb3BlbmVkLiIpO3JldHVybiB5KHRoaXMpLHRoaXMuY2FsbGJhY2tfPWEsdGhpcy50YXJnZXRfPWIsdGhpcy5jb25uZWN0XygpLHRoaXMuc3RhdGVfPWZiLHRoaXMudmFsdWVffSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1mYiYmKHoodGhpcyksdGhpcy5kaXNjb25uZWN0XygpLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLnN0YXRlXz1nYil9LGRlbGl2ZXI6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09ZmImJm8odGhpcyl9LHJlcG9ydF86ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuY2FsbGJhY2tfLmFwcGx5KHRoaXMudGFyZ2V0XyxhKX1jYXRjaChiKXt4Ll9lcnJvclRocm93bkR1cmluZ0NhbGxiYWNrPSEwLGNvbnNvbGUuZXJyb3IoIkV4Y2VwdGlvbiBjYXVnaHQgZHVyaW5nIG9ic2VydmVyIGNhbGxiYWNrOiAiKyhiLnN0YWNrfHxiKSl9fSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrXyh2b2lkIDAsITApLHRoaXMudmFsdWVffX07dmFyIGpiLGtiPSFQO3guX2FsbE9ic2VydmVyc0NvdW50PTAsa2ImJihqYj1bXSk7dmFyIGxiPSExO2EuUGxhdGZvcm09YS5QbGF0Zm9ybXx8e30sYS5QbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludD1mdW5jdGlvbigpe2lmKCFsYiYma2Ipe2xiPSEwO3ZhciBiLGMsZD0wO2Rve2QrKyxjPWpiLGpiPVtdLGI9ITE7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWNbZV07Zi5zdGF0ZV89PWZiJiYoZi5jaGVja18oKSYmKGI9ITApLGpiLnB1c2goZikpfXMoKSYmKGI9ITApfXdoaWxlKF8+ZCYmYik7TyYmKGEuZGlydHlDaGVja0N5Y2xlQ291bnQ9ZCksbGI9ITF9fSxrYiYmKGEuUGxhdGZvcm0uY2xlYXJPYnNlcnZlcnM9ZnVuY3Rpb24oKXtqYj1bXX0pLEEucHJvdG90eXBlPVMoe19fcHJvdG9fXzp4LnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITEsY29ubmVjdF86ZnVuY3Rpb24oKXtQP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfPXUodGhpcyx0aGlzLnZhbHVlXyx0aGlzLmFycmF5T2JzZXJ2ZSk6dGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXyl9LGNvcHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkuaXNBcnJheShhKT9bXTp7fTtmb3IodmFyIGMgaW4gYSliW2NdPWFbY107cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJihiLmxlbmd0aD1hLmxlbmd0aCksYn0sY2hlY2tfOmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoUCl7aWYoIWEpcmV0dXJuITE7Yz17fSxiPUcodGhpcy52YWx1ZV8sYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3RfLGI9cih0aGlzLnZhbHVlXyx0aGlzLm9sZE9iamVjdF8pO3JldHVybiBxKGIpPyExOihQfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYi5hZGRlZHx8e30sYi5yZW1vdmVkfHx7fSxiLmNoYW5nZWR8fHt9LGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfV0pLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXtQPyh0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSgpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCk6dGhpcy5vbGRPYmplY3RfPXZvaWQgMH0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1mYiYmKFA/dGhpcy5kaXJlY3RPYnNlcnZlcl8uZGVsaXZlcighMSk6byh0aGlzKSl9LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyZWN0T2JzZXJ2ZXJfP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITApOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pLHRoaXMudmFsdWVffX0pLEIucHJvdG90eXBlPVMoe19fcHJvdG9fXzpBLnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITAsY29weU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZSgpfSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGI7aWYoUCl7aWYoIWEpcmV0dXJuITE7Yj1OKHRoaXMudmFsdWVfLGEpfWVsc2UgYj1KKHRoaXMudmFsdWVfLDAsdGhpcy52YWx1ZV8ubGVuZ3RoLHRoaXMub2xkT2JqZWN0XywwLHRoaXMub2xkT2JqZWN0Xy5sZW5ndGgpO3JldHVybiBiJiZiLmxlbmd0aD8oUHx8KHRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pKSx0aGlzLnJlcG9ydF8oW2JdKSwhMCk6ITF9fSksQi5hcHBseVNwbGljZXM9ZnVuY3Rpb24oYSxiLGMpe2MuZm9yRWFjaChmdW5jdGlvbihjKXtmb3IodmFyIGQ9W2MuaW5kZXgsYy5yZW1vdmVkLmxlbmd0aF0sZT1jLmluZGV4O2U8Yy5pbmRleCtjLmFkZGVkQ291bnQ7KWQucHVzaChiW2VdKSxlKys7QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhLGQpfSl9LEMucHJvdG90eXBlPVMoe19fcHJvdG9fXzp4LnByb3RvdHlwZSxnZXQgcGF0aCgpe3JldHVybiB0aGlzLnBhdGhffSxjb25uZWN0XzpmdW5jdGlvbigpe1AmJih0aGlzLmRpcmVjdE9ic2VydmVyXz13KHRoaXMsdGhpcy5vYmplY3RfKSksdGhpcy5jaGVja18odm9pZCAwLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXt0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXy5pdGVyYXRlT2JqZWN0cyh0aGlzLm9iamVjdF8sYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMudmFsdWVfO3JldHVybiB0aGlzLnZhbHVlXz10aGlzLnBhdGhfLmdldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8pLGJ8fGcodGhpcy52YWx1ZV8sYyk/ITE6KHRoaXMucmVwb3J0XyhbdGhpcy52YWx1ZV8sYyx0aGlzXSksITApfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt0aGlzLnBhdGhfJiZ0aGlzLnBhdGhfLnNldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8sYSl9fSk7dmFyIG1iPXt9O0QucHJvdG90eXBlPVMoe19fcHJvdG9fXzp4LnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe2lmKFApe2Zvcih2YXIgYSxiPSExLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWlmKGE9dGhpcy5vYnNlcnZlZF9bY10sYSE9PW1iKXtiPSEwO2JyZWFrfWImJih0aGlzLmRpcmVjdE9ic2VydmVyXz13KHRoaXMsYSkpfXRoaXMuY2hlY2tfKHZvaWQgMCwhdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLm9ic2VydmVkXy5sZW5ndGg7YSs9Mil0aGlzLm9ic2VydmVkX1thXT09PW1iJiZ0aGlzLm9ic2VydmVkX1thKzFdLmNsb3NlKCk7dGhpcy5vYnNlcnZlZF8ubGVuZ3RoPTAsdGhpcy52YWx1ZV8ubGVuZ3RoPTAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxhZGRQYXRoOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPWViJiZ0aGlzLnN0YXRlXyE9aGIpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgcGF0aHMgb25jZSBzdGFydGVkLiIpO3ZhciBiPW0oYik7aWYodGhpcy5vYnNlcnZlZF8ucHVzaChhLGIpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl8pe3ZhciBjPXRoaXMub2JzZXJ2ZWRfLmxlbmd0aC8yLTE7dGhpcy52YWx1ZV9bY109Yi5nZXRWYWx1ZUZyb20oYSl9fSxhZGRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXRlXyE9ZWImJnRoaXMuc3RhdGVfIT1oYil0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBvYnNlcnZlcnMgb25jZSBzdGFydGVkLiIpO2lmKHRoaXMub2JzZXJ2ZWRfLnB1c2gobWIsYSksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl7dmFyIGI9dGhpcy5vYnNlcnZlZF8ubGVuZ3RoLzItMTt0aGlzLnZhbHVlX1tiXT1hLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpfX0sc3RhcnRSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1mYil0aHJvdyBFcnJvcigiQ2FuIG9ubHkgcmVzZXQgd2hpbGUgb3BlbiIpO3RoaXMuc3RhdGVfPWhiLHRoaXMuZGlzY29ubmVjdF8oKX0sZmluaXNoUmVzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLnN0YXRlXyE9aGIpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IGZpbmlzaFJlc2V0IGFmdGVyIHN0YXJ0UmVzZXQiKTtyZXR1cm4gdGhpcy5zdGF0ZV89ZmIsdGhpcy5jb25uZWN0XygpLHRoaXMudmFsdWVffSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWI9dGhpcy5vYnNlcnZlZF9bY10sYiE9PW1iJiZ0aGlzLm9ic2VydmVkX1tjKzFdLml0ZXJhdGVPYmplY3RzKGIsYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTA7ZDx0aGlzLm9ic2VydmVkXy5sZW5ndGg7ZCs9Mil7dmFyIGUsZj10aGlzLm9ic2VydmVkX1tkXSxoPXRoaXMub2JzZXJ2ZWRfW2QrMV07aWYoZj09PW1iKXt2YXIgaT1oO2U9dGhpcy5zdGF0ZV89PT1lYj9pLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpOmkuZGlzY2FyZENoYW5nZXMoKX1lbHNlIGU9aC5nZXRWYWx1ZUZyb20oZik7Yj90aGlzLnZhbHVlX1tkLzJdPWU6ZyhlLHRoaXMudmFsdWVfW2QvMl0pfHwoYz1jfHxbXSxjW2QvMl09dGhpcy52YWx1ZV9bZC8yXSx0aGlzLnZhbHVlX1tkLzJdPWUpfXJldHVybiBjPyh0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpcy5vYnNlcnZlZF9dKSwhMCk6ITF9fSksRi5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLnZhbHVlXz10aGlzLmdldFZhbHVlRm5fKHRoaXMub2JzZXJ2YWJsZV8ub3Blbih0aGlzLm9ic2VydmVkQ2FsbGJhY2tfLHRoaXMpKSx0aGlzLnZhbHVlX30sb2JzZXJ2ZWRDYWxsYmFja186ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmdldFZhbHVlRm5fKGEpLCFnKGEsdGhpcy52YWx1ZV8pKXt2YXIgYj10aGlzLnZhbHVlXzt0aGlzLnZhbHVlXz1hLHRoaXMuY2FsbGJhY2tfLmNhbGwodGhpcy50YXJnZXRfLHRoaXMudmFsdWVfLGIpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMudmFsdWVffSxkZWxpdmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JzZXJ2YWJsZV8uZGVsaXZlcigpfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLnNldFZhbHVlRm5fKGEpLCF0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF8mJnRoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWU/dGhpcy5vYnNlcnZhYmxlXy5zZXRWYWx1ZShhKTp2b2lkIDB9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZhYmxlXyYmdGhpcy5vYnNlcnZhYmxlXy5jbG9zZSgpLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmdldFZhbHVlRm5fPXZvaWQgMCx0aGlzLnNldFZhbHVlRm5fPXZvaWQgMH19O3ZhciBuYj17YWRkOiEwLHVwZGF0ZTohMCwiZGVsZXRlIjohMH0sb2I9MCxwYj0xLHFiPTIscmI9MztJLnByb3RvdHlwZT17Y2FsY0VkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mLWUrMSxoPWMtYisxLGk9bmV3IEFycmF5KGcpLGo9MDtnPmo7aisrKWlbal09bmV3IEFycmF5KGgpLGlbal1bMF09ajtmb3IodmFyIGs9MDtoPms7aysrKWlbMF1ba109aztmb3IodmFyIGo9MTtnPmo7aisrKWZvcih2YXIgaz0xO2g+aztrKyspaWYodGhpcy5lcXVhbHMoYVtiK2stMV0sZFtlK2otMV0pKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX0sc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaChvYik6KGUucHVzaChwYiksZD1nKSxiLS0sYy0tKTpmPT1oPyhlLnB1c2gocmIpLGItLSxkPWgpOihlLnB1c2gocWIpLGMtLSxkPWkpfWVsc2UgZS5wdXNoKHJiKSxiLS07ZWxzZSBlLnB1c2gocWIpLGMtLTtyZXR1cm4gZS5yZXZlcnNlKCksZX0sY2FsY1NwbGljZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPTAsaD0wLGk9TWF0aC5taW4oYy1iLGYtZSk7aWYoMD09YiYmMD09ZSYmKGc9dGhpcy5zaGFyZWRQcmVmaXgoYSxkLGkpKSxjPT1hLmxlbmd0aCYmZj09ZC5sZW5ndGgmJihoPXRoaXMuc2hhcmVkU3VmZml4KGEsZCxpLWcpKSxiKz1nLGUrPWcsYy09aCxmLT1oLGMtYj09MCYmZi1lPT0wKXJldHVybltdO2lmKGI9PWMpe2Zvcih2YXIgaj1IKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltIKGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIG9iOmomJihsLnB1c2goaiksaj12b2lkIDApLG0rKyxuKys7YnJlYWs7Y2FzZSBwYjpqfHwoaj1IKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSBxYjpqfHwoaj1IKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIHJiOmp8fChqPUgobSxbXSwwKSksai5yZW1vdmVkLnB1c2goZFtuXSksbisrfXJldHVybiBqJiZsLnB1c2goaiksbH0sc2hhcmVkUHJlZml4OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MDtjPmQ7ZCsrKWlmKCF0aGlzLmVxdWFscyhhW2RdLGJbZF0pKXJldHVybiBkO3JldHVybiBjfSxzaGFyZWRTdWZmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPWIubGVuZ3RoLGY9MDtjPmYmJnRoaXMuZXF1YWxzKGFbLS1kXSxiWy0tZV0pOylmKys7cmV0dXJuIGZ9LGNhbGN1bGF0ZVNwbGljZXM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxjU3BsaWNlcyhhLDAsYS5sZW5ndGgsYiwwLGIubGVuZ3RoKX0sZXF1YWxzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifX07dmFyIHNiPW5ldyBJO2EuT2JzZXJ2ZXI9eCxhLk9ic2VydmVyLnJ1bkVPTV89YmIsYS5PYnNlcnZlci5vYnNlcnZlclNlbnRpbmVsXz1tYixhLk9ic2VydmVyLmhhc09iamVjdE9ic2VydmU9UCxhLkFycmF5T2JzZXJ2ZXI9QixhLkFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcz1mdW5jdGlvbihhLGIpe3JldHVybiBzYi5jYWxjdWxhdGVTcGxpY2VzKGEsYil9LGEuQXJyYXlTcGxpY2U9SSxhLk9iamVjdE9ic2VydmVyPUEsYS5QYXRoT2JzZXJ2ZXI9QyxhLkNvbXBvdW5kT2JzZXJ2ZXI9RCxhLlBhdGg9bCxhLk9ic2VydmVyVHJhbnNmb3JtPUZ9KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGU/Z2xvYmFsOnRoaXN8fHdpbmRvdyksd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsPXt9LGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBjaHJvbWUmJmNocm9tZS5hcHAmJmNocm9tZS5hcHAucnVudGltZSlyZXR1cm4hMTtpZihuYXZpZ2F0b3IuZ2V0RGV2aWNlU3RvcmFnZSlyZXR1cm4hMTt0cnl7dmFyIGE9bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdHJ1ZTsiKTtyZXR1cm4gYSgpfWNhdGNoKGIpe3JldHVybiExfX1mdW5jdGlvbiBjKGEpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQXNzZXJ0aW9uIGZhaWxlZCIpfWZ1bmN0aW9uIGQoYSxiKXtmb3IodmFyIGM9TihiKSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07TShhLGUsTyhiLGUpKX1yZXR1cm4gYX1mdW5jdGlvbiBlKGEsYil7Zm9yKHZhciBjPU4oYiksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO3N3aXRjaChlKXtjYXNlImFyZ3VtZW50cyI6Y2FzZSJjYWxsZXIiOmNhc2UibGVuZ3RoIjpjYXNlIm5hbWUiOmNhc2UicHJvdG90eXBlIjpjYXNlInRvU3RyaW5nIjpjb250aW51ZX1NKGEsZSxPKGIsZSkpfXJldHVybiBhfWZ1bmN0aW9uIGYoYSxiKXtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdaW4gYSlyZXR1cm4gYltjXX1mdW5jdGlvbiBnKGEsYixjKXtQLnZhbHVlPWMsTShhLGIsUCl9ZnVuY3Rpb24gaChhKXt2YXIgYj1hLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9SS5nZXQoYik7aWYoYylyZXR1cm4gYzt2YXIgZD1oKGIpLGU9dihkKTtyZXR1cm4gcyhiLGUsYSksZX1mdW5jdGlvbiBpKGEsYil7cShhLGIsITApfWZ1bmN0aW9uIGooYSxiKXtxKGIsYSwhMSl9ZnVuY3Rpb24gayhhKXtyZXR1cm4vXm9uW2Etel0rJC8udGVzdChhKX1mdW5jdGlvbiBsKGEpe3JldHVybi9eXHdbYS16QS1aXzAtOV0qJC8udGVzdChhKX1mdW5jdGlvbiBtKGEpe3JldHVybiBMJiZsKGEpP25ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMuX19pbXBsNGNmMWU3ODJoZ19fLiIrYSk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fX2ltcGw0Y2YxZTc4MmhnX19bYV19fWZ1bmN0aW9uIG4oYSl7cmV0dXJuIEwmJmwoYSk/bmV3IEZ1bmN0aW9uKCJ2IiwidGhpcy5fX2ltcGw0Y2YxZTc4MmhnX18uIithKyIgPSB2Iik6ZnVuY3Rpb24oYil7dGhpcy5fX2ltcGw0Y2YxZTc4MmhnX19bYV09Yn19ZnVuY3Rpb24gbyhhKXtyZXR1cm4gTCYmbChhKT9uZXcgRnVuY3Rpb24oInJldHVybiB0aGlzLl9faW1wbDRjZjFlNzgyaGdfXy4iK2ErIi5hcHBseSh0aGlzLl9faW1wbDRjZjFlNzgyaGdfXywgYXJndW1lbnRzKSIpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19pbXBsNGNmMWU3ODJoZ19fW2FdLmFwcGx5KHRoaXMuX19pbXBsNGNmMWU3ODJoZ19fLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHAoYSxiKXt0cnl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKX1jYXRjaChjKXtyZXR1cm4gUn19ZnVuY3Rpb24gcShiLGMsZCl7Zm9yKHZhciBlPU4oYiksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1lW2ZdO2lmKCJwb2x5bWVyQmxhY2tMaXN0XyIhPT1nJiYhKGcgaW4gY3x8Yi5wb2x5bWVyQmxhY2tMaXN0XyYmYi5wb2x5bWVyQmxhY2tMaXN0X1tnXSkpe1EmJmIuX19sb29rdXBHZXR0ZXJfXyhnKTt2YXIgaCxpLGo9cChiLGcpO2lmKGQmJiJmdW5jdGlvbiI9PXR5cGVvZiBqLnZhbHVlKWNbZ109byhnKTtlbHNle3ZhciBsPWsoZyk7aD1sP2EuZ2V0RXZlbnRIYW5kbGVyR2V0dGVyKGcpOm0oZyksKGoud3JpdGFibGV8fGouc2V0fHxTKSYmKGk9bD9hLmdldEV2ZW50SGFuZGxlclNldHRlcihnKTpuKGcpKSxNKGMsZyx7Z2V0Omgsc2V0OmksY29uZmlndXJhYmxlOmouY29uZmlndXJhYmxlLGVudW1lcmFibGU6ai5lbnVtZXJhYmxlfSl9fX19ZnVuY3Rpb24gcihhLGIsYyl7dmFyIGQ9YS5wcm90b3R5cGU7cyhkLGIsYyksZShiLGEpfWZ1bmN0aW9uIHMoYSxiLGQpe3ZhciBlPWIucHJvdG90eXBlO2Modm9pZCAwPT09SS5nZXQoYSkpLEkuc2V0KGEsYiksSi5zZXQoZSxhKSxpKGEsZSksZCYmaihlLGQpLGcoZSwiY29uc3RydWN0b3IiLGIpLGIucHJvdG90eXBlPWV9ZnVuY3Rpb24gdChhLGIpe3JldHVybiBJLmdldChiLnByb3RvdHlwZSk9PT1hfWZ1bmN0aW9uIHUoYSl7dmFyIGI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9aChiKSxkPXYoYyk7cmV0dXJuIHMoYixkLGEpLGR9ZnVuY3Rpb24gdihhKXtmdW5jdGlvbiBiKGIpe2EuY2FsbCh0aGlzLGIpfXZhciBjPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpO3JldHVybiBjLmNvbnN0cnVjdG9yPWIsYi5wcm90b3R5cGU9YyxifWZ1bmN0aW9uIHcoYSl7cmV0dXJuIGEmJmEuX19pbXBsNGNmMWU3ODJoZ19ffWZ1bmN0aW9uIHgoYSl7cmV0dXJuIXcoYSl9ZnVuY3Rpb24geShhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYyh4KGEpKSxhLl9fd3JhcHBlcjhlM2RkOTNhNjBfX3x8KGEuX193cmFwcGVyOGUzZGQ5M2E2MF9fPW5ldyhoKGEpKShhKSkpfWZ1bmN0aW9uIHooYSl7cmV0dXJuIG51bGw9PT1hP251bGw6KGModyhhKSksYS5fX2ltcGw0Y2YxZTc4MmhnX18pfWZ1bmN0aW9uIEEoYSl7cmV0dXJuIGEuX19pbXBsNGNmMWU3ODJoZ19ffWZ1bmN0aW9uIEIoYSxiKXtiLl9faW1wbDRjZjFlNzgyaGdfXz1hLGEuX193cmFwcGVyOGUzZGQ5M2E2MF9fPWJ9ZnVuY3Rpb24gQyhhKXtyZXR1cm4gYSYmdyhhKT96KGEpOmF9ZnVuY3Rpb24gRChhKXtyZXR1cm4gYSYmIXcoYSk/eShhKTphfWZ1bmN0aW9uIEUoYSxiKXtudWxsIT09YiYmKGMoeChhKSksYyh2b2lkIDA9PT1ifHx3KGIpKSxhLl9fd3JhcHBlcjhlM2RkOTNhNjBfXz1iKX1mdW5jdGlvbiBGKGEsYixjKXtULmdldD1jLE0oYS5wcm90b3R5cGUsYixUKX1mdW5jdGlvbiBHKGEsYil7RihhLGIsZnVuY3Rpb24oKXtyZXR1cm4geSh0aGlzLl9faW1wbDRjZjFlNzgyaGdfX1tiXSl9KX1mdW5jdGlvbiBIKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IuZm9yRWFjaChmdW5jdGlvbihiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3ZhciBhPUQodGhpcyk7cmV0dXJuIGFbYl0uYXBwbHkoYSxhcmd1bWVudHMpfX0pfSl9dmFyIEk9bmV3IFdlYWtNYXAsSj1uZXcgV2Vha01hcCxLPU9iamVjdC5jcmVhdGUobnVsbCksTD1iKCksTT1PYmplY3QuZGVmaW5lUHJvcGVydHksTj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxPPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsUD17dmFsdWU6dm9pZCAwLGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwfTtOKHdpbmRvdyk7dmFyIFE9L0ZpcmVmb3gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksUj17Z2V0OmZ1bmN0aW9uKCl7fSxzZXQ6ZnVuY3Rpb24oKXt9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSxTPWZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihOb2RlLnByb3RvdHlwZSwibm9kZVR5cGUiKTtyZXR1cm4hIWEmJiJzZXQiaW4gYX0oKSxUPXtnZXQ6dm9pZCAwLGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfTthLmFzc2VydD1jLGEuY29uc3RydWN0b3JUYWJsZT1JLGEuZGVmaW5lR2V0dGVyPUYsYS5kZWZpbmVXcmFwR2V0dGVyPUcsYS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcj1ILGEuaXNXcmFwcGVyPXcsYS5pc1dyYXBwZXJGb3I9dCxhLm1peGluPWQsYS5uYXRpdmVQcm90b3R5cGVUYWJsZT1KLGEub25lT2Y9ZixhLnJlZ2lzdGVyT2JqZWN0PXUsYS5yZWdpc3RlcldyYXBwZXI9cixhLnJld3JhcD1FLGEuc2V0V3JhcHBlcj1CLGEudW5zYWZlVW53cmFwPUEsYS51bndyYXA9eixhLnVud3JhcElmTmVlZGVkPUMsYS53cmFwPXksYS53cmFwSWZOZWVkZWQ9RCxhLndyYXBwZXJzPUt9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtnPSExO3ZhciBhPWYuc2xpY2UoMCk7Zj1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdKCl9ZnVuY3Rpb24gYyhhKXtmLnB1c2goYSksZ3x8KGc9ITAsZChiLDApKX12YXIgZCxlPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyLGY9W10sZz0hMTtpZihlKXt2YXIgaD0xLGk9bmV3IGUoYiksaj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShoKTtpLm9ic2VydmUoaix7Y2hhcmFjdGVyRGF0YTohMH0pLGQ9ZnVuY3Rpb24oKXtoPShoKzEpJTIsai5kYXRhPWh9fWVsc2UgZD13aW5kb3cuc2V0SW1tZWRpYXRlfHx3aW5kb3cuc2V0VGltZW91dDthLnNldEVuZE9mTWljcm90YXNrPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7YS5zY2hlZHVsZWRffHwoYS5zY2hlZHVsZWRfPSEwLG8ucHVzaChhKSxwfHwoayhjKSxwPSEwKSl9ZnVuY3Rpb24gYygpe2ZvcihwPSExO28ubGVuZ3RoOyl7dmFyIGE9bztvPVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07Yy5zY2hlZHVsZWRfPSExO3ZhciBkPWMudGFrZVJlY29yZHMoKTtmKGMpLGQubGVuZ3RoJiZjLmNhbGxiYWNrXyhkLGMpfX19ZnVuY3Rpb24gZChhLGIpe3RoaXMudHlwZT1hLHRoaXMudGFyZ2V0PWIsdGhpcy5hZGRlZE5vZGVzPW5ldyBtLk5vZGVMaXN0LHRoaXMucmVtb3ZlZE5vZGVzPW5ldyBtLk5vZGVMaXN0LHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGUoYSxiKXtmb3IoO2E7YT1hLnBhcmVudE5vZGUpe3ZhciBjPW4uZ2V0KGEpO2lmKGMpZm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07ZS5vcHRpb25zLnN1YnRyZWUmJmUuYWRkVHJhbnNpZW50T2JzZXJ2ZXIoYil9fX1mdW5jdGlvbiBmKGEpe2Zvcih2YXIgYj0wO2I8YS5ub2Rlc18ubGVuZ3RoO2IrKyl7dmFyIGM9YS5ub2Rlc19bYl0sZD1uLmdldChjKTtpZighZClyZXR1cm47Zm9yKHZhciBlPTA7ZTxkLmxlbmd0aDtlKyspe3ZhciBmPWRbZV07Zi5vYnNlcnZlcj09PWEmJmYucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9fX1mdW5jdGlvbiBnKGEsYyxlKXtmb3IodmFyIGY9T2JqZWN0LmNyZWF0ZShudWxsKSxnPU9iamVjdC5jcmVhdGUobnVsbCksaD1hO2g7aD1oLnBhcmVudE5vZGUpe3ZhciBpPW4uZ2V0KGgpO2lmKGkpZm9yKHZhciBqPTA7ajxpLmxlbmd0aDtqKyspe3ZhciBrPWlbal0sbD1rLm9wdGlvbnM7aWYoKGg9PT1hfHxsLnN1YnRyZWUpJiYhKCJhdHRyaWJ1dGVzIj09PWMmJiFsLmF0dHJpYnV0ZXN8fCJhdHRyaWJ1dGVzIj09PWMmJmwuYXR0cmlidXRlRmlsdGVyJiYobnVsbCE9PWUubmFtZXNwYWNlfHwtMT09PWwuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoZS5uYW1lKSl8fCJjaGFyYWN0ZXJEYXRhIj09PWMmJiFsLmNoYXJhY3RlckRhdGF8fCJjaGlsZExpc3QiPT09YyYmIWwuY2hpbGRMaXN0KSl7dmFyIG09ay5vYnNlcnZlcjtmW20udWlkX109bSwoImF0dHJpYnV0ZXMiPT09YyYmbC5hdHRyaWJ1dGVPbGRWYWx1ZXx8ImNoYXJhY3RlckRhdGEiPT09YyYmbC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpJiYoZ1ttLnVpZF9dPWUub2xkVmFsdWUpfX19Zm9yKHZhciBvIGluIGYpe3ZhciBtPWZbb10scD1uZXcgZChjLGEpOyJuYW1lImluIGUmJiJuYW1lc3BhY2UiaW4gZSYmKHAuYXR0cmlidXRlTmFtZT1lLm5hbWUscC5hdHRyaWJ1dGVOYW1lc3BhY2U9ZS5uYW1lc3BhY2UpLGUuYWRkZWROb2RlcyYmKHAuYWRkZWROb2Rlcz1lLmFkZGVkTm9kZXMpLGUucmVtb3ZlZE5vZGVzJiYocC5yZW1vdmVkTm9kZXM9ZS5yZW1vdmVkTm9kZXMpLGUucHJldmlvdXNTaWJsaW5nJiYocC5wcmV2aW91c1NpYmxpbmc9ZS5wcmV2aW91c1NpYmxpbmcpLGUubmV4dFNpYmxpbmcmJihwLm5leHRTaWJsaW5nPWUubmV4dFNpYmxpbmcpLHZvaWQgMCE9PWdbb10mJihwLm9sZFZhbHVlPWdbb10pLGIobSksbS5yZWNvcmRzXy5wdXNoKHApfX1mdW5jdGlvbiBoKGEpe2lmKHRoaXMuY2hpbGRMaXN0PSEhYS5jaGlsZExpc3QsdGhpcy5zdWJ0cmVlPSEhYS5zdWJ0cmVlLHRoaXMuYXR0cmlidXRlcz0iYXR0cmlidXRlcyJpbiBhfHwhKCJhdHRyaWJ1dGVPbGRWYWx1ZSJpbiBhfHwiYXR0cmlidXRlRmlsdGVyImluIGEpPyEhYS5hdHRyaWJ1dGVzOiEwLHRoaXMuY2hhcmFjdGVyRGF0YT0iY2hhcmFjdGVyRGF0YU9sZFZhbHVlImluIGEmJiEoImNoYXJhY3RlckRhdGEiaW4gYSk/ITA6ISFhLmNoYXJhY3RlckRhdGEsIXRoaXMuYXR0cmlidXRlcyYmKGEuYXR0cmlidXRlT2xkVmFsdWV8fCJhdHRyaWJ1dGVGaWx0ZXIiaW4gYSl8fCF0aGlzLmNoYXJhY3RlckRhdGEmJmEuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKXRocm93IG5ldyBUeXBlRXJyb3I7aWYodGhpcy5jaGFyYWN0ZXJEYXRhPSEhYS5jaGFyYWN0ZXJEYXRhLHRoaXMuYXR0cmlidXRlT2xkVmFsdWU9ISFhLmF0dHJpYnV0ZU9sZFZhbHVlLHRoaXMuY2hhcmFjdGVyRGF0YU9sZFZhbHVlPSEhYS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUsImF0dHJpYnV0ZUZpbHRlciJpbiBhKXtpZihudWxsPT1hLmF0dHJpYnV0ZUZpbHRlcnx8Im9iamVjdCIhPXR5cGVvZiBhLmF0dHJpYnV0ZUZpbHRlcil0aHJvdyBuZXcgVHlwZUVycm9yO3RoaXMuYXR0cmlidXRlRmlsdGVyPXEuY2FsbChhLmF0dHJpYnV0ZUZpbHRlcil9ZWxzZSB0aGlzLmF0dHJpYnV0ZUZpbHRlcj1udWxsfWZ1bmN0aW9uIGkoYSl7dGhpcy5jYWxsYmFja189YSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3IsdGhpcy5zY2hlZHVsZWRfPSExfWZ1bmN0aW9uIGooYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgaz1hLnNldEVuZE9mTWljcm90YXNrLGw9YS53cmFwSWZOZWVkZWQsbT1hLndyYXBwZXJzLG49bmV3IFdlYWtNYXAsbz1bXSxwPSExLHE9QXJyYXkucHJvdG90eXBlLnNsaWNlLHI9MDtpLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aSxvYnNlcnZlOmZ1bmN0aW9uKGEsYil7YT1sKGEpO3ZhciBjLGQ9bmV3IGgoYiksZT1uLmdldChhKTtlfHxuLnNldChhLGU9W10pO2Zvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKWVbZl0ub2JzZXJ2ZXI9PT10aGlzJiYoYz1lW2ZdLGMucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCksYy5vcHRpb25zPWQpO2N8fChjPW5ldyBqKHRoaXMsYSxkKSxlLnB1c2goYyksdGhpcy5ub2Rlc18ucHVzaChhKSl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1uLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107aWYoZC5vYnNlcnZlcj09PXRoaXMpe2Iuc3BsaWNlKGMsMSk7YnJlYWt9fX0sdGhpcyksdGhpcy5yZWNvcmRzXz1bXX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlY29yZHNfO3JldHVybiB0aGlzLnJlY29yZHNfPVtdLGF9fSxqLnByb3RvdHlwZT17YWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXtiKHRoaXMub2JzZXJ2ZXIpLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGEpO3ZhciBjPW4uZ2V0KGEpO2N8fG4uc2V0KGEsYz1bXSksYy5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylmb3IodmFyIGM9YVtiXSxkPW4uZ2V0KGMpLGU9MDtlPGQubGVuZ3RoO2UrKylpZihkW2VdPT09dGhpcyl7ZC5zcGxpY2UoZSwxKTticmVha319fSxhLmVucXVldWVNdXRhdGlvbj1nLGEucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnM9ZSxhLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9aSxhLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXt0aGlzLnJvb3Q9YSx0aGlzLnBhcmVudD1ifWZ1bmN0aW9uIGMoYSxiKXtpZihhLnRyZWVTY29wZV8hPT1iKXthLnRyZWVTY29wZV89Yjtmb3IodmFyIGQ9YS5zaGFkb3dSb290O2Q7ZD1kLm9sZGVyU2hhZG93Um9vdClkLnRyZWVTY29wZV8ucGFyZW50PWI7Zm9yKHZhciBlPWEuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyljKGUsYil9fWZ1bmN0aW9uIGQoYyl7aWYoYyBpbnN0YW5jZW9mIGEud3JhcHBlcnMuV2luZG93LGMudHJlZVNjb3BlXylyZXR1cm4gYy50cmVlU2NvcGVfO3ZhciBlLGY9Yy5wYXJlbnROb2RlO3JldHVybiBlPWY/ZChmKTpuZXcgYihjLG51bGwpLGMudHJlZVNjb3BlXz1lfWIucHJvdG90eXBlPXtnZXQgcmVuZGVyZXIoKXtyZXR1cm4gdGhpcy5yb290IGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290P2EuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMucm9vdC5ob3N0KTpudWxsfSxjb250YWluczpmdW5jdGlvbihhKXtmb3IoO2E7YT1hLnBhcmVudClpZihhPT09dGhpcylyZXR1cm4hMDtyZXR1cm4hMX19LGEuVHJlZVNjb3BlPWIsYS5nZXRUcmVlU2NvcGU9ZCxhLnNldFRyZWVTY29wZT1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhIGluc3RhbmNlb2YgVC5TaGFkb3dSb290fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIE0oYSkucm9vdH1mdW5jdGlvbiBkKGEsZCl7dmFyIGg9W10saT1hO2ZvcihoLnB1c2goaSk7aTspe3ZhciBqPWcoaSk7aWYoaiYmai5sZW5ndGg+MCl7Zm9yKHZhciBrPTA7azxqLmxlbmd0aDtrKyspe3ZhciBtPWpba107aWYoZihtKSl7dmFyIG49YyhtKSxvPW4ub2xkZXJTaGFkb3dSb290O28mJmgucHVzaChvKX1oLnB1c2gobSl9aT1qW2oubGVuZ3RoLTFdfWVsc2UgaWYoYihpKSl7aWYobChhLGkpJiZlKGQpKWJyZWFrO2k9aS5ob3N0LGgucHVzaChpKX1lbHNlIGk9aS5wYXJlbnROb2RlLGkmJmgucHVzaChpKX1yZXR1cm4gaH1mdW5jdGlvbiBlKGEpe2lmKCFhKXJldHVybiExO3N3aXRjaChhLnR5cGUpe2Nhc2UiYWJvcnQiOmNhc2UiZXJyb3IiOmNhc2Uic2VsZWN0IjpjYXNlImNoYW5nZSI6Y2FzZSJsb2FkIjpjYXNlInJlc2V0IjpjYXNlInJlc2l6ZSI6Y2FzZSJzY3JvbGwiOmNhc2Uic2VsZWN0c3RhcnQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBIVE1MU2hhZG93RWxlbWVudH1mdW5jdGlvbiBnKGIpe3JldHVybiBhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzKGIpfWZ1bmN0aW9uIGgoYSxiKXtpZigwPT09YS5sZW5ndGgpcmV0dXJuIGI7YiBpbnN0YW5jZW9mIFQuV2luZG93JiYoYj1iLmRvY3VtZW50KTtmb3IodmFyIGM9TShiKSxkPWFbMF0sZT1NKGQpLGY9aihjLGUpLGc9MDtnPGEubGVuZ3RoO2crKyl7dmFyIGg9YVtnXTtpZihNKGgpPT09ZilyZXR1cm4gaH1yZXR1cm4gYVthLmxlbmd0aC0xXX1mdW5jdGlvbiBpKGEpe2Zvcih2YXIgYj1bXTthO2E9YS5wYXJlbnQpYi5wdXNoKGEpO3JldHVybiBifWZ1bmN0aW9uIGooYSxiKXtmb3IodmFyIGM9aShhKSxkPWkoYiksZT1udWxsO2MubGVuZ3RoPjAmJmQubGVuZ3RoPjA7KXt2YXIgZj1jLnBvcCgpLGc9ZC5wb3AoKTtpZihmIT09ZylicmVhaztlPWZ9cmV0dXJuIGV9ZnVuY3Rpb24gayhhLGIsYyl7YiBpbnN0YW5jZW9mIFQuV2luZG93JiYoYj1iLmRvY3VtZW50KTt2YXIgZSxmPU0oYiksZz1NKGMpLGg9ZChjLGEpLGU9aihmLGcpO2V8fChlPWcucm9vdCk7Zm9yKHZhciBpPWU7aTtpPWkucGFyZW50KWZvcih2YXIgaz0wO2s8aC5sZW5ndGg7aysrKXt2YXIgbD1oW2tdO2lmKE0obCk9PT1pKXJldHVybiBsfXJldHVybiBudWxsfWZ1bmN0aW9uIGwoYSxiKXtyZXR1cm4gTShhKT09PU0oYil9ZnVuY3Rpb24gbShhKXtpZighVi5nZXQoYSkmJihWLnNldChhLCEwKSxvKFMoYSksUyhhLnRhcmdldCkpLEspKXt2YXIgYj1LO3Rocm93IEs9bnVsbCxifX1mdW5jdGlvbiBuKGEpe3N3aXRjaChhLnR5cGUpe2Nhc2UibG9hZCI6Y2FzZSJiZWZvcmV1bmxvYWQiOmNhc2UidW5sb2FkIjpyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBvKGIsYyl7aWYoVy5nZXQoYikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkU3RhdGVFcnJvciIpO1cuc2V0KGIsITApLGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBlLGYsZztpZihuKGIpJiYhYi5idWJibGVzKXt2YXIgaD1jO2ggaW5zdGFuY2VvZiBULkRvY3VtZW50JiYoZz1oLmRlZmF1bHRWaWV3KSYmKGY9aCxlPVtdKX1pZighZSlpZihjIGluc3RhbmNlb2YgVC5XaW5kb3cpZz1jLGU9W107ZWxzZSBpZihlPWQoYyxiKSwhbihiKSl7dmFyIGg9ZVtlLmxlbmd0aC0xXTtoIGluc3RhbmNlb2YgVC5Eb2N1bWVudCYmKGc9aC5kZWZhdWx0Vmlldyl9cmV0dXJuIGNiLnNldChiLGUpLHAoYixlLGcsZikmJnEoYixlLGcsZikmJnIoYixlLGcsZiksJC5zZXQoYixkYiksWS5kZWxldGUoYixudWxsKSxXLmRlbGV0ZShiKSxiLmRlZmF1bHRQcmV2ZW50ZWR9ZnVuY3Rpb24gcChhLGIsYyxkKXt2YXIgZT1lYjtpZihjJiYhcyhjLGEsZSxiLGQpKXJldHVybiExO2Zvcih2YXIgZj1iLmxlbmd0aC0xO2Y+MDtmLS0paWYoIXMoYltmXSxhLGUsYixkKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBxKGEsYixjLGQpe3ZhciBlPWZiLGY9YlswXXx8YztyZXR1cm4gcyhmLGEsZSxiLGQpfWZ1bmN0aW9uIHIoYSxiLGMsZCl7Zm9yKHZhciBlPWdiLGY9MTtmPGIubGVuZ3RoO2YrKylpZighcyhiW2ZdLGEsZSxiLGQpKXJldHVybjtjJiZiLmxlbmd0aD4wJiZzKGMsYSxlLGIsZCl9ZnVuY3Rpb24gcyhhLGIsYyxkLGUpe3ZhciBmPVUuZ2V0KGEpO2lmKCFmKXJldHVybiEwO3ZhciBnPWV8fGgoZCxhKTtpZihnPT09YSl7aWYoYz09PWViKXJldHVybiEwO2M9PT1nYiYmKGM9ZmIpfWVsc2UgaWYoYz09PWdiJiYhYi5idWJibGVzKXJldHVybiEwO2lmKCJyZWxhdGVkVGFyZ2V0ImluIGIpe3ZhciBpPVIoYiksaj1pLnJlbGF0ZWRUYXJnZXQ7aWYoail7aWYoaiBpbnN0YW5jZW9mIE9iamVjdCYmai5hZGRFdmVudExpc3RlbmVyKXt2YXIgbD1TKGopLG09ayhiLGEsbCk7aWYobT09PWcpcmV0dXJuITB9ZWxzZSBtPW51bGw7Wi5zZXQoYixtKX19JC5zZXQoYixjKTt2YXIgbj1iLnR5cGUsbz0hMTtYLnNldChiLGcpLFkuc2V0KGIsYSksZi5kZXB0aCsrO2Zvcih2YXIgcD0wLHE9Zi5sZW5ndGg7cT5wO3ArKyl7dmFyIHI9ZltwXTtpZihyLnJlbW92ZWQpbz0hMDtlbHNlIGlmKCEoci50eXBlIT09bnx8IXIuY2FwdHVyZSYmYz09PWVifHxyLmNhcHR1cmUmJmM9PT1nYikpdHJ5e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiByLmhhbmRsZXI/ci5oYW5kbGVyLmNhbGwoYSxiKTpyLmhhbmRsZXIuaGFuZGxlRXZlbnQoYiksYWIuZ2V0KGIpKXJldHVybiExfWNhdGNoKHMpe0t8fChLPXMpfX1pZihmLmRlcHRoLS0sbyYmMD09PWYuZGVwdGgpe3ZhciB0PWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgcD0wO3A8dC5sZW5ndGg7cCsrKXRbcF0ucmVtb3ZlZHx8Zi5wdXNoKHRbcF0pfXJldHVybiFfLmdldChiKX1mdW5jdGlvbiB0KGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB1KGEsYil7aWYoIShhIGluc3RhbmNlb2YgaGIpKXJldHVybiBTKHkoaGIsIkV2ZW50IixhLGIpKTt2YXIgYz1hO3JldHVybiBzYnx8ImJlZm9yZXVubG9hZCIhPT1jLnR5cGV8fHRoaXMgaW5zdGFuY2VvZiB6P3ZvaWQgUChjLHRoaXMpOm5ldyB6KGMpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIGEmJmEucmVsYXRlZFRhcmdldD9PYmplY3QuY3JlYXRlKGEse3JlbGF0ZWRUYXJnZXQ6e3ZhbHVlOlIoYS5yZWxhdGVkVGFyZ2V0KX19KTphfWZ1bmN0aW9uIHcoYSxiLGMpe3ZhciBkPXdpbmRvd1thXSxlPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGIgaW5zdGFuY2VvZiBkP3ZvaWQgUChiLHRoaXMpOlMoeShkLGEsYixjKSl9O2lmKGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLGMmJk4oZS5wcm90b3R5cGUsYyksZCl0cnl7TyhkLGUsbmV3IGQoInRlbXAiKSl9Y2F0Y2goZil7TyhkLGUsZG9jdW1lbnQuY3JlYXRlRXZlbnQoYSkpfXJldHVybiBlfWZ1bmN0aW9uIHgoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXthcmd1bWVudHNbYl09Uihhcmd1bWVudHNbYl0pO3ZhciBjPVIodGhpcyk7Y1thXS5hcHBseShjLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHkoYSxiLGMsZCl7aWYocWIpcmV0dXJuIG5ldyBhKGMsdihkKSk7dmFyIGU9Uihkb2N1bWVudC5jcmVhdGVFdmVudChiKSksZj1wYltiXSxnPVtjXTtyZXR1cm4gT2JqZWN0LmtleXMoZikuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1udWxsIT1kJiZhIGluIGQ/ZFthXTpmW2FdOyJyZWxhdGVkVGFyZ2V0Ij09PWEmJihiPVIoYikpLGcucHVzaChiKX0pLGVbImluaXQiK2JdLmFwcGx5KGUsZyksZX1mdW5jdGlvbiB6KGEpe3UuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIEEoYSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGE/ITA6YSYmYS5oYW5kbGVFdmVudH1mdW5jdGlvbiBCKGEpe3N3aXRjaChhKXtjYXNlIkRPTUF0dHJNb2RpZmllZCI6Y2FzZSJET01BdHRyaWJ1dGVOYW1lQ2hhbmdlZCI6Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOmNhc2UiRE9NRWxlbWVudE5hbWVDaGFuZ2VkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZCI6Y2FzZSJET01Ob2RlSW5zZXJ0ZWRJbnRvRG9jdW1lbnQiOmNhc2UiRE9NTm9kZVJlbW92ZWQiOmNhc2UiRE9NTm9kZVJlbW92ZWRGcm9tRG9jdW1lbnQiOmNhc2UiRE9NU3VidHJlZU1vZGlmaWVkIjpyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBDKGEpe1AoYSx0aGlzKX1mdW5jdGlvbiBEKGEpe3JldHVybiBhIGluc3RhbmNlb2YgVC5TaGFkb3dSb290JiYoYT1hLmhvc3QpLFIoYSl9ZnVuY3Rpb24gRShhLGIpe3ZhciBjPVUuZ2V0KGEpO2lmKGMpZm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspaWYoIWNbZF0ucmVtb3ZlZCYmY1tkXS50eXBlPT09YilyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBGKGEsYil7Zm9yKHZhciBjPVIoYSk7YztjPWMucGFyZW50Tm9kZSlpZihFKFMoYyksYikpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gRyhhKXtMKGEsdWIpfWZ1bmN0aW9uIEgoYixjLGUsZil7YS5yZW5kZXJBbGxQZW5kaW5nKCk7dmFyIGc9Uyh2Yi5jYWxsKFEoYyksZSxmKSk7aWYoIWcpcmV0dXJuIG51bGw7dmFyIGk9ZChnLG51bGwpLGo9aS5sYXN0SW5kZXhPZihiKTtyZXR1cm4tMT09aj9udWxsOihpPWkuc2xpY2UoMCxqKSxoKGksYikpfWZ1bmN0aW9uIEkoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9YmIuZ2V0KHRoaXMpOwpyZXR1cm4gYiYmYlthXSYmYlthXS52YWx1ZXx8bnVsbH19ZnVuY3Rpb24gSihhKXt2YXIgYj1hLnNsaWNlKDIpO3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD1iYi5nZXQodGhpcyk7ZHx8KGQ9T2JqZWN0LmNyZWF0ZShudWxsKSxiYi5zZXQodGhpcyxkKSk7dmFyIGU9ZFthXTtpZihlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixlLndyYXBwZWQsITEpLCJmdW5jdGlvbiI9PXR5cGVvZiBjKXt2YXIgZj1mdW5jdGlvbihiKXt2YXIgZD1jLmNhbGwodGhpcyxiKTtkPT09ITE/Yi5wcmV2ZW50RGVmYXVsdCgpOiJvbmJlZm9yZXVubG9hZCI9PT1hJiYic3RyaW5nIj09dHlwZW9mIGQmJihiLnJldHVyblZhbHVlPWQpfTt0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYixmLCExKSxkW2FdPXt2YWx1ZTpjLHdyYXBwZWQ6Zn19fX12YXIgSyxMPWEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIsTT1hLmdldFRyZWVTY29wZSxOPWEubWl4aW4sTz1hLnJlZ2lzdGVyV3JhcHBlcixQPWEuc2V0V3JhcHBlcixRPWEudW5zYWZlVW53cmFwLFI9YS51bndyYXAsUz1hLndyYXAsVD1hLndyYXBwZXJzLFU9KG5ldyBXZWFrTWFwLG5ldyBXZWFrTWFwKSxWPW5ldyBXZWFrTWFwLFc9bmV3IFdlYWtNYXAsWD1uZXcgV2Vha01hcCxZPW5ldyBXZWFrTWFwLFo9bmV3IFdlYWtNYXAsJD1uZXcgV2Vha01hcCxfPW5ldyBXZWFrTWFwLGFiPW5ldyBXZWFrTWFwLGJiPW5ldyBXZWFrTWFwLGNiPW5ldyBXZWFrTWFwLGRiPTAsZWI9MSxmYj0yLGdiPTM7dC5wcm90b3R5cGU9e2VxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGVyPT09YS5oYW5kbGVyJiZ0aGlzLnR5cGU9PT1hLnR5cGUmJnRoaXMuY2FwdHVyZT09PWEuY2FwdHVyZX0sZ2V0IHJlbW92ZWQoKXtyZXR1cm4gbnVsbD09PXRoaXMuaGFuZGxlcn0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW51bGx9fTt2YXIgaGI9d2luZG93LkV2ZW50O2hiLnByb3RvdHlwZS5wb2x5bWVyQmxhY2tMaXN0Xz17cmV0dXJuVmFsdWU6ITAsa2V5TG9jYXRpb246ITB9LHUucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIFguZ2V0KHRoaXMpfSxnZXQgY3VycmVudFRhcmdldCgpe3JldHVybiBZLmdldCh0aGlzKX0sZ2V0IGV2ZW50UGhhc2UoKXtyZXR1cm4gJC5nZXQodGhpcyl9LGdldCBwYXRoKCl7dmFyIGE9Y2IuZ2V0KHRoaXMpO3JldHVybiBhP2Euc2xpY2UoKTpbXX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7Xy5zZXQodGhpcywhMCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe18uc2V0KHRoaXMsITApLGFiLnNldCh0aGlzLCEwKX19LE8oaGIsdSxkb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSk7dmFyIGliPXcoIlVJRXZlbnQiLHUpLGpiPXcoIkN1c3RvbUV2ZW50Iix1KSxrYj17Z2V0IHJlbGF0ZWRUYXJnZXQoKXt2YXIgYT1aLmdldCh0aGlzKTtyZXR1cm4gdm9pZCAwIT09YT9hOlMoUih0aGlzKS5yZWxhdGVkVGFyZ2V0KX19LGxiPU4oe2luaXRNb3VzZUV2ZW50OngoImluaXRNb3VzZUV2ZW50IiwxNCl9LGtiKSxtYj1OKHtpbml0Rm9jdXNFdmVudDp4KCJpbml0Rm9jdXNFdmVudCIsNSl9LGtiKSxuYj13KCJNb3VzZUV2ZW50IixpYixsYiksb2I9dygiRm9jdXNFdmVudCIsaWIsbWIpLHBiPU9iamVjdC5jcmVhdGUobnVsbCkscWI9ZnVuY3Rpb24oKXt0cnl7bmV3IHdpbmRvdy5Gb2N1c0V2ZW50KCJmb2N1cyIpfWNhdGNoKGEpe3JldHVybiExfXJldHVybiEwfSgpO2lmKCFxYil7dmFyIHJiPWZ1bmN0aW9uKGEsYixjKXtpZihjKXt2YXIgZD1wYltjXTtiPU4oTih7fSxkKSxiKX1wYlthXT1ifTtyYigiRXZlbnQiLHtidWJibGVzOiExLGNhbmNlbGFibGU6ITF9KSxyYigiQ3VzdG9tRXZlbnQiLHtkZXRhaWw6bnVsbH0sIkV2ZW50IikscmIoIlVJRXZlbnQiLHt2aWV3Om51bGwsZGV0YWlsOjB9LCJFdmVudCIpLHJiKCJNb3VzZUV2ZW50Iix7c2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpLHJiKCJGb2N1c0V2ZW50Iix7cmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpfXZhciBzYj13aW5kb3cuQmVmb3JlVW5sb2FkRXZlbnQ7ei5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh1LnByb3RvdHlwZSksTih6LnByb3RvdHlwZSx7Z2V0IHJldHVyblZhbHVlKCl7cmV0dXJuIFEodGhpcykucmV0dXJuVmFsdWV9LHNldCByZXR1cm5WYWx1ZShhKXtRKHRoaXMpLnJldHVyblZhbHVlPWF9fSksc2ImJk8oc2Iseik7dmFyIHRiPXdpbmRvdy5FdmVudFRhcmdldCx1Yj1bImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdO1tOb2RlLFdpbmRvd10uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnByb3RvdHlwZTt1Yi5mb3JFYWNoKGZ1bmN0aW9uKGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLGErIl8iLHt2YWx1ZTpiW2FdfSl9KX0pLEMucHJvdG90eXBlPXthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtpZihBKGIpJiYhQihhKSl7dmFyIGQ9bmV3IHQoYSxiLGMpLGU9VS5nZXQodGhpcyk7aWYoZSl7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspaWYoZC5lcXVhbHMoZVtmXSkpcmV0dXJufWVsc2UgZT1bXSxlLmRlcHRoPTAsVS5zZXQodGhpcyxlKTtlLnB1c2goZCk7dmFyIGc9RCh0aGlzKTtnLmFkZEV2ZW50TGlzdGVuZXJfKGEsbSwhMCl9fSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtjPUJvb2xlYW4oYyk7dmFyIGQ9VS5nZXQodGhpcyk7aWYoZCl7Zm9yKHZhciBlPTAsZj0hMSxnPTA7ZzxkLmxlbmd0aDtnKyspZFtnXS50eXBlPT09YSYmZFtnXS5jYXB0dXJlPT09YyYmKGUrKyxkW2ddLmhhbmRsZXI9PT1iJiYoZj0hMCxkW2ddLnJlbW92ZSgpKSk7aWYoZiYmMT09PWUpe3ZhciBoPUQodGhpcyk7aC5yZW1vdmVFdmVudExpc3RlbmVyXyhhLG0sITApfX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYil7dmFyIGM9UihiKSxkPWMudHlwZTtWLnNldChjLCExKSxhLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgZTtGKHRoaXMsZCl8fChlPWZ1bmN0aW9uKCl7fSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZCxlLCEwKSk7dHJ5e3JldHVybiBSKHRoaXMpLmRpc3BhdGNoRXZlbnRfKGMpfWZpbmFsbHl7ZSYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGQsZSwhMCl9fX0sdGImJk8odGIsQyk7dmFyIHZiPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQ7YS5lbGVtZW50RnJvbVBvaW50PUgsYS5nZXRFdmVudEhhbmRsZXJHZXR0ZXI9SSxhLmdldEV2ZW50SGFuZGxlclNldHRlcj1KLGEud3JhcEV2ZW50VGFyZ2V0TWV0aG9kcz1HLGEud3JhcHBlcnMuQmVmb3JlVW5sb2FkRXZlbnQ9eixhLndyYXBwZXJzLkN1c3RvbUV2ZW50PWpiLGEud3JhcHBlcnMuRXZlbnQ9dSxhLndyYXBwZXJzLkV2ZW50VGFyZ2V0PUMsYS53cmFwcGVycy5Gb2N1c0V2ZW50PW9iLGEud3JhcHBlcnMuTW91c2VFdmVudD1uYixhLndyYXBwZXJzLlVJRXZlbnQ9aWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLHApfWZ1bmN0aW9uIGMoYSl7aihhLHRoaXMpfWZ1bmN0aW9uIGQoKXt0aGlzLmxlbmd0aD0wLGIodGhpcywibGVuZ3RoIil9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9bmV3IGQsZT0wO2U8YS5sZW5ndGg7ZSsrKWJbZV09bmV3IGMoYVtlXSk7cmV0dXJuIGIubGVuZ3RoPWUsYn1mdW5jdGlvbiBmKGEpe2cuY2FsbCh0aGlzLGEpfXZhciBnPWEud3JhcHBlcnMuVUlFdmVudCxoPWEubWl4aW4saT1hLnJlZ2lzdGVyV3JhcHBlcixqPWEuc2V0V3JhcHBlcixrPWEudW5zYWZlVW53cmFwLGw9YS53cmFwLG09d2luZG93LlRvdWNoRXZlbnQ7aWYobSl7dmFyIG47dHJ5e249ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIlRvdWNoRXZlbnQiKX1jYXRjaChvKXtyZXR1cm59dmFyIHA9e2VudW1lcmFibGU6ITF9O2MucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIGwoayh0aGlzKS50YXJnZXQpfX07dmFyIHE9e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpudWxsfTtbImNsaWVudFgiLCJjbGllbnRZIiwic2NyZWVuWCIsInNjcmVlblkiLCJwYWdlWCIsInBhZ2VZIiwiaWRlbnRpZmllciIsIndlYmtpdFJhZGl1c1giLCJ3ZWJraXRSYWRpdXNZIiwid2Via2l0Um90YXRpb25BbmdsZSIsIndlYmtpdEZvcmNlIl0uZm9yRWFjaChmdW5jdGlvbihhKXtxLmdldD1mdW5jdGlvbigpe3JldHVybiBrKHRoaXMpW2FdfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYy5wcm90b3R5cGUsYSxxKX0pLGQucHJvdG90eXBlPXtpdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzW2FdfX0sZi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSksaChmLnByb3RvdHlwZSx7Z2V0IHRvdWNoZXMoKXtyZXR1cm4gZShrKHRoaXMpLnRvdWNoZXMpfSxnZXQgdGFyZ2V0VG91Y2hlcygpe3JldHVybiBlKGsodGhpcykudGFyZ2V0VG91Y2hlcyl9LGdldCBjaGFuZ2VkVG91Y2hlcygpe3JldHVybiBlKGsodGhpcykuY2hhbmdlZFRvdWNoZXMpfSxpbml0VG91Y2hFdmVudDpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiTm90IGltcGxlbWVudGVkIil9fSksaShtLGYsbiksYS53cmFwcGVycy5Ub3VjaD1jLGEud3JhcHBlcnMuVG91Y2hFdmVudD1mLGEud3JhcHBlcnMuVG91Y2hMaXN0PWR9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYixoKX1mdW5jdGlvbiBjKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGQoYSl7aWYobnVsbD09YSlyZXR1cm4gYTtmb3IodmFyIGI9bmV3IGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyliW2RdPWcoYVtkXSk7cmV0dXJuIGIubGVuZ3RoPWUsYn1mdW5jdGlvbiBlKGEsYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gZChmKHRoaXMpW2JdLmFwcGx5KGYodGhpcyksYXJndW1lbnRzKSl9fXZhciBmPWEudW5zYWZlVW53cmFwLGc9YS53cmFwLGg9e2VudW1lcmFibGU6ITF9O2MucHJvdG90eXBlPXtpdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzW2FdfX0sYihjLnByb3RvdHlwZSwiaXRlbSIpLGEud3JhcHBlcnMuTm9kZUxpc3Q9YyxhLmFkZFdyYXBOb2RlTGlzdE1ldGhvZD1lLGEud3JhcE5vZGVMaXN0PWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Eud3JhcEhUTUxDb2xsZWN0aW9uPWEud3JhcE5vZGVMaXN0LGEud3JhcHBlcnMuSFRNTENvbGxlY3Rpb249YS53cmFwcGVycy5Ob2RlTGlzdH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtBKGEgaW5zdGFuY2VvZiB3KX1mdW5jdGlvbiBjKGEpe3ZhciBiPW5ldyB5O3JldHVybiBiWzBdPWEsYi5sZW5ndGg9MSxifWZ1bmN0aW9uIGQoYSxiLGMpe0MoYiwiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmMscHJldmlvdXNTaWJsaW5nOmEucHJldmlvdXNTaWJsaW5nLG5leHRTaWJsaW5nOmEubmV4dFNpYmxpbmd9KX1mdW5jdGlvbiBlKGEsYil7QyhhLCJjaGlsZExpc3QiLHtyZW1vdmVkTm9kZXM6Yn0pfWZ1bmN0aW9uIGYoYSxiLGQsZSl7aWYoYSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpe3ZhciBmPWgoYSk7UD0hMDtmb3IodmFyIGc9Zi5sZW5ndGgtMTtnPj0wO2ctLSlhLnJlbW92ZUNoaWxkKGZbZ10pLGZbZ10ucGFyZW50Tm9kZV89YjtQPSExO2Zvcih2YXIgZz0wO2c8Zi5sZW5ndGg7ZysrKWZbZ10ucHJldmlvdXNTaWJsaW5nXz1mW2ctMV18fGQsZltnXS5uZXh0U2libGluZ189ZltnKzFdfHxlO3JldHVybiBkJiYoZC5uZXh0U2libGluZ189ZlswXSksZSYmKGUucHJldmlvdXNTaWJsaW5nXz1mW2YubGVuZ3RoLTFdKSxmfXZhciBmPWMoYSksaT1hLnBhcmVudE5vZGU7cmV0dXJuIGkmJmkucmVtb3ZlQ2hpbGQoYSksYS5wYXJlbnROb2RlXz1iLGEucHJldmlvdXNTaWJsaW5nXz1kLGEubmV4dFNpYmxpbmdfPWUsZCYmKGQubmV4dFNpYmxpbmdfPWEpLGUmJihlLnByZXZpb3VzU2libGluZ189YSksZn1mdW5jdGlvbiBnKGEpe2lmKGEgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXJldHVybiBoKGEpO3ZhciBiPWMoYSksZT1hLnBhcmVudE5vZGU7cmV0dXJuIGUmJmQoYSxlLGIpLGJ9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9bmV3IHksYz0wLGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWJbYysrXT1kO3JldHVybiBiLmxlbmd0aD1jLGUoYSxiKSxifWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gaihhLGIpe0koYSxiKSxhLm5vZGVJc0luc2VydGVkXygpfWZ1bmN0aW9uIGsoYSxiKXtmb3IodmFyIGM9RChiKSxkPTA7ZDxhLmxlbmd0aDtkKyspaihhW2RdLGMpfWZ1bmN0aW9uIGwoYSl7SShhLG5ldyB6KGEsbnVsbCkpfWZ1bmN0aW9uIG0oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspbChhW2JdKX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9YS5ub2RlVHlwZT09PXcuRE9DVU1FTlRfTk9ERT9hOmEub3duZXJEb2N1bWVudDtjIT09Yi5vd25lckRvY3VtZW50JiZjLmFkb3B0Tm9kZShiKX1mdW5jdGlvbiBvKGIsYyl7aWYoYy5sZW5ndGgpe3ZhciBkPWIub3duZXJEb2N1bWVudDtpZihkIT09Y1swXS5vd25lckRvY3VtZW50KWZvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKWEuYWRvcHROb2RlTm9SZW1vdmUoY1tlXSxkKX19ZnVuY3Rpb24gcChhLGIpe28oYSxiKTt2YXIgYz1iLmxlbmd0aDtpZigxPT09YylyZXR1cm4gSyhiWzBdKTtmb3IodmFyIGQ9SyhhLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKSxlPTA7Yz5lO2UrKylkLmFwcGVuZENoaWxkKEsoYltlXSkpO3JldHVybiBkfWZ1bmN0aW9uIHEoYSl7aWYodm9pZCAwIT09YS5maXJzdENoaWxkXylmb3IodmFyIGI9YS5maXJzdENoaWxkXztiOyl7dmFyIGM9YjtiPWIubmV4dFNpYmxpbmdfLGMucGFyZW50Tm9kZV89Yy5wcmV2aW91c1NpYmxpbmdfPWMubmV4dFNpYmxpbmdfPXZvaWQgMH1hLmZpcnN0Q2hpbGRfPWEubGFzdENoaWxkXz12b2lkIDB9ZnVuY3Rpb24gcihhKXtpZihhLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtmb3IodmFyIGI9YS5maXJzdENoaWxkO2I7KXtBKGIucGFyZW50Tm9kZT09PWEpO3ZhciBjPWIubmV4dFNpYmxpbmcsZD1LKGIpLGU9ZC5wYXJlbnROb2RlO2UmJlcuY2FsbChlLGQpLGIucHJldmlvdXNTaWJsaW5nXz1iLm5leHRTaWJsaW5nXz1iLnBhcmVudE5vZGVfPW51bGwsYj1jfWEuZmlyc3RDaGlsZF89YS5sYXN0Q2hpbGRfPW51bGx9ZWxzZSBmb3IodmFyIGMsZj1LKGEpLGc9Zi5maXJzdENoaWxkO2c7KWM9Zy5uZXh0U2libGluZyxXLmNhbGwoZixnKSxnPWN9ZnVuY3Rpb24gcyhhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9ZnVuY3Rpb24gdChhKXtmb3IodmFyIGIsYz0wO2M8YS5sZW5ndGg7YysrKWI9YVtjXSxiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYil9ZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQ7aWYoZD1NKGM/US5jYWxsKGMsSihhKSwhMSk6Ui5jYWxsKEooYSksITEpKSxiKXtmb3IodmFyIGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWQuYXBwZW5kQ2hpbGQodShlLCEwLGMpKTtpZihhIGluc3RhbmNlb2YgTy5IVE1MVGVtcGxhdGVFbGVtZW50KWZvcih2YXIgZj1kLmNvbnRlbnQsZT1hLmNvbnRlbnQuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylmLmFwcGVuZENoaWxkKHUoZSwhMCxjKSl9cmV0dXJuIGR9ZnVuY3Rpb24gdihhLGIpe2lmKCFifHxEKGEpIT09RChiKSlyZXR1cm4hMTtmb3IodmFyIGM9YjtjO2M9Yy5wYXJlbnROb2RlKWlmKGM9PT1hKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHcoYSl7QShhIGluc3RhbmNlb2YgUykseC5jYWxsKHRoaXMsYSksdGhpcy5wYXJlbnROb2RlXz12b2lkIDAsdGhpcy5maXJzdENoaWxkXz12b2lkIDAsdGhpcy5sYXN0Q2hpbGRfPXZvaWQgMCx0aGlzLm5leHRTaWJsaW5nXz12b2lkIDAsdGhpcy5wcmV2aW91c1NpYmxpbmdfPXZvaWQgMCx0aGlzLnRyZWVTY29wZV89dm9pZCAwfXZhciB4PWEud3JhcHBlcnMuRXZlbnRUYXJnZXQseT1hLndyYXBwZXJzLk5vZGVMaXN0LHo9YS5UcmVlU2NvcGUsQT1hLmFzc2VydCxCPWEuZGVmaW5lV3JhcEdldHRlcixDPWEuZW5xdWV1ZU11dGF0aW9uLEQ9YS5nZXRUcmVlU2NvcGUsRT1hLmlzV3JhcHBlcixGPWEubWl4aW4sRz1hLnJlZ2lzdGVyVHJhbnNpZW50T2JzZXJ2ZXJzLEg9YS5yZWdpc3RlcldyYXBwZXIsST1hLnNldFRyZWVTY29wZSxKPWEudW5zYWZlVW53cmFwLEs9YS51bndyYXAsTD1hLnVud3JhcElmTmVlZGVkLE09YS53cmFwLE49YS53cmFwSWZOZWVkZWQsTz1hLndyYXBwZXJzLFA9ITEsUT1kb2N1bWVudC5pbXBvcnROb2RlLFI9d2luZG93Lk5vZGUucHJvdG90eXBlLmNsb25lTm9kZSxTPXdpbmRvdy5Ob2RlLFQ9d2luZG93LkRvY3VtZW50RnJhZ21lbnQsVT0oUy5wcm90b3R5cGUuYXBwZW5kQ2hpbGQsUy5wcm90b3R5cGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24pLFY9Uy5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLFc9Uy5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsWD1TLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQsWT0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxaPVk/ZnVuY3Rpb24oYSxiKXt0cnl7Vy5jYWxsKGEsYil9Y2F0Y2goYyl7aWYoIShhIGluc3RhbmNlb2YgVCkpdGhyb3cgY319OmZ1bmN0aW9uKGEsYil7Vy5jYWxsKGEsYil9O3cucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLEYody5wcm90b3R5cGUse2FwcGVuZENoaWxkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluc2VydEJlZm9yZShhLG51bGwpfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSxjKXtiKGEpO3ZhciBkO2M/RShjKT9kPUsoYyk6KGQ9YyxjPU0oZCkpOihjPW51bGwsZD1udWxsKSxjJiZBKGMucGFyZW50Tm9kZT09PXRoaXMpO3ZhciBlLGg9Yz9jLnByZXZpb3VzU2libGluZzp0aGlzLmxhc3RDaGlsZCxpPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhcyhhKTtpZihlPWk/ZyhhKTpmKGEsdGhpcyxoLGMpLGkpbih0aGlzLGEpLHEodGhpcyksVi5jYWxsKEoodGhpcyksSyhhKSxkKTtlbHNle2h8fCh0aGlzLmZpcnN0Q2hpbGRfPWVbMF0pLGN8fCh0aGlzLmxhc3RDaGlsZF89ZVtlLmxlbmd0aC0xXSx2b2lkIDA9PT10aGlzLmZpcnN0Q2hpbGRfJiYodGhpcy5maXJzdENoaWxkXz10aGlzLmZpcnN0Q2hpbGQpKTt2YXIgaj1kP2QucGFyZW50Tm9kZTpKKHRoaXMpO2o/Vi5jYWxsKGoscCh0aGlzLGUpLGQpOm8odGhpcyxlKX1yZXR1cm4gQyh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmUsbmV4dFNpYmxpbmc6YyxwcmV2aW91c1NpYmxpbmc6aH0pLGsoZSx0aGlzKSxhfSxyZW1vdmVDaGlsZDpmdW5jdGlvbihhKXtpZihiKGEpLGEucGFyZW50Tm9kZSE9PXRoaXMpe2Zvcih2YXIgZD0hMSxlPSh0aGlzLmNoaWxkTm9kZXMsdGhpcy5maXJzdENoaWxkKTtlO2U9ZS5uZXh0U2libGluZylpZihlPT09YSl7ZD0hMDticmVha31pZighZCl0aHJvdyBuZXcgRXJyb3IoIk5vdEZvdW5kRXJyb3IiKX12YXIgZj1LKGEpLGc9YS5uZXh0U2libGluZyxoPWEucHJldmlvdXNTaWJsaW5nO2lmKHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe3ZhciBpPXRoaXMuZmlyc3RDaGlsZCxqPXRoaXMubGFzdENoaWxkLGs9Zi5wYXJlbnROb2RlO2smJlooayxmKSxpPT09YSYmKHRoaXMuZmlyc3RDaGlsZF89Zyksaj09PWEmJih0aGlzLmxhc3RDaGlsZF89aCksaCYmKGgubmV4dFNpYmxpbmdfPWcpLGcmJihnLnByZXZpb3VzU2libGluZ189aCksYS5wcmV2aW91c1NpYmxpbmdfPWEubmV4dFNpYmxpbmdfPWEucGFyZW50Tm9kZV89dm9pZCAwfWVsc2UgcSh0aGlzKSxaKEoodGhpcyksZik7cmV0dXJuIFB8fEModGhpcywiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmMoYSksbmV4dFNpYmxpbmc6ZyxwcmV2aW91c1NpYmxpbmc6aH0pLEcodGhpcyxhKSxhfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxkKXtiKGEpO3ZhciBlO2lmKEUoZCk/ZT1LKGQpOihlPWQsZD1NKGUpKSxkLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3ZhciBoLGk9ZC5uZXh0U2libGluZyxqPWQucHJldmlvdXNTaWJsaW5nLG09IXRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkmJiFzKGEpO3JldHVybiBtP2g9ZyhhKTooaT09PWEmJihpPWEubmV4dFNpYmxpbmcpLGg9ZihhLHRoaXMsaixpKSksbT8obih0aGlzLGEpLHEodGhpcyksWC5jYWxsKEoodGhpcyksSyhhKSxlKSk6KHRoaXMuZmlyc3RDaGlsZD09PWQmJih0aGlzLmZpcnN0Q2hpbGRfPWhbMF0pLHRoaXMubGFzdENoaWxkPT09ZCYmKHRoaXMubGFzdENoaWxkXz1oW2gubGVuZ3RoLTFdKSxkLnByZXZpb3VzU2libGluZ189ZC5uZXh0U2libGluZ189ZC5wYXJlbnROb2RlXz12b2lkIDAsZS5wYXJlbnROb2RlJiZYLmNhbGwoZS5wYXJlbnROb2RlLHAodGhpcyxoKSxlKSksQyh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmgscmVtb3ZlZE5vZGVzOmMoZCksbmV4dFNpYmxpbmc6aSxwcmV2aW91c1NpYmxpbmc6an0pLGwoZCksayhoLHRoaXMpLGR9LG5vZGVJc0luc2VydGVkXzpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYS5ub2RlSXNJbnNlcnRlZF8oKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86TShKKHRoaXMpLnBhcmVudE5vZGUpfSxnZXQgZmlyc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmZpcnN0Q2hpbGRfP3RoaXMuZmlyc3RDaGlsZF86TShKKHRoaXMpLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubGFzdENoaWxkXz90aGlzLmxhc3RDaGlsZF86TShKKHRoaXMpLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpNKEoodGhpcykubmV4dFNpYmxpbmcpfSxnZXQgcHJldmlvdXNTaWJsaW5nKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMucHJldmlvdXNTaWJsaW5nXz90aGlzLnByZXZpb3VzU2libGluZ186TShKKHRoaXMpLnByZXZpb3VzU2libGluZyl9LGdldCBwYXJlbnRFbGVtZW50KCl7Zm9yKHZhciBhPXRoaXMucGFyZW50Tm9kZTthJiZhLm5vZGVUeXBlIT09dy5FTEVNRU5UX05PREU7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxnZXQgdGV4dENvbnRlbnQoKXtmb3IodmFyIGE9IiIsYj10aGlzLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpYi5ub2RlVHlwZSE9dy5DT01NRU5UX05PREUmJihhKz1iLnRleHRDb250ZW50KTtyZXR1cm4gYX0sc2V0IHRleHRDb250ZW50KGEpe3ZhciBiPWkodGhpcy5jaGlsZE5vZGVzKTtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtpZihyKHRoaXMpLCIiIT09YSl7dmFyIGM9Sih0aGlzKS5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpO3RoaXMuYXBwZW5kQ2hpbGQoYyl9fWVsc2UgcSh0aGlzKSxKKHRoaXMpLnRleHRDb250ZW50PWE7dmFyIGQ9aSh0aGlzLmNoaWxkTm9kZXMpO0ModGhpcywiY2hpbGRMaXN0Iix7YWRkZWROb2RlczpkLHJlbW92ZWROb2RlczpifSksbShiKSxrKGQsdGhpcyl9LGdldCBjaGlsZE5vZGVzKCl7Zm9yKHZhciBhPW5ldyB5LGI9MCxjPXRoaXMuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZylhW2IrK109YztyZXR1cm4gYS5sZW5ndGg9YixhfSxjbG9uZU5vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHUodGhpcyxhKX0sY29udGFpbnM6ZnVuY3Rpb24oYSl7cmV0dXJuIHYodGhpcyxOKGEpKX0sY29tcGFyZURvY3VtZW50UG9zaXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIFUuY2FsbChKKHRoaXMpLEwoYSkpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPWkodGhpcy5jaGlsZE5vZGVzKSxkPVtdLGU9IiIsZj0wO2Y8Yy5sZW5ndGg7ZisrKWI9Y1tmXSxiLm5vZGVUeXBlPT09dy5URVhUX05PREU/YXx8Yi5kYXRhLmxlbmd0aD9hPyhlKz1iLmRhdGEsZC5wdXNoKGIpKTphPWI6dGhpcy5yZW1vdmVOb2RlKGIpOihhJiZkLmxlbmd0aCYmKGEuZGF0YSs9ZSx0KGQpKSxkPVtdLGU9IiIsYT1udWxsLGIuY2hpbGROb2Rlcy5sZW5ndGgmJmIubm9ybWFsaXplKCkpO2EmJmQubGVuZ3RoJiYoYS5kYXRhKz1lLHQoZCkpfX0pLEIodywib3duZXJEb2N1bWVudCIpLEgoUyx3LGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3IsZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwsdy5wcm90b3R5cGU9RihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx3LnByb3RvdHlwZSksYS5jbG9uZU5vZGU9dSxhLm5vZGVXYXNBZGRlZD1qLGEubm9kZVdhc1JlbW92ZWQ9bCxhLm5vZGVzV2VyZUFkZGVkPWssYS5ub2Rlc1dlcmVSZW1vdmVkPW0sYS5vcmlnaW5hbEluc2VydEJlZm9yZT1WLGEub3JpZ2luYWxSZW1vdmVDaGlsZD1XLGEuc25hcHNob3ROb2RlTGlzdD1pLGEud3JhcHBlcnMuTm9kZT13fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIsYyxkLGUpe2Zvcih2YXIgZj1udWxsLGc9bnVsbCxoPTAsaT1iLmxlbmd0aDtpPmg7aCsrKWY9cyhiW2hdKSwhZSYmKGc9cShmKS5yb290KSYmZyBpbnN0YW5jZW9mIGEud3JhcHBlcnMuU2hhZG93Um9vdHx8KGRbYysrXT1mKTtyZXR1cm4gY31mdW5jdGlvbiBjKGEpe3JldHVybiBTdHJpbmcoYSkucmVwbGFjZSgvXC9kZWVwXC8vZywiICIpfWZ1bmN0aW9uIGQoYSxiKXtmb3IodmFyIGMsZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KXtpZihlLm1hdGNoZXMoYikpcmV0dXJuIGU7aWYoYz1kKGUsYikpcmV0dXJuIGM7ZT1lLm5leHRFbGVtZW50U2libGluZ31yZXR1cm4gbnVsbH1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGEubWF0Y2hlcyhiKX1mdW5jdGlvbiBmKGEsYixjKXt2YXIgZD1hLmxvY2FsTmFtZTtyZXR1cm4gZD09PWJ8fGQ9PT1jJiZhLm5hbWVzcGFjZVVSST09PUR9ZnVuY3Rpb24gZygpe3JldHVybiEwfWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBhLmxvY2FsTmFtZT09PWN9ZnVuY3Rpb24gaShhLGIpe3JldHVybiBhLm5hbWVzcGFjZVVSST09PWJ9ZnVuY3Rpb24gaihhLGIsYyl7cmV0dXJuIGEubmFtZXNwYWNlVVJJPT09YiYmYS5sb2NhbE5hbWU9PT1jfWZ1bmN0aW9uIGsoYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1hLmZpcnN0RWxlbWVudENoaWxkO2c7KWQoZyxlLGYpJiYoY1tiKytdPWcpLGI9ayhnLGIsYyxkLGUsZiksZz1nLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gYn1mdW5jdGlvbiBsKGMsZCxlLGYsZyl7dmFyIGgsaT1yKHRoaXMpLGo9cSh0aGlzKS5yb290O2lmKGogaW5zdGFuY2VvZiBhLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIGsodGhpcyxkLGUsYyxmLG51bGwpO2lmKGkgaW5zdGFuY2VvZiBCKWg9dy5jYWxsKGksZik7ZWxzZXtpZighKGkgaW5zdGFuY2VvZiBDKSlyZXR1cm4gayh0aGlzLGQsZSxjLGYsbnVsbCk7aD12LmNhbGwoaSxmKX1yZXR1cm4gYihoLGQsZSxnKX1mdW5jdGlvbiBtKGMsZCxlLGYsZyl7dmFyIGgsaT1yKHRoaXMpLGo9cSh0aGlzKS5yb290O2lmKGogaW5zdGFuY2VvZiBhLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIGsodGhpcyxkLGUsYyxmLGcpO2lmKGkgaW5zdGFuY2VvZiBCKWg9eS5jYWxsKGksZixnKTtlbHNle2lmKCEoaSBpbnN0YW5jZW9mIEMpKXJldHVybiBrKHRoaXMsZCxlLGMsZixnKTtoPXguY2FsbChpLGYsZyl9cmV0dXJuIGIoaCxkLGUsITEpfWZ1bmN0aW9uIG4oYyxkLGUsZixnKXt2YXIgaCxpPXIodGhpcyksaj1xKHRoaXMpLnJvb3Q7aWYoaiBpbnN0YW5jZW9mIGEud3JhcHBlcnMuU2hhZG93Um9vdClyZXR1cm4gayh0aGlzLGQsZSxjLGYsZyk7aWYoaSBpbnN0YW5jZW9mIEIpaD1BLmNhbGwoaSxmLGcpO2Vsc2V7aWYoIShpIGluc3RhbmNlb2YgQykpcmV0dXJuIGsodGhpcyxkLGUsYyxmLGcpO2g9ei5jYWxsKGksZixnKX1yZXR1cm4gYihoLGQsZSwhMSl9dmFyIG89YS53cmFwcGVycy5IVE1MQ29sbGVjdGlvbixwPWEud3JhcHBlcnMuTm9kZUxpc3QscT1hLmdldFRyZWVTY29wZSxyPWEudW5zYWZlVW53cmFwLHM9YS53cmFwLHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcix1PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yLHY9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCx3PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsLHg9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUseT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUsej1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZU5TLEE9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lTlMsQj13aW5kb3cuRWxlbWVudCxDPXdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCxEPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIixFPXtxdWVyeVNlbGVjdG9yOmZ1bmN0aW9uKGIpe3ZhciBlPWMoYiksZj1lIT09YjtiPWU7dmFyIGcsaD1yKHRoaXMpLGk9cSh0aGlzKS5yb290O2lmKGkgaW5zdGFuY2VvZiBhLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIGQodGhpcyxiKTtpZihoIGluc3RhbmNlb2YgQilnPXModS5jYWxsKGgsYikpO2Vsc2V7aWYoIShoIGluc3RhbmNlb2YgQykpcmV0dXJuIGQodGhpcyxiKTtnPXModC5jYWxsKGgsYikpfXJldHVybiBnJiYhZiYmKGk9cShnKS5yb290KSYmaSBpbnN0YW5jZW9mIGEud3JhcHBlcnMuU2hhZG93Um9vdD9kKHRoaXMsYik6Z30scXVlcnlTZWxlY3RvckFsbDpmdW5jdGlvbihhKXt2YXIgYj1jKGEpLGQ9YiE9PWE7YT1iO3ZhciBmPW5ldyBwO3JldHVybiBmLmxlbmd0aD1sLmNhbGwodGhpcyxlLDAsZixhLGQpLGZ9fSxGPXtnZXRFbGVtZW50c0J5VGFnTmFtZTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgbyxjPSIqIj09PWE/ZzpmO3JldHVybiBiLmxlbmd0aD1tLmNhbGwodGhpcyxjLDAsYixhLGEudG9Mb3dlckNhc2UoKSksYn0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCIuIithKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWVOUzpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBvLGQ9bnVsbDtyZXR1cm4gZD0iKiI9PT1hPyIqIj09PWI/ZzpoOiIqIj09PWI/aTpqLGMubGVuZ3RoPW4uY2FsbCh0aGlzLGQsMCxjLGF8fG51bGwsYiksY319O2EuR2V0RWxlbWVudHNCeUludGVyZmFjZT1GLGEuU2VsZWN0b3JzSW50ZXJmYWNlPUV9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Zm9yKDthJiZhLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWE9YS5uZXh0U2libGluZztyZXR1cm4gYX1mdW5jdGlvbiBjKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEucHJldmlvdXNTaWJsaW5nO3JldHVybiBhfXZhciBkPWEud3JhcHBlcnMuTm9kZUxpc3QsZT17Z2V0IGZpcnN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGIodGhpcy5maXJzdENoaWxkKX0sZ2V0IGxhc3RFbGVtZW50Q2hpbGQoKXtyZXR1cm4gYyh0aGlzLmxhc3RDaGlsZCl9LGdldCBjaGlsZEVsZW1lbnRDb3VudCgpe2Zvcih2YXIgYT0wLGI9dGhpcy5maXJzdEVsZW1lbnRDaGlsZDtiO2I9Yi5uZXh0RWxlbWVudFNpYmxpbmcpYSsrO3JldHVybiBhfSxnZXQgY2hpbGRyZW4oKXtmb3IodmFyIGE9bmV3IGQsYj0wLGM9dGhpcy5maXJzdEVsZW1lbnRDaGlsZDtjO2M9Yy5uZXh0RWxlbWVudFNpYmxpbmcpYVtiKytdPWM7cmV0dXJuIGEubGVuZ3RoPWIsYX0scmVtb3ZlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYXJlbnROb2RlO2EmJmEucmVtb3ZlQ2hpbGQodGhpcyl9fSxmPXtnZXQgbmV4dEVsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGIodGhpcy5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c0VsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGModGhpcy5wcmV2aW91c1NpYmxpbmcpfX07YS5DaGlsZE5vZGVJbnRlcmZhY2U9ZixhLlBhcmVudE5vZGVJbnRlcmZhY2U9ZX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtkLmNhbGwodGhpcyxhKX12YXIgYz1hLkNoaWxkTm9kZUludGVyZmFjZSxkPWEud3JhcHBlcnMuTm9kZSxlPWEuZW5xdWV1ZU11dGF0aW9uLGY9YS5taXhpbixnPWEucmVnaXN0ZXJXcmFwcGVyLGg9YS51bnNhZmVVbndyYXAsaT13aW5kb3cuQ2hhcmFjdGVyRGF0YTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxmKGIucHJvdG90eXBlLHtnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoYSl7dGhpcy5kYXRhPWF9LGdldCBkYXRhKCl7cmV0dXJuIGgodGhpcykuZGF0YX0sc2V0IGRhdGEoYSl7dmFyIGI9aCh0aGlzKS5kYXRhO2UodGhpcywiY2hhcmFjdGVyRGF0YSIse29sZFZhbHVlOmJ9KSxoKHRoaXMpLmRhdGE9YX19KSxmKGIucHJvdG90eXBlLGMpLGcoaSxiLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGE+Pj4wfWZ1bmN0aW9uIGMoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGQ9YS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhLGU9KGEuZW5xdWV1ZU11dGF0aW9uLGEubWl4aW4pLGY9YS5yZWdpc3RlcldyYXBwZXIsZz13aW5kb3cuVGV4dDtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGMucHJvdG90eXBlLHtzcGxpdFRleHQ6ZnVuY3Rpb24oYSl7YT1iKGEpO3ZhciBjPXRoaXMuZGF0YTtpZihhPmMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW5kZXhTaXplRXJyb3IiKTt2YXIgZD1jLnNsaWNlKDAsYSksZT1jLnNsaWNlKGEpO3RoaXMuZGF0YT1kO3ZhciBmPXRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKTtyZXR1cm4gdGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYsdGhpcy5uZXh0U2libGluZyksZn19KSxmKGcsYyxkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGEud3JhcHBlcnMuVGV4dD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGIpe2EuaW52YWxpZGF0ZVJlbmRlcmVyQmFzZWRPbkF0dHJpYnV0ZShiLCJjbGFzcyIpfWZ1bmN0aW9uIGMoYSxiKXtkKGEsdGhpcyksdGhpcy5vd25lckVsZW1lbnRfPWJ9dmFyIGQ9YS5zZXRXcmFwcGVyLGU9YS51bnNhZmVVbndyYXA7Yy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmMsZ2V0IGxlbmd0aCgpe3JldHVybiBlKHRoaXMpLmxlbmd0aH0saXRlbTpmdW5jdGlvbihhKXtyZXR1cm4gZSh0aGlzKS5pdGVtKGEpfSxjb250YWluczpmdW5jdGlvbihhKXtyZXR1cm4gZSh0aGlzKS5jb250YWlucyhhKX0sYWRkOmZ1bmN0aW9uKCl7ZSh0aGlzKS5hZGQuYXBwbHkoZSh0aGlzKSxhcmd1bWVudHMpLGIodGhpcy5vd25lckVsZW1lbnRfKX0scmVtb3ZlOmZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmUuYXBwbHkoZSh0aGlzKSxhcmd1bWVudHMpLGIodGhpcy5vd25lckVsZW1lbnRfKX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dmFyIGE9ZSh0aGlzKS50b2dnbGUuYXBwbHkoZSh0aGlzKSxhcmd1bWVudHMpO3JldHVybiBiKHRoaXMub3duZXJFbGVtZW50XyksYX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS50b1N0cmluZygpfX0sYS53cmFwcGVycy5ET01Ub2tlbkxpc3Q9Y30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiLGMpe3ZhciBkPWIucGFyZW50Tm9kZTtpZihkJiZkLnNoYWRvd1Jvb3Qpe3ZhciBlPWEuZ2V0UmVuZGVyZXJGb3JIb3N0KGQpO2UuZGVwZW5kc09uQXR0cmlidXRlKGMpJiZlLmludmFsaWRhdGUoKX19ZnVuY3Rpb24gYyhhLGIsYyl7ayhhLCJhdHRyaWJ1dGVzIix7bmFtZTpiLG5hbWVzcGFjZTpudWxsLG9sZFZhbHVlOmN9KX1mdW5jdGlvbiBkKGEpe2cuY2FsbCh0aGlzLGEpfXZhciBlPWEuQ2hpbGROb2RlSW50ZXJmYWNlLGY9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGc9YS53cmFwcGVycy5Ob2RlLGg9YS53cmFwcGVycy5ET01Ub2tlbkxpc3QsaT1hLlBhcmVudE5vZGVJbnRlcmZhY2Usaj1hLlNlbGVjdG9yc0ludGVyZmFjZSxrPShhLmFkZFdyYXBOb2RlTGlzdE1ldGhvZCxhLmVucXVldWVNdXRhdGlvbiksbD1hLm1peGluLG09KGEub25lT2YsYS5yZWdpc3RlcldyYXBwZXIpLG49YS51bnNhZmVVbndyYXAsbz1hLndyYXBwZXJzLHA9d2luZG93LkVsZW1lbnQscT1bIm1hdGNoZXMiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciJdLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gcC5wcm90b3R5cGVbYV19KSxyPXFbMF0scz1wLnByb3RvdHlwZVtyXSx0PW5ldyBXZWFrTWFwO2QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZy5wcm90b3R5cGUpLGwoZC5wcm90b3R5cGUse2NyZWF0ZVNoYWRvd1Jvb3Q6ZnVuY3Rpb24oKXt2YXIgYj1uZXcgby5TaGFkb3dSb290KHRoaXMpO24odGhpcykucG9seW1lclNoYWRvd1Jvb3RfPWI7dmFyIGM9YS5nZXRSZW5kZXJlckZvckhvc3QodGhpcyk7cmV0dXJuIGMuaW52YWxpZGF0ZSgpLGJ9LGdldCBzaGFkb3dSb290KCl7cmV0dXJuIG4odGhpcykucG9seW1lclNoYWRvd1Jvb3RffHxudWxsfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxkKXt2YXIgZT1uKHRoaXMpLmdldEF0dHJpYnV0ZShhKTtuKHRoaXMpLnNldEF0dHJpYnV0ZShhLGQpLGModGhpcyxhLGUpLGIodGhpcyxhKX0scmVtb3ZlQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3ZhciBkPW4odGhpcykuZ2V0QXR0cmlidXRlKGEpO24odGhpcykucmVtb3ZlQXR0cmlidXRlKGEpLGModGhpcyxhLGQpLGIodGhpcyxhKX0sbWF0Y2hlczpmdW5jdGlvbihhKXtyZXR1cm4gcy5jYWxsKG4odGhpcyksYSl9LGdldCBjbGFzc0xpc3QoKXt2YXIgYT10LmdldCh0aGlzKTtyZXR1cm4gYXx8dC5zZXQodGhpcyxhPW5ldyBoKG4odGhpcykuY2xhc3NMaXN0LHRoaXMpKSxhfSxnZXQgY2xhc3NOYW1lKCl7cmV0dXJuIG4odGhpcykuY2xhc3NOYW1lfSxzZXQgY2xhc3NOYW1lKGEpe3RoaXMuc2V0QXR0cmlidXRlKCJjbGFzcyIsYSl9LGdldCBpZCgpe3JldHVybiBuKHRoaXMpLmlkfSxzZXQgaWQoYSl7dGhpcy5zZXRBdHRyaWJ1dGUoImlkIixhKX19KSxxLmZvckVhY2goZnVuY3Rpb24oYSl7Im1hdGNoZXMiIT09YSYmKGQucHJvdG90eXBlW2FdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1hdGNoZXMoYSl9KX0pLHAucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QmJihkLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PWQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QpLGwoZC5wcm90b3R5cGUsZSksbChkLnByb3RvdHlwZSxmKSxsKGQucHJvdG90eXBlLGkpLGwoZC5wcm90b3R5cGUsaiksbShwLGQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG51bGwsIngiKSksYS5pbnZhbGlkYXRlUmVuZGVyZXJCYXNlZE9uQXR0cmlidXRlPWIsYS5tYXRjaGVzTmFtZXM9cSxhLndyYXBwZXJzLkVsZW1lbnQ9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYSl7Y2FzZSImIjpyZXR1cm4iJmFtcDsiO2Nhc2UiPCI6cmV0dXJuIiZsdDsiO2Nhc2UiPiI6cmV0dXJuIiZndDsiO2Nhc2UnIic6cmV0dXJuIiZxdW90OyI7Y2FzZSJceGEwIjpyZXR1cm4iJm5ic3A7In19ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5yZXBsYWNlKEEsYil9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5yZXBsYWNlKEIsYil9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9e30sYz0wO2M8YS5sZW5ndGg7YysrKWJbYVtjXV09ITA7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIpe3N3aXRjaChhLm5vZGVUeXBlKXtjYXNlIE5vZGUuRUxFTUVOVF9OT0RFOmZvcih2YXIgZSxmPWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpLGg9IjwiK2YsaT1hLmF0dHJpYnV0ZXMsaj0wO2U9aVtqXTtqKyspaCs9IiAiK2UubmFtZSsnPSInK2MoZS52YWx1ZSkrJyInO3JldHVybiBoKz0iPiIsQ1tmXT9oOmgrZyhhKSsiPC8iK2YrIj4iO2Nhc2UgTm9kZS5URVhUX05PREU6dmFyIGs9YS5kYXRhO3JldHVybiBiJiZEW2IubG9jYWxOYW1lXT9rOmQoayk7Y2FzZSBOb2RlLkNPTU1FTlRfTk9ERTpyZXR1cm4iPCEtLSIrYS5kYXRhKyItLT4iO2RlZmF1bHQ6dGhyb3cgY29uc29sZS5lcnJvcihhKSxuZXcgRXJyb3IoIm5vdCBpbXBsZW1lbnRlZCIpfX1mdW5jdGlvbiBnKGEpe2EgaW5zdGFuY2VvZiB6LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJihhPWEuY29udGVudCk7Zm9yKHZhciBiPSIiLGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWIrPWYoYyxhKTtyZXR1cm4gYn1mdW5jdGlvbiBoKGEsYixjKXt2YXIgZD1jfHwiZGl2IjthLnRleHRDb250ZW50PSIiO3ZhciBlPXgoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZCkpO2UuaW5uZXJIVE1MPWI7Zm9yKHZhciBmO2Y9ZS5maXJzdENoaWxkOylhLmFwcGVuZENoaWxkKHkoZikpfWZ1bmN0aW9uIGkoYSl7by5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gaihhLGIpe3ZhciBjPXgoYS5jbG9uZU5vZGUoITEpKTtjLmlubmVySFRNTD1iO2Zvcih2YXIgZCxlPXgoZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtkPWMuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChkKTtyZXR1cm4geShlKX1mdW5jdGlvbiBrKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx3KHRoaXMpW2JdfX1mdW5jdGlvbiBsKGEpe3AoaSxhLGsoYSkpfWZ1bmN0aW9uIG0oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLGIse2dldDprKGIpLHNldDpmdW5jdGlvbihjKXthLnJlbmRlckFsbFBlbmRpbmcoKSx3KHRoaXMpW2JdPWN9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9ZnVuY3Rpb24gbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsYix7dmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdyh0aGlzKVtiXS5hcHBseSh3KHRoaXMpLGFyZ3VtZW50cyl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIG89YS53cmFwcGVycy5FbGVtZW50LHA9YS5kZWZpbmVHZXR0ZXIscT1hLmVucXVldWVNdXRhdGlvbixyPWEubWl4aW4scz1hLm5vZGVzV2VyZUFkZGVkLHQ9YS5ub2Rlc1dlcmVSZW1vdmVkLHU9YS5yZWdpc3RlcldyYXBwZXIsdj1hLnNuYXBzaG90Tm9kZUxpc3Qsdz1hLnVuc2FmZVVud3JhcCx4PWEudW53cmFwLHk9YS53cmFwLHo9YS53cmFwcGVycyxBPS9bJlx1MDBBMCJdL2csQj0vWyZcdTAwQTA8Pl0vZyxDPWUoWyJhcmVhIiwiYmFzZSIsImJyIiwiY29sIiwiY29tbWFuZCIsImVtYmVkIiwiaHIiLCJpbWciLCJpbnB1dCIsImtleWdlbiIsImxpbmsiLCJtZXRhIiwicGFyYW0iLCJzb3VyY2UiLCJ0cmFjayIsIndiciJdKSxEPWUoWyJzdHlsZSIsInNjcmlwdCIsInhtcCIsImlmcmFtZSIsIm5vZW1iZWQiLCJub2ZyYW1lcyIsInBsYWludGV4dCIsIm5vc2NyaXB0Il0pLEU9L01TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksRj13aW5kb3cuSFRNTEVsZW1lbnQsRz13aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudDtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxyKGkucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGcodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7aWYoRSYmRFt0aGlzLmxvY2FsTmFtZV0pcmV0dXJuIHZvaWQodGhpcy50ZXh0Q29udGVudD1hKTt2YXIgYj12KHRoaXMuY2hpbGROb2Rlcyk7dGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKT90aGlzIGluc3RhbmNlb2Ygei5IVE1MVGVtcGxhdGVFbGVtZW50P2godGhpcy5jb250ZW50LGEpOmgodGhpcyxhLHRoaXMudGFnTmFtZSk6IUcmJnRoaXMgaW5zdGFuY2VvZiB6LkhUTUxUZW1wbGF0ZUVsZW1lbnQ/aCh0aGlzLmNvbnRlbnQsYSk6dyh0aGlzKS5pbm5lckhUTUw9YTt2YXIgYz12KHRoaXMuY2hpbGROb2Rlcyk7cSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmMscmVtb3ZlZE5vZGVzOmJ9KSx0KGIpLHMoYyx0aGlzKX0sZ2V0IG91dGVySFRNTCgpe3JldHVybiBmKHRoaXMsdGhpcy5wYXJlbnROb2RlKX0sc2V0IG91dGVySFRNTChhKXt2YXIgYj10aGlzLnBhcmVudE5vZGU7aWYoYil7Yi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKTt2YXIgYz1qKGIsYSk7Yi5yZXBsYWNlQ2hpbGQoYyx0aGlzKX19LGluc2VydEFkamFjZW50SFRNTDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7c3dpdGNoKFN0cmluZyhhKS50b0xvd2VyQ2FzZSgpKXtjYXNlImJlZm9yZWJlZ2luIjpjPXRoaXMucGFyZW50Tm9kZSxkPXRoaXM7YnJlYWs7Y2FzZSJhZnRlcmVuZCI6Yz10aGlzLnBhcmVudE5vZGUsZD10aGlzLm5leHRTaWJsaW5nO2JyZWFrO2Nhc2UiYWZ0ZXJiZWdpbiI6Yz10aGlzLGQ9dGhpcy5maXJzdENoaWxkO2JyZWFrO2Nhc2UiYmVmb3JlZW5kIjpjPXRoaXMsZD1udWxsO2JyZWFrO2RlZmF1bHQ6cmV0dXJufXZhciBlPWooYyxiKTtjLmluc2VydEJlZm9yZShlLGQpfSxnZXQgaGlkZGVuKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKCJoaWRkZW4iKX0sc2V0IGhpZGRlbihhKXthP3RoaXMuc2V0QXR0cmlidXRlKCJoaWRkZW4iLCIiKTp0aGlzLnJlbW92ZUF0dHJpYnV0ZSgiaGlkZGVuIil9fSksWyJjbGllbnRIZWlnaHQiLCJjbGllbnRMZWZ0IiwiY2xpZW50VG9wIiwiY2xpZW50V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0VG9wIiwib2Zmc2V0V2lkdGgiLCJzY3JvbGxIZWlnaHQiLCJzY3JvbGxXaWR0aCJdLmZvckVhY2gobCksWyJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIl0uZm9yRWFjaChtKSxbImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdldENsaWVudFJlY3RzIiwic2Nyb2xsSW50b1ZpZXciXS5mb3JFYWNoKG4pLHUoRixpLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImIiKSksYS53cmFwcGVycy5IVE1MRWxlbWVudD1pLGEuZ2V0SW5uZXJIVE1MPWcsYS5zZXRJbm5lckhUTUw9aH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bnNhZmVVbndyYXAsZz1hLndyYXAsaD13aW5kb3cuSFRNTENhbnZhc0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0Q29udGV4dDpmdW5jdGlvbigpe3ZhciBhPWYodGhpcykuZ2V0Q29udGV4dC5hcHBseShmKHRoaXMpLGFyZ3VtZW50cyk7cmV0dXJuIGEmJmcoYSl9fSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikpLGEud3JhcHBlcnMuSFRNTENhbnZhc0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9d2luZG93LkhUTUxDb250ZW50RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpiLGdldCBzZWxlY3QoKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpfSxzZXQgc2VsZWN0KGEpe3RoaXMuc2V0QXR0cmlidXRlKCJzZWxlY3QiLGEpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXtjLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGEsYiksInNlbGVjdCI9PT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKSYmdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoITApfX0pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9d2luZG93LkhUTUxGb3JtRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgZWxlbWVudHMoKXtyZXR1cm4gZihnKHRoaXMpLmVsZW1lbnRzKX19KSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIikpLGEud3JhcHBlcnMuSFRNTEZvcm1FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGMpKXRocm93IG5ldyBUeXBlRXJyb3IoIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3ZhciBlPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpO2QuY2FsbCh0aGlzLGUpLGcoZSx0aGlzKSx2b2lkIDAhPT1hJiYoZS53aWR0aD1hKSx2b2lkIDAhPT1iJiYoZS5oZWlnaHQ9Yil9dmFyIGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLnJld3JhcCxoPXdpbmRvdy5IVE1MSW1hZ2VFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpKSxjLnByb3RvdHlwZT1iLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxJbWFnZUVsZW1lbnQ9YixhLndyYXBwZXJzLkltYWdlPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPShhLm1peGluLGEud3JhcHBlcnMuTm9kZUxpc3QsYS5yZWdpc3RlcldyYXBwZXIpLGU9d2luZG93LkhUTUxTaGFkb3dFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWIsZSYmZChlLGIpLGEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYS5kZWZhdWx0VmlldylyZXR1cm4gYTt2YXIgYj1sLmdldChhKTtpZighYil7Zm9yKGI9YS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpO2IubGFzdENoaWxkOyliLnJlbW92ZUNoaWxkKGIubGFzdENoaWxkKTtsLnNldChhLGIpfXJldHVybiBifWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBjLGQ9YihhLm93bmVyRG9jdW1lbnQpLGU9aShkLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Yz1hLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGV9ZnVuY3Rpb24gZChhKXtpZihlLmNhbGwodGhpcyxhKSwhbSl7dmFyIGI9YyhhKTtrLnNldCh0aGlzLGooYikpfX12YXIgZT1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGY9YS5taXhpbixnPWEucmVnaXN0ZXJXcmFwcGVyLGg9YS51bnNhZmVVbndyYXAsaT1hLnVud3JhcCxqPWEud3JhcCxrPW5ldyBXZWFrTWFwLGw9bmV3IFdlYWtNYXAsbT13aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudDtkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSxmKGQucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpkLGdldCBjb250ZW50KCl7cmV0dXJuIG0/aihoKHRoaXMpLmNvbnRlbnQpOmsuZ2V0KHRoaXMpfX0pLG0mJmcobSxkKSxhLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQ9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5yZWdpc3RlcldyYXBwZXIsZT13aW5kb3cuSFRNTE1lZGlhRWxlbWVudDtlJiYoYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChlLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSksYS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50PWIpfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGMoYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGI9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpKTtkLmNhbGwodGhpcyxiKSxnKGIsdGhpcyksYi5zZXRBdHRyaWJ1dGUoInByZWxvYWQiLCJhdXRvIiksdm9pZCAwIT09YSYmYi5zZXRBdHRyaWJ1dGUoInNyYyIsYSl9dmFyIGQ9YS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxBdWRpb0VsZW1lbnQ7aCYmKGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIikpLGMucHJvdG90eXBlPWIucHJvdG90eXBlLGEud3JhcHBlcnMuSFRNTEF1ZGlvRWxlbWVudD1iLGEud3JhcHBlcnMuQXVkaW89Yyl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEucmVwbGFjZSgvXHMrL2csIiAiKS50cmltKCl9ZnVuY3Rpb24gYyhhKXtlLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBkKGEsYixjLGYpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3ZhciBnPWkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO2UuY2FsbCh0aGlzLGcpLGgoZyx0aGlzKSx2b2lkIDAhPT1hJiYoZy50ZXh0PWEpLHZvaWQgMCE9PWImJmcuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsYiksYz09PSEwJiZnLnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCIiKSxnLnNlbGVjdGVkPWY9PT0hMH12YXIgZT1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGY9YS5taXhpbixnPWEucmVnaXN0ZXJXcmFwcGVyLGg9YS5yZXdyYXAsaT1hLnVud3JhcCxqPWEud3JhcCxrPXdpbmRvdy5IVE1MT3B0aW9uRWxlbWVudDtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSxmKGMucHJvdG90eXBlLHtnZXQgdGV4dCgpe3JldHVybiBiKHRoaXMudGV4dENvbnRlbnQpfSxzZXQgdGV4dChhKXt0aGlzLnRleHRDb250ZW50PWIoU3RyaW5nKGEpKX0sZ2V0IGZvcm0oKXtyZXR1cm4gaihpKHRoaXMpLmZvcm0pfX0pLGcoayxjLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKSxkLnByb3RvdHlwZT1jLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxPcHRpb25FbGVtZW50PWMsYS53cmFwcGVycy5PcHRpb249ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLndyYXAsaD13aW5kb3cuSFRNTFNlbGVjdEVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7YWRkOmZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBiJiYoYj1mKGIpKSxmKHRoaXMpLmFkZChmKGEpLGIpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/dm9pZCBjLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKTooIm9iamVjdCI9PXR5cGVvZiBhJiYoYT1mKGEpKSx2b2lkIGYodGhpcykucmVtb3ZlKGEpKX0sZ2V0IGZvcm0oKXtyZXR1cm4gZyhmKHRoaXMpLmZvcm0pfX0pLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpKSxhLndyYXBwZXJzLkhUTUxTZWxlY3RFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS53cmFwLGg9YS53cmFwSFRNTENvbGxlY3Rpb24saT13aW5kb3cuSFRNTFRhYmxlRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY2FwdGlvbigpe3JldHVybiBnKGYodGhpcykuY2FwdGlvbil9LGNyZWF0ZUNhcHRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZUNhcHRpb24oKSl9LGdldCB0SGVhZCgpe3JldHVybiBnKGYodGhpcykudEhlYWQpfSxjcmVhdGVUSGVhZDpmdW5jdGlvbigpe3JldHVybiBnKGYodGhpcykuY3JlYXRlVEhlYWQoKSl9LGNyZWF0ZVRGb290OmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVURm9vdCgpKX0sZ2V0IHRGb290KCl7cmV0dXJuIGcoZih0aGlzKS50Rm9vdCl9LGdldCB0Qm9kaWVzKCl7cmV0dXJuIGgoZih0aGlzKS50Qm9kaWVzKX0sY3JlYXRlVEJvZHk6ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZVRCb2R5KCkpfSxnZXQgcm93cygpe3JldHVybiBoKGYodGhpcykucm93cyl9LGluc2VydFJvdzpmdW5jdGlvbihhKXtyZXR1cm4gZyhmKHRoaXMpLmluc2VydFJvdyhhKSl9fSksZShpLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKSksYS53cmFwcGVycy5IVE1MVGFibGVFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcEhUTUxDb2xsZWN0aW9uLGc9YS51bndyYXAsaD1hLndyYXAsaT13aW5kb3cuSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6YixnZXQgcm93cygpe3JldHVybiBmKGcodGhpcykucm93cyl9LGluc2VydFJvdzpmdW5jdGlvbihhKXtyZXR1cm4gaChnKHRoaXMpLmluc2VydFJvdyhhKSl9fSksZShpLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGhlYWQiKSksYS53cmFwcGVycy5IVE1MVGFibGVTZWN0aW9uRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9YS53cmFwLGk9d2luZG93LkhUTUxUYWJsZVJvd0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNlbGxzKCl7cmV0dXJuIGYoZyh0aGlzKS5jZWxscyl9LGluc2VydENlbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIGgoZyh0aGlzKS5pbnNlcnRDZWxsKGEpKX19KSxlKGksYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpKSxhLndyYXBwZXJzLkhUTUxUYWJsZVJvd0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYS5sb2NhbE5hbWUpe2Nhc2UiY29udGVudCI6cmV0dXJuIG5ldyBjKGEpO2Nhc2Uic2hhZG93IjpyZXR1cm4gbmV3IGUoYSk7Y2FzZSJ0ZW1wbGF0ZSI6cmV0dXJuIG5ldyBmKGEpfWQuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsZj1hLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQsZz0oYS5taXhpbixhLnJlZ2lzdGVyV3JhcHBlciksaD13aW5kb3cuSFRNTFVua25vd25FbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGcoaCxiKSxhLndyYXBwZXJzLkhUTUxVbmtub3duRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLndyYXBwZXJzLkVsZW1lbnQsYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5yZWdpc3Rlck9iamVjdCxlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZSwidGl0bGUiKSxnPWQoZiksaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZy5wcm90b3R5cGUpLmNvbnN0cnVjdG9yO2lmKCEoImNsYXNzTGlzdCJpbiBmKSl7dmFyIGk9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLnByb3RvdHlwZSwiY2xhc3NMaXN0Iik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMucHJvdG90eXBlLCJjbGFzc0xpc3QiLGkpLGRlbGV0ZSBiLnByb3RvdHlwZS5jbGFzc0xpc3R9YS53cmFwcGVycy5TVkdFbGVtZW50PWh9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7bS5jYWxsKHRoaXMsYSl9dmFyIGM9YS5taXhpbixkPWEucmVnaXN0ZXJXcmFwcGVyLGU9YS51bndyYXAsZj1hLndyYXAsZz13aW5kb3cuU1ZHVXNlRWxlbWVudCxoPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsaT1mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhoLCJnIikpLGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGgsInVzZSIpLGs9aS5jb25zdHJ1Y3RvcixsPU9iamVjdC5nZXRQcm90b3R5cGVPZihrLnByb3RvdHlwZSksbT1sLmNvbnN0cnVjdG9yO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobCksImluc3RhbmNlUm9vdCJpbiBqJiZjKGIucHJvdG90eXBlLHtnZXQgaW5zdGFuY2VSb290KCl7cmV0dXJuIGYoZSh0aGlzKS5pbnN0YW5jZVJvb3QpfSxnZXQgYW5pbWF0ZWRJbnN0YW5jZVJvb3QoKXtyZXR1cm4gZihlKHRoaXMpLmFuaW1hdGVkSW5zdGFuY2VSb290KX19KSxkKGcsYixqKSxhLndyYXBwZXJzLlNWR1VzZUVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bnNhZmVVbndyYXAsZz1hLndyYXAsaD13aW5kb3cuU1ZHRWxlbWVudEluc3RhbmNlO2gmJihiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY29ycmVzcG9uZGluZ0VsZW1lbnQoKXtyZXR1cm4gZyhmKHRoaXMpLmNvcnJlc3BvbmRpbmdFbGVtZW50KQp9LGdldCBjb3JyZXNwb25kaW5nVXNlRWxlbWVudCgpe3JldHVybiBnKGYodGhpcykuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQpfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiBnKGYodGhpcykucGFyZW50Tm9kZSl9LGdldCBjaGlsZE5vZGVzKCl7dGhyb3cgbmV3IEVycm9yKCJOb3QgaW1wbGVtZW50ZWQiKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gZyhmKHRoaXMpLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIGcoZih0aGlzKS5sYXN0Q2hpbGQpfSxnZXQgcHJldmlvdXNTaWJsaW5nKCl7cmV0dXJuIGcoZih0aGlzKS5wcmV2aW91c1NpYmxpbmcpfSxnZXQgbmV4dFNpYmxpbmcoKXtyZXR1cm4gZyhmKHRoaXMpLm5leHRTaWJsaW5nKX19KSxlKGgsYiksYS53cmFwcGVycy5TVkdFbGVtZW50SW5zdGFuY2U9Yil9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZShhLHRoaXMpfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEuc2V0V3JhcHBlcixmPWEudW5zYWZlVW53cmFwLGc9YS51bndyYXAsaD1hLnVud3JhcElmTmVlZGVkLGk9YS53cmFwLGo9d2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtjKGIucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGkoZih0aGlzKS5jYW52YXMpfSxkcmF3SW1hZ2U6ZnVuY3Rpb24oKXthcmd1bWVudHNbMF09aChhcmd1bWVudHNbMF0pLGYodGhpcykuZHJhd0ltYWdlLmFwcGx5KGYodGhpcyksYXJndW1lbnRzKX0sY3JlYXRlUGF0dGVybjpmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09Zyhhcmd1bWVudHNbMF0pLGYodGhpcykuY3JlYXRlUGF0dGVybi5hcHBseShmKHRoaXMpLGFyZ3VtZW50cyl9fSksZChqLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKSksYS53cmFwcGVycy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtlKGEsdGhpcyl9dmFyIGM9YS5taXhpbixkPWEucmVnaXN0ZXJXcmFwcGVyLGU9YS5zZXRXcmFwcGVyLGY9YS51bnNhZmVVbndyYXAsZz1hLnVud3JhcElmTmVlZGVkLGg9YS53cmFwLGk9d2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dDtpZihpKXtjKGIucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGgoZih0aGlzKS5jYW52YXMpfSx0ZXhJbWFnZTJEOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzVdPWcoYXJndW1lbnRzWzVdKSxmKHRoaXMpLnRleEltYWdlMkQuYXBwbHkoZih0aGlzKSxhcmd1bWVudHMpfSx0ZXhTdWJJbWFnZTJEOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzZdPWcoYXJndW1lbnRzWzZdKSxmKHRoaXMpLnRleFN1YkltYWdlMkQuYXBwbHkoZih0aGlzKSxhcmd1bWVudHMpfX0pO3ZhciBqPS9XZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk/e2RyYXdpbmdCdWZmZXJIZWlnaHQ6bnVsbCxkcmF3aW5nQnVmZmVyV2lkdGg6bnVsbH06e307ZChpLGIsaiksYS53cmFwcGVycy5XZWJHTFJlbmRlcmluZ0NvbnRleHQ9Yn19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZChhLHRoaXMpfXZhciBjPWEucmVnaXN0ZXJXcmFwcGVyLGQ9YS5zZXRXcmFwcGVyLGU9YS51bnNhZmVVbndyYXAsZj1hLnVud3JhcCxnPWEudW53cmFwSWZOZWVkZWQsaD1hLndyYXAsaT13aW5kb3cuUmFuZ2U7Yi5wcm90b3R5cGU9e2dldCBzdGFydENvbnRhaW5lcigpe3JldHVybiBoKGUodGhpcykuc3RhcnRDb250YWluZXIpfSxnZXQgZW5kQ29udGFpbmVyKCl7cmV0dXJuIGgoZSh0aGlzKS5lbmRDb250YWluZXIpfSxnZXQgY29tbW9uQW5jZXN0b3JDb250YWluZXIoKXtyZXR1cm4gaChlKHRoaXMpLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKX0sc2V0U3RhcnQ6ZnVuY3Rpb24oYSxiKXtlKHRoaXMpLnNldFN0YXJ0KGcoYSksYil9LHNldEVuZDpmdW5jdGlvbihhLGIpe2UodGhpcykuc2V0RW5kKGcoYSksYil9LHNldFN0YXJ0QmVmb3JlOmZ1bmN0aW9uKGEpe2UodGhpcykuc2V0U3RhcnRCZWZvcmUoZyhhKSl9LHNldFN0YXJ0QWZ0ZXI6ZnVuY3Rpb24oYSl7ZSh0aGlzKS5zZXRTdGFydEFmdGVyKGcoYSkpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oYSl7ZSh0aGlzKS5zZXRFbmRCZWZvcmUoZyhhKSl9LHNldEVuZEFmdGVyOmZ1bmN0aW9uKGEpe2UodGhpcykuc2V0RW5kQWZ0ZXIoZyhhKSl9LHNlbGVjdE5vZGU6ZnVuY3Rpb24oYSl7ZSh0aGlzKS5zZWxlY3ROb2RlKGcoYSkpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oYSl7ZSh0aGlzKS5zZWxlY3ROb2RlQ29udGVudHMoZyhhKSl9LGNvbXBhcmVCb3VuZGFyeVBvaW50czpmdW5jdGlvbihhLGIpe3JldHVybiBlKHRoaXMpLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLGYoYikpfSxleHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gaChlKHRoaXMpLmV4dHJhY3RDb250ZW50cygpKX0sY2xvbmVDb250ZW50czpmdW5jdGlvbigpe3JldHVybiBoKGUodGhpcykuY2xvbmVDb250ZW50cygpKX0saW5zZXJ0Tm9kZTpmdW5jdGlvbihhKXtlKHRoaXMpLmluc2VydE5vZGUoZyhhKSl9LHN1cnJvdW5kQ29udGVudHM6ZnVuY3Rpb24oYSl7ZSh0aGlzKS5zdXJyb3VuZENvbnRlbnRzKGcoYSkpfSxjbG9uZVJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuIGgoZSh0aGlzKS5jbG9uZVJhbmdlKCkpfSxpc1BvaW50SW5SYW5nZTpmdW5jdGlvbihhLGIpe3JldHVybiBlKHRoaXMpLmlzUG9pbnRJblJhbmdlKGcoYSksYil9LGNvbXBhcmVQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBlKHRoaXMpLmNvbXBhcmVQb2ludChnKGEpLGIpfSxpbnRlcnNlY3RzTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gZSh0aGlzKS5pbnRlcnNlY3RzTm9kZShnKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS50b1N0cmluZygpfX0saS5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JiYoYi5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBoKGUodGhpcykuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGEpKX0pLGMod2luZG93LlJhbmdlLGIsZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSksYS53cmFwcGVycy5SYW5nZT1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYz1hLlBhcmVudE5vZGVJbnRlcmZhY2UsZD1hLlNlbGVjdG9yc0ludGVyZmFjZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyT2JqZWN0LGc9Zihkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2UoZy5wcm90b3R5cGUsYyksZShnLnByb3RvdHlwZSxkKSxlKGcucHJvdG90eXBlLGIpO3ZhciBoPWYoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikpO2Eud3JhcHBlcnMuQ29tbWVudD1oLGEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudD1nfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWwoayhhKS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Yy5jYWxsKHRoaXMsYiksaShiLHRoaXMpO3ZhciBlPWEuc2hhZG93Um9vdDtuLnNldCh0aGlzLGUpLHRoaXMudHJlZVNjb3BlXz1uZXcgZCh0aGlzLGcoZXx8YSkpLG0uc2V0KHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50LGQ9YS5UcmVlU2NvcGUsZT1hLmVsZW1lbnRGcm9tUG9pbnQsZj1hLmdldElubmVySFRNTCxnPWEuZ2V0VHJlZVNjb3BlLGg9YS5taXhpbixpPWEucmV3cmFwLGo9YS5zZXRJbm5lckhUTUwsaz1hLnVuc2FmZVVud3JhcCxsPWEudW53cmFwLG09bmV3IFdlYWtNYXAsbj1uZXcgV2Vha01hcCxvPS9bIFx0XG5cclxmXS87Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksaChiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6YixnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGYodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7aih0aGlzLGEpLHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9LGdldCBvbGRlclNoYWRvd1Jvb3QoKXtyZXR1cm4gbi5nZXQodGhpcyl8fG51bGx9LGdldCBob3N0KCl7cmV0dXJuIG0uZ2V0KHRoaXMpfHxudWxsfSxpbnZhbGlkYXRlU2hhZG93UmVuZGVyZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbS5nZXQodGhpcykuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9LGVsZW1lbnRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZSh0aGlzLHRoaXMub3duZXJEb2N1bWVudCxhLGIpfSxnZXRFbGVtZW50QnlJZDpmdW5jdGlvbihhKXtyZXR1cm4gby50ZXN0KGEpP251bGw6dGhpcy5xdWVyeVNlbGVjdG9yKCdbaWQ9IicrYSsnIl0nKX19KSxhLndyYXBwZXJzLlNoYWRvd1Jvb3Q9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXthLnByZXZpb3VzU2libGluZ189YS5wcmV2aW91c1NpYmxpbmcsYS5uZXh0U2libGluZ189YS5uZXh0U2libGluZyxhLnBhcmVudE5vZGVfPWEucGFyZW50Tm9kZX1mdW5jdGlvbiBjKGMsZSxmKXt2YXIgZz1IKGMpLGg9SChlKSxpPWY/SChmKTpudWxsO2lmKGQoZSksYihlKSxmKWMuZmlyc3RDaGlsZD09PWYmJihjLmZpcnN0Q2hpbGRfPWYpLGYucHJldmlvdXNTaWJsaW5nXz1mLnByZXZpb3VzU2libGluZztlbHNle2MubGFzdENoaWxkXz1jLmxhc3RDaGlsZCxjLmxhc3RDaGlsZD09PWMuZmlyc3RDaGlsZCYmKGMuZmlyc3RDaGlsZF89Yy5maXJzdENoaWxkKTt2YXIgaj1JKGcubGFzdENoaWxkKTtqJiYoai5uZXh0U2libGluZ189ai5uZXh0U2libGluZyl9YS5vcmlnaW5hbEluc2VydEJlZm9yZS5jYWxsKGcsaCxpKX1mdW5jdGlvbiBkKGMpe3ZhciBkPUgoYyksZT1kLnBhcmVudE5vZGU7aWYoZSl7dmFyIGY9SShlKTtiKGMpLGMucHJldmlvdXNTaWJsaW5nJiYoYy5wcmV2aW91c1NpYmxpbmcubmV4dFNpYmxpbmdfPWMpLGMubmV4dFNpYmxpbmcmJihjLm5leHRTaWJsaW5nLnByZXZpb3VzU2libGluZ189YyksZi5sYXN0Q2hpbGQ9PT1jJiYoZi5sYXN0Q2hpbGRfPWMpLGYuZmlyc3RDaGlsZD09PWMmJihmLmZpcnN0Q2hpbGRfPWMpLGEub3JpZ2luYWxSZW1vdmVDaGlsZC5jYWxsKGUsZCl9fWZ1bmN0aW9uIGUoYSl7Si5zZXQoYSxbXSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1KLmdldChhKTtyZXR1cm4gYnx8Si5zZXQoYSxiPVtdKSxifWZ1bmN0aW9uIGcoYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYn1mdW5jdGlvbiBoKCl7Zm9yKHZhciBhPTA7YTxOLmxlbmd0aDthKyspe3ZhciBiPU5bYV0sYz1iLnBhcmVudFJlbmRlcmVyO2MmJmMuZGlydHl8fGIucmVuZGVyKCl9Tj1bXX1mdW5jdGlvbiBpKCl7eT1udWxsLGgoKX1mdW5jdGlvbiBqKGEpe3ZhciBiPUwuZ2V0KGEpO3JldHVybiBifHwoYj1uZXcgbihhKSxMLnNldChhLGIpKSxifWZ1bmN0aW9uIGsoYSl7dmFyIGI9RShhKS5yb290O3JldHVybiBiIGluc3RhbmNlb2YgRD9iOm51bGx9ZnVuY3Rpb24gbChhKXtyZXR1cm4gaihhLmhvc3QpfWZ1bmN0aW9uIG0oYSl7dGhpcy5za2lwPSExLHRoaXMubm9kZT1hLHRoaXMuY2hpbGROb2Rlcz1bXX1mdW5jdGlvbiBuKGEpe3RoaXMuaG9zdD1hLHRoaXMuZGlydHk9ITEsdGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpLHRoaXMuYXNzb2NpYXRlTm9kZShhKX1mdW5jdGlvbiBvKGEpe2Zvcih2YXIgYj1bXSxjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyl2KGMpP2IucHVzaC5hcHBseShiLGYoYykpOmIucHVzaChjKTtyZXR1cm4gYn1mdW5jdGlvbiBwKGEpe2lmKGEgaW5zdGFuY2VvZiBCKXJldHVybiBhO2lmKGEgaW5zdGFuY2VvZiBBKXJldHVybiBudWxsO2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpe3ZhciBjPXAoYik7aWYoYylyZXR1cm4gY31yZXR1cm4gbnVsbH1mdW5jdGlvbiBxKGEsYil7ZihiKS5wdXNoKGEpO3ZhciBjPUsuZ2V0KGEpO2M/Yy5wdXNoKGIpOksuc2V0KGEsW2JdKX1mdW5jdGlvbiByKGEpe3JldHVybiBLLmdldChhKX1mdW5jdGlvbiBzKGEpe0suc2V0KGEsdm9pZCAwKX1mdW5jdGlvbiB0KGEsYil7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpO2lmKCFjKXJldHVybiEwO2lmKGM9Yy50cmltKCksIWMpcmV0dXJuITA7aWYoIShhIGluc3RhbmNlb2YgeikpcmV0dXJuITE7aWYoIVAudGVzdChjKSlyZXR1cm4hMTt0cnl7cmV0dXJuIGEubWF0Y2hlcyhjKX1jYXRjaChkKXtyZXR1cm4hMX19ZnVuY3Rpb24gdShhLGIpe3ZhciBjPXIoYik7cmV0dXJuIGMmJmNbYy5sZW5ndGgtMV09PT1hfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBBfHxhIGluc3RhbmNlb2YgQn1mdW5jdGlvbiB3KGEpe3JldHVybiBhLnNoYWRvd1Jvb3R9ZnVuY3Rpb24geChhKXtmb3IodmFyIGI9W10sYz1hLnNoYWRvd1Jvb3Q7YztjPWMub2xkZXJTaGFkb3dSb290KWIucHVzaChjKTtyZXR1cm4gYn12YXIgeSx6PWEud3JhcHBlcnMuRWxlbWVudCxBPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LEI9YS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudCxDPWEud3JhcHBlcnMuTm9kZSxEPWEud3JhcHBlcnMuU2hhZG93Um9vdCxFPShhLmFzc2VydCxhLmdldFRyZWVTY29wZSksRj0oYS5taXhpbixhLm9uZU9mKSxHPWEudW5zYWZlVW53cmFwLEg9YS51bndyYXAsST1hLndyYXAsSj1uZXcgV2Vha01hcCxLPW5ldyBXZWFrTWFwLEw9bmV3IFdlYWtNYXAsTT1GKHdpbmRvdyxbInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNldFRpbWVvdXQiXSksTj1bXSxPPW5ldyBBcnJheVNwbGljZTtPLmVxdWFscz1mdW5jdGlvbihhLGIpe3JldHVybiBIKGEubm9kZSk9PT1ifSxtLnByb3RvdHlwZT17YXBwZW5kOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBtKGEpO3JldHVybiB0aGlzLmNoaWxkTm9kZXMucHVzaChiKSxifSxzeW5jOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLnNraXApe2Zvcih2YXIgYj10aGlzLm5vZGUsZT10aGlzLmNoaWxkTm9kZXMsZj1nKEgoYikpLGg9YXx8bmV3IFdlYWtNYXAsaT1PLmNhbGN1bGF0ZVNwbGljZXMoZSxmKSxqPTAsaz0wLGw9MCxtPTA7bTxpLmxlbmd0aDttKyspe2Zvcih2YXIgbj1pW21dO2w8bi5pbmRleDtsKyspaysrLGVbaisrXS5zeW5jKGgpO2Zvcih2YXIgbz1uLnJlbW92ZWQubGVuZ3RoLHA9MDtvPnA7cCsrKXt2YXIgcT1JKGZbaysrXSk7aC5nZXQocSl8fGQocSl9Zm9yKHZhciByPW4uYWRkZWRDb3VudCxzPWZba10mJkkoZltrXSkscD0wO3I+cDtwKyspe3ZhciB0PWVbaisrXSx1PXQubm9kZTtjKGIsdSxzKSxoLnNldCh1LCEwKSx0LnN5bmMoaCl9bCs9cn1mb3IodmFyIG09bDttPGUubGVuZ3RoO20rKyllW21dLnN5bmMoaCl9fX0sbi5wcm90b3R5cGU9e3JlbmRlcjpmdW5jdGlvbihhKXtpZih0aGlzLmRpcnR5KXt0aGlzLmludmFsaWRhdGVBdHRyaWJ1dGVzKCk7dmFyIGI9dGhpcy5ob3N0O3RoaXMuZGlzdHJpYnV0aW9uKGIpO3ZhciBjPWF8fG5ldyBtKGIpO3RoaXMuYnVpbGRSZW5kZXJUcmVlKGMsYik7dmFyIGQ9IWE7ZCYmYy5zeW5jKCksdGhpcy5kaXJ0eT0hMX19LGdldCBwYXJlbnRSZW5kZXJlcigpe3JldHVybiBFKHRoaXMuaG9zdCkucmVuZGVyZXJ9LGludmFsaWRhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5kaXJ0eSl7dGhpcy5kaXJ0eT0hMDt2YXIgYT10aGlzLnBhcmVudFJlbmRlcmVyO2lmKGEmJmEuaW52YWxpZGF0ZSgpLE4ucHVzaCh0aGlzKSx5KXJldHVybjt5PXdpbmRvd1tNXShpLDApfX0sZGlzdHJpYnV0aW9uOmZ1bmN0aW9uKGEpe3RoaXMucmVzZXRBbGxTdWJ0cmVlcyhhKSx0aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oYSl9LHJlc2V0QWxsOmZ1bmN0aW9uKGEpe3YoYSk/ZShhKTpzKGEpLHRoaXMucmVzZXRBbGxTdWJ0cmVlcyhhKX0scmVzZXRBbGxTdWJ0cmVlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKXRoaXMucmVzZXRBbGwoYik7YS5zaGFkb3dSb290JiZ0aGlzLnJlc2V0QWxsKGEuc2hhZG93Um9vdCksYS5vbGRlclNoYWRvd1Jvb3QmJnRoaXMucmVzZXRBbGwoYS5vbGRlclNoYWRvd1Jvb3QpfSxkaXN0cmlidXRpb25SZXNvbHV0aW9uOmZ1bmN0aW9uKGEpe2lmKHcoYSkpe2Zvcih2YXIgYj1hLGM9byhiKSxkPXgoYiksZT0wO2U8ZC5sZW5ndGg7ZSsrKXRoaXMucG9vbERpc3RyaWJ1dGlvbihkW2VdLGMpO2Zvcih2YXIgZT1kLmxlbmd0aC0xO2U+PTA7ZS0tKXt2YXIgZj1kW2VdLGc9cChmKTtpZihnKXt2YXIgaD1mLm9sZGVyU2hhZG93Um9vdDtoJiYoYz1vKGgpKTtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKylxKGNbaV0sZyl9dGhpcy5kaXN0cmlidXRpb25SZXNvbHV0aW9uKGYpfX1mb3IodmFyIGo9YS5maXJzdENoaWxkO2o7aj1qLm5leHRTaWJsaW5nKXRoaXMuZGlzdHJpYnV0aW9uUmVzb2x1dGlvbihqKX0scG9vbERpc3RyaWJ1dGlvbjpmdW5jdGlvbihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIEIpKWlmKGEgaW5zdGFuY2VvZiBBKXt2YXIgYz1hO3RoaXMudXBkYXRlRGVwZW5kZW50QXR0cmlidXRlcyhjLmdldEF0dHJpYnV0ZSgic2VsZWN0IikpO2Zvcih2YXIgZD0hMSxlPTA7ZTxiLmxlbmd0aDtlKyspe3ZhciBhPWJbZV07YSYmdChhLGMpJiYocShhLGMpLGJbZV09dm9pZCAwLGQ9ITApfWlmKCFkKWZvcih2YXIgZj1jLmZpcnN0Q2hpbGQ7ZjtmPWYubmV4dFNpYmxpbmcpcShmLGMpfWVsc2UgZm9yKHZhciBmPWEuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZyl0aGlzLnBvb2xEaXN0cmlidXRpb24oZixiKX0sYnVpbGRSZW5kZXJUcmVlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuY29tcG9zZShiKSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF0sZj1hLmFwcGVuZChlKTt0aGlzLmJ1aWxkUmVuZGVyVHJlZShmLGUpfWlmKHcoYikpe3ZhciBnPWooYik7Zy5kaXJ0eT0hMX19LGNvbXBvc2U6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9YS5zaGFkb3dSb290fHxhLGQ9Yy5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWlmKHYoZCkpe3RoaXMuYXNzb2NpYXRlTm9kZShjKTtmb3IodmFyIGU9ZihkKSxnPTA7ZzxlLmxlbmd0aDtnKyspe3ZhciBoPWVbZ107dShkLGgpJiZiLnB1c2goaCl9fWVsc2UgYi5wdXNoKGQpO3JldHVybiBifSxpbnZhbGlkYXRlQXR0cmlidXRlczpmdW5jdGlvbigpe3RoaXMuYXR0cmlidXRlcz1PYmplY3QuY3JlYXRlKG51bGwpfSx1cGRhdGVEZXBlbmRlbnRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXRoaXMuYXR0cmlidXRlczsvXC5cdysvLnRlc3QoYSkmJihiWyJjbGFzcyJdPSEwKSwvI1x3Ky8udGVzdChhKSYmKGIuaWQ9ITApLGEucmVwbGFjZSgvXFtccyooW15ccz1cfH5cXV0rKS9nLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pfX0sZGVwZW5kc09uQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmF0dHJpYnV0ZXNbYV19LGFzc29jaWF0ZU5vZGU6ZnVuY3Rpb24oYSl7RyhhKS5wb2x5bWVyU2hhZG93UmVuZGVyZXJfPXRoaXN9fTt2YXIgUD0vXig6bm90XCgpP1sqLiNbYS16QS1aX3xdLztDLnByb3RvdHlwZS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXI9ZnVuY3Rpb24oKXt2YXIgYT1HKHRoaXMpLnBvbHltZXJTaGFkb3dSZW5kZXJlcl87cmV0dXJuIGE/KGEuaW52YWxpZGF0ZSgpLCEwKTohMX0sQS5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1CLnByb3RvdHlwZS5nZXREaXN0cmlidXRlZE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxmKHRoaXMpfSx6LnByb3RvdHlwZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz1mdW5jdGlvbigpe3JldHVybiBoKCkscih0aGlzKXx8W119LEEucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1CLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBhLGI9ayh0aGlzKTtiJiYoYT1sKGIpKSxHKHRoaXMpLnBvbHltZXJTaGFkb3dSZW5kZXJlcl89YSxhJiZhLmludmFsaWRhdGUoKX0sYS5nZXRSZW5kZXJlckZvckhvc3Q9aixhLmdldFNoYWRvd1RyZWVzPXgsYS5yZW5kZXJBbGxQZW5kaW5nPWgsYS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz1yLGEudmlzdWFsPXtpbnNlcnRCZWZvcmU6YyxyZW1vdmU6ZH19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7aWYod2luZG93W2JdKXtkKCFhLndyYXBwZXJzW2JdKTt2YXIgaT1mdW5jdGlvbihhKXtjLmNhbGwodGhpcyxhKX07aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZShpLnByb3RvdHlwZSx7Z2V0IGZvcm0oKXtyZXR1cm4gaChnKHRoaXMpLmZvcm0pfX0pLGYod2luZG93W2JdLGksZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiLnNsaWNlKDQsLTcpKSksYS53cmFwcGVyc1tiXT1pfX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5hc3NlcnQsZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz1hLnVud3JhcCxoPWEud3JhcCxpPVsiSFRNTEJ1dHRvbkVsZW1lbnQiLCJIVE1MRmllbGRTZXRFbGVtZW50IiwiSFRNTElucHV0RWxlbWVudCIsIkhUTUxLZXlnZW5FbGVtZW50IiwiSFRNTExhYmVsRWxlbWVudCIsIkhUTUxMZWdlbmRFbGVtZW50IiwiSFRNTE9iamVjdEVsZW1lbnQiLCJIVE1MT3V0cHV0RWxlbWVudCIsIkhUTUxUZXh0QXJlYUVsZW1lbnQiXTtpLmZvckVhY2goYil9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZChhLHRoaXMpfXt2YXIgYz1hLnJlZ2lzdGVyV3JhcHBlcixkPWEuc2V0V3JhcHBlcixlPWEudW5zYWZlVW53cmFwLGY9YS51bndyYXAsZz1hLnVud3JhcElmTmVlZGVkLGg9YS53cmFwO3dpbmRvdy5TZWxlY3Rpb259Yi5wcm90b3R5cGU9e2dldCBhbmNob3JOb2RlKCl7cmV0dXJuIGgoZSh0aGlzKS5hbmNob3JOb2RlKX0sZ2V0IGZvY3VzTm9kZSgpe3JldHVybiBoKGUodGhpcykuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7ZSh0aGlzKS5hZGRSYW5nZShmKGEpKX0sY29sbGFwc2U6ZnVuY3Rpb24oYSxiKXtlKHRoaXMpLmNvbGxhcHNlKGcoYSksYil9LGNvbnRhaW5zTm9kZTpmdW5jdGlvbihhLGIpe3JldHVybiBlKHRoaXMpLmNvbnRhaW5zTm9kZShnKGEpLGIpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXtlKHRoaXMpLmV4dGVuZChnKGEpLGIpfSxnZXRSYW5nZUF0OmZ1bmN0aW9uKGEpe3JldHVybiBoKGUodGhpcykuZ2V0UmFuZ2VBdChhKSl9LHJlbW92ZVJhbmdlOmZ1bmN0aW9uKGEpe2UodGhpcykucmVtb3ZlUmFuZ2UoZihhKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGEpe2UodGhpcykuc2VsZWN0QWxsQ2hpbGRyZW4oZyhhKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcykudG9TdHJpbmcoKX19LGMod2luZG93LlNlbGVjdGlvbixiLHdpbmRvdy5nZXRTZWxlY3Rpb24oKSksYS53cmFwcGVycy5TZWxlY3Rpb249Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtrLmNhbGwodGhpcyxhKSx0aGlzLnRyZWVTY29wZV89bmV3IHAodGhpcyxudWxsKX1mdW5jdGlvbiBjKGEpe3ZhciBjPWRvY3VtZW50W2FdO2IucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIEMoYy5hcHBseShBKHRoaXMpLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7Ri5jYWxsKEEoYiksQihhKSksZShhLGIpfWZ1bmN0aW9uIGUoYSxiKXthLnNoYWRvd1Jvb3QmJmIuYWRvcHROb2RlKGEuc2hhZG93Um9vdCksYSBpbnN0YW5jZW9mIG8mJmYoYSxiKTtmb3IodmFyIGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWUoYyxiKX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9YS5vbGRlclNoYWRvd1Jvb3Q7YyYmYi5hZG9wdE5vZGUoYyl9ZnVuY3Rpb24gZyhhKXt6KGEsdGhpcyl9ZnVuY3Rpb24gaChhLGIpe3ZhciBjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uW2JdO2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7cmV0dXJuIEMoYy5hcHBseShBKHRoaXMpLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShBKHRoaXMpLGFyZ3VtZW50cyl9fXZhciBqPWEuR2V0RWxlbWVudHNCeUludGVyZmFjZSxrPWEud3JhcHBlcnMuTm9kZSxsPWEuUGFyZW50Tm9kZUludGVyZmFjZSxtPWEud3JhcHBlcnMuU2VsZWN0aW9uLG49YS5TZWxlY3RvcnNJbnRlcmZhY2Usbz1hLndyYXBwZXJzLlNoYWRvd1Jvb3QscD1hLlRyZWVTY29wZSxxPWEuY2xvbmVOb2RlLHI9YS5kZWZpbmVXcmFwR2V0dGVyLHM9YS5lbGVtZW50RnJvbVBvaW50LHQ9YS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcix1PWEubWF0Y2hlc05hbWVzLHY9YS5taXhpbix3PWEucmVnaXN0ZXJXcmFwcGVyLHg9YS5yZW5kZXJBbGxQZW5kaW5nLHk9YS5yZXdyYXAsej1hLnNldFdyYXBwZXIsQT1hLnVuc2FmZVVud3JhcCxCPWEudW53cmFwLEM9YS53cmFwLEQ9YS53cmFwRXZlbnRUYXJnZXRNZXRob2RzLEU9KGEud3JhcE5vZGVMaXN0LG5ldyBXZWFrTWFwKTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGsucHJvdG90eXBlKSxyKGIsImRvY3VtZW50RWxlbWVudCIpLHIoYiwiYm9keSIpLHIoYiwiaGVhZCIpLFsiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImdldEVsZW1lbnRCeUlkIl0uZm9yRWFjaChjKTt2YXIgRj1kb2N1bWVudC5hZG9wdE5vZGUsRz1kb2N1bWVudC5nZXRTZWxlY3Rpb247aWYodihiLnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkKGEsdGhpcyksYX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBzKHRoaXMsdGhpcyxhLGIpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHEoYSxiLEEodGhpcykpfSxnZXRTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4geCgpLG5ldyBtKEcuY2FsbChCKHRoaXMpKSl9LGdldEVsZW1lbnRzQnlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiBuLnF1ZXJ5U2VsZWN0b3JBbGwuY2FsbCh0aGlzLCJbbmFtZT0iK0pTT04uc3RyaW5naWZ5KFN0cmluZyhhKSkrIl0iKX19KSxkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQpe3ZhciBIPWRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDtiLnByb3RvdHlwZS5yZWdpc3RlckVsZW1lbnQ9ZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhP3ZvaWQgeihhLHRoaXMpOmY/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChmLGIpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYil9dmFyIGUsZjtpZih2b2lkIDAhPT1jJiYoZT1jLnByb3RvdHlwZSxmPWMuZXh0ZW5kcyksZXx8KGU9T2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChlKSl0aHJvdyBuZXcgRXJyb3IoIk5vdFN1cHBvcnRlZEVycm9yIik7Zm9yKHZhciBnLGg9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLGk9W107aCYmIShnPWEubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KGgpKTspaS5wdXNoKGgpLGg9T2JqZWN0LmdldFByb3RvdHlwZU9mKGgpO2lmKCFnKXRocm93IG5ldyBFcnJvcigiTm90U3VwcG9ydGVkRXJyb3IiKTtmb3IodmFyIGo9T2JqZWN0LmNyZWF0ZShnKSxrPWkubGVuZ3RoLTE7az49MDtrLS0paj1PYmplY3QuY3JlYXRlKGopO1siY3JlYXRlZENhbGxiYWNrIiwiYXR0YWNoZWRDYWxsYmFjayIsImRldGFjaGVkQ2FsbGJhY2siLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWVbYV07YiYmKGpbYV09ZnVuY3Rpb24oKXtDKHRoaXMpaW5zdGFuY2VvZiBkfHx5KHRoaXMpLGIuYXBwbHkoQyh0aGlzKSxhcmd1bWVudHMpfSl9KTt2YXIgbD17cHJvdG90eXBlOmp9O2YmJihsLmV4dGVuZHM9ZiksZC5wcm90b3R5cGU9ZSxkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kLGEuY29uc3RydWN0b3JUYWJsZS5zZXQoaixkKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLnNldChlLGopO0guY2FsbChCKHRoaXMpLGIsbCk7cmV0dXJuIGR9LHQoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJyZWdpc3RlckVsZW1lbnQiXSl9dChbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudCx3aW5kb3cuSFRNTEh0bWxFbGVtZW50XSxbImFwcGVuZENoaWxkIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJjb250YWlucyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lTlMiLCJpbnNlcnRCZWZvcmUiLCJxdWVyeVNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZUNoaWxkIiwicmVwbGFjZUNoaWxkIl0uY29uY2F0KHUpKSx0KFt3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnRdLFsiYWRvcHROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRhaW5zIiwiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImVsZW1lbnRGcm9tUG9pbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldEVsZW1lbnRzQnlOYW1lIiwiZ2V0U2VsZWN0aW9uIl0pLHYoYi5wcm90b3R5cGUsaiksdihiLnByb3RvdHlwZSxsKSx2KGIucHJvdG90eXBlLG4pLHYoYi5wcm90b3R5cGUse2dldCBpbXBsZW1lbnRhdGlvbigpe3ZhciBhPUUuZ2V0KHRoaXMpO3JldHVybiBhP2E6KGE9bmV3IGcoQih0aGlzKS5pbXBsZW1lbnRhdGlvbiksRS5zZXQodGhpcyxhKSxhKX0sZ2V0IGRlZmF1bHRWaWV3KCl7cmV0dXJuIEMoQih0aGlzKS5kZWZhdWx0Vmlldyl9fSksdyh3aW5kb3cuRG9jdW1lbnQsYixkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpKSx3aW5kb3cuSFRNTERvY3VtZW50JiZ3KHdpbmRvdy5IVE1MRG9jdW1lbnQsYiksRChbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudF0pLGgoZywiY3JlYXRlRG9jdW1lbnRUeXBlIiksaChnLCJjcmVhdGVEb2N1bWVudCIpLGgoZywiY3JlYXRlSFRNTERvY3VtZW50IiksaShnLCJoYXNGZWF0dXJlIiksdyh3aW5kb3cuRE9NSW1wbGVtZW50YXRpb24sZyksdChbd2luZG93LkRPTUltcGxlbWVudGF0aW9uXSxbImNyZWF0ZURvY3VtZW50VHlwZSIsImNyZWF0ZURvY3VtZW50IiwiY3JlYXRlSFRNTERvY3VtZW50IiwiaGFzRmVhdHVyZSJdKSxhLmFkb3B0Tm9kZU5vUmVtb3ZlPWQsYS53cmFwcGVycy5ET01JbXBsZW1lbnRhdGlvbj1nLGEud3JhcHBlcnMuRG9jdW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGQ9YS53cmFwcGVycy5TZWxlY3Rpb24sZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz1hLnJlbmRlckFsbFBlbmRpbmcsaD1hLnVud3JhcCxpPWEudW53cmFwSWZOZWVkZWQsaj1hLndyYXAsaz13aW5kb3cuV2luZG93LGw9d2luZG93LmdldENvbXB1dGVkU3R5bGUsbT13aW5kb3cuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUsbj13aW5kb3cuZ2V0U2VsZWN0aW9uO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGsucHJvdG90eXBlLmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaih0aGlzfHx3aW5kb3cpLmdldENvbXB1dGVkU3R5bGUoaShhKSxiKX0sbSYmKGsucHJvdG90eXBlLmdldERlZmF1bHRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGoodGhpc3x8d2luZG93KS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZShpKGEpLGIpfSksay5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGoodGhpc3x8d2luZG93KS5nZXRTZWxlY3Rpb24oKX0sZGVsZXRlIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLGRlbGV0ZSB3aW5kb3cuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUsZGVsZXRlIHdpbmRvdy5nZXRTZWxlY3Rpb24sWyJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2sucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7dmFyIGI9aih0aGlzfHx3aW5kb3cpO3JldHVybiBiW2FdLmFwcGx5KGIsYXJndW1lbnRzKX0sZGVsZXRlIHdpbmRvd1thXX0pLGUoYi5wcm90b3R5cGUse2dldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZygpLGwuY2FsbChoKHRoaXMpLGkoYSksYil9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBnKCksbmV3IGQobi5jYWxsKGgodGhpcykpKX0sZ2V0IGRvY3VtZW50KCl7cmV0dXJuIGooaCh0aGlzKS5kb2N1bWVudCl9fSksbSYmKGIucHJvdG90eXBlLmdldERlZmF1bHRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGcoKSxtLmNhbGwoaCh0aGlzKSxpKGEpLGIpfSksZihrLGIsd2luZG93KSxhLndyYXBwZXJzLldpbmRvdz1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLnVud3JhcCxjPXdpbmRvdy5EYXRhVHJhbnNmZXJ8fHdpbmRvdy5DbGlwYm9hcmQsZD1jLnByb3RvdHlwZS5zZXREcmFnSW1hZ2U7ZCYmKGMucHJvdG90eXBlLnNldERyYWdJbWFnZT1mdW5jdGlvbihhLGMsZSl7ZC5jYWxsKHRoaXMsYihhKSxjLGUpfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFyIGI7Yj1hIGluc3RhbmNlb2YgZj9hOm5ldyBmKGEmJmUoYSkpLGQoYix0aGlzKX12YXIgYz1hLnJlZ2lzdGVyV3JhcHBlcixkPWEuc2V0V3JhcHBlcixlPWEudW53cmFwLGY9d2luZG93LkZvcm1EYXRhO2YmJihjKGYsYixuZXcgZiksYS53cmFwcGVycy5Gb3JtRGF0YT1iKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7dmFyIGI9YS51bndyYXBJZk5lZWRlZCxjPVhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5zZW5kO1hNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGEpe3JldHVybiBjLmNhbGwodGhpcyxiKGEpKX19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFyIGI9Y1thXSxkPXdpbmRvd1tiXTtpZihkKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpLGY9ZS5jb25zdHJ1Y3Rvcjt3aW5kb3dbYl09Zn19dmFyIGM9KGEuaXNXcmFwcGVyRm9yLHthOiJIVE1MQW5jaG9yRWxlbWVudCIsYXJlYToiSFRNTEFyZWFFbGVtZW50IixhdWRpbzoiSFRNTEF1ZGlvRWxlbWVudCIsYmFzZToiSFRNTEJhc2VFbGVtZW50Iixib2R5OiJIVE1MQm9keUVsZW1lbnQiLGJyOiJIVE1MQlJFbGVtZW50IixidXR0b246IkhUTUxCdXR0b25FbGVtZW50IixjYW52YXM6IkhUTUxDYW52YXNFbGVtZW50IixjYXB0aW9uOiJIVE1MVGFibGVDYXB0aW9uRWxlbWVudCIsY29sOiJIVE1MVGFibGVDb2xFbGVtZW50Iixjb250ZW50OiJIVE1MQ29udGVudEVsZW1lbnQiLGRhdGE6IkhUTUxEYXRhRWxlbWVudCIsZGF0YWxpc3Q6IkhUTUxEYXRhTGlzdEVsZW1lbnQiLGRlbDoiSFRNTE1vZEVsZW1lbnQiLGRpcjoiSFRNTERpcmVjdG9yeUVsZW1lbnQiLGRpdjoiSFRNTERpdkVsZW1lbnQiLGRsOiJIVE1MRExpc3RFbGVtZW50IixlbWJlZDoiSFRNTEVtYmVkRWxlbWVudCIsZmllbGRzZXQ6IkhUTUxGaWVsZFNldEVsZW1lbnQiLGZvbnQ6IkhUTUxGb250RWxlbWVudCIsZm9ybToiSFRNTEZvcm1FbGVtZW50IixmcmFtZToiSFRNTEZyYW1lRWxlbWVudCIsZnJhbWVzZXQ6IkhUTUxGcmFtZVNldEVsZW1lbnQiLGgxOiJIVE1MSGVhZGluZ0VsZW1lbnQiLGhlYWQ6IkhUTUxIZWFkRWxlbWVudCIsaHI6IkhUTUxIUkVsZW1lbnQiLGh0bWw6IkhUTUxIdG1sRWxlbWVudCIsaWZyYW1lOiJIVE1MSUZyYW1lRWxlbWVudCIsaW1nOiJIVE1MSW1hZ2VFbGVtZW50IixpbnB1dDoiSFRNTElucHV0RWxlbWVudCIsa2V5Z2VuOiJIVE1MS2V5Z2VuRWxlbWVudCIsbGFiZWw6IkhUTUxMYWJlbEVsZW1lbnQiLGxlZ2VuZDoiSFRNTExlZ2VuZEVsZW1lbnQiLGxpOiJIVE1MTElFbGVtZW50IixsaW5rOiJIVE1MTGlua0VsZW1lbnQiLG1hcDoiSFRNTE1hcEVsZW1lbnQiLG1hcnF1ZWU6IkhUTUxNYXJxdWVlRWxlbWVudCIsbWVudToiSFRNTE1lbnVFbGVtZW50IixtZW51aXRlbToiSFRNTE1lbnVJdGVtRWxlbWVudCIsbWV0YToiSFRNTE1ldGFFbGVtZW50IixtZXRlcjoiSFRNTE1ldGVyRWxlbWVudCIsb2JqZWN0OiJIVE1MT2JqZWN0RWxlbWVudCIsb2w6IkhUTUxPTGlzdEVsZW1lbnQiLG9wdGdyb3VwOiJIVE1MT3B0R3JvdXBFbGVtZW50IixvcHRpb246IkhUTUxPcHRpb25FbGVtZW50IixvdXRwdXQ6IkhUTUxPdXRwdXRFbGVtZW50IixwOiJIVE1MUGFyYWdyYXBoRWxlbWVudCIscGFyYW06IkhUTUxQYXJhbUVsZW1lbnQiLHByZToiSFRNTFByZUVsZW1lbnQiLHByb2dyZXNzOiJIVE1MUHJvZ3Jlc3NFbGVtZW50IixxOiJIVE1MUXVvdGVFbGVtZW50IixzY3JpcHQ6IkhUTUxTY3JpcHRFbGVtZW50IixzZWxlY3Q6IkhUTUxTZWxlY3RFbGVtZW50IixzaGFkb3c6IkhUTUxTaGFkb3dFbGVtZW50Iixzb3VyY2U6IkhUTUxTb3VyY2VFbGVtZW50IixzcGFuOiJIVE1MU3BhbkVsZW1lbnQiLHN0eWxlOiJIVE1MU3R5bGVFbGVtZW50Iix0YWJsZToiSFRNTFRhYmxlRWxlbWVudCIsdGJvZHk6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0ZW1wbGF0ZToiSFRNTFRlbXBsYXRlRWxlbWVudCIsdGV4dGFyZWE6IkhUTUxUZXh0QXJlYUVsZW1lbnQiLHRoZWFkOiJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsdGltZToiSFRNTFRpbWVFbGVtZW50Iix0aXRsZToiSFRNTFRpdGxlRWxlbWVudCIsdHI6IkhUTUxUYWJsZVJvd0VsZW1lbnQiLHRyYWNrOiJIVE1MVHJhY2tFbGVtZW50Iix1bDoiSFRNTFVMaXN0RWxlbWVudCIsdmlkZW86IkhUTUxWaWRlb0VsZW1lbnQifSk7T2JqZWN0LmtleXMoYykuZm9yRWFjaChiKSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhLndyYXBwZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3dpbmRvd1tiXT1hLndyYXBwZXJzW2JdfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGMpe3ZhciBkLGUsZixnLGg9YS5maXJzdEVsZW1lbnRDaGlsZDtmb3IoZT1bXSxmPWEuc2hhZG93Um9vdDtmOyllLnB1c2goZiksZj1mLm9sZGVyU2hhZG93Um9vdDtmb3IoZz1lLmxlbmd0aC0xO2c+PTA7Zy0tKWlmKGQ9ZVtnXS5xdWVyeVNlbGVjdG9yKGMpKXJldHVybiBkO2Zvcig7aDspe2lmKGQ9YihoLGMpKXJldHVybiBkO2g9aC5uZXh0RWxlbWVudFNpYmxpbmd9cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhhLGIsZCl7dmFyIGUsZixnLGgsaSxqPWEuZmlyc3RFbGVtZW50Q2hpbGQ7Zm9yKGc9W10sZj1hLnNoYWRvd1Jvb3Q7ZjspZy5wdXNoKGYpLGY9Zi5vbGRlclNoYWRvd1Jvb3Q7Zm9yKGg9Zy5sZW5ndGgtMTtoPj0wO2gtLSlmb3IoZT1nW2hdLnF1ZXJ5U2VsZWN0b3JBbGwoYiksaT0wO2k8ZS5sZW5ndGg7aSsrKWQucHVzaChlW2ldKTtmb3IoO2o7KWMoaixiLGQpLGo9ai5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIGR9d2luZG93LndyYXA9U2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkLHdpbmRvdy51bndyYXA9U2hhZG93RE9NUG9seWZpbGwudW53cmFwSWZOZWVkZWQsT2JqZWN0LmRlZmluZVByb3BlcnR5KEVsZW1lbnQucHJvdG90eXBlLCJ3ZWJraXRTaGFkb3dSb290IixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEVsZW1lbnQucHJvdG90eXBlLCJzaGFkb3dSb290IikpO3ZhciBkPUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q7RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBhPWQuY2FsbCh0aGlzKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMud2F0Y2hTaGFkb3codGhpcyksYX0sRWxlbWVudC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1FbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290LGEucXVlcnlBbGxTaGFkb3dzPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gZT9jKGEsZCxbXSk6YihhLGQpfX0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7dmFyIGM9IiI7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXtjKz1hLnRleHRDb250ZW50KyJcblxuIn0pLGJ8fChjPWMucmVwbGFjZShsLCIiKSksY31mdW5jdGlvbiBjKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGIudGV4dENvbnRlbnQ9YSxifWZ1bmN0aW9uIGQoYSl7dmFyIGI9YyhhKTtkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGIpO3ZhciBkPVtdO2lmKGIuc2hlZXQpdHJ5e2Q9Yi5zaGVldC5jc3NSdWxlc31jYXRjaChlKXt9ZWxzZSBjb25zb2xlLndhcm4oInNoZWV0IG5vdCBmb3VuZCIsYik7cmV0dXJuIGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxkfWZ1bmN0aW9uIGUoKXt2LmluaXRpYWxpemVkPSEwLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodik7dmFyIGE9di5jb250ZW50RG9jdW1lbnQsYj1hLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtiLmhyZWY9ZG9jdW1lbnQuYmFzZVVSSSxhLmhlYWQuYXBwZW5kQ2hpbGQoYil9ZnVuY3Rpb24gZihhKXt2LmluaXRpYWxpemVkfHxlKCksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh2KSxhKHYuY29udGVudERvY3VtZW50KSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHYpfWZ1bmN0aW9uIGcoYSxiKXtpZihiKXt2YXIgZTtpZihhLm1hdGNoKCJAaW1wb3J0IikmJngpe3ZhciBnPWMoYSk7ZihmdW5jdGlvbihhKXthLmhlYWQuYXBwZW5kQ2hpbGQoZy5pbXBsKSxlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGcuc2hlZXQuY3NzUnVsZXMsMCksYihlKX0pfWVsc2UgZT1kKGEpLGIoZSl9fWZ1bmN0aW9uIGgoYSl7YSYmaigpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpKX1mdW5jdGlvbiBpKGEsYil7dmFyIGQ9YyhhKTtkLnNldEF0dHJpYnV0ZShiLCIiKSxkLnNldEF0dHJpYnV0ZSh6LCIiKSxkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGQpfWZ1bmN0aW9uIGooKXtyZXR1cm4gd3x8KHc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSx3LnNldEF0dHJpYnV0ZSh6LCIiKSx3W3pdPSEwKSx3fXZhciBrPXtzdHJpY3RTdHlsaW5nOiExLHJlZ2lzdHJ5Ont9LHNoaW1TdHlsaW5nOmZ1bmN0aW9uKGEsYyxkKXt2YXIgZT10aGlzLnByZXBhcmVSb290KGEsYyxkKSxmPXRoaXMuaXNUeXBlRXh0ZW5zaW9uKGQpLGc9dGhpcy5tYWtlU2NvcGVTZWxlY3RvcihjLGYpLGg9YihlLCEwKTtoPXRoaXMuc2NvcGVDc3NUZXh0KGgsZyksYSYmKGEuc2hpbW1lZFN0eWxlPWgpLHRoaXMuYWRkQ3NzVG9Eb2N1bWVudChoLGMpfSxzaGltU3R5bGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5zaGltQ3NzVGV4dChhLnRleHRDb250ZW50LGIpfSxzaGltQ3NzVGV4dDpmdW5jdGlvbihhLGIpe3JldHVybiBhPXRoaXMuaW5zZXJ0RGlyZWN0aXZlcyhhKSx0aGlzLnNjb3BlQ3NzVGV4dChhLGIpfSxtYWtlU2NvcGVTZWxlY3RvcjpmdW5jdGlvbihhLGIpe3JldHVybiBhP2I/Iltpcz0iK2ErIl0iOmE6IiJ9LGlzVHlwZUV4dGVuc2lvbjpmdW5jdGlvbihhKXtyZXR1cm4gYSYmYS5pbmRleE9mKCItIik8MH0scHJlcGFyZVJvb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVnaXN0ZXJSb290KGEsYixjKTtyZXR1cm4gdGhpcy5yZXBsYWNlVGV4dEluU3R5bGVzKGQucm9vdFN0eWxlcyx0aGlzLmluc2VydERpcmVjdGl2ZXMpLHRoaXMucmVtb3ZlU3R5bGVzKGEsZC5yb290U3R5bGVzKSx0aGlzLnN0cmljdFN0eWxpbmcmJnRoaXMuYXBwbHlTY29wZVRvQ29udGVudChhLGIpLGQuc2NvcGVTdHlsZXN9LHJlbW92ZVN0eWxlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1iLmxlbmd0aDtlPmQmJihjPWJbZF0pO2QrKyljLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyl9LHJlZ2lzdGVyUm9vdDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZWdpc3RyeVtiXT17cm9vdDphLG5hbWU6YixleHRlbmRzTmFtZTpjfSxlPXRoaXMuZmluZFN0eWxlcyhhKTtkLnJvb3RTdHlsZXM9ZSxkLnNjb3BlU3R5bGVzPWQucm9vdFN0eWxlczt2YXIgZj10aGlzLnJlZ2lzdHJ5W2QuZXh0ZW5kc05hbWVdO3JldHVybiBmJiYoZC5zY29wZVN0eWxlcz1mLnNjb3BlU3R5bGVzLmNvbmNhdChkLnNjb3BlU3R5bGVzKSksZH0sZmluZFN0eWxlczpmdW5jdGlvbihhKXtpZighYSlyZXR1cm5bXTt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChiLGZ1bmN0aW9uKGEpe3JldHVybiFhLmhhc0F0dHJpYnV0ZShBKX0pfSxhcHBseVNjb3BlVG9Db250ZW50OmZ1bmN0aW9uKGEsYil7YSYmKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYS5xdWVyeVNlbGVjdG9yQWxsKCIqIiksZnVuY3Rpb24oYSl7YS5zZXRBdHRyaWJ1dGUoYiwiIil9KSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKSxmdW5jdGlvbihhKXt0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYS5jb250ZW50LGIpfSx0aGlzKSl9LGluc2VydERpcmVjdGl2ZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dGhpcy5pbnNlcnRQb2x5ZmlsbERpcmVjdGl2ZXNJbkNzc1RleHQoYSksdGhpcy5pbnNlcnRQb2x5ZmlsbFJ1bGVzSW5Dc3NUZXh0KGEpfSxpbnNlcnRQb2x5ZmlsbERpcmVjdGl2ZXNJbkNzc1RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKG0sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5zbGljZSgwLC0yKSsieyJ9KSxhLnJlcGxhY2UobixmdW5jdGlvbihhLGIpe3JldHVybiBiKyIgeyJ9KX0saW5zZXJ0UG9seWZpbGxSdWxlc0luQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UobyxmdW5jdGlvbihhLGIpe3JldHVybiBiLnNsaWNlKDAsLTEpfSksYS5yZXBsYWNlKHAsZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YS5yZXBsYWNlKGIsIiIpLnJlcGxhY2UoYywiIik7cmV0dXJuIGQrZX0pfSxzY29wZUNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmV4dHJhY3RVbnNjb3BlZFJ1bGVzRnJvbUNzc1RleHQoYSk7aWYoYT10aGlzLmluc2VydFBvbHlmaWxsSG9zdEluQ3NzVGV4dChhKSxhPXRoaXMuY29udmVydENvbG9uSG9zdChhKSxhPXRoaXMuY29udmVydENvbG9uSG9zdENvbnRleHQoYSksYT10aGlzLmNvbnZlcnRTaGFkb3dET01TZWxlY3RvcnMoYSksYil7dmFyIGEsZD10aGlzO2coYSxmdW5jdGlvbihjKXthPWQuc2NvcGVSdWxlcyhjLGIpfSl9cmV0dXJuIGE9YSsiXG4iK2MsYS50cmltKCl9LGV4dHJhY3RVbnNjb3BlZFJ1bGVzRnJvbUNzc1RleHQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9IiI7Yj1xLmV4ZWMoYSk7KWMrPWJbMV0uc2xpY2UoMCwtMSkrIlxuXG4iO2Zvcig7Yj1yLmV4ZWMoYSk7KWMrPWJbMF0ucmVwbGFjZShiWzJdLCIiKS5yZXBsYWNlKGJbMV0sYlszXSkrIlxuXG4iO3JldHVybiBjfSxjb252ZXJ0Q29sb25Ib3N0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RSZSx0aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvbkhvc3RDb250ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RDb250ZXh0UmUsdGhpcy5jb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyKX0sY29udmVydENvbG9uUnVsZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixkLGUpe2lmKGI9cG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGQpe2Zvcih2YXIgZixnPWQuc3BsaXQoIiwiKSxoPVtdLGk9MCxqPWcubGVuZ3RoO2o+aSYmKGY9Z1tpXSk7aSsrKWY9Zi50cmltKCksaC5wdXNoKGMoYixmLGUpKTtyZXR1cm4gaC5qb2luKCIsIil9cmV0dXJuIGIrZX0pfSxjb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYi5tYXRjaChzKT90aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcihhLGIsYyk6YStiK2MrIiwgIitiKyIgIithK2N9LGNvbG9uSG9zdFBhcnRSZXBsYWNlcjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGErYi5yZXBsYWNlKHMsIiIpK2N9LGNvbnZlcnRTaGFkb3dET01TZWxlY3RvcnM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxzaGFkb3dET01TZWxlY3RvcnNSZS5sZW5ndGg7YisrKWE9YS5yZXBsYWNlKHNoYWRvd0RPTVNlbGVjdG9yc1JlW2JdLCIgIik7cmV0dXJuIGF9LHNjb3BlUnVsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz0iIjtyZXR1cm4gYSYmQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2lmKGEuc2VsZWN0b3JUZXh0JiZhLnN0eWxlJiZ2b2lkIDAhPT1hLnN0eWxlLmNzc1RleHQpYys9dGhpcy5zY29wZVNlbGVjdG9yKGEuc2VsZWN0b3JUZXh0LGIsdGhpcy5zdHJpY3RTdHlsaW5nKSsiIHtcbgkiLGMrPXRoaXMucHJvcGVydGllc0Zyb21SdWxlKGEpKyJcbn1cblxuIjtlbHNlIGlmKGEudHlwZT09PUNTU1J1bGUuTUVESUFfUlVMRSljKz0iQG1lZGlhICIrYS5tZWRpYS5tZWRpYVRleHQrIiB7XG4iLGMrPXRoaXMuc2NvcGVSdWxlcyhhLmNzc1J1bGVzLGIpLGMrPSJcbn1cblxuIjtlbHNlIHRyeXthLmNzc1RleHQmJihjKz1hLmNzc1RleHQrIlxuXG4iKX1jYXRjaChkKXthLnR5cGU9PT1DU1NSdWxlLktFWUZSQU1FU19SVUxFJiZhLmNzc1J1bGVzJiYoYys9dGhpcy5pZVNhZmVDc3NUZXh0RnJvbUtleUZyYW1lUnVsZShhKSl9fSx0aGlzKSxjfSxpZVNhZmVDc3NUZXh0RnJvbUtleUZyYW1lUnVsZTpmdW5jdGlvbihhKXt2YXIgYj0iQGtleWZyYW1lcyAiK2EubmFtZSsiIHsiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEuY3NzUnVsZXMsZnVuY3Rpb24oYSl7Yis9IiAiK2Eua2V5VGV4dCsiIHsiK2Euc3R5bGUuY3NzVGV4dCsifSJ9KSxiKz0iIH0ifSxzY29wZVNlbGVjdG9yOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPWEuc3BsaXQoIiwiKTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhhLGIpJiYoYT1jJiYhYS5tYXRjaChwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IpP3RoaXMuYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlKGEsYik6dGhpcy5hcHBseVNlbGVjdG9yU2NvcGUoYSxiKSksZC5wdXNoKGEpfSx0aGlzKSxkLmpvaW4oIiwgIil9LHNlbGVjdG9yTmVlZHNTY29waW5nOmZ1bmN0aW9uKGEsYil7aWYoQXJyYXkuaXNBcnJheShiKSlyZXR1cm4hMDt2YXIgYz10aGlzLm1ha2VTY29wZU1hdGNoZXIoYik7cmV0dXJuIWEubWF0Y2goYyl9LG1ha2VTY29wZU1hdGNoZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKC9cWy9nLCJcXFsiKS5yZXBsYWNlKC9cWy9nLCJcXF0iKSxuZXcgUmVnRXhwKCJeKCIrYSsiKSIrc2VsZWN0b3JSZVN1ZmZpeCwibSIpfSxhcHBseVNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQXJyYXkuaXNBcnJheShiKT90aGlzLmFwcGx5U2VsZWN0b3JTY29wZUxpc3QoYSxiKTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGIpfSxhcHBseVNlbGVjdG9yU2NvcGVMaXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9W10sZT0wO2M9YltlXTtlKyspZC5wdXNoKHRoaXMuYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlKGEsYykpO3JldHVybiBkLmpvaW4oIiwgIil9LGFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm1hdGNoKHBvbHlmaWxsSG9zdFJlKT8oYT1hLnJlcGxhY2UocG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGIpLGEucmVwbGFjZShwb2x5ZmlsbEhvc3RSZSxiKyIgIikpOmIrIiAiK2F9LGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe2I9Yi5yZXBsYWNlKC9cW2lzPShbXlxdXSopXF0vZywiJDEiKTt2YXIgYz1bIiAiLCI+IiwiKyIsIn4iXSxkPWEsZT0iWyIrYisiXSI7cmV0dXJuIGMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1kLnNwbGl0KGEpO2Q9Yi5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9YS50cmltKCkucmVwbGFjZShwb2x5ZmlsbEhvc3RSZSwiIik7cmV0dXJuIGImJmMuaW5kZXhPZihiKTwwJiZiLmluZGV4T2YoZSk8MCYmKGE9Yi5yZXBsYWNlKC8oW146XSopKDoqKSguKikvLCIkMSIrZSsiJDIkMyIpKSxhfSkuam9pbihhKX0pLGR9LGluc2VydFBvbHlmaWxsSG9zdEluQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKGNvbG9uSG9zdENvbnRleHRSZSx0KS5yZXBsYWNlKGNvbG9uSG9zdFJlLHMpfSxwcm9wZXJ0aWVzRnJvbVJ1bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdHlsZS5jc3NUZXh0O2Euc3R5bGUuY29udGVudCYmIWEuc3R5bGUuY29udGVudC5tYXRjaCgvWyciXSt8YXR0ci8pJiYoYj1iLnJlcGxhY2UoL2NvbnRlbnQ6W147XSo7L2csImNvbnRlbnQ6ICciK2Euc3R5bGUuY29udGVudCsiJzsiKSk7dmFyIGM9YS5zdHlsZTtmb3IodmFyIGQgaW4gYykiaW5pdGlhbCI9PT1jW2RdJiYoYis9ZCsiOiBpbml0aWFsOyAiKTtyZXR1cm4gYn0scmVwbGFjZVRleHRJblN0eWxlczpmdW5jdGlvbihhLGIpe2EmJmImJihhIGluc3RhbmNlb2YgQXJyYXl8fChhPVthXSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9Yi5jYWxsKHRoaXMsYS50ZXh0Q29udGVudCl9LHRoaXMpKX0sYWRkQ3NzVG9Eb2N1bWVudDpmdW5jdGlvbihhLGIpe2EubWF0Y2goIkBpbXBvcnQiKT9pKGEsYik6aChhKX19LGw9L1wvXCpbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLy9naW0sbT0vXC9cKlxzKkBwb2x5ZmlsbCAoW14qXSpcKisoW14vKl1bXipdKlwqKykqXC8pKFtee10qPyl7L2dpbSxuPS9wb2x5ZmlsbC1uZXh0LXNlbGVjdG9yW159XSpjb250ZW50XDpbXHNdKj9bJyJdKC4qPylbJyJdWztcc10qfShbXntdKj8pey9naW0sbz0vXC9cKlxzQHBvbHlmaWxsLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxwPS8ocG9seWZpbGwtcnVsZSlbXn1dKihjb250ZW50XDpbXHNdKlsnIl0oLio/KVsnIl0pWztcc10qW159XSp9L2dpbSxxPS9cL1wqXHNAcG9seWZpbGwtdW5zY29wZWQtcnVsZShbXipdKlwqKyhbXi8qXVteKl0qXCorKSopXC8vZ2ltLHI9Lyhwb2x5ZmlsbC11bnNjb3BlZC1ydWxlKVtefV0qKGNvbnRlbnRcOltcc10qWyciXSguKj8pWyciXSlbO1xzXSpbXn1dKn0vZ2ltLHM9Ii1zaGFkb3djc3Nob3N0Iix0PSItc2hhZG93Y3NzY29udGV4dCIsdT0iKSg/OlxcKCgoPzpcXChbXikoXSpcXCl8W14pKF0qKSs/KVxcKSk/KFteLHtdKikiO2Nzc0NvbG9uSG9zdFJlPW5ldyBSZWdFeHAoIigiK3MrdSwiZ2ltIiksY3NzQ29sb25Ib3N0Q29udGV4dFJlPW5ldyBSZWdFeHAoIigiK3QrdSwiZ2ltIiksc2VsZWN0b3JSZVN1ZmZpeD0iKFs+XFxzfitbLix7Ol1bXFxzXFxTXSopPyQiLGNvbG9uSG9zdFJlPS9cOmhvc3QvZ2ltLGNvbG9uSG9zdENvbnRleHRSZT0vXDpob3N0LWNvbnRleHQvZ2ltLHBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcj1zKyItbm8tY29tYmluYXRvciIscG9seWZpbGxIb3N0UmU9bmV3IFJlZ0V4cChzLCJnaW0iKSxwb2x5ZmlsbEhvc3RDb250ZXh0UmU9bmV3IFJlZ0V4cCh0LCJnaW0iKSxzaGFkb3dET01TZWxlY3RvcnNSZT1bL1xeXF4vZywvXF4vZywvXC9zaGFkb3dcLy9nLC9cL3NoYWRvdy1kZWVwXC8vZywvOjpzaGFkb3cvZywvXC9kZWVwXC8vZywvOjpjb250ZW50L2ddO3ZhciB2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO3Yuc3R5bGUuZGlzcGxheT0ibm9uZSI7dmFyIHcseD1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKCJDaHJvbWUiKSx5PSJzaGltLXNoYWRvd2RvbSIsej0ic2hpbS1zaGFkb3dkb20tY3NzIixBPSJuby1zaGltIjtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe2goInN0eWxlIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9XG4iKTt2YXIgQj13cmFwKGRvY3VtZW50KSxDPUIucXVlcnlTZWxlY3RvcigiaGVhZCIpO0MuaW5zZXJ0QmVmb3JlKGooKSxDLmNoaWxkTm9kZXNbMF0pLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7YS51cmxSZXNvbHZlcjtpZih3aW5kb3cuSFRNTEltcG9ydHMmJiFIVE1MSW1wb3J0cy51c2VOYXRpdmUpe3ZhciBiPSJsaW5rW3JlbD1zdHlsZXNoZWV0XVsiK3krIl0iLGM9InN0eWxlWyIreSsiXSI7SFRNTEltcG9ydHMuaW1wb3J0ZXIuZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzKz0iLCIrYixIVE1MSW1wb3J0cy5pbXBvcnRlci5pbXBvcnRzUHJlbG9hZFNlbGVjdG9ycys9IiwiK2IsSFRNTEltcG9ydHMucGFyc2VyLmRvY3VtZW50U2VsZWN0b3JzPVtIVE1MSW1wb3J0cy5wYXJzZXIuZG9jdW1lbnRTZWxlY3RvcnMsYixjXS5qb2luKCIsIik7dmFyIGQ9SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlR2VuZXJpYztIVE1MSW1wb3J0cy5wYXJzZXIucGFyc2VHZW5lcmljPWZ1bmN0aW9uKGEpe2lmKCFhW3pdKXt2YXIgYj1hLl9faW1wb3J0RWxlbWVudHx8YTtpZighYi5oYXNBdHRyaWJ1dGUoeSkpcmV0dXJuIHZvaWQgZC5jYWxsKHRoaXMsYSk7YS5fX3Jlc291cmNlJiYoYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSxiLnRleHRDb250ZW50PWEuX19yZXNvdXJjZSksSFRNTEltcG9ydHMucGF0aC5yZXNvbHZlVXJsc0luU3R5bGUoYiksYi50ZXh0Q29udGVudD1rLnNoaW1TdHlsZShiKSxiLnJlbW92ZUF0dHJpYnV0ZSh5LCIiKSxiLnNldEF0dHJpYnV0ZSh6LCIiKSxiW3pdPSEwLGIucGFyZW50Tm9kZSE9PUMmJihhLnBhcmVudE5vZGU9PT1DP0MucmVwbGFjZUNoaWxkKGIsYSk6dGhpcy5hZGRFbGVtZW50VG9Eb2N1bWVudChiKSksYi5fX2ltcG9ydFBhcnNlZD0hMCx0aGlzLm1hcmtQYXJzaW5nQ29tcGxldGUoYSksdGhpcy5wYXJzZU5leHQoKX19O3ZhciBlPUhUTUxJbXBvcnRzLnBhcnNlci5oYXNSZXNvdXJjZTtIVE1MSW1wb3J0cy5wYXJzZXIuaGFzUmVzb3VyY2U9ZnVuY3Rpb24oYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJiJzdHlsZXNoZWV0Ij09PWEucmVsJiZhLmhhc0F0dHJpYnV0ZSh5KT9hLl9fcmVzb3VyY2U6ZS5jYWxsKHRoaXMsYSl9fX0pfWEuU2hhZG93Q1NTPWt9KHdpbmRvdy5QbGF0Zm9ybSkpOiFmdW5jdGlvbigpe3dpbmRvdy53cmFwPXdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LGFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7aWYoQ3VzdG9tRWxlbWVudHMudXNlTmF0aXZlPT09ITEpe3ZhciBhPUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q7RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBiPWEuY2FsbCh0aGlzKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMud2F0Y2hTaGFkb3codGhpcyksYn19fSl9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIHZvaWQgMCE9PW1bYV19ZnVuY3Rpb24gYygpe2guY2FsbCh0aGlzKSx0aGlzLl9pc0ludmFsaWQ9ITB9ZnVuY3Rpb24gZChhKXtyZXR1cm4iIj09YSYmYy5jYWxsKHRoaXMpLGEudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gYj4zMiYmMTI3PmImJi0xPT1bMzQsMzUsNjAsNjIsNjMsOTZdLmluZGV4T2YoYik/YTplbmNvZGVVUklDb21wb25lbnQoYSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGI+MzImJjEyNz5iJiYtMT09WzM0LDM1LDYwLDYyLDk2XS5pbmRleE9mKGIpP2E6ZW5jb2RlVVJJQ29tcG9uZW50KGEpfWZ1bmN0aW9uIGcoYSxnLGgpe2Z1bmN0aW9uIGkoYSl7dC5wdXNoKGEpfXZhciBqPWd8fCJzY2hlbWUgc3RhcnQiLGs9MCxsPSIiLHI9ITEscz0hMSx0PVtdO2E6Zm9yKDsoYVtrLTFdIT1vfHwwPT1rKSYmIXRoaXMuX2lzSW52YWxpZDspe3ZhciB1PWFba107c3dpdGNoKGope2Nhc2Uic2NoZW1lIHN0YXJ0IjppZighdXx8IXAudGVzdCh1KSl7aWYoZyl7aSgiSW52YWxpZCBzY2hlbWUuIik7YnJlYWsgYX1sPSIiLGo9Im5vIHNjaGVtZSI7Y29udGludWV9bCs9dS50b0xvd2VyQ2FzZSgpLGo9InNjaGVtZSI7YnJlYWs7Y2FzZSJzY2hlbWUiOmlmKHUmJnEudGVzdCh1KSlsKz11LnRvTG93ZXJDYXNlKCk7ZWxzZXtpZigiOiIhPXUpe2lmKGcpe2lmKG89PXUpYnJlYWsgYTtpKCJDb2RlIHBvaW50IG5vdCBhbGxvd2VkIGluIHNjaGVtZTogIit1KTticmVhayBhfWw9IiIsaz0wLGo9Im5vIHNjaGVtZSI7Y29udGludWV9aWYodGhpcy5fc2NoZW1lPWwsbD0iIixnKWJyZWFrIGE7Yih0aGlzLl9zY2hlbWUpJiYodGhpcy5faXNSZWxhdGl2ZT0hMCksaj0iZmlsZSI9PXRoaXMuX3NjaGVtZT8icmVsYXRpdmUiOnRoaXMuX2lzUmVsYXRpdmUmJmgmJmguX3NjaGVtZT09dGhpcy5fc2NoZW1lPyJyZWxhdGl2ZSBvciBhdXRob3JpdHkiOnRoaXMuX2lzUmVsYXRpdmU/ImF1dGhvcml0eSBmaXJzdCBzbGFzaCI6InNjaGVtZSBkYXRhIn1icmVhaztjYXNlInNjaGVtZSBkYXRhIjoiPyI9PXU/KHF1ZXJ5PSI/IixqPSJxdWVyeSIpOiIjIj09dT8odGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iik6byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fc2NoZW1lRGF0YSs9ZSh1KSk7YnJlYWs7Y2FzZSJubyBzY2hlbWUiOmlmKGgmJmIoaC5fc2NoZW1lKSl7aj0icmVsYXRpdmUiO2NvbnRpbnVlfWkoIk1pc3Npbmcgc2NoZW1lLiIpLGMuY2FsbCh0aGlzKTticmVhaztjYXNlInJlbGF0aXZlIG9yIGF1dGhvcml0eSI6aWYoIi8iIT11fHwiLyIhPWFbaysxXSl7aSgiRXhwZWN0ZWQgLywgZ290OiAiK3UpLGo9InJlbGF0aXZlIjtjb250aW51ZX1qPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2JyZWFrO2Nhc2UicmVsYXRpdmUiOmlmKHRoaXMuX2lzUmVsYXRpdmU9ITAsImZpbGUiIT10aGlzLl9zY2hlbWUmJih0aGlzLl9zY2hlbWU9aC5fc2NoZW1lKSxvPT11KXt0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PWguX3F1ZXJ5O2JyZWFrIGF9aWYoIi8iPT11fHwiXFwiPT11KSJcXCI9PXUmJmkoIlxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC4iKSxqPSJyZWxhdGl2ZSBzbGFzaCI7ZWxzZSBpZigiPyI9PXUpdGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT0iPyIsaj0icXVlcnkiOwplbHNle2lmKCIjIiE9dSl7dmFyIHY9YVtrKzFdLHc9YVtrKzJdOygiZmlsZSIhPXRoaXMuX3NjaGVtZXx8IXAudGVzdCh1KXx8IjoiIT12JiYifCIhPXZ8fG8hPXcmJiIvIiE9dyYmIlxcIiE9dyYmIj8iIT13JiYiIyIhPXcpJiYodGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9wYXRoLnBvcCgpKSxqPSJyZWxhdGl2ZSBwYXRoIjtjb250aW51ZX10aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PWguX3F1ZXJ5LHRoaXMuX2ZyYWdtZW50PSIjIixqPSJmcmFnbWVudCJ9YnJlYWs7Y2FzZSJyZWxhdGl2ZSBzbGFzaCI6aWYoIi8iIT11JiYiXFwiIT11KXsiZmlsZSIhPXRoaXMuX3NjaGVtZSYmKHRoaXMuX2hvc3Q9aC5faG9zdCx0aGlzLl9wb3J0PWguX3BvcnQpLGo9InJlbGF0aXZlIHBhdGgiO2NvbnRpbnVlfSJcXCI9PXUmJmkoIlxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC4iKSxqPSJmaWxlIj09dGhpcy5fc2NoZW1lPyJmaWxlIGhvc3QiOiJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2JyZWFrO2Nhc2UiYXV0aG9yaXR5IGZpcnN0IHNsYXNoIjppZigiLyIhPXUpe2koIkV4cGVjdGVkICcvJywgZ290OiAiK3UpLGo9ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI7Y29udGludWV9aj0iYXV0aG9yaXR5IHNlY29uZCBzbGFzaCI7YnJlYWs7Y2FzZSJhdXRob3JpdHkgc2Vjb25kIHNsYXNoIjppZihqPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiLCIvIiE9dSl7aSgiRXhwZWN0ZWQgJy8nLCBnb3Q6ICIrdSk7Y29udGludWV9YnJlYWs7Y2FzZSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiOmlmKCIvIiE9dSYmIlxcIiE9dSl7aj0iYXV0aG9yaXR5Ijtjb250aW51ZX1pKCJFeHBlY3RlZCBhdXRob3JpdHksIGdvdDogIit1KTticmVhaztjYXNlImF1dGhvcml0eSI6aWYoIkAiPT11KXtyJiYoaSgiQCBhbHJlYWR5IHNlZW4uIiksbCs9IiU0MCIpLHI9ITA7Zm9yKHZhciB4PTA7eDxsLmxlbmd0aDt4Kyspe3ZhciB5PWxbeF07aWYoIgkiIT15JiYiXG4iIT15JiYiXHIiIT15KWlmKCI6IiE9eXx8bnVsbCE9PXRoaXMuX3Bhc3N3b3JkKXt2YXIgej1lKHkpO251bGwhPT10aGlzLl9wYXNzd29yZD90aGlzLl9wYXNzd29yZCs9ejp0aGlzLl91c2VybmFtZSs9en1lbHNlIHRoaXMuX3Bhc3N3b3JkPSIiO2Vsc2UgaSgiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGF1dGhvcml0eS4iKX1sPSIifWVsc2V7aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dSl7ay09bC5sZW5ndGgsbD0iIixqPSJob3N0Ijtjb250aW51ZX1sKz11fWJyZWFrO2Nhc2UiZmlsZSBob3N0IjppZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11KXsyIT1sLmxlbmd0aHx8IXAudGVzdChsWzBdKXx8IjoiIT1sWzFdJiYifCIhPWxbMV0/MD09bC5sZW5ndGg/aj0icmVsYXRpdmUgcGF0aCBzdGFydCI6KHRoaXMuX2hvc3Q9ZC5jYWxsKHRoaXMsbCksbD0iIixqPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0Iik6aj0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9IgkiPT11fHwiXG4iPT11fHwiXHIiPT11P2koIkludmFsaWQgd2hpdGVzcGFjZSBpbiBmaWxlIGhvc3QuIik6bCs9dTticmVhaztjYXNlImhvc3QiOmNhc2UiaG9zdG5hbWUiOmlmKCI6IiE9dXx8cyl7aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dSl7aWYodGhpcy5faG9zdD1kLmNhbGwodGhpcyxsKSxsPSIiLGo9InJlbGF0aXZlIHBhdGggc3RhcnQiLGcpYnJlYWsgYTtjb250aW51ZX0iCSIhPXUmJiJcbiIhPXUmJiJcciIhPXU/KCJbIj09dT9zPSEwOiJdIj09dSYmKHM9ITEpLGwrPXUpOmkoIkludmFsaWQgY29kZSBwb2ludCBpbiBob3N0L2hvc3RuYW1lOiAiK3UpfWVsc2UgaWYodGhpcy5faG9zdD1kLmNhbGwodGhpcyxsKSxsPSIiLGo9InBvcnQiLCJob3N0bmFtZSI9PWcpYnJlYWsgYTticmVhaztjYXNlInBvcnQiOmlmKC9bMC05XS8udGVzdCh1KSlsKz11O2Vsc2V7aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dXx8Zyl7aWYoIiIhPWwpe3ZhciBBPXBhcnNlSW50KGwsMTApO0EhPW1bdGhpcy5fc2NoZW1lXSYmKHRoaXMuX3BvcnQ9QSsiIiksbD0iIn1pZihnKWJyZWFrIGE7aj0icmVsYXRpdmUgcGF0aCBzdGFydCI7Y29udGludWV9IgkiPT11fHwiXG4iPT11fHwiXHIiPT11P2koIkludmFsaWQgY29kZSBwb2ludCBpbiBwb3J0OiAiK3UpOmMuY2FsbCh0aGlzKX1icmVhaztjYXNlInJlbGF0aXZlIHBhdGggc3RhcnQiOmlmKCJcXCI9PXUmJmkoIidcXCcgbm90IGFsbG93ZWQgaW4gcGF0aC4iKSxqPSJyZWxhdGl2ZSBwYXRoIiwiLyIhPXUmJiJcXCIhPXUpY29udGludWU7YnJlYWs7Y2FzZSJyZWxhdGl2ZSBwYXRoIjppZihvIT11JiYiLyIhPXUmJiJcXCIhPXUmJihnfHwiPyIhPXUmJiIjIiE9dSkpIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYobCs9ZSh1KSk7ZWxzZXsiXFwiPT11JiZpKCJcXCBub3QgYWxsb3dlZCBpbiByZWxhdGl2ZSBwYXRoLiIpO3ZhciBCOyhCPW5bbC50b0xvd2VyQ2FzZSgpXSkmJihsPUIpLCIuLiI9PWw/KHRoaXMuX3BhdGgucG9wKCksIi8iIT11JiYiXFwiIT11JiZ0aGlzLl9wYXRoLnB1c2goIiIpKToiLiI9PWwmJiIvIiE9dSYmIlxcIiE9dT90aGlzLl9wYXRoLnB1c2goIiIpOiIuIiE9bCYmKCJmaWxlIj09dGhpcy5fc2NoZW1lJiYwPT10aGlzLl9wYXRoLmxlbmd0aCYmMj09bC5sZW5ndGgmJnAudGVzdChsWzBdKSYmInwiPT1sWzFdJiYobD1sWzBdKyI6IiksdGhpcy5fcGF0aC5wdXNoKGwpKSxsPSIiLCI/Ij09dT8odGhpcy5fcXVlcnk9Ij8iLGo9InF1ZXJ5Iik6IiMiPT11JiYodGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iil9YnJlYWs7Y2FzZSJxdWVyeSI6Z3x8IiMiIT11P28hPXUmJiIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dSYmKHRoaXMuX3F1ZXJ5Kz1mKHUpKToodGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iik7YnJlYWs7Y2FzZSJmcmFnbWVudCI6byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fZnJhZ21lbnQrPXUpfWsrK319ZnVuY3Rpb24gaCgpe3RoaXMuX3NjaGVtZT0iIix0aGlzLl9zY2hlbWVEYXRhPSIiLHRoaXMuX3VzZXJuYW1lPSIiLHRoaXMuX3Bhc3N3b3JkPW51bGwsdGhpcy5faG9zdD0iIix0aGlzLl9wb3J0PSIiLHRoaXMuX3BhdGg9W10sdGhpcy5fcXVlcnk9IiIsdGhpcy5fZnJhZ21lbnQ9IiIsdGhpcy5faXNJbnZhbGlkPSExLHRoaXMuX2lzUmVsYXRpdmU9ITF9ZnVuY3Rpb24gaShhLGIpe3ZvaWQgMD09PWJ8fGIgaW5zdGFuY2VvZiBpfHwoYj1uZXcgaShTdHJpbmcoYikpKSx0aGlzLl91cmw9YSxoLmNhbGwodGhpcyk7dmFyIGM9YS5yZXBsYWNlKC9eWyBcdFxyXG5cZl0rfFsgXHRcclxuXGZdKyQvZywiIik7Zy5jYWxsKHRoaXMsYyxudWxsLGIpfXZhciBqPSExO2lmKCFhLmZvcmNlSlVSTCl0cnl7dmFyIGs9bmV3IFVSTCgiYiIsImh0dHA6Ly9hIik7aj0iaHR0cDovL2EvYiI9PT1rLmhyZWZ9Y2F0Y2gobCl7fWlmKCFqKXt2YXIgbT1PYmplY3QuY3JlYXRlKG51bGwpO20uZnRwPTIxLG0uZmlsZT0wLG0uZ29waGVyPTcwLG0uaHR0cD04MCxtLmh0dHBzPTQ0MyxtLndzPTgwLG0ud3NzPTQ0Mzt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO25bIiUyZSJdPSIuIixuWyIuJTJlIl09Ii4uIixuWyIlMmUuIl09Ii4uIixuWyIlMmUlMmUiXT0iLi4iO3ZhciBvPXZvaWQgMCxwPS9bYS16QS1aXS8scT0vW2EtekEtWjAtOVwrXC1cLl0vO2kucHJvdG90eXBlPXtnZXQgaHJlZigpe2lmKHRoaXMuX2lzSW52YWxpZClyZXR1cm4gdGhpcy5fdXJsO3ZhciBhPSIiO3JldHVybigiIiE9dGhpcy5fdXNlcm5hbWV8fG51bGwhPXRoaXMuX3Bhc3N3b3JkKSYmKGE9dGhpcy5fdXNlcm5hbWUrKG51bGwhPXRoaXMuX3Bhc3N3b3JkPyI6Iit0aGlzLl9wYXNzd29yZDoiIikrIkAiKSx0aGlzLnByb3RvY29sKyh0aGlzLl9pc1JlbGF0aXZlPyIvLyIrYSt0aGlzLmhvc3Q6IiIpK3RoaXMucGF0aG5hbWUrdGhpcy5fcXVlcnkrdGhpcy5fZnJhZ21lbnR9LHNldCBocmVmKGEpe2guY2FsbCh0aGlzKSxnLmNhbGwodGhpcyxhKX0sZ2V0IHByb3RvY29sKCl7cmV0dXJuIHRoaXMuX3NjaGVtZSsiOiJ9LHNldCBwcm90b2NvbChhKXt0aGlzLl9pc0ludmFsaWR8fGcuY2FsbCh0aGlzLGErIjoiLCJzY2hlbWUgc3RhcnQiKX0sZ2V0IGhvc3QoKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkPyIiOnRoaXMuX3BvcnQ/dGhpcy5faG9zdCsiOiIrdGhpcy5fcG9ydDp0aGlzLl9ob3N0fSxzZXQgaG9zdChhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZnLmNhbGwodGhpcyxhLCJob3N0Iil9LGdldCBob3N0bmFtZSgpe3JldHVybiB0aGlzLl9ob3N0fSxzZXQgaG9zdG5hbWUoYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmZy5jYWxsKHRoaXMsYSwiaG9zdG5hbWUiKX0sZ2V0IHBvcnQoKXtyZXR1cm4gdGhpcy5fcG9ydH0sc2V0IHBvcnQoYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmZy5jYWxsKHRoaXMsYSwicG9ydCIpfSxnZXQgcGF0aG5hbWUoKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkPyIiOnRoaXMuX2lzUmVsYXRpdmU/Ii8iK3RoaXMuX3BhdGguam9pbigiLyIpOnRoaXMuX3NjaGVtZURhdGF9LHNldCBwYXRobmFtZShhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiYodGhpcy5fcGF0aD1bXSxnLmNhbGwodGhpcyxhLCJyZWxhdGl2ZSBwYXRoIHN0YXJ0IikpfSxnZXQgc2VhcmNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX3F1ZXJ5fHwiPyI9PXRoaXMuX3F1ZXJ5PyIiOnRoaXMuX3F1ZXJ5fSxzZXQgc2VhcmNoKGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJih0aGlzLl9xdWVyeT0iPyIsIj8iPT1hWzBdJiYoYT1hLnNsaWNlKDEpKSxnLmNhbGwodGhpcyxhLCJxdWVyeSIpKX0sZ2V0IGhhc2goKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkfHwhdGhpcy5fZnJhZ21lbnR8fCIjIj09dGhpcy5fZnJhZ21lbnQ/IiI6dGhpcy5fZnJhZ21lbnR9LHNldCBoYXNoKGEpe3RoaXMuX2lzSW52YWxpZHx8KHRoaXMuX2ZyYWdtZW50PSIjIiwiIyI9PWFbMF0mJihhPWEuc2xpY2UoMSkpLGcuY2FsbCh0aGlzLGEsImZyYWdtZW50IikpfSxnZXQgb3JpZ2luKCl7dmFyIGE7aWYodGhpcy5faXNJbnZhbGlkfHwhdGhpcy5fc2NoZW1lKXJldHVybiIiO3N3aXRjaCh0aGlzLl9zY2hlbWUpe2Nhc2UiZGF0YSI6Y2FzZSJmaWxlIjpjYXNlImphdmFzY3JpcHQiOmNhc2UibWFpbHRvIjpyZXR1cm4ibnVsbCJ9cmV0dXJuIGE9dGhpcy5ob3N0LGE/dGhpcy5fc2NoZW1lKyI6Ly8iK2E6IiJ9fTt2YXIgcj1hLlVSTDtyJiYoaS5jcmVhdGVPYmplY3RVUkw9ZnVuY3Rpb24oKXtyZXR1cm4gci5jcmVhdGVPYmplY3RVUkwuYXBwbHkocixhcmd1bWVudHMpfSxpLnJldm9rZU9iamVjdFVSTD1mdW5jdGlvbihhKXtyLnJldm9rZU9iamVjdFVSTChhKX0pLGEuVVJMPWl9fSh0aGlzKSxmdW5jdGlvbigpe0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7cmV0dXJuIGQucHVzaC5hcHBseShkLGFyZ3VtZW50cyksYi5hcHBseShhLGQpfX0pfSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dS5wdXNoKGEpLHR8fCh0PSEwLHEoZCkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKXx8YX1mdW5jdGlvbiBkKCl7dD0hMTt2YXIgYT11O3U9W10sYS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEudWlkXy1iLnVpZF99KTt2YXIgYj0hMTthLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGM9YS50YWtlUmVjb3JkcygpO2UoYSksYy5sZW5ndGgmJihhLmNhbGxiYWNrXyhjLGEpLGI9ITApfSksYiYmZCgpfWZ1bmN0aW9uIGUoYSl7YS5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz1wLmdldChiKTtjJiZjLmZvckVhY2goZnVuY3Rpb24oYil7Yi5vYnNlcnZlcj09PWEmJmIucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9KX0pfWZ1bmN0aW9uIGYoYSxiKXtmb3IodmFyIGM9YTtjO2M9Yy5wYXJlbnROb2RlKXt2YXIgZD1wLmdldChjKTtpZihkKWZvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdLGc9Zi5vcHRpb25zO2lmKGM9PT1hfHxnLnN1YnRyZWUpe3ZhciBoPWIoZyk7aCYmZi5lbnF1ZXVlKGgpfX19fWZ1bmN0aW9uIGcoYSl7dGhpcy5jYWxsYmFja189YSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3Z9ZnVuY3Rpb24gaChhLGIpe3RoaXMudHlwZT1hLHRoaXMudGFyZ2V0PWIsdGhpcy5hZGRlZE5vZGVzPVtdLHRoaXMucmVtb3ZlZE5vZGVzPVtdLHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGkoYSl7dmFyIGI9bmV3IGgoYS50eXBlLGEudGFyZ2V0KTtyZXR1cm4gYi5hZGRlZE5vZGVzPWEuYWRkZWROb2Rlcy5zbGljZSgpLGIucmVtb3ZlZE5vZGVzPWEucmVtb3ZlZE5vZGVzLnNsaWNlKCksYi5wcmV2aW91c1NpYmxpbmc9YS5wcmV2aW91c1NpYmxpbmcsYi5uZXh0U2libGluZz1hLm5leHRTaWJsaW5nLGIuYXR0cmlidXRlTmFtZT1hLmF0dHJpYnV0ZU5hbWUsYi5hdHRyaWJ1dGVOYW1lc3BhY2U9YS5hdHRyaWJ1dGVOYW1lc3BhY2UsYi5vbGRWYWx1ZT1hLm9sZFZhbHVlLGJ9ZnVuY3Rpb24gaihhLGIpe3JldHVybiB3PW5ldyBoKGEsYil9ZnVuY3Rpb24gayhhKXtyZXR1cm4geD94Oih4PWkodykseC5vbGRWYWx1ZT1hLHgpfWZ1bmN0aW9uIGwoKXt3PXg9dm9pZCAwfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIGE9PT14fHxhPT09d31mdW5jdGlvbiBuKGEsYil7cmV0dXJuIGE9PT1iP2E6eCYmbShhKT94Om51bGx9ZnVuY3Rpb24gbyhhLGIsYyl7dGhpcy5vYnNlcnZlcj1hLHRoaXMudGFyZ2V0PWIsdGhpcy5vcHRpb25zPWMsdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdfXZhciBwPW5ldyBXZWFrTWFwLHE9d2luZG93Lm1zU2V0SW1tZWRpYXRlO2lmKCFxKXt2YXIgcj1bXSxzPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYSl7aWYoYS5kYXRhPT09cyl7dmFyIGI9cjtyPVtdLGIuZm9yRWFjaChmdW5jdGlvbihhKXthKCl9KX19KSxxPWZ1bmN0aW9uKGEpe3IucHVzaChhKSx3aW5kb3cucG9zdE1lc3NhZ2UocywiKiIpfX12YXIgdD0hMSx1PVtdLHY9MDtnLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2lmKGE9YyhhKSwhYi5jaGlsZExpc3QmJiFiLmF0dHJpYnV0ZXMmJiFiLmNoYXJhY3RlckRhdGF8fGIuYXR0cmlidXRlT2xkVmFsdWUmJiFiLmF0dHJpYnV0ZXN8fGIuYXR0cmlidXRlRmlsdGVyJiZiLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFiLmF0dHJpYnV0ZXN8fGIuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhYi5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgZD1wLmdldChhKTtkfHxwLnNldChhLGQ9W10pO2Zvcih2YXIgZSxmPTA7ZjxkLmxlbmd0aDtmKyspaWYoZFtmXS5vYnNlcnZlcj09PXRoaXMpe2U9ZFtmXSxlLnJlbW92ZUxpc3RlbmVycygpLGUub3B0aW9ucz1iO2JyZWFrfWV8fChlPW5ldyBvKHRoaXMsYSxiKSxkLnB1c2goZSksdGhpcy5ub2Rlc18ucHVzaChhKSksZS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7ZC5yZW1vdmVMaXN0ZW5lcnMoKSxiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX07dmFyIHcseDtvLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLm9ic2VydmVyLnJlY29yZHNfLGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+MCl7dmFyIGU9Y1tkLTFdLGY9bihlLGEpO2lmKGYpcmV0dXJuIHZvaWQoY1tkLTFdPWYpfWVsc2UgYih0aGlzLm9ic2VydmVyKTtjW2RdPWF9LGFkZExpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMuYWRkTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LGFkZExpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5hZGRFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0scmVtb3ZlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0scmVtb3ZlTGlzdGVuZXJzXzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnM7Yi5hdHRyaWJ1dGVzJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUF0dHJNb2RpZmllZCIsdGhpcywhMCksYi5jaGFyYWN0ZXJEYXRhJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcywhMCksYi5jaGlsZExpc3QmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NTm9kZUluc2VydGVkIix0aGlzLCEwKSwoYi5jaGlsZExpc3R8fGIuc3VidHJlZSkmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NTm9kZVJlbW92ZWQiLHRoaXMsITApfSxhZGRUcmFuc2llbnRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZihhIT09dGhpcy50YXJnZXQpe3RoaXMuYWRkTGlzdGVuZXJzXyhhKSx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXMucHVzaChhKTt2YXIgYj1wLmdldChhKTtifHxwLnNldChhLGI9W10pLGIucHVzaCh0aGlzKX19LHJlbW92ZVRyYW5zaWVudE9ic2VydmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlczt0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W10sYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyhhKTtmb3IodmFyIGI9cC5nZXQoYSksYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGJbY109PT10aGlzKXtiLnNwbGljZShjLDEpO2JyZWFrfX0sdGhpcyl9LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKGEpe3N3aXRjaChhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGEudHlwZSl7Y2FzZSJET01BdHRyTW9kaWZpZWQiOnZhciBiPWEuYXR0ck5hbWUsYz1hLnJlbGF0ZWROb2RlLm5hbWVzcGFjZVVSSSxkPWEudGFyZ2V0LGU9bmV3IGooImF0dHJpYnV0ZXMiLGQpO2UuYXR0cmlidXRlTmFtZT1iLGUuYXR0cmlidXRlTmFtZXNwYWNlPWM7dmFyIGc9YS5hdHRyQ2hhbmdlPT09TXV0YXRpb25FdmVudC5BRERJVElPTj9udWxsOmEucHJldlZhbHVlO2YoZCxmdW5jdGlvbihhKXtyZXR1cm4hYS5hdHRyaWJ1dGVzfHxhLmF0dHJpYnV0ZUZpbHRlciYmYS5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYikmJi0xPT09YS5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihjKT92b2lkIDA6YS5hdHRyaWJ1dGVPbGRWYWx1ZT9rKGcpOmV9KTticmVhaztjYXNlIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCI6dmFyIGQ9YS50YXJnZXQsZT1qKCJjaGFyYWN0ZXJEYXRhIixkKSxnPWEucHJldlZhbHVlO2YoZCxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGFyYWN0ZXJEYXRhP2EuY2hhcmFjdGVyRGF0YU9sZFZhbHVlP2soZyk6ZTp2b2lkIDB9KTticmVhaztjYXNlIkRPTU5vZGVSZW1vdmVkIjp0aGlzLmFkZFRyYW5zaWVudE9ic2VydmVyKGEudGFyZ2V0KTtjYXNlIkRPTU5vZGVJbnNlcnRlZCI6dmFyIGgsaSxkPWEucmVsYXRlZE5vZGUsbT1hLnRhcmdldDsiRE9NTm9kZUluc2VydGVkIj09PWEudHlwZT8oaD1bbV0saT1bXSk6KGg9W10saT1bbV0pO3ZhciBuPW0ucHJldmlvdXNTaWJsaW5nLG89bS5uZXh0U2libGluZyxlPWooImNoaWxkTGlzdCIsZCk7ZS5hZGRlZE5vZGVzPWgsZS5yZW1vdmVkTm9kZXM9aSxlLnByZXZpb3VzU2libGluZz1uLGUubmV4dFNpYmxpbmc9byxmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hpbGRMaXN0P2U6dm9pZCAwfSl9bCgpfX0sYS5Kc011dGF0aW9uT2JzZXJ2ZXI9ZyxhLk11dGF0aW9uT2JzZXJ2ZXJ8fChhLk11dGF0aW9uT2JzZXJ2ZXI9Zyl9KHRoaXMpLHdpbmRvdy5IVE1MSW1wb3J0cz13aW5kb3cuSFRNTEltcG9ydHN8fHtmbGFnczp7fX0sZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2I9Ynx8cSxkKGZ1bmN0aW9uKCl7ZihhLGIpfSxiKX1mdW5jdGlvbiBjKGEpe3JldHVybiJjb21wbGV0ZSI9PT1hLnJlYWR5U3RhdGV8fGEucmVhZHlTdGF0ZT09PXN9ZnVuY3Rpb24gZChhLGIpe2lmKGMoYikpYSYmYSgpO2Vsc2V7dmFyIGU9ZnVuY3Rpb24oKXsoImNvbXBsZXRlIj09PWIucmVhZHlTdGF0ZXx8Yi5yZWFkeVN0YXRlPT09cykmJihiLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxlKSxkKGEsYikpfTtiLmFkZEV2ZW50TGlzdGVuZXIodCxlKX19ZnVuY3Rpb24gZShhKXthLnRhcmdldC5fX2xvYWRlZD0hMH1mdW5jdGlvbiBmKGEsYil7ZnVuY3Rpb24gYygpe2g9PWkmJmEmJmEoKX1mdW5jdGlvbiBkKGEpe2UoYSksaCsrLGMoKX12YXIgZj1iLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxoPTAsaT1mLmxlbmd0aDtpZihpKWZvcih2YXIgaixrPTA7aT5rJiYoaj1mW2tdKTtrKyspZyhqKT9kLmNhbGwoaix7dGFyZ2V0Omp9KTooai5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixkKSxqLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixkKSk7ZWxzZSBjKCl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gbT9hLl9fbG9hZGVkfHxhLmltcG9ydCYmImxvYWRpbmciIT09YS5pbXBvcnQucmVhZHlTdGF0ZTphLl9faW1wb3J0UGFyc2VkfWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiLGM9MCxkPWEubGVuZ3RoO2Q+YyYmKGI9YVtjXSk7YysrKWkoYikmJmooYil9ZnVuY3Rpb24gaShhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmImltcG9ydCI9PT1hLnJlbH1mdW5jdGlvbiBqKGEpe3ZhciBiPWEuaW1wb3J0O2I/ZSh7dGFyZ2V0OmF9KTooYS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixlKSxhLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixlKSl9dmFyIGs9ImltcG9ydCIsbD1rIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKSxtPWwsbj0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxvPUJvb2xlYW4od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxwPWZ1bmN0aW9uKGEpe3JldHVybiBvP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKTphfSxxPXAoZG9jdW1lbnQpLHI9e2dldDpmdW5jdGlvbigpe3ZhciBhPUhUTUxJbXBvcnRzLmN1cnJlbnRTY3JpcHR8fGRvY3VtZW50LmN1cnJlbnRTY3JpcHR8fCgiY29tcGxldGUiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZT9kb2N1bWVudC5zY3JpcHRzW2RvY3VtZW50LnNjcmlwdHMubGVuZ3RoLTFdOm51bGwpO3JldHVybiBwKGEpfSxjb25maWd1cmFibGU6ITB9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudCwiX2N1cnJlbnRTY3JpcHQiLHIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShxLCJfY3VycmVudFNjcmlwdCIscik7dmFyIHM9bj8iY29tcGxldGUiOiJpbnRlcmFjdGl2ZSIsdD0icmVhZHlzdGF0ZWNoYW5nZSI7bSYmKG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTAsZD1hLmxlbmd0aDtkPmMmJihiPWFbY10pO2MrKyliLmFkZGVkTm9kZXMmJmgoYi5hZGRlZE5vZGVzKX0pLm9ic2VydmUoZG9jdW1lbnQuaGVhZCx7Y2hpbGRMaXN0OiEwfSksZnVuY3Rpb24oKXtpZigibG9hZGluZyI9PT1kb2N1bWVudC5yZWFkeVN0YXRlKWZvcih2YXIgYSxiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxjPTAsZD1iLmxlbmd0aDtkPmMmJihhPWJbY10pO2MrKylqKGEpfSgpKSxiKGZ1bmN0aW9uKCl7SFRNTEltcG9ydHMucmVhZHk9ITAsSFRNTEltcG9ydHMucmVhZHlUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHEuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoIkhUTUxJbXBvcnRzTG9hZGVkIix7YnViYmxlczohMH0pKX0pLGEudXNlTmF0aXZlPW0sYS5pc0ltcG9ydExvYWRlZD1nLGEud2hlblJlYWR5PWIsYS5yb290RG9jdW1lbnQ9cSxhLklNUE9SVF9MSU5LX1RZUEU9ayxhLmlzSUU9bn0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXt2YXIgYj0oYS5wYXRoLGEueGhyKSxjPWEuZmxhZ3MsZD1mdW5jdGlvbihhLGIpe3RoaXMuY2FjaGU9e30sdGhpcy5vbmxvYWQ9YSx0aGlzLm9uY29tcGxldGU9Yix0aGlzLmluZmxpZ2h0PTAsdGhpcy5wZW5kaW5nPXt9fTtkLnByb3RvdHlwZT17YWRkTm9kZXM6ZnVuY3Rpb24oYSl7dGhpcy5pbmZsaWdodCs9YS5sZW5ndGg7Zm9yKHZhciBiLGM9MCxkPWEubGVuZ3RoO2Q+YyYmKGI9YVtjXSk7YysrKXRoaXMucmVxdWlyZShiKTt0aGlzLmNoZWNrRG9uZSgpfSxhZGROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW5mbGlnaHQrKyx0aGlzLnJlcXVpcmUoYSksdGhpcy5jaGVja0RvbmUoKX0scmVxdWlyZTpmdW5jdGlvbihhKXt2YXIgYj1hLnNyY3x8YS5ocmVmO2EuX19ub2RlVXJsPWIsdGhpcy5kZWR1cGUoYixhKXx8dGhpcy5mZXRjaChiLGEpfSxkZWR1cGU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnBlbmRpbmdbYV0pcmV0dXJuIHRoaXMucGVuZGluZ1thXS5wdXNoKGIpLCEwO3JldHVybiB0aGlzLmNhY2hlW2FdPyh0aGlzLm9ubG9hZChhLGIsdGhpcy5jYWNoZVthXSksdGhpcy50YWlsKCksITApOih0aGlzLnBlbmRpbmdbYV09W2JdLCExKX0sZmV0Y2g6ZnVuY3Rpb24oYSxkKXtpZihjLmxvYWQmJmNvbnNvbGUubG9nKCJmZXRjaCIsYSxkKSxhLm1hdGNoKC9eZGF0YTovKSl7dmFyIGU9YS5zcGxpdCgiLCIpLGY9ZVswXSxnPWVbMV07Zz1mLmluZGV4T2YoIjtiYXNlNjQiKT4tMT9hdG9iKGcpOmRlY29kZVVSSUNvbXBvbmVudChnKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5yZWNlaXZlKGEsZCxudWxsLGcpfS5iaW5kKHRoaXMpLDApfWVsc2V7dmFyIGg9ZnVuY3Rpb24oYixjLGUpe3RoaXMucmVjZWl2ZShhLGQsYixjLGUpfS5iaW5kKHRoaXMpO2IubG9hZChhLGgpfX0scmVjZWl2ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3RoaXMuY2FjaGVbYV09ZDtmb3IodmFyIGYsZz10aGlzLnBlbmRpbmdbYV0saD0wLGk9Zy5sZW5ndGg7aT5oJiYoZj1nW2hdKTtoKyspdGhpcy5vbmxvYWQoYSxmLGQsYyxlKSx0aGlzLnRhaWwoKTt0aGlzLnBlbmRpbmdbYV09bnVsbH0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19LGI9Ynx8e2FzeW5jOiEwLG9rOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fDMwND09PWEuc3RhdHVzfHwwPT09YS5zdGF0dXN9LGxvYWQ6ZnVuY3Rpb24oYyxkLGUpe3ZhciBmPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4oYS5mbGFncy5kZWJ1Z3x8YS5mbGFncy5idXN0KSYmKGMrPSI/IitNYXRoLnJhbmRvbSgpKSxmLm9wZW4oIkdFVCIsYyxiLmFzeW5jKSxmLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGZ1bmN0aW9uKCl7aWYoND09PWYucmVhZHlTdGF0ZSl7dmFyIGE9Zi5nZXRSZXNwb25zZUhlYWRlcigiTG9jYXRpb24iKSxjPW51bGw7aWYoYSl2YXIgYz0iLyI9PT1hLnN1YnN0cigwLDEpP2xvY2F0aW9uLm9yaWdpbithOmE7ZC5jYWxsKGUsIWIub2soZikmJmYsZi5yZXNwb25zZXx8Zi5yZXNwb25zZVRleHQsYyl9fSksZi5zZW5kKCksZn0sbG9hZERvY3VtZW50OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmxvYWQoYSxiLGMpLnJlc3BvbnNlVHlwZT0iZG9jdW1lbnQifX0sYS54aHI9YixhLkxvYWRlcj1kfSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEucmVsPT09an1mdW5jdGlvbiBjKGEpe3ZhciBiPWQoYSk7cmV0dXJuImRhdGE6dGV4dC9qYXZhc2NyaXB0O2NoYXJzZXQ9dXRmLTgsIitlbmNvZGVVUklDb21wb25lbnQoYil9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS50ZXh0Q29udGVudCtlKGEpfWZ1bmN0aW9uIGUoYSl7dmFyIGI9YS5fX25vZGVVcmw7aWYoIWIpe2I9YS5vd25lckRvY3VtZW50LmJhc2VVUkk7dmFyIGM9IlsiK01hdGguZmxvb3IoMWUzKihNYXRoLnJhbmRvbSgpKzEpKSsiXSIsZD1hLnRleHRDb250ZW50Lm1hdGNoKC9Qb2x5bWVyXChbJyJdKFteJyJdKikvKTtjPWQmJmRbMV18fGMsYis9Ii8iK2MrIi5qcyJ9cmV0dXJuIlxuLy8jIHNvdXJjZVVSTD0iK2IrIlxuIn1mdW5jdGlvbiBmKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3JldHVybiBiLnRleHRDb250ZW50PWEudGV4dENvbnRlbnQsbi5yZXNvbHZlVXJsc0luU3R5bGUoYiksYn12YXIgZz1hLnJvb3REb2N1bWVudCxoPWEuZmxhZ3MsaT1hLmlzSUUsaj1hLklNUE9SVF9MSU5LX1RZUEUsaz17ZG9jdW1lbnRTZWxlY3RvcnM6ImxpbmtbcmVsPSIraisiXSIsaW1wb3J0c1NlbGVjdG9yczpbImxpbmtbcmVsPSIraisiXSIsImxpbmtbcmVsPXN0eWxlc2hlZXRdIiwic3R5bGUiLCJzY3JpcHQ6bm90KFt0eXBlXSkiLCdzY3JpcHRbdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXS5qb2luKCIsIiksbWFwOntsaW5rOiJwYXJzZUxpbmsiLHNjcmlwdDoicGFyc2VTY3JpcHQiLHN0eWxlOiJwYXJzZVN0eWxlIn0sZHluYW1pY0VsZW1lbnRzOltdLHBhcnNlTmV4dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubmV4dFRvUGFyc2UoKTthJiZ0aGlzLnBhcnNlKGEpfSxwYXJzZTpmdW5jdGlvbihhKXtpZih0aGlzLmlzUGFyc2VkKGEpKXJldHVybiB2b2lkKGgucGFyc2UmJmNvbnNvbGUubG9nKCJbJXNdIGlzIGFscmVhZHkgcGFyc2VkIixhLmxvY2FsTmFtZSkpO3ZhciBiPXRoaXNbdGhpcy5tYXBbYS5sb2NhbE5hbWVdXTtiJiYodGhpcy5tYXJrUGFyc2luZyhhKSxiLmNhbGwodGhpcyxhKSl9LHBhcnNlRHluYW1pYzpmdW5jdGlvbihhLGIpe3RoaXMuZHluYW1pY0VsZW1lbnRzLnB1c2goYSksYnx8dGhpcy5wYXJzZU5leHQoKX0sbWFya1BhcnNpbmc6ZnVuY3Rpb24oYSl7aC5wYXJzZSYmY29uc29sZS5sb2coInBhcnNpbmciLGEpLHRoaXMucGFyc2luZ0VsZW1lbnQ9YX0sbWFya1BhcnNpbmdDb21wbGV0ZTpmdW5jdGlvbihhKXthLl9faW1wb3J0UGFyc2VkPSEwLHRoaXMubWFya0R5bmFtaWNQYXJzaW5nQ29tcGxldGUoYSksYS5fX2ltcG9ydEVsZW1lbnQmJihhLl9faW1wb3J0RWxlbWVudC5fX2ltcG9ydFBhcnNlZD0hMCx0aGlzLm1hcmtEeW5hbWljUGFyc2luZ0NvbXBsZXRlKGEuX19pbXBvcnRFbGVtZW50KSksdGhpcy5wYXJzaW5nRWxlbWVudD1udWxsLGgucGFyc2UmJmNvbnNvbGUubG9nKCJjb21wbGV0ZWQiLGEpfSxtYXJrRHluYW1pY1BhcnNpbmdDb21wbGV0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmR5bmFtaWNFbGVtZW50cy5pbmRleE9mKGEpO2I+PTAmJnRoaXMuZHluYW1pY0VsZW1lbnRzLnNwbGljZShiLDEpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXtpZihIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vayYmSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2soYSksYS5pbXBvcnQmJihhLmltcG9ydC5fX2ltcG9ydFBhcnNlZD0hMCksdGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGEpLGEuZGlzcGF0Y2hFdmVudChhLl9fcmVzb3VyY2UmJiFhLl9fZXJyb3I/bmV3IEN1c3RvbUV2ZW50KCJsb2FkIix7YnViYmxlczohMX0pOm5ldyBDdXN0b21FdmVudCgiZXJyb3IiLHtidWJibGVzOiExfSkpLGEuX19wZW5kaW5nKWZvcih2YXIgYjthLl9fcGVuZGluZy5sZW5ndGg7KWI9YS5fX3BlbmRpbmcuc2hpZnQoKSxiJiZiKHt0YXJnZXQ6YX0pO3RoaXMucGFyc2VOZXh0KCl9LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpP3RoaXMucGFyc2VJbXBvcnQoYSk6KGEuaHJlZj1hLmhyZWYsdGhpcy5wYXJzZUdlbmVyaWMoYSkpfSxwYXJzZVN0eWxlOmZ1bmN0aW9uKGEpe3ZhciBiPWE7YT1mKGEpLGEuX19pbXBvcnRFbGVtZW50PWIsdGhpcy5wYXJzZUdlbmVyaWMoYSl9LHBhcnNlR2VuZXJpYzpmdW5jdGlvbihhKXt0aGlzLnRyYWNrRWxlbWVudChhKSx0aGlzLmFkZEVsZW1lbnRUb0RvY3VtZW50KGEpfSxyb290SW1wb3J0Rm9yRWxlbWVudDpmdW5jdGlvbihhKXtmb3IodmFyIGI9YTtiLm93bmVyRG9jdW1lbnQuX19pbXBvcnRMaW5rOyliPWIub3duZXJEb2N1bWVudC5fX2ltcG9ydExpbms7cmV0dXJuIGJ9LGFkZEVsZW1lbnRUb0RvY3VtZW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnJvb3RJbXBvcnRGb3JFbGVtZW50KGEuX19pbXBvcnRFbGVtZW50fHxhKSxjPWIuX19pbnNlcnRlZEVsZW1lbnRzPWIuX19pbnNlcnRlZEVsZW1lbnRzfHwwLGQ9Yi5uZXh0RWxlbWVudFNpYmxpbmcsZT0wO2M+ZTtlKyspZD1kJiZkLm5leHRFbGVtZW50U2libGluZztiLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsZCl9LHRyYWNrRWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1mdW5jdGlvbihkKXtiJiZiKGQpLGMubWFya1BhcnNpbmdDb21wbGV0ZShhKSxjLnBhcnNlTmV4dCgpfTtpZihhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGQpLGEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQpLGkmJiJzdHlsZSI9PT1hLmxvY2FsTmFtZSl7dmFyIGU9ITE7aWYoLTE9PWEudGV4dENvbnRlbnQuaW5kZXhPZigiQGltcG9ydCIpKWU9ITA7ZWxzZSBpZihhLnNoZWV0KXtlPSEwO2Zvcih2YXIgZixnPWEuc2hlZXQuY3NzUnVsZXMsaD1nP2cubGVuZ3RoOjAsaj0wO2g+aiYmKGY9Z1tqXSk7aisrKWYudHlwZT09PUNTU1J1bGUuSU1QT1JUX1JVTEUmJihlPWUmJkJvb2xlYW4oZi5zdHlsZVNoZWV0KSl9ZSYmYS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgibG9hZCIse2J1YmJsZXM6ITF9KSl9fSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLl9faW1wb3J0RWxlbWVudD1iLGQuc3JjPWIuc3JjP2Iuc3JjOmMoYiksYS5jdXJyZW50U2NyaXB0PWIsdGhpcy50cmFja0VsZW1lbnQoZCxmdW5jdGlvbigpe2QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSxhLmN1cnJlbnRTY3JpcHQ9bnVsbH0pLHRoaXMuYWRkRWxlbWVudFRvRG9jdW1lbnQoZCl9LG5leHRUb1BhcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heVBhcnNlPVtdLCF0aGlzLnBhcnNpbmdFbGVtZW50JiYodGhpcy5uZXh0VG9QYXJzZUluRG9jKGcpfHx0aGlzLm5leHRUb1BhcnNlRHluYW1pYygpKX0sbmV4dFRvUGFyc2VJbkRvYzpmdW5jdGlvbihhLGMpe2lmKGEmJnRoaXMuX21heVBhcnNlLmluZGV4T2YoYSk8MCl7dGhpcy5fbWF5UGFyc2UucHVzaChhKTtmb3IodmFyIGQsZT1hLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5wYXJzZVNlbGVjdG9yc0Zvck5vZGUoYSkpLGY9MCxnPWUubGVuZ3RoO2c+ZiYmKGQ9ZVtmXSk7ZisrKWlmKCF0aGlzLmlzUGFyc2VkKGQpKXJldHVybiB0aGlzLmhhc1Jlc291cmNlKGQpP2IoZCk/dGhpcy5uZXh0VG9QYXJzZUluRG9jKGQuaW1wb3J0LGQpOmQ6dm9pZCAwfXJldHVybiBjfSxuZXh0VG9QYXJzZUR5bmFtaWM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5keW5hbWljRWxlbWVudHNbMF19LHBhcnNlU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGE7cmV0dXJuIGI9PT1nP3RoaXMuZG9jdW1lbnRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzU2VsZWN0b3JzfSxpc1BhcnNlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5fX2ltcG9ydFBhcnNlZH0sbmVlZHNEeW5hbWljUGFyc2luZzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5keW5hbWljRWxlbWVudHMuaW5kZXhPZihhKT49MH0saGFzUmVzb3VyY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSkmJnZvaWQgMD09PWEuaW1wb3J0PyExOiEwfX0sbD0vKHVybFwoKShbXildKikoXCkpL2csbT0vKEBpbXBvcnRbXHNdKyg/IXVybFwoKSkoW147XSopKDspL2csbj17cmVzb2x2ZVVybHNJblN0eWxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudCxjPWIuY3JlYXRlRWxlbWVudCgiYSIpO3JldHVybiBhLnRleHRDb250ZW50PXRoaXMucmVzb2x2ZVVybHNJbkNzc1RleHQoYS50ZXh0Q29udGVudCxjKSxhfSxyZXNvbHZlVXJsc0luQ3NzVGV4dDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucmVwbGFjZVVybHMoYSxiLGwpO3JldHVybiBjPXRoaXMucmVwbGFjZVVybHMoYyxiLG0pfSxyZXBsYWNlVXJsczpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEucmVwbGFjZShjLGZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmPWQucmVwbGFjZSgvWyInXS9nLCIiKTtyZXR1cm4gYi5ocmVmPWYsZj1iLmhyZWYsYysiJyIrZisiJyIrZX0pfX07YS5wYXJzZXI9ayxhLnBhdGg9bn0oSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGMoYSxnKX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWJ9ZnVuY3Rpb24gZChhLGIpe3ZhciBjPWE7YyBpbnN0YW5jZW9mIERvY3VtZW50fHwoYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoZykpLGMuX1VSTD1iO3ZhciBkPWMuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2Quc2V0QXR0cmlidXRlKCJocmVmIixiKSxjLmJhc2VVUkl8fChjLmJhc2VVUkk9Yik7dmFyIGU9Yy5jcmVhdGVFbGVtZW50KCJtZXRhIik7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJjaGFyc2V0IiwidXRmLTgiKSxjLmhlYWQuYXBwZW5kQ2hpbGQoZSksYy5oZWFkLmFwcGVuZENoaWxkKGQpLGEgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGMuYm9keS5pbm5lckhUTUw9YSksd2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChjKSxjfXZhciBlPWEudXNlTmF0aXZlLGY9YS5mbGFncyxnPWEuSU1QT1JUX0xJTktfVFlQRTtpZihlKXZhciBoPXt9O2Vsc2V7dmFyIGk9YS5yb290RG9jdW1lbnQsaj0oYS54aHIsYS5Mb2FkZXIpLGs9YS5wYXJzZXIsaD17ZG9jdW1lbnRzOnt9LGRvY3VtZW50UHJlbG9hZFNlbGVjdG9yczoibGlua1tyZWw9IitnKyJdIixpbXBvcnRzUHJlbG9hZFNlbGVjdG9yczpbImxpbmtbcmVsPSIrZysiXSJdLmpvaW4oIiwiKSxsb2FkTm9kZTpmdW5jdGlvbihhKXtsLmFkZE5vZGUoYSl9LGxvYWRTdWJ0cmVlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubWFyc2hhbE5vZGVzKGEpO2wuYWRkTm9kZXMoYil9LG1hcnNoYWxOb2RlczpmdW5jdGlvbihhKXtyZXR1cm4gYS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMubG9hZFNlbGVjdG9yc0Zvck5vZGUoYSkpfSxsb2FkU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGE7cmV0dXJuIGI9PT1pP3RoaXMuZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzOnRoaXMuaW1wb3J0c1ByZWxvYWRTZWxlY3RvcnN9LGxvYWRlZDpmdW5jdGlvbihhLGMsZSxnLGgpe2lmKGYubG9hZCYmY29uc29sZS5sb2coImxvYWRlZCIsYSxjKSxjLl9fcmVzb3VyY2U9ZSxjLl9fZXJyb3I9ZyxiKGMpKXt2YXIgaT10aGlzLmRvY3VtZW50c1thXTt2b2lkIDA9PT1pJiYoaT1nP251bGw6ZChlLGh8fGEpLGkmJihpLl9faW1wb3J0TGluaz1jLHRoaXMuYm9vdERvY3VtZW50KGkpKSx0aGlzLmRvY3VtZW50c1thXT1pKSxjLmltcG9ydD1pfWsucGFyc2VOZXh0KCl9LGJvb3REb2N1bWVudDpmdW5jdGlvbihhKXt0aGlzLmxvYWRTdWJ0cmVlKGEpLHRoaXMub2JzZXJ2ZShhKSxrLnBhcnNlTmV4dCgpfSxsb2FkZWRBbGw6ZnVuY3Rpb24oKXtrLnBhcnNlTmV4dCgpfX0sbD1uZXcgaihoLmxvYWRlZC5iaW5kKGgpLGgubG9hZGVkQWxsLmJpbmQoaCkpO2lmKCFkb2N1bWVudC5iYXNlVVJJKXt2YXIgbT17Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYmFzZSIpO3JldHVybiBhP2EuaHJlZjp3aW5kb3cubG9jYXRpb24uaHJlZn0sY29uZmlndXJhYmxlOiEwfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsImJhc2VVUkkiLG0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLCJiYXNlVVJJIixtKX0iZnVuY3Rpb24iIT10eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50JiYod2luZG93LkN1c3RvbUV2ZW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYy5pbml0RXZlbnQoYSxiLmJ1YmJsZXM9PT0hMT8hMTohMCxiLmNhbmNlbGFibGU9PT0hMT8hMTohMCxiLmRldGFpbCksY30pfWEuaW1wb3J0ZXI9aCxhLklNUE9SVF9MSU5LX1RZUEU9ZyxhLmltcG9ydExvYWRlcj1sfSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zm9yKHZhciBiLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGI9YVtkXSk7ZCsrKSJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMubGVuZ3RoJiZjKGIuYWRkZWROb2Rlcyl9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGIsZixpLGosaz0wLGw9YS5sZW5ndGg7bD5rJiYoaT1hW2tdKTtrKyspYnx8KGI9aS5vd25lckRvY3VtZW50LGY9aC5pc1BhcnNlZChiKSksaj1kKGkpLGomJmcubG9hZE5vZGUoaSksZShpKSYmZiYmaC5wYXJzZUR5bmFtaWMoaSxqKSxpLmNoaWxkcmVuJiZpLmNoaWxkcmVuLmxlbmd0aCYmYyhpLmNoaWxkcmVuKX1mdW5jdGlvbiBkKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZSYmaS5jYWxsKGEsZy5sb2FkU2VsZWN0b3JzRm9yTm9kZShhKSl9ZnVuY3Rpb24gZShhKXtyZXR1cm4gMT09PWEubm9kZVR5cGUmJmkuY2FsbChhLGgucGFyc2VTZWxlY3RvcnNGb3JOb2RlKGEpKX1mdW5jdGlvbiBmKGEpe2oub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfXZhciBnPShhLklNUE9SVF9MSU5LX1RZUEUsYS5pbXBvcnRlciksaD1hLnBhcnNlcixpPUhUTUxFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3Isaj1uZXcgTXV0YXRpb25PYnNlcnZlcihiKTthLm9ic2VydmU9ZixnLm9ic2VydmU9Zn0oSFRNTEltcG9ydHMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe0hUTUxJbXBvcnRzLmltcG9ydGVyLmJvb3REb2N1bWVudChiKX12YXIgYj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7SFRNTEltcG9ydHMudXNlTmF0aXZlfHwoImNvbXBsZXRlIj09PWRvY3VtZW50LnJlYWR5U3RhdGV8fCJpbnRlcmFjdGl2ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlJiYhd2luZG93LmF0dGFjaEV2ZW50P2EoKTpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixhKSl9KCksd2luZG93LkN1c3RvbUVsZW1lbnRzPXdpbmRvdy5DdXN0b21FbGVtZW50c3x8e2ZsYWdzOnt9fSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyxkKXt2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2lmKCFlKWZvcihlPWEuZmlyc3RDaGlsZDtlJiZlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWU9ZS5uZXh0U2libGluZztmb3IoO2U7KWMoZSxkKSE9PSEwJiZiKGUsYyxkKSxlPWUubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiKXtmb3IodmFyIGM9YS5zaGFkb3dSb290O2M7KWQoYyxiKSxjPWMub2xkZXJTaGFkb3dSb290fWZ1bmN0aW9uIGQoYSxkKXtiKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSk/ITA6dm9pZCBjKGEsZCl9KSxjKGEsZCl9ZnVuY3Rpb24gZShhKXtyZXR1cm4gaChhKT8oaShhKSwhMCk6dm9pZCBsKGEpfWZ1bmN0aW9uIGYoYSl7ZChhLGZ1bmN0aW9uKGEpe3JldHVybiBlKGEpPyEwOnZvaWQgMH0pfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIGUoYSl8fGYoYSl9ZnVuY3Rpb24gaChiKXtpZighYi5fX3VwZ3JhZGVkX18mJmIubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoImlzIil8fGIubG9jYWxOYW1lLGQ9YS5yZWdpc3RyeVtjXTtpZihkKXJldHVybiBCLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZToiLGIubG9jYWxOYW1lKSxhLnVwZ3JhZGUoYiksQi5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSwhMH19ZnVuY3Rpb24gaShhKXtsKGEpLHIoYSkmJmQoYSxmdW5jdGlvbihhKXtsKGEpfSl9ZnVuY3Rpb24gaihhKXtpZihHLnB1c2goYSksIUYpe0Y9ITA7dmFyIGI9d2luZG93LlBsYXRmb3JtJiZ3aW5kb3cuUGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2t8fHNldFRpbWVvdXQ7YihrKX19ZnVuY3Rpb24gaygpe0Y9ITE7Zm9yKHZhciBhLGI9RyxjPTAsZD1iLmxlbmd0aDtkPmMmJihhPWJbY10pO2MrKylhKCk7Rz1bXX1mdW5jdGlvbiBsKGEpe0Q/aihmdW5jdGlvbigpe20oYSl9KTptKGEpfWZ1bmN0aW9uIG0oYSl7KGEuYXR0YWNoZWRDYWxsYmFja3x8YS5kZXRhY2hlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmQi5kb20pJiYoQi5kb20mJmNvbnNvbGUuZ3JvdXAoImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLHIoYSkmJihhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCkrMSxhLl9faW5zZXJ0ZWQ8MSYmKGEuX19pbnNlcnRlZD0xKSxhLl9faW5zZXJ0ZWQ+MT9CLmRvbSYmY29uc29sZS53YXJuKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLmF0dGFjaGVkQ2FsbGJhY2smJihCLmRvbSYmY29uc29sZS5sb2coImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLGEuYXR0YWNoZWRDYWxsYmFjaygpKSksQi5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gbihhKXtvKGEpLGQoYSxmdW5jdGlvbihhKXtvKGEpfSl9ZnVuY3Rpb24gbyhhKXtEP2ooZnVuY3Rpb24oKXtwKGEpfSk6cChhKX1mdW5jdGlvbiBwKGEpeyhhLmF0dGFjaGVkQ2FsbGJhY2t8fGEuZGV0YWNoZWRDYWxsYmFja3x8YS5fX3VwZ3JhZGVkX18mJkIuZG9tKSYmKEIuZG9tJiZjb25zb2xlLmdyb3VwKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUpLHIoYSl8fChhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCktMSxhLl9faW5zZXJ0ZWQ+MCYmKGEuX19pbnNlcnRlZD0wKSxhLl9faW5zZXJ0ZWQ8MD9CLmRvbSYmY29uc29sZS53YXJuKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuZGV0YWNoZWRDYWxsYmFjayYmYS5kZXRhY2hlZENhbGxiYWNrKCkpLEIuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCkpfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD9TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSk6YX1mdW5jdGlvbiByKGEpe2Zvcih2YXIgYj1hLGM9cShkb2N1bWVudCk7Yjspe2lmKGI9PWMpcmV0dXJuITA7Yj1iLnBhcmVudE5vZGV8fGIuaG9zdH19ZnVuY3Rpb24gcyhhKXtpZihhLnNoYWRvd1Jvb3QmJiFhLnNoYWRvd1Jvb3QuX193YXRjaGVkKXtCLmRvbSYmY29uc29sZS5sb2coIndhdGNoaW5nIHNoYWRvdy1yb290IGZvcjogIixhLmxvY2FsTmFtZSk7Zm9yKHZhciBiPWEuc2hhZG93Um9vdDtiOyl0KGIpLGI9Yi5vbGRlclNoYWRvd1Jvb3R9fWZ1bmN0aW9uIHQoYSl7dyhhKX1mdW5jdGlvbiB1KGEpe2lmKEIuZG9tKXt2YXIgYj1hWzBdO2lmKGImJiJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMmJmIuYWRkZWROb2Rlcyl7Zm9yKHZhciBjPWIuYWRkZWROb2Rlc1swXTtjJiZjIT09ZG9jdW1lbnQmJiFjLmhvc3Q7KWM9Yy5wYXJlbnROb2RlO3ZhciBkPWMmJihjLlVSTHx8Yy5fVVJMfHxjLmhvc3QmJmMuaG9zdC5sb2NhbE5hbWUpfHwiIjtkPWQuc3BsaXQoIi8/Iikuc2hpZnQoKS5zcGxpdCgiLyIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoIm11dGF0aW9ucyAoJWQpIFslc10iLGEubGVuZ3RoLGR8fCIiKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7ImNoaWxkTGlzdCI9PT1hLnR5cGUmJihIKGEuYWRkZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmZyhhKX0pLEgoYS5yZW1vdmVkTm9kZXMsZnVuY3Rpb24oYSl7YS5sb2NhbE5hbWUmJm4oYSl9KSl9KSxCLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHYoYSl7Zm9yKGF8fChhPXEoZG9jdW1lbnQpKTthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3ZhciBiPWEuX19vYnNlcnZlcjtiJiYodShiLnRha2VSZWNvcmRzKCkpLGsoKSl9ZnVuY3Rpb24gdyhhKXtpZighYS5fX29ic2VydmVyKXt2YXIgYj1uZXcgTXV0YXRpb25PYnNlcnZlcih1KTtiLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KSxhLl9fb2JzZXJ2ZXI9Yn19ZnVuY3Rpb24geChhKXt3KGEpfWZ1bmN0aW9uIHkoYSl7Qi5kb20mJmNvbnNvbGUuZ3JvdXAoInVwZ3JhZGVEb2N1bWVudDogIixhLmJhc2VVUkkuc3BsaXQoIi8iKS5wb3AoKSksZyhhKSxCLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHooYSl7RT1bXSxBKGEpLEU9bnVsbH1mdW5jdGlvbiBBKGEpe2lmKGE9cShhKSwhKEUuaW5kZXhPZihhKT49MCkpe0UucHVzaChhKTtmb3IodmFyIGIsYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPSIrQysiXSIpLGQ9MCxlPWMubGVuZ3RoO2U+ZCYmKGI9Y1tkXSk7ZCsrKWIuaW1wb3J0JiZiLmltcG9ydC5fX3BhcnNlZCYmQShiLmltcG9ydCk7eShhKX19dmFyIEI9d2luZG93LmxvZ0ZsYWdzfHx7fSxDPXdpbmRvdy5IVE1MSW1wb3J0cz9IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOiJub25lIixEPSF3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9PT13aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyO2EuaGFzUG9seWZpbGxNdXRhdGlvbnM9RDt2YXIgRSxGPSExLEc9W10sSD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EuSU1QT1JUX0xJTktfVFlQRT1DLGEud2F0Y2hTaGFkb3c9cyxhLnVwZ3JhZGVEb2N1bWVudFRyZWU9eixhLnVwZ3JhZGVBbGw9ZyxhLnVwZ3JhZGVTdWJ0cmVlPWYsYS5pbnNlcnRlZE5vZGU9aSxhLm9ic2VydmVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50PXksYS50YWtlUmVjb3Jkcz12fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixnKXt2YXIgaD1nfHx7fTtpZighYil0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgYG5hbWVgIG11c3Qgbm90IGJlIGVtcHR5Iik7aWYoYi5pbmRleE9mKCItIik8MCl0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgKCduYW1lJykgbXVzdCBjb250YWluIGEgZGFzaCAoJy0nKS4gQXJndW1lbnQgcHJvdmlkZWQgd2FzICciK1N0cmluZyhiKSsiJy4iKTtpZihjKGIpKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGV4ZWN1dGUgJ3JlZ2lzdGVyRWxlbWVudCcgb24gJ0RvY3VtZW50JzogUmVnaXN0cmF0aW9uIGZhaWxlZCBmb3IgdHlwZSAnIitTdHJpbmcoYikrIicuIFRoZSB0eXBlIG5hbWUgaXMgaW52YWxpZC4iKTtpZihuKGIpKXRocm93IG5ldyBFcnJvcigiRHVwbGljYXRlRGVmaW5pdGlvbkVycm9yOiBhIHR5cGUgd2l0aCBuYW1lICciK1N0cmluZyhiKSsiJyBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQiKTtpZighaC5wcm90b3R5cGUpdGhyb3cgbmV3IEVycm9yKCJPcHRpb25zIG1pc3NpbmcgcmVxdWlyZWQgcHJvdG90eXBlIHByb3BlcnR5Iik7cmV0dXJuIGguX19uYW1lPWIudG9Mb3dlckNhc2UoKSxoLmxpZmVjeWNsZT1oLmxpZmVjeWNsZXx8e30saC5hbmNlc3RyeT1kKGguZXh0ZW5kcyksZShoKSxmKGgpLGwoaC5wcm90b3R5cGUpLG8oaC5fX25hbWUsaCksaC5jdG9yPXAoaCksaC5jdG9yLnByb3RvdHlwZT1oLnByb3RvdHlwZSxoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oLmN0b3IsYS5yZWFkeSYmYS51cGdyYWRlRG9jdW1lbnRUcmVlKGRvY3VtZW50KSxoLmN0b3J9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9MDtiPHkubGVuZ3RoO2IrKylpZihhPT09eVtiXSlyZXR1cm4hMH1mdW5jdGlvbiBkKGEpe3ZhciBiPW4oYSk7cmV0dXJuIGI/ZChiLmV4dGVuZHMpLmNvbmNhdChbYl0pOltdfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiLGM9YS5leHRlbmRzLGQ9MDtiPWEuYW5jZXN0cnlbZF07ZCsrKWM9Yi5pcyYmYi50YWc7YS50YWc9Y3x8YS5fX25hbWUsYyYmKGEuaXM9YS5fX25hbWUpfWZ1bmN0aW9uIGYoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKSxkPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKTtkPT09YS5wcm90b3R5cGUmJihiPWQpfWZvcih2YXIgZSxmPWEucHJvdG90eXBlO2YmJmYhPT1iOyllPU9iamVjdC5nZXRQcm90b3R5cGVPZihmKSxmLl9fcHJvdG9fXz1lLGY9ZTthLm5hdGl2ZT1ifX1mdW5jdGlvbiBnKGEpe3JldHVybiBoKEIoYS50YWcpLGEpfWZ1bmN0aW9uIGgoYixjKXtyZXR1cm4gYy5pcyYmYi5zZXRBdHRyaWJ1dGUoImlzIixjLmlzKSxpKGIsYyksYi5fX3VwZ3JhZGVkX189ITAsayhiKSxhLmluc2VydGVkTm9kZShiKSxhLnVwZ3JhZGVTdWJ0cmVlKGIpLGJ9ZnVuY3Rpb24gaShhLGIpe09iamVjdC5fX3Byb3RvX18/YS5fX3Byb3RvX189Yi5wcm90b3R5cGU6KGooYSxiLnByb3RvdHlwZSxiLm5hdGl2ZSksYS5fX3Byb3RvX189Yi5wcm90b3R5cGUpfWZ1bmN0aW9uIGooYSxiLGMpe2Zvcih2YXIgZD17fSxlPWI7ZSE9PWMmJmUhPT1IVE1MRWxlbWVudC5wcm90b3R5cGU7KXtmb3IodmFyIGYsZz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKSxoPTA7Zj1nW2hdO2grKylkW2ZdfHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsZixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsZikpLGRbZl09MSk7ZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9fWZ1bmN0aW9uIGsoYSl7YS5jcmVhdGVkQ2FsbGJhY2smJmEuY3JlYXRlZENhbGxiYWNrKCl9ZnVuY3Rpb24gbChhKXtpZighYS5zZXRBdHRyaWJ1dGUuX3BvbHlmaWxsZWQpe3ZhciBiPWEuc2V0QXR0cmlidXRlO2Euc2V0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYyl7bS5jYWxsKHRoaXMsYSxjLGIpfTt2YXIgYz1hLnJlbW92ZUF0dHJpYnV0ZTthLnJlbW92ZUF0dHJpYnV0ZT1mdW5jdGlvbihhKXttLmNhbGwodGhpcyxhLG51bGwsYyl9LGEuc2V0QXR0cmlidXRlLl9wb2x5ZmlsbGVkPSEwfX1mdW5jdGlvbiBtKGEsYixjKXthPWEudG9Mb3dlckNhc2UoKTt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShhKTtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT10aGlzLmdldEF0dHJpYnV0ZShhKTt0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmZSE9PWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGEsZCxlKX1mdW5jdGlvbiBuKGEpe3JldHVybiBhP3pbYS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9ZnVuY3Rpb24gbyhhLGIpe3pbYV09Yn1mdW5jdGlvbiBwKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBnKGEpfX1mdW5jdGlvbiBxKGEsYixjKXtyZXR1cm4gYT09PUE/cihiLGMpOkMoYSxiKX1mdW5jdGlvbiByKGEsYil7dmFyIGM9bihifHxhKTtpZihjKXtpZihhPT1jLnRhZyYmYj09Yy5pcylyZXR1cm4gbmV3IGMuY3RvcjtpZighYiYmIWMuaXMpcmV0dXJuIG5ldyBjLmN0b3J9aWYoYil7dmFyIGQ9cihhKTtyZXR1cm4gZC5zZXRBdHRyaWJ1dGUoImlzIixiKSxkfXZhciBkPUIoYSk7cmV0dXJuIGEuaW5kZXhPZigiLSIpPj0wJiZpKGQsSFRNTEVsZW1lbnQpLGR9ZnVuY3Rpb24gcyhhKXtpZighYS5fX3VwZ3JhZGVkX18mJmEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoImlzIiksYz1uKGJ8fGEubG9jYWxOYW1lKTtpZihjKXtpZihiJiZjLnRhZz09YS5sb2NhbE5hbWUpcmV0dXJuIGgoYSxjKTtpZighYiYmIWMuZXh0ZW5kcylyZXR1cm4gaChhLGMpfX19ZnVuY3Rpb24gdChiKXt2YXIgYz1ELmNhbGwodGhpcyxiKTtyZXR1cm4gYS51cGdyYWRlQWxsKGMpLGN9YXx8KGE9d2luZG93LkN1c3RvbUVsZW1lbnRzPXtmbGFnczp7fX0pO3ZhciB1PWEuZmxhZ3Msdj1Cb29sZWFuKGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCksdz0hdS5yZWdpc3RlciYmdiYmIXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmKCF3aW5kb3cuSFRNTEltcG9ydHN8fEhUTUxJbXBvcnRzLnVzZU5hdGl2ZSk7aWYodyl7dmFyIHg9ZnVuY3Rpb24oKXt9O2EucmVnaXN0cnk9e30sYS51cGdyYWRlRWxlbWVudD14LGEud2F0Y2hTaGFkb3c9eCxhLnVwZ3JhZGU9eCxhLnVwZ3JhZGVBbGw9eCxhLnVwZ3JhZGVTdWJ0cmVlPXgsYS5vYnNlcnZlRG9jdW1lbnQ9eCxhLnVwZ3JhZGVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50VHJlZT14LGEudGFrZVJlY29yZHM9eCxhLnJlc2VydmVkVGFnTGlzdD1bXX1lbHNle3ZhciB5PVsiYW5ub3RhdGlvbi14bWwiLCJjb2xvci1wcm9maWxlIiwiZm9udC1mYWNlIiwiZm9udC1mYWNlLXNyYyIsImZvbnQtZmFjZS11cmkiLCJmb250LWZhY2UtZm9ybWF0IiwiZm9udC1mYWNlLW5hbWUiLCJtaXNzaW5nLWdseXBoIl0sej17fSxBPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIixCPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYmluZChkb2N1bWVudCksQz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMuYmluZChkb2N1bWVudCksRD1Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGU7ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50PWIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudD1yLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUz1xLE5vZGUucHJvdG90eXBlLmNsb25lTm9kZT10LGEucmVnaXN0cnk9eixhLnVwZ3JhZGU9c312YXIgRTtFPU9iamVjdC5fX3Byb3RvX198fHc/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGJ9OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWE7Yzspe2lmKGM9PT1iLnByb3RvdHlwZSlyZXR1cm4hMDtjPWMuX19wcm90b19ffXJldHVybiExfSxhLmluc3RhbmNlb2Y9RSxhLnJlc2VydmVkVGFnTGlzdD15LGRvY3VtZW50LnJlZ2lzdGVyPWRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCxhLmhhc05hdGl2ZT12LGEudXNlTmF0aXZlPXd9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmYS5nZXRBdHRyaWJ1dGUoInJlbCIpPT09Y312YXIgYz1hLklNUE9SVF9MSU5LX1RZUEUsZD17c2VsZWN0b3JzOlsibGlua1tyZWw9IitjKyJdIl0sbWFwOntsaW5rOiJwYXJzZUxpbmsifSxwYXJzZTpmdW5jdGlvbihhKXtpZighYS5fX3BhcnNlZCl7YS5fX3BhcnNlZD0hMDt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoZC5zZWxlY3RvcnMpO2UoYixmdW5jdGlvbihhKXtkW2QubWFwW2EubG9jYWxOYW1lXV0oYSl9KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoYSksQ3VzdG9tRWxlbWVudHMub2JzZXJ2ZURvY3VtZW50KGEpfX0scGFyc2VMaW5rOmZ1bmN0aW9uKGEpe2IoYSkmJnRoaXMucGFyc2VJbXBvcnQoYSl9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGEpe2EuaW1wb3J0JiZkLnBhcnNlKGEuaW1wb3J0KX19LGU9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLnBhcnNlcj1kLGEuSU1QT1JUX0xJTktfVFlQRT1jfSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtDdXN0b21FbGVtZW50cy5wYXJzZXIucGFyc2UoZG9jdW1lbnQpLEN1c3RvbUVsZW1lbnRzLnVwZ3JhZGVEb2N1bWVudChkb2N1bWVudCksd2luZG93LkhUTUxJbXBvcnRzJiYoSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2s9ZnVuY3Rpb24oYSl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGEuaW1wb3J0KX0pLEN1c3RvbUVsZW1lbnRzLnJlYWR5PSEwLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtDdXN0b21FbGVtZW50cy5yZWFkeVRpbWU9RGF0ZS5ub3coKSx3aW5kb3cuSFRNTEltcG9ydHMmJihDdXN0b21FbGVtZW50cy5lbGFwc2VkPUN1c3RvbUVsZW1lbnRzLnJlYWR5VGltZS1IVE1MSW1wb3J0cy5yZWFkeVRpbWUpLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJXZWJDb21wb25lbnRzUmVhZHkiLHtidWJibGVzOiEwfSkpfSl9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkN1c3RvbUV2ZW50Iik7cmV0dXJuIGMuaW5pdEN1c3RvbUV2ZW50KGEsQm9vbGVhbihiLmJ1YmJsZXMpLEJvb2xlYW4oYi5jYW5jZWxhYmxlKSxiLmRldGFpbCksY30sd2luZG93LkN1c3RvbUV2ZW50LnByb3RvdHlwZT13aW5kb3cuRXZlbnQucHJvdG90eXBlKSwiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8YS5mbGFncy5lYWdlciliKCk7ZWxzZSBpZigiaW50ZXJhY3RpdmUiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8d2luZG93LmF0dGFjaEV2ZW50fHx3aW5kb3cuSFRNTEltcG9ydHMmJiF3aW5kb3cuSFRNTEltcG9ydHMucmVhZHkpe3ZhciBjPXdpbmRvdy5IVE1MSW1wb3J0cyYmIUhUTUxJbXBvcnRzLnJlYWR5PyJIVE1MSW1wb3J0c0xvYWRlZCI6IkRPTUNvbnRlbnRMb2FkZWQiO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKGMsYil9ZWxzZSBiKCl9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oKXtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe3ZhciBhPVsidXBncmFkZUFsbCIsInVwZ3JhZGVTdWJ0cmVlIiwib2JzZXJ2ZURvY3VtZW50IiwidXBncmFkZURvY3VtZW50Il0sYj17fTthLmZvckVhY2goZnVuY3Rpb24oYSl7YlthXT1DdXN0b21FbGVtZW50c1thXX0pLGEuZm9yRWFjaChmdW5jdGlvbihhKXtDdXN0b21FbGVtZW50c1thXT1mdW5jdGlvbihjKXtyZXR1cm4gYlthXSh3cmFwKGMpKX19KX19KCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXt3aW5kb3cuUG9seW1lcj09PWUmJih3aW5kb3cuUG9seW1lcj1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcignWW91IHRyaWVkIHRvIHVzZSBwb2x5bWVyIHdpdGhvdXQgbG9hZGluZyBpdCBmaXJzdC4gVG8gbG9hZCBwb2x5bWVyLCA8bGluayByZWw9ImltcG9ydCIgaHJlZj0iY29tcG9uZW50cy9wb2x5bWVyL3BvbHltZXIuaHRtbCI+Jyl9KX1pZighd2luZG93LnBlcmZvcm1hbmNlKXt2YXIgYz1EYXRlLm5vdygpO3dpbmRvdy5wZXJmb3JtYW5jZT17bm93OmZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCktYwp9fX13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7cmV0dXJuIGE/ZnVuY3Rpb24oYil7cmV0dXJuIGEoZnVuY3Rpb24oKXtiKHBlcmZvcm1hbmNlLm5vdygpKX0pfTpmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9fSgpKTt2YXIgZD1bXSxlPWZ1bmN0aW9uKGEpeyJzdHJpbmciIT10eXBlb2YgYSYmMT09PWFyZ3VtZW50cy5sZW5ndGgmJkFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoYXJndW1lbnRzLGRvY3VtZW50Ll9jdXJyZW50U2NyaXB0KSxkLnB1c2goYXJndW1lbnRzKX07d2luZG93LlBvbHltZXI9ZSxhLmNvbnN1bWVEZWNsYXJhdGlvbnM9ZnVuY3Rpb24oYil7YS5jb25zdW1lRGVjbGFyYXRpb25zPWZ1bmN0aW9uKCl7dGhyb3ciUG9zc2libGUgYXR0ZW1wdCB0byBsb2FkIFBvbHltZXIgdHdpY2UifSxiJiZiKGQpLGQ9bnVsbH0sSFRNTEltcG9ydHMudXNlTmF0aXZlP2IoKTphZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixiKX0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7YS50ZXh0Q29udGVudD0iYm9keSB7dHJhbnNpdGlvbjogb3BhY2l0eSBlYXNlLWluIDAuMnM7IH0gXG5ib2R5W3VucmVzb2x2ZWRdIHtvcGFjaXR5OiAwOyBkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsgcG9zaXRpb246IHJlbGF0aXZlOyB9IFxuIjt2YXIgYj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfShQbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBiPWJ8fFtdLGIubWFwfHwoYj1bYl0pLGEuYXBwbHkodGhpcyxiLm1hcChkKSl9ZnVuY3Rpb24gYyhhLGMsZCl7dmFyIGU7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm47Y2FzZSAxOmU9bnVsbDticmVhaztjYXNlIDI6ZT1jLmFwcGx5KHRoaXMpO2JyZWFrO2RlZmF1bHQ6ZT1iKGQsYyl9ZlthXT1lfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZbYV19ZnVuY3Rpb24gZShhLGMpe0hUTUxJbXBvcnRzLndoZW5JbXBvcnRzUmVhZHkoZnVuY3Rpb24oKXtiKGMsYSl9KX12YXIgZj17fTthLm1hcnNoYWw9ZCxhLm1vZHVsYXJpemU9YyxhLnVzaW5nPWV9KHdpbmRvdyk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsYXRmb3JtLmpzLm1hcA==",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 09:26:40 GMT",
                    "Content-Length": "130231",
                    "Date": "Fri, 07 Nov 2014 09:26:42 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}