{
    "url": "http://localhost:9999/andycandrea/tech-talk-elements/bower_components/platform/platform.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Link manipulation (DOM-based)",
    "issueType": 5246976,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based link manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a navigation target within the current page, such as a clickable link or the submission URL of a form. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the target of links within the response. An attacker may be able to leverage this to perform various attacks, including:<ul><li>Causing the user to redirect to an arbitrary external URL, to facilitate a phishing attack.</li><li>Causing the user to submit sensitive form data to a server controlled by the attacker.</li><li>Causing the user to perform an unintended action within the application, by changing the file or query string associated with a link.</li><li>Bypassing browser anti-XSS defenses by injecting on-site links containing XSS exploits, since browser anti-XSS defenses typically do not operate on on-site links.</li></ul>",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based link manipulation vulnerabilities is not to dynamically set the target URLs of links or forms using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a link target. In general, this is best achieved by using a whitelist of URLs that are permitted link targets, and strictly validating the target against this list before setting the link target.",
    "issueDetail": "The application may be vulnerable to DOM-based link manipulation. Data is read from <b>the 'baseURI' property of a DOM element</b> and written to <b>the 'href' property of a DOM element</b> via the following statement:<ul><li>c.href=document.baseURI,b.stagingDocument_.head.appendChild(c),b.stagingDocument_.stagingDocument_=b.stagingDocument_</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/andycandrea/tech-talk-elements/bower_components/platform/platform.js",
                "path": "/andycandrea/tech-talk-elements/bower_components/platform/platform.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9hbmR5Y2FuZHJlYS90ZWNoLXRhbGstZWxlbWVudHMvYm93ZXJfY29tcG9uZW50cy9wbGF0Zm9ybS9wbGF0Zm9ybS5qcyBIVFRQLzEuMQ0KSG9zdDogbG9jYWxob3N0Ojk5OTkNCg0K",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTk0NTI0DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBTYXQsIDA4IE5vdiAyMDE0IDE1OjIzOjM0IEdNVA0KTGFzdC1Nb2RpZmllZDogU2F0LCAwOCBOb3YgMjAxNCAxNToyMzozNCBHTVQNCg0KLyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxMi0yMDE0IFRoZSBQb2x5bWVyIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIAogKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQKICogbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZQogKiBtZXQ6CiAqIAogKiAgICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0CiAqIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci4KICogICAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlCiAqIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIKICogaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZQogKiBkaXN0cmlidXRpb24uCiAqICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0cwogKiBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbQogKiB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLgogKiAKICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUwogKiAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVAogKiBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IKICogQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQKICogT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsCiAqIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QKICogTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsCiAqIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWQogKiBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUCiAqIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRQogKiBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgogKi8KLy8gQHZlcnNpb246IDAuMi4yCmZ1bmN0aW9uIFBvaW50ZXJHZXN0dXJlRXZlbnQoYSxiKXt2YXIgYz1ifHx7fSxkPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLGU9e2J1YmJsZXM6Qm9vbGVhbihjLmJ1YmJsZXMpPT09Yy5idWJibGVzfHwhMCxjYW5jZWxhYmxlOkJvb2xlYW4oYy5jYW5jZWxhYmxlKT09PWMuY2FuY2VsYWJsZXx8ITB9O2QuaW5pdEV2ZW50KGEsZS5idWJibGVzLGUuY2FuY2VsYWJsZSk7Zm9yKHZhciBmLGc9T2JqZWN0LmtleXMoYyksaD0wO2g8Zy5sZW5ndGg7aCsrKWY9Z1toXSxkW2ZdPWNbZl07cmV0dXJuIGQucHJldmVudFRhcD10aGlzLnByZXZlbnRUYXAsZH0idW5kZWZpbmVkIj09dHlwZW9mIFdlYWtNYXAmJiFmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxiPURhdGUubm93KCklMWU5LGM9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhiKysgKyJfXyIpfTtjLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7dmFyIGQ9Ylt0aGlzLm5hbWVdO2QmJmRbMF09PT1iP2RbMV09YzphKGIsdGhpcy5uYW1lLHt2YWx1ZTpbYixjXSx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuKGI9YVt0aGlzLm5hbWVdKSYmYlswXT09PWE/YlsxXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19LHdpbmRvdy5XZWFrTWFwPWN9KCksZnVuY3Rpb24oZ2xvYmFsKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZGV0ZWN0T2JqZWN0T2JzZXJ2ZSgpe2Z1bmN0aW9uIGEoYSl7Yj1hfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiBPYmplY3Qub2JzZXJ2ZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIEFycmF5Lm9ic2VydmUpcmV0dXJuITE7dmFyIGI9W10sYz17fSxkPVtdO3JldHVybiBPYmplY3Qub2JzZXJ2ZShjLGEpLEFycmF5Lm9ic2VydmUoZCxhKSxjLmlkPTEsYy5pZD0yLGRlbGV0ZSBjLmlkLGQucHVzaCgxLDIpLGQubGVuZ3RoPTAsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLDUhPT1iLmxlbmd0aD8hMToiYWRkIiE9YlswXS50eXBlfHwidXBkYXRlIiE9YlsxXS50eXBlfHwiZGVsZXRlIiE9YlsyXS50eXBlfHwic3BsaWNlIiE9YlszXS50eXBlfHwic3BsaWNlIiE9Yls0XS50eXBlPyExOihPYmplY3QudW5vYnNlcnZlKGMsYSksQXJyYXkudW5vYnNlcnZlKGQsYSksITApfWZ1bmN0aW9uIGRldGVjdEV2YWwoKXtpZihnbG9iYWwuZG9jdW1lbnQmJiJzZWN1cml0eVBvbGljeSJpbiBnbG9iYWwuZG9jdW1lbnQmJiFnbG9iYWwuZG9jdW1lbnQuc2VjdXJpdHlQb2xpY3kuYWxsb3dzRXZhbClyZXR1cm4hMTt0cnl7dmFyIGE9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtyZXR1cm4gYSgpfWNhdGNoKGIpe3JldHVybiExfX1mdW5jdGlvbiBpc0luZGV4KGEpe3JldHVybithPT09YT4+PjB9ZnVuY3Rpb24gdG9OdW1iZXIoYSl7cmV0dXJuK2F9ZnVuY3Rpb24gaXNPYmplY3QoYSl7cmV0dXJuIGE9PT1PYmplY3QoYSl9ZnVuY3Rpb24gYXJlU2FtZVZhbHVlKGEsYil7cmV0dXJuIGE9PT1iPzAhPT1hfHwxL2E9PT0xL2I6bnVtYmVySXNOYU4oYSkmJm51bWJlcklzTmFOKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBpc1BhdGhWYWxpZChhKXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGE/ITE6KGE9YS50cmltKCksIiI9PWE/ITA6Ii4iPT1hWzBdPyExOnBhdGhSZWdFeHAudGVzdChhKSl9ZnVuY3Rpb24gUGF0aChhLGIpe2lmKGIhPT1jb25zdHJ1Y3RvcklzUHJpdmF0ZSl0aHJvdyBFcnJvcigiVXNlIFBhdGguZ2V0IHRvIHJldHJpZXZlIHBhdGggb2JqZWN0cyIpO3JldHVybiIiPT1hLnRyaW0oKT90aGlzOmlzSW5kZXgoYSk/KHRoaXMucHVzaChhKSx0aGlzKTooYS5zcGxpdCgvXHMqXC5ccyovKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGF9KS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMucHVzaChhKX0sdGhpcyksdm9pZChoYXNFdmFsJiZ0aGlzLmxlbmd0aCYmKHRoaXMuZ2V0VmFsdWVGcm9tPXRoaXMuY29tcGlsZWRHZXRWYWx1ZUZyb21GbigpKSkpfWZ1bmN0aW9uIGdldFBhdGgoYSl7aWYoYSBpbnN0YW5jZW9mIFBhdGgpcmV0dXJuIGE7bnVsbD09YSYmKGE9IiIpLCJzdHJpbmciIT10eXBlb2YgYSYmKGE9U3RyaW5nKGEpKTt2YXIgYj1wYXRoQ2FjaGVbYV07aWYoYilyZXR1cm4gYjtpZighaXNQYXRoVmFsaWQoYSkpcmV0dXJuIGludmFsaWRQYXRoO3ZhciBiPW5ldyBQYXRoKGEsY29uc3RydWN0b3JJc1ByaXZhdGUpO3JldHVybiBwYXRoQ2FjaGVbYV09YixifWZ1bmN0aW9uIGRpcnR5Q2hlY2soYSl7Zm9yKHZhciBiPTA7TUFYX0RJUlRZX0NIRUNLX0NZQ0xFUz5iJiZhLmNoZWNrXygpOyliKys7cmV0dXJuIGdsb2JhbC50ZXN0aW5nRXhwb3NlQ3ljbGVDb3VudCYmKGdsb2JhbC5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1iKSxiPjB9ZnVuY3Rpb24gb2JqZWN0SXNFbXB0eShhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBkaWZmSXNFbXB0eShhKXtyZXR1cm4gb2JqZWN0SXNFbXB0eShhLmFkZGVkKSYmb2JqZWN0SXNFbXB0eShhLnJlbW92ZWQpJiZvYmplY3RJc0VtcHR5KGEuY2hhbmdlZCl9ZnVuY3Rpb24gZGlmZk9iamVjdEZyb21PbGRPYmplY3QoYSxiKXt2YXIgYz17fSxkPXt9LGU9e307Zm9yKHZhciBmIGluIGIpe3ZhciBnPWFbZl07KHZvaWQgMD09PWd8fGchPT1iW2ZdKSYmKGYgaW4gYT9nIT09YltmXSYmKGVbZl09Zyk6ZFtmXT12b2lkIDApfWZvcih2YXIgZiBpbiBhKWYgaW4gYnx8KGNbZl09YVtmXSk7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJmEubGVuZ3RoIT09Yi5sZW5ndGgmJihlLmxlbmd0aD1hLmxlbmd0aCkse2FkZGVkOmMscmVtb3ZlZDpkLGNoYW5nZWQ6ZX19ZnVuY3Rpb24gcnVuRU9NVGFza3MoKXtpZighZW9tVGFza3MubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYT0wO2E8ZW9tVGFza3MubGVuZ3RoO2ErKyllb21UYXNrc1thXSgpO3JldHVybiBlb21UYXNrcy5sZW5ndGg9MCwhMH1mdW5jdGlvbiBuZXdPYnNlcnZlZE9iamVjdCgpe2Z1bmN0aW9uIGEoYSl7YiYmYi5zdGF0ZV89PT1PUEVORUQmJiFkJiZiLmNoZWNrXyhhKX12YXIgYixjLGQ9ITEsZT0hMDtyZXR1cm57b3BlbjpmdW5jdGlvbihjKXtpZihiKXRocm93IEVycm9yKCJPYnNlcnZlZE9iamVjdCBpbiB1c2UiKTtlfHxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksYj1jLGU9ITF9LG9ic2VydmU6ZnVuY3Rpb24oYixkKXtjPWIsZD9BcnJheS5vYnNlcnZlKGMsYSk6T2JqZWN0Lm9ic2VydmUoYyxhKX0sZGVsaXZlcjpmdW5jdGlvbihiKXtkPWIsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGQ9ITF9LGNsb3NlOmZ1bmN0aW9uKCl7Yj12b2lkIDAsT2JqZWN0LnVub2JzZXJ2ZShjLGEpLG9ic2VydmVkT2JqZWN0Q2FjaGUucHVzaCh0aGlzKX19fWZ1bmN0aW9uIGdldE9ic2VydmVkT2JqZWN0KGEsYixjKXt2YXIgZD1vYnNlcnZlZE9iamVjdENhY2hlLnBvcCgpfHxuZXdPYnNlcnZlZE9iamVjdCgpO3JldHVybiBkLm9wZW4oYSksZC5vYnNlcnZlKGIsYyksZH1mdW5jdGlvbiBuZXdPYnNlcnZlZFNldCgpe2Z1bmN0aW9uIGEoYil7aWYoYil7dmFyIGM9aS5pbmRleE9mKGIpO2M+PTA/KGlbY109dm9pZCAwLGgucHVzaChiKSk6aC5pbmRleE9mKGIpPDAmJihoLnB1c2goYiksT2JqZWN0Lm9ic2VydmUoYixlKSksYShPYmplY3QuZ2V0UHJvdG90eXBlT2YoYikpfX1mdW5jdGlvbiBiKCl7dmFyIGI9aT09PWVtcHR5QXJyYXk/W106aTtpPWgsaD1iO3ZhciBjO2Zvcih2YXIgZCBpbiBmKWM9ZltkXSxjJiZjLnN0YXRlXz09T1BFTkVEJiZjLml0ZXJhdGVPYmplY3RzXyhhKTtmb3IodmFyIGc9MDtnPGkubGVuZ3RoO2crKyl7dmFyIGo9aVtnXTtqJiZPYmplY3QudW5vYnNlcnZlKGosZSl9aS5sZW5ndGg9MH1mdW5jdGlvbiBjKCl7az0hMSxqJiZiKCl9ZnVuY3Rpb24gZCgpe2t8fChqPSEwLGs9ITAscnVuRU9NKGMpKX1mdW5jdGlvbiBlKCl7YigpO3ZhciBhO2Zvcih2YXIgYyBpbiBmKWE9ZltjXSxhJiZhLnN0YXRlXz09T1BFTkVEJiZhLmNoZWNrXygpfXZhciBmPVtdLGc9MCxoPVtdLGk9ZW1wdHlBcnJheSxqPSExLGs9ITEsbD17b2JqZWN0OnZvaWQgMCxvYmplY3RzOmgsb3BlbjpmdW5jdGlvbihiKXtmW2IuaWRfXT1iLGcrKyxiLml0ZXJhdGVPYmplY3RzXyhhKX0sY2xvc2U6ZnVuY3Rpb24oYSl7aWYoZlthLmlkX109dm9pZCAwLGctLSxnKXJldHVybiB2b2lkIGQoKTtqPSExO2Zvcih2YXIgYj0wO2I8aC5sZW5ndGg7YisrKU9iamVjdC51bm9ic2VydmUoaFtiXSxlKSxPYnNlcnZlci51bm9ic2VydmVkQ291bnQrKztmLmxlbmd0aD0wLGgubGVuZ3RoPTAsb2JzZXJ2ZWRTZXRDYWNoZS5wdXNoKHRoaXMpfSxyZXNldDpkfTtyZXR1cm4gbH1mdW5jdGlvbiBnZXRPYnNlcnZlZFNldChhLGIpe3JldHVybiBsYXN0T2JzZXJ2ZWRTZXQmJmxhc3RPYnNlcnZlZFNldC5vYmplY3Q9PT1ifHwobGFzdE9ic2VydmVkU2V0PW9ic2VydmVkU2V0Q2FjaGUucG9wKCl8fG5ld09ic2VydmVkU2V0KCksbGFzdE9ic2VydmVkU2V0Lm9iamVjdD1iKSxsYXN0T2JzZXJ2ZWRTZXQub3BlbihhKSxsYXN0T2JzZXJ2ZWRTZXR9ZnVuY3Rpb24gT2JzZXJ2ZXIoKXt0aGlzLnN0YXRlXz1VTk9QRU5FRCx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuaWRfPW5leHRPYnNlcnZlcklkKyt9ZnVuY3Rpb24gYWRkVG9BbGwoYSl7T2JzZXJ2ZXIuX2FsbE9ic2VydmVyc0NvdW50KyssY29sbGVjdE9ic2VydmVycyYmYWxsT2JzZXJ2ZXJzLnB1c2goYSl9ZnVuY3Rpb24gcmVtb3ZlRnJvbUFsbCgpe09ic2VydmVyLl9hbGxPYnNlcnZlcnNDb3VudC0tfWZ1bmN0aW9uIE9iamVjdE9ic2VydmVyKGEpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy52YWx1ZV89YSx0aGlzLm9sZE9iamVjdF89dm9pZCAwfWZ1bmN0aW9uIEFycmF5T2JzZXJ2ZXIoYSl7aWYoIUFycmF5LmlzQXJyYXkoYSkpdGhyb3cgRXJyb3IoIlByb3ZpZGVkIG9iamVjdCBpcyBub3QgYW4gQXJyYXkiKTtPYmplY3RPYnNlcnZlci5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gUGF0aE9ic2VydmVyKGEsYil7T2JzZXJ2ZXIuY2FsbCh0aGlzKSx0aGlzLm9iamVjdF89YSx0aGlzLnBhdGhfPWIgaW5zdGFuY2VvZiBQYXRoP2I6Z2V0UGF0aChiKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDB9ZnVuY3Rpb24gQ29tcG91bmRPYnNlcnZlcigpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy52YWx1ZV89W10sdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwLHRoaXMub2JzZXJ2ZWRfPVtdfWZ1bmN0aW9uIGlkZW50Rm4oYSl7cmV0dXJuIGF9ZnVuY3Rpb24gT2JzZXJ2ZXJUcmFuc2Zvcm0oYSxiLGMsZCl7dGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89YSx0aGlzLmdldFZhbHVlRm5fPWJ8fGlkZW50Rm4sdGhpcy5zZXRWYWx1ZUZuXz1jfHxpZGVudEZuLHRoaXMuZG9udFBhc3NUaHJvdWdoU2V0Xz1kfWZ1bmN0aW9uIG5vdGlmeUZ1bmN0aW9uKGEsYil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIE9iamVjdC5vYnNlcnZlKXt2YXIgYz1PYmplY3QuZ2V0Tm90aWZpZXIoYSk7cmV0dXJuIGZ1bmN0aW9uKGQsZSl7dmFyIGY9e29iamVjdDphLHR5cGU6ZCxuYW1lOmJ9OzI9PT1hcmd1bWVudHMubGVuZ3RoJiYoZi5vbGRWYWx1ZT1lKSxjLm5vdGlmeShmKX19fWZ1bmN0aW9uIGRpZmZPYmplY3RGcm9tQ2hhbmdlUmVjb3JkcyhhLGIsYyl7Zm9yKHZhciBkPXt9LGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO2V4cGVjdGVkUmVjb3JkVHlwZXNbZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZSIhPWcudHlwZSYmKCJhZGQiIT1nLnR5cGU/Zy5uYW1lIGluIGQ/KGRlbGV0ZSBkW2cubmFtZV0sZGVsZXRlIGNbZy5uYW1lXSk6ZVtnLm5hbWVdPSEwOmcubmFtZSBpbiBlP2RlbGV0ZSBlW2cubmFtZV06ZFtnLm5hbWVdPSEwKSk6KGNvbnNvbGUuZXJyb3IoIlVua25vd24gY2hhbmdlUmVjb3JkIHR5cGU6ICIrZy50eXBlKSxjb25zb2xlLmVycm9yKGcpKX1mb3IodmFyIGggaW4gZClkW2hdPWFbaF07Zm9yKHZhciBoIGluIGUpZVtoXT12b2lkIDA7dmFyIGk9e307Zm9yKHZhciBoIGluIGMpaWYoIShoIGluIGR8fGggaW4gZSkpe3ZhciBqPWFbaF07Y1toXSE9PWomJihpW2hdPWopfXJldHVybnthZGRlZDpkLHJlbW92ZWQ6ZSxjaGFuZ2VkOml9fWZ1bmN0aW9uIG5ld1NwbGljZShhLGIsYyl7cmV0dXJue2luZGV4OmEscmVtb3ZlZDpiLGFkZGVkQ291bnQ6Y319ZnVuY3Rpb24gQXJyYXlTcGxpY2UoKXt9ZnVuY3Rpb24gY2FsY1NwbGljZXMoYSxiLGMsZCxlLGYpe3JldHVybiBhcnJheVNwbGljZS5jYWxjU3BsaWNlcyhhLGIsYyxkLGUsZil9ZnVuY3Rpb24gaW50ZXJzZWN0KGEsYixjLGQpe3JldHVybiBjPmJ8fGE+ZD8tMTpiPT1jfHxkPT1hPzA6Yz5hP2Q+Yj9iLWM6ZC1jOmI+ZD9kLWE6Yi1hfWZ1bmN0aW9uIG1lcmdlU3BsaWNlKGEsYixjLGQpe2Zvcih2YXIgZT1uZXdTcGxpY2UoYixjLGQpLGY9ITEsZz0wLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGk9YVtoXTtpZihpLmluZGV4Kz1nLCFmKXt2YXIgaj1pbnRlcnNlY3QoZS5pbmRleCxlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGgsaS5pbmRleCxpLmluZGV4K2kuYWRkZWRDb3VudCk7aWYoaj49MCl7YS5zcGxpY2UoaCwxKSxoLS0sZy09aS5hZGRlZENvdW50LWkucmVtb3ZlZC5sZW5ndGgsZS5hZGRlZENvdW50Kz1pLmFkZGVkQ291bnQtajt2YXIgaz1lLnJlbW92ZWQubGVuZ3RoK2kucmVtb3ZlZC5sZW5ndGgtajtpZihlLmFkZGVkQ291bnR8fGspe3ZhciBjPWkucmVtb3ZlZDtpZihlLmluZGV4PGkuaW5kZXgpe3ZhciBsPWUucmVtb3ZlZC5zbGljZSgwLGkuaW5kZXgtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobCxjKSxjPWx9aWYoZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoPmkuaW5kZXgraS5hZGRlZENvdW50KXt2YXIgbT1lLnJlbW92ZWQuc2xpY2UoaS5pbmRleCtpLmFkZGVkQ291bnQtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYyxtKX1lLnJlbW92ZWQ9YyxpLmluZGV4PGUuaW5kZXgmJihlLmluZGV4PWkuaW5kZXgpfWVsc2UgZj0hMH1lbHNlIGlmKGUuaW5kZXg8aS5pbmRleCl7Zj0hMCxhLnNwbGljZShoLDAsZSksaCsrO3ZhciBuPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RoO2kuaW5kZXgrPW4sZys9bn19fWZ8fGEucHVzaChlKX1mdW5jdGlvbiBjcmVhdGVJbml0aWFsU3BsaWNlcyhhLGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxiLmxlbmd0aDtkKyspe3ZhciBlPWJbZF07c3dpdGNoKGUudHlwZSl7Y2FzZSJzcGxpY2UiOm1lcmdlU3BsaWNlKGMsZS5pbmRleCxlLnJlbW92ZWQuc2xpY2UoKSxlLmFkZGVkQ291bnQpO2JyZWFrO2Nhc2UiYWRkIjpjYXNlInVwZGF0ZSI6Y2FzZSJkZWxldGUiOmlmKCFpc0luZGV4KGUubmFtZSkpY29udGludWU7dmFyIGY9dG9OdW1iZXIoZS5uYW1lKTtpZigwPmYpY29udGludWU7bWVyZ2VTcGxpY2UoYyxmLFtlLm9sZFZhbHVlXSwxKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoIlVuZXhwZWN0ZWQgcmVjb3JkIHR5cGU6ICIrSlNPTi5zdHJpbmdpZnkoZSkpfX1yZXR1cm4gY31mdW5jdGlvbiBwcm9qZWN0QXJyYXlTcGxpY2VzKGEsYil7dmFyIGM9W107cmV0dXJuIGNyZWF0ZUluaXRpYWxTcGxpY2VzKGEsYikuZm9yRWFjaChmdW5jdGlvbihiKXtyZXR1cm4gMT09Yi5hZGRlZENvdW50JiYxPT1iLnJlbW92ZWQubGVuZ3RoP3ZvaWQoYi5yZW1vdmVkWzBdIT09YVtiLmluZGV4XSYmYy5wdXNoKGIpKTp2b2lkKGM9Yy5jb25jYXQoY2FsY1NwbGljZXMoYSxiLmluZGV4LGIuaW5kZXgrYi5hZGRlZENvdW50LGIucmVtb3ZlZCwwLGIucmVtb3ZlZC5sZW5ndGgpKSl9KSxjfXZhciBoYXNPYnNlcnZlPWRldGVjdE9iamVjdE9ic2VydmUoKSxoYXNFdmFsPWRldGVjdEV2YWwoKSxudW1iZXJJc05hTj1nbG9iYWwuTnVtYmVyLmlzTmFOfHxmdW5jdGlvbihhKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGEmJmdsb2JhbC5pc05hTihhKX0sY3JlYXRlT2JqZWN0PSJfX3Byb3RvX18iaW57fT9mdW5jdGlvbihhKXtyZXR1cm4gYX06ZnVuY3Rpb24oYSl7dmFyIGI9YS5fX3Byb3RvX187aWYoIWIpcmV0dXJuIGE7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSkuZm9yRWFjaChmdW5jdGlvbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKSl9KSxjfSxpZGVudFN0YXJ0PSJbJF9hLXpBLVpdIixpZGVudFBhcnQ9IlskX2EtekEtWjAtOV0iLGlkZW50PWlkZW50U3RhcnQrIisiK2lkZW50UGFydCsiKiIsZWxlbWVudEluZGV4PSIoPzpbMC05XXxbMS05XStbMC05XSspIixpZGVudE9yRWxlbWVudEluZGV4PSIoPzoiK2lkZW50KyJ8IitlbGVtZW50SW5kZXgrIikiLHBhdGg9Iig/OiIraWRlbnRPckVsZW1lbnRJbmRleCsiKSg/OlxccypcXC5cXHMqIitpZGVudE9yRWxlbWVudEluZGV4KyIpKiIscGF0aFJlZ0V4cD1uZXcgUmVnRXhwKCJeIitwYXRoKyIkIiksY29uc3RydWN0b3JJc1ByaXZhdGU9e30scGF0aENhY2hlPXt9O1BhdGguZ2V0PWdldFBhdGgsUGF0aC5wcm90b3R5cGU9Y3JlYXRlT2JqZWN0KHtfX3Byb3RvX186W10sdmFsaWQ6ITAsdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qb2luKCIuIil9LGdldFZhbHVlRnJvbTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7aWYobnVsbD09YSlyZXR1cm47YT1hW3RoaXNbYl1dfXJldHVybiBhfSxpdGVyYXRlT2JqZWN0czpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGg7YysrKXtpZihjJiYoYT1hW3RoaXNbYy0xXV0pLCFpc09iamVjdChhKSlyZXR1cm47YihhKX19LGNvbXBpbGVkR2V0VmFsdWVGcm9tRm46ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gaXNJbmRleChhKT8nWyInK2ErJyJdJzoiLiIrYX0pLGI9IiIsYz0ib2JqIjtiKz0iaWYgKG9iaiAhPSBudWxsIjtmb3IodmFyIGQ9MDtkPHRoaXMubGVuZ3RoLTE7ZCsrKXt7dGhpc1tkXX1jKz1hW2RdLGIrPSIgJiZcbiAgICAgIitjKyIgIT0gbnVsbCJ9cmV0dXJuIGIrPSIpXG4iLGMrPWFbZF0sYis9IiAgcmV0dXJuICIrYysiO1xuZWxzZVxuICByZXR1cm4gdW5kZWZpbmVkOyIsbmV3IEZ1bmN0aW9uKCJvYmoiLGIpfSxzZXRWYWx1ZUZyb206ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aC0xO2MrKyl7aWYoIWlzT2JqZWN0KGEpKXJldHVybiExO2E9YVt0aGlzW2NdXX1yZXR1cm4gaXNPYmplY3QoYSk/KGFbdGhpc1tjXV09YiwhMCk6ITF9fSk7dmFyIGludmFsaWRQYXRoPW5ldyBQYXRoKCIiLGNvbnN0cnVjdG9ySXNQcml2YXRlKTtpbnZhbGlkUGF0aC52YWxpZD0hMSxpbnZhbGlkUGF0aC5nZXRWYWx1ZUZyb209aW52YWxpZFBhdGguc2V0VmFsdWVGcm9tPWZ1bmN0aW9uKCl7fTt2YXIgTUFYX0RJUlRZX0NIRUNLX0NZQ0xFUz0xZTMsZW9tVGFza3M9W10scnVuRU9NPWhhc09ic2VydmU/ZnVuY3Rpb24oKXt2YXIgYT17cGluZ1Bvbmc6ITB9LGI9ITE7cmV0dXJuIE9iamVjdC5vYnNlcnZlKGEsZnVuY3Rpb24oKXtydW5FT01UYXNrcygpLGI9ITF9KSxmdW5jdGlvbihjKXtlb21UYXNrcy5wdXNoKGMpLGJ8fChiPSEwLGEucGluZ1Bvbmc9IWEucGluZ1BvbmcpfX0oKTpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXtlb21UYXNrcy5wdXNoKGEpfX0oKSxvYnNlcnZlZE9iamVjdENhY2hlPVtdLGVtcHR5QXJyYXk9W10sb2JzZXJ2ZWRTZXRDYWNoZT1bXSxsYXN0T2JzZXJ2ZWRTZXQsVU5PUEVORUQ9MCxPUEVORUQ9MSxDTE9TRUQ9MixSRVNFVFRJTkc9MyxuZXh0T2JzZXJ2ZXJJZD0xO09ic2VydmVyLnByb3RvdHlwZT17b3BlbjpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc3RhdGVfIT1VTk9QRU5FRCl0aHJvdyBFcnJvcigiT2JzZXJ2ZXIgaGFzIGFscmVhZHkgYmVlbiBvcGVuZWQuIik7cmV0dXJuIGFkZFRvQWxsKHRoaXMpLHRoaXMuY2FsbGJhY2tfPWEsdGhpcy50YXJnZXRfPWIsdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMuY29ubmVjdF8oKSx0aGlzLnZhbHVlX30sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09T1BFTkVEJiYocmVtb3ZlRnJvbUFsbCh0aGlzKSx0aGlzLnN0YXRlXz1DTE9TRUQsdGhpcy5kaXNjb25uZWN0XygpLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCl9LGRlbGl2ZXI6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09T1BFTkVEJiZkaXJ0eUNoZWNrKHRoaXMpfSxyZXBvcnRfOmZ1bmN0aW9uKGEpe3RyeXt0aGlzLmNhbGxiYWNrXy5hcHBseSh0aGlzLnRhcmdldF8sYSl9Y2F0Y2goYil7T2JzZXJ2ZXIuX2Vycm9yVGhyb3duRHVyaW5nQ2FsbGJhY2s9ITAsY29uc29sZS5lcnJvcigiRXhjZXB0aW9uIGNhdWdodCBkdXJpbmcgb2JzZXJ2ZXIgY2FsbGJhY2s6ICIrKGIuc3RhY2t8fGIpKX19LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hlY2tfKHZvaWQgMCwhMCksdGhpcy52YWx1ZV99fTt2YXIgY29sbGVjdE9ic2VydmVycz0haGFzT2JzZXJ2ZSxhbGxPYnNlcnZlcnM7T2JzZXJ2ZXIuX2FsbE9ic2VydmVyc0NvdW50PTAsY29sbGVjdE9ic2VydmVycyYmKGFsbE9ic2VydmVycz1bXSk7dmFyIHJ1bm5pbmdNaWNyb3Rhc2tDaGVja3BvaW50PSExLGhhc0RlYnVnRm9yY2VGdWxsRGVsaXZlcnk9aGFzT2JzZXJ2ZSYmZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGV2YWwoIiVSdW5NaWNyb3Rhc2tzKCkiKSwhMH1jYXRjaChleCl7cmV0dXJuITF9fSgpO2dsb2JhbC5QbGF0Zm9ybT1nbG9iYWwuUGxhdGZvcm18fHt9LGdsb2JhbC5QbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludD1mdW5jdGlvbigpe2lmKCFydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludCl7aWYoaGFzRGVidWdGb3JjZUZ1bGxEZWxpdmVyeSlyZXR1cm4gdm9pZCBldmFsKCIlUnVuTWljcm90YXNrcygpIik7aWYoY29sbGVjdE9ic2VydmVycyl7cnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITA7dmFyIGN5Y2xlcz0wLGFueUNoYW5nZWQsdG9DaGVjaztkb3tjeWNsZXMrKyx0b0NoZWNrPWFsbE9ic2VydmVycyxhbGxPYnNlcnZlcnM9W10sYW55Q2hhbmdlZD0hMTtmb3IodmFyIGk9MDtpPHRvQ2hlY2subGVuZ3RoO2krKyl7dmFyIG9ic2VydmVyPXRvQ2hlY2tbaV07b2JzZXJ2ZXIuc3RhdGVfPT1PUEVORUQmJihvYnNlcnZlci5jaGVja18oKSYmKGFueUNoYW5nZWQ9ITApLGFsbE9ic2VydmVycy5wdXNoKG9ic2VydmVyKSl9cnVuRU9NVGFza3MoKSYmKGFueUNoYW5nZWQ9ITApfXdoaWxlKE1BWF9ESVJUWV9DSEVDS19DWUNMRVM+Y3ljbGVzJiZhbnlDaGFuZ2VkKTtnbG9iYWwudGVzdGluZ0V4cG9zZUN5Y2xlQ291bnQmJihnbG9iYWwuZGlydHlDaGVja0N5Y2xlQ291bnQ9Y3ljbGVzKSxydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludD0hMX19fSxjb2xsZWN0T2JzZXJ2ZXJzJiYoZ2xvYmFsLlBsYXRmb3JtLmNsZWFyT2JzZXJ2ZXJzPWZ1bmN0aW9uKCl7YWxsT2JzZXJ2ZXJzPVtdfSksT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITEsY29ubmVjdF86ZnVuY3Rpb24oKXtoYXNPYnNlcnZlP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfPWdldE9ic2VydmVkT2JqZWN0KHRoaXMsdGhpcy52YWx1ZV8sdGhpcy5hcnJheU9ic2VydmUpOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pfSxjb3B5T2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LmlzQXJyYXkoYSk/W106e307Zm9yKHZhciBjIGluIGEpYltjXT1hW2NdO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiYoYi5sZW5ndGg9YS5sZW5ndGgpLGJ9LGNoZWNrXzpmdW5jdGlvbihhKXt2YXIgYixjO2lmKGhhc09ic2VydmUpe2lmKCFhKXJldHVybiExO2M9e30sYj1kaWZmT2JqZWN0RnJvbUNoYW5nZVJlY29yZHModGhpcy52YWx1ZV8sYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3RfLGI9ZGlmZk9iamVjdEZyb21PbGRPYmplY3QodGhpcy52YWx1ZV8sdGhpcy5vbGRPYmplY3RfKTtyZXR1cm4gZGlmZklzRW1wdHkoYik/ITE6KGhhc09ic2VydmV8fCh0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKSksdGhpcy5yZXBvcnRfKFtiLmFkZGVkfHx7fSxiLnJlbW92ZWR8fHt9LGIuY2hhbmdlZHx8e30sZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV19XSksITApfSxkaXNjb25uZWN0XzpmdW5jdGlvbigpe2hhc09ic2VydmU/KHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKCksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwKTp0aGlzLm9sZE9iamVjdF89dm9pZCAwfSxkZWxpdmVyOmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZV89PU9QRU5FRCYmKGhhc09ic2VydmU/dGhpcy5kaXJlY3RPYnNlcnZlcl8uZGVsaXZlcighMSk6ZGlydHlDaGVjayh0aGlzKSl9LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyZWN0T2JzZXJ2ZXJfP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITApOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pLHRoaXMudmFsdWVffX0pLEFycmF5T2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9iamVjdE9ic2VydmVyLnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITAsY29weU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZSgpfSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGI7aWYoaGFzT2JzZXJ2ZSl7aWYoIWEpcmV0dXJuITE7Yj1wcm9qZWN0QXJyYXlTcGxpY2VzKHRoaXMudmFsdWVfLGEpfWVsc2UgYj1jYWxjU3BsaWNlcyh0aGlzLnZhbHVlXywwLHRoaXMudmFsdWVfLmxlbmd0aCx0aGlzLm9sZE9iamVjdF8sMCx0aGlzLm9sZE9iamVjdF8ubGVuZ3RoKTtyZXR1cm4gYiYmYi5sZW5ndGg/KGhhc09ic2VydmV8fCh0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKSksdGhpcy5yZXBvcnRfKFtiXSksITApOiExfX0pLEFycmF5T2JzZXJ2ZXIuYXBwbHlTcGxpY2VzPWZ1bmN0aW9uKGEsYixjKXtjLmZvckVhY2goZnVuY3Rpb24oYyl7Zm9yKHZhciBkPVtjLmluZGV4LGMucmVtb3ZlZC5sZW5ndGhdLGU9Yy5pbmRleDtlPGMuaW5kZXgrYy5hZGRlZENvdW50OylkLnB1c2goYltlXSksZSsrO0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoYSxkKX0pfSxQYXRoT2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe2hhc09ic2VydmUmJih0aGlzLmRpcmVjdE9ic2VydmVyXz1nZXRPYnNlcnZlZFNldCh0aGlzLHRoaXMub2JqZWN0XykpLHRoaXMuY2hlY2tfKHZvaWQgMCwhMCl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7dGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfJiYodGhpcy5kaXJlY3RPYnNlcnZlcl8uY2xvc2UodGhpcyksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwKX0saXRlcmF0ZU9iamVjdHNfOmZ1bmN0aW9uKGEpe3RoaXMucGF0aF8uaXRlcmF0ZU9iamVjdHModGhpcy5vYmplY3RfLGEpfSxjaGVja186ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnZhbHVlXztyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5wYXRoXy5nZXRWYWx1ZUZyb20odGhpcy5vYmplY3RfKSxifHxhcmVTYW1lVmFsdWUodGhpcy52YWx1ZV8sYyk/ITE6KHRoaXMucmVwb3J0XyhbdGhpcy52YWx1ZV8sY10pLCEwKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXyYmdGhpcy5wYXRoXy5zZXRWYWx1ZUZyb20odGhpcy5vYmplY3RfLGEpfX0pO3ZhciBvYnNlcnZlclNlbnRpbmVsPXt9O0NvbXBvdW5kT2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe2lmKHRoaXMuY2hlY2tfKHZvaWQgMCwhMCksaGFzT2JzZXJ2ZSl7Zm9yKHZhciBhLGI9ITEsYz0wO2M8dGhpcy5vYnNlcnZlZF8ubGVuZ3RoO2MrPTIpaWYoYT10aGlzLm9ic2VydmVkX1tjXSxhIT09b2JzZXJ2ZXJTZW50aW5lbCl7Yj0hMDticmVha31yZXR1cm4gdGhpcy5kaXJlY3RPYnNlcnZlcl8/Yj92b2lkIHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLnJlc2V0KCk6KHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKCksdm9pZCh0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApKTp2b2lkKGImJih0aGlzLmRpcmVjdE9ic2VydmVyXz1nZXRPYnNlcnZlZFNldCh0aGlzLGEpKSl9fSxjbG9zZU9ic2VydmVyc186ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDthKz0yKXRoaXMub2JzZXJ2ZWRfW2FdPT09b2JzZXJ2ZXJTZW50aW5lbCYmdGhpcy5vYnNlcnZlZF9bYSsxXS5jbG9zZSgpO3RoaXMub2JzZXJ2ZWRfLmxlbmd0aD0wfSxkaXNjb25uZWN0XzpmdW5jdGlvbigpe3RoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXyYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKHRoaXMpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCksdGhpcy5jbG9zZU9ic2VydmVyc18oKX0sYWRkUGF0aDpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc3RhdGVfIT1VTk9QRU5FRCYmdGhpcy5zdGF0ZV8hPVJFU0VUVElORyl0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBwYXRocyBvbmNlIHN0YXJ0ZWQuIik7dGhpcy5vYnNlcnZlZF8ucHVzaChhLGIgaW5zdGFuY2VvZiBQYXRoP2I6Z2V0UGF0aChiKSl9LGFkZE9ic2VydmVyOmZ1bmN0aW9uKGEpe2lmKHRoaXMuc3RhdGVfIT1VTk9QRU5FRCYmdGhpcy5zdGF0ZV8hPVJFU0VUVElORyl0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBvYnNlcnZlcnMgb25jZSBzdGFydGVkLiIpO2Eub3Blbih0aGlzLmRlbGl2ZXIsdGhpcyksdGhpcy5vYnNlcnZlZF8ucHVzaChvYnNlcnZlclNlbnRpbmVsLGEpfSxzdGFydFJlc2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5zdGF0ZV8hPU9QRU5FRCl0aHJvdyBFcnJvcigiQ2FuIG9ubHkgcmVzZXQgd2hpbGUgb3BlbiIpO3RoaXMuc3RhdGVfPVJFU0VUVElORyx0aGlzLmNsb3NlT2JzZXJ2ZXJzXygpfSxmaW5pc2hSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IGZpbmlzaFJlc2V0IGFmdGVyIHN0YXJ0UmVzZXQiKTtyZXR1cm4gdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMuY29ubmVjdF8oKSx0aGlzLnZhbHVlX30saXRlcmF0ZU9iamVjdHNfOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTA7Yzx0aGlzLm9ic2VydmVkXy5sZW5ndGg7Yys9MiliPXRoaXMub2JzZXJ2ZWRfW2NdLGIhPT1vYnNlcnZlclNlbnRpbmVsJiZ0aGlzLm9ic2VydmVkX1tjKzFdLml0ZXJhdGVPYmplY3RzKGIsYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTA7ZDx0aGlzLm9ic2VydmVkXy5sZW5ndGg7ZCs9Mil7dmFyIGU9dGhpcy5vYnNlcnZlZF9bZCsxXSxmPXRoaXMub2JzZXJ2ZWRfW2RdLGc9Zj09PW9ic2VydmVyU2VudGluZWw/ZS5kaXNjYXJkQ2hhbmdlcygpOmUuZ2V0VmFsdWVGcm9tKGYpO2I/dGhpcy52YWx1ZV9bZC8yXT1nOmFyZVNhbWVWYWx1ZShnLHRoaXMudmFsdWVfW2QvMl0pfHwoYz1jfHxbXSxjW2QvMl09dGhpcy52YWx1ZV9bZC8yXSx0aGlzLnZhbHVlX1tkLzJdPWcpfXJldHVybiBjPyh0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpcy5vYnNlcnZlZF9dKSwhMCk6ITF9fSksT2JzZXJ2ZXJUcmFuc2Zvcm0ucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY2FsbGJhY2tfPWEsdGhpcy50YXJnZXRfPWIsdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLm9wZW4odGhpcy5vYnNlcnZlZENhbGxiYWNrXyx0aGlzKSksdGhpcy52YWx1ZV99LG9ic2VydmVkQ2FsbGJhY2tfOmZ1bmN0aW9uKGEpe2lmKGE9dGhpcy5nZXRWYWx1ZUZuXyhhKSwhYXJlU2FtZVZhbHVlKGEsdGhpcy52YWx1ZV8pKXt2YXIgYj10aGlzLnZhbHVlXzt0aGlzLnZhbHVlXz1hLHRoaXMuY2FsbGJhY2tfLmNhbGwodGhpcy50YXJnZXRfLHRoaXMudmFsdWVfLGIpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMudmFsdWVffSxkZWxpdmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JzZXJ2YWJsZV8uZGVsaXZlcigpfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLnNldFZhbHVlRm5fKGEpLCF0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF8mJnRoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWU/dGhpcy5vYnNlcnZhYmxlXy5zZXRWYWx1ZShhKTp2b2lkIDB9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZhYmxlXyYmdGhpcy5vYnNlcnZhYmxlXy5jbG9zZSgpLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmdldFZhbHVlRm5fPXZvaWQgMCx0aGlzLnNldFZhbHVlRm5fPXZvaWQgMH19O3ZhciBleHBlY3RlZFJlY29yZFR5cGVzPXthZGQ6ITAsdXBkYXRlOiEwLCJkZWxldGUiOiEwfTtPYnNlcnZlci5kZWZpbmVDb21wdXRlZFByb3BlcnR5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1ub3RpZnlGdW5jdGlvbihhLGIpLGU9Yy5vcGVuKGZ1bmN0aW9uKGEsYil7ZT1hLGQmJmQoInVwZGF0ZSIsYil9KTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGMuZGVsaXZlcigpLGV9LHNldDpmdW5jdGlvbihhKXtyZXR1cm4gYy5zZXRWYWx1ZShhKSxhfSxjb25maWd1cmFibGU6ITB9KSx7Y2xvc2U6ZnVuY3Rpb24oKXtjLmNsb3NlKCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19fTt2YXIgRURJVF9MRUFWRT0wLEVESVRfVVBEQVRFPTEsRURJVF9BREQ9MixFRElUX0RFTEVURT0zO0FycmF5U3BsaWNlLnByb3RvdHlwZT17Y2FsY0VkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mLWUrMSxoPWMtYisxLGk9bmV3IEFycmF5KGcpLGo9MDtnPmo7aisrKWlbal09bmV3IEFycmF5KGgpLGlbal1bMF09ajtmb3IodmFyIGs9MDtoPms7aysrKWlbMF1ba109aztmb3IodmFyIGo9MTtnPmo7aisrKWZvcih2YXIgaz0xO2g+aztrKyspaWYodGhpcy5lcXVhbHMoYVtiK2stMV0sZFtlK2otMV0pKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX0sc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaChFRElUX0xFQVZFKTooZS5wdXNoKEVESVRfVVBEQVRFKSxkPWcpLGItLSxjLS0pOmY9PWg/KGUucHVzaChFRElUX0RFTEVURSksYi0tLGQ9aCk6KGUucHVzaChFRElUX0FERCksYy0tLGQ9aSl9ZWxzZSBlLnB1c2goRURJVF9ERUxFVEUpLGItLTtlbHNlIGUucHVzaChFRElUX0FERCksYy0tO3JldHVybiBlLnJldmVyc2UoKSxlfSxjYWxjU3BsaWNlczpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9MCxoPTAsaT1NYXRoLm1pbihjLWIsZi1lKTtpZigwPT1iJiYwPT1lJiYoZz10aGlzLnNoYXJlZFByZWZpeChhLGQsaSkpLGM9PWEubGVuZ3RoJiZmPT1kLmxlbmd0aCYmKGg9dGhpcy5zaGFyZWRTdWZmaXgoYSxkLGktZykpLGIrPWcsZSs9ZyxjLT1oLGYtPWgsYy1iPT0wJiZmLWU9PTApcmV0dXJuW107aWYoYj09Yyl7Zm9yKHZhciBqPW5ld1NwbGljZShiLFtdLDApO2Y+ZTspai5yZW1vdmVkLnB1c2goZFtlKytdKTtyZXR1cm5bal19aWYoZT09ZilyZXR1cm5bbmV3U3BsaWNlKGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIEVESVRfTEVBVkU6aiYmKGwucHVzaChqKSxqPXZvaWQgMCksbSsrLG4rKzticmVhaztjYXNlIEVESVRfVVBEQVRFOmp8fChqPW5ld1NwbGljZShtLFtdLDApKSxqLmFkZGVkQ291bnQrKyxtKyssai5yZW1vdmVkLnB1c2goZFtuXSksbisrO2JyZWFrO2Nhc2UgRURJVF9BREQ6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIEVESVRfREVMRVRFOmp8fChqPW5ld1NwbGljZShtLFtdLDApKSxqLnJlbW92ZWQucHVzaChkW25dKSxuKyt9cmV0dXJuIGomJmwucHVzaChqKSxsfSxzaGFyZWRQcmVmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wO2M+ZDtkKyspaWYoIXRoaXMuZXF1YWxzKGFbZF0sYltkXSkpcmV0dXJuIGQ7cmV0dXJuIGN9LHNoYXJlZFN1ZmZpeDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsZj0wO2M+ZiYmdGhpcy5lcXVhbHMoYVstLWRdLGJbLS1lXSk7KWYrKztyZXR1cm4gZn0sY2FsY3VsYXRlU3BsaWNlczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNhbGNTcGxpY2VzKGEsMCxhLmxlbmd0aCxiLDAsYi5sZW5ndGgpfSxlcXVhbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9fTt2YXIgYXJyYXlTcGxpY2U9bmV3IEFycmF5U3BsaWNlO2dsb2JhbC5PYnNlcnZlcj1PYnNlcnZlcixnbG9iYWwuT2JzZXJ2ZXIucnVuRU9NXz1ydW5FT00sZ2xvYmFsLk9ic2VydmVyLmhhc09iamVjdE9ic2VydmU9aGFzT2JzZXJ2ZSxnbG9iYWwuQXJyYXlPYnNlcnZlcj1BcnJheU9ic2VydmVyLGdsb2JhbC5BcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXJyYXlTcGxpY2UuY2FsY3VsYXRlU3BsaWNlcyhhLGIpfSxnbG9iYWwuQXJyYXlTcGxpY2U9QXJyYXlTcGxpY2UsZ2xvYmFsLk9iamVjdE9ic2VydmVyPU9iamVjdE9ic2VydmVyLGdsb2JhbC5QYXRoT2JzZXJ2ZXI9UGF0aE9ic2VydmVyLGdsb2JhbC5Db21wb3VuZE9ic2VydmVyPUNvbXBvdW5kT2JzZXJ2ZXIsZ2xvYmFsLlBhdGg9UGF0aCxnbG9iYWwuT2JzZXJ2ZXJUcmFuc2Zvcm09T2JzZXJ2ZXJUcmFuc2Zvcm19KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGU/Z2xvYmFsOnRoaXN8fHdpbmRvdyksd2luZG93LlBsYXRmb3JtPXdpbmRvdy5QbGF0Zm9ybXx8e30sd2luZG93LmxvZ0ZsYWdzPXdpbmRvdy5sb2dGbGFnc3x8e30sZnVuY3Rpb24oYSl7dmFyIGI9YS5mbGFnc3x8e307bG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihhKXthPWEuc3BsaXQoIj0iKSxhWzBdJiYoYlthWzBdXT1hWzFdfHwhMCl9KTt2YXIgYz1kb2N1bWVudC5jdXJyZW50U2NyaXB0fHxkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzY3JpcHRbc3JjKj0icGxhdGZvcm0uanMiXScpO2lmKGMpZm9yKHZhciBkLGU9Yy5hdHRyaWJ1dGVzLGY9MDtmPGUubGVuZ3RoO2YrKylkPWVbZl0sInNyYyIhPT1kLm5hbWUmJihiW2QubmFtZV09ZC52YWx1ZXx8ITApO2IubG9nJiZiLmxvZy5zcGxpdCgiLCIpLmZvckVhY2goZnVuY3Rpb24oYSl7d2luZG93LmxvZ0ZsYWdzW2FdPSEwfSksYi5zaGFkb3c9Yi5zaGFkb3d8fGIuc2hhZG93ZG9tfHxiLnBvbHlmaWxsLGIuc2hhZG93PSJuYXRpdmUiPT09Yi5zaGFkb3c/ITE6Yi5zaGFkb3d8fCFIVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdCxiLnNoYWRvdyYmZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgic2NyaXB0IikubGVuZ3RoPjEmJmNvbnNvbGUud2FybigicGxhdGZvcm0uanMgaXMgbm90IHRoZSBmaXJzdCBzY3JpcHQgb24gdGhlIHBhZ2UuIFNlZSBodHRwOi8vd3d3LnBvbHltZXItcHJvamVjdC5vcmcvZG9jcy9zdGFydC9wbGF0Zm9ybS5odG1sI3NldHVwIGZvciBkZXRhaWxzLiIpLGIucmVnaXN0ZXImJih3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LHdpbmRvdy5DdXN0b21FbGVtZW50cy5mbGFncy5yZWdpc3Rlcj1iLnJlZ2lzdGVyKSxiLmltcG9ydHMmJih3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LHdpbmRvdy5IVE1MSW1wb3J0cy5mbGFncy5pbXBvcnRzPWIuaW1wb3J0cyksYS5mbGFncz1ifShQbGF0Zm9ybSksUGxhdGZvcm0uZmxhZ3Muc2hhZG93Pyh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGw9e30sZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBMKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7SyhhLGMsTShiLGMpKX0pLGF9ZnVuY3Rpb24gZChhLGIpe3JldHVybiBMKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7c3dpdGNoKGMpe2Nhc2UiYXJndW1lbnRzIjpjYXNlImNhbGxlciI6Y2FzZSJsZW5ndGgiOmNhc2UibmFtZSI6Y2FzZSJwcm90b3R5cGUiOmNhc2UidG9TdHJpbmciOnJldHVybn1LKGEsYyxNKGIsYykpfSksYX1mdW5jdGlvbiBlKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXWluIGEpcmV0dXJuIGJbY119ZnVuY3Rpb24gZihhKXt2YXIgYj1hLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9RS5nZXQoYik7aWYoYylyZXR1cm4gYzt2YXIgZD1mKGIpLGU9dChkKTtyZXR1cm4gcShiLGUsYSksZX1mdW5jdGlvbiBnKGEsYil7byhhLGIsITApfWZ1bmN0aW9uIGgoYSxiKXtvKGIsYSwhMSl9ZnVuY3Rpb24gaShhKXtyZXR1cm4vXm9uW2Etel0rJC8udGVzdChhKX1mdW5jdGlvbiBqKGEpe3JldHVybi9eXHdbYS16QS1aXzAtOV0qJC8udGVzdChhKX1mdW5jdGlvbiBrKGEpe3JldHVybiBIJiZqKGEpP25ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMuaW1wbC4iK2EpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbFthXX19ZnVuY3Rpb24gbChhKXtyZXR1cm4gSCYmaihhKT9uZXcgRnVuY3Rpb24oInYiLCJ0aGlzLmltcGwuIithKyIgPSB2Iik6ZnVuY3Rpb24oYil7dGhpcy5pbXBsW2FdPWJ9fWZ1bmN0aW9uIG0oYSl7cmV0dXJuIEgmJmooYSk/bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcy5pbXBsLiIrYSsiLmFwcGx5KHRoaXMuaW1wbCwgYXJndW1lbnRzKSIpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbFthXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19ZnVuY3Rpb24gbihhLGIpe3RyeXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpfWNhdGNoKGMpe3JldHVybiBPfX1mdW5jdGlvbiBvKGIsYyxkKXtmb3IodmFyIGU9TChiKSxmPTA7ZjxlLmxlbmd0aDtmKyspe3ZhciBnPWVbZl07aWYoInBvbHltZXJCbGFja0xpc3RfIiE9PWcmJiEoZyBpbiBjfHxiLnBvbHltZXJCbGFja0xpc3RfJiZiLnBvbHltZXJCbGFja0xpc3RfW2ddKSl7TiYmYi5fX2xvb2t1cEdldHRlcl9fKGcpO3ZhciBoLGosbz1uKGIsZyk7aWYoZCYmImZ1bmN0aW9uIj09dHlwZW9mIG8udmFsdWUpY1tnXT1tKGcpO2Vsc2V7dmFyIHA9aShnKTtoPXA/YS5nZXRFdmVudEhhbmRsZXJHZXR0ZXIoZyk6ayhnKSwoby53cml0YWJsZXx8by5zZXQpJiYoaj1wP2EuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyKGcpOmwoZykpLEsoYyxnLHtnZXQ6aCxzZXQ6aixjb25maWd1cmFibGU6by5jb25maWd1cmFibGUsZW51bWVyYWJsZTpvLmVudW1lcmFibGV9KX19fX1mdW5jdGlvbiBwKGEsYixjKXt2YXIgZT1hLnByb3RvdHlwZTtxKGUsYixjKSxkKGIsYSl9ZnVuY3Rpb24gcShhLGMsZCl7dmFyIGU9Yy5wcm90b3R5cGU7Yih2b2lkIDA9PT1FLmdldChhKSksRS5zZXQoYSxjKSxGLnNldChlLGEpLGcoYSxlKSxkJiZoKGUsZCksSyhlLCJjb25zdHJ1Y3RvciIse3ZhbHVlOmMsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITB9KSxjLnByb3RvdHlwZT1lfWZ1bmN0aW9uIHIoYSxiKXtyZXR1cm4gRS5nZXQoYi5wcm90b3R5cGUpPT09YX1mdW5jdGlvbiBzKGEpe3ZhciBiPU9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxjPWYoYiksZD10KGMpO3JldHVybiBxKGIsZCxhKSxkfWZ1bmN0aW9uIHQoYSl7ZnVuY3Rpb24gYihiKXthLmNhbGwodGhpcyxiKX12YXIgYz1PYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKTtyZXR1cm4gYy5jb25zdHJ1Y3Rvcj1iLGIucHJvdG90eXBlPWMsYn1mdW5jdGlvbiB1KGEpe3JldHVybiBhIGluc3RhbmNlb2YgRy5FdmVudFRhcmdldHx8YSBpbnN0YW5jZW9mIEcuRXZlbnR8fGEgaW5zdGFuY2VvZiBHLlJhbmdlfHxhIGluc3RhbmNlb2YgRy5ET01JbXBsZW1lbnRhdGlvbnx8YSBpbnN0YW5jZW9mIEcuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfHxHLldlYkdMUmVuZGVyaW5nQ29udGV4dCYmYSBpbnN0YW5jZW9mIEcuV2ViR0xSZW5kZXJpbmdDb250ZXh0fWZ1bmN0aW9uIHYoYSl7cmV0dXJuIFEmJmEgaW5zdGFuY2VvZiBRfHxhIGluc3RhbmNlb2YgU3x8YSBpbnN0YW5jZW9mIFJ8fGEgaW5zdGFuY2VvZiBUfHxhIGluc3RhbmNlb2YgVXx8YSBpbnN0YW5jZW9mIFB8fGEgaW5zdGFuY2VvZiBWfHxXJiZhIGluc3RhbmNlb2YgV3x8WCYmYSBpbnN0YW5jZW9mIFh9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYih2KGEpKSxhLnBvbHltZXJXcmFwcGVyX3x8KGEucG9seW1lcldyYXBwZXJfPW5ldyhmKGEpKShhKSkpfWZ1bmN0aW9uIHgoYSl7cmV0dXJuIG51bGw9PT1hP251bGw6KGIodShhKSksYS5pbXBsKX1mdW5jdGlvbiB5KGEpe3JldHVybiBhJiZ1KGEpP3goYSk6YX1mdW5jdGlvbiB6KGEpe3JldHVybiBhJiYhdShhKT93KGEpOmF9ZnVuY3Rpb24gQShhLGMpe251bGwhPT1jJiYoYih2KGEpKSxiKHZvaWQgMD09PWN8fHUoYykpLGEucG9seW1lcldyYXBwZXJfPWMpfWZ1bmN0aW9uIEIoYSxiLGMpe0soYS5wcm90b3R5cGUsYix7Z2V0OmMsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBDKGEsYil7QihhLGIsZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLmltcGxbYl0pfSl9ZnVuY3Rpb24gRChhLGIpe2EuZm9yRWFjaChmdW5jdGlvbihhKXtiLmZvckVhY2goZnVuY3Rpb24oYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXt2YXIgYT16KHRoaXMpO3JldHVybiBhW2JdLmFwcGx5KGEsYXJndW1lbnRzKX19KX0pfXZhciBFPW5ldyBXZWFrTWFwLEY9bmV3IFdlYWtNYXAsRz1PYmplY3QuY3JlYXRlKG51bGwpLEg9ISgic2VjdXJpdHlQb2xpY3kiaW4gZG9jdW1lbnQpfHxkb2N1bWVudC5zZWN1cml0eVBvbGljeS5hbGxvd3NFdmFsO2lmKEgpdHJ5e3ZhciBJPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7SD1JKCl9Y2F0Y2goSil7SD0hMX12YXIgSz1PYmplY3QuZGVmaW5lUHJvcGVydHksTD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxNPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7TCh3aW5kb3cpO3ZhciBOPS9GaXJlZm94Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLE89e2dldDpmdW5jdGlvbigpe30sc2V0OmZ1bmN0aW9uKCl7fSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0sUD13aW5kb3cuRE9NSW1wbGVtZW50YXRpb24sUT13aW5kb3cuRXZlbnRUYXJnZXQsUj13aW5kb3cuRXZlbnQsUz13aW5kb3cuTm9kZSxUPXdpbmRvdy5XaW5kb3csVT13aW5kb3cuUmFuZ2UsVj13aW5kb3cuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFc9d2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCxYPXdpbmRvdy5TVkdFbGVtZW50SW5zdGFuY2U7YS5hc3NlcnQ9YixhLmNvbnN0cnVjdG9yVGFibGU9RSxhLmRlZmluZUdldHRlcj1CLGEuZGVmaW5lV3JhcEdldHRlcj1DLGEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXI9RCxhLmlzV3JhcHBlcj11LGEuaXNXcmFwcGVyRm9yPXIsYS5taXhpbj1jLGEubmF0aXZlUHJvdG90eXBlVGFibGU9RixhLm9uZU9mPWUsYS5yZWdpc3Rlck9iamVjdD1zLGEucmVnaXN0ZXJXcmFwcGVyPXAsYS5yZXdyYXA9QSxhLnVud3JhcD14LGEudW53cmFwSWZOZWVkZWQ9eSxhLndyYXA9dyxhLndyYXBJZk5lZWRlZD16LGEud3JhcHBlcnM9R30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe2c9ITE7dmFyIGE9Zi5zbGljZSgwKTtmPVtdO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0oKX1mdW5jdGlvbiBjKGEpe2YucHVzaChhKSxnfHwoZz0hMCxkKGIsMCkpfXZhciBkLGU9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIsZj1bXSxnPSExO2lmKGUpe3ZhciBoPTEsaT1uZXcgZShiKSxqPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGgpO2kub2JzZXJ2ZShqLHtjaGFyYWN0ZXJEYXRhOiEwfSksZD1mdW5jdGlvbigpe2g9KGgrMSklMixqLmRhdGE9aH19ZWxzZSBkPXdpbmRvdy5zZXRUaW1lb3V0O2Euc2V0RW5kT2ZNaWNyb3Rhc2s9Y30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe3B8fChrKGMpLHA9ITApfWZ1bmN0aW9uIGMoKXtwPSExO2RvIGZvcih2YXIgYT1vLnNsaWNlKCksYj0hMSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10sZT1kLnRha2VSZWNvcmRzKCk7ZihkKSxlLmxlbmd0aCYmKGQuY2FsbGJhY2tfKGUsZCksYj0hMCl9d2hpbGUoYil9ZnVuY3Rpb24gZChhLGIpe3RoaXMudHlwZT1hLHRoaXMudGFyZ2V0PWIsdGhpcy5hZGRlZE5vZGVzPW5ldyBtLk5vZGVMaXN0LHRoaXMucmVtb3ZlZE5vZGVzPW5ldyBtLk5vZGVMaXN0LHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGUoYSxiKXtmb3IoO2E7YT1hLnBhcmVudE5vZGUpe3ZhciBjPW4uZ2V0KGEpO2lmKGMpZm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07ZS5vcHRpb25zLnN1YnRyZWUmJmUuYWRkVHJhbnNpZW50T2JzZXJ2ZXIoYil9fX1mdW5jdGlvbiBmKGEpe2Zvcih2YXIgYj0wO2I8YS5ub2Rlc18ubGVuZ3RoO2IrKyl7dmFyIGM9YS5ub2Rlc19bYl0sZD1uLmdldChjKTtpZighZClyZXR1cm47Zm9yKHZhciBlPTA7ZTxkLmxlbmd0aDtlKyspe3ZhciBmPWRbZV07Zi5vYnNlcnZlcj09PWEmJmYucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9fX1mdW5jdGlvbiBnKGEsYyxlKXtmb3IodmFyIGY9T2JqZWN0LmNyZWF0ZShudWxsKSxnPU9iamVjdC5jcmVhdGUobnVsbCksaD1hO2g7aD1oLnBhcmVudE5vZGUpe3ZhciBpPW4uZ2V0KGgpO2lmKGkpZm9yKHZhciBqPTA7ajxpLmxlbmd0aDtqKyspe3ZhciBrPWlbal0sbD1rLm9wdGlvbnM7aWYoKGg9PT1hfHxsLnN1YnRyZWUpJiYhKCJhdHRyaWJ1dGVzIj09PWMmJiFsLmF0dHJpYnV0ZXN8fCJhdHRyaWJ1dGVzIj09PWMmJmwuYXR0cmlidXRlRmlsdGVyJiYobnVsbCE9PWUubmFtZXNwYWNlfHwtMT09PWwuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoZS5uYW1lKSl8fCJjaGFyYWN0ZXJEYXRhIj09PWMmJiFsLmNoYXJhY3RlckRhdGF8fCJjaGlsZExpc3QiPT09YyYmIWwuY2hpbGRMaXN0KSl7dmFyIG09ay5vYnNlcnZlcjtmW20udWlkX109bSwoImF0dHJpYnV0ZXMiPT09YyYmbC5hdHRyaWJ1dGVPbGRWYWx1ZXx8ImNoYXJhY3RlckRhdGEiPT09YyYmbC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpJiYoZ1ttLnVpZF9dPWUub2xkVmFsdWUpfX19dmFyIG89ITE7Zm9yKHZhciBwIGluIGYpe3ZhciBtPWZbcF0scT1uZXcgZChjLGEpOyJuYW1lImluIGUmJiJuYW1lc3BhY2UiaW4gZSYmKHEuYXR0cmlidXRlTmFtZT1lLm5hbWUscS5hdHRyaWJ1dGVOYW1lc3BhY2U9ZS5uYW1lc3BhY2UpLGUuYWRkZWROb2RlcyYmKHEuYWRkZWROb2Rlcz1lLmFkZGVkTm9kZXMpLGUucmVtb3ZlZE5vZGVzJiYocS5yZW1vdmVkTm9kZXM9ZS5yZW1vdmVkTm9kZXMpLGUucHJldmlvdXNTaWJsaW5nJiYocS5wcmV2aW91c1NpYmxpbmc9ZS5wcmV2aW91c1NpYmxpbmcpLGUubmV4dFNpYmxpbmcmJihxLm5leHRTaWJsaW5nPWUubmV4dFNpYmxpbmcpLHZvaWQgMCE9PWdbcF0mJihxLm9sZFZhbHVlPWdbcF0pLG0ucmVjb3Jkc18ucHVzaChxKSxvPSEwfW8mJmIoKX1mdW5jdGlvbiBoKGEpe2lmKHRoaXMuY2hpbGRMaXN0PSEhYS5jaGlsZExpc3QsdGhpcy5zdWJ0cmVlPSEhYS5zdWJ0cmVlLHRoaXMuYXR0cmlidXRlcz0iYXR0cmlidXRlcyJpbiBhfHwhKCJhdHRyaWJ1dGVPbGRWYWx1ZSJpbiBhfHwiYXR0cmlidXRlRmlsdGVyImluIGEpPyEhYS5hdHRyaWJ1dGVzOiEwLHRoaXMuY2hhcmFjdGVyRGF0YT0iY2hhcmFjdGVyRGF0YU9sZFZhbHVlImluIGEmJiEoImNoYXJhY3RlckRhdGEiaW4gYSk/ITA6ISFhLmNoYXJhY3RlckRhdGEsIXRoaXMuYXR0cmlidXRlcyYmKGEuYXR0cmlidXRlT2xkVmFsdWV8fCJhdHRyaWJ1dGVGaWx0ZXIiaW4gYSl8fCF0aGlzLmNoYXJhY3RlckRhdGEmJmEuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKXRocm93IG5ldyBUeXBlRXJyb3I7aWYodGhpcy5jaGFyYWN0ZXJEYXRhPSEhYS5jaGFyYWN0ZXJEYXRhLHRoaXMuYXR0cmlidXRlT2xkVmFsdWU9ISFhLmF0dHJpYnV0ZU9sZFZhbHVlLHRoaXMuY2hhcmFjdGVyRGF0YU9sZFZhbHVlPSEhYS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUsImF0dHJpYnV0ZUZpbHRlciJpbiBhKXtpZihudWxsPT1hLmF0dHJpYnV0ZUZpbHRlcnx8Im9iamVjdCIhPXR5cGVvZiBhLmF0dHJpYnV0ZUZpbHRlcil0aHJvdyBuZXcgVHlwZUVycm9yO3RoaXMuYXR0cmlidXRlRmlsdGVyPXEuY2FsbChhLmF0dHJpYnV0ZUZpbHRlcil9ZWxzZSB0aGlzLmF0dHJpYnV0ZUZpbHRlcj1udWxsfWZ1bmN0aW9uIGkoYSl7dGhpcy5jYWxsYmFja189YSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3Isby5wdXNoKHRoaXMpfWZ1bmN0aW9uIGooYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgaz1hLnNldEVuZE9mTWljcm90YXNrLGw9YS53cmFwSWZOZWVkZWQsbT1hLndyYXBwZXJzLG49bmV3IFdlYWtNYXAsbz1bXSxwPSExLHE9QXJyYXkucHJvdG90eXBlLnNsaWNlLHI9MDtpLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2E9bChhKTt2YXIgYyxkPW5ldyBoKGIpLGU9bi5nZXQoYSk7ZXx8bi5zZXQoYSxlPVtdKTtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKyllW2ZdLm9ic2VydmVyPT09dGhpcyYmKGM9ZVtmXSxjLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpLGMub3B0aW9ucz1kKTtjfHwoYz1uZXcgaih0aGlzLGEsZCksZS5wdXNoKGMpLHRoaXMubm9kZXNfLnB1c2goYSkpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9bi5nZXQoYSksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdO2lmKGQub2JzZXJ2ZXI9PT10aGlzKXtiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX0sai5wcm90b3R5cGU9e2FkZFRyYW5zaWVudE9ic2VydmVyOmZ1bmN0aW9uKGEpe2lmKGEhPT10aGlzLnRhcmdldCl7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9bi5nZXQoYSk7Ynx8bi5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWZvcih2YXIgYz1hW2JdLGQ9bi5nZXQoYyksZT0wO2U8ZC5sZW5ndGg7ZSsrKWlmKGRbZV09PT10aGlzKXtkLnNwbGljZShlLDEpO2JyZWFrfX19LGEuZW5xdWV1ZU11dGF0aW9uPWcsYS5yZWdpc3RlclRyYW5zaWVudE9ic2VydmVycz1lLGEud3JhcHBlcnMuTXV0YXRpb25PYnNlcnZlcj1pLGEud3JhcHBlcnMuTXV0YXRpb25SZWNvcmQ9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe3RoaXMucm9vdD1hLHRoaXMucGFyZW50PWJ9ZnVuY3Rpb24gYyhhLGIpe2lmKGEudHJlZVNjb3BlXyE9PWIpe2EudHJlZVNjb3BlXz1iO2Zvcih2YXIgZD1hLnNoYWRvd1Jvb3Q7ZDtkPWQub2xkZXJTaGFkb3dSb290KWQudHJlZVNjb3BlXy5wYXJlbnQ9Yjtmb3IodmFyIGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWMoZSxiKX19ZnVuY3Rpb24gZChhKXtpZihhLnRyZWVTY29wZV8pcmV0dXJuIGEudHJlZVNjb3BlXzt2YXIgYyxlPWEucGFyZW50Tm9kZTtyZXR1cm4gYz1lP2QoZSk6bmV3IGIoYSxudWxsKSxhLnRyZWVTY29wZV89Y31iLnByb3RvdHlwZT17Z2V0IHJlbmRlcmVyKCl7cmV0dXJuIHRoaXMucm9vdCBpbnN0YW5jZW9mIGEud3JhcHBlcnMuU2hhZG93Um9vdD9hLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzLnJvb3QuaG9zdCk6bnVsbH0sY29udGFpbnM6ZnVuY3Rpb24oYSl7Zm9yKDthO2E9YS5wYXJlbnQpaWYoYT09PXRoaXMpcmV0dXJuITA7cmV0dXJuITF9fSxhLlRyZWVTY29wZT1iLGEuZ2V0VHJlZVNjb3BlPWQsYS5zZXRUcmVlU2NvcGU9Y30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFEuU2hhZG93Um9vdH1mdW5jdGlvbiBjKGEpe3ZhciBiPWEubG9jYWxOYW1lO3JldHVybiJjb250ZW50Ij09PWJ8fCJzaGFkb3ciPT09Yn1mdW5jdGlvbiBkKGEpe3JldHVybiEhYS5zaGFkb3dSb290fWZ1bmN0aW9uIGUoYSl7dmFyIGI7cmV0dXJuIGEucGFyZW50Tm9kZXx8KGI9YS5kZWZhdWx0VmlldykmJlAoYil8fG51bGx9ZnVuY3Rpb24gZihmLGcsaCl7aWYoaC5sZW5ndGgpcmV0dXJuIGguc2hpZnQoKTtpZihiKGYpKXJldHVybiBqKGYpfHxmLmhvc3Q7dmFyIGk9YS5ldmVudFBhcmVudHNUYWJsZS5nZXQoZik7aWYoaSl7Zm9yKHZhciBrPTE7azxpLmxlbmd0aDtrKyspaFtrLTFdPWlba107cmV0dXJuIGlbMF19aWYoZyYmYyhmKSl7dmFyIGw9Zi5wYXJlbnROb2RlO2lmKGwmJmQobCkpZm9yKHZhciBtPWEuZ2V0U2hhZG93VHJlZXMobCksbj1qKGcpLGs9MDtrPG0ubGVuZ3RoO2srKylpZihtW2tdLmNvbnRhaW5zKG4pKXJldHVybiBufXJldHVybiBlKGYpfWZ1bmN0aW9uIGcoYSl7Zm9yKHZhciBkPVtdLGU9YSxnPVtdLGk9W107ZTspe3ZhciBqPW51bGw7aWYoYyhlKSl7aj1oKGQpO3ZhciBrPWRbZC5sZW5ndGgtMV18fGU7ZC5wdXNoKGspfWVsc2UgZC5sZW5ndGh8fGQucHVzaChlKTt2YXIgbD1kW2QubGVuZ3RoLTFdO2cucHVzaCh7dGFyZ2V0OmwsY3VycmVudFRhcmdldDplfSksYihlKSYmZC5wb3AoKSxlPWYoZSxqLGkpfXJldHVybiBnfWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTE7Yj49MDtiLS0paWYoIWMoYVtiXSkpcmV0dXJuIGFbYl07cmV0dXJuIG51bGx9ZnVuY3Rpb24gaShhLGQpe2Zvcih2YXIgZT1bXTthOyl7Zm9yKHZhciBnPVtdLGk9ZCxqPXZvaWQgMDtpOyl7dmFyIG09bnVsbDtpZihnLmxlbmd0aCl7aWYoYyhpKSYmKG09aChnKSxrKGopKSl7dmFyIG49Z1tnLmxlbmd0aC0xXTtnLnB1c2gobil9fWVsc2UgZy5wdXNoKGkpO2lmKGwoaSxhKSlyZXR1cm4gZ1tnLmxlbmd0aC0xXTtiKGkpJiZnLnBvcCgpLGo9aSxpPWYoaSxtLGUpfWE9YihhKT9hLmhvc3Q6YS5wYXJlbnROb2RlfX1mdW5jdGlvbiBqKGIpe3JldHVybiBhLmluc2VydGlvblBhcmVudFRhYmxlLmdldChiKX1mdW5jdGlvbiBrKGEpe3JldHVybiBqKGEpfWZ1bmN0aW9uIGwoYSxiKXtyZXR1cm4gTChhKT09PUwoYil9ZnVuY3Rpb24gbShhKXtTLmdldChhKXx8KFMuc2V0KGEsITApLG8oUChhKSxQKGEudGFyZ2V0KSkpfWZ1bmN0aW9uIG4oYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJiZWZvcmV1bmxvYWQiOmNhc2UibG9hZCI6Y2FzZSJ1bmxvYWQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIG8oYixjKXtpZihULmdldChiKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWRTdGF0ZUVycm9yIik7VC5zZXQoYiwhMCksYS5yZW5kZXJBbGxQZW5kaW5nKCk7dmFyIGQ9ZyhjKTtyZXR1cm4gMj09PWQubGVuZ3RoJiZkWzBdLnRhcmdldCBpbnN0YW5jZW9mIFEuRG9jdW1lbnQmJm4oYikmJmQuc2hpZnQoKSxfLnNldChiLGQpLHAoYixkKSYmcShiLGQpJiZyKGIsZCksWC5zZXQoYix1Lk5PTkUpLFYuZGVsZXRlKGIsbnVsbCksVC5kZWxldGUoYiksYi5kZWZhdWx0UHJldmVudGVkfWZ1bmN0aW9uIHAoYSxiKXtmb3IodmFyIGMsZD1iLmxlbmd0aC0xO2Q+MDtkLS0pe3ZhciBlPWJbZF0udGFyZ2V0LGY9YltkXS5jdXJyZW50VGFyZ2V0O2lmKGUhPT1mJiYoYz11LkNBUFRVUklOR19QSEFTRSwhcyhiW2RdLGEsYykpKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIHEoYSxiKXt2YXIgYz11LkFUX1RBUkdFVDtyZXR1cm4gcyhiWzBdLGEsYyl9ZnVuY3Rpb24gcihhLGIpe2Zvcih2YXIgYyxkPWEuYnViYmxlcyxlPTE7ZTxiLmxlbmd0aDtlKyspe3ZhciBmPWJbZV0udGFyZ2V0LGc9YltlXS5jdXJyZW50VGFyZ2V0O2lmKGY9PT1nKWM9dS5BVF9UQVJHRVQ7ZWxzZXtpZighZHx8Wi5nZXQoYSkpY29udGludWU7Yz11LkJVQkJMSU5HX1BIQVNFfWlmKCFzKGJbZV0sYSxjKSlyZXR1cm59fWZ1bmN0aW9uIHMoYSxiLGMpe3ZhciBkPWEudGFyZ2V0LGU9YS5jdXJyZW50VGFyZ2V0LGY9Ui5nZXQoZSk7aWYoIWYpcmV0dXJuITA7aWYoInJlbGF0ZWRUYXJnZXQiaW4gYil7dmFyIGc9TyhiKSxoPWcucmVsYXRlZFRhcmdldDtpZihoKXtpZihoIGluc3RhbmNlb2YgT2JqZWN0JiZoLmFkZEV2ZW50TGlzdGVuZXIpe3ZhciBqPVAoaCksaz1pKGUsaik7aWYoaz09PWQpcmV0dXJuITB9ZWxzZSBrPW51bGw7Vy5zZXQoYixrKX19WC5zZXQoYixjKTt2YXIgbD1iLnR5cGUsbT0hMTtVLnNldChiLGQpLFYuc2V0KGIsZSk7Zm9yKHZhciBuPTA7bjxmLmxlbmd0aDtuKyspe3ZhciBvPWZbbl07aWYoby5yZW1vdmVkKW09ITA7ZWxzZSBpZighKG8udHlwZSE9PWx8fCFvLmNhcHR1cmUmJmM9PT11LkNBUFRVUklOR19QSEFTRXx8by5jYXB0dXJlJiZjPT09dS5CVUJCTElOR19QSEFTRSkpdHJ5e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBvLmhhbmRsZXI/by5oYW5kbGVyLmNhbGwoZSxiKTpvLmhhbmRsZXIuaGFuZGxlRXZlbnQoYiksWi5nZXQoYikpcmV0dXJuITF9Y2F0Y2gocCl7d2luZG93Lm9uZXJyb3I/d2luZG93Lm9uZXJyb3IocC5tZXNzYWdlKTpjb25zb2xlLmVycm9yKHAscC5zdGFjayl9fWlmKG0pe3ZhciBxPWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgbj0wO248cS5sZW5ndGg7bisrKXFbbl0ucmVtb3ZlZHx8Zi5wdXNoKHFbbl0pfXJldHVybiFZLmdldChiKX1mdW5jdGlvbiB0KGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB1KGEsYil7aWYoIShhIGluc3RhbmNlb2YgYWIpKXJldHVybiBQKHkoYWIsIkV2ZW50IixhLGIpKTsKdmFyIGM9YTtyZXR1cm4gbGJ8fCJiZWZvcmV1bmxvYWQiIT09Yy50eXBlP3ZvaWQodGhpcy5pbXBsPWMpOm5ldyB6KGMpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIGEmJmEucmVsYXRlZFRhcmdldD9PYmplY3QuY3JlYXRlKGEse3JlbGF0ZWRUYXJnZXQ6e3ZhbHVlOk8oYS5yZWxhdGVkVGFyZ2V0KX19KTphfWZ1bmN0aW9uIHcoYSxiLGMpe3ZhciBkPXdpbmRvd1thXSxlPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGIgaW5zdGFuY2VvZiBkP3ZvaWQodGhpcy5pbXBsPWIpOlAoeShkLGEsYixjKSl9O2lmKGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLGMmJk0oZS5wcm90b3R5cGUsYyksZCl0cnl7TihkLGUsbmV3IGQoInRlbXAiKSl9Y2F0Y2goZil7TihkLGUsZG9jdW1lbnQuY3JlYXRlRXZlbnQoYSkpfXJldHVybiBlfWZ1bmN0aW9uIHgoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXthcmd1bWVudHNbYl09Tyhhcmd1bWVudHNbYl0pO3ZhciBjPU8odGhpcyk7Y1thXS5hcHBseShjLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHkoYSxiLGMsZCl7aWYoamIpcmV0dXJuIG5ldyBhKGMsdihkKSk7dmFyIGU9Tyhkb2N1bWVudC5jcmVhdGVFdmVudChiKSksZj1pYltiXSxnPVtjXTtyZXR1cm4gT2JqZWN0LmtleXMoZikuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1udWxsIT1kJiZhIGluIGQ/ZFthXTpmW2FdOyJyZWxhdGVkVGFyZ2V0Ij09PWEmJihiPU8oYikpLGcucHVzaChiKX0pLGVbImluaXQiK2JdLmFwcGx5KGUsZyksZX1mdW5jdGlvbiB6KGEpe3UuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIEEoYSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGE/ITA6YSYmYS5oYW5kbGVFdmVudH1mdW5jdGlvbiBCKGEpe3N3aXRjaChhKXtjYXNlIkRPTUF0dHJNb2RpZmllZCI6Y2FzZSJET01BdHRyaWJ1dGVOYW1lQ2hhbmdlZCI6Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOmNhc2UiRE9NRWxlbWVudE5hbWVDaGFuZ2VkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZCI6Y2FzZSJET01Ob2RlSW5zZXJ0ZWRJbnRvRG9jdW1lbnQiOmNhc2UiRE9NTm9kZVJlbW92ZWQiOmNhc2UiRE9NTm9kZVJlbW92ZWRGcm9tRG9jdW1lbnQiOmNhc2UiRE9NU3VidHJlZU1vZGlmaWVkIjpyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBDKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIEQoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBRLlNoYWRvd1Jvb3QmJihhPWEuaG9zdCksTyhhKX1mdW5jdGlvbiBFKGEsYil7dmFyIGM9Ui5nZXQoYSk7aWYoYylmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKylpZighY1tkXS5yZW1vdmVkJiZjW2RdLnR5cGU9PT1iKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEYoYSxiKXtmb3IodmFyIGM9TyhhKTtjO2M9Yy5wYXJlbnROb2RlKWlmKEUoUChjKSxiKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBHKGEpe0soYSxuYil9ZnVuY3Rpb24gSChiLGMsZCxlKXthLnJlbmRlckFsbFBlbmRpbmcoKTtmb3IodmFyIGY9UChvYi5jYWxsKGMuaW1wbCxkLGUpKSxoPWcoZix0aGlzKSxpPTA7aTxoLmxlbmd0aDtpKyspe3ZhciBqPWhbaV07aWYoai5jdXJyZW50VGFyZ2V0PT09YilyZXR1cm4gai50YXJnZXR9cmV0dXJuIG51bGx9ZnVuY3Rpb24gSShhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj0kLmdldCh0aGlzKTtyZXR1cm4gYiYmYlthXSYmYlthXS52YWx1ZXx8bnVsbH19ZnVuY3Rpb24gSihhKXt2YXIgYj1hLnNsaWNlKDIpO3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD0kLmdldCh0aGlzKTtkfHwoZD1PYmplY3QuY3JlYXRlKG51bGwpLCQuc2V0KHRoaXMsZCkpO3ZhciBlPWRbYV07aWYoZSYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGIsZS53cmFwcGVkLCExKSwiZnVuY3Rpb24iPT10eXBlb2YgYyl7dmFyIGY9ZnVuY3Rpb24oYil7dmFyIGQ9Yy5jYWxsKHRoaXMsYik7ZD09PSExP2IucHJldmVudERlZmF1bHQoKToib25iZWZvcmV1bmxvYWQiPT09YSYmInN0cmluZyI9PXR5cGVvZiBkJiYoYi5yZXR1cm5WYWx1ZT1kKX07dGhpcy5hZGRFdmVudExpc3RlbmVyKGIsZiwhMSksZFthXT17dmFsdWU6Yyx3cmFwcGVkOmZ9fX19dmFyIEs9YS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcixMPWEuZ2V0VHJlZVNjb3BlLE09YS5taXhpbixOPWEucmVnaXN0ZXJXcmFwcGVyLE89YS51bndyYXAsUD1hLndyYXAsUT1hLndyYXBwZXJzLFI9KG5ldyBXZWFrTWFwLG5ldyBXZWFrTWFwKSxTPW5ldyBXZWFrTWFwLFQ9bmV3IFdlYWtNYXAsVT1uZXcgV2Vha01hcCxWPW5ldyBXZWFrTWFwLFc9bmV3IFdlYWtNYXAsWD1uZXcgV2Vha01hcCxZPW5ldyBXZWFrTWFwLFo9bmV3IFdlYWtNYXAsJD1uZXcgV2Vha01hcCxfPW5ldyBXZWFrTWFwO3QucHJvdG90eXBlPXtlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaGFuZGxlcj09PWEuaGFuZGxlciYmdGhpcy50eXBlPT09YS50eXBlJiZ0aGlzLmNhcHR1cmU9PT1hLmNhcHR1cmV9LGdldCByZW1vdmVkKCl7cmV0dXJuIG51bGw9PT10aGlzLmhhbmRsZXJ9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlcj1udWxsfX07dmFyIGFiPXdpbmRvdy5FdmVudDthYi5wcm90b3R5cGUucG9seW1lckJsYWNrTGlzdF89e3JldHVyblZhbHVlOiEwLGtleUxvY2F0aW9uOiEwfSx1LnByb3RvdHlwZT17Z2V0IHRhcmdldCgpe3JldHVybiBVLmdldCh0aGlzKX0sZ2V0IGN1cnJlbnRUYXJnZXQoKXtyZXR1cm4gVi5nZXQodGhpcyl9LGdldCBldmVudFBoYXNlKCl7cmV0dXJuIFguZ2V0KHRoaXMpfSxnZXQgcGF0aCgpe3ZhciBhPW5ldyBRLk5vZGVMaXN0LGI9Xy5nZXQodGhpcyk7aWYoYil7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aC0xLGU9TChWLmdldCh0aGlzKSksZj0wO2Q+PWY7ZisrKXt2YXIgZz1iW2ZdLmN1cnJlbnRUYXJnZXQsaD1MKGcpO2guY29udGFpbnMoZSkmJihmIT09ZHx8ZyBpbnN0YW5jZW9mIFEuTm9kZSkmJihhW2MrK109Zyl9YS5sZW5ndGg9Y31yZXR1cm4gYX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7WS5zZXQodGhpcywhMCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe1kuc2V0KHRoaXMsITApLFouc2V0KHRoaXMsITApfX0sTihhYix1LGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpKTt2YXIgYmI9dygiVUlFdmVudCIsdSksY2I9dygiQ3VzdG9tRXZlbnQiLHUpLGRiPXtnZXQgcmVsYXRlZFRhcmdldCgpe3JldHVybiBXLmdldCh0aGlzKXx8UChPKHRoaXMpLnJlbGF0ZWRUYXJnZXQpfX0sZWI9TSh7aW5pdE1vdXNlRXZlbnQ6eCgiaW5pdE1vdXNlRXZlbnQiLDE0KX0sZGIpLGZiPU0oe2luaXRGb2N1c0V2ZW50OngoImluaXRGb2N1c0V2ZW50Iiw1KX0sZGIpLGdiPXcoIk1vdXNlRXZlbnQiLGJiLGViKSxoYj13KCJGb2N1c0V2ZW50IixiYixmYiksaWI9T2JqZWN0LmNyZWF0ZShudWxsKSxqYj1mdW5jdGlvbigpe3RyeXtuZXcgd2luZG93LkZvY3VzRXZlbnQoImZvY3VzIil9Y2F0Y2goYSl7cmV0dXJuITF9cmV0dXJuITB9KCk7aWYoIWpiKXt2YXIga2I9ZnVuY3Rpb24oYSxiLGMpe2lmKGMpe3ZhciBkPWliW2NdO2I9TShNKHt9LGQpLGIpfWliW2FdPWJ9O2tiKCJFdmVudCIse2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMX0pLGtiKCJDdXN0b21FdmVudCIse2RldGFpbDpudWxsfSwiRXZlbnQiKSxrYigiVUlFdmVudCIse3ZpZXc6bnVsbCxkZXRhaWw6MH0sIkV2ZW50Iiksa2IoIk1vdXNlRXZlbnQiLHtzY3JlZW5YOjAsc2NyZWVuWTowLGNsaWVudFg6MCxjbGllbnRZOjAsY3RybEtleTohMSxhbHRLZXk6ITEsc2hpZnRLZXk6ITEsbWV0YUtleTohMSxidXR0b246MCxyZWxhdGVkVGFyZ2V0Om51bGx9LCJVSUV2ZW50Iiksa2IoIkZvY3VzRXZlbnQiLHtyZWxhdGVkVGFyZ2V0Om51bGx9LCJVSUV2ZW50Iil9dmFyIGxiPXdpbmRvdy5CZWZvcmVVbmxvYWRFdmVudDt6LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxNKHoucHJvdG90eXBlLHtnZXQgcmV0dXJuVmFsdWUoKXtyZXR1cm4gdGhpcy5pbXBsLnJldHVyblZhbHVlfSxzZXQgcmV0dXJuVmFsdWUoYSl7dGhpcy5pbXBsLnJldHVyblZhbHVlPWF9fSksbGImJk4obGIseik7dmFyIG1iPXdpbmRvdy5FdmVudFRhcmdldCxuYj1bImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdO1tOb2RlLFdpbmRvd10uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnByb3RvdHlwZTtuYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLGErIl8iLHt2YWx1ZTpiW2FdfSl9KX0pLEMucHJvdG90eXBlPXthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtpZihBKGIpJiYhQihhKSl7dmFyIGQ9bmV3IHQoYSxiLGMpLGU9Ui5nZXQodGhpcyk7aWYoZSl7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspaWYoZC5lcXVhbHMoZVtmXSkpcmV0dXJufWVsc2UgZT1bXSxSLnNldCh0aGlzLGUpO2UucHVzaChkKTt2YXIgZz1EKHRoaXMpO2cuYWRkRXZlbnRMaXN0ZW5lcl8oYSxtLCEwKX19LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2M9Qm9vbGVhbihjKTt2YXIgZD1SLmdldCh0aGlzKTtpZihkKXtmb3IodmFyIGU9MCxmPSExLGc9MDtnPGQubGVuZ3RoO2crKylkW2ddLnR5cGU9PT1hJiZkW2ddLmNhcHR1cmU9PT1jJiYoZSsrLGRbZ10uaGFuZGxlcj09PWImJihmPSEwLGRbZ10ucmVtb3ZlKCkpKTtpZihmJiYxPT09ZSl7dmFyIGg9RCh0aGlzKTtoLnJlbW92ZUV2ZW50TGlzdGVuZXJfKGEsbSwhMCl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihiKXt2YXIgYz1PKGIpLGQ9Yy50eXBlO1Muc2V0KGMsITEpLGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBlO0YodGhpcyxkKXx8KGU9ZnVuY3Rpb24oKXt9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkLGUsITApKTt0cnl7cmV0dXJuIE8odGhpcykuZGlzcGF0Y2hFdmVudF8oYyl9ZmluYWxseXtlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxlLCEwKX19fSxtYiYmTihtYixDKTt2YXIgb2I9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludDthLmFkanVzdFJlbGF0ZWRUYXJnZXQ9aSxhLmVsZW1lbnRGcm9tUG9pbnQ9SCxhLmdldEV2ZW50SGFuZGxlckdldHRlcj1JLGEuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyPUosYS53cmFwRXZlbnRUYXJnZXRNZXRob2RzPUcsYS53cmFwcGVycy5CZWZvcmVVbmxvYWRFdmVudD16LGEud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9Y2IsYS53cmFwcGVycy5FdmVudD11LGEud3JhcHBlcnMuRXZlbnRUYXJnZXQ9QyxhLndyYXBwZXJzLkZvY3VzRXZlbnQ9aGIsYS53cmFwcGVycy5Nb3VzZUV2ZW50PWdiLGEud3JhcHBlcnMuVUlFdmVudD1iYn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse2VudW1lcmFibGU6ITF9KX1mdW5jdGlvbiBjKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGQoYSl7aWYobnVsbD09YSlyZXR1cm4gYTtmb3IodmFyIGI9bmV3IGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyliW2RdPWYoYVtkXSk7cmV0dXJuIGIubGVuZ3RoPWUsYn1mdW5jdGlvbiBlKGEsYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX12YXIgZj1hLndyYXA7Yy5wcm90b3R5cGU9e2l0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19fSxiKGMucHJvdG90eXBlLCJpdGVtIiksYS53cmFwcGVycy5Ob2RlTGlzdD1jLGEuYWRkV3JhcE5vZGVMaXN0TWV0aG9kPWUsYS53cmFwTm9kZUxpc3Q9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7YS53cmFwSFRNTENvbGxlY3Rpb249YS53cmFwTm9kZUxpc3QsYS53cmFwcGVycy5IVE1MQ29sbGVjdGlvbj1hLndyYXBwZXJzLk5vZGVMaXN0fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe0EoYSBpbnN0YW5jZW9mIHcpfWZ1bmN0aW9uIGMoYSl7dmFyIGI9bmV3IHk7cmV0dXJuIGJbMF09YSxiLmxlbmd0aD0xLGJ9ZnVuY3Rpb24gZChhLGIsYyl7QyhiLCJjaGlsZExpc3QiLHtyZW1vdmVkTm9kZXM6YyxwcmV2aW91c1NpYmxpbmc6YS5wcmV2aW91c1NpYmxpbmcsbmV4dFNpYmxpbmc6YS5uZXh0U2libGluZ30pfWZ1bmN0aW9uIGUoYSxiKXtDKGEsImNoaWxkTGlzdCIse3JlbW92ZWROb2RlczpifSl9ZnVuY3Rpb24gZihhLGIsZCxlKXtpZihhIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7dmFyIGY9aChhKTtOPSEwO2Zvcih2YXIgZz1mLmxlbmd0aC0xO2c+PTA7Zy0tKWEucmVtb3ZlQ2hpbGQoZltnXSksZltnXS5wYXJlbnROb2RlXz1iO049ITE7Zm9yKHZhciBnPTA7ZzxmLmxlbmd0aDtnKyspZltnXS5wcmV2aW91c1NpYmxpbmdfPWZbZy0xXXx8ZCxmW2ddLm5leHRTaWJsaW5nXz1mW2crMV18fGU7cmV0dXJuIGQmJihkLm5leHRTaWJsaW5nXz1mWzBdKSxlJiYoZS5wcmV2aW91c1NpYmxpbmdfPWZbZi5sZW5ndGgtMV0pLGZ9dmFyIGY9YyhhKSxpPWEucGFyZW50Tm9kZTtyZXR1cm4gaSYmaS5yZW1vdmVDaGlsZChhKSxhLnBhcmVudE5vZGVfPWIsYS5wcmV2aW91c1NpYmxpbmdfPWQsYS5uZXh0U2libGluZ189ZSxkJiYoZC5uZXh0U2libGluZ189YSksZSYmKGUucHJldmlvdXNTaWJsaW5nXz1hKSxmfWZ1bmN0aW9uIGcoYSl7aWYoYSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpcmV0dXJuIGgoYSk7dmFyIGI9YyhhKSxlPWEucGFyZW50Tm9kZTtyZXR1cm4gZSYmZChhLGUsYiksYn1mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYj1uZXcgeSxjPTAsZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYltjKytdPWQ7cmV0dXJuIGIubGVuZ3RoPWMsZShhLGIpLGJ9ZnVuY3Rpb24gaShhKXtyZXR1cm4gYX1mdW5jdGlvbiBqKGEsYil7SShhLGIpLGEubm9kZUlzSW5zZXJ0ZWRfKCl9ZnVuY3Rpb24gayhhLGIpe2Zvcih2YXIgYz1EKGIpLGQ9MDtkPGEubGVuZ3RoO2QrKylqKGFbZF0sYyl9ZnVuY3Rpb24gbChhKXtJKGEsbmV3IHooYSxudWxsKSl9ZnVuY3Rpb24gbShhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylsKGFbYl0pfWZ1bmN0aW9uIG4oYSxiKXt2YXIgYz1hLm5vZGVUeXBlPT09dy5ET0NVTUVOVF9OT0RFP2E6YS5vd25lckRvY3VtZW50O2MhPT1iLm93bmVyRG9jdW1lbnQmJmMuYWRvcHROb2RlKGIpfWZ1bmN0aW9uIG8oYixjKXtpZihjLmxlbmd0aCl7dmFyIGQ9Yi5vd25lckRvY3VtZW50O2lmKGQhPT1jWzBdLm93bmVyRG9jdW1lbnQpZm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspYS5hZG9wdE5vZGVOb1JlbW92ZShjW2VdLGQpfX1mdW5jdGlvbiBwKGEsYil7byhhLGIpO3ZhciBjPWIubGVuZ3RoO2lmKDE9PT1jKXJldHVybiBKKGJbMF0pO2Zvcih2YXIgZD1KKGEub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGU9MDtjPmU7ZSsrKWQuYXBwZW5kQ2hpbGQoSihiW2VdKSk7cmV0dXJuIGR9ZnVuY3Rpb24gcShhKXtpZih2b2lkIDAhPT1hLmZpcnN0Q2hpbGRfKWZvcih2YXIgYj1hLmZpcnN0Q2hpbGRfO2I7KXt2YXIgYz1iO2I9Yi5uZXh0U2libGluZ18sYy5wYXJlbnROb2RlXz1jLnByZXZpb3VzU2libGluZ189Yy5uZXh0U2libGluZ189dm9pZCAwfWEuZmlyc3RDaGlsZF89YS5sYXN0Q2hpbGRfPXZvaWQgMH1mdW5jdGlvbiByKGEpe2lmKGEuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7Yjspe0EoYi5wYXJlbnROb2RlPT09YSk7dmFyIGM9Yi5uZXh0U2libGluZyxkPUooYiksZT1kLnBhcmVudE5vZGU7ZSYmVS5jYWxsKGUsZCksYi5wcmV2aW91c1NpYmxpbmdfPWIubmV4dFNpYmxpbmdfPWIucGFyZW50Tm9kZV89bnVsbCxiPWN9YS5maXJzdENoaWxkXz1hLmxhc3RDaGlsZF89bnVsbH1lbHNlIGZvcih2YXIgYyxmPUooYSksZz1mLmZpcnN0Q2hpbGQ7ZzspYz1nLm5leHRTaWJsaW5nLFUuY2FsbChmLGcpLGc9Y31mdW5jdGlvbiBzKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX1mdW5jdGlvbiB0KGEpe2Zvcih2YXIgYixjPTA7YzxhLmxlbmd0aDtjKyspYj1hW2NdLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKX1mdW5jdGlvbiB1KGEsYixjKXt2YXIgZDtpZihkPUsoYz9PLmNhbGwoYyxhLmltcGwsITEpOlAuY2FsbChhLmltcGwsITEpKSxiKXtmb3IodmFyIGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWQuYXBwZW5kQ2hpbGQodShlLCEwLGMpKTtpZihhIGluc3RhbmNlb2YgTS5IVE1MVGVtcGxhdGVFbGVtZW50KWZvcih2YXIgZj1kLmNvbnRlbnQsZT1hLmNvbnRlbnQuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylmLmFwcGVuZENoaWxkKHUoZSwhMCxjKSl9cmV0dXJuIGR9ZnVuY3Rpb24gdihhLGIpe2lmKCFifHxEKGEpIT09RChiKSlyZXR1cm4hMTtmb3IodmFyIGM9YjtjO2M9Yy5wYXJlbnROb2RlKWlmKGM9PT1hKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHcoYSl7QShhIGluc3RhbmNlb2YgUSkseC5jYWxsKHRoaXMsYSksdGhpcy5wYXJlbnROb2RlXz12b2lkIDAsdGhpcy5maXJzdENoaWxkXz12b2lkIDAsdGhpcy5sYXN0Q2hpbGRfPXZvaWQgMCx0aGlzLm5leHRTaWJsaW5nXz12b2lkIDAsdGhpcy5wcmV2aW91c1NpYmxpbmdfPXZvaWQgMCx0aGlzLnRyZWVTY29wZV89dm9pZCAwfXZhciB4PWEud3JhcHBlcnMuRXZlbnRUYXJnZXQseT1hLndyYXBwZXJzLk5vZGVMaXN0LHo9YS5UcmVlU2NvcGUsQT1hLmFzc2VydCxCPWEuZGVmaW5lV3JhcEdldHRlcixDPWEuZW5xdWV1ZU11dGF0aW9uLEQ9YS5nZXRUcmVlU2NvcGUsRT1hLmlzV3JhcHBlcixGPWEubWl4aW4sRz1hLnJlZ2lzdGVyVHJhbnNpZW50T2JzZXJ2ZXJzLEg9YS5yZWdpc3RlcldyYXBwZXIsST1hLnNldFRyZWVTY29wZSxKPWEudW53cmFwLEs9YS53cmFwLEw9YS53cmFwSWZOZWVkZWQsTT1hLndyYXBwZXJzLE49ITEsTz1kb2N1bWVudC5pbXBvcnROb2RlLFA9d2luZG93Lk5vZGUucHJvdG90eXBlLmNsb25lTm9kZSxRPXdpbmRvdy5Ob2RlLFI9d2luZG93LkRvY3VtZW50RnJhZ21lbnQsUz0oUS5wcm90b3R5cGUuYXBwZW5kQ2hpbGQsUS5wcm90b3R5cGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24pLFQ9US5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLFU9US5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsVj1RLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQsVz0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxYPVc/ZnVuY3Rpb24oYSxiKXt0cnl7VS5jYWxsKGEsYil9Y2F0Y2goYyl7aWYoIShhIGluc3RhbmNlb2YgUikpdGhyb3cgY319OmZ1bmN0aW9uKGEsYil7VS5jYWxsKGEsYil9O3cucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLEYody5wcm90b3R5cGUse2FwcGVuZENoaWxkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluc2VydEJlZm9yZShhLG51bGwpfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSxjKXtiKGEpO3ZhciBkO2M/RShjKT9kPUooYyk6KGQ9YyxjPUsoZCkpOihjPW51bGwsZD1udWxsKSxjJiZBKGMucGFyZW50Tm9kZT09PXRoaXMpO3ZhciBlLGg9Yz9jLnByZXZpb3VzU2libGluZzp0aGlzLmxhc3RDaGlsZCxpPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhcyhhKTtpZihlPWk/ZyhhKTpmKGEsdGhpcyxoLGMpLGkpbih0aGlzLGEpLHEodGhpcyksVC5jYWxsKHRoaXMuaW1wbCxKKGEpLGQpO2Vsc2V7aHx8KHRoaXMuZmlyc3RDaGlsZF89ZVswXSksY3x8KHRoaXMubGFzdENoaWxkXz1lW2UubGVuZ3RoLTFdKTt2YXIgaj1kP2QucGFyZW50Tm9kZTp0aGlzLmltcGw7aj9ULmNhbGwoaixwKHRoaXMsZSksZCk6byh0aGlzLGUpfXJldHVybiBDKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6ZSxuZXh0U2libGluZzpjLHByZXZpb3VzU2libGluZzpofSksayhlLHRoaXMpLGF9LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGEpe2lmKGIoYSksYS5wYXJlbnROb2RlIT09dGhpcyl7Zm9yKHZhciBkPSExLGU9KHRoaXMuY2hpbGROb2Rlcyx0aGlzLmZpcnN0Q2hpbGQpO2U7ZT1lLm5leHRTaWJsaW5nKWlmKGU9PT1hKXtkPSEwO2JyZWFrfWlmKCFkKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpfXZhciBmPUooYSksZz1hLm5leHRTaWJsaW5nLGg9YS5wcmV2aW91c1NpYmxpbmc7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7dmFyIGk9dGhpcy5maXJzdENoaWxkLGo9dGhpcy5sYXN0Q2hpbGQsaz1mLnBhcmVudE5vZGU7ayYmWChrLGYpLGk9PT1hJiYodGhpcy5maXJzdENoaWxkXz1nKSxqPT09YSYmKHRoaXMubGFzdENoaWxkXz1oKSxoJiYoaC5uZXh0U2libGluZ189ZyksZyYmKGcucHJldmlvdXNTaWJsaW5nXz1oKSxhLnByZXZpb3VzU2libGluZ189YS5uZXh0U2libGluZ189YS5wYXJlbnROb2RlXz12b2lkIDB9ZWxzZSBxKHRoaXMpLFgodGhpcy5pbXBsLGYpO3JldHVybiBOfHxDKHRoaXMsImNoaWxkTGlzdCIse3JlbW92ZWROb2RlczpjKGEpLG5leHRTaWJsaW5nOmcscHJldmlvdXNTaWJsaW5nOmh9KSxHKHRoaXMsYSksYX0scmVwbGFjZUNoaWxkOmZ1bmN0aW9uKGEsZCl7YihhKTt2YXIgZTtpZihFKGQpP2U9SihkKTooZT1kLGQ9SyhlKSksZC5wYXJlbnROb2RlIT09dGhpcyl0aHJvdyBuZXcgRXJyb3IoIk5vdEZvdW5kRXJyb3IiKTt2YXIgaCxpPWQubmV4dFNpYmxpbmcsaj1kLnByZXZpb3VzU2libGluZyxtPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhcyhhKTtyZXR1cm4gbT9oPWcoYSk6KGk9PT1hJiYoaT1hLm5leHRTaWJsaW5nKSxoPWYoYSx0aGlzLGosaSkpLG0/KG4odGhpcyxhKSxxKHRoaXMpLFYuY2FsbCh0aGlzLmltcGwsSihhKSxlKSk6KHRoaXMuZmlyc3RDaGlsZD09PWQmJih0aGlzLmZpcnN0Q2hpbGRfPWhbMF0pLHRoaXMubGFzdENoaWxkPT09ZCYmKHRoaXMubGFzdENoaWxkXz1oW2gubGVuZ3RoLTFdKSxkLnByZXZpb3VzU2libGluZ189ZC5uZXh0U2libGluZ189ZC5wYXJlbnROb2RlXz12b2lkIDAsZS5wYXJlbnROb2RlJiZWLmNhbGwoZS5wYXJlbnROb2RlLHAodGhpcyxoKSxlKSksQyh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmgscmVtb3ZlZE5vZGVzOmMoZCksbmV4dFNpYmxpbmc6aSxwcmV2aW91c1NpYmxpbmc6an0pLGwoZCksayhoLHRoaXMpLGR9LG5vZGVJc0luc2VydGVkXzpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYS5ub2RlSXNJbnNlcnRlZF8oKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86Syh0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBmaXJzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZmlyc3RDaGlsZF8/dGhpcy5maXJzdENoaWxkXzpLKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmxhc3RDaGlsZF8/dGhpcy5sYXN0Q2hpbGRfOksodGhpcy5pbXBsLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpLKHRoaXMuaW1wbC5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5wcmV2aW91c1NpYmxpbmdfP3RoaXMucHJldmlvdXNTaWJsaW5nXzpLKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgcGFyZW50RWxlbWVudCgpe2Zvcih2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5ub2RlVHlwZSE9PXcuRUxFTUVOVF9OT0RFOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX0sZ2V0IHRleHRDb250ZW50KCl7Zm9yKHZhciBhPSIiLGI9dGhpcy5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKWIubm9kZVR5cGUhPXcuQ09NTUVOVF9OT0RFJiYoYSs9Yi50ZXh0Q29udGVudCk7cmV0dXJuIGF9LHNldCB0ZXh0Q29udGVudChhKXt2YXIgYj1pKHRoaXMuY2hpbGROb2Rlcyk7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7aWYocih0aGlzKSwiIiE9PWEpe3ZhciBjPXRoaXMuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpO3RoaXMuYXBwZW5kQ2hpbGQoYyl9fWVsc2UgcSh0aGlzKSx0aGlzLmltcGwudGV4dENvbnRlbnQ9YTt2YXIgZD1pKHRoaXMuY2hpbGROb2Rlcyk7Qyh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmQscmVtb3ZlZE5vZGVzOmJ9KSxtKGIpLGsoZCx0aGlzKX0sZ2V0IGNoaWxkTm9kZXMoKXtmb3IodmFyIGE9bmV3IHksYj0wLGM9dGhpcy5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9LGNsb25lTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdSh0aGlzLGEpfSxjb250YWluczpmdW5jdGlvbihhKXtyZXR1cm4gdih0aGlzLEwoYSkpfSxjb21wYXJlRG9jdW1lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gUy5jYWxsKHRoaXMuaW1wbCxKKGEpKX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz1pKHRoaXMuY2hpbGROb2RlcyksZD1bXSxlPSIiLGY9MDtmPGMubGVuZ3RoO2YrKyliPWNbZl0sYi5ub2RlVHlwZT09PXcuVEVYVF9OT0RFP2F8fGIuZGF0YS5sZW5ndGg/YT8oZSs9Yi5kYXRhLGQucHVzaChiKSk6YT1iOnRoaXMucmVtb3ZlTm9kZShiKTooYSYmZC5sZW5ndGgmJihhLmRhdGErPWUsY2xlYW5VcE5vZGVzKGQpKSxkPVtdLGU9IiIsYT1udWxsLGIuY2hpbGROb2Rlcy5sZW5ndGgmJmIubm9ybWFsaXplKCkpO2EmJmQubGVuZ3RoJiYoYS5kYXRhKz1lLHQoZCkpfX0pLEIodywib3duZXJEb2N1bWVudCIpLEgoUSx3LGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3IsZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwsdy5wcm90b3R5cGU9RihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx3LnByb3RvdHlwZSksYS5jbG9uZU5vZGU9dSxhLm5vZGVXYXNBZGRlZD1qLGEubm9kZVdhc1JlbW92ZWQ9bCxhLm5vZGVzV2VyZUFkZGVkPWssYS5ub2Rlc1dlcmVSZW1vdmVkPW0sYS5zbmFwc2hvdE5vZGVMaXN0PWksYS53cmFwcGVycy5Ob2RlPXd9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxjKXtmb3IodmFyIGQsZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KXtpZihlLm1hdGNoZXMoYykpcmV0dXJuIGU7aWYoZD1iKGUsYykpcmV0dXJuIGQ7ZT1lLm5leHRFbGVtZW50U2libGluZ31yZXR1cm4gbnVsbH1mdW5jdGlvbiBjKGEsYixkKXtmb3IodmFyIGU9YS5maXJzdEVsZW1lbnRDaGlsZDtlOyllLm1hdGNoZXMoYikmJihkW2QubGVuZ3RoKytdPWUpLGMoZSxiLGQpLGU9ZS5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIGR9dmFyIGQ9e3F1ZXJ5U2VsZWN0b3I6ZnVuY3Rpb24oYSl7cmV0dXJuIGIodGhpcyxhKX0scXVlcnlTZWxlY3RvckFsbDpmdW5jdGlvbihhKXtyZXR1cm4gYyh0aGlzLGEsbmV3IE5vZGVMaXN0KX19LGU9e2dldEVsZW1lbnRzQnlUYWdOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoYSl9LGdldEVsZW1lbnRzQnlDbGFzc05hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbCgiLiIrYSl9LGdldEVsZW1lbnRzQnlUYWdOYW1lTlM6ZnVuY3Rpb24oYSxiKXtpZigiKiI9PT1hKXJldHVybiB0aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpO2Zvcih2YXIgYz1uZXcgTm9kZUxpc3QsZD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpLGU9MCxmPTA7ZTxkLmxlbmd0aDtlKyspZFtlXS5uYW1lc3BhY2VVUkk9PT1hJiYoY1tmKytdPWRbZV0pO3JldHVybiBjLmxlbmd0aD1mLGN9fTthLkdldEVsZW1lbnRzQnlJbnRlcmZhY2U9ZSxhLlNlbGVjdG9yc0ludGVyZmFjZT1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLnByZXZpb3VzU2libGluZztyZXR1cm4gYX12YXIgZD1hLndyYXBwZXJzLk5vZGVMaXN0LGU9e2dldCBmaXJzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBiKHRoaXMuZmlyc3RDaGlsZCl9LGdldCBsYXN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGModGhpcy5sYXN0Q2hpbGQpfSxnZXQgY2hpbGRFbGVtZW50Q291bnQoKXtmb3IodmFyIGE9MCxiPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YjtiPWIubmV4dEVsZW1lbnRTaWJsaW5nKWErKztyZXR1cm4gYX0sZ2V0IGNoaWxkcmVuKCl7Zm9yKHZhciBhPW5ldyBkLGI9MCxjPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YztjPWMubmV4dEVsZW1lbnRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFyZW50Tm9kZTthJiZhLnJlbW92ZUNoaWxkKHRoaXMpfX0sZj17Z2V0IG5leHRFbGVtZW50U2libGluZygpe3JldHVybiBiKHRoaXMubmV4dFNpYmxpbmcpfSxnZXQgcHJldmlvdXNFbGVtZW50U2libGluZygpe3JldHVybiBjKHRoaXMucHJldmlvdXNTaWJsaW5nKX19O2EuQ2hpbGROb2RlSW50ZXJmYWNlPWYsYS5QYXJlbnROb2RlSW50ZXJmYWNlPWV9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGM9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZD1hLndyYXBwZXJzLk5vZGUsZT1hLmVucXVldWVNdXRhdGlvbixmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPXdpbmRvdy5DaGFyYWN0ZXJEYXRhO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGYoYi5wcm90b3R5cGUse2dldCB0ZXh0Q29udGVudCgpe3JldHVybiB0aGlzLmRhdGF9LHNldCB0ZXh0Q29udGVudChhKXt0aGlzLmRhdGE9YX0sZ2V0IGRhdGEoKXtyZXR1cm4gdGhpcy5pbXBsLmRhdGF9LHNldCBkYXRhKGEpe3ZhciBiPXRoaXMuaW1wbC5kYXRhO2UodGhpcywiY2hhcmFjdGVyRGF0YSIse29sZFZhbHVlOmJ9KSx0aGlzLmltcGwuZGF0YT1hfX0pLGYoYi5wcm90b3R5cGUsYyksZyhoLGIsZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpKSxhLndyYXBwZXJzLkNoYXJhY3RlckRhdGE9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYT4+PjB9ZnVuY3Rpb24gYyhhKXtkLmNhbGwodGhpcyxhKX12YXIgZD1hLndyYXBwZXJzLkNoYXJhY3RlckRhdGEsZT0oYS5lbnF1ZXVlTXV0YXRpb24sYS5taXhpbiksZj1hLnJlZ2lzdGVyV3JhcHBlcixnPXdpbmRvdy5UZXh0O2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoYy5wcm90b3R5cGUse3NwbGl0VGV4dDpmdW5jdGlvbihhKXthPWIoYSk7dmFyIGM9dGhpcy5kYXRhO2lmKGE+Yy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJJbmRleFNpemVFcnJvciIpO3ZhciBkPWMuc2xpY2UoMCxhKSxlPWMuc2xpY2UoYSk7dGhpcy5kYXRhPWQ7dmFyIGY9dGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGUpO3JldHVybiB0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZix0aGlzLm5leHRTaWJsaW5nKSxmfX0pLGYoZyxjLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5UZXh0PWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYixjKXt2YXIgZD1iLnBhcmVudE5vZGU7aWYoZCYmZC5zaGFkb3dSb290KXt2YXIgZT1hLmdldFJlbmRlcmVyRm9ySG9zdChkKTtlLmRlcGVuZHNPbkF0dHJpYnV0ZShjKSYmZS5pbnZhbGlkYXRlKCl9fWZ1bmN0aW9uIGMoYSxiLGMpe2soYSwiYXR0cmlidXRlcyIse25hbWU6YixuYW1lc3BhY2U6bnVsbCxvbGRWYWx1ZTpjfSl9ZnVuY3Rpb24gZChhKXtoLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBlKGEsYyxkKXt2YXIgZT1kfHxjO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbY119LHNldDpmdW5jdGlvbihhKXt0aGlzLmltcGxbY109YSxiKHRoaXMsZSl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIGY9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZz1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsaD1hLndyYXBwZXJzLk5vZGUsaT1hLlBhcmVudE5vZGVJbnRlcmZhY2Usaj1hLlNlbGVjdG9yc0ludGVyZmFjZSxrPShhLmFkZFdyYXBOb2RlTGlzdE1ldGhvZCxhLmVucXVldWVNdXRhdGlvbiksbD1hLm1peGluLG09KGEub25lT2YsYS5yZWdpc3RlcldyYXBwZXIpLG49YS53cmFwcGVycyxvPXdpbmRvdy5FbGVtZW50LHA9WyJtYXRjaGVzIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiXS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIG8ucHJvdG90eXBlW2FdfSkscT1wWzBdLHI9by5wcm90b3R5cGVbcV07ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShoLnByb3RvdHlwZSksbChkLnByb3RvdHlwZSx7Y3JlYXRlU2hhZG93Um9vdDpmdW5jdGlvbigpe3ZhciBiPW5ldyBuLlNoYWRvd1Jvb3QodGhpcyk7dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSb290Xz1iO3ZhciBjPWEuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMpO3JldHVybiBjLmludmFsaWRhdGUoKSxifSxnZXQgc2hhZG93Um9vdCgpe3JldHVybiB0aGlzLmltcGwucG9seW1lclNoYWRvd1Jvb3RffHxudWxsfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxkKXt2YXIgZT10aGlzLmltcGwuZ2V0QXR0cmlidXRlKGEpO3RoaXMuaW1wbC5zZXRBdHRyaWJ1dGUoYSxkKSxjKHRoaXMsYSxlKSxiKHRoaXMsYSl9LHJlbW92ZUF0dHJpYnV0ZTpmdW5jdGlvbihhKXt2YXIgZD10aGlzLmltcGwuZ2V0QXR0cmlidXRlKGEpO3RoaXMuaW1wbC5yZW1vdmVBdHRyaWJ1dGUoYSksYyh0aGlzLGEsZCksYih0aGlzLGEpfSxtYXRjaGVzOmZ1bmN0aW9uKGEpe3JldHVybiByLmNhbGwodGhpcy5pbXBsLGEpfX0pLHAuZm9yRWFjaChmdW5jdGlvbihhKXsibWF0Y2hlcyIhPT1hJiYoZC5wcm90b3R5cGVbYV09ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWF0Y2hlcyhhKX0pfSksby5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdCYmKGQucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3Q9ZC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdCksZShkLnByb3RvdHlwZSwiaWQiKSxlKGQucHJvdG90eXBlLCJjbGFzc05hbWUiLCJjbGFzcyIpLGwoZC5wcm90b3R5cGUsZiksbChkLnByb3RvdHlwZSxnKSxsKGQucHJvdG90eXBlLGkpLGwoZC5wcm90b3R5cGUsaiksbShvLGQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG51bGwsIngiKSksYS5tYXRjaGVzTmFtZXM9cCxhLndyYXBwZXJzLkVsZW1lbnQ9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYSl7Y2FzZSImIjpyZXR1cm4iJmFtcDsiO2Nhc2UiPCI6cmV0dXJuIiZsdDsiO2Nhc2UiPiI6cmV0dXJuIiZndDsiO2Nhc2UnIic6cmV0dXJuIiZxdW90OyI7Y2FzZSLCoCI6cmV0dXJuIiZuYnNwOyJ9fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucmVwbGFjZSh6LGIpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEucmVwbGFjZShBLGIpfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPXt9LGM9MDtjPGEubGVuZ3RoO2MrKyliW2FbY11dPSEwO3JldHVybiBifWZ1bmN0aW9uIGYoYSxiKXtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmb3IodmFyIGUsZj1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxoPSI8IitmLGk9YS5hdHRyaWJ1dGVzLGo9MDtlPWlbal07aisrKWgrPSIgIitlLm5hbWUrJz0iJytjKGUudmFsdWUpKyciJztyZXR1cm4gaCs9Ij4iLEJbZl0/aDpoK2coYSkrIjwvIitmKyI+IjtjYXNlIE5vZGUuVEVYVF9OT0RFOnZhciBrPWEuZGF0YTtyZXR1cm4gYiYmQ1tiLmxvY2FsTmFtZV0/azpkKGspO2Nhc2UgTm9kZS5DT01NRU5UX05PREU6cmV0dXJuIjwhLS0iK2EuZGF0YSsiLS0+IjtkZWZhdWx0OnRocm93IGNvbnNvbGUuZXJyb3IoYSksbmV3IEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKX19ZnVuY3Rpb24gZyhhKXthIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50JiYoYT1hLmNvbnRlbnQpO2Zvcih2YXIgYj0iIixjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyliKz1mKGMsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGQ9Y3x8ImRpdiI7YS50ZXh0Q29udGVudD0iIjt2YXIgZT13KGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KGQpKTtlLmlubmVySFRNTD1iO2Zvcih2YXIgZjtmPWUuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZCh4KGYpKX1mdW5jdGlvbiBpKGEpe28uY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz13KGEuY2xvbmVOb2RlKCExKSk7Yy5pbm5lckhUTUw9Yjtmb3IodmFyIGQsZT13KGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7ZD1jLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoZCk7cmV0dXJuIHgoZSl9ZnVuY3Rpb24gayhiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdfX1mdW5jdGlvbiBsKGEpe3AoaSxhLGsoYSkpfWZ1bmN0aW9uIG0oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLGIse2dldDprKGIpLHNldDpmdW5jdGlvbihjKXthLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl09Y30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBuKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxiLHt2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIG89YS53cmFwcGVycy5FbGVtZW50LHA9YS5kZWZpbmVHZXR0ZXIscT1hLmVucXVldWVNdXRhdGlvbixyPWEubWl4aW4scz1hLm5vZGVzV2VyZUFkZGVkLHQ9YS5ub2Rlc1dlcmVSZW1vdmVkLHU9YS5yZWdpc3RlcldyYXBwZXIsdj1hLnNuYXBzaG90Tm9kZUxpc3Qsdz1hLnVud3JhcCx4PWEud3JhcCx5PWEud3JhcHBlcnMsej0vWyZcdTAwQTAiXS9nLEE9L1smXHUwMEEwPD5dL2csQj1lKFsiYXJlYSIsImJhc2UiLCJiciIsImNvbCIsImNvbW1hbmQiLCJlbWJlZCIsImhyIiwiaW1nIiwiaW5wdXQiLCJrZXlnZW4iLCJsaW5rIiwibWV0YSIsInBhcmFtIiwic291cmNlIiwidHJhY2siLCJ3YnIiXSksQz1lKFsic3R5bGUiLCJzY3JpcHQiLCJ4bXAiLCJpZnJhbWUiLCJub2VtYmVkIiwibm9mcmFtZXMiLCJwbGFpbnRleHQiLCJub3NjcmlwdCJdKSxEPS9NU0lFLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLEU9d2luZG93LkhUTUxFbGVtZW50LEY9d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSkscihpLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBnKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2lmKEQmJkNbdGhpcy5sb2NhbE5hbWVdKXJldHVybiB2b2lkKHRoaXMudGV4dENvbnRlbnQ9YSk7dmFyIGI9dih0aGlzLmNoaWxkTm9kZXMpO3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk/dGhpcyBpbnN0YW5jZW9mIHkuSFRNTFRlbXBsYXRlRWxlbWVudD9oKHRoaXMuY29udGVudCxhKTpoKHRoaXMsYSx0aGlzLnRhZ05hbWUpOiFGJiZ0aGlzIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50P2godGhpcy5jb250ZW50LGEpOnRoaXMuaW1wbC5pbm5lckhUTUw9YTt2YXIgYz12KHRoaXMuY2hpbGROb2Rlcyk7cSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmMscmVtb3ZlZE5vZGVzOmJ9KSx0KGIpLHMoYyx0aGlzKX0sZ2V0IG91dGVySFRNTCgpe3JldHVybiBmKHRoaXMsdGhpcy5wYXJlbnROb2RlKX0sc2V0IG91dGVySFRNTChhKXt2YXIgYj10aGlzLnBhcmVudE5vZGU7aWYoYil7Yi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKTt2YXIgYz1qKGIsYSk7Yi5yZXBsYWNlQ2hpbGQoYyx0aGlzKX19LGluc2VydEFkamFjZW50SFRNTDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7c3dpdGNoKFN0cmluZyhhKS50b0xvd2VyQ2FzZSgpKXtjYXNlImJlZm9yZWJlZ2luIjpjPXRoaXMucGFyZW50Tm9kZSxkPXRoaXM7YnJlYWs7Y2FzZSJhZnRlcmVuZCI6Yz10aGlzLnBhcmVudE5vZGUsZD10aGlzLm5leHRTaWJsaW5nO2JyZWFrO2Nhc2UiYWZ0ZXJiZWdpbiI6Yz10aGlzLGQ9dGhpcy5maXJzdENoaWxkO2JyZWFrO2Nhc2UiYmVmb3JlZW5kIjpjPXRoaXMsZD1udWxsO2JyZWFrO2RlZmF1bHQ6cmV0dXJufXZhciBlPWooYyxiKTtjLmluc2VydEJlZm9yZShlLGQpfX0pLFsiY2xpZW50SGVpZ2h0IiwiY2xpZW50TGVmdCIsImNsaWVudFRvcCIsImNsaWVudFdpZHRoIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFdpZHRoIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsV2lkdGgiXS5mb3JFYWNoKGwpLFsic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCJdLmZvckVhY2gobSksWyJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXRDbGllbnRSZWN0cyIsInNjcm9sbEludG9WaWV3Il0uZm9yRWFjaChuKSx1KEUsaSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiIikpLGEud3JhcHBlcnMuSFRNTEVsZW1lbnQ9aSxhLmdldElubmVySFRNTD1nLGEuc2V0SW5uZXJIVE1MPWh9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcCxnPXdpbmRvdy5IVE1MQ2FudmFzRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXRDb250ZXh0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbXBsLmdldENvbnRleHQuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyk7cmV0dXJuIGEmJmYoYSl9fSksZShnLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikpLGEud3JhcHBlcnMuSFRNTENhbnZhc0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9d2luZG93LkhUTUxDb250ZW50RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgc2VsZWN0KCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKX0sc2V0IHNlbGVjdChhKXt0aGlzLnNldEF0dHJpYnV0ZSgic2VsZWN0IixhKX0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7Yy5wcm90b3R5cGUuc2V0QXR0cmlidXRlLmNhbGwodGhpcyxhLGIpLCJzZWxlY3QiPT09U3RyaW5nKGEpLnRvTG93ZXJDYXNlKCkmJnRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCEwKX19KSxmJiZlKGYsYiksYS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtkLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBjKGEsYil7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGU9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKSk7ZC5jYWxsKHRoaXMsZSksZyhlLHRoaXMpLHZvaWQgMCE9PWEmJihlLndpZHRoPWEpLHZvaWQgMCE9PWImJihlLmhlaWdodD1iKX12YXIgZD1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxJbWFnZUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpLGMucHJvdG90eXBlPWIucHJvdG90eXBlLGEud3JhcHBlcnMuSFRNTEltYWdlRWxlbWVudD1iLGEud3JhcHBlcnMuSW1hZ2U9Y30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9d2luZG93LkhUTUxTaGFkb3dFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse30pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEuZGVmYXVsdFZpZXcpcmV0dXJuIGE7dmFyIGI9ay5nZXQoYSk7aWYoIWIpe2ZvcihiPWEuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtiLmxhc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmxhc3RDaGlsZCk7ay5zZXQoYSxiKX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYyxkPWIoYS5vd25lckRvY3VtZW50KSxlPWgoZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2M9YS5maXJzdENoaWxkOyllLmFwcGVuZENoaWxkKGMpO3JldHVybiBlfWZ1bmN0aW9uIGQoYSl7aWYoZS5jYWxsKHRoaXMsYSksIWwpe3ZhciBiPWMoYSk7ai5zZXQodGhpcyxpKGIpKX19dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEudW53cmFwLGk9YS53cmFwLGo9bmV3IFdlYWtNYXAsaz1uZXcgV2Vha01hcCxsPXdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50O2QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUpLGYoZC5wcm90b3R5cGUse2dldCBjb250ZW50KCl7cmV0dXJuIGw/aSh0aGlzLmltcGwuY29udGVudCk6ai5nZXQodGhpcyl9fSksbCYmZyhsLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLnJlZ2lzdGVyV3JhcHBlcixlPXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoZSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIikpLGEud3JhcHBlcnMuSFRNTE1lZGlhRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGMoYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGI9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpKTtkLmNhbGwodGhpcyxiKSxnKGIsdGhpcyksYi5zZXRBdHRyaWJ1dGUoInByZWxvYWQiLCJhdXRvIiksdm9pZCAwIT09YSYmYi5zZXRBdHRyaWJ1dGUoInNyYyIsYSl9dmFyIGQ9YS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxBdWRpb0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSksYy5wcm90b3R5cGU9Yi5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MQXVkaW9FbGVtZW50PWIsYS53cmFwcGVycy5BdWRpbz1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhLnJlcGxhY2UoL1xzKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uIGMoYSl7ZS5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gZChhLGIsYyxmKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt2YXIgZz1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtlLmNhbGwodGhpcyxnKSxoKGcsdGhpcyksdm9pZCAwIT09YSYmKGcudGV4dD1hKSx2b2lkIDAhPT1iJiZnLnNldEF0dHJpYnV0ZSgidmFsdWUiLGIpLGM9PT0hMCYmZy5zZXRBdHRyaWJ1dGUoInNlbGVjdGVkIiwiIiksZy5zZWxlY3RlZD1mPT09ITB9dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEucmV3cmFwLGk9YS51bndyYXAsaj1hLndyYXAsaz13aW5kb3cuSFRNTE9wdGlvbkVsZW1lbnQ7Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZihjLnByb3RvdHlwZSx7Z2V0IHRleHQoKXtyZXR1cm4gYih0aGlzLnRleHRDb250ZW50KX0sc2V0IHRleHQoYSl7dGhpcy50ZXh0Q29udGVudD1iKFN0cmluZyhhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGooaSh0aGlzKS5mb3JtKX19KSxnKGssYyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSksZC5wcm90b3R5cGU9Yy5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MT3B0aW9uRWxlbWVudD1jLGEud3JhcHBlcnMuT3B0aW9uPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS53cmFwLGg9d2luZG93LkhUTUxTZWxlY3RFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2FkZDpmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgYiYmKGI9ZihiKSksZih0aGlzKS5hZGQoZihhKSxiKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP3ZvaWQgYy5wcm90b3R5cGUucmVtb3ZlLmNhbGwodGhpcyk6KCJvYmplY3QiPT10eXBlb2YgYSYmKGE9ZihhKSksdm9pZCBmKHRoaXMpLnJlbW92ZShhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGcoZih0aGlzKS5mb3JtKX19KSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKSksYS53cmFwcGVycy5IVE1MU2VsZWN0RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEud3JhcCxoPWEud3JhcEhUTUxDb2xsZWN0aW9uLGk9d2luZG93LkhUTUxUYWJsZUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNhcHRpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNhcHRpb24pfSxjcmVhdGVDYXB0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVDYXB0aW9uKCkpfSxnZXQgdEhlYWQoKXtyZXR1cm4gZyhmKHRoaXMpLnRIZWFkKX0sY3JlYXRlVEhlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZVRIZWFkKCkpfSxjcmVhdGVURm9vdDpmdW5jdGlvbigpe3JldHVybiBnKGYodGhpcykuY3JlYXRlVEZvb3QoKSl9LGdldCB0Rm9vdCgpe3JldHVybiBnKGYodGhpcykudEZvb3QpfSxnZXQgdEJvZGllcygpe3JldHVybiBoKGYodGhpcykudEJvZGllcyl9LGNyZWF0ZVRCb2R5OmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVUQm9keSgpKX0sZ2V0IHJvd3MoKXtyZXR1cm4gaChmKHRoaXMpLnJvd3MpfSxpbnNlcnRSb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGcoZih0aGlzKS5pbnNlcnRSb3coYSkpfX0pLGUoaSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIikpLGEud3JhcHBlcnMuSFRNTFRhYmxlRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9YS53cmFwLGk9d2luZG93LkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCByb3dzKCl7cmV0dXJuIGYoZyh0aGlzKS5yb3dzKX0saW5zZXJ0Um93OmZ1bmN0aW9uKGEpe3JldHVybiBoKGcodGhpcykuaW5zZXJ0Um93KGEpKX19KSxlKGksYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0aGVhZCIpKSxhLndyYXBwZXJzLkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcEhUTUxDb2xsZWN0aW9uLGc9YS51bndyYXAsaD1hLndyYXAsaT13aW5kb3cuSFRNTFRhYmxlUm93RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY2VsbHMoKXtyZXR1cm4gZihnKHRoaXMpLmNlbGxzKX0saW5zZXJ0Q2VsbDpmdW5jdGlvbihhKXtyZXR1cm4gaChnKHRoaXMpLmluc2VydENlbGwoYSkpfX0pLGUoaSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRyIikpLGEud3JhcHBlcnMuSFRNTFRhYmxlUm93RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3N3aXRjaChhLmxvY2FsTmFtZSl7Y2FzZSJjb250ZW50IjpyZXR1cm4gbmV3IGMoYSk7Y2FzZSJzaGFkb3ciOnJldHVybiBuZXcgZShhKTtjYXNlInRlbXBsYXRlIjpyZXR1cm4gbmV3IGYoYSl9ZC5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQsZD1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGU9YS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudCxmPWEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudCxnPShhLm1peGluLGEucmVnaXN0ZXJXcmFwcGVyKSxoPXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZyhoLGIpLGEud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEucmVnaXN0ZXJPYmplY3QsYz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGMsInRpdGxlIiksZT1iKGQpLGY9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKS5jb25zdHJ1Y3RvcjthLndyYXBwZXJzLlNWR0VsZW1lbnQ9Zn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXttLmNhbGwodGhpcyxhKX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcCxmPWEud3JhcCxnPXdpbmRvdy5TVkdVc2VFbGVtZW50LGg9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIixpPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGgsImciKSksaj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoaCwidXNlIiksaz1pLmNvbnN0cnVjdG9yLGw9T2JqZWN0LmdldFByb3RvdHlwZU9mKGsucHJvdG90eXBlKSxtPWwuY29uc3RydWN0b3I7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShsKSwiaW5zdGFuY2VSb290ImluIGomJmMoYi5wcm90b3R5cGUse2dldCBpbnN0YW5jZVJvb3QoKXtyZXR1cm4gZihlKHRoaXMpLmluc3RhbmNlUm9vdCl9LGdldCBhbmltYXRlZEluc3RhbmNlUm9vdCgpe3JldHVybiBmKGUodGhpcykuYW5pbWF0ZWRJbnN0YW5jZVJvb3QpfX0pLGQoZyxiLGopLGEud3JhcHBlcnMuU1ZHVXNlRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuRXZlbnRUYXJnZXQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXAsZz13aW5kb3cuU1ZHRWxlbWVudEluc3RhbmNlO2cmJihiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY29ycmVzcG9uZGluZ0VsZW1lbnQoKXtyZXR1cm4gZih0aGlzLmltcGwuY29ycmVzcG9uZGluZ0VsZW1lbnQpfSxnZXQgY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQoKXtyZXR1cm4gZih0aGlzLmltcGwuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQpfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiBmKHRoaXMuaW1wbC5wYXJlbnROb2RlKX0sZ2V0IGNoaWxkTm9kZXMoKXt0aHJvdyBuZXcgRXJyb3IoIk5vdCBpbXBsZW1lbnRlZCIpfSxnZXQgZmlyc3RDaGlsZCgpe3JldHVybiBmKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiBmKHRoaXMuaW1wbC5sYXN0Q2hpbGQpfSxnZXQgcHJldmlvdXNTaWJsaW5nKCl7cmV0dXJuIGYodGhpcy5pbXBsLnByZXZpb3VzU2libGluZyl9LGdldCBuZXh0U2libGluZygpe3JldHVybiBmKHRoaXMuaW1wbC5uZXh0U2libGluZyl9fSksZShnLGIpLGEud3JhcHBlcnMuU1ZHRWxlbWVudEluc3RhbmNlPWIpfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEudW53cmFwLGY9YS51bndyYXBJZk5lZWRlZCxnPWEud3JhcCxoPXdpbmRvdy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7YyhiLnByb3RvdHlwZSx7Z2V0IGNhbnZhcygpe3JldHVybiBnKHRoaXMuaW1wbC5jYW52YXMpfSxkcmF3SW1hZ2U6ZnVuY3Rpb24oKXthcmd1bWVudHNbMF09Zihhcmd1bWVudHNbMF0pLHRoaXMuaW1wbC5kcmF3SW1hZ2UuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LGNyZWF0ZVBhdHRlcm46ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzWzBdPWUoYXJndW1lbnRzWzBdKSx0aGlzLmltcGwuY3JlYXRlUGF0dGVybi5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19KSxkKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKS5nZXRDb250ZXh0KCIyZCIpKSxhLndyYXBwZXJzLkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXAsZz13aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0O2lmKGcpe2MoYi5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gZih0aGlzLmltcGwuY2FudmFzKX0sdGV4SW1hZ2UyRDpmdW5jdGlvbigpe2FyZ3VtZW50c1s1XT1lKGFyZ3VtZW50c1s1XSksdGhpcy5pbXBsLnRleEltYWdlMkQuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LHRleFN1YkltYWdlMkQ6ZnVuY3Rpb24oKXthcmd1bWVudHNbNl09ZShhcmd1bWVudHNbNl0pLHRoaXMuaW1wbC50ZXhTdWJJbWFnZTJELmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX0pO3ZhciBoPS9XZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk/e2RyYXdpbmdCdWZmZXJIZWlnaHQ6bnVsbCxkcmF3aW5nQnVmZmVyV2lkdGg6bnVsbH06e307ZChnLGIsaCksYS53cmFwcGVycy5XZWJHTFJlbmRlcmluZ0NvbnRleHQ9Yn19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPWF9dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXAsZz13aW5kb3cuUmFuZ2U7Yi5wcm90b3R5cGU9e2dldCBzdGFydENvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5zdGFydENvbnRhaW5lcil9LGdldCBlbmRDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuZW5kQ29udGFpbmVyKX0sZ2V0IGNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKX0sc2V0U3RhcnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuc2V0U3RhcnQoZShhKSxiKX0sc2V0RW5kOmZ1bmN0aW9uKGEsYil7dGhpcy5pbXBsLnNldEVuZChlKGEpLGIpfSxzZXRTdGFydEJlZm9yZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0U3RhcnRCZWZvcmUoZShhKSl9LHNldFN0YXJ0QWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldFN0YXJ0QWZ0ZXIoZShhKSl9LHNldEVuZEJlZm9yZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0RW5kQmVmb3JlKGUoYSkpfSxzZXRFbmRBZnRlcjpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0RW5kQWZ0ZXIoZShhKSl9LHNlbGVjdE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNlbGVjdE5vZGUoZShhKSl9LHNlbGVjdE5vZGVDb250ZW50czpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2VsZWN0Tm9kZUNvbnRlbnRzKGUoYSkpfSxjb21wYXJlQm91bmRhcnlQb2ludHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLGQoYikpfSxleHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLmltcGwuZXh0cmFjdENvbnRlbnRzKCkpfSxjbG9uZUNvbnRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNsb25lQ29udGVudHMoKSl9LGluc2VydE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmluc2VydE5vZGUoZShhKSl9LHN1cnJvdW5kQ29udGVudHM6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnN1cnJvdW5kQ29udGVudHMoZShhKSl9LGNsb25lUmFuZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLmltcGwuY2xvbmVSYW5nZSgpKX0saXNQb2ludEluUmFuZ2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmlzUG9pbnRJblJhbmdlKGUoYSksYil9LGNvbXBhcmVQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmltcGwuY29tcGFyZVBvaW50KGUoYSksYil9LGludGVyc2VjdHNOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmltcGwuaW50ZXJzZWN0c05vZGUoZShhKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbC50b1N0cmluZygpfX0sZy5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JiYoYi5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBmKHRoaXMuaW1wbC5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoYSkpCn0pLGMod2luZG93LlJhbmdlLGIsZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSksYS53cmFwcGVycy5SYW5nZT1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYz1hLlBhcmVudE5vZGVJbnRlcmZhY2UsZD1hLlNlbGVjdG9yc0ludGVyZmFjZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyT2JqZWN0LGc9Zihkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2UoZy5wcm90b3R5cGUsYyksZShnLnByb3RvdHlwZSxkKSxlKGcucHJvdG90eXBlLGIpO3ZhciBoPWYoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikpO2Eud3JhcHBlcnMuQ29tbWVudD1oLGEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudD1nfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWsoYS5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtjLmNhbGwodGhpcyxiKSxpKGIsdGhpcyksdGhpcy50cmVlU2NvcGVfPW5ldyBkKHRoaXMsZyhhKSk7dmFyIGU9YS5zaGFkb3dSb290O20uc2V0KHRoaXMsZSksbC5zZXQodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkRvY3VtZW50RnJhZ21lbnQsZD1hLlRyZWVTY29wZSxlPWEuZWxlbWVudEZyb21Qb2ludCxmPWEuZ2V0SW5uZXJIVE1MLGc9YS5nZXRUcmVlU2NvcGUsaD1hLm1peGluLGk9YS5yZXdyYXAsaj1hLnNldElubmVySFRNTCxrPWEudW53cmFwLGw9bmV3IFdlYWtNYXAsbT1uZXcgV2Vha01hcCxuPS9bIFx0XG5cclxmXS87Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksaChiLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBmKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2oodGhpcyxhKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxnZXQgb2xkZXJTaGFkb3dSb290KCl7cmV0dXJuIG0uZ2V0KHRoaXMpfHxudWxsfSxnZXQgaG9zdCgpe3JldHVybiBsLmdldCh0aGlzKXx8bnVsbH0saW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyOmZ1bmN0aW9uKCl7cmV0dXJuIGwuZ2V0KHRoaXMpLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUodGhpcyx0aGlzLm93bmVyRG9jdW1lbnQsYSxiKX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG4udGVzdChhKT9udWxsOnRoaXMucXVlcnlTZWxlY3RvcignW2lkPSInK2ErJyJdJyl9fSksYS53cmFwcGVycy5TaGFkb3dSb290PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7YS5wcmV2aW91c1NpYmxpbmdfPWEucHJldmlvdXNTaWJsaW5nLGEubmV4dFNpYmxpbmdfPWEubmV4dFNpYmxpbmcsYS5wYXJlbnROb2RlXz1hLnBhcmVudE5vZGV9ZnVuY3Rpb24gYyhhLGMsZSl7dmFyIGY9RyhhKSxnPUcoYyksaD1lP0coZSk6bnVsbDtpZihkKGMpLGIoYyksZSlhLmZpcnN0Q2hpbGQ9PT1lJiYoYS5maXJzdENoaWxkXz1lKSxlLnByZXZpb3VzU2libGluZ189ZS5wcmV2aW91c1NpYmxpbmc7ZWxzZXthLmxhc3RDaGlsZF89YS5sYXN0Q2hpbGQsYS5sYXN0Q2hpbGQ9PT1hLmZpcnN0Q2hpbGQmJihhLmZpcnN0Q2hpbGRfPWEuZmlyc3RDaGlsZCk7dmFyIGk9SChmLmxhc3RDaGlsZCk7aSYmKGkubmV4dFNpYmxpbmdfPWkubmV4dFNpYmxpbmcpfWYuaW5zZXJ0QmVmb3JlKGcsaCl9ZnVuY3Rpb24gZChhKXt2YXIgYz1HKGEpLGQ9Yy5wYXJlbnROb2RlO2lmKGQpe3ZhciBlPUgoZCk7YihhKSxhLnByZXZpb3VzU2libGluZyYmKGEucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1hKSxhLm5leHRTaWJsaW5nJiYoYS5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPWEpLGUubGFzdENoaWxkPT09YSYmKGUubGFzdENoaWxkXz1hKSxlLmZpcnN0Q2hpbGQ9PT1hJiYoZS5maXJzdENoaWxkXz1hKSxkLnJlbW92ZUNoaWxkKGMpfX1mdW5jdGlvbiBlKGEsYil7ZyhiKS5wdXNoKGEpLHgoYSxiKTt2YXIgYz1KLmdldChhKTtjfHxKLnNldChhLGM9W10pLGMucHVzaChiKX1mdW5jdGlvbiBmKGEpe0kuc2V0KGEsW10pfWZ1bmN0aW9uIGcoYSl7dmFyIGI9SS5nZXQoYSk7cmV0dXJuIGJ8fEkuc2V0KGEsYj1bXSksYn1mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYltjKytdPWQ7cmV0dXJuIGJ9ZnVuY3Rpb24gaShhLGIsYyl7Zm9yKHZhciBkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZylpZihiKGQpKXtpZihjKGQpPT09ITEpcmV0dXJufWVsc2UgaShkLGIsYyl9ZnVuY3Rpb24gaihhLGIpe3ZhciBjPWIuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKTtpZighYylyZXR1cm4hMDtpZihjPWMudHJpbSgpLCFjKXJldHVybiEwO2lmKCEoYSBpbnN0YW5jZW9mIHopKXJldHVybiExO2lmKCIqIj09PWN8fGM9PT1hLmxvY2FsTmFtZSlyZXR1cm4hMDtpZighTS50ZXN0KGMpKXJldHVybiExO2lmKCI6Ij09PWNbMF0mJiFOLnRlc3QoYykpcmV0dXJuITE7dHJ5e3JldHVybiBhLm1hdGNoZXMoYyl9Y2F0Y2goZCl7cmV0dXJuITF9fWZ1bmN0aW9uIGsoKXtmb3IodmFyIGE9MDthPFAubGVuZ3RoO2ErKyl7dmFyIGI9UFthXSxjPWIucGFyZW50UmVuZGVyZXI7YyYmYy5kaXJ0eXx8Yi5yZW5kZXIoKX1QPVtdfWZ1bmN0aW9uIGwoKXt5PW51bGwsaygpfWZ1bmN0aW9uIG0oYSl7dmFyIGI9TC5nZXQoYSk7cmV0dXJuIGJ8fChiPW5ldyBxKGEpLEwuc2V0KGEsYikpLGJ9ZnVuY3Rpb24gbihhKXt2YXIgYj1FKGEpLnJvb3Q7cmV0dXJuIGIgaW5zdGFuY2VvZiBEP2I6bnVsbH1mdW5jdGlvbiBvKGEpe3JldHVybiBtKGEuaG9zdCl9ZnVuY3Rpb24gcChhKXt0aGlzLnNraXA9ITEsdGhpcy5ub2RlPWEsdGhpcy5jaGlsZE5vZGVzPVtdfWZ1bmN0aW9uIHEoYSl7dGhpcy5ob3N0PWEsdGhpcy5kaXJ0eT0hMSx0aGlzLmludmFsaWRhdGVBdHRyaWJ1dGVzKCksdGhpcy5hc3NvY2lhdGVOb2RlKGEpfWZ1bmN0aW9uIHIoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBBfWZ1bmN0aW9uIHMoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBBfWZ1bmN0aW9uIHQoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBCfWZ1bmN0aW9uIHUoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBCfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIGEuc2hhZG93Um9vdH1mdW5jdGlvbiB3KGEpe2Zvcih2YXIgYj1bXSxjPWEuc2hhZG93Um9vdDtjO2M9Yy5vbGRlclNoYWRvd1Jvb3QpYi5wdXNoKGMpO3JldHVybiBifWZ1bmN0aW9uIHgoYSxiKXtLLnNldChhLGIpfXZhciB5LHo9YS53cmFwcGVycy5FbGVtZW50LEE9YS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQsQj1hLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50LEM9YS53cmFwcGVycy5Ob2RlLEQ9YS53cmFwcGVycy5TaGFkb3dSb290LEU9KGEuYXNzZXJ0LGEuZ2V0VHJlZVNjb3BlKSxGPShhLm1peGluLGEub25lT2YpLEc9YS51bndyYXAsSD1hLndyYXAsST1uZXcgV2Vha01hcCxKPW5ldyBXZWFrTWFwLEs9bmV3IFdlYWtNYXAsTD1uZXcgV2Vha01hcCxNPS9eWyouOiNbYS16QS1aX3xdLyxOPW5ldyBSZWdFeHAoIl46KCIrWyJsaW5rIiwidmlzaXRlZCIsInRhcmdldCIsImVuYWJsZWQiLCJkaXNhYmxlZCIsImNoZWNrZWQiLCJpbmRldGVybWluYXRlIiwibnRoLWNoaWxkIiwibnRoLWxhc3QtY2hpbGQiLCJudGgtb2YtdHlwZSIsIm50aC1sYXN0LW9mLXR5cGUiLCJmaXJzdC1jaGlsZCIsImxhc3QtY2hpbGQiLCJmaXJzdC1vZi10eXBlIiwibGFzdC1vZi10eXBlIiwib25seS1vZi10eXBlIl0uam9pbigifCIpKyIpIiksTz1GKHdpbmRvdyxbInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNldFRpbWVvdXQiXSksUD1bXSxRPW5ldyBBcnJheVNwbGljZTtRLmVxdWFscz1mdW5jdGlvbihhLGIpe3JldHVybiBHKGEubm9kZSk9PT1ifSxwLnByb3RvdHlwZT17YXBwZW5kOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBwKGEpO3JldHVybiB0aGlzLmNoaWxkTm9kZXMucHVzaChiKSxifSxzeW5jOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLnNraXApe2Zvcih2YXIgYj10aGlzLm5vZGUsZT10aGlzLmNoaWxkTm9kZXMsZj1oKEcoYikpLGc9YXx8bmV3IFdlYWtNYXAsaT1RLmNhbGN1bGF0ZVNwbGljZXMoZSxmKSxqPTAsaz0wLGw9MCxtPTA7bTxpLmxlbmd0aDttKyspe2Zvcih2YXIgbj1pW21dO2w8bi5pbmRleDtsKyspaysrLGVbaisrXS5zeW5jKGcpO2Zvcih2YXIgbz1uLnJlbW92ZWQubGVuZ3RoLHA9MDtvPnA7cCsrKXt2YXIgcT1IKGZbaysrXSk7Zy5nZXQocSl8fGQocSl9Zm9yKHZhciByPW4uYWRkZWRDb3VudCxzPWZba10mJkgoZltrXSkscD0wO3I+cDtwKyspe3ZhciB0PWVbaisrXSx1PXQubm9kZTtjKGIsdSxzKSxnLnNldCh1LCEwKSx0LnN5bmMoZyl9bCs9cn1mb3IodmFyIG09bDttPGUubGVuZ3RoO20rKyllW21dLnN5bmMoZyl9fX0scS5wcm90b3R5cGU9e3JlbmRlcjpmdW5jdGlvbihhKXtpZih0aGlzLmRpcnR5KXt0aGlzLmludmFsaWRhdGVBdHRyaWJ1dGVzKCksdGhpcy50cmVlQ29tcG9zaXRpb24oKTt2YXIgYj10aGlzLmhvc3QsYz1iLnNoYWRvd1Jvb3Q7dGhpcy5hc3NvY2lhdGVOb2RlKGIpO2Zvcih2YXIgZD0hZSxlPWF8fG5ldyBwKGIpLGY9Yy5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucmVuZGVyTm9kZShjLGUsZiwhMSk7ZCYmZS5zeW5jKCksdGhpcy5kaXJ0eT0hMX19LGdldCBwYXJlbnRSZW5kZXJlcigpe3JldHVybiBFKHRoaXMuaG9zdCkucmVuZGVyZXJ9LGludmFsaWRhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5kaXJ0eSl7aWYodGhpcy5kaXJ0eT0hMCxQLnB1c2godGhpcykseSlyZXR1cm47eT13aW5kb3dbT10obCwwKX19LHJlbmRlck5vZGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYodihjKSl7Yj1iLmFwcGVuZChjKTt2YXIgZT1tKGMpO2UuZGlydHk9ITAsZS5yZW5kZXIoYil9ZWxzZSByKGMpP3RoaXMucmVuZGVySW5zZXJ0aW9uUG9pbnQoYSxiLGMsZCk6dChjKT90aGlzLnJlbmRlclNoYWRvd0luc2VydGlvblBvaW50KGEsYixjKTp0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsYyxkKX0scmVuZGVyQXNBbnlEb21UcmVlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGI9Yi5hcHBlbmQoYyksdihjKSl7dmFyIGU9bShjKTtiLnNraXA9IWUuZGlydHksZS5yZW5kZXIoYil9ZWxzZSBmb3IodmFyIGY9Yy5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucmVuZGVyTm9kZShhLGIsZixkKX0scmVuZGVySW5zZXJ0aW9uUG9pbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZyhjKTtpZihlLmxlbmd0aCl7dGhpcy5hc3NvY2lhdGVOb2RlKGMpO2Zvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgaD1lW2ZdO3IoaCkmJmQ/dGhpcy5yZW5kZXJJbnNlcnRpb25Qb2ludChhLGIsaCxkKTp0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsaCxkKX19ZWxzZSB0aGlzLnJlbmRlckZhbGxiYWNrQ29udGVudChhLGIsYyk7dGhpcy5hc3NvY2lhdGVOb2RlKGMucGFyZW50Tm9kZSl9LHJlbmRlclNoYWRvd0luc2VydGlvblBvaW50OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLm9sZGVyU2hhZG93Um9vdDtpZihkKXt4KGQsYyksdGhpcy5hc3NvY2lhdGVOb2RlKGMucGFyZW50Tm9kZSk7Zm9yKHZhciBlPWQuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyl0aGlzLnJlbmRlck5vZGUoZCxiLGUsITApfWVsc2UgdGhpcy5yZW5kZXJGYWxsYmFja0NvbnRlbnQoYSxiLGMpfSxyZW5kZXJGYWxsYmFja0NvbnRlbnQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYXNzb2NpYXRlTm9kZShjKSx0aGlzLmFzc29jaWF0ZU5vZGUoYy5wYXJlbnROb2RlKTtmb3IodmFyIGQ9Yy5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKXRoaXMucmVuZGVyQXNBbnlEb21UcmVlKGEsYixkLCExKX0saW52YWxpZGF0ZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt0aGlzLmF0dHJpYnV0ZXM9T2JqZWN0LmNyZWF0ZShudWxsKX0sdXBkYXRlRGVwZW5kZW50QXR0cmlidXRlczpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmF0dHJpYnV0ZXM7L1wuXHcrLy50ZXN0KGEpJiYoYlsiY2xhc3MiXT0hMCksLyNcdysvLnRlc3QoYSkmJihiLmlkPSEwKSxhLnJlcGxhY2UoL1xbXHMqKFteXHM9XHx+XF1dKykvZyxmdW5jdGlvbihhLGMpe2JbY109ITB9KX19LGRlcGVuZHNPbkF0dHJpYnV0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2FdfSxkaXN0cmlidXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztpKGEscyxmdW5jdGlvbihhKXtmKGEpLGMudXBkYXRlRGVwZW5kZW50QXR0cmlidXRlcyhhLmdldEF0dHJpYnV0ZSgic2VsZWN0IikpO2Zvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZz1iW2RdO3ZvaWQgMCE9PWcmJmooZyxhKSYmKGUoZyxhKSxiW2RdPXZvaWQgMCl9fSl9LHRyZWVDb21wb3NpdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmhvc3QsYj1hLnNoYWRvd1Jvb3QsYz1bXSxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZylpZihyKGQpKXt2YXIgZT1nKGQpO2UmJmUubGVuZ3RofHwoZT1oKGQpKSxjLnB1c2guYXBwbHkoYyxlKX1lbHNlIGMucHVzaChkKTtmb3IodmFyIGYsajtiOyl7aWYoZj12b2lkIDAsaShiLHUsZnVuY3Rpb24oYSl7cmV0dXJuIGY9YSwhMX0pLGo9Zix0aGlzLmRpc3RyaWJ1dGUoYixjKSxqKXt2YXIgaz1iLm9sZGVyU2hhZG93Um9vdDtpZihrKXtiPWsseChiLGopO2NvbnRpbnVlfWJyZWFrfWJyZWFrfX0sYXNzb2NpYXRlTm9kZTpmdW5jdGlvbihhKXthLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz10aGlzfX0sQy5wcm90b3R5cGUuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSZW5kZXJlcl87cmV0dXJuIGE/KGEuaW52YWxpZGF0ZSgpLCEwKTohMX0sQS5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1mdW5jdGlvbigpe3JldHVybiBrKCksZyh0aGlzKX0sQi5wcm90b3R5cGUubm9kZUlzSW5zZXJ0ZWRfPUEucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1mdW5jdGlvbigpe3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGEsYj1uKHRoaXMpO2ImJihhPW8oYikpLHRoaXMuaW1wbC5wb2x5bWVyU2hhZG93UmVuZGVyZXJfPWEsYSYmYS5pbnZhbGlkYXRlKCl9LGEuZXZlbnRQYXJlbnRzVGFibGU9SixhLmdldFJlbmRlcmVyRm9ySG9zdD1tLGEuZ2V0U2hhZG93VHJlZXM9dyxhLmluc2VydGlvblBhcmVudFRhYmxlPUssYS5yZW5kZXJBbGxQZW5kaW5nPWssYS52aXN1YWw9e2luc2VydEJlZm9yZTpjLHJlbW92ZTpkfX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXtpZih3aW5kb3dbYl0pe2QoIWEud3JhcHBlcnNbYl0pO3ZhciBpPWZ1bmN0aW9uKGEpe2MuY2FsbCh0aGlzLGEpfTtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxlKGkucHJvdG90eXBlLHtnZXQgZm9ybSgpe3JldHVybiBoKGcodGhpcykuZm9ybSl9fSksZih3aW5kb3dbYl0saSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KGIuc2xpY2UoNCwtNykpKSxhLndyYXBwZXJzW2JdPWl9fXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLmFzc2VydCxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPWEudW53cmFwLGg9YS53cmFwLGk9WyJIVE1MQnV0dG9uRWxlbWVudCIsIkhUTUxGaWVsZFNldEVsZW1lbnQiLCJIVE1MSW5wdXRFbGVtZW50IiwiSFRNTEtleWdlbkVsZW1lbnQiLCJIVE1MTGFiZWxFbGVtZW50IiwiSFRNTExlZ2VuZEVsZW1lbnQiLCJIVE1MT2JqZWN0RWxlbWVudCIsIkhUTUxPdXRwdXRFbGVtZW50IiwiSFRNTFRleHRBcmVhRWxlbWVudCJdO2kuZm9yRWFjaChiKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX17dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXA7d2luZG93LlNlbGVjdGlvbn1iLnByb3RvdHlwZT17Z2V0IGFuY2hvck5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuYW5jaG9yTm9kZSl9LGdldCBmb2N1c05vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmFkZFJhbmdlKGQoYSkpfSxjb2xsYXBzZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5jb2xsYXBzZShlKGEpLGIpfSxjb250YWluc05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbnRhaW5zTm9kZShlKGEpLGIpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuZXh0ZW5kKGUoYSksYil9LGdldFJhbmdlQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcy5pbXBsLmdldFJhbmdlQXQoYSkpfSxyZW1vdmVSYW5nZTpmdW5jdGlvbihhKXt0aGlzLmltcGwucmVtb3ZlUmFuZ2UoZChhKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3RBbGxDaGlsZHJlbihlKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxjKHdpbmRvdy5TZWxlY3Rpb24sYix3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLGEud3JhcHBlcnMuU2VsZWN0aW9uPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ay5jYWxsKHRoaXMsYSksdGhpcy50cmVlU2NvcGVfPW5ldyBwKHRoaXMsbnVsbCl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1kb2N1bWVudFthXTtiLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7RC5jYWxsKGIuaW1wbCx6KGEpKSxlKGEsYil9ZnVuY3Rpb24gZShhLGIpe2Euc2hhZG93Um9vdCYmYi5hZG9wdE5vZGUoYS5zaGFkb3dSb290KSxhIGluc3RhbmNlb2YgbyYmZihhLGIpO2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpZShjLGIpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLm9sZGVyU2hhZG93Um9vdDtjJiZiLmFkb3B0Tm9kZShjKX1mdW5jdGlvbiBnKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19dmFyIGo9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGs9YS53cmFwcGVycy5Ob2RlLGw9YS5QYXJlbnROb2RlSW50ZXJmYWNlLG09YS53cmFwcGVycy5TZWxlY3Rpb24sbj1hLlNlbGVjdG9yc0ludGVyZmFjZSxvPWEud3JhcHBlcnMuU2hhZG93Um9vdCxwPWEuVHJlZVNjb3BlLHE9YS5jbG9uZU5vZGUscj1hLmRlZmluZVdyYXBHZXR0ZXIscz1hLmVsZW1lbnRGcm9tUG9pbnQsdD1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLHU9YS5tYXRjaGVzTmFtZXMsdj1hLm1peGluLHc9YS5yZWdpc3RlcldyYXBwZXIseD1hLnJlbmRlckFsbFBlbmRpbmcseT1hLnJld3JhcCx6PWEudW53cmFwLEE9YS53cmFwLEI9YS53cmFwRXZlbnRUYXJnZXRNZXRob2RzLEM9KGEud3JhcE5vZGVMaXN0LG5ldyBXZWFrTWFwKTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGsucHJvdG90eXBlKSxyKGIsImRvY3VtZW50RWxlbWVudCIpLHIoYiwiYm9keSIpLHIoYiwiaGVhZCIpLFsiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImdldEVsZW1lbnRCeUlkIl0uZm9yRWFjaChjKTt2YXIgRD1kb2N1bWVudC5hZG9wdE5vZGUsRT1kb2N1bWVudC5nZXRTZWxlY3Rpb247aWYodihiLnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkKGEsdGhpcyksYX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBzKHRoaXMsdGhpcyxhLGIpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHEoYSxiLHRoaXMuaW1wbCl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB4KCksbmV3IG0oRS5jYWxsKHoodGhpcykpKX19KSxkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQpe3ZhciBGPWRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDtiLnByb3RvdHlwZS5yZWdpc3RlckVsZW1lbnQ9ZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhP3ZvaWQodGhpcy5pbXBsPWEpOmY/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChmLGIpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYil9dmFyIGUsZjtpZih2b2lkIDAhPT1jJiYoZT1jLnByb3RvdHlwZSxmPWMuZXh0ZW5kcyksZXx8KGU9T2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChlKSl0aHJvdyBuZXcgRXJyb3IoIk5vdFN1cHBvcnRlZEVycm9yIik7Zm9yKHZhciBnLGg9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLGk9W107aCYmIShnPWEubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KGgpKTspaS5wdXNoKGgpLGg9T2JqZWN0LmdldFByb3RvdHlwZU9mKGgpO2lmKCFnKXRocm93IG5ldyBFcnJvcigiTm90U3VwcG9ydGVkRXJyb3IiKTtmb3IodmFyIGo9T2JqZWN0LmNyZWF0ZShnKSxrPWkubGVuZ3RoLTE7az49MDtrLS0paj1PYmplY3QuY3JlYXRlKGopO1siY3JlYXRlZENhbGxiYWNrIiwiYXR0YWNoZWRDYWxsYmFjayIsImRldGFjaGVkQ2FsbGJhY2siLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWVbYV07YiYmKGpbYV09ZnVuY3Rpb24oKXtBKHRoaXMpaW5zdGFuY2VvZiBkfHx5KHRoaXMpLGIuYXBwbHkoQSh0aGlzKSxhcmd1bWVudHMpfSl9KTt2YXIgbD17cHJvdG90eXBlOmp9O2YmJihsLmV4dGVuZHM9ZiksZC5wcm90b3R5cGU9ZSxkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kLGEuY29uc3RydWN0b3JUYWJsZS5zZXQoaixkKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLnNldChlLGopO0YuY2FsbCh6KHRoaXMpLGIsbCk7cmV0dXJuIGR9LHQoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJyZWdpc3RlckVsZW1lbnQiXSl9dChbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudCx3aW5kb3cuSFRNTEh0bWxFbGVtZW50XSxbImFwcGVuZENoaWxkIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJjb250YWlucyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lTlMiLCJpbnNlcnRCZWZvcmUiLCJxdWVyeVNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZUNoaWxkIiwicmVwbGFjZUNoaWxkIl0uY29uY2F0KHUpKSx0KFt3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnRdLFsiYWRvcHROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRhaW5zIiwiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImVsZW1lbnRGcm9tUG9pbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldFNlbGVjdGlvbiJdKSx2KGIucHJvdG90eXBlLGopLHYoYi5wcm90b3R5cGUsbCksdihiLnByb3RvdHlwZSxuKSx2KGIucHJvdG90eXBlLHtnZXQgaW1wbGVtZW50YXRpb24oKXt2YXIgYT1DLmdldCh0aGlzKTtyZXR1cm4gYT9hOihhPW5ldyBnKHoodGhpcykuaW1wbGVtZW50YXRpb24pLEMuc2V0KHRoaXMsYSksYSl9fSksdyh3aW5kb3cuRG9jdW1lbnQsYixkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpKSx3aW5kb3cuSFRNTERvY3VtZW50JiZ3KHdpbmRvdy5IVE1MRG9jdW1lbnQsYiksQihbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudF0pLGgoZywiY3JlYXRlRG9jdW1lbnRUeXBlIiksaChnLCJjcmVhdGVEb2N1bWVudCIpLGgoZywiY3JlYXRlSFRNTERvY3VtZW50IiksaShnLCJoYXNGZWF0dXJlIiksdyh3aW5kb3cuRE9NSW1wbGVtZW50YXRpb24sZyksdChbd2luZG93LkRPTUltcGxlbWVudGF0aW9uXSxbImNyZWF0ZURvY3VtZW50VHlwZSIsImNyZWF0ZURvY3VtZW50IiwiY3JlYXRlSFRNTERvY3VtZW50IiwiaGFzRmVhdHVyZSJdKSxhLmFkb3B0Tm9kZU5vUmVtb3ZlPWQsYS53cmFwcGVycy5ET01JbXBsZW1lbnRhdGlvbj1nLGEud3JhcHBlcnMuRG9jdW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGQ9YS53cmFwcGVycy5TZWxlY3Rpb24sZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz1hLnJlbmRlckFsbFBlbmRpbmcsaD1hLnVud3JhcCxpPWEudW53cmFwSWZOZWVkZWQsaj1hLndyYXAsaz13aW5kb3cuV2luZG93LGw9d2luZG93LmdldENvbXB1dGVkU3R5bGUsbT13aW5kb3cuZ2V0U2VsZWN0aW9uO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGsucHJvdG90eXBlLmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaih0aGlzfHx3aW5kb3cpLmdldENvbXB1dGVkU3R5bGUoaShhKSxiKX0say5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGoodGhpc3x8d2luZG93KS5nZXRTZWxlY3Rpb24oKX0sZGVsZXRlIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLGRlbGV0ZSB3aW5kb3cuZ2V0U2VsZWN0aW9uLFsiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50Il0uZm9yRWFjaChmdW5jdGlvbihhKXtrLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3ZhciBiPWoodGhpc3x8d2luZG93KTtyZXR1cm4gYlthXS5hcHBseShiLGFyZ3VtZW50cyl9LGRlbGV0ZSB3aW5kb3dbYV19KSxlKGIucHJvdG90eXBlLHtnZXRDb21wdXRlZFN0eWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGcoKSxsLmNhbGwoaCh0aGlzKSxpKGEpLGIpfSxnZXRTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gZygpLG5ldyBkKG0uY2FsbChoKHRoaXMpKSl9fSksZihrLGIpLGEud3JhcHBlcnMuV2luZG93PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEudW53cmFwLGM9d2luZG93LkRhdGFUcmFuc2Zlcnx8d2luZG93LkNsaXBib2FyZCxkPWMucHJvdG90eXBlLnNldERyYWdJbWFnZTtjLnByb3RvdHlwZS5zZXREcmFnSW1hZ2U9ZnVuY3Rpb24oYSxjLGUpe2QuY2FsbCh0aGlzLGIoYSksYyxlKX19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFyIGI9Y1thXSxkPXdpbmRvd1tiXTtpZihkKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpLGY9ZS5jb25zdHJ1Y3Rvcjt3aW5kb3dbYl09Zn19dmFyIGM9KGEuaXNXcmFwcGVyRm9yLHthOiJIVE1MQW5jaG9yRWxlbWVudCIsYXJlYToiSFRNTEFyZWFFbGVtZW50IixhdWRpbzoiSFRNTEF1ZGlvRWxlbWVudCIsYmFzZToiSFRNTEJhc2VFbGVtZW50Iixib2R5OiJIVE1MQm9keUVsZW1lbnQiLGJyOiJIVE1MQlJFbGVtZW50IixidXR0b246IkhUTUxCdXR0b25FbGVtZW50IixjYW52YXM6IkhUTUxDYW52YXNFbGVtZW50IixjYXB0aW9uOiJIVE1MVGFibGVDYXB0aW9uRWxlbWVudCIsY29sOiJIVE1MVGFibGVDb2xFbGVtZW50Iixjb250ZW50OiJIVE1MQ29udGVudEVsZW1lbnQiLGRhdGE6IkhUTUxEYXRhRWxlbWVudCIsZGF0YWxpc3Q6IkhUTUxEYXRhTGlzdEVsZW1lbnQiLGRlbDoiSFRNTE1vZEVsZW1lbnQiLGRpcjoiSFRNTERpcmVjdG9yeUVsZW1lbnQiLGRpdjoiSFRNTERpdkVsZW1lbnQiLGRsOiJIVE1MRExpc3RFbGVtZW50IixlbWJlZDoiSFRNTEVtYmVkRWxlbWVudCIsZmllbGRzZXQ6IkhUTUxGaWVsZFNldEVsZW1lbnQiLGZvbnQ6IkhUTUxGb250RWxlbWVudCIsZm9ybToiSFRNTEZvcm1FbGVtZW50IixmcmFtZToiSFRNTEZyYW1lRWxlbWVudCIsZnJhbWVzZXQ6IkhUTUxGcmFtZVNldEVsZW1lbnQiLGgxOiJIVE1MSGVhZGluZ0VsZW1lbnQiLGhlYWQ6IkhUTUxIZWFkRWxlbWVudCIsaHI6IkhUTUxIUkVsZW1lbnQiLGh0bWw6IkhUTUxIdG1sRWxlbWVudCIsaWZyYW1lOiJIVE1MSUZyYW1lRWxlbWVudCIsaW1nOiJIVE1MSW1hZ2VFbGVtZW50IixpbnB1dDoiSFRNTElucHV0RWxlbWVudCIsa2V5Z2VuOiJIVE1MS2V5Z2VuRWxlbWVudCIsbGFiZWw6IkhUTUxMYWJlbEVsZW1lbnQiLGxlZ2VuZDoiSFRNTExlZ2VuZEVsZW1lbnQiLGxpOiJIVE1MTElFbGVtZW50IixsaW5rOiJIVE1MTGlua0VsZW1lbnQiLG1hcDoiSFRNTE1hcEVsZW1lbnQiLG1hcnF1ZWU6IkhUTUxNYXJxdWVlRWxlbWVudCIsbWVudToiSFRNTE1lbnVFbGVtZW50IixtZW51aXRlbToiSFRNTE1lbnVJdGVtRWxlbWVudCIsbWV0YToiSFRNTE1ldGFFbGVtZW50IixtZXRlcjoiSFRNTE1ldGVyRWxlbWVudCIsb2JqZWN0OiJIVE1MT2JqZWN0RWxlbWVudCIsb2w6IkhUTUxPTGlzdEVsZW1lbnQiLG9wdGdyb3VwOiJIVE1MT3B0R3JvdXBFbGVtZW50IixvcHRpb246IkhUTUxPcHRpb25FbGVtZW50IixvdXRwdXQ6IkhUTUxPdXRwdXRFbGVtZW50IixwOiJIVE1MUGFyYWdyYXBoRWxlbWVudCIscGFyYW06IkhUTUxQYXJhbUVsZW1lbnQiLHByZToiSFRNTFByZUVsZW1lbnQiLHByb2dyZXNzOiJIVE1MUHJvZ3Jlc3NFbGVtZW50IixxOiJIVE1MUXVvdGVFbGVtZW50IixzY3JpcHQ6IkhUTUxTY3JpcHRFbGVtZW50IixzZWxlY3Q6IkhUTUxTZWxlY3RFbGVtZW50IixzaGFkb3c6IkhUTUxTaGFkb3dFbGVtZW50Iixzb3VyY2U6IkhUTUxTb3VyY2VFbGVtZW50IixzcGFuOiJIVE1MU3BhbkVsZW1lbnQiLHN0eWxlOiJIVE1MU3R5bGVFbGVtZW50Iix0YWJsZToiSFRNTFRhYmxlRWxlbWVudCIsdGJvZHk6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0ZW1wbGF0ZToiSFRNTFRlbXBsYXRlRWxlbWVudCIsdGV4dGFyZWE6IkhUTUxUZXh0QXJlYUVsZW1lbnQiLHRoZWFkOiJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsdGltZToiSFRNTFRpbWVFbGVtZW50Iix0aXRsZToiSFRNTFRpdGxlRWxlbWVudCIsdHI6IkhUTUxUYWJsZVJvd0VsZW1lbnQiLHRyYWNrOiJIVE1MVHJhY2tFbGVtZW50Iix1bDoiSFRNTFVMaXN0RWxlbWVudCIsdmlkZW86IkhUTUxWaWRlb0VsZW1lbnQifSk7T2JqZWN0LmtleXMoYykuZm9yRWFjaChiKSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhLndyYXBwZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3dpbmRvd1tiXT1hLndyYXBwZXJzW2JdfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oKXt3aW5kb3cud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQsd2luZG93LnVud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC51bndyYXBJZk5lZWRlZCxPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsIndlYmtpdFNoYWRvd1Jvb3QiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRWxlbWVudC5wcm90b3R5cGUsInNoYWRvd1Jvb3QiKSk7dmFyIGE9RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdDtFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGI9YS5jYWxsKHRoaXMpO3JldHVybiBDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxifSxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3R9KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPSIiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7Yys9YS50ZXh0Q29udGVudCsiXG5cbiJ9KSxifHwoYz1jLnJlcGxhY2UobCwiIikpLGN9ZnVuY3Rpb24gYyhhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3JldHVybiBiLnRleHRDb250ZW50PWEsYn1mdW5jdGlvbiBkKGEpe3ZhciBiPWMoYSk7ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChiKTt2YXIgZD1bXTtpZihiLnNoZWV0KXRyeXtkPWIuc2hlZXQuY3NzUnVsZXN9Y2F0Y2goZSl7fWVsc2UgY29uc29sZS53YXJuKCJzaGVldCBub3QgZm91bmQiLGIpO3JldHVybiBiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksZH1mdW5jdGlvbiBlKCl7di5pbml0aWFsaXplZD0hMCxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHYpO3ZhciBhPXYuY29udGVudERvY3VtZW50LGI9YS5jcmVhdGVFbGVtZW50KCJiYXNlIik7Yi5ocmVmPWRvY3VtZW50LmJhc2VVUkksYS5oZWFkLmFwcGVuZENoaWxkKGIpfWZ1bmN0aW9uIGYoYSl7di5pbml0aWFsaXplZHx8ZSgpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodiksYSh2LmNvbnRlbnREb2N1bWVudCksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh2KX1mdW5jdGlvbiBnKGEsYil7aWYoYil7dmFyIGU7aWYoYS5tYXRjaCgiQGltcG9ydCIpJiZ4KXt2YXIgZz1jKGEpO2YoZnVuY3Rpb24oYSl7YS5oZWFkLmFwcGVuZENoaWxkKGcuaW1wbCksZT1nLnNoZWV0LmNzc1J1bGVzLGIoZSl9KX1lbHNlIGU9ZChhKSxiKGUpfX1mdW5jdGlvbiBoKGEpe2EmJmooKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9ZnVuY3Rpb24gaShhLGIpe3ZhciBkPWMoYSk7ZC5zZXRBdHRyaWJ1dGUoYiwiIiksZC5zZXRBdHRyaWJ1dGUoeiwiIiksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChkKX1mdW5jdGlvbiBqKCl7cmV0dXJuIHd8fCh3PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksdy5zZXRBdHRyaWJ1dGUoeiwiIiksd1t6XT0hMCksd312YXIgaz17c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihhLGMsZCl7dmFyIGU9dGhpcy5wcmVwYXJlUm9vdChhLGMsZCksZj10aGlzLmlzVHlwZUV4dGVuc2lvbihkKSxnPXRoaXMubWFrZVNjb3BlU2VsZWN0b3IoYyxmKSxoPWIoZSwhMCk7aD10aGlzLnNjb3BlQ3NzVGV4dChoLGcpLGEmJihhLnNoaW1tZWRTdHlsZT1oKSx0aGlzLmFkZENzc1RvRG9jdW1lbnQoaCxjKX0sc2hpbVN0eWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc2hpbUNzc1RleHQoYS50ZXh0Q29udGVudCxiKX0sc2hpbUNzc1RleHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT10aGlzLmluc2VydERpcmVjdGl2ZXMoYSksdGhpcy5zY29wZUNzc1RleHQoYSxiKX0sbWFrZVNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9iPyJbaXM9IithKyJdIjphOiIifSxpc1R5cGVFeHRlbnNpb246ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEuaW5kZXhPZigiLSIpPDB9LHByZXBhcmVSb290OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlZ2lzdGVyUm9vdChhLGIsYyk7cmV0dXJuIHRoaXMucmVwbGFjZVRleHRJblN0eWxlcyhkLnJvb3RTdHlsZXMsdGhpcy5pbnNlcnREaXJlY3RpdmVzKSx0aGlzLnJlbW92ZVN0eWxlcyhhLGQucm9vdFN0eWxlcyksdGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYSxiKSxkLnNjb3BlU3R5bGVzfSxyZW1vdmVTdHlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpfSxyZWdpc3RlclJvb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVnaXN0cnlbYl09e3Jvb3Q6YSxuYW1lOmIsZXh0ZW5kc05hbWU6Y30sZT10aGlzLmZpbmRTdHlsZXMoYSk7ZC5yb290U3R5bGVzPWUsZC5zY29wZVN0eWxlcz1kLnJvb3RTdHlsZXM7dmFyIGY9dGhpcy5yZWdpc3RyeVtkLmV4dGVuZHNOYW1lXTtyZXR1cm4gZiYmKGQuc2NvcGVTdHlsZXM9Zi5zY29wZVN0eWxlcy5jb25jYXQoZC5zY29wZVN0eWxlcykpLGR9LGZpbmRTdHlsZXM6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuW107dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYixmdW5jdGlvbihhKXtyZXR1cm4hYS5oYXNBdHRyaWJ1dGUoQSl9KX0sYXBwbHlTY29wZVRvQ29udGVudDpmdW5jdGlvbihhLGIpe2EmJihBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgiKiIpLGZ1bmN0aW9uKGEpe2Euc2V0QXR0cmlidXRlKGIsIiIpfSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIiksZnVuY3Rpb24oYSl7dGhpcy5hcHBseVNjb3BlVG9Db250ZW50KGEuY29udGVudCxiKX0sdGhpcykpfSxpbnNlcnREaXJlY3RpdmVzOmZ1bmN0aW9uKGEpe3JldHVybiBhPXRoaXMuaW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzSW5Dc3NUZXh0KGEpLHRoaXMuaW5zZXJ0UG9seWZpbGxSdWxlc0luQ3NzVGV4dChhKX0saW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzSW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShtLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuc2xpY2UoMCwtMikrInsifSksYS5yZXBsYWNlKG4sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYisiIHsifSl9LGluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKG8sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5zbGljZSgwLC0xKX0pLGEucmVwbGFjZShwLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEucmVwbGFjZShiLCIiKS5yZXBsYWNlKGMsIiIpO3JldHVybiBkK2V9KX0sc2NvcGVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5leHRyYWN0VW5zY29wZWRSdWxlc0Zyb21Dc3NUZXh0KGEpO2lmKGE9dGhpcy5pbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQoYSksYT10aGlzLmNvbnZlcnRDb2xvbkhvc3QoYSksYT10aGlzLmNvbnZlcnRDb2xvbkhvc3RDb250ZXh0KGEpLGE9dGhpcy5jb252ZXJ0Q29tYmluYXRvcnMoYSksYil7dmFyIGEsZD10aGlzO2coYSxmdW5jdGlvbihjKXthPWQuc2NvcGVSdWxlcyhjLGIpfSl9cmV0dXJuIGE9YSsiXG4iK2MsYS50cmltKCl9LGV4dHJhY3RVbnNjb3BlZFJ1bGVzRnJvbUNzc1RleHQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9IiI7Yj1xLmV4ZWMoYSk7KWMrPWJbMV0uc2xpY2UoMCwtMSkrIlxuXG4iO2Zvcig7Yj1yLmV4ZWMoYSk7KWMrPWJbMF0ucmVwbGFjZShiWzJdLCIiKS5yZXBsYWNlKGJbMV0sYlszXSkrIlxuXG4iO3JldHVybiBjfSxjb252ZXJ0Q29sb25Ib3N0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RSZSx0aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvbkhvc3RDb250ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RDb250ZXh0UmUsdGhpcy5jb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyKX0sY29udmVydENvbG9uUnVsZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixkLGUpe2lmKGI9cG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGQpe2Zvcih2YXIgZixnPWQuc3BsaXQoIiwiKSxoPVtdLGk9MCxqPWcubGVuZ3RoO2o+aSYmKGY9Z1tpXSk7aSsrKWY9Zi50cmltKCksaC5wdXNoKGMoYixmLGUpKTtyZXR1cm4gaC5qb2luKCIsIil9cmV0dXJuIGIrZX0pfSxjb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYi5tYXRjaChzKT90aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcihhLGIsYyk6YStiK2MrIiwgIitiKyIgIithK2N9LGNvbG9uSG9zdFBhcnRSZXBsYWNlcjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGErYi5yZXBsYWNlKHMsIiIpK2N9LGNvbnZlcnRDb21iaW5hdG9yczpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGNvbWJpbmF0b3JzUmUubGVuZ3RoO2IrKylhPWEucmVwbGFjZShjb21iaW5hdG9yc1JlW2JdLCIgIik7cmV0dXJuIGF9LHNjb3BlUnVsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz0iIjtyZXR1cm4gYSYmQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2Euc2VsZWN0b3JUZXh0JiZhLnN0eWxlJiZhLnN0eWxlLmNzc1RleHQ/KGMrPXRoaXMuc2NvcGVTZWxlY3RvcihhLnNlbGVjdG9yVGV4dCxiLHRoaXMuc3RyaWN0U3R5bGluZykrIiB7XG4JIixjKz10aGlzLnByb3BlcnRpZXNGcm9tUnVsZShhKSsiXG59XG5cbiIpOmEudHlwZT09PUNTU1J1bGUuTUVESUFfUlVMRT8oYys9IkBtZWRpYSAiK2EubWVkaWEubWVkaWFUZXh0KyIge1xuIixjKz10aGlzLnNjb3BlUnVsZXMoYS5jc3NSdWxlcyxiKSxjKz0iXG59XG5cbiIpOmEuY3NzVGV4dCYmKGMrPWEuY3NzVGV4dCsiXG5cbiIpfSx0aGlzKSxjfSxzY29wZVNlbGVjdG9yOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPWEuc3BsaXQoIiwiKTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhhLGIpJiYoYT1jJiYhYS5tYXRjaChwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IpP3RoaXMuYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlKGEsYik6dGhpcy5hcHBseVNpbXBsZVNlbGVjdG9yU2NvcGUoYSxiKSksZC5wdXNoKGEpfSx0aGlzKSxkLmpvaW4oIiwgIil9LHNlbGVjdG9yTmVlZHNTY29waW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tYWtlU2NvcGVNYXRjaGVyKGIpO3JldHVybiFhLm1hdGNoKGMpfSxtYWtlU2NvcGVNYXRjaGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZSgvXFsvZywiXFxbIikucmVwbGFjZSgvXFsvZywiXFxdIiksbmV3IFJlZ0V4cCgiXigiK2ErIikiK3NlbGVjdG9yUmVTdWZmaXgsIm0iKX0sYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubWF0Y2gocG9seWZpbGxIb3N0UmUpPyhhPWEucmVwbGFjZShwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IsYiksYS5yZXBsYWNlKHBvbHlmaWxsSG9zdFJlLGIrIiAiKSk6YisiICIrYX0sYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7Yj1iLnJlcGxhY2UoL1xbaXM9KFteXF1dKilcXS9nLCIkMSIpO3ZhciBjPVsiICIsIj4iLCIrIiwifiJdLGQ9YSxlPSJbIitiKyJdIjtyZXR1cm4gYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWQuc3BsaXQoYSk7ZD1iLm1hcChmdW5jdGlvbihhKXt2YXIgYj1hLnRyaW0oKS5yZXBsYWNlKHBvbHlmaWxsSG9zdFJlLCIiKTtyZXR1cm4gYiYmYy5pbmRleE9mKGIpPDAmJmIuaW5kZXhPZihlKTwwJiYoYT1iLnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sIiQxIitlKyIkMiQzIikpLGF9KS5qb2luKGEpfSksZH0saW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoY29sb25Ib3N0Q29udGV4dFJlLHQpLnJlcGxhY2UoY29sb25Ib3N0UmUscyl9LHByb3BlcnRpZXNGcm9tUnVsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnN0eWxlLmNzc1RleHQ7YS5zdHlsZS5jb250ZW50JiYhYS5zdHlsZS5jb250ZW50Lm1hdGNoKC9bJyJdK3xhdHRyLykmJihiPWIucmVwbGFjZSgvY29udGVudDpbXjtdKjsvZywiY29udGVudDogJyIrYS5zdHlsZS5jb250ZW50KyInOyIpKTt2YXIgYz1hLnN0eWxlO2Zvcih2YXIgZCBpbiBjKSJpbml0aWFsIj09PWNbZF0mJihiKz1kKyI6IGluaXRpYWw7ICIpO3JldHVybiBifSxyZXBsYWNlVGV4dEluU3R5bGVzOmZ1bmN0aW9uKGEsYil7YSYmYiYmKGEgaW5zdGFuY2VvZiBBcnJheXx8KGE9W2FdKSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD1iLmNhbGwodGhpcyxhLnRleHRDb250ZW50KX0sdGhpcykpfSxhZGRDc3NUb0RvY3VtZW50OmZ1bmN0aW9uKGEsYil7YS5tYXRjaCgiQGltcG9ydCIpP2koYSxiKTpoKGEpfX0sbD0vXC9cKlteKl0qXCorKFteLypdW14qXSpcKispKlwvL2dpbSxtPS9cL1wqXHMqQHBvbHlmaWxsIChbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLykoW157XSo/KXsvZ2ltLG49L3BvbHlmaWxsLW5leHQtc2VsZWN0b3JbXn1dKmNvbnRlbnRcOltcc10qJyhbXiddKiknW159XSp9KFtee10qPyl7L2dpbSxvPS9cL1wqXHNAcG9seWZpbGwtcnVsZShbXipdKlwqKyhbXi8qXVteKl0qXCorKSopXC8vZ2ltLHA9Lyhwb2x5ZmlsbC1ydWxlKVtefV0qKGNvbnRlbnRcOltcc10qJyhbXiddKiknW147XSo7KVtefV0qfS9naW0scT0vXC9cKlxzQHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxyPS8ocG9seWZpbGwtdW5zY29wZWQtcnVsZSlbXn1dKihjb250ZW50XDpbXHNdKicoW14nXSopJ1teO10qOylbXn1dKn0vZ2ltLHM9Ii1zaGFkb3djc3Nob3N0Iix0PSItc2hhZG93Y3NzY29udGV4dCIsdT0iKSg/OlxcKCgoPzpcXChbXikoXSpcXCl8W14pKF0qKSs/KVxcKSk/KFteLHtdKikiO2Nzc0NvbG9uSG9zdFJlPW5ldyBSZWdFeHAoIigiK3MrdSwiZ2ltIiksY3NzQ29sb25Ib3N0Q29udGV4dFJlPW5ldyBSZWdFeHAoIigiK3QrdSwiZ2ltIiksc2VsZWN0b3JSZVN1ZmZpeD0iKFs+XFxzfitbLix7Ol1bXFxzXFxTXSopPyQiLGNvbG9uSG9zdFJlPS9cOmhvc3QvZ2ltLGNvbG9uSG9zdENvbnRleHRSZT0vXDpob3N0LWNvbnRleHQvZ2ltLHBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcj1zKyItbm8tY29tYmluYXRvciIscG9seWZpbGxIb3N0UmU9bmV3IFJlZ0V4cChzLCJnaW0iKSxwb2x5ZmlsbEhvc3RDb250ZXh0UmU9bmV3IFJlZ0V4cCh0LCJnaW0iKSxjb21iaW5hdG9yc1JlPVsvXF5cXi9nLC9cXi9nLC9cL3NoYWRvd1wvL2csL1wvc2hhZG93LWRlZXBcLy9nLC86OnNoYWRvdy9nLC9cL2RlZXBcLy9nXTt2YXIgdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTt2LnN0eWxlLmRpc3BsYXk9Im5vbmUiO3ZhciB3LHg9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgiQ2hyb21lIikseT0ic2hpbS1zaGFkb3dkb20iLHo9InNoaW0tc2hhZG93ZG9tLWNzcyIsQT0ibm8tc2hpbSI7aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXtoKCJzdHlsZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxuIik7dmFyIEI9d3JhcChkb2N1bWVudCksQz1CLnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtDLmluc2VydEJlZm9yZShqKCksQy5jaGlsZE5vZGVzWzBdKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe3ZhciBiPWEudXJsUmVzb2x2ZXI7aWYod2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMudXNlTmF0aXZlKXt2YXIgYz0ibGlua1tyZWw9c3R5bGVzaGVldF1bIit5KyJdIixkPSJzdHlsZVsiK3krIl0iO0hUTUxJbXBvcnRzLmltcG9ydGVyLmRvY3VtZW50UHJlbG9hZFNlbGVjdG9ycys9IiwiK2MsSFRNTEltcG9ydHMuaW1wb3J0ZXIuaW1wb3J0c1ByZWxvYWRTZWxlY3RvcnMrPSIsIitjLEhUTUxJbXBvcnRzLnBhcnNlci5kb2N1bWVudFNlbGVjdG9ycz1bSFRNTEltcG9ydHMucGFyc2VyLmRvY3VtZW50U2VsZWN0b3JzLGMsZF0uam9pbigiLCIpO3ZhciBlPUhUTUxJbXBvcnRzLnBhcnNlci5wYXJzZUdlbmVyaWM7SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlR2VuZXJpYz1mdW5jdGlvbihhKXtpZighYVt6XSl7dmFyIGM9YS5fX2ltcG9ydEVsZW1lbnR8fGE7aWYoIWMuaGFzQXR0cmlidXRlKHkpKXJldHVybiB2b2lkIGUuY2FsbCh0aGlzLGEpO2EuX19yZXNvdXJjZT8oYz1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSxjLnRleHRDb250ZW50PWIucmVzb2x2ZUNzc1RleHQoYS5fX3Jlc291cmNlLGEuaHJlZikpOmIucmVzb2x2ZVN0eWxlKGMpLGMudGV4dENvbnRlbnQ9ay5zaGltU3R5bGUoYyksYy5yZW1vdmVBdHRyaWJ1dGUoeSwiIiksYy5zZXRBdHRyaWJ1dGUoeiwiIiksY1t6XT0hMCxjLnBhcmVudE5vZGUhPT1DJiYoYS5wYXJlbnROb2RlPT09Qz9DLnJlcGxhY2VDaGlsZChjLGEpOkMuYXBwZW5kQ2hpbGQoYykpLGMuX19pbXBvcnRQYXJzZWQ9ITAsdGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGEpfX07dmFyIGY9SFRNTEltcG9ydHMucGFyc2VyLmhhc1Jlc291cmNlO0hUTUxJbXBvcnRzLnBhcnNlci5oYXNSZXNvdXJjZT1mdW5jdGlvbihhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmInN0eWxlc2hlZXQiPT09YS5yZWwmJmEuaGFzQXR0cmlidXRlKHkpP2EuX19yZXNvdXJjZTpmLmNhbGwodGhpcyxhKX19fSl9YS5TaGFkb3dDU1M9a30od2luZG93LlBsYXRmb3JtKSk6IWZ1bmN0aW9uKCl7d2luZG93LnRlbXBsYXRlQ29udGVudD13aW5kb3cudGVtcGxhdGVDb250ZW50fHxmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50fSx3aW5kb3cud3JhcD13aW5kb3cudW53cmFwPWZ1bmN0aW9uKGEpe3JldHVybiBhfSxhZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe2lmKEN1c3RvbUVsZW1lbnRzLnVzZU5hdGl2ZT09PSExKXt2YXIgYT1FbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290O0VsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q9ZnVuY3Rpb24oKXt2YXIgYj1hLmNhbGwodGhpcyk7cmV0dXJuIEN1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93KHRoaXMpLGJ9fX0pLHdpbmRvdy50ZW1wbGF0ZUNvbnRlbnQ9ZnVuY3Rpb24oYSl7aWYod2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChhKSwhYS5jb250ZW50JiYhYS5fY29udGVudCl7Zm9yKHZhciBiPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTthLmZpcnN0Q2hpbGQ7KWIuYXBwZW5kQ2hpbGQoYS5maXJzdENoaWxkKTthLl9jb250ZW50PWJ9cmV0dXJuIGEuY29udGVudHx8YS5fY29udGVudH19KCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIHZvaWQgMCE9PW1bYV19ZnVuY3Rpb24gYygpe2guY2FsbCh0aGlzKSx0aGlzLl9pc0ludmFsaWQ9ITB9ZnVuY3Rpb24gZChhKXtyZXR1cm4iIj09YSYmYy5jYWxsKHRoaXMpLGEudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gYj4zMiYmMTI3PmImJi0xPT1bMzQsMzUsNjAsNjIsNjMsOTZdLmluZGV4T2YoYik/YTplbmNvZGVVUklDb21wb25lbnQoYSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGI+MzImJjEyNz5iJiYtMT09WzM0LDM1LDYwLDYyLDk2XS5pbmRleE9mKGIpP2E6ZW5jb2RlVVJJQ29tcG9uZW50KGEpfWZ1bmN0aW9uIGcoYSxnLGgpe2Z1bmN0aW9uIGkoYSl7dC5wdXNoKGEpfXZhciBqPWd8fCJzY2hlbWUgc3RhcnQiLGs9MCxsPSIiLHI9ITEscz0hMSx0PVtdO2E6Zm9yKDsoYVtrLTFdIT1vfHwwPT1rKSYmIXRoaXMuX2lzSW52YWxpZDspe3ZhciB1PWFba107c3dpdGNoKGope2Nhc2Uic2NoZW1lIHN0YXJ0IjppZighdXx8IXAudGVzdCh1KSl7aWYoZyl7aSgiSW52YWxpZCBzY2hlbWUuIik7YnJlYWsgYX1sPSIiLGo9Im5vIHNjaGVtZSI7Y29udGludWV9bCs9dS50b0xvd2VyQ2FzZSgpLGo9InNjaGVtZSI7YnJlYWs7Y2FzZSJzY2hlbWUiOmlmKHUmJnEudGVzdCh1KSlsKz11LnRvTG93ZXJDYXNlKCk7ZWxzZXtpZigiOiIhPXUpe2lmKGcpe2lmKG89PXUpYnJlYWsgYTtpKCJDb2RlIHBvaW50IG5vdCBhbGxvd2VkIGluIHNjaGVtZTogIit1KTticmVhayBhfWw9IiIsaz0wLGo9Im5vIHNjaGVtZSI7Y29udGludWV9aWYodGhpcy5fc2NoZW1lPWwsbD0iIixnKWJyZWFrIGE7Yih0aGlzLl9zY2hlbWUpJiYodGhpcy5faXNSZWxhdGl2ZT0hMCksaj0iZmlsZSI9PXRoaXMuX3NjaGVtZT8icmVsYXRpdmUiOnRoaXMuX2lzUmVsYXRpdmUmJmgmJmguX3NjaGVtZT09dGhpcy5fc2NoZW1lPyJyZWxhdGl2ZSBvciBhdXRob3JpdHkiOnRoaXMuX2lzUmVsYXRpdmU/ImF1dGhvcml0eSBmaXJzdCBzbGFzaCI6InNjaGVtZSBkYXRhIn1icmVhaztjYXNlInNjaGVtZSBkYXRhIjoiPyI9PXU/KHF1ZXJ5PSI/IixqPSJxdWVyeSIpOiIjIj09dT8odGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iik6byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fc2NoZW1lRGF0YSs9ZSh1KSk7YnJlYWs7Y2FzZSJubyBzY2hlbWUiOmlmKGgmJmIoaC5fc2NoZW1lKSl7aj0icmVsYXRpdmUiO2NvbnRpbnVlfWkoIk1pc3Npbmcgc2NoZW1lLiIpLGMuY2FsbCh0aGlzKTticmVhaztjYXNlInJlbGF0aXZlIG9yIGF1dGhvcml0eSI6aWYoIi8iIT11fHwiLyIhPWFbaysxXSl7aSgiRXhwZWN0ZWQgLywgZ290OiAiK3UpLGo9InJlbGF0aXZlIjtjb250aW51ZX1qPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2JyZWFrO2Nhc2UicmVsYXRpdmUiOmlmKHRoaXMuX2lzUmVsYXRpdmU9ITAsImZpbGUiIT10aGlzLl9zY2hlbWUmJih0aGlzLl9zY2hlbWU9aC5fc2NoZW1lKSxvPT11KXt0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PWguX3F1ZXJ5O2JyZWFrIGF9aWYoIi8iPT11fHwiXFwiPT11KSJcXCI9PXUmJmkoIlxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC4iKSxqPSJyZWxhdGl2ZSBzbGFzaCI7ZWxzZSBpZigiPyI9PXUpdGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT0iPyIsaj0icXVlcnkiO2Vsc2V7aWYoIiMiIT11KXt2YXIgdj1hW2srMV0sdz1hW2srMl07KCJmaWxlIiE9dGhpcy5fc2NoZW1lfHwhcC50ZXN0KHUpfHwiOiIhPXYmJiJ8IiE9dnx8byE9dyYmIi8iIT13JiYiXFwiIT13JiYiPyIhPXcmJiIjIiE9dykmJih0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3BhdGgucG9wKCkpLGo9InJlbGF0aXZlIHBhdGgiO2NvbnRpbnVlfXRoaXMuX2hvc3Q9aC5faG9zdCx0aGlzLl9wb3J0PWguX3BvcnQsdGhpcy5fcGF0aD1oLl9wYXRoLnNsaWNlKCksdGhpcy5fcXVlcnk9aC5fcXVlcnksdGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50In1icmVhaztjYXNlInJlbGF0aXZlIHNsYXNoIjppZigiLyIhPXUmJiJcXCIhPXUpeyJmaWxlIiE9dGhpcy5fc2NoZW1lJiYodGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCksaj0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9IlxcIj09dSYmaSgiXFwgaXMgYW4gaW52YWxpZCBjb2RlIHBvaW50LiIpLGo9ImZpbGUiPT10aGlzLl9zY2hlbWU/ImZpbGUgaG9zdCI6ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI7YnJlYWs7Y2FzZSJhdXRob3JpdHkgZmlyc3Qgc2xhc2giOmlmKCIvIiE9dSl7aSgiRXhwZWN0ZWQgJy8nLCBnb3Q6ICIrdSksaj0iYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjtjb250aW51ZX1qPSJhdXRob3JpdHkgc2Vjb25kIHNsYXNoIjticmVhaztjYXNlImF1dGhvcml0eSBzZWNvbmQgc2xhc2giOmlmKGo9ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyIsIi8iIT11KXtpKCJFeHBlY3RlZCAnLycsIGdvdDogIit1KTtjb250aW51ZX1icmVhaztjYXNlImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI6aWYoIi8iIT11JiYiXFwiIT11KXtqPSJhdXRob3JpdHkiO2NvbnRpbnVlfWkoIkV4cGVjdGVkIGF1dGhvcml0eSwgZ290OiAiK3UpO2JyZWFrO2Nhc2UiYXV0aG9yaXR5IjppZigiQCI9PXUpe3ImJihpKCJAIGFscmVhZHkgc2Vlbi4iKSxsKz0iJTQwIikscj0hMDtmb3IodmFyIHg9MDt4PGwubGVuZ3RoO3grKyl7dmFyIHk9bFt4XTtpZigiCSIhPXkmJiJcbiIhPXkmJiJcciIhPXkpaWYoIjoiIT15fHxudWxsIT09dGhpcy5fcGFzc3dvcmQpe3ZhciB6PWUoeSk7bnVsbCE9PXRoaXMuX3Bhc3N3b3JkP3RoaXMuX3Bhc3N3b3JkKz16OnRoaXMuX3VzZXJuYW1lKz16fWVsc2UgdGhpcy5fcGFzc3dvcmQ9IiI7ZWxzZSBpKCJJbnZhbGlkIHdoaXRlc3BhY2UgaW4gYXV0aG9yaXR5LiIpfWw9IiJ9ZWxzZXtpZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11KXtrLT1sLmxlbmd0aCxsPSIiLGo9Imhvc3QiO2NvbnRpbnVlfWwrPXV9YnJlYWs7Y2FzZSJmaWxlIGhvc3QiOmlmKG89PXV8fCIvIj09dXx8IlxcIj09dXx8Ij8iPT11fHwiIyI9PXUpezIhPWwubGVuZ3RofHwhcC50ZXN0KGxbMF0pfHwiOiIhPWxbMV0mJiJ8IiE9bFsxXT8wPT1sLmxlbmd0aD9qPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0IjoodGhpcy5faG9zdD1kLmNhbGwodGhpcyxsKSxsPSIiLGo9InJlbGF0aXZlIHBhdGggc3RhcnQiKTpqPSJyZWxhdGl2ZSBwYXRoIjtjb250aW51ZX0iCSI9PXV8fCJcbiI9PXV8fCJcciI9PXU/aSgiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGZpbGUgaG9zdC4iKTpsKz11O2JyZWFrO2Nhc2UiaG9zdCI6Y2FzZSJob3N0bmFtZSI6aWYoIjoiIT11fHxzKXtpZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11KXtpZih0aGlzLl9ob3N0PWQuY2FsbCh0aGlzLGwpLGw9IiIsaj0icmVsYXRpdmUgcGF0aCBzdGFydCIsZylicmVhayBhO2NvbnRpbnVlfSIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dT8oIlsiPT11P3M9ITA6Il0iPT11JiYocz0hMSksbCs9dSk6aSgiSW52YWxpZCBjb2RlIHBvaW50IGluIGhvc3QvaG9zdG5hbWU6ICIrdSl9ZWxzZSBpZih0aGlzLl9ob3N0PWQuY2FsbCh0aGlzLGwpLGw9IiIsaj0icG9ydCIsImhvc3RuYW1lIj09ZylicmVhayBhO2JyZWFrO2Nhc2UicG9ydCI6aWYoL1swLTldLy50ZXN0KHUpKWwrPXU7ZWxzZXtpZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11fHxnKXtpZigiIiE9bCl7dmFyIEE9cGFyc2VJbnQobCwxMCk7QSE9bVt0aGlzLl9zY2hlbWVdJiYodGhpcy5fcG9ydD1BKyIiKSxsPSIifWlmKGcpYnJlYWsgYTtqPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0Ijtjb250aW51ZX0iCSI9PXV8fCJcbiI9PXV8fCJcciI9PXU/aSgiSW52YWxpZCBjb2RlIHBvaW50IGluIHBvcnQ6ICIrdSk6Yy5jYWxsKHRoaXMpfWJyZWFrO2Nhc2UicmVsYXRpdmUgcGF0aCBzdGFydCI6aWYoIlxcIj09dSYmaSgiJ1xcJyBub3QgYWxsb3dlZCBpbiBwYXRoLiIpLGo9InJlbGF0aXZlIHBhdGgiLCIvIiE9dSYmIlxcIiE9dSljb250aW51ZTticmVhaztjYXNlInJlbGF0aXZlIHBhdGgiOmlmKG8hPXUmJiIvIiE9dSYmIlxcIiE9dSYmKGd8fCI/IiE9dSYmIiMiIT11KSkiCSIhPXUmJiJcbiIhPXUmJiJcciIhPXUmJihsKz1lKHUpKTtlbHNleyJcXCI9PXUmJmkoIlxcIG5vdCBhbGxvd2VkIGluIHJlbGF0aXZlIHBhdGguIik7dmFyIEI7KEI9bltsLnRvTG93ZXJDYXNlKCldKSYmKGw9QiksIi4uIj09bD8odGhpcy5fcGF0aC5wb3AoKSwiLyIhPXUmJiJcXCIhPXUmJnRoaXMuX3BhdGgucHVzaCgiIikpOiIuIj09bCYmIi8iIT11JiYiXFwiIT11P3RoaXMuX3BhdGgucHVzaCgiIik6Ii4iIT1sJiYoImZpbGUiPT10aGlzLl9zY2hlbWUmJjA9PXRoaXMuX3BhdGgubGVuZ3RoJiYyPT1sLmxlbmd0aCYmcC50ZXN0KGxbMF0pJiYifCI9PWxbMV0mJihsPWxbMF0rIjoiKSx0aGlzLl9wYXRoLnB1c2gobCkpLGw9IiIsIj8iPT11Pyh0aGlzLl9xdWVyeT0iPyIsaj0icXVlcnkiKToiIyI9PXUmJih0aGlzLl9mcmFnbWVudD0iIyIsaj0iZnJhZ21lbnQiKX1icmVhaztjYXNlInF1ZXJ5IjpnfHwiIyIhPXU/byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fcXVlcnkrPWYodSkpOih0aGlzLl9mcmFnbWVudD0iIyIsaj0iZnJhZ21lbnQiKTticmVhaztjYXNlImZyYWdtZW50IjpvIT11JiYiCSIhPXUmJiJcbiIhPXUmJiJcciIhPXUmJih0aGlzLl9mcmFnbWVudCs9dSl9aysrfX1mdW5jdGlvbiBoKCl7dGhpcy5fc2NoZW1lPSIiLHRoaXMuX3NjaGVtZURhdGE9IiIsdGhpcy5fdXNlcm5hbWU9IiIsdGhpcy5fcGFzc3dvcmQ9bnVsbCx0aGlzLl9ob3N0PSIiLHRoaXMuX3BvcnQ9IiIsdGhpcy5fcGF0aD1bXSx0aGlzLl9xdWVyeT0iIix0aGlzLl9mcmFnbWVudD0iIix0aGlzLl9pc0ludmFsaWQ9ITEsdGhpcy5faXNSZWxhdGl2ZT0hMX1mdW5jdGlvbiBpKGEsYil7dm9pZCAwPT09Ynx8YiBpbnN0YW5jZW9mIGl8fChiPW5ldyBpKFN0cmluZyhiKSkpLHRoaXMuX3VybD1hLGguY2FsbCh0aGlzKTt2YXIgYz1hLnJlcGxhY2UoL15bIFx0XHJcblxmXSt8WyBcdFxyXG5cZl0rJC9nLCIiKTtnLmNhbGwodGhpcyxjLG51bGwsYil9dmFyIGo9ITE7aWYoIWEuZm9yY2VKVVJMKXRyeXt2YXIgaz1uZXcgVVJMKCJiIiwiaHR0cDovL2EiKTtqPSJodHRwOi8vYS9iIj09PWsuaHJlZn1jYXRjaChsKXt9aWYoIWope3ZhciBtPU9iamVjdC5jcmVhdGUobnVsbCk7bS5mdHA9MjEsbS5maWxlPTAsbS5nb3BoZXI9NzAsbS5odHRwPTgwLG0uaHR0cHM9NDQzLG0ud3M9ODAsbS53c3M9NDQzO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7blsiJTJlIl09Ii4iLG5bIi4lMmUiXT0iLi4iLG5bIiUyZS4iXT0iLi4iLG5bIiUyZSUyZSJdPSIuLiI7dmFyIG89dm9pZCAwLHA9L1thLXpBLVpdLyxxPS9bYS16QS1aMC05XCtcLVwuXS87aS5wcm90b3R5cGU9e2dldCBocmVmKCl7aWYodGhpcy5faXNJbnZhbGlkKXJldHVybiB0aGlzLl91cmw7dmFyIGE9IiI7cmV0dXJuKCIiIT10aGlzLl91c2VybmFtZXx8bnVsbCE9dGhpcy5fcGFzc3dvcmQpJiYoYT10aGlzLl91c2VybmFtZSsobnVsbCE9dGhpcy5fcGFzc3dvcmQ/IjoiK3RoaXMuX3Bhc3N3b3JkOiIiKSsiQCIpLHRoaXMucHJvdG9jb2wrKHRoaXMuX2lzUmVsYXRpdmU/Ii8vIithK3RoaXMuaG9zdDoiIikrdGhpcy5wYXRobmFtZSt0aGlzLl9xdWVyeSt0aGlzLl9mcmFnbWVudH0sc2V0IGhyZWYoYSl7aC5jYWxsKHRoaXMpLGcuY2FsbCh0aGlzLGEpfSxnZXQgcHJvdG9jb2woKXtyZXR1cm4gdGhpcy5fc2NoZW1lKyI6In0sc2V0IHByb3RvY29sKGEpe3RoaXMuX2lzSW52YWxpZHx8Zy5jYWxsKHRoaXMsYSsiOiIsInNjaGVtZSBzdGFydCIpfSxnZXQgaG9zdCgpe3JldHVybiB0aGlzLl9pc0ludmFsaWQ/IiI6dGhpcy5fcG9ydD90aGlzLl9ob3N0KyI6Iit0aGlzLl9wb3J0OnRoaXMuX2hvc3R9LHNldCBob3N0KGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJmcuY2FsbCh0aGlzLGEsImhvc3QiKX0sZ2V0IGhvc3RuYW1lKCl7cmV0dXJuIHRoaXMuX2hvc3R9LHNldCBob3N0bmFtZShhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZnLmNhbGwodGhpcyxhLCJob3N0bmFtZSIpfSxnZXQgcG9ydCgpe3JldHVybiB0aGlzLl9wb3J0fSxzZXQgcG9ydChhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZnLmNhbGwodGhpcyxhLCJwb3J0Iil9LGdldCBwYXRobmFtZSgpe3JldHVybiB0aGlzLl9pc0ludmFsaWQ/IiI6dGhpcy5faXNSZWxhdGl2ZT8iLyIrdGhpcy5fcGF0aC5qb2luKCIvIik6dGhpcy5fc2NoZW1lRGF0YX0sc2V0IHBhdGhuYW1lKGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJih0aGlzLl9wYXRoPVtdLGcuY2FsbCh0aGlzLGEsInJlbGF0aXZlIHBhdGggc3RhcnQiKSkKfSxnZXQgc2VhcmNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX3F1ZXJ5fHwiPyI9PXRoaXMuX3F1ZXJ5PyIiOnRoaXMuX3F1ZXJ5fSxzZXQgc2VhcmNoKGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJih0aGlzLl9xdWVyeT0iPyIsIj8iPT1hWzBdJiYoYT1hLnNsaWNlKDEpKSxnLmNhbGwodGhpcyxhLCJxdWVyeSIpKX0sZ2V0IGhhc2goKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkfHwhdGhpcy5fZnJhZ21lbnR8fCIjIj09dGhpcy5fZnJhZ21lbnQ/IiI6dGhpcy5fZnJhZ21lbnR9LHNldCBoYXNoKGEpe3RoaXMuX2lzSW52YWxpZHx8KHRoaXMuX2ZyYWdtZW50PSIjIiwiIyI9PWFbMF0mJihhPWEuc2xpY2UoMSkpLGcuY2FsbCh0aGlzLGEsImZyYWdtZW50IikpfX0sYS5VUkw9aX19KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9YXx8e30sZD0xO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspe3ZhciBlPWFyZ3VtZW50c1tkXTt0cnl7Zm9yKHZhciBmIGluIGUpYyhmLGUsYil9Y2F0Y2goZyl7fX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEsYixjKXt2YXIgZT1kKGIsYSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSxlKX1mdW5jdGlvbiBkKGEsYil7aWYoYSl7dmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpO3JldHVybiBjfHxkKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxiKX19RnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fChGdW5jdGlvbi5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtyZXR1cm4gZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKSxiLmFwcGx5KGEsZCl9fSksYS5taXhpbj1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixjKXt2YXIgZD0ic3RyaW5nIj09dHlwZW9mIGE/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKTphLmNsb25lTm9kZSghMCk7aWYoZC5pbm5lckhUTUw9YixjKWZvcih2YXIgZSBpbiBjKWQuc2V0QXR0cmlidXRlKGUsY1tlXSk7cmV0dXJuIGR9dmFyIGM9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQsZD1ET01Ub2tlbkxpc3QucHJvdG90eXBlLnJlbW92ZTtET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspYy5jYWxsKHRoaXMsYXJndW1lbnRzW2FdKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWQuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGEsYil7MT09YXJndW1lbnRzLmxlbmd0aCYmKGI9IXRoaXMuY29udGFpbnMoYSkpLGI/dGhpcy5hZGQoYSk6dGhpcy5yZW1vdmUoYSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUuc3dpdGNoPWZ1bmN0aW9uKGEsYil7YSYmdGhpcy5yZW1vdmUoYSksYiYmdGhpcy5hZGQoYil9O3ZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMpfSxmPXdpbmRvdy5OYW1lZE5vZGVNYXB8fHdpbmRvdy5Nb3pOYW1lZEF0dHJNYXB8fHt9O2lmKE5vZGVMaXN0LnByb3RvdHlwZS5hcnJheT1lLGYucHJvdG90eXBlLmFycmF5PWUsSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmFycmF5PWUsIXdpbmRvdy5wZXJmb3JtYW5jZSl7dmFyIGc9RGF0ZS5ub3coKTt3aW5kb3cucGVyZm9ybWFuY2U9e25vdzpmdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLWd9fX13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7cmV0dXJuIGE/ZnVuY3Rpb24oYil7cmV0dXJuIGEoZnVuY3Rpb24oKXtiKHBlcmZvcm1hbmNlLm5vdygpKX0pfTpmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9fSgpKTt2YXIgaD1bXSxpPWZ1bmN0aW9uKCl7aC5wdXNoKGFyZ3VtZW50cyl9O3dpbmRvdy5Qb2x5bWVyPWksYS5kZWxpdmVyRGVjbGFyYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIGEuZGVsaXZlckRlY2xhcmF0aW9ucz1mdW5jdGlvbigpe3Rocm93IlBvc3NpYmxlIGF0dGVtcHQgdG8gbG9hZCBQb2x5bWVyIHR3aWNlIn0saH0sd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7d2luZG93LlBvbHltZXI9PT1pJiYod2luZG93LlBvbHltZXI9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdZb3UgdHJpZWQgdG8gdXNlIHBvbHltZXIgd2l0aG91dCBsb2FkaW5nIGl0IGZpcnN0LiBUbyBsb2FkIHBvbHltZXIsIDxsaW5rIHJlbD0iaW1wb3J0IiBocmVmPSJjb21wb25lbnRzL3BvbHltZXIvcG9seW1lci5odG1sIj4nKX0pfSksYS5jcmVhdGVET009Yn0od2luZG93LlBsYXRmb3JtKSx3aW5kb3cudGVtcGxhdGVDb250ZW50PXdpbmRvdy50ZW1wbGF0ZUNvbnRlbnR8fGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnR9LGZ1bmN0aW9uKGEpe2E9YXx8KHdpbmRvdy5JbnNwZWN0b3I9e30pO3ZhciBiO3dpbmRvdy5zaW5zcGVjdD1mdW5jdGlvbihhLGQpe2J8fChiPXdpbmRvdy5vcGVuKCIiLCJTaGFkb3dET00gSW5zcGVjdG9yIixudWxsLCEwKSxiLmRvY3VtZW50LndyaXRlKGMpLGIuYXBpPXtzaGFkb3dpemU6c2hhZG93aXplfSksZihhfHx3cmFwKGRvY3VtZW50LmJvZHkpLGQpfTt2YXIgYz1bIjwhRE9DVFlQRSBodG1sPiIsIjxodG1sPiIsIiAgPGhlYWQ+IiwiICAgIDx0aXRsZT5TaGFkb3dET00gSW5zcGVjdG9yPC90aXRsZT4iLCIgICAgPHN0eWxlPiIsIiAgICAgIGJvZHkgeyIsIiAgICAgIH0iLCIgICAgICBwcmUgeyIsJyAgICAgICAgZm9udDogOXB0ICJDb3VyaWVyIE5ldyIsIG1vbm9zcGFjZTsnLCIgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjVlbTsiLCIgICAgICB9IiwiICAgICAgdGFnIHsiLCIgICAgICAgIGNvbG9yOiBwdXJwbGU7IiwiICAgICAgfSIsIiAgICAgIHVsIHsiLCIgICAgICAgICBtYXJnaW46IDA7IiwiICAgICAgICAgcGFkZGluZzogMDsiLCIgICAgICAgICBsaXN0LXN0eWxlOiBub25lOyIsIiAgICAgIH0iLCIgICAgICBsaSB7IiwiICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOyIsIiAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMWYxZjE7IiwiICAgICAgICAgcGFkZGluZzogNHB4IDZweDsiLCIgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7IiwiICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7IiwiICAgICAgfSIsIiAgICA8L3N0eWxlPiIsIiAgPC9oZWFkPiIsIiAgPGJvZHk+IiwnICAgIDx1bCBpZD0iY3J1bWJzIj4nLCIgICAgPC91bD4iLCcgICAgPGRpdiBpZD0idHJlZSI+PC9kaXY+JywiICA8L2JvZHk+IiwiPC9odG1sPiJdLmpvaW4oIlxuIiksZD1bXSxlPWZ1bmN0aW9uKCl7dmFyIGE9Yi5kb2N1bWVudCxjPWEucXVlcnlTZWxlY3RvcigiI2NydW1icyIpO2MudGV4dENvbnRlbnQ9IiI7Zm9yKHZhciBlLGc9MDtlPWRbZ107ZysrKXt2YXIgaD1hLmNyZWF0ZUVsZW1lbnQoImEiKTtoLmhyZWY9IiMiLGgudGV4dENvbnRlbnQ9ZS5sb2NhbE5hbWUsaC5pZHg9ZyxoLm9uY2xpY2s9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiO2QubGVuZ3RoPnRoaXMuaWR4OyliPWQucG9wKCk7ZihiLnNoYWRvd3x8YixiKSxhLnByZXZlbnREZWZhdWx0KCl9LGMuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KCJsaSIpKS5hcHBlbmRDaGlsZChoKX19LGY9ZnVuY3Rpb24oYSxjKXt2YXIgZj1iLmRvY3VtZW50O2s9W107dmFyIGc9Y3x8YTtkLnB1c2goZyksZSgpLGYuYm9keS5xdWVyeVNlbGVjdG9yKCIjdHJlZSIpLmlubmVySFRNTD0iPHByZT4iK2ooYSxhLmNoaWxkTm9kZXMpKyI8L3ByZT4ifSxnPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCksaD17U1RZTEU6MSxTQ1JJUFQ6MSwiI2NvbW1lbnQiOjEsVEVNUExBVEU6MX0saT1mdW5jdGlvbihhKXtyZXR1cm4gaFthLm5vZGVOYW1lXX0saj1mdW5jdGlvbihhLGIsYyl7aWYoaShhKSlyZXR1cm4iIjt2YXIgZD1jfHwiIjtpZihhLmxvY2FsTmFtZXx8MTE9PWEubm9kZVR5cGUpe3ZhciBlPWEubG9jYWxOYW1lfHwic2hhZG93LXJvb3QiLGY9ZCtsKGEpOyJjb250ZW50Ij09ZSYmKGI9YS5nZXREaXN0cmlidXRlZE5vZGVzKCkpLGYrPSI8YnIvPiI7dmFyIGg9ZCsiJm5ic3A7Jm5ic3A7IjtnKGIsZnVuY3Rpb24oYSl7Zis9aihhLGEuY2hpbGROb2RlcyxoKX0pLGYrPWQse2JyOjF9W2VdfHwoZis9Ijx0YWc+Jmx0Oy8iK2UrIiZndDs8L3RhZz4iLGYrPSI8YnIvPiIpfWVsc2V7dmFyIGs9YS50ZXh0Q29udGVudC50cmltKCk7Zj1rP2QrJyInK2srJyI8YnIvPic6IiJ9cmV0dXJuIGZ9LGs9W10sbD1mdW5jdGlvbihhKXt2YXIgYj0iPHRhZz4mbHQ7IixjPWEubG9jYWxOYW1lfHwic2hhZG93LXJvb3QiO3JldHVybiBhLndlYmtpdFNoYWRvd1Jvb3R8fGEuc2hhZG93Um9vdD8oYis9JyA8YnV0dG9uIGlkeD0iJytrLmxlbmd0aCsnIiBvbmNsaWNrPSJhcGkuc2hhZG93aXplLmNhbGwodGhpcykiPicrYysiPC9idXR0b24+IixrLnB1c2goYSkpOmIrPWN8fCJzaGFkb3ctcm9vdCIsYS5hdHRyaWJ1dGVzJiZnKGEuYXR0cmlidXRlcyxmdW5jdGlvbihhKXtiKz0iICIrYS5uYW1lKyhhLnZhbHVlPyc9IicrYS52YWx1ZSsnIic6IiIpfSksYis9IiZndDs8L3RhZz4ifTtzaGFkb3dpemU9ZnVuY3Rpb24oKXt2YXIgYT1OdW1iZXIodGhpcy5hdHRyaWJ1dGVzLmlkeC52YWx1ZSksYj1rW2FdO2I/ZihiLndlYmtpdFNoYWRvd1Jvb3R8fGIuc2hhZG93Um9vdCxiKTooY29uc29sZS5sb2coImJhZCBzaGFkb3dpemUgbm9kZSIpLGNvbnNvbGUuZGlyKHRoaXMpKX0sYS5vdXRwdXQ9an0od2luZG93Lkluc3BlY3RvciksZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2EudGV4dENvbnRlbnQ9ImJvZHkge3RyYW5zaXRpb246IG9wYWNpdHkgZWFzZS1pbiAwLjJzOyB9IFxuYm9keVt1bnJlc29sdmVkXSB7b3BhY2l0eTogMDsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47IH0gXG4iO3ZhciBiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7cmV0dXJuIGI9Ynx8W10sYi5tYXB8fChiPVtiXSksYS5hcHBseSh0aGlzLGIubWFwKGQpKX1mdW5jdGlvbiBjKGEsYyxkKXt2YXIgZTtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybjtjYXNlIDE6ZT1udWxsO2JyZWFrO2Nhc2UgMjplPWMuYXBwbHkodGhpcyk7YnJlYWs7ZGVmYXVsdDplPWIoZCxjKX1mW2FdPWV9ZnVuY3Rpb24gZChhKXtyZXR1cm4gZlthXX1mdW5jdGlvbiBlKGEsYyl7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe2IoYyxhKX0pfXZhciBmPXt9O2EubWFyc2hhbD1kLGEubW9kdWxlPWMsYS51c2luZz1lfSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zi50ZXh0Q29udGVudD1kKyssZS5wdXNoKGEpfWZ1bmN0aW9uIGMoKXtmb3IoO2UubGVuZ3RoOyllLnNoaWZ0KCkoKX12YXIgZD0wLGU9W10sZj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3KHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHxKc011dGF0aW9uT2JzZXJ2ZXIpKGMpLm9ic2VydmUoZix7Y2hhcmFjdGVyRGF0YTohMH0pLGEuZW5kT2ZNaWNyb3Rhc2s9Yn0oUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGQpe3JldHVybiBhLnJlcGxhY2UoZCxmdW5jdGlvbihhLGQsZSxmKXt2YXIgZz1lLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGc9YyhiLGcpLGQrIiciK2crIiciK2Z9KX1mdW5jdGlvbiBjKGEsYil7dmFyIGM9bmV3IFVSTChiLGEpO3JldHVybiBkKGMuaHJlZil9ZnVuY3Rpb24gZChhKXt2YXIgYj1kb2N1bWVudC5iYXNlVVJJLGM9bmV3IFVSTChhLGIpO3JldHVybiBjLmhvc3Q9PT1iLmhvc3QmJmMucG9ydD09PWIucG9ydCYmYy5wcm90b2NvbD09PWIucHJvdG9jb2w/ZShiLnBhdGhuYW1lLGMucGF0aG5hbWUpOmF9ZnVuY3Rpb24gZShhLGIpe2Zvcih2YXIgYz1hLnNwbGl0KCIvIiksZD1iLnNwbGl0KCIvIik7Yy5sZW5ndGgmJmNbMF09PT1kWzBdOyljLnNoaWZ0KCksZC5zaGlmdCgpO2Zvcih2YXIgZT0wLGY9Yy5sZW5ndGgtMTtmPmU7ZSsrKWQudW5zaGlmdCgiLi4iKTtyZXR1cm4gZC5qb2luKCIvIil9dmFyIGY9e3Jlc29sdmVEb206ZnVuY3Rpb24oYSxiKXtiPWJ8fGEub3duZXJEb2N1bWVudC5iYXNlVVJJLHRoaXMucmVzb2x2ZUF0dHJpYnV0ZXMoYSxiKSx0aGlzLnJlc29sdmVTdHlsZXMoYSxiKTt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspZC5jb250ZW50JiZ0aGlzLnJlc29sdmVEb20oZC5jb250ZW50LGIpfSxyZXNvbHZlVGVtcGxhdGU6ZnVuY3Rpb24oYSl7dGhpcy5yZXNvbHZlRG9tKGEuY29udGVudCxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSl9LHJlc29sdmVTdHlsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspdGhpcy5yZXNvbHZlU3R5bGUoZCxiKX0scmVzb2x2ZVN0eWxlOmZ1bmN0aW9uKGEsYil7Yj1ifHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxhLnRleHRDb250ZW50PXRoaXMucmVzb2x2ZUNzc1RleHQoYS50ZXh0Q29udGVudCxiKX0scmVzb2x2ZUNzc1RleHQ6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYT1iKGEsYyxnKSxiKGEsYyxoKX0scmVzb2x2ZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXthLmhhc0F0dHJpYnV0ZXMmJmEuaGFzQXR0cmlidXRlcygpJiZ0aGlzLnJlc29sdmVFbGVtZW50QXR0cmlidXRlcyhhLGIpO3ZhciBjPWEmJmEucXVlcnlTZWxlY3RvckFsbChqKTtpZihjKWZvcih2YXIgZCxlPTAsZj1jLmxlbmd0aDtmPmUmJihkPWNbZV0pO2UrKyl0aGlzLnJlc29sdmVFbGVtZW50QXR0cmlidXRlcyhkLGIpfSxyZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXtiPWJ8fGEub3duZXJEb2N1bWVudC5iYXNlVVJJLGkuZm9yRWFjaChmdW5jdGlvbihkKXt2YXIgZT1hLmF0dHJpYnV0ZXNbZF07aWYoZSYmZS52YWx1ZSYmZS52YWx1ZS5zZWFyY2goayk8MCl7dmFyIGY9YyhiLGUudmFsdWUpO2UudmFsdWU9Zn19KX19LGc9Lyh1cmxcKCkoW14pXSopKFwpKS9nLGg9LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLGk9WyJocmVmIiwic3JjIiwiYWN0aW9uIl0saj0iWyIraS5qb2luKCJdLFsiKSsiXSIsaz0ie3suKn19IjthLnVybFJlc29sdmVyPWZ9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3UucHVzaChhKSx0fHwodD0hMCxxKGQpKX1mdW5jdGlvbiBjKGEpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSl8fGF9ZnVuY3Rpb24gZCgpe3Q9ITE7dmFyIGE9dTt1PVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7dmFyIGI9ITE7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEudGFrZVJlY29yZHMoKTtlKGEpLGMubGVuZ3RoJiYoYS5jYWxsYmFja18oYyxhKSxiPSEwKX0pLGImJmQoKX1mdW5jdGlvbiBlKGEpe2Eubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9cC5nZXQoYik7YyYmYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Iub2JzZXJ2ZXI9PT1hJiZiLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPWE7YztjPWMucGFyZW50Tm9kZSl7dmFyIGQ9cC5nZXQoYyk7aWYoZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXSxnPWYub3B0aW9ucztpZihjPT09YXx8Zy5zdWJ0cmVlKXt2YXIgaD1iKGcpO2gmJmYuZW5xdWV1ZShoKX19fX1mdW5jdGlvbiBnKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89Kyt2fWZ1bmN0aW9uIGgoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1bXSx0aGlzLnJlbW92ZWROb2Rlcz1bXSx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBpKGEpe3ZhciBiPW5ldyBoKGEudHlwZSxhLnRhcmdldCk7cmV0dXJuIGIuYWRkZWROb2Rlcz1hLmFkZGVkTm9kZXMuc2xpY2UoKSxiLnJlbW92ZWROb2Rlcz1hLnJlbW92ZWROb2Rlcy5zbGljZSgpLGIucHJldmlvdXNTaWJsaW5nPWEucHJldmlvdXNTaWJsaW5nLGIubmV4dFNpYmxpbmc9YS5uZXh0U2libGluZyxiLmF0dHJpYnV0ZU5hbWU9YS5hdHRyaWJ1dGVOYW1lLGIuYXR0cmlidXRlTmFtZXNwYWNlPWEuYXR0cmlidXRlTmFtZXNwYWNlLGIub2xkVmFsdWU9YS5vbGRWYWx1ZSxifWZ1bmN0aW9uIGooYSxiKXtyZXR1cm4gdz1uZXcgaChhLGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIHg/eDooeD1pKHcpLHgub2xkVmFsdWU9YSx4KX1mdW5jdGlvbiBsKCl7dz14PXZvaWQgMH1mdW5jdGlvbiBtKGEpe3JldHVybiBhPT09eHx8YT09PXd9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgV2Vha01hcCxxPXdpbmRvdy5tc1NldEltbWVkaWF0ZTtpZighcSl7dmFyIHI9W10scz1TdHJpbmcoTWF0aC5yYW5kb20oKSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKGEpe2lmKGEuZGF0YT09PXMpe3ZhciBiPXI7cj1bXSxiLmZvckVhY2goZnVuY3Rpb24oYSl7YSgpfSl9fSkscT1mdW5jdGlvbihhKXtyLnB1c2goYSksd2luZG93LnBvc3RNZXNzYWdlKHMsIioiKX19dmFyIHQ9ITEsdT1bXSx2PTA7Zy5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXtpZihhPWMoYSksIWIuY2hpbGRMaXN0JiYhYi5hdHRyaWJ1dGVzJiYhYi5jaGFyYWN0ZXJEYXRhfHxiLmF0dHJpYnV0ZU9sZFZhbHVlJiYhYi5hdHRyaWJ1dGVzfHxiLmF0dHJpYnV0ZUZpbHRlciYmYi5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYhYi5hdHRyaWJ1dGVzfHxiLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSYmIWIuY2hhcmFjdGVyRGF0YSl0aHJvdyBuZXcgU3ludGF4RXJyb3I7dmFyIGQ9cC5nZXQoYSk7ZHx8cC5zZXQoYSxkPVtdKTtmb3IodmFyIGUsZj0wO2Y8ZC5sZW5ndGg7ZisrKWlmKGRbZl0ub2JzZXJ2ZXI9PT10aGlzKXtlPWRbZl0sZS5yZW1vdmVMaXN0ZW5lcnMoKSxlLm9wdGlvbnM9YjticmVha31lfHwoZT1uZXcgbyh0aGlzLGEsYiksZC5wdXNoKGUpLHRoaXMubm9kZXNfLnB1c2goYSkpLGUuYWRkTGlzdGVuZXJzKCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1wLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107aWYoZC5vYnNlcnZlcj09PXRoaXMpe2QucmVtb3ZlTGlzdGVuZXJzKCksYi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19O3ZhciB3LHg7by5wcm90b3R5cGU9e2VucXVldWU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5vYnNlcnZlci5yZWNvcmRzXyxkPWMubGVuZ3RoO2lmKGMubGVuZ3RoPjApe3ZhciBlPWNbZC0xXSxmPW4oZSxhKTtpZihmKXJldHVybiB2b2lkKGNbZC0xXT1mKX1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWcsYS5NdXRhdGlvbk9ic2VydmVyfHwoYS5NdXRhdGlvbk9ic2VydmVyPWcpfSh0aGlzKSx3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe3ZhciBiPShhLnBhdGgsYS54aHIpLGM9YS5mbGFncyxkPWZ1bmN0aW9uKGEsYil7dGhpcy5jYWNoZT17fSx0aGlzLm9ubG9hZD1hLHRoaXMub25jb21wbGV0ZT1iLHRoaXMuaW5mbGlnaHQ9MCx0aGlzLnBlbmRpbmc9e319O2QucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0Kz1hLmxlbmd0aDtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspdGhpcy5yZXF1aXJlKGIpO3RoaXMuY2hlY2tEb25lKCl9LGFkZE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbmZsaWdodCsrLHRoaXMucmVxdWlyZShhKSx0aGlzLmNoZWNrRG9uZSgpfSxyZXF1aXJlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc3JjfHxhLmhyZWY7YS5fX25vZGVVcmw9Yix0aGlzLmRlZHVwZShiLGEpfHx0aGlzLmZldGNoKGIsYSl9LGRlZHVwZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMucGVuZGluZ1thXSlyZXR1cm4gdGhpcy5wZW5kaW5nW2FdLnB1c2goYiksITA7cmV0dXJuIHRoaXMuY2FjaGVbYV0/KHRoaXMub25sb2FkKGEsYix0aGlzLmNhY2hlW2FdKSx0aGlzLnRhaWwoKSwhMCk6KHRoaXMucGVuZGluZ1thXT1bYl0sITEpfSxmZXRjaDpmdW5jdGlvbihhLGQpe2lmKGMubG9hZCYmY29uc29sZS5sb2coImZldGNoIixhLGQpLGEubWF0Y2goL15kYXRhOi8pKXt2YXIgZT1hLnNwbGl0KCIsIiksZj1lWzBdLGc9ZVsxXTtnPWYuaW5kZXhPZigiO2Jhc2U2NCIpPi0xP2F0b2IoZyk6ZGVjb2RlVVJJQ29tcG9uZW50KGcpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnJlY2VpdmUoYSxkLG51bGwsZyl9LmJpbmQodGhpcyksMCl9ZWxzZXt2YXIgaD1mdW5jdGlvbihiLGMpe3RoaXMucmVjZWl2ZShhLGQsYixjKX0uYmluZCh0aGlzKTtiLmxvYWQoYSxoKX19LHJlY2VpdmU6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5jYWNoZVthXT1kO2Zvcih2YXIgZSxmPXRoaXMucGVuZGluZ1thXSxnPTAsaD1mLmxlbmd0aDtoPmcmJihlPWZbZ10pO2crKyl0aGlzLm9ubG9hZChhLGUsZCksdGhpcy50YWlsKCk7dGhpcy5wZW5kaW5nW2FdPW51bGx9LHRhaWw6ZnVuY3Rpb24oKXstLXRoaXMuaW5mbGlnaHQsdGhpcy5jaGVja0RvbmUoKX0sY2hlY2tEb25lOmZ1bmN0aW9uKCl7dGhpcy5pbmZsaWdodHx8dGhpcy5vbmNvbXBsZXRlKCl9fSxiPWJ8fHthc3luYzohMCxvazpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdGF0dXM+PTIwMCYmYS5zdGF0dXM8MzAwfHwzMDQ9PT1hLnN0YXR1c3x8MD09PWEuc3RhdHVzfSxsb2FkOmZ1bmN0aW9uKGMsZCxlKXt2YXIgZj1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuKGEuZmxhZ3MuZGVidWd8fGEuZmxhZ3MuYnVzdCkmJihjKz0iPyIrTWF0aC5yYW5kb20oKSksZi5vcGVuKCJHRVQiLGMsYi5hc3luYyksZi5hZGRFdmVudExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixmdW5jdGlvbigpezQ9PT1mLnJlYWR5U3RhdGUmJmQuY2FsbChlLCFiLm9rKGYpJiZmLGYucmVzcG9uc2V8fGYucmVzcG9uc2VUZXh0LGMpfSksZi5zZW5kKCksZn0sbG9hZERvY3VtZW50OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmxvYWQoYSxiLGMpLnJlc3BvbnNlVHlwZT0iZG9jdW1lbnQifX0sYS54aHI9YixhLkxvYWRlcj1kfSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEucmVsPT09Z31mdW5jdGlvbiBjKGEpe3ZhciBiLGM9ZChhKTt0cnl7Yj1idG9hKGMpfWNhdGNoKGUpe2I9YnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYykpKSxjb25zb2xlLndhcm4oIlNjcmlwdCBjb250YWluZWQgbm9uLWxhdGluIGNoYXJhY3RlcnMgdGhhdCB3ZXJlIGZvcmNlZCB0byBsYXRpbi4gU29tZSBjaGFyYWN0ZXJzIG1heSBiZSB3cm9uZy4iLGEpfXJldHVybiJkYXRhOnRleHQvamF2YXNjcmlwdDtiYXNlNjQsIitifWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEudGV4dENvbnRlbnQrZShhKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWEuX19ub2RlVXJsO2lmKCFiKXtiPWEub3duZXJEb2N1bWVudC5iYXNlVVJJO3ZhciBjPSJbIitNYXRoLmZsb29yKDFlMyooTWF0aC5yYW5kb20oKSsxKSkrIl0iLGQ9YS50ZXh0Q29udGVudC5tYXRjaCgvUG9seW1lclwoWyciXShbXiciXSopLyk7Yz1kJiZkWzFdfHxjLGIrPSIvIitjKyIuanMifXJldHVybiJcbi8vIyBzb3VyY2VVUkw9IitiKyJcbiJ9ZnVuY3Rpb24gZihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi50ZXh0Q29udGVudD1hLnRleHRDb250ZW50LG4ucmVzb2x2ZVVybHNJblN0eWxlKGIpLGJ9dmFyIGc9ImltcG9ydCIsaD1hLmZsYWdzLGk9L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQsaz17ZG9jdW1lbnRTZWxlY3RvcnM6ImxpbmtbcmVsPSIrZysiXSIsaW1wb3J0c1NlbGVjdG9yczpbImxpbmtbcmVsPSIrZysiXSIsImxpbmtbcmVsPXN0eWxlc2hlZXRdIiwic3R5bGUiLCJzY3JpcHQ6bm90KFt0eXBlXSkiLCdzY3JpcHRbdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXS5qb2luKCIsIiksbWFwOntsaW5rOiJwYXJzZUxpbmsiLHNjcmlwdDoicGFyc2VTY3JpcHQiLHN0eWxlOiJwYXJzZVN0eWxlIn0scGFyc2VOZXh0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5uZXh0VG9QYXJzZSgpO2EmJnRoaXMucGFyc2UoYSl9LHBhcnNlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNQYXJzZWQoYSkpcmV0dXJuIHZvaWQoaC5wYXJzZSYmY29uc29sZS5sb2coIlslc10gaXMgYWxyZWFkeSBwYXJzZWQiLGEubG9jYWxOYW1lKSk7dmFyIGI9dGhpc1t0aGlzLm1hcFthLmxvY2FsTmFtZV1dO2ImJih0aGlzLm1hcmtQYXJzaW5nKGEpLGIuY2FsbCh0aGlzLGEpKX0sbWFya1BhcnNpbmc6ZnVuY3Rpb24oYSl7aC5wYXJzZSYmY29uc29sZS5sb2coInBhcnNpbmciLGEpLHRoaXMucGFyc2luZ0VsZW1lbnQ9YX0sbWFya1BhcnNpbmdDb21wbGV0ZTpmdW5jdGlvbihhKXthLl9faW1wb3J0UGFyc2VkPSEwLGEuX19pbXBvcnRFbGVtZW50JiYoYS5fX2ltcG9ydEVsZW1lbnQuX19pbXBvcnRQYXJzZWQ9ITApLHRoaXMucGFyc2luZ0VsZW1lbnQ9bnVsbCxoLnBhcnNlJiZjb25zb2xlLmxvZygiY29tcGxldGVkIixhKSx0aGlzLnBhcnNlTmV4dCgpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXtpZihhLmltcG9ydC5fX2ltcG9ydFBhcnNlZD0hMCxIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vayYmSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2soYSksYS5kaXNwYXRjaEV2ZW50KGEuX19yZXNvdXJjZT9uZXcgQ3VzdG9tRXZlbnQoImxvYWQiLHtidWJibGVzOiExfSk6bmV3IEN1c3RvbUV2ZW50KCJlcnJvciIse2J1YmJsZXM6ITF9KSksYS5fX3BlbmRpbmcpZm9yKHZhciBiO2EuX19wZW5kaW5nLmxlbmd0aDspYj1hLl9fcGVuZGluZy5zaGlmdCgpLGImJmIoe3RhcmdldDphfSk7dGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGEpfSxwYXJzZUxpbms6ZnVuY3Rpb24oYSl7YihhKT90aGlzLnBhcnNlSW1wb3J0KGEpOihhLmhyZWY9YS5ocmVmLHRoaXMucGFyc2VHZW5lcmljKGEpKX0scGFyc2VTdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hO2E9ZihhKSxhLl9faW1wb3J0RWxlbWVudD1iLHRoaXMucGFyc2VHZW5lcmljKGEpfSxwYXJzZUdlbmVyaWM6ZnVuY3Rpb24oYSl7dGhpcy50cmFja0VsZW1lbnQoYSksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChhKX0sdHJhY2tFbGVtZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWZ1bmN0aW9uKGQpe2ImJmIoZCksYy5tYXJrUGFyc2luZ0NvbXBsZXRlKGEpfTtpZihhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGQpLGEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQpLGkmJiJzdHlsZSI9PT1hLmxvY2FsTmFtZSl7dmFyIGU9ITE7aWYoLTE9PWEudGV4dENvbnRlbnQuaW5kZXhPZigiQGltcG9ydCIpKWU9ITA7ZWxzZSBpZihhLnNoZWV0KXtlPSEwO2Zvcih2YXIgZixnPWEuc2hlZXQuY3NzUnVsZXMsaD1nP2cubGVuZ3RoOjAsaj0wO2g+aiYmKGY9Z1tqXSk7aisrKWYudHlwZT09PUNTU1J1bGUuSU1QT1JUX1JVTEUmJihlPWUmJkJvb2xlYW4oZi5zdHlsZVNoZWV0KSl9ZSYmYS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgibG9hZCIse2J1YmJsZXM6ITF9KSl9fSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLl9faW1wb3J0RWxlbWVudD1iLGQuc3JjPWIuc3JjP2Iuc3JjOmMoYiksYS5jdXJyZW50U2NyaXB0PWIsdGhpcy50cmFja0VsZW1lbnQoZCxmdW5jdGlvbigpe2QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSxhLmN1cnJlbnRTY3JpcHQ9bnVsbH0pLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZCl9LG5leHRUb1BhcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMucGFyc2luZ0VsZW1lbnQmJnRoaXMubmV4dFRvUGFyc2VJbkRvYyhqKX0sbmV4dFRvUGFyc2VJbkRvYzpmdW5jdGlvbihhLGMpe2Zvcih2YXIgZCxlPWEucXVlcnlTZWxlY3RvckFsbCh0aGlzLnBhcnNlU2VsZWN0b3JzRm9yTm9kZShhKSksZj0wLGc9ZS5sZW5ndGg7Zz5mJiYoZD1lW2ZdKTtmKyspaWYoIXRoaXMuaXNQYXJzZWQoZCkpcmV0dXJuIHRoaXMuaGFzUmVzb3VyY2UoZCk/YihkKT90aGlzLm5leHRUb1BhcnNlSW5Eb2MoZC5pbXBvcnQsZCk6ZDp2b2lkIDA7cmV0dXJuIGN9LHBhcnNlU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGE7cmV0dXJuIGI9PT1qP3RoaXMuZG9jdW1lbnRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzU2VsZWN0b3JzfSxpc1BhcnNlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5fX2ltcG9ydFBhcnNlZH0saGFzUmVzb3VyY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSkmJiFhLmltcG9ydD8hMTohMH19LGw9Lyh1cmxcKCkoW14pXSopKFwpKS9nLG09LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLG49e3Jlc29sdmVVcmxzSW5TdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQsYz1iLmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVVcmxzSW5Dc3NUZXh0KGEudGV4dENvbnRlbnQsYyksYX0scmVzb2x2ZVVybHNJbkNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlcGxhY2VVcmxzKGEsYixsKTtyZXR1cm4gYz10aGlzLnJlcGxhY2VVcmxzKGMsYixtKX0scmVwbGFjZVVybHM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnJlcGxhY2UoYyxmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1kLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGIuaHJlZj1mLGY9Yi5ocmVmLGMrIiciK2YrIiciK2V9KX19O2EucGFyc2VyPWssYS5wYXRoPW4sYS5pc0lFPWl9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBjKGEsbSl9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGQoYSxiKXt2YXIgYz1hO2MgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KG0pKSxjLl9VUkw9Yjt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtkLnNldEF0dHJpYnV0ZSgiaHJlZiIsYiksYy5iYXNlVVJJfHwoYy5iYXNlVVJJPWIpO3ZhciBlPWMuY3JlYXRlRWxlbWVudCgibWV0YSIpO3JldHVybiBlLnNldEF0dHJpYnV0ZSgiY2hhcnNldCIsInV0Zi04IiksYy5oZWFkLmFwcGVuZENoaWxkKGUpLGMuaGVhZC5hcHBlbmRDaGlsZChkKSxhIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjLmJvZHkuaW5uZXJIVE1MPWEpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31mdW5jdGlvbiBlKGEsYil7Yj1ifHxuLGcoZnVuY3Rpb24oKXtoKGEsYil9LGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuImNvbXBsZXRlIj09PWEucmVhZHlTdGF0ZXx8YS5yZWFkeVN0YXRlPT09dX1mdW5jdGlvbiBnKGEsYil7aWYoZihiKSlhJiZhKCk7ZWxzZXt2YXIgYz1mdW5jdGlvbigpeygiY29tcGxldGUiPT09Yi5yZWFkeVN0YXRlfHxiLnJlYWR5U3RhdGU9PT11KSYmKGIucmVtb3ZlRXZlbnRMaXN0ZW5lcih2LGMpLGcoYSxiKSl9O2IuYWRkRXZlbnRMaXN0ZW5lcih2LGMpfX1mdW5jdGlvbiBoKGEsYil7ZnVuY3Rpb24gYygpe2Y9PWcmJnJlcXVlc3RBbmltYXRpb25GcmFtZShhKX1mdW5jdGlvbiBkKCl7ZisrLGMoKX12YXIgZT1iLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxmPTAsZz1lLmxlbmd0aDtpZihnKWZvcih2YXIgaCxqPTA7Zz5qJiYoaD1lW2pdKTtqKyspaShoKT9kLmNhbGwoaCk6KGguYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZCksaC5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsZCkpO2Vsc2UgYygpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGs/YS5pbXBvcnQmJiJsb2FkaW5nIiE9PWEuaW1wb3J0LnJlYWR5U3RhdGU6YS5fX2ltcG9ydFBhcnNlZH12YXIgaj0iaW1wb3J0ImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKSxrPWosbD1hLmZsYWdzLG09ImltcG9ydCIsbj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/U2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKGRvY3VtZW50KTpkb2N1bWVudDtpZihrKXZhciBvPXt9O2Vsc2UgdmFyIHA9KGEueGhyLGEuTG9hZGVyKSxxPWEucGFyc2VyLG89e2RvY3VtZW50czp7fSxkb2N1bWVudFByZWxvYWRTZWxlY3RvcnM6ImxpbmtbcmVsPSIrbSsiXSIsaW1wb3J0c1ByZWxvYWRTZWxlY3RvcnM6WyJsaW5rW3JlbD0iK20rIl0iXS5qb2luKCIsIiksbG9hZE5vZGU6ZnVuY3Rpb24oYSl7ci5hZGROb2RlKGEpfSxsb2FkU3VidHJlZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcnNoYWxOb2RlcyhhKTtyLmFkZE5vZGVzKGIpfSxtYXJzaGFsTm9kZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvckFsbCh0aGlzLmxvYWRTZWxlY3RvcnNGb3JOb2RlKGEpKX0sbG9hZFNlbGVjdG9yc0Zvck5vZGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vd25lckRvY3VtZW50fHxhO3JldHVybiBiPT09bj90aGlzLmRvY3VtZW50UHJlbG9hZFNlbGVjdG9yczp0aGlzLmltcG9ydHNQcmVsb2FkU2VsZWN0b3JzfSxsb2FkZWQ6ZnVuY3Rpb24oYSxjLGUpe2lmKGwubG9hZCYmY29uc29sZS5sb2coImxvYWRlZCIsYSxjKSxjLl9fcmVzb3VyY2U9ZSxiKGMpKXt2YXIgZj10aGlzLmRvY3VtZW50c1thXTtmfHwoZj1kKGUsYSksZi5fX2ltcG9ydExpbms9Yyx0aGlzLmJvb3REb2N1bWVudChmKSx0aGlzLmRvY3VtZW50c1thXT1mKSxjLmltcG9ydD1mfXEucGFyc2VOZXh0KCl9LGJvb3REb2N1bWVudDpmdW5jdGlvbihhKXt0aGlzLmxvYWRTdWJ0cmVlKGEpLHRoaXMub2JzZXJ2ZShhKSxxLnBhcnNlTmV4dCgpfSxsb2FkZWRBbGw6ZnVuY3Rpb24oKXtxLnBhcnNlTmV4dCgpfX0scj1uZXcgcChvLmxvYWRlZC5iaW5kKG8pLG8ubG9hZGVkQWxsLmJpbmQobykpO3ZhciBzPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSFRNTEltcG9ydHMuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQuY3VycmVudFNjcmlwdH0sY29uZmlndXJhYmxlOiEwfTtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsIl9jdXJyZW50U2NyaXB0IixzKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX2N1cnJlbnRTY3JpcHQiLHMpLCFkb2N1bWVudC5iYXNlVVJJKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5ocmVmfSxjb25maWd1cmFibGU6ITB9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudCwiYmFzZVVSSSIsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sImJhc2VVUkkiLHQpfXZhciB1PUhUTUxJbXBvcnRzLmlzSUU/ImNvbXBsZXRlIjoiaW50ZXJhY3RpdmUiLHY9InJlYWR5c3RhdGVjaGFuZ2UiO2EuaGFzTmF0aXZlPWosYS51c2VOYXRpdmU9ayxhLmltcG9ydGVyPW8sYS53aGVuSW1wb3J0c1JlYWR5PWUsYS5JTVBPUlRfTElOS19UWVBFPW0sYS5pc0ltcG9ydExvYWRlZD1pLGEuaW1wb3J0TG9hZGVyPXJ9KHdpbmRvdy5IVE1MSW1wb3J0cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGIsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYj1hW2RdKTtkKyspImNoaWxkTGlzdCI9PT1iLnR5cGUmJmIuYWRkZWROb2Rlcy5sZW5ndGgmJmMoYi5hZGRlZE5vZGVzKX1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYixlPTAsZz1hLmxlbmd0aDtnPmUmJihiPWFbZV0pO2UrKylkKGIpJiZmLmxvYWROb2RlKGIpLGIuY2hpbGRyZW4mJmIuY2hpbGRyZW4ubGVuZ3RoJiZjKGIuY2hpbGRyZW4pfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlJiZnLmNhbGwoYSxmLmxvYWRTZWxlY3RvcnNGb3JOb2RlKGEpKX1mdW5jdGlvbiBlKGEpe2gub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfXZhciBmPShhLklNUE9SVF9MSU5LX1RZUEUsYS5pbXBvcnRlciksZz1IVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc3x8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yLGg9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoYik7YS5vYnNlcnZlPWUsZi5vYnNlcnZlPWV9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5pbXBvcnRlci5ib290RG9jdW1lbnQoYil9ImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGMuaW5pdEV2ZW50KGEsYi5idWJibGVzPT09ITE/ITE6ITAsYi5jYW5jZWxhYmxlPT09ITE/ITE6ITAsYi5kZXRhaWwpLGN9KTt2YXIgYj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe0hUTUxJbXBvcnRzLnJlYWR5PSEwLEhUTUxJbXBvcnRzLnJlYWR5VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxiLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJIVE1MSW1wb3J0c0xvYWRlZCIse2J1YmJsZXM6ITB9KSl9KSxIVE1MSW1wb3J0cy51c2VOYXRpdmV8fCgiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8ImludGVyYWN0aXZlIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJiF3aW5kb3cuYXR0YWNoRXZlbnQ/YSgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEpKX0oKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxjLGQpe3ZhciBlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7aWYoIWUpZm9yKGU9YS5maXJzdENoaWxkO2UmJmUubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspZT1lLm5leHRTaWJsaW5nO2Zvcig7ZTspYyhlLGQpIT09ITAmJmIoZSxjLGQpLGU9ZS5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhhLGIpe2Zvcih2YXIgYz1hLnNoYWRvd1Jvb3Q7YzspZChjLGIpLGM9Yy5vbGRlclNoYWRvd1Jvb3R9ZnVuY3Rpb24gZChhLGQpe2IoYSxmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8hMDp2b2lkIGMoYSxkKX0pLGMoYSxkKX1mdW5jdGlvbiBlKGEpe3JldHVybiBoKGEpPyhpKGEpLCEwKTp2b2lkIGwoYSl9ZnVuY3Rpb24gZihhKXtkKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSk/ITA6dm9pZCAwfSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gZShhKXx8ZihhKX1mdW5jdGlvbiBoKGIpe2lmKCFiLl9fdXBncmFkZWRfXyYmYi5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgiaXMiKXx8Yi5sb2NhbE5hbWUsZD1hLnJlZ2lzdHJ5W2NdO2lmKGQpcmV0dXJuIEEuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpLCEwfX1mdW5jdGlvbiBpKGEpe2woYSkscihhKSYmZChhLGZ1bmN0aW9uKGEpe2woYSl9KX1mdW5jdGlvbiBqKGEpe2lmKEUucHVzaChhKSwhRCl7RD0hMDt2YXIgYj13aW5kb3cuUGxhdGZvcm0mJndpbmRvdy5QbGF0Zm9ybS5lbmRPZk1pY3JvdGFza3x8c2V0VGltZW91dDtiKGspfX1mdW5jdGlvbiBrKCl7RD0hMTtmb3IodmFyIGEsYj1FLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWEoKTtFPVtdfWZ1bmN0aW9uIGwoYSl7Qz9qKGZ1bmN0aW9uKCl7bShhKX0pOm0oYSl9ZnVuY3Rpb24gbShhKXsoYS5hdHRhY2hlZENhbGxiYWNrfHxhLmRldGFjaGVkQ2FsbGJhY2t8fGEuX191cGdyYWRlZF9fJiZBLmRvbSkmJihBLmRvbSYmY29uc29sZS5ncm91cCgiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSkscihhKSYmKGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKSsxLGEuX19pbnNlcnRlZDwxJiYoYS5fX2luc2VydGVkPTEpLGEuX19pbnNlcnRlZD4xP0EuZG9tJiZjb25zb2xlLndhcm4oImluc2VydGVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuYXR0YWNoZWRDYWxsYmFjayYmKEEuZG9tJiZjb25zb2xlLmxvZygiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSksYS5hdHRhY2hlZENhbGxiYWNrKCkpKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpKX1mdW5jdGlvbiBuKGEpe28oYSksZChhLGZ1bmN0aW9uKGEpe28oYSl9KX1mdW5jdGlvbiBvKGEpe0M/aihmdW5jdGlvbigpe3AoYSl9KTpwKGEpfWZ1bmN0aW9uIHAoYSl7KGEuYXR0YWNoZWRDYWxsYmFja3x8YS5kZXRhY2hlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmQS5kb20pJiYoQS5kb20mJmNvbnNvbGUuZ3JvdXAoInJlbW92ZWQ6IixhLmxvY2FsTmFtZSkscihhKXx8KGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKS0xLGEuX19pbnNlcnRlZD4wJiYoYS5fX2luc2VydGVkPTApLGEuX19pbnNlcnRlZDwwP0EuZG9tJiZjb25zb2xlLndhcm4oInJlbW92ZWQ6IixhLmxvY2FsTmFtZSwiaW5zZXJ0L3JlbW92ZSBjb3VudDoiLGEuX19pbnNlcnRlZCk6YS5kZXRhY2hlZENhbGxiYWNrJiZhLmRldGFjaGVkQ2FsbGJhY2soKSksQS5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gcShhKXtyZXR1cm4gd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKTphfWZ1bmN0aW9uIHIoYSl7Zm9yKHZhciBiPWEsYz1xKGRvY3VtZW50KTtiOyl7aWYoYj09YylyZXR1cm4hMDtiPWIucGFyZW50Tm9kZXx8Yi5ob3N0fX1mdW5jdGlvbiBzKGEpe2lmKGEuc2hhZG93Um9vdCYmIWEuc2hhZG93Um9vdC5fX3dhdGNoZWQpe0EuZG9tJiZjb25zb2xlLmxvZygid2F0Y2hpbmcgc2hhZG93LXJvb3QgZm9yOiAiLGEubG9jYWxOYW1lKTtmb3IodmFyIGI9YS5zaGFkb3dSb290O2I7KXQoYiksYj1iLm9sZGVyU2hhZG93Um9vdH19ZnVuY3Rpb24gdChhKXthLl9fd2F0Y2hlZHx8KHcoYSksYS5fX3dhdGNoZWQ9ITApfWZ1bmN0aW9uIHUoYSl7aWYoQS5kb20pe3ZhciBiPWFbMF07aWYoYiYmImNoaWxkTGlzdCI9PT1iLnR5cGUmJmIuYWRkZWROb2RlcyYmYi5hZGRlZE5vZGVzKXtmb3IodmFyIGM9Yi5hZGRlZE5vZGVzWzBdO2MmJmMhPT1kb2N1bWVudCYmIWMuaG9zdDspYz1jLnBhcmVudE5vZGU7dmFyIGQ9YyYmKGMuVVJMfHxjLl9VUkx8fGMuaG9zdCYmYy5ob3N0LmxvY2FsTmFtZSl8fCIiO2Q9ZC5zcGxpdCgiLz8iKS5zaGlmdCgpLnNwbGl0KCIvIikucG9wKCl9Y29uc29sZS5ncm91cCgibXV0YXRpb25zICglZCkgWyVzXSIsYS5sZW5ndGgsZHx8IiIpfWEuZm9yRWFjaChmdW5jdGlvbihhKXsiY2hpbGRMaXN0Ij09PWEudHlwZSYmKEcoYS5hZGRlZE5vZGVzLGZ1bmN0aW9uKGEpe2EubG9jYWxOYW1lJiZnKGEpfSksRyhhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmbihhKX0pKX0pLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gdigpe3UoRi50YWtlUmVjb3JkcygpKSxrKCl9ZnVuY3Rpb24gdyhhKXtGLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX1mdW5jdGlvbiB4KGEpe3coYSl9ZnVuY3Rpb24geShhKXtBLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZURvY3VtZW50OiAiLGEuYmFzZVVSSS5zcGxpdCgiLyIpLnBvcCgpKSxnKGEpLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24geihhKXthPXEoYSk7Zm9yKHZhciBiLGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK0IrIl0iKSxkPTAsZT1jLmxlbmd0aDtlPmQmJihiPWNbZF0pO2QrKyliLmltcG9ydCYmYi5pbXBvcnQuX19wYXJzZWQmJnooYi5pbXBvcnQpO3koYSl9dmFyIEE9d2luZG93LmxvZ0ZsYWdzfHx7fSxCPXdpbmRvdy5IVE1MSW1wb3J0cz9IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOiJub25lIixDPSF3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9PT13aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyO2EuaGFzUG9seWZpbGxNdXRhdGlvbnM9Qzt2YXIgRD0hMSxFPVtdLEY9bmV3IE11dGF0aW9uT2JzZXJ2ZXIodSksRz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EuSU1QT1JUX0xJTktfVFlQRT1CLGEud2F0Y2hTaGFkb3c9cyxhLnVwZ3JhZGVEb2N1bWVudFRyZWU9eixhLnVwZ3JhZGVBbGw9ZyxhLnVwZ3JhZGVTdWJ0cmVlPWYsYS5pbnNlcnRlZE5vZGU9aSxhLm9ic2VydmVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50PXksYS50YWtlUmVjb3Jkcz12fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixnKXt2YXIgaD1nfHx7fTtpZighYil0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgYG5hbWVgIG11c3Qgbm90IGJlIGVtcHR5Iik7aWYoYi5pbmRleE9mKCItIik8MCl0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgKCduYW1lJykgbXVzdCBjb250YWluIGEgZGFzaCAoJy0nKS4gQXJndW1lbnQgcHJvdmlkZWQgd2FzICciK1N0cmluZyhiKSsiJy4iKTtpZihjKGIpKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGV4ZWN1dGUgJ3JlZ2lzdGVyRWxlbWVudCcgb24gJ0RvY3VtZW50JzogUmVnaXN0cmF0aW9uIGZhaWxlZCBmb3IgdHlwZSAnIitTdHJpbmcoYikrIicuIFRoZSB0eXBlIG5hbWUgaXMgaW52YWxpZC4iKTtpZihuKGIpKXRocm93IG5ldyBFcnJvcigiRHVwbGljYXRlRGVmaW5pdGlvbkVycm9yOiBhIHR5cGUgd2l0aCBuYW1lICciK1N0cmluZyhiKSsiJyBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQiKTtpZighaC5wcm90b3R5cGUpdGhyb3cgbmV3IEVycm9yKCJPcHRpb25zIG1pc3NpbmcgcmVxdWlyZWQgcHJvdG90eXBlIHByb3BlcnR5Iik7cmV0dXJuIGguX19uYW1lPWIudG9Mb3dlckNhc2UoKSxoLmxpZmVjeWNsZT1oLmxpZmVjeWNsZXx8e30saC5hbmNlc3RyeT1kKGguZXh0ZW5kcyksZShoKSxmKGgpLGwoaC5wcm90b3R5cGUpLG8oaC5fX25hbWUsaCksaC5jdG9yPXAoaCksaC5jdG9yLnByb3RvdHlwZT1oLnByb3RvdHlwZSxoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oLmN0b3IsYS5yZWFkeSYmYS51cGdyYWRlRG9jdW1lbnRUcmVlKGRvY3VtZW50KSxoLmN0b3J9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9MDtiPHkubGVuZ3RoO2IrKylpZihhPT09eVtiXSlyZXR1cm4hMH1mdW5jdGlvbiBkKGEpe3ZhciBiPW4oYSk7cmV0dXJuIGI/ZChiLmV4dGVuZHMpLmNvbmNhdChbYl0pOltdfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiLGM9YS5leHRlbmRzLGQ9MDtiPWEuYW5jZXN0cnlbZF07ZCsrKWM9Yi5pcyYmYi50YWc7YS50YWc9Y3x8YS5fX25hbWUsYyYmKGEuaXM9YS5fX25hbWUpfWZ1bmN0aW9uIGYoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKTtiPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKX1mb3IodmFyIGQsZT1hLnByb3RvdHlwZTtlJiZlIT09Yjspe3ZhciBkPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtlLl9fcHJvdG9fXz1kLGU9ZH19YS5uYXRpdmU9Yn1mdW5jdGlvbiBnKGEpe3JldHVybiBoKEIoYS50YWcpLGEpfWZ1bmN0aW9uIGgoYixjKXtyZXR1cm4gYy5pcyYmYi5zZXRBdHRyaWJ1dGUoImlzIixjLmlzKSxiLnJlbW92ZUF0dHJpYnV0ZSgidW5yZXNvbHZlZCIpLGkoYixjKSxiLl9fdXBncmFkZWRfXz0hMCxrKGIpLGEuaW5zZXJ0ZWROb2RlKGIpLGEudXBncmFkZVN1YnRyZWUoYiksYn1mdW5jdGlvbiBpKGEsYil7T2JqZWN0Ll9fcHJvdG9fXz9hLl9fcHJvdG9fXz1iLnByb3RvdHlwZTooaihhLGIucHJvdG90eXBlLGIubmF0aXZlKSxhLl9fcHJvdG9fXz1iLnByb3RvdHlwZSl9ZnVuY3Rpb24gaihhLGIsYyl7Zm9yKHZhciBkPXt9LGU9YjtlIT09YyYmZSE9PUhUTUxFbGVtZW50LnByb3RvdHlwZTspe2Zvcih2YXIgZixnPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLGg9MDtmPWdbaF07aCsrKWRbZl18fChPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxmLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxmKSksZFtmXT0xKTtlPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKX19ZnVuY3Rpb24gayhhKXthLmNyZWF0ZWRDYWxsYmFjayYmYS5jcmVhdGVkQ2FsbGJhY2soKX1mdW5jdGlvbiBsKGEpe2lmKCFhLnNldEF0dHJpYnV0ZS5fcG9seWZpbGxlZCl7dmFyIGI9YS5zZXRBdHRyaWJ1dGU7YS5zZXRBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxjKXttLmNhbGwodGhpcyxhLGMsYil9O3ZhciBjPWEucmVtb3ZlQXR0cmlidXRlO2EucmVtb3ZlQXR0cmlidXRlPWZ1bmN0aW9uKGEpe20uY2FsbCh0aGlzLGEsbnVsbCxjKX0sYS5zZXRBdHRyaWJ1dGUuX3BvbHlmaWxsZWQ9ITB9fWZ1bmN0aW9uIG0oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0QXR0cmlidXRlKGEpO2MuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlPXRoaXMuZ2V0QXR0cmlidXRlKGEpO3RoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrJiZlIT09ZCYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYSxkLGUpfWZ1bmN0aW9uIG4oYSl7cmV0dXJuIGE/elthLnRvTG93ZXJDYXNlKCldOnZvaWQgMH1mdW5jdGlvbiBvKGEsYil7elthXT1ifWZ1bmN0aW9uIHAoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGcoYSl9fWZ1bmN0aW9uIHEoYSxiLGMpe3JldHVybiBhPT09QT9yKGIsYyk6QyhhLGIpfWZ1bmN0aW9uIHIoYSxiKXt2YXIgYz1uKGJ8fGEpO2lmKGMpe2lmKGE9PWMudGFnJiZiPT1jLmlzKXJldHVybiBuZXcgYy5jdG9yO2lmKCFiJiYhYy5pcylyZXR1cm4gbmV3IGMuY3Rvcn1pZihiKXt2YXIgZD1yKGEpO3JldHVybiBkLnNldEF0dHJpYnV0ZSgiaXMiLGIpLGR9dmFyIGQ9QihhKTtyZXR1cm4gYS5pbmRleE9mKCItIik+PTAmJmkoZCxIVE1MRWxlbWVudCksZH1mdW5jdGlvbiBzKGEpe2lmKCFhLl9fdXBncmFkZWRfXyYmYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYj1hLmdldEF0dHJpYnV0ZSgiaXMiKSxjPW4oYnx8YS5sb2NhbE5hbWUpO2lmKGMpe2lmKGImJmMudGFnPT1hLmxvY2FsTmFtZSlyZXR1cm4gaChhLGMpO2lmKCFiJiYhYy5leHRlbmRzKXJldHVybiBoKGEsYyl9fX1mdW5jdGlvbiB0KGIpe3ZhciBjPUQuY2FsbCh0aGlzLGIpO3JldHVybiBhLnVwZ3JhZGVBbGwoYyksY31hfHwoYT13aW5kb3cuQ3VzdG9tRWxlbWVudHM9e2ZsYWdzOnt9fSk7dmFyIHU9YS5mbGFncyx2PUJvb2xlYW4oZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KSx3PSF1LnJlZ2lzdGVyJiZ2JiYhd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsO2lmKHcpe3ZhciB4PWZ1bmN0aW9uKCl7fTthLnJlZ2lzdHJ5PXt9LGEudXBncmFkZUVsZW1lbnQ9eCxhLndhdGNoU2hhZG93PXgsYS51cGdyYWRlPXgsYS51cGdyYWRlQWxsPXgsYS51cGdyYWRlU3VidHJlZT14LGEub2JzZXJ2ZURvY3VtZW50PXgsYS51cGdyYWRlRG9jdW1lbnQ9eCxhLnVwZ3JhZGVEb2N1bWVudFRyZWU9eCxhLnRha2VSZWNvcmRzPXgsYS5yZXNlcnZlZFRhZ0xpc3Q9W119ZWxzZXt2YXIgeT1bImFubm90YXRpb24teG1sIiwiY29sb3ItcHJvZmlsZSIsImZvbnQtZmFjZSIsImZvbnQtZmFjZS1zcmMiLCJmb250LWZhY2UtdXJpIiwiZm9udC1mYWNlLWZvcm1hdCIsImZvbnQtZmFjZS1uYW1lIiwibWlzc2luZy1nbHlwaCJdLHo9e30sQT0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsQj1kb2N1bWVudC5jcmVhdGVFbGVtZW50LmJpbmQoZG9jdW1lbnQpLEM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TLmJpbmQoZG9jdW1lbnQpLEQ9Tm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlO2RvY3VtZW50LnJlZ2lzdGVyRWxlbWVudD1iLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQ9cixkb2N1bWVudC5jcmVhdGVFbGVtZW50TlM9cSxOb2RlLnByb3RvdHlwZS5jbG9uZU5vZGU9dCxhLnJlZ2lzdHJ5PXosYS51cGdyYWRlPXN9dmFyIEU7RT1PYmplY3QuX19wcm90b19ffHx3P2Z1bmN0aW9uKGEsYil7cmV0dXJuIGEgaW5zdGFuY2VvZiBifTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hO2M7KXtpZihjPT09Yi5wcm90b3R5cGUpcmV0dXJuITA7Yz1jLl9fcHJvdG9fX31yZXR1cm4hMX0sYS5pbnN0YW5jZW9mPUUsYS5yZXNlcnZlZFRhZ0xpc3Q9eSxkb2N1bWVudC5yZWdpc3Rlcj1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQsYS5oYXNOYXRpdmU9dixhLnVzZU5hdGl2ZT13fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWN9dmFyIGM9YS5JTVBPUlRfTElOS19UWVBFLGQ9e3NlbGVjdG9yczpbImxpbmtbcmVsPSIrYysiXSJdLG1hcDp7bGluazoicGFyc2VMaW5rIn0scGFyc2U6ZnVuY3Rpb24oYSl7aWYoIWEuX19wYXJzZWQpe2EuX19wYXJzZWQ9ITA7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGQuc2VsZWN0b3JzKTtlKGIsZnVuY3Rpb24oYSl7ZFtkLm1hcFthLmxvY2FsTmFtZV1dKGEpfSksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGEpLEN1c3RvbUVsZW1lbnRzLm9ic2VydmVEb2N1bWVudChhKX19LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpJiZ0aGlzLnBhcnNlSW1wb3J0KGEpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXthLmltcG9ydCYmZC5wYXJzZShhLmltcG9ydCl9fSxlPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS5wYXJzZXI9ZCxhLklNUE9SVF9MSU5LX1RZUEU9Y30od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoZG9jdW1lbnQpO3ZhciBhPXdpbmRvdy5QbGF0Zm9ybSYmUGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s/UGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s6c2V0VGltZW91dDthKGZ1bmN0aW9uKCl7Q3VzdG9tRWxlbWVudHMucmVhZHk9ITAsQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lPURhdGUubm93KCksd2luZG93LkhUTUxJbXBvcnRzJiYoQ3VzdG9tRWxlbWVudHMuZWxhcHNlZD1DdXN0b21FbGVtZW50cy5yZWFkeVRpbWUtSFRNTEltcG9ydHMucmVhZHlUaW1lKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiV2ViQ29tcG9uZW50c1JlYWR5Iix7YnViYmxlczohMH0pKSx3aW5kb3cuSFRNTEltcG9ydHMmJihIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vaz1mdW5jdGlvbihhKXtDdXN0b21FbGVtZW50cy5wYXJzZXIucGFyc2UoYS5pbXBvcnQpfSl9KX1pZigiZnVuY3Rpb24iIT10eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50JiYod2luZG93LkN1c3RvbUV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGIuaW5pdEV2ZW50KGEsITAsITApLGJ9KSwiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8YS5mbGFncy5lYWdlciliKCk7ZWxzZSBpZigiaW50ZXJhY3RpdmUiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8d2luZG93LmF0dGFjaEV2ZW50fHx3aW5kb3cuSFRNTEltcG9ydHMmJiF3aW5kb3cuSFRNTEltcG9ydHMucmVhZHkpe3ZhciBjPXdpbmRvdy5IVE1MSW1wb3J0cyYmIUhUTUxJbXBvcnRzLnJlYWR5PyJIVE1MSW1wb3J0c0xvYWRlZCI6IkRPTUNvbnRlbnRMb2FkZWQiO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKGMsYil9ZWxzZSBiKCl9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oKXtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe3ZhciBhPVsidXBncmFkZUFsbCIsInVwZ3JhZGVTdWJ0cmVlIiwib2JzZXJ2ZURvY3VtZW50IiwidXBncmFkZURvY3VtZW50Il0sYj17fTthLmZvckVhY2goZnVuY3Rpb24oYSl7YlthXT1DdXN0b21FbGVtZW50c1thXX0pLGEuZm9yRWFjaChmdW5jdGlvbihhKXtDdXN0b21FbGVtZW50c1thXT1mdW5jdGlvbihjKXtyZXR1cm4gYlthXSh3cmFwKGMpKX19KX19KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt0aGlzLnJlZ2V4PWF9dmFyIGM9YS5lbmRPZk1pY3JvdGFzaztiLnByb3RvdHlwZT17ZXh0cmFjdFVybHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPVtdO2M9dGhpcy5yZWdleC5leGVjKGEpOylkPW5ldyBVUkwoY1sxXSxiKSxlLnB1c2goe21hdGNoZWQ6Y1swXSx1cmw6ZC5ocmVmfSk7cmV0dXJuIGV9LHByb2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZXh0cmFjdFVybHMoYSxiKTt0aGlzLmZldGNoKGQse30sYyl9LGZldGNoOmZ1bmN0aW9uKGEsYixkKXt2YXIgZT1hLmxlbmd0aDtpZighZSlyZXR1cm4gZChiKTtmb3IodmFyIGYsZyxoLGk9ZnVuY3Rpb24oKXswPT09LS1lJiZkKGIpfSxqPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yy5tYXRjaCxlPWQudXJsO2lmKGEpcmV0dXJuIGJbZV09IiIsaSgpOwp2YXIgZj1jLnJlc3BvbnNlfHxjLnJlc3BvbnNlVGV4dDtiW2VdPWYsdGhpcy5mZXRjaCh0aGlzLmV4dHJhY3RVcmxzKGYsZSksYixpKX0saz0wO2U+aztrKyspZj1hW2tdLGg9Zi51cmwsYltoXT9jKGkpOihnPXRoaXMueGhyKGgsaix0aGlzKSxnLm1hdGNoPWYsYltoXT1nKX0seGhyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuIGQub3BlbigiR0VUIixhLCEwKSxkLnNlbmQoKSxkLm9ubG9hZD1mdW5jdGlvbigpe2IuY2FsbChjLG51bGwsZCl9LGQub25lcnJvcj1mdW5jdGlvbigpe2IuY2FsbChjLG51bGwsZCl9LGR9fSxhLkxvYWRlcj1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLmxvYWRlcj1uZXcgZCh0aGlzLnJlZ2V4KX12YXIgYz1hLnVybFJlc29sdmVyLGQ9YS5Mb2FkZXI7Yi5wcm90b3R5cGU9e3JlZ2V4Oi9AaW1wb3J0XHMrKD86dXJsKT9bIidcKF0qKFteJyJcKV0qKVsnIlwpXSo7L2cscmVzb2x2ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oZCl7Yyh0aGlzLmZsYXR0ZW4oYSxiLGQpKX0uYmluZCh0aGlzKTt0aGlzLmxvYWRlci5wcm9jZXNzKGEsYixkKX0scmVzb2x2ZU5vZGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRleHRDb250ZW50LGQ9YS5vd25lckRvY3VtZW50LmJhc2VVUkksZT1mdW5jdGlvbihjKXthLnRleHRDb250ZW50PWMsYihhKX07dGhpcy5yZXNvbHZlKGMsZCxlKX0sZmxhdHRlbjpmdW5jdGlvbihhLGIsZCl7Zm9yKHZhciBlLGYsZyxoPXRoaXMubG9hZGVyLmV4dHJhY3RVcmxzKGEsYiksaT0wO2k8aC5sZW5ndGg7aSsrKWU9aFtpXSxmPWUudXJsLGc9Yy5yZXNvbHZlQ3NzVGV4dChkW2ZdLGYpLGc9dGhpcy5mbGF0dGVuKGcsZixkKSxhPWEucmVwbGFjZShlLm1hdGNoZWQsZyk7cmV0dXJuIGF9LGxvYWRTdHlsZXM6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7ZSsrLGU9PT1mJiZiJiZiKCl9Zm9yKHZhciBkLGU9MCxmPWEubGVuZ3RoLGc9MDtmPmcmJihkPWFbZ10pO2crKyl0aGlzLnJlc29sdmVOb2RlKGQsYyl9fTt2YXIgZT1uZXcgYjthLnN0eWxlUmVzb2x2ZXI9ZX0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXthPWF8fHt9LGEuZXh0ZXJuYWw9YS5leHRlcm5hbHx8e307dmFyIGI9e3NoYWRvdzpmdW5jdGlvbihhKXtyZXR1cm4gYT9hLnNoYWRvd1Jvb3R8fGEud2Via2l0U2hhZG93Um9vdDp2b2lkIDB9LGNhblRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gYSYmQm9vbGVhbihhLmVsZW1lbnRGcm9tUG9pbnQpfSx0YXJnZXRpbmdTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zaGFkb3coYSk7cmV0dXJuIHRoaXMuY2FuVGFyZ2V0KGIpP2I6dm9pZCAwfSxvbGRlclNoYWRvdzpmdW5jdGlvbihhKXt2YXIgYj1hLm9sZGVyU2hhZG93Um9vdDtpZighYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yKCJzaGFkb3ciKTtjJiYoYj1jLm9sZGVyU2hhZG93Um9vdCl9cmV0dXJuIGJ9LGFsbFNoYWRvd3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9dGhpcy5zaGFkb3coYSk7YzspYi5wdXNoKGMpLGM9dGhpcy5vbGRlclNoYWRvdyhjKTtyZXR1cm4gYn0sc2VhcmNoUm9vdDpmdW5jdGlvbihhLGIsYyl7aWYoYSl7dmFyIGQsZSxmPWEuZWxlbWVudEZyb21Qb2ludChiLGMpO2ZvcihlPXRoaXMudGFyZ2V0aW5nU2hhZG93KGYpO2U7KXtpZihkPWUuZWxlbWVudEZyb21Qb2ludChiLGMpKXt2YXIgZz10aGlzLnRhcmdldGluZ1NoYWRvdyhkKTtyZXR1cm4gdGhpcy5zZWFyY2hSb290KGcsYixjKXx8ZH1lPXRoaXMub2xkZXJTaGFkb3coZSl9cmV0dXJuIGZ9fSxvd25lcjpmdW5jdGlvbihhKXtmb3IodmFyIGI9YTtiLnBhcmVudE5vZGU7KWI9Yi5wYXJlbnROb2RlO3JldHVybiBiLm5vZGVUeXBlIT1Ob2RlLkRPQ1VNRU5UX05PREUmJmIubm9kZVR5cGUhPU5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSYmKGI9ZG9jdW1lbnQpLGJ9LGZpbmRUYXJnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5jbGllbnRYLGM9YS5jbGllbnRZLGQ9dGhpcy5vd25lcihhLnRhcmdldCk7cmV0dXJuIGQuZWxlbWVudEZyb21Qb2ludChiLGMpfHwoZD1kb2N1bWVudCksdGhpcy5zZWFyY2hSb290KGQsYixjKX19O2EudGFyZ2V0RmluZGluZz1iLGEuZmluZFRhcmdldD1iLmZpbmRUYXJnZXQuYmluZChiKSx3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsPWF9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4iYm9keSAvc2hhZG93LWRlZXAvICIrYihhKX1mdW5jdGlvbiBiKGEpe3JldHVybidbdG91Y2gtYWN0aW9uPSInK2ErJyJdJ31mdW5jdGlvbiBjKGEpe3JldHVybiJ7IC1tcy10b3VjaC1hY3Rpb246ICIrYSsiOyB0b3VjaC1hY3Rpb246ICIrYSsiOyB0b3VjaC1hY3Rpb24tZGVsYXk6IG5vbmU7IH0ifXZhciBkPVsibm9uZSIsImF1dG8iLCJwYW4teCIsInBhbi15Iix7cnVsZToicGFuLXggcGFuLXkiLHNlbGVjdG9yczpbInBhbi14IHBhbi15IiwicGFuLXkgcGFuLXgiXX1dLGU9IiIsZj0oZG9jdW1lbnQuaGVhZCx3aW5kb3cuUG9pbnRlckV2ZW50fHx3aW5kb3cuTVNQb2ludGVyRXZlbnQpLGc9IXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmZG9jdW1lbnQuaGVhZC5jcmVhdGVTaGFkb3dSb290O2lmKGYpe2QuZm9yRWFjaChmdW5jdGlvbihkKXtTdHJpbmcoZCk9PT1kPyhlKz1iKGQpK2MoZCkrIlxuIixnJiYoZSs9YShkKStjKGQpKyJcbiIpKTooZSs9ZC5zZWxlY3RvcnMubWFwKGIpK2MoZC5ydWxlKSsiXG4iLGcmJihlKz1kLnNlbGVjdG9ycy5tYXAoYSkrYyhkLnJ1bGUpKyJcbiIpKX0pO3ZhciBoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7aC50ZXh0Q29udGVudD1lLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoaCl9fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtiPWJ8fE9iamVjdC5jcmVhdGUobnVsbCk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50Iik7ZS5pbml0RXZlbnQoYSxiLmJ1YmJsZXN8fCExLGIuY2FuY2VsYWJsZXx8ITEpO2Zvcih2YXIgZixnPTA7ZzxjLmxlbmd0aDtnKyspZj1jW2ddLGVbZl09YltmXXx8ZFtnXTtlLmJ1dHRvbnM9Yi5idXR0b25zfHwwO3ZhciBoPTA7cmV0dXJuIGg9Yi5wcmVzc3VyZT9iLnByZXNzdXJlOmUuYnV0dG9ucz8uNTowLGUueD1lLmNsaWVudFgsZS55PWUuY2xpZW50WSxlLnBvaW50ZXJJZD1iLnBvaW50ZXJJZHx8MCxlLndpZHRoPWIud2lkdGh8fDAsZS5oZWlnaHQ9Yi5oZWlnaHR8fDAsZS5wcmVzc3VyZT1oLGUudGlsdFg9Yi50aWx0WHx8MCxlLnRpbHRZPWIudGlsdFl8fDAsZS5wb2ludGVyVHlwZT1iLnBvaW50ZXJUeXBlfHwiIixlLmh3VGltZXN0YW1wPWIuaHdUaW1lc3RhbXB8fDAsZS5pc1ByaW1hcnk9Yi5pc1ByaW1hcnl8fCExLGV9dmFyIGM9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiLCJwYWdlWCIsInBhZ2VZIl0sZD1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMF07YS5Qb2ludGVyRXZlbnR8fChhLlBvaW50ZXJFdmVudD1iKX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoYyl7dmFyIGE9bmV3IE1hcDtyZXR1cm4gYS5wb2ludGVycz1kLGF9dGhpcy5rZXlzPVtdLHRoaXMudmFsdWVzPVtdfXZhciBjPXdpbmRvdy5NYXAmJndpbmRvdy5NYXAucHJvdG90eXBlLmZvckVhY2gsZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9O2IucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTtjPi0xP3RoaXMudmFsdWVzW2NdPWI6KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMua2V5cy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnZhbHVlc1tiXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmtleXMubGVuZ3RoPTAsdGhpcy52YWx1ZXMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLmtleXNbZF0sdGhpcyl9LHRoaXMpfSxwb2ludGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleXMubGVuZ3RofX0sYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPVsiYnViYmxlcyIsImNhbmNlbGFibGUiLCJ2aWV3IiwiZGV0YWlsIiwic2NyZWVuWCIsInNjcmVlblkiLCJjbGllbnRYIiwiY2xpZW50WSIsImN0cmxLZXkiLCJhbHRLZXkiLCJzaGlmdEtleSIsIm1ldGFLZXkiLCJidXR0b24iLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9ucyIsInBvaW50ZXJJZCIsIndpZHRoIiwiaGVpZ2h0IiwicHJlc3N1cmUiLCJ0aWx0WCIsInRpbHRZIiwicG9pbnRlclR5cGUiLCJod1RpbWVzdGFtcCIsImlzUHJpbWFyeSIsInR5cGUiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0Iiwid2hpY2giLCJwYWdlWCIsInBhZ2VZIl0sYz1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMCwwLDAsMCwwLDAsIiIsMCwhMSwiIixudWxsLG51bGwsMCwwLDBdLGQ9InVuZGVmaW5lZCIhPXR5cGVvZiBTVkdFbGVtZW50SW5zdGFuY2UsZT17cG9pbnRlcm1hcDpuZXcgYS5Qb2ludGVyTWFwLGV2ZW50TWFwOk9iamVjdC5jcmVhdGUobnVsbCksY2FwdHVyZUluZm86T2JqZWN0LmNyZWF0ZShudWxsKSxldmVudFNvdXJjZXM6T2JqZWN0LmNyZWF0ZShudWxsKSxldmVudFNvdXJjZUxpc3Q6W10scmVnaXN0ZXJTb3VyY2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLGQ9Yy5ldmVudHM7ZCYmKGQuZm9yRWFjaChmdW5jdGlvbihhKXtjW2FdJiYodGhpcy5ldmVudE1hcFthXT1jW2FdLmJpbmQoYykpfSx0aGlzKSx0aGlzLmV2ZW50U291cmNlc1thXT1jLHRoaXMuZXZlbnRTb3VyY2VMaXN0LnB1c2goYykpfSxyZWdpc3RlcjpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmV2ZW50U291cmNlTGlzdC5sZW5ndGgsZD0wO2M+ZCYmKGI9dGhpcy5ldmVudFNvdXJjZUxpc3RbZF0pO2QrKyliLnJlZ2lzdGVyLmNhbGwoYixhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmV2ZW50U291cmNlTGlzdC5sZW5ndGgsZD0wO2M+ZCYmKGI9dGhpcy5ldmVudFNvdXJjZUxpc3RbZF0pO2QrKyliLnVucmVnaXN0ZXIuY2FsbChiLGEpfSxjb250YWluczphLmV4dGVybmFsLmNvbnRhaW5zfHxmdW5jdGlvbihhLGIpe3JldHVybiBhLmNvbnRhaW5zKGIpfSxkb3duOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcmRvd24iLGEpfSxtb3ZlOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcm1vdmUiLGEpfSx1cDpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITAsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJ1cCIsYSl9LGVudGVyOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMSx0aGlzLmZpcmVFdmVudCgicG9pbnRlcmVudGVyIixhKX0sbGVhdmU6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSExLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVybGVhdmUiLGEpfSxvdmVyOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcm92ZXIiLGEpfSxvdXQ6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSEwLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyb3V0IixhKX0sY2FuY2VsOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcmNhbmNlbCIsYSl9LGxlYXZlT3V0OmZ1bmN0aW9uKGEpe3RoaXMub3V0KGEpLHRoaXMuY29udGFpbnMoYS50YXJnZXQsYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5sZWF2ZShhKX0sZW50ZXJPdmVyOmZ1bmN0aW9uKGEpe3RoaXMub3ZlcihhKSx0aGlzLmNvbnRhaW5zKGEudGFyZ2V0LGEucmVsYXRlZFRhcmdldCl8fHRoaXMuZW50ZXIoYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighYS5faGFuZGxlZEJ5UEUpe3ZhciBiPWEudHlwZSxjPXRoaXMuZXZlbnRNYXAmJnRoaXMuZXZlbnRNYXBbYl07YyYmYyhhKSxhLl9oYW5kbGVkQnlQRT0hMH19LGxpc3RlbjpmdW5jdGlvbihhLGIpe2IuZm9yRWFjaChmdW5jdGlvbihiKXt0aGlzLmFkZEV2ZW50KGEsYil9LHRoaXMpfSx1bmxpc3RlbjpmdW5jdGlvbihhLGIpe2IuZm9yRWFjaChmdW5jdGlvbihiKXt0aGlzLnJlbW92ZUV2ZW50KGEsYil9LHRoaXMpfSxhZGRFdmVudDphLmV4dGVybmFsLmFkZEV2ZW50fHxmdW5jdGlvbihhLGIpe2EuYWRkRXZlbnRMaXN0ZW5lcihiLHRoaXMuYm91bmRIYW5kbGVyKX0scmVtb3ZlRXZlbnQ6YS5leHRlcm5hbC5yZW1vdmVFdmVudHx8ZnVuY3Rpb24oYSxiKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoYix0aGlzLmJvdW5kSGFuZGxlcil9LG1ha2VFdmVudDpmdW5jdGlvbihhLGIpe3RoaXMuY2FwdHVyZUluZm9bYi5wb2ludGVySWRdJiYoYi5yZWxhdGVkVGFyZ2V0PW51bGwpO3ZhciBjPW5ldyBQb2ludGVyRXZlbnQoYSxiKTtyZXR1cm4gYi5wcmV2ZW50RGVmYXVsdCYmKGMucHJldmVudERlZmF1bHQ9Yi5wcmV2ZW50RGVmYXVsdCksYy5fdGFyZ2V0PWMuX3RhcmdldHx8Yi50YXJnZXQsY30sZmlyZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tYWtlRXZlbnQoYSxiKTtyZXR1cm4gdGhpcy5kaXNwYXRjaEV2ZW50KGMpfSxjbG9uZUV2ZW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgZSxmPU9iamVjdC5jcmVhdGUobnVsbCksZz0wO2c8Yi5sZW5ndGg7ZysrKWU9YltnXSxmW2VdPWFbZV18fGNbZ10sIWR8fCJ0YXJnZXQiIT09ZSYmInJlbGF0ZWRUYXJnZXQiIT09ZXx8ZltlXWluc3RhbmNlb2YgU1ZHRWxlbWVudEluc3RhbmNlJiYoZltlXT1mW2VdLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KTtyZXR1cm4gYS5wcmV2ZW50RGVmYXVsdCYmKGYucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXthLnByZXZlbnREZWZhdWx0KCl9KSxmfSxnZXRUYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2FwdHVyZUluZm9bYS5wb2ludGVySWRdfHxhLl90YXJnZXR9LHNldENhcHR1cmU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhcHR1cmVJbmZvW2FdJiZ0aGlzLnJlbGVhc2VDYXB0dXJlKGEpLHRoaXMuY2FwdHVyZUluZm9bYV09Yjt2YXIgYz1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKTtjLmluaXRFdmVudCgiZ290cG9pbnRlcmNhcHR1cmUiLCEwLCExKSxjLnBvaW50ZXJJZD1hLHRoaXMuaW1wbGljaXRSZWxlYXNlPXRoaXMucmVsZWFzZUNhcHR1cmUuYmluZCh0aGlzLGEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJjYW5jZWwiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSxjLl90YXJnZXQ9Yix0aGlzLmFzeW5jRGlzcGF0Y2hFdmVudChjKX0scmVsZWFzZUNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jYXB0dXJlSW5mb1thXTtpZihiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKTtjLmluaXRFdmVudCgibG9zdHBvaW50ZXJjYXB0dXJlIiwhMCwhMSksYy5wb2ludGVySWQ9YSx0aGlzLmNhcHR1cmVJbmZvW2FdPXZvaWQgMCxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyY2FuY2VsIix0aGlzLmltcGxpY2l0UmVsZWFzZSksYy5fdGFyZ2V0PWIsdGhpcy5hc3luY0Rpc3BhdGNoRXZlbnQoYyl9fSxkaXNwYXRjaEV2ZW50OmEuZXh0ZXJuYWwuZGlzcGF0Y2hFdmVudHx8ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRUYXJnZXQoYSk7cmV0dXJuIGI/Yi5kaXNwYXRjaEV2ZW50KGEpOnZvaWQgMH0sYXN5bmNEaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3JlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmRpc3BhdGNoRXZlbnQuYmluZCh0aGlzLGEpKX19O2UuYm91bmRIYW5kbGVyPWUuZXZlbnRIYW5kbGVyLmJpbmQoZSksYS5kaXNwYXRjaGVyPWUsYS5yZWdpc3Rlcj1lLnJlZ2lzdGVyLmJpbmQoZSksYS51bnJlZ2lzdGVyPWUudW5yZWdpc3Rlci5iaW5kKGUpfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjLGQpe3RoaXMuYWRkQ2FsbGJhY2s9YS5iaW5kKGQpLHRoaXMucmVtb3ZlQ2FsbGJhY2s9Yi5iaW5kKGQpLHRoaXMuY2hhbmdlZENhbGxiYWNrPWMuYmluZChkKSxnJiYodGhpcy5vYnNlcnZlcj1uZXcgZyh0aGlzLm11dGF0aW9uV2F0Y2hlci5iaW5kKHRoaXMpKSl9dmFyIGM9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxkPUFycmF5LnByb3RvdHlwZS5tYXAuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5tYXApLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuc2xpY2UpLGY9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZpbHRlciksZz13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsaD0iW3RvdWNoLWFjdGlvbl0iLGk9e3N1YnRyZWU6ITAsY2hpbGRMaXN0OiEwLGF0dHJpYnV0ZXM6ITAsYXR0cmlidXRlT2xkVmFsdWU6ITAsYXR0cmlidXRlRmlsdGVyOlsidG91Y2gtYWN0aW9uIl19O2IucHJvdG90eXBlPXt3YXRjaFN1YnRyZWU6ZnVuY3Rpb24oYil7YS50YXJnZXRGaW5kaW5nLmNhblRhcmdldChiKSYmdGhpcy5vYnNlcnZlci5vYnNlcnZlKGIsaSl9LGVuYWJsZU9uU3VidHJlZTpmdW5jdGlvbihhKXt0aGlzLndhdGNoU3VidHJlZShhKSxhPT09ZG9jdW1lbnQmJiJjb21wbGV0ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlP3RoaXMuaW5zdGFsbE9uTG9hZCgpOnRoaXMuaW5zdGFsbE5ld1N1YnRyZWUoYSl9LGluc3RhbGxOZXdTdWJ0cmVlOmZ1bmN0aW9uKGEpe2ModGhpcy5maW5kRWxlbWVudHMoYSksdGhpcy5hZGRFbGVtZW50LHRoaXMpfSxmaW5kRWxlbWVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoaCk6W119LHJlbW92ZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVDYWxsYmFjayhhKX0sYWRkRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLmFkZENhbGxiYWNrKGEpfSxlbGVtZW50Q2hhbmdlZDpmdW5jdGlvbihhLGIpe3RoaXMuY2hhbmdlZENhbGxiYWNrKGEsYil9LGNvbmNhdExpc3RzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29uY2F0KGUoYikpfSxpbnN0YWxsT25Mb2FkOmZ1bmN0aW9uKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsZnVuY3Rpb24oKXsiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmdGhpcy5pbnN0YWxsTmV3U3VidHJlZShkb2N1bWVudCl9LmJpbmQodGhpcykpfSxpc0VsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERX0sZmxhdHRlbk11dGF0aW9uVHJlZTpmdW5jdGlvbihhKXt2YXIgYj1kKGEsdGhpcy5maW5kRWxlbWVudHMsdGhpcyk7cmV0dXJuIGIucHVzaChmKGEsdGhpcy5pc0VsZW1lbnQpKSxiLnJlZHVjZSh0aGlzLmNvbmNhdExpc3RzLFtdKX0sbXV0YXRpb25XYXRjaGVyOmZ1bmN0aW9uKGEpe2EuZm9yRWFjaCh0aGlzLm11dGF0aW9uSGFuZGxlcix0aGlzKX0sbXV0YXRpb25IYW5kbGVyOmZ1bmN0aW9uKGEpe2lmKCJjaGlsZExpc3QiPT09YS50eXBlKXt2YXIgYj10aGlzLmZsYXR0ZW5NdXRhdGlvblRyZWUoYS5hZGRlZE5vZGVzKTtiLmZvckVhY2godGhpcy5hZGRFbGVtZW50LHRoaXMpO3ZhciBjPXRoaXMuZmxhdHRlbk11dGF0aW9uVHJlZShhLnJlbW92ZWROb2Rlcyk7Yy5mb3JFYWNoKHRoaXMucmVtb3ZlRWxlbWVudCx0aGlzKX1lbHNlImF0dHJpYnV0ZXMiPT09YS50eXBlJiZ0aGlzLmVsZW1lbnRDaGFuZ2VkKGEudGFyZ2V0LGEub2xkVmFsdWUpfX0sZ3x8KGIucHJvdG90eXBlLndhdGNoU3VidHJlZT1mdW5jdGlvbigpe2NvbnNvbGUud2FybigiUG9pbnRlckV2ZW50c1BvbHlmaWxsOiBNdXRhdGlvbk9ic2VydmVycyBub3QgZm91bmQsIHRvdWNoLWFjdGlvbiB3aWxsIG5vdCBiZSBkeW5hbWljYWxseSBkZXRlY3RlZCIpfSksYS5JbnN0YWxsZXI9Yn0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9MjUsZT1bMCwxLDQsMl0sZj0hMTt0cnl7Zj0xPT09bmV3IE1vdXNlRXZlbnQoInRlc3QiLHtidXR0b25zOjF9KS5idXR0b25zfWNhdGNoKGcpe312YXIgaD17UE9JTlRFUl9JRDoxLFBPSU5URVJfVFlQRToibW91c2UiLGV2ZW50czpbIm1vdXNlZG93biIsIm1vdXNlbW92ZSIsIm1vdXNldXAiLCJtb3VzZW92ZXIiLCJtb3VzZW91dCJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LGxhc3RUb3VjaGVzOltdLGlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2g6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5sYXN0VG91Y2hlcyxlPWEuY2xpZW50WCxmPWEuY2xpZW50WSxnPTAsaD1jLmxlbmd0aDtoPmcmJihiPWNbZ10pO2crKyl7dmFyIGk9TWF0aC5hYnMoZS1iLngpLGo9TWF0aC5hYnMoZi1iLnkpO2lmKGQ+PWkmJmQ+PWopcmV0dXJuITB9fSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5jbG9uZUV2ZW50KGEpLGQ9Yy5wcmV2ZW50RGVmYXVsdDtyZXR1cm4gYy5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2EucHJldmVudERlZmF1bHQoKSxkKCl9LGMucG9pbnRlcklkPXRoaXMuUE9JTlRFUl9JRCxjLmlzUHJpbWFyeT0hMCxjLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFLGZ8fChjLmJ1dHRvbnM9ZVtjLndoaWNoXXx8MCksY30sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuaGFzKHRoaXMuUE9JTlRFUl9JRCk7ZCYmdGhpcy5jYW5jZWwoYSk7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yy5zZXQodGhpcy5QT0lOVEVSX0lELGEpLGIuZG93bihlKX19LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9fSxtb3VzZXVwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuZ2V0KHRoaXMuUE9JTlRFUl9JRCk7aWYoZCYmZC5idXR0b249PT1hLmJ1dHRvbil7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi51cChlKSx0aGlzLmNsZWFudXBNb3VzZSgpfX19LG1vdXNlb3ZlcjpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmVudGVyT3ZlcihjKX19LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9fSxjYW5jZWw6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5jYW5jZWwoYyksdGhpcy5jbGVhbnVwTW91c2UoKX0sY2xlYW51cE1vdXNlOmZ1bmN0aW9uKCl7Y1siZGVsZXRlIl0odGhpcy5QT0lOVEVSX0lEKX19O2EubW91c2VFdmVudHM9aH0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGIsYz1hLmRpc3BhdGNoZXIsZD1jLmNhcHR1cmVJbmZvLGU9YS5maW5kVGFyZ2V0LGY9YS50YXJnZXRGaW5kaW5nLmFsbFNoYWRvd3MuYmluZChhLnRhcmdldEZpbmRpbmcpLGc9Yy5wb2ludGVybWFwLGg9KEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5tYXApLDI1MDApLGk9MjAwLGo9InRvdWNoLWFjdGlvbiIsaz0hMSxsPXtldmVudHM6WyJ0b3VjaHN0YXJ0IiwidG91Y2htb3ZlIiwidG91Y2hlbmQiLCJ0b3VjaGNhbmNlbCJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2s/Yy5saXN0ZW4oYSx0aGlzLmV2ZW50cyk6Yi5lbmFibGVPblN1YnRyZWUoYSl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7ayYmYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sZWxlbWVudEFkZGVkOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKGopLGQ9dGhpcy50b3VjaEFjdGlvblRvU2Nyb2xsVHlwZShiKTtkJiYoYS5fc2Nyb2xsVHlwZT1kLGMubGlzdGVuKGEsdGhpcy5ldmVudHMpLGYoYSkuZm9yRWFjaChmdW5jdGlvbihhKXthLl9zY3JvbGxUeXBlPWQsYy5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHRoaXMpKX0sZWxlbWVudFJlbW92ZWQ6ZnVuY3Rpb24oYSl7YS5fc2Nyb2xsVHlwZT12b2lkIDAsYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKSxmKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7YS5fc2Nyb2xsVHlwZT12b2lkIDAsYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcyl9LGVsZW1lbnRDaGFuZ2VkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoaiksZD10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGMpLGU9dGhpcy50b3VjaEFjdGlvblRvU2Nyb2xsVHlwZShiKTtkJiZlPyhhLl9zY3JvbGxUeXBlPWQsZihhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuX3Njcm9sbFR5cGU9ZH0sdGhpcykpOmU/dGhpcy5lbGVtZW50UmVtb3ZlZChhKTpkJiZ0aGlzLmVsZW1lbnRBZGRlZChhKX0sc2Nyb2xsVHlwZXM6e0VNSVRURVI6Im5vbmUiLFhTQ1JPTExFUjoicGFuLXgiLFlTQ1JPTExFUjoicGFuLXkiLFNDUk9MTEVSOi9eKD86cGFuLXggcGFuLXkpfCg/OnBhbi15IHBhbi14KXxhdXRvJC99LHRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWEsYz10aGlzLnNjcm9sbFR5cGVzO3JldHVybiJub25lIj09PWI/Im5vbmUiOmI9PT1jLlhTQ1JPTExFUj8iWCI6Yj09PWMuWVNDUk9MTEVSPyJZIjpjLlNDUk9MTEVSLmV4ZWMoYik/IlhZIjp2b2lkIDB9LFBPSU5URVJfVFlQRToidG91Y2giLGZpcnN0VG91Y2g6bnVsbCxpc1ByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5maXJzdFRvdWNoPT09YS5pZGVudGlmaWVyfSxzZXRQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7KDA9PT1nLnBvaW50ZXJzKCl8fDE9PT1nLnBvaW50ZXJzKCkmJmcuaGFzKDEpKSYmKHRoaXMuZmlyc3RUb3VjaD1hLmlkZW50aWZpZXIsdGhpcy5maXJzdFhZPXtYOmEuY2xpZW50WCxZOmEuY2xpZW50WX0sdGhpcy5zY3JvbGxpbmc9ITEsdGhpcy5jYW5jZWxSZXNldENsaWNrQ291bnQoKSl9LHJlbW92ZVByaW1hcnlQb2ludGVyOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYodGhpcy5maXJzdFRvdWNoPW51bGwsdGhpcy5maXJzdFhZPW51bGwsdGhpcy5yZXNldENsaWNrQ291bnQoKSl9LGNsaWNrQ291bnQ6MCxyZXNldElkOm51bGwscmVzZXRDbGlja0NvdW50OmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oKXt0aGlzLmNsaWNrQ291bnQ9MCx0aGlzLnJlc2V0SWQ9bnVsbH0uYmluZCh0aGlzKTt0aGlzLnJlc2V0SWQ9c2V0VGltZW91dChhLGkpfSxjYW5jZWxSZXNldENsaWNrQ291bnQ6ZnVuY3Rpb24oKXt0aGlzLnJlc2V0SWQmJmNsZWFyVGltZW91dCh0aGlzLnJlc2V0SWQpfSx0eXBlVG9CdXR0b25zOmZ1bmN0aW9uKGEpe3ZhciBiPTA7cmV0dXJuKCJ0b3VjaHN0YXJ0Ij09PWF8fCJ0b3VjaG1vdmUiPT09YSkmJihiPTEpLGJ9LHRvdWNoVG9Qb2ludGVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3VycmVudFRvdWNoRXZlbnQsZj1jLmNsb25lRXZlbnQoYSksZz1mLnBvaW50ZXJJZD1hLmlkZW50aWZpZXIrMjtmLnRhcmdldD1kW2ddfHxlKGYpLGYuYnViYmxlcz0hMCxmLmNhbmNlbGFibGU9ITAsZi5kZXRhaWw9dGhpcy5jbGlja0NvdW50LGYuYnV0dG9uPTAsZi5idXR0b25zPXRoaXMudHlwZVRvQnV0dG9ucyhiLnR5cGUpLGYud2lkdGg9YS53ZWJraXRSYWRpdXNYfHxhLnJhZGl1c1h8fDAsZi5oZWlnaHQ9YS53ZWJraXRSYWRpdXNZfHxhLnJhZGl1c1l8fDAsZi5wcmVzc3VyZT1hLndlYmtpdEZvcmNlfHxhLmZvcmNlfHwuNSxmLmlzUHJpbWFyeT10aGlzLmlzUHJpbWFyeVRvdWNoKGEpLGYucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEU7dmFyIGg9dGhpcztyZXR1cm4gZi5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2guc2Nyb2xsaW5nPSExLGguZmlyc3RYWT1udWxsLGIucHJldmVudERlZmF1bHQoKX0sZn0scHJvY2Vzc1RvdWNoZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNoYW5nZWRUb3VjaGVzO3RoaXMuY3VycmVudFRvdWNoRXZlbnQ9YTtmb3IodmFyIGQsZT0wO2U8Yy5sZW5ndGg7ZSsrKWQ9Y1tlXSxiLmNhbGwodGhpcyx0aGlzLnRvdWNoVG9Qb2ludGVyKGQpKX0sc2hvdWxkU2Nyb2xsOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZmlyc3RYWSl7dmFyIGIsYz1hLmN1cnJlbnRUYXJnZXQuX3Njcm9sbFR5cGU7aWYoIm5vbmUiPT09YyliPSExO2Vsc2UgaWYoIlhZIj09PWMpYj0hMDtlbHNle3ZhciBkPWEuY2hhbmdlZFRvdWNoZXNbMF0sZT1jLGY9IlkiPT09Yz8iWCI6IlkiLGc9TWF0aC5hYnMoZFsiY2xpZW50IitlXS10aGlzLmZpcnN0WFlbZV0pLGg9TWF0aC5hYnMoZFsiY2xpZW50IitmXS10aGlzLmZpcnN0WFlbZl0pO2I9Zz49aH1yZXR1cm4gdGhpcy5maXJzdFhZPW51bGwsYn19LGZpbmRUb3VjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKylpZihjLmlkZW50aWZpZXI9PT1iKXJldHVybiEwfSx2YWN1dW1Ub3VjaGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcztpZihnLnBvaW50ZXJzKCk+PWIubGVuZ3RoKXt2YXIgYz1bXTtnLmZvckVhY2goZnVuY3Rpb24oYSxkKXtpZigxIT09ZCYmIXRoaXMuZmluZFRvdWNoKGIsZC0yKSl7dmFyIGU9YS5vdXQ7Yy5wdXNoKGUpfX0sdGhpcyksYy5mb3JFYWNoKHRoaXMuY2FuY2VsT3V0LHRoaXMpfX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnZhY3V1bVRvdWNoZXMoYSksdGhpcy5zZXRQcmltYXJ5VG91Y2goYS5jaGFuZ2VkVG91Y2hlc1swXSksdGhpcy5kZWR1cFN5bnRoTW91c2UoYSksdGhpcy5zY3JvbGxpbmd8fCh0aGlzLmNsaWNrQ291bnQrKyx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy5vdmVyRG93bikpfSxvdmVyRG93bjpmdW5jdGlvbihhKXtnLnNldChhLnBvaW50ZXJJZCx7dGFyZ2V0OmEudGFyZ2V0LG91dDphLG91dFRhcmdldDphLnRhcmdldH0pO2Mub3ZlcihhKSxjLmVudGVyKGEpLGMuZG93bihhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsaW5nfHwodGhpcy5zaG91bGRTY3JvbGwoYSk/KHRoaXMuc2Nyb2xsaW5nPSEwLHRoaXMudG91Y2hjYW5jZWwoYSkpOihhLnByZXZlbnREZWZhdWx0KCksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZU92ZXJPdXQpKSl9LG1vdmVPdmVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEsZD1nLmdldChiLnBvaW50ZXJJZCk7aWYoZCl7dmFyIGU9ZC5vdXQsZj1kLm91dFRhcmdldDtjLm1vdmUoYiksZSYmZiE9PWIudGFyZ2V0JiYoZS5yZWxhdGVkVGFyZ2V0PWIudGFyZ2V0LGIucmVsYXRlZFRhcmdldD1mLGUudGFyZ2V0PWYsYi50YXJnZXQ/KGMubGVhdmVPdXQoZSksYy5lbnRlck92ZXIoYikpOihiLnRhcmdldD1mLGIucmVsYXRlZFRhcmdldD1udWxsLHRoaXMuY2FuY2VsT3V0KGIpKSksZC5vdXQ9YixkLm91dFRhcmdldD1iLnRhcmdldH19LHRvdWNoZW5kOmZ1bmN0aW9uKGEpe3RoaXMuZGVkdXBTeW50aE1vdXNlKGEpLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLnVwT3V0KX0sdXBPdXQ6ZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxpbmd8fChjLnVwKGEpLGMub3V0KGEpLGMubGVhdmUoYSkpLHRoaXMuY2xlYW5VcFBvaW50ZXIoYSl9LHRvdWNoY2FuY2VsOmZ1bmN0aW9uKGEpe3RoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLmNhbmNlbE91dCl9LGNhbmNlbE91dDpmdW5jdGlvbihhKXtjLmNhbmNlbChhKSxjLm91dChhKSxjLmxlYXZlKGEpLHRoaXMuY2xlYW5VcFBvaW50ZXIoYSl9LGNsZWFuVXBQb2ludGVyOmZ1bmN0aW9uKGEpe2dbImRlbGV0ZSJdKGEucG9pbnRlcklkKSx0aGlzLnJlbW92ZVByaW1hcnlQb2ludGVyKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxkPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChkKSl7dmFyIGU9e3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZfTtjLnB1c2goZSk7dmFyIGY9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZSk7c2V0VGltZW91dChmLGgpfX19O2t8fChiPW5ldyBhLkluc3RhbGxlcihsLmVsZW1lbnRBZGRlZCxsLmVsZW1lbnRSZW1vdmVkLGwuZWxlbWVudENoYW5nZWQsbCkpLGEudG91Y2hFdmVudHM9bH0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyT3V0IiwiTVNQb2ludGVyT3ZlciIsIk1TUG9pbnRlckNhbmNlbCIsIk1TR290UG9pbnRlckNhcHR1cmUiLCJNU0xvc3RQb2ludGVyQ2FwdHVyZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LFBPSU5URVJfVFlQRVM6WyIiLCJ1bmF2YWlsYWJsZSIsInRvdWNoIiwicGVuIiwibW91c2UiXSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9YTtyZXR1cm4gZCYmKGM9Yi5jbG9uZUV2ZW50KGEpLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEVTW2EucG9pbnRlclR5cGVdKSxjfSxjbGVhbnVwOmZ1bmN0aW9uKGEpe2NbImRlbGV0ZSJdKGEpfSxNU1BvaW50ZXJEb3duOmZ1bmN0aW9uKGEpe2Muc2V0KGEucG9pbnRlcklkLGEpO3ZhciBkPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZG93bihkKX0sTVNQb2ludGVyTW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9LE1TUG9pbnRlclVwOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IudXAoYyksdGhpcy5jbGVhbnVwKGEucG9pbnRlcklkKX0sTVNQb2ludGVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9LE1TUG9pbnRlck92ZXI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5lbnRlck92ZXIoYyl9LE1TUG9pbnRlckNhbmNlbDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmNhbmNlbChjKSx0aGlzLmNsZWFudXAoYS5wb2ludGVySWQpfSxNU0xvc3RQb2ludGVyQ2FwdHVyZTpmdW5jdGlvbihhKXt2YXIgYz1iLm1ha2VFdmVudCgibG9zdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9LE1TR290UG9pbnRlckNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5tYWtlRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9fTthLm1zRXZlbnRzPWV9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcjtpZih3aW5kb3cuUG9pbnRlckV2ZW50IT09YS5Qb2ludGVyRXZlbnQpe2lmKHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCl7dmFyIGM9d2luZG93Lm5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cubmF2aWdhdG9yLCJtYXhUb3VjaFBvaW50cyIse3ZhbHVlOmMsZW51bWVyYWJsZTohMH0pLGIucmVnaXN0ZXJTb3VyY2UoIm1zIixhLm1zRXZlbnRzKX1lbHNlIGIucmVnaXN0ZXJTb3VyY2UoIm1vdXNlIixhLm1vdXNlRXZlbnRzKSx2b2lkIDAhPT13aW5kb3cub250b3VjaHN0YXJ0JiZiLnJlZ2lzdGVyU291cmNlKCJ0b3VjaCIsYS50b3VjaEV2ZW50cyk7Yi5yZWdpc3Rlcihkb2N1bWVudCl9fSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2lmKCFlLnBvaW50ZXJtYXAuaGFzKGEpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZFBvaW50ZXJJZCIpfXZhciBjLGQsZT1hLmRpc3BhdGNoZXIsZj13aW5kb3cubmF2aWdhdG9yO2YubXNQb2ludGVyRW5hYmxlZD8oYz1mdW5jdGlvbihhKXtiKGEpLHRoaXMubXNTZXRQb2ludGVyQ2FwdHVyZShhKX0sZD1mdW5jdGlvbihhKXtiKGEpLHRoaXMubXNSZWxlYXNlUG9pbnRlckNhcHR1cmUoYSl9KTooYz1mdW5jdGlvbihhKXtiKGEpLGUuc2V0Q2FwdHVyZShhLHRoaXMpfSxkPWZ1bmN0aW9uKGEpe2IoYSksZS5yZWxlYXNlQ2FwdHVyZShhLHRoaXMpfSksd2luZG93LkVsZW1lbnQmJiFFbGVtZW50LnByb3RvdHlwZS5zZXRQb2ludGVyQ2FwdHVyZSYmT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRWxlbWVudC5wcm90b3R5cGUse3NldFBvaW50ZXJDYXB0dXJlOnt2YWx1ZTpjfSxyZWxlYXNlUG9pbnRlckNhcHR1cmU6e3ZhbHVlOmR9fSl9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLFBvaW50ZXJHZXN0dXJlRXZlbnQucHJvdG90eXBlLnByZXZlbnRUYXA9ZnVuY3Rpb24oKXt0aGlzLnRhcFByZXZlbnRlZD0hMH0sZnVuY3Rpb24oYSl7YT1hfHx7fSxhLnV0aWxzPXtMQ0E6e2ZpbmQ6ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gYTtpZihhLmNvbnRhaW5zKXtpZihhLmNvbnRhaW5zKGIpKXJldHVybiBhO2lmKGIuY29udGFpbnMoYSkpcmV0dXJuIGJ9dmFyIGM9dGhpcy5kZXB0aChhKSxkPXRoaXMuZGVwdGgoYiksZT1jLWQ7Zm9yKGU+MD9hPXRoaXMud2FsayhhLGUpOmI9dGhpcy53YWxrKGIsLWUpO2EmJmImJmEhPT1iOylhPXRoaXMud2FsayhhLDEpLGI9dGhpcy53YWxrKGIsMSk7cmV0dXJuIGF9LHdhbGs6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7YysrKWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxkZXB0aDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDthOyliKyssYT1hLnBhcmVudE5vZGU7cmV0dXJuIGJ9fX0sYS5maW5kTENBPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEudXRpbHMuTENBLmZpbmQoYixjKX0sd2luZG93LlBvaW50ZXJHZXN0dXJlcz1hfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoYyl7dmFyIGE9bmV3IE1hcDtyZXR1cm4gYS5wb2ludGVycz1kLGF9dGhpcy5rZXlzPVtdLHRoaXMudmFsdWVzPVtdfXZhciBjPXdpbmRvdy5NYXAmJndpbmRvdy5NYXAucHJvdG90eXBlLmZvckVhY2gsZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9O2IucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTtjPi0xP3RoaXMudmFsdWVzW2NdPWI6KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMua2V5cy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnZhbHVlc1tiXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmtleXMubGVuZ3RoPTAsdGhpcy52YWx1ZXMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLmtleXNbZF0sdGhpcyl9LHRoaXMpfSxwb2ludGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleXMubGVuZ3RofX0sYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPVsiYnViYmxlcyIsImNhbmNlbGFibGUiLCJ2aWV3IiwiZGV0YWlsIiwic2NyZWVuWCIsInNjcmVlblkiLCJjbGllbnRYIiwiY2xpZW50WSIsImN0cmxLZXkiLCJhbHRLZXkiLCJzaGlmdEtleSIsIm1ldGFLZXkiLCJidXR0b24iLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9ucyIsInBvaW50ZXJJZCIsIndpZHRoIiwiaGVpZ2h0IiwicHJlc3N1cmUiLCJ0aWx0WCIsInRpbHRZIiwicG9pbnRlclR5cGUiLCJod1RpbWVzdGFtcCIsImlzUHJpbWFyeSIsInR5cGUiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0Iiwic2NyZWVuWCIsInNjcmVlblkiLCJwYWdlWCIsInBhZ2VZIiwidGFwUHJldmVudGVkIl0sYz1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMCwwLDAsMCwwLDAsIiIsMCwhMSwiIixudWxsLG51bGwsMCwwLDAsMF0sZD17aGFuZGxlZEV2ZW50czpuZXcgV2Vha01hcCx0YXJnZXRzOm5ldyBXZWFrTWFwLGhhbmRsZXJzOnt9LHJlY29nbml6ZXJzOnt9LGV2ZW50czp7fSxyZWdpc3RlclJlY29nbml6ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iO3RoaXMucmVjb2duaXplcnNbYV09YyxjLmV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKGNbYV0pe3RoaXMuZXZlbnRzW2FdPSEwO3ZhciBiPWNbYV0uYmluZChjKTt0aGlzLmFkZEhhbmRsZXIoYSxiKX19LHRoaXMpfSxhZGRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTt0aGlzLmhhbmRsZXJzW2NdfHwodGhpcy5oYW5kbGVyc1tjXT1bXSksdGhpcy5oYW5kbGVyc1tjXS5wdXNoKGIpfSxyZWdpc3RlclRhcmdldDpmdW5jdGlvbihhKXt0aGlzLmxpc3RlbihPYmplY3Qua2V5cyh0aGlzLmV2ZW50cyksYSl9LHVucmVnaXN0ZXJUYXJnZXQ6ZnVuY3Rpb24oYSl7dGhpcy51bmxpc3RlbihPYmplY3Qua2V5cyh0aGlzLmV2ZW50cyksYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGI9YS50eXBlLGM9dGhpcy5oYW5kbGVyc1tiXTtjJiZ0aGlzLm1ha2VRdWV1ZShjLGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxtYWtlUXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNsb25lRXZlbnQoYik7cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucnVuUXVldWUuYmluZCh0aGlzLGEsYykpfSxydW5RdWV1ZTpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBvaW50ZXJJZD1iLnBvaW50ZXJJZDtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspYyhiKTt0aGlzLmN1cnJlbnRQb2ludGVySWQ9MH0sbGlzdGVuOmZ1bmN0aW9uKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuYWRkRXZlbnQoYSx0aGlzLmJvdW5kSGFuZGxlciwhMSxiKX0sdGhpcyl9LHVubGlzdGVuOmZ1bmN0aW9uKGEpe2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUV2ZW50KGEsdGhpcy5ib3VuZEhhbmRsZXIsITEsaW5UYXJnZXQpfSx0aGlzKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRFdmVudExpc3RlbmVyKGEsYixjKX0scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYixjKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBQb2ludGVyR2VzdHVyZUV2ZW50KGEsYil9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBkLGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKWQ9YltmXSxlW2RdPWFbZF18fGNbZl07cmV0dXJuIGV9LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHx0aGlzLnRhcmdldHMuZ2V0KGEpO2MmJihjLmRpc3BhdGNoRXZlbnQoYSksYS50YXBQcmV2ZW50ZWQmJnRoaXMucHJldmVudFRhcCh0aGlzLmN1cnJlbnRQb2ludGVySWQpKX0sYXN5bmNEaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEsYil7cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZGlzcGF0Y2hFdmVudC5iaW5kKHRoaXMsYSxiKSl9LHByZXZlbnRUYXA6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yZWNvZ25pemVycy50YXA7YiYmYi5wcmV2ZW50VGFwKGEpfX07ZC5ib3VuZEhhbmRsZXI9ZC5ldmVudEhhbmRsZXIuYmluZChkKSxkLnJlZ2lzdGVyUXVldWU9W10sZC5pbW1lZGlhdGVSZWdpc3Rlcj0hMSxhLmRpc3BhdGNoZXI9ZCxhLnJlZ2lzdGVyPWZ1bmN0aW9uKGIpe2lmKGQuaW1tZWRpYXRlUmVnaXN0ZXIpe3ZhciBjPXdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGw7YyYmYy5yZWdpc3RlcihiKSxhLmRpc3BhdGNoZXIucmVnaXN0ZXJUYXJnZXQoYil9ZWxzZSBkLnJlZ2lzdGVyUXVldWUucHVzaChiKX0sYS5yZWdpc3Rlcihkb2N1bWVudCl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPXtIT0xEX0RFTEFZOjIwMCxXSUdHTEVfVEhSRVNIT0xEOjE2LGV2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0saGVsZFBvaW50ZXI6bnVsbCxob2xkSm9iOm51bGwscHVsc2U6ZnVuY3Rpb24oKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMuaGVsZFBvaW50ZXIudGltZVN0YW1wLGI9dGhpcy5oZWxkPyJob2xkcHVsc2UiOiJob2xkIjt0aGlzLmZpcmVIb2xkKGIsYSksdGhpcy5oZWxkPSEwfSxjYW5jZWw6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuaG9sZEpvYiksdGhpcy5oZWxkJiZ0aGlzLmZpcmVIb2xkKCJyZWxlYXNlIiksdGhpcy5oZWxkPSExLHRoaXMuaGVsZFBvaW50ZXI9bnVsbCx0aGlzLnRhcmdldD1udWxsLHRoaXMuaG9sZEpvYj1udWxsfSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIXRoaXMuaGVsZFBvaW50ZXImJih0aGlzLmhlbGRQb2ludGVyPWEsdGhpcy50YXJnZXQ9YS50YXJnZXQsdGhpcy5ob2xkSm9iPXNldEludGVydmFsKHRoaXMucHVsc2UuYmluZCh0aGlzKSx0aGlzLkhPTERfREVMQVkpKX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe3RoaXMuaGVsZFBvaW50ZXImJnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkPT09YS5wb2ludGVySWQmJnRoaXMuY2FuY2VsKCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbCgpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkKXt2YXIgYj1hLmNsaWVudFgtdGhpcy5oZWxkUG9pbnRlci5jbGllbnRYLGM9YS5jbGllbnRZLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WTtiKmIrYypjPnRoaXMuV0lHR0xFX1RIUkVTSE9MRCYmdGhpcy5jYW5jZWwoKX19LGZpcmVIb2xkOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9e3BvaW50ZXJUeXBlOnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlclR5cGUsY2xpZW50WDp0aGlzLmhlbGRQb2ludGVyLmNsaWVudFgsY2xpZW50WTp0aGlzLmhlbGRQb2ludGVyLmNsaWVudFl9O2MmJihkLmhvbGRUaW1lPWMpO3ZhciBlPWIubWFrZUV2ZW50KGEsZCk7Yi5kaXNwYXRjaEV2ZW50KGUsdGhpcy50YXJnZXQpLGUudGFwUHJldmVudGVkJiZiLnByZXZlbnRUYXAodGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoImhvbGQiLGMpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1uZXcgYS5Qb2ludGVyTWFwLGQ9e2V2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0sV0lHR0xFX1RIUkVTSE9MRDo0LGNsYW1wRGlyOmZ1bmN0aW9uKGEpe3JldHVybiBhPjA/MTotMX0sY2FsY1Bvc2l0aW9uRGVsdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYz0wLGQ9MDtyZXR1cm4gYSYmYiYmKGM9Yi5wYWdlWC1hLnBhZ2VYLGQ9Yi5wYWdlWS1hLnBhZ2VZKSx7eDpjLHk6ZH19LGZpcmVUcmFjazpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCxmPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoZS5kb3duRXZlbnQsYyksZz10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUubGFzdE1vdmVFdmVudCxjKTtnLngmJihlLnhEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLngpKSxnLnkmJihlLnlEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLnkpKTt2YXIgaD17ZHg6Zi54LGR5OmYueSxkZHg6Zy54LGRkeTpnLnksY2xpZW50WDpjLmNsaWVudFgsY2xpZW50WTpjLmNsaWVudFkscGFnZVg6Yy5wYWdlWCxwYWdlWTpjLnBhZ2VZLHNjcmVlblg6Yy5zY3JlZW5YLHNjcmVlblk6Yy5zY3JlZW5ZLHhEaXJlY3Rpb246ZS54RGlyZWN0aW9uLHlEaXJlY3Rpb246ZS55RGlyZWN0aW9uLHRyYWNrSW5mbzplLnRyYWNrSW5mbyxyZWxhdGVkVGFyZ2V0OmMudGFyZ2V0LHBvaW50ZXJUeXBlOmMucG9pbnRlclR5cGV9LGk9Yi5tYWtlRXZlbnQoYSxoKTtlLmxhc3RNb3ZlRXZlbnQ9YyxiLmRpc3BhdGNoRXZlbnQoaSxlLmRvd25UYXJnZXQpfSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSYmKCJtb3VzZSI9PT1hLnBvaW50ZXJUeXBlPzE9PT1hLmJ1dHRvbnM6ITApKXt2YXIgYj17ZG93bkV2ZW50OmEsZG93blRhcmdldDphLnRhcmdldCx0cmFja0luZm86e30sbGFzdE1vdmVFdmVudDpudWxsLHhEaXJlY3Rpb246MCx5RGlyZWN0aW9uOjAsdHJhY2tpbmc6ITF9O2Muc2V0KGEucG9pbnRlcklkLGIpfX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2lmKGIpaWYoYi50cmFja2luZyl0aGlzLmZpcmVUcmFjaygidHJhY2siLGEsYik7ZWxzZXt2YXIgZD10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGIuZG93bkV2ZW50LGEpLGU9ZC54KmQueCtkLnkqZC55O2U+dGhpcy5XSUdHTEVfVEhSRVNIT0xEJiYoYi50cmFja2luZz0hMCx0aGlzLmZpcmVUcmFjaygidHJhY2tzdGFydCIsYi5kb3duRXZlbnQsYiksdGhpcy5maXJlVHJhY2soInRyYWNrIixhLGIpKX19LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXt2YXIgYj1jLmdldChhLnBvaW50ZXJJZCk7YiYmKGIudHJhY2tpbmcmJnRoaXMuZmlyZVRyYWNrKCJ0cmFja2VuZCIsYSxiKSxjLmRlbGV0ZShhLnBvaW50ZXJJZCkpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKGEpe3RoaXMucG9pbnRlcnVwKGEpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoInRyYWNrIixkKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9e01JTl9WRUxPQ0lUWTouNSxNQVhfUVVFVUU6NCxtb3ZlUXVldWU6W10sdGFyZ2V0Om51bGwscG9pbnRlcklkOm51bGwsZXZlbnRzOlsicG9pbnRlcmRvd24iLCJwb2ludGVybW92ZSIsInBvaW50ZXJ1cCIsInBvaW50ZXJjYW5jZWwiXSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIXRoaXMucG9pbnRlcklkJiYodGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWQsdGhpcy50YXJnZXQ9YS50YXJnZXQsdGhpcy5hZGRNb3ZlKGEpKX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7YS5wb2ludGVySWQ9PT10aGlzLnBvaW50ZXJJZCYmdGhpcy5hZGRNb3ZlKGEpfSxwb2ludGVydXA6ZnVuY3Rpb24oYSl7YS5wb2ludGVySWQ9PT10aGlzLnBvaW50ZXJJZCYmdGhpcy5maXJlRmxpY2soYSksdGhpcy5jbGVhbnVwKCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNsZWFudXAoKX0sY2xlYW51cDpmdW5jdGlvbigpe3RoaXMubW92ZVF1ZXVlPVtdLHRoaXMudGFyZ2V0PW51bGwsdGhpcy5wb2ludGVySWQ9bnVsbH0sYWRkTW92ZTpmdW5jdGlvbihhKXt0aGlzLm1vdmVRdWV1ZS5sZW5ndGg+PXRoaXMuTUFYX1FVRVVFJiZ0aGlzLm1vdmVRdWV1ZS5zaGlmdCgpLHRoaXMubW92ZVF1ZXVlLnB1c2goYSl9LGZpcmVGbGljazpmdW5jdGlvbihhKXtmb3IodmFyIGMsZCxlLGYsZyxoLGksaj1hLGs9dGhpcy5tb3ZlUXVldWUubGVuZ3RoLGw9MCxtPTAsbj0wLG89MDtrPm8mJihpPXRoaXMubW92ZVF1ZXVlW29dKTtvKyspYz1qLnRpbWVTdGFtcC1pLnRpbWVTdGFtcCxkPWouY2xpZW50WC1pLmNsaWVudFgsZT1qLmNsaWVudFktaS5jbGllbnRZLGY9ZC9jLGc9ZS9jLGg9TWF0aC5zcXJ0KGYqZitnKmcpLGg+biYmKGw9ZixtPWcsbj1oKTt2YXIgcD1NYXRoLmFicyhsKT5NYXRoLmFicyhtKT8ieCI6InkiLHE9dGhpcy5jYWxjQW5nbGUobCxtKTtpZihNYXRoLmFicyhuKT49dGhpcy5NSU5fVkVMT0NJVFkpe3ZhciByPWIubWFrZUV2ZW50KCJmbGljayIse3hWZWxvY2l0eTpsLHlWZWxvY2l0eTptLHZlbG9jaXR5Om4sYW5nbGU6cSxtYWpvckF4aXM6cCxwb2ludGVyVHlwZTphLnBvaW50ZXJUeXBlfSk7Yi5kaXNwYXRjaEV2ZW50KHIsdGhpcy50YXJnZXQpfX0sY2FsY0FuZ2xlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDE4MCpNYXRoLmF0YW4yKGIsYSkvTWF0aC5QSX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJmbGljayIsYyl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPW5ldyBhLlBvaW50ZXJNYXAsZD0xODAvTWF0aC5QSSxlPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLHJlZmVyZW5jZTp7fSxwb2ludGVyZG93bjpmdW5jdGlvbihiKXtpZihjLnNldChiLnBvaW50ZXJJZCxiKSwyPT1jLnBvaW50ZXJzKCkpe3ZhciBkPXRoaXMuY2FsY0Nob3JkKCksZT10aGlzLmNhbGNBbmdsZShkKTt0aGlzLnJlZmVyZW5jZT17YW5nbGU6ZSxkaWFtZXRlcjpkLmRpYW1ldGVyLHRhcmdldDphLmZpbmRMQ0EoZC5hLnRhcmdldCxkLmIudGFyZ2V0KX19fSxwb2ludGVydXA6ZnVuY3Rpb24oYSl7Yy5kZWxldGUoYS5wb2ludGVySWQpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtjLmhhcyhhLnBvaW50ZXJJZCkmJihjLnNldChhLnBvaW50ZXJJZCxhKSxjLnBvaW50ZXJzKCk+MSYmdGhpcy5jYWxjUGluY2hSb3RhdGUoKSl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludGVydXAoYSl9LGRpc3BhdGNoUGluY2g6ZnVuY3Rpb24oYSxjKXt2YXIgZD1hL3RoaXMucmVmZXJlbmNlLmRpYW1ldGVyLGU9Yi5tYWtlRXZlbnQoInBpbmNoIix7c2NhbGU6ZCxjZW50ZXJYOmMuY2VudGVyLngsY2VudGVyWTpjLmNlbnRlci55fSk7Yi5kaXNwYXRjaEV2ZW50KGUsdGhpcy5yZWZlcmVuY2UudGFyZ2V0KX0sZGlzcGF0Y2hSb3RhdGU6ZnVuY3Rpb24oYSxjKXt2YXIgZD1NYXRoLnJvdW5kKChhLXRoaXMucmVmZXJlbmNlLmFuZ2xlKSUzNjApLGU9Yi5tYWtlRXZlbnQoInJvdGF0ZSIse2FuZ2xlOmQsY2VudGVyWDpjLmNlbnRlci54LGNlbnRlclk6Yy5jZW50ZXIueX0pO2IuZGlzcGF0Y2hFdmVudChlLHRoaXMucmVmZXJlbmNlLnRhcmdldCl9LGNhbGNQaW5jaFJvdGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2FsY0Nob3JkKCksYj1hLmRpYW1ldGVyLGM9dGhpcy5jYWxjQW5nbGUoYSk7YiE9dGhpcy5yZWZlcmVuY2UuZGlhbWV0ZXImJnRoaXMuZGlzcGF0Y2hQaW5jaChiLGEpLGMhPXRoaXMucmVmZXJlbmNlLmFuZ2xlJiZ0aGlzLmRpc3BhdGNoUm90YXRlKGMsYSl9LGNhbGNDaG9yZDpmdW5jdGlvbigpe3ZhciBhPVtdO2MuZm9yRWFjaChmdW5jdGlvbihiKXthLnB1c2goYil9KTtmb3IodmFyIGIsZCxlLGY9MCxnPXthOmFbMF0sYjphWzFdfSxoPTA7aDxhLmxlbmd0aDtoKyspZm9yKHZhciBpPWFbaF0saj1oKzE7ajxhLmxlbmd0aDtqKyspe3ZhciBrPWFbal07Yj1NYXRoLmFicyhpLmNsaWVudFgtay5jbGllbnRYKSxkPU1hdGguYWJzKGkuY2xpZW50WS1rLmNsaWVudFkpLGU9YitkLGU+ZiYmKGY9ZSxnPXthOmksYjprfSl9cmV0dXJuIGI9TWF0aC5hYnMoZy5hLmNsaWVudFgrZy5iLmNsaWVudFgpLzIsZD1NYXRoLmFicyhnLmEuY2xpZW50WStnLmIuY2xpZW50WSkvMixnLmNlbnRlcj17eDpiLHk6ZH0sZy5kaWFtZXRlcj1mLGd9LGNhbGNBbmdsZTpmdW5jdGlvbihhKXt2YXIgYj1hLmEuY2xpZW50WC1hLmIuY2xpZW50WCxjPWEuYS5jbGllbnRZLWEuYi5jbGllbnRZO3JldHVybigzNjArTWF0aC5hdGFuMihjLGIpKmQpJTM2MH19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJwaW5jaCIsZSl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPW5ldyBhLlBvaW50ZXJNYXAsZD17ZXZlbnRzOlsicG9pbnRlcmRvd24iLCJwb2ludGVybW92ZSIsInBvaW50ZXJ1cCIsInBvaW50ZXJjYW5jZWwiLCJrZXl1cCJdLHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYhYS50YXBQcmV2ZW50ZWQmJmMuc2V0KGEucG9pbnRlcklkLHt0YXJnZXQ6YS50YXJnZXQsYnV0dG9uczphLmJ1dHRvbnMseDphLmNsaWVudFgseTphLmNsaWVudFl9KX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7aWYoYS5pc1ByaW1hcnkpe3ZhciBiPWMuZ2V0KGEucG9pbnRlcklkKTtiJiZhLnRhcFByZXZlbnRlZCYmYy5kZWxldGUoYS5wb2ludGVySWQpfX0sc2hvdWxkVGFwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEudGFwUHJldmVudGVkP3ZvaWQgMDoibW91c2UiPT09YS5wb2ludGVyVHlwZT8xPT09Yi5idXR0b25zOiEwfSxwb2ludGVydXA6ZnVuY3Rpb24oZCl7dmFyIGU9Yy5nZXQoZC5wb2ludGVySWQpO2lmKGUmJnRoaXMuc2hvdWxkVGFwKGQsZSkpe3ZhciBmPWEuZmluZExDQShlLnRhcmdldCxkLnRhcmdldCk7aWYoZil7dmFyIGc9Yi5tYWtlRXZlbnQoInRhcCIse3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZLGRldGFpbDpkLmRldGFpbCxwb2ludGVyVHlwZTpkLnBvaW50ZXJUeXBlfSk7Yi5kaXNwYXRjaEV2ZW50KGcsZil9fWMuZGVsZXRlKGQucG9pbnRlcklkKX0scG9pbnRlcmNhbmNlbDpmdW5jdGlvbihhKXtjLmRlbGV0ZShhLnBvaW50ZXJJZCl9LGtleXVwOmZ1bmN0aW9uKGEpe3ZhciBjPWEua2V5Q29kZTtpZigzMj09PWMpe3ZhciBkPWEudGFyZ2V0O2QgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50fHxkIGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudHx8Yi5kaXNwYXRjaEV2ZW50KGIubWFrZUV2ZW50KCJ0YXAiLHt4OjAseTowLGRldGFpbDowLHBvaW50ZXJUeXBlOiJ1bmF2YWlsYWJsZSJ9KSxkKX19LHByZXZlbnRUYXA6ZnVuY3Rpb24oYSl7Yy5kZWxldGUoYSl9fTtiLnJlZ2lzdGVyUmVjb2duaXplcigidGFwIixkKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2MuaW1tZWRpYXRlUmVnaXN0ZXI9ITA7dmFyIGI9Yy5yZWdpc3RlclF1ZXVlO2IuZm9yRWFjaChhLnJlZ2lzdGVyKSxiLmxlbmd0aD0wfXZhciBjPWEuZGlzcGF0Y2hlcjsiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZT9iKCk6ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsZnVuY3Rpb24oKXsiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmYigpfSl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGEoYSl7Zm9yKDthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhLmdldEVsZW1lbnRCeUlkP2E6bnVsbH1mdW5jdGlvbiBiKGEsYixjKXt2YXIgZD1hLmJpbmRpbmdzXztyZXR1cm4gZHx8KGQ9YS5iaW5kaW5nc189e30pLGRbYl0mJmNbYl0uY2xvc2UoKSxkW2JdPWN9ZnVuY3Rpb24gYyhhLGIsYyl7cmV0dXJuIGN9ZnVuY3Rpb24gZChhKXtyZXR1cm4gbnVsbD09YT8iIjphfWZ1bmN0aW9uIGUoYSxiKXthLmRhdGE9ZChiKX1mdW5jdGlvbiBmKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZShhLGIpfX1mdW5jdGlvbiBnKGEsYixjLGUpe3JldHVybiBjP3ZvaWQoZT9hLnNldEF0dHJpYnV0ZShiLCIiKTphLnJlbW92ZUF0dHJpYnV0ZShiKSk6dm9pZCBhLnNldEF0dHJpYnV0ZShiLGQoZSkpfWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtnKGEsYixjLGQpfX1mdW5jdGlvbiBpKGEpe3N3aXRjaChhLnR5cGUpe2Nhc2UiY2hlY2tib3giOnJldHVybiB1O2Nhc2UicmFkaW8iOmNhc2Uic2VsZWN0LW11bHRpcGxlIjpjYXNlInNlbGVjdC1vbmUiOnJldHVybiJjaGFuZ2UiO2Nhc2UicmFuZ2UiOmlmKC9UcmlkZW50fE1TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpcmV0dXJuImNoYW5nZSI7ZGVmYXVsdDpyZXR1cm4iaW5wdXQifX1mdW5jdGlvbiBqKGEsYixjLGUpe2FbYl09KGV8fGQpKGMpfWZ1bmN0aW9uIGsoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtyZXR1cm4gaihhLGIsZCxjKX19ZnVuY3Rpb24gbCgpe31mdW5jdGlvbiBtKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtjLnNldFZhbHVlKGFbYl0pLGMuZGlzY2FyZENoYW5nZXMoKSwoZHx8bCkoYSksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX12YXIgZj1pKGEpO3JldHVybiBhLmFkZEV2ZW50TGlzdGVuZXIoZixlKSx7Y2xvc2U6ZnVuY3Rpb24oKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoZixlKSxjLmNsb3NlKCl9LG9ic2VydmFibGVfOmN9fWZ1bmN0aW9uIG4oYSl7cmV0dXJuIEJvb2xlYW4oYSl9ZnVuY3Rpb24gbyhiKXtpZihiLmZvcm0pcmV0dXJuIHMoYi5mb3JtLmVsZW1lbnRzLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1iJiYiSU5QVVQiPT1hLnRhZ05hbWUmJiJyYWRpbyI9PWEudHlwZSYmYS5uYW1lPT1iLm5hbWV9KTt2YXIgYz1hKGIpO2lmKCFjKXJldHVybltdO3ZhciBkPWMucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSInK2IubmFtZSsnIl0nKTtyZXR1cm4gcyhkLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1iJiYhYS5mb3JtfSl9ZnVuY3Rpb24gcChhKXsiSU5QVVQiPT09YS50YWdOYW1lJiYicmFkaW8iPT09YS50eXBlJiZvKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5iaW5kaW5nc18uY2hlY2tlZDtiJiZiLm9ic2VydmFibGVfLnNldFZhbHVlKCExKX0pfWZ1bmN0aW9uIHEoYSxiKXt2YXIgYyxlLGYsZz1hLnBhcmVudE5vZGU7ZyBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50JiZnLmJpbmRpbmdzXyYmZy5iaW5kaW5nc18udmFsdWUmJihjPWcsZT1jLmJpbmRpbmdzXy52YWx1ZSxmPWMudmFsdWUpLGEudmFsdWU9ZChiKSxjJiZjLnZhbHVlIT1mJiYoZS5vYnNlcnZhYmxlXy5zZXRWYWx1ZShjLnZhbHVlKSxlLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cShhLGIpfX12YXIgcz1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZmlsdGVyKTtOb2RlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYil7Y29uc29sZS5lcnJvcigiVW5oYW5kbGVkIGJpbmRpbmcgdG8gTm9kZTogIix0aGlzLGEsYil9O3ZhciB0PWM7T2JqZWN0LmRlZmluZVByb3BlcnR5KFBsYXRmb3JtLCJlbmFibGVCaW5kaW5nc1JlZmxlY3Rpb24iLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdD09PWJ9LHNldDpmdW5jdGlvbihhKXtyZXR1cm4gdD1hP2I6YyxhfSxjb25maWd1cmFibGU6ITB9KSxUZXh0LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtpZigidGV4dENvbnRlbnQiIT09YSlyZXR1cm4gTm9kZS5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpO2lmKGMpcmV0dXJuIGUodGhpcyxiKTsKdmFyIGQ9YjtyZXR1cm4gZSh0aGlzLGQub3BlbihmKHRoaXMpKSksdCh0aGlzLGEsZCl9LEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSI/Ij09YVthLmxlbmd0aC0xXTtpZihkJiYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksYT1hLnNsaWNlKDAsLTEpKSxjKXJldHVybiBnKHRoaXMsYSxkLGIpO3ZhciBlPWI7cmV0dXJuIGcodGhpcyxhLGQsZS5vcGVuKGgodGhpcyxhLGQpKSksdCh0aGlzLGEsZSl9O3ZhciB1OyFmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGI9YS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94Iik7dmFyIGMsZD0wO2IuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7ZCsrLGM9Y3x8ImNsaWNrIn0pLGIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjaGFuZ2UifSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnQiKTtlLmluaXRNb3VzZUV2ZW50KCJjbGljayIsITAsITAsd2luZG93LDAsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGwpLGIuZGlzcGF0Y2hFdmVudChlKSx1PTE9PWQ/ImNoYW5nZSI6Y30oKSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxlKXtpZigidmFsdWUiIT09YSYmImNoZWNrZWQiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxlKTt0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKTt2YXIgZj0iY2hlY2tlZCI9PWE/bjpkLGc9ImNoZWNrZWQiPT1hP3A6bDtpZihlKXJldHVybiBqKHRoaXMsYSxjLGYpO3ZhciBoPWMsaT1tKHRoaXMsYSxoLGcpO3JldHVybiBqKHRoaXMsYSxoLm9wZW4oayh0aGlzLGEsZikpLGYpLGIodGhpcyxhLGkpfSxIVE1MVGV4dEFyZWFFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtpZigidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKSxjKXJldHVybiBqKHRoaXMsInZhbHVlIixiKTt2YXIgZT1iLGY9bSh0aGlzLCJ2YWx1ZSIsZSk7cmV0dXJuIGoodGhpcywidmFsdWUiLGUub3BlbihrKHRoaXMsInZhbHVlIixkKSkpLHQodGhpcyxhLGYpfSxIVE1MT3B0aW9uRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInZhbHVlIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIiksYylyZXR1cm4gcSh0aGlzLGIpO3ZhciBkPWIsZT1tKHRoaXMsInZhbHVlIixkKTtyZXR1cm4gcSh0aGlzLGQub3BlbihyKHRoaXMpKSksdCh0aGlzLGEsZSl9LEhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxkKXtpZigic2VsZWN0ZWRpbmRleCI9PT1hJiYoYT0ic2VsZWN0ZWRJbmRleCIpLCJzZWxlY3RlZEluZGV4IiE9PWEmJiJ2YWx1ZSIhPT1hKXJldHVybiBIVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxjLGQpO2lmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLGQpcmV0dXJuIGoodGhpcyxhLGMpO3ZhciBlPWMsZj1tKHRoaXMsYSxlKTtyZXR1cm4gaih0aGlzLGEsZS5vcGVuKGsodGhpcyxhKSkpLGIodGhpcyxhLGYpfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBkKGEsYil7aWYoYil7Zm9yKHZhciBkLGU9IiMiK2I7IWQmJihhPWMoYSksYS5wcm90b0NvbnRlbnRfP2Q9YS5wcm90b0NvbnRlbnRfLnF1ZXJ5U2VsZWN0b3IoZSk6YS5nZXRFbGVtZW50QnlJZCYmKGQ9YS5nZXRFbGVtZW50QnlJZChiKSksIWQmJmEudGVtcGxhdGVDcmVhdG9yXyk7KWE9YS50ZW1wbGF0ZUNyZWF0b3JfO3JldHVybiBkfX1mdW5jdGlvbiBlKGEpe3JldHVybiJ0ZW1wbGF0ZSI9PWEudGFnTmFtZSYmImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZihhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gQm9vbGVhbihKW2EudGFnTmFtZV0mJmEuaGFzQXR0cmlidXRlKCJ0ZW1wbGF0ZSIpKX1mdW5jdGlvbiBoKGEpe3JldHVybiB2b2lkIDA9PT1hLmlzVGVtcGxhdGVfJiYoYS5pc1RlbXBsYXRlXz0iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGcoYSkpLGEuaXNUZW1wbGF0ZV99ZnVuY3Rpb24gaShhLGIpe3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbChMKTtoKGEpJiZiKGEpLEUoYyxiKX1mdW5jdGlvbiBqKGEpe2Z1bmN0aW9uIGIoYSl7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhKXx8aihhLmNvbnRlbnQpfWkoYSxiKX1mdW5jdGlvbiBrKGEsYil7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKSl9KX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudDtpZighYi5kZWZhdWx0VmlldylyZXR1cm4gYjt2YXIgYz1iLnRlbXBsYXRlQ29udGVudHNPd25lcl87aWYoIWMpe2ZvcihjPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtjLmxhc3RDaGlsZDspYy5yZW1vdmVDaGlsZChjLmxhc3RDaGlsZCk7Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfPWN9cmV0dXJuIGN9ZnVuY3Rpb24gbShhKXtpZighYS5zdGFnaW5nRG9jdW1lbnRfKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7aWYoIWIuc3RhZ2luZ0RvY3VtZW50Xyl7Yi5zdGFnaW5nRG9jdW1lbnRfPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTt2YXIgYz1iLnN0YWdpbmdEb2N1bWVudF8uY3JlYXRlRWxlbWVudCgiYmFzZSIpO2MuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGIuc3RhZ2luZ0RvY3VtZW50Xy5oZWFkLmFwcGVuZENoaWxkKGMpLGIuc3RhZ2luZ0RvY3VtZW50Xy5zdGFnaW5nRG9jdW1lbnRfPWIuc3RhZ2luZ0RvY3VtZW50X31hLnN0YWdpbmdEb2N1bWVudF89Yi5zdGFnaW5nRG9jdW1lbnRffXJldHVybiBhLnN0YWdpbmdEb2N1bWVudF99ZnVuY3Rpb24gbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTthLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYSk7Zm9yKHZhciBjPWEuYXR0cmlidXRlcyxkPWMubGVuZ3RoO2QtLT4wOyl7dmFyIGU9Y1tkXTtJW2UubmFtZV0mJigidGVtcGxhdGUiIT09ZS5uYW1lJiZiLnNldEF0dHJpYnV0ZShlLm5hbWUsZS52YWx1ZSksYS5yZW1vdmVBdHRyaWJ1dGUoZS5uYW1lKSl9cmV0dXJuIGJ9ZnVuY3Rpb24gbyhhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTthLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYSk7Zm9yKHZhciBjPWEuYXR0cmlidXRlcyxkPWMubGVuZ3RoO2QtLT4wOyl7dmFyIGU9Y1tkXTtiLnNldEF0dHJpYnV0ZShlLm5hbWUsZS52YWx1ZSksYS5yZW1vdmVBdHRyaWJ1dGUoZS5uYW1lKX1yZXR1cm4gYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpLGJ9ZnVuY3Rpb24gcChhLGIsYyl7dmFyIGQ9YS5jb250ZW50O2lmKGMpcmV0dXJuIHZvaWQgZC5hcHBlbmRDaGlsZChiKTtmb3IodmFyIGU7ZT1iLmZpcnN0Q2hpbGQ7KWQuYXBwZW5kQ2hpbGQoZSl9ZnVuY3Rpb24gcShhKXtOP2EuX19wcm90b19fPUhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlOmsoYSxIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSl9ZnVuY3Rpb24gcihhKXthLnNldE1vZGVsRm5ffHwoYS5zZXRNb2RlbEZuXz1mdW5jdGlvbigpe2Euc2V0TW9kZWxGblNjaGVkdWxlZF89ITE7dmFyIGI9eihhLGEuZGVsZWdhdGVfJiZhLmRlbGVnYXRlXy5wcmVwYXJlQmluZGluZyk7dyhhLGIsYS5tb2RlbF8pfSksYS5zZXRNb2RlbEZuU2NoZWR1bGVkX3x8KGEuc2V0TW9kZWxGblNjaGVkdWxlZF89ITAsT2JzZXJ2ZXIucnVuRU9NXyhhLnNldE1vZGVsRm5fKSl9ZnVuY3Rpb24gcyhhLGIsYyxkKXtpZihhJiZhLmxlbmd0aCl7Zm9yKHZhciBlLGY9YS5sZW5ndGgsZz0wLGg9MCxpPTAsaj0hMDtmPmg7KXt2YXIgZz1hLmluZGV4T2YoInt7IixoKSxrPWEuaW5kZXhPZigiW1siLGgpLGw9ITEsbT0ifX0iO2lmKGs+PTAmJigwPmd8fGc+aykmJihnPWssbD0hMCxtPSJdXSIpLGk9MD5nPy0xOmEuaW5kZXhPZihtLGcrMiksMD5pKXtpZighZSlyZXR1cm47ZS5wdXNoKGEuc2xpY2UoaCkpO2JyZWFrfWU9ZXx8W10sZS5wdXNoKGEuc2xpY2UoaCxnKSk7dmFyIG49YS5zbGljZShnKzIsaSkudHJpbSgpO2UucHVzaChsKSxqPWomJmw7dmFyIG89ZCYmZChuLGIsYyk7ZS5wdXNoKG51bGw9PW8/UGF0aC5nZXQobik6bnVsbCksZS5wdXNoKG8pLGg9aSsyfXJldHVybiBoPT09ZiYmZS5wdXNoKCIiKSxlLmhhc09uZVBhdGg9NT09PWUubGVuZ3RoLGUuaXNTaW1wbGVQYXRoPWUuaGFzT25lUGF0aCYmIiI9PWVbMF0mJiIiPT1lWzRdLGUub25seU9uZVRpbWU9aixlLmNvbWJpbmF0b3I9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWVbMF0sYz0xO2M8ZS5sZW5ndGg7Yys9NCl7dmFyIGQ9ZS5oYXNPbmVQYXRoP2E6YVsoYy0xKS80XTt2b2lkIDAhPT1kJiYoYis9ZCksYis9ZVtjKzNdfXJldHVybiBifSxlfX1mdW5jdGlvbiB0KGEsYixjLGQpe2lmKGIuaGFzT25lUGF0aCl7dmFyIGU9YlszXSxmPWU/ZShkLGMsITApOmJbMl0uZ2V0VmFsdWVGcm9tKGQpO3JldHVybiBiLmlzU2ltcGxlUGF0aD9mOmIuY29tYmluYXRvcihmKX1mb3IodmFyIGc9W10saD0xO2g8Yi5sZW5ndGg7aCs9NCl7dmFyIGU9YltoKzJdO2dbKGgtMSkvNF09ZT9lKGQsYyk6YltoKzFdLmdldFZhbHVlRnJvbShkKX1yZXR1cm4gYi5jb21iaW5hdG9yKGcpfWZ1bmN0aW9uIHUoYSxiLGMsZCl7dmFyIGU9YlszXSxmPWU/ZShkLGMsITEpOm5ldyBQYXRoT2JzZXJ2ZXIoZCxiWzJdKTtyZXR1cm4gYi5pc1NpbXBsZVBhdGg/ZjpuZXcgT2JzZXJ2ZXJUcmFuc2Zvcm0oZixiLmNvbWJpbmF0b3IpfWZ1bmN0aW9uIHYoYSxiLGMsZCl7aWYoYi5vbmx5T25lVGltZSlyZXR1cm4gdChhLGIsYyxkKTtpZihiLmhhc09uZVBhdGgpcmV0dXJuIHUoYSxiLGMsZCk7Zm9yKHZhciBlPW5ldyBDb21wb3VuZE9ic2VydmVyLGY9MTtmPGIubGVuZ3RoO2YrPTQpe3ZhciBnPWJbZl0saD1iW2YrMl07aWYoaCl7dmFyIGk9aChkLGMsZyk7Zz9lLmFkZFBhdGgoaSk6ZS5hZGRPYnNlcnZlcihpKX1lbHNle3ZhciBqPWJbZisxXTtnP2UuYWRkUGF0aChqLmdldFZhbHVlRnJvbShkKSk6ZS5hZGRQYXRoKGQsail9fXJldHVybiBuZXcgT2JzZXJ2ZXJUcmFuc2Zvcm0oZSxiLmNvbWJpbmF0b3IpfWZ1bmN0aW9uIHcoYSxiLGMsZCl7Zm9yKHZhciBlPTA7ZTxiLmxlbmd0aDtlKz0yKXt2YXIgZj1iW2VdLGc9YltlKzFdLGg9dihmLGcsYSxjKSxpPWEuYmluZChmLGgsZy5vbmx5T25lVGltZSk7aSYmZCYmZC5wdXNoKGkpfWlmKGIuaXNUZW1wbGF0ZSl7YS5tb2RlbF89Yzt2YXIgaj1hLnByb2Nlc3NCaW5kaW5nRGlyZWN0aXZlc18oYik7ZCYmaiYmZC5wdXNoKGopfX1mdW5jdGlvbiB4KGEsYixjKXt2YXIgZD1hLmdldEF0dHJpYnV0ZShiKTtyZXR1cm4gcygiIj09ZD8ie3t9fSI6ZCxiLGEsYyl9ZnVuY3Rpb24geShhLGMpe2IoYSk7Zm9yKHZhciBkPVtdLGU9MDtlPGEuYXR0cmlidXRlcy5sZW5ndGg7ZSsrKXtmb3IodmFyIGY9YS5hdHRyaWJ1dGVzW2VdLGc9Zi5uYW1lLGk9Zi52YWx1ZTsiXyI9PT1nWzBdOylnPWcuc3Vic3RyaW5nKDEpO2lmKCFoKGEpfHxnIT09SCYmZyE9PUYmJmchPT1HKXt2YXIgaj1zKGksZyxhLGMpO2omJmQucHVzaChnLGopfX1yZXR1cm4gaChhKSYmKGQuaXNUZW1wbGF0ZT0hMCxkLmlmPXgoYSxILGMpLGQuYmluZD14KGEsRixjKSxkLnJlcGVhdD14KGEsRyxjKSwhZC5pZnx8ZC5iaW5kfHxkLnJlcGVhdHx8KGQuYmluZD1zKCJ7e319IixGLGEsYykpKSxkfWZ1bmN0aW9uIHooYSxiKXtpZihhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpcmV0dXJuIHkoYSxiKTtpZihhLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUpe3ZhciBjPXMoYS5kYXRhLCJ0ZXh0Q29udGVudCIsYSxiKTtpZihjKXJldHVyblsidGV4dENvbnRlbnQiLGNdfXJldHVybltdfWZ1bmN0aW9uIEEoYSxiLGMsZCxlLGYsZyl7Zm9yKHZhciBoPWIuYXBwZW5kQ2hpbGQoYy5pbXBvcnROb2RlKGEsITEpKSxpPTAsaj1hLmZpcnN0Q2hpbGQ7ajtqPWoubmV4dFNpYmxpbmcpQShqLGgsYyxkLmNoaWxkcmVuW2krK10sZSxmLGcpO3JldHVybiBkLmlzVGVtcGxhdGUmJihIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlKGgsYSksZiYmaC5zZXREZWxlZ2F0ZV8oZikpLHcoaCxkLGUsZyksaH1mdW5jdGlvbiBCKGEsYil7dmFyIGM9eihhLGIpO2MuY2hpbGRyZW49e307Zm9yKHZhciBkPTAsZT1hLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpYy5jaGlsZHJlbltkKytdPUIoZSxiKTtyZXR1cm4gY31mdW5jdGlvbiBDKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMuaW5zdGFuY2VzPVtdLHRoaXMuZGVwcz12b2lkIDAsdGhpcy5pdGVyYXRlZFZhbHVlPVtdLHRoaXMucHJlc2VudFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwfXZhciBELEU9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP0Q9YS5NYXA6KEQ9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LEQucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSk7ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBGPSJiaW5kIixHPSJyZXBlYXQiLEg9ImlmIixJPXt0ZW1wbGF0ZTohMCxyZXBlYXQ6ITAsYmluZDohMCxyZWY6ITB9LEo9e1RIRUFEOiEwLFRCT0RZOiEwLFRGT09UOiEwLFRIOiEwLFRSOiEwLFREOiEwLENPTEdST1VQOiEwLENPTDohMCxDQVBUSU9OOiEwLE9QVElPTjohMCxPUFRHUk9VUDohMH0sSz0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7SyYmIWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKSxiPWEuY29udGVudC5vd25lckRvY3VtZW50LGM9Yi5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImh0bWwiKSksZD1jLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiaGVhZCIpKSxlPWIuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2UuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGQuYXBwZW5kQ2hpbGQoZSl9KCk7dmFyIEw9InRlbXBsYXRlLCAiK09iamVjdC5rZXlzKEopLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpKyJbdGVtcGxhdGVdIn0pLmpvaW4oIiwgIik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtqKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksS3x8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIE0sTj0iX19wcm90b19fImlue307ImZ1bmN0aW9uIj09dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJihNPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udGFyZ2V0LnJlZkNoYW5nZWRfKCl9KSksSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGQ9YTtkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBoPWYoZCkmJkssaT1oLGs9IWgsbT0hMTtpZihofHwoZyhkKT8oYighYyksZD1uKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsaD1LLG09ITApOmUoZCkmJihkPW8oYSksZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxoPUspKSwhaCl7cShkKTt2YXIgcj1sKGQpO2QuY29udGVudF89ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9cmV0dXJuIGM/ZC5pbnN0YW5jZVJlZl89YzprP3AoZCxhLG0pOmkmJmooZC5jb250ZW50KSwhMH0sSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXA9ajt2YXIgTz1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsUD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudF99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtLfHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShPLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixQKSksayhIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSx7YmluZDpmdW5jdGlvbihhLGIsYyl7aWYoInJlZiIhPWEpcmV0dXJuIEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTt2YXIgZD10aGlzLGU9Yz9iOmIub3BlbihmdW5jdGlvbihhKXtkLnNldEF0dHJpYnV0ZSgicmVmIixhKSxkLnJlZkNoYW5nZWRfKCl9KTtyZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUoInJlZiIsZSksdGhpcy5yZWZDaGFuZ2VkXygpLGM/dm9pZCAwOih0aGlzLmJpbmRpbmdzXz90aGlzLmJpbmRpbmdzXy5yZWY9Yjp0aGlzLmJpbmRpbmdzXz17cmVmOmJ9LGIpfSxwcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yXyYmdGhpcy5pdGVyYXRvcl8uY2xvc2VEZXBzKCksYS5pZnx8YS5iaW5kfHxhLnJlcGVhdD8odGhpcy5pdGVyYXRvcl98fCh0aGlzLml0ZXJhdG9yXz1uZXcgQyh0aGlzKSksdGhpcy5pdGVyYXRvcl8udXBkYXRlRGVwZW5kZW5jaWVzKGEsdGhpcy5tb2RlbF8pLE0mJk0ub2JzZXJ2ZSh0aGlzLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInJlZiJdfSksdGhpcy5pdGVyYXRvcl8pOnZvaWQodGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCkpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihhLGIsYyl7YiYmKGM9dGhpcy5uZXdEZWxlZ2F0ZV8oYikpLHRoaXMucmVmQ29udGVudF98fCh0aGlzLnJlZkNvbnRlbnRfPXRoaXMucmVmXy5jb250ZW50KTt2YXIgZD10aGlzLnJlZkNvbnRlbnRfO2lmKG51bGw9PT1kLmZpcnN0Q2hpbGQpcmV0dXJuIFE7dmFyIGU9dGhpcy5iaW5kaW5nTWFwXztlJiZlLmNvbnRlbnQ9PT1kfHwoZT1CKGQsYyYmYy5wcmVwYXJlQmluZGluZyl8fFtdLGUuY29udGVudD1kLHRoaXMuYmluZGluZ01hcF89ZSk7dmFyIGY9bSh0aGlzKSxnPWYuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2cudGVtcGxhdGVDcmVhdG9yXz10aGlzLGcucHJvdG9Db250ZW50Xz1kLGcuYmluZGluZ3NfPVtdLGcudGVybWluYXRvcl89bnVsbDtmb3IodmFyIGg9Zy50ZW1wbGF0ZUluc3RhbmNlXz17Zmlyc3ROb2RlOm51bGwsbGFzdE5vZGU6bnVsbCxtb2RlbDphfSxpPTAsaj0hMSxrPWQuZmlyc3RDaGlsZDtrO2s9ay5uZXh0U2libGluZyl7bnVsbD09PWsubmV4dFNpYmxpbmcmJihqPSEwKTt2YXIgbD1BKGssZyxmLGUuY2hpbGRyZW5baSsrXSxhLGMsZy5iaW5kaW5nc18pO2wudGVtcGxhdGVJbnN0YW5jZV89aCxqJiYoZy50ZXJtaW5hdG9yXz1sKX1yZXR1cm4gaC5maXJzdE5vZGU9Zy5maXJzdENoaWxkLGgubGFzdE5vZGU9Zy5sYXN0Q2hpbGQsZy50ZW1wbGF0ZUNyZWF0b3JfPXZvaWQgMCxnLnByb3RvQ29udGVudF89dm9pZCAwLGd9LGdldCBtb2RlbCgpe3JldHVybiB0aGlzLm1vZGVsX30sc2V0IG1vZGVsKGEpe3RoaXMubW9kZWxfPWEscih0aGlzKX0sZ2V0IGJpbmRpbmdEZWxlZ2F0ZSgpe3JldHVybiB0aGlzLmRlbGVnYXRlXyYmdGhpcy5kZWxlZ2F0ZV8ucmF3fSxyZWZDaGFuZ2VkXzpmdW5jdGlvbigpe3RoaXMuaXRlcmF0b3JfJiZ0aGlzLnJlZkNvbnRlbnRfIT09dGhpcy5yZWZfLmNvbnRlbnQmJih0aGlzLnJlZkNvbnRlbnRfPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy51cGRhdGVJdGVyYXRlZFZhbHVlKCkpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubW9kZWxfPXZvaWQgMCx0aGlzLmRlbGVnYXRlXz12b2lkIDAsdGhpcy5iaW5kaW5nc18mJnRoaXMuYmluZGluZ3NfLnJlZiYmdGhpcy5iaW5kaW5nc18ucmVmLmNsb3NlKCksdGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCl9LHNldERlbGVnYXRlXzpmdW5jdGlvbihhKXt0aGlzLmRlbGVnYXRlXz1hLHRoaXMuYmluZGluZ01hcF89dm9pZCAwLHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8uaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlTW9kZWxGbl89dm9pZCAwKX0sbmV3RGVsZWdhdGVfOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YSYmYVtiXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYylyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShhLGFyZ3VtZW50cyl9fXJldHVybiBhP3tyYXc6YSxwcmVwYXJlQmluZGluZzpiKCJwcmVwYXJlQmluZGluZyIpLHByZXBhcmVJbnN0YW5jZU1vZGVsOmIoInByZXBhcmVJbnN0YW5jZU1vZGVsIikscHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkOmIoInByZXBhcmVJbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZCIpfTp7fX0sc2V0IGJpbmRpbmdEZWxlZ2F0ZShhKXtpZih0aGlzLmRlbGVnYXRlXyl0aHJvdyBFcnJvcigiVGVtcGxhdGUgbXVzdCBiZSBjbGVhcmVkIGJlZm9yZSBhIG5ldyBiaW5kaW5nRGVsZWdhdGUgY2FuIGJlIGFzc2lnbmVkIik7dGhpcy5zZXREZWxlZ2F0ZV8odGhpcy5uZXdEZWxlZ2F0ZV8oYSkpfSxnZXQgcmVmXygpe3ZhciBhPWQodGhpcyx0aGlzLmdldEF0dHJpYnV0ZSgicmVmIikpO2lmKGF8fChhPXRoaXMuaW5zdGFuY2VSZWZfKSwhYSlyZXR1cm4gdGhpczt2YXIgYj1hLnJlZl87cmV0dXJuIGI/YjphfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb2RlLnByb3RvdHlwZSwidGVtcGxhdGVJbnN0YW5jZSIse2dldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMudGVtcGxhdGVJbnN0YW5jZV87cmV0dXJuIGE/YTp0aGlzLnBhcmVudE5vZGU/dGhpcy5wYXJlbnROb2RlLnRlbXBsYXRlSW5zdGFuY2U6dm9pZCAwfX0pO3ZhciBRPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtRLmJpbmRpbmdzXz1bXSxRLnRlcm1pbmF0b3JfPW51bGwsQy5wcm90b3R5cGU9e2Nsb3NlRGVwczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZGVwczthJiYoYS5pZk9uZVRpbWU9PT0hMSYmYS5pZlZhbHVlLmNsb3NlKCksYS5vbmVUaW1lPT09ITEmJmEudmFsdWUuY2xvc2UoKSl9LHVwZGF0ZURlcGVuZGVuY2llczpmdW5jdGlvbihhLGIpe3RoaXMuY2xvc2VEZXBzKCk7dmFyIGM9dGhpcy5kZXBzPXt9LGQ9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfO2lmKGEuaWYpe2lmKGMuaGFzSWY9ITAsYy5pZk9uZVRpbWU9YS5pZi5vbmx5T25lVGltZSxjLmlmVmFsdWU9dihILGEuaWYsZCxiKSxjLmlmT25lVGltZSYmIWMuaWZWYWx1ZSlyZXR1cm4gdm9pZCB0aGlzLnVwZGF0ZUl0ZXJhdGVkVmFsdWUoKTtjLmlmT25lVGltZXx8Yy5pZlZhbHVlLm9wZW4odGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlLHRoaXMpfWEucmVwZWF0PyhjLnJlcGVhdD0hMCxjLm9uZVRpbWU9YS5yZXBlYXQub25seU9uZVRpbWUsYy52YWx1ZT12KEcsYS5yZXBlYXQsZCxiKSk6KGMucmVwZWF0PSExLGMub25lVGltZT1hLmJpbmQub25seU9uZVRpbWUsYy52YWx1ZT12KEYsYS5iaW5kLGQsYikpLGMub25lVGltZXx8Yy52YWx1ZS5vcGVuKHRoaXMudXBkYXRlSXRlcmF0ZWRWYWx1ZSx0aGlzKSx0aGlzLnVwZGF0ZUl0ZXJhdGVkVmFsdWUoKX0sdXBkYXRlSXRlcmF0ZWRWYWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuZGVwcy5oYXNJZil7dmFyIGE9dGhpcy5kZXBzLmlmVmFsdWU7aWYodGhpcy5kZXBzLmlmT25lVGltZXx8KGE9YS5kaXNjYXJkQ2hhbmdlcygpKSwhYSlyZXR1cm4gdm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfXZhciBiPXRoaXMuZGVwcy52YWx1ZTt0aGlzLmRlcHMub25lVGltZXx8KGI9Yi5kaXNjYXJkQ2hhbmdlcygpKSx0aGlzLmRlcHMucmVwZWF0fHwoYj1bYl0pO3ZhciBjPXRoaXMuZGVwcy5yZXBlYXQmJiF0aGlzLmRlcHMub25lVGltZSYmQXJyYXkuaXNBcnJheShiKTt0aGlzLnZhbHVlQ2hhbmdlZChiLGMpfSx2YWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oYSxiKXtBcnJheS5pc0FycmF5KGEpfHwoYT1bXSksYSE9PXRoaXMuaXRlcmF0ZWRWYWx1ZSYmKHRoaXMudW5vYnNlcnZlKCksdGhpcy5wcmVzZW50VmFsdWU9YSxiJiYodGhpcy5hcnJheU9ic2VydmVyPW5ldyBBcnJheU9ic2VydmVyKHRoaXMucHJlc2VudFZhbHVlKSx0aGlzLmFycmF5T2JzZXJ2ZXIub3Blbih0aGlzLmhhbmRsZVNwbGljZXMsdGhpcykpLHRoaXMuaGFuZGxlU3BsaWNlcyhBcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXModGhpcy5wcmVzZW50VmFsdWUsdGhpcy5pdGVyYXRlZFZhbHVlKSkpfSxnZXRMYXN0SW5zdGFuY2VOb2RlOmZ1bmN0aW9uKGEpe2lmKC0xPT1hKXJldHVybiB0aGlzLnRlbXBsYXRlRWxlbWVudF87dmFyIGI9dGhpcy5pbnN0YW5jZXNbYV0sYz1iLnRlcm1pbmF0b3JfO2lmKCFjKXJldHVybiB0aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYS0xKTtpZihjLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fHRoaXMudGVtcGxhdGVFbGVtZW50Xz09PWMpcmV0dXJuIGM7dmFyIGQ9Yy5pdGVyYXRvcl87cmV0dXJuIGQ/ZC5nZXRMYXN0VGVtcGxhdGVOb2RlKCk6Y30sZ2V0TGFzdFRlbXBsYXRlTm9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldExhc3RJbnN0YW5jZU5vZGUodGhpcy5pbnN0YW5jZXMubGVuZ3RoLTEpfSxpbnNlcnRJbnN0YW5jZUF0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEtMSksZD10aGlzLnRlbXBsYXRlRWxlbWVudF8ucGFyZW50Tm9kZTt0aGlzLmluc3RhbmNlcy5zcGxpY2UoYSwwLGIpLGQuaW5zZXJ0QmVmb3JlKGIsYy5uZXh0U2libGluZyl9LGV4dHJhY3RJbnN0YW5jZUF0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYS0xKSxjPXRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhKSxkPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlLGU9dGhpcy5pbnN0YW5jZXMuc3BsaWNlKGEsMSlbMF07YyE9PWI7KXt2YXIgZj1iLm5leHRTaWJsaW5nO2Y9PWMmJihjPWIpLGUuYXBwZW5kQ2hpbGQoZC5yZW1vdmVDaGlsZChmKSl9cmV0dXJuIGV9LGdldERlbGVnYXRlRm46ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YSYmYSh0aGlzLnRlbXBsYXRlRWxlbWVudF8pLCJmdW5jdGlvbiI9PXR5cGVvZiBhP2E6bnVsbH0saGFuZGxlU3BsaWNlczpmdW5jdGlvbihhKXtpZighdGhpcy5jbG9zZWQmJmEubGVuZ3RoKXt2YXIgYj10aGlzLnRlbXBsYXRlRWxlbWVudF87aWYoIWIucGFyZW50Tm9kZSlyZXR1cm4gdm9pZCB0aGlzLmNsb3NlKCk7QXJyYXlPYnNlcnZlci5hcHBseVNwbGljZXModGhpcy5pdGVyYXRlZFZhbHVlLHRoaXMucHJlc2VudFZhbHVlLGEpO3ZhciBjPWIuZGVsZWdhdGVfO3ZvaWQgMD09PXRoaXMuaW5zdGFuY2VNb2RlbEZuXyYmKHRoaXMuaW5zdGFuY2VNb2RlbEZuXz10aGlzLmdldERlbGVnYXRlRm4oYyYmYy5wcmVwYXJlSW5zdGFuY2VNb2RlbCkpLHZvaWQgMD09PXRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl8mJih0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fPXRoaXMuZ2V0RGVsZWdhdGVGbihjJiZjLnByZXBhcmVJbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZCkpO2Zvcih2YXIgZD1uZXcgRCxlPTAsZj0wO2Y8YS5sZW5ndGg7ZisrKXtmb3IodmFyIGc9YVtmXSxoPWcucmVtb3ZlZCxpPTA7aTxoLmxlbmd0aDtpKyspe3ZhciBqPWhbaV0saz10aGlzLmV4dHJhY3RJbnN0YW5jZUF0KGcuaW5kZXgrZSk7ayE9PVEmJmQuc2V0KGosayl9ZS09Zy5hZGRlZENvdW50fWZvcih2YXIgZj0wO2Y8YS5sZW5ndGg7ZisrKWZvcih2YXIgZz1hW2ZdLGw9Zy5pbmRleDtsPGcuaW5kZXgrZy5hZGRlZENvdW50O2wrKyl7dmFyIGo9dGhpcy5pdGVyYXRlZFZhbHVlW2xdLGs9ZC5nZXQoaik7az9kLmRlbGV0ZShqKToodGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYoaj10aGlzLmluc3RhbmNlTW9kZWxGbl8oaikpLGs9dm9pZCAwPT09aj9ROmIuY3JlYXRlSW5zdGFuY2Uoaix2b2lkIDAsYykpLHRoaXMuaW5zZXJ0SW5zdGFuY2VBdChsLGspfWQuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLmNsb3NlSW5zdGFuY2VCaW5kaW5ncyhhKX0sdGhpcyksdGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmdGhpcy5yZXBvcnRJbnN0YW5jZXNNb3ZlZChhKX19LHJlcG9ydEluc3RhbmNlTW92ZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbnN0YW5jZXNbYV07YiE9PVEmJnRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl8oYi50ZW1wbGF0ZUluc3RhbmNlXyxhKX0scmVwb3J0SW5zdGFuY2VzTW92ZWQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz0wLGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGU9YVtkXTtpZigwIT1jKWZvcig7YjxlLmluZGV4Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2Vsc2UgYj1lLmluZGV4O2Zvcig7YjxlLmluZGV4K2UuYWRkZWRDb3VudDspdGhpcy5yZXBvcnRJbnN0YW5jZU1vdmVkKGIpLGIrKztjKz1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aH1pZigwIT1jKWZvcih2YXIgZj10aGlzLmluc3RhbmNlcy5sZW5ndGg7Zj5iOyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrfSxjbG9zZUluc3RhbmNlQmluZGluZ3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEuYmluZGluZ3NfLGM9MDtjPGIubGVuZ3RoO2MrKyliW2NdLmNsb3NlKCl9LHVub2JzZXJ2ZTpmdW5jdGlvbigpe3RoaXMuYXJyYXlPYnNlcnZlciYmKHRoaXMuYXJyYXlPYnNlcnZlci5jbG9zZSgpLHRoaXMuYXJyYXlPYnNlcnZlcj12b2lkIDApfSxjbG9zZTpmdW5jdGlvbigpe2lmKCF0aGlzLmNsb3NlZCl7dGhpcy51bm9ic2VydmUoKTtmb3IodmFyIGE9MDthPHRoaXMuaW5zdGFuY2VzLmxlbmd0aDthKyspdGhpcy5jbG9zZUluc3RhbmNlQmluZGluZ3ModGhpcy5pbnN0YW5jZXNbYV0pO3RoaXMuaW5zdGFuY2VzLmxlbmd0aD0wLHRoaXMuY2xvc2VEZXBzKCksdGhpcy50ZW1wbGF0ZUVsZW1lbnRfLml0ZXJhdG9yXz12b2lkIDAsdGhpcy5jbG9zZWQ9ITB9fX0sSFRNTFRlbXBsYXRlRWxlbWVudC5mb3JBbGxUZW1wbGF0ZXNGcm9tXz1pfSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQVNTRVJUOiAiK2IpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGE+PTQ4JiY1Nz49YX1mdW5jdGlvbiBkKGEpe3JldHVybiAzMj09PWF8fDk9PT1hfHwxMT09PWF8fDEyPT09YXx8MTYwPT09YXx8YT49NTc2MCYmIuGagOGgjuKAgOKAgeKAguKAg+KAhOKAheKAhuKAh+KAiOKAieKAiuKAr+KBn+OAgO+7vyIuaW5kZXhPZihTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKT4wfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIDEwPT09YXx8MTM9PT1hfHw4MjMyPT09YXx8ODIzMz09PWF9ZnVuY3Rpb24gZihhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YX1mdW5jdGlvbiBnKGEpe3JldHVybiAzNj09PWF8fDk1PT09YXx8YT49NjUmJjkwPj1hfHxhPj05NyYmMTIyPj1hfHxhPj00OCYmNTc+PWF9ZnVuY3Rpb24gaChhKXtyZXR1cm4idGhpcyI9PT1hfWZ1bmN0aW9uIGkoKXtmb3IoO1k+WCYmZChXLmNoYXJDb2RlQXQoWCkpOykrK1h9ZnVuY3Rpb24gaigpe3ZhciBhLGI7Zm9yKGE9WCsrO1k+WCYmKGI9Vy5jaGFyQ29kZUF0KFgpLGcoYikpOykrK1g7cmV0dXJuIFcuc2xpY2UoYSxYKX1mdW5jdGlvbiBrKCl7dmFyIGEsYixjO3JldHVybiBhPVgsYj1qKCksYz0xPT09Yi5sZW5ndGg/Uy5JZGVudGlmaWVyOmgoYik/Uy5LZXl3b3JkOiJudWxsIj09PWI/Uy5OdWxsTGl0ZXJhbDoidHJ1ZSI9PT1ifHwiZmFsc2UiPT09Yj9TLkJvb2xlYW5MaXRlcmFsOlMuSWRlbnRpZmllcix7dHlwZTpjLHZhbHVlOmIscmFuZ2U6W2EsWF19fWZ1bmN0aW9uIGwoKXt2YXIgYSxiLGM9WCxkPVcuY2hhckNvZGVBdChYKSxlPVdbWF07c3dpdGNoKGQpe2Nhc2UgNDY6Y2FzZSA0MDpjYXNlIDQxOmNhc2UgNTk6Y2FzZSA0NDpjYXNlIDEyMzpjYXNlIDEyNTpjYXNlIDkxOmNhc2UgOTM6Y2FzZSA1ODpjYXNlIDYzOnJldHVybisrWCx7dHlwZTpTLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShkKSxyYW5nZTpbYyxYXX07ZGVmYXVsdDppZihhPVcuY2hhckNvZGVBdChYKzEpLDYxPT09YSlzd2l0Y2goZCl7Y2FzZSAzNzpjYXNlIDM4OmNhc2UgNDI6Y2FzZSA0MzpjYXNlIDQ1OmNhc2UgNDc6Y2FzZSA2MDpjYXNlIDYyOmNhc2UgMTI0OnJldHVybiBYKz0yLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQpK1N0cmluZy5mcm9tQ2hhckNvZGUoYSkscmFuZ2U6W2MsWF19O2Nhc2UgMzM6Y2FzZSA2MTpyZXR1cm4gWCs9Miw2MT09PVcuY2hhckNvZGVBdChYKSYmKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpXLnNsaWNlKGMsWCkscmFuZ2U6W2MsWF19fX1yZXR1cm4gYj1XW1grMV0sZT09PWImJiImfCIuaW5kZXhPZihlKT49MD8oWCs9Mix7dHlwZTpTLlB1bmN0dWF0b3IsdmFsdWU6ZStiLHJhbmdlOltjLFhdfSk6Ijw+PSErLSolJnxeLyIuaW5kZXhPZihlKT49MD8oKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTplLHJhbmdlOltjLFhdfSk6dm9pZCBzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIil9ZnVuY3Rpb24gbSgpe3ZhciBhLGQsZTtpZihlPVdbWF0sYihjKGUuY2hhckNvZGVBdCgwKSl8fCIuIj09PWUsIk51bWVyaWMgbGl0ZXJhbCBtdXN0IHN0YXJ0IHdpdGggYSBkZWNpbWFsIGRpZ2l0IG9yIGEgZGVjaW1hbCBwb2ludCIpLGQ9WCxhPSIiLCIuIiE9PWUpe2ZvcihhPVdbWCsrXSxlPVdbWF0sIjAiPT09YSYmZSYmYyhlLmNoYXJDb2RlQXQoMCkpJiZzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIik7YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZT1XW1hdfWlmKCIuIj09PWUpe2ZvcihhKz1XW1grK107YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZT1XW1hdfWlmKCJlIj09PWV8fCJFIj09PWUpaWYoYSs9V1tYKytdLGU9V1tYXSwoIisiPT09ZXx8Ii0iPT09ZSkmJihhKz1XW1grK10pLGMoVy5jaGFyQ29kZUF0KFgpKSlmb3IoO2MoVy5jaGFyQ29kZUF0KFgpKTspYSs9V1tYKytdO2Vsc2Ugcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpO3JldHVybiBmKFcuY2hhckNvZGVBdChYKSkmJnMoe30sVi5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx7dHlwZTpTLk51bWVyaWNMaXRlcmFsLHZhbHVlOnBhcnNlRmxvYXQoYSkscmFuZ2U6W2QsWF19fWZ1bmN0aW9uIG4oKXt2YXIgYSxjLGQsZj0iIixnPSExO2ZvcihhPVdbWF0sYigiJyI9PT1hfHwnIic9PT1hLCJTdHJpbmcgbGl0ZXJhbCBtdXN0IHN0YXJ0cyB3aXRoIGEgcXVvdGUiKSxjPVgsKytYO1k+WDspe2lmKGQ9V1tYKytdLGQ9PT1hKXthPSIiO2JyZWFrfWlmKCJcXCI9PT1kKWlmKGQ9V1tYKytdLGQmJmUoZC5jaGFyQ29kZUF0KDApKSkiXHIiPT09ZCYmIlxuIj09PVdbWF0mJisrWDtlbHNlIHN3aXRjaChkKXtjYXNlIm4iOmYrPSJcbiI7YnJlYWs7Y2FzZSJyIjpmKz0iXHIiO2JyZWFrO2Nhc2UidCI6Zis9IgkiO2JyZWFrO2Nhc2UiYiI6Zis9IlxiIjticmVhaztjYXNlImYiOmYrPSJcZiI7YnJlYWs7Y2FzZSJ2IjpmKz0iCyI7YnJlYWs7ZGVmYXVsdDpmKz1kfWVsc2V7aWYoZShkLmNoYXJDb2RlQXQoMCkpKWJyZWFrO2YrPWR9fXJldHVybiIiIT09YSYmcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHt0eXBlOlMuU3RyaW5nTGl0ZXJhbCx2YWx1ZTpmLG9jdGFsOmcscmFuZ2U6W2MsWF19fWZ1bmN0aW9uIG8oYSl7cmV0dXJuIGEudHlwZT09PVMuSWRlbnRpZmllcnx8YS50eXBlPT09Uy5LZXl3b3JkfHxhLnR5cGU9PT1TLkJvb2xlYW5MaXRlcmFsfHxhLnR5cGU9PT1TLk51bGxMaXRlcmFsfWZ1bmN0aW9uIHAoKXt2YXIgYTtyZXR1cm4gaSgpLFg+PVk/e3R5cGU6Uy5FT0YscmFuZ2U6W1gsWF19OihhPVcuY2hhckNvZGVBdChYKSw0MD09PWF8fDQxPT09YXx8NTg9PT1hP2woKTozOT09PWF8fDM0PT09YT9uKCk6ZihhKT9rKCk6NDY9PT1hP2MoVy5jaGFyQ29kZUF0KFgrMSkpP20oKTpsKCk6YyhhKT9tKCk6bCgpKX1mdW5jdGlvbiBxKCl7dmFyIGE7cmV0dXJuIGE9JCxYPWEucmFuZ2VbMV0sJD1wKCksWD1hLnJhbmdlWzFdLGF9ZnVuY3Rpb24gcigpe3ZhciBhO2E9WCwkPXAoKSxYPWF9ZnVuY3Rpb24gcyhhLGMpe3ZhciBkLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpLGY9Yy5yZXBsYWNlKC8lKFxkKS9nLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIoYzxlLmxlbmd0aCwiTWVzc2FnZSByZWZlcmVuY2UgbXVzdCBiZSBpbiByYW5nZSIpLGVbY119KTt0aHJvdyBkPW5ldyBFcnJvcihmKSxkLmluZGV4PVgsZC5kZXNjcmlwdGlvbj1mLGR9ZnVuY3Rpb24gdChhKXtzKGEsVi5VbmV4cGVjdGVkVG9rZW4sYS52YWx1ZSl9ZnVuY3Rpb24gdShhKXt2YXIgYj1xKCk7KGIudHlwZSE9PVMuUHVuY3R1YXRvcnx8Yi52YWx1ZSE9PWEpJiZ0KGIpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuICQudHlwZT09PVMuUHVuY3R1YXRvciYmJC52YWx1ZT09PWF9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gJC50eXBlPT09Uy5LZXl3b3JkJiYkLnZhbHVlPT09YX1mdW5jdGlvbiB4KCl7dmFyIGE9W107Zm9yKHUoIlsiKTshdigiXSIpOyl2KCIsIik/KHEoKSxhLnB1c2gobnVsbCkpOihhLnB1c2goYmIoKSksdigiXSIpfHx1KCIsIikpO3JldHVybiB1KCJdIiksWi5jcmVhdGVBcnJheUV4cHJlc3Npb24oYSl9ZnVuY3Rpb24geSgpe3ZhciBhO3JldHVybiBpKCksYT1xKCksYS50eXBlPT09Uy5TdHJpbmdMaXRlcmFsfHxhLnR5cGU9PT1TLk51bWVyaWNMaXRlcmFsP1ouY3JlYXRlTGl0ZXJhbChhKTpaLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24geigpe3ZhciBhLGI7cmV0dXJuIGE9JCxpKCksKGEudHlwZT09PVMuRU9GfHxhLnR5cGU9PT1TLlB1bmN0dWF0b3IpJiZ0KGEpLGI9eSgpLHUoIjoiKSxaLmNyZWF0ZVByb3BlcnR5KCJpbml0IixiLGJiKCkpfWZ1bmN0aW9uIEEoKXt2YXIgYT1bXTtmb3IodSgieyIpOyF2KCJ9Iik7KWEucHVzaCh6KCkpLHYoIn0iKXx8dSgiLCIpO3JldHVybiB1KCJ9IiksWi5jcmVhdGVPYmplY3RFeHByZXNzaW9uKGEpfWZ1bmN0aW9uIEIoKXt2YXIgYTtyZXR1cm4gdSgiKCIpLGE9YmIoKSx1KCIpIiksYX1mdW5jdGlvbiBDKCl7dmFyIGEsYixjO3JldHVybiB2KCIoIik/QigpOihhPSQudHlwZSxhPT09Uy5JZGVudGlmaWVyP2M9Wi5jcmVhdGVJZGVudGlmaWVyKHEoKS52YWx1ZSk6YT09PVMuU3RyaW5nTGl0ZXJhbHx8YT09PVMuTnVtZXJpY0xpdGVyYWw/Yz1aLmNyZWF0ZUxpdGVyYWwocSgpKTphPT09Uy5LZXl3b3JkP3coInRoaXMiKSYmKHEoKSxjPVouY3JlYXRlVGhpc0V4cHJlc3Npb24oKSk6YT09PVMuQm9vbGVhbkxpdGVyYWw/KGI9cSgpLGIudmFsdWU9InRydWUiPT09Yi52YWx1ZSxjPVouY3JlYXRlTGl0ZXJhbChiKSk6YT09PVMuTnVsbExpdGVyYWw/KGI9cSgpLGIudmFsdWU9bnVsbCxjPVouY3JlYXRlTGl0ZXJhbChiKSk6digiWyIpP2M9eCgpOnYoInsiKSYmKGM9QSgpKSxjP2M6dm9pZCB0KHEoKSkpfWZ1bmN0aW9uIEQoKXt2YXIgYT1bXTtpZih1KCIoIiksIXYoIikiKSlmb3IoO1k+WCYmKGEucHVzaChiYigpKSwhdigiKSIpKTspdSgiLCIpO3JldHVybiB1KCIpIiksYX1mdW5jdGlvbiBFKCl7dmFyIGE7cmV0dXJuIGE9cSgpLG8oYSl8fHQoYSksWi5jcmVhdGVJZGVudGlmaWVyKGEudmFsdWUpfWZ1bmN0aW9uIEYoKXtyZXR1cm4gdSgiLiIpLEUoKX1mdW5jdGlvbiBHKCl7dmFyIGE7cmV0dXJuIHUoIlsiKSxhPWJiKCksdSgiXSIpLGF9ZnVuY3Rpb24gSCgpe3ZhciBhLGI7Zm9yKGE9QygpO3YoIi4iKXx8digiWyIpOyl2KCJbIik/KGI9RygpLGE9Wi5jcmVhdGVNZW1iZXJFeHByZXNzaW9uKCJbIixhLGIpKTooYj1GKCksYT1aLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIi4iLGEsYikpO3JldHVybiBhfWZ1bmN0aW9uIEkoKXt2YXIgYSxiO3JldHVybiAkLnR5cGUhPT1TLlB1bmN0dWF0b3ImJiQudHlwZSE9PVMuS2V5d29yZD9iPWFiKCk6digiKyIpfHx2KCItIil8fHYoIiEiKT8oYT1xKCksYj1JKCksYj1aLmNyZWF0ZVVuYXJ5RXhwcmVzc2lvbihhLnZhbHVlLGIpKTp3KCJkZWxldGUiKXx8dygidm9pZCIpfHx3KCJ0eXBlb2YiKT9zKHt9LFYuVW5leHBlY3RlZFRva2VuKTpiPWFiKCksYn1mdW5jdGlvbiBKKGEpe3ZhciBiPTA7aWYoYS50eXBlIT09Uy5QdW5jdHVhdG9yJiZhLnR5cGUhPT1TLktleXdvcmQpcmV0dXJuIDA7c3dpdGNoKGEudmFsdWUpe2Nhc2UifHwiOmI9MTticmVhaztjYXNlIiYmIjpiPTI7YnJlYWs7Y2FzZSI9PSI6Y2FzZSIhPSI6Y2FzZSI9PT0iOmNhc2UiIT09IjpiPTY7YnJlYWs7Y2FzZSI8IjpjYXNlIj4iOmNhc2UiPD0iOmNhc2UiPj0iOmNhc2UiaW5zdGFuY2VvZiI6Yj03O2JyZWFrO2Nhc2UiaW4iOmI9NzticmVhaztjYXNlIisiOmNhc2UiLSI6Yj05O2JyZWFrO2Nhc2UiKiI6Y2FzZSIvIjpjYXNlIiUiOmI9MTF9cmV0dXJuIGJ9ZnVuY3Rpb24gSygpe3ZhciBhLGIsYyxkLGUsZixnLGg7aWYoZz1JKCksYj0kLGM9SihiKSwwPT09YylyZXR1cm4gZztmb3IoYi5wcmVjPWMscSgpLGU9SSgpLGQ9W2csYixlXTsoYz1KKCQpKT4wOyl7Zm9yKDtkLmxlbmd0aD4yJiZjPD1kW2QubGVuZ3RoLTJdLnByZWM7KWU9ZC5wb3AoKSxmPWQucG9wKCkudmFsdWUsZz1kLnBvcCgpLGE9Wi5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGYsZyxlKSxkLnB1c2goYSk7Yj1xKCksYi5wcmVjPWMsZC5wdXNoKGIpLGE9SSgpLGQucHVzaChhKX1mb3IoaD1kLmxlbmd0aC0xLGE9ZFtoXTtoPjE7KWE9Wi5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGRbaC0xXS52YWx1ZSxkW2gtMl0sYSksaC09MjtyZXR1cm4gYX1mdW5jdGlvbiBMKCl7dmFyIGEsYixjO3JldHVybiBhPUsoKSx2KCI/IikmJihxKCksYj1MKCksdSgiOiIpLGM9TCgpLGE9Wi5jcmVhdGVDb25kaXRpb25hbEV4cHJlc3Npb24oYSxiLGMpKSxhfWZ1bmN0aW9uIE0oKXt2YXIgYSxiO3JldHVybiBhPXEoKSxhLnR5cGUhPT1TLklkZW50aWZpZXImJnQoYSksYj12KCIoIik/RCgpOltdLFouY3JlYXRlRmlsdGVyKGEudmFsdWUsYil9ZnVuY3Rpb24gTigpe2Zvcig7digifCIpOylxKCksTSgpfWZ1bmN0aW9uIE8oKXtpKCkscigpO3ZhciBhPWJiKCk7YSYmKCIsIj09PSQudmFsdWV8fCJpbiI9PSQudmFsdWUmJmEudHlwZT09PVUuSWRlbnRpZmllcj9RKGEpOihOKCksImFzIj09PSQudmFsdWU/UChhKTpaLmNyZWF0ZVRvcExldmVsKGEpKSksJC50eXBlIT09Uy5FT0YmJnQoJCl9ZnVuY3Rpb24gUChhKXtxKCk7dmFyIGI9cSgpLnZhbHVlO1ouY3JlYXRlQXNFeHByZXNzaW9uKGEsYil9ZnVuY3Rpb24gUShhKXt2YXIgYjsiLCI9PT0kLnZhbHVlJiYocSgpLCQudHlwZSE9PVMuSWRlbnRpZmllciYmdCgkKSxiPXEoKS52YWx1ZSkscSgpO3ZhciBjPWJiKCk7TigpLFouY3JlYXRlSW5FeHByZXNzaW9uKGEubmFtZSxiLGMpfWZ1bmN0aW9uIFIoYSxiKXtyZXR1cm4gWj1iLFc9YSxYPTAsWT1XLmxlbmd0aCwkPW51bGwsXz17bGFiZWxTZXQ6e319LE8oKX12YXIgUyxULFUsVixXLFgsWSxaLCQsXztTPXtCb29sZWFuTGl0ZXJhbDoxLEVPRjoyLElkZW50aWZpZXI6MyxLZXl3b3JkOjQsTnVsbExpdGVyYWw6NSxOdW1lcmljTGl0ZXJhbDo2LFB1bmN0dWF0b3I6NyxTdHJpbmdMaXRlcmFsOjh9LFQ9e30sVFtTLkJvb2xlYW5MaXRlcmFsXT0iQm9vbGVhbiIsVFtTLkVPRl09IjxlbmQ+IixUW1MuSWRlbnRpZmllcl09IklkZW50aWZpZXIiLFRbUy5LZXl3b3JkXT0iS2V5d29yZCIsVFtTLk51bGxMaXRlcmFsXT0iTnVsbCIsVFtTLk51bWVyaWNMaXRlcmFsXT0iTnVtZXJpYyIsVFtTLlB1bmN0dWF0b3JdPSJQdW5jdHVhdG9yIixUW1MuU3RyaW5nTGl0ZXJhbF09IlN0cmluZyIsVT17QXJyYXlFeHByZXNzaW9uOiJBcnJheUV4cHJlc3Npb24iLEJpbmFyeUV4cHJlc3Npb246IkJpbmFyeUV4cHJlc3Npb24iLENhbGxFeHByZXNzaW9uOiJDYWxsRXhwcmVzc2lvbiIsQ29uZGl0aW9uYWxFeHByZXNzaW9uOiJDb25kaXRpb25hbEV4cHJlc3Npb24iLEVtcHR5U3RhdGVtZW50OiJFbXB0eVN0YXRlbWVudCIsRXhwcmVzc2lvblN0YXRlbWVudDoiRXhwcmVzc2lvblN0YXRlbWVudCIsSWRlbnRpZmllcjoiSWRlbnRpZmllciIsTGl0ZXJhbDoiTGl0ZXJhbCIsTGFiZWxlZFN0YXRlbWVudDoiTGFiZWxlZFN0YXRlbWVudCIsTG9naWNhbEV4cHJlc3Npb246IkxvZ2ljYWxFeHByZXNzaW9uIixNZW1iZXJFeHByZXNzaW9uOiJNZW1iZXJFeHByZXNzaW9uIixPYmplY3RFeHByZXNzaW9uOiJPYmplY3RFeHByZXNzaW9uIixQcm9ncmFtOiJQcm9ncmFtIixQcm9wZXJ0eToiUHJvcGVydHkiLFRoaXNFeHByZXNzaW9uOiJUaGlzRXhwcmVzc2lvbiIsVW5hcnlFeHByZXNzaW9uOiJVbmFyeUV4cHJlc3Npb24ifSxWPXtVbmV4cGVjdGVkVG9rZW46IlVuZXhwZWN0ZWQgdG9rZW4gJTAiLFVua25vd25MYWJlbDoiVW5kZWZpbmVkIGxhYmVsICclMCciLFJlZGVjbGFyYXRpb246IiUwICclMScgaGFzIGFscmVhZHkgYmVlbiBkZWNsYXJlZCJ9O3ZhciBhYj1ILGJiPUw7YS5lc3ByaW1hPXtwYXJzZTpSfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiLGQsZSl7dmFyIGY7dHJ5e2lmKGY9YyhhKSxmLnNjb3BlSWRlbnQmJihkLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fCJURU1QTEFURSIhPT1kLnRhZ05hbWV8fCJiaW5kIiE9PWImJiJyZXBlYXQiIT09YikpdGhyb3cgRXJyb3IoImFzIGFuZCBpbiBjYW4gb25seSBiZSB1c2VkIHdpdGhpbiA8dGVtcGxhdGUgYmluZC9yZXBlYXQ+Iil9Y2F0Y2goZyl7cmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiSW52YWxpZCBleHByZXNzaW9uIHN5bnRheDogIithLGcpfXJldHVybiBmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Zi5nZXRCaW5kaW5nKGEsZSxjKTtyZXR1cm4gZi5zY29wZUlkZW50JiZkJiYoYi5wb2x5bWVyRXhwcmVzc2lvblNjb3BlSWRlbnRfPWYuc2NvcGVJZGVudCxmLmluZGV4SWRlbnQmJihiLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF89Zi5pbmRleElkZW50KSksZH19ZnVuY3Rpb24gYyhhKXt2YXIgYj10W2FdO2lmKCFiKXt2YXIgYz1uZXcgajtlc3ByaW1hLnBhcnNlKGEsYyksYj1uZXcgbChjKSx0W2FdPWJ9cmV0dXJuIGJ9ZnVuY3Rpb24gZChhKXt0aGlzLnZhbHVlPWEsdGhpcy52YWx1ZUZuXz12b2lkIDB9ZnVuY3Rpb24gZShhKXt0aGlzLm5hbWU9YSx0aGlzLnBhdGg9UGF0aC5nZXQoYSl9ZnVuY3Rpb24gZihhLGIsYyl7IlsiPT1jJiZiIGluc3RhbmNlb2YgZCYmUGF0aC5nZXQoYi52YWx1ZSkudmFsaWQmJihjPSIuIixiPW5ldyBlKGIudmFsdWUpKSx0aGlzLmR5bmFtaWNEZXBzPSJmdW5jdGlvbiI9PXR5cGVvZiBhfHxhLmR5bmFtaWMsdGhpcy5keW5hbWljPSJmdW5jdGlvbiI9PXR5cGVvZiBifHxiLmR5bmFtaWN8fCJbIj09Yyx0aGlzLnNpbXBsZVBhdGg9IXRoaXMuZHluYW1pYyYmIXRoaXMuZHluYW1pY0RlcHMmJmIgaW5zdGFuY2VvZiBlJiYoYSBpbnN0YW5jZW9mIGZ8fGEgaW5zdGFuY2VvZiBlKSx0aGlzLm9iamVjdD10aGlzLnNpbXBsZVBhdGg/YTppKGEpLHRoaXMucHJvcGVydHk9Ii4iPT1jP2I6aShiKX1mdW5jdGlvbiBnKGEsYil7dGhpcy5uYW1lPWEsdGhpcy5hcmdzPVtdO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXRoaXMuYXJnc1tjXT1pKGJbY10pfWZ1bmN0aW9uIGgoKXt0aHJvdyBFcnJvcigiTm90IEltcGxlbWVudGVkIil9ZnVuY3Rpb24gaShhKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYT9hOmEudmFsdWVGbigpfWZ1bmN0aW9uIGooKXt0aGlzLmV4cHJlc3Npb249bnVsbCx0aGlzLmZpbHRlcnM9W10sdGhpcy5kZXBzPXt9LHRoaXMuY3VycmVudFBhdGg9dm9pZCAwLHRoaXMuc2NvcGVJZGVudD12b2lkIDAsdGhpcy5pbmRleElkZW50PXZvaWQgMCx0aGlzLmR5bmFtaWNEZXBzPSExfWZ1bmN0aW9uIGsoYSl7dGhpcy52YWx1ZV89YX1mdW5jdGlvbiBsKGEpe2lmKHRoaXMuc2NvcGVJZGVudD1hLnNjb3BlSWRlbnQsdGhpcy5pbmRleElkZW50PWEuaW5kZXhJZGVudCwhYS5leHByZXNzaW9uKXRocm93IEVycm9yKCJObyBleHByZXNzaW9uIGZvdW5kLiIpO3RoaXMuZXhwcmVzc2lvbj1hLmV4cHJlc3Npb24saSh0aGlzLmV4cHJlc3Npb24pLHRoaXMuZmlsdGVycz1hLmZpbHRlcnMsdGhpcy5keW5hbWljRGVwcz1hLmR5bmFtaWNEZXBzfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIFN0cmluZyhhKS5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBuKGEpe3JldHVybiJvIj09PWFbMF0mJiJuIj09PWFbMV0mJiItIj09PWFbMl19ZnVuY3Rpb24gbyhhLGIpe2Zvcig7YVt4XSYmIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGIpOylhPWFbeF07cmV0dXJuIGF9ZnVuY3Rpb24gcChhLGIpe2lmKDA9PWIubGVuZ3RoKXJldHVybiB2b2lkIDA7aWYoMT09Yi5sZW5ndGgpcmV0dXJuIG8oYSxiWzBdKTtmb3IodmFyIGM9MDtudWxsIT1hJiZjPGIubGVuZ3RoLTE7YysrKWE9YVtiW2NdXTtyZXR1cm4gYX1mdW5jdGlvbiBxKGEsYixjKXt2YXIgZD1iLnN1YnN0cmluZygzKTtyZXR1cm4gZD13W2RdfHxkLGZ1bmN0aW9uKGIsZSxmKXtmdW5jdGlvbiBnKCl7cmV0dXJuInt7ICIrYSsiIH19In12YXIgaCxpLGo7cmV0dXJuIGo9ImZ1bmN0aW9uIj09dHlwZW9mIGMucmVzb2x2ZUV2ZW50SGFuZGxlcj9mdW5jdGlvbihkKXtoPWh8fGMucmVzb2x2ZUV2ZW50SGFuZGxlcihiLGEsZSksaChkLGQuZGV0YWlsLGQuY3VycmVudFRhcmdldCksUGxhdGZvcm0mJiJmdW5jdGlvbiI9PXR5cGVvZiBQbGF0Zm9ybS5mbHVzaCYmUGxhdGZvcm0uZmx1c2goKX06ZnVuY3Rpb24oYyl7aD1ofHxhLmdldFZhbHVlRnJvbShiKSxpPWl8fHAoYixhLGUpLGguYXBwbHkoaSxbYyxjLmRldGFpbCxjLmN1cnJlbnRUYXJnZXRdKSxQbGF0Zm9ybSYmImZ1bmN0aW9uIj09dHlwZW9mIFBsYXRmb3JtLmZsdXNoJiZQbGF0Zm9ybS5mbHVzaCgpfSxlLmFkZEV2ZW50TGlzdGVuZXIoZCxqKSxmP3ZvaWQgMDp7b3BlbjpnLGRpc2NhcmRDaGFuZ2VzOmcsY2xvc2U6ZnVuY3Rpb24oKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxqKX19fX1mdW5jdGlvbiByKGEpe3N3aXRjaChhKXtjYXNlIiI6cmV0dXJuITE7Y2FzZSJmYWxzZSI6Y2FzZSJudWxsIjpjYXNlInRydWUiOnJldHVybiEwfXJldHVybiBpc05hTihOdW1iZXIoYSkpPyExOiEwfWZ1bmN0aW9uIHMoKXt9dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtkLnByb3RvdHlwZT17dmFsdWVGbjpmdW5jdGlvbigpe2lmKCF0aGlzLnZhbHVlRm5fKXt2YXIgYT10aGlzLnZhbHVlO3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oKXtyZXR1cm4gYX19cmV0dXJuIHRoaXMudmFsdWVGbl99fSxlLnByb3RvdHlwZT17dmFsdWVGbjpmdW5jdGlvbigpe2lmKCF0aGlzLnZhbHVlRm5fKXt2YXIgYT0odGhpcy5uYW1lLHRoaXMucGF0aCk7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbihiLGMpe3JldHVybiBjJiZjLmFkZFBhdGgoYixhKSxhLmdldFZhbHVlRnJvbShiKX19cmV0dXJuIHRoaXMudmFsdWVGbl99LHNldFZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDE9PXRoaXMucGF0aC5sZW5ndGgsYT1vKGEsdGhpcy5wYXRoWzBdKSx0aGlzLnBhdGguc2V0VmFsdWVGcm9tKGEsYil9fSxmLnByb3RvdHlwZT17Z2V0IGZ1bGxQYXRoKCl7aWYoIXRoaXMuZnVsbFBhdGhfKXt2YXIgYT10aGlzLm9iamVjdCBpbnN0YW5jZW9mIGU/dGhpcy5vYmplY3QubmFtZTp0aGlzLm9iamVjdC5mdWxsUGF0aDt0aGlzLmZ1bGxQYXRoXz1QYXRoLmdldChhKyIuIit0aGlzLnByb3BlcnR5Lm5hbWUpfXJldHVybiB0aGlzLmZ1bGxQYXRoX30sdmFsdWVGbjpmdW5jdGlvbigpe2lmKCF0aGlzLnZhbHVlRm5fKXt2YXIgYT10aGlzLm9iamVjdDtpZih0aGlzLnNpbXBsZVBhdGgpe3ZhciBiPXRoaXMuZnVsbFBhdGg7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbihhLGMpe3JldHVybiBjJiZjLmFkZFBhdGgoYSxiKSxiLmdldFZhbHVlRnJvbShhKX19ZWxzZSBpZih0aGlzLnByb3BlcnR5IGluc3RhbmNlb2YgZSl7dmFyIGI9UGF0aC5nZXQodGhpcy5wcm9wZXJ0eS5uYW1lKTt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGMsZCl7dmFyIGU9YShjLGQpO3JldHVybiBkJiZkLmFkZFBhdGgoZSxiKSxiLmdldFZhbHVlRnJvbShlKX19ZWxzZXt2YXIgYz10aGlzLnByb3BlcnR5O3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oYixkKXt2YXIgZT1hKGIsZCksZj1jKGIsZCk7cmV0dXJuIGQmJmQuYWRkUGF0aChlLGYpLGU/ZVtmXTp2b2lkIDB9fX1yZXR1cm4gdGhpcy52YWx1ZUZuX30sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnNpbXBsZVBhdGgpcmV0dXJuIHRoaXMuZnVsbFBhdGguc2V0VmFsdWVGcm9tKGEsYiksYjt2YXIgYz10aGlzLm9iamVjdChhKSxkPXRoaXMucHJvcGVydHkgaW5zdGFuY2VvZiBlP3RoaXMucHJvcGVydHkubmFtZTp0aGlzLnByb3BlcnR5KGEpO3JldHVybiBjW2RdPWJ9fSxnLnByb3RvdHlwZT17dHJhbnNmb3JtOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Y1t0aGlzLm5hbWVdLGc9ZDtpZihmKWc9dm9pZCAwO2Vsc2UgaWYoZj1nW3RoaXMubmFtZV0sIWYpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiQ2Fubm90IGZpbmQgZmlsdGVyOiAiK3RoaXMubmFtZSk7aWYoYj9mPWYudG9Nb2RlbDoiZnVuY3Rpb24iPT10eXBlb2YgZi50b0RPTSYmKGY9Zi50b0RPTSksImZ1bmN0aW9uIiE9dHlwZW9mIGYpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiTm8gIisoYj8idG9Nb2RlbCI6InRvRE9NIikrIiBmb3VuZCBvbiIrdGhpcy5uYW1lKTtmb3IodmFyIGg9W2FdLGo9MDtqPHRoaXMuYXJncy5sZW5ndGg7aisrKWhbaisxXT1pKHRoaXMuYXJnc1tqXSkoZCxlKTtyZXR1cm4gZi5hcHBseShnLGgpfX07dmFyIHU9eyIrIjpmdW5jdGlvbihhKXtyZXR1cm4rYX0sIi0iOmZ1bmN0aW9uKGEpe3JldHVybi1hfSwiISI6ZnVuY3Rpb24oYSl7cmV0dXJuIWF9fSx2PXsiKyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStifSwiLSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS1ifSwiKiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSpifSwiLyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS9ifSwiJSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSVifSwiPCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj5hfSwiPiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT5ifSwiPD0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI+PWF9LCI+PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT49Yn0sIj09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPT1ifSwiIT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPWJ9LCI9PT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifSwiIT09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhIT09Yn0sIiYmIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJiZifSwifHwiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGF8fGJ9fTtqLnByb3RvdHlwZT17Y3JlYXRlVW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYil7aWYoIXVbYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7cmV0dXJuIGI9aShiKSxmdW5jdGlvbihjLGQpe3JldHVybiB1W2FdKGIoYyxkKSl9fSxjcmVhdGVCaW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtpZighdlthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj1pKGIpLGM9aShjKSxmdW5jdGlvbihkLGUpe3JldHVybiB2W2FdKGIoZCxlKSxjKGQsZSkpfX0sY3JlYXRlQ29uZGl0aW9uYWxFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYT1pKGEpLGI9aShiKSxjPWkoYyksZnVuY3Rpb24oZCxlKXtyZXR1cm4gYShkLGUpP2IoZCxlKTpjKGQsZSl9fSxjcmVhdGVJZGVudGlmaWVyOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBlKGEpO3JldHVybiBiLnR5cGU9IklkZW50aWZpZXIiLGJ9LGNyZWF0ZU1lbWJlckV4cHJlc3Npb246ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW5ldyBmKGIsYyxhKTtyZXR1cm4gZC5keW5hbWljRGVwcyYmKHRoaXMuZHluYW1pY0RlcHM9ITApLGR9LGNyZWF0ZUxpdGVyYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBkKGEudmFsdWUpfSxjcmVhdGVBcnJheUV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXT1pKGFbYl0pO3JldHVybiBmdW5jdGlvbihiLGMpe2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmxlbmd0aDtlKyspZC5wdXNoKGFbZV0oYixjKSk7cmV0dXJuIGR9fSxjcmVhdGVQcm9wZXJ0eTpmdW5jdGlvbihhLGIsYyl7cmV0dXJue2tleTpiIGluc3RhbmNlb2YgZT9iLm5hbWU6Yi52YWx1ZSx2YWx1ZTpjfX0sY3JlYXRlT2JqZWN0RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLnZhbHVlPWkoYVtiXS52YWx1ZSk7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Zm9yKHZhciBkPXt9LGU9MDtlPGEubGVuZ3RoO2UrKylkW2FbZV0ua2V5XT1hW2VdLnZhbHVlKGIsYyk7cmV0dXJuIGR9fSxjcmVhdGVGaWx0ZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLmZpbHRlcnMucHVzaChuZXcgZyhhLGIpKX0sY3JlYXRlQXNFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYil7dGhpcy5leHByZXNzaW9uPWEsdGhpcy5zY29wZUlkZW50PWJ9LGNyZWF0ZUluRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7dGhpcy5leHByZXNzaW9uPWMsdGhpcy5zY29wZUlkZW50PWEsdGhpcy5pbmRleElkZW50PWJ9LGNyZWF0ZVRvcExldmVsOmZ1bmN0aW9uKGEpe3RoaXMuZXhwcmVzc2lvbj1hfSxjcmVhdGVUaGlzRXhwcmVzc2lvbjpofSxrLnByb3RvdHlwZT17b3BlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlX30sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV99LGRlbGl2ZXI6ZnVuY3Rpb24oKXt9LGNsb3NlOmZ1bmN0aW9uKCl7fX0sbC5wcm90b3R5cGU9e2dldEJpbmRpbmc6ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXtpZihoKXJldHVybiBoPSExLGc7aS5keW5hbWljRGVwcyYmZi5zdGFydFJlc2V0KCk7dmFyIGM9aS5nZXRWYWx1ZShhLGkuZHluYW1pY0RlcHM/Zjp2b2lkIDAsYik7cmV0dXJuIGkuZHluYW1pY0RlcHMmJmYuZmluaXNoUmVzZXQoKSxjfWZ1bmN0aW9uIGUoYyl7cmV0dXJuIGkuc2V0VmFsdWUoYSxjLGIpLGN9aWYoYylyZXR1cm4gdGhpcy5nZXRWYWx1ZShhLHZvaWQgMCxiKTt2YXIgZj1uZXcgQ29tcG91bmRPYnNlcnZlcixnPXRoaXMuZ2V0VmFsdWUoYSxmLGIpLGg9ITAsaT10aGlzO3JldHVybiBuZXcgT2JzZXJ2ZXJUcmFuc2Zvcm0oZixkLGUsITApfSxnZXRWYWx1ZTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWkodGhpcy5leHByZXNzaW9uKShhLGIpLGU9MDtlPHRoaXMuZmlsdGVycy5sZW5ndGg7ZSsrKWQ9dGhpcy5maWx0ZXJzW2VdLnRyYW5zZm9ybShkLCExLGMsYSxiKTtyZXR1cm4gZH0sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD10aGlzLmZpbHRlcnM/dGhpcy5maWx0ZXJzLmxlbmd0aDowO2QtLT4wOyliPXRoaXMuZmlsdGVyc1tkXS50cmFuc2Zvcm0oYiwhMCxjLGEpO3JldHVybiB0aGlzLmV4cHJlc3Npb24uc2V0VmFsdWU/dGhpcy5leHByZXNzaW9uLnNldFZhbHVlKGEsYik6dm9pZCAwfX07dmFyIHc9e307WyJ3ZWJraXRBbmltYXRpb25TdGFydCIsIndlYmtpdEFuaW1hdGlvbkVuZCIsIndlYmtpdFRyYW5zaXRpb25FbmQiLCJET01Gb2N1c091dCIsIkRPTUZvY3VzSW4iLCJET01Nb3VzZVNjcm9sbCJdLmZvckVhY2goZnVuY3Rpb24oYSl7d1thLnRvTG93ZXJDYXNlKCldPWF9KTt2YXIgeD0iQCIrTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7cy5wcm90b3R5cGU9e3N0eWxlT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWIucHVzaChtKGMpKyI6ICIrYVtjXSk7cmV0dXJuIGIuam9pbigiOyAiKX0sdG9rZW5MaXN0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWFbY10mJmIucHVzaChjKTtyZXR1cm4gYi5qb2luKCIgIil9LHByZXBhcmVJbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZDpmdW5jdGlvbihhKXt2YXIgYj1hLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF87aWYoYilyZXR1cm4gZnVuY3Rpb24oYSxjKXthLm1vZGVsW2JdPWN9fSxwcmVwYXJlQmluZGluZzpmdW5jdGlvbihhLGMsZCl7dmFyIGU9UGF0aC5nZXQoYSk7aWYobihjKSlyZXR1cm4gZS52YWxpZD9xKGUsYyx0aGlzKTp2b2lkIGNvbnNvbGUuZXJyb3IoIm9uLSogYmluZGluZ3MgbXVzdCBiZSBzaW1wbGUgcGF0aCBleHByZXNzaW9ucyIpO3tpZihyKGEpfHwhZS52YWxpZClyZXR1cm4gYihhLGMsZCx0aGlzKTtpZigxPT1lLmxlbmd0aClyZXR1cm4gZnVuY3Rpb24oYSxiLGMpe2lmKGMpcmV0dXJuIGUuZ2V0VmFsdWVGcm9tKGEpO3ZhciBkPW8oYSxlWzBdKTtyZXR1cm4gbmV3IFBhdGhPYnNlcnZlcihkLGUpfX19LHByZXBhcmVJbnN0YW5jZU1vZGVsOmZ1bmN0aW9uKGEpe3ZhciBiPWEucG9seW1lckV4cHJlc3Npb25TY29wZUlkZW50XztpZihiKXt2YXIgYz1hLnRlbXBsYXRlSW5zdGFuY2U/YS50ZW1wbGF0ZUluc3RhbmNlLm1vZGVsOmEubW9kZWwsZD1hLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF87cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBlPU9iamVjdC5jcmVhdGUoYyk7cmV0dXJuIGVbYl09YSxlW2RdPXZvaWQgMCxlW3hdPWMsZX19fX0sYS5Qb2x5bWVyRXhwcmVzc2lvbnM9cyxhLmV4cG9zZUdldEV4cHJlc3Npb24mJihhLmdldEV4cHJlc3Npb25fPWMpLGEuUG9seW1lckV4cHJlc3Npb25zLnByZXBhcmVFdmVudEJpbmRpbmc9cX0odGhpcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2V8fChlPSEwLGEuZW5kT2ZNaWNyb3Rhc2soZnVuY3Rpb24oKXtlPSExLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXAoIlBsYXRmb3JtLmZsdXNoKCkiKSxhLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCksbG9nRmxhZ3MuZGF0YSYmY29uc29sZS5ncm91cEVuZCgpCn0pKX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2MudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2QuaW5zZXJ0QmVmb3JlKGMsZC5maXJzdENoaWxkKTt2YXIgZTtpZihPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlKWI9ZnVuY3Rpb24oKXt9O2Vsc2V7dmFyIGY9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLGEuZmx1c2hQb2xsPXNldEludGVydmFsKGIsZil9KX1pZih3aW5kb3cuQ3VzdG9tRWxlbWVudHMmJiFDdXN0b21FbGVtZW50cy51c2VOYXRpdmUpe3ZhciBnPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlO0RvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Zy5jYWxsKHRoaXMsYSxiKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChjKSxjfX1hLmZsdXNoPWJ9KHdpbmRvdy5QbGF0Zm9ybSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsYXRmb3JtLmpzLm1hcA==",
                "body": "LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxMi0yMDE0IFRoZSBQb2x5bWVyIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIAogKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQKICogbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZQogKiBtZXQ6CiAqIAogKiAgICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0CiAqIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci4KICogICAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlCiAqIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIKICogaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZQogKiBkaXN0cmlidXRpb24uCiAqICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0cwogKiBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbQogKiB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLgogKiAKICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUwogKiAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVAogKiBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IKICogQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQKICogT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsCiAqIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QKICogTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsCiAqIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWQogKiBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUCiAqIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRQogKiBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgogKi8KLy8gQHZlcnNpb246IDAuMi4yCmZ1bmN0aW9uIFBvaW50ZXJHZXN0dXJlRXZlbnQoYSxiKXt2YXIgYz1ifHx7fSxkPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLGU9e2J1YmJsZXM6Qm9vbGVhbihjLmJ1YmJsZXMpPT09Yy5idWJibGVzfHwhMCxjYW5jZWxhYmxlOkJvb2xlYW4oYy5jYW5jZWxhYmxlKT09PWMuY2FuY2VsYWJsZXx8ITB9O2QuaW5pdEV2ZW50KGEsZS5idWJibGVzLGUuY2FuY2VsYWJsZSk7Zm9yKHZhciBmLGc9T2JqZWN0LmtleXMoYyksaD0wO2g8Zy5sZW5ndGg7aCsrKWY9Z1toXSxkW2ZdPWNbZl07cmV0dXJuIGQucHJldmVudFRhcD10aGlzLnByZXZlbnRUYXAsZH0idW5kZWZpbmVkIj09dHlwZW9mIFdlYWtNYXAmJiFmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxiPURhdGUubm93KCklMWU5LGM9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhiKysgKyJfXyIpfTtjLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7dmFyIGQ9Ylt0aGlzLm5hbWVdO2QmJmRbMF09PT1iP2RbMV09YzphKGIsdGhpcy5uYW1lLHt2YWx1ZTpbYixjXSx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuKGI9YVt0aGlzLm5hbWVdKSYmYlswXT09PWE/YlsxXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19LHdpbmRvdy5XZWFrTWFwPWN9KCksZnVuY3Rpb24oZ2xvYmFsKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZGV0ZWN0T2JqZWN0T2JzZXJ2ZSgpe2Z1bmN0aW9uIGEoYSl7Yj1hfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiBPYmplY3Qub2JzZXJ2ZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIEFycmF5Lm9ic2VydmUpcmV0dXJuITE7dmFyIGI9W10sYz17fSxkPVtdO3JldHVybiBPYmplY3Qub2JzZXJ2ZShjLGEpLEFycmF5Lm9ic2VydmUoZCxhKSxjLmlkPTEsYy5pZD0yLGRlbGV0ZSBjLmlkLGQucHVzaCgxLDIpLGQubGVuZ3RoPTAsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLDUhPT1iLmxlbmd0aD8hMToiYWRkIiE9YlswXS50eXBlfHwidXBkYXRlIiE9YlsxXS50eXBlfHwiZGVsZXRlIiE9YlsyXS50eXBlfHwic3BsaWNlIiE9YlszXS50eXBlfHwic3BsaWNlIiE9Yls0XS50eXBlPyExOihPYmplY3QudW5vYnNlcnZlKGMsYSksQXJyYXkudW5vYnNlcnZlKGQsYSksITApfWZ1bmN0aW9uIGRldGVjdEV2YWwoKXtpZihnbG9iYWwuZG9jdW1lbnQmJiJzZWN1cml0eVBvbGljeSJpbiBnbG9iYWwuZG9jdW1lbnQmJiFnbG9iYWwuZG9jdW1lbnQuc2VjdXJpdHlQb2xpY3kuYWxsb3dzRXZhbClyZXR1cm4hMTt0cnl7dmFyIGE9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtyZXR1cm4gYSgpfWNhdGNoKGIpe3JldHVybiExfX1mdW5jdGlvbiBpc0luZGV4KGEpe3JldHVybithPT09YT4+PjB9ZnVuY3Rpb24gdG9OdW1iZXIoYSl7cmV0dXJuK2F9ZnVuY3Rpb24gaXNPYmplY3QoYSl7cmV0dXJuIGE9PT1PYmplY3QoYSl9ZnVuY3Rpb24gYXJlU2FtZVZhbHVlKGEsYil7cmV0dXJuIGE9PT1iPzAhPT1hfHwxL2E9PT0xL2I6bnVtYmVySXNOYU4oYSkmJm51bWJlcklzTmFOKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBpc1BhdGhWYWxpZChhKXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGE/ITE6KGE9YS50cmltKCksIiI9PWE/ITA6Ii4iPT1hWzBdPyExOnBhdGhSZWdFeHAudGVzdChhKSl9ZnVuY3Rpb24gUGF0aChhLGIpe2lmKGIhPT1jb25zdHJ1Y3RvcklzUHJpdmF0ZSl0aHJvdyBFcnJvcigiVXNlIFBhdGguZ2V0IHRvIHJldHJpZXZlIHBhdGggb2JqZWN0cyIpO3JldHVybiIiPT1hLnRyaW0oKT90aGlzOmlzSW5kZXgoYSk/KHRoaXMucHVzaChhKSx0aGlzKTooYS5zcGxpdCgvXHMqXC5ccyovKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGF9KS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMucHVzaChhKX0sdGhpcyksdm9pZChoYXNFdmFsJiZ0aGlzLmxlbmd0aCYmKHRoaXMuZ2V0VmFsdWVGcm9tPXRoaXMuY29tcGlsZWRHZXRWYWx1ZUZyb21GbigpKSkpfWZ1bmN0aW9uIGdldFBhdGgoYSl7aWYoYSBpbnN0YW5jZW9mIFBhdGgpcmV0dXJuIGE7bnVsbD09YSYmKGE9IiIpLCJzdHJpbmciIT10eXBlb2YgYSYmKGE9U3RyaW5nKGEpKTt2YXIgYj1wYXRoQ2FjaGVbYV07aWYoYilyZXR1cm4gYjtpZighaXNQYXRoVmFsaWQoYSkpcmV0dXJuIGludmFsaWRQYXRoO3ZhciBiPW5ldyBQYXRoKGEsY29uc3RydWN0b3JJc1ByaXZhdGUpO3JldHVybiBwYXRoQ2FjaGVbYV09YixifWZ1bmN0aW9uIGRpcnR5Q2hlY2soYSl7Zm9yKHZhciBiPTA7TUFYX0RJUlRZX0NIRUNLX0NZQ0xFUz5iJiZhLmNoZWNrXygpOyliKys7cmV0dXJuIGdsb2JhbC50ZXN0aW5nRXhwb3NlQ3ljbGVDb3VudCYmKGdsb2JhbC5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1iKSxiPjB9ZnVuY3Rpb24gb2JqZWN0SXNFbXB0eShhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBkaWZmSXNFbXB0eShhKXtyZXR1cm4gb2JqZWN0SXNFbXB0eShhLmFkZGVkKSYmb2JqZWN0SXNFbXB0eShhLnJlbW92ZWQpJiZvYmplY3RJc0VtcHR5KGEuY2hhbmdlZCl9ZnVuY3Rpb24gZGlmZk9iamVjdEZyb21PbGRPYmplY3QoYSxiKXt2YXIgYz17fSxkPXt9LGU9e307Zm9yKHZhciBmIGluIGIpe3ZhciBnPWFbZl07KHZvaWQgMD09PWd8fGchPT1iW2ZdKSYmKGYgaW4gYT9nIT09YltmXSYmKGVbZl09Zyk6ZFtmXT12b2lkIDApfWZvcih2YXIgZiBpbiBhKWYgaW4gYnx8KGNbZl09YVtmXSk7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJmEubGVuZ3RoIT09Yi5sZW5ndGgmJihlLmxlbmd0aD1hLmxlbmd0aCkse2FkZGVkOmMscmVtb3ZlZDpkLGNoYW5nZWQ6ZX19ZnVuY3Rpb24gcnVuRU9NVGFza3MoKXtpZighZW9tVGFza3MubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYT0wO2E8ZW9tVGFza3MubGVuZ3RoO2ErKyllb21UYXNrc1thXSgpO3JldHVybiBlb21UYXNrcy5sZW5ndGg9MCwhMH1mdW5jdGlvbiBuZXdPYnNlcnZlZE9iamVjdCgpe2Z1bmN0aW9uIGEoYSl7YiYmYi5zdGF0ZV89PT1PUEVORUQmJiFkJiZiLmNoZWNrXyhhKX12YXIgYixjLGQ9ITEsZT0hMDtyZXR1cm57b3BlbjpmdW5jdGlvbihjKXtpZihiKXRocm93IEVycm9yKCJPYnNlcnZlZE9iamVjdCBpbiB1c2UiKTtlfHxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksYj1jLGU9ITF9LG9ic2VydmU6ZnVuY3Rpb24oYixkKXtjPWIsZD9BcnJheS5vYnNlcnZlKGMsYSk6T2JqZWN0Lm9ic2VydmUoYyxhKX0sZGVsaXZlcjpmdW5jdGlvbihiKXtkPWIsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGQ9ITF9LGNsb3NlOmZ1bmN0aW9uKCl7Yj12b2lkIDAsT2JqZWN0LnVub2JzZXJ2ZShjLGEpLG9ic2VydmVkT2JqZWN0Q2FjaGUucHVzaCh0aGlzKX19fWZ1bmN0aW9uIGdldE9ic2VydmVkT2JqZWN0KGEsYixjKXt2YXIgZD1vYnNlcnZlZE9iamVjdENhY2hlLnBvcCgpfHxuZXdPYnNlcnZlZE9iamVjdCgpO3JldHVybiBkLm9wZW4oYSksZC5vYnNlcnZlKGIsYyksZH1mdW5jdGlvbiBuZXdPYnNlcnZlZFNldCgpe2Z1bmN0aW9uIGEoYil7aWYoYil7dmFyIGM9aS5pbmRleE9mKGIpO2M+PTA/KGlbY109dm9pZCAwLGgucHVzaChiKSk6aC5pbmRleE9mKGIpPDAmJihoLnB1c2goYiksT2JqZWN0Lm9ic2VydmUoYixlKSksYShPYmplY3QuZ2V0UHJvdG90eXBlT2YoYikpfX1mdW5jdGlvbiBiKCl7dmFyIGI9aT09PWVtcHR5QXJyYXk/W106aTtpPWgsaD1iO3ZhciBjO2Zvcih2YXIgZCBpbiBmKWM9ZltkXSxjJiZjLnN0YXRlXz09T1BFTkVEJiZjLml0ZXJhdGVPYmplY3RzXyhhKTtmb3IodmFyIGc9MDtnPGkubGVuZ3RoO2crKyl7dmFyIGo9aVtnXTtqJiZPYmplY3QudW5vYnNlcnZlKGosZSl9aS5sZW5ndGg9MH1mdW5jdGlvbiBjKCl7az0hMSxqJiZiKCl9ZnVuY3Rpb24gZCgpe2t8fChqPSEwLGs9ITAscnVuRU9NKGMpKX1mdW5jdGlvbiBlKCl7YigpO3ZhciBhO2Zvcih2YXIgYyBpbiBmKWE9ZltjXSxhJiZhLnN0YXRlXz09T1BFTkVEJiZhLmNoZWNrXygpfXZhciBmPVtdLGc9MCxoPVtdLGk9ZW1wdHlBcnJheSxqPSExLGs9ITEsbD17b2JqZWN0OnZvaWQgMCxvYmplY3RzOmgsb3BlbjpmdW5jdGlvbihiKXtmW2IuaWRfXT1iLGcrKyxiLml0ZXJhdGVPYmplY3RzXyhhKX0sY2xvc2U6ZnVuY3Rpb24oYSl7aWYoZlthLmlkX109dm9pZCAwLGctLSxnKXJldHVybiB2b2lkIGQoKTtqPSExO2Zvcih2YXIgYj0wO2I8aC5sZW5ndGg7YisrKU9iamVjdC51bm9ic2VydmUoaFtiXSxlKSxPYnNlcnZlci51bm9ic2VydmVkQ291bnQrKztmLmxlbmd0aD0wLGgubGVuZ3RoPTAsb2JzZXJ2ZWRTZXRDYWNoZS5wdXNoKHRoaXMpfSxyZXNldDpkfTtyZXR1cm4gbH1mdW5jdGlvbiBnZXRPYnNlcnZlZFNldChhLGIpe3JldHVybiBsYXN0T2JzZXJ2ZWRTZXQmJmxhc3RPYnNlcnZlZFNldC5vYmplY3Q9PT1ifHwobGFzdE9ic2VydmVkU2V0PW9ic2VydmVkU2V0Q2FjaGUucG9wKCl8fG5ld09ic2VydmVkU2V0KCksbGFzdE9ic2VydmVkU2V0Lm9iamVjdD1iKSxsYXN0T2JzZXJ2ZWRTZXQub3BlbihhKSxsYXN0T2JzZXJ2ZWRTZXR9ZnVuY3Rpb24gT2JzZXJ2ZXIoKXt0aGlzLnN0YXRlXz1VTk9QRU5FRCx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuaWRfPW5leHRPYnNlcnZlcklkKyt9ZnVuY3Rpb24gYWRkVG9BbGwoYSl7T2JzZXJ2ZXIuX2FsbE9ic2VydmVyc0NvdW50KyssY29sbGVjdE9ic2VydmVycyYmYWxsT2JzZXJ2ZXJzLnB1c2goYSl9ZnVuY3Rpb24gcmVtb3ZlRnJvbUFsbCgpe09ic2VydmVyLl9hbGxPYnNlcnZlcnNDb3VudC0tfWZ1bmN0aW9uIE9iamVjdE9ic2VydmVyKGEpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy52YWx1ZV89YSx0aGlzLm9sZE9iamVjdF89dm9pZCAwfWZ1bmN0aW9uIEFycmF5T2JzZXJ2ZXIoYSl7aWYoIUFycmF5LmlzQXJyYXkoYSkpdGhyb3cgRXJyb3IoIlByb3ZpZGVkIG9iamVjdCBpcyBub3QgYW4gQXJyYXkiKTtPYmplY3RPYnNlcnZlci5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gUGF0aE9ic2VydmVyKGEsYil7T2JzZXJ2ZXIuY2FsbCh0aGlzKSx0aGlzLm9iamVjdF89YSx0aGlzLnBhdGhfPWIgaW5zdGFuY2VvZiBQYXRoP2I6Z2V0UGF0aChiKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDB9ZnVuY3Rpb24gQ29tcG91bmRPYnNlcnZlcigpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy52YWx1ZV89W10sdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwLHRoaXMub2JzZXJ2ZWRfPVtdfWZ1bmN0aW9uIGlkZW50Rm4oYSl7cmV0dXJuIGF9ZnVuY3Rpb24gT2JzZXJ2ZXJUcmFuc2Zvcm0oYSxiLGMsZCl7dGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89YSx0aGlzLmdldFZhbHVlRm5fPWJ8fGlkZW50Rm4sdGhpcy5zZXRWYWx1ZUZuXz1jfHxpZGVudEZuLHRoaXMuZG9udFBhc3NUaHJvdWdoU2V0Xz1kfWZ1bmN0aW9uIG5vdGlmeUZ1bmN0aW9uKGEsYil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIE9iamVjdC5vYnNlcnZlKXt2YXIgYz1PYmplY3QuZ2V0Tm90aWZpZXIoYSk7cmV0dXJuIGZ1bmN0aW9uKGQsZSl7dmFyIGY9e29iamVjdDphLHR5cGU6ZCxuYW1lOmJ9OzI9PT1hcmd1bWVudHMubGVuZ3RoJiYoZi5vbGRWYWx1ZT1lKSxjLm5vdGlmeShmKX19fWZ1bmN0aW9uIGRpZmZPYmplY3RGcm9tQ2hhbmdlUmVjb3JkcyhhLGIsYyl7Zm9yKHZhciBkPXt9LGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO2V4cGVjdGVkUmVjb3JkVHlwZXNbZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZSIhPWcudHlwZSYmKCJhZGQiIT1nLnR5cGU/Zy5uYW1lIGluIGQ/KGRlbGV0ZSBkW2cubmFtZV0sZGVsZXRlIGNbZy5uYW1lXSk6ZVtnLm5hbWVdPSEwOmcubmFtZSBpbiBlP2RlbGV0ZSBlW2cubmFtZV06ZFtnLm5hbWVdPSEwKSk6KGNvbnNvbGUuZXJyb3IoIlVua25vd24gY2hhbmdlUmVjb3JkIHR5cGU6ICIrZy50eXBlKSxjb25zb2xlLmVycm9yKGcpKX1mb3IodmFyIGggaW4gZClkW2hdPWFbaF07Zm9yKHZhciBoIGluIGUpZVtoXT12b2lkIDA7dmFyIGk9e307Zm9yKHZhciBoIGluIGMpaWYoIShoIGluIGR8fGggaW4gZSkpe3ZhciBqPWFbaF07Y1toXSE9PWomJihpW2hdPWopfXJldHVybnthZGRlZDpkLHJlbW92ZWQ6ZSxjaGFuZ2VkOml9fWZ1bmN0aW9uIG5ld1NwbGljZShhLGIsYyl7cmV0dXJue2luZGV4OmEscmVtb3ZlZDpiLGFkZGVkQ291bnQ6Y319ZnVuY3Rpb24gQXJyYXlTcGxpY2UoKXt9ZnVuY3Rpb24gY2FsY1NwbGljZXMoYSxiLGMsZCxlLGYpe3JldHVybiBhcnJheVNwbGljZS5jYWxjU3BsaWNlcyhhLGIsYyxkLGUsZil9ZnVuY3Rpb24gaW50ZXJzZWN0KGEsYixjLGQpe3JldHVybiBjPmJ8fGE+ZD8tMTpiPT1jfHxkPT1hPzA6Yz5hP2Q+Yj9iLWM6ZC1jOmI+ZD9kLWE6Yi1hfWZ1bmN0aW9uIG1lcmdlU3BsaWNlKGEsYixjLGQpe2Zvcih2YXIgZT1uZXdTcGxpY2UoYixjLGQpLGY9ITEsZz0wLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGk9YVtoXTtpZihpLmluZGV4Kz1nLCFmKXt2YXIgaj1pbnRlcnNlY3QoZS5pbmRleCxlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGgsaS5pbmRleCxpLmluZGV4K2kuYWRkZWRDb3VudCk7aWYoaj49MCl7YS5zcGxpY2UoaCwxKSxoLS0sZy09aS5hZGRlZENvdW50LWkucmVtb3ZlZC5sZW5ndGgsZS5hZGRlZENvdW50Kz1pLmFkZGVkQ291bnQtajt2YXIgaz1lLnJlbW92ZWQubGVuZ3RoK2kucmVtb3ZlZC5sZW5ndGgtajtpZihlLmFkZGVkQ291bnR8fGspe3ZhciBjPWkucmVtb3ZlZDtpZihlLmluZGV4PGkuaW5kZXgpe3ZhciBsPWUucmVtb3ZlZC5zbGljZSgwLGkuaW5kZXgtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobCxjKSxjPWx9aWYoZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoPmkuaW5kZXgraS5hZGRlZENvdW50KXt2YXIgbT1lLnJlbW92ZWQuc2xpY2UoaS5pbmRleCtpLmFkZGVkQ291bnQtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYyxtKX1lLnJlbW92ZWQ9YyxpLmluZGV4PGUuaW5kZXgmJihlLmluZGV4PWkuaW5kZXgpfWVsc2UgZj0hMH1lbHNlIGlmKGUuaW5kZXg8aS5pbmRleCl7Zj0hMCxhLnNwbGljZShoLDAsZSksaCsrO3ZhciBuPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RoO2kuaW5kZXgrPW4sZys9bn19fWZ8fGEucHVzaChlKX1mdW5jdGlvbiBjcmVhdGVJbml0aWFsU3BsaWNlcyhhLGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxiLmxlbmd0aDtkKyspe3ZhciBlPWJbZF07c3dpdGNoKGUudHlwZSl7Y2FzZSJzcGxpY2UiOm1lcmdlU3BsaWNlKGMsZS5pbmRleCxlLnJlbW92ZWQuc2xpY2UoKSxlLmFkZGVkQ291bnQpO2JyZWFrO2Nhc2UiYWRkIjpjYXNlInVwZGF0ZSI6Y2FzZSJkZWxldGUiOmlmKCFpc0luZGV4KGUubmFtZSkpY29udGludWU7dmFyIGY9dG9OdW1iZXIoZS5uYW1lKTtpZigwPmYpY29udGludWU7bWVyZ2VTcGxpY2UoYyxmLFtlLm9sZFZhbHVlXSwxKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoIlVuZXhwZWN0ZWQgcmVjb3JkIHR5cGU6ICIrSlNPTi5zdHJpbmdpZnkoZSkpfX1yZXR1cm4gY31mdW5jdGlvbiBwcm9qZWN0QXJyYXlTcGxpY2VzKGEsYil7dmFyIGM9W107cmV0dXJuIGNyZWF0ZUluaXRpYWxTcGxpY2VzKGEsYikuZm9yRWFjaChmdW5jdGlvbihiKXtyZXR1cm4gMT09Yi5hZGRlZENvdW50JiYxPT1iLnJlbW92ZWQubGVuZ3RoP3ZvaWQoYi5yZW1vdmVkWzBdIT09YVtiLmluZGV4XSYmYy5wdXNoKGIpKTp2b2lkKGM9Yy5jb25jYXQoY2FsY1NwbGljZXMoYSxiLmluZGV4LGIuaW5kZXgrYi5hZGRlZENvdW50LGIucmVtb3ZlZCwwLGIucmVtb3ZlZC5sZW5ndGgpKSl9KSxjfXZhciBoYXNPYnNlcnZlPWRldGVjdE9iamVjdE9ic2VydmUoKSxoYXNFdmFsPWRldGVjdEV2YWwoKSxudW1iZXJJc05hTj1nbG9iYWwuTnVtYmVyLmlzTmFOfHxmdW5jdGlvbihhKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGEmJmdsb2JhbC5pc05hTihhKX0sY3JlYXRlT2JqZWN0PSJfX3Byb3RvX18iaW57fT9mdW5jdGlvbihhKXtyZXR1cm4gYX06ZnVuY3Rpb24oYSl7dmFyIGI9YS5fX3Byb3RvX187aWYoIWIpcmV0dXJuIGE7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSkuZm9yRWFjaChmdW5jdGlvbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKSl9KSxjfSxpZGVudFN0YXJ0PSJbJF9hLXpBLVpdIixpZGVudFBhcnQ9IlskX2EtekEtWjAtOV0iLGlkZW50PWlkZW50U3RhcnQrIisiK2lkZW50UGFydCsiKiIsZWxlbWVudEluZGV4PSIoPzpbMC05XXxbMS05XStbMC05XSspIixpZGVudE9yRWxlbWVudEluZGV4PSIoPzoiK2lkZW50KyJ8IitlbGVtZW50SW5kZXgrIikiLHBhdGg9Iig/OiIraWRlbnRPckVsZW1lbnRJbmRleCsiKSg/OlxccypcXC5cXHMqIitpZGVudE9yRWxlbWVudEluZGV4KyIpKiIscGF0aFJlZ0V4cD1uZXcgUmVnRXhwKCJeIitwYXRoKyIkIiksY29uc3RydWN0b3JJc1ByaXZhdGU9e30scGF0aENhY2hlPXt9O1BhdGguZ2V0PWdldFBhdGgsUGF0aC5wcm90b3R5cGU9Y3JlYXRlT2JqZWN0KHtfX3Byb3RvX186W10sdmFsaWQ6ITAsdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qb2luKCIuIil9LGdldFZhbHVlRnJvbTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7aWYobnVsbD09YSlyZXR1cm47YT1hW3RoaXNbYl1dfXJldHVybiBhfSxpdGVyYXRlT2JqZWN0czpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGg7YysrKXtpZihjJiYoYT1hW3RoaXNbYy0xXV0pLCFpc09iamVjdChhKSlyZXR1cm47YihhKX19LGNvbXBpbGVkR2V0VmFsdWVGcm9tRm46ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gaXNJbmRleChhKT8nWyInK2ErJyJdJzoiLiIrYX0pLGI9IiIsYz0ib2JqIjtiKz0iaWYgKG9iaiAhPSBudWxsIjtmb3IodmFyIGQ9MDtkPHRoaXMubGVuZ3RoLTE7ZCsrKXt7dGhpc1tkXX1jKz1hW2RdLGIrPSIgJiZcbiAgICAgIitjKyIgIT0gbnVsbCJ9cmV0dXJuIGIrPSIpXG4iLGMrPWFbZF0sYis9IiAgcmV0dXJuICIrYysiO1xuZWxzZVxuICByZXR1cm4gdW5kZWZpbmVkOyIsbmV3IEZ1bmN0aW9uKCJvYmoiLGIpfSxzZXRWYWx1ZUZyb206ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aC0xO2MrKyl7aWYoIWlzT2JqZWN0KGEpKXJldHVybiExO2E9YVt0aGlzW2NdXX1yZXR1cm4gaXNPYmplY3QoYSk/KGFbdGhpc1tjXV09YiwhMCk6ITF9fSk7dmFyIGludmFsaWRQYXRoPW5ldyBQYXRoKCIiLGNvbnN0cnVjdG9ySXNQcml2YXRlKTtpbnZhbGlkUGF0aC52YWxpZD0hMSxpbnZhbGlkUGF0aC5nZXRWYWx1ZUZyb209aW52YWxpZFBhdGguc2V0VmFsdWVGcm9tPWZ1bmN0aW9uKCl7fTt2YXIgTUFYX0RJUlRZX0NIRUNLX0NZQ0xFUz0xZTMsZW9tVGFza3M9W10scnVuRU9NPWhhc09ic2VydmU/ZnVuY3Rpb24oKXt2YXIgYT17cGluZ1Bvbmc6ITB9LGI9ITE7cmV0dXJuIE9iamVjdC5vYnNlcnZlKGEsZnVuY3Rpb24oKXtydW5FT01UYXNrcygpLGI9ITF9KSxmdW5jdGlvbihjKXtlb21UYXNrcy5wdXNoKGMpLGJ8fChiPSEwLGEucGluZ1Bvbmc9IWEucGluZ1BvbmcpfX0oKTpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXtlb21UYXNrcy5wdXNoKGEpfX0oKSxvYnNlcnZlZE9iamVjdENhY2hlPVtdLGVtcHR5QXJyYXk9W10sb2JzZXJ2ZWRTZXRDYWNoZT1bXSxsYXN0T2JzZXJ2ZWRTZXQsVU5PUEVORUQ9MCxPUEVORUQ9MSxDTE9TRUQ9MixSRVNFVFRJTkc9MyxuZXh0T2JzZXJ2ZXJJZD0xO09ic2VydmVyLnByb3RvdHlwZT17b3BlbjpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc3RhdGVfIT1VTk9QRU5FRCl0aHJvdyBFcnJvcigiT2JzZXJ2ZXIgaGFzIGFscmVhZHkgYmVlbiBvcGVuZWQuIik7cmV0dXJuIGFkZFRvQWxsKHRoaXMpLHRoaXMuY2FsbGJhY2tfPWEsdGhpcy50YXJnZXRfPWIsdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMuY29ubmVjdF8oKSx0aGlzLnZhbHVlX30sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09T1BFTkVEJiYocmVtb3ZlRnJvbUFsbCh0aGlzKSx0aGlzLnN0YXRlXz1DTE9TRUQsdGhpcy5kaXNjb25uZWN0XygpLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCl9LGRlbGl2ZXI6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09T1BFTkVEJiZkaXJ0eUNoZWNrKHRoaXMpfSxyZXBvcnRfOmZ1bmN0aW9uKGEpe3RyeXt0aGlzLmNhbGxiYWNrXy5hcHBseSh0aGlzLnRhcmdldF8sYSl9Y2F0Y2goYil7T2JzZXJ2ZXIuX2Vycm9yVGhyb3duRHVyaW5nQ2FsbGJhY2s9ITAsY29uc29sZS5lcnJvcigiRXhjZXB0aW9uIGNhdWdodCBkdXJpbmcgb2JzZXJ2ZXIgY2FsbGJhY2s6ICIrKGIuc3RhY2t8fGIpKX19LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hlY2tfKHZvaWQgMCwhMCksdGhpcy52YWx1ZV99fTt2YXIgY29sbGVjdE9ic2VydmVycz0haGFzT2JzZXJ2ZSxhbGxPYnNlcnZlcnM7T2JzZXJ2ZXIuX2FsbE9ic2VydmVyc0NvdW50PTAsY29sbGVjdE9ic2VydmVycyYmKGFsbE9ic2VydmVycz1bXSk7dmFyIHJ1bm5pbmdNaWNyb3Rhc2tDaGVja3BvaW50PSExLGhhc0RlYnVnRm9yY2VGdWxsRGVsaXZlcnk9aGFzT2JzZXJ2ZSYmZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGV2YWwoIiVSdW5NaWNyb3Rhc2tzKCkiKSwhMH1jYXRjaChleCl7cmV0dXJuITF9fSgpO2dsb2JhbC5QbGF0Zm9ybT1nbG9iYWwuUGxhdGZvcm18fHt9LGdsb2JhbC5QbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludD1mdW5jdGlvbigpe2lmKCFydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludCl7aWYoaGFzRGVidWdGb3JjZUZ1bGxEZWxpdmVyeSlyZXR1cm4gdm9pZCBldmFsKCIlUnVuTWljcm90YXNrcygpIik7aWYoY29sbGVjdE9ic2VydmVycyl7cnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITA7dmFyIGN5Y2xlcz0wLGFueUNoYW5nZWQsdG9DaGVjaztkb3tjeWNsZXMrKyx0b0NoZWNrPWFsbE9ic2VydmVycyxhbGxPYnNlcnZlcnM9W10sYW55Q2hhbmdlZD0hMTtmb3IodmFyIGk9MDtpPHRvQ2hlY2subGVuZ3RoO2krKyl7dmFyIG9ic2VydmVyPXRvQ2hlY2tbaV07b2JzZXJ2ZXIuc3RhdGVfPT1PUEVORUQmJihvYnNlcnZlci5jaGVja18oKSYmKGFueUNoYW5nZWQ9ITApLGFsbE9ic2VydmVycy5wdXNoKG9ic2VydmVyKSl9cnVuRU9NVGFza3MoKSYmKGFueUNoYW5nZWQ9ITApfXdoaWxlKE1BWF9ESVJUWV9DSEVDS19DWUNMRVM+Y3ljbGVzJiZhbnlDaGFuZ2VkKTtnbG9iYWwudGVzdGluZ0V4cG9zZUN5Y2xlQ291bnQmJihnbG9iYWwuZGlydHlDaGVja0N5Y2xlQ291bnQ9Y3ljbGVzKSxydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludD0hMX19fSxjb2xsZWN0T2JzZXJ2ZXJzJiYoZ2xvYmFsLlBsYXRmb3JtLmNsZWFyT2JzZXJ2ZXJzPWZ1bmN0aW9uKCl7YWxsT2JzZXJ2ZXJzPVtdfSksT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITEsY29ubmVjdF86ZnVuY3Rpb24oKXtoYXNPYnNlcnZlP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfPWdldE9ic2VydmVkT2JqZWN0KHRoaXMsdGhpcy52YWx1ZV8sdGhpcy5hcnJheU9ic2VydmUpOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pfSxjb3B5T2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LmlzQXJyYXkoYSk/W106e307Zm9yKHZhciBjIGluIGEpYltjXT1hW2NdO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiYoYi5sZW5ndGg9YS5sZW5ndGgpLGJ9LGNoZWNrXzpmdW5jdGlvbihhKXt2YXIgYixjO2lmKGhhc09ic2VydmUpe2lmKCFhKXJldHVybiExO2M9e30sYj1kaWZmT2JqZWN0RnJvbUNoYW5nZVJlY29yZHModGhpcy52YWx1ZV8sYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3RfLGI9ZGlmZk9iamVjdEZyb21PbGRPYmplY3QodGhpcy52YWx1ZV8sdGhpcy5vbGRPYmplY3RfKTtyZXR1cm4gZGlmZklzRW1wdHkoYik/ITE6KGhhc09ic2VydmV8fCh0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKSksdGhpcy5yZXBvcnRfKFtiLmFkZGVkfHx7fSxiLnJlbW92ZWR8fHt9LGIuY2hhbmdlZHx8e30sZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV19XSksITApfSxkaXNjb25uZWN0XzpmdW5jdGlvbigpe2hhc09ic2VydmU/KHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKCksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwKTp0aGlzLm9sZE9iamVjdF89dm9pZCAwfSxkZWxpdmVyOmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZV89PU9QRU5FRCYmKGhhc09ic2VydmU/dGhpcy5kaXJlY3RPYnNlcnZlcl8uZGVsaXZlcighMSk6ZGlydHlDaGVjayh0aGlzKSl9LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyZWN0T2JzZXJ2ZXJfP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITApOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pLHRoaXMudmFsdWVffX0pLEFycmF5T2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9iamVjdE9ic2VydmVyLnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITAsY29weU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZSgpfSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGI7aWYoaGFzT2JzZXJ2ZSl7aWYoIWEpcmV0dXJuITE7Yj1wcm9qZWN0QXJyYXlTcGxpY2VzKHRoaXMudmFsdWVfLGEpfWVsc2UgYj1jYWxjU3BsaWNlcyh0aGlzLnZhbHVlXywwLHRoaXMudmFsdWVfLmxlbmd0aCx0aGlzLm9sZE9iamVjdF8sMCx0aGlzLm9sZE9iamVjdF8ubGVuZ3RoKTtyZXR1cm4gYiYmYi5sZW5ndGg/KGhhc09ic2VydmV8fCh0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKSksdGhpcy5yZXBvcnRfKFtiXSksITApOiExfX0pLEFycmF5T2JzZXJ2ZXIuYXBwbHlTcGxpY2VzPWZ1bmN0aW9uKGEsYixjKXtjLmZvckVhY2goZnVuY3Rpb24oYyl7Zm9yKHZhciBkPVtjLmluZGV4LGMucmVtb3ZlZC5sZW5ndGhdLGU9Yy5pbmRleDtlPGMuaW5kZXgrYy5hZGRlZENvdW50OylkLnB1c2goYltlXSksZSsrO0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoYSxkKX0pfSxQYXRoT2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe2hhc09ic2VydmUmJih0aGlzLmRpcmVjdE9ic2VydmVyXz1nZXRPYnNlcnZlZFNldCh0aGlzLHRoaXMub2JqZWN0XykpLHRoaXMuY2hlY2tfKHZvaWQgMCwhMCl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7dGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfJiYodGhpcy5kaXJlY3RPYnNlcnZlcl8uY2xvc2UodGhpcyksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwKX0saXRlcmF0ZU9iamVjdHNfOmZ1bmN0aW9uKGEpe3RoaXMucGF0aF8uaXRlcmF0ZU9iamVjdHModGhpcy5vYmplY3RfLGEpfSxjaGVja186ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnZhbHVlXztyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5wYXRoXy5nZXRWYWx1ZUZyb20odGhpcy5vYmplY3RfKSxifHxhcmVTYW1lVmFsdWUodGhpcy52YWx1ZV8sYyk/ITE6KHRoaXMucmVwb3J0XyhbdGhpcy52YWx1ZV8sY10pLCEwKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXyYmdGhpcy5wYXRoXy5zZXRWYWx1ZUZyb20odGhpcy5vYmplY3RfLGEpfX0pO3ZhciBvYnNlcnZlclNlbnRpbmVsPXt9O0NvbXBvdW5kT2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe2lmKHRoaXMuY2hlY2tfKHZvaWQgMCwhMCksaGFzT2JzZXJ2ZSl7Zm9yKHZhciBhLGI9ITEsYz0wO2M8dGhpcy5vYnNlcnZlZF8ubGVuZ3RoO2MrPTIpaWYoYT10aGlzLm9ic2VydmVkX1tjXSxhIT09b2JzZXJ2ZXJTZW50aW5lbCl7Yj0hMDticmVha31yZXR1cm4gdGhpcy5kaXJlY3RPYnNlcnZlcl8/Yj92b2lkIHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLnJlc2V0KCk6KHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKCksdm9pZCh0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApKTp2b2lkKGImJih0aGlzLmRpcmVjdE9ic2VydmVyXz1nZXRPYnNlcnZlZFNldCh0aGlzLGEpKSl9fSxjbG9zZU9ic2VydmVyc186ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDthKz0yKXRoaXMub2JzZXJ2ZWRfW2FdPT09b2JzZXJ2ZXJTZW50aW5lbCYmdGhpcy5vYnNlcnZlZF9bYSsxXS5jbG9zZSgpO3RoaXMub2JzZXJ2ZWRfLmxlbmd0aD0wfSxkaXNjb25uZWN0XzpmdW5jdGlvbigpe3RoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXyYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKHRoaXMpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCksdGhpcy5jbG9zZU9ic2VydmVyc18oKX0sYWRkUGF0aDpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc3RhdGVfIT1VTk9QRU5FRCYmdGhpcy5zdGF0ZV8hPVJFU0VUVElORyl0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBwYXRocyBvbmNlIHN0YXJ0ZWQuIik7dGhpcy5vYnNlcnZlZF8ucHVzaChhLGIgaW5zdGFuY2VvZiBQYXRoP2I6Z2V0UGF0aChiKSl9LGFkZE9ic2VydmVyOmZ1bmN0aW9uKGEpe2lmKHRoaXMuc3RhdGVfIT1VTk9QRU5FRCYmdGhpcy5zdGF0ZV8hPVJFU0VUVElORyl0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBvYnNlcnZlcnMgb25jZSBzdGFydGVkLiIpO2Eub3Blbih0aGlzLmRlbGl2ZXIsdGhpcyksdGhpcy5vYnNlcnZlZF8ucHVzaChvYnNlcnZlclNlbnRpbmVsLGEpfSxzdGFydFJlc2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5zdGF0ZV8hPU9QRU5FRCl0aHJvdyBFcnJvcigiQ2FuIG9ubHkgcmVzZXQgd2hpbGUgb3BlbiIpO3RoaXMuc3RhdGVfPVJFU0VUVElORyx0aGlzLmNsb3NlT2JzZXJ2ZXJzXygpfSxmaW5pc2hSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IGZpbmlzaFJlc2V0IGFmdGVyIHN0YXJ0UmVzZXQiKTtyZXR1cm4gdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMuY29ubmVjdF8oKSx0aGlzLnZhbHVlX30saXRlcmF0ZU9iamVjdHNfOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTA7Yzx0aGlzLm9ic2VydmVkXy5sZW5ndGg7Yys9MiliPXRoaXMub2JzZXJ2ZWRfW2NdLGIhPT1vYnNlcnZlclNlbnRpbmVsJiZ0aGlzLm9ic2VydmVkX1tjKzFdLml0ZXJhdGVPYmplY3RzKGIsYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTA7ZDx0aGlzLm9ic2VydmVkXy5sZW5ndGg7ZCs9Mil7dmFyIGU9dGhpcy5vYnNlcnZlZF9bZCsxXSxmPXRoaXMub2JzZXJ2ZWRfW2RdLGc9Zj09PW9ic2VydmVyU2VudGluZWw/ZS5kaXNjYXJkQ2hhbmdlcygpOmUuZ2V0VmFsdWVGcm9tKGYpO2I/dGhpcy52YWx1ZV9bZC8yXT1nOmFyZVNhbWVWYWx1ZShnLHRoaXMudmFsdWVfW2QvMl0pfHwoYz1jfHxbXSxjW2QvMl09dGhpcy52YWx1ZV9bZC8yXSx0aGlzLnZhbHVlX1tkLzJdPWcpfXJldHVybiBjPyh0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpcy5vYnNlcnZlZF9dKSwhMCk6ITF9fSksT2JzZXJ2ZXJUcmFuc2Zvcm0ucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY2FsbGJhY2tfPWEsdGhpcy50YXJnZXRfPWIsdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLm9wZW4odGhpcy5vYnNlcnZlZENhbGxiYWNrXyx0aGlzKSksdGhpcy52YWx1ZV99LG9ic2VydmVkQ2FsbGJhY2tfOmZ1bmN0aW9uKGEpe2lmKGE9dGhpcy5nZXRWYWx1ZUZuXyhhKSwhYXJlU2FtZVZhbHVlKGEsdGhpcy52YWx1ZV8pKXt2YXIgYj10aGlzLnZhbHVlXzt0aGlzLnZhbHVlXz1hLHRoaXMuY2FsbGJhY2tfLmNhbGwodGhpcy50YXJnZXRfLHRoaXMudmFsdWVfLGIpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMudmFsdWVffSxkZWxpdmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JzZXJ2YWJsZV8uZGVsaXZlcigpfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLnNldFZhbHVlRm5fKGEpLCF0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF8mJnRoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWU/dGhpcy5vYnNlcnZhYmxlXy5zZXRWYWx1ZShhKTp2b2lkIDB9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZhYmxlXyYmdGhpcy5vYnNlcnZhYmxlXy5jbG9zZSgpLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmdldFZhbHVlRm5fPXZvaWQgMCx0aGlzLnNldFZhbHVlRm5fPXZvaWQgMH19O3ZhciBleHBlY3RlZFJlY29yZFR5cGVzPXthZGQ6ITAsdXBkYXRlOiEwLCJkZWxldGUiOiEwfTtPYnNlcnZlci5kZWZpbmVDb21wdXRlZFByb3BlcnR5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1ub3RpZnlGdW5jdGlvbihhLGIpLGU9Yy5vcGVuKGZ1bmN0aW9uKGEsYil7ZT1hLGQmJmQoInVwZGF0ZSIsYil9KTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGMuZGVsaXZlcigpLGV9LHNldDpmdW5jdGlvbihhKXtyZXR1cm4gYy5zZXRWYWx1ZShhKSxhfSxjb25maWd1cmFibGU6ITB9KSx7Y2xvc2U6ZnVuY3Rpb24oKXtjLmNsb3NlKCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19fTt2YXIgRURJVF9MRUFWRT0wLEVESVRfVVBEQVRFPTEsRURJVF9BREQ9MixFRElUX0RFTEVURT0zO0FycmF5U3BsaWNlLnByb3RvdHlwZT17Y2FsY0VkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mLWUrMSxoPWMtYisxLGk9bmV3IEFycmF5KGcpLGo9MDtnPmo7aisrKWlbal09bmV3IEFycmF5KGgpLGlbal1bMF09ajtmb3IodmFyIGs9MDtoPms7aysrKWlbMF1ba109aztmb3IodmFyIGo9MTtnPmo7aisrKWZvcih2YXIgaz0xO2g+aztrKyspaWYodGhpcy5lcXVhbHMoYVtiK2stMV0sZFtlK2otMV0pKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX0sc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaChFRElUX0xFQVZFKTooZS5wdXNoKEVESVRfVVBEQVRFKSxkPWcpLGItLSxjLS0pOmY9PWg/KGUucHVzaChFRElUX0RFTEVURSksYi0tLGQ9aCk6KGUucHVzaChFRElUX0FERCksYy0tLGQ9aSl9ZWxzZSBlLnB1c2goRURJVF9ERUxFVEUpLGItLTtlbHNlIGUucHVzaChFRElUX0FERCksYy0tO3JldHVybiBlLnJldmVyc2UoKSxlfSxjYWxjU3BsaWNlczpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9MCxoPTAsaT1NYXRoLm1pbihjLWIsZi1lKTtpZigwPT1iJiYwPT1lJiYoZz10aGlzLnNoYXJlZFByZWZpeChhLGQsaSkpLGM9PWEubGVuZ3RoJiZmPT1kLmxlbmd0aCYmKGg9dGhpcy5zaGFyZWRTdWZmaXgoYSxkLGktZykpLGIrPWcsZSs9ZyxjLT1oLGYtPWgsYy1iPT0wJiZmLWU9PTApcmV0dXJuW107aWYoYj09Yyl7Zm9yKHZhciBqPW5ld1NwbGljZShiLFtdLDApO2Y+ZTspai5yZW1vdmVkLnB1c2goZFtlKytdKTtyZXR1cm5bal19aWYoZT09ZilyZXR1cm5bbmV3U3BsaWNlKGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIEVESVRfTEVBVkU6aiYmKGwucHVzaChqKSxqPXZvaWQgMCksbSsrLG4rKzticmVhaztjYXNlIEVESVRfVVBEQVRFOmp8fChqPW5ld1NwbGljZShtLFtdLDApKSxqLmFkZGVkQ291bnQrKyxtKyssai5yZW1vdmVkLnB1c2goZFtuXSksbisrO2JyZWFrO2Nhc2UgRURJVF9BREQ6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIEVESVRfREVMRVRFOmp8fChqPW5ld1NwbGljZShtLFtdLDApKSxqLnJlbW92ZWQucHVzaChkW25dKSxuKyt9cmV0dXJuIGomJmwucHVzaChqKSxsfSxzaGFyZWRQcmVmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wO2M+ZDtkKyspaWYoIXRoaXMuZXF1YWxzKGFbZF0sYltkXSkpcmV0dXJuIGQ7cmV0dXJuIGN9LHNoYXJlZFN1ZmZpeDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsZj0wO2M+ZiYmdGhpcy5lcXVhbHMoYVstLWRdLGJbLS1lXSk7KWYrKztyZXR1cm4gZn0sY2FsY3VsYXRlU3BsaWNlczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNhbGNTcGxpY2VzKGEsMCxhLmxlbmd0aCxiLDAsYi5sZW5ndGgpfSxlcXVhbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9fTt2YXIgYXJyYXlTcGxpY2U9bmV3IEFycmF5U3BsaWNlO2dsb2JhbC5PYnNlcnZlcj1PYnNlcnZlcixnbG9iYWwuT2JzZXJ2ZXIucnVuRU9NXz1ydW5FT00sZ2xvYmFsLk9ic2VydmVyLmhhc09iamVjdE9ic2VydmU9aGFzT2JzZXJ2ZSxnbG9iYWwuQXJyYXlPYnNlcnZlcj1BcnJheU9ic2VydmVyLGdsb2JhbC5BcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXJyYXlTcGxpY2UuY2FsY3VsYXRlU3BsaWNlcyhhLGIpfSxnbG9iYWwuQXJyYXlTcGxpY2U9QXJyYXlTcGxpY2UsZ2xvYmFsLk9iamVjdE9ic2VydmVyPU9iamVjdE9ic2VydmVyLGdsb2JhbC5QYXRoT2JzZXJ2ZXI9UGF0aE9ic2VydmVyLGdsb2JhbC5Db21wb3VuZE9ic2VydmVyPUNvbXBvdW5kT2JzZXJ2ZXIsZ2xvYmFsLlBhdGg9UGF0aCxnbG9iYWwuT2JzZXJ2ZXJUcmFuc2Zvcm09T2JzZXJ2ZXJUcmFuc2Zvcm19KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGU/Z2xvYmFsOnRoaXN8fHdpbmRvdyksd2luZG93LlBsYXRmb3JtPXdpbmRvdy5QbGF0Zm9ybXx8e30sd2luZG93LmxvZ0ZsYWdzPXdpbmRvdy5sb2dGbGFnc3x8e30sZnVuY3Rpb24oYSl7dmFyIGI9YS5mbGFnc3x8e307bG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihhKXthPWEuc3BsaXQoIj0iKSxhWzBdJiYoYlthWzBdXT1hWzFdfHwhMCl9KTt2YXIgYz1kb2N1bWVudC5jdXJyZW50U2NyaXB0fHxkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzY3JpcHRbc3JjKj0icGxhdGZvcm0uanMiXScpO2lmKGMpZm9yKHZhciBkLGU9Yy5hdHRyaWJ1dGVzLGY9MDtmPGUubGVuZ3RoO2YrKylkPWVbZl0sInNyYyIhPT1kLm5hbWUmJihiW2QubmFtZV09ZC52YWx1ZXx8ITApO2IubG9nJiZiLmxvZy5zcGxpdCgiLCIpLmZvckVhY2goZnVuY3Rpb24oYSl7d2luZG93LmxvZ0ZsYWdzW2FdPSEwfSksYi5zaGFkb3c9Yi5zaGFkb3d8fGIuc2hhZG93ZG9tfHxiLnBvbHlmaWxsLGIuc2hhZG93PSJuYXRpdmUiPT09Yi5zaGFkb3c/ITE6Yi5zaGFkb3d8fCFIVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdCxiLnNoYWRvdyYmZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgic2NyaXB0IikubGVuZ3RoPjEmJmNvbnNvbGUud2FybigicGxhdGZvcm0uanMgaXMgbm90IHRoZSBmaXJzdCBzY3JpcHQgb24gdGhlIHBhZ2UuIFNlZSBodHRwOi8vd3d3LnBvbHltZXItcHJvamVjdC5vcmcvZG9jcy9zdGFydC9wbGF0Zm9ybS5odG1sI3NldHVwIGZvciBkZXRhaWxzLiIpLGIucmVnaXN0ZXImJih3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LHdpbmRvdy5DdXN0b21FbGVtZW50cy5mbGFncy5yZWdpc3Rlcj1iLnJlZ2lzdGVyKSxiLmltcG9ydHMmJih3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LHdpbmRvdy5IVE1MSW1wb3J0cy5mbGFncy5pbXBvcnRzPWIuaW1wb3J0cyksYS5mbGFncz1ifShQbGF0Zm9ybSksUGxhdGZvcm0uZmxhZ3Muc2hhZG93Pyh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGw9e30sZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBMKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7SyhhLGMsTShiLGMpKX0pLGF9ZnVuY3Rpb24gZChhLGIpe3JldHVybiBMKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7c3dpdGNoKGMpe2Nhc2UiYXJndW1lbnRzIjpjYXNlImNhbGxlciI6Y2FzZSJsZW5ndGgiOmNhc2UibmFtZSI6Y2FzZSJwcm90b3R5cGUiOmNhc2UidG9TdHJpbmciOnJldHVybn1LKGEsYyxNKGIsYykpfSksYX1mdW5jdGlvbiBlKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXWluIGEpcmV0dXJuIGJbY119ZnVuY3Rpb24gZihhKXt2YXIgYj1hLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9RS5nZXQoYik7aWYoYylyZXR1cm4gYzt2YXIgZD1mKGIpLGU9dChkKTtyZXR1cm4gcShiLGUsYSksZX1mdW5jdGlvbiBnKGEsYil7byhhLGIsITApfWZ1bmN0aW9uIGgoYSxiKXtvKGIsYSwhMSl9ZnVuY3Rpb24gaShhKXtyZXR1cm4vXm9uW2Etel0rJC8udGVzdChhKX1mdW5jdGlvbiBqKGEpe3JldHVybi9eXHdbYS16QS1aXzAtOV0qJC8udGVzdChhKX1mdW5jdGlvbiBrKGEpe3JldHVybiBIJiZqKGEpP25ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMuaW1wbC4iK2EpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbFthXX19ZnVuY3Rpb24gbChhKXtyZXR1cm4gSCYmaihhKT9uZXcgRnVuY3Rpb24oInYiLCJ0aGlzLmltcGwuIithKyIgPSB2Iik6ZnVuY3Rpb24oYil7dGhpcy5pbXBsW2FdPWJ9fWZ1bmN0aW9uIG0oYSl7cmV0dXJuIEgmJmooYSk/bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcy5pbXBsLiIrYSsiLmFwcGx5KHRoaXMuaW1wbCwgYXJndW1lbnRzKSIpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbFthXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19ZnVuY3Rpb24gbihhLGIpe3RyeXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpfWNhdGNoKGMpe3JldHVybiBPfX1mdW5jdGlvbiBvKGIsYyxkKXtmb3IodmFyIGU9TChiKSxmPTA7ZjxlLmxlbmd0aDtmKyspe3ZhciBnPWVbZl07aWYoInBvbHltZXJCbGFja0xpc3RfIiE9PWcmJiEoZyBpbiBjfHxiLnBvbHltZXJCbGFja0xpc3RfJiZiLnBvbHltZXJCbGFja0xpc3RfW2ddKSl7TiYmYi5fX2xvb2t1cEdldHRlcl9fKGcpO3ZhciBoLGosbz1uKGIsZyk7aWYoZCYmImZ1bmN0aW9uIj09dHlwZW9mIG8udmFsdWUpY1tnXT1tKGcpO2Vsc2V7dmFyIHA9aShnKTtoPXA/YS5nZXRFdmVudEhhbmRsZXJHZXR0ZXIoZyk6ayhnKSwoby53cml0YWJsZXx8by5zZXQpJiYoaj1wP2EuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyKGcpOmwoZykpLEsoYyxnLHtnZXQ6aCxzZXQ6aixjb25maWd1cmFibGU6by5jb25maWd1cmFibGUsZW51bWVyYWJsZTpvLmVudW1lcmFibGV9KX19fX1mdW5jdGlvbiBwKGEsYixjKXt2YXIgZT1hLnByb3RvdHlwZTtxKGUsYixjKSxkKGIsYSl9ZnVuY3Rpb24gcShhLGMsZCl7dmFyIGU9Yy5wcm90b3R5cGU7Yih2b2lkIDA9PT1FLmdldChhKSksRS5zZXQoYSxjKSxGLnNldChlLGEpLGcoYSxlKSxkJiZoKGUsZCksSyhlLCJjb25zdHJ1Y3RvciIse3ZhbHVlOmMsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITB9KSxjLnByb3RvdHlwZT1lfWZ1bmN0aW9uIHIoYSxiKXtyZXR1cm4gRS5nZXQoYi5wcm90b3R5cGUpPT09YX1mdW5jdGlvbiBzKGEpe3ZhciBiPU9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxjPWYoYiksZD10KGMpO3JldHVybiBxKGIsZCxhKSxkfWZ1bmN0aW9uIHQoYSl7ZnVuY3Rpb24gYihiKXthLmNhbGwodGhpcyxiKX12YXIgYz1PYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKTtyZXR1cm4gYy5jb25zdHJ1Y3Rvcj1iLGIucHJvdG90eXBlPWMsYn1mdW5jdGlvbiB1KGEpe3JldHVybiBhIGluc3RhbmNlb2YgRy5FdmVudFRhcmdldHx8YSBpbnN0YW5jZW9mIEcuRXZlbnR8fGEgaW5zdGFuY2VvZiBHLlJhbmdlfHxhIGluc3RhbmNlb2YgRy5ET01JbXBsZW1lbnRhdGlvbnx8YSBpbnN0YW5jZW9mIEcuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfHxHLldlYkdMUmVuZGVyaW5nQ29udGV4dCYmYSBpbnN0YW5jZW9mIEcuV2ViR0xSZW5kZXJpbmdDb250ZXh0fWZ1bmN0aW9uIHYoYSl7cmV0dXJuIFEmJmEgaW5zdGFuY2VvZiBRfHxhIGluc3RhbmNlb2YgU3x8YSBpbnN0YW5jZW9mIFJ8fGEgaW5zdGFuY2VvZiBUfHxhIGluc3RhbmNlb2YgVXx8YSBpbnN0YW5jZW9mIFB8fGEgaW5zdGFuY2VvZiBWfHxXJiZhIGluc3RhbmNlb2YgV3x8WCYmYSBpbnN0YW5jZW9mIFh9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYih2KGEpKSxhLnBvbHltZXJXcmFwcGVyX3x8KGEucG9seW1lcldyYXBwZXJfPW5ldyhmKGEpKShhKSkpfWZ1bmN0aW9uIHgoYSl7cmV0dXJuIG51bGw9PT1hP251bGw6KGIodShhKSksYS5pbXBsKX1mdW5jdGlvbiB5KGEpe3JldHVybiBhJiZ1KGEpP3goYSk6YX1mdW5jdGlvbiB6KGEpe3JldHVybiBhJiYhdShhKT93KGEpOmF9ZnVuY3Rpb24gQShhLGMpe251bGwhPT1jJiYoYih2KGEpKSxiKHZvaWQgMD09PWN8fHUoYykpLGEucG9seW1lcldyYXBwZXJfPWMpfWZ1bmN0aW9uIEIoYSxiLGMpe0soYS5wcm90b3R5cGUsYix7Z2V0OmMsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBDKGEsYil7QihhLGIsZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLmltcGxbYl0pfSl9ZnVuY3Rpb24gRChhLGIpe2EuZm9yRWFjaChmdW5jdGlvbihhKXtiLmZvckVhY2goZnVuY3Rpb24oYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXt2YXIgYT16KHRoaXMpO3JldHVybiBhW2JdLmFwcGx5KGEsYXJndW1lbnRzKX19KX0pfXZhciBFPW5ldyBXZWFrTWFwLEY9bmV3IFdlYWtNYXAsRz1PYmplY3QuY3JlYXRlKG51bGwpLEg9ISgic2VjdXJpdHlQb2xpY3kiaW4gZG9jdW1lbnQpfHxkb2N1bWVudC5zZWN1cml0eVBvbGljeS5hbGxvd3NFdmFsO2lmKEgpdHJ5e3ZhciBJPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7SD1JKCl9Y2F0Y2goSil7SD0hMX12YXIgSz1PYmplY3QuZGVmaW5lUHJvcGVydHksTD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxNPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7TCh3aW5kb3cpO3ZhciBOPS9GaXJlZm94Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLE89e2dldDpmdW5jdGlvbigpe30sc2V0OmZ1bmN0aW9uKCl7fSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0sUD13aW5kb3cuRE9NSW1wbGVtZW50YXRpb24sUT13aW5kb3cuRXZlbnRUYXJnZXQsUj13aW5kb3cuRXZlbnQsUz13aW5kb3cuTm9kZSxUPXdpbmRvdy5XaW5kb3csVT13aW5kb3cuUmFuZ2UsVj13aW5kb3cuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFc9d2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCxYPXdpbmRvdy5TVkdFbGVtZW50SW5zdGFuY2U7YS5hc3NlcnQ9YixhLmNvbnN0cnVjdG9yVGFibGU9RSxhLmRlZmluZUdldHRlcj1CLGEuZGVmaW5lV3JhcEdldHRlcj1DLGEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXI9RCxhLmlzV3JhcHBlcj11LGEuaXNXcmFwcGVyRm9yPXIsYS5taXhpbj1jLGEubmF0aXZlUHJvdG90eXBlVGFibGU9RixhLm9uZU9mPWUsYS5yZWdpc3Rlck9iamVjdD1zLGEucmVnaXN0ZXJXcmFwcGVyPXAsYS5yZXdyYXA9QSxhLnVud3JhcD14LGEudW53cmFwSWZOZWVkZWQ9eSxhLndyYXA9dyxhLndyYXBJZk5lZWRlZD16LGEud3JhcHBlcnM9R30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe2c9ITE7dmFyIGE9Zi5zbGljZSgwKTtmPVtdO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0oKX1mdW5jdGlvbiBjKGEpe2YucHVzaChhKSxnfHwoZz0hMCxkKGIsMCkpfXZhciBkLGU9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIsZj1bXSxnPSExO2lmKGUpe3ZhciBoPTEsaT1uZXcgZShiKSxqPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGgpO2kub2JzZXJ2ZShqLHtjaGFyYWN0ZXJEYXRhOiEwfSksZD1mdW5jdGlvbigpe2g9KGgrMSklMixqLmRhdGE9aH19ZWxzZSBkPXdpbmRvdy5zZXRUaW1lb3V0O2Euc2V0RW5kT2ZNaWNyb3Rhc2s9Y30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe3B8fChrKGMpLHA9ITApfWZ1bmN0aW9uIGMoKXtwPSExO2RvIGZvcih2YXIgYT1vLnNsaWNlKCksYj0hMSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10sZT1kLnRha2VSZWNvcmRzKCk7ZihkKSxlLmxlbmd0aCYmKGQuY2FsbGJhY2tfKGUsZCksYj0hMCl9d2hpbGUoYil9ZnVuY3Rpb24gZChhLGIpe3RoaXMudHlwZT1hLHRoaXMudGFyZ2V0PWIsdGhpcy5hZGRlZE5vZGVzPW5ldyBtLk5vZGVMaXN0LHRoaXMucmVtb3ZlZE5vZGVzPW5ldyBtLk5vZGVMaXN0LHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGUoYSxiKXtmb3IoO2E7YT1hLnBhcmVudE5vZGUpe3ZhciBjPW4uZ2V0KGEpO2lmKGMpZm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07ZS5vcHRpb25zLnN1YnRyZWUmJmUuYWRkVHJhbnNpZW50T2JzZXJ2ZXIoYil9fX1mdW5jdGlvbiBmKGEpe2Zvcih2YXIgYj0wO2I8YS5ub2Rlc18ubGVuZ3RoO2IrKyl7dmFyIGM9YS5ub2Rlc19bYl0sZD1uLmdldChjKTtpZighZClyZXR1cm47Zm9yKHZhciBlPTA7ZTxkLmxlbmd0aDtlKyspe3ZhciBmPWRbZV07Zi5vYnNlcnZlcj09PWEmJmYucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9fX1mdW5jdGlvbiBnKGEsYyxlKXtmb3IodmFyIGY9T2JqZWN0LmNyZWF0ZShudWxsKSxnPU9iamVjdC5jcmVhdGUobnVsbCksaD1hO2g7aD1oLnBhcmVudE5vZGUpe3ZhciBpPW4uZ2V0KGgpO2lmKGkpZm9yKHZhciBqPTA7ajxpLmxlbmd0aDtqKyspe3ZhciBrPWlbal0sbD1rLm9wdGlvbnM7aWYoKGg9PT1hfHxsLnN1YnRyZWUpJiYhKCJhdHRyaWJ1dGVzIj09PWMmJiFsLmF0dHJpYnV0ZXN8fCJhdHRyaWJ1dGVzIj09PWMmJmwuYXR0cmlidXRlRmlsdGVyJiYobnVsbCE9PWUubmFtZXNwYWNlfHwtMT09PWwuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoZS5uYW1lKSl8fCJjaGFyYWN0ZXJEYXRhIj09PWMmJiFsLmNoYXJhY3RlckRhdGF8fCJjaGlsZExpc3QiPT09YyYmIWwuY2hpbGRMaXN0KSl7dmFyIG09ay5vYnNlcnZlcjtmW20udWlkX109bSwoImF0dHJpYnV0ZXMiPT09YyYmbC5hdHRyaWJ1dGVPbGRWYWx1ZXx8ImNoYXJhY3RlckRhdGEiPT09YyYmbC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpJiYoZ1ttLnVpZF9dPWUub2xkVmFsdWUpfX19dmFyIG89ITE7Zm9yKHZhciBwIGluIGYpe3ZhciBtPWZbcF0scT1uZXcgZChjLGEpOyJuYW1lImluIGUmJiJuYW1lc3BhY2UiaW4gZSYmKHEuYXR0cmlidXRlTmFtZT1lLm5hbWUscS5hdHRyaWJ1dGVOYW1lc3BhY2U9ZS5uYW1lc3BhY2UpLGUuYWRkZWROb2RlcyYmKHEuYWRkZWROb2Rlcz1lLmFkZGVkTm9kZXMpLGUucmVtb3ZlZE5vZGVzJiYocS5yZW1vdmVkTm9kZXM9ZS5yZW1vdmVkTm9kZXMpLGUucHJldmlvdXNTaWJsaW5nJiYocS5wcmV2aW91c1NpYmxpbmc9ZS5wcmV2aW91c1NpYmxpbmcpLGUubmV4dFNpYmxpbmcmJihxLm5leHRTaWJsaW5nPWUubmV4dFNpYmxpbmcpLHZvaWQgMCE9PWdbcF0mJihxLm9sZFZhbHVlPWdbcF0pLG0ucmVjb3Jkc18ucHVzaChxKSxvPSEwfW8mJmIoKX1mdW5jdGlvbiBoKGEpe2lmKHRoaXMuY2hpbGRMaXN0PSEhYS5jaGlsZExpc3QsdGhpcy5zdWJ0cmVlPSEhYS5zdWJ0cmVlLHRoaXMuYXR0cmlidXRlcz0iYXR0cmlidXRlcyJpbiBhfHwhKCJhdHRyaWJ1dGVPbGRWYWx1ZSJpbiBhfHwiYXR0cmlidXRlRmlsdGVyImluIGEpPyEhYS5hdHRyaWJ1dGVzOiEwLHRoaXMuY2hhcmFjdGVyRGF0YT0iY2hhcmFjdGVyRGF0YU9sZFZhbHVlImluIGEmJiEoImNoYXJhY3RlckRhdGEiaW4gYSk/ITA6ISFhLmNoYXJhY3RlckRhdGEsIXRoaXMuYXR0cmlidXRlcyYmKGEuYXR0cmlidXRlT2xkVmFsdWV8fCJhdHRyaWJ1dGVGaWx0ZXIiaW4gYSl8fCF0aGlzLmNoYXJhY3RlckRhdGEmJmEuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKXRocm93IG5ldyBUeXBlRXJyb3I7aWYodGhpcy5jaGFyYWN0ZXJEYXRhPSEhYS5jaGFyYWN0ZXJEYXRhLHRoaXMuYXR0cmlidXRlT2xkVmFsdWU9ISFhLmF0dHJpYnV0ZU9sZFZhbHVlLHRoaXMuY2hhcmFjdGVyRGF0YU9sZFZhbHVlPSEhYS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUsImF0dHJpYnV0ZUZpbHRlciJpbiBhKXtpZihudWxsPT1hLmF0dHJpYnV0ZUZpbHRlcnx8Im9iamVjdCIhPXR5cGVvZiBhLmF0dHJpYnV0ZUZpbHRlcil0aHJvdyBuZXcgVHlwZUVycm9yO3RoaXMuYXR0cmlidXRlRmlsdGVyPXEuY2FsbChhLmF0dHJpYnV0ZUZpbHRlcil9ZWxzZSB0aGlzLmF0dHJpYnV0ZUZpbHRlcj1udWxsfWZ1bmN0aW9uIGkoYSl7dGhpcy5jYWxsYmFja189YSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3Isby5wdXNoKHRoaXMpfWZ1bmN0aW9uIGooYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgaz1hLnNldEVuZE9mTWljcm90YXNrLGw9YS53cmFwSWZOZWVkZWQsbT1hLndyYXBwZXJzLG49bmV3IFdlYWtNYXAsbz1bXSxwPSExLHE9QXJyYXkucHJvdG90eXBlLnNsaWNlLHI9MDtpLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2E9bChhKTt2YXIgYyxkPW5ldyBoKGIpLGU9bi5nZXQoYSk7ZXx8bi5zZXQoYSxlPVtdKTtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKyllW2ZdLm9ic2VydmVyPT09dGhpcyYmKGM9ZVtmXSxjLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpLGMub3B0aW9ucz1kKTtjfHwoYz1uZXcgaih0aGlzLGEsZCksZS5wdXNoKGMpLHRoaXMubm9kZXNfLnB1c2goYSkpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9bi5nZXQoYSksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdO2lmKGQub2JzZXJ2ZXI9PT10aGlzKXtiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX0sai5wcm90b3R5cGU9e2FkZFRyYW5zaWVudE9ic2VydmVyOmZ1bmN0aW9uKGEpe2lmKGEhPT10aGlzLnRhcmdldCl7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9bi5nZXQoYSk7Ynx8bi5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWZvcih2YXIgYz1hW2JdLGQ9bi5nZXQoYyksZT0wO2U8ZC5sZW5ndGg7ZSsrKWlmKGRbZV09PT10aGlzKXtkLnNwbGljZShlLDEpO2JyZWFrfX19LGEuZW5xdWV1ZU11dGF0aW9uPWcsYS5yZWdpc3RlclRyYW5zaWVudE9ic2VydmVycz1lLGEud3JhcHBlcnMuTXV0YXRpb25PYnNlcnZlcj1pLGEud3JhcHBlcnMuTXV0YXRpb25SZWNvcmQ9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe3RoaXMucm9vdD1hLHRoaXMucGFyZW50PWJ9ZnVuY3Rpb24gYyhhLGIpe2lmKGEudHJlZVNjb3BlXyE9PWIpe2EudHJlZVNjb3BlXz1iO2Zvcih2YXIgZD1hLnNoYWRvd1Jvb3Q7ZDtkPWQub2xkZXJTaGFkb3dSb290KWQudHJlZVNjb3BlXy5wYXJlbnQ9Yjtmb3IodmFyIGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWMoZSxiKX19ZnVuY3Rpb24gZChhKXtpZihhLnRyZWVTY29wZV8pcmV0dXJuIGEudHJlZVNjb3BlXzt2YXIgYyxlPWEucGFyZW50Tm9kZTtyZXR1cm4gYz1lP2QoZSk6bmV3IGIoYSxudWxsKSxhLnRyZWVTY29wZV89Y31iLnByb3RvdHlwZT17Z2V0IHJlbmRlcmVyKCl7cmV0dXJuIHRoaXMucm9vdCBpbnN0YW5jZW9mIGEud3JhcHBlcnMuU2hhZG93Um9vdD9hLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzLnJvb3QuaG9zdCk6bnVsbH0sY29udGFpbnM6ZnVuY3Rpb24oYSl7Zm9yKDthO2E9YS5wYXJlbnQpaWYoYT09PXRoaXMpcmV0dXJuITA7cmV0dXJuITF9fSxhLlRyZWVTY29wZT1iLGEuZ2V0VHJlZVNjb3BlPWQsYS5zZXRUcmVlU2NvcGU9Y30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFEuU2hhZG93Um9vdH1mdW5jdGlvbiBjKGEpe3ZhciBiPWEubG9jYWxOYW1lO3JldHVybiJjb250ZW50Ij09PWJ8fCJzaGFkb3ciPT09Yn1mdW5jdGlvbiBkKGEpe3JldHVybiEhYS5zaGFkb3dSb290fWZ1bmN0aW9uIGUoYSl7dmFyIGI7cmV0dXJuIGEucGFyZW50Tm9kZXx8KGI9YS5kZWZhdWx0VmlldykmJlAoYil8fG51bGx9ZnVuY3Rpb24gZihmLGcsaCl7aWYoaC5sZW5ndGgpcmV0dXJuIGguc2hpZnQoKTtpZihiKGYpKXJldHVybiBqKGYpfHxmLmhvc3Q7dmFyIGk9YS5ldmVudFBhcmVudHNUYWJsZS5nZXQoZik7aWYoaSl7Zm9yKHZhciBrPTE7azxpLmxlbmd0aDtrKyspaFtrLTFdPWlba107cmV0dXJuIGlbMF19aWYoZyYmYyhmKSl7dmFyIGw9Zi5wYXJlbnROb2RlO2lmKGwmJmQobCkpZm9yKHZhciBtPWEuZ2V0U2hhZG93VHJlZXMobCksbj1qKGcpLGs9MDtrPG0ubGVuZ3RoO2srKylpZihtW2tdLmNvbnRhaW5zKG4pKXJldHVybiBufXJldHVybiBlKGYpfWZ1bmN0aW9uIGcoYSl7Zm9yKHZhciBkPVtdLGU9YSxnPVtdLGk9W107ZTspe3ZhciBqPW51bGw7aWYoYyhlKSl7aj1oKGQpO3ZhciBrPWRbZC5sZW5ndGgtMV18fGU7ZC5wdXNoKGspfWVsc2UgZC5sZW5ndGh8fGQucHVzaChlKTt2YXIgbD1kW2QubGVuZ3RoLTFdO2cucHVzaCh7dGFyZ2V0OmwsY3VycmVudFRhcmdldDplfSksYihlKSYmZC5wb3AoKSxlPWYoZSxqLGkpfXJldHVybiBnfWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTE7Yj49MDtiLS0paWYoIWMoYVtiXSkpcmV0dXJuIGFbYl07cmV0dXJuIG51bGx9ZnVuY3Rpb24gaShhLGQpe2Zvcih2YXIgZT1bXTthOyl7Zm9yKHZhciBnPVtdLGk9ZCxqPXZvaWQgMDtpOyl7dmFyIG09bnVsbDtpZihnLmxlbmd0aCl7aWYoYyhpKSYmKG09aChnKSxrKGopKSl7dmFyIG49Z1tnLmxlbmd0aC0xXTtnLnB1c2gobil9fWVsc2UgZy5wdXNoKGkpO2lmKGwoaSxhKSlyZXR1cm4gZ1tnLmxlbmd0aC0xXTtiKGkpJiZnLnBvcCgpLGo9aSxpPWYoaSxtLGUpfWE9YihhKT9hLmhvc3Q6YS5wYXJlbnROb2RlfX1mdW5jdGlvbiBqKGIpe3JldHVybiBhLmluc2VydGlvblBhcmVudFRhYmxlLmdldChiKX1mdW5jdGlvbiBrKGEpe3JldHVybiBqKGEpfWZ1bmN0aW9uIGwoYSxiKXtyZXR1cm4gTChhKT09PUwoYil9ZnVuY3Rpb24gbShhKXtTLmdldChhKXx8KFMuc2V0KGEsITApLG8oUChhKSxQKGEudGFyZ2V0KSkpfWZ1bmN0aW9uIG4oYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJiZWZvcmV1bmxvYWQiOmNhc2UibG9hZCI6Y2FzZSJ1bmxvYWQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIG8oYixjKXtpZihULmdldChiKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWRTdGF0ZUVycm9yIik7VC5zZXQoYiwhMCksYS5yZW5kZXJBbGxQZW5kaW5nKCk7dmFyIGQ9ZyhjKTtyZXR1cm4gMj09PWQubGVuZ3RoJiZkWzBdLnRhcmdldCBpbnN0YW5jZW9mIFEuRG9jdW1lbnQmJm4oYikmJmQuc2hpZnQoKSxfLnNldChiLGQpLHAoYixkKSYmcShiLGQpJiZyKGIsZCksWC5zZXQoYix1Lk5PTkUpLFYuZGVsZXRlKGIsbnVsbCksVC5kZWxldGUoYiksYi5kZWZhdWx0UHJldmVudGVkfWZ1bmN0aW9uIHAoYSxiKXtmb3IodmFyIGMsZD1iLmxlbmd0aC0xO2Q+MDtkLS0pe3ZhciBlPWJbZF0udGFyZ2V0LGY9YltkXS5jdXJyZW50VGFyZ2V0O2lmKGUhPT1mJiYoYz11LkNBUFRVUklOR19QSEFTRSwhcyhiW2RdLGEsYykpKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIHEoYSxiKXt2YXIgYz11LkFUX1RBUkdFVDtyZXR1cm4gcyhiWzBdLGEsYyl9ZnVuY3Rpb24gcihhLGIpe2Zvcih2YXIgYyxkPWEuYnViYmxlcyxlPTE7ZTxiLmxlbmd0aDtlKyspe3ZhciBmPWJbZV0udGFyZ2V0LGc9YltlXS5jdXJyZW50VGFyZ2V0O2lmKGY9PT1nKWM9dS5BVF9UQVJHRVQ7ZWxzZXtpZighZHx8Wi5nZXQoYSkpY29udGludWU7Yz11LkJVQkJMSU5HX1BIQVNFfWlmKCFzKGJbZV0sYSxjKSlyZXR1cm59fWZ1bmN0aW9uIHMoYSxiLGMpe3ZhciBkPWEudGFyZ2V0LGU9YS5jdXJyZW50VGFyZ2V0LGY9Ui5nZXQoZSk7aWYoIWYpcmV0dXJuITA7aWYoInJlbGF0ZWRUYXJnZXQiaW4gYil7dmFyIGc9TyhiKSxoPWcucmVsYXRlZFRhcmdldDtpZihoKXtpZihoIGluc3RhbmNlb2YgT2JqZWN0JiZoLmFkZEV2ZW50TGlzdGVuZXIpe3ZhciBqPVAoaCksaz1pKGUsaik7aWYoaz09PWQpcmV0dXJuITB9ZWxzZSBrPW51bGw7Vy5zZXQoYixrKX19WC5zZXQoYixjKTt2YXIgbD1iLnR5cGUsbT0hMTtVLnNldChiLGQpLFYuc2V0KGIsZSk7Zm9yKHZhciBuPTA7bjxmLmxlbmd0aDtuKyspe3ZhciBvPWZbbl07aWYoby5yZW1vdmVkKW09ITA7ZWxzZSBpZighKG8udHlwZSE9PWx8fCFvLmNhcHR1cmUmJmM9PT11LkNBUFRVUklOR19QSEFTRXx8by5jYXB0dXJlJiZjPT09dS5CVUJCTElOR19QSEFTRSkpdHJ5e2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBvLmhhbmRsZXI/by5oYW5kbGVyLmNhbGwoZSxiKTpvLmhhbmRsZXIuaGFuZGxlRXZlbnQoYiksWi5nZXQoYikpcmV0dXJuITF9Y2F0Y2gocCl7d2luZG93Lm9uZXJyb3I/d2luZG93Lm9uZXJyb3IocC5tZXNzYWdlKTpjb25zb2xlLmVycm9yKHAscC5zdGFjayl9fWlmKG0pe3ZhciBxPWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgbj0wO248cS5sZW5ndGg7bisrKXFbbl0ucmVtb3ZlZHx8Zi5wdXNoKHFbbl0pfXJldHVybiFZLmdldChiKX1mdW5jdGlvbiB0KGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB1KGEsYil7aWYoIShhIGluc3RhbmNlb2YgYWIpKXJldHVybiBQKHkoYWIsIkV2ZW50IixhLGIpKTsKdmFyIGM9YTtyZXR1cm4gbGJ8fCJiZWZvcmV1bmxvYWQiIT09Yy50eXBlP3ZvaWQodGhpcy5pbXBsPWMpOm5ldyB6KGMpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIGEmJmEucmVsYXRlZFRhcmdldD9PYmplY3QuY3JlYXRlKGEse3JlbGF0ZWRUYXJnZXQ6e3ZhbHVlOk8oYS5yZWxhdGVkVGFyZ2V0KX19KTphfWZ1bmN0aW9uIHcoYSxiLGMpe3ZhciBkPXdpbmRvd1thXSxlPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGIgaW5zdGFuY2VvZiBkP3ZvaWQodGhpcy5pbXBsPWIpOlAoeShkLGEsYixjKSl9O2lmKGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLGMmJk0oZS5wcm90b3R5cGUsYyksZCl0cnl7TihkLGUsbmV3IGQoInRlbXAiKSl9Y2F0Y2goZil7TihkLGUsZG9jdW1lbnQuY3JlYXRlRXZlbnQoYSkpfXJldHVybiBlfWZ1bmN0aW9uIHgoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXthcmd1bWVudHNbYl09Tyhhcmd1bWVudHNbYl0pO3ZhciBjPU8odGhpcyk7Y1thXS5hcHBseShjLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHkoYSxiLGMsZCl7aWYoamIpcmV0dXJuIG5ldyBhKGMsdihkKSk7dmFyIGU9Tyhkb2N1bWVudC5jcmVhdGVFdmVudChiKSksZj1pYltiXSxnPVtjXTtyZXR1cm4gT2JqZWN0LmtleXMoZikuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1udWxsIT1kJiZhIGluIGQ/ZFthXTpmW2FdOyJyZWxhdGVkVGFyZ2V0Ij09PWEmJihiPU8oYikpLGcucHVzaChiKX0pLGVbImluaXQiK2JdLmFwcGx5KGUsZyksZX1mdW5jdGlvbiB6KGEpe3UuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIEEoYSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGE/ITA6YSYmYS5oYW5kbGVFdmVudH1mdW5jdGlvbiBCKGEpe3N3aXRjaChhKXtjYXNlIkRPTUF0dHJNb2RpZmllZCI6Y2FzZSJET01BdHRyaWJ1dGVOYW1lQ2hhbmdlZCI6Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOmNhc2UiRE9NRWxlbWVudE5hbWVDaGFuZ2VkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZCI6Y2FzZSJET01Ob2RlSW5zZXJ0ZWRJbnRvRG9jdW1lbnQiOmNhc2UiRE9NTm9kZVJlbW92ZWQiOmNhc2UiRE9NTm9kZVJlbW92ZWRGcm9tRG9jdW1lbnQiOmNhc2UiRE9NU3VidHJlZU1vZGlmaWVkIjpyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBDKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIEQoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBRLlNoYWRvd1Jvb3QmJihhPWEuaG9zdCksTyhhKX1mdW5jdGlvbiBFKGEsYil7dmFyIGM9Ui5nZXQoYSk7aWYoYylmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKylpZighY1tkXS5yZW1vdmVkJiZjW2RdLnR5cGU9PT1iKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEYoYSxiKXtmb3IodmFyIGM9TyhhKTtjO2M9Yy5wYXJlbnROb2RlKWlmKEUoUChjKSxiKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBHKGEpe0soYSxuYil9ZnVuY3Rpb24gSChiLGMsZCxlKXthLnJlbmRlckFsbFBlbmRpbmcoKTtmb3IodmFyIGY9UChvYi5jYWxsKGMuaW1wbCxkLGUpKSxoPWcoZix0aGlzKSxpPTA7aTxoLmxlbmd0aDtpKyspe3ZhciBqPWhbaV07aWYoai5jdXJyZW50VGFyZ2V0PT09YilyZXR1cm4gai50YXJnZXR9cmV0dXJuIG51bGx9ZnVuY3Rpb24gSShhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj0kLmdldCh0aGlzKTtyZXR1cm4gYiYmYlthXSYmYlthXS52YWx1ZXx8bnVsbH19ZnVuY3Rpb24gSihhKXt2YXIgYj1hLnNsaWNlKDIpO3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD0kLmdldCh0aGlzKTtkfHwoZD1PYmplY3QuY3JlYXRlKG51bGwpLCQuc2V0KHRoaXMsZCkpO3ZhciBlPWRbYV07aWYoZSYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGIsZS53cmFwcGVkLCExKSwiZnVuY3Rpb24iPT10eXBlb2YgYyl7dmFyIGY9ZnVuY3Rpb24oYil7dmFyIGQ9Yy5jYWxsKHRoaXMsYik7ZD09PSExP2IucHJldmVudERlZmF1bHQoKToib25iZWZvcmV1bmxvYWQiPT09YSYmInN0cmluZyI9PXR5cGVvZiBkJiYoYi5yZXR1cm5WYWx1ZT1kKX07dGhpcy5hZGRFdmVudExpc3RlbmVyKGIsZiwhMSksZFthXT17dmFsdWU6Yyx3cmFwcGVkOmZ9fX19dmFyIEs9YS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcixMPWEuZ2V0VHJlZVNjb3BlLE09YS5taXhpbixOPWEucmVnaXN0ZXJXcmFwcGVyLE89YS51bndyYXAsUD1hLndyYXAsUT1hLndyYXBwZXJzLFI9KG5ldyBXZWFrTWFwLG5ldyBXZWFrTWFwKSxTPW5ldyBXZWFrTWFwLFQ9bmV3IFdlYWtNYXAsVT1uZXcgV2Vha01hcCxWPW5ldyBXZWFrTWFwLFc9bmV3IFdlYWtNYXAsWD1uZXcgV2Vha01hcCxZPW5ldyBXZWFrTWFwLFo9bmV3IFdlYWtNYXAsJD1uZXcgV2Vha01hcCxfPW5ldyBXZWFrTWFwO3QucHJvdG90eXBlPXtlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaGFuZGxlcj09PWEuaGFuZGxlciYmdGhpcy50eXBlPT09YS50eXBlJiZ0aGlzLmNhcHR1cmU9PT1hLmNhcHR1cmV9LGdldCByZW1vdmVkKCl7cmV0dXJuIG51bGw9PT10aGlzLmhhbmRsZXJ9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlcj1udWxsfX07dmFyIGFiPXdpbmRvdy5FdmVudDthYi5wcm90b3R5cGUucG9seW1lckJsYWNrTGlzdF89e3JldHVyblZhbHVlOiEwLGtleUxvY2F0aW9uOiEwfSx1LnByb3RvdHlwZT17Z2V0IHRhcmdldCgpe3JldHVybiBVLmdldCh0aGlzKX0sZ2V0IGN1cnJlbnRUYXJnZXQoKXtyZXR1cm4gVi5nZXQodGhpcyl9LGdldCBldmVudFBoYXNlKCl7cmV0dXJuIFguZ2V0KHRoaXMpfSxnZXQgcGF0aCgpe3ZhciBhPW5ldyBRLk5vZGVMaXN0LGI9Xy5nZXQodGhpcyk7aWYoYil7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aC0xLGU9TChWLmdldCh0aGlzKSksZj0wO2Q+PWY7ZisrKXt2YXIgZz1iW2ZdLmN1cnJlbnRUYXJnZXQsaD1MKGcpO2guY29udGFpbnMoZSkmJihmIT09ZHx8ZyBpbnN0YW5jZW9mIFEuTm9kZSkmJihhW2MrK109Zyl9YS5sZW5ndGg9Y31yZXR1cm4gYX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7WS5zZXQodGhpcywhMCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe1kuc2V0KHRoaXMsITApLFouc2V0KHRoaXMsITApfX0sTihhYix1LGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpKTt2YXIgYmI9dygiVUlFdmVudCIsdSksY2I9dygiQ3VzdG9tRXZlbnQiLHUpLGRiPXtnZXQgcmVsYXRlZFRhcmdldCgpe3JldHVybiBXLmdldCh0aGlzKXx8UChPKHRoaXMpLnJlbGF0ZWRUYXJnZXQpfX0sZWI9TSh7aW5pdE1vdXNlRXZlbnQ6eCgiaW5pdE1vdXNlRXZlbnQiLDE0KX0sZGIpLGZiPU0oe2luaXRGb2N1c0V2ZW50OngoImluaXRGb2N1c0V2ZW50Iiw1KX0sZGIpLGdiPXcoIk1vdXNlRXZlbnQiLGJiLGViKSxoYj13KCJGb2N1c0V2ZW50IixiYixmYiksaWI9T2JqZWN0LmNyZWF0ZShudWxsKSxqYj1mdW5jdGlvbigpe3RyeXtuZXcgd2luZG93LkZvY3VzRXZlbnQoImZvY3VzIil9Y2F0Y2goYSl7cmV0dXJuITF9cmV0dXJuITB9KCk7aWYoIWpiKXt2YXIga2I9ZnVuY3Rpb24oYSxiLGMpe2lmKGMpe3ZhciBkPWliW2NdO2I9TShNKHt9LGQpLGIpfWliW2FdPWJ9O2tiKCJFdmVudCIse2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMX0pLGtiKCJDdXN0b21FdmVudCIse2RldGFpbDpudWxsfSwiRXZlbnQiKSxrYigiVUlFdmVudCIse3ZpZXc6bnVsbCxkZXRhaWw6MH0sIkV2ZW50Iiksa2IoIk1vdXNlRXZlbnQiLHtzY3JlZW5YOjAsc2NyZWVuWTowLGNsaWVudFg6MCxjbGllbnRZOjAsY3RybEtleTohMSxhbHRLZXk6ITEsc2hpZnRLZXk6ITEsbWV0YUtleTohMSxidXR0b246MCxyZWxhdGVkVGFyZ2V0Om51bGx9LCJVSUV2ZW50Iiksa2IoIkZvY3VzRXZlbnQiLHtyZWxhdGVkVGFyZ2V0Om51bGx9LCJVSUV2ZW50Iil9dmFyIGxiPXdpbmRvdy5CZWZvcmVVbmxvYWRFdmVudDt6LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxNKHoucHJvdG90eXBlLHtnZXQgcmV0dXJuVmFsdWUoKXtyZXR1cm4gdGhpcy5pbXBsLnJldHVyblZhbHVlfSxzZXQgcmV0dXJuVmFsdWUoYSl7dGhpcy5pbXBsLnJldHVyblZhbHVlPWF9fSksbGImJk4obGIseik7dmFyIG1iPXdpbmRvdy5FdmVudFRhcmdldCxuYj1bImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdO1tOb2RlLFdpbmRvd10uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnByb3RvdHlwZTtuYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLGErIl8iLHt2YWx1ZTpiW2FdfSl9KX0pLEMucHJvdG90eXBlPXthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtpZihBKGIpJiYhQihhKSl7dmFyIGQ9bmV3IHQoYSxiLGMpLGU9Ui5nZXQodGhpcyk7aWYoZSl7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspaWYoZC5lcXVhbHMoZVtmXSkpcmV0dXJufWVsc2UgZT1bXSxSLnNldCh0aGlzLGUpO2UucHVzaChkKTt2YXIgZz1EKHRoaXMpO2cuYWRkRXZlbnRMaXN0ZW5lcl8oYSxtLCEwKX19LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2M9Qm9vbGVhbihjKTt2YXIgZD1SLmdldCh0aGlzKTtpZihkKXtmb3IodmFyIGU9MCxmPSExLGc9MDtnPGQubGVuZ3RoO2crKylkW2ddLnR5cGU9PT1hJiZkW2ddLmNhcHR1cmU9PT1jJiYoZSsrLGRbZ10uaGFuZGxlcj09PWImJihmPSEwLGRbZ10ucmVtb3ZlKCkpKTtpZihmJiYxPT09ZSl7dmFyIGg9RCh0aGlzKTtoLnJlbW92ZUV2ZW50TGlzdGVuZXJfKGEsbSwhMCl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihiKXt2YXIgYz1PKGIpLGQ9Yy50eXBlO1Muc2V0KGMsITEpLGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBlO0YodGhpcyxkKXx8KGU9ZnVuY3Rpb24oKXt9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkLGUsITApKTt0cnl7cmV0dXJuIE8odGhpcykuZGlzcGF0Y2hFdmVudF8oYyl9ZmluYWxseXtlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxlLCEwKX19fSxtYiYmTihtYixDKTt2YXIgb2I9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludDthLmFkanVzdFJlbGF0ZWRUYXJnZXQ9aSxhLmVsZW1lbnRGcm9tUG9pbnQ9SCxhLmdldEV2ZW50SGFuZGxlckdldHRlcj1JLGEuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyPUosYS53cmFwRXZlbnRUYXJnZXRNZXRob2RzPUcsYS53cmFwcGVycy5CZWZvcmVVbmxvYWRFdmVudD16LGEud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9Y2IsYS53cmFwcGVycy5FdmVudD11LGEud3JhcHBlcnMuRXZlbnRUYXJnZXQ9QyxhLndyYXBwZXJzLkZvY3VzRXZlbnQ9aGIsYS53cmFwcGVycy5Nb3VzZUV2ZW50PWdiLGEud3JhcHBlcnMuVUlFdmVudD1iYn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse2VudW1lcmFibGU6ITF9KX1mdW5jdGlvbiBjKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGQoYSl7aWYobnVsbD09YSlyZXR1cm4gYTtmb3IodmFyIGI9bmV3IGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyliW2RdPWYoYVtkXSk7cmV0dXJuIGIubGVuZ3RoPWUsYn1mdW5jdGlvbiBlKGEsYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX12YXIgZj1hLndyYXA7Yy5wcm90b3R5cGU9e2l0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19fSxiKGMucHJvdG90eXBlLCJpdGVtIiksYS53cmFwcGVycy5Ob2RlTGlzdD1jLGEuYWRkV3JhcE5vZGVMaXN0TWV0aG9kPWUsYS53cmFwTm9kZUxpc3Q9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7YS53cmFwSFRNTENvbGxlY3Rpb249YS53cmFwTm9kZUxpc3QsYS53cmFwcGVycy5IVE1MQ29sbGVjdGlvbj1hLndyYXBwZXJzLk5vZGVMaXN0fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe0EoYSBpbnN0YW5jZW9mIHcpfWZ1bmN0aW9uIGMoYSl7dmFyIGI9bmV3IHk7cmV0dXJuIGJbMF09YSxiLmxlbmd0aD0xLGJ9ZnVuY3Rpb24gZChhLGIsYyl7QyhiLCJjaGlsZExpc3QiLHtyZW1vdmVkTm9kZXM6YyxwcmV2aW91c1NpYmxpbmc6YS5wcmV2aW91c1NpYmxpbmcsbmV4dFNpYmxpbmc6YS5uZXh0U2libGluZ30pfWZ1bmN0aW9uIGUoYSxiKXtDKGEsImNoaWxkTGlzdCIse3JlbW92ZWROb2RlczpifSl9ZnVuY3Rpb24gZihhLGIsZCxlKXtpZihhIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7dmFyIGY9aChhKTtOPSEwO2Zvcih2YXIgZz1mLmxlbmd0aC0xO2c+PTA7Zy0tKWEucmVtb3ZlQ2hpbGQoZltnXSksZltnXS5wYXJlbnROb2RlXz1iO049ITE7Zm9yKHZhciBnPTA7ZzxmLmxlbmd0aDtnKyspZltnXS5wcmV2aW91c1NpYmxpbmdfPWZbZy0xXXx8ZCxmW2ddLm5leHRTaWJsaW5nXz1mW2crMV18fGU7cmV0dXJuIGQmJihkLm5leHRTaWJsaW5nXz1mWzBdKSxlJiYoZS5wcmV2aW91c1NpYmxpbmdfPWZbZi5sZW5ndGgtMV0pLGZ9dmFyIGY9YyhhKSxpPWEucGFyZW50Tm9kZTtyZXR1cm4gaSYmaS5yZW1vdmVDaGlsZChhKSxhLnBhcmVudE5vZGVfPWIsYS5wcmV2aW91c1NpYmxpbmdfPWQsYS5uZXh0U2libGluZ189ZSxkJiYoZC5uZXh0U2libGluZ189YSksZSYmKGUucHJldmlvdXNTaWJsaW5nXz1hKSxmfWZ1bmN0aW9uIGcoYSl7aWYoYSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpcmV0dXJuIGgoYSk7dmFyIGI9YyhhKSxlPWEucGFyZW50Tm9kZTtyZXR1cm4gZSYmZChhLGUsYiksYn1mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYj1uZXcgeSxjPTAsZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYltjKytdPWQ7cmV0dXJuIGIubGVuZ3RoPWMsZShhLGIpLGJ9ZnVuY3Rpb24gaShhKXtyZXR1cm4gYX1mdW5jdGlvbiBqKGEsYil7SShhLGIpLGEubm9kZUlzSW5zZXJ0ZWRfKCl9ZnVuY3Rpb24gayhhLGIpe2Zvcih2YXIgYz1EKGIpLGQ9MDtkPGEubGVuZ3RoO2QrKylqKGFbZF0sYyl9ZnVuY3Rpb24gbChhKXtJKGEsbmV3IHooYSxudWxsKSl9ZnVuY3Rpb24gbShhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylsKGFbYl0pfWZ1bmN0aW9uIG4oYSxiKXt2YXIgYz1hLm5vZGVUeXBlPT09dy5ET0NVTUVOVF9OT0RFP2E6YS5vd25lckRvY3VtZW50O2MhPT1iLm93bmVyRG9jdW1lbnQmJmMuYWRvcHROb2RlKGIpfWZ1bmN0aW9uIG8oYixjKXtpZihjLmxlbmd0aCl7dmFyIGQ9Yi5vd25lckRvY3VtZW50O2lmKGQhPT1jWzBdLm93bmVyRG9jdW1lbnQpZm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspYS5hZG9wdE5vZGVOb1JlbW92ZShjW2VdLGQpfX1mdW5jdGlvbiBwKGEsYil7byhhLGIpO3ZhciBjPWIubGVuZ3RoO2lmKDE9PT1jKXJldHVybiBKKGJbMF0pO2Zvcih2YXIgZD1KKGEub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGU9MDtjPmU7ZSsrKWQuYXBwZW5kQ2hpbGQoSihiW2VdKSk7cmV0dXJuIGR9ZnVuY3Rpb24gcShhKXtpZih2b2lkIDAhPT1hLmZpcnN0Q2hpbGRfKWZvcih2YXIgYj1hLmZpcnN0Q2hpbGRfO2I7KXt2YXIgYz1iO2I9Yi5uZXh0U2libGluZ18sYy5wYXJlbnROb2RlXz1jLnByZXZpb3VzU2libGluZ189Yy5uZXh0U2libGluZ189dm9pZCAwfWEuZmlyc3RDaGlsZF89YS5sYXN0Q2hpbGRfPXZvaWQgMH1mdW5jdGlvbiByKGEpe2lmKGEuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7Yjspe0EoYi5wYXJlbnROb2RlPT09YSk7dmFyIGM9Yi5uZXh0U2libGluZyxkPUooYiksZT1kLnBhcmVudE5vZGU7ZSYmVS5jYWxsKGUsZCksYi5wcmV2aW91c1NpYmxpbmdfPWIubmV4dFNpYmxpbmdfPWIucGFyZW50Tm9kZV89bnVsbCxiPWN9YS5maXJzdENoaWxkXz1hLmxhc3RDaGlsZF89bnVsbH1lbHNlIGZvcih2YXIgYyxmPUooYSksZz1mLmZpcnN0Q2hpbGQ7ZzspYz1nLm5leHRTaWJsaW5nLFUuY2FsbChmLGcpLGc9Y31mdW5jdGlvbiBzKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX1mdW5jdGlvbiB0KGEpe2Zvcih2YXIgYixjPTA7YzxhLmxlbmd0aDtjKyspYj1hW2NdLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKX1mdW5jdGlvbiB1KGEsYixjKXt2YXIgZDtpZihkPUsoYz9PLmNhbGwoYyxhLmltcGwsITEpOlAuY2FsbChhLmltcGwsITEpKSxiKXtmb3IodmFyIGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWQuYXBwZW5kQ2hpbGQodShlLCEwLGMpKTtpZihhIGluc3RhbmNlb2YgTS5IVE1MVGVtcGxhdGVFbGVtZW50KWZvcih2YXIgZj1kLmNvbnRlbnQsZT1hLmNvbnRlbnQuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylmLmFwcGVuZENoaWxkKHUoZSwhMCxjKSl9cmV0dXJuIGR9ZnVuY3Rpb24gdihhLGIpe2lmKCFifHxEKGEpIT09RChiKSlyZXR1cm4hMTtmb3IodmFyIGM9YjtjO2M9Yy5wYXJlbnROb2RlKWlmKGM9PT1hKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHcoYSl7QShhIGluc3RhbmNlb2YgUSkseC5jYWxsKHRoaXMsYSksdGhpcy5wYXJlbnROb2RlXz12b2lkIDAsdGhpcy5maXJzdENoaWxkXz12b2lkIDAsdGhpcy5sYXN0Q2hpbGRfPXZvaWQgMCx0aGlzLm5leHRTaWJsaW5nXz12b2lkIDAsdGhpcy5wcmV2aW91c1NpYmxpbmdfPXZvaWQgMCx0aGlzLnRyZWVTY29wZV89dm9pZCAwfXZhciB4PWEud3JhcHBlcnMuRXZlbnRUYXJnZXQseT1hLndyYXBwZXJzLk5vZGVMaXN0LHo9YS5UcmVlU2NvcGUsQT1hLmFzc2VydCxCPWEuZGVmaW5lV3JhcEdldHRlcixDPWEuZW5xdWV1ZU11dGF0aW9uLEQ9YS5nZXRUcmVlU2NvcGUsRT1hLmlzV3JhcHBlcixGPWEubWl4aW4sRz1hLnJlZ2lzdGVyVHJhbnNpZW50T2JzZXJ2ZXJzLEg9YS5yZWdpc3RlcldyYXBwZXIsST1hLnNldFRyZWVTY29wZSxKPWEudW53cmFwLEs9YS53cmFwLEw9YS53cmFwSWZOZWVkZWQsTT1hLndyYXBwZXJzLE49ITEsTz1kb2N1bWVudC5pbXBvcnROb2RlLFA9d2luZG93Lk5vZGUucHJvdG90eXBlLmNsb25lTm9kZSxRPXdpbmRvdy5Ob2RlLFI9d2luZG93LkRvY3VtZW50RnJhZ21lbnQsUz0oUS5wcm90b3R5cGUuYXBwZW5kQ2hpbGQsUS5wcm90b3R5cGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24pLFQ9US5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLFU9US5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsVj1RLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQsVz0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxYPVc/ZnVuY3Rpb24oYSxiKXt0cnl7VS5jYWxsKGEsYil9Y2F0Y2goYyl7aWYoIShhIGluc3RhbmNlb2YgUikpdGhyb3cgY319OmZ1bmN0aW9uKGEsYil7VS5jYWxsKGEsYil9O3cucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLEYody5wcm90b3R5cGUse2FwcGVuZENoaWxkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluc2VydEJlZm9yZShhLG51bGwpfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSxjKXtiKGEpO3ZhciBkO2M/RShjKT9kPUooYyk6KGQ9YyxjPUsoZCkpOihjPW51bGwsZD1udWxsKSxjJiZBKGMucGFyZW50Tm9kZT09PXRoaXMpO3ZhciBlLGg9Yz9jLnByZXZpb3VzU2libGluZzp0aGlzLmxhc3RDaGlsZCxpPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhcyhhKTtpZihlPWk/ZyhhKTpmKGEsdGhpcyxoLGMpLGkpbih0aGlzLGEpLHEodGhpcyksVC5jYWxsKHRoaXMuaW1wbCxKKGEpLGQpO2Vsc2V7aHx8KHRoaXMuZmlyc3RDaGlsZF89ZVswXSksY3x8KHRoaXMubGFzdENoaWxkXz1lW2UubGVuZ3RoLTFdKTt2YXIgaj1kP2QucGFyZW50Tm9kZTp0aGlzLmltcGw7aj9ULmNhbGwoaixwKHRoaXMsZSksZCk6byh0aGlzLGUpfXJldHVybiBDKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6ZSxuZXh0U2libGluZzpjLHByZXZpb3VzU2libGluZzpofSksayhlLHRoaXMpLGF9LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGEpe2lmKGIoYSksYS5wYXJlbnROb2RlIT09dGhpcyl7Zm9yKHZhciBkPSExLGU9KHRoaXMuY2hpbGROb2Rlcyx0aGlzLmZpcnN0Q2hpbGQpO2U7ZT1lLm5leHRTaWJsaW5nKWlmKGU9PT1hKXtkPSEwO2JyZWFrfWlmKCFkKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpfXZhciBmPUooYSksZz1hLm5leHRTaWJsaW5nLGg9YS5wcmV2aW91c1NpYmxpbmc7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7dmFyIGk9dGhpcy5maXJzdENoaWxkLGo9dGhpcy5sYXN0Q2hpbGQsaz1mLnBhcmVudE5vZGU7ayYmWChrLGYpLGk9PT1hJiYodGhpcy5maXJzdENoaWxkXz1nKSxqPT09YSYmKHRoaXMubGFzdENoaWxkXz1oKSxoJiYoaC5uZXh0U2libGluZ189ZyksZyYmKGcucHJldmlvdXNTaWJsaW5nXz1oKSxhLnByZXZpb3VzU2libGluZ189YS5uZXh0U2libGluZ189YS5wYXJlbnROb2RlXz12b2lkIDB9ZWxzZSBxKHRoaXMpLFgodGhpcy5pbXBsLGYpO3JldHVybiBOfHxDKHRoaXMsImNoaWxkTGlzdCIse3JlbW92ZWROb2RlczpjKGEpLG5leHRTaWJsaW5nOmcscHJldmlvdXNTaWJsaW5nOmh9KSxHKHRoaXMsYSksYX0scmVwbGFjZUNoaWxkOmZ1bmN0aW9uKGEsZCl7YihhKTt2YXIgZTtpZihFKGQpP2U9SihkKTooZT1kLGQ9SyhlKSksZC5wYXJlbnROb2RlIT09dGhpcyl0aHJvdyBuZXcgRXJyb3IoIk5vdEZvdW5kRXJyb3IiKTt2YXIgaCxpPWQubmV4dFNpYmxpbmcsaj1kLnByZXZpb3VzU2libGluZyxtPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhcyhhKTtyZXR1cm4gbT9oPWcoYSk6KGk9PT1hJiYoaT1hLm5leHRTaWJsaW5nKSxoPWYoYSx0aGlzLGosaSkpLG0/KG4odGhpcyxhKSxxKHRoaXMpLFYuY2FsbCh0aGlzLmltcGwsSihhKSxlKSk6KHRoaXMuZmlyc3RDaGlsZD09PWQmJih0aGlzLmZpcnN0Q2hpbGRfPWhbMF0pLHRoaXMubGFzdENoaWxkPT09ZCYmKHRoaXMubGFzdENoaWxkXz1oW2gubGVuZ3RoLTFdKSxkLnByZXZpb3VzU2libGluZ189ZC5uZXh0U2libGluZ189ZC5wYXJlbnROb2RlXz12b2lkIDAsZS5wYXJlbnROb2RlJiZWLmNhbGwoZS5wYXJlbnROb2RlLHAodGhpcyxoKSxlKSksQyh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmgscmVtb3ZlZE5vZGVzOmMoZCksbmV4dFNpYmxpbmc6aSxwcmV2aW91c1NpYmxpbmc6an0pLGwoZCksayhoLHRoaXMpLGR9LG5vZGVJc0luc2VydGVkXzpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYS5ub2RlSXNJbnNlcnRlZF8oKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86Syh0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBmaXJzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZmlyc3RDaGlsZF8/dGhpcy5maXJzdENoaWxkXzpLKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmxhc3RDaGlsZF8/dGhpcy5sYXN0Q2hpbGRfOksodGhpcy5pbXBsLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpLKHRoaXMuaW1wbC5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5wcmV2aW91c1NpYmxpbmdfP3RoaXMucHJldmlvdXNTaWJsaW5nXzpLKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgcGFyZW50RWxlbWVudCgpe2Zvcih2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5ub2RlVHlwZSE9PXcuRUxFTUVOVF9OT0RFOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX0sZ2V0IHRleHRDb250ZW50KCl7Zm9yKHZhciBhPSIiLGI9dGhpcy5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKWIubm9kZVR5cGUhPXcuQ09NTUVOVF9OT0RFJiYoYSs9Yi50ZXh0Q29udGVudCk7cmV0dXJuIGF9LHNldCB0ZXh0Q29udGVudChhKXt2YXIgYj1pKHRoaXMuY2hpbGROb2Rlcyk7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7aWYocih0aGlzKSwiIiE9PWEpe3ZhciBjPXRoaXMuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpO3RoaXMuYXBwZW5kQ2hpbGQoYyl9fWVsc2UgcSh0aGlzKSx0aGlzLmltcGwudGV4dENvbnRlbnQ9YTt2YXIgZD1pKHRoaXMuY2hpbGROb2Rlcyk7Qyh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmQscmVtb3ZlZE5vZGVzOmJ9KSxtKGIpLGsoZCx0aGlzKX0sZ2V0IGNoaWxkTm9kZXMoKXtmb3IodmFyIGE9bmV3IHksYj0wLGM9dGhpcy5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9LGNsb25lTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdSh0aGlzLGEpfSxjb250YWluczpmdW5jdGlvbihhKXtyZXR1cm4gdih0aGlzLEwoYSkpfSxjb21wYXJlRG9jdW1lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gUy5jYWxsKHRoaXMuaW1wbCxKKGEpKX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz1pKHRoaXMuY2hpbGROb2RlcyksZD1bXSxlPSIiLGY9MDtmPGMubGVuZ3RoO2YrKyliPWNbZl0sYi5ub2RlVHlwZT09PXcuVEVYVF9OT0RFP2F8fGIuZGF0YS5sZW5ndGg/YT8oZSs9Yi5kYXRhLGQucHVzaChiKSk6YT1iOnRoaXMucmVtb3ZlTm9kZShiKTooYSYmZC5sZW5ndGgmJihhLmRhdGErPWUsY2xlYW5VcE5vZGVzKGQpKSxkPVtdLGU9IiIsYT1udWxsLGIuY2hpbGROb2Rlcy5sZW5ndGgmJmIubm9ybWFsaXplKCkpO2EmJmQubGVuZ3RoJiYoYS5kYXRhKz1lLHQoZCkpfX0pLEIodywib3duZXJEb2N1bWVudCIpLEgoUSx3LGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3IsZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwsdy5wcm90b3R5cGU9RihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx3LnByb3RvdHlwZSksYS5jbG9uZU5vZGU9dSxhLm5vZGVXYXNBZGRlZD1qLGEubm9kZVdhc1JlbW92ZWQ9bCxhLm5vZGVzV2VyZUFkZGVkPWssYS5ub2Rlc1dlcmVSZW1vdmVkPW0sYS5zbmFwc2hvdE5vZGVMaXN0PWksYS53cmFwcGVycy5Ob2RlPXd9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxjKXtmb3IodmFyIGQsZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KXtpZihlLm1hdGNoZXMoYykpcmV0dXJuIGU7aWYoZD1iKGUsYykpcmV0dXJuIGQ7ZT1lLm5leHRFbGVtZW50U2libGluZ31yZXR1cm4gbnVsbH1mdW5jdGlvbiBjKGEsYixkKXtmb3IodmFyIGU9YS5maXJzdEVsZW1lbnRDaGlsZDtlOyllLm1hdGNoZXMoYikmJihkW2QubGVuZ3RoKytdPWUpLGMoZSxiLGQpLGU9ZS5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIGR9dmFyIGQ9e3F1ZXJ5U2VsZWN0b3I6ZnVuY3Rpb24oYSl7cmV0dXJuIGIodGhpcyxhKX0scXVlcnlTZWxlY3RvckFsbDpmdW5jdGlvbihhKXtyZXR1cm4gYyh0aGlzLGEsbmV3IE5vZGVMaXN0KX19LGU9e2dldEVsZW1lbnRzQnlUYWdOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoYSl9LGdldEVsZW1lbnRzQnlDbGFzc05hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbCgiLiIrYSl9LGdldEVsZW1lbnRzQnlUYWdOYW1lTlM6ZnVuY3Rpb24oYSxiKXtpZigiKiI9PT1hKXJldHVybiB0aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpO2Zvcih2YXIgYz1uZXcgTm9kZUxpc3QsZD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpLGU9MCxmPTA7ZTxkLmxlbmd0aDtlKyspZFtlXS5uYW1lc3BhY2VVUkk9PT1hJiYoY1tmKytdPWRbZV0pO3JldHVybiBjLmxlbmd0aD1mLGN9fTthLkdldEVsZW1lbnRzQnlJbnRlcmZhY2U9ZSxhLlNlbGVjdG9yc0ludGVyZmFjZT1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLnByZXZpb3VzU2libGluZztyZXR1cm4gYX12YXIgZD1hLndyYXBwZXJzLk5vZGVMaXN0LGU9e2dldCBmaXJzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBiKHRoaXMuZmlyc3RDaGlsZCl9LGdldCBsYXN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGModGhpcy5sYXN0Q2hpbGQpfSxnZXQgY2hpbGRFbGVtZW50Q291bnQoKXtmb3IodmFyIGE9MCxiPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YjtiPWIubmV4dEVsZW1lbnRTaWJsaW5nKWErKztyZXR1cm4gYX0sZ2V0IGNoaWxkcmVuKCl7Zm9yKHZhciBhPW5ldyBkLGI9MCxjPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YztjPWMubmV4dEVsZW1lbnRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFyZW50Tm9kZTthJiZhLnJlbW92ZUNoaWxkKHRoaXMpfX0sZj17Z2V0IG5leHRFbGVtZW50U2libGluZygpe3JldHVybiBiKHRoaXMubmV4dFNpYmxpbmcpfSxnZXQgcHJldmlvdXNFbGVtZW50U2libGluZygpe3JldHVybiBjKHRoaXMucHJldmlvdXNTaWJsaW5nKX19O2EuQ2hpbGROb2RlSW50ZXJmYWNlPWYsYS5QYXJlbnROb2RlSW50ZXJmYWNlPWV9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGM9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZD1hLndyYXBwZXJzLk5vZGUsZT1hLmVucXVldWVNdXRhdGlvbixmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPXdpbmRvdy5DaGFyYWN0ZXJEYXRhO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGYoYi5wcm90b3R5cGUse2dldCB0ZXh0Q29udGVudCgpe3JldHVybiB0aGlzLmRhdGF9LHNldCB0ZXh0Q29udGVudChhKXt0aGlzLmRhdGE9YX0sZ2V0IGRhdGEoKXtyZXR1cm4gdGhpcy5pbXBsLmRhdGF9LHNldCBkYXRhKGEpe3ZhciBiPXRoaXMuaW1wbC5kYXRhO2UodGhpcywiY2hhcmFjdGVyRGF0YSIse29sZFZhbHVlOmJ9KSx0aGlzLmltcGwuZGF0YT1hfX0pLGYoYi5wcm90b3R5cGUsYyksZyhoLGIsZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpKSxhLndyYXBwZXJzLkNoYXJhY3RlckRhdGE9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYT4+PjB9ZnVuY3Rpb24gYyhhKXtkLmNhbGwodGhpcyxhKX12YXIgZD1hLndyYXBwZXJzLkNoYXJhY3RlckRhdGEsZT0oYS5lbnF1ZXVlTXV0YXRpb24sYS5taXhpbiksZj1hLnJlZ2lzdGVyV3JhcHBlcixnPXdpbmRvdy5UZXh0O2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoYy5wcm90b3R5cGUse3NwbGl0VGV4dDpmdW5jdGlvbihhKXthPWIoYSk7dmFyIGM9dGhpcy5kYXRhO2lmKGE+Yy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJJbmRleFNpemVFcnJvciIpO3ZhciBkPWMuc2xpY2UoMCxhKSxlPWMuc2xpY2UoYSk7dGhpcy5kYXRhPWQ7dmFyIGY9dGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGUpO3JldHVybiB0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZix0aGlzLm5leHRTaWJsaW5nKSxmfX0pLGYoZyxjLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5UZXh0PWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYixjKXt2YXIgZD1iLnBhcmVudE5vZGU7aWYoZCYmZC5zaGFkb3dSb290KXt2YXIgZT1hLmdldFJlbmRlcmVyRm9ySG9zdChkKTtlLmRlcGVuZHNPbkF0dHJpYnV0ZShjKSYmZS5pbnZhbGlkYXRlKCl9fWZ1bmN0aW9uIGMoYSxiLGMpe2soYSwiYXR0cmlidXRlcyIse25hbWU6YixuYW1lc3BhY2U6bnVsbCxvbGRWYWx1ZTpjfSl9ZnVuY3Rpb24gZChhKXtoLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBlKGEsYyxkKXt2YXIgZT1kfHxjO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbY119LHNldDpmdW5jdGlvbihhKXt0aGlzLmltcGxbY109YSxiKHRoaXMsZSl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIGY9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZz1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsaD1hLndyYXBwZXJzLk5vZGUsaT1hLlBhcmVudE5vZGVJbnRlcmZhY2Usaj1hLlNlbGVjdG9yc0ludGVyZmFjZSxrPShhLmFkZFdyYXBOb2RlTGlzdE1ldGhvZCxhLmVucXVldWVNdXRhdGlvbiksbD1hLm1peGluLG09KGEub25lT2YsYS5yZWdpc3RlcldyYXBwZXIpLG49YS53cmFwcGVycyxvPXdpbmRvdy5FbGVtZW50LHA9WyJtYXRjaGVzIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiXS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIG8ucHJvdG90eXBlW2FdfSkscT1wWzBdLHI9by5wcm90b3R5cGVbcV07ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShoLnByb3RvdHlwZSksbChkLnByb3RvdHlwZSx7Y3JlYXRlU2hhZG93Um9vdDpmdW5jdGlvbigpe3ZhciBiPW5ldyBuLlNoYWRvd1Jvb3QodGhpcyk7dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSb290Xz1iO3ZhciBjPWEuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMpO3JldHVybiBjLmludmFsaWRhdGUoKSxifSxnZXQgc2hhZG93Um9vdCgpe3JldHVybiB0aGlzLmltcGwucG9seW1lclNoYWRvd1Jvb3RffHxudWxsfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxkKXt2YXIgZT10aGlzLmltcGwuZ2V0QXR0cmlidXRlKGEpO3RoaXMuaW1wbC5zZXRBdHRyaWJ1dGUoYSxkKSxjKHRoaXMsYSxlKSxiKHRoaXMsYSl9LHJlbW92ZUF0dHJpYnV0ZTpmdW5jdGlvbihhKXt2YXIgZD10aGlzLmltcGwuZ2V0QXR0cmlidXRlKGEpO3RoaXMuaW1wbC5yZW1vdmVBdHRyaWJ1dGUoYSksYyh0aGlzLGEsZCksYih0aGlzLGEpfSxtYXRjaGVzOmZ1bmN0aW9uKGEpe3JldHVybiByLmNhbGwodGhpcy5pbXBsLGEpfX0pLHAuZm9yRWFjaChmdW5jdGlvbihhKXsibWF0Y2hlcyIhPT1hJiYoZC5wcm90b3R5cGVbYV09ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWF0Y2hlcyhhKX0pfSksby5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdCYmKGQucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3Q9ZC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdCksZShkLnByb3RvdHlwZSwiaWQiKSxlKGQucHJvdG90eXBlLCJjbGFzc05hbWUiLCJjbGFzcyIpLGwoZC5wcm90b3R5cGUsZiksbChkLnByb3RvdHlwZSxnKSxsKGQucHJvdG90eXBlLGkpLGwoZC5wcm90b3R5cGUsaiksbShvLGQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG51bGwsIngiKSksYS5tYXRjaGVzTmFtZXM9cCxhLndyYXBwZXJzLkVsZW1lbnQ9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYSl7Y2FzZSImIjpyZXR1cm4iJmFtcDsiO2Nhc2UiPCI6cmV0dXJuIiZsdDsiO2Nhc2UiPiI6cmV0dXJuIiZndDsiO2Nhc2UnIic6cmV0dXJuIiZxdW90OyI7Y2FzZSLCoCI6cmV0dXJuIiZuYnNwOyJ9fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucmVwbGFjZSh6LGIpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEucmVwbGFjZShBLGIpfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPXt9LGM9MDtjPGEubGVuZ3RoO2MrKyliW2FbY11dPSEwO3JldHVybiBifWZ1bmN0aW9uIGYoYSxiKXtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmb3IodmFyIGUsZj1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxoPSI8IitmLGk9YS5hdHRyaWJ1dGVzLGo9MDtlPWlbal07aisrKWgrPSIgIitlLm5hbWUrJz0iJytjKGUudmFsdWUpKyciJztyZXR1cm4gaCs9Ij4iLEJbZl0/aDpoK2coYSkrIjwvIitmKyI+IjtjYXNlIE5vZGUuVEVYVF9OT0RFOnZhciBrPWEuZGF0YTtyZXR1cm4gYiYmQ1tiLmxvY2FsTmFtZV0/azpkKGspO2Nhc2UgTm9kZS5DT01NRU5UX05PREU6cmV0dXJuIjwhLS0iK2EuZGF0YSsiLS0+IjtkZWZhdWx0OnRocm93IGNvbnNvbGUuZXJyb3IoYSksbmV3IEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKX19ZnVuY3Rpb24gZyhhKXthIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50JiYoYT1hLmNvbnRlbnQpO2Zvcih2YXIgYj0iIixjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyliKz1mKGMsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGQ9Y3x8ImRpdiI7YS50ZXh0Q29udGVudD0iIjt2YXIgZT13KGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KGQpKTtlLmlubmVySFRNTD1iO2Zvcih2YXIgZjtmPWUuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZCh4KGYpKX1mdW5jdGlvbiBpKGEpe28uY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz13KGEuY2xvbmVOb2RlKCExKSk7Yy5pbm5lckhUTUw9Yjtmb3IodmFyIGQsZT13KGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7ZD1jLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoZCk7cmV0dXJuIHgoZSl9ZnVuY3Rpb24gayhiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdfX1mdW5jdGlvbiBsKGEpe3AoaSxhLGsoYSkpfWZ1bmN0aW9uIG0oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLGIse2dldDprKGIpLHNldDpmdW5jdGlvbihjKXthLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl09Y30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBuKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxiLHt2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIG89YS53cmFwcGVycy5FbGVtZW50LHA9YS5kZWZpbmVHZXR0ZXIscT1hLmVucXVldWVNdXRhdGlvbixyPWEubWl4aW4scz1hLm5vZGVzV2VyZUFkZGVkLHQ9YS5ub2Rlc1dlcmVSZW1vdmVkLHU9YS5yZWdpc3RlcldyYXBwZXIsdj1hLnNuYXBzaG90Tm9kZUxpc3Qsdz1hLnVud3JhcCx4PWEud3JhcCx5PWEud3JhcHBlcnMsej0vWyZcdTAwQTAiXS9nLEE9L1smXHUwMEEwPD5dL2csQj1lKFsiYXJlYSIsImJhc2UiLCJiciIsImNvbCIsImNvbW1hbmQiLCJlbWJlZCIsImhyIiwiaW1nIiwiaW5wdXQiLCJrZXlnZW4iLCJsaW5rIiwibWV0YSIsInBhcmFtIiwic291cmNlIiwidHJhY2siLCJ3YnIiXSksQz1lKFsic3R5bGUiLCJzY3JpcHQiLCJ4bXAiLCJpZnJhbWUiLCJub2VtYmVkIiwibm9mcmFtZXMiLCJwbGFpbnRleHQiLCJub3NjcmlwdCJdKSxEPS9NU0lFLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLEU9d2luZG93LkhUTUxFbGVtZW50LEY9d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSkscihpLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBnKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2lmKEQmJkNbdGhpcy5sb2NhbE5hbWVdKXJldHVybiB2b2lkKHRoaXMudGV4dENvbnRlbnQ9YSk7dmFyIGI9dih0aGlzLmNoaWxkTm9kZXMpO3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk/dGhpcyBpbnN0YW5jZW9mIHkuSFRNTFRlbXBsYXRlRWxlbWVudD9oKHRoaXMuY29udGVudCxhKTpoKHRoaXMsYSx0aGlzLnRhZ05hbWUpOiFGJiZ0aGlzIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50P2godGhpcy5jb250ZW50LGEpOnRoaXMuaW1wbC5pbm5lckhUTUw9YTt2YXIgYz12KHRoaXMuY2hpbGROb2Rlcyk7cSh0aGlzLCJjaGlsZExpc3QiLHthZGRlZE5vZGVzOmMscmVtb3ZlZE5vZGVzOmJ9KSx0KGIpLHMoYyx0aGlzKX0sZ2V0IG91dGVySFRNTCgpe3JldHVybiBmKHRoaXMsdGhpcy5wYXJlbnROb2RlKX0sc2V0IG91dGVySFRNTChhKXt2YXIgYj10aGlzLnBhcmVudE5vZGU7aWYoYil7Yi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKTt2YXIgYz1qKGIsYSk7Yi5yZXBsYWNlQ2hpbGQoYyx0aGlzKX19LGluc2VydEFkamFjZW50SFRNTDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7c3dpdGNoKFN0cmluZyhhKS50b0xvd2VyQ2FzZSgpKXtjYXNlImJlZm9yZWJlZ2luIjpjPXRoaXMucGFyZW50Tm9kZSxkPXRoaXM7YnJlYWs7Y2FzZSJhZnRlcmVuZCI6Yz10aGlzLnBhcmVudE5vZGUsZD10aGlzLm5leHRTaWJsaW5nO2JyZWFrO2Nhc2UiYWZ0ZXJiZWdpbiI6Yz10aGlzLGQ9dGhpcy5maXJzdENoaWxkO2JyZWFrO2Nhc2UiYmVmb3JlZW5kIjpjPXRoaXMsZD1udWxsO2JyZWFrO2RlZmF1bHQ6cmV0dXJufXZhciBlPWooYyxiKTtjLmluc2VydEJlZm9yZShlLGQpfX0pLFsiY2xpZW50SGVpZ2h0IiwiY2xpZW50TGVmdCIsImNsaWVudFRvcCIsImNsaWVudFdpZHRoIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFdpZHRoIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsV2lkdGgiXS5mb3JFYWNoKGwpLFsic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCJdLmZvckVhY2gobSksWyJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXRDbGllbnRSZWN0cyIsInNjcm9sbEludG9WaWV3Il0uZm9yRWFjaChuKSx1KEUsaSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiIikpLGEud3JhcHBlcnMuSFRNTEVsZW1lbnQ9aSxhLmdldElubmVySFRNTD1nLGEuc2V0SW5uZXJIVE1MPWh9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcCxnPXdpbmRvdy5IVE1MQ2FudmFzRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXRDb250ZXh0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbXBsLmdldENvbnRleHQuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyk7cmV0dXJuIGEmJmYoYSl9fSksZShnLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikpLGEud3JhcHBlcnMuSFRNTENhbnZhc0VsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9d2luZG93LkhUTUxDb250ZW50RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgc2VsZWN0KCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKX0sc2V0IHNlbGVjdChhKXt0aGlzLnNldEF0dHJpYnV0ZSgic2VsZWN0IixhKX0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7Yy5wcm90b3R5cGUuc2V0QXR0cmlidXRlLmNhbGwodGhpcyxhLGIpLCJzZWxlY3QiPT09U3RyaW5nKGEpLnRvTG93ZXJDYXNlKCkmJnRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCEwKX19KSxmJiZlKGYsYiksYS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtkLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBjKGEsYil7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGU9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKSk7ZC5jYWxsKHRoaXMsZSksZyhlLHRoaXMpLHZvaWQgMCE9PWEmJihlLndpZHRoPWEpLHZvaWQgMCE9PWImJihlLmhlaWdodD1iKX12YXIgZD1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxJbWFnZUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpLGMucHJvdG90eXBlPWIucHJvdG90eXBlLGEud3JhcHBlcnMuSFRNTEltYWdlRWxlbWVudD1iLGEud3JhcHBlcnMuSW1hZ2U9Y30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9d2luZG93LkhUTUxTaGFkb3dFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse30pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEuZGVmYXVsdFZpZXcpcmV0dXJuIGE7dmFyIGI9ay5nZXQoYSk7aWYoIWIpe2ZvcihiPWEuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtiLmxhc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmxhc3RDaGlsZCk7ay5zZXQoYSxiKX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYyxkPWIoYS5vd25lckRvY3VtZW50KSxlPWgoZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2M9YS5maXJzdENoaWxkOyllLmFwcGVuZENoaWxkKGMpO3JldHVybiBlfWZ1bmN0aW9uIGQoYSl7aWYoZS5jYWxsKHRoaXMsYSksIWwpe3ZhciBiPWMoYSk7ai5zZXQodGhpcyxpKGIpKX19dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEudW53cmFwLGk9YS53cmFwLGo9bmV3IFdlYWtNYXAsaz1uZXcgV2Vha01hcCxsPXdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50O2QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUpLGYoZC5wcm90b3R5cGUse2dldCBjb250ZW50KCl7cmV0dXJuIGw/aSh0aGlzLmltcGwuY29udGVudCk6ai5nZXQodGhpcyl9fSksbCYmZyhsLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLnJlZ2lzdGVyV3JhcHBlcixlPXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoZSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIikpLGEud3JhcHBlcnMuSFRNTE1lZGlhRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGMoYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGI9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpKTtkLmNhbGwodGhpcyxiKSxnKGIsdGhpcyksYi5zZXRBdHRyaWJ1dGUoInByZWxvYWQiLCJhdXRvIiksdm9pZCAwIT09YSYmYi5zZXRBdHRyaWJ1dGUoInNyYyIsYSl9dmFyIGQ9YS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxBdWRpb0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSksYy5wcm90b3R5cGU9Yi5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MQXVkaW9FbGVtZW50PWIsYS53cmFwcGVycy5BdWRpbz1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhLnJlcGxhY2UoL1xzKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uIGMoYSl7ZS5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gZChhLGIsYyxmKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt2YXIgZz1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtlLmNhbGwodGhpcyxnKSxoKGcsdGhpcyksdm9pZCAwIT09YSYmKGcudGV4dD1hKSx2b2lkIDAhPT1iJiZnLnNldEF0dHJpYnV0ZSgidmFsdWUiLGIpLGM9PT0hMCYmZy5zZXRBdHRyaWJ1dGUoInNlbGVjdGVkIiwiIiksZy5zZWxlY3RlZD1mPT09ITB9dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEucmV3cmFwLGk9YS51bndyYXAsaj1hLndyYXAsaz13aW5kb3cuSFRNTE9wdGlvbkVsZW1lbnQ7Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZihjLnByb3RvdHlwZSx7Z2V0IHRleHQoKXtyZXR1cm4gYih0aGlzLnRleHRDb250ZW50KX0sc2V0IHRleHQoYSl7dGhpcy50ZXh0Q29udGVudD1iKFN0cmluZyhhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGooaSh0aGlzKS5mb3JtKX19KSxnKGssYyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSksZC5wcm90b3R5cGU9Yy5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MT3B0aW9uRWxlbWVudD1jLGEud3JhcHBlcnMuT3B0aW9uPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS53cmFwLGg9d2luZG93LkhUTUxTZWxlY3RFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2FkZDpmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgYiYmKGI9ZihiKSksZih0aGlzKS5hZGQoZihhKSxiKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP3ZvaWQgYy5wcm90b3R5cGUucmVtb3ZlLmNhbGwodGhpcyk6KCJvYmplY3QiPT10eXBlb2YgYSYmKGE9ZihhKSksdm9pZCBmKHRoaXMpLnJlbW92ZShhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGcoZih0aGlzKS5mb3JtKX19KSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKSksYS53cmFwcGVycy5IVE1MU2VsZWN0RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEud3JhcCxoPWEud3JhcEhUTUxDb2xsZWN0aW9uLGk9d2luZG93LkhUTUxUYWJsZUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNhcHRpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNhcHRpb24pfSxjcmVhdGVDYXB0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVDYXB0aW9uKCkpfSxnZXQgdEhlYWQoKXtyZXR1cm4gZyhmKHRoaXMpLnRIZWFkKX0sY3JlYXRlVEhlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZVRIZWFkKCkpfSxjcmVhdGVURm9vdDpmdW5jdGlvbigpe3JldHVybiBnKGYodGhpcykuY3JlYXRlVEZvb3QoKSl9LGdldCB0Rm9vdCgpe3JldHVybiBnKGYodGhpcykudEZvb3QpfSxnZXQgdEJvZGllcygpe3JldHVybiBoKGYodGhpcykudEJvZGllcyl9LGNyZWF0ZVRCb2R5OmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVUQm9keSgpKX0sZ2V0IHJvd3MoKXtyZXR1cm4gaChmKHRoaXMpLnJvd3MpfSxpbnNlcnRSb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGcoZih0aGlzKS5pbnNlcnRSb3coYSkpfX0pLGUoaSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIikpLGEud3JhcHBlcnMuSFRNTFRhYmxlRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9YS53cmFwLGk9d2luZG93LkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCByb3dzKCl7cmV0dXJuIGYoZyh0aGlzKS5yb3dzKX0saW5zZXJ0Um93OmZ1bmN0aW9uKGEpe3JldHVybiBoKGcodGhpcykuaW5zZXJ0Um93KGEpKX19KSxlKGksYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0aGVhZCIpKSxhLndyYXBwZXJzLkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcEhUTUxDb2xsZWN0aW9uLGc9YS51bndyYXAsaD1hLndyYXAsaT13aW5kb3cuSFRNTFRhYmxlUm93RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY2VsbHMoKXtyZXR1cm4gZihnKHRoaXMpLmNlbGxzKX0saW5zZXJ0Q2VsbDpmdW5jdGlvbihhKXtyZXR1cm4gaChnKHRoaXMpLmluc2VydENlbGwoYSkpfX0pLGUoaSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRyIikpLGEud3JhcHBlcnMuSFRNTFRhYmxlUm93RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3N3aXRjaChhLmxvY2FsTmFtZSl7Y2FzZSJjb250ZW50IjpyZXR1cm4gbmV3IGMoYSk7Y2FzZSJzaGFkb3ciOnJldHVybiBuZXcgZShhKTtjYXNlInRlbXBsYXRlIjpyZXR1cm4gbmV3IGYoYSl9ZC5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQsZD1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGU9YS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudCxmPWEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudCxnPShhLm1peGluLGEucmVnaXN0ZXJXcmFwcGVyKSxoPXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZyhoLGIpLGEud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEucmVnaXN0ZXJPYmplY3QsYz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGMsInRpdGxlIiksZT1iKGQpLGY9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKS5jb25zdHJ1Y3RvcjthLndyYXBwZXJzLlNWR0VsZW1lbnQ9Zn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXttLmNhbGwodGhpcyxhKX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcCxmPWEud3JhcCxnPXdpbmRvdy5TVkdVc2VFbGVtZW50LGg9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIixpPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGgsImciKSksaj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoaCwidXNlIiksaz1pLmNvbnN0cnVjdG9yLGw9T2JqZWN0LmdldFByb3RvdHlwZU9mKGsucHJvdG90eXBlKSxtPWwuY29uc3RydWN0b3I7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShsKSwiaW5zdGFuY2VSb290ImluIGomJmMoYi5wcm90b3R5cGUse2dldCBpbnN0YW5jZVJvb3QoKXtyZXR1cm4gZihlKHRoaXMpLmluc3RhbmNlUm9vdCl9LGdldCBhbmltYXRlZEluc3RhbmNlUm9vdCgpe3JldHVybiBmKGUodGhpcykuYW5pbWF0ZWRJbnN0YW5jZVJvb3QpfX0pLGQoZyxiLGopLGEud3JhcHBlcnMuU1ZHVXNlRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuRXZlbnRUYXJnZXQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXAsZz13aW5kb3cuU1ZHRWxlbWVudEluc3RhbmNlO2cmJihiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY29ycmVzcG9uZGluZ0VsZW1lbnQoKXtyZXR1cm4gZih0aGlzLmltcGwuY29ycmVzcG9uZGluZ0VsZW1lbnQpfSxnZXQgY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQoKXtyZXR1cm4gZih0aGlzLmltcGwuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQpfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiBmKHRoaXMuaW1wbC5wYXJlbnROb2RlKX0sZ2V0IGNoaWxkTm9kZXMoKXt0aHJvdyBuZXcgRXJyb3IoIk5vdCBpbXBsZW1lbnRlZCIpfSxnZXQgZmlyc3RDaGlsZCgpe3JldHVybiBmKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiBmKHRoaXMuaW1wbC5sYXN0Q2hpbGQpfSxnZXQgcHJldmlvdXNTaWJsaW5nKCl7cmV0dXJuIGYodGhpcy5pbXBsLnByZXZpb3VzU2libGluZyl9LGdldCBuZXh0U2libGluZygpe3JldHVybiBmKHRoaXMuaW1wbC5uZXh0U2libGluZyl9fSksZShnLGIpLGEud3JhcHBlcnMuU1ZHRWxlbWVudEluc3RhbmNlPWIpfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEudW53cmFwLGY9YS51bndyYXBJZk5lZWRlZCxnPWEud3JhcCxoPXdpbmRvdy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7YyhiLnByb3RvdHlwZSx7Z2V0IGNhbnZhcygpe3JldHVybiBnKHRoaXMuaW1wbC5jYW52YXMpfSxkcmF3SW1hZ2U6ZnVuY3Rpb24oKXthcmd1bWVudHNbMF09Zihhcmd1bWVudHNbMF0pLHRoaXMuaW1wbC5kcmF3SW1hZ2UuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LGNyZWF0ZVBhdHRlcm46ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzWzBdPWUoYXJndW1lbnRzWzBdKSx0aGlzLmltcGwuY3JlYXRlUGF0dGVybi5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19KSxkKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKS5nZXRDb250ZXh0KCIyZCIpKSxhLndyYXBwZXJzLkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXAsZz13aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0O2lmKGcpe2MoYi5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gZih0aGlzLmltcGwuY2FudmFzKX0sdGV4SW1hZ2UyRDpmdW5jdGlvbigpe2FyZ3VtZW50c1s1XT1lKGFyZ3VtZW50c1s1XSksdGhpcy5pbXBsLnRleEltYWdlMkQuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LHRleFN1YkltYWdlMkQ6ZnVuY3Rpb24oKXthcmd1bWVudHNbNl09ZShhcmd1bWVudHNbNl0pLHRoaXMuaW1wbC50ZXhTdWJJbWFnZTJELmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX0pO3ZhciBoPS9XZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk/e2RyYXdpbmdCdWZmZXJIZWlnaHQ6bnVsbCxkcmF3aW5nQnVmZmVyV2lkdGg6bnVsbH06e307ZChnLGIsaCksYS53cmFwcGVycy5XZWJHTFJlbmRlcmluZ0NvbnRleHQ9Yn19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPWF9dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXAsZz13aW5kb3cuUmFuZ2U7Yi5wcm90b3R5cGU9e2dldCBzdGFydENvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5zdGFydENvbnRhaW5lcil9LGdldCBlbmRDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuZW5kQ29udGFpbmVyKX0sZ2V0IGNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKX0sc2V0U3RhcnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuc2V0U3RhcnQoZShhKSxiKX0sc2V0RW5kOmZ1bmN0aW9uKGEsYil7dGhpcy5pbXBsLnNldEVuZChlKGEpLGIpfSxzZXRTdGFydEJlZm9yZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0U3RhcnRCZWZvcmUoZShhKSl9LHNldFN0YXJ0QWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldFN0YXJ0QWZ0ZXIoZShhKSl9LHNldEVuZEJlZm9yZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0RW5kQmVmb3JlKGUoYSkpfSxzZXRFbmRBZnRlcjpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0RW5kQWZ0ZXIoZShhKSl9LHNlbGVjdE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNlbGVjdE5vZGUoZShhKSl9LHNlbGVjdE5vZGVDb250ZW50czpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2VsZWN0Tm9kZUNvbnRlbnRzKGUoYSkpfSxjb21wYXJlQm91bmRhcnlQb2ludHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLGQoYikpfSxleHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLmltcGwuZXh0cmFjdENvbnRlbnRzKCkpfSxjbG9uZUNvbnRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNsb25lQ29udGVudHMoKSl9LGluc2VydE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmluc2VydE5vZGUoZShhKSl9LHN1cnJvdW5kQ29udGVudHM6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnN1cnJvdW5kQ29udGVudHMoZShhKSl9LGNsb25lUmFuZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLmltcGwuY2xvbmVSYW5nZSgpKX0saXNQb2ludEluUmFuZ2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmlzUG9pbnRJblJhbmdlKGUoYSksYil9LGNvbXBhcmVQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmltcGwuY29tcGFyZVBvaW50KGUoYSksYil9LGludGVyc2VjdHNOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmltcGwuaW50ZXJzZWN0c05vZGUoZShhKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbC50b1N0cmluZygpfX0sZy5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JiYoYi5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBmKHRoaXMuaW1wbC5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoYSkpCn0pLGMod2luZG93LlJhbmdlLGIsZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSksYS53cmFwcGVycy5SYW5nZT1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYz1hLlBhcmVudE5vZGVJbnRlcmZhY2UsZD1hLlNlbGVjdG9yc0ludGVyZmFjZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyT2JqZWN0LGc9Zihkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2UoZy5wcm90b3R5cGUsYyksZShnLnByb3RvdHlwZSxkKSxlKGcucHJvdG90eXBlLGIpO3ZhciBoPWYoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikpO2Eud3JhcHBlcnMuQ29tbWVudD1oLGEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudD1nfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWsoYS5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtjLmNhbGwodGhpcyxiKSxpKGIsdGhpcyksdGhpcy50cmVlU2NvcGVfPW5ldyBkKHRoaXMsZyhhKSk7dmFyIGU9YS5zaGFkb3dSb290O20uc2V0KHRoaXMsZSksbC5zZXQodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkRvY3VtZW50RnJhZ21lbnQsZD1hLlRyZWVTY29wZSxlPWEuZWxlbWVudEZyb21Qb2ludCxmPWEuZ2V0SW5uZXJIVE1MLGc9YS5nZXRUcmVlU2NvcGUsaD1hLm1peGluLGk9YS5yZXdyYXAsaj1hLnNldElubmVySFRNTCxrPWEudW53cmFwLGw9bmV3IFdlYWtNYXAsbT1uZXcgV2Vha01hcCxuPS9bIFx0XG5cclxmXS87Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksaChiLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBmKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2oodGhpcyxhKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxnZXQgb2xkZXJTaGFkb3dSb290KCl7cmV0dXJuIG0uZ2V0KHRoaXMpfHxudWxsfSxnZXQgaG9zdCgpe3JldHVybiBsLmdldCh0aGlzKXx8bnVsbH0saW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyOmZ1bmN0aW9uKCl7cmV0dXJuIGwuZ2V0KHRoaXMpLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUodGhpcyx0aGlzLm93bmVyRG9jdW1lbnQsYSxiKX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG4udGVzdChhKT9udWxsOnRoaXMucXVlcnlTZWxlY3RvcignW2lkPSInK2ErJyJdJyl9fSksYS53cmFwcGVycy5TaGFkb3dSb290PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7YS5wcmV2aW91c1NpYmxpbmdfPWEucHJldmlvdXNTaWJsaW5nLGEubmV4dFNpYmxpbmdfPWEubmV4dFNpYmxpbmcsYS5wYXJlbnROb2RlXz1hLnBhcmVudE5vZGV9ZnVuY3Rpb24gYyhhLGMsZSl7dmFyIGY9RyhhKSxnPUcoYyksaD1lP0coZSk6bnVsbDtpZihkKGMpLGIoYyksZSlhLmZpcnN0Q2hpbGQ9PT1lJiYoYS5maXJzdENoaWxkXz1lKSxlLnByZXZpb3VzU2libGluZ189ZS5wcmV2aW91c1NpYmxpbmc7ZWxzZXthLmxhc3RDaGlsZF89YS5sYXN0Q2hpbGQsYS5sYXN0Q2hpbGQ9PT1hLmZpcnN0Q2hpbGQmJihhLmZpcnN0Q2hpbGRfPWEuZmlyc3RDaGlsZCk7dmFyIGk9SChmLmxhc3RDaGlsZCk7aSYmKGkubmV4dFNpYmxpbmdfPWkubmV4dFNpYmxpbmcpfWYuaW5zZXJ0QmVmb3JlKGcsaCl9ZnVuY3Rpb24gZChhKXt2YXIgYz1HKGEpLGQ9Yy5wYXJlbnROb2RlO2lmKGQpe3ZhciBlPUgoZCk7YihhKSxhLnByZXZpb3VzU2libGluZyYmKGEucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1hKSxhLm5leHRTaWJsaW5nJiYoYS5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPWEpLGUubGFzdENoaWxkPT09YSYmKGUubGFzdENoaWxkXz1hKSxlLmZpcnN0Q2hpbGQ9PT1hJiYoZS5maXJzdENoaWxkXz1hKSxkLnJlbW92ZUNoaWxkKGMpfX1mdW5jdGlvbiBlKGEsYil7ZyhiKS5wdXNoKGEpLHgoYSxiKTt2YXIgYz1KLmdldChhKTtjfHxKLnNldChhLGM9W10pLGMucHVzaChiKX1mdW5jdGlvbiBmKGEpe0kuc2V0KGEsW10pfWZ1bmN0aW9uIGcoYSl7dmFyIGI9SS5nZXQoYSk7cmV0dXJuIGJ8fEkuc2V0KGEsYj1bXSksYn1mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYltjKytdPWQ7cmV0dXJuIGJ9ZnVuY3Rpb24gaShhLGIsYyl7Zm9yKHZhciBkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZylpZihiKGQpKXtpZihjKGQpPT09ITEpcmV0dXJufWVsc2UgaShkLGIsYyl9ZnVuY3Rpb24gaihhLGIpe3ZhciBjPWIuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKTtpZighYylyZXR1cm4hMDtpZihjPWMudHJpbSgpLCFjKXJldHVybiEwO2lmKCEoYSBpbnN0YW5jZW9mIHopKXJldHVybiExO2lmKCIqIj09PWN8fGM9PT1hLmxvY2FsTmFtZSlyZXR1cm4hMDtpZighTS50ZXN0KGMpKXJldHVybiExO2lmKCI6Ij09PWNbMF0mJiFOLnRlc3QoYykpcmV0dXJuITE7dHJ5e3JldHVybiBhLm1hdGNoZXMoYyl9Y2F0Y2goZCl7cmV0dXJuITF9fWZ1bmN0aW9uIGsoKXtmb3IodmFyIGE9MDthPFAubGVuZ3RoO2ErKyl7dmFyIGI9UFthXSxjPWIucGFyZW50UmVuZGVyZXI7YyYmYy5kaXJ0eXx8Yi5yZW5kZXIoKX1QPVtdfWZ1bmN0aW9uIGwoKXt5PW51bGwsaygpfWZ1bmN0aW9uIG0oYSl7dmFyIGI9TC5nZXQoYSk7cmV0dXJuIGJ8fChiPW5ldyBxKGEpLEwuc2V0KGEsYikpLGJ9ZnVuY3Rpb24gbihhKXt2YXIgYj1FKGEpLnJvb3Q7cmV0dXJuIGIgaW5zdGFuY2VvZiBEP2I6bnVsbH1mdW5jdGlvbiBvKGEpe3JldHVybiBtKGEuaG9zdCl9ZnVuY3Rpb24gcChhKXt0aGlzLnNraXA9ITEsdGhpcy5ub2RlPWEsdGhpcy5jaGlsZE5vZGVzPVtdfWZ1bmN0aW9uIHEoYSl7dGhpcy5ob3N0PWEsdGhpcy5kaXJ0eT0hMSx0aGlzLmludmFsaWRhdGVBdHRyaWJ1dGVzKCksdGhpcy5hc3NvY2lhdGVOb2RlKGEpfWZ1bmN0aW9uIHIoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBBfWZ1bmN0aW9uIHMoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBBfWZ1bmN0aW9uIHQoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBCfWZ1bmN0aW9uIHUoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBCfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIGEuc2hhZG93Um9vdH1mdW5jdGlvbiB3KGEpe2Zvcih2YXIgYj1bXSxjPWEuc2hhZG93Um9vdDtjO2M9Yy5vbGRlclNoYWRvd1Jvb3QpYi5wdXNoKGMpO3JldHVybiBifWZ1bmN0aW9uIHgoYSxiKXtLLnNldChhLGIpfXZhciB5LHo9YS53cmFwcGVycy5FbGVtZW50LEE9YS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQsQj1hLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50LEM9YS53cmFwcGVycy5Ob2RlLEQ9YS53cmFwcGVycy5TaGFkb3dSb290LEU9KGEuYXNzZXJ0LGEuZ2V0VHJlZVNjb3BlKSxGPShhLm1peGluLGEub25lT2YpLEc9YS51bndyYXAsSD1hLndyYXAsST1uZXcgV2Vha01hcCxKPW5ldyBXZWFrTWFwLEs9bmV3IFdlYWtNYXAsTD1uZXcgV2Vha01hcCxNPS9eWyouOiNbYS16QS1aX3xdLyxOPW5ldyBSZWdFeHAoIl46KCIrWyJsaW5rIiwidmlzaXRlZCIsInRhcmdldCIsImVuYWJsZWQiLCJkaXNhYmxlZCIsImNoZWNrZWQiLCJpbmRldGVybWluYXRlIiwibnRoLWNoaWxkIiwibnRoLWxhc3QtY2hpbGQiLCJudGgtb2YtdHlwZSIsIm50aC1sYXN0LW9mLXR5cGUiLCJmaXJzdC1jaGlsZCIsImxhc3QtY2hpbGQiLCJmaXJzdC1vZi10eXBlIiwibGFzdC1vZi10eXBlIiwib25seS1vZi10eXBlIl0uam9pbigifCIpKyIpIiksTz1GKHdpbmRvdyxbInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNldFRpbWVvdXQiXSksUD1bXSxRPW5ldyBBcnJheVNwbGljZTtRLmVxdWFscz1mdW5jdGlvbihhLGIpe3JldHVybiBHKGEubm9kZSk9PT1ifSxwLnByb3RvdHlwZT17YXBwZW5kOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBwKGEpO3JldHVybiB0aGlzLmNoaWxkTm9kZXMucHVzaChiKSxifSxzeW5jOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLnNraXApe2Zvcih2YXIgYj10aGlzLm5vZGUsZT10aGlzLmNoaWxkTm9kZXMsZj1oKEcoYikpLGc9YXx8bmV3IFdlYWtNYXAsaT1RLmNhbGN1bGF0ZVNwbGljZXMoZSxmKSxqPTAsaz0wLGw9MCxtPTA7bTxpLmxlbmd0aDttKyspe2Zvcih2YXIgbj1pW21dO2w8bi5pbmRleDtsKyspaysrLGVbaisrXS5zeW5jKGcpO2Zvcih2YXIgbz1uLnJlbW92ZWQubGVuZ3RoLHA9MDtvPnA7cCsrKXt2YXIgcT1IKGZbaysrXSk7Zy5nZXQocSl8fGQocSl9Zm9yKHZhciByPW4uYWRkZWRDb3VudCxzPWZba10mJkgoZltrXSkscD0wO3I+cDtwKyspe3ZhciB0PWVbaisrXSx1PXQubm9kZTtjKGIsdSxzKSxnLnNldCh1LCEwKSx0LnN5bmMoZyl9bCs9cn1mb3IodmFyIG09bDttPGUubGVuZ3RoO20rKyllW21dLnN5bmMoZyl9fX0scS5wcm90b3R5cGU9e3JlbmRlcjpmdW5jdGlvbihhKXtpZih0aGlzLmRpcnR5KXt0aGlzLmludmFsaWRhdGVBdHRyaWJ1dGVzKCksdGhpcy50cmVlQ29tcG9zaXRpb24oKTt2YXIgYj10aGlzLmhvc3QsYz1iLnNoYWRvd1Jvb3Q7dGhpcy5hc3NvY2lhdGVOb2RlKGIpO2Zvcih2YXIgZD0hZSxlPWF8fG5ldyBwKGIpLGY9Yy5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucmVuZGVyTm9kZShjLGUsZiwhMSk7ZCYmZS5zeW5jKCksdGhpcy5kaXJ0eT0hMX19LGdldCBwYXJlbnRSZW5kZXJlcigpe3JldHVybiBFKHRoaXMuaG9zdCkucmVuZGVyZXJ9LGludmFsaWRhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5kaXJ0eSl7aWYodGhpcy5kaXJ0eT0hMCxQLnB1c2godGhpcykseSlyZXR1cm47eT13aW5kb3dbT10obCwwKX19LHJlbmRlck5vZGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYodihjKSl7Yj1iLmFwcGVuZChjKTt2YXIgZT1tKGMpO2UuZGlydHk9ITAsZS5yZW5kZXIoYil9ZWxzZSByKGMpP3RoaXMucmVuZGVySW5zZXJ0aW9uUG9pbnQoYSxiLGMsZCk6dChjKT90aGlzLnJlbmRlclNoYWRvd0luc2VydGlvblBvaW50KGEsYixjKTp0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsYyxkKX0scmVuZGVyQXNBbnlEb21UcmVlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGI9Yi5hcHBlbmQoYyksdihjKSl7dmFyIGU9bShjKTtiLnNraXA9IWUuZGlydHksZS5yZW5kZXIoYil9ZWxzZSBmb3IodmFyIGY9Yy5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucmVuZGVyTm9kZShhLGIsZixkKX0scmVuZGVySW5zZXJ0aW9uUG9pbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZyhjKTtpZihlLmxlbmd0aCl7dGhpcy5hc3NvY2lhdGVOb2RlKGMpO2Zvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgaD1lW2ZdO3IoaCkmJmQ/dGhpcy5yZW5kZXJJbnNlcnRpb25Qb2ludChhLGIsaCxkKTp0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsaCxkKX19ZWxzZSB0aGlzLnJlbmRlckZhbGxiYWNrQ29udGVudChhLGIsYyk7dGhpcy5hc3NvY2lhdGVOb2RlKGMucGFyZW50Tm9kZSl9LHJlbmRlclNoYWRvd0luc2VydGlvblBvaW50OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLm9sZGVyU2hhZG93Um9vdDtpZihkKXt4KGQsYyksdGhpcy5hc3NvY2lhdGVOb2RlKGMucGFyZW50Tm9kZSk7Zm9yKHZhciBlPWQuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyl0aGlzLnJlbmRlck5vZGUoZCxiLGUsITApfWVsc2UgdGhpcy5yZW5kZXJGYWxsYmFja0NvbnRlbnQoYSxiLGMpfSxyZW5kZXJGYWxsYmFja0NvbnRlbnQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYXNzb2NpYXRlTm9kZShjKSx0aGlzLmFzc29jaWF0ZU5vZGUoYy5wYXJlbnROb2RlKTtmb3IodmFyIGQ9Yy5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKXRoaXMucmVuZGVyQXNBbnlEb21UcmVlKGEsYixkLCExKX0saW52YWxpZGF0ZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt0aGlzLmF0dHJpYnV0ZXM9T2JqZWN0LmNyZWF0ZShudWxsKX0sdXBkYXRlRGVwZW5kZW50QXR0cmlidXRlczpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmF0dHJpYnV0ZXM7L1wuXHcrLy50ZXN0KGEpJiYoYlsiY2xhc3MiXT0hMCksLyNcdysvLnRlc3QoYSkmJihiLmlkPSEwKSxhLnJlcGxhY2UoL1xbXHMqKFteXHM9XHx+XF1dKykvZyxmdW5jdGlvbihhLGMpe2JbY109ITB9KX19LGRlcGVuZHNPbkF0dHJpYnV0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2FdfSxkaXN0cmlidXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztpKGEscyxmdW5jdGlvbihhKXtmKGEpLGMudXBkYXRlRGVwZW5kZW50QXR0cmlidXRlcyhhLmdldEF0dHJpYnV0ZSgic2VsZWN0IikpO2Zvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZz1iW2RdO3ZvaWQgMCE9PWcmJmooZyxhKSYmKGUoZyxhKSxiW2RdPXZvaWQgMCl9fSl9LHRyZWVDb21wb3NpdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmhvc3QsYj1hLnNoYWRvd1Jvb3QsYz1bXSxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZylpZihyKGQpKXt2YXIgZT1nKGQpO2UmJmUubGVuZ3RofHwoZT1oKGQpKSxjLnB1c2guYXBwbHkoYyxlKX1lbHNlIGMucHVzaChkKTtmb3IodmFyIGYsajtiOyl7aWYoZj12b2lkIDAsaShiLHUsZnVuY3Rpb24oYSl7cmV0dXJuIGY9YSwhMX0pLGo9Zix0aGlzLmRpc3RyaWJ1dGUoYixjKSxqKXt2YXIgaz1iLm9sZGVyU2hhZG93Um9vdDtpZihrKXtiPWsseChiLGopO2NvbnRpbnVlfWJyZWFrfWJyZWFrfX0sYXNzb2NpYXRlTm9kZTpmdW5jdGlvbihhKXthLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz10aGlzfX0sQy5wcm90b3R5cGUuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSZW5kZXJlcl87cmV0dXJuIGE/KGEuaW52YWxpZGF0ZSgpLCEwKTohMX0sQS5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1mdW5jdGlvbigpe3JldHVybiBrKCksZyh0aGlzKX0sQi5wcm90b3R5cGUubm9kZUlzSW5zZXJ0ZWRfPUEucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1mdW5jdGlvbigpe3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGEsYj1uKHRoaXMpO2ImJihhPW8oYikpLHRoaXMuaW1wbC5wb2x5bWVyU2hhZG93UmVuZGVyZXJfPWEsYSYmYS5pbnZhbGlkYXRlKCl9LGEuZXZlbnRQYXJlbnRzVGFibGU9SixhLmdldFJlbmRlcmVyRm9ySG9zdD1tLGEuZ2V0U2hhZG93VHJlZXM9dyxhLmluc2VydGlvblBhcmVudFRhYmxlPUssYS5yZW5kZXJBbGxQZW5kaW5nPWssYS52aXN1YWw9e2luc2VydEJlZm9yZTpjLHJlbW92ZTpkfX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXtpZih3aW5kb3dbYl0pe2QoIWEud3JhcHBlcnNbYl0pO3ZhciBpPWZ1bmN0aW9uKGEpe2MuY2FsbCh0aGlzLGEpfTtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxlKGkucHJvdG90eXBlLHtnZXQgZm9ybSgpe3JldHVybiBoKGcodGhpcykuZm9ybSl9fSksZih3aW5kb3dbYl0saSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KGIuc2xpY2UoNCwtNykpKSxhLndyYXBwZXJzW2JdPWl9fXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLmFzc2VydCxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPWEudW53cmFwLGg9YS53cmFwLGk9WyJIVE1MQnV0dG9uRWxlbWVudCIsIkhUTUxGaWVsZFNldEVsZW1lbnQiLCJIVE1MSW5wdXRFbGVtZW50IiwiSFRNTEtleWdlbkVsZW1lbnQiLCJIVE1MTGFiZWxFbGVtZW50IiwiSFRNTExlZ2VuZEVsZW1lbnQiLCJIVE1MT2JqZWN0RWxlbWVudCIsIkhUTUxPdXRwdXRFbGVtZW50IiwiSFRNTFRleHRBcmVhRWxlbWVudCJdO2kuZm9yRWFjaChiKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX17dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXA7d2luZG93LlNlbGVjdGlvbn1iLnByb3RvdHlwZT17Z2V0IGFuY2hvck5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuYW5jaG9yTm9kZSl9LGdldCBmb2N1c05vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmFkZFJhbmdlKGQoYSkpfSxjb2xsYXBzZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5jb2xsYXBzZShlKGEpLGIpfSxjb250YWluc05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbnRhaW5zTm9kZShlKGEpLGIpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuZXh0ZW5kKGUoYSksYil9LGdldFJhbmdlQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcy5pbXBsLmdldFJhbmdlQXQoYSkpfSxyZW1vdmVSYW5nZTpmdW5jdGlvbihhKXt0aGlzLmltcGwucmVtb3ZlUmFuZ2UoZChhKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3RBbGxDaGlsZHJlbihlKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxjKHdpbmRvdy5TZWxlY3Rpb24sYix3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLGEud3JhcHBlcnMuU2VsZWN0aW9uPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ay5jYWxsKHRoaXMsYSksdGhpcy50cmVlU2NvcGVfPW5ldyBwKHRoaXMsbnVsbCl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1kb2N1bWVudFthXTtiLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7RC5jYWxsKGIuaW1wbCx6KGEpKSxlKGEsYil9ZnVuY3Rpb24gZShhLGIpe2Euc2hhZG93Um9vdCYmYi5hZG9wdE5vZGUoYS5zaGFkb3dSb290KSxhIGluc3RhbmNlb2YgbyYmZihhLGIpO2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpZShjLGIpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLm9sZGVyU2hhZG93Um9vdDtjJiZiLmFkb3B0Tm9kZShjKX1mdW5jdGlvbiBnKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19dmFyIGo9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGs9YS53cmFwcGVycy5Ob2RlLGw9YS5QYXJlbnROb2RlSW50ZXJmYWNlLG09YS53cmFwcGVycy5TZWxlY3Rpb24sbj1hLlNlbGVjdG9yc0ludGVyZmFjZSxvPWEud3JhcHBlcnMuU2hhZG93Um9vdCxwPWEuVHJlZVNjb3BlLHE9YS5jbG9uZU5vZGUscj1hLmRlZmluZVdyYXBHZXR0ZXIscz1hLmVsZW1lbnRGcm9tUG9pbnQsdD1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLHU9YS5tYXRjaGVzTmFtZXMsdj1hLm1peGluLHc9YS5yZWdpc3RlcldyYXBwZXIseD1hLnJlbmRlckFsbFBlbmRpbmcseT1hLnJld3JhcCx6PWEudW53cmFwLEE9YS53cmFwLEI9YS53cmFwRXZlbnRUYXJnZXRNZXRob2RzLEM9KGEud3JhcE5vZGVMaXN0LG5ldyBXZWFrTWFwKTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGsucHJvdG90eXBlKSxyKGIsImRvY3VtZW50RWxlbWVudCIpLHIoYiwiYm9keSIpLHIoYiwiaGVhZCIpLFsiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImdldEVsZW1lbnRCeUlkIl0uZm9yRWFjaChjKTt2YXIgRD1kb2N1bWVudC5hZG9wdE5vZGUsRT1kb2N1bWVudC5nZXRTZWxlY3Rpb247aWYodihiLnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkKGEsdGhpcyksYX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBzKHRoaXMsdGhpcyxhLGIpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHEoYSxiLHRoaXMuaW1wbCl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB4KCksbmV3IG0oRS5jYWxsKHoodGhpcykpKX19KSxkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQpe3ZhciBGPWRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDtiLnByb3RvdHlwZS5yZWdpc3RlckVsZW1lbnQ9ZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhP3ZvaWQodGhpcy5pbXBsPWEpOmY/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChmLGIpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYil9dmFyIGUsZjtpZih2b2lkIDAhPT1jJiYoZT1jLnByb3RvdHlwZSxmPWMuZXh0ZW5kcyksZXx8KGU9T2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChlKSl0aHJvdyBuZXcgRXJyb3IoIk5vdFN1cHBvcnRlZEVycm9yIik7Zm9yKHZhciBnLGg9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLGk9W107aCYmIShnPWEubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KGgpKTspaS5wdXNoKGgpLGg9T2JqZWN0LmdldFByb3RvdHlwZU9mKGgpO2lmKCFnKXRocm93IG5ldyBFcnJvcigiTm90U3VwcG9ydGVkRXJyb3IiKTtmb3IodmFyIGo9T2JqZWN0LmNyZWF0ZShnKSxrPWkubGVuZ3RoLTE7az49MDtrLS0paj1PYmplY3QuY3JlYXRlKGopO1siY3JlYXRlZENhbGxiYWNrIiwiYXR0YWNoZWRDYWxsYmFjayIsImRldGFjaGVkQ2FsbGJhY2siLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWVbYV07YiYmKGpbYV09ZnVuY3Rpb24oKXtBKHRoaXMpaW5zdGFuY2VvZiBkfHx5KHRoaXMpLGIuYXBwbHkoQSh0aGlzKSxhcmd1bWVudHMpfSl9KTt2YXIgbD17cHJvdG90eXBlOmp9O2YmJihsLmV4dGVuZHM9ZiksZC5wcm90b3R5cGU9ZSxkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kLGEuY29uc3RydWN0b3JUYWJsZS5zZXQoaixkKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLnNldChlLGopO0YuY2FsbCh6KHRoaXMpLGIsbCk7cmV0dXJuIGR9LHQoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJyZWdpc3RlckVsZW1lbnQiXSl9dChbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudCx3aW5kb3cuSFRNTEh0bWxFbGVtZW50XSxbImFwcGVuZENoaWxkIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJjb250YWlucyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lTlMiLCJpbnNlcnRCZWZvcmUiLCJxdWVyeVNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZUNoaWxkIiwicmVwbGFjZUNoaWxkIl0uY29uY2F0KHUpKSx0KFt3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnRdLFsiYWRvcHROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRhaW5zIiwiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImVsZW1lbnRGcm9tUG9pbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldFNlbGVjdGlvbiJdKSx2KGIucHJvdG90eXBlLGopLHYoYi5wcm90b3R5cGUsbCksdihiLnByb3RvdHlwZSxuKSx2KGIucHJvdG90eXBlLHtnZXQgaW1wbGVtZW50YXRpb24oKXt2YXIgYT1DLmdldCh0aGlzKTtyZXR1cm4gYT9hOihhPW5ldyBnKHoodGhpcykuaW1wbGVtZW50YXRpb24pLEMuc2V0KHRoaXMsYSksYSl9fSksdyh3aW5kb3cuRG9jdW1lbnQsYixkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpKSx3aW5kb3cuSFRNTERvY3VtZW50JiZ3KHdpbmRvdy5IVE1MRG9jdW1lbnQsYiksQihbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudF0pLGgoZywiY3JlYXRlRG9jdW1lbnRUeXBlIiksaChnLCJjcmVhdGVEb2N1bWVudCIpLGgoZywiY3JlYXRlSFRNTERvY3VtZW50IiksaShnLCJoYXNGZWF0dXJlIiksdyh3aW5kb3cuRE9NSW1wbGVtZW50YXRpb24sZyksdChbd2luZG93LkRPTUltcGxlbWVudGF0aW9uXSxbImNyZWF0ZURvY3VtZW50VHlwZSIsImNyZWF0ZURvY3VtZW50IiwiY3JlYXRlSFRNTERvY3VtZW50IiwiaGFzRmVhdHVyZSJdKSxhLmFkb3B0Tm9kZU5vUmVtb3ZlPWQsYS53cmFwcGVycy5ET01JbXBsZW1lbnRhdGlvbj1nLGEud3JhcHBlcnMuRG9jdW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGQ9YS53cmFwcGVycy5TZWxlY3Rpb24sZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz1hLnJlbmRlckFsbFBlbmRpbmcsaD1hLnVud3JhcCxpPWEudW53cmFwSWZOZWVkZWQsaj1hLndyYXAsaz13aW5kb3cuV2luZG93LGw9d2luZG93LmdldENvbXB1dGVkU3R5bGUsbT13aW5kb3cuZ2V0U2VsZWN0aW9uO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGsucHJvdG90eXBlLmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaih0aGlzfHx3aW5kb3cpLmdldENvbXB1dGVkU3R5bGUoaShhKSxiKX0say5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGoodGhpc3x8d2luZG93KS5nZXRTZWxlY3Rpb24oKX0sZGVsZXRlIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLGRlbGV0ZSB3aW5kb3cuZ2V0U2VsZWN0aW9uLFsiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50Il0uZm9yRWFjaChmdW5jdGlvbihhKXtrLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3ZhciBiPWoodGhpc3x8d2luZG93KTtyZXR1cm4gYlthXS5hcHBseShiLGFyZ3VtZW50cyl9LGRlbGV0ZSB3aW5kb3dbYV19KSxlKGIucHJvdG90eXBlLHtnZXRDb21wdXRlZFN0eWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGcoKSxsLmNhbGwoaCh0aGlzKSxpKGEpLGIpfSxnZXRTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gZygpLG5ldyBkKG0uY2FsbChoKHRoaXMpKSl9fSksZihrLGIpLGEud3JhcHBlcnMuV2luZG93PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEudW53cmFwLGM9d2luZG93LkRhdGFUcmFuc2Zlcnx8d2luZG93LkNsaXBib2FyZCxkPWMucHJvdG90eXBlLnNldERyYWdJbWFnZTtjLnByb3RvdHlwZS5zZXREcmFnSW1hZ2U9ZnVuY3Rpb24oYSxjLGUpe2QuY2FsbCh0aGlzLGIoYSksYyxlKX19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFyIGI9Y1thXSxkPXdpbmRvd1tiXTtpZihkKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpLGY9ZS5jb25zdHJ1Y3Rvcjt3aW5kb3dbYl09Zn19dmFyIGM9KGEuaXNXcmFwcGVyRm9yLHthOiJIVE1MQW5jaG9yRWxlbWVudCIsYXJlYToiSFRNTEFyZWFFbGVtZW50IixhdWRpbzoiSFRNTEF1ZGlvRWxlbWVudCIsYmFzZToiSFRNTEJhc2VFbGVtZW50Iixib2R5OiJIVE1MQm9keUVsZW1lbnQiLGJyOiJIVE1MQlJFbGVtZW50IixidXR0b246IkhUTUxCdXR0b25FbGVtZW50IixjYW52YXM6IkhUTUxDYW52YXNFbGVtZW50IixjYXB0aW9uOiJIVE1MVGFibGVDYXB0aW9uRWxlbWVudCIsY29sOiJIVE1MVGFibGVDb2xFbGVtZW50Iixjb250ZW50OiJIVE1MQ29udGVudEVsZW1lbnQiLGRhdGE6IkhUTUxEYXRhRWxlbWVudCIsZGF0YWxpc3Q6IkhUTUxEYXRhTGlzdEVsZW1lbnQiLGRlbDoiSFRNTE1vZEVsZW1lbnQiLGRpcjoiSFRNTERpcmVjdG9yeUVsZW1lbnQiLGRpdjoiSFRNTERpdkVsZW1lbnQiLGRsOiJIVE1MRExpc3RFbGVtZW50IixlbWJlZDoiSFRNTEVtYmVkRWxlbWVudCIsZmllbGRzZXQ6IkhUTUxGaWVsZFNldEVsZW1lbnQiLGZvbnQ6IkhUTUxGb250RWxlbWVudCIsZm9ybToiSFRNTEZvcm1FbGVtZW50IixmcmFtZToiSFRNTEZyYW1lRWxlbWVudCIsZnJhbWVzZXQ6IkhUTUxGcmFtZVNldEVsZW1lbnQiLGgxOiJIVE1MSGVhZGluZ0VsZW1lbnQiLGhlYWQ6IkhUTUxIZWFkRWxlbWVudCIsaHI6IkhUTUxIUkVsZW1lbnQiLGh0bWw6IkhUTUxIdG1sRWxlbWVudCIsaWZyYW1lOiJIVE1MSUZyYW1lRWxlbWVudCIsaW1nOiJIVE1MSW1hZ2VFbGVtZW50IixpbnB1dDoiSFRNTElucHV0RWxlbWVudCIsa2V5Z2VuOiJIVE1MS2V5Z2VuRWxlbWVudCIsbGFiZWw6IkhUTUxMYWJlbEVsZW1lbnQiLGxlZ2VuZDoiSFRNTExlZ2VuZEVsZW1lbnQiLGxpOiJIVE1MTElFbGVtZW50IixsaW5rOiJIVE1MTGlua0VsZW1lbnQiLG1hcDoiSFRNTE1hcEVsZW1lbnQiLG1hcnF1ZWU6IkhUTUxNYXJxdWVlRWxlbWVudCIsbWVudToiSFRNTE1lbnVFbGVtZW50IixtZW51aXRlbToiSFRNTE1lbnVJdGVtRWxlbWVudCIsbWV0YToiSFRNTE1ldGFFbGVtZW50IixtZXRlcjoiSFRNTE1ldGVyRWxlbWVudCIsb2JqZWN0OiJIVE1MT2JqZWN0RWxlbWVudCIsb2w6IkhUTUxPTGlzdEVsZW1lbnQiLG9wdGdyb3VwOiJIVE1MT3B0R3JvdXBFbGVtZW50IixvcHRpb246IkhUTUxPcHRpb25FbGVtZW50IixvdXRwdXQ6IkhUTUxPdXRwdXRFbGVtZW50IixwOiJIVE1MUGFyYWdyYXBoRWxlbWVudCIscGFyYW06IkhUTUxQYXJhbUVsZW1lbnQiLHByZToiSFRNTFByZUVsZW1lbnQiLHByb2dyZXNzOiJIVE1MUHJvZ3Jlc3NFbGVtZW50IixxOiJIVE1MUXVvdGVFbGVtZW50IixzY3JpcHQ6IkhUTUxTY3JpcHRFbGVtZW50IixzZWxlY3Q6IkhUTUxTZWxlY3RFbGVtZW50IixzaGFkb3c6IkhUTUxTaGFkb3dFbGVtZW50Iixzb3VyY2U6IkhUTUxTb3VyY2VFbGVtZW50IixzcGFuOiJIVE1MU3BhbkVsZW1lbnQiLHN0eWxlOiJIVE1MU3R5bGVFbGVtZW50Iix0YWJsZToiSFRNTFRhYmxlRWxlbWVudCIsdGJvZHk6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0ZW1wbGF0ZToiSFRNTFRlbXBsYXRlRWxlbWVudCIsdGV4dGFyZWE6IkhUTUxUZXh0QXJlYUVsZW1lbnQiLHRoZWFkOiJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsdGltZToiSFRNTFRpbWVFbGVtZW50Iix0aXRsZToiSFRNTFRpdGxlRWxlbWVudCIsdHI6IkhUTUxUYWJsZVJvd0VsZW1lbnQiLHRyYWNrOiJIVE1MVHJhY2tFbGVtZW50Iix1bDoiSFRNTFVMaXN0RWxlbWVudCIsdmlkZW86IkhUTUxWaWRlb0VsZW1lbnQifSk7T2JqZWN0LmtleXMoYykuZm9yRWFjaChiKSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhLndyYXBwZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3dpbmRvd1tiXT1hLndyYXBwZXJzW2JdfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oKXt3aW5kb3cud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQsd2luZG93LnVud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC51bndyYXBJZk5lZWRlZCxPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsIndlYmtpdFNoYWRvd1Jvb3QiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRWxlbWVudC5wcm90b3R5cGUsInNoYWRvd1Jvb3QiKSk7dmFyIGE9RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdDtFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGI9YS5jYWxsKHRoaXMpO3JldHVybiBDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxifSxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3R9KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPSIiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7Yys9YS50ZXh0Q29udGVudCsiXG5cbiJ9KSxifHwoYz1jLnJlcGxhY2UobCwiIikpLGN9ZnVuY3Rpb24gYyhhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3JldHVybiBiLnRleHRDb250ZW50PWEsYn1mdW5jdGlvbiBkKGEpe3ZhciBiPWMoYSk7ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChiKTt2YXIgZD1bXTtpZihiLnNoZWV0KXRyeXtkPWIuc2hlZXQuY3NzUnVsZXN9Y2F0Y2goZSl7fWVsc2UgY29uc29sZS53YXJuKCJzaGVldCBub3QgZm91bmQiLGIpO3JldHVybiBiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksZH1mdW5jdGlvbiBlKCl7di5pbml0aWFsaXplZD0hMCxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHYpO3ZhciBhPXYuY29udGVudERvY3VtZW50LGI9YS5jcmVhdGVFbGVtZW50KCJiYXNlIik7Yi5ocmVmPWRvY3VtZW50LmJhc2VVUkksYS5oZWFkLmFwcGVuZENoaWxkKGIpfWZ1bmN0aW9uIGYoYSl7di5pbml0aWFsaXplZHx8ZSgpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodiksYSh2LmNvbnRlbnREb2N1bWVudCksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh2KX1mdW5jdGlvbiBnKGEsYil7aWYoYil7dmFyIGU7aWYoYS5tYXRjaCgiQGltcG9ydCIpJiZ4KXt2YXIgZz1jKGEpO2YoZnVuY3Rpb24oYSl7YS5oZWFkLmFwcGVuZENoaWxkKGcuaW1wbCksZT1nLnNoZWV0LmNzc1J1bGVzLGIoZSl9KX1lbHNlIGU9ZChhKSxiKGUpfX1mdW5jdGlvbiBoKGEpe2EmJmooKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9ZnVuY3Rpb24gaShhLGIpe3ZhciBkPWMoYSk7ZC5zZXRBdHRyaWJ1dGUoYiwiIiksZC5zZXRBdHRyaWJ1dGUoeiwiIiksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChkKX1mdW5jdGlvbiBqKCl7cmV0dXJuIHd8fCh3PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksdy5zZXRBdHRyaWJ1dGUoeiwiIiksd1t6XT0hMCksd312YXIgaz17c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihhLGMsZCl7dmFyIGU9dGhpcy5wcmVwYXJlUm9vdChhLGMsZCksZj10aGlzLmlzVHlwZUV4dGVuc2lvbihkKSxnPXRoaXMubWFrZVNjb3BlU2VsZWN0b3IoYyxmKSxoPWIoZSwhMCk7aD10aGlzLnNjb3BlQ3NzVGV4dChoLGcpLGEmJihhLnNoaW1tZWRTdHlsZT1oKSx0aGlzLmFkZENzc1RvRG9jdW1lbnQoaCxjKX0sc2hpbVN0eWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc2hpbUNzc1RleHQoYS50ZXh0Q29udGVudCxiKX0sc2hpbUNzc1RleHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT10aGlzLmluc2VydERpcmVjdGl2ZXMoYSksdGhpcy5zY29wZUNzc1RleHQoYSxiKX0sbWFrZVNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9iPyJbaXM9IithKyJdIjphOiIifSxpc1R5cGVFeHRlbnNpb246ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEuaW5kZXhPZigiLSIpPDB9LHByZXBhcmVSb290OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlZ2lzdGVyUm9vdChhLGIsYyk7cmV0dXJuIHRoaXMucmVwbGFjZVRleHRJblN0eWxlcyhkLnJvb3RTdHlsZXMsdGhpcy5pbnNlcnREaXJlY3RpdmVzKSx0aGlzLnJlbW92ZVN0eWxlcyhhLGQucm9vdFN0eWxlcyksdGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYSxiKSxkLnNjb3BlU3R5bGVzfSxyZW1vdmVTdHlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpfSxyZWdpc3RlclJvb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVnaXN0cnlbYl09e3Jvb3Q6YSxuYW1lOmIsZXh0ZW5kc05hbWU6Y30sZT10aGlzLmZpbmRTdHlsZXMoYSk7ZC5yb290U3R5bGVzPWUsZC5zY29wZVN0eWxlcz1kLnJvb3RTdHlsZXM7dmFyIGY9dGhpcy5yZWdpc3RyeVtkLmV4dGVuZHNOYW1lXTtyZXR1cm4gZiYmKGQuc2NvcGVTdHlsZXM9Zi5zY29wZVN0eWxlcy5jb25jYXQoZC5zY29wZVN0eWxlcykpLGR9LGZpbmRTdHlsZXM6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuW107dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYixmdW5jdGlvbihhKXtyZXR1cm4hYS5oYXNBdHRyaWJ1dGUoQSl9KX0sYXBwbHlTY29wZVRvQ29udGVudDpmdW5jdGlvbihhLGIpe2EmJihBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgiKiIpLGZ1bmN0aW9uKGEpe2Euc2V0QXR0cmlidXRlKGIsIiIpfSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIiksZnVuY3Rpb24oYSl7dGhpcy5hcHBseVNjb3BlVG9Db250ZW50KGEuY29udGVudCxiKX0sdGhpcykpfSxpbnNlcnREaXJlY3RpdmVzOmZ1bmN0aW9uKGEpe3JldHVybiBhPXRoaXMuaW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzSW5Dc3NUZXh0KGEpLHRoaXMuaW5zZXJ0UG9seWZpbGxSdWxlc0luQ3NzVGV4dChhKX0saW5zZXJ0UG9seWZpbGxEaXJlY3RpdmVzSW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShtLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuc2xpY2UoMCwtMikrInsifSksYS5yZXBsYWNlKG4sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYisiIHsifSl9LGluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKG8sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5zbGljZSgwLC0xKX0pLGEucmVwbGFjZShwLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEucmVwbGFjZShiLCIiKS5yZXBsYWNlKGMsIiIpO3JldHVybiBkK2V9KX0sc2NvcGVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5leHRyYWN0VW5zY29wZWRSdWxlc0Zyb21Dc3NUZXh0KGEpO2lmKGE9dGhpcy5pbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQoYSksYT10aGlzLmNvbnZlcnRDb2xvbkhvc3QoYSksYT10aGlzLmNvbnZlcnRDb2xvbkhvc3RDb250ZXh0KGEpLGE9dGhpcy5jb252ZXJ0Q29tYmluYXRvcnMoYSksYil7dmFyIGEsZD10aGlzO2coYSxmdW5jdGlvbihjKXthPWQuc2NvcGVSdWxlcyhjLGIpfSl9cmV0dXJuIGE9YSsiXG4iK2MsYS50cmltKCl9LGV4dHJhY3RVbnNjb3BlZFJ1bGVzRnJvbUNzc1RleHQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9IiI7Yj1xLmV4ZWMoYSk7KWMrPWJbMV0uc2xpY2UoMCwtMSkrIlxuXG4iO2Zvcig7Yj1yLmV4ZWMoYSk7KWMrPWJbMF0ucmVwbGFjZShiWzJdLCIiKS5yZXBsYWNlKGJbMV0sYlszXSkrIlxuXG4iO3JldHVybiBjfSxjb252ZXJ0Q29sb25Ib3N0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RSZSx0aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvbkhvc3RDb250ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoYSxjc3NDb2xvbkhvc3RDb250ZXh0UmUsdGhpcy5jb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyKX0sY29udmVydENvbG9uUnVsZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixkLGUpe2lmKGI9cG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yLGQpe2Zvcih2YXIgZixnPWQuc3BsaXQoIiwiKSxoPVtdLGk9MCxqPWcubGVuZ3RoO2o+aSYmKGY9Z1tpXSk7aSsrKWY9Zi50cmltKCksaC5wdXNoKGMoYixmLGUpKTtyZXR1cm4gaC5qb2luKCIsIil9cmV0dXJuIGIrZX0pfSxjb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYi5tYXRjaChzKT90aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcihhLGIsYyk6YStiK2MrIiwgIitiKyIgIithK2N9LGNvbG9uSG9zdFBhcnRSZXBsYWNlcjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGErYi5yZXBsYWNlKHMsIiIpK2N9LGNvbnZlcnRDb21iaW5hdG9yczpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGNvbWJpbmF0b3JzUmUubGVuZ3RoO2IrKylhPWEucmVwbGFjZShjb21iaW5hdG9yc1JlW2JdLCIgIik7cmV0dXJuIGF9LHNjb3BlUnVsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz0iIjtyZXR1cm4gYSYmQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2Euc2VsZWN0b3JUZXh0JiZhLnN0eWxlJiZhLnN0eWxlLmNzc1RleHQ/KGMrPXRoaXMuc2NvcGVTZWxlY3RvcihhLnNlbGVjdG9yVGV4dCxiLHRoaXMuc3RyaWN0U3R5bGluZykrIiB7XG4JIixjKz10aGlzLnByb3BlcnRpZXNGcm9tUnVsZShhKSsiXG59XG5cbiIpOmEudHlwZT09PUNTU1J1bGUuTUVESUFfUlVMRT8oYys9IkBtZWRpYSAiK2EubWVkaWEubWVkaWFUZXh0KyIge1xuIixjKz10aGlzLnNjb3BlUnVsZXMoYS5jc3NSdWxlcyxiKSxjKz0iXG59XG5cbiIpOmEuY3NzVGV4dCYmKGMrPWEuY3NzVGV4dCsiXG5cbiIpfSx0aGlzKSxjfSxzY29wZVNlbGVjdG9yOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPWEuc3BsaXQoIiwiKTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhhLGIpJiYoYT1jJiYhYS5tYXRjaChwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IpP3RoaXMuYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlKGEsYik6dGhpcy5hcHBseVNpbXBsZVNlbGVjdG9yU2NvcGUoYSxiKSksZC5wdXNoKGEpfSx0aGlzKSxkLmpvaW4oIiwgIil9LHNlbGVjdG9yTmVlZHNTY29waW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tYWtlU2NvcGVNYXRjaGVyKGIpO3JldHVybiFhLm1hdGNoKGMpfSxtYWtlU2NvcGVNYXRjaGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZSgvXFsvZywiXFxbIikucmVwbGFjZSgvXFsvZywiXFxdIiksbmV3IFJlZ0V4cCgiXigiK2ErIikiK3NlbGVjdG9yUmVTdWZmaXgsIm0iKX0sYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubWF0Y2gocG9seWZpbGxIb3N0UmUpPyhhPWEucmVwbGFjZShwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IsYiksYS5yZXBsYWNlKHBvbHlmaWxsSG9zdFJlLGIrIiAiKSk6YisiICIrYX0sYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7Yj1iLnJlcGxhY2UoL1xbaXM9KFteXF1dKilcXS9nLCIkMSIpO3ZhciBjPVsiICIsIj4iLCIrIiwifiJdLGQ9YSxlPSJbIitiKyJdIjtyZXR1cm4gYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWQuc3BsaXQoYSk7ZD1iLm1hcChmdW5jdGlvbihhKXt2YXIgYj1hLnRyaW0oKS5yZXBsYWNlKHBvbHlmaWxsSG9zdFJlLCIiKTtyZXR1cm4gYiYmYy5pbmRleE9mKGIpPDAmJmIuaW5kZXhPZihlKTwwJiYoYT1iLnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sIiQxIitlKyIkMiQzIikpLGF9KS5qb2luKGEpfSksZH0saW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoY29sb25Ib3N0Q29udGV4dFJlLHQpLnJlcGxhY2UoY29sb25Ib3N0UmUscyl9LHByb3BlcnRpZXNGcm9tUnVsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnN0eWxlLmNzc1RleHQ7YS5zdHlsZS5jb250ZW50JiYhYS5zdHlsZS5jb250ZW50Lm1hdGNoKC9bJyJdK3xhdHRyLykmJihiPWIucmVwbGFjZSgvY29udGVudDpbXjtdKjsvZywiY29udGVudDogJyIrYS5zdHlsZS5jb250ZW50KyInOyIpKTt2YXIgYz1hLnN0eWxlO2Zvcih2YXIgZCBpbiBjKSJpbml0aWFsIj09PWNbZF0mJihiKz1kKyI6IGluaXRpYWw7ICIpO3JldHVybiBifSxyZXBsYWNlVGV4dEluU3R5bGVzOmZ1bmN0aW9uKGEsYil7YSYmYiYmKGEgaW5zdGFuY2VvZiBBcnJheXx8KGE9W2FdKSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD1iLmNhbGwodGhpcyxhLnRleHRDb250ZW50KX0sdGhpcykpfSxhZGRDc3NUb0RvY3VtZW50OmZ1bmN0aW9uKGEsYil7YS5tYXRjaCgiQGltcG9ydCIpP2koYSxiKTpoKGEpfX0sbD0vXC9cKlteKl0qXCorKFteLypdW14qXSpcKispKlwvL2dpbSxtPS9cL1wqXHMqQHBvbHlmaWxsIChbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLykoW157XSo/KXsvZ2ltLG49L3BvbHlmaWxsLW5leHQtc2VsZWN0b3JbXn1dKmNvbnRlbnRcOltcc10qJyhbXiddKiknW159XSp9KFtee10qPyl7L2dpbSxvPS9cL1wqXHNAcG9seWZpbGwtcnVsZShbXipdKlwqKyhbXi8qXVteKl0qXCorKSopXC8vZ2ltLHA9Lyhwb2x5ZmlsbC1ydWxlKVtefV0qKGNvbnRlbnRcOltcc10qJyhbXiddKiknW147XSo7KVtefV0qfS9naW0scT0vXC9cKlxzQHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxyPS8ocG9seWZpbGwtdW5zY29wZWQtcnVsZSlbXn1dKihjb250ZW50XDpbXHNdKicoW14nXSopJ1teO10qOylbXn1dKn0vZ2ltLHM9Ii1zaGFkb3djc3Nob3N0Iix0PSItc2hhZG93Y3NzY29udGV4dCIsdT0iKSg/OlxcKCgoPzpcXChbXikoXSpcXCl8W14pKF0qKSs/KVxcKSk/KFteLHtdKikiO2Nzc0NvbG9uSG9zdFJlPW5ldyBSZWdFeHAoIigiK3MrdSwiZ2ltIiksY3NzQ29sb25Ib3N0Q29udGV4dFJlPW5ldyBSZWdFeHAoIigiK3QrdSwiZ2ltIiksc2VsZWN0b3JSZVN1ZmZpeD0iKFs+XFxzfitbLix7Ol1bXFxzXFxTXSopPyQiLGNvbG9uSG9zdFJlPS9cOmhvc3QvZ2ltLGNvbG9uSG9zdENvbnRleHRSZT0vXDpob3N0LWNvbnRleHQvZ2ltLHBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcj1zKyItbm8tY29tYmluYXRvciIscG9seWZpbGxIb3N0UmU9bmV3IFJlZ0V4cChzLCJnaW0iKSxwb2x5ZmlsbEhvc3RDb250ZXh0UmU9bmV3IFJlZ0V4cCh0LCJnaW0iKSxjb21iaW5hdG9yc1JlPVsvXF5cXi9nLC9cXi9nLC9cL3NoYWRvd1wvL2csL1wvc2hhZG93LWRlZXBcLy9nLC86OnNoYWRvdy9nLC9cL2RlZXBcLy9nXTt2YXIgdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTt2LnN0eWxlLmRpc3BsYXk9Im5vbmUiO3ZhciB3LHg9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgiQ2hyb21lIikseT0ic2hpbS1zaGFkb3dkb20iLHo9InNoaW0tc2hhZG93ZG9tLWNzcyIsQT0ibm8tc2hpbSI7aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXtoKCJzdHlsZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxuIik7dmFyIEI9d3JhcChkb2N1bWVudCksQz1CLnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtDLmluc2VydEJlZm9yZShqKCksQy5jaGlsZE5vZGVzWzBdKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe3ZhciBiPWEudXJsUmVzb2x2ZXI7aWYod2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMudXNlTmF0aXZlKXt2YXIgYz0ibGlua1tyZWw9c3R5bGVzaGVldF1bIit5KyJdIixkPSJzdHlsZVsiK3krIl0iO0hUTUxJbXBvcnRzLmltcG9ydGVyLmRvY3VtZW50UHJlbG9hZFNlbGVjdG9ycys9IiwiK2MsSFRNTEltcG9ydHMuaW1wb3J0ZXIuaW1wb3J0c1ByZWxvYWRTZWxlY3RvcnMrPSIsIitjLEhUTUxJbXBvcnRzLnBhcnNlci5kb2N1bWVudFNlbGVjdG9ycz1bSFRNTEltcG9ydHMucGFyc2VyLmRvY3VtZW50U2VsZWN0b3JzLGMsZF0uam9pbigiLCIpO3ZhciBlPUhUTUxJbXBvcnRzLnBhcnNlci5wYXJzZUdlbmVyaWM7SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlR2VuZXJpYz1mdW5jdGlvbihhKXtpZighYVt6XSl7dmFyIGM9YS5fX2ltcG9ydEVsZW1lbnR8fGE7aWYoIWMuaGFzQXR0cmlidXRlKHkpKXJldHVybiB2b2lkIGUuY2FsbCh0aGlzLGEpO2EuX19yZXNvdXJjZT8oYz1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSxjLnRleHRDb250ZW50PWIucmVzb2x2ZUNzc1RleHQoYS5fX3Jlc291cmNlLGEuaHJlZikpOmIucmVzb2x2ZVN0eWxlKGMpLGMudGV4dENvbnRlbnQ9ay5zaGltU3R5bGUoYyksYy5yZW1vdmVBdHRyaWJ1dGUoeSwiIiksYy5zZXRBdHRyaWJ1dGUoeiwiIiksY1t6XT0hMCxjLnBhcmVudE5vZGUhPT1DJiYoYS5wYXJlbnROb2RlPT09Qz9DLnJlcGxhY2VDaGlsZChjLGEpOkMuYXBwZW5kQ2hpbGQoYykpLGMuX19pbXBvcnRQYXJzZWQ9ITAsdGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGEpfX07dmFyIGY9SFRNTEltcG9ydHMucGFyc2VyLmhhc1Jlc291cmNlO0hUTUxJbXBvcnRzLnBhcnNlci5oYXNSZXNvdXJjZT1mdW5jdGlvbihhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmInN0eWxlc2hlZXQiPT09YS5yZWwmJmEuaGFzQXR0cmlidXRlKHkpP2EuX19yZXNvdXJjZTpmLmNhbGwodGhpcyxhKX19fSl9YS5TaGFkb3dDU1M9a30od2luZG93LlBsYXRmb3JtKSk6IWZ1bmN0aW9uKCl7d2luZG93LnRlbXBsYXRlQ29udGVudD13aW5kb3cudGVtcGxhdGVDb250ZW50fHxmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50fSx3aW5kb3cud3JhcD13aW5kb3cudW53cmFwPWZ1bmN0aW9uKGEpe3JldHVybiBhfSxhZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe2lmKEN1c3RvbUVsZW1lbnRzLnVzZU5hdGl2ZT09PSExKXt2YXIgYT1FbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290O0VsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q9ZnVuY3Rpb24oKXt2YXIgYj1hLmNhbGwodGhpcyk7cmV0dXJuIEN1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93KHRoaXMpLGJ9fX0pLHdpbmRvdy50ZW1wbGF0ZUNvbnRlbnQ9ZnVuY3Rpb24oYSl7aWYod2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChhKSwhYS5jb250ZW50JiYhYS5fY29udGVudCl7Zm9yKHZhciBiPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTthLmZpcnN0Q2hpbGQ7KWIuYXBwZW5kQ2hpbGQoYS5maXJzdENoaWxkKTthLl9jb250ZW50PWJ9cmV0dXJuIGEuY29udGVudHx8YS5fY29udGVudH19KCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIHZvaWQgMCE9PW1bYV19ZnVuY3Rpb24gYygpe2guY2FsbCh0aGlzKSx0aGlzLl9pc0ludmFsaWQ9ITB9ZnVuY3Rpb24gZChhKXtyZXR1cm4iIj09YSYmYy5jYWxsKHRoaXMpLGEudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gYj4zMiYmMTI3PmImJi0xPT1bMzQsMzUsNjAsNjIsNjMsOTZdLmluZGV4T2YoYik/YTplbmNvZGVVUklDb21wb25lbnQoYSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGI+MzImJjEyNz5iJiYtMT09WzM0LDM1LDYwLDYyLDk2XS5pbmRleE9mKGIpP2E6ZW5jb2RlVVJJQ29tcG9uZW50KGEpfWZ1bmN0aW9uIGcoYSxnLGgpe2Z1bmN0aW9uIGkoYSl7dC5wdXNoKGEpfXZhciBqPWd8fCJzY2hlbWUgc3RhcnQiLGs9MCxsPSIiLHI9ITEscz0hMSx0PVtdO2E6Zm9yKDsoYVtrLTFdIT1vfHwwPT1rKSYmIXRoaXMuX2lzSW52YWxpZDspe3ZhciB1PWFba107c3dpdGNoKGope2Nhc2Uic2NoZW1lIHN0YXJ0IjppZighdXx8IXAudGVzdCh1KSl7aWYoZyl7aSgiSW52YWxpZCBzY2hlbWUuIik7YnJlYWsgYX1sPSIiLGo9Im5vIHNjaGVtZSI7Y29udGludWV9bCs9dS50b0xvd2VyQ2FzZSgpLGo9InNjaGVtZSI7YnJlYWs7Y2FzZSJzY2hlbWUiOmlmKHUmJnEudGVzdCh1KSlsKz11LnRvTG93ZXJDYXNlKCk7ZWxzZXtpZigiOiIhPXUpe2lmKGcpe2lmKG89PXUpYnJlYWsgYTtpKCJDb2RlIHBvaW50IG5vdCBhbGxvd2VkIGluIHNjaGVtZTogIit1KTticmVhayBhfWw9IiIsaz0wLGo9Im5vIHNjaGVtZSI7Y29udGludWV9aWYodGhpcy5fc2NoZW1lPWwsbD0iIixnKWJyZWFrIGE7Yih0aGlzLl9zY2hlbWUpJiYodGhpcy5faXNSZWxhdGl2ZT0hMCksaj0iZmlsZSI9PXRoaXMuX3NjaGVtZT8icmVsYXRpdmUiOnRoaXMuX2lzUmVsYXRpdmUmJmgmJmguX3NjaGVtZT09dGhpcy5fc2NoZW1lPyJyZWxhdGl2ZSBvciBhdXRob3JpdHkiOnRoaXMuX2lzUmVsYXRpdmU/ImF1dGhvcml0eSBmaXJzdCBzbGFzaCI6InNjaGVtZSBkYXRhIn1icmVhaztjYXNlInNjaGVtZSBkYXRhIjoiPyI9PXU/KHF1ZXJ5PSI/IixqPSJxdWVyeSIpOiIjIj09dT8odGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50Iik6byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fc2NoZW1lRGF0YSs9ZSh1KSk7YnJlYWs7Y2FzZSJubyBzY2hlbWUiOmlmKGgmJmIoaC5fc2NoZW1lKSl7aj0icmVsYXRpdmUiO2NvbnRpbnVlfWkoIk1pc3Npbmcgc2NoZW1lLiIpLGMuY2FsbCh0aGlzKTticmVhaztjYXNlInJlbGF0aXZlIG9yIGF1dGhvcml0eSI6aWYoIi8iIT11fHwiLyIhPWFbaysxXSl7aSgiRXhwZWN0ZWQgLywgZ290OiAiK3UpLGo9InJlbGF0aXZlIjtjb250aW51ZX1qPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2JyZWFrO2Nhc2UicmVsYXRpdmUiOmlmKHRoaXMuX2lzUmVsYXRpdmU9ITAsImZpbGUiIT10aGlzLl9zY2hlbWUmJih0aGlzLl9zY2hlbWU9aC5fc2NoZW1lKSxvPT11KXt0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PWguX3F1ZXJ5O2JyZWFrIGF9aWYoIi8iPT11fHwiXFwiPT11KSJcXCI9PXUmJmkoIlxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC4iKSxqPSJyZWxhdGl2ZSBzbGFzaCI7ZWxzZSBpZigiPyI9PXUpdGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT0iPyIsaj0icXVlcnkiO2Vsc2V7aWYoIiMiIT11KXt2YXIgdj1hW2srMV0sdz1hW2srMl07KCJmaWxlIiE9dGhpcy5fc2NoZW1lfHwhcC50ZXN0KHUpfHwiOiIhPXYmJiJ8IiE9dnx8byE9dyYmIi8iIT13JiYiXFwiIT13JiYiPyIhPXcmJiIjIiE9dykmJih0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3BhdGgucG9wKCkpLGo9InJlbGF0aXZlIHBhdGgiO2NvbnRpbnVlfXRoaXMuX2hvc3Q9aC5faG9zdCx0aGlzLl9wb3J0PWguX3BvcnQsdGhpcy5fcGF0aD1oLl9wYXRoLnNsaWNlKCksdGhpcy5fcXVlcnk9aC5fcXVlcnksdGhpcy5fZnJhZ21lbnQ9IiMiLGo9ImZyYWdtZW50In1icmVhaztjYXNlInJlbGF0aXZlIHNsYXNoIjppZigiLyIhPXUmJiJcXCIhPXUpeyJmaWxlIiE9dGhpcy5fc2NoZW1lJiYodGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCksaj0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9IlxcIj09dSYmaSgiXFwgaXMgYW4gaW52YWxpZCBjb2RlIHBvaW50LiIpLGo9ImZpbGUiPT10aGlzLl9zY2hlbWU/ImZpbGUgaG9zdCI6ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI7YnJlYWs7Y2FzZSJhdXRob3JpdHkgZmlyc3Qgc2xhc2giOmlmKCIvIiE9dSl7aSgiRXhwZWN0ZWQgJy8nLCBnb3Q6ICIrdSksaj0iYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjtjb250aW51ZX1qPSJhdXRob3JpdHkgc2Vjb25kIHNsYXNoIjticmVhaztjYXNlImF1dGhvcml0eSBzZWNvbmQgc2xhc2giOmlmKGo9ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyIsIi8iIT11KXtpKCJFeHBlY3RlZCAnLycsIGdvdDogIit1KTtjb250aW51ZX1icmVhaztjYXNlImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI6aWYoIi8iIT11JiYiXFwiIT11KXtqPSJhdXRob3JpdHkiO2NvbnRpbnVlfWkoIkV4cGVjdGVkIGF1dGhvcml0eSwgZ290OiAiK3UpO2JyZWFrO2Nhc2UiYXV0aG9yaXR5IjppZigiQCI9PXUpe3ImJihpKCJAIGFscmVhZHkgc2Vlbi4iKSxsKz0iJTQwIikscj0hMDtmb3IodmFyIHg9MDt4PGwubGVuZ3RoO3grKyl7dmFyIHk9bFt4XTtpZigiCSIhPXkmJiJcbiIhPXkmJiJcciIhPXkpaWYoIjoiIT15fHxudWxsIT09dGhpcy5fcGFzc3dvcmQpe3ZhciB6PWUoeSk7bnVsbCE9PXRoaXMuX3Bhc3N3b3JkP3RoaXMuX3Bhc3N3b3JkKz16OnRoaXMuX3VzZXJuYW1lKz16fWVsc2UgdGhpcy5fcGFzc3dvcmQ9IiI7ZWxzZSBpKCJJbnZhbGlkIHdoaXRlc3BhY2UgaW4gYXV0aG9yaXR5LiIpfWw9IiJ9ZWxzZXtpZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11KXtrLT1sLmxlbmd0aCxsPSIiLGo9Imhvc3QiO2NvbnRpbnVlfWwrPXV9YnJlYWs7Y2FzZSJmaWxlIGhvc3QiOmlmKG89PXV8fCIvIj09dXx8IlxcIj09dXx8Ij8iPT11fHwiIyI9PXUpezIhPWwubGVuZ3RofHwhcC50ZXN0KGxbMF0pfHwiOiIhPWxbMV0mJiJ8IiE9bFsxXT8wPT1sLmxlbmd0aD9qPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0IjoodGhpcy5faG9zdD1kLmNhbGwodGhpcyxsKSxsPSIiLGo9InJlbGF0aXZlIHBhdGggc3RhcnQiKTpqPSJyZWxhdGl2ZSBwYXRoIjtjb250aW51ZX0iCSI9PXV8fCJcbiI9PXV8fCJcciI9PXU/aSgiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGZpbGUgaG9zdC4iKTpsKz11O2JyZWFrO2Nhc2UiaG9zdCI6Y2FzZSJob3N0bmFtZSI6aWYoIjoiIT11fHxzKXtpZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11KXtpZih0aGlzLl9ob3N0PWQuY2FsbCh0aGlzLGwpLGw9IiIsaj0icmVsYXRpdmUgcGF0aCBzdGFydCIsZylicmVhayBhO2NvbnRpbnVlfSIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dT8oIlsiPT11P3M9ITA6Il0iPT11JiYocz0hMSksbCs9dSk6aSgiSW52YWxpZCBjb2RlIHBvaW50IGluIGhvc3QvaG9zdG5hbWU6ICIrdSl9ZWxzZSBpZih0aGlzLl9ob3N0PWQuY2FsbCh0aGlzLGwpLGw9IiIsaj0icG9ydCIsImhvc3RuYW1lIj09ZylicmVhayBhO2JyZWFrO2Nhc2UicG9ydCI6aWYoL1swLTldLy50ZXN0KHUpKWwrPXU7ZWxzZXtpZihvPT11fHwiLyI9PXV8fCJcXCI9PXV8fCI/Ij09dXx8IiMiPT11fHxnKXtpZigiIiE9bCl7dmFyIEE9cGFyc2VJbnQobCwxMCk7QSE9bVt0aGlzLl9zY2hlbWVdJiYodGhpcy5fcG9ydD1BKyIiKSxsPSIifWlmKGcpYnJlYWsgYTtqPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0Ijtjb250aW51ZX0iCSI9PXV8fCJcbiI9PXV8fCJcciI9PXU/aSgiSW52YWxpZCBjb2RlIHBvaW50IGluIHBvcnQ6ICIrdSk6Yy5jYWxsKHRoaXMpfWJyZWFrO2Nhc2UicmVsYXRpdmUgcGF0aCBzdGFydCI6aWYoIlxcIj09dSYmaSgiJ1xcJyBub3QgYWxsb3dlZCBpbiBwYXRoLiIpLGo9InJlbGF0aXZlIHBhdGgiLCIvIiE9dSYmIlxcIiE9dSljb250aW51ZTticmVhaztjYXNlInJlbGF0aXZlIHBhdGgiOmlmKG8hPXUmJiIvIiE9dSYmIlxcIiE9dSYmKGd8fCI/IiE9dSYmIiMiIT11KSkiCSIhPXUmJiJcbiIhPXUmJiJcciIhPXUmJihsKz1lKHUpKTtlbHNleyJcXCI9PXUmJmkoIlxcIG5vdCBhbGxvd2VkIGluIHJlbGF0aXZlIHBhdGguIik7dmFyIEI7KEI9bltsLnRvTG93ZXJDYXNlKCldKSYmKGw9QiksIi4uIj09bD8odGhpcy5fcGF0aC5wb3AoKSwiLyIhPXUmJiJcXCIhPXUmJnRoaXMuX3BhdGgucHVzaCgiIikpOiIuIj09bCYmIi8iIT11JiYiXFwiIT11P3RoaXMuX3BhdGgucHVzaCgiIik6Ii4iIT1sJiYoImZpbGUiPT10aGlzLl9zY2hlbWUmJjA9PXRoaXMuX3BhdGgubGVuZ3RoJiYyPT1sLmxlbmd0aCYmcC50ZXN0KGxbMF0pJiYifCI9PWxbMV0mJihsPWxbMF0rIjoiKSx0aGlzLl9wYXRoLnB1c2gobCkpLGw9IiIsIj8iPT11Pyh0aGlzLl9xdWVyeT0iPyIsaj0icXVlcnkiKToiIyI9PXUmJih0aGlzLl9mcmFnbWVudD0iIyIsaj0iZnJhZ21lbnQiKX1icmVhaztjYXNlInF1ZXJ5IjpnfHwiIyIhPXU/byE9dSYmIgkiIT11JiYiXG4iIT11JiYiXHIiIT11JiYodGhpcy5fcXVlcnkrPWYodSkpOih0aGlzLl9mcmFnbWVudD0iIyIsaj0iZnJhZ21lbnQiKTticmVhaztjYXNlImZyYWdtZW50IjpvIT11JiYiCSIhPXUmJiJcbiIhPXUmJiJcciIhPXUmJih0aGlzLl9mcmFnbWVudCs9dSl9aysrfX1mdW5jdGlvbiBoKCl7dGhpcy5fc2NoZW1lPSIiLHRoaXMuX3NjaGVtZURhdGE9IiIsdGhpcy5fdXNlcm5hbWU9IiIsdGhpcy5fcGFzc3dvcmQ9bnVsbCx0aGlzLl9ob3N0PSIiLHRoaXMuX3BvcnQ9IiIsdGhpcy5fcGF0aD1bXSx0aGlzLl9xdWVyeT0iIix0aGlzLl9mcmFnbWVudD0iIix0aGlzLl9pc0ludmFsaWQ9ITEsdGhpcy5faXNSZWxhdGl2ZT0hMX1mdW5jdGlvbiBpKGEsYil7dm9pZCAwPT09Ynx8YiBpbnN0YW5jZW9mIGl8fChiPW5ldyBpKFN0cmluZyhiKSkpLHRoaXMuX3VybD1hLGguY2FsbCh0aGlzKTt2YXIgYz1hLnJlcGxhY2UoL15bIFx0XHJcblxmXSt8WyBcdFxyXG5cZl0rJC9nLCIiKTtnLmNhbGwodGhpcyxjLG51bGwsYil9dmFyIGo9ITE7aWYoIWEuZm9yY2VKVVJMKXRyeXt2YXIgaz1uZXcgVVJMKCJiIiwiaHR0cDovL2EiKTtqPSJodHRwOi8vYS9iIj09PWsuaHJlZn1jYXRjaChsKXt9aWYoIWope3ZhciBtPU9iamVjdC5jcmVhdGUobnVsbCk7bS5mdHA9MjEsbS5maWxlPTAsbS5nb3BoZXI9NzAsbS5odHRwPTgwLG0uaHR0cHM9NDQzLG0ud3M9ODAsbS53c3M9NDQzO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7blsiJTJlIl09Ii4iLG5bIi4lMmUiXT0iLi4iLG5bIiUyZS4iXT0iLi4iLG5bIiUyZSUyZSJdPSIuLiI7dmFyIG89dm9pZCAwLHA9L1thLXpBLVpdLyxxPS9bYS16QS1aMC05XCtcLVwuXS87aS5wcm90b3R5cGU9e2dldCBocmVmKCl7aWYodGhpcy5faXNJbnZhbGlkKXJldHVybiB0aGlzLl91cmw7dmFyIGE9IiI7cmV0dXJuKCIiIT10aGlzLl91c2VybmFtZXx8bnVsbCE9dGhpcy5fcGFzc3dvcmQpJiYoYT10aGlzLl91c2VybmFtZSsobnVsbCE9dGhpcy5fcGFzc3dvcmQ/IjoiK3RoaXMuX3Bhc3N3b3JkOiIiKSsiQCIpLHRoaXMucHJvdG9jb2wrKHRoaXMuX2lzUmVsYXRpdmU/Ii8vIithK3RoaXMuaG9zdDoiIikrdGhpcy5wYXRobmFtZSt0aGlzLl9xdWVyeSt0aGlzLl9mcmFnbWVudH0sc2V0IGhyZWYoYSl7aC5jYWxsKHRoaXMpLGcuY2FsbCh0aGlzLGEpfSxnZXQgcHJvdG9jb2woKXtyZXR1cm4gdGhpcy5fc2NoZW1lKyI6In0sc2V0IHByb3RvY29sKGEpe3RoaXMuX2lzSW52YWxpZHx8Zy5jYWxsKHRoaXMsYSsiOiIsInNjaGVtZSBzdGFydCIpfSxnZXQgaG9zdCgpe3JldHVybiB0aGlzLl9pc0ludmFsaWQ/IiI6dGhpcy5fcG9ydD90aGlzLl9ob3N0KyI6Iit0aGlzLl9wb3J0OnRoaXMuX2hvc3R9LHNldCBob3N0KGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJmcuY2FsbCh0aGlzLGEsImhvc3QiKX0sZ2V0IGhvc3RuYW1lKCl7cmV0dXJuIHRoaXMuX2hvc3R9LHNldCBob3N0bmFtZShhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZnLmNhbGwodGhpcyxhLCJob3N0bmFtZSIpfSxnZXQgcG9ydCgpe3JldHVybiB0aGlzLl9wb3J0fSxzZXQgcG9ydChhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZnLmNhbGwodGhpcyxhLCJwb3J0Iil9LGdldCBwYXRobmFtZSgpe3JldHVybiB0aGlzLl9pc0ludmFsaWQ/IiI6dGhpcy5faXNSZWxhdGl2ZT8iLyIrdGhpcy5fcGF0aC5qb2luKCIvIik6dGhpcy5fc2NoZW1lRGF0YX0sc2V0IHBhdGhuYW1lKGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJih0aGlzLl9wYXRoPVtdLGcuY2FsbCh0aGlzLGEsInJlbGF0aXZlIHBhdGggc3RhcnQiKSkKfSxnZXQgc2VhcmNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX3F1ZXJ5fHwiPyI9PXRoaXMuX3F1ZXJ5PyIiOnRoaXMuX3F1ZXJ5fSxzZXQgc2VhcmNoKGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJih0aGlzLl9xdWVyeT0iPyIsIj8iPT1hWzBdJiYoYT1hLnNsaWNlKDEpKSxnLmNhbGwodGhpcyxhLCJxdWVyeSIpKX0sZ2V0IGhhc2goKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkfHwhdGhpcy5fZnJhZ21lbnR8fCIjIj09dGhpcy5fZnJhZ21lbnQ/IiI6dGhpcy5fZnJhZ21lbnR9LHNldCBoYXNoKGEpe3RoaXMuX2lzSW52YWxpZHx8KHRoaXMuX2ZyYWdtZW50PSIjIiwiIyI9PWFbMF0mJihhPWEuc2xpY2UoMSkpLGcuY2FsbCh0aGlzLGEsImZyYWdtZW50IikpfX0sYS5VUkw9aX19KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9YXx8e30sZD0xO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspe3ZhciBlPWFyZ3VtZW50c1tkXTt0cnl7Zm9yKHZhciBmIGluIGUpYyhmLGUsYil9Y2F0Y2goZyl7fX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEsYixjKXt2YXIgZT1kKGIsYSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSxlKX1mdW5jdGlvbiBkKGEsYil7aWYoYSl7dmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpO3JldHVybiBjfHxkKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxiKX19RnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fChGdW5jdGlvbi5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtyZXR1cm4gZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKSxiLmFwcGx5KGEsZCl9fSksYS5taXhpbj1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixjKXt2YXIgZD0ic3RyaW5nIj09dHlwZW9mIGE/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKTphLmNsb25lTm9kZSghMCk7aWYoZC5pbm5lckhUTUw9YixjKWZvcih2YXIgZSBpbiBjKWQuc2V0QXR0cmlidXRlKGUsY1tlXSk7cmV0dXJuIGR9dmFyIGM9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQsZD1ET01Ub2tlbkxpc3QucHJvdG90eXBlLnJlbW92ZTtET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspYy5jYWxsKHRoaXMsYXJndW1lbnRzW2FdKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWQuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGEsYil7MT09YXJndW1lbnRzLmxlbmd0aCYmKGI9IXRoaXMuY29udGFpbnMoYSkpLGI/dGhpcy5hZGQoYSk6dGhpcy5yZW1vdmUoYSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUuc3dpdGNoPWZ1bmN0aW9uKGEsYil7YSYmdGhpcy5yZW1vdmUoYSksYiYmdGhpcy5hZGQoYil9O3ZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMpfSxmPXdpbmRvdy5OYW1lZE5vZGVNYXB8fHdpbmRvdy5Nb3pOYW1lZEF0dHJNYXB8fHt9O2lmKE5vZGVMaXN0LnByb3RvdHlwZS5hcnJheT1lLGYucHJvdG90eXBlLmFycmF5PWUsSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmFycmF5PWUsIXdpbmRvdy5wZXJmb3JtYW5jZSl7dmFyIGc9RGF0ZS5ub3coKTt3aW5kb3cucGVyZm9ybWFuY2U9e25vdzpmdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLWd9fX13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7cmV0dXJuIGE/ZnVuY3Rpb24oYil7cmV0dXJuIGEoZnVuY3Rpb24oKXtiKHBlcmZvcm1hbmNlLm5vdygpKX0pfTpmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9fSgpKTt2YXIgaD1bXSxpPWZ1bmN0aW9uKCl7aC5wdXNoKGFyZ3VtZW50cyl9O3dpbmRvdy5Qb2x5bWVyPWksYS5kZWxpdmVyRGVjbGFyYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIGEuZGVsaXZlckRlY2xhcmF0aW9ucz1mdW5jdGlvbigpe3Rocm93IlBvc3NpYmxlIGF0dGVtcHQgdG8gbG9hZCBQb2x5bWVyIHR3aWNlIn0saH0sd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7d2luZG93LlBvbHltZXI9PT1pJiYod2luZG93LlBvbHltZXI9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKCdZb3UgdHJpZWQgdG8gdXNlIHBvbHltZXIgd2l0aG91dCBsb2FkaW5nIGl0IGZpcnN0LiBUbyBsb2FkIHBvbHltZXIsIDxsaW5rIHJlbD0iaW1wb3J0IiBocmVmPSJjb21wb25lbnRzL3BvbHltZXIvcG9seW1lci5odG1sIj4nKX0pfSksYS5jcmVhdGVET009Yn0od2luZG93LlBsYXRmb3JtKSx3aW5kb3cudGVtcGxhdGVDb250ZW50PXdpbmRvdy50ZW1wbGF0ZUNvbnRlbnR8fGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnR9LGZ1bmN0aW9uKGEpe2E9YXx8KHdpbmRvdy5JbnNwZWN0b3I9e30pO3ZhciBiO3dpbmRvdy5zaW5zcGVjdD1mdW5jdGlvbihhLGQpe2J8fChiPXdpbmRvdy5vcGVuKCIiLCJTaGFkb3dET00gSW5zcGVjdG9yIixudWxsLCEwKSxiLmRvY3VtZW50LndyaXRlKGMpLGIuYXBpPXtzaGFkb3dpemU6c2hhZG93aXplfSksZihhfHx3cmFwKGRvY3VtZW50LmJvZHkpLGQpfTt2YXIgYz1bIjwhRE9DVFlQRSBodG1sPiIsIjxodG1sPiIsIiAgPGhlYWQ+IiwiICAgIDx0aXRsZT5TaGFkb3dET00gSW5zcGVjdG9yPC90aXRsZT4iLCIgICAgPHN0eWxlPiIsIiAgICAgIGJvZHkgeyIsIiAgICAgIH0iLCIgICAgICBwcmUgeyIsJyAgICAgICAgZm9udDogOXB0ICJDb3VyaWVyIE5ldyIsIG1vbm9zcGFjZTsnLCIgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjVlbTsiLCIgICAgICB9IiwiICAgICAgdGFnIHsiLCIgICAgICAgIGNvbG9yOiBwdXJwbGU7IiwiICAgICAgfSIsIiAgICAgIHVsIHsiLCIgICAgICAgICBtYXJnaW46IDA7IiwiICAgICAgICAgcGFkZGluZzogMDsiLCIgICAgICAgICBsaXN0LXN0eWxlOiBub25lOyIsIiAgICAgIH0iLCIgICAgICBsaSB7IiwiICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOyIsIiAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMWYxZjE7IiwiICAgICAgICAgcGFkZGluZzogNHB4IDZweDsiLCIgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7IiwiICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7IiwiICAgICAgfSIsIiAgICA8L3N0eWxlPiIsIiAgPC9oZWFkPiIsIiAgPGJvZHk+IiwnICAgIDx1bCBpZD0iY3J1bWJzIj4nLCIgICAgPC91bD4iLCcgICAgPGRpdiBpZD0idHJlZSI+PC9kaXY+JywiICA8L2JvZHk+IiwiPC9odG1sPiJdLmpvaW4oIlxuIiksZD1bXSxlPWZ1bmN0aW9uKCl7dmFyIGE9Yi5kb2N1bWVudCxjPWEucXVlcnlTZWxlY3RvcigiI2NydW1icyIpO2MudGV4dENvbnRlbnQ9IiI7Zm9yKHZhciBlLGc9MDtlPWRbZ107ZysrKXt2YXIgaD1hLmNyZWF0ZUVsZW1lbnQoImEiKTtoLmhyZWY9IiMiLGgudGV4dENvbnRlbnQ9ZS5sb2NhbE5hbWUsaC5pZHg9ZyxoLm9uY2xpY2s9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiO2QubGVuZ3RoPnRoaXMuaWR4OyliPWQucG9wKCk7ZihiLnNoYWRvd3x8YixiKSxhLnByZXZlbnREZWZhdWx0KCl9LGMuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KCJsaSIpKS5hcHBlbmRDaGlsZChoKX19LGY9ZnVuY3Rpb24oYSxjKXt2YXIgZj1iLmRvY3VtZW50O2s9W107dmFyIGc9Y3x8YTtkLnB1c2goZyksZSgpLGYuYm9keS5xdWVyeVNlbGVjdG9yKCIjdHJlZSIpLmlubmVySFRNTD0iPHByZT4iK2ooYSxhLmNoaWxkTm9kZXMpKyI8L3ByZT4ifSxnPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCksaD17U1RZTEU6MSxTQ1JJUFQ6MSwiI2NvbW1lbnQiOjEsVEVNUExBVEU6MX0saT1mdW5jdGlvbihhKXtyZXR1cm4gaFthLm5vZGVOYW1lXX0saj1mdW5jdGlvbihhLGIsYyl7aWYoaShhKSlyZXR1cm4iIjt2YXIgZD1jfHwiIjtpZihhLmxvY2FsTmFtZXx8MTE9PWEubm9kZVR5cGUpe3ZhciBlPWEubG9jYWxOYW1lfHwic2hhZG93LXJvb3QiLGY9ZCtsKGEpOyJjb250ZW50Ij09ZSYmKGI9YS5nZXREaXN0cmlidXRlZE5vZGVzKCkpLGYrPSI8YnIvPiI7dmFyIGg9ZCsiJm5ic3A7Jm5ic3A7IjtnKGIsZnVuY3Rpb24oYSl7Zis9aihhLGEuY2hpbGROb2RlcyxoKX0pLGYrPWQse2JyOjF9W2VdfHwoZis9Ijx0YWc+Jmx0Oy8iK2UrIiZndDs8L3RhZz4iLGYrPSI8YnIvPiIpfWVsc2V7dmFyIGs9YS50ZXh0Q29udGVudC50cmltKCk7Zj1rP2QrJyInK2srJyI8YnIvPic6IiJ9cmV0dXJuIGZ9LGs9W10sbD1mdW5jdGlvbihhKXt2YXIgYj0iPHRhZz4mbHQ7IixjPWEubG9jYWxOYW1lfHwic2hhZG93LXJvb3QiO3JldHVybiBhLndlYmtpdFNoYWRvd1Jvb3R8fGEuc2hhZG93Um9vdD8oYis9JyA8YnV0dG9uIGlkeD0iJytrLmxlbmd0aCsnIiBvbmNsaWNrPSJhcGkuc2hhZG93aXplLmNhbGwodGhpcykiPicrYysiPC9idXR0b24+IixrLnB1c2goYSkpOmIrPWN8fCJzaGFkb3ctcm9vdCIsYS5hdHRyaWJ1dGVzJiZnKGEuYXR0cmlidXRlcyxmdW5jdGlvbihhKXtiKz0iICIrYS5uYW1lKyhhLnZhbHVlPyc9IicrYS52YWx1ZSsnIic6IiIpfSksYis9IiZndDs8L3RhZz4ifTtzaGFkb3dpemU9ZnVuY3Rpb24oKXt2YXIgYT1OdW1iZXIodGhpcy5hdHRyaWJ1dGVzLmlkeC52YWx1ZSksYj1rW2FdO2I/ZihiLndlYmtpdFNoYWRvd1Jvb3R8fGIuc2hhZG93Um9vdCxiKTooY29uc29sZS5sb2coImJhZCBzaGFkb3dpemUgbm9kZSIpLGNvbnNvbGUuZGlyKHRoaXMpKX0sYS5vdXRwdXQ9an0od2luZG93Lkluc3BlY3RvciksZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2EudGV4dENvbnRlbnQ9ImJvZHkge3RyYW5zaXRpb246IG9wYWNpdHkgZWFzZS1pbiAwLjJzOyB9IFxuYm9keVt1bnJlc29sdmVkXSB7b3BhY2l0eTogMDsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47IH0gXG4iO3ZhciBiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7cmV0dXJuIGI9Ynx8W10sYi5tYXB8fChiPVtiXSksYS5hcHBseSh0aGlzLGIubWFwKGQpKX1mdW5jdGlvbiBjKGEsYyxkKXt2YXIgZTtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybjtjYXNlIDE6ZT1udWxsO2JyZWFrO2Nhc2UgMjplPWMuYXBwbHkodGhpcyk7YnJlYWs7ZGVmYXVsdDplPWIoZCxjKX1mW2FdPWV9ZnVuY3Rpb24gZChhKXtyZXR1cm4gZlthXX1mdW5jdGlvbiBlKGEsYyl7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe2IoYyxhKX0pfXZhciBmPXt9O2EubWFyc2hhbD1kLGEubW9kdWxlPWMsYS51c2luZz1lfSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zi50ZXh0Q29udGVudD1kKyssZS5wdXNoKGEpfWZ1bmN0aW9uIGMoKXtmb3IoO2UubGVuZ3RoOyllLnNoaWZ0KCkoKX12YXIgZD0wLGU9W10sZj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3KHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHxKc011dGF0aW9uT2JzZXJ2ZXIpKGMpLm9ic2VydmUoZix7Y2hhcmFjdGVyRGF0YTohMH0pLGEuZW5kT2ZNaWNyb3Rhc2s9Yn0oUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGQpe3JldHVybiBhLnJlcGxhY2UoZCxmdW5jdGlvbihhLGQsZSxmKXt2YXIgZz1lLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGc9YyhiLGcpLGQrIiciK2crIiciK2Z9KX1mdW5jdGlvbiBjKGEsYil7dmFyIGM9bmV3IFVSTChiLGEpO3JldHVybiBkKGMuaHJlZil9ZnVuY3Rpb24gZChhKXt2YXIgYj1kb2N1bWVudC5iYXNlVVJJLGM9bmV3IFVSTChhLGIpO3JldHVybiBjLmhvc3Q9PT1iLmhvc3QmJmMucG9ydD09PWIucG9ydCYmYy5wcm90b2NvbD09PWIucHJvdG9jb2w/ZShiLnBhdGhuYW1lLGMucGF0aG5hbWUpOmF9ZnVuY3Rpb24gZShhLGIpe2Zvcih2YXIgYz1hLnNwbGl0KCIvIiksZD1iLnNwbGl0KCIvIik7Yy5sZW5ndGgmJmNbMF09PT1kWzBdOyljLnNoaWZ0KCksZC5zaGlmdCgpO2Zvcih2YXIgZT0wLGY9Yy5sZW5ndGgtMTtmPmU7ZSsrKWQudW5zaGlmdCgiLi4iKTtyZXR1cm4gZC5qb2luKCIvIil9dmFyIGY9e3Jlc29sdmVEb206ZnVuY3Rpb24oYSxiKXtiPWJ8fGEub3duZXJEb2N1bWVudC5iYXNlVVJJLHRoaXMucmVzb2x2ZUF0dHJpYnV0ZXMoYSxiKSx0aGlzLnJlc29sdmVTdHlsZXMoYSxiKTt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspZC5jb250ZW50JiZ0aGlzLnJlc29sdmVEb20oZC5jb250ZW50LGIpfSxyZXNvbHZlVGVtcGxhdGU6ZnVuY3Rpb24oYSl7dGhpcy5yZXNvbHZlRG9tKGEuY29udGVudCxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSl9LHJlc29sdmVTdHlsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspdGhpcy5yZXNvbHZlU3R5bGUoZCxiKX0scmVzb2x2ZVN0eWxlOmZ1bmN0aW9uKGEsYil7Yj1ifHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxhLnRleHRDb250ZW50PXRoaXMucmVzb2x2ZUNzc1RleHQoYS50ZXh0Q29udGVudCxiKX0scmVzb2x2ZUNzc1RleHQ6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYT1iKGEsYyxnKSxiKGEsYyxoKX0scmVzb2x2ZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXthLmhhc0F0dHJpYnV0ZXMmJmEuaGFzQXR0cmlidXRlcygpJiZ0aGlzLnJlc29sdmVFbGVtZW50QXR0cmlidXRlcyhhLGIpO3ZhciBjPWEmJmEucXVlcnlTZWxlY3RvckFsbChqKTtpZihjKWZvcih2YXIgZCxlPTAsZj1jLmxlbmd0aDtmPmUmJihkPWNbZV0pO2UrKyl0aGlzLnJlc29sdmVFbGVtZW50QXR0cmlidXRlcyhkLGIpfSxyZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXtiPWJ8fGEub3duZXJEb2N1bWVudC5iYXNlVVJJLGkuZm9yRWFjaChmdW5jdGlvbihkKXt2YXIgZT1hLmF0dHJpYnV0ZXNbZF07aWYoZSYmZS52YWx1ZSYmZS52YWx1ZS5zZWFyY2goayk8MCl7dmFyIGY9YyhiLGUudmFsdWUpO2UudmFsdWU9Zn19KX19LGc9Lyh1cmxcKCkoW14pXSopKFwpKS9nLGg9LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLGk9WyJocmVmIiwic3JjIiwiYWN0aW9uIl0saj0iWyIraS5qb2luKCJdLFsiKSsiXSIsaz0ie3suKn19IjthLnVybFJlc29sdmVyPWZ9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3UucHVzaChhKSx0fHwodD0hMCxxKGQpKX1mdW5jdGlvbiBjKGEpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSl8fGF9ZnVuY3Rpb24gZCgpe3Q9ITE7dmFyIGE9dTt1PVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7dmFyIGI9ITE7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEudGFrZVJlY29yZHMoKTtlKGEpLGMubGVuZ3RoJiYoYS5jYWxsYmFja18oYyxhKSxiPSEwKX0pLGImJmQoKX1mdW5jdGlvbiBlKGEpe2Eubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9cC5nZXQoYik7YyYmYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Iub2JzZXJ2ZXI9PT1hJiZiLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPWE7YztjPWMucGFyZW50Tm9kZSl7dmFyIGQ9cC5nZXQoYyk7aWYoZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXSxnPWYub3B0aW9ucztpZihjPT09YXx8Zy5zdWJ0cmVlKXt2YXIgaD1iKGcpO2gmJmYuZW5xdWV1ZShoKX19fX1mdW5jdGlvbiBnKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89Kyt2fWZ1bmN0aW9uIGgoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1bXSx0aGlzLnJlbW92ZWROb2Rlcz1bXSx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBpKGEpe3ZhciBiPW5ldyBoKGEudHlwZSxhLnRhcmdldCk7cmV0dXJuIGIuYWRkZWROb2Rlcz1hLmFkZGVkTm9kZXMuc2xpY2UoKSxiLnJlbW92ZWROb2Rlcz1hLnJlbW92ZWROb2Rlcy5zbGljZSgpLGIucHJldmlvdXNTaWJsaW5nPWEucHJldmlvdXNTaWJsaW5nLGIubmV4dFNpYmxpbmc9YS5uZXh0U2libGluZyxiLmF0dHJpYnV0ZU5hbWU9YS5hdHRyaWJ1dGVOYW1lLGIuYXR0cmlidXRlTmFtZXNwYWNlPWEuYXR0cmlidXRlTmFtZXNwYWNlLGIub2xkVmFsdWU9YS5vbGRWYWx1ZSxifWZ1bmN0aW9uIGooYSxiKXtyZXR1cm4gdz1uZXcgaChhLGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIHg/eDooeD1pKHcpLHgub2xkVmFsdWU9YSx4KX1mdW5jdGlvbiBsKCl7dz14PXZvaWQgMH1mdW5jdGlvbiBtKGEpe3JldHVybiBhPT09eHx8YT09PXd9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgV2Vha01hcCxxPXdpbmRvdy5tc1NldEltbWVkaWF0ZTtpZighcSl7dmFyIHI9W10scz1TdHJpbmcoTWF0aC5yYW5kb20oKSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKGEpe2lmKGEuZGF0YT09PXMpe3ZhciBiPXI7cj1bXSxiLmZvckVhY2goZnVuY3Rpb24oYSl7YSgpfSl9fSkscT1mdW5jdGlvbihhKXtyLnB1c2goYSksd2luZG93LnBvc3RNZXNzYWdlKHMsIioiKX19dmFyIHQ9ITEsdT1bXSx2PTA7Zy5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXtpZihhPWMoYSksIWIuY2hpbGRMaXN0JiYhYi5hdHRyaWJ1dGVzJiYhYi5jaGFyYWN0ZXJEYXRhfHxiLmF0dHJpYnV0ZU9sZFZhbHVlJiYhYi5hdHRyaWJ1dGVzfHxiLmF0dHJpYnV0ZUZpbHRlciYmYi5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYhYi5hdHRyaWJ1dGVzfHxiLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSYmIWIuY2hhcmFjdGVyRGF0YSl0aHJvdyBuZXcgU3ludGF4RXJyb3I7dmFyIGQ9cC5nZXQoYSk7ZHx8cC5zZXQoYSxkPVtdKTtmb3IodmFyIGUsZj0wO2Y8ZC5sZW5ndGg7ZisrKWlmKGRbZl0ub2JzZXJ2ZXI9PT10aGlzKXtlPWRbZl0sZS5yZW1vdmVMaXN0ZW5lcnMoKSxlLm9wdGlvbnM9YjticmVha31lfHwoZT1uZXcgbyh0aGlzLGEsYiksZC5wdXNoKGUpLHRoaXMubm9kZXNfLnB1c2goYSkpLGUuYWRkTGlzdGVuZXJzKCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1wLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107aWYoZC5vYnNlcnZlcj09PXRoaXMpe2QucmVtb3ZlTGlzdGVuZXJzKCksYi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19O3ZhciB3LHg7by5wcm90b3R5cGU9e2VucXVldWU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5vYnNlcnZlci5yZWNvcmRzXyxkPWMubGVuZ3RoO2lmKGMubGVuZ3RoPjApe3ZhciBlPWNbZC0xXSxmPW4oZSxhKTtpZihmKXJldHVybiB2b2lkKGNbZC0xXT1mKX1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWcsYS5NdXRhdGlvbk9ic2VydmVyfHwoYS5NdXRhdGlvbk9ic2VydmVyPWcpfSh0aGlzKSx3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe3ZhciBiPShhLnBhdGgsYS54aHIpLGM9YS5mbGFncyxkPWZ1bmN0aW9uKGEsYil7dGhpcy5jYWNoZT17fSx0aGlzLm9ubG9hZD1hLHRoaXMub25jb21wbGV0ZT1iLHRoaXMuaW5mbGlnaHQ9MCx0aGlzLnBlbmRpbmc9e319O2QucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0Kz1hLmxlbmd0aDtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspdGhpcy5yZXF1aXJlKGIpO3RoaXMuY2hlY2tEb25lKCl9LGFkZE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbmZsaWdodCsrLHRoaXMucmVxdWlyZShhKSx0aGlzLmNoZWNrRG9uZSgpfSxyZXF1aXJlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc3JjfHxhLmhyZWY7YS5fX25vZGVVcmw9Yix0aGlzLmRlZHVwZShiLGEpfHx0aGlzLmZldGNoKGIsYSl9LGRlZHVwZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMucGVuZGluZ1thXSlyZXR1cm4gdGhpcy5wZW5kaW5nW2FdLnB1c2goYiksITA7cmV0dXJuIHRoaXMuY2FjaGVbYV0/KHRoaXMub25sb2FkKGEsYix0aGlzLmNhY2hlW2FdKSx0aGlzLnRhaWwoKSwhMCk6KHRoaXMucGVuZGluZ1thXT1bYl0sITEpfSxmZXRjaDpmdW5jdGlvbihhLGQpe2lmKGMubG9hZCYmY29uc29sZS5sb2coImZldGNoIixhLGQpLGEubWF0Y2goL15kYXRhOi8pKXt2YXIgZT1hLnNwbGl0KCIsIiksZj1lWzBdLGc9ZVsxXTtnPWYuaW5kZXhPZigiO2Jhc2U2NCIpPi0xP2F0b2IoZyk6ZGVjb2RlVVJJQ29tcG9uZW50KGcpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnJlY2VpdmUoYSxkLG51bGwsZyl9LmJpbmQodGhpcyksMCl9ZWxzZXt2YXIgaD1mdW5jdGlvbihiLGMpe3RoaXMucmVjZWl2ZShhLGQsYixjKX0uYmluZCh0aGlzKTtiLmxvYWQoYSxoKX19LHJlY2VpdmU6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5jYWNoZVthXT1kO2Zvcih2YXIgZSxmPXRoaXMucGVuZGluZ1thXSxnPTAsaD1mLmxlbmd0aDtoPmcmJihlPWZbZ10pO2crKyl0aGlzLm9ubG9hZChhLGUsZCksdGhpcy50YWlsKCk7dGhpcy5wZW5kaW5nW2FdPW51bGx9LHRhaWw6ZnVuY3Rpb24oKXstLXRoaXMuaW5mbGlnaHQsdGhpcy5jaGVja0RvbmUoKX0sY2hlY2tEb25lOmZ1bmN0aW9uKCl7dGhpcy5pbmZsaWdodHx8dGhpcy5vbmNvbXBsZXRlKCl9fSxiPWJ8fHthc3luYzohMCxvazpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdGF0dXM+PTIwMCYmYS5zdGF0dXM8MzAwfHwzMDQ9PT1hLnN0YXR1c3x8MD09PWEuc3RhdHVzfSxsb2FkOmZ1bmN0aW9uKGMsZCxlKXt2YXIgZj1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuKGEuZmxhZ3MuZGVidWd8fGEuZmxhZ3MuYnVzdCkmJihjKz0iPyIrTWF0aC5yYW5kb20oKSksZi5vcGVuKCJHRVQiLGMsYi5hc3luYyksZi5hZGRFdmVudExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixmdW5jdGlvbigpezQ9PT1mLnJlYWR5U3RhdGUmJmQuY2FsbChlLCFiLm9rKGYpJiZmLGYucmVzcG9uc2V8fGYucmVzcG9uc2VUZXh0LGMpfSksZi5zZW5kKCksZn0sbG9hZERvY3VtZW50OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmxvYWQoYSxiLGMpLnJlc3BvbnNlVHlwZT0iZG9jdW1lbnQifX0sYS54aHI9YixhLkxvYWRlcj1kfSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEucmVsPT09Z31mdW5jdGlvbiBjKGEpe3ZhciBiLGM9ZChhKTt0cnl7Yj1idG9hKGMpfWNhdGNoKGUpe2I9YnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYykpKSxjb25zb2xlLndhcm4oIlNjcmlwdCBjb250YWluZWQgbm9uLWxhdGluIGNoYXJhY3RlcnMgdGhhdCB3ZXJlIGZvcmNlZCB0byBsYXRpbi4gU29tZSBjaGFyYWN0ZXJzIG1heSBiZSB3cm9uZy4iLGEpfXJldHVybiJkYXRhOnRleHQvamF2YXNjcmlwdDtiYXNlNjQsIitifWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEudGV4dENvbnRlbnQrZShhKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWEuX19ub2RlVXJsO2lmKCFiKXtiPWEub3duZXJEb2N1bWVudC5iYXNlVVJJO3ZhciBjPSJbIitNYXRoLmZsb29yKDFlMyooTWF0aC5yYW5kb20oKSsxKSkrIl0iLGQ9YS50ZXh0Q29udGVudC5tYXRjaCgvUG9seW1lclwoWyciXShbXiciXSopLyk7Yz1kJiZkWzFdfHxjLGIrPSIvIitjKyIuanMifXJldHVybiJcbi8vIyBzb3VyY2VVUkw9IitiKyJcbiJ9ZnVuY3Rpb24gZihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi50ZXh0Q29udGVudD1hLnRleHRDb250ZW50LG4ucmVzb2x2ZVVybHNJblN0eWxlKGIpLGJ9dmFyIGc9ImltcG9ydCIsaD1hLmZsYWdzLGk9L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQsaz17ZG9jdW1lbnRTZWxlY3RvcnM6ImxpbmtbcmVsPSIrZysiXSIsaW1wb3J0c1NlbGVjdG9yczpbImxpbmtbcmVsPSIrZysiXSIsImxpbmtbcmVsPXN0eWxlc2hlZXRdIiwic3R5bGUiLCJzY3JpcHQ6bm90KFt0eXBlXSkiLCdzY3JpcHRbdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXS5qb2luKCIsIiksbWFwOntsaW5rOiJwYXJzZUxpbmsiLHNjcmlwdDoicGFyc2VTY3JpcHQiLHN0eWxlOiJwYXJzZVN0eWxlIn0scGFyc2VOZXh0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5uZXh0VG9QYXJzZSgpO2EmJnRoaXMucGFyc2UoYSl9LHBhcnNlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNQYXJzZWQoYSkpcmV0dXJuIHZvaWQoaC5wYXJzZSYmY29uc29sZS5sb2coIlslc10gaXMgYWxyZWFkeSBwYXJzZWQiLGEubG9jYWxOYW1lKSk7dmFyIGI9dGhpc1t0aGlzLm1hcFthLmxvY2FsTmFtZV1dO2ImJih0aGlzLm1hcmtQYXJzaW5nKGEpLGIuY2FsbCh0aGlzLGEpKX0sbWFya1BhcnNpbmc6ZnVuY3Rpb24oYSl7aC5wYXJzZSYmY29uc29sZS5sb2coInBhcnNpbmciLGEpLHRoaXMucGFyc2luZ0VsZW1lbnQ9YX0sbWFya1BhcnNpbmdDb21wbGV0ZTpmdW5jdGlvbihhKXthLl9faW1wb3J0UGFyc2VkPSEwLGEuX19pbXBvcnRFbGVtZW50JiYoYS5fX2ltcG9ydEVsZW1lbnQuX19pbXBvcnRQYXJzZWQ9ITApLHRoaXMucGFyc2luZ0VsZW1lbnQ9bnVsbCxoLnBhcnNlJiZjb25zb2xlLmxvZygiY29tcGxldGVkIixhKSx0aGlzLnBhcnNlTmV4dCgpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXtpZihhLmltcG9ydC5fX2ltcG9ydFBhcnNlZD0hMCxIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vayYmSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2soYSksYS5kaXNwYXRjaEV2ZW50KGEuX19yZXNvdXJjZT9uZXcgQ3VzdG9tRXZlbnQoImxvYWQiLHtidWJibGVzOiExfSk6bmV3IEN1c3RvbUV2ZW50KCJlcnJvciIse2J1YmJsZXM6ITF9KSksYS5fX3BlbmRpbmcpZm9yKHZhciBiO2EuX19wZW5kaW5nLmxlbmd0aDspYj1hLl9fcGVuZGluZy5zaGlmdCgpLGImJmIoe3RhcmdldDphfSk7dGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGEpfSxwYXJzZUxpbms6ZnVuY3Rpb24oYSl7YihhKT90aGlzLnBhcnNlSW1wb3J0KGEpOihhLmhyZWY9YS5ocmVmLHRoaXMucGFyc2VHZW5lcmljKGEpKX0scGFyc2VTdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hO2E9ZihhKSxhLl9faW1wb3J0RWxlbWVudD1iLHRoaXMucGFyc2VHZW5lcmljKGEpfSxwYXJzZUdlbmVyaWM6ZnVuY3Rpb24oYSl7dGhpcy50cmFja0VsZW1lbnQoYSksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChhKX0sdHJhY2tFbGVtZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWZ1bmN0aW9uKGQpe2ImJmIoZCksYy5tYXJrUGFyc2luZ0NvbXBsZXRlKGEpfTtpZihhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGQpLGEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQpLGkmJiJzdHlsZSI9PT1hLmxvY2FsTmFtZSl7dmFyIGU9ITE7aWYoLTE9PWEudGV4dENvbnRlbnQuaW5kZXhPZigiQGltcG9ydCIpKWU9ITA7ZWxzZSBpZihhLnNoZWV0KXtlPSEwO2Zvcih2YXIgZixnPWEuc2hlZXQuY3NzUnVsZXMsaD1nP2cubGVuZ3RoOjAsaj0wO2g+aiYmKGY9Z1tqXSk7aisrKWYudHlwZT09PUNTU1J1bGUuSU1QT1JUX1JVTEUmJihlPWUmJkJvb2xlYW4oZi5zdHlsZVNoZWV0KSl9ZSYmYS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgibG9hZCIse2J1YmJsZXM6ITF9KSl9fSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLl9faW1wb3J0RWxlbWVudD1iLGQuc3JjPWIuc3JjP2Iuc3JjOmMoYiksYS5jdXJyZW50U2NyaXB0PWIsdGhpcy50cmFja0VsZW1lbnQoZCxmdW5jdGlvbigpe2QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSxhLmN1cnJlbnRTY3JpcHQ9bnVsbH0pLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZCl9LG5leHRUb1BhcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMucGFyc2luZ0VsZW1lbnQmJnRoaXMubmV4dFRvUGFyc2VJbkRvYyhqKX0sbmV4dFRvUGFyc2VJbkRvYzpmdW5jdGlvbihhLGMpe2Zvcih2YXIgZCxlPWEucXVlcnlTZWxlY3RvckFsbCh0aGlzLnBhcnNlU2VsZWN0b3JzRm9yTm9kZShhKSksZj0wLGc9ZS5sZW5ndGg7Zz5mJiYoZD1lW2ZdKTtmKyspaWYoIXRoaXMuaXNQYXJzZWQoZCkpcmV0dXJuIHRoaXMuaGFzUmVzb3VyY2UoZCk/YihkKT90aGlzLm5leHRUb1BhcnNlSW5Eb2MoZC5pbXBvcnQsZCk6ZDp2b2lkIDA7cmV0dXJuIGN9LHBhcnNlU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGE7cmV0dXJuIGI9PT1qP3RoaXMuZG9jdW1lbnRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzU2VsZWN0b3JzfSxpc1BhcnNlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5fX2ltcG9ydFBhcnNlZH0saGFzUmVzb3VyY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSkmJiFhLmltcG9ydD8hMTohMH19LGw9Lyh1cmxcKCkoW14pXSopKFwpKS9nLG09LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLG49e3Jlc29sdmVVcmxzSW5TdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQsYz1iLmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVVcmxzSW5Dc3NUZXh0KGEudGV4dENvbnRlbnQsYyksYX0scmVzb2x2ZVVybHNJbkNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlcGxhY2VVcmxzKGEsYixsKTtyZXR1cm4gYz10aGlzLnJlcGxhY2VVcmxzKGMsYixtKX0scmVwbGFjZVVybHM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnJlcGxhY2UoYyxmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1kLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGIuaHJlZj1mLGY9Yi5ocmVmLGMrIiciK2YrIiciK2V9KX19O2EucGFyc2VyPWssYS5wYXRoPW4sYS5pc0lFPWl9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBjKGEsbSl9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGQoYSxiKXt2YXIgYz1hO2MgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KG0pKSxjLl9VUkw9Yjt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtkLnNldEF0dHJpYnV0ZSgiaHJlZiIsYiksYy5iYXNlVVJJfHwoYy5iYXNlVVJJPWIpO3ZhciBlPWMuY3JlYXRlRWxlbWVudCgibWV0YSIpO3JldHVybiBlLnNldEF0dHJpYnV0ZSgiY2hhcnNldCIsInV0Zi04IiksYy5oZWFkLmFwcGVuZENoaWxkKGUpLGMuaGVhZC5hcHBlbmRDaGlsZChkKSxhIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjLmJvZHkuaW5uZXJIVE1MPWEpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31mdW5jdGlvbiBlKGEsYil7Yj1ifHxuLGcoZnVuY3Rpb24oKXtoKGEsYil9LGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuImNvbXBsZXRlIj09PWEucmVhZHlTdGF0ZXx8YS5yZWFkeVN0YXRlPT09dX1mdW5jdGlvbiBnKGEsYil7aWYoZihiKSlhJiZhKCk7ZWxzZXt2YXIgYz1mdW5jdGlvbigpeygiY29tcGxldGUiPT09Yi5yZWFkeVN0YXRlfHxiLnJlYWR5U3RhdGU9PT11KSYmKGIucmVtb3ZlRXZlbnRMaXN0ZW5lcih2LGMpLGcoYSxiKSl9O2IuYWRkRXZlbnRMaXN0ZW5lcih2LGMpfX1mdW5jdGlvbiBoKGEsYil7ZnVuY3Rpb24gYygpe2Y9PWcmJnJlcXVlc3RBbmltYXRpb25GcmFtZShhKX1mdW5jdGlvbiBkKCl7ZisrLGMoKX12YXIgZT1iLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxmPTAsZz1lLmxlbmd0aDtpZihnKWZvcih2YXIgaCxqPTA7Zz5qJiYoaD1lW2pdKTtqKyspaShoKT9kLmNhbGwoaCk6KGguYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZCksaC5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsZCkpO2Vsc2UgYygpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGs/YS5pbXBvcnQmJiJsb2FkaW5nIiE9PWEuaW1wb3J0LnJlYWR5U3RhdGU6YS5fX2ltcG9ydFBhcnNlZH12YXIgaj0iaW1wb3J0ImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKSxrPWosbD1hLmZsYWdzLG09ImltcG9ydCIsbj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/U2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKGRvY3VtZW50KTpkb2N1bWVudDtpZihrKXZhciBvPXt9O2Vsc2UgdmFyIHA9KGEueGhyLGEuTG9hZGVyKSxxPWEucGFyc2VyLG89e2RvY3VtZW50czp7fSxkb2N1bWVudFByZWxvYWRTZWxlY3RvcnM6ImxpbmtbcmVsPSIrbSsiXSIsaW1wb3J0c1ByZWxvYWRTZWxlY3RvcnM6WyJsaW5rW3JlbD0iK20rIl0iXS5qb2luKCIsIiksbG9hZE5vZGU6ZnVuY3Rpb24oYSl7ci5hZGROb2RlKGEpfSxsb2FkU3VidHJlZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcnNoYWxOb2RlcyhhKTtyLmFkZE5vZGVzKGIpfSxtYXJzaGFsTm9kZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvckFsbCh0aGlzLmxvYWRTZWxlY3RvcnNGb3JOb2RlKGEpKX0sbG9hZFNlbGVjdG9yc0Zvck5vZGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vd25lckRvY3VtZW50fHxhO3JldHVybiBiPT09bj90aGlzLmRvY3VtZW50UHJlbG9hZFNlbGVjdG9yczp0aGlzLmltcG9ydHNQcmVsb2FkU2VsZWN0b3JzfSxsb2FkZWQ6ZnVuY3Rpb24oYSxjLGUpe2lmKGwubG9hZCYmY29uc29sZS5sb2coImxvYWRlZCIsYSxjKSxjLl9fcmVzb3VyY2U9ZSxiKGMpKXt2YXIgZj10aGlzLmRvY3VtZW50c1thXTtmfHwoZj1kKGUsYSksZi5fX2ltcG9ydExpbms9Yyx0aGlzLmJvb3REb2N1bWVudChmKSx0aGlzLmRvY3VtZW50c1thXT1mKSxjLmltcG9ydD1mfXEucGFyc2VOZXh0KCl9LGJvb3REb2N1bWVudDpmdW5jdGlvbihhKXt0aGlzLmxvYWRTdWJ0cmVlKGEpLHRoaXMub2JzZXJ2ZShhKSxxLnBhcnNlTmV4dCgpfSxsb2FkZWRBbGw6ZnVuY3Rpb24oKXtxLnBhcnNlTmV4dCgpfX0scj1uZXcgcChvLmxvYWRlZC5iaW5kKG8pLG8ubG9hZGVkQWxsLmJpbmQobykpO3ZhciBzPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSFRNTEltcG9ydHMuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQuY3VycmVudFNjcmlwdH0sY29uZmlndXJhYmxlOiEwfTtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsIl9jdXJyZW50U2NyaXB0IixzKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX2N1cnJlbnRTY3JpcHQiLHMpLCFkb2N1bWVudC5iYXNlVVJJKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5ocmVmfSxjb25maWd1cmFibGU6ITB9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudCwiYmFzZVVSSSIsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sImJhc2VVUkkiLHQpfXZhciB1PUhUTUxJbXBvcnRzLmlzSUU/ImNvbXBsZXRlIjoiaW50ZXJhY3RpdmUiLHY9InJlYWR5c3RhdGVjaGFuZ2UiO2EuaGFzTmF0aXZlPWosYS51c2VOYXRpdmU9ayxhLmltcG9ydGVyPW8sYS53aGVuSW1wb3J0c1JlYWR5PWUsYS5JTVBPUlRfTElOS19UWVBFPW0sYS5pc0ltcG9ydExvYWRlZD1pLGEuaW1wb3J0TG9hZGVyPXJ9KHdpbmRvdy5IVE1MSW1wb3J0cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGIsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYj1hW2RdKTtkKyspImNoaWxkTGlzdCI9PT1iLnR5cGUmJmIuYWRkZWROb2Rlcy5sZW5ndGgmJmMoYi5hZGRlZE5vZGVzKX1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYixlPTAsZz1hLmxlbmd0aDtnPmUmJihiPWFbZV0pO2UrKylkKGIpJiZmLmxvYWROb2RlKGIpLGIuY2hpbGRyZW4mJmIuY2hpbGRyZW4ubGVuZ3RoJiZjKGIuY2hpbGRyZW4pfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlJiZnLmNhbGwoYSxmLmxvYWRTZWxlY3RvcnNGb3JOb2RlKGEpKX1mdW5jdGlvbiBlKGEpe2gub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfXZhciBmPShhLklNUE9SVF9MSU5LX1RZUEUsYS5pbXBvcnRlciksZz1IVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc3x8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yLGg9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoYik7YS5vYnNlcnZlPWUsZi5vYnNlcnZlPWV9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5pbXBvcnRlci5ib290RG9jdW1lbnQoYil9ImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGMuaW5pdEV2ZW50KGEsYi5idWJibGVzPT09ITE/ITE6ITAsYi5jYW5jZWxhYmxlPT09ITE/ITE6ITAsYi5kZXRhaWwpLGN9KTt2YXIgYj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe0hUTUxJbXBvcnRzLnJlYWR5PSEwLEhUTUxJbXBvcnRzLnJlYWR5VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxiLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJIVE1MSW1wb3J0c0xvYWRlZCIse2J1YmJsZXM6ITB9KSl9KSxIVE1MSW1wb3J0cy51c2VOYXRpdmV8fCgiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8ImludGVyYWN0aXZlIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJiF3aW5kb3cuYXR0YWNoRXZlbnQ/YSgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEpKX0oKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxjLGQpe3ZhciBlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7aWYoIWUpZm9yKGU9YS5maXJzdENoaWxkO2UmJmUubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspZT1lLm5leHRTaWJsaW5nO2Zvcig7ZTspYyhlLGQpIT09ITAmJmIoZSxjLGQpLGU9ZS5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhhLGIpe2Zvcih2YXIgYz1hLnNoYWRvd1Jvb3Q7YzspZChjLGIpLGM9Yy5vbGRlclNoYWRvd1Jvb3R9ZnVuY3Rpb24gZChhLGQpe2IoYSxmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8hMDp2b2lkIGMoYSxkKX0pLGMoYSxkKX1mdW5jdGlvbiBlKGEpe3JldHVybiBoKGEpPyhpKGEpLCEwKTp2b2lkIGwoYSl9ZnVuY3Rpb24gZihhKXtkKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSk/ITA6dm9pZCAwfSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gZShhKXx8ZihhKX1mdW5jdGlvbiBoKGIpe2lmKCFiLl9fdXBncmFkZWRfXyYmYi5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgiaXMiKXx8Yi5sb2NhbE5hbWUsZD1hLnJlZ2lzdHJ5W2NdO2lmKGQpcmV0dXJuIEEuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpLCEwfX1mdW5jdGlvbiBpKGEpe2woYSkscihhKSYmZChhLGZ1bmN0aW9uKGEpe2woYSl9KX1mdW5jdGlvbiBqKGEpe2lmKEUucHVzaChhKSwhRCl7RD0hMDt2YXIgYj13aW5kb3cuUGxhdGZvcm0mJndpbmRvdy5QbGF0Zm9ybS5lbmRPZk1pY3JvdGFza3x8c2V0VGltZW91dDtiKGspfX1mdW5jdGlvbiBrKCl7RD0hMTtmb3IodmFyIGEsYj1FLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWEoKTtFPVtdfWZ1bmN0aW9uIGwoYSl7Qz9qKGZ1bmN0aW9uKCl7bShhKX0pOm0oYSl9ZnVuY3Rpb24gbShhKXsoYS5hdHRhY2hlZENhbGxiYWNrfHxhLmRldGFjaGVkQ2FsbGJhY2t8fGEuX191cGdyYWRlZF9fJiZBLmRvbSkmJihBLmRvbSYmY29uc29sZS5ncm91cCgiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSkscihhKSYmKGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKSsxLGEuX19pbnNlcnRlZDwxJiYoYS5fX2luc2VydGVkPTEpLGEuX19pbnNlcnRlZD4xP0EuZG9tJiZjb25zb2xlLndhcm4oImluc2VydGVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuYXR0YWNoZWRDYWxsYmFjayYmKEEuZG9tJiZjb25zb2xlLmxvZygiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSksYS5hdHRhY2hlZENhbGxiYWNrKCkpKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpKX1mdW5jdGlvbiBuKGEpe28oYSksZChhLGZ1bmN0aW9uKGEpe28oYSl9KX1mdW5jdGlvbiBvKGEpe0M/aihmdW5jdGlvbigpe3AoYSl9KTpwKGEpfWZ1bmN0aW9uIHAoYSl7KGEuYXR0YWNoZWRDYWxsYmFja3x8YS5kZXRhY2hlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmQS5kb20pJiYoQS5kb20mJmNvbnNvbGUuZ3JvdXAoInJlbW92ZWQ6IixhLmxvY2FsTmFtZSkscihhKXx8KGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKS0xLGEuX19pbnNlcnRlZD4wJiYoYS5fX2luc2VydGVkPTApLGEuX19pbnNlcnRlZDwwP0EuZG9tJiZjb25zb2xlLndhcm4oInJlbW92ZWQ6IixhLmxvY2FsTmFtZSwiaW5zZXJ0L3JlbW92ZSBjb3VudDoiLGEuX19pbnNlcnRlZCk6YS5kZXRhY2hlZENhbGxiYWNrJiZhLmRldGFjaGVkQ2FsbGJhY2soKSksQS5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gcShhKXtyZXR1cm4gd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKTphfWZ1bmN0aW9uIHIoYSl7Zm9yKHZhciBiPWEsYz1xKGRvY3VtZW50KTtiOyl7aWYoYj09YylyZXR1cm4hMDtiPWIucGFyZW50Tm9kZXx8Yi5ob3N0fX1mdW5jdGlvbiBzKGEpe2lmKGEuc2hhZG93Um9vdCYmIWEuc2hhZG93Um9vdC5fX3dhdGNoZWQpe0EuZG9tJiZjb25zb2xlLmxvZygid2F0Y2hpbmcgc2hhZG93LXJvb3QgZm9yOiAiLGEubG9jYWxOYW1lKTtmb3IodmFyIGI9YS5zaGFkb3dSb290O2I7KXQoYiksYj1iLm9sZGVyU2hhZG93Um9vdH19ZnVuY3Rpb24gdChhKXthLl9fd2F0Y2hlZHx8KHcoYSksYS5fX3dhdGNoZWQ9ITApfWZ1bmN0aW9uIHUoYSl7aWYoQS5kb20pe3ZhciBiPWFbMF07aWYoYiYmImNoaWxkTGlzdCI9PT1iLnR5cGUmJmIuYWRkZWROb2RlcyYmYi5hZGRlZE5vZGVzKXtmb3IodmFyIGM9Yi5hZGRlZE5vZGVzWzBdO2MmJmMhPT1kb2N1bWVudCYmIWMuaG9zdDspYz1jLnBhcmVudE5vZGU7dmFyIGQ9YyYmKGMuVVJMfHxjLl9VUkx8fGMuaG9zdCYmYy5ob3N0LmxvY2FsTmFtZSl8fCIiO2Q9ZC5zcGxpdCgiLz8iKS5zaGlmdCgpLnNwbGl0KCIvIikucG9wKCl9Y29uc29sZS5ncm91cCgibXV0YXRpb25zICglZCkgWyVzXSIsYS5sZW5ndGgsZHx8IiIpfWEuZm9yRWFjaChmdW5jdGlvbihhKXsiY2hpbGRMaXN0Ij09PWEudHlwZSYmKEcoYS5hZGRlZE5vZGVzLGZ1bmN0aW9uKGEpe2EubG9jYWxOYW1lJiZnKGEpfSksRyhhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmbihhKX0pKX0pLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gdigpe3UoRi50YWtlUmVjb3JkcygpKSxrKCl9ZnVuY3Rpb24gdyhhKXtGLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX1mdW5jdGlvbiB4KGEpe3coYSl9ZnVuY3Rpb24geShhKXtBLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZURvY3VtZW50OiAiLGEuYmFzZVVSSS5zcGxpdCgiLyIpLnBvcCgpKSxnKGEpLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24geihhKXthPXEoYSk7Zm9yKHZhciBiLGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK0IrIl0iKSxkPTAsZT1jLmxlbmd0aDtlPmQmJihiPWNbZF0pO2QrKyliLmltcG9ydCYmYi5pbXBvcnQuX19wYXJzZWQmJnooYi5pbXBvcnQpO3koYSl9dmFyIEE9d2luZG93LmxvZ0ZsYWdzfHx7fSxCPXdpbmRvdy5IVE1MSW1wb3J0cz9IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOiJub25lIixDPSF3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9PT13aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyO2EuaGFzUG9seWZpbGxNdXRhdGlvbnM9Qzt2YXIgRD0hMSxFPVtdLEY9bmV3IE11dGF0aW9uT2JzZXJ2ZXIodSksRz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EuSU1QT1JUX0xJTktfVFlQRT1CLGEud2F0Y2hTaGFkb3c9cyxhLnVwZ3JhZGVEb2N1bWVudFRyZWU9eixhLnVwZ3JhZGVBbGw9ZyxhLnVwZ3JhZGVTdWJ0cmVlPWYsYS5pbnNlcnRlZE5vZGU9aSxhLm9ic2VydmVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50PXksYS50YWtlUmVjb3Jkcz12fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixnKXt2YXIgaD1nfHx7fTtpZighYil0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgYG5hbWVgIG11c3Qgbm90IGJlIGVtcHR5Iik7aWYoYi5pbmRleE9mKCItIik8MCl0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgKCduYW1lJykgbXVzdCBjb250YWluIGEgZGFzaCAoJy0nKS4gQXJndW1lbnQgcHJvdmlkZWQgd2FzICciK1N0cmluZyhiKSsiJy4iKTtpZihjKGIpKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGV4ZWN1dGUgJ3JlZ2lzdGVyRWxlbWVudCcgb24gJ0RvY3VtZW50JzogUmVnaXN0cmF0aW9uIGZhaWxlZCBmb3IgdHlwZSAnIitTdHJpbmcoYikrIicuIFRoZSB0eXBlIG5hbWUgaXMgaW52YWxpZC4iKTtpZihuKGIpKXRocm93IG5ldyBFcnJvcigiRHVwbGljYXRlRGVmaW5pdGlvbkVycm9yOiBhIHR5cGUgd2l0aCBuYW1lICciK1N0cmluZyhiKSsiJyBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQiKTtpZighaC5wcm90b3R5cGUpdGhyb3cgbmV3IEVycm9yKCJPcHRpb25zIG1pc3NpbmcgcmVxdWlyZWQgcHJvdG90eXBlIHByb3BlcnR5Iik7cmV0dXJuIGguX19uYW1lPWIudG9Mb3dlckNhc2UoKSxoLmxpZmVjeWNsZT1oLmxpZmVjeWNsZXx8e30saC5hbmNlc3RyeT1kKGguZXh0ZW5kcyksZShoKSxmKGgpLGwoaC5wcm90b3R5cGUpLG8oaC5fX25hbWUsaCksaC5jdG9yPXAoaCksaC5jdG9yLnByb3RvdHlwZT1oLnByb3RvdHlwZSxoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oLmN0b3IsYS5yZWFkeSYmYS51cGdyYWRlRG9jdW1lbnRUcmVlKGRvY3VtZW50KSxoLmN0b3J9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9MDtiPHkubGVuZ3RoO2IrKylpZihhPT09eVtiXSlyZXR1cm4hMH1mdW5jdGlvbiBkKGEpe3ZhciBiPW4oYSk7cmV0dXJuIGI/ZChiLmV4dGVuZHMpLmNvbmNhdChbYl0pOltdfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiLGM9YS5leHRlbmRzLGQ9MDtiPWEuYW5jZXN0cnlbZF07ZCsrKWM9Yi5pcyYmYi50YWc7YS50YWc9Y3x8YS5fX25hbWUsYyYmKGEuaXM9YS5fX25hbWUpfWZ1bmN0aW9uIGYoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKTtiPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKX1mb3IodmFyIGQsZT1hLnByb3RvdHlwZTtlJiZlIT09Yjspe3ZhciBkPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtlLl9fcHJvdG9fXz1kLGU9ZH19YS5uYXRpdmU9Yn1mdW5jdGlvbiBnKGEpe3JldHVybiBoKEIoYS50YWcpLGEpfWZ1bmN0aW9uIGgoYixjKXtyZXR1cm4gYy5pcyYmYi5zZXRBdHRyaWJ1dGUoImlzIixjLmlzKSxiLnJlbW92ZUF0dHJpYnV0ZSgidW5yZXNvbHZlZCIpLGkoYixjKSxiLl9fdXBncmFkZWRfXz0hMCxrKGIpLGEuaW5zZXJ0ZWROb2RlKGIpLGEudXBncmFkZVN1YnRyZWUoYiksYn1mdW5jdGlvbiBpKGEsYil7T2JqZWN0Ll9fcHJvdG9fXz9hLl9fcHJvdG9fXz1iLnByb3RvdHlwZTooaihhLGIucHJvdG90eXBlLGIubmF0aXZlKSxhLl9fcHJvdG9fXz1iLnByb3RvdHlwZSl9ZnVuY3Rpb24gaihhLGIsYyl7Zm9yKHZhciBkPXt9LGU9YjtlIT09YyYmZSE9PUhUTUxFbGVtZW50LnByb3RvdHlwZTspe2Zvcih2YXIgZixnPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLGg9MDtmPWdbaF07aCsrKWRbZl18fChPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxmLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxmKSksZFtmXT0xKTtlPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKX19ZnVuY3Rpb24gayhhKXthLmNyZWF0ZWRDYWxsYmFjayYmYS5jcmVhdGVkQ2FsbGJhY2soKX1mdW5jdGlvbiBsKGEpe2lmKCFhLnNldEF0dHJpYnV0ZS5fcG9seWZpbGxlZCl7dmFyIGI9YS5zZXRBdHRyaWJ1dGU7YS5zZXRBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxjKXttLmNhbGwodGhpcyxhLGMsYil9O3ZhciBjPWEucmVtb3ZlQXR0cmlidXRlO2EucmVtb3ZlQXR0cmlidXRlPWZ1bmN0aW9uKGEpe20uY2FsbCh0aGlzLGEsbnVsbCxjKX0sYS5zZXRBdHRyaWJ1dGUuX3BvbHlmaWxsZWQ9ITB9fWZ1bmN0aW9uIG0oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0QXR0cmlidXRlKGEpO2MuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlPXRoaXMuZ2V0QXR0cmlidXRlKGEpO3RoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrJiZlIT09ZCYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYSxkLGUpfWZ1bmN0aW9uIG4oYSl7cmV0dXJuIGE/elthLnRvTG93ZXJDYXNlKCldOnZvaWQgMH1mdW5jdGlvbiBvKGEsYil7elthXT1ifWZ1bmN0aW9uIHAoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGcoYSl9fWZ1bmN0aW9uIHEoYSxiLGMpe3JldHVybiBhPT09QT9yKGIsYyk6QyhhLGIpfWZ1bmN0aW9uIHIoYSxiKXt2YXIgYz1uKGJ8fGEpO2lmKGMpe2lmKGE9PWMudGFnJiZiPT1jLmlzKXJldHVybiBuZXcgYy5jdG9yO2lmKCFiJiYhYy5pcylyZXR1cm4gbmV3IGMuY3Rvcn1pZihiKXt2YXIgZD1yKGEpO3JldHVybiBkLnNldEF0dHJpYnV0ZSgiaXMiLGIpLGR9dmFyIGQ9QihhKTtyZXR1cm4gYS5pbmRleE9mKCItIik+PTAmJmkoZCxIVE1MRWxlbWVudCksZH1mdW5jdGlvbiBzKGEpe2lmKCFhLl9fdXBncmFkZWRfXyYmYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYj1hLmdldEF0dHJpYnV0ZSgiaXMiKSxjPW4oYnx8YS5sb2NhbE5hbWUpO2lmKGMpe2lmKGImJmMudGFnPT1hLmxvY2FsTmFtZSlyZXR1cm4gaChhLGMpO2lmKCFiJiYhYy5leHRlbmRzKXJldHVybiBoKGEsYyl9fX1mdW5jdGlvbiB0KGIpe3ZhciBjPUQuY2FsbCh0aGlzLGIpO3JldHVybiBhLnVwZ3JhZGVBbGwoYyksY31hfHwoYT13aW5kb3cuQ3VzdG9tRWxlbWVudHM9e2ZsYWdzOnt9fSk7dmFyIHU9YS5mbGFncyx2PUJvb2xlYW4oZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KSx3PSF1LnJlZ2lzdGVyJiZ2JiYhd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsO2lmKHcpe3ZhciB4PWZ1bmN0aW9uKCl7fTthLnJlZ2lzdHJ5PXt9LGEudXBncmFkZUVsZW1lbnQ9eCxhLndhdGNoU2hhZG93PXgsYS51cGdyYWRlPXgsYS51cGdyYWRlQWxsPXgsYS51cGdyYWRlU3VidHJlZT14LGEub2JzZXJ2ZURvY3VtZW50PXgsYS51cGdyYWRlRG9jdW1lbnQ9eCxhLnVwZ3JhZGVEb2N1bWVudFRyZWU9eCxhLnRha2VSZWNvcmRzPXgsYS5yZXNlcnZlZFRhZ0xpc3Q9W119ZWxzZXt2YXIgeT1bImFubm90YXRpb24teG1sIiwiY29sb3ItcHJvZmlsZSIsImZvbnQtZmFjZSIsImZvbnQtZmFjZS1zcmMiLCJmb250LWZhY2UtdXJpIiwiZm9udC1mYWNlLWZvcm1hdCIsImZvbnQtZmFjZS1uYW1lIiwibWlzc2luZy1nbHlwaCJdLHo9e30sQT0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsQj1kb2N1bWVudC5jcmVhdGVFbGVtZW50LmJpbmQoZG9jdW1lbnQpLEM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TLmJpbmQoZG9jdW1lbnQpLEQ9Tm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlO2RvY3VtZW50LnJlZ2lzdGVyRWxlbWVudD1iLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQ9cixkb2N1bWVudC5jcmVhdGVFbGVtZW50TlM9cSxOb2RlLnByb3RvdHlwZS5jbG9uZU5vZGU9dCxhLnJlZ2lzdHJ5PXosYS51cGdyYWRlPXN9dmFyIEU7RT1PYmplY3QuX19wcm90b19ffHx3P2Z1bmN0aW9uKGEsYil7cmV0dXJuIGEgaW5zdGFuY2VvZiBifTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hO2M7KXtpZihjPT09Yi5wcm90b3R5cGUpcmV0dXJuITA7Yz1jLl9fcHJvdG9fX31yZXR1cm4hMX0sYS5pbnN0YW5jZW9mPUUsYS5yZXNlcnZlZFRhZ0xpc3Q9eSxkb2N1bWVudC5yZWdpc3Rlcj1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQsYS5oYXNOYXRpdmU9dixhLnVzZU5hdGl2ZT13fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWN9dmFyIGM9YS5JTVBPUlRfTElOS19UWVBFLGQ9e3NlbGVjdG9yczpbImxpbmtbcmVsPSIrYysiXSJdLG1hcDp7bGluazoicGFyc2VMaW5rIn0scGFyc2U6ZnVuY3Rpb24oYSl7aWYoIWEuX19wYXJzZWQpe2EuX19wYXJzZWQ9ITA7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGQuc2VsZWN0b3JzKTtlKGIsZnVuY3Rpb24oYSl7ZFtkLm1hcFthLmxvY2FsTmFtZV1dKGEpfSksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGEpLEN1c3RvbUVsZW1lbnRzLm9ic2VydmVEb2N1bWVudChhKX19LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpJiZ0aGlzLnBhcnNlSW1wb3J0KGEpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihhKXthLmltcG9ydCYmZC5wYXJzZShhLmltcG9ydCl9fSxlPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS5wYXJzZXI9ZCxhLklNUE9SVF9MSU5LX1RZUEU9Y30od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoZG9jdW1lbnQpO3ZhciBhPXdpbmRvdy5QbGF0Zm9ybSYmUGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s/UGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s6c2V0VGltZW91dDthKGZ1bmN0aW9uKCl7Q3VzdG9tRWxlbWVudHMucmVhZHk9ITAsQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lPURhdGUubm93KCksd2luZG93LkhUTUxJbXBvcnRzJiYoQ3VzdG9tRWxlbWVudHMuZWxhcHNlZD1DdXN0b21FbGVtZW50cy5yZWFkeVRpbWUtSFRNTEltcG9ydHMucmVhZHlUaW1lKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiV2ViQ29tcG9uZW50c1JlYWR5Iix7YnViYmxlczohMH0pKSx3aW5kb3cuSFRNTEltcG9ydHMmJihIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vaz1mdW5jdGlvbihhKXtDdXN0b21FbGVtZW50cy5wYXJzZXIucGFyc2UoYS5pbXBvcnQpfSl9KX1pZigiZnVuY3Rpb24iIT10eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50JiYod2luZG93LkN1c3RvbUV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGIuaW5pdEV2ZW50KGEsITAsITApLGJ9KSwiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8YS5mbGFncy5lYWdlciliKCk7ZWxzZSBpZigiaW50ZXJhY3RpdmUiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8d2luZG93LmF0dGFjaEV2ZW50fHx3aW5kb3cuSFRNTEltcG9ydHMmJiF3aW5kb3cuSFRNTEltcG9ydHMucmVhZHkpe3ZhciBjPXdpbmRvdy5IVE1MSW1wb3J0cyYmIUhUTUxJbXBvcnRzLnJlYWR5PyJIVE1MSW1wb3J0c0xvYWRlZCI6IkRPTUNvbnRlbnRMb2FkZWQiO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKGMsYil9ZWxzZSBiKCl9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oKXtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe3ZhciBhPVsidXBncmFkZUFsbCIsInVwZ3JhZGVTdWJ0cmVlIiwib2JzZXJ2ZURvY3VtZW50IiwidXBncmFkZURvY3VtZW50Il0sYj17fTthLmZvckVhY2goZnVuY3Rpb24oYSl7YlthXT1DdXN0b21FbGVtZW50c1thXX0pLGEuZm9yRWFjaChmdW5jdGlvbihhKXtDdXN0b21FbGVtZW50c1thXT1mdW5jdGlvbihjKXtyZXR1cm4gYlthXSh3cmFwKGMpKX19KX19KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt0aGlzLnJlZ2V4PWF9dmFyIGM9YS5lbmRPZk1pY3JvdGFzaztiLnByb3RvdHlwZT17ZXh0cmFjdFVybHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPVtdO2M9dGhpcy5yZWdleC5leGVjKGEpOylkPW5ldyBVUkwoY1sxXSxiKSxlLnB1c2goe21hdGNoZWQ6Y1swXSx1cmw6ZC5ocmVmfSk7cmV0dXJuIGV9LHByb2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZXh0cmFjdFVybHMoYSxiKTt0aGlzLmZldGNoKGQse30sYyl9LGZldGNoOmZ1bmN0aW9uKGEsYixkKXt2YXIgZT1hLmxlbmd0aDtpZighZSlyZXR1cm4gZChiKTtmb3IodmFyIGYsZyxoLGk9ZnVuY3Rpb24oKXswPT09LS1lJiZkKGIpfSxqPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yy5tYXRjaCxlPWQudXJsO2lmKGEpcmV0dXJuIGJbZV09IiIsaSgpOwp2YXIgZj1jLnJlc3BvbnNlfHxjLnJlc3BvbnNlVGV4dDtiW2VdPWYsdGhpcy5mZXRjaCh0aGlzLmV4dHJhY3RVcmxzKGYsZSksYixpKX0saz0wO2U+aztrKyspZj1hW2tdLGg9Zi51cmwsYltoXT9jKGkpOihnPXRoaXMueGhyKGgsaix0aGlzKSxnLm1hdGNoPWYsYltoXT1nKX0seGhyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuIGQub3BlbigiR0VUIixhLCEwKSxkLnNlbmQoKSxkLm9ubG9hZD1mdW5jdGlvbigpe2IuY2FsbChjLG51bGwsZCl9LGQub25lcnJvcj1mdW5jdGlvbigpe2IuY2FsbChjLG51bGwsZCl9LGR9fSxhLkxvYWRlcj1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLmxvYWRlcj1uZXcgZCh0aGlzLnJlZ2V4KX12YXIgYz1hLnVybFJlc29sdmVyLGQ9YS5Mb2FkZXI7Yi5wcm90b3R5cGU9e3JlZ2V4Oi9AaW1wb3J0XHMrKD86dXJsKT9bIidcKF0qKFteJyJcKV0qKVsnIlwpXSo7L2cscmVzb2x2ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oZCl7Yyh0aGlzLmZsYXR0ZW4oYSxiLGQpKX0uYmluZCh0aGlzKTt0aGlzLmxvYWRlci5wcm9jZXNzKGEsYixkKX0scmVzb2x2ZU5vZGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRleHRDb250ZW50LGQ9YS5vd25lckRvY3VtZW50LmJhc2VVUkksZT1mdW5jdGlvbihjKXthLnRleHRDb250ZW50PWMsYihhKX07dGhpcy5yZXNvbHZlKGMsZCxlKX0sZmxhdHRlbjpmdW5jdGlvbihhLGIsZCl7Zm9yKHZhciBlLGYsZyxoPXRoaXMubG9hZGVyLmV4dHJhY3RVcmxzKGEsYiksaT0wO2k8aC5sZW5ndGg7aSsrKWU9aFtpXSxmPWUudXJsLGc9Yy5yZXNvbHZlQ3NzVGV4dChkW2ZdLGYpLGc9dGhpcy5mbGF0dGVuKGcsZixkKSxhPWEucmVwbGFjZShlLm1hdGNoZWQsZyk7cmV0dXJuIGF9LGxvYWRTdHlsZXM6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7ZSsrLGU9PT1mJiZiJiZiKCl9Zm9yKHZhciBkLGU9MCxmPWEubGVuZ3RoLGc9MDtmPmcmJihkPWFbZ10pO2crKyl0aGlzLnJlc29sdmVOb2RlKGQsYyl9fTt2YXIgZT1uZXcgYjthLnN0eWxlUmVzb2x2ZXI9ZX0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXthPWF8fHt9LGEuZXh0ZXJuYWw9YS5leHRlcm5hbHx8e307dmFyIGI9e3NoYWRvdzpmdW5jdGlvbihhKXtyZXR1cm4gYT9hLnNoYWRvd1Jvb3R8fGEud2Via2l0U2hhZG93Um9vdDp2b2lkIDB9LGNhblRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gYSYmQm9vbGVhbihhLmVsZW1lbnRGcm9tUG9pbnQpfSx0YXJnZXRpbmdTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zaGFkb3coYSk7cmV0dXJuIHRoaXMuY2FuVGFyZ2V0KGIpP2I6dm9pZCAwfSxvbGRlclNoYWRvdzpmdW5jdGlvbihhKXt2YXIgYj1hLm9sZGVyU2hhZG93Um9vdDtpZighYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yKCJzaGFkb3ciKTtjJiYoYj1jLm9sZGVyU2hhZG93Um9vdCl9cmV0dXJuIGJ9LGFsbFNoYWRvd3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9dGhpcy5zaGFkb3coYSk7YzspYi5wdXNoKGMpLGM9dGhpcy5vbGRlclNoYWRvdyhjKTtyZXR1cm4gYn0sc2VhcmNoUm9vdDpmdW5jdGlvbihhLGIsYyl7aWYoYSl7dmFyIGQsZSxmPWEuZWxlbWVudEZyb21Qb2ludChiLGMpO2ZvcihlPXRoaXMudGFyZ2V0aW5nU2hhZG93KGYpO2U7KXtpZihkPWUuZWxlbWVudEZyb21Qb2ludChiLGMpKXt2YXIgZz10aGlzLnRhcmdldGluZ1NoYWRvdyhkKTtyZXR1cm4gdGhpcy5zZWFyY2hSb290KGcsYixjKXx8ZH1lPXRoaXMub2xkZXJTaGFkb3coZSl9cmV0dXJuIGZ9fSxvd25lcjpmdW5jdGlvbihhKXtmb3IodmFyIGI9YTtiLnBhcmVudE5vZGU7KWI9Yi5wYXJlbnROb2RlO3JldHVybiBiLm5vZGVUeXBlIT1Ob2RlLkRPQ1VNRU5UX05PREUmJmIubm9kZVR5cGUhPU5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSYmKGI9ZG9jdW1lbnQpLGJ9LGZpbmRUYXJnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5jbGllbnRYLGM9YS5jbGllbnRZLGQ9dGhpcy5vd25lcihhLnRhcmdldCk7cmV0dXJuIGQuZWxlbWVudEZyb21Qb2ludChiLGMpfHwoZD1kb2N1bWVudCksdGhpcy5zZWFyY2hSb290KGQsYixjKX19O2EudGFyZ2V0RmluZGluZz1iLGEuZmluZFRhcmdldD1iLmZpbmRUYXJnZXQuYmluZChiKSx3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsPWF9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4iYm9keSAvc2hhZG93LWRlZXAvICIrYihhKX1mdW5jdGlvbiBiKGEpe3JldHVybidbdG91Y2gtYWN0aW9uPSInK2ErJyJdJ31mdW5jdGlvbiBjKGEpe3JldHVybiJ7IC1tcy10b3VjaC1hY3Rpb246ICIrYSsiOyB0b3VjaC1hY3Rpb246ICIrYSsiOyB0b3VjaC1hY3Rpb24tZGVsYXk6IG5vbmU7IH0ifXZhciBkPVsibm9uZSIsImF1dG8iLCJwYW4teCIsInBhbi15Iix7cnVsZToicGFuLXggcGFuLXkiLHNlbGVjdG9yczpbInBhbi14IHBhbi15IiwicGFuLXkgcGFuLXgiXX1dLGU9IiIsZj0oZG9jdW1lbnQuaGVhZCx3aW5kb3cuUG9pbnRlckV2ZW50fHx3aW5kb3cuTVNQb2ludGVyRXZlbnQpLGc9IXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmZG9jdW1lbnQuaGVhZC5jcmVhdGVTaGFkb3dSb290O2lmKGYpe2QuZm9yRWFjaChmdW5jdGlvbihkKXtTdHJpbmcoZCk9PT1kPyhlKz1iKGQpK2MoZCkrIlxuIixnJiYoZSs9YShkKStjKGQpKyJcbiIpKTooZSs9ZC5zZWxlY3RvcnMubWFwKGIpK2MoZC5ydWxlKSsiXG4iLGcmJihlKz1kLnNlbGVjdG9ycy5tYXAoYSkrYyhkLnJ1bGUpKyJcbiIpKX0pO3ZhciBoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7aC50ZXh0Q29udGVudD1lLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoaCl9fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtiPWJ8fE9iamVjdC5jcmVhdGUobnVsbCk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50Iik7ZS5pbml0RXZlbnQoYSxiLmJ1YmJsZXN8fCExLGIuY2FuY2VsYWJsZXx8ITEpO2Zvcih2YXIgZixnPTA7ZzxjLmxlbmd0aDtnKyspZj1jW2ddLGVbZl09YltmXXx8ZFtnXTtlLmJ1dHRvbnM9Yi5idXR0b25zfHwwO3ZhciBoPTA7cmV0dXJuIGg9Yi5wcmVzc3VyZT9iLnByZXNzdXJlOmUuYnV0dG9ucz8uNTowLGUueD1lLmNsaWVudFgsZS55PWUuY2xpZW50WSxlLnBvaW50ZXJJZD1iLnBvaW50ZXJJZHx8MCxlLndpZHRoPWIud2lkdGh8fDAsZS5oZWlnaHQ9Yi5oZWlnaHR8fDAsZS5wcmVzc3VyZT1oLGUudGlsdFg9Yi50aWx0WHx8MCxlLnRpbHRZPWIudGlsdFl8fDAsZS5wb2ludGVyVHlwZT1iLnBvaW50ZXJUeXBlfHwiIixlLmh3VGltZXN0YW1wPWIuaHdUaW1lc3RhbXB8fDAsZS5pc1ByaW1hcnk9Yi5pc1ByaW1hcnl8fCExLGV9dmFyIGM9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiLCJwYWdlWCIsInBhZ2VZIl0sZD1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMF07YS5Qb2ludGVyRXZlbnR8fChhLlBvaW50ZXJFdmVudD1iKX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoYyl7dmFyIGE9bmV3IE1hcDtyZXR1cm4gYS5wb2ludGVycz1kLGF9dGhpcy5rZXlzPVtdLHRoaXMudmFsdWVzPVtdfXZhciBjPXdpbmRvdy5NYXAmJndpbmRvdy5NYXAucHJvdG90eXBlLmZvckVhY2gsZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9O2IucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTtjPi0xP3RoaXMudmFsdWVzW2NdPWI6KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMua2V5cy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnZhbHVlc1tiXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmtleXMubGVuZ3RoPTAsdGhpcy52YWx1ZXMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLmtleXNbZF0sdGhpcyl9LHRoaXMpfSxwb2ludGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleXMubGVuZ3RofX0sYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPVsiYnViYmxlcyIsImNhbmNlbGFibGUiLCJ2aWV3IiwiZGV0YWlsIiwic2NyZWVuWCIsInNjcmVlblkiLCJjbGllbnRYIiwiY2xpZW50WSIsImN0cmxLZXkiLCJhbHRLZXkiLCJzaGlmdEtleSIsIm1ldGFLZXkiLCJidXR0b24iLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9ucyIsInBvaW50ZXJJZCIsIndpZHRoIiwiaGVpZ2h0IiwicHJlc3N1cmUiLCJ0aWx0WCIsInRpbHRZIiwicG9pbnRlclR5cGUiLCJod1RpbWVzdGFtcCIsImlzUHJpbWFyeSIsInR5cGUiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0Iiwid2hpY2giLCJwYWdlWCIsInBhZ2VZIl0sYz1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMCwwLDAsMCwwLDAsIiIsMCwhMSwiIixudWxsLG51bGwsMCwwLDBdLGQ9InVuZGVmaW5lZCIhPXR5cGVvZiBTVkdFbGVtZW50SW5zdGFuY2UsZT17cG9pbnRlcm1hcDpuZXcgYS5Qb2ludGVyTWFwLGV2ZW50TWFwOk9iamVjdC5jcmVhdGUobnVsbCksY2FwdHVyZUluZm86T2JqZWN0LmNyZWF0ZShudWxsKSxldmVudFNvdXJjZXM6T2JqZWN0LmNyZWF0ZShudWxsKSxldmVudFNvdXJjZUxpc3Q6W10scmVnaXN0ZXJTb3VyY2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLGQ9Yy5ldmVudHM7ZCYmKGQuZm9yRWFjaChmdW5jdGlvbihhKXtjW2FdJiYodGhpcy5ldmVudE1hcFthXT1jW2FdLmJpbmQoYykpfSx0aGlzKSx0aGlzLmV2ZW50U291cmNlc1thXT1jLHRoaXMuZXZlbnRTb3VyY2VMaXN0LnB1c2goYykpfSxyZWdpc3RlcjpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmV2ZW50U291cmNlTGlzdC5sZW5ndGgsZD0wO2M+ZCYmKGI9dGhpcy5ldmVudFNvdXJjZUxpc3RbZF0pO2QrKyliLnJlZ2lzdGVyLmNhbGwoYixhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmV2ZW50U291cmNlTGlzdC5sZW5ndGgsZD0wO2M+ZCYmKGI9dGhpcy5ldmVudFNvdXJjZUxpc3RbZF0pO2QrKyliLnVucmVnaXN0ZXIuY2FsbChiLGEpfSxjb250YWluczphLmV4dGVybmFsLmNvbnRhaW5zfHxmdW5jdGlvbihhLGIpe3JldHVybiBhLmNvbnRhaW5zKGIpfSxkb3duOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcmRvd24iLGEpfSxtb3ZlOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcm1vdmUiLGEpfSx1cDpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITAsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJ1cCIsYSl9LGVudGVyOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMSx0aGlzLmZpcmVFdmVudCgicG9pbnRlcmVudGVyIixhKX0sbGVhdmU6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSExLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVybGVhdmUiLGEpfSxvdmVyOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcm92ZXIiLGEpfSxvdXQ6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSEwLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyb3V0IixhKX0sY2FuY2VsOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcmNhbmNlbCIsYSl9LGxlYXZlT3V0OmZ1bmN0aW9uKGEpe3RoaXMub3V0KGEpLHRoaXMuY29udGFpbnMoYS50YXJnZXQsYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5sZWF2ZShhKX0sZW50ZXJPdmVyOmZ1bmN0aW9uKGEpe3RoaXMub3ZlcihhKSx0aGlzLmNvbnRhaW5zKGEudGFyZ2V0LGEucmVsYXRlZFRhcmdldCl8fHRoaXMuZW50ZXIoYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighYS5faGFuZGxlZEJ5UEUpe3ZhciBiPWEudHlwZSxjPXRoaXMuZXZlbnRNYXAmJnRoaXMuZXZlbnRNYXBbYl07YyYmYyhhKSxhLl9oYW5kbGVkQnlQRT0hMH19LGxpc3RlbjpmdW5jdGlvbihhLGIpe2IuZm9yRWFjaChmdW5jdGlvbihiKXt0aGlzLmFkZEV2ZW50KGEsYil9LHRoaXMpfSx1bmxpc3RlbjpmdW5jdGlvbihhLGIpe2IuZm9yRWFjaChmdW5jdGlvbihiKXt0aGlzLnJlbW92ZUV2ZW50KGEsYil9LHRoaXMpfSxhZGRFdmVudDphLmV4dGVybmFsLmFkZEV2ZW50fHxmdW5jdGlvbihhLGIpe2EuYWRkRXZlbnRMaXN0ZW5lcihiLHRoaXMuYm91bmRIYW5kbGVyKX0scmVtb3ZlRXZlbnQ6YS5leHRlcm5hbC5yZW1vdmVFdmVudHx8ZnVuY3Rpb24oYSxiKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoYix0aGlzLmJvdW5kSGFuZGxlcil9LG1ha2VFdmVudDpmdW5jdGlvbihhLGIpe3RoaXMuY2FwdHVyZUluZm9bYi5wb2ludGVySWRdJiYoYi5yZWxhdGVkVGFyZ2V0PW51bGwpO3ZhciBjPW5ldyBQb2ludGVyRXZlbnQoYSxiKTtyZXR1cm4gYi5wcmV2ZW50RGVmYXVsdCYmKGMucHJldmVudERlZmF1bHQ9Yi5wcmV2ZW50RGVmYXVsdCksYy5fdGFyZ2V0PWMuX3RhcmdldHx8Yi50YXJnZXQsY30sZmlyZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tYWtlRXZlbnQoYSxiKTtyZXR1cm4gdGhpcy5kaXNwYXRjaEV2ZW50KGMpfSxjbG9uZUV2ZW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgZSxmPU9iamVjdC5jcmVhdGUobnVsbCksZz0wO2c8Yi5sZW5ndGg7ZysrKWU9YltnXSxmW2VdPWFbZV18fGNbZ10sIWR8fCJ0YXJnZXQiIT09ZSYmInJlbGF0ZWRUYXJnZXQiIT09ZXx8ZltlXWluc3RhbmNlb2YgU1ZHRWxlbWVudEluc3RhbmNlJiYoZltlXT1mW2VdLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KTtyZXR1cm4gYS5wcmV2ZW50RGVmYXVsdCYmKGYucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXthLnByZXZlbnREZWZhdWx0KCl9KSxmfSxnZXRUYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2FwdHVyZUluZm9bYS5wb2ludGVySWRdfHxhLl90YXJnZXR9LHNldENhcHR1cmU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhcHR1cmVJbmZvW2FdJiZ0aGlzLnJlbGVhc2VDYXB0dXJlKGEpLHRoaXMuY2FwdHVyZUluZm9bYV09Yjt2YXIgYz1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKTtjLmluaXRFdmVudCgiZ290cG9pbnRlcmNhcHR1cmUiLCEwLCExKSxjLnBvaW50ZXJJZD1hLHRoaXMuaW1wbGljaXRSZWxlYXNlPXRoaXMucmVsZWFzZUNhcHR1cmUuYmluZCh0aGlzLGEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJjYW5jZWwiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSxjLl90YXJnZXQ9Yix0aGlzLmFzeW5jRGlzcGF0Y2hFdmVudChjKX0scmVsZWFzZUNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jYXB0dXJlSW5mb1thXTtpZihiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKTtjLmluaXRFdmVudCgibG9zdHBvaW50ZXJjYXB0dXJlIiwhMCwhMSksYy5wb2ludGVySWQ9YSx0aGlzLmNhcHR1cmVJbmZvW2FdPXZvaWQgMCxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyY2FuY2VsIix0aGlzLmltcGxpY2l0UmVsZWFzZSksYy5fdGFyZ2V0PWIsdGhpcy5hc3luY0Rpc3BhdGNoRXZlbnQoYyl9fSxkaXNwYXRjaEV2ZW50OmEuZXh0ZXJuYWwuZGlzcGF0Y2hFdmVudHx8ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRUYXJnZXQoYSk7cmV0dXJuIGI/Yi5kaXNwYXRjaEV2ZW50KGEpOnZvaWQgMH0sYXN5bmNEaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3JlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmRpc3BhdGNoRXZlbnQuYmluZCh0aGlzLGEpKX19O2UuYm91bmRIYW5kbGVyPWUuZXZlbnRIYW5kbGVyLmJpbmQoZSksYS5kaXNwYXRjaGVyPWUsYS5yZWdpc3Rlcj1lLnJlZ2lzdGVyLmJpbmQoZSksYS51bnJlZ2lzdGVyPWUudW5yZWdpc3Rlci5iaW5kKGUpfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjLGQpe3RoaXMuYWRkQ2FsbGJhY2s9YS5iaW5kKGQpLHRoaXMucmVtb3ZlQ2FsbGJhY2s9Yi5iaW5kKGQpLHRoaXMuY2hhbmdlZENhbGxiYWNrPWMuYmluZChkKSxnJiYodGhpcy5vYnNlcnZlcj1uZXcgZyh0aGlzLm11dGF0aW9uV2F0Y2hlci5iaW5kKHRoaXMpKSl9dmFyIGM9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxkPUFycmF5LnByb3RvdHlwZS5tYXAuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5tYXApLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuc2xpY2UpLGY9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZpbHRlciksZz13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsaD0iW3RvdWNoLWFjdGlvbl0iLGk9e3N1YnRyZWU6ITAsY2hpbGRMaXN0OiEwLGF0dHJpYnV0ZXM6ITAsYXR0cmlidXRlT2xkVmFsdWU6ITAsYXR0cmlidXRlRmlsdGVyOlsidG91Y2gtYWN0aW9uIl19O2IucHJvdG90eXBlPXt3YXRjaFN1YnRyZWU6ZnVuY3Rpb24oYil7YS50YXJnZXRGaW5kaW5nLmNhblRhcmdldChiKSYmdGhpcy5vYnNlcnZlci5vYnNlcnZlKGIsaSl9LGVuYWJsZU9uU3VidHJlZTpmdW5jdGlvbihhKXt0aGlzLndhdGNoU3VidHJlZShhKSxhPT09ZG9jdW1lbnQmJiJjb21wbGV0ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlP3RoaXMuaW5zdGFsbE9uTG9hZCgpOnRoaXMuaW5zdGFsbE5ld1N1YnRyZWUoYSl9LGluc3RhbGxOZXdTdWJ0cmVlOmZ1bmN0aW9uKGEpe2ModGhpcy5maW5kRWxlbWVudHMoYSksdGhpcy5hZGRFbGVtZW50LHRoaXMpfSxmaW5kRWxlbWVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoaCk6W119LHJlbW92ZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVDYWxsYmFjayhhKX0sYWRkRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLmFkZENhbGxiYWNrKGEpfSxlbGVtZW50Q2hhbmdlZDpmdW5jdGlvbihhLGIpe3RoaXMuY2hhbmdlZENhbGxiYWNrKGEsYil9LGNvbmNhdExpc3RzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29uY2F0KGUoYikpfSxpbnN0YWxsT25Mb2FkOmZ1bmN0aW9uKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsZnVuY3Rpb24oKXsiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmdGhpcy5pbnN0YWxsTmV3U3VidHJlZShkb2N1bWVudCl9LmJpbmQodGhpcykpfSxpc0VsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERX0sZmxhdHRlbk11dGF0aW9uVHJlZTpmdW5jdGlvbihhKXt2YXIgYj1kKGEsdGhpcy5maW5kRWxlbWVudHMsdGhpcyk7cmV0dXJuIGIucHVzaChmKGEsdGhpcy5pc0VsZW1lbnQpKSxiLnJlZHVjZSh0aGlzLmNvbmNhdExpc3RzLFtdKX0sbXV0YXRpb25XYXRjaGVyOmZ1bmN0aW9uKGEpe2EuZm9yRWFjaCh0aGlzLm11dGF0aW9uSGFuZGxlcix0aGlzKX0sbXV0YXRpb25IYW5kbGVyOmZ1bmN0aW9uKGEpe2lmKCJjaGlsZExpc3QiPT09YS50eXBlKXt2YXIgYj10aGlzLmZsYXR0ZW5NdXRhdGlvblRyZWUoYS5hZGRlZE5vZGVzKTtiLmZvckVhY2godGhpcy5hZGRFbGVtZW50LHRoaXMpO3ZhciBjPXRoaXMuZmxhdHRlbk11dGF0aW9uVHJlZShhLnJlbW92ZWROb2Rlcyk7Yy5mb3JFYWNoKHRoaXMucmVtb3ZlRWxlbWVudCx0aGlzKX1lbHNlImF0dHJpYnV0ZXMiPT09YS50eXBlJiZ0aGlzLmVsZW1lbnRDaGFuZ2VkKGEudGFyZ2V0LGEub2xkVmFsdWUpfX0sZ3x8KGIucHJvdG90eXBlLndhdGNoU3VidHJlZT1mdW5jdGlvbigpe2NvbnNvbGUud2FybigiUG9pbnRlckV2ZW50c1BvbHlmaWxsOiBNdXRhdGlvbk9ic2VydmVycyBub3QgZm91bmQsIHRvdWNoLWFjdGlvbiB3aWxsIG5vdCBiZSBkeW5hbWljYWxseSBkZXRlY3RlZCIpfSksYS5JbnN0YWxsZXI9Yn0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9MjUsZT1bMCwxLDQsMl0sZj0hMTt0cnl7Zj0xPT09bmV3IE1vdXNlRXZlbnQoInRlc3QiLHtidXR0b25zOjF9KS5idXR0b25zfWNhdGNoKGcpe312YXIgaD17UE9JTlRFUl9JRDoxLFBPSU5URVJfVFlQRToibW91c2UiLGV2ZW50czpbIm1vdXNlZG93biIsIm1vdXNlbW92ZSIsIm1vdXNldXAiLCJtb3VzZW92ZXIiLCJtb3VzZW91dCJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LGxhc3RUb3VjaGVzOltdLGlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2g6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5sYXN0VG91Y2hlcyxlPWEuY2xpZW50WCxmPWEuY2xpZW50WSxnPTAsaD1jLmxlbmd0aDtoPmcmJihiPWNbZ10pO2crKyl7dmFyIGk9TWF0aC5hYnMoZS1iLngpLGo9TWF0aC5hYnMoZi1iLnkpO2lmKGQ+PWkmJmQ+PWopcmV0dXJuITB9fSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5jbG9uZUV2ZW50KGEpLGQ9Yy5wcmV2ZW50RGVmYXVsdDtyZXR1cm4gYy5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2EucHJldmVudERlZmF1bHQoKSxkKCl9LGMucG9pbnRlcklkPXRoaXMuUE9JTlRFUl9JRCxjLmlzUHJpbWFyeT0hMCxjLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFLGZ8fChjLmJ1dHRvbnM9ZVtjLndoaWNoXXx8MCksY30sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuaGFzKHRoaXMuUE9JTlRFUl9JRCk7ZCYmdGhpcy5jYW5jZWwoYSk7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yy5zZXQodGhpcy5QT0lOVEVSX0lELGEpLGIuZG93bihlKX19LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9fSxtb3VzZXVwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuZ2V0KHRoaXMuUE9JTlRFUl9JRCk7aWYoZCYmZC5idXR0b249PT1hLmJ1dHRvbil7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi51cChlKSx0aGlzLmNsZWFudXBNb3VzZSgpfX19LG1vdXNlb3ZlcjpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmVudGVyT3ZlcihjKX19LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9fSxjYW5jZWw6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5jYW5jZWwoYyksdGhpcy5jbGVhbnVwTW91c2UoKX0sY2xlYW51cE1vdXNlOmZ1bmN0aW9uKCl7Y1siZGVsZXRlIl0odGhpcy5QT0lOVEVSX0lEKX19O2EubW91c2VFdmVudHM9aH0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGIsYz1hLmRpc3BhdGNoZXIsZD1jLmNhcHR1cmVJbmZvLGU9YS5maW5kVGFyZ2V0LGY9YS50YXJnZXRGaW5kaW5nLmFsbFNoYWRvd3MuYmluZChhLnRhcmdldEZpbmRpbmcpLGc9Yy5wb2ludGVybWFwLGg9KEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5tYXApLDI1MDApLGk9MjAwLGo9InRvdWNoLWFjdGlvbiIsaz0hMSxsPXtldmVudHM6WyJ0b3VjaHN0YXJ0IiwidG91Y2htb3ZlIiwidG91Y2hlbmQiLCJ0b3VjaGNhbmNlbCJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2s/Yy5saXN0ZW4oYSx0aGlzLmV2ZW50cyk6Yi5lbmFibGVPblN1YnRyZWUoYSl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7ayYmYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sZWxlbWVudEFkZGVkOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKGopLGQ9dGhpcy50b3VjaEFjdGlvblRvU2Nyb2xsVHlwZShiKTtkJiYoYS5fc2Nyb2xsVHlwZT1kLGMubGlzdGVuKGEsdGhpcy5ldmVudHMpLGYoYSkuZm9yRWFjaChmdW5jdGlvbihhKXthLl9zY3JvbGxUeXBlPWQsYy5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHRoaXMpKX0sZWxlbWVudFJlbW92ZWQ6ZnVuY3Rpb24oYSl7YS5fc2Nyb2xsVHlwZT12b2lkIDAsYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKSxmKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7YS5fc2Nyb2xsVHlwZT12b2lkIDAsYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcyl9LGVsZW1lbnRDaGFuZ2VkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoaiksZD10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGMpLGU9dGhpcy50b3VjaEFjdGlvblRvU2Nyb2xsVHlwZShiKTtkJiZlPyhhLl9zY3JvbGxUeXBlPWQsZihhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuX3Njcm9sbFR5cGU9ZH0sdGhpcykpOmU/dGhpcy5lbGVtZW50UmVtb3ZlZChhKTpkJiZ0aGlzLmVsZW1lbnRBZGRlZChhKX0sc2Nyb2xsVHlwZXM6e0VNSVRURVI6Im5vbmUiLFhTQ1JPTExFUjoicGFuLXgiLFlTQ1JPTExFUjoicGFuLXkiLFNDUk9MTEVSOi9eKD86cGFuLXggcGFuLXkpfCg/OnBhbi15IHBhbi14KXxhdXRvJC99LHRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWEsYz10aGlzLnNjcm9sbFR5cGVzO3JldHVybiJub25lIj09PWI/Im5vbmUiOmI9PT1jLlhTQ1JPTExFUj8iWCI6Yj09PWMuWVNDUk9MTEVSPyJZIjpjLlNDUk9MTEVSLmV4ZWMoYik/IlhZIjp2b2lkIDB9LFBPSU5URVJfVFlQRToidG91Y2giLGZpcnN0VG91Y2g6bnVsbCxpc1ByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5maXJzdFRvdWNoPT09YS5pZGVudGlmaWVyfSxzZXRQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7KDA9PT1nLnBvaW50ZXJzKCl8fDE9PT1nLnBvaW50ZXJzKCkmJmcuaGFzKDEpKSYmKHRoaXMuZmlyc3RUb3VjaD1hLmlkZW50aWZpZXIsdGhpcy5maXJzdFhZPXtYOmEuY2xpZW50WCxZOmEuY2xpZW50WX0sdGhpcy5zY3JvbGxpbmc9ITEsdGhpcy5jYW5jZWxSZXNldENsaWNrQ291bnQoKSl9LHJlbW92ZVByaW1hcnlQb2ludGVyOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYodGhpcy5maXJzdFRvdWNoPW51bGwsdGhpcy5maXJzdFhZPW51bGwsdGhpcy5yZXNldENsaWNrQ291bnQoKSl9LGNsaWNrQ291bnQ6MCxyZXNldElkOm51bGwscmVzZXRDbGlja0NvdW50OmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oKXt0aGlzLmNsaWNrQ291bnQ9MCx0aGlzLnJlc2V0SWQ9bnVsbH0uYmluZCh0aGlzKTt0aGlzLnJlc2V0SWQ9c2V0VGltZW91dChhLGkpfSxjYW5jZWxSZXNldENsaWNrQ291bnQ6ZnVuY3Rpb24oKXt0aGlzLnJlc2V0SWQmJmNsZWFyVGltZW91dCh0aGlzLnJlc2V0SWQpfSx0eXBlVG9CdXR0b25zOmZ1bmN0aW9uKGEpe3ZhciBiPTA7cmV0dXJuKCJ0b3VjaHN0YXJ0Ij09PWF8fCJ0b3VjaG1vdmUiPT09YSkmJihiPTEpLGJ9LHRvdWNoVG9Qb2ludGVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3VycmVudFRvdWNoRXZlbnQsZj1jLmNsb25lRXZlbnQoYSksZz1mLnBvaW50ZXJJZD1hLmlkZW50aWZpZXIrMjtmLnRhcmdldD1kW2ddfHxlKGYpLGYuYnViYmxlcz0hMCxmLmNhbmNlbGFibGU9ITAsZi5kZXRhaWw9dGhpcy5jbGlja0NvdW50LGYuYnV0dG9uPTAsZi5idXR0b25zPXRoaXMudHlwZVRvQnV0dG9ucyhiLnR5cGUpLGYud2lkdGg9YS53ZWJraXRSYWRpdXNYfHxhLnJhZGl1c1h8fDAsZi5oZWlnaHQ9YS53ZWJraXRSYWRpdXNZfHxhLnJhZGl1c1l8fDAsZi5wcmVzc3VyZT1hLndlYmtpdEZvcmNlfHxhLmZvcmNlfHwuNSxmLmlzUHJpbWFyeT10aGlzLmlzUHJpbWFyeVRvdWNoKGEpLGYucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEU7dmFyIGg9dGhpcztyZXR1cm4gZi5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2guc2Nyb2xsaW5nPSExLGguZmlyc3RYWT1udWxsLGIucHJldmVudERlZmF1bHQoKX0sZn0scHJvY2Vzc1RvdWNoZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNoYW5nZWRUb3VjaGVzO3RoaXMuY3VycmVudFRvdWNoRXZlbnQ9YTtmb3IodmFyIGQsZT0wO2U8Yy5sZW5ndGg7ZSsrKWQ9Y1tlXSxiLmNhbGwodGhpcyx0aGlzLnRvdWNoVG9Qb2ludGVyKGQpKX0sc2hvdWxkU2Nyb2xsOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZmlyc3RYWSl7dmFyIGIsYz1hLmN1cnJlbnRUYXJnZXQuX3Njcm9sbFR5cGU7aWYoIm5vbmUiPT09YyliPSExO2Vsc2UgaWYoIlhZIj09PWMpYj0hMDtlbHNle3ZhciBkPWEuY2hhbmdlZFRvdWNoZXNbMF0sZT1jLGY9IlkiPT09Yz8iWCI6IlkiLGc9TWF0aC5hYnMoZFsiY2xpZW50IitlXS10aGlzLmZpcnN0WFlbZV0pLGg9TWF0aC5hYnMoZFsiY2xpZW50IitmXS10aGlzLmZpcnN0WFlbZl0pO2I9Zz49aH1yZXR1cm4gdGhpcy5maXJzdFhZPW51bGwsYn19LGZpbmRUb3VjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKylpZihjLmlkZW50aWZpZXI9PT1iKXJldHVybiEwfSx2YWN1dW1Ub3VjaGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcztpZihnLnBvaW50ZXJzKCk+PWIubGVuZ3RoKXt2YXIgYz1bXTtnLmZvckVhY2goZnVuY3Rpb24oYSxkKXtpZigxIT09ZCYmIXRoaXMuZmluZFRvdWNoKGIsZC0yKSl7dmFyIGU9YS5vdXQ7Yy5wdXNoKGUpfX0sdGhpcyksYy5mb3JFYWNoKHRoaXMuY2FuY2VsT3V0LHRoaXMpfX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnZhY3V1bVRvdWNoZXMoYSksdGhpcy5zZXRQcmltYXJ5VG91Y2goYS5jaGFuZ2VkVG91Y2hlc1swXSksdGhpcy5kZWR1cFN5bnRoTW91c2UoYSksdGhpcy5zY3JvbGxpbmd8fCh0aGlzLmNsaWNrQ291bnQrKyx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy5vdmVyRG93bikpfSxvdmVyRG93bjpmdW5jdGlvbihhKXtnLnNldChhLnBvaW50ZXJJZCx7dGFyZ2V0OmEudGFyZ2V0LG91dDphLG91dFRhcmdldDphLnRhcmdldH0pO2Mub3ZlcihhKSxjLmVudGVyKGEpLGMuZG93bihhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsaW5nfHwodGhpcy5zaG91bGRTY3JvbGwoYSk/KHRoaXMuc2Nyb2xsaW5nPSEwLHRoaXMudG91Y2hjYW5jZWwoYSkpOihhLnByZXZlbnREZWZhdWx0KCksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZU92ZXJPdXQpKSl9LG1vdmVPdmVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEsZD1nLmdldChiLnBvaW50ZXJJZCk7aWYoZCl7dmFyIGU9ZC5vdXQsZj1kLm91dFRhcmdldDtjLm1vdmUoYiksZSYmZiE9PWIudGFyZ2V0JiYoZS5yZWxhdGVkVGFyZ2V0PWIudGFyZ2V0LGIucmVsYXRlZFRhcmdldD1mLGUudGFyZ2V0PWYsYi50YXJnZXQ/KGMubGVhdmVPdXQoZSksYy5lbnRlck92ZXIoYikpOihiLnRhcmdldD1mLGIucmVsYXRlZFRhcmdldD1udWxsLHRoaXMuY2FuY2VsT3V0KGIpKSksZC5vdXQ9YixkLm91dFRhcmdldD1iLnRhcmdldH19LHRvdWNoZW5kOmZ1bmN0aW9uKGEpe3RoaXMuZGVkdXBTeW50aE1vdXNlKGEpLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLnVwT3V0KX0sdXBPdXQ6ZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxpbmd8fChjLnVwKGEpLGMub3V0KGEpLGMubGVhdmUoYSkpLHRoaXMuY2xlYW5VcFBvaW50ZXIoYSl9LHRvdWNoY2FuY2VsOmZ1bmN0aW9uKGEpe3RoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLmNhbmNlbE91dCl9LGNhbmNlbE91dDpmdW5jdGlvbihhKXtjLmNhbmNlbChhKSxjLm91dChhKSxjLmxlYXZlKGEpLHRoaXMuY2xlYW5VcFBvaW50ZXIoYSl9LGNsZWFuVXBQb2ludGVyOmZ1bmN0aW9uKGEpe2dbImRlbGV0ZSJdKGEucG9pbnRlcklkKSx0aGlzLnJlbW92ZVByaW1hcnlQb2ludGVyKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxkPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChkKSl7dmFyIGU9e3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZfTtjLnB1c2goZSk7dmFyIGY9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZSk7c2V0VGltZW91dChmLGgpfX19O2t8fChiPW5ldyBhLkluc3RhbGxlcihsLmVsZW1lbnRBZGRlZCxsLmVsZW1lbnRSZW1vdmVkLGwuZWxlbWVudENoYW5nZWQsbCkpLGEudG91Y2hFdmVudHM9bH0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyT3V0IiwiTVNQb2ludGVyT3ZlciIsIk1TUG9pbnRlckNhbmNlbCIsIk1TR290UG9pbnRlckNhcHR1cmUiLCJNU0xvc3RQb2ludGVyQ2FwdHVyZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LFBPSU5URVJfVFlQRVM6WyIiLCJ1bmF2YWlsYWJsZSIsInRvdWNoIiwicGVuIiwibW91c2UiXSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9YTtyZXR1cm4gZCYmKGM9Yi5jbG9uZUV2ZW50KGEpLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEVTW2EucG9pbnRlclR5cGVdKSxjfSxjbGVhbnVwOmZ1bmN0aW9uKGEpe2NbImRlbGV0ZSJdKGEpfSxNU1BvaW50ZXJEb3duOmZ1bmN0aW9uKGEpe2Muc2V0KGEucG9pbnRlcklkLGEpO3ZhciBkPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZG93bihkKX0sTVNQb2ludGVyTW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9LE1TUG9pbnRlclVwOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IudXAoYyksdGhpcy5jbGVhbnVwKGEucG9pbnRlcklkKX0sTVNQb2ludGVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9LE1TUG9pbnRlck92ZXI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5lbnRlck92ZXIoYyl9LE1TUG9pbnRlckNhbmNlbDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmNhbmNlbChjKSx0aGlzLmNsZWFudXAoYS5wb2ludGVySWQpfSxNU0xvc3RQb2ludGVyQ2FwdHVyZTpmdW5jdGlvbihhKXt2YXIgYz1iLm1ha2VFdmVudCgibG9zdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9LE1TR290UG9pbnRlckNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5tYWtlRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9fTthLm1zRXZlbnRzPWV9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcjtpZih3aW5kb3cuUG9pbnRlckV2ZW50IT09YS5Qb2ludGVyRXZlbnQpe2lmKHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCl7dmFyIGM9d2luZG93Lm5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cubmF2aWdhdG9yLCJtYXhUb3VjaFBvaW50cyIse3ZhbHVlOmMsZW51bWVyYWJsZTohMH0pLGIucmVnaXN0ZXJTb3VyY2UoIm1zIixhLm1zRXZlbnRzKX1lbHNlIGIucmVnaXN0ZXJTb3VyY2UoIm1vdXNlIixhLm1vdXNlRXZlbnRzKSx2b2lkIDAhPT13aW5kb3cub250b3VjaHN0YXJ0JiZiLnJlZ2lzdGVyU291cmNlKCJ0b3VjaCIsYS50b3VjaEV2ZW50cyk7Yi5yZWdpc3Rlcihkb2N1bWVudCl9fSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2lmKCFlLnBvaW50ZXJtYXAuaGFzKGEpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZFBvaW50ZXJJZCIpfXZhciBjLGQsZT1hLmRpc3BhdGNoZXIsZj13aW5kb3cubmF2aWdhdG9yO2YubXNQb2ludGVyRW5hYmxlZD8oYz1mdW5jdGlvbihhKXtiKGEpLHRoaXMubXNTZXRQb2ludGVyQ2FwdHVyZShhKX0sZD1mdW5jdGlvbihhKXtiKGEpLHRoaXMubXNSZWxlYXNlUG9pbnRlckNhcHR1cmUoYSl9KTooYz1mdW5jdGlvbihhKXtiKGEpLGUuc2V0Q2FwdHVyZShhLHRoaXMpfSxkPWZ1bmN0aW9uKGEpe2IoYSksZS5yZWxlYXNlQ2FwdHVyZShhLHRoaXMpfSksd2luZG93LkVsZW1lbnQmJiFFbGVtZW50LnByb3RvdHlwZS5zZXRQb2ludGVyQ2FwdHVyZSYmT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRWxlbWVudC5wcm90b3R5cGUse3NldFBvaW50ZXJDYXB0dXJlOnt2YWx1ZTpjfSxyZWxlYXNlUG9pbnRlckNhcHR1cmU6e3ZhbHVlOmR9fSl9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLFBvaW50ZXJHZXN0dXJlRXZlbnQucHJvdG90eXBlLnByZXZlbnRUYXA9ZnVuY3Rpb24oKXt0aGlzLnRhcFByZXZlbnRlZD0hMH0sZnVuY3Rpb24oYSl7YT1hfHx7fSxhLnV0aWxzPXtMQ0E6e2ZpbmQ6ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gYTtpZihhLmNvbnRhaW5zKXtpZihhLmNvbnRhaW5zKGIpKXJldHVybiBhO2lmKGIuY29udGFpbnMoYSkpcmV0dXJuIGJ9dmFyIGM9dGhpcy5kZXB0aChhKSxkPXRoaXMuZGVwdGgoYiksZT1jLWQ7Zm9yKGU+MD9hPXRoaXMud2FsayhhLGUpOmI9dGhpcy53YWxrKGIsLWUpO2EmJmImJmEhPT1iOylhPXRoaXMud2FsayhhLDEpLGI9dGhpcy53YWxrKGIsMSk7cmV0dXJuIGF9LHdhbGs6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7YysrKWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxkZXB0aDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDthOyliKyssYT1hLnBhcmVudE5vZGU7cmV0dXJuIGJ9fX0sYS5maW5kTENBPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEudXRpbHMuTENBLmZpbmQoYixjKX0sd2luZG93LlBvaW50ZXJHZXN0dXJlcz1hfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoYyl7dmFyIGE9bmV3IE1hcDtyZXR1cm4gYS5wb2ludGVycz1kLGF9dGhpcy5rZXlzPVtdLHRoaXMudmFsdWVzPVtdfXZhciBjPXdpbmRvdy5NYXAmJndpbmRvdy5NYXAucHJvdG90eXBlLmZvckVhY2gsZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9O2IucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTtjPi0xP3RoaXMudmFsdWVzW2NdPWI6KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMua2V5cy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnZhbHVlc1tiXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmtleXMubGVuZ3RoPTAsdGhpcy52YWx1ZXMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLmtleXNbZF0sdGhpcyl9LHRoaXMpfSxwb2ludGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleXMubGVuZ3RofX0sYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPVsiYnViYmxlcyIsImNhbmNlbGFibGUiLCJ2aWV3IiwiZGV0YWlsIiwic2NyZWVuWCIsInNjcmVlblkiLCJjbGllbnRYIiwiY2xpZW50WSIsImN0cmxLZXkiLCJhbHRLZXkiLCJzaGlmdEtleSIsIm1ldGFLZXkiLCJidXR0b24iLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9ucyIsInBvaW50ZXJJZCIsIndpZHRoIiwiaGVpZ2h0IiwicHJlc3N1cmUiLCJ0aWx0WCIsInRpbHRZIiwicG9pbnRlclR5cGUiLCJod1RpbWVzdGFtcCIsImlzUHJpbWFyeSIsInR5cGUiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0Iiwic2NyZWVuWCIsInNjcmVlblkiLCJwYWdlWCIsInBhZ2VZIiwidGFwUHJldmVudGVkIl0sYz1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMCwwLDAsMCwwLDAsIiIsMCwhMSwiIixudWxsLG51bGwsMCwwLDAsMF0sZD17aGFuZGxlZEV2ZW50czpuZXcgV2Vha01hcCx0YXJnZXRzOm5ldyBXZWFrTWFwLGhhbmRsZXJzOnt9LHJlY29nbml6ZXJzOnt9LGV2ZW50czp7fSxyZWdpc3RlclJlY29nbml6ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iO3RoaXMucmVjb2duaXplcnNbYV09YyxjLmV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKGNbYV0pe3RoaXMuZXZlbnRzW2FdPSEwO3ZhciBiPWNbYV0uYmluZChjKTt0aGlzLmFkZEhhbmRsZXIoYSxiKX19LHRoaXMpfSxhZGRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTt0aGlzLmhhbmRsZXJzW2NdfHwodGhpcy5oYW5kbGVyc1tjXT1bXSksdGhpcy5oYW5kbGVyc1tjXS5wdXNoKGIpfSxyZWdpc3RlclRhcmdldDpmdW5jdGlvbihhKXt0aGlzLmxpc3RlbihPYmplY3Qua2V5cyh0aGlzLmV2ZW50cyksYSl9LHVucmVnaXN0ZXJUYXJnZXQ6ZnVuY3Rpb24oYSl7dGhpcy51bmxpc3RlbihPYmplY3Qua2V5cyh0aGlzLmV2ZW50cyksYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGI9YS50eXBlLGM9dGhpcy5oYW5kbGVyc1tiXTtjJiZ0aGlzLm1ha2VRdWV1ZShjLGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxtYWtlUXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNsb25lRXZlbnQoYik7cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucnVuUXVldWUuYmluZCh0aGlzLGEsYykpfSxydW5RdWV1ZTpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBvaW50ZXJJZD1iLnBvaW50ZXJJZDtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspYyhiKTt0aGlzLmN1cnJlbnRQb2ludGVySWQ9MH0sbGlzdGVuOmZ1bmN0aW9uKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuYWRkRXZlbnQoYSx0aGlzLmJvdW5kSGFuZGxlciwhMSxiKX0sdGhpcyl9LHVubGlzdGVuOmZ1bmN0aW9uKGEpe2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUV2ZW50KGEsdGhpcy5ib3VuZEhhbmRsZXIsITEsaW5UYXJnZXQpfSx0aGlzKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRFdmVudExpc3RlbmVyKGEsYixjKX0scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYixjKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBQb2ludGVyR2VzdHVyZUV2ZW50KGEsYil9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBkLGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKWQ9YltmXSxlW2RdPWFbZF18fGNbZl07cmV0dXJuIGV9LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHx0aGlzLnRhcmdldHMuZ2V0KGEpO2MmJihjLmRpc3BhdGNoRXZlbnQoYSksYS50YXBQcmV2ZW50ZWQmJnRoaXMucHJldmVudFRhcCh0aGlzLmN1cnJlbnRQb2ludGVySWQpKX0sYXN5bmNEaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEsYil7cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZGlzcGF0Y2hFdmVudC5iaW5kKHRoaXMsYSxiKSl9LHByZXZlbnRUYXA6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yZWNvZ25pemVycy50YXA7YiYmYi5wcmV2ZW50VGFwKGEpfX07ZC5ib3VuZEhhbmRsZXI9ZC5ldmVudEhhbmRsZXIuYmluZChkKSxkLnJlZ2lzdGVyUXVldWU9W10sZC5pbW1lZGlhdGVSZWdpc3Rlcj0hMSxhLmRpc3BhdGNoZXI9ZCxhLnJlZ2lzdGVyPWZ1bmN0aW9uKGIpe2lmKGQuaW1tZWRpYXRlUmVnaXN0ZXIpe3ZhciBjPXdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGw7YyYmYy5yZWdpc3RlcihiKSxhLmRpc3BhdGNoZXIucmVnaXN0ZXJUYXJnZXQoYil9ZWxzZSBkLnJlZ2lzdGVyUXVldWUucHVzaChiKX0sYS5yZWdpc3Rlcihkb2N1bWVudCl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPXtIT0xEX0RFTEFZOjIwMCxXSUdHTEVfVEhSRVNIT0xEOjE2LGV2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0saGVsZFBvaW50ZXI6bnVsbCxob2xkSm9iOm51bGwscHVsc2U6ZnVuY3Rpb24oKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMuaGVsZFBvaW50ZXIudGltZVN0YW1wLGI9dGhpcy5oZWxkPyJob2xkcHVsc2UiOiJob2xkIjt0aGlzLmZpcmVIb2xkKGIsYSksdGhpcy5oZWxkPSEwfSxjYW5jZWw6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuaG9sZEpvYiksdGhpcy5oZWxkJiZ0aGlzLmZpcmVIb2xkKCJyZWxlYXNlIiksdGhpcy5oZWxkPSExLHRoaXMuaGVsZFBvaW50ZXI9bnVsbCx0aGlzLnRhcmdldD1udWxsLHRoaXMuaG9sZEpvYj1udWxsfSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIXRoaXMuaGVsZFBvaW50ZXImJih0aGlzLmhlbGRQb2ludGVyPWEsdGhpcy50YXJnZXQ9YS50YXJnZXQsdGhpcy5ob2xkSm9iPXNldEludGVydmFsKHRoaXMucHVsc2UuYmluZCh0aGlzKSx0aGlzLkhPTERfREVMQVkpKX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe3RoaXMuaGVsZFBvaW50ZXImJnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkPT09YS5wb2ludGVySWQmJnRoaXMuY2FuY2VsKCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbCgpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkKXt2YXIgYj1hLmNsaWVudFgtdGhpcy5oZWxkUG9pbnRlci5jbGllbnRYLGM9YS5jbGllbnRZLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WTtiKmIrYypjPnRoaXMuV0lHR0xFX1RIUkVTSE9MRCYmdGhpcy5jYW5jZWwoKX19LGZpcmVIb2xkOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9e3BvaW50ZXJUeXBlOnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlclR5cGUsY2xpZW50WDp0aGlzLmhlbGRQb2ludGVyLmNsaWVudFgsY2xpZW50WTp0aGlzLmhlbGRQb2ludGVyLmNsaWVudFl9O2MmJihkLmhvbGRUaW1lPWMpO3ZhciBlPWIubWFrZUV2ZW50KGEsZCk7Yi5kaXNwYXRjaEV2ZW50KGUsdGhpcy50YXJnZXQpLGUudGFwUHJldmVudGVkJiZiLnByZXZlbnRUYXAodGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoImhvbGQiLGMpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1uZXcgYS5Qb2ludGVyTWFwLGQ9e2V2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0sV0lHR0xFX1RIUkVTSE9MRDo0LGNsYW1wRGlyOmZ1bmN0aW9uKGEpe3JldHVybiBhPjA/MTotMX0sY2FsY1Bvc2l0aW9uRGVsdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYz0wLGQ9MDtyZXR1cm4gYSYmYiYmKGM9Yi5wYWdlWC1hLnBhZ2VYLGQ9Yi5wYWdlWS1hLnBhZ2VZKSx7eDpjLHk6ZH19LGZpcmVUcmFjazpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCxmPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoZS5kb3duRXZlbnQsYyksZz10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUubGFzdE1vdmVFdmVudCxjKTtnLngmJihlLnhEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLngpKSxnLnkmJihlLnlEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLnkpKTt2YXIgaD17ZHg6Zi54LGR5OmYueSxkZHg6Zy54LGRkeTpnLnksY2xpZW50WDpjLmNsaWVudFgsY2xpZW50WTpjLmNsaWVudFkscGFnZVg6Yy5wYWdlWCxwYWdlWTpjLnBhZ2VZLHNjcmVlblg6Yy5zY3JlZW5YLHNjcmVlblk6Yy5zY3JlZW5ZLHhEaXJlY3Rpb246ZS54RGlyZWN0aW9uLHlEaXJlY3Rpb246ZS55RGlyZWN0aW9uLHRyYWNrSW5mbzplLnRyYWNrSW5mbyxyZWxhdGVkVGFyZ2V0OmMudGFyZ2V0LHBvaW50ZXJUeXBlOmMucG9pbnRlclR5cGV9LGk9Yi5tYWtlRXZlbnQoYSxoKTtlLmxhc3RNb3ZlRXZlbnQ9YyxiLmRpc3BhdGNoRXZlbnQoaSxlLmRvd25UYXJnZXQpfSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSYmKCJtb3VzZSI9PT1hLnBvaW50ZXJUeXBlPzE9PT1hLmJ1dHRvbnM6ITApKXt2YXIgYj17ZG93bkV2ZW50OmEsZG93blRhcmdldDphLnRhcmdldCx0cmFja0luZm86e30sbGFzdE1vdmVFdmVudDpudWxsLHhEaXJlY3Rpb246MCx5RGlyZWN0aW9uOjAsdHJhY2tpbmc6ITF9O2Muc2V0KGEucG9pbnRlcklkLGIpfX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2lmKGIpaWYoYi50cmFja2luZyl0aGlzLmZpcmVUcmFjaygidHJhY2siLGEsYik7ZWxzZXt2YXIgZD10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGIuZG93bkV2ZW50LGEpLGU9ZC54KmQueCtkLnkqZC55O2U+dGhpcy5XSUdHTEVfVEhSRVNIT0xEJiYoYi50cmFja2luZz0hMCx0aGlzLmZpcmVUcmFjaygidHJhY2tzdGFydCIsYi5kb3duRXZlbnQsYiksdGhpcy5maXJlVHJhY2soInRyYWNrIixhLGIpKX19LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXt2YXIgYj1jLmdldChhLnBvaW50ZXJJZCk7YiYmKGIudHJhY2tpbmcmJnRoaXMuZmlyZVRyYWNrKCJ0cmFja2VuZCIsYSxiKSxjLmRlbGV0ZShhLnBvaW50ZXJJZCkpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKGEpe3RoaXMucG9pbnRlcnVwKGEpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoInRyYWNrIixkKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9e01JTl9WRUxPQ0lUWTouNSxNQVhfUVVFVUU6NCxtb3ZlUXVldWU6W10sdGFyZ2V0Om51bGwscG9pbnRlcklkOm51bGwsZXZlbnRzOlsicG9pbnRlcmRvd24iLCJwb2ludGVybW92ZSIsInBvaW50ZXJ1cCIsInBvaW50ZXJjYW5jZWwiXSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIXRoaXMucG9pbnRlcklkJiYodGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWQsdGhpcy50YXJnZXQ9YS50YXJnZXQsdGhpcy5hZGRNb3ZlKGEpKX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7YS5wb2ludGVySWQ9PT10aGlzLnBvaW50ZXJJZCYmdGhpcy5hZGRNb3ZlKGEpfSxwb2ludGVydXA6ZnVuY3Rpb24oYSl7YS5wb2ludGVySWQ9PT10aGlzLnBvaW50ZXJJZCYmdGhpcy5maXJlRmxpY2soYSksdGhpcy5jbGVhbnVwKCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNsZWFudXAoKX0sY2xlYW51cDpmdW5jdGlvbigpe3RoaXMubW92ZVF1ZXVlPVtdLHRoaXMudGFyZ2V0PW51bGwsdGhpcy5wb2ludGVySWQ9bnVsbH0sYWRkTW92ZTpmdW5jdGlvbihhKXt0aGlzLm1vdmVRdWV1ZS5sZW5ndGg+PXRoaXMuTUFYX1FVRVVFJiZ0aGlzLm1vdmVRdWV1ZS5zaGlmdCgpLHRoaXMubW92ZVF1ZXVlLnB1c2goYSl9LGZpcmVGbGljazpmdW5jdGlvbihhKXtmb3IodmFyIGMsZCxlLGYsZyxoLGksaj1hLGs9dGhpcy5tb3ZlUXVldWUubGVuZ3RoLGw9MCxtPTAsbj0wLG89MDtrPm8mJihpPXRoaXMubW92ZVF1ZXVlW29dKTtvKyspYz1qLnRpbWVTdGFtcC1pLnRpbWVTdGFtcCxkPWouY2xpZW50WC1pLmNsaWVudFgsZT1qLmNsaWVudFktaS5jbGllbnRZLGY9ZC9jLGc9ZS9jLGg9TWF0aC5zcXJ0KGYqZitnKmcpLGg+biYmKGw9ZixtPWcsbj1oKTt2YXIgcD1NYXRoLmFicyhsKT5NYXRoLmFicyhtKT8ieCI6InkiLHE9dGhpcy5jYWxjQW5nbGUobCxtKTtpZihNYXRoLmFicyhuKT49dGhpcy5NSU5fVkVMT0NJVFkpe3ZhciByPWIubWFrZUV2ZW50KCJmbGljayIse3hWZWxvY2l0eTpsLHlWZWxvY2l0eTptLHZlbG9jaXR5Om4sYW5nbGU6cSxtYWpvckF4aXM6cCxwb2ludGVyVHlwZTphLnBvaW50ZXJUeXBlfSk7Yi5kaXNwYXRjaEV2ZW50KHIsdGhpcy50YXJnZXQpfX0sY2FsY0FuZ2xlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDE4MCpNYXRoLmF0YW4yKGIsYSkvTWF0aC5QSX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJmbGljayIsYyl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPW5ldyBhLlBvaW50ZXJNYXAsZD0xODAvTWF0aC5QSSxlPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLHJlZmVyZW5jZTp7fSxwb2ludGVyZG93bjpmdW5jdGlvbihiKXtpZihjLnNldChiLnBvaW50ZXJJZCxiKSwyPT1jLnBvaW50ZXJzKCkpe3ZhciBkPXRoaXMuY2FsY0Nob3JkKCksZT10aGlzLmNhbGNBbmdsZShkKTt0aGlzLnJlZmVyZW5jZT17YW5nbGU6ZSxkaWFtZXRlcjpkLmRpYW1ldGVyLHRhcmdldDphLmZpbmRMQ0EoZC5hLnRhcmdldCxkLmIudGFyZ2V0KX19fSxwb2ludGVydXA6ZnVuY3Rpb24oYSl7Yy5kZWxldGUoYS5wb2ludGVySWQpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtjLmhhcyhhLnBvaW50ZXJJZCkmJihjLnNldChhLnBvaW50ZXJJZCxhKSxjLnBvaW50ZXJzKCk+MSYmdGhpcy5jYWxjUGluY2hSb3RhdGUoKSl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludGVydXAoYSl9LGRpc3BhdGNoUGluY2g6ZnVuY3Rpb24oYSxjKXt2YXIgZD1hL3RoaXMucmVmZXJlbmNlLmRpYW1ldGVyLGU9Yi5tYWtlRXZlbnQoInBpbmNoIix7c2NhbGU6ZCxjZW50ZXJYOmMuY2VudGVyLngsY2VudGVyWTpjLmNlbnRlci55fSk7Yi5kaXNwYXRjaEV2ZW50KGUsdGhpcy5yZWZlcmVuY2UudGFyZ2V0KX0sZGlzcGF0Y2hSb3RhdGU6ZnVuY3Rpb24oYSxjKXt2YXIgZD1NYXRoLnJvdW5kKChhLXRoaXMucmVmZXJlbmNlLmFuZ2xlKSUzNjApLGU9Yi5tYWtlRXZlbnQoInJvdGF0ZSIse2FuZ2xlOmQsY2VudGVyWDpjLmNlbnRlci54LGNlbnRlclk6Yy5jZW50ZXIueX0pO2IuZGlzcGF0Y2hFdmVudChlLHRoaXMucmVmZXJlbmNlLnRhcmdldCl9LGNhbGNQaW5jaFJvdGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2FsY0Nob3JkKCksYj1hLmRpYW1ldGVyLGM9dGhpcy5jYWxjQW5nbGUoYSk7YiE9dGhpcy5yZWZlcmVuY2UuZGlhbWV0ZXImJnRoaXMuZGlzcGF0Y2hQaW5jaChiLGEpLGMhPXRoaXMucmVmZXJlbmNlLmFuZ2xlJiZ0aGlzLmRpc3BhdGNoUm90YXRlKGMsYSl9LGNhbGNDaG9yZDpmdW5jdGlvbigpe3ZhciBhPVtdO2MuZm9yRWFjaChmdW5jdGlvbihiKXthLnB1c2goYil9KTtmb3IodmFyIGIsZCxlLGY9MCxnPXthOmFbMF0sYjphWzFdfSxoPTA7aDxhLmxlbmd0aDtoKyspZm9yKHZhciBpPWFbaF0saj1oKzE7ajxhLmxlbmd0aDtqKyspe3ZhciBrPWFbal07Yj1NYXRoLmFicyhpLmNsaWVudFgtay5jbGllbnRYKSxkPU1hdGguYWJzKGkuY2xpZW50WS1rLmNsaWVudFkpLGU9YitkLGU+ZiYmKGY9ZSxnPXthOmksYjprfSl9cmV0dXJuIGI9TWF0aC5hYnMoZy5hLmNsaWVudFgrZy5iLmNsaWVudFgpLzIsZD1NYXRoLmFicyhnLmEuY2xpZW50WStnLmIuY2xpZW50WSkvMixnLmNlbnRlcj17eDpiLHk6ZH0sZy5kaWFtZXRlcj1mLGd9LGNhbGNBbmdsZTpmdW5jdGlvbihhKXt2YXIgYj1hLmEuY2xpZW50WC1hLmIuY2xpZW50WCxjPWEuYS5jbGllbnRZLWEuYi5jbGllbnRZO3JldHVybigzNjArTWF0aC5hdGFuMihjLGIpKmQpJTM2MH19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJwaW5jaCIsZSl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPW5ldyBhLlBvaW50ZXJNYXAsZD17ZXZlbnRzOlsicG9pbnRlcmRvd24iLCJwb2ludGVybW92ZSIsInBvaW50ZXJ1cCIsInBvaW50ZXJjYW5jZWwiLCJrZXl1cCJdLHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYhYS50YXBQcmV2ZW50ZWQmJmMuc2V0KGEucG9pbnRlcklkLHt0YXJnZXQ6YS50YXJnZXQsYnV0dG9uczphLmJ1dHRvbnMseDphLmNsaWVudFgseTphLmNsaWVudFl9KX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7aWYoYS5pc1ByaW1hcnkpe3ZhciBiPWMuZ2V0KGEucG9pbnRlcklkKTtiJiZhLnRhcFByZXZlbnRlZCYmYy5kZWxldGUoYS5wb2ludGVySWQpfX0sc2hvdWxkVGFwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEudGFwUHJldmVudGVkP3ZvaWQgMDoibW91c2UiPT09YS5wb2ludGVyVHlwZT8xPT09Yi5idXR0b25zOiEwfSxwb2ludGVydXA6ZnVuY3Rpb24oZCl7dmFyIGU9Yy5nZXQoZC5wb2ludGVySWQpO2lmKGUmJnRoaXMuc2hvdWxkVGFwKGQsZSkpe3ZhciBmPWEuZmluZExDQShlLnRhcmdldCxkLnRhcmdldCk7aWYoZil7dmFyIGc9Yi5tYWtlRXZlbnQoInRhcCIse3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZLGRldGFpbDpkLmRldGFpbCxwb2ludGVyVHlwZTpkLnBvaW50ZXJUeXBlfSk7Yi5kaXNwYXRjaEV2ZW50KGcsZil9fWMuZGVsZXRlKGQucG9pbnRlcklkKX0scG9pbnRlcmNhbmNlbDpmdW5jdGlvbihhKXtjLmRlbGV0ZShhLnBvaW50ZXJJZCl9LGtleXVwOmZ1bmN0aW9uKGEpe3ZhciBjPWEua2V5Q29kZTtpZigzMj09PWMpe3ZhciBkPWEudGFyZ2V0O2QgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50fHxkIGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudHx8Yi5kaXNwYXRjaEV2ZW50KGIubWFrZUV2ZW50KCJ0YXAiLHt4OjAseTowLGRldGFpbDowLHBvaW50ZXJUeXBlOiJ1bmF2YWlsYWJsZSJ9KSxkKX19LHByZXZlbnRUYXA6ZnVuY3Rpb24oYSl7Yy5kZWxldGUoYSl9fTtiLnJlZ2lzdGVyUmVjb2duaXplcigidGFwIixkKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2MuaW1tZWRpYXRlUmVnaXN0ZXI9ITA7dmFyIGI9Yy5yZWdpc3RlclF1ZXVlO2IuZm9yRWFjaChhLnJlZ2lzdGVyKSxiLmxlbmd0aD0wfXZhciBjPWEuZGlzcGF0Y2hlcjsiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZT9iKCk6ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsZnVuY3Rpb24oKXsiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmYigpfSl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGEoYSl7Zm9yKDthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhLmdldEVsZW1lbnRCeUlkP2E6bnVsbH1mdW5jdGlvbiBiKGEsYixjKXt2YXIgZD1hLmJpbmRpbmdzXztyZXR1cm4gZHx8KGQ9YS5iaW5kaW5nc189e30pLGRbYl0mJmNbYl0uY2xvc2UoKSxkW2JdPWN9ZnVuY3Rpb24gYyhhLGIsYyl7cmV0dXJuIGN9ZnVuY3Rpb24gZChhKXtyZXR1cm4gbnVsbD09YT8iIjphfWZ1bmN0aW9uIGUoYSxiKXthLmRhdGE9ZChiKX1mdW5jdGlvbiBmKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZShhLGIpfX1mdW5jdGlvbiBnKGEsYixjLGUpe3JldHVybiBjP3ZvaWQoZT9hLnNldEF0dHJpYnV0ZShiLCIiKTphLnJlbW92ZUF0dHJpYnV0ZShiKSk6dm9pZCBhLnNldEF0dHJpYnV0ZShiLGQoZSkpfWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtnKGEsYixjLGQpfX1mdW5jdGlvbiBpKGEpe3N3aXRjaChhLnR5cGUpe2Nhc2UiY2hlY2tib3giOnJldHVybiB1O2Nhc2UicmFkaW8iOmNhc2Uic2VsZWN0LW11bHRpcGxlIjpjYXNlInNlbGVjdC1vbmUiOnJldHVybiJjaGFuZ2UiO2Nhc2UicmFuZ2UiOmlmKC9UcmlkZW50fE1TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpcmV0dXJuImNoYW5nZSI7ZGVmYXVsdDpyZXR1cm4iaW5wdXQifX1mdW5jdGlvbiBqKGEsYixjLGUpe2FbYl09KGV8fGQpKGMpfWZ1bmN0aW9uIGsoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtyZXR1cm4gaihhLGIsZCxjKX19ZnVuY3Rpb24gbCgpe31mdW5jdGlvbiBtKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtjLnNldFZhbHVlKGFbYl0pLGMuZGlzY2FyZENoYW5nZXMoKSwoZHx8bCkoYSksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX12YXIgZj1pKGEpO3JldHVybiBhLmFkZEV2ZW50TGlzdGVuZXIoZixlKSx7Y2xvc2U6ZnVuY3Rpb24oKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoZixlKSxjLmNsb3NlKCl9LG9ic2VydmFibGVfOmN9fWZ1bmN0aW9uIG4oYSl7cmV0dXJuIEJvb2xlYW4oYSl9ZnVuY3Rpb24gbyhiKXtpZihiLmZvcm0pcmV0dXJuIHMoYi5mb3JtLmVsZW1lbnRzLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1iJiYiSU5QVVQiPT1hLnRhZ05hbWUmJiJyYWRpbyI9PWEudHlwZSYmYS5uYW1lPT1iLm5hbWV9KTt2YXIgYz1hKGIpO2lmKCFjKXJldHVybltdO3ZhciBkPWMucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSInK2IubmFtZSsnIl0nKTtyZXR1cm4gcyhkLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1iJiYhYS5mb3JtfSl9ZnVuY3Rpb24gcChhKXsiSU5QVVQiPT09YS50YWdOYW1lJiYicmFkaW8iPT09YS50eXBlJiZvKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5iaW5kaW5nc18uY2hlY2tlZDtiJiZiLm9ic2VydmFibGVfLnNldFZhbHVlKCExKX0pfWZ1bmN0aW9uIHEoYSxiKXt2YXIgYyxlLGYsZz1hLnBhcmVudE5vZGU7ZyBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50JiZnLmJpbmRpbmdzXyYmZy5iaW5kaW5nc18udmFsdWUmJihjPWcsZT1jLmJpbmRpbmdzXy52YWx1ZSxmPWMudmFsdWUpLGEudmFsdWU9ZChiKSxjJiZjLnZhbHVlIT1mJiYoZS5vYnNlcnZhYmxlXy5zZXRWYWx1ZShjLnZhbHVlKSxlLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cShhLGIpfX12YXIgcz1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZmlsdGVyKTtOb2RlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYil7Y29uc29sZS5lcnJvcigiVW5oYW5kbGVkIGJpbmRpbmcgdG8gTm9kZTogIix0aGlzLGEsYil9O3ZhciB0PWM7T2JqZWN0LmRlZmluZVByb3BlcnR5KFBsYXRmb3JtLCJlbmFibGVCaW5kaW5nc1JlZmxlY3Rpb24iLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdD09PWJ9LHNldDpmdW5jdGlvbihhKXtyZXR1cm4gdD1hP2I6YyxhfSxjb25maWd1cmFibGU6ITB9KSxUZXh0LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtpZigidGV4dENvbnRlbnQiIT09YSlyZXR1cm4gTm9kZS5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpO2lmKGMpcmV0dXJuIGUodGhpcyxiKTsKdmFyIGQ9YjtyZXR1cm4gZSh0aGlzLGQub3BlbihmKHRoaXMpKSksdCh0aGlzLGEsZCl9LEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSI/Ij09YVthLmxlbmd0aC0xXTtpZihkJiYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksYT1hLnNsaWNlKDAsLTEpKSxjKXJldHVybiBnKHRoaXMsYSxkLGIpO3ZhciBlPWI7cmV0dXJuIGcodGhpcyxhLGQsZS5vcGVuKGgodGhpcyxhLGQpKSksdCh0aGlzLGEsZSl9O3ZhciB1OyFmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGI9YS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94Iik7dmFyIGMsZD0wO2IuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7ZCsrLGM9Y3x8ImNsaWNrIn0pLGIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjaGFuZ2UifSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnQiKTtlLmluaXRNb3VzZUV2ZW50KCJjbGljayIsITAsITAsd2luZG93LDAsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGwpLGIuZGlzcGF0Y2hFdmVudChlKSx1PTE9PWQ/ImNoYW5nZSI6Y30oKSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxlKXtpZigidmFsdWUiIT09YSYmImNoZWNrZWQiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxlKTt0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKTt2YXIgZj0iY2hlY2tlZCI9PWE/bjpkLGc9ImNoZWNrZWQiPT1hP3A6bDtpZihlKXJldHVybiBqKHRoaXMsYSxjLGYpO3ZhciBoPWMsaT1tKHRoaXMsYSxoLGcpO3JldHVybiBqKHRoaXMsYSxoLm9wZW4oayh0aGlzLGEsZikpLGYpLGIodGhpcyxhLGkpfSxIVE1MVGV4dEFyZWFFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtpZigidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKSxjKXJldHVybiBqKHRoaXMsInZhbHVlIixiKTt2YXIgZT1iLGY9bSh0aGlzLCJ2YWx1ZSIsZSk7cmV0dXJuIGoodGhpcywidmFsdWUiLGUub3BlbihrKHRoaXMsInZhbHVlIixkKSkpLHQodGhpcyxhLGYpfSxIVE1MT3B0aW9uRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInZhbHVlIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIiksYylyZXR1cm4gcSh0aGlzLGIpO3ZhciBkPWIsZT1tKHRoaXMsInZhbHVlIixkKTtyZXR1cm4gcSh0aGlzLGQub3BlbihyKHRoaXMpKSksdCh0aGlzLGEsZSl9LEhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxkKXtpZigic2VsZWN0ZWRpbmRleCI9PT1hJiYoYT0ic2VsZWN0ZWRJbmRleCIpLCJzZWxlY3RlZEluZGV4IiE9PWEmJiJ2YWx1ZSIhPT1hKXJldHVybiBIVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxjLGQpO2lmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLGQpcmV0dXJuIGoodGhpcyxhLGMpO3ZhciBlPWMsZj1tKHRoaXMsYSxlKTtyZXR1cm4gaih0aGlzLGEsZS5vcGVuKGsodGhpcyxhKSkpLGIodGhpcyxhLGYpfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBkKGEsYil7aWYoYil7Zm9yKHZhciBkLGU9IiMiK2I7IWQmJihhPWMoYSksYS5wcm90b0NvbnRlbnRfP2Q9YS5wcm90b0NvbnRlbnRfLnF1ZXJ5U2VsZWN0b3IoZSk6YS5nZXRFbGVtZW50QnlJZCYmKGQ9YS5nZXRFbGVtZW50QnlJZChiKSksIWQmJmEudGVtcGxhdGVDcmVhdG9yXyk7KWE9YS50ZW1wbGF0ZUNyZWF0b3JfO3JldHVybiBkfX1mdW5jdGlvbiBlKGEpe3JldHVybiJ0ZW1wbGF0ZSI9PWEudGFnTmFtZSYmImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZihhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gQm9vbGVhbihKW2EudGFnTmFtZV0mJmEuaGFzQXR0cmlidXRlKCJ0ZW1wbGF0ZSIpKX1mdW5jdGlvbiBoKGEpe3JldHVybiB2b2lkIDA9PT1hLmlzVGVtcGxhdGVfJiYoYS5pc1RlbXBsYXRlXz0iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGcoYSkpLGEuaXNUZW1wbGF0ZV99ZnVuY3Rpb24gaShhLGIpe3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbChMKTtoKGEpJiZiKGEpLEUoYyxiKX1mdW5jdGlvbiBqKGEpe2Z1bmN0aW9uIGIoYSl7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhKXx8aihhLmNvbnRlbnQpfWkoYSxiKX1mdW5jdGlvbiBrKGEsYil7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKSl9KX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudDtpZighYi5kZWZhdWx0VmlldylyZXR1cm4gYjt2YXIgYz1iLnRlbXBsYXRlQ29udGVudHNPd25lcl87aWYoIWMpe2ZvcihjPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtjLmxhc3RDaGlsZDspYy5yZW1vdmVDaGlsZChjLmxhc3RDaGlsZCk7Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfPWN9cmV0dXJuIGN9ZnVuY3Rpb24gbShhKXtpZighYS5zdGFnaW5nRG9jdW1lbnRfKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7aWYoIWIuc3RhZ2luZ0RvY3VtZW50Xyl7Yi5zdGFnaW5nRG9jdW1lbnRfPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTt2YXIgYz1iLnN0YWdpbmdEb2N1bWVudF8uY3JlYXRlRWxlbWVudCgiYmFzZSIpO2MuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGIuc3RhZ2luZ0RvY3VtZW50Xy5oZWFkLmFwcGVuZENoaWxkKGMpLGIuc3RhZ2luZ0RvY3VtZW50Xy5zdGFnaW5nRG9jdW1lbnRfPWIuc3RhZ2luZ0RvY3VtZW50X31hLnN0YWdpbmdEb2N1bWVudF89Yi5zdGFnaW5nRG9jdW1lbnRffXJldHVybiBhLnN0YWdpbmdEb2N1bWVudF99ZnVuY3Rpb24gbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTthLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYSk7Zm9yKHZhciBjPWEuYXR0cmlidXRlcyxkPWMubGVuZ3RoO2QtLT4wOyl7dmFyIGU9Y1tkXTtJW2UubmFtZV0mJigidGVtcGxhdGUiIT09ZS5uYW1lJiZiLnNldEF0dHJpYnV0ZShlLm5hbWUsZS52YWx1ZSksYS5yZW1vdmVBdHRyaWJ1dGUoZS5uYW1lKSl9cmV0dXJuIGJ9ZnVuY3Rpb24gbyhhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTthLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYSk7Zm9yKHZhciBjPWEuYXR0cmlidXRlcyxkPWMubGVuZ3RoO2QtLT4wOyl7dmFyIGU9Y1tkXTtiLnNldEF0dHJpYnV0ZShlLm5hbWUsZS52YWx1ZSksYS5yZW1vdmVBdHRyaWJ1dGUoZS5uYW1lKX1yZXR1cm4gYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpLGJ9ZnVuY3Rpb24gcChhLGIsYyl7dmFyIGQ9YS5jb250ZW50O2lmKGMpcmV0dXJuIHZvaWQgZC5hcHBlbmRDaGlsZChiKTtmb3IodmFyIGU7ZT1iLmZpcnN0Q2hpbGQ7KWQuYXBwZW5kQ2hpbGQoZSl9ZnVuY3Rpb24gcShhKXtOP2EuX19wcm90b19fPUhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlOmsoYSxIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSl9ZnVuY3Rpb24gcihhKXthLnNldE1vZGVsRm5ffHwoYS5zZXRNb2RlbEZuXz1mdW5jdGlvbigpe2Euc2V0TW9kZWxGblNjaGVkdWxlZF89ITE7dmFyIGI9eihhLGEuZGVsZWdhdGVfJiZhLmRlbGVnYXRlXy5wcmVwYXJlQmluZGluZyk7dyhhLGIsYS5tb2RlbF8pfSksYS5zZXRNb2RlbEZuU2NoZWR1bGVkX3x8KGEuc2V0TW9kZWxGblNjaGVkdWxlZF89ITAsT2JzZXJ2ZXIucnVuRU9NXyhhLnNldE1vZGVsRm5fKSl9ZnVuY3Rpb24gcyhhLGIsYyxkKXtpZihhJiZhLmxlbmd0aCl7Zm9yKHZhciBlLGY9YS5sZW5ndGgsZz0wLGg9MCxpPTAsaj0hMDtmPmg7KXt2YXIgZz1hLmluZGV4T2YoInt7IixoKSxrPWEuaW5kZXhPZigiW1siLGgpLGw9ITEsbT0ifX0iO2lmKGs+PTAmJigwPmd8fGc+aykmJihnPWssbD0hMCxtPSJdXSIpLGk9MD5nPy0xOmEuaW5kZXhPZihtLGcrMiksMD5pKXtpZighZSlyZXR1cm47ZS5wdXNoKGEuc2xpY2UoaCkpO2JyZWFrfWU9ZXx8W10sZS5wdXNoKGEuc2xpY2UoaCxnKSk7dmFyIG49YS5zbGljZShnKzIsaSkudHJpbSgpO2UucHVzaChsKSxqPWomJmw7dmFyIG89ZCYmZChuLGIsYyk7ZS5wdXNoKG51bGw9PW8/UGF0aC5nZXQobik6bnVsbCksZS5wdXNoKG8pLGg9aSsyfXJldHVybiBoPT09ZiYmZS5wdXNoKCIiKSxlLmhhc09uZVBhdGg9NT09PWUubGVuZ3RoLGUuaXNTaW1wbGVQYXRoPWUuaGFzT25lUGF0aCYmIiI9PWVbMF0mJiIiPT1lWzRdLGUub25seU9uZVRpbWU9aixlLmNvbWJpbmF0b3I9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWVbMF0sYz0xO2M8ZS5sZW5ndGg7Yys9NCl7dmFyIGQ9ZS5oYXNPbmVQYXRoP2E6YVsoYy0xKS80XTt2b2lkIDAhPT1kJiYoYis9ZCksYis9ZVtjKzNdfXJldHVybiBifSxlfX1mdW5jdGlvbiB0KGEsYixjLGQpe2lmKGIuaGFzT25lUGF0aCl7dmFyIGU9YlszXSxmPWU/ZShkLGMsITApOmJbMl0uZ2V0VmFsdWVGcm9tKGQpO3JldHVybiBiLmlzU2ltcGxlUGF0aD9mOmIuY29tYmluYXRvcihmKX1mb3IodmFyIGc9W10saD0xO2g8Yi5sZW5ndGg7aCs9NCl7dmFyIGU9YltoKzJdO2dbKGgtMSkvNF09ZT9lKGQsYyk6YltoKzFdLmdldFZhbHVlRnJvbShkKX1yZXR1cm4gYi5jb21iaW5hdG9yKGcpfWZ1bmN0aW9uIHUoYSxiLGMsZCl7dmFyIGU9YlszXSxmPWU/ZShkLGMsITEpOm5ldyBQYXRoT2JzZXJ2ZXIoZCxiWzJdKTtyZXR1cm4gYi5pc1NpbXBsZVBhdGg/ZjpuZXcgT2JzZXJ2ZXJUcmFuc2Zvcm0oZixiLmNvbWJpbmF0b3IpfWZ1bmN0aW9uIHYoYSxiLGMsZCl7aWYoYi5vbmx5T25lVGltZSlyZXR1cm4gdChhLGIsYyxkKTtpZihiLmhhc09uZVBhdGgpcmV0dXJuIHUoYSxiLGMsZCk7Zm9yKHZhciBlPW5ldyBDb21wb3VuZE9ic2VydmVyLGY9MTtmPGIubGVuZ3RoO2YrPTQpe3ZhciBnPWJbZl0saD1iW2YrMl07aWYoaCl7dmFyIGk9aChkLGMsZyk7Zz9lLmFkZFBhdGgoaSk6ZS5hZGRPYnNlcnZlcihpKX1lbHNle3ZhciBqPWJbZisxXTtnP2UuYWRkUGF0aChqLmdldFZhbHVlRnJvbShkKSk6ZS5hZGRQYXRoKGQsail9fXJldHVybiBuZXcgT2JzZXJ2ZXJUcmFuc2Zvcm0oZSxiLmNvbWJpbmF0b3IpfWZ1bmN0aW9uIHcoYSxiLGMsZCl7Zm9yKHZhciBlPTA7ZTxiLmxlbmd0aDtlKz0yKXt2YXIgZj1iW2VdLGc9YltlKzFdLGg9dihmLGcsYSxjKSxpPWEuYmluZChmLGgsZy5vbmx5T25lVGltZSk7aSYmZCYmZC5wdXNoKGkpfWlmKGIuaXNUZW1wbGF0ZSl7YS5tb2RlbF89Yzt2YXIgaj1hLnByb2Nlc3NCaW5kaW5nRGlyZWN0aXZlc18oYik7ZCYmaiYmZC5wdXNoKGopfX1mdW5jdGlvbiB4KGEsYixjKXt2YXIgZD1hLmdldEF0dHJpYnV0ZShiKTtyZXR1cm4gcygiIj09ZD8ie3t9fSI6ZCxiLGEsYyl9ZnVuY3Rpb24geShhLGMpe2IoYSk7Zm9yKHZhciBkPVtdLGU9MDtlPGEuYXR0cmlidXRlcy5sZW5ndGg7ZSsrKXtmb3IodmFyIGY9YS5hdHRyaWJ1dGVzW2VdLGc9Zi5uYW1lLGk9Zi52YWx1ZTsiXyI9PT1nWzBdOylnPWcuc3Vic3RyaW5nKDEpO2lmKCFoKGEpfHxnIT09SCYmZyE9PUYmJmchPT1HKXt2YXIgaj1zKGksZyxhLGMpO2omJmQucHVzaChnLGopfX1yZXR1cm4gaChhKSYmKGQuaXNUZW1wbGF0ZT0hMCxkLmlmPXgoYSxILGMpLGQuYmluZD14KGEsRixjKSxkLnJlcGVhdD14KGEsRyxjKSwhZC5pZnx8ZC5iaW5kfHxkLnJlcGVhdHx8KGQuYmluZD1zKCJ7e319IixGLGEsYykpKSxkfWZ1bmN0aW9uIHooYSxiKXtpZihhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpcmV0dXJuIHkoYSxiKTtpZihhLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUpe3ZhciBjPXMoYS5kYXRhLCJ0ZXh0Q29udGVudCIsYSxiKTtpZihjKXJldHVyblsidGV4dENvbnRlbnQiLGNdfXJldHVybltdfWZ1bmN0aW9uIEEoYSxiLGMsZCxlLGYsZyl7Zm9yKHZhciBoPWIuYXBwZW5kQ2hpbGQoYy5pbXBvcnROb2RlKGEsITEpKSxpPTAsaj1hLmZpcnN0Q2hpbGQ7ajtqPWoubmV4dFNpYmxpbmcpQShqLGgsYyxkLmNoaWxkcmVuW2krK10sZSxmLGcpO3JldHVybiBkLmlzVGVtcGxhdGUmJihIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlKGgsYSksZiYmaC5zZXREZWxlZ2F0ZV8oZikpLHcoaCxkLGUsZyksaH1mdW5jdGlvbiBCKGEsYil7dmFyIGM9eihhLGIpO2MuY2hpbGRyZW49e307Zm9yKHZhciBkPTAsZT1hLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpYy5jaGlsZHJlbltkKytdPUIoZSxiKTtyZXR1cm4gY31mdW5jdGlvbiBDKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMuaW5zdGFuY2VzPVtdLHRoaXMuZGVwcz12b2lkIDAsdGhpcy5pdGVyYXRlZFZhbHVlPVtdLHRoaXMucHJlc2VudFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwfXZhciBELEU9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP0Q9YS5NYXA6KEQ9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LEQucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSk7ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBGPSJiaW5kIixHPSJyZXBlYXQiLEg9ImlmIixJPXt0ZW1wbGF0ZTohMCxyZXBlYXQ6ITAsYmluZDohMCxyZWY6ITB9LEo9e1RIRUFEOiEwLFRCT0RZOiEwLFRGT09UOiEwLFRIOiEwLFRSOiEwLFREOiEwLENPTEdST1VQOiEwLENPTDohMCxDQVBUSU9OOiEwLE9QVElPTjohMCxPUFRHUk9VUDohMH0sSz0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7SyYmIWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKSxiPWEuY29udGVudC5vd25lckRvY3VtZW50LGM9Yi5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImh0bWwiKSksZD1jLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiaGVhZCIpKSxlPWIuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2UuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGQuYXBwZW5kQ2hpbGQoZSl9KCk7dmFyIEw9InRlbXBsYXRlLCAiK09iamVjdC5rZXlzKEopLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpKyJbdGVtcGxhdGVdIn0pLmpvaW4oIiwgIik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtqKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksS3x8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIE0sTj0iX19wcm90b19fImlue307ImZ1bmN0aW9uIj09dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJihNPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udGFyZ2V0LnJlZkNoYW5nZWRfKCl9KSksSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGQ9YTtkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBoPWYoZCkmJkssaT1oLGs9IWgsbT0hMTtpZihofHwoZyhkKT8oYighYyksZD1uKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsaD1LLG09ITApOmUoZCkmJihkPW8oYSksZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxoPUspKSwhaCl7cShkKTt2YXIgcj1sKGQpO2QuY29udGVudF89ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9cmV0dXJuIGM/ZC5pbnN0YW5jZVJlZl89YzprP3AoZCxhLG0pOmkmJmooZC5jb250ZW50KSwhMH0sSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXA9ajt2YXIgTz1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsUD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudF99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtLfHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShPLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixQKSksayhIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSx7YmluZDpmdW5jdGlvbihhLGIsYyl7aWYoInJlZiIhPWEpcmV0dXJuIEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTt2YXIgZD10aGlzLGU9Yz9iOmIub3BlbihmdW5jdGlvbihhKXtkLnNldEF0dHJpYnV0ZSgicmVmIixhKSxkLnJlZkNoYW5nZWRfKCl9KTtyZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUoInJlZiIsZSksdGhpcy5yZWZDaGFuZ2VkXygpLGM/dm9pZCAwOih0aGlzLmJpbmRpbmdzXz90aGlzLmJpbmRpbmdzXy5yZWY9Yjp0aGlzLmJpbmRpbmdzXz17cmVmOmJ9LGIpfSxwcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yXyYmdGhpcy5pdGVyYXRvcl8uY2xvc2VEZXBzKCksYS5pZnx8YS5iaW5kfHxhLnJlcGVhdD8odGhpcy5pdGVyYXRvcl98fCh0aGlzLml0ZXJhdG9yXz1uZXcgQyh0aGlzKSksdGhpcy5pdGVyYXRvcl8udXBkYXRlRGVwZW5kZW5jaWVzKGEsdGhpcy5tb2RlbF8pLE0mJk0ub2JzZXJ2ZSh0aGlzLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInJlZiJdfSksdGhpcy5pdGVyYXRvcl8pOnZvaWQodGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCkpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihhLGIsYyl7YiYmKGM9dGhpcy5uZXdEZWxlZ2F0ZV8oYikpLHRoaXMucmVmQ29udGVudF98fCh0aGlzLnJlZkNvbnRlbnRfPXRoaXMucmVmXy5jb250ZW50KTt2YXIgZD10aGlzLnJlZkNvbnRlbnRfO2lmKG51bGw9PT1kLmZpcnN0Q2hpbGQpcmV0dXJuIFE7dmFyIGU9dGhpcy5iaW5kaW5nTWFwXztlJiZlLmNvbnRlbnQ9PT1kfHwoZT1CKGQsYyYmYy5wcmVwYXJlQmluZGluZyl8fFtdLGUuY29udGVudD1kLHRoaXMuYmluZGluZ01hcF89ZSk7dmFyIGY9bSh0aGlzKSxnPWYuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2cudGVtcGxhdGVDcmVhdG9yXz10aGlzLGcucHJvdG9Db250ZW50Xz1kLGcuYmluZGluZ3NfPVtdLGcudGVybWluYXRvcl89bnVsbDtmb3IodmFyIGg9Zy50ZW1wbGF0ZUluc3RhbmNlXz17Zmlyc3ROb2RlOm51bGwsbGFzdE5vZGU6bnVsbCxtb2RlbDphfSxpPTAsaj0hMSxrPWQuZmlyc3RDaGlsZDtrO2s9ay5uZXh0U2libGluZyl7bnVsbD09PWsubmV4dFNpYmxpbmcmJihqPSEwKTt2YXIgbD1BKGssZyxmLGUuY2hpbGRyZW5baSsrXSxhLGMsZy5iaW5kaW5nc18pO2wudGVtcGxhdGVJbnN0YW5jZV89aCxqJiYoZy50ZXJtaW5hdG9yXz1sKX1yZXR1cm4gaC5maXJzdE5vZGU9Zy5maXJzdENoaWxkLGgubGFzdE5vZGU9Zy5sYXN0Q2hpbGQsZy50ZW1wbGF0ZUNyZWF0b3JfPXZvaWQgMCxnLnByb3RvQ29udGVudF89dm9pZCAwLGd9LGdldCBtb2RlbCgpe3JldHVybiB0aGlzLm1vZGVsX30sc2V0IG1vZGVsKGEpe3RoaXMubW9kZWxfPWEscih0aGlzKX0sZ2V0IGJpbmRpbmdEZWxlZ2F0ZSgpe3JldHVybiB0aGlzLmRlbGVnYXRlXyYmdGhpcy5kZWxlZ2F0ZV8ucmF3fSxyZWZDaGFuZ2VkXzpmdW5jdGlvbigpe3RoaXMuaXRlcmF0b3JfJiZ0aGlzLnJlZkNvbnRlbnRfIT09dGhpcy5yZWZfLmNvbnRlbnQmJih0aGlzLnJlZkNvbnRlbnRfPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy51cGRhdGVJdGVyYXRlZFZhbHVlKCkpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubW9kZWxfPXZvaWQgMCx0aGlzLmRlbGVnYXRlXz12b2lkIDAsdGhpcy5iaW5kaW5nc18mJnRoaXMuYmluZGluZ3NfLnJlZiYmdGhpcy5iaW5kaW5nc18ucmVmLmNsb3NlKCksdGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCl9LHNldERlbGVnYXRlXzpmdW5jdGlvbihhKXt0aGlzLmRlbGVnYXRlXz1hLHRoaXMuYmluZGluZ01hcF89dm9pZCAwLHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8uaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlTW9kZWxGbl89dm9pZCAwKX0sbmV3RGVsZWdhdGVfOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YSYmYVtiXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYylyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShhLGFyZ3VtZW50cyl9fXJldHVybiBhP3tyYXc6YSxwcmVwYXJlQmluZGluZzpiKCJwcmVwYXJlQmluZGluZyIpLHByZXBhcmVJbnN0YW5jZU1vZGVsOmIoInByZXBhcmVJbnN0YW5jZU1vZGVsIikscHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkOmIoInByZXBhcmVJbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZCIpfTp7fX0sc2V0IGJpbmRpbmdEZWxlZ2F0ZShhKXtpZih0aGlzLmRlbGVnYXRlXyl0aHJvdyBFcnJvcigiVGVtcGxhdGUgbXVzdCBiZSBjbGVhcmVkIGJlZm9yZSBhIG5ldyBiaW5kaW5nRGVsZWdhdGUgY2FuIGJlIGFzc2lnbmVkIik7dGhpcy5zZXREZWxlZ2F0ZV8odGhpcy5uZXdEZWxlZ2F0ZV8oYSkpfSxnZXQgcmVmXygpe3ZhciBhPWQodGhpcyx0aGlzLmdldEF0dHJpYnV0ZSgicmVmIikpO2lmKGF8fChhPXRoaXMuaW5zdGFuY2VSZWZfKSwhYSlyZXR1cm4gdGhpczt2YXIgYj1hLnJlZl87cmV0dXJuIGI/YjphfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb2RlLnByb3RvdHlwZSwidGVtcGxhdGVJbnN0YW5jZSIse2dldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMudGVtcGxhdGVJbnN0YW5jZV87cmV0dXJuIGE/YTp0aGlzLnBhcmVudE5vZGU/dGhpcy5wYXJlbnROb2RlLnRlbXBsYXRlSW5zdGFuY2U6dm9pZCAwfX0pO3ZhciBRPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtRLmJpbmRpbmdzXz1bXSxRLnRlcm1pbmF0b3JfPW51bGwsQy5wcm90b3R5cGU9e2Nsb3NlRGVwczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZGVwczthJiYoYS5pZk9uZVRpbWU9PT0hMSYmYS5pZlZhbHVlLmNsb3NlKCksYS5vbmVUaW1lPT09ITEmJmEudmFsdWUuY2xvc2UoKSl9LHVwZGF0ZURlcGVuZGVuY2llczpmdW5jdGlvbihhLGIpe3RoaXMuY2xvc2VEZXBzKCk7dmFyIGM9dGhpcy5kZXBzPXt9LGQ9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfO2lmKGEuaWYpe2lmKGMuaGFzSWY9ITAsYy5pZk9uZVRpbWU9YS5pZi5vbmx5T25lVGltZSxjLmlmVmFsdWU9dihILGEuaWYsZCxiKSxjLmlmT25lVGltZSYmIWMuaWZWYWx1ZSlyZXR1cm4gdm9pZCB0aGlzLnVwZGF0ZUl0ZXJhdGVkVmFsdWUoKTtjLmlmT25lVGltZXx8Yy5pZlZhbHVlLm9wZW4odGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlLHRoaXMpfWEucmVwZWF0PyhjLnJlcGVhdD0hMCxjLm9uZVRpbWU9YS5yZXBlYXQub25seU9uZVRpbWUsYy52YWx1ZT12KEcsYS5yZXBlYXQsZCxiKSk6KGMucmVwZWF0PSExLGMub25lVGltZT1hLmJpbmQub25seU9uZVRpbWUsYy52YWx1ZT12KEYsYS5iaW5kLGQsYikpLGMub25lVGltZXx8Yy52YWx1ZS5vcGVuKHRoaXMudXBkYXRlSXRlcmF0ZWRWYWx1ZSx0aGlzKSx0aGlzLnVwZGF0ZUl0ZXJhdGVkVmFsdWUoKX0sdXBkYXRlSXRlcmF0ZWRWYWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuZGVwcy5oYXNJZil7dmFyIGE9dGhpcy5kZXBzLmlmVmFsdWU7aWYodGhpcy5kZXBzLmlmT25lVGltZXx8KGE9YS5kaXNjYXJkQ2hhbmdlcygpKSwhYSlyZXR1cm4gdm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfXZhciBiPXRoaXMuZGVwcy52YWx1ZTt0aGlzLmRlcHMub25lVGltZXx8KGI9Yi5kaXNjYXJkQ2hhbmdlcygpKSx0aGlzLmRlcHMucmVwZWF0fHwoYj1bYl0pO3ZhciBjPXRoaXMuZGVwcy5yZXBlYXQmJiF0aGlzLmRlcHMub25lVGltZSYmQXJyYXkuaXNBcnJheShiKTt0aGlzLnZhbHVlQ2hhbmdlZChiLGMpfSx2YWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oYSxiKXtBcnJheS5pc0FycmF5KGEpfHwoYT1bXSksYSE9PXRoaXMuaXRlcmF0ZWRWYWx1ZSYmKHRoaXMudW5vYnNlcnZlKCksdGhpcy5wcmVzZW50VmFsdWU9YSxiJiYodGhpcy5hcnJheU9ic2VydmVyPW5ldyBBcnJheU9ic2VydmVyKHRoaXMucHJlc2VudFZhbHVlKSx0aGlzLmFycmF5T2JzZXJ2ZXIub3Blbih0aGlzLmhhbmRsZVNwbGljZXMsdGhpcykpLHRoaXMuaGFuZGxlU3BsaWNlcyhBcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXModGhpcy5wcmVzZW50VmFsdWUsdGhpcy5pdGVyYXRlZFZhbHVlKSkpfSxnZXRMYXN0SW5zdGFuY2VOb2RlOmZ1bmN0aW9uKGEpe2lmKC0xPT1hKXJldHVybiB0aGlzLnRlbXBsYXRlRWxlbWVudF87dmFyIGI9dGhpcy5pbnN0YW5jZXNbYV0sYz1iLnRlcm1pbmF0b3JfO2lmKCFjKXJldHVybiB0aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYS0xKTtpZihjLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fHRoaXMudGVtcGxhdGVFbGVtZW50Xz09PWMpcmV0dXJuIGM7dmFyIGQ9Yy5pdGVyYXRvcl87cmV0dXJuIGQ/ZC5nZXRMYXN0VGVtcGxhdGVOb2RlKCk6Y30sZ2V0TGFzdFRlbXBsYXRlTm9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldExhc3RJbnN0YW5jZU5vZGUodGhpcy5pbnN0YW5jZXMubGVuZ3RoLTEpfSxpbnNlcnRJbnN0YW5jZUF0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEtMSksZD10aGlzLnRlbXBsYXRlRWxlbWVudF8ucGFyZW50Tm9kZTt0aGlzLmluc3RhbmNlcy5zcGxpY2UoYSwwLGIpLGQuaW5zZXJ0QmVmb3JlKGIsYy5uZXh0U2libGluZyl9LGV4dHJhY3RJbnN0YW5jZUF0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYS0xKSxjPXRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhKSxkPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlLGU9dGhpcy5pbnN0YW5jZXMuc3BsaWNlKGEsMSlbMF07YyE9PWI7KXt2YXIgZj1iLm5leHRTaWJsaW5nO2Y9PWMmJihjPWIpLGUuYXBwZW5kQ2hpbGQoZC5yZW1vdmVDaGlsZChmKSl9cmV0dXJuIGV9LGdldERlbGVnYXRlRm46ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YSYmYSh0aGlzLnRlbXBsYXRlRWxlbWVudF8pLCJmdW5jdGlvbiI9PXR5cGVvZiBhP2E6bnVsbH0saGFuZGxlU3BsaWNlczpmdW5jdGlvbihhKXtpZighdGhpcy5jbG9zZWQmJmEubGVuZ3RoKXt2YXIgYj10aGlzLnRlbXBsYXRlRWxlbWVudF87aWYoIWIucGFyZW50Tm9kZSlyZXR1cm4gdm9pZCB0aGlzLmNsb3NlKCk7QXJyYXlPYnNlcnZlci5hcHBseVNwbGljZXModGhpcy5pdGVyYXRlZFZhbHVlLHRoaXMucHJlc2VudFZhbHVlLGEpO3ZhciBjPWIuZGVsZWdhdGVfO3ZvaWQgMD09PXRoaXMuaW5zdGFuY2VNb2RlbEZuXyYmKHRoaXMuaW5zdGFuY2VNb2RlbEZuXz10aGlzLmdldERlbGVnYXRlRm4oYyYmYy5wcmVwYXJlSW5zdGFuY2VNb2RlbCkpLHZvaWQgMD09PXRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl8mJih0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fPXRoaXMuZ2V0RGVsZWdhdGVGbihjJiZjLnByZXBhcmVJbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZCkpO2Zvcih2YXIgZD1uZXcgRCxlPTAsZj0wO2Y8YS5sZW5ndGg7ZisrKXtmb3IodmFyIGc9YVtmXSxoPWcucmVtb3ZlZCxpPTA7aTxoLmxlbmd0aDtpKyspe3ZhciBqPWhbaV0saz10aGlzLmV4dHJhY3RJbnN0YW5jZUF0KGcuaW5kZXgrZSk7ayE9PVEmJmQuc2V0KGosayl9ZS09Zy5hZGRlZENvdW50fWZvcih2YXIgZj0wO2Y8YS5sZW5ndGg7ZisrKWZvcih2YXIgZz1hW2ZdLGw9Zy5pbmRleDtsPGcuaW5kZXgrZy5hZGRlZENvdW50O2wrKyl7dmFyIGo9dGhpcy5pdGVyYXRlZFZhbHVlW2xdLGs9ZC5nZXQoaik7az9kLmRlbGV0ZShqKToodGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYoaj10aGlzLmluc3RhbmNlTW9kZWxGbl8oaikpLGs9dm9pZCAwPT09aj9ROmIuY3JlYXRlSW5zdGFuY2Uoaix2b2lkIDAsYykpLHRoaXMuaW5zZXJ0SW5zdGFuY2VBdChsLGspfWQuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLmNsb3NlSW5zdGFuY2VCaW5kaW5ncyhhKX0sdGhpcyksdGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmdGhpcy5yZXBvcnRJbnN0YW5jZXNNb3ZlZChhKX19LHJlcG9ydEluc3RhbmNlTW92ZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbnN0YW5jZXNbYV07YiE9PVEmJnRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl8oYi50ZW1wbGF0ZUluc3RhbmNlXyxhKX0scmVwb3J0SW5zdGFuY2VzTW92ZWQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz0wLGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGU9YVtkXTtpZigwIT1jKWZvcig7YjxlLmluZGV4Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2Vsc2UgYj1lLmluZGV4O2Zvcig7YjxlLmluZGV4K2UuYWRkZWRDb3VudDspdGhpcy5yZXBvcnRJbnN0YW5jZU1vdmVkKGIpLGIrKztjKz1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aH1pZigwIT1jKWZvcih2YXIgZj10aGlzLmluc3RhbmNlcy5sZW5ndGg7Zj5iOyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrfSxjbG9zZUluc3RhbmNlQmluZGluZ3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEuYmluZGluZ3NfLGM9MDtjPGIubGVuZ3RoO2MrKyliW2NdLmNsb3NlKCl9LHVub2JzZXJ2ZTpmdW5jdGlvbigpe3RoaXMuYXJyYXlPYnNlcnZlciYmKHRoaXMuYXJyYXlPYnNlcnZlci5jbG9zZSgpLHRoaXMuYXJyYXlPYnNlcnZlcj12b2lkIDApfSxjbG9zZTpmdW5jdGlvbigpe2lmKCF0aGlzLmNsb3NlZCl7dGhpcy51bm9ic2VydmUoKTtmb3IodmFyIGE9MDthPHRoaXMuaW5zdGFuY2VzLmxlbmd0aDthKyspdGhpcy5jbG9zZUluc3RhbmNlQmluZGluZ3ModGhpcy5pbnN0YW5jZXNbYV0pO3RoaXMuaW5zdGFuY2VzLmxlbmd0aD0wLHRoaXMuY2xvc2VEZXBzKCksdGhpcy50ZW1wbGF0ZUVsZW1lbnRfLml0ZXJhdG9yXz12b2lkIDAsdGhpcy5jbG9zZWQ9ITB9fX0sSFRNTFRlbXBsYXRlRWxlbWVudC5mb3JBbGxUZW1wbGF0ZXNGcm9tXz1pfSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQVNTRVJUOiAiK2IpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGE+PTQ4JiY1Nz49YX1mdW5jdGlvbiBkKGEpe3JldHVybiAzMj09PWF8fDk9PT1hfHwxMT09PWF8fDEyPT09YXx8MTYwPT09YXx8YT49NTc2MCYmIuGagOGgjuKAgOKAgeKAguKAg+KAhOKAheKAhuKAh+KAiOKAieKAiuKAr+KBn+OAgO+7vyIuaW5kZXhPZihTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKT4wfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIDEwPT09YXx8MTM9PT1hfHw4MjMyPT09YXx8ODIzMz09PWF9ZnVuY3Rpb24gZihhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YX1mdW5jdGlvbiBnKGEpe3JldHVybiAzNj09PWF8fDk1PT09YXx8YT49NjUmJjkwPj1hfHxhPj05NyYmMTIyPj1hfHxhPj00OCYmNTc+PWF9ZnVuY3Rpb24gaChhKXtyZXR1cm4idGhpcyI9PT1hfWZ1bmN0aW9uIGkoKXtmb3IoO1k+WCYmZChXLmNoYXJDb2RlQXQoWCkpOykrK1h9ZnVuY3Rpb24gaigpe3ZhciBhLGI7Zm9yKGE9WCsrO1k+WCYmKGI9Vy5jaGFyQ29kZUF0KFgpLGcoYikpOykrK1g7cmV0dXJuIFcuc2xpY2UoYSxYKX1mdW5jdGlvbiBrKCl7dmFyIGEsYixjO3JldHVybiBhPVgsYj1qKCksYz0xPT09Yi5sZW5ndGg/Uy5JZGVudGlmaWVyOmgoYik/Uy5LZXl3b3JkOiJudWxsIj09PWI/Uy5OdWxsTGl0ZXJhbDoidHJ1ZSI9PT1ifHwiZmFsc2UiPT09Yj9TLkJvb2xlYW5MaXRlcmFsOlMuSWRlbnRpZmllcix7dHlwZTpjLHZhbHVlOmIscmFuZ2U6W2EsWF19fWZ1bmN0aW9uIGwoKXt2YXIgYSxiLGM9WCxkPVcuY2hhckNvZGVBdChYKSxlPVdbWF07c3dpdGNoKGQpe2Nhc2UgNDY6Y2FzZSA0MDpjYXNlIDQxOmNhc2UgNTk6Y2FzZSA0NDpjYXNlIDEyMzpjYXNlIDEyNTpjYXNlIDkxOmNhc2UgOTM6Y2FzZSA1ODpjYXNlIDYzOnJldHVybisrWCx7dHlwZTpTLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShkKSxyYW5nZTpbYyxYXX07ZGVmYXVsdDppZihhPVcuY2hhckNvZGVBdChYKzEpLDYxPT09YSlzd2l0Y2goZCl7Y2FzZSAzNzpjYXNlIDM4OmNhc2UgNDI6Y2FzZSA0MzpjYXNlIDQ1OmNhc2UgNDc6Y2FzZSA2MDpjYXNlIDYyOmNhc2UgMTI0OnJldHVybiBYKz0yLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQpK1N0cmluZy5mcm9tQ2hhckNvZGUoYSkscmFuZ2U6W2MsWF19O2Nhc2UgMzM6Y2FzZSA2MTpyZXR1cm4gWCs9Miw2MT09PVcuY2hhckNvZGVBdChYKSYmKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpXLnNsaWNlKGMsWCkscmFuZ2U6W2MsWF19fX1yZXR1cm4gYj1XW1grMV0sZT09PWImJiImfCIuaW5kZXhPZihlKT49MD8oWCs9Mix7dHlwZTpTLlB1bmN0dWF0b3IsdmFsdWU6ZStiLHJhbmdlOltjLFhdfSk6Ijw+PSErLSolJnxeLyIuaW5kZXhPZihlKT49MD8oKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTplLHJhbmdlOltjLFhdfSk6dm9pZCBzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIil9ZnVuY3Rpb24gbSgpe3ZhciBhLGQsZTtpZihlPVdbWF0sYihjKGUuY2hhckNvZGVBdCgwKSl8fCIuIj09PWUsIk51bWVyaWMgbGl0ZXJhbCBtdXN0IHN0YXJ0IHdpdGggYSBkZWNpbWFsIGRpZ2l0IG9yIGEgZGVjaW1hbCBwb2ludCIpLGQ9WCxhPSIiLCIuIiE9PWUpe2ZvcihhPVdbWCsrXSxlPVdbWF0sIjAiPT09YSYmZSYmYyhlLmNoYXJDb2RlQXQoMCkpJiZzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIik7YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZT1XW1hdfWlmKCIuIj09PWUpe2ZvcihhKz1XW1grK107YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZT1XW1hdfWlmKCJlIj09PWV8fCJFIj09PWUpaWYoYSs9V1tYKytdLGU9V1tYXSwoIisiPT09ZXx8Ii0iPT09ZSkmJihhKz1XW1grK10pLGMoVy5jaGFyQ29kZUF0KFgpKSlmb3IoO2MoVy5jaGFyQ29kZUF0KFgpKTspYSs9V1tYKytdO2Vsc2Ugcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpO3JldHVybiBmKFcuY2hhckNvZGVBdChYKSkmJnMoe30sVi5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx7dHlwZTpTLk51bWVyaWNMaXRlcmFsLHZhbHVlOnBhcnNlRmxvYXQoYSkscmFuZ2U6W2QsWF19fWZ1bmN0aW9uIG4oKXt2YXIgYSxjLGQsZj0iIixnPSExO2ZvcihhPVdbWF0sYigiJyI9PT1hfHwnIic9PT1hLCJTdHJpbmcgbGl0ZXJhbCBtdXN0IHN0YXJ0cyB3aXRoIGEgcXVvdGUiKSxjPVgsKytYO1k+WDspe2lmKGQ9V1tYKytdLGQ9PT1hKXthPSIiO2JyZWFrfWlmKCJcXCI9PT1kKWlmKGQ9V1tYKytdLGQmJmUoZC5jaGFyQ29kZUF0KDApKSkiXHIiPT09ZCYmIlxuIj09PVdbWF0mJisrWDtlbHNlIHN3aXRjaChkKXtjYXNlIm4iOmYrPSJcbiI7YnJlYWs7Y2FzZSJyIjpmKz0iXHIiO2JyZWFrO2Nhc2UidCI6Zis9IgkiO2JyZWFrO2Nhc2UiYiI6Zis9IlxiIjticmVhaztjYXNlImYiOmYrPSJcZiI7YnJlYWs7Y2FzZSJ2IjpmKz0iCyI7YnJlYWs7ZGVmYXVsdDpmKz1kfWVsc2V7aWYoZShkLmNoYXJDb2RlQXQoMCkpKWJyZWFrO2YrPWR9fXJldHVybiIiIT09YSYmcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHt0eXBlOlMuU3RyaW5nTGl0ZXJhbCx2YWx1ZTpmLG9jdGFsOmcscmFuZ2U6W2MsWF19fWZ1bmN0aW9uIG8oYSl7cmV0dXJuIGEudHlwZT09PVMuSWRlbnRpZmllcnx8YS50eXBlPT09Uy5LZXl3b3JkfHxhLnR5cGU9PT1TLkJvb2xlYW5MaXRlcmFsfHxhLnR5cGU9PT1TLk51bGxMaXRlcmFsfWZ1bmN0aW9uIHAoKXt2YXIgYTtyZXR1cm4gaSgpLFg+PVk/e3R5cGU6Uy5FT0YscmFuZ2U6W1gsWF19OihhPVcuY2hhckNvZGVBdChYKSw0MD09PWF8fDQxPT09YXx8NTg9PT1hP2woKTozOT09PWF8fDM0PT09YT9uKCk6ZihhKT9rKCk6NDY9PT1hP2MoVy5jaGFyQ29kZUF0KFgrMSkpP20oKTpsKCk6YyhhKT9tKCk6bCgpKX1mdW5jdGlvbiBxKCl7dmFyIGE7cmV0dXJuIGE9JCxYPWEucmFuZ2VbMV0sJD1wKCksWD1hLnJhbmdlWzFdLGF9ZnVuY3Rpb24gcigpe3ZhciBhO2E9WCwkPXAoKSxYPWF9ZnVuY3Rpb24gcyhhLGMpe3ZhciBkLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpLGY9Yy5yZXBsYWNlKC8lKFxkKS9nLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIoYzxlLmxlbmd0aCwiTWVzc2FnZSByZWZlcmVuY2UgbXVzdCBiZSBpbiByYW5nZSIpLGVbY119KTt0aHJvdyBkPW5ldyBFcnJvcihmKSxkLmluZGV4PVgsZC5kZXNjcmlwdGlvbj1mLGR9ZnVuY3Rpb24gdChhKXtzKGEsVi5VbmV4cGVjdGVkVG9rZW4sYS52YWx1ZSl9ZnVuY3Rpb24gdShhKXt2YXIgYj1xKCk7KGIudHlwZSE9PVMuUHVuY3R1YXRvcnx8Yi52YWx1ZSE9PWEpJiZ0KGIpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuICQudHlwZT09PVMuUHVuY3R1YXRvciYmJC52YWx1ZT09PWF9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gJC50eXBlPT09Uy5LZXl3b3JkJiYkLnZhbHVlPT09YX1mdW5jdGlvbiB4KCl7dmFyIGE9W107Zm9yKHUoIlsiKTshdigiXSIpOyl2KCIsIik/KHEoKSxhLnB1c2gobnVsbCkpOihhLnB1c2goYmIoKSksdigiXSIpfHx1KCIsIikpO3JldHVybiB1KCJdIiksWi5jcmVhdGVBcnJheUV4cHJlc3Npb24oYSl9ZnVuY3Rpb24geSgpe3ZhciBhO3JldHVybiBpKCksYT1xKCksYS50eXBlPT09Uy5TdHJpbmdMaXRlcmFsfHxhLnR5cGU9PT1TLk51bWVyaWNMaXRlcmFsP1ouY3JlYXRlTGl0ZXJhbChhKTpaLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24geigpe3ZhciBhLGI7cmV0dXJuIGE9JCxpKCksKGEudHlwZT09PVMuRU9GfHxhLnR5cGU9PT1TLlB1bmN0dWF0b3IpJiZ0KGEpLGI9eSgpLHUoIjoiKSxaLmNyZWF0ZVByb3BlcnR5KCJpbml0IixiLGJiKCkpfWZ1bmN0aW9uIEEoKXt2YXIgYT1bXTtmb3IodSgieyIpOyF2KCJ9Iik7KWEucHVzaCh6KCkpLHYoIn0iKXx8dSgiLCIpO3JldHVybiB1KCJ9IiksWi5jcmVhdGVPYmplY3RFeHByZXNzaW9uKGEpfWZ1bmN0aW9uIEIoKXt2YXIgYTtyZXR1cm4gdSgiKCIpLGE9YmIoKSx1KCIpIiksYX1mdW5jdGlvbiBDKCl7dmFyIGEsYixjO3JldHVybiB2KCIoIik/QigpOihhPSQudHlwZSxhPT09Uy5JZGVudGlmaWVyP2M9Wi5jcmVhdGVJZGVudGlmaWVyKHEoKS52YWx1ZSk6YT09PVMuU3RyaW5nTGl0ZXJhbHx8YT09PVMuTnVtZXJpY0xpdGVyYWw/Yz1aLmNyZWF0ZUxpdGVyYWwocSgpKTphPT09Uy5LZXl3b3JkP3coInRoaXMiKSYmKHEoKSxjPVouY3JlYXRlVGhpc0V4cHJlc3Npb24oKSk6YT09PVMuQm9vbGVhbkxpdGVyYWw/KGI9cSgpLGIudmFsdWU9InRydWUiPT09Yi52YWx1ZSxjPVouY3JlYXRlTGl0ZXJhbChiKSk6YT09PVMuTnVsbExpdGVyYWw/KGI9cSgpLGIudmFsdWU9bnVsbCxjPVouY3JlYXRlTGl0ZXJhbChiKSk6digiWyIpP2M9eCgpOnYoInsiKSYmKGM9QSgpKSxjP2M6dm9pZCB0KHEoKSkpfWZ1bmN0aW9uIEQoKXt2YXIgYT1bXTtpZih1KCIoIiksIXYoIikiKSlmb3IoO1k+WCYmKGEucHVzaChiYigpKSwhdigiKSIpKTspdSgiLCIpO3JldHVybiB1KCIpIiksYX1mdW5jdGlvbiBFKCl7dmFyIGE7cmV0dXJuIGE9cSgpLG8oYSl8fHQoYSksWi5jcmVhdGVJZGVudGlmaWVyKGEudmFsdWUpfWZ1bmN0aW9uIEYoKXtyZXR1cm4gdSgiLiIpLEUoKX1mdW5jdGlvbiBHKCl7dmFyIGE7cmV0dXJuIHUoIlsiKSxhPWJiKCksdSgiXSIpLGF9ZnVuY3Rpb24gSCgpe3ZhciBhLGI7Zm9yKGE9QygpO3YoIi4iKXx8digiWyIpOyl2KCJbIik/KGI9RygpLGE9Wi5jcmVhdGVNZW1iZXJFeHByZXNzaW9uKCJbIixhLGIpKTooYj1GKCksYT1aLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIi4iLGEsYikpO3JldHVybiBhfWZ1bmN0aW9uIEkoKXt2YXIgYSxiO3JldHVybiAkLnR5cGUhPT1TLlB1bmN0dWF0b3ImJiQudHlwZSE9PVMuS2V5d29yZD9iPWFiKCk6digiKyIpfHx2KCItIil8fHYoIiEiKT8oYT1xKCksYj1JKCksYj1aLmNyZWF0ZVVuYXJ5RXhwcmVzc2lvbihhLnZhbHVlLGIpKTp3KCJkZWxldGUiKXx8dygidm9pZCIpfHx3KCJ0eXBlb2YiKT9zKHt9LFYuVW5leHBlY3RlZFRva2VuKTpiPWFiKCksYn1mdW5jdGlvbiBKKGEpe3ZhciBiPTA7aWYoYS50eXBlIT09Uy5QdW5jdHVhdG9yJiZhLnR5cGUhPT1TLktleXdvcmQpcmV0dXJuIDA7c3dpdGNoKGEudmFsdWUpe2Nhc2UifHwiOmI9MTticmVhaztjYXNlIiYmIjpiPTI7YnJlYWs7Y2FzZSI9PSI6Y2FzZSIhPSI6Y2FzZSI9PT0iOmNhc2UiIT09IjpiPTY7YnJlYWs7Y2FzZSI8IjpjYXNlIj4iOmNhc2UiPD0iOmNhc2UiPj0iOmNhc2UiaW5zdGFuY2VvZiI6Yj03O2JyZWFrO2Nhc2UiaW4iOmI9NzticmVhaztjYXNlIisiOmNhc2UiLSI6Yj05O2JyZWFrO2Nhc2UiKiI6Y2FzZSIvIjpjYXNlIiUiOmI9MTF9cmV0dXJuIGJ9ZnVuY3Rpb24gSygpe3ZhciBhLGIsYyxkLGUsZixnLGg7aWYoZz1JKCksYj0kLGM9SihiKSwwPT09YylyZXR1cm4gZztmb3IoYi5wcmVjPWMscSgpLGU9SSgpLGQ9W2csYixlXTsoYz1KKCQpKT4wOyl7Zm9yKDtkLmxlbmd0aD4yJiZjPD1kW2QubGVuZ3RoLTJdLnByZWM7KWU9ZC5wb3AoKSxmPWQucG9wKCkudmFsdWUsZz1kLnBvcCgpLGE9Wi5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGYsZyxlKSxkLnB1c2goYSk7Yj1xKCksYi5wcmVjPWMsZC5wdXNoKGIpLGE9SSgpLGQucHVzaChhKX1mb3IoaD1kLmxlbmd0aC0xLGE9ZFtoXTtoPjE7KWE9Wi5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGRbaC0xXS52YWx1ZSxkW2gtMl0sYSksaC09MjtyZXR1cm4gYX1mdW5jdGlvbiBMKCl7dmFyIGEsYixjO3JldHVybiBhPUsoKSx2KCI/IikmJihxKCksYj1MKCksdSgiOiIpLGM9TCgpLGE9Wi5jcmVhdGVDb25kaXRpb25hbEV4cHJlc3Npb24oYSxiLGMpKSxhfWZ1bmN0aW9uIE0oKXt2YXIgYSxiO3JldHVybiBhPXEoKSxhLnR5cGUhPT1TLklkZW50aWZpZXImJnQoYSksYj12KCIoIik/RCgpOltdLFouY3JlYXRlRmlsdGVyKGEudmFsdWUsYil9ZnVuY3Rpb24gTigpe2Zvcig7digifCIpOylxKCksTSgpfWZ1bmN0aW9uIE8oKXtpKCkscigpO3ZhciBhPWJiKCk7YSYmKCIsIj09PSQudmFsdWV8fCJpbiI9PSQudmFsdWUmJmEudHlwZT09PVUuSWRlbnRpZmllcj9RKGEpOihOKCksImFzIj09PSQudmFsdWU/UChhKTpaLmNyZWF0ZVRvcExldmVsKGEpKSksJC50eXBlIT09Uy5FT0YmJnQoJCl9ZnVuY3Rpb24gUChhKXtxKCk7dmFyIGI9cSgpLnZhbHVlO1ouY3JlYXRlQXNFeHByZXNzaW9uKGEsYil9ZnVuY3Rpb24gUShhKXt2YXIgYjsiLCI9PT0kLnZhbHVlJiYocSgpLCQudHlwZSE9PVMuSWRlbnRpZmllciYmdCgkKSxiPXEoKS52YWx1ZSkscSgpO3ZhciBjPWJiKCk7TigpLFouY3JlYXRlSW5FeHByZXNzaW9uKGEubmFtZSxiLGMpfWZ1bmN0aW9uIFIoYSxiKXtyZXR1cm4gWj1iLFc9YSxYPTAsWT1XLmxlbmd0aCwkPW51bGwsXz17bGFiZWxTZXQ6e319LE8oKX12YXIgUyxULFUsVixXLFgsWSxaLCQsXztTPXtCb29sZWFuTGl0ZXJhbDoxLEVPRjoyLElkZW50aWZpZXI6MyxLZXl3b3JkOjQsTnVsbExpdGVyYWw6NSxOdW1lcmljTGl0ZXJhbDo2LFB1bmN0dWF0b3I6NyxTdHJpbmdMaXRlcmFsOjh9LFQ9e30sVFtTLkJvb2xlYW5MaXRlcmFsXT0iQm9vbGVhbiIsVFtTLkVPRl09IjxlbmQ+IixUW1MuSWRlbnRpZmllcl09IklkZW50aWZpZXIiLFRbUy5LZXl3b3JkXT0iS2V5d29yZCIsVFtTLk51bGxMaXRlcmFsXT0iTnVsbCIsVFtTLk51bWVyaWNMaXRlcmFsXT0iTnVtZXJpYyIsVFtTLlB1bmN0dWF0b3JdPSJQdW5jdHVhdG9yIixUW1MuU3RyaW5nTGl0ZXJhbF09IlN0cmluZyIsVT17QXJyYXlFeHByZXNzaW9uOiJBcnJheUV4cHJlc3Npb24iLEJpbmFyeUV4cHJlc3Npb246IkJpbmFyeUV4cHJlc3Npb24iLENhbGxFeHByZXNzaW9uOiJDYWxsRXhwcmVzc2lvbiIsQ29uZGl0aW9uYWxFeHByZXNzaW9uOiJDb25kaXRpb25hbEV4cHJlc3Npb24iLEVtcHR5U3RhdGVtZW50OiJFbXB0eVN0YXRlbWVudCIsRXhwcmVzc2lvblN0YXRlbWVudDoiRXhwcmVzc2lvblN0YXRlbWVudCIsSWRlbnRpZmllcjoiSWRlbnRpZmllciIsTGl0ZXJhbDoiTGl0ZXJhbCIsTGFiZWxlZFN0YXRlbWVudDoiTGFiZWxlZFN0YXRlbWVudCIsTG9naWNhbEV4cHJlc3Npb246IkxvZ2ljYWxFeHByZXNzaW9uIixNZW1iZXJFeHByZXNzaW9uOiJNZW1iZXJFeHByZXNzaW9uIixPYmplY3RFeHByZXNzaW9uOiJPYmplY3RFeHByZXNzaW9uIixQcm9ncmFtOiJQcm9ncmFtIixQcm9wZXJ0eToiUHJvcGVydHkiLFRoaXNFeHByZXNzaW9uOiJUaGlzRXhwcmVzc2lvbiIsVW5hcnlFeHByZXNzaW9uOiJVbmFyeUV4cHJlc3Npb24ifSxWPXtVbmV4cGVjdGVkVG9rZW46IlVuZXhwZWN0ZWQgdG9rZW4gJTAiLFVua25vd25MYWJlbDoiVW5kZWZpbmVkIGxhYmVsICclMCciLFJlZGVjbGFyYXRpb246IiUwICclMScgaGFzIGFscmVhZHkgYmVlbiBkZWNsYXJlZCJ9O3ZhciBhYj1ILGJiPUw7YS5lc3ByaW1hPXtwYXJzZTpSfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiLGQsZSl7dmFyIGY7dHJ5e2lmKGY9YyhhKSxmLnNjb3BlSWRlbnQmJihkLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fCJURU1QTEFURSIhPT1kLnRhZ05hbWV8fCJiaW5kIiE9PWImJiJyZXBlYXQiIT09YikpdGhyb3cgRXJyb3IoImFzIGFuZCBpbiBjYW4gb25seSBiZSB1c2VkIHdpdGhpbiA8dGVtcGxhdGUgYmluZC9yZXBlYXQ+Iil9Y2F0Y2goZyl7cmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiSW52YWxpZCBleHByZXNzaW9uIHN5bnRheDogIithLGcpfXJldHVybiBmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Zi5nZXRCaW5kaW5nKGEsZSxjKTtyZXR1cm4gZi5zY29wZUlkZW50JiZkJiYoYi5wb2x5bWVyRXhwcmVzc2lvblNjb3BlSWRlbnRfPWYuc2NvcGVJZGVudCxmLmluZGV4SWRlbnQmJihiLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF89Zi5pbmRleElkZW50KSksZH19ZnVuY3Rpb24gYyhhKXt2YXIgYj10W2FdO2lmKCFiKXt2YXIgYz1uZXcgajtlc3ByaW1hLnBhcnNlKGEsYyksYj1uZXcgbChjKSx0W2FdPWJ9cmV0dXJuIGJ9ZnVuY3Rpb24gZChhKXt0aGlzLnZhbHVlPWEsdGhpcy52YWx1ZUZuXz12b2lkIDB9ZnVuY3Rpb24gZShhKXt0aGlzLm5hbWU9YSx0aGlzLnBhdGg9UGF0aC5nZXQoYSl9ZnVuY3Rpb24gZihhLGIsYyl7IlsiPT1jJiZiIGluc3RhbmNlb2YgZCYmUGF0aC5nZXQoYi52YWx1ZSkudmFsaWQmJihjPSIuIixiPW5ldyBlKGIudmFsdWUpKSx0aGlzLmR5bmFtaWNEZXBzPSJmdW5jdGlvbiI9PXR5cGVvZiBhfHxhLmR5bmFtaWMsdGhpcy5keW5hbWljPSJmdW5jdGlvbiI9PXR5cGVvZiBifHxiLmR5bmFtaWN8fCJbIj09Yyx0aGlzLnNpbXBsZVBhdGg9IXRoaXMuZHluYW1pYyYmIXRoaXMuZHluYW1pY0RlcHMmJmIgaW5zdGFuY2VvZiBlJiYoYSBpbnN0YW5jZW9mIGZ8fGEgaW5zdGFuY2VvZiBlKSx0aGlzLm9iamVjdD10aGlzLnNpbXBsZVBhdGg/YTppKGEpLHRoaXMucHJvcGVydHk9Ii4iPT1jP2I6aShiKX1mdW5jdGlvbiBnKGEsYil7dGhpcy5uYW1lPWEsdGhpcy5hcmdzPVtdO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXRoaXMuYXJnc1tjXT1pKGJbY10pfWZ1bmN0aW9uIGgoKXt0aHJvdyBFcnJvcigiTm90IEltcGxlbWVudGVkIil9ZnVuY3Rpb24gaShhKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYT9hOmEudmFsdWVGbigpfWZ1bmN0aW9uIGooKXt0aGlzLmV4cHJlc3Npb249bnVsbCx0aGlzLmZpbHRlcnM9W10sdGhpcy5kZXBzPXt9LHRoaXMuY3VycmVudFBhdGg9dm9pZCAwLHRoaXMuc2NvcGVJZGVudD12b2lkIDAsdGhpcy5pbmRleElkZW50PXZvaWQgMCx0aGlzLmR5bmFtaWNEZXBzPSExfWZ1bmN0aW9uIGsoYSl7dGhpcy52YWx1ZV89YX1mdW5jdGlvbiBsKGEpe2lmKHRoaXMuc2NvcGVJZGVudD1hLnNjb3BlSWRlbnQsdGhpcy5pbmRleElkZW50PWEuaW5kZXhJZGVudCwhYS5leHByZXNzaW9uKXRocm93IEVycm9yKCJObyBleHByZXNzaW9uIGZvdW5kLiIpO3RoaXMuZXhwcmVzc2lvbj1hLmV4cHJlc3Npb24saSh0aGlzLmV4cHJlc3Npb24pLHRoaXMuZmlsdGVycz1hLmZpbHRlcnMsdGhpcy5keW5hbWljRGVwcz1hLmR5bmFtaWNEZXBzfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIFN0cmluZyhhKS5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBuKGEpe3JldHVybiJvIj09PWFbMF0mJiJuIj09PWFbMV0mJiItIj09PWFbMl19ZnVuY3Rpb24gbyhhLGIpe2Zvcig7YVt4XSYmIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGIpOylhPWFbeF07cmV0dXJuIGF9ZnVuY3Rpb24gcChhLGIpe2lmKDA9PWIubGVuZ3RoKXJldHVybiB2b2lkIDA7aWYoMT09Yi5sZW5ndGgpcmV0dXJuIG8oYSxiWzBdKTtmb3IodmFyIGM9MDtudWxsIT1hJiZjPGIubGVuZ3RoLTE7YysrKWE9YVtiW2NdXTtyZXR1cm4gYX1mdW5jdGlvbiBxKGEsYixjKXt2YXIgZD1iLnN1YnN0cmluZygzKTtyZXR1cm4gZD13W2RdfHxkLGZ1bmN0aW9uKGIsZSxmKXtmdW5jdGlvbiBnKCl7cmV0dXJuInt7ICIrYSsiIH19In12YXIgaCxpLGo7cmV0dXJuIGo9ImZ1bmN0aW9uIj09dHlwZW9mIGMucmVzb2x2ZUV2ZW50SGFuZGxlcj9mdW5jdGlvbihkKXtoPWh8fGMucmVzb2x2ZUV2ZW50SGFuZGxlcihiLGEsZSksaChkLGQuZGV0YWlsLGQuY3VycmVudFRhcmdldCksUGxhdGZvcm0mJiJmdW5jdGlvbiI9PXR5cGVvZiBQbGF0Zm9ybS5mbHVzaCYmUGxhdGZvcm0uZmx1c2goKX06ZnVuY3Rpb24oYyl7aD1ofHxhLmdldFZhbHVlRnJvbShiKSxpPWl8fHAoYixhLGUpLGguYXBwbHkoaSxbYyxjLmRldGFpbCxjLmN1cnJlbnRUYXJnZXRdKSxQbGF0Zm9ybSYmImZ1bmN0aW9uIj09dHlwZW9mIFBsYXRmb3JtLmZsdXNoJiZQbGF0Zm9ybS5mbHVzaCgpfSxlLmFkZEV2ZW50TGlzdGVuZXIoZCxqKSxmP3ZvaWQgMDp7b3BlbjpnLGRpc2NhcmRDaGFuZ2VzOmcsY2xvc2U6ZnVuY3Rpb24oKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxqKX19fX1mdW5jdGlvbiByKGEpe3N3aXRjaChhKXtjYXNlIiI6cmV0dXJuITE7Y2FzZSJmYWxzZSI6Y2FzZSJudWxsIjpjYXNlInRydWUiOnJldHVybiEwfXJldHVybiBpc05hTihOdW1iZXIoYSkpPyExOiEwfWZ1bmN0aW9uIHMoKXt9dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtkLnByb3RvdHlwZT17dmFsdWVGbjpmdW5jdGlvbigpe2lmKCF0aGlzLnZhbHVlRm5fKXt2YXIgYT10aGlzLnZhbHVlO3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oKXtyZXR1cm4gYX19cmV0dXJuIHRoaXMudmFsdWVGbl99fSxlLnByb3RvdHlwZT17dmFsdWVGbjpmdW5jdGlvbigpe2lmKCF0aGlzLnZhbHVlRm5fKXt2YXIgYT0odGhpcy5uYW1lLHRoaXMucGF0aCk7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbihiLGMpe3JldHVybiBjJiZjLmFkZFBhdGgoYixhKSxhLmdldFZhbHVlRnJvbShiKX19cmV0dXJuIHRoaXMudmFsdWVGbl99LHNldFZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDE9PXRoaXMucGF0aC5sZW5ndGgsYT1vKGEsdGhpcy5wYXRoWzBdKSx0aGlzLnBhdGguc2V0VmFsdWVGcm9tKGEsYil9fSxmLnByb3RvdHlwZT17Z2V0IGZ1bGxQYXRoKCl7aWYoIXRoaXMuZnVsbFBhdGhfKXt2YXIgYT10aGlzLm9iamVjdCBpbnN0YW5jZW9mIGU/dGhpcy5vYmplY3QubmFtZTp0aGlzLm9iamVjdC5mdWxsUGF0aDt0aGlzLmZ1bGxQYXRoXz1QYXRoLmdldChhKyIuIit0aGlzLnByb3BlcnR5Lm5hbWUpfXJldHVybiB0aGlzLmZ1bGxQYXRoX30sdmFsdWVGbjpmdW5jdGlvbigpe2lmKCF0aGlzLnZhbHVlRm5fKXt2YXIgYT10aGlzLm9iamVjdDtpZih0aGlzLnNpbXBsZVBhdGgpe3ZhciBiPXRoaXMuZnVsbFBhdGg7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbihhLGMpe3JldHVybiBjJiZjLmFkZFBhdGgoYSxiKSxiLmdldFZhbHVlRnJvbShhKX19ZWxzZSBpZih0aGlzLnByb3BlcnR5IGluc3RhbmNlb2YgZSl7dmFyIGI9UGF0aC5nZXQodGhpcy5wcm9wZXJ0eS5uYW1lKTt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGMsZCl7dmFyIGU9YShjLGQpO3JldHVybiBkJiZkLmFkZFBhdGgoZSxiKSxiLmdldFZhbHVlRnJvbShlKX19ZWxzZXt2YXIgYz10aGlzLnByb3BlcnR5O3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oYixkKXt2YXIgZT1hKGIsZCksZj1jKGIsZCk7cmV0dXJuIGQmJmQuYWRkUGF0aChlLGYpLGU/ZVtmXTp2b2lkIDB9fX1yZXR1cm4gdGhpcy52YWx1ZUZuX30sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnNpbXBsZVBhdGgpcmV0dXJuIHRoaXMuZnVsbFBhdGguc2V0VmFsdWVGcm9tKGEsYiksYjt2YXIgYz10aGlzLm9iamVjdChhKSxkPXRoaXMucHJvcGVydHkgaW5zdGFuY2VvZiBlP3RoaXMucHJvcGVydHkubmFtZTp0aGlzLnByb3BlcnR5KGEpO3JldHVybiBjW2RdPWJ9fSxnLnByb3RvdHlwZT17dHJhbnNmb3JtOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Y1t0aGlzLm5hbWVdLGc9ZDtpZihmKWc9dm9pZCAwO2Vsc2UgaWYoZj1nW3RoaXMubmFtZV0sIWYpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiQ2Fubm90IGZpbmQgZmlsdGVyOiAiK3RoaXMubmFtZSk7aWYoYj9mPWYudG9Nb2RlbDoiZnVuY3Rpb24iPT10eXBlb2YgZi50b0RPTSYmKGY9Zi50b0RPTSksImZ1bmN0aW9uIiE9dHlwZW9mIGYpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiTm8gIisoYj8idG9Nb2RlbCI6InRvRE9NIikrIiBmb3VuZCBvbiIrdGhpcy5uYW1lKTtmb3IodmFyIGg9W2FdLGo9MDtqPHRoaXMuYXJncy5sZW5ndGg7aisrKWhbaisxXT1pKHRoaXMuYXJnc1tqXSkoZCxlKTtyZXR1cm4gZi5hcHBseShnLGgpfX07dmFyIHU9eyIrIjpmdW5jdGlvbihhKXtyZXR1cm4rYX0sIi0iOmZ1bmN0aW9uKGEpe3JldHVybi1hfSwiISI6ZnVuY3Rpb24oYSl7cmV0dXJuIWF9fSx2PXsiKyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStifSwiLSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS1ifSwiKiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSpifSwiLyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS9ifSwiJSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSVifSwiPCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj5hfSwiPiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT5ifSwiPD0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI+PWF9LCI+PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT49Yn0sIj09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPT1ifSwiIT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPWJ9LCI9PT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifSwiIT09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhIT09Yn0sIiYmIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJiZifSwifHwiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGF8fGJ9fTtqLnByb3RvdHlwZT17Y3JlYXRlVW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYil7aWYoIXVbYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7cmV0dXJuIGI9aShiKSxmdW5jdGlvbihjLGQpe3JldHVybiB1W2FdKGIoYyxkKSl9fSxjcmVhdGVCaW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtpZighdlthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj1pKGIpLGM9aShjKSxmdW5jdGlvbihkLGUpe3JldHVybiB2W2FdKGIoZCxlKSxjKGQsZSkpfX0sY3JlYXRlQ29uZGl0aW9uYWxFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYT1pKGEpLGI9aShiKSxjPWkoYyksZnVuY3Rpb24oZCxlKXtyZXR1cm4gYShkLGUpP2IoZCxlKTpjKGQsZSl9fSxjcmVhdGVJZGVudGlmaWVyOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBlKGEpO3JldHVybiBiLnR5cGU9IklkZW50aWZpZXIiLGJ9LGNyZWF0ZU1lbWJlckV4cHJlc3Npb246ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW5ldyBmKGIsYyxhKTtyZXR1cm4gZC5keW5hbWljRGVwcyYmKHRoaXMuZHluYW1pY0RlcHM9ITApLGR9LGNyZWF0ZUxpdGVyYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBkKGEudmFsdWUpfSxjcmVhdGVBcnJheUV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXT1pKGFbYl0pO3JldHVybiBmdW5jdGlvbihiLGMpe2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmxlbmd0aDtlKyspZC5wdXNoKGFbZV0oYixjKSk7cmV0dXJuIGR9fSxjcmVhdGVQcm9wZXJ0eTpmdW5jdGlvbihhLGIsYyl7cmV0dXJue2tleTpiIGluc3RhbmNlb2YgZT9iLm5hbWU6Yi52YWx1ZSx2YWx1ZTpjfX0sY3JlYXRlT2JqZWN0RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLnZhbHVlPWkoYVtiXS52YWx1ZSk7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Zm9yKHZhciBkPXt9LGU9MDtlPGEubGVuZ3RoO2UrKylkW2FbZV0ua2V5XT1hW2VdLnZhbHVlKGIsYyk7cmV0dXJuIGR9fSxjcmVhdGVGaWx0ZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLmZpbHRlcnMucHVzaChuZXcgZyhhLGIpKX0sY3JlYXRlQXNFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYil7dGhpcy5leHByZXNzaW9uPWEsdGhpcy5zY29wZUlkZW50PWJ9LGNyZWF0ZUluRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7dGhpcy5leHByZXNzaW9uPWMsdGhpcy5zY29wZUlkZW50PWEsdGhpcy5pbmRleElkZW50PWJ9LGNyZWF0ZVRvcExldmVsOmZ1bmN0aW9uKGEpe3RoaXMuZXhwcmVzc2lvbj1hfSxjcmVhdGVUaGlzRXhwcmVzc2lvbjpofSxrLnByb3RvdHlwZT17b3BlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlX30sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV99LGRlbGl2ZXI6ZnVuY3Rpb24oKXt9LGNsb3NlOmZ1bmN0aW9uKCl7fX0sbC5wcm90b3R5cGU9e2dldEJpbmRpbmc6ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXtpZihoKXJldHVybiBoPSExLGc7aS5keW5hbWljRGVwcyYmZi5zdGFydFJlc2V0KCk7dmFyIGM9aS5nZXRWYWx1ZShhLGkuZHluYW1pY0RlcHM/Zjp2b2lkIDAsYik7cmV0dXJuIGkuZHluYW1pY0RlcHMmJmYuZmluaXNoUmVzZXQoKSxjfWZ1bmN0aW9uIGUoYyl7cmV0dXJuIGkuc2V0VmFsdWUoYSxjLGIpLGN9aWYoYylyZXR1cm4gdGhpcy5nZXRWYWx1ZShhLHZvaWQgMCxiKTt2YXIgZj1uZXcgQ29tcG91bmRPYnNlcnZlcixnPXRoaXMuZ2V0VmFsdWUoYSxmLGIpLGg9ITAsaT10aGlzO3JldHVybiBuZXcgT2JzZXJ2ZXJUcmFuc2Zvcm0oZixkLGUsITApfSxnZXRWYWx1ZTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWkodGhpcy5leHByZXNzaW9uKShhLGIpLGU9MDtlPHRoaXMuZmlsdGVycy5sZW5ndGg7ZSsrKWQ9dGhpcy5maWx0ZXJzW2VdLnRyYW5zZm9ybShkLCExLGMsYSxiKTtyZXR1cm4gZH0sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD10aGlzLmZpbHRlcnM/dGhpcy5maWx0ZXJzLmxlbmd0aDowO2QtLT4wOyliPXRoaXMuZmlsdGVyc1tkXS50cmFuc2Zvcm0oYiwhMCxjLGEpO3JldHVybiB0aGlzLmV4cHJlc3Npb24uc2V0VmFsdWU/dGhpcy5leHByZXNzaW9uLnNldFZhbHVlKGEsYik6dm9pZCAwfX07dmFyIHc9e307WyJ3ZWJraXRBbmltYXRpb25TdGFydCIsIndlYmtpdEFuaW1hdGlvbkVuZCIsIndlYmtpdFRyYW5zaXRpb25FbmQiLCJET01Gb2N1c091dCIsIkRPTUZvY3VzSW4iLCJET01Nb3VzZVNjcm9sbCJdLmZvckVhY2goZnVuY3Rpb24oYSl7d1thLnRvTG93ZXJDYXNlKCldPWF9KTt2YXIgeD0iQCIrTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7cy5wcm90b3R5cGU9e3N0eWxlT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWIucHVzaChtKGMpKyI6ICIrYVtjXSk7cmV0dXJuIGIuam9pbigiOyAiKX0sdG9rZW5MaXN0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWFbY10mJmIucHVzaChjKTtyZXR1cm4gYi5qb2luKCIgIil9LHByZXBhcmVJbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZDpmdW5jdGlvbihhKXt2YXIgYj1hLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF87aWYoYilyZXR1cm4gZnVuY3Rpb24oYSxjKXthLm1vZGVsW2JdPWN9fSxwcmVwYXJlQmluZGluZzpmdW5jdGlvbihhLGMsZCl7dmFyIGU9UGF0aC5nZXQoYSk7aWYobihjKSlyZXR1cm4gZS52YWxpZD9xKGUsYyx0aGlzKTp2b2lkIGNvbnNvbGUuZXJyb3IoIm9uLSogYmluZGluZ3MgbXVzdCBiZSBzaW1wbGUgcGF0aCBleHByZXNzaW9ucyIpO3tpZihyKGEpfHwhZS52YWxpZClyZXR1cm4gYihhLGMsZCx0aGlzKTtpZigxPT1lLmxlbmd0aClyZXR1cm4gZnVuY3Rpb24oYSxiLGMpe2lmKGMpcmV0dXJuIGUuZ2V0VmFsdWVGcm9tKGEpO3ZhciBkPW8oYSxlWzBdKTtyZXR1cm4gbmV3IFBhdGhPYnNlcnZlcihkLGUpfX19LHByZXBhcmVJbnN0YW5jZU1vZGVsOmZ1bmN0aW9uKGEpe3ZhciBiPWEucG9seW1lckV4cHJlc3Npb25TY29wZUlkZW50XztpZihiKXt2YXIgYz1hLnRlbXBsYXRlSW5zdGFuY2U/YS50ZW1wbGF0ZUluc3RhbmNlLm1vZGVsOmEubW9kZWwsZD1hLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF87cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBlPU9iamVjdC5jcmVhdGUoYyk7cmV0dXJuIGVbYl09YSxlW2RdPXZvaWQgMCxlW3hdPWMsZX19fX0sYS5Qb2x5bWVyRXhwcmVzc2lvbnM9cyxhLmV4cG9zZUdldEV4cHJlc3Npb24mJihhLmdldEV4cHJlc3Npb25fPWMpLGEuUG9seW1lckV4cHJlc3Npb25zLnByZXBhcmVFdmVudEJpbmRpbmc9cX0odGhpcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2V8fChlPSEwLGEuZW5kT2ZNaWNyb3Rhc2soZnVuY3Rpb24oKXtlPSExLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXAoIlBsYXRmb3JtLmZsdXNoKCkiKSxhLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCksbG9nRmxhZ3MuZGF0YSYmY29uc29sZS5ncm91cEVuZCgpCn0pKX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2MudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2QuaW5zZXJ0QmVmb3JlKGMsZC5maXJzdENoaWxkKTt2YXIgZTtpZihPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlKWI9ZnVuY3Rpb24oKXt9O2Vsc2V7dmFyIGY9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLGEuZmx1c2hQb2xsPXNldEludGVydmFsKGIsZil9KX1pZih3aW5kb3cuQ3VzdG9tRWxlbWVudHMmJiFDdXN0b21FbGVtZW50cy51c2VOYXRpdmUpe3ZhciBnPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlO0RvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Zy5jYWxsKHRoaXMsYSxiKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChjKSxjfX1hLmZsdXNoPWJ9KHdpbmRvdy5QbGF0Zm9ybSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsYXRmb3JtLmpzLm1hcA==",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Sat, 08 Nov 2014 15:23:34 GMT",
                    "Content-Length": "194524",
                    "Date": "Sat, 08 Nov 2014 15:23:34 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}