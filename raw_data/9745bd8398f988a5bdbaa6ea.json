{
    "url": "http://localhost:9999/jidesoft/jidejs/demo/webcomponents/components/polymer/polymer.min.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Cross-site scripting (DOM-based)",
    "issueType": 2097936,
    "severity": "High",
    "confidence": "Firm",
    "issueBackground": "DOM-based cross-site scripting vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the HTML document in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause JavaScript code supplied by the attacker to execute within the user's browser in the context of that user's session with the application.<br><br>The attacker-supplied code can perform a wide variety of actions, such as stealing the victim's session token or login credentials, performing arbitrary actions on the victim's behalf, and logging their keystrokes.<br><br>Users can be induced to visit the attacker's crafted URL in various ways, similar to the usual attack delivery vectors for reflected cross-site scripting vulnerabilities. ",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based cross-site scripting vulnerabilities is not to dynamically write data into the HTML document that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing script code into the document. In many cases, the relevant data can be validated on a whitelist basis, to allow only content that is known to be safe. In other cases, it will be necessary to sanitize or encode the data. This can be a complex task, and depending on the context that the data is to be inserted may need to involve a combination of JavaScript escaping, HTML encoding, and URL encoding, in the appropriate sequence.",
    "issueDetail": "The application may be vulnerable to DOM-based cross-site scripting. Data is read from <b>document.URL</b> and written to <b>the 'setAttribute()' function of a DOM element</b> via the following statement:<ul><li>d.setAttribu...(\"href\" , document.baseURI|| document.URL) </li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/jidesoft/jidejs/demo/webcomponents/components/polymer/polymer.min.js",
                "path": "/jidesoft/jidejs/demo/webcomponents/components/polymer/polymer.min.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9qaWRlc29mdC9qaWRlanMvZGVtby93ZWJjb21wb25lbnRzL2NvbXBvbmVudHMvcG9seW1lci9wb2x5bWVyLm1pbi5qcyBIVFRQLzEuMQ0KSG9zdDogbG9jYWxob3N0Ojk5OTkNCg0K",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTY3MjYwDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBGcmksIDA3IE5vdiAyMDE0IDA1OjM2OjI4IEdNVA0KTGFzdC1Nb2RpZmllZDogRnJpLCAwNyBOb3YgMjAxNCAwNTozNjoyNyBHTVQNCg0KLy8gQ29weXJpZ2h0IChjKSAyMDEyIFRoZSBQb2x5bWVyIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCi8vCi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAovLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlCi8vIG1ldDoKLy8KLy8gICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAovLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCi8vICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZQovLyBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyCi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUKLy8gZGlzdHJpYnV0aW9uLgovLyAgICAqIE5laXRoZXIgdGhlIG5hbWUgb2YgR29vZ2xlIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMKLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20KLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KLy8KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUwovLyAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVAovLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IKLy8gQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQKLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsCi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QKLy8gTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsCi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWQovLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUCi8vIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRQovLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgoKLy8gQHZlcnNpb24gMC4wLjIwMTMwOTEyCmZ1bmN0aW9uIFBvaW50ZXJHZXN0dXJlRXZlbnQoYSxiKXt2YXIgYz1ifHx7fSxkPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLGU9e2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH07cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24oYSl7YSBpbiBjJiYoZVthXT1jW2FdKX0pLGQuaW5pdEV2ZW50KGEsZS5idWJibGVzLGUuY2FuY2VsYWJsZSksT2JqZWN0LmtleXMoYykuZm9yRWFjaChmdW5jdGlvbihhKXtkW2FdPWJbYV19KSxkLnByZXZlbnRUYXA9dGhpcy5wcmV2ZW50VGFwLGR9dmFyIFNpZGVUYWJsZTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIFdlYWtNYXAmJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRmlyZWZveC8iKTwwP1NpZGVUYWJsZT1XZWFrTWFwOiFmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxiPURhdGUubm93KCklMWU5O1NpZGVUYWJsZT1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGIrKyArIl9fIil9LFNpZGVUYWJsZS5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihiLGMpe3ZhciBkPWJbdGhpcy5uYW1lXTtkJiZkWzBdPT09Yj9kWzFdPWM6YShiLHRoaXMubmFtZSx7dmFsdWU6W2IsY10sd3JpdGFibGU6ITB9KX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybihiPWFbdGhpcy5uYW1lXSkmJmJbMF09PT1hP2JbMV06dm9pZCAwfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt0aGlzLnNldChhLHZvaWQgMCl9fX0oKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe2Z1bmN0aW9uIGEoYSl7InNwbGljZSI9PT1hWzBdLnR5cGUmJiJzcGxpY2UiPT09YVsxXS50eXBlJiYoYj0hMCl9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIE9iamVjdC5vYnNlcnZlfHwiZnVuY3Rpb24iIT10eXBlb2YgQXJyYXkub2JzZXJ2ZSlyZXR1cm4hMTt2YXIgYj0hMSxjPVswXTtyZXR1cm4gQXJyYXkub2JzZXJ2ZShjLGEpLGNbMV09MSxjLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxifWZ1bmN0aW9uIGMoKXtpZihhLmRvY3VtZW50JiYic2VjdXJpdHlQb2xpY3kiaW4gYS5kb2N1bWVudCYmIWEuZG9jdW1lbnQuc2VjdXJpdHlQb2xpY3kuYWxsb3dzRXZhbClyZXR1cm4hMTt0cnl7dmFyIGI9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtyZXR1cm4gYigpfWNhdGNoKGMpe3JldHVybiExfX1mdW5jdGlvbiBkKGEpe3JldHVybithPT09YT4+PjB9ZnVuY3Rpb24gZShhKXtyZXR1cm4rYX1mdW5jdGlvbiBmKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYT09PWI/MCE9PWF8fDEvYT09PTEvYjpIKGEpJiZIKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBoKGEpe3JldHVybiJzdHJpbmciIT10eXBlb2YgYT8hMTooYT1hLnRyaW0oKSwiIj09YT8hMDoiLiI9PWFbMF0/ITE6UC50ZXN0KGEpKX1mdW5jdGlvbiBpKGEsYil7aWYoYiE9PVEpdGhyb3cgRXJyb3IoIlVzZSBQYXRoLmdldCB0byByZXRyaWV2ZSBwYXRoIG9iamVjdHMiKTtyZXR1cm4iIj09YS50cmltKCk/dGhpczpkKGEpPyh0aGlzLnB1c2goYSksdGhpcyk6KGEuc3BsaXQoL1xzKlwuXHMqLykuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhfSkuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnB1c2goYSl9LHRoaXMpLEcmJiFGJiZ0aGlzLmxlbmd0aCYmKHRoaXMuZ2V0VmFsdWVGcm9tPXRoaXMuY29tcGlsZWRHZXRWYWx1ZUZyb21GbigpKSx2b2lkIDApfWZ1bmN0aW9uIGooYSl7aWYoYSBpbnN0YW5jZW9mIGkpcmV0dXJuIGE7bnVsbD09YSYmKGE9IiIpLCJzdHJpbmciIT10eXBlb2YgYSYmKGE9U3RyaW5nKGEpKTt2YXIgYj1SW2FdO2lmKGIpcmV0dXJuIGI7aWYoIWgoYSkpcmV0dXJuIFM7dmFyIGI9bmV3IGkoYSxRKTtyZXR1cm4gUlthXT1iLGJ9ZnVuY3Rpb24gayhiKXtmb3IodmFyIGM9MDtUPmMmJmIuY2hlY2soKTspYi5yZXBvcnQoKSxjKys7YS50ZXN0aW5nRXhwb3NlQ3ljbGVDb3VudCYmKGEuZGlydHlDaGVja0N5Y2xlQ291bnQ9Yyl9ZnVuY3Rpb24gbChhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBtKGEpe3JldHVybiBsKGEuYWRkZWQpJiZsKGEucmVtb3ZlZCkmJmwoYS5jaGFuZ2VkKX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9e30sZD17fSxlPXt9O2Zvcih2YXIgZiBpbiBiKXt2YXIgZz1hW2ZdOyh2b2lkIDA9PT1nfHxnIT09YltmXSkmJihmIGluIGE/ZyE9PWJbZl0mJihlW2ZdPWcpOmRbZl09dm9pZCAwKX1mb3IodmFyIGYgaW4gYSlmIGluIGJ8fChjW2ZdPWFbZl0pO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiZhLmxlbmd0aCE9PWIubGVuZ3RoJiYoZS5sZW5ndGg9YS5sZW5ndGgpLHthZGRlZDpjLHJlbW92ZWQ6ZCxjaGFuZ2VkOmV9fWZ1bmN0aW9uIG8oYSxiKXt2YXIgYz1ifHwoQXJyYXkuaXNBcnJheShhKT9bXTp7fSk7Zm9yKHZhciBkIGluIGEpY1tkXT1hW2RdO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiYoYy5sZW5ndGg9YS5sZW5ndGgpLGN9ZnVuY3Rpb24gcChhLGIsYyxkKXtpZih0aGlzLmNsb3NlZD0hMSx0aGlzLm9iamVjdD1hLHRoaXMuY2FsbGJhY2s9Yix0aGlzLnRhcmdldD1jLHRoaXMudG9rZW49ZCx0aGlzLnJlcG9ydGluZz0hMCxGKXt2YXIgZT10aGlzO3RoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrPWZ1bmN0aW9uKGEpe2UuaW50ZXJuYWxDYWxsYmFjayhhKX19cSh0aGlzKX1mdW5jdGlvbiBxKGEpe1YmJihVLnB1c2goYSkscC5fYWxsT2JzZXJ2ZXJzQ291bnQrKyl9ZnVuY3Rpb24gcihhLGIsYyxkKXtwLmNhbGwodGhpcyxhLGIsYyxkKSx0aGlzLmNvbm5lY3QoKSx0aGlzLnN5bmMoITApfWZ1bmN0aW9uIHMoYSxiLGMsZCl7aWYoIUFycmF5LmlzQXJyYXkoYSkpdGhyb3cgRXJyb3IoIlByb3ZpZGVkIG9iamVjdCBpcyBub3QgYW4gQXJyYXkiKTtyLmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiB0KGEpe3RoaXMuYXJyPVtdLHRoaXMuY2FsbGJhY2s9YSx0aGlzLmlzT2JzZXJ2ZWQ9ITB9ZnVuY3Rpb24gdShhLGIsYyxkLGUsZyxoKXt2YXIgYj1iIGluc3RhbmNlb2YgaT9iOmooYik7cmV0dXJuIGImJmIubGVuZ3RoJiZmKGEpPyhwLmNhbGwodGhpcyxhLGMsZCxlKSx0aGlzLnZhbHVlRm49Zyx0aGlzLnNldFZhbHVlRm49aCx0aGlzLnBhdGg9Yix0aGlzLmNvbm5lY3QoKSx0aGlzLnN5bmMoITApLHZvaWQgMCk6KHRoaXMudmFsdWVfPWI/Yi5nZXRWYWx1ZUZyb20oYSk6dm9pZCAwLHRoaXMudmFsdWU9Zz9nKHRoaXMudmFsdWVfKTp0aGlzLnZhbHVlXyx0aGlzLmNsb3NlZD0hMCx2b2lkIDApfWZ1bmN0aW9uIHYoYSxiLGMsZCl7cC5jYWxsKHRoaXMsdm9pZCAwLGEsYixjKSx0aGlzLnZhbHVlRm49ZCx0aGlzLm9ic2VydmVkPVtdLHRoaXMudmFsdWVzPVtdLHRoaXMudmFsdWU9dm9pZCAwLHRoaXMub2xkVmFsdWU9dm9pZCAwLHRoaXMub2xkVmFsdWVzPXZvaWQgMCx0aGlzLnN0YXJ0ZWQ9ITF9ZnVuY3Rpb24gdyhhLGIpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3Qub2JzZXJ2ZSl7dmFyIGM9T2JqZWN0LmdldE5vdGlmaWVyKGEpO3JldHVybiBmdW5jdGlvbihkLGUpe3ZhciBmPXtvYmplY3Q6YSx0eXBlOmQsbmFtZTpifTsyPT09YXJndW1lbnRzLmxlbmd0aCYmKGYub2xkVmFsdWU9ZSksYy5ub3RpZnkoZil9fX1mdW5jdGlvbiB4KGEsYixjKXtmb3IodmFyIGQ9e30sZT17fSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07JFtnLnR5cGVdPyhnLm5hbWUgaW4gY3x8KGNbZy5uYW1lXT1nLm9sZFZhbHVlKSwidXBkYXRlZCIhPWcudHlwZSYmKCJuZXciIT1nLnR5cGU/Zy5uYW1lIGluIGQ/KGRlbGV0ZSBkW2cubmFtZV0sZGVsZXRlIGNbZy5uYW1lXSk6ZVtnLm5hbWVdPSEwOmcubmFtZSBpbiBlP2RlbGV0ZSBlW2cubmFtZV06ZFtnLm5hbWVdPSEwKSk6KGNvbnNvbGUuZXJyb3IoIlVua25vd24gY2hhbmdlUmVjb3JkIHR5cGU6ICIrZy50eXBlKSxjb25zb2xlLmVycm9yKGcpKX1mb3IodmFyIGggaW4gZClkW2hdPWFbaF07Zm9yKHZhciBoIGluIGUpZVtoXT12b2lkIDA7dmFyIGk9e307Zm9yKHZhciBoIGluIGMpaWYoIShoIGluIGR8fGggaW4gZSkpe3ZhciBqPWFbaF07Y1toXSE9PWomJihpW2hdPWopfXJldHVybnthZGRlZDpkLHJlbW92ZWQ6ZSxjaGFuZ2VkOml9fWZ1bmN0aW9uIHkoYSxiLGMpe3JldHVybntpbmRleDphLHJlbW92ZWQ6YixhZGRlZENvdW50OmN9fWZ1bmN0aW9uIHooKXt9ZnVuY3Rpb24gQShhLGIsYyxkLGUsZil7cmV0dXJuIGRiLmNhbGNTcGxpY2VzKGEsYixjLGQsZSxmKX1mdW5jdGlvbiBCKGEsYixjLGQpe3JldHVybiBjPmJ8fGE+ZD8tMTpiPT1jfHxkPT1hPzA6Yz5hP2Q+Yj9iLWM6ZC1jOmI+ZD9kLWE6Yi1hfWZ1bmN0aW9uIEMoYSxiLGMsZCl7Zm9yKHZhciBlPXkoYixjLGQpLGY9ITEsZz0wLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGk9YVtoXTtpZihpLmluZGV4Kz1nLCFmKXt2YXIgaj1CKGUuaW5kZXgsZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoLGkuaW5kZXgsaS5pbmRleCtpLmFkZGVkQ291bnQpO2lmKGo+PTApe2Euc3BsaWNlKGgsMSksaC0tLGctPWkuYWRkZWRDb3VudC1pLnJlbW92ZWQubGVuZ3RoLGUuYWRkZWRDb3VudCs9aS5hZGRlZENvdW50LWo7dmFyIGs9ZS5yZW1vdmVkLmxlbmd0aCtpLnJlbW92ZWQubGVuZ3RoLWo7aWYoZS5hZGRlZENvdW50fHxrKXt2YXIgYz1pLnJlbW92ZWQ7aWYoZS5pbmRleDxpLmluZGV4KXt2YXIgbD1lLnJlbW92ZWQuc2xpY2UoMCxpLmluZGV4LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGwsYyksYz1sfWlmKGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aD5pLmluZGV4K2kuYWRkZWRDb3VudCl7dmFyIG09ZS5yZW1vdmVkLnNsaWNlKGkuaW5kZXgraS5hZGRlZENvdW50LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsbSl9ZS5yZW1vdmVkPWMsaS5pbmRleDxlLmluZGV4JiYoZS5pbmRleD1pLmluZGV4KX1lbHNlIGY9ITB9ZWxzZSBpZihlLmluZGV4PGkuaW5kZXgpe2Y9ITAsYS5zcGxpY2UoaCwwLGUpLGgrKzt2YXIgbj1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aDtpLmluZGV4Kz1uLGcrPW59fX1mfHxhLnB1c2goZSl9ZnVuY3Rpb24gRChhLGIpe2Zvcih2YXIgYz1bXSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07c3dpdGNoKGcudHlwZSl7Y2FzZSJzcGxpY2UiOkMoYyxnLmluZGV4LGcucmVtb3ZlZC5zbGljZSgpLGcuYWRkZWRDb3VudCk7YnJlYWs7Y2FzZSJuZXciOmNhc2UidXBkYXRlZCI6Y2FzZSJkZWxldGVkIjppZighZChnLm5hbWUpKWNvbnRpbnVlO3ZhciBoPWUoZy5uYW1lKTtpZigwPmgpY29udGludWU7QyhjLGgsW2cub2xkVmFsdWVdLDEpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiVW5leHBlY3RlZCByZWNvcmQgdHlwZTogIitKU09OLnN0cmluZ2lmeShnKSl9fXJldHVybiBjfWZ1bmN0aW9uIEUoYSxiKXt2YXIgYz1bXTtyZXR1cm4gRChhLGIpLmZvckVhY2goZnVuY3Rpb24oYil7cmV0dXJuIDE9PWIuYWRkZWRDb3VudCYmMT09Yi5yZW1vdmVkLmxlbmd0aD8oYi5yZW1vdmVkWzBdIT09YVtiLmluZGV4XSYmYy5wdXNoKGIpLHZvaWQgMCk6KGM9Yy5jb25jYXQoQShhLGIuaW5kZXgsYi5pbmRleCtiLmFkZGVkQ291bnQsYi5yZW1vdmVkLDAsYi5yZW1vdmVkLmxlbmd0aCkpLHZvaWQgMCl9KSxjfXZhciBGPWIoKSxHPWMoKSxIPWEuTnVtYmVyLmlzTmFOfHxmdW5jdGlvbihiKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGImJmEuaXNOYU4oYil9LEk9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LEo9IlskX2EtekEtWl0iLEs9IlskX2EtekEtWjAtOV0iLEw9SisiKyIrSysiKiIsTT0iKD86WzAtOV18WzEtOV0rWzAtOV0rKSIsTj0iKD86IitMKyJ8IitNKyIpIixPPSIoPzoiK04rIikoPzpcXHMqXFwuXFxzKiIrTisiKSoiLFA9bmV3IFJlZ0V4cCgiXiIrTysiJCIpLFE9e30sUj17fTtpLmdldD1qLGkucHJvdG90eXBlPUkoe19fcHJvdG9fXzpbXSx2YWxpZDohMCx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmpvaW4oIi4iKX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKG51bGw9PWEpcmV0dXJuO2ImJmIub2JzZXJ2ZShhKSxhPWFbdGhpc1tjXV19cmV0dXJuIGF9LGNvbXBpbGVkR2V0VmFsdWVGcm9tRm46ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8nWyInK2ErJyJdJzoiLiIrYX0pLGI9IiIsYz0ib2JqIjtiKz0iaWYgKG9iaiAhPSBudWxsIjtmb3IodmFyIGU9MDtlPHRoaXMubGVuZ3RoLTE7ZSsrKXRoaXNbZV0sYys9YVtlXSxiKz0iICYmXG4gICAgICIrYysiICE9IG51bGwiO3JldHVybiBiKz0iKVxuIixjKz1hW2VdLGIrPSIgIHJldHVybiAiK2MrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixiKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKCFmKGEpKXJldHVybiExO2E9YVt0aGlzW2NdXX1yZXR1cm4gZihhKT8oYVt0aGlzW2NdXT1iLCEwKTohMX19KTt2YXIgUz1uZXcgaSgiIixRKTtTLnZhbGlkPSExLFMuZ2V0VmFsdWVGcm9tPVMuc2V0VmFsdWVGcm9tPWZ1bmN0aW9uKCl7fTt2YXIgVD0xZTM7cC5wcm90b3R5cGU9e2ludGVybmFsQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dGhpcy5jbG9zZWR8fHRoaXMucmVwb3J0aW5nJiZ0aGlzLmNoZWNrKGEpJiYodGhpcy5yZXBvcnQoKSx0aGlzLnRlc3RpbmdSZXN1bHRzJiYodGhpcy50ZXN0aW5nUmVzdWx0cy5hbnlDaGFuZ2VkPSEwKSl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZWR8fCh0aGlzLm9iamVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMub2JqZWN0LmNsb3NlJiZ0aGlzLm9iamVjdC5jbG9zZSgpLHRoaXMuZGlzY29ubmVjdCgpLHRoaXMub2JqZWN0PXZvaWQgMCx0aGlzLmNsb3NlZD0hMCl9LGRlbGl2ZXI6ZnVuY3Rpb24oYSl7dGhpcy5jbG9zZWR8fChGPyh0aGlzLnRlc3RpbmdSZXN1bHRzPWEsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKSx0aGlzLnRlc3RpbmdSZXN1bHRzPXZvaWQgMCk6ayh0aGlzKSl9LHJlcG9ydDpmdW5jdGlvbigpe3RoaXMucmVwb3J0aW5nJiYodGhpcy5zeW5jKCExKSx0aGlzLmNhbGxiYWNrJiYodGhpcy5yZXBvcnRBcmdzLnB1c2godGhpcy50b2tlbiksdGhpcy5pbnZva2VDYWxsYmFjayh0aGlzLnJlcG9ydEFyZ3MpKSx0aGlzLnJlcG9ydEFyZ3M9dm9pZCAwKX0saW52b2tlQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuY2FsbGJhY2suYXBwbHkodGhpcy50YXJnZXQsYSl9Y2F0Y2goYil7cC5fZXJyb3JUaHJvd25EdXJpbmdDYWxsYmFjaz0hMCxjb25zb2xlLmVycm9yKCJFeGNlcHRpb24gY2F1Z2h0IGR1cmluZyBvYnNlcnZlciBjYWxsYmFjazogIisoYi5zdGFja3x8YikpfX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZHx8KEYmJih0aGlzLnJlcG9ydGluZz0hMSxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHModGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spLHRoaXMucmVwb3J0aW5nPSEwKSx0aGlzLnN5bmMoITApKX19O3ZhciBVLFY9IUZ8fGEuZm9yY2VDb2xsZWN0T2JzZXJ2ZXJzO3AuX2FsbE9ic2VydmVyc0NvdW50PTAsViYmKFU9W10pO3ZhciBXPSExLFg9ImZ1bmN0aW9uIj09dHlwZW9mIE9iamVjdC5kZWxpdmVyQWxsQ2hhbmdlUmVjb3JkczthLlBsYXRmb3JtPWEuUGxhdGZvcm18fHt9LGEuUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQ9ZnVuY3Rpb24oKXtpZighVyl7aWYoWClyZXR1cm4gT2JqZWN0LmRlbGl2ZXJBbGxDaGFuZ2VSZWNvcmRzKCksdm9pZCAwO2lmKFYpe1c9ITA7dmFyIGI9MCxjPXt9O2Rve2IrKzt2YXIgZD1VO1U9W10sYy5hbnlDaGFuZ2VkPSExO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2YuY2xvc2VkfHwoRj9mLmRlbGl2ZXIoYyk6Zi5jaGVjaygpJiYoYy5hbnlDaGFuZ2VkPSEwLGYucmVwb3J0KCkpLFUucHVzaChmKSl9fXdoaWxlKFQ+YiYmYy5hbnlDaGFuZ2VkKTthLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50JiYoYS5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1iKSxwLl9hbGxPYnNlcnZlcnNDb3VudD1VLmxlbmd0aCxXPSExfX19LFYmJihhLlBsYXRmb3JtLmNsZWFyT2JzZXJ2ZXJzPWZ1bmN0aW9uKCl7VT1bXX0pLHIucHJvdG90eXBlPUkoe19fcHJvdG9fXzpwLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RiYmT2JqZWN0Lm9ic2VydmUodGhpcy5vYmplY3QsdGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spfSxzeW5jOmZ1bmN0aW9uKCl7Rnx8KHRoaXMub2xkT2JqZWN0PW8odGhpcy5vYmplY3QpKX0sY2hlY2s6ZnVuY3Rpb24oYSl7dmFyIGIsYztpZihGKXtpZighYSlyZXR1cm4hMTtjPXt9LGI9eCh0aGlzLm9iamVjdCxhLGMpfWVsc2UgYz10aGlzLm9sZE9iamVjdCxiPW4odGhpcy5vYmplY3QsdGhpcy5vbGRPYmplY3QpO3JldHVybiBtKGIpPyExOih0aGlzLnJlcG9ydEFyZ3M9W2IuYWRkZWR8fHt9LGIucmVtb3ZlZHx8e30sYi5jaGFuZ2VkfHx7fV0sdGhpcy5yZXBvcnRBcmdzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV19KSwhMCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXtGP3RoaXMub2JqZWN0JiZPYmplY3QudW5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKTp0aGlzLm9sZE9iamVjdD12b2lkIDB9fSkscy5wcm90b3R5cGU9SSh7X19wcm90b19fOnIucHJvdG90eXBlLGNvbm5lY3Q6ZnVuY3Rpb24oKXtGJiZBcnJheS5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKX0sc3luYzpmdW5jdGlvbigpe0Z8fCh0aGlzLm9sZE9iamVjdD10aGlzLm9iamVjdC5zbGljZSgpKX0sY2hlY2s6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoRil7aWYoIWEpcmV0dXJuITE7Yj1FKHRoaXMub2JqZWN0LGEpfWVsc2UgYj1BKHRoaXMub2JqZWN0LDAsdGhpcy5vYmplY3QubGVuZ3RoLHRoaXMub2xkT2JqZWN0LDAsdGhpcy5vbGRPYmplY3QubGVuZ3RoKTtyZXR1cm4gYiYmYi5sZW5ndGg/KHRoaXMucmVwb3J0QXJncz1bYl0sITApOiExfX0pLHMuYXBwbHlTcGxpY2VzPWZ1bmN0aW9uKGEsYixjKXtjLmZvckVhY2goZnVuY3Rpb24oYyl7Zm9yKHZhciBkPVtjLmluZGV4LGMucmVtb3ZlZC5sZW5ndGhdLGU9Yy5pbmRleDtlPGMuaW5kZXgrYy5hZGRlZENvdW50OylkLnB1c2goYltlXSksZSsrO0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoYSxkKX0pfTt2YXIgWT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yoe30pLFo9T2JqZWN0LmdldFByb3RvdHlwZU9mKFtdKTt0LnByb3RvdHlwZT17cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmlzT2JzZXJ2ZWQ9IXRoaXMuaXNPYnNlcnZlZH0sb2JzZXJ2ZTpmdW5jdGlvbihhKXtpZihmKGEpJiZhIT09WSYmYSE9PVope3ZhciBiPXRoaXMuYXJyLmluZGV4T2YoYSk7Yj49MCYmdGhpcy5hcnJbYisxXT09PXRoaXMuaXNPYnNlcnZlZHx8KDA+YiYmKGI9dGhpcy5hcnIubGVuZ3RoLHRoaXMuYXJyW2JdPWEsT2JqZWN0Lm9ic2VydmUoYSx0aGlzLmNhbGxiYWNrKSksdGhpcy5hcnJbYisxXT10aGlzLmlzT2JzZXJ2ZWQsdGhpcy5vYnNlcnZlKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSkpfX0sY2xlYW51cDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPXRoaXMuaXNPYnNlcnZlZDtiPHRoaXMuYXJyLmxlbmd0aDspe3ZhciBkPXRoaXMuYXJyW2JdO3RoaXMuYXJyW2IrMV09PWM/KGI+YSYmKHRoaXMuYXJyW2FdPWQsdGhpcy5hcnJbYSsxXT1jKSxhKz0yKTpPYmplY3QudW5vYnNlcnZlKGQsdGhpcy5jYWxsYmFjayksYis9Mn10aGlzLmFyci5sZW5ndGg9YX19LHUucHJvdG90eXBlPUkoe19fcHJvdG9fXzpwLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RiYmKHRoaXMub2JzZXJ2ZWRTZXQ9bmV3IHQodGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMudmFsdWU9dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLm9ic2VydmVkU2V0JiYodGhpcy5vYnNlcnZlZFNldC5yZXNldCgpLHRoaXMub2JzZXJ2ZWRTZXQuY2xlYW51cCgpLHRoaXMub2JzZXJ2ZWRTZXQ9dm9pZCAwKX0sY2hlY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYnNlcnZlZFNldCYmdGhpcy5vYnNlcnZlZFNldC5yZXNldCgpLHRoaXMudmFsdWVfPXRoaXMucGF0aC5nZXRWYWx1ZUZyb20odGhpcy5vYmplY3QsdGhpcy5vYnNlcnZlZFNldCksdGhpcy5vYnNlcnZlZFNldCYmdGhpcy5vYnNlcnZlZFNldC5jbGVhbnVwKCksZyh0aGlzLnZhbHVlXyx0aGlzLm9sZFZhbHVlXyk/ITE6KHRoaXMudmFsdWU9dGhpcy52YWx1ZUZuP3RoaXMudmFsdWVGbih0aGlzLnZhbHVlXyk6dGhpcy52YWx1ZV8sdGhpcy5yZXBvcnRBcmdzPVt0aGlzLnZhbHVlLHRoaXMub2xkVmFsdWVdLCEwKX0sc3luYzpmdW5jdGlvbihhKXthJiYodGhpcy5vYnNlcnZlZFNldCYmdGhpcy5vYnNlcnZlZFNldC5yZXNldCgpLHRoaXMudmFsdWVfPXRoaXMucGF0aC5nZXRWYWx1ZUZyb20odGhpcy5vYmplY3QsdGhpcy5vYnNlcnZlZFNldCksdGhpcy52YWx1ZT10aGlzLnZhbHVlRm4/dGhpcy52YWx1ZUZuKHRoaXMudmFsdWVfKTp0aGlzLnZhbHVlXyx0aGlzLm9ic2VydmVkU2V0JiZ0aGlzLm9ic2VydmVkU2V0LmNsZWFudXAoKSksdGhpcy5vbGRWYWx1ZV89dGhpcy52YWx1ZV8sdGhpcy5vbGRWYWx1ZT10aGlzLnZhbHVlfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt0aGlzLnBhdGgmJigiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5zZXRWYWx1ZUZuJiYoYT10aGlzLnNldFZhbHVlRm4oYSkpLHRoaXMucGF0aC5zZXRWYWx1ZUZyb20odGhpcy5vYmplY3QsYSkpfX0pLHYucHJvdG90eXBlPUkoe19fcHJvdG9fXzp1LnByb3RvdHlwZSxhZGRQYXRoOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGFydGVkKXRocm93IEVycm9yKCJDYW5ub3QgYWRkIG1vcmUgcGF0aHMgb25jZSBzdGFydGVkLiIpO3ZhciBiPWIgaW5zdGFuY2VvZiBpP2I6aihiKSxjPWI/Yi5nZXRWYWx1ZUZyb20oYSk6dm9pZCAwO3RoaXMub2JzZXJ2ZWQucHVzaChhLGIpLHRoaXMudmFsdWVzLnB1c2goYyl9LHN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5jb25uZWN0KCksdGhpcy5zeW5jKCEwKX0sZ2V0VmFsdWVzOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZlZFNldCYmdGhpcy5vYnNlcnZlZFNldC5yZXNldCgpO2Zvcih2YXIgYT0hMSxiPTA7Yjx0aGlzLm9ic2VydmVkLmxlbmd0aDtiKz0yKXt2YXIgYz10aGlzLm9ic2VydmVkW2IrMV07aWYoYyl7dmFyIGQ9dGhpcy5vYnNlcnZlZFtiXSxlPWMuZ2V0VmFsdWVGcm9tKGQsdGhpcy5vYnNlcnZlZFNldCksZj10aGlzLnZhbHVlc1tiLzJdO2lmKCFnKGUsZikpe2lmKCFhJiYhdGhpcy52YWx1ZUZuKXt0aGlzLm9sZFZhbHVlcz10aGlzLm9sZFZhbHVlc3x8W107Zm9yKHZhciBoPTA7aDx0aGlzLnZhbHVlcy5sZW5ndGg7aCsrKXRoaXMub2xkVmFsdWVzW2hdPXRoaXMudmFsdWVzW2hdfXRoaXMudmFsdWVzW2IvMl09ZSxhPSEwfX19cmV0dXJuIHRoaXMub2JzZXJ2ZWRTZXQmJnRoaXMub2JzZXJ2ZWRTZXQuY2xlYW51cCgpLGF9LGNoZWNrOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRWYWx1ZXMoKSl7aWYodGhpcy52YWx1ZUZuKXtpZih0aGlzLnZhbHVlPXRoaXMudmFsdWVGbih0aGlzLnZhbHVlcyksZyh0aGlzLnZhbHVlLHRoaXMub2xkVmFsdWUpKXJldHVybiExO3RoaXMucmVwb3J0QXJncz1bdGhpcy52YWx1ZSx0aGlzLm9sZFZhbHVlXX1lbHNlIHRoaXMucmVwb3J0QXJncz1bdGhpcy52YWx1ZXMsdGhpcy5vbGRWYWx1ZXNdO3JldHVybiEwfX0sc3luYzpmdW5jdGlvbihhKXthJiYodGhpcy5nZXRWYWx1ZXMoKSx0aGlzLnZhbHVlRm4mJih0aGlzLnZhbHVlPXRoaXMudmFsdWVGbih0aGlzLnZhbHVlcykpKSx0aGlzLnZhbHVlRm4mJih0aGlzLm9sZFZhbHVlPXRoaXMudmFsdWUpfSxjbG9zZTpmdW5jdGlvbigpe2lmKHRoaXMub2JzZXJ2ZWQpe2Zvcih2YXIgYT0wO2E8dGhpcy5vYnNlcnZlZC5sZW5ndGg7YSs9Mil7dmFyIGI9dGhpcy5vYnNlcnZlZFthXTtiJiYiZnVuY3Rpb24iPT10eXBlb2YgYi5jbG9zZSYmYi5jbG9zZSgpfXRoaXMub2JzZXJ2ZWQ9dm9pZCAwLHRoaXMudmFsdWVzPXZvaWQgMH1wLnByb3RvdHlwZS5jbG9zZS5jYWxsKHRoaXMpfX0pO3ZhciAkPXsibmV3IjohMCx1cGRhdGVkOiEwLGRlbGV0ZWQ6ITB9O3UuZGVmaW5lUHJvcGVydHk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMub2JqZWN0LGU9aihjLnBhdGgpLGY9dyhhLGIpLGc9bmV3IHUoZCxjLnBhdGgsZnVuY3Rpb24oYSxiKXtmJiZmKCJ1cGRhdGVkIixiKX0pO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRWYWx1ZUZyb20oZCl9LHNldDpmdW5jdGlvbihhKXtlLnNldFZhbHVlRnJvbShkLGEpfSxjb25maWd1cmFibGU6ITB9KSx7Y2xvc2U6ZnVuY3Rpb24oKXt2YXIgYz1lLmdldFZhbHVlRnJvbShkKTtmJiZnLmRlbGl2ZXIoKSxnLmNsb3NlKCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7dmFsdWU6Yyx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19fTt2YXIgXz0wLGFiPTEsYmI9MixjYj0zO3oucHJvdG90eXBlPXtjYWxjRWRpdERpc3RhbmNlczpmdW5jdGlvbihhLGIsYyxkLGUsZil7Zm9yKHZhciBnPWYtZSsxLGg9Yy1iKzEsaT1uZXcgQXJyYXkoZyksaj0wO2c+ajtqKyspaVtqXT1uZXcgQXJyYXkoaCksaVtqXVswXT1qO2Zvcih2YXIgaz0wO2g+aztrKyspaVswXVtrXT1rO2Zvcih2YXIgaj0xO2c+ajtqKyspZm9yKHZhciBrPTE7aD5rO2srKylpZih0aGlzLmVxdWFscyhhW2Iray0xXSxkW2Urai0xXSkpaVtqXVtrXT1pW2otMV1bay0xXTtlbHNle3ZhciBsPWlbai0xXVtrXSsxLG09aVtqXVtrLTFdKzE7aVtqXVtrXT1tPmw/bDptfXJldHVybiBpfSxzcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTEsYz1hWzBdLmxlbmd0aC0xLGQ9YVtiXVtjXSxlPVtdO2I+MHx8Yz4wOylpZigwIT1iKWlmKDAhPWMpe3ZhciBmLGc9YVtiLTFdW2MtMV0saD1hW2ItMV1bY10saT1hW2JdW2MtMV07Zj1pPmg/Zz5oP2g6ZzpnPmk/aTpnLGY9PWc/KGc9PWQ/ZS5wdXNoKF8pOihlLnB1c2goYWIpLGQ9ZyksYi0tLGMtLSk6Zj09aD8oZS5wdXNoKGNiKSxiLS0sZD1oKTooZS5wdXNoKGJiKSxjLS0sZD1pKX1lbHNlIGUucHVzaChjYiksYi0tO2Vsc2UgZS5wdXNoKGJiKSxjLS07cmV0dXJuIGUucmV2ZXJzZSgpLGV9LGNhbGNTcGxpY2VzOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz0wLGg9MCxpPU1hdGgubWluKGMtYixmLWUpO2lmKDA9PWImJjA9PWUmJihnPXRoaXMuc2hhcmVkUHJlZml4KGEsZCxpKSksYz09YS5sZW5ndGgmJmY9PWQubGVuZ3RoJiYoaD10aGlzLnNoYXJlZFN1ZmZpeChhLGQsaS1nKSksYis9ZyxlKz1nLGMtPWgsZi09aCwwPT1jLWImJjA9PWYtZSlyZXR1cm5bXTtpZihiPT1jKXtmb3IodmFyIGo9eShiLFtdLDApO2Y+ZTspai5yZW1vdmVkLnB1c2goZFtlKytdKTtyZXR1cm5bal19aWYoZT09ZilyZXR1cm5beShiLFtdLGMtYildO2Zvcih2YXIgaz10aGlzLnNwbGljZU9wZXJhdGlvbnNGcm9tRWRpdERpc3RhbmNlcyh0aGlzLmNhbGNFZGl0RGlzdGFuY2VzKGEsYixjLGQsZSxmKSksaj12b2lkIDAsbD1bXSxtPWIsbj1lLG89MDtvPGsubGVuZ3RoO28rKylzd2l0Y2goa1tvXSl7Y2FzZSBfOmomJihsLnB1c2goaiksaj12b2lkIDApLG0rKyxuKys7YnJlYWs7Y2FzZSBhYjpqfHwoaj15KG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSBiYjpqfHwoaj15KG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIGNiOmp8fChqPXkobSxbXSwwKSksai5yZW1vdmVkLnB1c2goZFtuXSksbisrfXJldHVybiBqJiZsLnB1c2goaiksbH0sc2hhcmVkUHJlZml4OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MDtjPmQ7ZCsrKWlmKCF0aGlzLmVxdWFscyhhW2RdLGJbZF0pKXJldHVybiBkO3JldHVybiBjfSxzaGFyZWRTdWZmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPWIubGVuZ3RoLGY9MDtjPmYmJnRoaXMuZXF1YWxzKGFbLS1kXSxiWy0tZV0pOylmKys7cmV0dXJuIGZ9LGNhbGN1bGF0ZVNwbGljZXM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxjU3BsaWNlcyhhLDAsYS5sZW5ndGgsYiwwLGIubGVuZ3RoKX0sZXF1YWxzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifX07dmFyIGRiPW5ldyB6O2EuT2JzZXJ2ZXI9cCxhLk9ic2VydmVyLmhhc09iamVjdE9ic2VydmU9RixhLkFycmF5T2JzZXJ2ZXI9cyxhLkFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcz1mdW5jdGlvbihhLGIpe3JldHVybiBkYi5jYWxjdWxhdGVTcGxpY2VzKGEsYil9LGEuQXJyYXlTcGxpY2U9eixhLk9iamVjdE9ic2VydmVyPXIsYS5QYXRoT2JzZXJ2ZXI9dSxhLkNvbXBvdW5kUGF0aE9ic2VydmVyPXYsYS5QYXRoPWl9KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWw/Z2xvYmFsOnRoaXMpLHdpbmRvdy5QbGF0Zm9ybT13aW5kb3cuUGxhdGZvcm18fHt9LHdpbmRvdy5sb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LGZ1bmN0aW9uKGEpe3ZhciBiPWEuZmxhZ3N8fHt9O2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9IiksYVswXSYmKGJbYVswXV09YVsxXXx8ITApfSksYi5zaGFkb3c9Yi5zaGFkb3d8fGIuc2hhZG93ZG9tfHxiLnBvbHlmaWxsLGIuc2hhZG93PSJuYXRpdmUiPT09Yi5zaGFkb3c/ITE6Yi5zaGFkb3d8fCFIVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdCYmInBvbHlmaWxsIixhLmZsYWdzPWJ9KFBsYXRmb3JtKSwicG9seWZpbGwiPT09UGxhdGZvcm0uZmxhZ3Muc2hhZG93KXsoInVuZGVmaW5lZCI9PXR5cGVvZiBXZWFrTWFwfHxuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3gvIik+LTEpJiYhZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1EYXRlLm5vdygpJTFlOSxjPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYisrICsiX18iKX07Yy5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihiLGMpe3ZhciBkPWJbdGhpcy5uYW1lXTtkJiZkWzBdPT09Yj9kWzFdPWM6YShiLHRoaXMubmFtZSx7dmFsdWU6W2IsY10sd3JpdGFibGU6ITB9KX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybihiPWFbdGhpcy5uYW1lXSkmJmJbMF09PT1hP2JbMV06dm9pZCAwfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt0aGlzLnNldChhLHZvaWQgMCl9fSx3aW5kb3cuV2Vha01hcD1jfSgpO3ZhciBTaGFkb3dET01Qb2x5ZmlsbD17fTshZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLGMpKX0pLGF9ZnVuY3Rpb24gZChhLGIpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3N3aXRjaChjKXtjYXNlImFyZ3VtZW50cyI6Y2FzZSJjYWxsZXIiOmNhc2UibGVuZ3RoIjpjYXNlIm5hbWUiOmNhc2UicHJvdG90eXBlIjpjYXNlInRvU3RyaW5nIjpyZXR1cm59T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSksYX1mdW5jdGlvbiBlKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXWluIGEpcmV0dXJuIGJbY119ZnVuY3Rpb24gZihhKXt2YXIgYj1hLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9Qy5nZXQoYik7aWYoYylyZXR1cm4gYzt2YXIgZD1mKGIpLGU9cihkKTtyZXR1cm4gbyhiLGUsYSksZX1mdW5jdGlvbiBnKGEsYil7bShhLGIsITApfWZ1bmN0aW9uIGgoYSxiKXttKGIsYSwhMSl9ZnVuY3Rpb24gaShhKXtyZXR1cm4vXm9uW2Etel0rJC8udGVzdChhKX1mdW5jdGlvbiBqKGEpe3JldHVybiBGP25ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMuaW1wbC4iK2EpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbFthXX19ZnVuY3Rpb24gayhhKXtyZXR1cm4gRj9uZXcgRnVuY3Rpb24oInYiLCJ0aGlzLmltcGwuIithKyIgPSB2Iik6ZnVuY3Rpb24oYil7dGhpcy5pbXBsW2FdPWJ9fWZ1bmN0aW9uIGwoYSl7cmV0dXJuIEY/bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcy5pbXBsLiIrYSsiLmFwcGx5KHRoaXMuaW1wbCwgYXJndW1lbnRzKSIpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbFthXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19ZnVuY3Rpb24gbShiLGMsZCl7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihlKXtpZighKGUgaW4gYykpe0kmJmIuX19sb29rdXBHZXR0ZXJfXyhlKTt2YXIgZjt0cnl7Zj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsZSl9Y2F0Y2goZyl7Zj1KfXZhciBoLG07aWYoZCYmImZ1bmN0aW9uIj09dHlwZW9mIGYudmFsdWUpcmV0dXJuIGNbZV09bChlKSx2b2lkIDA7dmFyIG49aShlKTtoPW4/YS5nZXRFdmVudEhhbmRsZXJHZXR0ZXIoZSk6aihlKSwoZi53cml0YWJsZXx8Zi5zZXQpJiYobT1uP2EuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyKGUpOmsoZSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGUse2dldDpoLHNldDptLGNvbmZpZ3VyYWJsZTpmLmNvbmZpZ3VyYWJsZSxlbnVtZXJhYmxlOmYuZW51bWVyYWJsZX0pfX0pfWZ1bmN0aW9uIG4oYSxiLGMpe3ZhciBlPWEucHJvdG90eXBlO28oZSxiLGMpLGQoYixhKX1mdW5jdGlvbiBvKGEsYyxkKXt2YXIgZT1jLnByb3RvdHlwZTtiKHZvaWQgMD09PUMuZ2V0KGEpKSxDLnNldChhLGMpLEQuc2V0KGUsYSksZyhhLGUpLGQmJmgoZSxkKX1mdW5jdGlvbiBwKGEsYil7cmV0dXJuIEMuZ2V0KGIucHJvdG90eXBlKT09PWF9ZnVuY3Rpb24gcShhKXt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYz1mKGIpLGQ9cihjKTtyZXR1cm4gbyhiLGQsYSksZH1mdW5jdGlvbiByKGEpe2Z1bmN0aW9uIGIoYil7YS5jYWxsKHRoaXMsYil9cmV0dXJuIGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpLGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWIsYn1mdW5jdGlvbiBzKGEpe3JldHVybiBhIGluc3RhbmNlb2YgRS5FdmVudFRhcmdldHx8YSBpbnN0YW5jZW9mIEUuRXZlbnR8fGEgaW5zdGFuY2VvZiBFLlJhbmdlfHxhIGluc3RhbmNlb2YgRS5ET01JbXBsZW1lbnRhdGlvbn1mdW5jdGlvbiB0KGEpe3JldHVybiBhIGluc3RhbmNlb2YgTXx8YSBpbnN0YW5jZW9mIEx8fGEgaW5zdGFuY2VvZiBOfHxhIGluc3RhbmNlb2YgT3x8YSBpbnN0YW5jZW9mIEt9ZnVuY3Rpb24gdShhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYih0KGEpKSxhLnBvbHltZXJXcmFwcGVyX3x8KGEucG9seW1lcldyYXBwZXJfPW5ldyhmKGEpKShhKSkpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIG51bGw9PT1hP251bGw6KGIocyhhKSksYS5pbXBsKX1mdW5jdGlvbiB3KGEpe3JldHVybiBhJiZzKGEpP3YoYSk6YX1mdW5jdGlvbiB4KGEpe3JldHVybiBhJiYhcyhhKT91KGEpOmF9ZnVuY3Rpb24geShhLGMpe251bGwhPT1jJiYoYih0KGEpKSxiKHZvaWQgMD09PWN8fHMoYykpLGEucG9seW1lcldyYXBwZXJfPWMpfWZ1bmN0aW9uIHooYSxiLGMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLnByb3RvdHlwZSxiLHtnZXQ6Yyxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfWZ1bmN0aW9uIEEoYSxiKXt6KGEsYixmdW5jdGlvbigpe3JldHVybiB1KHRoaXMuaW1wbFtiXSl9KX1mdW5jdGlvbiBCKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IuZm9yRWFjaChmdW5jdGlvbihiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3ZhciBhPXgodGhpcyk7cmV0dXJuIGFbYl0uYXBwbHkoYSxhcmd1bWVudHMpfX0pfSl9dmFyIEM9bmV3IFdlYWtNYXAsRD1uZXcgV2Vha01hcCxFPU9iamVjdC5jcmVhdGUobnVsbCksRj0hKCJzZWN1cml0eVBvbGljeSJpbiBkb2N1bWVudCl8fGRvY3VtZW50LnNlY3VyaXR5UG9saWN5LmFsbG93c0V2YWw7aWYoRil0cnl7dmFyIEc9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtGPUcoKX1jYXRjaChIKXt9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTt2YXIgST0vRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxKPXtnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5jdGlvbigpe30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9LEs9RE9NSW1wbGVtZW50YXRpb24sTD1FdmVudCxNPU5vZGUsTj1XaW5kb3csTz1SYW5nZTthLmFzc2VydD1iLGEuY29uc3RydWN0b3JUYWJsZT1DLGEuZGVmaW5lR2V0dGVyPXosYS5kZWZpbmVXcmFwR2V0dGVyPUEsYS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcj1CLGEuaXNXcmFwcGVyRm9yPXAsYS5taXhpbj1jLGEubmF0aXZlUHJvdG90eXBlVGFibGU9RCxhLm9uZU9mPWUsYS5yZWdpc3Rlck9iamVjdD1xLGEucmVnaXN0ZXJXcmFwcGVyPW4sYS5yZXdyYXA9eSxhLnVud3JhcD12LGEudW53cmFwSWZOZWVkZWQ9dyxhLndyYXA9dSxhLndyYXBJZk5lZWRlZD14LGEud3JhcHBlcnM9RX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBOLlNoYWRvd1Jvb3R9ZnVuY3Rpb24gYyhhKXt2YXIgYj1hLmxvY2FsTmFtZTtyZXR1cm4iY29udGVudCI9PT1ifHwic2hhZG93Ij09PWJ9ZnVuY3Rpb24gZChhKXtyZXR1cm4hIWEuc2hhZG93Um9vdH1mdW5jdGlvbiBlKGEpe3ZhciBiO3JldHVybiBhLnBhcmVudE5vZGV8fChiPWEuZGVmYXVsdFZpZXcpJiZNKGIpfHxudWxsfWZ1bmN0aW9uIGYoZixnLGgpe2lmKGgubGVuZ3RoKXJldHVybiBoLnNoaWZ0KCk7aWYoYihmKSlyZXR1cm4gaihmKXx8YS5nZXRIb3N0Rm9yU2hhZG93Um9vdChmKTt2YXIgaT1hLmV2ZW50UGFyZW50c1RhYmxlLmdldChmKTtpZihpKXtmb3IodmFyIGs9MTtrPGkubGVuZ3RoO2srKyloW2stMV09aVtrXTtyZXR1cm4gaVswXX1pZihnJiZjKGYpKXt2YXIgbD1mLnBhcmVudE5vZGU7aWYobCYmZChsKSlmb3IodmFyIG09YS5nZXRTaGFkb3dUcmVlcyhsKSxuPWooZyksaz0wO2s8bS5sZW5ndGg7aysrKWlmKG1ba10uY29udGFpbnMobikpcmV0dXJuIG59cmV0dXJuIGUoZil9ZnVuY3Rpb24gZyhhKXtmb3IodmFyIGQ9W10sZT1hLGc9W10saT1bXTtlOyl7dmFyIGo9bnVsbDtpZihjKGUpKXtqPWgoZCk7dmFyIGs9ZFtkLmxlbmd0aC0xXXx8ZTtkLnB1c2goayl9ZWxzZSBkLmxlbmd0aHx8ZC5wdXNoKGUpO3ZhciBsPWRbZC5sZW5ndGgtMV07Zy5wdXNoKHt0YXJnZXQ6bCxjdXJyZW50VGFyZ2V0OmV9KSxiKGUpJiZkLnBvcCgpLGU9ZihlLGosaSl9cmV0dXJuIGd9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9YS5sZW5ndGgtMTtiPj0wO2ItLSlpZighYyhhW2JdKSlyZXR1cm4gYVtiXTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBpKGQsZSl7Zm9yKHZhciBnPVtdO2Q7KXtmb3IodmFyIGk9W10saj1lLGw9dm9pZCAwO2o7KXt2YXIgbj1udWxsO2lmKGkubGVuZ3RoKXtpZihjKGopJiYobj1oKGkpLGsobCkpKXt2YXIgbz1pW2kubGVuZ3RoLTFdO2kucHVzaChvKX19ZWxzZSBpLnB1c2goaik7aWYobShqLGQpKXJldHVybiBpW2kubGVuZ3RoLTFdO2IoaikmJmkucG9wKCksbD1qLGo9ZihqLG4sZyl9ZD1iKGQpP2EuZ2V0SG9zdEZvclNoYWRvd1Jvb3QoZCk6ZC5wYXJlbnROb2RlfX1mdW5jdGlvbiBqKGIpe3JldHVybiBhLmluc2VydGlvblBhcmVudFRhYmxlLmdldChiKX1mdW5jdGlvbiBrKGEpe3JldHVybiBqKGEpfWZ1bmN0aW9uIGwoYSl7Zm9yKHZhciBiO2I9YS5wYXJlbnROb2RlOylhPWI7cmV0dXJuIGF9ZnVuY3Rpb24gbShhLGIpe3JldHVybiBsKGEpPT09bChiKX1mdW5jdGlvbiBuKGIsYyl7aWYoYj09PWMpcmV0dXJuITA7aWYoYiBpbnN0YW5jZW9mIE4uU2hhZG93Um9vdCl7dmFyIGQ9YS5nZXRIb3N0Rm9yU2hhZG93Um9vdChiKTtyZXR1cm4gbihsKGQpLGMpfXJldHVybiExfWZ1bmN0aW9uIG8oYSl7c3dpdGNoKGEpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjpjYXNlIkRPTUF0dHJpYnV0ZU5hbWVDaGFuZ2VkIjpjYXNlIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCI6Y2FzZSJET01FbGVtZW50TmFtZUNoYW5nZWQiOmNhc2UiRE9NTm9kZUluc2VydGVkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZEludG9Eb2N1bWVudCI6Y2FzZSJET01Ob2RlUmVtb3ZlZCI6Y2FzZSJET01Ob2RlUmVtb3ZlZEZyb21Eb2N1bWVudCI6Y2FzZSJET01TdWJ0cmVlTW9kaWZpZWQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIHAoYil7aWYoIVAuZ2V0KGIpKXtQLnNldChiLCEwKSxvKGIudHlwZSl8fGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBjPU0oYi50YXJnZXQpLGQ9TShiKTtyZXR1cm4gcShkLGMpfX1mdW5jdGlvbiBxKGEsYil7dmFyIGM9ZyhiKTtyZXR1cm4ibG9hZCI9PT1hLnR5cGUmJjI9PT1jLmxlbmd0aCYmY1swXS50YXJnZXQgaW5zdGFuY2VvZiBOLkRvY3VtZW50JiZjLnNoaWZ0KCksWC5zZXQoYSxjKSxyKGEsYykmJnMoYSxjKSYmdChhLGMpLFQuc2V0KGEsdy5OT05FKSxSLnNldChhLG51bGwpLGEuZGVmYXVsdFByZXZlbnRlZH1mdW5jdGlvbiByKGEsYil7Zm9yKHZhciBjLGQ9Yi5sZW5ndGgtMTtkPjA7ZC0tKXt2YXIgZT1iW2RdLnRhcmdldCxmPWJbZF0uY3VycmVudFRhcmdldDtpZihlIT09ZiYmKGM9dy5DQVBUVVJJTkdfUEhBU0UsIXUoYltkXSxhLGMpKSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBzKGEsYil7dmFyIGM9dy5BVF9UQVJHRVQ7cmV0dXJuIHUoYlswXSxhLGMpfWZ1bmN0aW9uIHQoYSxiKXtmb3IodmFyIGMsZD1hLmJ1YmJsZXMsZT0xO2U8Yi5sZW5ndGg7ZSsrKXt2YXIgZj1iW2VdLnRhcmdldCxnPWJbZV0uY3VycmVudFRhcmdldDtpZihmPT09ZyljPXcuQVRfVEFSR0VUO2Vsc2V7aWYoIWR8fFYuZ2V0KGEpKWNvbnRpbnVlO2M9dy5CVUJCTElOR19QSEFTRX1pZighdShiW2VdLGEsYykpcmV0dXJufX1mdW5jdGlvbiB1KGEsYixjKXt2YXIgZD1hLnRhcmdldCxlPWEuY3VycmVudFRhcmdldCxmPU8uZ2V0KGUpO2lmKCFmKXJldHVybiEwO2lmKCJyZWxhdGVkVGFyZ2V0ImluIGIpe3ZhciBnPUwoYiksaD1NKGcucmVsYXRlZFRhcmdldCksaj1pKGUsaCk7aWYoaj09PWQpcmV0dXJuITA7Uy5zZXQoYixqKX1ULnNldChiLGMpO3ZhciBrPWIudHlwZSxsPSExO1Euc2V0KGIsZCksUi5zZXQoYixlKTtmb3IodmFyIG09MDttPGYubGVuZ3RoO20rKyl7dmFyIG49ZlttXTtpZihuLnJlbW92ZWQpbD0hMDtlbHNlIGlmKCEobi50eXBlIT09a3x8IW4uY2FwdHVyZSYmYz09PXcuQ0FQVFVSSU5HX1BIQVNFfHxuLmNhcHR1cmUmJmM9PT13LkJVQkJMSU5HX1BIQVNFKSl0cnl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4uaGFuZGxlcj9uLmhhbmRsZXIuY2FsbChlLGIpOm4uaGFuZGxlci5oYW5kbGVFdmVudChiKSxWLmdldChiKSlyZXR1cm4hMX1jYXRjaChvKXt3aW5kb3cub25lcnJvcj93aW5kb3cub25lcnJvcihvLm1lc3NhZ2UpOmNvbnNvbGUuZXJyb3Iobyl9fWlmKGwpe3ZhciBwPWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgbT0wO208cC5sZW5ndGg7bSsrKXBbbV0ucmVtb3ZlZHx8Zi5wdXNoKHBbbV0pfXJldHVybiFVLmdldChiKX1mdW5jdGlvbiB2KGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB3KGEsYil7cmV0dXJuIGEgaW5zdGFuY2VvZiBZPyh0aGlzLmltcGw9YSx2b2lkIDApOk0oQShZLCJFdmVudCIsYSxiKSl9ZnVuY3Rpb24geChhKXtyZXR1cm4gYSYmYS5yZWxhdGVkVGFyZ2V0P09iamVjdC5jcmVhdGUoYSx7cmVsYXRlZFRhcmdldDp7dmFsdWU6TChhLnJlbGF0ZWRUYXJnZXQpfX0pOmF9ZnVuY3Rpb24geShhLGIsYyl7dmFyIGQ9d2luZG93W2FdLGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYiBpbnN0YW5jZW9mIGQ/KHRoaXMuaW1wbD1iLHZvaWQgMCk6TShBKGQsYSxiLGMpKX07cmV0dXJuIGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLGMmJkooZS5wcm90b3R5cGUsYyksZCYmKGQucHJvdG90eXBlWyJpbml0IithXT9LKGQsZSxkb2N1bWVudC5jcmVhdGVFdmVudChhKSk6SyhkLGUsbmV3IGQoInRlbXAiKSkpLGV9ZnVuY3Rpb24geihhLGIpe3JldHVybiBmdW5jdGlvbigpe2FyZ3VtZW50c1tiXT1MKGFyZ3VtZW50c1tiXSk7dmFyIGM9TCh0aGlzKTtjW2FdLmFwcGx5KGMsYXJndW1lbnRzKX19ZnVuY3Rpb24gQShhLGIsYyxkKXtpZihnYilyZXR1cm4gbmV3IGEoYyx4KGQpKTt2YXIgZT1MKGRvY3VtZW50LmNyZWF0ZUV2ZW50KGIpKSxmPWZiW2JdLGc9W2NdO3JldHVybiBPYmplY3Qua2V5cyhmKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPW51bGwhPWQmJmEgaW4gZD9kW2FdOmZbYV07InJlbGF0ZWRUYXJnZXQiPT09YSYmKGI9TChiKSksZy5wdXNoKGIpfSksZVsiaW5pdCIrYl0uYXBwbHkoZSxnKSxlfWZ1bmN0aW9uIEIoYSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGE/ITA6YSYmYS5oYW5kbGVFdmVudH1mdW5jdGlvbiBDKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIEQoYil7cmV0dXJuIGIgaW5zdGFuY2VvZiBOLlNoYWRvd1Jvb3QmJihiPWEuZ2V0SG9zdEZvclNoYWRvd1Jvb3QoYikpLEwoYil9ZnVuY3Rpb24gRShhKXtJKGEsamIpfWZ1bmN0aW9uIEYoYixjLGQsZSl7YS5yZW5kZXJBbGxQZW5kaW5nKCk7Zm9yKHZhciBmPU0oa2IuY2FsbChjLmltcGwsZCxlKSksaD1nKGYsdGhpcyksaT0wO2k8aC5sZW5ndGg7aSsrKXt2YXIgaj1oW2ldO2lmKGouY3VycmVudFRhcmdldD09PWIpcmV0dXJuIGoudGFyZ2V0fXJldHVybiBudWxsfWZ1bmN0aW9uIEcoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9Vy5nZXQodGhpcyk7cmV0dXJuIGImJmJbYV0mJmJbYV0udmFsdWV8fG51bGx9fWZ1bmN0aW9uIEgoYSl7dmFyIGI9YS5zbGljZSgyKTtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9Vy5nZXQodGhpcyk7ZHx8KGQ9T2JqZWN0LmNyZWF0ZShudWxsKSxXLnNldCh0aGlzLGQpKTt2YXIgZT1kW2FdO2lmKGUmJnRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGUud3JhcHBlZCwhMSksImZ1bmN0aW9uIj09dHlwZW9mIGMpe3ZhciBmPWZ1bmN0aW9uKGIpe3ZhciBkPWMuY2FsbCh0aGlzLGIpO2Q9PT0hMT9iLnByZXZlbnREZWZhdWx0KCk6Im9uYmVmb3JldW5sb2FkIj09PWEmJiJzdHJpbmciPT10eXBlb2YgZCYmKGIucmV0dXJuVmFsdWU9ZCl9O3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihiLGYsITEpLGRbYV09e3ZhbHVlOmMsd3JhcHBlZDpmfX19fXZhciBJPWEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIsSj1hLm1peGluLEs9YS5yZWdpc3RlcldyYXBwZXIsTD1hLnVud3JhcCxNPWEud3JhcCxOPWEud3JhcHBlcnM7bmV3IFdlYWtNYXA7dmFyIE89bmV3IFdlYWtNYXAsUD1uZXcgV2Vha01hcCxRPW5ldyBXZWFrTWFwLFI9bmV3IFdlYWtNYXAsUz1uZXcgV2Vha01hcCxUPW5ldyBXZWFrTWFwLFU9bmV3IFdlYWtNYXAsVj1uZXcgV2Vha01hcCxXPW5ldyBXZWFrTWFwLFg9bmV3IFdlYWtNYXA7di5wcm90b3R5cGU9e2VxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGVyPT09YS5oYW5kbGVyJiZ0aGlzLnR5cGU9PT1hLnR5cGUmJnRoaXMuY2FwdHVyZT09PWEuY2FwdHVyZX0sZ2V0IHJlbW92ZWQoKXtyZXR1cm4gbnVsbD09PXRoaXMuaGFuZGxlcn0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW51bGx9fTt2YXIgWT13aW5kb3cuRXZlbnQ7dy5wcm90b3R5cGU9e2dldCB0YXJnZXQoKXtyZXR1cm4gUS5nZXQodGhpcyl9LGdldCBjdXJyZW50VGFyZ2V0KCl7cmV0dXJuIFIuZ2V0KHRoaXMpfSxnZXQgZXZlbnRQaGFzZSgpe3JldHVybiBULmdldCh0aGlzKX0sZ2V0IHBhdGgoKXt2YXIgYT1uZXcgTi5Ob2RlTGlzdCxiPVguZ2V0KHRoaXMpO2lmKGIpe2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGgtMSxlPWwoUi5nZXQodGhpcykpLGY9MDtkPj1mO2YrKyl7dmFyIGc9YltmXS5jdXJyZW50VGFyZ2V0LGg9bChnKTtuKGUsaCkmJihmIT09ZHx8ZyBpbnN0YW5jZW9mIE4uTm9kZSkmJihhW2MrK109Zyl9YS5sZW5ndGg9Y31yZXR1cm4gYX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7VS5zZXQodGhpcywhMCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe1Uuc2V0KHRoaXMsITApLFYuc2V0KHRoaXMsITApfX0sSyhZLHcsZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50IikpO3ZhciBaPXkoIlVJRXZlbnQiLHcpLCQ9eSgiQ3VzdG9tRXZlbnQiLHcpLF89e2dldCByZWxhdGVkVGFyZ2V0KCl7cmV0dXJuIFMuZ2V0KHRoaXMpfHxNKEwodGhpcykucmVsYXRlZFRhcmdldCl9fSxhYj1KKHtpbml0TW91c2VFdmVudDp6KCJpbml0TW91c2VFdmVudCIsMTQpfSxfKSxiYj1KKHtpbml0Rm9jdXNFdmVudDp6KCJpbml0Rm9jdXNFdmVudCIsNSl9LF8pLGNiPXkoIk1vdXNlRXZlbnQiLFosYWIpLGRiPXkoIkZvY3VzRXZlbnQiLFosYmIpLGViPXkoIk11dGF0aW9uRXZlbnQiLHcse2luaXRNdXRhdGlvbkV2ZW50OnooImluaXRNdXRhdGlvbkV2ZW50IiwzKSxnZXQgcmVsYXRlZE5vZGUoKXtyZXR1cm4gTSh0aGlzLmltcGwucmVsYXRlZE5vZGUpfX0pLGZiPU9iamVjdC5jcmVhdGUobnVsbCksZ2I9ZnVuY3Rpb24oKXt0cnl7bmV3IHdpbmRvdy5Nb3VzZUV2ZW50KCJjbGljayIpfWNhdGNoKGEpe3JldHVybiExfXJldHVybiEwfSgpO2lmKCFnYil7dmFyIGhiPWZ1bmN0aW9uKGEsYixjKXtpZihjKXt2YXIgZD1mYltjXTtiPUooSih7fSxkKSxiKX1mYlthXT1ifTtoYigiRXZlbnQiLHtidWJibGVzOiExLGNhbmNlbGFibGU6ITF9KSxoYigiQ3VzdG9tRXZlbnQiLHtkZXRhaWw6bnVsbH0sIkV2ZW50IiksaGIoIlVJRXZlbnQiLHt2aWV3Om51bGwsZGV0YWlsOjB9LCJFdmVudCIpLGhiKCJNb3VzZUV2ZW50Iix7c2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpLGhiKCJGb2N1c0V2ZW50Iix7cmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpfXZhciBpYj13aW5kb3cuRXZlbnRUYXJnZXQsamI9WyJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiXTtbTm9kZSxXaW5kb3ddLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5wcm90b3R5cGU7amIuZm9yRWFjaChmdW5jdGlvbihhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYixhKyJfIix7dmFsdWU6YlthXX0pfSl9KSxDLnByb3RvdHlwZT17YWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7aWYoQihiKSl7dmFyIGQ9bmV3IHYoYSxiLGMpLGU9Ty5nZXQodGhpcyk7aWYoZSl7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspaWYoZC5lcXVhbHMoZVtmXSkpcmV0dXJufWVsc2UgZT1bXSxPLnNldCh0aGlzLGUpO2UucHVzaChkKTt2YXIgZz1EKHRoaXMpO2cuYWRkRXZlbnRMaXN0ZW5lcl8oYSxwLCEwKX19LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2M9Qm9vbGVhbihjKTt2YXIgZD1PLmdldCh0aGlzKTtpZihkKXtmb3IodmFyIGU9MCxmPSExLGc9MDtnPGQubGVuZ3RoO2crKylkW2ddLnR5cGU9PT1hJiZkW2ddLmNhcHR1cmU9PT1jJiYoZSsrLGRbZ10uaGFuZGxlcj09PWImJihmPSEwLGRbZ10ucmVtb3ZlKCkpKTtpZihmJiYxPT09ZSl7dmFyIGg9RCh0aGlzKTtoLnJlbW92ZUV2ZW50TGlzdGVuZXJfKGEscCwhMCl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXt2YXIgYj1EKHRoaXMpO3JldHVybiBiLmRpc3BhdGNoRXZlbnRfKEwoYSkpfX0saWImJksoaWIsQyk7dmFyIGtiPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQ7YS5hZGp1c3RSZWxhdGVkVGFyZ2V0PWksYS5lbGVtZW50RnJvbVBvaW50PUYsYS5nZXRFdmVudEhhbmRsZXJHZXR0ZXI9RyxhLmdldEV2ZW50SGFuZGxlclNldHRlcj1ILGEud3JhcEV2ZW50VGFyZ2V0TWV0aG9kcz1FLGEud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9JCxhLndyYXBwZXJzLkV2ZW50PXcsYS53cmFwcGVycy5FdmVudFRhcmdldD1DLGEud3JhcHBlcnMuRm9jdXNFdmVudD1kYixhLndyYXBwZXJzLk1vdXNlRXZlbnQ9Y2IsYS53cmFwcGVycy5NdXRhdGlvbkV2ZW50PWViLGEud3JhcHBlcnMuVUlFdmVudD1afSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse2VudW1lcmFibGU6ITF9KX1mdW5jdGlvbiBjKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGQoYSl7aWYobnVsbD09YSlyZXR1cm4gYTtmb3IodmFyIGI9bmV3IGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyliW2RdPWYoYVtkXSk7cmV0dXJuIGIubGVuZ3RoPWUsYn1mdW5jdGlvbiBlKGEsYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX12YXIgZj1hLndyYXA7Yy5wcm90b3R5cGU9e2l0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19fSxiKGMucHJvdG90eXBlLCJpdGVtIiksYS53cmFwcGVycy5Ob2RlTGlzdD1jLGEuYWRkV3JhcE5vZGVMaXN0TWV0aG9kPWUsYS53cmFwTm9kZUxpc3Q9ZH0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7byhhIGluc3RhbmNlb2Ygayl9ZnVuY3Rpb24gYyhhLGIsYyxkKXtpZighKGEgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSlyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksYS5wYXJlbnROb2RlXz1iLGEucHJldmlvdXNTaWJsaW5nXz1jLGEubmV4dFNpYmxpbmdfPWQsYyYmKGMubmV4dFNpYmxpbmdfPWEpLGQmJihkLnByZXZpb3VzU2libGluZ189YSksW2FdO2Zvcih2YXIgZSxmPVtdO2U9YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGUpLGYucHVzaChlKSxlLnBhcmVudE5vZGVfPWI7Zm9yKHZhciBnPTA7ZzxmLmxlbmd0aDtnKyspZltnXS5wcmV2aW91c1NpYmxpbmdfPWZbZy0xXXx8YyxmW2ddLm5leHRTaWJsaW5nXz1mW2crMV18fGQ7cmV0dXJuIGMmJihjLm5leHRTaWJsaW5nXz1mWzBdKSxkJiYoZC5wcmV2aW91c1NpYmxpbmdfPWZbZi5sZW5ndGgtMV0pLGZ9ZnVuY3Rpb24gZChhKXtpZihhIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYn1yZXR1cm5bYV19ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLm5vZGVXYXNBZGRlZF8oKX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9YS5ub2RlVHlwZT09PWsuRE9DVU1FTlRfTk9ERT9hOmEub3duZXJEb2N1bWVudDtjIT09Yi5vd25lckRvY3VtZW50JiZjLmFkb3B0Tm9kZShiKX1mdW5jdGlvbiBnKGIsYyl7aWYoYy5sZW5ndGgpe3ZhciBkPWIub3duZXJEb2N1bWVudDtpZihkIT09Y1swXS5vd25lckRvY3VtZW50KWZvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKWEuYWRvcHROb2RlTm9SZW1vdmUoY1tlXSxkKX19ZnVuY3Rpb24gaChhLGIpe2coYSxiKTt2YXIgYz1iLmxlbmd0aDtpZigxPT09YylyZXR1cm4gcihiWzBdKTtmb3IodmFyIGQ9cihhLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKSxlPTA7Yz5lO2UrKylkLmFwcGVuZENoaWxkKHIoYltlXSkpO3JldHVybiBkfWZ1bmN0aW9uIGkoYSl7aWYoYS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7Zm9yKHZhciBiPWEuZmlyc3RDaGlsZDtiOyl7byhiLnBhcmVudE5vZGU9PT1hKTt2YXIgYz1iLm5leHRTaWJsaW5nLGQ9cihiKSxlPWQucGFyZW50Tm9kZTtlJiZ5LmNhbGwoZSxkKSxiLnByZXZpb3VzU2libGluZ189Yi5uZXh0U2libGluZ189Yi5wYXJlbnROb2RlXz1udWxsLGI9Y31hLmZpcnN0Q2hpbGRfPWEubGFzdENoaWxkXz1udWxsfWVsc2UgZm9yKHZhciBjLGY9cihhKSxnPWYuZmlyc3RDaGlsZDtnOyljPWcubmV4dFNpYmxpbmcseS5jYWxsKGYsZyksZz1jfWZ1bmN0aW9uIGooYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiZiLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfWZ1bmN0aW9uIGsoYSl7byhhIGluc3RhbmNlb2YgdSksbC5jYWxsKHRoaXMsYSksdGhpcy5wYXJlbnROb2RlXz12b2lkIDAsdGhpcy5maXJzdENoaWxkXz12b2lkIDAsdGhpcy5sYXN0Q2hpbGRfPXZvaWQgMCx0aGlzLm5leHRTaWJsaW5nXz12b2lkIDAsdGhpcy5wcmV2aW91c1NpYmxpbmdfPXZvaWQgMH12YXIgbD1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LG09YS53cmFwcGVycy5Ob2RlTGlzdCxuPWEuZGVmaW5lV3JhcEdldHRlcixvPWEuYXNzZXJ0LHA9YS5taXhpbixxPWEucmVnaXN0ZXJXcmFwcGVyLHI9YS51bndyYXAscz1hLndyYXAsdD1hLndyYXBJZk5lZWRlZCx1PXdpbmRvdy5Ob2RlLHY9dS5wcm90b3R5cGUuYXBwZW5kQ2hpbGQsdz11LnByb3RvdHlwZS5pbnNlcnRCZWZvcmUseD11LnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQseT11LnByb3RvdHlwZS5yZW1vdmVDaGlsZCx6PXUucHJvdG90eXBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO2sucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobC5wcm90b3R5cGUpLHAoay5wcm90b3R5cGUse2FwcGVuZENoaWxkOmZ1bmN0aW9uKGEpe2IoYSk7dmFyIGc7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKXx8aihhKSl7dmFyIGk9dGhpcy5sYXN0Q2hpbGQsaz1udWxsO2c9YyhhLHRoaXMsaSxrKSx0aGlzLmxhc3RDaGlsZF89Z1tnLmxlbmd0aC0xXSxpfHwodGhpcy5maXJzdENoaWxkXz1nWzBdKSx2LmNhbGwodGhpcy5pbXBsLGgodGhpcyxnKSl9ZWxzZSBnPWQoYSksZih0aGlzLGEpLHYuY2FsbCh0aGlzLmltcGwscihhKSk7cmV0dXJuIGUoZyksYX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGEsaSl7aWYoIWkpcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoYSk7YihhKSxiKGkpLG8oaS5wYXJlbnROb2RlPT09dGhpcyk7dmFyIGs7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKXx8aihhKSl7dmFyIGw9aS5wcmV2aW91c1NpYmxpbmcsbT1pO2s9YyhhLHRoaXMsbCxtKSx0aGlzLmZpcnN0Q2hpbGQ9PT1pJiYodGhpcy5maXJzdENoaWxkXz1rWzBdKTt2YXIgbj1yKGkpLHA9bi5wYXJlbnROb2RlO3A/dy5jYWxsKHAsaCh0aGlzLGspLG4pOmcodGhpcyxrKX1lbHNlIGs9ZChhKSxmKHRoaXMsYSksdy5jYWxsKHRoaXMuaW1wbCxyKGEpLHIoaSkpO3JldHVybiBlKGspLGF9LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGEpe2lmKGIoYSksYS5wYXJlbnROb2RlIT09dGhpcyl0aHJvdyBuZXcgRXJyb3IoIk5vdEZvdW5kRXJyb3IiKTt2YXIgYz1yKGEpO2lmKHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe3ZhciBkPXRoaXMuZmlyc3RDaGlsZCxlPXRoaXMubGFzdENoaWxkLGY9YS5uZXh0U2libGluZyxnPWEucHJldmlvdXNTaWJsaW5nLGg9Yy5wYXJlbnROb2RlO2gmJnkuY2FsbChoLGMpLGQ9PT1hJiYodGhpcy5maXJzdENoaWxkXz1mKSxlPT09YSYmKHRoaXMubGFzdENoaWxkXz1nKSxnJiYoZy5uZXh0U2libGluZ189ZiksZiYmKGYucHJldmlvdXNTaWJsaW5nXz1nKSxhLnByZXZpb3VzU2libGluZ189YS5uZXh0U2libGluZ189YS5wYXJlbnROb2RlXz12b2lkIDB9ZWxzZSB5LmNhbGwodGhpcy5pbXBsLGMpO3JldHVybiBhfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxnKXtpZihiKGEpLGIoZyksZy5wYXJlbnROb2RlIT09dGhpcyl0aHJvdyBuZXcgRXJyb3IoIk5vdEZvdW5kRXJyb3IiKTt2YXIgaSxrPXIoZyk7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKXx8aihhKSl7dmFyIGw9Zy5wcmV2aW91c1NpYmxpbmcsbT1nLm5leHRTaWJsaW5nO209PT1hJiYobT1hLm5leHRTaWJsaW5nKSxpPWMoYSx0aGlzLGwsbSksdGhpcy5maXJzdENoaWxkPT09ZyYmKHRoaXMuZmlyc3RDaGlsZF89aVswXSksdGhpcy5sYXN0Q2hpbGQ9PT1nJiYodGhpcy5sYXN0Q2hpbGRfPWlbaS5sZW5ndGgtMV0pLGcucHJldmlvdXNTaWJsaW5nXz1nLm5leHRTaWJsaW5nXz1nLnBhcmVudE5vZGVfPXZvaWQgMCxrLnBhcmVudE5vZGUmJnguY2FsbChrLnBhcmVudE5vZGUsaCh0aGlzLGkpLGspfWVsc2UgaT1kKGEpLGYodGhpcyxhKSx4LmNhbGwodGhpcy5pbXBsLHIoYSksayk7cmV0dXJuIGUoaSksZ30sbm9kZVdhc0FkZGVkXzpmdW5jdGlvbigpe30saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86cyh0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBmaXJzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZmlyc3RDaGlsZF8/dGhpcy5maXJzdENoaWxkXzpzKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmxhc3RDaGlsZF8/dGhpcy5sYXN0Q2hpbGRfOnModGhpcy5pbXBsLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpzKHRoaXMuaW1wbC5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5wcmV2aW91c1NpYmxpbmdfP3RoaXMucHJldmlvdXNTaWJsaW5nXzpzKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgcGFyZW50RWxlbWVudCgpe2Zvcih2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5ub2RlVHlwZSE9PWsuRUxFTUVOVF9OT0RFOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX0sZ2V0IHRleHRDb250ZW50KCl7Zm9yKHZhciBhPSIiLGI9dGhpcy5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKWErPWIudGV4dENvbnRlbnQ7cmV0dXJuIGF9LHNldCB0ZXh0Q29udGVudChhKXtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtpZihpKHRoaXMpLCIiIT09YSl7dmFyIGI9dGhpcy5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSk7dGhpcy5hcHBlbmRDaGlsZChiKX19ZWxzZSB0aGlzLmltcGwudGV4dENvbnRlbnQ9YX0sZ2V0IGNoaWxkTm9kZXMoKXtmb3IodmFyIGE9bmV3IG0sYj0wLGM9dGhpcy5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9LGNsb25lTm9kZTpmdW5jdGlvbihhKXtpZighdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSlyZXR1cm4gcyh0aGlzLmltcGwuY2xvbmVOb2RlKGEpKTt2YXIgYj1zKHRoaXMuaW1wbC5jbG9uZU5vZGUoITEpKTtpZihhKWZvcih2YXIgYz10aGlzLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpYi5hcHBlbmRDaGlsZChjLmNsb25lTm9kZSghMCkpOwpyZXR1cm4gYn0sY29udGFpbnM6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuITE7aWYoYT10KGEpLGE9PT10aGlzKXJldHVybiEwO3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYj90aGlzLmNvbnRhaW5zKGIpOiExfSxjb21wYXJlRG9jdW1lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gei5jYWxsKHRoaXMuaW1wbCxyKGEpKX19KSxuKGssIm93bmVyRG9jdW1lbnQiKSxxKHUsayxkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGRlbGV0ZSBrLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yLGRlbGV0ZSBrLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLGsucHJvdG90eXBlPXAoT2JqZWN0LmNyZWF0ZShsLnByb3RvdHlwZSksay5wcm90b3R5cGUpLGEud3JhcHBlcnMuTm9kZT1rfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGMpe2Zvcih2YXIgZCxlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7ZTspe2lmKGUubWF0Y2hlcyhjKSlyZXR1cm4gZTtpZihkPWIoZSxjKSlyZXR1cm4gZDtlPWUubmV4dEVsZW1lbnRTaWJsaW5nfXJldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiLGQpe2Zvcih2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KWUubWF0Y2hlcyhiKSYmKGRbZC5sZW5ndGgrK109ZSksYyhlLGIsZCksZT1lLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gZH12YXIgZD17cXVlcnlTZWxlY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gYih0aGlzLGEpfSxxdWVyeVNlbGVjdG9yQWxsOmZ1bmN0aW9uKGEpe3JldHVybiBjKHRoaXMsYSxuZXcgTm9kZUxpc3QpfX0sZT17Z2V0RWxlbWVudHNCeVRhZ05hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbChhKX0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCIuIithKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWVOUzpmdW5jdGlvbihhLGIpe2lmKCIqIj09PWEpcmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYik7Zm9yKHZhciBjPW5ldyBOb2RlTGlzdCxkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYiksZT0wLGY9MDtlPGQubGVuZ3RoO2UrKylkW2VdLm5hbWVzcGFjZVVSST09PWEmJihjW2YrK109ZFtlXSk7cmV0dXJuIGMubGVuZ3RoPWYsY319O2EuR2V0RWxlbWVudHNCeUludGVyZmFjZT1lLGEuU2VsZWN0b3JzSW50ZXJmYWNlPWR9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLnByZXZpb3VzU2libGluZztyZXR1cm4gYX12YXIgZD1hLndyYXBwZXJzLk5vZGVMaXN0LGU9e2dldCBmaXJzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBiKHRoaXMuZmlyc3RDaGlsZCl9LGdldCBsYXN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGModGhpcy5sYXN0Q2hpbGQpfSxnZXQgY2hpbGRFbGVtZW50Q291bnQoKXtmb3IodmFyIGE9MCxiPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YjtiPWIubmV4dEVsZW1lbnRTaWJsaW5nKWErKztyZXR1cm4gYX0sZ2V0IGNoaWxkcmVuKCl7Zm9yKHZhciBhPW5ldyBkLGI9MCxjPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YztjPWMubmV4dEVsZW1lbnRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9fSxmPXtnZXQgbmV4dEVsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGIodGhpcy5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c0VsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGModGhpcy5wcmV2aW91c1NpYmxpbmcpfX07YS5DaGlsZE5vZGVJbnRlcmZhY2U9ZixhLlBhcmVudE5vZGVJbnRlcmZhY2U9ZX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGM9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZD1hLndyYXBwZXJzLk5vZGUsZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz13aW5kb3cuQ2hhcmFjdGVyRGF0YTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGIucHJvdG90eXBlLHtnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoYSl7dGhpcy5kYXRhPWF9fSksZShiLnByb3RvdHlwZSxjKSxmKGcsYixkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGEud3JhcHBlcnMuQ2hhcmFjdGVyRGF0YT1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiLGMpe3ZhciBkPWIucGFyZW50Tm9kZTtpZihkJiZkLnNoYWRvd1Jvb3Qpe3ZhciBlPWEuZ2V0UmVuZGVyZXJGb3JIb3N0KGQpO2UuZGVwZW5kc09uQXR0cmlidXRlKGMpJiZlLmludmFsaWRhdGUoKX19ZnVuY3Rpb24gYyhhKXtnLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBkKGEsYyxkKXt2YXIgZT1kfHxjO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbY119LHNldDpmdW5jdGlvbihhKXt0aGlzLmltcGxbY109YSxiKHRoaXMsZSl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIGU9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsZz1hLndyYXBwZXJzLk5vZGUsaD1hLlBhcmVudE5vZGVJbnRlcmZhY2UsaT1hLlNlbGVjdG9yc0ludGVyZmFjZTthLmFkZFdyYXBOb2RlTGlzdE1ldGhvZDt2YXIgaj1hLm1peGluLGs9YS5vbmVPZixsPWEucmVnaXN0ZXJXcmFwcGVyLG09YS53cmFwcGVycyxuPW5ldyBXZWFrTWFwLG89d2luZG93LkVsZW1lbnQscD1rKG8ucHJvdG90eXBlLFsibWF0Y2hlcyIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIl0pLHE9by5wcm90b3R5cGVbcF07Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSksaihjLnByb3RvdHlwZSx7Y3JlYXRlU2hhZG93Um9vdDpmdW5jdGlvbigpe3ZhciBiPW5ldyBtLlNoYWRvd1Jvb3QodGhpcyk7bi5zZXQodGhpcyxiKTt2YXIgYz1hLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzKTtyZXR1cm4gYy5pbnZhbGlkYXRlKCksYn0sZ2V0IHNoYWRvd1Jvb3QoKXtyZXR1cm4gbi5nZXQodGhpcyl8fG51bGx9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbihhLGMpe3RoaXMuaW1wbC5zZXRBdHRyaWJ1dGUoYSxjKSxiKHRoaXMsYSl9LHJlbW92ZUF0dHJpYnV0ZTpmdW5jdGlvbihhKXt0aGlzLmltcGwucmVtb3ZlQXR0cmlidXRlKGEpLGIodGhpcyxhKX0sbWF0Y2hlczpmdW5jdGlvbihhKXtyZXR1cm4gcS5jYWxsKHRoaXMuaW1wbCxhKX19KSxjLnByb3RvdHlwZVtwXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXRjaGVzKGEpfSxvLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290JiYoYy5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1jLnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290KSxkKGMucHJvdG90eXBlLCJpZCIpLGQoYy5wcm90b3R5cGUsImNsYXNzTmFtZSIsImNsYXNzIiksaihjLnByb3RvdHlwZSxlKSxqKGMucHJvdG90eXBlLGYpLGooYy5wcm90b3R5cGUsaCksaihjLnByb3RvdHlwZSxpKSxsKG8sYyksYS5tYXRjaGVzTmFtZT1wLGEud3JhcHBlcnMuRWxlbWVudD1jfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYSl7Y2FzZSImIjpyZXR1cm4iJmFtcDsiO2Nhc2UiPCI6cmV0dXJuIiZsdDsiO2Nhc2UnIic6cmV0dXJuIiZxdW90OyJ9fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucmVwbGFjZShwLGIpfWZ1bmN0aW9uIGQoYSl7c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgTm9kZS5FTEVNRU5UX05PREU6Zm9yKHZhciBiLGQ9YS50YWdOYW1lLnRvTG93ZXJDYXNlKCksZj0iPCIrZCxnPWEuYXR0cmlidXRlcyxoPTA7Yj1nW2hdO2grKylmKz0iICIrYi5uYW1lKyc9IicrYyhiLnZhbHVlKSsnIic7cmV0dXJuIGYrPSI+IixxW2RdP2Y6ZitlKGEpKyI8LyIrZCsiPiI7Y2FzZSBOb2RlLlRFWFRfTk9ERTpyZXR1cm4gYyhhLm5vZGVWYWx1ZSk7Y2FzZSBOb2RlLkNPTU1FTlRfTk9ERTpyZXR1cm4iPCEtLSIrYyhhLm5vZGVWYWx1ZSkrIi0tPiI7ZGVmYXVsdDp0aHJvdyBjb25zb2xlLmVycm9yKGEpLG5ldyBFcnJvcigibm90IGltcGxlbWVudGVkIil9fWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPSIiLGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWIrPWQoYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIsYyl7dmFyIGQ9Y3x8ImRpdiI7YS50ZXh0Q29udGVudD0iIjt2YXIgZT1uKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KGQpKTtlLmlubmVySFRNTD1iO2Zvcih2YXIgZjtmPWUuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZChvKGYpKX1mdW5jdGlvbiBnKGEpe2ouY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGgoYil7ayhnLGIsZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdfSl9ZnVuY3Rpb24gaShiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZy5wcm90b3R5cGUsYix7dmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfXZhciBqPWEud3JhcHBlcnMuRWxlbWVudCxrPWEuZGVmaW5lR2V0dGVyLGw9YS5taXhpbixtPWEucmVnaXN0ZXJXcmFwcGVyLG49YS51bndyYXAsbz1hLndyYXAscD0vJnw8fCIvZyxxPXthcmVhOiEwLGJhc2U6ITAsYnI6ITAsY29sOiEwLGNvbW1hbmQ6ITAsZW1iZWQ6ITAsaHI6ITAsaW1nOiEwLGlucHV0OiEwLGtleWdlbjohMCxsaW5rOiEwLG1ldGE6ITAscGFyYW06ITAsc291cmNlOiEwLHRyYWNrOiEwLHdicjohMH0scj13aW5kb3cuSFRNTEVsZW1lbnQ7Zy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShqLnByb3RvdHlwZSksbChnLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBlKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk/Zih0aGlzLGEsdGhpcy50YWdOYW1lKTp0aGlzLmltcGwuaW5uZXJIVE1MPWF9LGdldCBvdXRlckhUTUwoKXtyZXR1cm4gZCh0aGlzKX0sc2V0IG91dGVySFRNTChhKXt2YXIgYj10aGlzLnBhcmVudE5vZGU7YiYmKGIuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCksdGhpcy5pbXBsLm91dGVySFRNTD1hKX19KSxbImNsaWVudEhlaWdodCIsImNsaWVudExlZnQiLCJjbGllbnRUb3AiLCJjbGllbnRXaWR0aCIsIm9mZnNldEhlaWdodCIsIm9mZnNldExlZnQiLCJvZmZzZXRUb3AiLCJvZmZzZXRXaWR0aCIsInNjcm9sbEhlaWdodCIsInNjcm9sbExlZnQiLCJzY3JvbGxUb3AiLCJzY3JvbGxXaWR0aCJdLmZvckVhY2goaCksWyJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXRDbGllbnRSZWN0cyIsInNjcm9sbEludG9WaWV3Il0uZm9yRWFjaChpKSxtKHIsZyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiIikpLGEud3JhcHBlcnMuSFRNTEVsZW1lbnQ9ZyxhLmdldElubmVySFRNTD1lLGEuc2V0SW5uZXJIVE1MPWZ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj13aW5kb3cuSFRNTENvbnRlbnRFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCBzZWxlY3QoKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpfSxzZXQgc2VsZWN0KGEpe3RoaXMuc2V0QXR0cmlidXRlKCJzZWxlY3QiLGEpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXtjLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGEsYiksInNlbGVjdCI9PT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKSYmdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoITApfX0pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudD1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9d2luZG93LkhUTUxTaGFkb3dFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse30pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhLmRlZmF1bHRWaWV3KXJldHVybiBhO3ZhciBiPW0uZ2V0KGEpO2lmKCFiKXtmb3IoYj1hLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yi5sYXN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5sYXN0Q2hpbGQpO20uc2V0KGEsYil9cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGMsZD1iKGEub3duZXJEb2N1bWVudCksZT1qKGQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtjPWEuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChjKTtyZXR1cm4gZX1mdW5jdGlvbiBkKGEpe2lmKGUuY2FsbCh0aGlzLGEpLCFuKXt2YXIgYj1jKGEpO2wuc2V0KHRoaXMsayhiKSl9fXZhciBlPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZj1hLmdldElubmVySFRNTCxnPWEubWl4aW4saD1hLnJlZ2lzdGVyV3JhcHBlcixpPWEuc2V0SW5uZXJIVE1MLGo9YS51bndyYXAsaz1hLndyYXAsbD1uZXcgV2Vha01hcCxtPW5ldyBXZWFrTWFwLG49d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZyhkLnByb3RvdHlwZSx7Z2V0IGNvbnRlbnQoKXtyZXR1cm4gbj9rKHRoaXMuaW1wbC5jb250ZW50KTpsLmdldCh0aGlzKX0sZ2V0IGlubmVySFRNTCgpe3JldHVybiBmKHRoaXMuY29udGVudCl9LHNldCBpbm5lckhUTUwoYSl7aSh0aGlzLmNvbnRlbnQsYSl9fSksbiYmaChuLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYS5sb2NhbE5hbWUpe2Nhc2UiY29udGVudCI6cmV0dXJuIG5ldyBjKGEpO2Nhc2Uic2hhZG93IjpyZXR1cm4gbmV3IGUoYSk7Y2FzZSJ0ZW1wbGF0ZSI6cmV0dXJuIG5ldyBmKGEpfWQuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsZj1hLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQ7YS5taXhpbjt2YXIgZz1hLnJlZ2lzdGVyV3JhcHBlcixoPXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZyhoLGIpLGEud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYz1hLlBhcmVudE5vZGVJbnRlcmZhY2UsZD1hLlNlbGVjdG9yc0ludGVyZmFjZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyT2JqZWN0LGc9Zihkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2UoZy5wcm90b3R5cGUsYyksZShnLnByb3RvdHlwZSxkKSxlKGcucHJvdG90eXBlLGIpO3ZhciBoPWYoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpKSxpPWYoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikpO2Eud3JhcHBlcnMuQ29tbWVudD1pLGEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudD1nLGEud3JhcHBlcnMuVGV4dD1ofSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt2YXIgYj1pKGEuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Yy5jYWxsKHRoaXMsYiksZyhiLHRoaXMpO3ZhciBkPWEuc2hhZG93Um9vdDtrLnNldCh0aGlzLGQpLGouc2V0KHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50LGQ9YS5lbGVtZW50RnJvbVBvaW50LGU9YS5nZXRJbm5lckhUTUwsZj1hLm1peGluLGc9YS5yZXdyYXAsaD1hLnNldElubmVySFRNTCxpPWEudW53cmFwLGo9bmV3IFdlYWtNYXAsaz1uZXcgV2Vha01hcDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxmKGIucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGUodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7aCh0aGlzLGEpLHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9LGdldCBvbGRlclNoYWRvd1Jvb3QoKXtyZXR1cm4gay5nZXQodGhpcyl8fG51bGx9LGludmFsaWRhdGVTaGFkb3dSZW5kZXJlcjpmdW5jdGlvbigpe3JldHVybiBqLmdldCh0aGlzKS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBkKHRoaXMsdGhpcy5vd25lckRvY3VtZW50LGEsYil9LGdldEVsZW1lbnRCeUlkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoIiMiK2EpfX0pLGEud3JhcHBlcnMuU2hhZG93Um9vdD1iLGEuZ2V0SG9zdEZvclNoYWRvd1Jvb3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGouZ2V0KGEpfX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7YS5wcmV2aW91c1NpYmxpbmdfPWEucHJldmlvdXNTaWJsaW5nLGEubmV4dFNpYmxpbmdfPWEubmV4dFNpYmxpbmcsYS5wYXJlbnROb2RlXz1hLnBhcmVudE5vZGV9ZnVuY3Rpb24gYyhhLGMsZSl7dmFyIGY9RyhhKSxnPUcoYyksaD1lP0coZSk6bnVsbDtpZihkKGMpLGIoYyksZSlhLmZpcnN0Q2hpbGQ9PT1lJiYoYS5maXJzdENoaWxkXz1lKSxlLnByZXZpb3VzU2libGluZ189ZS5wcmV2aW91c1NpYmxpbmc7ZWxzZXthLmxhc3RDaGlsZF89YS5sYXN0Q2hpbGQsYS5sYXN0Q2hpbGQ9PT1hLmZpcnN0Q2hpbGQmJihhLmZpcnN0Q2hpbGRfPWEuZmlyc3RDaGlsZCk7dmFyIGk9SChmLmxhc3RDaGlsZCk7aSYmKGkubmV4dFNpYmxpbmdfPWkubmV4dFNpYmxpbmcpfWYuaW5zZXJ0QmVmb3JlKGcsaCl9ZnVuY3Rpb24gZChhKXt2YXIgYz1HKGEpLGQ9Yy5wYXJlbnROb2RlO2lmKGQpe3ZhciBlPUgoZCk7YihhKSxhLnByZXZpb3VzU2libGluZyYmKGEucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1hKSxhLm5leHRTaWJsaW5nJiYoYS5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPWEpLGUubGFzdENoaWxkPT09YSYmKGUubGFzdENoaWxkXz1hKSxlLmZpcnN0Q2hpbGQ9PT1hJiYoZS5maXJzdENoaWxkXz1hKSxkLnJlbW92ZUNoaWxkKGMpfX1mdW5jdGlvbiBlKGEsYil7ZyhiKS5wdXNoKGEpLHgoYSxiKTt2YXIgYz1KLmdldChhKTtjfHxKLnNldChhLGM9W10pLGMucHVzaChiKX1mdW5jdGlvbiBmKGEpe0kuc2V0KGEsW10pfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIEkuZ2V0KGEpfWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYn1mdW5jdGlvbiBpKGEsYixjKXtmb3IodmFyIGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWlmKGIoZCkpe2lmKGMoZCk9PT0hMSlyZXR1cm59ZWxzZSBpKGQsYixjKX1mdW5jdGlvbiBqKGEsYil7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpO2lmKCFjKXJldHVybiEwO2lmKGM9Yy50cmltKCksIWMpcmV0dXJuITA7aWYoIShhIGluc3RhbmNlb2YgeSkpcmV0dXJuITE7aWYoIU4udGVzdChjKSlyZXR1cm4hMTtpZigiOiI9PT1jWzBdJiYhTy50ZXN0KGMpKXJldHVybiExO3RyeXtyZXR1cm4gYS5tYXRjaGVzKGMpfWNhdGNoKGQpe3JldHVybiExfX1mdW5jdGlvbiBrKCl7Zm9yKHZhciBhPTA7YTxRLmxlbmd0aDthKyspUVthXS5yZW5kZXIoKTtRPVtdfWZ1bmN0aW9uIGwoKXtFPW51bGwsaygpfWZ1bmN0aW9uIG0oYSl7dmFyIGI9TC5nZXQoYSk7cmV0dXJuIGJ8fChiPW5ldyBxKGEpLEwuc2V0KGEsYikpLGJ9ZnVuY3Rpb24gbihhKXtmb3IoO2E7YT1hLnBhcmVudE5vZGUpaWYoYSBpbnN0YW5jZW9mIEMpcmV0dXJuIGE7cmV0dXJuIG51bGx9ZnVuY3Rpb24gbyhhKXtyZXR1cm4gbShEKGEpKX1mdW5jdGlvbiBwKGEpe3RoaXMuc2tpcD0hMSx0aGlzLm5vZGU9YSx0aGlzLmNoaWxkTm9kZXM9W119ZnVuY3Rpb24gcShhKXt0aGlzLmhvc3Q9YSx0aGlzLmRpcnR5PSExLHRoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKSx0aGlzLmFzc29jaWF0ZU5vZGUoYSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIHp9ZnVuY3Rpb24gcyhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIHp9ZnVuY3Rpb24gdChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEF9ZnVuY3Rpb24gdShhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEF9ZnVuY3Rpb24gdihhKXtyZXR1cm4gYS5zaGFkb3dSb290fWZ1bmN0aW9uIHcoYSl7Zm9yKHZhciBiPVtdLGM9YS5zaGFkb3dSb290O2M7Yz1jLm9sZGVyU2hhZG93Um9vdCliLnB1c2goYyk7cmV0dXJuIGJ9ZnVuY3Rpb24geChhLGIpe0suc2V0KGEsYil9dmFyIHk9YS53cmFwcGVycy5FbGVtZW50LHo9YS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQsQT1hLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50LEI9YS53cmFwcGVycy5Ob2RlLEM9YS53cmFwcGVycy5TaGFkb3dSb290O2EuYXNzZXJ0O3ZhciBEPWEuZ2V0SG9zdEZvclNoYWRvd1Jvb3Q7YS5taXhpbjt2YXIgRSxGPWEub25lT2YsRz1hLnVud3JhcCxIPWEud3JhcCxJPW5ldyBXZWFrTWFwLEo9bmV3IFdlYWtNYXAsSz1uZXcgV2Vha01hcCxMPW5ldyBXZWFrTWFwLE09bmV3IFdlYWtNYXAsTj0vXlsqLjojW2EtekEtWl98XS8sTz1uZXcgUmVnRXhwKCJeOigiK1sibGluayIsInZpc2l0ZWQiLCJ0YXJnZXQiLCJlbmFibGVkIiwiZGlzYWJsZWQiLCJjaGVja2VkIiwiaW5kZXRlcm1pbmF0ZSIsIm50aC1jaGlsZCIsIm50aC1sYXN0LWNoaWxkIiwibnRoLW9mLXR5cGUiLCJudGgtbGFzdC1vZi10eXBlIiwiZmlyc3QtY2hpbGQiLCJsYXN0LWNoaWxkIiwiZmlyc3Qtb2YtdHlwZSIsImxhc3Qtb2YtdHlwZSIsIm9ubHktb2YtdHlwZSJdLmpvaW4oInwiKSsiKSIpLFA9Rih3aW5kb3csWyJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzZXRUaW1lb3V0Il0pLFE9W10sUj1uZXcgQXJyYXlTcGxpY2U7Ui5lcXVhbHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRyhhLm5vZGUpPT09Yn0scC5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgcChhKTtyZXR1cm4gdGhpcy5jaGlsZE5vZGVzLnB1c2goYiksYn0sc3luYzpmdW5jdGlvbihhKXtpZighdGhpcy5za2lwKXtmb3IodmFyIGI9dGhpcy5ub2RlLGU9dGhpcy5jaGlsZE5vZGVzLGY9aChHKGIpKSxnPWF8fG5ldyBXZWFrTWFwLGk9Ui5jYWxjdWxhdGVTcGxpY2VzKGUsZiksaj0wLGs9MCxsPTAsbT0wO208aS5sZW5ndGg7bSsrKXtmb3IodmFyIG49aVttXTtsPG4uaW5kZXg7bCsrKWsrKyxlW2orK10uc3luYyhnKTtmb3IodmFyIG89bi5yZW1vdmVkLmxlbmd0aCxwPTA7bz5wO3ArKyl7dmFyIHE9SChmW2srK10pO2cuZ2V0KHEpfHxkKHEpfWZvcih2YXIgcj1uLmFkZGVkQ291bnQscz1mW2tdJiZIKGZba10pLHA9MDtyPnA7cCsrKXt2YXIgdD1lW2orK10sdT10Lm5vZGU7YyhiLHUscyksZy5zZXQodSwhMCksdC5zeW5jKGcpfWwrPXJ9Zm9yKHZhciBtPWw7bTxlLmxlbmd0aDttKyspZVttKytdLnN5bmMoZyl9fX0scS5wcm90b3R5cGU9e3JlbmRlcjpmdW5jdGlvbihhKXtpZih0aGlzLmRpcnR5KXt0aGlzLmludmFsaWRhdGVBdHRyaWJ1dGVzKCksdGhpcy50cmVlQ29tcG9zaXRpb24oKTt2YXIgYj10aGlzLmhvc3QsYz1iLnNoYWRvd1Jvb3Q7dGhpcy5hc3NvY2lhdGVOb2RlKGIpO2Zvcih2YXIgZD0hZSxlPWF8fG5ldyBwKGIpLGY9Yy5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucmVuZGVyTm9kZShjLGUsZiwhMSk7ZCYmZS5zeW5jKCksdGhpcy5kaXJ0eT0hMX19LGludmFsaWRhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5kaXJ0eSl7aWYodGhpcy5kaXJ0eT0hMCxRLnB1c2godGhpcyksRSlyZXR1cm47RT13aW5kb3dbUF0obCwwKX19LHJlbmRlck5vZGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYodihjKSl7Yj1iLmFwcGVuZChjKTt2YXIgZT1tKGMpO2UuZGlydHk9ITAsZS5yZW5kZXIoYil9ZWxzZSByKGMpP3RoaXMucmVuZGVySW5zZXJ0aW9uUG9pbnQoYSxiLGMsZCk6dChjKT90aGlzLnJlbmRlclNoYWRvd0luc2VydGlvblBvaW50KGEsYixjKTp0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsYyxkKX0scmVuZGVyQXNBbnlEb21UcmVlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGI9Yi5hcHBlbmQoYyksdihjKSl7dmFyIGU9bShjKTtiLnNraXA9IWUuZGlydHksZS5yZW5kZXIoYil9ZWxzZSBmb3IodmFyIGY9Yy5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucmVuZGVyTm9kZShhLGIsZixkKX0scmVuZGVySW5zZXJ0aW9uUG9pbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZyhjKTtpZihlLmxlbmd0aCl7dGhpcy5hc3NvY2lhdGVOb2RlKGMpO2Zvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgaD1lW2ZdO3IoaCkmJmQ/dGhpcy5yZW5kZXJJbnNlcnRpb25Qb2ludChhLGIsaCxkKTp0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsaCxkKX19ZWxzZSB0aGlzLnJlbmRlckZhbGxiYWNrQ29udGVudChhLGIsYyk7dGhpcy5hc3NvY2lhdGVOb2RlKGMucGFyZW50Tm9kZSl9LHJlbmRlclNoYWRvd0luc2VydGlvblBvaW50OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLm9sZGVyU2hhZG93Um9vdDtpZihkKXt4KGQsYyksdGhpcy5hc3NvY2lhdGVOb2RlKGMucGFyZW50Tm9kZSk7Zm9yKHZhciBlPWQuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyl0aGlzLnJlbmRlck5vZGUoZCxiLGUsITApfWVsc2UgdGhpcy5yZW5kZXJGYWxsYmFja0NvbnRlbnQoYSxiLGMpfSxyZW5kZXJGYWxsYmFja0NvbnRlbnQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYXNzb2NpYXRlTm9kZShjKSx0aGlzLmFzc29jaWF0ZU5vZGUoYy5wYXJlbnROb2RlKTtmb3IodmFyIGQ9Yy5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKXRoaXMucmVuZGVyQXNBbnlEb21UcmVlKGEsYixkLCExKX0saW52YWxpZGF0ZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt0aGlzLmF0dHJpYnV0ZXM9T2JqZWN0LmNyZWF0ZShudWxsKX0sdXBkYXRlRGVwZW5kZW50QXR0cmlidXRlczpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmF0dHJpYnV0ZXM7L1wuXHcrLy50ZXN0KGEpJiYoYlsiY2xhc3MiXT0hMCksLyNcdysvLnRlc3QoYSkmJihiLmlkPSEwKSxhLnJlcGxhY2UoL1xbXHMqKFteXHM9XHx+XF1dKykvZyxmdW5jdGlvbihhLGMpe2JbY109ITB9KX19LGRlcGVuZHNPbkF0dHJpYnV0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2FdfSxkaXN0cmlidXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztpKGEscyxmdW5jdGlvbihhKXtmKGEpLGMudXBkYXRlRGVwZW5kZW50QXR0cmlidXRlcyhhLmdldEF0dHJpYnV0ZSgic2VsZWN0IikpO2Zvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZz1iW2RdO3ZvaWQgMCE9PWcmJmooZyxhKSYmKGUoZyxhKSxiW2RdPXZvaWQgMCl9fSl9LHRyZWVDb21wb3NpdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmhvc3QsYj1hLnNoYWRvd1Jvb3QsYz1bXSxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZylpZihyKGQpKXt2YXIgZT1nKGQpO2UmJmUubGVuZ3RofHwoZT1oKGQpKSxjLnB1c2guYXBwbHkoYyxlKX1lbHNlIGMucHVzaChkKTtmb3IodmFyIGYsajtiOyl7aWYoZj12b2lkIDAsaShiLHUsZnVuY3Rpb24oYSl7cmV0dXJuIGY9YSwhMX0pLGo9Zix0aGlzLmRpc3RyaWJ1dGUoYixjKSxqKXt2YXIgaz1iLm9sZGVyU2hhZG93Um9vdDtpZihrKXtiPWsseChiLGopO2NvbnRpbnVlfWJyZWFrfWJyZWFrfX0sYXNzb2NpYXRlTm9kZTpmdW5jdGlvbihhKXtNLnNldChhLHRoaXMpfX0sQi5wcm90b3R5cGUuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyPWZ1bmN0aW9uKCl7dmFyIGE9TS5nZXQodGhpcyk7cmV0dXJuIGE/KGEuaW52YWxpZGF0ZSgpLCEwKTohMX0sei5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1mdW5jdGlvbigpe3ZhciBhPU0uZ2V0KHRoaXMpO3JldHVybiBhJiZhLnJlbmRlcigpLGcodGhpcyl9LEEucHJvdG90eXBlLm5vZGVXYXNBZGRlZF89ei5wcm90b3R5cGUubm9kZVdhc0FkZGVkXz1mdW5jdGlvbigpe3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGEsYj1uKHRoaXMpO2ImJihhPW8oYikpLE0uc2V0KHRoaXMsYSksYSYmYS5pbnZhbGlkYXRlKCl9LGEuZXZlbnRQYXJlbnRzVGFibGU9SixhLmdldFJlbmRlcmVyRm9ySG9zdD1tLGEuZ2V0U2hhZG93VHJlZXM9dyxhLmluc2VydGlvblBhcmVudFRhYmxlPUssYS5yZW5kZXJBbGxQZW5kaW5nPWssYS52aXN1YWw9e2luc2VydEJlZm9yZTpjLHJlbW92ZTpkfX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7aWYod2luZG93W2JdKXtkKCFhLndyYXBwZXJzW2JdKTt2YXIgaT1mdW5jdGlvbihhKXtjLmNhbGwodGhpcyxhKX07aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZShpLnByb3RvdHlwZSx7Z2V0IGZvcm0oKXtyZXR1cm4gaChnKHRoaXMpLmZvcm0pfX0pLGYod2luZG93W2JdLGksZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiLnNsaWNlKDQsLTcpKSksYS53cmFwcGVyc1tiXT1pfX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5hc3NlcnQsZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz1hLnVud3JhcCxoPWEud3JhcCxpPVsiSFRNTEJ1dHRvbkVsZW1lbnQiLCJIVE1MRmllbGRTZXRFbGVtZW50IiwiSFRNTElucHV0RWxlbWVudCIsIkhUTUxLZXlnZW5FbGVtZW50IiwiSFRNTExhYmVsRWxlbWVudCIsIkhUTUxMZWdlbmRFbGVtZW50IiwiSFRNTE9iamVjdEVsZW1lbnQiLCJIVE1MT3B0aW9uRWxlbWVudCIsIkhUTUxPdXRwdXRFbGVtZW50IiwiSFRNTFNlbGVjdEVsZW1lbnQiLCJIVE1MVGV4dEFyZWFFbGVtZW50Il07aS5mb3JFYWNoKGIpfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtrLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBjKGEpe3ZhciBjPWRvY3VtZW50W2FdO2IucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIHYoYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fWZ1bmN0aW9uIGQoYSxiKXt5LmNhbGwoYi5pbXBsLHUoYSkpLGUoYSxiKX1mdW5jdGlvbiBlKGEsYil7YS5zaGFkb3dSb290JiZiLmFkb3B0Tm9kZShhLnNoYWRvd1Jvb3QpLGEgaW5zdGFuY2VvZiBuJiZmKGEsYik7Zm9yKHZhciBjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyllKGMsYil9ZnVuY3Rpb24gZihhLGIpe3ZhciBjPWEub2xkZXJTaGFkb3dSb290O2MmJmIuYWRvcHROb2RlKGMpfWZ1bmN0aW9uIGcoYSl7dGhpcy5pbXBsPWF9ZnVuY3Rpb24gaChhLGIpe3ZhciBjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uW2JdO2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7cmV0dXJuIHYoYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fWZ1bmN0aW9uIGkoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBjLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX12YXIgaj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2Usaz1hLndyYXBwZXJzLk5vZGUsbD1hLlBhcmVudE5vZGVJbnRlcmZhY2UsbT1hLlNlbGVjdG9yc0ludGVyZmFjZSxuPWEud3JhcHBlcnMuU2hhZG93Um9vdCxvPWEuZGVmaW5lV3JhcEdldHRlcixwPWEuZWxlbWVudEZyb21Qb2ludCxxPWEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIscj1hLm1hdGNoZXNOYW1lLHM9YS5taXhpbix0PWEucmVnaXN0ZXJXcmFwcGVyLHU9YS51bndyYXAsdj1hLndyYXAsdz1hLndyYXBFdmVudFRhcmdldE1ldGhvZHM7YS53cmFwTm9kZUxpc3Q7dmFyIHg9bmV3IFdlYWtNYXA7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShrLnByb3RvdHlwZSksbyhiLCJkb2N1bWVudEVsZW1lbnQiKSxvKGIsImJvZHkiKSxvKGIsImhlYWQiKSxbImNyZWF0ZUNvbW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUV2ZW50IiwiY3JlYXRlRXZlbnROUyIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlVGV4dE5vZGUiLCJnZXRFbGVtZW50QnlJZCJdLmZvckVhY2goYyk7dmFyIHk9ZG9jdW1lbnQuYWRvcHROb2RlO2lmKHMoYi5wcm90b3R5cGUse2Fkb3B0Tm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksZChhLHRoaXMpLGF9LGVsZW1lbnRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gcCh0aGlzLHRoaXMsYSxiKX19KSxkb2N1bWVudC5yZWdpc3Rlcil7dmFyIHo9ZG9jdW1lbnQucmVnaXN0ZXI7Yi5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhPyh0aGlzLmltcGw9YSx2b2lkIDApOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYil9dmFyIGU9Yy5wcm90b3R5cGU7aWYoYS5uYXRpdmVQcm90b3R5cGVUYWJsZS5nZXQoZSkpdGhyb3cgbmV3IEVycm9yKCJOb3RTdXBwb3J0ZWRFcnJvciIpO2Zvcih2YXIgZixnPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKSxoPVtdO2cmJiEoZj1hLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChnKSk7KWgucHVzaChnKSxnPU9iamVjdC5nZXRQcm90b3R5cGVPZihnKTtpZighZil0aHJvdyBuZXcgRXJyb3IoIk5vdFN1cHBvcnRlZEVycm9yIik7Zm9yKHZhciBpPU9iamVjdC5jcmVhdGUoZiksaj1oLmxlbmd0aC0xO2o+PTA7ai0tKWk9T2JqZWN0LmNyZWF0ZShpKTtyZXR1cm5bImNyZWF0ZWRDYWxsYmFjayIsImVudGVyZWREb2N1bWVudENhbGxiYWNrIiwibGVmdERvY3VtZW50Q2FsbGJhY2siLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWVbYV07YiYmKGlbYV09ZnVuY3Rpb24oKXtiLmFwcGx5KHYodGhpcyksYXJndW1lbnRzKX0pfSksei5jYWxsKHUodGhpcyksYix7cHJvdG90eXBlOml9KSxkLnByb3RvdHlwZT1lLGQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWQsYS5jb25zdHJ1Y3RvclRhYmxlLnNldChpLGQpLGEubmF0aXZlUHJvdG90eXBlVGFibGUuc2V0KGUsaSksZH0scShbd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50XSxbInJlZ2lzdGVyIl0pfXEoW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnQsd2luZG93LkhUTUxIdG1sRWxlbWVudF0sWyJhcHBlbmRDaGlsZCIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwiY29udGFpbnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZU5TIiwiaW5zZXJ0QmVmb3JlIiwicXVlcnlTZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZW1vdmVDaGlsZCIsInJlcGxhY2VDaGlsZCIscl0pLHEoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJhZG9wdE5vZGUiLCJjb250YWlucyIsImNyZWF0ZUNvbW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUV2ZW50IiwiY3JlYXRlRXZlbnROUyIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlVGV4dE5vZGUiLCJlbGVtZW50RnJvbVBvaW50IiwiZ2V0RWxlbWVudEJ5SWQiXSkscyhiLnByb3RvdHlwZSxqKSxzKGIucHJvdG90eXBlLGwpLHMoYi5wcm90b3R5cGUsbSkscyhiLnByb3RvdHlwZSx7Z2V0IGltcGxlbWVudGF0aW9uKCl7dmFyIGE9eC5nZXQodGhpcyk7cmV0dXJuIGE/YTooYT1uZXcgZyh1KHRoaXMpLmltcGxlbWVudGF0aW9uKSx4LnNldCh0aGlzLGEpLGEpfX0pLHQod2luZG93LkRvY3VtZW50LGIsZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSksd2luZG93LkhUTUxEb2N1bWVudCYmdCh3aW5kb3cuSFRNTERvY3VtZW50LGIpLHcoW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnRdKSxoKGcsImNyZWF0ZURvY3VtZW50VHlwZSIpLGgoZywiY3JlYXRlRG9jdW1lbnQiKSxoKGcsImNyZWF0ZUhUTUxEb2N1bWVudCIpLGkoZywiaGFzRmVhdHVyZSIpLHQod2luZG93LkRPTUltcGxlbWVudGF0aW9uLGcpLHEoW3dpbmRvdy5ET01JbXBsZW1lbnRhdGlvbl0sWyJjcmVhdGVEb2N1bWVudFR5cGUiLCJjcmVhdGVEb2N1bWVudCIsImNyZWF0ZUhUTUxEb2N1bWVudCIsImhhc0ZlYXR1cmUiXSksYS5hZG9wdE5vZGVOb1JlbW92ZT1kLGEud3JhcHBlcnMuRE9NSW1wbGVtZW50YXRpb249ZyxhLndyYXBwZXJzLkRvY3VtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuRXZlbnRUYXJnZXQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEudW53cmFwSWZOZWVkZWQsaD1hLndyYXAsaT1hLnJlbmRlckFsbFBlbmRpbmcsaj13aW5kb3cuV2luZG93O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpO3ZhciBrPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlO2oucHJvdG90eXBlLmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaSgpLGsuY2FsbCh0aGlzfHx3aW5kb3csZyhhKSxiKX0sWyJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2oucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7dmFyIGI9aCh0aGlzfHx3aW5kb3cpO3JldHVybiBiW2FdLmFwcGx5KGIsYXJndW1lbnRzKX19KSxkKGIucHJvdG90eXBlLHtnZXRDb21wdXRlZFN0eWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGsuY2FsbChmKHRoaXMpLGcoYSksYil9fSksZShqLGIpLGEud3JhcHBlcnMuV2luZG93PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIG5ldyBiKGEpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEubWFwKGMpfWZ1bmN0aW9uIGUoYSl7dmFyIGI9dGhpczt0aGlzLmltcGw9bmV3IGsoZnVuY3Rpb24oYyl7YS5jYWxsKGIsZChjKSxiKX0pfXZhciBmPWEuZGVmaW5lR2V0dGVyLGc9YS5kZWZpbmVXcmFwR2V0dGVyLGg9YS5yZWdpc3RlcldyYXBwZXIsaT1hLnVud3JhcElmTmVlZGVkLGo9YS53cmFwTm9kZUxpc3Q7YS53cmFwcGVyczt2YXIgaz13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7aWYoayl7dmFyIGw9d2luZG93Lk11dGF0aW9uUmVjb3JkO2IucHJvdG90eXBlPXtnZXQgYWRkZWROb2Rlcygpe3JldHVybiBqKHRoaXMuaW1wbC5hZGRlZE5vZGVzKX0sZ2V0IHJlbW92ZWROb2Rlcygpe3JldHVybiBqKHRoaXMuaW1wbC5yZW1vdmVkTm9kZXMpfX0sWyJ0YXJnZXQiLCJwcmV2aW91c1NpYmxpbmciLCJuZXh0U2libGluZyJdLmZvckVhY2goZnVuY3Rpb24oYSl7ZyhiLGEpfSksWyJ0eXBlIiwiYXR0cmlidXRlTmFtZSIsImF0dHJpYnV0ZU5hbWVzcGFjZSIsIm9sZFZhbHVlIl0uZm9yRWFjaChmdW5jdGlvbihhKXtmKGIsYSxmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV19KX0pLGwmJmgobCxiKSx3aW5kb3cuTm9kZSxlLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5vYnNlcnZlKGkoYSksYil9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLmltcGwuZGlzY29ubmVjdCgpfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3JldHVybiBkKHRoaXMuaW1wbC50YWtlUmVjb3JkcygpKX19LGEud3JhcHBlcnMuTXV0YXRpb25PYnNlcnZlcj1lLGEud3JhcHBlcnMuTXV0YXRpb25SZWNvcmQ9Yn19KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEucmVnaXN0ZXJXcmFwcGVyLGQ9YS51bndyYXAsZT1hLnVud3JhcElmTmVlZGVkLGY9YS53cmFwLGc9d2luZG93LlJhbmdlO2IucHJvdG90eXBlPXtnZXQgc3RhcnRDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuc3RhcnRDb250YWluZXIpfSxnZXQgZW5kQ29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLmVuZENvbnRhaW5lcil9LGdldCBjb21tb25BbmNlc3RvckNvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5jb21tb25BbmNlc3RvckNvbnRhaW5lcil9LHNldFN0YXJ0OmZ1bmN0aW9uKGEsYil7dGhpcy5pbXBsLnNldFN0YXJ0KGUoYSksYil9LHNldEVuZDpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5zZXRFbmQoZShhKSxiKX0sc2V0U3RhcnRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldFN0YXJ0QmVmb3JlKGUoYSkpfSxzZXRTdGFydEFmdGVyOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRTdGFydEFmdGVyKGUoYSkpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldEVuZEJlZm9yZShlKGEpKX0sc2V0RW5kQWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldEVuZEFmdGVyKGUoYSkpfSxzZWxlY3ROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3ROb2RlKGUoYSkpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNlbGVjdE5vZGVDb250ZW50cyhlKGEpKX0sY29tcGFyZUJvdW5kYXJ5UG9pbnRzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5jb21wYXJlQm91bmRhcnlQb2ludHMoYSxkKGIpKX0sZXh0cmFjdENvbnRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmV4dHJhY3RDb250ZW50cygpKX0sY2xvbmVDb250ZW50czpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5jbG9uZUNvbnRlbnRzKCkpfSxpbnNlcnROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5pbnNlcnROb2RlKGUoYSkpfSxzdXJyb3VuZENvbnRlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zdXJyb3VuZENvbnRlbnRzKGUoYSkpfSxjbG9uZVJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNsb25lUmFuZ2UoKSl9LGlzUG9pbnRJblJhbmdlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5pc1BvaW50SW5SYW5nZShlKGEpLGIpfSxjb21wYXJlUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbXBhcmVQb2ludChlKGEpLGIpfSxpbnRlcnNlY3RzTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbXBsLmludGVyc2VjdHNOb2RlKGUoYSkpfX0sZy5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JiYoYi5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBmKHRoaXMuaW1wbC5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoYSkpfSksYyh3aW5kb3cuUmFuZ2UsYiksYS53cmFwcGVycy5SYW5nZT1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt2YXIgYj1jW2FdLGQ9d2luZG93W2JdO2lmKGQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSksZj1lLmNvbnN0cnVjdG9yO3dpbmRvd1tiXT1mfX1hLmlzV3JhcHBlckZvcjt2YXIgYz17YToiSFRNTEFuY2hvckVsZW1lbnQiLGFwcGxldDoiSFRNTEFwcGxldEVsZW1lbnQiLGFyZWE6IkhUTUxBcmVhRWxlbWVudCIsYXVkaW86IkhUTUxBdWRpb0VsZW1lbnQiLGJyOiJIVE1MQlJFbGVtZW50IixiYXNlOiJIVE1MQmFzZUVsZW1lbnQiLGJvZHk6IkhUTUxCb2R5RWxlbWVudCIsYnV0dG9uOiJIVE1MQnV0dG9uRWxlbWVudCIsY2FudmFzOiJIVE1MQ2FudmFzRWxlbWVudCIsZGw6IkhUTUxETGlzdEVsZW1lbnQiLGRhdGFsaXN0OiJIVE1MRGF0YUxpc3RFbGVtZW50IixkaXI6IkhUTUxEaXJlY3RvcnlFbGVtZW50IixkaXY6IkhUTUxEaXZFbGVtZW50IixlbWJlZDoiSFRNTEVtYmVkRWxlbWVudCIsZmllbGRzZXQ6IkhUTUxGaWVsZFNldEVsZW1lbnQiLGZvbnQ6IkhUTUxGb250RWxlbWVudCIsZm9ybToiSFRNTEZvcm1FbGVtZW50IixmcmFtZToiSFRNTEZyYW1lRWxlbWVudCIsZnJhbWVzZXQ6IkhUTUxGcmFtZVNldEVsZW1lbnQiLGhyOiJIVE1MSFJFbGVtZW50IixoZWFkOiJIVE1MSGVhZEVsZW1lbnQiLGgxOiJIVE1MSGVhZGluZ0VsZW1lbnQiLGh0bWw6IkhUTUxIdG1sRWxlbWVudCIsaWZyYW1lOiJIVE1MSUZyYW1lRWxlbWVudCIsaW5wdXQ6IkhUTUxJbnB1dEVsZW1lbnQiLGxpOiJIVE1MTElFbGVtZW50IixsYWJlbDoiSFRNTExhYmVsRWxlbWVudCIsbGVnZW5kOiJIVE1MTGVnZW5kRWxlbWVudCIsbGluazoiSFRNTExpbmtFbGVtZW50IixtYXA6IkhUTUxNYXBFbGVtZW50IixtZW51OiJIVE1MTWVudUVsZW1lbnQiLG1lbnVpdGVtOiJIVE1MTWVudUl0ZW1FbGVtZW50IixtZXRhOiJIVE1MTWV0YUVsZW1lbnQiLG1ldGVyOiJIVE1MTWV0ZXJFbGVtZW50IixkZWw6IkhUTUxNb2RFbGVtZW50IixvbDoiSFRNTE9MaXN0RWxlbWVudCIsb2JqZWN0OiJIVE1MT2JqZWN0RWxlbWVudCIsb3B0Z3JvdXA6IkhUTUxPcHRHcm91cEVsZW1lbnQiLG9wdGlvbjoiSFRNTE9wdGlvbkVsZW1lbnQiLG91dHB1dDoiSFRNTE91dHB1dEVsZW1lbnQiLHA6IkhUTUxQYXJhZ3JhcGhFbGVtZW50IixwYXJhbToiSFRNTFBhcmFtRWxlbWVudCIscHJlOiJIVE1MUHJlRWxlbWVudCIscHJvZ3Jlc3M6IkhUTUxQcm9ncmVzc0VsZW1lbnQiLHE6IkhUTUxRdW90ZUVsZW1lbnQiLHNjcmlwdDoiSFRNTFNjcmlwdEVsZW1lbnQiLHNlbGVjdDoiSFRNTFNlbGVjdEVsZW1lbnQiLHNvdXJjZToiSFRNTFNvdXJjZUVsZW1lbnQiLHNwYW46IkhUTUxTcGFuRWxlbWVudCIsc3R5bGU6IkhUTUxTdHlsZUVsZW1lbnQiLGNhcHRpb246IkhUTUxUYWJsZUNhcHRpb25FbGVtZW50Iixjb2w6IkhUTUxUYWJsZUNvbEVsZW1lbnQiLHRhYmxlOiJIVE1MVGFibGVFbGVtZW50Iix0cjoiSFRNTFRhYmxlUm93RWxlbWVudCIsdGhlYWQ6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0Ym9keToiSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQiLHRleHRhcmVhOiJIVE1MVGV4dEFyZWFFbGVtZW50Iix0aXRsZToiSFRNTFRpdGxlRWxlbWVudCIsdWw6IkhUTUxVTGlzdEVsZW1lbnQiLHZpZGVvOiJIVE1MVmlkZW9FbGVtZW50In07T2JqZWN0LmtleXMoYykuZm9yRWFjaChiKSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhLndyYXBwZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3dpbmRvd1tiXT1hLndyYXBwZXJzW2JdfSksYS5rbm93bkVsZW1lbnRzPWN9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKCl7d2luZG93LndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW1wbD9hOlNoYWRvd0RPTVBvbHlmaWxsLndyYXAoYSl9LHdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW1wbD9TaGFkb3dET01Qb2x5ZmlsbC51bndyYXAoYSk6YX07dmFyIGE9d2luZG93LmdldENvbXB1dGVkU3R5bGU7d2luZG93LmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKHdpbmRvdyx3cmFwKGIpLGMpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhIVE1MRWxlbWVudC5wcm90b3R5cGUse3dlYmtpdFNoYWRvd1Jvb3Q6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoYWRvd1Jvb3R9fX0pO3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290O0hUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGE9Yi5jYWxsKHRoaXMpO3JldHVybiBhLmhvc3Q9dGhpcyxhfSxIVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1IVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdH0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7dmFyIGM9IiI7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXtjKz1hLnRleHRDb250ZW50KyJcblxuIn0pLGJ8fChjPWMucmVwbGFjZShtLCIiKSksY31mdW5jdGlvbiBjKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7Yi50ZXh0Q29udGVudD1hLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYik7dmFyIGM9Yi5zaGVldC5jc3NSdWxlcztyZXR1cm4gYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGN9ZnVuY3Rpb24gZChhKXtmb3IodmFyIGI9MCxjPVtdO2I8YS5sZW5ndGg7YisrKWMucHVzaChhW2JdLmNzc1RleHQpO3JldHVybiBjLmpvaW4oIlxuXG4iKX1mdW5jdGlvbiBlKGEpe2EmJmYoKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9ZnVuY3Rpb24gZigpe3JldHVybiBnfHwoZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLGcuc2V0QXR0cmlidXRlKCJTaGFkb3dDU1NTaGltIiwiIikpLGd9dmFyIGcsaD17c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihhLGIsYyl7aWYoYSl7dmFyIGQ9dGhpcy5yZWdpc3RlckRlZmluaXRpb24oYSxiLGMpO3RoaXMuc3RyaWN0U3R5bGluZyYmdGhpcy5hcHBseVNjb3BlVG9Db250ZW50KGEsYiksdGhpcy5zaGltUG9seWZpbGxEaXJlY3RpdmVzKGQucm9vdFN0eWxlcyxiKSx0aGlzLmFwcGx5U2hpbW1pbmcoZC5zY29wZVN0eWxlcyxiKSx0aGlzLmFwcGx5UG9seWZpbGxSdWxlcyhkLnJvb3RTdHlsZXMsYil9fSxzaGltU2hhZG93RE9NU3R5bGluZzpmdW5jdGlvbihhLGIpe3RoaXMuc2hpbVBvbHlmaWxsRGlyZWN0aXZlcyhhLGIpLHRoaXMuYXBwbHlTaGltbWluZyhhLGIpLHRoaXMuYXBwbHlQb2x5ZmlsbFJ1bGVzKGEsYil9LHJlZ2lzdGVyRGVmaW5pdGlvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZWdpc3RyeVtiXT17cm9vdDphLG5hbWU6YixleHRlbmRzTmFtZTpjfSxlPWEucXVlcnlTZWxlY3RvckFsbCgic3R5bGUiKTtlPWU/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSwwKTpbXSxkLnJvb3RTdHlsZXM9ZSxkLnNjb3BlU3R5bGVzPWQucm9vdFN0eWxlczt2YXIgZj10aGlzLnJlZ2lzdHJ5W2QuZXh0ZW5kc05hbWVdO3JldHVybiBmJiZhLnF1ZXJ5U2VsZWN0b3IoInNoYWRvdyIpJiYoZC5zY29wZVN0eWxlcz1mLnNjb3BlU3R5bGVzLmNvbmNhdChkLnNjb3BlU3R5bGVzKSksZH0sYXBwbHlTY29wZVRvQ29udGVudDpmdW5jdGlvbihhLGIpe2EmJihBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgiKiIpLGZ1bmN0aW9uKGEpe2Euc2V0QXR0cmlidXRlKGIsIiIpfSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIiksZnVuY3Rpb24oYSl7dGhpcy5hcHBseVNjb3BlVG9Db250ZW50KGEuY29udGVudCxiKX0sdGhpcykpfSxzaGltUG9seWZpbGxEaXJlY3RpdmVzOmZ1bmN0aW9uKGEsYil7YSYmQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9dGhpcy5jb252ZXJ0UG9seWZpbGxEaXJlY3RpdmVzKGEudGV4dENvbnRlbnQsYil9LHRoaXMpfSxjb252ZXJ0UG9seWZpbGxEaXJlY3RpdmVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQsZT0iIixmPTA7Yz1uLmV4ZWMoYSk7KWUrPWEuc3Vic3RyaW5nKGYsYy5pbmRleCksZD1jWzFdLnNsaWNlKDAsLTIpLnJlcGxhY2UocixiKSxlKz10aGlzLnNjb3BlU2VsZWN0b3IoZCxiKSsieyIsZj1uLmxhc3RJbmRleDtyZXR1cm4gZSs9YS5zdWJzdHJpbmcoZixhLmxlbmd0aCl9LGFwcGx5U2hpbW1pbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnNoaW1BdEhvc3QoYSxiKTtjKz10aGlzLnNoaW1TY29waW5nKGEsYiksZShjKX0sc2hpbUF0SG9zdDpmdW5jdGlvbihhLGIpe3JldHVybiBhP3RoaXMuY29udmVydEF0SG9zdFN0eWxlcyhhLGIpOnZvaWQgMH0sY29udmVydEF0SG9zdFN0eWxlczpmdW5jdGlvbihhLGUpe2Zvcih2YXIgZixnPWIoYSksaD0iIixqPTA7Zj1pLmV4ZWMoZyk7KWgrPWcuc3Vic3RyaW5nKGosZi5pbmRleCksaCs9dGhpcy5zY29wZUhvc3RDc3MoZlsxXSxlKSxqPWkubGFzdEluZGV4O2grPWcuc3Vic3RyaW5nKGosZy5sZW5ndGgpO3ZhciBrPW5ldyBSZWdFeHAoIl4iK2UrcSwibSIpLGc9ZCh0aGlzLmZpbmRBdEhvc3RSdWxlcyhjKGgpLGspKTtyZXR1cm4gZ30sc2NvcGVIb3N0Q3NzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9IiI7Yz1qLmV4ZWMoYSk7KWQrPXRoaXMuc2NvcGVIb3N0U2VsZWN0b3IoY1sxXSxiKSsiICIrY1syXSsiXG4JIjtyZXR1cm4gZH0sc2NvcGVIb3N0U2VsZWN0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWEuc3BsaXQoIiwiKSxlPSJbaXM9IitiKyJdIjtyZXR1cm4gZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksYS5tYXRjaChrKT9hPWEucmVwbGFjZShrLGIrIiQxJDMsICIrZSsiJDEkMyIpOmEubWF0Y2gobCkmJihhPWIrYSsiLCAiK2UrYSksYy5wdXNoKGEpfSx0aGlzKSxjLmpvaW4oIiwgIil9LGZpbmRBdEhvc3RSdWxlczpmdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYSx0aGlzLmlzSG9zdFJ1bGUuYmluZCh0aGlzLGIpKX0saXNIb3N0UnVsZTpmdW5jdGlvbihhLGIpe3JldHVybiBiLnNlbGVjdG9yVGV4dCYmYi5zZWxlY3RvclRleHQubWF0Y2goYSl8fGIuY3NzUnVsZXMmJnRoaXMuZmluZEF0SG9zdFJ1bGVzKGIuY3NzUnVsZXMsYSkubGVuZ3RofHxiLnR5cGU9PUNTU1J1bGUuV0VCS0lUX0tFWUZSQU1FU19SVUxFfSxzaGltU2NvcGluZzpmdW5jdGlvbihhLGIpe3JldHVybiBhP3RoaXMuY29udmVydFNjb3BlZFN0eWxlcyhhLGIpOnZvaWQgMH0sY29udmVydFNjb3BlZFN0eWxlczpmdW5jdGlvbihhLGQpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXthLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX0pO3ZhciBlPWIoYSkucmVwbGFjZShpLCIiKTtlPXRoaXMuY29udmVydFBzZXVkb3MoZSk7dmFyIGY9YyhlKTtyZXR1cm4gZT10aGlzLnNjb3BlUnVsZXMoZixkKX0sY29udmVydFBzZXVkb3M6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShwLCIgW3BzZXVkbz0kMV0iKX0sc2NvcGVSdWxlczpmdW5jdGlvbihhLGIpe3ZhciBjPSIiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS5zZWxlY3RvclRleHQmJmEuc3R5bGUmJmEuc3R5bGUuY3NzVGV4dD8oYys9dGhpcy5zY29wZVNlbGVjdG9yKGEuc2VsZWN0b3JUZXh0LGIsdGhpcy5zdHJpY3RTdHlsaW5nKSsiIHtcbgkiLGMrPXRoaXMucHJvcGVydGllc0Zyb21SdWxlKGEpKyJcbn1cblxuIik6YS5tZWRpYT8oYys9IkBtZWRpYSAiK2EubWVkaWEubWVkaWFUZXh0KyIge1xuIixjKz10aGlzLnNjb3BlUnVsZXMoYS5jc3NSdWxlcyxiKSxjKz0iXG59XG5cbiIpOmEuY3NzVGV4dCYmKGMrPWEuY3NzVGV4dCsiXG5cbiIpfSx0aGlzKSxjfSxzY29wZVNlbGVjdG9yOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPWEuc3BsaXQoIiwiKTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhhLGIpJiYoYT1jP3RoaXMuYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlKGEsYik6dGhpcy5hcHBseVNpbXBsZVNlbGVjdG9yU2NvcGUoYSxiKSksZC5wdXNoKGEpfSx0aGlzKSxkLmpvaW4oIiwgIil9LHNlbGVjdG9yTmVlZHNTY29waW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9IigiK2IrInxcXFtpcz0iK2IrIlxcXSkiLGQ9bmV3IFJlZ0V4cCgiXiIrYytxLCJtIik7cmV0dXJuIWEubWF0Y2goZCl9LGFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3JldHVybiBiKyIgIithKyIsICIrIltpcz0iK2IrIl0gIithfSxhcHBseVN0cmljdFNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bIiAiLCI+IiwiKyIsIn4iXSxkPWEsZT0iWyIrYisiXSI7cmV0dXJuIGMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1kLnNwbGl0KGEpO2Q9Yi5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9YS50cmltKCk7cmV0dXJuIGImJmMuaW5kZXhPZihiKTwwJiZiLmluZGV4T2YoZSk8MCYmKGE9Yi5yZXBsYWNlKC8oW146XSopKDoqKSguKikvLCIkMSIrZSsiJDIkMyIpKSxhfSkuam9pbihhKX0pLGR9LHByb3BlcnRpZXNGcm9tUnVsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnN0eWxlLmNzc1RleHQ7cmV0dXJuIGEuc3R5bGUuY29udGVudCYmIWEuc3R5bGUuY29udGVudC5tYXRjaCgvWyciXSsvKSYmKGI9ImNvbnRlbnQ6ICciK2Euc3R5bGUuY29udGVudCsiJztcbiIrYS5zdHlsZS5jc3NUZXh0LnJlcGxhY2UoL2NvbnRlbnQ6W147XSo7L2csIiIpKSxifSxhcHBseVBvbHlmaWxsUnVsZXM6ZnVuY3Rpb24oYSxiKXtpZihhKXt2YXIgYz0iIjtBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7Yys9dGhpcy5leHRyYWN0UG9seWZpbGxSdWxlcyhhLnRleHRDb250ZW50LGIpKyJcblxuIn0sdGhpcyl9ZShjKX0sZXh0cmFjdFBvbHlmaWxsUnVsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0iIjtjPW8uZXhlYyhhKTspcnVsZT1jWzFdLnNsaWNlKDAsLTEpLnJlcGxhY2UocixiKSxkKz1ydWxlKyJcblxuIjtyZXR1cm4gZH19LGk9L0Bob3N0W157XSp7KChbXn1dKj97W157XSo/fVtcc1xTXSo/KSspfS9naW0saj0vKFtee10qKSh7W1xzXFNdKj99KS9naW0saz0vKC4qKSgoPzpcKil8KD86XDpzY29wZSkpKC4qKS8sbD0vXlsuXFs6XS8sbT0vXC9cKlteKl0qXCorKFteLypdW14qXSpcKispKlwvL2dpbSxuPS9cL1wqXHMqQHBvbHlmaWxsIChbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLykoW157XSo/KXsvZ2ltLG89L1wvXCpcc0Bwb2x5ZmlsbC1ydWxlKFteKl0qXCorKFteLypdW14qXSpcKispKilcLy9naW0scD0vOjooeC1bXlxzeywoXSopL2dpbSxxPSIoWz5cXHN+K1suLHs6XVtcXHNcXFNdKik/JCIscj0vQGhvc3QvZ2ltO2lmKHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCl7ZSgic3R5bGUgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1cbiIpO3ZhciBzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtzLmluc2VydEJlZm9yZShmKCkscy5jaGlsZE5vZGVzWzBdKX1hLlNoYWRvd0NTUz1ofSh3aW5kb3cuUGxhdGZvcm0pfWVsc2UhZnVuY3Rpb24oKXt3aW5kb3cudGVtcGxhdGVDb250ZW50PXdpbmRvdy50ZW1wbGF0ZUNvbnRlbnR8fGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnR9LHdpbmRvdy53cmFwPXdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9O3ZhciBhPUhUTUxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290O0hUTUxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy53ZWJraXRTaGFkb3dSb290LGM9YS5jYWxsKHRoaXMpO3JldHVybiBjLm9sZGVyU2hhZG93Um9vdD1iLGMuaG9zdD10aGlzLEN1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93KHRoaXMpLGN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEhUTUxFbGVtZW50LnByb3RvdHlwZSx7c2hhZG93Um9vdDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Via2l0U2hhZG93Um9vdH19LGNyZWF0ZVNoYWRvd1Jvb3Q6e3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Via2l0Q3JlYXRlU2hhZG93Um9vdCgpfX19KSx3aW5kb3cudGVtcGxhdGVDb250ZW50PWZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYSksIWEuY29udGVudCYmIWEuX2NvbnRlbnQpe2Zvcih2YXIgYj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5maXJzdENoaWxkOyliLmFwcGVuZENoaWxkKGEuZmlyc3RDaGlsZCk7YS5fY29udGVudD1ifXJldHVybiBhLmNvbnRlbnR8fGEuX2NvbnRlbnR9fSgpO2lmKGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zm9yKHZhciBiPWF8fHt9LGQ9MTtkPGFyZ3VtZW50cy5sZW5ndGg7ZCsrKXt2YXIgZT1hcmd1bWVudHNbZF07dHJ5e2Zvcih2YXIgZiBpbiBlKWMoZixlLGIpfWNhdGNoKGcpe319cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGU9ZChiLGEpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGEsZSl9ZnVuY3Rpb24gZChhLGIpe2lmKGEpe3ZhciBjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKTtyZXR1cm4gY3x8ZChPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYil9fUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7cmV0dXJuIGQucHVzaC5hcHBseShkLGFyZ3VtZW50cyksYi5hcHBseShhLGQpfX0pLGEubWl4aW49Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIsYyl7dmFyIGQ9InN0cmluZyI9PXR5cGVvZiBhP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk6YS5jbG9uZU5vZGUoITApO2lmKGQuaW5uZXJIVE1MPWIsYylmb3IodmFyIGUgaW4gYylkLnNldEF0dHJpYnV0ZShlLGNbZV0pO3JldHVybiBkfXZhciBjPURPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkLGQ9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWMuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylkLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGIpezE9PWFyZ3VtZW50cy5sZW5ndGgmJihiPSF0aGlzLmNvbnRhaW5zKGEpKSxiP3RoaXMuYWRkKGEpOnRoaXMucmVtb3ZlKGEpfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnN3aXRjaD1mdW5jdGlvbihhLGIpe2EmJnRoaXMucmVtb3ZlKGEpLGImJnRoaXMuYWRkKGIpfTt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzKX0sZj13aW5kb3cuTmFtZWROb2RlTWFwfHx3aW5kb3cuTW96TmFtZWRBdHRyTWFwfHx7fTtOb2RlTGlzdC5wcm90b3R5cGUuYXJyYXk9ZSxmLnByb3RvdHlwZS5hcnJheT1lLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5hcnJheT1lOwp2YXIgZz1mdW5jdGlvbihhLGIpe2UuY2FsbCh0aGlzKS5mb3JFYWNoKGEsYil9O2lmKE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoPWcsZi5wcm90b3R5cGUuZm9yRWFjaD1nLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5mb3JFYWNoPWcsIXdpbmRvdy5wZXJmb3JtYW5jZSl7dmFyIGg9RGF0ZS5ub3coKTt3aW5kb3cucGVyZm9ybWFuY2U9e25vdzpmdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLWh9fX13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7cmV0dXJuIGE/ZnVuY3Rpb24oYil7cmV0dXJuIGEoZnVuY3Rpb24oKXtiKHBlcmZvcm1hbmNlLm5vdygpKX0pfTpmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9fSgpKSxhLmNyZWF0ZURPTT1ifSh3aW5kb3cuUGxhdGZvcm0pLHdpbmRvdy50ZW1wbGF0ZUNvbnRlbnQ9d2luZG93LnRlbXBsYXRlQ29udGVudHx8ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudH0sZnVuY3Rpb24oYSl7YT1hfHwod2luZG93Lkluc3BlY3Rvcj17fSk7dmFyIGI7d2luZG93LnNpbnNwZWN0PWZ1bmN0aW9uKGEsZCl7Ynx8KGI9d2luZG93Lm9wZW4oIiIsIlNoYWRvd0RPTSBJbnNwZWN0b3IiLG51bGwsITApLGIuZG9jdW1lbnQud3JpdGUoYyksYi5hcGk9e3NoYWRvd2l6ZTpzaGFkb3dpemV9KSxmKGF8fHdyYXAoZG9jdW1lbnQuYm9keSksZCl9O3ZhciBjPVsiPCFET0NUWVBFIGh0bWw+IiwiPGh0bWw+IiwiICA8aGVhZD4iLCIgICAgPHRpdGxlPlNoYWRvd0RPTSBJbnNwZWN0b3I8L3RpdGxlPiIsIiAgICA8c3R5bGU+IiwiICAgICAgYm9keSB7IiwiICAgICAgfSIsIiAgICAgIHByZSB7IiwnICAgICAgICBmb250OiA5cHQgIkNvdXJpZXIgTmV3IiwgbW9ub3NwYWNlOycsIiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNWVtOyIsIiAgICAgIH0iLCIgICAgICB0YWcgeyIsIiAgICAgICAgY29sb3I6IHB1cnBsZTsiLCIgICAgICB9IiwiICAgICAgdWwgeyIsIiAgICAgICAgIG1hcmdpbjogMDsiLCIgICAgICAgICBwYWRkaW5nOiAwOyIsIiAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7IiwiICAgICAgfSIsIiAgICAgIGxpIHsiLCIgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwiICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjFmMTsiLCIgICAgICAgICBwYWRkaW5nOiA0cHggNnB4OyIsIiAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsiLCIgICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDsiLCIgICAgICB9IiwiICAgIDwvc3R5bGU+IiwiICA8L2hlYWQ+IiwiICA8Ym9keT4iLCcgICAgPHVsIGlkPSJjcnVtYnMiPicsIiAgICA8L3VsPiIsJyAgICA8ZGl2IGlkPSJ0cmVlIj48L2Rpdj4nLCIgIDwvYm9keT4iLCI8L2h0bWw+Il0uam9pbigiXG4iKSxkPVtdLGU9ZnVuY3Rpb24oKXt2YXIgYT1iLmRvY3VtZW50LGM9YS5xdWVyeVNlbGVjdG9yKCIjY3J1bWJzIik7Yy50ZXh0Q29udGVudD0iIjtmb3IodmFyIGUsZz0wO2U9ZFtnXTtnKyspe3ZhciBoPWEuY3JlYXRlRWxlbWVudCgiYSIpO2guaHJlZj0iIyIsaC50ZXh0Q29udGVudD1lLmxvY2FsTmFtZSxoLmlkeD1nLGgub25jbGljaz1mdW5jdGlvbihhKXtmb3IodmFyIGI7ZC5sZW5ndGg+dGhpcy5pZHg7KWI9ZC5wb3AoKTtmKGIuc2hhZG93fHxiLGIpLGEucHJldmVudERlZmF1bHQoKX0sYy5hcHBlbmRDaGlsZChhLmNyZWF0ZUVsZW1lbnQoImxpIikpLmFwcGVuZENoaWxkKGgpfX0sZj1mdW5jdGlvbihhLGMpe3ZhciBmPWIuZG9jdW1lbnQ7az1bXTt2YXIgZz1jfHxhO2QucHVzaChnKSxlKCksZi5ib2R5LnF1ZXJ5U2VsZWN0b3IoIiN0cmVlIikuaW5uZXJIVE1MPSI8cHJlPiIraihhLGEuY2hpbGROb2RlcykrIjwvcHJlPiJ9LGc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxoPXtTVFlMRToxLFNDUklQVDoxLCIjY29tbWVudCI6MSxURU1QTEFURToxfSxpPWZ1bmN0aW9uKGEpe3JldHVybiBoW2Eubm9kZU5hbWVdfSxqPWZ1bmN0aW9uKGEsYixjKXtpZihpKGEpKXJldHVybiIiO3ZhciBkPWN8fCIiO2lmKGEubG9jYWxOYW1lfHwxMT09YS5ub2RlVHlwZSl7dmFyIGU9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCIsZj1kK2woYSk7ImNvbnRlbnQiPT1lJiYoYj1hLmdldERpc3RyaWJ1dGVkTm9kZXMoKSksZis9Ijxici8+Ijt2YXIgaD1kKyImbmJzcDsmbmJzcDsiO2coYixmdW5jdGlvbihhKXtmKz1qKGEsYS5jaGlsZE5vZGVzLGgpfSksZis9ZCx7YnI6MX1bZV18fChmKz0iPHRhZz4mbHQ7LyIrZSsiJmd0OzwvdGFnPiIsZis9Ijxici8+Iil9ZWxzZXt2YXIgaz1hLnRleHRDb250ZW50LnRyaW0oKTtmPWs/ZCsnIicraysnIicrIjxici8+IjoiIn1yZXR1cm4gZn0saz1bXSxsPWZ1bmN0aW9uKGEpe3ZhciBiPSI8dGFnPiZsdDsiLGM9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCI7cmV0dXJuIGEud2Via2l0U2hhZG93Um9vdHx8YS5zaGFkb3dSb290PyhiKz0nIDxidXR0b24gaWR4PSInK2subGVuZ3RoKyciIG9uY2xpY2s9ImFwaS5zaGFkb3dpemUuY2FsbCh0aGlzKSI+JytjKyI8L2J1dHRvbj4iLGsucHVzaChhKSk6Yis9Y3x8InNoYWRvdy1yb290IixhLmF0dHJpYnV0ZXMmJmcoYS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGEpe2IrPSIgIithLm5hbWUrKGEudmFsdWU/Jz0iJythLnZhbHVlKyciJzoiIil9KSxiKz0iJmd0OzwvdGFnPiJ9O3NoYWRvd2l6ZT1mdW5jdGlvbigpe3ZhciBhPU51bWJlcih0aGlzLmF0dHJpYnV0ZXMuaWR4LnZhbHVlKSxiPWtbYV07Yj9mKGIud2Via2l0U2hhZG93Um9vdHx8Yi5zaGFkb3dSb290LGIpOihjb25zb2xlLmxvZygiYmFkIHNoYWRvd2l6ZSBub2RlIiksY29uc29sZS5kaXIodGhpcykpfSxhLm91dHB1dD1qfSh3aW5kb3cuSW5zcGVjdG9yKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBhKGEsYixjLGQpe3RoaXMuY2xvc2VkPSExLHRoaXMubm9kZT1hLHRoaXMucHJvcGVydHk9Yix0aGlzLm1vZGVsPWMsdGhpcy5wYXRoPVBhdGguZ2V0KGQpLCh0aGlzLm1vZGVsIGluc3RhbmNlb2YgUGF0aE9ic2VydmVyfHx0aGlzLm1vZGVsIGluc3RhbmNlb2YgQ29tcG91bmRQYXRoT2JzZXJ2ZXIpJiZ0aGlzLnBhdGg9PT1rPyh0aGlzLm9ic2VydmVyPXRoaXMubW9kZWwsdGhpcy5vYnNlcnZlci50YXJnZXQ9dGhpcyx0aGlzLm9ic2VydmVyLmNhbGxiYWNrPXRoaXMudmFsdWVDaGFuZ2VkKTp0aGlzLm9ic2VydmVyPW5ldyBQYXRoT2JzZXJ2ZXIodGhpcy5tb2RlbCx0aGlzLnBhdGgsdGhpcy52YWx1ZUNoYW5nZWQsdGhpcyksdGhpcy52YWx1ZUNoYW5nZWQodGhpcy52YWx1ZSl9ZnVuY3Rpb24gYihiLGMsZCxlKXt0aGlzLmNvbmRpdGlvbmFsPSI/Ij09Y1tjLmxlbmd0aC0xXSx0aGlzLmNvbmRpdGlvbmFsJiYoYi5yZW1vdmVBdHRyaWJ1dGUoYyksYz1jLnNsaWNlKDAsLTEpKSxhLmNhbGwodGhpcyxiLGMsZCxlKX1mdW5jdGlvbiBjKGEpe3N3aXRjaChhLnR5cGUpe2Nhc2UiY2hlY2tib3giOnJldHVybiBsO2Nhc2UicmFkaW8iOmNhc2Uic2VsZWN0LW11bHRpcGxlIjpjYXNlInNlbGVjdC1vbmUiOnJldHVybiJjaGFuZ2UiO2RlZmF1bHQ6cmV0dXJuImlucHV0In19ZnVuY3Rpb24gZChiLGQsZSxmKXthLmNhbGwodGhpcyxiLGQsZSxmKSx0aGlzLmV2ZW50VHlwZT1jKHRoaXMubm9kZSksdGhpcy5ib3VuZE5vZGVWYWx1ZUNoYW5nZWQ9dGhpcy5ub2RlVmFsdWVDaGFuZ2VkLmJpbmQodGhpcyksdGhpcy5ub2RlLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5ldmVudFR5cGUsdGhpcy5ib3VuZE5vZGVWYWx1ZUNoYW5nZWQsITApfWZ1bmN0aW9uIGUoYSl7aWYoIWEub3duZXJEb2N1bWVudC5jb250YWlucyhhKSlyZXR1cm5bXTtpZihhLmZvcm0pcmV0dXJuIGkoYS5mb3JtLmVsZW1lbnRzLGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hJiYiSU5QVVQiPT1iLnRhZ05hbWUmJiJyYWRpbyI9PWIudHlwZSYmYi5uYW1lPT1hLm5hbWV9KTt2YXIgYj1hLm93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSInK2EubmFtZSsnIl0nKTtyZXR1cm4gaShiLGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hJiYhYi5mb3JtfSl9ZnVuY3Rpb24gZihhLGIsYyl7ZC5jYWxsKHRoaXMsYSwiY2hlY2tlZCIsYixjKX1mdW5jdGlvbiBnKGEsYixjKXtkLmNhbGwodGhpcyxhLCJ2YWx1ZSIsYixjKX1mdW5jdGlvbiBoKGEsYixjLGUpe2QuY2FsbCh0aGlzLGEsYixjLGUpfXZhciBpPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5maWx0ZXIpLGo9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9OyJmdW5jdGlvbiIhPXR5cGVvZiBkb2N1bWVudC5jb250YWlucyYmKERvY3VtZW50LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbihhKXtyZXR1cm4gYT09PXRoaXN8fGEucGFyZW50Tm9kZT09PXRoaXM/ITA6dGhpcy5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMoYSl9KSxOb2RlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtjb25zb2xlLmVycm9yKCJVbmhhbmRsZWQgYmluZGluZyB0byBOb2RlOiAiLHRoaXMsYSxiLGMpfSxOb2RlLnByb3RvdHlwZS51bmJpbmQ9ZnVuY3Rpb24oYSl7dGhpcy5iaW5kaW5nc3x8KHRoaXMuYmluZGluZ3M9e30pO3ZhciBiPXRoaXMuYmluZGluZ3NbYV07YiYmKCJmdW5jdGlvbiI9PXR5cGVvZiBiLmNsb3NlJiZiLmNsb3NlKCksdGhpcy5iaW5kaW5nc1thXT12b2lkIDApfSxOb2RlLnByb3RvdHlwZS51bmJpbmRBbGw9ZnVuY3Rpb24oKXtpZih0aGlzLmJpbmRpbmdzKXtmb3IodmFyIGE9T2JqZWN0LmtleXModGhpcy5iaW5kaW5ncyksYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz10aGlzLmJpbmRpbmdzW2FbYl1dO2MmJmMuY2xvc2UoKX10aGlzLmJpbmRpbmdzPXt9fX07dmFyIGs9UGF0aC5nZXQoInZhbHVlIik7YS5wcm90b3R5cGU9e3ZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhKXt0aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eV09dGhpcy5zYW5pdGl6ZUJvdW5kVmFsdWUoYSl9LHNhbml0aXplQm91bmRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT1hPyIiOlN0cmluZyhhKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZHx8KHRoaXMub2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLm9ic2VydmVyPXZvaWQgMCx0aGlzLm5vZGU9dm9pZCAwLHRoaXMubW9kZWw9dm9pZCAwLHRoaXMuY2xvc2VkPSEwKX0sZ2V0IHZhbHVlKCl7cmV0dXJuIHRoaXMub2JzZXJ2ZXIudmFsdWV9LHNldCB2YWx1ZShhKXt0aGlzLm9ic2VydmVyLnNldFZhbHVlKGEpfSxyZXNldDpmdW5jdGlvbigpe3RoaXMub2JzZXJ2ZXIucmVzZXQoKX19LFRleHQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYixjLGQpe3JldHVybiJ0ZXh0Q29udGVudCIhPT1iP05vZGUucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGIsYyxkKToodGhpcy51bmJpbmQoYiksdGhpcy5iaW5kaW5nc1tiXT1uZXcgYSh0aGlzLCJkYXRhIixjLGQpKX0sYi5wcm90b3R5cGU9aih7X19wcm90b19fOmEucHJvdG90eXBlLHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb25kaXRpb25hbD8oYT90aGlzLm5vZGUuc2V0QXR0cmlidXRlKHRoaXMucHJvcGVydHksIiIpOnRoaXMubm9kZS5yZW1vdmVBdHRyaWJ1dGUodGhpcy5wcm9wZXJ0eSksdm9pZCAwKToodGhpcy5ub2RlLnNldEF0dHJpYnV0ZSh0aGlzLnByb3BlcnR5LHRoaXMuc2FuaXRpemVCb3VuZFZhbHVlKGEpKSx2b2lkIDApfX0pLEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLnVuYmluZChhKSx0aGlzLmJpbmRpbmdzW2FdPW5ldyBiKHRoaXMsYSxjLGQpfTt2YXIgbDshZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiPWEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSk7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJjaGVja2JveCIpO3ZhciBjLGQ9MDtiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjbGljayJ9KSxiLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24oKXtkKyssYz1jfHwiY2hhbmdlIn0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7ZS5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCEwLHdpbmRvdywwLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsKSxiLmRpc3BhdGNoRXZlbnQoZSksbD0xPT1kPyJjaGFuZ2UiOmN9KCksZC5wcm90b3R5cGU9aih7X19wcm90b19fOmEucHJvdG90eXBlLG5vZGVWYWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oKXt0aGlzLnZhbHVlPXRoaXMubm9kZVt0aGlzLnByb3BlcnR5XSx0aGlzLnJlc2V0KCksdGhpcy5wb3N0VXBkYXRlQmluZGluZygpLFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCl9LHBvc3RVcGRhdGVCaW5kaW5nOmZ1bmN0aW9uKCl7fSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwodGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5ldmVudFR5cGUsdGhpcy5ib3VuZE5vZGVWYWx1ZUNoYW5nZWQsITApLGEucHJvdG90eXBlLmNsb3NlLmNhbGwodGhpcykpfX0pLGYucHJvdG90eXBlPWooe19fcHJvdG9fXzpkLnByb3RvdHlwZSxzYW5pdGl6ZUJvdW5kVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIEJvb2xlYW4oYSl9LHBvc3RVcGRhdGVCaW5kaW5nOmZ1bmN0aW9uKCl7IklOUFVUIj09PXRoaXMubm9kZS50YWdOYW1lJiYicmFkaW8iPT09dGhpcy5ub2RlLnR5cGUmJmUodGhpcy5ub2RlKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWEuYmluZGluZ3MuY2hlY2tlZDtiJiYoYi52YWx1ZT0hMSl9KX19KSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4idmFsdWUiIT09YSYmImNoZWNrZWQiIT09YT9IVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpOih0aGlzLnVuYmluZChhKSx0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSx0aGlzLmJpbmRpbmdzW2FdPSJ2YWx1ZSI9PT1hP25ldyBkKHRoaXMsInZhbHVlIixiLGMpOm5ldyBmKHRoaXMsYixjKSl9LEhUTUxUZXh0QXJlYUVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiJ2YWx1ZSIhPT1hP0hUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk6KHRoaXMudW5iaW5kKGEpLHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLHRoaXMuYmluZGluZ3NbYV09bmV3IGQodGhpcyxhLGIsYykpfSxnLnByb3RvdHlwZT1qKHtfX3Byb3RvX186ZC5wcm90b3R5cGUsdmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZT10aGlzLm5vZGUucGFyZW50Tm9kZSBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50P3RoaXMubm9kZS5wYXJlbnROb2RlOnZvaWQgMDtlJiZlLmJpbmRpbmdzJiZlLmJpbmRpbmdzLnZhbHVlIGluc3RhbmNlb2YgaCYmKGI9ZS5iaW5kaW5ncy52YWx1ZSxjPWUudmFsdWUpLGQucHJvdG90eXBlLnZhbHVlQ2hhbmdlZC5jYWxsKHRoaXMsYSksYiYmIWIuY2xvc2VkJiZlLnZhbHVlIT09YyYmYi5ub2RlVmFsdWVDaGFuZ2VkKCl9fSksSFRNTE9wdGlvbkVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiJ2YWx1ZSIhPT1hP0hUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk6KHRoaXMudW5iaW5kKGEpLHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLHRoaXMuYmluZGluZ3NbYV09bmV3IGcodGhpcyxiLGMpKX0saC5wcm90b3R5cGU9aih7X19wcm90b19fOmQucHJvdG90eXBlLHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7ZC5ub2RlW2QucHJvcGVydHldPWEsZC5ub2RlW2QucHJvcGVydHldIT1hJiZjLS0mJm0oYil9aWYodGhpcy5ub2RlW3RoaXMucHJvcGVydHldPWEsdGhpcy5ub2RlW3RoaXMucHJvcGVydHldIT1hKXt2YXIgYz0yLGQ9dGhpczttKGIpfX19KSxIVE1MU2VsZWN0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuInNlbGVjdGVkaW5kZXgiPT09YSYmKGE9InNlbGVjdGVkSW5kZXgiKSwic2VsZWN0ZWRJbmRleCIhPT1hJiYidmFsdWUiIT09YT9IVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpOih0aGlzLnVuYmluZChhKSx0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSx0aGlzLmJpbmRpbmdzW2FdPW5ldyBoKHRoaXMsYSxiLGMpKX07dmFyIG09ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3RoaXMubmV4dFJ1bm5lcj1hLHRoaXMudmFsdWU9ITEsdGhpcy5sYXN0VmFsdWU9dGhpcy52YWx1ZSx0aGlzLnNjaGVkdWxlZD1bXSx0aGlzLnNjaGVkdWxlZElkcz1bXSx0aGlzLnJ1bm5pbmc9ITEsdGhpcy5vYnNlcnZlcj1uZXcgUGF0aE9ic2VydmVyKHRoaXMsInZhbHVlIix0aGlzLnJ1bix0aGlzKX1mdW5jdGlvbiBiKGEpe3ZhciBiPWFbZV07YVtlXXx8KGI9ZCsrLGFbZV09YiksYy5zY2hlZHVsZShhLGIpfWEucHJvdG90eXBlPXtzY2hlZHVsZTpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLnNjaGVkdWxlZElkc1tiXSl7aWYodGhpcy5ydW5uaW5nKXJldHVybiB0aGlzLm5leHRSdW5uZXIuc2NoZWR1bGUoYSxiKTt0aGlzLnNjaGVkdWxlZElkc1tiXT0hMCx0aGlzLnNjaGVkdWxlZC5wdXNoKGEpLHRoaXMubGFzdFZhbHVlPT09dGhpcy52YWx1ZSYmKHRoaXMudmFsdWU9IXRoaXMudmFsdWUpfX0scnVuOmZ1bmN0aW9uKCl7dGhpcy5ydW5uaW5nPSEwO2Zvcih2YXIgYT0wO2E8dGhpcy5zY2hlZHVsZWQubGVuZ3RoO2ErKyl7dmFyIGI9dGhpcy5zY2hlZHVsZWRbYV0sYz1iW2VdO3RoaXMuc2NoZWR1bGVkSWRzW2NdPSExLCJmdW5jdGlvbiI9PXR5cGVvZiBiP2IoKTpiLnJlc29sdmUoKX10aGlzLnNjaGVkdWxlZD1bXSx0aGlzLnNjaGVkdWxlZElkcz1bXSx0aGlzLmxhc3RWYWx1ZT10aGlzLnZhbHVlLHRoaXMucnVubmluZz0hMX19O3ZhciBjPW5ldyBhKG5ldyBhKSxkPTEsZT0iX19zY2hlZHVsZWRJZF9fIjtyZXR1cm4gYn0oKX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhKXtmb3IoO2EucGFyZW50Tm9kZTspYT1hLnBhcmVudE5vZGU7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGEuZ2V0RWxlbWVudEJ5SWQ/YTpudWxsfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIEZbYS50YWdOYW1lXSYmYS5oYXNBdHRyaWJ1dGUoInRlbXBsYXRlIil9ZnVuY3Rpb24gZShhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGQoYSl9ZnVuY3Rpb24gZihhKXtyZXR1cm4gRyYmIlRFTVBMQVRFIj09YS50YWdOYW1lfWZ1bmN0aW9uIGcoYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoSCk7ZShhKSYmYihhKSxBKGMsYil9ZnVuY3Rpb24gaChhKXtmdW5jdGlvbiBiKGEpe0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSl8fGgoYS5jb250ZW50KX1nKGEsYil9ZnVuY3Rpb24gaShhLGIpe09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSl9ZnVuY3Rpb24gaihhKXtpZighYS5kZWZhdWx0VmlldylyZXR1cm4gYTt2YXIgYj1hLnRlbXBsYXRlQ29udGVudHNPd25lcl87aWYoIWIpe2ZvcihiPWEuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtiLmxhc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmxhc3RDaGlsZCk7YS50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfPWJ9cmV0dXJuIGJ9ZnVuY3Rpb24gayhhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTthLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYSk7Zm9yKHZhciBjPWEuYXR0cmlidXRlcyxkPWMubGVuZ3RoO2QtLT4wOyl7dmFyIGU9Y1tkXTtFW2UubmFtZV0mJigidGVtcGxhdGUiIT09ZS5uYW1lJiZiLnNldEF0dHJpYnV0ZShlLm5hbWUsZS52YWx1ZSksYS5yZW1vdmVBdHRyaWJ1dGUoZS5uYW1lKSl9cmV0dXJuIGJ9ZnVuY3Rpb24gbChhLGIsYyl7dmFyIGQ9YS5jb250ZW50O2lmKGMpcmV0dXJuIGQuYXBwZW5kQ2hpbGQoYiksdm9pZCAwO2Zvcih2YXIgZTtlPWIuZmlyc3RDaGlsZDspZC5hcHBlbmRDaGlsZChlKX1mdW5jdGlvbiBtKGEpeyJURU1QTEFURSI9PT1hLnRhZ05hbWU/R3x8KEo/YS5fX3Byb3RvX189SFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU6aShhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKSk6KGkoYSxIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsImNvbnRlbnQiLEwpKX1mdW5jdGlvbiBuKGEpe2Euc2V0TW9kZWxGbl98fChhLnNldE1vZGVsRm5fPWZ1bmN0aW9uKCl7dChhLGEubW9kZWwsYS5iaW5kaW5nRGVsZWdhdGUpfSksSShhLnNldE1vZGVsRm5fKX1mdW5jdGlvbiBvKGEsYixjLGQpe2lmKGEmJmEubGVuZ3RoKXtmb3IodmFyIGUsZj1hLmxlbmd0aCxnPTAsaD0wLGk9MDtmPmg7KXtpZihnPWEuaW5kZXhPZigie3siLGgpLGk9MD5nPy0xOmEuaW5kZXhPZigifX0iLGcrMiksMD5pKXtpZighZSlyZXR1cm47ZS5wdXNoKGEuc2xpY2UoaCkpO2JyZWFrfWU9ZXx8W10sZS5wdXNoKGEuc2xpY2UoaCxnKSk7dmFyIGo9YS5zbGljZShnKzIsaSkudHJpbSgpO2UucHVzaChQYXRoLmdldChqKSk7dmFyIGs9ZCYmZChqLGIsYyk7ZS5wdXNoKGspLGg9aSsyfXJldHVybiBoPT09ZiYmZS5wdXNoKCIiKSxlLmhhc09uZVBhdGg9ND09PWUubGVuZ3RoLGUuaXNTaW1wbGVQYXRoPWUuaGFzT25lUGF0aCYmIiI9PWVbMF0mJiIiPT1lWzNdLGUuY29tYmluYXRvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9ZVswXSxjPTE7YzxlLmxlbmd0aDtjKz0zKXt2YXIgZD1lLmhhc09uZVBhdGg/YTphWyhjLTEpLzNdO3ZvaWQgMCE9PWQmJihiKz1kKSxiKz1lW2MrMl19cmV0dXJuIGJ9LGV9fWZ1bmN0aW9uIHAoYSxiLGMsZCl7Zm9yKHZhciBlPTA7ZTxhLmxlbmd0aDtlKz0yKXt2YXIgZj1hW2VdLGc9YVtlKzFdLGg9YyxpPWdbMV07aWYoZy5oYXNPbmVQYXRoKXt2YXIgaj1nWzJdLGs9aiYmaihjLGYsYik7dm9pZCAwIT09ayYmKGg9ayxpPU0pLGcuaXNTaW1wbGVQYXRofHwoaD1uZXcgUGF0aE9ic2VydmVyKGgsaSx2b2lkIDAsdm9pZCAwLHZvaWQgMCxnLmNvbWJpbmF0b3IpLGk9TSl9ZWxzZXtmb3IodmFyIGw9bmV3IENvbXBvdW5kUGF0aE9ic2VydmVyKHZvaWQgMCx2b2lkIDAsdm9pZCAwLGcuY29tYmluYXRvciksbT0xO208Zy5sZW5ndGg7bSs9Myl7dmFyIG49YyxvPWdbbV0saj1nW20rMV0saz1qJiZqKG4sZixiKTt2b2lkIDAhPT1rJiYobj1rLG89TSksbC5hZGRQYXRoKG4sbyl9bC5zdGFydCgpLGg9bCxpPU19dmFyIHA9Yi5iaW5kKGYsaCxpKTtkJiZkLnB1c2gocCl9fWZ1bmN0aW9uIHEoYSxjKXtiKGEpO2Zvcih2YXIgZCxmPWUoYSksZz0hMSxoPSExLGk9MDtpPGEuYXR0cmlidXRlcy5sZW5ndGg7aSsrKXt2YXIgaj1hLmF0dHJpYnV0ZXNbaV0saz1qLm5hbWUsbD1qLnZhbHVlO2YmJihrPT09RD8oZz0hMCxsPWx8fCJ7e319Iik6KGs9PT1CfHxrPT09QykmJihoPSEwLGw9bHx8Int7fX0iKSk7dmFyIG09byhsLGssYSxjKTttJiYoZD1kfHxbXSxkLnB1c2goayxtKSl9cmV0dXJuIGcmJiFoJiYoZD1kfHxbXSxkLnB1c2goQixvKCJ7e319IixCLGEsYykpKSxkfWZ1bmN0aW9uIHIoYSxiKXtpZihhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpcmV0dXJuIHEoYSxiKTtpZihhLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUpe3ZhciBjPW8oYS5kYXRhLCJ0ZXh0Q29udGVudCIsYSxiKTtpZihjKXJldHVyblsidGV4dENvbnRlbnQiLGNdfX1mdW5jdGlvbiBzKGEsYixjLGQsZSl7aWYoYiYmKGIudGVtcGxhdGVSZWYmJihIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlKGEsYi50ZW1wbGF0ZVJlZiksZCYmKGEuYmluZGluZ0RlbGVnYXRlXz1kKSksYi5sZW5ndGgmJnAoYixhLGMsZSksYi5jaGlsZHJlbikpZm9yKHZhciBmPTAsZz1hLmZpcnN0Q2hpbGQ7ZztnPWcubmV4dFNpYmxpbmcpcyhnLGIuY2hpbGRyZW5bZisrXSxjLGQsZSl9ZnVuY3Rpb24gdChhLGMsZCl7YihhKTt2YXIgZT1kJiYiZnVuY3Rpb24iPT10eXBlb2YgZC5wcmVwYXJlQmluZGluZz9kLnByZXBhcmVCaW5kaW5nOnZvaWQgMCxmPXIoYSxlKTtmJiZwKGYsYSxjKTtmb3IodmFyIGc9YS5maXJzdENoaWxkO2c7Zz1nLm5leHRTaWJsaW5nKXQoZyxjLGQpfWZ1bmN0aW9uIHUoYSxiKXt2YXIgYz1hLmNsb25lTm9kZSghMSk7aWYoYS5pc1RlbXBsYXRlXylyZXR1cm4gYztmb3IodmFyIGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWMuYXBwZW5kQ2hpbGQodShkLGIpKTtyZXR1cm4gY31mdW5jdGlvbiB2KGEsYil7dmFyIGM9cihhLGIpO2UoYSkmJihhLmlzVGVtcGxhdGVfPSEwLGM9Y3x8W10sYy50ZW1wbGF0ZVJlZj1hLGMuaGFzU3ViVGVtcGxhdGU9ITApO2Zvcih2YXIgZD1hLmZpcnN0Q2hpbGQsZj0wO2Q7ZD1kLm5leHRTaWJsaW5nLGYrKyl7dmFyIGc9dihkLGIpO2cmJihjPWN8fFtdLGMuY2hpbGRyZW49Yy5jaGlsZHJlbnx8e30sYy5jaGlsZHJlbltmXT1nLGcuaGFzU3ViVGVtcGxhdGUmJihjLmhhc1N1YlRlbXBsYXRlPSEwKSl9cmV0dXJuIGN9ZnVuY3Rpb24gdyhhLGIsYyl7dGhpcy5maXJzdE5vZGU9YSx0aGlzLmxhc3ROb2RlPWIsdGhpcy5tb2RlbD1jfWZ1bmN0aW9uIHgoYSxiKXtpZihhLmZpcnN0Q2hpbGQpZm9yKHZhciBjPW5ldyB3KGEuZmlyc3RDaGlsZCxhLmxhc3RDaGlsZCxiKSxkPWMuZmlyc3ROb2RlO2Q7KWQudGVtcGxhdGVJbnN0YW5jZV89YyxkPWQubmV4dFNpYmxpbmd9ZnVuY3Rpb24geShhKXt0aGlzLmNsb3NlZD0hMSx0aGlzLnRlbXBsYXRlRWxlbWVudF89YSx0aGlzLnRlcm1pbmF0b3JzPVtdLHRoaXMuaXRlcmF0ZWRWYWx1ZT12b2lkIDAsdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCx0aGlzLmRlcHNDaGFuZ2VkPSExLHRoaXMuaGFzUmVwZWF0PSExLHRoaXMucmVwZWF0TW9kZWw9dm9pZCAwLHRoaXMucmVwZWF0UGF0aD12b2lkIDAsdGhpcy5oYXNCaW5kPSExLHRoaXMuYmluZE1vZGVsPXZvaWQgMCx0aGlzLmJpbmRQYXRoPXZvaWQgMCx0aGlzLmhhc0lmPSExLHRoaXMuaWZNb2RlbD12b2lkIDAsdGhpcy5pZlBhdGg9dm9pZCAwfXZhciB6LEE9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP3o9YS5NYXA6KHo9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LHoucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSksImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBCPSJiaW5kIixDPSJyZXBlYXQiLEQ9ImlmIixFPXt0ZW1wbGF0ZTohMCxyZXBlYXQ6ITAsYmluZDohMCxyZWY6ITB9LEY9e1RIRUFEOiEwLFRCT0RZOiEwLFRGT09UOiEwLFRIOiEwLFRSOiEwLFREOiEwLENPTEdST1VQOiEwLENPTDohMCxDQVBUSU9OOiEwLE9QVElPTjohMCxPUFRHUk9VUDohMH0sRz0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQsSD0idGVtcGxhdGUsICIrT2JqZWN0LmtleXMoRikubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvTG93ZXJDYXNlKCkrIlt0ZW1wbGF0ZV0ifSkuam9pbigiLCAiKSxJPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt0aGlzLm5leHRSdW5uZXI9YSx0aGlzLnZhbHVlPSExLHRoaXMubGFzdFZhbHVlPXRoaXMudmFsdWUsdGhpcy5zY2hlZHVsZWQ9W10sdGhpcy5zY2hlZHVsZWRJZHM9W10sdGhpcy5ydW5uaW5nPSExLHRoaXMub2JzZXJ2ZXI9bmV3IFBhdGhPYnNlcnZlcih0aGlzLCJ2YWx1ZSIsdGhpcy5ydW4sdGhpcyl9ZnVuY3Rpb24gYihhKXt2YXIgYj1hW2VdO2FbZV18fChiPWQrKyxhW2VdPWIpLGMuc2NoZWR1bGUoYSxiKX1hLnByb3RvdHlwZT17c2NoZWR1bGU6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5zY2hlZHVsZWRJZHNbYl0pe2lmKHRoaXMucnVubmluZylyZXR1cm4gdGhpcy5uZXh0UnVubmVyLnNjaGVkdWxlKGEsYik7dGhpcy5zY2hlZHVsZWRJZHNbYl09ITAsdGhpcy5zY2hlZHVsZWQucHVzaChhKSx0aGlzLmxhc3RWYWx1ZT09PXRoaXMudmFsdWUmJih0aGlzLnZhbHVlPSF0aGlzLnZhbHVlKX19LHJ1bjpmdW5jdGlvbigpe3RoaXMucnVubmluZz0hMDtmb3IodmFyIGE9MDthPHRoaXMuc2NoZWR1bGVkLmxlbmd0aDthKyspe3ZhciBiPXRoaXMuc2NoZWR1bGVkW2FdLGM9YltlXTt0aGlzLnNjaGVkdWxlZElkc1tjXT0hMSwiZnVuY3Rpb24iPT10eXBlb2YgYj9iKCk6Yi5yZXNvbHZlKCl9dGhpcy5zY2hlZHVsZWQ9W10sdGhpcy5zY2hlZHVsZWRJZHM9W10sdGhpcy5sYXN0VmFsdWU9dGhpcy52YWx1ZSx0aGlzLnJ1bm5pbmc9ITF9fTt2YXIgYz1uZXcgYShuZXcgYSksZD0xLGU9Il9fc2NoZWR1bGVkSWRfXyI7cmV0dXJuIGJ9KCk7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtoKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksR3x8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIEo9Il9fcHJvdG9fXyJpbnt9O0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGU9ZnVuY3Rpb24oYSxjKXtpZihhLnRlbXBsYXRlSXNEZWNvcmF0ZWRfKXJldHVybiExO3ZhciBlPWE7ZS50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMDt2YXIgZz1mKGUpLGk9ZyxuPSFnLG89ITE7aWYoIWcmJmQoZSkmJihiKCFjKSxlPWsoYSksZS50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxnPWYoZSksbz0hMCksIWcpe20oZSk7dmFyIHA9aihlLm93bmVyRG9jdW1lbnQpO2UuY29udGVudF89cC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9cmV0dXJuIGM/ZS5pbnN0YW5jZVJlZl89YzpuP2woZSxhLG8pOmkmJmgoZS5jb250ZW50KSwhMH0sSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXA9aDt2YXIgSz1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsTD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudF99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtHfHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShLLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixMKSksaShIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSx7YmluZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuaXRlcmF0b3JffHwodGhpcy5pdGVyYXRvcl89bmV3IHkodGhpcykpLHRoaXMuYmluZGluZ3M9dGhpcy5iaW5kaW5nc3x8e30sImJpbmQiPT09YT8odGhpcy5pdGVyYXRvcl8uaGFzQmluZD0hMCx0aGlzLml0ZXJhdG9yXy5iaW5kTW9kZWw9Yix0aGlzLml0ZXJhdG9yXy5iaW5kUGF0aD1jLHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZ3x8KHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZz0hMCxJKHRoaXMuaXRlcmF0b3JfKSksdGhpcy5iaW5kaW5ncy5iaW5kPXRoaXMuaXRlcmF0b3JfKToicmVwZWF0Ij09PWE/KHRoaXMuaXRlcmF0b3JfLmhhc1JlcGVhdD0hMCx0aGlzLml0ZXJhdG9yXy5yZXBlYXRNb2RlbD1iLHRoaXMuaXRlcmF0b3JfLnJlcGVhdFBhdGg9Yyx0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmd8fCh0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmc9ITAsSSh0aGlzLml0ZXJhdG9yXykpLHRoaXMuYmluZGluZ3MucmVwZWF0PXRoaXMuaXRlcmF0b3JfKToiaWYiPT09YT8odGhpcy5pdGVyYXRvcl8uaGFzSWY9ITAsdGhpcy5pdGVyYXRvcl8uaWZNb2RlbD1iLHRoaXMuaXRlcmF0b3JfLmlmUGF0aD1jLHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZ3x8KHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZz0hMCxJKHRoaXMuaXRlcmF0b3JfKSksdGhpcy5iaW5kaW5ncy5pZj10aGlzLml0ZXJhdG9yXyk6SFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEpe2lmKCJiaW5kIj09PWEpe2lmKCF0aGlzLml0ZXJhdG9yXylyZXR1cm47cmV0dXJuIHRoaXMuaXRlcmF0b3JfLmhhc0JpbmQ9ITEsdGhpcy5pdGVyYXRvcl8uYmluZE1vZGVsPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5iaW5kUGF0aD12b2lkIDAsdGhpcy5pdGVyYXRvcl8uZGVwc0NoYW5naW5nfHwodGhpcy5pdGVyYXRvcl8uZGVwc0NoYW5naW5nPSEwLEkodGhpcy5pdGVyYXRvcl8pKSx0aGlzLmJpbmRpbmdzLmJpbmQ9dm9pZCAwfWlmKCJyZXBlYXQiPT09YSl7aWYoIXRoaXMuaXRlcmF0b3JfKXJldHVybjtyZXR1cm4gdGhpcy5pdGVyYXRvcl8uaGFzUmVwZWF0PSExLHRoaXMuaXRlcmF0b3JfLnJlcGVhdE1vZGVsPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5yZXBlYXRQYXRoPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmd8fCh0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmc9ITAsSSh0aGlzLml0ZXJhdG9yXykpLHRoaXMuYmluZGluZ3MucmVwZWF0PXZvaWQgMH1pZigiaWYiPT09YSl7aWYoIXRoaXMuaXRlcmF0b3JfKXJldHVybjtyZXR1cm4gdGhpcy5pdGVyYXRvcl8uaGFzSWY9ITEsdGhpcy5pdGVyYXRvcl8uaWZNb2RlbD12b2lkIDAsdGhpcy5pdGVyYXRvcl8uaWZQYXRoPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmd8fCh0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmc9ITAsSSh0aGlzLml0ZXJhdG9yXykpLHRoaXMuYmluZGluZ3MuaWY9dm9pZCAwfXJldHVybiBIVE1MRWxlbWVudC5wcm90b3R5cGUudW5iaW5kLmNhbGwodGhpcyxhKX0sY3JlYXRlSW5zdGFuY2U6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVmLmNvbnRlbnQsZT1kLmJpbmRpbmdNYXBfO2lmKCFlKXt2YXIgZj1iJiYiZnVuY3Rpb24iPT10eXBlb2YgYi5wcmVwYXJlQmluZGluZz9iLnByZXBhcmVCaW5kaW5nOnZvaWQgMDtlPXYoZCxmKXx8W10sZC5iaW5kaW5nTWFwXz1lfXZhciBnPWUuaGFzU3ViVGVtcGxhdGU/dShkKTpkLmNsb25lTm9kZSghMCk7cmV0dXJuIHMoZyxlLGEsYixjKSx4KGcsYSksZ30sZ2V0IG1vZGVsKCl7cmV0dXJuIHRoaXMubW9kZWxffSxzZXQgbW9kZWwoYSl7dGhpcy5tb2RlbF89YSxuKHRoaXMpfSxnZXQgYmluZGluZ0RlbGVnYXRlKCl7cmV0dXJuIHRoaXMuYmluZGluZ0RlbGVnYXRlX30sc2V0IGJpbmRpbmdEZWxlZ2F0ZShhKXt0aGlzLmJpbmRpbmdEZWxlZ2F0ZV89YSxuKHRoaXMpfSxnZXQgcmVmKCl7dmFyIGEsYj10aGlzLmdldEF0dHJpYnV0ZSgicmVmIik7aWYoYil7dmFyIGQ9Yyh0aGlzKTtkJiYoYT1kLmdldEVsZW1lbnRCeUlkKGIpKX1pZihhfHwoYT10aGlzLmluc3RhbmNlUmVmXyksIWEpcmV0dXJuIHRoaXM7dmFyIGU9YS5yZWY7cmV0dXJuIGU/ZTphfX0pO3ZhciBNPVBhdGguZ2V0KCJ2YWx1ZSIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShOb2RlLnByb3RvdHlwZSwidGVtcGxhdGVJbnN0YW5jZSIse2dldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMudGVtcGxhdGVJbnN0YW5jZV87cmV0dXJuIGE/YTp0aGlzLnBhcmVudE5vZGU/dGhpcy5wYXJlbnROb2RlLnRlbXBsYXRlSW5zdGFuY2U6dm9pZCAwfX0pLHkucHJvdG90eXBlPXtyZXNvbHZlOmZ1bmN0aW9uKCl7aWYodGhpcy5kZXBzQ2hhbmdpbmc9ITEsdGhpcy52YWx1ZU9ic2VydmVyJiYodGhpcy52YWx1ZU9ic2VydmVyLmNsb3NlKCksdGhpcy52YWx1ZU9ic2VydmVyPXZvaWQgMCksIXRoaXMuaGFzUmVwZWF0JiYhdGhpcy5oYXNCaW5kKXJldHVybiB0aGlzLnZhbHVlQ2hhbmdlZCgpLHZvaWQgMDt2YXIgYT10aGlzLmhhc1JlcGVhdD09PSEwLGI9YT90aGlzLnJlcGVhdE1vZGVsOnRoaXMuYmluZE1vZGVsLGM9YT90aGlzLnJlcGVhdFBhdGg6dGhpcy5iaW5kUGF0aDtpZih0aGlzLmhhc0lmKXt2YXIgZD1mdW5jdGlvbihiKXt2YXIgYz1iWzBdLGQ9YlsxXTtyZXR1cm4gZD9hP2M6W2NdOnZvaWQgMH07dGhpcy52YWx1ZU9ic2VydmVyPW5ldyBDb21wb3VuZFBhdGhPYnNlcnZlcih0aGlzLnZhbHVlQ2hhbmdlZCx0aGlzLHZvaWQgMCxkKSx0aGlzLnZhbHVlT2JzZXJ2ZXIuYWRkUGF0aChiLGMpLHRoaXMudmFsdWVPYnNlcnZlci5hZGRQYXRoKHRoaXMuaWZNb2RlbCx0aGlzLmlmUGF0aCksdGhpcy52YWx1ZU9ic2VydmVyLnN0YXJ0KCl9ZWxzZXt2YXIgZD10aGlzLmhhc1JlcGVhdD92b2lkIDA6ZnVuY3Rpb24oYSl7cmV0dXJuW2FdfTt0aGlzLnZhbHVlT2JzZXJ2ZXI9bmV3IFBhdGhPYnNlcnZlcihiLGMsdGhpcy52YWx1ZUNoYW5nZWQsdGhpcyx2b2lkIDAsZCl9dGhpcy52YWx1ZUNoYW5nZWQodGhpcy52YWx1ZU9ic2VydmVyLnZhbHVlKX0sdmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe0FycmF5LmlzQXJyYXkoYSl8fChhPXZvaWQgMCk7dmFyIGI9dGhpcy5pdGVyYXRlZFZhbHVlO3RoaXMudW5vYnNlcnZlKCksdGhpcy5pdGVyYXRlZFZhbHVlPWEsdGhpcy5pdGVyYXRlZFZhbHVlJiYodGhpcy5hcnJheU9ic2VydmVyPW5ldyBBcnJheU9ic2VydmVyKHRoaXMuaXRlcmF0ZWRWYWx1ZSx0aGlzLmhhbmRsZVNwbGljZXMsdGhpcykpO3ZhciBjPUFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcyh0aGlzLml0ZXJhdGVkVmFsdWV8fFtdLGJ8fFtdKTtjLmxlbmd0aCYmdGhpcy5oYW5kbGVTcGxpY2VzKGMpfSxnZXRUZXJtaW5hdG9yQXQ6ZnVuY3Rpb24oYSl7aWYoLTE9PWEpcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Xzt2YXIgYj10aGlzLnRlcm1pbmF0b3JzWzIqYV07aWYoYi5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFfHx0aGlzLnRlbXBsYXRlRWxlbWVudF89PT1iKXJldHVybiBiO3ZhciBjPWIuaXRlcmF0b3JfO3JldHVybiBjP2MuZ2V0VGVybWluYXRvckF0KGMudGVybWluYXRvcnMubGVuZ3RoLzItMSk6Yn0saW5zZXJ0SW5zdGFuY2VBdDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmdldFRlcm1pbmF0b3JBdChhLTEpLGY9ZTtiP2Y9Yi5sYXN0Q2hpbGR8fGY6YyYmKGY9Y1tjLmxlbmd0aC0xXXx8ZiksdGhpcy50ZXJtaW5hdG9ycy5zcGxpY2UoMiphLDAsZixkKTt2YXIgZz10aGlzLnRlbXBsYXRlRWxlbWVudF8ucGFyZW50Tm9kZSxoPWUubmV4dFNpYmxpbmc7aWYoYilnLmluc2VydEJlZm9yZShiLGgpO2Vsc2UgaWYoYylmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKylnLmluc2VydEJlZm9yZShjW2ldLGgpfSxleHRyYWN0SW5zdGFuY2VBdDpmdW5jdGlvbihhKXt2YXIgYj1bXSxjPXRoaXMuZ2V0VGVybWluYXRvckF0KGEtMSksZD10aGlzLmdldFRlcm1pbmF0b3JBdChhKTtiLmJvdW5kPXRoaXMudGVybWluYXRvcnNbMiphKzFdLHRoaXMudGVybWluYXRvcnMuc3BsaWNlKDIqYSwyKTtmb3IodmFyIGU9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGU7ZCE9PWM7KXt2YXIgZj1jLm5leHRTaWJsaW5nO2Y9PWQmJihkPWMpLGUucmVtb3ZlQ2hpbGQoZiksYi5wdXNoKGYpfXJldHVybiBifSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCl7dmFyIGI9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfO2lmKCFiLnBhcmVudE5vZGV8fCFiLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpcmV0dXJuIHRoaXMuY2xvc2UoKSx2b2lkIDA7aWYodm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fKXt2YXIgYz1iLmJpbmRpbmdEZWxlZ2F0ZTtjJiYiZnVuY3Rpb24iPT10eXBlb2YgYy5wcmVwYXJlSW5zdGFuY2VNb2RlbCYmKHRoaXMuaW5zdGFuY2VNb2RlbEZuXz1jLnByZXBhcmVJbnN0YW5jZU1vZGVsKGIpKSwiZnVuY3Rpb24iIT10eXBlb2YgdGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPSExKX12YXIgZD1uZXcgeixlPTA7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVtb3ZlZC5mb3JFYWNoKGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoYS5pbmRleCtlKTtkLnNldChiLGMpfSx0aGlzKSxlLT1hLmFkZGVkQ291bnR9LHRoaXMpLGEuZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5pbmRleDtiPGEuaW5kZXgrYS5hZGRlZENvdW50O2IrKyl7dmFyIGUsZj10aGlzLml0ZXJhdGVkVmFsdWVbYl0sZz12b2lkIDAsaD1kLmdldChmKTtoPyhkLmRlbGV0ZShmKSxlPWguYm91bmQpOihlPVtdLHRoaXMuaW5zdGFuY2VNb2RlbEZuXyYmKGY9dGhpcy5pbnN0YW5jZU1vZGVsRm5fKGYpKSx2b2lkIDAhPT1mJiYoZz10aGlzLnRlbXBsYXRlRWxlbWVudF8uY3JlYXRlSW5zdGFuY2UoZixjLGUpKSksdGhpcy5pbnNlcnRJbnN0YW5jZUF0KGIsZyxoLGUpfX0sdGhpcyksZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKGEuYm91bmQpfSx0aGlzKX19LGNsb3NlSW5zdGFuY2VCaW5kaW5nczpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLmNsb3NlKCl9LHVub2JzZXJ2ZTpmdW5jdGlvbigpe3RoaXMuYXJyYXlPYnNlcnZlciYmKHRoaXMuYXJyYXlPYnNlcnZlci5jbG9zZSgpLHRoaXMuYXJyYXlPYnNlcnZlcj12b2lkIDApfSxjbG9zZTpmdW5jdGlvbigpe2lmKCF0aGlzLmNsb3NlZCl7dGhpcy51bm9ic2VydmUoKTtmb3IodmFyIGE9MTthPHRoaXMudGVybWluYXRvcnMubGVuZ3RoO2ErPTIpdGhpcy5jbG9zZUluc3RhbmNlQmluZGluZ3ModGhpcy50ZXJtaW5hdG9yc1thXSk7dGhpcy50ZXJtaW5hdG9ycy5sZW5ndGg9MCx0aGlzLnZhbHVlT2JzZXJ2ZXImJnRoaXMudmFsdWVPYnNlcnZlci5jbG9zZSgpLHRoaXMudmFsdWVPYnNlcnZlcj12b2lkIDAsdGhpcy50ZW1wbGF0ZUVsZW1lbnRfLml0ZXJhdG9yXz12b2lkIDAsdGhpcy5jbG9zZWQ9ITB9fX0sSFRNTFRlbXBsYXRlRWxlbWVudC5mb3JBbGxUZW1wbGF0ZXNGcm9tXz1nfSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQVNTRVJUOiAiK2IpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGE+PTQ4JiY1Nz49YX1mdW5jdGlvbiBkKGEpe3JldHVybiAzMj09PWF8fDk9PT1hfHwxMT09PWF8fDEyPT09YXx8MTYwPT09YXx8YT49NTc2MCYmIuGagOGgjuKAgOKAgeKAguKAg+KAhOKAheKAhuKAh+KAiOKAieKAiuKAr+KBn+OAgO+7vyIuaW5kZXhPZihTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKT4wfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIDEwPT09YXx8MTM9PT1hfHw4MjMyPT09YXx8ODIzMz09PWF9ZnVuY3Rpb24gZihhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YX1mdW5jdGlvbiBnKGEpe3JldHVybiAzNj09PWF8fDk1PT09YXx8YT49NjUmJjkwPj1hfHxhPj05NyYmMTIyPj1hfHxhPj00OCYmNTc+PWF9ZnVuY3Rpb24gaChhKXtyZXR1cm4idGhpcyI9PT1hfWZ1bmN0aW9uIGkoKXtmb3IoOyQ+WiYmZChZLmNoYXJDb2RlQXQoWikpOykrK1p9ZnVuY3Rpb24gaigpe3ZhciBhLGI7Zm9yKGE9WisrOyQ+WiYmKGI9WS5jaGFyQ29kZUF0KFopLGcoYikpOykrK1o7cmV0dXJuIFkuc2xpY2UoYSxaKX1mdW5jdGlvbiBrKCl7dmFyIGEsYixjO3JldHVybiBhPVosYj1qKCksYz0xPT09Yi5sZW5ndGg/VS5JZGVudGlmaWVyOmgoYik/VS5LZXl3b3JkOiJudWxsIj09PWI/VS5OdWxsTGl0ZXJhbDoidHJ1ZSI9PT1ifHwiZmFsc2UiPT09Yj9VLkJvb2xlYW5MaXRlcmFsOlUuSWRlbnRpZmllcix7dHlwZTpjLHZhbHVlOmIscmFuZ2U6W2EsWl19fWZ1bmN0aW9uIGwoKXt2YXIgYSxiLGM9WixkPVkuY2hhckNvZGVBdChaKSxlPVlbWl07c3dpdGNoKGQpe2Nhc2UgNDY6Y2FzZSA0MDpjYXNlIDQxOmNhc2UgNTk6Y2FzZSA0NDpjYXNlIDEyMzpjYXNlIDEyNTpjYXNlIDkxOmNhc2UgOTM6Y2FzZSA1ODpjYXNlIDYzOmNhc2UgMTI2OnJldHVybisrWix7dHlwZTpVLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShkKSxyYW5nZTpbYyxaXX07ZGVmYXVsdDppZihhPVkuY2hhckNvZGVBdChaKzEpLDYxPT09YSlzd2l0Y2goZCl7Y2FzZSAzNzpjYXNlIDM4OmNhc2UgNDI6Y2FzZSA0MzpjYXNlIDQ1OmNhc2UgNDc6Y2FzZSA2MDpjYXNlIDYyOmNhc2UgMTI0OnJldHVybiBaKz0yLHt0eXBlOlUuUHVuY3R1YXRvcix2YWx1ZTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQpK1N0cmluZy5mcm9tQ2hhckNvZGUoYSkscmFuZ2U6W2MsWl19O2Nhc2UgMzM6Y2FzZSA2MTpyZXR1cm4gWis9Miw2MT09PVkuY2hhckNvZGVBdChaKSYmKytaLHt0eXBlOlUuUHVuY3R1YXRvcix2YWx1ZTpZLnNsaWNlKGMsWikscmFuZ2U6W2MsWl19fX1yZXR1cm4gYj1ZW1orMV0sZT09PWImJiImfCIuaW5kZXhPZihlKT49MD8oWis9Mix7dHlwZTpVLlB1bmN0dWF0b3IsdmFsdWU6ZStiLHJhbmdlOltjLFpdfSk6Ijw+PSErLSolJnxeLyIuaW5kZXhPZihlKT49MD8oKytaLHt0eXBlOlUuUHVuY3R1YXRvcix2YWx1ZTplLHJhbmdlOltjLFpdfSk6KHMoe30sWC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx2b2lkIDApfWZ1bmN0aW9uIG0oKXt2YXIgYSxkLGU7aWYoZT1ZW1pdLGIoYyhlLmNoYXJDb2RlQXQoMCkpfHwiLiI9PT1lLCJOdW1lcmljIGxpdGVyYWwgbXVzdCBzdGFydCB3aXRoIGEgZGVjaW1hbCBkaWdpdCBvciBhIGRlY2ltYWwgcG9pbnQiKSxkPVosYT0iIiwiLiIhPT1lKXtmb3IoYT1ZW1orK10sZT1ZW1pdLCIwIj09PWEmJmUmJmMoZS5jaGFyQ29kZUF0KDApKSYmcyh7fSxYLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpO2MoWS5jaGFyQ29kZUF0KFopKTspYSs9WVtaKytdO2U9WVtaXX1pZigiLiI9PT1lKXtmb3IoYSs9WVtaKytdO2MoWS5jaGFyQ29kZUF0KFopKTspYSs9WVtaKytdO2U9WVtaXX1pZigiZSI9PT1lfHwiRSI9PT1lKWlmKGErPVlbWisrXSxlPVlbWl0sKCIrIj09PWV8fCItIj09PWUpJiYoYSs9WVtaKytdKSxjKFkuY2hhckNvZGVBdChaKSkpZm9yKDtjKFkuY2hhckNvZGVBdChaKSk7KWErPVlbWisrXTtlbHNlIHMoe30sWC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKTtyZXR1cm4gZihZLmNoYXJDb2RlQXQoWikpJiZzKHt9LFguVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIikse3R5cGU6VS5OdW1lcmljTGl0ZXJhbCx2YWx1ZTpwYXJzZUZsb2F0KGEpLHJhbmdlOltkLFpdfX1mdW5jdGlvbiBuKCl7dmFyIGEsYyxkLGY9IiIsZz0hMTtmb3IoYT1ZW1pdLGIoIiciPT09YXx8JyInPT09YSwiU3RyaW5nIGxpdGVyYWwgbXVzdCBzdGFydHMgd2l0aCBhIHF1b3RlIiksYz1aLCsrWjskPlo7KXtpZihkPVlbWisrXSxkPT09YSl7YT0iIjticmVha31pZigiXFwiPT09ZClpZihkPVlbWisrXSxkJiZlKGQuY2hhckNvZGVBdCgwKSkpIlxyIj09PWQmJiJcbiI9PT1ZW1pdJiYrK1o7ZWxzZSBzd2l0Y2goZCl7Y2FzZSJuIjpmKz0iXG4iO2JyZWFrO2Nhc2UiciI6Zis9IlxyIjticmVhaztjYXNlInQiOmYrPSIJIjticmVhaztjYXNlImIiOmYrPSJcYiI7YnJlYWs7Y2FzZSJmIjpmKz0iXGYiO2JyZWFrO2Nhc2UidiI6Zis9IgsiO2JyZWFrO2RlZmF1bHQ6Zis9ZH1lbHNle2lmKGUoZC5jaGFyQ29kZUF0KDApKSlicmVhaztmKz1kfX1yZXR1cm4iIiE9PWEmJnMoe30sWC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx7dHlwZTpVLlN0cmluZ0xpdGVyYWwsdmFsdWU6ZixvY3RhbDpnLHJhbmdlOltjLFpdfX1mdW5jdGlvbiBvKGEpe3JldHVybiBhLnR5cGU9PT1VLklkZW50aWZpZXJ8fGEudHlwZT09PVUuS2V5d29yZHx8YS50eXBlPT09VS5Cb29sZWFuTGl0ZXJhbHx8YS50eXBlPT09VS5OdWxsTGl0ZXJhbH1mdW5jdGlvbiBwKCl7dmFyIGE7cmV0dXJuIGkoKSxaPj0kP3t0eXBlOlUuRU9GLHJhbmdlOltaLFpdfTooYT1ZLmNoYXJDb2RlQXQoWiksNDA9PT1hfHw0MT09PWF8fDU4PT09YT9sKCk6Mzk9PT1hfHwzND09PWE/bigpOmYoYSk/aygpOjQ2PT09YT9jKFkuY2hhckNvZGVBdChaKzEpKT9tKCk6bCgpOmMoYSk/bSgpOmwoKSl9ZnVuY3Rpb24gcSgpe3ZhciBhO3JldHVybiBhPWFiLFo9YS5yYW5nZVsxXSxhYj1wKCksWj1hLnJhbmdlWzFdLGF9ZnVuY3Rpb24gcigpe3ZhciBhO2E9WixhYj1wKCksWj1hfWZ1bmN0aW9uIHMoYSxjKXt2YXIgZCxlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSxmPWMucmVwbGFjZSgvJShcZCkvZyxmdW5jdGlvbihhLGMpe3JldHVybiBiKGM8ZS5sZW5ndGgsIk1lc3NhZ2UgcmVmZXJlbmNlIG11c3QgYmUgaW4gcmFuZ2UiKSxlW2NdfSk7dGhyb3cgZD1uZXcgRXJyb3IoZiksZC5pbmRleD1aLGQuZGVzY3JpcHRpb249ZixkfWZ1bmN0aW9uIHQoYSl7cyhhLFguVW5leHBlY3RlZFRva2VuLGEudmFsdWUpfWZ1bmN0aW9uIHUoYSl7dmFyIGI9cSgpOyhiLnR5cGUhPT1VLlB1bmN0dWF0b3J8fGIudmFsdWUhPT1hKSYmdChiKX1mdW5jdGlvbiB2KGEpe3JldHVybiBhYi50eXBlPT09VS5QdW5jdHVhdG9yJiZhYi52YWx1ZT09PWF9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gYWIudHlwZT09PVUuS2V5d29yZCYmYWIudmFsdWU9PT1hfWZ1bmN0aW9uIHgoKXtyZXR1cm4gNTk9PT1ZLmNoYXJDb2RlQXQoWik/KHEoKSx2b2lkIDApOihpKCksdigiOyIpPyhxKCksdm9pZCAwKTooYWIudHlwZT09PVUuRU9GfHx2KCJ9Iil8fHQoYWIpLHZvaWQgMCkpfWZ1bmN0aW9uIHkoKXt2YXIgYT1bXTtmb3IodSgiWyIpOyF2KCJdIik7KXYoIiwiKT8ocSgpLGEucHVzaChudWxsKSk6KGEucHVzaChkYigpKSx2KCJdIil8fHUoIiwiKSk7cmV0dXJuIHUoIl0iKSxfLmNyZWF0ZUFycmF5RXhwcmVzc2lvbihhKX1mdW5jdGlvbiB6KCl7dmFyIGE7cmV0dXJuIGkoKSxhPXEoKSxhLnR5cGU9PT1VLlN0cmluZ0xpdGVyYWx8fGEudHlwZT09PVUuTnVtZXJpY0xpdGVyYWw/Xy5jcmVhdGVMaXRlcmFsKGEpOl8uY3JlYXRlSWRlbnRpZmllcihhLnZhbHVlKX1mdW5jdGlvbiBBKCl7dmFyIGEsYjtyZXR1cm4gYT1hYixpKCksKGEudHlwZT09PVUuRU9GfHxhLnR5cGU9PT1VLlB1bmN0dWF0b3IpJiZ0KGEpLGI9eigpLHUoIjoiKSxfLmNyZWF0ZVByb3BlcnR5KCJpbml0IixiLGRiKCkpfWZ1bmN0aW9uIEIoKXt2YXIgYT1bXTtmb3IodSgieyIpOyF2KCJ9Iik7KWEucHVzaChBKCkpLHYoIn0iKXx8dSgiLCIpO3JldHVybiB1KCJ9IiksXy5jcmVhdGVPYmplY3RFeHByZXNzaW9uKGEpfWZ1bmN0aW9uIEMoKXt2YXIgYTtyZXR1cm4gdSgiKCIpLGE9ZGIoKSx1KCIpIiksYX1mdW5jdGlvbiBEKCl7dmFyIGEsYixjO3JldHVybiB2KCIoIik/QygpOihhPWFiLnR5cGUsYT09PVUuSWRlbnRpZmllcj9jPV8uY3JlYXRlSWRlbnRpZmllcihxKCkudmFsdWUpOmE9PT1VLlN0cmluZ0xpdGVyYWx8fGE9PT1VLk51bWVyaWNMaXRlcmFsP2M9Xy5jcmVhdGVMaXRlcmFsKHEoKSk6YT09PVUuS2V5d29yZD93KCJ0aGlzIikmJihxKCksYz1fLmNyZWF0ZVRoaXNFeHByZXNzaW9uKCkpOmE9PT1VLkJvb2xlYW5MaXRlcmFsPyhiPXEoKSxiLnZhbHVlPSJ0cnVlIj09PWIudmFsdWUsYz1fLmNyZWF0ZUxpdGVyYWwoYikpOmE9PT1VLk51bGxMaXRlcmFsPyhiPXEoKSxiLnZhbHVlPW51bGwsYz1fLmNyZWF0ZUxpdGVyYWwoYikpOnYoIlsiKT9jPXkoKTp2KCJ7IikmJihjPUIoKSksYz9jOih0KHEoKSksdm9pZCAwKSl9ZnVuY3Rpb24gRSgpe3ZhciBhPVtdO2lmKHUoIigiKSwhdigiKSIpKWZvcig7JD5aJiYoYS5wdXNoKGRiKCkpLCF2KCIpIikpOyl1KCIsIik7cmV0dXJuIHUoIikiKSxhfWZ1bmN0aW9uIEYoKXt2YXIgYTtyZXR1cm4gYT1xKCksbyhhKXx8dChhKSxfLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24gRygpe3JldHVybiB1KCIuIiksRigpfWZ1bmN0aW9uIEgoKXt2YXIgYTtyZXR1cm4gdSgiWyIpLGE9ZGIoKSx1KCJdIiksYX1mdW5jdGlvbiBJKCl7dmFyIGEsYjtmb3IoYT1EKCk7digiLiIpfHx2KCJbIik7KXYoIlsiKT8oYj1IKCksYT1fLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIlsiLGEsYikpOihiPUcoKSxhPV8uY3JlYXRlTWVtYmVyRXhwcmVzc2lvbigiLiIsYSxiKSk7cmV0dXJuIGF9ZnVuY3Rpb24gSigpe3ZhciBhLGI7cmV0dXJuIGFiLnR5cGUhPT1VLlB1bmN0dWF0b3ImJmFiLnR5cGUhPT1VLktleXdvcmQ/Yj1jYigpOnYoIisiKXx8digiLSIpfHx2KCIhIik/KGE9cSgpLGI9SigpLGI9Xy5jcmVhdGVVbmFyeUV4cHJlc3Npb24oYS52YWx1ZSxiKSk6dygiZGVsZXRlIil8fHcoInZvaWQiKXx8dygidHlwZW9mIik/cyh7fSxYLlVuZXhwZWN0ZWRUb2tlbik6Yj1jYigpLGJ9ZnVuY3Rpb24gSyhhKXt2YXIgYj0wO2lmKGEudHlwZSE9PVUuUHVuY3R1YXRvciYmYS50eXBlIT09VS5LZXl3b3JkKXJldHVybiAwO3N3aXRjaChhLnZhbHVlKXtjYXNlInx8IjpiPTE7YnJlYWs7Y2FzZSImJiI6Yj0yO2JyZWFrO2Nhc2UiPT0iOmNhc2UiIT0iOmNhc2UiPT09IjpjYXNlIiE9PSI6Yj02O2JyZWFrO2Nhc2UiPCI6Y2FzZSI+IjpjYXNlIjw9IjpjYXNlIj49IjpjYXNlImluc3RhbmNlb2YiOmI9NzticmVhaztjYXNlImluIjpiPTc7YnJlYWs7Y2FzZSIrIjpjYXNlIi0iOmI9OTticmVhaztjYXNlIioiOmNhc2UiLyI6Y2FzZSIlIjpiPTExfXJldHVybiBifWZ1bmN0aW9uIEwoKXt2YXIgYSxiLGMsZCxlLGYsZyxoO2lmKGc9SigpLGI9YWIsYz1LKGIpLDA9PT1jKXJldHVybiBnO2ZvcihiLnByZWM9YyxxKCksZT1KKCksZD1bZyxiLGVdOyhjPUsoYWIpKT4wOyl7Zm9yKDtkLmxlbmd0aD4yJiZjPD1kW2QubGVuZ3RoLTJdLnByZWM7KWU9ZC5wb3AoKSxmPWQucG9wKCkudmFsdWUsZz1kLnBvcCgpLGE9Xy5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGYsZyxlKSxkLnB1c2goYSk7Yj1xKCksYi5wcmVjPWMsZC5wdXNoKGIpLGE9SigpLGQucHVzaChhKX1mb3IoaD1kLmxlbmd0aC0xLGE9ZFtoXTtoPjE7KWE9Xy5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGRbaC0xXS52YWx1ZSxkW2gtMl0sYSksaC09MjtyZXR1cm4gYX1mdW5jdGlvbiBNKCl7dmFyIGEsYixjO3JldHVybiBhPUwoKSx2KCI/IikmJihxKCksYj1NKCksdSgiOiIpLGM9TSgpLGE9Xy5jcmVhdGVDb25kaXRpb25hbEV4cHJlc3Npb24oYSxiLGMpKSxhfWZ1bmN0aW9uIE4oKXt2YXIgYSxiO3JldHVybiBhPXEoKSxhLnR5cGUhPT1VLklkZW50aWZpZXImJnQoYSksYj12KCIoIik/RSgpOltdLF8uY3JlYXRlRmlsdGVyKGEudmFsdWUsYil9ZnVuY3Rpb24gTyhhKXtmb3IoXy5jcmVhdGVUb3BMZXZlbChhKTt2KCJ8Iik7KXEoKSxOKCl9ZnVuY3Rpb24gUCgpe2koKSxyKCk7dmFyIGE9ZGIoKTthJiYoImFzIj09PWFiLnZhbHVlP1IoYSk6ImluIj09PWFiLnZhbHVlJiZhLnR5cGU9PT1XLklkZW50aWZpZXI/UyhhKTp2KCJ8Iik/TyhhKTphLnR5cGU9PT1XLklkZW50aWZpZXImJnYoIjoiKT9RKGEpOl8uY3JlYXRlVG9wTGV2ZWwoYSkpLGFiLnR5cGUhPT1VLkVPRiYmdChhYil9ZnVuY3Rpb24gUShhKXt2YXIgYj1hLm5hbWU7Zm9yKHUoIjoiKSxhPWRiKCksXy5jcmVhdGVMYWJlbGVkU3RhdGVtZW50KGIsYSkseCgpO2FiLnR5cGU9PT1VLklkZW50aWZpZXI7KWI9cSgpLnZhbHVlLHUoIjoiKSxhPWRiKCksXy5jcmVhdGVMYWJlbGVkU3RhdGVtZW50KGIsYSkseCgpO3JldHVybiBudWxsfWZ1bmN0aW9uIFIoYSl7cSgpO3ZhciBiPXEoKS52YWx1ZTtfLmNyZWF0ZUFzRXhwcmVzc2lvbihhLGIpfWZ1bmN0aW9uIFMoYSl7cSgpO3ZhciBiPWRiKCk7Xy5jcmVhdGVJbkV4cHJlc3Npb24oYS5uYW1lLGIpfWZ1bmN0aW9uIFQoYSxiKXtyZXR1cm4gXz1iLFk9YSxaPTAsJD1ZLmxlbmd0aCxhYj1udWxsLGJiPXtsYWJlbFNldDp7fX0sUCgpfXZhciBVLFYsVyxYLFksWiwkLF8sYWIsYmI7VT17Qm9vbGVhbkxpdGVyYWw6MSxFT0Y6MixJZGVudGlmaWVyOjMsS2V5d29yZDo0LE51bGxMaXRlcmFsOjUsTnVtZXJpY0xpdGVyYWw6NixQdW5jdHVhdG9yOjcsU3RyaW5nTGl0ZXJhbDo4fSxWPXt9LFZbVS5Cb29sZWFuTGl0ZXJhbF09IkJvb2xlYW4iLFZbVS5FT0ZdPSI8ZW5kPiIsVltVLklkZW50aWZpZXJdPSJJZGVudGlmaWVyIixWW1UuS2V5d29yZF09IktleXdvcmQiLFZbVS5OdWxsTGl0ZXJhbF09Ik51bGwiLFZbVS5OdW1lcmljTGl0ZXJhbF09Ik51bWVyaWMiLFZbVS5QdW5jdHVhdG9yXT0iUHVuY3R1YXRvciIsVltVLlN0cmluZ0xpdGVyYWxdPSJTdHJpbmciLFc9e0FycmF5RXhwcmVzc2lvbjoiQXJyYXlFeHByZXNzaW9uIixCaW5hcnlFeHByZXNzaW9uOiJCaW5hcnlFeHByZXNzaW9uIixDYWxsRXhwcmVzc2lvbjoiQ2FsbEV4cHJlc3Npb24iLENvbmRpdGlvbmFsRXhwcmVzc2lvbjoiQ29uZGl0aW9uYWxFeHByZXNzaW9uIixFbXB0eVN0YXRlbWVudDoiRW1wdHlTdGF0ZW1lbnQiLEV4cHJlc3Npb25TdGF0ZW1lbnQ6IkV4cHJlc3Npb25TdGF0ZW1lbnQiLElkZW50aWZpZXI6IklkZW50aWZpZXIiLExpdGVyYWw6IkxpdGVyYWwiLExhYmVsZWRTdGF0ZW1lbnQ6IkxhYmVsZWRTdGF0ZW1lbnQiLExvZ2ljYWxFeHByZXNzaW9uOiJMb2dpY2FsRXhwcmVzc2lvbiIsTWVtYmVyRXhwcmVzc2lvbjoiTWVtYmVyRXhwcmVzc2lvbiIsT2JqZWN0RXhwcmVzc2lvbjoiT2JqZWN0RXhwcmVzc2lvbiIsUHJvZ3JhbToiUHJvZ3JhbSIsUHJvcGVydHk6IlByb3BlcnR5IixUaGlzRXhwcmVzc2lvbjoiVGhpc0V4cHJlc3Npb24iLFVuYXJ5RXhwcmVzc2lvbjoiVW5hcnlFeHByZXNzaW9uIn0sWD17VW5leHBlY3RlZFRva2VuOiJVbmV4cGVjdGVkIHRva2VuICUwIixVbmtub3duTGFiZWw6IlVuZGVmaW5lZCBsYWJlbCAnJTAnIixSZWRlY2xhcmF0aW9uOiIlMCAnJTEnIGhhcyBhbHJlYWR5IGJlZW4gZGVjbGFyZWQifTt2YXIgY2I9SSxkYj1NO2EuZXNwcmltYT17cGFyc2U6VH19KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixkKXt2YXIgZTt0cnl7aWYoZT1jKGEpLGUuc2NvcGVJZGVudCYmKGQubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8IlRFTVBMQVRFIiE9PWQudGFnTmFtZXx8ImJpbmQiIT09YiYmInJlcGVhdCIhPT1iKSl0aHJvdyBFcnJvcigiYXMgYW5kIGluIGNhbiBvbmx5IGJlIHVzZWQgd2l0aGluIDx0ZW1wbGF0ZSBiaW5kL3JlcGVhdD4iKX1jYXRjaChmKXtyZXR1cm4gY29uc29sZS5lcnJvcigiSW52YWxpZCBleHByZXNzaW9uIHN5bnRheDogIithLGYpLHZvaWQgMH1yZXR1cm4gZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWUuZ2V0QmluZGluZyhhKTtyZXR1cm4gZS5zY29wZUlkZW50JiZkJiYoYy5wb2x5bWVyRXhwcmVzc2lvblNjb3BlTmFtZV89ZS5zY29wZUlkZW50KSxkfX1mdW5jdGlvbiBjKGEpe3ZhciBiPWxbYV07aWYoIWIpe3ZhciBjPW5ldyBpO2VzcHJpbWEucGFyc2UoYSxjKSxiPW5ldyBqKGMpLGxbYV09Yn1yZXR1cm4gYn1mdW5jdGlvbiBkKGEpe3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCsrKWFbZF0uZXhwcmVzc2lvbihiKSYmYy5wdXNoKGFbZF0ubGFiZWwpO3JldHVybiBjLmpvaW4oIiAiKX19ZnVuY3Rpb24gZShhLGIsYyl7dGhpcy5kZWxlZ2F0ZT1hLHRoaXMubmFtZT1iLHRoaXMubGFzdD1jfWZ1bmN0aW9uIGYoYSxiKXt0aGlzLm5hbWU9YSx0aGlzLmFyZ3M9Yix0aGlzLm9iamVjdF89bnVsbH1mdW5jdGlvbiBnKCl7dGhyb3cgRXJyb3IoIk5vdCBJbXBsZW1lbnRlZCIpfWZ1bmN0aW9uIGgoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBlP2EudmFsdWVGbigpOmF9ZnVuY3Rpb24gaSgpe3RoaXMuZXhwcmVzc2lvbj1udWxsLHRoaXMuZmlsdGVycz1bXSx0aGlzLmxhYmVsZWRTdGF0ZW1lbnRzPVtdLHRoaXMuZGVwcz17fSx0aGlzLmRlcHNMaXN0PVtdLHRoaXMuY3VycmVudFBhdGg9dm9pZCAwLHRoaXMuaWRlbnQ9dm9pZCAwfWZ1bmN0aW9uIGooYSl7aWYodGhpcy5zY29wZUlkZW50PWEuaWRlbnQsIWEuZXhwcmVzc2lvbiYmIWEubGFiZWxlZFN0YXRlbWVudHMubGVuZ3RoKXRocm93IEVycm9yKCJObyBleHByZXNzaW9uIG9yIGxhYmVsbGVkIHN0YXRlbWVudHMgZm91bmQuIik7dmFyIGI9YS5sYWJlbGVkU3RhdGVtZW50cy5sZW5ndGg/ZChhLmxhYmVsZWRTdGF0ZW1lbnRzKTpoKGEuZXhwcmVzc2lvbik7YS5maWx0ZXJzLmZvckVhY2goZnVuY3Rpb24oYSl7Yj1hLnRvRE9NKGIpfSksdGhpcy5yZXNvbHZlRm49Yix0aGlzLnBhdGhzPWEuZGVwc0xpc3QsMT09PXRoaXMucGF0aHMubGVuZ3RoJiZhLmZpbHRlcnMubGVuZ3RoJiZhLmV4cHJlc3Npb24gaW5zdGFuY2VvZiBlJiYodGhpcy5maWx0ZXJzU2V0VmFsdWVGbj1hLmZpbHRlcnNTZXRWYWx1ZUZuKX1mdW5jdGlvbiBrKCl7fXZhciBsPU9iamVjdC5jcmVhdGUobnVsbCk7ZS5wcm90b3R5cGU9e2dldFBhdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXRoX3x8KHRoaXMucGF0aF89dGhpcy5sYXN0P1BhdGguZ2V0KHRoaXMubGFzdC5nZXRQYXRoKCkrIi4iK3RoaXMubmFtZSk6UGF0aC5nZXQodGhpcy5uYW1lKSksdGhpcy5wYXRoX30sdmFsdWVGbjpmdW5jdGlvbigpe2lmKCF0aGlzLnZhbHVlRm5fKXt2YXIgYT10aGlzLmdldFBhdGgoKSxiPXRoaXMuZGVsZWdhdGUsYz10aGlzLmRlbGVnYXRlLmRlcHNbYV07dm9pZCAwPT09YyYmKGM9dGhpcy5kZWxlZ2F0ZS5kZXBzW2FdPXRoaXMuZGVsZWdhdGUuZGVwc0xpc3QubGVuZ3RoLHRoaXMuZGVsZWdhdGUuZGVwc0xpc3QucHVzaChhKSk7dmFyIGQ9Yi5kZXBzTGlzdDt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09ZC5sZW5ndGg/YTphW2NdfX1yZXR1cm4gdGhpcy52YWx1ZUZuX319LGYucHJvdG90eXBlPXtnZXQgb2JqZWN0KCl7aWYodGhpcy5vYmplY3RfKXJldHVybiB0aGlzLm9iamVjdF87dmFyIGE9ay5maWx0ZXJzW3RoaXMubmFtZV0sYj10aGlzLmFyZ3MubWFwKGZ1bmN0aW9uKGEpe3ZhciBiPWgoYSk7cmV0dXJuIGIoKX0pO3JldHVybiB0aGlzLm9iamVjdF89YS5hcHBseShudWxsLGIpfSx0b0RPTTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9iamVjdDtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9YShjKTtyZXR1cm4gYi50b0RPTShkKX19LHRvTW9kZWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vYmplY3Q7cmV0dXJuIGIudG9Nb2RlbD9iLnRvTW9kZWwoYSk6YX19O3ZhciBtPXsiKyI6ZnVuY3Rpb24oYSl7cmV0dXJuK2EKfSwiLSI6ZnVuY3Rpb24oYSl7cmV0dXJuLWF9LCIhIjpmdW5jdGlvbihhKXtyZXR1cm4hYX19LG49eyIrIjpmdW5jdGlvbihhLGIpe3JldHVybiBhK2J9LCItIjpmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LCIqIjpmdW5jdGlvbihhLGIpe3JldHVybiBhKmJ9LCIvIjpmdW5jdGlvbihhLGIpe3JldHVybiBhL2J9LCIlIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJWJ9LCI8IjpmdW5jdGlvbihhLGIpe3JldHVybiBiPmF9LCI+IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPmJ9LCI8PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj49YX0sIj49IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPj1ifSwiPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PWJ9LCIhPSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9Yn0sIj09PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9LCIhPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPT1ifSwiJiYiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmJ9LCJ8fCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn19O2kucHJvdG90eXBlPXtnZXQgZmlsdGVyc1NldFZhbHVlRm4oKXtpZighdGhpcy5maWx0ZXJzU2V0VmFsdWVGbl8pe3ZhciBhPXRoaXMuZmlsdGVyczt0aGlzLmZpbHRlcnNTZXRWYWx1ZUZuXz1mdW5jdGlvbihiKXtmb3IodmFyIGM9YS5sZW5ndGgtMTtjPj0wO2MtLSliPWFbY10udG9Nb2RlbChiKTtyZXR1cm4gYn19cmV0dXJuIHRoaXMuZmlsdGVyc1NldFZhbHVlRm5ffSxjcmVhdGVMYWJlbGVkU3RhdGVtZW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubGFiZWxlZFN0YXRlbWVudHMucHVzaCh7bGFiZWw6YSxleHByZXNzaW9uOmIgaW5zdGFuY2VvZiBlP2IudmFsdWVGbigpOmJ9KSxifSxjcmVhdGVVbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXtpZighbVthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj1oKGIpLGZ1bmN0aW9uKGMpe3JldHVybiBtW2FdKGIoYykpfX0sY3JlYXRlQmluYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7aWYoIW5bYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7cmV0dXJuIGI9aChiKSxjPWgoYyksZnVuY3Rpb24oZCl7cmV0dXJuIG5bYV0oYihkKSxjKGQpKX19LGNyZWF0ZUNvbmRpdGlvbmFsRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGE9aChhKSxiPWgoYiksYz1oKGMpLGZ1bmN0aW9uKGQpe3JldHVybiBhKGQpP2IoZCk6YyhkKX19LGNyZWF0ZUlkZW50aWZpZXI6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGUodGhpcyxhKTtyZXR1cm4gYi50eXBlPSJJZGVudGlmaWVyIixifSxjcmVhdGVNZW1iZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4iWyI9PT1hPyhiPWgoYiksYz1oKGMpLGZ1bmN0aW9uKGEpe3JldHVybiBiKGEpW2MoYSldfSk6bmV3IGUodGhpcyxjLm5hbWUsYil9LGNyZWF0ZUxpdGVyYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEudmFsdWV9fSxjcmVhdGVBcnJheUV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXT1oKGFbYl0pO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCsrKWMucHVzaChhW2RdKGIpKTtyZXR1cm4gY319LGNyZWF0ZVByb3BlcnR5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm57a2V5OmIgaW5zdGFuY2VvZiBlP2IuZ2V0UGF0aCgpOmIoKSx2YWx1ZTpjfX0sY3JlYXRlT2JqZWN0RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLnZhbHVlPWgoYVtiXS52YWx1ZSk7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz17fSxkPTA7ZDxhLmxlbmd0aDtkKyspY1thW2RdLmtleV09YVtkXS52YWx1ZShiKTtyZXR1cm4gY319LGNyZWF0ZUZpbHRlcjpmdW5jdGlvbihhLGIpe3RoaXMuZmlsdGVycy5wdXNoKG5ldyBmKGEsYikpfSxjcmVhdGVBc0V4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXt0aGlzLmV4cHJlc3Npb249YSx0aGlzLmlkZW50PWJ9LGNyZWF0ZUluRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIpe3RoaXMuZXhwcmVzc2lvbj1iLHRoaXMuaWRlbnQ9YX0sY3JlYXRlVG9wTGV2ZWw6ZnVuY3Rpb24oYSl7dGhpcy5leHByZXNzaW9uPWF9LGNyZWF0ZVRoaXNFeHByZXNzaW9uOmd9LGoucHJvdG90eXBlPXtnZXRCaW5kaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGF0aHM7aWYoIWIubGVuZ3RoKXJldHVybnt2YWx1ZTp0aGlzLnJlc29sdmVGbih7fSl9O2lmKDE9PT1iLmxlbmd0aClyZXR1cm4gbmV3IFBhdGhPYnNlcnZlcihhLGJbMF0sdm9pZCAwLHZvaWQgMCx2b2lkIDAsdGhpcy5yZXNvbHZlRm4sdGhpcy5maWx0ZXJzU2V0VmFsdWVGbik7Zm9yKHZhciBjPW5ldyBDb21wb3VuZFBhdGhPYnNlcnZlcih2b2lkIDAsdm9pZCAwLHZvaWQgMCx0aGlzLnJlc29sdmVGbiksZD0wO2Q8Yi5sZW5ndGg7ZCsrKWMuYWRkUGF0aChhLGJbZF0pO3JldHVybiBjLnN0YXJ0KCksY319LGsuZmlsdGVycz1PYmplY3QuY3JlYXRlKG51bGwpLGsucHJvdG90eXBlPXtwcmVwYXJlQmluZGluZzpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIFBhdGguZ2V0KGEpLnZhbGlkP3ZvaWQgMDpiKGEsYyxkKX0scHJlcGFyZUluc3RhbmNlTW9kZWw6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wb2x5bWVyRXhwcmVzc2lvblNjb3BlTmFtZV87aWYoYil7dmFyIGM9YS50ZW1wbGF0ZUluc3RhbmNlP2EudGVtcGxhdGVJbnN0YW5jZS5tb2RlbDphLm1vZGVsO3JldHVybiBmdW5jdGlvbihhKXt2YXIgZD1PYmplY3QuY3JlYXRlKGMpO3JldHVybiBkW2JdPWEsZH19fX0sYS5Qb2x5bWVyRXhwcmVzc2lvbnM9a30odGhpcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2xvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXAoIlBsYXRmb3JtLmZsdXNoKCkiKSxhLmVuZE9mTWljcm90YXNrKFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwRW5kKCl9dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtjLnRleHRDb250ZW50PSJ0ZW1wbGF0ZSB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30gLyogaW5qZWN0ZWQgYnkgcGxhdGZvcm0uanMgKi8iO3ZhciBkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtkLmluc2VydEJlZm9yZShjLGQuZmlyc3RDaGlsZCk7dmFyIGU9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLE9ic2VydmVyLmhhc09iamVjdE9ic2VydmV8fChhLmZsdXNoUG9sbD1zZXRJbnRlcnZhbChiLGUpKX0pLGEuZmx1c2g9Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBkKGEsaSl9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gZChhLGopfWZ1bmN0aW9uIGQoYSxiKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmYS5nZXRBdHRyaWJ1dGUoInJlbCIpPT09Yn1mdW5jdGlvbiBlKGEpe3JldHVybiJzY3JpcHQiPT09YS5sb2NhbE5hbWV9ZnVuY3Rpb24gZihhLGIpe3ZhciBjPWE7YyBpbnN0YW5jZW9mIERvY3VtZW50fHwoYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoaSksYy5ib2R5LmlubmVySFRNTD1hKSxjLl9VUkw9Yjt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtyZXR1cm4gZC5zZXRBdHRyaWJ1dGUoImhyZWYiLGRvY3VtZW50LmJhc2VVUkl8fGRvY3VtZW50LlVSTCksYy5oZWFkLmFwcGVuZENoaWxkKGQpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31hfHwoYT13aW5kb3cuSFRNTEltcG9ydHM9e2ZsYWdzOnt9fSk7dmFyIGcsaD1hLnhocixpPSJpbXBvcnQiLGo9InN0eWxlc2hlZXQiLGs9e2RvY3VtZW50czp7fSxjYWNoZTp7fSxwcmVsb2FkU2VsZWN0b3JzOlsibGlua1tyZWw9IitpKyJdIiwiZWxlbWVudCBsaW5rW3JlbD0iK2orIl0iLCJ0ZW1wbGF0ZSIsInNjcmlwdFtzcmNdOm5vdChbdHlwZV0pIiwnc2NyaXB0W3NyY11bdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXS5qb2luKCIsIiksbG9hZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBnPW5ldyBsKGsubG9hZGVkLGEpLGcuY2FjaGU9ay5jYWNoZSxnfSxsb2FkOmZ1bmN0aW9uKGEsYil7Zz1rLmxvYWRlcihiKSxrLnByZWxvYWQoYSl9LHByZWxvYWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGsucHJlbG9hZFNlbGVjdG9ycyk7Yj10aGlzLmZpbHRlck1haW5Eb2N1bWVudE5vZGVzKGEsYiksYj10aGlzLmV4dHJhY3RUZW1wbGF0ZU5vZGVzKGIpLGcuYWRkTm9kZXMoYil9LGZpbHRlck1haW5Eb2N1bWVudE5vZGVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1kb2N1bWVudCYmKGI9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGIsZnVuY3Rpb24oYSl7cmV0dXJuIWUoYSl9KSksYn0sZXh0cmFjdFRlbXBsYXRlTm9kZXM6ZnVuY3Rpb24oYSl7dmFyIGI9W107cmV0dXJuIGE9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoInRlbXBsYXRlIj09PWEubG9jYWxOYW1lKXtpZihhLmNvbnRlbnQpe3ZhciBjPWEuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK2orIl0iKTtjLmxlbmd0aCYmKGI9Yi5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYywwKSkpfXJldHVybiExfXJldHVybiEwfSksYi5sZW5ndGgmJihhPWEuY29uY2F0KGIpKSxhfSxsb2FkZWQ6ZnVuY3Rpb24oYSxkLGUpe2lmKGIoZCkpe3ZhciBnPWsuZG9jdW1lbnRzW2FdO2d8fChnPWYoZSxhKSxwLnJlc29sdmVQYXRoc0luSFRNTChnKSxrLmRvY3VtZW50c1thXT1nLGsucHJlbG9hZChnKSksZC5pbXBvcnQ9e2hyZWY6YSxvd25lck5vZGU6ZCxjb250ZW50Omd9LGQuY29udGVudD1lPWd9ZC5fX3Jlc291cmNlPWUsYyhkKSYmcC5yZXNvbHZlUGF0aHNJblN0eWxlc2hlZXQoZCl9fSxsPWZ1bmN0aW9uKGEsYil7dGhpcy5vbmxvYWQ9YSx0aGlzLm9uY29tcGxldGU9Yix0aGlzLmluZmxpZ2h0PTAsdGhpcy5wZW5kaW5nPXt9LHRoaXMuY2FjaGU9e319O2wucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0Kz1hLmxlbmd0aCxxKGEsdGhpcy5yZXF1aXJlLHRoaXMpLHRoaXMuY2hlY2tEb25lKCl9LHJlcXVpcmU6ZnVuY3Rpb24oYSl7dmFyIGI9cC5ub2RlVXJsKGEpO2EuX19ub2RlVXJsPWIsdGhpcy5kZWR1cGUoYixhKXx8dGhpcy5mZXRjaChiLGEpfSxkZWR1cGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wZW5kaW5nW2FdPyh0aGlzLnBlbmRpbmdbYV0ucHVzaChiKSwhMCk6dGhpcy5jYWNoZVthXT8odGhpcy5vbmxvYWQoYSxiLGcuY2FjaGVbYV0pLHRoaXMudGFpbCgpLCEwKToodGhpcy5wZW5kaW5nW2FdPVtiXSwhMSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYyxkKXt0aGlzLnJlY2VpdmUoYSxiLGMsZCl9LmJpbmQodGhpcyk7aC5sb2FkKGEsYyl9LHJlY2VpdmU6ZnVuY3Rpb24oYSxiLGMsZCl7Y3x8KGcuY2FjaGVbYV09ZCksZy5wZW5kaW5nW2FdLmZvckVhY2goZnVuY3Rpb24oYil7Y3x8dGhpcy5vbmxvYWQoYSxiLGQpLHRoaXMudGFpbCgpfSx0aGlzKSxnLnBlbmRpbmdbYV09bnVsbH0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19O3ZhciBtPVsiaHJlZiIsInNyYyIsImFjdGlvbiJdLG49IlsiK20uam9pbigiXSxbIikrIl0iLG89Int7Lip9fSIscD17bm9kZVVybDpmdW5jdGlvbihhKXtyZXR1cm4gcC5yZXNvbHZlVXJsKHAuZG9jdW1lbnRVUkwscC5ocmVmT3JTcmMoYSkpfSxocmVmT3JTcmM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJocmVmIil8fGEuZ2V0QXR0cmlidXRlKCJzcmMiKX0sZG9jdW1lbnRVcmxGcm9tTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gcC5nZXREb2N1bWVudFVybChhLm93bmVyRG9jdW1lbnR8fGEpfSxnZXREb2N1bWVudFVybDpmdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5fVVJMfHxhLmltcGwmJmEuaW1wbC5fVVJMfHxhLmJhc2VVUkl8fGEuVVJMKXx8IiI7cmV0dXJuIGIuc3BsaXQoIiMiKVswXX0scmVzb2x2ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmlzQWJzVXJsKGIpP2I6dGhpcy5jb21wcmVzc1VybCh0aGlzLnVybFRvUGF0aChhKStiKX0scmVzb2x2ZVJlbGF0aXZlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaXNBYnNVcmwoYik/Yjp0aGlzLm1ha2VEb2N1bWVudFJlbFBhdGgodGhpcy5yZXNvbHZlVXJsKGEsYikpfSxpc0Fic1VybDpmdW5jdGlvbihhKXtyZXR1cm4vKF5kYXRhOil8KF5odHRwW3NdPzopfCheXC8pLy50ZXN0KGEpfSx1cmxUb1BhdGg6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zcGxpdCgiLyIpO3JldHVybiBiLnBvcCgpLGIucHVzaCgiIiksYi5qb2luKCIvIil9LGNvbXByZXNzVXJsOmZ1bmN0aW9uKGEpe3ZhciBiPSIiLGM9YS5pbmRleE9mKCI/Iik7Yz4tMSYmKGI9YS5zdWJzdHJpbmcoYyksYT1hLnN1YnN0cmluZyhjLDApKTtmb3IodmFyIGQsZT1hLnNwbGl0KCIvIiksZj0wO2Y8ZS5sZW5ndGg7ZisrKWQ9ZVtmXSwiLi4iPT09ZCYmKGUuc3BsaWNlKGYtMSwyKSxmLT0yKTtyZXR1cm4gZS5qb2luKCIvIikrYn0sbWFrZURvY3VtZW50UmVsUGF0aDpmdW5jdGlvbihhKXtyZXR1cm4gcC51cmxFbHQuaHJlZj1hLCFwLnVybEVsdC5ob3N0fHxwLnVybEVsdC5ob3N0PT09d2luZG93LmxvY2F0aW9uLmhvc3QmJnAudXJsRWx0LnByb3RvY29sPT09d2luZG93LmxvY2F0aW9uLnByb3RvY29sP3RoaXMubWFrZVJlbFBhdGgocC5kb2N1bWVudFVSTCxwLnVybEVsdC5ocmVmKTphfSxtYWtlUmVsUGF0aDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLnNwbGl0KCIvIiksZD1iLnNwbGl0KCIvIik7Yy5sZW5ndGgmJmNbMF09PT1kWzBdOyljLnNoaWZ0KCksZC5zaGlmdCgpO2Zvcih2YXIgZT0wLGY9Yy5sZW5ndGgtMTtmPmU7ZSsrKWQudW5zaGlmdCgiLi4iKTt2YXIgZz1kLmpvaW4oIi8iKTtyZXR1cm4gZ30scmVzb2x2ZVBhdGhzSW5IVE1MOmZ1bmN0aW9uKGEsYil7Yj1ifHxwLmRvY3VtZW50VXJsRnJvbU5vZGUoYSkscC5yZXNvbHZlQXR0cmlidXRlcyhhLGIpLHAucmVzb2x2ZVN0eWxlRWx0cyhhLGIpO3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKTtjJiZxKGMsZnVuY3Rpb24oYSl7YS5jb250ZW50JiZwLnJlc29sdmVQYXRoc0luSFRNTChhLmNvbnRlbnQsYil9KX0scmVzb2x2ZVBhdGhzSW5TdHlsZXNoZWV0OmZ1bmN0aW9uKGEpe3ZhciBiPXAubm9kZVVybChhKTthLl9fcmVzb3VyY2U9cC5yZXNvbHZlQ3NzVGV4dChhLl9fcmVzb3VyY2UsYil9LHJlc29sdmVTdHlsZUVsdHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7YyYmcShjLGZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9cC5yZXNvbHZlQ3NzVGV4dChhLnRleHRDb250ZW50LGIpfSl9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEucmVwbGFjZSgvdXJsXChbXildKlwpL2csZnVuY3Rpb24oYSl7dmFyIGM9YS5yZXBsYWNlKC9bIiddL2csIiIpLnNsaWNlKDQsLTEpO3JldHVybiBjPXAucmVzb2x2ZVJlbGF0aXZlVXJsKGIsYyksInVybCgiK2MrIikifSl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YSYmYS5xdWVyeVNlbGVjdG9yQWxsKG4pO2MmJnEoYyxmdW5jdGlvbihhKXt0aGlzLnJlc29sdmVOb2RlQXR0cmlidXRlcyhhLGIpfSx0aGlzKX0scmVzb2x2ZU5vZGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7bS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPWEuYXR0cmlidXRlc1tjXTtpZihkJiZkLnZhbHVlJiZkLnZhbHVlLnNlYXJjaChvKTwwKXt2YXIgZT1wLnJlc29sdmVSZWxhdGl2ZVVybChiLGQudmFsdWUpO2QudmFsdWU9ZX19KX19O3AuZG9jdW1lbnRVUkw9cC5nZXREb2N1bWVudFVybChkb2N1bWVudCkscC51cmxFbHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLGg9aHx8e2FzeW5jOiEwLG9rOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fDMwND09PWEuc3RhdHVzfHwwPT09YS5zdGF0dXN9LGxvYWQ6ZnVuY3Rpb24oYixjLGQpe3ZhciBlPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4oYS5mbGFncy5kZWJ1Z3x8YS5mbGFncy5idXN0KSYmKGIrPSI/IitNYXRoLnJhbmRvbSgpKSxlLm9wZW4oIkdFVCIsYixoLmFzeW5jKSxlLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGZ1bmN0aW9uKCl7ND09PWUucmVhZHlTdGF0ZSYmYy5jYWxsKGQsIWgub2soZSkmJmUsZS5yZXNwb25zZSxiKX0pLGUuc2VuZCgpLGV9LGxvYWREb2N1bWVudDpmdW5jdGlvbihhLGIsYyl7dGhpcy5sb2FkKGEsYixjKS5yZXNwb25zZVR5cGU9ImRvY3VtZW50In19O3ZhciBxPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS5wYXRoPXAsYS54aHI9aCxhLmltcG9ydGVyPWssYS5nZXREb2N1bWVudFVybD1wLmdldERvY3VtZW50VXJsLGEuSU1QT1JUX0xJTktfVFlQRT1pfSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWZ9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiYhZChhKSYmIWUoYSl9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50PT09ZG9jdW1lbnR8fGEub3duZXJEb2N1bWVudC5pbXBsPT09ZG9jdW1lbnR9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiYiZWxlbWVudCI9PT1hLnBhcmVudE5vZGUubG9jYWxOYW1lfXZhciBmPSJpbXBvcnQiLGc9e3NlbGVjdG9yczpbImxpbmtbcmVsPSIrZisiXSIsImxpbmtbcmVsPXN0eWxlc2hlZXRdIiwic3R5bGUiLCJzY3JpcHQ6bm90KFt0eXBlXSkiLCdzY3JpcHRbdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXSxtYXA6e2xpbms6InBhcnNlTGluayIsc2NyaXB0OiJwYXJzZVNjcmlwdCIsc3R5bGU6InBhcnNlR2VuZXJpYyJ9LHBhcnNlOmZ1bmN0aW9uKGEpe2lmKCFhLl9faW1wb3J0UGFyc2VkKXthLl9faW1wb3J0UGFyc2VkPSEwO3ZhciBiPWEucXVlcnlTZWxlY3RvckFsbChnLnNlbGVjdG9ycyk7aChiLGZ1bmN0aW9uKGEpe2dbZy5tYXBbYS5sb2NhbE5hbWVdXShhKX0pfX0scGFyc2VMaW5rOmZ1bmN0aW9uKGEpe2IoYSk/YS5jb250ZW50JiZnLnBhcnNlKGEuY29udGVudCk6dGhpcy5wYXJzZUdlbmVyaWMoYSl9LHBhcnNlR2VuZXJpYzpmdW5jdGlvbihhKXtjKGEpJiZkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGEpfSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXtpZihjKGIpKXt2YXIgZD0oYi5fX3Jlc291cmNlfHxiLnRleHRDb250ZW50KS50cmltKCk7aWYoZCl7dmFyIGU9Yi5fX25vZGVVcmw7aWYoIWUpe3ZhciBlPWEucGF0aC5kb2N1bWVudFVybEZyb21Ob2RlKGIpLGY9IlsiK01hdGguZmxvb3IoMWUzKihNYXRoLnJhbmRvbSgpKzEpKSsiXSIsZz1kLm1hdGNoKC9Qb2x5bWVyXChbJyJdKFteJyJdKikvKTtmPWcmJmdbMV18fGYsZSs9Ii8iK2YrIi5qcyJ9ZCs9IlxuLy8jIHNvdXJjZVVSTD0iK2UrIlxuIixldmFsLmNhbGwod2luZG93LGQpfX19fSxoPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS5wYXJzZXI9Z30oSFRNTEltcG9ydHMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe0hUTUxJbXBvcnRzLmltcG9ydGVyLmxvYWQoZG9jdW1lbnQsZnVuY3Rpb24oKXtIVE1MSW1wb3J0cy5wYXJzZXIucGFyc2UoZG9jdW1lbnQpLEhUTUxJbXBvcnRzLnJlYWR5VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiSFRNTEltcG9ydHNMb2FkZWQiLHtidWJibGVzOiEwfSkpfSl9ImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO3JldHVybiBiLmluaXRFdmVudChhLCEwLCEwKSxifSksImNvbXBsZXRlIj09PWRvY3VtZW50LnJlYWR5U3RhdGU/YSgpOndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixhKX0oKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9e2ZsYWdzOnt9fSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3UucHVzaChhKSx0fHwodD0hMCxxKGQpKX1mdW5jdGlvbiBjKGEpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSl8fGF9ZnVuY3Rpb24gZCgpe3Q9ITE7dmFyIGE9dTt1PVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7dmFyIGI9ITE7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEudGFrZVJlY29yZHMoKTtlKGEpLGMubGVuZ3RoJiYoYS5jYWxsYmFja18oYyxhKSxiPSEwKX0pLGImJmQoKX1mdW5jdGlvbiBlKGEpe2Eubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9cC5nZXQoYik7YyYmYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Iub2JzZXJ2ZXI9PT1hJiZiLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPWE7YztjPWMucGFyZW50Tm9kZSl7dmFyIGQ9cC5nZXQoYyk7aWYoZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXSxnPWYub3B0aW9ucztpZihjPT09YXx8Zy5zdWJ0cmVlKXt2YXIgaD1iKGcpO2gmJmYuZW5xdWV1ZShoKX19fX1mdW5jdGlvbiBnKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89Kyt2fWZ1bmN0aW9uIGgoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1bXSx0aGlzLnJlbW92ZWROb2Rlcz1bXSx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBpKGEpe3ZhciBiPW5ldyBoKGEudHlwZSxhLnRhcmdldCk7cmV0dXJuIGIuYWRkZWROb2Rlcz1hLmFkZGVkTm9kZXMuc2xpY2UoKSxiLnJlbW92ZWROb2Rlcz1hLnJlbW92ZWROb2Rlcy5zbGljZSgpLGIucHJldmlvdXNTaWJsaW5nPWEucHJldmlvdXNTaWJsaW5nLGIubmV4dFNpYmxpbmc9YS5uZXh0U2libGluZyxiLmF0dHJpYnV0ZU5hbWU9YS5hdHRyaWJ1dGVOYW1lLGIuYXR0cmlidXRlTmFtZXNwYWNlPWEuYXR0cmlidXRlTmFtZXNwYWNlLGIub2xkVmFsdWU9YS5vbGRWYWx1ZSxifWZ1bmN0aW9uIGooYSxiKXtyZXR1cm4gdz1uZXcgaChhLGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIHg/eDooeD1pKHcpLHgub2xkVmFsdWU9YSx4KX1mdW5jdGlvbiBsKCl7dz14PXZvaWQgMH1mdW5jdGlvbiBtKGEpe3JldHVybiBhPT09eHx8YT09PXd9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgU2lkZVRhYmxlLHE9d2luZG93Lm1zU2V0SW1tZWRpYXRlO2lmKCFxKXt2YXIgcj1bXSxzPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYSl7aWYoYS5kYXRhPT09cyl7dmFyIGI9cjtyPVtdLGIuZm9yRWFjaChmdW5jdGlvbihhKXthKCl9KX19KSxxPWZ1bmN0aW9uKGEpe3IucHVzaChhKSx3aW5kb3cucG9zdE1lc3NhZ2UocywiKiIpfX12YXIgdD0hMSx1PVtdLHY9MDtnLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2lmKGE9YyhhKSwhYi5jaGlsZExpc3QmJiFiLmF0dHJpYnV0ZXMmJiFiLmNoYXJhY3RlckRhdGF8fGIuYXR0cmlidXRlT2xkVmFsdWUmJiFiLmF0dHJpYnV0ZXN8fGIuYXR0cmlidXRlRmlsdGVyJiZiLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFiLmF0dHJpYnV0ZXN8fGIuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhYi5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgZD1wLmdldChhKTtkfHxwLnNldChhLGQ9W10pO2Zvcih2YXIgZSxmPTA7ZjxkLmxlbmd0aDtmKyspaWYoZFtmXS5vYnNlcnZlcj09PXRoaXMpe2U9ZFtmXSxlLnJlbW92ZUxpc3RlbmVycygpLGUub3B0aW9ucz1iO2JyZWFrfWV8fChlPW5ldyBvKHRoaXMsYSxiKSxkLnB1c2goZSksdGhpcy5ub2Rlc18ucHVzaChhKSksZS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7ZC5yZW1vdmVMaXN0ZW5lcnMoKSxiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX07dmFyIHcseDtvLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLm9ic2VydmVyLnJlY29yZHNfLGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+MCl7dmFyIGU9Y1tkLTFdLGY9bihlLGEpO2lmKGYpcmV0dXJuIGNbZC0xXT1mLHZvaWQgMH1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWd9KHRoaXMpLCF3aW5kb3cuTXV0YXRpb25PYnNlcnZlciYmKHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyPXdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyLCFNdXRhdGlvbk9ic2VydmVyKSl0aHJvdyBuZXcgRXJyb3IoIm5vIG11dGF0aW9uIG9ic2VydmVyIHN1cHBvcnQiKTshZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGMsZCl7dmFyIGU9YS5maXJzdEVsZW1lbnRDaGlsZDtpZighZSlmb3IoZT1hLmZpcnN0Q2hpbGQ7ZSYmZS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOyllPWUubmV4dFNpYmxpbmc7Zm9yKDtlOyljKGUsZCkhPT0hMCYmYihlLGMsZCksZT1lLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gbnVsbH1mdW5jdGlvbiBjKGEsYil7Zm9yKHZhciBjPWEud2Via2l0U2hhZG93Um9vdDtjOylkKGMsYiksYz1jLm9sZGVyU2hhZG93Um9vdH1mdW5jdGlvbiBkKGEsZCl7YihhLGZ1bmN0aW9uKGEpe3JldHVybiBkKGEpPyEwOihjKGEsZCksdm9pZCAwKX0pLGMoYSxkKX1mdW5jdGlvbiBlKGEpe3JldHVybiBoKGEpPyhpKGEpLCEwKTooaihhKSx2b2lkIDApfWZ1bmN0aW9uIGYoYSl7ZChhLGZ1bmN0aW9uKGEpe3JldHVybiBlKGEpPyEwOnZvaWQgMH0pfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIGUoYSl8fGYoYSl9ZnVuY3Rpb24gaChiKXtpZighYi5fX3VwZ3JhZGVkX18mJmIubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoImlzIil8fGIubG9jYWxOYW1lLGQ9YS5yZWdpc3RyeVtjXTtpZihkKXJldHVybiB2LmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZToiLGIubG9jYWxOYW1lKSxhLnVwZ3JhZGUoYiksdi5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSwhMH19ZnVuY3Rpb24gaShhKXtqKGEpLG0oYSkmJmQoYSxmdW5jdGlvbihhKXtqKGEpfSl9ZnVuY3Rpb24gaihhKXsoYS5lbnRlcmVkVmlld0NhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmdi5kb20pJiYodi5kb20mJmNvbnNvbGUuZ3JvdXAoImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLG0oYSkmJihhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCkrMSxhLl9faW5zZXJ0ZWQ8MSYmKGEuX19pbnNlcnRlZD0xKSxhLl9faW5zZXJ0ZWQ+MT92LmRvbSYmY29uc29sZS53YXJuKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLmVudGVyZWRWaWV3Q2FsbGJhY2smJih2LmRvbSYmY29uc29sZS5sb2coImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLGEuZW50ZXJlZFZpZXdDYWxsYmFjaygpKSksdi5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gayhhKXtsKGEpLGQoYSxmdW5jdGlvbihhKXtsKGEpfSl9ZnVuY3Rpb24gbChhKXsoYS5sZWZ0Vmlld0NhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmdi5kb20pJiYodi5kb20mJmNvbnNvbGUubG9nKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUpLG0oYSl8fChhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCktMSxhLl9faW5zZXJ0ZWQ+MCYmKGEuX19pbnNlcnRlZD0wKSxhLl9faW5zZXJ0ZWQ8MD92LmRvbSYmY29uc29sZS53YXJuKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEubGVmdFZpZXdDYWxsYmFjayYmYS5sZWZ0Vmlld0NhbGxiYWNrKCkpKX1mdW5jdGlvbiBtKGEpe2Zvcih2YXIgYj1hO2I7KXtpZihiPT1hLm93bmVyRG9jdW1lbnQpcmV0dXJuITA7Yj1iLnBhcmVudE5vZGV8fGIuaG9zdH19ZnVuY3Rpb24gbihhKXtpZihhLndlYmtpdFNoYWRvd1Jvb3QmJiFhLndlYmtpdFNoYWRvd1Jvb3QuX193YXRjaGVkKXt2LmRvbSYmY29uc29sZS5sb2coIndhdGNoaW5nIHNoYWRvdy1yb290IGZvcjogIixhLmxvY2FsTmFtZSk7Zm9yKHZhciBiPWEud2Via2l0U2hhZG93Um9vdDtiOylvKGIpLGI9Yi5vbGRlclNoYWRvd1Jvb3R9fWZ1bmN0aW9uIG8oYSl7YS5fX3dhdGNoZWR8fChzKGEpLGEuX193YXRjaGVkPSEwKX1mdW5jdGlvbiBwKGEpe3N3aXRjaChhLmxvY2FsTmFtZSl7Y2FzZSJzdHlsZSI6Y2FzZSJzY3JpcHQiOmNhc2UidGVtcGxhdGUiOmNhc2Ugdm9pZCAwOnJldHVybiEwfX1mdW5jdGlvbiBxKGEpe2lmKHYuZG9tKXt2YXIgYj1hWzBdO2lmKGImJiJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMmJmIuYWRkZWROb2Rlcyl7Zm9yKHZhciBjPWIuYWRkZWROb2Rlc1swXTtjJiZjIT09ZG9jdW1lbnQmJiFjLmhvc3Q7KWM9Yy5wYXJlbnROb2RlO3ZhciBkPWMmJihjLlVSTHx8Yy5fVVJMfHxjLmhvc3QmJmMuaG9zdC5sb2NhbE5hbWUpfHwiIjtkPWQuc3BsaXQoIi8/Iikuc2hpZnQoKS5zcGxpdCgiLyIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoIm11dGF0aW9ucyAoJWQpIFslc10iLGEubGVuZ3RoLGR8fCIiKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7ImNoaWxkTGlzdCI9PT1hLnR5cGUmJih4KGEuYWRkZWROb2RlcyxmdW5jdGlvbihhKXtwKGEpfHxnKGEpfSkseChhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXtwKGEpfHxrKGEpfSkpfSksdi5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKX1mdW5jdGlvbiByKCl7cSh3LnRha2VSZWNvcmRzKCkpfWZ1bmN0aW9uIHMoYSl7dy5vYnNlcnZlKGEse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9ZnVuY3Rpb24gdChhKXtzKGEpfWZ1bmN0aW9uIHUoYSl7di5kb20mJmNvbnNvbGUuZ3JvdXAoInVwZ3JhZGVEb2N1bWVudDogIiwoYS5VUkx8fGEuX1VSTHx8IiIpLnNwbGl0KCIvIikucG9wKCkpLGcoYSksdi5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKX12YXIgdj13aW5kb3cubG9nRmxhZ3N8fHt9LHc9bmV3IE11dGF0aW9uT2JzZXJ2ZXIocSkseD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2Eud2F0Y2hTaGFkb3c9bixhLnVwZ3JhZGVBbGw9ZyxhLnVwZ3JhZGVTdWJ0cmVlPWYsYS5vYnNlcnZlRG9jdW1lbnQ9dCxhLnVwZ3JhZGVEb2N1bWVudD11LGEudGFrZVJlY29yZHM9cn0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIsZil7dmFyIGc9Znx8e307aWYoIWIpdGhyb3cgbmV3IEVycm9yKCJkb2N1bWVudC5yZWdpc3RlcjogZmlyc3QgYXJndW1lbnQgYG5hbWVgIG11c3Qgbm90IGJlIGVtcHR5Iik7aWYoYi5pbmRleE9mKCItIik8MCl0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyOiBmaXJzdCBhcmd1bWVudCAoJ25hbWUnKSBtdXN0IGNvbnRhaW4gYSBkYXNoICgnLScpLiBBcmd1bWVudCBwcm92aWRlZCB3YXMgJyIrU3RyaW5nKGIpKyInLiIpO2lmKGcubmFtZT1iLCFnLnByb3RvdHlwZSl0aHJvdyBuZXcgRXJyb3IoIk9wdGlvbnMgbWlzc2luZyByZXF1aXJlZCBwcm90b3R5cGUgcHJvcGVydHkiKTtyZXR1cm4gZy5saWZlY3ljbGU9Zy5saWZlY3ljbGV8fHt9LGcuYW5jZXN0cnk9YyhnLmV4dGVuZHMpLGQoZyksZShnKSxrKGcucHJvdG90eXBlKSxtKGIsZyksZy5jdG9yPW4oZyksZy5jdG9yLnByb3RvdHlwZT1nLnByb3RvdHlwZSxnLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1nLmN0b3IsYS5yZWFkeSYmYS51cGdyYWRlQWxsKGRvY3VtZW50KSxnLmN0b3J9ZnVuY3Rpb24gYyhhKXt2YXIgYj12W2FdO3JldHVybiBiP2MoYi5leHRlbmRzKS5jb25jYXQoW2JdKTpbXX1mdW5jdGlvbiBkKGEpe2Zvcih2YXIgYixjPWEuZXh0ZW5kcyxkPTA7Yj1hLmFuY2VzdHJ5W2RdO2QrKyljPWIuaXMmJmIudGFnO2EudGFnPWN8fGEubmFtZSxjJiYoYS5pcz1hLm5hbWUpfWZ1bmN0aW9uIGUoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKTtiPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKX1mb3IodmFyIGQsZT1hLnByb3RvdHlwZTtlJiZlIT09Yjspe3ZhciBkPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtlLl9fcHJvdG9fXz1kLGU9ZH19YS5uYXRpdmU9Yn1mdW5jdGlvbiBmKGEpe3JldHVybiBnKHcoYS50YWcpLGEpfWZ1bmN0aW9uIGcoYixjKXtyZXR1cm4gYy5pcyYmYi5zZXRBdHRyaWJ1dGUoImlzIixjLmlzKSxoKGIsYyksYi5fX3VwZ3JhZGVkX189ITAsYS51cGdyYWRlU3VidHJlZShiKSxqKGIpLGJ9ZnVuY3Rpb24gaChhLGIpe09iamVjdC5fX3Byb3RvX18/YS5fX3Byb3RvX189Yi5wcm90b3R5cGU6KGkoYSxiLnByb3RvdHlwZSxiLm5hdGl2ZSksYS5fX3Byb3RvX189Yi5wcm90b3R5cGUpfWZ1bmN0aW9uIGkoYSxiLGMpe2Zvcih2YXIgZD17fSxlPWI7ZSE9PWMmJmUhPT1IVE1MVW5rbm93bkVsZW1lbnQucHJvdG90eXBlOyl7Zm9yKHZhciBmLGc9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSksaD0wO2Y9Z1toXTtoKyspZFtmXXx8KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGYsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGYpKSxkW2ZdPTEpO2U9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfX1mdW5jdGlvbiBqKGEpe2EuY3JlYXRlZENhbGxiYWNrJiZhLmNyZWF0ZWRDYWxsYmFjaygpfWZ1bmN0aW9uIGsoYSl7dmFyIGI9YS5zZXRBdHRyaWJ1dGU7YS5zZXRBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxjKXtsLmNhbGwodGhpcyxhLGMsYil9O3ZhciBjPWEucmVtb3ZlQXR0cmlidXRlO2EucmVtb3ZlQXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7bC5jYWxsKHRoaXMsYSxiLGMpfX1mdW5jdGlvbiBsKGEsYixjKXt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShhKTtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmdGhpcy5nZXRBdHRyaWJ1dGUoYSkhPT1kJiZ0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhLGQpfWZ1bmN0aW9uIG0oYSxiKXt2W2FdPWJ9ZnVuY3Rpb24gbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZihhKX19ZnVuY3Rpb24gbyhhLGIpe3ZhciBjPXZbYnx8YV07cmV0dXJuIGM/bmV3IGMuY3Rvcjp3KGEpfWZ1bmN0aW9uIHAoYSl7aWYoIWEuX191cGdyYWRlZF9fJiZhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKCJpcyIpfHxhLmxvY2FsTmFtZSxjPXZbYl07cmV0dXJuIGMmJmcoYSxjKX19ZnVuY3Rpb24gcShiKXt2YXIgYz14LmNhbGwodGhpcyxiKTtyZXR1cm4gYS51cGdyYWRlQWxsKGMpLGN9YXx8KGE9d2luZG93LkN1c3RvbUVsZW1lbnRzPXtmbGFnczp7fX0pO3ZhciByPWEuZmxhZ3Mscz1Cb29sZWFuKGRvY3VtZW50LndlYmtpdFJlZ2lzdGVyfHxkb2N1bWVudC5yZWdpc3RlciksdD0hci5yZWdpc3RlciYmcztpZih0KXtkb2N1bWVudC5yZWdpc3Rlcj1kb2N1bWVudC5yZWdpc3Rlcnx8ZG9jdW1lbnQud2Via2l0UmVnaXN0ZXI7dmFyIHU9ZnVuY3Rpb24oKXt9O2EucmVnaXN0cnk9e30sYS51cGdyYWRlRWxlbWVudD11LGEud2F0Y2hTaGFkb3c9dSxhLnVwZ3JhZGU9dSxhLnVwZ3JhZGVBbGw9dSxhLnVwZ3JhZGVTdWJ0cmVlPXUsYS5vYnNlcnZlRG9jdW1lbnQ9dSxhLnVwZ3JhZGVEb2N1bWVudD11LGEudGFrZVJlY29yZHM9dX1lbHNle3ZhciB2PXt9LHc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudC5iaW5kKGRvY3VtZW50KSx4PU5vZGUucHJvdG90eXBlLmNsb25lTm9kZTtkb2N1bWVudC5yZWdpc3Rlcj1iLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQ9byxOb2RlLnByb3RvdHlwZS5jbG9uZU5vZGU9cSxhLnJlZ2lzdHJ5PXYsYS51cGdyYWRlPXB9YS5oYXNOYXRpdmU9cyxhLnVzZU5hdGl2ZT10fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmYS5nZXRBdHRyaWJ1dGUoInJlbCIpPT09Yn12YXIgYj13aW5kb3cuSFRNTEltcG9ydHM/SFRNTEltcG9ydHMuSU1QT1JUX0xJTktfVFlQRToibm9uZSIsYz17c2VsZWN0b3JzOlsibGlua1tyZWw9IitiKyJdIl0sbWFwOntsaW5rOiJwYXJzZUxpbmsifSxwYXJzZTpmdW5jdGlvbihhKXtpZighYS5fX3BhcnNlZCl7YS5fX3BhcnNlZD0hMDt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoYy5zZWxlY3RvcnMpO2QoYixmdW5jdGlvbihhKXtjW2MubWFwW2EubG9jYWxOYW1lXV0oYSl9KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoYSksQ3VzdG9tRWxlbWVudHMub2JzZXJ2ZURvY3VtZW50KGEpfX0scGFyc2VMaW5rOmZ1bmN0aW9uKGIpe2EoYikmJnRoaXMucGFyc2VJbXBvcnQoYil9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGEpe2EuY29udGVudCYmYy5wYXJzZShhLmNvbnRlbnQpfX0sZD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO0N1c3RvbUVsZW1lbnRzLnBhcnNlcj1jfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe0N1c3RvbUVsZW1lbnRzLnBhcnNlci5wYXJzZShkb2N1bWVudCksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGRvY3VtZW50KTt2YXIgYT13aW5kb3cuUGxhdGZvcm0mJlBsYXRmb3JtLmVuZE9mTWljcm90YXNrP1BsYXRmb3JtLmVuZE9mTWljcm90YXNrOnNldFRpbWVvdXQ7YShmdW5jdGlvbigpe0N1c3RvbUVsZW1lbnRzLnJlYWR5PSEwLEN1c3RvbUVsZW1lbnRzLnJlYWR5VGltZT1EYXRlLm5vdygpLHdpbmRvdy5IVE1MSW1wb3J0cyYmKEN1c3RvbUVsZW1lbnRzLmVsYXBzZWQ9Q3VzdG9tRWxlbWVudHMucmVhZHlUaW1lLUhUTUxJbXBvcnRzLnJlYWR5VGltZSksZG9jdW1lbnQuYm9keS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiV2ViQ29tcG9uZW50c1JlYWR5Iix7YnViYmxlczohMH0pKX0pfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYi5pbml0RXZlbnQoYSwhMCwhMCksYn0pLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlKWEoKTtlbHNle3ZhciBiPXdpbmRvdy5IVE1MSW1wb3J0cz8iSFRNTEltcG9ydHNMb2FkZWQiOiJET01Db250ZW50TG9hZGVkIjt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihiLGEpfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtiLnRleHRDb250ZW50PSJlbGVtZW50IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2lmKGMuaW5zZXJ0QmVmb3JlKGIsYy5maXJzdENoaWxkKSx3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe0N1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93PWEsQ3VzdG9tRWxlbWVudHMud2F0Y2hBbGxTaGFkb3dzPWE7dmFyIGQ9WyJ1cGdyYWRlQWxsIiwidXBncmFkZVN1YnRyZWUiLCJvYnNlcnZlRG9jdW1lbnQiLCJ1cGdyYWRlRG9jdW1lbnQiXSxlPXt9O2QuZm9yRWFjaChmdW5jdGlvbihhKXtlW2FdPUN1c3RvbUVsZW1lbnRzW2FdfSksZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe0N1c3RvbUVsZW1lbnRzW2FdPWZ1bmN0aW9uKGIpe3JldHVybiBlW2FdKHdyYXAoYikpfX0pfX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2UudGV4dENvbnRlbnQ9YysrLGQucHVzaChhKX12YXIgYz0wLGQ9W10sZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIiksZj13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LkpzTXV0YXRpb25PYnNlcnZlcjtuZXcgZihmdW5jdGlvbigpe2Zvcig7ZC5sZW5ndGg7KWQuc2hpZnQoKSgpfSkub2JzZXJ2ZShlLHtjaGFyYWN0ZXJEYXRhOiEwfSksYS5lbmRPZk1pY3JvdGFzaz1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2E9YXx8e307dmFyIGI9e3NoYWRvdzpmdW5jdGlvbihhKXtyZXR1cm4gYT9hLnNoYWRvd1Jvb3R8fGEud2Via2l0U2hhZG93Um9vdDp2b2lkIDB9LGNhblRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gYSYmQm9vbGVhbihhLmVsZW1lbnRGcm9tUG9pbnQpfSx0YXJnZXRpbmdTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zaGFkb3coYSk7cmV0dXJuIHRoaXMuY2FuVGFyZ2V0KGIpP2I6dm9pZCAwfSxvbGRlclNoYWRvdzpmdW5jdGlvbihhKXt2YXIgYj1hLm9sZGVyU2hhZG93Um9vdDtpZighYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yKCJzaGFkb3ciKTtjJiYoYj1jLm9sZGVyU2hhZG93Um9vdCl9cmV0dXJuIGJ9LGFsbFNoYWRvd3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9dGhpcy5zaGFkb3coYSk7YzspYi5wdXNoKGMpLGM9dGhpcy5vbGRlclNoYWRvdyhjKTtyZXR1cm4gYn0sc2VhcmNoUm9vdDpmdW5jdGlvbihhLGIsYyl7aWYoYSl7dmFyIGQsZSxmPWEuZWxlbWVudEZyb21Qb2ludChiLGMpO2ZvcihlPXRoaXMudGFyZ2V0aW5nU2hhZG93KGYpO2U7KXtpZihkPWUuZWxlbWVudEZyb21Qb2ludChiLGMpKXt2YXIgZz10aGlzLnRhcmdldGluZ1NoYWRvdyhkKTtyZXR1cm4gdGhpcy5zZWFyY2hSb290KGcsYixjKXx8ZH1lPXRoaXMub2xkZXJTaGFkb3coZSl9cmV0dXJuIGZ9fSxvd25lcjpmdW5jdGlvbihhKXtmb3IodmFyIGI9YTtiLnBhcmVudE5vZGU7KWI9Yi5wYXJlbnROb2RlO3JldHVybiBifSxmaW5kVGFyZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuY2xpZW50WCxjPWEuY2xpZW50WSxkPXRoaXMub3duZXIoYS50YXJnZXQpO3JldHVybiBkLmVsZW1lbnRGcm9tUG9pbnQoYixjKXx8KGQ9ZG9jdW1lbnQpLHRoaXMuc2VhcmNoUm9vdChkb2N1bWVudCxiLGMpfX07YS50YXJnZXRGaW5kaW5nPWIsYS5maW5kVGFyZ2V0PWIuZmluZFRhcmdldC5iaW5kKGIpLHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGw9YX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybidbdG91Y2gtYWN0aW9uPSInK2ErJyJdJ31mdW5jdGlvbiBiKGEpe3JldHVybiJ7IC1tcy10b3VjaC1hY3Rpb246ICIrYSsiOyB0b3VjaC1hY3Rpb246ICIrYSsiOyB9In12YXIgYz1bIm5vbmUiLCJhdXRvIiwicGFuLXgiLCJwYW4teSIse3J1bGU6InBhbi14IHBhbi15IixzZWxlY3RvcnM6WyJwYW4teCBwYW4teSIsInBhbi15IHBhbi14Il19XSxkPSIiO2MuZm9yRWFjaChmdW5jdGlvbihjKXtkKz1TdHJpbmcoYyk9PT1jP2EoYykrYihjKTpjLnNlbGVjdG9ycy5tYXAoYSkrYihjLnJ1bGUpfSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtlLnRleHRDb250ZW50PWQsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChlKX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7Yj1ifHx7fTt2YXIgZT1iLmJ1dHRvbnM7aWYodm9pZCAwPT09ZSlzd2l0Y2goYi53aGljaCl7Y2FzZSAxOmU9MTticmVhaztjYXNlIDI6ZT00O2JyZWFrO2Nhc2UgMzplPTI7YnJlYWs7ZGVmYXVsdDplPTB9dmFyIGY7aWYoYylmPW5ldyBNb3VzZUV2ZW50KGEsYik7ZWxzZXtmPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7dmFyIGc9e2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMSx2aWV3Om51bGwsZGV0YWlsOm51bGwsc2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfTtPYmplY3Qua2V5cyhnKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EgaW4gYiYmKGdbYV09YlthXSl9KSxmLmluaXRNb3VzZUV2ZW50KGEsZy5idWJibGVzLGcuY2FuY2VsYWJsZSxnLnZpZXcsZy5kZXRhaWwsZy5zY3JlZW5YLGcuc2NyZWVuWSxnLmNsaWVudFgsZy5jbGllbnRZLGcuY3RybEtleSxnLmFsdEtleSxnLnNoaWZ0S2V5LGcubWV0YUtleSxnLmJ1dHRvbixnLnJlbGF0ZWRUYXJnZXQpfWR8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCJidXR0b25zIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9LGVudW1lcmFibGU6ITB9KTt2YXIgaD0wO3JldHVybiBoPWIucHJlc3N1cmU/Yi5wcmVzc3VyZTplPy41OjAsT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZix7cG9pbnRlcklkOnt2YWx1ZTpiLnBvaW50ZXJJZHx8MCxlbnVtZXJhYmxlOiEwfSx3aWR0aDp7dmFsdWU6Yi53aWR0aHx8MCxlbnVtZXJhYmxlOiEwfSxoZWlnaHQ6e3ZhbHVlOmIuaGVpZ2h0fHwwLGVudW1lcmFibGU6ITB9LHByZXNzdXJlOnt2YWx1ZTpoLGVudW1lcmFibGU6ITB9LHRpbHRYOnt2YWx1ZTpiLnRpbHRYfHwwLGVudW1lcmFibGU6ITB9LHRpbHRZOnt2YWx1ZTpiLnRpbHRZfHwwLGVudW1lcmFibGU6ITB9LHBvaW50ZXJUeXBlOnt2YWx1ZTpiLnBvaW50ZXJUeXBlfHwiIixlbnVtZXJhYmxlOiEwfSxod1RpbWVzdGFtcDp7dmFsdWU6Yi5od1RpbWVzdGFtcHx8MCxlbnVtZXJhYmxlOiEwfSxpc1ByaW1hcnk6e3ZhbHVlOmIuaXNQcmltYXJ5fHwhMSxlbnVtZXJhYmxlOiEwfX0pLGZ9dmFyIGM9ITEsZD0hMTt0cnl7dmFyIGU9bmV3IE1vdXNlRXZlbnQoImNsaWNrIix7YnV0dG9uczoxfSk7Yz0hMCxkPTE9PT1lLmJ1dHRvbnN9Y2F0Y2goZil7fWEuUG9pbnRlckV2ZW50fHwoYS5Qb2ludGVyRXZlbnQ9Yil9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3RoaXMuaWRzPVtdLHRoaXMucG9pbnRlcnM9W119Yi5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuaWRzLmluZGV4T2YoYSk7Yz4tMT90aGlzLnBvaW50ZXJzW2NdPWI6KHRoaXMuaWRzLnB1c2goYSksdGhpcy5wb2ludGVycy5wdXNoKGIpKX0saGFzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlkcy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmlkcy5pbmRleE9mKGEpO2I+LTEmJih0aGlzLmlkcy5zcGxpY2UoYiwxKSx0aGlzLnBvaW50ZXJzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaWRzLmluZGV4T2YoYSk7cmV0dXJuIHRoaXMucG9pbnRlcnNbYl19LGdldCBzaXplKCl7cmV0dXJuIHRoaXMucG9pbnRlcnMubGVuZ3RofSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuaWRzLmxlbmd0aD0wLHRoaXMucG9pbnRlcnMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLmlkcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLnBvaW50ZXJzW2RdLHRoaXMpfSx0aGlzKX19LGEuUG9pbnRlck1hcD13aW5kb3cuTWFwJiZNYXAucHJvdG90eXBlLmZvckVhY2g/TWFwOmJ9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpO3ZhciBTaWRlVGFibGU7InVuZGVmaW5lZCIhPXR5cGVvZiBXZWFrTWFwJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3gvIik8MD9TaWRlVGFibGU9V2Vha01hcDohZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1EYXRlLm5vdygpJTFlOTtTaWRlVGFibGU9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhiKysgKyJfXyIpfSxTaWRlVGFibGUucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYixjKXt2YXIgZD1iW3RoaXMubmFtZV07ZCYmZFswXT09PWI/ZFsxXT1jOmEoYix0aGlzLm5hbWUse3ZhbHVlOltiLGNdLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4oYj1hW3RoaXMubmFtZV0pJiZiWzBdPT09YT9iWzFdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX19KCksZnVuY3Rpb24oYSl7dmFyIGI9e3RhcmdldHM6bmV3IFNpZGVUYWJsZSxoYW5kbGVkRXZlbnRzOm5ldyBTaWRlVGFibGUscG9pbnRlcm1hcDpuZXcgYS5Qb2ludGVyTWFwLGV2ZW50TWFwOnt9LGV2ZW50U291cmNlczp7fSxldmVudFNvdXJjZUxpc3Q6W10scmVnaXN0ZXJTb3VyY2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLGQ9Yy5ldmVudHM7ZCYmKGQuZm9yRWFjaChmdW5jdGlvbihhKXtjW2FdJiYodGhpcy5ldmVudE1hcFthXT1jW2FdLmJpbmQoYykpfSx0aGlzKSx0aGlzLmV2ZW50U291cmNlc1thXT1jLHRoaXMuZXZlbnRTb3VyY2VMaXN0LnB1c2goYykpfSxyZWdpc3RlcjpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmV2ZW50U291cmNlTGlzdC5sZW5ndGgsZD0wO2M+ZCYmKGI9dGhpcy5ldmVudFNvdXJjZUxpc3RbZF0pO2QrKyliLnJlZ2lzdGVyLmNhbGwoYixhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmV2ZW50U291cmNlTGlzdC5sZW5ndGgsZD0wO2M+ZCYmKGI9dGhpcy5ldmVudFNvdXJjZUxpc3RbZF0pO2QrKyliLnVucmVnaXN0ZXIuY2FsbChiLGEpfSxkb3duOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJwb2ludGVyZG93biIsYSl9LG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJtb3ZlIixhKX0sdXA6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJ1cCIsYSl9LGVudGVyOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMSx0aGlzLmZpcmVFdmVudCgicG9pbnRlcmVudGVyIixhKX0sbGVhdmU6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSExLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVybGVhdmUiLGEpfSxvdmVyOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcm92ZXIiLGEpfSxvdXQ6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSEwLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyb3V0IixhKX0sY2FuY2VsOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJwb2ludGVyY2FuY2VsIixhKX0sbGVhdmVPdXQ6ZnVuY3Rpb24oYSl7YS50YXJnZXQuY29udGFpbnMoYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5sZWF2ZShhKSx0aGlzLm91dChhKX0sZW50ZXJPdmVyOmZ1bmN0aW9uKGEpe2EudGFyZ2V0LmNvbnRhaW5zKGEucmVsYXRlZFRhcmdldCl8fHRoaXMuZW50ZXIoYSksdGhpcy5vdmVyKGEpfSxldmVudEhhbmRsZXI6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaGFuZGxlZEV2ZW50cy5nZXQoYSkpe3ZhciBiPWEudHlwZSxjPXRoaXMuZXZlbnRNYXAmJnRoaXMuZXZlbnRNYXBbYl07YyYmYyhhKSx0aGlzLmhhbmRsZWRFdmVudHMuc2V0KGEsITApfX0sbGlzdGVuOmZ1bmN0aW9uKGEsYil7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe3RoaXMuYWRkRXZlbnQoYSxiKX0sdGhpcyl9LHVubGlzdGVuOmZ1bmN0aW9uKGEsYil7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe3RoaXMucmVtb3ZlRXZlbnQoYSxiKX0sdGhpcyl9LGFkZEV2ZW50OmZ1bmN0aW9uKGEsYil7YS5hZGRFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxyZW1vdmVFdmVudDpmdW5jdGlvbihhLGIpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLHRoaXMuYm91bmRIYW5kbGVyKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IFBvaW50ZXJFdmVudChhLGIpO3JldHVybiB0aGlzLnRhcmdldHMuc2V0KGMsdGhpcy50YXJnZXRzLmdldChiKXx8Yi50YXJnZXQpLGN9LGZpcmVFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubWFrZUV2ZW50KGEsYik7cmV0dXJuIHRoaXMuZGlzcGF0Y2hFdmVudChjKX0sY2xvbmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYj17fTtmb3IodmFyIGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9LGdldFRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jYXB0dXJlSW5mbyYmdGhpcy5jYXB0dXJlSW5mby5pZD09PWEucG9pbnRlcklkP3RoaXMuY2FwdHVyZUluZm8udGFyZ2V0OnRoaXMudGFyZ2V0cy5nZXQoYSl9LHNldENhcHR1cmU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhcHR1cmVJbmZvJiZ0aGlzLnJlbGVhc2VDYXB0dXJlKHRoaXMuY2FwdHVyZUluZm8uaWQpLHRoaXMuY2FwdHVyZUluZm89e2lkOmEsdGFyZ2V0OmJ9O3ZhciBjPW5ldyBQb2ludGVyRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIix7YnViYmxlczohMH0pO3RoaXMuaW1wbGljaXRSZWxlYXNlPXRoaXMucmVsZWFzZUNhcHR1cmUuYmluZCh0aGlzLGEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJjYW5jZWwiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSx0aGlzLnRhcmdldHMuc2V0KGMsYiksdGhpcy5hc3luY0Rpc3BhdGNoRXZlbnQoYyl9LHJlbGVhc2VDYXB0dXJlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuY2FwdHVyZUluZm8mJnRoaXMuY2FwdHVyZUluZm8uaWQ9PT1hKXt2YXIgYj1uZXcgUG9pbnRlckV2ZW50KCJsb3N0cG9pbnRlcmNhcHR1cmUiLHtidWJibGVzOiEwfSksYz10aGlzLmNhcHR1cmVJbmZvLnRhcmdldDt0aGlzLmNhcHR1cmVJbmZvPW51bGwsZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIix0aGlzLmltcGxpY2l0UmVsZWFzZSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcmNhbmNlbCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLHRoaXMudGFyZ2V0cy5zZXQoYixjKSx0aGlzLmFzeW5jRGlzcGF0Y2hFdmVudChiKX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRUYXJnZXQoYSk7cmV0dXJuIGI/Yi5kaXNwYXRjaEV2ZW50KGEpOnZvaWQgMH0sYXN5bmNEaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3NldFRpbWVvdXQodGhpcy5kaXNwYXRjaEV2ZW50LmJpbmQodGhpcyxhKSwwKX19O2IuYm91bmRIYW5kbGVyPWIuZXZlbnRIYW5kbGVyLmJpbmQoYiksYS5kaXNwYXRjaGVyPWIsYS5yZWdpc3Rlcj1iLnJlZ2lzdGVyLmJpbmQoYiksYS51bnJlZ2lzdGVyPWIudW5yZWdpc3Rlci5iaW5kKGIpfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjLGQpe3RoaXMuYWRkQ2FsbGJhY2s9YS5iaW5kKGQpLHRoaXMucmVtb3ZlQ2FsbGJhY2s9Yi5iaW5kKGQpLHRoaXMuY2hhbmdlZENhbGxiYWNrPWMuYmluZChkKSxnJiYodGhpcy5vYnNlcnZlcj1uZXcgZyh0aGlzLm11dGF0aW9uV2F0Y2hlci5iaW5kKHRoaXMpKSl9dmFyIGM9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxkPUFycmF5LnByb3RvdHlwZS5tYXAuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5tYXApLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuc2xpY2UpLGY9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZpbHRlciksZz13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsaD0iW3RvdWNoLWFjdGlvbl0iLGk9e3N1YnRyZWU6ITAsY2hpbGRMaXN0OiEwLGF0dHJpYnV0ZXM6ITAsYXR0cmlidXRlT2xkVmFsdWU6ITAsYXR0cmlidXRlRmlsdGVyOlsidG91Y2gtYWN0aW9uIl19O2IucHJvdG90eXBlPXt3YXRjaFN1YnRyZWU6ZnVuY3Rpb24oYil7YS50YXJnZXRGaW5kaW5nLmNhblRhcmdldChiKSYmdGhpcy5vYnNlcnZlci5vYnNlcnZlKGIsaSl9LGVuYWJsZU9uU3VidHJlZTpmdW5jdGlvbihhKXt0aGlzLndhdGNoU3VidHJlZShhKSxhPT09ZG9jdW1lbnQmJiJjb21wbGV0ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlP3RoaXMuaW5zdGFsbE9uTG9hZCgpOnRoaXMuaW5zdGFsbE5ld1N1YnRyZWUoYSl9LGluc3RhbGxOZXdTdWJ0cmVlOmZ1bmN0aW9uKGEpe2ModGhpcy5maW5kRWxlbWVudHMoYSksdGhpcy5hZGRFbGVtZW50LHRoaXMpfSxmaW5kRWxlbWVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoaCk6W119LHJlbW92ZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVDYWxsYmFjayhhKX0sYWRkRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLmFkZENhbGxiYWNrKGEpfSxlbGVtZW50Q2hhbmdlZDpmdW5jdGlvbihhLGIpe3RoaXMuY2hhbmdlZENhbGxiYWNrKGEsYil9LGNvbmNhdExpc3RzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29uY2F0KGUoYikpfSxpbnN0YWxsT25Mb2FkOmZ1bmN0aW9uKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsdGhpcy5pbnN0YWxsTmV3U3VidHJlZS5iaW5kKHRoaXMsZG9jdW1lbnQpKX0saXNFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREV9LGZsYXR0ZW5NdXRhdGlvblRyZWU6ZnVuY3Rpb24oYSl7dmFyIGI9ZChhLHRoaXMuZmluZEVsZW1lbnRzLHRoaXMpO3JldHVybiBiLnB1c2goZihhLHRoaXMuaXNFbGVtZW50KSksYi5yZWR1Y2UodGhpcy5jb25jYXRMaXN0cyxbXSl9LG11dGF0aW9uV2F0Y2hlcjpmdW5jdGlvbihhKXthLmZvckVhY2godGhpcy5tdXRhdGlvbkhhbmRsZXIsdGhpcyl9LG11dGF0aW9uSGFuZGxlcjpmdW5jdGlvbihhKXtpZigiY2hpbGRMaXN0Ij09PWEudHlwZSl7dmFyIGI9dGhpcy5mbGF0dGVuTXV0YXRpb25UcmVlKGEuYWRkZWROb2Rlcyk7Yi5mb3JFYWNoKHRoaXMuYWRkRWxlbWVudCx0aGlzKTt2YXIgYz10aGlzLmZsYXR0ZW5NdXRhdGlvblRyZWUoYS5yZW1vdmVkTm9kZXMpO2MuZm9yRWFjaCh0aGlzLnJlbW92ZUVsZW1lbnQsdGhpcyl9ZWxzZSJhdHRyaWJ1dGVzIj09PWEudHlwZSYmdGhpcy5lbGVtZW50Q2hhbmdlZChhLnRhcmdldCxhLm9sZFZhbHVlKX19LGd8fChiLnByb3RvdHlwZS53YXRjaFN1YnRyZWU9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oIlBvaW50ZXJFdmVudHNQb2x5ZmlsbDogTXV0YXRpb25PYnNlcnZlcnMgbm90IGZvdW5kLCB0b3VjaC1hY3Rpb24gd2lsbCBub3QgYmUgZHluYW1pY2FsbHkgZGV0ZWN0ZWQiKX0pLGEuSW5zdGFsbGVyPWJ9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPWIucG9pbnRlcm1hcCxkPTI1LGU9e1BPSU5URVJfSUQ6MSxQT0lOVEVSX1RZUEU6Im1vdXNlIixldmVudHM6WyJtb3VzZWRvd24iLCJtb3VzZW1vdmUiLCJtb3VzZXVwIiwibW91c2VvdmVyIiwibW91c2VvdXQiXSxyZWdpc3RlcjpmdW5jdGlvbihhKXtiLmxpc3RlbihhLHRoaXMuZXZlbnRzKQp9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sbGFzdFRvdWNoZXM6W10saXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmxhc3RUb3VjaGVzLGU9YS5jbGllbnRYLGY9YS5jbGllbnRZLGc9MCxoPWMubGVuZ3RoO2g+ZyYmKGI9Y1tnXSk7ZysrKXt2YXIgaT1NYXRoLmFicyhlLWIueCksaj1NYXRoLmFicyhmLWIueSk7aWYoZD49aSYmZD49ailyZXR1cm4hMH19LHByZXBhcmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYz1iLmNsb25lRXZlbnQoYSk7cmV0dXJuIGMucG9pbnRlcklkPXRoaXMuUE9JTlRFUl9JRCxjLmlzUHJpbWFyeT0hMCxjLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFLGN9LG1vdXNlZG93bjpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgZD1jLmhhcyh0aGlzLlBPSU5URVJfSUQpO2QmJnRoaXMuY2FuY2VsKGEpO3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGEpO2Muc2V0KHRoaXMuUE9JTlRFUl9JRCxhKSxiLmRvd24oZSl9fSxtb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5tb3ZlKGMpfX0sbW91c2V1cDpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgZD1jLmdldCh0aGlzLlBPSU5URVJfSUQpO2lmKGQmJmQuYnV0dG9uPT09YS5idXR0b24pe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IudXAoZSksdGhpcy5jbGVhbnVwTW91c2UoKX19fSxtb3VzZW92ZXI6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5lbnRlck92ZXIoYyl9fSxtb3VzZW91dDpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmxlYXZlT3V0KGMpfX0sY2FuY2VsOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuY2FuY2VsKGMpLHRoaXMuY2xlYW51cE1vdXNlKCl9LGNsZWFudXBNb3VzZTpmdW5jdGlvbigpe2MuZGVsZXRlKHRoaXMuUE9JTlRFUl9JRCl9fTthLm1vdXNlRXZlbnRzPWV9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiLGM9YS5kaXNwYXRjaGVyLGQ9YS5maW5kVGFyZ2V0LGU9YS50YXJnZXRGaW5kaW5nLmFsbFNoYWRvd3MuYmluZChhLnRhcmdldEZpbmRpbmcpLGY9Yy5wb2ludGVybWFwLGc9QXJyYXkucHJvdG90eXBlLm1hcC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLm1hcCksaD0yNTAwLGk9MjAwLGo9InRvdWNoLWFjdGlvbiIsaz0ic3RyaW5nIj09dHlwZW9mIGRvY3VtZW50LmhlYWQuc3R5bGUudG91Y2hBY3Rpb24sbD17c2Nyb2xsVHlwZTpuZXcgU2lkZVRhYmxlLGV2ZW50czpbInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIl0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7az9jLmxpc3RlbihhLHRoaXMuZXZlbnRzKTpiLmVuYWJsZU9uU3VidHJlZShhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtrJiZjLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxlbGVtZW50QWRkZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoaiksZD10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGIpO2QmJih0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksYy5saXN0ZW4oYSx0aGlzLmV2ZW50cyksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKSxjLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcykpfSxlbGVtZW50UmVtb3ZlZDpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbFR5cGUuZGVsZXRlKGEpLGMudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5kZWxldGUoYSksYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcyl9LGVsZW1lbnRDaGFuZ2VkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoaiksZD10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGMpLGY9dGhpcy50b3VjaEFjdGlvblRvU2Nyb2xsVHlwZShiKTtkJiZmPyh0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKX0sdGhpcykpOmY/dGhpcy5lbGVtZW50UmVtb3ZlZChhKTpkJiZ0aGlzLmVsZW1lbnRBZGRlZChhKX0sc2Nyb2xsVHlwZXM6e0VNSVRURVI6Im5vbmUiLFhTQ1JPTExFUjoicGFuLXgiLFlTQ1JPTExFUjoicGFuLXkiLFNDUk9MTEVSOi9eKD86cGFuLXggcGFuLXkpfCg/OnBhbi15IHBhbi14KXxhdXRvJC99LHRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWEsYz10aGlzLnNjcm9sbFR5cGVzO3JldHVybiJub25lIj09PWI/Im5vbmUiOmI9PT1jLlhTQ1JPTExFUj8iWCI6Yj09PWMuWVNDUk9MTEVSPyJZIjpjLlNDUk9MTEVSLmV4ZWMoYik/IlhZIjp2b2lkIDB9LFBPSU5URVJfVFlQRToidG91Y2giLGZpcnN0VG91Y2g6bnVsbCxpc1ByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5maXJzdFRvdWNoPT09YS5pZGVudGlmaWVyfSxzZXRQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7bnVsbD09PXRoaXMuZmlyc3RUb3VjaCYmKHRoaXMuZmlyc3RUb3VjaD1hLmlkZW50aWZpZXIsdGhpcy5maXJzdFhZPXtYOmEuY2xpZW50WCxZOmEuY2xpZW50WX0sdGhpcy5zY3JvbGxpbmc9ITEsdGhpcy5jYW5jZWxSZXNldENsaWNrQ291bnQoKSl9LHJlbW92ZVByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXt0aGlzLmlzUHJpbWFyeVRvdWNoKGEpJiYodGhpcy5maXJzdFRvdWNoPW51bGwsdGhpcy5maXJzdFhZPW51bGwsdGhpcy5yZXNldENsaWNrQ291bnQoKSl9LGNsaWNrQ291bnQ6MCxyZXNldElkOm51bGwscmVzZXRDbGlja0NvdW50OmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oKXt0aGlzLmNsaWNrQ291bnQ9MCx0aGlzLnJlc2V0SWQ9bnVsbH0uYmluZCh0aGlzKTt0aGlzLnJlc2V0SWQ9c2V0VGltZW91dChhLGkpfSxjYW5jZWxSZXNldENsaWNrQ291bnQ6ZnVuY3Rpb24oKXt0aGlzLnJlc2V0SWQmJmNsZWFyVGltZW91dCh0aGlzLnJlc2V0SWQpfSx0b3VjaFRvUG9pbnRlcjpmdW5jdGlvbihhKXt2YXIgYj1jLmNsb25lRXZlbnQoYSk7cmV0dXJuIGIucG9pbnRlcklkPWEuaWRlbnRpZmllcisyLGIudGFyZ2V0PWQoYiksYi5idWJibGVzPSEwLGIuY2FuY2VsYWJsZT0hMCxiLmRldGFpbD10aGlzLmNsaWNrQ291bnQsYi5idXR0b249MCxiLmJ1dHRvbnM9MSxiLndpZHRoPWEud2Via2l0UmFkaXVzWHx8YS5yYWRpdXNYfHwwLGIuaGVpZ2h0PWEud2Via2l0UmFkaXVzWXx8YS5yYWRpdXNZfHwwLGIucHJlc3N1cmU9YS53ZWJraXRGb3JjZXx8YS5mb3JjZXx8LjUsYi5pc1ByaW1hcnk9dGhpcy5pc1ByaW1hcnlUb3VjaChhKSxiLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFLGJ9LHByb2Nlc3NUb3VjaGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5jaGFuZ2VkVG91Y2hlcyxkPWcoYyx0aGlzLnRvdWNoVG9Qb2ludGVyLHRoaXMpO2QuZm9yRWFjaChiLHRoaXMpfSxzaG91bGRTY3JvbGw6ZnVuY3Rpb24oYSl7aWYodGhpcy5maXJzdFhZKXt2YXIgYixjPXRoaXMuc2Nyb2xsVHlwZS5nZXQoYS5jdXJyZW50VGFyZ2V0KTtpZigibm9uZSI9PT1jKWI9ITE7ZWxzZSBpZigiWFkiPT09YyliPSEwO2Vsc2V7dmFyIGQ9YS5jaGFuZ2VkVG91Y2hlc1swXSxlPWMsZj0iWSI9PT1jPyJYIjoiWSIsZz1NYXRoLmFicyhkWyJjbGllbnQiK2VdLXRoaXMuZmlyc3RYWVtlXSksaD1NYXRoLmFicyhkWyJjbGllbnQiK2ZdLXRoaXMuZmlyc3RYWVtmXSk7Yj1nPj1ofXJldHVybiB0aGlzLmZpcnN0WFk9bnVsbCxifX0sZmluZFRvdWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGM9YVtkXSk7ZCsrKWlmKGMuaWRlbnRpZmllcj09PWIpcmV0dXJuITB9LHZhY3V1bVRvdWNoZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YS50b3VjaGVzO2lmKGYuc2l6ZT49Yi5sZW5ndGgpe3ZhciBjPVtdO2YuZm9yRWFjaChmdW5jdGlvbihhLGQpe2lmKDEhPT1hJiYhdGhpcy5maW5kVG91Y2goYixhLTIpKXt2YXIgZT1kLm91dDtjLnB1c2godGhpcy50b3VjaFRvUG9pbnRlcihlKSl9fSx0aGlzKSxjLmZvckVhY2godGhpcy5jYW5jZWxPdXQsdGhpcyl9fSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMudmFjdXVtVG91Y2hlcyhhKSx0aGlzLnNldFByaW1hcnlUb3VjaChhLmNoYW5nZWRUb3VjaGVzWzBdKSx0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnNjcm9sbGluZ3x8KHRoaXMuY2xpY2tDb3VudCsrLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLm92ZXJEb3duKSl9LG92ZXJEb3duOmZ1bmN0aW9uKGEpe2Yuc2V0KGEucG9pbnRlcklkLHt0YXJnZXQ6YS50YXJnZXQsb3V0OmEsb3V0VGFyZ2V0OmEudGFyZ2V0fSksYy5vdmVyKGEpLGMuZG93bihhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsaW5nfHwodGhpcy5zaG91bGRTY3JvbGwoYSk/KHRoaXMuc2Nyb2xsaW5nPSEwLHRoaXMudG91Y2hjYW5jZWwoYSkpOihhLnByZXZlbnREZWZhdWx0KCksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZU92ZXJPdXQpKSl9LG1vdmVPdmVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEsZD1mLmdldChiLnBvaW50ZXJJZCk7aWYoZCl7dmFyIGU9ZC5vdXQsZz1kLm91dFRhcmdldDtjLm1vdmUoYiksZSYmZyE9PWIudGFyZ2V0JiYoZS5yZWxhdGVkVGFyZ2V0PWIudGFyZ2V0LGIucmVsYXRlZFRhcmdldD1nLGUudGFyZ2V0PWcsYi50YXJnZXQ/KGMubGVhdmVPdXQoZSksYy5lbnRlck92ZXIoYikpOihiLnRhcmdldD1nLGIucmVsYXRlZFRhcmdldD1udWxsLHRoaXMuY2FuY2VsT3V0KGIpKSksZC5vdXQ9YixkLm91dFRhcmdldD1iLnRhcmdldH19LHRvdWNoZW5kOmZ1bmN0aW9uKGEpe3RoaXMuZGVkdXBTeW50aE1vdXNlKGEpLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLnVwT3V0KX0sdXBPdXQ6ZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxpbmd8fChjLnVwKGEpLGMub3V0KGEpKSx0aGlzLmNsZWFuVXBQb2ludGVyKGEpfSx0b3VjaGNhbmNlbDpmdW5jdGlvbihhKXt0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy5jYW5jZWxPdXQpfSxjYW5jZWxPdXQ6ZnVuY3Rpb24oYSl7Yy5jYW5jZWwoYSksYy5vdXQoYSksdGhpcy5jbGVhblVwUG9pbnRlcihhKX0sY2xlYW5VcFBvaW50ZXI6ZnVuY3Rpb24oYSl7Zi5kZWxldGUoYS5wb2ludGVySWQpLHRoaXMucmVtb3ZlUHJpbWFyeVRvdWNoKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxkPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChkKSl7dmFyIGU9e3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZfTtjLnB1c2goZSk7dmFyIGY9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZSk7c2V0VGltZW91dChmLGgpfX19O2t8fChiPW5ldyBhLkluc3RhbGxlcihsLmVsZW1lbnRBZGRlZCxsLmVsZW1lbnRSZW1vdmVkLGwuZWxlbWVudENoYW5nZWQsbCkpLGEudG91Y2hFdmVudHM9bH0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyT3V0IiwiTVNQb2ludGVyT3ZlciIsIk1TUG9pbnRlckNhbmNlbCIsIk1TR290UG9pbnRlckNhcHR1cmUiLCJNU0xvc3RQb2ludGVyQ2FwdHVyZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LFBPSU5URVJfVFlQRVM6WyIiLCJ1bmF2YWlsYWJsZSIsInRvdWNoIiwicGVuIiwibW91c2UiXSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9YTtyZXR1cm4gZCYmKGM9Yi5jbG9uZUV2ZW50KGEpLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEVTW2EucG9pbnRlclR5cGVdKSxjfSxjbGVhbnVwOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEpfSxNU1BvaW50ZXJEb3duOmZ1bmN0aW9uKGEpe2Muc2V0KGEucG9pbnRlcklkLGEpO3ZhciBkPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZG93bihkKX0sTVNQb2ludGVyTW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9LE1TUG9pbnRlclVwOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IudXAoYyksdGhpcy5jbGVhbnVwKGEucG9pbnRlcklkKX0sTVNQb2ludGVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9LE1TUG9pbnRlck92ZXI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5lbnRlck92ZXIoYyl9LE1TUG9pbnRlckNhbmNlbDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmNhbmNlbChjKSx0aGlzLmNsZWFudXAoYS5wb2ludGVySWQpfSxNU0xvc3RQb2ludGVyQ2FwdHVyZTpmdW5jdGlvbihhKXt2YXIgYz1iLm1ha2VFdmVudCgibG9zdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9LE1TR290UG9pbnRlckNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5tYWtlRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9fTthLm1zRXZlbnRzPWV9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcjtpZih2b2lkIDA9PT13aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKXtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93Lm5hdmlnYXRvciwicG9pbnRlckVuYWJsZWQiLHt2YWx1ZTohMCxlbnVtZXJhYmxlOiEwfSksd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKXt2YXIgYz13aW5kb3cubmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHM7T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5uYXZpZ2F0b3IsIm1heFRvdWNoUG9pbnRzIix7dmFsdWU6YyxlbnVtZXJhYmxlOiEwfSksYi5yZWdpc3RlclNvdXJjZSgibXMiLGEubXNFdmVudHMpfWVsc2UgYi5yZWdpc3RlclNvdXJjZSgibW91c2UiLGEubW91c2VFdmVudHMpLHZvaWQgMCE9PXdpbmRvdy5vbnRvdWNoc3RhcnQmJmIucmVnaXN0ZXJTb3VyY2UoInRvdWNoIixhLnRvdWNoRXZlbnRzKTtiLnJlZ2lzdGVyKGRvY3VtZW50KX19KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7aWYoIWUucG9pbnRlcm1hcC5oYXMoYSkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkUG9pbnRlcklkIil9dmFyIGMsZCxlPWEuZGlzcGF0Y2hlcixmPXdpbmRvdy5uYXZpZ2F0b3I7Zi5tc1BvaW50ZXJFbmFibGVkPyhjPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1NldFBvaW50ZXJDYXB0dXJlKGEpfSxkPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1JlbGVhc2VQb2ludGVyQ2FwdHVyZShhKX0pOihjPWZ1bmN0aW9uKGEpe2IoYSksZS5zZXRDYXB0dXJlKGEsdGhpcyl9LGQ9ZnVuY3Rpb24oYSl7YihhKSxlLnJlbGVhc2VDYXB0dXJlKGEsdGhpcyl9KSxFbGVtZW50LnByb3RvdHlwZS5zZXRQb2ludGVyQ2FwdHVyZXx8T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRWxlbWVudC5wcm90b3R5cGUse3NldFBvaW50ZXJDYXB0dXJlOnt2YWx1ZTpjfSxyZWxlYXNlUG9pbnRlckNhcHR1cmU6e3ZhbHVlOmR9fSl9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLFBvaW50ZXJHZXN0dXJlRXZlbnQucHJvdG90eXBlLnByZXZlbnRUYXA9ZnVuY3Rpb24oKXt0aGlzLnRhcFByZXZlbnRlZD0hMH0sZnVuY3Rpb24oYSl7YT1hfHx7fSxhLnV0aWxzPXtMQ0E6e2ZpbmQ6ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gYTtpZihhLmNvbnRhaW5zKXtpZihhLmNvbnRhaW5zKGIpKXJldHVybiBhO2lmKGIuY29udGFpbnMoYSkpcmV0dXJuIGJ9dmFyIGM9dGhpcy5kZXB0aChhKSxkPXRoaXMuZGVwdGgoYiksZT1jLWQ7Zm9yKGU+MD9hPXRoaXMud2FsayhhLGUpOmI9dGhpcy53YWxrKGIsLWUpO2EmJmImJmEhPT1iOylhPXRoaXMud2FsayhhLDEpLGI9dGhpcy53YWxrKGIsMSk7cmV0dXJuIGF9LHdhbGs6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7YysrKWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxkZXB0aDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDthOyliKyssYT1hLnBhcmVudE5vZGU7cmV0dXJuIGJ9fX0sYS5maW5kTENBPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEudXRpbHMuTENBLmZpbmQoYixjKX0sd2luZG93LlBvaW50ZXJHZXN0dXJlcz1hfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKTt2YXIgU2lkZVRhYmxlOyJ1bmRlZmluZWQiIT10eXBlb2YgV2Vha01hcCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94LyIpPDA/U2lkZVRhYmxlPVdlYWtNYXA6IWZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9RGF0ZS5ub3coKSUxZTk7U2lkZVRhYmxlPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYisrICsiX18iKX0sU2lkZVRhYmxlLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7dmFyIGQ9Ylt0aGlzLm5hbWVdO2QmJmRbMF09PT1iP2RbMV09YzphKGIsdGhpcy5uYW1lLHt2YWx1ZTpbYixjXSx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuKGI9YVt0aGlzLm5hbWVdKSYmYlswXT09PWE/YlsxXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLmlkcz1bXSx0aGlzLnBvaW50ZXJzPVtdfWIucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmlkcy5pbmRleE9mKGEpO2M+LTE/dGhpcy5wb2ludGVyc1tjXT1iOih0aGlzLmlkcy5wdXNoKGEpLHRoaXMucG9pbnRlcnMucHVzaChiKSl9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pZHMuaW5kZXhPZihhKT4tMX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pZHMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5pZHMuc3BsaWNlKGIsMSksdGhpcy5wb2ludGVycy5zcGxpY2UoYiwxKSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmlkcy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnBvaW50ZXJzW2JdfSxnZXQgc2l6ZSgpe3JldHVybiB0aGlzLnBvaW50ZXJzLmxlbmd0aH0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmlkcy5sZW5ndGg9MCx0aGlzLnBvaW50ZXJzLmxlbmd0aD0wfX0sd2luZG93Lk1hcCYmKGI9d2luZG93Lk1hcCksYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPXtoYW5kbGVkRXZlbnRzOm5ldyBTaWRlVGFibGUsdGFyZ2V0czpuZXcgU2lkZVRhYmxlLGhhbmRsZXJzOnt9LHJlY29nbml6ZXJzOnt9LGV2ZW50czp7fSxyZWdpc3RlclJlY29nbml6ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iO3RoaXMucmVjb2duaXplcnNbYV09YyxjLmV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKGNbYV0pe3RoaXMuZXZlbnRzW2FdPSEwO3ZhciBiPWNbYV0uYmluZChjKTt0aGlzLmFkZEhhbmRsZXIoYSxiKX19LHRoaXMpfSxhZGRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTt0aGlzLmhhbmRsZXJzW2NdfHwodGhpcy5oYW5kbGVyc1tjXT1bXSksdGhpcy5oYW5kbGVyc1tjXS5wdXNoKGIpfSxyZWdpc3RlclRhcmdldDpmdW5jdGlvbihhKXt0aGlzLmxpc3RlbihPYmplY3Qua2V5cyh0aGlzLmV2ZW50cyksYSl9LHVucmVnaXN0ZXJUYXJnZXQ6ZnVuY3Rpb24oYSl7dGhpcy51bmxpc3RlbihPYmplY3Qua2V5cyh0aGlzLmV2ZW50cyksYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGI9YS50eXBlLGM9dGhpcy5oYW5kbGVyc1tiXTtjJiZ0aGlzLm1ha2VRdWV1ZShjLGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxtYWtlUXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNsb25lRXZlbnQoYik7c2V0VGltZW91dCh0aGlzLnJ1blF1ZXVlLmJpbmQodGhpcyxhLGMpLDApfSxydW5RdWV1ZTpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBvaW50ZXJJZD1iLnBvaW50ZXJJZDtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspYyhiKTt0aGlzLmN1cnJlbnRQb2ludGVySWQ9MH0sbGlzdGVuOmZ1bmN0aW9uKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuYWRkRXZlbnQoYSx0aGlzLmJvdW5kSGFuZGxlciwhMSxiKX0sdGhpcyl9LHVubGlzdGVuOmZ1bmN0aW9uKGEpe2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUV2ZW50KGEsdGhpcy5ib3VuZEhhbmRsZXIsITEsaW5UYXJnZXQpfSx0aGlzKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRFdmVudExpc3RlbmVyKGEsYixjKX0scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYixjKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBQb2ludGVyR2VzdHVyZUV2ZW50KGEsYil9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYltjXT1hW2NdO3JldHVybiBifSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy50YXJnZXRzLmdldChhKTtjJiYoYy5kaXNwYXRjaEV2ZW50KGEpLGEudGFwUHJldmVudGVkJiZ0aGlzLnByZXZlbnRUYXAodGhpcy5jdXJyZW50UG9pbnRlcklkKSl9LGFzeW5jRGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KGEsYil9LmJpbmQodGhpcyk7c2V0VGltZW91dChjLDApfSxwcmV2ZW50VGFwOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVjb2duaXplcnMudGFwO2ImJmIucHJldmVudFRhcChhKX19O2IuYm91bmRIYW5kbGVyPWIuZXZlbnRIYW5kbGVyLmJpbmQoYiksYS5kaXNwYXRjaGVyPWI7dmFyIGM9W10sZD0hMTthLnJlZ2lzdGVyPWZ1bmN0aW9uKGIpe2lmKGQpe3ZhciBlPXdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGw7ZSYmZS5yZWdpc3RlcihiKSxhLmRpc3BhdGNoZXIucmVnaXN0ZXJUYXJnZXQoYil9ZWxzZSBjLnB1c2goYil9LGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7ZD0hMCxjLnB1c2goZG9jdW1lbnQpLGMuZm9yRWFjaChhLnJlZ2lzdGVyKX0pfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz17SE9MRF9ERUxBWToyMDAsV0lHR0xFX1RIUkVTSE9MRDoxNixldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLGhlbGRQb2ludGVyOm51bGwsaG9sZEpvYjpudWxsLHB1bHNlOmZ1bmN0aW9uKCl7dmFyIGE9RGF0ZS5ub3coKS10aGlzLmhlbGRQb2ludGVyLnRpbWVTdGFtcCxiPXRoaXMuaGVsZD8iaG9sZHB1bHNlIjoiaG9sZCI7dGhpcy5maXJlSG9sZChiLGEpLHRoaXMuaGVsZD0hMH0sY2FuY2VsOmZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbCh0aGlzLmhvbGRKb2IpLHRoaXMuaGVsZCYmdGhpcy5maXJlSG9sZCgicmVsZWFzZSIpLHRoaXMuaGVsZD0hMSx0aGlzLmhlbGRQb2ludGVyPW51bGwsdGhpcy50YXJnZXQ9bnVsbCx0aGlzLmhvbGRKb2I9bnVsbH0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiF0aGlzLmhlbGRQb2ludGVyJiYodGhpcy5oZWxkUG9pbnRlcj1hLHRoaXMudGFyZ2V0PWEudGFyZ2V0LHRoaXMuaG9sZEpvYj1zZXRJbnRlcnZhbCh0aGlzLnB1bHNlLmJpbmQodGhpcyksdGhpcy5IT0xEX0RFTEFZKSl9LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXt0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkJiZ0aGlzLmNhbmNlbCgpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWwoKX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5oZWxkUG9pbnRlciYmdGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQ9PT1hLnBvaW50ZXJJZCl7dmFyIGI9YS5jbGllbnRYLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WCxjPWEuY2xpZW50WS10aGlzLmhlbGRQb2ludGVyLmNsaWVudFk7YipiK2MqYz50aGlzLldJR0dMRV9USFJFU0hPTEQmJnRoaXMuY2FuY2VsKCl9fSxmaXJlSG9sZDpmdW5jdGlvbihhLGMpe3ZhciBkPXtwb2ludGVyVHlwZTp0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJUeXBlfTtjJiYoZC5ob2xkVGltZT1jKTt2YXIgZT1iLm1ha2VFdmVudChhLGQpO2IuZGlzcGF0Y2hFdmVudChlLHRoaXMudGFyZ2V0KSxlLnRhcFByZXZlbnRlZCYmYi5wcmV2ZW50VGFwKHRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJob2xkIixjKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9bmV3IGEuUG9pbnRlck1hcCxkPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLFdJR0dMRV9USFJFU0hPTEQ6NCxjbGFtcERpcjpmdW5jdGlvbihhKXtyZXR1cm4gYT4wPzE6LTF9LGNhbGNQb3NpdGlvbkRlbHRhOmZ1bmN0aW9uKGEsYil7dmFyIGM9MCxkPTA7cmV0dXJuIGEmJmImJihjPWIucGFnZVgtYS5wYWdlWCxkPWIucGFnZVktYS5wYWdlWSkse3g6Yyx5OmR9fSxmaXJlVHJhY2s6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQsZj10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUuZG93bkV2ZW50LGMpLGc9dGhpcy5jYWxjUG9zaXRpb25EZWx0YShlLmxhc3RNb3ZlRXZlbnQsYyk7Zy54JiYoZS54RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy54KSksZy55JiYoZS55RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy55KSk7dmFyIGg9e2R4OmYueCxkeTpmLnksZGR4OmcueCxkZHk6Zy55LGNsaWVudFg6Yy5jbGllbnRYLGNsaWVudFk6Yy5jbGllbnRZLHBhZ2VYOmMucGFnZVgscGFnZVk6Yy5wYWdlWSxzY3JlZW5YOmMuc2NyZWVuWCxzY3JlZW5ZOmMuc2NyZWVuWSx4RGlyZWN0aW9uOmUueERpcmVjdGlvbix5RGlyZWN0aW9uOmUueURpcmVjdGlvbix0cmFja0luZm86ZS50cmFja0luZm8scG9pbnRlclR5cGU6Yy5wb2ludGVyVHlwZX07InRyYWNrZW5kIj09PWEmJihoLl9yZWxlYXNlVGFyZ2V0PWMudGFyZ2V0KTt2YXIgaT1iLm1ha2VFdmVudChhLGgpO2UubGFzdE1vdmVFdmVudD1jLGIuZGlzcGF0Y2hFdmVudChpLGUuZG93blRhcmdldCl9LHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2lmKGEuaXNQcmltYXJ5JiYoIm1vdXNlIj09PWEucG9pbnRlclR5cGU/MT09PWEuYnV0dG9uczohMCkpe3ZhciBiPXtkb3duRXZlbnQ6YSxkb3duVGFyZ2V0OmEudGFyZ2V0LHRyYWNrSW5mbzp7fSxsYXN0TW92ZUV2ZW50Om51bGwseERpcmVjdGlvbjowLHlEaXJlY3Rpb246MCx0cmFja2luZzohMX07Yy5zZXQoYS5wb2ludGVySWQsYil9fSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXt2YXIgYj1jLmdldChhLnBvaW50ZXJJZCk7aWYoYilpZihiLnRyYWNraW5nKXRoaXMuZmlyZVRyYWNrKCJ0cmFjayIsYSxiKTtlbHNle3ZhciBkPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoYi5kb3duRXZlbnQsYSksZT1kLngqZC54K2QueSpkLnk7ZT50aGlzLldJR0dMRV9USFJFU0hPTEQmJihiLnRyYWNraW5nPSEwLHRoaXMuZmlyZVRyYWNrKCJ0cmFja3N0YXJ0IixiLmRvd25FdmVudCxiKSx0aGlzLmZpcmVUcmFjaygidHJhY2siLGEsYikpfX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe3ZhciBiPWMuZ2V0KGEucG9pbnRlcklkKTtiJiYoYi50cmFja2luZyYmdGhpcy5maXJlVHJhY2soInRyYWNrZW5kIixhLGIpLGMuZGVsZXRlKGEucG9pbnRlcklkKSl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludGVydXAoYSl9fTtiLnJlZ2lzdGVyUmVjb2duaXplcigidHJhY2siLGQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz17TUlOX1ZFTE9DSVRZOi41LE1BWF9RVUVVRTo0LG1vdmVRdWV1ZTpbXSx0YXJnZXQ6bnVsbCxwb2ludGVySWQ6bnVsbCxldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYhdGhpcy5wb2ludGVySWQmJih0aGlzLnBvaW50ZXJJZD1hLnBvaW50ZXJJZCx0aGlzLnRhcmdldD1hLnRhcmdldCx0aGlzLmFkZE1vdmUoYSkpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXthLnBvaW50ZXJJZD09PXRoaXMucG9pbnRlcklkJiZ0aGlzLmFkZE1vdmUoYSl9LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXthLnBvaW50ZXJJZD09PXRoaXMucG9pbnRlcklkJiZ0aGlzLmZpcmVGbGljayhhKSx0aGlzLmNsZWFudXAoKX0scG9pbnRlcmNhbmNlbDpmdW5jdGlvbigpe3RoaXMuY2xlYW51cCgpfSxjbGVhbnVwOmZ1bmN0aW9uKCl7dGhpcy5tb3ZlUXVldWU9W10sdGhpcy50YXJnZXQ9bnVsbCx0aGlzLnBvaW50ZXJJZD1udWxsfSxhZGRNb3ZlOmZ1bmN0aW9uKGEpe3RoaXMubW92ZVF1ZXVlLmxlbmd0aD49dGhpcy5NQVhfUVVFVUUmJnRoaXMubW92ZVF1ZXVlLnNoaWZ0KCksdGhpcy5tb3ZlUXVldWUucHVzaChhKX0sZmlyZUZsaWNrOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkLGUsZixnLGgsaSxqPWEsaz10aGlzLm1vdmVRdWV1ZS5sZW5ndGgsbD0wLG09MCxuPTAsbz0wO2s+byYmKGk9dGhpcy5tb3ZlUXVldWVbb10pO28rKyljPWoudGltZVN0YW1wLWkudGltZVN0YW1wLGQ9ai5jbGllbnRYLWkuY2xpZW50WCxlPWouY2xpZW50WS1pLmNsaWVudFksZj1kL2MsZz1lL2MsaD1NYXRoLnNxcnQoZipmK2cqZyksaD5uJiYobD1mLG09ZyxuPWgpO3ZhciBwPU1hdGguYWJzKGwpPk1hdGguYWJzKG0pPyJ4IjoieSIscT10aGlzLmNhbGNBbmdsZShsLG0pO2lmKE1hdGguYWJzKG4pPj10aGlzLk1JTl9WRUxPQ0lUWSl7dmFyIHI9Yi5tYWtlRXZlbnQoImZsaWNrIix7eFZlbG9jaXR5OmwseVZlbG9jaXR5Om0sdmVsb2NpdHk6bixhbmdsZTpxLG1ham9yQXhpczpwLHBvaW50ZXJUeXBlOmEucG9pbnRlclR5cGV9KTtiLmRpc3BhdGNoRXZlbnQocix0aGlzLnRhcmdldCl9fSxjYWxjQW5nbGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMTgwKk1hdGguYXRhbjIoYixhKS9NYXRoLlBJfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoImZsaWNrIixjKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9bmV3IGEuUG9pbnRlck1hcCxkPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCIsImtleXVwIl0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiFhLnRhcFByZXZlbnRlZCYmYy5zZXQoYS5wb2ludGVySWQse3RhcmdldDphLnRhcmdldCx4OmEuY2xpZW50WCx5OmEuY2xpZW50WX0pfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2ImJmEudGFwUHJldmVudGVkJiZjLmRlbGV0ZShhLnBvaW50ZXJJZCl9fSxwb2ludGVydXA6ZnVuY3Rpb24oZCl7dmFyIGU9Yy5nZXQoZC5wb2ludGVySWQpO2lmKGUmJiFkLnRhcFByZXZlbnRlZCl7dmFyIGY9YS5maW5kTENBKGUudGFyZ2V0LGQudGFyZ2V0KTtpZihmKXt2YXIgZz1iLm1ha2VFdmVudCgidGFwIix7eDpkLmNsaWVudFgseTpkLmNsaWVudFksZGV0YWlsOmQuZGV0YWlsLHBvaW50ZXJUeXBlOmQucG9pbnRlclR5cGV9KTtiLmRpc3BhdGNoRXZlbnQoZyxmKX19Yy5kZWxldGUoZC5wb2ludGVySWQpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEucG9pbnRlcklkKX0sa2V5dXA6ZnVuY3Rpb24oYSl7dmFyIGM9YS5rZXlDb2RlO2lmKDMyPT09Yyl7dmFyIGQ9YS50YXJnZXQ7ZCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnR8fGQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50fHxiLmRpc3BhdGNoRXZlbnQoYi5tYWtlRXZlbnQoInRhcCIse3g6MCx5OjAsZGV0YWlsOjAscG9pbnRlclR5cGU6InVuYXZhaWxhYmxlIn0pLGQpfX0scHJldmVudFRhcDpmdW5jdGlvbihhKXtjLmRlbGV0ZShhKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJ0YXAiLGQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxQb2x5bWVyPXt9LGZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTthLnRleHRDb250ZW50PSJib2R5IHtvcGFjaXR5OiAwO30iO3ZhciBiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIldlYkNvbXBvbmVudHNSZWFkeSIsZnVuY3Rpb24oKXtkb2N1bWVudC5ib2R5LnN0eWxlLndlYmtpdFRyYW5zaXRpb249Im9wYWNpdHkgMC4zcyIsZG9jdW1lbnQuYm9keS5zdHlsZS5vcGFjaXR5PTF9KX0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhJiZiJiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKTtkJiYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxkKSwiZnVuY3Rpb24iPT10eXBlb2YgZC52YWx1ZSYmKGFbY10ubm9tPWMpKX0pLGF9YS5leHRlbmQ9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCl7cmV0dXJuIGE/YS5zdG9wKCk6YT1uZXcgYyh0aGlzKSxhLmdvKGIsZCksYX12YXIgYz1mdW5jdGlvbihhKXt0aGlzLmNvbnRleHQ9YX07Yy5wcm90b3R5cGU9e2dvOmZ1bmN0aW9uKGEsYil7dGhpcy5jYWxsYmFjaz1hLHRoaXMuaGFuZGxlPXNldFRpbWVvdXQodGhpcy5jb21wbGV0ZS5iaW5kKHRoaXMpLGIpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGUmJihjbGVhclRpbWVvdXQodGhpcy5oYW5kbGUpLHRoaXMuaGFuZGxlPW51bGwpfSxjb21wbGV0ZTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlJiYodGhpcy5zdG9wKCksdGhpcy5jYWxsYmFjay5jYWxsKHRoaXMuY29udGV4dCkpfX0sYS5qb2I9Yn0oUG9seW1lciksZnVuY3Rpb24oKXt2YXIgYT17fTtIVE1MRWxlbWVudC5yZWdpc3Rlcj1mdW5jdGlvbihiLGMpe2FbYl09Y30sSFRNTEVsZW1lbnQuZ2V0UHJvdG90eXBlRm9yVGFnPWZ1bmN0aW9uKGIpe3ZhciBjPWI/YVtiXTpIVE1MRWxlbWVudC5wcm90b3R5cGU7cmV0dXJuIGN8fE9iamVjdC5nZXRQcm90b3R5cGVPZihkb2N1bWVudC5jcmVhdGVFbGVtZW50KGIpKX07dmFyIGI9RXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbjtFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxCdWJibGU9ITAsYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LEhUTUxJbXBvcnRzLmltcG9ydGVyLnByZWxvYWRTZWxlY3RvcnMrPSIsIHBvbHltZXItZWxlbWVudCBsaW5rW3JlbD1zdHlsZXNoZWV0XSJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGM9Yi5jYWxsZXIsZz1jLm5vbTsiX3N1cGVyImluIGN8fChnfHwoZz1lLmNhbGwodGhpcyxjKSksZ3x8Y29uc29sZS53YXJuKCJjYWxsZWQgc3VwZXIoKSBvbiBhIG1ldGhvZCBub3QgaW5zdGFsbGVkIGRlY2xhcmF0aXZlbHkgKGhhcyBubyAubm9tIHByb3BlcnR5KSIpLGQoYyxnLGYodGhpcykpKTt2YXIgaD1jLl9zdXBlcjtpZihoKXt2YXIgaT1oW2ddO3JldHVybiJfc3VwZXIiaW4gaXx8ZChpLGcsaCksaS5hcHBseSh0aGlzLGF8fFtdKX19ZnVuY3Rpb24gYyhhLGIsYyl7Zm9yKDthJiYoIWEuaGFzT3duUHJvcGVydHkoYil8fGFbYl09PT1jKTspYT1mKGEpO3JldHVybiBhfWZ1bmN0aW9uIGQoYSxiLGQpe3JldHVybiBhLl9zdXBlcj1jKGQsYixhKSxhLl9zdXBlciYmKGEuX3N1cGVyW2JdLm5vbT1iKSxhLl9zdXBlcn1mdW5jdGlvbiBlKGEpe2NvbnNvbGUud2FybigibmFtZUluVGhpcyBjYWxsZWQiKTtmb3IodmFyIGI9dGhpcztiJiZiIT09SFRNTEVsZW1lbnQucHJvdG90eXBlOyl7Zm9yKHZhciBjLGQ9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYiksZT0wLGY9ZC5sZW5ndGg7Zj5lJiYoYz1kW2VdKTtlKyspe3ZhciBnPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKTtpZihnLnZhbHVlPT1hKXJldHVybiBjfWI9Yi5fX3Byb3RvX199fWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEuX19wcm90b19ffWEuc3VwZXI9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBkPXR5cGVvZiBiO3JldHVybiBiIGluc3RhbmNlb2YgRGF0ZSYmKGQ9ImRhdGUiKSxjW2RdKGEsYil9dmFyIGM9e3N0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gYX0sZGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZShhKXx8RGF0ZS5ub3coKSl9LCJib29sZWFuIjpmdW5jdGlvbihhKXtyZXR1cm4iIj09PWE/ITA6ImZhbHNlIj09PWE/ITE6ISFhfSxudW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9cGFyc2VGbG9hdChhKTtyZXR1cm4gU3RyaW5nKGIpPT09YT9iOmF9LG9iamVjdDpmdW5jdGlvbihhLGIpe2lmKG51bGw9PT1iKXJldHVybiBhO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShhLnJlcGxhY2UoLycvZywnIicpKX1jYXRjaChjKXtyZXR1cm4gYX19fTthLmRlc2VyaWFsaXplVmFsdWU9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9e307Yi5kZWNsYXJhdGlvbj17fSxiLmluc3RhbmNlPXt9LGEuYXBpPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXthc3luYzpmdW5jdGlvbihhLGIsYyl7UGxhdGZvcm0uZmx1c2goKSxiPWImJmIubGVuZ3RoP2I6W2JdO3ZhciBkPWZ1bmN0aW9uKCl7KHRoaXNbYV18fGEpLmFwcGx5KHRoaXMsYil9LmJpbmQodGhpcyk7cmV0dXJuIGM/c2V0VGltZW91dChkLGMpOnJlcXVlc3RBbmltYXRpb25GcmFtZShkKX0sZmlyZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jfHx0aGlzO3JldHVybiBlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGEse2J1YmJsZXM6dm9pZCAwIT09ZD8hMTohMCxkZXRhaWw6Yn0pKSxifSxhc3luY0ZpcmU6ZnVuY3Rpb24oKXt0aGlzLmFzeW5jKCJmaXJlIixhcmd1bWVudHMpfSxjbGFzc0ZvbGxvd3M6ZnVuY3Rpb24oYSxiLGMpe2ImJmIuY2xhc3NMaXN0LnJlbW92ZShjKSxhJiZhLmNsYXNzTGlzdC5hZGQoYyl9fTtiLmFzeW5jTWV0aG9kPWIuYXN5bmMsYS5hcGkuaW5zdGFuY2UudXRpbHM9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2IuY2FuY2VsQnViYmxlfHwoYi5vbj1pK2IudHlwZSxoLmV2ZW50cyYmY29uc29sZS5ncm91cCgiWyVzXTogbGlzdGVuTG9jYWwgWyVzXSIsYS5sb2NhbE5hbWUsYi5vbiksYi5wYXRoP2MoYSxiKTpkKGEsYiksaC5ldmVudHMmJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPW51bGw7QXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChiLnBhdGgsZnVuY3Rpb24oZCl7cmV0dXJuIGQ9PT1hPyEwOihjPWM9PT1hP2M6ZShkKSxjJiZmKGMsZCxiKT8hMDp2b2lkIDApfSx0aGlzKX1mdW5jdGlvbiBkKGEsYil7aC5ldmVudHMmJmNvbnNvbGUubG9nKCJldmVudC5wYXRoKCkgbm90IHN1cHBvcnRlZCBmb3IiLGIudHlwZSk7Zm9yKHZhciBjPWIudGFyZ2V0LGQ9bnVsbDtjJiZjIT1hOyl7aWYoZD1kPT09YT9kOmUoYyksZCYmZihkLGMsYikpcmV0dXJuITA7Yz1jLnBhcmVudE5vZGV9fWZ1bmN0aW9uIGUoYSl7Zm9yKDthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhLmhvc3R9ZnVuY3Rpb24gZihhLGIsYyl7dmFyIGQ9Yi5nZXRBdHRyaWJ1dGUmJmIuZ2V0QXR0cmlidXRlKGMub24pO3JldHVybiBkJiZnKGIsYykmJihoLmV2ZW50cyYmY29uc29sZS5sb2coIlslc10gZm91bmQgaGFuZGxlciBuYW1lIFslc10iLGEubG9jYWxOYW1lLGQpLGEuZGlzcGF0Y2hNZXRob2QoYixkLFtjLGMuZGV0YWlsLGJdKSksYy5jYW5jZWxCdWJibGV9ZnVuY3Rpb24gZyhhLGIpe3ZhciBjPWwuZ2V0KGIpO3JldHVybiBjfHxsLnNldChiLGM9W10pLGMuaW5kZXhPZihhKTwwPyhjLnB1c2goYSksITApOnZvaWQgMH12YXIgaD13aW5kb3cubG9nRmxhZ3N8fHt9LGk9Im9uLSIsaj0iZXZlbnREZWxlZ2F0ZXMiLGs9e0VWRU5UX1BSRUZJWDppLERFTEVHQVRFUzpqLGFkZEhvc3RMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzW2pdO2guZXZlbnRzJiZPYmplY3Qua2V5cyhhKS5sZW5ndGg+MCYmY29uc29sZS5sb2coIlslc10gYWRkSG9zdExpc3RlbmVyczoiLHRoaXMubG9jYWxOYW1lLGEpLHRoaXMuYWRkTm9kZUxpc3RlbmVycyh0aGlzLGEsdGhpcy5ob3N0RXZlbnRMaXN0ZW5lcil9LGFkZEluc3RhbmNlTGlzdGVuZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5kZWxlZ2F0ZXM7YyYmKGguZXZlbnRzJiZPYmplY3Qua2V5cyhjKS5sZW5ndGg+MCYmY29uc29sZS5sb2coIlslczpyb290XSBhZGRJbnN0YW5jZUxpc3RlbmVyczoiLHRoaXMubG9jYWxOYW1lLGMpLHRoaXMuYWRkTm9kZUxpc3RlbmVycyhhLGMsdGhpcy5pbnN0YW5jZUV2ZW50TGlzdGVuZXIpKX0sYWRkTm9kZUxpc3RlbmVyczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7Zm9yKHZhciBlIGluIGIpZHx8KGQ9Yy5iaW5kKHRoaXMpKSx0aGlzLmFkZE5vZGVMaXN0ZW5lcihhLGUsZCl9LGFkZE5vZGVMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7YS5hZGRFdmVudExpc3RlbmVyKGIsYyl9LGhvc3RFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEpe2lmKCFhLmNhbmNlbEJ1YmJsZSl7aC5ldmVudHMmJmNvbnNvbGUuZ3JvdXAoIlslc106IGhvc3RFdmVudExpc3RlbmVyKCVzKSIsdGhpcy5sb2NhbE5hbWUsYS50eXBlKTt2YXIgYj10aGlzLmZpbmRFdmVudERlbGVnYXRlKGEpO2ImJihoLmV2ZW50cyYmY29uc29sZS5sb2coIlslc10gZm91bmQgaG9zdCBoYW5kbGVyIG5hbWUgWyVzXSIsdGhpcy5sb2NhbE5hbWUsYiksdGhpcy5kaXNwYXRjaE1ldGhvZCh0aGlzLGIsW2EsYS5kZXRhaWwsdGhpc10pKSxoLmV2ZW50cyYmY29uc29sZS5ncm91cEVuZCgpfX0sZmluZEV2ZW50RGVsZWdhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbal1bYS50eXBlXX0sZGlzcGF0Y2hNZXRob2Q6ZnVuY3Rpb24oYSxiLGMpe2lmKGEpe2guZXZlbnRzJiZjb25zb2xlLmdyb3VwKCJbJXNdIGRpc3BhdGNoIFslc10iLGEubG9jYWxOYW1lLGIpO3ZhciBkPXRoaXNbYl07ZCYmZFtjPyJhcHBseSI6ImNhbGwiXSh0aGlzLGMpLGguZXZlbnRzJiZjb25zb2xlLmdyb3VwRW5kKCl9fSxpbnN0YW5jZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSl7Yih0aGlzLGEpfX0sbD1uZXcgU2lkZVRhYmxlKCJoYW5kbGVkTGlzdCIpO2EuYXBpLmluc3RhbmNlLmV2ZW50cz1rfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj0iX19wdWJsaXNoZWQiLGM9Il9faW5zdGFuY2VfYXR0cmlidXRlcyIsZD17UFVCTElTSEVEOmIsSU5TVEFOQ0VfQVRUUklCVVRFUzpjLGNvcHlJbnN0YW5jZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzW2NdO2Zvcih2YXIgYiBpbiBhKXRoaXMuc2V0QXR0cmlidXRlKGIsYVtiXSl9LHRha2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MCxjPXRoaXMuYXR0cmlidXRlcyxkPWMubGVuZ3RoOyhhPWNbYl0pJiZkPmI7YisrKXRoaXMuYXR0cmlidXRlVG9Qcm9wZXJ0eShhLm5hbWUsYS52YWx1ZSl9LGF0dHJpYnV0ZVRvUHJvcGVydHk6ZnVuY3Rpb24oYixjKXt2YXIgYj10aGlzLnByb3BlcnR5Rm9yQXR0cmlidXRlKGIpO2lmKGIpe2lmKGMmJmMuc2VhcmNoKGEuYmluZFBhdHRlcm4pPj0wKXJldHVybjt2YXIgZD10aGlzW2JdLGM9dGhpcy5kZXNlcmlhbGl6ZVZhbHVlKGMsZCk7YyE9PWQmJih0aGlzW2JdPWMpfX0scHJvcGVydHlGb3JBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7dmFyIGM9T2JqZWN0LmtleXModGhpc1tiXSk7cmV0dXJuIGNbYy5tYXAoZSkuaW5kZXhPZihhLnRvTG93ZXJDYXNlKCkpXX0sZGVzZXJpYWxpemVWYWx1ZTpmdW5jdGlvbihiLGMpe3JldHVybiBhLmRlc2VyaWFsaXplVmFsdWUoYixjKX0sc2VyaWFsaXplVmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4iYm9vbGVhbiI9PT1iP2E/IiI6dm9pZCAwOiJvYmplY3QiIT09YiYmIm9iamVjdCIhPXR5cGVvZiBhJiZ2b2lkIDAhPT1hP2E6dm9pZCAwfSxwcm9wZXJ0eVRvQXR0cmlidXRlOmZ1bmN0aW9uKGEpe2lmKE9iamVjdC5rZXlzKHRoaXNbYl0pLmluZGV4T2YoYSk+PTApe3ZhciBjPXR5cGVvZiB0aGlzLl9fcHJvdG9fX1thXSxkPXRoaXMuc2VyaWFsaXplVmFsdWUodGhpc1thXSxjKTt2b2lkIDAhPT1kP3RoaXMuc2V0QXR0cmlidXRlKGEsZCk6ImJvb2xlYW4iPT09YyYmdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSl9fX0sZT1TdHJpbmcucHJvdG90eXBlLnRvTG93ZXJDYXNlLmNhbGwuYmluZChTdHJpbmcucHJvdG90eXBlLnRvTG93ZXJDYXNlKTthLmFwaS5pbnN0YW5jZS5hdHRyaWJ1dGVzPWR9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz10aGlzW2FdfHxhOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFwcGx5KHRoaXMsYil9ZnVuY3Rpb24gYyhhLGIsYyxkKXtoLmJpbmQmJmNvbnNvbGUubG9nKG8sYy5sb2NhbE5hbWV8fCJvYmplY3QiLGQsYS5sb2NhbE5hbWUsYik7dmFyIGU9UGF0aC5nZXQoZCksZj1lLmdldFZhbHVlRnJvbShjKTtyZXR1cm4obnVsbD09PWZ8fHZvaWQgMD09PWYpJiZlLnNldFZhbHVlRnJvbShjLGFbYl0pLFBhdGhPYnNlcnZlci5kZWZpbmVQcm9wZXJ0eShhLGIse29iamVjdDpjLHBhdGg6ZH0pfWZ1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPWcoYSk7ZFtiXT1jfWZ1bmN0aW9uIGUoYSxiKXt2YXIgYz1nKGEpO3JldHVybiBjJiZjW2JdPyhjW2JdLmNsb3NlKCksY1tiXT1udWxsLCEwKTp2b2lkIDB9ZnVuY3Rpb24gZihhKXt2YXIgYj1nKGEpO09iamVjdC5rZXlzKGIpLmZvckVhY2goZnVuY3Rpb24oYSl7YlthXS5jbG9zZSgpLGJbYV09bnVsbH0pfWZ1bmN0aW9uIGcoYSl7dmFyIGI9bC5nZXQoYSk7cmV0dXJuIGJ8fGwuc2V0KGEsYj17fSksYn12YXIgaD13aW5kb3cubG9nRmxhZ3N8fHt9LGk9IkNoYW5nZWQiLGo9YS5hcGkuaW5zdGFuY2UuYXR0cmlidXRlcy5QVUJMSVNIRUQsaz17b2JzZXJ2ZVByb3BlcnRpZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj10aGlzLmdldEN1c3RvbVByb3BlcnR5TmFtZXMoKSxjPTAsZD1iLmxlbmd0aDtkPmMmJihhPWJbY10pO2MrKyl0aGlzLm9ic2VydmVQcm9wZXJ0eShhKX0sZ2V0Q3VzdG9tUHJvcGVydHlOYW1lczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmN1c3RvbVByb3BlcnR5TmFtZXN9LG9ic2VydmVQcm9wZXJ0eTpmdW5jdGlvbihhKXtpZih0aGlzLnNob3VsZE9ic2VydmVQcm9wZXJ0eShhKSl7aC53YXRjaCYmY29uc29sZS5sb2cobSx0aGlzLmxvY2FsTmFtZSxhKTt2YXIgYj1mdW5jdGlvbihiLGMpe2gud2F0Y2gmJmNvbnNvbGUubG9nKG4sdGhpcy5sb2NhbE5hbWUsdGhpcy5pZHx8IiIsYSx0aGlzW2FdLGMpLHRoaXMuZGlzcGF0Y2hQcm9wZXJ0eUNoYW5nZShhLGMpfS5iaW5kKHRoaXMpLGM9bmV3IFBhdGhPYnNlcnZlcih0aGlzLGEsYik7ZCh0aGlzLGEsYyl9fSxzaG91bGRPYnNlcnZlUHJvcGVydHk6ZnVuY3Rpb24oYSl7cmV0dXJuIEJvb2xlYW4odGhpc1thK2ldfHx2b2lkIDAhPT10aGlzW2pdW2FdKX0sYmluZFByb3BlcnR5OmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYyh0aGlzLGEsYixkKX0sdW5iaW5kUHJvcGVydHk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZSh0aGlzLGEsYil9LHVuYmluZEFsbFByb3BlcnRpZXM6ZnVuY3Rpb24oKXtmKHRoaXMpfSxkaXNwYXRjaFByb3BlcnR5Q2hhbmdlOmZ1bmN0aW9uKGEsYyl7dGhpcy5wcm9wZXJ0eVRvQXR0cmlidXRlKGEpLGIuY2FsbCh0aGlzLGEraSxbY10pfX0sbD1uZXcgU2lkZVRhYmxlLG09Ilslc10gd2F0Y2hpbmcgWyVzXSIsbj0iWyVzIyVzXSB3YXRjaDogWyVzXSBub3cgWyVzXSB3YXMgWyVzXSIsbz0iWyVzXTogYmluZFByb3BlcnRpZXM6IFslc10gdG8gWyVzXS5bJXNdIjthLmFwaS5pbnN0YW5jZS5wcm9wZXJ0aWVzPWt9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7ZChhLGMpfWZ1bmN0aW9uIGMoYSl7YS51bmJpbmRBbGwoKX1mdW5jdGlvbiBkKGEsYil7aWYoYSl7YihhKTtmb3IodmFyIGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWQoYyxiKX19dmFyIGU9d2luZG93LmxvZ0ZsYWdzfHwwLGY9bmV3IFBvbHltZXJFeHByZXNzaW9ucyxnPXtpbnN0YW5jZVRlbXBsYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNyZWF0ZUluc3RhbmNlKHRoaXMsZil9LGJpbmQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucHJvcGVydHlGb3JBdHRyaWJ1dGUoYSk7aWYoZCl7dGhpcy51bmJpbmQoYSk7dmFyIGU9dGhpcy5iaW5kUHJvcGVydHkoZCxiLGMpO3JldHVybiBlLnBhdGg9Yyx0aGlzLnByb3BlcnR5VG9BdHRyaWJ1dGUoYSksdGhpcy5iaW5kaW5nc1thXT1lfXJldHVybiB0aGlzLnN1cGVyKGFyZ3VtZW50cyl9LGFzeW5jVW5iaW5kQWxsOmZ1bmN0aW9uKCl7dGhpcy5fdW5ib3VuZHx8KGUudW5iaW5kJiZjb25zb2xlLmxvZygiWyVzXSBhc3luY1VuYmluZEFsbCIsdGhpcy5sb2NhbE5hbWUpLHRoaXMuX3VuYmluZEFsbEpvYj10aGlzLmpvYih0aGlzLl91bmJpbmRBbGxKb2IsdGhpcy51bmJpbmRBbGwsMCkpfSx1bmJpbmRBbGw6ZnVuY3Rpb24oKXt0aGlzLl91bmJvdW5kfHwodGhpcy51bmJpbmRBbGxQcm9wZXJ0aWVzKCksdGhpcy5zdXBlcigpLGIodGhpcy5zaGFkb3dSb290KSx0aGlzLl91bmJvdW5kPSEwKX0sY2FuY2VsVW5iaW5kQWxsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl91bmJvdW5kPyhlLnVuYmluZCYmY29uc29sZS53YXJuKCJbJXNdIGFscmVhZHkgdW5ib3VuZCwgY2Fubm90IGNhbmNlbCB1bmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSx2b2lkIDApOihlLnVuYmluZCYmY29uc29sZS5sb2coIlslc10gY2FuY2VsVW5iaW5kQWxsIix0aGlzLmxvY2FsTmFtZSksdGhpcy5fdW5iaW5kQWxsSm9iJiYodGhpcy5fdW5iaW5kQWxsSm9iPXRoaXMuX3VuYmluZEFsbEpvYi5zdG9wKCkpLGF8fGQodGhpcy5zaGFkb3dSb290LGZ1bmN0aW9uKGEpe2EuY2FuY2VsVW5iaW5kQWxsJiZhLmNhbmNlbFVuYmluZEFsbCgpfSksdm9pZCAwKX19LGg9L1x7XHsoW157fV0qKX19LzthLmJpbmRQYXR0ZXJuPWgsYS5hcGkuaW5zdGFuY2UubWR2PWd9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEuaGFzT3duUHJvcGVydHkoIlBvbHltZXJCYXNlIil9ZnVuY3Rpb24gYygpe312YXIgZD17UG9seW1lckJhc2U6ITAsam9iOlBvbHltZXIuam9iLCJzdXBlciI6UG9seW1lci5zdXBlcixjcmVhdGVkOmZ1bmN0aW9uKCl7fSxyZWFkeTpmdW5jdGlvbigpe30scmVhZHlDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuX2NyZWF0ZWRDYWxsYmFjaygpfSxjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLl9jcmVhdGVkQ2FsbGJhY2soKX0sX2NyZWF0ZWRDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMub2JzZXJ2ZVByb3BlcnRpZXMoKSx0aGlzLmNvcHlJbnN0YW5jZUF0dHJpYnV0ZXMoKSx0aGlzLnRha2VBdHRyaWJ1dGVzKCksdGhpcy5hZGRIb3N0TGlzdGVuZXJzKCksdGhpcy5wYXJzZUVsZW1lbnRzKHRoaXMuX19wcm90b19fKSx0aGlzLnJlYWR5KCksdGhpcy5jcmVhdGVkKCl9LGVudGVyZWRWaWV3Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLl9lbnRlcmVkRG9jdW1lbnRDYWxsYmFjaygpfSxpbnNlcnRlZENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5fZW50ZXJlZERvY3VtZW50Q2FsbGJhY2soKX0sZW50ZXJlZERvY3VtZW50Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLl9lbnRlcmVkRG9jdW1lbnRDYWxsYmFjaygpfSxfZW50ZXJlZERvY3VtZW50Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbFVuYmluZEFsbCghMCksdGhpcy5pbnNlcnRlZCYmdGhpcy5pbnNlcnRlZCgpLHRoaXMuZW50ZXJlZERvY3VtZW50JiZ0aGlzLmVudGVyZWREb2N1bWVudCgpLHRoaXMuZW50ZXJlZFZpZXcmJnRoaXMuZW50ZXJlZFZpZXcoKX0sbGVmdFZpZXdDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuX2xlZnREb2N1bWVudENhbGxiYWNrKCl9LGxlZnREb2N1bWVudENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5fbGVmdERvY3VtZW50Q2FsbGJhY2soKX0scmVtb3ZlZENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5fbGVmdERvY3VtZW50Q2FsbGJhY2soKX0sX2xlZnREb2N1bWVudENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hc3luY1VuYmluZEFsbCgpLHRoaXMucmVtb3ZlZCYmdGhpcy5yZW1vdmVkKCksdGhpcy5sZWZ0RG9jdW1lbnQmJnRoaXMubGVmdERvY3VtZW50KCksdGhpcy5sZWZ0VmlldyYmdGhpcy5sZWZ0VmlldygpfSxwYXJzZUVsZW1lbnRzOmZ1bmN0aW9uKGEpe2EmJmEuZWxlbWVudCYmKHRoaXMucGFyc2VFbGVtZW50cyhhLl9fcHJvdG9fXyksYS5wYXJzZUVsZW1lbnQuY2FsbCh0aGlzLGEuZWxlbWVudCkpfSxwYXJzZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5zaGFkb3dGcm9tVGVtcGxhdGUodGhpcy5mZXRjaFRlbXBsYXRlKGEpKX0sZmV0Y2hUZW1wbGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5xdWVyeVNlbGVjdG9yKCJ0ZW1wbGF0ZSIpfSxzaGFkb3dGcm9tVGVtcGxhdGU6ZnVuY3Rpb24oYSl7aWYoYSl7dGhpcy5zaGFkb3dSb290O3ZhciBiPXRoaXMuY3JlYXRlU2hhZG93Um9vdCgpO2IuYXBwbHlBdXRob3JTdHlsZXM9dGhpcy5hcHBseUF1dGhvclN0eWxlcyxiLnJlc2V0U3R5bGVJbmhlcml0YW5jZT10aGlzLnJlc2V0U3R5bGVJbmhlcml0YW5jZTt2YXIgYz10aGlzLmluc3RhbmNlVGVtcGxhdGUoYSk7cmV0dXJuIGIuYXBwZW5kQ2hpbGQoYyksdGhpcy5zaGFkb3dSb290UmVhZHkoYixhKSxifX0sc2hhZG93Um9vdFJlYWR5OmZ1bmN0aW9uKGEsYil7dGhpcy5tYXJzaGFsTm9kZVJlZmVyZW5jZXMoYSksdGhpcy5hZGRJbnN0YW5jZUxpc3RlbmVycyhhLGIpLFBvaW50ZXJHZXN0dXJlcy5yZWdpc3RlcihhKX0sbWFyc2hhbE5vZGVSZWZlcmVuY2VzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuJD10aGlzLiR8fHt9O2lmKGEpZm9yKHZhciBjLGQ9YS5xdWVyeVNlbGVjdG9yQWxsKCJbaWRdIiksZT0wLGY9ZC5sZW5ndGg7Zj5lJiYoYz1kW2VdKTtlKyspYltjLmlkXT1jfSxhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dGhpcy5hdHRyaWJ1dGVUb1Byb3BlcnR5KGEsdGhpcy5nZXRBdHRyaWJ1dGUoYSkpLHRoaXMuYXR0cmlidXRlQ2hhbmdlZCYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25NdXRhdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCl7Yi5jYWxsKHRoaXMsYyksYy5kaXNjb25uZWN0KCl9LmJpbmQodGhpcykpO2Mub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfX07Yy5wcm90b3R5cGU9ZCxkLmNvbnN0cnVjdG9yPWMsYS5CYXNlPWMsYS5pc0Jhc2U9YixhLmFwaS5pbnN0YW5jZS5iYXNlPWR9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEuX19wcm90b19ffXdpbmRvdy5sb2dGbGFnc3x8e307dmFyIGM9ImVsZW1lbnQiLGQ9ImNvbnRyb2xsZXIiLGU9e1NUWUxFX1NDT1BFX0FUVFJJQlVURTpjLGluc3RhbGxDb250cm9sbGVyU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5maW5kU3R5bGVDb250cm9sbGVyKCk7aWYoYSYmIXRoaXMuc2NvcGVIYXNFbGVtZW50U3R5bGUoYSxkKSl7Zm9yKHZhciBjPWIodGhpcyksZT0iIjtjJiZjLmVsZW1lbnQ7KWUrPWMuZWxlbWVudC5jc3NUZXh0Rm9yU2NvcGUoZCksYz1iKGMpO2lmKGUpe3ZhciBmPXRoaXMuZWxlbWVudC5jc3NUZXh0VG9TY29wZVN0eWxlKGUsZCk7d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZQbGF0Zm9ybS5TaGFkb3dDU1Muc2hpbVBvbHlmaWxsRGlyZWN0aXZlcyhbZl0sdGhpcy5sb2NhbE5hbWUpLFBvbHltZXIuYXBwbHlTdHlsZVRvU2NvcGUoZixhKX19fSxmaW5kU3R5bGVDb250cm9sbGVyOmZ1bmN0aW9uKCl7aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXJldHVybiB3cmFwKGRvY3VtZW50LmhlYWQpO2Zvcih2YXIgYT10aGlzO2EucGFyZW50Tm9kZTspYT1hLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kb2N1bWVudD9kb2N1bWVudC5oZWFkOmF9LHNjb3BlSGFzRWxlbWVudFN0eWxlOmZ1bmN0aW9uKGEsYil7dmFyIGQ9YysiPSIrdGhpcy5sb2NhbE5hbWUrIi0iK2I7cmV0dXJuIGEucXVlcnlTZWxlY3Rvcigic3R5bGVbIitkKyJdIil9fTthLmFwaS5pbnN0YW5jZS5zdHlsZXM9ZX0oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9e2FkZFJlc29sdmVQYXRoQXBpOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50UGF0aCgpLGI9dGhpcy5nZXRBdHRyaWJ1dGUoImFzc2V0cGF0aCIpfHwiIjt0aGlzLnByb3RvdHlwZS5yZXNvbHZlUGF0aD1mdW5jdGlvbihjKXtyZXR1cm4gYStiK2N9fSxlbGVtZW50UGF0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVybFRvUGF0aChIVE1MSW1wb3J0cy5nZXREb2N1bWVudFVybCh0aGlzLm93bmVyRG9jdW1lbnQpKX0sdXJsVG9QYXRoOmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPWEuc3BsaXQoIi8iKTtyZXR1cm4gYi5wb3AoKSxiLnB1c2goIiIpLGIuam9pbigiLyIpfXJldHVybiIifX07YS5hcGkuZGVjbGFyYXRpb24ucGF0aD1ifShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7aWYoYSl7dmFyIGQ9YyhhLnRleHRDb250ZW50KSxlPWEuZ2V0QXR0cmlidXRlKGcpO2UmJmQuc2V0QXR0cmlidXRlKGcsZSksYi5hcHBlbmRDaGlsZChkKX19ZnVuY3Rpb24gYyhhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3JldHVybiBiLnRleHRDb250ZW50PWEsYn1mdW5jdGlvbiBkKGEpe3JldHVybiBhJiZhLl9fcmVzb3VyY2V8fCIifWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gbj9uLmNhbGwoYSxiKTp2b2lkIDB9d2luZG93LmxvZ0ZsYWdzfHx7fTt2YXIgZj1hLmFwaS5pbnN0YW5jZS5zdHlsZXMsZz1mLlNUWUxFX1NDT1BFX0FUVFJJQlVURSxoPSJzdHlsZSIsaT0iW3JlbD1zdHlsZXNoZWV0XSIsaj0iZ2xvYmFsIixrPSJwb2x5bWVyLXNjb3BlIixsPXtpbnN0YWxsU2hlZXRzOmZ1bmN0aW9uKCl7dGhpcy5jYWNoZVNoZWV0cygpLHRoaXMuY2FjaGVTdHlsZXMoKSx0aGlzLmluc3RhbGxMb2NhbFNoZWV0cygpLHRoaXMuaW5zdGFsbEdsb2JhbFN0eWxlcygpfSxjYWNoZVNoZWV0czpmdW5jdGlvbigpe3RoaXMuc2hlZXRzPXRoaXMuZmluZE5vZGVzKGkpLHRoaXMuc2hlZXRzLmZvckVhY2goZnVuY3Rpb24oYSl7YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9KX0sY2FjaGVTdHlsZXM6ZnVuY3Rpb24oKXt0aGlzLnN0eWxlcz10aGlzLmZpbmROb2RlcyhoKyJbIitrKyJdIiksdGhpcy5zdHlsZXMuZm9yRWFjaChmdW5jdGlvbihhKXthLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX0pfSxpbnN0YWxsTG9jYWxTaGVldHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNoZWV0cy5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIWEuaGFzQXR0cmlidXRlKGspfSksYj10aGlzLnRlbXBsYXRlQ29udGVudCgpO2lmKGIpe3ZhciBlPSIiO2EuZm9yRWFjaChmdW5jdGlvbihhKXtlKz1kKGEpKyJcbiJ9KSxlJiZiLmluc2VydEJlZm9yZShjKGUpLGIuZmlyc3RDaGlsZCl9fSxmaW5kTm9kZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoYSkuYXJyYXkoKSxkPXRoaXMudGVtcGxhdGVDb250ZW50KCk7aWYoZCl7dmFyIGU9ZC5xdWVyeVNlbGVjdG9yQWxsKGEpLmFycmF5KCk7Yz1jLmNvbmNhdChlKX1yZXR1cm4gYj9jLmZpbHRlcihiKTpjfSx0ZW1wbGF0ZUNvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnF1ZXJ5U2VsZWN0b3IoInRlbXBsYXRlIik7cmV0dXJuIGEmJnRlbXBsYXRlQ29udGVudChhKX0saW5zdGFsbEdsb2JhbFN0eWxlczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc3R5bGVGb3JTY29wZShqKTtiKGEsZG9jdW1lbnQuaGVhZCl9LGNzc1RleHRGb3JTY29wZTpmdW5jdGlvbihhKXt2YXIgYj0iIixjPSJbIitrKyI9IithKyJdIixmPWZ1bmN0aW9uKGEpe3JldHVybiBlKGEsYyl9LGc9dGhpcy5zaGVldHMuZmlsdGVyKGYpO2cuZm9yRWFjaChmdW5jdGlvbihhKXtiKz1kKGEpKyJcblxuIn0pO3ZhciBoPXRoaXMuc3R5bGVzLmZpbHRlcihmKTtyZXR1cm4gaC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IrPWEudGV4dENvbnRlbnQrIlxuXG4ifSksYn0sc3R5bGVGb3JTY29wZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNzc1RleHRGb3JTY29wZShhKTtyZXR1cm4gdGhpcy5jc3NUZXh0VG9TY29wZVN0eWxlKGIsYSl9LGNzc1RleHRUb1Njb3BlU3R5bGU6ZnVuY3Rpb24oYSxiKXtpZihhKXt2YXIgZD1jKGEpO3JldHVybiBkLnNldEF0dHJpYnV0ZShnLHRoaXMuZ2V0QXR0cmlidXRlKCJuYW1lIikrIi0iK2IpLGR9fX0sbT1IVE1MRWxlbWVudC5wcm90b3R5cGUsbj1tLm1hdGNoZXN8fG0ubWF0Y2hlc1NlbGVjdG9yfHxtLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8bS5tb3pNYXRjaGVzU2VsZWN0b3I7YS5hcGkuZGVjbGFyYXRpb24uc3R5bGVzPWwsYS5hcHBseVN0eWxlVG9TY29wZT1ifShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBhLnNsaWNlKDAsayk9PWd9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5zbGljZShrKX1mdW5jdGlvbiBkKGEpe3JldHVybiBhLnJlZj9hLnJlZi5jb250ZW50OmEuY29udGVudH12YXIgZT1hLmFwaS5pbnN0YW5jZS5ldmVudHMsZj1lLkRFTEVHQVRFUyxnPWUuRVZFTlRfUFJFRklYLGg9d2luZG93LmxvZ0ZsYWdzfHx7fSxpPXtpbmhlcml0RGVsZWdhdGVzOmZ1bmN0aW9uKGEpe3RoaXMuaW5oZXJpdE9iamVjdChhLGYpfSxwYXJzZUhvc3RFdmVudHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb3RvdHlwZVtmXTt0aGlzLmFkZEF0dHJpYnV0ZURlbGVnYXRlcyhhKX0sYWRkQXR0cmlidXRlRGVsZWdhdGVzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgZCxlPTA7ZD10aGlzLmF0dHJpYnV0ZXNbZV07ZSsrKWIoZC5uYW1lKSYmKGFbYyhkLm5hbWUpXT1kLnZhbHVlKX0scGFyc2VMb2NhbEV2ZW50czpmdW5jdGlvbigpe3RoaXMucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuZGVsZWdhdGVzPXt9LHRoaXMuYWNjdW11bGF0ZVRlbXBsYXRlZEV2ZW50cyhhLGEuZGVsZWdhdGVzKSxoLmV2ZW50cyYmY29uc29sZS5sb2coIlslc10gcGFyc2VMb2NhbEV2ZW50czoiLHRoaXMuYXR0cmlidXRlcy5uYW1lLnZhbHVlLGEuZGVsZWdhdGVzKX0sdGhpcyl9LGFjY3VtdWxhdGVUZW1wbGF0ZWRFdmVudHM6ZnVuY3Rpb24oYSxiKXtpZigidGVtcGxhdGUiPT09YS5sb2NhbE5hbWUpe3ZhciBjPWQoYSk7YyYmdGhpcy5hY2N1bXVsYXRlQ2hpbGRFdmVudHMoYyxiKX19LGFjY3VtdWxhdGVDaGlsZEV2ZW50czpmdW5jdGlvbihhLGIpe2EuY2hpbGROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuYWNjdW11bGF0ZUV2ZW50cyhhLGIpCn0sdGhpcyl9LGFjY3VtdWxhdGVFdmVudHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hY2N1bXVsYXRlQXR0cmlidXRlRXZlbnRzKGEsYiksdGhpcy5hY2N1bXVsYXRlQ2hpbGRFdmVudHMoYSxiKSx0aGlzLmFjY3VtdWxhdGVUZW1wbGF0ZWRFdmVudHMoYSxiKSxifSxhY2N1bXVsYXRlQXR0cmlidXRlRXZlbnRzOmZ1bmN0aW9uKGEsZCl7YS5hdHRyaWJ1dGVzJiZhLmF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihhKXtiKGEubmFtZSkmJnRoaXMuYWNjdW11bGF0ZUV2ZW50KGMoYS5uYW1lKSxkKX0sdGhpcyl9LGFjY3VtdWxhdGVFdmVudDpmdW5jdGlvbihhLGIpe2E9althXXx8YSxiW2FdPWJbYV18fDF9fSxqPXt3ZWJraXRhbmltYXRpb25zdGFydDoid2Via2l0QW5pbWF0aW9uU3RhcnQiLHdlYmtpdGFuaW1hdGlvbmVuZDoid2Via2l0QW5pbWF0aW9uRW5kIix3ZWJraXR0cmFuc2l0aW9uZW5kOiJ3ZWJraXRUcmFuc2l0aW9uRW5kIixkb21mb2N1c291dDoiRE9NRm9jdXNPdXQiLGRvbWZvY3VzaW46IkRPTUZvY3VzSW4ifSxrPWcubGVuZ3RoO2kuZXZlbnRfdHJhbnNsYXRpb25zPWosYS5hcGkuZGVjbGFyYXRpb24uZXZlbnRzPWl9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuYXBpLmluc3RhbmNlLmF0dHJpYnV0ZXMsYz1hLmFwaS5pbnN0YW5jZS5ldmVudHMsZD1bXSxlPXtjYWNoZVByb3BlcnRpZXM6ZnVuY3Rpb24oKXt0aGlzLnByb3RvdHlwZS5jdXN0b21Qcm9wZXJ0eU5hbWVzPXRoaXMuZ2V0Q3VzdG9tUHJvcGVydHlOYW1lcyh0aGlzLnByb3RvdHlwZSl9LGdldEN1c3RvbVByb3BlcnR5TmFtZXM6ZnVuY3Rpb24oYil7Zm9yKHZhciBjLGU9e307YiYmIWEuaXNCYXNlKGIpOyl7Zm9yKHZhciBnLGg9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYiksaT0wLGo9aC5sZW5ndGg7aj5pJiYoZz1oW2ldKTtpKyspZltnXXx8KGVbZ109ITAsYz0hMCk7Yj1iLl9fcHJvdG9fX31yZXR1cm4gYz9PYmplY3Qua2V5cyhlKTpkfX0sZj17fTtmW2IuUFVCTElTSEVEXT0xLGZbYi5JTlNUQU5DRV9BVFRSSUJVVEVTXT0xLGZbYy5ERUxFR0FURVNdPTEsYS5hcGkuZGVjbGFyYXRpb24ucHJvcGVydGllcz1lfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj1hLmFwaS5pbnN0YW5jZS5hdHRyaWJ1dGVzLGM9Yi5QVUJMSVNIRUQsZD1iLklOU1RBTkNFX0FUVFJJQlVURVMsZT0icHVibGlzaCIsZj0iYXR0cmlidXRlcyIsZz17aW5oZXJpdEF0dHJpYnV0ZXNPYmplY3RzOmZ1bmN0aW9uKGEpe3RoaXMuaW5oZXJpdE9iamVjdChhLGMpLHRoaXMuaW5oZXJpdE9iamVjdChhLGQpfSxwYXJzZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt0aGlzLnB1Ymxpc2hBdHRyaWJ1dGVzKHRoaXMucHJvdG90eXBlKSx0aGlzLnB1Ymxpc2hQcm9wZXJ0aWVzKHRoaXMucHJvdG90eXBlKSx0aGlzLmFjY3VtdWxhdGVJbnN0YW5jZUF0dHJpYnV0ZXMoKX0scHVibGlzaEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YVtjXSxkPXRoaXMuZ2V0QXR0cmlidXRlKGYpO2lmKGQpe3ZhciBlPWQuc3BsaXQoZC5pbmRleE9mKCIsIik+PTA/IiwiOiIgIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksIWF8fGEgaW4gYnx8KGJbYV09bnVsbCl9KX1PYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2MgaW4gYXx8KGFbY109YltjXSl9KX0scHVibGlzaFByb3BlcnRpZXM6ZnVuY3Rpb24oYSl7dGhpcy5wdWJsaXNoUHVibGlzaChhKX0scHVibGlzaFB1Ymxpc2g6ZnVuY3Rpb24oYSl7aWYoYS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIGI9YVtlXTtiJiYoT2JqZWN0LmtleXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXthW2NdPWJbY119KSxQbGF0Zm9ybS5taXhpbihhW2NdLGIpKX19LGFjY3VtdWxhdGVJbnN0YW5jZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb3RvdHlwZVtkXTt0aGlzLmF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihiKXt0aGlzLmlzSW5zdGFuY2VBdHRyaWJ1dGUoYi5uYW1lKSYmKGFbYi5uYW1lXT1iLnZhbHVlKX0sdGhpcyl9LGlzSW5zdGFuY2VBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIXRoaXMuYmxhY2tMaXN0W2FdJiYib24tIiE9PWEuc2xpY2UoMCwzKX0sYmxhY2tMaXN0OntuYW1lOjEsImV4dGVuZHMiOjEsY29uc3RydWN0b3I6MSxub3NjcmlwdDoxfX07Zy5ibGFja0xpc3RbZl09MSxhLmFwaS5kZWNsYXJhdGlvbi5hdHRyaWJ1dGVzPWd9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIE9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQuZ2V0UHJvdG90eXBlRm9yVGFnKGEpKX1mdW5jdGlvbiBjKGEpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYSk7YS5fX3Byb3RvX189YixlKGIpJiYoYi5fX3Byb3RvX189T2JqZWN0LmdldFByb3RvdHlwZU9mKGIpKX19dmFyIGQ9YS5hcGksZT1hLmlzQmFzZSxmPWEuZXh0ZW5kLGc9YigpLGc9e2dlbmVyYXRlQ3VzdG9tUHJvdG90eXBlOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcy5nZW5lcmF0ZUJhc2VQcm90b3R5cGUoYik7cmV0dXJuIHRoaXMuYWRkTmFtZWRBcGkoZCxhKSxjKGQpLGR9LGdlbmVyYXRlQmFzZVByb3RvdHlwZTpmdW5jdGlvbihhKXt2YXIgYz1iKGEpO3JldHVybiB0aGlzLmVuc3VyZUJhc2VBcGkoYyl9LGVuc3VyZUJhc2VBcGk6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuUG9seW1lckJhc2V8fChPYmplY3Qua2V5cyhkLmluc3RhbmNlKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe2YoYSxkLmluc3RhbmNlW2JdKX0pLGE9T2JqZWN0LmNyZWF0ZShhKSksdGhpcy5pbmhlcml0QXR0cmlidXRlc09iamVjdHMoYSksdGhpcy5pbmhlcml0RGVsZWdhdGVzKGEpLGF9LGFkZE5hbWVkQXBpOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGYoYixhLmdldFJlZ2lzdGVyZWRQcm90b3R5cGUoYykpfSxpbmhlcml0T2JqZWN0OmZ1bmN0aW9uKGEsYil7YVtiXT1mKHt9LE9iamVjdC5nZXRQcm90b3R5cGVPZihhKVtiXSl9LHJlZ2lzdGVyUHJvdG90eXBlOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3Byb3RvdHlwZTp0aGlzLnByb3RvdHlwZX07YiYmYi5pbmRleE9mKCItIik8MCYmKGMuZXh0ZW5kcz1iKSx0aGlzLmN0b3I9ZG9jdW1lbnQucmVnaXN0ZXIoYSxjKSx0aGlzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10aGlzLmN0b3IsSFRNTEVsZW1lbnQucmVnaXN0ZXIoYSx0aGlzLnByb3RvdHlwZSl9fTtkLmRlY2xhcmF0aW9uLnByb3RvdHlwZT1nfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7a1thXT1ifHx7fSxkKGEpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGtbYV19ZnVuY3Rpb24gZChhKXtsW2FdJiYobFthXS5yZWdpc3RlcldoZW5SZWFkeSgpLGRlbGV0ZSBsW2FdKX1mdW5jdGlvbiBlKGEpe25bYV09ITA7dmFyIGI9bVthXTtiJiYoYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVnaXN0ZXJXaGVuUmVhZHkoKX0pLGRlbGV0ZSBtW2FdKX1mdW5jdGlvbiBmKGEpe3JldHVybiBuW2FdfWZ1bmN0aW9uIGcoYSl7d2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMucmVhZHlUaW1lP2FkZEV2ZW50TGlzdGVuZXIoIkhUTUxJbXBvcnRzTG9hZGVkIixhKTphKCl9dmFyIGg9YS5leHRlbmQsaT1hLmFwaS5kZWNsYXJhdGlvbixqPWgoT2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpLHtjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLm5hbWU9dGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSx0aGlzLnJlZ2lzdGVyV2hlblJlYWR5KCl9LHJlZ2lzdGVyV2hlblJlYWR5OmZ1bmN0aW9uKCl7aWYoIXRoaXMud2FpdGluZ0ZvclByb3RvdHlwZSh0aGlzLm5hbWUpKXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZSgiZXh0ZW5kcyIpO3JldHVybiB0aGlzLndhaXRpbmdGb3JFeHRlbmRlZShhKT8oY29uc29sZS53YXJuKHRoaXMubmFtZSsiOiB3YWl0aW5nRm9yRXh0ZW5kZWU6IithKSx2b2lkIDApOihkb2N1bWVudC5jb250YWlucyh0aGlzKT9nKGZ1bmN0aW9uKCl7dGhpcy5yZWdpc3Rlcih0aGlzLm5hbWUsYSl9LmJpbmQodGhpcykpOnRoaXMucmVnaXN0ZXIodGhpcy5uYW1lLGEpLHZvaWQgMCl9fSx3YWl0aW5nRm9yUHJvdG90eXBlOmZ1bmN0aW9uKGEpe2lmKCFjKGEpKXtpZihsW2FdPXRoaXMsdGhpcy5oYXNBdHRyaWJ1dGUoIm5vc2NyaXB0IikpaWYod2luZG93LkN1c3RvbUVsZW1lbnRzJiYhQ3VzdG9tRWxlbWVudHMudXNlTmF0aXZlKWIoYSk7ZWxzZXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLnRleHRDb250ZW50PSJQb2x5bWVyKCciK2ErIicpOyIsdGhpcy5hcHBlbmRDaGlsZChkKX1yZXR1cm4hMH19LHdhaXRpbmdGb3JFeHRlbmRlZTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmYS5pbmRleE9mKCItIik+PTAmJiFmKGEpPygobVthXT1tW2FdfHxbXSkucHVzaCh0aGlzKSwhMCk6dm9pZCAwfSxyZWdpc3RlcjpmdW5jdGlvbihhLGIpe3RoaXMucHJvdG90eXBlPXRoaXMuZ2VuZXJhdGVDdXN0b21Qcm90b3R5cGUoYSxiKSx0aGlzLnByb3RvdHlwZS5lbGVtZW50PXRoaXMsdGhpcy5hZGRSZXNvbHZlUGF0aEFwaSgpLHRoaXMuZGVzdWdhcigpLHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmUGxhdGZvcm0uU2hhZG93Q1NTLnNoaW1TdHlsaW5nKHRoaXMudGVtcGxhdGVDb250ZW50KCksYSxiKSx0aGlzLnJlZ2lzdGVyUHJvdG90eXBlKGEsYiksdGhpcy5wdWJsaXNoQ29uc3RydWN0b3IoKSxlKGEpfSxkZXN1Z2FyOmZ1bmN0aW9uKCl7dGhpcy5wYXJzZUF0dHJpYnV0ZXMoKSx0aGlzLnBhcnNlSG9zdEV2ZW50cygpLHRoaXMucGFyc2VMb2NhbEV2ZW50cygpLHRoaXMuaW5zdGFsbFNoZWV0cygpLHRoaXMucHJvdG90eXBlLnJlZ2lzdGVyQ2FsbGJhY2smJnRoaXMucHJvdG90eXBlLnJlZ2lzdGVyQ2FsbGJhY2sodGhpcyksdGhpcy5jYWNoZVByb3BlcnRpZXMoKX0scHVibGlzaENvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRBdHRyaWJ1dGUoImNvbnN0cnVjdG9yIik7YSYmKHdpbmRvd1thXT10aGlzLmN0b3IpfX0pO09iamVjdC5rZXlzKGkpLmZvckVhY2goZnVuY3Rpb24oYSl7aChqLGlbYV0pfSksZG9jdW1lbnQucmVnaXN0ZXIoInBvbHltZXItZWxlbWVudCIse3Byb3RvdHlwZTpqfSk7dmFyIGs9e30sbD17fSxtPXt9LG49e307YS5nZXRSZWdpc3RlcmVkUHJvdG90eXBlPWMsaChiLGEpLHdpbmRvdy5Qb2x5bWVyPWJ9KFBvbHltZXIpLFBvbHltZXIucmVnaXN0ZXI9ZnVuY3Rpb24oYSl7aWYoYSE9d2luZG93KXt2YXIgYj1hLmdldEF0dHJpYnV0ZSgibmFtZSIpO3Rocm93IG5ldyBFcnJvcigiUG9seW1lci5yZWdpc3RlciBpcyBkZXByZWNhdGVkIGluIGRlY2xhcmF0aW9uIG9mICIrYisiLiBQbGVhc2Ugc2VlIGh0dHA6Ly93d3cucG9seW1lci1wcm9qZWN0Lm9yZy9nZXR0aW5nLXN0YXJ0ZWQuaHRtbCIpfX07Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBvbHltZXIubWluLmpzLm1hcA==",
                "body": "Ly8gQ29weXJpZ2h0IChjKSAyMDEyIFRoZSBQb2x5bWVyIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCi8vCi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAovLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlCi8vIG1ldDoKLy8KLy8gICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAovLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCi8vICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZQovLyBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyCi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUKLy8gZGlzdHJpYnV0aW9uLgovLyAgICAqIE5laXRoZXIgdGhlIG5hbWUgb2YgR29vZ2xlIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMKLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20KLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KLy8KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUwovLyAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVAovLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IKLy8gQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQKLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsCi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QKLy8gTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsCi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWQovLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUCi8vIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRQovLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgoKLy8gQHZlcnNpb24gMC4wLjIwMTMwOTEyCmZ1bmN0aW9uIFBvaW50ZXJHZXN0dXJlRXZlbnQoYSxiKXt2YXIgYz1ifHx7fSxkPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLGU9e2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH07cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24oYSl7YSBpbiBjJiYoZVthXT1jW2FdKX0pLGQuaW5pdEV2ZW50KGEsZS5idWJibGVzLGUuY2FuY2VsYWJsZSksT2JqZWN0LmtleXMoYykuZm9yRWFjaChmdW5jdGlvbihhKXtkW2FdPWJbYV19KSxkLnByZXZlbnRUYXA9dGhpcy5wcmV2ZW50VGFwLGR9dmFyIFNpZGVUYWJsZTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIFdlYWtNYXAmJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRmlyZWZveC8iKTwwP1NpZGVUYWJsZT1XZWFrTWFwOiFmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxiPURhdGUubm93KCklMWU5O1NpZGVUYWJsZT1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGIrKyArIl9fIil9LFNpZGVUYWJsZS5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihiLGMpe3ZhciBkPWJbdGhpcy5uYW1lXTtkJiZkWzBdPT09Yj9kWzFdPWM6YShiLHRoaXMubmFtZSx7dmFsdWU6W2IsY10sd3JpdGFibGU6ITB9KX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybihiPWFbdGhpcy5uYW1lXSkmJmJbMF09PT1hP2JbMV06dm9pZCAwfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt0aGlzLnNldChhLHZvaWQgMCl9fX0oKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe2Z1bmN0aW9uIGEoYSl7InNwbGljZSI9PT1hWzBdLnR5cGUmJiJzcGxpY2UiPT09YVsxXS50eXBlJiYoYj0hMCl9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIE9iamVjdC5vYnNlcnZlfHwiZnVuY3Rpb24iIT10eXBlb2YgQXJyYXkub2JzZXJ2ZSlyZXR1cm4hMTt2YXIgYj0hMSxjPVswXTtyZXR1cm4gQXJyYXkub2JzZXJ2ZShjLGEpLGNbMV09MSxjLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxifWZ1bmN0aW9uIGMoKXtpZihhLmRvY3VtZW50JiYic2VjdXJpdHlQb2xpY3kiaW4gYS5kb2N1bWVudCYmIWEuZG9jdW1lbnQuc2VjdXJpdHlQb2xpY3kuYWxsb3dzRXZhbClyZXR1cm4hMTt0cnl7dmFyIGI9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtyZXR1cm4gYigpfWNhdGNoKGMpe3JldHVybiExfX1mdW5jdGlvbiBkKGEpe3JldHVybithPT09YT4+PjB9ZnVuY3Rpb24gZShhKXtyZXR1cm4rYX1mdW5jdGlvbiBmKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYT09PWI/MCE9PWF8fDEvYT09PTEvYjpIKGEpJiZIKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBoKGEpe3JldHVybiJzdHJpbmciIT10eXBlb2YgYT8hMTooYT1hLnRyaW0oKSwiIj09YT8hMDoiLiI9PWFbMF0/ITE6UC50ZXN0KGEpKX1mdW5jdGlvbiBpKGEsYil7aWYoYiE9PVEpdGhyb3cgRXJyb3IoIlVzZSBQYXRoLmdldCB0byByZXRyaWV2ZSBwYXRoIG9iamVjdHMiKTtyZXR1cm4iIj09YS50cmltKCk/dGhpczpkKGEpPyh0aGlzLnB1c2goYSksdGhpcyk6KGEuc3BsaXQoL1xzKlwuXHMqLykuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhfSkuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnB1c2goYSl9LHRoaXMpLEcmJiFGJiZ0aGlzLmxlbmd0aCYmKHRoaXMuZ2V0VmFsdWVGcm9tPXRoaXMuY29tcGlsZWRHZXRWYWx1ZUZyb21GbigpKSx2b2lkIDApfWZ1bmN0aW9uIGooYSl7aWYoYSBpbnN0YW5jZW9mIGkpcmV0dXJuIGE7bnVsbD09YSYmKGE9IiIpLCJzdHJpbmciIT10eXBlb2YgYSYmKGE9U3RyaW5nKGEpKTt2YXIgYj1SW2FdO2lmKGIpcmV0dXJuIGI7aWYoIWgoYSkpcmV0dXJuIFM7dmFyIGI9bmV3IGkoYSxRKTtyZXR1cm4gUlthXT1iLGJ9ZnVuY3Rpb24gayhiKXtmb3IodmFyIGM9MDtUPmMmJmIuY2hlY2soKTspYi5yZXBvcnQoKSxjKys7YS50ZXN0aW5nRXhwb3NlQ3ljbGVDb3VudCYmKGEuZGlydHlDaGVja0N5Y2xlQ291bnQ9Yyl9ZnVuY3Rpb24gbChhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBtKGEpe3JldHVybiBsKGEuYWRkZWQpJiZsKGEucmVtb3ZlZCkmJmwoYS5jaGFuZ2VkKX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9e30sZD17fSxlPXt9O2Zvcih2YXIgZiBpbiBiKXt2YXIgZz1hW2ZdOyh2b2lkIDA9PT1nfHxnIT09YltmXSkmJihmIGluIGE/ZyE9PWJbZl0mJihlW2ZdPWcpOmRbZl09dm9pZCAwKX1mb3IodmFyIGYgaW4gYSlmIGluIGJ8fChjW2ZdPWFbZl0pO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiZhLmxlbmd0aCE9PWIubGVuZ3RoJiYoZS5sZW5ndGg9YS5sZW5ndGgpLHthZGRlZDpjLHJlbW92ZWQ6ZCxjaGFuZ2VkOmV9fWZ1bmN0aW9uIG8oYSxiKXt2YXIgYz1ifHwoQXJyYXkuaXNBcnJheShhKT9bXTp7fSk7Zm9yKHZhciBkIGluIGEpY1tkXT1hW2RdO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiYoYy5sZW5ndGg9YS5sZW5ndGgpLGN9ZnVuY3Rpb24gcChhLGIsYyxkKXtpZih0aGlzLmNsb3NlZD0hMSx0aGlzLm9iamVjdD1hLHRoaXMuY2FsbGJhY2s9Yix0aGlzLnRhcmdldD1jLHRoaXMudG9rZW49ZCx0aGlzLnJlcG9ydGluZz0hMCxGKXt2YXIgZT10aGlzO3RoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrPWZ1bmN0aW9uKGEpe2UuaW50ZXJuYWxDYWxsYmFjayhhKX19cSh0aGlzKX1mdW5jdGlvbiBxKGEpe1YmJihVLnB1c2goYSkscC5fYWxsT2JzZXJ2ZXJzQ291bnQrKyl9ZnVuY3Rpb24gcihhLGIsYyxkKXtwLmNhbGwodGhpcyxhLGIsYyxkKSx0aGlzLmNvbm5lY3QoKSx0aGlzLnN5bmMoITApfWZ1bmN0aW9uIHMoYSxiLGMsZCl7aWYoIUFycmF5LmlzQXJyYXkoYSkpdGhyb3cgRXJyb3IoIlByb3ZpZGVkIG9iamVjdCBpcyBub3QgYW4gQXJyYXkiKTtyLmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiB0KGEpe3RoaXMuYXJyPVtdLHRoaXMuY2FsbGJhY2s9YSx0aGlzLmlzT2JzZXJ2ZWQ9ITB9ZnVuY3Rpb24gdShhLGIsYyxkLGUsZyxoKXt2YXIgYj1iIGluc3RhbmNlb2YgaT9iOmooYik7cmV0dXJuIGImJmIubGVuZ3RoJiZmKGEpPyhwLmNhbGwodGhpcyxhLGMsZCxlKSx0aGlzLnZhbHVlRm49Zyx0aGlzLnNldFZhbHVlRm49aCx0aGlzLnBhdGg9Yix0aGlzLmNvbm5lY3QoKSx0aGlzLnN5bmMoITApLHZvaWQgMCk6KHRoaXMudmFsdWVfPWI/Yi5nZXRWYWx1ZUZyb20oYSk6dm9pZCAwLHRoaXMudmFsdWU9Zz9nKHRoaXMudmFsdWVfKTp0aGlzLnZhbHVlXyx0aGlzLmNsb3NlZD0hMCx2b2lkIDApfWZ1bmN0aW9uIHYoYSxiLGMsZCl7cC5jYWxsKHRoaXMsdm9pZCAwLGEsYixjKSx0aGlzLnZhbHVlRm49ZCx0aGlzLm9ic2VydmVkPVtdLHRoaXMudmFsdWVzPVtdLHRoaXMudmFsdWU9dm9pZCAwLHRoaXMub2xkVmFsdWU9dm9pZCAwLHRoaXMub2xkVmFsdWVzPXZvaWQgMCx0aGlzLnN0YXJ0ZWQ9ITF9ZnVuY3Rpb24gdyhhLGIpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3Qub2JzZXJ2ZSl7dmFyIGM9T2JqZWN0LmdldE5vdGlmaWVyKGEpO3JldHVybiBmdW5jdGlvbihkLGUpe3ZhciBmPXtvYmplY3Q6YSx0eXBlOmQsbmFtZTpifTsyPT09YXJndW1lbnRzLmxlbmd0aCYmKGYub2xkVmFsdWU9ZSksYy5ub3RpZnkoZil9fX1mdW5jdGlvbiB4KGEsYixjKXtmb3IodmFyIGQ9e30sZT17fSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07JFtnLnR5cGVdPyhnLm5hbWUgaW4gY3x8KGNbZy5uYW1lXT1nLm9sZFZhbHVlKSwidXBkYXRlZCIhPWcudHlwZSYmKCJuZXciIT1nLnR5cGU/Zy5uYW1lIGluIGQ/KGRlbGV0ZSBkW2cubmFtZV0sZGVsZXRlIGNbZy5uYW1lXSk6ZVtnLm5hbWVdPSEwOmcubmFtZSBpbiBlP2RlbGV0ZSBlW2cubmFtZV06ZFtnLm5hbWVdPSEwKSk6KGNvbnNvbGUuZXJyb3IoIlVua25vd24gY2hhbmdlUmVjb3JkIHR5cGU6ICIrZy50eXBlKSxjb25zb2xlLmVycm9yKGcpKX1mb3IodmFyIGggaW4gZClkW2hdPWFbaF07Zm9yKHZhciBoIGluIGUpZVtoXT12b2lkIDA7dmFyIGk9e307Zm9yKHZhciBoIGluIGMpaWYoIShoIGluIGR8fGggaW4gZSkpe3ZhciBqPWFbaF07Y1toXSE9PWomJihpW2hdPWopfXJldHVybnthZGRlZDpkLHJlbW92ZWQ6ZSxjaGFuZ2VkOml9fWZ1bmN0aW9uIHkoYSxiLGMpe3JldHVybntpbmRleDphLHJlbW92ZWQ6YixhZGRlZENvdW50OmN9fWZ1bmN0aW9uIHooKXt9ZnVuY3Rpb24gQShhLGIsYyxkLGUsZil7cmV0dXJuIGRiLmNhbGNTcGxpY2VzKGEsYixjLGQsZSxmKX1mdW5jdGlvbiBCKGEsYixjLGQpe3JldHVybiBjPmJ8fGE+ZD8tMTpiPT1jfHxkPT1hPzA6Yz5hP2Q+Yj9iLWM6ZC1jOmI+ZD9kLWE6Yi1hfWZ1bmN0aW9uIEMoYSxiLGMsZCl7Zm9yKHZhciBlPXkoYixjLGQpLGY9ITEsZz0wLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGk9YVtoXTtpZihpLmluZGV4Kz1nLCFmKXt2YXIgaj1CKGUuaW5kZXgsZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoLGkuaW5kZXgsaS5pbmRleCtpLmFkZGVkQ291bnQpO2lmKGo+PTApe2Euc3BsaWNlKGgsMSksaC0tLGctPWkuYWRkZWRDb3VudC1pLnJlbW92ZWQubGVuZ3RoLGUuYWRkZWRDb3VudCs9aS5hZGRlZENvdW50LWo7dmFyIGs9ZS5yZW1vdmVkLmxlbmd0aCtpLnJlbW92ZWQubGVuZ3RoLWo7aWYoZS5hZGRlZENvdW50fHxrKXt2YXIgYz1pLnJlbW92ZWQ7aWYoZS5pbmRleDxpLmluZGV4KXt2YXIgbD1lLnJlbW92ZWQuc2xpY2UoMCxpLmluZGV4LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGwsYyksYz1sfWlmKGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aD5pLmluZGV4K2kuYWRkZWRDb3VudCl7dmFyIG09ZS5yZW1vdmVkLnNsaWNlKGkuaW5kZXgraS5hZGRlZENvdW50LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsbSl9ZS5yZW1vdmVkPWMsaS5pbmRleDxlLmluZGV4JiYoZS5pbmRleD1pLmluZGV4KX1lbHNlIGY9ITB9ZWxzZSBpZihlLmluZGV4PGkuaW5kZXgpe2Y9ITAsYS5zcGxpY2UoaCwwLGUpLGgrKzt2YXIgbj1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aDtpLmluZGV4Kz1uLGcrPW59fX1mfHxhLnB1c2goZSl9ZnVuY3Rpb24gRChhLGIpe2Zvcih2YXIgYz1bXSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07c3dpdGNoKGcudHlwZSl7Y2FzZSJzcGxpY2UiOkMoYyxnLmluZGV4LGcucmVtb3ZlZC5zbGljZSgpLGcuYWRkZWRDb3VudCk7YnJlYWs7Y2FzZSJuZXciOmNhc2UidXBkYXRlZCI6Y2FzZSJkZWxldGVkIjppZighZChnLm5hbWUpKWNvbnRpbnVlO3ZhciBoPWUoZy5uYW1lKTtpZigwPmgpY29udGludWU7QyhjLGgsW2cub2xkVmFsdWVdLDEpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiVW5leHBlY3RlZCByZWNvcmQgdHlwZTogIitKU09OLnN0cmluZ2lmeShnKSl9fXJldHVybiBjfWZ1bmN0aW9uIEUoYSxiKXt2YXIgYz1bXTtyZXR1cm4gRChhLGIpLmZvckVhY2goZnVuY3Rpb24oYil7cmV0dXJuIDE9PWIuYWRkZWRDb3VudCYmMT09Yi5yZW1vdmVkLmxlbmd0aD8oYi5yZW1vdmVkWzBdIT09YVtiLmluZGV4XSYmYy5wdXNoKGIpLHZvaWQgMCk6KGM9Yy5jb25jYXQoQShhLGIuaW5kZXgsYi5pbmRleCtiLmFkZGVkQ291bnQsYi5yZW1vdmVkLDAsYi5yZW1vdmVkLmxlbmd0aCkpLHZvaWQgMCl9KSxjfXZhciBGPWIoKSxHPWMoKSxIPWEuTnVtYmVyLmlzTmFOfHxmdW5jdGlvbihiKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGImJmEuaXNOYU4oYil9LEk9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LEo9IlskX2EtekEtWl0iLEs9IlskX2EtekEtWjAtOV0iLEw9SisiKyIrSysiKiIsTT0iKD86WzAtOV18WzEtOV0rWzAtOV0rKSIsTj0iKD86IitMKyJ8IitNKyIpIixPPSIoPzoiK04rIikoPzpcXHMqXFwuXFxzKiIrTisiKSoiLFA9bmV3IFJlZ0V4cCgiXiIrTysiJCIpLFE9e30sUj17fTtpLmdldD1qLGkucHJvdG90eXBlPUkoe19fcHJvdG9fXzpbXSx2YWxpZDohMCx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmpvaW4oIi4iKX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKG51bGw9PWEpcmV0dXJuO2ImJmIub2JzZXJ2ZShhKSxhPWFbdGhpc1tjXV19cmV0dXJuIGF9LGNvbXBpbGVkR2V0VmFsdWVGcm9tRm46ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8nWyInK2ErJyJdJzoiLiIrYX0pLGI9IiIsYz0ib2JqIjtiKz0iaWYgKG9iaiAhPSBudWxsIjtmb3IodmFyIGU9MDtlPHRoaXMubGVuZ3RoLTE7ZSsrKXRoaXNbZV0sYys9YVtlXSxiKz0iICYmXG4gICAgICIrYysiICE9IG51bGwiO3JldHVybiBiKz0iKVxuIixjKz1hW2VdLGIrPSIgIHJldHVybiAiK2MrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixiKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKCFmKGEpKXJldHVybiExO2E9YVt0aGlzW2NdXX1yZXR1cm4gZihhKT8oYVt0aGlzW2NdXT1iLCEwKTohMX19KTt2YXIgUz1uZXcgaSgiIixRKTtTLnZhbGlkPSExLFMuZ2V0VmFsdWVGcm9tPVMuc2V0VmFsdWVGcm9tPWZ1bmN0aW9uKCl7fTt2YXIgVD0xZTM7cC5wcm90b3R5cGU9e2ludGVybmFsQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dGhpcy5jbG9zZWR8fHRoaXMucmVwb3J0aW5nJiZ0aGlzLmNoZWNrKGEpJiYodGhpcy5yZXBvcnQoKSx0aGlzLnRlc3RpbmdSZXN1bHRzJiYodGhpcy50ZXN0aW5nUmVzdWx0cy5hbnlDaGFuZ2VkPSEwKSl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZWR8fCh0aGlzLm9iamVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMub2JqZWN0LmNsb3NlJiZ0aGlzLm9iamVjdC5jbG9zZSgpLHRoaXMuZGlzY29ubmVjdCgpLHRoaXMub2JqZWN0PXZvaWQgMCx0aGlzLmNsb3NlZD0hMCl9LGRlbGl2ZXI6ZnVuY3Rpb24oYSl7dGhpcy5jbG9zZWR8fChGPyh0aGlzLnRlc3RpbmdSZXN1bHRzPWEsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKSx0aGlzLnRlc3RpbmdSZXN1bHRzPXZvaWQgMCk6ayh0aGlzKSl9LHJlcG9ydDpmdW5jdGlvbigpe3RoaXMucmVwb3J0aW5nJiYodGhpcy5zeW5jKCExKSx0aGlzLmNhbGxiYWNrJiYodGhpcy5yZXBvcnRBcmdzLnB1c2godGhpcy50b2tlbiksdGhpcy5pbnZva2VDYWxsYmFjayh0aGlzLnJlcG9ydEFyZ3MpKSx0aGlzLnJlcG9ydEFyZ3M9dm9pZCAwKX0saW52b2tlQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuY2FsbGJhY2suYXBwbHkodGhpcy50YXJnZXQsYSl9Y2F0Y2goYil7cC5fZXJyb3JUaHJvd25EdXJpbmdDYWxsYmFjaz0hMCxjb25zb2xlLmVycm9yKCJFeGNlcHRpb24gY2F1Z2h0IGR1cmluZyBvYnNlcnZlciBjYWxsYmFjazogIisoYi5zdGFja3x8YikpfX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZHx8KEYmJih0aGlzLnJlcG9ydGluZz0hMSxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHModGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spLHRoaXMucmVwb3J0aW5nPSEwKSx0aGlzLnN5bmMoITApKX19O3ZhciBVLFY9IUZ8fGEuZm9yY2VDb2xsZWN0T2JzZXJ2ZXJzO3AuX2FsbE9ic2VydmVyc0NvdW50PTAsViYmKFU9W10pO3ZhciBXPSExLFg9ImZ1bmN0aW9uIj09dHlwZW9mIE9iamVjdC5kZWxpdmVyQWxsQ2hhbmdlUmVjb3JkczthLlBsYXRmb3JtPWEuUGxhdGZvcm18fHt9LGEuUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQ9ZnVuY3Rpb24oKXtpZighVyl7aWYoWClyZXR1cm4gT2JqZWN0LmRlbGl2ZXJBbGxDaGFuZ2VSZWNvcmRzKCksdm9pZCAwO2lmKFYpe1c9ITA7dmFyIGI9MCxjPXt9O2Rve2IrKzt2YXIgZD1VO1U9W10sYy5hbnlDaGFuZ2VkPSExO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2YuY2xvc2VkfHwoRj9mLmRlbGl2ZXIoYyk6Zi5jaGVjaygpJiYoYy5hbnlDaGFuZ2VkPSEwLGYucmVwb3J0KCkpLFUucHVzaChmKSl9fXdoaWxlKFQ+YiYmYy5hbnlDaGFuZ2VkKTthLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50JiYoYS5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1iKSxwLl9hbGxPYnNlcnZlcnNDb3VudD1VLmxlbmd0aCxXPSExfX19LFYmJihhLlBsYXRmb3JtLmNsZWFyT2JzZXJ2ZXJzPWZ1bmN0aW9uKCl7VT1bXX0pLHIucHJvdG90eXBlPUkoe19fcHJvdG9fXzpwLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RiYmT2JqZWN0Lm9ic2VydmUodGhpcy5vYmplY3QsdGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spfSxzeW5jOmZ1bmN0aW9uKCl7Rnx8KHRoaXMub2xkT2JqZWN0PW8odGhpcy5vYmplY3QpKX0sY2hlY2s6ZnVuY3Rpb24oYSl7dmFyIGIsYztpZihGKXtpZighYSlyZXR1cm4hMTtjPXt9LGI9eCh0aGlzLm9iamVjdCxhLGMpfWVsc2UgYz10aGlzLm9sZE9iamVjdCxiPW4odGhpcy5vYmplY3QsdGhpcy5vbGRPYmplY3QpO3JldHVybiBtKGIpPyExOih0aGlzLnJlcG9ydEFyZ3M9W2IuYWRkZWR8fHt9LGIucmVtb3ZlZHx8e30sYi5jaGFuZ2VkfHx7fV0sdGhpcy5yZXBvcnRBcmdzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV19KSwhMCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXtGP3RoaXMub2JqZWN0JiZPYmplY3QudW5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKTp0aGlzLm9sZE9iamVjdD12b2lkIDB9fSkscy5wcm90b3R5cGU9SSh7X19wcm90b19fOnIucHJvdG90eXBlLGNvbm5lY3Q6ZnVuY3Rpb24oKXtGJiZBcnJheS5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKX0sc3luYzpmdW5jdGlvbigpe0Z8fCh0aGlzLm9sZE9iamVjdD10aGlzLm9iamVjdC5zbGljZSgpKX0sY2hlY2s6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoRil7aWYoIWEpcmV0dXJuITE7Yj1FKHRoaXMub2JqZWN0LGEpfWVsc2UgYj1BKHRoaXMub2JqZWN0LDAsdGhpcy5vYmplY3QubGVuZ3RoLHRoaXMub2xkT2JqZWN0LDAsdGhpcy5vbGRPYmplY3QubGVuZ3RoKTtyZXR1cm4gYiYmYi5sZW5ndGg/KHRoaXMucmVwb3J0QXJncz1bYl0sITApOiExfX0pLHMuYXBwbHlTcGxpY2VzPWZ1bmN0aW9uKGEsYixjKXtjLmZvckVhY2goZnVuY3Rpb24oYyl7Zm9yKHZhciBkPVtjLmluZGV4LGMucmVtb3ZlZC5sZW5ndGhdLGU9Yy5pbmRleDtlPGMuaW5kZXgrYy5hZGRlZENvdW50OylkLnB1c2goYltlXSksZSsrO0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoYSxkKX0pfTt2YXIgWT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yoe30pLFo9T2JqZWN0LmdldFByb3RvdHlwZU9mKFtdKTt0LnByb3RvdHlwZT17cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmlzT2JzZXJ2ZWQ9IXRoaXMuaXNPYnNlcnZlZH0sb2JzZXJ2ZTpmdW5jdGlvbihhKXtpZihmKGEpJiZhIT09WSYmYSE9PVope3ZhciBiPXRoaXMuYXJyLmluZGV4T2YoYSk7Yj49MCYmdGhpcy5hcnJbYisxXT09PXRoaXMuaXNPYnNlcnZlZHx8KDA+YiYmKGI9dGhpcy5hcnIubGVuZ3RoLHRoaXMuYXJyW2JdPWEsT2JqZWN0Lm9ic2VydmUoYSx0aGlzLmNhbGxiYWNrKSksdGhpcy5hcnJbYisxXT10aGlzLmlzT2JzZXJ2ZWQsdGhpcy5vYnNlcnZlKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSkpfX0sY2xlYW51cDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPXRoaXMuaXNPYnNlcnZlZDtiPHRoaXMuYXJyLmxlbmd0aDspe3ZhciBkPXRoaXMuYXJyW2JdO3RoaXMuYXJyW2IrMV09PWM/KGI+YSYmKHRoaXMuYXJyW2FdPWQsdGhpcy5hcnJbYSsxXT1jKSxhKz0yKTpPYmplY3QudW5vYnNlcnZlKGQsdGhpcy5jYWxsYmFjayksYis9Mn10aGlzLmFyci5sZW5ndGg9YX19LHUucHJvdG90eXBlPUkoe19fcHJvdG9fXzpwLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RiYmKHRoaXMub2JzZXJ2ZWRTZXQ9bmV3IHQodGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMudmFsdWU9dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLm9ic2VydmVkU2V0JiYodGhpcy5vYnNlcnZlZFNldC5yZXNldCgpLHRoaXMub2JzZXJ2ZWRTZXQuY2xlYW51cCgpLHRoaXMub2JzZXJ2ZWRTZXQ9dm9pZCAwKX0sY2hlY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYnNlcnZlZFNldCYmdGhpcy5vYnNlcnZlZFNldC5yZXNldCgpLHRoaXMudmFsdWVfPXRoaXMucGF0aC5nZXRWYWx1ZUZyb20odGhpcy5vYmplY3QsdGhpcy5vYnNlcnZlZFNldCksdGhpcy5vYnNlcnZlZFNldCYmdGhpcy5vYnNlcnZlZFNldC5jbGVhbnVwKCksZyh0aGlzLnZhbHVlXyx0aGlzLm9sZFZhbHVlXyk/ITE6KHRoaXMudmFsdWU9dGhpcy52YWx1ZUZuP3RoaXMudmFsdWVGbih0aGlzLnZhbHVlXyk6dGhpcy52YWx1ZV8sdGhpcy5yZXBvcnRBcmdzPVt0aGlzLnZhbHVlLHRoaXMub2xkVmFsdWVdLCEwKX0sc3luYzpmdW5jdGlvbihhKXthJiYodGhpcy5vYnNlcnZlZFNldCYmdGhpcy5vYnNlcnZlZFNldC5yZXNldCgpLHRoaXMudmFsdWVfPXRoaXMucGF0aC5nZXRWYWx1ZUZyb20odGhpcy5vYmplY3QsdGhpcy5vYnNlcnZlZFNldCksdGhpcy52YWx1ZT10aGlzLnZhbHVlRm4/dGhpcy52YWx1ZUZuKHRoaXMudmFsdWVfKTp0aGlzLnZhbHVlXyx0aGlzLm9ic2VydmVkU2V0JiZ0aGlzLm9ic2VydmVkU2V0LmNsZWFudXAoKSksdGhpcy5vbGRWYWx1ZV89dGhpcy52YWx1ZV8sdGhpcy5vbGRWYWx1ZT10aGlzLnZhbHVlfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt0aGlzLnBhdGgmJigiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5zZXRWYWx1ZUZuJiYoYT10aGlzLnNldFZhbHVlRm4oYSkpLHRoaXMucGF0aC5zZXRWYWx1ZUZyb20odGhpcy5vYmplY3QsYSkpfX0pLHYucHJvdG90eXBlPUkoe19fcHJvdG9fXzp1LnByb3RvdHlwZSxhZGRQYXRoOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGFydGVkKXRocm93IEVycm9yKCJDYW5ub3QgYWRkIG1vcmUgcGF0aHMgb25jZSBzdGFydGVkLiIpO3ZhciBiPWIgaW5zdGFuY2VvZiBpP2I6aihiKSxjPWI/Yi5nZXRWYWx1ZUZyb20oYSk6dm9pZCAwO3RoaXMub2JzZXJ2ZWQucHVzaChhLGIpLHRoaXMudmFsdWVzLnB1c2goYyl9LHN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5jb25uZWN0KCksdGhpcy5zeW5jKCEwKX0sZ2V0VmFsdWVzOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZlZFNldCYmdGhpcy5vYnNlcnZlZFNldC5yZXNldCgpO2Zvcih2YXIgYT0hMSxiPTA7Yjx0aGlzLm9ic2VydmVkLmxlbmd0aDtiKz0yKXt2YXIgYz10aGlzLm9ic2VydmVkW2IrMV07aWYoYyl7dmFyIGQ9dGhpcy5vYnNlcnZlZFtiXSxlPWMuZ2V0VmFsdWVGcm9tKGQsdGhpcy5vYnNlcnZlZFNldCksZj10aGlzLnZhbHVlc1tiLzJdO2lmKCFnKGUsZikpe2lmKCFhJiYhdGhpcy52YWx1ZUZuKXt0aGlzLm9sZFZhbHVlcz10aGlzLm9sZFZhbHVlc3x8W107Zm9yKHZhciBoPTA7aDx0aGlzLnZhbHVlcy5sZW5ndGg7aCsrKXRoaXMub2xkVmFsdWVzW2hdPXRoaXMudmFsdWVzW2hdfXRoaXMudmFsdWVzW2IvMl09ZSxhPSEwfX19cmV0dXJuIHRoaXMub2JzZXJ2ZWRTZXQmJnRoaXMub2JzZXJ2ZWRTZXQuY2xlYW51cCgpLGF9LGNoZWNrOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRWYWx1ZXMoKSl7aWYodGhpcy52YWx1ZUZuKXtpZih0aGlzLnZhbHVlPXRoaXMudmFsdWVGbih0aGlzLnZhbHVlcyksZyh0aGlzLnZhbHVlLHRoaXMub2xkVmFsdWUpKXJldHVybiExO3RoaXMucmVwb3J0QXJncz1bdGhpcy52YWx1ZSx0aGlzLm9sZFZhbHVlXX1lbHNlIHRoaXMucmVwb3J0QXJncz1bdGhpcy52YWx1ZXMsdGhpcy5vbGRWYWx1ZXNdO3JldHVybiEwfX0sc3luYzpmdW5jdGlvbihhKXthJiYodGhpcy5nZXRWYWx1ZXMoKSx0aGlzLnZhbHVlRm4mJih0aGlzLnZhbHVlPXRoaXMudmFsdWVGbih0aGlzLnZhbHVlcykpKSx0aGlzLnZhbHVlRm4mJih0aGlzLm9sZFZhbHVlPXRoaXMudmFsdWUpfSxjbG9zZTpmdW5jdGlvbigpe2lmKHRoaXMub2JzZXJ2ZWQpe2Zvcih2YXIgYT0wO2E8dGhpcy5vYnNlcnZlZC5sZW5ndGg7YSs9Mil7dmFyIGI9dGhpcy5vYnNlcnZlZFthXTtiJiYiZnVuY3Rpb24iPT10eXBlb2YgYi5jbG9zZSYmYi5jbG9zZSgpfXRoaXMub2JzZXJ2ZWQ9dm9pZCAwLHRoaXMudmFsdWVzPXZvaWQgMH1wLnByb3RvdHlwZS5jbG9zZS5jYWxsKHRoaXMpfX0pO3ZhciAkPXsibmV3IjohMCx1cGRhdGVkOiEwLGRlbGV0ZWQ6ITB9O3UuZGVmaW5lUHJvcGVydHk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMub2JqZWN0LGU9aihjLnBhdGgpLGY9dyhhLGIpLGc9bmV3IHUoZCxjLnBhdGgsZnVuY3Rpb24oYSxiKXtmJiZmKCJ1cGRhdGVkIixiKX0pO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRWYWx1ZUZyb20oZCl9LHNldDpmdW5jdGlvbihhKXtlLnNldFZhbHVlRnJvbShkLGEpfSxjb25maWd1cmFibGU6ITB9KSx7Y2xvc2U6ZnVuY3Rpb24oKXt2YXIgYz1lLmdldFZhbHVlRnJvbShkKTtmJiZnLmRlbGl2ZXIoKSxnLmNsb3NlKCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7dmFsdWU6Yyx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19fTt2YXIgXz0wLGFiPTEsYmI9MixjYj0zO3oucHJvdG90eXBlPXtjYWxjRWRpdERpc3RhbmNlczpmdW5jdGlvbihhLGIsYyxkLGUsZil7Zm9yKHZhciBnPWYtZSsxLGg9Yy1iKzEsaT1uZXcgQXJyYXkoZyksaj0wO2c+ajtqKyspaVtqXT1uZXcgQXJyYXkoaCksaVtqXVswXT1qO2Zvcih2YXIgaz0wO2g+aztrKyspaVswXVtrXT1rO2Zvcih2YXIgaj0xO2c+ajtqKyspZm9yKHZhciBrPTE7aD5rO2srKylpZih0aGlzLmVxdWFscyhhW2Iray0xXSxkW2Urai0xXSkpaVtqXVtrXT1pW2otMV1bay0xXTtlbHNle3ZhciBsPWlbai0xXVtrXSsxLG09aVtqXVtrLTFdKzE7aVtqXVtrXT1tPmw/bDptfXJldHVybiBpfSxzcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTEsYz1hWzBdLmxlbmd0aC0xLGQ9YVtiXVtjXSxlPVtdO2I+MHx8Yz4wOylpZigwIT1iKWlmKDAhPWMpe3ZhciBmLGc9YVtiLTFdW2MtMV0saD1hW2ItMV1bY10saT1hW2JdW2MtMV07Zj1pPmg/Zz5oP2g6ZzpnPmk/aTpnLGY9PWc/KGc9PWQ/ZS5wdXNoKF8pOihlLnB1c2goYWIpLGQ9ZyksYi0tLGMtLSk6Zj09aD8oZS5wdXNoKGNiKSxiLS0sZD1oKTooZS5wdXNoKGJiKSxjLS0sZD1pKX1lbHNlIGUucHVzaChjYiksYi0tO2Vsc2UgZS5wdXNoKGJiKSxjLS07cmV0dXJuIGUucmV2ZXJzZSgpLGV9LGNhbGNTcGxpY2VzOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz0wLGg9MCxpPU1hdGgubWluKGMtYixmLWUpO2lmKDA9PWImJjA9PWUmJihnPXRoaXMuc2hhcmVkUHJlZml4KGEsZCxpKSksYz09YS5sZW5ndGgmJmY9PWQubGVuZ3RoJiYoaD10aGlzLnNoYXJlZFN1ZmZpeChhLGQsaS1nKSksYis9ZyxlKz1nLGMtPWgsZi09aCwwPT1jLWImJjA9PWYtZSlyZXR1cm5bXTtpZihiPT1jKXtmb3IodmFyIGo9eShiLFtdLDApO2Y+ZTspai5yZW1vdmVkLnB1c2goZFtlKytdKTtyZXR1cm5bal19aWYoZT09ZilyZXR1cm5beShiLFtdLGMtYildO2Zvcih2YXIgaz10aGlzLnNwbGljZU9wZXJhdGlvbnNGcm9tRWRpdERpc3RhbmNlcyh0aGlzLmNhbGNFZGl0RGlzdGFuY2VzKGEsYixjLGQsZSxmKSksaj12b2lkIDAsbD1bXSxtPWIsbj1lLG89MDtvPGsubGVuZ3RoO28rKylzd2l0Y2goa1tvXSl7Y2FzZSBfOmomJihsLnB1c2goaiksaj12b2lkIDApLG0rKyxuKys7YnJlYWs7Y2FzZSBhYjpqfHwoaj15KG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSBiYjpqfHwoaj15KG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIGNiOmp8fChqPXkobSxbXSwwKSksai5yZW1vdmVkLnB1c2goZFtuXSksbisrfXJldHVybiBqJiZsLnB1c2goaiksbH0sc2hhcmVkUHJlZml4OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MDtjPmQ7ZCsrKWlmKCF0aGlzLmVxdWFscyhhW2RdLGJbZF0pKXJldHVybiBkO3JldHVybiBjfSxzaGFyZWRTdWZmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPWIubGVuZ3RoLGY9MDtjPmYmJnRoaXMuZXF1YWxzKGFbLS1kXSxiWy0tZV0pOylmKys7cmV0dXJuIGZ9LGNhbGN1bGF0ZVNwbGljZXM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxjU3BsaWNlcyhhLDAsYS5sZW5ndGgsYiwwLGIubGVuZ3RoKX0sZXF1YWxzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifX07dmFyIGRiPW5ldyB6O2EuT2JzZXJ2ZXI9cCxhLk9ic2VydmVyLmhhc09iamVjdE9ic2VydmU9RixhLkFycmF5T2JzZXJ2ZXI9cyxhLkFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcz1mdW5jdGlvbihhLGIpe3JldHVybiBkYi5jYWxjdWxhdGVTcGxpY2VzKGEsYil9LGEuQXJyYXlTcGxpY2U9eixhLk9iamVjdE9ic2VydmVyPXIsYS5QYXRoT2JzZXJ2ZXI9dSxhLkNvbXBvdW5kUGF0aE9ic2VydmVyPXYsYS5QYXRoPWl9KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWw/Z2xvYmFsOnRoaXMpLHdpbmRvdy5QbGF0Zm9ybT13aW5kb3cuUGxhdGZvcm18fHt9LHdpbmRvdy5sb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LGZ1bmN0aW9uKGEpe3ZhciBiPWEuZmxhZ3N8fHt9O2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9IiksYVswXSYmKGJbYVswXV09YVsxXXx8ITApfSksYi5zaGFkb3c9Yi5zaGFkb3d8fGIuc2hhZG93ZG9tfHxiLnBvbHlmaWxsLGIuc2hhZG93PSJuYXRpdmUiPT09Yi5zaGFkb3c/ITE6Yi5zaGFkb3d8fCFIVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdCYmInBvbHlmaWxsIixhLmZsYWdzPWJ9KFBsYXRmb3JtKSwicG9seWZpbGwiPT09UGxhdGZvcm0uZmxhZ3Muc2hhZG93KXsoInVuZGVmaW5lZCI9PXR5cGVvZiBXZWFrTWFwfHxuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3gvIik+LTEpJiYhZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1EYXRlLm5vdygpJTFlOSxjPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYisrICsiX18iKX07Yy5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihiLGMpe3ZhciBkPWJbdGhpcy5uYW1lXTtkJiZkWzBdPT09Yj9kWzFdPWM6YShiLHRoaXMubmFtZSx7dmFsdWU6W2IsY10sd3JpdGFibGU6ITB9KX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybihiPWFbdGhpcy5uYW1lXSkmJmJbMF09PT1hP2JbMV06dm9pZCAwfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt0aGlzLnNldChhLHZvaWQgMCl9fSx3aW5kb3cuV2Vha01hcD1jfSgpO3ZhciBTaGFkb3dET01Qb2x5ZmlsbD17fTshZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLGMpKX0pLGF9ZnVuY3Rpb24gZChhLGIpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3N3aXRjaChjKXtjYXNlImFyZ3VtZW50cyI6Y2FzZSJjYWxsZXIiOmNhc2UibGVuZ3RoIjpjYXNlIm5hbWUiOmNhc2UicHJvdG90eXBlIjpjYXNlInRvU3RyaW5nIjpyZXR1cm59T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSksYX1mdW5jdGlvbiBlKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXWluIGEpcmV0dXJuIGJbY119ZnVuY3Rpb24gZihhKXt2YXIgYj1hLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9Qy5nZXQoYik7aWYoYylyZXR1cm4gYzt2YXIgZD1mKGIpLGU9cihkKTtyZXR1cm4gbyhiLGUsYSksZX1mdW5jdGlvbiBnKGEsYil7bShhLGIsITApfWZ1bmN0aW9uIGgoYSxiKXttKGIsYSwhMSl9ZnVuY3Rpb24gaShhKXtyZXR1cm4vXm9uW2Etel0rJC8udGVzdChhKX1mdW5jdGlvbiBqKGEpe3JldHVybiBGP25ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMuaW1wbC4iK2EpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbFthXX19ZnVuY3Rpb24gayhhKXtyZXR1cm4gRj9uZXcgRnVuY3Rpb24oInYiLCJ0aGlzLmltcGwuIithKyIgPSB2Iik6ZnVuY3Rpb24oYil7dGhpcy5pbXBsW2FdPWJ9fWZ1bmN0aW9uIGwoYSl7cmV0dXJuIEY/bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcy5pbXBsLiIrYSsiLmFwcGx5KHRoaXMuaW1wbCwgYXJndW1lbnRzKSIpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbFthXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19ZnVuY3Rpb24gbShiLGMsZCl7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihlKXtpZighKGUgaW4gYykpe0kmJmIuX19sb29rdXBHZXR0ZXJfXyhlKTt2YXIgZjt0cnl7Zj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsZSl9Y2F0Y2goZyl7Zj1KfXZhciBoLG07aWYoZCYmImZ1bmN0aW9uIj09dHlwZW9mIGYudmFsdWUpcmV0dXJuIGNbZV09bChlKSx2b2lkIDA7dmFyIG49aShlKTtoPW4/YS5nZXRFdmVudEhhbmRsZXJHZXR0ZXIoZSk6aihlKSwoZi53cml0YWJsZXx8Zi5zZXQpJiYobT1uP2EuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyKGUpOmsoZSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGUse2dldDpoLHNldDptLGNvbmZpZ3VyYWJsZTpmLmNvbmZpZ3VyYWJsZSxlbnVtZXJhYmxlOmYuZW51bWVyYWJsZX0pfX0pfWZ1bmN0aW9uIG4oYSxiLGMpe3ZhciBlPWEucHJvdG90eXBlO28oZSxiLGMpLGQoYixhKX1mdW5jdGlvbiBvKGEsYyxkKXt2YXIgZT1jLnByb3RvdHlwZTtiKHZvaWQgMD09PUMuZ2V0KGEpKSxDLnNldChhLGMpLEQuc2V0KGUsYSksZyhhLGUpLGQmJmgoZSxkKX1mdW5jdGlvbiBwKGEsYil7cmV0dXJuIEMuZ2V0KGIucHJvdG90eXBlKT09PWF9ZnVuY3Rpb24gcShhKXt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYz1mKGIpLGQ9cihjKTtyZXR1cm4gbyhiLGQsYSksZH1mdW5jdGlvbiByKGEpe2Z1bmN0aW9uIGIoYil7YS5jYWxsKHRoaXMsYil9cmV0dXJuIGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpLGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWIsYn1mdW5jdGlvbiBzKGEpe3JldHVybiBhIGluc3RhbmNlb2YgRS5FdmVudFRhcmdldHx8YSBpbnN0YW5jZW9mIEUuRXZlbnR8fGEgaW5zdGFuY2VvZiBFLlJhbmdlfHxhIGluc3RhbmNlb2YgRS5ET01JbXBsZW1lbnRhdGlvbn1mdW5jdGlvbiB0KGEpe3JldHVybiBhIGluc3RhbmNlb2YgTXx8YSBpbnN0YW5jZW9mIEx8fGEgaW5zdGFuY2VvZiBOfHxhIGluc3RhbmNlb2YgT3x8YSBpbnN0YW5jZW9mIEt9ZnVuY3Rpb24gdShhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYih0KGEpKSxhLnBvbHltZXJXcmFwcGVyX3x8KGEucG9seW1lcldyYXBwZXJfPW5ldyhmKGEpKShhKSkpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIG51bGw9PT1hP251bGw6KGIocyhhKSksYS5pbXBsKX1mdW5jdGlvbiB3KGEpe3JldHVybiBhJiZzKGEpP3YoYSk6YX1mdW5jdGlvbiB4KGEpe3JldHVybiBhJiYhcyhhKT91KGEpOmF9ZnVuY3Rpb24geShhLGMpe251bGwhPT1jJiYoYih0KGEpKSxiKHZvaWQgMD09PWN8fHMoYykpLGEucG9seW1lcldyYXBwZXJfPWMpfWZ1bmN0aW9uIHooYSxiLGMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLnByb3RvdHlwZSxiLHtnZXQ6Yyxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfWZ1bmN0aW9uIEEoYSxiKXt6KGEsYixmdW5jdGlvbigpe3JldHVybiB1KHRoaXMuaW1wbFtiXSl9KX1mdW5jdGlvbiBCKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IuZm9yRWFjaChmdW5jdGlvbihiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3ZhciBhPXgodGhpcyk7cmV0dXJuIGFbYl0uYXBwbHkoYSxhcmd1bWVudHMpfX0pfSl9dmFyIEM9bmV3IFdlYWtNYXAsRD1uZXcgV2Vha01hcCxFPU9iamVjdC5jcmVhdGUobnVsbCksRj0hKCJzZWN1cml0eVBvbGljeSJpbiBkb2N1bWVudCl8fGRvY3VtZW50LnNlY3VyaXR5UG9saWN5LmFsbG93c0V2YWw7aWYoRil0cnl7dmFyIEc9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtGPUcoKX1jYXRjaChIKXt9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTt2YXIgST0vRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxKPXtnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5jdGlvbigpe30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9LEs9RE9NSW1wbGVtZW50YXRpb24sTD1FdmVudCxNPU5vZGUsTj1XaW5kb3csTz1SYW5nZTthLmFzc2VydD1iLGEuY29uc3RydWN0b3JUYWJsZT1DLGEuZGVmaW5lR2V0dGVyPXosYS5kZWZpbmVXcmFwR2V0dGVyPUEsYS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcj1CLGEuaXNXcmFwcGVyRm9yPXAsYS5taXhpbj1jLGEubmF0aXZlUHJvdG90eXBlVGFibGU9RCxhLm9uZU9mPWUsYS5yZWdpc3Rlck9iamVjdD1xLGEucmVnaXN0ZXJXcmFwcGVyPW4sYS5yZXdyYXA9eSxhLnVud3JhcD12LGEudW53cmFwSWZOZWVkZWQ9dyxhLndyYXA9dSxhLndyYXBJZk5lZWRlZD14LGEud3JhcHBlcnM9RX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBOLlNoYWRvd1Jvb3R9ZnVuY3Rpb24gYyhhKXt2YXIgYj1hLmxvY2FsTmFtZTtyZXR1cm4iY29udGVudCI9PT1ifHwic2hhZG93Ij09PWJ9ZnVuY3Rpb24gZChhKXtyZXR1cm4hIWEuc2hhZG93Um9vdH1mdW5jdGlvbiBlKGEpe3ZhciBiO3JldHVybiBhLnBhcmVudE5vZGV8fChiPWEuZGVmYXVsdFZpZXcpJiZNKGIpfHxudWxsfWZ1bmN0aW9uIGYoZixnLGgpe2lmKGgubGVuZ3RoKXJldHVybiBoLnNoaWZ0KCk7aWYoYihmKSlyZXR1cm4gaihmKXx8YS5nZXRIb3N0Rm9yU2hhZG93Um9vdChmKTt2YXIgaT1hLmV2ZW50UGFyZW50c1RhYmxlLmdldChmKTtpZihpKXtmb3IodmFyIGs9MTtrPGkubGVuZ3RoO2srKyloW2stMV09aVtrXTtyZXR1cm4gaVswXX1pZihnJiZjKGYpKXt2YXIgbD1mLnBhcmVudE5vZGU7aWYobCYmZChsKSlmb3IodmFyIG09YS5nZXRTaGFkb3dUcmVlcyhsKSxuPWooZyksaz0wO2s8bS5sZW5ndGg7aysrKWlmKG1ba10uY29udGFpbnMobikpcmV0dXJuIG59cmV0dXJuIGUoZil9ZnVuY3Rpb24gZyhhKXtmb3IodmFyIGQ9W10sZT1hLGc9W10saT1bXTtlOyl7dmFyIGo9bnVsbDtpZihjKGUpKXtqPWgoZCk7dmFyIGs9ZFtkLmxlbmd0aC0xXXx8ZTtkLnB1c2goayl9ZWxzZSBkLmxlbmd0aHx8ZC5wdXNoKGUpO3ZhciBsPWRbZC5sZW5ndGgtMV07Zy5wdXNoKHt0YXJnZXQ6bCxjdXJyZW50VGFyZ2V0OmV9KSxiKGUpJiZkLnBvcCgpLGU9ZihlLGosaSl9cmV0dXJuIGd9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9YS5sZW5ndGgtMTtiPj0wO2ItLSlpZighYyhhW2JdKSlyZXR1cm4gYVtiXTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBpKGQsZSl7Zm9yKHZhciBnPVtdO2Q7KXtmb3IodmFyIGk9W10saj1lLGw9dm9pZCAwO2o7KXt2YXIgbj1udWxsO2lmKGkubGVuZ3RoKXtpZihjKGopJiYobj1oKGkpLGsobCkpKXt2YXIgbz1pW2kubGVuZ3RoLTFdO2kucHVzaChvKX19ZWxzZSBpLnB1c2goaik7aWYobShqLGQpKXJldHVybiBpW2kubGVuZ3RoLTFdO2IoaikmJmkucG9wKCksbD1qLGo9ZihqLG4sZyl9ZD1iKGQpP2EuZ2V0SG9zdEZvclNoYWRvd1Jvb3QoZCk6ZC5wYXJlbnROb2RlfX1mdW5jdGlvbiBqKGIpe3JldHVybiBhLmluc2VydGlvblBhcmVudFRhYmxlLmdldChiKX1mdW5jdGlvbiBrKGEpe3JldHVybiBqKGEpfWZ1bmN0aW9uIGwoYSl7Zm9yKHZhciBiO2I9YS5wYXJlbnROb2RlOylhPWI7cmV0dXJuIGF9ZnVuY3Rpb24gbShhLGIpe3JldHVybiBsKGEpPT09bChiKX1mdW5jdGlvbiBuKGIsYyl7aWYoYj09PWMpcmV0dXJuITA7aWYoYiBpbnN0YW5jZW9mIE4uU2hhZG93Um9vdCl7dmFyIGQ9YS5nZXRIb3N0Rm9yU2hhZG93Um9vdChiKTtyZXR1cm4gbihsKGQpLGMpfXJldHVybiExfWZ1bmN0aW9uIG8oYSl7c3dpdGNoKGEpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjpjYXNlIkRPTUF0dHJpYnV0ZU5hbWVDaGFuZ2VkIjpjYXNlIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCI6Y2FzZSJET01FbGVtZW50TmFtZUNoYW5nZWQiOmNhc2UiRE9NTm9kZUluc2VydGVkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZEludG9Eb2N1bWVudCI6Y2FzZSJET01Ob2RlUmVtb3ZlZCI6Y2FzZSJET01Ob2RlUmVtb3ZlZEZyb21Eb2N1bWVudCI6Y2FzZSJET01TdWJ0cmVlTW9kaWZpZWQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIHAoYil7aWYoIVAuZ2V0KGIpKXtQLnNldChiLCEwKSxvKGIudHlwZSl8fGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBjPU0oYi50YXJnZXQpLGQ9TShiKTtyZXR1cm4gcShkLGMpfX1mdW5jdGlvbiBxKGEsYil7dmFyIGM9ZyhiKTtyZXR1cm4ibG9hZCI9PT1hLnR5cGUmJjI9PT1jLmxlbmd0aCYmY1swXS50YXJnZXQgaW5zdGFuY2VvZiBOLkRvY3VtZW50JiZjLnNoaWZ0KCksWC5zZXQoYSxjKSxyKGEsYykmJnMoYSxjKSYmdChhLGMpLFQuc2V0KGEsdy5OT05FKSxSLnNldChhLG51bGwpLGEuZGVmYXVsdFByZXZlbnRlZH1mdW5jdGlvbiByKGEsYil7Zm9yKHZhciBjLGQ9Yi5sZW5ndGgtMTtkPjA7ZC0tKXt2YXIgZT1iW2RdLnRhcmdldCxmPWJbZF0uY3VycmVudFRhcmdldDtpZihlIT09ZiYmKGM9dy5DQVBUVVJJTkdfUEhBU0UsIXUoYltkXSxhLGMpKSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBzKGEsYil7dmFyIGM9dy5BVF9UQVJHRVQ7cmV0dXJuIHUoYlswXSxhLGMpfWZ1bmN0aW9uIHQoYSxiKXtmb3IodmFyIGMsZD1hLmJ1YmJsZXMsZT0xO2U8Yi5sZW5ndGg7ZSsrKXt2YXIgZj1iW2VdLnRhcmdldCxnPWJbZV0uY3VycmVudFRhcmdldDtpZihmPT09ZyljPXcuQVRfVEFSR0VUO2Vsc2V7aWYoIWR8fFYuZ2V0KGEpKWNvbnRpbnVlO2M9dy5CVUJCTElOR19QSEFTRX1pZighdShiW2VdLGEsYykpcmV0dXJufX1mdW5jdGlvbiB1KGEsYixjKXt2YXIgZD1hLnRhcmdldCxlPWEuY3VycmVudFRhcmdldCxmPU8uZ2V0KGUpO2lmKCFmKXJldHVybiEwO2lmKCJyZWxhdGVkVGFyZ2V0ImluIGIpe3ZhciBnPUwoYiksaD1NKGcucmVsYXRlZFRhcmdldCksaj1pKGUsaCk7aWYoaj09PWQpcmV0dXJuITA7Uy5zZXQoYixqKX1ULnNldChiLGMpO3ZhciBrPWIudHlwZSxsPSExO1Euc2V0KGIsZCksUi5zZXQoYixlKTtmb3IodmFyIG09MDttPGYubGVuZ3RoO20rKyl7dmFyIG49ZlttXTtpZihuLnJlbW92ZWQpbD0hMDtlbHNlIGlmKCEobi50eXBlIT09a3x8IW4uY2FwdHVyZSYmYz09PXcuQ0FQVFVSSU5HX1BIQVNFfHxuLmNhcHR1cmUmJmM9PT13LkJVQkJMSU5HX1BIQVNFKSl0cnl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4uaGFuZGxlcj9uLmhhbmRsZXIuY2FsbChlLGIpOm4uaGFuZGxlci5oYW5kbGVFdmVudChiKSxWLmdldChiKSlyZXR1cm4hMX1jYXRjaChvKXt3aW5kb3cub25lcnJvcj93aW5kb3cub25lcnJvcihvLm1lc3NhZ2UpOmNvbnNvbGUuZXJyb3Iobyl9fWlmKGwpe3ZhciBwPWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgbT0wO208cC5sZW5ndGg7bSsrKXBbbV0ucmVtb3ZlZHx8Zi5wdXNoKHBbbV0pfXJldHVybiFVLmdldChiKX1mdW5jdGlvbiB2KGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB3KGEsYil7cmV0dXJuIGEgaW5zdGFuY2VvZiBZPyh0aGlzLmltcGw9YSx2b2lkIDApOk0oQShZLCJFdmVudCIsYSxiKSl9ZnVuY3Rpb24geChhKXtyZXR1cm4gYSYmYS5yZWxhdGVkVGFyZ2V0P09iamVjdC5jcmVhdGUoYSx7cmVsYXRlZFRhcmdldDp7dmFsdWU6TChhLnJlbGF0ZWRUYXJnZXQpfX0pOmF9ZnVuY3Rpb24geShhLGIsYyl7dmFyIGQ9d2luZG93W2FdLGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYiBpbnN0YW5jZW9mIGQ/KHRoaXMuaW1wbD1iLHZvaWQgMCk6TShBKGQsYSxiLGMpKX07cmV0dXJuIGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLGMmJkooZS5wcm90b3R5cGUsYyksZCYmKGQucHJvdG90eXBlWyJpbml0IithXT9LKGQsZSxkb2N1bWVudC5jcmVhdGVFdmVudChhKSk6SyhkLGUsbmV3IGQoInRlbXAiKSkpLGV9ZnVuY3Rpb24geihhLGIpe3JldHVybiBmdW5jdGlvbigpe2FyZ3VtZW50c1tiXT1MKGFyZ3VtZW50c1tiXSk7dmFyIGM9TCh0aGlzKTtjW2FdLmFwcGx5KGMsYXJndW1lbnRzKX19ZnVuY3Rpb24gQShhLGIsYyxkKXtpZihnYilyZXR1cm4gbmV3IGEoYyx4KGQpKTt2YXIgZT1MKGRvY3VtZW50LmNyZWF0ZUV2ZW50KGIpKSxmPWZiW2JdLGc9W2NdO3JldHVybiBPYmplY3Qua2V5cyhmKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPW51bGwhPWQmJmEgaW4gZD9kW2FdOmZbYV07InJlbGF0ZWRUYXJnZXQiPT09YSYmKGI9TChiKSksZy5wdXNoKGIpfSksZVsiaW5pdCIrYl0uYXBwbHkoZSxnKSxlfWZ1bmN0aW9uIEIoYSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGE/ITA6YSYmYS5oYW5kbGVFdmVudH1mdW5jdGlvbiBDKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIEQoYil7cmV0dXJuIGIgaW5zdGFuY2VvZiBOLlNoYWRvd1Jvb3QmJihiPWEuZ2V0SG9zdEZvclNoYWRvd1Jvb3QoYikpLEwoYil9ZnVuY3Rpb24gRShhKXtJKGEsamIpfWZ1bmN0aW9uIEYoYixjLGQsZSl7YS5yZW5kZXJBbGxQZW5kaW5nKCk7Zm9yKHZhciBmPU0oa2IuY2FsbChjLmltcGwsZCxlKSksaD1nKGYsdGhpcyksaT0wO2k8aC5sZW5ndGg7aSsrKXt2YXIgaj1oW2ldO2lmKGouY3VycmVudFRhcmdldD09PWIpcmV0dXJuIGoudGFyZ2V0fXJldHVybiBudWxsfWZ1bmN0aW9uIEcoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9Vy5nZXQodGhpcyk7cmV0dXJuIGImJmJbYV0mJmJbYV0udmFsdWV8fG51bGx9fWZ1bmN0aW9uIEgoYSl7dmFyIGI9YS5zbGljZSgyKTtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9Vy5nZXQodGhpcyk7ZHx8KGQ9T2JqZWN0LmNyZWF0ZShudWxsKSxXLnNldCh0aGlzLGQpKTt2YXIgZT1kW2FdO2lmKGUmJnRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGUud3JhcHBlZCwhMSksImZ1bmN0aW9uIj09dHlwZW9mIGMpe3ZhciBmPWZ1bmN0aW9uKGIpe3ZhciBkPWMuY2FsbCh0aGlzLGIpO2Q9PT0hMT9iLnByZXZlbnREZWZhdWx0KCk6Im9uYmVmb3JldW5sb2FkIj09PWEmJiJzdHJpbmciPT10eXBlb2YgZCYmKGIucmV0dXJuVmFsdWU9ZCl9O3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihiLGYsITEpLGRbYV09e3ZhbHVlOmMsd3JhcHBlZDpmfX19fXZhciBJPWEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIsSj1hLm1peGluLEs9YS5yZWdpc3RlcldyYXBwZXIsTD1hLnVud3JhcCxNPWEud3JhcCxOPWEud3JhcHBlcnM7bmV3IFdlYWtNYXA7dmFyIE89bmV3IFdlYWtNYXAsUD1uZXcgV2Vha01hcCxRPW5ldyBXZWFrTWFwLFI9bmV3IFdlYWtNYXAsUz1uZXcgV2Vha01hcCxUPW5ldyBXZWFrTWFwLFU9bmV3IFdlYWtNYXAsVj1uZXcgV2Vha01hcCxXPW5ldyBXZWFrTWFwLFg9bmV3IFdlYWtNYXA7di5wcm90b3R5cGU9e2VxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGVyPT09YS5oYW5kbGVyJiZ0aGlzLnR5cGU9PT1hLnR5cGUmJnRoaXMuY2FwdHVyZT09PWEuY2FwdHVyZX0sZ2V0IHJlbW92ZWQoKXtyZXR1cm4gbnVsbD09PXRoaXMuaGFuZGxlcn0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW51bGx9fTt2YXIgWT13aW5kb3cuRXZlbnQ7dy5wcm90b3R5cGU9e2dldCB0YXJnZXQoKXtyZXR1cm4gUS5nZXQodGhpcyl9LGdldCBjdXJyZW50VGFyZ2V0KCl7cmV0dXJuIFIuZ2V0KHRoaXMpfSxnZXQgZXZlbnRQaGFzZSgpe3JldHVybiBULmdldCh0aGlzKX0sZ2V0IHBhdGgoKXt2YXIgYT1uZXcgTi5Ob2RlTGlzdCxiPVguZ2V0KHRoaXMpO2lmKGIpe2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGgtMSxlPWwoUi5nZXQodGhpcykpLGY9MDtkPj1mO2YrKyl7dmFyIGc9YltmXS5jdXJyZW50VGFyZ2V0LGg9bChnKTtuKGUsaCkmJihmIT09ZHx8ZyBpbnN0YW5jZW9mIE4uTm9kZSkmJihhW2MrK109Zyl9YS5sZW5ndGg9Y31yZXR1cm4gYX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7VS5zZXQodGhpcywhMCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe1Uuc2V0KHRoaXMsITApLFYuc2V0KHRoaXMsITApfX0sSyhZLHcsZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50IikpO3ZhciBaPXkoIlVJRXZlbnQiLHcpLCQ9eSgiQ3VzdG9tRXZlbnQiLHcpLF89e2dldCByZWxhdGVkVGFyZ2V0KCl7cmV0dXJuIFMuZ2V0KHRoaXMpfHxNKEwodGhpcykucmVsYXRlZFRhcmdldCl9fSxhYj1KKHtpbml0TW91c2VFdmVudDp6KCJpbml0TW91c2VFdmVudCIsMTQpfSxfKSxiYj1KKHtpbml0Rm9jdXNFdmVudDp6KCJpbml0Rm9jdXNFdmVudCIsNSl9LF8pLGNiPXkoIk1vdXNlRXZlbnQiLFosYWIpLGRiPXkoIkZvY3VzRXZlbnQiLFosYmIpLGViPXkoIk11dGF0aW9uRXZlbnQiLHcse2luaXRNdXRhdGlvbkV2ZW50OnooImluaXRNdXRhdGlvbkV2ZW50IiwzKSxnZXQgcmVsYXRlZE5vZGUoKXtyZXR1cm4gTSh0aGlzLmltcGwucmVsYXRlZE5vZGUpfX0pLGZiPU9iamVjdC5jcmVhdGUobnVsbCksZ2I9ZnVuY3Rpb24oKXt0cnl7bmV3IHdpbmRvdy5Nb3VzZUV2ZW50KCJjbGljayIpfWNhdGNoKGEpe3JldHVybiExfXJldHVybiEwfSgpO2lmKCFnYil7dmFyIGhiPWZ1bmN0aW9uKGEsYixjKXtpZihjKXt2YXIgZD1mYltjXTtiPUooSih7fSxkKSxiKX1mYlthXT1ifTtoYigiRXZlbnQiLHtidWJibGVzOiExLGNhbmNlbGFibGU6ITF9KSxoYigiQ3VzdG9tRXZlbnQiLHtkZXRhaWw6bnVsbH0sIkV2ZW50IiksaGIoIlVJRXZlbnQiLHt2aWV3Om51bGwsZGV0YWlsOjB9LCJFdmVudCIpLGhiKCJNb3VzZUV2ZW50Iix7c2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpLGhiKCJGb2N1c0V2ZW50Iix7cmVsYXRlZFRhcmdldDpudWxsfSwiVUlFdmVudCIpfXZhciBpYj13aW5kb3cuRXZlbnRUYXJnZXQsamI9WyJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiXTtbTm9kZSxXaW5kb3ddLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5wcm90b3R5cGU7amIuZm9yRWFjaChmdW5jdGlvbihhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYixhKyJfIix7dmFsdWU6YlthXX0pfSl9KSxDLnByb3RvdHlwZT17YWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7aWYoQihiKSl7dmFyIGQ9bmV3IHYoYSxiLGMpLGU9Ty5nZXQodGhpcyk7aWYoZSl7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspaWYoZC5lcXVhbHMoZVtmXSkpcmV0dXJufWVsc2UgZT1bXSxPLnNldCh0aGlzLGUpO2UucHVzaChkKTt2YXIgZz1EKHRoaXMpO2cuYWRkRXZlbnRMaXN0ZW5lcl8oYSxwLCEwKX19LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2M9Qm9vbGVhbihjKTt2YXIgZD1PLmdldCh0aGlzKTtpZihkKXtmb3IodmFyIGU9MCxmPSExLGc9MDtnPGQubGVuZ3RoO2crKylkW2ddLnR5cGU9PT1hJiZkW2ddLmNhcHR1cmU9PT1jJiYoZSsrLGRbZ10uaGFuZGxlcj09PWImJihmPSEwLGRbZ10ucmVtb3ZlKCkpKTtpZihmJiYxPT09ZSl7dmFyIGg9RCh0aGlzKTtoLnJlbW92ZUV2ZW50TGlzdGVuZXJfKGEscCwhMCl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXt2YXIgYj1EKHRoaXMpO3JldHVybiBiLmRpc3BhdGNoRXZlbnRfKEwoYSkpfX0saWImJksoaWIsQyk7dmFyIGtiPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQ7YS5hZGp1c3RSZWxhdGVkVGFyZ2V0PWksYS5lbGVtZW50RnJvbVBvaW50PUYsYS5nZXRFdmVudEhhbmRsZXJHZXR0ZXI9RyxhLmdldEV2ZW50SGFuZGxlclNldHRlcj1ILGEud3JhcEV2ZW50VGFyZ2V0TWV0aG9kcz1FLGEud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9JCxhLndyYXBwZXJzLkV2ZW50PXcsYS53cmFwcGVycy5FdmVudFRhcmdldD1DLGEud3JhcHBlcnMuRm9jdXNFdmVudD1kYixhLndyYXBwZXJzLk1vdXNlRXZlbnQ9Y2IsYS53cmFwcGVycy5NdXRhdGlvbkV2ZW50PWViLGEud3JhcHBlcnMuVUlFdmVudD1afSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse2VudW1lcmFibGU6ITF9KX1mdW5jdGlvbiBjKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGQoYSl7aWYobnVsbD09YSlyZXR1cm4gYTtmb3IodmFyIGI9bmV3IGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyliW2RdPWYoYVtkXSk7cmV0dXJuIGIubGVuZ3RoPWUsYn1mdW5jdGlvbiBlKGEsYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX12YXIgZj1hLndyYXA7Yy5wcm90b3R5cGU9e2l0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19fSxiKGMucHJvdG90eXBlLCJpdGVtIiksYS53cmFwcGVycy5Ob2RlTGlzdD1jLGEuYWRkV3JhcE5vZGVMaXN0TWV0aG9kPWUsYS53cmFwTm9kZUxpc3Q9ZH0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7byhhIGluc3RhbmNlb2Ygayl9ZnVuY3Rpb24gYyhhLGIsYyxkKXtpZighKGEgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSlyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksYS5wYXJlbnROb2RlXz1iLGEucHJldmlvdXNTaWJsaW5nXz1jLGEubmV4dFNpYmxpbmdfPWQsYyYmKGMubmV4dFNpYmxpbmdfPWEpLGQmJihkLnByZXZpb3VzU2libGluZ189YSksW2FdO2Zvcih2YXIgZSxmPVtdO2U9YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGUpLGYucHVzaChlKSxlLnBhcmVudE5vZGVfPWI7Zm9yKHZhciBnPTA7ZzxmLmxlbmd0aDtnKyspZltnXS5wcmV2aW91c1NpYmxpbmdfPWZbZy0xXXx8YyxmW2ddLm5leHRTaWJsaW5nXz1mW2crMV18fGQ7cmV0dXJuIGMmJihjLm5leHRTaWJsaW5nXz1mWzBdKSxkJiYoZC5wcmV2aW91c1NpYmxpbmdfPWZbZi5sZW5ndGgtMV0pLGZ9ZnVuY3Rpb24gZChhKXtpZihhIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYn1yZXR1cm5bYV19ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLm5vZGVXYXNBZGRlZF8oKX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9YS5ub2RlVHlwZT09PWsuRE9DVU1FTlRfTk9ERT9hOmEub3duZXJEb2N1bWVudDtjIT09Yi5vd25lckRvY3VtZW50JiZjLmFkb3B0Tm9kZShiKX1mdW5jdGlvbiBnKGIsYyl7aWYoYy5sZW5ndGgpe3ZhciBkPWIub3duZXJEb2N1bWVudDtpZihkIT09Y1swXS5vd25lckRvY3VtZW50KWZvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKWEuYWRvcHROb2RlTm9SZW1vdmUoY1tlXSxkKX19ZnVuY3Rpb24gaChhLGIpe2coYSxiKTt2YXIgYz1iLmxlbmd0aDtpZigxPT09YylyZXR1cm4gcihiWzBdKTtmb3IodmFyIGQ9cihhLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKSxlPTA7Yz5lO2UrKylkLmFwcGVuZENoaWxkKHIoYltlXSkpO3JldHVybiBkfWZ1bmN0aW9uIGkoYSl7aWYoYS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7Zm9yKHZhciBiPWEuZmlyc3RDaGlsZDtiOyl7byhiLnBhcmVudE5vZGU9PT1hKTt2YXIgYz1iLm5leHRTaWJsaW5nLGQ9cihiKSxlPWQucGFyZW50Tm9kZTtlJiZ5LmNhbGwoZSxkKSxiLnByZXZpb3VzU2libGluZ189Yi5uZXh0U2libGluZ189Yi5wYXJlbnROb2RlXz1udWxsLGI9Y31hLmZpcnN0Q2hpbGRfPWEubGFzdENoaWxkXz1udWxsfWVsc2UgZm9yKHZhciBjLGY9cihhKSxnPWYuZmlyc3RDaGlsZDtnOyljPWcubmV4dFNpYmxpbmcseS5jYWxsKGYsZyksZz1jfWZ1bmN0aW9uIGooYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiZiLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfWZ1bmN0aW9uIGsoYSl7byhhIGluc3RhbmNlb2YgdSksbC5jYWxsKHRoaXMsYSksdGhpcy5wYXJlbnROb2RlXz12b2lkIDAsdGhpcy5maXJzdENoaWxkXz12b2lkIDAsdGhpcy5sYXN0Q2hpbGRfPXZvaWQgMCx0aGlzLm5leHRTaWJsaW5nXz12b2lkIDAsdGhpcy5wcmV2aW91c1NpYmxpbmdfPXZvaWQgMH12YXIgbD1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LG09YS53cmFwcGVycy5Ob2RlTGlzdCxuPWEuZGVmaW5lV3JhcEdldHRlcixvPWEuYXNzZXJ0LHA9YS5taXhpbixxPWEucmVnaXN0ZXJXcmFwcGVyLHI9YS51bndyYXAscz1hLndyYXAsdD1hLndyYXBJZk5lZWRlZCx1PXdpbmRvdy5Ob2RlLHY9dS5wcm90b3R5cGUuYXBwZW5kQ2hpbGQsdz11LnByb3RvdHlwZS5pbnNlcnRCZWZvcmUseD11LnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQseT11LnByb3RvdHlwZS5yZW1vdmVDaGlsZCx6PXUucHJvdG90eXBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO2sucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobC5wcm90b3R5cGUpLHAoay5wcm90b3R5cGUse2FwcGVuZENoaWxkOmZ1bmN0aW9uKGEpe2IoYSk7dmFyIGc7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKXx8aihhKSl7dmFyIGk9dGhpcy5sYXN0Q2hpbGQsaz1udWxsO2c9YyhhLHRoaXMsaSxrKSx0aGlzLmxhc3RDaGlsZF89Z1tnLmxlbmd0aC0xXSxpfHwodGhpcy5maXJzdENoaWxkXz1nWzBdKSx2LmNhbGwodGhpcy5pbXBsLGgodGhpcyxnKSl9ZWxzZSBnPWQoYSksZih0aGlzLGEpLHYuY2FsbCh0aGlzLmltcGwscihhKSk7cmV0dXJuIGUoZyksYX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGEsaSl7aWYoIWkpcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoYSk7YihhKSxiKGkpLG8oaS5wYXJlbnROb2RlPT09dGhpcyk7dmFyIGs7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKXx8aihhKSl7dmFyIGw9aS5wcmV2aW91c1NpYmxpbmcsbT1pO2s9YyhhLHRoaXMsbCxtKSx0aGlzLmZpcnN0Q2hpbGQ9PT1pJiYodGhpcy5maXJzdENoaWxkXz1rWzBdKTt2YXIgbj1yKGkpLHA9bi5wYXJlbnROb2RlO3A/dy5jYWxsKHAsaCh0aGlzLGspLG4pOmcodGhpcyxrKX1lbHNlIGs9ZChhKSxmKHRoaXMsYSksdy5jYWxsKHRoaXMuaW1wbCxyKGEpLHIoaSkpO3JldHVybiBlKGspLGF9LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGEpe2lmKGIoYSksYS5wYXJlbnROb2RlIT09dGhpcyl0aHJvdyBuZXcgRXJyb3IoIk5vdEZvdW5kRXJyb3IiKTt2YXIgYz1yKGEpO2lmKHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe3ZhciBkPXRoaXMuZmlyc3RDaGlsZCxlPXRoaXMubGFzdENoaWxkLGY9YS5uZXh0U2libGluZyxnPWEucHJldmlvdXNTaWJsaW5nLGg9Yy5wYXJlbnROb2RlO2gmJnkuY2FsbChoLGMpLGQ9PT1hJiYodGhpcy5maXJzdENoaWxkXz1mKSxlPT09YSYmKHRoaXMubGFzdENoaWxkXz1nKSxnJiYoZy5uZXh0U2libGluZ189ZiksZiYmKGYucHJldmlvdXNTaWJsaW5nXz1nKSxhLnByZXZpb3VzU2libGluZ189YS5uZXh0U2libGluZ189YS5wYXJlbnROb2RlXz12b2lkIDB9ZWxzZSB5LmNhbGwodGhpcy5pbXBsLGMpO3JldHVybiBhfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxnKXtpZihiKGEpLGIoZyksZy5wYXJlbnROb2RlIT09dGhpcyl0aHJvdyBuZXcgRXJyb3IoIk5vdEZvdW5kRXJyb3IiKTt2YXIgaSxrPXIoZyk7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKXx8aihhKSl7dmFyIGw9Zy5wcmV2aW91c1NpYmxpbmcsbT1nLm5leHRTaWJsaW5nO209PT1hJiYobT1hLm5leHRTaWJsaW5nKSxpPWMoYSx0aGlzLGwsbSksdGhpcy5maXJzdENoaWxkPT09ZyYmKHRoaXMuZmlyc3RDaGlsZF89aVswXSksdGhpcy5sYXN0Q2hpbGQ9PT1nJiYodGhpcy5sYXN0Q2hpbGRfPWlbaS5sZW5ndGgtMV0pLGcucHJldmlvdXNTaWJsaW5nXz1nLm5leHRTaWJsaW5nXz1nLnBhcmVudE5vZGVfPXZvaWQgMCxrLnBhcmVudE5vZGUmJnguY2FsbChrLnBhcmVudE5vZGUsaCh0aGlzLGkpLGspfWVsc2UgaT1kKGEpLGYodGhpcyxhKSx4LmNhbGwodGhpcy5pbXBsLHIoYSksayk7cmV0dXJuIGUoaSksZ30sbm9kZVdhc0FkZGVkXzpmdW5jdGlvbigpe30saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86cyh0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBmaXJzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZmlyc3RDaGlsZF8/dGhpcy5maXJzdENoaWxkXzpzKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmxhc3RDaGlsZF8/dGhpcy5sYXN0Q2hpbGRfOnModGhpcy5pbXBsLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpzKHRoaXMuaW1wbC5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5wcmV2aW91c1NpYmxpbmdfP3RoaXMucHJldmlvdXNTaWJsaW5nXzpzKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgcGFyZW50RWxlbWVudCgpe2Zvcih2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5ub2RlVHlwZSE9PWsuRUxFTUVOVF9OT0RFOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX0sZ2V0IHRleHRDb250ZW50KCl7Zm9yKHZhciBhPSIiLGI9dGhpcy5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKWErPWIudGV4dENvbnRlbnQ7cmV0dXJuIGF9LHNldCB0ZXh0Q29udGVudChhKXtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtpZihpKHRoaXMpLCIiIT09YSl7dmFyIGI9dGhpcy5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSk7dGhpcy5hcHBlbmRDaGlsZChiKX19ZWxzZSB0aGlzLmltcGwudGV4dENvbnRlbnQ9YX0sZ2V0IGNoaWxkTm9kZXMoKXtmb3IodmFyIGE9bmV3IG0sYj0wLGM9dGhpcy5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9LGNsb25lTm9kZTpmdW5jdGlvbihhKXtpZighdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSlyZXR1cm4gcyh0aGlzLmltcGwuY2xvbmVOb2RlKGEpKTt2YXIgYj1zKHRoaXMuaW1wbC5jbG9uZU5vZGUoITEpKTtpZihhKWZvcih2YXIgYz10aGlzLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpYi5hcHBlbmRDaGlsZChjLmNsb25lTm9kZSghMCkpOwpyZXR1cm4gYn0sY29udGFpbnM6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuITE7aWYoYT10KGEpLGE9PT10aGlzKXJldHVybiEwO3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYj90aGlzLmNvbnRhaW5zKGIpOiExfSxjb21wYXJlRG9jdW1lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gei5jYWxsKHRoaXMuaW1wbCxyKGEpKX19KSxuKGssIm93bmVyRG9jdW1lbnQiKSxxKHUsayxkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGRlbGV0ZSBrLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yLGRlbGV0ZSBrLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLGsucHJvdG90eXBlPXAoT2JqZWN0LmNyZWF0ZShsLnByb3RvdHlwZSksay5wcm90b3R5cGUpLGEud3JhcHBlcnMuTm9kZT1rfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGMpe2Zvcih2YXIgZCxlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7ZTspe2lmKGUubWF0Y2hlcyhjKSlyZXR1cm4gZTtpZihkPWIoZSxjKSlyZXR1cm4gZDtlPWUubmV4dEVsZW1lbnRTaWJsaW5nfXJldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiLGQpe2Zvcih2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KWUubWF0Y2hlcyhiKSYmKGRbZC5sZW5ndGgrK109ZSksYyhlLGIsZCksZT1lLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gZH12YXIgZD17cXVlcnlTZWxlY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gYih0aGlzLGEpfSxxdWVyeVNlbGVjdG9yQWxsOmZ1bmN0aW9uKGEpe3JldHVybiBjKHRoaXMsYSxuZXcgTm9kZUxpc3QpfX0sZT17Z2V0RWxlbWVudHNCeVRhZ05hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbChhKX0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCIuIithKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWVOUzpmdW5jdGlvbihhLGIpe2lmKCIqIj09PWEpcmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYik7Zm9yKHZhciBjPW5ldyBOb2RlTGlzdCxkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYiksZT0wLGY9MDtlPGQubGVuZ3RoO2UrKylkW2VdLm5hbWVzcGFjZVVSST09PWEmJihjW2YrK109ZFtlXSk7cmV0dXJuIGMubGVuZ3RoPWYsY319O2EuR2V0RWxlbWVudHNCeUludGVyZmFjZT1lLGEuU2VsZWN0b3JzSW50ZXJmYWNlPWR9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLnByZXZpb3VzU2libGluZztyZXR1cm4gYX12YXIgZD1hLndyYXBwZXJzLk5vZGVMaXN0LGU9e2dldCBmaXJzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBiKHRoaXMuZmlyc3RDaGlsZCl9LGdldCBsYXN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGModGhpcy5sYXN0Q2hpbGQpfSxnZXQgY2hpbGRFbGVtZW50Q291bnQoKXtmb3IodmFyIGE9MCxiPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YjtiPWIubmV4dEVsZW1lbnRTaWJsaW5nKWErKztyZXR1cm4gYX0sZ2V0IGNoaWxkcmVuKCl7Zm9yKHZhciBhPW5ldyBkLGI9MCxjPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YztjPWMubmV4dEVsZW1lbnRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9fSxmPXtnZXQgbmV4dEVsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGIodGhpcy5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c0VsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGModGhpcy5wcmV2aW91c1NpYmxpbmcpfX07YS5DaGlsZE5vZGVJbnRlcmZhY2U9ZixhLlBhcmVudE5vZGVJbnRlcmZhY2U9ZX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGM9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZD1hLndyYXBwZXJzLk5vZGUsZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz13aW5kb3cuQ2hhcmFjdGVyRGF0YTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGIucHJvdG90eXBlLHtnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoYSl7dGhpcy5kYXRhPWF9fSksZShiLnByb3RvdHlwZSxjKSxmKGcsYixkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGEud3JhcHBlcnMuQ2hhcmFjdGVyRGF0YT1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiLGMpe3ZhciBkPWIucGFyZW50Tm9kZTtpZihkJiZkLnNoYWRvd1Jvb3Qpe3ZhciBlPWEuZ2V0UmVuZGVyZXJGb3JIb3N0KGQpO2UuZGVwZW5kc09uQXR0cmlidXRlKGMpJiZlLmludmFsaWRhdGUoKX19ZnVuY3Rpb24gYyhhKXtnLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBkKGEsYyxkKXt2YXIgZT1kfHxjO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbY119LHNldDpmdW5jdGlvbihhKXt0aGlzLmltcGxbY109YSxiKHRoaXMsZSl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIGU9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsZz1hLndyYXBwZXJzLk5vZGUsaD1hLlBhcmVudE5vZGVJbnRlcmZhY2UsaT1hLlNlbGVjdG9yc0ludGVyZmFjZTthLmFkZFdyYXBOb2RlTGlzdE1ldGhvZDt2YXIgaj1hLm1peGluLGs9YS5vbmVPZixsPWEucmVnaXN0ZXJXcmFwcGVyLG09YS53cmFwcGVycyxuPW5ldyBXZWFrTWFwLG89d2luZG93LkVsZW1lbnQscD1rKG8ucHJvdG90eXBlLFsibWF0Y2hlcyIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIl0pLHE9by5wcm90b3R5cGVbcF07Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSksaihjLnByb3RvdHlwZSx7Y3JlYXRlU2hhZG93Um9vdDpmdW5jdGlvbigpe3ZhciBiPW5ldyBtLlNoYWRvd1Jvb3QodGhpcyk7bi5zZXQodGhpcyxiKTt2YXIgYz1hLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzKTtyZXR1cm4gYy5pbnZhbGlkYXRlKCksYn0sZ2V0IHNoYWRvd1Jvb3QoKXtyZXR1cm4gbi5nZXQodGhpcyl8fG51bGx9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbihhLGMpe3RoaXMuaW1wbC5zZXRBdHRyaWJ1dGUoYSxjKSxiKHRoaXMsYSl9LHJlbW92ZUF0dHJpYnV0ZTpmdW5jdGlvbihhKXt0aGlzLmltcGwucmVtb3ZlQXR0cmlidXRlKGEpLGIodGhpcyxhKX0sbWF0Y2hlczpmdW5jdGlvbihhKXtyZXR1cm4gcS5jYWxsKHRoaXMuaW1wbCxhKX19KSxjLnByb3RvdHlwZVtwXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXRjaGVzKGEpfSxvLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290JiYoYy5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1jLnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290KSxkKGMucHJvdG90eXBlLCJpZCIpLGQoYy5wcm90b3R5cGUsImNsYXNzTmFtZSIsImNsYXNzIiksaihjLnByb3RvdHlwZSxlKSxqKGMucHJvdG90eXBlLGYpLGooYy5wcm90b3R5cGUsaCksaihjLnByb3RvdHlwZSxpKSxsKG8sYyksYS5tYXRjaGVzTmFtZT1wLGEud3JhcHBlcnMuRWxlbWVudD1jfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYSl7Y2FzZSImIjpyZXR1cm4iJmFtcDsiO2Nhc2UiPCI6cmV0dXJuIiZsdDsiO2Nhc2UnIic6cmV0dXJuIiZxdW90OyJ9fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucmVwbGFjZShwLGIpfWZ1bmN0aW9uIGQoYSl7c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgTm9kZS5FTEVNRU5UX05PREU6Zm9yKHZhciBiLGQ9YS50YWdOYW1lLnRvTG93ZXJDYXNlKCksZj0iPCIrZCxnPWEuYXR0cmlidXRlcyxoPTA7Yj1nW2hdO2grKylmKz0iICIrYi5uYW1lKyc9IicrYyhiLnZhbHVlKSsnIic7cmV0dXJuIGYrPSI+IixxW2RdP2Y6ZitlKGEpKyI8LyIrZCsiPiI7Y2FzZSBOb2RlLlRFWFRfTk9ERTpyZXR1cm4gYyhhLm5vZGVWYWx1ZSk7Y2FzZSBOb2RlLkNPTU1FTlRfTk9ERTpyZXR1cm4iPCEtLSIrYyhhLm5vZGVWYWx1ZSkrIi0tPiI7ZGVmYXVsdDp0aHJvdyBjb25zb2xlLmVycm9yKGEpLG5ldyBFcnJvcigibm90IGltcGxlbWVudGVkIil9fWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPSIiLGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWIrPWQoYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIsYyl7dmFyIGQ9Y3x8ImRpdiI7YS50ZXh0Q29udGVudD0iIjt2YXIgZT1uKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KGQpKTtlLmlubmVySFRNTD1iO2Zvcih2YXIgZjtmPWUuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZChvKGYpKX1mdW5jdGlvbiBnKGEpe2ouY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGgoYil7ayhnLGIsZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdfSl9ZnVuY3Rpb24gaShiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZy5wcm90b3R5cGUsYix7dmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfXZhciBqPWEud3JhcHBlcnMuRWxlbWVudCxrPWEuZGVmaW5lR2V0dGVyLGw9YS5taXhpbixtPWEucmVnaXN0ZXJXcmFwcGVyLG49YS51bndyYXAsbz1hLndyYXAscD0vJnw8fCIvZyxxPXthcmVhOiEwLGJhc2U6ITAsYnI6ITAsY29sOiEwLGNvbW1hbmQ6ITAsZW1iZWQ6ITAsaHI6ITAsaW1nOiEwLGlucHV0OiEwLGtleWdlbjohMCxsaW5rOiEwLG1ldGE6ITAscGFyYW06ITAsc291cmNlOiEwLHRyYWNrOiEwLHdicjohMH0scj13aW5kb3cuSFRNTEVsZW1lbnQ7Zy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShqLnByb3RvdHlwZSksbChnLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBlKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk/Zih0aGlzLGEsdGhpcy50YWdOYW1lKTp0aGlzLmltcGwuaW5uZXJIVE1MPWF9LGdldCBvdXRlckhUTUwoKXtyZXR1cm4gZCh0aGlzKX0sc2V0IG91dGVySFRNTChhKXt2YXIgYj10aGlzLnBhcmVudE5vZGU7YiYmKGIuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCksdGhpcy5pbXBsLm91dGVySFRNTD1hKX19KSxbImNsaWVudEhlaWdodCIsImNsaWVudExlZnQiLCJjbGllbnRUb3AiLCJjbGllbnRXaWR0aCIsIm9mZnNldEhlaWdodCIsIm9mZnNldExlZnQiLCJvZmZzZXRUb3AiLCJvZmZzZXRXaWR0aCIsInNjcm9sbEhlaWdodCIsInNjcm9sbExlZnQiLCJzY3JvbGxUb3AiLCJzY3JvbGxXaWR0aCJdLmZvckVhY2goaCksWyJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXRDbGllbnRSZWN0cyIsInNjcm9sbEludG9WaWV3Il0uZm9yRWFjaChpKSxtKHIsZyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiIikpLGEud3JhcHBlcnMuSFRNTEVsZW1lbnQ9ZyxhLmdldElubmVySFRNTD1lLGEuc2V0SW5uZXJIVE1MPWZ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj13aW5kb3cuSFRNTENvbnRlbnRFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCBzZWxlY3QoKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpfSxzZXQgc2VsZWN0KGEpe3RoaXMuc2V0QXR0cmlidXRlKCJzZWxlY3QiLGEpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXtjLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGEsYiksInNlbGVjdCI9PT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKSYmdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoITApfX0pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudD1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9d2luZG93LkhUTUxTaGFkb3dFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse30pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhLmRlZmF1bHRWaWV3KXJldHVybiBhO3ZhciBiPW0uZ2V0KGEpO2lmKCFiKXtmb3IoYj1hLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yi5sYXN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5sYXN0Q2hpbGQpO20uc2V0KGEsYil9cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGMsZD1iKGEub3duZXJEb2N1bWVudCksZT1qKGQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtjPWEuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChjKTtyZXR1cm4gZX1mdW5jdGlvbiBkKGEpe2lmKGUuY2FsbCh0aGlzLGEpLCFuKXt2YXIgYj1jKGEpO2wuc2V0KHRoaXMsayhiKSl9fXZhciBlPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZj1hLmdldElubmVySFRNTCxnPWEubWl4aW4saD1hLnJlZ2lzdGVyV3JhcHBlcixpPWEuc2V0SW5uZXJIVE1MLGo9YS51bndyYXAsaz1hLndyYXAsbD1uZXcgV2Vha01hcCxtPW5ldyBXZWFrTWFwLG49d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZyhkLnByb3RvdHlwZSx7Z2V0IGNvbnRlbnQoKXtyZXR1cm4gbj9rKHRoaXMuaW1wbC5jb250ZW50KTpsLmdldCh0aGlzKX0sZ2V0IGlubmVySFRNTCgpe3JldHVybiBmKHRoaXMuY29udGVudCl9LHNldCBpbm5lckhUTUwoYSl7aSh0aGlzLmNvbnRlbnQsYSl9fSksbiYmaChuLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYS5sb2NhbE5hbWUpe2Nhc2UiY29udGVudCI6cmV0dXJuIG5ldyBjKGEpO2Nhc2Uic2hhZG93IjpyZXR1cm4gbmV3IGUoYSk7Y2FzZSJ0ZW1wbGF0ZSI6cmV0dXJuIG5ldyBmKGEpfWQuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsZj1hLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQ7YS5taXhpbjt2YXIgZz1hLnJlZ2lzdGVyV3JhcHBlcixoPXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZyhoLGIpLGEud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYz1hLlBhcmVudE5vZGVJbnRlcmZhY2UsZD1hLlNlbGVjdG9yc0ludGVyZmFjZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyT2JqZWN0LGc9Zihkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2UoZy5wcm90b3R5cGUsYyksZShnLnByb3RvdHlwZSxkKSxlKGcucHJvdG90eXBlLGIpO3ZhciBoPWYoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpKSxpPWYoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikpO2Eud3JhcHBlcnMuQ29tbWVudD1pLGEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudD1nLGEud3JhcHBlcnMuVGV4dD1ofSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt2YXIgYj1pKGEuaW1wbC5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Yy5jYWxsKHRoaXMsYiksZyhiLHRoaXMpO3ZhciBkPWEuc2hhZG93Um9vdDtrLnNldCh0aGlzLGQpLGouc2V0KHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50LGQ9YS5lbGVtZW50RnJvbVBvaW50LGU9YS5nZXRJbm5lckhUTUwsZj1hLm1peGluLGc9YS5yZXdyYXAsaD1hLnNldElubmVySFRNTCxpPWEudW53cmFwLGo9bmV3IFdlYWtNYXAsaz1uZXcgV2Vha01hcDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxmKGIucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGUodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7aCh0aGlzLGEpLHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9LGdldCBvbGRlclNoYWRvd1Jvb3QoKXtyZXR1cm4gay5nZXQodGhpcyl8fG51bGx9LGludmFsaWRhdGVTaGFkb3dSZW5kZXJlcjpmdW5jdGlvbigpe3JldHVybiBqLmdldCh0aGlzKS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBkKHRoaXMsdGhpcy5vd25lckRvY3VtZW50LGEsYil9LGdldEVsZW1lbnRCeUlkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoIiMiK2EpfX0pLGEud3JhcHBlcnMuU2hhZG93Um9vdD1iLGEuZ2V0SG9zdEZvclNoYWRvd1Jvb3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGouZ2V0KGEpfX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7YS5wcmV2aW91c1NpYmxpbmdfPWEucHJldmlvdXNTaWJsaW5nLGEubmV4dFNpYmxpbmdfPWEubmV4dFNpYmxpbmcsYS5wYXJlbnROb2RlXz1hLnBhcmVudE5vZGV9ZnVuY3Rpb24gYyhhLGMsZSl7dmFyIGY9RyhhKSxnPUcoYyksaD1lP0coZSk6bnVsbDtpZihkKGMpLGIoYyksZSlhLmZpcnN0Q2hpbGQ9PT1lJiYoYS5maXJzdENoaWxkXz1lKSxlLnByZXZpb3VzU2libGluZ189ZS5wcmV2aW91c1NpYmxpbmc7ZWxzZXthLmxhc3RDaGlsZF89YS5sYXN0Q2hpbGQsYS5sYXN0Q2hpbGQ9PT1hLmZpcnN0Q2hpbGQmJihhLmZpcnN0Q2hpbGRfPWEuZmlyc3RDaGlsZCk7dmFyIGk9SChmLmxhc3RDaGlsZCk7aSYmKGkubmV4dFNpYmxpbmdfPWkubmV4dFNpYmxpbmcpfWYuaW5zZXJ0QmVmb3JlKGcsaCl9ZnVuY3Rpb24gZChhKXt2YXIgYz1HKGEpLGQ9Yy5wYXJlbnROb2RlO2lmKGQpe3ZhciBlPUgoZCk7YihhKSxhLnByZXZpb3VzU2libGluZyYmKGEucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1hKSxhLm5leHRTaWJsaW5nJiYoYS5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPWEpLGUubGFzdENoaWxkPT09YSYmKGUubGFzdENoaWxkXz1hKSxlLmZpcnN0Q2hpbGQ9PT1hJiYoZS5maXJzdENoaWxkXz1hKSxkLnJlbW92ZUNoaWxkKGMpfX1mdW5jdGlvbiBlKGEsYil7ZyhiKS5wdXNoKGEpLHgoYSxiKTt2YXIgYz1KLmdldChhKTtjfHxKLnNldChhLGM9W10pLGMucHVzaChiKX1mdW5jdGlvbiBmKGEpe0kuc2V0KGEsW10pfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIEkuZ2V0KGEpfWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYn1mdW5jdGlvbiBpKGEsYixjKXtmb3IodmFyIGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWlmKGIoZCkpe2lmKGMoZCk9PT0hMSlyZXR1cm59ZWxzZSBpKGQsYixjKX1mdW5jdGlvbiBqKGEsYil7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpO2lmKCFjKXJldHVybiEwO2lmKGM9Yy50cmltKCksIWMpcmV0dXJuITA7aWYoIShhIGluc3RhbmNlb2YgeSkpcmV0dXJuITE7aWYoIU4udGVzdChjKSlyZXR1cm4hMTtpZigiOiI9PT1jWzBdJiYhTy50ZXN0KGMpKXJldHVybiExO3RyeXtyZXR1cm4gYS5tYXRjaGVzKGMpfWNhdGNoKGQpe3JldHVybiExfX1mdW5jdGlvbiBrKCl7Zm9yKHZhciBhPTA7YTxRLmxlbmd0aDthKyspUVthXS5yZW5kZXIoKTtRPVtdfWZ1bmN0aW9uIGwoKXtFPW51bGwsaygpfWZ1bmN0aW9uIG0oYSl7dmFyIGI9TC5nZXQoYSk7cmV0dXJuIGJ8fChiPW5ldyBxKGEpLEwuc2V0KGEsYikpLGJ9ZnVuY3Rpb24gbihhKXtmb3IoO2E7YT1hLnBhcmVudE5vZGUpaWYoYSBpbnN0YW5jZW9mIEMpcmV0dXJuIGE7cmV0dXJuIG51bGx9ZnVuY3Rpb24gbyhhKXtyZXR1cm4gbShEKGEpKX1mdW5jdGlvbiBwKGEpe3RoaXMuc2tpcD0hMSx0aGlzLm5vZGU9YSx0aGlzLmNoaWxkTm9kZXM9W119ZnVuY3Rpb24gcShhKXt0aGlzLmhvc3Q9YSx0aGlzLmRpcnR5PSExLHRoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKSx0aGlzLmFzc29jaWF0ZU5vZGUoYSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIHp9ZnVuY3Rpb24gcyhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIHp9ZnVuY3Rpb24gdChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEF9ZnVuY3Rpb24gdShhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEF9ZnVuY3Rpb24gdihhKXtyZXR1cm4gYS5zaGFkb3dSb290fWZ1bmN0aW9uIHcoYSl7Zm9yKHZhciBiPVtdLGM9YS5zaGFkb3dSb290O2M7Yz1jLm9sZGVyU2hhZG93Um9vdCliLnB1c2goYyk7cmV0dXJuIGJ9ZnVuY3Rpb24geChhLGIpe0suc2V0KGEsYil9dmFyIHk9YS53cmFwcGVycy5FbGVtZW50LHo9YS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQsQT1hLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50LEI9YS53cmFwcGVycy5Ob2RlLEM9YS53cmFwcGVycy5TaGFkb3dSb290O2EuYXNzZXJ0O3ZhciBEPWEuZ2V0SG9zdEZvclNoYWRvd1Jvb3Q7YS5taXhpbjt2YXIgRSxGPWEub25lT2YsRz1hLnVud3JhcCxIPWEud3JhcCxJPW5ldyBXZWFrTWFwLEo9bmV3IFdlYWtNYXAsSz1uZXcgV2Vha01hcCxMPW5ldyBXZWFrTWFwLE09bmV3IFdlYWtNYXAsTj0vXlsqLjojW2EtekEtWl98XS8sTz1uZXcgUmVnRXhwKCJeOigiK1sibGluayIsInZpc2l0ZWQiLCJ0YXJnZXQiLCJlbmFibGVkIiwiZGlzYWJsZWQiLCJjaGVja2VkIiwiaW5kZXRlcm1pbmF0ZSIsIm50aC1jaGlsZCIsIm50aC1sYXN0LWNoaWxkIiwibnRoLW9mLXR5cGUiLCJudGgtbGFzdC1vZi10eXBlIiwiZmlyc3QtY2hpbGQiLCJsYXN0LWNoaWxkIiwiZmlyc3Qtb2YtdHlwZSIsImxhc3Qtb2YtdHlwZSIsIm9ubHktb2YtdHlwZSJdLmpvaW4oInwiKSsiKSIpLFA9Rih3aW5kb3csWyJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzZXRUaW1lb3V0Il0pLFE9W10sUj1uZXcgQXJyYXlTcGxpY2U7Ui5lcXVhbHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRyhhLm5vZGUpPT09Yn0scC5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgcChhKTtyZXR1cm4gdGhpcy5jaGlsZE5vZGVzLnB1c2goYiksYn0sc3luYzpmdW5jdGlvbihhKXtpZighdGhpcy5za2lwKXtmb3IodmFyIGI9dGhpcy5ub2RlLGU9dGhpcy5jaGlsZE5vZGVzLGY9aChHKGIpKSxnPWF8fG5ldyBXZWFrTWFwLGk9Ui5jYWxjdWxhdGVTcGxpY2VzKGUsZiksaj0wLGs9MCxsPTAsbT0wO208aS5sZW5ndGg7bSsrKXtmb3IodmFyIG49aVttXTtsPG4uaW5kZXg7bCsrKWsrKyxlW2orK10uc3luYyhnKTtmb3IodmFyIG89bi5yZW1vdmVkLmxlbmd0aCxwPTA7bz5wO3ArKyl7dmFyIHE9SChmW2srK10pO2cuZ2V0KHEpfHxkKHEpfWZvcih2YXIgcj1uLmFkZGVkQ291bnQscz1mW2tdJiZIKGZba10pLHA9MDtyPnA7cCsrKXt2YXIgdD1lW2orK10sdT10Lm5vZGU7YyhiLHUscyksZy5zZXQodSwhMCksdC5zeW5jKGcpfWwrPXJ9Zm9yKHZhciBtPWw7bTxlLmxlbmd0aDttKyspZVttKytdLnN5bmMoZyl9fX0scS5wcm90b3R5cGU9e3JlbmRlcjpmdW5jdGlvbihhKXtpZih0aGlzLmRpcnR5KXt0aGlzLmludmFsaWRhdGVBdHRyaWJ1dGVzKCksdGhpcy50cmVlQ29tcG9zaXRpb24oKTt2YXIgYj10aGlzLmhvc3QsYz1iLnNoYWRvd1Jvb3Q7dGhpcy5hc3NvY2lhdGVOb2RlKGIpO2Zvcih2YXIgZD0hZSxlPWF8fG5ldyBwKGIpLGY9Yy5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucmVuZGVyTm9kZShjLGUsZiwhMSk7ZCYmZS5zeW5jKCksdGhpcy5kaXJ0eT0hMX19LGludmFsaWRhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5kaXJ0eSl7aWYodGhpcy5kaXJ0eT0hMCxRLnB1c2godGhpcyksRSlyZXR1cm47RT13aW5kb3dbUF0obCwwKX19LHJlbmRlck5vZGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYodihjKSl7Yj1iLmFwcGVuZChjKTt2YXIgZT1tKGMpO2UuZGlydHk9ITAsZS5yZW5kZXIoYil9ZWxzZSByKGMpP3RoaXMucmVuZGVySW5zZXJ0aW9uUG9pbnQoYSxiLGMsZCk6dChjKT90aGlzLnJlbmRlclNoYWRvd0luc2VydGlvblBvaW50KGEsYixjKTp0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsYyxkKX0scmVuZGVyQXNBbnlEb21UcmVlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGI9Yi5hcHBlbmQoYyksdihjKSl7dmFyIGU9bShjKTtiLnNraXA9IWUuZGlydHksZS5yZW5kZXIoYil9ZWxzZSBmb3IodmFyIGY9Yy5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucmVuZGVyTm9kZShhLGIsZixkKX0scmVuZGVySW5zZXJ0aW9uUG9pbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZyhjKTtpZihlLmxlbmd0aCl7dGhpcy5hc3NvY2lhdGVOb2RlKGMpO2Zvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgaD1lW2ZdO3IoaCkmJmQ/dGhpcy5yZW5kZXJJbnNlcnRpb25Qb2ludChhLGIsaCxkKTp0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsaCxkKX19ZWxzZSB0aGlzLnJlbmRlckZhbGxiYWNrQ29udGVudChhLGIsYyk7dGhpcy5hc3NvY2lhdGVOb2RlKGMucGFyZW50Tm9kZSl9LHJlbmRlclNoYWRvd0luc2VydGlvblBvaW50OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLm9sZGVyU2hhZG93Um9vdDtpZihkKXt4KGQsYyksdGhpcy5hc3NvY2lhdGVOb2RlKGMucGFyZW50Tm9kZSk7Zm9yKHZhciBlPWQuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyl0aGlzLnJlbmRlck5vZGUoZCxiLGUsITApfWVsc2UgdGhpcy5yZW5kZXJGYWxsYmFja0NvbnRlbnQoYSxiLGMpfSxyZW5kZXJGYWxsYmFja0NvbnRlbnQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYXNzb2NpYXRlTm9kZShjKSx0aGlzLmFzc29jaWF0ZU5vZGUoYy5wYXJlbnROb2RlKTtmb3IodmFyIGQ9Yy5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKXRoaXMucmVuZGVyQXNBbnlEb21UcmVlKGEsYixkLCExKX0saW52YWxpZGF0ZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt0aGlzLmF0dHJpYnV0ZXM9T2JqZWN0LmNyZWF0ZShudWxsKX0sdXBkYXRlRGVwZW5kZW50QXR0cmlidXRlczpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmF0dHJpYnV0ZXM7L1wuXHcrLy50ZXN0KGEpJiYoYlsiY2xhc3MiXT0hMCksLyNcdysvLnRlc3QoYSkmJihiLmlkPSEwKSxhLnJlcGxhY2UoL1xbXHMqKFteXHM9XHx+XF1dKykvZyxmdW5jdGlvbihhLGMpe2JbY109ITB9KX19LGRlcGVuZHNPbkF0dHJpYnV0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2FdfSxkaXN0cmlidXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztpKGEscyxmdW5jdGlvbihhKXtmKGEpLGMudXBkYXRlRGVwZW5kZW50QXR0cmlidXRlcyhhLmdldEF0dHJpYnV0ZSgic2VsZWN0IikpO2Zvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZz1iW2RdO3ZvaWQgMCE9PWcmJmooZyxhKSYmKGUoZyxhKSxiW2RdPXZvaWQgMCl9fSl9LHRyZWVDb21wb3NpdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmhvc3QsYj1hLnNoYWRvd1Jvb3QsYz1bXSxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZylpZihyKGQpKXt2YXIgZT1nKGQpO2UmJmUubGVuZ3RofHwoZT1oKGQpKSxjLnB1c2guYXBwbHkoYyxlKX1lbHNlIGMucHVzaChkKTtmb3IodmFyIGYsajtiOyl7aWYoZj12b2lkIDAsaShiLHUsZnVuY3Rpb24oYSl7cmV0dXJuIGY9YSwhMX0pLGo9Zix0aGlzLmRpc3RyaWJ1dGUoYixjKSxqKXt2YXIgaz1iLm9sZGVyU2hhZG93Um9vdDtpZihrKXtiPWsseChiLGopO2NvbnRpbnVlfWJyZWFrfWJyZWFrfX0sYXNzb2NpYXRlTm9kZTpmdW5jdGlvbihhKXtNLnNldChhLHRoaXMpfX0sQi5wcm90b3R5cGUuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyPWZ1bmN0aW9uKCl7dmFyIGE9TS5nZXQodGhpcyk7cmV0dXJuIGE/KGEuaW52YWxpZGF0ZSgpLCEwKTohMX0sei5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1mdW5jdGlvbigpe3ZhciBhPU0uZ2V0KHRoaXMpO3JldHVybiBhJiZhLnJlbmRlcigpLGcodGhpcyl9LEEucHJvdG90eXBlLm5vZGVXYXNBZGRlZF89ei5wcm90b3R5cGUubm9kZVdhc0FkZGVkXz1mdW5jdGlvbigpe3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGEsYj1uKHRoaXMpO2ImJihhPW8oYikpLE0uc2V0KHRoaXMsYSksYSYmYS5pbnZhbGlkYXRlKCl9LGEuZXZlbnRQYXJlbnRzVGFibGU9SixhLmdldFJlbmRlcmVyRm9ySG9zdD1tLGEuZ2V0U2hhZG93VHJlZXM9dyxhLmluc2VydGlvblBhcmVudFRhYmxlPUssYS5yZW5kZXJBbGxQZW5kaW5nPWssYS52aXN1YWw9e2luc2VydEJlZm9yZTpjLHJlbW92ZTpkfX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7aWYod2luZG93W2JdKXtkKCFhLndyYXBwZXJzW2JdKTt2YXIgaT1mdW5jdGlvbihhKXtjLmNhbGwodGhpcyxhKX07aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZShpLnByb3RvdHlwZSx7Z2V0IGZvcm0oKXtyZXR1cm4gaChnKHRoaXMpLmZvcm0pfX0pLGYod2luZG93W2JdLGksZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiLnNsaWNlKDQsLTcpKSksYS53cmFwcGVyc1tiXT1pfX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5hc3NlcnQsZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz1hLnVud3JhcCxoPWEud3JhcCxpPVsiSFRNTEJ1dHRvbkVsZW1lbnQiLCJIVE1MRmllbGRTZXRFbGVtZW50IiwiSFRNTElucHV0RWxlbWVudCIsIkhUTUxLZXlnZW5FbGVtZW50IiwiSFRNTExhYmVsRWxlbWVudCIsIkhUTUxMZWdlbmRFbGVtZW50IiwiSFRNTE9iamVjdEVsZW1lbnQiLCJIVE1MT3B0aW9uRWxlbWVudCIsIkhUTUxPdXRwdXRFbGVtZW50IiwiSFRNTFNlbGVjdEVsZW1lbnQiLCJIVE1MVGV4dEFyZWFFbGVtZW50Il07aS5mb3JFYWNoKGIpfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtrLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBjKGEpe3ZhciBjPWRvY3VtZW50W2FdO2IucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIHYoYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fWZ1bmN0aW9uIGQoYSxiKXt5LmNhbGwoYi5pbXBsLHUoYSkpLGUoYSxiKX1mdW5jdGlvbiBlKGEsYil7YS5zaGFkb3dSb290JiZiLmFkb3B0Tm9kZShhLnNoYWRvd1Jvb3QpLGEgaW5zdGFuY2VvZiBuJiZmKGEsYik7Zm9yKHZhciBjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyllKGMsYil9ZnVuY3Rpb24gZihhLGIpe3ZhciBjPWEub2xkZXJTaGFkb3dSb290O2MmJmIuYWRvcHROb2RlKGMpfWZ1bmN0aW9uIGcoYSl7dGhpcy5pbXBsPWF9ZnVuY3Rpb24gaChhLGIpe3ZhciBjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uW2JdO2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7cmV0dXJuIHYoYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fWZ1bmN0aW9uIGkoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBjLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX12YXIgaj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2Usaz1hLndyYXBwZXJzLk5vZGUsbD1hLlBhcmVudE5vZGVJbnRlcmZhY2UsbT1hLlNlbGVjdG9yc0ludGVyZmFjZSxuPWEud3JhcHBlcnMuU2hhZG93Um9vdCxvPWEuZGVmaW5lV3JhcEdldHRlcixwPWEuZWxlbWVudEZyb21Qb2ludCxxPWEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIscj1hLm1hdGNoZXNOYW1lLHM9YS5taXhpbix0PWEucmVnaXN0ZXJXcmFwcGVyLHU9YS51bndyYXAsdj1hLndyYXAsdz1hLndyYXBFdmVudFRhcmdldE1ldGhvZHM7YS53cmFwTm9kZUxpc3Q7dmFyIHg9bmV3IFdlYWtNYXA7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShrLnByb3RvdHlwZSksbyhiLCJkb2N1bWVudEVsZW1lbnQiKSxvKGIsImJvZHkiKSxvKGIsImhlYWQiKSxbImNyZWF0ZUNvbW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUV2ZW50IiwiY3JlYXRlRXZlbnROUyIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlVGV4dE5vZGUiLCJnZXRFbGVtZW50QnlJZCJdLmZvckVhY2goYyk7dmFyIHk9ZG9jdW1lbnQuYWRvcHROb2RlO2lmKHMoYi5wcm90b3R5cGUse2Fkb3B0Tm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksZChhLHRoaXMpLGF9LGVsZW1lbnRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gcCh0aGlzLHRoaXMsYSxiKX19KSxkb2N1bWVudC5yZWdpc3Rlcil7dmFyIHo9ZG9jdW1lbnQucmVnaXN0ZXI7Yi5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhPyh0aGlzLmltcGw9YSx2b2lkIDApOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYil9dmFyIGU9Yy5wcm90b3R5cGU7aWYoYS5uYXRpdmVQcm90b3R5cGVUYWJsZS5nZXQoZSkpdGhyb3cgbmV3IEVycm9yKCJOb3RTdXBwb3J0ZWRFcnJvciIpO2Zvcih2YXIgZixnPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKSxoPVtdO2cmJiEoZj1hLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChnKSk7KWgucHVzaChnKSxnPU9iamVjdC5nZXRQcm90b3R5cGVPZihnKTtpZighZil0aHJvdyBuZXcgRXJyb3IoIk5vdFN1cHBvcnRlZEVycm9yIik7Zm9yKHZhciBpPU9iamVjdC5jcmVhdGUoZiksaj1oLmxlbmd0aC0xO2o+PTA7ai0tKWk9T2JqZWN0LmNyZWF0ZShpKTtyZXR1cm5bImNyZWF0ZWRDYWxsYmFjayIsImVudGVyZWREb2N1bWVudENhbGxiYWNrIiwibGVmdERvY3VtZW50Q2FsbGJhY2siLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWVbYV07YiYmKGlbYV09ZnVuY3Rpb24oKXtiLmFwcGx5KHYodGhpcyksYXJndW1lbnRzKX0pfSksei5jYWxsKHUodGhpcyksYix7cHJvdG90eXBlOml9KSxkLnByb3RvdHlwZT1lLGQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWQsYS5jb25zdHJ1Y3RvclRhYmxlLnNldChpLGQpLGEubmF0aXZlUHJvdG90eXBlVGFibGUuc2V0KGUsaSksZH0scShbd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50XSxbInJlZ2lzdGVyIl0pfXEoW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnQsd2luZG93LkhUTUxIdG1sRWxlbWVudF0sWyJhcHBlbmRDaGlsZCIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwiY29udGFpbnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZU5TIiwiaW5zZXJ0QmVmb3JlIiwicXVlcnlTZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZW1vdmVDaGlsZCIsInJlcGxhY2VDaGlsZCIscl0pLHEoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJhZG9wdE5vZGUiLCJjb250YWlucyIsImNyZWF0ZUNvbW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUV2ZW50IiwiY3JlYXRlRXZlbnROUyIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlVGV4dE5vZGUiLCJlbGVtZW50RnJvbVBvaW50IiwiZ2V0RWxlbWVudEJ5SWQiXSkscyhiLnByb3RvdHlwZSxqKSxzKGIucHJvdG90eXBlLGwpLHMoYi5wcm90b3R5cGUsbSkscyhiLnByb3RvdHlwZSx7Z2V0IGltcGxlbWVudGF0aW9uKCl7dmFyIGE9eC5nZXQodGhpcyk7cmV0dXJuIGE/YTooYT1uZXcgZyh1KHRoaXMpLmltcGxlbWVudGF0aW9uKSx4LnNldCh0aGlzLGEpLGEpfX0pLHQod2luZG93LkRvY3VtZW50LGIsZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSksd2luZG93LkhUTUxEb2N1bWVudCYmdCh3aW5kb3cuSFRNTERvY3VtZW50LGIpLHcoW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnRdKSxoKGcsImNyZWF0ZURvY3VtZW50VHlwZSIpLGgoZywiY3JlYXRlRG9jdW1lbnQiKSxoKGcsImNyZWF0ZUhUTUxEb2N1bWVudCIpLGkoZywiaGFzRmVhdHVyZSIpLHQod2luZG93LkRPTUltcGxlbWVudGF0aW9uLGcpLHEoW3dpbmRvdy5ET01JbXBsZW1lbnRhdGlvbl0sWyJjcmVhdGVEb2N1bWVudFR5cGUiLCJjcmVhdGVEb2N1bWVudCIsImNyZWF0ZUhUTUxEb2N1bWVudCIsImhhc0ZlYXR1cmUiXSksYS5hZG9wdE5vZGVOb1JlbW92ZT1kLGEud3JhcHBlcnMuRE9NSW1wbGVtZW50YXRpb249ZyxhLndyYXBwZXJzLkRvY3VtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuRXZlbnRUYXJnZXQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEudW53cmFwSWZOZWVkZWQsaD1hLndyYXAsaT1hLnJlbmRlckFsbFBlbmRpbmcsaj13aW5kb3cuV2luZG93O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpO3ZhciBrPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlO2oucHJvdG90eXBlLmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaSgpLGsuY2FsbCh0aGlzfHx3aW5kb3csZyhhKSxiKX0sWyJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2oucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7dmFyIGI9aCh0aGlzfHx3aW5kb3cpO3JldHVybiBiW2FdLmFwcGx5KGIsYXJndW1lbnRzKX19KSxkKGIucHJvdG90eXBlLHtnZXRDb21wdXRlZFN0eWxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGsuY2FsbChmKHRoaXMpLGcoYSksYil9fSksZShqLGIpLGEud3JhcHBlcnMuV2luZG93PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIG5ldyBiKGEpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEubWFwKGMpfWZ1bmN0aW9uIGUoYSl7dmFyIGI9dGhpczt0aGlzLmltcGw9bmV3IGsoZnVuY3Rpb24oYyl7YS5jYWxsKGIsZChjKSxiKX0pfXZhciBmPWEuZGVmaW5lR2V0dGVyLGc9YS5kZWZpbmVXcmFwR2V0dGVyLGg9YS5yZWdpc3RlcldyYXBwZXIsaT1hLnVud3JhcElmTmVlZGVkLGo9YS53cmFwTm9kZUxpc3Q7YS53cmFwcGVyczt2YXIgaz13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7aWYoayl7dmFyIGw9d2luZG93Lk11dGF0aW9uUmVjb3JkO2IucHJvdG90eXBlPXtnZXQgYWRkZWROb2Rlcygpe3JldHVybiBqKHRoaXMuaW1wbC5hZGRlZE5vZGVzKX0sZ2V0IHJlbW92ZWROb2Rlcygpe3JldHVybiBqKHRoaXMuaW1wbC5yZW1vdmVkTm9kZXMpfX0sWyJ0YXJnZXQiLCJwcmV2aW91c1NpYmxpbmciLCJuZXh0U2libGluZyJdLmZvckVhY2goZnVuY3Rpb24oYSl7ZyhiLGEpfSksWyJ0eXBlIiwiYXR0cmlidXRlTmFtZSIsImF0dHJpYnV0ZU5hbWVzcGFjZSIsIm9sZFZhbHVlIl0uZm9yRWFjaChmdW5jdGlvbihhKXtmKGIsYSxmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV19KX0pLGwmJmgobCxiKSx3aW5kb3cuTm9kZSxlLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5vYnNlcnZlKGkoYSksYil9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLmltcGwuZGlzY29ubmVjdCgpfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3JldHVybiBkKHRoaXMuaW1wbC50YWtlUmVjb3JkcygpKX19LGEud3JhcHBlcnMuTXV0YXRpb25PYnNlcnZlcj1lLGEud3JhcHBlcnMuTXV0YXRpb25SZWNvcmQ9Yn19KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEucmVnaXN0ZXJXcmFwcGVyLGQ9YS51bndyYXAsZT1hLnVud3JhcElmTmVlZGVkLGY9YS53cmFwLGc9d2luZG93LlJhbmdlO2IucHJvdG90eXBlPXtnZXQgc3RhcnRDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuc3RhcnRDb250YWluZXIpfSxnZXQgZW5kQ29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLmVuZENvbnRhaW5lcil9LGdldCBjb21tb25BbmNlc3RvckNvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5jb21tb25BbmNlc3RvckNvbnRhaW5lcil9LHNldFN0YXJ0OmZ1bmN0aW9uKGEsYil7dGhpcy5pbXBsLnNldFN0YXJ0KGUoYSksYil9LHNldEVuZDpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5zZXRFbmQoZShhKSxiKX0sc2V0U3RhcnRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldFN0YXJ0QmVmb3JlKGUoYSkpfSxzZXRTdGFydEFmdGVyOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRTdGFydEFmdGVyKGUoYSkpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldEVuZEJlZm9yZShlKGEpKX0sc2V0RW5kQWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldEVuZEFmdGVyKGUoYSkpfSxzZWxlY3ROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3ROb2RlKGUoYSkpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNlbGVjdE5vZGVDb250ZW50cyhlKGEpKX0sY29tcGFyZUJvdW5kYXJ5UG9pbnRzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5jb21wYXJlQm91bmRhcnlQb2ludHMoYSxkKGIpKX0sZXh0cmFjdENvbnRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmV4dHJhY3RDb250ZW50cygpKX0sY2xvbmVDb250ZW50czpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5jbG9uZUNvbnRlbnRzKCkpfSxpbnNlcnROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5pbnNlcnROb2RlKGUoYSkpfSxzdXJyb3VuZENvbnRlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zdXJyb3VuZENvbnRlbnRzKGUoYSkpfSxjbG9uZVJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNsb25lUmFuZ2UoKSl9LGlzUG9pbnRJblJhbmdlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5pc1BvaW50SW5SYW5nZShlKGEpLGIpfSxjb21wYXJlUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbXBhcmVQb2ludChlKGEpLGIpfSxpbnRlcnNlY3RzTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbXBsLmludGVyc2VjdHNOb2RlKGUoYSkpfX0sZy5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JiYoYi5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBmKHRoaXMuaW1wbC5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoYSkpfSksYyh3aW5kb3cuUmFuZ2UsYiksYS53cmFwcGVycy5SYW5nZT1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt2YXIgYj1jW2FdLGQ9d2luZG93W2JdO2lmKGQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSksZj1lLmNvbnN0cnVjdG9yO3dpbmRvd1tiXT1mfX1hLmlzV3JhcHBlckZvcjt2YXIgYz17YToiSFRNTEFuY2hvckVsZW1lbnQiLGFwcGxldDoiSFRNTEFwcGxldEVsZW1lbnQiLGFyZWE6IkhUTUxBcmVhRWxlbWVudCIsYXVkaW86IkhUTUxBdWRpb0VsZW1lbnQiLGJyOiJIVE1MQlJFbGVtZW50IixiYXNlOiJIVE1MQmFzZUVsZW1lbnQiLGJvZHk6IkhUTUxCb2R5RWxlbWVudCIsYnV0dG9uOiJIVE1MQnV0dG9uRWxlbWVudCIsY2FudmFzOiJIVE1MQ2FudmFzRWxlbWVudCIsZGw6IkhUTUxETGlzdEVsZW1lbnQiLGRhdGFsaXN0OiJIVE1MRGF0YUxpc3RFbGVtZW50IixkaXI6IkhUTUxEaXJlY3RvcnlFbGVtZW50IixkaXY6IkhUTUxEaXZFbGVtZW50IixlbWJlZDoiSFRNTEVtYmVkRWxlbWVudCIsZmllbGRzZXQ6IkhUTUxGaWVsZFNldEVsZW1lbnQiLGZvbnQ6IkhUTUxGb250RWxlbWVudCIsZm9ybToiSFRNTEZvcm1FbGVtZW50IixmcmFtZToiSFRNTEZyYW1lRWxlbWVudCIsZnJhbWVzZXQ6IkhUTUxGcmFtZVNldEVsZW1lbnQiLGhyOiJIVE1MSFJFbGVtZW50IixoZWFkOiJIVE1MSGVhZEVsZW1lbnQiLGgxOiJIVE1MSGVhZGluZ0VsZW1lbnQiLGh0bWw6IkhUTUxIdG1sRWxlbWVudCIsaWZyYW1lOiJIVE1MSUZyYW1lRWxlbWVudCIsaW5wdXQ6IkhUTUxJbnB1dEVsZW1lbnQiLGxpOiJIVE1MTElFbGVtZW50IixsYWJlbDoiSFRNTExhYmVsRWxlbWVudCIsbGVnZW5kOiJIVE1MTGVnZW5kRWxlbWVudCIsbGluazoiSFRNTExpbmtFbGVtZW50IixtYXA6IkhUTUxNYXBFbGVtZW50IixtZW51OiJIVE1MTWVudUVsZW1lbnQiLG1lbnVpdGVtOiJIVE1MTWVudUl0ZW1FbGVtZW50IixtZXRhOiJIVE1MTWV0YUVsZW1lbnQiLG1ldGVyOiJIVE1MTWV0ZXJFbGVtZW50IixkZWw6IkhUTUxNb2RFbGVtZW50IixvbDoiSFRNTE9MaXN0RWxlbWVudCIsb2JqZWN0OiJIVE1MT2JqZWN0RWxlbWVudCIsb3B0Z3JvdXA6IkhUTUxPcHRHcm91cEVsZW1lbnQiLG9wdGlvbjoiSFRNTE9wdGlvbkVsZW1lbnQiLG91dHB1dDoiSFRNTE91dHB1dEVsZW1lbnQiLHA6IkhUTUxQYXJhZ3JhcGhFbGVtZW50IixwYXJhbToiSFRNTFBhcmFtRWxlbWVudCIscHJlOiJIVE1MUHJlRWxlbWVudCIscHJvZ3Jlc3M6IkhUTUxQcm9ncmVzc0VsZW1lbnQiLHE6IkhUTUxRdW90ZUVsZW1lbnQiLHNjcmlwdDoiSFRNTFNjcmlwdEVsZW1lbnQiLHNlbGVjdDoiSFRNTFNlbGVjdEVsZW1lbnQiLHNvdXJjZToiSFRNTFNvdXJjZUVsZW1lbnQiLHNwYW46IkhUTUxTcGFuRWxlbWVudCIsc3R5bGU6IkhUTUxTdHlsZUVsZW1lbnQiLGNhcHRpb246IkhUTUxUYWJsZUNhcHRpb25FbGVtZW50Iixjb2w6IkhUTUxUYWJsZUNvbEVsZW1lbnQiLHRhYmxlOiJIVE1MVGFibGVFbGVtZW50Iix0cjoiSFRNTFRhYmxlUm93RWxlbWVudCIsdGhlYWQ6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0Ym9keToiSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQiLHRleHRhcmVhOiJIVE1MVGV4dEFyZWFFbGVtZW50Iix0aXRsZToiSFRNTFRpdGxlRWxlbWVudCIsdWw6IkhUTUxVTGlzdEVsZW1lbnQiLHZpZGVvOiJIVE1MVmlkZW9FbGVtZW50In07T2JqZWN0LmtleXMoYykuZm9yRWFjaChiKSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhLndyYXBwZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3dpbmRvd1tiXT1hLndyYXBwZXJzW2JdfSksYS5rbm93bkVsZW1lbnRzPWN9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKCl7d2luZG93LndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW1wbD9hOlNoYWRvd0RPTVBvbHlmaWxsLndyYXAoYSl9LHdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW1wbD9TaGFkb3dET01Qb2x5ZmlsbC51bndyYXAoYSk6YX07dmFyIGE9d2luZG93LmdldENvbXB1dGVkU3R5bGU7d2luZG93LmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKHdpbmRvdyx3cmFwKGIpLGMpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhIVE1MRWxlbWVudC5wcm90b3R5cGUse3dlYmtpdFNoYWRvd1Jvb3Q6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoYWRvd1Jvb3R9fX0pO3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290O0hUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGE9Yi5jYWxsKHRoaXMpO3JldHVybiBhLmhvc3Q9dGhpcyxhfSxIVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1IVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdH0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7dmFyIGM9IiI7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXtjKz1hLnRleHRDb250ZW50KyJcblxuIn0pLGJ8fChjPWMucmVwbGFjZShtLCIiKSksY31mdW5jdGlvbiBjKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7Yi50ZXh0Q29udGVudD1hLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYik7dmFyIGM9Yi5zaGVldC5jc3NSdWxlcztyZXR1cm4gYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGN9ZnVuY3Rpb24gZChhKXtmb3IodmFyIGI9MCxjPVtdO2I8YS5sZW5ndGg7YisrKWMucHVzaChhW2JdLmNzc1RleHQpO3JldHVybiBjLmpvaW4oIlxuXG4iKX1mdW5jdGlvbiBlKGEpe2EmJmYoKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9ZnVuY3Rpb24gZigpe3JldHVybiBnfHwoZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLGcuc2V0QXR0cmlidXRlKCJTaGFkb3dDU1NTaGltIiwiIikpLGd9dmFyIGcsaD17c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihhLGIsYyl7aWYoYSl7dmFyIGQ9dGhpcy5yZWdpc3RlckRlZmluaXRpb24oYSxiLGMpO3RoaXMuc3RyaWN0U3R5bGluZyYmdGhpcy5hcHBseVNjb3BlVG9Db250ZW50KGEsYiksdGhpcy5zaGltUG9seWZpbGxEaXJlY3RpdmVzKGQucm9vdFN0eWxlcyxiKSx0aGlzLmFwcGx5U2hpbW1pbmcoZC5zY29wZVN0eWxlcyxiKSx0aGlzLmFwcGx5UG9seWZpbGxSdWxlcyhkLnJvb3RTdHlsZXMsYil9fSxzaGltU2hhZG93RE9NU3R5bGluZzpmdW5jdGlvbihhLGIpe3RoaXMuc2hpbVBvbHlmaWxsRGlyZWN0aXZlcyhhLGIpLHRoaXMuYXBwbHlTaGltbWluZyhhLGIpLHRoaXMuYXBwbHlQb2x5ZmlsbFJ1bGVzKGEsYil9LHJlZ2lzdGVyRGVmaW5pdGlvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZWdpc3RyeVtiXT17cm9vdDphLG5hbWU6YixleHRlbmRzTmFtZTpjfSxlPWEucXVlcnlTZWxlY3RvckFsbCgic3R5bGUiKTtlPWU/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSwwKTpbXSxkLnJvb3RTdHlsZXM9ZSxkLnNjb3BlU3R5bGVzPWQucm9vdFN0eWxlczt2YXIgZj10aGlzLnJlZ2lzdHJ5W2QuZXh0ZW5kc05hbWVdO3JldHVybiBmJiZhLnF1ZXJ5U2VsZWN0b3IoInNoYWRvdyIpJiYoZC5zY29wZVN0eWxlcz1mLnNjb3BlU3R5bGVzLmNvbmNhdChkLnNjb3BlU3R5bGVzKSksZH0sYXBwbHlTY29wZVRvQ29udGVudDpmdW5jdGlvbihhLGIpe2EmJihBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgiKiIpLGZ1bmN0aW9uKGEpe2Euc2V0QXR0cmlidXRlKGIsIiIpfSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIiksZnVuY3Rpb24oYSl7dGhpcy5hcHBseVNjb3BlVG9Db250ZW50KGEuY29udGVudCxiKX0sdGhpcykpfSxzaGltUG9seWZpbGxEaXJlY3RpdmVzOmZ1bmN0aW9uKGEsYil7YSYmQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9dGhpcy5jb252ZXJ0UG9seWZpbGxEaXJlY3RpdmVzKGEudGV4dENvbnRlbnQsYil9LHRoaXMpfSxjb252ZXJ0UG9seWZpbGxEaXJlY3RpdmVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQsZT0iIixmPTA7Yz1uLmV4ZWMoYSk7KWUrPWEuc3Vic3RyaW5nKGYsYy5pbmRleCksZD1jWzFdLnNsaWNlKDAsLTIpLnJlcGxhY2UocixiKSxlKz10aGlzLnNjb3BlU2VsZWN0b3IoZCxiKSsieyIsZj1uLmxhc3RJbmRleDtyZXR1cm4gZSs9YS5zdWJzdHJpbmcoZixhLmxlbmd0aCl9LGFwcGx5U2hpbW1pbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnNoaW1BdEhvc3QoYSxiKTtjKz10aGlzLnNoaW1TY29waW5nKGEsYiksZShjKX0sc2hpbUF0SG9zdDpmdW5jdGlvbihhLGIpe3JldHVybiBhP3RoaXMuY29udmVydEF0SG9zdFN0eWxlcyhhLGIpOnZvaWQgMH0sY29udmVydEF0SG9zdFN0eWxlczpmdW5jdGlvbihhLGUpe2Zvcih2YXIgZixnPWIoYSksaD0iIixqPTA7Zj1pLmV4ZWMoZyk7KWgrPWcuc3Vic3RyaW5nKGosZi5pbmRleCksaCs9dGhpcy5zY29wZUhvc3RDc3MoZlsxXSxlKSxqPWkubGFzdEluZGV4O2grPWcuc3Vic3RyaW5nKGosZy5sZW5ndGgpO3ZhciBrPW5ldyBSZWdFeHAoIl4iK2UrcSwibSIpLGc9ZCh0aGlzLmZpbmRBdEhvc3RSdWxlcyhjKGgpLGspKTtyZXR1cm4gZ30sc2NvcGVIb3N0Q3NzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9IiI7Yz1qLmV4ZWMoYSk7KWQrPXRoaXMuc2NvcGVIb3N0U2VsZWN0b3IoY1sxXSxiKSsiICIrY1syXSsiXG4JIjtyZXR1cm4gZH0sc2NvcGVIb3N0U2VsZWN0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWEuc3BsaXQoIiwiKSxlPSJbaXM9IitiKyJdIjtyZXR1cm4gZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksYS5tYXRjaChrKT9hPWEucmVwbGFjZShrLGIrIiQxJDMsICIrZSsiJDEkMyIpOmEubWF0Y2gobCkmJihhPWIrYSsiLCAiK2UrYSksYy5wdXNoKGEpfSx0aGlzKSxjLmpvaW4oIiwgIil9LGZpbmRBdEhvc3RSdWxlczpmdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYSx0aGlzLmlzSG9zdFJ1bGUuYmluZCh0aGlzLGIpKX0saXNIb3N0UnVsZTpmdW5jdGlvbihhLGIpe3JldHVybiBiLnNlbGVjdG9yVGV4dCYmYi5zZWxlY3RvclRleHQubWF0Y2goYSl8fGIuY3NzUnVsZXMmJnRoaXMuZmluZEF0SG9zdFJ1bGVzKGIuY3NzUnVsZXMsYSkubGVuZ3RofHxiLnR5cGU9PUNTU1J1bGUuV0VCS0lUX0tFWUZSQU1FU19SVUxFfSxzaGltU2NvcGluZzpmdW5jdGlvbihhLGIpe3JldHVybiBhP3RoaXMuY29udmVydFNjb3BlZFN0eWxlcyhhLGIpOnZvaWQgMH0sY29udmVydFNjb3BlZFN0eWxlczpmdW5jdGlvbihhLGQpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXthLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX0pO3ZhciBlPWIoYSkucmVwbGFjZShpLCIiKTtlPXRoaXMuY29udmVydFBzZXVkb3MoZSk7dmFyIGY9YyhlKTtyZXR1cm4gZT10aGlzLnNjb3BlUnVsZXMoZixkKX0sY29udmVydFBzZXVkb3M6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShwLCIgW3BzZXVkbz0kMV0iKX0sc2NvcGVSdWxlczpmdW5jdGlvbihhLGIpe3ZhciBjPSIiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS5zZWxlY3RvclRleHQmJmEuc3R5bGUmJmEuc3R5bGUuY3NzVGV4dD8oYys9dGhpcy5zY29wZVNlbGVjdG9yKGEuc2VsZWN0b3JUZXh0LGIsdGhpcy5zdHJpY3RTdHlsaW5nKSsiIHtcbgkiLGMrPXRoaXMucHJvcGVydGllc0Zyb21SdWxlKGEpKyJcbn1cblxuIik6YS5tZWRpYT8oYys9IkBtZWRpYSAiK2EubWVkaWEubWVkaWFUZXh0KyIge1xuIixjKz10aGlzLnNjb3BlUnVsZXMoYS5jc3NSdWxlcyxiKSxjKz0iXG59XG5cbiIpOmEuY3NzVGV4dCYmKGMrPWEuY3NzVGV4dCsiXG5cbiIpfSx0aGlzKSxjfSxzY29wZVNlbGVjdG9yOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPWEuc3BsaXQoIiwiKTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhhLGIpJiYoYT1jP3RoaXMuYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlKGEsYik6dGhpcy5hcHBseVNpbXBsZVNlbGVjdG9yU2NvcGUoYSxiKSksZC5wdXNoKGEpfSx0aGlzKSxkLmpvaW4oIiwgIil9LHNlbGVjdG9yTmVlZHNTY29waW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9IigiK2IrInxcXFtpcz0iK2IrIlxcXSkiLGQ9bmV3IFJlZ0V4cCgiXiIrYytxLCJtIik7cmV0dXJuIWEubWF0Y2goZCl9LGFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3JldHVybiBiKyIgIithKyIsICIrIltpcz0iK2IrIl0gIithfSxhcHBseVN0cmljdFNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bIiAiLCI+IiwiKyIsIn4iXSxkPWEsZT0iWyIrYisiXSI7cmV0dXJuIGMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1kLnNwbGl0KGEpO2Q9Yi5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9YS50cmltKCk7cmV0dXJuIGImJmMuaW5kZXhPZihiKTwwJiZiLmluZGV4T2YoZSk8MCYmKGE9Yi5yZXBsYWNlKC8oW146XSopKDoqKSguKikvLCIkMSIrZSsiJDIkMyIpKSxhfSkuam9pbihhKX0pLGR9LHByb3BlcnRpZXNGcm9tUnVsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnN0eWxlLmNzc1RleHQ7cmV0dXJuIGEuc3R5bGUuY29udGVudCYmIWEuc3R5bGUuY29udGVudC5tYXRjaCgvWyciXSsvKSYmKGI9ImNvbnRlbnQ6ICciK2Euc3R5bGUuY29udGVudCsiJztcbiIrYS5zdHlsZS5jc3NUZXh0LnJlcGxhY2UoL2NvbnRlbnQ6W147XSo7L2csIiIpKSxifSxhcHBseVBvbHlmaWxsUnVsZXM6ZnVuY3Rpb24oYSxiKXtpZihhKXt2YXIgYz0iIjtBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7Yys9dGhpcy5leHRyYWN0UG9seWZpbGxSdWxlcyhhLnRleHRDb250ZW50LGIpKyJcblxuIn0sdGhpcyl9ZShjKX0sZXh0cmFjdFBvbHlmaWxsUnVsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0iIjtjPW8uZXhlYyhhKTspcnVsZT1jWzFdLnNsaWNlKDAsLTEpLnJlcGxhY2UocixiKSxkKz1ydWxlKyJcblxuIjtyZXR1cm4gZH19LGk9L0Bob3N0W157XSp7KChbXn1dKj97W157XSo/fVtcc1xTXSo/KSspfS9naW0saj0vKFtee10qKSh7W1xzXFNdKj99KS9naW0saz0vKC4qKSgoPzpcKil8KD86XDpzY29wZSkpKC4qKS8sbD0vXlsuXFs6XS8sbT0vXC9cKlteKl0qXCorKFteLypdW14qXSpcKispKlwvL2dpbSxuPS9cL1wqXHMqQHBvbHlmaWxsIChbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLykoW157XSo/KXsvZ2ltLG89L1wvXCpcc0Bwb2x5ZmlsbC1ydWxlKFteKl0qXCorKFteLypdW14qXSpcKispKilcLy9naW0scD0vOjooeC1bXlxzeywoXSopL2dpbSxxPSIoWz5cXHN+K1suLHs6XVtcXHNcXFNdKik/JCIscj0vQGhvc3QvZ2ltO2lmKHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCl7ZSgic3R5bGUgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1cbiIpO3ZhciBzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtzLmluc2VydEJlZm9yZShmKCkscy5jaGlsZE5vZGVzWzBdKX1hLlNoYWRvd0NTUz1ofSh3aW5kb3cuUGxhdGZvcm0pfWVsc2UhZnVuY3Rpb24oKXt3aW5kb3cudGVtcGxhdGVDb250ZW50PXdpbmRvdy50ZW1wbGF0ZUNvbnRlbnR8fGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnR9LHdpbmRvdy53cmFwPXdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9O3ZhciBhPUhUTUxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290O0hUTUxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy53ZWJraXRTaGFkb3dSb290LGM9YS5jYWxsKHRoaXMpO3JldHVybiBjLm9sZGVyU2hhZG93Um9vdD1iLGMuaG9zdD10aGlzLEN1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93KHRoaXMpLGN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEhUTUxFbGVtZW50LnByb3RvdHlwZSx7c2hhZG93Um9vdDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Via2l0U2hhZG93Um9vdH19LGNyZWF0ZVNoYWRvd1Jvb3Q6e3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Via2l0Q3JlYXRlU2hhZG93Um9vdCgpfX19KSx3aW5kb3cudGVtcGxhdGVDb250ZW50PWZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYSksIWEuY29udGVudCYmIWEuX2NvbnRlbnQpe2Zvcih2YXIgYj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5maXJzdENoaWxkOyliLmFwcGVuZENoaWxkKGEuZmlyc3RDaGlsZCk7YS5fY29udGVudD1ifXJldHVybiBhLmNvbnRlbnR8fGEuX2NvbnRlbnR9fSgpO2lmKGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zm9yKHZhciBiPWF8fHt9LGQ9MTtkPGFyZ3VtZW50cy5sZW5ndGg7ZCsrKXt2YXIgZT1hcmd1bWVudHNbZF07dHJ5e2Zvcih2YXIgZiBpbiBlKWMoZixlLGIpfWNhdGNoKGcpe319cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGU9ZChiLGEpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGEsZSl9ZnVuY3Rpb24gZChhLGIpe2lmKGEpe3ZhciBjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKTtyZXR1cm4gY3x8ZChPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYil9fUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7cmV0dXJuIGQucHVzaC5hcHBseShkLGFyZ3VtZW50cyksYi5hcHBseShhLGQpfX0pLGEubWl4aW49Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIsYyl7dmFyIGQ9InN0cmluZyI9PXR5cGVvZiBhP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk6YS5jbG9uZU5vZGUoITApO2lmKGQuaW5uZXJIVE1MPWIsYylmb3IodmFyIGUgaW4gYylkLnNldEF0dHJpYnV0ZShlLGNbZV0pO3JldHVybiBkfXZhciBjPURPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkLGQ9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWMuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylkLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGIpezE9PWFyZ3VtZW50cy5sZW5ndGgmJihiPSF0aGlzLmNvbnRhaW5zKGEpKSxiP3RoaXMuYWRkKGEpOnRoaXMucmVtb3ZlKGEpfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnN3aXRjaD1mdW5jdGlvbihhLGIpe2EmJnRoaXMucmVtb3ZlKGEpLGImJnRoaXMuYWRkKGIpfTt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzKX0sZj13aW5kb3cuTmFtZWROb2RlTWFwfHx3aW5kb3cuTW96TmFtZWRBdHRyTWFwfHx7fTtOb2RlTGlzdC5wcm90b3R5cGUuYXJyYXk9ZSxmLnByb3RvdHlwZS5hcnJheT1lLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5hcnJheT1lOwp2YXIgZz1mdW5jdGlvbihhLGIpe2UuY2FsbCh0aGlzKS5mb3JFYWNoKGEsYil9O2lmKE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoPWcsZi5wcm90b3R5cGUuZm9yRWFjaD1nLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5mb3JFYWNoPWcsIXdpbmRvdy5wZXJmb3JtYW5jZSl7dmFyIGg9RGF0ZS5ub3coKTt3aW5kb3cucGVyZm9ybWFuY2U9e25vdzpmdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLWh9fX13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7cmV0dXJuIGE/ZnVuY3Rpb24oYil7cmV0dXJuIGEoZnVuY3Rpb24oKXtiKHBlcmZvcm1hbmNlLm5vdygpKX0pfTpmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9fSgpKSxhLmNyZWF0ZURPTT1ifSh3aW5kb3cuUGxhdGZvcm0pLHdpbmRvdy50ZW1wbGF0ZUNvbnRlbnQ9d2luZG93LnRlbXBsYXRlQ29udGVudHx8ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudH0sZnVuY3Rpb24oYSl7YT1hfHwod2luZG93Lkluc3BlY3Rvcj17fSk7dmFyIGI7d2luZG93LnNpbnNwZWN0PWZ1bmN0aW9uKGEsZCl7Ynx8KGI9d2luZG93Lm9wZW4oIiIsIlNoYWRvd0RPTSBJbnNwZWN0b3IiLG51bGwsITApLGIuZG9jdW1lbnQud3JpdGUoYyksYi5hcGk9e3NoYWRvd2l6ZTpzaGFkb3dpemV9KSxmKGF8fHdyYXAoZG9jdW1lbnQuYm9keSksZCl9O3ZhciBjPVsiPCFET0NUWVBFIGh0bWw+IiwiPGh0bWw+IiwiICA8aGVhZD4iLCIgICAgPHRpdGxlPlNoYWRvd0RPTSBJbnNwZWN0b3I8L3RpdGxlPiIsIiAgICA8c3R5bGU+IiwiICAgICAgYm9keSB7IiwiICAgICAgfSIsIiAgICAgIHByZSB7IiwnICAgICAgICBmb250OiA5cHQgIkNvdXJpZXIgTmV3IiwgbW9ub3NwYWNlOycsIiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNWVtOyIsIiAgICAgIH0iLCIgICAgICB0YWcgeyIsIiAgICAgICAgY29sb3I6IHB1cnBsZTsiLCIgICAgICB9IiwiICAgICAgdWwgeyIsIiAgICAgICAgIG1hcmdpbjogMDsiLCIgICAgICAgICBwYWRkaW5nOiAwOyIsIiAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7IiwiICAgICAgfSIsIiAgICAgIGxpIHsiLCIgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwiICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjFmMTsiLCIgICAgICAgICBwYWRkaW5nOiA0cHggNnB4OyIsIiAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsiLCIgICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDsiLCIgICAgICB9IiwiICAgIDwvc3R5bGU+IiwiICA8L2hlYWQ+IiwiICA8Ym9keT4iLCcgICAgPHVsIGlkPSJjcnVtYnMiPicsIiAgICA8L3VsPiIsJyAgICA8ZGl2IGlkPSJ0cmVlIj48L2Rpdj4nLCIgIDwvYm9keT4iLCI8L2h0bWw+Il0uam9pbigiXG4iKSxkPVtdLGU9ZnVuY3Rpb24oKXt2YXIgYT1iLmRvY3VtZW50LGM9YS5xdWVyeVNlbGVjdG9yKCIjY3J1bWJzIik7Yy50ZXh0Q29udGVudD0iIjtmb3IodmFyIGUsZz0wO2U9ZFtnXTtnKyspe3ZhciBoPWEuY3JlYXRlRWxlbWVudCgiYSIpO2guaHJlZj0iIyIsaC50ZXh0Q29udGVudD1lLmxvY2FsTmFtZSxoLmlkeD1nLGgub25jbGljaz1mdW5jdGlvbihhKXtmb3IodmFyIGI7ZC5sZW5ndGg+dGhpcy5pZHg7KWI9ZC5wb3AoKTtmKGIuc2hhZG93fHxiLGIpLGEucHJldmVudERlZmF1bHQoKX0sYy5hcHBlbmRDaGlsZChhLmNyZWF0ZUVsZW1lbnQoImxpIikpLmFwcGVuZENoaWxkKGgpfX0sZj1mdW5jdGlvbihhLGMpe3ZhciBmPWIuZG9jdW1lbnQ7az1bXTt2YXIgZz1jfHxhO2QucHVzaChnKSxlKCksZi5ib2R5LnF1ZXJ5U2VsZWN0b3IoIiN0cmVlIikuaW5uZXJIVE1MPSI8cHJlPiIraihhLGEuY2hpbGROb2RlcykrIjwvcHJlPiJ9LGc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxoPXtTVFlMRToxLFNDUklQVDoxLCIjY29tbWVudCI6MSxURU1QTEFURToxfSxpPWZ1bmN0aW9uKGEpe3JldHVybiBoW2Eubm9kZU5hbWVdfSxqPWZ1bmN0aW9uKGEsYixjKXtpZihpKGEpKXJldHVybiIiO3ZhciBkPWN8fCIiO2lmKGEubG9jYWxOYW1lfHwxMT09YS5ub2RlVHlwZSl7dmFyIGU9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCIsZj1kK2woYSk7ImNvbnRlbnQiPT1lJiYoYj1hLmdldERpc3RyaWJ1dGVkTm9kZXMoKSksZis9Ijxici8+Ijt2YXIgaD1kKyImbmJzcDsmbmJzcDsiO2coYixmdW5jdGlvbihhKXtmKz1qKGEsYS5jaGlsZE5vZGVzLGgpfSksZis9ZCx7YnI6MX1bZV18fChmKz0iPHRhZz4mbHQ7LyIrZSsiJmd0OzwvdGFnPiIsZis9Ijxici8+Iil9ZWxzZXt2YXIgaz1hLnRleHRDb250ZW50LnRyaW0oKTtmPWs/ZCsnIicraysnIicrIjxici8+IjoiIn1yZXR1cm4gZn0saz1bXSxsPWZ1bmN0aW9uKGEpe3ZhciBiPSI8dGFnPiZsdDsiLGM9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCI7cmV0dXJuIGEud2Via2l0U2hhZG93Um9vdHx8YS5zaGFkb3dSb290PyhiKz0nIDxidXR0b24gaWR4PSInK2subGVuZ3RoKyciIG9uY2xpY2s9ImFwaS5zaGFkb3dpemUuY2FsbCh0aGlzKSI+JytjKyI8L2J1dHRvbj4iLGsucHVzaChhKSk6Yis9Y3x8InNoYWRvdy1yb290IixhLmF0dHJpYnV0ZXMmJmcoYS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGEpe2IrPSIgIithLm5hbWUrKGEudmFsdWU/Jz0iJythLnZhbHVlKyciJzoiIil9KSxiKz0iJmd0OzwvdGFnPiJ9O3NoYWRvd2l6ZT1mdW5jdGlvbigpe3ZhciBhPU51bWJlcih0aGlzLmF0dHJpYnV0ZXMuaWR4LnZhbHVlKSxiPWtbYV07Yj9mKGIud2Via2l0U2hhZG93Um9vdHx8Yi5zaGFkb3dSb290LGIpOihjb25zb2xlLmxvZygiYmFkIHNoYWRvd2l6ZSBub2RlIiksY29uc29sZS5kaXIodGhpcykpfSxhLm91dHB1dD1qfSh3aW5kb3cuSW5zcGVjdG9yKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBhKGEsYixjLGQpe3RoaXMuY2xvc2VkPSExLHRoaXMubm9kZT1hLHRoaXMucHJvcGVydHk9Yix0aGlzLm1vZGVsPWMsdGhpcy5wYXRoPVBhdGguZ2V0KGQpLCh0aGlzLm1vZGVsIGluc3RhbmNlb2YgUGF0aE9ic2VydmVyfHx0aGlzLm1vZGVsIGluc3RhbmNlb2YgQ29tcG91bmRQYXRoT2JzZXJ2ZXIpJiZ0aGlzLnBhdGg9PT1rPyh0aGlzLm9ic2VydmVyPXRoaXMubW9kZWwsdGhpcy5vYnNlcnZlci50YXJnZXQ9dGhpcyx0aGlzLm9ic2VydmVyLmNhbGxiYWNrPXRoaXMudmFsdWVDaGFuZ2VkKTp0aGlzLm9ic2VydmVyPW5ldyBQYXRoT2JzZXJ2ZXIodGhpcy5tb2RlbCx0aGlzLnBhdGgsdGhpcy52YWx1ZUNoYW5nZWQsdGhpcyksdGhpcy52YWx1ZUNoYW5nZWQodGhpcy52YWx1ZSl9ZnVuY3Rpb24gYihiLGMsZCxlKXt0aGlzLmNvbmRpdGlvbmFsPSI/Ij09Y1tjLmxlbmd0aC0xXSx0aGlzLmNvbmRpdGlvbmFsJiYoYi5yZW1vdmVBdHRyaWJ1dGUoYyksYz1jLnNsaWNlKDAsLTEpKSxhLmNhbGwodGhpcyxiLGMsZCxlKX1mdW5jdGlvbiBjKGEpe3N3aXRjaChhLnR5cGUpe2Nhc2UiY2hlY2tib3giOnJldHVybiBsO2Nhc2UicmFkaW8iOmNhc2Uic2VsZWN0LW11bHRpcGxlIjpjYXNlInNlbGVjdC1vbmUiOnJldHVybiJjaGFuZ2UiO2RlZmF1bHQ6cmV0dXJuImlucHV0In19ZnVuY3Rpb24gZChiLGQsZSxmKXthLmNhbGwodGhpcyxiLGQsZSxmKSx0aGlzLmV2ZW50VHlwZT1jKHRoaXMubm9kZSksdGhpcy5ib3VuZE5vZGVWYWx1ZUNoYW5nZWQ9dGhpcy5ub2RlVmFsdWVDaGFuZ2VkLmJpbmQodGhpcyksdGhpcy5ub2RlLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5ldmVudFR5cGUsdGhpcy5ib3VuZE5vZGVWYWx1ZUNoYW5nZWQsITApfWZ1bmN0aW9uIGUoYSl7aWYoIWEub3duZXJEb2N1bWVudC5jb250YWlucyhhKSlyZXR1cm5bXTtpZihhLmZvcm0pcmV0dXJuIGkoYS5mb3JtLmVsZW1lbnRzLGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hJiYiSU5QVVQiPT1iLnRhZ05hbWUmJiJyYWRpbyI9PWIudHlwZSYmYi5uYW1lPT1hLm5hbWV9KTt2YXIgYj1hLm93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSInK2EubmFtZSsnIl0nKTtyZXR1cm4gaShiLGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hJiYhYi5mb3JtfSl9ZnVuY3Rpb24gZihhLGIsYyl7ZC5jYWxsKHRoaXMsYSwiY2hlY2tlZCIsYixjKX1mdW5jdGlvbiBnKGEsYixjKXtkLmNhbGwodGhpcyxhLCJ2YWx1ZSIsYixjKX1mdW5jdGlvbiBoKGEsYixjLGUpe2QuY2FsbCh0aGlzLGEsYixjLGUpfXZhciBpPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5maWx0ZXIpLGo9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9OyJmdW5jdGlvbiIhPXR5cGVvZiBkb2N1bWVudC5jb250YWlucyYmKERvY3VtZW50LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbihhKXtyZXR1cm4gYT09PXRoaXN8fGEucGFyZW50Tm9kZT09PXRoaXM/ITA6dGhpcy5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMoYSl9KSxOb2RlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtjb25zb2xlLmVycm9yKCJVbmhhbmRsZWQgYmluZGluZyB0byBOb2RlOiAiLHRoaXMsYSxiLGMpfSxOb2RlLnByb3RvdHlwZS51bmJpbmQ9ZnVuY3Rpb24oYSl7dGhpcy5iaW5kaW5nc3x8KHRoaXMuYmluZGluZ3M9e30pO3ZhciBiPXRoaXMuYmluZGluZ3NbYV07YiYmKCJmdW5jdGlvbiI9PXR5cGVvZiBiLmNsb3NlJiZiLmNsb3NlKCksdGhpcy5iaW5kaW5nc1thXT12b2lkIDApfSxOb2RlLnByb3RvdHlwZS51bmJpbmRBbGw9ZnVuY3Rpb24oKXtpZih0aGlzLmJpbmRpbmdzKXtmb3IodmFyIGE9T2JqZWN0LmtleXModGhpcy5iaW5kaW5ncyksYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz10aGlzLmJpbmRpbmdzW2FbYl1dO2MmJmMuY2xvc2UoKX10aGlzLmJpbmRpbmdzPXt9fX07dmFyIGs9UGF0aC5nZXQoInZhbHVlIik7YS5wcm90b3R5cGU9e3ZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhKXt0aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eV09dGhpcy5zYW5pdGl6ZUJvdW5kVmFsdWUoYSl9LHNhbml0aXplQm91bmRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT1hPyIiOlN0cmluZyhhKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZHx8KHRoaXMub2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLm9ic2VydmVyPXZvaWQgMCx0aGlzLm5vZGU9dm9pZCAwLHRoaXMubW9kZWw9dm9pZCAwLHRoaXMuY2xvc2VkPSEwKX0sZ2V0IHZhbHVlKCl7cmV0dXJuIHRoaXMub2JzZXJ2ZXIudmFsdWV9LHNldCB2YWx1ZShhKXt0aGlzLm9ic2VydmVyLnNldFZhbHVlKGEpfSxyZXNldDpmdW5jdGlvbigpe3RoaXMub2JzZXJ2ZXIucmVzZXQoKX19LFRleHQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYixjLGQpe3JldHVybiJ0ZXh0Q29udGVudCIhPT1iP05vZGUucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGIsYyxkKToodGhpcy51bmJpbmQoYiksdGhpcy5iaW5kaW5nc1tiXT1uZXcgYSh0aGlzLCJkYXRhIixjLGQpKX0sYi5wcm90b3R5cGU9aih7X19wcm90b19fOmEucHJvdG90eXBlLHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb25kaXRpb25hbD8oYT90aGlzLm5vZGUuc2V0QXR0cmlidXRlKHRoaXMucHJvcGVydHksIiIpOnRoaXMubm9kZS5yZW1vdmVBdHRyaWJ1dGUodGhpcy5wcm9wZXJ0eSksdm9pZCAwKToodGhpcy5ub2RlLnNldEF0dHJpYnV0ZSh0aGlzLnByb3BlcnR5LHRoaXMuc2FuaXRpemVCb3VuZFZhbHVlKGEpKSx2b2lkIDApfX0pLEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLnVuYmluZChhKSx0aGlzLmJpbmRpbmdzW2FdPW5ldyBiKHRoaXMsYSxjLGQpfTt2YXIgbDshZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiPWEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSk7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJjaGVja2JveCIpO3ZhciBjLGQ9MDtiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjbGljayJ9KSxiLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24oKXtkKyssYz1jfHwiY2hhbmdlIn0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7ZS5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCEwLHdpbmRvdywwLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsKSxiLmRpc3BhdGNoRXZlbnQoZSksbD0xPT1kPyJjaGFuZ2UiOmN9KCksZC5wcm90b3R5cGU9aih7X19wcm90b19fOmEucHJvdG90eXBlLG5vZGVWYWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oKXt0aGlzLnZhbHVlPXRoaXMubm9kZVt0aGlzLnByb3BlcnR5XSx0aGlzLnJlc2V0KCksdGhpcy5wb3N0VXBkYXRlQmluZGluZygpLFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCl9LHBvc3RVcGRhdGVCaW5kaW5nOmZ1bmN0aW9uKCl7fSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwodGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5ldmVudFR5cGUsdGhpcy5ib3VuZE5vZGVWYWx1ZUNoYW5nZWQsITApLGEucHJvdG90eXBlLmNsb3NlLmNhbGwodGhpcykpfX0pLGYucHJvdG90eXBlPWooe19fcHJvdG9fXzpkLnByb3RvdHlwZSxzYW5pdGl6ZUJvdW5kVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIEJvb2xlYW4oYSl9LHBvc3RVcGRhdGVCaW5kaW5nOmZ1bmN0aW9uKCl7IklOUFVUIj09PXRoaXMubm9kZS50YWdOYW1lJiYicmFkaW8iPT09dGhpcy5ub2RlLnR5cGUmJmUodGhpcy5ub2RlKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWEuYmluZGluZ3MuY2hlY2tlZDtiJiYoYi52YWx1ZT0hMSl9KX19KSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4idmFsdWUiIT09YSYmImNoZWNrZWQiIT09YT9IVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpOih0aGlzLnVuYmluZChhKSx0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSx0aGlzLmJpbmRpbmdzW2FdPSJ2YWx1ZSI9PT1hP25ldyBkKHRoaXMsInZhbHVlIixiLGMpOm5ldyBmKHRoaXMsYixjKSl9LEhUTUxUZXh0QXJlYUVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiJ2YWx1ZSIhPT1hP0hUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk6KHRoaXMudW5iaW5kKGEpLHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLHRoaXMuYmluZGluZ3NbYV09bmV3IGQodGhpcyxhLGIsYykpfSxnLnByb3RvdHlwZT1qKHtfX3Byb3RvX186ZC5wcm90b3R5cGUsdmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZT10aGlzLm5vZGUucGFyZW50Tm9kZSBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50P3RoaXMubm9kZS5wYXJlbnROb2RlOnZvaWQgMDtlJiZlLmJpbmRpbmdzJiZlLmJpbmRpbmdzLnZhbHVlIGluc3RhbmNlb2YgaCYmKGI9ZS5iaW5kaW5ncy52YWx1ZSxjPWUudmFsdWUpLGQucHJvdG90eXBlLnZhbHVlQ2hhbmdlZC5jYWxsKHRoaXMsYSksYiYmIWIuY2xvc2VkJiZlLnZhbHVlIT09YyYmYi5ub2RlVmFsdWVDaGFuZ2VkKCl9fSksSFRNTE9wdGlvbkVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiJ2YWx1ZSIhPT1hP0hUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk6KHRoaXMudW5iaW5kKGEpLHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLHRoaXMuYmluZGluZ3NbYV09bmV3IGcodGhpcyxiLGMpKX0saC5wcm90b3R5cGU9aih7X19wcm90b19fOmQucHJvdG90eXBlLHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7ZC5ub2RlW2QucHJvcGVydHldPWEsZC5ub2RlW2QucHJvcGVydHldIT1hJiZjLS0mJm0oYil9aWYodGhpcy5ub2RlW3RoaXMucHJvcGVydHldPWEsdGhpcy5ub2RlW3RoaXMucHJvcGVydHldIT1hKXt2YXIgYz0yLGQ9dGhpczttKGIpfX19KSxIVE1MU2VsZWN0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuInNlbGVjdGVkaW5kZXgiPT09YSYmKGE9InNlbGVjdGVkSW5kZXgiKSwic2VsZWN0ZWRJbmRleCIhPT1hJiYidmFsdWUiIT09YT9IVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpOih0aGlzLnVuYmluZChhKSx0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSx0aGlzLmJpbmRpbmdzW2FdPW5ldyBoKHRoaXMsYSxiLGMpKX07dmFyIG09ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3RoaXMubmV4dFJ1bm5lcj1hLHRoaXMudmFsdWU9ITEsdGhpcy5sYXN0VmFsdWU9dGhpcy52YWx1ZSx0aGlzLnNjaGVkdWxlZD1bXSx0aGlzLnNjaGVkdWxlZElkcz1bXSx0aGlzLnJ1bm5pbmc9ITEsdGhpcy5vYnNlcnZlcj1uZXcgUGF0aE9ic2VydmVyKHRoaXMsInZhbHVlIix0aGlzLnJ1bix0aGlzKX1mdW5jdGlvbiBiKGEpe3ZhciBiPWFbZV07YVtlXXx8KGI9ZCsrLGFbZV09YiksYy5zY2hlZHVsZShhLGIpfWEucHJvdG90eXBlPXtzY2hlZHVsZTpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLnNjaGVkdWxlZElkc1tiXSl7aWYodGhpcy5ydW5uaW5nKXJldHVybiB0aGlzLm5leHRSdW5uZXIuc2NoZWR1bGUoYSxiKTt0aGlzLnNjaGVkdWxlZElkc1tiXT0hMCx0aGlzLnNjaGVkdWxlZC5wdXNoKGEpLHRoaXMubGFzdFZhbHVlPT09dGhpcy52YWx1ZSYmKHRoaXMudmFsdWU9IXRoaXMudmFsdWUpfX0scnVuOmZ1bmN0aW9uKCl7dGhpcy5ydW5uaW5nPSEwO2Zvcih2YXIgYT0wO2E8dGhpcy5zY2hlZHVsZWQubGVuZ3RoO2ErKyl7dmFyIGI9dGhpcy5zY2hlZHVsZWRbYV0sYz1iW2VdO3RoaXMuc2NoZWR1bGVkSWRzW2NdPSExLCJmdW5jdGlvbiI9PXR5cGVvZiBiP2IoKTpiLnJlc29sdmUoKX10aGlzLnNjaGVkdWxlZD1bXSx0aGlzLnNjaGVkdWxlZElkcz1bXSx0aGlzLmxhc3RWYWx1ZT10aGlzLnZhbHVlLHRoaXMucnVubmluZz0hMX19O3ZhciBjPW5ldyBhKG5ldyBhKSxkPTEsZT0iX19zY2hlZHVsZWRJZF9fIjtyZXR1cm4gYn0oKX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhKXtmb3IoO2EucGFyZW50Tm9kZTspYT1hLnBhcmVudE5vZGU7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGEuZ2V0RWxlbWVudEJ5SWQ/YTpudWxsfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIEZbYS50YWdOYW1lXSYmYS5oYXNBdHRyaWJ1dGUoInRlbXBsYXRlIil9ZnVuY3Rpb24gZShhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGQoYSl9ZnVuY3Rpb24gZihhKXtyZXR1cm4gRyYmIlRFTVBMQVRFIj09YS50YWdOYW1lfWZ1bmN0aW9uIGcoYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoSCk7ZShhKSYmYihhKSxBKGMsYil9ZnVuY3Rpb24gaChhKXtmdW5jdGlvbiBiKGEpe0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSl8fGgoYS5jb250ZW50KX1nKGEsYil9ZnVuY3Rpb24gaShhLGIpe09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSl9ZnVuY3Rpb24gaihhKXtpZighYS5kZWZhdWx0VmlldylyZXR1cm4gYTt2YXIgYj1hLnRlbXBsYXRlQ29udGVudHNPd25lcl87aWYoIWIpe2ZvcihiPWEuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtiLmxhc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmxhc3RDaGlsZCk7YS50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfPWJ9cmV0dXJuIGJ9ZnVuY3Rpb24gayhhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTthLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYSk7Zm9yKHZhciBjPWEuYXR0cmlidXRlcyxkPWMubGVuZ3RoO2QtLT4wOyl7dmFyIGU9Y1tkXTtFW2UubmFtZV0mJigidGVtcGxhdGUiIT09ZS5uYW1lJiZiLnNldEF0dHJpYnV0ZShlLm5hbWUsZS52YWx1ZSksYS5yZW1vdmVBdHRyaWJ1dGUoZS5uYW1lKSl9cmV0dXJuIGJ9ZnVuY3Rpb24gbChhLGIsYyl7dmFyIGQ9YS5jb250ZW50O2lmKGMpcmV0dXJuIGQuYXBwZW5kQ2hpbGQoYiksdm9pZCAwO2Zvcih2YXIgZTtlPWIuZmlyc3RDaGlsZDspZC5hcHBlbmRDaGlsZChlKX1mdW5jdGlvbiBtKGEpeyJURU1QTEFURSI9PT1hLnRhZ05hbWU/R3x8KEo/YS5fX3Byb3RvX189SFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU6aShhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKSk6KGkoYSxIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsImNvbnRlbnQiLEwpKX1mdW5jdGlvbiBuKGEpe2Euc2V0TW9kZWxGbl98fChhLnNldE1vZGVsRm5fPWZ1bmN0aW9uKCl7dChhLGEubW9kZWwsYS5iaW5kaW5nRGVsZWdhdGUpfSksSShhLnNldE1vZGVsRm5fKX1mdW5jdGlvbiBvKGEsYixjLGQpe2lmKGEmJmEubGVuZ3RoKXtmb3IodmFyIGUsZj1hLmxlbmd0aCxnPTAsaD0wLGk9MDtmPmg7KXtpZihnPWEuaW5kZXhPZigie3siLGgpLGk9MD5nPy0xOmEuaW5kZXhPZigifX0iLGcrMiksMD5pKXtpZighZSlyZXR1cm47ZS5wdXNoKGEuc2xpY2UoaCkpO2JyZWFrfWU9ZXx8W10sZS5wdXNoKGEuc2xpY2UoaCxnKSk7dmFyIGo9YS5zbGljZShnKzIsaSkudHJpbSgpO2UucHVzaChQYXRoLmdldChqKSk7dmFyIGs9ZCYmZChqLGIsYyk7ZS5wdXNoKGspLGg9aSsyfXJldHVybiBoPT09ZiYmZS5wdXNoKCIiKSxlLmhhc09uZVBhdGg9ND09PWUubGVuZ3RoLGUuaXNTaW1wbGVQYXRoPWUuaGFzT25lUGF0aCYmIiI9PWVbMF0mJiIiPT1lWzNdLGUuY29tYmluYXRvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9ZVswXSxjPTE7YzxlLmxlbmd0aDtjKz0zKXt2YXIgZD1lLmhhc09uZVBhdGg/YTphWyhjLTEpLzNdO3ZvaWQgMCE9PWQmJihiKz1kKSxiKz1lW2MrMl19cmV0dXJuIGJ9LGV9fWZ1bmN0aW9uIHAoYSxiLGMsZCl7Zm9yKHZhciBlPTA7ZTxhLmxlbmd0aDtlKz0yKXt2YXIgZj1hW2VdLGc9YVtlKzFdLGg9YyxpPWdbMV07aWYoZy5oYXNPbmVQYXRoKXt2YXIgaj1nWzJdLGs9aiYmaihjLGYsYik7dm9pZCAwIT09ayYmKGg9ayxpPU0pLGcuaXNTaW1wbGVQYXRofHwoaD1uZXcgUGF0aE9ic2VydmVyKGgsaSx2b2lkIDAsdm9pZCAwLHZvaWQgMCxnLmNvbWJpbmF0b3IpLGk9TSl9ZWxzZXtmb3IodmFyIGw9bmV3IENvbXBvdW5kUGF0aE9ic2VydmVyKHZvaWQgMCx2b2lkIDAsdm9pZCAwLGcuY29tYmluYXRvciksbT0xO208Zy5sZW5ndGg7bSs9Myl7dmFyIG49YyxvPWdbbV0saj1nW20rMV0saz1qJiZqKG4sZixiKTt2b2lkIDAhPT1rJiYobj1rLG89TSksbC5hZGRQYXRoKG4sbyl9bC5zdGFydCgpLGg9bCxpPU19dmFyIHA9Yi5iaW5kKGYsaCxpKTtkJiZkLnB1c2gocCl9fWZ1bmN0aW9uIHEoYSxjKXtiKGEpO2Zvcih2YXIgZCxmPWUoYSksZz0hMSxoPSExLGk9MDtpPGEuYXR0cmlidXRlcy5sZW5ndGg7aSsrKXt2YXIgaj1hLmF0dHJpYnV0ZXNbaV0saz1qLm5hbWUsbD1qLnZhbHVlO2YmJihrPT09RD8oZz0hMCxsPWx8fCJ7e319Iik6KGs9PT1CfHxrPT09QykmJihoPSEwLGw9bHx8Int7fX0iKSk7dmFyIG09byhsLGssYSxjKTttJiYoZD1kfHxbXSxkLnB1c2goayxtKSl9cmV0dXJuIGcmJiFoJiYoZD1kfHxbXSxkLnB1c2goQixvKCJ7e319IixCLGEsYykpKSxkfWZ1bmN0aW9uIHIoYSxiKXtpZihhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpcmV0dXJuIHEoYSxiKTtpZihhLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUpe3ZhciBjPW8oYS5kYXRhLCJ0ZXh0Q29udGVudCIsYSxiKTtpZihjKXJldHVyblsidGV4dENvbnRlbnQiLGNdfX1mdW5jdGlvbiBzKGEsYixjLGQsZSl7aWYoYiYmKGIudGVtcGxhdGVSZWYmJihIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlKGEsYi50ZW1wbGF0ZVJlZiksZCYmKGEuYmluZGluZ0RlbGVnYXRlXz1kKSksYi5sZW5ndGgmJnAoYixhLGMsZSksYi5jaGlsZHJlbikpZm9yKHZhciBmPTAsZz1hLmZpcnN0Q2hpbGQ7ZztnPWcubmV4dFNpYmxpbmcpcyhnLGIuY2hpbGRyZW5bZisrXSxjLGQsZSl9ZnVuY3Rpb24gdChhLGMsZCl7YihhKTt2YXIgZT1kJiYiZnVuY3Rpb24iPT10eXBlb2YgZC5wcmVwYXJlQmluZGluZz9kLnByZXBhcmVCaW5kaW5nOnZvaWQgMCxmPXIoYSxlKTtmJiZwKGYsYSxjKTtmb3IodmFyIGc9YS5maXJzdENoaWxkO2c7Zz1nLm5leHRTaWJsaW5nKXQoZyxjLGQpfWZ1bmN0aW9uIHUoYSxiKXt2YXIgYz1hLmNsb25lTm9kZSghMSk7aWYoYS5pc1RlbXBsYXRlXylyZXR1cm4gYztmb3IodmFyIGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWMuYXBwZW5kQ2hpbGQodShkLGIpKTtyZXR1cm4gY31mdW5jdGlvbiB2KGEsYil7dmFyIGM9cihhLGIpO2UoYSkmJihhLmlzVGVtcGxhdGVfPSEwLGM9Y3x8W10sYy50ZW1wbGF0ZVJlZj1hLGMuaGFzU3ViVGVtcGxhdGU9ITApO2Zvcih2YXIgZD1hLmZpcnN0Q2hpbGQsZj0wO2Q7ZD1kLm5leHRTaWJsaW5nLGYrKyl7dmFyIGc9dihkLGIpO2cmJihjPWN8fFtdLGMuY2hpbGRyZW49Yy5jaGlsZHJlbnx8e30sYy5jaGlsZHJlbltmXT1nLGcuaGFzU3ViVGVtcGxhdGUmJihjLmhhc1N1YlRlbXBsYXRlPSEwKSl9cmV0dXJuIGN9ZnVuY3Rpb24gdyhhLGIsYyl7dGhpcy5maXJzdE5vZGU9YSx0aGlzLmxhc3ROb2RlPWIsdGhpcy5tb2RlbD1jfWZ1bmN0aW9uIHgoYSxiKXtpZihhLmZpcnN0Q2hpbGQpZm9yKHZhciBjPW5ldyB3KGEuZmlyc3RDaGlsZCxhLmxhc3RDaGlsZCxiKSxkPWMuZmlyc3ROb2RlO2Q7KWQudGVtcGxhdGVJbnN0YW5jZV89YyxkPWQubmV4dFNpYmxpbmd9ZnVuY3Rpb24geShhKXt0aGlzLmNsb3NlZD0hMSx0aGlzLnRlbXBsYXRlRWxlbWVudF89YSx0aGlzLnRlcm1pbmF0b3JzPVtdLHRoaXMuaXRlcmF0ZWRWYWx1ZT12b2lkIDAsdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCx0aGlzLmRlcHNDaGFuZ2VkPSExLHRoaXMuaGFzUmVwZWF0PSExLHRoaXMucmVwZWF0TW9kZWw9dm9pZCAwLHRoaXMucmVwZWF0UGF0aD12b2lkIDAsdGhpcy5oYXNCaW5kPSExLHRoaXMuYmluZE1vZGVsPXZvaWQgMCx0aGlzLmJpbmRQYXRoPXZvaWQgMCx0aGlzLmhhc0lmPSExLHRoaXMuaWZNb2RlbD12b2lkIDAsdGhpcy5pZlBhdGg9dm9pZCAwfXZhciB6LEE9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP3o9YS5NYXA6KHo9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LHoucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSksImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBCPSJiaW5kIixDPSJyZXBlYXQiLEQ9ImlmIixFPXt0ZW1wbGF0ZTohMCxyZXBlYXQ6ITAsYmluZDohMCxyZWY6ITB9LEY9e1RIRUFEOiEwLFRCT0RZOiEwLFRGT09UOiEwLFRIOiEwLFRSOiEwLFREOiEwLENPTEdST1VQOiEwLENPTDohMCxDQVBUSU9OOiEwLE9QVElPTjohMCxPUFRHUk9VUDohMH0sRz0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQsSD0idGVtcGxhdGUsICIrT2JqZWN0LmtleXMoRikubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvTG93ZXJDYXNlKCkrIlt0ZW1wbGF0ZV0ifSkuam9pbigiLCAiKSxJPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt0aGlzLm5leHRSdW5uZXI9YSx0aGlzLnZhbHVlPSExLHRoaXMubGFzdFZhbHVlPXRoaXMudmFsdWUsdGhpcy5zY2hlZHVsZWQ9W10sdGhpcy5zY2hlZHVsZWRJZHM9W10sdGhpcy5ydW5uaW5nPSExLHRoaXMub2JzZXJ2ZXI9bmV3IFBhdGhPYnNlcnZlcih0aGlzLCJ2YWx1ZSIsdGhpcy5ydW4sdGhpcyl9ZnVuY3Rpb24gYihhKXt2YXIgYj1hW2VdO2FbZV18fChiPWQrKyxhW2VdPWIpLGMuc2NoZWR1bGUoYSxiKX1hLnByb3RvdHlwZT17c2NoZWR1bGU6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5zY2hlZHVsZWRJZHNbYl0pe2lmKHRoaXMucnVubmluZylyZXR1cm4gdGhpcy5uZXh0UnVubmVyLnNjaGVkdWxlKGEsYik7dGhpcy5zY2hlZHVsZWRJZHNbYl09ITAsdGhpcy5zY2hlZHVsZWQucHVzaChhKSx0aGlzLmxhc3RWYWx1ZT09PXRoaXMudmFsdWUmJih0aGlzLnZhbHVlPSF0aGlzLnZhbHVlKX19LHJ1bjpmdW5jdGlvbigpe3RoaXMucnVubmluZz0hMDtmb3IodmFyIGE9MDthPHRoaXMuc2NoZWR1bGVkLmxlbmd0aDthKyspe3ZhciBiPXRoaXMuc2NoZWR1bGVkW2FdLGM9YltlXTt0aGlzLnNjaGVkdWxlZElkc1tjXT0hMSwiZnVuY3Rpb24iPT10eXBlb2YgYj9iKCk6Yi5yZXNvbHZlKCl9dGhpcy5zY2hlZHVsZWQ9W10sdGhpcy5zY2hlZHVsZWRJZHM9W10sdGhpcy5sYXN0VmFsdWU9dGhpcy52YWx1ZSx0aGlzLnJ1bm5pbmc9ITF9fTt2YXIgYz1uZXcgYShuZXcgYSksZD0xLGU9Il9fc2NoZWR1bGVkSWRfXyI7cmV0dXJuIGJ9KCk7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtoKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksR3x8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIEo9Il9fcHJvdG9fXyJpbnt9O0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGU9ZnVuY3Rpb24oYSxjKXtpZihhLnRlbXBsYXRlSXNEZWNvcmF0ZWRfKXJldHVybiExO3ZhciBlPWE7ZS50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMDt2YXIgZz1mKGUpLGk9ZyxuPSFnLG89ITE7aWYoIWcmJmQoZSkmJihiKCFjKSxlPWsoYSksZS50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxnPWYoZSksbz0hMCksIWcpe20oZSk7dmFyIHA9aihlLm93bmVyRG9jdW1lbnQpO2UuY29udGVudF89cC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9cmV0dXJuIGM/ZS5pbnN0YW5jZVJlZl89YzpuP2woZSxhLG8pOmkmJmgoZS5jb250ZW50KSwhMH0sSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXA9aDt2YXIgSz1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsTD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudF99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtHfHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShLLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixMKSksaShIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSx7YmluZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuaXRlcmF0b3JffHwodGhpcy5pdGVyYXRvcl89bmV3IHkodGhpcykpLHRoaXMuYmluZGluZ3M9dGhpcy5iaW5kaW5nc3x8e30sImJpbmQiPT09YT8odGhpcy5pdGVyYXRvcl8uaGFzQmluZD0hMCx0aGlzLml0ZXJhdG9yXy5iaW5kTW9kZWw9Yix0aGlzLml0ZXJhdG9yXy5iaW5kUGF0aD1jLHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZ3x8KHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZz0hMCxJKHRoaXMuaXRlcmF0b3JfKSksdGhpcy5iaW5kaW5ncy5iaW5kPXRoaXMuaXRlcmF0b3JfKToicmVwZWF0Ij09PWE/KHRoaXMuaXRlcmF0b3JfLmhhc1JlcGVhdD0hMCx0aGlzLml0ZXJhdG9yXy5yZXBlYXRNb2RlbD1iLHRoaXMuaXRlcmF0b3JfLnJlcGVhdFBhdGg9Yyx0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmd8fCh0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmc9ITAsSSh0aGlzLml0ZXJhdG9yXykpLHRoaXMuYmluZGluZ3MucmVwZWF0PXRoaXMuaXRlcmF0b3JfKToiaWYiPT09YT8odGhpcy5pdGVyYXRvcl8uaGFzSWY9ITAsdGhpcy5pdGVyYXRvcl8uaWZNb2RlbD1iLHRoaXMuaXRlcmF0b3JfLmlmUGF0aD1jLHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZ3x8KHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZz0hMCxJKHRoaXMuaXRlcmF0b3JfKSksdGhpcy5iaW5kaW5ncy5pZj10aGlzLml0ZXJhdG9yXyk6SFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEpe2lmKCJiaW5kIj09PWEpe2lmKCF0aGlzLml0ZXJhdG9yXylyZXR1cm47cmV0dXJuIHRoaXMuaXRlcmF0b3JfLmhhc0JpbmQ9ITEsdGhpcy5pdGVyYXRvcl8uYmluZE1vZGVsPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5iaW5kUGF0aD12b2lkIDAsdGhpcy5pdGVyYXRvcl8uZGVwc0NoYW5naW5nfHwodGhpcy5pdGVyYXRvcl8uZGVwc0NoYW5naW5nPSEwLEkodGhpcy5pdGVyYXRvcl8pKSx0aGlzLmJpbmRpbmdzLmJpbmQ9dm9pZCAwfWlmKCJyZXBlYXQiPT09YSl7aWYoIXRoaXMuaXRlcmF0b3JfKXJldHVybjtyZXR1cm4gdGhpcy5pdGVyYXRvcl8uaGFzUmVwZWF0PSExLHRoaXMuaXRlcmF0b3JfLnJlcGVhdE1vZGVsPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5yZXBlYXRQYXRoPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmd8fCh0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmc9ITAsSSh0aGlzLml0ZXJhdG9yXykpLHRoaXMuYmluZGluZ3MucmVwZWF0PXZvaWQgMH1pZigiaWYiPT09YSl7aWYoIXRoaXMuaXRlcmF0b3JfKXJldHVybjtyZXR1cm4gdGhpcy5pdGVyYXRvcl8uaGFzSWY9ITEsdGhpcy5pdGVyYXRvcl8uaWZNb2RlbD12b2lkIDAsdGhpcy5pdGVyYXRvcl8uaWZQYXRoPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmd8fCh0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmc9ITAsSSh0aGlzLml0ZXJhdG9yXykpLHRoaXMuYmluZGluZ3MuaWY9dm9pZCAwfXJldHVybiBIVE1MRWxlbWVudC5wcm90b3R5cGUudW5iaW5kLmNhbGwodGhpcyxhKX0sY3JlYXRlSW5zdGFuY2U6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVmLmNvbnRlbnQsZT1kLmJpbmRpbmdNYXBfO2lmKCFlKXt2YXIgZj1iJiYiZnVuY3Rpb24iPT10eXBlb2YgYi5wcmVwYXJlQmluZGluZz9iLnByZXBhcmVCaW5kaW5nOnZvaWQgMDtlPXYoZCxmKXx8W10sZC5iaW5kaW5nTWFwXz1lfXZhciBnPWUuaGFzU3ViVGVtcGxhdGU/dShkKTpkLmNsb25lTm9kZSghMCk7cmV0dXJuIHMoZyxlLGEsYixjKSx4KGcsYSksZ30sZ2V0IG1vZGVsKCl7cmV0dXJuIHRoaXMubW9kZWxffSxzZXQgbW9kZWwoYSl7dGhpcy5tb2RlbF89YSxuKHRoaXMpfSxnZXQgYmluZGluZ0RlbGVnYXRlKCl7cmV0dXJuIHRoaXMuYmluZGluZ0RlbGVnYXRlX30sc2V0IGJpbmRpbmdEZWxlZ2F0ZShhKXt0aGlzLmJpbmRpbmdEZWxlZ2F0ZV89YSxuKHRoaXMpfSxnZXQgcmVmKCl7dmFyIGEsYj10aGlzLmdldEF0dHJpYnV0ZSgicmVmIik7aWYoYil7dmFyIGQ9Yyh0aGlzKTtkJiYoYT1kLmdldEVsZW1lbnRCeUlkKGIpKX1pZihhfHwoYT10aGlzLmluc3RhbmNlUmVmXyksIWEpcmV0dXJuIHRoaXM7dmFyIGU9YS5yZWY7cmV0dXJuIGU/ZTphfX0pO3ZhciBNPVBhdGguZ2V0KCJ2YWx1ZSIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShOb2RlLnByb3RvdHlwZSwidGVtcGxhdGVJbnN0YW5jZSIse2dldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMudGVtcGxhdGVJbnN0YW5jZV87cmV0dXJuIGE/YTp0aGlzLnBhcmVudE5vZGU/dGhpcy5wYXJlbnROb2RlLnRlbXBsYXRlSW5zdGFuY2U6dm9pZCAwfX0pLHkucHJvdG90eXBlPXtyZXNvbHZlOmZ1bmN0aW9uKCl7aWYodGhpcy5kZXBzQ2hhbmdpbmc9ITEsdGhpcy52YWx1ZU9ic2VydmVyJiYodGhpcy52YWx1ZU9ic2VydmVyLmNsb3NlKCksdGhpcy52YWx1ZU9ic2VydmVyPXZvaWQgMCksIXRoaXMuaGFzUmVwZWF0JiYhdGhpcy5oYXNCaW5kKXJldHVybiB0aGlzLnZhbHVlQ2hhbmdlZCgpLHZvaWQgMDt2YXIgYT10aGlzLmhhc1JlcGVhdD09PSEwLGI9YT90aGlzLnJlcGVhdE1vZGVsOnRoaXMuYmluZE1vZGVsLGM9YT90aGlzLnJlcGVhdFBhdGg6dGhpcy5iaW5kUGF0aDtpZih0aGlzLmhhc0lmKXt2YXIgZD1mdW5jdGlvbihiKXt2YXIgYz1iWzBdLGQ9YlsxXTtyZXR1cm4gZD9hP2M6W2NdOnZvaWQgMH07dGhpcy52YWx1ZU9ic2VydmVyPW5ldyBDb21wb3VuZFBhdGhPYnNlcnZlcih0aGlzLnZhbHVlQ2hhbmdlZCx0aGlzLHZvaWQgMCxkKSx0aGlzLnZhbHVlT2JzZXJ2ZXIuYWRkUGF0aChiLGMpLHRoaXMudmFsdWVPYnNlcnZlci5hZGRQYXRoKHRoaXMuaWZNb2RlbCx0aGlzLmlmUGF0aCksdGhpcy52YWx1ZU9ic2VydmVyLnN0YXJ0KCl9ZWxzZXt2YXIgZD10aGlzLmhhc1JlcGVhdD92b2lkIDA6ZnVuY3Rpb24oYSl7cmV0dXJuW2FdfTt0aGlzLnZhbHVlT2JzZXJ2ZXI9bmV3IFBhdGhPYnNlcnZlcihiLGMsdGhpcy52YWx1ZUNoYW5nZWQsdGhpcyx2b2lkIDAsZCl9dGhpcy52YWx1ZUNoYW5nZWQodGhpcy52YWx1ZU9ic2VydmVyLnZhbHVlKX0sdmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe0FycmF5LmlzQXJyYXkoYSl8fChhPXZvaWQgMCk7dmFyIGI9dGhpcy5pdGVyYXRlZFZhbHVlO3RoaXMudW5vYnNlcnZlKCksdGhpcy5pdGVyYXRlZFZhbHVlPWEsdGhpcy5pdGVyYXRlZFZhbHVlJiYodGhpcy5hcnJheU9ic2VydmVyPW5ldyBBcnJheU9ic2VydmVyKHRoaXMuaXRlcmF0ZWRWYWx1ZSx0aGlzLmhhbmRsZVNwbGljZXMsdGhpcykpO3ZhciBjPUFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcyh0aGlzLml0ZXJhdGVkVmFsdWV8fFtdLGJ8fFtdKTtjLmxlbmd0aCYmdGhpcy5oYW5kbGVTcGxpY2VzKGMpfSxnZXRUZXJtaW5hdG9yQXQ6ZnVuY3Rpb24oYSl7aWYoLTE9PWEpcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Xzt2YXIgYj10aGlzLnRlcm1pbmF0b3JzWzIqYV07aWYoYi5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFfHx0aGlzLnRlbXBsYXRlRWxlbWVudF89PT1iKXJldHVybiBiO3ZhciBjPWIuaXRlcmF0b3JfO3JldHVybiBjP2MuZ2V0VGVybWluYXRvckF0KGMudGVybWluYXRvcnMubGVuZ3RoLzItMSk6Yn0saW5zZXJ0SW5zdGFuY2VBdDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmdldFRlcm1pbmF0b3JBdChhLTEpLGY9ZTtiP2Y9Yi5sYXN0Q2hpbGR8fGY6YyYmKGY9Y1tjLmxlbmd0aC0xXXx8ZiksdGhpcy50ZXJtaW5hdG9ycy5zcGxpY2UoMiphLDAsZixkKTt2YXIgZz10aGlzLnRlbXBsYXRlRWxlbWVudF8ucGFyZW50Tm9kZSxoPWUubmV4dFNpYmxpbmc7aWYoYilnLmluc2VydEJlZm9yZShiLGgpO2Vsc2UgaWYoYylmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKylnLmluc2VydEJlZm9yZShjW2ldLGgpfSxleHRyYWN0SW5zdGFuY2VBdDpmdW5jdGlvbihhKXt2YXIgYj1bXSxjPXRoaXMuZ2V0VGVybWluYXRvckF0KGEtMSksZD10aGlzLmdldFRlcm1pbmF0b3JBdChhKTtiLmJvdW5kPXRoaXMudGVybWluYXRvcnNbMiphKzFdLHRoaXMudGVybWluYXRvcnMuc3BsaWNlKDIqYSwyKTtmb3IodmFyIGU9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGU7ZCE9PWM7KXt2YXIgZj1jLm5leHRTaWJsaW5nO2Y9PWQmJihkPWMpLGUucmVtb3ZlQ2hpbGQoZiksYi5wdXNoKGYpfXJldHVybiBifSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCl7dmFyIGI9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfO2lmKCFiLnBhcmVudE5vZGV8fCFiLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpcmV0dXJuIHRoaXMuY2xvc2UoKSx2b2lkIDA7aWYodm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fKXt2YXIgYz1iLmJpbmRpbmdEZWxlZ2F0ZTtjJiYiZnVuY3Rpb24iPT10eXBlb2YgYy5wcmVwYXJlSW5zdGFuY2VNb2RlbCYmKHRoaXMuaW5zdGFuY2VNb2RlbEZuXz1jLnByZXBhcmVJbnN0YW5jZU1vZGVsKGIpKSwiZnVuY3Rpb24iIT10eXBlb2YgdGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPSExKX12YXIgZD1uZXcgeixlPTA7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVtb3ZlZC5mb3JFYWNoKGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoYS5pbmRleCtlKTtkLnNldChiLGMpfSx0aGlzKSxlLT1hLmFkZGVkQ291bnR9LHRoaXMpLGEuZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5pbmRleDtiPGEuaW5kZXgrYS5hZGRlZENvdW50O2IrKyl7dmFyIGUsZj10aGlzLml0ZXJhdGVkVmFsdWVbYl0sZz12b2lkIDAsaD1kLmdldChmKTtoPyhkLmRlbGV0ZShmKSxlPWguYm91bmQpOihlPVtdLHRoaXMuaW5zdGFuY2VNb2RlbEZuXyYmKGY9dGhpcy5pbnN0YW5jZU1vZGVsRm5fKGYpKSx2b2lkIDAhPT1mJiYoZz10aGlzLnRlbXBsYXRlRWxlbWVudF8uY3JlYXRlSW5zdGFuY2UoZixjLGUpKSksdGhpcy5pbnNlcnRJbnN0YW5jZUF0KGIsZyxoLGUpfX0sdGhpcyksZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKGEuYm91bmQpfSx0aGlzKX19LGNsb3NlSW5zdGFuY2VCaW5kaW5nczpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLmNsb3NlKCl9LHVub2JzZXJ2ZTpmdW5jdGlvbigpe3RoaXMuYXJyYXlPYnNlcnZlciYmKHRoaXMuYXJyYXlPYnNlcnZlci5jbG9zZSgpLHRoaXMuYXJyYXlPYnNlcnZlcj12b2lkIDApfSxjbG9zZTpmdW5jdGlvbigpe2lmKCF0aGlzLmNsb3NlZCl7dGhpcy51bm9ic2VydmUoKTtmb3IodmFyIGE9MTthPHRoaXMudGVybWluYXRvcnMubGVuZ3RoO2ErPTIpdGhpcy5jbG9zZUluc3RhbmNlQmluZGluZ3ModGhpcy50ZXJtaW5hdG9yc1thXSk7dGhpcy50ZXJtaW5hdG9ycy5sZW5ndGg9MCx0aGlzLnZhbHVlT2JzZXJ2ZXImJnRoaXMudmFsdWVPYnNlcnZlci5jbG9zZSgpLHRoaXMudmFsdWVPYnNlcnZlcj12b2lkIDAsdGhpcy50ZW1wbGF0ZUVsZW1lbnRfLml0ZXJhdG9yXz12b2lkIDAsdGhpcy5jbG9zZWQ9ITB9fX0sSFRNTFRlbXBsYXRlRWxlbWVudC5mb3JBbGxUZW1wbGF0ZXNGcm9tXz1nfSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQVNTRVJUOiAiK2IpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGE+PTQ4JiY1Nz49YX1mdW5jdGlvbiBkKGEpe3JldHVybiAzMj09PWF8fDk9PT1hfHwxMT09PWF8fDEyPT09YXx8MTYwPT09YXx8YT49NTc2MCYmIuGagOGgjuKAgOKAgeKAguKAg+KAhOKAheKAhuKAh+KAiOKAieKAiuKAr+KBn+OAgO+7vyIuaW5kZXhPZihTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKT4wfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIDEwPT09YXx8MTM9PT1hfHw4MjMyPT09YXx8ODIzMz09PWF9ZnVuY3Rpb24gZihhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YX1mdW5jdGlvbiBnKGEpe3JldHVybiAzNj09PWF8fDk1PT09YXx8YT49NjUmJjkwPj1hfHxhPj05NyYmMTIyPj1hfHxhPj00OCYmNTc+PWF9ZnVuY3Rpb24gaChhKXtyZXR1cm4idGhpcyI9PT1hfWZ1bmN0aW9uIGkoKXtmb3IoOyQ+WiYmZChZLmNoYXJDb2RlQXQoWikpOykrK1p9ZnVuY3Rpb24gaigpe3ZhciBhLGI7Zm9yKGE9WisrOyQ+WiYmKGI9WS5jaGFyQ29kZUF0KFopLGcoYikpOykrK1o7cmV0dXJuIFkuc2xpY2UoYSxaKX1mdW5jdGlvbiBrKCl7dmFyIGEsYixjO3JldHVybiBhPVosYj1qKCksYz0xPT09Yi5sZW5ndGg/VS5JZGVudGlmaWVyOmgoYik/VS5LZXl3b3JkOiJudWxsIj09PWI/VS5OdWxsTGl0ZXJhbDoidHJ1ZSI9PT1ifHwiZmFsc2UiPT09Yj9VLkJvb2xlYW5MaXRlcmFsOlUuSWRlbnRpZmllcix7dHlwZTpjLHZhbHVlOmIscmFuZ2U6W2EsWl19fWZ1bmN0aW9uIGwoKXt2YXIgYSxiLGM9WixkPVkuY2hhckNvZGVBdChaKSxlPVlbWl07c3dpdGNoKGQpe2Nhc2UgNDY6Y2FzZSA0MDpjYXNlIDQxOmNhc2UgNTk6Y2FzZSA0NDpjYXNlIDEyMzpjYXNlIDEyNTpjYXNlIDkxOmNhc2UgOTM6Y2FzZSA1ODpjYXNlIDYzOmNhc2UgMTI2OnJldHVybisrWix7dHlwZTpVLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShkKSxyYW5nZTpbYyxaXX07ZGVmYXVsdDppZihhPVkuY2hhckNvZGVBdChaKzEpLDYxPT09YSlzd2l0Y2goZCl7Y2FzZSAzNzpjYXNlIDM4OmNhc2UgNDI6Y2FzZSA0MzpjYXNlIDQ1OmNhc2UgNDc6Y2FzZSA2MDpjYXNlIDYyOmNhc2UgMTI0OnJldHVybiBaKz0yLHt0eXBlOlUuUHVuY3R1YXRvcix2YWx1ZTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQpK1N0cmluZy5mcm9tQ2hhckNvZGUoYSkscmFuZ2U6W2MsWl19O2Nhc2UgMzM6Y2FzZSA2MTpyZXR1cm4gWis9Miw2MT09PVkuY2hhckNvZGVBdChaKSYmKytaLHt0eXBlOlUuUHVuY3R1YXRvcix2YWx1ZTpZLnNsaWNlKGMsWikscmFuZ2U6W2MsWl19fX1yZXR1cm4gYj1ZW1orMV0sZT09PWImJiImfCIuaW5kZXhPZihlKT49MD8oWis9Mix7dHlwZTpVLlB1bmN0dWF0b3IsdmFsdWU6ZStiLHJhbmdlOltjLFpdfSk6Ijw+PSErLSolJnxeLyIuaW5kZXhPZihlKT49MD8oKytaLHt0eXBlOlUuUHVuY3R1YXRvcix2YWx1ZTplLHJhbmdlOltjLFpdfSk6KHMoe30sWC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx2b2lkIDApfWZ1bmN0aW9uIG0oKXt2YXIgYSxkLGU7aWYoZT1ZW1pdLGIoYyhlLmNoYXJDb2RlQXQoMCkpfHwiLiI9PT1lLCJOdW1lcmljIGxpdGVyYWwgbXVzdCBzdGFydCB3aXRoIGEgZGVjaW1hbCBkaWdpdCBvciBhIGRlY2ltYWwgcG9pbnQiKSxkPVosYT0iIiwiLiIhPT1lKXtmb3IoYT1ZW1orK10sZT1ZW1pdLCIwIj09PWEmJmUmJmMoZS5jaGFyQ29kZUF0KDApKSYmcyh7fSxYLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpO2MoWS5jaGFyQ29kZUF0KFopKTspYSs9WVtaKytdO2U9WVtaXX1pZigiLiI9PT1lKXtmb3IoYSs9WVtaKytdO2MoWS5jaGFyQ29kZUF0KFopKTspYSs9WVtaKytdO2U9WVtaXX1pZigiZSI9PT1lfHwiRSI9PT1lKWlmKGErPVlbWisrXSxlPVlbWl0sKCIrIj09PWV8fCItIj09PWUpJiYoYSs9WVtaKytdKSxjKFkuY2hhckNvZGVBdChaKSkpZm9yKDtjKFkuY2hhckNvZGVBdChaKSk7KWErPVlbWisrXTtlbHNlIHMoe30sWC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKTtyZXR1cm4gZihZLmNoYXJDb2RlQXQoWikpJiZzKHt9LFguVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIikse3R5cGU6VS5OdW1lcmljTGl0ZXJhbCx2YWx1ZTpwYXJzZUZsb2F0KGEpLHJhbmdlOltkLFpdfX1mdW5jdGlvbiBuKCl7dmFyIGEsYyxkLGY9IiIsZz0hMTtmb3IoYT1ZW1pdLGIoIiciPT09YXx8JyInPT09YSwiU3RyaW5nIGxpdGVyYWwgbXVzdCBzdGFydHMgd2l0aCBhIHF1b3RlIiksYz1aLCsrWjskPlo7KXtpZihkPVlbWisrXSxkPT09YSl7YT0iIjticmVha31pZigiXFwiPT09ZClpZihkPVlbWisrXSxkJiZlKGQuY2hhckNvZGVBdCgwKSkpIlxyIj09PWQmJiJcbiI9PT1ZW1pdJiYrK1o7ZWxzZSBzd2l0Y2goZCl7Y2FzZSJuIjpmKz0iXG4iO2JyZWFrO2Nhc2UiciI6Zis9IlxyIjticmVhaztjYXNlInQiOmYrPSIJIjticmVhaztjYXNlImIiOmYrPSJcYiI7YnJlYWs7Y2FzZSJmIjpmKz0iXGYiO2JyZWFrO2Nhc2UidiI6Zis9IgsiO2JyZWFrO2RlZmF1bHQ6Zis9ZH1lbHNle2lmKGUoZC5jaGFyQ29kZUF0KDApKSlicmVhaztmKz1kfX1yZXR1cm4iIiE9PWEmJnMoe30sWC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx7dHlwZTpVLlN0cmluZ0xpdGVyYWwsdmFsdWU6ZixvY3RhbDpnLHJhbmdlOltjLFpdfX1mdW5jdGlvbiBvKGEpe3JldHVybiBhLnR5cGU9PT1VLklkZW50aWZpZXJ8fGEudHlwZT09PVUuS2V5d29yZHx8YS50eXBlPT09VS5Cb29sZWFuTGl0ZXJhbHx8YS50eXBlPT09VS5OdWxsTGl0ZXJhbH1mdW5jdGlvbiBwKCl7dmFyIGE7cmV0dXJuIGkoKSxaPj0kP3t0eXBlOlUuRU9GLHJhbmdlOltaLFpdfTooYT1ZLmNoYXJDb2RlQXQoWiksNDA9PT1hfHw0MT09PWF8fDU4PT09YT9sKCk6Mzk9PT1hfHwzND09PWE/bigpOmYoYSk/aygpOjQ2PT09YT9jKFkuY2hhckNvZGVBdChaKzEpKT9tKCk6bCgpOmMoYSk/bSgpOmwoKSl9ZnVuY3Rpb24gcSgpe3ZhciBhO3JldHVybiBhPWFiLFo9YS5yYW5nZVsxXSxhYj1wKCksWj1hLnJhbmdlWzFdLGF9ZnVuY3Rpb24gcigpe3ZhciBhO2E9WixhYj1wKCksWj1hfWZ1bmN0aW9uIHMoYSxjKXt2YXIgZCxlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSxmPWMucmVwbGFjZSgvJShcZCkvZyxmdW5jdGlvbihhLGMpe3JldHVybiBiKGM8ZS5sZW5ndGgsIk1lc3NhZ2UgcmVmZXJlbmNlIG11c3QgYmUgaW4gcmFuZ2UiKSxlW2NdfSk7dGhyb3cgZD1uZXcgRXJyb3IoZiksZC5pbmRleD1aLGQuZGVzY3JpcHRpb249ZixkfWZ1bmN0aW9uIHQoYSl7cyhhLFguVW5leHBlY3RlZFRva2VuLGEudmFsdWUpfWZ1bmN0aW9uIHUoYSl7dmFyIGI9cSgpOyhiLnR5cGUhPT1VLlB1bmN0dWF0b3J8fGIudmFsdWUhPT1hKSYmdChiKX1mdW5jdGlvbiB2KGEpe3JldHVybiBhYi50eXBlPT09VS5QdW5jdHVhdG9yJiZhYi52YWx1ZT09PWF9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gYWIudHlwZT09PVUuS2V5d29yZCYmYWIudmFsdWU9PT1hfWZ1bmN0aW9uIHgoKXtyZXR1cm4gNTk9PT1ZLmNoYXJDb2RlQXQoWik/KHEoKSx2b2lkIDApOihpKCksdigiOyIpPyhxKCksdm9pZCAwKTooYWIudHlwZT09PVUuRU9GfHx2KCJ9Iil8fHQoYWIpLHZvaWQgMCkpfWZ1bmN0aW9uIHkoKXt2YXIgYT1bXTtmb3IodSgiWyIpOyF2KCJdIik7KXYoIiwiKT8ocSgpLGEucHVzaChudWxsKSk6KGEucHVzaChkYigpKSx2KCJdIil8fHUoIiwiKSk7cmV0dXJuIHUoIl0iKSxfLmNyZWF0ZUFycmF5RXhwcmVzc2lvbihhKX1mdW5jdGlvbiB6KCl7dmFyIGE7cmV0dXJuIGkoKSxhPXEoKSxhLnR5cGU9PT1VLlN0cmluZ0xpdGVyYWx8fGEudHlwZT09PVUuTnVtZXJpY0xpdGVyYWw/Xy5jcmVhdGVMaXRlcmFsKGEpOl8uY3JlYXRlSWRlbnRpZmllcihhLnZhbHVlKX1mdW5jdGlvbiBBKCl7dmFyIGEsYjtyZXR1cm4gYT1hYixpKCksKGEudHlwZT09PVUuRU9GfHxhLnR5cGU9PT1VLlB1bmN0dWF0b3IpJiZ0KGEpLGI9eigpLHUoIjoiKSxfLmNyZWF0ZVByb3BlcnR5KCJpbml0IixiLGRiKCkpfWZ1bmN0aW9uIEIoKXt2YXIgYT1bXTtmb3IodSgieyIpOyF2KCJ9Iik7KWEucHVzaChBKCkpLHYoIn0iKXx8dSgiLCIpO3JldHVybiB1KCJ9IiksXy5jcmVhdGVPYmplY3RFeHByZXNzaW9uKGEpfWZ1bmN0aW9uIEMoKXt2YXIgYTtyZXR1cm4gdSgiKCIpLGE9ZGIoKSx1KCIpIiksYX1mdW5jdGlvbiBEKCl7dmFyIGEsYixjO3JldHVybiB2KCIoIik/QygpOihhPWFiLnR5cGUsYT09PVUuSWRlbnRpZmllcj9jPV8uY3JlYXRlSWRlbnRpZmllcihxKCkudmFsdWUpOmE9PT1VLlN0cmluZ0xpdGVyYWx8fGE9PT1VLk51bWVyaWNMaXRlcmFsP2M9Xy5jcmVhdGVMaXRlcmFsKHEoKSk6YT09PVUuS2V5d29yZD93KCJ0aGlzIikmJihxKCksYz1fLmNyZWF0ZVRoaXNFeHByZXNzaW9uKCkpOmE9PT1VLkJvb2xlYW5MaXRlcmFsPyhiPXEoKSxiLnZhbHVlPSJ0cnVlIj09PWIudmFsdWUsYz1fLmNyZWF0ZUxpdGVyYWwoYikpOmE9PT1VLk51bGxMaXRlcmFsPyhiPXEoKSxiLnZhbHVlPW51bGwsYz1fLmNyZWF0ZUxpdGVyYWwoYikpOnYoIlsiKT9jPXkoKTp2KCJ7IikmJihjPUIoKSksYz9jOih0KHEoKSksdm9pZCAwKSl9ZnVuY3Rpb24gRSgpe3ZhciBhPVtdO2lmKHUoIigiKSwhdigiKSIpKWZvcig7JD5aJiYoYS5wdXNoKGRiKCkpLCF2KCIpIikpOyl1KCIsIik7cmV0dXJuIHUoIikiKSxhfWZ1bmN0aW9uIEYoKXt2YXIgYTtyZXR1cm4gYT1xKCksbyhhKXx8dChhKSxfLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24gRygpe3JldHVybiB1KCIuIiksRigpfWZ1bmN0aW9uIEgoKXt2YXIgYTtyZXR1cm4gdSgiWyIpLGE9ZGIoKSx1KCJdIiksYX1mdW5jdGlvbiBJKCl7dmFyIGEsYjtmb3IoYT1EKCk7digiLiIpfHx2KCJbIik7KXYoIlsiKT8oYj1IKCksYT1fLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIlsiLGEsYikpOihiPUcoKSxhPV8uY3JlYXRlTWVtYmVyRXhwcmVzc2lvbigiLiIsYSxiKSk7cmV0dXJuIGF9ZnVuY3Rpb24gSigpe3ZhciBhLGI7cmV0dXJuIGFiLnR5cGUhPT1VLlB1bmN0dWF0b3ImJmFiLnR5cGUhPT1VLktleXdvcmQ/Yj1jYigpOnYoIisiKXx8digiLSIpfHx2KCIhIik/KGE9cSgpLGI9SigpLGI9Xy5jcmVhdGVVbmFyeUV4cHJlc3Npb24oYS52YWx1ZSxiKSk6dygiZGVsZXRlIil8fHcoInZvaWQiKXx8dygidHlwZW9mIik/cyh7fSxYLlVuZXhwZWN0ZWRUb2tlbik6Yj1jYigpLGJ9ZnVuY3Rpb24gSyhhKXt2YXIgYj0wO2lmKGEudHlwZSE9PVUuUHVuY3R1YXRvciYmYS50eXBlIT09VS5LZXl3b3JkKXJldHVybiAwO3N3aXRjaChhLnZhbHVlKXtjYXNlInx8IjpiPTE7YnJlYWs7Y2FzZSImJiI6Yj0yO2JyZWFrO2Nhc2UiPT0iOmNhc2UiIT0iOmNhc2UiPT09IjpjYXNlIiE9PSI6Yj02O2JyZWFrO2Nhc2UiPCI6Y2FzZSI+IjpjYXNlIjw9IjpjYXNlIj49IjpjYXNlImluc3RhbmNlb2YiOmI9NzticmVhaztjYXNlImluIjpiPTc7YnJlYWs7Y2FzZSIrIjpjYXNlIi0iOmI9OTticmVhaztjYXNlIioiOmNhc2UiLyI6Y2FzZSIlIjpiPTExfXJldHVybiBifWZ1bmN0aW9uIEwoKXt2YXIgYSxiLGMsZCxlLGYsZyxoO2lmKGc9SigpLGI9YWIsYz1LKGIpLDA9PT1jKXJldHVybiBnO2ZvcihiLnByZWM9YyxxKCksZT1KKCksZD1bZyxiLGVdOyhjPUsoYWIpKT4wOyl7Zm9yKDtkLmxlbmd0aD4yJiZjPD1kW2QubGVuZ3RoLTJdLnByZWM7KWU9ZC5wb3AoKSxmPWQucG9wKCkudmFsdWUsZz1kLnBvcCgpLGE9Xy5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGYsZyxlKSxkLnB1c2goYSk7Yj1xKCksYi5wcmVjPWMsZC5wdXNoKGIpLGE9SigpLGQucHVzaChhKX1mb3IoaD1kLmxlbmd0aC0xLGE9ZFtoXTtoPjE7KWE9Xy5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGRbaC0xXS52YWx1ZSxkW2gtMl0sYSksaC09MjtyZXR1cm4gYX1mdW5jdGlvbiBNKCl7dmFyIGEsYixjO3JldHVybiBhPUwoKSx2KCI/IikmJihxKCksYj1NKCksdSgiOiIpLGM9TSgpLGE9Xy5jcmVhdGVDb25kaXRpb25hbEV4cHJlc3Npb24oYSxiLGMpKSxhfWZ1bmN0aW9uIE4oKXt2YXIgYSxiO3JldHVybiBhPXEoKSxhLnR5cGUhPT1VLklkZW50aWZpZXImJnQoYSksYj12KCIoIik/RSgpOltdLF8uY3JlYXRlRmlsdGVyKGEudmFsdWUsYil9ZnVuY3Rpb24gTyhhKXtmb3IoXy5jcmVhdGVUb3BMZXZlbChhKTt2KCJ8Iik7KXEoKSxOKCl9ZnVuY3Rpb24gUCgpe2koKSxyKCk7dmFyIGE9ZGIoKTthJiYoImFzIj09PWFiLnZhbHVlP1IoYSk6ImluIj09PWFiLnZhbHVlJiZhLnR5cGU9PT1XLklkZW50aWZpZXI/UyhhKTp2KCJ8Iik/TyhhKTphLnR5cGU9PT1XLklkZW50aWZpZXImJnYoIjoiKT9RKGEpOl8uY3JlYXRlVG9wTGV2ZWwoYSkpLGFiLnR5cGUhPT1VLkVPRiYmdChhYil9ZnVuY3Rpb24gUShhKXt2YXIgYj1hLm5hbWU7Zm9yKHUoIjoiKSxhPWRiKCksXy5jcmVhdGVMYWJlbGVkU3RhdGVtZW50KGIsYSkseCgpO2FiLnR5cGU9PT1VLklkZW50aWZpZXI7KWI9cSgpLnZhbHVlLHUoIjoiKSxhPWRiKCksXy5jcmVhdGVMYWJlbGVkU3RhdGVtZW50KGIsYSkseCgpO3JldHVybiBudWxsfWZ1bmN0aW9uIFIoYSl7cSgpO3ZhciBiPXEoKS52YWx1ZTtfLmNyZWF0ZUFzRXhwcmVzc2lvbihhLGIpfWZ1bmN0aW9uIFMoYSl7cSgpO3ZhciBiPWRiKCk7Xy5jcmVhdGVJbkV4cHJlc3Npb24oYS5uYW1lLGIpfWZ1bmN0aW9uIFQoYSxiKXtyZXR1cm4gXz1iLFk9YSxaPTAsJD1ZLmxlbmd0aCxhYj1udWxsLGJiPXtsYWJlbFNldDp7fX0sUCgpfXZhciBVLFYsVyxYLFksWiwkLF8sYWIsYmI7VT17Qm9vbGVhbkxpdGVyYWw6MSxFT0Y6MixJZGVudGlmaWVyOjMsS2V5d29yZDo0LE51bGxMaXRlcmFsOjUsTnVtZXJpY0xpdGVyYWw6NixQdW5jdHVhdG9yOjcsU3RyaW5nTGl0ZXJhbDo4fSxWPXt9LFZbVS5Cb29sZWFuTGl0ZXJhbF09IkJvb2xlYW4iLFZbVS5FT0ZdPSI8ZW5kPiIsVltVLklkZW50aWZpZXJdPSJJZGVudGlmaWVyIixWW1UuS2V5d29yZF09IktleXdvcmQiLFZbVS5OdWxsTGl0ZXJhbF09Ik51bGwiLFZbVS5OdW1lcmljTGl0ZXJhbF09Ik51bWVyaWMiLFZbVS5QdW5jdHVhdG9yXT0iUHVuY3R1YXRvciIsVltVLlN0cmluZ0xpdGVyYWxdPSJTdHJpbmciLFc9e0FycmF5RXhwcmVzc2lvbjoiQXJyYXlFeHByZXNzaW9uIixCaW5hcnlFeHByZXNzaW9uOiJCaW5hcnlFeHByZXNzaW9uIixDYWxsRXhwcmVzc2lvbjoiQ2FsbEV4cHJlc3Npb24iLENvbmRpdGlvbmFsRXhwcmVzc2lvbjoiQ29uZGl0aW9uYWxFeHByZXNzaW9uIixFbXB0eVN0YXRlbWVudDoiRW1wdHlTdGF0ZW1lbnQiLEV4cHJlc3Npb25TdGF0ZW1lbnQ6IkV4cHJlc3Npb25TdGF0ZW1lbnQiLElkZW50aWZpZXI6IklkZW50aWZpZXIiLExpdGVyYWw6IkxpdGVyYWwiLExhYmVsZWRTdGF0ZW1lbnQ6IkxhYmVsZWRTdGF0ZW1lbnQiLExvZ2ljYWxFeHByZXNzaW9uOiJMb2dpY2FsRXhwcmVzc2lvbiIsTWVtYmVyRXhwcmVzc2lvbjoiTWVtYmVyRXhwcmVzc2lvbiIsT2JqZWN0RXhwcmVzc2lvbjoiT2JqZWN0RXhwcmVzc2lvbiIsUHJvZ3JhbToiUHJvZ3JhbSIsUHJvcGVydHk6IlByb3BlcnR5IixUaGlzRXhwcmVzc2lvbjoiVGhpc0V4cHJlc3Npb24iLFVuYXJ5RXhwcmVzc2lvbjoiVW5hcnlFeHByZXNzaW9uIn0sWD17VW5leHBlY3RlZFRva2VuOiJVbmV4cGVjdGVkIHRva2VuICUwIixVbmtub3duTGFiZWw6IlVuZGVmaW5lZCBsYWJlbCAnJTAnIixSZWRlY2xhcmF0aW9uOiIlMCAnJTEnIGhhcyBhbHJlYWR5IGJlZW4gZGVjbGFyZWQifTt2YXIgY2I9SSxkYj1NO2EuZXNwcmltYT17cGFyc2U6VH19KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixkKXt2YXIgZTt0cnl7aWYoZT1jKGEpLGUuc2NvcGVJZGVudCYmKGQubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8IlRFTVBMQVRFIiE9PWQudGFnTmFtZXx8ImJpbmQiIT09YiYmInJlcGVhdCIhPT1iKSl0aHJvdyBFcnJvcigiYXMgYW5kIGluIGNhbiBvbmx5IGJlIHVzZWQgd2l0aGluIDx0ZW1wbGF0ZSBiaW5kL3JlcGVhdD4iKX1jYXRjaChmKXtyZXR1cm4gY29uc29sZS5lcnJvcigiSW52YWxpZCBleHByZXNzaW9uIHN5bnRheDogIithLGYpLHZvaWQgMH1yZXR1cm4gZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWUuZ2V0QmluZGluZyhhKTtyZXR1cm4gZS5zY29wZUlkZW50JiZkJiYoYy5wb2x5bWVyRXhwcmVzc2lvblNjb3BlTmFtZV89ZS5zY29wZUlkZW50KSxkfX1mdW5jdGlvbiBjKGEpe3ZhciBiPWxbYV07aWYoIWIpe3ZhciBjPW5ldyBpO2VzcHJpbWEucGFyc2UoYSxjKSxiPW5ldyBqKGMpLGxbYV09Yn1yZXR1cm4gYn1mdW5jdGlvbiBkKGEpe3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCsrKWFbZF0uZXhwcmVzc2lvbihiKSYmYy5wdXNoKGFbZF0ubGFiZWwpO3JldHVybiBjLmpvaW4oIiAiKX19ZnVuY3Rpb24gZShhLGIsYyl7dGhpcy5kZWxlZ2F0ZT1hLHRoaXMubmFtZT1iLHRoaXMubGFzdD1jfWZ1bmN0aW9uIGYoYSxiKXt0aGlzLm5hbWU9YSx0aGlzLmFyZ3M9Yix0aGlzLm9iamVjdF89bnVsbH1mdW5jdGlvbiBnKCl7dGhyb3cgRXJyb3IoIk5vdCBJbXBsZW1lbnRlZCIpfWZ1bmN0aW9uIGgoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBlP2EudmFsdWVGbigpOmF9ZnVuY3Rpb24gaSgpe3RoaXMuZXhwcmVzc2lvbj1udWxsLHRoaXMuZmlsdGVycz1bXSx0aGlzLmxhYmVsZWRTdGF0ZW1lbnRzPVtdLHRoaXMuZGVwcz17fSx0aGlzLmRlcHNMaXN0PVtdLHRoaXMuY3VycmVudFBhdGg9dm9pZCAwLHRoaXMuaWRlbnQ9dm9pZCAwfWZ1bmN0aW9uIGooYSl7aWYodGhpcy5zY29wZUlkZW50PWEuaWRlbnQsIWEuZXhwcmVzc2lvbiYmIWEubGFiZWxlZFN0YXRlbWVudHMubGVuZ3RoKXRocm93IEVycm9yKCJObyBleHByZXNzaW9uIG9yIGxhYmVsbGVkIHN0YXRlbWVudHMgZm91bmQuIik7dmFyIGI9YS5sYWJlbGVkU3RhdGVtZW50cy5sZW5ndGg/ZChhLmxhYmVsZWRTdGF0ZW1lbnRzKTpoKGEuZXhwcmVzc2lvbik7YS5maWx0ZXJzLmZvckVhY2goZnVuY3Rpb24oYSl7Yj1hLnRvRE9NKGIpfSksdGhpcy5yZXNvbHZlRm49Yix0aGlzLnBhdGhzPWEuZGVwc0xpc3QsMT09PXRoaXMucGF0aHMubGVuZ3RoJiZhLmZpbHRlcnMubGVuZ3RoJiZhLmV4cHJlc3Npb24gaW5zdGFuY2VvZiBlJiYodGhpcy5maWx0ZXJzU2V0VmFsdWVGbj1hLmZpbHRlcnNTZXRWYWx1ZUZuKX1mdW5jdGlvbiBrKCl7fXZhciBsPU9iamVjdC5jcmVhdGUobnVsbCk7ZS5wcm90b3R5cGU9e2dldFBhdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXRoX3x8KHRoaXMucGF0aF89dGhpcy5sYXN0P1BhdGguZ2V0KHRoaXMubGFzdC5nZXRQYXRoKCkrIi4iK3RoaXMubmFtZSk6UGF0aC5nZXQodGhpcy5uYW1lKSksdGhpcy5wYXRoX30sdmFsdWVGbjpmdW5jdGlvbigpe2lmKCF0aGlzLnZhbHVlRm5fKXt2YXIgYT10aGlzLmdldFBhdGgoKSxiPXRoaXMuZGVsZWdhdGUsYz10aGlzLmRlbGVnYXRlLmRlcHNbYV07dm9pZCAwPT09YyYmKGM9dGhpcy5kZWxlZ2F0ZS5kZXBzW2FdPXRoaXMuZGVsZWdhdGUuZGVwc0xpc3QubGVuZ3RoLHRoaXMuZGVsZWdhdGUuZGVwc0xpc3QucHVzaChhKSk7dmFyIGQ9Yi5kZXBzTGlzdDt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09ZC5sZW5ndGg/YTphW2NdfX1yZXR1cm4gdGhpcy52YWx1ZUZuX319LGYucHJvdG90eXBlPXtnZXQgb2JqZWN0KCl7aWYodGhpcy5vYmplY3RfKXJldHVybiB0aGlzLm9iamVjdF87dmFyIGE9ay5maWx0ZXJzW3RoaXMubmFtZV0sYj10aGlzLmFyZ3MubWFwKGZ1bmN0aW9uKGEpe3ZhciBiPWgoYSk7cmV0dXJuIGIoKX0pO3JldHVybiB0aGlzLm9iamVjdF89YS5hcHBseShudWxsLGIpfSx0b0RPTTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9iamVjdDtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9YShjKTtyZXR1cm4gYi50b0RPTShkKX19LHRvTW9kZWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vYmplY3Q7cmV0dXJuIGIudG9Nb2RlbD9iLnRvTW9kZWwoYSk6YX19O3ZhciBtPXsiKyI6ZnVuY3Rpb24oYSl7cmV0dXJuK2EKfSwiLSI6ZnVuY3Rpb24oYSl7cmV0dXJuLWF9LCIhIjpmdW5jdGlvbihhKXtyZXR1cm4hYX19LG49eyIrIjpmdW5jdGlvbihhLGIpe3JldHVybiBhK2J9LCItIjpmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LCIqIjpmdW5jdGlvbihhLGIpe3JldHVybiBhKmJ9LCIvIjpmdW5jdGlvbihhLGIpe3JldHVybiBhL2J9LCIlIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJWJ9LCI8IjpmdW5jdGlvbihhLGIpe3JldHVybiBiPmF9LCI+IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPmJ9LCI8PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj49YX0sIj49IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPj1ifSwiPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PWJ9LCIhPSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9Yn0sIj09PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9LCIhPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPT1ifSwiJiYiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmJ9LCJ8fCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn19O2kucHJvdG90eXBlPXtnZXQgZmlsdGVyc1NldFZhbHVlRm4oKXtpZighdGhpcy5maWx0ZXJzU2V0VmFsdWVGbl8pe3ZhciBhPXRoaXMuZmlsdGVyczt0aGlzLmZpbHRlcnNTZXRWYWx1ZUZuXz1mdW5jdGlvbihiKXtmb3IodmFyIGM9YS5sZW5ndGgtMTtjPj0wO2MtLSliPWFbY10udG9Nb2RlbChiKTtyZXR1cm4gYn19cmV0dXJuIHRoaXMuZmlsdGVyc1NldFZhbHVlRm5ffSxjcmVhdGVMYWJlbGVkU3RhdGVtZW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubGFiZWxlZFN0YXRlbWVudHMucHVzaCh7bGFiZWw6YSxleHByZXNzaW9uOmIgaW5zdGFuY2VvZiBlP2IudmFsdWVGbigpOmJ9KSxifSxjcmVhdGVVbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXtpZighbVthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj1oKGIpLGZ1bmN0aW9uKGMpe3JldHVybiBtW2FdKGIoYykpfX0sY3JlYXRlQmluYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7aWYoIW5bYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7cmV0dXJuIGI9aChiKSxjPWgoYyksZnVuY3Rpb24oZCl7cmV0dXJuIG5bYV0oYihkKSxjKGQpKX19LGNyZWF0ZUNvbmRpdGlvbmFsRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGE9aChhKSxiPWgoYiksYz1oKGMpLGZ1bmN0aW9uKGQpe3JldHVybiBhKGQpP2IoZCk6YyhkKX19LGNyZWF0ZUlkZW50aWZpZXI6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGUodGhpcyxhKTtyZXR1cm4gYi50eXBlPSJJZGVudGlmaWVyIixifSxjcmVhdGVNZW1iZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4iWyI9PT1hPyhiPWgoYiksYz1oKGMpLGZ1bmN0aW9uKGEpe3JldHVybiBiKGEpW2MoYSldfSk6bmV3IGUodGhpcyxjLm5hbWUsYil9LGNyZWF0ZUxpdGVyYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEudmFsdWV9fSxjcmVhdGVBcnJheUV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXT1oKGFbYl0pO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCsrKWMucHVzaChhW2RdKGIpKTtyZXR1cm4gY319LGNyZWF0ZVByb3BlcnR5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm57a2V5OmIgaW5zdGFuY2VvZiBlP2IuZ2V0UGF0aCgpOmIoKSx2YWx1ZTpjfX0sY3JlYXRlT2JqZWN0RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLnZhbHVlPWgoYVtiXS52YWx1ZSk7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz17fSxkPTA7ZDxhLmxlbmd0aDtkKyspY1thW2RdLmtleV09YVtkXS52YWx1ZShiKTtyZXR1cm4gY319LGNyZWF0ZUZpbHRlcjpmdW5jdGlvbihhLGIpe3RoaXMuZmlsdGVycy5wdXNoKG5ldyBmKGEsYikpfSxjcmVhdGVBc0V4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXt0aGlzLmV4cHJlc3Npb249YSx0aGlzLmlkZW50PWJ9LGNyZWF0ZUluRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIpe3RoaXMuZXhwcmVzc2lvbj1iLHRoaXMuaWRlbnQ9YX0sY3JlYXRlVG9wTGV2ZWw6ZnVuY3Rpb24oYSl7dGhpcy5leHByZXNzaW9uPWF9LGNyZWF0ZVRoaXNFeHByZXNzaW9uOmd9LGoucHJvdG90eXBlPXtnZXRCaW5kaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGF0aHM7aWYoIWIubGVuZ3RoKXJldHVybnt2YWx1ZTp0aGlzLnJlc29sdmVGbih7fSl9O2lmKDE9PT1iLmxlbmd0aClyZXR1cm4gbmV3IFBhdGhPYnNlcnZlcihhLGJbMF0sdm9pZCAwLHZvaWQgMCx2b2lkIDAsdGhpcy5yZXNvbHZlRm4sdGhpcy5maWx0ZXJzU2V0VmFsdWVGbik7Zm9yKHZhciBjPW5ldyBDb21wb3VuZFBhdGhPYnNlcnZlcih2b2lkIDAsdm9pZCAwLHZvaWQgMCx0aGlzLnJlc29sdmVGbiksZD0wO2Q8Yi5sZW5ndGg7ZCsrKWMuYWRkUGF0aChhLGJbZF0pO3JldHVybiBjLnN0YXJ0KCksY319LGsuZmlsdGVycz1PYmplY3QuY3JlYXRlKG51bGwpLGsucHJvdG90eXBlPXtwcmVwYXJlQmluZGluZzpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIFBhdGguZ2V0KGEpLnZhbGlkP3ZvaWQgMDpiKGEsYyxkKX0scHJlcGFyZUluc3RhbmNlTW9kZWw6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wb2x5bWVyRXhwcmVzc2lvblNjb3BlTmFtZV87aWYoYil7dmFyIGM9YS50ZW1wbGF0ZUluc3RhbmNlP2EudGVtcGxhdGVJbnN0YW5jZS5tb2RlbDphLm1vZGVsO3JldHVybiBmdW5jdGlvbihhKXt2YXIgZD1PYmplY3QuY3JlYXRlKGMpO3JldHVybiBkW2JdPWEsZH19fX0sYS5Qb2x5bWVyRXhwcmVzc2lvbnM9a30odGhpcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2xvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXAoIlBsYXRmb3JtLmZsdXNoKCkiKSxhLmVuZE9mTWljcm90YXNrKFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwRW5kKCl9dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtjLnRleHRDb250ZW50PSJ0ZW1wbGF0ZSB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30gLyogaW5qZWN0ZWQgYnkgcGxhdGZvcm0uanMgKi8iO3ZhciBkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtkLmluc2VydEJlZm9yZShjLGQuZmlyc3RDaGlsZCk7dmFyIGU9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLE9ic2VydmVyLmhhc09iamVjdE9ic2VydmV8fChhLmZsdXNoUG9sbD1zZXRJbnRlcnZhbChiLGUpKX0pLGEuZmx1c2g9Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBkKGEsaSl9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gZChhLGopfWZ1bmN0aW9uIGQoYSxiKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmYS5nZXRBdHRyaWJ1dGUoInJlbCIpPT09Yn1mdW5jdGlvbiBlKGEpe3JldHVybiJzY3JpcHQiPT09YS5sb2NhbE5hbWV9ZnVuY3Rpb24gZihhLGIpe3ZhciBjPWE7YyBpbnN0YW5jZW9mIERvY3VtZW50fHwoYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoaSksYy5ib2R5LmlubmVySFRNTD1hKSxjLl9VUkw9Yjt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtyZXR1cm4gZC5zZXRBdHRyaWJ1dGUoImhyZWYiLGRvY3VtZW50LmJhc2VVUkl8fGRvY3VtZW50LlVSTCksYy5oZWFkLmFwcGVuZENoaWxkKGQpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31hfHwoYT13aW5kb3cuSFRNTEltcG9ydHM9e2ZsYWdzOnt9fSk7dmFyIGcsaD1hLnhocixpPSJpbXBvcnQiLGo9InN0eWxlc2hlZXQiLGs9e2RvY3VtZW50czp7fSxjYWNoZTp7fSxwcmVsb2FkU2VsZWN0b3JzOlsibGlua1tyZWw9IitpKyJdIiwiZWxlbWVudCBsaW5rW3JlbD0iK2orIl0iLCJ0ZW1wbGF0ZSIsInNjcmlwdFtzcmNdOm5vdChbdHlwZV0pIiwnc2NyaXB0W3NyY11bdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXS5qb2luKCIsIiksbG9hZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBnPW5ldyBsKGsubG9hZGVkLGEpLGcuY2FjaGU9ay5jYWNoZSxnfSxsb2FkOmZ1bmN0aW9uKGEsYil7Zz1rLmxvYWRlcihiKSxrLnByZWxvYWQoYSl9LHByZWxvYWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGsucHJlbG9hZFNlbGVjdG9ycyk7Yj10aGlzLmZpbHRlck1haW5Eb2N1bWVudE5vZGVzKGEsYiksYj10aGlzLmV4dHJhY3RUZW1wbGF0ZU5vZGVzKGIpLGcuYWRkTm9kZXMoYil9LGZpbHRlck1haW5Eb2N1bWVudE5vZGVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1kb2N1bWVudCYmKGI9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGIsZnVuY3Rpb24oYSl7cmV0dXJuIWUoYSl9KSksYn0sZXh0cmFjdFRlbXBsYXRlTm9kZXM6ZnVuY3Rpb24oYSl7dmFyIGI9W107cmV0dXJuIGE9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoInRlbXBsYXRlIj09PWEubG9jYWxOYW1lKXtpZihhLmNvbnRlbnQpe3ZhciBjPWEuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK2orIl0iKTtjLmxlbmd0aCYmKGI9Yi5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYywwKSkpfXJldHVybiExfXJldHVybiEwfSksYi5sZW5ndGgmJihhPWEuY29uY2F0KGIpKSxhfSxsb2FkZWQ6ZnVuY3Rpb24oYSxkLGUpe2lmKGIoZCkpe3ZhciBnPWsuZG9jdW1lbnRzW2FdO2d8fChnPWYoZSxhKSxwLnJlc29sdmVQYXRoc0luSFRNTChnKSxrLmRvY3VtZW50c1thXT1nLGsucHJlbG9hZChnKSksZC5pbXBvcnQ9e2hyZWY6YSxvd25lck5vZGU6ZCxjb250ZW50Omd9LGQuY29udGVudD1lPWd9ZC5fX3Jlc291cmNlPWUsYyhkKSYmcC5yZXNvbHZlUGF0aHNJblN0eWxlc2hlZXQoZCl9fSxsPWZ1bmN0aW9uKGEsYil7dGhpcy5vbmxvYWQ9YSx0aGlzLm9uY29tcGxldGU9Yix0aGlzLmluZmxpZ2h0PTAsdGhpcy5wZW5kaW5nPXt9LHRoaXMuY2FjaGU9e319O2wucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0Kz1hLmxlbmd0aCxxKGEsdGhpcy5yZXF1aXJlLHRoaXMpLHRoaXMuY2hlY2tEb25lKCl9LHJlcXVpcmU6ZnVuY3Rpb24oYSl7dmFyIGI9cC5ub2RlVXJsKGEpO2EuX19ub2RlVXJsPWIsdGhpcy5kZWR1cGUoYixhKXx8dGhpcy5mZXRjaChiLGEpfSxkZWR1cGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wZW5kaW5nW2FdPyh0aGlzLnBlbmRpbmdbYV0ucHVzaChiKSwhMCk6dGhpcy5jYWNoZVthXT8odGhpcy5vbmxvYWQoYSxiLGcuY2FjaGVbYV0pLHRoaXMudGFpbCgpLCEwKToodGhpcy5wZW5kaW5nW2FdPVtiXSwhMSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYyxkKXt0aGlzLnJlY2VpdmUoYSxiLGMsZCl9LmJpbmQodGhpcyk7aC5sb2FkKGEsYyl9LHJlY2VpdmU6ZnVuY3Rpb24oYSxiLGMsZCl7Y3x8KGcuY2FjaGVbYV09ZCksZy5wZW5kaW5nW2FdLmZvckVhY2goZnVuY3Rpb24oYil7Y3x8dGhpcy5vbmxvYWQoYSxiLGQpLHRoaXMudGFpbCgpfSx0aGlzKSxnLnBlbmRpbmdbYV09bnVsbH0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19O3ZhciBtPVsiaHJlZiIsInNyYyIsImFjdGlvbiJdLG49IlsiK20uam9pbigiXSxbIikrIl0iLG89Int7Lip9fSIscD17bm9kZVVybDpmdW5jdGlvbihhKXtyZXR1cm4gcC5yZXNvbHZlVXJsKHAuZG9jdW1lbnRVUkwscC5ocmVmT3JTcmMoYSkpfSxocmVmT3JTcmM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJocmVmIil8fGEuZ2V0QXR0cmlidXRlKCJzcmMiKX0sZG9jdW1lbnRVcmxGcm9tTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gcC5nZXREb2N1bWVudFVybChhLm93bmVyRG9jdW1lbnR8fGEpfSxnZXREb2N1bWVudFVybDpmdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5fVVJMfHxhLmltcGwmJmEuaW1wbC5fVVJMfHxhLmJhc2VVUkl8fGEuVVJMKXx8IiI7cmV0dXJuIGIuc3BsaXQoIiMiKVswXX0scmVzb2x2ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmlzQWJzVXJsKGIpP2I6dGhpcy5jb21wcmVzc1VybCh0aGlzLnVybFRvUGF0aChhKStiKX0scmVzb2x2ZVJlbGF0aXZlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaXNBYnNVcmwoYik/Yjp0aGlzLm1ha2VEb2N1bWVudFJlbFBhdGgodGhpcy5yZXNvbHZlVXJsKGEsYikpfSxpc0Fic1VybDpmdW5jdGlvbihhKXtyZXR1cm4vKF5kYXRhOil8KF5odHRwW3NdPzopfCheXC8pLy50ZXN0KGEpfSx1cmxUb1BhdGg6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zcGxpdCgiLyIpO3JldHVybiBiLnBvcCgpLGIucHVzaCgiIiksYi5qb2luKCIvIil9LGNvbXByZXNzVXJsOmZ1bmN0aW9uKGEpe3ZhciBiPSIiLGM9YS5pbmRleE9mKCI/Iik7Yz4tMSYmKGI9YS5zdWJzdHJpbmcoYyksYT1hLnN1YnN0cmluZyhjLDApKTtmb3IodmFyIGQsZT1hLnNwbGl0KCIvIiksZj0wO2Y8ZS5sZW5ndGg7ZisrKWQ9ZVtmXSwiLi4iPT09ZCYmKGUuc3BsaWNlKGYtMSwyKSxmLT0yKTtyZXR1cm4gZS5qb2luKCIvIikrYn0sbWFrZURvY3VtZW50UmVsUGF0aDpmdW5jdGlvbihhKXtyZXR1cm4gcC51cmxFbHQuaHJlZj1hLCFwLnVybEVsdC5ob3N0fHxwLnVybEVsdC5ob3N0PT09d2luZG93LmxvY2F0aW9uLmhvc3QmJnAudXJsRWx0LnByb3RvY29sPT09d2luZG93LmxvY2F0aW9uLnByb3RvY29sP3RoaXMubWFrZVJlbFBhdGgocC5kb2N1bWVudFVSTCxwLnVybEVsdC5ocmVmKTphfSxtYWtlUmVsUGF0aDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLnNwbGl0KCIvIiksZD1iLnNwbGl0KCIvIik7Yy5sZW5ndGgmJmNbMF09PT1kWzBdOyljLnNoaWZ0KCksZC5zaGlmdCgpO2Zvcih2YXIgZT0wLGY9Yy5sZW5ndGgtMTtmPmU7ZSsrKWQudW5zaGlmdCgiLi4iKTt2YXIgZz1kLmpvaW4oIi8iKTtyZXR1cm4gZ30scmVzb2x2ZVBhdGhzSW5IVE1MOmZ1bmN0aW9uKGEsYil7Yj1ifHxwLmRvY3VtZW50VXJsRnJvbU5vZGUoYSkscC5yZXNvbHZlQXR0cmlidXRlcyhhLGIpLHAucmVzb2x2ZVN0eWxlRWx0cyhhLGIpO3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKTtjJiZxKGMsZnVuY3Rpb24oYSl7YS5jb250ZW50JiZwLnJlc29sdmVQYXRoc0luSFRNTChhLmNvbnRlbnQsYil9KX0scmVzb2x2ZVBhdGhzSW5TdHlsZXNoZWV0OmZ1bmN0aW9uKGEpe3ZhciBiPXAubm9kZVVybChhKTthLl9fcmVzb3VyY2U9cC5yZXNvbHZlQ3NzVGV4dChhLl9fcmVzb3VyY2UsYil9LHJlc29sdmVTdHlsZUVsdHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7YyYmcShjLGZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9cC5yZXNvbHZlQ3NzVGV4dChhLnRleHRDb250ZW50LGIpfSl9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEucmVwbGFjZSgvdXJsXChbXildKlwpL2csZnVuY3Rpb24oYSl7dmFyIGM9YS5yZXBsYWNlKC9bIiddL2csIiIpLnNsaWNlKDQsLTEpO3JldHVybiBjPXAucmVzb2x2ZVJlbGF0aXZlVXJsKGIsYyksInVybCgiK2MrIikifSl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YSYmYS5xdWVyeVNlbGVjdG9yQWxsKG4pO2MmJnEoYyxmdW5jdGlvbihhKXt0aGlzLnJlc29sdmVOb2RlQXR0cmlidXRlcyhhLGIpfSx0aGlzKX0scmVzb2x2ZU5vZGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7bS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPWEuYXR0cmlidXRlc1tjXTtpZihkJiZkLnZhbHVlJiZkLnZhbHVlLnNlYXJjaChvKTwwKXt2YXIgZT1wLnJlc29sdmVSZWxhdGl2ZVVybChiLGQudmFsdWUpO2QudmFsdWU9ZX19KX19O3AuZG9jdW1lbnRVUkw9cC5nZXREb2N1bWVudFVybChkb2N1bWVudCkscC51cmxFbHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLGg9aHx8e2FzeW5jOiEwLG9rOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fDMwND09PWEuc3RhdHVzfHwwPT09YS5zdGF0dXN9LGxvYWQ6ZnVuY3Rpb24oYixjLGQpe3ZhciBlPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4oYS5mbGFncy5kZWJ1Z3x8YS5mbGFncy5idXN0KSYmKGIrPSI/IitNYXRoLnJhbmRvbSgpKSxlLm9wZW4oIkdFVCIsYixoLmFzeW5jKSxlLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGZ1bmN0aW9uKCl7ND09PWUucmVhZHlTdGF0ZSYmYy5jYWxsKGQsIWgub2soZSkmJmUsZS5yZXNwb25zZSxiKX0pLGUuc2VuZCgpLGV9LGxvYWREb2N1bWVudDpmdW5jdGlvbihhLGIsYyl7dGhpcy5sb2FkKGEsYixjKS5yZXNwb25zZVR5cGU9ImRvY3VtZW50In19O3ZhciBxPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS5wYXRoPXAsYS54aHI9aCxhLmltcG9ydGVyPWssYS5nZXREb2N1bWVudFVybD1wLmdldERvY3VtZW50VXJsLGEuSU1QT1JUX0xJTktfVFlQRT1pfSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWZ9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiYhZChhKSYmIWUoYSl9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50PT09ZG9jdW1lbnR8fGEub3duZXJEb2N1bWVudC5pbXBsPT09ZG9jdW1lbnR9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiYiZWxlbWVudCI9PT1hLnBhcmVudE5vZGUubG9jYWxOYW1lfXZhciBmPSJpbXBvcnQiLGc9e3NlbGVjdG9yczpbImxpbmtbcmVsPSIrZisiXSIsImxpbmtbcmVsPXN0eWxlc2hlZXRdIiwic3R5bGUiLCJzY3JpcHQ6bm90KFt0eXBlXSkiLCdzY3JpcHRbdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXSxtYXA6e2xpbms6InBhcnNlTGluayIsc2NyaXB0OiJwYXJzZVNjcmlwdCIsc3R5bGU6InBhcnNlR2VuZXJpYyJ9LHBhcnNlOmZ1bmN0aW9uKGEpe2lmKCFhLl9faW1wb3J0UGFyc2VkKXthLl9faW1wb3J0UGFyc2VkPSEwO3ZhciBiPWEucXVlcnlTZWxlY3RvckFsbChnLnNlbGVjdG9ycyk7aChiLGZ1bmN0aW9uKGEpe2dbZy5tYXBbYS5sb2NhbE5hbWVdXShhKX0pfX0scGFyc2VMaW5rOmZ1bmN0aW9uKGEpe2IoYSk/YS5jb250ZW50JiZnLnBhcnNlKGEuY29udGVudCk6dGhpcy5wYXJzZUdlbmVyaWMoYSl9LHBhcnNlR2VuZXJpYzpmdW5jdGlvbihhKXtjKGEpJiZkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGEpfSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXtpZihjKGIpKXt2YXIgZD0oYi5fX3Jlc291cmNlfHxiLnRleHRDb250ZW50KS50cmltKCk7aWYoZCl7dmFyIGU9Yi5fX25vZGVVcmw7aWYoIWUpe3ZhciBlPWEucGF0aC5kb2N1bWVudFVybEZyb21Ob2RlKGIpLGY9IlsiK01hdGguZmxvb3IoMWUzKihNYXRoLnJhbmRvbSgpKzEpKSsiXSIsZz1kLm1hdGNoKC9Qb2x5bWVyXChbJyJdKFteJyJdKikvKTtmPWcmJmdbMV18fGYsZSs9Ii8iK2YrIi5qcyJ9ZCs9IlxuLy8jIHNvdXJjZVVSTD0iK2UrIlxuIixldmFsLmNhbGwod2luZG93LGQpfX19fSxoPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS5wYXJzZXI9Z30oSFRNTEltcG9ydHMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe0hUTUxJbXBvcnRzLmltcG9ydGVyLmxvYWQoZG9jdW1lbnQsZnVuY3Rpb24oKXtIVE1MSW1wb3J0cy5wYXJzZXIucGFyc2UoZG9jdW1lbnQpLEhUTUxJbXBvcnRzLnJlYWR5VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiSFRNTEltcG9ydHNMb2FkZWQiLHtidWJibGVzOiEwfSkpfSl9ImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO3JldHVybiBiLmluaXRFdmVudChhLCEwLCEwKSxifSksImNvbXBsZXRlIj09PWRvY3VtZW50LnJlYWR5U3RhdGU/YSgpOndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixhKX0oKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9e2ZsYWdzOnt9fSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3UucHVzaChhKSx0fHwodD0hMCxxKGQpKX1mdW5jdGlvbiBjKGEpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSl8fGF9ZnVuY3Rpb24gZCgpe3Q9ITE7dmFyIGE9dTt1PVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7dmFyIGI9ITE7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEudGFrZVJlY29yZHMoKTtlKGEpLGMubGVuZ3RoJiYoYS5jYWxsYmFja18oYyxhKSxiPSEwKX0pLGImJmQoKX1mdW5jdGlvbiBlKGEpe2Eubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9cC5nZXQoYik7YyYmYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Iub2JzZXJ2ZXI9PT1hJiZiLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPWE7YztjPWMucGFyZW50Tm9kZSl7dmFyIGQ9cC5nZXQoYyk7aWYoZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXSxnPWYub3B0aW9ucztpZihjPT09YXx8Zy5zdWJ0cmVlKXt2YXIgaD1iKGcpO2gmJmYuZW5xdWV1ZShoKX19fX1mdW5jdGlvbiBnKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89Kyt2fWZ1bmN0aW9uIGgoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1bXSx0aGlzLnJlbW92ZWROb2Rlcz1bXSx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBpKGEpe3ZhciBiPW5ldyBoKGEudHlwZSxhLnRhcmdldCk7cmV0dXJuIGIuYWRkZWROb2Rlcz1hLmFkZGVkTm9kZXMuc2xpY2UoKSxiLnJlbW92ZWROb2Rlcz1hLnJlbW92ZWROb2Rlcy5zbGljZSgpLGIucHJldmlvdXNTaWJsaW5nPWEucHJldmlvdXNTaWJsaW5nLGIubmV4dFNpYmxpbmc9YS5uZXh0U2libGluZyxiLmF0dHJpYnV0ZU5hbWU9YS5hdHRyaWJ1dGVOYW1lLGIuYXR0cmlidXRlTmFtZXNwYWNlPWEuYXR0cmlidXRlTmFtZXNwYWNlLGIub2xkVmFsdWU9YS5vbGRWYWx1ZSxifWZ1bmN0aW9uIGooYSxiKXtyZXR1cm4gdz1uZXcgaChhLGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIHg/eDooeD1pKHcpLHgub2xkVmFsdWU9YSx4KX1mdW5jdGlvbiBsKCl7dz14PXZvaWQgMH1mdW5jdGlvbiBtKGEpe3JldHVybiBhPT09eHx8YT09PXd9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgU2lkZVRhYmxlLHE9d2luZG93Lm1zU2V0SW1tZWRpYXRlO2lmKCFxKXt2YXIgcj1bXSxzPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYSl7aWYoYS5kYXRhPT09cyl7dmFyIGI9cjtyPVtdLGIuZm9yRWFjaChmdW5jdGlvbihhKXthKCl9KX19KSxxPWZ1bmN0aW9uKGEpe3IucHVzaChhKSx3aW5kb3cucG9zdE1lc3NhZ2UocywiKiIpfX12YXIgdD0hMSx1PVtdLHY9MDtnLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2lmKGE9YyhhKSwhYi5jaGlsZExpc3QmJiFiLmF0dHJpYnV0ZXMmJiFiLmNoYXJhY3RlckRhdGF8fGIuYXR0cmlidXRlT2xkVmFsdWUmJiFiLmF0dHJpYnV0ZXN8fGIuYXR0cmlidXRlRmlsdGVyJiZiLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFiLmF0dHJpYnV0ZXN8fGIuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhYi5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgZD1wLmdldChhKTtkfHxwLnNldChhLGQ9W10pO2Zvcih2YXIgZSxmPTA7ZjxkLmxlbmd0aDtmKyspaWYoZFtmXS5vYnNlcnZlcj09PXRoaXMpe2U9ZFtmXSxlLnJlbW92ZUxpc3RlbmVycygpLGUub3B0aW9ucz1iO2JyZWFrfWV8fChlPW5ldyBvKHRoaXMsYSxiKSxkLnB1c2goZSksdGhpcy5ub2Rlc18ucHVzaChhKSksZS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7ZC5yZW1vdmVMaXN0ZW5lcnMoKSxiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX07dmFyIHcseDtvLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLm9ic2VydmVyLnJlY29yZHNfLGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+MCl7dmFyIGU9Y1tkLTFdLGY9bihlLGEpO2lmKGYpcmV0dXJuIGNbZC0xXT1mLHZvaWQgMH1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWd9KHRoaXMpLCF3aW5kb3cuTXV0YXRpb25PYnNlcnZlciYmKHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyPXdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyLCFNdXRhdGlvbk9ic2VydmVyKSl0aHJvdyBuZXcgRXJyb3IoIm5vIG11dGF0aW9uIG9ic2VydmVyIHN1cHBvcnQiKTshZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGMsZCl7dmFyIGU9YS5maXJzdEVsZW1lbnRDaGlsZDtpZighZSlmb3IoZT1hLmZpcnN0Q2hpbGQ7ZSYmZS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOyllPWUubmV4dFNpYmxpbmc7Zm9yKDtlOyljKGUsZCkhPT0hMCYmYihlLGMsZCksZT1lLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gbnVsbH1mdW5jdGlvbiBjKGEsYil7Zm9yKHZhciBjPWEud2Via2l0U2hhZG93Um9vdDtjOylkKGMsYiksYz1jLm9sZGVyU2hhZG93Um9vdH1mdW5jdGlvbiBkKGEsZCl7YihhLGZ1bmN0aW9uKGEpe3JldHVybiBkKGEpPyEwOihjKGEsZCksdm9pZCAwKX0pLGMoYSxkKX1mdW5jdGlvbiBlKGEpe3JldHVybiBoKGEpPyhpKGEpLCEwKTooaihhKSx2b2lkIDApfWZ1bmN0aW9uIGYoYSl7ZChhLGZ1bmN0aW9uKGEpe3JldHVybiBlKGEpPyEwOnZvaWQgMH0pfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIGUoYSl8fGYoYSl9ZnVuY3Rpb24gaChiKXtpZighYi5fX3VwZ3JhZGVkX18mJmIubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoImlzIil8fGIubG9jYWxOYW1lLGQ9YS5yZWdpc3RyeVtjXTtpZihkKXJldHVybiB2LmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZToiLGIubG9jYWxOYW1lKSxhLnVwZ3JhZGUoYiksdi5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSwhMH19ZnVuY3Rpb24gaShhKXtqKGEpLG0oYSkmJmQoYSxmdW5jdGlvbihhKXtqKGEpfSl9ZnVuY3Rpb24gaihhKXsoYS5lbnRlcmVkVmlld0NhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmdi5kb20pJiYodi5kb20mJmNvbnNvbGUuZ3JvdXAoImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLG0oYSkmJihhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCkrMSxhLl9faW5zZXJ0ZWQ8MSYmKGEuX19pbnNlcnRlZD0xKSxhLl9faW5zZXJ0ZWQ+MT92LmRvbSYmY29uc29sZS53YXJuKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLmVudGVyZWRWaWV3Q2FsbGJhY2smJih2LmRvbSYmY29uc29sZS5sb2coImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLGEuZW50ZXJlZFZpZXdDYWxsYmFjaygpKSksdi5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gayhhKXtsKGEpLGQoYSxmdW5jdGlvbihhKXtsKGEpfSl9ZnVuY3Rpb24gbChhKXsoYS5sZWZ0Vmlld0NhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmdi5kb20pJiYodi5kb20mJmNvbnNvbGUubG9nKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUpLG0oYSl8fChhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCktMSxhLl9faW5zZXJ0ZWQ+MCYmKGEuX19pbnNlcnRlZD0wKSxhLl9faW5zZXJ0ZWQ8MD92LmRvbSYmY29uc29sZS53YXJuKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEubGVmdFZpZXdDYWxsYmFjayYmYS5sZWZ0Vmlld0NhbGxiYWNrKCkpKX1mdW5jdGlvbiBtKGEpe2Zvcih2YXIgYj1hO2I7KXtpZihiPT1hLm93bmVyRG9jdW1lbnQpcmV0dXJuITA7Yj1iLnBhcmVudE5vZGV8fGIuaG9zdH19ZnVuY3Rpb24gbihhKXtpZihhLndlYmtpdFNoYWRvd1Jvb3QmJiFhLndlYmtpdFNoYWRvd1Jvb3QuX193YXRjaGVkKXt2LmRvbSYmY29uc29sZS5sb2coIndhdGNoaW5nIHNoYWRvdy1yb290IGZvcjogIixhLmxvY2FsTmFtZSk7Zm9yKHZhciBiPWEud2Via2l0U2hhZG93Um9vdDtiOylvKGIpLGI9Yi5vbGRlclNoYWRvd1Jvb3R9fWZ1bmN0aW9uIG8oYSl7YS5fX3dhdGNoZWR8fChzKGEpLGEuX193YXRjaGVkPSEwKX1mdW5jdGlvbiBwKGEpe3N3aXRjaChhLmxvY2FsTmFtZSl7Y2FzZSJzdHlsZSI6Y2FzZSJzY3JpcHQiOmNhc2UidGVtcGxhdGUiOmNhc2Ugdm9pZCAwOnJldHVybiEwfX1mdW5jdGlvbiBxKGEpe2lmKHYuZG9tKXt2YXIgYj1hWzBdO2lmKGImJiJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMmJmIuYWRkZWROb2Rlcyl7Zm9yKHZhciBjPWIuYWRkZWROb2Rlc1swXTtjJiZjIT09ZG9jdW1lbnQmJiFjLmhvc3Q7KWM9Yy5wYXJlbnROb2RlO3ZhciBkPWMmJihjLlVSTHx8Yy5fVVJMfHxjLmhvc3QmJmMuaG9zdC5sb2NhbE5hbWUpfHwiIjtkPWQuc3BsaXQoIi8/Iikuc2hpZnQoKS5zcGxpdCgiLyIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoIm11dGF0aW9ucyAoJWQpIFslc10iLGEubGVuZ3RoLGR8fCIiKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7ImNoaWxkTGlzdCI9PT1hLnR5cGUmJih4KGEuYWRkZWROb2RlcyxmdW5jdGlvbihhKXtwKGEpfHxnKGEpfSkseChhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXtwKGEpfHxrKGEpfSkpfSksdi5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKX1mdW5jdGlvbiByKCl7cSh3LnRha2VSZWNvcmRzKCkpfWZ1bmN0aW9uIHMoYSl7dy5vYnNlcnZlKGEse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9ZnVuY3Rpb24gdChhKXtzKGEpfWZ1bmN0aW9uIHUoYSl7di5kb20mJmNvbnNvbGUuZ3JvdXAoInVwZ3JhZGVEb2N1bWVudDogIiwoYS5VUkx8fGEuX1VSTHx8IiIpLnNwbGl0KCIvIikucG9wKCkpLGcoYSksdi5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKX12YXIgdj13aW5kb3cubG9nRmxhZ3N8fHt9LHc9bmV3IE11dGF0aW9uT2JzZXJ2ZXIocSkseD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2Eud2F0Y2hTaGFkb3c9bixhLnVwZ3JhZGVBbGw9ZyxhLnVwZ3JhZGVTdWJ0cmVlPWYsYS5vYnNlcnZlRG9jdW1lbnQ9dCxhLnVwZ3JhZGVEb2N1bWVudD11LGEudGFrZVJlY29yZHM9cn0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIsZil7dmFyIGc9Znx8e307aWYoIWIpdGhyb3cgbmV3IEVycm9yKCJkb2N1bWVudC5yZWdpc3RlcjogZmlyc3QgYXJndW1lbnQgYG5hbWVgIG11c3Qgbm90IGJlIGVtcHR5Iik7aWYoYi5pbmRleE9mKCItIik8MCl0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyOiBmaXJzdCBhcmd1bWVudCAoJ25hbWUnKSBtdXN0IGNvbnRhaW4gYSBkYXNoICgnLScpLiBBcmd1bWVudCBwcm92aWRlZCB3YXMgJyIrU3RyaW5nKGIpKyInLiIpO2lmKGcubmFtZT1iLCFnLnByb3RvdHlwZSl0aHJvdyBuZXcgRXJyb3IoIk9wdGlvbnMgbWlzc2luZyByZXF1aXJlZCBwcm90b3R5cGUgcHJvcGVydHkiKTtyZXR1cm4gZy5saWZlY3ljbGU9Zy5saWZlY3ljbGV8fHt9LGcuYW5jZXN0cnk9YyhnLmV4dGVuZHMpLGQoZyksZShnKSxrKGcucHJvdG90eXBlKSxtKGIsZyksZy5jdG9yPW4oZyksZy5jdG9yLnByb3RvdHlwZT1nLnByb3RvdHlwZSxnLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1nLmN0b3IsYS5yZWFkeSYmYS51cGdyYWRlQWxsKGRvY3VtZW50KSxnLmN0b3J9ZnVuY3Rpb24gYyhhKXt2YXIgYj12W2FdO3JldHVybiBiP2MoYi5leHRlbmRzKS5jb25jYXQoW2JdKTpbXX1mdW5jdGlvbiBkKGEpe2Zvcih2YXIgYixjPWEuZXh0ZW5kcyxkPTA7Yj1hLmFuY2VzdHJ5W2RdO2QrKyljPWIuaXMmJmIudGFnO2EudGFnPWN8fGEubmFtZSxjJiYoYS5pcz1hLm5hbWUpfWZ1bmN0aW9uIGUoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKTtiPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKX1mb3IodmFyIGQsZT1hLnByb3RvdHlwZTtlJiZlIT09Yjspe3ZhciBkPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtlLl9fcHJvdG9fXz1kLGU9ZH19YS5uYXRpdmU9Yn1mdW5jdGlvbiBmKGEpe3JldHVybiBnKHcoYS50YWcpLGEpfWZ1bmN0aW9uIGcoYixjKXtyZXR1cm4gYy5pcyYmYi5zZXRBdHRyaWJ1dGUoImlzIixjLmlzKSxoKGIsYyksYi5fX3VwZ3JhZGVkX189ITAsYS51cGdyYWRlU3VidHJlZShiKSxqKGIpLGJ9ZnVuY3Rpb24gaChhLGIpe09iamVjdC5fX3Byb3RvX18/YS5fX3Byb3RvX189Yi5wcm90b3R5cGU6KGkoYSxiLnByb3RvdHlwZSxiLm5hdGl2ZSksYS5fX3Byb3RvX189Yi5wcm90b3R5cGUpfWZ1bmN0aW9uIGkoYSxiLGMpe2Zvcih2YXIgZD17fSxlPWI7ZSE9PWMmJmUhPT1IVE1MVW5rbm93bkVsZW1lbnQucHJvdG90eXBlOyl7Zm9yKHZhciBmLGc9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSksaD0wO2Y9Z1toXTtoKyspZFtmXXx8KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGYsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGYpKSxkW2ZdPTEpO2U9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfX1mdW5jdGlvbiBqKGEpe2EuY3JlYXRlZENhbGxiYWNrJiZhLmNyZWF0ZWRDYWxsYmFjaygpfWZ1bmN0aW9uIGsoYSl7dmFyIGI9YS5zZXRBdHRyaWJ1dGU7YS5zZXRBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxjKXtsLmNhbGwodGhpcyxhLGMsYil9O3ZhciBjPWEucmVtb3ZlQXR0cmlidXRlO2EucmVtb3ZlQXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7bC5jYWxsKHRoaXMsYSxiLGMpfX1mdW5jdGlvbiBsKGEsYixjKXt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShhKTtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmdGhpcy5nZXRBdHRyaWJ1dGUoYSkhPT1kJiZ0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhLGQpfWZ1bmN0aW9uIG0oYSxiKXt2W2FdPWJ9ZnVuY3Rpb24gbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZihhKX19ZnVuY3Rpb24gbyhhLGIpe3ZhciBjPXZbYnx8YV07cmV0dXJuIGM/bmV3IGMuY3Rvcjp3KGEpfWZ1bmN0aW9uIHAoYSl7aWYoIWEuX191cGdyYWRlZF9fJiZhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKCJpcyIpfHxhLmxvY2FsTmFtZSxjPXZbYl07cmV0dXJuIGMmJmcoYSxjKX19ZnVuY3Rpb24gcShiKXt2YXIgYz14LmNhbGwodGhpcyxiKTtyZXR1cm4gYS51cGdyYWRlQWxsKGMpLGN9YXx8KGE9d2luZG93LkN1c3RvbUVsZW1lbnRzPXtmbGFnczp7fX0pO3ZhciByPWEuZmxhZ3Mscz1Cb29sZWFuKGRvY3VtZW50LndlYmtpdFJlZ2lzdGVyfHxkb2N1bWVudC5yZWdpc3RlciksdD0hci5yZWdpc3RlciYmcztpZih0KXtkb2N1bWVudC5yZWdpc3Rlcj1kb2N1bWVudC5yZWdpc3Rlcnx8ZG9jdW1lbnQud2Via2l0UmVnaXN0ZXI7dmFyIHU9ZnVuY3Rpb24oKXt9O2EucmVnaXN0cnk9e30sYS51cGdyYWRlRWxlbWVudD11LGEud2F0Y2hTaGFkb3c9dSxhLnVwZ3JhZGU9dSxhLnVwZ3JhZGVBbGw9dSxhLnVwZ3JhZGVTdWJ0cmVlPXUsYS5vYnNlcnZlRG9jdW1lbnQ9dSxhLnVwZ3JhZGVEb2N1bWVudD11LGEudGFrZVJlY29yZHM9dX1lbHNle3ZhciB2PXt9LHc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudC5iaW5kKGRvY3VtZW50KSx4PU5vZGUucHJvdG90eXBlLmNsb25lTm9kZTtkb2N1bWVudC5yZWdpc3Rlcj1iLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQ9byxOb2RlLnByb3RvdHlwZS5jbG9uZU5vZGU9cSxhLnJlZ2lzdHJ5PXYsYS51cGdyYWRlPXB9YS5oYXNOYXRpdmU9cyxhLnVzZU5hdGl2ZT10fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmYS5nZXRBdHRyaWJ1dGUoInJlbCIpPT09Yn12YXIgYj13aW5kb3cuSFRNTEltcG9ydHM/SFRNTEltcG9ydHMuSU1QT1JUX0xJTktfVFlQRToibm9uZSIsYz17c2VsZWN0b3JzOlsibGlua1tyZWw9IitiKyJdIl0sbWFwOntsaW5rOiJwYXJzZUxpbmsifSxwYXJzZTpmdW5jdGlvbihhKXtpZighYS5fX3BhcnNlZCl7YS5fX3BhcnNlZD0hMDt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoYy5zZWxlY3RvcnMpO2QoYixmdW5jdGlvbihhKXtjW2MubWFwW2EubG9jYWxOYW1lXV0oYSl9KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoYSksQ3VzdG9tRWxlbWVudHMub2JzZXJ2ZURvY3VtZW50KGEpfX0scGFyc2VMaW5rOmZ1bmN0aW9uKGIpe2EoYikmJnRoaXMucGFyc2VJbXBvcnQoYil9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGEpe2EuY29udGVudCYmYy5wYXJzZShhLmNvbnRlbnQpfX0sZD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO0N1c3RvbUVsZW1lbnRzLnBhcnNlcj1jfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe0N1c3RvbUVsZW1lbnRzLnBhcnNlci5wYXJzZShkb2N1bWVudCksQ3VzdG9tRWxlbWVudHMudXBncmFkZURvY3VtZW50KGRvY3VtZW50KTt2YXIgYT13aW5kb3cuUGxhdGZvcm0mJlBsYXRmb3JtLmVuZE9mTWljcm90YXNrP1BsYXRmb3JtLmVuZE9mTWljcm90YXNrOnNldFRpbWVvdXQ7YShmdW5jdGlvbigpe0N1c3RvbUVsZW1lbnRzLnJlYWR5PSEwLEN1c3RvbUVsZW1lbnRzLnJlYWR5VGltZT1EYXRlLm5vdygpLHdpbmRvdy5IVE1MSW1wb3J0cyYmKEN1c3RvbUVsZW1lbnRzLmVsYXBzZWQ9Q3VzdG9tRWxlbWVudHMucmVhZHlUaW1lLUhUTUxJbXBvcnRzLnJlYWR5VGltZSksZG9jdW1lbnQuYm9keS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiV2ViQ29tcG9uZW50c1JlYWR5Iix7YnViYmxlczohMH0pKX0pfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYi5pbml0RXZlbnQoYSwhMCwhMCksYn0pLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlKWEoKTtlbHNle3ZhciBiPXdpbmRvdy5IVE1MSW1wb3J0cz8iSFRNTEltcG9ydHNMb2FkZWQiOiJET01Db250ZW50TG9hZGVkIjt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihiLGEpfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtiLnRleHRDb250ZW50PSJlbGVtZW50IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2lmKGMuaW5zZXJ0QmVmb3JlKGIsYy5maXJzdENoaWxkKSx3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe0N1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93PWEsQ3VzdG9tRWxlbWVudHMud2F0Y2hBbGxTaGFkb3dzPWE7dmFyIGQ9WyJ1cGdyYWRlQWxsIiwidXBncmFkZVN1YnRyZWUiLCJvYnNlcnZlRG9jdW1lbnQiLCJ1cGdyYWRlRG9jdW1lbnQiXSxlPXt9O2QuZm9yRWFjaChmdW5jdGlvbihhKXtlW2FdPUN1c3RvbUVsZW1lbnRzW2FdfSksZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe0N1c3RvbUVsZW1lbnRzW2FdPWZ1bmN0aW9uKGIpe3JldHVybiBlW2FdKHdyYXAoYikpfX0pfX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2UudGV4dENvbnRlbnQ9YysrLGQucHVzaChhKX12YXIgYz0wLGQ9W10sZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIiksZj13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LkpzTXV0YXRpb25PYnNlcnZlcjtuZXcgZihmdW5jdGlvbigpe2Zvcig7ZC5sZW5ndGg7KWQuc2hpZnQoKSgpfSkub2JzZXJ2ZShlLHtjaGFyYWN0ZXJEYXRhOiEwfSksYS5lbmRPZk1pY3JvdGFzaz1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2E9YXx8e307dmFyIGI9e3NoYWRvdzpmdW5jdGlvbihhKXtyZXR1cm4gYT9hLnNoYWRvd1Jvb3R8fGEud2Via2l0U2hhZG93Um9vdDp2b2lkIDB9LGNhblRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gYSYmQm9vbGVhbihhLmVsZW1lbnRGcm9tUG9pbnQpfSx0YXJnZXRpbmdTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zaGFkb3coYSk7cmV0dXJuIHRoaXMuY2FuVGFyZ2V0KGIpP2I6dm9pZCAwfSxvbGRlclNoYWRvdzpmdW5jdGlvbihhKXt2YXIgYj1hLm9sZGVyU2hhZG93Um9vdDtpZighYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yKCJzaGFkb3ciKTtjJiYoYj1jLm9sZGVyU2hhZG93Um9vdCl9cmV0dXJuIGJ9LGFsbFNoYWRvd3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9dGhpcy5zaGFkb3coYSk7YzspYi5wdXNoKGMpLGM9dGhpcy5vbGRlclNoYWRvdyhjKTtyZXR1cm4gYn0sc2VhcmNoUm9vdDpmdW5jdGlvbihhLGIsYyl7aWYoYSl7dmFyIGQsZSxmPWEuZWxlbWVudEZyb21Qb2ludChiLGMpO2ZvcihlPXRoaXMudGFyZ2V0aW5nU2hhZG93KGYpO2U7KXtpZihkPWUuZWxlbWVudEZyb21Qb2ludChiLGMpKXt2YXIgZz10aGlzLnRhcmdldGluZ1NoYWRvdyhkKTtyZXR1cm4gdGhpcy5zZWFyY2hSb290KGcsYixjKXx8ZH1lPXRoaXMub2xkZXJTaGFkb3coZSl9cmV0dXJuIGZ9fSxvd25lcjpmdW5jdGlvbihhKXtmb3IodmFyIGI9YTtiLnBhcmVudE5vZGU7KWI9Yi5wYXJlbnROb2RlO3JldHVybiBifSxmaW5kVGFyZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuY2xpZW50WCxjPWEuY2xpZW50WSxkPXRoaXMub3duZXIoYS50YXJnZXQpO3JldHVybiBkLmVsZW1lbnRGcm9tUG9pbnQoYixjKXx8KGQ9ZG9jdW1lbnQpLHRoaXMuc2VhcmNoUm9vdChkb2N1bWVudCxiLGMpfX07YS50YXJnZXRGaW5kaW5nPWIsYS5maW5kVGFyZ2V0PWIuZmluZFRhcmdldC5iaW5kKGIpLHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGw9YX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybidbdG91Y2gtYWN0aW9uPSInK2ErJyJdJ31mdW5jdGlvbiBiKGEpe3JldHVybiJ7IC1tcy10b3VjaC1hY3Rpb246ICIrYSsiOyB0b3VjaC1hY3Rpb246ICIrYSsiOyB9In12YXIgYz1bIm5vbmUiLCJhdXRvIiwicGFuLXgiLCJwYW4teSIse3J1bGU6InBhbi14IHBhbi15IixzZWxlY3RvcnM6WyJwYW4teCBwYW4teSIsInBhbi15IHBhbi14Il19XSxkPSIiO2MuZm9yRWFjaChmdW5jdGlvbihjKXtkKz1TdHJpbmcoYyk9PT1jP2EoYykrYihjKTpjLnNlbGVjdG9ycy5tYXAoYSkrYihjLnJ1bGUpfSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtlLnRleHRDb250ZW50PWQsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChlKX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7Yj1ifHx7fTt2YXIgZT1iLmJ1dHRvbnM7aWYodm9pZCAwPT09ZSlzd2l0Y2goYi53aGljaCl7Y2FzZSAxOmU9MTticmVhaztjYXNlIDI6ZT00O2JyZWFrO2Nhc2UgMzplPTI7YnJlYWs7ZGVmYXVsdDplPTB9dmFyIGY7aWYoYylmPW5ldyBNb3VzZUV2ZW50KGEsYik7ZWxzZXtmPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7dmFyIGc9e2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMSx2aWV3Om51bGwsZGV0YWlsOm51bGwsc2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfTtPYmplY3Qua2V5cyhnKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EgaW4gYiYmKGdbYV09YlthXSl9KSxmLmluaXRNb3VzZUV2ZW50KGEsZy5idWJibGVzLGcuY2FuY2VsYWJsZSxnLnZpZXcsZy5kZXRhaWwsZy5zY3JlZW5YLGcuc2NyZWVuWSxnLmNsaWVudFgsZy5jbGllbnRZLGcuY3RybEtleSxnLmFsdEtleSxnLnNoaWZ0S2V5LGcubWV0YUtleSxnLmJ1dHRvbixnLnJlbGF0ZWRUYXJnZXQpfWR8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCJidXR0b25zIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9LGVudW1lcmFibGU6ITB9KTt2YXIgaD0wO3JldHVybiBoPWIucHJlc3N1cmU/Yi5wcmVzc3VyZTplPy41OjAsT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZix7cG9pbnRlcklkOnt2YWx1ZTpiLnBvaW50ZXJJZHx8MCxlbnVtZXJhYmxlOiEwfSx3aWR0aDp7dmFsdWU6Yi53aWR0aHx8MCxlbnVtZXJhYmxlOiEwfSxoZWlnaHQ6e3ZhbHVlOmIuaGVpZ2h0fHwwLGVudW1lcmFibGU6ITB9LHByZXNzdXJlOnt2YWx1ZTpoLGVudW1lcmFibGU6ITB9LHRpbHRYOnt2YWx1ZTpiLnRpbHRYfHwwLGVudW1lcmFibGU6ITB9LHRpbHRZOnt2YWx1ZTpiLnRpbHRZfHwwLGVudW1lcmFibGU6ITB9LHBvaW50ZXJUeXBlOnt2YWx1ZTpiLnBvaW50ZXJUeXBlfHwiIixlbnVtZXJhYmxlOiEwfSxod1RpbWVzdGFtcDp7dmFsdWU6Yi5od1RpbWVzdGFtcHx8MCxlbnVtZXJhYmxlOiEwfSxpc1ByaW1hcnk6e3ZhbHVlOmIuaXNQcmltYXJ5fHwhMSxlbnVtZXJhYmxlOiEwfX0pLGZ9dmFyIGM9ITEsZD0hMTt0cnl7dmFyIGU9bmV3IE1vdXNlRXZlbnQoImNsaWNrIix7YnV0dG9uczoxfSk7Yz0hMCxkPTE9PT1lLmJ1dHRvbnN9Y2F0Y2goZil7fWEuUG9pbnRlckV2ZW50fHwoYS5Qb2ludGVyRXZlbnQ9Yil9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3RoaXMuaWRzPVtdLHRoaXMucG9pbnRlcnM9W119Yi5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuaWRzLmluZGV4T2YoYSk7Yz4tMT90aGlzLnBvaW50ZXJzW2NdPWI6KHRoaXMuaWRzLnB1c2goYSksdGhpcy5wb2ludGVycy5wdXNoKGIpKX0saGFzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlkcy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmlkcy5pbmRleE9mKGEpO2I+LTEmJih0aGlzLmlkcy5zcGxpY2UoYiwxKSx0aGlzLnBvaW50ZXJzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaWRzLmluZGV4T2YoYSk7cmV0dXJuIHRoaXMucG9pbnRlcnNbYl19LGdldCBzaXplKCl7cmV0dXJuIHRoaXMucG9pbnRlcnMubGVuZ3RofSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuaWRzLmxlbmd0aD0wLHRoaXMucG9pbnRlcnMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLmlkcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLnBvaW50ZXJzW2RdLHRoaXMpfSx0aGlzKX19LGEuUG9pbnRlck1hcD13aW5kb3cuTWFwJiZNYXAucHJvdG90eXBlLmZvckVhY2g/TWFwOmJ9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpO3ZhciBTaWRlVGFibGU7InVuZGVmaW5lZCIhPXR5cGVvZiBXZWFrTWFwJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3gvIik8MD9TaWRlVGFibGU9V2Vha01hcDohZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1EYXRlLm5vdygpJTFlOTtTaWRlVGFibGU9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhiKysgKyJfXyIpfSxTaWRlVGFibGUucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYixjKXt2YXIgZD1iW3RoaXMubmFtZV07ZCYmZFswXT09PWI/ZFsxXT1jOmEoYix0aGlzLm5hbWUse3ZhbHVlOltiLGNdLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4oYj1hW3RoaXMubmFtZV0pJiZiWzBdPT09YT9iWzFdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX19KCksZnVuY3Rpb24oYSl7dmFyIGI9e3RhcmdldHM6bmV3IFNpZGVUYWJsZSxoYW5kbGVkRXZlbnRzOm5ldyBTaWRlVGFibGUscG9pbnRlcm1hcDpuZXcgYS5Qb2ludGVyTWFwLGV2ZW50TWFwOnt9LGV2ZW50U291cmNlczp7fSxldmVudFNvdXJjZUxpc3Q6W10scmVnaXN0ZXJTb3VyY2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLGQ9Yy5ldmVudHM7ZCYmKGQuZm9yRWFjaChmdW5jdGlvbihhKXtjW2FdJiYodGhpcy5ldmVudE1hcFthXT1jW2FdLmJpbmQoYykpfSx0aGlzKSx0aGlzLmV2ZW50U291cmNlc1thXT1jLHRoaXMuZXZlbnRTb3VyY2VMaXN0LnB1c2goYykpfSxyZWdpc3RlcjpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmV2ZW50U291cmNlTGlzdC5sZW5ndGgsZD0wO2M+ZCYmKGI9dGhpcy5ldmVudFNvdXJjZUxpc3RbZF0pO2QrKyliLnJlZ2lzdGVyLmNhbGwoYixhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmV2ZW50U291cmNlTGlzdC5sZW5ndGgsZD0wO2M+ZCYmKGI9dGhpcy5ldmVudFNvdXJjZUxpc3RbZF0pO2QrKyliLnVucmVnaXN0ZXIuY2FsbChiLGEpfSxkb3duOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJwb2ludGVyZG93biIsYSl9LG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJtb3ZlIixhKX0sdXA6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJ1cCIsYSl9LGVudGVyOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMSx0aGlzLmZpcmVFdmVudCgicG9pbnRlcmVudGVyIixhKX0sbGVhdmU6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSExLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVybGVhdmUiLGEpfSxvdmVyOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcm92ZXIiLGEpfSxvdXQ6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSEwLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyb3V0IixhKX0sY2FuY2VsOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJwb2ludGVyY2FuY2VsIixhKX0sbGVhdmVPdXQ6ZnVuY3Rpb24oYSl7YS50YXJnZXQuY29udGFpbnMoYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5sZWF2ZShhKSx0aGlzLm91dChhKX0sZW50ZXJPdmVyOmZ1bmN0aW9uKGEpe2EudGFyZ2V0LmNvbnRhaW5zKGEucmVsYXRlZFRhcmdldCl8fHRoaXMuZW50ZXIoYSksdGhpcy5vdmVyKGEpfSxldmVudEhhbmRsZXI6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaGFuZGxlZEV2ZW50cy5nZXQoYSkpe3ZhciBiPWEudHlwZSxjPXRoaXMuZXZlbnRNYXAmJnRoaXMuZXZlbnRNYXBbYl07YyYmYyhhKSx0aGlzLmhhbmRsZWRFdmVudHMuc2V0KGEsITApfX0sbGlzdGVuOmZ1bmN0aW9uKGEsYil7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe3RoaXMuYWRkRXZlbnQoYSxiKX0sdGhpcyl9LHVubGlzdGVuOmZ1bmN0aW9uKGEsYil7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe3RoaXMucmVtb3ZlRXZlbnQoYSxiKX0sdGhpcyl9LGFkZEV2ZW50OmZ1bmN0aW9uKGEsYil7YS5hZGRFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxyZW1vdmVFdmVudDpmdW5jdGlvbihhLGIpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLHRoaXMuYm91bmRIYW5kbGVyKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IFBvaW50ZXJFdmVudChhLGIpO3JldHVybiB0aGlzLnRhcmdldHMuc2V0KGMsdGhpcy50YXJnZXRzLmdldChiKXx8Yi50YXJnZXQpLGN9LGZpcmVFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubWFrZUV2ZW50KGEsYik7cmV0dXJuIHRoaXMuZGlzcGF0Y2hFdmVudChjKX0sY2xvbmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYj17fTtmb3IodmFyIGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9LGdldFRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jYXB0dXJlSW5mbyYmdGhpcy5jYXB0dXJlSW5mby5pZD09PWEucG9pbnRlcklkP3RoaXMuY2FwdHVyZUluZm8udGFyZ2V0OnRoaXMudGFyZ2V0cy5nZXQoYSl9LHNldENhcHR1cmU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhcHR1cmVJbmZvJiZ0aGlzLnJlbGVhc2VDYXB0dXJlKHRoaXMuY2FwdHVyZUluZm8uaWQpLHRoaXMuY2FwdHVyZUluZm89e2lkOmEsdGFyZ2V0OmJ9O3ZhciBjPW5ldyBQb2ludGVyRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIix7YnViYmxlczohMH0pO3RoaXMuaW1wbGljaXRSZWxlYXNlPXRoaXMucmVsZWFzZUNhcHR1cmUuYmluZCh0aGlzLGEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJjYW5jZWwiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSx0aGlzLnRhcmdldHMuc2V0KGMsYiksdGhpcy5hc3luY0Rpc3BhdGNoRXZlbnQoYyl9LHJlbGVhc2VDYXB0dXJlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuY2FwdHVyZUluZm8mJnRoaXMuY2FwdHVyZUluZm8uaWQ9PT1hKXt2YXIgYj1uZXcgUG9pbnRlckV2ZW50KCJsb3N0cG9pbnRlcmNhcHR1cmUiLHtidWJibGVzOiEwfSksYz10aGlzLmNhcHR1cmVJbmZvLnRhcmdldDt0aGlzLmNhcHR1cmVJbmZvPW51bGwsZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIix0aGlzLmltcGxpY2l0UmVsZWFzZSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcmNhbmNlbCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLHRoaXMudGFyZ2V0cy5zZXQoYixjKSx0aGlzLmFzeW5jRGlzcGF0Y2hFdmVudChiKX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRUYXJnZXQoYSk7cmV0dXJuIGI/Yi5kaXNwYXRjaEV2ZW50KGEpOnZvaWQgMH0sYXN5bmNEaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3NldFRpbWVvdXQodGhpcy5kaXNwYXRjaEV2ZW50LmJpbmQodGhpcyxhKSwwKX19O2IuYm91bmRIYW5kbGVyPWIuZXZlbnRIYW5kbGVyLmJpbmQoYiksYS5kaXNwYXRjaGVyPWIsYS5yZWdpc3Rlcj1iLnJlZ2lzdGVyLmJpbmQoYiksYS51bnJlZ2lzdGVyPWIudW5yZWdpc3Rlci5iaW5kKGIpfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjLGQpe3RoaXMuYWRkQ2FsbGJhY2s9YS5iaW5kKGQpLHRoaXMucmVtb3ZlQ2FsbGJhY2s9Yi5iaW5kKGQpLHRoaXMuY2hhbmdlZENhbGxiYWNrPWMuYmluZChkKSxnJiYodGhpcy5vYnNlcnZlcj1uZXcgZyh0aGlzLm11dGF0aW9uV2F0Y2hlci5iaW5kKHRoaXMpKSl9dmFyIGM9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxkPUFycmF5LnByb3RvdHlwZS5tYXAuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5tYXApLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuc2xpY2UpLGY9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZpbHRlciksZz13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsaD0iW3RvdWNoLWFjdGlvbl0iLGk9e3N1YnRyZWU6ITAsY2hpbGRMaXN0OiEwLGF0dHJpYnV0ZXM6ITAsYXR0cmlidXRlT2xkVmFsdWU6ITAsYXR0cmlidXRlRmlsdGVyOlsidG91Y2gtYWN0aW9uIl19O2IucHJvdG90eXBlPXt3YXRjaFN1YnRyZWU6ZnVuY3Rpb24oYil7YS50YXJnZXRGaW5kaW5nLmNhblRhcmdldChiKSYmdGhpcy5vYnNlcnZlci5vYnNlcnZlKGIsaSl9LGVuYWJsZU9uU3VidHJlZTpmdW5jdGlvbihhKXt0aGlzLndhdGNoU3VidHJlZShhKSxhPT09ZG9jdW1lbnQmJiJjb21wbGV0ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlP3RoaXMuaW5zdGFsbE9uTG9hZCgpOnRoaXMuaW5zdGFsbE5ld1N1YnRyZWUoYSl9LGluc3RhbGxOZXdTdWJ0cmVlOmZ1bmN0aW9uKGEpe2ModGhpcy5maW5kRWxlbWVudHMoYSksdGhpcy5hZGRFbGVtZW50LHRoaXMpfSxmaW5kRWxlbWVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoaCk6W119LHJlbW92ZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVDYWxsYmFjayhhKX0sYWRkRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLmFkZENhbGxiYWNrKGEpfSxlbGVtZW50Q2hhbmdlZDpmdW5jdGlvbihhLGIpe3RoaXMuY2hhbmdlZENhbGxiYWNrKGEsYil9LGNvbmNhdExpc3RzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29uY2F0KGUoYikpfSxpbnN0YWxsT25Mb2FkOmZ1bmN0aW9uKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsdGhpcy5pbnN0YWxsTmV3U3VidHJlZS5iaW5kKHRoaXMsZG9jdW1lbnQpKX0saXNFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREV9LGZsYXR0ZW5NdXRhdGlvblRyZWU6ZnVuY3Rpb24oYSl7dmFyIGI9ZChhLHRoaXMuZmluZEVsZW1lbnRzLHRoaXMpO3JldHVybiBiLnB1c2goZihhLHRoaXMuaXNFbGVtZW50KSksYi5yZWR1Y2UodGhpcy5jb25jYXRMaXN0cyxbXSl9LG11dGF0aW9uV2F0Y2hlcjpmdW5jdGlvbihhKXthLmZvckVhY2godGhpcy5tdXRhdGlvbkhhbmRsZXIsdGhpcyl9LG11dGF0aW9uSGFuZGxlcjpmdW5jdGlvbihhKXtpZigiY2hpbGRMaXN0Ij09PWEudHlwZSl7dmFyIGI9dGhpcy5mbGF0dGVuTXV0YXRpb25UcmVlKGEuYWRkZWROb2Rlcyk7Yi5mb3JFYWNoKHRoaXMuYWRkRWxlbWVudCx0aGlzKTt2YXIgYz10aGlzLmZsYXR0ZW5NdXRhdGlvblRyZWUoYS5yZW1vdmVkTm9kZXMpO2MuZm9yRWFjaCh0aGlzLnJlbW92ZUVsZW1lbnQsdGhpcyl9ZWxzZSJhdHRyaWJ1dGVzIj09PWEudHlwZSYmdGhpcy5lbGVtZW50Q2hhbmdlZChhLnRhcmdldCxhLm9sZFZhbHVlKX19LGd8fChiLnByb3RvdHlwZS53YXRjaFN1YnRyZWU9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oIlBvaW50ZXJFdmVudHNQb2x5ZmlsbDogTXV0YXRpb25PYnNlcnZlcnMgbm90IGZvdW5kLCB0b3VjaC1hY3Rpb24gd2lsbCBub3QgYmUgZHluYW1pY2FsbHkgZGV0ZWN0ZWQiKX0pLGEuSW5zdGFsbGVyPWJ9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPWIucG9pbnRlcm1hcCxkPTI1LGU9e1BPSU5URVJfSUQ6MSxQT0lOVEVSX1RZUEU6Im1vdXNlIixldmVudHM6WyJtb3VzZWRvd24iLCJtb3VzZW1vdmUiLCJtb3VzZXVwIiwibW91c2VvdmVyIiwibW91c2VvdXQiXSxyZWdpc3RlcjpmdW5jdGlvbihhKXtiLmxpc3RlbihhLHRoaXMuZXZlbnRzKQp9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sbGFzdFRvdWNoZXM6W10saXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmxhc3RUb3VjaGVzLGU9YS5jbGllbnRYLGY9YS5jbGllbnRZLGc9MCxoPWMubGVuZ3RoO2g+ZyYmKGI9Y1tnXSk7ZysrKXt2YXIgaT1NYXRoLmFicyhlLWIueCksaj1NYXRoLmFicyhmLWIueSk7aWYoZD49aSYmZD49ailyZXR1cm4hMH19LHByZXBhcmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYz1iLmNsb25lRXZlbnQoYSk7cmV0dXJuIGMucG9pbnRlcklkPXRoaXMuUE9JTlRFUl9JRCxjLmlzUHJpbWFyeT0hMCxjLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFLGN9LG1vdXNlZG93bjpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgZD1jLmhhcyh0aGlzLlBPSU5URVJfSUQpO2QmJnRoaXMuY2FuY2VsKGEpO3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGEpO2Muc2V0KHRoaXMuUE9JTlRFUl9JRCxhKSxiLmRvd24oZSl9fSxtb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5tb3ZlKGMpfX0sbW91c2V1cDpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgZD1jLmdldCh0aGlzLlBPSU5URVJfSUQpO2lmKGQmJmQuYnV0dG9uPT09YS5idXR0b24pe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IudXAoZSksdGhpcy5jbGVhbnVwTW91c2UoKX19fSxtb3VzZW92ZXI6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5lbnRlck92ZXIoYyl9fSxtb3VzZW91dDpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmxlYXZlT3V0KGMpfX0sY2FuY2VsOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuY2FuY2VsKGMpLHRoaXMuY2xlYW51cE1vdXNlKCl9LGNsZWFudXBNb3VzZTpmdW5jdGlvbigpe2MuZGVsZXRlKHRoaXMuUE9JTlRFUl9JRCl9fTthLm1vdXNlRXZlbnRzPWV9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiLGM9YS5kaXNwYXRjaGVyLGQ9YS5maW5kVGFyZ2V0LGU9YS50YXJnZXRGaW5kaW5nLmFsbFNoYWRvd3MuYmluZChhLnRhcmdldEZpbmRpbmcpLGY9Yy5wb2ludGVybWFwLGc9QXJyYXkucHJvdG90eXBlLm1hcC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLm1hcCksaD0yNTAwLGk9MjAwLGo9InRvdWNoLWFjdGlvbiIsaz0ic3RyaW5nIj09dHlwZW9mIGRvY3VtZW50LmhlYWQuc3R5bGUudG91Y2hBY3Rpb24sbD17c2Nyb2xsVHlwZTpuZXcgU2lkZVRhYmxlLGV2ZW50czpbInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIl0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7az9jLmxpc3RlbihhLHRoaXMuZXZlbnRzKTpiLmVuYWJsZU9uU3VidHJlZShhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtrJiZjLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxlbGVtZW50QWRkZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoaiksZD10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGIpO2QmJih0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksYy5saXN0ZW4oYSx0aGlzLmV2ZW50cyksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKSxjLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcykpfSxlbGVtZW50UmVtb3ZlZDpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbFR5cGUuZGVsZXRlKGEpLGMudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5kZWxldGUoYSksYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcyl9LGVsZW1lbnRDaGFuZ2VkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoaiksZD10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGMpLGY9dGhpcy50b3VjaEFjdGlvblRvU2Nyb2xsVHlwZShiKTtkJiZmPyh0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKX0sdGhpcykpOmY/dGhpcy5lbGVtZW50UmVtb3ZlZChhKTpkJiZ0aGlzLmVsZW1lbnRBZGRlZChhKX0sc2Nyb2xsVHlwZXM6e0VNSVRURVI6Im5vbmUiLFhTQ1JPTExFUjoicGFuLXgiLFlTQ1JPTExFUjoicGFuLXkiLFNDUk9MTEVSOi9eKD86cGFuLXggcGFuLXkpfCg/OnBhbi15IHBhbi14KXxhdXRvJC99LHRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWEsYz10aGlzLnNjcm9sbFR5cGVzO3JldHVybiJub25lIj09PWI/Im5vbmUiOmI9PT1jLlhTQ1JPTExFUj8iWCI6Yj09PWMuWVNDUk9MTEVSPyJZIjpjLlNDUk9MTEVSLmV4ZWMoYik/IlhZIjp2b2lkIDB9LFBPSU5URVJfVFlQRToidG91Y2giLGZpcnN0VG91Y2g6bnVsbCxpc1ByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5maXJzdFRvdWNoPT09YS5pZGVudGlmaWVyfSxzZXRQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7bnVsbD09PXRoaXMuZmlyc3RUb3VjaCYmKHRoaXMuZmlyc3RUb3VjaD1hLmlkZW50aWZpZXIsdGhpcy5maXJzdFhZPXtYOmEuY2xpZW50WCxZOmEuY2xpZW50WX0sdGhpcy5zY3JvbGxpbmc9ITEsdGhpcy5jYW5jZWxSZXNldENsaWNrQ291bnQoKSl9LHJlbW92ZVByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXt0aGlzLmlzUHJpbWFyeVRvdWNoKGEpJiYodGhpcy5maXJzdFRvdWNoPW51bGwsdGhpcy5maXJzdFhZPW51bGwsdGhpcy5yZXNldENsaWNrQ291bnQoKSl9LGNsaWNrQ291bnQ6MCxyZXNldElkOm51bGwscmVzZXRDbGlja0NvdW50OmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oKXt0aGlzLmNsaWNrQ291bnQ9MCx0aGlzLnJlc2V0SWQ9bnVsbH0uYmluZCh0aGlzKTt0aGlzLnJlc2V0SWQ9c2V0VGltZW91dChhLGkpfSxjYW5jZWxSZXNldENsaWNrQ291bnQ6ZnVuY3Rpb24oKXt0aGlzLnJlc2V0SWQmJmNsZWFyVGltZW91dCh0aGlzLnJlc2V0SWQpfSx0b3VjaFRvUG9pbnRlcjpmdW5jdGlvbihhKXt2YXIgYj1jLmNsb25lRXZlbnQoYSk7cmV0dXJuIGIucG9pbnRlcklkPWEuaWRlbnRpZmllcisyLGIudGFyZ2V0PWQoYiksYi5idWJibGVzPSEwLGIuY2FuY2VsYWJsZT0hMCxiLmRldGFpbD10aGlzLmNsaWNrQ291bnQsYi5idXR0b249MCxiLmJ1dHRvbnM9MSxiLndpZHRoPWEud2Via2l0UmFkaXVzWHx8YS5yYWRpdXNYfHwwLGIuaGVpZ2h0PWEud2Via2l0UmFkaXVzWXx8YS5yYWRpdXNZfHwwLGIucHJlc3N1cmU9YS53ZWJraXRGb3JjZXx8YS5mb3JjZXx8LjUsYi5pc1ByaW1hcnk9dGhpcy5pc1ByaW1hcnlUb3VjaChhKSxiLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFLGJ9LHByb2Nlc3NUb3VjaGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5jaGFuZ2VkVG91Y2hlcyxkPWcoYyx0aGlzLnRvdWNoVG9Qb2ludGVyLHRoaXMpO2QuZm9yRWFjaChiLHRoaXMpfSxzaG91bGRTY3JvbGw6ZnVuY3Rpb24oYSl7aWYodGhpcy5maXJzdFhZKXt2YXIgYixjPXRoaXMuc2Nyb2xsVHlwZS5nZXQoYS5jdXJyZW50VGFyZ2V0KTtpZigibm9uZSI9PT1jKWI9ITE7ZWxzZSBpZigiWFkiPT09YyliPSEwO2Vsc2V7dmFyIGQ9YS5jaGFuZ2VkVG91Y2hlc1swXSxlPWMsZj0iWSI9PT1jPyJYIjoiWSIsZz1NYXRoLmFicyhkWyJjbGllbnQiK2VdLXRoaXMuZmlyc3RYWVtlXSksaD1NYXRoLmFicyhkWyJjbGllbnQiK2ZdLXRoaXMuZmlyc3RYWVtmXSk7Yj1nPj1ofXJldHVybiB0aGlzLmZpcnN0WFk9bnVsbCxifX0sZmluZFRvdWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGM9YVtkXSk7ZCsrKWlmKGMuaWRlbnRpZmllcj09PWIpcmV0dXJuITB9LHZhY3V1bVRvdWNoZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YS50b3VjaGVzO2lmKGYuc2l6ZT49Yi5sZW5ndGgpe3ZhciBjPVtdO2YuZm9yRWFjaChmdW5jdGlvbihhLGQpe2lmKDEhPT1hJiYhdGhpcy5maW5kVG91Y2goYixhLTIpKXt2YXIgZT1kLm91dDtjLnB1c2godGhpcy50b3VjaFRvUG9pbnRlcihlKSl9fSx0aGlzKSxjLmZvckVhY2godGhpcy5jYW5jZWxPdXQsdGhpcyl9fSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMudmFjdXVtVG91Y2hlcyhhKSx0aGlzLnNldFByaW1hcnlUb3VjaChhLmNoYW5nZWRUb3VjaGVzWzBdKSx0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnNjcm9sbGluZ3x8KHRoaXMuY2xpY2tDb3VudCsrLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLm92ZXJEb3duKSl9LG92ZXJEb3duOmZ1bmN0aW9uKGEpe2Yuc2V0KGEucG9pbnRlcklkLHt0YXJnZXQ6YS50YXJnZXQsb3V0OmEsb3V0VGFyZ2V0OmEudGFyZ2V0fSksYy5vdmVyKGEpLGMuZG93bihhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsaW5nfHwodGhpcy5zaG91bGRTY3JvbGwoYSk/KHRoaXMuc2Nyb2xsaW5nPSEwLHRoaXMudG91Y2hjYW5jZWwoYSkpOihhLnByZXZlbnREZWZhdWx0KCksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZU92ZXJPdXQpKSl9LG1vdmVPdmVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEsZD1mLmdldChiLnBvaW50ZXJJZCk7aWYoZCl7dmFyIGU9ZC5vdXQsZz1kLm91dFRhcmdldDtjLm1vdmUoYiksZSYmZyE9PWIudGFyZ2V0JiYoZS5yZWxhdGVkVGFyZ2V0PWIudGFyZ2V0LGIucmVsYXRlZFRhcmdldD1nLGUudGFyZ2V0PWcsYi50YXJnZXQ/KGMubGVhdmVPdXQoZSksYy5lbnRlck92ZXIoYikpOihiLnRhcmdldD1nLGIucmVsYXRlZFRhcmdldD1udWxsLHRoaXMuY2FuY2VsT3V0KGIpKSksZC5vdXQ9YixkLm91dFRhcmdldD1iLnRhcmdldH19LHRvdWNoZW5kOmZ1bmN0aW9uKGEpe3RoaXMuZGVkdXBTeW50aE1vdXNlKGEpLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLnVwT3V0KX0sdXBPdXQ6ZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxpbmd8fChjLnVwKGEpLGMub3V0KGEpKSx0aGlzLmNsZWFuVXBQb2ludGVyKGEpfSx0b3VjaGNhbmNlbDpmdW5jdGlvbihhKXt0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy5jYW5jZWxPdXQpfSxjYW5jZWxPdXQ6ZnVuY3Rpb24oYSl7Yy5jYW5jZWwoYSksYy5vdXQoYSksdGhpcy5jbGVhblVwUG9pbnRlcihhKX0sY2xlYW5VcFBvaW50ZXI6ZnVuY3Rpb24oYSl7Zi5kZWxldGUoYS5wb2ludGVySWQpLHRoaXMucmVtb3ZlUHJpbWFyeVRvdWNoKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxkPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChkKSl7dmFyIGU9e3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZfTtjLnB1c2goZSk7dmFyIGY9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZSk7c2V0VGltZW91dChmLGgpfX19O2t8fChiPW5ldyBhLkluc3RhbGxlcihsLmVsZW1lbnRBZGRlZCxsLmVsZW1lbnRSZW1vdmVkLGwuZWxlbWVudENoYW5nZWQsbCkpLGEudG91Y2hFdmVudHM9bH0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyT3V0IiwiTVNQb2ludGVyT3ZlciIsIk1TUG9pbnRlckNhbmNlbCIsIk1TR290UG9pbnRlckNhcHR1cmUiLCJNU0xvc3RQb2ludGVyQ2FwdHVyZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LFBPSU5URVJfVFlQRVM6WyIiLCJ1bmF2YWlsYWJsZSIsInRvdWNoIiwicGVuIiwibW91c2UiXSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9YTtyZXR1cm4gZCYmKGM9Yi5jbG9uZUV2ZW50KGEpLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEVTW2EucG9pbnRlclR5cGVdKSxjfSxjbGVhbnVwOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEpfSxNU1BvaW50ZXJEb3duOmZ1bmN0aW9uKGEpe2Muc2V0KGEucG9pbnRlcklkLGEpO3ZhciBkPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZG93bihkKX0sTVNQb2ludGVyTW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9LE1TUG9pbnRlclVwOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IudXAoYyksdGhpcy5jbGVhbnVwKGEucG9pbnRlcklkKX0sTVNQb2ludGVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9LE1TUG9pbnRlck92ZXI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5lbnRlck92ZXIoYyl9LE1TUG9pbnRlckNhbmNlbDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmNhbmNlbChjKSx0aGlzLmNsZWFudXAoYS5wb2ludGVySWQpfSxNU0xvc3RQb2ludGVyQ2FwdHVyZTpmdW5jdGlvbihhKXt2YXIgYz1iLm1ha2VFdmVudCgibG9zdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9LE1TR290UG9pbnRlckNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5tYWtlRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9fTthLm1zRXZlbnRzPWV9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcjtpZih2b2lkIDA9PT13aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKXtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93Lm5hdmlnYXRvciwicG9pbnRlckVuYWJsZWQiLHt2YWx1ZTohMCxlbnVtZXJhYmxlOiEwfSksd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKXt2YXIgYz13aW5kb3cubmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHM7T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5uYXZpZ2F0b3IsIm1heFRvdWNoUG9pbnRzIix7dmFsdWU6YyxlbnVtZXJhYmxlOiEwfSksYi5yZWdpc3RlclNvdXJjZSgibXMiLGEubXNFdmVudHMpfWVsc2UgYi5yZWdpc3RlclNvdXJjZSgibW91c2UiLGEubW91c2VFdmVudHMpLHZvaWQgMCE9PXdpbmRvdy5vbnRvdWNoc3RhcnQmJmIucmVnaXN0ZXJTb3VyY2UoInRvdWNoIixhLnRvdWNoRXZlbnRzKTtiLnJlZ2lzdGVyKGRvY3VtZW50KX19KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7aWYoIWUucG9pbnRlcm1hcC5oYXMoYSkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkUG9pbnRlcklkIil9dmFyIGMsZCxlPWEuZGlzcGF0Y2hlcixmPXdpbmRvdy5uYXZpZ2F0b3I7Zi5tc1BvaW50ZXJFbmFibGVkPyhjPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1NldFBvaW50ZXJDYXB0dXJlKGEpfSxkPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1JlbGVhc2VQb2ludGVyQ2FwdHVyZShhKX0pOihjPWZ1bmN0aW9uKGEpe2IoYSksZS5zZXRDYXB0dXJlKGEsdGhpcyl9LGQ9ZnVuY3Rpb24oYSl7YihhKSxlLnJlbGVhc2VDYXB0dXJlKGEsdGhpcyl9KSxFbGVtZW50LnByb3RvdHlwZS5zZXRQb2ludGVyQ2FwdHVyZXx8T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRWxlbWVudC5wcm90b3R5cGUse3NldFBvaW50ZXJDYXB0dXJlOnt2YWx1ZTpjfSxyZWxlYXNlUG9pbnRlckNhcHR1cmU6e3ZhbHVlOmR9fSl9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLFBvaW50ZXJHZXN0dXJlRXZlbnQucHJvdG90eXBlLnByZXZlbnRUYXA9ZnVuY3Rpb24oKXt0aGlzLnRhcFByZXZlbnRlZD0hMH0sZnVuY3Rpb24oYSl7YT1hfHx7fSxhLnV0aWxzPXtMQ0E6e2ZpbmQ6ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gYTtpZihhLmNvbnRhaW5zKXtpZihhLmNvbnRhaW5zKGIpKXJldHVybiBhO2lmKGIuY29udGFpbnMoYSkpcmV0dXJuIGJ9dmFyIGM9dGhpcy5kZXB0aChhKSxkPXRoaXMuZGVwdGgoYiksZT1jLWQ7Zm9yKGU+MD9hPXRoaXMud2FsayhhLGUpOmI9dGhpcy53YWxrKGIsLWUpO2EmJmImJmEhPT1iOylhPXRoaXMud2FsayhhLDEpLGI9dGhpcy53YWxrKGIsMSk7cmV0dXJuIGF9LHdhbGs6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7YysrKWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxkZXB0aDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDthOyliKyssYT1hLnBhcmVudE5vZGU7cmV0dXJuIGJ9fX0sYS5maW5kTENBPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEudXRpbHMuTENBLmZpbmQoYixjKX0sd2luZG93LlBvaW50ZXJHZXN0dXJlcz1hfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKTt2YXIgU2lkZVRhYmxlOyJ1bmRlZmluZWQiIT10eXBlb2YgV2Vha01hcCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94LyIpPDA/U2lkZVRhYmxlPVdlYWtNYXA6IWZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9RGF0ZS5ub3coKSUxZTk7U2lkZVRhYmxlPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYisrICsiX18iKX0sU2lkZVRhYmxlLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7dmFyIGQ9Ylt0aGlzLm5hbWVdO2QmJmRbMF09PT1iP2RbMV09YzphKGIsdGhpcy5uYW1lLHt2YWx1ZTpbYixjXSx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuKGI9YVt0aGlzLm5hbWVdKSYmYlswXT09PWE/YlsxXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLmlkcz1bXSx0aGlzLnBvaW50ZXJzPVtdfWIucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmlkcy5pbmRleE9mKGEpO2M+LTE/dGhpcy5wb2ludGVyc1tjXT1iOih0aGlzLmlkcy5wdXNoKGEpLHRoaXMucG9pbnRlcnMucHVzaChiKSl9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pZHMuaW5kZXhPZihhKT4tMX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pZHMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5pZHMuc3BsaWNlKGIsMSksdGhpcy5wb2ludGVycy5zcGxpY2UoYiwxKSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmlkcy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnBvaW50ZXJzW2JdfSxnZXQgc2l6ZSgpe3JldHVybiB0aGlzLnBvaW50ZXJzLmxlbmd0aH0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmlkcy5sZW5ndGg9MCx0aGlzLnBvaW50ZXJzLmxlbmd0aD0wfX0sd2luZG93Lk1hcCYmKGI9d2luZG93Lk1hcCksYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPXtoYW5kbGVkRXZlbnRzOm5ldyBTaWRlVGFibGUsdGFyZ2V0czpuZXcgU2lkZVRhYmxlLGhhbmRsZXJzOnt9LHJlY29nbml6ZXJzOnt9LGV2ZW50czp7fSxyZWdpc3RlclJlY29nbml6ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iO3RoaXMucmVjb2duaXplcnNbYV09YyxjLmV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKGNbYV0pe3RoaXMuZXZlbnRzW2FdPSEwO3ZhciBiPWNbYV0uYmluZChjKTt0aGlzLmFkZEhhbmRsZXIoYSxiKX19LHRoaXMpfSxhZGRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTt0aGlzLmhhbmRsZXJzW2NdfHwodGhpcy5oYW5kbGVyc1tjXT1bXSksdGhpcy5oYW5kbGVyc1tjXS5wdXNoKGIpfSxyZWdpc3RlclRhcmdldDpmdW5jdGlvbihhKXt0aGlzLmxpc3RlbihPYmplY3Qua2V5cyh0aGlzLmV2ZW50cyksYSl9LHVucmVnaXN0ZXJUYXJnZXQ6ZnVuY3Rpb24oYSl7dGhpcy51bmxpc3RlbihPYmplY3Qua2V5cyh0aGlzLmV2ZW50cyksYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGI9YS50eXBlLGM9dGhpcy5oYW5kbGVyc1tiXTtjJiZ0aGlzLm1ha2VRdWV1ZShjLGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxtYWtlUXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNsb25lRXZlbnQoYik7c2V0VGltZW91dCh0aGlzLnJ1blF1ZXVlLmJpbmQodGhpcyxhLGMpLDApfSxydW5RdWV1ZTpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBvaW50ZXJJZD1iLnBvaW50ZXJJZDtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspYyhiKTt0aGlzLmN1cnJlbnRQb2ludGVySWQ9MH0sbGlzdGVuOmZ1bmN0aW9uKGEsYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuYWRkRXZlbnQoYSx0aGlzLmJvdW5kSGFuZGxlciwhMSxiKX0sdGhpcyl9LHVubGlzdGVuOmZ1bmN0aW9uKGEpe2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUV2ZW50KGEsdGhpcy5ib3VuZEhhbmRsZXIsITEsaW5UYXJnZXQpfSx0aGlzKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRFdmVudExpc3RlbmVyKGEsYixjKX0scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYixjKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBQb2ludGVyR2VzdHVyZUV2ZW50KGEsYil9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYltjXT1hW2NdO3JldHVybiBifSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy50YXJnZXRzLmdldChhKTtjJiYoYy5kaXNwYXRjaEV2ZW50KGEpLGEudGFwUHJldmVudGVkJiZ0aGlzLnByZXZlbnRUYXAodGhpcy5jdXJyZW50UG9pbnRlcklkKSl9LGFzeW5jRGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KGEsYil9LmJpbmQodGhpcyk7c2V0VGltZW91dChjLDApfSxwcmV2ZW50VGFwOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVjb2duaXplcnMudGFwO2ImJmIucHJldmVudFRhcChhKX19O2IuYm91bmRIYW5kbGVyPWIuZXZlbnRIYW5kbGVyLmJpbmQoYiksYS5kaXNwYXRjaGVyPWI7dmFyIGM9W10sZD0hMTthLnJlZ2lzdGVyPWZ1bmN0aW9uKGIpe2lmKGQpe3ZhciBlPXdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGw7ZSYmZS5yZWdpc3RlcihiKSxhLmRpc3BhdGNoZXIucmVnaXN0ZXJUYXJnZXQoYil9ZWxzZSBjLnB1c2goYil9LGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7ZD0hMCxjLnB1c2goZG9jdW1lbnQpLGMuZm9yRWFjaChhLnJlZ2lzdGVyKX0pfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz17SE9MRF9ERUxBWToyMDAsV0lHR0xFX1RIUkVTSE9MRDoxNixldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLGhlbGRQb2ludGVyOm51bGwsaG9sZEpvYjpudWxsLHB1bHNlOmZ1bmN0aW9uKCl7dmFyIGE9RGF0ZS5ub3coKS10aGlzLmhlbGRQb2ludGVyLnRpbWVTdGFtcCxiPXRoaXMuaGVsZD8iaG9sZHB1bHNlIjoiaG9sZCI7dGhpcy5maXJlSG9sZChiLGEpLHRoaXMuaGVsZD0hMH0sY2FuY2VsOmZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbCh0aGlzLmhvbGRKb2IpLHRoaXMuaGVsZCYmdGhpcy5maXJlSG9sZCgicmVsZWFzZSIpLHRoaXMuaGVsZD0hMSx0aGlzLmhlbGRQb2ludGVyPW51bGwsdGhpcy50YXJnZXQ9bnVsbCx0aGlzLmhvbGRKb2I9bnVsbH0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiF0aGlzLmhlbGRQb2ludGVyJiYodGhpcy5oZWxkUG9pbnRlcj1hLHRoaXMudGFyZ2V0PWEudGFyZ2V0LHRoaXMuaG9sZEpvYj1zZXRJbnRlcnZhbCh0aGlzLnB1bHNlLmJpbmQodGhpcyksdGhpcy5IT0xEX0RFTEFZKSl9LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXt0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkJiZ0aGlzLmNhbmNlbCgpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWwoKX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5oZWxkUG9pbnRlciYmdGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQ9PT1hLnBvaW50ZXJJZCl7dmFyIGI9YS5jbGllbnRYLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WCxjPWEuY2xpZW50WS10aGlzLmhlbGRQb2ludGVyLmNsaWVudFk7YipiK2MqYz50aGlzLldJR0dMRV9USFJFU0hPTEQmJnRoaXMuY2FuY2VsKCl9fSxmaXJlSG9sZDpmdW5jdGlvbihhLGMpe3ZhciBkPXtwb2ludGVyVHlwZTp0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJUeXBlfTtjJiYoZC5ob2xkVGltZT1jKTt2YXIgZT1iLm1ha2VFdmVudChhLGQpO2IuZGlzcGF0Y2hFdmVudChlLHRoaXMudGFyZ2V0KSxlLnRhcFByZXZlbnRlZCYmYi5wcmV2ZW50VGFwKHRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJob2xkIixjKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9bmV3IGEuUG9pbnRlck1hcCxkPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLFdJR0dMRV9USFJFU0hPTEQ6NCxjbGFtcERpcjpmdW5jdGlvbihhKXtyZXR1cm4gYT4wPzE6LTF9LGNhbGNQb3NpdGlvbkRlbHRhOmZ1bmN0aW9uKGEsYil7dmFyIGM9MCxkPTA7cmV0dXJuIGEmJmImJihjPWIucGFnZVgtYS5wYWdlWCxkPWIucGFnZVktYS5wYWdlWSkse3g6Yyx5OmR9fSxmaXJlVHJhY2s6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQsZj10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUuZG93bkV2ZW50LGMpLGc9dGhpcy5jYWxjUG9zaXRpb25EZWx0YShlLmxhc3RNb3ZlRXZlbnQsYyk7Zy54JiYoZS54RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy54KSksZy55JiYoZS55RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy55KSk7dmFyIGg9e2R4OmYueCxkeTpmLnksZGR4OmcueCxkZHk6Zy55LGNsaWVudFg6Yy5jbGllbnRYLGNsaWVudFk6Yy5jbGllbnRZLHBhZ2VYOmMucGFnZVgscGFnZVk6Yy5wYWdlWSxzY3JlZW5YOmMuc2NyZWVuWCxzY3JlZW5ZOmMuc2NyZWVuWSx4RGlyZWN0aW9uOmUueERpcmVjdGlvbix5RGlyZWN0aW9uOmUueURpcmVjdGlvbix0cmFja0luZm86ZS50cmFja0luZm8scG9pbnRlclR5cGU6Yy5wb2ludGVyVHlwZX07InRyYWNrZW5kIj09PWEmJihoLl9yZWxlYXNlVGFyZ2V0PWMudGFyZ2V0KTt2YXIgaT1iLm1ha2VFdmVudChhLGgpO2UubGFzdE1vdmVFdmVudD1jLGIuZGlzcGF0Y2hFdmVudChpLGUuZG93blRhcmdldCl9LHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2lmKGEuaXNQcmltYXJ5JiYoIm1vdXNlIj09PWEucG9pbnRlclR5cGU/MT09PWEuYnV0dG9uczohMCkpe3ZhciBiPXtkb3duRXZlbnQ6YSxkb3duVGFyZ2V0OmEudGFyZ2V0LHRyYWNrSW5mbzp7fSxsYXN0TW92ZUV2ZW50Om51bGwseERpcmVjdGlvbjowLHlEaXJlY3Rpb246MCx0cmFja2luZzohMX07Yy5zZXQoYS5wb2ludGVySWQsYil9fSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXt2YXIgYj1jLmdldChhLnBvaW50ZXJJZCk7aWYoYilpZihiLnRyYWNraW5nKXRoaXMuZmlyZVRyYWNrKCJ0cmFjayIsYSxiKTtlbHNle3ZhciBkPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoYi5kb3duRXZlbnQsYSksZT1kLngqZC54K2QueSpkLnk7ZT50aGlzLldJR0dMRV9USFJFU0hPTEQmJihiLnRyYWNraW5nPSEwLHRoaXMuZmlyZVRyYWNrKCJ0cmFja3N0YXJ0IixiLmRvd25FdmVudCxiKSx0aGlzLmZpcmVUcmFjaygidHJhY2siLGEsYikpfX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe3ZhciBiPWMuZ2V0KGEucG9pbnRlcklkKTtiJiYoYi50cmFja2luZyYmdGhpcy5maXJlVHJhY2soInRyYWNrZW5kIixhLGIpLGMuZGVsZXRlKGEucG9pbnRlcklkKSl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludGVydXAoYSl9fTtiLnJlZ2lzdGVyUmVjb2duaXplcigidHJhY2siLGQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz17TUlOX1ZFTE9DSVRZOi41LE1BWF9RVUVVRTo0LG1vdmVRdWV1ZTpbXSx0YXJnZXQ6bnVsbCxwb2ludGVySWQ6bnVsbCxldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYhdGhpcy5wb2ludGVySWQmJih0aGlzLnBvaW50ZXJJZD1hLnBvaW50ZXJJZCx0aGlzLnRhcmdldD1hLnRhcmdldCx0aGlzLmFkZE1vdmUoYSkpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXthLnBvaW50ZXJJZD09PXRoaXMucG9pbnRlcklkJiZ0aGlzLmFkZE1vdmUoYSl9LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXthLnBvaW50ZXJJZD09PXRoaXMucG9pbnRlcklkJiZ0aGlzLmZpcmVGbGljayhhKSx0aGlzLmNsZWFudXAoKX0scG9pbnRlcmNhbmNlbDpmdW5jdGlvbigpe3RoaXMuY2xlYW51cCgpfSxjbGVhbnVwOmZ1bmN0aW9uKCl7dGhpcy5tb3ZlUXVldWU9W10sdGhpcy50YXJnZXQ9bnVsbCx0aGlzLnBvaW50ZXJJZD1udWxsfSxhZGRNb3ZlOmZ1bmN0aW9uKGEpe3RoaXMubW92ZVF1ZXVlLmxlbmd0aD49dGhpcy5NQVhfUVVFVUUmJnRoaXMubW92ZVF1ZXVlLnNoaWZ0KCksdGhpcy5tb3ZlUXVldWUucHVzaChhKX0sZmlyZUZsaWNrOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkLGUsZixnLGgsaSxqPWEsaz10aGlzLm1vdmVRdWV1ZS5sZW5ndGgsbD0wLG09MCxuPTAsbz0wO2s+byYmKGk9dGhpcy5tb3ZlUXVldWVbb10pO28rKyljPWoudGltZVN0YW1wLWkudGltZVN0YW1wLGQ9ai5jbGllbnRYLWkuY2xpZW50WCxlPWouY2xpZW50WS1pLmNsaWVudFksZj1kL2MsZz1lL2MsaD1NYXRoLnNxcnQoZipmK2cqZyksaD5uJiYobD1mLG09ZyxuPWgpO3ZhciBwPU1hdGguYWJzKGwpPk1hdGguYWJzKG0pPyJ4IjoieSIscT10aGlzLmNhbGNBbmdsZShsLG0pO2lmKE1hdGguYWJzKG4pPj10aGlzLk1JTl9WRUxPQ0lUWSl7dmFyIHI9Yi5tYWtlRXZlbnQoImZsaWNrIix7eFZlbG9jaXR5OmwseVZlbG9jaXR5Om0sdmVsb2NpdHk6bixhbmdsZTpxLG1ham9yQXhpczpwLHBvaW50ZXJUeXBlOmEucG9pbnRlclR5cGV9KTtiLmRpc3BhdGNoRXZlbnQocix0aGlzLnRhcmdldCl9fSxjYWxjQW5nbGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMTgwKk1hdGguYXRhbjIoYixhKS9NYXRoLlBJfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoImZsaWNrIixjKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9bmV3IGEuUG9pbnRlck1hcCxkPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCIsImtleXVwIl0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiFhLnRhcFByZXZlbnRlZCYmYy5zZXQoYS5wb2ludGVySWQse3RhcmdldDphLnRhcmdldCx4OmEuY2xpZW50WCx5OmEuY2xpZW50WX0pfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2ImJmEudGFwUHJldmVudGVkJiZjLmRlbGV0ZShhLnBvaW50ZXJJZCl9fSxwb2ludGVydXA6ZnVuY3Rpb24oZCl7dmFyIGU9Yy5nZXQoZC5wb2ludGVySWQpO2lmKGUmJiFkLnRhcFByZXZlbnRlZCl7dmFyIGY9YS5maW5kTENBKGUudGFyZ2V0LGQudGFyZ2V0KTtpZihmKXt2YXIgZz1iLm1ha2VFdmVudCgidGFwIix7eDpkLmNsaWVudFgseTpkLmNsaWVudFksZGV0YWlsOmQuZGV0YWlsLHBvaW50ZXJUeXBlOmQucG9pbnRlclR5cGV9KTtiLmRpc3BhdGNoRXZlbnQoZyxmKX19Yy5kZWxldGUoZC5wb2ludGVySWQpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEucG9pbnRlcklkKX0sa2V5dXA6ZnVuY3Rpb24oYSl7dmFyIGM9YS5rZXlDb2RlO2lmKDMyPT09Yyl7dmFyIGQ9YS50YXJnZXQ7ZCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnR8fGQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50fHxiLmRpc3BhdGNoRXZlbnQoYi5tYWtlRXZlbnQoInRhcCIse3g6MCx5OjAsZGV0YWlsOjAscG9pbnRlclR5cGU6InVuYXZhaWxhYmxlIn0pLGQpfX0scHJldmVudFRhcDpmdW5jdGlvbihhKXtjLmRlbGV0ZShhKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJ0YXAiLGQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxQb2x5bWVyPXt9LGZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTthLnRleHRDb250ZW50PSJib2R5IHtvcGFjaXR5OiAwO30iO3ZhciBiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIldlYkNvbXBvbmVudHNSZWFkeSIsZnVuY3Rpb24oKXtkb2N1bWVudC5ib2R5LnN0eWxlLndlYmtpdFRyYW5zaXRpb249Im9wYWNpdHkgMC4zcyIsZG9jdW1lbnQuYm9keS5zdHlsZS5vcGFjaXR5PTF9KX0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhJiZiJiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKTtkJiYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxkKSwiZnVuY3Rpb24iPT10eXBlb2YgZC52YWx1ZSYmKGFbY10ubm9tPWMpKX0pLGF9YS5leHRlbmQ9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCl7cmV0dXJuIGE/YS5zdG9wKCk6YT1uZXcgYyh0aGlzKSxhLmdvKGIsZCksYX12YXIgYz1mdW5jdGlvbihhKXt0aGlzLmNvbnRleHQ9YX07Yy5wcm90b3R5cGU9e2dvOmZ1bmN0aW9uKGEsYil7dGhpcy5jYWxsYmFjaz1hLHRoaXMuaGFuZGxlPXNldFRpbWVvdXQodGhpcy5jb21wbGV0ZS5iaW5kKHRoaXMpLGIpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGUmJihjbGVhclRpbWVvdXQodGhpcy5oYW5kbGUpLHRoaXMuaGFuZGxlPW51bGwpfSxjb21wbGV0ZTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlJiYodGhpcy5zdG9wKCksdGhpcy5jYWxsYmFjay5jYWxsKHRoaXMuY29udGV4dCkpfX0sYS5qb2I9Yn0oUG9seW1lciksZnVuY3Rpb24oKXt2YXIgYT17fTtIVE1MRWxlbWVudC5yZWdpc3Rlcj1mdW5jdGlvbihiLGMpe2FbYl09Y30sSFRNTEVsZW1lbnQuZ2V0UHJvdG90eXBlRm9yVGFnPWZ1bmN0aW9uKGIpe3ZhciBjPWI/YVtiXTpIVE1MRWxlbWVudC5wcm90b3R5cGU7cmV0dXJuIGN8fE9iamVjdC5nZXRQcm90b3R5cGVPZihkb2N1bWVudC5jcmVhdGVFbGVtZW50KGIpKX07dmFyIGI9RXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbjtFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxCdWJibGU9ITAsYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LEhUTUxJbXBvcnRzLmltcG9ydGVyLnByZWxvYWRTZWxlY3RvcnMrPSIsIHBvbHltZXItZWxlbWVudCBsaW5rW3JlbD1zdHlsZXNoZWV0XSJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGM9Yi5jYWxsZXIsZz1jLm5vbTsiX3N1cGVyImluIGN8fChnfHwoZz1lLmNhbGwodGhpcyxjKSksZ3x8Y29uc29sZS53YXJuKCJjYWxsZWQgc3VwZXIoKSBvbiBhIG1ldGhvZCBub3QgaW5zdGFsbGVkIGRlY2xhcmF0aXZlbHkgKGhhcyBubyAubm9tIHByb3BlcnR5KSIpLGQoYyxnLGYodGhpcykpKTt2YXIgaD1jLl9zdXBlcjtpZihoKXt2YXIgaT1oW2ddO3JldHVybiJfc3VwZXIiaW4gaXx8ZChpLGcsaCksaS5hcHBseSh0aGlzLGF8fFtdKX19ZnVuY3Rpb24gYyhhLGIsYyl7Zm9yKDthJiYoIWEuaGFzT3duUHJvcGVydHkoYil8fGFbYl09PT1jKTspYT1mKGEpO3JldHVybiBhfWZ1bmN0aW9uIGQoYSxiLGQpe3JldHVybiBhLl9zdXBlcj1jKGQsYixhKSxhLl9zdXBlciYmKGEuX3N1cGVyW2JdLm5vbT1iKSxhLl9zdXBlcn1mdW5jdGlvbiBlKGEpe2NvbnNvbGUud2FybigibmFtZUluVGhpcyBjYWxsZWQiKTtmb3IodmFyIGI9dGhpcztiJiZiIT09SFRNTEVsZW1lbnQucHJvdG90eXBlOyl7Zm9yKHZhciBjLGQ9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYiksZT0wLGY9ZC5sZW5ndGg7Zj5lJiYoYz1kW2VdKTtlKyspe3ZhciBnPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKTtpZihnLnZhbHVlPT1hKXJldHVybiBjfWI9Yi5fX3Byb3RvX199fWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEuX19wcm90b19ffWEuc3VwZXI9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBkPXR5cGVvZiBiO3JldHVybiBiIGluc3RhbmNlb2YgRGF0ZSYmKGQ9ImRhdGUiKSxjW2RdKGEsYil9dmFyIGM9e3N0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gYX0sZGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZShhKXx8RGF0ZS5ub3coKSl9LCJib29sZWFuIjpmdW5jdGlvbihhKXtyZXR1cm4iIj09PWE/ITA6ImZhbHNlIj09PWE/ITE6ISFhfSxudW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9cGFyc2VGbG9hdChhKTtyZXR1cm4gU3RyaW5nKGIpPT09YT9iOmF9LG9iamVjdDpmdW5jdGlvbihhLGIpe2lmKG51bGw9PT1iKXJldHVybiBhO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShhLnJlcGxhY2UoLycvZywnIicpKX1jYXRjaChjKXtyZXR1cm4gYX19fTthLmRlc2VyaWFsaXplVmFsdWU9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9e307Yi5kZWNsYXJhdGlvbj17fSxiLmluc3RhbmNlPXt9LGEuYXBpPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXthc3luYzpmdW5jdGlvbihhLGIsYyl7UGxhdGZvcm0uZmx1c2goKSxiPWImJmIubGVuZ3RoP2I6W2JdO3ZhciBkPWZ1bmN0aW9uKCl7KHRoaXNbYV18fGEpLmFwcGx5KHRoaXMsYil9LmJpbmQodGhpcyk7cmV0dXJuIGM/c2V0VGltZW91dChkLGMpOnJlcXVlc3RBbmltYXRpb25GcmFtZShkKX0sZmlyZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jfHx0aGlzO3JldHVybiBlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGEse2J1YmJsZXM6dm9pZCAwIT09ZD8hMTohMCxkZXRhaWw6Yn0pKSxifSxhc3luY0ZpcmU6ZnVuY3Rpb24oKXt0aGlzLmFzeW5jKCJmaXJlIixhcmd1bWVudHMpfSxjbGFzc0ZvbGxvd3M6ZnVuY3Rpb24oYSxiLGMpe2ImJmIuY2xhc3NMaXN0LnJlbW92ZShjKSxhJiZhLmNsYXNzTGlzdC5hZGQoYyl9fTtiLmFzeW5jTWV0aG9kPWIuYXN5bmMsYS5hcGkuaW5zdGFuY2UudXRpbHM9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2IuY2FuY2VsQnViYmxlfHwoYi5vbj1pK2IudHlwZSxoLmV2ZW50cyYmY29uc29sZS5ncm91cCgiWyVzXTogbGlzdGVuTG9jYWwgWyVzXSIsYS5sb2NhbE5hbWUsYi5vbiksYi5wYXRoP2MoYSxiKTpkKGEsYiksaC5ldmVudHMmJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPW51bGw7QXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChiLnBhdGgsZnVuY3Rpb24oZCl7cmV0dXJuIGQ9PT1hPyEwOihjPWM9PT1hP2M6ZShkKSxjJiZmKGMsZCxiKT8hMDp2b2lkIDApfSx0aGlzKX1mdW5jdGlvbiBkKGEsYil7aC5ldmVudHMmJmNvbnNvbGUubG9nKCJldmVudC5wYXRoKCkgbm90IHN1cHBvcnRlZCBmb3IiLGIudHlwZSk7Zm9yKHZhciBjPWIudGFyZ2V0LGQ9bnVsbDtjJiZjIT1hOyl7aWYoZD1kPT09YT9kOmUoYyksZCYmZihkLGMsYikpcmV0dXJuITA7Yz1jLnBhcmVudE5vZGV9fWZ1bmN0aW9uIGUoYSl7Zm9yKDthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhLmhvc3R9ZnVuY3Rpb24gZihhLGIsYyl7dmFyIGQ9Yi5nZXRBdHRyaWJ1dGUmJmIuZ2V0QXR0cmlidXRlKGMub24pO3JldHVybiBkJiZnKGIsYykmJihoLmV2ZW50cyYmY29uc29sZS5sb2coIlslc10gZm91bmQgaGFuZGxlciBuYW1lIFslc10iLGEubG9jYWxOYW1lLGQpLGEuZGlzcGF0Y2hNZXRob2QoYixkLFtjLGMuZGV0YWlsLGJdKSksYy5jYW5jZWxCdWJibGV9ZnVuY3Rpb24gZyhhLGIpe3ZhciBjPWwuZ2V0KGIpO3JldHVybiBjfHxsLnNldChiLGM9W10pLGMuaW5kZXhPZihhKTwwPyhjLnB1c2goYSksITApOnZvaWQgMH12YXIgaD13aW5kb3cubG9nRmxhZ3N8fHt9LGk9Im9uLSIsaj0iZXZlbnREZWxlZ2F0ZXMiLGs9e0VWRU5UX1BSRUZJWDppLERFTEVHQVRFUzpqLGFkZEhvc3RMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzW2pdO2guZXZlbnRzJiZPYmplY3Qua2V5cyhhKS5sZW5ndGg+MCYmY29uc29sZS5sb2coIlslc10gYWRkSG9zdExpc3RlbmVyczoiLHRoaXMubG9jYWxOYW1lLGEpLHRoaXMuYWRkTm9kZUxpc3RlbmVycyh0aGlzLGEsdGhpcy5ob3N0RXZlbnRMaXN0ZW5lcil9LGFkZEluc3RhbmNlTGlzdGVuZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5kZWxlZ2F0ZXM7YyYmKGguZXZlbnRzJiZPYmplY3Qua2V5cyhjKS5sZW5ndGg+MCYmY29uc29sZS5sb2coIlslczpyb290XSBhZGRJbnN0YW5jZUxpc3RlbmVyczoiLHRoaXMubG9jYWxOYW1lLGMpLHRoaXMuYWRkTm9kZUxpc3RlbmVycyhhLGMsdGhpcy5pbnN0YW5jZUV2ZW50TGlzdGVuZXIpKX0sYWRkTm9kZUxpc3RlbmVyczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7Zm9yKHZhciBlIGluIGIpZHx8KGQ9Yy5iaW5kKHRoaXMpKSx0aGlzLmFkZE5vZGVMaXN0ZW5lcihhLGUsZCl9LGFkZE5vZGVMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7YS5hZGRFdmVudExpc3RlbmVyKGIsYyl9LGhvc3RFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEpe2lmKCFhLmNhbmNlbEJ1YmJsZSl7aC5ldmVudHMmJmNvbnNvbGUuZ3JvdXAoIlslc106IGhvc3RFdmVudExpc3RlbmVyKCVzKSIsdGhpcy5sb2NhbE5hbWUsYS50eXBlKTt2YXIgYj10aGlzLmZpbmRFdmVudERlbGVnYXRlKGEpO2ImJihoLmV2ZW50cyYmY29uc29sZS5sb2coIlslc10gZm91bmQgaG9zdCBoYW5kbGVyIG5hbWUgWyVzXSIsdGhpcy5sb2NhbE5hbWUsYiksdGhpcy5kaXNwYXRjaE1ldGhvZCh0aGlzLGIsW2EsYS5kZXRhaWwsdGhpc10pKSxoLmV2ZW50cyYmY29uc29sZS5ncm91cEVuZCgpfX0sZmluZEV2ZW50RGVsZWdhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbal1bYS50eXBlXX0sZGlzcGF0Y2hNZXRob2Q6ZnVuY3Rpb24oYSxiLGMpe2lmKGEpe2guZXZlbnRzJiZjb25zb2xlLmdyb3VwKCJbJXNdIGRpc3BhdGNoIFslc10iLGEubG9jYWxOYW1lLGIpO3ZhciBkPXRoaXNbYl07ZCYmZFtjPyJhcHBseSI6ImNhbGwiXSh0aGlzLGMpLGguZXZlbnRzJiZjb25zb2xlLmdyb3VwRW5kKCl9fSxpbnN0YW5jZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSl7Yih0aGlzLGEpfX0sbD1uZXcgU2lkZVRhYmxlKCJoYW5kbGVkTGlzdCIpO2EuYXBpLmluc3RhbmNlLmV2ZW50cz1rfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj0iX19wdWJsaXNoZWQiLGM9Il9faW5zdGFuY2VfYXR0cmlidXRlcyIsZD17UFVCTElTSEVEOmIsSU5TVEFOQ0VfQVRUUklCVVRFUzpjLGNvcHlJbnN0YW5jZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzW2NdO2Zvcih2YXIgYiBpbiBhKXRoaXMuc2V0QXR0cmlidXRlKGIsYVtiXSl9LHRha2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MCxjPXRoaXMuYXR0cmlidXRlcyxkPWMubGVuZ3RoOyhhPWNbYl0pJiZkPmI7YisrKXRoaXMuYXR0cmlidXRlVG9Qcm9wZXJ0eShhLm5hbWUsYS52YWx1ZSl9LGF0dHJpYnV0ZVRvUHJvcGVydHk6ZnVuY3Rpb24oYixjKXt2YXIgYj10aGlzLnByb3BlcnR5Rm9yQXR0cmlidXRlKGIpO2lmKGIpe2lmKGMmJmMuc2VhcmNoKGEuYmluZFBhdHRlcm4pPj0wKXJldHVybjt2YXIgZD10aGlzW2JdLGM9dGhpcy5kZXNlcmlhbGl6ZVZhbHVlKGMsZCk7YyE9PWQmJih0aGlzW2JdPWMpfX0scHJvcGVydHlGb3JBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7dmFyIGM9T2JqZWN0LmtleXModGhpc1tiXSk7cmV0dXJuIGNbYy5tYXAoZSkuaW5kZXhPZihhLnRvTG93ZXJDYXNlKCkpXX0sZGVzZXJpYWxpemVWYWx1ZTpmdW5jdGlvbihiLGMpe3JldHVybiBhLmRlc2VyaWFsaXplVmFsdWUoYixjKX0sc2VyaWFsaXplVmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4iYm9vbGVhbiI9PT1iP2E/IiI6dm9pZCAwOiJvYmplY3QiIT09YiYmIm9iamVjdCIhPXR5cGVvZiBhJiZ2b2lkIDAhPT1hP2E6dm9pZCAwfSxwcm9wZXJ0eVRvQXR0cmlidXRlOmZ1bmN0aW9uKGEpe2lmKE9iamVjdC5rZXlzKHRoaXNbYl0pLmluZGV4T2YoYSk+PTApe3ZhciBjPXR5cGVvZiB0aGlzLl9fcHJvdG9fX1thXSxkPXRoaXMuc2VyaWFsaXplVmFsdWUodGhpc1thXSxjKTt2b2lkIDAhPT1kP3RoaXMuc2V0QXR0cmlidXRlKGEsZCk6ImJvb2xlYW4iPT09YyYmdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSl9fX0sZT1TdHJpbmcucHJvdG90eXBlLnRvTG93ZXJDYXNlLmNhbGwuYmluZChTdHJpbmcucHJvdG90eXBlLnRvTG93ZXJDYXNlKTthLmFwaS5pbnN0YW5jZS5hdHRyaWJ1dGVzPWR9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz10aGlzW2FdfHxhOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFwcGx5KHRoaXMsYil9ZnVuY3Rpb24gYyhhLGIsYyxkKXtoLmJpbmQmJmNvbnNvbGUubG9nKG8sYy5sb2NhbE5hbWV8fCJvYmplY3QiLGQsYS5sb2NhbE5hbWUsYik7dmFyIGU9UGF0aC5nZXQoZCksZj1lLmdldFZhbHVlRnJvbShjKTtyZXR1cm4obnVsbD09PWZ8fHZvaWQgMD09PWYpJiZlLnNldFZhbHVlRnJvbShjLGFbYl0pLFBhdGhPYnNlcnZlci5kZWZpbmVQcm9wZXJ0eShhLGIse29iamVjdDpjLHBhdGg6ZH0pfWZ1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPWcoYSk7ZFtiXT1jfWZ1bmN0aW9uIGUoYSxiKXt2YXIgYz1nKGEpO3JldHVybiBjJiZjW2JdPyhjW2JdLmNsb3NlKCksY1tiXT1udWxsLCEwKTp2b2lkIDB9ZnVuY3Rpb24gZihhKXt2YXIgYj1nKGEpO09iamVjdC5rZXlzKGIpLmZvckVhY2goZnVuY3Rpb24oYSl7YlthXS5jbG9zZSgpLGJbYV09bnVsbH0pfWZ1bmN0aW9uIGcoYSl7dmFyIGI9bC5nZXQoYSk7cmV0dXJuIGJ8fGwuc2V0KGEsYj17fSksYn12YXIgaD13aW5kb3cubG9nRmxhZ3N8fHt9LGk9IkNoYW5nZWQiLGo9YS5hcGkuaW5zdGFuY2UuYXR0cmlidXRlcy5QVUJMSVNIRUQsaz17b2JzZXJ2ZVByb3BlcnRpZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj10aGlzLmdldEN1c3RvbVByb3BlcnR5TmFtZXMoKSxjPTAsZD1iLmxlbmd0aDtkPmMmJihhPWJbY10pO2MrKyl0aGlzLm9ic2VydmVQcm9wZXJ0eShhKX0sZ2V0Q3VzdG9tUHJvcGVydHlOYW1lczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmN1c3RvbVByb3BlcnR5TmFtZXN9LG9ic2VydmVQcm9wZXJ0eTpmdW5jdGlvbihhKXtpZih0aGlzLnNob3VsZE9ic2VydmVQcm9wZXJ0eShhKSl7aC53YXRjaCYmY29uc29sZS5sb2cobSx0aGlzLmxvY2FsTmFtZSxhKTt2YXIgYj1mdW5jdGlvbihiLGMpe2gud2F0Y2gmJmNvbnNvbGUubG9nKG4sdGhpcy5sb2NhbE5hbWUsdGhpcy5pZHx8IiIsYSx0aGlzW2FdLGMpLHRoaXMuZGlzcGF0Y2hQcm9wZXJ0eUNoYW5nZShhLGMpfS5iaW5kKHRoaXMpLGM9bmV3IFBhdGhPYnNlcnZlcih0aGlzLGEsYik7ZCh0aGlzLGEsYyl9fSxzaG91bGRPYnNlcnZlUHJvcGVydHk6ZnVuY3Rpb24oYSl7cmV0dXJuIEJvb2xlYW4odGhpc1thK2ldfHx2b2lkIDAhPT10aGlzW2pdW2FdKX0sYmluZFByb3BlcnR5OmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYyh0aGlzLGEsYixkKX0sdW5iaW5kUHJvcGVydHk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZSh0aGlzLGEsYil9LHVuYmluZEFsbFByb3BlcnRpZXM6ZnVuY3Rpb24oKXtmKHRoaXMpfSxkaXNwYXRjaFByb3BlcnR5Q2hhbmdlOmZ1bmN0aW9uKGEsYyl7dGhpcy5wcm9wZXJ0eVRvQXR0cmlidXRlKGEpLGIuY2FsbCh0aGlzLGEraSxbY10pfX0sbD1uZXcgU2lkZVRhYmxlLG09Ilslc10gd2F0Y2hpbmcgWyVzXSIsbj0iWyVzIyVzXSB3YXRjaDogWyVzXSBub3cgWyVzXSB3YXMgWyVzXSIsbz0iWyVzXTogYmluZFByb3BlcnRpZXM6IFslc10gdG8gWyVzXS5bJXNdIjthLmFwaS5pbnN0YW5jZS5wcm9wZXJ0aWVzPWt9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7ZChhLGMpfWZ1bmN0aW9uIGMoYSl7YS51bmJpbmRBbGwoKX1mdW5jdGlvbiBkKGEsYil7aWYoYSl7YihhKTtmb3IodmFyIGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWQoYyxiKX19dmFyIGU9d2luZG93LmxvZ0ZsYWdzfHwwLGY9bmV3IFBvbHltZXJFeHByZXNzaW9ucyxnPXtpbnN0YW5jZVRlbXBsYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNyZWF0ZUluc3RhbmNlKHRoaXMsZil9LGJpbmQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucHJvcGVydHlGb3JBdHRyaWJ1dGUoYSk7aWYoZCl7dGhpcy51bmJpbmQoYSk7dmFyIGU9dGhpcy5iaW5kUHJvcGVydHkoZCxiLGMpO3JldHVybiBlLnBhdGg9Yyx0aGlzLnByb3BlcnR5VG9BdHRyaWJ1dGUoYSksdGhpcy5iaW5kaW5nc1thXT1lfXJldHVybiB0aGlzLnN1cGVyKGFyZ3VtZW50cyl9LGFzeW5jVW5iaW5kQWxsOmZ1bmN0aW9uKCl7dGhpcy5fdW5ib3VuZHx8KGUudW5iaW5kJiZjb25zb2xlLmxvZygiWyVzXSBhc3luY1VuYmluZEFsbCIsdGhpcy5sb2NhbE5hbWUpLHRoaXMuX3VuYmluZEFsbEpvYj10aGlzLmpvYih0aGlzLl91bmJpbmRBbGxKb2IsdGhpcy51bmJpbmRBbGwsMCkpfSx1bmJpbmRBbGw6ZnVuY3Rpb24oKXt0aGlzLl91bmJvdW5kfHwodGhpcy51bmJpbmRBbGxQcm9wZXJ0aWVzKCksdGhpcy5zdXBlcigpLGIodGhpcy5zaGFkb3dSb290KSx0aGlzLl91bmJvdW5kPSEwKX0sY2FuY2VsVW5iaW5kQWxsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl91bmJvdW5kPyhlLnVuYmluZCYmY29uc29sZS53YXJuKCJbJXNdIGFscmVhZHkgdW5ib3VuZCwgY2Fubm90IGNhbmNlbCB1bmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSx2b2lkIDApOihlLnVuYmluZCYmY29uc29sZS5sb2coIlslc10gY2FuY2VsVW5iaW5kQWxsIix0aGlzLmxvY2FsTmFtZSksdGhpcy5fdW5iaW5kQWxsSm9iJiYodGhpcy5fdW5iaW5kQWxsSm9iPXRoaXMuX3VuYmluZEFsbEpvYi5zdG9wKCkpLGF8fGQodGhpcy5zaGFkb3dSb290LGZ1bmN0aW9uKGEpe2EuY2FuY2VsVW5iaW5kQWxsJiZhLmNhbmNlbFVuYmluZEFsbCgpfSksdm9pZCAwKX19LGg9L1x7XHsoW157fV0qKX19LzthLmJpbmRQYXR0ZXJuPWgsYS5hcGkuaW5zdGFuY2UubWR2PWd9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEuaGFzT3duUHJvcGVydHkoIlBvbHltZXJCYXNlIil9ZnVuY3Rpb24gYygpe312YXIgZD17UG9seW1lckJhc2U6ITAsam9iOlBvbHltZXIuam9iLCJzdXBlciI6UG9seW1lci5zdXBlcixjcmVhdGVkOmZ1bmN0aW9uKCl7fSxyZWFkeTpmdW5jdGlvbigpe30scmVhZHlDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuX2NyZWF0ZWRDYWxsYmFjaygpfSxjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLl9jcmVhdGVkQ2FsbGJhY2soKX0sX2NyZWF0ZWRDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMub2JzZXJ2ZVByb3BlcnRpZXMoKSx0aGlzLmNvcHlJbnN0YW5jZUF0dHJpYnV0ZXMoKSx0aGlzLnRha2VBdHRyaWJ1dGVzKCksdGhpcy5hZGRIb3N0TGlzdGVuZXJzKCksdGhpcy5wYXJzZUVsZW1lbnRzKHRoaXMuX19wcm90b19fKSx0aGlzLnJlYWR5KCksdGhpcy5jcmVhdGVkKCl9LGVudGVyZWRWaWV3Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLl9lbnRlcmVkRG9jdW1lbnRDYWxsYmFjaygpfSxpbnNlcnRlZENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5fZW50ZXJlZERvY3VtZW50Q2FsbGJhY2soKX0sZW50ZXJlZERvY3VtZW50Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLl9lbnRlcmVkRG9jdW1lbnRDYWxsYmFjaygpfSxfZW50ZXJlZERvY3VtZW50Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbFVuYmluZEFsbCghMCksdGhpcy5pbnNlcnRlZCYmdGhpcy5pbnNlcnRlZCgpLHRoaXMuZW50ZXJlZERvY3VtZW50JiZ0aGlzLmVudGVyZWREb2N1bWVudCgpLHRoaXMuZW50ZXJlZFZpZXcmJnRoaXMuZW50ZXJlZFZpZXcoKX0sbGVmdFZpZXdDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuX2xlZnREb2N1bWVudENhbGxiYWNrKCl9LGxlZnREb2N1bWVudENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5fbGVmdERvY3VtZW50Q2FsbGJhY2soKX0scmVtb3ZlZENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5fbGVmdERvY3VtZW50Q2FsbGJhY2soKX0sX2xlZnREb2N1bWVudENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hc3luY1VuYmluZEFsbCgpLHRoaXMucmVtb3ZlZCYmdGhpcy5yZW1vdmVkKCksdGhpcy5sZWZ0RG9jdW1lbnQmJnRoaXMubGVmdERvY3VtZW50KCksdGhpcy5sZWZ0VmlldyYmdGhpcy5sZWZ0VmlldygpfSxwYXJzZUVsZW1lbnRzOmZ1bmN0aW9uKGEpe2EmJmEuZWxlbWVudCYmKHRoaXMucGFyc2VFbGVtZW50cyhhLl9fcHJvdG9fXyksYS5wYXJzZUVsZW1lbnQuY2FsbCh0aGlzLGEuZWxlbWVudCkpfSxwYXJzZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5zaGFkb3dGcm9tVGVtcGxhdGUodGhpcy5mZXRjaFRlbXBsYXRlKGEpKX0sZmV0Y2hUZW1wbGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5xdWVyeVNlbGVjdG9yKCJ0ZW1wbGF0ZSIpfSxzaGFkb3dGcm9tVGVtcGxhdGU6ZnVuY3Rpb24oYSl7aWYoYSl7dGhpcy5zaGFkb3dSb290O3ZhciBiPXRoaXMuY3JlYXRlU2hhZG93Um9vdCgpO2IuYXBwbHlBdXRob3JTdHlsZXM9dGhpcy5hcHBseUF1dGhvclN0eWxlcyxiLnJlc2V0U3R5bGVJbmhlcml0YW5jZT10aGlzLnJlc2V0U3R5bGVJbmhlcml0YW5jZTt2YXIgYz10aGlzLmluc3RhbmNlVGVtcGxhdGUoYSk7cmV0dXJuIGIuYXBwZW5kQ2hpbGQoYyksdGhpcy5zaGFkb3dSb290UmVhZHkoYixhKSxifX0sc2hhZG93Um9vdFJlYWR5OmZ1bmN0aW9uKGEsYil7dGhpcy5tYXJzaGFsTm9kZVJlZmVyZW5jZXMoYSksdGhpcy5hZGRJbnN0YW5jZUxpc3RlbmVycyhhLGIpLFBvaW50ZXJHZXN0dXJlcy5yZWdpc3RlcihhKX0sbWFyc2hhbE5vZGVSZWZlcmVuY2VzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuJD10aGlzLiR8fHt9O2lmKGEpZm9yKHZhciBjLGQ9YS5xdWVyeVNlbGVjdG9yQWxsKCJbaWRdIiksZT0wLGY9ZC5sZW5ndGg7Zj5lJiYoYz1kW2VdKTtlKyspYltjLmlkXT1jfSxhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dGhpcy5hdHRyaWJ1dGVUb1Byb3BlcnR5KGEsdGhpcy5nZXRBdHRyaWJ1dGUoYSkpLHRoaXMuYXR0cmlidXRlQ2hhbmdlZCYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25NdXRhdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCl7Yi5jYWxsKHRoaXMsYyksYy5kaXNjb25uZWN0KCl9LmJpbmQodGhpcykpO2Mub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfX07Yy5wcm90b3R5cGU9ZCxkLmNvbnN0cnVjdG9yPWMsYS5CYXNlPWMsYS5pc0Jhc2U9YixhLmFwaS5pbnN0YW5jZS5iYXNlPWR9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEuX19wcm90b19ffXdpbmRvdy5sb2dGbGFnc3x8e307dmFyIGM9ImVsZW1lbnQiLGQ9ImNvbnRyb2xsZXIiLGU9e1NUWUxFX1NDT1BFX0FUVFJJQlVURTpjLGluc3RhbGxDb250cm9sbGVyU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5maW5kU3R5bGVDb250cm9sbGVyKCk7aWYoYSYmIXRoaXMuc2NvcGVIYXNFbGVtZW50U3R5bGUoYSxkKSl7Zm9yKHZhciBjPWIodGhpcyksZT0iIjtjJiZjLmVsZW1lbnQ7KWUrPWMuZWxlbWVudC5jc3NUZXh0Rm9yU2NvcGUoZCksYz1iKGMpO2lmKGUpe3ZhciBmPXRoaXMuZWxlbWVudC5jc3NUZXh0VG9TY29wZVN0eWxlKGUsZCk7d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZQbGF0Zm9ybS5TaGFkb3dDU1Muc2hpbVBvbHlmaWxsRGlyZWN0aXZlcyhbZl0sdGhpcy5sb2NhbE5hbWUpLFBvbHltZXIuYXBwbHlTdHlsZVRvU2NvcGUoZixhKX19fSxmaW5kU3R5bGVDb250cm9sbGVyOmZ1bmN0aW9uKCl7aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXJldHVybiB3cmFwKGRvY3VtZW50LmhlYWQpO2Zvcih2YXIgYT10aGlzO2EucGFyZW50Tm9kZTspYT1hLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kb2N1bWVudD9kb2N1bWVudC5oZWFkOmF9LHNjb3BlSGFzRWxlbWVudFN0eWxlOmZ1bmN0aW9uKGEsYil7dmFyIGQ9YysiPSIrdGhpcy5sb2NhbE5hbWUrIi0iK2I7cmV0dXJuIGEucXVlcnlTZWxlY3Rvcigic3R5bGVbIitkKyJdIil9fTthLmFwaS5pbnN0YW5jZS5zdHlsZXM9ZX0oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9e2FkZFJlc29sdmVQYXRoQXBpOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50UGF0aCgpLGI9dGhpcy5nZXRBdHRyaWJ1dGUoImFzc2V0cGF0aCIpfHwiIjt0aGlzLnByb3RvdHlwZS5yZXNvbHZlUGF0aD1mdW5jdGlvbihjKXtyZXR1cm4gYStiK2N9fSxlbGVtZW50UGF0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVybFRvUGF0aChIVE1MSW1wb3J0cy5nZXREb2N1bWVudFVybCh0aGlzLm93bmVyRG9jdW1lbnQpKX0sdXJsVG9QYXRoOmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPWEuc3BsaXQoIi8iKTtyZXR1cm4gYi5wb3AoKSxiLnB1c2goIiIpLGIuam9pbigiLyIpfXJldHVybiIifX07YS5hcGkuZGVjbGFyYXRpb24ucGF0aD1ifShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7aWYoYSl7dmFyIGQ9YyhhLnRleHRDb250ZW50KSxlPWEuZ2V0QXR0cmlidXRlKGcpO2UmJmQuc2V0QXR0cmlidXRlKGcsZSksYi5hcHBlbmRDaGlsZChkKX19ZnVuY3Rpb24gYyhhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3JldHVybiBiLnRleHRDb250ZW50PWEsYn1mdW5jdGlvbiBkKGEpe3JldHVybiBhJiZhLl9fcmVzb3VyY2V8fCIifWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gbj9uLmNhbGwoYSxiKTp2b2lkIDB9d2luZG93LmxvZ0ZsYWdzfHx7fTt2YXIgZj1hLmFwaS5pbnN0YW5jZS5zdHlsZXMsZz1mLlNUWUxFX1NDT1BFX0FUVFJJQlVURSxoPSJzdHlsZSIsaT0iW3JlbD1zdHlsZXNoZWV0XSIsaj0iZ2xvYmFsIixrPSJwb2x5bWVyLXNjb3BlIixsPXtpbnN0YWxsU2hlZXRzOmZ1bmN0aW9uKCl7dGhpcy5jYWNoZVNoZWV0cygpLHRoaXMuY2FjaGVTdHlsZXMoKSx0aGlzLmluc3RhbGxMb2NhbFNoZWV0cygpLHRoaXMuaW5zdGFsbEdsb2JhbFN0eWxlcygpfSxjYWNoZVNoZWV0czpmdW5jdGlvbigpe3RoaXMuc2hlZXRzPXRoaXMuZmluZE5vZGVzKGkpLHRoaXMuc2hlZXRzLmZvckVhY2goZnVuY3Rpb24oYSl7YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9KX0sY2FjaGVTdHlsZXM6ZnVuY3Rpb24oKXt0aGlzLnN0eWxlcz10aGlzLmZpbmROb2RlcyhoKyJbIitrKyJdIiksdGhpcy5zdHlsZXMuZm9yRWFjaChmdW5jdGlvbihhKXthLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX0pfSxpbnN0YWxsTG9jYWxTaGVldHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNoZWV0cy5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIWEuaGFzQXR0cmlidXRlKGspfSksYj10aGlzLnRlbXBsYXRlQ29udGVudCgpO2lmKGIpe3ZhciBlPSIiO2EuZm9yRWFjaChmdW5jdGlvbihhKXtlKz1kKGEpKyJcbiJ9KSxlJiZiLmluc2VydEJlZm9yZShjKGUpLGIuZmlyc3RDaGlsZCl9fSxmaW5kTm9kZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoYSkuYXJyYXkoKSxkPXRoaXMudGVtcGxhdGVDb250ZW50KCk7aWYoZCl7dmFyIGU9ZC5xdWVyeVNlbGVjdG9yQWxsKGEpLmFycmF5KCk7Yz1jLmNvbmNhdChlKX1yZXR1cm4gYj9jLmZpbHRlcihiKTpjfSx0ZW1wbGF0ZUNvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnF1ZXJ5U2VsZWN0b3IoInRlbXBsYXRlIik7cmV0dXJuIGEmJnRlbXBsYXRlQ29udGVudChhKX0saW5zdGFsbEdsb2JhbFN0eWxlczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc3R5bGVGb3JTY29wZShqKTtiKGEsZG9jdW1lbnQuaGVhZCl9LGNzc1RleHRGb3JTY29wZTpmdW5jdGlvbihhKXt2YXIgYj0iIixjPSJbIitrKyI9IithKyJdIixmPWZ1bmN0aW9uKGEpe3JldHVybiBlKGEsYyl9LGc9dGhpcy5zaGVldHMuZmlsdGVyKGYpO2cuZm9yRWFjaChmdW5jdGlvbihhKXtiKz1kKGEpKyJcblxuIn0pO3ZhciBoPXRoaXMuc3R5bGVzLmZpbHRlcihmKTtyZXR1cm4gaC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IrPWEudGV4dENvbnRlbnQrIlxuXG4ifSksYn0sc3R5bGVGb3JTY29wZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNzc1RleHRGb3JTY29wZShhKTtyZXR1cm4gdGhpcy5jc3NUZXh0VG9TY29wZVN0eWxlKGIsYSl9LGNzc1RleHRUb1Njb3BlU3R5bGU6ZnVuY3Rpb24oYSxiKXtpZihhKXt2YXIgZD1jKGEpO3JldHVybiBkLnNldEF0dHJpYnV0ZShnLHRoaXMuZ2V0QXR0cmlidXRlKCJuYW1lIikrIi0iK2IpLGR9fX0sbT1IVE1MRWxlbWVudC5wcm90b3R5cGUsbj1tLm1hdGNoZXN8fG0ubWF0Y2hlc1NlbGVjdG9yfHxtLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8bS5tb3pNYXRjaGVzU2VsZWN0b3I7YS5hcGkuZGVjbGFyYXRpb24uc3R5bGVzPWwsYS5hcHBseVN0eWxlVG9TY29wZT1ifShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBhLnNsaWNlKDAsayk9PWd9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5zbGljZShrKX1mdW5jdGlvbiBkKGEpe3JldHVybiBhLnJlZj9hLnJlZi5jb250ZW50OmEuY29udGVudH12YXIgZT1hLmFwaS5pbnN0YW5jZS5ldmVudHMsZj1lLkRFTEVHQVRFUyxnPWUuRVZFTlRfUFJFRklYLGg9d2luZG93LmxvZ0ZsYWdzfHx7fSxpPXtpbmhlcml0RGVsZWdhdGVzOmZ1bmN0aW9uKGEpe3RoaXMuaW5oZXJpdE9iamVjdChhLGYpfSxwYXJzZUhvc3RFdmVudHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb3RvdHlwZVtmXTt0aGlzLmFkZEF0dHJpYnV0ZURlbGVnYXRlcyhhKX0sYWRkQXR0cmlidXRlRGVsZWdhdGVzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgZCxlPTA7ZD10aGlzLmF0dHJpYnV0ZXNbZV07ZSsrKWIoZC5uYW1lKSYmKGFbYyhkLm5hbWUpXT1kLnZhbHVlKX0scGFyc2VMb2NhbEV2ZW50czpmdW5jdGlvbigpe3RoaXMucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuZGVsZWdhdGVzPXt9LHRoaXMuYWNjdW11bGF0ZVRlbXBsYXRlZEV2ZW50cyhhLGEuZGVsZWdhdGVzKSxoLmV2ZW50cyYmY29uc29sZS5sb2coIlslc10gcGFyc2VMb2NhbEV2ZW50czoiLHRoaXMuYXR0cmlidXRlcy5uYW1lLnZhbHVlLGEuZGVsZWdhdGVzKX0sdGhpcyl9LGFjY3VtdWxhdGVUZW1wbGF0ZWRFdmVudHM6ZnVuY3Rpb24oYSxiKXtpZigidGVtcGxhdGUiPT09YS5sb2NhbE5hbWUpe3ZhciBjPWQoYSk7YyYmdGhpcy5hY2N1bXVsYXRlQ2hpbGRFdmVudHMoYyxiKX19LGFjY3VtdWxhdGVDaGlsZEV2ZW50czpmdW5jdGlvbihhLGIpe2EuY2hpbGROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuYWNjdW11bGF0ZUV2ZW50cyhhLGIpCn0sdGhpcyl9LGFjY3VtdWxhdGVFdmVudHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hY2N1bXVsYXRlQXR0cmlidXRlRXZlbnRzKGEsYiksdGhpcy5hY2N1bXVsYXRlQ2hpbGRFdmVudHMoYSxiKSx0aGlzLmFjY3VtdWxhdGVUZW1wbGF0ZWRFdmVudHMoYSxiKSxifSxhY2N1bXVsYXRlQXR0cmlidXRlRXZlbnRzOmZ1bmN0aW9uKGEsZCl7YS5hdHRyaWJ1dGVzJiZhLmF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihhKXtiKGEubmFtZSkmJnRoaXMuYWNjdW11bGF0ZUV2ZW50KGMoYS5uYW1lKSxkKX0sdGhpcyl9LGFjY3VtdWxhdGVFdmVudDpmdW5jdGlvbihhLGIpe2E9althXXx8YSxiW2FdPWJbYV18fDF9fSxqPXt3ZWJraXRhbmltYXRpb25zdGFydDoid2Via2l0QW5pbWF0aW9uU3RhcnQiLHdlYmtpdGFuaW1hdGlvbmVuZDoid2Via2l0QW5pbWF0aW9uRW5kIix3ZWJraXR0cmFuc2l0aW9uZW5kOiJ3ZWJraXRUcmFuc2l0aW9uRW5kIixkb21mb2N1c291dDoiRE9NRm9jdXNPdXQiLGRvbWZvY3VzaW46IkRPTUZvY3VzSW4ifSxrPWcubGVuZ3RoO2kuZXZlbnRfdHJhbnNsYXRpb25zPWosYS5hcGkuZGVjbGFyYXRpb24uZXZlbnRzPWl9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuYXBpLmluc3RhbmNlLmF0dHJpYnV0ZXMsYz1hLmFwaS5pbnN0YW5jZS5ldmVudHMsZD1bXSxlPXtjYWNoZVByb3BlcnRpZXM6ZnVuY3Rpb24oKXt0aGlzLnByb3RvdHlwZS5jdXN0b21Qcm9wZXJ0eU5hbWVzPXRoaXMuZ2V0Q3VzdG9tUHJvcGVydHlOYW1lcyh0aGlzLnByb3RvdHlwZSl9LGdldEN1c3RvbVByb3BlcnR5TmFtZXM6ZnVuY3Rpb24oYil7Zm9yKHZhciBjLGU9e307YiYmIWEuaXNCYXNlKGIpOyl7Zm9yKHZhciBnLGg9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYiksaT0wLGo9aC5sZW5ndGg7aj5pJiYoZz1oW2ldKTtpKyspZltnXXx8KGVbZ109ITAsYz0hMCk7Yj1iLl9fcHJvdG9fX31yZXR1cm4gYz9PYmplY3Qua2V5cyhlKTpkfX0sZj17fTtmW2IuUFVCTElTSEVEXT0xLGZbYi5JTlNUQU5DRV9BVFRSSUJVVEVTXT0xLGZbYy5ERUxFR0FURVNdPTEsYS5hcGkuZGVjbGFyYXRpb24ucHJvcGVydGllcz1lfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj1hLmFwaS5pbnN0YW5jZS5hdHRyaWJ1dGVzLGM9Yi5QVUJMSVNIRUQsZD1iLklOU1RBTkNFX0FUVFJJQlVURVMsZT0icHVibGlzaCIsZj0iYXR0cmlidXRlcyIsZz17aW5oZXJpdEF0dHJpYnV0ZXNPYmplY3RzOmZ1bmN0aW9uKGEpe3RoaXMuaW5oZXJpdE9iamVjdChhLGMpLHRoaXMuaW5oZXJpdE9iamVjdChhLGQpfSxwYXJzZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt0aGlzLnB1Ymxpc2hBdHRyaWJ1dGVzKHRoaXMucHJvdG90eXBlKSx0aGlzLnB1Ymxpc2hQcm9wZXJ0aWVzKHRoaXMucHJvdG90eXBlKSx0aGlzLmFjY3VtdWxhdGVJbnN0YW5jZUF0dHJpYnV0ZXMoKX0scHVibGlzaEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YVtjXSxkPXRoaXMuZ2V0QXR0cmlidXRlKGYpO2lmKGQpe3ZhciBlPWQuc3BsaXQoZC5pbmRleE9mKCIsIik+PTA/IiwiOiIgIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksIWF8fGEgaW4gYnx8KGJbYV09bnVsbCl9KX1PYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2MgaW4gYXx8KGFbY109YltjXSl9KX0scHVibGlzaFByb3BlcnRpZXM6ZnVuY3Rpb24oYSl7dGhpcy5wdWJsaXNoUHVibGlzaChhKX0scHVibGlzaFB1Ymxpc2g6ZnVuY3Rpb24oYSl7aWYoYS5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIGI9YVtlXTtiJiYoT2JqZWN0LmtleXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXthW2NdPWJbY119KSxQbGF0Zm9ybS5taXhpbihhW2NdLGIpKX19LGFjY3VtdWxhdGVJbnN0YW5jZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb3RvdHlwZVtkXTt0aGlzLmF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihiKXt0aGlzLmlzSW5zdGFuY2VBdHRyaWJ1dGUoYi5uYW1lKSYmKGFbYi5uYW1lXT1iLnZhbHVlKX0sdGhpcyl9LGlzSW5zdGFuY2VBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIXRoaXMuYmxhY2tMaXN0W2FdJiYib24tIiE9PWEuc2xpY2UoMCwzKX0sYmxhY2tMaXN0OntuYW1lOjEsImV4dGVuZHMiOjEsY29uc3RydWN0b3I6MSxub3NjcmlwdDoxfX07Zy5ibGFja0xpc3RbZl09MSxhLmFwaS5kZWNsYXJhdGlvbi5hdHRyaWJ1dGVzPWd9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIE9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQuZ2V0UHJvdG90eXBlRm9yVGFnKGEpKX1mdW5jdGlvbiBjKGEpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYSk7YS5fX3Byb3RvX189YixlKGIpJiYoYi5fX3Byb3RvX189T2JqZWN0LmdldFByb3RvdHlwZU9mKGIpKX19dmFyIGQ9YS5hcGksZT1hLmlzQmFzZSxmPWEuZXh0ZW5kLGc9YigpLGc9e2dlbmVyYXRlQ3VzdG9tUHJvdG90eXBlOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcy5nZW5lcmF0ZUJhc2VQcm90b3R5cGUoYik7cmV0dXJuIHRoaXMuYWRkTmFtZWRBcGkoZCxhKSxjKGQpLGR9LGdlbmVyYXRlQmFzZVByb3RvdHlwZTpmdW5jdGlvbihhKXt2YXIgYz1iKGEpO3JldHVybiB0aGlzLmVuc3VyZUJhc2VBcGkoYyl9LGVuc3VyZUJhc2VBcGk6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuUG9seW1lckJhc2V8fChPYmplY3Qua2V5cyhkLmluc3RhbmNlKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe2YoYSxkLmluc3RhbmNlW2JdKX0pLGE9T2JqZWN0LmNyZWF0ZShhKSksdGhpcy5pbmhlcml0QXR0cmlidXRlc09iamVjdHMoYSksdGhpcy5pbmhlcml0RGVsZWdhdGVzKGEpLGF9LGFkZE5hbWVkQXBpOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGYoYixhLmdldFJlZ2lzdGVyZWRQcm90b3R5cGUoYykpfSxpbmhlcml0T2JqZWN0OmZ1bmN0aW9uKGEsYil7YVtiXT1mKHt9LE9iamVjdC5nZXRQcm90b3R5cGVPZihhKVtiXSl9LHJlZ2lzdGVyUHJvdG90eXBlOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3Byb3RvdHlwZTp0aGlzLnByb3RvdHlwZX07YiYmYi5pbmRleE9mKCItIik8MCYmKGMuZXh0ZW5kcz1iKSx0aGlzLmN0b3I9ZG9jdW1lbnQucmVnaXN0ZXIoYSxjKSx0aGlzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10aGlzLmN0b3IsSFRNTEVsZW1lbnQucmVnaXN0ZXIoYSx0aGlzLnByb3RvdHlwZSl9fTtkLmRlY2xhcmF0aW9uLnByb3RvdHlwZT1nfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7a1thXT1ifHx7fSxkKGEpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGtbYV19ZnVuY3Rpb24gZChhKXtsW2FdJiYobFthXS5yZWdpc3RlcldoZW5SZWFkeSgpLGRlbGV0ZSBsW2FdKX1mdW5jdGlvbiBlKGEpe25bYV09ITA7dmFyIGI9bVthXTtiJiYoYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVnaXN0ZXJXaGVuUmVhZHkoKX0pLGRlbGV0ZSBtW2FdKX1mdW5jdGlvbiBmKGEpe3JldHVybiBuW2FdfWZ1bmN0aW9uIGcoYSl7d2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMucmVhZHlUaW1lP2FkZEV2ZW50TGlzdGVuZXIoIkhUTUxJbXBvcnRzTG9hZGVkIixhKTphKCl9dmFyIGg9YS5leHRlbmQsaT1hLmFwaS5kZWNsYXJhdGlvbixqPWgoT2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpLHtjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLm5hbWU9dGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSx0aGlzLnJlZ2lzdGVyV2hlblJlYWR5KCl9LHJlZ2lzdGVyV2hlblJlYWR5OmZ1bmN0aW9uKCl7aWYoIXRoaXMud2FpdGluZ0ZvclByb3RvdHlwZSh0aGlzLm5hbWUpKXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZSgiZXh0ZW5kcyIpO3JldHVybiB0aGlzLndhaXRpbmdGb3JFeHRlbmRlZShhKT8oY29uc29sZS53YXJuKHRoaXMubmFtZSsiOiB3YWl0aW5nRm9yRXh0ZW5kZWU6IithKSx2b2lkIDApOihkb2N1bWVudC5jb250YWlucyh0aGlzKT9nKGZ1bmN0aW9uKCl7dGhpcy5yZWdpc3Rlcih0aGlzLm5hbWUsYSl9LmJpbmQodGhpcykpOnRoaXMucmVnaXN0ZXIodGhpcy5uYW1lLGEpLHZvaWQgMCl9fSx3YWl0aW5nRm9yUHJvdG90eXBlOmZ1bmN0aW9uKGEpe2lmKCFjKGEpKXtpZihsW2FdPXRoaXMsdGhpcy5oYXNBdHRyaWJ1dGUoIm5vc2NyaXB0IikpaWYod2luZG93LkN1c3RvbUVsZW1lbnRzJiYhQ3VzdG9tRWxlbWVudHMudXNlTmF0aXZlKWIoYSk7ZWxzZXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLnRleHRDb250ZW50PSJQb2x5bWVyKCciK2ErIicpOyIsdGhpcy5hcHBlbmRDaGlsZChkKX1yZXR1cm4hMH19LHdhaXRpbmdGb3JFeHRlbmRlZTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmYS5pbmRleE9mKCItIik+PTAmJiFmKGEpPygobVthXT1tW2FdfHxbXSkucHVzaCh0aGlzKSwhMCk6dm9pZCAwfSxyZWdpc3RlcjpmdW5jdGlvbihhLGIpe3RoaXMucHJvdG90eXBlPXRoaXMuZ2VuZXJhdGVDdXN0b21Qcm90b3R5cGUoYSxiKSx0aGlzLnByb3RvdHlwZS5lbGVtZW50PXRoaXMsdGhpcy5hZGRSZXNvbHZlUGF0aEFwaSgpLHRoaXMuZGVzdWdhcigpLHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmUGxhdGZvcm0uU2hhZG93Q1NTLnNoaW1TdHlsaW5nKHRoaXMudGVtcGxhdGVDb250ZW50KCksYSxiKSx0aGlzLnJlZ2lzdGVyUHJvdG90eXBlKGEsYiksdGhpcy5wdWJsaXNoQ29uc3RydWN0b3IoKSxlKGEpfSxkZXN1Z2FyOmZ1bmN0aW9uKCl7dGhpcy5wYXJzZUF0dHJpYnV0ZXMoKSx0aGlzLnBhcnNlSG9zdEV2ZW50cygpLHRoaXMucGFyc2VMb2NhbEV2ZW50cygpLHRoaXMuaW5zdGFsbFNoZWV0cygpLHRoaXMucHJvdG90eXBlLnJlZ2lzdGVyQ2FsbGJhY2smJnRoaXMucHJvdG90eXBlLnJlZ2lzdGVyQ2FsbGJhY2sodGhpcyksdGhpcy5jYWNoZVByb3BlcnRpZXMoKX0scHVibGlzaENvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRBdHRyaWJ1dGUoImNvbnN0cnVjdG9yIik7YSYmKHdpbmRvd1thXT10aGlzLmN0b3IpfX0pO09iamVjdC5rZXlzKGkpLmZvckVhY2goZnVuY3Rpb24oYSl7aChqLGlbYV0pfSksZG9jdW1lbnQucmVnaXN0ZXIoInBvbHltZXItZWxlbWVudCIse3Byb3RvdHlwZTpqfSk7dmFyIGs9e30sbD17fSxtPXt9LG49e307YS5nZXRSZWdpc3RlcmVkUHJvdG90eXBlPWMsaChiLGEpLHdpbmRvdy5Qb2x5bWVyPWJ9KFBvbHltZXIpLFBvbHltZXIucmVnaXN0ZXI9ZnVuY3Rpb24oYSl7aWYoYSE9d2luZG93KXt2YXIgYj1hLmdldEF0dHJpYnV0ZSgibmFtZSIpO3Rocm93IG5ldyBFcnJvcigiUG9seW1lci5yZWdpc3RlciBpcyBkZXByZWNhdGVkIGluIGRlY2xhcmF0aW9uIG9mICIrYisiLiBQbGVhc2Ugc2VlIGh0dHA6Ly93d3cucG9seW1lci1wcm9qZWN0Lm9yZy9nZXR0aW5nLXN0YXJ0ZWQuaHRtbCIpfX07Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBvbHltZXIubWluLmpzLm1hcA==",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 05:36:27 GMT",
                    "Content-Length": "167260",
                    "Date": "Fri, 07 Nov 2014 05:36:28 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}